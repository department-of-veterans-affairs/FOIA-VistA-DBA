KIDS Distribution saved on Oct 28, 2002@13:05:56
VITALS v5, NUR*4*37 and GMRY*4*5
**KIDS**:GEN. MED. REC. - VITALS 5.0^NUR*4.0*37^GMRY*4.0*5^

**INSTALL NAME**
GEN. MED. REC. - VITALS 5.0
"BLD",4068,0)
GEN. MED. REC. - VITALS 5.0^GEN. MED. REC. - VITALS^0^3021028^y
"BLD",4068,1,0)
^^1^1^3021022^^
"BLD",4068,1,1,0)
This software is used to track patient vital signs and measurements.
"BLD",4068,4,0)
^9.64PA^120.57^5
"BLD",4068,4,120.5,0)
120.5
"BLD",4068,4,120.5,222)
y^y^f^^^^n
"BLD",4068,4,120.51,0)
120.51
"BLD",4068,4,120.51,222)
y^y^f^^n^^y^a^n
"BLD",4068,4,120.52,0)
120.52
"BLD",4068,4,120.52,222)
y^y^f^^n^^y^a^y
"BLD",4068,4,120.52,224)
I Y<90
"BLD",4068,4,120.53,0)
120.53
"BLD",4068,4,120.53,222)
y^y^f^^n^^y^a^n
"BLD",4068,4,120.57,0)
120.57
"BLD",4068,4,120.57,222)
y^y^f^^n^^y^a^y
"BLD",4068,4,"B",120.5,120.5)

"BLD",4068,4,"B",120.51,120.51)

"BLD",4068,4,"B",120.52,120.52)

"BLD",4068,4,"B",120.53,120.53)

"BLD",4068,4,"B",120.57,120.57)

"BLD",4068,"ABNS",0)
^9.66A^^
"BLD",4068,"ABPKG")
n^n
"BLD",4068,"INI")

"BLD",4068,"INID")

"BLD",4068,"INIT")
GMVXPST
"BLD",4068,"KRN",0)
^9.67PA^8989.52^20
"BLD",4068,"KRN",.4,0)
.4
"BLD",4068,"KRN",.4,"NM",0)
^9.68A^^
"BLD",4068,"KRN",.401,0)
.401
"BLD",4068,"KRN",.401,"NM",0)
^9.68A^^
"BLD",4068,"KRN",.402,0)
.402
"BLD",4068,"KRN",.402,"NM",0)
^9.68A^^0
"BLD",4068,"KRN",.403,0)
.403
"BLD",4068,"KRN",.403,"NM",0)
^9.68A^^
"BLD",4068,"KRN",.5,0)
.5
"BLD",4068,"KRN",.5,"NM",0)
^9.68A^^
"BLD",4068,"KRN",.84,0)
.84
"BLD",4068,"KRN",.84,"NM",0)
^9.68A^^
"BLD",4068,"KRN",3.6,0)
3.6
"BLD",4068,"KRN",3.6,"NM",0)
^9.68A^^
"BLD",4068,"KRN",3.8,0)
3.8
"BLD",4068,"KRN",3.8,"NM",0)
^9.68A^^
"BLD",4068,"KRN",9.2,0)
9.2
"BLD",4068,"KRN",9.2,"NM",0)
^9.68A^^0
"BLD",4068,"KRN",9.8,0)
9.8
"BLD",4068,"KRN",9.8,"NM",0)
^9.68A^281^122
"BLD",4068,"KRN",9.8,"NM",135,0)
GMVCAQU^^0^B15251597
"BLD",4068,"KRN",9.8,"NM",136,0)
GMVCLIN^^0^B8492448
"BLD",4068,"KRN",9.8,"NM",141,0)
GMVGETD^^0^B10666719
"BLD",4068,"KRN",9.8,"NM",142,0)
GMVGETD1^^0^B3929660
"BLD",4068,"KRN",9.8,"NM",143,0)
GMVGETD2^^0^B19578080
"BLD",4068,"KRN",9.8,"NM",144,0)
GMVGETQ^^0^B4969394
"BLD",4068,"KRN",9.8,"NM",146,0)
GMVGGR1^^0^B19614768
"BLD",4068,"KRN",9.8,"NM",147,0)
GMVGGR2^^0^B16039152
"BLD",4068,"KRN",9.8,"NM",149,0)
GMVLAT0^^0^B27866387
"BLD",4068,"KRN",9.8,"NM",150,0)
GMVLATS^^0^B3425375
"BLD",4068,"KRN",9.8,"NM",153,0)
GMVTBL1^^0^B10843248
"BLD",4068,"KRN",9.8,"NM",154,0)
GMVUTL1^^0^B4969976
"BLD",4068,"KRN",9.8,"NM",155,0)
GMVUTL2^^0^B2749155
"BLD",4068,"KRN",9.8,"NM",156,0)
GMVUTL3^^0^B5074648
"BLD",4068,"KRN",9.8,"NM",161,0)
GMVTBL4^^0^B13751767
"BLD",4068,"KRN",9.8,"NM",166,0)
GMVTBL0^^0^B14650188
"BLD",4068,"KRN",9.8,"NM",167,0)
GMVTBL3^^0^B1757292
"BLD",4068,"KRN",9.8,"NM",172,0)
GMVTBL2^^0^B1221059
"BLD",4068,"KRN",9.8,"NM",173,0)
GMVXENV^^0^B1410944
"BLD",4068,"KRN",9.8,"NM",174,0)
GMVDCCHK^^0^B10141112
"BLD",4068,"KRN",9.8,"NM",175,0)
GMVDCCNV^^0^B5087093
"BLD",4068,"KRN",9.8,"NM",176,0)
GMVDCEXT^^0^B43745459
"BLD",4068,"KRN",9.8,"NM",177,0)
GMVDCHLP^^0^B33391583
"BLD",4068,"KRN",9.8,"NM",178,0)
GMVDCRPC^^0^B38010920
"BLD",4068,"KRN",9.8,"NM",179,0)
GMVDCSAV^^0^B17175551
"BLD",4068,"KRN",9.8,"NM",180,0)
GMVDCUTL^^0^B18284518
"BLD",4068,"KRN",9.8,"NM",181,0)
GMVDCVAL^^0^B48794043
"BLD",4068,"KRN",9.8,"NM",185,0)
GMVUTL5^^0^B13221360
"BLD",4068,"KRN",9.8,"NM",188,0)
GMVUTL8^^0^B922976
"BLD",4068,"KRN",9.8,"NM",189,0)
GMVUTL7^^0^B22243524
"BLD",4068,"KRN",9.8,"NM",190,0)
GMVDCVAM^^0^B13500702
"BLD",4068,"KRN",9.8,"NM",191,0)
GMVBMI^^0^B5347273
"BLD",4068,"KRN",9.8,"NM",192,0)
GMVBP0^^0^B13359839
"BLD",4068,"KRN",9.8,"NM",193,0)
GMVBP1^^0^B12486565
"BLD",4068,"KRN",9.8,"NM",194,0)
GMVBP2^^0^B9431833
"BLD",4068,"KRN",9.8,"NM",195,0)
GMVBP3^^0^B5419738
"BLD",4068,"KRN",9.8,"NM",196,0)
GMVBP4^^0^B8957236
"BLD",4068,"KRN",9.8,"NM",197,0)
GMVBP5^^0^B10654489
"BLD",4068,"KRN",9.8,"NM",198,0)
GMVCHAR^^0^B3526901
"BLD",4068,"KRN",9.8,"NM",199,0)
GMVDS0^^0^B20439902
"BLD",4068,"KRN",9.8,"NM",200,0)
GMVDS1^^0^B17212354
"BLD",4068,"KRN",9.8,"NM",201,0)
GMVDS2^^0^B3421820
"BLD",4068,"KRN",9.8,"NM",202,0)
GMVER0^^0^B9040069
"BLD",4068,"KRN",9.8,"NM",203,0)
GMVER1^^0^B43330710
"BLD",4068,"KRN",9.8,"NM",204,0)
GMVFSYN^^0^B6699575
"BLD",4068,"KRN",9.8,"NM",205,0)
GMVFUT0^^0^B5587382
"BLD",4068,"KRN",9.8,"NM",206,0)
GMVFUT2^^0^B2602968
"BLD",4068,"KRN",9.8,"NM",207,0)
GMVFUT3^^0^B7545760
"BLD",4068,"KRN",9.8,"NM",208,0)
GMVGR0^^0^B16703352
"BLD",4068,"KRN",9.8,"NM",209,0)
GMVGR1^^0^B35800771
"BLD",4068,"KRN",9.8,"NM",210,0)
GMVGR2^^0^B15331533
"BLD",4068,"KRN",9.8,"NM",211,0)
GMVGR3^^0^B5571762
"BLD",4068,"KRN",9.8,"NM",212,0)
GMVGR4^^0^B7596013
"BLD",4068,"KRN",9.8,"NM",213,0)
GMVGR5^^0^B4962271
"BLD",4068,"KRN",9.8,"NM",214,0)
GMVGR6^^0^B7296570
"BLD",4068,"KRN",9.8,"NM",215,0)
GMVGR7^^0^B2291980
"BLD",4068,"KRN",9.8,"NM",216,0)
GMVHB0^^0^B8165934
"BLD",4068,"KRN",9.8,"NM",217,0)
GMVHB1^^0^B7179841
"BLD",4068,"KRN",9.8,"NM",218,0)
GMVHB2^^0^B315992
"BLD",4068,"KRN",9.8,"NM",219,0)
GMVHB3^^0^B1051012
"BLD",4068,"KRN",9.8,"NM",220,0)
GMVHB4^^0^B8323479
"BLD",4068,"KRN",9.8,"NM",221,0)
GMVHG0^^0^B15329645
"BLD",4068,"KRN",9.8,"NM",222,0)
GMVHG1^^0^B14092370
"BLD",4068,"KRN",9.8,"NM",223,0)
GMVHG2^^0^B1187119
"BLD",4068,"KRN",9.8,"NM",224,0)
GMVHG3^^0^B1723226
"BLD",4068,"KRN",9.8,"NM",225,0)
GMVHG4^^0^B19606083
"BLD",4068,"KRN",9.8,"NM",226,0)
GMVHPN0^^0^B11198074
"BLD",4068,"KRN",9.8,"NM",227,0)
GMVHPN1^^0^B4697998
"BLD",4068,"KRN",9.8,"NM",228,0)
GMVHPN2^^0^B2723922
"BLD",4068,"KRN",9.8,"NM",229,0)
GMVHPO0^^0^B14548253
"BLD",4068,"KRN",9.8,"NM",230,0)
GMVHPO1^^0^B7879224
"BLD",4068,"KRN",9.8,"NM",231,0)
GMVHPO2^^0^B806231
"BLD",4068,"KRN",9.8,"NM",232,0)
GMVHPO3^^0^B8864974
"BLD",4068,"KRN",9.8,"NM",233,0)
GMVHW0^^0^B13231330
"BLD",4068,"KRN",9.8,"NM",234,0)
GMVHW1^^0^B7050200
"BLD",4068,"KRN",9.8,"NM",235,0)
GMVHW2^^0^B1856531
"BLD",4068,"KRN",9.8,"NM",236,0)
GMVKPN0^^0^B9688497
"BLD",4068,"KRN",9.8,"NM",237,0)
GMVKPN1^^0^B9136665
"BLD",4068,"KRN",9.8,"NM",238,0)
GMVKPN2^^0^B4357732
"BLD",4068,"KRN",9.8,"NM",239,0)
GMVKPO0^^0^B15397112
"BLD",4068,"KRN",9.8,"NM",240,0)
GMVKPO1^^0^B7718793
"BLD",4068,"KRN",9.8,"NM",241,0)
GMVKPO2^^0^B9909633
"BLD",4068,"KRN",9.8,"NM",242,0)
GMVKPO3^^0^B8417913
"BLD",4068,"KRN",9.8,"NM",243,0)
GMVKPO4^^0^B8779887
"BLD",4068,"KRN",9.8,"NM",244,0)
GMVLBP0^^0^B13331145
"BLD",4068,"KRN",9.8,"NM",245,0)
GMVLBP1^^0^B4200707
"BLD",4068,"KRN",9.8,"NM",246,0)
GMVLBP2^^0^B6983764
"BLD",4068,"KRN",9.8,"NM",247,0)
GMVLGQU^^0^B5673235
"BLD",4068,"KRN",9.8,"NM",248,0)
GMVLPO0^^0^B16903360
"BLD",4068,"KRN",9.8,"NM",249,0)
GMVLPO1^^0^B4608773
"BLD",4068,"KRN",9.8,"NM",250,0)
GMVLPO2^^0^B8392956
"BLD",4068,"KRN",9.8,"NM",251,0)
GMVLWT0^^0^B6542672
"BLD",4068,"KRN",9.8,"NM",252,0)
GMVLWT1^^0^B12430375
"BLD",4068,"KRN",9.8,"NM",253,0)
GMVLWT2^^0^B2265423
"BLD",4068,"KRN",9.8,"NM",254,0)
GMVLWT3^^0^B6391095
"BLD",4068,"KRN",9.8,"NM",255,0)
GMVQUAL^^0^B9718446
"BLD",4068,"KRN",9.8,"NM",256,0)
GMVRPCP^^0^B25308667
"BLD",4068,"KRN",9.8,"NM",257,0)
GMVSAS0^^0^B4183405
"BLD",4068,"KRN",9.8,"NM",258,0)
GMVSC0^^0^B17816371
"BLD",4068,"KRN",9.8,"NM",259,0)
GMVSC1^^0^B8913074
"BLD",4068,"KRN",9.8,"NM",260,0)
GMVSC2^^0^B15927181
"BLD",4068,"KRN",9.8,"NM",261,0)
GMVSR0^^0^B30880367
"BLD",4068,"KRN",9.8,"NM",262,0)
GMVSR1^^0^B27592616
"BLD",4068,"KRN",9.8,"NM",263,0)
GMVSR2^^0^B6599549
"BLD",4068,"KRN",9.8,"NM",264,0)
GMVUT2^^0^B80155
"BLD",4068,"KRN",9.8,"NM",265,0)
GMVVS1^^0^B26865613
"BLD",4068,"KRN",9.8,"NM",266,0)
GMVVS2^^0^B20612790
"BLD",4068,"KRN",9.8,"NM",267,0)
GMVVS3^^0^B6382444
"BLD",4068,"KRN",9.8,"NM",268,0)
GMVVS4^^0^B6512040
"BLD",4068,"KRN",9.8,"NM",269,0)
GMVWT0^^0^B6484476
"BLD",4068,"KRN",9.8,"NM",270,0)
GMVWT1^^0^B15639526
"BLD",4068,"KRN",9.8,"NM",271,0)
GMVWT2^^0^B7774373
"BLD",4068,"KRN",9.8,"NM",272,0)
GMVWT3^^0^B4988725
"BLD",4068,"KRN",9.8,"NM",273,0)
GMVWT4^^0^B6015189
"BLD",4068,"KRN",9.8,"NM",274,0)
GMVUTL^^0^B84410
"BLD",4068,"KRN",9.8,"NM",275,0)
GMVXPST^^0^B7363858
"BLD",4068,"KRN",9.8,"NM",276,0)
GMVRPCM^^0^B70249405
"BLD",4068,"KRN",9.8,"NM",277,0)
GMVUT0^^0^B1484386
"BLD",4068,"KRN",9.8,"NM",278,0)
GMVUT3^^0^B868656
"BLD",4068,"KRN",9.8,"NM",279,0)
GMVPCE3^^0^B11261200
"BLD",4068,"KRN",9.8,"NM",280,0)
GMVRPCU^^0^B5083930
"BLD",4068,"KRN",9.8,"NM",281,0)
GMVPAR^^0^B8679095
"BLD",4068,"KRN",9.8,"NM","B","GMVBMI",191)

"BLD",4068,"KRN",9.8,"NM","B","GMVBP0",192)

"BLD",4068,"KRN",9.8,"NM","B","GMVBP1",193)

"BLD",4068,"KRN",9.8,"NM","B","GMVBP2",194)

"BLD",4068,"KRN",9.8,"NM","B","GMVBP3",195)

"BLD",4068,"KRN",9.8,"NM","B","GMVBP4",196)

"BLD",4068,"KRN",9.8,"NM","B","GMVBP5",197)

"BLD",4068,"KRN",9.8,"NM","B","GMVCAQU",135)

"BLD",4068,"KRN",9.8,"NM","B","GMVCHAR",198)

"BLD",4068,"KRN",9.8,"NM","B","GMVCLIN",136)

"BLD",4068,"KRN",9.8,"NM","B","GMVDCCHK",174)

"BLD",4068,"KRN",9.8,"NM","B","GMVDCCNV",175)

"BLD",4068,"KRN",9.8,"NM","B","GMVDCEXT",176)

"BLD",4068,"KRN",9.8,"NM","B","GMVDCHLP",177)

"BLD",4068,"KRN",9.8,"NM","B","GMVDCRPC",178)

"BLD",4068,"KRN",9.8,"NM","B","GMVDCSAV",179)

"BLD",4068,"KRN",9.8,"NM","B","GMVDCUTL",180)

"BLD",4068,"KRN",9.8,"NM","B","GMVDCVAL",181)

"BLD",4068,"KRN",9.8,"NM","B","GMVDCVAM",190)

"BLD",4068,"KRN",9.8,"NM","B","GMVDS0",199)

"BLD",4068,"KRN",9.8,"NM","B","GMVDS1",200)

"BLD",4068,"KRN",9.8,"NM","B","GMVDS2",201)

"BLD",4068,"KRN",9.8,"NM","B","GMVER0",202)

"BLD",4068,"KRN",9.8,"NM","B","GMVER1",203)

"BLD",4068,"KRN",9.8,"NM","B","GMVFSYN",204)

"BLD",4068,"KRN",9.8,"NM","B","GMVFUT0",205)

"BLD",4068,"KRN",9.8,"NM","B","GMVFUT2",206)

"BLD",4068,"KRN",9.8,"NM","B","GMVFUT3",207)

"BLD",4068,"KRN",9.8,"NM","B","GMVGETD",141)

"BLD",4068,"KRN",9.8,"NM","B","GMVGETD1",142)

"BLD",4068,"KRN",9.8,"NM","B","GMVGETD2",143)

"BLD",4068,"KRN",9.8,"NM","B","GMVGETQ",144)

"BLD",4068,"KRN",9.8,"NM","B","GMVGGR1",146)

"BLD",4068,"KRN",9.8,"NM","B","GMVGGR2",147)

"BLD",4068,"KRN",9.8,"NM","B","GMVGR0",208)

"BLD",4068,"KRN",9.8,"NM","B","GMVGR1",209)

"BLD",4068,"KRN",9.8,"NM","B","GMVGR2",210)

"BLD",4068,"KRN",9.8,"NM","B","GMVGR3",211)

"BLD",4068,"KRN",9.8,"NM","B","GMVGR4",212)

"BLD",4068,"KRN",9.8,"NM","B","GMVGR5",213)

"BLD",4068,"KRN",9.8,"NM","B","GMVGR6",214)

"BLD",4068,"KRN",9.8,"NM","B","GMVGR7",215)

"BLD",4068,"KRN",9.8,"NM","B","GMVHB0",216)

"BLD",4068,"KRN",9.8,"NM","B","GMVHB1",217)

"BLD",4068,"KRN",9.8,"NM","B","GMVHB2",218)

"BLD",4068,"KRN",9.8,"NM","B","GMVHB3",219)

"BLD",4068,"KRN",9.8,"NM","B","GMVHB4",220)

"BLD",4068,"KRN",9.8,"NM","B","GMVHG0",221)

"BLD",4068,"KRN",9.8,"NM","B","GMVHG1",222)

"BLD",4068,"KRN",9.8,"NM","B","GMVHG2",223)

"BLD",4068,"KRN",9.8,"NM","B","GMVHG3",224)

"BLD",4068,"KRN",9.8,"NM","B","GMVHG4",225)

"BLD",4068,"KRN",9.8,"NM","B","GMVHPN0",226)

"BLD",4068,"KRN",9.8,"NM","B","GMVHPN1",227)

"BLD",4068,"KRN",9.8,"NM","B","GMVHPN2",228)

"BLD",4068,"KRN",9.8,"NM","B","GMVHPO0",229)

"BLD",4068,"KRN",9.8,"NM","B","GMVHPO1",230)

"BLD",4068,"KRN",9.8,"NM","B","GMVHPO2",231)

"BLD",4068,"KRN",9.8,"NM","B","GMVHPO3",232)

"BLD",4068,"KRN",9.8,"NM","B","GMVHW0",233)

"BLD",4068,"KRN",9.8,"NM","B","GMVHW1",234)

"BLD",4068,"KRN",9.8,"NM","B","GMVHW2",235)

"BLD",4068,"KRN",9.8,"NM","B","GMVKPN0",236)

"BLD",4068,"KRN",9.8,"NM","B","GMVKPN1",237)

"BLD",4068,"KRN",9.8,"NM","B","GMVKPN2",238)

"BLD",4068,"KRN",9.8,"NM","B","GMVKPO0",239)

"BLD",4068,"KRN",9.8,"NM","B","GMVKPO1",240)

"BLD",4068,"KRN",9.8,"NM","B","GMVKPO2",241)

"BLD",4068,"KRN",9.8,"NM","B","GMVKPO3",242)

"BLD",4068,"KRN",9.8,"NM","B","GMVKPO4",243)

"BLD",4068,"KRN",9.8,"NM","B","GMVLAT0",149)

"BLD",4068,"KRN",9.8,"NM","B","GMVLATS",150)

"BLD",4068,"KRN",9.8,"NM","B","GMVLBP0",244)

"BLD",4068,"KRN",9.8,"NM","B","GMVLBP1",245)

"BLD",4068,"KRN",9.8,"NM","B","GMVLBP2",246)

"BLD",4068,"KRN",9.8,"NM","B","GMVLGQU",247)

"BLD",4068,"KRN",9.8,"NM","B","GMVLPO0",248)

"BLD",4068,"KRN",9.8,"NM","B","GMVLPO1",249)

"BLD",4068,"KRN",9.8,"NM","B","GMVLPO2",250)

"BLD",4068,"KRN",9.8,"NM","B","GMVLWT0",251)

"BLD",4068,"KRN",9.8,"NM","B","GMVLWT1",252)

"BLD",4068,"KRN",9.8,"NM","B","GMVLWT2",253)

"BLD",4068,"KRN",9.8,"NM","B","GMVLWT3",254)

"BLD",4068,"KRN",9.8,"NM","B","GMVPAR",281)

"BLD",4068,"KRN",9.8,"NM","B","GMVPCE3",279)

"BLD",4068,"KRN",9.8,"NM","B","GMVQUAL",255)

"BLD",4068,"KRN",9.8,"NM","B","GMVRPCM",276)

"BLD",4068,"KRN",9.8,"NM","B","GMVRPCP",256)

"BLD",4068,"KRN",9.8,"NM","B","GMVRPCU",280)

"BLD",4068,"KRN",9.8,"NM","B","GMVSAS0",257)

"BLD",4068,"KRN",9.8,"NM","B","GMVSC0",258)

"BLD",4068,"KRN",9.8,"NM","B","GMVSC1",259)

"BLD",4068,"KRN",9.8,"NM","B","GMVSC2",260)

"BLD",4068,"KRN",9.8,"NM","B","GMVSR0",261)

"BLD",4068,"KRN",9.8,"NM","B","GMVSR1",262)

"BLD",4068,"KRN",9.8,"NM","B","GMVSR2",263)

"BLD",4068,"KRN",9.8,"NM","B","GMVTBL0",166)

"BLD",4068,"KRN",9.8,"NM","B","GMVTBL1",153)

"BLD",4068,"KRN",9.8,"NM","B","GMVTBL2",172)

"BLD",4068,"KRN",9.8,"NM","B","GMVTBL3",167)

"BLD",4068,"KRN",9.8,"NM","B","GMVTBL4",161)

"BLD",4068,"KRN",9.8,"NM","B","GMVUT0",277)

"BLD",4068,"KRN",9.8,"NM","B","GMVUT2",264)

"BLD",4068,"KRN",9.8,"NM","B","GMVUT3",278)

"BLD",4068,"KRN",9.8,"NM","B","GMVUTL",274)

"BLD",4068,"KRN",9.8,"NM","B","GMVUTL1",154)

"BLD",4068,"KRN",9.8,"NM","B","GMVUTL2",155)

"BLD",4068,"KRN",9.8,"NM","B","GMVUTL3",156)

"BLD",4068,"KRN",9.8,"NM","B","GMVUTL5",185)

"BLD",4068,"KRN",9.8,"NM","B","GMVUTL7",189)

"BLD",4068,"KRN",9.8,"NM","B","GMVUTL8",188)

"BLD",4068,"KRN",9.8,"NM","B","GMVVS1",265)

"BLD",4068,"KRN",9.8,"NM","B","GMVVS2",266)

"BLD",4068,"KRN",9.8,"NM","B","GMVVS3",267)

"BLD",4068,"KRN",9.8,"NM","B","GMVVS4",268)

"BLD",4068,"KRN",9.8,"NM","B","GMVWT0",269)

"BLD",4068,"KRN",9.8,"NM","B","GMVWT1",270)

"BLD",4068,"KRN",9.8,"NM","B","GMVWT2",271)

"BLD",4068,"KRN",9.8,"NM","B","GMVWT3",272)

"BLD",4068,"KRN",9.8,"NM","B","GMVWT4",273)

"BLD",4068,"KRN",9.8,"NM","B","GMVXENV",173)

"BLD",4068,"KRN",9.8,"NM","B","GMVXPST",275)

"BLD",4068,"KRN",19,0)
19
"BLD",4068,"KRN",19,"NM",0)
^9.68A^32^1
"BLD",4068,"KRN",19,"NM",32,0)
GMV V/M GUI^^0
"BLD",4068,"KRN",19,"NM","B","GMV V/M GUI",32)

"BLD",4068,"KRN",19.1,0)
19.1
"BLD",4068,"KRN",19.1,"NM",0)
^9.68A^1^1
"BLD",4068,"KRN",19.1,"NM",1,0)
GMV MANAGER^^0
"BLD",4068,"KRN",19.1,"NM","B","GMV MANAGER",1)

"BLD",4068,"KRN",101,0)
101
"BLD",4068,"KRN",101,"NM",0)
^9.68A^^0
"BLD",4068,"KRN",409.61,0)
409.61
"BLD",4068,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",4068,"KRN",771,0)
771
"BLD",4068,"KRN",771,"NM",0)
^9.68A^^
"BLD",4068,"KRN",869.2,0)
869.2
"BLD",4068,"KRN",869.2,"NM",0)
^9.68A^^
"BLD",4068,"KRN",870,0)
870
"BLD",4068,"KRN",870,"NM",0)
^9.68A^^
"BLD",4068,"KRN",8989.51,0)
8989.51
"BLD",4068,"KRN",8989.51,"NM",0)
^9.68A^7^7
"BLD",4068,"KRN",8989.51,"NM",1,0)
GMV TEMPLATE^^0
"BLD",4068,"KRN",8989.51,"NM",2,0)
GMV TEMPLATE DEFAULT^^0
"BLD",4068,"KRN",8989.51,"NM",3,0)
GMV USER DEFAULTS^^0
"BLD",4068,"KRN",8989.51,"NM",4,0)
GMV DEFAULT VALUES^^0
"BLD",4068,"KRN",8989.51,"NM",5,0)
GMV GUI VERSION^^0
"BLD",4068,"KRN",8989.51,"NM",6,0)
GMV WEBLINK^^0
"BLD",4068,"KRN",8989.51,"NM",7,0)
GMV ALLOW USER TEMPLATES^^0
"BLD",4068,"KRN",8989.51,"NM","B","GMV ALLOW USER TEMPLATES",7)

"BLD",4068,"KRN",8989.51,"NM","B","GMV DEFAULT VALUES",4)

"BLD",4068,"KRN",8989.51,"NM","B","GMV GUI VERSION",5)

"BLD",4068,"KRN",8989.51,"NM","B","GMV TEMPLATE",1)

"BLD",4068,"KRN",8989.51,"NM","B","GMV TEMPLATE DEFAULT",2)

"BLD",4068,"KRN",8989.51,"NM","B","GMV USER DEFAULTS",3)

"BLD",4068,"KRN",8989.51,"NM","B","GMV WEBLINK",6)

"BLD",4068,"KRN",8989.52,0)
8989.52
"BLD",4068,"KRN",8989.52,"NM",0)
^9.68A^^
"BLD",4068,"KRN",8994,0)
8994
"BLD",4068,"KRN",8994,"NM",0)
^9.68A^93^27
"BLD",4068,"KRN",8994,"NM",3,0)
GMV ADD VM^^0
"BLD",4068,"KRN",8994,"NM",4,0)
GMV ALLERGY^^0
"BLD",4068,"KRN",8994,"NM",9,0)
GMV CLINIC PT^^0
"BLD",4068,"KRN",8994,"NM",10,0)
GMV CONVERT DATE^^0
"BLD",4068,"KRN",8994,"NM",17,0)
GMV EXTRACT REC^^0
"BLD",4068,"KRN",8994,"NM",21,0)
GMV LATEST VM^^0
"BLD",4068,"KRN",8994,"NM",23,0)
GMV MARK ERROR^^0
"BLD",4068,"KRN",8994,"NM",29,0)
GMV PT GRAPH^^0
"BLD",4068,"KRN",8994,"NM",38,0)
GMV ROOM/BED^^0
"BLD",4068,"KRN",8994,"NM",43,0)
GMV TEAM PATIENTS^^0
"BLD",4068,"KRN",8994,"NM",44,0)
GMV V/M ALLDATA^^0
"BLD",4068,"KRN",8994,"NM",46,0)
GMV WARD LOCATION^^0
"BLD",4068,"KRN",8994,"NM",47,0)
GMV WARD PT^^0
"BLD",4068,"KRN",8994,"NM",75,0)
GMV VITALS/CAT/QUAL^^0
"BLD",4068,"KRN",8994,"NM",78,0)
GMV CUMULATIVE REPORT^^0
"BLD",4068,"KRN",8994,"NM",79,0)
GMV ENTERED IN ERROR-PATIENT^^0
"BLD",4068,"KRN",8994,"NM",81,0)
GMV LATEST VITALS BY LOCATION^^0
"BLD",4068,"KRN",8994,"NM",82,0)
GMV LATEST VITALS FOR PATIENT^^0
"BLD",4068,"KRN",8994,"NM",83,0)
GMV PTSELECT^^0
"BLD",4068,"KRN",8994,"NM",84,0)
GMV QUALIFIER TABLE^^0
"BLD",4068,"KRN",8994,"NM",86,0)
GMV MANAGER^^0
"BLD",4068,"KRN",8994,"NM",88,0)
GMV WARD/ROOM PATIENTS^^0
"BLD",4068,"KRN",8994,"NM",89,0)
GMV GET CURRENT TIME^^0
"BLD",4068,"KRN",8994,"NM",90,0)
GMV USER^^0
"BLD",4068,"KRN",8994,"NM",91,0)
GMV NUR UNIT PT^^0
"BLD",4068,"KRN",8994,"NM",92,0)
GMV CHECK DEVICE^^0
"BLD",4068,"KRN",8994,"NM",93,0)
GMV PARAMETER^^0
"BLD",4068,"KRN",8994,"NM","B","GMV ADD VM",3)

"BLD",4068,"KRN",8994,"NM","B","GMV ALLERGY",4)

"BLD",4068,"KRN",8994,"NM","B","GMV CHECK DEVICE",92)

"BLD",4068,"KRN",8994,"NM","B","GMV CLINIC PT",9)

"BLD",4068,"KRN",8994,"NM","B","GMV CONVERT DATE",10)

"BLD",4068,"KRN",8994,"NM","B","GMV CUMULATIVE REPORT",78)

"BLD",4068,"KRN",8994,"NM","B","GMV ENTERED IN ERROR-PATIENT",79)

"BLD",4068,"KRN",8994,"NM","B","GMV EXTRACT REC",17)

"BLD",4068,"KRN",8994,"NM","B","GMV GET CURRENT TIME",89)

"BLD",4068,"KRN",8994,"NM","B","GMV LATEST VITALS BY LOCATION",81)

"BLD",4068,"KRN",8994,"NM","B","GMV LATEST VITALS FOR PATIENT",82)

"BLD",4068,"KRN",8994,"NM","B","GMV LATEST VM",21)

"BLD",4068,"KRN",8994,"NM","B","GMV MANAGER",86)

"BLD",4068,"KRN",8994,"NM","B","GMV MARK ERROR",23)

"BLD",4068,"KRN",8994,"NM","B","GMV NUR UNIT PT",91)

"BLD",4068,"KRN",8994,"NM","B","GMV PARAMETER",93)

"BLD",4068,"KRN",8994,"NM","B","GMV PT GRAPH",29)

"BLD",4068,"KRN",8994,"NM","B","GMV PTSELECT",83)

"BLD",4068,"KRN",8994,"NM","B","GMV QUALIFIER TABLE",84)

"BLD",4068,"KRN",8994,"NM","B","GMV ROOM/BED",38)

"BLD",4068,"KRN",8994,"NM","B","GMV TEAM PATIENTS",43)

"BLD",4068,"KRN",8994,"NM","B","GMV USER",90)

"BLD",4068,"KRN",8994,"NM","B","GMV V/M ALLDATA",44)

"BLD",4068,"KRN",8994,"NM","B","GMV VITALS/CAT/QUAL",75)

"BLD",4068,"KRN",8994,"NM","B","GMV WARD LOCATION",46)

"BLD",4068,"KRN",8994,"NM","B","GMV WARD PT",47)

"BLD",4068,"KRN",8994,"NM","B","GMV WARD/ROOM PATIENTS",88)

"BLD",4068,"KRN","B",.4,.4)

"BLD",4068,"KRN","B",.401,.401)

"BLD",4068,"KRN","B",.402,.402)

"BLD",4068,"KRN","B",.403,.403)

"BLD",4068,"KRN","B",.5,.5)

"BLD",4068,"KRN","B",.84,.84)

"BLD",4068,"KRN","B",3.6,3.6)

"BLD",4068,"KRN","B",3.8,3.8)

"BLD",4068,"KRN","B",9.2,9.2)

"BLD",4068,"KRN","B",9.8,9.8)

"BLD",4068,"KRN","B",19,19)

"BLD",4068,"KRN","B",19.1,19.1)

"BLD",4068,"KRN","B",101,101)

"BLD",4068,"KRN","B",409.61,409.61)

"BLD",4068,"KRN","B",771,771)

"BLD",4068,"KRN","B",869.2,869.2)

"BLD",4068,"KRN","B",870,870)

"BLD",4068,"KRN","B",8989.51,8989.51)

"BLD",4068,"KRN","B",8989.52,8989.52)

"BLD",4068,"KRN","B",8994,8994)

"BLD",4068,"PRE")
GMVXENV
"BLD",4068,"QUES",0)
^9.62^^0
"BLD",4068,"REQB",0)
^9.611^^
"DATA",120.51,1,0)
BLOOD PRESSURE^BP^^1^^GMRV-BLOOD PRESSURE RATE HELP^BP
"DATA",120.51,1,1)
I '("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) K:X'?2.3N0.1"/"0.3N0.1"/"0.3N&(X'?2.3N0.1"/"0.3N) X I $D(X),X>0 K:$P(X,"/",1)>300!($P(X,"/",2)>300)!(+$P(X,"/",3)>300) X I $D(X),$P(X,"/")'>$P(X,"/",$L(X,"/")) K X
"DATA",120.51,2,0)
TEMPERATURE^T^^1^^GMRV-TEMPERATURE RATE HELP^TMP
"DATA",120.51,2,1)
K:(+X'=X!(X>120)!(X<0)!(X?.E1"."3N.N))&'("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) X I $D(X),X>0 S:X<45 X=$J(+X*(9/5)+32,0,1)
"DATA",120.51,3,0)
RESPIRATION^R^^1^^GMRV-RESPIRATION RATE HELP^RS
"DATA",120.51,3,1)
K:(+X'=X!(X>100)!(X<0)!(X?.E1"."1N.N))&'("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) X
"DATA",120.51,5,0)
PULSE^P^^1^^GMRV-PULSE RATE HELP^PU
"DATA",120.51,5,1)
K:(+X'=X!(X>300)!(X<0)!(X?.E1"."1N.N))&'("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) X
"DATA",120.51,8,0)
HEIGHT^HT^^1^^GMRV-HEIGHT RATE HELP^HT
"DATA",120.51,8,1)
D EN3^GMVUT0 K:X=0!(X>100)!(X<1) X
"DATA",120.51,9,0)
WEIGHT^WT^^1^^GMRV-WEIGHT RATE HELP^WT
"DATA",120.51,9,1)
I '("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) S GMR=$E($P(X,+X,2)) S X=$S(GMR="":0,"Kk"[GMR:+$J(2.2*(+X),0,2),"Ll"[GMR:+X,1:0) K:X>1500!(X=0)!(X<0) X K GMR
"DATA",120.51,10,0)
ABDOMINAL GIRTH^AG^^1^^^AG
"DATA",120.51,10,1)
K:'$$VALID^GMVPCE3("AG",X) X
"DATA",120.51,11,0)
AUDIOMETRY^AUD^^1^^^AUD
"DATA",120.51,11,1)
K:'$$VALID^GMVPCE3("AUD",X) X
"DATA",120.51,12,0)
FUNDAL HEIGHT^FH^^1^^^FH
"DATA",120.51,12,1)
K:'$$VALID^GMVPCE3("FH",X) X
"DATA",120.51,13,0)
FETAL HEART TONES^FT^^1^^^FT
"DATA",120.51,13,1)
K:'$$VALID^GMVPCE3("FT",X) X
"DATA",120.51,14,0)
HEAD CIRCUMFERENCE^HC^^1^^^HC
"DATA",120.51,14,1)
K:'$$VALID^GMVPCE3("HC",X) X
"DATA",120.51,15,0)
HEARING^HE^^1^^^HE
"DATA",120.51,15,1)
K:'$$VALID^GMVPCE3("HE",X) X
"DATA",120.51,16,0)
TONOMETRY^TON^^1^^^TON
"DATA",120.51,16,1)
K:'$$VALID^GMVPCE3("TON",X) X
"DATA",120.51,17,0)
VISION CORRECTED^VC^^1^^^VC
"DATA",120.51,17,1)
K:'$$VALID^GMVPCE3("VC",X) X
"DATA",120.51,18,0)
VISION UNCORRECTED^VU^^1^^^VU
"DATA",120.51,18,1)
K:'$$VALID^GMVPCE3("VU",X) X
"DATA",120.51,19,0)
CENTRAL VENOUS PRESSURE^CVP^^1^^GMRV-CVP RATE HELP
"DATA",120.51,19,1)
D CVP^GMVUT3
"DATA",120.51,20,0)
CIRCUMFERENCE/GIRTH^CG^^1^^GMRV-CIRCUM/GIRTH RATE HELP
"DATA",120.51,20,1)
D GIRTH^GMVUT3
"DATA",120.51,21,0)
PULSE OXIMETRY^PO2^^1^^GMRV-PO2 RATE HELP
"DATA",120.51,21,1)
K:(X<0!(X>100))!(X=0&'("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X))) X
"DATA",120.51,22,0)
PAIN^PN^^1^^GMRV-PAIN RATE HELP^PN
"DATA",120.51,22,1)
I '("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) K:(+X'=X!(X>10&(X'=99))!(X<0)) X
"DATA",120.52,1,0)
R ARM^RA
"DATA",120.52,1,1,0)
^120.521PA^1^1
"DATA",120.52,1,1,1,0)
1^1
"DATA",120.52,1,"CONV")
1;GMRD(120.52,
"DATA",120.52,2,0)
L ARM^La
"DATA",120.52,2,1,0)
^120.521PA^2^2
"DATA",120.52,2,1,1,0)
1^1
"DATA",120.52,2,1,2,0)
21^2
"DATA",120.52,2,"CONV")
2;GMRD(120.52,
"DATA",120.52,3,0)
R LEG^RL
"DATA",120.52,3,1,0)
^120.521PA^^0
"DATA",120.52,3,"CONV")
3;GMRD(120.52,
"DATA",120.52,4,0)
L LEG^LL
"DATA",120.52,4,1,0)
^120.521P^1^1
"DATA",120.52,4,1,1,0)
1^1
"DATA",120.52,4,"CONV")
4;GMRD(120.52,
"DATA",120.52,5,0)
AXILLARY^A
"DATA",120.52,5,1,0)
^120.521P^1^1
"DATA",120.52,5,1,1,0)
2^1
"DATA",120.52,5,"CONV")
5;GMRD(120.52,
"DATA",120.52,6,0)
ZZZORAL^TST
"DATA",120.52,6,1,0)
^120.521PA^1^1
"DATA",120.52,6,1,1,0)
2^1
"DATA",120.52,6,"CONV")
6;GMRD(120.52,
"DATA",120.52,7,0)
RECTAL^R
"DATA",120.52,7,1,0)
^120.521P^1^1
"DATA",120.52,7,1,1,0)
2^1
"DATA",120.52,7,"CONV")
7;GMRD(120.52,
"DATA",120.52,22,0)
APICAL^Ap
"DATA",120.52,22,1,0)
^120.521PA^1^1
"DATA",120.52,22,1,1,0)
5^1
"DATA",120.52,22,"CONV")
22;GMRD(120.52,
"DATA",120.52,23,0)
RADIAL^Rad
"DATA",120.52,23,1,0)
^120.521P^1^1
"DATA",120.52,23,1,1,0)
5^1
"DATA",120.52,23,"CONV")
23;GMRD(120.52,
"DATA",120.52,24,0)
PERIPHERAL^Per
"DATA",120.52,24,1,0)
^120.521P^2^2
"DATA",120.52,24,1,1,0)
5^1
"DATA",120.52,24,1,2,0)
1^1
"DATA",120.52,24,"CONV")
24;GMRD(120.52,
"DATA",120.52,25,0)
BILATERAL PERIPHERALS^BiP
"DATA",120.52,25,1,0)
^120.521P^1^1
"DATA",120.52,25,1,1,0)
5^1
"DATA",120.52,25,"CONV")
25;GMRD(120.52,
"DATA",120.52,38,0)
CAROTID^Car
"DATA",120.52,38,1,0)
^120.521P^2^2
"DATA",120.52,38,1,1,0)
5^1
"DATA",120.52,38,1,2,0)
1^2
"DATA",120.52,38,"CONV")
38;GMRD(120.52,
"DATA",120.52,39,0)
OTHER^Oth
"DATA",120.52,39,1,0)
^120.521P^3^2
"DATA",120.52,39,1,2,0)
20^1^
"DATA",120.52,39,1,3,0)
9^2
"DATA",120.52,39,"CONV")
39;GMRD(120.52,
"DATA",120.52,40,0)
CORE^C
"DATA",120.52,40,1,0)
^120.521P^1^1
"DATA",120.52,40,1,1,0)
2^1
"DATA",120.52,40,"CONV")
40;GMRD(120.52,
"DATA",120.52,42,0)
ACTUAL^A
"DATA",120.52,42,1,0)
^120.521P^2^1
"DATA",120.52,42,1,2,0)
8^4^
"DATA",120.52,42,"CONV")
42;GMRD(120.52,
"DATA",120.52,43,0)
ESTIMATED^E
"DATA",120.52,43,1,0)
^120.521P^2^1
"DATA",120.52,43,1,2,0)
8^4
"DATA",120.52,43,"CONV")
43;GMRD(120.52,
"DATA",120.52,44,0)
DRY^D
"DATA",120.52,44,1,0)
^120.521P^2^1
"DATA",120.52,44,1,2,0)
20^5
"DATA",120.52,44,"CONV")
44;GMRD(120.52,
"DATA",120.52,45,0)
TYMPANIC^T
"DATA",120.52,45,1,0)
^120.521P^1^1
"DATA",120.52,45,1,1,0)
2^1
"DATA",120.52,45,"CONV")
45;GMRD(120.52,
"DATA",120.52,46,0)
SKIN^S
"DATA",120.52,46,1,0)
^120.521P^1^1
"DATA",120.52,46,1,1,0)
2^1
"DATA",120.52,46,"CONV")
46;GMRD(120.52,
"DATA",120.52,47,0)
SPONTANEOUS^S
"DATA",120.52,47,1,0)
^120.521P^1^1
"DATA",120.52,47,1,1,0)
3^2
"DATA",120.52,47,"CONV")
47;GMRD(120.52,
"DATA",120.52,48,0)
CONTROLLED VENTILATOR^CV
"DATA",120.52,48,1,0)
^120.521P^1^1
"DATA",120.52,48,1,1,0)
3^2
"DATA",120.52,48,"CONV")
48;GMRD(120.52,
"DATA",120.52,49,0)
ASSISTED VENTILATOR^Av
"DATA",120.52,49,1,0)
^120.521P^1^1
"DATA",120.52,49,1,1,0)
3^2
"DATA",120.52,49,"CONV")
49;GMRD(120.52,
"DATA",120.52,50,0)
SITTING^Si
"DATA",120.52,50,1,0)
^120.521PA^7^4
"DATA",120.52,50,1,3,0)
5^3^
"DATA",120.52,50,1,4,0)
9^2
"DATA",120.52,50,1,6,0)
1^3
"DATA",120.52,50,1,7,0)
3^3
"DATA",120.52,50,"CONV")
1;GMRD(120.53,
"DATA",120.52,51,0)
STANDING^St
"DATA",120.52,51,1,0)
^120.521PA^6^4
"DATA",120.52,51,1,3,0)
3^3^
"DATA",120.52,51,1,4,0)
5^3^
"DATA",120.52,51,1,5,0)
9^2
"DATA",120.52,51,1,6,0)
1^3
"DATA",120.52,51,"CONV")
2;GMRD(120.53,
"DATA",120.52,52,0)
LYING^Ly
"DATA",120.52,52,1,0)
^120.521PA^4^3
"DATA",120.52,52,1,2,0)
3^3^
"DATA",120.52,52,1,3,0)
5^3^
"DATA",120.52,52,1,4,0)
1^3
"DATA",120.52,52,"CONV")
3;GMRD(120.53,
"DATA",120.52,53,0)
FEMORAL^Fem
"DATA",120.52,53,1,0)
^120.521P^2^2
"DATA",120.52,53,1,1,0)
5^1^
"DATA",120.52,53,1,2,0)
1^1
"DATA",120.52,54,0)
POPLITEAL^Pop
"DATA",120.52,54,1,0)
^120.521P^1^1
"DATA",120.52,54,1,1,0)
5^1^
"DATA",120.52,55,0)
POSTERIOR TIBIAL^PT
"DATA",120.52,55,1,0)
^120.521P^1^1
"DATA",120.52,55,1,1,0)
5^1^
"DATA",120.52,56,0)
DORSALIS PEDIS^Dp
"DATA",120.52,56,1,0)
^120.521PA^1^1
"DATA",120.52,56,1,1,0)
5^1
"DATA",120.52,57,0)
BRACHIAL^Bra
"DATA",120.52,57,1,0)
^120.521P^1^1
"DATA",120.52,57,1,1,0)
5^1^
"DATA",120.52,58,0)
ULNAR^Uln
"DATA",120.52,58,1,0)
^120.521P^1^1
"DATA",120.52,58,1,1,0)
5^1^
"DATA",120.52,59,0)
PALPATED^Pal
"DATA",120.52,59,1,0)
^120.521P^2^2
"DATA",120.52,59,1,1,0)
5^2^
"DATA",120.52,59,1,2,0)
1^2^
"DATA",120.52,60,0)
DOPPLER^Dop
"DATA",120.52,60,1,0)
^120.521P^2^2
"DATA",120.52,60,1,1,0)
5^2^
"DATA",120.52,60,1,2,0)
1^2
"DATA",120.52,61,0)
AUSCULTATE^Aus
"DATA",120.52,61,1,0)
^120.521P^1^1
"DATA",120.52,61,1,1,0)
5^2^
"DATA",120.52,62,0)
RIGHT^Rt
"DATA",120.52,62,1,0)
^120.521P^2^2
"DATA",120.52,62,1,1,0)
5^5^
"DATA",120.52,62,1,2,0)
20^5^
"DATA",120.52,63,0)
LEFT^Le
"DATA",120.52,63,1,0)
^120.521P^2^2
"DATA",120.52,63,1,1,0)
5^5^
"DATA",120.52,63,1,2,0)
20^5^
"DATA",120.52,64,0)
CUFF^Cu
"DATA",120.52,64,1,0)
^120.521PA^1^1
"DATA",120.52,64,1,1,0)
1^2
"DATA",120.52,65,0)
NON-INVASIVE^N-I
"DATA",120.52,65,1,0)
^120.521P^^0
"DATA",120.52,66,0)
ADULT^Ad
"DATA",120.52,66,1,0)
^120.521PA^1^1
"DATA",120.52,66,1,1,0)
1^6
"DATA",120.52,67,0)
SM ADULT^SmA
"DATA",120.52,67,1,0)
^120.521P^^0
"DATA",120.52,68,0)
LG ADULT^LgA
"DATA",120.52,68,1,0)
^120.521P^1^1
"DATA",120.52,68,1,1,0)
1^6^
"DATA",120.52,69,0)
THIGH^Thi
"DATA",120.52,69,1,0)
^120.521P^3^2
"DATA",120.52,69,1,2,0)
20^1^
"DATA",120.52,69,1,3,0)
1^6
"DATA",120.52,70,0)
PEDIATRIC^Ped
"DATA",120.52,70,1,0)
^120.521P^1^1
"DATA",120.52,70,1,1,0)
1^6^
"DATA",120.52,71,0)
CHAIR^C
"DATA",120.52,71,1,0)
^120.521P^^0
"DATA",120.52,72,0)
BED^B
"DATA",120.52,72,1,0)
^120.521P^^0
"DATA",120.52,73,0)
HEAD^Hd
"DATA",120.52,73,1,0)
^120.521P^1^1
"DATA",120.52,73,1,1,0)
20^1^
"DATA",120.52,74,0)
ABDOMINAL^Abd
"DATA",120.52,74,1,0)
^120.521P^1^1
"DATA",120.52,74,1,1,0)
20^1^
"DATA",120.52,75,0)
CALF^Clf
"DATA",120.52,75,1,0)
^120.521P^2^2
"DATA",120.52,75,1,1,0)
20^1^
"DATA",120.52,75,1,2,0)
1^6
"DATA",120.52,76,0)
LOWER ARM^LrA
"DATA",120.52,76,1,0)
^120.521P^1^1
"DATA",120.52,76,1,1,0)
20^1^
"DATA",120.52,77,0)
UPPER ARM^UpA
"DATA",120.52,77,1,0)
^120.521P^1^1
"DATA",120.52,77,1,1,0)
20^1^
"DATA",120.52,78,0)
WRIST^Wri
"DATA",120.52,78,1,0)
^120.521P^1^1
"DATA",120.52,78,1,1,0)
20^1^
"DATA",120.52,79,0)
ANKLE^Ank
"DATA",120.52,79,1,0)
^120.521P^1^1
"DATA",120.52,79,1,1,0)
20^1^
"DATA",120.52,80,0)
MASK^M
"DATA",120.52,80,1,0)
^120.521P^1^1
"DATA",120.52,80,1,1,0)
21^2^
"DATA",120.52,81,0)
T-PIECE^TP
"DATA",120.52,81,1,0)
^120.521P^1^1
"DATA",120.52,81,1,1,0)
21^2^
"DATA",120.52,82,0)
FACE TENT^FT
"DATA",120.52,82,1,0)
^120.521P^1^1
"DATA",120.52,82,1,1,0)
21^2^
"DATA",120.52,83,0)
AEROSOL/HUMIDIFIED MASK^AM
"DATA",120.52,83,1,0)
^120.521P^1^1
"DATA",120.52,83,1,1,0)
21^2^
"DATA",120.52,84,0)
NASAL CANNULA^NC
"DATA",120.52,84,1,0)
^120.521P^1^1
"DATA",120.52,84,1,1,0)
21^2^
"DATA",120.52,85,0)
NON RE-BREATHER^NRB
"DATA",120.52,85,1,0)
^120.521P^1^1
"DATA",120.52,85,1,1,0)
21^2^
"DATA",120.52,86,0)
PARTIAL RE-BREATHER^PRB
"DATA",120.52,86,1,0)
^120.521P^1^1
"DATA",120.52,86,1,1,0)
21^2^
"DATA",120.52,87,0)
TRACHEOSTOMY COLLAR^TC
"DATA",120.52,87,1,0)
^120.521P^1^1
"DATA",120.52,87,1,1,0)
21^2^
"DATA",120.52,88,0)
VENTILATOR^Ven
"DATA",120.52,88,1,0)
^120.521P^1^1
"DATA",120.52,88,1,1,0)
21^2^
"DATA",120.52,89,0)
VENTURI MASK^VM
"DATA",120.52,89,1,0)
^120.521P^1^1
"DATA",120.52,89,1,1,0)
21^2^
"DATA",120.53,1,0)
LOCATION
"DATA",120.53,1,1,0)
^120.531P^4^4
"DATA",120.53,1,1,1,0)
1^^1^^1^1
"DATA",120.53,1,1,2,0)
2^^1^^1^1^5
"DATA",120.53,1,1,3,0)
5^^1^^2^1^23
"DATA",120.53,1,1,4,0)
20^^1^^2^1
"DATA",120.53,2,0)
METHOD
"DATA",120.53,2,1,0)
^120.531P^5^5
"DATA",120.53,2,1,1,0)
3^^1^^1^1^47
"DATA",120.53,2,1,2,0)
5^^1^^3^3
"DATA",120.53,2,1,3,0)
1^^1^^3^3
"DATA",120.53,2,1,4,0)
21^^1^^1^1
"DATA",120.53,2,1,5,0)
9^^1^^2^2^51
"DATA",120.53,3,0)
POSITION
"DATA",120.53,3,1,0)
^120.531P^4^3
"DATA",120.53,3,1,1,0)
1^^1^^2^2
"DATA",120.53,3,1,3,0)
3^^1^^2^2
"DATA",120.53,3,1,4,0)
5^^1^^4^4
"DATA",120.53,4,0)
QUALITY
"DATA",120.53,4,1,0)
^120.531P^2^2
"DATA",120.53,4,1,1,0)
9^^1^^1^1^42
"DATA",120.53,4,1,2,0)
8^^1^^1^1^42
"DATA",120.53,5,0)
SITE
"DATA",120.53,5,1,0)
^120.531P^2^2
"DATA",120.53,5,1,1,0)
5^^1^^1^2
"DATA",120.53,5,1,2,0)
20^^1^^1^2
"DATA",120.53,6,0)
CUFF SIZE
"DATA",120.53,6,1,0)
^120.531P^1^1
"DATA",120.53,6,1,1,0)
1^^1^^4^4^66
"DATA",120.57,1,0)
HOSPITAL^7^1^1
"DATA",120.57,1,1)
103^91^131^31^34^12^242^198^82^97^-13^-13^49
"DATA",120.57,1,"PHASEI")
1
"DATA",120.57,1,"PHASEII")
1^283^^
"DATA",120.57,1,"Q0")
12
"FIA",120.5)
GMRV VITAL MEASUREMENT
"FIA",120.5,0)
^GMR(120.5,
"FIA",120.5,0,0)
120.5ID
"FIA",120.5,0,1)
y^y^f^^^^n
"FIA",120.5,0,10)

"FIA",120.5,0,11)

"FIA",120.5,0,"RLRO")

"FIA",120.5,0,"VR")
5.0^GEN. MED. REC. - VITALS
"FIA",120.5,120.5)
0
"FIA",120.5,120.505)
0
"FIA",120.5,120.506)
0
"FIA",120.51)
GMRV VITAL TYPE
"FIA",120.51,0)
^GMRD(120.51,
"FIA",120.51,0,0)
120.51I
"FIA",120.51,0,1)
y^y^f^^n^^y^a^n
"FIA",120.51,0,10)

"FIA",120.51,0,11)

"FIA",120.51,0,"RLRO")

"FIA",120.51,0,"VR")
5.0^GEN. MED. REC. - VITALS
"FIA",120.51,120.51)
0
"FIA",120.52)
GMRV VITAL QUALIFIER
"FIA",120.52,0)
^GMRD(120.52,
"FIA",120.52,0,0)
120.52
"FIA",120.52,0,1)
y^y^f^^n^^y^a^y
"FIA",120.52,0,10)

"FIA",120.52,0,11)
I Y<90
"FIA",120.52,0,"RLRO")

"FIA",120.52,0,"VR")
5.0^GEN. MED. REC. - VITALS
"FIA",120.52,120.52)
0
"FIA",120.52,120.521)
0
"FIA",120.53)
GMRV VITAL CATEGORY
"FIA",120.53,0)
^GMRD(120.53,
"FIA",120.53,0,0)
120.53O
"FIA",120.53,0,1)
y^y^f^^n^^y^a^n
"FIA",120.53,0,10)

"FIA",120.53,0,11)

"FIA",120.53,0,"RLRO")

"FIA",120.53,0,"VR")
5.0^GEN. MED. REC. - VITALS
"FIA",120.53,120.53)
0
"FIA",120.53,120.531)
0
"FIA",120.57)
GMRV VITALS PARAMETERS
"FIA",120.57,0)
^GMRD(120.57,
"FIA",120.57,0,0)
120.57
"FIA",120.57,0,1)
y^y^f^^n^^y^a^y
"FIA",120.57,0,10)

"FIA",120.57,0,11)

"FIA",120.57,0,"RLRO")

"FIA",120.57,0,"VR")
5.0^GEN. MED. REC. - VITALS
"FIA",120.57,120.57)
0
"INIT")
GMVXPST
"KRN",19,10377,-1)
0^32
"KRN",19,10377,0)
GMV V/M GUI^Vitals/Measurements GUI Application^^B^^^^^^^^GEN. MED. REC. - VITALS
"KRN",19,10377,1,0)
^19.06^1^1^3020326^^^^
"KRN",19,10377,1,1,0)
This option controls access to the GUI Vitals/Measurements application.
"KRN",19,10377,99.1)
59099,60345
"KRN",19,10377,"RPC",0)
^19.05P^127^107
"KRN",19,10377,"RPC",78,0)
GMV MANAGER
"KRN",19,10377,"RPC",81,0)
GMV ADD VM
"KRN",19,10377,"RPC",83,0)
GMV ALLERGY
"KRN",19,10377,"RPC",86,0)
GMV CLINIC PT
"KRN",19,10377,"RPC",87,0)
GMV CONVERT DATE
"KRN",19,10377,"RPC",89,0)
GMV CUMULATIVE REPORT
"KRN",19,10377,"RPC",91,0)
GMV ENTERED IN ERROR-PATIENT
"KRN",19,10377,"RPC",92,0)
GMV EXTRACT REC
"KRN",19,10377,"RPC",93,0)
GMV GET CURRENT TIME
"KRN",19,10377,"RPC",101,0)
GMV LATEST VITALS BY LOCATION
"KRN",19,10377,"RPC",102,0)
GMV LATEST VITALS FOR PATIENT
"KRN",19,10377,"RPC",103,0)
GMV LATEST VM
"KRN",19,10377,"RPC",105,0)
GMV MARK ERROR
"KRN",19,10377,"RPC",108,0)
GMV PT GRAPH
"KRN",19,10377,"RPC",110,0)
GMV PTSELECT
"KRN",19,10377,"RPC",111,0)
GMV QUALIFIER TABLE
"KRN",19,10377,"RPC",112,0)
GMV ROOM/BED
"KRN",19,10377,"RPC",116,0)
GMV TEAM PATIENTS
"KRN",19,10377,"RPC",118,0)
GMV V/M ALLDATA
"KRN",19,10377,"RPC",119,0)
GMV VITALS/CAT/QUAL
"KRN",19,10377,"RPC",120,0)
GMV WARD LOCATION
"KRN",19,10377,"RPC",121,0)
GMV WARD PT
"KRN",19,10377,"RPC",122,0)
GMV WARD/ROOM PATIENTS
"KRN",19,10377,"RPC",123,0)
GMV USER
"KRN",19,10377,"RPC",124,0)
GMV NUR UNIT PT
"KRN",19,10377,"RPC",125,0)
GMV CHECK DEVICE
"KRN",19,10377,"RPC",126,0)
GMV PARAMETER
"KRN",19,10377,"RPC",127,0)
ORWPT PTINQ
"KRN",19,10377,"U")
VITALS/MEASUREMENTS GUI APPLIC
"KRN",19.1,418,-1)
0^1
"KRN",19.1,418,0)
GMV MANAGER^Can edit all V/M templates^l
"KRN",19.1,418,1,0)
^19.11^4^4^3020312^^^^
"KRN",19.1,418,1,1,0)
This key is for the GEN. MED. REC. - VITALS package (aka
"KRN",19.1,418,1,2,0)
Vitals/Measurements). This key allows the user to edit all 
"KRN",19.1,418,1,3,0)
Vitals/Measurement templates. Without this key, the user may edit only
"KRN",19.1,418,1,4,0)
those templates the user created.
"KRN",8989.51,301,-1)
0^5
"KRN",8989.51,301,0)
GMV GUI VERSION^Active Vitals Measurements executables^1^Application:Version^Compatible with current server version^0
"KRN",8989.51,301,1)
Y
"KRN",8989.51,301,6)
F^1:30
"KRN",8989.51,301,20,0)
^8989.512^3^3^3020606^^^^
"KRN",8989.51,301,20,1,0)
This parameter is used to store the application:versions that are compatible
"KRN",8989.51,301,20,2,0)
with the current server version of Vitals Measurements.  Instance format
"KRN",8989.51,301,20,3,0)
is APPLICATION:VERSION  (example: VITALS.EXE:0.0.0.0).
"KRN",8989.51,301,30,0)
^8989.513I^1^1
"KRN",8989.51,301,30,1,0)
1^4.2
"KRN",8989.51,302,-1)
0^6
"KRN",8989.51,302,0)
GMV WEBLINK^Vitals Measurments Home Page^0^^Web Address
"KRN",8989.51,302,1)
F^1:250
"KRN",8989.51,302,20,0)
^^4^4^3020531^
"KRN",8989.51,302,20,1,0)
This parameter contains the web address for the Vitals Measurments home
"KRN",8989.51,302,20,2,0)
page.  This can be modified to a local address in the event that the pages
"KRN",8989.51,302,20,3,0)
are downloaded to be displayed from a local server location or a site 
"KRN",8989.51,302,20,4,0)
wishes to direct user to a local page instead of the national site.
"KRN",8989.51,302,30,0)
^8989.513I^1^1
"KRN",8989.51,302,30,1,0)
1^4.2
"KRN",8989.51,303,-1)
0^7
"KRN",8989.51,303,0)
GMV ALLOW USER TEMPLATES^Allow individual user templates^0^Yes/No^Yes/No^0
"KRN",8989.51,303,1)
Y
"KRN",8989.51,303,30,0)
^8989.513I^1^1
"KRN",8989.51,303,30,1,0)
1^4.2
"KRN",8989.51,4708,-1)
0^4
"KRN",8989.51,4708,0)
GMV DEFAULT VALUES^ENTER GMV DEFAULTS^1
"KRN",8989.51,4708,1)
F
"KRN",8989.51,4708,6)
F
"KRN",8989.51,4708,30,0)
^8989.513I^1^1
"KRN",8989.51,4708,30,1,0)
1^200
"KRN",8989.51,4754,-1)
0^1
"KRN",8989.51,4754,0)
GMV TEMPLATE^Templates for vitals V5^1^Template Name^Template Data
"KRN",8989.51,4754,1)
F^1:250
"KRN",8989.51,4754,6)
F^1:30
"KRN",8989.51,4754,30,0)
^8989.513I^4^4
"KRN",8989.51,4754,30,1,0)
3^4
"KRN",8989.51,4754,30,2,0)
2^44
"KRN",8989.51,4754,30,3,0)
1^200
"KRN",8989.51,4754,30,4,0)
4^4.2
"KRN",8989.51,4755,-1)
0^2
"KRN",8989.51,4755,0)
GMV TEMPLATE DEFAULT^Default Templates for vitals V5^0^^Template Data
"KRN",8989.51,4755,1)
F^3:30
"KRN",8989.51,4755,6)
^
"KRN",8989.51,4755,30,0)
^8989.513I^4^4
"KRN",8989.51,4755,30,1,0)
3^4
"KRN",8989.51,4755,30,2,0)
2^44
"KRN",8989.51,4755,30,3,0)
1^200
"KRN",8989.51,4755,30,4,0)
4^4.2
"KRN",8989.51,4757,-1)
0^3
"KRN",8989.51,4757,0)
GMV USER DEFAULTS^GMV User Defaults^1^Parameter setting^Parameter value^0
"KRN",8989.51,4757,1)
F^1:250
"KRN",8989.51,4757,6)
F^1:250
"KRN",8989.51,4757,20,0)
^8989.512^10^10^3020528^^
"KRN",8989.51,4757,20,1,0)
This parameter is used to store a users default parameter settings.  Each 
"KRN",8989.51,4757,20,2,0)
setting is defined on the client as follows:
"KRN",8989.51,4757,20,3,0)
 
"KRN",8989.51,4757,20,4,0)
  TGMV_UserSetting = (
"KRN",8989.51,4757,20,5,0)
    usCanvasAbnormal,
"KRN",8989.51,4757,20,6,0)
    usCanvasNormal);
"KRN",8989.51,4757,20,7,0)
 
"KRN",8989.51,4757,20,8,0)
  GMVUSERSETTING: array[TGMV_UserSetting] of string = (
"KRN",8989.51,4757,20,9,0)
                  'CanvasAbnormal', 
"KRN",8989.51,4757,20,10,0)
                  'CanvasNormal');
"KRN",8989.51,4757,30,0)
^8989.513I^1^1
"KRN",8989.51,4757,30,1,0)
1^200
"KRN",8994,451,-1)
0^10
"KRN",8994,451,0)
GMV CONVERT DATE^GETDT^GMVGETQ^1^R^0^^1
"KRN",8994,451,1,0)
^8994.01^2^2^3020107^^^^
"KRN",8994,451,1,1,0)
This procedure converts a user-supplied date/time into VA FileMan's
"KRN",8994,451,1,2,0)
internal and external date format.
"KRN",8994,451,2,0)
^8994.02A^1^1
"KRN",8994,451,2,1,0)
GMRDATE^1^30^1^1
"KRN",8994,451,2,1,1,0)
^8994.021^1^1^3020107^^^^
"KRN",8994,451,2,1,1,1,0)
GMRDATE is the user-supplied date/time text.
"KRN",8994,451,2,"B","GMRDATE",1)

"KRN",8994,451,2,"PARAMSEQ",1,1)

"KRN",8994,451,3,0)
^8994.03^1^1^3020107^^^
"KRN",8994,451,3,1,0)
RESULT=Date in internal FileMan format^Date in external FileMan format
"KRN",8994,454,-1)
0^3
"KRN",8994,454,0)
GMV ADD VM^EN1^GMVDCSAV^1^R^0^^1
"KRN",8994,454,1,0)
^8994.01^2^2^3020128^^^^
"KRN",8994,454,1,1,0)
This procedure is used to enter a new Vital/Measurement record in the GMRV
"KRN",8994,454,1,2,0)
Vital Measurement file (#120.5).
"KRN",8994,454,2,0)
^8994.02A^1^1
"KRN",8994,454,2,1,0)
GMRVDATA^1^255^1^1
"KRN",8994,454,2,1,1,0)
^^6^6^3020102^
"KRN",8994,454,2,1,1,1,0)
This variable contains a Vital/Measurement record to be filed in the GMRV
"KRN",8994,454,2,1,1,2,0)
Vital Measurement file #120.5.
"KRN",8994,454,2,1,1,3,0)
 
"KRN",8994,454,2,1,1,4,0)
GMRVDATA has the following data:
"KRN",8994,454,2,1,1,5,0)
Date/time V/M taken^DFN^Vital type^NOW^Hospital location^DUZ^^Measurement^
"KRN",8994,454,2,1,1,6,0)
^O2 information.
"KRN",8994,454,2,"B","GMRVDATA",1)

"KRN",8994,454,2,"PARAMSEQ",1,1)

"KRN",8994,454,3,0)
^8994.03^2^2^3020102^^^
"KRN",8994,454,3,1,0)
RESULT returns the information of record filing result such as "DATA
"KRN",8994,454,3,2,0)
 MISSING"  or "RECORD EXISTS".
"KRN",8994,457,-1)
0^17
"KRN",8994,457,0)
GMV EXTRACT REC^GETVM^GMVGETD^4^R^0^^1
"KRN",8994,457,1,0)
^8994.01^2^2^3020107^^^
"KRN",8994,457,1,1,0)
This procedure retrieves vital records from GMRV Vital Measurement file 
"KRN",8994,457,1,2,0)
(#120.5) for a selected patient within a given date span.
"KRN",8994,457,2,0)
^8994.02A^1^1
"KRN",8994,457,2,1,0)
GMRVDATA^1^30^1^1
"KRN",8994,457,2,1,1,0)
^8994.021^3^3^3020107^^^^
"KRN",8994,457,2,1,1,1,0)
GMRVDATA consists of 4 pieces of information:
"KRN",8994,457,2,1,1,2,0)
  Patient IEN^End date vital taken^Vital type(optional)^Start date vital
"KRN",8994,457,2,1,1,3,0)
  taken.
"KRN",8994,457,2,"B","GMRVDATA",1)

"KRN",8994,457,2,"PARAMSEQ",1,1)

"KRN",8994,457,3,0)
^^15^15^3020107^
"KRN",8994,457,3,1,0)
Returns the name of the global array (i.e., ^TMP($J,"GRPC")) containing a
"KRN",8994,457,3,2,0)
list of vital records for the selected patient within the defined date
"KRN",8994,457,3,3,0)
range.
"KRN",8994,457,3,4,0)
 
"KRN",8994,457,3,5,0)
^TMP($J,"GRPC",n)=File 120.5 IEN^Date/time taken (external)   Vital Type 
"KRN",8994,457,3,6,0)
                  Abbreviation: Rate U.S. units (Metric value) 
"KRN",8994,457,3,7,0)
                  (Qualifiers)
"KRN",8994,457,3,8,0)
 
"KRN",8994,457,3,9,0)
n is a sequential number starting at 1.
"KRN",8994,457,3,10,0)
 
"KRN",8994,457,3,11,0)
The second piece of each entry is one string of formatted output.
"KRN",8994,457,3,12,0)
 
"KRN",8994,457,3,13,0)
If there is no data, then the following is returned:
"KRN",8994,457,3,14,0)
 
"KRN",8994,457,3,15,0)
^TMP($J,"GRPC",1)=0^NO VITALS/MEASUREMENTS ENTERED WITHIN THIS PERIOD
"KRN",8994,459,-1)
0^46
"KRN",8994,459,0)
GMV WARD LOCATION^WARDLOC^GMVGETD^4^R^0^^1
"KRN",8994,459,1,0)
^8994.01^4^4^3020107^
"KRN",8994,459,1,1,0)
This procedure extracts MAS ward locations from Ward Location file (#42)
"KRN",8994,459,1,2,0)
if the ward has patients registered.
"KRN",8994,459,1,3,0)
 
"KRN",8994,459,1,4,0)
Note: No other Input Parameters besides RESULT needed.
"KRN",8994,459,3,0)
^^6^6^3020107^
"KRN",8994,459,3,1,0)
Returns the global array name containing a list of MAS wards (i.e., 
"KRN",8994,459,3,2,0)
^TMP($J,"GWARD")).
"KRN",8994,459,3,3,0)
 
"KRN",8994,459,3,4,0)
^TMP($J,"GWARD",n)=Ward IEN^Ward Name
"KRN",8994,459,3,5,0)
 
"KRN",8994,459,3,6,0)
n is a sequential number starting at 1.
"KRN",8994,460,-1)
0^47
"KRN",8994,460,0)
GMV WARD PT^WARDPT^GMVGETD^4^R^0^^1
"KRN",8994,460,1,0)
^8994.01^1^1^3020107^^
"KRN",8994,460,1,1,0)
This procedure lists patients registered on a particular MAS ward.
"KRN",8994,460,2,0)
^8994.02A^1^1
"KRN",8994,460,2,1,0)
GMRWARD^1^30^1^1
"KRN",8994,460,2,1,1,0)
^8994.021^1^1^3020107^^^
"KRN",8994,460,2,1,1,1,0)
GMRWARD contains the name of ward from Ward Location file (#42).
"KRN",8994,460,2,"B","GMRWARD",1)

"KRN",8994,460,2,"PARAMSEQ",1,1)

"KRN",8994,460,3,0)
^^10^10^3020107^
"KRN",8994,460,3,1,0)
Returns the name of the global array containing the list of patients on 
"KRN",8994,460,3,2,0)
the selected ward (i.e., ^TMP($J,"GMRPT")).
"KRN",8994,460,3,3,0)
 
"KRN",8994,460,3,4,0)
^TMP($J,"GMRPT",n)=DFN^Name^SSN (w/hyphens)^DOB^Sex and Age^Attending^
"KRN",8994,460,3,5,0)
                   Veteran^Date of Death (internal)^Date of Death 
"KRN",8994,460,3,6,0)
                   (external)^Ward name^Roombed
"KRN",8994,460,3,7,0)
 
"KRN",8994,460,3,8,0)
n is a sequential number starting at 1.
"KRN",8994,460,3,9,0)
 
"KRN",8994,460,3,10,0)
If there are no patients on the ward, then the global array is undefined.
"KRN",8994,468,-1)
0^23
"KRN",8994,468,0)
GMV MARK ERROR^ERROR^GMVUTL1^1^R^0^^
"KRN",8994,468,1,0)
^^2^2^3020107^
"KRN",8994,468,1,1,0)
This procedure marks a user selected vitals record in the GMRV Vital
"KRN",8994,468,1,2,0)
Measurement (#120.5) file as entered-in-error.
"KRN",8994,468,2,0)
^8994.02A^1^1
"KRN",8994,468,2,1,0)
GMVDATA^1^60^1^1
"KRN",8994,468,2,1,1,0)
^^6^6^3020107^
"KRN",8994,468,2,1,1,1,0)
GMVDATA contains the following information:
"KRN",8994,468,2,1,1,2,0)
 
"KRN",8994,468,2,1,1,3,0)
#120.5 file IEN^DUZ^INCORRECT DATE/TIME^INCORRECT READING^INCORRECT PATIENT
"KRN",8994,468,2,1,1,4,0)
^INVALID RECORD
"KRN",8994,468,2,1,1,5,0)
 
"KRN",8994,468,2,1,1,6,0)
Pieces 3 through 6 are either 1 or null.
"KRN",8994,468,2,"B","GMVDATA",1)

"KRN",8994,468,2,"PARAMSEQ",1,1)

"KRN",8994,468,3,0)
^^2^2^3020107^
"KRN",8994,468,3,1,0)
RESULT returns "OK" after if the the error field is set. Otherwise, 
"KRN",8994,468,3,2,0)
RESULT returns "Record Not Found"
"KRN",8994,469,-1)
0^29
"KRN",8994,469,0)
GMV PT GRAPH^EN1^GMVSR0^1^R^0^^
"KRN",8994,469,1,0)
^8994.01^1^1^3020102^^
"KRN",8994,469,1,1,0)
Prints Vitals/Measurements Graphic Reports.
"KRN",8994,469,2,0)
^8994.02A^1^1
"KRN",8994,469,2,1,0)
GMVDATA^1^150^1^1
"KRN",8994,469,2,1,1,0)
^8994.021^19^19^3020102^^
"KRN",8994,469,2,1,1,1,0)
A multi-piece variable that identifies the values needed to run the 
"KRN",8994,469,2,1,1,2,0)
report.
"KRN",8994,469,2,1,1,3,0)
  
"KRN",8994,469,2,1,1,4,0)
  Piece  1: DFN
"KRN",8994,469,2,1,1,5,0)
         2: Start date/time of the report range (FileMan format)
"KRN",8994,469,2,1,1,6,0)
         3: End date/time of the report range (FileMan format)
"KRN",8994,469,2,1,1,7,0)
         4: Number indicating graph type *
"KRN",8994,469,2,1,1,8,0)
         5: Device name (File 3.5, Field .01)
"KRN",8994,469,2,1,1,9,0)
         6: Device internal entry number
"KRN",8994,469,2,1,1,10,0)
         7: date/time to print the report (FileMan format)
"KRN",8994,469,2,1,1,11,0)
         8: ward internal entry number (File 42)
"KRN",8994,469,2,1,1,12,0)
         9: hospital location internal entry number (File 44)
"KRN",8994,469,2,1,1,13,0)
        10: list of rooms separated by a comma (e.g., 200,210,220)
"KRN",8994,469,2,1,1,14,0)
 
"KRN",8994,469,2,1,1,15,0)
* Graph = 1 prints Vital Signs Record
"KRN",8994,469,2,1,1,16,0)
        = 2 prints B/P Plotting Chart
"KRN",8994,469,2,1,1,17,0)
        = 3 prints Weight Chart
"KRN",8994,469,2,1,1,18,0)
        = 4 prints Pulse Oximetry/Respiratory Graph
"KRN",8994,469,2,1,1,19,0)
        = 5 prints Pain Chart
"KRN",8994,469,2,"B","GMVDATA",1)

"KRN",8994,469,2,"PARAMSEQ",1,1)

"KRN",8994,469,3,0)
^^4^4^3020102^
"KRN",8994,469,3,1,0)
Returns a message stating the outcome of the request to queue the report.
"KRN",8994,469,3,2,0)
If the report was successfully queued, RESULT will be "Report sent to 
"KRN",8994,469,3,3,0)
device. Task #: " ZTSK" where ZTSK is the task number of the job. If the 
"KRN",8994,469,3,4,0)
report could not be queued, RESULT will be "Unable to task the report."
"KRN",8994,475,-1)
0^44
"KRN",8994,475,0)
GMV V/M ALLDATA^VMDATA^GMVGGR1^4^R^0^^1
"KRN",8994,475,1,0)
^8994.01^2^2^3020109^^^
"KRN",8994,475,1,1,0)
This procedure lists all vitals/measurements data for a given date/time
"KRN",8994,475,1,2,0)
span.
"KRN",8994,475,2,0)
^8994.02A^1^1
"KRN",8994,475,2,1,0)
GMVDATA^1^60^1^1
"KRN",8994,475,2,1,1,0)
^8994.021^4^4^3020109^^^
"KRN",8994,475,2,1,1,1,0)
GMVDATA consists of 4 pieces of data:
"KRN",8994,475,2,1,1,2,0)
 
"KRN",8994,475,2,1,1,3,0)
DFN^Start date/time vitals taken^End date/time vitals taken^Flag: 0 for
"KRN",8994,475,2,1,1,4,0)
measurement; 1 for qualifier.
"KRN",8994,475,2,"B","GMVDATA",1)

"KRN",8994,475,2,"PARAMSEQ",1,1)

"KRN",8994,475,3,0)
^^1^1^3020109^
"KRN",8994,475,3,1,0)
RESULT array returns the aggregated data or "NO DATA" message.
"KRN",8994,494,-1)
0^43
"KRN",8994,494,0)
GMV TEAM PATIENTS^TEAMPT^GMVUTL3^2^R^0^^1
"KRN",8994,494,1,0)
^8994.01^1^1^3020107^^^^
"KRN",8994,494,1,1,0)
This procedure retrieves patients assigned to a given team.
"KRN",8994,494,2,0)
^8994.02A^1^1
"KRN",8994,494,2,1,0)
GMVTEAM^1^30^1^1
"KRN",8994,494,2,1,1,0)
^8994.021^1^1^3020107^^^
"KRN",8994,494,2,1,1,1,0)
GMVTEAM is the internal entry number of the selected team (File 100.21).
"KRN",8994,494,2,"B","GMVTEAM",1)

"KRN",8994,494,2,"PARAMSEQ",1,1)

"KRN",8994,494,3,0)
^8994.03^7^7^3020107^^
"KRN",8994,494,3,1,0)
Returns a list of patients in the array specified.
"KRN",8994,494,3,2,0)
 
"KRN",8994,494,3,3,0)
RESULT(n)=Patient name^DFN^SSN (w/hyphens)^DOB (external)^SEX and AGE^
"KRN",8994,494,3,4,0)
          Attending^Veteran^Date of Death (external)^Date of Death 
"KRN",8994,494,3,5,0)
          (internal)^Ward name^Roombed
"KRN",8994,494,3,6,0)
 
"KRN",8994,494,3,7,0)
n is a sequential number starting at 1.
"KRN",8994,495,-1)
0^4
"KRN",8994,495,0)
GMV ALLERGY^ALLERGY^GMVUTL3^2^R^0^^1
"KRN",8994,495,1,0)
^8994.01^1^1^3020306^^
"KRN",8994,495,1,1,0)
This procedure retrieves the patient's allergy information.
"KRN",8994,495,2,0)
^8994.02A^1^1
"KRN",8994,495,2,1,0)
DFN^1^30^1^1
"KRN",8994,495,2,1,1,0)
^8994.021^1^1^3020306^^^^
"KRN",8994,495,2,1,1,1,0)
DFN is a pointer to the PATIENT file (#2).
"KRN",8994,495,2,"B","DFN",1)

"KRN",8994,495,2,"PARAMSEQ",1,1)

"KRN",8994,495,3,0)
^8994.03^10^10^3020306^^
"KRN",8994,495,3,1,0)
Returns the patient allergy information in the array specified.
"KRN",8994,495,3,2,0)
 
"KRN",8994,495,3,3,0)
example:
"KRN",8994,495,3,4,0)
 RESULT(n)=This patient has the following allergy(ies):
"KRN",8994,495,3,5,0)
     (n+1)=RADIOLOGICAK/CONTRAST MEDIA
"KRN",8994,495,3,6,0)
 
"KRN",8994,495,3,7,0)
n is a sequential number starting at 1.
"KRN",8994,495,3,8,0)
 
"KRN",8994,495,3,9,0)
If there is no data, then the following is returned:
"KRN",8994,495,3,10,0)
 RESULT(1)=No Allergy Assessment
"KRN",8994,496,-1)
0^9
"KRN",8994,496,0)
GMV CLINIC PT^CLINPTS^GMVCLIN^2^R^0^^1
"KRN",8994,496,1,0)
^8994.01^2^2^3020826^^^^
"KRN",8994,496,1,1,0)
This procedure lists patients who have an appointment for a selected
"KRN",8994,496,1,2,0)
clinic and a given period of time.
"KRN",8994,496,2,0)
^8994.02A^2^2
"KRN",8994,496,2,1,0)
CLIN^1^30^1^1
"KRN",8994,496,2,1,1,0)
^8994.021^2^2^3020102^^
"KRN",8994,496,2,1,1,1,0)
CLIN contains the name of the selected clinic from the Hospital Location
"KRN",8994,496,2,1,1,2,0)
file (#44).
"KRN",8994,496,2,2,0)
BDATE^1^30^1^2
"KRN",8994,496,2,2,1,0)
^8994.021^1^1^3020826^^^^
"KRN",8994,496,2,2,1,1,0)
BDATE contains TODAY, TOMORROW, YESTERDAY, PAST WEEK or PAST MONTH.
"KRN",8994,496,2,"B","BDATE",2)

"KRN",8994,496,2,"B","CLIN",1)

"KRN",8994,496,2,"PARAMSEQ",1,1)

"KRN",8994,496,2,"PARAMSEQ",2,2)

"KRN",8994,496,3,0)
^8994.03^2^2^3020826^^
"KRN",8994,496,3,1,0)
Returns a list of patient names and DFNs for the selected clinic and the
"KRN",8994,496,3,2,0)
given date span in the array specified.
"KRN",8994,1050,-1)
0^75
"KRN",8994,1050,0)
GMV VITALS/CAT/QUAL^GETVITAL^GMVUTL7^2^R^0^^1
"KRN",8994,1050,1,0)
^8994.01^1^1^3020108^
"KRN",8994,1050,1,1,0)
Returns all qualifier information for the vital types selected.
"KRN",8994,1050,2,0)
^8994.02A^1^1
"KRN",8994,1050,2,1,0)
GMVLIST^1^60^1^1
"KRN",8994,1050,2,1,1,0)
^^3^3^3020108^
"KRN",8994,1050,2,1,1,1,0)
A list of vital type abbreviations separated by up-arrows (e.g., "T^P" 
"KRN",8994,1050,2,1,1,2,0)
for temperature and pulse). When the value is null, all qualifier 
"KRN",8994,1050,2,1,1,3,0)
information will be returned for all vital types.
"KRN",8994,1050,2,"B","GMVLIST",1)

"KRN",8994,1050,2,"PARAMSEQ",1,1)

"KRN",8994,1050,3,0)
^^3^3^3020108^
"KRN",8994,1050,3,1,0)
Returns the qualifier information for the selected vital types in the 
"KRN",8994,1050,3,2,0)
array specified. Includes the abnormal high and low values for the vital 
"KRN",8994,1050,3,3,0)
type, if any.
"KRN",8994,1454,-1)
0^83
"KRN",8994,1454,0)
GMV PTSELECT^RPC^GMVRPCP^4^R^0^^1
"KRN",8994,1454,1,0)
^8994.01^4^4^3020711^^^^
"KRN",8994,1454,1,1,0)
Used as a method of processing a patient DFN and returning all warnings 
"KRN",8994,1454,1,2,0)
and notices (i.e. sensitivity or same last 4 of SSN) to the client 
"KRN",8994,1454,1,3,0)
application for processing.  Also includes a call to log access of 
"KRN",8994,1454,1,4,0)
sensitive patients to the DG SECURITY LOG file.
"KRN",8994,1454,2,0)
^8994.02A^4^4
"KRN",8994,1454,2,1,0)
RESULT^4^30^1^1
"KRN",8994,1454,2,1,1,0)
^8994.021^1^1^3020102^^
"KRN",8994,1454,2,1,1,1,0)
This is the RPC return array variable.
"KRN",8994,1454,2,2,0)
OPTION^1^30^1^2
"KRN",8994,1454,2,2,1,0)
^^7^7^3011119^
"KRN",8994,1454,2,2,1,1,0)
Contains the appropriate method to perform within this RPC call.
"KRN",8994,1454,2,2,1,2,0)
 
"KRN",8994,1454,2,2,1,3,0)
Options are:
"KRN",8994,1454,2,2,1,4,0)
  SELECT: Performs a select of the supplied DFN (param 3) and returns the 
"KRN",8994,1454,2,2,1,5,0)
          notices and warnings for the DFN
"KRN",8994,1454,2,2,1,6,0)
 
"KRN",8994,1454,2,2,1,7,0)
  LOGSEC: Logs a security entry in the DG SECURITY LOG file.
"KRN",8994,1454,2,3,0)
DFN^1^12^1^3
"KRN",8994,1454,2,3,1,0)
^^2^2^3011118^
"KRN",8994,1454,2,3,1,1,0)
Contains the DFN of the patient to process in the SELECT or LOGSEC method 
"KRN",8994,1454,2,3,1,2,0)
of param 2.
"KRN",8994,1454,2,4,0)
DATA^1^80^0^4
"KRN",8994,1454,2,4,1,0)
^8994.021^2^2^3020711^^^^
"KRN",8994,1454,2,4,1,1,0)
Used to pass in the option name to DGSEC when logging against the DG 
"KRN",8994,1454,2,4,1,2,0)
SECURITY LOG file.
"KRN",8994,1454,2,"B","DATA",4)

"KRN",8994,1454,2,"B","DFN",3)

"KRN",8994,1454,2,"B","OPTION",2)

"KRN",8994,1454,2,"B","RESULT",1)

"KRN",8994,1454,2,"PARAMSEQ",1,1)

"KRN",8994,1454,2,"PARAMSEQ",2,2)

"KRN",8994,1454,2,"PARAMSEQ",3,3)

"KRN",8994,1454,2,"PARAMSEQ",4,4)

"KRN",8994,1454,3,0)
^8994.03^3^3^3020711^^^^
"KRN",8994,1454,3,1,0)
RESULTS(0)   =Success or failure flag (-1 or 1) from both SELECT & LOGSEC 
"KRN",8994,1454,3,2,0)
              methods
"KRN",8994,1454,3,3,0)
RESULTS(1..n)=Messages to process by the client from the SELECT method.
"KRN",8994,1459,-1)
0^21
"KRN",8994,1459,0)
GMV LATEST VM^GETLAT^GMVGETD^4^R^0^^1
"KRN",8994,1459,1,0)
^8994.01^1^1^3020108^^^^
"KRN",8994,1459,1,1,0)
This procedure retrieves the latest vital records for a given patient.
"KRN",8994,1459,2,0)
^8994.02A^1^1
"KRN",8994,1459,2,1,0)
GMRDFN^1^10^1^1
"KRN",8994,1459,2,1,1,0)
^8994.021^1^1^3020108^^^^
"KRN",8994,1459,2,1,1,1,0)
GMRDFN variable is pointer to the Patient file (#2).
"KRN",8994,1459,2,"B","GMRDFN",1)

"KRN",8994,1459,2,"PARAMSEQ",1,1)

"KRN",8994,1459,3,0)
^^12^12^3020108^
"KRN",8994,1459,3,1,0)
Returns the name of the global array (i.e., ^TMP($J,"GRPC")) containing 
"KRN",8994,1459,3,2,0)
the latest vitals for the selected patient.
"KRN",8994,1459,3,3,0)
 
"KRN",8994,1459,3,4,0)
 ^TMP($J,"GRPC",n)=Vital type:   (date/time taken) Rate Unit (U.S.)
"KRN",8994,1459,3,5,0)
                   Rate and Unit (Metric) (Qualifiers)
"KRN",8994,1459,3,6,0)
 
"KRN",8994,1459,3,7,0)
n is a sequential number starting at 1.
"KRN",8994,1459,3,8,0)
 
"KRN",8994,1459,3,9,0)
The data is a formatted line of text.
"KRN",8994,1459,3,10,0)
 
"KRN",8994,1459,3,11,0)
If there is no data for the patient, the following is returned:
"KRN",8994,1459,3,12,0)
 ^TMP($J,"GRPC",1)=There are no results to report
"KRN",8994,1460,-1)
0^38
"KRN",8994,1460,0)
GMV ROOM/BED^ROOMBED^GMVGETD^4^R^0^^1
"KRN",8994,1460,1,0)
^8994.01^2^2^3020107^^^^
"KRN",8994,1460,1,1,0)
This procedure extracts room/bed information from Room-Bed file (#405.4)
"KRN",8994,1460,1,2,0)
for a given MAS ward.
"KRN",8994,1460,2,0)
^8994.02A^1^1
"KRN",8994,1460,2,1,0)
GMRWARD^1^30^1^1
"KRN",8994,1460,2,1,1,0)
^8994.021^1^1^3020107^^^^
"KRN",8994,1460,2,1,1,1,0)
GMRWARD is a MAS ward name from the Ward Location file (#42).
"KRN",8994,1460,2,"B","GMRWARD",1)

"KRN",8994,1460,2,"PARAMSEQ",1,1)

"KRN",8994,1460,3,0)
^^8^8^3020107^
"KRN",8994,1460,3,1,0)
Returns the global array name (i.e., ^TMP($J,"GROOM")) containing a list
"KRN",8994,1460,3,2,0)
of rooms/beds for the given MAS ward.
"KRN",8994,1460,3,3,0)
 
"KRN",8994,1460,3,4,0)
^TMP($J,"GROOM",n)=Roombed
"KRN",8994,1460,3,5,0)
 
"KRN",8994,1460,3,6,0)
n is a sequential number starting at 1.
"KRN",8994,1460,3,7,0)
 
"KRN",8994,1460,3,8,0)
If there is no data, then the global array is undefined.
"KRN",8994,1472,-1)
0^78
"KRN",8994,1472,0)
GMV CUMULATIVE REPORT^EN1^GMVSC0^1^R^0^^
"KRN",8994,1472,1,0)
^8994.01^1^1^3020102^^^^
"KRN",8994,1472,1,1,0)
Prints the Cumulative Vitals Report.
"KRN",8994,1472,2,0)
^8994.02A^2^1
"KRN",8994,1472,2,2,0)
GMVDATA^1^150^1^1
"KRN",8994,1472,2,2,1,0)
^8994.021^13^13^3020102^^^^
"KRN",8994,1472,2,2,1,1,0)
A multi-piece variable that identifies the values needed to run the 
"KRN",8994,1472,2,2,1,2,0)
report.
"KRN",8994,1472,2,2,1,3,0)
 
"KRN",8994,1472,2,2,1,4,0)
 Piece  1: DFN
"KRN",8994,1472,2,2,1,5,0)
        2: Start date/time of the report range (FileMan format)
"KRN",8994,1472,2,2,1,6,0)
        3: End date/time of the report range (FileMan format)
"KRN",8994,1472,2,2,1,7,0)
        4: n/a
"KRN",8994,1472,2,2,1,8,0)
        5: Device name (File 3.5, Field .01)
"KRN",8994,1472,2,2,1,9,0)
        6: Device internal entry number
"KRN",8994,1472,2,2,1,10,0)
        7: date/time to print the report (FileMan format)
"KRN",8994,1472,2,2,1,11,0)
        8: ward internal entry number (File 42)
"KRN",8994,1472,2,2,1,12,0)
        9: hospital location internal entry number (File 44)
"KRN",8994,1472,2,2,1,13,0)
       10: list of rooms separated by a comma (e.g., 200,210,220)
"KRN",8994,1472,2,"B","GMVDATA",2)

"KRN",8994,1472,2,"PARAMSEQ",1,2)

"KRN",8994,1472,3,0)
^8994.03^4^4^3020102^^^
"KRN",8994,1472,3,1,0)
Returns a message stating the outcome of the request to queue the report. 
"KRN",8994,1472,3,2,0)
If the report was successfully queued, RESULT will be "Report sent to 
"KRN",8994,1472,3,3,0)
device. Task #: " ZTSK" where ZTSK is the task number of the job. If the 
"KRN",8994,1472,3,4,0)
report could not be queued, RESULT will be "Unable to task the report."
"KRN",8994,1473,-1)
0^81
"KRN",8994,1473,0)
GMV LATEST VITALS BY LOCATION^EN1^GMVDS1^1^R^0
"KRN",8994,1473,1,0)
^8994.01^2^2^3020102^^^
"KRN",8994,1473,1,1,0)
Prints the latest vitals/measurements for all patients on a given ward
"KRN",8994,1473,1,2,0)
location.
"KRN",8994,1473,2,0)
^8994.02A^2^1
"KRN",8994,1473,2,2,0)
GMVDATA^1^150^1^1
"KRN",8994,1473,2,2,1,0)
^^13^13^3020102^
"KRN",8994,1473,2,2,1,1,0)
A multi-piece variable that identifies the values needed to run the 
"KRN",8994,1473,2,2,1,2,0)
report.
"KRN",8994,1473,2,2,1,3,0)
  
"KRN",8994,1473,2,2,1,4,0)
  Piece  1: n/a
"KRN",8994,1473,2,2,1,5,0)
         2: n/a
"KRN",8994,1473,2,2,1,6,0)
         3: n/a
"KRN",8994,1473,2,2,1,7,0)
         4: n/a
"KRN",8994,1473,2,2,1,8,0)
         5: Device name (File 3.5, Field .01)
"KRN",8994,1473,2,2,1,9,0)
         6: Device internal entry number
"KRN",8994,1473,2,2,1,10,0)
         7: date/time to print the report (FileMan format)
"KRN",8994,1473,2,2,1,11,0)
         8: ward internal entry number (File 42)
"KRN",8994,1473,2,2,1,12,0)
         9: hospital location internal entry number (File 44)
"KRN",8994,1473,2,2,1,13,0)
        10: n/a
"KRN",8994,1473,2,"B","GMVDATA",2)

"KRN",8994,1473,2,"PARAMSEQ",1,2)

"KRN",8994,1473,3,0)
^^4^4^3020102^
"KRN",8994,1473,3,1,0)
Returns a message stating the outcome of the request to queue the report.
"KRN",8994,1473,3,2,0)
If the report was successfully queued, RESULT will be "Report sent to 
"KRN",8994,1473,3,3,0)
device. Task #: " ZTSK" where ZTSK is the task number of the job. If the 
"KRN",8994,1473,3,4,0)
report could not be queued, RESULT will be "Unable to task the report."
"KRN",8994,1474,-1)
0^82
"KRN",8994,1474,0)
GMV LATEST VITALS FOR PATIENT^EN1^GMVDS1^1^R^0
"KRN",8994,1474,1,0)
^8994.01^1^1^3020102^^
"KRN",8994,1474,1,1,0)
Prints the latest vitals/measurements for the selected patient.
"KRN",8994,1474,2,0)
^8994.02A^2^1
"KRN",8994,1474,2,2,0)
GMVDATA^1^150^1^1
"KRN",8994,1474,2,2,1,0)
^^13^13^3020102^
"KRN",8994,1474,2,2,1,1,0)
A multi-piece variable that identifies the values needed to run the 
"KRN",8994,1474,2,2,1,2,0)
report.
"KRN",8994,1474,2,2,1,3,0)
 
"KRN",8994,1474,2,2,1,4,0)
  Piece  1: DFN
"KRN",8994,1474,2,2,1,5,0)
         2: n/a
"KRN",8994,1474,2,2,1,6,0)
         3: n/a
"KRN",8994,1474,2,2,1,7,0)
         4: n/a
"KRN",8994,1474,2,2,1,8,0)
         5: Device name (File 3.5, Field .01)
"KRN",8994,1474,2,2,1,9,0)
         6: Device internal entry number
"KRN",8994,1474,2,2,1,10,0)
         7: date/time to print the report (FileMan format)
"KRN",8994,1474,2,2,1,11,0)
         8: n/a
"KRN",8994,1474,2,2,1,12,0)
         9: n/a
"KRN",8994,1474,2,2,1,13,0)
        10: n/a
"KRN",8994,1474,2,"B","GMVDATA",2)

"KRN",8994,1474,2,"PARAMSEQ",1,2)

"KRN",8994,1474,3,0)
^^4^4^3020102^
"KRN",8994,1474,3,1,0)
Returns a message stating the outcome of the request to queue the report. 
"KRN",8994,1474,3,2,0)
If the report was successfully queued, RESULT will be "Report sent to 
"KRN",8994,1474,3,3,0)
device. Task #: " ZTSK" where ZTSK is the task number of the job. If the 
"KRN",8994,1474,3,4,0)
report could not be queued, RESULT will be "Unable to task the report."
"KRN",8994,1475,-1)
0^79
"KRN",8994,1475,0)
GMV ENTERED IN ERROR-PATIENT^EN1^GMVER0^1^R^0
"KRN",8994,1475,1,0)
^8994.01^2^2^3020102^
"KRN",8994,1475,1,1,0)
Prints a report of all vitals/measurements entered in error for the
"KRN",8994,1475,1,2,0)
selected patient for a given date/time range.
"KRN",8994,1475,2,0)
^8994.02A^2^1
"KRN",8994,1475,2,2,0)
GMVDATA^1^150^1^1
"KRN",8994,1475,2,2,1,0)
^^13^13^3020102^
"KRN",8994,1475,2,2,1,1,0)
A multi-piece variable that identifies the values needed to run the 
"KRN",8994,1475,2,2,1,2,0)
report.
"KRN",8994,1475,2,2,1,3,0)
 
"KRN",8994,1475,2,2,1,4,0)
  Piece  1: DFN
"KRN",8994,1475,2,2,1,5,0)
         2: Start date/time of the report range (FileMan format)
"KRN",8994,1475,2,2,1,6,0)
         3: End date/time of the report range (FileMan format)
"KRN",8994,1475,2,2,1,7,0)
         4: n/a
"KRN",8994,1475,2,2,1,8,0)
         5: Device name (File 3.5, Field .01)
"KRN",8994,1475,2,2,1,9,0)
         6: Device internal entry number
"KRN",8994,1475,2,2,1,10,0)
         7: date/time to print the report (FileMan format)
"KRN",8994,1475,2,2,1,11,0)
         8: n/a
"KRN",8994,1475,2,2,1,12,0)
         9: n/a
"KRN",8994,1475,2,2,1,13,0)
        10: n/a
"KRN",8994,1475,2,"B","GMVDATA",2)

"KRN",8994,1475,2,"PARAMSEQ",1,2)

"KRN",8994,1475,3,0)
^^4^4^3020102^
"KRN",8994,1475,3,1,0)
Returns a message stating the outcome of the request to queue the report. 
"KRN",8994,1475,3,2,0)
If the report was successfully queued, RESULT will be "Report sent to 
"KRN",8994,1475,3,3,0)
device. Task #: " ZTSK" where ZTSK is the task number of the job. If the 
"KRN",8994,1475,3,4,0)
report could not be queued, RESULT will be "Unable to task the report."
"KRN",8994,1476,-1)
0^84
"KRN",8994,1476,0)
GMV QUALIFIER TABLE^EN1^GMVCAQU^4^R^0^^1
"KRN",8994,1476,1,0)
^8994.01^3^3^3020515^^^^
"KRN",8994,1476,1,1,0)
Prints a list of categories and qualifiers associated with individual
"KRN",8994,1476,1,2,0)
vital types (e.g., blood pressure). Data comes from the GMRV Vital
"KRN",8994,1476,1,3,0)
Qualifier (#120.52) file and the GMRV Vital Category (#120.53) file.
"KRN",8994,1476,2,0)
^8994.02A^2^1
"KRN",8994,1476,2,2,0)
GMVDATA^1^150^1^1
"KRN",8994,1476,2,2,1,0)
^8994.021^13^13^3020102^^
"KRN",8994,1476,2,2,1,1,0)
A multi-piece variable that identifies the values needed to run the 
"KRN",8994,1476,2,2,1,2,0)
report.
"KRN",8994,1476,2,2,1,3,0)
 
"KRN",8994,1476,2,2,1,4,0)
  Piece  1: n/a
"KRN",8994,1476,2,2,1,5,0)
         2: n/a
"KRN",8994,1476,2,2,1,6,0)
         3: n/a
"KRN",8994,1476,2,2,1,7,0)
         4: n/a
"KRN",8994,1476,2,2,1,8,0)
         5: Device name (File 3.5, Field .01)
"KRN",8994,1476,2,2,1,9,0)
         6: Device internal entry number
"KRN",8994,1476,2,2,1,10,0)
         7: date/time to print the report (FileMan format)
"KRN",8994,1476,2,2,1,11,0)
         8: n/a
"KRN",8994,1476,2,2,1,12,0)
         9: n/a
"KRN",8994,1476,2,2,1,13,0)
        10: n/a
"KRN",8994,1476,2,"B","GMVDATA",2)

"KRN",8994,1476,2,"PARAMSEQ",1,2)

"KRN",8994,1476,3,0)
^8994.03^4^4^3020515^^^
"KRN",8994,1476,3,1,0)
Returns a message stating the outcome of the request to queue the report. 
"KRN",8994,1476,3,2,0)
If the report was successfully queued, RESULT will be "Report sent to 
"KRN",8994,1476,3,3,0)
device. Task #: " ZTSK" where ZTSK is the task number of the job. If the 
"KRN",8994,1476,3,4,0)
report could not be queued, RESULT will be "Unable to task the report."
"KRN",8994,1482,-1)
0^86
"KRN",8994,1482,0)
GMV MANAGER^RPC^GMVRPCM^4^R^^^1
"KRN",8994,1482,1,0)
^^1^1^3020902^
"KRN",8994,1482,1,1,0)
Performs many functions for the Manager module.
"KRN",8994,1482,2,0)
^8994.02A^2^2
"KRN",8994,1482,2,1,0)
OPTION^1^10^1^1
"KRN",8994,1482,2,1,1,0)
^^1^1^3020902^
"KRN",8994,1482,2,1,1,1,0)
Routine tag line to call.
"KRN",8994,1482,2,2,0)
DATA^1^100^1^2
"KRN",8994,1482,2,2,1,0)
^^1^1^3020902^
"KRN",8994,1482,2,2,1,1,0)
Other data as required for the call.
"KRN",8994,1482,2,"B","DATA",2)

"KRN",8994,1482,2,"B","OPTION",1)

"KRN",8994,1482,2,"PARAMSEQ",1,1)

"KRN",8994,1482,2,"PARAMSEQ",2,2)

"KRN",8994,1482,3,0)
^^2^2^3020902^
"KRN",8994,1482,3,1,0)
What is returned in the RESULTS array varies depending on the routine 
"KRN",8994,1482,3,2,0)
entry point called in the OPTION variable.
"KRN",8994,1485,-1)
0^88
"KRN",8994,1485,0)
GMV WARD/ROOM PATIENTS^ROOMPT^GMVUTL7^2^R^0^^
"KRN",8994,1485,1,0)
^8994.01^1^1^3020902^^
"KRN",8994,1485,1,1,0)
Returns a list of patients in the ward and rooms specified.
"KRN",8994,1485,2,0)
^8994.02A^2^2
"KRN",8994,1485,2,1,0)
GMVWRD^1^60^1^1
"KRN",8994,1485,2,1,1,0)
^^1^1^3020902^
"KRN",8994,1485,2,1,1,1,0)
Name of the ward (e.g., 2EAST).
"KRN",8994,1485,2,2,0)
GMVRLST^1^150^1^2
"KRN",8994,1485,2,2,1,0)
^^1^1^3020902^
"KRN",8994,1485,2,2,1,1,0)
The room numbers of the ward separated by comma (e.g., 200,210,220).
"KRN",8994,1485,2,"B","GMVRLST",2)

"KRN",8994,1485,2,"B","GMVWRD",1)

"KRN",8994,1485,2,"PARAMSEQ",1,1)

"KRN",8994,1485,2,"PARAMSEQ",2,2)

"KRN",8994,1485,3,0)
^^2^2^3020902^
"KRN",8994,1485,3,1,0)
RESULT(n)=patient name^DFN^DOB (external)^SSN (no hyphens)
"KRN",8994,1485,3,2,0)
 where n is a sequential number beginning with 0 (zero)
"KRN",8994,1491,-1)
0^89
"KRN",8994,1491,0)
GMV GET CURRENT TIME^TIME^GMVUTL7^1^R^0^^0^1
"KRN",8994,1491,1,0)
^8994.01^1^1^3020306^^^^
"KRN",8994,1491,1,1,0)
Gets current time from server
"KRN",8994,1491,3,0)
^8994.03^1^1^3020306^^^
"KRN",8994,1491,3,1,0)
Returns fileman time and date
"KRN",8994,1494,-1)
0^90
"KRN",8994,1494,0)
GMV USER^RPC^GMVRPCU^4^R^0^^1
"KRN",8994,1494,1,0)
^8994.01^1^1^3020902^^
"KRN",8994,1494,1,1,0)
Retrieves data about the user (e.g., parameter settings).
"KRN",8994,1494,2,0)
^8994.02A^2^2
"KRN",8994,1494,2,1,0)
OPTION^1^10^1^1
"KRN",8994,1494,2,1,1,0)
^8994.021^1^1^3020902^^
"KRN",8994,1494,2,1,1,1,0)
Routine tag line to call in GMVRPCU.
"KRN",8994,1494,2,2,0)
DATA^1^100^1^2
"KRN",8994,1494,2,2,1,0)
^8994.021^1^1^3020902^^
"KRN",8994,1494,2,2,1,1,0)
Other data as required for the call.
"KRN",8994,1494,2,"B","DATA",2)

"KRN",8994,1494,2,"B","OPTION",1)

"KRN",8994,1494,2,"PARAMSEQ",1,1)

"KRN",8994,1494,2,"PARAMSEQ",2,2)

"KRN",8994,1494,3,0)
^8994.03^2^2^3020902^^
"KRN",8994,1494,3,1,0)
What is returned in the RESULTS array varies depending on the routine 
"KRN",8994,1494,3,2,0)
entry point called in the OPTION variable.
"KRN",8994,1502,-1)
0^91
"KRN",8994,1502,0)
GMV NUR UNIT PT^APTLIST^GMVUTL8^2^R^0
"KRN",8994,1502,1,0)
^^1^1^3020902^
"KRN",8994,1502,1,1,0)
Returns a list of active patients for a nursing location.
"KRN",8994,1502,2,0)
^8994.02A^1^1
"KRN",8994,1502,2,1,0)
LOC^1^60^1^1
"KRN",8994,1502,2,1,1,0)
^^1^1^3020902^
"KRN",8994,1502,2,1,1,1,0)
NURS LOCATION file (#211.4) ien.
"KRN",8994,1502,2,"B","LOC",1)

"KRN",8994,1502,2,"PARAMSEQ",1,1)

"KRN",8994,1502,3,0)
^^5^5^3020902^
"KRN",8994,1502,3,1,0)
ARRAY - Subscripted by sequential number with DFN in first piece and
"KRN",8994,1502,3,2,0)
patient name in second piece.
"KRN",8994,1502,3,3,0)
 
"KRN",8994,1502,3,4,0)
 example: ARRAY(#)=DFN^patient name^SSN^DOB^SEX AND AGE^ATTENDING^VETERAN
"KRN",8994,1502,3,5,0)
          ^INTERNAL DATE/TIME DECEASED^EXTERNAL DATE/TIME DECEASED
"KRN",8994,1568,-1)
0^92
"KRN",8994,1568,0)
GMV CHECK DEVICE^CHKDEV^GMVUTL2^2^R^0^^1
"KRN",8994,1568,1,0)
^^2^2^3020826^
"KRN",8994,1568,1,1,0)
This RPC calls a KERNEL utility to return a list of printers the user may 
"KRN",8994,1568,1,2,0)
select to print output. Returns a maximum of twenty entries.
"KRN",8994,1568,2,0)
^8994.02A^3^3
"KRN",8994,1568,2,1,0)
GMVIEN^1^^1^1
"KRN",8994,1568,2,1,1,0)
^8994.021^1^1^3020826^^^
"KRN",8994,1568,2,1,1,1,0)
The value to begin the search in the Device file (#3.5). Can be null.
"KRN",8994,1568,2,2,0)
GMVDIR^1^1^1^2
"KRN",8994,1568,2,2,1,0)
^8994.021^2^2^3020826^^
"KRN",8994,1568,2,2,1,1,0)
Direction of the search (1 = forward, -1 = backwards).
"KRN",8994,1568,2,2,1,2,0)
If DIR is null, then set to 1.
"KRN",8994,1568,2,3,0)
GMVRMAR^1^^1^3
"KRN",8994,1568,2,3,1,0)
^8994.021^1^1^3020826^^^
"KRN",8994,1568,2,3,1,1,0)
Right margin as a single number or range (e.g, 80, 132 or "80-132").
"KRN",8994,1568,2,"B","GMVDIR",2)

"KRN",8994,1568,2,"B","GMVIEN",1)

"KRN",8994,1568,2,"B","GMVRMAR",3)

"KRN",8994,1568,2,"PARAMSEQ",1,1)

"KRN",8994,1568,2,"PARAMSEQ",2,2)

"KRN",8994,1568,2,"PARAMSEQ",3,3)

"KRN",8994,1568,3,0)
^8994.03^10^10^3020826^^
"KRN",8994,1568,3,1,0)
RESULT(n)=P1^P2^P3^P4^P5^P6
"KRN",8994,1568,3,2,0)
 
"KRN",8994,1568,3,3,0)
 where n = a sequential number starting with 1
"KRN",8994,1568,3,4,0)
      P1 = File 3.5  IEN
"KRN",8994,1568,3,5,0)
      P2 = File 3.5 name (.01 value) 
"KRN",8994,1568,3,6,0)
      P3 = File 3.5 name (.01 value) or flag to indicate last entry in 
"KRN",8994,1568,3,7,0)
           the array
"KRN",8994,1568,3,8,0)
      P4 = location of terminal
"KRN",8994,1568,3,9,0)
      P5 = right margin
"KRN",8994,1568,3,10,0)
      P6 = page length
"KRN",8994,1571,-1)
0^93
"KRN",8994,1571,0)
GMV PARAMETER^RPC^GMVPAR^4^R^^^1
"KRN",8994,1571,1,0)
^8994.01^1^1^3020902^^^^
"KRN",8994,1571,1,1,0)
Manages the GMV system parameters.
"KRN",8994,1571,2,0)
^8994.02A^5^5
"KRN",8994,1571,2,1,0)
OPTION^1^10^1^1
"KRN",8994,1571,2,1,1,0)
^^1^1^3020902^
"KRN",8994,1571,2,1,1,1,0)
Routine tag line to call.
"KRN",8994,1571,2,2,0)
ENT^1^^^2
"KRN",8994,1571,2,3,0)
PAR^1^^^3
"KRN",8994,1571,2,4,0)
INST^1^^^4
"KRN",8994,1571,2,5,0)
VAL^1^^^6
"KRN",8994,1571,2,"B","ENT",2)

"KRN",8994,1571,2,"B","INST",4)

"KRN",8994,1571,2,"B","OPTION",1)

"KRN",8994,1571,2,"B","PAR",3)

"KRN",8994,1571,2,"B","VAL",5)

"KRN",8994,1571,2,"PARAMSEQ",1,1)

"KRN",8994,1571,2,"PARAMSEQ",2,2)

"KRN",8994,1571,2,"PARAMSEQ",3,3)

"KRN",8994,1571,2,"PARAMSEQ",4,4)

"KRN",8994,1571,2,"PARAMSEQ",6,5)

"MBREQ")
0
"ORD",3,19.1)
19.1;3;1;;KEY^XPDTA1;;;;;KEYDEL^XPDIA1
"ORD",3,19.1,0)
SECURITY KEY
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"ORD",20,8989.51)
8989.51;20;;;PAR1E1^XPDTA2;PAR1F1^XPDIA3;PAR1E1^XPDIA3;PAR1F2^XPDIA3
"ORD",20,8989.51,0)
PARAMETER DEFINITION
"PKG",44,-1)
1^1
"PKG",44,0)
GEN. MED. REC. - VITALS^GMRV^Vitals/Measurements Module of General Medical Record.
"PKG",44,1,0)
^9.41A^3^3^3020326^^^^
"PKG",44,1,1,0)
This is only a part of the General Medical Record Package.  This part 
"PKG",44,1,2,0)
contains the vitals/measurements module which tracks patient vital signs
"PKG",44,1,3,0)
and physical measurements.
"PKG",44,5)
HINES
"PKG",44,7)
^^III
"PKG",44,20,0)
^9.402P^^
"PKG",44,22,0)
^9.49I^1^1
"PKG",44,22,1,0)
5.0^3021028
"PKG",44,22,1,1,0)
^^1^1^3021028
"PKG",44,22,1,1,1,0)
This software is used to track patient vital signs and measurements.
"PKG",44,"DEV")
YLHSU/HISC
"PKG",44,"VERSION")
5.0
"PRE")
GMVXENV
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
122
"RTN","GMVBMI")
0^191^B5347273
"RTN","GMVBMI",1,0)
GMVBMI ;HIOFO/YH,FT-EXTRACT HEIGHT TO CALCULATE BMI FOR WEIGHT; 3/24/97 ;11/8/01  14:38
"RTN","GMVBMI",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVBMI",3,0)
 ;
"RTN","GMVBMI",4,0)
 ; This routine uses the following IAs:
"RTN","GMVBMI",5,0)
 ; <None>
"RTN","GMVBMI",6,0)
 ;
"RTN","GMVBMI",7,0)
HT ;OBTAIN THE LATEST HEIGHT FOR THE CURRENT WEIGHT
"RTN","GMVBMI",8,0)
 K GHEIGHT S GI=$O(^GMRD(120.51,"B","HEIGHT",0)) Q:GI'>0
"RTN","GMVBMI",9,0)
 S GH=0 F  S GH=$O(^GMR(120.5,"AA",DFN,GI,GH)) Q:GH'>0  S GH(1)=0 F  S GH(1)=$O(^GMR(120.5,"AA",DFN,GI,GH,GH(1))) Q:GH(1)'>0  I $D(^GMR(120.5,GH(1),0)),'$D(^GMR(120.5,GH(1),2)),$P(^GMR(120.5,GH(1),0),"^",8)'="" D
"RTN","GMVBMI",10,0)
 . I $P(^GMR(120.5,GH(1),0),"^",8)>0 S GHEIGHT($P(^(0),"^"))=$P(^(0),"^",8)
"RTN","GMVBMI",11,0)
 Q
"RTN","GMVBMI",12,0)
CALBMI(GBMI) ;OBTAIN HEIGHT TO CALCULATE BMI
"RTN","GMVBMI",13,0)
 N GDATE,GMRVHT S GMRVHT="" D HT I '$D(GHEIGHT) K GHEIGHT,GI,GH Q
"RTN","GMVBMI",14,0)
 ;HEIGHT AND WEIGHT WERE OBTAINED AT THE SAME TIME
"RTN","GMVBMI",15,0)
 I $D(GHEIGHT(GBMI(1))) D  K GHEIGHT,GH,GI Q
"RTN","GMVBMI",16,0)
 . S GBMI(2)=GBMI(2)/2.2,GMRVHT=+GHEIGHT(GBMI(1))*2.54/100
"RTN","GMVBMI",17,0)
 . I +GMRVHT'>0 S GBMI=$J(0,0,0) Q
"RTN","GMVBMI",18,0)
 . S GBMI=$J(GBMI(2)/(GMRVHT*GMRVHT),0,0) S GBMI=GBMI_$S(GBMI>27:"*",1:"")
"RTN","GMVBMI",19,0)
 ;EXTRACT THE HEIGHT TAKEN BEFORE THE WEIGHT WAS TAKEN
"RTN","GMVBMI",20,0)
 S GDATE=9999999-GBMI(1),GDATE(1)=0 F  S GDATE=$O(^GMR(120.5,"AA",DFN,GI,GDATE)) Q:GDATE'>0!(GDATE(1)>0)  D
"RTN","GMVBMI",21,0)
 . S G=$O(^GMR(120.5,"AA",DFN,GI,GDATE,0)) Q:G'>0  I $P($G(^GMR(120.5,G,0)),"^",8)'>0 Q
"RTN","GMVBMI",22,0)
 . S GDATE(1)=GDATE
"RTN","GMVBMI",23,0)
 ;EXTRACT THE HEIGHT TAKEN AFTER THE WEIGHT WAS TAKEN
"RTN","GMVBMI",24,0)
 I GDATE(1)>0,$D(GHEIGHT(9999999-GDATE(1))) D  K GHEIGHT,GH,GI Q
"RTN","GMVBMI",25,0)
 . S GDATE(1)=9999999-GDATE(1),GMRVHT=+GHEIGHT(GDATE(1))
"RTN","GMVBMI",26,0)
 . S GBMI(2)=GBMI(2)/2.2,GMRVHT=GMRVHT*2.54/100
"RTN","GMVBMI",27,0)
 . I +GMRVHT'>0 S GBMI=$J(0,0,0) Q
"RTN","GMVBMI",28,0)
 . S GBMI=$J(GBMI(2)/(GMRVHT*GMRVHT),0,0),GBMI=GBMI_$S(GBMI>27:"*",1:"")
"RTN","GMVBMI",29,0)
 S GDATE=GBMI(1),GDATE(1)=0 F  S GDATE=$O(GHEIGHT(GDATE)) Q:GDATE'>0!(GDATE(1)>0)  S GDATE(1)=GDATE
"RTN","GMVBMI",30,0)
 I GDATE(1)>0 D  K GHEIGHT,GH,GI,G Q
"RTN","GMVBMI",31,0)
 . S GMRVHT=+GHEIGHT(GDATE(1))
"RTN","GMVBMI",32,0)
 . S GBMI(2)=GBMI(2)/2.2,GMRVHT=GMRVHT*2.54/100
"RTN","GMVBMI",33,0)
 . I +GMRVHT'>0 S GBMI=$J(0,0,0) Q
"RTN","GMVBMI",34,0)
 . S GBMI=$J(GBMI(2)/(GMRVHT*GMRVHT),0,0),GBMI=GBMI_$S(GBMI>27:"*",1:"")
"RTN","GMVBMI",35,0)
 K GHEIGHT,GI,GH,G Q
"RTN","GMVBP0")
0^192^B13359839
"RTN","GMVBP0",1,0)
GMVBP0 ;HIOFO/YH,FT-KYOCERA B/P GRAPH - STORE DATA IN ^TMP($J) ;11/6/01  14:34
"RTN","GMVBP0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVBP0",3,0)
 ;
"RTN","GMVBP0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVBP0",5,0)
 ; <None>
"RTN","GMVBP0",6,0)
 ;
"RTN","GMVBP0",7,0)
EN1 ;
"RTN","GMVBP0",8,0)
 N GAPICAL,GRADIAL,GBRACHI S GAPICAL=$O(^GMRD(120.52,"B","APICAL",0)),GRADIAL=$O(^GMRD(120.52,"B","RADIAL",0)),GBRACHI=$O(^GMRD(120.52,"B","BRACHIAL",0))
"RTN","GMVBP0",9,0)
 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMVBP0",10,0)
 S GMROUT=0,(^TMP($J,"GMRK","G82M"),^TMP($J,"GMRK","G210M"),^TMP($J,"GMRK","G226M"))=0.6
"RTN","GMVBP0",11,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMVBP0",12,0)
 F GTYPE="B","P" D SETT
"RTN","GMVBP0",13,0)
 U IO D ^GMVBP1
"RTN","GMVBP0",14,0)
Q1 D Q1^GMVGR0
"RTN","GMVBP0",15,0)
 Q
"RTN","GMVBP0",16,0)
SETT ;
"RTN","GMVBP0",17,0)
 S GTYPE(1)=$S(GTYPE="B":"BLOOD PRESSURE",GTYPE="P":"PULSE",1:"") Q:GTYPE(1)
"RTN","GMVBP0",18,0)
 S GTYP=$O(^GMRD(120.51,"B",GTYPE(1),0)) Q:GTYP'>0
"RTN","GMVBP0",19,0)
 F GX=GSTART1:0 S GX=$O(^GMR(120.5,"AA",DFN,GTYP,GX)) Q:GX>GEND1!(GX'>0)  F GEN=0:0 S GEN=$O(^GMR(120.5,"AA",DFN,GTYP,GX,GEN)) Q:GEN'>0  I '$D(^GMR(120.5,GEN,2)) D BLDARR
"RTN","GMVBP0",20,0)
 Q
"RTN","GMVBP0",21,0)
BLDARR ;
"RTN","GMVBP0",22,0)
 S GDATA=$G(^GMR(120.5,GEN,0)) Q:GDATA=""
"RTN","GMVBP0",23,0)
 S GMRVX(0)=$P(GDATA,"^",8) Q:GMRVX(0)=""
"RTN","GMVBP0",24,0)
 S GMRVX=GTYPE,GMRVX(1)=0
"RTN","GMVBP0",25,0)
 D:GMRVX(0)>0!(GMRVX(0)="0") EN1^GMVSAS0
"RTN","GMVBP0",26,0)
 K GMRVARY S GMRVARY="" I $P($G(^GMR(120.5,GEN,5,0)),"^",4)>0 D CHAR^GMVCHAR(GEN,.GMRVARY,GTYP)
"RTN","GMVBP0",27,0)
 K GG S GG="" I $O(GMRVARY(0)) D
"RTN","GMVBP0",28,0)
 . S GG(1)=0 F  S GG(1)=$O(GMRVARY(GG(1))) Q:GG(1)'>0  S GG(2)=0 F  S GG(2)=$O(GMRVARY(GG(1),GG(2))) Q:GG(2)'>0  S GG(3)="" F  S GG(3)=$O(GMRVARY(GG(1),GG(2),GG(3))) Q:GG(3)=""  S GG=GG_$S(GG="":"",1:";")_GG(3)
"RTN","GMVBP0",29,0)
 S GDATA(1)=GG_"^"_$S($G(GMRVX(1))>0:1,1:"")_"^"
"RTN","GMVBP0",30,0)
 I GTYPE="P" D  Q
"RTN","GMVBP0",31,0)
 . I '$D(^GMR(120.5,GEN,5,"B")) S ^TMP($J,"GMRVG",GTYPE,9999999-GX,GMRVX(0))=GDATA(1) Q
"RTN","GMVBP0",32,0)
 . I $D(^GMR(120.5,GEN,5,"B",GBRACHI)) S ^TMP($J,"GMRVG",GTYPE,9999999-GX,GMRVX(0))=GDATA(1) Q
"RTN","GMVBP0",33,0)
 . I $D(^GMR(120.5,GEN,5,"B",GAPICAL)) S ^TMP($J,"GMRVG",GTYPE,9999999-GX,GMRVX(0))=GDATA(1) Q
"RTN","GMVBP0",34,0)
 . I $D(^GMR(120.5,GEN,5,"B",GRADIAL)) S ^TMP($J,"GMRVG",GTYPE,9999999-GX,GMRVX(0))=GDATA(1) Q
"RTN","GMVBP0",35,0)
 I GMRVX(0)>0 S ^TMP($J,"GMRVG","S",9999999-GX,$P(GMRVX(0),"/"))=$S($P(GMRVX(0),"/")<$P(^GMRD(120.57,1,1),"^",7)&($P(GMRVX(0),"/")>$P(^(1),"^",9)):"",1:"^1^")
"RTN","GMVBP0",36,0)
 I $P($G(GMRVX(0)),"/",3)'="" D
"RTN","GMVBP0",37,0)
 . S ^TMP($J,"GMRVG","B",9999999-GX,$P(GMRVX(0),"/",1,2))=GDATA(1) S ^TMP($J,"GMRVG","C",9999999-GX,"/"_$P(GMRVX(0),"/",3))=GDATA(1)
"RTN","GMVBP0",38,0)
 . S ^TMP($J,"GMRVG","D",9999999-GX,$P(GMRVX(0),"/",3))=$S($P(GMRVX(0),"/",3)<$P(^GMRD(120.57,1,1),"^",8)&($P(GMRVX(0),"/",3)>$P(^(1),"^",10)):"",1:"^1^")
"RTN","GMVBP0",39,0)
 I $P($G(GMRVX(0)),"/",3)="" D
"RTN","GMVBP0",40,0)
 . S ^TMP($J,"GMRVG",GTYPE,9999999-GX,GMRVX(0))=GDATA(1)
"RTN","GMVBP0",41,0)
 . S:$P(GMRVX(0),"/",2)>0 ^TMP($J,"GMRVG","D",9999999-GX,$P(GMRVX(0),"/",2))=$S($P(GMRVX(0),"/",2)<$P(^GMRD(120.57,1,1),"^",8)&($P(GMRVX(0),"/",2)>$P(^(1),"^",10)):"",1:"^1^")
"RTN","GMVBP0",42,0)
 S GDIAS=$S($D(^TMP($J,"GMRVG","D",9999999-GX)):$O(^TMP($J,"GMRVG","D",9999999-GX,0)),1:0)
"RTN","GMVBP0",43,0)
 S GSYS=$S($D(^TMP($J,"GMRVG","S",9999999-GX)):$O(^TMP($J,"GMRVG","S",9999999-GX,0)),1:0)
"RTN","GMVBP0",44,0)
 I GDIAS,GSYS S GMAP=$J(GDIAS+((GSYS-GDIAS)/3),0,0),^TMP($J,"GMRVG","M",9999999-GX,GMAP)=""
"RTN","GMVBP0",45,0)
 K GSYS,GDIAS Q 
"RTN","GMVBP1")
0^193^B12486565
"RTN","GMVBP1",1,0)
GMVBP1 ;HIOFO/YH,FT-CALCULATE KYOCERA B/P GRAPH DATA ;9/30/02  14:55
"RTN","GMVBP1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVBP1",3,0)
 ;
"RTN","GMVBP1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVBP1",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVBP1",6,0)
 ;
"RTN","GMVBP1",7,0)
GRAPH ;CONTINUTATION OF GMVBP0
"RTN","GMVBP1",8,0)
 D DEM^VADPT,INP^VADPT,SETV^GMVGR1
"RTN","GMVBP1",9,0)
 F GK="P","B" S ^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMVBP1",10,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMVBP1",11,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMVBP1",12,0)
 F GPGS=1:1:GPG D
"RTN","GMVBP1",13,0)
 . K GMRQUAL
"RTN","GMVBP1",14,0)
 . S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE S ^TMP($J,"GMRK","G200")=GMRRMBD D PAGE,EN1^GMVBP2,EN2^GMVBP3,EN3^GMVBP4 D
"RTN","GMVBP1",15,0)
 . . S ^TMP($J,"GMRK","G82M")=0.6,^TMP($J,"GMRK","G210M")=0.6,^TMP($J,"GMRK","G226M")=0.6
"RTN","GMVBP1",16,0)
 D KVAR^VADPT K VA Q
"RTN","GMVBP1",17,0)
PAGE ;
"RTN","GMVBP1",18,0)
 I ^TMP($J,"GMRK","G82")="" F GI=83:1:92 S ^TMP($J,"GMRK","G82")=^TMP($J,"GMRK","G"_GI),^TMP($J,"GMRK","G82M")=0.6+(1.6*(GI-82)) Q:^TMP($J,"GMRK","G82")'=""
"RTN","GMVBP1",19,0)
 I ^TMP($J,"GMRK","G210")="" F GI=211:1:219 S ^TMP($J,"GMRK","G210")=^TMP($J,"GMRK","G"_GI),^TMP($J,"GMRK","G210M")=0.6+(1.6*(GI-210)) Q:^TMP($J,"GMRK","G210")'=""
"RTN","GMVBP1",20,0)
 I ^TMP($J,"GMRK","G226")="" F GI=227:1:236 S ^TMP($J,"GMRK","G226")=^TMP($J,"GMRK","G"_GI),^TMP($J,"GMRK","G226M")=0.6+(1.6*(GI-226)) Q:^TMP($J,"GMRK","G226")'=""
"RTN","GMVBP1",21,0)
 I $D(GMRQUAL) D LEGEND^GMVLGQU
"RTN","GMVBP1",22,0)
 K GG,I,J,GSYNO Q
"RTN","GMVBP1",23,0)
SETV S ^TMP($J,"GMRK","G194")=$S(VADM(1)'="":VADM(1),1:"         ")_"  "_$S(VADM(2)'="":$P(VADM(2),"^",2),1:" "),GDOB=$S($D(VADM(3)):$P(VADM(3),"^",2),1:" "),GAGE=$S($D(VADM(4)):VADM(4),1:" ")
"RTN","GMVBP1",24,0)
 S ^TMP($J,"GMRK","G197")=$S($D(VADM(5)):$P(VADM(5),"^",2),1:" "),^TMP($J,"GMRK","G198")=$S($D(GMRWARD(1)):"Unit: "_GMRWARD(1),1:"Unit:  ")
"RTN","GMVBP1",25,0)
 S GMRRMBD=$S('(VAIN(5)=""):"Room: "_VAIN(5),1:"Room:  "),^TMP($J,"GMRK","G196")=$S($D(GDOB)&($D(GAGE)):GDOB_" ("_GAGE_")",1:" ")
"RTN","GMVBP1",26,0)
 I '$D(GMRVHLOC) S GMRVHLOC=$$HOSPLOC^GMVUTL1(+$G(VAIN(4)))
"RTN","GMVBP1",27,0)
 S GMRDIV="Division: "_$$DIVISION^GMVUTL1(+GMRVHLOC)
"RTN","GMVBP1",28,0)
 Q
"RTN","GMVBP1",29,0)
DATE F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMVBP1",30,0)
 Q
"RTN","GMVBP1",31,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMVBP1",32,0)
 Q
"RTN","GMVBP1",33,0)
SETD F GI="P","B","C","D","S" S GJ=$F("WTXPXRBIOCHDS",GI),GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMVBP5
"RTN","GMVBP1",34,0)
 S GI="M",GJ=0,GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMVBP5
"RTN","GMVBP1",35,0)
 Q
"RTN","GMVBP1",36,0)
SETP ;INITIALIZE ^TMP FOR V/M QUALIFIERS
"RTN","GMVBP1",37,0)
 ;1120+I - PULSE QUALIFIER
"RTN","GMVBP1",38,0)
 ;450+I - BP QUALIFIER
"RTN","GMVBP1",39,0)
 ;1240+I - THE THIRD PIECE OF BP
"RTN","GMVBP1",40,0)
 ;1220+I - MEAN ARTERIAL PRESSURE
"RTN","GMVBP1",41,0)
 F I=1:1:10 S (^TMP($J,"GMRK","G"_(430+I)),^("G"_(450+I)),^("G"_(1120+I)),^("G"_(1220+I)),^("G"_(1240+I)),^("G"_(1100+I)),^("G"_(1200+I)),^("G"_(210+I)),^("G"_(226+I)))=""
"RTN","GMVBP1",42,0)
 Q
"RTN","GMVBP2")
0^194^B9431833
"RTN","GMVBP2",1,0)
GMVBP2 ;HIOFO/YH,FT-DEFINE KYOCERA BP GRAPH MACRO ;11/6/01  15:45
"RTN","GMVBP2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVBP2",3,0)
 ;
"RTN","GMVBP2",4,0)
 ;This routine uses the following IAs:
"RTN","GMVBP2",5,0)
 ; <None>
"RTN","GMVBP2",6,0)
 ;
"RTN","GMVBP2",7,0)
EN1 ;
"RTN","GMVBP2",8,0)
 W !,"!R! RES; DAM;"
"RTN","GMVBP2",9,0)
BOX W !,"MCRO BOX;"
"RTN","GMVBP2",10,0)
 W !,"UNIT C; SLM 3; STM 1; MAP 0,0; SPD 0.05; BOX 16,23; MAP -3,20; BOX 19,3;"
"RTN","GMVBP2",11,0)
 W !,"FONT 40; MAP -2,0.5; TEXT 'Date/Time'; MAP -2.5,1; TEXT 'Blood Pressure';"
"RTN","GMVBP2",12,0)
 W !,"SPD 0.01; MAP -0.8,2; TEXT '220'; MAP 0,1; DAP 16,1; MAP -0.8,3; TEXT '210'; MAP 0,2; DAP 16,2;"
"RTN","GMVBP2",13,0)
 W !,"MAP -0.8,4; TEXT '200'; MAP 0,3; DAP 16,3;"
"RTN","GMVBP2",14,0)
 W:GTNM=0 "MAP 2,5; TEXT 'THERE  IS  NO  DATA  FOR  THIS  REPORT';"
"RTN","GMVBP2",15,0)
 W !,"MAP -0.8,5; TEXT '190'; MAP 0,4; DAP 16,4; MAP -0.8,6; TEXT '180'; MAP 0,5; DAP 16,5; MAP -0.8,7; TEXT '170'; MAP 0,6; DAP 16,6;"
"RTN","GMVBP2",16,0)
 W !,"MAP -0.8,8; TEXT '160'; MAP 0,7; DAP 16,7;"
"RTN","GMVBP2",17,0)
 W !,"MAP -0.8,9; TEXT '150'; MAP 0,8; DAP 16,8; MAP -0.8,10; TEXT '140'; MAP 0,9; DAP 16,9; MAP -0.8,11; TEXT '130'; MAP 0,10; DAP 16,10;"
"RTN","GMVBP2",18,0)
 W !,"MAP -0.8,12; TEXT '120'; MAP 0,11; DAP 16,11; MAP -0.8,13; TEXT '110'; MAP 0,12; DAP 16,12; MAP -0.8,14; TEXT '100'; MAP 0,13; DAP 16,13;"
"RTN","GMVBP2",19,0)
 W !,"MAP -0.7,15; TEXT '90'; MAP 0,14; DAP 16,14; MAP -0.7,16; TEXT '80'; MAP 0,15; DAP 16,15; MAP -0.7,17; TEXT '70'; MAP 0,16; DAP 16,16;"
"RTN","GMVBP2",20,0)
 W !,"MAP -0.7,18; TEXT '60'; MAP 0,17; DAP 16,17; MAP -0.7,19; TEXT '50'; MAP 0,18; DAP 16,18; MAP 0,19; DAP 16,19;"
"RTN","GMVBP2",21,0)
BOX2 ;
"RTN","GMVBP2",22,0)
 W !,"FONT 57; MAP -3,20.4; TEXT 'Pulse'; SPD .03; MAP -3,20.5; DAP 16,20.5; MAP -3,21;DAP 16,21; MAP -3,21.4; TEXT 'Blood Pressure';"
"RTN","GMVBP2",23,0)
 W !,"MAP -3,21.5; DAP 16,21.5; MAP 16,22; DAP -3,22; MAP -3,22.5; DAP 16,22.5; MAP -3,22.9; TEXT 'MAP';"
"RTN","GMVBP2",24,0)
VERT W !,"SPD 0.03;" S I(1)="" F I=1:1:9 S I(1)=I(1)_"MAP "_(1.6*I)_",0; DAP "_(1.6*I)_",23;"
"RTN","GMVBP2",25,0)
 W !,I(1)
"RTN","GMVBP2",26,0)
 W !,"FONT 57; MAP -3,23.4; TEXT 'S: Systolic B/P     D: Diastolic B/P     MAP: Mean Arterial Pressure     * - Abnormal value     ** - Abnormal value off of graph';"
"RTN","GMVBP2",27,0)
FORM W !,"MAP 12,25; FONT 56; TEXT 'MEDICAL RECORD'; MAP 12,25.4; TEXT 'B/P PLOTTING CHART'; MAP 12,25.8; TEXT 'VA STANDARD FORM 512-A';"
"RTN","GMVBP2",28,0)
 W !,"ENDM;"
"RTN","GMVBP2",29,0)
DATE W !,"MCRO DATE; FONT 56;" S J=0.4 D WRTEXT
"RTN","GMVBP2",30,0)
 W !,"ENDM;"
"RTN","GMVBP2",31,0)
TIME W !,"MCRO TIME;" S J=0.8 D WRTEXT
"RTN","GMVBP2",32,0)
 W !,"ENDM;"
"RTN","GMVBP2",33,0)
 Q
"RTN","GMVBP2",34,0)
WRTEXT ;
"RTN","GMVBP2",35,0)
 S I(1)="" F I=1:1:5 S I(1)=I(1)_$S(I(1)="":"",1:" ")_"MAP "_(1.6*(I-1))_","_J_"; TEXT %"_I_";"
"RTN","GMVBP2",36,0)
 W !,I(1)
"RTN","GMVBP2",37,0)
 S I(1)="" F I=6:1:10 S I(1)=I(1)_$S(I(1)="":"",1:" ")_"MAP "_(1.6*(I-1))_","_J_"; TEXT %"_I_";"
"RTN","GMVBP2",38,0)
 W !,I(1) Q
"RTN","GMVBP3")
0^195^B5419738
"RTN","GMVBP3",1,0)
GMVBP3 ;HIOFO/YH,FT-DEFINE KYOCERA B/P GRAPH MACRO (CONT.) ;11/6/01  14:35
"RTN","GMVBP3",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVBP3",3,0)
 ;
"RTN","GMVBP3",4,0)
 ;This routine uses the following IAs:
"RTN","GMVBP3",5,0)
 ; <None>
"RTN","GMVBP3",6,0)
 ;
"RTN","GMVBP3",7,0)
EN2 ;CONTINUED FROM GMVBP2
"RTN","GMVBP3",8,0)
PULSEG W !,"MCRO PLSG; FONT 57; MAP %1, %2; DAP 2.2, %3; DAP 3.8, %4; DAP 5.4, %5; DAP 7, %6; DAP 8.6, %7; DAP 10.2, %8; DAP 11.8, %9;"
"RTN","GMVBP3",9,0)
 W !,"DAP 13.4, %10; DAP 15, %11;"
"RTN","GMVBP3",10,0)
 W !,"ENDM;"
"RTN","GMVBP3",11,0)
PULSE W !,"MCRO PULS;" S J=20.4 D WRTEXT^GMVBP2
"RTN","GMVBP3",12,0)
 W !,"ENDM;"
"RTN","GMVBP3",13,0)
 W !,"MCRO PQU;" S J=20.9 D WRTEXT^GMVBP2
"RTN","GMVBP3",14,0)
 W !,"ENDM;"
"RTN","GMVBP3",15,0)
BP W !,"MCRO BP;" S J=21.4 D WRTEXT^GMVBP2
"RTN","GMVBP3",16,0)
 W !,"ENDM;"
"RTN","GMVBP3",17,0)
BP3 W !,"MCRO BP3;" S J=21.9 D WRTEXT^GMVBP2
"RTN","GMVBP3",18,0)
 W !,"ENDM;"
"RTN","GMVBP3",19,0)
BPQUA W !,"MCRO BPQUA;" S J=22.4 D WRTEXT^GMVBP2
"RTN","GMVBP3",20,0)
 W !,"ENDM;"
"RTN","GMVBP3",21,0)
MAP W !,"MCRO MEAN;" S J=22.9 D WRTEXT^GMVBP2
"RTN","GMVBP3",22,0)
 W !,"ENDM;"
"RTN","GMVBP3",23,0)
PID W !,"MCRO PID; MAP -1,24.6; FONT 56; TEXT %1; MAP -1,24.9; TEXT %2; MAP 3.5,24.9; TEXT %3; MAP -1,25.2; TEXT %4; MAP 7,25.5; TEXT %5; MAP 7,25.2; TEXT %6; MAP -1,25.5; TEXT %7; MAP -1,25.8; TEXT %8;"
"RTN","GMVBP3",24,0)
 W !,"ENDM;"
"RTN","GMVBP3",25,0)
PLS1 W !,"MCRO PLS1; MAP %1,%2; TEXT %3; MAP 2.2,%4; TEXT %5; MAP 3.8,%6; TEXT %7; MAP 5.4,%8; TEXT %9; MAP 7,%10; TEXT %11; MAP 8.6,%12; TEXT %13; MAP 10.2,%14; TEXT %15; MAP 11.8,%16; TEXT %17; MAP 13.4,%18; TEXT %19;"
"RTN","GMVBP3",26,0)
 W !,"ENDM;"
"RTN","GMVBP3",27,0)
PLS2 W !,"MCRO PLS2; MAP 15,%1; TEXT %2;"
"RTN","GMVBP3",28,0)
 W !,"ENDM;"
"RTN","GMVBP3",29,0)
QUAL W !,"MCRO QUA; FONT 57; MAP -3,23.7; TEXT %1; ENDM;" W !,"MCRO QU2; MAP -3,24; TEXT %1; ENDM;" W !,"MCRO QU3; MAP -3,24.3; TEXT %1; ENDM;"
"RTN","GMVBP3",30,0)
 Q
"RTN","GMVBP4")
0^196^B8957236
"RTN","GMVBP4",1,0)
GMVBP4 ;HIOFO/YH,FT-CALL KYOCERA B/P GRAPH MACRO ;11/6/01  14:36
"RTN","GMVBP4",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVBP4",3,0)
 ;
"RTN","GMVBP4",4,0)
 ; This routine uses the following IAs:
"RTN","GMVBP4",5,0)
 ; <None>
"RTN","GMVBP4",6,0)
 ;
"RTN","GMVBP4",7,0)
EN3 ;CONTINUATION OF GMVBP3
"RTN","GMVBP4",8,0)
CALL W !,"CALL BOX;"
"RTN","GMVBP4",9,0)
 W !,"CALL DATE" S J(1)=1,J(2)=J(1)+9 D WRTCALL
"RTN","GMVBP4",10,0)
 W !,"CALL TIME" S J(1)=17,J(2)=J(1)+9 D WRTCALL
"RTN","GMVBP4",11,0)
SYSG ;SYSTOLIC BP GRAPH
"RTN","GMVBP4",12,0)
 W !,"CALL PLSG, "_^TMP($J,"GMRK","G226M")_", "_^("G226")_", "_^("G227")_", "_^("G228")_", "_^("G229")_", "_^("G230")_", "_^("G231")_", "_^("G232")_", "
"RTN","GMVBP4",13,0)
 W ^TMP($J,"GMRK","G233")_", "_^("G234")_", "_^("G235")_";"
"RTN","GMVBP4",14,0)
 W !,"CALL PLS1, "_^TMP($J,"GMRK","G226M")_", "_^("G226")_", '"_^("G1201")_"', "_^("G227")_", '"_^("G1202")_"', "_^("G228")_", '"_^("G1203")_"', "_^("G229")_", '"_^("G1204")_"', "
"RTN","GMVBP4",15,0)
 W ^TMP($J,"GMRK","G230")_", '"_^("G1205")_"', "_^("G231")_", '"_^("G1206")_"', "_^("G232")_", '"_^("G1207")_"', "_^("G233")_", '"_^("G1208")_"', "_^("G234")_", '"_^("G1209")_"';"
"RTN","GMVBP4",16,0)
 W !,"CALL PLS2, "_^TMP($J,"GMRK","G235")_", '"_^("G1210")_"';"
"RTN","GMVBP4",17,0)
 ;DIASTOLIC B/P GRAPH
"RTN","GMVBP4",18,0)
 W !,"CALL PLSG, "_^TMP($J,"GMRK","G210M")_", "_^("G210")_", "_^("G211")_", "_^("G212")_", "_^("G213")_", "_^("G214")_", "_^("G215")_", "_^("G216")_", "
"RTN","GMVBP4",19,0)
 W ^TMP($J,"GMRK","G217")_", "_^("G218")_", "_^("G219")_";"
"RTN","GMVBP4",20,0)
 W !,"CALL PLS1, "_^TMP($J,"GMRK","G210M")_", "_^("G210")_", '"_^("G1101")_"', "_^("G211")_", '"_^("G1102")_"', "_^("G212")_", '"_^("G1103")_"', "_^("G213")_", '"_^("G1104")_"', "_^("G214")_", '"_^("G1105")
"RTN","GMVBP4",21,0)
 W "', "_^TMP($J,"GMRK","G215")_", '"_^("G1106")_"', "_^("G216")_", '"_^("G1107")_"', "_^("G217")_", '"_^("G1108")_"', "_^("G218")_", '"_^("G1109")_"';"
"RTN","GMVBP4",22,0)
 W !,"CALL PLS2, "_^TMP($J,"GMRK","G219")_", '"_^("G1110")_"';"
"RTN","GMVBP4",23,0)
PULSE W !,"CALL PULS" S J(1)=98,J(2)=J(1)+9 D WRTCALL
"RTN","GMVBP4",24,0)
 W !,"CALL PQU" S J(1)=1121,J(2)=J(1)+9 D WRTCALL
"RTN","GMVBP4",25,0)
 W !,"CALL BP" S J(1)=130,J(2)=J(1)+9 D WRTCALL
"RTN","GMVBP4",26,0)
 W !,"CALL BP3" S J(1)=1241,J(2)=J(1)+9 D WRTCALL
"RTN","GMVBP4",27,0)
 W !,"CALL BPQUA" S J(1)=451,J(2)=J(1)+9 D WRTCALL
"RTN","GMVBP4",28,0)
 W !,"CALL MEAN" S J(1)=1221,J(2)=J(1)+9 D WRTCALL
"RTN","GMVBP4",29,0)
 W !,"CALL QUA, '"_$G(GLINE(1))_"';"
"RTN","GMVBP4",30,0)
 W !,"CALL QU2, '"_$G(GLINE(2))_"';"
"RTN","GMVBP4",31,0)
 W !,"CALL QU3, '"_$G(GLINE(3))_"';"
"RTN","GMVBP4",32,0)
 W !,"CALL PID, """_^TMP($J,"GMRK","G194")_""", '"_^("G196")_"', '"_^("G197")_"', '"_^("G198")_"', '"_^("G199")_"', '"_^("G200")_"', '"_GMRDIV_"', '"_GSTRFIN_"';"
"RTN","GMVBP4",33,0)
 W !,"RES; EXIT;"
"RTN","GMVBP4",34,0)
 Q
"RTN","GMVBP4",35,0)
WRTCALL ;
"RTN","GMVBP4",36,0)
 S I(1)="" F I=J(1):1:J(2) S I(1)=I(1)_", '"_^TMP($J,"GMRK","G"_I)_"'"
"RTN","GMVBP4",37,0)
 W I(1)_";"
"RTN","GMVBP4",38,0)
 Q
"RTN","GMVBP5")
0^197^B10654489
"RTN","GMVBP5",1,0)
GMVBP5 ;HIOFO/YH,FT-CALCULATE KYOCERA B/P GRAPH DATA (CONT.) ;11/6/01  14:36
"RTN","GMVBP5",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVBP5",3,0)
 ;
"RTN","GMVBP5",4,0)
 ; This routine uses the following IAs:
"RTN","GMVBP5",5,0)
 ; <None>
"RTN","GMVBP5",6,0)
 ;
"RTN","GMVBP5",7,0)
SETA ;
"RTN","GMVBP5",8,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMVBP5",9,0)
 S (GMRSITE,GMRSITE(1),GMRSITE(2),GMRINF,GMRVJ)=""
"RTN","GMVBP5",10,0)
 I GK'="" D
"RTN","GMVBP5",11,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GI,GDT1,GK)),"^"),GMRVJ=$P($G(^(GK)),"^",2),GMRINF=$P($G(^(GK)),"^",4)
"RTN","GMVBP5",12,0)
 . I GMRSITE(1)'="" D SYNOARY^GMVLGQU
"RTN","GMVBP5",13,0)
 I GI="C" S ^TMP($J,"GMRK","G"_(1240+GCNTD))=GK_^TMP($J,"GMRK","G"_(1240+GCNTD)) Q
"RTN","GMVBP5",14,0)
 I GK'="" S GK=GK_$S(GMRVJ=1:"*",1:" ")
"RTN","GMVBP5",15,0)
 I GI="B" S ^TMP($J,"GMRK","G"_(450+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE),^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=GK S:$L(GMRSITE," ")>3 ^TMP($J,"GMRK","G"_(1240+GCNTD))="  "_$P(GMRSITE," ") Q
"RTN","GMVBP5",16,0)
 I GI="P" D  Q
"RTN","GMVBP5",17,0)
 . S ^TMP($J,"GMRK","G"_(GJ+1*16+GCNTD+1))=GK_" "_$S($L(GMRSITE," ")>3:$P(GMRSITE," "),1:"")
"RTN","GMVBP5",18,0)
 . S ^TMP($J,"GMRK","G"_(1120+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)
"RTN","GMVBP5",19,0)
 I GI="M" S ^TMP($J,"GMRK","G"_(1220+GCNTD))=GK Q
"RTN","GMVBP5",20,0)
 I GI="S"!(GI="D") S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(GK>0:240-GK/10,1:""),^TMP($J,"GMRK","G"_(GJ+1*16+GCNTD+1))=GK
"RTN","GMVBP5",21,0)
 I GI="P",(GK>0!(GK="0")) S ^TMP($J,"GMRK","G"_(430+GCNTD))=$S(GK["*":"P*",1:"P")
"RTN","GMVBP5",22,0)
 I GI="S",GK>0 S ^TMP($J,"GMRK","G"_(1200+GCNTD))=$S(GK["*":"S*",1:"S")
"RTN","GMVBP5",23,0)
 I GI="D",GK>0 S ^TMP($J,"GMRK","G"_(1100+GCNTD))=$S(GK["*":"D*",1:"D")
"RTN","GMVBP5",24,0)
 I GK>0,GI="P" S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<1.4:1.4,^("G"_(GJ*16+GCNTD+1))>19.5:19.5,1:^("G"_(GJ*16+GCNTD+1))) S:^("G"_(GJ*16+GCNTD+1))<1.4!(^("G"_(GJ*16+GCNTD+1))>19.4) ^TMP($J,"GMRK","G"_(430+GCNTD))="P**"
"RTN","GMVBP5",25,0)
 I GK>0,GI="S" S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<1.4:1.4,^("G"_(GJ*16+GCNTD+1))>19.5:19.5,1:^("G"_(GJ*16+GCNTD+1))) S:^("G"_(GJ*16+GCNTD+1))<1.5!(^("G"_(GJ*16+GCNTD+1))>19.4) ^TMP($J,"GMRK","G"_(1200+GCNTD))="S**"
"RTN","GMVBP5",26,0)
 I GK>0,GI="D" S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<1.4:1.4,^("G"_(GJ*16+GCNTD+1))>19.5:19.5,1:^("G"_(GJ*16+GCNTD+1))) S:^("G"_(GJ*16+GCNTD+1))<1.5!(^("G"_(GJ*16+GCNTD+1))>19.4) ^TMP($J,"GMRK","G"_(1100+GCNTD))="D**"
"RTN","GMVBP5",27,0)
 Q
"RTN","GMVCAQU")
0^135^B15251597
"RTN","GMVCAQU",1,0)
GMVCAQU ;HOIFO/YH,FT-DISPLAY CATEGORY/QUALIFIER/SYNONYM TABLE FOR VITAL TYPE ;10/25/02  10:04
"RTN","GMVCAQU",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVCAQU",3,0)
 ;
"RTN","GMVCAQU",4,0)
 ; This routine uses the following IAs:
"RTN","GMVCAQU",5,0)
 ; #10103 - ^XLFDT calls           (supported)
"RTN","GMVCAQU",6,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVCAQU",7,0)
 ;
"RTN","GMVCAQU",8,0)
EN1(RESULTS,GMVDATA) ; GMV QUALIFIER TABLE [RPC entry point]
"RTN","GMVCAQU",9,0)
 ; Display Vitals Category/Qualifier/Synonym Table
"RTN","GMVCAQU",10,0)
 ; GMVDEV - device name (File 3.5)
"RTN","GMVCAQU",11,0)
 ; GMVIEN - device internal entry number
"RTN","GMVCAQU",12,0)
 ; GMVPDT - date/time to print report
"RTN","GMVCAQU",13,0)
 ;
"RTN","GMVCAQU",14,0)
 N GMVDEV,GMVIEN,GMVPDT
"RTN","GMVCAQU",15,0)
 S RESULTS=$NA(^TMP($J)) K @RESULTS
"RTN","GMVCAQU",16,0)
 S GMVDEV=$P(GMVDATA,U,5),GMVIEN=+$P(GMVDATA,U,6),GMVPDT=$P(GMVDATA,U,7)
"RTN","GMVCAQU",17,0)
 S ZTIO=GMVDEV ;device
"RTN","GMVCAQU",18,0)
 S ZTDTH=$S($G(GMVPDT)>0:GMVPDT,1:$$NOW^XLFDT()) ;date/time to print
"RTN","GMVCAQU",19,0)
 S ZTDESC="Vitals Category/Qualifier/Synonym Table"
"RTN","GMVCAQU",20,0)
 S ZTRTN="START^GMVCAQU"
"RTN","GMVCAQU",21,0)
 D ^%ZTLOAD
"RTN","GMVCAQU",22,0)
 I $G(ZTSK)>0 S @RESULTS@(0)="1^Report Queued. Task #:"_ZTSK
"RTN","GMVCAQU",23,0)
 E  S @RESULTS@(0)="-1^Unable to queue report."
"RTN","GMVCAQU",24,0)
 K ZTSK,ZTIO,ZTDTH,ZTSAVE,ZTDESC,ZTRTN
"RTN","GMVCAQU",25,0)
 Q
"RTN","GMVCAQU",26,0)
START ; Start the report
"RTN","GMVCAQU",27,0)
 U IO
"RTN","GMVCAQU",28,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","GMVCAQU",29,0)
 S (GMROUT,GMRPG)=0
"RTN","GMVCAQU",30,0)
 S GMVNOW=$$NOW^XLFDT() ;get current date/time
"RTN","GMVCAQU",31,0)
 S GMVNOW=$$FMTE^XLFDT(GMVNOW) ;format current date/time
"RTN","GMVCAQU",32,0)
 D HDR
"RTN","GMVCAQU",33,0)
 F GMRVIT(1)="BLOOD PRESSURE","PULSE","RESPIRATION","TEMPERATURE","WEIGHT","CIRCUMFERENCE/GIRTH","HEIGHT","PULSE OXIMETRY" Q:GMROUT  D
"RTN","GMVCAQU",34,0)
 .S GMRVIT=$O(^GMRD(120.51,"B",GMRVIT(1),0)) Q:GMRVIT'>0!GMROUT  D
"RTN","GMVCAQU",35,0)
 ..S GMRVITY=$P(^GMRD(120.51,GMRVIT,0),"^",2) Q:GMRVITY=""!GMROUT  S GLVL=8 D LISTQ^GMVQUAL Q:GMROUT  D OTHERQ D CLEAR
"RTN","GMVCAQU",36,0)
 ..Q
"RTN","GMVCAQU",37,0)
 .Q
"RTN","GMVCAQU",38,0)
Q1 ; Kill variables and quit
"RTN","GMVCAQU",39,0)
 K GMRVIT,GMRVITY,GLVL,GMROUT,GMRPG,GSYNO,I,J,POP
"RTN","GMVCAQU",40,0)
 D CLEAR
"RTN","GMVCAQU",41,0)
 D ^%ZISC
"RTN","GMVCAQU",42,0)
 Q
"RTN","GMVCAQU",43,0)
HDR ; Header
"RTN","GMVCAQU",44,0)
 W:$Y>0 @IOF
"RTN","GMVCAQU",45,0)
 S GMRPG=GMRPG+1
"RTN","GMVCAQU",46,0)
 W !,"Vitals/Measurements Category/Qualifier/Synonym Table",?65,"Page ",GMRPG
"RTN","GMVCAQU",47,0)
 W !,"Run Date: ",GMVNOW
"RTN","GMVCAQU",48,0)
 W !,$$RJ^XLFSTR(" ",75,"-")
"RTN","GMVCAQU",49,0)
 W:GMRPG>1 !,GLABEL,!,GLABEL(1)
"RTN","GMVCAQU",50,0)
 Q
"RTN","GMVCAQU",51,0)
CLEAR ; Clean up variables
"RTN","GMVCAQU",52,0)
 K GCHART,GCHART1,GQUAL,GMRVDFLT,GORDER,GLABEL,GFLAG,GMAX,GMIN,GMRLAST,GMRINF,GCAT,GCHA,GCOL,GDA,GENTR,GTXT,GBLNK,GCOUNT,GLN,GMRENTR,GMRVODR,GSIDE,GTYPE,GDASH
"RTN","GMVCAQU",53,0)
 Q
"RTN","GMVCAQU",54,0)
OTHERQ ;
"RTN","GMVCAQU",55,0)
 Q:'$D(GCHART)&('$D(GCHART1))
"RTN","GMVCAQU",56,0)
 S GCOL=1,GFLAG=0,$P(GLABEL," ",80)="",$P(GBLNK," ",80)="",$P(GLABEL(1)," ",80)="",$P(GDASH,"-",20)=""
"RTN","GMVCAQU",57,0)
 S (GMAX,GMAX(1))=0
"RTN","GMVCAQU",58,0)
 F  S GMAX(1)=$O(GCOUNT(GMAX(1))) Q:GMAX(1)'>0  S GMAX(2)="" F  S GMAX(2)=$O(GCOUNT(GMAX(1),GMAX(2))) Q:GMAX(2)=""  I GCOUNT(GMAX(1),GMAX(2))>GMAX S GMAX=GCOUNT(GMAX(1),GMAX(2))
"RTN","GMVCAQU",59,0)
 Q:+$G(GMAX)=0
"RTN","GMVCAQU",60,0)
 F I=1:1:GMAX S $P(GTXT(I)," ",80)=""
"RTN","GMVCAQU",61,0)
 S GMRVODR=0
"RTN","GMVCAQU",62,0)
 F  S GMRVODR=$O(GCOUNT(GMRVODR)) Q:GMRVODR'>0  S GCAT=$O(GCOUNT(GMRVODR,"")) Q:GCAT=""  D
"RTN","GMVCAQU",63,0)
 . S GCOL=$S(GMRVODR=1:1,GMRVODR=2:18,GMRVODR=3:39,GMRVODR=4:58,1:70)
"RTN","GMVCAQU",64,0)
 . I GMRVODR=2,GMRVIT(1)="PULSE" S GCOL=28
"RTN","GMVCAQU",65,0)
 . I GMRVODR=2,GMRVIT(1)="RESPIRATION" S GCOL=32
"RTN","GMVCAQU",66,0)
 . S GLABEL=$S(GMRVODR=1:$E(GCAT_GBLNK,1,80),1:$E($E(GLABEL,1,GCOL)_GCAT_GBLNK,1,80))
"RTN","GMVCAQU",67,0)
 . S GCAT(1)=$E(GDASH,1,$L(GCAT))
"RTN","GMVCAQU",68,0)
 . S GLABEL(1)=$S(GMRVODR=1:$E(GCAT(1)_GBLNK,1,80),1:$E($E(GLABEL(1),1,GCOL)_GCAT(1)_GBLNK,1,80))
"RTN","GMVCAQU",69,0)
 . S I=0,GCHA="" F  S GCHA=$O(GQUAL(GMRVODR,GCHA)) Q:GCHA=""  D
"RTN","GMVCAQU",70,0)
 . . S GSYNO(1)=$O(^GMRD(120.52,"B",GCHA,0)) Q:GSYNO(1)'>0  S GSYNO=$P($G(^GMRD(120.52,GSYNO(1),0)),"^",2)
"RTN","GMVCAQU",71,0)
 . . S I=I+1,GTXT(I)=$S(GMRVODR=1:$E(GCHA_": "_GSYNO_GBLNK,1,80),1:$E($E(GTXT(I),1,GCOL)_GCHA_": "_GSYNO_GBLNK,1,80))
"RTN","GMVCAQU",72,0)
 . . Q
"RTN","GMVCAQU",73,0)
 . Q
"RTN","GMVCAQU",74,0)
 W !!,"Qualifiers for "_GMRVIT(1)_": ",!!,GLABEL,!,GLABEL(1)
"RTN","GMVCAQU",75,0)
 F I=1:1:GMAX D:IOSL<($Y+6) HDR Q:GMROUT  W !,GTXT(I)
"RTN","GMVCAQU",76,0)
 Q
"RTN","GMVCHAR")
0^198^B3526901
"RTN","GMVCHAR",1,0)
GMVCHAR ;HIOFO/YH,FT-EXTRACT CHARACTERISTIC DATA ;11/8/01  14:33
"RTN","GMVCHAR",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVCHAR",3,0)
 ;
"RTN","GMVCHAR",4,0)
 ; This routine uses the following IAs:
"RTN","GMVCHAR",5,0)
 ; <None>
"RTN","GMVCHAR",6,0)
 ;
"RTN","GMVCHAR",7,0)
CHAR(GDA,GARRY,X) ;
"RTN","GMVCHAR",8,0)
 ; Input data:
"RTN","GMVCHAR",9,0)
 ; GDA - Pointer to patient vitals/measurements file #120.5
"RTN","GMVCHAR",10,0)
 ; X - Pointer to the vital type file #120.51
"RTN","GMVCHAR",11,0)
 ; Output data array:
"RTN","GMVCHAR",12,0)
 ; GARRY(GDA,print order,qualifier data)
"RTN","GMVCHAR",13,0)
 N GMRVORDR,GMRVDA,GMRVCAT,GMRVCHAR
"RTN","GMVCHAR",14,0)
 S GMRVDA(1)=0 F  S GMRVDA(1)=$O(^GMR(120.5,GDA,5,"B",GMRVDA(1))) Q:GMRVDA(1)'>0  D
"RTN","GMVCHAR",15,0)
 .  Q:'$D(^GMRD(120.52,GMRVDA(1),0))  S GMRVCHAR=$P($G(^GMRD(120.52,GMRVDA(1),0)),"^")
"RTN","GMVCHAR",16,0)
 .  S GMRVDA(2)=$O(^GMRD(120.52,GMRVDA(1),1,"B",X,0)) I GMRVDA(2)'>0 S GARRY(GDA,1,GMRVCHAR)="" Q
"RTN","GMVCHAR",17,0)
 .  S GMRVCAT=+$P($G(^GMRD(120.52,GMRVDA(1),1,GMRVDA(2),0)),"^",2)
"RTN","GMVCHAR",18,0)
 . S GMRVCAT(1)=$O(^GMRD(120.53,"C",X,GMRVCAT,0)) Q:GMRVCAT(1)'>0
"RTN","GMVCHAR",19,0)
 . Q:'$D(^GMRD(120.53,GMRVCAT,1,GMRVCAT(1)))
"RTN","GMVCHAR",20,0)
 . S GMRVORDR=+$P($G(^GMRD(120.53,GMRVCAT,1,GMRVCAT(1),0)),"^",5) I GMRVORDR=0 S GMRVORDR=1
"RTN","GMVCHAR",21,0)
 .  S GARRY(GDA,GMRVORDR,GMRVCHAR)=""
"RTN","GMVCHAR",22,0)
 .  Q
"RTN","GMVCHAR",23,0)
 Q
"RTN","GMVCHAR",24,0)
WRITECH(GDA,GARRY,GN) ;
"RTN","GMVCHAR",25,0)
 ; Input data:
"RTN","GMVCHAR",26,0)
 ; GDA - Pointer to the patient vitals/measurements data file #120.5
"RTN","GMVCHAR",27,0)
 ; GARRY - qualifier data array for a measurement
"RTN","GMVCHAR",28,0)
 ;         GARRY(GDA,Print order,qualifier data)
"RTN","GMVCHAR",29,0)
 ; GN - Number of print order to print
"RTN","GMVCHAR",30,0)
 N GMRVDA,GDATA
"RTN","GMVCHAR",31,0)
 S GDATA="",GMRVDA(1)=0 F  S GMRVDA(1)=$O(GARRY(GDA,GMRVDA(1))) Q:GMRVDA(1)'>0!(GMRVDA(1)>GN)  S GMRVDA(2)="" F  S GMRVDA(2)=$O(GARRY(GDA,GMRVDA(1),GMRVDA(2))) Q:GMRVDA(2)=""  D
"RTN","GMVCHAR",32,0)
 . S GDATA=GDATA_$S(GDATA'="":", ",1:"")_GMRVDA(2)
"RTN","GMVCHAR",33,0)
 Q GDATA
"RTN","GMVCLIN")
0^136^B8492448
"RTN","GMVCLIN",1,0)
GMVCLIN ;HOIFO/YH,FT-FUNCTION WHICH RETURNS A LIST OF PATIENTS WITH CLINICAL APPOINTMENT WITHIN A GIVEN PERIOD ;7/23/02  09:12
"RTN","GMVCLIN",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVCLIN",3,0)
 ;
"RTN","GMVCLIN",4,0)
 ; This routine uses the following IAs:
"RTN","GMVCLIN",5,0)
 ;   #908 - ^SC( references        (controlled)
"RTN","GMVCLIN",6,0)
 ;  #1846 - ^SC( references        (controlled)
"RTN","GMVCLIN",7,0)
 ; #10035 - FILE 2 references      (supported)
"RTN","GMVCLIN",8,0)
 ; #10060 - FILE 200 references    (supported)
"RTN","GMVCLIN",9,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVCLIN",10,0)
 ; #10103 - ^XLFDT calls           (supported)
"RTN","GMVCLIN",11,0)
 ;
"RTN","GMVCLIN",12,0)
CLINPTS(RESULT,CLIN,BDATE) ;GMV CLINIC PT [RPC entry point]
"RTN","GMVCLIN",13,0)
 ;CLIN - SELECTED CLINIC
"RTN","GMVCLIN",14,0)
 ;BDATE - TODAY, TOMORROW, YESTERDAY, PAST WEEK, OR PAST MONTH
"RTN","GMVCLIN",15,0)
 ;RETURN LIST OF PATIENTS WITH CLINIC APPOINTMENTS WITHIN GIVEN PERIOD
"RTN","GMVCLIN",16,0)
 N GMVOUT K RESULT I '$D(^SC("B",CLIN)) S RESULT(1)="ERROR^No clinic identified" G QCLIN
"RTN","GMVCLIN",17,0)
 N GMVCLIN S GMVCLIN=$O(^SC("B",CLIN,0)) I GMVCLIN'>0 S RESULT(1)="ERROR^No clinic identified" G QCLIN
"RTN","GMVCLIN",18,0)
 I $$ACTLOC^GMVUTL1(CLIN)'=1 S RESULT(1)="ERROR^Clinic is inactive or Occasion Of Service" Q
"RTN","GMVCLIN",19,0)
 N GMVPAT,DFN,NAME,GMVI,J,X,GMVJ,GMVSRV,GMVNOW,CHKX,CHKIN,MAXAPPTS
"RTN","GMVCLIN",20,0)
 S MAXAPPTS=200
"RTN","GMVCLIN",21,0)
 N GMVNOW,EDATE S GMVNOW=$$NOW^XLFDT,EDATE=$P(GMVNOW,".")_".24"
"RTN","GMVCLIN",22,0)
 S GMVSRV=+$$GET1^DIQ(200,DUZ,29,"I")
"RTN","GMVCLIN",23,0)
 S DFN=0,GMVI=1
"RTN","GMVCLIN",24,0)
 S BDATE=$$UP^XLFSTR(BDATE)
"RTN","GMVCLIN",25,0)
 S BDATE=$S(BDATE="TODAY":"T",BDATE="TOMORROW":"T+1",BDATE="YESTERDAY":"T-1",BDATE="PAST WEEK":"T-7",BDATE="PAST MONTH":"T-30",1:"")
"RTN","GMVCLIN",26,0)
 I BDATE="" S RESULT(1)="ERROR^Error in date range." G QCLIN
"RTN","GMVCLIN",27,0)
 ;CONVERT BDATE AND EDATE INTO FILEMAN DATE/TIME
"RTN","GMVCLIN",28,0)
 D DT^DILF("T",BDATE,.BDATE,"","")
"RTN","GMVCLIN",29,0)
 I BDATE>EDATE S EDATE=BDATE_".24"
"RTN","GMVCLIN",30,0)
 ;access to SC global granted under DBIA #518:
"RTN","GMVCLIN",31,0)
 S GMVJ=BDATE F  S GMVJ=$O(^SC(+GMVCLIN,"S",GMVJ)) Q:GMVJ<1!(GMVJ>EDATE)  D
"RTN","GMVCLIN",32,0)
 . I $L($G(^SC(+GMVCLIN,"S",GMVJ,1,0))) D
"RTN","GMVCLIN",33,0)
 ..S J=0 F  S J=$O(^SC(+GMVCLIN,"S",GMVJ,1,J)) Q:+J<1!(GMVI>MAXAPPTS)  D
"RTN","GMVCLIN",34,0)
 ...;
"RTN","GMVCLIN",35,0)
 ...S DFN=+$G(^SC(+GMVCLIN,"S",GMVJ,1,J,0))
"RTN","GMVCLIN",36,0)
 ...Q:$$SDA(DFN,BDATE,EDATE,+GMVCLIN)=0
"RTN","GMVCLIN",37,0)
 ...;
"RTN","GMVCLIN",38,0)
 ...S GMVOUT($P(^DPT(DFN,0),"^"))=DFN_"^"_$P(^DPT(DFN,0),"^")_"^"_CLIN_"^"_$$FMTE^XLFDT(GMVJ),GMVI=GMVI+1
"RTN","GMVCLIN",39,0)
 I GMVI=0 S RESULT(1)="ERROR^No appointments." G QCLIN
"RTN","GMVCLIN",40,0)
 I GMVI>MAXAPPTS S RESULT(1)="ERROR^Too many appointments found. Please narrow search." G QCLIN
"RTN","GMVCLIN",41,0)
 I $D(GMVOUT) D
"RTN","GMVCLIN",42,0)
 . S GMVI=0,J=""
"RTN","GMVCLIN",43,0)
 . F  S J=$O(GMVOUT(J)) Q:J=""  D
"RTN","GMVCLIN",44,0)
 .. S GMVPAT=""
"RTN","GMVCLIN",45,0)
 .. D PTINFO^GMVUTL3(.GMVPAT,$P(GMVOUT(J),"^",1))
"RTN","GMVCLIN",46,0)
 .. S GMVI=GMVI+1,RESULT(GMVI)=GMVOUT(J)_"^"_GMVPAT
"RTN","GMVCLIN",47,0)
 .. Q
"RTN","GMVCLIN",48,0)
 . Q
"RTN","GMVCLIN",49,0)
QCLIN I '$D(RESULT(1)) S RESULT(1)="No patients found"
"RTN","GMVCLIN",50,0)
 Q
"RTN","GMVCLIN",51,0)
 ;
"RTN","GMVCLIN",52,0)
SDA(DFN,BDATE,EDATE,GMVCLIN) ; This function calls SDA^VADPT to determine
"RTN","GMVCLIN",53,0)
 ; if the patient has clinic appointments.
"RTN","GMVCLIN",54,0)
 ;     DFN - patient id
"RTN","GMVCLIN",55,0)
 ;   BDATE - start date of search
"RTN","GMVCLIN",56,0)
 ;   EDATE - end date of search
"RTN","GMVCLIN",57,0)
 ; GMVCLIN - Clinic ien (File 44)
"RTN","GMVCLIN",58,0)
 ; Returns:  0 - no appointments
"RTN","GMVCLIN",59,0)
 ;           1 - appointments
"RTN","GMVCLIN",60,0)
 N GMVADPT
"RTN","GMVCLIN",61,0)
 D KVAR^VADPT ;kill any VADPT variables
"RTN","GMVCLIN",62,0)
 S VASD("T")=EDATE ;"to" date
"RTN","GMVCLIN",63,0)
 S VASD("F")=BDATE ;"from" date
"RTN","GMVCLIN",64,0)
 S VASD("C",+GMVCLIN)="" ;ien of clinic
"RTN","GMVCLIN",65,0)
 ; Since VASD("W") is not defined, this call should return scheduled
"RTN","GMVCLIN",66,0)
 ; appointments for both in- and outpatients. Cancelled and no-show
"RTN","GMVCLIN",67,0)
 ; appointments will be ingnored.
"RTN","GMVCLIN",68,0)
 D SDA^VADPT
"RTN","GMVCLIN",69,0)
 ; If there is an error or no data in ^UTILITY, then no appointments.
"RTN","GMVCLIN",70,0)
 S GMVADPT=$S(VAERR=1:0,'$D(^UTILITY("VASD",$J)):0,1:1)
"RTN","GMVCLIN",71,0)
 D KVAR^VADPT
"RTN","GMVCLIN",72,0)
 Q GMVADPT
"RTN","GMVCLIN",73,0)
 Q
"RTN","GMVDCCHK")
0^174^B10141112
"RTN","GMVDCCHK",1,0)
GMVDCCHK ;HOIFO/DAD,FT-VITALS COMPONENT: CHECK DATA VALUE ;9/29/00  09:15
"RTN","GMVDCCHK",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVDCCHK",3,0)
 ;
"RTN","GMVDCCHK",4,0)
 ; This routine uses the following IAs:
"RTN","GMVDCCHK",5,0)
 ; #10104 - ^XLFSTR calls            (supported)
"RTN","GMVDCCHK",6,0)
 ;
"RTN","GMVDCCHK",7,0)
VALID(GMVALUE,GMVMSYS,GMVTYPE) ;
"RTN","GMVDCCHK",8,0)
 ; *** Validate a vital measurement ***
"RTN","GMVDCCHK",9,0)
 ; Input:
"RTN","GMVDCCHK",10,0)
 ;  GMVALUE = The vital measurement to be validated
"RTN","GMVDCCHK",11,0)
 ;  GMVMSYS = The measurement system the measurement is expressed in
"RTN","GMVDCCHK",12,0)
 ;            (C - US Customary, M - Metric)
"RTN","GMVDCCHK",13,0)
 ;  GMVTYPE = A vital type abbreviation
"RTN","GMVDCCHK",14,0)
 ; Output:
"RTN","GMVDCCHK",15,0)
 ;  0 - Invalid, 1 - Valid
"RTN","GMVDCCHK",16,0)
 S GMVTYPE=$$UP^XLFSTR(GMVTYPE)
"RTN","GMVDCCHK",17,0)
 I $T(@GMVTYPE)]"" D
"RTN","GMVDCCHK",18,0)
 . N GMVCODE,GMVOK
"RTN","GMVDCCHK",19,0)
 . S GMVCODE="S GMVOK=$$"_GMVTYPE_"(GMVALUE)"
"RTN","GMVDCCHK",20,0)
 . X GMVCODE I 'GMVOK K GMVALUE
"RTN","GMVDCCHK",21,0)
 . Q
"RTN","GMVDCCHK",22,0)
 E  D
"RTN","GMVDCCHK",23,0)
 . K GMVALUE
"RTN","GMVDCCHK",24,0)
 . Q
"RTN","GMVDCCHK",25,0)
 Q ''$D(GMVALUE)
"RTN","GMVDCCHK",26,0)
 ;
"RTN","GMVDCCHK",27,0)
AG(X) ; ABDOMINAL GIRTH
"RTN","GMVDCCHK",28,0)
 S X=$$CNV^GMVDCCNV(X,GMVMSYS,"S",GMVTYPE)
"RTN","GMVDCCHK",29,0)
 K:X'=+X!(X>150)!(X<0)!(X?.E1".".N) X
"RTN","GMVDCCHK",30,0)
 Q ''$D(X)
"RTN","GMVDCCHK",31,0)
 ;
"RTN","GMVDCCHK",32,0)
AUD(X) ; AUDIOMETRY
"RTN","GMVDCCHK",33,0)
 N I,Y
"RTN","GMVDCCHK",34,0)
 K:X'?.N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/" X
"RTN","GMVDCCHK",35,0)
 I $D(X) F I=1:1:16 S Y=$P(Y,"/",I) I Y]"" I Y'=+Y!(Y>110)!(Y<0) K X Q
"RTN","GMVDCCHK",36,0)
 Q ''$D(X)
"RTN","GMVDCCHK",37,0)
 ;
"RTN","GMVDCCHK",38,0)
BP(X) ; BLOOD PRESSURE
"RTN","GMVDCCHK",39,0)
 N I,Y
"RTN","GMVDCCHK",40,0)
 K:(X'?1.3N1"/"1.3N1"/"1.3N)&(X'?1.3N1"/"1.3N)&(X'?1.3N) X
"RTN","GMVDCCHK",41,0)
 I $D(X) F I=1:1:$L(X,"/") S Y=$P(X,"/",I) I Y]"" I Y<0!(Y>300) K X Q
"RTN","GMVDCCHK",42,0)
 I $D(X),(X'?1.3N),$P(X,"/")'>$P(X,"/",$L(X,"/")) K X
"RTN","GMVDCCHK",43,0)
 Q ''$D(X)
"RTN","GMVDCCHK",44,0)
 ;
"RTN","GMVDCCHK",45,0)
CG(X) ; CIRCUMFERENCE/GIRTH
"RTN","GMVDCCHK",46,0)
 S X=$$CNV^GMVDCCNV(X,GMVMSYS,"S",GMVTYPE)
"RTN","GMVDCCHK",47,0)
 K:X'=+X!(X>200)!(X<0)!(X?.E1"."3.N) X
"RTN","GMVDCCHK",48,0)
 Q ''$D(X)
"RTN","GMVDCCHK",49,0)
 ;
"RTN","GMVDCCHK",50,0)
CVP(X) ; CENTRAL VENOUS PRESSURE
"RTN","GMVDCCHK",51,0)
 S X=$$CNV^GMVDCCNV(X,GMVMSYS,"S",GMVTYPE)
"RTN","GMVDCCHK",52,0)
 K:X<-13.6!(X>136)!(X?.E1"."2.N) X
"RTN","GMVDCCHK",53,0)
 Q ''$D(X)
"RTN","GMVDCCHK",54,0)
 ;
"RTN","GMVDCCHK",55,0)
FH(X) ; FUNDAL HEIGHT
"RTN","GMVDCCHK",56,0)
 S X=$$CNV^GMVDCCNV(X,GMVMSYS,"S",GMVTYPE)
"RTN","GMVDCCHK",57,0)
 K:X'=+X!(X>50)!(X<10)!(X?.E1".".N) X
"RTN","GMVDCCHK",58,0)
 Q ''$D(X)
"RTN","GMVDCCHK",59,0)
 ;
"RTN","GMVDCCHK",60,0)
FT(X) ; FETAL HEART TONES
"RTN","GMVDCCHK",61,0)
 K:X'=+X!(X>250)!(X<50)!(X?.E1".".N) X
"RTN","GMVDCCHK",62,0)
 Q ''$D(X)
"RTN","GMVDCCHK",63,0)
 ;
"RTN","GMVDCCHK",64,0)
HC(X) ; HEAD CIRCUMFERENCE
"RTN","GMVDCCHK",65,0)
 I GMVMSYS="M" D
"RTN","GMVDCCHK",66,0)
 . K:+X>76!(+X<26)!(X?.E1"."3.N) X
"RTN","GMVDCCHK",67,0)
 . Q
"RTN","GMVDCCHK",68,0)
 I GMVMSYS="C" D
"RTN","GMVDCCHK",69,0)
 . K:+X>30!(+X<10)!(X?.E1"."4.N) X
"RTN","GMVDCCHK",70,0)
 . I $D(X),X#1>0 K:"^.125^.25^.375^.5^.625^.75^.875^"'[(U_(X#1)_U) X
"RTN","GMVDCCHK",71,0)
 . Q
"RTN","GMVDCCHK",72,0)
 Q ''$D(X)
"RTN","GMVDCCHK",73,0)
 ;
"RTN","GMVDCCHK",74,0)
HE(X) ; HEARING
"RTN","GMVDCCHK",75,0)
 K:"^A^N^"'[(U_X_U) X
"RTN","GMVDCCHK",76,0)
 Q ''$D(X)
"RTN","GMVDCCHK",77,0)
 ;
"RTN","GMVDCCHK",78,0)
HT(X) ; HEIGHT
"RTN","GMVDCCHK",79,0)
 S X=$$CNV^GMVDCCNV(X,GMVMSYS,"S",GMVTYPE)
"RTN","GMVDCCHK",80,0)
 K:X'=+X!(X>100)!(X<1)!(X?.E1"."3.N) X
"RTN","GMVDCCHK",81,0)
 Q ''$D(X)
"RTN","GMVDCCHK",82,0)
 ;
"RTN","GMVDCCHK",83,0)
P(X) ; PULSE
"RTN","GMVDCCHK",84,0)
 K:+X'=X!(X>300)!(X<0)!(X?.E1".".N) X
"RTN","GMVDCCHK",85,0)
 Q ''$D(X)
"RTN","GMVDCCHK",86,0)
 ;
"RTN","GMVDCCHK",87,0)
PN(X) ; PAIN
"RTN","GMVDCCHK",88,0)
 K:"^0^1^2^3^4^5^6^7^8^9^10^99^"'[(U_X_U) X
"RTN","GMVDCCHK",89,0)
 Q ''$D(X)
"RTN","GMVDCCHK",90,0)
 ;
"RTN","GMVDCCHK",91,0)
PO2(X) ; PULSE OXIMETRY
"RTN","GMVDCCHK",92,0)
 K:X<0!(X>100)!(X?.E1".".N) X
"RTN","GMVDCCHK",93,0)
 Q ''$D(X)
"RTN","GMVDCCHK",94,0)
 ;
"RTN","GMVDCCHK",95,0)
R(X) ; RESPIRATION
"RTN","GMVDCCHK",96,0)
 K:X'=+X!(X>100)!(X<0)!(X?.E1".".N) X
"RTN","GMVDCCHK",97,0)
 Q ''$D(X)
"RTN","GMVDCCHK",98,0)
 ;
"RTN","GMVDCCHK",99,0)
T(X) ; TEMPERATURE
"RTN","GMVDCCHK",100,0)
 S X=$$CNV^GMVDCCNV(X,GMVMSYS,"S",GMVTYPE)
"RTN","GMVDCCHK",101,0)
 K:X'=+X!(X>120)!(X<45)!(X?.E1"."3.N) X
"RTN","GMVDCCHK",102,0)
 Q ''$D(X)
"RTN","GMVDCCHK",103,0)
 ;
"RTN","GMVDCCHK",104,0)
TON(X) ; TONOMETRY
"RTN","GMVDCCHK",105,0)
 N I,Y
"RTN","GMVDCCHK",106,0)
 K:(X'?1.2N1"/"1.2N)&(X'?1.2N1"/")&(X'?1"/"1.2N) X
"RTN","GMVDCCHK",107,0)
 I $D(X) F I=1,2 S Y=$P(X,"/",I) I Y]"" I Y'=+Y!(Y>80)!(Y<0) K X Q
"RTN","GMVDCCHK",108,0)
 Q ''$D(X)
"RTN","GMVDCCHK",109,0)
 ;
"RTN","GMVDCCHK",110,0)
VC(X) ; VISION CORRECTED
"RTN","GMVDCCHK",111,0)
 N I,Y
"RTN","GMVDCCHK",112,0)
 K:(X'?1.3N1"/"1.3N)&(X'?1.3N1"/")&(X'?1"/"1.3N) X
"RTN","GMVDCCHK",113,0)
 I $D(X) F I=1,2 S Y=$P(X,"/",I) I Y]"" I Y'=+Y!(Y>999)!(Y<10) K X Q
"RTN","GMVDCCHK",114,0)
 Q ''$D(X)
"RTN","GMVDCCHK",115,0)
 ;
"RTN","GMVDCCHK",116,0)
VU(X) ; VISION UNCORRECTED
"RTN","GMVDCCHK",117,0)
 Q $$VC(X)
"RTN","GMVDCCHK",118,0)
 ;
"RTN","GMVDCCHK",119,0)
WT(X) ; WEIGHT
"RTN","GMVDCCHK",120,0)
 S X=$$CNV^GMVDCCNV(X,GMVMSYS,"S",GMVTYPE)
"RTN","GMVDCCHK",121,0)
 K:X'=+X!(X>1500)!(X'>0)!(X?.E1"."3.N) X
"RTN","GMVDCCHK",122,0)
 Q ''$D(X)
"RTN","GMVDCCNV")
0^175^B5087093
"RTN","GMVDCCNV",1,0)
GMVDCCNV ;HOIFO/DAD,FT-VITALS COMPONENT: CONVERT UNITS ;9/29/00  09:15
"RTN","GMVDCCNV",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVDCCNV",3,0)
 ;
"RTN","GMVDCCNV",4,0)
 ; This routine uses the following IAs:
"RTN","GMVDCCNV",5,0)
 ; #10143 - XLFMSMT calls        (supported)
"RTN","GMVDCCNV",6,0)
 ;
"RTN","GMVDCCNV",7,0)
CNV(GMVALUE,GMVMSYS,GMVOPER,GMVTYPE) ;
"RTN","GMVDCCNV",8,0)
 ; Unit conversion
"RTN","GMVDCCNV",9,0)
 ; Input:
"RTN","GMVDCCNV",10,0)
 ;  GMVALUE = The value to be converted
"RTN","GMVDCCNV",11,0)
 ;  GMVMSYS = The desired Measurement system
"RTN","GMVDCCNV",12,0)
 ;  GMVOPER = The operation taking place (G - Get data, S - Save data)
"RTN","GMVDCCNV",13,0)
 ;  GMVTYPE = The Vital Type abbreviation
"RTN","GMVDCCNV",14,0)
 ; Output:
"RTN","GMVDCCNV",15,0)
 ;  The measurement expressed in the desired units
"RTN","GMVDCCNV",16,0)
 I $G(GMVALUE)]"",$G(GMVMSYS)]"",$G(GMVOPER)]"",$G(GMVTYPE)]"" D
"RTN","GMVDCCNV",17,0)
 . I "^T^"[(U_GMVTYPE_U) S GMVALUE=$$TMP(GMVALUE,GMVMSYS,GMVOPER)
"RTN","GMVDCCNV",18,0)
 . I "^WT^"[(U_GMVTYPE_U) S GMVALUE=$$WEI(GMVALUE,GMVMSYS,GMVOPER)
"RTN","GMVDCCNV",19,0)
 . I "^CVP^"[(U_GMVTYPE_U) S GMVALUE=$$CVP(GMVALUE,GMVMSYS,GMVOPER)
"RTN","GMVDCCNV",20,0)
 . I "^HT^AG^FH^HC^CG^"[(U_GMVTYPE_U) S GMVALUE=$$LEN(GMVALUE,GMVMSYS,GMVOPER)
"RTN","GMVDCCNV",21,0)
 . Q
"RTN","GMVDCCNV",22,0)
 Q $G(GMVALUE)
"RTN","GMVDCCNV",23,0)
 ;
"RTN","GMVDCCNV",24,0)
TMP(GMVALUE,GMVMSYS,GMVOPER) ;
"RTN","GMVDCCNV",25,0)
 ; Temperature conversion
"RTN","GMVDCCNV",26,0)
 ; Input:
"RTN","GMVDCCNV",27,0)
 ;  GMVALUE = The value to be converted
"RTN","GMVDCCNV",28,0)
 ;  GMVMSYS = The desired Measurement system
"RTN","GMVDCCNV",29,0)
 ;  GMVOPER = The operation taking place (G - Get data, S - Save data)
"RTN","GMVDCCNV",30,0)
 ; Output:
"RTN","GMVDCCNV",31,0)
 ;  The measurement expressed in the desired units
"RTN","GMVDCCNV",32,0)
 I GMVMSYS="M" D
"RTN","GMVDCCNV",33,0)
 . N GMVFR,GMVTO
"RTN","GMVDCCNV",34,0)
 . I GMVOPER="G" S GMVFR="F",GMVTO="C"
"RTN","GMVDCCNV",35,0)
 . I GMVOPER="S" S GMVFR="C",GMVTO="F"
"RTN","GMVDCCNV",36,0)
 . S GMVALUE=$P($$TEMP^XLFMSMT(GMVALUE,GMVFR,GMVTO)," ")
"RTN","GMVDCCNV",37,0)
 . Q
"RTN","GMVDCCNV",38,0)
 Q GMVALUE
"RTN","GMVDCCNV",39,0)
 ;
"RTN","GMVDCCNV",40,0)
LEN(GMVALUE,GMVMSYS,GMVOPER) ;
"RTN","GMVDCCNV",41,0)
 ; Length conversion
"RTN","GMVDCCNV",42,0)
 ; Input:
"RTN","GMVDCCNV",43,0)
 ;  GMVALUE = The value to be converted
"RTN","GMVDCCNV",44,0)
 ;  GMVMSYS = The desired Measurement system
"RTN","GMVDCCNV",45,0)
 ;  GMVOPER = The operation taking place (G - Get data, S - Save data)
"RTN","GMVDCCNV",46,0)
 ; Output:
"RTN","GMVDCCNV",47,0)
 ;  The measurement expressed in the desired units
"RTN","GMVDCCNV",48,0)
 I GMVMSYS="M" D
"RTN","GMVDCCNV",49,0)
 . N GMVFR,GMVTO
"RTN","GMVDCCNV",50,0)
 . I GMVOPER="G" S GMVFR="IN",GMVTO="CM"
"RTN","GMVDCCNV",51,0)
 . I GMVOPER="S" S GMVFR="CM",GMVTO="IN"
"RTN","GMVDCCNV",52,0)
 . S GMVALUE=$P($$LENGTH^XLFMSMT(GMVALUE,GMVFR,GMVTO)," ")
"RTN","GMVDCCNV",53,0)
 . Q
"RTN","GMVDCCNV",54,0)
 Q GMVALUE
"RTN","GMVDCCNV",55,0)
 ;
"RTN","GMVDCCNV",56,0)
WEI(GMVALUE,GMVMSYS,GMVOPER) ;
"RTN","GMVDCCNV",57,0)
 ; Weight conversion
"RTN","GMVDCCNV",58,0)
 ; Input:
"RTN","GMVDCCNV",59,0)
 ;  GMVALUE = The value to be converted
"RTN","GMVDCCNV",60,0)
 ;  GMVMSYS = The desired Measurement system
"RTN","GMVDCCNV",61,0)
 ;  GMVOPER = The operation taking place (G - Get data, S - Save data)
"RTN","GMVDCCNV",62,0)
 ; Output:
"RTN","GMVDCCNV",63,0)
 ;  The measurement expressed in the desired units
"RTN","GMVDCCNV",64,0)
 I GMVMSYS="M" D
"RTN","GMVDCCNV",65,0)
 . N GMVFR,GMVTO
"RTN","GMVDCCNV",66,0)
 . I GMVOPER="G" S GMVFR="LB",GMVTO="KG"
"RTN","GMVDCCNV",67,0)
 . I GMVOPER="S" S GMVFR="KG",GMVTO="LB"
"RTN","GMVDCCNV",68,0)
 . S GMVALUE=$P($$WEIGHT^XLFMSMT(GMVALUE,GMVFR,GMVTO)," ")
"RTN","GMVDCCNV",69,0)
 . Q
"RTN","GMVDCCNV",70,0)
 Q GMVALUE
"RTN","GMVDCCNV",71,0)
 ;
"RTN","GMVDCCNV",72,0)
CVP(GMVALUE,GMVMSYS,GMVOPER) ;
"RTN","GMVDCCNV",73,0)
 ; Central Venous Pressure conversion
"RTN","GMVDCCNV",74,0)
 ; Input:
"RTN","GMVDCCNV",75,0)
 ;  GMVALUE = The value to be converted
"RTN","GMVDCCNV",76,0)
 ;  GMVMSYS = The desired Measurement system
"RTN","GMVDCCNV",77,0)
 ;  GMVOPER = The operation taking place (G - Get data, S - Save data)
"RTN","GMVDCCNV",78,0)
 ; Output:
"RTN","GMVDCCNV",79,0)
 ;  The measurement expressed in the desired units
"RTN","GMVDCCNV",80,0)
 I GMVMSYS="M" D
"RTN","GMVDCCNV",81,0)
 . I GMVOPER="G" S GMVALUE=$J(GMVALUE/1.36,0,3)
"RTN","GMVDCCNV",82,0)
 . I GMVOPER="S" S GMVALUE=$J(GMVALUE*1.36,0,3)
"RTN","GMVDCCNV",83,0)
 . Q
"RTN","GMVDCCNV",84,0)
 Q GMVALUE
"RTN","GMVDCEXT")
0^176^B43745459
"RTN","GMVDCEXT",1,0)
GMVDCEXT ;HOIFO/DAD,FT-VITALS COMPONENT: EXTRACT PATIENT DATA ;9/29/00  09:16
"RTN","GMVDCEXT",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVDCEXT",3,0)
 ;
"RTN","GMVDCEXT",4,0)
 ; This routine uses the following IAs:
"RTN","GMVDCEXT",5,0)
 ; #10035 - FILE 2 references        (supported)
"RTN","GMVDCEXT",6,0)
 ; #10104 - ^XLFSTR calls            (supported)
"RTN","GMVDCEXT",7,0)
 ;
"RTN","GMVDCEXT",8,0)
EN1(RESULT,GMVDFN,GMVFMT,GMVABR,GMVALL,GMVBEG,GMVEND,GMVMSYS,GMVEER) ;
"RTN","GMVDCEXT",9,0)
 ; Return patient vitals
"RTN","GMVDCEXT",10,0)
 ;
"RTN","GMVDCEXT",11,0)
 ; Input:
"RTN","GMVDCEXT",12,0)
 ;  RESULT  = Where data is returned (closed array reference) (Required)
"RTN","GMVDCEXT",13,0)
 ;  GMVDFN  = A pointer to the Patient file (#2) (Required)
"RTN","GMVDCEXT",14,0)
 ;  GMVFMT  = Format of returned data (Optional)
"RTN","GMVDCEXT",15,0)
 ;            1 - IENs (default), 2 - Abbreviations, 3 - Full Names
"RTN","GMVDCEXT",16,0)
 ;  GMVABR  = Abbreviations of vital types to return (Optional)
"RTN","GMVDCEXT",17,0)
 ;            "^T^P^R^PO2^BP^HT^WT^CVP^CG^PN^"  (Default GMVALL = 0)
"RTN","GMVDCEXT",18,0)
 ;            "~ALL~" to return all vital types (Default GMVALL = 1)
"RTN","GMVDCEXT",19,0)
 ;  GMVALL  = Controls what data is returned (Optional)
"RTN","GMVDCEXT",20,0)
 ;            0 - Most recent (default), 1 - All in date range
"RTN","GMVDCEXT",21,0)
 ;  GMVBEG  = Beginning date for all vitals (Not used for GMVALL = 0)
"RTN","GMVDCEXT",22,0)
 ;  GMVEND  = Ending    date for all vitals (Not used for GMVALL = 0)
"RTN","GMVDCEXT",23,0)
 ;  GMVMSYS = Measurement system (Optional)
"RTN","GMVDCEXT",24,0)
 ;            M = Metric, C - US Customary (Default)
"RTN","GMVDCEXT",25,0)
 ;  GMVEER  = Include entered in error records (Optional)
"RTN","GMVDCEXT",26,0)
 ;            (0 - No (Default), 1 - Yes)
"RTN","GMVDCEXT",27,0)
 ;
"RTN","GMVDCEXT",28,0)
 ; Output:
"RTN","GMVDCEXT",29,0)
 ;  RESULT() = VitalMeasurementIEN ^ DateTimeTaken ^ PatientDFN ^
"RTN","GMVDCEXT",30,0)
 ;             VitalType ^ DateTimeEntered ^ HospitalLocation ^
"RTN","GMVDCEXT",31,0)
 ;             EnteredBy ^ Measurement ^ EnteredInError ^
"RTN","GMVDCEXT",32,0)
 ;             EnteredInErrorBy ^
"RTN","GMVDCEXT",33,0)
 ;             Qualifier1 ; Qualifier2 ; ... ^
"RTN","GMVDCEXT",34,0)
 ;             EnteredInErrorReason1 ; EnteredInErrorReason2 ; ... ^
"RTN","GMVDCEXT",35,0)
 ;
"RTN","GMVDCEXT",36,0)
 N GMV,GMVABBR,GMVALUE,GMVCAT,GMVCD0,GMVCD1,GMVD0,GMVD1,GMVDATA
"RTN","GMVDCEXT",37,0)
 N GMVDATA2,GMVER,GMVFOUND,GMVIDATE,GMVOK,GMVPOR,GMVPULSE,GMVQD0
"RTN","GMVDCEXT",38,0)
 N GMVQD1,GMVQUA,GMVQL
"RTN","GMVDCEXT",39,0)
 N GMVRATE
"RTN","GMVDCEXT",40,0)
 K @RESULT
"RTN","GMVDCEXT",41,0)
 S @RESULT@(0)="OK"
"RTN","GMVDCEXT",42,0)
 S GMVALL=$S("^0^1^"[(U_$G(GMVALL)_U):GMVALL,1:0)
"RTN","GMVDCEXT",43,0)
 S GMVFMT=$S("^1^2^3^"[(U_$G(GMVFMT)_U):GMVFMT,1:1)
"RTN","GMVDCEXT",44,0)
 S GMVEER=$S(GMVALL=0:0,"^0^1^"[(U_$G(GMVEER)_U):GMVEER,1:0)
"RTN","GMVDCEXT",45,0)
 I $$FIND1^DIC(2,"","","`"_GMVDFN)'=GMVDFN D
"RTN","GMVDCEXT",46,0)
 . S @RESULT@(0)="ERROR"
"RTN","GMVDCEXT",47,0)
 . S @RESULT@(1)="ERROR: Missing or invalid Patient parameter"
"RTN","GMVDCEXT",48,0)
 . Q
"RTN","GMVDCEXT",49,0)
 S GMVMSYS=$$MEASYS^GMVDCUTL($G(GMVMSYS))
"RTN","GMVDCEXT",50,0)
 K GMVRET
"RTN","GMVDCEXT",51,0)
 D DT^DILF("ST",$G(GMVEND),.GMVRET,"-NOW")
"RTN","GMVDCEXT",52,0)
 S GMVEND=$G(GMVRET)
"RTN","GMVDCEXT",53,0)
 K GMVRET
"RTN","GMVDCEXT",54,0)
 D DT^DILF("ST",$G(GMVBEG),.GMVRET,-GMVEND)
"RTN","GMVDCEXT",55,0)
 S GMVBEG=$G(GMVRET)
"RTN","GMVDCEXT",56,0)
 I GMVALL&((GMVBEG'>0)!(GMVEND'>0)) D
"RTN","GMVDCEXT",57,0)
 . S @RESULT@(0)="ERROR"
"RTN","GMVDCEXT",58,0)
 . S @RESULT@(2)="ERROR: Missing or invalid Date Range parameters"
"RTN","GMVDCEXT",59,0)
 . Q
"RTN","GMVDCEXT",60,0)
 I $G(@RESULT@(0))="ERROR" Q
"RTN","GMVDCEXT",61,0)
 S GMVABBR=$S($G(GMVABR)]"":GMVABR,GMVALL=1:"~ALL~",1:"^T^P^R^PO2^BP^HT^WT^CVP^CG^PN^")
"RTN","GMVDCEXT",62,0)
 I GMVABBR="~ALL~" D
"RTN","GMVDCEXT",63,0)
 . S GMVD0=0,GMVABBR=U
"RTN","GMVDCEXT",64,0)
 . F  S GMVD0=$O(^GMRD(120.51,GMVD0)) Q:GMVD0'>0  D
"RTN","GMVDCEXT",65,0)
 .. S GMVABBR(0)=$P($G(^GMRD(120.51,GMVD0,0)),U,2)
"RTN","GMVDCEXT",66,0)
 .. I GMVABBR(0)]"" S GMVABBR=GMVABBR_GMVABBR(0)_U
"RTN","GMVDCEXT",67,0)
 .. Q
"RTN","GMVDCEXT",68,0)
 . Q
"RTN","GMVDCEXT",69,0)
 S GMVABBR=$S($E(GMVABBR)'=U:U,1:"")_GMVABBR_$S($E(GMVABBR,$L(GMVABBR))'=U:U,1:"")
"RTN","GMVDCEXT",70,0)
 F GMV=2:1:$L(GMVABBR,U)-1 S GMVABBR(0)=$P(GMVABBR,U,GMV) D
"RTN","GMVDCEXT",71,0)
 . I $S(GMVABBR(0)="":1,$O(^GMRD(120.51,"C",GMVABBR(0),0))>0:1,1:0) Q
"RTN","GMVDCEXT",72,0)
 . I GMVABBR(0)'=+GMVABBR(0) S GMVABBR(0)=+$O(^GMRD(120.51,"B",GMVABBR(0),0))
"RTN","GMVDCEXT",73,0)
 . S GMVABBR(0)=$P($G(^GMRD(120.51,GMVABBR(0),0)),U,2)
"RTN","GMVDCEXT",74,0)
 . S $P(GMVABBR,U,GMV)=GMVABBR(0)
"RTN","GMVDCEXT",75,0)
 . Q
"RTN","GMVDCEXT",76,0)
 F GMV=1:1 S GMVPULSE=$P($T(PULSE+GMV),";;",2) Q:GMVPULSE=""  D
"RTN","GMVDCEXT",77,0)
 . S GMVD0=0
"RTN","GMVDCEXT",78,0)
 . F  S GMVD0=$O(^GMRD(120.52,"B",GMVPULSE,GMVD0)) Q:GMVD0'>0  D
"RTN","GMVDCEXT",79,0)
 .. I $P($G(^GMRD(120.52,GMVD0,0)),U)=GMVPULSE S GMVPULSE(GMVD0)=""
"RTN","GMVDCEXT",80,0)
 .. Q
"RTN","GMVDCEXT",81,0)
 . Q
"RTN","GMVDCEXT",82,0)
 S GMVD0=0
"RTN","GMVDCEXT",83,0)
 F  S GMVD0=$O(^GMRD(120.51,GMVD0)) Q:GMVD0'>0  D
"RTN","GMVDCEXT",84,0)
 . S GMVABBR(0)=$G(^GMRD(120.51,GMVD0,0))
"RTN","GMVDCEXT",85,0)
 . I GMVABBR[(U_$P(GMVABBR(0),U,2)_U) S GMVABBR($P(GMVABBR(0),U,2))=GMVD0_U_$P(GMVABBR(0),U,2)_U_$P(GMVABBR(0),U)
"RTN","GMVDCEXT",86,0)
 . Q
"RTN","GMVDCEXT",87,0)
 S GMVABBR=""
"RTN","GMVDCEXT",88,0)
 F  S GMVABBR=$O(GMVABBR(GMVABBR)) Q:GMVABBR=""  I GMVABBR(GMVABBR)>0 D
"RTN","GMVDCEXT",89,0)
 . S GMVFOUND=0
"RTN","GMVDCEXT",90,0)
 . S GMVIDATE=$S(GMVALL:9999999-GMVEND,1:0)
"RTN","GMVDCEXT",91,0)
 . F  S GMVIDATE=$O(^GMR(120.5,"AA",GMVDFN,+GMVABBR(GMVABBR),GMVIDATE)) Q:GMVIDATE'>0!$S(GMVALL:9999999-GMVIDATE<GMVBEG,1:0)!GMVFOUND  D SETDATAR
"RTN","GMVDCEXT",92,0)
 . Q
"RTN","GMVDCEXT",93,0)
 Q
"RTN","GMVDCEXT",94,0)
 ;
"RTN","GMVDCEXT",95,0)
SETDATAR ;
"RTN","GMVDCEXT",96,0)
 S GMVD0=0
"RTN","GMVDCEXT",97,0)
 F  S GMVD0=$O(^GMR(120.5,"AA",GMVDFN,+GMVABBR(GMVABBR),GMVIDATE,GMVD0)) Q:GMVD0'>0!GMVFOUND  I $P($G(^GMR(120.5,GMVD0,0)),U,8)]"" D SETNODE
"RTN","GMVDCEXT",98,0)
 Q
"RTN","GMVDCEXT",99,0)
 ;
"RTN","GMVDCEXT",100,0)
SETNODE ;
"RTN","GMVDCEXT",101,0)
 S GMVDATA=$G(^GMR(120.5,GMVD0,0))
"RTN","GMVDCEXT",102,0)
 S GMVDATA2=$G(^GMR(120.5,GMVD0,2))
"RTN","GMVDCEXT",103,0)
 S GMVRATE=$P(GMVDATA,U,8)
"RTN","GMVDCEXT",104,0)
 I GMVALL=0,"^REFUSED^PASS^UNAVAILABLE^"[(U_$$UP^XLFSTR(GMVRATE)_U) Q
"RTN","GMVDCEXT",105,0)
 I GMVEER=0,(($P(GMVDATA2,U)>0)!($P(GMVDATA2,U,2)>0)) Q
"RTN","GMVDCEXT",106,0)
 I GMVABBR="PO2",$P(GMVDATA,U,10)]"" D
"RTN","GMVDCEXT",107,0)
 . ; *** Decode Supplemental O2 field (#1.4) ***
"RTN","GMVDCEXT",108,0)
 . N GMVFRATE,GMVPCENT,GMVSUPO2
"RTN","GMVDCEXT",109,0)
 . S GMVSUPO2=$$LOW^XLFSTR($TR($P(GMVDATA,U,10)," "))
"RTN","GMVDCEXT",110,0)
 . S GMVFRATE=$S(GMVSUPO2["l/min":$P(GMVSUPO2,"l/min"),1:"")
"RTN","GMVDCEXT",111,0)
 . S GMVFRATE=$TR(GMVFRATE,$TR(GMVFRATE,".0123456789"))
"RTN","GMVDCEXT",112,0)
 . S GMVPCENT=$S(GMVSUPO2["%":$P(GMVSUPO2,"%"),1:"")
"RTN","GMVDCEXT",113,0)
 . S GMVPCENT=$S(GMVPCENT["l/min":$P(GMVPCENT,"l/min",2),GMVPCENT=+GMVPCENT:GMVPCENT,1:"")
"RTN","GMVDCEXT",114,0)
 . S GMVPCENT=$TR(GMVPCENT,$TR(GMVPCENT,".0123456789"))
"RTN","GMVDCEXT",115,0)
 . S GMVRATE=GMVRATE_";"_GMVFRATE_";"_GMVPCENT
"RTN","GMVDCEXT",116,0)
 . Q
"RTN","GMVDCEXT",117,0)
 I 'GMVALL,GMVABBR="P" D  I 'GMVOK Q
"RTN","GMVDCEXT",118,0)
 . ; *** Include selected pulse types (latest vitals only) ***
"RTN","GMVDCEXT",119,0)
 . S (GMVPULSE,GMVOK)=0
"RTN","GMVDCEXT",120,0)
 . F  S GMVPULSE=$O(GMVPULSE(GMVPULSE)) Q:GMVPULSE'>0  D  Q:GMVOK
"RTN","GMVDCEXT",121,0)
 .. I $O(^GMR(120.5,GMVD0,5,"B",GMVPULSE,0)) S GMVOK=1
"RTN","GMVDCEXT",122,0)
 .. Q
"RTN","GMVDCEXT",123,0)
 . Q
"RTN","GMVDCEXT",124,0)
 I 'GMVALL S GMVFOUND=1
"RTN","GMVDCEXT",125,0)
 S GMVALUE=$$CNV^GMVDCCNV(GMVRATE,GMVMSYS,"G",$P(GMVABBR(GMVABBR),U,2))
"RTN","GMVDCEXT",126,0)
 S @RESULT@(GMVD0)=GMVD0_U_$P(GMVDATA,U)_U_$P(GMVDATA,U,2)_U_$P(GMVABBR(GMVABBR),U,GMVFMT)_U_$P(GMVDATA,U,4)_U_$P(GMVDATA,U,5)_U_$P(GMVDATA,U,6)_U_GMVALUE_U_$P(GMVDATA2,U)_U_$P(GMVDATA2,U,2)_U
"RTN","GMVDCEXT",127,0)
 S GMVD1=0 K GMVQL
"RTN","GMVDCEXT",128,0)
 F  S GMVD1=$O(^GMR(120.5,GMVD0,5,GMVD1)) Q:GMVD1'>0  D
"RTN","GMVDCEXT",129,0)
 . S GMVQD0=+$P($G(^GMR(120.5,GMVD0,5,GMVD1,0)),U)
"RTN","GMVDCEXT",130,0)
 . S GMVQD1=+$O(^GMRD(120.52,GMVQD0,1,"B",GMVABBR(GMVABBR),0))
"RTN","GMVDCEXT",131,0)
 . S GMVCD0=+$P($G(^GMRD(120.52,GMVQD0,1,GMVQD1,0)),U,2)
"RTN","GMVDCEXT",132,0)
 . S GMVCAT=$P($G(^GMRD(120.53,GMVCD0,0)),U)
"RTN","GMVDCEXT",133,0)
 . S GMVCAT=$S(GMVCAT]"":GMVCAT,1:" ")
"RTN","GMVDCEXT",134,0)
 . S GMVQUA=$G(^GMRD(120.52,GMVQD0,0))
"RTN","GMVDCEXT",135,0)
 . S GMVQUA(1)=GMVQD0,GMVQUA(2)=$P(GMVQUA,U,2),GMVQUA(3)=$P(GMVQUA,U)
"RTN","GMVDCEXT",136,0)
 . S GMVCD1=+$O(^GMRD(120.53,"AA",+GMVABBR(GMVABBR),GMVCAT,GMVCD0,0))
"RTN","GMVDCEXT",137,0)
 . S GMVPOR=1+$P($G(^GMRD(120.53,GMVCD0,1,GMVCD1,0)),U,5)
"RTN","GMVDCEXT",138,0)
 . I $G(GMVQUA(GMVFMT))]"" D
"RTN","GMVDCEXT",139,0)
 .. S GMVQL(GMVPOR,GMVCAT)=$G(GMVQL(GMVPOR,GMVCAT))_GMVQUA(GMVFMT)_";"
"RTN","GMVDCEXT",140,0)
 .. Q
"RTN","GMVDCEXT",141,0)
 . Q
"RTN","GMVDCEXT",142,0)
 S GMVPOR=0
"RTN","GMVDCEXT",143,0)
 F  S GMVPOR=$O(GMVQL(GMVPOR)) Q:GMVPOR'>0  D
"RTN","GMVDCEXT",144,0)
 . S GMVCAT=""
"RTN","GMVDCEXT",145,0)
 . F  S GMVCAT=$O(GMVQL(GMVPOR,GMVCAT)) Q:GMVCAT=""  D
"RTN","GMVDCEXT",146,0)
 .. S @RESULT@(GMVD0)=@RESULT@(GMVD0)_GMVQL(GMVPOR,GMVCAT)
"RTN","GMVDCEXT",147,0)
 .. Q
"RTN","GMVDCEXT",148,0)
 . Q
"RTN","GMVDCEXT",149,0)
 S @RESULT@(GMVD0)=$$FIXUP(@RESULT@(GMVD0))
"RTN","GMVDCEXT",150,0)
 S GMVD1=0
"RTN","GMVDCEXT",151,0)
 S GMVER(0)=";"_$$GET1^DID(120.506,.01,"","POINTER")
"RTN","GMVDCEXT",152,0)
 F  S GMVD1=$O(^GMR(120.5,GMVD0,2.1,GMVD1)) Q:GMVD1'>0  D
"RTN","GMVDCEXT",153,0)
 . S GMVER=$P($G(^GMR(120.5,GMVD0,2.1,GMVD1,0)),U)
"RTN","GMVDCEXT",154,0)
 . I GMVER(0)[(";"_GMVER_":") D
"RTN","GMVDCEXT",155,0)
 .. I GMVFMT<3 S @RESULT@(GMVD0)=@RESULT@(GMVD0)_GMVER_";"
"RTN","GMVDCEXT",156,0)
 .. E  S @RESULT@(GMVD0)=@RESULT@(GMVD0)_$P($P(GMVER(0),";"_GMVER_":",2),";")_";"
"RTN","GMVDCEXT",157,0)
 .. Q
"RTN","GMVDCEXT",158,0)
 . Q
"RTN","GMVDCEXT",159,0)
 S @RESULT@(GMVD0)=$$FIXUP(@RESULT@(GMVD0))
"RTN","GMVDCEXT",160,0)
 Q
"RTN","GMVDCEXT",161,0)
 ;
"RTN","GMVDCEXT",162,0)
FIXUP(X) ;
"RTN","GMVDCEXT",163,0)
 Q $S($E(X,$L(X))=";":$E(X,1,$L(X)-1),1:X)_U
"RTN","GMVDCEXT",164,0)
 ;
"RTN","GMVDCEXT",165,0)
PULSE ;;Pulse types to include in the latest vitals extract
"RTN","GMVDCEXT",166,0)
 ;;APICAL
"RTN","GMVDCEXT",167,0)
 ;;BRACHIAL
"RTN","GMVDCEXT",168,0)
 ;;RADIAL
"RTN","GMVDCEXT",169,0)
 ;;
"RTN","GMVDCHLP")
0^177^B33391583
"RTN","GMVDCHLP",1,0)
GMVDCHLP ;HOIFO/DAD,FT-VITALS COMPONENT: HELP TEXT ;9/29/00  09:17
"RTN","GMVDCHLP",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVDCHLP",3,0)
 ;
"RTN","GMVDCHLP",4,0)
 ; This routine uses the following IAs:
"RTN","GMVDCHLP",5,0)
 ; #10104 - ^XLFSTR calls         (supported)
"RTN","GMVDCHLP",6,0)
 ;
"RTN","GMVDCHLP",7,0)
HELP(RESULT,GMVITTYP) ;
"RTN","GMVDCHLP",8,0)
 ; *** Get help text ***
"RTN","GMVDCHLP",9,0)
 ; Input:
"RTN","GMVDCHLP",10,0)
 ;  GMVITTYP = A vital type abbreviation
"RTN","GMVDCHLP",11,0)
 ; Output:
"RTN","GMVDCHLP",12,0)
 ;  RESULT() = The help text
"RTN","GMVDCHLP",13,0)
 N GMVLINE,GMVTXT K RESULT
"RTN","GMVDCHLP",14,0)
 S GMVITTYP=$$UP^XLFSTR(GMVITTYP)
"RTN","GMVDCHLP",15,0)
 I $T(@GMVITTYP)]"" D
"RTN","GMVDCHLP",16,0)
 . F GMVLINE=1:1 S GMVTXT=$P($T(@GMVITTYP+GMVLINE),";;",2) Q:GMVTXT=U  D
"RTN","GMVDCHLP",17,0)
 .. S RESULT(GMVLINE)=GMVTXT
"RTN","GMVDCHLP",18,0)
 .. Q
"RTN","GMVDCHLP",19,0)
 . Q
"RTN","GMVDCHLP",20,0)
 Q
"RTN","GMVDCHLP",21,0)
 ;;
"RTN","GMVDCHLP",22,0)
AG ;;ABDOMINAL GIRTH
"RTN","GMVDCHLP",23,0)
 ;;Abdominal girth must be numeric with no decimal places
"RTN","GMVDCHLP",24,0)
 ;;Must be in the range 0 - 150 IN (0 - 381 CM).
"RTN","GMVDCHLP",25,0)
 ;;^
"RTN","GMVDCHLP",26,0)
AUD ;;AUDIOMETRY
"RTN","GMVDCHLP",27,0)
 ;;Audiometry is entered as eight readings for right ear followed by
"RTN","GMVDCHLP",28,0)
 ;;eight readings for left ear.  Readings are delimited by slashes (/).
"RTN","GMVDCHLP",29,0)
 ;;Must be in the range 0 - 110.
"RTN","GMVDCHLP",30,0)
 ;;E.g.:
"RTN","GMVDCHLP",31,0)
 ;;  100/100/100/95/90/90/85/80/105/105/105/105/100/100/95/90/
"RTN","GMVDCHLP",32,0)
 ;;^
"RTN","GMVDCHLP",33,0)
BP ;;BLOOD PRESSURE
"RTN","GMVDCHLP",34,0)
 ;;Blood Pressure must be in the range 0 - 300 and in one of the
"RTN","GMVDCHLP",35,0)
 ;;following formats:
"RTN","GMVDCHLP",36,0)
 ;;E.g.:
"RTN","GMVDCHLP",37,0)
 ;;  120/80      (systolic / diastolic)
"RTN","GMVDCHLP",38,0)
 ;;  120/100/80  (systolic / mean / diastolic)
"RTN","GMVDCHLP",39,0)
 ;;  120         (systolic [must have doppler or palpated qualifier])
"RTN","GMVDCHLP",40,0)
 ;;^
"RTN","GMVDCHLP",41,0)
CG ;;CIRCUMFERENCE/GIRTH
"RTN","GMVDCHLP",42,0)
 ;;Circumference/girth must be numeric with a maximum of two decimal
"RTN","GMVDCHLP",43,0)
 ;;places.  Must be in the range 0 - 200 IN (0 - 508 CM).
"RTN","GMVDCHLP",44,0)
 ;;^
"RTN","GMVDCHLP",45,0)
CVP ;;CENTRAL VENOUS PRESSURE
"RTN","GMVDCHLP",46,0)
 ;;Central venous pressure must be numeric with a maximum of one decimal
"RTN","GMVDCHLP",47,0)
 ;;place.  Must be in the range -13.6 - 136 CM H2O (-10 - 100 mmHg).
"RTN","GMVDCHLP",48,0)
 ;;^
"RTN","GMVDCHLP",49,0)
FH ;;FUNDAL HEIGHT
"RTN","GMVDCHLP",50,0)
 ;;Fundal height must be numeric with no decimal places.
"RTN","GMVDCHLP",51,0)
 ;;Must be in the range 10 - 50 IN (25 - 127 CM).
"RTN","GMVDCHLP",52,0)
 ;;^
"RTN","GMVDCHLP",53,0)
FT ;;FETAL HEART TONES
"RTN","GMVDCHLP",54,0)
 ;;Fetal heart tones must be numeric with no decimal places.
"RTN","GMVDCHLP",55,0)
 ;;Must be in the range 50 - 250.
"RTN","GMVDCHLP",56,0)
 ;;^
"RTN","GMVDCHLP",57,0)
HC ;;HEAD CIRCUMFERENCE
"RTN","GMVDCHLP",58,0)
 ;;Head circumference if entered in inches must be in the range of
"RTN","GMVDCHLP",59,0)
 ;;10 - 30 inches with a maximum of three decimal places, where the
"RTN","GMVDCHLP",60,0)
 ;;decimal part must be a multiple of 0.125.
"RTN","GMVDCHLP",61,0)
 ;;E.g.:
"RTN","GMVDCHLP",62,0)
 ;;  23, 24.125, 23.25, 30.375, 28.5
"RTN","GMVDCHLP",63,0)
 ;;Head circumfrence if entered in centimeters must be in the range of
"RTN","GMVDCHLP",64,0)
 ;;26 - 76 centimeters with a maximum of two decimal places.
"RTN","GMVDCHLP",65,0)
 ;;E.g.:
"RTN","GMVDCHLP",66,0)
 ;;  30.2, 45
"RTN","GMVDCHLP",67,0)
 ;;^
"RTN","GMVDCHLP",68,0)
HE ;;HEARING
"RTN","GMVDCHLP",69,0)
 ;;Hearing is entered as N for Normal, or A for Abnormal.
"RTN","GMVDCHLP",70,0)
 ;;^
"RTN","GMVDCHLP",71,0)
HT ;;HEIGHT
"RTN","GMVDCHLP",72,0)
 ;;Height must be numeric with a maximum of two decimal places.
"RTN","GMVDCHLP",73,0)
 ;;Must be in the range 1 - 100 IN (2.54 - 254 CM).
"RTN","GMVDCHLP",74,0)
 ;;^
"RTN","GMVDCHLP",75,0)
P ;;PULSE
"RTN","GMVDCHLP",76,0)
 ;;Pulse must be numeric between 0 and 300 with no decimal places.
"RTN","GMVDCHLP",77,0)
 ;;^
"RTN","GMVDCHLP",78,0)
PN ;;PAIN
"RTN","GMVDCHLP",79,0)
 ;;Pain score is entered as one of the following integers.
"RTN","GMVDCHLP",80,0)
 ;;  0       = Patient verbalizes no pain.
"RTN","GMVDCHLP",81,0)
 ;;  1 to 10 = Patient verbalizes having pain.
"RTN","GMVDCHLP",82,0)
 ;;            ( 1 = slightly uncomfortable/minimal pain)
"RTN","GMVDCHLP",83,0)
 ;;            (10 = worst imaginable pain)
"RTN","GMVDCHLP",84,0)
 ;; 99       = Patient unable to respond/communicate pain level.
"RTN","GMVDCHLP",85,0)
 ;;^
"RTN","GMVDCHLP",86,0)
PO2 ;;PULSE OXIMETRY
"RTN","GMVDCHLP",87,0)
 ;;Pulse oximetry must be numeric with no decimal places.
"RTN","GMVDCHLP",88,0)
 ;;The value is interpreted as a percentage (0 - 100 %).
"RTN","GMVDCHLP",89,0)
 ;;Supplemental O2 information may also be entered:
"RTN","GMVDCHLP",90,0)
 ;;O2 Flow rate must be numeric with a maximum of one decimal place.
"RTN","GMVDCHLP",91,0)
 ;;Must be in the range 0.5 - 20 liters / minute.
"RTN","GMVDCHLP",92,0)
 ;;O2 concentration must be numeric with no decimal places.
"RTN","GMVDCHLP",93,0)
 ;;The value is interpreted as a percentage (0 - 100 %).
"RTN","GMVDCHLP",94,0)
 ;;^
"RTN","GMVDCHLP",95,0)
R ;;RESPIRATION
"RTN","GMVDCHLP",96,0)
 ;;Respiration must be numeric between 0 and 99 with no decimal places.
"RTN","GMVDCHLP",97,0)
 ;;^
"RTN","GMVDCHLP",98,0)
T ;;TEMPERATURE
"RTN","GMVDCHLP",99,0)
 ;;Temperature must be numeric with a maximum of two decimal places.
"RTN","GMVDCHLP",100,0)
 ;;Must be in the range 45 - 120 F (7.2 - 48.9 C).
"RTN","GMVDCHLP",101,0)
 ;;^
"RTN","GMVDCHLP",102,0)
TON ;;TONOMETRY
"RTN","GMVDCHLP",103,0)
 ;;Tonometry is entered a reading for right eye, followed by a slash
"RTN","GMVDCHLP",104,0)
 ;;(/) followed by a reading for the left eye.  The slash is required.
"RTN","GMVDCHLP",105,0)
 ;;Must be in the range 0 - 80.
"RTN","GMVDCHLP",106,0)
 ;;E.g.:
"RTN","GMVDCHLP",107,0)
 ;;  18/18, /20, 18/, 10/13
"RTN","GMVDCHLP",108,0)
 ;;^
"RTN","GMVDCHLP",109,0)
VC ;;VISION CORRECTED
"RTN","GMVDCHLP",110,0)
 ;;Vision corrected must entered in the form RightEye/LeftEye.  Only
"RTN","GMVDCHLP",111,0)
 ;;denominators should be entered, the initial 20/ is assumed.  Must
"RTN","GMVDCHLP",112,0)
 ;;be in the range 10 - 999.
"RTN","GMVDCHLP",113,0)
 ;;E.g.:
"RTN","GMVDCHLP",114,0)
 ;;  20/20  (Right eye 20/20.  Left eye 20/20.)
"RTN","GMVDCHLP",115,0)
 ;;  20/    (Right eye 20/20.  No left eye measurement.)
"RTN","GMVDCHLP",116,0)
 ;;  /20    (No right eye measurement.  Left eye 20/20.)
"RTN","GMVDCHLP",117,0)
 ;;^
"RTN","GMVDCHLP",118,0)
VU ;;VISION UNCORRECTED
"RTN","GMVDCHLP",119,0)
 ;;Vision uncorrected must entered in the form RightEye/LeftEye.  Only
"RTN","GMVDCHLP",120,0)
 ;;denominators should be entered, the initial 20/ is assumed.  Must
"RTN","GMVDCHLP",121,0)
 ;;be in the range 10 - 999.
"RTN","GMVDCHLP",122,0)
 ;;E.g.:
"RTN","GMVDCHLP",123,0)
 ;;  20/20  (Right eye 20/20.  Left eye 20/20.)
"RTN","GMVDCHLP",124,0)
 ;;  20/    (Right eye 20/20.  No left eye measurement.)
"RTN","GMVDCHLP",125,0)
 ;;  /20    (No right eye measurement.  Left eye 20/20.)
"RTN","GMVDCHLP",126,0)
 ;;^
"RTN","GMVDCHLP",127,0)
WT ;;WEIGHT
"RTN","GMVDCHLP",128,0)
 ;;Weight must be numeric with a maximum of two decimal places.
"RTN","GMVDCHLP",129,0)
 ;;Must be in the range 0 - 1500 LB (0 - 681 KG).
"RTN","GMVDCHLP",130,0)
 ;;^
"RTN","GMVDCRPC")
0^178^B38010920
"RTN","GMVDCRPC",1,0)
GMVDCRPC ;HOIFO/DAD-VITALS COMPONENT: RPCs ;8/24/99  08:28
"RTN","GMVDCRPC",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVDCRPC",3,0)
 ;
"RTN","GMVDCRPC",4,0)
 ; This routine uses the following IAs:
"RTN","GMVDCRPC",5,0)
 ; <None>
"RTN","GMVDCRPC",6,0)
 ;
"RTN","GMVDCRPC",7,0)
EN1(RESULT,GMVFMT,GMVITTYP) ;
"RTN","GMVDCRPC",8,0)
 ; RPC: GMVDC GET VITAL CATEGORIES
"RTN","GMVDCRPC",9,0)
 ; Get list of the categories
"RTN","GMVDCRPC",10,0)
 ; Input:
"RTN","GMVDCRPC",11,0)
 ;  GMVFMT   = Format of returned data (Optional)
"RTN","GMVDCRPC",12,0)
 ;             1 - IENs (default), 2 - Abbreviations, 3 - Full Names
"RTN","GMVDCRPC",13,0)
 ;  GMVITTYP = A pointer to GMRV Vital Type file (#120.51) (Optional)
"RTN","GMVDCRPC",14,0)
 ; Output:
"RTN","GMVDCRPC",15,0)
 ;  RESULT() = CategoryIEN ^ CategoryName ^
"RTN","GMVDCRPC",16,0)
 ;             VitalTypeIEN ^ DefaultQualifier
"RTN","GMVDCRPC",17,0)
 N GMVCNT,GMVD0,GMVD1,GMVDATA,GMVDEFQ
"RTN","GMVDCRPC",18,0)
 S GMVCNT=0
"RTN","GMVDCRPC",19,0)
 S GMVFMT=$S("^1^2^3^"[(U_$G(GMVFMT)_U):GMVFMT,1:1)
"RTN","GMVDCRPC",20,0)
 I $G(GMVITTYP)="" D
"RTN","GMVDCRPC",21,0)
 . S GMVITTYP=0
"RTN","GMVDCRPC",22,0)
 . F  S GMVITTYP=$O(^GMRD(120.53,"C",GMVITTYP)) Q:GMVITTYP'>0  D EN1A
"RTN","GMVDCRPC",23,0)
 . Q
"RTN","GMVDCRPC",24,0)
 E  D
"RTN","GMVDCRPC",25,0)
 . S GMVITTYP=$$VITIEN^GMVDCUTL(GMVITTYP)
"RTN","GMVDCRPC",26,0)
 . D EN1A
"RTN","GMVDCRPC",27,0)
 . Q
"RTN","GMVDCRPC",28,0)
 S RESULT(0)="OK"
"RTN","GMVDCRPC",29,0)
 Q
"RTN","GMVDCRPC",30,0)
EN1A S GMVD0=0
"RTN","GMVDCRPC",31,0)
 F  S GMVD0=$O(^GMRD(120.53,"C",GMVITTYP,GMVD0)) Q:GMVD0'>0  D
"RTN","GMVDCRPC",32,0)
 . S GMVD1=0
"RTN","GMVDCRPC",33,0)
 . F  S GMVD1=$O(^GMRD(120.53,"C",GMVITTYP,GMVD0,GMVD1)) Q:GMVD1'>0  D
"RTN","GMVDCRPC",34,0)
 .. S GMVDATA=$P($G(^GMRD(120.53,GMVD0,0)),U)
"RTN","GMVDCRPC",35,0)
 .. I GMVDATA]"" D
"RTN","GMVDCRPC",36,0)
 ... S GMVITTYP(0)=$G(^GMRD(120.51,+GMVITTYP,0))
"RTN","GMVDCRPC",37,0)
 ... S GMVITTYP(1)=GMVITTYP,GMVITTYP(2)=$P(GMVITTYP(0),U,2)
"RTN","GMVDCRPC",38,0)
 ... S GMVITTYP(3)=$P(GMVITTYP(0),U)
"RTN","GMVDCRPC",39,0)
 ... S GMVDEFQ=$P($G(^GMRD(120.53,GMVD0,1,GMVD1,0)),U,7)
"RTN","GMVDCRPC",40,0)
 ... S GMVDEFQ(0)=$G(^GMRD(120.52,+GMVDEFQ,0))
"RTN","GMVDCRPC",41,0)
 ... S GMVDEFQ(1)=GMVDEFQ,GMVDEFQ(2)=$P(GMVDEFQ(0),U,2)
"RTN","GMVDCRPC",42,0)
 ... S GMVDEFQ(3)=$P(GMVDEFQ(0),U)
"RTN","GMVDCRPC",43,0)
 ... S GMVCNT=GMVCNT+1
"RTN","GMVDCRPC",44,0)
 ... S RESULT(GMVCNT)=GMVD0_U_GMVDATA_U_GMVITTYP(GMVFMT)_U_GMVDEFQ(GMVFMT)
"RTN","GMVDCRPC",45,0)
 ... Q
"RTN","GMVDCRPC",46,0)
 .. Q
"RTN","GMVDCRPC",47,0)
 . Q
"RTN","GMVDCRPC",48,0)
 Q
"RTN","GMVDCRPC",49,0)
 ;
"RTN","GMVDCRPC",50,0)
EN2(RESULT) ;
"RTN","GMVDCRPC",51,0)
 ; RPC: GMVDC GET VITAL ERROR REASONS
"RTN","GMVDCRPC",52,0)
 ; Get list of the entered in error reasons
"RTN","GMVDCRPC",53,0)
 ; Input:
"RTN","GMVDCRPC",54,0)
 ;  None
"RTN","GMVDCRPC",55,0)
 ; Output:
"RTN","GMVDCRPC",56,0)
 ;  RESULT() = ErrorReasonInternal ^ ErrorReasonExternal
"RTN","GMVDCRPC",57,0)
 N GMVD0,GMVDATA
"RTN","GMVDCRPC",58,0)
 S GMVDATA=$$GET1^DID(120.506,.01,"","POINTER")
"RTN","GMVDCRPC",59,0)
 F GMVD0=1:1 S GMVDATA(0)=$P(GMVDATA,";",GMVD0) Q:GMVDATA(0)=""  D
"RTN","GMVDCRPC",60,0)
 . S RESULT(GMVD0)=$TR(GMVDATA(0),":","^")
"RTN","GMVDCRPC",61,0)
 . Q
"RTN","GMVDCRPC",62,0)
 S RESULT(0)="OK"
"RTN","GMVDCRPC",63,0)
 Q
"RTN","GMVDCRPC",64,0)
 ;
"RTN","GMVDCRPC",65,0)
EN3(RESULT,GMVFMT,GMVITTYP,GMVITCAT) ;
"RTN","GMVDCRPC",66,0)
 ; RPC: GMVDC GET VITAL QUALIFIERS
"RTN","GMVDCRPC",67,0)
 ; Get list of the qualifiers
"RTN","GMVDCRPC",68,0)
 ; Input:
"RTN","GMVDCRPC",69,0)
 ;  GMVFMT   = Format of returned data (Optional)
"RTN","GMVDCRPC",70,0)
 ;             1 - IENs (default), 2 - Abbreviations, 3 - Full Names
"RTN","GMVDCRPC",71,0)
 ;  GMVITTYP = A pointer to GMRV Vital Type file (#120.51) (Optional)
"RTN","GMVDCRPC",72,0)
 ;  GMVITCAT = A pointer to GMRV Vital Category file (#120.53) (Optional)
"RTN","GMVDCRPC",73,0)
 ; Output:
"RTN","GMVDCRPC",74,0)
 ;  RESULT() = QualifierIEN ^ QualifierName ^ QualifierSynonym ^
"RTN","GMVDCRPC",75,0)
 ;             VitalTypeIEN ^ CategoryIEN
"RTN","GMVDCRPC",76,0)
 N GMVCATD0,GMVCNT,GMVD0,GMVD1,GMVDATA
"RTN","GMVDCRPC",77,0)
 S GMVCNT=0
"RTN","GMVDCRPC",78,0)
 S GMVFMT=$S("^1^2^3^"[(U_$G(GMVFMT)_U):GMVFMT,1:1)
"RTN","GMVDCRPC",79,0)
 S GMVITCAT=$$CATIEN^GMVDCUTL($G(GMVITCAT))
"RTN","GMVDCRPC",80,0)
 I $G(GMVITTYP)="" D
"RTN","GMVDCRPC",81,0)
 . S GMVITTYP=0
"RTN","GMVDCRPC",82,0)
 . F  S GMVITTYP=$O(^GMRD(120.52,"C",GMVITTYP)) Q:GMVITTYP'>0  D EN3A
"RTN","GMVDCRPC",83,0)
 . Q
"RTN","GMVDCRPC",84,0)
 E  D
"RTN","GMVDCRPC",85,0)
 . S GMVITTYP=$$VITIEN^GMVDCUTL(GMVITTYP)
"RTN","GMVDCRPC",86,0)
 . D EN3A
"RTN","GMVDCRPC",87,0)
 . Q
"RTN","GMVDCRPC",88,0)
 S RESULT(0)="OK"
"RTN","GMVDCRPC",89,0)
 Q
"RTN","GMVDCRPC",90,0)
EN3A S GMVD0=0
"RTN","GMVDCRPC",91,0)
 F  S GMVD0=$O(^GMRD(120.52,"C",GMVITTYP,GMVD0)) Q:GMVD0'>0  D
"RTN","GMVDCRPC",92,0)
 . S GMVD1=0
"RTN","GMVDCRPC",93,0)
 . F  S GMVD1=$O(^GMRD(120.52,"C",GMVITTYP,GMVD0,GMVD1)) Q:GMVD1'>0  D
"RTN","GMVDCRPC",94,0)
 .. S GMVCATD0=$P($G(^GMRD(120.52,GMVD0,1,GMVD1,0)),U,2)
"RTN","GMVDCRPC",95,0)
 .. I $G(GMVITCAT)>0,GMVITCAT'=GMVCATD0 Q
"RTN","GMVDCRPC",96,0)
 .. S GMVDATA=$G(^GMRD(120.52,GMVD0,0))
"RTN","GMVDCRPC",97,0)
 .. I GMVDATA]"" D
"RTN","GMVDCRPC",98,0)
 ... S GMVITTYP(0)=$G(^GMRD(120.51,+GMVITTYP,0))
"RTN","GMVDCRPC",99,0)
 ... S GMVITTYP(1)=GMVITTYP,GMVITTYP(2)=$P(GMVITTYP(0),U,2)
"RTN","GMVDCRPC",100,0)
 ... S GMVITTYP(3)=$P(GMVITTYP(0),U)
"RTN","GMVDCRPC",101,0)
 ... S GMVITCAT(0)=$G(^GMRD(120.53,+GMVCATD0,0))
"RTN","GMVDCRPC",102,0)
 ... S GMVITCAT(1)=GMVCATD0,(GMVITCAT(2),GMVITCAT(3))=$P(GMVITCAT(0),U)
"RTN","GMVDCRPC",103,0)
 ... S GMVCNT=GMVCNT+1
"RTN","GMVDCRPC",104,0)
 ... S RESULT(GMVCNT)=GMVD0_U_$P(GMVDATA,U)_U_$P(GMVDATA,U,2)_U_GMVITTYP(GMVFMT)_U_GMVITCAT(GMVFMT)
"RTN","GMVDCRPC",105,0)
 ... Q
"RTN","GMVDCRPC",106,0)
 .. Q
"RTN","GMVDCRPC",107,0)
 . Q
"RTN","GMVDCRPC",108,0)
 Q
"RTN","GMVDCRPC",109,0)
 ;
"RTN","GMVDCRPC",110,0)
EN4(RESULT) ;
"RTN","GMVDCRPC",111,0)
 ; RPC: GMVDC GET VITAL TYPES
"RTN","GMVDCRPC",112,0)
 ; Get list of the vital types
"RTN","GMVDCRPC",113,0)
 ; Input:
"RTN","GMVDCRPC",114,0)
 ;  None
"RTN","GMVDCRPC",115,0)
 ; Output:
"RTN","GMVDCRPC",116,0)
 ;  RESULT() = VitalTypeIEN ^ VitalTypeName ^
"RTN","GMVDCRPC",117,0)
 ;             VitalTypeAbbr ^ VitalTypePCE_Abbreviation
"RTN","GMVDCRPC",118,0)
 N GMVD0,GMVDATA
"RTN","GMVDCRPC",119,0)
 S GMVD0=0
"RTN","GMVDCRPC",120,0)
 F  S GMVD0=$O(^GMRD(120.51,GMVD0)) Q:GMVD0'>0  D
"RTN","GMVDCRPC",121,0)
 . S GMVDATA=$G(^GMRD(120.51,GMVD0,0))
"RTN","GMVDCRPC",122,0)
 . I GMVDATA]"" S RESULT(GMVD0)=GMVD0_U_$P(GMVDATA,U)_U_$P(GMVDATA,U,2)_U_$P(GMVDATA,U,7)
"RTN","GMVDCRPC",123,0)
 . Q
"RTN","GMVDCRPC",124,0)
 S RESULT(0)="OK"
"RTN","GMVDCRPC",125,0)
 Q
"RTN","GMVDCRPC",126,0)
 ;
"RTN","GMVDCRPC",127,0)
EN5(RESULT,GMVDFN,GMVFMT,GMVABR,GMVMSYS) ;
"RTN","GMVDCRPC",128,0)
 ; RPC: GMVDC GET LATEST VITALS
"RTN","GMVDCRPC",129,0)
 ; Returns the latest vitals for a selected patient
"RTN","GMVDCRPC",130,0)
 ; Input:
"RTN","GMVDCRPC",131,0)
 ;  GMVDFN  = A pointer to the Patient file (#2) (Required)
"RTN","GMVDCRPC",132,0)
 ;  GMVFMT  = Format of returned data (Optional)
"RTN","GMVDCRPC",133,0)
 ;            1 - IENs (default), 2 - Abbreviations, 3 - Full Names
"RTN","GMVDCRPC",134,0)
 ;  GMVABR  = Abbreviations of vital types to return (Optional)
"RTN","GMVDCRPC",135,0)
 ;            "^T^P^R^PO2^BP^HT^WT^CVP^CG^PN^" (Default)
"RTN","GMVDCRPC",136,0)
 ;            "~ALL~" to return all vital types
"RTN","GMVDCRPC",137,0)
 ;  GMVMSYS = Measurement system (Optional)
"RTN","GMVDCRPC",138,0)
 ;            M = Metric, C - US Customary (Default)
"RTN","GMVDCRPC",139,0)
 ; Output:
"RTN","GMVDCRPC",140,0)
 ;  RESULT() = VitalMeasurementIEN ^ DateTimeTaken ^ PatientDFN ^   
"RTN","GMVDCRPC",141,0)
 ;             VitalType ^ DateTimeEntered ^ HospitalLocation ^     
"RTN","GMVDCRPC",142,0)
 ;             EnteredBy ^ Measurement ^ EnteredInError ^           
"RTN","GMVDCRPC",143,0)
 ;             EnteredInErrorBy ^                                   
"RTN","GMVDCRPC",144,0)
 ;             Qualifier1 ; Qualifier2 ; ... ^                      
"RTN","GMVDCRPC",145,0)
 ;             EnteredInErrorReason1 ; EnteredInErrorReason2 ; ... ^
"RTN","GMVDCRPC",146,0)
 D EN1^GMVDCEXT("^TMP(""GMV"",$J)",GMVDFN,$G(GMVFMT),$G(GMVABR),0,"","",$G(GMVMSYS),0)
"RTN","GMVDCRPC",147,0)
 S RESULT=$NA(^TMP("GMV",$J))
"RTN","GMVDCRPC",148,0)
 Q
"RTN","GMVDCRPC",149,0)
 ;
"RTN","GMVDCRPC",150,0)
EN6(RESULT,GMVDFN,GMVFMT,GMVABR,GMVBEG,GMVEND,GMVMSYS,GMVEE) ;
"RTN","GMVDCRPC",151,0)
 ; RPC: GMVDC GET VITALS
"RTN","GMVDCRPC",152,0)
 ; Returns vitals for a selected patient and date/time range
"RTN","GMVDCRPC",153,0)
 ; Input:
"RTN","GMVDCRPC",154,0)
 ;  GMVDFN  = A pointer to the Patient file (#2) (Required)
"RTN","GMVDCRPC",155,0)
 ;  GMVFMT  = Format of returned data (Optional)
"RTN","GMVDCRPC",156,0)
 ;            1 - IENs (default), 2 - Abbreviations, 3 - Full Names
"RTN","GMVDCRPC",157,0)
 ;  GMVABR  = Abbreviations of vital types to return (Optional)
"RTN","GMVDCRPC",158,0)
 ;            "^T^P^R^PO2^BP^HT^WT^CVP^CG^PN^" (Default)
"RTN","GMVDCRPC",159,0)
 ;            "~ALL~" to return all vital types
"RTN","GMVDCRPC",160,0)
 ;  GMVBEG  = Beginning date for all vitals (Not used for GMVALL = 0)
"RTN","GMVDCRPC",161,0)
 ;  GMVEND  = Ending    date for all vitals (Not used for GMVALL = 0)
"RTN","GMVDCRPC",162,0)
 ;  GMVMSYS = Measurement system (Optional)
"RTN","GMVDCRPC",163,0)
 ;            M = Metric, C - US Customary (Default)
"RTN","GMVDCRPC",164,0)
 ;  GMVEE   = Include entered in error records (Optional)
"RTN","GMVDCRPC",165,0)
 ;            (0 - No (Default), 1 - Yes)
"RTN","GMVDCRPC",166,0)
 ;
"RTN","GMVDCRPC",167,0)
 ; Output:
"RTN","GMVDCRPC",168,0)
 ;  RESULT() = VitalMeasurementIEN ^ DateTimeTaken ^ PatientDFN ^   
"RTN","GMVDCRPC",169,0)
 ;             VitalType ^ DateTimeEntered ^ HospitalLocation ^     
"RTN","GMVDCRPC",170,0)
 ;             EnteredBy ^ Measurement ^ EnteredInError ^           
"RTN","GMVDCRPC",171,0)
 ;             EnteredInErrorBy ^                                   
"RTN","GMVDCRPC",172,0)
 ;             Qualifier1 ; Qualifier2 ; ... ^                      
"RTN","GMVDCRPC",173,0)
 ;             EnteredInErrorReason1 ; EnteredInErrorReason2 ; ... ^
"RTN","GMVDCRPC",174,0)
 D EN1^GMVDCEXT("^TMP(""GMV"",$J)",GMVDFN,$G(GMVFMT),$G(GMVABR),1,$G(GMVBEG),$G(GMVEND),$G(GMVMSYS),$G(GMVEE))
"RTN","GMVDCRPC",175,0)
 S RESULT=$NA(^TMP("GMV",$J))
"RTN","GMVDCRPC",176,0)
 Q
"RTN","GMVDCRPC",177,0)
 ;
"RTN","GMVDCRPC",178,0)
EN7(RESULT,GMVITTYP) ;
"RTN","GMVDCRPC",179,0)
 ; RPC: GMVDC GET VITALS HELP
"RTN","GMVDCRPC",180,0)
 ; Get help text for a selected vital type
"RTN","GMVDCRPC",181,0)
 ; Input:
"RTN","GMVDCRPC",182,0)
 ;  GMVITTYP = A pointer to GMRV Vital Type file (#120.51) (Optional)
"RTN","GMVDCRPC",183,0)
 ; Output:
"RTN","GMVDCRPC",184,0)
 ;  RESULT() = Help text
"RTN","GMVDCRPC",185,0)
 S GMVITTYP=$$VITIEN^GMVDCUTL(GMVITTYP)
"RTN","GMVDCRPC",186,0)
 S GMVITTYP=$P($G(^GMRD(120.51,+GMVITTYP,0)),U,2)
"RTN","GMVDCRPC",187,0)
 I GMVITTYP]"" D
"RTN","GMVDCRPC",188,0)
 . D HELP^GMVDCHLP(.RESULT,GMVITTYP)
"RTN","GMVDCRPC",189,0)
 . S RESULT(0)="OK"
"RTN","GMVDCRPC",190,0)
 . I $O(RESULT(0))'>0 S RESULT(1)="No help text available."
"RTN","GMVDCRPC",191,0)
 . Q
"RTN","GMVDCRPC",192,0)
 E  D
"RTN","GMVDCRPC",193,0)
 . S RESULT(0)="ERROR"
"RTN","GMVDCRPC",194,0)
 . S RESULT(1)="ERROR: Missing or invalid Vital Type parameter"
"RTN","GMVDCRPC",195,0)
 . Q
"RTN","GMVDCRPC",196,0)
 Q
"RTN","GMVDCRPC",197,0)
 ;
"RTN","GMVDCRPC",198,0)
EN8(RESULT,GMVPARAM) ;
"RTN","GMVDCRPC",199,0)
 ; RPC: GMVDC SAVE VITALS
"RTN","GMVDCRPC",200,0)
 ; Saves vitals data
"RTN","GMVDCRPC",201,0)
 N GMVDFN,GMVDTDUN,GMVDTENT,GMVENTBY,GMVERRBY,GMVHOSPL,GMVMSYS K RESULT
"RTN","GMVDCRPC",202,0)
 S RESULT(0)="OK"
"RTN","GMVDCRPC",203,0)
 S GMVDATA="^TMP(""GMV"",$J)"
"RTN","GMVDCRPC",204,0)
 D FMTPARAM^GMVDCUTL(.GMVPARAM,GMVDATA)
"RTN","GMVDCRPC",205,0)
 D EN1^GMVDCVAL(.RESULT,GMVDATA)
"RTN","GMVDCRPC",206,0)
 I $G(RESULT(0))="OK" D EN1^GMVDCSAV(.RESULT,GMVDATA)
"RTN","GMVDCRPC",207,0)
 K RESULT(-1)
"RTN","GMVDCRPC",208,0)
 Q
"RTN","GMVDCRPC",209,0)
 ;
"RTN","GMVDCRPC",210,0)
EN9(RESULT,GMVPARAM) ;
"RTN","GMVDCRPC",211,0)
 ; RPC: GMVDC VALIDATE VITALS
"RTN","GMVDCRPC",212,0)
 ; Validates vitals data
"RTN","GMVDCRPC",213,0)
 N GMVDFN,GMVDTDUN,GMVDTENT,GMVENTBY,GMVERRBY,GMVHOSPL,GMVMSYS K RESULT
"RTN","GMVDCRPC",214,0)
 S RESULT(0)="OK"
"RTN","GMVDCRPC",215,0)
 S GMVDATA="^TMP(""GMV"",$J)"
"RTN","GMVDCRPC",216,0)
 D FMTPARAM^GMVDCUTL(.GMVPARAM,GMVDATA)
"RTN","GMVDCRPC",217,0)
 D EN1^GMVDCVAL(.RESULT,GMVDATA)
"RTN","GMVDCRPC",218,0)
 K RESULT(-1)
"RTN","GMVDCRPC",219,0)
 Q
"RTN","GMVDCRPC",220,0)
 ;
"RTN","GMVDCRPC",221,0)
EN10(RESULT,GMVMSYS) ;
"RTN","GMVDCRPC",222,0)
 ; RPC: GMVDC GET ABNORMAL RANGES
"RTN","GMVDCRPC",223,0)
 ; Returns the abnormal ranges for the vital types
"RTN","GMVDCRPC",224,0)
 ; Input:
"RTN","GMVDCRPC",225,0)
 ;  GMVMSYS = Measurement system (Optional)
"RTN","GMVDCRPC",226,0)
 ;            M = Metric, C - US Customary (Default)
"RTN","GMVDCRPC",227,0)
 ; Output:
"RTN","GMVDCRPC",228,0)
 ;  RESULT(1) = TEMP-HIGH ^ TEMP-LOW ^ PULSE-HIGH ^ PULSE-LOW ^
"RTN","GMVDCRPC",229,0)
 ;              RESP-HIGH ^ RESP-LOW ^ SYSTOLIC-HIGH ^ DIASTOLIC-HIGH ^
"RTN","GMVDCRPC",230,0)
 ;              SYSTOLIC-LOW ^ DIASTOLIC-LOW ^ CVP-HIGH ^ CVP-LOW ^
"RTN","GMVDCRPC",231,0)
 ;              O2SAT-LOW
"RTN","GMVDCRPC",232,0)
 N GMVABBR,GMVALUE,GMVPIECE K RESULT
"RTN","GMVDCRPC",233,0)
 S GMVMSYS=$$MEASYS^GMVDCUTL($G(GMVMSYS))
"RTN","GMVDCRPC",234,0)
 S RESULT(0)="OK"
"RTN","GMVDCRPC",235,0)
 S RESULT(1)=$P($G(^GMRD(120.57,1,1)),U,1,13)
"RTN","GMVDCRPC",236,0)
 F GMVPIECE=1,2,11,12 D
"RTN","GMVDCRPC",237,0)
 . S GMVABBR=$P("T^T^^^^^^^^^CVP^CVP",U,GMVPIECE)
"RTN","GMVDCRPC",238,0)
 . S GMVALUE=$P(RESULT(1),U,GMVPIECE)
"RTN","GMVDCRPC",239,0)
 . S GMVALUE=$$CNV^GMVDCCNV(GMVALUE,GMVMSYS,"G",GMVABBR)
"RTN","GMVDCRPC",240,0)
 . S $P(RESULT(1),U,GMVPIECE)=GMVALUE
"RTN","GMVDCRPC",241,0)
 . Q
"RTN","GMVDCRPC",242,0)
 Q
"RTN","GMVDCSAV")
0^179^B17175551
"RTN","GMVDCSAV",1,0)
GMVDCSAV ;HOIFO/DAD-VITALS COMPONENT: SAVE DATA ;8/9/02  12:56
"RTN","GMVDCSAV",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVDCSAV",3,0)
 ;
"RTN","GMVDCSAV",4,0)
 ; This routine uses the following IAs:
"RTN","GMVDCSAV",5,0)
 ; #10103 - ^XLFDT calls           (supported)
"RTN","GMVDCSAV",6,0)
 ;
"RTN","GMVDCSAV",7,0)
EN1(RESULT,GMVDATA) ; GMV ADD VM [RPC entry point]
"RTN","GMVDCSAV",8,0)
 ; Saves vitals data
"RTN","GMVDCSAV",9,0)
 N GMVCNT,GMVD0,GMVFDA,GMVINUM,GMVQNUM,GMVRNUM,GMVIEN,GMVDUN
"RTN","GMVDCSAV",10,0)
 N GMVVNUM,GMVVMEAS,GMVVQUAL,GMVVREAS
"RTN","GMVDCSAV",11,0)
 D QUALTWO
"RTN","GMVDCSAV",12,0)
 Q
"RTN","GMVDCSAV",13,0)
 ;I $O(@GMVDATA@("V",0))>0 D VITMEA
"RTN","GMVDCSAV",14,0)
 ;I $O(@GMVDATA@("I",0))>0 D ENTERR
"RTN","GMVDCSAV",15,0)
 ;I $G(RESULT(0))="OK" D MSG("OK: Data saved")
"RTN","GMVDCSAV",16,0)
 ;Q
"RTN","GMVDCSAV",17,0)
 ;
"RTN","GMVDCSAV",18,0)
VITMEA ; *** Save vital measurement data ***
"RTN","GMVDCSAV",19,0)
 S GMVVNUM=0 K GMVFDA
"RTN","GMVDCSAV",20,0)
 S GMVCNT=+$O(@GMVDATA@("V",1E25),-1)
"RTN","GMVDCSAV",21,0)
 F  S GMVVNUM=$O(@GMVDATA@("V",GMVVNUM)) Q:GMVVNUM'>0  D
"RTN","GMVDCSAV",22,0)
 . S GMVVMEAS=$G(@GMVDATA@("V",GMVVNUM))
"RTN","GMVDCSAV",23,0)
 . S GMVFDA(120.5,"+"_GMVVNUM_",",.01)=GMVDTDUN ; Date time taken
"RTN","GMVDCSAV",24,0)
 . S GMVFDA(120.5,"+"_GMVVNUM_",",.02)=GMVDFN   ; Patient
"RTN","GMVDCSAV",25,0)
 . S GMVFDA(120.5,"+"_GMVVNUM_",",.03)=$P(GMVVMEAS,U) ;
"RTN","GMVDCSAV",26,0)
 . S GMVFDA(120.5,"+"_GMVVNUM_",",.04)=GMVDTENT  ; Date Time entered
"RTN","GMVDCSAV",27,0)
 . S GMVFDA(120.5,"+"_GMVVNUM_",",.05)=GMVHOSPL  ; Hospital
"RTN","GMVDCSAV",28,0)
 . S GMVFDA(120.5,"+"_GMVVNUM_",",.06)=GMVENTBY  ; Entered by (DUZ)
"RTN","GMVDCSAV",29,0)
 . S GMVFDA(120.5,"+"_GMVVNUM_",",1.2)=$P($P(GMVVMEAS,U,2),";",1) ; Rate
"RTN","GMVDCSAV",30,0)
 . S GMVFDA(120.5,"+"_GMVVNUM_",",1.4)=$P($P(GMVVMEAS,U,2),";",2) ; Sup 02
"RTN","GMVDCSAV",31,0)
 . S GMVQNUM=0
"RTN","GMVDCSAV",32,0)
 . F  S GMVQNUM=$O(@GMVDATA@("Q",GMVVNUM,GMVQNUM)) Q:GMVQNUM'>0  D
"RTN","GMVDCSAV",33,0)
 .. S GMVVQUAL=$G(@GMVDATA@("Q",GMVVNUM,GMVQNUM))
"RTN","GMVDCSAV",34,0)
 .. S GMVCNT=GMVCNT+1
"RTN","GMVDCSAV",35,0)
 .. S GMVFDA(120.505,"+"_GMVCNT_",","+"_GMVVNUM_",",.01)=GMVVQUAL
"RTN","GMVDCSAV",36,0)
 .. Q
"RTN","GMVDCSAV",37,0)
 . Q
"RTN","GMVDCSAV",38,0)
 D UPDATE^DIE("","GMVFDA"),FMERROR
"RTN","GMVDCSAV",39,0)
 S RESULT(0)="OK"
"RTN","GMVDCSAV",40,0)
 Q
"RTN","GMVDCSAV",41,0)
 ;
"RTN","GMVDCSAV",42,0)
ENTERR ; *** Save entered in error data ***
"RTN","GMVDCSAV",43,0)
 S GMVINUM=0 K GMVFDA
"RTN","GMVDCSAV",44,0)
 S GMVCNT=+$O(@GMVDATA@("I",1E25),-1)
"RTN","GMVDCSAV",45,0)
 F  S GMVINUM=$O(@GMVDATA@("I",GMVINUM)) Q:GMVINUM'>0  D
"RTN","GMVDCSAV",46,0)
 . S GMVD0=$G(@GMVDATA@("I",GMVINUM))
"RTN","GMVDCSAV",47,0)
 . S GMVFDA(120.5,GMVD0_",",2)=1
"RTN","GMVDCSAV",48,0)
 . S GMVFDA(120.5,GMVD0_",",3)=GMVERRBY
"RTN","GMVDCSAV",49,0)
 . S GMVRNUM=0
"RTN","GMVDCSAV",50,0)
 . F  S GMVRNUM=$O(@GMVDATA@("R",GMVINUM,GMVRNUM)) Q:GMVRNUM'>0  D
"RTN","GMVDCSAV",51,0)
 .. S GMVVREAS=$G(@GMVDATA@("R",GMVINUM,GMVRNUM))
"RTN","GMVDCSAV",52,0)
 .. S GMVCNT=GMVCNT+1
"RTN","GMVDCSAV",53,0)
 .. S GMVFDA(120.506,"+"_GMVCNT_","_GMVD0_",",.01)=GMVVREAS
"RTN","GMVDCSAV",54,0)
 .. Q
"RTN","GMVDCSAV",55,0)
 . Q
"RTN","GMVDCSAV",56,0)
 D UPDATE^DIE("","GMVFDA"),FMERROR
"RTN","GMVDCSAV",57,0)
 S RESULT(0)="OK"
"RTN","GMVDCSAV",58,0)
 Q
"RTN","GMVDCSAV",59,0)
QUALTWO ; Add a new entry to FILE 120.5
"RTN","GMVDCSAV",60,0)
 S GMVVNUM=0 K GMVFDA
"RTN","GMVDCSAV",61,0)
 S GMVVMEAS=$P(GMVDATA,"*",1) ; 
"RTN","GMVDCSAV",62,0)
 S GMVDTDUN=$P(GMVVMEAS,"^",1) ; Date time
"RTN","GMVDCSAV",63,0)
 S GMVDFN=$P(GMVVMEAS,"^",2) ; Patient DFN
"RTN","GMVDCSAV",64,0)
 S GMVVTYP=$P(GMVVMEAS,"^",3) ; Vital type
"RTN","GMVDCSAV",65,0)
 S GMVDTDUN=$$CHKDT(GMVDTDUN,$P(GMVVTYP,";",1))
"RTN","GMVDCSAV",66,0)
 S GMVDTENT=$$NOW^XLFDT ; Current date time
"RTN","GMVDCSAV",67,0)
 S GMVHOSPL=$P(GMVVMEAS,"^",4) ; Hospital
"RTN","GMVDCSAV",68,0)
 S GMVENTBY=$P(GMVVMEAS,"^",5) ; DUZ
"RTN","GMVDCSAV",69,0)
 S GMVFDA(120.5,"+1,",.01)=GMVDTDUN ; Date time taken
"RTN","GMVDCSAV",70,0)
 S GMVFDA(120.5,"+1,",.02)=GMVDFN   ; Patient
"RTN","GMVDCSAV",71,0)
 S GMVFDA(120.5,"+1,",.03)=$P(GMVVTYP,";",1)   ; Vital Type
"RTN","GMVDCSAV",72,0)
 S GMVFDA(120.5,"+1,",.04)=GMVDTENT  ; Date Time entered
"RTN","GMVDCSAV",73,0)
 S GMVFDA(120.5,"+1,",.05)=GMVHOSPL  ; Hospital
"RTN","GMVDCSAV",74,0)
 S GMVFDA(120.5,"+1,",.06)=GMVENTBY  ; Entered by (DUZ)
"RTN","GMVDCSAV",75,0)
 S GMVFDA(120.5,"+1,",1.2)=$P(GMVVTYP,";",2) ; Rate
"RTN","GMVDCSAV",76,0)
 S GMVFDA(120.5,"+1,",1.4)=$P(GMVVTYP,";",3) ; Sup 02
"RTN","GMVDCSAV",77,0)
 S GMVIEN=""
"RTN","GMVDCSAV",78,0)
 D UPDATE^DIE("","GMVFDA","GMVIEN"),FMERROR
"RTN","GMVDCSAV",79,0)
 S GMVCNT=1
"RTN","GMVDCSAV",80,0)
 S GMVQUALS=$P(GMVDATA,"*",2)
"RTN","GMVDCSAV",81,0)
 F GMVLOOP=1:1:$L(GMVQUALS,":")+1 D
"RTN","GMVDCSAV",82,0)
 . S GMVVQUAL=$P(GMVQUALS,":",GMVLOOP)
"RTN","GMVDCSAV",83,0)
 . Q:GMVVQUAL=""
"RTN","GMVDCSAV",84,0)
 . S GMVCNT=GMVCNT+1
"RTN","GMVDCSAV",85,0)
 . D ADDQUAL^GMVGETQ(.GMVRES,GMVIEN(1)_"^"_GMVVQUAL)
"RTN","GMVDCSAV",86,0)
 . Q
"RTN","GMVDCSAV",87,0)
 Q
"RTN","GMVDCSAV",88,0)
 ;
"RTN","GMVDCSAV",89,0)
CHKDT(GMVDT,GMVSAV) ;Check id there ios a vital entered for that date and time
"RTN","GMVDCSAV",90,0)
 N GMVA,GMVQ
"RTN","GMVDCSAV",91,0)
 S GMVQ=0
"RTN","GMVDCSAV",92,0)
 S GMVA=""
"RTN","GMVDCSAV",93,0)
 F  S GMVA=$O(^GMR(120.5,"B",GMVDT,GMVA)) Q:GMVA=""  D
"RTN","GMVDCSAV",94,0)
 . S GMVTY=$P($G(^GMR(120.5,GMVA,0)),"^",3)
"RTN","GMVDCSAV",95,0)
 . I GMVTY=GMVSAV D
"RTN","GMVDCSAV",96,0)
 . . S GMVDT=$$FMADD^XLFDT(GMVDT,"","","",1)
"RTN","GMVDCSAV",97,0)
 . . Q
"RTN","GMVDCSAV",98,0)
 . Q
"RTN","GMVDCSAV",99,0)
 Q GMVDT
"RTN","GMVDCSAV",100,0)
MSG(X) ; *** Add a line to the message array ***
"RTN","GMVDCSAV",101,0)
 S (GMVMSG,RESULT(-1))=1+$G(RESULT(-1),0)
"RTN","GMVDCSAV",102,0)
 S RESULT(GMVMSG)=X
"RTN","GMVDCSAV",103,0)
 I $P(X,":")="ERROR" S RESULT(0)="ERROR"
"RTN","GMVDCSAV",104,0)
 Q
"RTN","GMVDCSAV",105,0)
 ;
"RTN","GMVDCSAV",106,0)
FMERROR ;
"RTN","GMVDCSAV",107,0)
 I $O(^TMP("DIERR",$J,0))>0 D
"RTN","GMVDCSAV",108,0)
 . N GMVER1,GMVER2
"RTN","GMVDCSAV",109,0)
 . S GMVER1=0
"RTN","GMVDCSAV",110,0)
 . F  S GMVER1=$O(^TMP("DIERR",$J,GMVER1)) Q:GMVER1'>0  D
"RTN","GMVDCSAV",111,0)
 .. S GMVER2=0
"RTN","GMVDCSAV",112,0)
 .. F  S GMVER2=$O(^TMP("DIERR",$J,GMVER1,"TEXT",GMVER2)) Q:GMVER2'>0  D
"RTN","GMVDCSAV",113,0)
 ... D MSG("ERROR: "_$G(^TMP("DIERR",$J,GMVER1,"TEXT",GMVER2)))
"RTN","GMVDCSAV",114,0)
 ... Q
"RTN","GMVDCSAV",115,0)
 .. Q
"RTN","GMVDCSAV",116,0)
 . Q
"RTN","GMVDCSAV",117,0)
 D CLEAN^DILF
"RTN","GMVDCSAV",118,0)
 Q
"RTN","GMVDCUTL")
0^180^B18284518
"RTN","GMVDCUTL",1,0)
GMVDCUTL ;HOIFO/DAD,FT-VITALS COMPONENT: UTILITIES ;9/29/00  09:18
"RTN","GMVDCUTL",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVDCUTL",3,0)
 ;
"RTN","GMVDCUTL",4,0)
 ; This routine uses the following IAs:
"RTN","GMVDCUTL",5,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVDCUTL",6,0)
 ;
"RTN","GMVDCUTL",7,0)
VITIEN(GMVITTYP) ;
"RTN","GMVDCUTL",8,0)
 ; Convert a vital type abbr / PCE abbr / name to an IEN
"RTN","GMVDCUTL",9,0)
 ; Input:
"RTN","GMVDCUTL",10,0)
 ;  A vital type IEN or abbr or PCE abbr or name
"RTN","GMVDCUTL",11,0)
 ; Output:
"RTN","GMVDCUTL",12,0)
 ;  A pointer to the GMRV Vital Type file (#120.51)
"RTN","GMVDCUTL",13,0)
 N GMVABR,GMVNAM,GMVPCE
"RTN","GMVDCUTL",14,0)
 S GMVABR=$S($G(GMVITTYP)]"":+$O(^GMRD(120.51,"C",GMVITTYP,0)),1:0)
"RTN","GMVDCUTL",15,0)
 S GMVPCE=$S($G(GMVITTYP)]"":+$O(^GMRD(120.51,"APCE",GMVITTYP,0)),1:0)
"RTN","GMVDCUTL",16,0)
 S GMVNAM=$S($G(GMVITTYP)]"":+$O(^GMRD(120.51,"B",GMVITTYP,0)),1:0)
"RTN","GMVDCUTL",17,0)
 S GMVD0=$S(GMVITTYP=+GMVITTYP:GMVITTYP,GMVABR:GMVABR,GMVPCE:GMVPCE,GMVNAM:GMVNAM,1:-1)
"RTN","GMVDCUTL",18,0)
 S GMVD0=$S($D(^GMRD(120.51,GMVD0,0))#2:GMVD0,1:-1)
"RTN","GMVDCUTL",19,0)
 Q GMVD0
"RTN","GMVDCUTL",20,0)
 ;
"RTN","GMVDCUTL",21,0)
QUAIEN(GMVITQUA) ;
"RTN","GMVDCUTL",22,0)
 ; Convert a vital qualifier name to an IEN
"RTN","GMVDCUTL",23,0)
 ; Input:
"RTN","GMVDCUTL",24,0)
 ;  A vital qualifier IEN or name or synonym
"RTN","GMVDCUTL",25,0)
 ; Output:
"RTN","GMVDCUTL",26,0)
 ;  A pointer to the GMRV Vital Qualifier file (#120.52)
"RTN","GMVDCUTL",27,0)
 N GMVD0,GMVIEN,GMVNAM
"RTN","GMVDCUTL",28,0)
 S GMVNAM=$S($G(GMVITQUA)]"":+$O(^GMRD(120.52,"B",GMVITQUA,0)),1:-1)
"RTN","GMVDCUTL",29,0)
 S GMVD0=$S(GMVITQUA=+GMVITQUA:GMVITQUA,GMVNAM>0:GMVNAM,1:-1)
"RTN","GMVDCUTL",30,0)
 S GMVD0=$S($D(^GMRD(120.52,GMVD0,0))#2:GMVD0,1:-1)
"RTN","GMVDCUTL",31,0)
 I GMVD0'>0,$G(GMVITQUA)]"" D
"RTN","GMVDCUTL",32,0)
 . S GMVIEN=0
"RTN","GMVDCUTL",33,0)
 . F  S GMVIEN=$O(^GMRD(120.52,GMVIEN)) Q:GMVIEN'>0  D  Q:GMVD0>0
"RTN","GMVDCUTL",34,0)
 .. I $P($G(^GMRD(120.52,GMVIEN,0)),U,2)=GMVITQUA S GMVD0=GMVIEN
"RTN","GMVDCUTL",35,0)
 .. Q
"RTN","GMVDCUTL",36,0)
 . Q
"RTN","GMVDCUTL",37,0)
 Q GMVD0
"RTN","GMVDCUTL",38,0)
 ;
"RTN","GMVDCUTL",39,0)
CATIEN(GMVITCAT) ;
"RTN","GMVDCUTL",40,0)
 ; Convert a vital category name to an IEN
"RTN","GMVDCUTL",41,0)
 ; Input:
"RTN","GMVDCUTL",42,0)
 ;  A vital category IEN or name
"RTN","GMVDCUTL",43,0)
 ; Output:
"RTN","GMVDCUTL",44,0)
 ;  A pointer to the GMRV Vital Category file (#120.53)
"RTN","GMVDCUTL",45,0)
 N GMVCAT,GMVD0
"RTN","GMVDCUTL",46,0)
 S GMVCAT=$S($G(GMVITCAT)]"":+$O(^GMRD(120.53,"B",GMVITCAT,0)),1:0)
"RTN","GMVDCUTL",47,0)
 S GMVD0=$S(GMVITCAT=+GMVITCAT:GMVITCAT,GMVCAT:GMVCAT,1:-1)
"RTN","GMVDCUTL",48,0)
 S GMVD0=$S($D(^GMRD(120.53,GMVD0,0))#2:GMVD0,1:-1)
"RTN","GMVDCUTL",49,0)
 Q GMVD0
"RTN","GMVDCUTL",50,0)
 ;
"RTN","GMVDCUTL",51,0)
REAIEN(GMVITREA) ;
"RTN","GMVDCUTL",52,0)
 ; Convert an entered in error reason external form to an internal form
"RTN","GMVDCUTL",53,0)
 ; Input:
"RTN","GMVDCUTL",54,0)
 ;  A vital entered in error reason in internal/external form
"RTN","GMVDCUTL",55,0)
 ; Output:
"RTN","GMVDCUTL",56,0)
 ;  A vital entered in error reason in internal form
"RTN","GMVDCUTL",57,0)
 N GMVD0,GMVDATA
"RTN","GMVDCUTL",58,0)
 S GMVDATA=$$GET1^DID(120.506,.01,"","POINTER")
"RTN","GMVDCUTL",59,0)
 S GMVITREA(0)=$P(GMVDATA,":"_GMVITREA_";")
"RTN","GMVDCUTL",60,0)
 S GMVITREA(0)=$P(GMVITREA(0),";",$L(GMVITREA(0),";"))
"RTN","GMVDCUTL",61,0)
 S GMVD0=$S(GMVITREA=+GMVITREA:GMVITREA,GMVITREA(0):GMVITREA(0),1:-1)
"RTN","GMVDCUTL",62,0)
 S GMVD0=$S(";"_GMVDATA[(";"_GMVD0_":"):GMVD0,1:-1)
"RTN","GMVDCUTL",63,0)
 Q GMVD0
"RTN","GMVDCUTL",64,0)
 ;
"RTN","GMVDCUTL",65,0)
MEASYS(GMVMSYS) ;
"RTN","GMVDCUTL",66,0)
 ; Validates and returns the measurement system
"RTN","GMVDCUTL",67,0)
 ; Input:
"RTN","GMVDCUTL",68,0)
 ;  GMVMSYS = Measurement system (Optional)
"RTN","GMVDCUTL",69,0)
 ;            M = Metric, C - US Customary (Default)
"RTN","GMVDCUTL",70,0)
 ; Output:
"RTN","GMVDCUTL",71,0)
 ;  M = Metric, C - US Customary (Default)
"RTN","GMVDCUTL",72,0)
 S GMVMSYS=$$UP^XLFSTR($G(GMVMSYS))
"RTN","GMVDCUTL",73,0)
 Q $S("^C^M^"[(U_GMVMSYS_U):GMVMSYS,1:"C")
"RTN","GMVDCUTL",74,0)
 ;
"RTN","GMVDCUTL",75,0)
FMTPARAM(GMVIN,GMVOUT) ;
"RTN","GMVDCUTL",76,0)
 ; Reformat the validate/save list parameter
"RTN","GMVDCUTL",77,0)
 ; Input:
"RTN","GMVDCUTL",78,0)
 ;  GMVIN  = The list parameter data as it comes from the RPC broker
"RTN","GMVDCUTL",79,0)
 ;           See remote procedure GMV SAVE VITALS or GMV VALIDATE VITALS
"RTN","GMVDCUTL",80,0)
 ;           for a description of the format of the data
"RTN","GMVDCUTL",81,0)
 ;  GMVOUT = A closed array reference used to store the reformatted data
"RTN","GMVDCUTL",82,0)
 ; Output:
"RTN","GMVDCUTL",83,0)
 ;  @GMVOUT@("V",##)    = Measurements
"RTN","GMVDCUTL",84,0)
 ;  @GMVOUT@("I",##)    = Entered in error IENS
"RTN","GMVDCUTL",85,0)
 ;  @GMVOUT@("Q",##,##) = Qualifiers
"RTN","GMVDCUTL",86,0)
 ;  @GMVOUT@("R",##,##) = Entered in error reasons
"RTN","GMVDCUTL",87,0)
 ;  GMVDFN              = PatientDFN
"RTN","GMVDCUTL",88,0)
 ;  GMVDTDUN            = DateTimeTaken
"RTN","GMVDCUTL",89,0)
 ;  GMVHOSPL            = HospitalLocation
"RTN","GMVDCUTL",90,0)
 ;  GMVDTENT            = DateTimeEntered
"RTN","GMVDCUTL",91,0)
 ;  GMVENTBY            = EnteredBy
"RTN","GMVDCUTL",92,0)
 ;  GMVERRBY            = EnteredInErrorBy
"RTN","GMVDCUTL",93,0)
 ;  GMVMSYS             = MeasurementSystem
"RTN","GMVDCUTL",94,0)
 ;
"RTN","GMVDCUTL",95,0)
 N GMV,GMVDATA,GMVMAJOR,GMVMINOR,GMVRET,GMVS2V,GMVTYPE,GMVVAR,GMVVARTY
"RTN","GMVDCUTL",96,0)
 K @GMVOUT
"RTN","GMVDCUTL",97,0)
 F GMV=1:1 S GMVDATA=$P($T(SUBVAR+GMV),";;",2) Q:GMVDATA=""  D
"RTN","GMVDCUTL",98,0)
 . S GMVVAR=$P(GMVDATA,U,2),GMVVARTY=$P(GMVDATA,U,3)
"RTN","GMVDCUTL",99,0)
 . S GMVS2V($P(GMVDATA,U))=GMVVAR_U_GMVVARTY
"RTN","GMVDCUTL",100,0)
 . S @(GMVVAR_"=-1")
"RTN","GMVDCUTL",101,0)
 . Q
"RTN","GMVDCUTL",102,0)
 S GMV=""
"RTN","GMVDCUTL",103,0)
 F  S GMV=$O(GMVIN(GMV)) Q:GMV=""  D
"RTN","GMVDCUTL",104,0)
 . I (GMV?1U1"^"1.N)!(GMV?1U1"^"1.N1"^"1.N) D
"RTN","GMVDCUTL",105,0)
 .. S GMVTYPE=$P(GMV,U),GMVMAJOR=$P(GMV,U,2),GMVMINOR=$P(GMV,U,3)
"RTN","GMVDCUTL",106,0)
 .. I "^I^V^"[(U_GMVTYPE_U) D  ; Entered in Error IENS & Measurements
"RTN","GMVDCUTL",107,0)
 ... S @GMVOUT@(GMVTYPE,GMVMAJOR)=GMVIN(GMV)
"RTN","GMVDCUTL",108,0)
 ... Q
"RTN","GMVDCUTL",109,0)
 .. I "^Q^R^"[(U_GMVTYPE_U) D  ; Qualifiers & Reasons entered in error
"RTN","GMVDCUTL",110,0)
 ... S @GMVOUT@(GMVTYPE,GMVMAJOR,GMVMINOR)=GMVIN(GMV)
"RTN","GMVDCUTL",111,0)
 ... Q
"RTN","GMVDCUTL",112,0)
 .. Q
"RTN","GMVDCUTL",113,0)
 . E  D
"RTN","GMVDCUTL",114,0)
 .. S GMVDATA=$G(GMVS2V(GMV))
"RTN","GMVDCUTL",115,0)
 .. S GMVVAR=$P(GMVDATA,U),GMVVARTY=$P(GMVDATA,U,2)
"RTN","GMVDCUTL",116,0)
 .. I GMVVARTY="D" D
"RTN","GMVDCUTL",117,0)
 ... K GMVRET
"RTN","GMVDCUTL",118,0)
 ... D DT^DILF("RSTX",GMVIN(GMV),.GMVRET)
"RTN","GMVDCUTL",119,0)
 ... S GMVIN(GMV)=$G(GMVRET)
"RTN","GMVDCUTL",120,0)
 ... Q
"RTN","GMVDCUTL",121,0)
 .. I GMVVARTY="U",$$UP^XLFSTR(GMVIN(GMV))="DUZ" D
"RTN","GMVDCUTL",122,0)
 ... S GMVIN(GMV)=DUZ
"RTN","GMVDCUTL",123,0)
 ... Q
"RTN","GMVDCUTL",124,0)
 .. I GMVVAR]"",GMVIN(GMV)]"" S @(GMVVAR_"="""_GMVIN(GMV)_"""")
"RTN","GMVDCUTL",125,0)
 .. Q
"RTN","GMVDCUTL",126,0)
 . Q
"RTN","GMVDCUTL",127,0)
 Q
"RTN","GMVDCUTL",128,0)
SUBVAR ;;Subscript ^ Variable ^ DataType (D-Date/Time, L-Literal, U-User)
"RTN","GMVDCUTL",129,0)
 ;;PatientDFN^GMVDFN^L
"RTN","GMVDCUTL",130,0)
 ;;DateTimeTaken^GMVDTDUN^D
"RTN","GMVDCUTL",131,0)
 ;;HospitalLocation^GMVHOSPL^L
"RTN","GMVDCUTL",132,0)
 ;;DateTimeEntered^GMVDTENT^D
"RTN","GMVDCUTL",133,0)
 ;;EnteredBy^GMVENTBY^U
"RTN","GMVDCUTL",134,0)
 ;;EnteredInErrorBy^GMVERRBY^U
"RTN","GMVDCUTL",135,0)
 ;;MeasurementSystem^GMVMSYS^L
"RTN","GMVDCUTL",136,0)
 ;;
"RTN","GMVDCVAL")
0^181^B48794043
"RTN","GMVDCVAL",1,0)
GMVDCVAL ;HOIFO/DAD,FT-VITALS COMPONENT: VALIDATE DATA ;9/29/00  09:18
"RTN","GMVDCVAL",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVDCVAL",3,0)
 ;
"RTN","GMVDCVAL",4,0)
 ; This routine uses the following IAs:
"RTN","GMVDCVAL",5,0)
 ; #10035 - FILE 2 references        (supported)
"RTN","GMVDCVAL",6,0)
 ; #10040 - FILE 44 references       (supported)
"RTN","GMVDCVAL",7,0)
 ; #10060 - FILE 200 fields          (supported)
"RTN","GMVDCVAL",8,0)
 ; #10104 - ^XLFSTR calls            (supported)
"RTN","GMVDCVAL",9,0)
 ;
"RTN","GMVDCVAL",10,0)
EN1(RESULT,GMVDATA) ;
"RTN","GMVDCVAL",11,0)
 ; *** Validates vitals data ***
"RTN","GMVDCVAL",12,0)
 N GMV,GMVD0,GMVID0,GMVIFIND,GMVIHOLD,GMVILAST,GMVINUM,GMVIXFRM
"RTN","GMVDCVAL",13,0)
 N GMVMSG,GMVOK,GMVQARRY,GMVQD0,GMVQFIND,GMVQHOLD,GMVQNUM,GMVRD0
"RTN","GMVDCVAL",14,0)
 N GMVRET,GMVRFIND,GMVRHOLD,GMVRNUM,GMVSYSBP,GMVVABBR,GMVVD0
"RTN","GMVDCVAL",15,0)
 N GMVVFIND,GMVVHOLD,GMVVLAST,GMVVMEAS,GMVVNUM
"RTN","GMVDCVAL",16,0)
 D EXIT
"RTN","GMVDCVAL",17,0)
 F GMV=1:1 S GMVSYSBP=$P($T(BPSYSQ+GMV),";;",2) Q:GMVSYSBP=""  D
"RTN","GMVDCVAL",18,0)
 . S GMVD0=0
"RTN","GMVDCVAL",19,0)
 . F  S GMVD0=$O(^GMRD(120.52,"B",GMVSYSBP,GMVD0)) Q:GMVD0'>0  D
"RTN","GMVDCVAL",20,0)
 .. I GMVSYSBP=$P($G(^GMRD(120.52,GMVD0,0)),U) S GMVSYSBP(GMVD0)=""
"RTN","GMVDCVAL",21,0)
 .. Q
"RTN","GMVDCVAL",22,0)
 . Q
"RTN","GMVDCVAL",23,0)
 I $O(@GMVDATA@(""))]"" D
"RTN","GMVDCVAL",24,0)
 . ; *** Vital measurement data validation ***
"RTN","GMVDCVAL",25,0)
 . I ($O(@GMVDATA@("V",0))>0)!($O(@GMVDATA@("Q",0))>0) D VITMEA
"RTN","GMVDCVAL",26,0)
 . ; *** Entered in Error data validation ***
"RTN","GMVDCVAL",27,0)
 . I ($O(@GMVDATA@("I",0))>0)!($O(@GMVDATA@("R",0))>0) D ENTERR
"RTN","GMVDCVAL",28,0)
 . Q
"RTN","GMVDCVAL",29,0)
 E  D
"RTN","GMVDCVAL",30,0)
 . D MSG("ERROR: No data to validate/save")
"RTN","GMVDCVAL",31,0)
 . Q
"RTN","GMVDCVAL",32,0)
 I $G(RESULT(0))="OK" D MSG("OK: Data validated")
"RTN","GMVDCVAL",33,0)
 ;
"RTN","GMVDCVAL",34,0)
EXIT ; *** Clean-up ***
"RTN","GMVDCVAL",35,0)
 K ^TMP($J,"GMVXREF")
"RTN","GMVDCVAL",36,0)
 Q
"RTN","GMVDCVAL",37,0)
 ;
"RTN","GMVDCVAL",38,0)
VITMEA ; *** Validate vital measurement data ***
"RTN","GMVDCVAL",39,0)
 I $$FIND1^DIC(2,"","","`"_GMVDFN)'=GMVDFN D
"RTN","GMVDCVAL",40,0)
 . D MSG("ERROR: Missing or invalid Patient parameter")
"RTN","GMVDCVAL",41,0)
 . Q
"RTN","GMVDCVAL",42,0)
 K GMVRET D DT^DILF("RSTX",GMVDTDUN,.GMVRET,"-NOW")
"RTN","GMVDCVAL",43,0)
 I $G(GMVRET,-1)<0 D
"RTN","GMVDCVAL",44,0)
 . D MSG("ERROR: Missing or invalid Date/Time Vitals Taken parameter")
"RTN","GMVDCVAL",45,0)
 . Q
"RTN","GMVDCVAL",46,0)
 I $$FIND1^DIC(44,"","","`"_GMVHOSPL)'=GMVHOSPL D
"RTN","GMVDCVAL",47,0)
 . D MSG("ERROR: Missing or invalid Hospital Location parameter")
"RTN","GMVDCVAL",48,0)
 . Q
"RTN","GMVDCVAL",49,0)
 K GMVRET D DT^DILF("RSTX",GMVDTENT,.GMVRET,"-NOW")
"RTN","GMVDCVAL",50,0)
 I $G(GMVRET,-1)<0 D
"RTN","GMVDCVAL",51,0)
 . D MSG("ERROR: Missing or invalid Date/Time Vitals Entered parameter")
"RTN","GMVDCVAL",52,0)
 . Q
"RTN","GMVDCVAL",53,0)
 I $$FIND1^DIC(200,"","","`"_GMVENTBY)'=GMVENTBY D
"RTN","GMVDCVAL",54,0)
 . D MSG("ERROR: Missing or invalid Entered By parameter")
"RTN","GMVDCVAL",55,0)
 . Q
"RTN","GMVDCVAL",56,0)
 I "^C^M^"'[(U_$G(GMVMSYS)_U) D
"RTN","GMVDCVAL",57,0)
 . D MSG("ERROR: Missing or invalid Measurement System")
"RTN","GMVDCVAL",58,0)
 . Q
"RTN","GMVDCVAL",59,0)
 S (GMVVNUM,GMVVLAST,GMVVFIND)=0
"RTN","GMVDCVAL",60,0)
 F  S GMVVNUM=$O(@GMVDATA@("V",GMVVNUM)) Q:GMVVNUM'>0  D
"RTN","GMVDCVAL",61,0)
 . S GMVVLAST=GMVVNUM
"RTN","GMVDCVAL",62,0)
 . S GMVSYSBP=0,GMVQARRY=U
"RTN","GMVDCVAL",63,0)
 . S (GMV,GMVVHOLD)=$G(@GMVDATA@("V",GMVVNUM))
"RTN","GMVDCVAL",64,0)
 . S GMVVD0=$$VITIEN^GMVDCUTL($P(GMV,U))
"RTN","GMVDCVAL",65,0)
 . S (GMVVMEAS,GMVVMEAS(1))=$P(GMV,U,2)
"RTN","GMVDCVAL",66,0)
 . I GMVVD0'>0 D
"RTN","GMVDCVAL",67,0)
 .. D MSG("ERROR: Missing or invalid Vital Type (V^"_GMVVNUM_"="_GMVVHOLD_")")
"RTN","GMVDCVAL",68,0)
 .. Q
"RTN","GMVDCVAL",69,0)
 . E  D
"RTN","GMVDCVAL",70,0)
 .. S GMVVFIND=1
"RTN","GMVDCVAL",71,0)
 .. S GMVVABBR=$P($G(^GMRD(120.51,+GMVVD0,0)),U,2)
"RTN","GMVDCVAL",72,0)
 .. S $P(@GMVDATA@("V",GMVVNUM),U,1)=GMVVD0
"RTN","GMVDCVAL",73,0)
 .. D BP^GMVDCVAM,PO2^GMVDCVAM
"RTN","GMVDCVAL",74,0)
 .. I $$OMIT^GMVDCVAM(GMVVMEAS) D
"RTN","GMVDCVAL",75,0)
 ... S GMVVMEAS=$$UP^XLFSTR($E(GMVVMEAS))_$$LOW^XLFSTR($E(GMVVMEAS,2,$L(GMVVMEAS)))
"RTN","GMVDCVAL",76,0)
 ... I $O(@GMVDATA@("Q",GMVVNUM,0))>0 D
"RTN","GMVDCVAL",77,0)
 .... D MSG("ERROR: Qualifiers not allowed if vital measurement is omitted (V^"_GMVVNUM_"="_GMVVHOLD_")")
"RTN","GMVDCVAL",78,0)
 .... Q
"RTN","GMVDCVAL",79,0)
 ... Q
"RTN","GMVDCVAL",80,0)
 .. S GMVOK=1
"RTN","GMVDCVAL",81,0)
 .. I '$$VALID^GMVDCCHK($P(GMVVMEAS,";"),GMVMSYS,GMVVABBR) S GMVOK=0
"RTN","GMVDCVAL",82,0)
 .. I GMVOK,GMVVMEAS("PO2")]"" D
"RTN","GMVDCVAL",83,0)
 ... S GMVIXFRM=$$GET1^DID(120.5,1.4,"","INPUT TRANSFORM")
"RTN","GMVDCVAL",84,0)
 ... I GMVIXFRM]"" S X=GMVVMEAS("PO2") X GMVIXFRM I '$D(X) S GMVOK=0
"RTN","GMVDCVAL",85,0)
 ... Q
"RTN","GMVDCVAL",86,0)
 .. I 'GMVOK S GMVOK=$$OMIT^GMVDCVAM($P(GMVVMEAS,";"))
"RTN","GMVDCVAL",87,0)
 .. I 'GMVOK D
"RTN","GMVDCVAL",88,0)
 ... D MSG("ERROR: Invalid Vital Measurement (V^"_GMVVNUM_"="_GMVVHOLD_")")
"RTN","GMVDCVAL",89,0)
 ... Q
"RTN","GMVDCVAL",90,0)
 .. S GMVVMEAS=$$CNV^GMVDCCNV($P(GMVVMEAS,";"),GMVMSYS,"S",GMVVABBR)
"RTN","GMVDCVAL",91,0)
 .. S $P(@GMVDATA@("V",GMVVNUM),U,2)=GMVVMEAS_";"_GMVVMEAS("PO2")
"RTN","GMVDCVAL",92,0)
 .. S (GMVQNUM,GMVQFIND)=0
"RTN","GMVDCVAL",93,0)
 .. F  S GMVQNUM=$O(@GMVDATA@("Q",GMVVNUM,GMVQNUM)) Q:GMVQNUM'>0  D
"RTN","GMVDCVAL",94,0)
 ... S (GMV,GMVQHOLD)=$G(@GMVDATA@("Q",GMVVNUM,GMVQNUM))
"RTN","GMVDCVAL",95,0)
 ... S GMVQD0=$$QUAIEN^GMVDCUTL(GMV)
"RTN","GMVDCVAL",96,0)
 ... I GMVQD0>0,$O(^GMRD(120.52,"C",GMVVD0,GMVQD0,0))'>0 S GMVQD0=-2
"RTN","GMVDCVAL",97,0)
 ... I GMVQD0'>0 D
"RTN","GMVDCVAL",98,0)
 .... I GMVQD0=-2 D MSG("ERROR: Invalid Qualifier for Vital Type (Q^"_GMVVNUM_U_GMVQNUM_"="_GMVQHOLD_")")
"RTN","GMVDCVAL",99,0)
 .... I GMVQD0'=-2 D MSG("ERROR: Missing or invalid Vitals Qualifier (Q^"_GMVVNUM_U_GMVQNUM_"="_GMVQHOLD_")")
"RTN","GMVDCVAL",100,0)
 .... Q
"RTN","GMVDCVAL",101,0)
 ... E  D
"RTN","GMVDCVAL",102,0)
 .... S GMVQFIND=1
"RTN","GMVDCVAL",103,0)
 .... S $P(@GMVDATA@("Q",GMVVNUM,GMVQNUM),U,1)=GMVQD0
"RTN","GMVDCVAL",104,0)
 .... S GMVQARRY=GMVQARRY_GMVQD0_U
"RTN","GMVDCVAL",105,0)
 .... I GMVSYSBP,$D(GMVSYSBP(GMVQD0))#2 S GMVSYSBP=0
"RTN","GMVDCVAL",106,0)
 .... Q
"RTN","GMVDCVAL",107,0)
 ... Q
"RTN","GMVDCVAL",108,0)
 .. I GMVSYSBP D
"RTN","GMVDCVAL",109,0)
 ... D MSG("ERROR: Systolic only BPs must have a Doppler or Palpated qualifier (V^"_GMVVNUM_"="_GMVVHOLD_")")
"RTN","GMVDCVAL",110,0)
 ... Q
"RTN","GMVDCVAL",111,0)
 .. I 'GMVQFIND,$O(^GMRD(120.52,"C",GMVVD0,0))>0,'$$OMIT^GMVDCVAM(GMVVMEAS) D
"RTN","GMVDCVAL",112,0)
 ... D MSG("WARNING: No valid Qualifiers found (Q^"_GMVVNUM_"^##=Qualifier)")
"RTN","GMVDCVAL",113,0)
 ... Q
"RTN","GMVDCVAL",114,0)
 .. D DUPCHK^GMVDCVAM
"RTN","GMVDCVAL",115,0)
 .. Q
"RTN","GMVDCVAL",116,0)
 . Q
"RTN","GMVDCVAL",117,0)
 I 'GMVVFIND D
"RTN","GMVDCVAL",118,0)
 . D MSG("ERROR: No valid Vital Types / Measurements found (V^##=VitalType^Measurement)")
"RTN","GMVDCVAL",119,0)
 . Q
"RTN","GMVDCVAL",120,0)
 I $O(@GMVDATA@("Q",GMVVLAST)) D
"RTN","GMVDCVAL",121,0)
 . S GMV=$S(GMVVFIND'>0:"ERROR",1:"WARNING")
"RTN","GMVDCVAL",122,0)
 . D MSG(GMV_": There are more Qualifiers than there are VitalTypes / Measurements")
"RTN","GMVDCVAL",123,0)
 . Q
"RTN","GMVDCVAL",124,0)
 Q
"RTN","GMVDCVAL",125,0)
 ;
"RTN","GMVDCVAL",126,0)
ENTERR ; *** Validate Entered in Error data ***
"RTN","GMVDCVAL",127,0)
 I $$FIND1^DIC(200,"","","`"_GMVERRBY)'=GMVERRBY D
"RTN","GMVDCVAL",128,0)
 . D MSG("ERROR: Missing or invalid Entered in Error By parameter")
"RTN","GMVDCVAL",129,0)
 . Q
"RTN","GMVDCVAL",130,0)
 S (GMVINUM,GMVILAST,GMVIFIND)=0
"RTN","GMVDCVAL",131,0)
 F  S GMVINUM=$O(@GMVDATA@("I",GMVINUM)) Q:GMVINUM'>0  D
"RTN","GMVDCVAL",132,0)
 . S GMVILAST=GMVINUM
"RTN","GMVDCVAL",133,0)
 . S (GMVID0,GMVIHOLD)=$G(@GMVDATA@("I",GMVINUM))
"RTN","GMVDCVAL",134,0)
 . I $$FIND1^DIC(120.5,"","","`"_GMVID0)'=GMVID0 D
"RTN","GMVDCVAL",135,0)
 .. D MSG("ERROR: Entered in Error IENS not found (I^"_GMVINUM_"="_GMVIHOLD_")")
"RTN","GMVDCVAL",136,0)
 .. Q
"RTN","GMVDCVAL",137,0)
 . E  D
"RTN","GMVDCVAL",138,0)
 .. I $P($G(^GMR(120.5,GMVID0,2)),U) D
"RTN","GMVDCVAL",139,0)
 ... D MSG("ERROR: Vitals record already marked Entered in Error (I^"_GMVINUM_"="_GMVIHOLD_")")
"RTN","GMVDCVAL",140,0)
 ... Q
"RTN","GMVDCVAL",141,0)
 .. S GMVIFIND=1
"RTN","GMVDCVAL",142,0)
 .. S (GMVRNUM,GMVRFIND)=0
"RTN","GMVDCVAL",143,0)
 .. F  S GMVRNUM=$O(@GMVDATA@("R",GMVINUM,GMVRNUM)) Q:GMVRNUM'>0  D
"RTN","GMVDCVAL",144,0)
 ... S (GMV,GMVRHOLD)=$G(@GMVDATA@("R",GMVINUM,GMVRNUM))
"RTN","GMVDCVAL",145,0)
 ... S GMVRD0=$$REAIEN^GMVDCUTL(GMV)
"RTN","GMVDCVAL",146,0)
 ... I GMVRD0'>0 D
"RTN","GMVDCVAL",147,0)
 .... D MSG("ERROR: Missing or invalid Entered in Error Reason (R^"_GMVINUM_U_GMVRNUM_"="_GMVRHOLD_")")
"RTN","GMVDCVAL",148,0)
 .... Q
"RTN","GMVDCVAL",149,0)
 ... E  D
"RTN","GMVDCVAL",150,0)
 .... S GMVRFIND=1
"RTN","GMVDCVAL",151,0)
 .... S @GMVDATA@("R",GMVINUM,GMVRNUM)=GMVRD0
"RTN","GMVDCVAL",152,0)
 .... Q
"RTN","GMVDCVAL",153,0)
 ... Q
"RTN","GMVDCVAL",154,0)
 .. I 'GMVRFIND D
"RTN","GMVDCVAL",155,0)
 ... D MSG("ERROR: No valid Entered in Error Reasons found (R^"_GMVINUM_"^##=EnteredInErrorReason)")
"RTN","GMVDCVAL",156,0)
 ... Q
"RTN","GMVDCVAL",157,0)
 .. Q
"RTN","GMVDCVAL",158,0)
 . Q
"RTN","GMVDCVAL",159,0)
 I 'GMVIFIND D
"RTN","GMVDCVAL",160,0)
 . D MSG("ERROR: No valid Entered in Error IENS found (I^##=EnteredInError)")
"RTN","GMVDCVAL",161,0)
 . Q
"RTN","GMVDCVAL",162,0)
 I $O(@GMVDATA@("R",GMVILAST)) D
"RTN","GMVDCVAL",163,0)
 . S GMV=$S(GMVIFIND'>0:"ERROR",1:"WARNING")
"RTN","GMVDCVAL",164,0)
 . D MSG(GMV_": There are more Entered in Error Reasons than there are Entered in Error IENS")
"RTN","GMVDCVAL",165,0)
 . Q
"RTN","GMVDCVAL",166,0)
 Q
"RTN","GMVDCVAL",167,0)
 ;
"RTN","GMVDCVAL",168,0)
MSG(X) ; *** Add a line to the message array ***
"RTN","GMVDCVAL",169,0)
 S (GMVMSG,RESULT(-1))=1+$G(RESULT(-1),0)
"RTN","GMVDCVAL",170,0)
 S RESULT(GMVMSG)=X
"RTN","GMVDCVAL",171,0)
 I $P(X,":")="ERROR" S RESULT(0)="ERROR"
"RTN","GMVDCVAL",172,0)
 Q
"RTN","GMVDCVAL",173,0)
 ;
"RTN","GMVDCVAL",174,0)
BPSYSQ ;;Qualifiers that must be present if only systolic BP is present
"RTN","GMVDCVAL",175,0)
 ;;DOPPLER
"RTN","GMVDCVAL",176,0)
 ;;PALPATED
"RTN","GMVDCVAL",177,0)
 ;;
"RTN","GMVDCVAM")
0^190^B13500702
"RTN","GMVDCVAM",1,0)
GMVDCVAM ;HOIFO/DAD,FT-VITALS COMPONENT: VALIDATE DATA (CONT.) ;9/26/00  15:31
"RTN","GMVDCVAM",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVDCVAM",3,0)
 ;
"RTN","GMVDCVAM",4,0)
 ; This routine uses the following IAs:
"RTN","GMVDCVAM",5,0)
 ; #10104 - ^XLFSTR calls       (supported)
"RTN","GMVDCVAM",6,0)
 ;
"RTN","GMVDCVAM",7,0)
DUPCHK ; *** Check for duplicate records ***
"RTN","GMVDCVAM",8,0)
 N GMVD0,GMVDATA,GMVDUP
"RTN","GMVDCVAM",9,0)
 S (GMVD0,GMVDUP)=0
"RTN","GMVDCVAM",10,0)
 D DUPCH
"RTN","GMVDCVAM",11,0)
 F  S GMVD0=$O(^GMR(120.5,"AA",GMVDFN,GMVVD0,9999999-GMVDTDUN,GMVD0)) Q:(GMVD0'>0)!(GMVDUP>0)  I $P($G(^GMR(120.5,GMVD0,2)),U)'>0 D
"RTN","GMVDCVAM",12,0)
 . S GMVDATA=$G(^GMR(120.5,GMVD0,0))
"RTN","GMVDCVAM",13,0)
 . I $P(GMVDATA,U,5,6)=(GMVHOSPL_U_GMVENTBY),$P(GMVDATA,U,8)=$P(GMVVMEAS,";") D DUPCH
"RTN","GMVDCVAM",14,0)
 . Q
"RTN","GMVDCVAM",15,0)
 S ^TMP($J,"GMVXREF",GMVVABBR,GMVQARRY)=""
"RTN","GMVDCVAM",16,0)
 Q
"RTN","GMVDCVAM",17,0)
 ;
"RTN","GMVDCVAM",18,0)
DUPCH ; *** Get qualifier lists for duplicate check ***
"RTN","GMVDCVAM",19,0)
 I "^BP^CG^P^R^"[(U_GMVVABBR_U) D  ; Vital types allowed to have dups
"RTN","GMVDCVAM",20,0)
 . N GMVFLAG,GMVQD0,GMVSUB,GMVSUP
"RTN","GMVDCVAM",21,0)
 . I GMVD0>0 D
"RTN","GMVDCVAM",22,0)
 .. S GMVQD0=0,GMVQARRY(0)=U
"RTN","GMVDCVAM",23,0)
 .. S GMVDUP(0)=$S($O(^GMR(120.5,GMVD0,5,"B",GMVQD0))>0:1,1:0)
"RTN","GMVDCVAM",24,0)
 .. F  S GMVQD0=$O(^GMR(120.5,GMVD0,5,"B",GMVQD0)) Q:GMVQD0'>0  D
"RTN","GMVDCVAM",25,0)
 ... S GMVQARRY(0)=GMVQARRY(0)_GMVQD0_U
"RTN","GMVDCVAM",26,0)
 ... Q
"RTN","GMVDCVAM",27,0)
 .. S GMVDUP(0)=$$DUPC(GMVQARRY(0),GMVQARRY,GMVDUP(0))
"RTN","GMVDCVAM",28,0)
 .. Q
"RTN","GMVDCVAM",29,0)
 . E  D
"RTN","GMVDCVAM",30,0)
 .. S GMVQARRY(0)=""
"RTN","GMVDCVAM",31,0)
 .. S GMVDUP(0)=$S($O(^TMP($J,"GMVXREF",GMVVABBR,GMVQARRY(0)))]"":1,1:0)
"RTN","GMVDCVAM",32,0)
 .. F  S GMVQARRY(0)=$O(^TMP($J,"GMVXREF",GMVVABBR,GMVQARRY(0))) Q:(GMVQARRY(0)="")!(GMVDUP(0)'>0)  S GMVDUP(0)=$$DUPC(GMVQARRY(0),GMVQARRY,GMVDUP(0))
"RTN","GMVDCVAM",33,0)
 .. Q
"RTN","GMVDCVAM",34,0)
 . I GMVDUP(0)>0 D DUPMSG
"RTN","GMVDCVAM",35,0)
 . Q
"RTN","GMVDCVAM",36,0)
 E  D
"RTN","GMVDCVAM",37,0)
 . I GMVD0>0 D
"RTN","GMVDCVAM",38,0)
 .. D DUPMSG
"RTN","GMVDCVAM",39,0)
 .. Q
"RTN","GMVDCVAM",40,0)
 . E  D
"RTN","GMVDCVAM",41,0)
 .. I $D(^TMP($J,"GMVXREF",GMVVABBR)) D DUPMSG
"RTN","GMVDCVAM",42,0)
 .. Q
"RTN","GMVDCVAM",43,0)
 . Q
"RTN","GMVDCVAM",44,0)
 Q
"RTN","GMVDCVAM",45,0)
 ;
"RTN","GMVDCVAM",46,0)
DUPC(GMVQ1,GMVQ2,GMVDUP) ;
"RTN","GMVDCVAM",47,0)
 ; *** Compare qualifiers look for duplicates ***
"RTN","GMVDCVAM",48,0)
 N GMV,GMVSUB,GMVSUP
"RTN","GMVDCVAM",49,0)
 S GMVSUP=$S($L(GMVQ1,U)>$L(GMVQ2,U):GMVQ1,1:GMVQ2)
"RTN","GMVDCVAM",50,0)
 S GMVSUB=$S($L(GMVQ1,U)<$L(GMVQ2,U):GMVQ1,1:GMVQ2)
"RTN","GMVDCVAM",51,0)
 I $L(GMVQ1,U)=$L(GMVQ2,U) S GMVSUP=GMVQ1,GMVSUB=GMVQ2
"RTN","GMVDCVAM",52,0)
 F GMV=2:1:$L(GMVSUB,U)-1 I GMVSUP'[(U_$P(GMVSUB,U,GMV)_U) S GMVDUP=0 Q
"RTN","GMVDCVAM",53,0)
 Q GMVDUP
"RTN","GMVDCVAM",54,0)
 ;
"RTN","GMVDCVAM",55,0)
DUPMSG ; *** Duplicate message ***
"RTN","GMVDCVAM",56,0)
 S GMVDUP=1
"RTN","GMVDCVAM",57,0)
 D MSG^GMVDCVAL("ERROR: Duplicate Vital Measurement data found (V^"_GMVVNUM_"="_GMVVHOLD_")")
"RTN","GMVDCVAM",58,0)
 Q
"RTN","GMVDCVAM",59,0)
 ;
"RTN","GMVDCVAM",60,0)
BP ; *** Validate Systolic only Blood Pressure data ***
"RTN","GMVDCVAM",61,0)
 I GMVVABBR'="BP" Q
"RTN","GMVDCVAM",62,0)
 I $P(GMVVMEAS,";")?1.N S GMVSYSBP=1
"RTN","GMVDCVAM",63,0)
 Q
"RTN","GMVDCVAM",64,0)
 ;
"RTN","GMVDCVAM",65,0)
PO2 ; *** Validate Supplemental O2 data ***
"RTN","GMVDCVAM",66,0)
 S GMVVMEAS("PO2")=""
"RTN","GMVDCVAM",67,0)
 I GMVVABBR'="PO2" Q
"RTN","GMVDCVAM",68,0)
 I $$OMIT(GMVVMEAS),($P(GMVVMEAS,";",2)]"")!($P(GMVVMEAS,";",3)]"") D
"RTN","GMVDCVAM",69,0)
 . D MSG^GMVDCVAL("ERROR: Supplemental O2 data not allowed if Pulse Oximetry is omitted (V^"_GMVVNUM_"="_GMVVHOLD_")")
"RTN","GMVDCVAM",70,0)
 . Q
"RTN","GMVDCVAM",71,0)
 I $P(GMVVMEAS,";",2)]"" D
"RTN","GMVDCVAM",72,0)
 . I ($P(GMVVMEAS,";",2)'<.5)&($P(GMVVMEAS,";",2)'>20) D
"RTN","GMVDCVAM",73,0)
 .. S GMVVMEAS("PO2")=$P(GMVVMEAS,";",2)_"L/min"
"RTN","GMVDCVAM",74,0)
 .. Q
"RTN","GMVDCVAM",75,0)
 . E  D
"RTN","GMVDCVAM",76,0)
 .. D MSG^GMVDCVAL("ERROR: O2 Flow Rate must be in the range 0.5-20 (V^"_GMVVNUM_"="_GMVVHOLD_")")
"RTN","GMVDCVAM",77,0)
 .. Q
"RTN","GMVDCVAM",78,0)
 . Q
"RTN","GMVDCVAM",79,0)
 I $P(GMVVMEAS,";",3)]"" D
"RTN","GMVDCVAM",80,0)
 . I ($P(GMVVMEAS,";",3)'<0)&($P(GMVVMEAS,";",3)'>100) D
"RTN","GMVDCVAM",81,0)
 .. S GMVVMEAS("PO2")=GMVVMEAS("PO2")_$S(GMVVMEAS("PO2")]"":" ",1:"")_$P(GMVVMEAS,";",3)_"%"
"RTN","GMVDCVAM",82,0)
 .. Q
"RTN","GMVDCVAM",83,0)
 . E  D
"RTN","GMVDCVAM",84,0)
 .. D MSG^GMVDCVAL("ERROR: Percent O2 Concentration must be in the range 0-100 (V^"_GMVVNUM_"="_GMVVHOLD_")")
"RTN","GMVDCVAM",85,0)
 .. Q
"RTN","GMVDCVAM",86,0)
 . Q
"RTN","GMVDCVAM",87,0)
 S GMVVMEAS=$P(GMVVMEAS,";")
"RTN","GMVDCVAM",88,0)
 Q
"RTN","GMVDCVAM",89,0)
 ;
"RTN","GMVDCVAM",90,0)
OMIT(GMVVMEAS) ;
"RTN","GMVDCVAM",91,0)
 ; *** Determine if measurement was omitted ***
"RTN","GMVDCVAM",92,0)
 ; Input:
"RTN","GMVDCVAM",93,0)
 ;  GMVVMEAS = A vital measurement
"RTN","GMVDCVAM",94,0)
 ; Output:
"RTN","GMVDCVAM",95,0)
 ;  1 - Measurement was omitted, 0 - Measurement was not omitted
"RTN","GMVDCVAM",96,0)
 Q "^UNAVAILABLE^PASS^REFUSED^"[(U_$$UP^XLFSTR($P(GMVVMEAS,";"))_U)
"RTN","GMVDCVAM",97,0)
 ;
"RTN","GMVDS0")
0^199^B20439902
"RTN","GMVDS0",1,0)
GMVDS0 ;HIRMFO/YH,FT-DISPLAY LATEST VITALS/MEASUREMENTS ;7/3/02  00:42
"RTN","GMVDS0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVDS0",3,0)
 ;
"RTN","GMVDS0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVDS0",5,0)
 ; #10061 - ^VADPT calls     (supported)
"RTN","GMVDS0",6,0)
 ; #10104 - ^XLFSTR calls    (supported)
"RTN","GMVDS0",7,0)
 ;
"RTN","GMVDS0",8,0)
EN1 ; ENTRY TO DISPLAY VITALS {called from GMVDS1}
"RTN","GMVDS0",9,0)
 N GAPICAL,GRADIAL,GBRACHI,OK
"RTN","GMVDS0",10,0)
 S GAPICAL=$O(^GMRD(120.52,"B","APICAL",0)),GRADIAL=$O(^GMRD(120.52,"B","RADIAL",0)),GBRACHI=$O(^GMRD(120.52,"B","BRACHIAL",0))
"RTN","GMVDS0",11,0)
 F GMRX=1:1:$L(GMRSTR,";") S X=$P(GMRSTR,";",GMRX) Q:'$D(^GMRD(120.51,"C",X))  S GMR(X)=$O(^GMRD(120.51,"C",X,"")),Y=$P($G(^GMRD(120.51,GMR(X),0)),"^") Q:Y=""
"RTN","GMVDS0",12,0)
 K GMRDT,GMRVWT,GMRVHT
"RTN","GMVDS0",13,0)
 S X=""
"RTN","GMVDS0",14,0)
 F  S X=$O(GMR(X)) Q:X=""  S GMRDATS="" I GMR(X)'="" F GMRDAT=0:0 S GMRDAT=$O(^GMR(120.5,"AA",DFN,+GMR(X),GMRDAT)) Q:$S(GMRDAT'>0:1,GMRDATS>0:1,1:0)  D SETDATAR
"RTN","GMVDS0",15,0)
 I '($D(GMRDATA)\10) W !,"There are no results to report " G Q
"RTN","GMVDS0",16,0)
 F X="T","P","R","PO2","BP","HT","WT","CVP","CG","PN" I $D(GMRDATA(X)) S GMRVDT="",(GMRVDT(1),GMVD)=0 F  S GMVD=$O(GMRDATA(X,GMVD)) Q:GMVD'>0  D WRTDT S GMVD(1)=0 F  S GMVD(1)=$O(GMRDATA(X,GMVD,GMVD(1))) Q:GMVD(1)'>0  D
"RTN","GMVDS0",17,0)
 . S GMRVX(0)=GMRDATA(X,GMVD,GMVD(1)) S GMRVX=X D EN1^GMVSAS0
"RTN","GMVDS0",18,0)
 . W ! W:GMRVDT(1)=0 $S(X="BP":"B/P",X="P":"Pulse",X="R":"Resp.",X="T":"Temp.",X="HT":"Ht.",X="CG":"Circ/Girth",X="WT":"Wt.",X="PO2":"Pulse Ox",X="PN":"Pain",1:X)_": "
"RTN","GMVDS0",19,0)
 . I GMRVDT(1)=0 W ?12,"("_GMRVDT_") " S GMRVDT(1)=1
"RTN","GMVDS0",20,0)
 . I X="T" W ?29,GMRVX(0)_" F  ("_$J(+GMRVX(0)-32*5/9,0,1)_" C)"
"RTN","GMVDS0",21,0)
 . I X="WT" W ?29,GMRVX(0)_" lb  ("_$J(GMRVX(0)/2.2,0,2)_" kg)" S GMRVWT=GMRVX(0)/2.2
"RTN","GMVDS0",22,0)
 . I X="HT" W ?29,$S(GMRVX(0)\12:GMRVX(0)\12_" ft ",1:"")_$S(GMRVX(0)#12:GMRVX(0)#12_" in",1:"")_" ("_$J(GMRVX(0)*2.54,0,2)_" cm)" S GMRVHT=(GMRVX(0)*2.54)/100
"RTN","GMVDS0",23,0)
 . I X="CG" W ?29,GMRVX(0)_" in ("_$J(+GMRVX(0)/.3937,0,2)_" cm)"
"RTN","GMVDS0",24,0)
 . I X="CVP" W ?29,GMRVX(0)_" cmH2O ("_$J(GMRVX(0)/1.36,0,1)_" mmHg)"
"RTN","GMVDS0",25,0)
 . I X="PO2" W ?29,GMRVX(0)_"% "
"RTN","GMVDS0",26,0)
 . I X="P"!(X="R")!(X="BP") W ?29,GMRVX(0)
"RTN","GMVDS0",27,0)
 . I X="PN" D
"RTN","GMVDS0",28,0)
 . . I "UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(GMRVX(0)) W ?9,GMRVX(0) Q
"RTN","GMVDS0",29,0)
 . . I GMRVX(0)=0 W ?29,GMRVX(0)_" - No pain " Q
"RTN","GMVDS0",30,0)
 . . I GMRVX(0)=99 W ?29,GMRVX(0)_" - Unable to respond " Q
"RTN","GMVDS0",31,0)
 . . I GMRVX(0)=10 W ?29,GMRVX(0)_" - Worst imaginable pain " Q
"RTN","GMVDS0",32,0)
 . . W ?29,GMRVX(0) Q
"RTN","GMVDS0",33,0)
 . W $S('$D(GMRVX(1)):"",'GMRVX(1):"",1:"*") K GMRVX
"RTN","GMVDS0",34,0)
 . D CHAR
"RTN","GMVDS0",35,0)
 . I X="WT",$G(GMRVWT)>0,$G(GMRVHT)>0 W !,"BMI: " S GMRVHT(1)=$J(GMRVWT/(GMRVHT*GMRVHT),0,0) W ?29,GMRVHT(1)_$S(GMRVHT(1)>27:"*",1:"")
"RTN","GMVDS0",36,0)
 . Q
"RTN","GMVDS0",37,0)
Q W !
"RTN","GMVDS0",38,0)
 K GMRVWT,GMRVHT,GMR,GMVD,GBP,GMRVARY,GMRVDA,GMRDATA,GMVDM,GLIN,GMRZZ Q:$D(GLOC)
"RTN","GMVDS0",39,0)
 K GMRVDT,GMROUT,DFN,%Y,GMRL,GMRDT,DIC,GMRDAT,GMRDATS,GMRSTR,GMRX,GMRVX,POP D KVAR^VADPT K VA
"RTN","GMVDS0",40,0)
 Q
"RTN","GMVDS0",41,0)
SETDATAR ;
"RTN","GMVDS0",42,0)
 S Y=0
"RTN","GMVDS0",43,0)
 F  S Y=$O(^GMR(120.5,"AA",DFN,GMR(X),GMRDAT,Y)) Q:Y'>0!GMRDATS  I '$D(^GMR(120.5,Y,2)),$P(^GMR(120.5,Y,0),"^",8)'="" D SETNODE
"RTN","GMVDS0",44,0)
 D:X="BP"!(X="P") SETBP^GMVDS2 Q
"RTN","GMVDS0",45,0)
SETNODE ; {called from GMVDS2}
"RTN","GMVDS0",46,0)
 N G
"RTN","GMVDS0",47,0)
 S GMRL=$S($D(^GMR(120.5,Y,0)):^(0),1:"")
"RTN","GMVDS0",48,0)
 ;N G S G=$P(GMRL,"^",8) Q:'(G>0!(G<0)!($E(G)="0"))
"RTN","GMVDS0",49,0)
 I X'="P" S G=$P(GMRL,"^",8) Q:"REFUSEDPASSUNAVAILABLE"[$$UP^XLFSTR(G)
"RTN","GMVDS0",50,0)
 I X="P" S OK=0,G=$P(GMRL,"^",8) D  Q:'OK
"RTN","GMVDS0",51,0)
 . I "REFUSEDPASSUNAVAILABLE"[$$UP^XLFSTR(G) Q
"RTN","GMVDS0",52,0)
 . I '$D(^GMR(120.5,Y,5,"B")) S OK=1 Q
"RTN","GMVDS0",53,0)
 . I $D(^GMR(120.5,Y,5,"B",GAPICAL)) S OK=1 Q
"RTN","GMVDS0",54,0)
 . I $D(^GMR(120.5,Y,5,"B",GBRACHI)) S OK=1 Q
"RTN","GMVDS0",55,0)
 . I $D(^GMR(120.5,Y,5,"B",GRADIAL)) S OK=1
"RTN","GMVDS0",56,0)
 S GMRL1=$P(GMRL,"^") ;adding trailing zeros to time if necessary
"RTN","GMVDS0",57,0)
 S $P(GMRL1,".",2)=$P(GMRL1,".",2)_"0000"
"RTN","GMVDS0",58,0)
 S $P(GMRL1,".",2)=$E($P(GMRL1,".",2),1,4)
"RTN","GMVDS0",59,0)
 S $P(GMRL,"^")=GMRL1
"RTN","GMVDS0",60,0)
 K GMRL1
"RTN","GMVDS0",61,0)
 I GMRL'="" S GMRDATA(X,$P(GMRL,"^"),Y)=$P(GMRL,"^",8),GMRDATS=1 I $P($G(^GMR(120.5,Y,5,0)),"^",4)>0 D CHAR^GMVCHAR(Y,.GMRVARY,GMR(X))
"RTN","GMVDS0",62,0)
 Q
"RTN","GMVDS0",63,0)
WRTDT ;
"RTN","GMVDS0",64,0)
 S GMRVDT=$E(GMVD,4,5)_"/"_$E(GMVD,6,7)_"/"_$E(GMVD,2,3)_"@"_$E($P(GMVD,".",2),1,2)_$S($E($P(GMVD,".",2),3,4)'="":":"_$E($P(GMVD,".",2),3,4),1:"")
"RTN","GMVDS0",65,0)
 Q
"RTN","GMVDS0",66,0)
CHAR ;
"RTN","GMVDS0",67,0)
 S GMRZZ=$$WRITECH^GMVCHAR(GMVD(1),.GMRVARY,5) S:GMRZZ'=""&(X'="PO2") GMRZZ="("_GMRZZ_")"
"RTN","GMVDS0",68,0)
 I X="PO2",$P(^GMR(120.5,GMVD(1),0),"^",10)'="" S GMRVPO=$P(^(0),"^",10) W "with supplemental O2 "_$S(GMRVPO["l/min":$P(GMRVPO," l/min")_"L/min",1:"")_$S(GMRVPO["l/min":$P(GMRVPO," l/min",2),1:GMRVPO)_" " W:GMRZZ'="" !,?29,"- ",GMRZZ K GMRZZ Q
"RTN","GMVDS0",69,0)
 W:GMRZZ'="" GMRZZ K GMRZZ
"RTN","GMVDS0",70,0)
 Q
"RTN","GMVDS1")
0^200^B17212354
"RTN","GMVDS1",1,0)
GMVDS1 ;HOIFO/YH,FT-CURRENT VITALS BY PATIENT OR LOCATION ;10/25/02  10:20
"RTN","GMVDS1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVDS1",3,0)
 ;
"RTN","GMVDS1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVDS1",5,0)
 ; #10039 - FILE 42 references     (supported)
"RTN","GMVDS1",6,0)
 ; #10040 - FILE 44 references     (supported)
"RTN","GMVDS1",7,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVDS1",8,0)
 ; #10090 - FILE 4 references      (supported)
"RTN","GMVDS1",9,0)
 ; #10103 - ^XLFDT calls           (supported)
"RTN","GMVDS1",10,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVDS1",11,0)
 ;
"RTN","GMVDS1",12,0)
EN1(RESULT,GMVDATA) ; [RPC entry point]
"RTN","GMVDS1",13,0)
 ; GMV LATEST VITALS FOR PATIENT & GMV LATEST VITALS BY LOCATION
"RTN","GMVDS1",14,0)
 ; DFN      - patient internal entry number
"RTN","GMVDS1",15,0)
 ; GMVDEV   - device name
"RTN","GMVDS1",16,0)
 ; GMVIEN   - device internal entry number
"RTN","GMVDS1",17,0)
 ; GMVPDT   - date/time to print the report
"RTN","GMVDS1",18,0)
 ; GMVWARD  - ward internal entry number
"RTN","GMVDS1",19,0)
 ; GMVHLOC  - hospital location internal entry number
"RTN","GMVDS1",20,0)
 ;
"RTN","GMVDS1",21,0)
 N DFN,GMVDEV,GMVIEN,GMVPDT,GMVWARD,GMVHLOC
"RTN","GMVDS1",22,0)
 S DFN=+$P(GMVDATA,U,1),GMVDEV=$P(GMVDATA,U,5),GMVIEN=+$P(GMVDATA,U,6),GMVPDT=$P(GMVDATA,U,7),GMVWARD=$P(GMVDATA,U,8),GMVHLOC=$P(GMVDATA,U,9)
"RTN","GMVDS1",23,0)
 S ZTIO=GMVDEV ;device
"RTN","GMVDS1",24,0)
 S ZTDTH=$S($G(GMVPDT)>0:GMVPDT,1:$$NOW^XLFDT()) ;date/time to print
"RTN","GMVDS1",25,0)
 S ZTRTN="EN2^GMVDS1"
"RTN","GMVDS1",26,0)
 S (ZTSAVE("DFN"),ZTSAVE("GMVWARD"),ZTSAVE("GMVHLOC"))=""
"RTN","GMVDS1",27,0)
 I DFN>0 S ZTDESC="Latest Vitals Display for a Patient"
"RTN","GMVDS1",28,0)
 I GMVWARD>0 S ZTDESC="Latest Vitals by Location"
"RTN","GMVDS1",29,0)
 D ^%ZTLOAD
"RTN","GMVDS1",30,0)
 S RESULT=$S($G(ZTSK)>0:"Report sent to device. Task #: "_ZTSK,1:"Unable to task the report.")
"RTN","GMVDS1",31,0)
 K ZTSK,ZTIO,ZTDTH,ZTSAVE,ZTDESC,ZTRTN
"RTN","GMVDS1",32,0)
 Q
"RTN","GMVDS1",33,0)
EN2 ; Start the report output
"RTN","GMVDS1",34,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","GMVDS1",35,0)
 S GMVEDB=$S(DFN>0:"P",1:"A") ;P is one patient, A is whole ward
"RTN","GMVDS1",36,0)
 S GMVWARD(1)=$S(GMVWARD>0:$P($G(^DIC(42,GMVWARD,0)),U,1),1:"") ;ward name
"RTN","GMVDS1",37,0)
 K ^TMP($J)
"RTN","GMVDS1",38,0)
 I $G(GMVEDB)="P" D
"RTN","GMVDS1",39,0)
 .D DEM^VADPT,INP^VADPT
"RTN","GMVDS1",40,0)
 .S GMRRMBD=$S(VAIN(5)'="":VAIN(5),1:"  BLANK") ;roombed
"RTN","GMVDS1",41,0)
 .S GMVNAME=$S(VADM(1)'="":VADM(1),1:"  BLANK") ;patient name
"RTN","GMVDS1",42,0)
 .S GMVWARD=$P(VAIN(4),"^") ;ward ien
"RTN","GMVDS1",43,0)
 .S GMVWARD(1)=$P(VAIN(4),"^",2) ;ward name
"RTN","GMVDS1",44,0)
 .D KVAR^VADPT K VA ;kill VADPT variables
"RTN","GMVDS1",45,0)
 .S ^TMP($J,GMRRMBD,GMVNAME,DFN)=""
"RTN","GMVDS1",46,0)
 E  D WARD
"RTN","GMVDS1",47,0)
AE ;
"RTN","GMVDS1",48,0)
 S (GMROUT,GMVPAGE)=0
"RTN","GMVDS1",49,0)
 S GMVDASH=$$REPEAT^XLFSTR("-",80) ;line of dashes
"RTN","GMVDS1",50,0)
 D NOW^%DTC
"RTN","GMVDS1",51,0)
 S Y=% X ^DD("DD") S GMRPDT=$P(Y,"@")_" ("_$P($P(Y,"@",2),":",1,2)_")"
"RTN","GMVDS1",52,0)
 S GMRSTR="T;P;R;BP;WT;HT;CVP;CG;PO2;PN"
"RTN","GMVDS1",53,0)
 S GLOC=1 ;<-might be dead code
"RTN","GMVDS1",54,0)
 U IO
"RTN","GMVDS1",55,0)
 D HDR
"RTN","GMVDS1",56,0)
 I $O(^TMP($J,""))="" W !,"THERE IS NO DATA FOR THIS REPORT" D Q1 Q
"RTN","GMVDS1",57,0)
 S GMRRMBD=""
"RTN","GMVDS1",58,0)
 F  S GMRRMBD=$O(^TMP($J,GMRRMBD)) Q:GMRRMBD=""!GMROUT  S GMVNAME="" F  S GMVNAME=$O(^TMP($J,GMRRMBD,GMVNAME)) Q:GMVNAME=""!GMROUT  F DFN=0:0 S DFN=$O(^TMP($J,GMRRMBD,GMVNAME,DFN)) Q:DFN'>0  D PRT Q:GMROUT
"RTN","GMVDS1",59,0)
Q1 ; Kill variables and quit
"RTN","GMVDS1",60,0)
 K ^TMP($J),DFN,GMRADM,GMRDA,GMVDASH,GMVEDB,GMVNAME,GMRNM,GMROUT,GMRPDT,GMVPAGE,GMRRMBD,GMRPR,GMRVDT,GMRVTDA,GMVWARD,GMRX,GMRSITE,GMRSP,GMRVX,GMVHLOC,POP,GMRDT,%,%T,GDT
"RTN","GMVDS1",61,0)
 K GSTRIN,GMRSTR,GMROUT,GMRVOERR,GMRVSTOP,GMRVSTRT,GLOC,GDATA
"RTN","GMVDS1",62,0)
 D KVAR^VADPT
"RTN","GMVDS1",63,0)
 D Q^GMVDS0
"RTN","GMVDS1",64,0)
 D ^%ZISC
"RTN","GMVDS1",65,0)
 Q
"RTN","GMVDS1",66,0)
HDR ; Report Header
"RTN","GMVDS1",67,0)
 W:$Y>0 @IOF
"RTN","GMVDS1",68,0)
 S GMVPAGE=GMVPAGE+1
"RTN","GMVDS1",69,0)
 I GMVEDB="A" W !,GMRPDT,?20,"VITALS REPORT FOR UNIT: "_GMVWARD(1) W:GMVHLOC>0 " - "_$$GET1^DIQ(4,+$$GET1^DIQ(44,+GMVHLOC,3,"I"),.01,"I")
"RTN","GMVDS1",70,0)
 I GMVEDB="P" W !,GMRPDT,?28,"LATEST VITALS REPORT"
"RTN","GMVDS1",71,0)
 W ?72,"PAGE ",GMVPAGE
"RTN","GMVDS1",72,0)
 W !,GMVDASH,!
"RTN","GMVDS1",73,0)
 Q
"RTN","GMVDS1",74,0)
PRT ; Body of report
"RTN","GMVDS1",75,0)
 D:IOSL<($Y+6)!($E(IOST)'="P") HDR Q:GMROUT
"RTN","GMVDS1",76,0)
 D DEM^VADPT K GMRDT
"RTN","GMVDS1",77,0)
 W !,$S(GMRRMBD'="  BLANK":$E(GMRRMBD,1,10),1:""),?12,$E(GMVNAME,1,20),?34,$P(VADM(2),U,2),!
"RTN","GMVDS1",78,0)
 D EN1^GMVDS0,Q2
"RTN","GMVDS1",79,0)
 Q
"RTN","GMVDS1",80,0)
Q2 ; Kill variables
"RTN","GMVDS1",81,0)
 K GMRLIN,GMRJ,GBP,GMR,GMRL,GMRDT,GMRDAT,GMRDATS,GMRI,GMRX,GMRY,GMRVX,GSITE,GQUAL
"RTN","GMVDS1",82,0)
 Q
"RTN","GMVDS1",83,0)
WARD ; Build TMP global for patients on ward
"RTN","GMVDS1",84,0)
 ; set ^TMP($J,roombed,patient name,DFN)=""
"RTN","GMVDS1",85,0)
 ; GMVWARD(1) is the NAME of FILE 42 entry
"RTN","GMVDS1",86,0)
 ; GMVRMBD(n) is an array of room numbers on the ward (e.g, GMVRMBD(200))
"RTN","GMVDS1",87,0)
 ; GMVEDB is a code for the type of sort
"RTN","GMVDS1",88,0)
 ;        A = all patients on a ward
"RTN","GMVDS1",89,0)
 ;        S = selected roombeds on a ward
"RTN","GMVDS1",90,0)
 ;        P = an individual patient
"RTN","GMVDS1",91,0)
 K ^TMP($J)
"RTN","GMVDS1",92,0)
 S DFN=0
"RTN","GMVDS1",93,0)
 F  S DFN=$O(^DPT("CN",GMVWARD(1),DFN)) Q:DFN=""  D
"RTN","GMVDS1",94,0)
 .D DEM^VADPT,INP^VADPT
"RTN","GMVDS1",95,0)
 .S GMVRMBD=$S(VAIN(5)'="":VAIN(5),1:"  BLANK") ;roombed
"RTN","GMVDS1",96,0)
 .S GMVNAME=$S(VADM(1)'="":VADM(1),1:"  BLANK")  ;patient name
"RTN","GMVDS1",97,0)
 .D KVAR^VADPT K VA
"RTN","GMVDS1",98,0)
 .S:$S("Aa"[GMVEDB:1,$D(GMVROOM($P(GMVRMBD,"-"))):1,1:0) ^TMP($J,GMVRMBD,GMVNAME,DFN)=""
"RTN","GMVDS1",99,0)
 .Q
"RTN","GMVDS1",100,0)
 Q
"RTN","GMVDS2")
0^201^B3421820
"RTN","GMVDS2",1,0)
GMVDS2 ;HOIFO/RM,YH,FT-VITAL SIGNS DISPLAY ;12/27/01  10:55
"RTN","GMVDS2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVDS2",3,0)
 ;
"RTN","GMVDS2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVDS2",5,0)
 ; #10104 - ^XLFSTR calls    (supported)
"RTN","GMVDS2",6,0)
 ;
"RTN","GMVDS2",7,0)
SETBP ; {called from GMVDS0}
"RTN","GMVDS2",8,0)
 S GDT=GMRDAT,GDATE=GMRDAT+.00000014
"RTN","GMVDS2",9,0)
 F  S GMRDAT=$O(^GMR(120.5,"AA",DFN,GMR(X),GMRDAT)) Q:GMRDAT'>0!(GMRDAT>GDATE)  S Y=0 F  S Y=$O(^GMR(120.5,"AA",DFN,GMR(X),GMRDAT,Y)) Q:Y'>0  I '$D(^GMR(120.5,+Y,2)) D:X="BP" SETNODE^GMVDS0 D:X="P" SETP
"RTN","GMVDS2",10,0)
 S GMRDAT=GDT K GDT,GDATE
"RTN","GMVDS2",11,0)
 Q
"RTN","GMVDS2",12,0)
SETP ;DISPLAY MULTIPLE PULSE
"RTN","GMVDS2",13,0)
 S GMRL=$S($D(^GMR(120.5,Y,0)):^(0),1:"")
"RTN","GMVDS2",14,0)
 N GG S GG=$P(GMRL,"^",8),OK=0 D  Q:'OK
"RTN","GMVDS2",15,0)
 . I "REFUSEDPASSUNAVAILABLE"[$$UP^XLFSTR(GG) Q
"RTN","GMVDS2",16,0)
 . I '$D(^GMR(120.5,Y,5,"B")) S OK=1 Q
"RTN","GMVDS2",17,0)
 . I $D(^GMR(120.5,Y,5,"B",GAPICAL)) S OK=1 Q
"RTN","GMVDS2",18,0)
 . I $D(^GMR(120.5,Y,5,"B",GBRACHI)) S OK=1 Q
"RTN","GMVDS2",19,0)
 . I $D(^GMR(120.5,Y,5,"B",GRADIAL)) S OK=1
"RTN","GMVDS2",20,0)
 S GMRL1=$P(GMRL,"^") ;adding trailing zeros to time if necessary
"RTN","GMVDS2",21,0)
 S $P(GMRL1,".",2)=$P(GMRL1,".",2)_"0000"
"RTN","GMVDS2",22,0)
 S $P(GMRL1,".",2)=$E($P(GMRL1,".",2),1,4)
"RTN","GMVDS2",23,0)
 S $P(GMRL,"^")=GMRL1
"RTN","GMVDS2",24,0)
 K GMRL1
"RTN","GMVDS2",25,0)
 I GMRL'="" S GMRDATA(X,$P(GMRL,"^"),Y)=$P(GMRL,"^",8),GMRDATS=1 I $P($G(^GMR(120.5,Y,5,0)),"^",4)>0 D CHAR^GMVCHAR(Y,.GMRVARY,GMR(X))
"RTN","GMVDS2",26,0)
 Q
"RTN","GMVER0")
0^202^B9040069
"RTN","GMVER0",1,0)
GMVER0 ;HOIFO/FT-VITALS ENTERED IN ERROR FOR A PATIENT ;10/25/02  10:26
"RTN","GMVER0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVER0",3,0)
 ;
"RTN","GMVER0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVER0",5,0)
 ; #10061 - ^VADPT calls        (supported)
"RTN","GMVER0",6,0)
 ; #10103 - ^XLFDT calls        (supported)
"RTN","GMVER0",7,0)
 ; #10104 - ^XLFSTR calls       (supported)
"RTN","GMVER0",8,0)
 ;
"RTN","GMVER0",9,0)
EN1(RESULT,GMVDATA) ; GMV ENTERED IN ERROR-PATIENT [RPC entry point]
"RTN","GMVER0",10,0)
 ; Queues a report to a printer
"RTN","GMVER0",11,0)
 ; GMVDATA=DFN^START DT^END DT^TYPE OF GRAPH^DEVICE^DEVICE IEN(#3.5)^
"RTN","GMVER0",12,0)
 ;         DATE/TIME TO PRINT REPORT
"RTN","GMVER0",13,0)
 ;
"RTN","GMVER0",14,0)
 N DFN,GMVBEG,GMVEND,GMVDEV,GMVIEN,GMVPDT
"RTN","GMVER0",15,0)
 S DFN=+$P(GMVDATA,"^",1),GMVBEG=$P(GMVDATA,"^",2),GMVEND=$P(GMVDATA,"^",3),GMVDEV=$P(GMVDATA,"^",5),GMVIEN=+$P(GMVDATA,"^",6),GMVPDT=$P(GMVDATA,"^",7)
"RTN","GMVER0",16,0)
 S ZTIO=GMVDEV ;device
"RTN","GMVER0",17,0)
 S ZTDTH=$S($G(GMVPDT)>0:GMVPDT,1:$$NOW^XLFDT()) ;date/time to print
"RTN","GMVER0",18,0)
 S (ZTSAVE("DFN"),ZTSAVE("GMVBEG"),ZTSAVE("GMVEND"))=""
"RTN","GMVER0",19,0)
 S ZTDESC="Entered in error vital/measurement report"
"RTN","GMVER0",20,0)
 S ZTRTN="START^GMVER0"
"RTN","GMVER0",21,0)
 D ^%ZTLOAD
"RTN","GMVER0",22,0)
 S RESULT=$S($G(ZTSK)>0:"Report sent to device. Task #: "_ZTSK,1:"Unable to task the report.")
"RTN","GMVER0",23,0)
 K ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE,ZTSK
"RTN","GMVER0",24,0)
 D ^%ZISC
"RTN","GMVER0",25,0)
 Q
"RTN","GMVER0",26,0)
START ; Start the report output
"RTN","GMVER0",27,0)
 U IO
"RTN","GMVER0",28,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","GMVER0",29,0)
 S GMVPAGE=0
"RTN","GMVER0",30,0)
 S GMVDASH=$$REPEAT^XLFSTR("-",80) ;line of dashes
"RTN","GMVER0",31,0)
 S GMVNOW=$$NOW^XLFDT() ;current date/time
"RTN","GMVER0",32,0)
 S GMVNOW=$$FMTE^XLFDT(GMVNOW)
"RTN","GMVER0",33,0)
 S GMVRANGE=$$FMTE^XLFDT(GMVBEG)_"-"_$$FMTE^XLFDT(GMVEND) ;date range in
"RTN","GMVER0",34,0)
 ; external format (for header)
"RTN","GMVER0",35,0)
 D DEM^VADPT ;get patient demographic data
"RTN","GMVER0",36,0)
 S GMVNAME=VADM(1) ;patient name
"RTN","GMVER0",37,0)
 S GMVSSN=$P(VADM(2),"^",2) ;patient ssn
"RTN","GMVER0",38,0)
 D EN1^GMVER1(.GMVARRAY,DFN,GMVBEG,GMVEND) ;get entered-in-error data
"RTN","GMVER0",39,0)
 D HEADER
"RTN","GMVER0",40,0)
 S GMVNONE=$G(^TMP($J,"ERRORS",0))
"RTN","GMVER0",41,0)
 I $L(GMVNONE)>0 W !,GMVNONE D KILL Q
"RTN","GMVER0",42,0)
 S GMVDATE=0
"RTN","GMVER0",43,0)
 F  S GMVDATE=$O(^TMP($J,"ERRORS",GMVDATE)) Q:'GMVDATE  D
"RTN","GMVER0",44,0)
 .S GMVITY=0
"RTN","GMVER0",45,0)
 .F  S GMVITY=$O(^TMP($J,"ERRORS",GMVDATE,GMVITY)) Q:'GMVITY  D
"RTN","GMVER0",46,0)
 ..S GMVDA=0
"RTN","GMVER0",47,0)
 ..F  S GMVDA=$O(^TMP($J,"ERRORS",GMVDATE,GMVITY,GMVDA)) Q:'GMVDA  D
"RTN","GMVER0",48,0)
 ...S GMVLOOP=0
"RTN","GMVER0",49,0)
 ...F  S GMVLOOP=$O(^TMP($J,"ERRORS",GMVDATE,GMVITY,GMVDA,GMVLOOP)) Q:'GMVLOOP  D
"RTN","GMVER0",50,0)
 ....S GMVNODE=^TMP($J,"ERRORS",GMVDATE,GMVITY,GMVDA,GMVLOOP)
"RTN","GMVER0",51,0)
 ....I $Y+6>IOSL D HEADER
"RTN","GMVER0",52,0)
 ....W !,GMVNODE
"RTN","GMVER0",53,0)
 ....I GMVLOOP=4 W !
"RTN","GMVER0",54,0)
 ....Q
"RTN","GMVER0",55,0)
 ...Q
"RTN","GMVER0",56,0)
 ..Q
"RTN","GMVER0",57,0)
 .Q
"RTN","GMVER0",58,0)
KILL ; Kill variables
"RTN","GMVER0",59,0)
 D KVAR^VADPT ;clean up VADPT variables
"RTN","GMVER0",60,0)
 K ^TMP($J,"ERRORS")
"RTN","GMVER0",61,0)
 K GMVDASH,GMVNAME,GMVNOW,GMVPAGE,GMVSSN,X,Y
"RTN","GMVER0",62,0)
 D ^%ZISC
"RTN","GMVER0",63,0)
 Q
"RTN","GMVER0",64,0)
HEADER ; Report header
"RTN","GMVER0",65,0)
 W:$Y>0 @IOF
"RTN","GMVER0",66,0)
 S GMVPAGE=GMVPAGE+1
"RTN","GMVER0",67,0)
 W !,GMVNOW,?22,"ENTERED IN ERROR VITAL/MEASUREMENT REPORT",?70,"PAGE: ",GMVPAGE
"RTN","GMVER0",68,0)
 W !?22,GMVRANGE
"RTN","GMVER0",69,0)
 W !?22,"Patient: ",GMVNAME,?$X+5,GMVSSN
"RTN","GMVER0",70,0)
 W !!,"Date Vit./Meas. taken",?58,"User who made error"
"RTN","GMVER0",71,0)
 W !,GMVDASH,!
"RTN","GMVER0",72,0)
 Q
"RTN","GMVER1")
0^203^B43330710
"RTN","GMVER1",1,0)
GMVER1 ;HOIFO/RM,YH,FT-ENTERED IN ERROR FOR A PATIENT & DATE RANGE ;12/12/01  12:36
"RTN","GMVER1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVER1",3,0)
 ;
"RTN","GMVER1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVER1",5,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVER1",6,0)
 ; #10103 - ^XLFDT calls           (supported)
"RTN","GMVER1",7,0)
 ;
"RTN","GMVER1",8,0)
EN1(RESULT,GMVDFN,GMVBEG,GMVEND) ; [RPC entry point]
"RTN","GMVER1",9,0)
 ; Returns Entered in Error records for a date range
"RTN","GMVER1",10,0)
 ; Input:
"RTN","GMVER1",11,0)
 ;  RESULT   = Where data is returned (closed array reference) (Required)
"RTN","GMVER1",12,0)
 ;  GMVDFN   = A pointer to the Patient file (#2) (Required)
"RTN","GMVER1",13,0)
 ;  GMVBEG   = Beginning date for all vitals
"RTN","GMVER1",14,0)
 ;  GMVEND   = Ending    date for all vitals
"RTN","GMVER1",15,0)
 ;
"RTN","GMVER1",16,0)
 ; Output:
"RTN","GMVER1",17,0)
 ;  RESULT() = TMP global address with the nodes of report text
"RTN","GMVER1",18,0)
 ;  The TMP global nodes are:
"RTN","GMVER1",19,0)
 ;  ^TMP($J,GMRDATE,GMRVITY,GMRVDA,1)=date/time of the error, Vital
"RTN","GMVER1",20,0)
 ;                                    type, name of user
"RTN","GMVER1",21,0)
 ;  ^TMP($J,GMRDATE,GMRVITY,GMRVDA,2)=error reason
"RTN","GMVER1",22,0)
 ;  ^TMP($J,GMRDATE,GMRVITY,GMRVDA,3)=revised data, if any (optional)
"RTN","GMVER1",23,0)
 ;  ^TMP($J,GMRDATE,GMRVITY,GMRVDA,4)=the incorrect data
"RTN","GMVER1",24,0)
 ;
"RTN","GMVER1",25,0)
 S GMRVITY=0
"RTN","GMVER1",26,0)
 K ^TMP($J,"LIST"),^TMP($J,"ERRORS")
"RTN","GMVER1",27,0)
 F  S GMRVITY=$O(^GMR(120.5,"AA",GMVDFN,GMRVITY)) Q:GMRVITY'>0  F GMRVDT=0:0 S GMRVDT=$O(^GMR(120.5,"AA",GMVDFN,GMRVITY,GMRVDT)) Q:GMRVDT'>0  S GMRVDATE=9999999-GMRVDT I GMRVDATE'<GMVBEG,GMRVDATE'>GMVEND D SORT
"RTN","GMVER1",28,0)
 S GMRDATE=0
"RTN","GMVER1",29,0)
 F  S GMRDATE=$O(^TMP($J,"LIST",GMRDATE)) Q:GMRDATE'>0  F GMRVITY=0:0 S GMRVITY=$O(^TMP($J,"LIST",GMRDATE,GMRVITY)) Q:GMRVITY'>0  F GMRVDA=0:0 S GMRVDA=$O(^TMP($J,"LIST",GMRDATE,GMRVITY,GMRVDA)) Q:GMRVDA'>0  D WRT
"RTN","GMVER1",30,0)
Q ; KILL VARIABLES
"RTN","GMVER1",31,0)
 K BADRATE,GOODRATE,GMRDAT,GMRDATE,GMRPR,GMRVDA,GMRVDATE,GMRVDT,GMRVERR,GMVEND,GMRVITY,GMVBEG,GMRVX,GMRP,GMRTYPE
"RTN","GMVER1",32,0)
 K GREASON,GMRZZ,GMRVARY,GMRQUAL,GMRVPO,GMVNODE,GMVSPACE,^TMP($J,"LIST")
"RTN","GMVER1",33,0)
 I '$D(^TMP($J,"ERRORS")) S ^TMP($J,"ERRORS",0)="No data for the time period indicated."
"RTN","GMVER1",34,0)
 S RESULT=$NA(^TMP($J,"ERRORS"))
"RTN","GMVER1",35,0)
 Q
"RTN","GMVER1",36,0)
SORT ; loop through the AA x-ref and find patient entries marked as
"RTN","GMVER1",37,0)
 ; entered in error (i.e., node 2 exists).
"RTN","GMVER1",38,0)
 S GMRVERR=0
"RTN","GMVER1",39,0)
 F  S GMRVERR=$O(^GMR(120.5,"AA",GMVDFN,GMRVITY,GMRVDT,GMRVERR)) Q:GMRVERR'>0  I '$D(^GMR(120.5,GMRVERR,2)) Q
"RTN","GMVER1",40,0)
 S GMRVDA=0
"RTN","GMVER1",41,0)
 F  S GMRVDA=$O(^GMR(120.5,"AA",GMVDFN,GMRVITY,GMRVDT,GMRVDA)) Q:GMRVDA'>0  I $D(^GMR(120.5,GMRVDA,2)) S ^TMP($J,"LIST",GMRVDATE,GMRVITY,GMRVDA)=GMRVERR
"RTN","GMVER1",42,0)
 Q
"RTN","GMVER1",43,0)
WRT ;
"RTN","GMVER1",44,0)
 S GMRVERR=^TMP($J,"LIST",GMRDATE,GMRVITY,GMRVDA)
"RTN","GMVER1",45,0)
 S GMRDAT("GOOD")=$S($D(^GMR(120.5,+GMRVERR,0)):^(0),1:"")
"RTN","GMVER1",46,0)
 I $D(^GMR(120.5,+GMRVERR,0)) D
"RTN","GMVER1",47,0)
 .K GMRVX
"RTN","GMVER1",48,0)
 .S GMRVX=$P(^GMRD(120.51,GMRVITY,0),"^",2)
"RTN","GMVER1",49,0)
 .S GMRVX(0)=$P(GMRDAT("GOOD"),"^",8)
"RTN","GMVER1",50,0)
 .D:GMRVX(0)>0!(GMRVX(0)=0) EN1^GMVSAS0
"RTN","GMVER1",51,0)
 .S GMRVX(1)=$S('$D(GMRVX(1)):"",'GMRVX(1):"",1:"*")
"RTN","GMVER1",52,0)
 .S GMRVX(0)=$$WRTDAT(GMRVX,GMRVX(0))
"RTN","GMVER1",53,0)
 .S GMRZZ=""
"RTN","GMVER1",54,0)
 .I $P($G(^GMR(120.5,GMRVERR,5,0)),"^",4)>0 D
"RTN","GMVER1",55,0)
 ..K GMRVARY
"RTN","GMVER1",56,0)
 ..S GMRVARY=""
"RTN","GMVER1",57,0)
 ..D CHAR^GMVCHAR(GMRVERR,.GMRVARY,GMRVITY)
"RTN","GMVER1",58,0)
 ..S GMRZZ=$$WRITECH^GMVCHAR(GMRVERR,.GMRVARY,9)
"RTN","GMVER1",59,0)
 ..S:GMRZZ'=""&(GMRVX'="PO2") GMRZZ=" ("_GMRZZ_")"
"RTN","GMVER1",60,0)
 ..Q
"RTN","GMVER1",61,0)
 . I GMRVX="P" D
"RTN","GMVER1",62,0)
 ..I GMRZZ'="",GMRVX(0)=1 S:$F(GMRZZ,"DORSALIS PEDIS")>0 GMRVX(1)=""
"RTN","GMVER1",63,0)
 ..I GMRZZ'="",GMRVX(0)=0 S:$F(GMRZZ,"DORSALIS PEDIS")>0 GMRVX(1)="*"
"RTN","GMVER1",64,0)
 ..Q
"RTN","GMVER1",65,0)
 .S GMRVPO=$P(^GMR(120.5,GMRVERR,0),"^",10)
"RTN","GMVER1",66,0)
 .S $P(GMRDAT("GOOD"),"^",8)=GMRVX(0)_GMRVX(1)_$S(GMRVPO'="":" with supplemental O2 "_$S(GMRVPO["l/min":$P(GMRVPO," l/min")_"L/min",1:"")_$S(GMRVPO["l/min":$P(GMRVPO," l/min",2),1:GMRVPO),1:"")_$S(GMRZZ'=""&(GMRVX="PO2"):" via ",1:"")_GMRZZ
"RTN","GMVER1",67,0)
 .Q
"RTN","GMVER1",68,0)
 I $D(^GMR(120.5,+GMRVDA,0)) D
"RTN","GMVER1",69,0)
 .S GMRDAT("BAD")=$S($D(^GMR(120.5,+GMRVDA,0)):^(0),1:"")
"RTN","GMVER1",70,0)
 .K GMRVX,GMRVX(0),GMRVX(1)
"RTN","GMVER1",71,0)
 .S GMRVX=$P(^GMRD(120.51,GMRVITY,0),"^",2)
"RTN","GMVER1",72,0)
 .S GMRVX(0)=$P(GMRDAT("BAD"),"^",8)
"RTN","GMVER1",73,0)
 .D:GMRVX(0)>0 EN1^GMVSAS0
"RTN","GMVER1",74,0)
 .S GMRVX(1)=$S('$D(GMRVX(1)):"",'GMRVX(1):"",1:"*")
"RTN","GMVER1",75,0)
 .S GMRVX(0)=$$WRTDAT(GMRVX,GMRVX(0))
"RTN","GMVER1",76,0)
 .S GMRZZ=""
"RTN","GMVER1",77,0)
 .I $P($G(^GMR(120.5,GMRVDA,5,0)),"^",4)>0 D
"RTN","GMVER1",78,0)
 ..K GMRVARY
"RTN","GMVER1",79,0)
 ..S GMRVARY=""
"RTN","GMVER1",80,0)
 ..D CHAR^GMVCHAR(GMRVDA,.GMRVARY,GMRVITY)
"RTN","GMVER1",81,0)
 ..S GMRZZ=$$WRITECH^GMVCHAR(GMRVDA,.GMRVARY,9)
"RTN","GMVER1",82,0)
 ..S:GMRZZ'=""&(GMRVX'="PO2") GMRZZ=" ("_GMRZZ_")"
"RTN","GMVER1",83,0)
 ..Q
"RTN","GMVER1",84,0)
 .I GMRVX="P" D
"RTN","GMVER1",85,0)
 ..I GMRZZ'="",GMRVX(0)=1 S:$F(GMRZZ,"DORSALIS PEDIS")>0 GMRVX(1)=""
"RTN","GMVER1",86,0)
 ..I GMRZZ'="",GMRVX(0)=0 S:$F(GMRZZ,"DORSALIS PEDIS")>0 GMRVX(1)="*"
"RTN","GMVER1",87,0)
 ..Q
"RTN","GMVER1",88,0)
 .S GMRVPO=$P(^GMR(120.5,GMRVDA,0),"^",10)
"RTN","GMVER1",89,0)
 .S $P(GMRDAT("BAD"),"^",8)=GMRVX(0)_GMRVX(1)_$S(GMRVPO'="":" with supplemental O2 "_$S(GMRVPO["l/min":$P(GMRVPO," l/min")_"L/min",1:"")_$S(GMRVPO["l/min":$P(GMRVPO," l/min",2),1:GMRVPO),1:"")_$S(GMRZZ'=""&(GMRVX="PO2"):" via ",1:"")_GMRZZ
"RTN","GMVER1",90,0)
 .S GREASON="" D ERREASON
"RTN","GMVER1",91,0)
 S GMRPR("VSDT")=$$FMTE^XLFDT(GMRDATE)
"RTN","GMVER1",92,0)
 S GMRPR("ENUS")=$E($$PERSON^GMVUTL1(+$P(GMRDAT("BAD"),U,6)),1,21)
"RTN","GMVER1",93,0)
 S GMRPR("TYPE")=$S(GMRVITY="":"",$D(^GMRD(120.51,GMRVITY,0)):$P(^(0),"^"),1:"")
"RTN","GMVER1",94,0)
 S GMVNODE=""
"RTN","GMVER1",95,0)
 S GMVSPACE=$$REPEAT^XLFSTR(" ",79) ;line of spaces
"RTN","GMVER1",96,0)
 S GMVNODE=GMRPR("VSDT")
"RTN","GMVER1",97,0)
 S GMVNODE=GMVNODE_$$FILLER^GMVUTL1(21,$L(GMVNODE),GMVSPACE)_GMRPR("TYPE")
"RTN","GMVER1",98,0)
 S GMVNODE=GMVNODE_$$FILLER^GMVUTL1(58,$L(GMVNODE),GMVSPACE)_GMRPR("ENUS")
"RTN","GMVER1",99,0)
 S ^TMP($J,"ERRORS",GMRDATE,GMRVITY,GMRVDA,1)=GMVNODE
"RTN","GMVER1",100,0)
 S ^TMP($J,"ERRORS",GMRDATE,GMRVITY,GMRVDA,2)="   Reason: "_GREASON
"RTN","GMVER1",101,0)
 S GMVNODE=""
"RTN","GMVER1",102,0)
 I $G(GMRVERR)>0 S GMVNODE="   (Revised)  "_$P(GMRDAT("GOOD"),"^",8) D
"RTN","GMVER1",103,0)
 .I GMRVX="PN" D
"RTN","GMVER1",104,0)
 ..S GOODRATE=$P(GMRDAT("GOOD"),U,8)
"RTN","GMVER1",105,0)
 ..S GMVNODE=GMVNODE_$S(GOODRATE=0:" No pain",GOODRATE=10:" Worst imaginable pain",GOODRATE=99:" Unable to respond",1:"")
"RTN","GMVER1",106,0)
 ..Q
"RTN","GMVER1",107,0)
 .Q
"RTN","GMVER1",108,0)
 I $L(GMVNODE)>0 D
"RTN","GMVER1",109,0)
 .S ^TMP($J,"ERRORS",GMRDATE,GMRVITY,GMRVDA,3)=GMVNODE
"RTN","GMVER1",110,0)
 .Q
"RTN","GMVER1",111,0)
 S GMVNODE=""
"RTN","GMVER1",112,0)
 I GMRVDA>0 S GMVNODE="   (Bad data)  "_$P(GMRDAT("BAD"),"^",8) D
"RTN","GMVER1",113,0)
 .I GMRVX="PN" D
"RTN","GMVER1",114,0)
 ..S BADRATE=$P(GMRDAT("BAD"),U,8)
"RTN","GMVER1",115,0)
 ..S GMVNODE=GMVNODE_$S(BADRATE=0:" No pain",BADRATE=10:" Worst imaginable pain",BADRATE=99:" Unable to respond",1:"")
"RTN","GMVER1",116,0)
 ..Q
"RTN","GMVER1",117,0)
 .Q
"RTN","GMVER1",118,0)
 I $L(GMVNODE)>0 D
"RTN","GMVER1",119,0)
 .S ^TMP($J,"ERRORS",GMRDATE,GMRVITY,GMRVDA,4)=GMVNODE
"RTN","GMVER1",120,0)
 .Q
"RTN","GMVER1",121,0)
 Q
"RTN","GMVER1",122,0)
ERREASON ;ERROR REASON
"RTN","GMVER1",123,0)
 Q:'$D(^GMR(120.5,+GMRVDA,2.1))
"RTN","GMVER1",124,0)
 S GER=0
"RTN","GMVER1",125,0)
 F  S GER=$O(^GMR(120.5,+GMRVDA,2.1,GER)) Q:GER'>0  S GER(1)=+$G(^GMR(120.5,+GMRVDA,2.1,GER,0)) D
"RTN","GMVER1",126,0)
 .S GER(2)=$S(GER(1)=1:"incorrect date/time",GER(1)=2:"incorrect reading",GER(1)=3:"incorrect patient",GER(1)=4:"invalid record",1:"")
"RTN","GMVER1",127,0)
 .I GER(2)'="" S GREASON=GREASON_$S(GREASON'="":", ",1:"")_GER(2)
"RTN","GMVER1",128,0)
 .Q
"RTN","GMVER1",129,0)
 K GER
"RTN","GMVER1",130,0)
 Q
"RTN","GMVER1",131,0)
WRTDAT(TYPE,DATA) ;
"RTN","GMVER1",132,0)
 I '((TYPE="BP")!(TYPE="P")!(TYPE="R")),DATA>0 D @($$UP^XLFSTR(TYPE))
"RTN","GMVER1",133,0)
 Q DATA
"RTN","GMVER1",134,0)
T S DATA=DATA_" F  ("_$J(+DATA-32*5/9,0,1)_" C)" Q
"RTN","GMVER1",135,0)
WT S DATA=DATA_" lb  ("_$J(DATA/2.2,0,2)_" kg)" Q
"RTN","GMVER1",136,0)
HT S DATA=$S(DATA\12:DATA\12_" ft ",1:"")_$S(DATA#12:DATA#12_" in",1:"")_" ("_$J(DATA*2.54,0,2)_" cm)" Q
"RTN","GMVER1",137,0)
CG S DATA=DATA_" in ("_$J(+DATA/.3937,0,2)_" cm)" Q
"RTN","GMVER1",138,0)
CVP S DATA=DATA_" cmH2O ("_$J(DATA/1.36,0,1)_" mmHg)" Q
"RTN","GMVER1",139,0)
PO2 S DATA=DATA_"%" Q
"RTN","GMVER1",140,0)
PN I DATA=0 S DATA=DATA_" No pain " Q
"RTN","GMVER1",141,0)
 I DATA=99 S DATA=DATA_" Unable to respond " Q
"RTN","GMVER1",142,0)
 I DATA=10 S DATA=DATA_" Worst imaginable pain " Q
"RTN","GMVER1",143,0)
 Q
"RTN","GMVFSYN")
0^204^B6699575
"RTN","GMVFSYN",1,0)
GMVFSYN ;HOIFO/RM,YH,FT-X REFERENCE FOR VITAL TYPE, CATEGORY AND SYNONYM ;5/24/01  14:03
"RTN","GMVFSYN",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVFSYN",3,0)
 ;
"RTN","GMVFSYN",4,0)
 ; This routine uses the following IAs:
"RTN","GMVFSYN",5,0)
 ; <None>
"RTN","GMVFSYN",6,0)
 ;
"RTN","GMVFSYN",7,0)
BSYNO(GMRVSK,DA,X) ; CALLED FROM SET/KILL LOGIC OF ACHR XREF ON
"RTN","GMVFSYN",8,0)
 ; SYNONYM (.02) FIELD OF GMRV VITAL QUALIFIER (120.52) FILE.
"RTN","GMVFSYN",9,0)
 ; THIS PROCEDURE SETS/KILLS THE FOLLOWING MUMPS INDICES:  "BB".
"RTN","GMVFSYN",10,0)
 ;    Input variables:  GMRVSK=1 if called from SET, 2 if from KILL
"RTN","GMVFSYN",11,0)
 ;                      DA=DA array passed by reference.
"RTN","GMVFSYN",12,0)
 ;                      X=value being indexed.
"RTN","GMVFSYN",13,0)
 ;
"RTN","GMVFSYN",14,0)
 S GMRVDA=DA N DA,GMRVY
"RTN","GMVFSYN",15,0)
 S DA(1)=GMRVDA,DA=0
"RTN","GMVFSYN",16,0)
 F  S DA=$O(^GMRD(120.52,DA(1),1,DA)) Q:DA'>0  D
"RTN","GMVFSYN",17,0)
 .  S GMRVY=$G(^GMRD(120.52,DA(1),1,DA,0))
"RTN","GMVFSYN",18,0)
 .  D BB($P(GMRVY,"^"),$P(GMRVY,"^",2),X,.DA,GMRVSK)
"RTN","GMVFSYN",19,0)
 .  Q
"RTN","GMVFSYN",20,0)
 K GMRVDA
"RTN","GMVFSYN",21,0)
 Q
"RTN","GMVFSYN",22,0)
BTYP(GMRVSK,DA,X) ; CALLED FROM SET/KILL LOGIC OF BTYP XREF ON VITAL
"RTN","GMVFSYN",23,0)
 ; TYPE (.01) FIELD OF VITAL TYPE (120.521) SUB-FILE OF GMRV
"RTN","GMVFSYN",24,0)
 ; GMRV VITAL QUALIFIER (120.52) FILE.  THIS PROCEDURE SETS/KILLS THE
"RTN","GMVFSYN",25,0)
 ; FOLLOWING MUMPS INDEX:  "BB".
"RTN","GMVFSYN",26,0)
 ;    Input variables:  GMRVSK=1 if called from SET, 2 if from KILL
"RTN","GMVFSYN",27,0)
 ;                      DA=DA array passed by reference.
"RTN","GMVFSYN",28,0)
 ;                      X=value being indexed.
"RTN","GMVFSYN",29,0)
 ;
"RTN","GMVFSYN",30,0)
 N GMRVX,GMRVY
"RTN","GMVFSYN",31,0)
 S GMRVX=$P($G(^GMRD(120.52,DA(1),0)),"^"),GMRVY=$G(^GMRD(120.52,DA(1),1,DA,0))
"RTN","GMVFSYN",32,0)
 D BB(X,$P(GMRVY,"^",2),$P(GMRVX,"^",2),.DA,GMRVSK)
"RTN","GMVFSYN",33,0)
 Q
"RTN","GMVFSYN",34,0)
BCAT(GMRVSK,DA,X) ; CALLED FROM SET/KILL LOGIC OF BCAT XREF ON CATEGORY
"RTN","GMVFSYN",35,0)
 ; (.02) FIELD OF VITAL TYPE (120.521) SUBFILE OF GMRV VITAL QUALIFIER
"RTN","GMVFSYN",36,0)
 ; (120.52) FILE.  THIS PROCEDURE SETS/KILLS THE FOLLOWING MUMPS
"RTN","GMVFSYN",37,0)
 ; INDEX:  "BB".
"RTN","GMVFSYN",38,0)
 ;    Input variables:  GMRVSK=1 if called from SET, 2 if from KILL
"RTN","GMVFSYN",39,0)
 ;                      DA=DA array passed by reference.
"RTN","GMVFSYN",40,0)
 ;                      X=value being indexed.
"RTN","GMVFSYN",41,0)
 ;
"RTN","GMVFSYN",42,0)
 N GMRVX,GMRVY
"RTN","GMVFSYN",43,0)
 S GMRVX=$G(^GMRD(120.52,DA(1),0)),GMRVY=$G(^GMRD(120.52,DA(1),1,DA,0))
"RTN","GMVFSYN",44,0)
 D BB($P(GMRVY,"^"),X,$P(GMRVX,"^",2),.DA,GMRVSK)
"RTN","GMVFSYN",45,0)
 Q
"RTN","GMVFSYN",46,0)
BB(TYPE,CAT,CHAR,DA,SK) ; This procedure updates the "BB" index for the 120.52
"RTN","GMVFSYN",47,0)
 ; file.  This index has the following format:
"RTN","GMVFSYN",48,0)
 ;    ^GMRD(120.52,"BB",TYPE,CAT,CHAR,DA(1),DA)=""
"RTN","GMVFSYN",49,0)
 ;  Input variables:
"RTN","GMVFSYN",50,0)
 ;      TYPE=Vital Type (.01) field 120.521 sub-file.
"RTN","GMVFSYN",51,0)
 ;       CAT=Category (.02) field of 120.521 sub-file.
"RTN","GMVFSYN",52,0)
 ;      CHAR=Name (.01) field of 120.52 file.
"RTN","GMVFSYN",53,0)
 ;        DA=Passed by reference will have entry in 120.52 sub-file, DA,
"RTN","GMVFSYN",54,0)
 ;           and entry in 120.52 file, DA(1).
"RTN","GMVFSYN",55,0)
 ;        SK=1 if set xref, 2 if kill xref.
"RTN","GMVFSYN",56,0)
 ;
"RTN","GMVFSYN",57,0)
 Q:$G(TYPE)=""!($G(CAT)="")!($G(CHAR)="")!($G(DA(1))="")!($G(DA)="")
"RTN","GMVFSYN",58,0)
 I $G(SK)=1 S ^GMRD(120.52,"BB",TYPE,CAT,CHAR,DA(1),DA)=""
"RTN","GMVFSYN",59,0)
 I $G(SK)=2 K ^GMRD(120.52,"BB",TYPE,CAT,CHAR,DA(1),DA)
"RTN","GMVFSYN",60,0)
 Q
"RTN","GMVFSYN",61,0)
SCREEN ;SCREEN FOR DUPLICATE ENTRY FOR A VITAL TYPE
"RTN","GMVFSYN",62,0)
 ; Called from SYNONYM field (#.02) of the GMRV VITAL QUALIFIER file
"RTN","GMVFSYN",63,0)
 ; (#120.52) - ^DD(120.52,.02,0)
"RTN","GMVFSYN",64,0)
 Q:X=""  S GMRVDA=DA N DA,GTYP,GCAT,GSYN
"RTN","GMVFSYN",65,0)
 S DA(1)=GMRVDA,DA=0
"RTN","GMVFSYN",66,0)
 F  S DA=$O(^GMRD(120.52,DA(1),1,DA)) Q:DA'>0!'$D(X)  D
"RTN","GMVFSYN",67,0)
 .  S GMRVY=$G(^GMRD(120.52,DA(1),1,DA,0))
"RTN","GMVFSYN",68,0)
 .  S GTYP=+$P(GMRVY,"^")
"RTN","GMVFSYN",69,0)
 .  I $D(^GMRD(120.52,"BB",GTYP)) D
"RTN","GMVFSYN",70,0)
 .  .  S GCAT=0 F  S GCAT=$O(^GMRD(120.52,"BB",GTYP,GCAT)) Q:GCAT'>0!'$D(X)  S GSYN="" F  S GSYN=$O(^GMRD(120.52,"BB",GTYP,GCAT,GSYN)) Q:GSYN=""!'$D(X)  I GSYN=X W:'$D(ZTQUEUED) !!,X,"  has been entered for "_$P(^GMRD(120.51,GTYP,0),"^"),!! K X
"RTN","GMVFSYN",71,0)
 K GMRVDA Q
"RTN","GMVFUT0")
0^205^B5587382
"RTN","GMVFUT0",1,0)
GMVFUT0 ;HOIFO/RM,FT-FILE UTILITIES FOR 120.5 FILE ;5/23/01  15:42
"RTN","GMVFUT0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVFUT0",3,0)
 ;
"RTN","GMVFUT0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVFUT0",5,0)
 ; <None>
"RTN","GMVFUT0",6,0)
 ;
"RTN","GMVFUT0",7,0)
EN1(Y,DA) ; INPUT TRANSFORM FOR NAME (.01) FIELD OF QUALIFIER
"RTN","GMVFUT0",8,0)
 ; (120.505) SUB-FILE OF GMRV VITAL MEASUREMENT (120.5) FILE.
"RTN","GMVFUT0",9,0)
 ;   Input variables:  Y is entry in 120.52 being looked up
"RTN","GMVFUT0",10,0)
 ;                     DA is entry in 120.5 where Qualifier data
"RTN","GMVFUT0",11,0)
 ;                        is being selected.
"RTN","GMVFUT0",12,0)
 ;   Function value: 1 if can select this Qualifier, else 0.
"RTN","GMVFUT0",13,0)
 ;
"RTN","GMVFUT0",14,0)
 N GMRVFXN,GMRVTYP S GMRVFXN=0
"RTN","GMVFUT0",15,0)
 S GMRVTYP=$P($G(^GMR(120.5,DA,0)),"^",3)
"RTN","GMVFUT0",16,0)
 I GMRVTYP>0,$D(^GMRD(120.52,"C",GMRVTYP,+Y)) S GMRVFXN=1
"RTN","GMVFUT0",17,0)
 Q GMRVFXN
"RTN","GMVFUT0",18,0)
 ;
"RTN","GMVFUT0",19,0)
EN2(DA,X) ; CALLED FROM INPUT TRANSFORM OF RATE (1.2) FIELD OF THE GMRV
"RTN","GMVFUT0",20,0)
 ; VITAL MEASUREMENT (#120.5) FILE.
"RTN","GMVFUT0",21,0)
 ;   Input variable: DA is entry in 120.5 where Rate is being validated.
"RTN","GMVFUT0",22,0)
 ;                   X is value of Rate being validated.
"RTN","GMVFUT0",23,0)
 ;
"RTN","GMVFUT0",24,0)
 N GMRVFXN,GMRVINP,GMRVM,GMRVTYP
"RTN","GMVFUT0",25,0)
 S GMRVFXN=1 I $A(X)=45 S GMRVFXN=0
"RTN","GMVFUT0",26,0)
 I GMRVFXN D
"RTN","GMVFUT0",27,0)
 .  S GMRVTYP=$P($G(^GMR(120.5,DA,0)),"^",3)
"RTN","GMVFUT0",28,0)
 .  I GMRVTYP'>0 S GMRVFXN=0
"RTN","GMVFUT0",29,0)
 .  I GMRVTYP>0,'$P($G(^GMRD(120.51,GMRVTYP,0)),"^",4) S GMRVFXN=0
"RTN","GMVFUT0",30,0)
 .  I 'GMRVFXN D
"RTN","GMVFUT0",31,0)
 .  .  S GMRVFXN=0,GMRVM(1)=$C(7),GMRVM(3)=""
"RTN","GMVFUT0",32,0)
 .  .  S GMRVM(2)="   RATE CANNOT BE ENTERED FOR THIS MEASUREMENT TYPE!"
"RTN","GMVFUT0",33,0)
 .  .  D EN^DDIOL(.GMRVM,"","?5")
"RTN","GMVFUT0",34,0)
 .  .  Q
"RTN","GMVFUT0",35,0)
 .  Q
"RTN","GMVFUT0",36,0)
 I GMRVFXN,$L(X)>30!($L(X)<1) S GMRVFXN=0
"RTN","GMVFUT0",37,0)
 I GMRVFXN D
"RTN","GMVFUT0",38,0)
 .  S GMRVINP=$E($G(^GMRD(120.51,$P(^GMR(120.5,DA,0),U,3),1)),1,245)
"RTN","GMVFUT0",39,0)
 .  I GMRVINP'="" X GMRVINP I '$D(X) S GMRVFXN=0
"RTN","GMVFUT0",40,0)
 .  I GMRVINP="" S GMRVFXN=0
"RTN","GMVFUT0",41,0)
 .  Q
"RTN","GMVFUT0",42,0)
 Q GMRVFXN
"RTN","GMVFUT0",43,0)
 ;
"RTN","GMVFUT0",44,0)
AA(GMRVFLD,GMRVSK,DA,X) ; CALLED FROM SET/KILL LOGIC OF:  AA01 XREF OF
"RTN","GMVFUT0",45,0)
 ; DATE/TIME VITALS TAKEN (.01) FIELD, AA02 XREF OF PATIENT (.02)
"RTN","GMVFUT0",46,0)
 ; FIELD, AND AA03 XREF OF VITAL TYPE (.03) FIELD OF THE GMRV VITAL
"RTN","GMVFUT0",47,0)
 ; MEASUREMENT (120.5) FILE TO SET "AA" INDEX.
"RTN","GMVFUT0",48,0)
 ;    Input variables: GMRVFLD=field making call
"RTN","GMVFUT0",49,0)
 ;                     GMRVSK=1 if called from SET LOGIC, 2 if called
"RTN","GMVFUT0",50,0)
 ;                            from KILL LOGIC.
"RTN","GMVFUT0",51,0)
 ;                     DA is entry being indexed.
"RTN","GMVFUT0",52,0)
 ;                     X is value of GMRVFLD to be indexed.
"RTN","GMVFUT0",53,0)
 ;
"RTN","GMVFUT0",54,0)
 N GMRVDFN,GMRVDT,GMRVTYP,GMRVX
"RTN","GMVFUT0",55,0)
 S GMRVX=$G(^GMR(120.5,DA,0))
"RTN","GMVFUT0",56,0)
 S GMRVDT=$S(GMRVFLD=.01:X,1:$P(GMRVX,"^"))
"RTN","GMVFUT0",57,0)
 S GMRVDFN=$S(GMRVFLD=.02:X,1:$P(GMRVX,"^",2))
"RTN","GMVFUT0",58,0)
 S GMRVTYP=$S(GMRVFLD=.03:X,1:$P(GMRVX,"^",3))
"RTN","GMVFUT0",59,0)
 Q:GMRVDT=""!(GMRVDFN="")!(GMRVTYP="")
"RTN","GMVFUT0",60,0)
 I GMRVSK=1 S ^GMR(120.5,"AA",GMRVDFN,GMRVTYP,9999999-GMRVDT,DA)=""
"RTN","GMVFUT0",61,0)
 I GMRVSK=2 K ^GMR(120.5,"AA",GMRVDFN,GMRVTYP,9999999-GMRVDT,DA)
"RTN","GMVFUT0",62,0)
 Q
"RTN","GMVFUT0",63,0)
RATEHLP(DA) ; CALLED FROM EXECUTABLE HELP OF RATE (1.2) FIELD OF GMRV
"RTN","GMVFUT0",64,0)
 ; VITAL MEASUREMENT (120.5) FILE.
"RTN","GMVFUT0",65,0)
 ;    Input Variable:  DA is entry in 120.5 to display help for.
"RTN","GMVFUT0",66,0)
 ;
"RTN","GMVFUT0",67,0)
 N GMRVTYP,XQH
"RTN","GMVFUT0",68,0)
 S GMRVTYP=$P($G(^GMR(120.5,DA,0)),"^",3)
"RTN","GMVFUT0",69,0)
 S XQH=$P($G(^GMRD(120.51,+GMRVTYP,0)),"^",6)
"RTN","GMVFUT0",70,0)
 I XQH="" D EN^DDIOL("RATE NOT APPLICABLE FOR THIS TYPE OF MEASUREMENT")
"RTN","GMVFUT0",71,0)
 I XQH'="" D EN^XQH
"RTN","GMVFUT0",72,0)
 Q
"RTN","GMVFUT2")
0^206^B2602968
"RTN","GMVFUT2",1,0)
GMVFUT2 ;HOIFO/RM,FT-FILE UTILITIES FOR 120.52 FILE ;5/24/01  14:34
"RTN","GMVFUT2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVFUT2",3,0)
 ;
"RTN","GMVFUT2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVFUT2",5,0)
 ; <None>
"RTN","GMVFUT2",6,0)
 ;
"RTN","GMVFUT2",7,0)
ACHR(GMRVSK,DA,X) ; CALLED FROM SET/KILL LOGIC OF ACHR XREF ON
"RTN","GMVFUT2",8,0)
 ; QUALIFIER (.01) FIELD OF GMRV VITAL QUALIFIER (120.52) FILE.
"RTN","GMVFUT2",9,0)
 ; THIS PROCEDURE SETS/KILLS THE FOLLOWING MUMPS INDICES:  "AA".
"RTN","GMVFUT2",10,0)
 ;    Input variables:  GMRVSK=1 if called from SET, 2 if from KILL
"RTN","GMVFUT2",11,0)
 ;                      DA=DA array passed by reference.
"RTN","GMVFUT2",12,0)
 ;                      X=value being indexed.
"RTN","GMVFUT2",13,0)
 ;
"RTN","GMVFUT2",14,0)
 S GMRVDA=DA N DA,GMRVY
"RTN","GMVFUT2",15,0)
 S DA(1)=GMRVDA,DA=0
"RTN","GMVFUT2",16,0)
 F  S DA=$O(^GMRD(120.52,DA(1),1,DA)) Q:DA'>0  D
"RTN","GMVFUT2",17,0)
 .  S GMRVY=$G(^GMRD(120.52,DA(1),1,DA,0))
"RTN","GMVFUT2",18,0)
 .  D AA($P(GMRVY,"^"),$P(GMRVY,"^",2),X,.DA,GMRVSK)
"RTN","GMVFUT2",19,0)
 .  Q
"RTN","GMVFUT2",20,0)
 K GMRVDA
"RTN","GMVFUT2",21,0)
 Q
"RTN","GMVFUT2",22,0)
ATYP(GMRVSK,DA,X) ; CALLED FROM SET/KILL LOGIC OF ATYP XREF ON VITAL
"RTN","GMVFUT2",23,0)
 ; TYPE (.01) FIELD OF VITAL TYPE (120.521) SUB-FILE OF GMRV
"RTN","GMVFUT2",24,0)
 ; GMRV VITAL QUALIFIER (120.52) FILE.  THIS PROCEDURE SETS/KILLS THE
"RTN","GMVFUT2",25,0)
 ; FOLLOWING MUMPS INDEX:  "AA".
"RTN","GMVFUT2",26,0)
 ;    Input variables:  GMRVSK=1 if called from SET, 2 if from KILL
"RTN","GMVFUT2",27,0)
 ;                      DA=DA array passed by reference.
"RTN","GMVFUT2",28,0)
 ;                      X=value being indexed.
"RTN","GMVFUT2",29,0)
 ;
"RTN","GMVFUT2",30,0)
 N GMRVX,GMRVY
"RTN","GMVFUT2",31,0)
 S GMRVX=$P($G(^GMRD(120.52,DA(1),0)),"^"),GMRVY=$G(^GMRD(120.52,DA(1),1,DA,0))
"RTN","GMVFUT2",32,0)
 D AA(X,$P(GMRVY,"^",2),$P(GMRVX,"^"),.DA,GMRVSK)
"RTN","GMVFUT2",33,0)
 Q
"RTN","GMVFUT2",34,0)
ACAT(GMRVSK,DA,X) ; CALLED FROM SET/KILL LOGIC OF ACAT XREF ON CATEGORY
"RTN","GMVFUT2",35,0)
 ; (.02) FIELD OF VITAL TYPE (120.521) SUBFILE OF GMRV VITAL QUALIFIER
"RTN","GMVFUT2",36,0)
 ; (120.52) FILE.  THIS PROCEDURE SETS/KILLS THE FOLLOWING MUMPS
"RTN","GMVFUT2",37,0)
 ; INDEX:  "AA".
"RTN","GMVFUT2",38,0)
 ;    Input variables:  GMRVSK=1 if called from SET, 2 if from KILL
"RTN","GMVFUT2",39,0)
 ;                      DA=DA array passed by reference.
"RTN","GMVFUT2",40,0)
 ;                      X=value being indexed.
"RTN","GMVFUT2",41,0)
 ;
"RTN","GMVFUT2",42,0)
 N GMRVX,GMRVY
"RTN","GMVFUT2",43,0)
 S GMRVX=$G(^GMRD(120.52,DA(1),0)),GMRVY=$G(^GMRD(120.52,DA(1),1,DA,0))
"RTN","GMVFUT2",44,0)
 D AA($P(GMRVY,"^"),X,$P(GMRVX,"^"),.DA,GMRVSK)
"RTN","GMVFUT2",45,0)
 Q
"RTN","GMVFUT2",46,0)
AA(TYPE,CAT,CHAR,DA,SK) ; This procedure updates the "AA" index for the 120.52
"RTN","GMVFUT2",47,0)
 ; file.  This index has the following format:
"RTN","GMVFUT2",48,0)
 ;    ^GMRD(120.52,"AA",TYPE,CAT,CHAR,DA(1),DA)=""
"RTN","GMVFUT2",49,0)
 ;  Input variables:
"RTN","GMVFUT2",50,0)
 ;      TYPE=Vital Type (.01) field 120.521 sub-file.
"RTN","GMVFUT2",51,0)
 ;       CAT=Category (.02) field of 120.521 sub-file.
"RTN","GMVFUT2",52,0)
 ;      CHAR=Name (.01) field of 120.52 file.
"RTN","GMVFUT2",53,0)
 ;        DA=Passed by reference will have entry in 120.52 sub-file, DA,
"RTN","GMVFUT2",54,0)
 ;           and entry in 120.52 file, DA(1).
"RTN","GMVFUT2",55,0)
 ;        SK=1 if set xref, 2 if kill xref.
"RTN","GMVFUT2",56,0)
 ;
"RTN","GMVFUT2",57,0)
 Q:$G(TYPE)=""!($G(CAT)="")!($G(CHAR)="")!($G(DA(1))="")!($G(DA)="")
"RTN","GMVFUT2",58,0)
 I $G(SK)=1 S ^GMRD(120.52,"AA",TYPE,CAT,CHAR,DA(1),DA)=""
"RTN","GMVFUT2",59,0)
 I $G(SK)=2 K ^GMRD(120.52,"AA",TYPE,CAT,CHAR,DA(1),DA)
"RTN","GMVFUT2",60,0)
 Q
"RTN","GMVFUT3")
0^207^B7545760
"RTN","GMVFUT3",1,0)
GMVFUT3 ;HOIFO/RM,FT-FILE UTILITIES FOR 120.53 FILE ;5/23/01  15:43
"RTN","GMVFUT3",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVFUT3",3,0)
 ;
"RTN","GMVFUT3",4,0)
 ; This routine uses the following IAs:
"RTN","GMVFUT3",5,0)
 ; <None>
"RTN","GMVFUT3",6,0)
 ;
"RTN","GMVFUT3",7,0)
ACAT(GMRVSK,DA,X) ; CALLED FROM SET/KILL LOGIC OF ACAT XREF ON CATEGORY
"RTN","GMVFUT3",8,0)
 ; (.01) FIELD OF GMRV CATEGORY (120.53) FILE.  THIS PROCEDURE
"RTN","GMVFUT3",9,0)
 ; SETS/KILLS THE FOLLOWING MUMPS INDICES:  "AA".
"RTN","GMVFUT3",10,0)
 ;    Input variables:  GMRVSK=1 if called from SET, 2 if from KILL
"RTN","GMVFUT3",11,0)
 ;                      DA=DA array passed by reference.
"RTN","GMVFUT3",12,0)
 ;                      X=value being indexed.
"RTN","GMVFUT3",13,0)
 ;
"RTN","GMVFUT3",14,0)
 S GMRVDA=DA N DA,GMRVY
"RTN","GMVFUT3",15,0)
 S DA(1)=GMRVDA,DA=0
"RTN","GMVFUT3",16,0)
 F  S DA=$O(^GMRD(120.53,DA(1),1,DA)) Q:DA'>0  D
"RTN","GMVFUT3",17,0)
 .  S GMRVY=$G(^GMRD(120.53,DA(1),1,DA,0))
"RTN","GMVFUT3",18,0)
 .  D AA($P(GMRVY,"^"),X,.DA,GMRVSK)
"RTN","GMVFUT3",19,0)
 .  Q
"RTN","GMVFUT3",20,0)
 K GMRVDA
"RTN","GMVFUT3",21,0)
 Q
"RTN","GMVFUT3",22,0)
ATYP(GMRVSK,DA,X) ; CALLED FROM SET/KILL LOGIC OF ATYP XREF ON VITAL
"RTN","GMVFUT3",23,0)
 ; TYPE (.01) FIELD OF VITAL TYPE (120.531) SUB-FILE OF GMRV CATEGORY
"RTN","GMVFUT3",24,0)
 ; (120.53) FILE.  THIS PROCEDURE SETS/KILLS THE FOLLOWING MUMPS
"RTN","GMVFUT3",25,0)
 ; INDICES:  "AA", "APRINT", AND "AEDIT".
"RTN","GMVFUT3",26,0)
 ;    Input variables:  GMRVSK=1 if called from SET, 2 if from KILL
"RTN","GMVFUT3",27,0)
 ;                      DA=DA array passed by reference.
"RTN","GMVFUT3",28,0)
 ;                      X=value being indexed.
"RTN","GMVFUT3",29,0)
 ;
"RTN","GMVFUT3",30,0)
 N GMRVX,GMRVY
"RTN","GMVFUT3",31,0)
 S GMRVX=$G(^GMRD(120.53,DA(1),0)),GMRVY=$G(^GMRD(120.53,DA(1),1,DA,0))
"RTN","GMVFUT3",32,0)
 D AA(X,$P(GMRVX,"^"),.DA,GMRVSK)
"RTN","GMVFUT3",33,0)
 D APRINT(X,$P(GMRVY,"^",5),.DA,GMRVSK)
"RTN","GMVFUT3",34,0)
 D AEDIT(X,$P(GMRVY,"^",6),.DA,GMRVSK)
"RTN","GMVFUT3",35,0)
 Q
"RTN","GMVFUT3",36,0)
AEDT(GMRVSK,DA,X) ; CALLED FROM SET/KILL LOGIC OF AEDT XREF ON EDIT
"RTN","GMVFUT3",37,0)
 ; ORDER (.06) FIELD OF VITAL TYPE (120.531) SUB-FILE OF GMRV CATEGORY
"RTN","GMVFUT3",38,0)
 ; (120.53) FILE.  THIS PROCEDURE SETS/KILLS THE FOLLOWING MUMPS
"RTN","GMVFUT3",39,0)
 ; INDICES:  "AEDIT".
"RTN","GMVFUT3",40,0)
 ;    Input variables:  GMRVSK=1 if called from SET, 2 if from KILL
"RTN","GMVFUT3",41,0)
 ;                      DA=DA array passed by reference.
"RTN","GMVFUT3",42,0)
 ;                      X=value being indexed.
"RTN","GMVFUT3",43,0)
 ;
"RTN","GMVFUT3",44,0)
 N GMRVY
"RTN","GMVFUT3",45,0)
 S GMRVY=$G(^GMRD(120.53,DA(1),1,DA,0))
"RTN","GMVFUT3",46,0)
 D AEDIT($P(GMRVY,"^"),X,.DA,GMRVSK)
"RTN","GMVFUT3",47,0)
 Q
"RTN","GMVFUT3",48,0)
APRT(GMRVSK,DA,X) ; CALLED FROM SET/KILL LOGIC OF APRT XREF ON PRINT
"RTN","GMVFUT3",49,0)
 ; ORDER (.05) FIELD OF VITAL TYPE (120.531) SUB-FILE OF GMRV CATEGORY
"RTN","GMVFUT3",50,0)
 ; (120.53) FILE.  THIS PROCEDURE SETS/KILLS THE FOLLOWING MUMPS
"RTN","GMVFUT3",51,0)
 ; INDICES:  "APRINT".
"RTN","GMVFUT3",52,0)
 ;    Input variables:  GMRVSK=1 if called from SET, 2 if from KILL
"RTN","GMVFUT3",53,0)
 ;                      DA=DA array passed by reference.
"RTN","GMVFUT3",54,0)
 ;                      X=value being indexed.
"RTN","GMVFUT3",55,0)
 ;
"RTN","GMVFUT3",56,0)
 N GMRVY
"RTN","GMVFUT3",57,0)
 S GMRVY=$G(^GMRD(120.53,DA(1),1,DA,0))
"RTN","GMVFUT3",58,0)
 D APRINT($P(GMRVY,"^"),X,.DA,GMRVSK)
"RTN","GMVFUT3",59,0)
 Q
"RTN","GMVFUT3",60,0)
AA(TYPE,CAT,DA,SK) ; This procedure updates the "AA" index for the 120.53
"RTN","GMVFUT3",61,0)
 ; file.  This index has the following format:
"RTN","GMVFUT3",62,0)
 ;    ^GMRD(120.53,"AA",TYPE,CAT,DA(1),DA)=""
"RTN","GMVFUT3",63,0)
 ;  Input variables:
"RTN","GMVFUT3",64,0)
 ;      TYPE=Vital Type (.01) field 120.531 sub-file.
"RTN","GMVFUT3",65,0)
 ;       CAT=Name (.01) field of 120.53 file.
"RTN","GMVFUT3",66,0)
 ;        DA=Passed by reference will have entry in 120.531 sub-file, DA,
"RTN","GMVFUT3",67,0)
 ;           and entry in 120.53 file, DA(1).
"RTN","GMVFUT3",68,0)
 ;        SK=1 if set xref, 2 if kill xref.
"RTN","GMVFUT3",69,0)
 ;
"RTN","GMVFUT3",70,0)
 Q:$G(TYPE)=""!($G(CAT)="")!($G(DA(1))="")!($G(DA)="")
"RTN","GMVFUT3",71,0)
 I $G(SK)=1 S ^GMRD(120.53,"AA",TYPE,CAT,DA(1),DA)=""
"RTN","GMVFUT3",72,0)
 I $G(SK)=2 K ^GMRD(120.53,"AA",TYPE,CAT,DA(1),DA)
"RTN","GMVFUT3",73,0)
 Q
"RTN","GMVFUT3",74,0)
AEDIT(TYPE,EORD,DA,SK) ; This procedure updates the "AEDIT" index for the
"RTN","GMVFUT3",75,0)
 ; 120.53 file.  This index has the following format:
"RTN","GMVFUT3",76,0)
 ;    ^GMRD(120.53,"AEDIT",TYPE,EORD,DA(1),DA)=""
"RTN","GMVFUT3",77,0)
 ;  Input variables:
"RTN","GMVFUT3",78,0)
 ;      TYPE=Vital Type (.01) field 120.531 sub-file.
"RTN","GMVFUT3",79,0)
 ;      EORD=Edit Order (.06) field of 120.531 sub-file.
"RTN","GMVFUT3",80,0)
 ;        DA=Passed by reference will have entry in 120.531 sub-file, DA,
"RTN","GMVFUT3",81,0)
 ;           and entry in 120.53 file, DA(1).
"RTN","GMVFUT3",82,0)
 ;        SK=1 if set xref, 2 if kill xref.
"RTN","GMVFUT3",83,0)
 ;
"RTN","GMVFUT3",84,0)
 Q:$G(TYPE)=""!($G(EORD)="")!($G(DA(1))="")!($G(DA)="")
"RTN","GMVFUT3",85,0)
 I $G(SK)=1 S ^GMRD(120.53,"AEDIT",TYPE,EORD,DA(1),DA)=""
"RTN","GMVFUT3",86,0)
 I $G(SK)=2 K ^GMRD(120.53,"AEDIT",TYPE,EORD,DA(1),DA)
"RTN","GMVFUT3",87,0)
 Q
"RTN","GMVFUT3",88,0)
APRINT(TYPE,PORD,DA,SK) ; This procedure updates the "APRINT" index for the
"RTN","GMVFUT3",89,0)
 ; 120.53 file.  This index has the following format:
"RTN","GMVFUT3",90,0)
 ;    ^GMRD(120.53,"APRINT",TYPE,PORD,DA(1),DA)=""
"RTN","GMVFUT3",91,0)
 ;  Input variables:
"RTN","GMVFUT3",92,0)
 ;      TYPE=Vital Type (.01) field 120.531 sub-file.
"RTN","GMVFUT3",93,0)
 ;      PORD=Print Order (.05) field of 120.531 sub-file.
"RTN","GMVFUT3",94,0)
 ;        DA=Passed by reference will have entry in 120.531 sub-file, DA,
"RTN","GMVFUT3",95,0)
 ;           and entry in 120.53 file, DA(1).
"RTN","GMVFUT3",96,0)
 ;        SK=1 if set xref, 2 if kill xref.
"RTN","GMVFUT3",97,0)
 ;
"RTN","GMVFUT3",98,0)
 Q:$G(TYPE)=""!($G(PORD)="")!($G(DA(1))="")!($G(DA)="")
"RTN","GMVFUT3",99,0)
 I $G(SK)=1 S ^GMRD(120.53,"APRINT",TYPE,PORD,DA(1),DA)=""
"RTN","GMVFUT3",100,0)
 I $G(SK)=2 K ^GMRD(120.53,"APRINT",TYPE,PORD,DA(1),DA)
"RTN","GMVFUT3",101,0)
 Q
"RTN","GMVFUT3",102,0)
SCR07(DA,Y) ; CALLED FROM INPUT TRANSFORM OF DEFAULT QUALIFIER (.07)
"RTN","GMVFUT3",103,0)
 ; FIELD OF THE VITAL TYPE (120.531) SUB-FILE OF THE GMRV VITAL CATEGORY
"RTN","GMVFUT3",104,0)
 ; (120.53) FILE.  WILL CHECK TO SEE IF QUALIFIER IS VALID FOR THIS
"RTN","GMVFUT3",105,0)
 ; VITAL TYPE AND CATEGORY.
"RTN","GMVFUT3",106,0)
 ;   Input Variables: DA = DA arrary passed by reference from screen.
"RTN","GMVFUT3",107,0)
 ;                    Y = Entry in 120.53 file being validated.
"RTN","GMVFUT3",108,0)
 ;
"RTN","GMVFUT3",109,0)
 N GMRVCHAR,GMRVFXN,GMRVTYP S GMRVFXN=0
"RTN","GMVFUT3",110,0)
 S GMRVTYP=$P($G(^GMRD(120.53,DA(1),1,DA,0)),"^"),GMRVCHAR=$P($G(^GMRD(120.52,+Y,0)),"^")
"RTN","GMVFUT3",111,0)
 I GMRVTYP>0,GMRVCHAR]"",$D(^GMRD(120.52,"AA",GMRVTYP,DA(1),GMRVCHAR,+Y)) S GMRVFXN=1
"RTN","GMVFUT3",112,0)
 Q GMRVFXN
"RTN","GMVGETD")
0^141^B10666719
"RTN","GMVGETD",1,0)
GMVGETD ;HOIFO/YH,FT-EXTRACTS WARD/ROOM-BED/PT AND PT VITALS ;2/20/02  12:38
"RTN","GMVGETD",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVGETD",3,0)
 ;
"RTN","GMVGETD",4,0)
 ; This routine uses the following IAs:
"RTN","GMVGETD",5,0)
 ; #1380  - ^DG(405.4 references   (controlled)
"RTN","GMVGETD",6,0)
 ; #1377  - ^DIC(42 references     (controlled)
"RTN","GMVGETD",7,0)
 ; #10035 - FILE 2 references      (supported)
"RTN","GMVGETD",8,0)
 ; #10039 - FILE 42 references     (supported)
"RTN","GMVGETD",9,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVGETD",10,0)
 ; #10103 - ^XLFDT calls           (supported)
"RTN","GMVGETD",11,0)
 ;
"RTN","GMVGETD",12,0)
GETVM(RESULT,GMRVDATA) ;GMV EXTRACT REC [RPC entry point]
"RTN","GMVGETD",13,0)
 ;RETURNS VITALS/MEASUREMENTS FOR A PARTICULAR PATIENT A FOR GIVEN DATE/TIME SPAN IN RESULT ARRAY.
"RTN","GMVGETD",14,0)
 ;GMRVDATA = DFN^END DATE VITAL TAKEN^VITAL TYPE (OPTIONAL)^START DATE VITAL TAKEN
"RTN","GMVGETD",15,0)
 N GMVDAYS,DFN,GMRVSDT,GMRVFDT,GMVTYPE S DFN=+$P(GMRVDATA,"^"),GMRVSDT=+$P(GMRVDATA,"^",2),GMVDAYS=$P(GMRVDATA,"^",4),GMVTYPE=$P(GMRVDATA,"^",3) K ^TMP($J,"GRPC")
"RTN","GMVGETD",16,0)
 S GMRVFDT=$P(GMRVSDT,".",1)_".2400"
"RTN","GMVGETD",17,0)
 I GMVDAYS'="" S GMRVSDT=$P(GMVDAYS,".",1)
"RTN","GMVGETD",18,0)
 S:GMVTYPE'="" GMVTYPE(1)=$P(^GMRD(120.51,$O(^GMRD(120.51,"C",GMVTYPE,0)),0),"^")
"RTN","GMVGETD",19,0)
 D EN1^GMVGETD1
"RTN","GMVGETD",20,0)
 I '$D(^TMP($J,"GRPC")) S ^TMP($J,"GRPC",1)="0^NO "_$S(GMVTYPE'="":GMVTYPE(1),1:"VITALS/MEASUREMENTS ")_" ENTERED WITHIN THIS PERIOD"
"RTN","GMVGETD",21,0)
 S RESULT=$NA(^TMP($J,"GRPC"))
"RTN","GMVGETD",22,0)
 K GMRDT,GMRVARY,GMRVITY,GMRVX,GMRZZ
"RTN","GMVGETD",23,0)
 Q
"RTN","GMVGETD",24,0)
GETLAT(RESULT,GMRDFN) ;GMV LATEST VM [RPC entry point]
"RTN","GMVGETD",25,0)
 ; RETURNS THE LATEST VITALS/MEASUREMENTS FOR A GIVEN PATIENT(GMRDFN)
"RTN","GMVGETD",26,0)
 ; IN RESULT ARRAY.
"RTN","GMVGETD",27,0)
 K ^TMP($J,"GRPC") D EN1^GMVLAT0(GMRDFN)
"RTN","GMVGETD",28,0)
 S RESULT=$NA(^TMP($J,"GRPC"))
"RTN","GMVGETD",29,0)
 Q
"RTN","GMVGETD",30,0)
WARDLOC(RESULT,DUMMY) ;GMV WARD LOCATION [RPC entry point]
"RTN","GMVGETD",31,0)
 ;RETURNS MAS WARD LOCATIONS IN RESULT ARRAY
"RTN","GMVGETD",32,0)
 K ^TMP($J,"GWARD"),^TMP($J,"GMRV") N GMRWARD,GINDEX,GN,GMR
"RTN","GMVGETD",33,0)
 D LIST^DIC(42,"","","","*","","","","","I '$$INACT42^GMVUT2(+Y)","^TMP($J,""GMRV"")")
"RTN","GMVGETD",34,0)
 S GINDEX=+$P($G(^TMP($J,"GMRV","DILIST",0)),"^")
"RTN","GMVGETD",35,0)
 I GINDEX>0 D
"RTN","GMVGETD",36,0)
 . S (GMR,GN)=0 F  S GN=$O(^TMP($J,"GMRV","DILIST",1,GN)) Q:GN'>0  D
"RTN","GMVGETD",37,0)
 . . S GMRWARD(1)=^TMP($J,"GMRV","DILIST",1,GN),GMRWARD=+^TMP($J,"GMRV","DILIST",2,GN) I $O(^DPT("CN",GMRWARD(1),0))>0 S GMR=GMR+1,^TMP($J,"GWARD",GMR)=GMRWARD_"^"_GMRWARD(1)_U_^DIC(42,GMRWARD,44)
"RTN","GMVGETD",38,0)
 K ^TMP($J,"GMRV") S RESULT=$NA(^TMP($J,"GWARD"))
"RTN","GMVGETD",39,0)
 Q
"RTN","GMVGETD",40,0)
WARDPT(RESULT,GMRWARD) ;GMV WARD PT [RPC entry point]
"RTN","GMVGETD",41,0)
 ;RETURNS A LIST OF PATIENTS ADMITTED TO A GIVEN MAS WARD(GMRWARD) IN RESULT ARRAY.
"RTN","GMVGETD",42,0)
 Q:'$D(^DPT("CN",GMRWARD))
"RTN","GMVGETD",43,0)
 N OUT,GN,DFN,GMVPAT K ^TMP($J,"GMRPT")
"RTN","GMVGETD",44,0)
 S (GN,DFN)=0 F  S DFN=$O(^DPT("CN",GMRWARD,DFN)) Q:DFN'>0  D
"RTN","GMVGETD",45,0)
 . I $D(^DPT(DFN,0)) D
"RTN","GMVGETD",46,0)
 . . S GMVPAT=""
"RTN","GMVGETD",47,0)
 . . D PTINFO^GMVUTL3(.GMVPAT,DFN)
"RTN","GMVGETD",48,0)
 . . S OUT($P(^DPT(DFN,0),"^"))=DFN_"^"_$P(^DPT(DFN,0),"^")_"^"_GMVPAT
"RTN","GMVGETD",49,0)
 I '$D(OUT) Q
"RTN","GMVGETD",50,0)
 S DFN="" F  S DFN=$O(OUT(DFN)) Q:DFN=""  S GN=GN+1,^TMP($J,"GMRPT",GN)=OUT(DFN)
"RTN","GMVGETD",51,0)
 S RESULT=$NA(^TMP($J,"GMRPT"))
"RTN","GMVGETD",52,0)
 Q
"RTN","GMVGETD",53,0)
ROOMBED(RESULT,GMRWARD) ;GMV ROOM/BED [RPC entry point]
"RTN","GMVGETD",54,0)
 ;RETURNS A LIST OF ROOMS/BEDS FOR A GIVEN MAS WARD(GMRWARD) IN RESULT ARRAY.
"RTN","GMVGETD",55,0)
 Q:'$D(^DIC(42,"B",GMRWARD))
"RTN","GMVGETD",56,0)
 N GN,GROOM,GWARD,GMVTMP K ^TMP($J,"GROOM")
"RTN","GMVGETD",57,0)
 S (GN,GROOM)=0,GWARD=$O(^DIC(42,"B",GMRWARD,0)) I GWARD'>0 S ^TMP($J,"GROOM",1)="NO ROOM" G QUIT
"RTN","GMVGETD",58,0)
 F  S GROOM=$O(^DG(405.4,"W",GWARD,GROOM)) Q:GROOM'>0  I $D(^DG(405.4,GROOM)) D 
"RTN","GMVGETD",59,0)
 . S GMVTMP($P($P(^DG(405.4,GROOM,0),"^"),"-",1))=GROOM
"RTN","GMVGETD",60,0)
 . ;S GN=GN+1,^TMP($J,"GROOM",GN)=GROOM_"^"_$P(^DG(405.4,GROOM,0),"^")
"RTN","GMVGETD",61,0)
 . Q
"RTN","GMVGETD",62,0)
 S GROOM="",GN=0
"RTN","GMVGETD",63,0)
 F  S GROOM=$O(GMVTMP(GROOM)) Q:GROOM=""  D
"RTN","GMVGETD",64,0)
 . S GN=GN+1,^TMP($J,"GROOM",GN)=GMVTMP(GROOM)_"^"_GROOM
"RTN","GMVGETD",65,0)
 . Q
"RTN","GMVGETD",66,0)
QUIT S RESULT=$NA(^TMP($J,"GROOM"))
"RTN","GMVGETD",67,0)
 Q
"RTN","GMVGETD1")
0^142^B3929660
"RTN","GMVGETD1",1,0)
GMVGETD1 ;HOIFO/YH-EXTRACT VITALS/MEASUREMENT RECORDS FOR A GIVEN DATE ;8/31/99  15:03
"RTN","GMVGETD1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVGETD1",3,0)
 ;
"RTN","GMVGETD1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVGETD1",5,0)
 ; <None>
"RTN","GMVGETD1",6,0)
 ;
"RTN","GMVGETD1",7,0)
EN1 ;CALLED FROM GMVGETD ENTRY POINT GETVM 
"RTN","GMVGETD1",8,0)
 K ^TMP($J,"GMRV")
"RTN","GMVGETD1",9,0)
 F GMRVTY="T","P","R","BP","HT","WT","CVP","CG","PO2","PN"  S GMRVITY=$O(^GMRD(120.51,"C",GMRVTY,0)) I GMRVITY>0 D SETAR
"RTN","GMVGETD1",10,0)
 I $O(^TMP($J,"GMRV",0))'>0 K ^TMP($J,"GMRV") Q
"RTN","GMVGETD1",11,0)
 N GJ K ^TMP("GRPC") S GJ=0
"RTN","GMVGETD1",12,0)
 S GMRDATE=0 F  S GMRDATE=$O(^TMP($J,"GMRV",GMRDATE)) Q:GMRDATE'>0  D PRT
"RTN","GMVGETD1",13,0)
QT ; 
"RTN","GMVGETD1",14,0)
 K ^TMP($J,"GMRV") Q
"RTN","GMVGETD1",15,0)
SETAR ;
"RTN","GMVGETD1",16,0)
 I GMVTYPE'="",GMVTYPE'=GMRVTY Q
"RTN","GMVGETD1",17,0)
 F GMRDT=0:0 S GMRDT=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRDT)) Q:GMRDT'>0  S GMRDATE=9999999-GMRDT I '(GMRDATE>GMRVFDT!(GMRDATE<GMRVSDT)) D SETND
"RTN","GMVGETD1",18,0)
 Q
"RTN","GMVGETD1",19,0)
SETND ;
"RTN","GMVGETD1",20,0)
 F GMRVDA=0:0 S GMRVDA=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRDT,GMRVDA)) Q:GMRVDA'>0  D SETUT
"RTN","GMVGETD1",21,0)
 Q
"RTN","GMVGETD1",22,0)
SETUT Q:$D(^GMR(120.5,GMRVDA,2))
"RTN","GMVGETD1",23,0)
  S ^TMP($J,"GMRV",+$E(GMRDATE,1,12),GMRVTY,GMRVDA)=""
"RTN","GMVGETD1",24,0)
 Q
"RTN","GMVGETD1",25,0)
PRT ;SAVE V/M BY DATE/TIME
"RTN","GMVGETD1",26,0)
 F GMRVTY="T","P","R","BP","HT","WT","CVP","CG","PO2","PN" I $D(^TMP($J,"GMRV",GMRDATE,GMRVTY)) F GMRVDA=0:0 S GMRVDA=$O(^TMP($J,"GMRV",GMRDATE,GMRVTY,GMRVDA)) Q:GMRVDA'>0  D SETLN^GMVGETD2
"RTN","GMVGETD1",27,0)
 Q
"RTN","GMVGETD2")
0^143^B19578080
"RTN","GMVGETD2",1,0)
GMVGETD2 ;HOIFO/YH-EXTRACT VITALS/MEASUREMENT RECORDS FOR A GIVEN DATE (CONT.) ;8/31/99  15:04
"RTN","GMVGETD2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVGETD2",3,0)
 ;
"RTN","GMVGETD2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVGETD2",5,0)
 ; <None>
"RTN","GMVGETD2",6,0)
 ;
"RTN","GMVGETD2",7,0)
SETLN ;CALLED BY GMVGETD1
"RTN","GMVGETD2",8,0)
 S GJ=GJ+1,GMRDAT=^GMR(120.5,GMRVDA,0),^TMP($J,"GRPC",GJ)=GMRVDA_"^"_$E(GMRDATE,4,5)_"/"_$E(GMRDATE,6,7)_"/"_$E(GMRDATE,2,3)
"RTN","GMVGETD2",9,0)
 S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_"@"_$E($P(GMRDATE,".",2)_"000000",1,2)_":"_$E($P(GMRDATE,".",2)_"000000",3,4)_"   "
"RTN","GMVGETD2",10,0)
 S GMRVTY(1)=$S(GMRVTY="T":"T: ",GMRVTY="P":"P: ",GMRVTY="R":"R: ",GMRVTY="BP":"B/P: ",GMRVTY="WT":"Wt: ",GMRVTY="HT":"Ht: ",GMRVTY="CG":"Circumference/Girth: ",GMRVTY="CVP":"Central Venous Pressure: ",GMRVTY="PO2":"Pulse Oximetry: ",1:"")
"RTN","GMVGETD2",11,0)
 I GMRVTY(1)="" S GMRVTY(1)=$S(GMRVTY="PN":"Pain: ",1:"")
"RTN","GMVGETD2",12,0)
 S GMRVTY(1)=GMRVTY(1)_"  "
"RTN","GMVGETD2",13,0)
 S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_GMRVTY(1)
"RTN","GMVGETD2",14,0)
 I GMRVTY="PN" D  Q
"RTN","GMVGETD2",15,0)
 . S ^TMP($J,"GRPC",GJ)=^(GJ)_$P(GMRDAT,"^",8)_"  "_$S(+$P(GMRDAT,"^",8)=99:"Unable to respond",+$P(GMRDAT,"^",8)=10:"Worst imaginable pain",$P(GMRDAT,"^",8)="0":"No pain",1:"")
"RTN","GMVGETD2",16,0)
 I "PRBPCVPCGPO2"[GMRVTY S GMRVX=GMRVTY,GMRVX(0)=$P(GMRDAT,"^",8) D
"RTN","GMVGETD2",17,0)
 . I '(GMRVX(0)<0!(GMRVX(0)>0)!($E(GMRVX(0))="0")) S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_GMRVX(0)_" " Q
"RTN","GMVGETD2",18,0)
 . D EN1^GMVSAS0
"RTN","GMVGETD2",19,0)
 . S Z=$S(GMRVTY="CG":$J($P(GMRDAT,"^",8),0,2),GMRVTY="CVP":$J($P(GMRDAT,"^",8),0,1),GMRVTY'="BP":$J($P(GMRDAT,"^",8),3,0),1:$P(GMRDAT,"^",8)) D:GMRVTY'="BP" BLNK
"RTN","GMVGETD2",20,0)
 . S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_Z_$S('$D(GMRVX(1)):" ",'GMRVX(1):"",1:"*")
"RTN","GMVGETD2",21,0)
 . I GMRVTY="CG" S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_" in ("_$J(Z/.3937,0,2)_" cm)"
"RTN","GMVGETD2",22,0)
 . I GMRVTY="CVP" S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_" cmH2O ("_$J(Z/1.36,0,1)_" mmHg)"
"RTN","GMVGETD2",23,0)
 . I GMRVTY="PO2" D
"RTN","GMVGETD2",24,0)
 . . S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_"%"
"RTN","GMVGETD2",25,0)
 . . I $P(GMRDAT,"^",10)["%"!($P(GMRDAT,"^",10)[" l/min") D
"RTN","GMVGETD2",26,0)
 . . . S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_" with supplemental O2"
"RTN","GMVGETD2",27,0)
 . . . N GMV S GMV=$P(GMRDAT,"^",10) I GMV[" l/min" S GMV=$P(GMV," l/min")_"L/min"_$P(GMV," l/min",2)
"RTN","GMVGETD2",28,0)
 . . . S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_" "_GMV
"RTN","GMVGETD2",29,0)
 I GMRVTY="T" S X=$P(GMRDAT,"^",8) D
"RTN","GMVGETD2",30,0)
 . I X'>0 S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_X Q
"RTN","GMVGETD2",31,0)
 . S GMRVX=GMRVTY,GMRVX(0)=X D EN1^GMVSAS0
"RTN","GMVGETD2",32,0)
 . D EN1^GMVUTL S:'Y Y="" S Z=$J(X,5,1) D BLNK S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_Z_" F " S Z=$J(Y,4,1) D BLNK S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_"("_Z_" C)"_$S('$D(GMRVX(1)):" ",'GMRVX(1):"",1:"*")
"RTN","GMVGETD2",33,0)
 I GMRVTY="HT" S X=$P(GMRDAT,"^",8) D
"RTN","GMVGETD2",34,0)
 . I X'>0 S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_X Q
"RTN","GMVGETD2",35,0)
 . D EN2^GMVUTL S:'Y Y="" S Z=$J(X,5,2) D BLNK S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_Z_" in " S Z=$J(Y,5,2) D BLNK S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_"("_Z_" cm)"
"RTN","GMVGETD2",36,0)
 I GMRVTY="WT" S X=$P(GMRDAT,"^",8) D
"RTN","GMVGETD2",37,0)
 . I X'>0 S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_X Q
"RTN","GMVGETD2",38,0)
 . D EN3^GMVUTL S:'Y Y="" S Z=$J(X,7,2) D BLNK S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_Z_" lb " S Z=$J(Y,6,2) D BLNK S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_"("_Z_" kg)"
"RTN","GMVGETD2",39,0)
 Q:(+$P(GMRDAT,"^",8)'>0)&($P(GMRDAT,"^",8)'="0")  S GMRVITY=+$P(GMRDAT,"^",3)
"RTN","GMVGETD2",40,0)
 K GMRVARY S (GMRZZ,GMRVARY)="" I $P($G(^GMR(120.5,GMRVDA,5,0)),"^",4)>0 D
"RTN","GMVGETD2",41,0)
 . D CHAR^GMVCHAR(GMRVDA,.GMRVARY,GMRVITY) S GMRZZ=$$WRITECH^GMVCHAR(GMRVDA,.GMRVARY,9) S:GMRZZ'=""&(GMRVTY'="PO2") GMRZZ=" ("_GMRZZ_")"
"RTN","GMVGETD2",42,0)
 . S:GMRVTY="PO2" ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_" "_GMRZZ
"RTN","GMVGETD2",43,0)
 .  I GMRVTY="P",GMRZZ["DORSALIS PEDIS",$P(GMRDAT,"^",8)=1 S ^TMP($J,"GRPC",GJ)=$P(^(GJ),"*",1)_$P(^(GJ),"*",2)
"RTN","GMVGETD2",44,0)
 . S:GMRVTY'="PO2" ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_" "_GMRZZ
"RTN","GMVGETD2",45,0)
 I GMRVTY="WT" S GMRBMI="",GMRBMI(1)=$P(GMRDAT,"^"),GMRBMI(2)=+$P(GMRDAT,"^",8) D CALBMI^GMVBMI(.GMRBMI) D:GMRBMI'=""
"RTN","GMVGETD2",46,0)
 . S GJ=GJ+1,^TMP($J,"GRPC",GJ)=$E(GMRDATE,4,5)_"/"_$E(GMRDATE,6,7)_"/"_$E(GMRDATE,2,3)
"RTN","GMVGETD2",47,0)
 . S ^TMP($J,"GRPC",GJ)="       @"_$E($P(GMRDATE,".",2)_"000000",1,2)_":"_$E($P(GMRDATE,".",2)_"000000",3,4)_"   Body Mass Index:   "_GMRBMI
"RTN","GMVGETD2",48,0)
 K Z,GMRBMI Q
"RTN","GMVGETD2",49,0)
BLNK ;
"RTN","GMVGETD2",50,0)
 F I=1:1:$L(Z) Q:$E(Z,I)'=" "
"RTN","GMVGETD2",51,0)
 S Z=$E(Z,I,$L(Z))
"RTN","GMVGETD2",52,0)
 Q
"RTN","GMVGETQ")
0^144^B4969394
"RTN","GMVGETQ",1,0)
GMVGETQ ;HOIFO/YH,FT-UTILITIES TO OBTAIN DATE/TIME, HOSPITAL, DUZ, VITAL CATEGORY AND EDIT V/M ;9/6/02  09:35
"RTN","GMVGETQ",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVGETQ",3,0)
 ;
"RTN","GMVGETQ",4,0)
 ; This routine uses the following IAs:
"RTN","GMVGETQ",5,0)
 ; #10103 - ^XLFDT calls           (supported)
"RTN","GMVGETQ",6,0)
 ;
"RTN","GMVGETQ",7,0)
GETDT(RESULT,GMRDATE) ;GMV CONVERT DATE [RPC entry point]
"RTN","GMVGETQ",8,0)
 ;INPUT VARIABLE:
"RTN","GMVGETQ",9,0)
 ;GMRDATE - DATE/TIME FROM EDIT.TEXT ENTERED BY USER
"RTN","GMVGETQ",10,0)
 ;OUTPUT VARIABLE:
"RTN","GMVGETQ",11,0)
 ;RESULT - CONTAINS INTERNAL AND EXTERNAL DATE/TIME
"RTN","GMVGETQ",12,0)
 N GDATE D DT^DILF("ETS",GMRDATE,.GDATE)
"RTN","GMVGETQ",13,0)
 I $G(GDATE)'>0 S RESULT="" Q
"RTN","GMVGETQ",14,0)
 I $G(GDATE)>$$NOW^XLFDT S RESULT="" Q
"RTN","GMVGETQ",15,0)
 S RESULT=$G(GDATE)_"^"_$G(GDATE(0))
"RTN","GMVGETQ",16,0)
 Q
"RTN","GMVGETQ",17,0)
 ;
"RTN","GMVGETQ",18,0)
ADDQUAL(RESULT,GMRVDATA) ; Add qualifiers to FILE 120.5 entry
"RTN","GMVGETQ",19,0)
 ; ADD QUALIFIER TO 120.505 SUBFILE
"RTN","GMVGETQ",20,0)
 ; Input:
"RTN","GMVGETQ",21,0)
 ;    GMRVDATA=120.5 IEN^QUALIFIER (120.52) IEN
"RTN","GMVGETQ",22,0)
 ; Output:
"RTN","GMVGETQ",23,0)
 ;    RESULT = "" or the IEN of the subfile entry
"RTN","GMVGETQ",24,0)
 ;
"RTN","GMVGETQ",25,0)
 N GMVCNT,GMVERR,GMVFDA,GMVOKAY,GMRVIEN,GMRVQUAL
"RTN","GMVGETQ",26,0)
 S GMRVIEN=+$P(GMRVDATA,"^",1) ;File 120.5 ien
"RTN","GMVGETQ",27,0)
 S GMRVQUAL=+$P(GMRVDATA,"^",2) ;File 120.52 ien
"RTN","GMVGETQ",28,0)
 ; Does File 120.5 entry exist?
"RTN","GMVGETQ",29,0)
 I '$D(^GMR(120.5,GMRVIEN,0)) D  Q
"RTN","GMVGETQ",30,0)
 .S RESULT=""
"RTN","GMVGETQ",31,0)
 .;or S RESULT="-1^Vitals entry not found."
"RTN","GMVGETQ",32,0)
 .Q
"RTN","GMVGETQ",33,0)
 ; Is the qualifier already stored?
"RTN","GMVGETQ",34,0)
 I $O(^GMR(120.5,GMRVIEN,5,"B",GMRVQUAL,0))>0 D  Q
"RTN","GMVGETQ",35,0)
 .S RESULT=""
"RTN","GMVGETQ",36,0)
 .;or S RESULT="-1^Qualifier already filed. No change made."
"RTN","GMVGETQ",37,0)
 .Q
"RTN","GMVGETQ",38,0)
 ; Legitimate Qualifier?
"RTN","GMVGETQ",39,0)
 I '$D(^GMRD(120.52,GMRVQUAL,0)) D  Q
"RTN","GMVGETQ",40,0)
 .S RESULT=""
"RTN","GMVGETQ",41,0)
 .; or S RESULT="-1^"_$P(GMRVDATA,U,2)_" is not a legitimate qualifier"
"RTN","GMVGETQ",42,0)
 .Q
"RTN","GMVGETQ",43,0)
 S GMVCNT=0 ;counter for number of tries to lock an entry
"RTN","GMVGETQ",44,0)
B2 ; Lock the entry
"RTN","GMVGETQ",45,0)
 I GMVCNT>3 D  Q  ;4 strikes and you're out
"RTN","GMVGETQ",46,0)
 .S RESULT=""
"RTN","GMVGETQ",47,0)
 .;or S RESULT="-1^Could not lock entry to file qualifiers."
"RTN","GMVGETQ",48,0)
 .L -^GMR(120.5,GMRVIEN,0)
"RTN","GMVGETQ",49,0)
 .Q
"RTN","GMVGETQ",50,0)
 L +^GMR(120.5,GMRVIEN,0):1
"RTN","GMVGETQ",51,0)
 S GMVCNT=GMVCNT+1
"RTN","GMVGETQ",52,0)
 I '$T L -^GMR(120.5,GMRVIEN,0) G B2
"RTN","GMVGETQ",53,0)
 ; Store the  qualifier
"RTN","GMVGETQ",54,0)
 S GMVFDA(120.505,"+1,"_GMRVIEN_",",.01)=GMRVQUAL
"RTN","GMVGETQ",55,0)
 D UPDATE^DIE("","GMVFDA","GMVOKAY","GMVERR")
"RTN","GMVGETQ",56,0)
 L -^GMR(120.5,GMRVIEN,0)
"RTN","GMVGETQ",57,0)
 I $D(GMVERR) S RESULT="" ; or S RESULT="-1^*fileman error message*"
"RTN","GMVGETQ",58,0)
 E  S RESULT=+$G(GMVOKAY(1))
"RTN","GMVGETQ",59,0)
 Q
"RTN","GMVGGR1")
0^146^B19614768
"RTN","GMVGGR1",1,0)
GMVGGR1 ;HOIFO/YH,FT-VITAL SIGNS RECORD SF 511 ;6/12/02  11:58
"RTN","GMVGGR1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVGGR1",3,0)
 ;
"RTN","GMVGGR1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVGGR1",5,0)
 ;  #3214 - ^GMRYAPI calls         (private)
"RTN","GMVGGR1",6,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVGGR1",7,0)
 ; #10096 - ^%ZOSF calls           (supported)
"RTN","GMVGGR1",8,0)
 ;
"RTN","GMVGGR1",9,0)
VMDATA(RESULT,GMVDATA) ;GMV V/M ALLDATA [RPC entry point]
"RTN","GMVGGR1",10,0)
 ;ENTRY POINT FROM GMRV SF511 GUI TO EXTRACT ALL DATA
"RTN","GMVGGR1",11,0)
 ; GMVDATA: piece 1 = DFN
"RTN","GMVGGR1",12,0)
 ;                2 = start date
"RTN","GMVGGR1",13,0)
 ;                3 = end date
"RTN","GMVGGR1",14,0)
 ;                4 = 0 or 1
"RTN","GMVGGR1",15,0)
 ;
"RTN","GMVGGR1",16,0)
 K ^TMP($J) S (GMROUT,GN,GQT)=0,DFN=+$P(GMVDATA,"^"),GMRSTRT=$P(GMVDATA,"^",2),GMRFIN=$P(GMVDATA,"^",3),GMR=+$P(GMVDATA,"^",4)
"RTN","GMVGGR1",17,0)
 N GRADIAL,GAPICAL,GSEL,GBRACH S GSEL=0
"RTN","GMVGGR1",18,0)
 S GAPICAL=$O(^GMRD(120.52,"B","APICAL",0)),GRADIAL=$O(^GMRD(120.52,"B","RADIAL",0)),GBRACH=$O(^GMRD(120.52,"B","BRACHIAL",0))
"RTN","GMVGGR1",19,0)
 S Y=GMRSTRT X ^DD("DD") S GSTRFIN=Y S Y=GMRFIN X ^DD("DD") S GSTRFIN=GSTRFIN_" - "_Y
"RTN","GMVGGR1",20,0)
 S GMRHT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM")
"RTN","GMVGGR1",21,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMVGGR1",22,0)
 F GTYPE="B","H","P","R","T","W","PO2","CVP","CG","PN" D SETT
"RTN","GMVGGR1",23,0)
 S GRPT=5 D:GMR'=1 SETIO D ^GMVGGR2
"RTN","GMVGGR1",24,0)
Q1 K GMR,GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMVGGR1",25,0)
 D QIO^GMVGR5
"RTN","GMVGGR1",26,0)
 K GRPT,GMROUT,GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GHT,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMVGGR1",27,0)
 K GLINE,GMRQUAL,^TMP($J,"GTNM"),G,GDA,GDIP,GDOP,GINF,GMIN,GMRFIN,GMRHT,GMRSITE,GMRSTRT,GMRVARY,GMRVHLOC,GMRWARD,GN,GNDATE,GNSHFT,GRNDIP,GRNDOP,GRNGIP,GSIP,GSOP,GSTAR,GSTRFIN,GSUB
"RTN","GMVGGR1",28,0)
 Q
"RTN","GMVGGR1",29,0)
SETT ;SET GMRT
"RTN","GMVGGR1",30,0)
 S GTYP(1)=$S(GTYPE="B":"BLOOD PRESSURE",GTYPE="P":"PULSE",GTYPE="R":"RESPIRATION",GTYPE="T":"TEMPERATURE",GTYPE="H":"HEIGHT",GTYPE="W":"WEIGHT",GTYPE="CG":"CIRCUMFERENCE/GIRTH",GTYPE="PO2":"PULSE OXIMETRY",1:"")
"RTN","GMVGGR1",31,0)
 I GTYP(1)="" S GTYP(1)=$S(GTYPE="CVP":"CENTRAL VENOUS PRESSURE",GTYPE="PN":"PAIN",1:"")
"RTN","GMVGGR1",32,0)
 Q:GTYP(1)=""
"RTN","GMVGGR1",33,0)
 S GTYP=$O(^GMRD(120.51,"B",GTYP(1),""))
"RTN","GMVGGR1",34,0)
 I GTYP>0 F GX=GSTART1:0 S GX=$O(^GMR(120.5,"AA",DFN,GTYP,GX)) Q:GX>GEND1!(GX'>0)  F GEN=0:0 S GEN=$O(^GMR(120.5,"AA",DFN,GTYP,GX,GEN)) Q:GEN'>0  I '$D(^GMR(120.5,GEN,2)) D BLDARR
"RTN","GMVGGR1",35,0)
 Q
"RTN","GMVGGR1",36,0)
BLDARR ;
"RTN","GMVGGR1",37,0)
 S GDATA=$S($D(^GMR(120.5,GEN,0)):^(0),1:"")
"RTN","GMVGGR1",38,0)
 S GMRVX=GTYPE,GMRVX(0)=$P(GDATA,"^",8),GMRVX(1)=0  D:GMRVX(0)>0!(GMRVX(0)<0)!($E(GMRVX(0))="0") EN1^GMVSAS0
"RTN","GMVGGR1",39,0)
 K GMRVARY S GMRVARY="" I $P($G(^GMR(120.5,GEN,5,0)),"^",4)>0 D CHAR^GMVCHAR(GEN,.GMRVARY,GTYP)
"RTN","GMVGGR1",40,0)
 K GG S GG="" I $O(GMRVARY(0)) D
"RTN","GMVGGR1",41,0)
 . S GG(1)=0 F  S GG(1)=$O(GMRVARY(GG(1))) Q:GG(1)'>0  S GG(2)=0 F  S GG(2)=$O(GMRVARY(GG(1),GG(2))) Q:GG(2)'>0  S GG(3)="" F  S GG(3)=$O(GMRVARY(GG(1),GG(2),GG(3))) Q:GG(3)=""  S GG=GG_$S(GG="":"",1:";")_GG(3)
"RTN","GMVGGR1",42,0)
 I GTYPE="P",GSEL S OK=0 D  Q:'OK
"RTN","GMVGGR1",43,0)
 . I '$D(^GMR(120.5,GEN,5,"B")) S OK=1 Q
"RTN","GMVGGR1",44,0)
 . I $D(^GMR(120.5,GEN,5,"B",GRADIAL)) S OK=1 Q
"RTN","GMVGGR1",45,0)
 . I $D(^GMR(120.5,GEN,5,"B",GAPICAL)) S OK=1 Q
"RTN","GMVGGR1",46,0)
 . I $D(^GMR(120.5,GEN,5,"B",GBRACH)) S OK=1
"RTN","GMVGGR1",47,0)
 I $P(GDATA,"^",8)="" Q
"RTN","GMVGGR1",48,0)
 S ^TMP($J,"GMRVG",9999999-GX,GTYPE,$P(GDATA,"^",8))=GG_"^"_$S($G(GMRVX(1))>0:1,1:"")_"^^"_$P(GDATA,"^",10)
"RTN","GMVGGR1",49,0)
 I GTYPE="P",GG["DORSALIS PEDIS" D
"RTN","GMVGGR1",50,0)
 . I $P(GDATA,"^",8)=1 S $P(^TMP($J,"GMRVG",9999999-GX,GTYPE,$P(GDATA,"^",8)),"^",2)=0
"RTN","GMVGGR1",51,0)
 ;. E  I $P(GDATA,"^",8)=0 S $P(^TMP($J,"GMRVG",9999999-GX,GTYPE,$P(GDATA,"^",8)),"^",2)=1
"RTN","GMVGGR1",52,0)
 S:$D(^TMP($J,"GMRVG",9999999-GX,"H",$P(GDATA,"^",8))) GHT=$P(GDATA,"^",8)
"RTN","GMVGGR1",53,0)
 I GTYPE="B",$P(GDATA,"^",8)'>0 S ^TMP($J,"GMRVG",9999999-GX,"B",$P(GDATA,"^",8))="^^"
"RTN","GMVGGR1",54,0)
 K GG
"RTN","GMVGGR1",55,0)
 Q
"RTN","GMVGGR1",56,0)
SETIO ;
"RTN","GMVGGR1",57,0)
 S X="GMRYRP0" X ^%ZOSF("TEST") Q:'$T
"RTN","GMVGGR1",58,0)
 D IO^GMVGR5
"RTN","GMVGGR1",59,0)
 D SETIOAR
"RTN","GMVGGR1",60,0)
 Q
"RTN","GMVGGR1",61,0)
SETIOAR F GTYPE1="XI"_($$INPUT^GMRYAPI()+4),"XO"_($$OUTPUT^GMRYAPI()+1) F GDT=0:0 S GDT=$O(^TMP($J,"GMR",GTYPE1,GDT)) Q:GDT'>0  F GDTA=0:0 S GDTA=$O(^TMP($J,"GMR",GTYPE1,GDT,GDTA)) Q:GDTA=""  D SETIOAR1
"RTN","GMVGGR1",62,0)
 Q
"RTN","GMVGGR1",63,0)
SETIOAR1 S:GTYPE1["XI" ^TMP($J,"GMRVG",GDT,"I",GDTA)="^" S:GTYPE1["XO" ^TMP($J,"GMRVG",GDT,"O",GDTA)="^"
"RTN","GMVGGR1",64,0)
 Q
"RTN","GMVGGR2")
0^147^B16039152
"RTN","GMVGGR2",1,0)
GMVGGR2 ;HOIFO/YH,FT-SET ^TMP($J) GLOBAL ;9/30/02  14:58
"RTN","GMVGGR2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVGGR2",3,0)
 ;CONTINUTATION OF GMVGGR1
"RTN","GMVGGR2",4,0)
 ;
"RTN","GMVGGR2",5,0)
 ; This routine uses the following IAs:
"RTN","GMVGGR2",6,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVGGR2",7,0)
 ;
"RTN","GMVGGR2",8,0)
GRAPH ;
"RTN","GMVGGR2",9,0)
 D:GMR=0 SETV
"RTN","GMVGGR2",10,0)
 I '$D(^TMP($J,"GMRVG")) S GN=GN+1,^TMP($J,GN)="NO DATA",RESULT=$NA(^TMP($J)) Q
"RTN","GMVGGR2",11,0)
 K GMRQUAL S GDT=0 F  S GDT=$O(^TMP($J,"GMRVG",GDT)) Q:GDT'>0  D
"RTN","GMVGGR2",12,0)
 .  S:GMR=0 GN=GN+1,^TMP($J,GN)="^^^^^^^^^^^^^^^^^^^^^" D DATE
"RTN","GMVGGR2",13,0)
 .  S GI="" F  S GI=$O(^TMP($J,"GMRVG",GDT,GI)) Q:GI=""  D
"RTN","GMVGGR2",14,0)
 . . S GK="" F  S GK=$O(^TMP($J,"GMRVG",GDT,GI,GK)) Q:GK=""  D SETA
"RTN","GMVGGR2",15,0)
 D KVAR^VADPT K VA
"RTN","GMVGGR2",16,0)
 ;RETURN CALL ROUTINE WITH QUALIFIERS
"RTN","GMVGGR2",17,0)
 I GMR=1,$D(GMRQUAL) D
"RTN","GMVGGR2",18,0)
 . S (GQ,GQ(1))=""
"RTN","GMVGGR2",19,0)
 . F  S GQ=$O(GMRQUAL(GQ)) Q:GQ=""  D
"RTN","GMVGGR2",20,0)
 . . S I=0,GQ(1)=$S(GQ="T":"TEMPERATURE",GQ="P":"PULSE",GQ="R":"RESPIRATION",GQ="B":"BLOOD PRESSURE",GQ="H":"HEIGHT",GQ="W":"WEIGHT",GQ="CVP":"CVP",GQ="PO2":"PULSE OXIMETRY",GQ="CG":"CIRCUMFERENCE/GIRTH",1:"")
"RTN","GMVGGR2",21,0)
 . . Q:GQ(1)=""  S GN=GN+1,^TMP($J,GN)=GQ(1)_"--- "
"RTN","GMVGGR2",22,0)
 . . S GQ(2)="" F  S GQ(2)=$O(GMRQUAL(GQ,GQ(2))) Q:GQ(2)=""  S I=I+1 S:I>1 ^TMP($J,GN)=^(GN)_"," S ^TMP($J,GN)=^TMP($J,GN)_" "_GQ(2)
"RTN","GMVGGR2",23,0)
 K GQ,GG,GI,GMRVJ,GSYNO,GHOLD,GLINE,GMRQUAL
"RTN","GMVGGR2",24,0)
 K ^TMP($J,"GMR"),^TMP($J,"GMRVG")
"RTN","GMVGGR2",25,0)
 S RESULT=$NA(^TMP($J))
"RTN","GMVGGR2",26,0)
 Q
"RTN","GMVGGR2",27,0)
SETV ;Set patient data in ^TMP($J,"GMRK" global
"RTN","GMVGGR2",28,0)
 D DEM^VADPT,INP^VADPT
"RTN","GMVGGR2",29,0)
 S GN=1,^TMP($J,GN)=$S(VADM(1)'="":VADM(1),1:"         ")_"  "_$S(VADM(2)'="":$P(VADM(2),"^",2),1:" ")_"  "_$S($D(VADM(3)):$P(VADM(3),"^",2),1:" ")_"  "_$S($D(VADM(4)):VADM(4),1:" ")_" (Yrs)"
"RTN","GMVGGR2",30,0)
 S ^TMP($J,GN)=^(GN)_"  "_$S($D(VADM(5)):$P(VADM(5),"^",2),1:" ")
"RTN","GMVGGR2",31,0)
 S GN=2,^TMP($J,GN)="Unit: "_$P($G(VAIN(4)),"^",2)_"   Room: "_$P($G(VAIN(5)),"-",1,2)
"RTN","GMVGGR2",32,0)
 I '$D(GMRVHLOC) S GMRVHLOC=$$HOSPLOC^GMVUTL1(+$G(VAIN(4)))
"RTN","GMVGGR2",33,0)
 S GN=3,^TMP($J,GN)="Division: "_$$DIVISION^GMVUTL1(+GMRVHLOC)
"RTN","GMVGGR2",34,0)
 S GN=4,^TMP($J,GN)=GSTRFIN
"RTN","GMVGGR2",35,0)
 Q
"RTN","GMVGGR2",36,0)
DATE S:GMR=0 $P(^TMP($J,GN),"^")=$E(GDT,4,5)_"-"_$E(GDT,6,7)_"-"_$E(GDT,2,3)
"RTN","GMVGGR2",37,0)
 S:GMR=0 Y=$E($P(GDT,".",2)_"0000",1,4),$P(^TMP($J,GN),"^",2)=$E(Y,1,2)_":"_$E(Y,3,4)
"RTN","GMVGGR2",38,0)
 Q
"RTN","GMVGGR2",39,0)
SETA ;Store measurements in ^TMP($J, global
"RTN","GMVGGR2",40,0)
 S GK(1)=GK
"RTN","GMVGGR2",41,0)
 I GK(1)="Unavailable" S GK(1)="Unavail"
"RTN","GMVGGR2",42,0)
 I GI="I" S:GMR=0 $P(^TMP($J,GN),"^",17)=GK(1) Q
"RTN","GMVGGR2",43,0)
 I GI="O" S:GMR=0 $P(^TMP($J,GN),"^",18)=GK(1) Q
"RTN","GMVGGR2",44,0)
 I GI="PN" S:GMR=0 $P(^TMP($J,GN),"^",19)=GK(1) Q
"RTN","GMVGGR2",45,0)
 S (GMRSITE,GMRSITE(1),GINF,GMRVJ)=""
"RTN","GMVGGR2",46,0)
 I GK(1)'="" D  Q:GMR=1
"RTN","GMVGGR2",47,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GDT,GI,GK(1))),"^"),GMRVJ=$P($G(^(GK(1))),"^",2),GINF=$P($G(^(GK(1))),"^",4)
"RTN","GMVGGR2",48,0)
 . I GMRSITE(1)'="" D SYNOARY^GMVLGQU
"RTN","GMVGGR2",49,0)
 I GI="R" S $P(^TMP($J,GN),"^",5)=GK(1)_$S(GMRVJ=1:"*",1:"")_"- "_GMRSITE Q
"RTN","GMVGGR2",50,0)
 I GI="H" D  Q
"RTN","GMVGGR2",51,0)
 . S $P(^TMP($J,GN),"^",11)=GK(1)_"- "_GMRSITE,$P(^TMP($J,GN),"^",12)=$S(GK(1)>0:$J(GK(1)*2.54,0,2),1:"") S:GK(1)>0 GMRHT=(GK(1)*2.54)/100
"RTN","GMVGGR2",52,0)
 I GI="PO2" D  Q
"RTN","GMVGGR2",53,0)
 . S (GINF(1),GINF(2))="" I GINF'="" D PO2^GMVLGQU(.GINF)
"RTN","GMVGGR2",54,0)
 . S $P(^TMP($J,GN),"^",6)=GK(1)_$S(GMRVJ=1:"*",1:"")_"- "_GMRSITE_"-"_GINF(1)_"-"_GINF(2)
"RTN","GMVGGR2",55,0)
 I GI="CVP" D  Q
"RTN","GMVGGR2",56,0)
 . S $P(^TMP($J,GN),"^",15)=$S(GK(1)>0!(GK(1)<0):$J(GK(1),0,1),1:GK(1))_$S(GMRVJ=1:"*",1:"")
"RTN","GMVGGR2",57,0)
 . S $P(^TMP($J,GN),"^",16)=$S(GK(1)>0!(GK(1)<0)!($E(GK(1))="0"):$J(GK(1)/1.36,0,1),1:"")_$S(GMRVJ=1:"*",1:"")
"RTN","GMVGGR2",58,0)
 I GI="CG" D  Q
"RTN","GMVGGR2",59,0)
 . S $P(^TMP($J,GN),"^",13)=GK(1)_"- "_GMRSITE,$P(^TMP($J,GN),"^",14)=$S(GK(1)>0:$J(GK(1)/.3937,0,2),1:"")
"RTN","GMVGGR2",60,0)
 I GI="B",GK(1)'="" S $P(^TMP($J,GN),"^",7)=GK(1)_$S(GMRVJ=1:"*",1:"")_"- "_GMRSITE
"RTN","GMVGGR2",61,0)
 I GI="W" S $P(^TMP($J,GN),"^",8)=GK(1)_"- "_GMRSITE,$P(^(GN),"^",9)=$S(GK(1)>0:$J(GK(1)/2.2,0,2),1:"")
"RTN","GMVGGR2",62,0)
 I GK(1)>0,GI="W" D  Q
"RTN","GMVGGR2",63,0)
  . S GHOLD=GI,GMRBMI="",GMRBMI(1)=GDT,GMRBMI(2)=GK(1) D CALBMI^GMVBMI(.GMRBMI) S GI=GHOLD
"RTN","GMVGGR2",64,0)
  . S $P(^TMP($J,GN),"^",10)=GMRBMI K GMRBMI
"RTN","GMVGGR2",65,0)
 I GI="T" S $P(^TMP($J,GN),"^",3)=GK(1)_$S(GMRVJ=1:"*",1:"")_"- "_GMRSITE Q
"RTN","GMVGGR2",66,0)
 I GI="P" S $P(^TMP($J,GN),"^",4)=GK(1)_$S(GMRVJ=1:"*",1:"")_"- "_GMRSITE
"RTN","GMVGGR2",67,0)
 Q
"RTN","GMVGR0")
0^208^B16703352
"RTN","GMVGR0",1,0)
GMVGR0 ;HIOFO/MH,YH,FT-VITALS GRAPH (PART 1) ;12/26/01  15:25
"RTN","GMVGR0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVGR0",3,0)
 ;
"RTN","GMVGR0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVGR0",5,0)
 ;  #1392 - FILE 126.56 references   (private)
"RTN","GMVGR0",6,0)
 ;  #1393 - FILE 126.58 references   (private)
"RTN","GMVGR0",7,0)
 ;  #3214 - ^GMRYAPI calls           (private)
"RTN","GMVGR0",8,0)
 ; #10061 - ^VADPT calls             (supported)
"RTN","GMVGR0",9,0)
 ; #10096 - ^%ZOSF references        (supported)
"RTN","GMVGR0",10,0)
 ;
"RTN","GMVGR0",11,0)
EN1 ;ENTRY POINT FROM GMVSR0 TO PRINT SF-511 GRAPH FOR KYOCERA
"RTN","GMVGR0",12,0)
 S GMRHT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMVGR0",13,0)
 S (GMROUT,GHT)="",^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMVGR0",14,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMVGR0",15,0)
 F GTYPE="B","H","P","R","T","W","PO2","CVP","CG","PN" D SETT
"RTN","GMVGR0",16,0)
 S GRPT=5 D SETIO U IO D ^GMVGR1
"RTN","GMVGR0",17,0)
Q1 K GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMVGR0",18,0)
 W:$E(IOST)="P"!$D(IO("S")) !
"RTN","GMVGR0",19,0)
 D QIO^GMVGR5 K GRPT,GMROUT,GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GHT,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMVGR0",20,0)
 K GLINE,GMRQUAL,^TMP($J,"GTNM") Q
"RTN","GMVGR0",21,0)
SETT ;SET GMRT
"RTN","GMVGR0",22,0)
 S GTYP(1)=$S(GTYPE="B":"BLOOD PRESSURE",GTYPE="P":"PULSE",GTYPE="R":"RESPIRATION",GTYPE="T":"TEMPERATURE",GTYPE="H":"HEIGHT",GTYPE="W":"WEIGHT",GTYPE="CG":"CIRCUMFERENCE/GIRTH",GTYPE="PO2":"PULSE OXIMETRY",1:"")
"RTN","GMVGR0",23,0)
 I GTYP(1)="" S GTYP(1)=$S(GTYPE="CVP":"CENTRAL VENOUS PRESSURE",GTYPE="PN":"PAIN",1:"")
"RTN","GMVGR0",24,0)
 Q:GTYP(1)=""
"RTN","GMVGR0",25,0)
 S GTYP=$O(^GMRD(120.51,"B",GTYP(1),""))
"RTN","GMVGR0",26,0)
 I GTYP>0 F GX=GSTART1:0 S GX=$O(^GMR(120.5,"AA",DFN,GTYP,GX)) Q:GX>GEND1!(GX'>0)  F GEN=0:0 S GEN=$O(^GMR(120.5,"AA",DFN,GTYP,GX,GEN)) Q:GEN'>0  I '$D(^GMR(120.5,GEN,2)) D BLDARR
"RTN","GMVGR0",27,0)
 Q
"RTN","GMVGR0",28,0)
BLDARR S GDATA=$S($D(^GMR(120.5,GEN,0)):^(0),1:"")
"RTN","GMVGR0",29,0)
 S GMRVX(0)=$P(GDATA,"^",8) Q:GMRVX(0)=""
"RTN","GMVGR0",30,0)
 S GMRVX=GTYPE,GMRVX(1)=0
"RTN","GMVGR0",31,0)
 D:GMRVX(0)>0!(GMRVX(0)<0)!($E(GMRVX(0))="0") EN1^GMVSAS0
"RTN","GMVGR0",32,0)
 K GMRVARY S GMRVARY="" I $P($G(^GMR(120.5,GEN,5,0)),"^",4)>0 D CHAR^GMVCHAR(GEN,.GMRVARY,GTYP)
"RTN","GMVGR0",33,0)
 K GG S GG="" I $O(GMRVARY(0)) D
"RTN","GMVGR0",34,0)
 . S GG(1)=0 F  S GG(1)=$O(GMRVARY(GG(1))) Q:GG(1)'>0  S GG(2)=0 F  S GG(2)=$O(GMRVARY(GG(1),GG(2))) Q:GG(2)'>0  S GG(3)="" F  S GG(3)=$O(GMRVARY(GG(1),GG(2),GG(3))) Q:GG(3)=""  S GG=GG_$S(GG="":"",1:";")_GG(3)
"RTN","GMVGR0",35,0)
 S ^TMP($J,"GMRVG",GTYPE,9999999-GX,$P(GDATA,"^",8))=GG_"^"_$S($G(GMRVX(1))>0:1,1:"")_"^^"_$P(GDATA,"^",10)
"RTN","GMVGR0",36,0)
 I GTYPE="P",GG["DORSALIS PEDIS",$P(GDATA,"^",8)=1 S $P(^TMP($J,"GMRVG",GTYPE,9999999-GX,$P(GDATA,"^",8)),"^",2)=0
"RTN","GMVGR0",37,0)
 S:$D(^TMP($J,"GMRVG","H",9999999-GX,$P(GDATA,"^",8))) GHT=$P(GDATA,"^",8)
"RTN","GMVGR0",38,0)
 I GTYPE="B",$P(GDATA,"^",8)'>0 S ^TMP($J,"GMRVG","B",9999999-GX,$P(GDATA,"^",8))="^^"
"RTN","GMVGR0",39,0)
 I GTYPE="B",$L($P(GDATA,"^",8))>7,+$P(GDATA,"^",8)>0 D
"RTN","GMVGR0",40,0)
 . S ^TMP($J,"GMRVG","B",9999999-GX,$P($P(GDATA,"^",8),"/",1,2))=^TMP($J,"GMRVG","B",9999999-GX,$P(GDATA,"^",8)) K ^($P(GDATA,"^",8)) S ^TMP($J,"GMRVG","C",9999999-GX,"/"_$P($P(GDATA,"^",8),"/",3))=GG
"RTN","GMVGR0",41,0)
 K GG Q 
"RTN","GMVGR0",42,0)
SETIO ;
"RTN","GMVGR0",43,0)
 S X="GMRYRP0" X ^%ZOSF("TEST") Q:'$T
"RTN","GMVGR0",44,0)
 D IO^GMVGR5
"RTN","GMVGR0",45,0)
 D SETIOAR
"RTN","GMVGR0",46,0)
 Q
"RTN","GMVGR0",47,0)
SETIOAR F GTYPE1="XI"_($$INPUT^GMRYAPI()+4),"XO"_($$OUTPUT^GMRYAPI()+1) F GDT=0:0 S GDT=$O(^TMP($J,"GMR",GTYPE1,GDT)) Q:GDT'>0  F GDTA=0:0 S GDTA=$O(^TMP($J,"GMR",GTYPE1,GDT,GDTA)) Q:GDTA=""  D SETIOAR1
"RTN","GMVGR0",48,0)
 Q
"RTN","GMVGR0",49,0)
SETIOAR1 S:GTYPE1["XI" ^TMP($J,"GMRVG","I",GDT,GDTA)="^" S:GTYPE1["XO" ^TMP($J,"GMRVG","O",GDT,GDTA)="^"
"RTN","GMVGR0",50,0)
 Q
"RTN","GMVGR1")
0^209^B35800771
"RTN","GMVGR1",1,0)
GMVGR1 ;HIOFO/YH,FT-SET ^TMP($J) GLOBAL ;9/30/02  15:00
"RTN","GMVGR1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVGR1",3,0)
 ;
"RTN","GMVGR1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVGR1",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVGR1",6,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVGR1",7,0)
 ;
"RTN","GMVGR1",8,0)
GRAPH ;CONTINUTATION OF GMVGR0
"RTN","GMVGR1",9,0)
 S (GCNT,GCNTD,GPG)=0 D DEM^VADPT,INP^VADPT,SETV
"RTN","GMVGR1",10,0)
 F GK="H","W","T","P","R","B","I","O","PO2","CVP","CG","PN" D
"RTN","GMVGR1",11,0)
 . S ^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMVGR1",12,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMVGR1",13,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMVGR1",14,0)
 F GPGS=1:1:GPG D
"RTN","GMVGR1",15,0)
 . F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMVGR1",16,0)
 . K GMRQUAL S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE S ^TMP($J,"GMRK","G200")=GMRRMBD
"RTN","GMVGR1",17,0)
 . D PAGE,EN1^GMVGR2,EN2^GMVGR3,EN3^GMVGR4,EN4^GMVGR6 S ^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMVGR1",18,0)
 D KVAR^VADPT K VA Q
"RTN","GMVGR1",19,0)
PAGE ;Set temp. and pulse starting point in the graph
"RTN","GMVGR1",20,0)
 D SETV
"RTN","GMVGR1",21,0)
 I ^TMP($J,"GMRK","G50")="" F GI=51:1:59 S ^TMP($J,"GMRK","G50")=^TMP($J,"GMRK","G"_GI),^TMP($J,"GMRK","G50M")=0.2+(1.6*(GI-50)) Q:^TMP($J,"GMRK","G50")'=""
"RTN","GMVGR1",22,0)
 I ^TMP($J,"GMRK","G82")="" F GI=83:1:91 S ^TMP($J,"GMRK","G82")=^TMP($J,"GMRK","G"_GI),^TMP($J,"GMRK","G82M")=0.6+(1.6*(GI-82)) Q:^TMP($J,"GMRK","G82")'=""
"RTN","GMVGR1",23,0)
 I $D(GMRQUAL) D LEGEND^GMVLGQU
"RTN","GMVGR1",24,0)
 K GG,GI,GMRVJ,GSYNO Q
"RTN","GMVGR1",25,0)
SETV ;Set patient data in ^TMP($J,"GMRK" global
"RTN","GMVGR1",26,0)
 S ^TMP($J,"GMRK","G194")=$S(VADM(1)'="":VADM(1),1:"         ")_"  "_$S(VADM(2)'="":$P(VADM(2),"^",2),1:" "),GDOB=$S($D(VADM(3)):$P(VADM(3),"^",2),1:" "),GAGE=$S($D(VADM(4)):VADM(4),1:" ")
"RTN","GMVGR1",27,0)
 S ^TMP($J,"GMRK","G197")=$S($D(VADM(5)):$P(VADM(5),"^",2),1:" "),^TMP($J,"GMRK","G198")=$S($D(GMRWARD(1)):"Unit: "_GMRWARD(1),1:"Unit:  ")
"RTN","GMVGR1",28,0)
 S GMRRMBD=$S('(VAIN(5)=""):"Room: "_$P(VAIN(5),"-",1,2),1:"Room:  "),^TMP($J,"GMRK","G196")=$S($D(GDOB)&($D(GAGE)):GDOB_" ("_GAGE_")",1:" ")
"RTN","GMVGR1",29,0)
 I '$D(GMRVHLOC) S GMRVHLOC=$$HOSPLOC^GMVUTL1(+$G(VAIN(4)))
"RTN","GMVGR1",30,0)
 S GMRDIV="Division: "_$$DIVISION^GMVUTL1(+GMRVHLOC)
"RTN","GMVGR1",31,0)
 Q
"RTN","GMVGR1",32,0)
DATE F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMVGR1",33,0)
 Q
"RTN","GMVGR1",34,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMVGR1",35,0)
 Q
"RTN","GMVGR1",36,0)
SETD F GI="H","W","T","P","R","B","I","O","C","PN" S GJ=$F("WTXPXRBIOCH",GI),GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA
"RTN","GMVGR1",37,0)
 F GI="PO2","CVP","CG" S GJ=0,GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA
"RTN","GMVGR1",38,0)
 Q
"RTN","GMVGR1",39,0)
SETA ;Store measurements in ^TMP($J,"GMRK" global
"RTN","GMVGR1",40,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMVGR1",41,0)
 I GI="PN" S ^TMP($J,"GMRK","G"_(1660+GCNTD))=GK Q
"RTN","GMVGR1",42,0)
 S (GMRSITE,GMRSITE(1),GMRINF,GMRVJ)=""
"RTN","GMVGR1",43,0)
 I GK'="" D
"RTN","GMVGR1",44,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GI,GDT1,GK)),"^"),GMRVJ=$P($G(^(GK)),"^",2),GMRINF=$P($G(^(GK)),"^",4)
"RTN","GMVGR1",45,0)
 . I GMRSITE(1)'="" D SYNOARY^GMVLGQU
"RTN","GMVGR1",46,0)
 I GI="H" D  Q
"RTN","GMVGR1",47,0)
 . S ^TMP($J,"GMRK","G"_(270+GCNTD))=GK_" "_GMRSITE,^TMP($J,"GMRK","G"_(290+GCNTD))=$S(GK>0:$J(GK*2.54,0,2),1:"") S:GK>0 GMRHT=(GK*2.54)/100
"RTN","GMVGR1",48,0)
 I GI="C" S ^TMP($J,"GMRK","G"_(1640+GCNTD))=GK_"  "_^TMP($J,"GMRK","G"_(1640+GCNTD)) Q
"RTN","GMVGR1",49,0)
 I GI="PO2"!(GI="CVP")!(GI="CG") D  Q
"RTN","GMVGR1",50,0)
 . I GI="PO2" D
"RTN","GMVGR1",51,0)
 . . S (GMRINF(1),GMRINF(2))="" I GMRINF'="" D PO2^GMVLGQU(.GMRINF)
"RTN","GMVGR1",52,0)
 . . S ^TMP($J,"GMRK","G"_(1100+GCNTD))=GK_$S(GMRVJ=1:"*",1:" ")
"RTN","GMVGR1",53,0)
 . . S ^TMP($J,"GMRK","G"_(1130+GCNTD))=GMRINF(1)
"RTN","GMVGR1",54,0)
 . . S ^TMP($J,"GMRK","G"_(1150+GCNTD))=GMRINF(2)
"RTN","GMVGR1",55,0)
 . . S ^TMP($J,"GMRK","G"_(1170+GCNTD))=GMRSITE
"RTN","GMVGR1",56,0)
 . . Q
"RTN","GMVGR1",57,0)
 . I GI="CVP" D
"RTN","GMVGR1",58,0)
 . . S ^TMP($J,"GMRK","G"_(1200+GCNTD))=$S(GK>0!(GK<0):$J(GK,0,1),1:GK)_$S(GMRVJ=1:"*",1:" ")
"RTN","GMVGR1",59,0)
 . . S ^TMP($J,"GMRK","G"_(1230+GCNTD))=$S(GK>0!(GK<0)!($E(GK)="0"):$J(GK/1.36,0,1),1:"")_$S(GMRVJ=1:"*",1:" ")
"RTN","GMVGR1",60,0)
 . . Q
"RTN","GMVGR1",61,0)
 . I GI="CG" D
"RTN","GMVGR1",62,0)
 . . S ^TMP($J,"GMRK","G"_(1250+GCNTD))=GK_" "_GMRSITE,^TMP($J,"GMRK","G"_(1320+GCNTD))=$S(GK>0:$J(GK/.3937,0,2),1:"")
"RTN","GMVGR1",63,0)
 . . Q
"RTN","GMVGR1",64,0)
 I GI="B",GK'="" S ^TMP($J,"GMRK","G"_(250+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE) S:$L(GMRSITE," ")>3 ^TMP($J,"GMRK","G"_(1640+GCNTD))=$P(GMRSITE," ")
"RTN","GMVGR1",65,0)
 I '(GI="T"!(GI="P")) D  Q
"RTN","GMVGR1",66,0)
 . I GI="C" S GMRSITE=$S($L(GMRSITE," ")>3:"  "_$P(GMRSITE," "),1:"")
"RTN","GMVGR1",67,0)
 . S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=GK_$S(GMRVJ=1&(GI'="C"):"*",1:" ")_$S(GI="B":"",1:GMRSITE) S:GI="W" ^TMP($J,"GMRK","G"_(310+GCNTD))=$S(GK>0:$J(GK/2.2,0,2),1:"")
"RTN","GMVGR1",68,0)
 . I GK>0,GI="W" D
"RTN","GMVGR1",69,0)
 . . S GMRBMI="",GMRBMI(1)=GDT1,GMRBMI(2)=GK D CALBMI^GMVBMI(.GMRBMI)
"RTN","GMVGR1",70,0)
 . . S ^TMP($J,"GMRK","G"_(330+GCNTD))=GMRBMI K GMRBMI
"RTN","GMVGR1",71,0)
 I GI="T",GK>0 S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=106-GK
"RTN","GMVGR1",72,0)
 I GK'="",GI="P","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) D
"RTN","GMVGR1",73,0)
 . I GMRSITE(1)["RADIAL"!(GMRSITE(1)["APICAL")!(GMRSITE(1)["BRACHIAL") D
"RTN","GMVGR1",74,0)
 . . S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=170-GK/10
"RTN","GMVGR1",75,0)
 S ^TMP($J,"GMRK","G"_(GJ+1*16+GCNTD+1))=GK_$S(GMRVJ=1:"*",1:" ")_$S(GI="T":GMRSITE,GI="P"&($L(GMRSITE," ")>3):"  "_$P(GMRSITE," "),1:"")
"RTN","GMVGR1",76,0)
 I GI="T",GK>0 S ^TMP($J,"GMRK","G"_(210+GCNTD))=$S(GMRVJ=1:"T*",1:"T")
"RTN","GMVGR1",77,0)
 I GI="P",GK'="","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) D
"RTN","GMVGR1",78,0)
 . I GMRSITE(1)["RADIAL"!(GMRSITE(1)["APICAL")!(GMRSITE(1)["BRACHIAL") S ^TMP($J,"GMRK","G"_(230+GCNTD))=$S(GMRVJ=1:"P*",1:"P")
"RTN","GMVGR1",79,0)
 . S ^TMP($J,"GMRK","G"_(1300+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)
"RTN","GMVGR1",80,0)
 I GK>0,GI="T" S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<1.5:1.5,^("G"_(GJ*16+GCNTD+1))>12.7:12.7,1:^("G"_(GJ*16+GCNTD+1))) S:^("G"_(GJ*16+GCNTD+1))<1.6!(^("G"_(GJ*16+GCNTD+1))>12.6) ^TMP($J,"GMRK","G"_(210+GCNTD))="T**"
"RTN","GMVGR1",81,0)
 I GK'="",GI="P","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) D
"RTN","GMVGR1",82,0)
 . I GMRSITE(1)["RADIAL"!(GMRSITE(1)["APICAL")!(GMRSITE(1)["BRACHIAL") D
"RTN","GMVGR1",83,0)
 . . S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<1.5:1.5,^("G"_(GJ*16+GCNTD+1))>12.7:12.7,1:^("G"_(GJ*16+GCNTD+1)))
"RTN","GMVGR1",84,0)
 . . S:^("G"_(GJ*16+GCNTD+1))<1.6!(^("G"_(GJ*16+GCNTD+1))>12.6) ^TMP($J,"GMRK","G"_(230+GCNTD))="P**"
"RTN","GMVGR1",85,0)
 Q
"RTN","GMVGR1",86,0)
SETP ;INITIALIZE ^TMP FOR HEIGHT, WEIGHT AND V/M QUALIFIERS
"RTN","GMVGR1",87,0)
 ;250+I: BP QUALIFIER  270+I: HEIGHT IN INCH  290+I: HEIGHT IN CM
"RTN","GMVGR1",88,0)
 ;310+I:WEIGHT IN KG  330+I: BMI
"RTN","GMVGR1",89,0)
 ;1100+I: PULSE OXIMETRY DATA  1130+I: PULSE OX. L/MIN
"RTN","GMVGR1",90,0)
 ;1150+I: PULSE OX. %  1170+I: PULSE OX. METHOD
"RTN","GMVGR1",91,0)
 ;1200+I: CVP DATA IN CM H2O  1230+I: CVP DATA IN MMHG
"RTN","GMVGR1",92,0)
 ;1250+I: C/G DATA IN INCH  1270+I: C/G QUALIFIER  1300+I: PULSE QUALIFIER
"RTN","GMVGR1",93,0)
 ;1320+I: C/G DATA IN CM 1640+I: THIRD PIECE OF BP 1660+I: PAIN
"RTN","GMVGR1",94,0)
 F I=1:1:10 D
"RTN","GMVGR1",95,0)
 . S (^TMP($J,"GMRK","G"_(210+I)),^("G"_(230+I)),^("G"_(250+I)),^("G"_(270+I)),^("G"_(290+I)),^("G"_(310+I)),^("G"_(330+I)),^("G"_(1300+I)))=""
"RTN","GMVGR1",96,0)
 . S (^TMP($J,"GMRK","G"_(1100+I)),^("G"_(1130+I)),^("G"_(1150+I)),^("G"_(1170+I)),^("G"_(1200+I)),^("G"_(1230+I)),^("G"_(1250+I)),^("G"_(1270+I)))=""
"RTN","GMVGR1",97,0)
 . S (^TMP($J,"GMRK","G"_(1320+I)),^("G"_(1640+I)),^("G"_(1660+I)))=""
"RTN","GMVGR1",98,0)
 Q
"RTN","GMVGR2")
0^210^B15331533
"RTN","GMVGR2",1,0)
GMVGR2 ;HIOFO/YH,FT-VITALS GRAPH KYOCERA DEFINE MACRO (PART 1) ;11/8/01  14:54
"RTN","GMVGR2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVGR2",3,0)
 ;
"RTN","GMVGR2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVGR2",5,0)
 ; <None>
"RTN","GMVGR2",6,0)
 ;
"RTN","GMVGR2",7,0)
EN1 W !,"!R! RES; DAM;"
"RTN","GMVGR2",8,0)
BOX W !,"MCRO BOX;"
"RTN","GMVGR2",9,0)
 W !,"UNIT C; SLM 3; STM 1; MAP 0,0; SPD 0.05; BOX 16,22.2; MAP -2.5,13; BOX 18.5,9.2;"
"RTN","GMVGR2",10,0)
 W !,"FONT 40; MAP -2,0.5; TEXT 'Date/Time'; MAP -2.7,1; TEXT 'Pulse'; MAP -1.7,1; TEXT 'Temp/F/C';"
"RTN","GMVGR2",11,0)
 W !,"SPD 0.01; MAP -2.7,2; TEXT '150'; MAP -1.5,2; TEXT '104/40.0'; MAP 0,1; DAP 16,1;"
"RTN","GMVGR2",12,0)
 W !,"MAP -2.7,3; TEXT '140'; MAP -1.5,3; TEXT '103/39.4'; MAP 0,2; DAP 16,2;"
"RTN","GMVGR2",13,0)
 W !,"MAP -2.7,4; TEXT '130'; MAP -1.5,4; TEXT '102/38.9'; MAP 0,3; DAP 16,3;"
"RTN","GMVGR2",14,0)
 W:GTNM=0 "MAP 2,5; TEXT 'THERE  IS  NO  DATA  FOR  THIS  REPORT';"
"RTN","GMVGR2",15,0)
 W !,"MAP -2.7,5; TEXT '120'; MAP -1.5,5; TEXT '101/38.3'; MAP 0,4; DAP 16,4;"
"RTN","GMVGR2",16,0)
 W !,"MAP -2.7,6; TEXT '110'; MAP -1.5,6; TEXT '100/37.8'; MAP 0,5; DAP 16,5;"
"RTN","GMVGR2",17,0)
 W !,"MAP -2.7,7; TEXT '100'; MAP -1.5,7; TEXT '99/37.2'; MAP 0,6; DAP 16,6;"
"RTN","GMVGR2",18,0)
 W !,"SPD 0.05; MAP -1.5,7.4; TEXT '98.6'; MAP 0,7.4; DAP 16,7.4;"
"RTN","GMVGR2",19,0)
 W !,"SPD 0.01; MAP -2.7,8; TEXT '90'; MAP -1.5,8; TEXT '98/36.7'; MAP 0,7; DAP 16,7; MAP 0,8; DAP 16,8;"
"RTN","GMVGR2",20,0)
 W !,"MAP -2.7,9; TEXT '80'; MAP -1.5,9; TEXT '97/36.1'; MAP 0,9; DAP 16,9;"
"RTN","GMVGR2",21,0)
 W !,"MAP -2.7,10; TEXT '70'; MAP -1.5,10; TEXT '96/35.6'; MAP 0,9; DAP 16,9;"
"RTN","GMVGR2",22,0)
 W !,"MAP -2.7,11; TEXT '60'; MAP -1.5,11; TEXT '95/35.0'; MAP 0,10; DAP 16,10;"
"RTN","GMVGR2",23,0)
 W !,"MAP -2.7,12; TEXT '50'; MAP -1.5,12; TEXT '94'; MAP 0,11; DAP 16,11; MAP 16,12; DAP0,12;"
"RTN","GMVGR2",24,0)
BOX2 W !,"MAP -2.5,13.4; DAP 16,13.4; MAP -2.5,14.2; DAP 16,14.2; MAP -2.5,14.6; DAP 16,14.6; MAP -2.5,15; DAP 16,15; MAP -2.5,15.4; DAP 16,15.4;"
"RTN","GMVGR2",25,0)
 W !,"MAP -2.5,15.8; DAP 16,15.8; MAP -2.5,16.2; DAP 16,16.2; MAP -2.5,17.4; DAP 16,17.4; MAP -2.5,17.8; DAP 16,17.8;"
"RTN","GMVGR2",26,0)
 W !,"MAP -2.5,18.2; DAP 16,18.2; MAP -2.5,18.6; DAP 16,18.6; MAP -2.5,19; DAP 16,19; MAP -2.5,19.4; DAP 16,19.4; MAP -2.5,19.8; DAP 16,19.8;"
"RTN","GMVGR2",27,0)
 W !,"MAP -2.5,20.2; DAP 16,20.2; MAP -2.5,20.6; DAP 16,20.6; MAP -2.5,21; DAP 16,21; MAP -2.5,21.4; DAP 16,21.4;"
"RTN","GMVGR2",28,0)
 W !,"MAP -2.5,21.8; DAP 16,21.8;MAP -2.5,22.2; DAP 16,22.2;"
"RTN","GMVGR2",29,0)
 W !,"FONT 57; MAP -2.4,13.3; TEXT 'Temperature'; MAP -2.4,13.7; TEXT 'Pulse'; MAP -2.4,14.5; TEXT 'Respiration';"
"RTN","GMVGR2",30,0)
 W !,"MAP -2.4,14.9; TEXT 'Pulse Ox.'; MAP -2.2,15.3; TEXT 'L/Min'; MAP -2.2,15.7; TEXT %1; MAP -2.2,16.1; TEXT 'Method';"
"RTN","GMVGR2",31,0)
 W !,"MAP -2.4,16.6; TEXT 'Blood Pressure';"
"RTN","GMVGR2",32,0)
 W !,"MAP -2.4,17.7; TEXT 'Weight (lb)'; MAP -1.5,18.1; TEXT '(kg)'; MAP -2.4,18.5; TEXT 'Body Mass Index'; MAP -2.4,18.9; TEXT 'Height (in)'; MAP -1.5,19.3; TEXT '(cm)';"
"RTN","GMVGR2",33,0)
 W !,"MAP -2.4,19.7; TEXT 'C/G (in)'; MAP -1.9,20.1; TEXT '(cm)'; MAP -2.4,20.5; TEXT 'CVP'; MAP -1.5,20.5; TEXT '(cm H2O)'; MAP -1.5,20.9; TEXT '(mm Hg)';"
"RTN","GMVGR2",34,0)
 W !,"MAP -2.4,21.3; TEXT 'Intake (24hr)(cc)'; MAP -2.4,21.7; TEXT 'Output (24hr)(cc)';" W !," MAP -2.4,22.1; TEXT 'Pain';"
"RTN","GMVGR2",35,0)
VERT W !,"SPD 0.03;" S I(1)="" F I=1:1:9 S I(1)=I(1)_"MAP "_(1.6*I)_",0; DAP "_(1.6*I)_",22.2;"
"RTN","GMVGR2",36,0)
 W !,I(1)
"RTN","GMVGR2",37,0)
 W !,"MAP -2.4,22.6; TEXT 'T: Temperature     P: Pulse     C/G: Circumference/Girth     * - Abnormal value     ** - Abnormal value off of graph';"
"RTN","GMVGR2",38,0)
 W !,"MAP -2.4,22.9; TEXT 'Pain:  99 - Unable to respond   0 - No pain   10 - Worst imaginable pain';"
"RTN","GMVGR2",39,0)
FORM W !,"MAP 12,25.3; TEXT 'MEDICAL RECORD'; MAP 12,25.6; TEXT 'VITAL FLOW SHEET'; MAP 12,25.9; TEXT 'VAF 10-7987 VICE SF 511';"
"RTN","GMVGR2",40,0)
 W !,"ENDM;"
"RTN","GMVGR2",41,0)
DATE W !,"MCRO DATE; FONT 56;" S J=0.4 D WRTEXT^GMVBP2
"RTN","GMVGR2",42,0)
 W !,"ENDM;"
"RTN","GMVGR2",43,0)
TIME W !,"MCRO TIME;" S J=0.8 D WRTEXT^GMVBP2
"RTN","GMVGR2",44,0)
 W !,"ENDM;"
"RTN","GMVGR2",45,0)
WT W !,"MCRO WT;" S J=17.7 D WRTEXT^GMVBP2
"RTN","GMVGR2",46,0)
 W !,"ENDM;"
"RTN","GMVGR2",47,0)
WTKG W !,"MCRO WTKG;" S J=18.1 D WRTEXT^GMVBP2
"RTN","GMVGR2",48,0)
 W !,"ENDM;"
"RTN","GMVGR2",49,0)
HT ;
"RTN","GMVGR2",50,0)
 D HT^GMVGR7
"RTN","GMVGR2",51,0)
 Q
"RTN","GMVGR3")
0^211^B5571762
"RTN","GMVGR3",1,0)
GMVGR3 ;HIOFO/YH,FT-VITALS GRAPH KYOCERA DEFINE MACRO (PART 2) ;11/6/01  16:09
"RTN","GMVGR3",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVGR3",3,0)
 ;
"RTN","GMVGR3",4,0)
 ; This routine uses the following IAs:
"RTN","GMVGR3",5,0)
 ; <None>
"RTN","GMVGR3",6,0)
 ;
"RTN","GMVGR3",7,0)
EN2 ;CONTINUATION OF GMVGR2
"RTN","GMVGR3",8,0)
TEMP W !,"FONT 56; MCRO TEMP;" S J=13.3 D WRTEXT^GMVBP2
"RTN","GMVGR3",9,0)
 W !,"ENDM;"
"RTN","GMVGR3",10,0)
PULSEG W !,"MCRO PLSG; MAP %1, %2; DAP 2.2, %3; DAP 3.8, %4; DAP 5.4, %5; DAP 7.0, %6; DAP 8.6, %7; DAP 10.2, %8; DAP 11.8, %9;"
"RTN","GMVGR3",11,0)
 W !,"DAP 13.4, %10; DAP 15, %11;"
"RTN","GMVGR3",12,0)
 W !,"ENDM;"
"RTN","GMVGR3",13,0)
PULSE ;PULSE DATA
"RTN","GMVGR3",14,0)
 W !,"MCRO PULS;" S J=13.7 D WRTEXT^GMVBP2
"RTN","GMVGR3",15,0)
 W !,"ENDM;"
"RTN","GMVGR3",16,0)
PULSEQ ;PULSE QUALIFIERS
"RTN","GMVGR3",17,0)
 W !,"MCRO PULQ;" S J=14.1 D WRTEXT^GMVBP2
"RTN","GMVGR3",18,0)
 W !,"ENDM;"
"RTN","GMVGR3",19,0)
RESP W !,"MCRO RESP;" S J=14.5 D WRTEXT^GMVBP2
"RTN","GMVGR3",20,0)
 W !,"ENDM;"
"RTN","GMVGR3",21,0)
BP W !,"MCRO BP;" S J=16.5 D WRTEXT^GMVBP2
"RTN","GMVGR3",22,0)
 W !,"ENDM;"
"RTN","GMVGR3",23,0)
BP3 W !,"MCRO BP3;" S J=16.9 D WRTEXT^GMVBP2
"RTN","GMVGR3",24,0)
 W !,"ENDM;"
"RTN","GMVGR3",25,0)
BPQUA W !,"MCRO BPQUA;" S J=17.3 D WRTEXT^GMVBP2
"RTN","GMVGR3",26,0)
 W !,"ENDM;"
"RTN","GMVGR3",27,0)
TMP1 W !,"MCRO TMP1; FONT 56; MAP %1,%2; TEXT %3; MAP 1.8,%4; TEXT %5; MAP 3.4,%6; TEXT %7; MAP 5,%8; TEXT %9; MAP 6.6,%10; TEXT %11; MAP 8.2,%12; TEXT %13; MAP 9.8,%14; TEXT %15; MAP 11.4,%16; TEXT %17; MAP 13,%18; TEXT %19;"
"RTN","GMVGR3",28,0)
 W !,"ENDM;"
"RTN","GMVGR3",29,0)
TMP2 W !,"MCRO TMP2; MAP 14.6,%1; TEXT %2;"
"RTN","GMVGR3",30,0)
 W !,"ENDM;"
"RTN","GMVGR3",31,0)
PLS1 W !,"MCRO PLS1; FONT 56; MAP %1,%2; TEXT %3; MAP 2.2,%4; TEXT %5; MAP 3.8,%6; TEXT %7; MAP 5.4,%8; TEXT %9; MAP 7,%10; TEXT %11; MAP 8.6,%12; TEXT %13; MAP 10.2,%14; TEXT %15; MAP 11.8,%16; TEXT %17; MAP 13.4,%18; TEXT %19;"
"RTN","GMVGR3",32,0)
 W !,"ENDM;"
"RTN","GMVGR3",33,0)
PLS2 W !,"MCRO PLS2; MAP 15,%1; TEXT %2; FONT 56;"
"RTN","GMVGR3",34,0)
 W !,"ENDM;"
"RTN","GMVGR3",35,0)
 D EN1^GMVGR7
"RTN","GMVGR3",36,0)
 Q
"RTN","GMVGR4")
0^212^B7596013
"RTN","GMVGR4",1,0)
GMVGR4 ;HIOFO/YH,FT-VITALS GRAPH KYOCERA PRINT COMMANDS (PART 1) ;11/6/01  16:10
"RTN","GMVGR4",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVGR4",3,0)
 ;
"RTN","GMVGR4",4,0)
 ; This routine uses the following IAs:
"RTN","GMVGR4",5,0)
 ; <None>
"RTN","GMVGR4",6,0)
 ;
"RTN","GMVGR4",7,0)
EN3 ;CONTINUATION OF GMVGR3
"RTN","GMVGR4",8,0)
CALL W !,"CALL BOX,'%';"
"RTN","GMVGR4",9,0)
 W !,"CALL DATE" S J(1)=1,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR4",10,0)
 W !,"CALL TIME" S J(1)=17,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR4",11,0)
 W !,"CALL WT" S J(1)=34,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR4",12,0)
 W !,"CALL WTKG" S J(1)=311,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR4",13,0)
 W !,"CALL BMI" S J(1)=331,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR4",14,0)
 W !,"CALL HT" S J(1)=271,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR4",15,0)
 W !,"CALL HTCM" S J(1)=291,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR4",16,0)
 W !,"CALL TMPG, "_^TMP($J,"GMRK","G50M")_", "_^("G50")_", "_^("G51")_", "_^("G52")_", "_^("G53")_", "_^("G54")_", "_^("G55")_", "_^("G56")
"RTN","GMVGR4",17,0)
 W ", "_^TMP($J,"GMRK","G57")_", "_^("G58")_", "_^("G59")_";"
"RTN","GMVGR4",18,0)
 W !,"CALL TMP1, "_^TMP($J,"GMRK","G50M")_", "_^("G50")_", '"_^("G211")_"', "_^("G51")_", '"_^("G212")_"', "_^("G52")_", '"_^("G213")_"', "_^("G53")_", '"_^("G214")_"', "_^("G54")_", '"_^("G215")_"', "_^("G55")_", '"_^("G216")_"', "
"RTN","GMVGR4",19,0)
 W ^TMP($J,"GMRK","G56")_", '"_^("G217")_"', "_^("G57")_", '"_^("G218")_"', "_^("G58")_", '"_^("G219")_"';"
"RTN","GMVGR4",20,0)
 W !,"CALL TMP2, "_^TMP($J,"GMRK","G59")_", '"_^("G220")_"';"
"RTN","GMVGR4",21,0)
 W !,"CALL TEMP" S J(1)=66,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR4",22,0)
 W !,"CALL PLSG, "_^TMP($J,"GMRK","G82M")_", "_^("G82")_", "_^("G83")_", "_^("G84")_", "_^("G85")_", "_^("G86")_", "_^("G87")_", "_^("G88")_", "
"RTN","GMVGR4",23,0)
 W ^TMP($J,"GMRK","G89")_", "_^("G90")_", "_^("G91")_";"
"RTN","GMVGR4",24,0)
 W !,"CALL PLS1, "_^TMP($J,"GMRK","G82M")_", "_^("G82")_", '"_^("G231")_"', "_^("G83")_", '"_^("G232")_"', "_^("G84")_", '"_^("G233")_"', "_^("G85")_", '"_^("G234")_"', "_^("G86")_", '"_^("G235")_"', "_^("G87")_", '"_^("G236")_"', "
"RTN","GMVGR4",25,0)
 W ^TMP($J,"GMRK","G88")_", '"_^("G237")_"', "_^("G89")_", '"_^("G238")_"', "_^("G90")_", '"_^("G239")_"';"
"RTN","GMVGR4",26,0)
 W !,"CALL PLS2, "_^TMP($J,"GMRK","G91")_", '"_^("G240")_"';"
"RTN","GMVGR4",27,0)
 W !,"CALL PULS" S J(1)=98,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR4",28,0)
 Q
"RTN","GMVGR5")
0^213^B4962271
"RTN","GMVGR5",1,0)
GMVGR5 ;HIOFO/RM,YH,FT-TMP TO EXTRACT DATA FROM IO PACKAGE ;11/6/01  16:21
"RTN","GMVGR5",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVGR5",3,0)
 ;
"RTN","GMVGR5",4,0)
 ; This routine uses the following IAs:
"RTN","GMVGR5",5,0)
 ; #1391 - FILE 126.95 references  (private)
"RTN","GMVGR5",6,0)
 ; #1430 - ^GMRYRP1 calls          (private)
"RTN","GMVGR5",7,0)
 ; #1432 - ^GMRYUT0 calls          (private)
"RTN","GMVGR5",8,0)
 ; #1435 - ^GMRYRP2 calls          (private)
"RTN","GMVGR5",9,0)
 ; #1436 - ^GMRYRP3 calls          (private)
"RTN","GMVGR5",10,0)
 ;
"RTN","GMVGR5",11,0)
IO ; INPUT VARS:  DFN=PATIENT IEN
"RTN","GMVGR5",12,0)
 ;              GMRFIN=END DATE OF EXTRACT
"RTN","GMVGR5",13,0)
 ;              GMRSTRT=START DATE OF EXTRACT
"RTN","GMVGR5",14,0)
 ;              GMROUT=0 (WILL BE SET IF ABNORMAL RESULTS)
"RTN","GMVGR5",15,0)
 ;              GRPT=TYPE OF REPORT DATA EXTRACTED FOR
"RTN","GMVGR5",16,0)
 ; OUTPUT VARS: GMROUT=1 (IF ABNORMAL RESULTS), SSN=PT'S SSN
"RTN","GMVGR5",17,0)
 ;              GMRAGE=AGE OF PATIENT, GMRBED=ROOM-BED FOR PATIENT
"RTN","GMVGR5",18,0)
 ;              GMRSEX=PATIENT SEX, GMRVADM=PATIENT'S ADMISSION DATE
"RTN","GMVGR5",19,0)
 ;              GMRWARD=PTR TO 42 OF PT LOCATION, GMRWARD(1)=FT PT. LOC
"RTN","GMVGR5",20,0)
 ;              AND GMR( WHICH HAS PT IO DATA OVER D/T RANGE
"RTN","GMVGR5",21,0)
 N GMRNAM S GQT=0,GNN=$O(^GMRD(126.95,0)),GNN=$G(^GMRD(126.95,+GNN,1)),GMRNIT=$S($P(GNN,"^"):$P(GNN,"^"),1:2300),GMRDAY=$S($P(GNN,"^",2):$P(GNN,"^",2),1:"0700"),GMREVE=$S($P(GNN,"^",3):$P(GNN,"^",3),1:1500)
"RTN","GMVGR5",22,0)
 D STARTD^GMRYRP1,PT^GMRYUT0,^GMRYRP2,REPORT1^GMRYRP3
"RTN","GMVGR5",23,0)
 K DA,GAMOUNT,GBLNK,GCSHFT,GCURDT,GDATE,GDAY,GDSHFT,GDTFIN,GDTSTRT,GESHFT,GHR,GIN,GINDT,GIO,GITEM,GIVSTRT,GIVTYP,GLASTDT,GLN,GMRBTH,GMRDAY,GMRDIAG,GMREVE,GMRINDT,GMRNAM,GMRNIT,GMRX,GGNSHFT,GNXNSF,GNXTDT,GOP,GOPT,GOUT,GQT,GSHIFT,GSITE,GSTRT,GTEXT
"RTN","GMVGR5",24,0)
 K GTOTIN,GTOTLI,GTOTLO,GTOTOUT,GTYP,GTYPE,GTYPI,GTYPO,GX,GY,II,JJ,KK,N,GGNDATE,GNN,GNSH,VAROOT,^TMP($J,"GMRY")
"RTN","GMVGR5",25,0)
 Q
"RTN","GMVGR5",26,0)
QIO ; KILL OUTPUT VARIABLES FROM IO SUBR.
"RTN","GMVGR5",27,0)
 K GMRAGE,GMRBED,GMRSEX,GMRVADM,GMR,SSN
"RTN","GMVGR5",28,0)
 Q
"RTN","GMVGR6")
0^214^B7296570
"RTN","GMVGR6",1,0)
GMVGR6 ;HIOFO/YH,FT-VITALS GRAPH KYOCERA PRINT COMMANDS (PART 2) ;11/6/01  16:13
"RTN","GMVGR6",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVGR6",3,0)
 ;
"RTN","GMVGR6",4,0)
 ; This routine uses the following IAs:
"RTN","GMVGR6",5,0)
 ; <None>
"RTN","GMVGR6",6,0)
 ;
"RTN","GMVGR6",7,0)
EN4 ;CONTINUATION OF GMVGR4
"RTN","GMVGR6",8,0)
 W !,"CALL PULQ" S J(1)=1301,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",9,0)
RESP W !,"CALL RESP" S J(1)=114,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",10,0)
POX ;
"RTN","GMVGR6",11,0)
 W !,"CALL POXD" S J(1)=1101,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",12,0)
 W !,"CALL POXL" S J(1)=1131,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",13,0)
 W !,"CALL POXP" S J(1)=1151,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",14,0)
 W !,"CALL POXM" S J(1)=1171,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",15,0)
BP W !,"CALL BP" S J(1)=130,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",16,0)
 W !,"CALL BP3" S J(1)=1641,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",17,0)
 W !,"CALL BPQUA" S J(1)=251,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",18,0)
CG ;
"RTN","GMVGR6",19,0)
 W !,"CALL CG" S J(1)=1251,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",20,0)
 W !,"CALL CG2" S J(1)=1321,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",21,0)
CVP ;
"RTN","GMVGR6",22,0)
 W !,"CALL H2O" S J(1)=1201,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",23,0)
 W !,"CALL HG" S J(1)=1231,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",24,0)
 W !,"DAM;" D INTK1 W !,"RES; EXIT;"
"RTN","GMVGR6",25,0)
 Q
"RTN","GMVGR6",26,0)
INTK1 W !,"MCRO INTK;" S J=21.3 D WRTEXT^GMVBP2
"RTN","GMVGR6",27,0)
 W !,"ENDM;"
"RTN","GMVGR6",28,0)
OUTP W !,"MCRO OUTP;" S J=21.7 D WRTEXT^GMVBP2
"RTN","GMVGR6",29,0)
 W !,"ENDM;"
"RTN","GMVGR6",30,0)
 W !,"MCRO PAIN;" S J=22.1 D WRTEXT^GMVBP2
"RTN","GMVGR6",31,0)
 W !,"ENDM;"
"RTN","GMVGR6",32,0)
 W !,"MCRO QU1; FONT 57; MAP -2.4,23.2; TEXT %1; ENDM;"
"RTN","GMVGR6",33,0)
 W !,"MCRO QU2; MAP -2.4,23.5; TEXT %1; ENDM;"
"RTN","GMVGR6",34,0)
 W !,"MCRO QU3; MAP -2.4,23.8; TEXT %1; ENDM;"
"RTN","GMVGR6",35,0)
 W !,"MCRO QU4; MAP -2.4,24.1; TEXT %1; ENDM;"
"RTN","GMVGR6",36,0)
 W !,"MCRO QU5; MAP -2.4,24.4; TEXT %1; ENDM;"
"RTN","GMVGR6",37,0)
PID W !,"MCRO PID; FONT 56; MAP -1,24.7; TEXT %1; MAP -1,25; TEXT %2; MAP 3.5,25; TEXT %3; MAP -1,25.3; TEXT %4; MAP 7,25.9; TEXT %5; MAP 7,25.6; TEXT %6; MAP -1,25.6; TEXT %7; MAP -1,25.9; TEXT %8;"
"RTN","GMVGR6",38,0)
 W !,"ENDM;"
"RTN","GMVGR6",39,0)
INTK W !,"CALL INTK" S J(1)=146,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",40,0)
 W !,"CALL OUTP" S J(1)=162,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",41,0)
 W !,"CALL PAIN" S J(1)=1661,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVGR6",42,0)
 W !,"CALL QU1, '"_$G(GLINE(1))_"';"
"RTN","GMVGR6",43,0)
 W !,"CALL QU2, '"_$G(GLINE(2))_"';"
"RTN","GMVGR6",44,0)
 W !,"CALL QU3, '"_$G(GLINE(3))_"';"
"RTN","GMVGR6",45,0)
 W !,"CALL QU4, '"_$G(GLINE(4))_"';"
"RTN","GMVGR6",46,0)
 ;W !,"CALL QU5, '"_$G(GLINE(5))_"';"
"RTN","GMVGR6",47,0)
 W !,"CALL PID, '"_^TMP($J,"GMRK","G194")_"', '"_^("G196")_"', '"_^("G197")_"', '"_^("G198")_"', '"_^("G199")_"', '"_^("G200")_"', '"_GMRDIV_"', '"_GSTRFIN_"';"
"RTN","GMVGR6",48,0)
 Q
"RTN","GMVGR7")
0^215^B2291980
"RTN","GMVGR7",1,0)
GMVGR7 ;HIOFO/YH,FT-VITALS GRAPH KYOCERA DEFINE MACRO FOR PULSE OX./CG/CVP ;11/6/01  16:14
"RTN","GMVGR7",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVGR7",3,0)
 ;
"RTN","GMVGR7",4,0)
 ; This routine uses the following IAs:
"RTN","GMVGR7",5,0)
 ; <None>
"RTN","GMVGR7",6,0)
 ;
"RTN","GMVGR7",7,0)
EN1 ;CONTINUATION OF GMVGR3
"RTN","GMVGR7",8,0)
POXD W !,"MCRO POXD;" S J=14.9 D WRTEXT^GMVBP2
"RTN","GMVGR7",9,0)
 W !,"ENDM;"
"RTN","GMVGR7",10,0)
POXL ;PULSE OX. L/MIN
"RTN","GMVGR7",11,0)
 W !,"MCRO POXL;" S J=15.3 D WRTEXT^GMVBP2
"RTN","GMVGR7",12,0)
 W !,"ENDM;"
"RTN","GMVGR7",13,0)
POXP ;PULSE OX. %
"RTN","GMVGR7",14,0)
 W !,"MCRO POXP;" S J=15.7 D WRTEXT^GMVBP2
"RTN","GMVGR7",15,0)
 W !,"ENDM;"
"RTN","GMVGR7",16,0)
POXM W !,"MCRO POXM;" S J=16.1 D WRTEXT^GMVBP2
"RTN","GMVGR7",17,0)
 W !,"ENDM;"
"RTN","GMVGR7",18,0)
CG ;CIRCUMFERENCE/GIRTH
"RTN","GMVGR7",19,0)
 W !,"MCRO CG;" S J=19.7 D WRTEXT^GMVBP2
"RTN","GMVGR7",20,0)
 W !,"ENDM;"
"RTN","GMVGR7",21,0)
 W !,"MCRO CG2;" S J=20.1 D WRTEXT^GMVBP2
"RTN","GMVGR7",22,0)
 W !,"ENDM;"
"RTN","GMVGR7",23,0)
CVPH2O W !,"MCRO H2O;" S J=20.5 D WRTEXT^GMVBP2
"RTN","GMVGR7",24,0)
 W !,"ENDM;"
"RTN","GMVGR7",25,0)
CVPHG W !,"MCRO HG;" S J=20.9 D WRTEXT^GMVBP2
"RTN","GMVGR7",26,0)
 W !,"ENDM;"
"RTN","GMVGR7",27,0)
 Q
"RTN","GMVGR7",28,0)
HT ;SET MACRO FOR BODY MASS INDEX AND HT
"RTN","GMVGR7",29,0)
 W !,"MCRO BMI;" S J=18.5 D WRTEXT^GMVBP2
"RTN","GMVGR7",30,0)
 W !,"ENDM;"
"RTN","GMVGR7",31,0)
 W !,"MCRO HT;" S J=18.9 D WRTEXT^GMVBP2
"RTN","GMVGR7",32,0)
 W !,"ENDM;"
"RTN","GMVGR7",33,0)
HTCM W !,"MCRO HTCM;" S J=19.3 D WRTEXT^GMVBP2
"RTN","GMVGR7",34,0)
 W !,"ENDM;"
"RTN","GMVGR7",35,0)
TEMPG W !,"MCRO TMPG; MAP %1, %2; DAP 1.8, %3; DAP 3.4, %4; DAP 5, %5; DAP 6.6, %6; DAP 8.2, %7; DAP 9.8, %8; DAP 11.4, %9;"
"RTN","GMVGR7",36,0)
 W !,"DAP 13, %10; DAP 14.6, %11;"
"RTN","GMVGR7",37,0)
 W !,"ENDM;" Q
"RTN","GMVHB0")
0^216^B8165934
"RTN","GMVHB0",1,0)
GMVHB0 ;HIOFO/YH,FT-HP LASER B/P GRAPH - DATA ARRAY ;11/6/01  15:36
"RTN","GMVHB0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHB0",3,0)
 ;
"RTN","GMVHB0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHB0",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVHB0",6,0)
 ;
"RTN","GMVHB0",7,0)
EN1 ;
"RTN","GMVHB0",8,0)
 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMVHB0",9,0)
 S GMROUT=0,GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMVHB0",10,0)
 F GTYPE="B","P" D SETT^GMVBP0
"RTN","GMVHB0",11,0)
 U IO D GRAPH
"RTN","GMVHB0",12,0)
Q1 D Q1^GMVGR0
"RTN","GMVHB0",13,0)
 Q
"RTN","GMVHB0",14,0)
GRAPH D DEM^VADPT,INP^VADPT,SETV^GMVWT1
"RTN","GMVHB0",15,0)
 F GK="P","B" S ^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMVHB0",16,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMVHB0",17,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMVHB0",18,0)
 F GPGS=1:1:GPG D
"RTN","GMVHB0",19,0)
 . K GMRQUAL
"RTN","GMVHB0",20,0)
 . S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP^GMVBP1,DATE,PAGE,^GMVHB1
"RTN","GMVHB0",21,0)
 D Q1^GMVHG0,KVAR^VADPT K VA,GRAPHS,GRAPHD Q
"RTN","GMVHB0",22,0)
PAGE ;
"RTN","GMVHB0",23,0)
 ;DATA FOR SYSTOLIC GRAPH
"RTN","GMVHB0",24,0)
 K GRAPHS S GRAPHS=0,I=1,J=1201,GPA=0 F GI=226:1:235 S GRAPHS=0.6+(1.6*(I-1)) D:^TMP($J,"GMRK","G"_GI)'=""  S I=I+1,J=J+1
"RTN","GMVHB0",25,0)
 .S GRAPHS(I)=$S(GPA=0:"PA",1:"PD")_GRAPHS_","_^TMP($J,"GMRK","G"_GI)_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMVHB0",26,0)
 K GRAPHD S GRAPHD=0,I=1,J=1101,GPA=0 F GI=210:1:219 S GRAPHD=0.6+(1.6*(I-1)) D:^TMP($J,"GMRK","G"_GI)'=""  S I=I+1,J=J+1
"RTN","GMVHB0",27,0)
 .S GRAPHD(I)=$S(GPA=0:"PA",1:"PD")_GRAPHD_","_^TMP($J,"GMRK","G"_GI)_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMVHB0",28,0)
 I $D(GMRQUAL) D LEGEND^GMVLGQU
"RTN","GMVHB0",29,0)
 K GG,GSYNO Q
"RTN","GMVHB0",30,0)
DATE F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMVHB0",31,0)
 Q
"RTN","GMVHB0",32,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMVHB0",33,0)
 Q
"RTN","GMVHB0",34,0)
SETD F GI="P","B","C","D","S" S GJ=$F("WTXPXRBIOCHDS",GI),GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMVHB4
"RTN","GMVHB0",35,0)
 S GI="M",GJ=0,GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMVHB4
"RTN","GMVHB0",36,0)
 Q
"RTN","GMVHB1")
0^217^B7179841
"RTN","GMVHB1",1,0)
GMVHB1 ;HIOFO/YH,FT-HP LASER B/P GRAPH - FORM ;11/6/01  15:36
"RTN","GMVHB1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHB1",3,0)
 ;
"RTN","GMVHB1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHB1",5,0)
 ; <None>
"RTN","GMVHB1",6,0)
 ;
"RTN","GMVHB1",7,0)
EN1 ;RESET PRINTER, SET PAGE SIZE (PORTRAIT) AND PCL PICTURE FRAME 8"*11"
"RTN","GMVHB1",8,0)
 W !,$CHAR(27),"E",$CHAR(27),"&l1E",$CHAR(27),"*c5952x7920Y",$CHAR(27),"%0B"
"RTN","GMVHB1",9,0)
 W !,"IN;SP1;IP;SC-3,18,-8,20,1;PW.15;PA0,0;FT3,1;RR16,20;PW.3;PA0,-3;EA16,20;PA-3,-3;EA16,0;PW.15;"
"RTN","GMVHB1",10,0)
 S I(1)="" F I=1:1:5 S I(1)=I(1)_"PU"_(1.6*I)_",20;PD"_(1.6*I)_",-3;"
"RTN","GMVHB1",11,0)
 W !,I(1) S I(1)="" F I=6:1:9 S I(1)=I(1)_"PU"_(1.6*I)_",20;PD"_(1.6*I)_",-3;"
"RTN","GMVHB1",12,0)
 W !,I(1) W !,"PU;"
"RTN","GMVHB1",13,0)
 ;PRINT LABEL
"RTN","GMVHB1",14,0)
 W !,"DT#,1;"
"RTN","GMVHB1",15,0)
 W !,"SD1,277,2,1,4,10,5,1,6,5,7,4;SS;LO12;PA-2,19.5;LBDate/Time#;PA-2.5,18.8;LBBlood Pressure#;PA-1,18;LB220#;PA-1,17;LB210#;"
"RTN","GMVHB1",16,0)
 W !,"PA-1,16;LB200#;PA-1,15;LB190#;PA-1,14;LB180#;PA-1,13;LB170#;PA-1,12;LB160#;PA-1,11;LB150#;PA-1,10;LB140#;"
"RTN","GMVHB1",17,0)
 W !,"PA-1,9;LB130#;PA-1,8;LB120#;PA-1,7;LB110#;"
"RTN","GMVHB1",18,0)
 W !,"PA-1,6;LB100#;PA-1,5;LB 90#;PA-1,4;LB 80#;PA-1,3;LB 70#;PA-1,2;LB 60#;PA-1,1;LB 50#;"
"RTN","GMVHB1",19,0)
 ;LABEL THE LOWER BOX
"RTN","GMVHB1",20,0)
 W !,"SD1,277,2,1,4,8,5,1,6,5,7,4;SS;LO11;PA-3,-0.4;LBPulse#;PA-3,-.5;PD16,-.5;PA16,-1;PD-3,-1;"
"RTN","GMVHB1",21,0)
 W !,"PA-3,-1.4;LBBlood Pressure#;PU;PA-3,-1.5;PD16,-1.5;PA16,-2;PD-3,-2;PA-3,-2.5;PD16,-2.5;PU;PA-3,-2.9;LBMAP#;"
"RTN","GMVHB1",22,0)
 W !,"PA-3,-3.4;LBS: Systolic B/P     D: Diastolic B/P     MAP: Mean Arterial Pressure   #;" W !,"LB  * - Abnormal value     ** - Abnormal value off of graph#;"
"RTN","GMVHB1",23,0)
QUAL ;
"RTN","GMVHB1",24,0)
 W !,"PA-3,-3.7;LB"_$E($G(GLINE(1)),1,100)_"#;" W !,"LB"_$E($G(GLINE(1)),101,180)_"#;"
"RTN","GMVHB1",25,0)
 W !,"PA-3,-4;LB"_$E($G(GLINE(2)),1,100)_"#;" W !,"LB"_$E($G(GLINE(2)),101,180)_"#;"
"RTN","GMVHB1",26,0)
 W !,"PA-3,-4.3;LB"_$E($G(GLINE(3)),1,100)_"#;" W !,"LB"_$E($G(GLINE(3)),101,180)_"#;"
"RTN","GMVHB1",27,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA12,-4.9;LBB/P PLOTTING CHART#;"
"RTN","GMVHB1",28,0)
 W !,"PA12,-4.5;LBMEDICAL RECORD#;PA12,-5.3;LBVA STANDARD FORM 512-A#;"
"RTN","GMVHB1",29,0)
 I GTNM=0 W !,"PA3,10;LBTHERE  IS  NO  DATA  FOR  THIS  PERIOD#;"
"RTN","GMVHB1",30,0)
 W "SD1,277,2,1,4,8,5,1,6,5,7,4;SS;PW.3;LO7;PU;" S I=0 F  S I=$O(GRAPHS(I)) Q:I'>0  W !,GRAPHS(I)
"RTN","GMVHB1",31,0)
 W "PU;" S I=0 F  S I=$O(GRAPHD(I)) Q:I'>0  W !,GRAPHD(I)
"RTN","GMVHB1",32,0)
 W !,"PU;LO1;" D EN1^GMVHB2
"RTN","GMVHB1",33,0)
 ;ENTER PCL MODE, RESET PRINTER AND EJECT PAGE
"RTN","GMVHB1",34,0)
Q1 ;
"RTN","GMVHB1",35,0)
 W !,"PA-3,18;",$CHAR(27),"&r0F",$CHAR(27),"%0A" K I,J Q
"RTN","GMVHB2")
0^218^B315992
"RTN","GMVHB2",1,0)
GMVHB2 ;HIOFO/YH,FT-HP LASER B/P GRAPH - BOX DATA ;11/6/01  15:37
"RTN","GMVHB2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHB2",3,0)
 ;
"RTN","GMVHB2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHB2",5,0)
 ; <None>
"RTN","GMVHB2",6,0)
 ;
"RTN","GMVHB2",7,0)
EN1 ;PRINT DATE
"RTN","GMVHB2",8,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;"
"RTN","GMVHB2",9,0)
 S J=19.5,J(1)=1 D WRTLN^GMVHG3
"RTN","GMVHB2",10,0)
 ;PRINT TIME
"RTN","GMVHB2",11,0)
 S J=19.1,J(1)=17 D WRTLN^GMVHG3
"RTN","GMVHB2",12,0)
 ;PRINT PULSE
"RTN","GMVHB2",13,0)
 S J=-0.4,J(1)=98 D WRTLN^GMVHG3
"RTN","GMVHB2",14,0)
 ;PRINT PULSE QUALIFIER
"RTN","GMVHB2",15,0)
 S J=-0.9,J(1)=1121 D WRTLN^GMVHG3
"RTN","GMVHB2",16,0)
 D EN1^GMVHB3
"RTN","GMVHB2",17,0)
 Q
"RTN","GMVHB3")
0^219^B1051012
"RTN","GMVHB3",1,0)
GMVHB3 ;HIOFO/YH,FT-HP LASER B/P GRAPH - ID ;11/6/01  15:37
"RTN","GMVHB3",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHB3",3,0)
 ;
"RTN","GMVHB3",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHB3",5,0)
 ; <None>
"RTN","GMVHB3",6,0)
 ;
"RTN","GMVHB3",7,0)
EN1 ;PRINT B/P
"RTN","GMVHB3",8,0)
 S J=-1.4,J(1)=130 D WRTLN^GMVHG3
"RTN","GMVHB3",9,0)
 S J=-1.9,J(1)=1241 D WRTLN^GMVHG3
"RTN","GMVHB3",10,0)
 ;PRINT B/P QUALIFIERS
"RTN","GMVHB3",11,0)
 S J=-2.4,J(1)=451 D WRTLN^GMVHG3
"RTN","GMVHB3",12,0)
 ;PRINT MEAN ARTERIAL PRESSURE
"RTN","GMVHB3",13,0)
 S J=-2.9,J(1)=1221 D WRTLN^GMVHG3
"RTN","GMVHB3",14,0)
PTID ;PRINT PATIENT ID
"RTN","GMVHB3",15,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA-1,-4.6;LB"_GMVNM_"#;PA-1,-4.9;LB"_GMVDOB_"   "_GMVGEN_"#;"
"RTN","GMVHB3",16,0)
 W !,"PA-1,-5.2;LB"_GMVWRD_"#;PA7,-5.2;LB"_GMVRMBD_"#;PA7,-5.5;LB"_^("G199")_"#;"
"RTN","GMVHB3",17,0)
 W !,"PA-1,-5.5;LB"_GMRDIV_"#;PA-1,-5.8;LB"_GSTRFIN_"#;"
"RTN","GMVHB3",18,0)
 Q
"RTN","GMVHB4")
0^220^B8323479
"RTN","GMVHB4",1,0)
GMVHB4 ;HIOFO/YH,FT-HP LASER B/P GRAPH - ^TMP DATA ;11/6/01  15:37
"RTN","GMVHB4",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHB4",3,0)
 ;
"RTN","GMVHB4",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHB4",5,0)
 ; <None>
"RTN","GMVHB4",6,0)
 ;
"RTN","GMVHB4",7,0)
SETA ;
"RTN","GMVHB4",8,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMVHB4",9,0)
 S (GMRSITE,GMRSITE(1),GMRSITE(2),GMRINF,GMRVJ)=""
"RTN","GMVHB4",10,0)
 I GK'="" D
"RTN","GMVHB4",11,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GI,GDT1,GK)),"^"),GMRVJ=$P($G(^(GK)),"^",2),GMRINF=$P($G(^(GK)),"^",4)
"RTN","GMVHB4",12,0)
 . I GMRSITE(1)'="" D SYNOARY^GMVLGQU
"RTN","GMVHB4",13,0)
 I GI="C" S ^TMP($J,"GMRK","G"_(1240+GCNTD))=GK_^TMP($J,"GMRK","G"_(1240+GCNTD)) Q
"RTN","GMVHB4",14,0)
 I GK'="" S GK=GK_$S(GMRVJ=1:"*",1:" ")
"RTN","GMVHB4",15,0)
 I GI="B" S ^TMP($J,"GMRK","G"_(450+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE),^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=GK S:$L(GMRSITE," ")>3 ^TMP($J,"GMRK","G"_(1240+GCNTD))="  "_$P(GMRSITE," ") Q
"RTN","GMVHB4",16,0)
 I GI="P" D  Q
"RTN","GMVHB4",17,0)
 . S ^TMP($J,"GMRK","G"_(GJ+1*16+GCNTD+1))=GK_" "_$S($L(GMRSITE," ")>3:$P(GMRSITE," "),1:"")
"RTN","GMVHB4",18,0)
 . S ^TMP($J,"GMRK","G"_(1120+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)
"RTN","GMVHB4",19,0)
 I GI="M" S ^TMP($J,"GMRK","G"_(1220+GCNTD))=GK Q
"RTN","GMVHB4",20,0)
 I GI="S"!(GI="D") S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(GK>0:GK-40/10,1:"") S ^TMP($J,"GMRK","G"_(GJ+1*16+GCNTD+1))=GK
"RTN","GMVHB4",21,0)
 I GI="S",GK>0 S ^TMP($J,"GMRK","G"_(1200+GCNTD))=$S(GK["*":"S*",1:"S")
"RTN","GMVHB4",22,0)
 I GI="D",GK>0 S ^TMP($J,"GMRK","G"_(1100+GCNTD))=$S(GK["*":"D*",1:"D")
"RTN","GMVHB4",23,0)
 I GK>0,GI="S" S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<0.4:0.4,^("G"_(GJ*16+GCNTD+1))>18.5:18.5,1:^("G"_(GJ*16+GCNTD+1))) S:^("G"_(GJ*16+GCNTD+1))<0.5!(^("G"_(GJ*16+GCNTD+1))>18.4) ^TMP($J,"GMRK","G"_(1200+GCNTD))="S**"
"RTN","GMVHB4",24,0)
 I GK>0,GI="D" S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<0.4:0.4,^("G"_(GJ*16+GCNTD+1))>18.5:18.5,1:^("G"_(GJ*16+GCNTD+1))) S:^("G"_(GJ*16+GCNTD+1))<0.5!(^("G"_(GJ*16+GCNTD+1))>18.4) ^TMP($J,"GMRK","G"_(1100+GCNTD))="D**"
"RTN","GMVHB4",25,0)
 Q
"RTN","GMVHG0")
0^221^B15329645
"RTN","GMVHG0",1,0)
GMVHG0 ;HIOFO/YH,FT-HP LASER SF 511 GRAPH - DATA ARRAY ;11/6/01  15:07
"RTN","GMVHG0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHG0",3,0)
 ;
"RTN","GMVHG0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHG0",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVHG0",6,0)
 ;
"RTN","GMVHG0",7,0)
EN1 ;ENTRY POINT FROM GMVSR0 TO PRINT SF-511 GRAPH FOR HP-3/4
"RTN","GMVHG0",8,0)
 S GMRHT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMVHG0",9,0)
 S (GMROUT,GHT)="",^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMVHG0",10,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMVHG0",11,0)
 F GTYPE="B","H","P","R","T","W","PO2","CVP","CG","PN" D SETT^GMVGR0
"RTN","GMVHG0",12,0)
 S GRPT=5 D SETIO^GMVGR0 U IO D GRAPH
"RTN","GMVHG0",13,0)
Q1 K GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMVHG0",14,0)
 D QIO^GMVGR5 K GRPT,GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GHT,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMVHG0",15,0)
 K GLINE,GMRQUAL,^TMP($J,"GTNM") Q
"RTN","GMVHG0",16,0)
GRAPH D DEM^VADPT,INP^VADPT,SETV^GMVGR1
"RTN","GMVHG0",17,0)
 F GK="H","W","T","P","R","B","I","O","PO2","CVP","CG","PN" D
"RTN","GMVHG0",18,0)
 . S ^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMVHG0",19,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMVHG0",20,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMVHG0",21,0)
 F GPGS=1:1:GPG D
"RTN","GMVHG0",22,0)
 . F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMVHG0",23,0)
 . S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE S ^TMP($J,"GMRK","G200")=GMRRMBD D PAGE D ^GMVHG1 D
"RTN","GMVHG0",24,0)
 . . S ^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6,^TMP($J,"GMRK","G210M")=0.2,^TMP($J,"GMRK","G226M")=0.2
"RTN","GMVHG0",25,0)
 D KVAR^VADPT K VA,GRAPHT,GRAPHP,GRAPHS,GRAPHD,GPA Q
"RTN","GMVHG0",26,0)
PAGE ;SET GRAPH DATA
"RTN","GMVHG0",27,0)
 ;DATA FOR T GRAPH
"RTN","GMVHG0",28,0)
 D SETV^GMVGR1
"RTN","GMVHG0",29,0)
 K GRAPHT S GRAPHT=0,I=1,J=411,GPA=0 F GI=50:1:59 S GRAPHT=0.4+((I-1)*1.6) D:^TMP($J,"GMRK","G"_GI)'=""  S I=I+1,J=J+1
"RTN","GMVHG0",30,0)
 .S GRAPHT(I)=$S(GPA=0:"PA",1:"PD")_GRAPHT_","_^TMP($J,"GMRK","G"_GI)_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMVHG0",31,0)
 ;DATA FOR P GRAPH
"RTN","GMVHG0",32,0)
 K GRAPHP S GRAPHP=0,I=1,J=431,GPA=0 F GI=82:1:92 S GRAPHP=0.6+((I-1)*1.6) D:^TMP($J,"GMRK","G"_GI)'=""  S I=I+1,J=J+1
"RTN","GMVHG0",33,0)
 .S GRAPHP(I)=$S(GPA=0:"PA",1:"PD")_GRAPHP_","_^TMP($J,"GMRK","G"_GI)_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMVHG0",34,0)
 I $D(GMRQUAL) D LEGEND^GMVLGQU
"RTN","GMVHG0",35,0)
 K GMRQUAL,GG,GI,GMRVJ,GSYNO,GHOLD Q
"RTN","GMVHG0",36,0)
DATE S GHOLD="" F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMVHG0",37,0)
 Q
"RTN","GMVHG0",38,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMVHG0",39,0)
 Q
"RTN","GMVHG0",40,0)
SETD F GI="H","W","T","P","R","B","I","O","C" S GJ=$F("WTXPXRBIOCHDS",GI),GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMVHG4
"RTN","GMVHG0",41,0)
 F GI="PO2","CVP","CG","PN" S GJ=0,GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMVHG4
"RTN","GMVHG0",42,0)
 Q
"RTN","GMVHG0",43,0)
SETP ;INITIALIZE ^TMP FOR HEIGHT AND V/M QUALIFIERS
"RTN","GMVHG0",44,0)
 ;470 - STORE HEIGHT IN INCH  1100 - STORE HEIGHT IN CM
"RTN","GMVHG0",45,0)
 ;1200 - STORE WEIGHT IN KG    1300 - STORE BODY MASS INDEX
"RTN","GMVHG0",46,0)
 ; 410 - STORE T*   430 - STORE P*   450 - STORE BP QUALIFIER
"RTN","GMVHG0",47,0)
 ;1400+I - PULSE OXIMETRY DATA  1430+I - PULSE OX. L/MIN
"RTN","GMVHG0",48,0)
 ;1450+I - PULSE OX. %  1470+I - PULSE OX. METHOD
"RTN","GMVHG0",49,0)
 ;1500+I - CVP DATA IN CM H2O  1530+I - CVP DATA IN MMHG
"RTN","GMVHG0",50,0)
 ;1550+I - C/G DATA IN INCH  1570+I - C/G QUALIFIER  1600+I - PULSE QUALIFIER
"RTN","GMVHG0",51,0)
 ;1620+I - C/G DATA IN CM  1640+I - THE THIRD PIECE OF BP
"RTN","GMVHG0",52,0)
 ;1660+I - PAIN
"RTN","GMVHG0",53,0)
 F I=1:1:10 D
"RTN","GMVHG0",54,0)
 . S (^TMP($J,"GMRK","G"_(410+I)),^("G"_(430+I)),^("G"_(450+I)),^("G"_(470+I)),^("G"_(1100+I)),^("G"_(1200+I)),^("G"_(1300+I)),^("G"_(1640+I)))=""
"RTN","GMVHG0",55,0)
 . S (^TMP($J,"GMRK","G"_(1400+I)),^("G"_(1430+I)),^("G"_(1450+I)),^("G"_(1470+I)),^("G"_(1500+I)),^("G"_(1530+I)),^("G"_(1550+I)),^("G"_(1570+I)))=""
"RTN","GMVHG0",56,0)
 . S (^TMP($J,"GMRK","G"_(1600+I)),^("G"_(1620+I)),^("G"_(1660+I)))=""
"RTN","GMVHG0",57,0)
 Q
"RTN","GMVHG1")
0^222^B14092370
"RTN","GMVHG1",1,0)
GMVHG1 ;HIOFO/YH,FT-HP LASER SF511 GRAPH - FORM ;11/6/01  15:09
"RTN","GMVHG1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHG1",3,0)
 ;
"RTN","GMVHG1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHG1",5,0)
 ; <None>
"RTN","GMVHG1",6,0)
 ;
"RTN","GMVHG1",7,0)
EN1 ;RESET PRINTER, SET PAGE SIZE (PORTRAIT) AND PCL PICTURE FRAME 8 1/2"*11"
"RTN","GMVHG1",8,0)
 W !,$CHAR(27),"E",$CHAR(27),"&l1E",$CHAR(27),"*c5952x7920Y",$CHAR(27),"%0B"
"RTN","GMVHG1",9,0)
 W !,"IN;SP1;IP;SC-3,18,-15,13,1;PW.15;PA0,0;FT3,1;RR16,14;PW.3;EA16,14;PA-3,-9.2;EA16,0;"
"RTN","GMVHG1",10,0)
 W !,"PW.3;PA0,0;PD0,-9.2;"
"RTN","GMVHG1",11,0)
 S I(1)="" F I=1:1:5 S I(1)=I(1)_"PU"_(1.6*I)_",13;PD"_(1.6*I)_",-9.2;"
"RTN","GMVHG1",12,0)
 W !,I(1)
"RTN","GMVHG1",13,0)
 S I(1)="PW.15" F I=6:1:9 S I(1)=I(1)_"PU"_(1.6*I)_",13;PD"_(1.6*I)_",-9.2;"
"RTN","GMVHG1",14,0)
 W !,I(1) K I
"RTN","GMVHG1",15,0)
 W !,"PU-3,-9.2;PD16,-9.2;PU-3,-8.8;PD16,-8.8;PU16,-8.4;PD-3,-8.4;PU;"
"RTN","GMVHG1",16,0)
 W !,"PA16,-8.0;PD-3,-8.0;PU-3,-7.6;PD16,-7.6;PU16,-7.2;PD-3,-7.2;PU-3,-6.8;PD16,-6.8;PU-3,-6.4;PD16,-6.4;PU16,-6.0;PD-3,-6.0;" W !,"PU-3,-5.6;PD16,-5.6;PU16,-5.2;PD-3,-5.2;"
"RTN","GMVHG1",17,0)
  W !,"PU-3,-4.8;PD16,-4.8;PU16,-4.4;PD-3,-4.4;PU-3,-3.2;PD16,-3.2;PU16,-2.8;PD-3,-2.8;PU-3,-2.4;PD16,-2.4;PU16,-2.0;PD-3,-2.0;"
"RTN","GMVHG1",18,0)
 W !,"PU-3,-1.6;PD16,-1.6;PU16,-1.2;PD-3,-1.2;PU-3,-0.4;PD16,-0.4;PU;"
"RTN","GMVHG1",19,0)
 W !,"PW.3;PA0,5.6;PD16,5.6;PU;"
"RTN","GMVHG1",20,0)
LABEL ;PRINT LABEL
"RTN","GMVHG1",21,0)
 W !,"DT#,1;"
"RTN","GMVHG1",22,0)
 W !,"SD1,277,2,1,4,10,5,1,6,5,7,4;SS;LO12;"
"RTN","GMVHG1",23,0)
 W !,"PA-2,12.5;LBDate/Time#;PA-3,11.8;LB Pulse   Temp/F/C#;"
"RTN","GMVHG1",24,0)
 W !,"PA-3,11;LB150#;PA-1.6,11,LB104/40.0#;" W !,"PA-3,10;LB140#;PA-1.6,10;LB103/39.4#;PA-3,9;LB130#;PA-1.6,9;LB102/38.9#;"
"RTN","GMVHG1",25,0)
 W !,"PA-3,8;LB120#;PA-1.6,8;LB101/38.3#;PA-3,7;LB110#;PA-1.6,7;LB100/37.8#;"
"RTN","GMVHG1",26,0)
 W !,"PA-3,6;LB100#;PA-1.6,6;LB 99/37.2#;PA-1.6,5.6;LB 98.6#;"
"RTN","GMVHG1",27,0)
 W !,"PA-3,5;LB 90#;PA-1.6,5;LB 98/36.7#;PA-3,4;LB 80#;PA-1.6,4;LB 97/36.1#;PA-3,3;LB 70#;PA-1.6,3;LB 96/35.6#;"
"RTN","GMVHG1",28,0)
 W !,"PA-3,2;LB 60#;PA-1.6,2;LB 95/35.0#;PA-3,1;LB 50#;PA-1.6,1;LB 94#;"
"RTN","GMVHG1",29,0)
 ;LABEL THE LOWER BOX
"RTN","GMVHG1",30,0)
 W !,"SD1,277,2,1,4,8,5,1,6,5,7,4;SS;LO11;PA-3,-0.3;LBTemperature#;PA-3,-0.7;LBPulse#;PA-3,-1.5;LBRespiration#;PA-3,-1.9;LBPulse Ox.#;"
"RTN","GMVHG1",31,0)
 W !,"PA-3,-2.3;LB  L/Min#;PA-3,-2.7;LB  %#;"
"RTN","GMVHG1",32,0)
 W !,"PA-3,-3.1;LB  Method#;PA-3,-3.5;LBBlood Pressure#;"
"RTN","GMVHG1",33,0)
 W !,"PA-3,-4.7;LBWeight (lb)#;PA-3,-5.1;LB         (kg)#;PA-3,-5.5;LBBody Mass Index#;"
"RTN","GMVHG1",34,0)
 W !,"PA-3,-5.9;LBHeight (in)#;PA-3,-6.3;LB         (cm)#;PA-3,-6.7;LBC/G (in)#;PA-2.5,-7.1;LB(cm)#;PA-3,-7.5;LBCVP#;PA-2,-7.5;LB(cm H2O)#;"
"RTN","GMVHG1",35,0)
 W !,"PA-2,-7.9;LB(mm Hg)#;"
"RTN","GMVHG1",36,0)
 W !,"PA-3,-8.3;LBIntake (24hr)(cc)#;PA-3,-8.7;LBOutput (24hr)(cc)#;"
"RTN","GMVHG1",37,0)
 W !,"PA-3,-9.1;LBPain#;"
"RTN","GMVHG1",38,0)
 W !,"PA-3,-9.6;LBT: Temperature     P: Pulse     C/G: Circumference/Girth     * - Abnormal value     **- Abnormal value off of graph#;"
"RTN","GMVHG1",39,0)
 W !,"PA-3,-9.9;LBPAIN: 99 - Unable to respond  0 - No pain  10 - Worst imaginable pain#;"
"RTN","GMVHG1",40,0)
 W !,"PA-3,-10.3;LB"_$E($G(GLINE(1)),1,100)_"#;" W !,"LB"_$E($G(GLINE(1)),101,180)_"#;"
"RTN","GMVHG1",41,0)
 W !,"PA-3,-10.6;LB"_$E($G(GLINE(2)),1,100)_"#;" W !,"LB"_$E($G(GLINE(2)),101,180)_"#;"
"RTN","GMVHG1",42,0)
 W !,"PA-3,-10.9;LB"_$E($G(GLINE(3)),1,100)_"#;" W !,"LB"_$E($G(GLINE(3)),101,180)_"#;"
"RTN","GMVHG1",43,0)
 W !,"PA-3,-11.2;LB"_$E($G(GLINE(4)),1,100)_"#;" W !,"LB"_$E($G(GLINE(4)),101,180)_"#;"
"RTN","GMVHG1",44,0)
 W 1,"PA-3,-11.5;LB"_$E($G(GLINE(5)),1,100)_"#;" W !,"LB"_$E($G(GLINE(5)),101,180)_"#;"
"RTN","GMVHG1",45,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA12,-11.7;LBVITAL FLOW SHEET#;"
"RTN","GMVHG1",46,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA12,-11.3;LBMEDICAL RECORD#;PA12,-12.1;LBVAF 10-7987 VICE SF 511#;"
"RTN","GMVHG1",47,0)
 I GTNM=0 W !,"PA3,10;LBTHERE  IS  NO  DATA  FOR  THIS  PERIOD#;"
"RTN","GMVHG1",48,0)
 W "SD1,277,2,1,4,8,5,1,6,5,7,4;SS;LO7;PU;" S I=0 F  S I=$O(GRAPHT(I)) Q:I'>0  W !,GRAPHT(I)
"RTN","GMVHG1",49,0)
 W "PU;" S I=0 F  S I=$O(GRAPHP(I)) Q:I'>0  W !,GRAPHP(I)
"RTN","GMVHG1",50,0)
 W !,"PU;LO1;" D EN1^GMVHG2
"RTN","GMVHG1",51,0)
 ;ENTER PCL MODE, RESET PRINTER AND EJECT PAGE
"RTN","GMVHG1",52,0)
Q1 ;
"RTN","GMVHG1",53,0)
 W !,"PA-3,18;",$CHAR(27),"&r0F",$CHAR(27),"%0A" K I,J Q
"RTN","GMVHG2")
0^223^B1187119
"RTN","GMVHG2",1,0)
GMVHG2 ;HIOFO/YH,FT-HP LASER SF 511 GRAPH - BOX DATA ;12/4/01  22:27
"RTN","GMVHG2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHG2",3,0)
 ;
"RTN","GMVHG2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHG2",5,0)
 ; <None>
"RTN","GMVHG2",6,0)
 ;
"RTN","GMVHG2",7,0)
EN1 ;PRINT DATE
"RTN","GMVHG2",8,0)
 W !,"SD1,277,2,1,4,9,5,1,6,0,7,4;SS;"
"RTN","GMVHG2",9,0)
 S J=12.5,J(1)=1 D WRTLN^GMVHG3
"RTN","GMVHG2",10,0)
TIME ;PRINT TIME
"RTN","GMVHG2",11,0)
 S J=12.1,J(1)=17 D WRTLN^GMVHG3
"RTN","GMVHG2",12,0)
TEMP ;PRINT TEMPERATURE
"RTN","GMVHG2",13,0)
 W !,"SD1,277,2,1,4,8,5,1,6,3,7,4;SS;"
"RTN","GMVHG2",14,0)
 S J=-0.3,J(1)=66 D WRTLN^GMVHG3
"RTN","GMVHG2",15,0)
PULSE ;PRINT PULSE
"RTN","GMVHG2",16,0)
 S J=-0.7,J(1)=98 D WRTLN^GMVHG3
"RTN","GMVHG2",17,0)
PQUAL ;PRINT PULSE QUALIFIER
"RTN","GMVHG2",18,0)
 S J=-1.1,J(1)=1601 D WRTLN^GMVHG3
"RTN","GMVHG2",19,0)
RESP ;PRINT RESPIRATION
"RTN","GMVHG2",20,0)
 S J=-1.5,J(1)=114 D WRTLN^GMVHG3
"RTN","GMVHG2",21,0)
POX ;PRINT PULSE OX. DATA
"RTN","GMVHG2",22,0)
 S J=-1.9,J(1)=1401 D WRTLN^GMVHG3
"RTN","GMVHG2",23,0)
LMIN ;PRINT O2 L/MIN
"RTN","GMVHG2",24,0)
 S J=-2.3,J(1)=1431 D WRTLN^GMVHG3
"RTN","GMVHG2",25,0)
PCNT ;PRINT O2 %
"RTN","GMVHG2",26,0)
 S J=-2.7,J(1)=1451 D WRTLN^GMVHG3
"RTN","GMVHG2",27,0)
METHOD ;PRINT METHOD
"RTN","GMVHG2",28,0)
 S J=-3.1,J(1)=1471 D WRTLN^GMVHG3
"RTN","GMVHG2",29,0)
BP ;PRINT B/P
"RTN","GMVHG2",30,0)
 S J=-3.5,J(1)=130 D WRTLN^GMVHG3
"RTN","GMVHG2",31,0)
BP2 S J=-3.9,J(1)=1641 D WRTLN^GMVHG3
"RTN","GMVHG2",32,0)
 D EN1^GMVHG3
"RTN","GMVHG2",33,0)
 Q
"RTN","GMVHG3")
0^224^B1723226
"RTN","GMVHG3",1,0)
GMVHG3 ;HIOFO/YH,FT-HP LASER SF 511 GRAPH - ID ;11/6/01  15:09
"RTN","GMVHG3",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHG3",3,0)
 ;
"RTN","GMVHG3",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHG3",5,0)
 ; <None>
"RTN","GMVHG3",6,0)
 ;
"RTN","GMVHG3",7,0)
EN1 ;PRINT B/P QUALIFIERS
"RTN","GMVHG3",8,0)
 S J=-4.3,J(1)=451 D WRTLN
"RTN","GMVHG3",9,0)
WT ;PRINT WEIGHT
"RTN","GMVHG3",10,0)
 S J=-4.7,J(1)=34 D WRTLN
"RTN","GMVHG3",11,0)
WTKG S J=-5.1,J(1)=1201 D WRTLN
"RTN","GMVHG3",12,0)
BMI ;PRINT BODY MASS INDEX
"RTN","GMVHG3",13,0)
 S J=-5.5,J(1)=1301 D WRTLN
"RTN","GMVHG3",14,0)
HT ;PRINT HEIGHT
"RTN","GMVHG3",15,0)
 S J=-5.9,J(1)=471 D WRTLN
"RTN","GMVHG3",16,0)
HTCM S J=-6.3,J(1)=1101 D WRTLN
"RTN","GMVHG3",17,0)
CG ;PRINT CIRCUMFERENCE/GIRTH DATA
"RTN","GMVHG3",18,0)
 S J=-6.7,J(1)=1551 D WRTLN
"RTN","GMVHG3",19,0)
CG2 S J=-7.1,J(1)=1621 D WRTLN
"RTN","GMVHG3",20,0)
CVP ;PRINT CVP IN CM H2O
"RTN","GMVHG3",21,0)
 S J=-7.5,J(1)=1501 D WRTLN
"RTN","GMVHG3",22,0)
CVPHG ;PRINT CVP IN MM HG
"RTN","GMVHG3",23,0)
 S J=-7.9,J(1)=1531 D WRTLN
"RTN","GMVHG3",24,0)
INTK ;PRINT INTAKE
"RTN","GMVHG3",25,0)
 S J=-8.4,J(1)=146 D WRTLN
"RTN","GMVHG3",26,0)
OUTP ;PRINT OUTPUT AND PT ID
"RTN","GMVHG3",27,0)
 D OUTP^GMVHG4
"RTN","GMVHG3",28,0)
 Q
"RTN","GMVHG3",29,0)
WRTLN ;WRITE LINE
"RTN","GMVHG3",30,0)
 S I(1)="" F I=1:1:5 S I(2)=I-1,I(1)=I(1)_"PA"_(1.6*I(2))_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMVHG3",31,0)
 W !,I(1) S I(1)="" F I=6:1:10 S I(2)=I-1,I(1)=I(1)_"PA"_(1.6*I(2))_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMVHG3",32,0)
 W !,I(1) Q
"RTN","GMVHG4")
0^225^B19606083
"RTN","GMVHG4",1,0)
GMVHG4 ;HIOFO/YH,FT-HP LASER SF 511 GRAPH - ^TMP DATA ;11/6/01  15:08
"RTN","GMVHG4",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHG4",3,0)
 ;
"RTN","GMVHG4",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHG4",5,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVHG4",6,0)
 ;
"RTN","GMVHG4",7,0)
SETA ;
"RTN","GMVHG4",8,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMVHG4",9,0)
 S (GMRSITE,GMRSITE(1),GMRSITE(2),GMRINF,GMRVJ)=""
"RTN","GMVHG4",10,0)
 I GK'="" D
"RTN","GMVHG4",11,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GI,GDT1,GK)),"^"),GMRVJ=$P($G(^(GK)),"^",2),GMRINF=$P($G(^(GK)),"^",4)
"RTN","GMVHG4",12,0)
 . I GMRSITE(1)'="" D SYNOARY^GMVLGQU
"RTN","GMVHG4",13,0)
 I GI="H" S ^TMP($J,"GMRK","G"_(470+GCNTD))=GK_" "_GMRSITE,^TMP($J,"GMRK","G"_(1100+GCNTD))=$S(GK>0:$J(GK*2.54,0,2),1:"") S:GK>0 GMRHT=GK*2.54/100 Q
"RTN","GMVHG4",14,0)
 I GI="PN" S ^TMP($J,"GMRK","G"_(1660+GCNTD))=GK
"RTN","GMVHG4",15,0)
 I GI="C" S ^TMP($J,"GMRK","G"_(1640+GCNTD))=GK_"  "_^TMP($J,"GMRK","G"_(1640+GCNTD)) Q
"RTN","GMVHG4",16,0)
 I GI="PO2"!(GI="CVP")!(GI="CG") D  Q
"RTN","GMVHG4",17,0)
 . I GI="PO2" D
"RTN","GMVHG4",18,0)
 . . S (GMRINF(1),GMRINF(2))="" I GMRINF'="" D PO2^GMVLGQU(.GMRINF)
"RTN","GMVHG4",19,0)
 . . S ^TMP($J,"GMRK","G"_(1400+GCNTD))=GK_$S(GMRVJ=1:"*",1:"")
"RTN","GMVHG4",20,0)
 . . S ^TMP($J,"GMRK","G"_(1430+GCNTD))=GMRINF(1)
"RTN","GMVHG4",21,0)
 . . S ^TMP($J,"GMRK","G"_(1450+GCNTD))=GMRINF(2)
"RTN","GMVHG4",22,0)
 . . S ^TMP($J,"GMRK","G"_(1470+GCNTD))=GMRSITE
"RTN","GMVHG4",23,0)
 . . Q
"RTN","GMVHG4",24,0)
 . I GI="CVP" D
"RTN","GMVHG4",25,0)
 . . S ^TMP($J,"GMRK","G"_(1500+GCNTD))=$S(GK>0!(GK<0):$J(GK,0,1),1:GK)_$S(GMRVJ=1:"*",1:"")
"RTN","GMVHG4",26,0)
 . . S ^TMP($J,"GMRK","G"_(1530+GCNTD))=$S(GK>0!(GK<0)!($E(GK)="0"):$J(GK/1.36,0,1),1:"")_$S(GMRVJ=1:"*",1:"")
"RTN","GMVHG4",27,0)
 . . Q
"RTN","GMVHG4",28,0)
 . I GI="CG" D
"RTN","GMVHG4",29,0)
 . . S ^TMP($J,"GMRK","G"_(1550+GCNTD))=GK_GMRSITE,^TMP($J,"GMRK","G"_(1620+GCNTD))=$S(GK>0:$J(GK/.3937,0,2),1:"")
"RTN","GMVHG4",30,0)
 . . Q
"RTN","GMVHG4",31,0)
 I GI="B",GK'="" S ^TMP($J,"GMRK","G"_(450+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE) S:$L(GMRSITE," ")>3 ^TMP($J,"GMRK","G"_(1640+GCNTD))=$P(GMRSITE," ")
"RTN","GMVHG4",32,0)
 I '(GI="T"!(GI="P")) D  Q
"RTN","GMVHG4",33,0)
 . S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=GK_$S(GMRVJ=1:"*",1:"")_$S(GI="B":"",1:GMRSITE) S:GI="W" ^TMP($J,"GMRK","G"_(1200+GCNTD))=$S(GK>0:$J(GK/2.2,0,2),1:"")
"RTN","GMVHG4",34,0)
 . I GI="W",GK>0 D
"RTN","GMVHG4",35,0)
 . . S GMRBMI="",GMRBMI(1)=GDT1,GMRBMI(2)=GK D CALBMI^GMVBMI(.GMRBMI)
"RTN","GMVHG4",36,0)
 . . S ^TMP($J,"GMRK","G"_(1300+GCNTD))=GMRBMI K GMRBMI
"RTN","GMVHG4",37,0)
 I GI="T",GK>0 S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=GK-93
"RTN","GMVHG4",38,0)
 I GK'="",GI="P","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) D
"RTN","GMVHG4",39,0)
 . I GMRSITE(1)["RADIAL"!(GMRSITE(1)["APICAL")!(GMRSITE(1)["BRACHIAL") D
"RTN","GMVHG4",40,0)
 . . S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=GK-40/10
"RTN","GMVHG4",41,0)
 S ^TMP($J,"GMRK","G"_(GJ+1*16+GCNTD+1))=GK_$S(GMRVJ=1:"*",1:"")_$S(GI="T":GMRSITE,GI="P"&($L(GMRSITE," ")>3):"  "_$P(GMRSITE," "),1:" ")
"RTN","GMVHG4",42,0)
 I GI="T",GK>0 S ^TMP($J,"GMRK","G"_(410+GCNTD))=$S(GMRVJ=1:"T*",1:"T")
"RTN","GMVHG4",43,0)
 I GK'="",GI="P","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) D
"RTN","GMVHG4",44,0)
 . I GMRSITE(1)["RADIAL"!(GMRSITE(1)["APICAL")!(GMRSITE(1)["BRACHIAL") S ^TMP($J,"GMRK","G"_(430+GCNTD))=$S(GMRVJ=1:"P*",1:"P")
"RTN","GMVHG4",45,0)
 . S ^TMP($J,"GMRK","G"_(1600+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)
"RTN","GMVHG4",46,0)
 I GK>0,GI="T" S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<0.3:0.3,^("G"_(GJ*16+GCNTD+1))>11.6:11.6,1:^("G"_(GJ*16+GCNTD+1))) S:^("G"_(GJ*16+GCNTD+1))<0.4!(^("G"_(GJ*16+GCNTD+1))>11.5) ^TMP($J,"GMRK","G"_(410+GCNTD))="T**"
"RTN","GMVHG4",47,0)
 I GK'="",GI="P","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) D
"RTN","GMVHG4",48,0)
 . I GMRSITE(1)["RADIAL"!(GMRSITE(1)["APICAL")!(GMRSITE(1)["BRACHIAL") D
"RTN","GMVHG4",49,0)
 . . S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<0.3:0.3,^("G"_(GJ*16+GCNTD+1))>11.6:11.6,1:^("G"_(GJ*16+GCNTD+1))) S:^("G"_(GJ*16+GCNTD+1))<0.4!(^("G"_(GJ*16+GCNTD+1))>11.5) ^TMP($J,"GMRK","G"_(430+GCNTD))="P**"
"RTN","GMVHG4",50,0)
 Q
"RTN","GMVHG4",51,0)
OUTP ;PRINT OUTPUT
"RTN","GMVHG4",52,0)
 S J=-8.7,J(1)=162 D WRTLN^GMVHG3
"RTN","GMVHG4",53,0)
PAIN ;PRINT PAIN
"RTN","GMVHG4",54,0)
 S J=-9.1,J(1)=1661 D
"RTN","GMVHG4",55,0)
 . S I(1)="" F I=1:1:5 S I(2)=I-1,I(1)=I(1)_"PA"_(1.6*I(2)+0.2)_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMVHG4",56,0)
 . W !,I(1) S I(1)="" F I=6:1:10 S I(2)=I-1,I(1)=I(1)_"PA"_(1.6*I(2)+0.2)_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMVHG4",57,0)
 . W !,I(1) Q
"RTN","GMVHG4",58,0)
PTID ;PRINT PATIENT ID
"RTN","GMVHG4",59,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA-1,-11.3;LB"_^TMP($J,"GMRK","G194")_"#;PA-1,-11.6;LB"_^("G196")_"   "_^("G197")_"#;"
"RTN","GMVHG4",60,0)
 W !,"PA-1,-11.9;LB"_^TMP($J,"GMRK","G198")_"#;PA7,-11.9;LB"_^("G200")_"#;PA-1,-12.2;LB"_GMRDIV_"#;PA7,-12.2;LB"_^("G199")_"#;"
"RTN","GMVHG4",61,0)
 W !,"PA-1,-12.5;LB"_GSTRFIN_"#;" Q
"RTN","GMVHPN0")
0^226^B11198074
"RTN","GMVHPN0",1,0)
GMVHPN0 ;HIOFO/YH,FT-HP LASER PAIN CHART - DATA ARRAY ;11/6/01  15:14
"RTN","GMVHPN0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHPN0",3,0)
 ;
"RTN","GMVHPN0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHPN0",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVHPN0",6,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVHPN0",7,0)
 ;
"RTN","GMVHPN0",8,0)
EN1 ;ENTRY POINT FROM GMVSR0 TO PRINT CHART FOR HP LASER PRINTER
"RTN","GMVHPN0",9,0)
 S GMROUT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMVHPN0",10,0)
 S GMROUT=0
"RTN","GMVHPN0",11,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMVHPN0",12,0)
 F GTYPE="PN" D SETT
"RTN","GMVHPN0",13,0)
 U IO D GRAPH
"RTN","GMVHPN0",14,0)
Q1 K GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMVHPN0",15,0)
 K GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMVHPN0",16,0)
 K ^TMP($J,"GTNM") Q
"RTN","GMVHPN0",17,0)
GRAPH D DEM^VADPT,INP^VADPT,SETV^GMVGR1
"RTN","GMVHPN0",18,0)
 S GK="PN",^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMVHPN0",19,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMVHPN0",20,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMVHPN0",21,0)
 F GPGS=1:1:GPG D
"RTN","GMVHPN0",22,0)
 . S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE S ^TMP($J,"GMRK","G200")=GMRRMBD D PAGE D EN2^GMVHPN1
"RTN","GMVHPN0",23,0)
 D KVAR^VADPT K VA,GRAPHR,GRAPHS,GRAPHD,GPA Q
"RTN","GMVHPN0",24,0)
PAGE ;SET GRAPH DATA
"RTN","GMVHPN0",25,0)
 ;DATA FOR PAIN CHART
"RTN","GMVHPN0",26,0)
 K GRAPHR S GRAPHR=0,I=1,J=411,GPA=0 F GI=312:1:321 S GRAPHR=0.4+(1.6*(I-1)) S GK=^TMP($J,"GMRK","G"_GI) D:(GK'="")&(GK'=99)&("PASSREFUSEDUNAVAL"'[$$UP^XLFSTR(GK))  S I=I+1,J=J+1
"RTN","GMVHPN0",27,0)
 .S GRAPHR(I)=$S(GPA=0:"PA",1:"PD")_GRAPHR_","_GK_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMVHPN0",28,0)
 K GG,GI,GMRVJ,GSYNO Q
"RTN","GMVHPN0",29,0)
DATE F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMVHPN0",30,0)
 Q
"RTN","GMVHPN0",31,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMVHPN0",32,0)
 Q
"RTN","GMVHPN0",33,0)
SETD S GI="PN",GJ=310,GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMVHPN2
"RTN","GMVHPN0",34,0)
 Q
"RTN","GMVHPN0",35,0)
SETP ;INITIALIZE ^TMP FOR QUALIFIERS
"RTN","GMVHPN0",36,0)
 ; 410 - STORE PN*
"RTN","GMVHPN0",37,0)
 F I=1:1:10 S (^TMP($J,"GMRK","G"_(410+I)),^("G"_(311+I)),^("G"_(331+I)))=""
"RTN","GMVHPN0",38,0)
 Q
"RTN","GMVHPN0",39,0)
SETT S GTYP=$O(^GMRD(120.51,"B","PAIN",0))
"RTN","GMVHPN0",40,0)
 I GTYP>0 F GX=GSTART1:0 S GX=$O(^GMR(120.5,"AA",DFN,GTYP,GX)) Q:GX>GEND1!(GX'>0)  F GEN=0:0 S GEN=$O(^GMR(120.5,"AA",DFN,GTYP,GX,GEN)) Q:GEN'>0  I '$D(^GMR(120.5,GEN,2)) D BLDARR^GMVGR0
"RTN","GMVHPN0",41,0)
 Q
"RTN","GMVHPN1")
0^227^B4697998
"RTN","GMVHPN1",1,0)
GMVHPN1 ;HIOFO/YH,FT-HP LASER PAIN CHART - FORM ;11/6/01  15:16
"RTN","GMVHPN1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHPN1",3,0)
 ;
"RTN","GMVHPN1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHPN1",5,0)
 ; <None>
"RTN","GMVHPN1",6,0)
 ;
"RTN","GMVHPN1",7,0)
EN1 ;RESET PRINTER, SET PAGE SIZE (PORTRAIT) AND PCL PICTURE FRAME 8 1/2"*11"
"RTN","GMVHPN1",8,0)
EN2 ;
"RTN","GMVHPN1",9,0)
 W !,$CHAR(27),"E",$CHAR(27),"&l1E",$CHAR(27),"*c5952x7920Y",$CHAR(27),"%0B"
"RTN","GMVHPN1",10,0)
 W !,"IN;SP1;IP;SC-3,18,-16,12,1;PW.3;PA0,0;FT3,1;RR16,12;PW.3;PA0,-1;EA16,12;PA-3,-1;EA16,0;PW.15;PU;"
"RTN","GMVHPN1",11,0)
 S I(1)="" F I=1:1:5 S I(1)=I(1)_"PU"_(1.6*I)_",12;PD"_(1.6*I)_",-1;"
"RTN","GMVHPN1",12,0)
 W !,I(1)
"RTN","GMVHPN1",13,0)
 S I(1)="" F I=6:1:9 S I(1)=I(1)_"PU"_(1.6*I)_",12;PD"_(1.6*I)_",-1;"
"RTN","GMVHPN1",14,0)
 W !,I(1) K I
"RTN","GMVHPN1",15,0)
 ;PRINT LABEL
"RTN","GMVHPN1",16,0)
 W !,"PU;DT#,1;"
"RTN","GMVHPN1",17,0)
 W !,"SD1,277,2,1,4,10,5,1,6,5,7,4;SS;LO12;PA-2,11.6;LBDate/Time#;"
"RTN","GMVHPN1",18,0)
 W !,"PA-2,10.8;LBPain Scale#;PA-0.6,10;LB10#;PU0,11;PD16,11;PU16,10;PD0,10;PU-0.4,9;LB9#;"
"RTN","GMVHPN1",19,0)
 W !,"PU0,9;PD16,9;PU16,8;PD0,8;PU-0.4,8;LB8#;PU0,7;PD16,7;PU16,6;PD0,6;"
"RTN","GMVHPN1",20,0)
 W !,"PU-0.4,7;LB7#PU0,5;PD16,5;PU16,4;PD0,4;PU-0.4,6;LB6#;"
"RTN","GMVHPN1",21,0)
 W !,"PU-0.4,5;LB5#;PU-0.4,4;LB4#;PU0,3;PD16,3;PU16,2;PD0,2;"
"RTN","GMVHPN1",22,0)
 W !,"PU-0.4,3;LB3#;PU0,1;PD16,1;PU-0.4,2;LB2#;PU-0.4,1;LB1#;"
"RTN","GMVHPN1",23,0)
 ;LABEL THE LOWER BOX
"RTN","GMVHPN1",24,0)
 W !,"SS;LO11;PA-1,-0.9;LBPain#;"
"RTN","GMVHPN1",25,0)
 W !,"PA0,-2;LB0 - No pain     10 - Worst imaginable pain     99 - Unable to respond#;"
"RTN","GMVHPN1",26,0)
 W !,"SD1,277,2,1,4,11,5,1,6,5,7,4;SS;PA12,-11.5;LBMedical Record#;PA12,-12;LBPain Chart#;"
"RTN","GMVHPN1",27,0)
 W !,"PA12,-12.5;LBSF 512#;"
"RTN","GMVHPN1",28,0)
 I GTNM=0 W !,"PA3,10;LBTHERE  IS  NO  DATA  FOR  THIS  PERIOD#;"
"RTN","GMVHPN1",29,0)
 W "PW.3;SD1,277,2,1,4,8,5,1,6,5,7,4;SS;LO7;PU;" S I=0 F  S I=$O(GRAPHR(I)) Q:I'>0  W !,GRAPHR(I)
"RTN","GMVHPN1",30,0)
 W !,"PU;LO1;"
"RTN","GMVHPN1",31,0)
 ;PRINT DATE
"RTN","GMVHPN1",32,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;"
"RTN","GMVHPN1",33,0)
 S J=11.5,J(1)=1 D WRTLN^GMVHPN2
"RTN","GMVHPN1",34,0)
 ;PRINT TIME
"RTN","GMVHPN1",35,0)
 S J=11.2,J(1)=17 D WRTLN^GMVHPN2
"RTN","GMVHPN1",36,0)
 ;PRINT PAIN
"RTN","GMVHPN1",37,0)
 S J=-0.8,J(1)=332 D WRTLN^GMVHPN2
"RTN","GMVHPN1",38,0)
 D PTID^GMVHPN2
"RTN","GMVHPN1",39,0)
 ;ENTER PCL MODE, RESET PRINTER AND EJECT PAGE
"RTN","GMVHPN1",40,0)
Q1 ;
"RTN","GMVHPN1",41,0)
 W !,"PA-3,22;",$CHAR(27),"&r0F",$CHAR(27),"%0A" K I Q
"RTN","GMVHPN2")
0^228^B2723922
"RTN","GMVHPN2",1,0)
GMVHPN2 ;HIOFO/YH,FT-HP LASER PAIN CHART - ^TMP DATA ;11/8/01  14:56
"RTN","GMVHPN2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHPN2",3,0)
 ;
"RTN","GMVHPN2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHPN2",5,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVHPN2",6,0)
 ;
"RTN","GMVHPN2",7,0)
SETA ;
"RTN","GMVHPN2",8,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMVHPN2",9,0)
 I GK'="" D
"RTN","GMVHPN2",10,0)
 . S ^TMP($J,"GMRK","G"_(GJ+GCNTD+1))=GK,^TMP($J,"GMRK","G"_(GJ+20+GCNTD+1))=GK
"RTN","GMVHPN2",11,0)
 I GK'=99,"PASSREFUSEDUNAVAIL"'[$$UP^XLFSTR(GK) S ^TMP($J,"GMRK","G"_(410+GCNTD))="P"
"RTN","GMVHPN2",12,0)
 Q
"RTN","GMVHPN2",13,0)
PTID ;PRINT PATIENT ID
"RTN","GMVHPN2",14,0)
 W !,"SD1,277,2,1,4,10,5,1,6,5,7,4;SS;PA-2,-10.5;LB"_^TMP($J,"GMRK","G194")_"#;PA-2,-11;LB"_^("G196")_"   "_^("G197")_"#;"
"RTN","GMVHPN2",15,0)
 W !,"PA-2,-11.5;LB"_^TMP($J,"GMRK","G198")_"#;PA6,-12;LB"_^("G200")_"#;PA6,-12.5;LB"_^("G199")_"#;PA-2,-12;LB"_GMRDIV_"#;"
"RTN","GMVHPN2",16,0)
 W !,"PA-2,-12.5;LB"_GSTRFIN_"#;" Q
"RTN","GMVHPN2",17,0)
WRTLN ;PRINT LINE
"RTN","GMVHPN2",18,0)
 S I(1)="" F I=1:1:5 S I(2)=I-1,I(1)=I(1)_"PA"_(1.6*I(2)+0.2)_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMVHPN2",19,0)
 W !,I(1) S I(1)="" F I=6:1:10 S I(2)=I-1,I(1)=I(1)_"PA"_(1.6*I(2)+0.2)_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMVHPN2",20,0)
 W !,I(1) Q
"RTN","GMVHPO0")
0^229^B14548253
"RTN","GMVHPO0",1,0)
GMVHPO0 ;HIOFO/YH,FT-HP LASER PULSE OXIMETRY/RESP. GRAPH - DATA ARRAY ;11/6/01  15:18
"RTN","GMVHPO0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHPO0",3,0)
 ;
"RTN","GMVHPO0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHPO0",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVHPO0",6,0)
 ;
"RTN","GMVHPO0",7,0)
EN1 ;ENTRY POINT FROM GMVSR0 TO PRINT PO2/RESP. GRAPH FOR HP LASER PRINTER
"RTN","GMVHPO0",8,0)
 S GMROUT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMVHPO0",9,0)
 S GMROUT=0,^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMVHPO0",10,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMVHPO0",11,0)
 F GTYPE="PO2","R" D SETT
"RTN","GMVHPO0",12,0)
 S GTYPE="P" D SETT^GMVBP0
"RTN","GMVHPO0",13,0)
 U IO D GRAPH
"RTN","GMVHPO0",14,0)
Q1 K GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMVHPO0",15,0)
 K GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMVHPO0",16,0)
 K GMRQUAL,GLINE,^TMP($J,"GTNM") Q
"RTN","GMVHPO0",17,0)
GRAPH D DEM^VADPT,INP^VADPT,SETV^GMVGR1
"RTN","GMVHPO0",18,0)
 F GK="PO2","R","P" S ^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMVHPO0",19,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMVHPO0",20,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMVHPO0",21,0)
 F GPGS=1:1:GPG D
"RTN","GMVHPO0",22,0)
 . K GMRQUAL
"RTN","GMVHPO0",23,0)
 . S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE S ^TMP($J,"GMRK","G200")=GMRRMBD D PAGE D ^GMVHPO1 D
"RTN","GMVHPO0",24,0)
 . . S ^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMVHPO0",25,0)
 D KVAR^VADPT K VA,GRAPHR,GRAPHP,GRAPHS,GRAPHD,GPA Q
"RTN","GMVHPO0",26,0)
PAGE ;SET GRAPH DATA
"RTN","GMVHPO0",27,0)
 ;DATA FOR RESPIRATION GRAPH
"RTN","GMVHPO0",28,0)
 K GRAPHR S GRAPHR=0,I=1,J=411,GPA=0 F GI=312:1:321 S GRAPHR=0.4+(1.6*(I-1)) D:^TMP($J,"GMRK","G"_GI)'=""  S I=I+1,J=J+1
"RTN","GMVHPO0",29,0)
 .S GRAPHR(I)=$S(GPA=0:"PA",1:"PD")_GRAPHR_","_^TMP($J,"GMRK","G"_GI)_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMVHPO0",30,0)
 ;DATA FOR PULSE OXIMETRY GRAPH
"RTN","GMVHPO0",31,0)
 K GRAPHP S GRAPHP=0,I=1,J=431,GPA=0 F GI=362:1:371 S GRAPHP=0.9+(1.6*(I-1)) D:^TMP($J,"GMRK","G"_GI)'=""  S I=I+1,J=J+1
"RTN","GMVHPO0",32,0)
 .S GRAPHP(I)=$S(GPA=0:"PA",1:"PD")_GRAPHP_","_^TMP($J,"GMRK","G"_GI)_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMVHPO0",33,0)
 I $D(GMRQUAL) D LEGEND^GMVLGQU
"RTN","GMVHPO0",34,0)
 K GG,GI,GMRVJ,GSYNO Q
"RTN","GMVHPO0",35,0)
DATE F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMVHPO0",36,0)
 Q
"RTN","GMVHPO0",37,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMVHPO0",38,0)
 Q
"RTN","GMVHPO0",39,0)
SETD F GI="R","PO2","P" S GJ=$S(GI="R":310,GI="PO2":360,GI="P":1,1:0) Q:GJ=0  S GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMVHPO3
"RTN","GMVHPO0",40,0)
 Q
"RTN","GMVHPO0",41,0)
SETP ;INITIALIZE ^TMP FOR QUALIFIERS
"RTN","GMVHPO0",42,0)
 ; 410 - STORE R*   430 - STORE P*   510 - STORE PULSE   530 - STORE QUALIFIER
"RTN","GMVHPO0",43,0)
 ; 1430+I - PULSE OX. L/MIN
"RTN","GMVHPO0",44,0)
 ; 1450+I - PULSE OX. %  1470+I - PULSE OX. METHOD
"RTN","GMVHPO0",45,0)
 F I=1:1:10 S (^TMP($J,"GMRK","G"_(410+I)),^("G"_(430+I)),^("G"_(1430+I)),^("G"_(1450+I)),^("G"_(1470+I)),^("G"_(510+I)),^("G"_(530+I)))=""
"RTN","GMVHPO0",46,0)
 Q
"RTN","GMVHPO0",47,0)
SETT S GTYP=$O(^GMRD(120.51,"B",$S(GTYPE="R":"RESPIRATION",GTYPE="PO2":"PULSE OXIMETRY",GTYPE="P":"PULSE",1:""),""))
"RTN","GMVHPO0",48,0)
 I GTYP>0 F GX=GSTART1:0 S GX=$O(^GMR(120.5,"AA",DFN,GTYP,GX)) Q:GX>GEND1!(GX'>0)  F GEN=0:0 S GEN=$O(^GMR(120.5,"AA",DFN,GTYP,GX,GEN)) Q:GEN'>0  I '$D(^GMR(120.5,GEN,2)) D BLDARR^GMVGR0
"RTN","GMVHPO0",49,0)
 Q
"RTN","GMVHPO1")
0^230^B7879224
"RTN","GMVHPO1",1,0)
GMVHPO1 ;HIOFO/YH,FT-HP LASER PULSE OXIMETRY/RESP. GRAPH - FORM ;11/6/01  15:20
"RTN","GMVHPO1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHPO1",3,0)
 ;
"RTN","GMVHPO1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHPO1",5,0)
 ; <None>
"RTN","GMVHPO1",6,0)
 ;
"RTN","GMVHPO1",7,0)
EN1 ;RESET PRINTER, SET PAGE SIZE (PORTRAIT) AND PCL PICTURE FRAME 8 1/2"*11"
"RTN","GMVHPO1",8,0)
 W !,$CHAR(27),"E",$CHAR(27),"&l1E",$CHAR(27),"*c5952x7920Y",$CHAR(27),"%0B"
"RTN","GMVHPO1",9,0)
 W !,"IN;SP1;IP;SC-3,18,-8,20,1;PW.3;PA0,0;FT3,1;RR16,20;PW.3;PA0,-2.8;EA16,20;PA-3,-2.8;EA16,0;PW.15;"
"RTN","GMVHPO1",10,0)
 S I(1)="" F I=1:1:5 S I(1)=I(1)_"PU"_(1.6*I)_",20;PD"_(1.6*I)_",-2.8;"
"RTN","GMVHPO1",11,0)
 W !,I(1)
"RTN","GMVHPO1",12,0)
 S I(1)="" F I=6:1:9 S I(1)=I(1)_"PU"_(1.6*I)_",20;PD"_(1.6*I)_",-2.8;"
"RTN","GMVHPO1",13,0)
 W !,I(1) K I
"RTN","GMVHPO1",14,0)
 W !,"PU16,-0.4;PD-3,-0.4;PU-3,-0.8;PD16,-0.8;PU16,-1.2;PD-3,-1.2;PU-3.-1.6;PD16,-1.6;PU16,-2.0;PD-3,-2.0;PU-3,-2.4;PD16,-2.4;PU;"
"RTN","GMVHPO1",15,0)
 ;PRINT LABEL
"RTN","GMVHPO1",16,0)
 W !,"DT#,1;"
"RTN","GMVHPO1",17,0)
 W !,"SD1,277,2,1,4,10,5,1,6,5,7,4;SS;LO12;PA-2,19.5;LBDate/Time#;PA-2.5,18.8;LBPulse Ox. Resp.#;PA-2,18;LB100     40#;"
"RTN","GMVHPO1",18,0)
 W !,"PA-2,17;LB 98     38#;" W !,"PA-2,16;LB 96     36#;PA-2,15;LB 94     34#;PA-2,14;LB 92     32#;PA-2,13;LB 90     30#;"
"RTN","GMVHPO1",19,0)
 W !,"PA-2,12;LB 88     28#;PA-2,11;LB 86     26#;"
"RTN","GMVHPO1",20,0)
 W !,"PA-2,10;LB 84     24#;PA-2,9;LB 82     22#;PA-2,8;LB 80     20#;PA-2,7;LB 78     18#;"
"RTN","GMVHPO1",21,0)
 W !,"PA-2,6;LB 76     16#;PA-2,5;LB 74     14#;PA-2,4;LB 72     12#;PA-2,3;LB 70     10#;PA-2,2;LB 68     8#;PA-2,1;LB 66     6#;"
"RTN","GMVHPO1",22,0)
 ;LABEL THE LOWER BOX
"RTN","GMVHPO1",23,0)
 W !,"SD1,277,2,1,4,8,5,1,6,5,7,4;SS;LO11;PA-3,-0.4;LBRespiration#;PA-3,-0.8;LBPulse Oximetry#;"
"RTN","GMVHPO1",24,0)
 W !,"PA-2.5,-1.2;LBL/Min#;PA-2.5,-1.6;LB%#;PA-2.5,-2;LBMethod#;"
"RTN","GMVHPO1",25,0)
 W !,"PA-3,-2.4;LBPulse#;"
"RTN","GMVHPO1",26,0)
 W !,"PA-3,-3.2;LBR: Respiration        POx: Pulse Oximetry         * - Abnormal value        ** - Abnormal value off of graph#;"
"RTN","GMVHPO1",27,0)
 W !,"PA-3,-3.6;LB"_$E($G(GLINE(1)),1,100)_"#;" W !,"LB"_$E($G(GLINE(1)),101,180)_"#;"
"RTN","GMVHPO1",28,0)
 W !,"PA-3,-3.9;LB"_$E($G(GLINE(2)),1,100)_"#;" W !,"LB"_$E($G(GLINE(2)),101,180)_"#;"
"RTN","GMVHPO1",29,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA10,-4.9;LBPulse Oximetry/Respiration Graph#;"
"RTN","GMVHPO1",30,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA10,-4.5;LBMedical Record#;PA10,-5.3;LBSF 512#;"
"RTN","GMVHPO1",31,0)
 I GTNM=0 W !,"PA3,10;LBTHERE  IS  NO  DATA  FOR  THIS  PERIOD#;"
"RTN","GMVHPO1",32,0)
 W "PW.3;SD1,277,2,1,4,8,5,1,6,5,7,4;SS;LO7;PU;" S I=0 F  S I=$O(GRAPHR(I)) Q:I'>0  W !,GRAPHR(I)
"RTN","GMVHPO1",33,0)
 W "PU;" S I=0 F  S I=$O(GRAPHP(I)) Q:I'>0  W !,GRAPHP(I)
"RTN","GMVHPO1",34,0)
 W !,"PU;LO1;" D EN1^GMVHPO2
"RTN","GMVHPO1",35,0)
 D PTID^GMVHPO3
"RTN","GMVHPO1",36,0)
 ;ENTER PCL MODE, RESET PRINTER AND EJECT PAGE
"RTN","GMVHPO1",37,0)
Q1 ;
"RTN","GMVHPO1",38,0)
 W !,"PA-3,22;",$CHAR(27),"&r0F",$CHAR(27),"%0A" K I Q
"RTN","GMVHPO2")
0^231^B806231
"RTN","GMVHPO2",1,0)
GMVHPO2 ;HIOFO/YH,FT-HP LASER PULSE OXIMETRY/RESP. GRAPH - BOX DATA ;11/6/01  15:20
"RTN","GMVHPO2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHPO2",3,0)
 ;
"RTN","GMVHPO2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHPO2",5,0)
 ; <None>
"RTN","GMVHPO2",6,0)
 ;
"RTN","GMVHPO2",7,0)
EN1 ;PRINT DATE
"RTN","GMVHPO2",8,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;"
"RTN","GMVHPO2",9,0)
 S J=19.5,J(1)=1 D WRTLN^GMVHG3
"RTN","GMVHPO2",10,0)
 ;PRINT TIME
"RTN","GMVHPO2",11,0)
 S J=19.1,J(1)=17 D WRTLN^GMVHG3
"RTN","GMVHPO2",12,0)
 W !,"SD1,277,2,1,4,8,5,1,6,5,7,4;SS"
"RTN","GMVHPO2",13,0)
RESP ;PRINT RESPIRATION
"RTN","GMVHPO2",14,0)
 S J=-0.3,J(1)=332 D WRTLN^GMVHG3
"RTN","GMVHPO2",15,0)
POX ;PRINT PULSE OXIMETRY
"RTN","GMVHPO2",16,0)
 S J=-0.7,J(1)=382 D WRTLN^GMVHG3
"RTN","GMVHPO2",17,0)
LMIN ;PRINT L/MIN
"RTN","GMVHPO2",18,0)
 S J=-1.1,J(1)=1431 D WRTLN^GMVHG3
"RTN","GMVHPO2",19,0)
PCNT ;PRINT % DATA
"RTN","GMVHPO2",20,0)
 S J=-1.5,J(1)=1451 D WRTLN^GMVHG3
"RTN","GMVHPO2",21,0)
METHOD ;PRINT METHOD
"RTN","GMVHPO2",22,0)
 S J=-1.9,J(1)=1471 D WRTLN^GMVHG3
"RTN","GMVHPO2",23,0)
 ;PRINT PULSE
"RTN","GMVHPO2",24,0)
 S J=-2.3,J(1)=511 D WRTLN^GMVHG3
"RTN","GMVHPO2",25,0)
 ;PRINT QUALIFIER
"RTN","GMVHPO2",26,0)
 S J=-2.7,J(1)=531 D WRTLN^GMVHG3
"RTN","GMVHPO2",27,0)
 Q
"RTN","GMVHPO3")
0^232^B8864974
"RTN","GMVHPO3",1,0)
GMVHPO3 ;HIOFO/YH,FT-HP LASER PULSE OXIMETRY/RESP. GRAPH - ^TMP DATA ;11/6/01  15:19
"RTN","GMVHPO3",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHPO3",3,0)
 ;
"RTN","GMVHPO3",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHPO3",5,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVHPO3",6,0)
 ;
"RTN","GMVHPO3",7,0)
SETA ;
"RTN","GMVHPO3",8,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMVHPO3",9,0)
 S (GMRSITE,GMRSITE(1),GMRSITE(2),GMRINF,GMRVJ)=""
"RTN","GMVHPO3",10,0)
 I GK'="" D
"RTN","GMVHPO3",11,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GI,GDT1,GK)),"^"),GMRVJ=$P($G(^(GK)),"^",2),GMRINF=$P($G(^(GK)),"^",4)
"RTN","GMVHPO3",12,0)
 . I GMRSITE(1)'="" D SYNOARY^GMVLGQU
"RTN","GMVHPO3",13,0)
 I GK'="","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) S GK=GK_$S(GMRVJ=1:"*",1:" ")
"RTN","GMVHPO3",14,0)
 I GI="P" S ^TMP($J,"GMRK","G"_(510+GCNTD))=GK_$S($L(GMRSITE," ")>3:$P(GMRSITE," "),1:""),^("G"_(530+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE) Q
"RTN","GMVHPO3",15,0)
 I GI="PO2" D
"RTN","GMVHPO3",16,0)
 . S (GMRINF(1),GMRINF(2))="" I GMRINF'="" D PO2^GMVLGQU(.GMRINF)
"RTN","GMVHPO3",17,0)
 . S ^TMP($J,"GMRK","G"_(1430+GCNTD))=GMRINF(1)
"RTN","GMVHPO3",18,0)
 . S ^TMP($J,"GMRK","G"_(1450+GCNTD))=GMRINF(2)
"RTN","GMVHPO3",19,0)
 . S ^TMP($J,"GMRK","G"_(1470+GCNTD))=GMRSITE
"RTN","GMVHPO3",20,0)
 S ^TMP($J,"GMRK","G"_(GJ+GCNTD+1))=$S(GK>0:$S(GI="R":GK-4/2,GI="PO2":GK-64/2,1:""),1:"") S ^TMP($J,"GMRK","G"_(GJ+20+GCNTD+1))=$S(+GK=0.1:"0*",1:GK)_$S(GI="R":GMRSITE,1:"")
"RTN","GMVHPO3",21,0)
 I GI="R",GK>0 S ^TMP($J,"GMRK","G"_(410+GCNTD))=$S(GK["*":"R*",1:"R")
"RTN","GMVHPO3",22,0)
 I GI="PO2",GK>0 S ^TMP($J,"GMRK","G"_(430+GCNTD))=$S(GK["*":"POx*",1:"POx")
"RTN","GMVHPO3",23,0)
 I GK>0,GI="R" S ^TMP($J,"GMRK","G"_(GJ+GCNTD+1))=$S(^("G"_(GJ+GCNTD+1))<0.5:0.5,^("G"_(GJ+GCNTD+1))>18.7:18.7,1:^("G"_(GJ+GCNTD+1))) S:^("G"_(GJ+GCNTD+1))<0.6!(^("G"_(GJ+GCNTD+1))>18.6) ^TMP($J,"GMRK","G"_(410+GCNTD))="R**"
"RTN","GMVHPO3",24,0)
 I GK>0,GI="PO2" S ^TMP($J,"GMRK","G"_(GJ+GCNTD+1))=$S(^("G"_(GJ+GCNTD+1))<0.5:0.5,^("G"_(GJ+GCNTD+1))>18.7:18.7,1:^("G"_(GJ+GCNTD+1))) S:^("G"_(GJ+GCNTD+1))<0.6!(^("G"_(GJ+GCNTD+1))>18.6) ^TMP($J,"GMRK","G"_(430+GCNTD))="POx**"
"RTN","GMVHPO3",25,0)
 Q
"RTN","GMVHPO3",26,0)
PTID ;PRINT PATIENT ID
"RTN","GMVHPO3",27,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA-2,-4.5;LB"_^TMP($J,"GMRK","G194")_"#;PA-2,-4.8;LB"_^("G196")_"   "_^("G197")_"#;"
"RTN","GMVHPO3",28,0)
 W !,"PA-2,-5.1;LB"_^TMP($J,"GMRK","G198")_"#;PA6,-5.1;LB"_^("G200")_"#;PA6,-5.4;LB"_^("G199")_"#;PA-2,-5.4;LB"_GMRDIV_"#;"
"RTN","GMVHPO3",29,0)
 W !,"PA-2,-5.7;LB"_GSTRFIN_"#;" Q
"RTN","GMVHW0")
0^233^B13231330
"RTN","GMVHW0",1,0)
GMVHW0 ;HIOFO/YH,FT-HP LASER WEIGHT CHART - DATA ARRAY ;12/6/01  11:35
"RTN","GMVHW0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHW0",3,0)
 ;
"RTN","GMVHW0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHW0",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVHW0",6,0)
 ;
"RTN","GMVHW0",7,0)
EN1 ;
"RTN","GMVHW0",8,0)
 S GMRHT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GTNM"),GWT S GWT=0
"RTN","GMVHW0",9,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMVHW0",10,0)
 F GTYPE="H","W" D SETT^GMVWT0
"RTN","GMVHW0",11,0)
 F I=1:1:8 S GWT(I)=""
"RTN","GMVHW0",12,0)
 I GWT>0 S GWT=GWT\10*10-40,J=0 F I=1:1:8 S GWT(I)=GWT+(10*J),J=J+1,GWT(I)=GWT(I)_"/"_$J(GWT(I)/2.2,0,2)
"RTN","GMVHW0",13,0)
 U IO D GRAPH
"RTN","GMVHW0",14,0)
Q1 D Q1^GMVWT0 K GRAPHW Q
"RTN","GMVHW0",15,0)
GRAPH ;
"RTN","GMVHW0",16,0)
 D DEM^VADPT,INP^VADPT S SSN=$P(VADM(2),"^",2)
"RTN","GMVHW0",17,0)
 S GPG=0 D SETV^GMVWT1 F GK="H","W" S ^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMVHW0",18,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMVHW0",19,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMVHW0",20,0)
 F GPGS=1:1:GPG K GMRQUAL S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP^GMVWT1,DATE,PAGE D ^GMVHW1
"RTN","GMVHW0",21,0)
 D KVAR^VADPT K VA Q
"RTN","GMVHW0",22,0)
PAGE ;
"RTN","GMVHW0",23,0)
 ;DATA FOR WEIGHT GRAPH
"RTN","GMVHW0",24,0)
 K GRAPHW S GRAPHW=0,I=1,J=161,GPA=0 F GI=141:1:150 S GRAPHW=0.6+(1.6*(I-1)) D:^TMP($J,"GMRK","G"_GI)'=""  S I=I+1,J=J+1
"RTN","GMVHW0",25,0)
 .S GRAPHW(I)=$S(GPA=0:"PA",1:"PD")_GRAPHW_","_^TMP($J,"GMRK","G"_GI)_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMVHW0",26,0)
 I $D(GMRQUAL) D LEGEND^GMVLGQU
"RTN","GMVHW0",27,0)
 K GPA Q
"RTN","GMVHW0",28,0)
DATE F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMVHW0",29,0)
 Q
"RTN","GMVHW0",30,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMVHW0",31,0)
 Q
"RTN","GMVHW0",32,0)
SETD F GI="H","W" S GJ=$S(GI="W":100,1:160),GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA
"RTN","GMVHW0",33,0)
 Q
"RTN","GMVHW0",34,0)
SETA ;
"RTN","GMVHW0",35,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMVHW0",36,0)
 S (GMRSITE,GMRSITE(1),GMRSITE(2),GMRINF,GMRVJ)=""
"RTN","GMVHW0",37,0)
 I GK'="" D
"RTN","GMVHW0",38,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GI,GDT1,GK)),"^"),GMRVJ=$P($G(^(GK)),"^",2),GMRINF=$P($G(^(GK)),"^",4)
"RTN","GMVHW0",39,0)
 . I GMRSITE(1)'="" D SYNOARY^GMVLGQU
"RTN","GMVHW0",40,0)
 I GI="H" S ^TMP($J,"GMRK","G"_(300+GCNTD))=GK,^("G"_(340+GCNTD))=GMRSITE,^TMP($J,"GMRK","G"_(320+GCNTD))=$S(GK>0:$J(GK*2.54,0,2),1:"") S:GK>0 GMRHT=GK*2.54/100 Q
"RTN","GMVHW0",41,0)
 S ^TMP($J,"GMRK","G"_(180+GCNTD))=GMRSITE
"RTN","GMVHW0",42,0)
 I GK>0 D
"RTN","GMVHW0",43,0)
 . S GMRBMI="",GMRBMI(1)=GDT1,GMRBMI(2)=GK D CALBMI^GMVBMI(.GMRBMI)
"RTN","GMVHW0",44,0)
 . S ^TMP($J,"GMRK","G"_(210+GCNTD))=$S(GMRBMI>0:GMRBMI,1:"") K GMRBMI
"RTN","GMVHW0",45,0)
 S ^TMP($J,"GMRK","G"_(100+GCNTD))=GK,^TMP($J,"GMRK","G"_(120+GCNTD))=$S(GK>0:$J(GK/2.2,0,2),1:"")
"RTN","GMVHW0",46,0)
 S ^TMP($J,"GMRK","G"_(140+GCNTD))=$S(GK>0:GK-(GWT-10)/5,1:"") S:GK>0 ^TMP($J,"GMRK","G"_(160+GCNTD))="W"
"RTN","GMVHW0",47,0)
 I GK>0 S ^TMP($J,"GMRK","G"_(140+GCNTD))=$S(^TMP($J,"GMRK","G"_(140+GCNTD))<0.4:0.4,^("G"_(140+GCNTD))>16.5:16.5,1:^("G"_(140+GCNTD))) S:^("G"_(140+GCNTD))<0.5!(^("G"_(140+GCNTD))>16.4) ^TMP($J,"GMRK","G"_(160+GCNTD))="W**"
"RTN","GMVHW0",48,0)
 Q
"RTN","GMVHW1")
0^234^B7050200
"RTN","GMVHW1",1,0)
GMVHW1 ;HIOFO/YH,FT-HP LASER WEIGHT CHART - FORM AND GRAPH ;11/6/01  15:23
"RTN","GMVHW1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHW1",3,0)
 ;
"RTN","GMVHW1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHW1",5,0)
 ; <None>
"RTN","GMVHW1",6,0)
 ;
"RTN","GMVHW1",7,0)
EN1 ;RESET PRINTER, SET PAGE SIZE (PORTRAIT) AND PCL PICTURE FRAME 8 1/2"*11"
"RTN","GMVHW1",8,0)
 W !,$CHAR(27),"E",$CHAR(27),"&l1E",$CHAR(27),"*c5952x7920Y",$CHAR(27),"%0B"
"RTN","GMVHW1",9,0)
 W !,"IN;SP1;IP;SC-3,18,-10,18,1;PW.15;PA0,0;FT3,1;RR16,18;PW.3;PA0,-3.5,EA16,18;PA-3,-3.5;EA16,0;PW.15;"
"RTN","GMVHW1",10,0)
 S I(1)="" F I=1:1:5 S I(1)=I(1)_"PU"_(1.6*I)_",18;PD"_(1.6*I)_",-3.5;"
"RTN","GMVHW1",11,0)
 W !,I(1) S I(1)="" F I=6:1:10 S I(1)=I(1)_"PU"_(1.6*I)_",18;PD"_(1.6*I)_",-3.5;"
"RTN","GMVHW1",12,0)
 W !,I(1),"PU;"
"RTN","GMVHW1",13,0)
 W !,"PA16,-3;PD-3,-3;PA-3,-2.5;PD16,-2.5;PU16,-2;PD-3,-2;PU-3,-1.5;PD16,-1.5;PU16,-1;PD-3,-1;PU-3,-0.5;PD16,-0.5;PU;"
"RTN","GMVHW1",14,0)
LABEL ;PRINT LABEL
"RTN","GMVHW1",15,0)
 W !,"DT#,1;"
"RTN","GMVHW1",16,0)
 W !,"PW.3;SD1,277,2,1,4,10,5,1,6,5,7,4;SS;LO12;PA-2,17.5;LBDate/Time#;PA-2,16.9;LBPounds/Kgs#;PA-2,16;LB"_GWT(8)_"#;PA0,16;PD16,16;PU;"
"RTN","GMVHW1",17,0)
 W !,"PA-.4,15;LB5#;PA-2,14;LB"_GWT(7)_"#;PA0,14;PD16,14;PU;;PA-.4,13;LB5#;PA-2,12;LB"_GWT(6)_"#;PA0,12;PD16,12;PU;"
"RTN","GMVHW1",18,0)
 W !,"PA-.4,11;LB5#;PA-2,10;LB"_GWT(5)_"#;PA0,10;PD16,10;PU;PA-.4,9;LB5#;"
"RTN","GMVHW1",19,0)
 W !,"PA-2,8;LB"_GWT(4)_"#;PA0,8;PD16,8;PU;PA-.4,7;LB5#;PA-2,6;LB"_GWT(3)_"#;PA0,6;PD16,6;PU;PA-.4,5;LB5#;"
"RTN","GMVHW1",20,0)
 W !,"PA-2,4;LB"_GWT(2)_"#;PA0,4;PD16,4;PU;PA-.4,3;LB5#;PA-2,2;LB"_GWT(1)_"#;PA0,2;PD16,2;PU;PA-.4,1;LB5#;"
"RTN","GMVHW1",21,0)
LBOX ;LABEL THE LOWER BOX
"RTN","GMVHW1",22,0)
 W !,"SD1,277,2,1,4,8,5,1,6,5,7,4;SS;LO11;PA-3,-0.5;LBWeight (lb)#;PA-3,-1;LB          (kg)#;PA-3,-1.5;LB   Qualifier#;"
"RTN","GMVHW1",23,0)
 W !,"PA-3,-2;LBBody Mass Index#;"
"RTN","GMVHW1",24,0)
 W !,"PA-3,-2.5;LBHeight (in)#;PA-3,-3;LB         (cm)#;PA-3,-3.5;LB   Qualifier#;"
"RTN","GMVHW1",25,0)
 W !,"SD1,277,2,1,4,8,5,1,6,5,7,4;SS;"
"RTN","GMVHW1",26,0)
 W !,"PA-3,-4;LBW: Weight      ** - Value off of graph#;"
"RTN","GMVHW1",27,0)
 W !,"PA-3,-4.3;LB"_$E($G(GLINE(1)),1,100)_"#;" W !,"LB"_$E($G(GLINE(1)),101,180)_"#;"
"RTN","GMVHW1",28,0)
 W !,"PA-3,-5.1;LB"_$E($G(GLINE(2)),1,100)_"#;"
"RTN","GMVHW1",29,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA12,-6;LBWEIGHT CHART#;"
"RTN","GMVHW1",30,0)
 W !,"PA12,-5.6;LBMEDICAL RECORD#;PA12,-6.4;LBVAF 10-2614f#;"
"RTN","GMVHW1",31,0)
 I GTNM=0 W !,"PA3,10;LBTHERE  IS  NO  DATA  FOR  THIS  PERIOD#;"
"RTN","GMVHW1",32,0)
 W "SD1,277,2,1,4,8,5,1,6,5,7,4;SS;PW.3;LO7;PU;" S I=0 F  S I=$O(GRAPHW(I)) Q:I'>0  W !,GRAPHW(I)
"RTN","GMVHW1",33,0)
 W !,"PU;LO1;" D EN1^GMVHW2
"RTN","GMVHW1",34,0)
 ;ENTER PCL MODE, RESET PRINTER AND EJECT PAGE
"RTN","GMVHW1",35,0)
Q1 ;
"RTN","GMVHW1",36,0)
 W !,"PA-3,18;",$CHAR(27),"&r0F",$CHAR(27),"%0A" Q
"RTN","GMVHW2")
0^235^B1856531
"RTN","GMVHW2",1,0)
GMVHW2 ;HIOFO/YH,FT-HP LASER WEIGHT CHART - BOX DATA ;11/6/01  15:23
"RTN","GMVHW2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVHW2",3,0)
 ;
"RTN","GMVHW2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVHW2",5,0)
 ; <None>
"RTN","GMVHW2",6,0)
 ;
"RTN","GMVHW2",7,0)
EN1 ;PRINT DATE
"RTN","GMVHW2",8,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;"
"RTN","GMVHW2",9,0)
 S J=17.5,J(1)=1 D WRTLN^GMVHG3
"RTN","GMVHW2",10,0)
 ;PRINT TIME
"RTN","GMVHW2",11,0)
 S J=17.1,J(1)=17 D WRTLN^GMVHG3
"RTN","GMVHW2",12,0)
 W !,"SD1,277,2,1,4,8,5,1,6,5,7,4;SS"
"RTN","GMVHW2",13,0)
LB ;PRINT WEIGHT IN LB
"RTN","GMVHW2",14,0)
 S J=-.4,J(1)=101 D WRTLN^GMVHG3
"RTN","GMVHW2",15,0)
KG ;PRINT WEIGHT IN KG
"RTN","GMVHW2",16,0)
 S J=-.9,J(1)=121 D WRTLN^GMVHG3
"RTN","GMVHW2",17,0)
QUAL ;PRINT WEIGHT QUALIFIER
"RTN","GMVHW2",18,0)
 S J=-1.4,J(1)=181 D WRTLN^GMVHG3
"RTN","GMVHW2",19,0)
BMI ;BODY MASS INDEX
"RTN","GMVHW2",20,0)
 S J=-1.9,J(1)=211 D WRTLN^GMVHG3
"RTN","GMVHW2",21,0)
HT ;PRINT HEIGHT
"RTN","GMVHW2",22,0)
 S J=-2.4,J(1)=301 D WRTLN^GMVHG3
"RTN","GMVHW2",23,0)
HTCM ;HEIGHT IN CM
"RTN","GMVHW2",24,0)
 S J=-2.9,J(1)=321 D WRTLN^GMVHG3
"RTN","GMVHW2",25,0)
HTQ ;HEIGHT QUALIFIER
"RTN","GMVHW2",26,0)
 S J=-3.4,J(1)=341 D WRTLN^GMVHG3
"RTN","GMVHW2",27,0)
PTID ;PRINT PATIENT ID
"RTN","GMVHW2",28,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA-1,-5.6;LB"_GMVNM_"#;PA-1,-5.9;LB"_GMVDOB_"   "_GMVGEN_"#;"
"RTN","GMVHW2",29,0)
 W !,"PA-1,-6.2;LB"_GMVWRD_"#;PA7,-6.2;LB"_GMVRMBD_"#;PA7,-6.5;LB"_^TMP($J,"GMRK","G199")_"#;"
"RTN","GMVHW2",30,0)
 W !,"PA-1,-6.5;LB"_GMRDIV_"#;"
"RTN","GMVHW2",31,0)
 W !,"PA-1,-6.8;LB"_GSTRFIN_"#;" Q
"RTN","GMVKPN0")
0^236^B9688497
"RTN","GMVKPN0",1,0)
GMVKPN0 ;HCIOFO/YH,FT-KYOCERA PAIN CHART - DATA ARRAY ;11/6/01  15:03
"RTN","GMVKPN0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVKPN0",3,0)
 ;
"RTN","GMVKPN0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVKPN0",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVKPN0",6,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVKPN0",7,0)
 ;
"RTN","GMVKPN0",8,0)
EN1 ;ENTRY POINT TO PRINT KYOCERA PAIN CHART 
"RTN","GMVKPN0",9,0)
 ;S DFN=72,GMRSTRT=2990201,GMRFIN=2990215
"RTN","GMVKPN0",10,0)
 S GMROUT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMVKPN0",11,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT,^TMP($J,"GMRK","G50M")=0.4
"RTN","GMVKPN0",12,0)
 F GTYPE="PN" D SETT^GMVHPN0
"RTN","GMVKPN0",13,0)
 U IO D GRAPH
"RTN","GMVKPN0",14,0)
Q1 K GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMVKPN0",15,0)
 K GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMVKPN0",16,0)
 K ^TMP($J,"GTNM") Q
"RTN","GMVKPN0",17,0)
GRAPH D DEM^VADPT,INP^VADPT,SETV^GMVGR1
"RTN","GMVKPN0",18,0)
 S GK="PN",^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMVKPN0",19,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMVKPN0",20,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMVKPN0",21,0)
 F GPGS=1:1:GPG S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE S ^TMP($J,"GMRK","G200")=GMRRMBD D PAGE,^GMVKPN1,^GMVKPN2
"RTN","GMVKPN0",22,0)
 D KVAR^VADPT K VA,GRAPHR,GRAPHP,GRAPHS,GRAPHD,GPA Q
"RTN","GMVKPN0",23,0)
PAGE ;SET GRAPH DATA
"RTN","GMVKPN0",24,0)
 ;DATA FOR PAIN CHART
"RTN","GMVKPN0",25,0)
 F GI=50:1:59 S ^TMP($J,"GMRK","G50")=^TMP($J,"GMRK","G"_GI),^TMP($J,"GMRK","G50M")=0.4+(1.6*(GI-50)) Q:^TMP($J,"GMRK","G50")'=""
"RTN","GMVKPN0",26,0)
 Q
"RTN","GMVKPN0",27,0)
DATE F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMVKPN0",28,0)
 Q
"RTN","GMVKPN0",29,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMVKPN0",30,0)
 Q
"RTN","GMVKPN0",31,0)
SETD S GI="PN" S GJ=48,GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA
"RTN","GMVKPN0",32,0)
 Q
"RTN","GMVKPN0",33,0)
SETP ;INITIALIZE ^TMP FOR QUALIFIERS
"RTN","GMVKPN0",34,0)
 ; 410 - STORE P
"RTN","GMVKPN0",35,0)
 ; 250+I - DATA
"RTN","GMVKPN0",36,0)
 F I=1:1:10 S (^TMP($J,"GMRK","G"_(410+I)),^("G"_(250+I)))=""
"RTN","GMVKPN0",37,0)
 Q
"RTN","GMVKPN0",38,0)
SETA ;
"RTN","GMVKPN0",39,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMVKPN0",40,0)
 S ^TMP($J,"GMRK","G"_(GJ+200+GCNTD+1))=GK
"RTN","GMVKPN0",41,0)
 I (GK=99)!("PASSREFUSEDUNAVAIL"[$$UP^XLFSTR(GK)) S ^TMP($J,"GMRK","G"_(49+GCNTD))="" Q
"RTN","GMVKPN0",42,0)
 S ^TMP($J,"GMRK","G"_(49+GCNTD))=12-GK
"RTN","GMVKPN0",43,0)
 S ^TMP($J,"GMRK","G"_(410+GCNTD))="P"
"RTN","GMVKPN0",44,0)
 Q
"RTN","GMVKPN1")
0^237^B9136665
"RTN","GMVKPN1",1,0)
GMVKPN1 ;HCIOFO/YH,FT-KYOCERA PAIN CHART MACRO-1 ;11/6/01  15:04
"RTN","GMVKPN1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVKPN1",3,0)
 ;
"RTN","GMVKPN1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVKPN1",5,0)
 ; <None>
"RTN","GMVKPN1",6,0)
 ;
"RTN","GMVKPN1",7,0)
EN1 W !,"!R! RES; DAM;"
"RTN","GMVKPN1",8,0)
BOX W !,"MCRO BOX;"
"RTN","GMVKPN1",9,0)
 W !,"UNIT C; SLM 3; STM 1; MAP 0,0; SPD 0.05; BOX 16,13;"
"RTN","GMVKPN1",10,0)
 W !,"FONT 40; MAP -2,0.5; TEXT 'Date/Time';"
"RTN","GMVKPN1",11,0)
 W !,"SPD 0.01; MAP -0.5,2; TEXT '10'; MAP 0,1; DAP 16,1;MAP 16,1; DAP 0,1;"
"RTN","GMVKPN1",12,0)
 W !,"MAP -0.5,3; TEXT '9'; MAP 0,2; DAP 16.2,2;"
"RTN","GMVKPN1",13,0)
 W !,"MAP -0.5,4; TEXT '8'; MAP 0,3; DAP 16,3;"
"RTN","GMVKPN1",14,0)
 W:GTNM=0 "MAP 2,5; TEXT 'THERE  IS  NO  DATA  FOR  THIS  PERIOD';"
"RTN","GMVKPN1",15,0)
 W !,"MAP -0.5,5; TEXT '7'; MAP 0,4; DAP 16,4;"
"RTN","GMVKPN1",16,0)
 W !,"MAP -0.5,6; TEXT '6';MAP 0,5; DAP 16,5;"
"RTN","GMVKPN1",17,0)
 W !,"MAP -0.5,7; TEXT '5'; MAP 0,6; DAP 16,6;"
"RTN","GMVKPN1",18,0)
 W !,"MAP -0.5,8; TEXT '4'; MAP 0,7; DAP 16,7;"
"RTN","GMVKPN1",19,0)
 W !,"MAP -0.5,9; TEXT '3'; MAP 0,8; DAP 16,8;"
"RTN","GMVKPN1",20,0)
 W !,"MAP -0.5,10; TEXT '2'; MAP -0.5,11; TEXT '1'; MAP 0,9; DAP 16,9;"
"RTN","GMVKPN1",21,0)
 W !,"MAP 0,10; DAP 16,10;"
"RTN","GMVKPN1",22,0)
 W !,"MAP 0,11; DAP 16,11;"
"RTN","GMVKPN1",23,0)
 W !,"MAP -1,12.7; TEXT 'Pain';"
"RTN","GMVKPN1",24,0)
VERT W !,"SPD 0.05;" S I(1)="" F I=1:1:9 S I(1)=I(1)_"MAP "_(1.6*I)_",0; DAP "_(1.6*I)_",13;"
"RTN","GMVKPN1",25,0)
 W !,I(1) W !,"MAP 16,12; DAP 0,12;"
"RTN","GMVKPN1",26,0)
 W !,"MAP 0,13.5; TEXT '0 - No pain   10 - Worst imaginable pain   99 - Unable to respond';"
"RTN","GMVKPN1",27,0)
FORM W !,"MAP 12,22.4; TEXT 'Medical Record'; MAP 12,22.8; TEXT 'Pain Chart'; MAP 12,23.2; TEXT 'SF 512';"
"RTN","GMVKPN1",28,0)
 W !,"ENDM;"
"RTN","GMVKPN1",29,0)
DATE W !,"MCRO DATE; FONT 56;" S J=0.4 D WRTEXT^GMVBP2
"RTN","GMVKPN1",30,0)
 W !,"ENDM;"
"RTN","GMVKPN1",31,0)
TIME W !,"MCRO TIME;" S J=0.8 D WRTEXT^GMVBP2
"RTN","GMVKPN1",32,0)
 W !,"ENDM;"
"RTN","GMVKPN1",33,0)
RPG W !,"MCRO RPG; SPD 0.03; MAP %1, %2; DAP 2, %3; DAP 3.6, %4; DAP 5.2, %5; DAP 6.8, %6; DAP 8.4, %7; DAP 10, %8; DAP 11.6, %9;"
"RTN","GMVKPN1",34,0)
 W !,"DAP 13.2, %10; DAP 14.8, %11;"
"RTN","GMVKPN1",35,0)
 W !,"ENDM;"
"RTN","GMVKPN1",36,0)
RESP W !,"MCRO RSP;" S J=12.7 D
"RTN","GMVKPN1",37,0)
 . S I(1)="" F I=1:1:5 S I(1)=I(1)_$S(I(1)="":"",1:" ")_"MAP "_(1.6*(I-1)+0.2)_","_J_"; TEXT %"_I_";"
"RTN","GMVKPN1",38,0)
 . W !,I(1)
"RTN","GMVKPN1",39,0)
 . S I(1)="" F I=6:1:10 S I(1)=I(1)_$S(I(1)="":"",1:" ")_"MAP "_(1.6*(I-1)+0.2)_","_J_"; TEXT %"_I_";"
"RTN","GMVKPN1",40,0)
 . W !,I(1)
"RTN","GMVKPN1",41,0)
 W !,"ENDM;"
"RTN","GMVKPN1",42,0)
PID W !,"MCRO PID; MAP -2,21.6; TEXT %1; MAP -2,22; TEXT %2; MAP 2.5,22; TEXT %3; MAP -2,22.4; TEXT %4; MAP 6,23.2; TEXT %5; MAP 6,22.8; TEXT %6; MAP -2,22.8; TEXT %7; MAP -2,23.2; TEXT %8;"
"RTN","GMVKPN1",43,0)
 W !,"ENDM;"
"RTN","GMVKPN1",44,0)
RS1 W !,"MCRO RS1; MAP %1,%2; TEXT %3; MAP 2.0,%4; TEXT %5; MAP 3.6,%6; TEXT %7; MAP 5.2,%8; TEXT %9; MAP 6.8,%10; TEXT %11; MAP 8.4,%12; TEXT %13; MAP 10,%14; TEXT %15; MAP 11.6,%16; TEXT %17; MAP 13.2,%18; TEXT %19;"
"RTN","GMVKPN1",45,0)
 W !,"ENDM;"
"RTN","GMVKPN1",46,0)
RS2 W !,"MCRO RS2; MAP 14.8,%1; TEXT %2;"
"RTN","GMVKPN1",47,0)
 W !,"ENDM;"
"RTN","GMVKPN1",48,0)
 Q
"RTN","GMVKPN2")
0^238^B4357732
"RTN","GMVKPN2",1,0)
GMVKPN2 ;HCIOFO/YH,FT-KYOCERA KYOCERA PAIN CHART PRINT COMMANDS (PART 1) ;11/6/01  15:05
"RTN","GMVKPN2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVKPN2",3,0)
 ;
"RTN","GMVKPN2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVKPN2",5,0)
 ; <None>
"RTN","GMVKPN2",6,0)
 ;
"RTN","GMVKPN2",7,0)
EN3 ;CONTINUATION OF GMVKPO3
"RTN","GMVKPN2",8,0)
CALL W !,"CALL BOX, '%';"
"RTN","GMVKPN2",9,0)
 W !,"CALL DATE" S J(1)=1,J(2)=J(1)+9 D WRTCALL
"RTN","GMVKPN2",10,0)
 W !,"CALL TIME" S J(1)=17,J(2)=J(1)+9 D WRTCALL
"RTN","GMVKPN2",11,0)
 W !,"CALL RPG, "_^TMP($J,"GMRK","G50M")_", "_^("G50")_", "_^("G51")_", "_^("G52")_", "_^("G53")_", "_^("G54")_", "_^("G55")_", "_^("G56")
"RTN","GMVKPN2",12,0)
 W ", "_^TMP($J,"GMRK","G57")_", "_^("G58")_", "_^("G59")_";"
"RTN","GMVKPN2",13,0)
 W !,"CALL RS1, "_^TMP($J,"GMRK","G50M")_", "_^("G50")_", '"_^("G411")_"', "_^("G51")_", '"_^("G412")_"', "_^("G52")_", '"_^("G413")_"', "_^("G53")_", '"_^("G414")_"', "_^("G54")_", '"_^("G415")_"', "_^("G55")_", '"_^("G416")_"', "
"RTN","GMVKPN2",14,0)
 W ^TMP($J,"GMRK","G56")_", '"_^("G417")_"', "_^("G57")_", '"_^("G418")_"', "_^("G58")_", '"_^("G419")_"';"
"RTN","GMVKPN2",15,0)
 W !,"CALL RS2, "_^TMP($J,"GMRK","G59")_", '"_^("G420")_"';"
"RTN","GMVKPN2",16,0)
 W !,"CALL RSP" S J(1)=250,J(2)=J(1)+9 D WRTCALL
"RTN","GMVKPN2",17,0)
 W !,"CALL PID, """_^TMP($J,"GMRK","G194")_""", '"_^("G196")_"', '"_^("G197")_"', '"_^("G198")_"', '"_^("G199")_"', '"_^("G200")_"', '"_GMRDIV_"', '"_GSTRFIN_"';"
"RTN","GMVKPN2",18,0)
 W !,"RES; EXIT;"
"RTN","GMVKPN2",19,0)
 Q
"RTN","GMVKPN2",20,0)
WRTCALL S I(1)="" F I=J(1):1:J(2) S I(1)=I(1)_", '"_^TMP($J,"GMRK","G"_I)_"'"
"RTN","GMVKPN2",21,0)
 W I(1)_";"
"RTN","GMVKPN2",22,0)
 Q
"RTN","GMVKPO0")
0^239^B15397112
"RTN","GMVKPO0",1,0)
GMVKPO0 ;HIOFO/YH,FT-KYOCERA PULSE OXIMETRY/RESP. GRAPH - DATA ARRAY ;11/6/01  14:55
"RTN","GMVKPO0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVKPO0",3,0)
 ;
"RTN","GMVKPO0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVKPO0",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVKPO0",6,0)
 ;
"RTN","GMVKPO0",7,0)
EN1 ;ENTRY POINT FROM GMVSR0 TO PRINT PO2/RESP. GRAPH
"RTN","GMVKPO0",8,0)
 N GAPICAL,GRADIAL,GBRACHI S GAPICAL=$O(^GMRD(120.52,"B","APICAL",0)),GRADIAL=$O(^GMRD(120.52,"B","RADIAL",0)),GBRACHI=$O(^GMRD(120.52,"B","BRACHIAL",0))
"RTN","GMVKPO0",9,0)
 S GMROUT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMVKPO0",10,0)
 S GMROUT=0,^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMVKPO0",11,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMVKPO0",12,0)
 F GTYPE="PO2","R" D SETT^GMVHPO0
"RTN","GMVKPO0",13,0)
 S GTYPE="P" D SETT^GMVBP0
"RTN","GMVKPO0",14,0)
 U IO D GRAPH
"RTN","GMVKPO0",15,0)
Q1 K GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMVKPO0",16,0)
 K GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMVKPO0",17,0)
 K GMRQUAL,GLINE,^TMP($J,"GTNM") Q
"RTN","GMVKPO0",18,0)
GRAPH D DEM^VADPT,INP^VADPT,SETV^GMVGR1
"RTN","GMVKPO0",19,0)
 F GK="PO2","R","P" S ^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMVKPO0",20,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMVKPO0",21,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMVKPO0",22,0)
 F GPGS=1:1:GPG K GMRQUAL,GLINE S (GLINE(1),GLINE(2),GLINE(3))="",^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE S ^TMP($J,"GMRK","G200")=GMRRMBD D PAGE D ^GMVKPO2,^GMVKPO3,^GMVKPO4 D
"RTN","GMVKPO0",23,0)
 .S ^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMVKPO0",24,0)
 D KVAR^VADPT K VA,GRAPHR,GRAPHP,GRAPHS,GRAPHD,GPA Q
"RTN","GMVKPO0",25,0)
PAGE ;SET GRAPH DATA
"RTN","GMVKPO0",26,0)
 ;DATA FOR RESPIRATION GRAPH
"RTN","GMVKPO0",27,0)
 I ^TMP($J,"GMRK","G50")="" F GI=51:1:59 S ^TMP($J,"GMRK","G50")=^TMP($J,"GMRK","G"_GI),^TMP($J,"GMRK","G50M")=0.2+(1.6*(GI-50)) Q:^TMP($J,"GMRK","G50")'=""
"RTN","GMVKPO0",28,0)
 I ^TMP($J,"GMRK","G82")="" F GI=83:1:91 S ^TMP($J,"GMRK","G82")=^TMP($J,"GMRK","G"_GI),^TMP($J,"GMRK","G82M")=0.6+(1.6*(GI-82)) Q:^TMP($J,"GMRK","G82")'=""
"RTN","GMVKPO0",29,0)
 I $D(GMRQUAL) D LEGEND^GMVLGQU
"RTN","GMVKPO0",30,0)
 Q
"RTN","GMVKPO0",31,0)
DATE F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMVKPO0",32,0)
 Q
"RTN","GMVKPO0",33,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMVKPO0",34,0)
 Q
"RTN","GMVKPO0",35,0)
SETD F GI="R","PO2","P" S GJ=$S(GI="R":48,GI="PO2":80,GI="P":310,1:0) Q:GJ=0  S GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMVKPO1
"RTN","GMVKPO0",36,0)
 Q
"RTN","GMVKPO0",37,0)
SETP ;INITIALIZE ^TMP FOR QUALIFIERS
"RTN","GMVKPO0",38,0)
 ; 410 - STORE R*   430 - STORE P*   310 - STORE PULSE  330 - STORE PULSE QUALIFIER
"RTN","GMVKPO0",39,0)
 ; 1430+I - PULSE OX. L/MIN
"RTN","GMVKPO0",40,0)
 ; 1450+I - PULSE OX. %  1470+I - PULSE OX. METHOD
"RTN","GMVKPO0",41,0)
 F I=1:1:10 S (^TMP($J,"GMRK","G"_(410+I)),^("G"_(430+I)),^("G"_(1430+I)),^("G"_(1450+I)),^("G"_(1470+I)),^("G"_(310+I)),^("G"_(330+I)))=""
"RTN","GMVKPO0",42,0)
 Q
"RTN","GMVKPO0",43,0)
SETT S GTYP=$O(^GMRD(120.51,"B",$S(GTYPE="R":"RESPIRATION",GTYPE="PO2":"PULSE OXIMETRY",GTYPE="P":"PULSE",1:""),""))
"RTN","GMVKPO0",44,0)
 I GTYP>0 F GX=GSTART1:0 S GX=$O(^GMR(120.5,"AA",DFN,GTYP,GX)) Q:GX>GEND1!(GX'>0)  F GEN=0:0 S GEN=$O(^GMR(120.5,"AA",DFN,GTYP,GX,GEN)) Q:GEN'>0  I '$D(^GMR(120.5,GEN,2)) D BLDARR^GMVGR0
"RTN","GMVKPO0",45,0)
 Q
"RTN","GMVKPO1")
0^240^B7718793
"RTN","GMVKPO1",1,0)
GMVKPO1 ;HIOFO/YH,FT-KYOCERA PULSE OXIMETRY/RESP. GRAPH - GRAPH DATA ;11/6/01  14:56
"RTN","GMVKPO1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVKPO1",3,0)
 ;
"RTN","GMVKPO1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVKPO1",5,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVKPO1",6,0)
 ;
"RTN","GMVKPO1",7,0)
SETA ;
"RTN","GMVKPO1",8,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMVKPO1",9,0)
 S (GMRSITE,GMRSITE(1),GMRSITE(2),GMRINF,GMRVJ)=""
"RTN","GMVKPO1",10,0)
 I GK'="" D
"RTN","GMVKPO1",11,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GI,GDT1,GK)),"^"),GMRVJ=$P($G(^(GK)),"^",2),GMRINF=$P($G(^(GK)),"^",4)
"RTN","GMVKPO1",12,0)
 . I GMRSITE(1)'="" D SYNOARY^GMVLGQU
"RTN","GMVKPO1",13,0)
 I GK'="","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) S GK=GK_$S(GMRVJ=1:"*",1:" ")
"RTN","GMVKPO1",14,0)
 I GI="P" S ^TMP($J,"GMRK","G"_(310+GCNTD))=GK_$S($L(GMRSITE," ")>3:$P(GMRSITE," "),1:""),^TMP($J,"GMRK","G"_(330+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE) Q
"RTN","GMVKPO1",15,0)
 I GI="PO2" D
"RTN","GMVKPO1",16,0)
 . S (GMRINF(1),GMRINF(2))="" I GMRINF'="" D PO2^GMVLGQU(.GMRINF)
"RTN","GMVKPO1",17,0)
 . S ^TMP($J,"GMRK","G"_(1430+GCNTD))=GMRINF(1)
"RTN","GMVKPO1",18,0)
 . S ^TMP($J,"GMRK","G"_(1450+GCNTD))=GMRINF(2)
"RTN","GMVKPO1",19,0)
 . S ^TMP($J,"GMRK","G"_(1470+GCNTD))=GMRSITE
"RTN","GMVKPO1",20,0)
 S ^TMP($J,"GMRK","G"_(GJ+GCNTD+1))=$S(GK>0:$S(GI="R":44-GK/2,GI="PO2":104-GK/2,1:""),1:"") S ^TMP($J,"GMRK","G"_(GJ+200+GCNTD+1))=$S(+GK=0.1:"0*",1:GK)_$S(GI="R":GMRSITE,1:"")
"RTN","GMVKPO1",21,0)
 I GI="R",GK>0 S ^TMP($J,"GMRK","G"_(410+GCNTD))=$S(GK["*":"R*",1:"R")
"RTN","GMVKPO1",22,0)
 I GI="PO2",GK>0 S ^TMP($J,"GMRK","G"_(430+GCNTD))=$S(GK["*":"POx*",1:"POx")
"RTN","GMVKPO1",23,0)
 I GK>0,GI="R" S ^TMP($J,"GMRK","G"_(GJ+GCNTD+1))=$S(^("G"_(GJ+GCNTD+1))<1.5:1.5,^("G"_(GJ+GCNTD+1))>19.7:19.7,1:^("G"_(GJ+GCNTD+1))) S:^("G"_(GJ+GCNTD+1))<1.6!(^("G"_(GJ+GCNTD+1))>19.6) ^TMP($J,"GMRK","G"_(410+GCNTD))="R**"
"RTN","GMVKPO1",24,0)
 I GK>0,GI="PO2" S ^TMP($J,"GMRK","G"_(GJ+GCNTD+1))=$S(^("G"_(GJ+GCNTD+1))<1.5:1.5,^("G"_(GJ+GCNTD+1))>19.7:19.7,1:^("G"_(GJ+GCNTD+1))) S:^("G"_(GJ+GCNTD+1))<1.6!(^("G"_(GJ+GCNTD+1))>19.6) ^TMP($J,"GMRK","G"_(430+GCNTD))="POx**"
"RTN","GMVKPO1",25,0)
 Q
"RTN","GMVKPO2")
0^241^B9909633
"RTN","GMVKPO2",1,0)
GMVKPO2 ;HIOFO/YH,FT-KYOCERA PULSE OXIMETRY/RESP. MACRO-1 ;11/6/01  15:00
"RTN","GMVKPO2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVKPO2",3,0)
 ;
"RTN","GMVKPO2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVKPO2",5,0)
 ; <None>
"RTN","GMVKPO2",6,0)
 ;
"RTN","GMVKPO2",7,0)
EN1 W !,"!R! RES; DAM;"
"RTN","GMVKPO2",8,0)
BOX W !,"MCRO BOX;"
"RTN","GMVKPO2",9,0)
 W !,"UNIT C; SLM 3; STM 1; MAP 0,0; SPD 0.05; BOX 16,22.8; MAP -3,20; BOX 19,2.8;"
"RTN","GMVKPO2",10,0)
 W !,"FONT 40; MAP -2,0.5; TEXT 'Date/Time'; MAP -2.5,1; TEXT 'Pulse Ox.'; MAP -1,1; TEXT 'Resp.';"
"RTN","GMVKPO2",11,0)
 W !,"SPD 0.01; MAP -2,2; TEXT '100'; MAP -1,2; TEXT ' 40'; MAP 0,1; DAP 16,1;"
"RTN","GMVKPO2",12,0)
 W !,"MAP -2,3; TEXT ' 98'; MAP -1,3; TEXT ' 38'; MAP 0,2; DAP 16.2,2;"
"RTN","GMVKPO2",13,0)
 W !,"MAP -2,4; TEXT ' 96'; MAP -1,4; TEXT ' 36'; MAP 0,3; DAP 16,3;"
"RTN","GMVKPO2",14,0)
 W:GTNM=0 "MAP 2,5; TEXT 'THERE  IS  NO  DATA  FOR  THIS  PERIOD';"
"RTN","GMVKPO2",15,0)
 W !,"MAP -2,5; TEXT ' 94'; MAP -1,5; TEXT ' 34'; MAP 0,4; DAP 16,4;"
"RTN","GMVKPO2",16,0)
 W !,"MAP -2,6; TEXT ' 92'; MAP -1,6; TEXT ' 32'; MAP 0,5; DAP 16,5;"
"RTN","GMVKPO2",17,0)
 W !,"MAP -2,7; TEXT ' 90'; MAP -1,7; TEXT ' 30'; MAP 0,6; DAP 16,6;"
"RTN","GMVKPO2",18,0)
 W !,"MAP -2,8; TEXT ' 88'; MAP -1,8; TEXT ' 28'; MAP 0,7; DAP 16,7;"
"RTN","GMVKPO2",19,0)
 W !,"MAP -2,9; TEXT ' 86'; MAP -0.8,9; TEXT '26'; MAP 0,8; DAP 16,8;"
"RTN","GMVKPO2",20,0)
 W !,"SPD 0.01; MAP -2,10; TEXT ' 84'; MAP -0.8,10; TEXT '24'; MAP 0,9; DAP 16,9;"
"RTN","GMVKPO2",21,0)
 W !,"MAP -2,11; TEXT ' 82'; MAP -0.8,11; TEXT '22'; MAP 0,10; DAP 16,10;"
"RTN","GMVKPO2",22,0)
 W !,"MAP -1.8,12; TEXT '80'; MAP -0.8,12; TEXT '20'; MAP 0,11; DAP 16,11;"
"RTN","GMVKPO2",23,0)
 W !,"MAP -1.8,13; TEXT '78'; MAP -0.8,13; TEXT '18'; MAP 0,12; DAP 16,12;"
"RTN","GMVKPO2",24,0)
 W !,"MAP -1.8,14; TEXT '76'; MAP -0.8,14; TEXT '16'; MAP 0,13; DAP 16,13;"
"RTN","GMVKPO2",25,0)
 W !,"MAP -1.8,15; TEXT '74'; MAP -0.8,15; TEXT '14'; MAP 0,14; DAP 16,14;"
"RTN","GMVKPO2",26,0)
 W !,"MAP -1.8,16; TEXT '72'; MAP -0.8,16; TEXT '12'; MAP 0,15; DAP 16,15;"
"RTN","GMVKPO2",27,0)
 W !,"MAP -1.8,17; TEXT '70'; MAP -0.8,17; TEXT '10'; MAP 0,16; DAP 16,16;"
"RTN","GMVKPO2",28,0)
 W !,"MAP -1.8,18; TEXT '68'; MAP -0.8,18; TEXT '8'; MAP 0,17; DAP 16,17;"
"RTN","GMVKPO2",29,0)
 W !,"MAP -1.8,19; TEXT '66'; MAP -0.8,19; TEXT '6'; MAP 0,18; DAP 16,18;"
"RTN","GMVKPO2",30,0)
 W !,"MAP 0,19; DAP 16,19;"
"RTN","GMVKPO2",31,0)
BOX2 ;
"RTN","GMVKPO2",32,0)
 W !,"FONT 57; MAP -3,20.3; TEXT 'Respiration'; MAP -3,20.7; TEXT 'Pulse Oximetry';"
"RTN","GMVKPO2",33,0)
 W !,"MAP -2.5,21.1; TEXT 'L/Min'; MAP -2.5,21.5; TEXT %1; MAP -2.5,21.9; TEXT 'Method';"
"RTN","GMVKPO2",34,0)
 W !,"MAP -3,22.3; TEXT 'Pulse';"
"RTN","GMVKPO2",35,0)
VERT W !,"SPD 0.05;" S I(1)="" F I=1:1:9 S I(1)=I(1)_"MAP "_(1.6*I)_",0; DAP "_(1.6*I)_",22.8;"
"RTN","GMVKPO2",36,0)
 W !,I(1)
"RTN","GMVKPO2",37,0)
 W !,"SPD 0.01; MAP -3,20.4; DAP 16,20.4; MAP 16,20.8; DAP -3,20.8; MAP -3,21.2; DAP 16,21.2; MAP 16,21.6; DAP -3,21.6;"
"RTN","GMVKPO2",38,0)
 W !,"MAP -3,22; DAP 16,22; MAP 16,22.4; DAP -3,22.4;"
"RTN","GMVKPO2",39,0)
 W !,"MAP -3,23.2; TEXT 'R: Respiration          POx: Pulse Oximetry          * - Abnormal value          ** - Abnormal value off of graph';"
"RTN","GMVKPO2",40,0)
FORM W !,"MAP 10,24.4; FONT 56; TEXT 'Medical Record'; MAP 10,24.8; TEXT 'Pulse Oximetry/Respiration Graph'; MAP 10,25.2; TEXT 'SF 512';"
"RTN","GMVKPO2",41,0)
 W !,"ENDM;"
"RTN","GMVKPO2",42,0)
DATE W !,"MCRO DATE; FONT 56;" S J=0.4 D WRTEXT^GMVBP2
"RTN","GMVKPO2",43,0)
 W !,"ENDM;"
"RTN","GMVKPO2",44,0)
TIME W !,"MCRO TIME;" S J=0.8 D WRTEXT^GMVBP2
"RTN","GMVKPO2",45,0)
 W !,"ENDM;"
"RTN","GMVKPO2",46,0)
 Q
"RTN","GMVKPO3")
0^242^B8417913
"RTN","GMVKPO3",1,0)
GMVKPO3 ;HIOFO/YH,FT-KYOCERA PULSE OXIMETRY/RESP. GRAPH - MACRO 2 ;11/6/01  15:00
"RTN","GMVKPO3",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVKPO3",3,0)
 ;
"RTN","GMVKPO3",4,0)
 ; This routine uses the following IAs:
"RTN","GMVKPO3",5,0)
 ; <None>
"RTN","GMVKPO3",6,0)
 ;
"RTN","GMVKPO3",7,0)
EN2 ;CONTINUATION OF GMVKPO2
"RTN","GMVKPO3",8,0)
PULSEG W !,"MCRO PLSG; SPD 0.03;MAP %1, %2; DAP 2.2, %3; DAP 3.8, %4; DAP 5.4, %5; DAP 7, %6; DAP 8.6, %7; DAP 10.2, %8; DAP 11.8, %9;"
"RTN","GMVKPO3",9,0)
 W !,"DAP 13.4, %10; DAP 15, %11;"
"RTN","GMVKPO3",10,0)
 W !,"ENDM;"
"RTN","GMVKPO3",11,0)
PULSE W !,"MCRO PULS;" S J=20.7 D WRTEXT^GMVBP2
"RTN","GMVKPO3",12,0)
 W !,"ENDM;"
"RTN","GMVKPO3",13,0)
POXL ;PULSE OX. L/MIN
"RTN","GMVKPO3",14,0)
 W !,"MCRO POXL;" S J=21.1 D WRTEXT^GMVBP2
"RTN","GMVKPO3",15,0)
 W !,"ENDM;"
"RTN","GMVKPO3",16,0)
POXP ;PULSE OX. %
"RTN","GMVKPO3",17,0)
 W !,"MCRO POXP;" S J=21.5 D WRTEXT^GMVBP2
"RTN","GMVKPO3",18,0)
 W !,"ENDM;"
"RTN","GMVKPO3",19,0)
POXM W !,"MCRO POXM;" S J=21.9 D WRTEXT^GMVBP2
"RTN","GMVKPO3",20,0)
 W !,"ENDM;"
"RTN","GMVKPO3",21,0)
 ;PULSE DATA
"RTN","GMVKPO3",22,0)
 W !,"MCRO NEWP;" S J=22.3 D WRTEXT^GMVBP2
"RTN","GMVKPO3",23,0)
 W !,"ENDM;"
"RTN","GMVKPO3",24,0)
PULSEQ W !,"MCRO PLQ;" S J=22.7 D WRTEXT^GMVBP2
"RTN","GMVKPO3",25,0)
 W !,"ENDM;"
"RTN","GMVKPO3",26,0)
RPG W !,"MCRO RPG; SPD 0.03; MAP %1, %2; DAP 1.8, %3; DAP 3.4, %4; DAP 5, %5; DAP 6.6, %6; DAP 8.2, %7; DAP 9.8, %8; DAP 11.4, %9;"
"RTN","GMVKPO3",27,0)
 W !,"DAP 13, %10; DAP 14.6, %11;"
"RTN","GMVKPO3",28,0)
 W !,"ENDM;"
"RTN","GMVKPO3",29,0)
RESP W !,"MCRO RSP;" S J=20.3 D WRTEXT^GMVBP2
"RTN","GMVKPO3",30,0)
 W !,"ENDM;"
"RTN","GMVKPO3",31,0)
PID W !,"MCRO PID; MAP -2,24.4; FONT 56; TEXT %1; MAP -2,24.7; TEXT %2; MAP 2.5,24.7; TEXT %3; MAP -2,25; TEXT %4; MAP 6,25; TEXT %5; MAP 6,25.3; TEXT %6; MAP -2,25.3; TEXT %7; MAP -2,25.6; TEXT %8;"
"RTN","GMVKPO3",32,0)
 W !,"ENDM;"
"RTN","GMVKPO3",33,0)
RS1 W !,"MCRO RS1; FONT 56; MAP %1,%2; TEXT %3; MAP 1.8,%4; TEXT %5; MAP 3.4,%6; TEXT %7; MAP 5,%8; TEXT %9; MAP 6.6,%10; TEXT %11; MAP 8.2,%12; TEXT %13; MAP 9.8,%14; TEXT %15; MAP 11.4,%16; TEXT %17; MAP 13,%18; TEXT %19;"
"RTN","GMVKPO3",34,0)
 W !,"ENDM;"
"RTN","GMVKPO3",35,0)
RS2 W !,"MCRO RS2; MAP 14.6,%1; TEXT %2;"
"RTN","GMVKPO3",36,0)
 W !,"ENDM;"
"RTN","GMVKPO3",37,0)
PLS1 W !,"MCRO PLS1; FONT 56; MAP %1,%2; TEXT %3; MAP 2.2,%4; TEXT %5; MAP 3.8,%6; TEXT %7; MAP 5.4,%8; TEXT %9; MAP 7,%10; TEXT %11; MAP 8.6,%12; TEXT %13; MAP 10.2,%14; TEXT %15; MAP 11.8,%16; TEXT %17; MAP 13.4,%18; TEXT %19;"
"RTN","GMVKPO3",38,0)
 W !,"ENDM;"
"RTN","GMVKPO3",39,0)
PLS2 W !,"MCRO PLS2; MAP 15,%1; TEXT %2;"
"RTN","GMVKPO3",40,0)
 W !,"ENDM;"
"RTN","GMVKPO3",41,0)
QUAL ;
"RTN","GMVKPO3",42,0)
 W !,"MCRO QUA; FONT 57; MAP -3,23.5; TEXT %1; ENDM;" W !,"MCRO QU2; MAP -2.5,23.8; TEXT %1; ENDM;"
"RTN","GMVKPO3",43,0)
 Q
"RTN","GMVKPO4")
0^243^B8779887
"RTN","GMVKPO4",1,0)
GMVKPO4 ;HIOFO/YH,FT-GRAPH KYOCERA PRINT COMMANDS (PART 1) ;11/6/01  15:01
"RTN","GMVKPO4",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVKPO4",3,0)
 ;
"RTN","GMVKPO4",4,0)
 ; This routine uses the following IAs:
"RTN","GMVKPO4",5,0)
 ; <None>
"RTN","GMVKPO4",6,0)
 ;
"RTN","GMVKPO4",7,0)
EN3 ;CONTINUATION OF GMVKPO3
"RTN","GMVKPO4",8,0)
CALL W !,"CALL BOX, '%';"
"RTN","GMVKPO4",9,0)
 W !,"CALL DATE" S J(1)=1,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVKPO4",10,0)
 W !,"CALL TIME" S J(1)=17,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVKPO4",11,0)
 W !,"CALL RPG, "_^TMP($J,"GMRK","G50M")_", "_^("G50")_", "_^("G51")_", "_^("G52")_", "_^("G53")_", "_^("G54")_", "_^("G55")_", "_^("G56")
"RTN","GMVKPO4",12,0)
 W ", "_^TMP($J,"GMRK","G57")_", "_^("G58")_", "_^("G59")_";"
"RTN","GMVKPO4",13,0)
 W !,"CALL RS1, "_^TMP($J,"GMRK","G50M")_", "_^("G50")_", '"_^("G411")_"', "_^("G51")_", '"_^("G412")_"', "_^("G52")_", '"_^("G413")_"', "_^("G53")_", '"_^("G414")_"', "_^("G54")_", '"_^("G415")_"', "_^("G55")_", '"_^("G416")_"', "
"RTN","GMVKPO4",14,0)
 W ^TMP($J,"GMRK","G56")_", '"_^("G417")_"', "_^("G57")_", '"_^("G418")_"', "_^("G58")_", '"_^("G419")_"';"
"RTN","GMVKPO4",15,0)
 W !,"CALL RS2, "_^TMP($J,"GMRK","G59")_", '"_^("G420")_"';"
"RTN","GMVKPO4",16,0)
 W !,"CALL RSP" S J(1)=250,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVKPO4",17,0)
 W !,"CALL PLSG, "_^TMP($J,"GMRK","G82M")_", "_^("G82")_", "_^("G83")_", "_^("G84")_", "_^("G85")_", "_^("G86")_", "_^("G87")_", "_^("G88")_", "
"RTN","GMVKPO4",18,0)
 W ^TMP($J,"GMRK","G89")_", "_^("G90")_", "_^("G91")_";"
"RTN","GMVKPO4",19,0)
 W !,"CALL PLS1, "_^TMP($J,"GMRK","G82M")_", "_^("G82")_", '"_^("G431")_"', "_^("G83")_", '"_^("G432")_"', "_^("G84")_", '"_^("G433")_"', "_^("G85")_", '"_^("G434")_"', "_^("G86")_", '"_^("G435")_"', "_^("G87")_", '"_^("G436")_"', "
"RTN","GMVKPO4",20,0)
 W ^TMP($J,"GMRK","G88")_", '"_^("G437")_"', "_^("G89")_", '"_^("G438")_"', "_^("G90")_", '"_^("G439")_"';"
"RTN","GMVKPO4",21,0)
 W !,"CALL PLS2, "_^TMP($J,"GMRK","G91")_", '"_^("G440")_"';"
"RTN","GMVKPO4",22,0)
 W !,"CALL PULS" S J(1)=282,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVKPO4",23,0)
PO2Q ;
"RTN","GMVKPO4",24,0)
 W !,"CALL POXL" S J(1)=1431,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVKPO4",25,0)
 W !,"CALL POXP" S J(1)=1451,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVKPO4",26,0)
 W !,"CALL POXM" S J(1)=1471,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVKPO4",27,0)
 W !,"CALL NEWP" S J(1)=311,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVKPO4",28,0)
 W !,"CALL PLQ" S J(1)=331,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVKPO4",29,0)
 W !,"CALL QUA, '"_$G(GLINE(1))_"';" W !,"CALL QU2, '"_$G(GLINE(2))_"';"
"RTN","GMVKPO4",30,0)
 W !,"CALL PID, """_^TMP($J,"GMRK","G194")_""", '"_^("G196")_"', '"_^("G197")_"', '"_^("G198")_"', '"_^("G199")_"', '"_^("G200")_"', '"_GMRDIV_"', '"_GSTRFIN_"';"
"RTN","GMVKPO4",31,0)
 W !,"RES; EXIT;"
"RTN","GMVKPO4",32,0)
 Q
"RTN","GMVLAT0")
0^149^B27866387
"RTN","GMVLAT0",1,0)
GMVLAT0 ;HOIFO/YH,FT-DISPLAY LATEST VITALS/MEASUREMENTS FOR A PATIENT ;7/3/02  01:31
"RTN","GMVLAT0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVLAT0",3,0)
 ;
"RTN","GMVLAT0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVLAT0",5,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVLAT0",6,0)
 ;
"RTN","GMVLAT0",7,0)
EN1(DFN) ; ENTRY TO EXTRACT THE LATEST VITALS/MEASUREMENT FOR A PATIENT
"RTN","GMVLAT0",8,0)
 ;CALLED BY GMVGETD GETLAT
"RTN","GMVLAT0",9,0)
 N GJ,GBLANK,GAPICAL,GRADIAL,GBRACH
"RTN","GMVLAT0",10,0)
 S GJ=0,GBLANK=""
"RTN","GMVLAT0",11,0)
 S GAPICAL=$O(^GMRD(120.52,"B","APICAL",0)),GRADIAL=$O(^GMRD(120.52,"B","RADIAL",0)),GBRACH=$O(^GMRD(120.52,"B","BRACHIAL",0))
"RTN","GMVLAT0",12,0)
 F X="T","P","R","PO2","BP","HT","WT","CVP","CG","PN" I $D(^GMRD(120.51,"C",X))  S GMR(X)=$O(^GMRD(120.51,"C",X,"")),Y=$P($G(^GMRD(120.51,GMR(X),0)),"^") Q:Y=""
"RTN","GMVLAT0",13,0)
 K GMRDT,GMRVWT,GMRVHT
"RTN","GMVLAT0",14,0)
 S X=""
"RTN","GMVLAT0",15,0)
 F  S X=$O(GMR(X)) Q:X=""  S GMRDATS="" I GMR(X)>0 F GMRDAT=0:0 S GMRDAT=$O(^GMR(120.5,"AA",DFN,+GMR(X),GMRDAT)) Q:$S(GMRDAT'>0:1,GMRDATS>0:1,1:0)  D SETDATAR
"RTN","GMVLAT0",16,0)
 I '($D(GMRDATA)\10) S GJ=GJ+1,^TMP($J,"GRPC",GJ)="There are no results to report " G Q
"RTN","GMVLAT0",17,0)
 F X="T","P","R","PO2","BP","HT","WT","CVP","CG","PN" I $D(GMRDATA(X)) S GMRVDT="",(GMRVDT(1),GMVD)=0 F  S GMVD=$O(GMRDATA(X,GMVD)) Q:GMVD'>0  D WRTDT S GMVD(1)=0 F  S GMVD(1)=$O(GMRDATA(X,GMVD,GMVD(1))) Q:GMVD(1)'>0  D
"RTN","GMVLAT0",18,0)
 . S GJ=GJ+1,^TMP($J,"GRPC",GJ)="",GMRVX(0)=GMRDATA(X,GMVD,GMVD(1)) S GMRVX=X D EN1^GMVSAS0
"RTN","GMVLAT0",19,0)
  . S:GMRVDT(1)=0 ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_$S(X="BP":"B/P",X="P":"Pulse",X="R":"Resp.",X="T":"Temp.",X="HT":"Ht.",X="CG":"Circ/Girth",X="WT":"Wt.",X="PO2":"Pulse Ox",X="PN":"Pain",1:X)_":"
"RTN","GMVLAT0",20,0)
 . I GMRVDT(1)=0 S GBLANK=$$REPEAT^XLFSTR(" ",13-$L(^TMP($J,"GRPC",GJ))),^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_GBLANK_"("_GMRVDT_") " S GMRVDT(1)=1
"RTN","GMVLAT0",21,0)
 . S GBLANK=$$REPEAT^XLFSTR(" ",31-$L(^TMP($J,"GRPC",GJ))),^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_GBLANK
"RTN","GMVLAT0",22,0)
 . I X="T" S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_GMRVX(0)_" F  ("_$J(+GMRVX(0)-32*5/9,0,1)_" C)"
"RTN","GMVLAT0",23,0)
 . I X="WT" S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_GMRVX(0)_" lb  ("_$J(GMRVX(0)/2.2,0,2)_" kg)" S GMRVWT=GMRVX(0)/2.2
"RTN","GMVLAT0",24,0)
 . I X="HT" S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_$S(GMRVX(0)\12:GMRVX(0)\12_" ft ",1:"")_$S(GMRVX(0)#12:GMRVX(0)#12_" in",1:"")_" ("_$J(GMRVX(0)*2.54,0,2)_" cm)" S GMRVHT=(GMRVX(0)*2.54)/100
"RTN","GMVLAT0",25,0)
 . I X="CG" S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_GMRVX(0)_" in ("_$J(+GMRVX(0)/.3937,0,2)_" cm)"
"RTN","GMVLAT0",26,0)
 . I X="CVP" S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_GMRVX(0)_" cmH2O ("_$J(GMRVX(0)/1.36,0,1)_" mmHg)"
"RTN","GMVLAT0",27,0)
 . I X="PO2" S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_GMRVX(0)_"% "
"RTN","GMVLAT0",28,0)
 . I X="P"!(X="R")!(X="BP") S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_GMRVX(0)
"RTN","GMVLAT0",29,0)
 . I X="PN" D  S ^TMP($J,"GRPC",GJ)=^(GJ)_GMRVX(0)
"RTN","GMVLAT0",30,0)
 . . I GMRVX(0)=0 S GMRVX(0)="0 - No pain" Q
"RTN","GMVLAT0",31,0)
 . . I GMRVX(0)=99 S GMRVX(0)="99 - Unable to respond" Q
"RTN","GMVLAT0",32,0)
 . . I GMRVX(0)=10 S GMRVX(0)="Pain class - 10 Worst imaginable pain" Q
"RTN","GMVLAT0",33,0)
 . . S GMVVX(0)="Pain class "_GMRVX(0) Q
"RTN","GMVLAT0",34,0)
 . S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_$S('$D(GMRVX(1)):"",'GMRVX(1):"",1:"*") K GMRVX
"RTN","GMVLAT0",35,0)
 . D CHAR
"RTN","GMVLAT0",36,0)
 . I X="WT",$G(GMRVWT)>0,$G(GMRVHT)>0 S GJ=GJ+1,GMRVHT(1)=$J(GMRVWT/(GMRVHT*GMRVHT),0,0),^TMP($J,"GRPC",GJ)="Body Mass Index:" D
"RTN","GMVLAT0",37,0)
 . . S GBLANK=$$REPEAT^XLFSTR(" ",29-$L(^TMP($J,"GRPC",GJ))),^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_GBLANK_GMRVHT(1)_$S(GMRVHT(1)>27:"*",1:"")
"RTN","GMVLAT0",38,0)
 . Q
"RTN","GMVLAT0",39,0)
Q K GMRVWT,GMRVHT,GMR,GMVD,GBP,GMRVARY,GMRVDA,GMRDATA,GMVDM,GLIN,GMRZZ
"RTN","GMVLAT0",40,0)
 K GMRVDT,GMROUT,%Y,GMRL,GMRDT,DIC,GMRDAT,GMRDATS,GMRSTR,GMRX,GMRVX,POP
"RTN","GMVLAT0",41,0)
 Q
"RTN","GMVLAT0",42,0)
SETDATAR ;
"RTN","GMVLAT0",43,0)
 S Y=0 F  S Y=$O(^GMR(120.5,"AA",DFN,GMR(X),GMRDAT,Y)) Q:Y'>0!GMRDATS  I '$D(^GMR(120.5,Y,2)),$P(^GMR(120.5,Y,0),"^",8)'="" D SETNODE
"RTN","GMVLAT0",44,0)
 D:X="BP"!(X="P") SETBP
"RTN","GMVLAT0",45,0)
 Q
"RTN","GMVLAT0",46,0)
SETNODE ;
"RTN","GMVLAT0",47,0)
 N G S GMRL=$S($D(^GMR(120.5,Y,0)):^(0),1:"")
"RTN","GMVLAT0",48,0)
 I X'="P" S G=$P(GMRL,"^",8) Q:"REFUSEDPASSUNAVAILABLE"[$$UP^XLFSTR(G)
"RTN","GMVLAT0",49,0)
 I X="P" S OK=0,G=$P(GMRL,"^",8) D  Q:'OK
"RTN","GMVLAT0",50,0)
 . I "REFUSEDPASSUNAVAILABLE"[$$UP^XLFSTR(G) Q
"RTN","GMVLAT0",51,0)
 . I '$D(^GMR(120.5,Y,5,"B")) S OK=1 Q
"RTN","GMVLAT0",52,0)
 . I $D(^GMR(120.5,Y,5,"B",GAPICAL)) S OK=1 Q
"RTN","GMVLAT0",53,0)
 . I $D(^GMR(120.5,Y,5,"B",GRADIAL)) S OK=1 Q
"RTN","GMVLAT0",54,0)
 . I $D(^GMR(120.5,Y,5,"B",GBRACH)) S OK=1 Q
"RTN","GMVLAT0",55,0)
 S GMRL1=$P(GMRL,"^") ;adding trailing zeros to time if necessary
"RTN","GMVLAT0",56,0)
 S $P(GMRL1,".",2)=$P(GMRL1,".",2)_"0000"
"RTN","GMVLAT0",57,0)
 S $P(GMRL1,".",2)=$E($P(GMRL1,".",2),1,4)
"RTN","GMVLAT0",58,0)
 S $P(GMRL,"^")=GMRL1
"RTN","GMVLAT0",59,0)
 K GMRL1
"RTN","GMVLAT0",60,0)
 I GMRL'="" S GMRDATA(X,$P(GMRL,"^"),Y)=$P(GMRL,"^",8),GMRDATS=1 I $P($G(^GMR(120.5,Y,5,0)),"^",4)>0 D CHAR^GMVCHAR(Y,.GMRVARY,GMR(X))
"RTN","GMVLAT0",61,0)
 Q
"RTN","GMVLAT0",62,0)
WRTDT ;
"RTN","GMVLAT0",63,0)
 S GMRVDT=$E(GMVD,4,5)_"/"_$E(GMVD,6,7)_"/"_$E(GMVD,2,3)_"@"_$E($P(GMVD,".",2),1,2)_$S($E($P(GMVD,".",2),3,4)'="":":"_$E($P(GMVD,".",2),3,4),1:"")
"RTN","GMVLAT0",64,0)
 Q
"RTN","GMVLAT0",65,0)
CHAR ;
"RTN","GMVLAT0",66,0)
 S GMRZZ=$$WRITECH(GMVD(1),.GMRVARY,5) S:GMRZZ'=""&(X'="PO2") GMRZZ="("_GMRZZ_")"
"RTN","GMVLAT0",67,0)
 I X="PO2",$P(^GMR(120.5,GMVD(1),0),"^",10)'="" S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_"with supplemental O2" D
"RTN","GMVLAT0",68,0)
 . S GPO2=$P(^GMR(120.5,GMVD(1),0),"^",10)
"RTN","GMVLAT0",69,0)
 . I GPO2[" l/min" S ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_" "_$P(GPO2," l/min")_"L/min"_$P(GPO2," l/min",2)
"RTN","GMVLAT0",70,0)
 . K GPO2
"RTN","GMVLAT0",71,0)
 S:GMRZZ'="" ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_" "_GMRZZ K GMRZZ Q
"RTN","GMVLAT0",72,0)
 S:$G(GMRZZ)'="" ^TMP($J,"GRPC",GJ)=^TMP($J,"GRPC",GJ)_"  "_GMRZZ K GMRZZ
"RTN","GMVLAT0",73,0)
 Q
"RTN","GMVLAT0",74,0)
SETBP ;
"RTN","GMVLAT0",75,0)
 D SETBP^GMVLATS
"RTN","GMVLAT0",76,0)
 Q
"RTN","GMVLAT0",77,0)
WRITECH(GDA,GARRY,GN)   ;
"RTN","GMVLAT0",78,0)
 ; Input data:
"RTN","GMVLAT0",79,0)
 ; GDA - Pointer to the patient vitals/measurements data file #120.5
"RTN","GMVLAT0",80,0)
 ; GARRY - qualifier data array for a measurement
"RTN","GMVLAT0",81,0)
 ;         GARRY(GDA,Print order,qualifier data)
"RTN","GMVLAT0",82,0)
 ; GN - Number of print order to print
"RTN","GMVLAT0",83,0)
 N GMRVDA,GDATA
"RTN","GMVLAT0",84,0)
 S GDATA="",GMRVDA(1)=0
"RTN","GMVLAT0",85,0)
 F  S GMRVDA(1)=$O(GARRY(GDA,GMRVDA(1))) Q:GMRVDA(1)'>0!(GMRVDA(1)>GN)  S GMRVDA(2)="" F  S GMRVDA(2)=$O(GARRY(GDA,GMRVDA(1),GMRVDA(2))) Q:GMRVDA(2)=""  D
"RTN","GMVLAT0",86,0)
 . S GDATA=GDATA_","_GMRVDA(2)
"RTN","GMVLAT0",87,0)
 . Q
"RTN","GMVLAT0",88,0)
 I $E(GDATA,1)="," S GDATA=$E(GDATA,2,$L(GDATA)) ;strip off leading comma
"RTN","GMVLAT0",89,0)
 Q GDATA
"RTN","GMVLATS")
0^150^B3425375
"RTN","GMVLATS",1,0)
GMVLATS ;HOIFO/YH,FT-QUEUES LATEST VITALS/MEASUREMENTS ;12/27/01  11:08
"RTN","GMVLATS",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVLATS",3,0)
 ;
"RTN","GMVLATS",4,0)
 ; This routine uses the following IAs:
"RTN","GMVLATS",5,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVLATS",6,0)
 ;
"RTN","GMVLATS",7,0)
SETBP ;
"RTN","GMVLATS",8,0)
 S GDT=GMRDAT,GDATE=GMRDAT+.00000014
"RTN","GMVLATS",9,0)
 F  S GMRDAT=$O(^GMR(120.5,"AA",DFN,GMR(X),GMRDAT)) Q:GMRDAT'>0!(GMRDAT>GDATE)  S Y=0 F  S Y=$O(^GMR(120.5,"AA",DFN,GMR(X),GMRDAT,Y)) Q:Y'>0  I '$D(^GMR(120.5,+Y,2)) D:X="BP" SETNODE^GMVDS0 D:X="P" SETP
"RTN","GMVLATS",10,0)
 S GMRDAT=GDT K GDT,GDATE
"RTN","GMVLATS",11,0)
 Q
"RTN","GMVLATS",12,0)
SETP ;
"RTN","GMVLATS",13,0)
 S GMRL=$S($D(^GMR(120.5,Y,0)):^(0),1:"")
"RTN","GMVLATS",14,0)
 N GG S GG=$P(GMRL,"^",8),OK=0 D  Q:'OK
"RTN","GMVLATS",15,0)
 . I "REFUSEDPASSUNAVAILABLE"[$$UP^XLFSTR(GG) Q
"RTN","GMVLATS",16,0)
 . I '$D(^GMR(120.5,Y,5,"B")) S OK=1 Q
"RTN","GMVLATS",17,0)
 . I $D(^GMR(120.5,Y,5,"B",GAPICAL)) S OK=1 Q
"RTN","GMVLATS",18,0)
 . I $D(^GMR(120.5,Y,5,"B",GRADIAL)) S OK=1 Q
"RTN","GMVLATS",19,0)
 . I $D(^GMR(120.5,Y,5,"B",GBRACH)) S OK=1 Q
"RTN","GMVLATS",20,0)
 S GMRL1=$P(GMRL,"^") ;adding trailing zeros to time if necessary
"RTN","GMVLATS",21,0)
 S $P(GMRL1,".",2)=$P(GMRL1,".",2)_"0000"
"RTN","GMVLATS",22,0)
 S $P(GMRL1,".",2)=$E($P(GMRL1,".",2),1,4)
"RTN","GMVLATS",23,0)
 S $P(GMRL,"^")=GMRL1
"RTN","GMVLATS",24,0)
 K GMRL1
"RTN","GMVLATS",25,0)
 I GMRL'="" S GMRDATA(X,$P(GMRL,"^"),Y)=$P(GMRL,"^",8),GMRDATS=1 I $P($G(^GMR(120.5,Y,5,0)),"^",4)>0 D CHAR^GMVCHAR(Y,.GMRVARY,GMR(X))
"RTN","GMVLATS",26,0)
 Q
"RTN","GMVLBP0")
0^244^B13331145
"RTN","GMVLBP0",1,0)
GMVLBP0 ;HIOFO/YH,FT-PATIENT BLOOD PRESSURE LINE PRINTER GRAPH - 1 ;11/6/01  15:49
"RTN","GMVLBP0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVLBP0",3,0)
 ;
"RTN","GMVLBP0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVLBP0",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVLBP0",6,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVLBP0",7,0)
 ;
"RTN","GMVLBP0",8,0)
SF512 ;BLOOD PRESSURE GRAPH
"RTN","GMVLBP0",9,0)
 D DEM^VADPT,INP^VADPT S GMRBTH=$P(VADM(3),"^",2),GMRNAM=VADM(1)
"RTN","GMVLBP0",10,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMVLBP0",11,0)
 F GTYPE="B","P" D SETT^GMVBP0
"RTN","GMVLBP0",12,0)
 F GMRK="P","B" D GMRDT
"RTN","GMVLBP0",13,0)
 S (GMRTNM,GMRI)=0 I $D(^TMP($J,"GMRDT")) F  S GMRI=$O(^TMP($J,"GMRDT",GMRI)) Q:GMRI'>0  S GMRTNM=GMRTNM+1
"RTN","GMVLBP0",14,0)
 U IO D GRAPH
"RTN","GMVLBP0",15,0)
 K GMR3,GMRDAT,GMREN,GMRHDR1,GMRHDR11,GMRHDR10,GMRHDR2,GMRHT,GMRI,GMRJ,GMRK,GMRLINE,GDATA,GMROLD,GMRP,GMRSDIF,GMRPG,GMRPGC,GMRPGS,GMRSHI,GMRSLO,GMRSOFF,GMRSITE,GMRD,GMRDDIF,GMRDHI,GMRDLO,GMRTNM
"RTN","GMVLBP0",16,0)
 K Z,GCHA,GEN,GTYP,GTYPE,GMAP,GX,GEND1,GSTART1,GLPRNTR,GMRDOFF,GMRTY,GMRNM,GMRVX,GMRVX1,GMRVX2,^TMP($J,"GMRDT"),^TMP($J,"GMRG"),^TMP($J,"GMRVG")
"RTN","GMVLBP0",17,0)
 Q
"RTN","GMVLBP0",18,0)
GRAPH ;
"RTN","GMVLBP0",19,0)
 S:'$D(GFLAG) GFLAG=0 S GMRPGC=0,GMRX1="" F X=1:1:10 S GMRX1=GMRX1_"          "_"|"
"RTN","GMVLBP0",20,0)
 S (GMRX,GMRX2)=GMRX1 F X=1:1:10 S $P(GMRX,"|",X)="__________",$P(GMRX2,"|",X)="----------"
"RTN","GMVLBP0",21,0)
 S GMRPG=$S(GMRTNM=0:1,1:GMRTNM\10+$S(GMRTNM#10>0:1,1:0)) F GMRPGS=1:1:GMRPG S (GMRSLO,GMRDLO)=228.335 D PAGE Q:GMROUT
"RTN","GMVLBP0",22,0)
 Q
"RTN","GMVLBP0",23,0)
PAGE ;
"RTN","GMVLBP0",24,0)
 K GMRQUAL,GLINE W:'($E(IOST)'="C"&'GFLAG) @IOF S GFLAG=1,GMRPGC=GMRPGC+1 W !
"RTN","GMVLBP0",25,0)
 I '$D(^TMP($J,"GMRVG")) W !!!!!!!!,?5,"THERE  IS  NO  DATA  FOR  THIS  REPORT" X "F Y=$Y:1:(IOSL-6) W !" D FOOTER^GMVLBP2 Q
"RTN","GMVLBP0",26,0)
 W ! D DATES^GMVVS2 W !,?3,"Blood Pressure",?17,"|",?18,GMRX
"RTN","GMVLBP0",27,0)
 F GMRI=0:0 Q:$Y>61  W ! D SETHD^GMVLBP1 W ?10,GMRHDR10,?16,$S(GMR3:"-",1:""),?17,"|" D DATAPRT^GMVLBP1
"RTN","GMVLBP0",28,0)
 W !,?17,"|",GMRX2 F GMRI="P","P1","B","D","BQUAL","MAP" S GMRLINE(GMRI)=GMRX1
"RTN","GMVLBP0",29,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>10  F GMRI="P","B" D:$D(^TMP($J,"GMRVG",GMRI,GMRDT)) STLNP^GMVLBP2
"RTN","GMVLBP0",30,0)
 F GMRI="P","P1","B","D","BQUAL","MAP" D
"RTN","GMVLBP0",31,0)
 .S G=$S(GMRI="P":"Pulse",GMRI="B":"BLOOD",GMRI="D":"  PRESSURE",GMRI="MAP":"MAP",1:"")
"RTN","GMVLBP0",32,0)
 . W !,?5,G,?17,"|",GMRLINE(GMRI)
"RTN","GMVLBP0",33,0)
 I 'GMROUT W !,?17,$$REPEAT^XLFSTR("-",111)
"RTN","GMVLBP0",34,0)
 W !,"S: Systolic B/P   D: Diastolic B/P   MAP: Mean Arterial Pressure  * - Abnormal value  ** - Abnormal value off of graph"
"RTN","GMVLBP0",35,0)
 W ! I $D(GMRQUAL) S GLPRNTR=1 D LEGEND^GMVLGQU F I=1:1:5 W !,GLINE(I)
"RTN","GMVLBP0",36,0)
 I IOSL'<($Y+10) F X=1:1 W ! Q:IOSL<($Y+10)
"RTN","GMVLBP0",37,0)
 D FOOTER^GMVLBP2 S GMRDT="" F GMRNM=1:1:10 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  K ^TMP($J,"GMRDT",GMRDT)
"RTN","GMVLBP0",38,0)
 K GG,GI,GMRVJ,GSYNO Q
"RTN","GMVLBP0",39,0)
CKDT F GMRJ=0:0 S GMRJ=$O(^TMP($J,"GMRDT",GMRJ)) Q:GMRJ'>0!(+$P(GMRJ,".")>GMRI)  S:+$P(GMRJ,".")=GMRI GFOUND=1
"RTN","GMVLBP0",40,0)
 Q
"RTN","GMVLBP0",41,0)
GMRDT S GMRTNM(GMRK)=0 F GMRI=0:0 S GMRI=$O(^TMP($J,"GMRVG",GMRK,GMRI)) Q:GMRI'>0  S GMRJ="" F X=0:0 S GMRJ=$O(^TMP($J,"GMRVG",GMRK,GMRI,GMRJ)) Q:GMRJ=""  S GMRTNM(GMRK)=GMRTNM(GMRK)+1 S:GMRK'="XI1" ^TMP($J,"GMRDT",GMRI)=""
"RTN","GMVLBP0",42,0)
 Q
"RTN","GMVLBP1")
0^245^B4200707
"RTN","GMVLBP1",1,0)
GMVLBP1 ;HIOFO/YH,FT-SYSTOLIC/DIASTOLIC GRAPH ;12/17/01  09:30
"RTN","GMVLBP1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVLBP1",3,0)
 ;
"RTN","GMVLBP1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVLBP1",5,0)
 ; <None>
"RTN","GMVLBP1",6,0)
 ;
"RTN","GMVLBP1",7,0)
SETHD ;
"RTN","GMVLBP1",8,0)
 S GMR3=(($Y/3)=($Y\3)),(GMRSHI,GMRDHI)=GMRSLO,(GMRSLO,GMRDLO)=$Y*(-10)/3+248.335,(GMRSDIF,GMRDDIF)=GMRSHI-GMRSLO
"RTN","GMVLBP1",9,0)
 S GMRHDR10=$S($Y>8&GMR3&($Y<62):GMRSLO+1.665,1:"")
"RTN","GMVLBP1",10,0)
 Q
"RTN","GMVLBP1",11,0)
DATAPRT ;
"RTN","GMVLBP1",12,0)
 S GMRLINE=GMRX1
"RTN","GMVLBP1",13,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  D SETLINE Q:GMRNM=10
"RTN","GMVLBP1",14,0)
 W GMRLINE
"RTN","GMVLBP1",15,0)
 Q
"RTN","GMVLBP1",16,0)
SETLINE ;
"RTN","GMVLBP1",17,0)
 S GMRNM=GMRNM+1,GMROLD=$P(GMRLINE,"|",GMRNM),GMRS=$O(^TMP($J,"GMRVG","S",GMRDT,""))
"RTN","GMVLBP1",18,0)
 S GMRD=$O(^TMP($J,"GMRVG","D",GMRDT,""))
"RTN","GMVLBP1",19,0)
 S GMRSOFF=($Y=7&(+GMRS>225))!($Y=61&(+GMRS<48)),GMRDOFF=($Y=7&(+GMRD>226))!($Y=61&(+GMRD<48))
"RTN","GMVLBP1",20,0)
 S GMROLD=$S(+GMRS>0&(+GMRS'<GMRSLO&(+GMRS'>GMRSHI)!GMRSOFF):"S"_$S('$P(^TMP($J,"GMRVG","S",GMRDT,GMRS),"^",2):" ",1:"*")_$S('GMRSOFF:" ",1:"*")_$E(GMROLD,4,10),1:GMROLD)
"RTN","GMVLBP1",21,0)
 S GMROLD=$E(GMROLD,1,5)_$S(GMRD>0&(+GMRD'<GMRDLO&(+GMRD'>GMRDHI)!GMRDOFF):"D"_$S('$P(^TMP($J,"GMRVG","D",GMRDT,GMRD),"^",2):" ",1:"*")_$S('GMRDOFF:" ",1:"*")_$E(GMROLD,9,10),1:$E(GMROLD,6,10))
"RTN","GMVLBP1",22,0)
 S $P(GMRLINE,"|",GMRNM)=GMROLD
"RTN","GMVLBP1",23,0)
 Q
"RTN","GMVLBP2")
0^246^B6983764
"RTN","GMVLBP2",1,0)
GMVLBP2 ;HIOFO/YH,FT-SET GRAPH LOWER BOX DATA ;9/30/02  15:03
"RTN","GMVLBP2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVLBP2",3,0)
 ;
"RTN","GMVLBP2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVLBP2",5,0)
 ; #10061 - ^VADPT call            (supported)
"RTN","GMVLBP2",6,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVLBP2",7,0)
 ;
"RTN","GMVLBP2",8,0)
FOOTER ;PRINT VITAL SIGNS-I/O SHEET FOOTER
"RTN","GMVLBP2",9,0)
 W ! W:GMRNAM'="" ?$X-3,$E(GMRNAM,1,35) W "  "_$P($G(VADM(2)),"^",2)_"  "_$P($G(VADM(3)),"^",2)_"  "_$P($G(VADM(4)),"^")_" YRS   "_$P($G(VADM),"^",2)
"RTN","GMVLBP2",10,0)
 W ?95,"MEDICAL RECORD" W !,"Unit: "_$S(GMRWARD(1)'="":GMRWARD(1),1:"     "),"   "_"Room: "_$S($P(VAIN(5),"^")'="":$P($P(VAIN(5),"^"),"-",1,2),1:"    "),?95,"B/P PLOTTING CHART"
"RTN","GMVLBP2",11,0)
 D INP^VADPT S GMRVHLOC=$$HOSPLOC^GMVUTL1(+$G(VAIN(4)))
"RTN","GMVLBP2",12,0)
 W !,"Division: "_$$DIVISION^GMVUTL1(+GMRVHLOC),?55,"Page "_GMRPGC,?95,"VA STANDARD FORM 512-A",!
"RTN","GMVLBP2",13,0)
 W GSTRFIN Q
"RTN","GMVLBP2",14,0)
STLNP ;
"RTN","GMVLBP2",15,0)
 S GMR(GMRI)=$O(^TMP($J,"GMRVG",GMRI,GMRDT,"")) Q:GMR(GMRI)=""
"RTN","GMVLBP2",16,0)
 S (GMRSITE,GMRSITE(1),GMRINF,GMRVJ)=""
"RTN","GMVLBP2",17,0)
 S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GMRI,GMRDT,GMR(GMRI))),"^"),GMRSITE(2)=$P($G(^(GMR(GMRI))),"^",3),GMRINF=$P($G(^(GMR(GMRI))),"^",4) I GMRSITE(1)'="" S GI=GMRI D SYNOARY^GMVLGQU
"RTN","GMVLBP2",18,0)
 I "UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GMR(GMRI)) S GMR(GMRI)=GMR(GMRI)_$S($P(^TMP($J,"GMRVG",GMRI,GMRDT,GMR(GMRI)),"^",2)'=1:" ",1:"*")
"RTN","GMVLBP2",19,0)
 I GMRI="P" D  Q
"RTN","GMVLBP2",20,0)
 . S $P(GMRLINE(GMRI),"|",GMRNM)=$E(GMR(GMRI)_$S($L(GMRSITE," ")>3:" "_$P(GMRSITE," "),1:"")_"          ",1,10)
"RTN","GMVLBP2",21,0)
 . S $P(GMRLINE("P1"),"|",GMRNM)=$E($S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)_"          ",1,10)
"RTN","GMVLBP2",22,0)
 I GMRI="B" D  Q
"RTN","GMVLBP2",23,0)
 . S $P(GMRLINE(GMRI),"|",GMRNM)=$E(GMR(GMRI)_"          ",1,10)
"RTN","GMVLBP2",24,0)
 . S $P(GMRLINE("D"),"|",GMRNM)=$E($O(^TMP($J,"GMRVG","C",GMRDT,""))_$S($L(GMRSITE," ")>3:" "_$P(GMRSITE," "),1:"")_"          ",1,10)
"RTN","GMVLBP2",25,0)
 . S $P(GMRLINE("BQUAL"),"|",GMRNM)=$E($S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)_"          ",1,10)
"RTN","GMVLBP2",26,0)
 . S $P(GMRLINE("MAP"),"|",GMRNM)=$E($O(^TMP($J,"GMRVG","M",GMRDT,""))_"          ",1,10)
"RTN","GMVLBP2",27,0)
 K GI Q
"RTN","GMVLGQU")
0^247^B5673235
"RTN","GMVLGQU",1,0)
GMVLGQU ;HIOFO/YH,FT-UTILITY FOR LEGEND, PO2 AND QUALIFIER ;11/8/01  14:31
"RTN","GMVLGQU",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVLGQU",3,0)
 ;
"RTN","GMVLGQU",4,0)
 ; This routine uses the following IAs:
"RTN","GMVLGQU",5,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVLGQU",6,0)
 ;
"RTN","GMVLGQU",7,0)
LEGEND ;CREATE VITAL/QUALIFIER/SYNONYM LEGEND STORED IN GLINE LOCAL GLOBAL
"RTN","GMVLGQU",8,0)
 N I,X,J,K,G,B S (I,J,B)=0,(X,GLINE(1),GLINE(2),GLINE(3),GLINE(4),GLINE(5),GLINE)=""
"RTN","GMVLGQU",9,0)
 F G(1)="T","P","R","B","H","W","PO2","CG","CVP","PN" I $D(GMRQUAL(G(1))) D LEGEND1
"RTN","GMVLGQU",10,0)
 S J=J+1,GLINE(J)=X
"RTN","GMVLGQU",11,0)
 K ^UTILITY($J),DIWF,DIWL,WIWR Q
"RTN","GMVLGQU",12,0)
LEGEND1 ;
"RTN","GMVLGQU",13,0)
 S G=$S(G(1)="CG":"CIRC/GIRTH",G(1)="PO2":"PULSE OX",G(1)="B":"BP",G(1)="W":"WT",G(1)="H":"HT",G(1)="T":"TEMP",G(1)="P":"PULSE",G(1)="R":"RESP",G(1)="PN":"PAIN",1:G(1))_" - "
"RTN","GMVLGQU",14,0)
 S X=X_$S(B=0:"",1:"    ")_G S B=1 D:$L(X)>150 CUT D
"RTN","GMVLGQU",15,0)
 . S G="" F  S G=$O(GMRQUAL(G(1),G)) Q:G=""  S X=X_G_"  " I $L(X)>150 D CUT
"RTN","GMVLGQU",16,0)
 Q
"RTN","GMVLGQU",17,0)
CUT ;
"RTN","GMVLGQU",18,0)
 S DIWF="",DIWL=0,DIWR=$S(+$G(GLPRNTR):120,1:150) K ^UTILITY($J) D ^DIWP
"RTN","GMVLGQU",19,0)
 S I=+$P(^UTILITY($J,"W",0),"^")
"RTN","GMVLGQU",20,0)
 S J=J+1,GLINE(J)=$G(^UTILITY($J,"W",0,1,0)),X=$G(^UTILITY($J,"W",0,2,0))
"RTN","GMVLGQU",21,0)
 K ^UTILITY($J)
"RTN","GMVLGQU",22,0)
 Q
"RTN","GMVLGQU",23,0)
SYNOARY ;
"RTN","GMVLGQU",24,0)
 K GG S GG=$L(GMRSITE(1),";") F GG(1)=1:1:GG S GG(2)=$P(GMRSITE(1),";",GG(1)) S GG(3)=$O(^GMRD(120.52,"B",GG(2),0)) D:GG(3)>0
"RTN","GMVLGQU",25,0)
 . S GMRSITE=GMRSITE_$S(GMRSITE="":"",1:" "),GSYNO=""
"RTN","GMVLGQU",26,0)
 . I $P($G(^GMRD(120.52,GG(3),0)),"^",2)'="" S GSYNO=$P(^(0),"^",2)
"RTN","GMVLGQU",27,0)
 . E  S GCHA=GG(2) D
"RTN","GMVLGQU",28,0)
 . . I GCHA["-" S GCHA=$P(GCHA,"-")_" "_$P(GCHA,"-",2)
"RTN","GMVLGQU",29,0)
 . . I $L(GCHA," ")<2 S GSYNO=$E(GCHA)_$$LOW^XLFSTR($E(GCHA,2,3))
"RTN","GMVLGQU",30,0)
 . . E  S GLEN=$L(GCHA," ") F I=1:1:GLEN S GSYNO=GSYNO_$S($E($P(GCHA," ",I))'="(":$E($P(GCHA," ",I)),1:"")
"RTN","GMVLGQU",31,0)
 . I GG(2)'="" S GG(2)=$E(GG(2))_$$LOW^XLFSTR($E(GG(2),2,30))
"RTN","GMVLGQU",32,0)
 . S GMRSITE=GMRSITE_GSYNO S:GI'="C" GMRQUAL(GI,GSYNO_": "_GG(2))="" K GLEN
"RTN","GMVLGQU",33,0)
 Q
"RTN","GMVLGQU",34,0)
PO2(X) ;
"RTN","GMVLGQU",35,0)
 I X="" Q
"RTN","GMVLGQU",36,0)
 I X["%" D
"RTN","GMVLGQU",37,0)
 . S X(2)=$P(X,"%")
"RTN","GMVLGQU",38,0)
 . I X(2)["l/min" S X(2)=$P(X(2),"l/min",2)
"RTN","GMVLGQU",39,0)
 I X["l/min" D
"RTN","GMVLGQU",40,0)
 . S X(1)=$P(X,"l/min")
"RTN","GMVLGQU",41,0)
 . I X(1)["%" S X(1)=$P(X(1),"%",2)
"RTN","GMVLGQU",42,0)
 S X(1)=$$STRIP^XLFSTR(X(1)," "),X(2)=$$STRIP^XLFSTR(X(2)," ")
"RTN","GMVLGQU",43,0)
 Q
"RTN","GMVLPO0")
0^248^B16903360
"RTN","GMVLPO0",1,0)
GMVLPO0 ;HIOFO/YH,FT-DOT MATRIX OXIMETRY/RESP. GRAPH - DATA ARRAY ;11/6/01  15:43
"RTN","GMVLPO0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVLPO0",3,0)
 ;
"RTN","GMVLPO0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVLPO0",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVLPO0",6,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVLPO0",7,0)
 ;
"RTN","GMVLPO0",8,0)
EN1 ;ENTRY POINT FROM GMVSR0 TO PRINT PO2/RESP. GRAPH FOR LINE PRINTER
"RTN","GMVLPO0",9,0)
 S GMROUT=0 K ^TMP($J,"GMRVG"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GTNM")
"RTN","GMVLPO0",10,0)
 D DEM^VADPT,INP^VADPT S GMRBTH=$P(VADM(3),"^",2),GMRNAM=VADM(1)
"RTN","GMVLPO0",11,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMVLPO0",12,0)
 F GTYPE="PO2","R","P" D SETT^GMVHPO0
"RTN","GMVLPO0",13,0)
 F GMRK="PO2","R","P" D GMRDT
"RTN","GMVLPO0",14,0)
 K GMRVD F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  D PULSE
"RTN","GMVLPO0",15,0)
 F GMRDT=0:0 S GMRDT=$O(GMRVD(GMRDT)) Q:GMRDT'>0  K ^TMP($J,"GMRDT",GMRDT)
"RTN","GMVLPO0",16,0)
 S (GMRTNM,GMRI)=0 I $D(^TMP($J,"GMRDT")) F  S GMRI=$O(^TMP($J,"GMRDT",GMRI)) Q:GMRI'>0  S GMRTNM=GMRTNM+1
"RTN","GMVLPO0",17,0)
 U IO D GRAPH
"RTN","GMVLPO0",18,0)
Q1 K Z,GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I,GMRVD D KVAR^VADPT K VA,VAROOT
"RTN","GMVLPO0",19,0)
 K GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMVLPO0",20,0)
 K GLPRNTR,GMRESP,GMRPO2,GMRR,GMRRHI,GMRRLO,GMRROFF,GMRY,GP,GR,GMRQUAL,GLINE,^TMP($J,"GTNM") Q
"RTN","GMVLPO0",21,0)
GRAPH ;
"RTN","GMVLPO0",22,0)
 S:'$D(GFLAG) GFLAG=0 S GMRPGC=0,GMRX1="" F X=1:1:10 S GMRX1=GMRX1_"          "_"|"
"RTN","GMVLPO0",23,0)
 S (GMRX,GMRX2)=GMRX1 F X=1:1:10 S $P(GMRX,"|",X)="__________",$P(GMRX2,"|",X)="----------"
"RTN","GMVLPO0",24,0)
 S GMRPG=$S(GMRTNM=0:1,1:GMRTNM\10+$S(GMRTNM#10>0:1,1:0)) F GMRPGS=1:1:GMRPG S GMRPO2=105.666,GMRPO2(1)=100,GMRESP=45.666,GMRESP(1)=40,GMRY=9 D PAGE Q:GMROUT  ;PO2 AND RESPIRATION VALUES WHEN $Y=1
"RTN","GMVLPO0",25,0)
 Q
"RTN","GMVLPO0",26,0)
PAGE ;
"RTN","GMVLPO0",27,0)
 K GMRQUAL W:'($E(IOST)'="C"&'GFLAG) @IOF S GFLAG=1,GMRPGC=GMRPGC+1 W !
"RTN","GMVLPO0",28,0)
 I '$D(^TMP($J,"GMRVG")) W !!!!!!!!,?5,"THERE  IS  NO  DATA  FOR  THIS  REPORT" X "F Y=$Y:1:(IOSL-6) W !" D FOOTER^GMVLPO2 Q
"RTN","GMVLPO0",29,0)
 W ! D DATES^GMVVS2 W !," Pulse Ox. Resp.",?17,"|",?18,GMRX
"RTN","GMVLPO0",30,0)
 F GMRI=0:0 Q:$Y>61  W ! D SETHD^GMVLPO1 W ?8,GMRHDR10,?16,$S(GMR3:"-",1:" "),?17,"|" D DATAPRT^GMVLPO1
"RTN","GMVLPO0",31,0)
 W !,?17,"|",GMRX2 F GMRI="R","PO2","OX1","OX2","OX3","P","P1" S GMRLINE(GMRI)=GMRX1
"RTN","GMVLPO0",32,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>10  F GMRI="PO2","R","P" D:$D(^TMP($J,"GMRVG",GMRI,GMRDT)) STLNP^GMVLPO2
"RTN","GMVLPO0",33,0)
 F GMRI="R","PO2","OX1","OX2","OX3","P","P1" D
"RTN","GMVLPO0",34,0)
 .S G=$S(GMRI="R":"Respiration",GMRI="PO2":"Pulse Ox.",GMRI="OX1":"  L/Min",GMRI="OX2":"  %",GMRI="OX3":"  Method",GMRI="P":"Pulse",1:"")
"RTN","GMVLPO0",35,0)
 . W !,G,?17,"|",GMRLINE(GMRI)
"RTN","GMVLPO0",36,0)
 I 'GMROUT W !,?17,$$REPEAT^XLFSTR("-",111)
"RTN","GMVLPO0",37,0)
 W !,"R: Respiration     POx: Pulse Oximetry     * - Abnormal value     ** - Abnormal value off of graph"
"RTN","GMVLPO0",38,0)
 W ! I $D(GMRQUAL) S GLPRNTR=1 D LEGEND^GMVLGQU F I=1:1:5 W !,GLINE(I)
"RTN","GMVLPO0",39,0)
 I IOSL'<($Y+10) F X=1:1 W ! Q:IOSL<($Y+10)
"RTN","GMVLPO0",40,0)
 D FOOTER^GMVLPO2 S GMRDT="" F GMRNM=1:1:10 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  K ^TMP($J,"GMRDT",GMRDT)
"RTN","GMVLPO0",41,0)
 K GG,GI,GMRVJ,GSYNO Q
"RTN","GMVLPO0",42,0)
GMRDT S GMRTNM(GMRK)=0 F GMRI=0:0 S GMRI=$O(^TMP($J,"GMRVG",GMRK,GMRI)) Q:GMRI'>0  S GMRJ="" F X=0:0 S GMRJ=$O(^TMP($J,"GMRVG",GMRK,GMRI,GMRJ)) Q:GMRJ=""  S GMRTNM(GMRK)=GMRTNM(GMRK)+1 S:GMRK'="XI1" ^TMP($J,"GMRDT",GMRI)=""
"RTN","GMVLPO0",43,0)
 Q
"RTN","GMVLPO0",44,0)
PULSE ; Process Apical, Brachial, and Radial Pulses
"RTN","GMVLPO0",45,0)
 N GMRP,GMRVPS,GMRVPO,GMRVR
"RTN","GMVLPO0",46,0)
 S GMRP=$O(^TMP($J,"GMRVG","P",GMRDT,"")) Q:GMRP=""
"RTN","GMVLPO0",47,0)
 S GMRVPS=$P($G(^TMP($J,"GMRVG","P",GMRDT,GMRP)),"^",1)
"RTN","GMVLPO0",48,0)
 I GMRVPS'["APICAL",(GMRVPS'["RADIAL"),(GMRVPS'["BRACHIAL") S GMRVD(GMRDT)=""
"RTN","GMVLPO0",49,0)
 S GMRVPO=$O(^TMP($J,"GMRVG","PO2",GMRDT,""))
"RTN","GMVLPO0",50,0)
 S GMRVR=$O(^TMP($J,"GMRVG","R",GMRDT,""))
"RTN","GMVLPO0",51,0)
 I GMRVPO="",(GMRVR="") Q
"RTN","GMVLPO0",52,0)
 K GMRVD(GMRDT)
"RTN","GMVLPO0",53,0)
 Q
"RTN","GMVLPO1")
0^249^B4608773
"RTN","GMVLPO1",1,0)
GMVLPO1 ;HIOFO/YH,FT-DOT MATRIX PULSE OXIMETRY AND RESPIRATION GRAPH ;11/6/01  15:44
"RTN","GMVLPO1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVLPO1",3,0)
 ;
"RTN","GMVLPO1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVLPO1",5,0)
 ; <None>
"RTN","GMVLPO1",6,0)
 ;
"RTN","GMVLPO1",7,0)
SETHD ;
"RTN","GMVLPO1",8,0)
 ;GMRPO2 - PO2 VALUE WHEN $Y=1 GMRPO2(1) - LABEL
"RTN","GMVLPO1",9,0)
 ;GMRY - $Y FOR LABEL
"RTN","GMVLPO1",10,0)
 ;GMRESP - RESPIRATION VALUE WHEN $Y=1 GMRESP(1) - LABEL
"RTN","GMVLPO1",11,0)
 S GMR3=(($Y/3)=($Y\3)),GMRPHI=GMRPO2-(($Y-1)*0.666),GMRPLO=GMRPHI-0.666
"RTN","GMVLPO1",12,0)
 S GMRRHI=GMRESP-(($Y-1)*0.666),GMRRLO=GMRRHI-0.666
"RTN","GMVLPO1",13,0)
 S GMRHDR10=$S($Y=GMRY&(GMRPO2(1)>62)&($Y>5)&($Y<66):$E(GMRPO2(1)_"  ",1,4)_GMRESP(1),1:"")
"RTN","GMVLPO1",14,0)
 I $Y=GMRY S GMRY=GMRY+3,GMRPO2(1)=GMRPO2(1)-2,GMRESP(1)=GMRESP(1)-2
"RTN","GMVLPO1",15,0)
 Q
"RTN","GMVLPO1",16,0)
DATAPRT ;
"RTN","GMVLPO1",17,0)
 S GMRLINE=GMRX1
"RTN","GMVLPO1",18,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  D SETLINE Q:GMRNM=10
"RTN","GMVLPO1",19,0)
 W GMRLINE
"RTN","GMVLPO1",20,0)
 Q
"RTN","GMVLPO1",21,0)
SETLINE ;
"RTN","GMVLPO1",22,0)
 S GMRNM=GMRNM+1,GMROLD=$P(GMRLINE,"|",GMRNM)
"RTN","GMVLPO1",23,0)
 S (GP,GMRP)=$O(^TMP($J,"GMRVG","PO2",GMRDT,"")) S:GMRP="0" GP=.1
"RTN","GMVLPO1",24,0)
 S (GR,GMRR)=$O(^TMP($J,"GMRVG","R",GMRDT,""))
"RTN","GMVLPO1",25,0)
 ;S:GMRR="0" GR=.1
"RTN","GMVLPO1",26,0)
 S GMRPOFF=($Y=6&(+GP>101))!($Y=62&(+GP<65)),GMRROFF=($Y=6&(+GR>41))!($Y=62&(+GR<5))
"RTN","GMVLPO1",27,0)
 S GMROLD=$S(+GP>0&(+GP'<GMRPLO&(+GP'>GMRPHI)!GMRPOFF):"POx"_$S('$P(^TMP($J,"GMRVG","PO2",GMRDT,GMRP),"^",2):" ",1:"*")_$S('GMRPOFF:" ",1:"*")_$E(GMROLD,4,10),1:GMROLD)
"RTN","GMVLPO1",28,0)
 S GMROLD=$E(GMROLD,1,5)_$S(GR>0&(+GR'<GMRRLO&(+GR'>GMRRHI)!GMRROFF):"R"_$S('$P(^TMP($J,"GMRVG","R",GMRDT,GMRR),"^",2):" ",1:"*")_$S('GMRROFF:" ",1:"*")_$E(GMROLD,9,10),1:$E(GMROLD,6,10))
"RTN","GMVLPO1",29,0)
 S $P(GMRLINE,"|",GMRNM)=GMROLD
"RTN","GMVLPO1",30,0)
 Q
"RTN","GMVLPO2")
0^250^B8392956
"RTN","GMVLPO2",1,0)
GMVLPO2 ;HIOFO/YH,FT-DOT MATRIX HIOFO/YH-PULSE OX. AND RESPIRATION DATA ;9/30/02  15:16
"RTN","GMVLPO2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVLPO2",3,0)
 ;
"RTN","GMVLPO2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVLPO2",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVLPO2",6,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVLPO2",7,0)
 ;
"RTN","GMVLPO2",8,0)
FOOTER ;PRINT FOOTER
"RTN","GMVLPO2",9,0)
 W ! W:GMRNAM'="" ?$X-3,$E(GMRNAM,1,35) W "   "_$P($G(VADM(2)),"^",2)_"   "_$P($G(VADM(3)),"^",2)_"   "_$P($G(VADM(4)),"^")_" YRS   "_$P($G(VADM),"^",2)
"RTN","GMVLPO2",10,0)
 W ?95,"MEDICAL RECORD" W !,"Unit: "_$S(GMRWARD(1)'="":GMRWARD(1),1:"     "),"   "_"Room: "_$S($P(VAIN(5),"^")'="":$P($P(VAIN(5),"^"),"-",1,2),1:"    "),?95,"Pulse Oximetry/Respiration Graph"
"RTN","GMVLPO2",11,0)
 D INP^VADPT S GMRVHLOC=$$HOSPLOC^GMVUTL1(+$G(VAIN(4)))
"RTN","GMVLPO2",12,0)
 W !,"Division: "_$$DIVISION^GMVUTL1(+GMRVHLOC),?55,"Page "_GMRPGC,?95,"SF 512",!
"RTN","GMVLPO2",13,0)
 W GSTRFIN Q
"RTN","GMVLPO2",14,0)
STLNP ;
"RTN","GMVLPO2",15,0)
 S GMR(GMRI)=$O(^TMP($J,"GMRVG",GMRI,GMRDT,"")) Q:GMR(GMRI)=""
"RTN","GMVLPO2",16,0)
 N GMRVOK S (GMRSITE,GMRSITE(1),GMRINF,GMRVJ)="",GMRVOK=0
"RTN","GMVLPO2",17,0)
 S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GMRI,GMRDT,GMR(GMRI))),"^"),GMRSITE(2)=$P($G(^(GMR(GMRI))),"^",3),GMRINF=$P($G(^(GMR(GMRI))),"^",4)
"RTN","GMVLPO2",18,0)
 I GMRSITE(1)'="" D  Q:GMRVOK
"RTN","GMVLPO2",19,0)
 .I GMRI="P",(GMRSITE(1)'["RADIAL"),(GMRSITE(1)'["APICAL"),(GMRSITE(1)'["BRACHIAL") S GMRVOK=1 Q
"RTN","GMVLPO2",20,0)
 .S GI=GMRI D SYNOARY^GMVLGQU
"RTN","GMVLPO2",21,0)
 .Q
"RTN","GMVLPO2",22,0)
 S GI=$S(GMR(GMRI)>0&(GMRI="PO2"):$J(GMR(GMRI),0,1),1:GMR(GMRI))
"RTN","GMVLPO2",23,0)
 I "UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GMR(GMRI)) S GI=GI_$S($P(^TMP($J,"GMRVG",GMRI,GMRDT,GMR(GMRI)),"^",2)'=1:" ",1:"*")
"RTN","GMVLPO2",24,0)
 S $P(GMRLINE(GMRI),"|",GMRNM)=$E(GI_$S(GMRI="R":GMRSITE,GMRI="P"&($L(GMRSITE," ")>3):$P(GMRSITE," "),1:"")_"          ",1,10)
"RTN","GMVLPO2",25,0)
 I GMRI="P" S $P(GMRLINE("P1"),"|",GMRNM)=$E($S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)_"          ",1,10)
"RTN","GMVLPO2",26,0)
 D SETLN
"RTN","GMVLPO2",27,0)
 I GMRI="PO2",$D(GMRLINE("OX1")) D
"RTN","GMVLPO2",28,0)
 . S $P(GMRLINE("OX3"),"|",GMRNM)=$E(GMRSITE_"          ",1,10)
"RTN","GMVLPO2",29,0)
 . S GMRINF=$P(^TMP($J,"GMRVG",GMRI,GMRDT,GMR(GMRI)),"^",4),(GMRINF(1),GMRINF(2))="" D
"RTN","GMVLPO2",30,0)
 . . I GMRINF="" S $P(GMRLINE("OX1"),"|",GMRNM)="          ",$P(GMRLINE("OX2"),"|",GMRNM)="          "
"RTN","GMVLPO2",31,0)
 . . E  D PO2^GMVLGQU(.GMRINF) S $P(GMRLINE("OX1"),"|",GMRNM)=$E(GMRINF(1)_"          ",1,10),$P(GMRLINE("OX2"),"|",GMRNM)=$E(GMRINF(2)_"          ",1,10)
"RTN","GMVLPO2",32,0)
 K GI Q
"RTN","GMVLPO2",33,0)
SETLN ;
"RTN","GMVLPO2",34,0)
 S GVAR(GMRI)=""
"RTN","GMVLPO2",35,0)
 I GMRI="PO2" S (GVAR("PO2"),GVAR("OX1"),GVAR("OX2"),GVAR("OX3"))="" Q
"RTN","GMVLPO2",36,0)
 Q
"RTN","GMVLWT0")
0^251^B6542672
"RTN","GMVLWT0",1,0)
GMVLWT0 ;HIOFO/YH,FT-DOT MATRIX WEIGHT GRAPH - DATA ARRAY ;6/17/02  15:58
"RTN","GMVLWT0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVLWT0",3,0)
 ;
"RTN","GMVLWT0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVLWT0",5,0)
 ; #10061  ^VADPT calls            (supported)
"RTN","GMVLWT0",6,0)
 ;
"RTN","GMVLWT0",7,0)
EN1 ;
"RTN","GMVLWT0",8,0)
 K ^TMP($J,"GMRVG"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GTNM"),GWT
"RTN","GMVLWT0",9,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMVLWT0",10,0)
 F GTYPE="H","W" D SETT
"RTN","GMVLWT0",11,0)
 F I=1:1:8 S GWT(I)=""
"RTN","GMVLWT0",12,0)
 I $G(GWT)>0 S GWT=GWT\10*10+30,J=0 F I=1:1:8 S GWT(I)=GWT-(10*J),J=J+1,GWT(I)=GWT(I)_"/"_$J(GWT(I)/2.2,0,2)
"RTN","GMVLWT0",13,0)
 E  S GWT=""
"RTN","GMVLWT0",14,0)
 U IO D ^GMVLWT1
"RTN","GMVLWT0",15,0)
Q1 K Z,GPG,GPGS,GAGE,GTYP,GTYPE,GX,GCNTD,GDATA,GDOB,GDT1,GEN,GI,GJ,GK,GMRVJ,GTNM,GWT,GINI,GMVDIAG,GMVDOB,GMVGEN,GMVNM,GSTART1,GEND1 D KVAR^VADPT K VA,VAROOT
"RTN","GMVLWT0",16,0)
 K ^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM")
"RTN","GMVLWT0",17,0)
 Q
"RTN","GMVLWT0",18,0)
SETT S GTYP=$O(^GMRD(120.51,"B",$S(GTYPE="W":"WEIGHT",1:"HEIGHT"),""))
"RTN","GMVLWT0",19,0)
 I GTYP>0 F GX=GSTART1:0 S GX=$O(^GMR(120.5,"AA",DFN,GTYP,GX)) Q:GX>GEND1!(GX'>0)  F GEN=0:0 S GEN=$O(^GMR(120.5,"AA",DFN,GTYP,GX,GEN)) Q:GEN'>0  I '$D(^GMR(120.5,GEN,2)) D BLDARR
"RTN","GMVLWT0",20,0)
 Q
"RTN","GMVLWT0",21,0)
BLDARR ;
"RTN","GMVLWT0",22,0)
 S GDATA=$S($D(^GMR(120.5,GEN,0)):^(0),1:"")
"RTN","GMVLWT0",23,0)
 Q:$P(GDATA,U,8)=""  ;corrupted record
"RTN","GMVLWT0",24,0)
 K GMRVARY S GMRVARY="" I $P($G(^GMR(120.5,GEN,5,0)),"^",4)>0 D CHAR^GMVCHAR(GEN,.GMRVARY,GTYP)
"RTN","GMVLWT0",25,0)
 K GG S GG="" I $O(GMRVARY(0)) D
"RTN","GMVLWT0",26,0)
 . S GG(1)=0 F  S GG(1)=$O(GMRVARY(GG(1))) Q:GG(1)'>0  S GG(2)=0 F  S GG(2)=$O(GMRVARY(GG(1),GG(2))) Q:GG(2)'>0  S GG(3)="" F  S GG(3)=$O(GMRVARY(GG(1),GG(2),GG(3))) Q:GG(3)=""  S GG=GG_$S(GG="":"",1:";")_GG(3)
"RTN","GMVLWT0",27,0)
 S ^TMP($J,"GMRVG",GTYPE,9999999-GX,$P(GDATA,"^",8))=GG_"^"_$S($G(GMRVX(1))>0:1,1:"")_"^^"_$P(GDATA,"^",8)
"RTN","GMVLWT0",28,0)
 I $P(GDATA,"^",8)>0 S GDATA(0)=$P(GDATA,"^",8) S:GTYPE="W" GWT=GDATA(0)
"RTN","GMVLWT0",29,0)
 Q 
"RTN","GMVLWT1")
0^252^B12430375
"RTN","GMVLWT1",1,0)
GMVLWT1 ;HIOFO/YH,FT-DOT MATRIX PATIENT WEIGHT GRAPH - 2 ;11/6/01  15:31
"RTN","GMVLWT1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVLWT1",3,0)
 ;
"RTN","GMVLWT1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVLWT1",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVLWT1",6,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVLWT1",7,0)
 ;
"RTN","GMVLWT1",8,0)
VAF ;WEIGHT GRAPH
"RTN","GMVLWT1",9,0)
 D DEM^VADPT,INP^VADPT S GMRBTH=$P(VADM(3),"^",2),GMRNAM=VADM(1)
"RTN","GMVLWT1",10,0)
 F GMRK="W","H" D GMRDT
"RTN","GMVLWT1",11,0)
 S (GMRTNM,GMRI)=0 I $D(^TMP($J,"GMRDT")) F  S GMRI=$O(^TMP($J,"GMRDT",GMRI)) Q:GMRI'>0  S GMRTNM=GMRTNM+1
"RTN","GMVLWT1",12,0)
 D GRAPH K GMR3,GMRDAT,GMREN,GMRHDR1,GMRHDR11,GMRHDR10,GMRHDR2,GMRHT,GMRI,GMRJ,GMRK,GMRLINE,GDATA,GMROLD,GMRW,GMRWDIF,GMRPG,GMRPGC,GMRPGS,GMRWHI,GMRWLO,GMRWOFF,GMRSITE,GMRTNM
"RTN","GMVLWT1",13,0)
 K GMRWT,GLPRNTR,GMRTY,GMRNM,GMRVX,GMRVX1,GMRVX2,^TMP($J,"GMRDT"),^TMP($J,"GMRG"),^TMP($J,"GMRVG")
"RTN","GMVLWT1",14,0)
 Q
"RTN","GMVLWT1",15,0)
GRAPH ;
"RTN","GMVLWT1",16,0)
 S:'$D(GFLAG) GFLAG=0 S GMRPGC=0,GMRX1="" F X=1:1:10 S GMRX1=GMRX1_"          "_"|"
"RTN","GMVLWT1",17,0)
 S (GMRX,GMRX2)=GMRX1 F X=1:1:10 S $P(GMRX,"|",X)="__________",$P(GMRX2,"|",X)="----------"
"RTN","GMVLWT1",18,0)
 S GMRPG=$S(GMRTNM=0:1,1:GMRTNM\10+$S(GMRTNM#10>0:1,1:0)) F GMRPGS=1:1:GMRPG S GMRWT=$G(GWT(1))+14.165,GMRWT(1)=9,GMRWT(2)=1 D PAGE Q:GMROUT  ;GMRWT = WEIGHT VALUE WHEN $Y=1
"RTN","GMVLWT1",19,0)
 Q
"RTN","GMVLWT1",20,0)
PAGE ;
"RTN","GMVLWT1",21,0)
 K GMRQUAL W:'($E(IOST)'="C"&'GFLAG) @IOF S GFLAG=1,GMRPGC=GMRPGC+1 W !
"RTN","GMVLWT1",22,0)
 I '$D(^TMP($J,"GMRVG")) W !!!!!!!!,?5,"THERE  IS  NO  DATA  FOR  THIS  PERIOD" X "F Y=$Y:1:(IOSL-6) W !" D FOOTER^GMVLWT3 Q
"RTN","GMVLWT1",23,0)
 W ! D DATES^GMVVS2 W !,?6,"Pounds/Kgs",?17,"|",?18,GMRX
"RTN","GMVLWT1",24,0)
 F GMRI=0:0 Q:$Y>55  W ! D SETHD^GMVLWT2 W ?5,GMRHDR10,?16,$S(GMR3:"-",1:""),?17,"|" D DATAPRT^GMVLWT2
"RTN","GMVLWT1",25,0)
 W !,?17,"|",GMRX2 F GMRI="W","W1","WQUAL","H","H1","HQUAL","BMI" S GMRLINE(GMRI)=GMRX1
"RTN","GMVLWT1",26,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>10  F GMRI="W","H" D:$D(^TMP($J,"GMRVG",GMRI,GMRDT)) STLNP^GMVLWT3
"RTN","GMVLWT1",27,0)
 F GMRI="W","W1","WQUAL","BMI","H","H1","HQUAL" D
"RTN","GMVLWT1",28,0)
 .S G=$S(GMRI="W":"Weight (lb)",GMRI="W1":"       (kg)",GMRI="WQUAL":"Qualifier",GMRI="H":"Height (in)",GMRI="H1":"       (cm)",GMRI="HQUAL":"Qualifier",GMRI="BMI":"Body Mass Index",1:"")
"RTN","GMVLWT1",29,0)
 . W !,G,?17,"|",GMRLINE(GMRI)
"RTN","GMVLWT1",30,0)
 I 'GMROUT W !,?17,$$REPEAT^XLFSTR("-",111)
"RTN","GMVLWT1",31,0)
 W !,"W: Weight     ** - Abnormal value off of graph"
"RTN","GMVLWT1",32,0)
 W ! I $D(GMRQUAL) S GLPRNTR=1 D LEGEND^GMVLGQU F I=1:1:5 W !,GLINE(I)
"RTN","GMVLWT1",33,0)
 I IOSL'<($Y+10) F X=1:1 W ! Q:IOSL<($Y+10)
"RTN","GMVLWT1",34,0)
 D FOOTER^GMVLWT3 S GMRDT="" F GMRNM=1:1:10 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  K ^TMP($J,"GMRDT",GMRDT)
"RTN","GMVLWT1",35,0)
 K GG,GI,GMRVJ,GSYNO Q
"RTN","GMVLWT1",36,0)
GMRDT S GMRTNM(GMRK)=0 F GMRI=0:0 S GMRI=$O(^TMP($J,"GMRVG",GMRK,GMRI)) Q:GMRI'>0  S GMRJ="" F X=0:0 S GMRJ=$O(^TMP($J,"GMRVG",GMRK,GMRI,GMRJ)) Q:GMRJ=""  S GMRTNM(GMRK)=GMRTNM(GMRK)+1 S:GMRK'="XI1" ^TMP($J,"GMRDT",GMRI)=""
"RTN","GMVLWT1",37,0)
 Q
"RTN","GMVLWT2")
0^253^B2265423
"RTN","GMVLWT2",1,0)
GMVLWT2 ;HIOFO/YH,FT-DOT MATRIX WEIGHT GRAPH - 3 ;11/6/01  15:32
"RTN","GMVLWT2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVLWT2",3,0)
 ;
"RTN","GMVLWT2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVLWT2",5,0)
 ; <None>
"RTN","GMVLWT2",6,0)
 ;
"RTN","GMVLWT2",7,0)
SETHD ;
"RTN","GMVLWT2",8,0)
 ;GMRWT = WEIGHT VALUE WHEN $Y=1
"RTN","GMVLWT2",9,0)
 ;GMRWT(1) = $Y
"RTN","GMVLWT2",10,0)
 ;GMRWT(2) = GWT LOCAL GLOBAL COUNT
"RTN","GMVLWT2",11,0)
 S GMRWHI=GMRWT-(($Y-1)*1.666),GMRWLO=GMRWHI-1.666
"RTN","GMVLWT2",12,0)
 S GMR3=(($Y/3)=($Y\3))
"RTN","GMVLWT2",13,0)
 S GMRHDR10=$S($Y>5&GMR3&($Y<57)&($Y'=GMRWT(1)):"        5",$Y=GMRWT(1)&(GMRWT(2)<9):GWT(GMRWT(2)),1:"")
"RTN","GMVLWT2",14,0)
 I $Y=GMRWT(1) S GMRWT(1)=GMRWT(1)+6,GMRWT(2)=GMRWT(2)+1
"RTN","GMVLWT2",15,0)
 Q
"RTN","GMVLWT2",16,0)
DATAPRT ;
"RTN","GMVLWT2",17,0)
 S GMRLINE=GMRX1
"RTN","GMVLWT2",18,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  D SETLINE Q:GMRNM=10
"RTN","GMVLWT2",19,0)
 W GMRLINE
"RTN","GMVLWT2",20,0)
 Q
"RTN","GMVLWT2",21,0)
SETLINE ;
"RTN","GMVLWT2",22,0)
 S GMRNM=GMRNM+1,GMROLD=$P(GMRLINE,"|",GMRNM),GMRW=$O(^TMP($J,"GMRVG","W",GMRDT,""))
"RTN","GMVLWT2",23,0)
 S GMRWOFF=($Y=6&(+GMRW>(GWT(1)+5)))!($Y=56&(+GMRW<(GWT(8)-7)))
"RTN","GMVLWT2",24,0)
 S GMROLD=$E($S(+GMRW>0&(+GMRW'<GMRWLO&(+GMRW'>GMRWHI)!GMRWOFF):"W"_$S('GMRWOFF:" ",1:"**"),1:"")_"          ",1,10)
"RTN","GMVLWT2",25,0)
 S $P(GMRLINE,"|",GMRNM)=GMROLD
"RTN","GMVLWT2",26,0)
 Q
"RTN","GMVLWT3")
0^254^B6391095
"RTN","GMVLWT3",1,0)
GMVLWT3 ;HIOFO/YH,FT-DOT MATRIX PATIENT WEIGHT GRAPH - 4 ;9/30/02  15:18
"RTN","GMVLWT3",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVLWT3",3,0)
 ;
"RTN","GMVLWT3",4,0)
 ; This routine uses the following IAs:
"RTN","GMVLWT3",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVLWT3",6,0)
 ;
"RTN","GMVLWT3",7,0)
FOOTER ;PRINT VITAL SIGNS-I/O SHEET FOOTER
"RTN","GMVLWT3",8,0)
 W ! W:GMRNAM'="" ?$X-3,$E(GMRNAM,1,35) W "   "_$P($G(VADM(2)),"^",2)_"   "_$P($G(VADM(3)),"^",2)_"   "_$P($G(VADM(4)),"^")_" YRS   "_$P($G(VADM),"^",2)
"RTN","GMVLWT3",9,0)
 W ?95,"MEDICAL RECORD" W !,"Unit: "_$S(GMRWARD(1)'="":GMRWARD(1),1:"     "),"   "_"Room: "_$S($P(VAIN(5),"^")'="":$P($P(VAIN(5),"^"),"-",1,2),1:"    "),?95,"WEIGHT CHART"
"RTN","GMVLWT3",10,0)
 D INP^VADPT S GMRVHLOC=$$HOSPLOC^GMVUTL1(+$G(VAIN(4)))
"RTN","GMVLWT3",11,0)
 W !,"Division: "_$$DIVISION^GMVUTL1(+GMRVHLOC),?55,"Page "_GMRPGC,?95,"VAF 10-2614f",!
"RTN","GMVLWT3",12,0)
 W GSTRFIN Q
"RTN","GMVLWT3",13,0)
STLNP ;
"RTN","GMVLWT3",14,0)
 S GMR(GMRI)=$O(^TMP($J,"GMRVG",GMRI,GMRDT,"")) Q:GMR(GMRI)=""
"RTN","GMVLWT3",15,0)
 S (GMRSITE,GMRSITE(1),GMRINF,GMRVJ)=""
"RTN","GMVLWT3",16,0)
 S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GMRI,GMRDT,GMR(GMRI))),"^"),GMRSITE(2)=$P($G(^(GMR(GMRI))),"^",3),GMRINF=$P($G(^(GMR(GMRI))),"^",4) I GMRSITE(1)'="" S GI=GMRI D SYNOARY^GMVLGQU
"RTN","GMVLWT3",17,0)
 I GMR(GMRI)>0 S GMR(GMRI)=$J(GMR(GMRI),0,2)
"RTN","GMVLWT3",18,0)
 S $P(GMRLINE(GMRI),"|",GMRNM)=$E(GMR(GMRI)_"          ",1,10)
"RTN","GMVLWT3",19,0)
 I GMRI="H" S:GMR(GMRI)>0 $P(GMRLINE("H1"),"|",GMRNM)=$E($J(GMR(GMRI)*2.54,0,2)_"          ",1,10),$P(GMRLINE("HQUAL"),"|",GMRNM)=$E(GMRSITE_"          ",1,10)
"RTN","GMVLWT3",20,0)
 I GMRI="W" S:GMR(GMRI)>0 $P(GMRLINE("W1"),"|",GMRNM)=$E($S(GMR(GMRI)>0:$J(GMR(GMRI)/2.2,0,2),1:GMR(GMRI))_"          ",1,10),$P(GMRLINE("WQUAL"),"|",GMRNM)=$E(GMRSITE_"          ",1,10)
"RTN","GMVLWT3",21,0)
 I GMRI="W",GMR(GMRI)>0 D
"RTN","GMVLWT3",22,0)
 . S GMRBMI="",GMRBMI(1)=GMRDT,GMRBMI(2)=GMR(GMRI) D CALBMI^GMVBMI(.GMRBMI)
"RTN","GMVLWT3",23,0)
 . S $P(GMRLINE("BMI"),"|",GMRNM)=$E(GMRBMI_"          ",1,10) K GMRBMI
"RTN","GMVLWT3",24,0)
 K GI Q
"RTN","GMVPAR")
0^281^B8679095
"RTN","GMVPAR",1,0)
GMVPAR ; HOIFO/DP - XPARameter RPC ; 31-MAY-2002 10:06:18
"RTN","GMVPAR",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVPAR",3,0)
 ; Integration Agreements:
"RTN","GMVPAR",4,0)
 ; IA# 2263 [Supported] XPAR parameter call.
"RTN","GMVPAR",5,0)
 ; IA# 2541 [Supported] Call to XUPARAM.
"RTN","GMVPAR",6,0)
 ;
"RTN","GMVPAR",7,0)
DELLST ; [Procedure] Delete list of parameters
"RTN","GMVPAR",8,0)
 D NDEL^XPAR(ENT,PAR,.ERR)
"RTN","GMVPAR",9,0)
 S:'$G(ERR) @RESULTS@(0)="1^All instances removed"
"RTN","GMVPAR",10,0)
 Q
"RTN","GMVPAR",11,0)
 ;
"RTN","GMVPAR",12,0)
DELPAR ; [Procedure] Delete single parameter value
"RTN","GMVPAR",13,0)
 D DEL^XPAR(ENT,PAR,INST,.ERR)
"RTN","GMVPAR",14,0)
 S:'$G(ERR) @RESULTS@(0)="1^Instance deleted"
"RTN","GMVPAR",15,0)
 Q
"RTN","GMVPAR",16,0)
 ;
"RTN","GMVPAR",17,0)
ENTVAL ; [Procedure] Return value of the entity
"RTN","GMVPAR",18,0)
 I ENT="SYS" S ENT=$$KSP^XUPARAM("WHERE")
"RTN","GMVPAR",19,0)
 E  I ENT="DIV" S ENT=$$GET1^DIQ(4,DUZ(2)_",",.01)
"RTN","GMVPAR",20,0)
 E  I ENT="USR" S ENT=$$GET1^DIQ(200,DUZ_",",.01)
"RTN","GMVPAR",21,0)
 E  S ENT=$$GET1^DIQ(+$P(ENT,"(",2),+ENT_",",.01)
"RTN","GMVPAR",22,0)
 S @RESULTS@(0)=ENT
"RTN","GMVPAR",23,0)
 Q
"RTN","GMVPAR",24,0)
 ;
"RTN","GMVPAR",25,0)
GETHDR ; [Procedure] Returns common header format
"RTN","GMVPAR",26,0)
 S X=$$FIND1^DIC(8989.51,,"QX",PAR)
"RTN","GMVPAR",27,0)
 I X S @RESULTS@(0)=X_";8989.51^"_PAR
"RTN","GMVPAR",28,0)
 E  S @RESULTS@(0)="-1^No such parameter ["_PAR_"]"
"RTN","GMVPAR",29,0)
 Q
"RTN","GMVPAR",30,0)
 ;
"RTN","GMVPAR",31,0)
GETLST ; [Procedure] Return all instances of a parameter
"RTN","GMVPAR",32,0)
 D GETLST^XPAR(.RET,ENT,PAR,"E",.ERR)
"RTN","GMVPAR",33,0)
 Q:$G(ERR,0)
"RTN","GMVPAR",34,0)
 S TMP="RET"
"RTN","GMVPAR",35,0)
 F  S TMP=$Q(@TMP) Q:TMP=""  D
"RTN","GMVPAR",36,0)
 .S @RESULTS@($O(@RESULTS@(""),-1)+1)=@TMP
"RTN","GMVPAR",37,0)
 S @RESULTS@(0)=$O(@RESULTS@(""),-1)
"RTN","GMVPAR",38,0)
 Q
"RTN","GMVPAR",39,0)
 ;
"RTN","GMVPAR",40,0)
GETPAR ; [Procedure] Returns external value of a parameter
"RTN","GMVPAR",41,0)
 S @RESULTS@(0)=$$GET^XPAR(ENT,PAR,INST,"E")
"RTN","GMVPAR",42,0)
 Q
"RTN","GMVPAR",43,0)
 ;
"RTN","GMVPAR",44,0)
GETWP ; [Procedure] Returns WP text for a parameter
"RTN","GMVPAR",45,0)
 D GETWP^XPAR(.RET,ENT,PAR,INST,.ERR)
"RTN","GMVPAR",46,0)
 Q:$G(ERR,0)
"RTN","GMVPAR",47,0)
 S TMP="RET"
"RTN","GMVPAR",48,0)
 F  S TMP=$Q(@TMP) Q:TMP=""  D
"RTN","GMVPAR",49,0)
 .S @RESULTS@($O(@RESULTS@(""),-1)+1)=@TMP
"RTN","GMVPAR",50,0)
 S @RESULTS@(0)=$O(@RESULTS@(""),-1)_U_INST
"RTN","GMVPAR",51,0)
 Q
"RTN","GMVPAR",52,0)
 ;
"RTN","GMVPAR",53,0)
RPC(RESULTS,OPTION,ENT,PAR,INST,VAL) ; [Procedure] Main RPC Hit Point
"RTN","GMVPAR",54,0)
 ; RPC: [GMV PARAMETER]
"RTN","GMVPAR",55,0)
 ;
"RTN","GMVPAR",56,0)
 ; Requires that the parameter name in PAR
"RTN","GMVPAR",57,0)
 ; be in the GMV namespace.
"RTN","GMVPAR",58,0)
 ;
"RTN","GMVPAR",59,0)
 ; Input parameters
"RTN","GMVPAR",60,0)
 ;  1. RESULTS [Literal/Required] No description
"RTN","GMVPAR",61,0)
 ;  2. OPTION [Literal/Required] No description
"RTN","GMVPAR",62,0)
 ;  3. ENT [Literal/Required] No description
"RTN","GMVPAR",63,0)
 ;  4. PAR [Literal/Required] No description
"RTN","GMVPAR",64,0)
 ;  5. INST [Literal/Required] No description
"RTN","GMVPAR",65,0)
 ;  6. VAL [Literal/Required] No description
"RTN","GMVPAR",66,0)
 ;
"RTN","GMVPAR",67,0)
 N ERR,TMP,RET,TXT,IEN,IENS,ROOT
"RTN","GMVPAR",68,0)
 S INST=$G(INST,1)
"RTN","GMVPAR",69,0)
 S PAR=$G(PAR,"GMV")
"RTN","GMVPAR",70,0)
 S RESULTS=$NA(^TMP($J)) K @RESULTS
"RTN","GMVPAR",71,0)
 I PAR'?1"GMV".E S ^TMP($J,0)="-1^Non Vitals Measurements Parameter" Q
"RTN","GMVPAR",72,0)
 D:$T(@OPTION)]"" @OPTION
"RTN","GMVPAR",73,0)
 I +$G(ERR) K @RESULTS S @RESULTS@(0)="-1^Error: "_(+ERR)_" "_$P(ERR,U,2)
"RTN","GMVPAR",74,0)
 I '$D(^TMP($J)) S @RESULTS@(0)="-1^No date returned"
"RTN","GMVPAR",75,0)
 D CLEAN^DILF
"RTN","GMVPAR",76,0)
 Q
"RTN","GMVPAR",77,0)
 ;
"RTN","GMVPAR",78,0)
SETLST ; [Procedure] Build list of parameters
"RTN","GMVPAR",79,0)
 N GMVINS ; Instance Counter
"RTN","GMVPAR",80,0)
 D DELLST(ENT,PAR)
"RTN","GMVPAR",81,0)
 S GMVINS=""
"RTN","GMVPAR",82,0)
 F  S GMVINS=$O(VAL(GMVINS)) Q:GMVINS=""  D
"RTN","GMVPAR",83,0)
 .D EN^XPAR(ENT,PAR,GMVINS,VAL(GMVINS),.ERR)
"RTN","GMVPAR",84,0)
 S:'$G(ERR) @RESULTS@(0)="1^List "_PAR_" rebuilt"
"RTN","GMVPAR",85,0)
 Q
"RTN","GMVPAR",86,0)
 ;
"RTN","GMVPAR",87,0)
SETPAR ; [Procedure] Set single value into a parameter
"RTN","GMVPAR",88,0)
 D EN^XPAR(ENT,PAR,INST,VAL,.ERR)
"RTN","GMVPAR",89,0)
 S:'$G(ERR) @RESULTS@(0)="1^Parameter updated"
"RTN","GMVPAR",90,0)
 Q
"RTN","GMVPAR",91,0)
 ;
"RTN","GMVPAR",92,0)
SETWP ; [Procedure] Set WP text into a parameter
"RTN","GMVPAR",93,0)
 S TXT=INST,TMP=""
"RTN","GMVPAR",94,0)
 F  S TMP=$O(VAL(TMP)) Q:TMP=""  D
"RTN","GMVPAR",95,0)
 .S TXT($O(TXT(""),-1)+1,0)=VAL(TMP)
"RTN","GMVPAR",96,0)
 D EN^XPAR(ENT,PAR,INST,.TXT,.ERR)
"RTN","GMVPAR",97,0)
 S:'$G(ERR) @RESULTS@(0)="1^WP Text Saved"
"RTN","GMVPAR",98,0)
 Q
"RTN","GMVPAR",99,0)
 ;
"RTN","GMVPCE3")
0^279^B11261200
"RTN","GMVPCE3",1,0)
GMVPCE3 ;HIOFO/RM,FT-V/M Data Validation for AICS ;2/5/02  15:19
"RTN","GMVPCE3",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVPCE3",3,0)
 ;
"RTN","GMVPCE3",4,0)
 ; This routine uses the following IAs:
"RTN","GMVPCE3",5,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVPCE3",6,0)
 ;
"RTN","GMVPCE3",7,0)
VALID(TYPE,X) ; This function returns 1 if rate (X) is valid for
"RTN","GMVPCE3",8,0)
 ; measurement type (TYPE).
"RTN","GMVPCE3",9,0)
 N FXN S FXN=0
"RTN","GMVPCE3",10,0)
 I TYPE="VU" S TYPE="VC"
"RTN","GMVPCE3",11,0)
 D @TYPE I $D(X) S FXN=1
"RTN","GMVPCE3",12,0)
 Q FXN
"RTN","GMVPCE3",13,0)
AG ; INPUT TRANSFORM FOR ABDOMINAL GIRTH
"RTN","GMVPCE3",14,0)
 N UNIT S UNIT=$$UP^XLFSTR($P(X,+X,2,10)) I UNIT="" K X Q
"RTN","GMVPCE3",15,0)
 S X=+X
"RTN","GMVPCE3",16,0)
 I $E(UNIT)="C"&("CM"[UNIT) S X=$$CMTOIN(+X,0),UNIT="IN"
"RTN","GMVPCE3",17,0)
 I $E(UNIT)="I"&("IN"[UNIT) K:+X'=X!(X>150)!(X<0)!(X?.E1"."1N.N) X
"RTN","GMVPCE3",18,0)
 E  K X
"RTN","GMVPCE3",19,0)
 Q
"RTN","GMVPCE3",20,0)
AUD ; INPUT TRANSFORM FOR AUDIOMETRY.
"RTN","GMVPCE3",21,0)
 N I,R,L
"RTN","GMVPCE3",22,0)
 K:X'?.N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/".N1"/" X
"RTN","GMVPCE3",23,0)
 I $D(X) F I=1:1:8 S R=$P(X,"/",I) I R]"" K:+R'=R!(R>110)!(R<0) X
"RTN","GMVPCE3",24,0)
 I $D(X) F I=9:1:16 S L=$P(X,"/",I) I L]"" K:+L'=L!(L>110)!(L<0) X
"RTN","GMVPCE3",25,0)
 Q
"RTN","GMVPCE3",26,0)
BP ; INPUT TRANSFORM FOR BLOOD PRESSURE
"RTN","GMVPCE3",27,0)
 K:X'?2.3N1"/"2.3N1"/"2.3N&(X'?2.3N1"/"2.3N) X I $D(X) K:$P(X,"/",1)>300!($P(X,"/",2)>300)!(+$P(X,"/",3)>300) X
"RTN","GMVPCE3",28,0)
 I $D(X),$P(X,"/")'>$P(X,"/",$L(X,"/")) K X
"RTN","GMVPCE3",29,0)
 Q
"RTN","GMVPCE3",30,0)
FH ; INPUT TRANSFORM FOR FUNDAL HEIGHT
"RTN","GMVPCE3",31,0)
 N UNIT S UNIT=$$UP^XLFSTR($P(X,+X,2,10)) I UNIT="" K X Q
"RTN","GMVPCE3",32,0)
 S X=+X
"RTN","GMVPCE3",33,0)
 I $E(UNIT)="C"&("CM"[UNIT) S X=$$CMTOIN(+X,0),UNIT="IN"
"RTN","GMVPCE3",34,0)
 I $E(UNIT)="I"&("IN"[UNIT) K:+X'=X!(X>50)!(X<10)!(X?.E1"."1N.N) X
"RTN","GMVPCE3",35,0)
 E  K X
"RTN","GMVPCE3",36,0)
 Q
"RTN","GMVPCE3",37,0)
FT ; INPUT TRANSFORM FOR FETAL HEART TONES
"RTN","GMVPCE3",38,0)
 K:+X'=X!(X>250)!(X<50)!(X?.E1"."1N.N) X
"RTN","GMVPCE3",39,0)
 Q
"RTN","GMVPCE3",40,0)
HC ; INPUT TRANSFORM FOR HEAD CIRCUMFERENCE
"RTN","GMVPCE3",41,0)
 N UNIT S UNIT=$$UP^XLFSTR($P(X,+X,2,10)) I UNIT="" K X Q
"RTN","GMVPCE3",42,0)
 I $E(UNIT)="C"&("CM"[UNIT) D  Q
"RTN","GMVPCE3",43,0)
 .  K:+X>76!(+X<26)!(+X?.E1"."3N.N) X
"RTN","GMVPCE3",44,0)
 .  I $D(X) S X=$J(.3937*(+X),0,2)
"RTN","GMVPCE3",45,0)
 .  Q
"RTN","GMVPCE3",46,0)
 I $E(UNIT)="I" D  Q
"RTN","GMVPCE3",47,0)
 .  K:+X>30!(+X<10)!(+X?.E1"."4N.N) X
"RTN","GMVPCE3",48,0)
 .  I $D(X),+X?.E1"."1N.N D
"RTN","GMVPCE3",49,0)
 .  .  N F S F=$P(+X,".",2)
"RTN","GMVPCE3",50,0)
 .  .  K:"^125^25^375^5^625^75^875^"'[("^"_F_"^") X
"RTN","GMVPCE3",51,0)
 .  .  Q
"RTN","GMVPCE3",52,0)
 .  I $D(X) S X=+X
"RTN","GMVPCE3",53,0)
 .  Q
"RTN","GMVPCE3",54,0)
 K X
"RTN","GMVPCE3",55,0)
 Q
"RTN","GMVPCE3",56,0)
HE ; INPUT TRANSFORM FOR HEARING
"RTN","GMVPCE3",57,0)
 K:"^N^A^"'[("^"_$$UP^XLFSTR(X)_"^") X
"RTN","GMVPCE3",58,0)
 Q
"RTN","GMVPCE3",59,0)
HT ; INPUT TRANSFORM FOR HEIGHT
"RTN","GMVPCE3",60,0)
 D EN3^GMVUT0 K:X=0!(X>100)!(X<1) X
"RTN","GMVPCE3",61,0)
 Q
"RTN","GMVPCE3",62,0)
PU ; INPUT TRANSFORM FOR PULSE
"RTN","GMVPCE3",63,0)
 K:+X'=X!(X>300)!(X<0)!(X?.E1"."1N.N) X
"RTN","GMVPCE3",64,0)
 Q
"RTN","GMVPCE3",65,0)
RS ; INPUT TRANSFORM FOR RESPIRATION
"RTN","GMVPCE3",66,0)
 K:+X'=X!(X>100)!(X<0)!(X?.E1"."1N.N) X
"RTN","GMVPCE3",67,0)
 Q
"RTN","GMVPCE3",68,0)
TON ; INPUT TRANSFORM FOR TONOMETRY
"RTN","GMVPCE3",69,0)
 N R,L
"RTN","GMVPCE3",70,0)
 K:X'?.N1"/"1N.N&(X'?1N.N1"/".N) X
"RTN","GMVPCE3",71,0)
 I $D(X) S R=$P(X,"/") I R]"" K:R'=+R!(R>80)!(R<0) X
"RTN","GMVPCE3",72,0)
 I $D(X) S L=$P(X,"/",2) I L]"" K:L'=+L!(L>80)!(L<0) X
"RTN","GMVPCE3",73,0)
 Q
"RTN","GMVPCE3",74,0)
TMP ; INPUT TRANSFORM FOR TEMPERATURE
"RTN","GMVPCE3",75,0)
 K:+X'=X!(X>120)!(X<0)!(X?.E1"."3N.N) X I $D(X) S:X<45 X=$J(+X*(9/5)+32,0,1)
"RTN","GMVPCE3",76,0)
 Q
"RTN","GMVPCE3",77,0)
VC ; INPUT TRANSFORM FOR VISION CORRECTED (AND VISION UNCORRECTED)
"RTN","GMVPCE3",78,0)
 N R,L
"RTN","GMVPCE3",79,0)
 K:X'=+X&(X'?.N1"/"1N.N) X
"RTN","GMVPCE3",80,0)
 I $D(X) S R=$P(X,"/") I R]"" K:R'=+R!(R>999)!(R<10) X
"RTN","GMVPCE3",81,0)
 I $D(X) S L=$P(X,"/",2) I L]"" K:L'=+L!(L>999)!(L<10) X
"RTN","GMVPCE3",82,0)
 Q
"RTN","GMVPCE3",83,0)
WT ; INPUT TRANSFORM FOR WEIGHT
"RTN","GMVPCE3",84,0)
 I $L(X)>10 K X Q
"RTN","GMVPCE3",85,0)
 S GMR=$E($P(X,+X,2)) S X=$S(GMR="":0,"Kk"[GMR:+$J(2.2*(+X),0,2),"Ll"[GMR:+X,1:0) K:X>1500!(X=0)!(X<0) X K GMR
"RTN","GMVPCE3",86,0)
 Q
"RTN","GMVPCE3",87,0)
PN ; INPUT TRANSFORM FOR PAIN
"RTN","GMVPCE3",88,0)
 K:"^0^1^2^3^4^5^6^7^8^9^10^99^"'[(U_X_U) X
"RTN","GMVPCE3",89,0)
 Q
"RTN","GMVPCE3",90,0)
UNITRATE(TYPE,RATE,UNIT) ; This function will add the unit of
"RTN","GMVPCE3",91,0)
 ; measurement to the rate so the input transforms will work properly.
"RTN","GMVPCE3",92,0)
 ;   Input variables:  TYPE = Measurement type
"RTN","GMVPCE3",93,0)
 ;                     RATE = Actual measurement (passed in by ref.)
"RTN","GMVPCE3",94,0)
 ;                     UNIT = Unit of measurement
"RTN","GMVPCE3",95,0)
 ;   Function value: Transormed rate with units on the end.
"RTN","GMVPCE3",96,0)
 N FXN S FXN=RATE,UNIT=$G(UNIT)
"RTN","GMVPCE3",97,0)
 I TYPE="AG"!(TYPE="FH")!(TYPE="HC")!(TYPE="HT") D
"RTN","GMVPCE3",98,0)
 .  I "^CM^IN^"'[("^"_UNIT_"^") S FXN=""
"RTN","GMVPCE3",99,0)
 .  E  S FXN=RATE_$E(UNIT)
"RTN","GMVPCE3",100,0)
 .  Q
"RTN","GMVPCE3",101,0)
 I TYPE="TMP" D
"RTN","GMVPCE3",102,0)
 .  I "^C^F^"'[("^"_UNIT_"^") S FXN=""
"RTN","GMVPCE3",103,0)
 .  I UNIT="C" S FXN=+$J(+RATE*(9/5)+32,0,1)
"RTN","GMVPCE3",104,0)
 .  Q
"RTN","GMVPCE3",105,0)
 I TYPE="WT" D
"RTN","GMVPCE3",106,0)
 .  I "^LB^KG^"'[("^"_UNIT_"^") S FXN=""
"RTN","GMVPCE3",107,0)
 .  E  S FXN=RATE_$E(UNIT)
"RTN","GMVPCE3",108,0)
 .  Q
"RTN","GMVPCE3",109,0)
 Q FXN
"RTN","GMVPCE3",110,0)
CMTOIN(X,PREC) ; Convert CM to IN, given CM value (X) this function will
"RTN","GMVPCE3",111,0)
 ; return IN value.  Optional input value of PREC for precision,
"RTN","GMVPCE3",112,0)
 ; if not set, 2 decimals will be returned.
"RTN","GMVPCE3",113,0)
 Q +$J(.3937*(+X),0,+$G(PREC,2))
"RTN","GMVQUAL")
0^255^B9718446
"RTN","GMVQUAL",1,0)
GMVQUAL ;HOIFO/YH,FT-VITAL QUALIFIERS ;12/27/01  11:10
"RTN","GMVQUAL",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVQUAL",3,0)
 ;
"RTN","GMVQUAL",4,0)
 ; This routine uses the following IAs:
"RTN","GMVQUAL",5,0)
 ; <None>
"RTN","GMVQUAL",6,0)
 ;
"RTN","GMVQUAL",7,0)
LISTQ ; {called from GMVCAQU}
"RTN","GMVQUAL",8,0)
 S (I,GMAX,J)=0
"RTN","GMVQUAL",9,0)
 K GCHART,GCHART1,GMRW,GCOUNT,GMRENTR,GQUAL,GENTR
"RTN","GMVQUAL",10,0)
 S GCAT(1)=0
"RTN","GMVQUAL",11,0)
 F  S GCAT(1)=$O(^GMRD(120.52,"AA",GMRVIT,GCAT(1))) Q:GCAT(1)'>0  D CATLG S GCHA="" F  S GCHA=$O(^GMRD(120.52,"AA",GMRVIT,GCAT(1),GCHA)) Q:GCHA=""  S GDA=$O(^GMRD(120.52,"AA",GMRVIT,GCAT(1),GCHA,0)) Q:GDA'>0  D
"RTN","GMVQUAL",12,0)
 . S GCHA=$P($G(^GMRD(120.52,GDA,0)),"^") Q:GCHA=""
"RTN","GMVQUAL",13,0)
 . S GQUAL(GMRVODR,GCHA)=GDA
"RTN","GMVQUAL",14,0)
 . Q
"RTN","GMVQUAL",15,0)
 S (I,J,GMRVODR)=0
"RTN","GMVQUAL",16,0)
 F  S GMRVODR=$O(GQUAL(GMRVODR)) Q:GMRVODR'>0  S GCHA="" F  S GCHA=$O(GQUAL(GMRVODR,GCHA)) Q:GCHA=""  D
"RTN","GMVQUAL",17,0)
 . I GMRVITY="BP"!(GMRVITY="CG") S I=I+1,GCHART(I)=GCHA_"^"_GQUAL(GMRVODR,GCHA)_"^"_GMRVODR,GMRLAST(GMRVODR,GORDER(GMRVODR))=I
"RTN","GMVQUAL",18,0)
 . I GMRVODR>1,GMRVITY'="BP",GMRVITY'="CG" S I=I+1,GCHART(I)=GCHA_"^"_GQUAL(GMRVODR,GCHA)_"^"_GMRVODR,GMRLAST(GMRVODR,GORDER(GMRVODR))=I
"RTN","GMVQUAL",19,0)
 . I GMRVODR=1,GMRVITY'="BP",GMRVITY'="CG" S J=J+1,GCHART1(J)=GCHA_"^"_GQUAL(GMRVODR,GCHA)_"^"_GMRVODR,GMRLAST(GMRVODR,GORDER(GMRVODR))=J
"RTN","GMVQUAL",20,0)
 . I $D(GMRDP),GMRVITY="BP" S J=J+1,GCHART1(J)=GCHA_"^"_GQUAL(GMRVODR,GCHA)_"^"_GMRVODR,GMRLAST(GMRVODR,GORDER(GMRVODR))=J
"RTN","GMVQUAL",21,0)
 .S GCOUNT(GMRVODR,GORDER(GMRVODR))=$G(GCOUNT(GMRVODR,GORDER(GMRVODR)))+1
"RTN","GMVQUAL",22,0)
 .I GMRVITY="BP"!(GMRVITY="CG"),$G(GCOUNT(GMRVODR,GORDER(GMRVODR)))>GMAX S GMAX=$G(GCOUNT(GMRVODR,GORDER(GMRVODR)))
"RTN","GMVQUAL",23,0)
 .I GMRVITY'="CG",GMRVITY'="BP",GMRVODR'=1,$G(GCOUNT(GMRVODR,GORDER(GMRVODR)))>GMAX S GMAX=$G(GCOUNT(GMRVODR,GORDER(GMRVODR)))
"RTN","GMVQUAL",24,0)
 .Q
"RTN","GMVQUAL",25,0)
 Q
"RTN","GMVQUAL",26,0)
CATLG ;
"RTN","GMVQUAL",27,0)
 S GDA(1)=$O(^GMRD(120.53,GCAT(1),1,"B",GMRVIT,0)) Q:GDA(1)'>0
"RTN","GMVQUAL",28,0)
 S GLN=$G(^GMRD(120.53,GCAT(1),1,GDA(1),0)) Q:GLN=""
"RTN","GMVQUAL",29,0)
 S GCAT=$G(^GMRD(120.53,GCAT(1),0)) Q:GCAT=""
"RTN","GMVQUAL",30,0)
 S GMRVODR=+$P(GLN,"^",6),GMRVDFLT=$S($D(^GMRD(120.52,+$P(GLN,"^",7),0)):$P(^(0),"^"),1:"") S:GMRVODR=0 GMRVODR=1
"RTN","GMVQUAL",31,0)
 S GMRVDFLT(GMRVODR)=GMRVDFLT I GMRVDFLT'="",$D(^GMRD(120.52,"B",GMRVDFLT)) S GMRVDFLT(GMRVODR)=GMRVDFLT(GMRVODR)_"^"_$O(^GMRD(120.52,"B",GMRVDFLT,0))
"RTN","GMVQUAL",32,0)
 S GCOUNT(GMRVODR,GCAT)=0
"RTN","GMVQUAL",33,0)
 S GORDER(GMRVODR)=GCAT,(GENTR(GMRVODR),GMRENTR(GMRVODR))=+$P(GLN,"^",3) S:GMRENTR(GMRVODR)=0 GMRENTR(GMRVODR)=1
"RTN","GMVQUAL",34,0)
 Q
"RTN","GMVRPCM")
0^276^B70249405
"RTN","GMVRPCM",1,0)
GMVRPCM ; HOIFO/DP - RPC for Vitals Manager ;8/9/02  15:21
"RTN","GMVRPCM",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVRPCM",3,0)
 ; Integration Agreements:
"RTN","GMVRPCM",4,0)
 ; #908 [Controlled] ^SC references
"RTN","GMVRPCM",5,0)
 ; #10039 [Supported] File 42 references
"RTN","GMVRPCM",6,0)
 ; #10040 [Supported] File 44 references
"RTN","GMVRPCM",7,0)
 ; #10076 [Supported] XUSEC Calls
"RTN","GMVRPCM",8,0)
 ; #2263 [Supported] XPAR Calls
"RTN","GMVRPCM",9,0)
 ; #2541 [Supported] XUPARAM Calls
"RTN","GMVRPCM",10,0)
 ; #2692 [Controlled] ORQPTQ1
"RTN","GMVRPCM",11,0)
 ; #10045 [Supported] XUSHSHP
"RTN","GMVRPCM",12,0)
 ; #2241 [Supported] XUSRB1 Call
"RTN","GMVRPCM",13,0)
 ; #3227 [Private] NURAPI Calls
"RTN","GMVRPCM",14,0)
 ;
"RTN","GMVRPCM",15,0)
ADDQUAL ; [Procedure] Add qualifier to vital/category
"RTN","GMVRPCM",16,0)
 S GMVVIT=+$P(DATA,";",1),GMVCAT=+$P(DATA,";",2),GMVQUAL=+$P(DATA,";",3)
"RTN","GMVRPCM",17,0)
 I $O(^GMRD(120.52,GMVQUAL,1,"B",GMVVIT,0)) D  Q
"RTN","GMVRPCM",18,0)
 .S @RESULTS@(0)="1^Qualifier already assigned."
"RTN","GMVRPCM",19,0)
 S GMVFDA(120.521,"+1,"_GMVQUAL_",",.01)=GMVVIT
"RTN","GMVRPCM",20,0)
 S GMVFDA(120.521,"+1,"_GMVQUAL_",",.02)=GMVCAT
"RTN","GMVRPCM",21,0)
 D UPDATE^DIE("","GMVFDA","GMVIEN","GMVERR")
"RTN","GMVRPCM",22,0)
 I $G(GMVIEN(1)) S @RESULTS@(0)=+GMVIEN(1)_"^Qualifier Assigned"
"RTN","GMVRPCM",23,0)
 E  S @RESULTS@(0)="-1^Unable to assign qualifier"
"RTN","GMVRPCM",24,0)
 Q
"RTN","GMVRPCM",25,0)
 ;
"RTN","GMVRPCM",26,0)
DELQUAL ; [Procedure] Delete qualifier from vital/category
"RTN","GMVRPCM",27,0)
 S GMVVIT=+$P(DATA,";",1),GMVCAT=+$P(DATA,";",2),GMVQUAL=+$P(DATA,";",3)
"RTN","GMVRPCM",28,0)
 S X=$O(^GMRD(120.52,GMVQUAL,1,"B",GMVVIT,0))
"RTN","GMVRPCM",29,0)
 S GMVFDA(120.521,X_","_GMVQUAL_",",.01)="@"
"RTN","GMVRPCM",30,0)
 D FILE^DIE("","GMVFDA","GMVERR")
"RTN","GMVRPCM",31,0)
 I $D(GMVERR) S @RESULTS@(0)="-1^Unable to remove qualifier."
"RTN","GMVRPCM",32,0)
 E  S @RESULTS@(0)="1^Qualifier removed."
"RTN","GMVRPCM",33,0)
 Q
"RTN","GMVRPCM",34,0)
 ;
"RTN","GMVRPCM",35,0)
DELTEMP ; [Procedure] Delete Template
"RTN","GMVRPCM",36,0)
 S GMVENT=$P(DATA,U,1),GMVNAME=$P(DATA,U,2)
"RTN","GMVRPCM",37,0)
 I $$GET^XPAR(GMVENT,"GMV TEMPLATE DEFAULT")=GMVNAME D
"RTN","GMVRPCM",38,0)
 .D DEL^XPAR(GMVENT,"GMV TEMPLATE DEFAULT",1)
"RTN","GMVRPCM",39,0)
 D DEL^XPAR(GMVENT,"GMV TEMPLATE",GMVNAME,.GMVERR)
"RTN","GMVRPCM",40,0)
 I '$G(GMVERR) S @RESULTS@(0)="1^Template Removed."
"RTN","GMVRPCM",41,0)
 E  S @RESULTS@(0)="-1^"_GMVERR
"RTN","GMVRPCM",42,0)
 Q
"RTN","GMVRPCM",43,0)
 ;
"RTN","GMVRPCM",44,0)
GETCATS ; [Procedure] Return Listing of categories
"RTN","GMVRPCM",45,0)
 F GMVCAT=0:0 S GMVCAT=$O(^GMRD(120.52,"AA",DATA,GMVCAT)) Q:'GMVCAT  D
"RTN","GMVRPCM",46,0)
 .S GMVQUAL="",X="" F  S X=$O(^GMRD(120.52,"AA",DATA,GMVCAT,X)) Q:X=""  D
"RTN","GMVRPCM",47,0)
 ..S GMVQUAL=GMVQUAL_$S(GMVQUAL]"":", ",1:"")_X
"RTN","GMVRPCM",48,0)
 .S Y=$O(@RESULTS@(""),-1)+1
"RTN","GMVRPCM",49,0)
 .S @RESULTS@(Y)=GMVCAT_U_$P(^GMRD(120.53,GMVCAT,0),U)_U_GMVQUAL
"RTN","GMVRPCM",50,0)
 S @RESULTS@(0)=+$O(@RESULTS@(""),-1)_U_$P(^GMRD(120.51,DATA,0),U)
"RTN","GMVRPCM",51,0)
 Q
"RTN","GMVRPCM",52,0)
 ;
"RTN","GMVRPCM",53,0)
GETDATA ; [Procedure] Generic fileman data call
"RTN","GMVRPCM",54,0)
 ; Variable DATA = File#^IENS^Field#
"RTN","GMVRPCM",55,0)
 S @RESULTS@(0)=$$GET1^DIQ($P(DATA,U,1),$P(DATA,U,2),$P(DATA,U,3))
"RTN","GMVRPCM",56,0)
 Q
"RTN","GMVRPCM",57,0)
 ;
"RTN","GMVRPCM",58,0)
GETDEF ; [Procedure] Get Default Template
"RTN","GMVRPCM",59,0)
 I $G(DATA)]"" D  Q
"RTN","GMVRPCM",60,0)
 .S X=$$GET^XPAR($P(DATA,U),"GMV TEMPLATE DEFAULT")
"RTN","GMVRPCM",61,0)
 .I X="" S @RESULTS@(0)="-1^No Default Template"
"RTN","GMVRPCM",62,0)
 .E  S @RESULTS@(0)=X
"RTN","GMVRPCM",63,0)
 D ENVAL^XPAR(.GMV,"GMV TEMPLATE DEFAULT")
"RTN","GMVRPCM",64,0)
 S X="" F  S X=$O(GMV(X)) Q:X=""  D
"RTN","GMVRPCM",65,0)
 .S Y=$O(@RESULTS@(""),-1)+1
"RTN","GMVRPCM",66,0)
 .S @RESULTS@(Y)=X_U_GMV(X,1)
"RTN","GMVRPCM",67,0)
 S @RESULTS@(0)=+$O(@RESULTS@(""),-1)
"RTN","GMVRPCM",68,0)
 Q
"RTN","GMVRPCM",69,0)
 ;
"RTN","GMVRPCM",70,0)
GETHILO ; [Procedure] Returns an abnormal value
"RTN","GMVRPCM",71,0)
 S @RESULTS@(0)=+$$GET1^DIQ(120.57,"1,",DATA)
"RTN","GMVRPCM",72,0)
 Q
"RTN","GMVRPCM",73,0)
 ;
"RTN","GMVRPCM",74,0)
GETLIST ; [Procedure] Return listing of file
"RTN","GMVRPCM",75,0)
 K GMVRET,^TMP("DILIST",$J)
"RTN","GMVRPCM",76,0)
 S GMVSCRN=""
"RTN","GMVRPCM",77,0)
 I DATA=120.51 D  ; Set screen for vitals list
"RTN","GMVRPCM",78,0)
 .S GMVSCRN="I "",8,9,21,20,5,21,3,22,1,2,19,""[("",""_+Y_"","")"
"RTN","GMVRPCM",79,0)
 I DATA=42 D  ; Screen for ward location
"RTN","GMVRPCM",80,0)
 .S GMVSCRN="I '$$INACT42^GMVUT2(+Y)"
"RTN","GMVRPCM",81,0)
 I DATA=44 D  Q  ; Clinics
"RTN","GMVRPCM",82,0)
 .F X=0:0 S X=$O(^SC(X)) Q:'X  D:$P(^(X,0),U,3)="C"
"RTN","GMVRPCM",83,0)
 ..Q:+$G(^SC(X,"OOS"))
"RTN","GMVRPCM",84,0)
 ..S Y=$G(^SC(X,"I"))
"RTN","GMVRPCM",85,0)
 ..I Y Q:DT>+Y&($P(Y,U,2)=""!(DT<$P(Y,U,2)))
"RTN","GMVRPCM",86,0)
 ..S @RESULTS@($O(@RESULTS@(""),-1)+1)=DATA_";"_X_U_$P(^SC(X,0),U)
"RTN","GMVRPCM",87,0)
 .S @RESULTS@(0)=+$O(@RESULTS@(""),-1)
"RTN","GMVRPCM",88,0)
 I DATA=100.21 D  Q  ; CPRS Teams
"RTN","GMVRPCM",89,0)
 .D TEAMS^ORQPTQ1(.GMVRET)
"RTN","GMVRPCM",90,0)
 .F X=0:0 S X=$O(GMVRET(X)) Q:'X  S @RESULTS@(X)=DATA_";"_GMVRET(X)
"RTN","GMVRPCM",91,0)
 .S @RESULTS@(0)=+$O(@RESULTS@(""),-1)
"RTN","GMVRPCM",92,0)
 I DATA=211.4 D  Q  ; NURS Locations
"RTN","GMVRPCM",93,0)
 .D ACTLOCS^NURAPI(.GMVRET)
"RTN","GMVRPCM",94,0)
 .F X=0:0 S X=$O(GMVRET(X)) Q:'X  S @RESULTS@(X)=DATA_";"_GMVRET(X)
"RTN","GMVRPCM",95,0)
 .S @RESULTS@(0)=+$O(@RESULTS@(""),-1)
"RTN","GMVRPCM",96,0)
 D LIST^DIC(DATA,"","@;.01","P","","","","",GMVSCRN)
"RTN","GMVRPCM",97,0)
 F X=0:0 S X=$O(^TMP("DILIST",$J,X)) Q:'X  D
"RTN","GMVRPCM",98,0)
 .S @RESULTS@(X)=DATA_";"_^TMP("DILIST",$J,X,0)
"RTN","GMVRPCM",99,0)
 S @RESULTS@(0)=+$O(@RESULTS@(""),-1)_U_$$GET1^DID(DATA,"","","NAME")
"RTN","GMVRPCM",100,0)
 K ^TMP("DILIST",$J)
"RTN","GMVRPCM",101,0)
 Q
"RTN","GMVRPCM",102,0)
 ;
"RTN","GMVRPCM",103,0)
GETQUAL ; [Procedure] Return listing of qualifiers in list
"RTN","GMVRPCM",104,0)
 ; DATA=VitalIEN;CatIEN
"RTN","GMVRPCM",105,0)
 ; Uses X-ref of ^GMRD(120.52,"AA",VitalIEN,CategoryIEN,QName,QIEN)
"RTN","GMVRPCM",106,0)
 S GMVIT=+$P(DATA,";",1),GMVCAT=+$P(DATA,";",2)
"RTN","GMVRPCM",107,0)
 I '$D(^GMRD(120.53,GMVCAT,0)) S @RESULTS@(0)="-1^No such category" Q
"RTN","GMVRPCM",108,0)
 I '$D(^GMRD(120.51,GMVIT,0)) S @RESULTS@(0)="-1^No such vital" Q
"RTN","GMVRPCM",109,0)
 S GMVNAM=""
"RTN","GMVRPCM",110,0)
 F  S GMVNAM=$O(^GMRD(120.52,"AA",GMVIT,GMVCAT,GMVNAM)) Q:GMVNAM=""  D
"RTN","GMVRPCM",111,0)
 .S GMVIEN=$O(^(GMVNAM,0))  ; Assume on one of this name
"RTN","GMVRPCM",112,0)
 .S Y=$O(@RESULTS@(""),-1)+1
"RTN","GMVRPCM",113,0)
 .S @RESULTS@(Y)=GMVIEN_U_GMVNAM
"RTN","GMVRPCM",114,0)
 S @RESULTS@(0)=+$O(@RESULTS@(""),-1)_U_$P(^GMRD(120.53,GMVCAT,0),U)
"RTN","GMVRPCM",115,0)
 Q
"RTN","GMVRPCM",116,0)
 ;
"RTN","GMVRPCM",117,0)
GETTEMP ; [Procedure] Get Template List
"RTN","GMVRPCM",118,0)
 I $G(DATA)]"" D
"RTN","GMVRPCM",119,0)
 .S GMVENT=$$ENTITY($P(DATA,U,1)),GMVNAME=$P(DATA,U,2)
"RTN","GMVRPCM",120,0)
 .I GMVNAME="" D
"RTN","GMVRPCM",121,0)
 ..D GETLST^XPAR(.GMVTMP,GMVENT,"GMV TEMPLATE")
"RTN","GMVRPCM",122,0)
 ..F X=0:0 S X=$O(GMVTMP(X)) Q:'X  D
"RTN","GMVRPCM",123,0)
 ...S GMV(GMVENT,$P(GMVTMP(X),U,1))=$P(GMVTMP(X),U,2,10)
"RTN","GMVRPCM",124,0)
 .I GMVNAME]"" S GMV(GMVENT,GMVNAME)=$$GET^XPAR(GMVENT,"GMV TEMPLATE",GMVNAME)
"RTN","GMVRPCM",125,0)
 I $G(DATA)="" D ENVAL^XPAR(.GMV,"GMV TEMPLATE")
"RTN","GMVRPCM",126,0)
 S GMVENT="",GMVNAME=""
"RTN","GMVRPCM",127,0)
 F  S GMVENT=$O(GMV(GMVENT)) Q:GMVENT=""  D
"RTN","GMVRPCM",128,0)
 .S GMVROOT=$P(GMVENT,";",2),GMVTYPE=$$TYPE(GMVROOT),GMVIEN=+GMVENT
"RTN","GMVRPCM",129,0)
 .Q:GMVTYPE=0  ;unknown template type
"RTN","GMVRPCM",130,0)
 .Q:GMVROOT="VA(200,"&('$$GET^XPAR("SYS","GMV ALLOW USER TEMPLATES"))
"RTN","GMVRPCM",131,0)
 .I GMVROOT="VA(200,"&(GMVIEN'=DUZ) Q:'$D(^XUSEC("GMV MANAGER",DUZ))
"RTN","GMVRPCM",132,0)
 .F  S GMVNAME=$O(GMV(GMVENT,GMVNAME)) Q:GMVNAME=""  D
"RTN","GMVRPCM",133,0)
 ..S GMVOWNER=$P($G(@(U_GMVROOT_(+GMVIEN)_",0)"),"Unk"),U)
"RTN","GMVRPCM",134,0)
 ..S Y=$O(@RESULTS@(""),-1)+1
"RTN","GMVRPCM",135,0)
 ..S @RESULTS@(Y)=GMVTYPE_U_GMVENT_U_GMVOWNER_U_GMVNAME_U_GMV(GMVENT,GMVNAME)
"RTN","GMVRPCM",136,0)
 S @RESULTS@(0)=+$O(@RESULTS@(""),-1)
"RTN","GMVRPCM",137,0)
 Q
"RTN","GMVRPCM",138,0)
 ;
"RTN","GMVRPCM",139,0)
LOOKUP ; [Procedure] Does a lookup on a file
"RTN","GMVRPCM",140,0)
 I $P(DATA,"^",3)="" S GMVFLD="@;.01"
"RTN","GMVRPCM",141,0)
 E  S GMVFLD="@;"_$P(DATA,"^",3)
"RTN","GMVRPCM",142,0)
 S GMVFLD=$P(GMVFLD,";",1,5) ; Limit lookup to 4 display fields
"RTN","GMVRPCM",143,0)
 D FIND^DIC(+DATA,"",GMVFLD,"P",$P(DATA,"^",2),61)
"RTN","GMVRPCM",144,0)
 I ^TMP("DILIST",$J,0)<1 D  Q
"RTN","GMVRPCM",145,0)
 .S @RESULTS@(0)="-1^No entries found matching '"_$P(DATA,U,2)_"'."
"RTN","GMVRPCM",146,0)
 I ^TMP("DILIST",$J,0)>60 D  Q
"RTN","GMVRPCM",147,0)
 .S @RESULTS@(0)="-1^To many matches found, please be more specific."
"RTN","GMVRPCM",148,0)
 F X=0:0 S X=$O(^TMP("DILIST",$J,X)) Q:'X  D
"RTN","GMVRPCM",149,0)
 .S @RESULTS@(X)=+DATA_";"_^TMP("DILIST",$J,X,0)
"RTN","GMVRPCM",150,0)
 S @RESULTS@(0)=+$O(@RESULTS@(""),-1)
"RTN","GMVRPCM",151,0)
 Q
"RTN","GMVRPCM",152,0)
 ;
"RTN","GMVRPCM",153,0)
NEWQUAL ; [Procedure] Creatre New Qualifier
"RTN","GMVRPCM",154,0)
 D VAL^DIE(120.52,"+1,",".01","F",DATA,.GMVRET,"GMVFDA")
"RTN","GMVRPCM",155,0)
 I '$D(GMVFDA) S @RESULTS@(0)="-1^Invalid Qualifier Name" Q
"RTN","GMVRPCM",156,0)
 D VAL^DIE(120.52,"+1,",".02","F","xx",.GMVRET,"GMVFDA")
"RTN","GMVRPCM",157,0)
 D UPDATE^DIE("","GMVFDA","GMVIEN")
"RTN","GMVRPCM",158,0)
 S @RESULTS@(0)="120.52;"_GMVIEN(1)_"^"_DATA
"RTN","GMVRPCM",159,0)
 Q
"RTN","GMVRPCM",160,0)
 ;
"RTN","GMVRPCM",161,0)
NEWTEMP ; [Procedure] New Template
"RTN","GMVRPCM",162,0)
 S GMVENT=$P(DATA,"^",1),GMVNAME=$P(DATA,"^",2),GMVDESC=$P(DATA,"^",3)
"RTN","GMVRPCM",163,0)
 S GMVENT=$$ENTITY(GMVENT)
"RTN","GMVRPCM",164,0)
 S GMVTYPE=$$TYPE($P(GMVENT,";",2))
"RTN","GMVRPCM",165,0)
 S GMVOWN=$P($G(@(U_$P(GMVENT,";",2)_+GMVENT_",0)"),"Unk"),U)
"RTN","GMVRPCM",166,0)
 S:GMVDESC="" GMVDESC="No Description"
"RTN","GMVRPCM",167,0)
 D ADD^XPAR(GMVENT,"GMV TEMPLATE",GMVNAME,GMVDESC,.GMVERR)
"RTN","GMVRPCM",168,0)
 I 'GMVERR S @RESULTS@(0)=GMVTYPE_U_GMVENT_U_GMVOWN_U_GMVNAME
"RTN","GMVRPCM",169,0)
 E  S @RESULTS@(0)="-1^"_GMVERR
"RTN","GMVRPCM",170,0)
 Q
"RTN","GMVRPCM",171,0)
 ;
"RTN","GMVRPCM",172,0)
RENTEMP ; [Procedure] Rename a Template
"RTN","GMVRPCM",173,0)
 S GMVENT=$P(DATA,U,1),GMVOLD=$P(DATA,U,2),GMVNEW=$P(DATA,U,3)
"RTN","GMVRPCM",174,0)
 D REP^XPAR(GMVENT,"GMV TEMPLATE",GMVOLD,GMVNEW,.GMVERR)
"RTN","GMVRPCM",175,0)
 I 'GMVERR S @RESULTS@(0)="1^Renamed"
"RTN","GMVRPCM",176,0)
 E  S @RESULTS@(0)="-1^"_GMVERR Q
"RTN","GMVRPCM",177,0)
 ; Reset default template if this was a default template
"RTN","GMVRPCM",178,0)
 D:$$GET^XPAR(GMVENT,"GMV TEMPLATE DEFAULT")=GMVOLD
"RTN","GMVRPCM",179,0)
 .D EN^XPAR(GMVENT,"GMV TEMPLATE DEFAULT",1,GMVNEW)
"RTN","GMVRPCM",180,0)
 Q
"RTN","GMVRPCM",181,0)
 ;
"RTN","GMVRPCM",182,0)
RPC(RESULTS,OPTION,DATA) ; [Procedure] Main RPC call tag
"RTN","GMVRPCM",183,0)
 ; RPC: [GMV MANAGER]
"RTN","GMVRPCM",184,0)
 ;
"RTN","GMVRPCM",185,0)
 ; Input parameters
"RTN","GMVRPCM",186,0)
 ;  1. RESULTS [Reference/Required] RPC Return array
"RTN","GMVRPCM",187,0)
 ;  2. OPTION [Literal/Required] RPC Option to execute
"RTN","GMVRPCM",188,0)
 ;  3. DATA [Literal/Required] Other data as required for call
"RTN","GMVRPCM",189,0)
 ;
"RTN","GMVRPCM",190,0)
 N GMV,GMVCAT,GMVDESC,GMVENT,GMVERR,GMVFDA,GMVFLD,GMVIEN,GMVIT,GMVNAM,GMVNAME,GMVNEW,GMVOLD,GMVOWN,GMVOWNER,GMVQUAL,GMVROOT,GMVTYPE,GMVVAL,GMVVIT,GMVSCRN
"RTN","GMVRPCM",191,0)
 S RESULTS=$NA(^TMP("GMVMGR",$J)) K @RESULTS
"RTN","GMVRPCM",192,0)
 D:$T(@OPTION)]"" @OPTION
"RTN","GMVRPCM",193,0)
 S:'$D(@RESULTS) @RESULTS@(0)="-1^No results returned"
"RTN","GMVRPCM",194,0)
 D CLEAN^DILF
"RTN","GMVRPCM",195,0)
 Q
"RTN","GMVRPCM",196,0)
 ;
"RTN","GMVRPCM",197,0)
SETDATA ; [Procedure] Save New Qualifier Name/Abbv
"RTN","GMVRPCM",198,0)
 D VAL^DIE($P(DATA,U,1),$P(DATA,U,2),$P(DATA,U,3),"FH",$P(DATA,U,4),.GMVRET,"GMVFDA")
"RTN","GMVRPCM",199,0)
 D FILE^DIE("","GMVFDA")
"RTN","GMVRPCM",200,0)
 S @RESULTS@(0)="1^OK"
"RTN","GMVRPCM",201,0)
 Q
"RTN","GMVRPCM",202,0)
 ;
"RTN","GMVRPCM",203,0)
SETDEF ; [Procedure] Set Default Template
"RTN","GMVRPCM",204,0)
 D EN^XPAR($P(DATA,U),"GMV TEMPLATE DEFAULT",1,$P(DATA,U,2),.GMVERR)
"RTN","GMVRPCM",205,0)
 I '$G(GMVERR) S @RESULTS@(0)="1^Set As Default."
"RTN","GMVRPCM",206,0)
 E  S @RESULTS@(0)="-1^"_GMVERR
"RTN","GMVRPCM",207,0)
 Q
"RTN","GMVRPCM",208,0)
 ;
"RTN","GMVRPCM",209,0)
SETHILO ; [Procedure] Set abnormal value
"RTN","GMVRPCM",210,0)
 L +(^GMRD(120.57,0)):5
"RTN","GMVRPCM",211,0)
 E  S @RESULTS@(0)="-1^Site File In Use." Q
"RTN","GMVRPCM",212,0)
 S GMVFLD=$P(DATA,"^",1),GMVVAL=$P(DATA,"^",2)
"RTN","GMVRPCM",213,0)
 S GMVFDA(120.57,"1,",GMVFLD)=GMVVAL
"RTN","GMVRPCM",214,0)
 D FILE^DIE("","GMVFDA","GMVERR")
"RTN","GMVRPCM",215,0)
 L -(^GMRD(120.57,0))
"RTN","GMVRPCM",216,0)
 S @RESULTS@(0)="1^Update Complete."
"RTN","GMVRPCM",217,0)
 Q
"RTN","GMVRPCM",218,0)
 ;
"RTN","GMVRPCM",219,0)
SETTEMP ; [Procedure] Set Template data
"RTN","GMVRPCM",220,0)
 D EN^XPAR($P(DATA,U),"GMV TEMPLATE",$P(DATA,U,2),$P(DATA,U,3),.GMVERR)
"RTN","GMVRPCM",221,0)
 I '$G(GMVERR) S @RESULTS@(0)="1^Template Saved."
"RTN","GMVRPCM",222,0)
 E  S @RESULTS@(0)="-1^"_GMVERR
"RTN","GMVRPCM",223,0)
 Q
"RTN","GMVRPCM",224,0)
 ;
"RTN","GMVRPCM",225,0)
VALID ; [Procedure] Verify data validity against fileman
"RTN","GMVRPCM",226,0)
 D VAL^DIE($P(DATA,U,1),$P(DATA,U,2),$P(DATA,U,3),"H",$P(DATA,U,4),.GMVRET)
"RTN","GMVRPCM",227,0)
 I GMVRET'="^" S @RESULTS@(0)="1^Valid Data"
"RTN","GMVRPCM",228,0)
 E  S @RESULTS@(0)="-1^"_^TMP("DIERR",$J,1,"TEXT",1)
"RTN","GMVRPCM",229,0)
 Q
"RTN","GMVRPCM",230,0)
 ;
"RTN","GMVRPCM",231,0)
ENTITY(X) ; [Function] Convert USR, SYS, and DIV entities
"RTN","GMVRPCM",232,0)
 ; Input parameters
"RTN","GMVRPCM",233,0)
 ;  1. X [Literal/Required] XPAR generic entity to transform to variable pointer format
"RTN","GMVRPCM",234,0)
 ;
"RTN","GMVRPCM",235,0)
 Q:X="USR" DUZ_";VA(200,"
"RTN","GMVRPCM",236,0)
 Q:X="SYS" $$FIND1^DIC(4.2,"","QX",$$KSP^XUPARAM("WHERE"))_";DIC(4.2,"
"RTN","GMVRPCM",237,0)
 Q:X="DIV" DUZ(2)_";DIC(4,"
"RTN","GMVRPCM",238,0)
 Q X
"RTN","GMVRPCM",239,0)
 ;
"RTN","GMVRPCM",240,0)
TYPE(X) ; [Function] Returns the type of template
"RTN","GMVRPCM",241,0)
 ; Input parameters
"RTN","GMVRPCM",242,0)
 ;  1. X [Literal/Required] Variable pointer to evaluate
"RTN","GMVRPCM",243,0)
 ;
"RTN","GMVRPCM",244,0)
 Q:X="DIC(4.2," 1 ;     Domain
"RTN","GMVRPCM",245,0)
 Q:X="DIC(4," 2 ;       Institution
"RTN","GMVRPCM",246,0)
 Q:X="SC(" 3 ;          Hospital Location
"RTN","GMVRPCM",247,0)
 Q:X="VA(200," 4 ;      New Person
"RTN","GMVRPCM",248,0)
 Q 0 ;                  Unknown
"RTN","GMVRPCM",249,0)
 ;
"RTN","GMVRPCP")
0^256^B25308667
"RTN","GMVRPCP",1,0)
GMVRPCP ;HOIFO/DP-RPC for GMV_PtSelect.pas ;8/14/02  15:38
"RTN","GMVRPCP",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVRPCP",3,0)
 ; Integration Agreements:
"RTN","GMVRPCP",4,0)
 ; IA# 510 [Controlled] Calls to set ^DISV
"RTN","GMVRPCP",5,0)
 ; IA# 3020 [Supported] Calls to GUIBS5A^DPTLK6
"RTN","GMVRPCP",6,0)
 ; IA# 3023 [Supported] Calls to GUIMTD^DPTLK6 
"RTN","GMVRPCP",7,0)
 ; IA# 3027 [Supported] Calls to DGSEC4
"RTN","GMVRPCP",8,0)
 ; IA# 3266 [Supported] Calls to DOB^DPTLK1
"RTN","GMVRPCP",9,0)
 ; IA# 3267 [Supported] Calls to SSN^DPTLK1
"RTN","GMVRPCP",10,0)
 ; IA# 3593 [Supported] Calls to DPTLK6
"RTN","GMVRPCP",11,0)
 ; IA# 10035 [Supported] Calls for FILE 2 references.
"RTN","GMVRPCP",12,0)
 ; IA# 10037 [Supported] Calls to EN~DGRPD
"RTN","GMVRPCP",13,0)
 ; IA# 10039 [Supported] Reads of ^DIC(42,#,33)
"RTN","GMVRPCP",14,0)
 ;
"RTN","GMVRPCP",15,0)
ADD(X) ; [Procedure] Add line to @RESULTS@(...
"RTN","GMVRPCP",16,0)
 ; Input parameters
"RTN","GMVRPCP",17,0)
 ;  1. X [Literal/Required] Data to add to @RESULTS@(...
"RTN","GMVRPCP",18,0)
 S @RESULTS@(+$O(@RESULTS@(""),-1)+1)=X
"RTN","GMVRPCP",19,0)
 Q
"RTN","GMVRPCP",20,0)
 ;
"RTN","GMVRPCP",21,0)
LOGSEC ; [Procedure] Log Security
"RTN","GMVRPCP",22,0)
 D NOTICE^DGSEC4(.GMVRET,DFN,DATA,1)
"RTN","GMVRPCP",23,0)
 S @RESULTS@(0)=$S(GMVRET:"1^Logged",1:"-1^Unable to log")
"RTN","GMVRPCP",24,0)
 Q
"RTN","GMVRPCP",25,0)
 ;
"RTN","GMVRPCP",26,0)
RPC(RESULTS,OPTION,DFN,DATA) ; [Procedure] Main RPC call tag
"RTN","GMVRPCP",27,0)
 ; RPC: [GMV PTSELECT]
"RTN","GMVRPCP",28,0)
 ; Input parameters
"RTN","GMVRPCP",29,0)
 ;  1. RESULTS [Literal/Required] RPC return array
"RTN","GMVRPCP",30,0)
 ;  2. OPTION [Literal/Required] Call method for RPC
"RTN","GMVRPCP",31,0)
 ;  3. DFN [Literal/Required] Patient IEN
"RTN","GMVRPCP",32,0)
 ;  4. DATA [Literal/Optional] Other data as required for call
"RTN","GMVRPCP",33,0)
 S RESULTS=$NA(^TMP("GMVPTSELECT",$J)) K @RESULTS
"RTN","GMVRPCP",34,0)
 D:$T(@OPTION)]"" @OPTION
"RTN","GMVRPCP",35,0)
 D:'$D(@RESULTS)
"RTN","GMVRPCP",36,0)
 .S @RESULTS@(0)="-1^No results returned"
"RTN","GMVRPCP",37,0)
 D CLEAN^DILF
"RTN","GMVRPCP",38,0)
 Q
"RTN","GMVRPCP",39,0)
 ;
"RTN","GMVRPCP",40,0)
HOSPLOC ; [Procedure] Return location as ptr to 44 or ""
"RTN","GMVRPCP",41,0)
 N VAIN
"RTN","GMVRPCP",42,0)
 D INP^VADPT S @RESULTS@(0)=+$G(^DIC(42,+VAIN(4),44),"")
"RTN","GMVRPCP",43,0)
 Q
"RTN","GMVRPCP",44,0)
 ;
"RTN","GMVRPCP",45,0)
PTHDR ; [Procedure] Patient Infoe for Header Displays
"RTN","GMVRPCP",46,0)
 I '$D(^DPT(+$G(DFN),0)) D  Q
"RTN","GMVRPCP",47,0)
 .S @RESULTS@(0)="-1^No Such DFN ["_$G(DFN,"<Null>")_"]"
"RTN","GMVRPCP",48,0)
 S @RESULTS@(0)=+DFN,GMVIENS=(+DFN)_","
"RTN","GMVRPCP",49,0)
 S @RESULTS@(1)=$$GET1^DIQ(2,GMVIENS,.01)_"  "_$$GET1^DIQ(2,GMVIENS,.09)
"RTN","GMVRPCP",50,0)
 S @RESULTS@(2)="DOB: "_$$GET1^DIQ(2,GMVIENS,.03)_" "_$$GET1^DIQ(2,GMVIENS,.02)_", Age: "_$$GET1^DIQ(2,GMVIENS,.033)
"RTN","GMVRPCP",51,0)
 Q
"RTN","GMVRPCP",52,0)
 ;
"RTN","GMVRPCP",53,0)
PTLKUP ; [Procedure] Patient lookup handled separately for security
"RTN","GMVRPCP",54,0)
 N GMVIDX
"RTN","GMVRPCP",55,0)
 S GMVIDX=$S(DATA?9N.1"P":"SSN",1:"B^BS^BS5")
"RTN","GMVRPCP",56,0)
 D FIND^DIC(2,"","@;.01;.02;.03;.09","MP",DATA,60,GMVIDX)
"RTN","GMVRPCP",57,0)
 I $P(^TMP("DILIST",$J,0),U,3) D  Q
"RTN","GMVRPCP",58,0)
 .S @RESULTS@(0)="-1^To many patients found matching '"_DATA_"'. Please be more specific."
"RTN","GMVRPCP",59,0)
 F GMV=0:0 S GMV=$O(^TMP("DILIST",$J,GMV)) Q:'GMV  D
"RTN","GMVRPCP",60,0)
 .S @RESULTS@(GMV)=$$PTREC(+^TMP("DILIST",$J,GMV,0))
"RTN","GMVRPCP",61,0)
 I '$D(@RESULTS) S @RESULTS@(0)="-1^No patients matching '"_DATA_"'"
"RTN","GMVRPCP",62,0)
 E  S @RESULTS@(0)=+$O(@RESULTS@(""),-1)
"RTN","GMVRPCP",63,0)
 Q
"RTN","GMVRPCP",64,0)
 ;
"RTN","GMVRPCP",65,0)
PTREC(DFN) ;
"RTN","GMVRPCP",66,0)
 ; Extrinsic to return a Pt Rec  in standard list format
"RTN","GMVRPCP",67,0)
 N GMV
"RTN","GMVRPCP",68,0)
 S GMV=$G(^DPT(DFN,0))
"RTN","GMVRPCP",69,0)
 S GMV="2;"_DFN_U_$P(GMV,U,1)_U_$P(GMV,U,2)_U_$P(GMV,U,3)_U_$P(GMV,U,9)
"RTN","GMVRPCP",70,0)
 S $P(GMV,U,10)=$$DOB^DPTLK1(DFN)
"RTN","GMVRPCP",71,0)
 S $P(GMV,U,11)=$$SSN^DPTLK1(DFN)
"RTN","GMVRPCP",72,0)
 Q GMV
"RTN","GMVRPCP",73,0)
 ;
"RTN","GMVRPCP",74,0)
SELECT ; [Procedure] Select patient
"RTN","GMVRPCP",75,0)
 ; Calls required utilities to check security and
"RTN","GMVRPCP",76,0)
 ; return associated warnings/alerts about a
"RTN","GMVRPCP",77,0)
 ; patient being selected.
"RTN","GMVRPCP",78,0)
 ; Variables:
"RTN","GMVRPCP",79,0)
 ;  IENS: [Private] Fileman IENS
"RTN","GMVRPCP",80,0)
 ;  GMVDFN: [Private] Scratch
"RTN","GMVRPCP",81,0)
 ;  GMVFLD: [Private] FIeld number
"RTN","GMVRPCP",82,0)
 ;  GMVID: [Private] Identifier array
"RTN","GMVRPCP",83,0)
 ;  GMVRET: [Private] Scratch
"RTN","GMVRPCP",84,0)
 ;  GMVX: [Private] Scratch
"RTN","GMVRPCP",85,0)
 ; New private variables
"RTN","GMVRPCP",86,0)
 NEW IENS,GMVDFN,GMVFLD,GMVID,GMVRET,GMVX
"RTN","GMVRPCP",87,0)
 I '$D(^DPT(+$G(DFN),0))#2 S @RESULTS@(0)="-1^No such patient" Q
"RTN","GMVRPCP",88,0)
 S ^DISV(DUZ,"^DPT(")=DFN ;spacebar return
"RTN","GMVRPCP",89,0)
 S @RESULTS@(0)="1^Required Identifiers & messages"
"RTN","GMVRPCP",90,0)
 S IENS=DFN_","
"RTN","GMVRPCP",91,0)
 D FILE^DID(2,,"REQUIRED IDENTIFIERS","GMVIDS")
"RTN","GMVRPCP",92,0)
 F GMVX=0:0 S GMVX=$O(GMVIDS("REQUIRED IDENTIFIERS",GMVX)) Q:'GMVX  D
"RTN","GMVRPCP",93,0)
 .S GMVFLD=GMVIDS("REQUIRED IDENTIFIERS",GMVX,"FIELD")
"RTN","GMVRPCP",94,0)
 .S GMVID="$$PTID^"_$$GET1^DID(2,GMVFLD,"","LABEL")
"RTN","GMVRPCP",95,0)
 .S GMVID=GMVID_U_$$GET1^DIQ(2,IENS,GMVFLD)
"RTN","GMVRPCP",96,0)
 .D:GMVFLD=.03
"RTN","GMVRPCP",97,0)
 ..S GMVID=GMVID_" ("_$$GET1^DIQ(2,IENS,.033)_")"
"RTN","GMVRPCP",98,0)
 ..S GMVID=GMVID_U_$$DOB^DPTLK1(+IENS)
"RTN","GMVRPCP",99,0)
 .D:GMVFLD=.09
"RTN","GMVRPCP",100,0)
 ..S X=$P(GMVID,U,3),X=$E(X,1,3)_"-"_$E(X,4,5)_"-"_$E(X,6,10)
"RTN","GMVRPCP",101,0)
 ..S $P(GMVID,U,3)=X,$P(GMVID,U,4)=$$SSN^DPTLK1(+IENS)
"RTN","GMVRPCP",102,0)
 .S @RESULTS@($O(@RESULTS@(""),-1)+1)=GMVID
"RTN","GMVRPCP",103,0)
 ; Add ward and Room/Bed
"RTN","GMVRPCP",104,0)
 S GMVID="$$PTID^"_$$GET1^DID(2,.1,"","LABEL")
"RTN","GMVRPCP",105,0)
 S GMVID=GMVID_U_$$GET1^DIQ(2,IENS,.1)
"RTN","GMVRPCP",106,0)
 S @RESULTS@($O(@RESULTS@(""),-1)+1)=GMVID
"RTN","GMVRPCP",107,0)
 S GMVID="$$PTID^"_$$GET1^DID(2,.101,"","LABEL")
"RTN","GMVRPCP",108,0)
 S GMVID=GMVID_U_$$GET1^DIQ(2,IENS,.101)
"RTN","GMVRPCP",109,0)
 S @RESULTS@($O(@RESULTS@(""),-1)+1)=GMVID
"RTN","GMVRPCP",110,0)
 ; ------- Clevland Alert -------
"RTN","GMVRPCP",111,0)
 K GMVRET
"RTN","GMVRPCP",112,0)
 D GUIBS5A^DPTLK6(.GMVRET,DFN) D:GMVRET(1)=1
"RTN","GMVRPCP",113,0)
 .D ADD("$$MSGHDR^2^SAME LAST NAME AND LAST 4")
"RTN","GMVRPCP",114,0)
 .S GMVX=1
"RTN","GMVRPCP",115,0)
 .F  S GMVX=$O(GMVRET(GMVX)) Q:'GMVX!(+$G(GMVRET(GMVX)))  D
"RTN","GMVRPCP",116,0)
 ..D ADD($P(GMVRET(GMVX),U,2))
"RTN","GMVRPCP",117,0)
 .D ADD(" ")
"RTN","GMVRPCP",118,0)
 .S GMVX=1
"RTN","GMVRPCP",119,0)
 .F  S GMVX=$O(GMVRET(GMVX)) Q:'GMVX  D:+GMVRET(GMVX)
"RTN","GMVRPCP",120,0)
 ..S GMVDFN=+$P(GMVRET(GMVX),U,2)
"RTN","GMVRPCP",121,0)
 ..D ADD($$GET1^DIQ(2,GMVDFN_",",.01)_"    "_$$DOB^DPTLK1(GMVDFN)_"    "_$$SSN^DPTLK1(GMVDFN))
"RTN","GMVRPCP",122,0)
 .D ADD(" ")
"RTN","GMVRPCP",123,0)
 .D ADD("Please review carefully before continuing")
"RTN","GMVRPCP",124,0)
 .D ADD("$$MSGEND")
"RTN","GMVRPCP",125,0)
 ; ------- Sensitive Record? -------
"RTN","GMVRPCP",126,0)
 K GMVRET
"RTN","GMVRPCP",127,0)
 D PTSEC^DGSEC4(.GMVRET,DFN) D:GMVRET(1)'=0
"RTN","GMVRPCP",128,0)
 .D:GMVRET(1)=3
"RTN","GMVRPCP",129,0)
 ..D ADD("$$MSGHDR^0^CAN'T ACCESS YOUR OWN RECORD!!")
"RTN","GMVRPCP",130,0)
 .D:GMVRET(1)=-1
"RTN","GMVRPCP",131,0)
 ..D ADD("$$MSGHDR^0^INCOMPLETE INFORMATION - CAN'T PROCEED")
"RTN","GMVRPCP",132,0)
 .D:GMVRET(1)=1
"RTN","GMVRPCP",133,0)
 ..D ADD("$$MSGHDR^1^SENSITIVE RECORD ACCESS")
"RTN","GMVRPCP",134,0)
 .D:GMVRET(1)'=-1&(GMVRET(1)'=3)&(GMVRET(1)'=1)
"RTN","GMVRPCP",135,0)
 ..D ADD("$$MSGHDR^3^SENSITIVE RECORD ACCESS")
"RTN","GMVRPCP",136,0)
 .S GMVX=1
"RTN","GMVRPCP",137,0)
 .F  S GMVX=$O(GMVRET(GMVX)) Q:'GMVX  D ADD($TR(GMVRET(GMVX),"*"," "))
"RTN","GMVRPCP",138,0)
 .D ADD("$$MSGEND")
"RTN","GMVRPCP",139,0)
 ; ------- Means Test Information? -------
"RTN","GMVRPCP",140,0)
 D GUIMTD^DPTLK6(.GMVRET,DFN) D:GMVRET(1)=1
"RTN","GMVRPCP",141,0)
 .D ADD("$$MSGHDR^1^NOTICE")
"RTN","GMVRPCP",142,0)
 .F GMVX=1:0 S GMVX=$O(GMVRET(GMVX)) Q:'GMVX  D ADD(GMVRET(GMVX))
"RTN","GMVRPCP",143,0)
 .D ADD("$$MSGEND")
"RTN","GMVRPCP",144,0)
 Q
"RTN","GMVRPCP",145,0)
 ;
"RTN","GMVRPCU")
0^280^B5083930
"RTN","GMVRPCU",1,0)
GMVRPCU ; HOIFO/DP - RPC for Vitals User
"RTN","GMVRPCU",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVRPCU",3,0)
 ; Integration Agreements:
"RTN","GMVRPCU",4,0)
 ; IA# 10076 [Supported] XUSEC Calls
"RTN","GMVRPCU",5,0)
 ; IA# 2263 [Supported] XPAR Calls
"RTN","GMVRPCU",6,0)
 ; IA# 2541 [Supported] XUPARAM Calls
"RTN","GMVRPCU",7,0)
 ; IA# 10045 [Supported] XUSHSHP
"RTN","GMVRPCU",8,0)
 ; IA# 2241 [Supported] XUSRB1 Call
"RTN","GMVRPCU",9,0)
 ;
"RTN","GMVRPCU",10,0)
RPC(RESULTS,OPTION,DATA) ; [Procedure] Main RPC call tag
"RTN","GMVRPCU",11,0)
 ; RPC: [GMV MANAGER]
"RTN","GMVRPCU",12,0)
 ;
"RTN","GMVRPCU",13,0)
 ; Input parameters
"RTN","GMVRPCU",14,0)
 ;  1. RESULTS [Reference/Required] RPC Return array
"RTN","GMVRPCU",15,0)
 ;  2. OPTION [Literal/Required] RPC Option to execute
"RTN","GMVRPCU",16,0)
 ;  3. DATA [Literal/Required] Other data as required for call
"RTN","GMVRPCU",17,0)
 ;
"RTN","GMVRPCU",18,0)
 N GMV,GMVCAT,GMVDESC,GMVENT,GMVERR,GMVFDA,GMVFLD,GMVIEN,GMVIT,GMVNAM,GMVNAME,GMVNEW,GMVOLD,GMVOWN,GMVOWNER,GMVQUAL,GMVROOT,GMVTYPE,GMVVAL,GMVVIT,GMVSCRN
"RTN","GMVRPCU",19,0)
 S RESULTS=$NA(^TMP("GMVUSER",$J)) K @RESULTS
"RTN","GMVRPCU",20,0)
 D:$T(@OPTION)]"" @OPTION
"RTN","GMVRPCU",21,0)
 S:'$D(@RESULTS) @RESULTS@(0)="-1^No results returned"
"RTN","GMVRPCU",22,0)
 D CLEAN^DILF
"RTN","GMVRPCU",23,0)
 Q
"RTN","GMVRPCU",24,0)
 ;
"RTN","GMVRPCU",25,0)
SETPAR ; [Procedure] Set/Clear Parameter
"RTN","GMVRPCU",26,0)
 I $P(DATA,U,2)="" D  Q
"RTN","GMVRPCU",27,0)
 .D DEL^XPAR("USR","GMV USER DEFAULTS",$P(DATA,U,1),.GMVERR)
"RTN","GMVRPCU",28,0)
 .I '$G(GMVERR) S @RESULTS@(0)="1^Parameter cleared"
"RTN","GMVRPCU",29,0)
 .E  S @RESULTS@(0)="-1^"_GMVERR
"RTN","GMVRPCU",30,0)
 D EN^XPAR("USR","GMV USER DEFAULTS",$P(DATA,U,1),$P(DATA,U,2),.GMVERR)
"RTN","GMVRPCU",31,0)
 I '$G(GMVERR) S @RESULTS@(0)="1^Parameter set."
"RTN","GMVRPCU",32,0)
 E  S @RESULTS@(0)="-1^"_GMVERR
"RTN","GMVRPCU",33,0)
 Q
"RTN","GMVRPCU",34,0)
 ;
"RTN","GMVRPCU",35,0)
GETPAR ; [Procedure] Get Parameter
"RTN","GMVRPCU",36,0)
 S @RESULTS@(0)=$$GET^XPAR("USR","GMV USER DEFAULTS",DATA,"Q")
"RTN","GMVRPCU",37,0)
 Q
"RTN","GMVRPCU",38,0)
 ;
"RTN","GMVRPCU",39,0)
SIGNON ; [Procedure] Returns sign-on information after Broker.Connected := True
"RTN","GMVRPCU",40,0)
 S @RESULTS@(0)=DUZ
"RTN","GMVRPCU",41,0)
 S @RESULTS@(1)=$$GET1^DIQ(200,DUZ_",",.01) ; Name
"RTN","GMVRPCU",42,0)
 S @RESULTS@(2)=+$$FIND1^DIC(4.2,"","QX",$$KSP^XUPARAM("WHERE")) ;Domain
"RTN","GMVRPCU",43,0)
 S @RESULTS@(3)=$$KSP^XUPARAM("WHERE") ; Domain Name
"RTN","GMVRPCU",44,0)
 S @RESULTS@(4)=+$G(DUZ(2)) ; Division IEN
"RTN","GMVRPCU",45,0)
 S @RESULTS@(5)=$S(+$G(DUZ(2)):$$GET1^DIQ(4,DUZ(2)_",",.01),1:"UNKNOWN")
"RTN","GMVRPCU",46,0)
 S @RESULTS@(6)=($D(^XUSEC("GMV MANAGER",DUZ))#2)!(DUZ(0)="@")
"RTN","GMVRPCU",47,0)
 S @RESULTS@(7)=$$GET1^DIQ(200,DUZ_",",8)
"RTN","GMVRPCU",48,0)
 S @RESULTS@(8)=""
"RTN","GMVRPCU",49,0)
 S @RESULTS@(9)=$G(DTIME,300)
"RTN","GMVRPCU",50,0)
 Q
"RTN","GMVRPCU",51,0)
 ;
"RTN","GMVSAS0")
0^257^B4183405
"RTN","GMVSAS0",1,0)
GMVSAS0 ;HIOFO/RM,YH,FT-CALCULATE ABNORMAL V/S ;11/8/01  14:36
"RTN","GMVSAS0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVSAS0",3,0)
 ;
"RTN","GMVSAS0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVSAS0",5,0)
 ; <None>
"RTN","GMVSAS0",6,0)
 ;
"RTN","GMVSAS0",7,0)
EN1 ; SENT GMRVX = "T","P","R","BP","CG","PO2" AS VITAL TYPE CODE, GMRVX(0) AS VITAL
"RTN","GMVSAS0",8,0)
 ; DATA.  RETURN GMRVX(1)=0 IF WITHING NORMAL RANGE, 1 IF ABNORMAL
"RTN","GMVSAS0",9,0)
 N GMRVSBSH,GMRVSBSL,GMRVHI,GMRVLO,GMRVADAT,GMRVBP2
"RTN","GMVSAS0",10,0)
 S GMRVX(1)=0 Q:'$D(GMRVX)#2  Q:'$D(GMRVX)\2  Q:GMRVX(0)=""  Q:'$D(^GMRD(120.57,1,1))
"RTN","GMVSAS0",11,0)
 I "TPRBPCGPO2"']GMRVX Q
"RTN","GMVSAS0",12,0)
 S GMRVSBSH=$S(GMRVX="T":1,GMRVX="P":3,GMRVX="R":5,GMRVX="CVP":11,GMRVX="B"!(GMRVX="BP"):7,1:0) Q:GMRVX'="PO2"&(GMRVSBSH'>0)
"RTN","GMVSAS0",13,0)
 S GMRVSBSL=$S(GMRVX="T":2,GMRVX="P":4,GMRVX="R":6,GMRVX="CVP":12,GMRVX="PO2":13,GMRVX="B"!(GMRVX="BP"):9,1:0) Q:GMRVSBSL'>0
"RTN","GMVSAS0",14,0)
 I GMRVX="BP"!(GMRVX="B") S GMRVSBSH(0)=8,GMRVSBSL(0)=10
"RTN","GMVSAS0",15,0)
 S GMRVADAT=^GMRD(120.57,1,1)
"RTN","GMVSAS0",16,0)
 S GMRVHI=$S(GMRVSBSH>0:$P(GMRVADAT,"^",GMRVSBSH),1:0),GMRVLO=$S(GMRVSBSL>0:$P(GMRVADAT,"^",GMRVSBSL),1:0)
"RTN","GMVSAS0",17,0)
 I GMRVX="PO2" S:GMRVX(0)'>GMRVLO GMRVX(1)=1 Q
"RTN","GMVSAS0",18,0)
 I GMRVX="BP"!(GMRVX="B") S GMRVHI(0)=$P(GMRVADAT,"^",GMRVSBSH(0)),GMRVLO(0)=$P(GMRVADAT,"^",GMRVSBSL(0)),GMRVBP2=$S($P(GMRVX(0),"/",3)="":$P(GMRVX(0),"/",2),1:$P(GMRVX(0),"/",3))
"RTN","GMVSAS0",19,0)
 S GMRVX(1)=0
"RTN","GMVSAS0",20,0)
 I $P(GMRVX(0),"/")'<GMRVHI!($P(GMRVX(0),"/")'>GMRVLO) S GMRVX(1)=1
"RTN","GMVSAS0",21,0)
 Q:(GMRVX="BP"!(GMRVX="B"))&($G(GMRVBP2)="")
"RTN","GMVSAS0",22,0)
 I (GMRVX="BP"!(GMRVX="B")),(GMRVBP2'<GMRVHI(0)!(GMRVBP2'>GMRVLO(0))) S GMRVX(1)=1
"RTN","GMVSAS0",23,0)
 Q
"RTN","GMVSC0")
0^258^B17816371
"RTN","GMVSC0",1,0)
GMVSC0 ;HOIFO/MD,YH,FT-CUMULATIVE VITALS/MEASUREMENTS FOR PATIENT OVER GIVEN DATE RANGE ;10/25/02  10:29
"RTN","GMVSC0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVSC0",3,0)
 ;
"RTN","GMVSC0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVSC0",5,0)
 ; #10039 - FILE 42 references     (supported)
"RTN","GMVSC0",6,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVSC0",7,0)
 ; #10103 - ^XLFDT calls           (supported)
"RTN","GMVSC0",8,0)
 ;
"RTN","GMVSC0",9,0)
EN1(RESULT,GMVDATA) ; GMV CUMULATIVE REPORT [RPC entry point]
"RTN","GMVSC0",10,0)
 ; Cumulative Vitals Report
"RTN","GMVSC0",11,0)
 ; DFN      - patient internal entry number (FILE 2)
"RTN","GMVSC0",12,0)
 ; GMRVSDT  - start date/time of report range
"RTN","GMVSC0",13,0)
 ; GMRVFDT  - end date/time of report range
"RTN","GMVSC0",14,0)
 ; GMVDEV   - device name
"RTN","GMVSC0",15,0)
 ; GMVIEN   - device internal entry name (FILE 3.5)
"RTN","GMVSC0",16,0)
 ; GMVPDT   - date/time to print the report
"RTN","GMVSC0",17,0)
 ; GMVWARD  - ward internal entry number (FILE 42)
"RTN","GMVSC0",18,0)
 ; GMVHLOC  - hospital location internal entry number (FILE 44)
"RTN","GMVSC0",19,0)
 ; GMVRMLST - list of room numbers separated by commas (e.g., 200,210)
"RTN","GMVSC0",20,0)
 ;
"RTN","GMVSC0",21,0)
 N DFN,GMRVSDT,GMRVFDT,GMVDEV,GMVIEN,GMVPDT,GMVWARD,GMVHLOC,GMVRMLST
"RTN","GMVSC0",22,0)
 S DFN=$P(GMVDATA,U,1),GMRVSDT=$P(GMVDATA,U,2),GMRVFDT=$P(GMVDATA,U,3),GMVDEV=$P(GMVDATA,U,5),GMVIEN=+$P(GMVDATA,U,6),GMVPDT=$P(GMVDATA,U,7),GMVWARD=$P(GMVDATA,U,8),GMVHLOC=$P(GMVDATA,U,9),GMVRMLST=$P(GMVDATA,U,10)
"RTN","GMVSC0",23,0)
 S ZTIO=GMVDEV ;device
"RTN","GMVSC0",24,0)
 S ZTDTH=$S($G(GMVPDT)>0:GMVPDT,1:$$NOW^XLFDT()) ;date/time to print
"RTN","GMVSC0",25,0)
 S (ZTSAVE("DFN"),ZTSAVE("GMRVSDT"),ZTSAVE("GMRVFDT"))=""
"RTN","GMVSC0",26,0)
 S (ZTSAVE("GMVWARD"),ZTSAVE("GMVHLOC"),ZTSAVE("GMVRMLST"))=""
"RTN","GMVSC0",27,0)
 S ZTDESC="Cumulative vital/measurement report"
"RTN","GMVSC0",28,0)
 S ZTRTN="START^GMVSC0"
"RTN","GMVSC0",29,0)
 D ^%ZTLOAD
"RTN","GMVSC0",30,0)
 S RESULT=$S($G(ZTSK)>0:"Report sent to device. Task #: "_ZTSK,1:"Unable to task the report.")
"RTN","GMVSC0",31,0)
 K ZTSK,ZTIO,ZTDTH,ZTSAVE,ZTDESC,ZTRTN
"RTN","GMVSC0",32,0)
 Q
"RTN","GMVSC0",33,0)
START ; Start the report output
"RTN","GMVSC0",34,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","GMVSC0",35,0)
 ; if selected roombeds, then set up GMVROOM array
"RTN","GMVSC0",36,0)
 I $L(GMVRMLST)>0 D
"RTN","GMVSC0",37,0)
 .F GMVLOOP=1:1 Q:$P(GMVRMLST,",",GMVLOOP)=""  D
"RTN","GMVSC0",38,0)
 ..S GMVROOM($P(GMVRMLST,",",GMVLOOP))=""
"RTN","GMVSC0",39,0)
 ..Q
"RTN","GMVSC0",40,0)
 .Q
"RTN","GMVSC0",41,0)
 S GMVEDB=$S(DFN>0:"P",GMVRMLST]"":"S",1:"A") ;P is one patient, A is whole ward, S is selected rooms
"RTN","GMVSC0",42,0)
 S GMVWARD(1)=$S(GMVWARD>0:$P($G(^DIC(42,GMVWARD,0)),U,1),1:"") ;ward name
"RTN","GMVSC0",43,0)
 I $G(GMVEDB)="P" D
"RTN","GMVSC0",44,0)
 .D DEM^VADPT,INP^VADPT
"RTN","GMVSC0",45,0)
 .S GMRRMBD=$S(VAIN(5)'="":VAIN(5),1:"  BLANK") ;roombed
"RTN","GMVSC0",46,0)
 .S GMVNAME=$S(VADM(1)'="":VADM(1),1:"  BLANK") ;patient name
"RTN","GMVSC0",47,0)
 .S GMVWARD=$P(VAIN(4),"^") ;ward ien
"RTN","GMVSC0",48,0)
 .S GMVWARD(1)=$P(VAIN(4),"^",2) ;ward name
"RTN","GMVSC0",49,0)
 .D KVAR^VADPT K VA ;kill VADPT variables
"RTN","GMVSC0",50,0)
 .S ^TMP($J,GMRRMBD,GMVNAME,DFN)=""
"RTN","GMVSC0",51,0)
 E  D WARD^GMVDS1 ;returns TMP global with list of patients
"RTN","GMVSC0",52,0)
 S (GMROUT,GMRPG)=0
"RTN","GMVSC0",53,0)
 S GMVRANGE=$$FMTE^XLFDT(GMRVSDT)_"-"_$$FMTE^XLFDT(GMRVFDT)
"RTN","GMVSC0",54,0)
 D NOW^%DTC S Y=% D D^DIQ
"RTN","GMVSC0",55,0)
 S GMRPDT=$P(Y,"@")_" ("_$P($P(Y,"@",2),":",1,2)_")"
"RTN","GMVSC0",56,0)
 S $P(GMRDSH,"-",80)=""
"RTN","GMVSC0",57,0)
 U IO
"RTN","GMVSC0",58,0)
 S GMRRMBD=""
"RTN","GMVSC0",59,0)
 N GPEDIS S GPEDIS=$O(^GMRD(120.52,"B","DORSALIS PEDIS",0)) Q:GPEDIS'>0
"RTN","GMVSC0",60,0)
 F  S GMRRMBD=$O(^TMP($J,GMRRMBD)) Q:GMRRMBD=""!GMROUT  S GMRNAM="" F  S GMRNAM=$O(^TMP($J,GMRRMBD,GMRNAM)) Q:GMRNAM=""!GMROUT  S DFN=0 F  S DFN=$O(^TMP($J,GMRRMBD,GMRNAM,DFN)) Q:DFN'>0!GMROUT  S GMRPG=0 D WRT Q:GMROUT  D EN1^GMVSC1
"RTN","GMVSC0",61,0)
Q ; kill variables and quit
"RTN","GMVSC0",62,0)
 D Q^GMVSC1
"RTN","GMVSC0",63,0)
 K ^TMP($J)
"RTN","GMVSC0",64,0)
 K GMRBMI,GMRVHT,GMRINF,GMRPG,GMREDB,GMRNAM,GMRRMBD,GMRVWLOC,GMRWARD,GMRMSL,GMRROOM,GMRRMST,GMRVHLOC,GMRLEN,GMRI,GMROUT,GMRVSDT,GMRVFDT,GPRT,GMVLOOP
"RTN","GMVSC0",65,0)
 K GMVRMLST,GMVRANGE
"RTN","GMVSC0",66,0)
 D ^%ZISC
"RTN","GMVSC0",67,0)
 Q
"RTN","GMVSC0",68,0)
FOOTER ;REPORT FOOTER {called from GMVSC1, GMVSC2} 
"RTN","GMVSC0",69,0)
 W !!,"*** (E) - Error entry",!! W:VADM(1)'="" ?$X-3,$E(VADM(1),1,15) W:VADM(2)'="" ?17,$P(VADM(2),"^",2) W:VADM(3)'="" ?30,$P(VADM(3),"^",2) W:VADM(4)'="" ?43,$P(VADM(4),"^")_" YRS"
"RTN","GMVSC0",70,0)
 W:VADM(5)'="" ?51,$P(VADM(5),"^",2)
"RTN","GMVSC0",71,0)
 W ?65,"VAF 10-7987j" W !,"Unit: "_$S($P(VAIN(4),"^",2)'="":$P(VAIN(4),"^",2),1:"     "),?32,"Room: "_$S($P(VAIN(5),"^")'="":$P(VAIN(5),"^"),1:"   "),!
"RTN","GMVSC0",72,0)
 I '$D(GMRVHLOC) S GMRVHLOC=$$HOSPLOC^GMVUTL1(+$G(VAIN(4)))
"RTN","GMVSC0",73,0)
 W "Division: "_$$DIVISION^GMVUTL1(+GMRVHLOC),!
"RTN","GMVSC0",74,0)
 Q
"RTN","GMVSC0",75,0)
WRT ;
"RTN","GMVSC0",76,0)
 S GMR1ST=1
"RTN","GMVSC0",77,0)
 K GMRSITE
"RTN","GMVSC0",78,0)
 D DEM^VADPT,INP^VADPT
"RTN","GMVSC0",79,0)
 S GWARD=$S($P(VAIN(4),"^",2)'="":$P(VAIN(4),"^",2),1:"   ")
"RTN","GMVSC0",80,0)
 S GBED=$S(VAIN(5)'="":$P(VAIN(5),"^"),1:"   ")
"RTN","GMVSC0",81,0)
 D HDR^GMVSC2
"RTN","GMVSC0",82,0)
 Q
"RTN","GMVSC1")
0^259^B8913074
"RTN","GMVSC1",1,0)
GMVSC1 ;HOIFO/YH,FT-CUMULATIVE V/M - CONTINUED ;12/18/01  10:53
"RTN","GMVSC1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVSC1",3,0)
 ;
"RTN","GMVSC1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVSC1",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVSC1",6,0)
 ;
"RTN","GMVSC1",7,0)
EN1 ; ENTRY TO PRINT REPORT FROM TASKMAN {called from GMVSC0}
"RTN","GMVSC1",8,0)
 K ^TMP($J,"GMRV"),GMRVDT
"RTN","GMVSC1",9,0)
 S (GMRVHT,GMROUT,GMRDATE(0))=0
"RTN","GMVSC1",10,0)
 F GMRVTY="T","P","R","BP","HT","WT","CVP","CG","PO2","PN"  S GMRVITY=$O(^GMRD(120.51,"C",GMRVTY,0)) I GMRVITY>0 D SETAR
"RTN","GMVSC1",11,0)
 I $O(^TMP($J,"GMRV",0))'>0 W !,"THERE IS NO DATA FOR THIS REPORT" G QT
"RTN","GMVSC1",12,0)
 F GMRDATE=0:0 S GMRDATE=$O(GMRVDT(GMRDATE)) Q:GMRDATE'>0!GMROUT  I $D(^TMP($J,"GMRV",GMRDATE)) D PRT Q:GMROUT
"RTN","GMVSC1",13,0)
QT ;
"RTN","GMVSC1",14,0)
 I IOSL'<($Y+10) F X=1:1 W ! Q:IOSL<($Y+10)
"RTN","GMVSC1",15,0)
 I 'GMROUT W ! D FOOTER^GMVSC0
"RTN","GMVSC1",16,0)
 K ^TMP($J,"GMRV"),^TMP($J,"OTHR"),GOTHR,GMRV,GMRVDT
"RTN","GMVSC1",17,0)
 Q
"RTN","GMVSC1",18,0)
Q ; KILL VARIABLES
"RTN","GMVSC1",19,0)
 K ^TMP($J)
"RTN","GMVSC1",20,0)
 K GMRZZ,GMRVARY
"RTN","GMVSC1",21,0)
 K GMRVER,GDATA,GMRST,GERROR,GERST,GBED,GWARD,DFN,GX,GMR1ST,GMRDAT,GMRDATE,GMRDSH,GMRDT,GMRLN,GMRPDT,GMRSP,GMRVDA,GMRVITY,GMRX,GMRY,GMRVTY,GMRSITE,GMRVX,POP,DIPGM,%T,GMRQUAL,GMROUT,GMRPG,GFLAG
"RTN","GMVSC1",22,0)
 D KVAR^VADPT K VA
"RTN","GMVSC1",23,0)
 D ^%ZISC ;???
"RTN","GMVSC1",24,0)
 Q
"RTN","GMVSC1",25,0)
SETAR ;
"RTN","GMVSC1",26,0)
 F GMRDT=0:0 S GMRDT=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRDT)) Q:GMRDT'>0  S GMRDATE=9999999-GMRDT I '(GMRDATE>GMRVFDT!(GMRDATE<GMRVSDT)) D SETND
"RTN","GMVSC1",27,0)
 Q
"RTN","GMVSC1",28,0)
SETND ;
"RTN","GMVSC1",29,0)
 F GMRVDA=0:0 S GMRVDA=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRDT,GMRVDA)) Q:GMRVDA'>0  D SETUT
"RTN","GMVSC1",30,0)
 Q
"RTN","GMVSC1",31,0)
SETUT ;
"RTN","GMVSC1",32,0)
 S ^TMP($J,"GMRV",+$E(GMRDATE,1,12),GMRVTY,GMRVDA)=$S('$D(^GMR(120.5,GMRVDA,2)):0,1:+$P(^(2),"^"))
"RTN","GMVSC1",33,0)
 S GMRVDT(+$E(GMRDATE,1,12))=""
"RTN","GMVSC1",34,0)
 Q
"RTN","GMVSC1",35,0)
PRT ;PRINT V/M BY DATE/TIME
"RTN","GMVSC1",36,0)
 D:IOSL<($Y+9) HDR^GMVSC2 Q:GMROUT
"RTN","GMVSC1",37,0)
 S Y=GMRDATE X ^DD("DD") I $P(GMRDATE,".")'=GMRDATE(0) W !,$E(GMRDATE,4,5)_"/"_$E(GMRDATE,6,7)_"/"_$E(GMRDATE,2,3) S GMRDATE(0)=$P(GMRDATE,".")
"RTN","GMVSC1",38,0)
 D:IOSL<($Y+9) HDR^GMVSC2 Q:GMROUT  W !,$P($P(Y,"@",2),":",1,2)
"RTN","GMVSC1",39,0)
 I $D(^TMP($J,"GMRV",GMRDATE)) D
"RTN","GMVSC1",40,0)
 .K GMRLN,GERROR F GMRVTY="T","P","R","BP","HT","WT","CVP","CG","PO2","PN" S GPRT(GMRVTY)=0 I $D(^TMP($J,"GMRV",GMRDATE,GMRVTY)) F GMRVDA=0:0 S GMRVDA=$O(^TMP($J,"GMRV",GMRDATE,GMRVTY,GMRVDA)) Q:GMRVDA'>0!GMROUT  D SETLN^GMVSC2
"RTN","GMVSC1",41,0)
 Q
"RTN","GMVSC2")
0^260^B15927181
"RTN","GMVSC2",1,0)
GMVSC2 ;HIRMFO/YH,FT-CUMULATIVE V/M - CONTINUED ;12/18/01  10:54
"RTN","GMVSC2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVSC2",3,0)
 ;
"RTN","GMVSC2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVSC2",5,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVSC2",6,0)
 ;
"RTN","GMVSC2",7,0)
SETLN ; {called from GMVSC1}
"RTN","GMVSC2",8,0)
 S GMRVER=^TMP($J,"GMRV",GMRDATE,GMRVTY,GMRVDA) N GMRVPO
"RTN","GMVSC2",9,0)
 D:IOSL<($Y+9) HDR Q:GMROUT  W ! W:GMRVER "(E)"
"RTN","GMVSC2",10,0)
 I GPRT(GMRVTY)=0 D
"RTN","GMVSC2",11,0)
 . W ?4,$S(GMRVTY="T":"T: ",GMRVTY="P":"P: ",GMRVTY="R":"R: ",GMRVTY="BP":"B/P: ",GMRVTY="WT":"Wt: ",GMRVTY="HT":"Ht: ",GMRVTY="CG":"Circumference/Girth: ",GMRVTY="CVP":"Central Venous Pressure: ",GMRVTY="PO2":"Pulse Oximetry: ",1:"")
"RTN","GMVSC2",12,0)
 . I GMRVTY="PN" W ?4,"Pain: "
"RTN","GMVSC2",13,0)
 S GPRT(GMRVTY)=1
"RTN","GMVSC2",14,0)
 S GMRDAT=$G(^GMR(120.5,GMRVDA,0))
"RTN","GMVSC2",15,0)
 I "PRBPCVPCGPO2PN"[GMRVTY S GMRVX=GMRVTY,GMRVX(0)=$P(GMRDAT,"^",8) D
"RTN","GMVSC2",16,0)
 .  I "UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(GMRVX(0)) W ?9,GMRVX(0) Q
"RTN","GMVSC2",17,0)
 . I GMRVTY="PN" D
"RTN","GMVSC2",18,0)
 . . I GMRVX(0)=0 W ?9,GMRVX(0)_" - No pain" Q
"RTN","GMVSC2",19,0)
 . . I GMRVX(0)=99 W ?9,GMRVX(0)_" - Unable to respond" Q
"RTN","GMVSC2",20,0)
 . . I GMRVX(0)=10 W ?9,GMRVX(0)_" - Worst imaginable pain" Q
"RTN","GMVSC2",21,0)
 . . W ?9,GMRVX(0) Q
"RTN","GMVSC2",22,0)
 . ;I GMRVTY'="PN" W ?9,GMRVX(0)
"RTN","GMVSC2",23,0)
 . D EN1^GMVSAS0
"RTN","GMVSC2",24,0)
 . I GMRVTY="P",$D(^GMR(120.5,GMRVDA,5,"B",GPEDIS)),$P(GMRDAT,"^",8)=1 S GMRVX(1)=""
"RTN","GMVSC2",25,0)
 . S Z=$S(GMRVTY="CG":$J($P(GMRDAT,"^",8),0,2),GMRVTY="CVP":$J($P(GMRDAT,"^",8),0,1),GMRVTY'="BP":$J($P(GMRDAT,"^",8),3,0),1:$P(GMRDAT,"^",8)) D:GMRVTY'="BP" BLNK W:GMRVTY'="PN" ?9,Z_$S('$D(GMRVX(1)):" ",'GMRVX(1):"",1:"*")
"RTN","GMVSC2",26,0)
 . I GMRVTY="CG" W " in ("_$J(Z/.3937,0,2)_" cm)"
"RTN","GMVSC2",27,0)
 . I GMRVTY="CVP" W " cmH2O ("_$J(Z/1.36,0,1)_" mmHg)"
"RTN","GMVSC2",28,0)
 . I GMRVTY="PO2" S GMRVPO=$P(GMRDAT,"^",10) W "%"_$S(GMRVPO'="":" with supplemental O2 "_$S(GMRVPO["l/min":$P(GMRVPO," l/min")_"L/min",1:"")_$S(GMRVPO["l/min":$P(GMRVPO," l/min",2),1:GMRVPO),1:"")
"RTN","GMVSC2",29,0)
 I GMRVTY="T" S X=$P(GMRDAT,"^",8) D
"RTN","GMVSC2",30,0)
 . I X'>0 W ?9,X Q
"RTN","GMVSC2",31,0)
 . S GMRVX=GMRVTY,GMRVX(0)=X D EN1^GMVSAS0
"RTN","GMVSC2",32,0)
 . D EN1^GMVUTL S:'Y Y="" S Z=$J(X,5,1) D BLNK W ?9,Z_" F " S Z=$J(Y,4,1) D BLNK W "("_Z_" C)"_$S('$D(GMRVX(1)):" ",'GMRVX(1):"",1:"*")
"RTN","GMVSC2",33,0)
 I GMRVTY="HT" S X=$P(GMRDAT,"^",8) D
"RTN","GMVSC2",34,0)
 . I X'>0 W ?9,X Q
"RTN","GMVSC2",35,0)
 . D EN2^GMVUTL S:'Y Y="" S Z=$J(X,5,2) D BLNK W ?9,Z_" in " S Z=$J(Y,5,2) D BLNK W "("_Z_" cm)" I 'GMRVER S GMRVHT=Z/100
"RTN","GMVSC2",36,0)
 I GMRVTY="WT" S X=$P(GMRDAT,"^",8) D
"RTN","GMVSC2",37,0)
 . I X'>0 W ?9,X Q
"RTN","GMVSC2",38,0)
 . D EN3^GMVUTL S:'Y Y="" S Z=$J(X,7,2) D BLNK W ?9,Z_" lb " S Z=$J(Y,6,2) D BLNK W "("_Z_" kg)"
"RTN","GMVSC2",39,0)
 Q:+$P(GMRDAT,"^",8)'>0&(+$P($G(^GMR(120.5,GMRVDA,5,0)),"^",4)'>0)  S GMRVITY=+$P(GMRDAT,"^",3)
"RTN","GMVSC2",40,0)
 K GMRVARY S (GMRZZ,GMRVARY)="" I $P($G(^GMR(120.5,GMRVDA,5,0)),"^",4)>0 D
"RTN","GMVSC2",41,0)
 . D CHAR^GMVCHAR(GMRVDA,.GMRVARY,GMRVITY) S GMRZZ=$$WRITECH^GMVCHAR(GMRVDA,.GMRVARY,9) S:GMRZZ'=""&(GMRVTY'="PO2") GMRZZ=" ("_GMRZZ_")"
"RTN","GMVSC2",42,0)
 . W:GMRVTY="PO2" !,?8," via " W GMRZZ
"RTN","GMVSC2",43,0)
 I GMRVTY="WT",'GMRVER S GMRBMI="",GMRBMI(1)=$P(GMRDAT,"^"),GMRBMI(2)=+$P(GMRDAT,"^",8) D CALBMI^GMVBMI(.GMRBMI) W:GMRBMI>0 !,?4,"Body Mass Index: "_GMRBMI
"RTN","GMVSC2",44,0)
 K Z
"RTN","GMVSC2",45,0)
 Q
"RTN","GMVSC2",46,0)
HDR ; Report header
"RTN","GMVSC2",47,0)
 I 'GMR1ST D FOOTER^GMVSC0
"RTN","GMVSC2",48,0)
 W:$Y>0 @IOF
"RTN","GMVSC2",49,0)
 S GMRPG=GMRPG+1,GFLAG=1 ;what is GFLAG?
"RTN","GMVSC2",50,0)
 W !,GMRPDT,?25,"Cumulative Vitals/Measurements Report",?70,"Page ",GMRPG
"RTN","GMVSC2",51,0)
 W !?25,GMVRANGE ;report date range
"RTN","GMVSC2",52,0)
 W !,$E(GMRDSH,1,78)
"RTN","GMVSC2",53,0)
 I 'GMR1ST,$P(GMRDATE,".")=GMRDATE(0) W !,$E(GMRDATE(0),4,5)_"/"_$E(GMRDATE(0),6,7)_"/"_$E(GMRDATE,2,3)_" (continued)",!
"RTN","GMVSC2",54,0)
 ; include date range in header
"RTN","GMVSC2",55,0)
 S GMR1ST=0
"RTN","GMVSC2",56,0)
 Q
"RTN","GMVSC2",57,0)
BLNK ;
"RTN","GMVSC2",58,0)
 F I=1:1:$L(Z) Q:$E(Z,I)'=" "
"RTN","GMVSC2",59,0)
 S Z=$E(Z,I,$L(Z))
"RTN","GMVSC2",60,0)
 Q
"RTN","GMVSR0")
0^261^B30880367
"RTN","GMVSR0",1,0)
GMVSR0 ;HOIFO/RM,YH,FT-VITAL SIGNS RECORD SF 511 ;10/25/02  10:39
"RTN","GMVSR0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVSR0",3,0)
 ;
"RTN","GMVSR0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVSR0",5,0)
 ; #10039 - FILE 42 references     (supported)
"RTN","GMVSR0",6,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVSR0",7,0)
 ; #10103 - ^XLFDT calls           (supported)
"RTN","GMVSR0",8,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVSR0",9,0)
 ;
"RTN","GMVSR0",10,0)
EN1(RESULT,GMVDATA) ; GMV PT GRAPH [RPC entry point]
"RTN","GMVSR0",11,0)
 ; Queues a graphic report to a printer
"RTN","GMVSR0",12,0)
 ; GMVDATA=DFN^START DT^END DT^TYPE OF GRAPH^DEVICE^DEVICE IEN(#3.5)^
"RTN","GMVSR0",13,0)
 ;         DATE/TIME TO PRINT REPORT^WARD IEN^LOCATION IEN^ROOM LIST
"RTN","GMVSR0",14,0)
 ;
"RTN","GMVSR0",15,0)
 ; DFN      - patient internal entry number
"RTN","GMVSR0",16,0)
 ; GMRSTRT  - start date/time of report range (FileMan format)
"RTN","GMVSR0",17,0)
 ; GMRFIN   - end date/time of report range (FileMan format)
"RTN","GMVSR0",18,0)
 ; GRAPH    - number of the graph (1-5)
"RTN","GMVSR0",19,0)
 ; GMVDEV   - device name
"RTN","GMVSR0",20,0)
 ; GMVIEN   - device internal entry number
"RTN","GMVSR0",21,0)
 ; GMVPDT   - date/time to print the report
"RTN","GMVSR0",22,0)
 ; GMVWARD  - ward internal entry number
"RTN","GMVSR0",23,0)
 ; GMVHLOC  - hospital location internal entry number
"RTN","GMVSR0",24,0)
 ; GMVRMLST - list of rooms separated by a comma (e.g., 210,220,230) 
"RTN","GMVSR0",25,0)
 ;
"RTN","GMVSR0",26,0)
 N DFN,G,GMROUT,GFLAG,GRAPH,GMRSTRT,GMRFIN,GMVPDT,GMVDEV,GMVIEN,GMREDB
"RTN","GMVSR0",27,0)
 N GMRLEN,GMVHLOC,GMRWARD,GMVRMLST,GSTRFIN,GMVDEVUC
"RTN","GMVSR0",28,0)
 S DFN=+$P(GMVDATA,"^"),GMRSTRT=$P(GMVDATA,"^",2),GMRFIN=$P(GMVDATA,"^",3),GRAPH=$P(GMVDATA,"^",4),GMVDEV=$P(GMVDATA,"^",5),GMVIEN=+$P(GMVDATA,"^",6),GMVPDT=$P(GMVDATA,"^",7)
"RTN","GMVSR0",29,0)
 S GMRWARD=$P(GMVDATA,"^",8),GMVHLOC=$P(GMVDATA,"^",9),GMVRMLST=$P(GMVDATA,"^",10)
"RTN","GMVSR0",30,0)
 S (GMROUT,GFLAG)=0
"RTN","GMVSR0",31,0)
 S ZTIO=GMVDEV ;device
"RTN","GMVSR0",32,0)
 S ZTDTH=$S($G(GMVPDT)>0:GMVPDT,1:$$NOW^XLFDT()) ;date/time to print
"RTN","GMVSR0",33,0)
 D:GRAPH<6 DATELN^GMVSR0
"RTN","GMVSR0",34,0)
 S GMREDB=$S(DFN>0:"P",GMVRMLST'="":"S",1:"A")
"RTN","GMVSR0",35,0)
 S GMRWARD(1)=$S(GMRWARD>0:$P($G(^DIC(42,GMRWARD,0)),U,1),1:"") ;ward name
"RTN","GMVSR0",36,0)
 I $G(GMREDB)="P" D
"RTN","GMVSR0",37,0)
 .D DEM^VADPT S GMRNAM=$P(VADM(1),"^"),SSN=$P(VADM(2),"^",2)
"RTN","GMVSR0",38,0)
 .D INP^VADPT ;get inpatient data
"RTN","GMVSR0",39,0)
 .S GMRWARD(1)=$P(VAIN(4),U,2),GMRWARD=$P(VAIN(4),U) ;inpatient location
"RTN","GMVSR0",40,0)
 .S GMRRMBD=$S(VAIN(5)'="":VAIN(5),1:"  BLANK") ;roombed
"RTN","GMVSR0",41,0)
 .D KVAR^VADPT K VA
"RTN","GMVSR0",42,0)
 .Q
"RTN","GMVSR0",43,0)
DEV ;
"RTN","GMVSR0",44,0)
 S GMVDEVUC=$$UP^XLFSTR(GMVDEV) ;device name in uppercase
"RTN","GMVSR0",45,0)
 I GRAPH=5,GMVDEVUC'["KYOCERA",GMVDEVUC'["HPLASER",GMVDEVUC'["HP LASER" D  Q
"RTN","GMVSR0",46,0)
 .S RESULT="Sorry, you must select a Kyocera or HP Laser printer for the Pain Chart."
"RTN","GMVSR0",47,0)
 .Q
"RTN","GMVSR0",48,0)
 S ZTRTN=$S(GMREDB="P":"EN2^GMVSR0",1:"EN3^GMVSR0")
"RTN","GMVSR0",49,0)
 S ZTDESC="V/M GRAPHIC REPORTS"
"RTN","GMVSR0",50,0)
 F G="GRAPH","GMROUT","DFN","GMREDB","GMRNAM","SSN","GMRWARD","GMRSTRT","GMRFIN","GMRWARD(","GFLAG","GSTRFIN","GMREDB","GMVRMLST" S ZTSAVE(G)=""
"RTN","GMVSR0",51,0)
 D ^%ZTLOAD
"RTN","GMVSR0",52,0)
 S RESULT=$S($G(ZTSK)>0:"Report sent to device. Task #: "_ZTSK,1:"Unable to task the report.")
"RTN","GMVSR0",53,0)
 K ZTSK,ZTIO,ZTRTN,ZTDESC,ZTSAVE,ZTDTH
"RTN","GMVSR0",54,0)
 Q
"RTN","GMVSR0",55,0)
EN2 ; Start the graphic report
"RTN","GMVSR0",56,0)
 ; Note: Graphic reports must go to a printer
"RTN","GMVSR0",57,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","GMVSR0",58,0)
 N GAPICAL,GRADIAL,GBRACHI
"RTN","GMVSR0",59,0)
 S GAPICAL=$O(^GMRD(120.52,"B","APICAL",0)),GRADIAL=$O(^GMRD(120.52,"B","RADIAL",0)),GBRACHI=$O(^GMRD(120.52,"B","BRACHIAL",0))
"RTN","GMVSR0",60,0)
 I IOST["KYOCERA"!(IOST["Kyocera") S GROUTN=$S(GRAPH=1:"EN1^GMVGR0",GRAPH=2:"EN1^GMVBP0",GRAPH=3:"EN1^GMVWT0",GRAPH=4:"EN1^GMVKPO0",GRAPH=5:"^GMVKPN0",1:"") D:GROUTN'="" @GROUTN G:"Pp"[GMREDB Q1 Q
"RTN","GMVSR0",61,0)
 I $$UP^XLFSTR(IOST)["HPLASER" S GROUTN=$S(GRAPH=1:"EN1^GMVHG0",GRAPH=2:"EN1^GMVHB0",GRAPH=3:"EN1^GMVHW0",GRAPH=4:"EN1^GMVHPO0",GRAPH=5:"EN1^GMVHPN0",1:"") D:GROUTN'="" @GROUTN G:"Pp"[GMREDB Q1 Q
"RTN","GMVSR0",62,0)
 I GRAPH=2 D ^GMVLBP0 G:"Pp"[GMREDB Q1 Q
"RTN","GMVSR0",63,0)
 I GRAPH=3 D ^GMVLWT0 G:"Pp"[GMREDB Q1 Q
"RTN","GMVSR0",64,0)
 I GRAPH=4 D ^GMVLPO0 G:"Pp"[GMREDB Q1 Q
"RTN","GMVSR0",65,0)
 I GRAPH=5 S:'$G(GMRPERR) GMRPERR=1 G:"Pp"[GMREDB Q1 Q
"RTN","GMVSR0",66,0)
 S GMRS=(9999999-GMRFIN)-.0001,GMRQ=9999999-GMRSTRT
"RTN","GMVSR0",67,0)
 F GMRTY="B","P","R","T","H","W","PO2","CVP","CG","PN" D SETT^GMVSR1
"RTN","GMVSR0",68,0)
 U IO D SF511^GMVSR1
"RTN","GMVSR0",69,0)
Q1 ;
"RTN","GMVSR0",70,0)
 K J,G,GMR,GMR3,GMRDAT,GMRDT,GMREN,GMRHDR1,GMRHDR10,GMRHDR11,GMRHDR2,GMRHT,GMRI,GMRJ,GMRK,GMRLINE,GMRMSL,GMRNM,GMROLD,GMRP,GMRPDIF,GMRT,GMRX,GMRTY,GMRPG,GMRPGC,GMRPGS,GMRPHI,GMRPLO,GMRTDIF,GMRTHI,GMRTLO,GMRTNM,GMRX1,GMRX2
"RTN","GMVSR0",71,0)
 D KVAR^VADPT K VA,%T
"RTN","GMVSR0",72,0)
 K GVAR,GMRDIV,GMRHT,GMRQUAL,GMRS,GMRQ,GMRPOFF,GMRTOFF,GMRVWLOC,GMRVX,DIK,%ZIS,%DT,DIPGM,GMRLEN,GMRRMST,GMRVHLOC,GDA,GMRINF,GLINE,GMRVARY,GMRPERR,GMRVPS,GMVROOM,GMVWARD,GMVLOOP
"RTN","GMVSR0",73,0)
 W:$E(IOST)="P"!$D(IO("S"))&($$UP^XLFSTR(IOST)'["HPLASER") !
"RTN","GMVSR0",74,0)
 Q:'("Pp"[GMREDB)
"RTN","GMVSR0",75,0)
Q2 ;
"RTN","GMVSR0",76,0)
 K ^TMP($J),GMRII,GMRQUAL,GMREDB,GMROUT,GMRROOM,GMRSTRT,GMRFIN,GMRNAM,GMRRMBD,GMRSITE,GMRVHLOC,GMRWARD,POP,SSN,DFN,ZTIO,ZTSK,GDT,GDTA,GFOUND,GMRAGE,GMRBED,GMRBTH,GMRCOL,GMRHLOC,GMROP,GMRSEX,GMRVADM,GRPT,GSUB,GTYPE1
"RTN","GMVSR0",77,0)
 K GSTRFIN,GMRVFLAG,SNN,GMVRMBD,GMVWRD,GRAPH,GROUTN,GIVDT,GSTAR,GSOL,GN,GNDATE,GNSHFT,GFLAG,X,Y
"RTN","GMVSR0",78,0)
 D ^%ZISC
"RTN","GMVSR0",79,0)
 Q
"RTN","GMVSR0",80,0)
EN3 ; Entry to print report for all or selected group of patients,
"RTN","GMVSR0",81,0)
 ; for ward stored in GMRWARD
"RTN","GMVSR0",82,0)
 S GMRPERR=0
"RTN","GMVSR0",83,0)
 S GMVWARD=GMRWARD ;ward ien
"RTN","GMVSR0",84,0)
 S GMVWARD(1)=GMRWARD(1) ;ward name
"RTN","GMVSR0",85,0)
 S GMVEDB=GMREDB ;A - all patients, S - selected rooms, P - 1 patient
"RTN","GMVSR0",86,0)
 ; if selected roombeds, then set up GMVROOM array
"RTN","GMVSR0",87,0)
 I $L(GMVRMLST)>0 D
"RTN","GMVSR0",88,0)
 .F GMVLOOP=1:1 Q:$P(GMVRMLST,",",GMVLOOP)=""  D
"RTN","GMVSR0",89,0)
 ..S GMVROOM($P(GMVRMLST,",",GMVLOOP))=""
"RTN","GMVSR0",90,0)
 ..Q
"RTN","GMVSR0",91,0)
 .Q
"RTN","GMVSR0",92,0)
 D WARD^GMVDS1 ;creates TMP global w/patients in ward or rooms 
"RTN","GMVSR0",93,0)
 S GMRROOM=""
"RTN","GMVSR0",94,0)
 F GMRII=0:0 S GMRROOM=$O(^TMP($J,GMRROOM)) Q:GMRROOM=""  S GMRNAM="" F GMRII=0:0 S GMRNAM=$O(^TMP($J,GMRROOM,GMRNAM)) Q:GMRNAM=""  F DFN=0:0 S DFN=$O(^TMP($J,GMRROOM,GMRNAM,DFN)) Q:DFN'>0  D:DFN>0 PRT
"RTN","GMVSR0",95,0)
 D Q1
"RTN","GMVSR0",96,0)
 G Q2
"RTN","GMVSR0",97,0)
 ;
"RTN","GMVSR0",98,0)
PRT ;
"RTN","GMVSR0",99,0)
 D DEM^VADPT
"RTN","GMVSR0",100,0)
 S SSN=$P(VADM(2),"^",2) Q:$G(GMRPERR)&('$D(IO("Q")))
"RTN","GMVSR0",101,0)
 D EN2
"RTN","GMVSR0",102,0)
 Q
"RTN","GMVSR0",103,0)
 ;
"RTN","GMVSR0",104,0)
DATELN ;
"RTN","GMVSR0",105,0)
 S Y=GMRSTRT
"RTN","GMVSR0",106,0)
 X ^DD("DD")
"RTN","GMVSR0",107,0)
 S GSTRFIN=Y
"RTN","GMVSR0",108,0)
 S Y=GMRFIN
"RTN","GMVSR0",109,0)
 X ^DD("DD")
"RTN","GMVSR0",110,0)
 S GSTRFIN=GSTRFIN_" - "_Y
"RTN","GMVSR0",111,0)
 Q
"RTN","GMVSR1")
0^262^B27592616
"RTN","GMVSR1",1,0)
GMVSR1 ;HIOFO/RM,YH-PATIENT VITAL SIGNS-I/O SF 511 GRAPH - 1 ;11/6/01  16:00
"RTN","GMVSR1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVSR1",3,0)
 ;
"RTN","GMVSR1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVSR1",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVSR1",6,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVSR1",7,0)
 ;
"RTN","GMVSR1",8,0)
SF511 ;PRODUCE PATIENT VITAL SIGNS-I/O GRAPH
"RTN","GMVSR1",9,0)
 S GRPT=5,GMRHT=0 D SETIO^GMVGR0 D DEM^VADPT,INP^VADPT S GMRBTH=$P(VADM(3),"^",2),GMRNAM=VADM(1)
"RTN","GMVSR1",10,0)
 F GMRK="P","T","B","H","W","R","PO2","CVP","CG","XI1","PN" D GMRDT^GMVVS3
"RTN","GMVSR1",11,0)
 I $D(^TMP($J,"GMRVG","I")) F GMRI=0:0 S GMRI=$O(^TMP($J,"GMRVG","I",GMRI)) Q:GMRI'>0  S GFOUND=0 D CKDT^GMVVS3 S:GFOUND=0 ^TMP($J,"GMRDT",GMRI)=""
"RTN","GMVSR1",12,0)
 I $D(^TMP($J,"GMRVG","O")) F GMRI=0:0 S GMRI=$O(^TMP($J,"GMRVG","O",GMRI)) Q:GMRI'>0  S GFOUND=0 D CKDT^GMVVS3 S:GFOUND=0 ^TMP($J,"GMRDT",GMRI)=""
"RTN","GMVSR1",13,0)
 S (GMRTNM,GMRI)=0 I $D(^TMP($J,"GMRDT")) F  S GMRI=$O(^TMP($J,"GMRDT",GMRI)) Q:GMRI'>0  S GMRTNM=GMRTNM+1
"RTN","GMVSR1",14,0)
 D GRAPH K GMR3,GMRDAT,GMREN,GMRHDR1,GMRHDR11,GMRHDR10,GMRHDR2,GMRHT,GMRI,GMRJ,GMRK,GMRLINE,GDATA,GMROLD,GMRP,GMRPDIF,GMRPG,GMRPGC,GMRPGS,GMRPHI,GMRPLO,GMRPOFF,GMRSITE,GMRT,GMRTDIF,GMRTHI,GMRTLO,GMRTNM
"RTN","GMVSR1",15,0)
 K GLPRNTR,GMRTOFF,GMRTY,GMRNM,GMRVX,GMRVX1,GMRVX2,^TMP($J,"GMRDT"),^TMP($J,"GMRG"),^TMP($J,"GMR")
"RTN","GMVSR1",16,0)
 Q
"RTN","GMVSR1",17,0)
GRAPH ;
"RTN","GMVSR1",18,0)
 S:'$D(GFLAG) GFLAG=0 S GMRPGC=0,GMRX1="" F X=1:1:10 S GMRX1=GMRX1_"          "_"|"
"RTN","GMVSR1",19,0)
 S (GMRX,GMRX2)=GMRX1 F X=1:1:10 S $P(GMRX,"|",X)="__________",$P(GMRX2,"|",X)="----------"
"RTN","GMVSR1",20,0)
 S GMRPG=$S(GMRTNM=0:1,1:GMRTNM\10+$S(GMRTNM#10>0:1,1:0)) F GMRPGS=1:1:GMRPG S GMRTLO=105.8335,GMRPLO=168.335 D PAGE Q:GMROUT
"RTN","GMVSR1",21,0)
 K GDIP,GDOP,GRNDIP,GRNDOP,GSIP,GSOP Q
"RTN","GMVSR1",22,0)
PAGE ;
"RTN","GMVSR1",23,0)
 K GMRQUAL,GLINE W:'($E(IOST)'="C"&'GFLAG) @IOF S GFLAG=1,GMRPGC=GMRPGC+1 W !
"RTN","GMVSR1",24,0)
 I '$D(^TMP($J,"GMR")) W !!!!!!!!,?5,"THERE  IS  NO  DATA  FOR  THIS  REPORT" X "F Y=$Y:1:(IOSL-6) W !" D FOOTER^GMVVS2 Q
"RTN","GMVSR1",25,0)
 W ! D DATES^GMVVS2 W !,?3,"Pulse Temp/F/C",?17,"|",?18,GMRX
"RTN","GMVSR1",26,0)
 F GMRI=0:0 Q:$Y>43  W ! D SETHD^GMVVS4 W ?2,$S(GMRHDR1'["41.1":GMRHDR1,1:""),?16,$S(GMR3!($Y=28):"-",1:""),?17,"|" D DATAPRT^GMVVS4
"RTN","GMVSR1",27,0)
 W !,?17,"|",GMRX2 F GMRI="T","P","R","B","B1","B2","W","H","PO2","CVP","CG","PN" S GMRLINE(GMRI)=GMRX1
"RTN","GMVSR1",28,0)
 S (GMRLINE("H1"),GMRLINE("W1"),GMRLINE("BMI"),GMRLINE("P1"),GMRLINE("OX1"),GMRLINE("OX2"),GMRLINE("OX3"),GMRLINE("CVP1"),GMRLINE("CG1"),GMRLINE("CG2"))=GMRX1
"RTN","GMVSR1",29,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>10  F GMRI="T","P","R","H","W","PO2","CVP","CG","PN" D:$D(^TMP($J,"GMR",GMRI,GMRDT)) STLNP^GMVVS1
"RTN","GMVSR1",30,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>10  D BP^GMVVS2
"RTN","GMVSR1",31,0)
 F GMRI="T","P","P1","R","PO2","OX1","OX2","OX3","B","B1","B2","W","W1","BMI","H","H1","CG","CG2","CVP","CVP1" D
"RTN","GMVSR1",32,0)
 .S G=$S(GMRI="T":"Temperature",GMRI="P":"Pulse",GMRI="R":"Respiration",GMRI="W":"Weight (lb)",GMRI="H":"Height (in)",GMRI="B":"BLOOD",GMRI="B1":"  PRESSURE",GMRI="W1":"       (kg)",GMRI="H1":"       (cm)",GMRI="BMI":"Body Mass Index",1:"")
"RTN","GMVSR1",33,0)
 . I G="" S G=$S(GMRI="PO2":"Pulse Ox.",GMRI="OX1":"  L/Min",GMRI="OX2":"  %",GMRI="OX3":"  Method",GMRI="CG":"C/G (in)",GMRI="CVP":"CVP (cm H2O)",GMRI="CVP1":"    (mm Hg)",GMRI="CG2":"    (cm)",1:"")
"RTN","GMVSR1",34,0)
 . W !,G,?17,"|",GMRLINE(GMRI)
"RTN","GMVSR1",35,0)
 D IO
"RTN","GMVSR1",36,0)
 S G="Pain" W !,G,?17,"|",GMRLINE("PN")
"RTN","GMVSR1",37,0)
 I 'GMROUT W !,?17,$$REPEAT^XLFSTR("-",111)
"RTN","GMVSR1",38,0)
 W !,"T: Temperature     P: Pulse     C/G: Circumference/Girth     * - Abnormal value     ** - Abnormal value off of graph"
"RTN","GMVSR1",39,0)
 W !,"Pain:  99 - Unable to respond  0 - No pain  10 - Worst imaginable pain"
"RTN","GMVSR1",40,0)
 W ! I $D(GMRQUAL) S GLPRNTR=1 D LEGEND^GMVLGQU F I=1:1:5 W !,GLINE(I)
"RTN","GMVSR1",41,0)
 I IOSL'<($Y+10) F X=1:1 W ! Q:IOSL<($Y+10)
"RTN","GMVSR1",42,0)
 D FOOTER^GMVVS2 S GMRDT="" F GMRNM=1:1:10 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  K ^TMP($J,"GMRDT",GMRDT)
"RTN","GMVSR1",43,0)
 K GG,GI,GMRVJ,GSYNO Q
"RTN","GMVSR1",44,0)
IO ;PRINT INTAKE/OUTPUT SECTION OF VITAL SIGNS-I/O SHEET
"RTN","GMVSR1",45,0)
 S (GMRLINE("I"),GMRLINE("O"))=GMRX1
"RTN","GMVSR1",46,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>10  S GDT=+$E(GMRDT,1,7) I $D(^TMP($J,"GMRVG","I",GDT))!($D(^TMP($J,"GMRVG","O",GDT))) D SETDATA
"RTN","GMVSR1",47,0)
 W !,"Intake(24 Hr)(cc)",?17,"|",GMRLINE("I")
"RTN","GMVSR1",48,0)
 W !,"Output(24 Hr)(cc)",?17,"|",GMRLINE("O")
"RTN","GMVSR1",49,0)
 Q
"RTN","GMVSR1",50,0)
SETDATA ; FILL GMRLINE WITH I/O DATA AND WRITE GMRLINE
"RTN","GMVSR1",51,0)
 I $D(^TMP($J,"GMRVG","I",GDT)) S GDATA=$O(^(GDT,0)) S:GDATA>0 $P(GMRLINE("I"),"|",GMRNM)=$E(GDATA_"          ",1,10) K ^TMP($J,"GMRVG","I",GDT)
"RTN","GMVSR1",52,0)
 I $D(^TMP($J,"GMRVG","O",GDT)) S GDATA=$O(^(GDT,0)) S:GDATA>0 $P(GMRLINE("O"),"|",GMRNM)=$E(GDATA_"          ",1,10) K ^TMP($J,"GMRVG","O",GDT)
"RTN","GMVSR1",53,0)
 Q
"RTN","GMVSR1",54,0)
SELECT(J) ;TYPE OF GRAPH FOR REPORT
"RTN","GMVSR1",55,0)
 N X,I W !
"RTN","GMVSR1",56,0)
TRYAGN F I=1:1:5 W !,?2,I_"  "_$P($T(GCHART+I),";;",2)
"RTN","GMVSR1",57,0)
 W !!,?2,"Select a number between 1 and 5: 1  Vital Signs Record// " S X="" R X:DTIME I '$T!(X["^") S J=0 Q
"RTN","GMVSR1",58,0)
 I X="" S J=1 Q
"RTN","GMVSR1",59,0)
 I $L(X)>2 G TRYAGN
"RTN","GMVSR1",60,0)
 I '(X?1N&(X>0&(X<6)))!(X["?") W !!,"Enter the number for the graph you wish to print.",!,"The default is Vital Signs Record.",! G TRYAGN
"RTN","GMVSR1",61,0)
 W "  ",$P($T(GCHART+X),";;",2) S J=X Q
"RTN","GMVSR1",62,0)
 Q
"RTN","GMVSR1",63,0)
WRT1 W !!,?5,$C(7),"This report must be queued to a 132 column printer.",!!
"RTN","GMVSR1",64,0)
 Q
"RTN","GMVSR1",65,0)
SETT ; SET GMRT
"RTN","GMVSR1",66,0)
 D SETT^GMVSR2 Q
"RTN","GMVSR1",67,0)
GCHART ;
"RTN","GMVSR1",68,0)
 ;;Vital Signs Record
"RTN","GMVSR1",69,0)
 ;;B/P Plotting Chart
"RTN","GMVSR1",70,0)
 ;;Weight Chart
"RTN","GMVSR1",71,0)
 ;;Pulse Oximetry/Respiratory Graph
"RTN","GMVSR1",72,0)
 ;;Pain Chart
"RTN","GMVSR2")
0^263^B6599549
"RTN","GMVSR2",1,0)
GMVSR2 ;HIOFO/YH,FT-PATIENT VITAL SIGNS-I/O SF 511 GRAPH - 2 ;11/6/01  16:01
"RTN","GMVSR2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVSR2",3,0)
 ;
"RTN","GMVSR2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVSR2",5,0)
 ; <None>
"RTN","GMVSR2",6,0)
 ;
"RTN","GMVSR2",7,0)
SETT ; SET GMRT
"RTN","GMVSR2",8,0)
 S GMRT(1)=$S(GMRTY="B":"BLOOD PRESSURE",GMRTY="P":"PULSE",GMRTY="R":"RESPIRATION",GMRTY="T":"TEMPERATURE",GMRTY="H":"HEIGHT",GMRTY="W":"WEIGHT",GMRTY="CG":"CIRCUMFERENCE/GIRTH",GMRTY="PO2":"PULSE OXIMETRY",1:"")
"RTN","GMVSR2",9,0)
 I GMRT(1)="" S GMRT(1)=$S(GMRTY="CVP":"CENTRAL VENOUS PRESSURE",1:"")
"RTN","GMVSR2",10,0)
 I GMRT(1)="" S GMRT(1)=$S(GMRTY="PN":"PAIN",1:"")
"RTN","GMVSR2",11,0)
 Q:GMRT(1)=""
"RTN","GMVSR2",12,0)
 S GMRT=$O(^GMRD(120.51,"B",GMRT(1),""))
"RTN","GMVSR2",13,0)
 I GMRT>0 F GMRX=GMRS:0 S GMRX=$O(^GMR(120.5,"AA",DFN,GMRT,GMRX)) Q:GMRX>GMRQ!(GMRX'>0)  F GMREN=0:0 S GMREN=$O(^GMR(120.5,"AA",DFN,GMRT,GMRX,GMREN)) Q:GMREN'>0  I '$D(^GMR(120.5,GMREN,2)) D BLDARR
"RTN","GMVSR2",14,0)
 Q
"RTN","GMVSR2",15,0)
BLDARR ; BUILD DATA ARRAY
"RTN","GMVSR2",16,0)
 S GMRDAT=$S($D(^GMR(120.5,GMREN,0)):^(0),1:""),GMRVX=GMRTY,GMRVX(0)=$P(GMRDAT,"^",8) D:GMRVX(0)>0!(GMRVX(0)<0)!($E(GMRVX(0))="0") EN1^GMVSAS0
"RTN","GMVSR2",17,0)
 K GMRVARY S GMRVARY="" I $P($G(^GMR(120.5,GMREN,5,0)),"^",4)>0 D CHAR^GMVCHAR(GMREN,.GMRVARY,GMRT)
"RTN","GMVSR2",18,0)
 K GG S GG="" I $O(GMRVARY(0)) D
"RTN","GMVSR2",19,0)
 . S GG(1)=0 F  S GG(1)=$O(GMRVARY(GG(1))) Q:GG(1)'>0  S GG(2)=0 F  S GG(2)=$O(GMRVARY(GG(1),GG(2))) Q:GG(2)'>0  S GG(3)="" F  S GG(3)=$O(GMRVARY(GG(1),GG(2),GG(3))) Q:GG(3)=""  S GG=GG_$S(GG="":"",1:";")_GG(3)
"RTN","GMVSR2",20,0)
 S ^TMP($J,"GMR",GMRTY,9999999-GMRX,$P(GMRDAT,"^",8))=GG_"^"_$S('$D(GMRVX(1)):"",'GMRVX(1):"",1:1)_"^^"_$P(GMRDAT,"^",10)
"RTN","GMVSR2",21,0)
 K GG Q
"RTN","GMVTBL0")
0^166^B14650188
"RTN","GMVTBL0",1,0)
GMVTBL0 ;HOIFO/YH,FT-HP LASER ;12/4/01  22:47
"RTN","GMVTBL0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVTBL0",3,0)
 ;
"RTN","GMVTBL0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVTBL0",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVTBL0",6,0)
 ;
"RTN","GMVTBL0",7,0)
EN2 ;ENTRY POINT OF CUMULATIVE TABLE
"RTN","GMVTBL0",8,0)
 S GMRHT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMVTBL0",9,0)
 S (GMROUT,GHT)=""
"RTN","GMVTBL0",10,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMVTBL0",11,0)
 F GTYPE="B","H","P","R","T","W","PO2","CVP","CG","PN" D SETT^GMVGR0
"RTN","GMVTBL0",12,0)
 S GRPT=5 D SETIO^GMVGR0 U IO D GRAPH
"RTN","GMVTBL0",13,0)
Q1 K GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMVTBL0",14,0)
 D QIO^GMVGR5 K GRPT,GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GHT,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMVTBL0",15,0)
 K GLINE,GMRQUAL,^TMP($J,"GTNM") Q
"RTN","GMVTBL0",16,0)
GRAPH D DEM^VADPT,INP^VADPT,SETV^GMVGR1
"RTN","GMVTBL0",17,0)
 F GK="H","W","T","P","R","B","I","O","PO2","CVP","CG","PN" D
"RTN","GMVTBL0",18,0)
 . S ^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMVTBL0",19,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMVTBL0",20,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMVTBL0",21,0)
 F GPGS=1:1:GPG D
"RTN","GMVTBL0",22,0)
 . S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE S ^TMP($J,"GMRK","G200")=GMRRMBD D PAGE D ^GMVTBL1
"RTN","GMVTBL0",23,0)
 D KVAR^VADPT K VA,GRAPHT,GRAPHP,GRAPHS,GRAPHD,GPA Q
"RTN","GMVTBL0",24,0)
PAGE ;SET GRAPH DATA
"RTN","GMVTBL0",25,0)
 I $D(GMRQUAL) D
"RTN","GMVTBL0",26,0)
 . S (GQ,GQ(1))="",GN=0
"RTN","GMVTBL0",27,0)
 . F  S GQ=$O(GMRQUAL(GQ)) Q:GQ=""  D
"RTN","GMVTBL0",28,0)
 . . S I=0,GQ(1)=$S(GQ="T":"TEMPERATURE",GQ="P":"PULSE",GQ="R":"RESPIRATIEON",GQ="B":"BLOOD PRESSURE",GQ="H":"HEIGHT",GQ="W":"WEIGHT",GQ="CVP":"CVP",GQ="PO2":"PULSE OXIMETRY",GQ="CG":"CIRCUMFERENCE/GIRTH",1:"")
"RTN","GMVTBL0",29,0)
 . . Q:GQ(1)=""  S GN=GN+1,GLINE(GN)=GQ(1)_"--- "
"RTN","GMVTBL0",30,0)
 . . S GQ(2)="" F  S GQ(2)=$O(GMRQUAL(GQ,GQ(2))) Q:GQ(2)=""  S I=I+1 S:I>1 GLINE(GN)=GLINE(GN)_"," S GLINE(GN)=GLINE(GN)_" "_GQ(2)
"RTN","GMVTBL0",31,0)
 K GMRQUAL,GG,GI,GMRVJ,GSYNO,GHOLD Q
"RTN","GMVTBL0",32,0)
DATE S GHOLD="" F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMVTBL0",33,0)
 Q
"RTN","GMVTBL0",34,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMVTBL0",35,0)
 Q
"RTN","GMVTBL0",36,0)
SETD F GI="H","W","T","P","R","B","I","O","C" S GJ=$F("WTXPXRBIOCHDS",GI),GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMVTBL4
"RTN","GMVTBL0",37,0)
 F GI="PO2","CVP","CG","PN" S GJ=0,GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMVTBL4
"RTN","GMVTBL0",38,0)
 Q
"RTN","GMVTBL0",39,0)
SETP ;INITIALIZE ^TMP FOR HEIGHT AND V/M QUALIFIERS
"RTN","GMVTBL0",40,0)
 ;470 - STORE HEIGHT IN INCH  1100 - STORE HEIGHT IN CM
"RTN","GMVTBL0",41,0)
 ;1200 - STORE WEIGHT IN KG    1300 - STORE BODY MASS INDEX
"RTN","GMVTBL0",42,0)
 ; 410 - STORE T*   430 - STORE P*   450 - STORE BP QUALIFIER
"RTN","GMVTBL0",43,0)
 ;1400+I - PULSE OXIMETRY DATA  1430+I - PULSE OX. L/MIN
"RTN","GMVTBL0",44,0)
 ;1450+I - PULSE OX. %  1470+I - PULSE OX. METHOD
"RTN","GMVTBL0",45,0)
 ;1500+I - CVP DATA IN CM H2O  1530+I - CVP DATA IN MMHG
"RTN","GMVTBL0",46,0)
 ;1550+I - C/G DATA IN INCH  1570+I - C/G QUALIFIER  1600+I - PULSE QUALIFIER
"RTN","GMVTBL0",47,0)
 ;1620+I - C/G DATA IN CM  1640+I - THE THIRD PIECE OF BP
"RTN","GMVTBL0",48,0)
 ;1660+I - PAIN
"RTN","GMVTBL0",49,0)
 F I=1:1:10 D
"RTN","GMVTBL0",50,0)
 . S (^TMP($J,"GMRK","G"_(410+I)),^("G"_(430+I)),^("G"_(450+I)),^("G"_(470+I)),^("G"_(1100+I)),^("G"_(1200+I)),^("G"_(1300+I)),^("G"_(1640+I)))=""
"RTN","GMVTBL0",51,0)
 . S (^TMP($J,"GMRK","G"_(1400+I)),^("G"_(1430+I)),^("G"_(1450+I)),^("G"_(1470+I)),^("G"_(1500+I)),^("G"_(1530+I)),^("G"_(1550+I)),^("G"_(1570+I)))=""
"RTN","GMVTBL0",52,0)
 . S (^TMP($J,"GMRK","G"_(1600+I)),^("G"_(1620+I)),^("G"_(1660+I)))=""
"RTN","GMVTBL0",53,0)
 Q
"RTN","GMVTBL1")
0^153^B10843248
"RTN","GMVTBL1",1,0)
GMVTBL1 ;HOIFO/YH-HP LASER CUMULATIVE TABLE ;2/11/99
"RTN","GMVTBL1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVTBL1",3,0)
 ;
"RTN","GMVTBL1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVTBL1",5,0)
 ; <None>
"RTN","GMVTBL1",6,0)
 ;
"RTN","GMVTBL1",7,0)
EN1 ;RESET PRINTER, SET PAGE SIZE (PORTRAIT) AND PCL PICTURE FRAME 8 1/2"*11"
"RTN","GMVTBL1",8,0)
 W !,$CHAR(27),"E",$CHAR(27),"&l1E",$CHAR(27),"*c5952x7920Y",$CHAR(27),"%0B"
"RTN","GMVTBL1",9,0)
 W !,"IN;SP1;IP;SC-2,18,-15,13,1;PW.15;PA1,-0.5;PW.3;EA17,12;"
"RTN","GMVTBL1",10,0)
 S I(1)="" F I=1:1:5 S I(1)=I(1)_"PU"_((1.6*I)+1)_",12;PD"_((1.6*I)+1)_",-0.5;"
"RTN","GMVTBL1",11,0)
 W !,I(1)
"RTN","GMVTBL1",12,0)
 S I(1)="PW.15" F I=6:1:9 S I(1)=I(1)_"PU"_((1.6*I)+1)_",12;PD"_((1.6*I)+1)_",-0.5;"
"RTN","GMVTBL1",13,0)
 W !,I(1) K I
"RTN","GMVTBL1",14,0)
LABEL ;PRINT LABEL
"RTN","GMVTBL1",15,0)
 W !,"DT#,1;"
"RTN","GMVTBL1",16,0)
 W !,"SD1,277,2,1,4,10,5,1,6,5,7,4;SS;LO12;"
"RTN","GMVTBL1",17,0)
 W !,"PU-1,11.5;LBDate/Time#;"
"RTN","GMVTBL1",18,0)
 ;LABEL THE LOWER BOX
"RTN","GMVTBL1",19,0)
 W !,"PU1,11;PD17,11;PU17,10.5;PD1,10.5;PU17,10;PD1,10;PU1,9.5;PD17,9.5;PU17,9;PD1,9;"
"RTN","GMVTBL1",20,0)
 W !,"PU1,8.5;PD17,8.5;PU17,8;PD1,8;PU1,7.5;PD17,7.5;PU17,7;PD1,7;"
"RTN","GMVTBL1",21,0)
 W !,"PU17,6.5;PD1,6.5;PU1,6;PD17,6;PU17,5.5;PD1,5.5;PU1,5;PD17,5;"
"RTN","GMVTBL1",22,0)
 W !,"PU17,4.5;PD1,4.5;PU1,4;PD17,4;PU17,3.5;PD1,3.5;PU1,3;PD17,3;"
"RTN","GMVTBL1",23,0)
 W !,"PU17,2.5;PD1,2.5;PU1,2;PD17,2;PU17,1.5;PD1,1.5;PU1,1;PD17,1;"
"RTN","GMVTBL1",24,0)
 W !,"PU17,0.5;PD1,0.5;PU1,0;PD17,0;PU17,-0.5;PD1,-0.5"
"RTN","GMVTBL1",25,0)
 W !,"PU-1.2,10.8;LBTemperature#;PU-0.2,10.3;LBPulse#;PU-1,9.3;LBRespiration#;PU-0.7,8.8;LBPulse Ox.#;"
"RTN","GMVTBL1",26,0)
 W !,"PU-0.5,8.3;LB  L/Min#;PU0.2,7.8;LB  %#;"
"RTN","GMVTBL1",27,0)
 W !,"PU-0.6,7.3;LB  Method#;PU-1.5,6.8;LBBlood Pressure#;"
"RTN","GMVTBL1",28,0)
 W !,"PU-0.9,5.3;LBWeight (lb)#;PU-0.8,4.8;LB         (kg)#;PU-1.9,4.3;LBBody Mass Index#;"
"RTN","GMVTBL1",29,0)
 W !,"PU-0.9,3.8;LBHeight (in)#;PU-0.8,3.3;LB         (cm)#;PU-0.5,2.8;LBC/G (in)#;PU0,2.3;LB(cm)#;"
"RTN","GMVTBL1",30,0)
 W !,"PU-1.5,1.8;LBCVP (cm H2O)#;PU-0.6,1.3;LB(mm Hg)#;"
"RTN","GMVTBL1",31,0)
 W !,"PU-1.9,0.8;LBIntake (24hr)(cc)#;PU-1.9,0.3;LBOutput (24hr)(cc)#;"
"RTN","GMVTBL1",32,0)
 W !,"PU-0.2,-0.2;LBPain#;"
"RTN","GMVTBL1",33,0)
 W !,"PU1,-0.8;LBT: Temperature     P: Pulse     C/G: Circumference/Girth     * - Abnormal value#;"
"RTN","GMVTBL1",34,0)
 W !,"PU1,-1.2;LBPAIN:  99 - Unable to respond   0 - No pain   10 - Imaginable pain#;"
"RTN","GMVTBL1",35,0)
 W !,"SD1,277,2,1,4,8,5,1,6,5,7,4;"
"RTN","GMVTBL1",36,0)
 W !,"PU-2,-1.7;LB"_$E($G(GLINE(1)),1,100)_"#;" W !,"LB"_$E($G(GLINE(1)),101,180)_"#;"
"RTN","GMVTBL1",37,0)
 W !,"PU-2,-2.1;LB"_$E($G(GLINE(2)),1,100)_"#;" W !,"LB"_$E($G(GLINE(2)),101,180)_"#;"
"RTN","GMVTBL1",38,0)
 W !,"PU-2,-2.5;LB"_$E($G(GLINE(3)),1,100)_"#;" W !,"LB"_$E($G(GLINE(3)),101,180)_"#;"
"RTN","GMVTBL1",39,0)
 W !,"PU-2,-2.9;LB"_$E($G(GLINE(4)),1,100)_"#;" W !,"LB"_$E($G(GLINE(4)),101,180)_"#;"
"RTN","GMVTBL1",40,0)
 W !,"PU-2,-3.3;LB"_$E($G(GLINE(5)),1,100)_"#;" W !,"LB"_$E($G(GLINE(5)),101,180)_"#;"
"RTN","GMVTBL1",41,0)
 W !,"PU-2,-3.7;LB"_$E($G(GLINE(6)),1,100)_"#;" W !,"LB"_$E($G(GLINE(6)),101,180)_"#;"
"RTN","GMVTBL1",42,0)
 W !,"PU-2,-4.1;LB"_$E($G(GLINE(7)),1,100)_"#;" W !,"LB"_$E($G(GLINE(7)),101,180)_"#;"
"RTN","GMVTBL1",43,0)
 W !,"PU-2,-4.5;LB"_$E($G(GLINE(8)),1,100)_"#;" W !,"LB"_$E($G(GLINE(8)),101,180)_"#;"
"RTN","GMVTBL1",44,0)
 W !,"PU-2,-4.9;LB"_$E($G(GLINE(9)),1,100)_"#;" W !,"LB"_$E($G(GLINE(9)),101,180)_"#;"
"RTN","GMVTBL1",45,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA12,-11;LBVITALS TABLE#;"
"RTN","GMVTBL1",46,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA12,-11.5;LBMEDICAL RECORD#;PA12,-12;LBVAF 10-7987 VICE SF 511#;"
"RTN","GMVTBL1",47,0)
 I GTNM=0 W !,"PA3,10;LBTHERE  IS  NO  DATA  FOR  THIS  PERIOD#;"
"RTN","GMVTBL1",48,0)
 W !,"PU;LO1;" D EN1^GMVTBL2
"RTN","GMVTBL1",49,0)
 ;ENTER PCL MODE, RESET PRINTER AND EJECT PAGE
"RTN","GMVTBL1",50,0)
Q1 ;
"RTN","GMVTBL1",51,0)
 W !,"PA-1,11.5;",$CHAR(27),"&r0F",$CHAR(27),"%0A" K I,J Q
"RTN","GMVTBL2")
0^172^B1221059
"RTN","GMVTBL2",1,0)
GMVTBL2 ;HOIFO/YH-HP LASER VITALS TABLE ;1/21/99
"RTN","GMVTBL2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVTBL2",3,0)
 ;
"RTN","GMVTBL2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVTBL2",5,0)
 ; <None>
"RTN","GMVTBL2",6,0)
 ;
"RTN","GMVTBL2",7,0)
EN1 ;PRINT DATE
"RTN","GMVTBL2",8,0)
 W !,"SD1,277,2,1,4,9,5,1,6,0,7,4;SS;"
"RTN","GMVTBL2",9,0)
 S J=11.5,J(1)=1 D WRTLN^GMVTBL3
"RTN","GMVTBL2",10,0)
TIME ;PRINT TIME
"RTN","GMVTBL2",11,0)
 S J=11.1,J(1)=17 D WRTLN^GMVTBL3
"RTN","GMVTBL2",12,0)
TEMP ;PRINT TEMPERATURE
"RTN","GMVTBL2",13,0)
 W !,"SD1,277,2,1,4,8,5,1,6,3,7,4;SS;"
"RTN","GMVTBL2",14,0)
 S J=10.6,J(1)=66 D WRTLN^GMVTBL3
"RTN","GMVTBL2",15,0)
PULSE ;PRINT PULSE
"RTN","GMVTBL2",16,0)
 S J=10.1,J(1)=98 D WRTLN^GMVTBL3
"RTN","GMVTBL2",17,0)
PQUAL ;PRINT PULSE QUALIFIER
"RTN","GMVTBL2",18,0)
 S J=9.6,J(1)=1601 D WRTLN^GMVTBL3
"RTN","GMVTBL2",19,0)
RESP ;PRINT RESPIRATION
"RTN","GMVTBL2",20,0)
 S J=9.1,J(1)=114 D WRTLN^GMVTBL3
"RTN","GMVTBL2",21,0)
POX ;PRINT PULSE OX. DATA
"RTN","GMVTBL2",22,0)
 S J=8.6,J(1)=1401 D WRTLN^GMVTBL3
"RTN","GMVTBL2",23,0)
LMIN ;PRINT O2 L/MIN
"RTN","GMVTBL2",24,0)
 S J=8.1,J(1)=1431 D WRTLN^GMVTBL3
"RTN","GMVTBL2",25,0)
PCNT ;PRINT O2 %
"RTN","GMVTBL2",26,0)
 S J=7.6,J(1)=1451 D WRTLN^GMVTBL3
"RTN","GMVTBL2",27,0)
METHOD ;PRINT METHOD
"RTN","GMVTBL2",28,0)
 S J=7.1,J(1)=1471 D WRTLN^GMVTBL3
"RTN","GMVTBL2",29,0)
BP ;PRINT B/P
"RTN","GMVTBL2",30,0)
 S J=6.6,J(1)=130 D WRTLN^GMVTBL3
"RTN","GMVTBL2",31,0)
BP2 S J=6.1,J(1)=1641 D WRTLN^GMVTBL3
"RTN","GMVTBL2",32,0)
 D EN1^GMVTBL3
"RTN","GMVTBL2",33,0)
 Q
"RTN","GMVTBL3")
0^167^B1757292
"RTN","GMVTBL3",1,0)
GMVTBL3 ;HOIFO/YH-HP LASER VITALS TABLE ;1/21/99
"RTN","GMVTBL3",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVTBL3",3,0)
 ;
"RTN","GMVTBL3",4,0)
 ; This routine uses the following IAs:
"RTN","GMVTBL3",5,0)
 ; <None>
"RTN","GMVTBL3",6,0)
 ;
"RTN","GMVTBL3",7,0)
EN1 ;PRINT B/P QUALIFIERS
"RTN","GMVTBL3",8,0)
 S J=5.6,J(1)=451 D WRTLN
"RTN","GMVTBL3",9,0)
WT ;PRINT WEIGHT
"RTN","GMVTBL3",10,0)
 S J=5.1,J(1)=34 D WRTLN
"RTN","GMVTBL3",11,0)
WTKG S J=4.6,J(1)=1201 D WRTLN
"RTN","GMVTBL3",12,0)
BMI ;PRINT BODY MASS INDEX
"RTN","GMVTBL3",13,0)
 S J=4.1,J(1)=1301 D WRTLN
"RTN","GMVTBL3",14,0)
HT ;PRINT HEIGHT
"RTN","GMVTBL3",15,0)
 S J=3.6,J(1)=471 D WRTLN
"RTN","GMVTBL3",16,0)
HTCM S J=3.1,J(1)=1101 D WRTLN
"RTN","GMVTBL3",17,0)
CG ;PRINT CIRCUMFERENCE/GIRTH DATA
"RTN","GMVTBL3",18,0)
 S J=2.6,J(1)=1551 D WRTLN
"RTN","GMVTBL3",19,0)
CG2 S J=2.1,J(1)=1621 D WRTLN
"RTN","GMVTBL3",20,0)
CVP ;PRINT CVP IN CM H2O
"RTN","GMVTBL3",21,0)
 S J=1.6,J(1)=1501 D WRTLN
"RTN","GMVTBL3",22,0)
CVPHG ;PRINT CVP IN MM HG
"RTN","GMVTBL3",23,0)
 S J=1.1,J(1)=1531 D WRTLN
"RTN","GMVTBL3",24,0)
INTK ;PRINT INTAKE
"RTN","GMVTBL3",25,0)
 S J=0.6,J(1)=146 D WRTLN
"RTN","GMVTBL3",26,0)
OUTP ;PRINT OUTPUT AND PT ID
"RTN","GMVTBL3",27,0)
 D OUTP^GMVTBL4
"RTN","GMVTBL3",28,0)
 Q
"RTN","GMVTBL3",29,0)
WRTLN ;WRITE LINE
"RTN","GMVTBL3",30,0)
 S I(1)="" F I=1:1:5 S I(2)=I-1,I(1)=I(1)_"PA"_((1.6*I(2))+1)_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMVTBL3",31,0)
 W !,I(1) S I(1)="" F I=6:1:10 S I(2)=I-1,I(1)=I(1)_"PA"_((1.6*I(2))+1)_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMVTBL3",32,0)
 W !,I(1) Q
"RTN","GMVTBL4")
0^161^B13751767
"RTN","GMVTBL4",1,0)
GMVTBL4 ;HOIFO/YH,FT-HP LASER VITALS TABLE ;12/4/01  22:47
"RTN","GMVTBL4",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVTBL4",3,0)
 ;
"RTN","GMVTBL4",4,0)
 ; This routine uses the following IAs:
"RTN","GMVTBL4",5,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVTBL4",6,0)
 ;
"RTN","GMVTBL4",7,0)
SETA ; Called from SETD^GMVTBL0
"RTN","GMVTBL4",8,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMVTBL4",9,0)
 I GI="PN" S ^TMP($J,"GMRK","G"_(1660+GCNTD))=GK Q
"RTN","GMVTBL4",10,0)
 S (GMRSITE,GMRSITE(1),GMRSITE(2),GMRINF,GMRVJ)=""
"RTN","GMVTBL4",11,0)
 I GK'="" D
"RTN","GMVTBL4",12,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GI,GDT1,GK)),"^"),GMRVJ=$P($G(^(GK)),"^",2),GMRINF=$P($G(^(GK)),"^",4)
"RTN","GMVTBL4",13,0)
 . I GMRSITE(1)'="" D SYNOARY^GMVLGQU
"RTN","GMVTBL4",14,0)
 I GI="H" S ^TMP($J,"GMRK","G"_(470+GCNTD))=GK_" "_GMRSITE,^TMP($J,"GMRK","G"_(1100+GCNTD))=$S(GK>0:$J(GK*2.54,0,2),1:"") S:GK>0 GMRHT=GK*2.54/100 Q
"RTN","GMVTBL4",15,0)
 I GI="C" S ^TMP($J,"GMRK","G"_(1640+GCNTD))=GK_"  "_^TMP($J,"GMRK","G"_(1640+GCNTD)) Q
"RTN","GMVTBL4",16,0)
 I GI="PO2"!(GI="CVP")!(GI="CG") D  Q
"RTN","GMVTBL4",17,0)
 . I GI="PO2" D
"RTN","GMVTBL4",18,0)
 . . S (GMRINF(1),GMRINF(2))="" I GMRINF'="" D PO2^GMVLGQU(.GMRINF)
"RTN","GMVTBL4",19,0)
 . . S ^TMP($J,"GMRK","G"_(1400+GCNTD))=GK_$S(GMRVJ=1:"*",1:"")
"RTN","GMVTBL4",20,0)
 . . S ^TMP($J,"GMRK","G"_(1430+GCNTD))=GMRINF(1)
"RTN","GMVTBL4",21,0)
 . . S ^TMP($J,"GMRK","G"_(1450+GCNTD))=GMRINF(2)
"RTN","GMVTBL4",22,0)
 . . S ^TMP($J,"GMRK","G"_(1470+GCNTD))=GMRSITE
"RTN","GMVTBL4",23,0)
 . . Q
"RTN","GMVTBL4",24,0)
 . I GI="CVP" D
"RTN","GMVTBL4",25,0)
 . . S ^TMP($J,"GMRK","G"_(1500+GCNTD))=$S(GK>0!(GK<0):$J(GK,0,1),1:GK)_$S(GMRVJ=1:"*",1:"")
"RTN","GMVTBL4",26,0)
 . . S ^TMP($J,"GMRK","G"_(1530+GCNTD))=$S(GK>0!(GK<0)!($E(GK)="0"):$J(GK/1.36,0,1),1:"")_$S(GMRVJ=1:"*",1:"")
"RTN","GMVTBL4",27,0)
 . . Q
"RTN","GMVTBL4",28,0)
 . I GI="CG" D
"RTN","GMVTBL4",29,0)
 . . S ^TMP($J,"GMRK","G"_(1550+GCNTD))=GK_GMRSITE,^TMP($J,"GMRK","G"_(1620+GCNTD))=$S(GK>0:$J(GK/.3937,0,2),1:"")
"RTN","GMVTBL4",30,0)
 . . Q
"RTN","GMVTBL4",31,0)
 I GI="B",GK'="" S ^TMP($J,"GMRK","G"_(450+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE) S:$L(GMRSITE," ")>3 ^TMP($J,"GMRK","G"_(1640+GCNTD))=$P(GMRSITE," ")
"RTN","GMVTBL4",32,0)
 I '(GI="T"!(GI="P")) D  Q
"RTN","GMVTBL4",33,0)
 . S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=GK_$S(GMRVJ=1:"*",1:"")_$S(GI="B":"",1:GMRSITE) S:GI="W" ^TMP($J,"GMRK","G"_(1200+GCNTD))=$S(GK>0:$J(GK/2.2,0,2),1:"")
"RTN","GMVTBL4",34,0)
 . I GI="W",GK>0 D
"RTN","GMVTBL4",35,0)
 . . S GMRBMI="",GMRBMI(1)=GDT1,GMRBMI(2)=GK D CALBMI^GMVBMI(.GMRBMI)
"RTN","GMVTBL4",36,0)
 . . S ^TMP($J,"GMRK","G"_(1300+GCNTD))=GMRBMI K GMRBMI
"RTN","GMVTBL4",37,0)
 I GI="T",GK>0 S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=GK-93
"RTN","GMVTBL4",38,0)
 I GI="P",GK'="","UNAVALABLEPASSREFUSED"'[$$UP^XLFSTR(GK) S ^TMP($J,"GMR","G"_(GJ*16+GCNTD+1))=GK-40/10
"RTN","GMVTBL4",39,0)
 S ^TMP($J,"GMRK","G"_(GJ+1*16+GCNTD+1))=GK_$S(GMRVJ=1:"*",1:"")_$S(GI="T":GMRSITE,GI="P"&($L(GMRSITE," ")>3):"  "_$P(GMRSITE," "),1:" ")
"RTN","GMVTBL4",40,0)
 I GI="T",GK>0 S ^TMP($J,"GMRK","G"_(410+GCNTD))=$S(GMRVJ=1:"T*",1:"T")
"RTN","GMVTBL4",41,0)
 I GI="P",GK'="","UNAVALABLEPASSREFUSED"'[$$UP^XLFSTR(GK) S ^TMP($J,"GMRK","G"_(430+GCNTD))=$S(GMRVJ=1:"P*",1:"P"),^TMP($J,"GMRK","G"_(1600+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)
"RTN","GMVTBL4",42,0)
 Q
"RTN","GMVTBL4",43,0)
OUTP ;PRINT OUTPUT
"RTN","GMVTBL4",44,0)
 S J=0.1,J(1)=162 D WRTLN^GMVTBL3
"RTN","GMVTBL4",45,0)
PAIN ;PRINT PAIN
"RTN","GMVTBL4",46,0)
 S J=-0.4,J(1)=1661 D
"RTN","GMVTBL4",47,0)
 . S I(1)="" F I=1:1:5 S I(2)=I-1,I(1)=I(1)_"PA"_((1.6*I(2))+1.2)_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMVTBL4",48,0)
 . W !,I(1) S I(1)="" F I=6:1:10 S I(2)=I-1,I(1)=I(1)_"PA"_((1.6*I(2))+1.2)_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMVTBL4",49,0)
 . W !,I(1) Q
"RTN","GMVTBL4",50,0)
PTID ;PRINT PATIENT ID
"RTN","GMVTBL4",51,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA-1,-10.5;LB"_^TMP($J,"GMRK","G194")_"#;PA-1,-11;LB"_^("G196")_"   "_^("G197")_"#;"
"RTN","GMVTBL4",52,0)
 W !,"PA-1,-11.5;LB"_^("G198")_"#;PA7,-11.5;LB"_^("G200")_"#;PA-1,-12;LB"_GMRDIV_"#;PA7,-12;LB"_^("G199")_"#;"
"RTN","GMVTBL4",53,0)
 ;W !,"PA-1,-12.5;LB"_GSTRFIN_"#;" Q
"RTN","GMVUT0")
0^277^B1484386
"RTN","GMVUT0",1,0)
GMVUT0 ;HIOFO/RM,YH,FT-INPUT TRANSFORMS FOR VITAL TYPES ;2/5/02  14:54
"RTN","GMVUT0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVUT0",3,0)
 ;
"RTN","GMVUT0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVUT0",5,0)
 ; <None>
"RTN","GMVUT0",6,0)
 ;
"RTN","GMVUT0",7,0)
EN3 ; INPUT TRANSFORM FOR HEIGHT RATES
"RTN","GMVUT0",8,0)
 ; Called from ^GMRD(120.51,8,1)
"RTN","GMVUT0",9,0)
 N GMR
"RTN","GMVUT0",10,0)
 S GMR=$P(X,+X,2,10) I GMR="" S X=0 Q
"RTN","GMVUT0",11,0)
 I $E(GMR)="C"!($E(GMR)="c")&("CMCmcMcm"[GMR) S X=$J(.3937*(+X),0,2) Q
"RTN","GMVUT0",12,0)
 I $E(GMR)="I"!($E(GMR)="i")!($E(GMR)="""") S X=+X Q
"RTN","GMVUT0",13,0)
 I $E(GMR)="F"!($E(GMR)="f")!($E(GMR)="'") D FTIN Q
"RTN","GMVUT0",14,0)
 S X=0
"RTN","GMVUT0",15,0)
 Q
"RTN","GMVUT0",16,0)
FTIN ; Feet and Inches
"RTN","GMVUT0",17,0)
 N GMRF,GMRIN,GMRXX,GMRYY
"RTN","GMVUT0",18,0)
 S GMRF=$E(GMR),GMR=$E(GMR,2,$L(GMR)) F GMRXX=1:0 S GMRYY=$E(GMR) Q:GMRYY?1N!(GMRYY="")  S GMRF=GMRF_GMRYY,GMR=$E(GMR,2,$L(GMR))
"RTN","GMVUT0",19,0)
 I "FTFtfTft'"'[GMRF Q
"RTN","GMVUT0",20,0)
 S GMRIN=$P(GMR,+GMR,2) I "INIniNin""''"'[GMRIN!(GMRIN="'") Q
"RTN","GMVUT0",21,0)
 S X=+X*12+(+GMR)
"RTN","GMVUT0",22,0)
 Q
"RTN","GMVUT2")
0^264^B80155
"RTN","GMVUT2",1,0)
GMVUT2 ;HOIFO/YH,RM,FT-ENTRY TO GATHER PATIENT VITAL/MEASURMENT DATA ;12/27/01  10:45
"RTN","GMVUT2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVUT2",3,0)
 ;
"RTN","GMVUT2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVUT2",5,0)
 ; #1246 - WIN^DGPMDDCF      (supported)
"RTN","GMVUT2",6,0)
 ;
"RTN","GMVUT2",7,0)
INACT42(GMWLOC) ; THIS PROCEDURE WILL CALL SUPPORTED ENTRY POINT WIN^DGPMDDCF
"RTN","GMVUT2",8,0)
 ; TO DETERMINE IF WARD LOCATION (GMWLOC) IS INACTIVE.
"RTN","GMVUT2",9,0)
 N X,D0,DGPMOS
"RTN","GMVUT2",10,0)
 S D0=GMWLOC D WIN^DGPMDDCF
"RTN","GMVUT2",11,0)
 Q X
"RTN","GMVUT3")
0^278^B868656
"RTN","GMVUT3",1,0)
GMVUT3 ;HIOFO/YH,FT-VITAL MEASUREMENT SITE/QUALIFIER SELECTION ;2/5/02  15:04
"RTN","GMVUT3",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVUT3",3,0)
 ;
"RTN","GMVUT3",4,0)
 ; This routine uses the following IAs:
"RTN","GMVUT3",5,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVUT3",6,0)
 ;
"RTN","GMVUT3",7,0)
GIRTH ;INPUT TRANSFORM FOR CIRCUMFERENCE/GIRTH
"RTN","GMVUT3",8,0)
 Q:"UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)
"RTN","GMVUT3",9,0)
 N UNIT S UNIT=$$UP^XLFSTR($P(X,+X,2)),X=+X I UNIT="" S UNIT="I" Q
"RTN","GMVUT3",10,0)
 I UNIT="C" S X=$J(.3937*X,0,2),UNIT="I"
"RTN","GMVUT3",11,0)
 I UNIT'="I" K X Q
"RTN","GMVUT3",12,0)
 K:+X'=X!(X>200)!(X<0) X
"RTN","GMVUT3",13,0)
 Q
"RTN","GMVUT3",14,0)
CVP ;INPUT TRANSFORM FOR CVP
"RTN","GMVUT3",15,0)
 Q:"UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)
"RTN","GMVUT3",16,0)
 N UNIT S UNIT=$$UP^XLFSTR($P(X,+X,2)) I $L(UNIT)>1!($L(UNIT)=1&($E(UNIT)'="G")) K X Q
"RTN","GMVUT3",17,0)
 I UNIT'="" S X=X*1.36
"RTN","GMVUT3",18,0)
 K:X<-13.6!(X>136) X
"RTN","GMVUT3",19,0)
 Q
"RTN","GMVUTL")
0^274^B84410
"RTN","GMVUTL",1,0)
GMVUTL ;HOIFO/RM,MD,FT-CALLABLE ENTRY POINTS FOR PROGRAMMER UTILITIES ;12/27/01  10:46
"RTN","GMVUTL",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVUTL",3,0)
 ;
"RTN","GMVUTL",4,0)
 ; This routine uses the following IAs:
"RTN","GMVUTL",5,0)
 ; <None>
"RTN","GMVUTL",6,0)
 ;
"RTN","GMVUTL",7,0)
EN1 ; CALL TO CONVERT TEMPERATURE (F) IN VARIABLE X TO TEMPERATURE (C)
"RTN","GMVUTL",8,0)
 ; IN VARIABLE Y
"RTN","GMVUTL",9,0)
 S Y=$J(X-32*5/9,0,1)
"RTN","GMVUTL",10,0)
 Q
"RTN","GMVUTL",11,0)
EN2 ; CALL TO CONVERT AN INCHES MEASUREMENT IN X TO A CENTIMETER 
"RTN","GMVUTL",12,0)
 ; MEASUREMENT IN Y
"RTN","GMVUTL",13,0)
 S Y=$J(2.54*X,0,2)
"RTN","GMVUTL",14,0)
 Q
"RTN","GMVUTL",15,0)
EN3 ; CALL TO CONVERT A WEIGHT (LBS) IN VARIABLE X TO A WEIGHT (KG)
"RTN","GMVUTL",16,0)
 ; IN VARIABLE Y
"RTN","GMVUTL",17,0)
 S Y=$J(X/2.2,0,2)
"RTN","GMVUTL",18,0)
 Q
"RTN","GMVUTL1")
0^154^B4969976
"RTN","GMVUTL1",1,0)
GMVUTL1 ;HOIFO/YH,FT-EXTRACT CLINIC LIST AND MARK VITALS ENTERED IN ERROR ;9/30/02  14:51
"RTN","GMVUTL1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVUTL1",3,0)
 ;
"RTN","GMVUTL1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVUTL1",5,0)
 ;   #908 - ^SC( references        (controlled)
"RTN","GMVUTL1",6,0)
 ;  #1246 - WIN^DGPMDDCF           (supported)
"RTN","GMVUTL1",7,0)
 ; #10039 - FILE 42 references     (supported)
"RTN","GMVUTL1",8,0)
 ; #10040 - ^SC( references        (supported)
"RTN","GMVUTL1",9,0)
 ; #10060 - FILE 200 fields        (supported)
"RTN","GMVUTL1",10,0)
 ; #10090 - FILE 4 references      (supported)
"RTN","GMVUTL1",11,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVUTL1",12,0)
 ;
"RTN","GMVUTL1",13,0)
ERROR(RESULT,GMVDATA)  ;GMV MARK ERROR [RPC entry point]
"RTN","GMVUTL1",14,0)
 ;GMVDATA CONSISTS OF THE FOLLOWING DATA:
"RTN","GMVUTL1",15,0)
 ;FILE # 120.5 IEN^DUZ^INCORRECT DATE/TIME^INCORRECT READING^INCORRECT
"RTN","GMVUTL1",16,0)
 ;PATIENT^INVALID RECORD
"RTN","GMVUTL1",17,0)
 N GMVFDA,GMVIEN,GMVIENS
"RTN","GMVUTL1",18,0)
 I '$D(^GMR(120.5,+GMVDATA,0))#2 S RESULT="ERROR: Record Not Found" Q
"RTN","GMVUTL1",19,0)
 S GMVIENS=(+GMVDATA)_","
"RTN","GMVUTL1",20,0)
 S GMVFDA(120.5,GMVIENS,2)=1
"RTN","GMVUTL1",21,0)
 S GMVFDA(120.5,GMVIENS,3)=$P(GMVDATA,"^",2)
"RTN","GMVUTL1",22,0)
 S GMVFDA(120.506,"+1,"_GMVIENS,.01)=$P(GMVDATA,"^",3)
"RTN","GMVUTL1",23,0)
 D UPDATE^DIE("","GMVFDA","GMVIEN")
"RTN","GMVUTL1",24,0)
 S RESULT="OK"
"RTN","GMVUTL1",25,0)
 Q
"RTN","GMVUTL1",26,0)
 ;
"RTN","GMVUTL1",27,0)
ACTLOC(LOC) ; Function: returns TRUE if active hospital location
"RTN","GMVUTL1",28,0)
 N D0,X I +$G(^SC(LOC,"OOS")) Q 0                ; screen out OOS entry
"RTN","GMVUTL1",29,0)
 S D0=+$G(^SC(LOC,42)) I D0 D WIN^DGPMDDCF Q 'X  ; chk out of svc wards
"RTN","GMVUTL1",30,0)
 S X=$G(^SC(LOC,"I")) I +X=0 Q 1                 ; no inactivate date
"RTN","GMVUTL1",31,0)
 I DT>$P(X,U)&($P(X,U,2)=""!(DT<$P(X,U,2))) Q 0  ; chk reactivate date
"RTN","GMVUTL1",32,0)
 Q 1                                             ; must still be active
"RTN","GMVUTL1",33,0)
 ;
"RTN","GMVUTL1",34,0)
PERSON(X) ;RETURN PERSON'S NAME FROM FILE #200.
"RTN","GMVUTL1",35,0)
 N GMVNAME
"RTN","GMVUTL1",36,0)
 Q:'X ""
"RTN","GMVUTL1",37,0)
 S GMVNAME=$$GET1^DIQ(200,X,.01,"E")
"RTN","GMVUTL1",38,0)
 Q $S(GMVNAME'="":GMVNAME,1:"")
"RTN","GMVUTL1",39,0)
FILLER(L,S,STRING)     ; Returns the number of filler characters desired.
"RTN","GMVUTL1",40,0)
 ; L - larger number
"RTN","GMVUTL1",41,0)
 ; S - smaller number
"RTN","GMVUTL1",42,0)
 ; STRING - string of same characters (e.g., spaces)
"RTN","GMVUTL1",43,0)
 ; Use spaces if STRING is not defined.
"RTN","GMVUTL1",44,0)
 I $L(STRING)=0 S STRING=$$REPEAT^XLFSTR(" ",79) ;line of spaces
"RTN","GMVUTL1",45,0)
 Q $E(STRING,1,L-S)
"RTN","GMVUTL1",46,0)
 ;
"RTN","GMVUTL1",47,0)
HOSPLOC(GMVWARD) ; Function returns Hospital Location IEN for a ward
"RTN","GMVUTL1",48,0)
 ; Input:
"RTN","GMVUTL1",49,0)
 ;  GMVWARD - Ward (FILE 42) IEN
"RTN","GMVUTL1",50,0)
 ; Returns:
"RTN","GMVUTL1",51,0)
 ;  Hospital Location (FILE 44) IEN for the ward
"RTN","GMVUTL1",52,0)
 ;  If GMVWARD'>0 or not found, then returns "" (null)
"RTN","GMVUTL1",53,0)
 I $G(GMVWARD)'>0 Q ""  ;illegal ward ien
"RTN","GMVUTL1",54,0)
 Q $P($G(^DIC(42,+GMVWARD,44)),"^")
"RTN","GMVUTL1",55,0)
 ;
"RTN","GMVUTL1",56,0)
DIVISION(GMVLOC) ; Function returns Division name for Hospital Location
"RTN","GMVUTL1",57,0)
 ; (FILE 44) IEN
"RTN","GMVUTL1",58,0)
 ; Input:
"RTN","GMVUTL1",59,0)
 ;  GMVLOC - Hospital Location (FILE 44) IEN
"RTN","GMVUTL1",60,0)
 ; Returns:
"RTN","GMVUTL1",61,0)
 ;  Division name (FILE 4) associated with that Hospital Location
"RTN","GMVUTL1",62,0)
 ;  If GMVLOC'>0 or not found, then returns "" (null)
"RTN","GMVUTL1",63,0)
 I $G(GMVLOC)'>0 Q ""  ;illegal hospital location
"RTN","GMVUTL1",64,0)
 Q $S(GMVLOC>0:$$GET1^DIQ(4,+$$GET1^DIQ(44,+GMVLOC,3,"I"),.01,"I"),1:"")
"RTN","GMVUTL1",65,0)
 ;
"RTN","GMVUTL2")
0^155^B2749155
"RTN","GMVUTL2",1,0)
GMVUTL2 ;HOIFO/YH,FT-BP HIGH/LOW LIMITS AND DEFAULT QUALIFIER; 6/7/98 ;10/1/02  14:14
"RTN","GMVUTL2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVUTL2",3,0)
 ;
"RTN","GMVUTL2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVUTL2",5,0)
 ;  #1377 - ^DIC(42 references     (supported)
"RTN","GMVUTL2",6,0)
 ;  #3227 - ^NURAPI calls          (private)
"RTN","GMVUTL2",7,0)
 ;  #3771 - ^XUDHGUI calls         (supported)
"RTN","GMVUTL2",8,0)
 ; #10035 - ^DPT( references       (supported)
"RTN","GMVUTL2",9,0)
 ; #10039 - ^DIC(42 references     (supported)
"RTN","GMVUTL2",10,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVUTL2",11,0)
 ;
"RTN","GMVUTL2",12,0)
WARDPT ;
"RTN","GMVUTL2",13,0)
 K ^TMP($J) S GMRWARD=+$O(^DIC(42,"B",GMRWARD(1),0)),GMRVHLOC=$$HOSPLOC^GMVUTL1(GMRWARD)
"RTN","GMVUTL2",14,0)
 S DFN=0 F  S DFN=$O(^DPT("CN",GMRWARD(1),DFN)) Q:DFN'>0  D
"RTN","GMVUTL2",15,0)
 . D 1^VADPT S GMRNAM=$G(VADM(1)),GMRRMBD=$P($G(VAIN(5)),"^")
"RTN","GMVUTL2",16,0)
 . S:GMRNAM="" GMRNAM=" " S:GMRRMBD="" GMRRMBD=" "
"RTN","GMVUTL2",17,0)
 . S ^TMP($J,GMRRMBD,GMRNAM,DFN)=""
"RTN","GMVUTL2",18,0)
 Q
"RTN","GMVUTL2",19,0)
UNITWRD ; Called by location report (GMVGRPH routine)
"RTN","GMVUTL2",20,0)
 N GMVOUT
"RTN","GMVUTL2",21,0)
 S GMVOUT=$$FINDNLOC^NURAPI("NUR "_GMRWARD(1))
"RTN","GMVUTL2",22,0)
 S GMRWARD=+$P(GMVOUT,U,1),GMRVHLOC=+$P(GMVOUT,U,2)
"RTN","GMVUTL2",23,0)
 I '$$PTCHK^NURAPI() S GMRWARD=0 Q
"RTN","GMVUTL2",24,0)
 Q
"RTN","GMVUTL2",25,0)
UNITPT ; Called by location report (GMVGRPH routine)
"RTN","GMVUTL2",26,0)
 N GMVIEN,GMVOUT S GMVIEN=0
"RTN","GMVUTL2",27,0)
 D APTLIST^NURAPI(GMRWARD,.GMVOUT)
"RTN","GMVUTL2",28,0)
 F  S GMVIEN=$O(GMVOUT(GMVIEN)) Q:'GMVIEN  D
"RTN","GMVUTL2",29,0)
 . S DFN=$P(GMVOUT(GMVIEN),U,1)
"RTN","GMVUTL2",30,0)
 . D 1^VADPT S GMRNAM=$G(VADM(1)),GMRRMBD=$P($G(VAIN(5)),"^")
"RTN","GMVUTL2",31,0)
 . S:GMRNAM="" GMRNAM=" " S:GMRRMBD="" GMRRMBD=" "
"RTN","GMVUTL2",32,0)
 . S ^TMP($J,GMRRMBD,GMRNAM,DFN)=""
"RTN","GMVUTL2",33,0)
 Q
"RTN","GMVUTL2",34,0)
CHKDEV(GMVLIST,GMVIEN,GMVDIR,GMVRMAR) ; Returns a list of printers
"RTN","GMVUTL2",35,0)
 ; RESULT  - TMP array address
"RTN","GMVUTL2",36,0)
 ; GMVIEN  - Value to begin the search. Can be null.
"RTN","GMVUTL2",37,0)
 ; GMVDIR  - Direction of the search (1 = forward, -1 = backwards)
"RTN","GMVUTL2",38,0)
 ;           If DIR is null, then set to 1.
"RTN","GMVUTL2",39,0)
 ; GMVRMAR - Right margin (e.g, 80, 132 or "80-132")
"RTN","GMVUTL2",40,0)
 S:GMVDIR="" GMVDIR=1
"RTN","GMVUTL2",41,0)
 S:GMVRMAR="" GMVRMAR=132
"RTN","GMVUTL2",42,0)
 D DEVICE^XUDHGUI(.GMVLIST,GMVIEN,GMVDIR,GMVRMAR)
"RTN","GMVUTL2",43,0)
 ; If no devices found, the array has no entries.
"RTN","GMVUTL2",44,0)
 Q
"RTN","GMVUTL3")
0^156^B5074648
"RTN","GMVUTL3",1,0)
GMVUTL3 ;HOIFO/YH,FT-RPCBROKER UTILITY ROUTINE TO EXTRACT NURSING UNIT/ROOM-BED - 3 ;9/6/02  09:16
"RTN","GMVUTL3",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVUTL3",3,0)
 ;
"RTN","GMVUTL3",4,0)
 ; This routine uses the following IAs:
"RTN","GMVUTL3",5,0)
 ;  #2692 - FILE 100.21 references (controlled)
"RTN","GMVUTL3",6,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVUTL3",7,0)
 ; #10099 - ^GMRADPT calls         (supported)
"RTN","GMVUTL3",8,0)
 ;
"RTN","GMVUTL3",9,0)
PTINFO(RESULT,DFN,GMVDT) ; gets patient demographic and eligibility info
"RTN","GMVUTL3",10,0)
 ;RESULT=SSN^DOB^SEX AND AGE^ATTENDING^VETERAN^INTERNAL DATE/TIME
"RTN","GMVUTL3",11,0)
 ;       DECEASED^EXTERNAL DATE/TIME DECEASED
"RTN","GMVUTL3",12,0)
 D 1^VADPT,ELIG^VADPT
"RTN","GMVUTL3",13,0)
 S RESULT=$P($G(VADM(2)),"^",2)_"^"_$P($G(VADM(3)),"^",2)_"^"_$P($G(VADM(5)),"^",2)_", "_$P($G(VADM(4)),"^")_" years"_"^"_$P($G(VAIN(11)),"^",2)
"RTN","GMVUTL3",14,0)
 S RESULT=RESULT_"^"_$S(VAEL(4)=1:"YES",1:"NO")_"^^^^"
"RTN","GMVUTL3",15,0)
 S $P(RESULT,"^",8)=$P(VAIN(4),"^",2),$P(RESULT,"^",9)=$P(VAIN(5),"^")
"RTN","GMVUTL3",16,0)
 I VADM(6)>0 S $P(RESULT,"^",6)=$P(VADM(6),"^"),$P(RESULT,"^",7)=$P(VADM(6),"^",2)
"RTN","GMVUTL3",17,0)
 S $P(RESULT,"^",10)=VADM(1)
"RTN","GMVUTL3",18,0)
 N GMVSENS
"RTN","GMVUTL3",19,0)
 S GMVSENS=$$PTREC^GMVRPCP(DFN) ;check sensitvity of DOB and SSN 
"RTN","GMVUTL3",20,0)
 S $P(RESULT,U,1)=$P(GMVSENS,U,11) ;SSN
"RTN","GMVUTL3",21,0)
 S $P(RESULT,U,2)=$P(GMVSENS,U,10) ;DOB
"RTN","GMVUTL3",22,0)
 Q
"RTN","GMVUTL3",23,0)
TEAMPT(RESULT,GMVTEAM) ;GMV TEAM PATIENTS [RPC entry point]
"RTN","GMVUTL3",24,0)
 ; Calls CPRS API (IA #2692) and return list of patients for a given
"RTN","GMVUTL3",25,0)
 ; team (File 100.21, Field 10).
"RTN","GMVUTL3",26,0)
 N GMVI,GMVOUT,GMVPTNUM
"RTN","GMVUTL3",27,0)
 ; Call CPRS API with name of array to return data in and the IEN of
"RTN","GMVUTL3",28,0)
 ; the File 100.21 entry. CPRS returns:
"RTN","GMVUTL3",29,0)
 ; Arrayname(Sequential #)=DFN ^ patient name (File 2, Field .01)
"RTN","GMVUTL3",30,0)
 D TEAMPTS^ORQPTQ1(.GMVOUT,GMVTEAM)
"RTN","GMVUTL3",31,0)
 I $P($G(GMVOUT(1)),U,1)="" S RESULT(1)="NO PATIENTS" Q
"RTN","GMVUTL3",32,0)
 S GMVI=0
"RTN","GMVUTL3",33,0)
 F  S GMVI=$O(GMVOUT(GMVI)) Q:'GMVI  D
"RTN","GMVUTL3",34,0)
 .S GMVPTNUM=+$P(GMVOUT(GMVI),U,1)
"RTN","GMVUTL3",35,0)
 .D PTINFO(.GMVPAT,GMVPTNUM)
"RTN","GMVUTL3",36,0)
 .S RESULT(GMVI)=$P(GMVOUT(GMVI),U,2)_U_+$P(GMVOUT(GMVI),U,1)_U_GMVPAT
"RTN","GMVUTL3",37,0)
 .Q
"RTN","GMVUTL3",38,0)
QUITP K OUT,ARRAY1
"RTN","GMVUTL3",39,0)
 Q
"RTN","GMVUTL3",40,0)
ALLERGY(RESULT,DFN) ;GMV ALLERGY [RPC entry point]
"RTN","GMVUTL3",41,0)
 N GMRAL,GMVALG,GN D EN1^GMRADPT M GMVALG=GMRAL
"RTN","GMVUTL3",42,0)
 I $O(GMVALG(0))'>0 D  Q
"RTN","GMVUTL3",43,0)
 . I $G(GMVALG)="" S RESULT(1)="No Allergy Assessment"
"RTN","GMVUTL3",44,0)
 . I $G(GMVALG)=0 S RESULT(1)="No Known Allergies"
"RTN","GMVUTL3",45,0)
 . Q
"RTN","GMVUTL3",46,0)
 S GN=1,RESULT(1)="This patient has the following allergy(ies): ",GN(1)=0 F  S GN(1)=$O(GMVALG(GN(1))) Q:GN(1)'>0  D
"RTN","GMVUTL3",47,0)
 . S GN=GN+1,RESULT(GN)=$P($G(GMVALG(GN(1))),U,2)
"RTN","GMVUTL3",48,0)
 Q
"RTN","GMVUTL5")
0^185^B13221360
"RTN","GMVUTL5",1,0)
GMVUTL5 ;HOIFO/DS,FT-RPC BROKER UTILITY ;12/27/01  13:55
"RTN","GMVUTL5",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVUTL5",3,0)
 ;
"RTN","GMVUTL5",4,0)
 ; This routine uses the following IAs:
"RTN","GMVUTL5",5,0)
 ; <None>
"RTN","GMVUTL5",6,0)
 ;
"RTN","GMVUTL5",7,0)
GETVITAL(RESULT,GMVLIST) ;
"RTN","GMVUTL5",8,0)
 N GMVNUM,GMVDATA,GMVDO,GMVLOOP
"RTN","GMVUTL5",9,0)
 S GMVNUM=1
"RTN","GMVUTL5",10,0)
 I GMVLIST'="" D
"RTN","GMVUTL5",11,0)
 . F GMVLOOP=1:1:$L(GMVLIST,"^") D
"RTN","GMVUTL5",12,0)
 .. S GMVDO=$P(GMVLIST,"^",GMVLOOP)
"RTN","GMVUTL5",13,0)
 .. Q:GMVDO=""
"RTN","GMVUTL5",14,0)
 .. S RESULT(GMVNUM)=$$GETDATA(GMVDO)_"^"_$$ABBVAL(GMVDO)
"RTN","GMVUTL5",15,0)
 .. D GETALL(GMVNUM,.RESULT)
"RTN","GMVUTL5",16,0)
 .. S GMVNUM=GMVNUM+1
"RTN","GMVUTL5",17,0)
 .. Q
"RTN","GMVUTL5",18,0)
 . Q
"RTN","GMVUTL5",19,0)
 E  D
"RTN","GMVUTL5",20,0)
 . S GMVLOOP=0
"RTN","GMVUTL5",21,0)
 . F  S GMVLOOP=$O(^GMRD(120.51,GMVLOOP)) Q:GMVLOOP'>0  D
"RTN","GMVUTL5",22,0)
 .. S RESULT(GMVNUM)=$$GETDATA(GMVLOOP)_"^"_$$ABBVAL(GMVLOOP)
"RTN","GMVUTL5",23,0)
 .. D GETALL(GMVNUM,.RESULT)
"RTN","GMVUTL5",24,0)
 .. S GMVNUM=GMVNUM+1
"RTN","GMVUTL5",25,0)
 .. Q
"RTN","GMVUTL5",26,0)
 . Q
"RTN","GMVUTL5",27,0)
 Q
"RTN","GMVUTL5",28,0)
GETALL(GMVLOOP,RESULT) ;
"RTN","GMVUTL5",29,0)
 S GMVCNT=0
"RTN","GMVUTL5",30,0)
 Q:$G(RESULT(GMVLOOP))=""
"RTN","GMVUTL5",31,0)
 Q:$P(RESULT(GMVLOOP),"^",1)'="V"
"RTN","GMVUTL5",32,0)
 S GMVITTYP=$P(RESULT(GMVLOOP),"^",2)
"RTN","GMVUTL5",33,0)
 S GMVD2=""
"RTN","GMVUTL5",34,0)
 S GMVCNT=GMVLOOP+.001
"RTN","GMVUTL5",35,0)
 F  S GMVD2=$O(^GMRD(120.53,"C",GMVITTYP,GMVD2)) Q:GMVD2'>0  D
"RTN","GMVUTL5",36,0)
 . S GMVD1=0
"RTN","GMVUTL5",37,0)
 . F  S GMVD1=$O(^GMRD(120.53,"C",GMVITTYP,GMVD2,GMVD1)) Q:GMVD1'>0  D
"RTN","GMVUTL5",38,0)
 .. S GMVDATA=$P($G(^GMRD(120.53,GMVD2,0)),U)
"RTN","GMVUTL5",39,0)
 .. I GMVDATA]"" D
"RTN","GMVUTL5",40,0)
 ... S GMVITTYP(0)=$G(^GMRD(120.51,+GMVITTYP,0))
"RTN","GMVUTL5",41,0)
 ... S GMVITTYP(1)=GMVITTYP,GMVITTYP(2)=$P(GMVITTYP(0),U,2)
"RTN","GMVUTL5",42,0)
 ... S GMVITTYP(3)=$P(GMVITTYP(0),U)
"RTN","GMVUTL5",43,0)
 ... S GMVDEFQ=$P($G(^GMRD(120.53,GMVD2,1,GMVD1,0)),U,7)
"RTN","GMVUTL5",44,0)
 ... S GMVDEFQ(0)=$G(^GMRD(120.52,+GMVDEFQ,0))
"RTN","GMVUTL5",45,0)
 ... S GMVDEFQ(1)=GMVDEFQ,GMVDEFQ(2)=$P(GMVDEFQ(0),U,2)
"RTN","GMVUTL5",46,0)
 ... S GMVDEFQ(3)=$P(GMVDEFQ(0),U)
"RTN","GMVUTL5",47,0)
 ... S RESULT(GMVCNT)="C"_U_GMVD2_U_GMVDATA
"RTN","GMVUTL5",48,0)
 ... D GETCAT(GMVITYPE,GMVD2,.RESULT,.GMVCNT)
"RTN","GMVUTL5",49,0)
 ... S GMVCNT=GMVCNT+.001
"RTN","GMVUTL5",50,0)
 ... Q
"RTN","GMVUTL5",51,0)
 .. Q
"RTN","GMVUTL5",52,0)
 . Q
"RTN","GMVUTL5",53,0)
 Q
"RTN","GMVUTL5",54,0)
GETDATA(GMVVITAL) ;
"RTN","GMVUTL5",55,0)
 N GMVDATA,GMVD0,GMVD1
"RTN","GMVUTL5",56,0)
 I $G(^GMRD(120.51,GMVVITAL,0))="" D   Q GMVRSULT
"RTN","GMVUTL5",57,0)
 . S GMVRSULT="V^"_GMVVITAL_"^ERROR"
"RTN","GMVUTL5",58,0)
 . Q
"RTN","GMVUTL5",59,0)
 S GMVDATA=$G(^GMRD(120.51,GMVVITAL,0))
"RTN","GMVUTL5",60,0)
 I GMVDATA]"" S GMVRSULT="V"_U_GMVVITAL_U_$P(GMVDATA,U)_U_$P(GMVDATA,U,2)_U_$P(GMVDATA,U,7)
"RTN","GMVUTL5",61,0)
 Q GMVRSULT
"RTN","GMVUTL5",62,0)
GETCAT(GMVVTYPE,GMVITCAT,RESULT,GMVNUM) ;
"RTN","GMVUTL5",63,0)
 N GMVD0,GMVD1,GMVCNT
"RTN","GMVUTL5",64,0)
 S GMVD0=0,GMVCNT=0
"RTN","GMVUTL5",65,0)
 F  S GMVD0=$O(^GMRD(120.52,"C",GMVITTYP,GMVD0)) Q:GMVD0'>0  D
"RTN","GMVUTL5",66,0)
 . S GMVD1=0
"RTN","GMVUTL5",67,0)
 . F  S GMVD1=$O(^GMRD(120.52,"C",GMVITTYP,GMVD0,GMVD1)) Q:GMVD1'>0  D
"RTN","GMVUTL5",68,0)
 .. S GMVCATD0=$P($G(^GMRD(120.52,GMVD0,1,GMVD1,0)),U,2)
"RTN","GMVUTL5",69,0)
 .. I $G(GMVITCAT)>0,GMVITCAT'=GMVCATD0 Q
"RTN","GMVUTL5",70,0)
 .. S GMVDATA=$G(^GMRD(120.52,GMVD0,0))
"RTN","GMVUTL5",71,0)
 .. I GMVDATA]"" D
"RTN","GMVUTL5",72,0)
 ... S GMVITTYP(0)=$G(^GMRD(120.51,+GMVITTYP,0))
"RTN","GMVUTL5",73,0)
 ... S GMVITTYP(1)=GMVITTYP,GMVITTYP(2)=$P(GMVITTYP(0),U,2)
"RTN","GMVUTL5",74,0)
 ... S GMVITTYP(3)=$P(GMVITTYP(0),U)
"RTN","GMVUTL5",75,0)
 ... S GMVITCAT(0)=$G(^GMRD(120.53,+GMVCATD0,0))
"RTN","GMVUTL5",76,0)
 ... S GMVITCAT(1)=GMVCATD0,(GMVITCAT(2),GMVITCAT(3))=$P(GMVITCAT(0),U)
"RTN","GMVUTL5",77,0)
 ... S GMVNUM=GMVNUM+.001
"RTN","GMVUTL5",78,0)
 ... S RESULT(GMVNUM)="Q"_U_GMVD0_U_$P(GMVDATA,U)_U_$P(GMVDATA,U,2)
"RTN","GMVUTL5",79,0)
 ... Q
"RTN","GMVUTL5",80,0)
 .. Q
"RTN","GMVUTL5",81,0)
 . Q
"RTN","GMVUTL5",82,0)
 Q
"RTN","GMVUTL5",83,0)
ABBVAL(VITLTYPE) ;
"RTN","GMVUTL5",84,0)
 N RESULT,GMVDATA
"RTN","GMVUTL5",85,0)
 ; Gets high low values if they exist
"RTN","GMVUTL5",86,0)
 I $G(^GMRD(120.57,1,1))="" Q ""
"RTN","GMVUTL5",87,0)
 S RESULT=""
"RTN","GMVUTL5",88,0)
 S GMVDATA=$P($G(^GMRD(120.57,1,1)),U,1,13)
"RTN","GMVUTL5",89,0)
 I VITLTYPE=1 D
"RTN","GMVUTL5",90,0)
 . ; BP
"RTN","GMVUTL5",91,0)
 . S RESULT=$P(GMVDATA,U,7,10)
"RTN","GMVUTL5",92,0)
 . Q
"RTN","GMVUTL5",93,0)
 I VITLTYPE=2 D
"RTN","GMVUTL5",94,0)
 . ; Temprature
"RTN","GMVUTL5",95,0)
 . S RESULT=$P(GMVDATA,U,1,2)
"RTN","GMVUTL5",96,0)
 . Q
"RTN","GMVUTL5",97,0)
 I VITLTYPE=5 D
"RTN","GMVUTL5",98,0)
 . ; Pulse
"RTN","GMVUTL5",99,0)
 . S RESULT=$P(GMVDATA,U,3,4)
"RTN","GMVUTL5",100,0)
 . Q
"RTN","GMVUTL5",101,0)
 I VITLTYPE=3 D
"RTN","GMVUTL5",102,0)
 . ;Respirations
"RTN","GMVUTL5",103,0)
 . S RESULT=$P(GMVDATA,U,5,6)
"RTN","GMVUTL5",104,0)
 . Q
"RTN","GMVUTL5",105,0)
 I VITLTYPE=15 D
"RTN","GMVUTL5",106,0)
 . ;CVP
"RTN","GMVUTL5",107,0)
 . S RESULT=$P(GMVDATA,U,11,13)
"RTN","GMVUTL5",108,0)
 . Q
"RTN","GMVUTL5",109,0)
 Q RESULT
"RTN","GMVUTL7")
0^189^B22243524
"RTN","GMVUTL7",1,0)
GMVUTL7 ;HIOFO/DS-RPC API TO RETURN ALL VITALS/CATOGORIES/QUALIFIERS ;7/17/02  14:52
"RTN","GMVUTL7",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVUTL7",3,0)
 ;
"RTN","GMVUTL7",4,0)
 ; This routine uses the following IAs:
"RTN","GMVUTL7",5,0)
 ; #10035 - FILE 2 references      (supported)
"RTN","GMVUTL7",6,0)
 ; #10103 - ^XLFDT calls           (supported)
"RTN","GMVUTL7",7,0)
 ;
"RTN","GMVUTL7",8,0)
GETVITAL(RESULT,GMVLIST)        ; GMV VITALS/CAT/QUAL [RPC entry point]
"RTN","GMVUTL7",9,0)
 ; Returns all vital qual info in RESULT
"RTN","GMVUTL7",10,0)
 ;GMVLIST is either "" for all vitals or a list of required eg 1^2^
"RTN","GMVUTL7",11,0)
 N GMVNUM,GMVDATA,GMVDO,GMVLOOP
"RTN","GMVUTL7",12,0)
 S GMVNUM=1
"RTN","GMVUTL7",13,0)
 I GMVLIST'="" D
"RTN","GMVUTL7",14,0)
 . F GMVLOOP=1:1:$L(GMVLIST,"^") D
"RTN","GMVUTL7",15,0)
 .. S GMVDO=$P(GMVLIST,"^",GMVLOOP)
"RTN","GMVUTL7",16,0)
 .. Q:GMVDO=""
"RTN","GMVUTL7",17,0)
 .. S GMVDO=$$GETIEN(GMVDO)
"RTN","GMVUTL7",18,0)
 .. Q:GMVDO=""
"RTN","GMVUTL7",19,0)
 .. S RESULT(GMVNUM)=$$GETDATA(GMVDO)_"^"_$$ABBVAL(GMVDO)
"RTN","GMVUTL7",20,0)
 .. D GETALL(GMVNUM,.RESULT)
"RTN","GMVUTL7",21,0)
 .. S GMVNUM=GMVNUM+1
"RTN","GMVUTL7",22,0)
 .. Q
"RTN","GMVUTL7",23,0)
 . Q
"RTN","GMVUTL7",24,0)
 E  D
"RTN","GMVUTL7",25,0)
 . S GMVLOOP=0
"RTN","GMVUTL7",26,0)
 . F  S GMVLOOP=$O(^GMRD(120.51,GMVLOOP)) Q:GMVLOOP'>0  D
"RTN","GMVUTL7",27,0)
 .. S RESULT(GMVNUM)=$$GETDATA(GMVLOOP)_"^"_$$ABBVAL(GMVLOOP)
"RTN","GMVUTL7",28,0)
 .. D GETALL(GMVNUM,.RESULT)
"RTN","GMVUTL7",29,0)
 .. S GMVNUM=GMVNUM+1
"RTN","GMVUTL7",30,0)
 .. Q
"RTN","GMVUTL7",31,0)
 . Q
"RTN","GMVUTL7",32,0)
 Q
"RTN","GMVUTL7",33,0)
GETALL(GMVLOOP,RESULT)  ;
"RTN","GMVUTL7",34,0)
 S GMVCNT=0
"RTN","GMVUTL7",35,0)
 ;S GMVLOOP="" F  S GMVLOOP=$O(RESULT(GMVLOOP)) Q:GMVLOOP=""  D
"RTN","GMVUTL7",36,0)
 Q:$G(RESULT(GMVLOOP))=""
"RTN","GMVUTL7",37,0)
 Q:$P(RESULT(GMVLOOP),"^",1)'="V"
"RTN","GMVUTL7",38,0)
 S GMVITTYP=$P(RESULT(GMVLOOP),"^",2)
"RTN","GMVUTL7",39,0)
 S GMVD2=""
"RTN","GMVUTL7",40,0)
 S GMVCNT=GMVLOOP+.001
"RTN","GMVUTL7",41,0)
 F  S GMVD2=$O(^GMRD(120.53,"C",GMVITTYP,GMVD2)) Q:GMVD2'>0  D
"RTN","GMVUTL7",42,0)
 . S GMVD1=0
"RTN","GMVUTL7",43,0)
 . F  S GMVD1=$O(^GMRD(120.53,"C",GMVITTYP,GMVD2,GMVD1)) Q:GMVD1'>0  D
"RTN","GMVUTL7",44,0)
 .. S GMVDATA=$P($G(^GMRD(120.53,GMVD2,0)),U)
"RTN","GMVUTL7",45,0)
 .. I GMVDATA]"" D
"RTN","GMVUTL7",46,0)
 ... S GMVITTYP(0)=$G(^GMRD(120.51,+GMVITTYP,0))
"RTN","GMVUTL7",47,0)
 ... S GMVITTYP(1)=GMVITTYP,GMVITTYP(2)=$P(GMVITTYP(0),U,2)
"RTN","GMVUTL7",48,0)
 ... S GMVITTYP(3)=$P(GMVITTYP(0),U)
"RTN","GMVUTL7",49,0)
 ... S GMVDEFQ=$P($G(^GMRD(120.53,GMVD2,1,GMVD1,0)),U,7)
"RTN","GMVUTL7",50,0)
 ... S GMVDEFQ(0)=$G(^GMRD(120.52,+GMVDEFQ,0))
"RTN","GMVUTL7",51,0)
 ... S GMVDEFQ(1)=GMVDEFQ,GMVDEFQ(2)=$P(GMVDEFQ(0),U,2)
"RTN","GMVUTL7",52,0)
 ... S GMVDEFQ(3)=$P(GMVDEFQ(0),U)
"RTN","GMVUTL7",53,0)
 ... S RESULT(GMVCNT)="C"_U_GMVD2_U_GMVDATA
"RTN","GMVUTL7",54,0)
 ... D GETCAT(GMVITTYP,GMVD2,.RESULT,.GMVCNT)
"RTN","GMVUTL7",55,0)
 ... S GMVCNT=GMVCNT+.001
"RTN","GMVUTL7",56,0)
 ... Q
"RTN","GMVUTL7",57,0)
 .. Q
"RTN","GMVUTL7",58,0)
 . Q
"RTN","GMVUTL7",59,0)
 Q
"RTN","GMVUTL7",60,0)
GETDATA(GMVVITAL)       ;
"RTN","GMVUTL7",61,0)
 N GMVDATA,GMVD0,GMVD1
"RTN","GMVUTL7",62,0)
 I $G(^GMRD(120.51,GMVVITAL,0))="" D   Q GMVRES
"RTN","GMVUTL7",63,0)
 . S GMVRES="V^"_GMVVITAL_"^ERROR"
"RTN","GMVUTL7",64,0)
 . Q
"RTN","GMVUTL7",65,0)
 S GMVDATA=$G(^GMRD(120.51,GMVVITAL,0))
"RTN","GMVUTL7",66,0)
 I GMVDATA]"" S GMVRES="V"_U_GMVVITAL_U_$P(GMVDATA,U)_U_$P(GMVDATA,U,2)_U_$P(GMVDATA,U,7)
"RTN","GMVUTL7",67,0)
 Q GMVRES
"RTN","GMVUTL7",68,0)
GETCAT(GMVVTP,GMVITCAT,RESULT,GMVNUM)        ;
"RTN","GMVUTL7",69,0)
 N GMVD0,GMVD1,GMVCNT
"RTN","GMVUTL7",70,0)
 S GMVD0=0,GMVCNT=0
"RTN","GMVUTL7",71,0)
 F  S GMVD0=$O(^GMRD(120.52,"C",GMVITTYP,GMVD0)) Q:GMVD0'>0  D
"RTN","GMVUTL7",72,0)
 . S GMVD1=0
"RTN","GMVUTL7",73,0)
 . F  S GMVD1=$O(^GMRD(120.52,"C",GMVITTYP,GMVD0,GMVD1)) Q:GMVD1'>0  D
"RTN","GMVUTL7",74,0)
 .. S GMVCATD0=$P($G(^GMRD(120.52,GMVD0,1,GMVD1,0)),U,2)
"RTN","GMVUTL7",75,0)
 .. I $G(GMVITCAT)>0,GMVITCAT'=GMVCATD0 Q
"RTN","GMVUTL7",76,0)
 .. S GMVDATA=$G(^GMRD(120.52,GMVD0,0))
"RTN","GMVUTL7",77,0)
 .. I GMVDATA]"" D
"RTN","GMVUTL7",78,0)
 ... S GMVITTYP(0)=$G(^GMRD(120.51,+GMVITTYP,0))
"RTN","GMVUTL7",79,0)
 ... S GMVITTYP(1)=GMVITTYP,GMVITTYP(2)=$P(GMVITTYP(0),U,2)
"RTN","GMVUTL7",80,0)
 ... S GMVITTYP(3)=$P(GMVITTYP(0),U)
"RTN","GMVUTL7",81,0)
 ... S GMVITCAT(0)=$G(^GMRD(120.53,+GMVCATD0,0))
"RTN","GMVUTL7",82,0)
 ... S GMVITCAT(1)=GMVCATD0,(GMVITCAT(2),GMVITCAT(3))=$P(GMVITCAT(0),U)
"RTN","GMVUTL7",83,0)
 ... S GMVNUM=GMVNUM+.001
"RTN","GMVUTL7",84,0)
 ... S RESULT(GMVNUM)="Q"_U_GMVD0_U_$P(GMVDATA,U)_U_$P(GMVDATA,U,2)
"RTN","GMVUTL7",85,0)
 ... Q
"RTN","GMVUTL7",86,0)
 .. Q
"RTN","GMVUTL7",87,0)
 . Q
"RTN","GMVUTL7",88,0)
 Q
"RTN","GMVUTL7",89,0)
ABBVAL(VITALTYP)       ;
"RTN","GMVUTL7",90,0)
 N RESULT,GMVDATA
"RTN","GMVUTL7",91,0)
 ; Gets high low values if they exist
"RTN","GMVUTL7",92,0)
 I $G(^GMRD(120.57,1,1))="" Q ""
"RTN","GMVUTL7",93,0)
 S RESULT=""
"RTN","GMVUTL7",94,0)
 S GMVDATA=$P($G(^GMRD(120.57,1,1)),U,1,13)
"RTN","GMVUTL7",95,0)
 I VITALTYP=1 D
"RTN","GMVUTL7",96,0)
 . ; BP
"RTN","GMVUTL7",97,0)
 . S RESULT=$P(GMVDATA,U,7,10)
"RTN","GMVUTL7",98,0)
 . Q
"RTN","GMVUTL7",99,0)
 I VITALTYP=2 D
"RTN","GMVUTL7",100,0)
 . ; Temprature
"RTN","GMVUTL7",101,0)
 . S RESULT=$P(GMVDATA,U,1,2)
"RTN","GMVUTL7",102,0)
 . Q
"RTN","GMVUTL7",103,0)
 I VITALTYP=5 D
"RTN","GMVUTL7",104,0)
 . ; Pulse
"RTN","GMVUTL7",105,0)
 . S RESULT=$P(GMVDATA,U,3,4)
"RTN","GMVUTL7",106,0)
 . Q
"RTN","GMVUTL7",107,0)
 I VITALTYP=3 D
"RTN","GMVUTL7",108,0)
 . ;Respirations
"RTN","GMVUTL7",109,0)
 . S RESULT=$P(GMVDATA,U,5,6)
"RTN","GMVUTL7",110,0)
 . Q
"RTN","GMVUTL7",111,0)
 I VITALTYP=19 D
"RTN","GMVUTL7",112,0)
 . ;CVP
"RTN","GMVUTL7",113,0)
 . S RESULT=$P(GMVDATA,U,11,13)
"RTN","GMVUTL7",114,0)
 . Q
"RTN","GMVUTL7",115,0)
 Q RESULT
"RTN","GMVUTL7",116,0)
GETIEN(GMVABB) ; Gets IEN from the Abbreviation code.
"RTN","GMVUTL7",117,0)
 Q $O(^GMRD(120.51,"C",GMVABB,""))
"RTN","GMVUTL7",118,0)
ROOMPT(RESULTS,GMVWRD,GMVRLST) ; GMV WARD/ROOM PATIENTS [RPC entry point]
"RTN","GMVUTL7",119,0)
 ; Returns a list of patients in the ward and rooms specified
"RTN","GMVUTL7",120,0)
 ; Input:
"RTN","GMVUTL7",121,0)
 ; RESULTS - name of the array to hold the patient list
"RTN","GMVUTL7",122,0)
 ; GMVWRD  - name of the ward (e.g., 2EAST)
"RTN","GMVUTL7",123,0)
 ; GMVRLST - the room numbers of the ward separated by comma
"RTN","GMVUTL7",124,0)
 ;           (e.g., 200,210,220)
"RTN","GMVUTL7",125,0)
 ; Output:
"RTN","GMVUTL7",126,0)
 ; RESULT(n)=patient name^DFN^DOB (external)^SSN (no hyphens)
"RTN","GMVUTL7",127,0)
 ; 
"RTN","GMVUTL7",128,0)
 ; n is a sequential number beginning with 0 (zero)
"RTN","GMVUTL7",129,0)
 N GMRVROOM,GMRVLST,GMRVCNT,GMVT,GMVDF
"RTN","GMVUTL7",130,0)
 K RESULTS
"RTN","GMVUTL7",131,0)
 S GMVWARD(1)=GMVWRD
"RTN","GMVUTL7",132,0)
 I GMVRLST["," D
"RTN","GMVUTL7",133,0)
 . F GMVA=1:1:$L(GMVRLST)+1 D
"RTN","GMVUTL7",134,0)
 . . Q:$P(GMVRLST,",",GMVA)=""
"RTN","GMVUTL7",135,0)
 . . S GMVROOM($P($P(GMVRLST,",",GMVA),"-"))=""
"RTN","GMVUTL7",136,0)
 . . Q
"RTN","GMVUTL7",137,0)
 . Q
"RTN","GMVUTL7",138,0)
 E  D
"RTN","GMVUTL7",139,0)
 . S GMVROOM($P(GMVRLST,"-"))=""
"RTN","GMVUTL7",140,0)
 . Q
"RTN","GMVUTL7",141,0)
 S GMVEDB="S"
"RTN","GMVUTL7",142,0)
 K ^TMP($J)
"RTN","GMVUTL7",143,0)
 D WARD^GMVDS1
"RTN","GMVUTL7",144,0)
 S GMVT="",GMVCNT=0
"RTN","GMVUTL7",145,0)
 F  S GMVT=$O(^TMP($J,GMVT)) Q:GMVT=""  D
"RTN","GMVUTL7",146,0)
 . S GMVN=""
"RTN","GMVUTL7",147,0)
 . F  S GMVN=$O(^TMP($J,GMVT,GMVN)) Q:GMVN=""  D
"RTN","GMVUTL7",148,0)
 . . S GMVDF=""
"RTN","GMVUTL7",149,0)
 . . F  S GMVDF=$O(^TMP($J,GMVT,GMVN,GMVDF)) Q:GMVDF=""  D
"RTN","GMVUTL7",150,0)
 . . . S GMVDOB=$$FMTE^XLFDT($P(^DPT(GMVDF,0),"^",3))
"RTN","GMVUTL7",151,0)
 . . . S GMVSSN=$P(^DPT(GMVDF,0),"^",9)
"RTN","GMVUTL7",152,0)
 . . . S RESULTS(GMVCNT)=GMVN_"^"_GMVDF_"^"_GMVDOB_"^"_GMVSSN
"RTN","GMVUTL7",153,0)
 . . . S GMVCNT=GMVCNT+1
"RTN","GMVUTL7",154,0)
 . . . Q
"RTN","GMVUTL7",155,0)
 . . Q
"RTN","GMVUTL7",156,0)
 . Q
"RTN","GMVUTL7",157,0)
 Q
"RTN","GMVUTL7",158,0)
TIME(RESULT,P2) ;Gets current time
"RTN","GMVUTL7",159,0)
 S RESULT=$$NOW^XLFDT()
"RTN","GMVUTL7",160,0)
 Q
"RTN","GMVUTL8")
0^188^B922976
"RTN","GMVUTL8",1,0)
GMVUTL8 ;HIOFO/DS-RPC API TO RETURN ALL VITALS/CATOGORIES/QUALIFIERS ;8/30/02  02:07
"RTN","GMVUTL8",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVUTL8",3,0)
 ;
"RTN","GMVUTL8",4,0)
 ; This routine uses the following IAs:
"RTN","GMVUTL8",5,0)
 ;  #3227 - ^NURAPI calls          (private)
"RTN","GMVUTL8",6,0)
 ;
"RTN","GMVUTL8",7,0)
APTLIST(ARRAY,LOC) ; Returns a list of active patients for a nursing
"RTN","GMVUTL8",8,0)
 ; location in the array specified. [RPC entry point]
"RTN","GMVUTL8",9,0)
 ;  input:   LOC - (Required) NURS LOCATION file (#211.4) ien
"RTN","GMVUTL8",10,0)
 ;  input: ARRAY - (Required) Name of the array to return entries in
"RTN","GMVUTL8",11,0)
 ; output: ARRAY - Subscripted by sequential number with DFN in first
"RTN","GMVUTL8",12,0)
 ;                 piece and patient name in second piece.
"RTN","GMVUTL8",13,0)
 ;         example: ARRAY(#)=DFN^patient name^SSN^DOB^SEX AND AGE
"RTN","GMVUTL8",14,0)
 ;                  ^ATTENDING^VETERAN^INTERNAL DATE/TIME DECEASED
"RTN","GMVUTL8",15,0)
 ;                  ^EXTERNAL DATE/TIME DECEASED
"RTN","GMVUTL8",16,0)
 ;
"RTN","GMVUTL8",17,0)
 I $G(LOC)="" S ARRAY(1)=-1
"RTN","GMVUTL8",18,0)
 N DFN,GMVARRAY,GMVCNT,GMVPAT,PATNAME
"RTN","GMVUTL8",19,0)
 D APTLIST^NURAPI(LOC,.GMVARRAY)
"RTN","GMVUTL8",20,0)
 I $G(GMVARRAY(1))'>0 S ARRAY(1)=-1 Q
"RTN","GMVUTL8",21,0)
 S GMVCNT=0
"RTN","GMVUTL8",22,0)
 F  S GMVCNT=$O(GMVARRAY(GMVCNT)) Q:'GMVCNT  D
"RTN","GMVUTL8",23,0)
 .S DFN=$P(GMVARRAY(GMVCNT),U,1)
"RTN","GMVUTL8",24,0)
 .Q:'DFN
"RTN","GMVUTL8",25,0)
 .S PATNAME=$P(GMVARRAY(GMVCNT),U,2)
"RTN","GMVUTL8",26,0)
 .D PTINFO^GMVUTL3(.GMVPAT,DFN)
"RTN","GMVUTL8",27,0)
 .S ARRAY(GMVCNT)=DFN_U_PATNAME_U_GMVPAT
"RTN","GMVUTL8",28,0)
 .Q
"RTN","GMVUTL8",29,0)
 Q
"RTN","GMVVS1")
0^265^B26865613
"RTN","GMVVS1",1,0)
GMVVS1 ;HIOFO/YH,FT-PATIENT VITAL SIGNS-I/O SF 511 GRAPH - 1 ;11/6/01  14:43
"RTN","GMVVS1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVVS1",3,0)
 ;
"RTN","GMVVS1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVVS1",5,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVVS1",6,0)
 ;
"RTN","GMVVS1",7,0)
GRAPH ;
"RTN","GMVVS1",8,0)
 S GMRPGC=0,GMRX1="" F X=1:1:111 S GMRX1=GMRX1_$S(X#11:" ",1:"|")
"RTN","GMVVS1",9,0)
 S (GMRX,GMRX2)=GMRX1 F X=1:1:10 S $P(GMRX,"|",X)="__________",$P(GMRX2,"|",X)="----------"
"RTN","GMVVS1",10,0)
 S GMRPG=GMRTNM\10+$S(GMRTNM#10>0:1,1:0) I GMRPG=0 D HEADER^GMVVS2 W !,"THERE IS NO DATA FOR THIS REPORT" X "F Y=$Y:1:(IOSL-6) W !" D FOOTER^GMVVS2 Q
"RTN","GMVVS1",11,0)
 F GMRPGS=1:1:GMRPG S GMRTLO=105.8335,GMRPLO=198.335 D PAGE Q:GMROUT
"RTN","GMVVS1",12,0)
 Q
"RTN","GMVVS1",13,0)
PAGE ;
"RTN","GMVVS1",14,0)
 K GMRQUAL,GLINE,GVAR D HEADER^GMVVS2 W "T: Temperature   P: Pulse   BMI: Body Mass Index   C/G: Circumference/Girth   * - Abnormal value   ** - Abnormal value off of graph",! D DATES^GMVVS2 W !,?10,"|",?11,GMRX
"RTN","GMVVS1",15,0)
 F GMRI=0:0 Q:$Y>51  W ! D SETHD^GMVVS4 W GMRHDR1,?9,$S(GMR3!($Y=28):"-",1:""),?10,"|" D DATAPRT^GMVVS4 W $S(GMR3!($Y=28):"-",1:""),?106,GMRHDR2
"RTN","GMVVS1",16,0)
 W !,?10,"|",GMRX2 F GMRI="T","P","R","B","B1","B2","W","H","P1","BMI" S GMRLINE(GMRI)=GMRX1,GVAR(GMRI)=""
"RTN","GMVVS1",17,0)
 F GMRI="PO2","OX1","OX2","OX3","CVP","CVP1","CG","CG1","CG2" K GVAR(GMRI)
"RTN","GMVVS1",18,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>12  F GMRI="T","P","R","H","W" D STLNP
"RTN","GMVVS1",19,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>12  D BP^GMVVS2
"RTN","GMVVS1",20,0)
 F GMRI="T","P","P1","R","B","B1","B2","W","BMI","H" I $D(GVAR(GMRI)) D
"RTN","GMVVS1",21,0)
 .I IOSL<($Y+6) S GMRI(1)=GMRI D FOOTER^GMVVS2,HEADER^GMVVS2,DATES^GMVVS2 S GMRI=GMRI(1) W !,?10,"|",?11,GMRX
"RTN","GMVVS1",22,0)
 . S G=$S(GMRI="T":"TEMP.",GMRI="P":"PULSE",GMRI="R":"RESP.",GMRI="W":"WEIGHT(LB)",GMRI="H":"HEIGHT(IN)",GMRI="B":"BLOOD",GMRI="B1":"  PRESSURE",GMRI="BMI":"BMI",1:"")
"RTN","GMVVS1",23,0)
 . I G="" S G=$S(GMRI="PO2":"PULSE OX.",GMRI="OX1":"  L/MIN",GMRI="OX2":"  %",GMRI="OX3":"  METHOD",GMRI="CG":"C/G (IN)",GMRI="CVP":"CVP cm H2O",GMRI="CVP1":"    mmHg",GMRI="CG1":"          ",GMRI="CG2":"    (CM)",1:"")
"RTN","GMVVS1",24,0)
 . W !,G,?10,"|",GMRLINE(GMRI)
"RTN","GMVVS1",25,0)
 D IO^GMVVS2 I 'GMROUT W !,?10,"|",GMRX,!
"RTN","GMVVS1",26,0)
 I IOSL<($Y+6) D FOOTER^GMVVS2,HEADER^GMVVS2
"RTN","GMVVS1",27,0)
 I $D(GMRQUAL),'GMROUT W ! S GLINE="Qualifier: " S G="" F  S G=$O(GMRQUAL(G)) Q:G=""  D LEGEND^GMVLGQU
"RTN","GMVVS1",28,0)
 I 'GMROUT W GLINE F X=0:0 W ! Q:IOSL<($Y+6)
"RTN","GMVVS1",29,0)
 D FOOTER^GMVVS2 S GMRDT="" F GMRNM=1:1:12 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  K ^TMP($J,"GMRDT",GMRDT)
"RTN","GMVVS1",30,0)
 Q
"RTN","GMVVS1",31,0)
STLNP ;
"RTN","GMVVS1",32,0)
 S GMR(GMRI)=$O(^TMP($J,"GMR",GMRI,GMRDT,"")) Q:GMR(GMRI)=""
"RTN","GMVVS1",33,0)
 S (GMRSITE,GMRSITE(1),GMRINF,GMRVJ)=""
"RTN","GMVVS1",34,0)
 S GMRSITE(1)=$P($G(^TMP($J,"GMR",GMRI,GMRDT,GMR(GMRI))),"^"),GMRSITE(2)=$P($G(^(GMR(GMRI))),"^",3),GMRINF=$P($G(^(GMR(GMRI))),"^",4) I GMRSITE(1)'="" S GI=GMRI D SYNOARY^GMVLGQU
"RTN","GMVVS1",35,0)
 I GMRI'="CVP" S GI=$S(GMR(GMRI)>0:$J(GMR(GMRI),0,$S(GMRI="W"!(GMRI="H")!(GMRI="CG"):2,GMRI'="T":0,1:1)),1:GMR(GMRI))
"RTN","GMVVS1",36,0)
 E  S GI=$S(GMR(GMRI)>0!(GMR(GMRI)<0)!($E(GMR(GMRI))="0"):$J(GMR(GMRI),0,1),1:GMR(GMRI))
"RTN","GMVVS1",37,0)
 I "UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GI) S GI=GI_$S($P(^TMP($J,"GMR",GMRI,GMRDT,GMR(GMRI)),"^",2)'=1:" ",1:"*")
"RTN","GMVVS1",38,0)
 I GMRI="P",($P(^TMP($J,"GMR",GMRI,GMRDT,GMR(GMRI)),"^",1)["DORSALIS PEDIS"),(+GI=1) S:$E(GI,$L(GI))="*" GI=$E(GI,1,$L(GI)-1)
"RTN","GMVVS1",39,0)
 S $P(GMRLINE(GMRI),"|",GMRNM)=GI_$S(GMRI="P"&($L(GMRSITE," ")>3):""_$P(GMRSITE," "),GMRI="R"!(GMRI="T")!(GMRI="H")!(GMRI="W")!(GMRI="CG"):""_GMRSITE,1:"")
"RTN","GMVVS1",40,0)
 S $P(GMRLINE(GMRI),"|",GMRNM)=$E($P(GMRLINE(GMRI),"|",GMRNM)_"          ",1,10)
"RTN","GMVVS1",41,0)
 D SETLN
"RTN","GMVVS1",42,0)
 I GMRI="CG",$D(GMRLINE("CG2")) S $P(GMRLINE("CG2"),"|",GMRNM)=$E($S(GMR(GMRI)>0:$J(GMR(GMRI)/.3937,0,2),1:"")_"          ",1,10)
"RTN","GMVVS1",43,0)
 I GMRI="P" S $P(GMRLINE("P1"),"|",GMRNM)=$E($S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)_"          ",1,10)
"RTN","GMVVS1",44,0)
 I GMRI="H",$D(GMRLINE("H1")) S:GMR(GMRI)>0 $P(GMRLINE("H1"),"|",GMRNM)=$E($S(GMR(GMRI)>0:$J(GMR(GMRI)*2.54,0,2),1:GMR(GMRI))_"          ",1,10)
"RTN","GMVVS1",45,0)
 I GMRI="W",$D(GMRLINE("W1")) S:GMR(GMRI)>0 $P(GMRLINE("W1"),"|",GMRNM)=$E($S(GMR(GMRI)>0:$J(GMR(GMRI)/2.2,0,2),1:GMR(GMRI))_"          ",1,10)
"RTN","GMVVS1",46,0)
 I GMRI="W",$D(GMRLINE("BMI")),GMR(GMRI)>0 D
"RTN","GMVVS1",47,0)
 . S GMRBMI="",GMRBMI(1)=GMRDT,GMRBMI(2)=GMR(GMRI) D CALBMI^GMVBMI(.GMRBMI)
"RTN","GMVVS1",48,0)
 . S $P(GMRLINE("BMI"),"|",GMRNM)=$E(GMRBMI_"          ",1,10) K GMRBMI
"RTN","GMVVS1",49,0)
 I GMRI="PO2",$D(GMRLINE("OX1")) D
"RTN","GMVVS1",50,0)
 . S $P(GMRLINE("OX3"),"|",GMRNM)=$E(GMRSITE_"          ",1,10)
"RTN","GMVVS1",51,0)
 . S GMRINF=$P(^TMP($J,"GMR",GMRI,GMRDT,GMR(GMRI)),"^",4),(GMRINF(1),GMRINF(2))="" D
"RTN","GMVVS1",52,0)
 . . I GMRINF="" S $P(GMRLINE("OX1"),"|",GMRNM)="          ",$P(GMRLINE("OX2"),"|",GMRNM)="          "
"RTN","GMVVS1",53,0)
 . . E  D PO2^GMVLGQU(.GMRINF) S $P(GMRLINE("OX1"),"|",GMRNM)=$E(GMRINF(1)_"          ",1,10),$P(GMRLINE("OX2"),"|",GMRNM)=$E(GMRINF(2)_"          ",1,10)
"RTN","GMVVS1",54,0)
 I GMRI="CVP",$D(GMRLINE("CVP1")) S $P(GMRLINE("CVP1"),"|",GMRNM)=$E($S(GMR(GMRI)>0!(GMR(GMRI)<0)!($E(GMR(GMRI))="0"):$J(GMR(GMRI)/1.36,0,1),1:"")_$S(GI["*":"*",1:"")_"          ",1,10)
"RTN","GMVVS1",55,0)
 I GMRI="PN",$D(GMRLINE("PN")) S $P(GMRLINE("PN"),"|",GMRNM)=$E($S(GMR(GMRI)?1.2N&(GMR(GMRI)'>10):GMR(GMRI),GMR(GMRI)=99:GMR(GMRI),1:"")_"          ",1,10)
"RTN","GMVVS1",56,0)
 K GI Q
"RTN","GMVVS1",57,0)
SETLN ;
"RTN","GMVVS1",58,0)
 S GVAR(GMRI)=""
"RTN","GMVVS1",59,0)
 I GMRI="PO2" S (GVAR("PO2"),GVAR("OX1"),GVAR("OX2"),GVAR("OX3"))="" Q
"RTN","GMVVS1",60,0)
 I GMRI="CVP" S (GVAR("CVP"),GVAR("CVP1"))="" Q
"RTN","GMVVS1",61,0)
 I GMRI="CG" S (GVAR("CG"),GVAR("CG2"))="" Q
"RTN","GMVVS1",62,0)
 Q
"RTN","GMVVS2")
0^266^B20612790
"RTN","GMVVS2",1,0)
GMVVS2 ;HIOFO/YH,FT-PATIENT VITAL SIGNS-I/O SF 511 GRAPH - 2 ;9/30/02  15:25
"RTN","GMVVS2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVVS2",3,0)
 ;
"RTN","GMVVS2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVVS2",5,0)
 ;  #1392 - FILE 126.56 references (private)
"RTN","GMVVS2",6,0)
 ;  #1393 - FILE 126.58 references (private)
"RTN","GMVVS2",7,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVVS2",8,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMVVS2",9,0)
 ;
"RTN","GMVVS2",10,0)
IO ;PRINT INTAKE/OUTPUT SECTION OF VITAL SIGNS-I/O SHEET
"RTN","GMVVS2",11,0)
 K ^TMP($J,"XI"),^TMP($J,"XO")
"RTN","GMVVS2",12,0)
 F NN=1:1:GN(1)+1 S GMRI="XI"_NN K GMRLINE(GMRI)
"RTN","GMVVS2",13,0)
 F NN=1:1:GN(2)+1 S GMRI="XO"_NN K GMRLINE(GMRI)
"RTN","GMVVS2",14,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>10  S GDT=+$E(GMRDT,1,7) D
"RTN","GMVVS2",15,0)
 . F NN=1:1:GN(1)+1 S GMRI="XI"_NN I $D(^TMP($J,"GMR",GMRI,GDT)) D
"RTN","GMVVS2",16,0)
 . . S GMRYDT=$O(^TMP($J,"GMR",GMRI,GDT,0)) I GMRYDT>0 S ^TMP($J,"XI",NN,GDT,GMRYDT)="",GMRLINE(GMRI)=GMRX1
"RTN","GMVVS2",17,0)
 . F NN=1:1:GN(2)+1 S GMRI="XO"_NN I $D(^TMP($J,"GMR",GMRI,GDT)) D
"RTN","GMVVS2",18,0)
 . . S GMRYDT=$O(^TMP($J,"GMR",GMRI,GDT,0)) I GMRYDT>0 S ^TMP($J,"XO",NN,GDT,GMRYDT)="",GMRLINE(GMRI)=GMRX1
"RTN","GMVVS2",19,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>10  S GDT=+$E(GMRDT,1,7) D SETDATA
"RTN","GMVVS2",20,0)
 I IOSL<($Y+6) D FOOTER,HEADER,DATES W !,?15,"|",?16,GMRX
"RTN","GMVVS2",21,0)
 W !,"Intake(24 Hr)(cc)",?20,"|",GMRX F NN=1:1:GN(1)+1 S GMRI="XI"_NN I $D(GMRLINE(GMRI)) D
"RTN","GMVVS2",22,0)
 .I IOSL<($Y+6) S GMRI(1)=GMRI D FOOTER,HEADER,DATES S GMRI=GMRI(1) W !,?20,"|",?21,GMRX
"RTN","GMVVS2",23,0)
 .W !,?3,$S(NN=1:"IV",NN=2:"BLOOD",NN=3:"P NUTRI",NN=(GN(1)+1):"TOTAL",NN>3&(NN<(GN(1)+1)):$E($P(^GMRD(126.56,+$O(^GMRD(126.56,"C",NN-3,0)),0),"^"),1,6),1:" "),?10,"|",GMRLINE(GMRI)
"RTN","GMVVS2",24,0)
 I IOSL<($Y+6) S GMRI(1)=GMRI D FOOTER,HEADER,DATES S GMRI=GMRI(1) W !,?10,"|",?11,GMRX
"RTN","GMVVS2",25,0)
 W !,"Output(24 Hr)(cc)",?20,"|",GMRX
"RTN","GMVVS2",26,0)
 F NN=1:1:GN(2)+1 S GI="XO"_NN I $D(GMRLINE(GI)) D
"RTN","GMVVS2",27,0)
 .I IOSL<($Y+6) S GMRI(1)=GMRI D FOOTER,HEADER,DATES W !,?20,"|",?21,GMRX S GMRI=GMRI(1)
"RTN","GMVVS2",28,0)
 .W !,?3,$S(NN<(GN(2)+1):$E($P(^GMRD(126.58,+$O(^GMRD(126.58,"C",NN,0)),0),"^"),1,6),NN=(GN(2)+1):"TOTAL",1:" "),?10,"|",GMRLINE(GI)
"RTN","GMVVS2",29,0)
 Q
"RTN","GMVVS2",30,0)
SETDATA ; FILL GMRLINE WITH I/O DATA AND WRITE GMRLINE
"RTN","GMVVS2",31,0)
 F GMRI="XI","XO" S GMRY=0 F  S GMRY=$O(^TMP($J,GMRI,GMRY)) Q:GMRY'>0  D
"RTN","GMVVS2",32,0)
 . I $D(^TMP($J,GMRI,GMRY,GDT)) S GDATA=$O(^TMP($J,GMRI,GMRY,GDT,0)) S:GDATA>0 $P(GMRLINE(GMRI_GMRY),"|",GMRNM)=$J(GDATA,8) K ^TMP($J,"GMR",GMRI_GMRY,GDT),^TMP($J,GMRI,GMRY,GDT,GDATA)
"RTN","GMVVS2",33,0)
 Q
"RTN","GMVVS2",34,0)
FOOTER ;PRINT VITAL SIGNS-I/O SHEET FOOTER
"RTN","GMVVS2",35,0)
 W ! W:GMRNAM'="" ?$X-3,$E(GMRNAM,1,35) W:SSN'="" "  "_SSN W:GMRBTH'="" "  "_GMRBTH W:GMRAGE'="" "  "_GMRAGE_" YRS" W:GMRSEX'="" "  "_GMRSEX
"RTN","GMVVS2",36,0)
 W ?95,"MEDICAL RECORD" W !,"Unit: "_$S(GMRWARD(1)'="":GMRWARD(1),1:"     "),"   "_"Room: "_$S($P(VAIN(5),"^")'="":$P($P(VAIN(5),"^"),"-",1,2),1:"    "),?95,"VITAL FLOW SHEET"
"RTN","GMVVS2",37,0)
 D INP^VADPT S GMRVHLOC=$$HOSPLOC^GMVUTL1(+$G(VAIN(4)))
"RTN","GMVVS2",38,0)
 W !,"Division: "_$$DIVISION^GMVUTL1(+GMRVHLOC),?55,"Page "_GMRPGC,?95,"VAF 10-7987 VICE SF 511",!
"RTN","GMVVS2",39,0)
 W GSTRFIN Q
"RTN","GMVVS2",40,0)
DATES ;PRINT DATE/TIME COLUMNS FOR VITAL SIGNS-I/O SHEET
"RTN","GMVVS2",41,0)
 W ?18,$$REPEAT^XLFSTR("_",109),!,?6,"Date/Time",?17,"|" S GMRLINE=GMRX1,GMRJ=0 F GMRI=1:1:10 S GMRJ=$O(^TMP($J,"GMRDT",GMRJ)) Q:GMRJ'>0  S GMRDT=$E(GMRJ,4,5)_"/"_$E(GMRJ,6,7)_"/"_$E(GMRJ,2,3),$P(GMRLINE,"|",GMRI)=GMRDT_"  "
"RTN","GMVVS2",42,0)
 W ?18,GMRLINE,! S GMRLINE=GMRX1,GMRJ=0 F GMRI=1:1:10 S GMRJ=$O(^TMP($J,"GMRDT",GMRJ)) Q:GMRJ'>0  S:+$P(GMRJ,".",2)>0 GMRDT=$E($P(GMRJ,".",2)_"0000000",1,4),$P(GMRLINE,"|",GMRI)=$E($E(GMRDT,1,2)_":"_$E(GMRDT,3,4)_"          ",1,10)
"RTN","GMVVS2",43,0)
 W ?17,"|",?18,GMRLINE
"RTN","GMVVS2",44,0)
 Q
"RTN","GMVVS2",45,0)
HEADER ;PRINT HEADER FOR VITAL SIGNS-I/O SHEET
"RTN","GMVVS2",46,0)
 W:'($E(IOST)'="C"&'GFLAG) @IOF S GFLAG=1,GMRPGC=GMRPGC+1
"RTN","GMVVS2",47,0)
 W !,?116,"PAGE ",GMRPGC,!
"RTN","GMVVS2",48,0)
 Q
"RTN","GMVVS2",49,0)
BP ;
"RTN","GMVVS2",50,0)
 S GMR("B")=$O(^TMP($J,"GMR","B",GMRDT,"")) Q:GMR("B")=""
"RTN","GMVVS2",51,0)
 I GMR("B")'>0,GMR("B")'="" S $P(GMRLINE("B"),"|",GMRNM)=$E(GMR("B")_"          ",1,10),$P(GMRLINE("B1"),"|",GMRNM)="          ",$P(GMRLINE("B2"),"|",GMRNM)="          " Q
"RTN","GMVVS2",52,0)
 S (GMRSITE,GMRSITE(1),GMRINF,GMRVJ)="" S:GMR("B")'="" GMRSITE(1)=$P(^TMP($J,"GMR","B",GMRDT,GMR("B")),"^"),GMRVJ=$P(^(GMR("B")),"^",2),GMRINF=$P(^(GMR("B")),"^",4)
"RTN","GMVVS2",53,0)
 I GMRSITE(1)'="" S GI="B" D SYNOARY^GMVLGQU
"RTN","GMVVS2",54,0)
 S $P(GMRLINE("B"),"|",GMRNM)=$E($P(GMR("B"),"/",1,2)_"          ",1,10)
"RTN","GMVVS2",55,0)
 S $P(GMRLINE("B1"),"|",GMRNM)=$E($P(GMR("B"),"/",3)_" "_$S($L(GMRSITE," ")>3:$P(GMRSITE," "),1:"")_"          ",1,10)
"RTN","GMVVS2",56,0)
 S $P(GMRLINE("B2"),"|",GMRNM)=$E($S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)_"          ",1,10)
"RTN","GMVVS2",57,0)
 Q
"RTN","GMVVS3")
0^267^B6382444
"RTN","GMVVS3",1,0)
GMVVS3 ;HIOFO/YH,FT-PATIENT VITAL SIGNS-I/O SF 511 GRAPH - 3 ;11/6/01  14:42
"RTN","GMVVS3",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVVS3",3,0)
 ;
"RTN","GMVVS3",4,0)
 ; This routine uses the following IAs:
"RTN","GMVVS3",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVVS3",6,0)
 ;
"RTN","GMVVS3",7,0)
SF511 ;PRODUCE PATIENT VITAL SIGNS-I/O GRAPH
"RTN","GMVVS3",8,0)
 S GMRHT=0,GMRS=(9999999-GMRFIN)-.0001,GMRQ=9999999-GMRSTRT D INP^VADPT
"RTN","GMVVS3",9,0)
 F GMRTY="B","P","R","T","H","W" D SETT^GMVSR1
"RTN","GMVVS3",10,0)
 F GMRK="P","T","B","H","W","R","XI1" D GMRDT
"RTN","GMVVS3",11,0)
 I $D(^TMP($J,"GMR","XI"_GN(1))) F GMRI=0:0 S GMRI=$O(^TMP($J,"GMR","XI"_GN(1),GMRI)) Q:GMRI'>0  S GFOUND=0 D CKDT S:GFOUND=0 ^TMP($J,"GMRDT",GMRI)=""
"RTN","GMVVS3",12,0)
 I $D(^TMP($J,"GMR","XO"_GN(2))) F GMRI=0:0 S GMRI=$O(^TMP($J,"GMR","XO"_GN(2),GMRI)) Q:GMRI'>0  S GFOUND=0 D CKDT S:GFOUND=0 ^TMP($J,"GMRDT",GMRI)=""
"RTN","GMVVS3",13,0)
 S (GMRTNM,GMRI)=0 F  S GMRI=$O(^TMP($J,"GMRDT",GMRI)) Q:GMRI'>0  S GMRTNM=GMRTNM+1
"RTN","GMVVS3",14,0)
 D ^GMVVS1 K GMR3,GMRDAT,GMREN,GMRHDR1,GMRHDR11,GMRHDR10,GMRHDR2,GMRHT,GMRI,GMRJ,GMRK,GMRLINE,GDATA,GMROLD,GMRP,GMRPDIF,GMRPG,GMRPGC,GMRPGS,GMRPHI,GMRPLO,GMRPOFF,GMRSITE,GMRT,GMRTDIF,GMRTHI,GMRTLO,GMRTNM
"RTN","GMVVS3",15,0)
 K GMRTOFF,GMRTY,GMRNM,GMRVX,GMRVX1,GMRVX2,^TMP($J,"GMRY")
"RTN","GMVVS3",16,0)
 Q
"RTN","GMVVS3",17,0)
CKDT F GMRJ=0:0 S GMRJ=$O(^TMP($J,"GMRDT",GMRJ)) Q:GMRJ'>0!(+$P(GMRJ,".")>GMRI)  S:+$P(GMRJ,".")=GMRI GFOUND=1
"RTN","GMVVS3",18,0)
 Q
"RTN","GMVVS3",19,0)
GMRDT S GMRTNM(GMRK)=0 F GMRI=0:0 S GMRI=$O(^TMP($J,"GMR",GMRK,GMRI)) Q:GMRI'>0  S GMRJ="" F X=0:0 S GMRJ=$O(^TMP($J,"GMR",GMRK,GMRI,GMRJ)) Q:GMRJ=""  S GMRTNM(GMRK)=GMRTNM(GMRK)+1 S:GMRK'="XI1" ^TMP($J,"GMRDT",GMRI)=""
"RTN","GMVVS3",20,0)
 Q
"RTN","GMVVS4")
0^268^B6512040
"RTN","GMVVS4",1,0)
GMVVS4 ;HIOFO/YH,FT-PATIENT VITAL SIGNS-GRAPH ;11/6/01  14:44
"RTN","GMVVS4",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVVS4",3,0)
 ;
"RTN","GMVVS4",4,0)
 ; This routine uses the following IAs:
"RTN","GMVVS4",5,0)
 ; <None>
"RTN","GMVVS4",6,0)
 ;
"RTN","GMVVS4",7,0)
SETHD ;
"RTN","GMVVS4",8,0)
 S GMR3=(($Y/3)=($Y\3)),GMRPHI=GMRPLO,GMRPLO=$Y*(-10)/3+188.335,GMRTHI=GMRTLO,GMRTLO=-$Y/3+107.8335,GMRTDIF=GMRTHI-GMRTLO,GMRPDIF=GMRPHI-GMRPLO
"RTN","GMVVS4",9,0)
 S GMRHDR10=$S($Y>8&GMR3&($Y<44):GMRPLO+1.665,1:""),GMRHDR10=$E("    ",$L(GMRHDR10)+1,4)_GMRHDR10
"RTN","GMVVS4",10,0)
 S GMRHDR11=$S($Y>8&GMR3&($Y<44):GMRTLO+.1665,$Y=28:98.6,1:""),GMRHDR11=$E("    ",$L(GMRHDR11)+1,4)_GMRHDR11
"RTN","GMVVS4",11,0)
 S GMRHDR1=$S($Y'=7:GMRHDR10_" "_GMRHDR11,1:"")
"RTN","GMVVS4",12,0)
 S GMRHDR2=$S($Y'=7&GMR3&($Y<44):$J(($Y*(-5)/27+(380/9)),4,1),$Y=28:"37.0",1:"")
"RTN","GMVVS4",13,0)
 I GMRHDR1'="",GMRHDR2'="" S GMRHDR1=GMRHDR1_"/"_GMRHDR2
"RTN","GMVVS4",14,0)
 Q
"RTN","GMVVS4",15,0)
DATAPRT ;
"RTN","GMVVS4",16,0)
 S GMRLINE=$S($Y=28:GMRX2,1:GMRX1)
"RTN","GMVVS4",17,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  D SETLINE Q:GMRNM=10
"RTN","GMVVS4",18,0)
 W GMRLINE
"RTN","GMVVS4",19,0)
 Q
"RTN","GMVVS4",20,0)
SETLINE ;
"RTN","GMVVS4",21,0)
 N GMRVOK S GMRVOK=0
"RTN","GMVVS4",22,0)
 S GMRNM=GMRNM+1,GMROLD=$P(GMRLINE,"|",GMRNM),GMRP=$O(^TMP($J,"GMR","P",GMRDT,""))
"RTN","GMVVS4",23,0)
 S GMRT=$O(^TMP($J,"GMR","T",GMRDT,""))
"RTN","GMVVS4",24,0)
 S GMRPOFF=($Y=7&(+GMRP>166))!($Y=44&(+GMRP<47)),GMRTOFF=($Y=7&(+GMRT>105.6))!($Y=43&(+GMRT<93.8))
"RTN","GMVVS4",25,0)
 S GMROLD=$S(+GMRT>0&(+GMRT'<GMRTLO&(+GMRT'>GMRTHI)!GMRTOFF):"T"_$S('$P(^TMP($J,"GMR","T",GMRDT,GMRT),"^",2):" ",1:"*")_$S('GMRTOFF:" ",1:"*")_$E(GMROLD,4,10),1:GMROLD)
"RTN","GMVVS4",26,0)
 S GMRVPS=$S(+GMRP:$P($G(^TMP($J,"GMR","P",GMRDT,GMRP)),"^",1),1:"")
"RTN","GMVVS4",27,0)
 I GMRVPS'="" D
"RTN","GMVVS4",28,0)
 .I GMRVPS'["APICAL",(GMRVPS'["RADIAL"),(GMRVPS'["BRACHIAL") S GMRVOK=1
"RTN","GMVVS4",29,0)
 .Q
"RTN","GMVVS4",30,0)
 S GMROLD=$E(GMROLD,1,5)_$S(GMRP>0&(+GMRP'<GMRPLO&(+GMRP'>GMRPHI)!GMRPOFF):"P"_$S('$P(^TMP($J,"GMR","P",GMRDT,GMRP),"^",2):" ",1:"*")_$S('GMRPOFF:" ",1:"*")_$E(GMROLD,9,10),1:$E(GMROLD,6,10))
"RTN","GMVVS4",31,0)
 Q:GMRVOK  S $P(GMRLINE,"|",GMRNM)=GMROLD
"RTN","GMVVS4",32,0)
 Q
"RTN","GMVWT0")
0^269^B6484476
"RTN","GMVWT0",1,0)
GMVWT0 ;HIOFO/YH,FT-KYOCERA WEIGHT GRAPH - DATA ARRAY ;12/17/01  09:28
"RTN","GMVWT0",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVWT0",3,0)
 ;
"RTN","GMVWT0",4,0)
 ; This routine uses the following IAs:
"RTN","GMVWT0",5,0)
 ; #10061 - ^VADPT calls          (supported)
"RTN","GMVWT0",6,0)
 ;
"RTN","GMVWT0",7,0)
EN1 ;
"RTN","GMVWT0",8,0)
 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GTNM"),GWT S (GMRHT,GWT)=0
"RTN","GMVWT0",9,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMVWT0",10,0)
 F GTYPE="H","W" D SETT
"RTN","GMVWT0",11,0)
 F I=1:1:8 S GWT(I)=""
"RTN","GMVWT0",12,0)
 I GWT>0 S GWT=GWT\10*10+30,J=0 F I=1:1:8 S GWT(I)=GWT-(10*J),J=J+1,GWT(I)=GWT(I)_"/"_$J(GWT(I)/2.2,0,2)
"RTN","GMVWT0",13,0)
 U IO D ^GMVWT1
"RTN","GMVWT0",14,0)
Q1 K GPG,GPGS,GAGE,GTYP,GTYPE,GX,GCNTD,GDATA,GDOB,GDT1,GEN,GI,GJ,GK,GMRVJ,GTNM,GWT,GINI,GMVDIAG,GMVDOB,GMVGEN,GMVNM,GSTART1,GEND1 D KVAR^VADPT K VA,VAROOT
"RTN","GMVWT0",15,0)
 K ^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM")
"RTN","GMVWT0",16,0)
 Q
"RTN","GMVWT0",17,0)
SETT S GTYP=$O(^GMRD(120.51,"B",$S(GTYPE="W":"WEIGHT",1:"HEIGHT"),""))
"RTN","GMVWT0",18,0)
 I GTYP>0 F GX=GSTART1:0 S GX=$O(^GMR(120.5,"AA",DFN,GTYP,GX)) Q:GX>GEND1!(GX'>0)  F GEN=0:0 S GEN=$O(^GMR(120.5,"AA",DFN,GTYP,GX,GEN)) Q:GEN'>0  I '$D(^GMR(120.5,GEN,2)) D BLDARR
"RTN","GMVWT0",19,0)
 Q
"RTN","GMVWT0",20,0)
BLDARR ;
"RTN","GMVWT0",21,0)
 S GDATA=$S($D(^GMR(120.5,GEN,0)):^(0),1:"")
"RTN","GMVWT0",22,0)
 Q:$P(GDATA,U,8)=""  ;corrupted record
"RTN","GMVWT0",23,0)
 K GMRVARY S GMRVARY="" I $P($G(^GMR(120.5,GEN,5,0)),"^",4)>0 D CHAR^GMVCHAR(GEN,.GMRVARY,GTYP)
"RTN","GMVWT0",24,0)
 K GG S GG="" I $O(GMRVARY(0)) D
"RTN","GMVWT0",25,0)
 . S GG(1)=0 F  S GG(1)=$O(GMRVARY(GG(1))) Q:GG(1)'>0  S GG(2)=0 F  S GG(2)=$O(GMRVARY(GG(1),GG(2))) Q:GG(2)'>0  S GG(3)="" F  S GG(3)=$O(GMRVARY(GG(1),GG(2),GG(3))) Q:GG(3)=""  S GG=GG_$S(GG="":"",1:";")_GG(3)
"RTN","GMVWT0",26,0)
 S ^TMP($J,"GMRVG",GTYPE,9999999-GX,$P(GDATA,"^",8))=GG_"^"_$S($G(GMRVX(1))>0:1,1:"")_"^^"_$P(GDATA,"^",8)
"RTN","GMVWT0",27,0)
 I $P(GDATA,"^",8)>0 S GDATA(0)=$P(GDATA,"^",8) S:GTYPE="W" GWT=GDATA(0)
"RTN","GMVWT0",28,0)
 Q 
"RTN","GMVWT1")
0^270^B15639526
"RTN","GMVWT1",1,0)
GMVWT1 ;HIOFO/YH,FT-KYOCERA WEIGHT GRAPH - GRAPH DATA ;9/30/02  15:27
"RTN","GMVWT1",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVWT1",3,0)
 ;
"RTN","GMVWT1",4,0)
 ; This routine uses the following IAs:
"RTN","GMVWT1",5,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMVWT1",6,0)
 ;
"RTN","GMVWT1",7,0)
GRAPH ;
"RTN","GMVWT1",8,0)
 D DEM^VADPT,INP^VADPT S SSN=$P(VADM(2),"^",2)
"RTN","GMVWT1",9,0)
 S GPG=0 D SETV F GK="H","W" S ^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMVWT1",10,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMVWT1",11,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0,GINI=0.4
"RTN","GMVWT1",12,0)
 F GPGS=1:1:GPG K GMRQUAL S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE,PAGE D ^GMVWT2,^GMVWT3,^GMVWT4 S GINI=0.4
"RTN","GMVWT1",13,0)
 D KVAR^VADPT K VA Q
"RTN","GMVWT1",14,0)
PAGE I ^TMP($J,"GMRK","G141")="" F GI=2:1:10 S ^TMP($J,"GMRK","G141")=^TMP($J,"GMRK","G"_(140+GI)),GINI=GINI+1.6 Q:^TMP($J,"GMRK","G141")'=""
"RTN","GMVWT1",15,0)
 I $D(GMRQUAL) D LEGEND^GMVLGQU
"RTN","GMVWT1",16,0)
 K GG,I,J,GMRQUAL,GSYNO Q
"RTN","GMVWT1",17,0)
SETV S GMVNM=$S(VADM(1)'="":VADM(1),1:"         ")_"  "_$S(VADM(2)'="":$P(VADM(2),"^",2),1:" "),GDOB=$S($D(VADM(3)):$P(VADM(3),"^",2),1:" "),GAGE=$S($D(VADM(4)):VADM(4),1:" ")
"RTN","GMVWT1",18,0)
 S GMVGEN=$S($D(VADM(5)):$P(VADM(5),"^",2),1:" "),GMVWRD=$S($D(GMRWARD(1)):"Unit: "_GMRWARD(1),1:"Unit:  "),GMVDIAG=$S(VAIN(9)'="":$P(VAIN(9),"^"),1:"   ")
"RTN","GMVWT1",19,0)
 S GMVRMBD=$S('(VAIN(5)=""):"Room: "_$P(VAIN(5),"-",1,2),1:"Room:  "),GMVDOB=$S($D(GDOB)&($D(GAGE)):GDOB_" ("_GAGE_")",1:" ")
"RTN","GMVWT1",20,0)
 I '$D(GMRVHLOC) S GMRVHLOC=$$HOSPLOC^GMVUTL1(+$G(VAIN(4)))
"RTN","GMVWT1",21,0)
 S GMRDIV="Division: "_$$DIVISION^GMVUTL1(+GMRVHLOC)
"RTN","GMVWT1",22,0)
 Q
"RTN","GMVWT1",23,0)
DATE F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMVWT1",24,0)
 Q
"RTN","GMVWT1",25,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMVWT1",26,0)
 Q
"RTN","GMVWT1",27,0)
SETD F GI="H","W" S GJ=$S(GI="W":100,1:160),GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA
"RTN","GMVWT1",28,0)
 Q
"RTN","GMVWT1",29,0)
SETP ;INITIALIZE ^TMP FOR HEIGHT AND WEIGHT
"RTN","GMVWT1",30,0)
 ;100+I - WEIGHT IN LB    120+I - WEIGHT IN KG 
"RTN","GMVWT1",31,0)
 ;140+I - WEIGHT GRAPH POSITION  160+I - "W" OR "W**"
"RTN","GMVWT1",32,0)
 ;180+I - QUALIFIERS   300+I - HEIGHT   320+I - HEIGHT IN CM
"RTN","GMVWT1",33,0)
 ;210+I - BODY MASS INDEX   340+I - HEIGHT QUALIFIER
"RTN","GMVWT1",34,0)
 F I=1:1:10 S (^TMP($J,"GMRK","G"_(100+I)),^("G"_(120+I)),^("G"_(140+I)),^("G"_(160+I)),^("G"_(180+I)),^("G"_(300+I)),^("G"_(320+I)),^("G"_(210+I)),^("G"_(340+I)))=""
"RTN","GMVWT1",35,0)
 Q
"RTN","GMVWT1",36,0)
SETA ;
"RTN","GMVWT1",37,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMVWT1",38,0)
 S (GMRSITE,GMRSITE(1),GMRSITE(2),GMRINF,GMRVJ)=""
"RTN","GMVWT1",39,0)
 I GK'="" D
"RTN","GMVWT1",40,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GI,GDT1,GK)),"^"),GMRVJ=$P($G(^(GK)),"^",2),GMRINF=$P($G(^(GK)),"^",4)
"RTN","GMVWT1",41,0)
 . I GMRSITE(1)'="" D SYNOARY^GMVLGQU
"RTN","GMVWT1",42,0)
 I GI="H" S ^TMP($J,"GMRK","G"_(300+GCNTD))=GK,^("G"_(340+GCNTD))=GMRSITE,^TMP($J,"GMRK","G"_(320+GCNTD))=$S(GK>0:$J(GK*2.54,0,2),1:"") S:GK>0 GMRHT=GK*2.54/100 Q
"RTN","GMVWT1",43,0)
 S ^TMP($J,"GMRK","G"_(180+GCNTD))=GMRSITE
"RTN","GMVWT1",44,0)
 S ^TMP($J,"GMRK","G"_(100+GCNTD))=GK,^TMP($J,"GMRK","G"_(120+GCNTD))=$S(GK>0:$J(GK/2.2,0,2),1:"")
"RTN","GMVWT1",45,0)
 S ^TMP($J,"GMRK","G"_(140+GCNTD))=$S(GK>0:+$P(GWT(1),"/")-GK+10/5,1:"") S:GK>0 ^TMP($J,"GMRK","G"_(160+GCNTD))="W"
"RTN","GMVWT1",46,0)
 I GK>0 D
"RTN","GMVWT1",47,0)
 . S GMRBMI="",GMRBMI(1)=GDT1,GMRBMI(2)=GK D CALBMI^GMVBMI(.GMRBMI)
"RTN","GMVWT1",48,0)
 . S ^TMP($J,"GMRK","G"_(210+GCNTD))=$S(GMRBMI>0:GMRBMI,1:"") K GMRBMI
"RTN","GMVWT1",49,0)
 I GK>0 S ^TMP($J,"GMRK","G"_(140+GCNTD))=$S(^TMP($J,"GMRK","G"_(140+GCNTD))<1.4:1.3,^("G"_(140+GCNTD))>17.5:17.6,1:^("G"_(140+GCNTD))) S:^("G"_(140+GCNTD))<1.4!(^("G"_(140+GCNTD))>17.5) ^TMP($J,"GMRK","G"_(160+GCNTD))="W**"
"RTN","GMVWT1",50,0)
 Q
"RTN","GMVWT2")
0^271^B7774373
"RTN","GMVWT2",1,0)
GMVWT2 ;HIOFO/YH,FT-KYOCERA WEIGHT GRAPH - MACRO ;11/6/01  14:49
"RTN","GMVWT2",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVWT2",3,0)
 ;
"RTN","GMVWT2",4,0)
 ; This routine uses the following IAs:
"RTN","GMVWT2",5,0)
 ; <None>
"RTN","GMVWT2",6,0)
 ;
"RTN","GMVWT2",7,0)
EN1 W !,"!R! RES; DAM;"
"RTN","GMVWT2",8,0)
BOX W !,"MCRO BOX;"
"RTN","GMVWT2",9,0)
 W !,"UNIT C; SLM 3; STM 1; MAP 0,0; SPD 0.05; BOX 16,21.5; MAP -3,18; BOX 19,3.5;"
"RTN","GMVWT2",10,0)
 W !,"FONT 40; MAP -2,0.4; TEXT 'Date/Time'; MAP -2,1; TEXT 'Pounds/Kgs'; "
"RTN","GMVWT2",11,0)
 W !,"SPD 0.01; MAP -2,2; TEXT %1; MAP 0,1; DAP 16,1;"
"RTN","GMVWT2",12,0)
 W !,"SPD 0.05; MAP -0.5,3; TEXT '5'; MAP 0,2; DAP 16,2;"
"RTN","GMVWT2",13,0)
 W !,"SPD 0.01; MAP -2,4; TEXT %2; MAP 0,3; DAP 16,3;"
"RTN","GMVWT2",14,0)
 W:GTNM=0 "MAP 2,5; TEXT 'THERE  IS  NO  DATA  FOR  THIS  PERIOD';"
"RTN","GMVWT2",15,0)
 W !,"SPD 0.05; MAP -0.5,5; TEXT '5'; MAP 0,4; DAP 16,4;"
"RTN","GMVWT2",16,0)
 W !,"SPD 0.01; MAP -2,6; TEXT %3; MAP 0,5; DAP 16,5;"
"RTN","GMVWT2",17,0)
 W !,"SPD 0.05; MAP -0.5,7; TEXT '5'; MAP 0,6; DAP 16,6;"
"RTN","GMVWT2",18,0)
 W !,"SPD 0.01; MAP -2,8; TEXT %4; MAP 0,7; DAP 16,7;"
"RTN","GMVWT2",19,0)
 W !,"SPD 0.05; MAP -0.5,9; TEXT '5'; MAP 0,8; DAP 16,8;"
"RTN","GMVWT2",20,0)
 W !,"SPD 0.01; MAP -2,10; TEXT %5; MAP 0,9; DAP 16,9;"
"RTN","GMVWT2",21,0)
 W !,"SPD 0.05; MAP -0.5,11; TEXT '5'; MAP 0,10; DAP 16,10;"
"RTN","GMVWT2",22,0)
 W !,"SPD 0.01; MAP -2,12; TEXT %6; MAP 0,11; DAP 16,11;"
"RTN","GMVWT2",23,0)
 W !,"SPD 0.05; MAP -0.5,13; TEXT '5'; MAP 0,12; DAP 16,12;"
"RTN","GMVWT2",24,0)
 W !,"SPD 0.01; MAP -2,14; TEXT %7; MAP 0,13; DAP 16,13;"
"RTN","GMVWT2",25,0)
 W !,"SPD 0.05; MAP -0.5,15; TEXT '5'; MAP 0,14; DAP 16,14;"
"RTN","GMVWT2",26,0)
 W !,"SPD 0.01; MAP -2,16; TEXT %8; MAP 0,15; DAP 16,15;"
"RTN","GMVWT2",27,0)
 W !,"SPD 0.05; MAP -0.5,17; TEXT '5'; MAP 0,16; DAP 16,16;"
"RTN","GMVWT2",28,0)
 W !,"SPD 0.01; MAP 0,17; DAP 16,17;"
"RTN","GMVWT2",29,0)
BOX2 W !,"SPD 0.05;" S I(1)="" F I=1:1:9 S I(1)=I(1)_"MAP "_(1.6*I)_",0; DAP "_(1.6*I)_",21.5;"
"RTN","GMVWT2",30,0)
 W !,"SPD 0.01; MAP -3,18.5; DAP 16,18.5; MAP -3,19; DAP 16,19; MAP -3,19.5; DAP 16,19.5; MAP -3,20; DAP 16,20; MAP -3,20.5; DAP 16,20.5; MAP -3,21; DAP 16,21;"
"RTN","GMVWT2",31,0)
 W !,I(1)
"RTN","GMVWT2",32,0)
 W !,"FONT 57; MAP -3,18.4; TEXT 'Weight (lb)'; MAP -3,18.9; TEXT '           (kg)'; MAP -3,19.4; TEXT 'Qualifier'; MAP -3,19.9; TEXT 'Body Mass Index';"
"RTN","GMVWT2",33,0)
 W !,"MAP -3,20.4; TEXT 'Height (in)'; MAP -3,20.9; TEXT '          (cm)'; MAP -3,21.4; TEXT 'Qualifier';"
"RTN","GMVWT2",34,0)
 W !,"MAP -3,21.9; TEXT 'W: Weight     ** - Value off of graph';"
"RTN","GMVWT2",35,0)
FORM W !,"MAP 12,24; FONT 56; TEXT 'MEDICAL RECORD'; MAP 12,24.4; TEXT 'WEIGHT CHART'; MAP 12,24.8; TEXT 'VAF 10-2614f';"
"RTN","GMVWT2",36,0)
 W !,"ENDM;"
"RTN","GMVWT2",37,0)
DATE W !,"MCRO DATE;" S J=0.4 D WRTEXT^GMVBP2
"RTN","GMVWT2",38,0)
 W !,"ENDM;"
"RTN","GMVWT2",39,0)
TIME W !,"MCRO TIME;" S J=0.8 D WRTEXT^GMVBP2
"RTN","GMVWT2",40,0)
 W !,"ENDM;"
"RTN","GMVWT2",41,0)
HT W !,"MCRO HT;" S J=20.4 D WRTEXT^GMVBP2
"RTN","GMVWT2",42,0)
 W !,"ENDM;" Q
"RTN","GMVWT3")
0^272^B4988725
"RTN","GMVWT3",1,0)
GMVWT3 ;HIOFO/YH,FT-KYOCERA WEIGHT GRAPH - MACRO (CONT.) ;11/6/01  14:50
"RTN","GMVWT3",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVWT3",3,0)
 ;
"RTN","GMVWT3",4,0)
 ; This routine uses the following IAs:
"RTN","GMVWT3",5,0)
 ; <None>
"RTN","GMVWT3",6,0)
 ;
"RTN","GMVWT3",7,0)
EN2 ;
"RTN","GMVWT3",8,0)
WTG W !,"MCRO WTG; SPD .04; MAP %1, %2; DAP 2, %3; DAP 3.6, %4; DAP 5.2, %5; DAP 6.8, %6; DAP 8.4, %7; DAP 10, %8; DAP 11.6, %9;"
"RTN","GMVWT3",9,0)
 W !,"DAP 13.2, %10; DAP 14.8, %11;"
"RTN","GMVWT3",10,0)
 W !,"ENDM;"
"RTN","GMVWT3",11,0)
PLS1 W !,"MCRO PLS1; FONT 57; MAP %1,%2; TEXT %3; MAP 2.1,%4; TEXT %5; MAP 3.7,%6; TEXT %7; MAP 5.3,%8; TEXT %9; MAP 6.9,%10; TEXT %11; MAP 8.5,%12; TEXT %13; MAP 10.1,%14; TEXT %15; MAP 11.7,%16; TEXT %17; MAP 13.3,%18; TEXT %19;"
"RTN","GMVWT3",12,0)
 W !,"ENDM;"
"RTN","GMVWT3",13,0)
PLS2 W !,"MCRO PLS2; MAP 14.9,%1; TEXT %2;"
"RTN","GMVWT3",14,0)
 W !,"ENDM;"
"RTN","GMVWT3",15,0)
WTLB W !,"MCRO WTLB;" S J=18.4 D WRTEXT^GMVBP2
"RTN","GMVWT3",16,0)
 W !,"ENDM;"
"RTN","GMVWT3",17,0)
WTKG W !,"MCRO WTKG;" S J=18.9 D WRTEXT^GMVBP2
"RTN","GMVWT3",18,0)
 W !,"ENDM;"
"RTN","GMVWT3",19,0)
QUAL ;
"RTN","GMVWT3",20,0)
 W !,"MCRO QUAL;" S J=19.4 D WRTEXT^GMVBP2
"RTN","GMVWT3",21,0)
 W !,"ENDM;"
"RTN","GMVWT3",22,0)
 W !,"MCRO BMI;" S J=19.9 D WRTEXT^GMVBP2
"RTN","GMVWT3",23,0)
 W !,"ENDM;"
"RTN","GMVWT3",24,0)
 W !,"MCRO ALLQ; FONT 57; MAP -3,22.3; TEXT %1; ENDM;" W !,"MCRO ALL2; MAP -3,22.7; TEXT %2; ENDM;"
"RTN","GMVWT3",25,0)
PID W !,"MCRO PID; MAP -1,24; FONT 56; TEXT %1; MAP -1,24.3; TEXT %2; MAP 3.5,24.3; TEXT %3; MAP -1,24.6; TEXT %4; MAP 7,24.9; TEXT %5; MAP 7,24.6; TEXT %6; MAP -1,24.9; TEXT %7; MAP -1,25.2; TEXT %8;"
"RTN","GMVWT3",26,0)
 W !,"ENDM;"
"RTN","GMVWT3",27,0)
HTCM W !,"MCRO HTCM;" S J=20.9 D WRTEXT^GMVBP2
"RTN","GMVWT3",28,0)
 W !,"ENDM;"
"RTN","GMVWT3",29,0)
 W !,"MCRO HQ;" S J=21.4 D WRTEXT^GMVBP2
"RTN","GMVWT3",30,0)
 W !,"ENDM;"
"RTN","GMVWT3",31,0)
 Q
"RTN","GMVWT4")
0^273^B6015189
"RTN","GMVWT4",1,0)
GMVWT4 ;HIOFO/YH,FT-KYOCERA WEIGHT GRAPH - MACRO CALL ;11/6/01  14:50
"RTN","GMVWT4",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVWT4",3,0)
 ;
"RTN","GMVWT4",4,0)
 ; This routine uses the following IAs:
"RTN","GMVWT4",5,0)
 ; <None>
"RTN","GMVWT4",6,0)
 ;
"RTN","GMVWT4",7,0)
EN1 ;
"RTN","GMVWT4",8,0)
CALL W !,"CALL BOX, '"_GWT(1)_"', '"_GWT(2)_"', '"_GWT(3)_"', '"_GWT(4)_"', '"_GWT(5)_"', '"_GWT(6)_"', '"_GWT(7)_"', '"_GWT(8)_"';"
"RTN","GMVWT4",9,0)
 W !,"CALL DATE" S J(1)=1,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVWT4",10,0)
 W !,"CALL TIME" S J(1)=17,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVWT4",11,0)
 W !,"CALL WTG, "_GINI_", "_^TMP($J,"GMRK","G141")_", "_^("G142")_", "_^("G143")_", "_^("G144")_", "_^("G145")_", "_^("G146")
"RTN","GMVWT4",12,0)
 W ", "_^TMP($J,"GMRK","G147")_", "_^("G148")_", "_^("G149")_", "_^("G150")_";"
"RTN","GMVWT4",13,0)
 W !,"CALL PLS1, "_GINI_", "_^TMP($J,"GMRK","G141")_", '"_^("G161")_"', "_^("G142")_", '"_^("G162")_"', "_^("G143")_", '"_^("G163")_"', "_^("G144")_", '"_^("G164")_"', "_^("G145")_", '"_^("G165")_"', "_^("G146")_", '"_^("G166")_"', "
"RTN","GMVWT4",14,0)
 W ^TMP($J,"GMRK","G147")_", '"_^("G167")_"', "_^("G148")_", '"_^("G168")_"', "_^("G149")_", '"_^("G169")_"';"
"RTN","GMVWT4",15,0)
 W !,"CALL PLS2, "_^TMP($J,"GMRK","G150")_", '"_^("G170")_"';"
"RTN","GMVWT4",16,0)
WT W !,"CALL WTLB" S J(1)=101,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVWT4",17,0)
 W !,"CALL WTKG" S J(1)=121,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVWT4",18,0)
 W !,"CALL QUAL" S J(1)=181,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVWT4",19,0)
 W !,"CALL BMI" S J(1)=211,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVWT4",20,0)
HT W !,"CALL HT" S J(1)=301,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVWT4",21,0)
HTCM W !,"CALL HTCM" S J(1)=321,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVWT4",22,0)
 W !,"CALL HQ" S J(1)=341,J(2)=J(1)+9 D WRTCALL^GMVBP4
"RTN","GMVWT4",23,0)
 W !,"CALL ALLQ, '"_$G(GLINE(1))_"';" W !,"CALL ALL2, '"_$G(GLINE(2))_"';"
"RTN","GMVWT4",24,0)
PID W !,"CALL PID, """_GMVNM_""", '"_GMVDOB_"', '"_GMVGEN_"', '"_GMVWRD_"', '"_^TMP($J,"GMRK","G199")_"', '"_GMVRMBD_"', '"_GMRDIV_"', '"_GSTRFIN_"';"
"RTN","GMVWT4",25,0)
 W !,"RES; EXIT;"
"RTN","GMVWT4",26,0)
 Q
"RTN","GMVXENV")
0^173^B1410944
"RTN","GMVXENV",1,0)
GMVXENV ;HOIFO/YH-ENVIRONMENT CHECK FOR VITALS ;2/6/02  10:57
"RTN","GMVXENV",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVXENV",3,0)
 ;
"RTN","GMVXENV",4,0)
 ; This routine uses the following IAs:
"RTN","GMVXENV",5,0)
 ; #10141 - ^XPDUTL calls          (supported)
"RTN","GMVXENV",6,0)
 ;
"RTN","GMVXENV",7,0)
EN1 ; environment check for the vitals package
"RTN","GMVXENV",8,0)
 N GMRV
"RTN","GMVXENV",9,0)
 S GMRV=+$$VERSION^XPDUTL("GMRV")
"RTN","GMVXENV",10,0)
 I (GMRV>0)&(GMRV<4) D
"RTN","GMVXENV",11,0)
 . D MES^XPDUTL("VITALS/MEASUREMENTS VERSION 5 CAN ONLY BE INSTALLED OVER VERSION 4 OR AS A VIRGIN INSTALL. YOU HAVE VERSION "_GMRV_" INSTALLED IN THIS ACCOUNT. INSTALLATION ABORTED.")
"RTN","GMVXENV",12,0)
 . S XPDQUIT=2
"RTN","GMVXENV",13,0)
 . Q
"RTN","GMVXENV",14,0)
 Q
"RTN","GMVXPST")
0^275^B7363858
"RTN","GMVXPST",1,0)
GMVXPST ;HOIFO/FT-POST INSTALLATION FOR VITALS ;10/28/02  12:33
"RTN","GMVXPST",2,0)
 ;;5.0;GEN. MED. REC. - VITALS;;Oct 31, 2002
"RTN","GMVXPST",3,0)
 ;
"RTN","GMVXPST",4,0)
 ; This routine uses the following IAs:
"RTN","GMVXPST",5,0)
 ; #10141 - ^XPDUTL calls (supported)
"RTN","GMVXPST",6,0)
 ; #2263  - ^XPAR calls   (supported)
"RTN","GMVXPST",7,0)
 ;
"RTN","GMVXPST",8,0)
 ; This post-installation:
"RTN","GMVXPST",9,0)
 ; 1) deletes the data dictionary entries and data for File 120.5,
"RTN","GMVXPST",10,0)
 ;    Fields 1.1 and 1.3
"RTN","GMVXPST",11,0)
 ; 2) deletes the data dictionary entries and data for File 120.51,
"RTN","GMVXPST",12,0)
 ;    Fields 2 and 6
"RTN","GMVXPST",13,0)
 ; 3) updates the parameters for the required client version
"RTN","GMVXPST",14,0)
 ; 4) deletes some bogus data dictionary nodes in FILE 120.5
"RTN","GMVXPST",15,0)
 ;
"RTN","GMVXPST",16,0)
XPAR ; Setup preliminary parameters
"RTN","GMVXPST",17,0)
 ; This submodule is called during the KIDS installation
"RTN","GMVXPST",18,0)
 ; process.
"RTN","GMVXPST",19,0)
 ;
"RTN","GMVXPST",20,0)
 ; Variables:
"RTN","GMVXPST",21,0)
 ;  GMV:    [Private] Scratch
"RTN","GMVXPST",22,0)
 ;  GMVGUI: [Private] Current version of GUI being installed
"RTN","GMVXPST",23,0)
 ;  GMVLST: [Private] Scratch List
"RTN","GMVXPST",24,0)
 ;
"RTN","GMVXPST",25,0)
 ; New private variables
"RTN","GMVXPST",26,0)
 NEW GMV,GMVGUI,GMVLST
"RTN","GMVXPST",27,0)
 ; Announce my intentions
"RTN","GMVXPST",28,0)
 D BMES^XPDUTL("Updating system parameters.")
"RTN","GMVXPST",29,0)
 ; Set current client version
"RTN","GMVXPST",30,0)
 S GMVGUI="5.0.0.0"
"RTN","GMVXPST",31,0)
 ; Deactivate all previous versions from XPAR
"RTN","GMVXPST",32,0)
 D GETLST^XPAR(.GMVLST,"SYS","GMV GUI VERSION")
"RTN","GMVXPST",33,0)
 F GMV=0:0 S GMV=$O(GMVLST(GMV)) Q:'GMV  D
"RTN","GMVXPST",34,0)
 .D EN^XPAR("SYS","GMV GUI VERSION",$P(GMVLST(GMV),"^",1),0)
"RTN","GMVXPST",35,0)
 ; Add and/or activate current client versions
"RTN","GMVXPST",36,0)
 D EN^XPAR("SYS","GMV GUI VERSION","VITALS.EXE:"_GMVGUI,1)
"RTN","GMVXPST",37,0)
 D EN^XPAR("SYS","GMV GUI VERSION","VITALSMANAGER.EXE:"_GMVGUI,1)
"RTN","GMVXPST",38,0)
 ; Set latest Vital Home Page
"RTN","GMVXPST",39,0)
 D EN^XPAR("SYS","GMV WEBLINK",1,"http://vista.med.va.gov/ClinicalSpecialties/vitals/")
"RTN","GMVXPST",40,0)
 ;
"RTN","GMVXPST",41,0)
 ; Kill bogus DD nodes
"RTN","GMVXPST",42,0)
 K ^DD(120.5,1,0)
"RTN","GMVXPST",43,0)
 K ^DD(120.5,1,21,0)
"RTN","GMVXPST",44,0)
 K ^DD(120.5,1,21,1,0)
"RTN","GMVXPST",45,0)
 K ^DD(120.5,1,21,2,0)
"RTN","GMVXPST",46,0)
 K ^DD(120.5,"B","SITE",1)
"RTN","GMVXPST",47,0)
 K ^DD(120.5,"GL",1,0,1)
"RTN","GMVXPST",48,0)
 K ^DD(120.5,"SB",120.505,1)
"RTN","GMVXPST",49,0)
 ;
"RTN","GMVXPST",50,0)
QUEUE ; Queue post-install
"RTN","GMVXPST",51,0)
 N GMVMSG,ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSK
"RTN","GMVXPST",52,0)
 I +$$VERSION^XPDUTL("GMRV")>4.9 Q  ;post-install was done before
"RTN","GMVXPST",53,0)
 D BMES^XPDUTL("Will queue data cleanup as a background job.")
"RTN","GMVXPST",54,0)
 S ZTDESC="V/M v5.0 Data Cleanup"
"RTN","GMVXPST",55,0)
 S ZTRTN="EN^GMVXPST",ZTIO="",ZTDTH=$H
"RTN","GMVXPST",56,0)
 D ^%ZTLOAD
"RTN","GMVXPST",57,0)
 S:ZTSK GMVMSG="Task #: "_ZTSK
"RTN","GMVXPST",58,0)
 S:'ZTSK GMVMSG="Could not task the data cleanup."
"RTN","GMVXPST",59,0)
 D MES^XPDUTL(GMVMSG)
"RTN","GMVXPST",60,0)
 Q
"RTN","GMVXPST",61,0)
EN ; Driver subroutine for post-installation
"RTN","GMVXPST",62,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","GMVXPST",63,0)
 D DATA,DD
"RTN","GMVXPST",64,0)
 Q
"RTN","GMVXPST",65,0)
DD ; Delete obsolete data dictionary fields
"RTN","GMVXPST",66,0)
 ; delete *SITE (#2) and *QUALITY (#6) from File 120.51
"RTN","GMVXPST",67,0)
 N DA,DIK
"RTN","GMVXPST",68,0)
 S DIK="^DD(120.51,"
"RTN","GMVXPST",69,0)
 F DA=2,6 D
"RTN","GMVXPST",70,0)
 .S DA(1)=DA
"RTN","GMVXPST",71,0)
 .D ^DIK
"RTN","GMVXPST",72,0)
 .Q
"RTN","GMVXPST",73,0)
 ; delete *SITE (#1.1) and *QUALITY (#1.3) from File 120.5
"RTN","GMVXPST",74,0)
 S DIK="^DD(120.5,"
"RTN","GMVXPST",75,0)
 F DA=1.1,1.3 D
"RTN","GMVXPST",76,0)
 .S DA(1)=DA
"RTN","GMVXPST",77,0)
 .D ^DIK
"RTN","GMVXPST",78,0)
 .Q
"RTN","GMVXPST",79,0)
 Q
"RTN","GMVXPST",80,0)
DATA ; Delete data from obsolete fields
"RTN","GMVXPST",81,0)
 ; delete data from File 120.51, Fields 2 and 6
"RTN","GMVXPST",82,0)
 N DA,DIE,DR,GMVNODE
"RTN","GMVXPST",83,0)
 S DA=0
"RTN","GMVXPST",84,0)
 F  S DA=$O(^GMRD(120.51,DA)) Q:'DA  D
"RTN","GMVXPST",85,0)
 .S DIE="^GMRD(120.51,",DR="2///@;6///@"
"RTN","GMVXPST",86,0)
 .D ^DIE
"RTN","GMVXPST",87,0)
 .Q
"RTN","GMVXPST",88,0)
 ; delete data from File 120.5, Fields 1.1 and 1.3
"RTN","GMVXPST",89,0)
 S DA=0
"RTN","GMVXPST",90,0)
 F  S DA=$O(^GMR(120.5,DA)) Q:'DA  D
"RTN","GMVXPST",91,0)
 .S GMVNODE=$G(^GMR(120.5,DA,0))
"RTN","GMVXPST",92,0)
 .I $P(GMVNODE,U,7)="",$P(GMVNODE,U,9)="" Q  ;no data to delete
"RTN","GMVXPST",93,0)
 .S DIE="^GMR(120.5,",DR="1.1///@;1.3///@"
"RTN","GMVXPST",94,0)
 .D ^DIE
"RTN","GMVXPST",95,0)
 .Q
"RTN","GMVXPST",96,0)
 Q
"SEC","^DIC",120.5,120.5,0,"DD")
@
"SEC","^DIC",120.5,120.5,0,"DEL")
@
"SEC","^DIC",120.5,120.5,0,"LAYGO")
@
"SEC","^DIC",120.5,120.5,0,"RD")

"SEC","^DIC",120.5,120.5,0,"WR")
@
"SEC","^DIC",120.51,120.51,0,"DD")
@
"SEC","^DIC",120.51,120.51,0,"DEL")
@
"SEC","^DIC",120.51,120.51,0,"LAYGO")
@
"SEC","^DIC",120.51,120.51,0,"RD")

"SEC","^DIC",120.51,120.51,0,"WR")
@
"SEC","^DIC",120.52,120.52,0,"DD")
@
"SEC","^DIC",120.52,120.52,0,"DEL")
@
"SEC","^DIC",120.52,120.52,0,"LAYGO")
@
"SEC","^DIC",120.52,120.52,0,"RD")

"SEC","^DIC",120.52,120.52,0,"WR")
@
"SEC","^DIC",120.53,120.53,0,"DD")
@
"SEC","^DIC",120.53,120.53,0,"DEL")
@
"SEC","^DIC",120.53,120.53,0,"LAYGO")
@
"SEC","^DIC",120.53,120.53,0,"RD")

"SEC","^DIC",120.53,120.53,0,"WR")
@
"SEC","^DIC",120.57,120.57,0,"DD")
@
"SEC","^DIC",120.57,120.57,0,"DEL")
@
"SEC","^DIC",120.57,120.57,0,"LAYGO")
@
"SEC","^DIC",120.57,120.57,0,"RD")

"SEC","^DIC",120.57,120.57,0,"WR")
@
"VER")
8.0^22
"^DD",120.5,120.5,0)
FIELD^^5^12
"^DD",120.5,120.5,0,"DDA")
N
"^DD",120.5,120.5,0,"DT")
2970110
"^DD",120.5,120.5,0,"ID",.02)
S %I=Y,Y=$S('$D(^(0)):"",$D(^DPT(+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(2,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",120.5,120.5,0,"ID",.03)
S %I=Y,Y=$S('$D(^(0)):"",$D(^GMRD(120.51,+$P(^(0),U,3),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(120.51,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",120.5,120.5,0,"IX","AA01",120.5,.01)

"^DD",120.5,120.5,0,"IX","AA02",120.5,.02)

"^DD",120.5,120.5,0,"IX","AA03",120.5,.03)

"^DD",120.5,120.5,0,"IX","B",120.5,.01)

"^DD",120.5,120.5,0,"IX","C",120.5,.02)

"^DD",120.5,120.5,0,"IX","T",120.5,.03)

"^DD",120.5,120.5,0,"NM","GMRV VITAL MEASUREMENT")

"^DD",120.5,120.5,0,"VRPK")
GEN. MED. REC. - VITALS
"^DD",120.5,120.5,.01,0)
DATE/TIME VITALS TAKEN^RDX^^0;1^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",120.5,120.5,.01,1,0)
^.1
"^DD",120.5,120.5,.01,1,1,0)
120.5^B
"^DD",120.5,120.5,.01,1,1,1)
S ^GMR(120.5,"B",$E(X,1,30),DA)=""
"^DD",120.5,120.5,.01,1,1,2)
K ^GMR(120.5,"B",$E(X,1,30),DA)
"^DD",120.5,120.5,.01,1,1,"%D",0)
^^1^1^2970203^^^^
"^DD",120.5,120.5,.01,1,1,"%D",1,0)
This cross-reference is automatically created on .01 field.
"^DD",120.5,120.5,.01,1,2,0)
120.5^AA01^MUMPS
"^DD",120.5,120.5,.01,1,2,1)
D AA^GMVFUT0(.01,1,DA,X)
"^DD",120.5,120.5,.01,1,2,2)
D AA^GMVFUT0(.01,2,DA,X)
"^DD",120.5,120.5,.01,1,2,"%D",0)
^^6^6^3010523^^^^
"^DD",120.5,120.5,.01,1,2,"%D",1,0)
This cross-reference sets the "AA" index for the GMRV Vital Measurement
"^DD",120.5,120.5,.01,1,2,"%D",2,0)
(120.5) file.  This index is over the Date/Time Vitals Taken (.01),
"^DD",120.5,120.5,.01,1,2,"%D",3,0)
Patient (.02) and Vital Type (.03) fields.  The index has the format:
"^DD",120.5,120.5,.01,1,2,"%D",4,0)
^GMR(120.5,"AA",GMRVDFN,GMRVTYP,9999999-GMRVDT,DA)="", where GMRVDFN
"^DD",120.5,120.5,.01,1,2,"%D",5,0)
is data from .02 field, GMRVTYP is data from .03 field, and GMRVDT is
"^DD",120.5,120.5,.01,1,2,"%D",6,0)
data from .01 field.
"^DD",120.5,120.5,.01,1,2,"DT")
3010523
"^DD",120.5,120.5,.01,3)

"^DD",120.5,120.5,.01,8.5)
^
"^DD",120.5,120.5,.01,21,0)
^^2^2^2931229^^^^
"^DD",120.5,120.5,.01,21,1,0)
This field contains the date/time this vital/measurement was taken by the
"^DD",120.5,120.5,.01,21,2,0)
care provider.
"^DD",120.5,120.5,.01,"DT")
3010523
"^DD",120.5,120.5,.02,0)
PATIENT^RP2'^DPT(^0;2^Q
"^DD",120.5,120.5,.02,1,0)
^.1
"^DD",120.5,120.5,.02,1,1,0)
120.5^C
"^DD",120.5,120.5,.02,1,1,1)
S ^GMR(120.5,"C",$E(X,1,30),DA)=""
"^DD",120.5,120.5,.02,1,1,2)
K ^GMR(120.5,"C",$E(X,1,30),DA)
"^DD",120.5,120.5,.02,1,1,"%D",0)
^^2^2^2950926^^^
"^DD",120.5,120.5,.02,1,1,"%D",1,0)
This regular cross-reference is used to sort the vital/measurement
"^DD",120.5,120.5,.02,1,1,"%D",2,0)
records by patient.
"^DD",120.5,120.5,.02,1,2,0)
120.5^AA02^MUMPS
"^DD",120.5,120.5,.02,1,2,1)
D AA^GMVFUT0(.02,1,DA,X)
"^DD",120.5,120.5,.02,1,2,2)
D AA^GMVFUT0(.02,2,DA,X)
"^DD",120.5,120.5,.02,1,2,"%D",0)
^^6^6^3010523^^^^
"^DD",120.5,120.5,.02,1,2,"%D",1,0)
This cross-reference sets the "AA" index for the GMRV Vital Measurement
"^DD",120.5,120.5,.02,1,2,"%D",2,0)
(120.5) file.  This index is over the Date/Time Vitals Taken (.01),
"^DD",120.5,120.5,.02,1,2,"%D",3,0)
Patient (.02) and Vital Type (.03) fields.  The index has the format:
"^DD",120.5,120.5,.02,1,2,"%D",4,0)
^GMR(120.5,"AA",GMRVDFN,GMRVTYP,9999999-GMRVDT,DA)="", where GMRVDFN
"^DD",120.5,120.5,.02,1,2,"%D",5,0)
is data from .02 field, GMRVTYP is data from .03 field, and GMRVDT is
"^DD",120.5,120.5,.02,1,2,"%D",6,0)
data from .01 field.
"^DD",120.5,120.5,.02,1,2,"DT")
3010523
"^DD",120.5,120.5,.02,21,0)
^^2^2^2940207^^^^
"^DD",120.5,120.5,.02,21,1,0)
This field contains the name of the patient for whom this vital measurement
"^DD",120.5,120.5,.02,21,2,0)
data was entered.  Pointer to the PATIENT (#2) file.
"^DD",120.5,120.5,.02,"DT")
3010523
"^DD",120.5,120.5,.03,0)
VITAL TYPE^RP120.51'^GMRD(120.51,^0;3^Q
"^DD",120.5,120.5,.03,1,0)
^.1
"^DD",120.5,120.5,.03,1,1,0)
120.5^T
"^DD",120.5,120.5,.03,1,1,1)
S ^GMR(120.5,"T",$E(X,1,30),DA)=""
"^DD",120.5,120.5,.03,1,1,2)
K ^GMR(120.5,"T",$E(X,1,30),DA)
"^DD",120.5,120.5,.03,1,1,"%D",0)
^^2^2^2950926^^^
"^DD",120.5,120.5,.03,1,1,"%D",1,0)
This regular cross-reference is created to sort the file by the type of
"^DD",120.5,120.5,.03,1,1,"%D",2,0)
measurement.
"^DD",120.5,120.5,.03,1,2,0)
120.5^AA03^MUMPS
"^DD",120.5,120.5,.03,1,2,1)
D AA^GMVFUT0(.03,1,DA,X)
"^DD",120.5,120.5,.03,1,2,2)
D AA^GMVFUT0(.03,2,DA,X)
"^DD",120.5,120.5,.03,1,2,"%D",0)
^^6^6^3010523^^^^
"^DD",120.5,120.5,.03,1,2,"%D",1,0)
This cross-reference sets the "AA" index for the GMRV Vital Measurement
"^DD",120.5,120.5,.03,1,2,"%D",2,0)
(120.5) file.  This index is over the Date/Time Vitals Taken (.01),
"^DD",120.5,120.5,.03,1,2,"%D",3,0)
Patient (.02) and Vital Type (.03) fields.  The index has the format:
"^DD",120.5,120.5,.03,1,2,"%D",4,0)
^GMR(120.5,"AA",GMRVDFN,GMRVTYP,9999999-GMRVDT,DA)="", where GMRVDFN
"^DD",120.5,120.5,.03,1,2,"%D",5,0)
is data from .02 field, GMRVTYP is data from .03 field, and GMRVDT is
"^DD",120.5,120.5,.03,1,2,"%D",6,0)
data from .01 field.
"^DD",120.5,120.5,.03,1,2,"DT")
3010523
"^DD",120.5,120.5,.03,21,0)
^^2^2^2931222^^^^
"^DD",120.5,120.5,.03,21,1,0)
This field denotes the type of measurement for this record.  Pointer to
"^DD",120.5,120.5,.03,21,2,0)
the GMRV VITAL TYPE (#120.51) file.
"^DD",120.5,120.5,.03,"DT")
3010523
"^DD",120.5,120.5,.04,0)
DATE/TIME VITALS ENTERED^RD^^0;4^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",120.5,120.5,.04,1,0)
^.1^^0
"^DD",120.5,120.5,.04,21,0)
^^1^1^2931229^^^^
"^DD",120.5,120.5,.04,21,1,0)
This field contains the date/time that this record was entered.
"^DD",120.5,120.5,.04,"DT")
2960618
"^DD",120.5,120.5,.05,0)
HOSPITAL LOCATION^R*P44'^SC(^0;5^S DIC("S")="I $P(^(0),U,3)'=""Z""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",120.5,120.5,.05,12)
Select valid Hospital Location.
"^DD",120.5,120.5,.05,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Z"""
"^DD",120.5,120.5,.05,21,0)
^^2^2^2931222^^^
"^DD",120.5,120.5,.05,21,1,0)
This field contains the location where this measurement was taken.  Pointer 
"^DD",120.5,120.5,.05,21,2,0)
to the HOSPITAL LOCATION (#44) file.
"^DD",120.5,120.5,.05,"DT")
2890728
"^DD",120.5,120.5,.06,0)
ENTERED BY^RP200'^VA(200,^0;6^Q
"^DD",120.5,120.5,.06,21,0)
^^2^2^2931229^^^
"^DD",120.5,120.5,.06,21,1,0)
This field contains the name of the person who edited the file entry.  
"^DD",120.5,120.5,.06,21,2,0)
Pointer to the NEW PERSON (#200) file.
"^DD",120.5,120.5,.06,"DT")
2931222
"^DD",120.5,120.5,1.2,0)
RATE^FX^^0;8^K:'$$EN2^GMVFUT0(DA,.X) X
"^DD",120.5,120.5,1.2,3)

"^DD",120.5,120.5,1.2,4)
D RATEHLP^GMVFUT0(DA)
"^DD",120.5,120.5,1.2,21,0)
^^2^2^2970123^
"^DD",120.5,120.5,1.2,21,1,0)
This field contains the numeric value associated with this vital
"^DD",120.5,120.5,1.2,21,2,0)
measurement.
"^DD",120.5,120.5,1.2,"DT")
3010523
"^DD",120.5,120.5,1.4,0)
SUPPLEMENTAL O2^F^^0;10^K:$L(X)>30!($L(X)<1) X
"^DD",120.5,120.5,1.4,3)
Answer must be 1-30 characters in length.
"^DD",120.5,120.5,1.4,21,0)
^^6^6^2970121^
"^DD",120.5,120.5,1.4,21,1,0)
This field stores the information of the supplemental oxygen as follows:
"^DD",120.5,120.5,1.4,21,2,0)
  .5-20 l/min (liters/minute)   and/or
"^DD",120.5,120.5,1.4,21,3,0)
  21-100 % of oxygen concentration
"^DD",120.5,120.5,1.4,21,4,0)
For example: 4.5 l/min 40%
"^DD",120.5,120.5,1.4,21,5,0)
             4.5 l/min
"^DD",120.5,120.5,1.4,21,6,0)
             40 %
"^DD",120.5,120.5,1.4,"DT")
2970110
"^DD",120.5,120.5,2,0)
ENTERED IN ERROR^SI^1:YES;^2;1^Q
"^DD",120.5,120.5,2,1,0)
^.1^^0
"^DD",120.5,120.5,2,21,0)
^^1^1^2931229^^
"^DD",120.5,120.5,2,21,1,0)
This field indicates that this record was flagged as entered in error.
"^DD",120.5,120.5,2,"DEL",1,0)
I 1
"^DD",120.5,120.5,2,"DT")
2880331
"^DD",120.5,120.5,3,0)
ERROR ENTERED BY^P200'I^VA(200,^2;2^Q
"^DD",120.5,120.5,3,21,0)
^^2^2^2931229^^^^
"^DD",120.5,120.5,3,21,1,0)
This field indicates the name of the person responsible for entering the 
"^DD",120.5,120.5,3,21,2,0)
record in error.  Pointer to the NEW PERSON (#200) file.
"^DD",120.5,120.5,3,"DEL",1,0)
I 1
"^DD",120.5,120.5,3,"DT")
2920113
"^DD",120.5,120.5,4,0)
REASON ENTERED IN ERROR^120.506S^^2.1;0
"^DD",120.5,120.5,4,21,0)
^^2^2^2931229^^^^
"^DD",120.5,120.5,4,21,1,0)
This multiple contains a list of reasons for entering a vital measurement 
"^DD",120.5,120.5,4,21,2,0)
in error.
"^DD",120.5,120.5,5,0)
QUALIFIER^120.505P^^5;0
"^DD",120.5,120.5,5,21,0)
^^1^1^2970121^
"^DD",120.5,120.5,5,21,1,0)
A list of qualifiers associated with this measurement.
"^DD",120.5,120.5,5,"DT")
2970121
"^DD",120.5,120.505,0)
QUALIFIER SUB-FIELD^^.01^1
"^DD",120.5,120.505,0,"DT")
2960719
"^DD",120.5,120.505,0,"IX","B",120.505,.01)

"^DD",120.5,120.505,0,"NM","QUALIFIER")

"^DD",120.5,120.505,0,"UP")
120.5
"^DD",120.5,120.505,.01,0)
QUALIFIER^M*P120.52'X^GMRD(120.52,^0;1^S DIC("S")="I $$EN1^GMVFUT0(Y,DA)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",120.5,120.505,.01,1,0)
^.1
"^DD",120.5,120.505,.01,1,1,0)
120.505^B
"^DD",120.5,120.505,.01,1,1,1)
S ^GMR(120.5,DA(1),5,"B",$E(X,1,30),DA)=""
"^DD",120.5,120.505,.01,1,1,2)
K ^GMR(120.5,DA(1),5,"B",$E(X,1,30),DA)
"^DD",120.5,120.505,.01,1,1,"%D",0)
^^1^1^3010523^^
"^DD",120.5,120.505,.01,1,1,"%D",1,0)
This cross-reference is automatically created on .01 field.
"^DD",120.5,120.505,.01,12)
Select qualifier associated with the Vital Type of this measurement.
"^DD",120.5,120.505,.01,12.1)
S DIC("S")="I $$EN1^GMVFUT0(Y,DA)"
"^DD",120.5,120.505,.01,21,0)
^^2^2^2970121^^
"^DD",120.5,120.505,.01,21,1,0)
This field contains the name of the qualifier associated with
"^DD",120.5,120.505,.01,21,2,0)
this measurement.
"^DD",120.5,120.505,.01,"DT")
3010523
"^DD",120.5,120.506,0)
REASON ENTERED IN ERROR SUB-FIELD^^.01^1
"^DD",120.5,120.506,0,"NM","REASON ENTERED IN ERROR")

"^DD",120.5,120.506,0,"UP")
120.5
"^DD",120.5,120.506,.01,0)
REASON ENTERED IN ERROR^MS^1:INCORRECT DATE/TIME;2:INCORRECT READING;3:INCORRECT PATIENT;4:INVALID RECORD;^0;1^Q
"^DD",120.5,120.506,.01,21,0)
^^1^1^2931229^^^
"^DD",120.5,120.506,.01,21,1,0)
This field records the reason for entering the data in error.
"^DD",120.5,120.506,.01,"DT")
2880831
"^DD",120.51,120.51,0)
FIELD^^7^6
"^DD",120.51,120.51,0,"DDA")
N
"^DD",120.51,120.51,0,"DT")
2960723
"^DD",120.51,120.51,0,"ID",1)
W "   ",$P(^(0),U,2)
"^DD",120.51,120.51,0,"IX","APCE",120.51,7)

"^DD",120.51,120.51,0,"IX","B",120.51,.01)

"^DD",120.51,120.51,0,"IX","C",120.51,1)

"^DD",120.51,120.51,0,"NM","GMRV VITAL TYPE")

"^DD",120.51,120.51,0,"PT",120.5,.03)

"^DD",120.51,120.51,0,"PT",120.521,.01)

"^DD",120.51,120.51,0,"PT",120.531,.01)

"^DD",120.51,120.51,0,"PT",142.14,.01)

"^DD",120.51,120.51,0,"PT",801.41,15)

"^DD",120.51,120.51,0,"PT",801.4118,.01)

"^DD",120.51,120.51,0,"PT",801.43,.02)

"^DD",120.51,120.51,0,"PT",810.31,.04)

"^DD",120.51,120.51,0,"PT",810.32,.01)

"^DD",120.51,120.51,0,"PT",811.52,.01)

"^DD",120.51,120.51,0,"PT",811.902,.01)

"^DD",120.51,120.51,0,"VRPK")
GEN. MED. REC. - VITALS
"^DD",120.51,120.51,.01,0)
NAME^RF^^0;1^K:$L(X)>50!($L(X)<2)!'(X'?1P.E) X
"^DD",120.51,120.51,.01,1,0)
^.1
"^DD",120.51,120.51,.01,1,1,0)
120.51^B
"^DD",120.51,120.51,.01,1,1,1)
S ^GMRD(120.51,"B",$E(X,1,30),DA)=""
"^DD",120.51,120.51,.01,1,1,2)
K ^GMRD(120.51,"B",$E(X,1,30),DA)
"^DD",120.51,120.51,.01,1,1,"%D",0)
^^1^1^2950926^^^
"^DD",120.51,120.51,.01,1,1,"%D",1,0)
This cross-reference is automatically created on .01 field.
"^DD",120.51,120.51,.01,3)
ANSWER MUST BE 2-50 CHARACTERS IN LENGTH
"^DD",120.51,120.51,.01,21,0)
^^1^1^2931222^^^^
"^DD",120.51,120.51,.01,21,1,0)
This field reflects a list of vital signs/physical measurement types.
"^DD",120.51,120.51,1,0)
ABBREVIATION^RFI^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>5!($L(X)<1)!'(X'?1P.E&(X'[";")) X
"^DD",120.51,120.51,1,1,0)
^.1
"^DD",120.51,120.51,1,1,1,0)
120.51^C
"^DD",120.51,120.51,1,1,1,1)
S ^GMRD(120.51,"C",$E(X,1,30),DA)=""
"^DD",120.51,120.51,1,1,1,2)
K ^GMRD(120.51,"C",$E(X,1,30),DA)
"^DD",120.51,120.51,1,1,1,"%D",0)
^^2^2^2950926^^^
"^DD",120.51,120.51,1,1,1,"%D",1,0)
This regular cross-reference is created to sort the file by the
"^DD",120.51,120.51,1,1,1,"%D",2,0)
ABBREVIATION and the associated NAME (.01).
"^DD",120.51,120.51,1,3)
Answer must be 1-5 characters in length.
"^DD",120.51,120.51,1,21,0)
^^1^1^2970108^^^^
"^DD",120.51,120.51,1,21,1,0)
This field contains an abbreviation for this vital type.
"^DD",120.51,120.51,1,"DT")
3010530
"^DD",120.51,120.51,3,0)
RATE^S^0:NO;1:YES;^0;4^Q
"^DD",120.51,120.51,3,21,0)
^^2^2^2940105^^^^
"^DD",120.51,120.51,3,21,1,0)
This field specifies whether or not the vital measurement record with
"^DD",120.51,120.51,3,21,2,0)
this vital type has a rate associated with it.
"^DD",120.51,120.51,4,0)
RATE INPUT TRANSFORM^K^^1;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",120.51,120.51,4,3)
This is Standard MUMPS code.
"^DD",120.51,120.51,4,9)
@
"^DD",120.51,120.51,4,21,0)
^^3^3^2960723^
"^DD",120.51,120.51,4,21,1,0)
If a rate is specified for a vital measurement record, this field checks
"^DD",120.51,120.51,4,21,2,0)
the data validity.  The code stored in this field should only be updated
"^DD",120.51,120.51,4,21,3,0)
by someone with programmer's access to the FileMan.
"^DD",120.51,120.51,4,"DT")
2960723
"^DD",120.51,120.51,5,0)
RATE HELP^F^^0;6^K:$L(X)>30!($L(X)<3)!'(X'?1P.E&(X?.ANP)) X
"^DD",120.51,120.51,5,3)
Answer must be 3-30 characters in length.
"^DD",120.51,120.51,5,21,0)
^^2^2^2960910^^^^
"^DD",120.51,120.51,5,21,1,0)
This field contains the name of the Help Frame associated with this
"^DD",120.51,120.51,5,21,2,0)
Vital Type.
"^DD",120.51,120.51,5,"DT")
2960718
"^DD",120.51,120.51,7,0)
PCE ABBREVIATION^F^^0;7^K:$L(X)>10!($L(X)<1) X
"^DD",120.51,120.51,7,1,0)
^.1
"^DD",120.51,120.51,7,1,1,0)
120.51^APCE
"^DD",120.51,120.51,7,1,1,1)
S ^GMRD(120.51,"APCE",$E(X,1,30),DA)=""
"^DD",120.51,120.51,7,1,1,2)
K ^GMRD(120.51,"APCE",$E(X,1,30),DA)
"^DD",120.51,120.51,7,1,1,"%D",0)
^^1^1^2970203^^
"^DD",120.51,120.51,7,1,1,"%D",1,0)
This is a regular cross-reference on the PCE Abbreviation field.
"^DD",120.51,120.51,7,1,1,"DT")
2960710
"^DD",120.51,120.51,7,3)
Answer must be 1-10 characters in length.
"^DD",120.51,120.51,7,21,0)
^^1^1^2960710^
"^DD",120.51,120.51,7,21,1,0)
This field contains the PCE Abbreviation for this Vital Type.
"^DD",120.51,120.51,7,"DT")
2960710
"^DD",120.52,120.52,0)
FIELD^^999^4
"^DD",120.52,120.52,0,"DDA")
N
"^DD",120.52,120.52,0,"DT")
2970430
"^DD",120.52,120.52,0,"IX","ACAT",120.521,.02)

"^DD",120.52,120.52,0,"IX","ACHR",120.52,.01)

"^DD",120.52,120.52,0,"IX","AOLD",120.52,999)

"^DD",120.52,120.52,0,"IX","ATYP",120.521,.01)

"^DD",120.52,120.52,0,"IX","B",120.52,.01)

"^DD",120.52,120.52,0,"IX","BCAT",120.521,.02)

"^DD",120.52,120.52,0,"IX","BCHR",120.52,.02)

"^DD",120.52,120.52,0,"IX","BTYP",120.521,.01)

"^DD",120.52,120.52,0,"IX","C",120.521,.01)

"^DD",120.52,120.52,0,"IX","D",120.521,.02)

"^DD",120.52,120.52,0,"NM","GMRV VITAL QUALIFIER")

"^DD",120.52,120.52,0,"PT",120.505,.01)

"^DD",120.52,120.52,0,"PT",120.531,.07)

"^DD",120.52,120.52,0,"VRPK")
GEN. MED. REC. - VITALS
"^DD",120.52,120.52,.01,0)
QUALIFIER^RF^^0;1^K:$L(X)>50!($L(X)<2)!'(X'?1P.E) X
"^DD",120.52,120.52,.01,1,0)
^.1
"^DD",120.52,120.52,.01,1,1,0)
120.52^B
"^DD",120.52,120.52,.01,1,1,1)
S ^GMRD(120.52,"B",$E(X,1,30),DA)=""
"^DD",120.52,120.52,.01,1,1,2)
K ^GMRD(120.52,"B",$E(X,1,30),DA)
"^DD",120.52,120.52,.01,1,1,"%D",0)
^^1^1^2950301^^
"^DD",120.52,120.52,.01,1,1,"%D",1,0)
This cross-reference is automatically created on .01 field.
"^DD",120.52,120.52,.01,1,2,0)
120.52^ACHR^MUMPS
"^DD",120.52,120.52,.01,1,2,1)
D ACHR^GMVFUT2(1,.DA,X)
"^DD",120.52,120.52,.01,1,2,2)
D ACHR^GMVFUT2(2,.DA,X)
"^DD",120.52,120.52,.01,1,2,"%D",0)
^^6^6^3010523^^
"^DD",120.52,120.52,.01,1,2,"%D",1,0)
This cross-reference sets the "AA" index on the GMRV Vital Qualifier
"^DD",120.52,120.52,.01,1,2,"%D",2,0)
(120.52) file.  The "AA" index has the following format:
"^DD",120.52,120.52,.01,1,2,"%D",3,0)
^GMRD(120.52,"AA",TYP,CAT,CHAR,DA(1),DA)="", where TYP=Vital Type (.01)
"^DD",120.52,120.52,.01,1,2,"%D",4,0)
field of Vital Type (120.521) sub-file, CAT=Category (.02) field of
"^DD",120.52,120.52,.01,1,2,"%D",5,0)
Vital Type (120.521) sub-file and CHAR=Name (.01) field of GMRV Vital
"^DD",120.52,120.52,.01,1,2,"%D",6,0)
Qualifier (120.52) file.
"^DD",120.52,120.52,.01,1,2,"DT")
3010523
"^DD",120.52,120.52,.01,3)
ANSWER MUST BE 2-50 CHARACTERS IN LENGTH
"^DD",120.52,120.52,.01,8.5)
^
"^DD",120.52,120.52,.01,21,0)
^^2^2^2970123^^^^
"^DD",120.52,120.52,.01,21,1,0)
This field supplies a list of possible qualifiers for a vital measurement
"^DD",120.52,120.52,.01,21,2,0)
record.
"^DD",120.52,120.52,.01,"DEL",1,0)
I 1 D EN^DDIOL("Sorry, entries may not be deleted.")
"^DD",120.52,120.52,.01,"DT")
3010523
"^DD",120.52,120.52,.02,0)
SYNONYM^RFX^^0;2^D SCREEN^GMVFSYN K:$L($G(X))>3!($L($G(X))<1) X
"^DD",120.52,120.52,.02,1,0)
^.1
"^DD",120.52,120.52,.02,1,1,0)
120.52^BCHR^MUMPS
"^DD",120.52,120.52,.02,1,1,1)
D BSYNO^GMVFSYN(1,.DA,X)
"^DD",120.52,120.52,.02,1,1,2)
D BSYNO^GMVFSYN(2,.DA,X)
"^DD",120.52,120.52,.02,1,1,"%D",0)
^^6^6^3010523^^^^
"^DD",120.52,120.52,.02,1,1,"%D",1,0)
This cross-reference sets the "BB" index on the GMRV Vital Qualifier
"^DD",120.52,120.52,.02,1,1,"%D",2,0)
(120.52) file.  The "BB" index has the following format:
"^DD",120.52,120.52,.02,1,1,"%D",3,0)
^GMRD(120.52,"BB",TYP,CAT,CHAR,DA(1),DA)="", where TYP=Vital Type (.01)
"^DD",120.52,120.52,.02,1,1,"%D",4,0)
field of Vital Type (120.52 1) sub-file, CAT=Category (.02) field of Vital
"^DD",120.52,120.52,.02,1,1,"%D",5,0)
Type (120.521) sub-file and CHAR=Name (.01) field of GMRV Vital Qualifier
"^DD",120.52,120.52,.02,1,1,"%D",6,0)
(120.52) file.
"^DD",120.52,120.52,.02,1,1,"DT")
3010523
"^DD",120.52,120.52,.02,3)
Answer must be 1-3 characters in length.
"^DD",120.52,120.52,.02,21,0)
^^1^1^2970603^^^^
"^DD",120.52,120.52,.02,21,1,0)
This field contains the synonym for the qualifier.
"^DD",120.52,120.52,.02,"DT")
3010523
"^DD",120.52,120.52,1,0)
VITAL TYPE^120.521PA^^1;0
"^DD",120.52,120.52,1,21,0)
^^3^3^2970123^^^^
"^DD",120.52,120.52,1,21,1,0)
This multiple contains a list of vital types associated with this site.  
"^DD",120.52,120.52,1,21,2,0)
The site field on the vital measurement record is screened by the data
"^DD",120.52,120.52,1,21,3,0)
contained in the vital type field.
"^DD",120.52,120.52,999,0)
OLD RECORD NUMBER^F^^CONV;1^K:$L(X)>30!($L(X)<14)!'(X?1N.N1";GMRD(120.5"1N1",") X
"^DD",120.52,120.52,999,1,0)
^.1
"^DD",120.52,120.52,999,1,1,0)
120.52^AOLD
"^DD",120.52,120.52,999,1,1,1)
S ^GMRD(120.52,"AOLD",$E(X,1,30),DA)=""
"^DD",120.52,120.52,999,1,1,2)
K ^GMRD(120.52,"AOLD",$E(X,1,30),DA)
"^DD",120.52,120.52,999,1,1,"%D",0)
^^3^3^2960718^
"^DD",120.52,120.52,999,1,1,"%D",1,0)
This cross-reference is a regular index on the Old Record Number field,
"^DD",120.52,120.52,999,1,1,"%D",2,0)
which will be used by the conversion to find the new Characteristic
"^DD",120.52,120.52,999,1,1,"%D",3,0)
IEN for the old Site and Quality data.
"^DD",120.52,120.52,999,1,1,"DT")
2960718
"^DD",120.52,120.52,999,3)
Answer must be 14-30 characters in length.
"^DD",120.52,120.52,999,8.5)
@
"^DD",120.52,120.52,999,9)
@
"^DD",120.52,120.52,999,21,0)
^^2^2^2960718^^^
"^DD",120.52,120.52,999,21,1,0)
This field contains the variable pointer reference to the old location
"^DD",120.52,120.52,999,21,2,0)
of this characteristic.  This field is used for converting patient data.
"^DD",120.52,120.52,999,"DT")
2960718
"^DD",120.52,120.521,0)
VITAL TYPE SUB-FIELD^^.02^2
"^DD",120.52,120.521,0,"DT")
2970122
"^DD",120.52,120.521,0,"IX","B",120.521,.01)

"^DD",120.52,120.521,0,"NM","VITAL TYPE")

"^DD",120.52,120.521,0,"UP")
120.52
"^DD",120.52,120.521,.01,0)
VITAL TYPE^RP120.51'^GMRD(120.51,^0;1^Q
"^DD",120.52,120.521,.01,1,0)
^.1
"^DD",120.52,120.521,.01,1,1,0)
120.521^B
"^DD",120.52,120.521,.01,1,1,1)
S ^GMRD(120.52,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",120.52,120.521,.01,1,1,2)
K ^GMRD(120.52,DA(1),1,"B",$E(X,1,30),DA)
"^DD",120.52,120.521,.01,1,1,"%D",0)
^^1^1^2950926^^^
"^DD",120.52,120.521,.01,1,1,"%D",1,0)
This cross-reference is automatically created on .01 field.
"^DD",120.52,120.521,.01,1,2,0)
120.52^C
"^DD",120.52,120.521,.01,1,2,1)
S ^GMRD(120.52,"C",$E(X,1,30),DA(1),DA)=""
"^DD",120.52,120.521,.01,1,2,2)
K ^GMRD(120.52,"C",$E(X,1,30),DA(1),DA)
"^DD",120.52,120.521,.01,1,2,"%D",0)
^^2^2^2970522^^^^
"^DD",120.52,120.521,.01,1,2,"%D",1,0)
This cross-reference is created to sort the file by VITAL TYPE and the
"^DD",120.52,120.521,.01,1,2,"%D",2,0)
associated vital site NAME (.01).
"^DD",120.52,120.521,.01,1,3,0)
120.52^ATYP^MUMPS
"^DD",120.52,120.521,.01,1,3,1)
D ATYP^GMVFUT2(1,.DA,X)
"^DD",120.52,120.521,.01,1,3,2)
D ATYP^GMVFUT2(2,.DA,X)
"^DD",120.52,120.521,.01,1,3,"%D",0)
^^6^6^3010523^^^^
"^DD",120.52,120.521,.01,1,3,"%D",1,0)
This cross-reference sets the "AA"index on the GMRV Vital Qualifier
"^DD",120.52,120.521,.01,1,3,"%D",2,0)
(120.52) file.  The index has the following format:
"^DD",120.52,120.521,.01,1,3,"%D",3,0)
^GMRD(120.52,"AA",TYP,CAT,CHAR,DA(1),DA)="",
"^DD",120.52,120.521,.01,1,3,"%D",4,0)
where TYP=Vital Type (.01) field of Vital Type (120.521) sub-file,
"^DD",120.52,120.521,.01,1,3,"%D",5,0)
CAT=Category (.02) field of Vital Type (120.521) sub-file, CHAR=Name (.01)
"^DD",120.52,120.521,.01,1,3,"%D",6,0)
field of GMRV Vital Qualifier (120.52) file.
"^DD",120.52,120.521,.01,1,3,"DT")
3010523
"^DD",120.52,120.521,.01,1,4,0)
120.52^BTYP^MUMPS
"^DD",120.52,120.521,.01,1,4,1)
D BTYP^GMVFSYN(1,.DA,X)
"^DD",120.52,120.521,.01,1,4,2)
D BTYP^GMVFSYN(2,.DA,X)
"^DD",120.52,120.521,.01,1,4,"%D",0)
^^6^6^3010523^^^^
"^DD",120.52,120.521,.01,1,4,"%D",1,0)
This cross-reference sets the "BB" index on the GMRV Vital Qualifier
"^DD",120.52,120.521,.01,1,4,"%D",2,0)
(120.52) file.  The "BB" index has the following format:
"^DD",120.52,120.521,.01,1,4,"%D",3,0)
^GMRD(120.52,"BB",TYP,CAT,CHAR,DA(1),DA)="", where TYP=Vital Type (.01)
"^DD",120.52,120.521,.01,1,4,"%D",4,0)
field of Vital Type (120.521) sub-file, CAT=Category (.02) field of Vital
"^DD",120.52,120.521,.01,1,4,"%D",5,0)
Type (120.521) sub-file and CHAR=Name (.01) field of GMRV Vital Qualifier
"^DD",120.52,120.521,.01,1,4,"%D",6,0)
(120.52) file.
"^DD",120.52,120.521,.01,1,4,"DT")
3010523
"^DD",120.52,120.521,.01,8.5)
^
"^DD",120.52,120.521,.01,21,0)
^^2^2^2970122^^^^
"^DD",120.52,120.521,.01,21,1,0)
This field screens the vital measurement site field in the GMRV VITAL 
"^DD",120.52,120.521,.01,21,2,0)
MEASUREMENT (#120.5) file.
"^DD",120.52,120.521,.01,"DT")
3010523
"^DD",120.52,120.521,.02,0)
CATEGORY^RP120.53^GMRD(120.53,^0;2^Q
"^DD",120.52,120.521,.02,1,0)
^.1
"^DD",120.52,120.521,.02,1,1,0)
120.52^D
"^DD",120.52,120.521,.02,1,1,1)
S ^GMRD(120.52,"D",$E(X,1,30),DA(1),DA)=""
"^DD",120.52,120.521,.02,1,1,2)
K ^GMRD(120.52,"D",$E(X,1,30),DA(1),DA)
"^DD",120.52,120.521,.02,1,1,"%D",0)
^^3^3^2960719^
"^DD",120.52,120.521,.02,1,1,"%D",1,0)
This is a regular cross-reference of the Category (.02) field of the Vital
"^DD",120.52,120.521,.02,1,1,"%D",2,0)
Type (120.521) sub-file on the entire GMRV Vital Qualifier (120.52)
"^DD",120.52,120.521,.02,1,1,"%D",3,0)
file.
"^DD",120.52,120.521,.02,1,1,"DT")
2960719
"^DD",120.52,120.521,.02,1,2,0)
120.52^ACAT^MUMPS
"^DD",120.52,120.521,.02,1,2,1)
D ACAT^GMVFUT2(1,.DA,X)
"^DD",120.52,120.521,.02,1,2,2)
D ACAT^GMVFUT2(2,.DA,X)
"^DD",120.52,120.521,.02,1,2,"%D",0)
^^6^6^3010524^^^^
"^DD",120.52,120.521,.02,1,2,"%D",1,0)
This cross-reference sets the "AA" index on the GMRV Vital Qualifier
"^DD",120.52,120.521,.02,1,2,"%D",2,0)
(120.52) file.  The index has the following format:
"^DD",120.52,120.521,.02,1,2,"%D",3,0)
^GMRD(120.52,"AA",TYP,CAT,CHAR,DA(1),DA)="",
"^DD",120.52,120.521,.02,1,2,"%D",4,0)
where TYP=Vital Type (.01) field of Vital Type (120.521) sub-file,
"^DD",120.52,120.521,.02,1,2,"%D",5,0)
CAT=Category (.02) field of Vital Type (120.521) sub-file, CHAR=Name (.01)
"^DD",120.52,120.521,.02,1,2,"%D",6,0)
field of GMRV Vital Qualifier (120.52) file.
"^DD",120.52,120.521,.02,1,2,"DT")
3010523
"^DD",120.52,120.521,.02,1,3,0)
120.52^BCAT^MUMPS
"^DD",120.52,120.521,.02,1,3,1)
D BCAT^GMVFSYN(1,.DA,X)
"^DD",120.52,120.521,.02,1,3,2)
D BCAT^GMVFSYN(2,.DA,X)
"^DD",120.52,120.521,.02,1,3,"%D",0)
^^6^6^3010524^^^^
"^DD",120.52,120.521,.02,1,3,"%D",1,0)
This cross-reference sets the "BB" index on the GMRV Vital Qualifier
"^DD",120.52,120.521,.02,1,3,"%D",2,0)
(120.52) file.  The "BB" index has the following format:
"^DD",120.52,120.521,.02,1,3,"%D",3,0)
^GMRD(120.52,"BB",TYP,CAT,CHAR,DA(1),DA)="", where TYP=Vital Type (.01)
"^DD",120.52,120.521,.02,1,3,"%D",4,0)
field of Vital Type (120.521) sub-file, CAT=Category (.02) field of Vital
"^DD",120.52,120.521,.02,1,3,"%D",5,0)
Type (120.521) sub-file and CHAR=Name (.01) field of GMRV Vital Qualifier
"^DD",120.52,120.521,.02,1,3,"%D",6,0)
(120.52) file.
"^DD",120.52,120.521,.02,1,3,"DT")
3010523
"^DD",120.52,120.521,.02,21,0)
^^2^2^2960726^^
"^DD",120.52,120.521,.02,21,1,0)
This field will contain the category for this characteristic for this
"^DD",120.52,120.521,.02,21,2,0)
vital type.
"^DD",120.52,120.521,.02,"DT")
3010523
"^DD",120.53,120.53,0)
FIELD^^1^2
"^DD",120.53,120.53,0,"DDA")
N
"^DD",120.53,120.53,0,"DT")
2960723
"^DD",120.53,120.53,0,"IX","ACAT",120.53,.01)

"^DD",120.53,120.53,0,"IX","AEDT",120.531,.06)

"^DD",120.53,120.53,0,"IX","APRT",120.531,.05)

"^DD",120.53,120.53,0,"IX","ATYP",120.531,.01)

"^DD",120.53,120.53,0,"IX","B",120.53,.01)

"^DD",120.53,120.53,0,"IX","C",120.531,.01)

"^DD",120.53,120.53,0,"NM","GMRV VITAL CATEGORY")

"^DD",120.53,120.53,0,"PT",120.521,.02)

"^DD",120.53,120.53,0,"VRPK")
GEN. MED. REC. - VITALS
"^DD",120.53,120.53,.01,0)
CATEGORY^RF^^0;1^K:$L(X)>40!($L(X)<2)!'(X'?1P.E) X
"^DD",120.53,120.53,.01,1,0)
^.1
"^DD",120.53,120.53,.01,1,1,0)
120.53^B
"^DD",120.53,120.53,.01,1,1,1)
S ^GMRD(120.53,"B",$E(X,1,40),DA)=""
"^DD",120.53,120.53,.01,1,1,2)
K ^GMRD(120.53,"B",$E(X,1,40),DA)
"^DD",120.53,120.53,.01,1,1,"%D",0)
^^1^1^2950301^^
"^DD",120.53,120.53,.01,1,1,"%D",1,0)
This cross-reference is automatically created on NAME field.
"^DD",120.53,120.53,.01,1,2,0)
120.53^ACAT^MUMPS
"^DD",120.53,120.53,.01,1,2,1)
D ACAT^GMVFUT3(1,.DA,X)
"^DD",120.53,120.53,.01,1,2,2)
D ACAT^GMVFUT3(2,.DA,X)
"^DD",120.53,120.53,.01,1,2,"%D",0)
^^6^6^3010524^^
"^DD",120.53,120.53,.01,1,2,"%D",1,0)
This cross-reference sets up the "AA" index on the GMRV Vital Category (120.53)
"^DD",120.53,120.53,.01,1,2,"%D",2,0)
file.  This index has the following format:
"^DD",120.53,120.53,.01,1,2,"%D",3,0)
^GMRD(120.53,"AA",TYPE,CAT,DA(1),DA)="", where TYPE=Vital Type (.01) field
"^DD",120.53,120.53,.01,1,2,"%D",4,0)
of Vital Type (120.531) sub-file, CAT=Name (.01) field of GMRV Category
"^DD",120.53,120.53,.01,1,2,"%D",5,0)
(120.53) file, is the entry in the GMRV Vital Category (120.53) file, and
"^DD",120.53,120.53,.01,1,2,"%D",6,0)
DA is the entry in the Vital Type (120.531) sub-file.
"^DD",120.53,120.53,.01,1,2,"DT")
3010524
"^DD",120.53,120.53,.01,3)
ANSWER MUST BE 2-40 CHARACTERS IN LENGTH
"^DD",120.53,120.53,.01,21,0)
^^2^2^2961223^^^^
"^DD",120.53,120.53,.01,21,1,0)
This field provides a list of qualities that could be assigned to a given 
"^DD",120.53,120.53,.01,21,2,0)
vital measurement record.
"^DD",120.53,120.53,.01,"DT")
3010524
"^DD",120.53,120.53,1,0)
VITAL TYPE^120.531P^^1;0
"^DD",120.53,120.53,1,21,0)
^^2^2^3010524^^^^
"^DD",120.53,120.53,1,21,1,0)
This multiple screens the possible quality entries for a given vital 
"^DD",120.53,120.53,1,21,2,0)
measurement record.
"^DD",120.53,120.531,0)
VITAL TYPE SUB-FIELD^^.07^5
"^DD",120.53,120.531,0,"DT")
2960723
"^DD",120.53,120.531,0,"IX","B",120.531,.01)

"^DD",120.53,120.531,0,"NM","VITAL TYPE")

"^DD",120.53,120.531,0,"UP")
120.53
"^DD",120.53,120.531,.01,0)
VITAL TYPE^MRP120.51'^GMRD(120.51,^0;1^Q
"^DD",120.53,120.531,.01,1,0)
^.1
"^DD",120.53,120.531,.01,1,1,0)
120.531^B
"^DD",120.53,120.531,.01,1,1,1)
S ^GMRD(120.53,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",120.53,120.531,.01,1,1,2)
K ^GMRD(120.53,DA(1),1,"B",$E(X,1,30),DA)
"^DD",120.53,120.531,.01,1,1,"%D",0)
^^1^1^2950301^^
"^DD",120.53,120.531,.01,1,1,"%D",1,0)
This cross-reference is automatically created on .01 field.
"^DD",120.53,120.531,.01,1,2,0)
120.53^C
"^DD",120.53,120.531,.01,1,2,1)
S ^GMRD(120.53,"C",$E(X,1,30),DA(1),DA)=""
"^DD",120.53,120.531,.01,1,2,2)
K ^GMRD(120.53,"C",$E(X,1,30),DA(1),DA)
"^DD",120.53,120.531,.01,1,2,"%D",0)
^^2^2^2950301^^
"^DD",120.53,120.531,.01,1,2,"%D",1,0)
This cross-reference is created to sort the file by the VITAL TYPE and 
"^DD",120.53,120.531,.01,1,2,"%D",2,0)
the associated vital qualifiers (NAME .01 field).
"^DD",120.53,120.531,.01,1,3,0)
120.53^ATYP^MUMPS
"^DD",120.53,120.531,.01,1,3,1)
D ATYP^GMVFUT3(1,.DA,X)
"^DD",120.53,120.531,.01,1,3,2)
D ATYP^GMVFUT3(2,.DA,X)
"^DD",120.53,120.531,.01,1,3,"%D",0)
^^10^10^3010524^^^
"^DD",120.53,120.531,.01,1,3,"%D",1,0)
This cross-reference sets up the "AA", "AEDIT" and "APRINT" indices on
"^DD",120.53,120.531,.01,1,3,"%D",2,0)
the GMRV Vital Category (120.53) file.  These indices have the following format:
"^DD",120.53,120.531,.01,1,3,"%D",3,0)
^GMRD(120.53,"AA",TYPE,CAT,DA(1),DA)="",
"^DD",120.53,120.531,.01,1,3,"%D",4,0)
^GMRD(120.53,"AEDIT",TYPE,EORD,DA(1),DA)="", and
"^DD",120.53,120.531,.01,1,3,"%D",5,0)
^GMRD(120.53,"APRINT",TYPE,PORD,DA(1),DA)="", where TYPE=Vital Type (.01)
"^DD",120.53,120.531,.01,1,3,"%D",6,0)
field of Vital Type (120.531) sub-file, CAT=Name (.01) field of GMRV
"^DD",120.53,120.531,.01,1,3,"%D",7,0)
Vital Category (120.53) file, EORD is the Edit Order (.06) field of the Vital
"^DD",120.53,120.531,.01,1,3,"%D",8,0)
Type (120.531) sub-file, PORD is the Print Order (.05) field of the Vital
"^DD",120.53,120.531,.01,1,3,"%D",9,0)
Type (120.531) sub-file, DA(1) is the entry in the GMRV Category (120.53)
"^DD",120.53,120.531,.01,1,3,"%D",10,0)
file, and DA is the entry in the (120.531) sub-file
"^DD",120.53,120.531,.01,1,3,"DT")
3010524
"^DD",120.53,120.531,.01,21,0)
^^2^2^2940525^^^^
"^DD",120.53,120.531,.01,21,1,0)
This field screens the vital measurement quality field in the GMRV VITAL 
"^DD",120.53,120.531,.01,21,2,0)
MEASUREMENT file (#120.5).
"^DD",120.53,120.531,.01,"DT")
3010524
"^DD",120.53,120.531,.03,0)
MAXIMUM ENTRIES^NJ2,0^^0;3^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",120.53,120.531,.03,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",120.53,120.531,.03,21,0)
^^2^2^2960719^
"^DD",120.53,120.531,.03,21,1,0)
This field indicates the minimum number of characteristics that can
"^DD",120.53,120.531,.03,21,2,0)
be selected for a patient for this category for this vital type.
"^DD",120.53,120.531,.03,"DT")
2960719
"^DD",120.53,120.531,.05,0)
PRINT ORDER^NJ2,0^^0;5^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",120.53,120.531,.05,1,0)
^.1
"^DD",120.53,120.531,.05,1,1,0)
120.53^APRT^MUMPS
"^DD",120.53,120.531,.05,1,1,1)
D APRT^GMVFUT3(1,.DA,X)
"^DD",120.53,120.531,.05,1,1,2)
D APRT^GMVFUT3(2,.DA,X)
"^DD",120.53,120.531,.05,1,1,"%D",0)
^^6^6^3010524^^^
"^DD",120.53,120.531,.05,1,1,"%D",1,0)
This cross-reference sets up the "APRINT" index  on the GMRV Vital Category
"^DD",120.53,120.531,.05,1,1,"%D",2,0)
(120.53) file.  This index has the following format:
"^DD",120.53,120.531,.05,1,1,"%D",3,0)
^GMRD(120.53,"APRINT",TYPE,PORD,DA(1),DA)="", where TYPE=Vital Type (.01)
"^DD",120.53,120.531,.05,1,1,"%D",4,0)
field of Vital Type (120.531) sub-file, PORD is the Print Order (.05)
"^DD",120.53,120.531,.05,1,1,"%D",5,0)
field of the Vital Type (120.531) sub-file, DA(1) is the entry in the GMRV
"^DD",120.53,120.531,.05,1,1,"%D",6,0)
Vital Category (120.53) file, and DA is the entry in the (120.531) sub-file.
"^DD",120.53,120.531,.05,1,1,"DT")
3010524
"^DD",120.53,120.531,.05,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",120.53,120.531,.05,21,0)
^^2^2^2960719^
"^DD",120.53,120.531,.05,21,1,0)
This field contains the order in which this category of characteristics
"^DD",120.53,120.531,.05,21,2,0)
will display on reports for this category for this vital type.
"^DD",120.53,120.531,.05,"DT")
3010524
"^DD",120.53,120.531,.06,0)
EDIT ORDER^NJ2,0^^0;6^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",120.53,120.531,.06,1,0)
^.1
"^DD",120.53,120.531,.06,1,1,0)
120.53^AEDT^MUMPS
"^DD",120.53,120.531,.06,1,1,1)
D AEDT^GMVFUT3(1,.DA,X)
"^DD",120.53,120.531,.06,1,1,2)
D AEDT^GMVFUT3(2,.DA,X)
"^DD",120.53,120.531,.06,1,1,"%D",0)
^^6^6^3010524^^
"^DD",120.53,120.531,.06,1,1,"%D",1,0)
This cross-reference sets up the "AEDIT" index  onthe GMRV Category
"^DD",120.53,120.531,.06,1,1,"%D",2,0)
(120.53) file.  This index has the following format:
"^DD",120.53,120.531,.06,1,1,"%D",3,0)
^GMRD(120.53,"AEDIT",TYPE,EORD,DA(1),DA)="", where TYPE=Vital Type (.01)
"^DD",120.53,120.531,.06,1,1,"%D",4,0)
field of Vital Type (120.531) sub-file, EORD is the Edit Order (.06)
"^DD",120.53,120.531,.06,1,1,"%D",5,0)
field of the Vital Type (120.531) sub-file, DA(1) is the entry in the GMRV
"^DD",120.53,120.531,.06,1,1,"%D",6,0)
Vital Category (120.53) file, and DA is the entry in the (120.531) sub-file.
"^DD",120.53,120.531,.06,1,1,"DT")
3010524
"^DD",120.53,120.531,.06,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",120.53,120.531,.06,21,0)
^^2^2^2960719^
"^DD",120.53,120.531,.06,21,1,0)
This field contains the order in which this category for this vital type
"^DD",120.53,120.531,.06,21,2,0)
will be entered/edited in the Vitals/Measurements edit options.
"^DD",120.53,120.531,.06,"DT")
3010524
"^DD",120.53,120.531,.07,0)
DEFAULT QUALIFIER^*P120.52'X^GMRD(120.52,^0;7^S DIC("S")="I $$SCR07^GMVFUT3(.DA,Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",120.53,120.531,.07,3)

"^DD",120.53,120.531,.07,12)
Enter the name of appropriate qualifier
"^DD",120.53,120.531,.07,12.1)
S DIC("S")="I $$SCR07^GMVFUT3(.DA,Y)"
"^DD",120.53,120.531,.07,21,0)
^^2^2^3010524^^^^
"^DD",120.53,120.531,.07,21,1,0)
This field will denote the default qualifier to be used if the user
"^DD",120.53,120.531,.07,21,2,0)
does not specify one during data entry.
"^DD",120.53,120.531,.07,"DT")
3010524
"^DD",120.57,120.57,0)
FIELD^^999.2^22
"^DD",120.57,120.57,0,"DDA")
N
"^DD",120.57,120.57,0,"DT")
2970416
"^DD",120.57,120.57,0,"IX","B",120.57,.01)

"^DD",120.57,120.57,0,"NM","GMRV VITALS PARAMETERS")

"^DD",120.57,120.57,0,"VRPK")
GEN. MED. REC. - VITALS
"^DD",120.57,120.57,.01,0)
NAME^RFX^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X I $D(X) K:$D(^GMRD(120.57,1,0)) X S:'$D(^GMRD(120.57,1,0)) DINUM=1
"^DD",120.57,120.57,.01,1,0)
^.1
"^DD",120.57,120.57,.01,1,1,0)
120.57^B
"^DD",120.57,120.57,.01,1,1,1)
S ^GMRD(120.57,"B",$E(X,1,30),DA)=""
"^DD",120.57,120.57,.01,1,1,2)
K ^GMRD(120.57,"B",$E(X,1,30),DA)
"^DD",120.57,120.57,.01,1,1,"%D",0)
^^1^1^2950301^^
"^DD",120.57,120.57,.01,1,1,"%D",1,0)
This cross-reference is automatically created on .01 field.
"^DD",120.57,120.57,.01,3)
This field provides an arbitrary name for the single entry in this file.
"^DD",120.57,120.57,.01,21,0)
^^1^1^2931222^^^
"^DD",120.57,120.57,.01,21,1,0)
This field provides an arbitrary name for the single entry in this file.
"^DD",120.57,120.57,1,0)
QUICK ORDER PROTOCOL COUNTER^NJ4,0^^Q0;1^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",120.57,120.57,1,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",120.57,120.57,1,8.5)
^
"^DD",120.57,120.57,1,9)
^
"^DD",120.57,120.57,1,21,0)
^^2^2^2940315^^^^
"^DD",120.57,120.57,1,21,1,0)
This field contains a counter which is appended to the end of each
"^DD",120.57,120.57,1,21,2,0)
quick order protocol.
"^DD",120.57,120.57,1,"DT")
2931208
"^DD",120.57,120.57,1.3,0)
GMRV INITIALIZATION SWITCH^NJ7,3^^INIT;1^K:+X'=X!(X>100)!(X<0)!(X?.E1"."4N.N) X
"^DD",120.57,120.57,1.3,3)
Type a Number between 0 and 100, 3 Decimal Digits
"^DD",120.57,120.57,1.3,8.5)
^
"^DD",120.57,120.57,1.3,9)
^
"^DD",120.57,120.57,1.3,21,0)
^^1^1^2940105^^^
"^DD",120.57,120.57,1.3,21,1,0)
This field contains a switch used by the GMRVINIT's ONLY.  NO EDITING ALLOWED!!!
"^DD",120.57,120.57,1.3,"DT")
2931208
"^DD",120.57,120.57,2,0)
STOP DATE DEFAULT^NJ3,0^^0;2^K:+X'=X!(X>365)!(X<0)!(X?.E1"."1N.N) X
"^DD",120.57,120.57,2,3)
Type a Number between 0 and 365, 0 Decimal Digits
"^DD",120.57,120.57,2,21,0)
^^2^2^2931229^^^
"^DD",120.57,120.57,2,21,1,0)
This field stores the number of days allotted in between the start date of a
"^DD",120.57,120.57,2,21,2,0)
vitals order and the stop date.
"^DD",120.57,120.57,3,0)
CANCEL ON WARD TRANSFER^S^1:YES;0:NO;^0;3^Q
"^DD",120.57,120.57,3,3)
Should these vitals orders be cancelled if a patient was transferred between wards?   1=Yes, and 0=No.
"^DD",120.57,120.57,3,21,0)
^^2^2^2940105^^^^
"^DD",120.57,120.57,3,21,1,0)
This field indicates that a flag is present to cancel vital measurement 
"^DD",120.57,120.57,3,21,2,0)
orders when a patient transfers between wards.
"^DD",120.57,120.57,4,0)
CANCEL ON SERVICE TRANSFER^S^1:YES;0:NO;^0;4^Q
"^DD",120.57,120.57,4,3)
Should a patient's orders be cancelled if transferred between services?  1=Yes, and 0=No.
"^DD",120.57,120.57,4,21,0)
^^2^2^2940105^^^^
"^DD",120.57,120.57,4,21,1,0)
This field indicates that a flag is present to cancel vital measurement 
"^DD",120.57,120.57,4,21,2,0)
orders when a patient transfers between services.
"^DD",120.57,120.57,5.1,0)
ABNORMAL TEMPERATURE - HIGH^RNJ5,1^^1;1^K:+X'=X!(X>120)!(X<45)!(X?.E1"."2N.N) X
"^DD",120.57,120.57,5.1,3)
Type a Number between 45 and 120, 1 Decimal Digit
"^DD",120.57,120.57,5.1,21,0)
^^3^3^2940105^^^^
"^DD",120.57,120.57,5.1,21,1,0)
This field indicates the upper limit for an acceptable range of patient 
"^DD",120.57,120.57,5.1,21,2,0)
temperatures. The abnormal high is equal to or greater than the value 
"^DD",120.57,120.57,5.1,21,3,0)
entered.
"^DD",120.57,120.57,5.2,0)
ABNORMAL TEMPERATURE - LOW^RNJ5,1^^1;2^K:+X'=X!(X>120)!(X<45)!(X?.E1"."2N.N) X
"^DD",120.57,120.57,5.2,3)
Type a Number between 45 and 120, 1 Decimal Digit
"^DD",120.57,120.57,5.2,21,0)
^^3^3^2940105^^^
"^DD",120.57,120.57,5.2,21,1,0)
This field sets the lower limit for an acceptable range of patient 
"^DD",120.57,120.57,5.2,21,2,0)
temperatures. The abnormal low is equal to or below that of the value 
"^DD",120.57,120.57,5.2,21,3,0)
entered.
"^DD",120.57,120.57,5.3,0)
ABNORMAL PULSE - HIGH^RNJ3,0^^1;3^K:+X'=X!(X>300)!(X<0)!(X?.E1"."1N.N) X
"^DD",120.57,120.57,5.3,3)
Type a Number between 0 and 300, 0 Decimal Digits
"^DD",120.57,120.57,5.3,21,0)
^^2^2^2940105^^^
"^DD",120.57,120.57,5.3,21,1,0)
This field sets the upper limit of an acceptable pulse rate. The abnormal 
"^DD",120.57,120.57,5.3,21,2,0)
high is equal to or greater than the value entered.
"^DD",120.57,120.57,5.4,0)
ABNORMAL PULSE - LOW^NJ3,0^^1;4^K:+X'=X!(X>300)!(X<0)!(X?.E1"."1N.N) X
"^DD",120.57,120.57,5.4,3)
Type a Number between 0 and 300, 0 Decimal Digits
"^DD",120.57,120.57,5.4,21,0)
^^2^2^2940105^^^
"^DD",120.57,120.57,5.4,21,1,0)
This field sets the lower limit of an acceptable pulse rate. The abnormal 
"^DD",120.57,120.57,5.4,21,2,0)
low is equal to or lower than the value entered.
"^DD",120.57,120.57,5.5,0)
ABNORMAL RESPIRATION - HIGH^NJ3,0^^1;5^K:+X'=X!(X>100)!(X<0)!(X?.E1"."1N.N) X
"^DD",120.57,120.57,5.5,3)
Type a Number between 0 and 100, 0 Decimal Digits
"^DD",120.57,120.57,5.5,21,0)
^^2^2^2940105^^^
"^DD",120.57,120.57,5.5,21,1,0)
This field sets the upper limit of an acceptable respiration rate. The 
"^DD",120.57,120.57,5.5,21,2,0)
abnormal high is equal to or greater than the value entered.
"^DD",120.57,120.57,5.6,0)
ABNORMAL RESPIRATION - LOW^NJ3,0^^1;6^K:+X'=X!(X>100)!(X<0)!(X?.E1"."1N.N) X
"^DD",120.57,120.57,5.6,3)
Type a Number between 0 and 100, 0 Decimal Digits
"^DD",120.57,120.57,5.6,21,0)
^^2^2^2940105^^^
"^DD",120.57,120.57,5.6,21,1,0)
This field sets the lower limit of an acceptable respiration rate. The 
"^DD",120.57,120.57,5.6,21,2,0)
abnormal low is equal to or lower than the value entered.
"^DD",120.57,120.57,5.7,0)
ABNORMAL SYSTOLIC - HIGH^NJ3,0^^1;7^K:+X'=X!(X>300)!(X<0)!(X?.E1"."1N.N) X
"^DD",120.57,120.57,5.7,3)
Type a Number between 0 and 300, 0 Decimal Digits
"^DD",120.57,120.57,5.7,21,0)
^^2^2^2940105^^^
"^DD",120.57,120.57,5.7,21,1,0)
This field sets the upper limit for an acceptable systolic blood pressure.  
"^DD",120.57,120.57,5.7,21,2,0)
The abnormal high is equal to or greater than the value entered.
"^DD",120.57,120.57,5.71,0)
ABNORMAL DIASTOLIC - HIGH^NJ3,0^^1;8^K:+X'=X!(X>300)!(X<0)!(X?.E1"."1N.N) X
"^DD",120.57,120.57,5.71,3)
Type a Number between 0 and 300, 0 Decimal Digits
"^DD",120.57,120.57,5.71,21,0)
^^2^2^2931229^^^
"^DD",120.57,120.57,5.71,21,1,0)
This field sets the upper limit for an acceptable diastolic blood pressure. 
"^DD",120.57,120.57,5.71,21,2,0)
The abnormal high is equal to or greater than the value entered.
"^DD",120.57,120.57,5.71,22)
1
"^DD",120.57,120.57,5.8,0)
ABNORMAL SYSTOLIC - LOW^NJ3,0^^1;9^K:+X'=X!(X>300)!(X<0)!(X?.E1"."1N.N) X
"^DD",120.57,120.57,5.8,3)
Type a Number between 0 and 300, 0 Decimal Digits
"^DD",120.57,120.57,5.8,21,0)
^^2^2^2940105^^^
"^DD",120.57,120.57,5.8,21,1,0)
This field sets the lower limit for an acceptable systolic blood pressure.  
"^DD",120.57,120.57,5.8,21,2,0)
The abnormal low is equal to or lower than the value entered.
"^DD",120.57,120.57,5.81,0)
ABNORMAL DIASTOLIC - LOW^NJ3,0^^1;10^K:+X'=X!(X>300)!(X<0)!(X?.E1"."1N.N) X
"^DD",120.57,120.57,5.81,3)
Type a Number between 0 and 300, 0 Decimal Digits
"^DD",120.57,120.57,5.81,21,0)
^^2^2^2940105^^^
"^DD",120.57,120.57,5.81,21,1,0)
This field sets the lower limit for an acceptable diastolic blood pressure. 
"^DD",120.57,120.57,5.81,21,2,0)
The abnormal low is equal to or lower than the value entered.
"^DD",120.57,120.57,6.1,0)
ABNORMAL CVP - HIGH^RNJ5,1^^1;11^K:+X'=X!(X>100)!(X<-10)!(X?.E1"."2N.N) X
"^DD",120.57,120.57,6.1,3)
Type a Number between -10 and 100, 1 Decimal Digit
"^DD",120.57,120.57,6.1,21,0)
^^2^2^2970416^^^^
"^DD",120.57,120.57,6.1,21,1,0)
This field sets the upper limit of an acceptable central venous pressure
"^DD",120.57,120.57,6.1,21,2,0)
rate.  The abnormal high is equal to or greater than the value entered.
"^DD",120.57,120.57,6.1,"DT")
2970416
"^DD",120.57,120.57,6.2,0)
ABNORMAL CVP - LOW^RNJ5,1^^1;12^K:+X'=X!(X>100)!(X<-10)!(X?.E1"."2N.N) X
"^DD",120.57,120.57,6.2,3)
Type a Number between -10 and 100, 1 Decimal Digit
"^DD",120.57,120.57,6.2,21,0)
^^2^2^2970416^^^
"^DD",120.57,120.57,6.2,21,1,0)
This field sets the lower limit of an acceptable central venous pressure.
"^DD",120.57,120.57,6.2,21,2,0)
The abnormal low is equal to or lower than the value entered.
"^DD",120.57,120.57,6.2,"DT")
2970416
"^DD",120.57,120.57,6.3,0)
ABNORMAL O2 SATURATION - LOW^RNJ3,0^^1;13^K:+X'=X!(X>100)!(X<0)!(X?.E1"."1N.N) X
"^DD",120.57,120.57,6.3,3)
Type a Number between 0 and 100, 0 Decimal Digits
"^DD",120.57,120.57,6.3,21,0)
^^2^2^2970416^^^^
"^DD",120.57,120.57,6.3,21,1,0)
This field sets the lower limit of an acceptable oxygen saturation rate.
"^DD",120.57,120.57,6.3,21,2,0)
The abnormal low is equal to or lower than the value entered.
"^DD",120.57,120.57,6.3,"DT")
2970416
"^DD",120.57,120.57,999,0)
PHASE I COMPLETED^S^1:YES;0:NO;^PHASEI;1^Q
"^DD",120.57,120.57,999,8.5)
@
"^DD",120.57,120.57,999,9)
@
"^DD",120.57,120.57,999,21,0)
^^1^1^2960731^^^
"^DD",120.57,120.57,999,21,1,0)
This field denotes whether the GMRV Site/Quality Conversion has completed.
"^DD",120.57,120.57,999,"DT")
2960719
"^DD",120.57,120.57,999.1,0)
PHASE II COMPLETED^S^1:YES;0:NO;^PHASEII;1^Q
"^DD",120.57,120.57,999.1,8.5)
@
"^DD",120.57,120.57,999.1,9)
@
"^DD",120.57,120.57,999.1,21,0)
^^2^2^2960719^^
"^DD",120.57,120.57,999.1,21,1,0)
This field denotes whether the GMRV Vitals Measurement Data Conversion
"^DD",120.57,120.57,999.1,21,2,0)
has completed.
"^DD",120.57,120.57,999.1,"DT")
2960719
"^DD",120.57,120.57,999.2,0)
PHASE II LAST RECORD^NJ9,0^^PHASEII;2^K:+X'=X!(X>999999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",120.57,120.57,999.2,3)
Type a Number between 1 and 999999999, 0 Decimal Digits
"^DD",120.57,120.57,999.2,8.5)
@
"^DD",120.57,120.57,999.2,9)
@
"^DD",120.57,120.57,999.2,21,0)
^^3^3^2960719^^
"^DD",120.57,120.57,999.2,21,1,0)
This field will contain the number of the last record to be converted
"^DD",120.57,120.57,999.2,21,2,0)
by the GMRV Vitals Measurement Data Conversion, or it will be null
"^DD",120.57,120.57,999.2,21,3,0)
if the conversion has completed or has not started.
"^DD",120.57,120.57,999.2,"DT")
2960719
"^DIC",120.5,120.5,0)
GMRV VITAL MEASUREMENT^120.5ID
"^DIC",120.5,120.5,0,"GL")
^GMR(120.5,
"^DIC",120.5,120.5,"%",0)
^1.005^^0
"^DIC",120.5,120.5,"%D",0)
^^2^2^2970207^^^^
"^DIC",120.5,120.5,"%D",1,0)
This file contains vital sign information and other measurement data for a 
"^DIC",120.5,120.5,"%D",2,0)
patient.
"^DIC",120.5,"B","GMRV VITAL MEASUREMENT",120.5)

"^DIC",120.51,120.51,0)
GMRV VITAL TYPE^120.51I
"^DIC",120.51,120.51,0,"GL")
^GMRD(120.51,
"^DIC",120.51,120.51,"%",0)
^1.005^2^2
"^DIC",120.51,120.51,"%",1,0)
GMTS
"^DIC",120.51,120.51,"%",2,0)
PXRM
"^DIC",120.51,120.51,"%","B","GMTS",1)

"^DIC",120.51,120.51,"%","B","PXRM",2)

"^DIC",120.51,120.51,"%D",0)
^^2^2^2990331^^^^
"^DIC",120.51,120.51,"%D",1,0)
This file contains a list of vital sign types, and various parameters
"^DIC",120.51,120.51,"%D",2,0)
which mold the data entry.
"^DIC",120.51,"B","GMRV VITAL TYPE",120.51)

"^DIC",120.52,120.52,0)
GMRV VITAL QUALIFIER^120.52
"^DIC",120.52,120.52,0,"GL")
^GMRD(120.52,
"^DIC",120.52,120.52,"%D",0)
^^1^1^2990331^^^^
"^DIC",120.52,120.52,"%D",1,0)
This file contains a list of qualifiers for vitals/measurements.
"^DIC",120.52,"B","GMRV VITAL QUALIFIER",120.52)

"^DIC",120.53,120.53,0)
GMRV VITAL CATEGORY^120.53
"^DIC",120.53,120.53,0,"GL")
^GMRD(120.53,
"^DIC",120.53,120.53,"%D",0)
^^2^2^2990331^^^^
"^DIC",120.53,120.53,"%D",1,0)
This file contains a list of qualities or characteristics that can be 
"^DIC",120.53,120.53,"%D",2,0)
affixed to a vital measurement.
"^DIC",120.53,"B","GMRV VITAL CATEGORY",120.53)

"^DIC",120.57,120.57,0)
GMRV VITALS PARAMETERS^120.57
"^DIC",120.57,120.57,0,"GL")
^GMRD(120.57,
"^DIC",120.57,120.57,"%D",0)
^^2^2^2990528^^^^
"^DIC",120.57,120.57,"%D",1,0)
This file contains the various site configurable parameters for the
"^DIC",120.57,120.57,"%D",2,0)
Vitals/Measurements application.
"^DIC",120.57,"B","GMRV VITALS PARAMETERS",120.57)

**INSTALL NAME**
NUR*4.0*37
"BLD",3634,0)
NUR*4.0*37^NURSING SERVICE^0^3021028^y
"BLD",3634,1,0)
^^2^2^3020124^
"BLD",3634,1,1,0)
Please read the NUR*4*37 patch description on FORUM for an explanation of
"BLD",3634,1,2,0)
what this patch does.
"BLD",3634,4,0)
^9.64PA^^
"BLD",3634,"ABNS",0)
^9.66A^^
"BLD",3634,"ABPKG")
y^n
"BLD",3634,"KRN",0)
^9.67PA^8989.52^19
"BLD",3634,"KRN",.4,0)
.4
"BLD",3634,"KRN",.401,0)
.401
"BLD",3634,"KRN",.402,0)
.402
"BLD",3634,"KRN",.403,0)
.403
"BLD",3634,"KRN",.5,0)
.5
"BLD",3634,"KRN",.84,0)
.84
"BLD",3634,"KRN",3.6,0)
3.6
"BLD",3634,"KRN",3.8,0)
3.8
"BLD",3634,"KRN",9.2,0)
9.2
"BLD",3634,"KRN",9.8,0)
9.8
"BLD",3634,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",3634,"KRN",9.8,"NM",1,0)
NURAPI^^0^B11209032
"BLD",3634,"KRN",9.8,"NM","B","NURAPI",1)

"BLD",3634,"KRN",19,0)
19
"BLD",3634,"KRN",19.1,0)
19.1
"BLD",3634,"KRN",101,0)
101
"BLD",3634,"KRN",409.61,0)
409.61
"BLD",3634,"KRN",771,0)
771
"BLD",3634,"KRN",870,0)
870
"BLD",3634,"KRN",8989.51,0)
8989.51
"BLD",3634,"KRN",8989.52,0)
8989.52
"BLD",3634,"KRN",8994,0)
8994
"BLD",3634,"KRN","B",.4,.4)

"BLD",3634,"KRN","B",.401,.401)

"BLD",3634,"KRN","B",.402,.402)

"BLD",3634,"KRN","B",.403,.403)

"BLD",3634,"KRN","B",.5,.5)

"BLD",3634,"KRN","B",.84,.84)

"BLD",3634,"KRN","B",3.6,3.6)

"BLD",3634,"KRN","B",3.8,3.8)

"BLD",3634,"KRN","B",9.2,9.2)

"BLD",3634,"KRN","B",9.8,9.8)

"BLD",3634,"KRN","B",19,19)

"BLD",3634,"KRN","B",19.1,19.1)

"BLD",3634,"KRN","B",101,101)

"BLD",3634,"KRN","B",409.61,409.61)

"BLD",3634,"KRN","B",771,771)

"BLD",3634,"KRN","B",870,870)

"BLD",3634,"KRN","B",8989.51,8989.51)

"BLD",3634,"KRN","B",8989.52,8989.52)

"BLD",3634,"KRN","B",8994,8994)

"BLD",3634,"QUES",0)
^9.62^^
"BLD",3634,"REQB",0)
^9.611^^
"MBREQ")
0
"PKG",45,-1)
1^1
"PKG",45,0)
NURSING SERVICE^NUR^Nursing Service General Module
"PKG",45,20,0)
^9.402P^^
"PKG",45,22,0)
^9.49I^1^1
"PKG",45,22,1,0)
4.0^2970509^2970702^64
"PKG",45,22,1,"PAH",1,0)
37^3021028^547
"PKG",45,22,1,"PAH",1,1,0)
^^2^2^3021028
"PKG",45,22,1,"PAH",1,1,1,0)
Please read the NUR*4*37 patch description on FORUM for an explanation of
"PKG",45,22,1,"PAH",1,1,2,0)
what this patch does.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","NURAPI")
0^1^B11209032
"RTN","NURAPI",1,0)
NURAPI ;HCIOFO/FT,AL-APIs ;8/14/02  08:43
"RTN","NURAPI",2,0)
 ;;4.0;NURSING SERVICE;**37**;Apr 25, 1997
"RTN","NURAPI",3,0)
 ; 
"RTN","NURAPI",4,0)
 ; The entry points in this routine are documented in IA #3227.
"RTN","NURAPI",5,0)
 ;
"RTN","NURAPI",6,0)
 ; This routine uses the following IAs:
"RTN","NURAPI",7,0)
 ; #10035 - ^DPT( references       (supported)
"RTN","NURAPI",8,0)
 ;
"RTN","NURAPI",9,0)
ACTLOCS(ARRAY) ; Returns all active nursing locations from the NURS LOCATION
"RTN","NURAPI",10,0)
 ; file (#211.4) in the array specified. FILE 211.4 points to HOSPITAL
"RTN","NURAPI",11,0)
 ; LOCATION file (#44).
"RTN","NURAPI",12,0)
 ;  input: ARRAY - (Required) The name of the array to store the entries
"RTN","NURAPI",13,0)
 ; output: ARRAY(sequence #)=File 211.4 ien^File 44 name (for 211.4 ien) 
"RTN","NURAPI",14,0)
 ;
"RTN","NURAPI",15,0)
 N NURCNT,NURI,NURIEN,NURNAME
"RTN","NURAPI",16,0)
 D LIST^DIC(211.4,"","","","*","","","","I $S('$D(^NURSF(211.4,""D"",""I"",+Y)):1,$P(^NURSF(211.4,+Y,1),U)=""I"":0,1:1)","")
"RTN","NURAPI",17,0)
 I +$P($G(^TMP("DILIST",$J,0)),U,1)=0 S ARRAY(1)="NO UNIT"
"RTN","NURAPI",18,0)
 S (NURCNT,NURI)=0
"RTN","NURAPI",19,0)
 F  S NURI=$O(^TMP("DILIST",$J,1,NURI)) Q:'NURI  D
"RTN","NURAPI",20,0)
 .S NURNAME=$P($G(^TMP("DILIST",$J,1,NURI)),U,1)
"RTN","NURAPI",21,0)
 .S NURIEN=+$P($G(^TMP("DILIST",$J,2,NURI)),U,1)
"RTN","NURAPI",22,0)
 .Q:'NURIEN
"RTN","NURAPI",23,0)
 .S NURCNT=NURCNT+1
"RTN","NURAPI",24,0)
 .S ARRAY(NURCNT)=NURIEN_U_NURNAME
"RTN","NURAPI",25,0)
 .Q
"RTN","NURAPI",26,0)
 K ^TMP("DILIST",$J)
"RTN","NURAPI",27,0)
 Q
"RTN","NURAPI",28,0)
PTCHK(LOC) ; This function returns a value that indicates if any patients
"RTN","NURAPI",29,0)
 ; (active or inactive) are associated with the Nursing location
"RTN","NURAPI",30,0)
 ; identified.
"RTN","NURAPI",31,0)
 ;  input: LOC - (Required) NURS LOCATION file (#211.4) ien
"RTN","NURAPI",32,0)
 ; output:   0 - no patients associated with this location
"RTN","NURAPI",33,0)
 ;           1 - yes, patients are associated with this location 
"RTN","NURAPI",34,0)
 ;          -1 - (minus 1) LOC is undefined or not found
"RTN","NURAPI",35,0)
 ;I $G(LOC)="" Q -1
"RTN","NURAPI",36,0)
 I '$D(^NURSF(211.4,+LOC,0)) Q -1
"RTN","NURAPI",37,0)
 I '$D(^NURSF(214,"E",LOC)) Q 0  ;FILE 214 is the NURS PATIENT file
"RTN","NURAPI",38,0)
 Q 1
"RTN","NURAPI",39,0)
 ;
"RTN","NURAPI",40,0)
APTCHK(LOC) ; This function returns a value that indicates if active
"RTN","NURAPI",41,0)
 ; patients are associated with the Nursing location identified.
"RTN","NURAPI",42,0)
 ;  input: LOC - (Required) NURS LOCATION file (#211.4) ien
"RTN","NURAPI",43,0)
 ; output:   0 - no active patients associated with this location
"RTN","NURAPI",44,0)
 ;           1 - yes, active patients are associated with this location 
"RTN","NURAPI",45,0)
 ;          -1 - (minus 1) LOC is undefined or not found
"RTN","NURAPI",46,0)
 ;I $G(LOC)="" Q -1
"RTN","NURAPI",47,0)
 I '$D(^NURSF(211.4,+LOC,0)) Q -1
"RTN","NURAPI",48,0)
 I '$D(^NURSF(214,"AF","A",LOC)) Q 0  ;FILE 214 is the NURS PATIENT file
"RTN","NURAPI",49,0)
 Q 1
"RTN","NURAPI",50,0)
 ;
"RTN","NURAPI",51,0)
PTLIST(LOC,ARRAY) ; Returns a list of all (active and inactive) patients
"RTN","NURAPI",52,0)
 ; for a nursing location in the array specified.
"RTN","NURAPI",53,0)
 ;  input:   LOC - (Required) NURS LOCATION file (#211.4) ien
"RTN","NURAPI",54,0)
 ;  input: ARRAY - (Required) Name of array to return entries in
"RTN","NURAPI",55,0)
 ; output: ARRAY - Subscripted by sequential number with DFN in first
"RTN","NURAPI",56,0)
 ;                 piece and patient name in second piece.
"RTN","NURAPI",57,0)
 ;         example: ARRAY(#)=DFN^patient name
"RTN","NURAPI",58,0)
 ;
"RTN","NURAPI",59,0)
 ; If LOC is undefined or not found, then returns ARRAY(1)=-1
"RTN","NURAPI",60,0)
 ; If no patients on the Location, then returns ARRAY(1)="^No Patients"
"RTN","NURAPI",61,0)
 ;
"RTN","NURAPI",62,0)
 ;I $G(LOC)="" S ARRAY(1)=-1 Q
"RTN","NURAPI",63,0)
 I '$D(^NURSF(211.4,+LOC,0)) S ARRAY(1)=-1 Q
"RTN","NURAPI",64,0)
 N DFN,PATNAME,NURCNT
"RTN","NURAPI",65,0)
 S (DFN,NURCNT)=0
"RTN","NURAPI",66,0)
 F  S DFN=$O(^NURSF(214,"E",LOC,DFN)) Q:DFN'>0  D
"RTN","NURAPI",67,0)
 . S PATNAME=$P($G(^DPT(DFN,0)),"^")
"RTN","NURAPI",68,0)
 . Q:PATNAME=""
"RTN","NURAPI",69,0)
 . S NURCNT=NURCNT+1
"RTN","NURAPI",70,0)
 . S ARRAY(NURCNT)=DFN_U_PATNAME
"RTN","NURAPI",71,0)
 . Q
"RTN","NURAPI",72,0)
 I NURCNT=0 S ARRAY(1)="^No Patients"
"RTN","NURAPI",73,0)
 Q
"RTN","NURAPI",74,0)
APTLIST(LOC,ARRAY) ; Returns a list of active patients for a nursing
"RTN","NURAPI",75,0)
 ; location in the array specified.
"RTN","NURAPI",76,0)
 ;  input:   LOC - (Required) NURS LOCATION file (#211.4) ien
"RTN","NURAPI",77,0)
 ;  input: ARRAY - (Required) Name of the array to return entries in
"RTN","NURAPI",78,0)
 ; output: ARRAY - Subscripted by sequential number with DFN in first
"RTN","NURAPI",79,0)
 ;                 piece and patient name in second piece.
"RTN","NURAPI",80,0)
 ;         example: ARRAY(#)=DFN^patient name
"RTN","NURAPI",81,0)
 ;
"RTN","NURAPI",82,0)
 ; If LOC is undefined or not found, then returns ARRAY(1)=-1
"RTN","NURAPI",83,0)
 ; If no patients on the Location, then returns ARRAY(1)="^No Patients"
"RTN","NURAPI",84,0)
 ;
"RTN","NURAPI",85,0)
 ;I $G(LOC)="" S ARRAY(1)=-1 Q
"RTN","NURAPI",86,0)
 I '$D(^NURSF(211.4,+LOC,0)) S ARRAY(1)=-1 Q
"RTN","NURAPI",87,0)
 N DFN,NURCNT,PATNAME
"RTN","NURAPI",88,0)
 S (DFN,NURCNT)=0
"RTN","NURAPI",89,0)
 F  S DFN=$O(^NURSF(214,"AF","A",LOC,DFN)) Q:DFN'>0  D
"RTN","NURAPI",90,0)
 .S PATNAME=$P($G(^DPT(DFN,0)),"^")
"RTN","NURAPI",91,0)
 .Q:PATNAME=""
"RTN","NURAPI",92,0)
 .S NURCNT=NURCNT+1
"RTN","NURAPI",93,0)
 .S ARRAY(NURCNT)=DFN_U_PATNAME
"RTN","NURAPI",94,0)
 .Q
"RTN","NURAPI",95,0)
 I NURCNT=0 S ARRAY(1)="^No Patients"
"RTN","NURAPI",96,0)
 Q
"RTN","NURAPI",97,0)
FINDNLOC(LOC) ; This function returns the NURS LOCATION file (#211.4) ien
"RTN","NURAPI",98,0)
 ; and the ien of the location (File 44, Field .01).
"RTN","NURAPI",99,0)
 ;  input: LOC - (Required) Name of the Nursing location (as it appears
"RTN","NURAPI",100,0)
 ;               in File 44).
"RTN","NURAPI",101,0)
 ;               The name should begin with the characters 'NUR '.
"RTN","NURAPI",102,0)
 ;               If not, 'NUR<space>' will be appended to the beginning
"RTN","NURAPI",103,0)
 ;               of LOC. If LOC is undefined, then returns -1.
"RTN","NURAPI",104,0)
 ; output: File 211.4 ien^File 44 ien
"RTN","NURAPI",105,0)
 ;
"RTN","NURAPI",106,0)
 ; If LOC is undefined, then returns -1
"RTN","NURAPI",107,0)
 ; If LOC is not found, then returns "^Location not found"
"RTN","NURAPI",108,0)
 ;
"RTN","NURAPI",109,0)
 I $G(LOC)="" Q -1
"RTN","NURAPI",110,0)
 N NUROUT,NURWARD,NURVHLOC
"RTN","NURAPI",111,0)
 I LOC'?1"NUR ".E S LOC="NUR "_LOC
"RTN","NURAPI",112,0)
 D FIND^DIC(211.4,"","","X",LOC,"","","","","NUROUT")
"RTN","NURAPI",113,0)
 S NUROUT(1)=+$P($G(NUROUT("DILIST",0)),"^")
"RTN","NURAPI",114,0)
 I NUROUT(1)'>0 Q "^Location not found"
"RTN","NURAPI",115,0)
 S NURWARD=+$P(NUROUT("DILIST",2,1),"^"),NURVHLOC=+$P(NUROUT("DILIST",1,1),"^")
"RTN","NURAPI",116,0)
 S LOC=NURWARD_"^"_NURVHLOC
"RTN","NURAPI",117,0)
 Q LOC
"RTN","NURAPI",118,0)
 ;
"RTN","NURAPI",119,0)
MASWARDS(LOC,ARRAY) ; Returns the MAS wards associated with this Nursing
"RTN","NURAPI",120,0)
 ; location in the array specified. The .01 field of the MAS WARD
"RTN","NURAPI",121,0)
 ; multiple of the NURS LOCATION file points to the WARD LOCATION
"RTN","NURAPI",122,0)
 ; file (#42).
"RTN","NURAPI",123,0)
 ;  input:   LOC - (Required) NURS LOCATION file (#211.4) ien
"RTN","NURAPI",124,0)
 ;  input: ARRAY - (Required) Name of array to return entries in
"RTN","NURAPI",125,0)
 ; output: ARRAY subscripted by the MAS WARD value.
"RTN","NURAPI",126,0)
 ;         example: ARRAY($P(^NURSF(211.4,LOC,3,D1,0),U,1))=""
"RTN","NURAPI",127,0)
 ;         If LOC is null or not found, then ARRAY(1)=-1
"RTN","NURAPI",128,0)
 ;
"RTN","NURAPI",129,0)
 I '$D(^NURSF(211.4,+LOC,0)) S ARRAY(1)=-1 Q
"RTN","NURAPI",130,0)
 N GMVD1
"RTN","NURAPI",131,0)
 I $D(^NURSF(211.4,LOC,3)) D
"RTN","NURAPI",132,0)
 .S GMVD1=0
"RTN","NURAPI",133,0)
 .F  S GMVD1=$O(^NURSF(211.4,LOC,3,GMVD1)) Q:GMVD1'>0  S ARRAY($P(^NURSF(211.4,LOC,3,GMVD1,0),U,1))=""
"RTN","NURAPI",134,0)
 .Q
"RTN","NURAPI",135,0)
 I $O(ARRAY(0))="" S ARRAY(1)=-1
"RTN","NURAPI",136,0)
 Q
"VER")
8.0^22
**INSTALL NAME**
GMRY*4.0*5
"BLD",2897,0)
GMRY*4.0*5^GEN. MED. REC. - I/O^0^3021028^y
"BLD",2897,1,0)
^^2^2^3020124^
"BLD",2897,1,1,0)
Please read the GMRY*4*5 patch description on FORUM for an explanation of
"BLD",2897,1,2,0)
what this patch does.
"BLD",2897,4,0)
^9.64PA^^
"BLD",2897,"ABNS",0)
^9.66A^^
"BLD",2897,"ABPKG")
y^n
"BLD",2897,"KRN",0)
^9.67PA^19^17
"BLD",2897,"KRN",.4,0)
.4
"BLD",2897,"KRN",.401,0)
.401
"BLD",2897,"KRN",.402,0)
.402
"BLD",2897,"KRN",.403,0)
.403
"BLD",2897,"KRN",.5,0)
.5
"BLD",2897,"KRN",.84,0)
.84
"BLD",2897,"KRN",3.6,0)
3.6
"BLD",2897,"KRN",3.8,0)
3.8
"BLD",2897,"KRN",9.2,0)
9.2
"BLD",2897,"KRN",9.8,0)
9.8
"BLD",2897,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",2897,"KRN",9.8,"NM",1,0)
GMRYAPI^^0^B121267
"BLD",2897,"KRN",9.8,"NM","B","GMRYAPI",1)

"BLD",2897,"KRN",19,0)
19
"BLD",2897,"KRN",19.1,0)
19.1
"BLD",2897,"KRN",101,0)
101
"BLD",2897,"KRN",409.61,0)
409.61
"BLD",2897,"KRN",771,0)
771
"BLD",2897,"KRN",870,0)
870
"BLD",2897,"KRN",8994,0)
8994
"BLD",2897,"KRN","B",.4,.4)

"BLD",2897,"KRN","B",.401,.401)

"BLD",2897,"KRN","B",.402,.402)

"BLD",2897,"KRN","B",.403,.403)

"BLD",2897,"KRN","B",.5,.5)

"BLD",2897,"KRN","B",.84,.84)

"BLD",2897,"KRN","B",3.6,3.6)

"BLD",2897,"KRN","B",3.8,3.8)

"BLD",2897,"KRN","B",9.2,9.2)

"BLD",2897,"KRN","B",9.8,9.8)

"BLD",2897,"KRN","B",19,19)

"BLD",2897,"KRN","B",19.1,19.1)

"BLD",2897,"KRN","B",101,101)

"BLD",2897,"KRN","B",409.61,409.61)

"BLD",2897,"KRN","B",771,771)

"BLD",2897,"KRN","B",870,870)

"BLD",2897,"KRN","B",8994,8994)

"BLD",2897,"QUES",0)
^9.62^^
"BLD",2897,"REQB",0)
^9.611^^
"MBREQ")
0
"PKG",332,-1)
1^1
"PKG",332,0)
GEN. MED. REC. - I/O^GMRY^Intake/Output Module of General Medical Record.
"PKG",332,20,0)
^9.402P^^
"PKG",332,22,0)
^9.49I^1^1
"PKG",332,22,1,0)
4.0^2970425^2970702^64
"PKG",332,22,1,"PAH",1,0)
5^3021028^547
"PKG",332,22,1,"PAH",1,1,0)
^^2^2^3021028
"PKG",332,22,1,"PAH",1,1,1,0)
Please read the GMRY*4*5 patch description on FORUM for an explanation of
"PKG",332,22,1,"PAH",1,1,2,0)
what this patch does.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","GMRYAPI")
0^1^B121267
"RTN","GMRYAPI",1,0)
GMRYAPI ;HIOFO/FT-I/O APIs ;1/24/02  14:34
"RTN","GMRYAPI",2,0)
 ;;4.0;Intake/Output;**5**;Apr 25, 1997
"RTN","GMRYAPI",3,0)
 ;
"RTN","GMRYAPI",4,0)
 ; The calls in this routine are documented in IA #3214.
"RTN","GMRYAPI",5,0)
 ;
"RTN","GMRYAPI",6,0)
 ; This routine uses the following IAs:
"RTN","GMRYAPI",7,0)
 ; <None>
"RTN","GMRYAPI",8,0)
 ;
"RTN","GMRYAPI",9,0)
INPUT() ; This function returns the number of entries in the GMRY INPUT TYPE
"RTN","GMRYAPI",10,0)
 ; (#126.56) file.
"RTN","GMRYAPI",11,0)
 ;  Input - <none>
"RTN","GMRYAPI",12,0)
 ; Output - the number of entries in FILE 126.56
"RTN","GMRYAPI",13,0)
 Q $P($G(^GMRD(126.56,0)),U,4)
"RTN","GMRYAPI",14,0)
 ;
"RTN","GMRYAPI",15,0)
OUTPUT() ; This function returns the number of entries in the
"RTN","GMRYAPI",16,0)
 ; GMRY OUTPUT TYPE (#126.58) file.
"RTN","GMRYAPI",17,0)
 ;  Input - <none>
"RTN","GMRYAPI",18,0)
 ; Output - the number of entries in FILE 126.58
"RTN","GMRYAPI",19,0)
 Q $P($G(^GMRD(126.58,0)),U,4)
"RTN","GMRYAPI",20,0)
 ;
"VER")
8.0^22
**END**
**END**

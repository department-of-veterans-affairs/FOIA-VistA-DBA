$TXT Created by NAGRECHA,VARSHA at LAWVAA.FO-BIRM.MED.VA.GOV  (KIDS) on Monday, 11/24/03 at 11:35
=============================================================================
Run Date: MAR 16, 2004                     Designation: PSO*7*154
Package : PSO - OUTPATIENT PHARMACY           Priority: Mandatory
Version : 7       SEQ #143                      Status: Released
                  Compliance Date: APR 16, 2004
=============================================================================

Associated patches: (v)PSO*7*136   <<= must be installed BEFORE `PSO*7*154'
                    (v)PSO*7*139   <<= must be installed BEFORE `PSO*7*154'

Subject:  REBUILD MISSING CROSS-REFERENCES

Category: 
  - Routine

Description:
============

 SBY-1003-30858
 Prescriptions are not seen in Patient Prescription Processing
 [PSO LM BACKDOOR ORDERS] option and in Computerized Patient Record System
 (CPRS) Meds Tab but are seen in View Prescriptions [PSO VIEW] option and
 CPRS Orders Tab.
  
 PSO*7*139 corrected the following problem:
     In some situations where a patient is being accessed by Inpatient
     Medications Version 5.0, if an attempt is made to finish orders in
     Outpatient Pharmacy Version 7.0, a message is received that the
     patient is in use. Then if an "^" is entered for the PATIENT STATUS
     prompt, the cross-reference entries in the PHARMACY PATIENT file (#55)
     could be deleted for that patient.
  
 This patch has a post install clean-up routine that will:
  
 1. Look for entries in the PHARMACY PATIENT file (#55) affected by the
    problem above and will rebuild the missing cross-references.
 
 2. Once the cross-reference is rebuilt for a specific patient, the post
    install will check if the patient has been merged and in case the
    patient's prescriptions still contain the old patient internal entry 
    number, it will correct them with the new patient number in the
    PRESCRIPTION file (#52). The database problems caused by patient 
    merges have been fixed by PSO*7*136, however, patient entries in 
    the PHARMACY PATIENT file (#55) with the problem above, could have 
    been missed by PSO*7*136 cleanup job. 
    This step of this cleanup will make sure these entries are fixed.
  
  During Installation of this patch the user will be asked: "Queue the
  Post-Install to run at what Date@Time: ". If the prompt is not answered, 
  the patch WILL NOT be installed. After the post install routine is
  run to completion at the time the user indicated, a MailMan message with the
  subject "PHARMACY PATIENT File (#55) missing entries" containing the
  list of prescription cross-references rebuilt will be sent to the person 
  installing the patch. The prescriptions will then appear in the Patient 
  Prescription Processing [PSO LM BACKDOOR ORDERS] option and the CPRS Meds 
  Tab if they are not past their expiration date. 
 
  It is recommended to review the patient's medication profile for the 
  patients that are reported in the mailman message. 
 
 NOTE: ** THE POST-INSTALL SHOULD BE QUEUED TO RUN AT OFF-PEAK HOURS.**
 
 Associated NOIS:
 ===============
 SBY-1003-30858
 MOU-1003-30665
 MAC-0803-61712
 
 Test Sites:
 ==========
 Oklahoma City, OK
 Mountain Home, TN 
 Salisbury, NC  
 Minneapolis, MN
 Fayetteville, AR
 
 ROUTINE SUMMARY:
 ===============
  The following is a list of the routines included in this patch.  The
  second line of each of these routines now looks like:
 
 <TAB>;;7.0;OUTPATIENT PHARMACY;**[patch list]**;DEC 1997
 
 CHECK^XTSUMBLD results:
  
  Routine  Before Patch   After Patch     Patch List
  -------  ------------   -----------     ----------  
  PSOPOS10          N/A      18736519            154
  PSOPOS12          N/A       2808105            154
  
 Server Installation Instructions:
 ================================
 
 This patch can be loaded with users on the system. Installation will
 take less than 1 minute.
  
    Suggested time to install: non-peak requirement hours.
  
    1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
    2. Review your mapped set. If the routines are mapped, they should
       be removed from the mapped set at this time.
 
    3. From the Kernel Installation & Distribution System menu, select
       the Installation menu.
  
    4. From this menu, you may select to use the following options
       (when prompted for INSTALL NAME, enter PSO*7.0*154)
      a. Backup a Transport Global - this option will create a backup
         message of any routines exported with the patch. It will NOT
         backup any other changes such as DDs or templates.
      b. Compare Transport Global to Current System - this option will
         allow you to view all changes that will be made when the patch
         is installed. It compares all components of the patch (routines,
         DDs, templates, etc.).
      c. Verify Checksums in Transport Global - this option will ensure
         the integrity of the routines that are in the transport global.
  
    5. Use the Install Package(s) option and select the package patch
       PSO*7.0*154.
  
    6. The Environment check routine will be run and when prompted
       "Queue the Post-Install to run at what Date@Time:" it is 
       recommended to enter an off-peak time. If this prompt is not 
       answered, the patch will not be installed.
 
    7. When prompted "Want KIDS to INHIBIT LOGONs during the install?
       YES//" respond NO.
  
    8. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? YES//" respond NO.
  
    9. If any routines were unmapped as part of step 2, they should be
       returned to the mapped set once the installation has run to
       completion.
  
 Example Installation:
 =====================
 
 Select Installation Option: 6  Install Package(s)
 Select INSTALL NAME: PSO*7.0*154       Loaded from Distribution 
 11/17/03@10:10:06
 
      => PSO*7*154 
  
 This Distribution was loaded on Nov 17, 2003@10:10:06 with header of
    PSO*7*154
    It consisted of the following Install(s):
     PSO*7.0*154
 Checking Install for Package PSO*7.0*154
 Will first run the Environment Check Routine, PSOPOS10
  
  
 Queue the Post-Install to run at what Date@Time: T@1015  (NOV 17, 2003@10:15)
  
 Install Questions for PSO*7.0*154
  
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   GENERIC INCOMING TELNET
  
  Install Started for PSO*7.0*154 :
                Nov 17, 2003@10:10:54
  
 Build Distribution Date: Nov 17, 2003
                                   PSO*7.0*154
 --------------------------------------------------------------------------------
  
  Installing Routines:
                Nov 17, 2003@10:10:54
  
  Running Post-Install Routine: EN^PSOPOS10
  
 Task Queued!
  
  Updating Routine file...
  
  Updating KIDS files...
  
  PSO*7.0*154 Installed.
                Nov 17, 2003@10:10:54
  
  Install Message sent #5422265
 --------------------------------------------------------------------------------
           [------------------------------------------------------------]
   100%    |             25             50             75               |
 Complete  [------------------------------------------------------------]
  
  
 Install Completed
 

Routine Information:
====================

Routine Name:
  - PSOPOS10


Routine Checksum:

Routine Name:
  - PSOPOS12


Routine Checksum:

=============================================================================
User Information:
Entered By  : NAGRECHA,VARSHA               Date Entered  : OCT 16, 2003
Completed By: GREER,MIKE                    Date Completed: MAR 11, 2004
Released By : LESIEUR,SHIRLEY               Date Released : MAR 16, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

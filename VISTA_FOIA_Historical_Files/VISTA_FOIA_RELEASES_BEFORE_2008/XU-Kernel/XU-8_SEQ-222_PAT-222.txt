$TXT Created by FORT,WALLY at NXT.KERNEL.FO-OAKLAND.MED.VA.GOV  (KIDS) on WEDNESDAY, 11/06/02 at 15:57
=============================================================================
Run Date: NOV 22, 2002                     Designation: XU*8*222
Package : XU - KERNEL                          Priority: Mandatory
Version : 8       SEQ #222                       Status: Released
=============================================================================

Associated patches: (v)XU*8*132    <<= must be installed BEFORE `XU*8*222'
                    (v)XU*8*157    <<= must be installed BEFORE `XU*8*222'
                    (v)XU*8*208    <<= must be installed BEFORE `XU*8*222'
                    (v)XU*8*210    <<= must be installed BEFORE `XU*8*222'

Subject: 7 NOIS and 2 E3R fix.

Category: 
  - Routine
  - Other

Description: 
============

 Patch Tracking # 34359040
 Test Sites:  VISN2, MONTANA HCS, BRONX, NY
 Blood Bank Clearance: 4/12/2002
 
 NOIS: BRX-1101-10448
 Problem: The CPRS Parameter information that is viewable from User Inquiry 
 is not useful. The package defaults are shown for users that do not have 
 specific CPRS entries. This made it confusing as to what users had 
 special/non-standard set-ups.
 Fix: The call is changed to show only entries specific to the user.
 
 NOIS: MON-0502-51250
 Problem: Some combinations of security keys would not wrap correctly.  If 
 sent to a device that didn't wrap, the data was not printed and it looked 
 like the user did not have all the security keys.
 Fix: Correct the print routine in XUSER1.
 
 NOIS: DUB-0901-31382, FAV-0801-71737
 Problem: The option "Output routines", "Input Routines" get a 'noroutine' 
 error on Cache
 Fix: Add cache to the list of both options.
 
 NOIS: FAV-0801-70005 and BHH-0801-41538
 Problem: The TaskMan cleanup routine XUTMK failed to delete a local 
 variable in a loop and if there were sufficient data it would cause a 
 STORE error.
 Fix: Kill the local variable in the loop.
 
 NOIS: NTH-0601-72360
 Problem: When a user had the DISUSER flag set by the "XUAUTODEACTIVATE" 
 scheduled task, the user could still access old "Continue" options.
 Fix: When the "XUAUTODEACTIVATE" sets the DISUSER flag it will remove the 
 "Last Option" entry from file 200, if the users Primary or Secondary menu
 is changed the "Last Option" entry will also be removed.
 
 NOIS: UNY-0102-10313
 Problem: If the DISUSER flag was deleted instead of changed to NO then the 
 trigger on this field would not run to set today's date into field 202.04.
 Fix: Add a DELETE code to the cross reference.
 
 E3R: 14828 and 14829
 Request: "Noticed that the routine MANUAL^XUINPCH2 contained in patch 
 XU*8.0*159, did the clean up on terminated users by stuffing an expiration 
 date on the person class code.  Will this feature be added to the 
 XUSERDEACT option under User Management, so future deactivations on users 
 will stuff a date in the expiration date field for person class code?"
 Fix: Added to the XUSTERM routine to set an expiration date for the person 
 class.
 
 NOIS: ISL-0499-52452
 Problem: Parameter entries in file 8989.5 for an individual user are not 
 deleted when the user is terminated.
 Fix: Added to XUSTERM a call to a new entry point DELUSR^XPAR3.  This fix 
 will need patch XT*7.3*60 to start working.
 
 
 Routine Summary
 The following routines are included in this patch.  The second line of each
 of these routines now looks like:
  ;;8.0;KERNEL;**[Patch List]**;Jul 10, 1995
 
                  Checksum
 Routine         Old       New      Patch List
 XUA4A72       4512567   4721844    **27,49,74,132,222**
 XUSER1        3013639   3009596    **169,210,222**
 XUSTERM      14433091  14576706    **36,73,135,148,169,222**
 XUSTERM1     12346209  11610883    **102,180,208,222**
 XUTMK         8630418   8719089    **49,67,118,169,222**
 
 List of preceding patches: 132, 208, 210
 Sites should use CHECK^XTSUMBLD to verify checksums.
 
 =========================================================================
 Installation:
 
 >>>Users may remain on the system.
 >>>TaskMan does *not* need to be stopped.
 
   1.  DSM sites - Some of these routines are usually mapped,
       so you will need to disable mapping for the affected routines.
 
   2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.
 
   3.  The patch has now been loaded into a Transport global on your
       system. You now need to use KIDS to install the Transport global.
       On the KIDS menu, under the 'Installation' menu, use the following
       options:
 
          Verify Checksums in Transport Global
          Print Transport Global
          Compare Transport Global to Current System
          Backup a Transport Global
 
   4.  Users can remain on the system. 
       TaskMan can remain running.
 
   5.  On the KIDS menu, under the 'Installation' menu, use the following
       option:
         Install Package(s)  'XU*8.0*222'
                              ==========
 
     Want KIDS to Rebuild Menu Trees Upon Completion of Install? YES// YES
         
     Want KIDS to INHIBIT LOGONs during the install? YES// YES
 
     Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// YES
      option: XUSERINQ (User Inquiry)
 
   6.  DSM Sites, after patch has installed, rebuild your map set.
 
 =========================================================================
  

Routine Information:
====================

Routine Name:
  - XUA4A72


Routine Checksum:

Routine Name:
  - XUSER1


Routine Checksum:

Routine Name:
  - XUSTERM


Routine Checksum:

Routine Name:
  - XUSTERM1


Routine Checksum:

Routine Name:
  - XUTMK


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : FORT,WALLY                     Date Entered : JAN 24, 2002
Completed By: SINGH,GURBIR                  Date Completed: NOV 14, 2002
Released By : TILLIS,LEWIS                  Date Released : NOV 22, 2002
=============================================================================


Packman Mail Message:
=====================

$END TXT

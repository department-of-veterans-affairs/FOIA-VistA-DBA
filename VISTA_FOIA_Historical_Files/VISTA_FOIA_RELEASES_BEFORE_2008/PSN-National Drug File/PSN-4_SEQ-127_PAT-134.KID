Released PSN*4*134 SEQ #127
Extracted from mail message
**KIDS**:PSN*4.0*134^

**INSTALL NAME**
PSN*4.0*134
"BLD",971,0)
PSN*4.0*134^NATIONAL DRUG FILE^0^3070329^y
"BLD",971,1,0)
^^13^13^3070305^^^^
"BLD",971,1,1,0)
 
"BLD",971,1,2,0)
The option Enter/Edit Local Drug Interaction [PSS INTERACTION LOCAL ADD]
"BLD",971,1,3,0)
allows sites to make local entries in the DRUG INTERACTION file (#56).
"BLD",971,1,4,0)
When this option is invoked a message is sent to the mail group
"BLD",971,1,5,0)
G.NDF SUPPORT@ISCPNDF.ISC-BIRM.VA.GOV.  During the period 26 October 2006
"BLD",971,1,6,0)
through 27 February 2007, a problem with the network configuration caused
"BLD",971,1,7,0)
these messages not to be transmitted.  This problem has been corrected.
"BLD",971,1,8,0)
This patch transmits a list of all interactions that were entered locally
"BLD",971,1,9,0)
during that time period.  That list is also send to members of the
"BLD",971,1,10,0)
NDF DATA mail group, holders of the PSNMGR security key, and the
"BLD",971,1,11,0)
installer of the patch.
"BLD",971,1,12,0)
NOTE: The message is not sent across the network from a test account.  It
"BLD",971,1,13,0)
is sent only to local recipients.
"BLD",971,4,0)
^9.64PA^^
"BLD",971,6.3)
19
"BLD",971,"INID")
y^y
"BLD",971,"INIT")
PSN134P
"BLD",971,"KRN",0)
^9.67PA^8989.52^19
"BLD",971,"KRN",.4,0)
.4
"BLD",971,"KRN",.401,0)
.401
"BLD",971,"KRN",.402,0)
.402
"BLD",971,"KRN",.403,0)
.403
"BLD",971,"KRN",.5,0)
.5
"BLD",971,"KRN",.84,0)
.84
"BLD",971,"KRN",3.6,0)
3.6
"BLD",971,"KRN",3.8,0)
3.8
"BLD",971,"KRN",9.2,0)
9.2
"BLD",971,"KRN",9.8,0)
9.8
"BLD",971,"KRN",19,0)
19
"BLD",971,"KRN",19.1,0)
19.1
"BLD",971,"KRN",101,0)
101
"BLD",971,"KRN",409.61,0)
409.61
"BLD",971,"KRN",771,0)
771
"BLD",971,"KRN",870,0)
870
"BLD",971,"KRN",8989.51,0)
8989.51
"BLD",971,"KRN",8989.52,0)
8989.52
"BLD",971,"KRN",8994,0)
8994
"BLD",971,"KRN","B",.4,.4)

"BLD",971,"KRN","B",.401,.401)

"BLD",971,"KRN","B",.402,.402)

"BLD",971,"KRN","B",.403,.403)

"BLD",971,"KRN","B",.5,.5)

"BLD",971,"KRN","B",.84,.84)

"BLD",971,"KRN","B",3.6,3.6)

"BLD",971,"KRN","B",3.8,3.8)

"BLD",971,"KRN","B",9.2,9.2)

"BLD",971,"KRN","B",9.8,9.8)

"BLD",971,"KRN","B",19,19)

"BLD",971,"KRN","B",19.1,19.1)

"BLD",971,"KRN","B",101,101)

"BLD",971,"KRN","B",409.61,409.61)

"BLD",971,"KRN","B",771,771)

"BLD",971,"KRN","B",870,870)

"BLD",971,"KRN","B",8989.51,8989.51)

"BLD",971,"KRN","B",8989.52,8989.52)

"BLD",971,"KRN","B",8994,8994)

"BLD",971,"PRE")
PSN134E
"BLD",971,"QUES",0)
^9.62^^
"INIT")
PSN134P
"MBREQ")
0
"PKG",114,-1)
1^1
"PKG",114,0)
NATIONAL DRUG FILE^PSN^This is the National Drug File Package V 4
"PKG",114,20,0)
^9.402P^^
"PKG",114,22,0)
^9.49I^1^1
"PKG",114,22,1,0)
4.0^3041105
"PKG",114,22,1,"PAH",1,0)
134^3070329
"PKG",114,22,1,"PAH",1,1,0)
^^13^13^3070329
"PKG",114,22,1,"PAH",1,1,1,0)
 
"PKG",114,22,1,"PAH",1,1,2,0)
The option Enter/Edit Local Drug Interaction [PSS INTERACTION LOCAL ADD]
"PKG",114,22,1,"PAH",1,1,3,0)
allows sites to make local entries in the DRUG INTERACTION file (#56).
"PKG",114,22,1,"PAH",1,1,4,0)
When this option is invoked a message is sent to the mail group
"PKG",114,22,1,"PAH",1,1,5,0)
G.NDF SUPPORT@ISCPNDF.ISC-BIRM.VA.GOV.  During the period 26 October 2006
"PKG",114,22,1,"PAH",1,1,6,0)
through 27 February 2007, a problem with the network configuration caused
"PKG",114,22,1,"PAH",1,1,7,0)
these messages not to be transmitted.  This problem has been corrected.
"PKG",114,22,1,"PAH",1,1,8,0)
This patch transmits a list of all interactions that were entered locally
"PKG",114,22,1,"PAH",1,1,9,0)
during that time period.  That list is also send to members of the
"PKG",114,22,1,"PAH",1,1,10,0)
NDF DATA mail group, holders of the PSNMGR security key, and the
"PKG",114,22,1,"PAH",1,1,11,0)
installer of the patch.
"PKG",114,22,1,"PAH",1,1,12,0)
NOTE: The message is not sent across the network from a test account.  It
"PKG",114,22,1,"PAH",1,1,13,0)
is sent only to local recipients.
"PRE")
PSN134E
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PSN134E")
0^^B251861^n/a
"RTN","PSN134E",1,0)
PSN134E ;BIR/DMA-environment check ; 23 Feb 2007  7:58 AM
"RTN","PSN134E",2,0)
 ;;4.0; NATIONAL DRUG FILE;**134**; 30 Oct 98;Build 19
"RTN","PSN134E",3,0)
 I $D(DUZ)#2 N DIC,X,Y S DIC=200,DIC(0)="N",X="`"_DUZ D ^DIC I Y>0
"RTN","PSN134E",4,0)
 E  W !!,"You must be a valid user." S XPDQUIT=2
"RTN","PSN134E",5,0)
 Q
"RTN","PSN134P")
0^^B7409576^n/a
"RTN","PSN134P",1,0)
PSN134P ;BIR/DMA-find interactions that weren't sent ; 29 Mar 2007  11:39 AM
"RTN","PSN134P",2,0)
 ;;4.0; NATIONAL DRUG FILE;**134**; 30 Oct 98;Build 19
"RTN","PSN134P",3,0)
 ;
"RTN","PSN134P",4,0)
 ;Reads to the AUDIT file (#1.1), ^DIA, supported by DBIA #2602
"RTN","PSN134P",5,0)
 ;
"RTN","PSN134P",6,0)
 N HERE,LINE,PSN,PSN1,PSN2,PSN3,PSN4,PSNIIEN,PSNFLTY,XMDUZ,XMSUB,XMTEXT,XMY,Y
"RTN","PSN134P",7,0)
 S LINE=6 K HERE
"RTN","PSN134P",8,0)
 S PSNIIEN=$$KSP^XUPARAM("INST"),PSNFLTY=$$GET1^DIQ(4,PSNIIEN,.01)
"RTN","PSN134P",9,0)
 S PSN=$Q(^DIA(56,"C",3061026)) I $QS(PSN,2)'="C" S HERE(1,0)="There were no interactions created at "_PSNFLTY_" after 26 October 2006." G SEND
"RTN","PSN134P",10,0)
 S PSN=$QS(PSN,4) F  S PSN=$O(^DIA(56,PSN)) Q:'PSN  S PSN1=^(PSN,0) I $P(PSN1,"^",5)="A",PSN1>14999 Q
"RTN","PSN134P",11,0)
 I 'PSN S HERE(1,0)="There were no interactions created at "_PSNFLTY_" after 26 October 2006." G SEND
"RTN","PSN134P",12,0)
 S PSN1=+PSN1-1 F  S PSN1=$O(^PS(56,PSN1)) Q:'PSN1  S PSN2=^(PSN1,0),PSN3=$P(PSN2,"^"),PSN4=$P(PSN2,"^",4),$E(PSN3,70)=" "_$S(PSN4=1:"Crit",1:"Signif"),HERE(LINE,0)=PSN3,LINE=LINE+1
"RTN","PSN134P",13,0)
  I '$D(HERE) S HERE(1,0)="There were no interactions created at "_PSNFLTY_" after 26 October 2006." G SEND
"RTN","PSN134P",14,0)
 S HERE(1,0)="The following interactions were created at "_PSNFLTY_" after 26 October 2006.",HERE(2,0)=" ",HERE(3,0)="INTERACTION",$E(HERE(3,0),70)="SEVERITY",HERE(4,0)="===========",$E(HERE(4,0),70)="========",HERE(5,0)=" "
"RTN","PSN134P",15,0)
 ;
"RTN","PSN134P",16,0)
SEND ;
"RTN","PSN134P",17,0)
 S XMDUZ=DUZ K XMY
"RTN","PSN134P",18,0)
 X ^%ZOSF("UCI") S PSN=^%ZOSF("PROD") S:PSN'["," Y=$P(Y,",") I Y=PSN S XMY("G.NDF SUPPORT@ISCPNDF.FO-BIRM.MED.VA.GOV")=""
"RTN","PSN134P",19,0)
 S XMY("G.NDF DATA@"_^XMB("NETNAME"))=""
"RTN","PSN134P",20,0)
 S PSN=0 F  S PSN=$O(^XUSEC("PSNMGR",PSN)) Q:'PSN  S XMY(PSN)=""
"RTN","PSN134P",21,0)
 I $D(DUZ) S XMY(DUZ)=""
"RTN","PSN134P",22,0)
 S XMSUB="Local Drug Interactions Added at "_PSNFLTY_" since 26 Oct 2006."
"RTN","PSN134P",23,0)
 S XMTEXT="HERE(" N DIFROM D ^XMD
"RTN","PSN134P",24,0)
QUIT K HERE,LINE,PSN,PSN1,PSN2,PSN3,PSN4,PSNIIEN,PSNFLTY,XMDUZ,XMSUB,XMTEXT,XMY,Y
"VER")
8.0^22.0
"BLD",971,6)
^127
**END**
**END**

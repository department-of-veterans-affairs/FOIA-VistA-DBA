KIDS Distribution saved on Jul 22, 1998@10:37:26
SAGG PROJECT 1.8
**KIDS**:SAGG PROJECT 1.8^

**INSTALL NAME**
SAGG PROJECT 1.8
"BLD",93,0)
SAGG PROJECT 1.8^SAGG PROJECT^0^2980722^y
"BLD",93,1,0)
^^23^23^2980722^
"BLD",93,1,1,0)
This KIDS distribution contains Statistical Analysis of Global Growth
"BLD",93,1,2,0)
(SAGG) version 1.8.  This version of SAGG can be installed over any
"BLD",93,1,3,0)
previous versions of SAGG without any adverse problems.
"BLD",93,1,4,0)
 
"BLD",93,1,5,0)
All DSM, MSM and OpenM-NT sites are instructed to install this
"BLD",93,1,6,0)
distribution.  Sites which had a pre-release of SAGG v 1.8 should also
"BLD",93,1,7,0)
install this distribution.
"BLD",93,1,8,0)
 
"BLD",93,1,9,0)
This distribution is dependent on the previous installation of Kernel
"BLD",93,1,10,0)
Patch XU*8.0*90.  If this distribution detects that the patch is not
"BLD",93,1,11,0)
installed at your site, the installation process will stop.  If this
"BLD",93,1,12,0)
occurs, you will need to obtain and install Kernel Patch XU*8.0*90 and
"BLD",93,1,13,0)
then you may begin the installation of this product.  The SAGG Project 
"BLD",93,1,14,0)
v 1.8 package will utilize the %ZOSVKS-namespace routines that were
"BLD",93,1,15,0)
installed with Kernel Patch XU*8.0*90.
"BLD",93,1,16,0)
 
"BLD",93,1,17,0)
This distribution will move SAGG from the A1B5 namespace into the KMPS
"BLD",93,1,18,0)
namespace.  The data within the old SAGG PROJECT file (#11120) will be
"BLD",93,1,19,0)
moved into new SAGG PROJECT file (#8970.1).  The old file, routines,
"BLD",93,1,20,0)
options and mail group will be deleted.
"BLD",93,1,21,0)
 
"BLD",93,1,22,0)
The 'SAGG Project Manager' menu [KMPS SAGG MANAGER] will be added to the
"BLD",93,1,23,0)
'Capacity Management' [XTCM MAIN] menu.
"BLD",93,4,0)
^9.64PA^8970.1^1
"BLD",93,4,8970.1,0)
8970.1
"BLD",93,4,8970.1,222)
y^y^f^^^^n
"BLD",93,4,"B",8970.1,8970.1)

"BLD",93,"ABPKG")
n
"BLD",93,"INI")
KMPSPRE
"BLD",93,"INIT")
KMPSPST
"BLD",93,"KRN",0)
^9.67PA^19^15
"BLD",93,"KRN",.4,0)
.4
"BLD",93,"KRN",.401,0)
.401
"BLD",93,"KRN",.402,0)
.402
"BLD",93,"KRN",.403,0)
.403
"BLD",93,"KRN",.5,0)
.5
"BLD",93,"KRN",.84,0)
.84
"BLD",93,"KRN",3.6,0)
3.6
"BLD",93,"KRN",3.8,0)
3.8
"BLD",93,"KRN",3.8,"NM",0)
^9.68A^1^1
"BLD",93,"KRN",3.8,"NM",1,0)
KMPS-SAGG^^0
"BLD",93,"KRN",3.8,"NM","B","KMPS-SAGG",1)

"BLD",93,"KRN",9.2,0)
9.2
"BLD",93,"KRN",9.8,0)
9.8
"BLD",93,"KRN",9.8,"NM",0)
^9.68A^37^30
"BLD",93,"KRN",9.8,"NM",1)
^^^
"BLD",93,"KRN",9.8,"NM",1,0)
A1B5GE^^1^
"BLD",93,"KRN",9.8,"NM",2)
^^^
"BLD",93,"KRN",9.8,"NM",2,0)
A1B5GEM^^1^
"BLD",93,"KRN",9.8,"NM",3)
^^^
"BLD",93,"KRN",9.8,"NM",3,0)
A1B5GEP^^1^
"BLD",93,"KRN",9.8,"NM",4)
^^^
"BLD",93,"KRN",9.8,"NM",4,0)
A1B5GEV^^1^
"BLD",93,"KRN",9.8,"NM",5)
^^^
"BLD",93,"KRN",9.8,"NM",5,0)
A1B5GSM^^1^
"BLD",93,"KRN",9.8,"NM",6)
^^^
"BLD",93,"KRN",9.8,"NM",6,0)
A1B5GSP^^1^
"BLD",93,"KRN",9.8,"NM",7)
^^^
"BLD",93,"KRN",9.8,"NM",7,0)
A1B5GSV^^1^
"BLD",93,"KRN",9.8,"NM",8)
^^^
"BLD",93,"KRN",9.8,"NM",8,0)
A1B5LK^^1^
"BLD",93,"KRN",9.8,"NM",9)
^^^
"BLD",93,"KRN",9.8,"NM",9,0)
A1B5LOAD^^1^
"BLD",93,"KRN",9.8,"NM",10)
^^^
"BLD",93,"KRN",9.8,"NM",10,0)
A1B5NTEG^^1^
"BLD",93,"KRN",9.8,"NM",11)
^^^
"BLD",93,"KRN",9.8,"NM",11,0)
A1B5POST^^1^
"BLD",93,"KRN",9.8,"NM",12)
^^^
"BLD",93,"KRN",9.8,"NM",12,0)
A1B5UTL^^1^
"BLD",93,"KRN",9.8,"NM",13,0)
KMPSENV^^0^B59169
"BLD",93,"KRN",9.8,"NM",15,0)
KMPSGE^^0^B30548621
"BLD",93,"KRN",9.8,"NM",16,0)
KMPSLK^^0^B24362469
"BLD",93,"KRN",9.8,"NM",17,0)
KMPSLOAD^^0^B564565
"BLD",93,"KRN",9.8,"NM",18,0)
KMPSPRE^^0^B1810739
"BLD",93,"KRN",9.8,"NM",19,0)
KMPSPST^^0^B24912282
"BLD",93,"KRN",9.8,"NM",20,0)
KMPSUTL^^0^B25267014
"BLD",93,"KRN",9.8,"NM",27)
^^^
"BLD",93,"KRN",9.8,"NM",27,0)
A1B5I001^^1^
"BLD",93,"KRN",9.8,"NM",28)
^^^
"BLD",93,"KRN",9.8,"NM",28,0)
A1B5I002^^1^
"BLD",93,"KRN",9.8,"NM",29)
^^^
"BLD",93,"KRN",9.8,"NM",29,0)
A1B5I003^^1^
"BLD",93,"KRN",9.8,"NM",30)
^^^
"BLD",93,"KRN",9.8,"NM",30,0)
A1B5I004^^1^
"BLD",93,"KRN",9.8,"NM",31)
^^^
"BLD",93,"KRN",9.8,"NM",31,0)
A1B5INI0^^1^
"BLD",93,"KRN",9.8,"NM",32)
^^^
"BLD",93,"KRN",9.8,"NM",32,0)
A1B5INI1^^1^
"BLD",93,"KRN",9.8,"NM",33)
^^^
"BLD",93,"KRN",9.8,"NM",33,0)
A1B5INI2^^1^
"BLD",93,"KRN",9.8,"NM",34)
^^^
"BLD",93,"KRN",9.8,"NM",34,0)
A1B5INI3^^1^
"BLD",93,"KRN",9.8,"NM",35)
^^^
"BLD",93,"KRN",9.8,"NM",35,0)
A1B5INIT^^1^
"BLD",93,"KRN",9.8,"NM",36)
^^^
"BLD",93,"KRN",9.8,"NM",36,0)
A1B5GEI^^1^
"BLD",93,"KRN",9.8,"NM",37)
^^^
"BLD",93,"KRN",9.8,"NM",37,0)
A1B5GSI^^1^
"BLD",93,"KRN",9.8,"NM","B","A1B5GE",1)

"BLD",93,"KRN",9.8,"NM","B","A1B5GEI",36)

"BLD",93,"KRN",9.8,"NM","B","A1B5GEM",2)

"BLD",93,"KRN",9.8,"NM","B","A1B5GEP",3)

"BLD",93,"KRN",9.8,"NM","B","A1B5GEV",4)

"BLD",93,"KRN",9.8,"NM","B","A1B5GSI",37)

"BLD",93,"KRN",9.8,"NM","B","A1B5GSM",5)

"BLD",93,"KRN",9.8,"NM","B","A1B5GSP",6)

"BLD",93,"KRN",9.8,"NM","B","A1B5GSV",7)

"BLD",93,"KRN",9.8,"NM","B","A1B5I001",27)

"BLD",93,"KRN",9.8,"NM","B","A1B5I002",28)

"BLD",93,"KRN",9.8,"NM","B","A1B5I003",29)

"BLD",93,"KRN",9.8,"NM","B","A1B5I004",30)

"BLD",93,"KRN",9.8,"NM","B","A1B5INI0",31)

"BLD",93,"KRN",9.8,"NM","B","A1B5INI1",32)

"BLD",93,"KRN",9.8,"NM","B","A1B5INI2",33)

"BLD",93,"KRN",9.8,"NM","B","A1B5INI3",34)

"BLD",93,"KRN",9.8,"NM","B","A1B5INIT",35)

"BLD",93,"KRN",9.8,"NM","B","A1B5LK",8)

"BLD",93,"KRN",9.8,"NM","B","A1B5LOAD",9)

"BLD",93,"KRN",9.8,"NM","B","A1B5NTEG",10)

"BLD",93,"KRN",9.8,"NM","B","A1B5POST",11)

"BLD",93,"KRN",9.8,"NM","B","A1B5UTL",12)

"BLD",93,"KRN",9.8,"NM","B","KMPSENV",13)

"BLD",93,"KRN",9.8,"NM","B","KMPSGE",15)

"BLD",93,"KRN",9.8,"NM","B","KMPSLK",16)

"BLD",93,"KRN",9.8,"NM","B","KMPSLOAD",17)

"BLD",93,"KRN",9.8,"NM","B","KMPSPRE",18)

"BLD",93,"KRN",9.8,"NM","B","KMPSPST",19)

"BLD",93,"KRN",9.8,"NM","B","KMPSUTL",20)

"BLD",93,"KRN",19,0)
19
"BLD",93,"KRN",19,"NM",0)
^9.68A^13^13
"BLD",93,"KRN",19,"NM",1)
^^^
"BLD",93,"KRN",19,"NM",1,0)
A1B5 SAGG FILE^^1
"BLD",93,"KRN",19,"NM",2)
^^^
"BLD",93,"KRN",19,"NM",2,0)
A1B5 SAGG MAIL^^1
"BLD",93,"KRN",19,"NM",3)
^^^
"BLD",93,"KRN",19,"NM",3,0)
A1B5 SAGG MANAGER^^1
"BLD",93,"KRN",19,"NM",4)
^^^
"BLD",93,"KRN",19,"NM",4,0)
A1B5 SAGG REPORT^^1
"BLD",93,"KRN",19,"NM",5)
^^^
"BLD",93,"KRN",19,"NM",5,0)
A1B5 SAGG STATUS^^1
"BLD",93,"KRN",19,"NM",6)
^^^
"BLD",93,"KRN",19,"NM",6,0)
A1B5 SAGG STOP^^1
"BLD",93,"KRN",19,"NM",7,0)
KMPS SAGG FILE^^0
"BLD",93,"KRN",19,"NM",8,0)
KMPS SAGG MAIL^^0
"BLD",93,"KRN",19,"NM",9,0)
KMPS SAGG MANAGER^^0
"BLD",93,"KRN",19,"NM",10,0)
KMPS SAGG REPORT^^0
"BLD",93,"KRN",19,"NM",11,0)
KMPS SAGG STATUS^^0
"BLD",93,"KRN",19,"NM",12,0)
KMPS SAGG STOP^^0
"BLD",93,"KRN",19,"NM",13,0)
XTCM MAIN^^3
"BLD",93,"KRN",19,"NM","B","A1B5 SAGG FILE",1)

"BLD",93,"KRN",19,"NM","B","A1B5 SAGG MAIL",2)

"BLD",93,"KRN",19,"NM","B","A1B5 SAGG MANAGER",3)

"BLD",93,"KRN",19,"NM","B","A1B5 SAGG REPORT",4)

"BLD",93,"KRN",19,"NM","B","A1B5 SAGG STATUS",5)

"BLD",93,"KRN",19,"NM","B","A1B5 SAGG STOP",6)

"BLD",93,"KRN",19,"NM","B","KMPS SAGG FILE",7)

"BLD",93,"KRN",19,"NM","B","KMPS SAGG MAIL",8)

"BLD",93,"KRN",19,"NM","B","KMPS SAGG MANAGER",9)

"BLD",93,"KRN",19,"NM","B","KMPS SAGG REPORT",10)

"BLD",93,"KRN",19,"NM","B","KMPS SAGG STATUS",11)

"BLD",93,"KRN",19,"NM","B","KMPS SAGG STOP",12)

"BLD",93,"KRN",19,"NM","B","XTCM MAIN",13)

"BLD",93,"KRN",19.1,0)
19.1
"BLD",93,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",93,"KRN",101,0)
101
"BLD",93,"KRN",409.61,0)
409.61
"BLD",93,"KRN",771,0)
771
"BLD",93,"KRN","B",.4,.4)

"BLD",93,"KRN","B",.401,.401)

"BLD",93,"KRN","B",.402,.402)

"BLD",93,"KRN","B",.403,.403)

"BLD",93,"KRN","B",.5,.5)

"BLD",93,"KRN","B",.84,.84)

"BLD",93,"KRN","B",3.6,3.6)

"BLD",93,"KRN","B",3.8,3.8)

"BLD",93,"KRN","B",9.2,9.2)

"BLD",93,"KRN","B",9.8,9.8)

"BLD",93,"KRN","B",19,19)

"BLD",93,"KRN","B",19.1,19.1)

"BLD",93,"KRN","B",101,101)

"BLD",93,"KRN","B",409.61,409.61)

"BLD",93,"KRN","B",771,771)

"BLD",93,"PRE")
KMPSENV
"BLD",93,"QUES",0)
^9.62^2^2
"BLD",93,"QUES",1,0)
POSKMPS1
"BLD",93,"QUES",1,1)
F^2:9^K:X'?.U X
"BLD",93,"QUES",1,"A")
Specify the Volume Set which will hold the ^XTMP global
"BLD",93,"QUES",1,"M")
I $G(^%ZOSF("OS"))["OpenM-NT" K DIR
"BLD",93,"QUES",1,"Q")
Input name (2-9 UPPER characters) of the Volume Set where the XTMP global is located.
"BLD",93,"QUES",2,0)
POSKMPS2
"BLD",93,"QUES",2,1)
F^2:9^K:X'?.U X
"BLD",93,"QUES",2,"A")
Specify the UCI which will hold the ^XTMP global
"BLD",93,"QUES",2,"M")
I $G(^%ZOSF("OS"))["OpenM-NT" K DIR
"BLD",93,"QUES",2,"Q")
Input name (2-9 UPPER characters) of UCI where the XTMP global is located.
"BLD",93,"QUES","B","POSKMPS1",1)

"BLD",93,"QUES","B","POSKMPS2",2)

"BLD",93,"REQB",0)
^9.611^1^1
"BLD",93,"REQB",1,0)
XU*8.0*90^2
"BLD",93,"REQB","B","XU*8.0*90",1)

"FIA",8970.1)
SAGG PROJECT
"FIA",8970.1,0)
^KMPS(8970.1,
"FIA",8970.1,0,0)
8970.1
"FIA",8970.1,0,1)
y^y^f^^^^n
"FIA",8970.1,0,10)

"FIA",8970.1,0,11)

"FIA",8970.1,0,"RLRO")

"FIA",8970.1,0,"VR")
1.8^SAGG PROJECT
"FIA",8970.1,8970.1)
0
"FIA",8970.1,8970.11)
0
"INI")
KMPSPRE
"INIT")
KMPSPST
"KRN",3.8,442,-1)
0^1
"KRN",3.8,442,0)
KMPS-SAGG^PU^n^^^0^
"KRN",3.8,442,2,0)
^^1^1^2980319^^^^
"KRN",3.8,442,2,1,0)
This mail group will receive the automated SAGG Reports.
"KRN",3.8,442,3)

"KRN",19,6143,-1)
0^10
"KRN",19,6143,0)
KMPS SAGG REPORT^SAGG Master Background Task^^R^^^^^^^^
"KRN",19,6143,1,0)
^^4^4^2980310^^^
"KRN",19,6143,1,1,0)
Scheduled by TaskMan to start the SAGG (Statistical Analysis of Global
"KRN",19,6143,1,2,0)
Growth) Project's master routine as a background job.  This option should
"KRN",19,6143,1,3,0)
be rescheduled to run every 28 days to insure running on the same
"KRN",19,6143,1,4,0)
'day-of-week'.
"KRN",19,6143,25)
KMPSGE
"KRN",19,6143,99)
55417,59571
"KRN",19,6143,200.9)
y^y
"KRN",19,6143,"U")
SAGG MASTER BACKGROUND TASK
"KRN",19,6819,-1)
3^13
"KRN",19,6819,0)
XTCM MAIN^Capacity Management^^M^^^^^^^^TOOLKIT
"KRN",19,6819,1,0)
^^2^2^2931216^
"KRN",19,6819,1,1,0)
This menu holds all the currently available capacity management
"KRN",19,6819,1,2,0)
functions.
"KRN",19,6819,10,0)
^19.01PI^9^9
"KRN",19,6819,10,9,0)
7312
"KRN",19,6819,10,9,"^")
KMPS SAGG MANAGER
"KRN",19,6819,99)
57460,47632
"KRN",19,6819,99.1)
55707,82829
"KRN",19,6819,"U")
CAPACITY MANAGEMENT
"KRN",19,7309,-1)
0^8
"KRN",19,7309,0)
KMPS SAGG MAIL^Edit KMPS-SAGG Mail Group^^R^^^^^^^^
"KRN",19,7309,1,0)
^^2^2^2980304^
"KRN",19,7309,1,1,0)
This option will allow you to edit the KMPS-SAGG (Statistical Analysis of
"KRN",19,7309,1,2,0)
Global Growth) Mail Group.
"KRN",19,7309,25)
MAIL^KMPSUTL
"KRN",19,7309,"U")
EDIT KMPS-SAGG MAIL GROUP
"KRN",19,7310,-1)
0^11
"KRN",19,7310,0)
KMPS SAGG STATUS^Status of SAGG Collection Routines^^R^^^^^^^^
"KRN",19,7310,1,0)
^^2^2^2980304^
"KRN",19,7310,1,1,0)
This option will display the current status of the SAGG (Statistical
"KRN",19,7310,1,2,0)
Analysis of Global Growth) Project routines.
"KRN",19,7310,25)
STAT^KMPSUTL
"KRN",19,7310,"U")
STATUS OF SAGG COLLECTION ROUT
"KRN",19,7311,-1)
0^12
"KRN",19,7311,0)
KMPS SAGG STOP^Stop SAGG Collection^^R^^^^^^^^
"KRN",19,7311,1,0)
^^4^4^2980304^
"KRN",19,7311,1,1,0)
This option will inform the SAGG (Statistical Analysis of Global Growth)
"KRN",19,7311,1,2,0)
Project collection routines to begin an orderly shut-down process.  Each
"KRN",19,7311,1,3,0)
collection routine will then stop after reaching an appropriate
"KRN",19,7311,1,4,0)
'break-point'.
"KRN",19,7311,25)
STOP^KMPSUTL
"KRN",19,7311,"U")
STOP SAGG COLLECTION
"KRN",19,7312,-1)
0^9
"KRN",19,7312,0)
KMPS SAGG MANAGER^SAGG Project Manager Menu^^M^^^^^^^^
"KRN",19,7312,1,0)
^^2^2^2980304^^
"KRN",19,7312,1,1,0)
This menu will help the site to manage the SAGG (Statistical Analysis of
"KRN",19,7312,1,2,0)
Global Growth) Project.
"KRN",19,7312,10,0)
^19.01IP^4^4
"KRN",19,7312,10,1,0)
7310^SS
"KRN",19,7312,10,1,"^")
KMPS SAGG STATUS
"KRN",19,7312,10,2,0)
7311^SP
"KRN",19,7312,10,2,"^")
KMPS SAGG STOP
"KRN",19,7312,10,3,0)
7313^EF
"KRN",19,7312,10,3,"^")
KMPS SAGG FILE
"KRN",19,7312,10,4,0)
7309^EM
"KRN",19,7312,10,4,"^")
KMPS SAGG MAIL
"KRN",19,7312,99)
57460,47632
"KRN",19,7312,"U")
SAGG PROJECT MANAGER MENU
"KRN",19,7313,-1)
0^7
"KRN",19,7313,0)
KMPS SAGG FILE^Edit SAGG Project File^^R^^^^^^^^
"KRN",19,7313,1,0)
^^2^2^2980304^
"KRN",19,7313,1,1,0)
This option will allow you to edit the SAGG (Statistical Analysis of
"KRN",19,7313,1,2,0)
Global Growth) PROJECT file.
"KRN",19,7313,25)
FILE^KMPSUTL
"KRN",19,7313,"U")
EDIT SAGG PROJECT FILE
"KRN",19,7321,-1)
1^1
"KRN",19,7321,0)
A1B5 SAGG FILE
"KRN",19,7322,-1)
1^2
"KRN",19,7322,0)
A1B5 SAGG MAIL
"KRN",19,7323,-1)
1^3
"KRN",19,7323,0)
A1B5 SAGG MANAGER
"KRN",19,7324,-1)
1^4
"KRN",19,7324,0)
A1B5 SAGG REPORT
"KRN",19,7325,-1)
1^5
"KRN",19,7325,0)
A1B5 SAGG STATUS
"KRN",19,7326,-1)
1^6
"KRN",19,7326,0)
A1B5 SAGG STOP
"ORD",0,9.8)
9.8;;1;RTNF^XPDTA;RTNE^XPDTA
"ORD",0,9.8,0)
ROUTINE
"ORD",11,3.8)
3.8;11;;;MAILG^XPDTA1;MAILGF1^XPDIA1;MAILGE1^XPDIA1;MAILGF2^XPDIA1
"ORD",11,3.8,0)
MAIL GROUP
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",347,-1)
1^1
"PKG",347,0)
SAGG PROJECT^KMPS^SAGG (Statistical Analysis of Global Growth) Project
"PKG",347,1,0)
^^3^3^2980326^^^^
"PKG",347,1,1,0)
The SAGG (Statistical Analysis of Global Growth) Project will produce data
"PKG",347,1,2,0)
enabling all VAMCs and IRMFOs to make various statistical analysis studies
"PKG",347,1,3,0)
of global growth patterns within the DHCP environment.
"PKG",347,5)
ALBANY IRMFO
"PKG",347,7)
ALBANY IRMFO^^I
"PKG",347,20,0)
^9.402P^^
"PKG",347,22,0)
^9.49I^1^1
"PKG",347,22,1,0)
1.8^2980722^2980427^576
"PKG",347,22,1,1,0)
^^23^23^2980722
"PKG",347,22,1,1,1,0)
This KIDS distribution contains Statistical Analysis of Global Growth
"PKG",347,22,1,1,2,0)
(SAGG) version 1.8.  This version of SAGG can be installed over any
"PKG",347,22,1,1,3,0)
previous versions of SAGG without any adverse problems.
"PKG",347,22,1,1,4,0)
 
"PKG",347,22,1,1,5,0)
All DSM, MSM and OpenM-NT sites are instructed to install this
"PKG",347,22,1,1,6,0)
distribution.  Sites which had a pre-release of SAGG v 1.8 should also
"PKG",347,22,1,1,7,0)
install this distribution.
"PKG",347,22,1,1,8,0)
 
"PKG",347,22,1,1,9,0)
This distribution is dependent on the previous installation of Kernel
"PKG",347,22,1,1,10,0)
Patch XU*8.0*90.  If this distribution detects that the patch is not
"PKG",347,22,1,1,11,0)
installed at your site, the installation process will stop.  If this
"PKG",347,22,1,1,12,0)
occurs, you will need to obtain and install Kernel Patch XU*8.0*90 and
"PKG",347,22,1,1,13,0)
then you may begin the installation of this product.  The SAGG Project 
"PKG",347,22,1,1,14,0)
v 1.8 package will utilize the %ZOSVKS-namespace routines that were
"PKG",347,22,1,1,15,0)
installed with Kernel Patch XU*8.0*90.
"PKG",347,22,1,1,16,0)
 
"PKG",347,22,1,1,17,0)
This distribution will move SAGG from the A1B5 namespace into the KMPS
"PKG",347,22,1,1,18,0)
namespace.  The data within the old SAGG PROJECT file (#11120) will be
"PKG",347,22,1,1,19,0)
moved into new SAGG PROJECT file (#8970.1).  The old file, routines,
"PKG",347,22,1,1,20,0)
options and mail group will be deleted.
"PKG",347,22,1,1,21,0)
 
"PKG",347,22,1,1,22,0)
The 'SAGG Project Manager' menu [KMPS SAGG MANAGER] will be added to the
"PKG",347,22,1,1,23,0)
'Capacity Management' [XTCM MAIN] menu.
"PKG",347,"DEV")
SAGG PROJECT/IRMFO-A
"PKG",347,"VERSION")
1.8
"PRE")
KMPSENV
"QUES","POSKMPS1",0)
F^2:9^K:X'?.U X
"QUES","POSKMPS1","?")
Input name (2-9 UPPER characters) of the Volume Set where the XTMP global is located.
"QUES","POSKMPS1","A")
Specify the Volume Set which will hold the ^XTMP global
"QUES","POSKMPS1","M")
I $G(^%ZOSF("OS"))["OpenM-NT" K DIR
"QUES","POSKMPS2",0)
F^2:9^K:X'?.U X
"QUES","POSKMPS2","?")
Input name (2-9 UPPER characters) of UCI where the XTMP global is located.
"QUES","POSKMPS2","A")
Specify the UCI which will hold the ^XTMP global
"QUES","POSKMPS2","M")
I $G(^%ZOSF("OS"))["OpenM-NT" K DIR
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
30
"RTN","A1B5GE")
1^1
"RTN","A1B5GEI")
1^36
"RTN","A1B5GEM")
1^2
"RTN","A1B5GEP")
1^3
"RTN","A1B5GEV")
1^4
"RTN","A1B5GSI")
1^37
"RTN","A1B5GSM")
1^5
"RTN","A1B5GSP")
1^6
"RTN","A1B5GSV")
1^7
"RTN","A1B5I001")
1^27
"RTN","A1B5I002")
1^28
"RTN","A1B5I003")
1^29
"RTN","A1B5I004")
1^30
"RTN","A1B5INI0")
1^31
"RTN","A1B5INI1")
1^32
"RTN","A1B5INI2")
1^33
"RTN","A1B5INI3")
1^34
"RTN","A1B5INIT")
1^35
"RTN","A1B5LK")
1^8
"RTN","A1B5LOAD")
1^9
"RTN","A1B5NTEG")
1^10
"RTN","A1B5POST")
1^11
"RTN","A1B5UTL")
1^12
"RTN","KMPSENV")
0^13^B59169
"RTN","KMPSENV",1,0)
KMPSENV ;SF/KAK - Environment Check Routine ;04 MAR 98 3:29 pm
"RTN","KMPSENV",2,0)
 ;;1.8;SAGG PROJECT;;Jul 22, 1998
"RTN","KMPSENV",3,0)
 ;
"RTN","KMPSENV",4,0)
EN ;
"RTN","KMPSENV",5,0)
 S:+$G(XPDENV) XPDDIQ("XPZ1","B")="NO"
"RTN","KMPSENV",6,0)
 Q
"RTN","KMPSENV",7,0)
 ;      
"RTN","KMPSGE")
0^15^B30548621
"RTN","KMPSGE",1,0)
KMPSGE ;SF/KAK - Master Routine ;27 AUG 97 1:12 pm
"RTN","KMPSGE",2,0)
 ;;1.8;SAGG PROJECT;;Apr 27, 1998
"RTN","KMPSGE",3,0)
 ;
"RTN","KMPSGE",4,0)
EN ; Routine can only be run as a TaskMan background job
"RTN","KMPSGE",5,0)
 ;
"RTN","KMPSGE",6,0)
 Q:'$D(ZTQUEUED)
"RTN","KMPSGE",7,0)
 S U="^",KMPSX=$P($P(^%ZOSF("OS"),U),"("),KMPSX1=$S(KMPSX="VAX DSM":"VAX",KMPSX="MSM-PC/386":"MSM",KMPSX="MSM-PC/PLUS":"MSMV4",KMPSX="OpenM-NT":"OMNT",1:"ERR")
"RTN","KMPSGE",8,0)
 I KMPSX1="ERR" W !,"SAGG Project for this environment is NOT implemented !",*7,! K KMPSX,KMPSX1 Q
"RTN","KMPSGE",9,0)
 I KMPSX1="MSMV4" I $ZV["Windows NT" S KMPSX1="MSM"
"RTN","KMPSGE",10,0)
 S KMPSMGR=^%ZOSF("MGR"),KMPSPROD=$P(^%ZOSF("PROD"),","),KMPSPROD=$S($P(^KMPS(8970.1,1,0),"^",3)="":KMPSPROD,1:$P(^(0),"^",3))
"RTN","KMPSGE",11,0)
 S KMPSSITE=^DD("SITE",1),KMPSLOC=$P(^KMPS(8970.1,1,0),"^",2) D NOW^%DTC S KMPSDT=%
"RTN","KMPSGE",12,0)
 L +^XTMP("KMPS") S ^XTMP("KMPS",0)=%+10000 K ^XTMP("KMPS",KMPSSITE),^XTMP("KMPS","ERROR"),^XTMP("KMPS","START"),^XTMP("KMPS","STOP") S NUM=+$H,^XTMP("KMPS",KMPSSITE,0)=NUM_U_KMPSX1_U_$P($T(KMPSGE+1),";",3)_U_+$G(^KMPS(8970.1,2,0))
"RTN","KMPSGE",13,0)
 S X="ERR1^KMPSGE",@^%ZOSF("TRAP")
"RTN","KMPSGE",14,0)
 S KMPSTEMP=KMPSSITE_U_NUM_U_KMPSLOC_U_KMPSDT_U_KMPSPROD
"RTN","KMPSGE",15,0)
 S (KMPSSTRT,KMPSVOL)=0 F  S KMPSVOL=$O(^KMPS(8970.1,1,1,"B",KMPSVOL)) Q:KMPSVOL=""!+$G(^XTMP("KMPS","STOP"))  D  D @KMPSX1 S KMPSSTRT=KMPSSTRT+1 I KMPSSTRT=6 D WAIT
"RTN","KMPSGE",16,0)
 .S KMPSUCI=$O(^KMPS(8970.1,1,1,"B",KMPSVOL,0)),KMPSUCI=$P(^KMPS(8970.1,1,1,KMPSUCI,0),U,2)
"RTN","KMPSGE",17,0)
 .S:KMPSUCI="" KMPSUCI=KMPSPROD S KMPSVA(KMPSUCI_","_KMPSVOL)=""
"RTN","KMPSGE",18,0)
LOOK ;
"RTN","KMPSGE",19,0)
 D ZER^KMPSLK
"RTN","KMPSGE",20,0)
LOOP ;
"RTN","KMPSGE",21,0)
 ;  Wait for all volume sets to complete
"RTN","KMPSGE",22,0)
 ;
"RTN","KMPSGE",23,0)
 H 300 I $D(^XTMP("KMPS","START")) G:(+$H<(NUM+3)) LOOP S KMPSTEXT(1)="   The SAGG Project collection routines have been running for more",KMPSTEXT(2)="   than 3 days.  No report has been generated." G MSG^KMPSLK
"RTN","KMPSGE",24,0)
 K KMPSTEXT I $D(^XTMP("KMPS","ERROR")) S KMPSTEXT(1)="   The SAGG Project has recorded an error on volume set(s):" D  G MSG^KMPSLK
"RTN","KMPSGE",25,0)
 .S KMPSX=0,KMPSVOL="" F  S KMPSVOL=$O(^XTMP("KMPS","ERROR",KMPSVOL)) Q:KMPSVOL=""  S:KMPSX KMPSTEXT(3)=KMPSTEXT(3)_"   "_KMPSVOL S:'KMPSX KMPSX=1,KMPSTEXT(3)="      "_KMPSVOL
"RTN","KMPSGE",26,0)
 .S (KMPSTEXT(2),KMPSTEXT(4))="",KMPSTEXT(5)="   See system error log for more details."
"RTN","KMPSGE",27,0)
 .I KMPSX1="OMNT" S KMPSTEXT(6)="",KMPSTEXT(7)="   Also run INTEGRIT on the listed volume(s)."
"RTN","KMPSGE",28,0)
 I $D(^XTMP("KMPS","STOP")) S KMPSTEXT(1)="   The SAGG Project collection routines have been STOPPED!  No report",KMPSTEXT(2)="   has been generated." G MSG^KMPSLK
"RTN","KMPSGE",29,0)
 I '$D(^XTMP("KMPS",KMPSSITE,NUM,KMPSDT)) D  G MSG^KMPSLK
"RTN","KMPSGE",30,0)
 .S KMPSTEXT(1)="   The SAGG Project collection routines did NOT obtain ANY global",KMPSTEXT(2)="   information.  Please ensure that the SAGG PROJECT file is"
"RTN","KMPSGE",31,0)
 .S KMPSTEXT(3)="   properly setup.  Then use the 'One-time Option Queue' under",KMPSTEXT(4)="   Task Manager to re-run the KMPS SAGG REPORT option."
"RTN","KMPSGE",32,0)
 S KMPSX1="" F  S KMPSX1=$O(^XTMP("KMPS",KMPSSITE,NUM,KMPSDT,KMPSX1)) Q:KMPSX1=""  S KMPSX2="" F  S KMPSX2=$O(^XTMP("KMPS",KMPSSITE,NUM,KMPSDT,KMPSX1,KMPSX2)) Q:KMPSX2=""  K KMPSVA(KMPSX2)
"RTN","KMPSGE",33,0)
 S KMPSX1="" F  S KMPSX1=$O(^XTMP("KMPS",KMPSSITE,NUM," NO GLOBALS ",KMPSX1)) Q:KMPSX1=""  K KMPSVA(KMPSX1)
"RTN","KMPSGE",34,0)
 I $D(KMPSVA) S KMPSTEXT(1)="   The SAGG Project collection routines did NOT monitor the following:",KMPSTEXT(2)="" D  G MSG^KMPSLK
"RTN","KMPSGE",35,0)
 .S KMPSX=0,KMPSX1="" F KMPSI=3:1 Q:KMPSX  S KMPSTEXT(KMPSI)="          " F KMPSJ=1:1:5 S KMPSX1=$O(KMPSVA(KMPSX1)) S:KMPSX1="" KMPSX=1 Q:KMPSX1=""  S KMPSTEXT(KMPSI)=KMPSTEXT(KMPSI)_KMPSX1_"   "
"RTN","KMPSGE",36,0)
 .S KMPSTEXT(KMPSI)="",KMPSTEXT(KMPSI+1)="   Please ensure that the SAGG PROJECT file is properly setup.  Then use"
"RTN","KMPSGE",37,0)
 .S KMPSTEXT(KMPSI+2)="   the 'One-time Option Queue' under Task Manager to re-run the KMPS SAGG",KMPSTEXT(KMPSI+3)="   REPORT option."
"RTN","KMPSGE",38,0)
 ;
"RTN","KMPSGE",39,0)
 ;  PackMan ^XTMP global to KMP1-SAGG-SERVER at Albany CIOFO
"RTN","KMPSGE",40,0)
 ;
"RTN","KMPSGE",41,0)
 S U="^",N=$O(^DIC(4,"D",KMPSSITE,0)),NM=$S($D(^DIC(4,N,0)):$P(^(0),"^"),1:KMPSSITE)
"RTN","KMPSGE",42,0)
 K XMY S:'$D(XMDUZ) XMDUZ=.5 S:'$D(DUZ) DUZ=.5
"RTN","KMPSGE",43,0)
 S XMSUB=NM_" (Session #"_NUM_") XTMP(""KMPS"") Global",XMTEXT="^XTMP(""KMPS"","_KMPSSITE_"," I $D(IO) K:IO="" IO
"RTN","KMPSGE",44,0)
 D ENT^XMPG S KMPSXMZ=XMZ K XMTEXT
"RTN","KMPSGE",45,0)
 S X="S.KMP1-SAGG-SERVER@ISC-ALBANY.VA.GOV",XMN=0 D INST^XMA21 D ENT1^XMD
"RTN","KMPSGE",46,0)
 ;
"RTN","KMPSGE",47,0)
 G OUT^KMPSLK
"RTN","KMPSGE",48,0)
 ;
"RTN","KMPSGE",49,0)
WAIT ;  Wait here until less than 6 volume sets are running
"RTN","KMPSGE",50,0)
 ;
"RTN","KMPSGE",51,0)
 H 300 S KMPSCUR="",KMPSRUN=0 F  S KMPSCUR=$O(^XTMP("KMPS","START",KMPSCUR)) Q:KMPSCUR=""  S KMPSRUN=KMPSRUN+1
"RTN","KMPSGE",52,0)
 I KMPSRUN>5 G WAIT
"RTN","KMPSGE",53,0)
 S KMPSSTRT=KMPSRUN Q
"RTN","KMPSGE",54,0)
ERR1 ;
"RTN","KMPSGE",55,0)
 S KMPSZE=$ZE,ZUZR=$ZR,X="",@^%ZOSF("TRAP") D @^%ZOSF("ERRTN") K KMPSTEXT S KMPSTEXT(1)="SAGG Project Error: "_KMPSZE_" on "_$ZU(5),KMPSTEXT(2)="See system error log for more details.",^XTMP("KMPS","STOP")="" D MSG^KMPSLK G ^XUSCLEAN
"RTN","KMPSGE",56,0)
 ;
"RTN","KMPSGE",57,0)
VAX ; DSM
"RTN","KMPSGE",58,0)
 J START^%ZOSVKSE:(OPTION="/ROUTINE=["_KMPSMGR_"]/UCI="_KMPSUCI_"/VOLUME="_KMPSVOL_"/DATA="""_KMPSTEMP_"""") Q
"RTN","KMPSGE",59,0)
 ;
"RTN","KMPSGE",60,0)
MSM ;
"RTN","KMPSGE",61,0)
 J START^%ZOSVKSE(KMPSTEMP)[KMPSUCI,KMPSVOL] Q
"RTN","KMPSGE",62,0)
 ;
"RTN","KMPSGE",63,0)
MSMV4 ;
"RTN","KMPSGE",64,0)
 S KMPSFS=$E(KMPSVOL)_"S"_$E(KMPSVOL,3)
"RTN","KMPSGE",65,0)
 J START^%ZOSVKSE(KMPSTEMP)[KMPSUCI,KMPSVOL,KMPSFS] Q
"RTN","KMPSGE",66,0)
 ;
"RTN","KMPSGE",67,0)
OMNT ; OpenM-NT
"RTN","KMPSGE",68,0)
 J START^%ZOSVKSE(KMPSTEMP_U_KMPSVOL) Q
"RTN","KMPSLK")
0^16^B24362469
"RTN","KMPSLK",1,0)
KMPSLK ;SF/KAK - Thru The Looking Glass ;27 AUG 97 2:07 pm
"RTN","KMPSLK",2,0)
 ;;1.8;SAGG PROJECT;;May 22, 1998
"RTN","KMPSLK",3,0)
 ;
"RTN","KMPSLK",4,0)
ZER ;  Collect zeroth node information
"RTN","KMPSLK",5,0)
 ;
"RTN","KMPSLK",6,0)
 S U="^",^XTMP("KMPS",KMPSSITE,NUM,"@ZER",0)=$P(^DIC(0),U)_U_$P(^DIC(0),U,4)_"^DIC(^",^XTMP("KMPS",KMPSSITE,NUM,"@ZER","TM")=$S($D(^%ZTSK(-1)):^(-1),1:^%ZTSK(0))
"RTN","KMPSLK",7,0)
 S KMPSN=0 F  S KMPSN=$O(^DIC(KMPSN)) Q:'+KMPSN  D
"RTN","KMPSLK",8,0)
 .Q:$G(^DIC(KMPSN,0))=""
"RTN","KMPSLK",9,0)
 .Q:'$D(^DIC(KMPSN,0,"GL"))  S KMPSNM=$G(^DIC(KMPSN,0,"GL")) Q:KMPSNM=""
"RTN","KMPSLK",10,0)
 .S ^XTMP("KMPS",KMPSSITE,NUM,"@ZER",KMPSN)=$P(^DIC(KMPSN,0),U)_U_$P($G(@(KMPSNM_"0)")),U,4)_KMPSNM_U_$G(^DD(+$P(^DIC(KMPSN,0),U,2),0,"VR"))_U_$P($G(@(KMPSNM_"0)")),U,3)
"RTN","KMPSLK",11,0)
 ; file# = file_name^# of entries^global_name^file_version^last id number
"RTN","KMPSLK",12,0)
 ;
"RTN","KMPSLK",13,0)
PKG ;  Collect package file information
"RTN","KMPSLK",14,0)
 ;
"RTN","KMPSLK",15,0)
 S KMPSN=0 F  S KMPSN=$O(^DIC(9.4,KMPSN)) Q:'+KMPSN  I $D(^DIC(9.4,KMPSN,0)) S KMPSD=$P($G(^DIC(9.4,KMPSN,0)),U,2) D
"RTN","KMPSLK",16,0)
 .I $E(KMPSD)="A" I ($A($E(KMPSD,2))>64)&($A($E(KMPSD,2))<88) I (($A($E(KMPSD,3))>64)&($A($E(KMPSD,3))<89)) Q
"RTN","KMPSLK",17,0)
 .S KMPSV=0,(KMPSVL,KMPSD)="" F  S KMPSV=$O(^DIC(9.4,KMPSN,22,KMPSV)) Q:'+KMPSV  S KMPSVL=KMPSV
"RTN","KMPSLK",18,0)
 .I +KMPSVL S KMPSV=$G(^DIC(9.4,KMPSN,22,KMPSVL,0)),KMPSD=$P(KMPSV,U,3),KMPSV=$P(KMPSV,U)
"RTN","KMPSLK",19,0)
 .S ^XTMP("KMPS",KMPSSITE,NUM,"@PKG",$P(^DIC(9.4,KMPSN,0),U))=$P($G(^DIC(9.4,KMPSN,0)),U,2)_U_$G(^("VERSION"))_U_KMPSV_U_KMPSD
"RTN","KMPSLK",20,0)
 ;  pkg_name = pkg_prefix^current version_last version_install date
"RTN","KMPSLK",21,0)
 ;
"RTN","KMPSLK",22,0)
SYS ;  Collect system information
"RTN","KMPSLK",23,0)
 ;
"RTN","KMPSLK",24,0)
 D @KMPSX1 G END
"RTN","KMPSLK",25,0)
VAX ; DSM
"RTN","KMPSLK",26,0)
 S ^XTMP("KMPS",KMPSSITE,NUM,"@SYS")=$&ZLIB.%VERSION("NAME")_U_$ZC(%GETSYI,"VERSION") Q:$ZV'[6.
"RTN","KMPSLK",27,0)
 S KMPSD=$ZC(%GETSYI,"CLUSTER_MEMBER")
"RTN","KMPSLK",28,0)
 I 'KMPSD S KMPSD=$ZC(%GETSYI,"NODENAME"),^XTMP("KMPS",KMPSSITE,NUM,"@SYS",KMPSD)=$ZC(%GETSYI,"HW_NAME") Q
"RTN","KMPSLK",29,0)
 D CLSTR D  S X="ERR1^KMPSGE",@^%ZOSF("TRAP") Q
"RTN","KMPSLK",30,0)
 .S KMPSD="" F  S KMPSD=$O(KMPSNM(KMPSD)) Q:KMPSD=""  S ^XTMP("KMPS",KMPSSITE,NUM,"@SYS",KMPSD)=$ZC(%GETSYI,"HW_NAME",KMPSNM(KMPSD))
"RTN","KMPSLK",31,0)
CLSTR ;  Call $GETSYI using wild card to get CSID and NODENAME for all nodes
"RTN","KMPSLK",32,0)
 S X="ERRCLU^KMPSLK",@^%ZOSF("TRAP"),$ZE="" K KMPSN,KMPSNM
"RTN","KMPSLK",33,0)
 S KMPSN($ZC(%GETSYI,"NODE_CSID",-1))=""
"RTN","KMPSLK",34,0)
 F  S KMPSN($ZC(%GETSYI,"NODE_CSID",""))=""
"RTN","KMPSLK",35,0)
ERRCLU I $ZE'["NOMORENODE" ZQ
"RTN","KMPSLK",36,0)
 S KMPSD="" F  S KMPSD=$O(KMPSN(KMPSD)) Q:KMPSD=""  S KMPSNM($ZC(%GETSYI,"NODENAME",KMPSD))=KMPSD
"RTN","KMPSLK",37,0)
 Q
"RTN","KMPSLK",38,0)
 ;
"RTN","KMPSLK",39,0)
MSM ;
"RTN","KMPSLK",40,0)
MSMV4 ;
"RTN","KMPSLK",41,0)
 S ^XTMP("KMPS",KMPSSITE,NUM,"@SYS")=$ZV_U_$ZOS(4)
"RTN","KMPSLK",42,0)
 Q
"RTN","KMPSLK",43,0)
 ;
"RTN","KMPSLK",44,0)
OMNT ; OpenM-NT
"RTN","KMPSLK",45,0)
 S ^XTMP("KMPS",KMPSSITE,NUM,"@SYS")=$ZV_U_$S($ZU(100)=0:"Windows NT",$ZU(100)=1:"Windows 95",1:$ZU(100))
"RTN","KMPSLK",46,0)
 Q
"RTN","KMPSLK",47,0)
 ;        
"RTN","KMPSLK",48,0)
END ;
"RTN","KMPSLK",49,0)
 K KMPSD,KMPSN,KMPSNM,KMPSV,KMPSVL
"RTN","KMPSLK",50,0)
 Q
"RTN","KMPSLK",51,0)
 ;
"RTN","KMPSLK",52,0)
OUT ;  Called from routine KMPSGE
"RTN","KMPSLK",53,0)
 ;  Create 'successful' end-game message text
"RTN","KMPSLK",54,0)
 ;
"RTN","KMPSLK",55,0)
 S KMPSTEXT(1)="   The SAGG Project collection routines monitored the following:",KMPSTEXT(2)="" D
"RTN","KMPSLK",56,0)
 .K KMPSX S KMPSX1="" F  S KMPSX1=$O(^XTMP("KMPS",KMPSSITE,NUM,KMPSDT,KMPSX1)) Q:KMPSX1=""  S KMPSX2="" F  S KMPSX2=$O(^XTMP("KMPS",KMPSSITE,NUM,KMPSDT,KMPSX1,KMPSX2)) Q:KMPSX2=""  S KMPSX(KMPSX2)=""
"RTN","KMPSLK",57,0)
 .S KMPSX=0,KMPSX1="" F KMPSI=3:1 Q:KMPSX  S KMPSTEXT(KMPSI)="          " F KMPSJ=1:1:5 S KMPSX1=$O(KMPSX(KMPSX1)) S:KMPSX1="" KMPSX=1 Q:KMPSX1=""  S KMPSTEXT(KMPSI)=KMPSTEXT(KMPSI)_KMPSX1_"   "
"RTN","KMPSLK",58,0)
 S KMPSTEXT(KMPSI)="",KMPSTEXT(KMPSI+1)="   Please ensure that this list concurs with your present volume set",KMPSTEXT(KMPSI+2)="   configuration.",KMPSTEXT(KMPSI+3)=""
"RTN","KMPSLK",59,0)
 S KMPSTEXT(KMPSI+4)="   A local e-mail message #"_KMPSXMZ_" was created by the collection",KMPSTEXT(KMPSI+5)="   routines.  Check the ISC-ALBANY.VA.GOV NetMail Queue to ensure",KMPSTEXT(KMPSI+6)="   transmission delivery."
"RTN","KMPSLK",60,0)
 ;
"RTN","KMPSLK",61,0)
MSG ;  Send e-mail message to local KMPS-SAGG mailgroup
"RTN","KMPSLK",62,0)
 ;
"RTN","KMPSLK",63,0)
 K XMY S:'$D(XMDUZ) XMDUZ=.5 S:'$D(DUZ) DUZ=.5 S U="^"
"RTN","KMPSLK",64,0)
 S XMSUB="SAGG Project Message (Session #"_NUM_")",XMTEXT="KMPSTEXT("
"RTN","KMPSLK",65,0)
 I $D(^XMB(3.8,"B","KMPS-SAGG")) S KMPSXM=$O(^XMB(3.8,"B","KMPS-SAGG",0)) S KMPSXMN=0 F  S KMPSXMN=$O(^XMB(3.8,KMPSXM,1,"B",KMPSXMN)) Q:KMPSXMN=""  S XMY(KMPSXMN)=""
"RTN","KMPSLK",66,0)
 D:$D(XMY) ^XMD
"RTN","KMPSLK",67,0)
END1 ;
"RTN","KMPSLK",68,0)
 K ^XTMP("KMPS",KMPSSITE),^XTMP("KMPS","ERROR"),^XTMP("KMPS","START"),^XTMP("KMPS","STOP"),^XTMP("KMPS",0)
"RTN","KMPSLK",69,0)
 K %,KMPSCUR,KMPSDT,KMPSFS,KMPSLOC,KMPSI,KMPSJ,KMPSJOB,KMPSMGR,KMPSPROD,KMPSRUN,KMPSSITE,KMPSSTRT
"RTN","KMPSLK",70,0)
 K KMPSTEMP,KMPSTEXT,KMPSUCI,KMPSUTL,KMPSVA,KMPSVOL,KMPSX,KMPSX1,KMPSX2,KMPSXM,KMPSXMB,KMPSXMN,KMPSXMZ
"RTN","KMPSLK",71,0)
 K N,NM,X,XMDUZ,XMN,XMSUB,XMTEXT,XMY,XMZ
"RTN","KMPSLK",72,0)
 S ZTREQ="@"
"RTN","KMPSLK",73,0)
 L -^XTMP("KMPS") Q
"RTN","KMPSLOAD")
0^17^B564565
"RTN","KMPSLOAD",1,0)
KMPSLOAD ;SF/KAK - Manager UCI Loader Routine ;14 OCT 92 4:30 pm
"RTN","KMPSLOAD",2,0)
 ;;1.8;SAGG PROJECT;;Jun 16, 1998
"RTN","KMPSLOAD",3,0)
CLEAN ;
"RTN","KMPSLOAD",4,0)
 F KMPS1="A1B5","%A1B5" F KMPS2="GE","GS" F KMPS3="I","M","P","V" S KMPSDL=KMPS1_KMPS2_KMPS3 D DEL
"RTN","KMPSLOAD",5,0)
 S KMPSDL="A1B5LOAD" D DEL
"RTN","KMPSLOAD",6,0)
 ;
"RTN","KMPSLOAD",7,0)
END ;
"RTN","KMPSLOAD",8,0)
 W !!,"Finished",!
"RTN","KMPSLOAD",9,0)
 K KMPS1,KMPS2,KMPS3,KMPSDL
"RTN","KMPSLOAD",10,0)
 Q
"RTN","KMPSLOAD",11,0)
DEL ;
"RTN","KMPSLOAD",12,0)
 S X=KMPSDL X ^%ZOSF("TEST") Q:'$T
"RTN","KMPSLOAD",13,0)
 W !,"Deleting ",X X ^%ZOSF("DEL")
"RTN","KMPSLOAD",14,0)
 Q
"RTN","KMPSPRE")
0^18^B1810739
"RTN","KMPSPRE",1,0)
KMPSPRE ;SF/KAK - SAGG Pre Install ;05 MAR 98 6:51 pm
"RTN","KMPSPRE",2,0)
 ;;1.8;SAGG PROJECT;;Apr 27, 1998
"RTN","KMPSPRE",3,0)
 ;
"RTN","KMPSPRE",4,0)
EN ;
"RTN","KMPSPRE",5,0)
 D PACK,MAIL,TASK
"RTN","KMPSPRE",6,0)
 K KMPSTSK
"RTN","KMPSPRE",7,0)
 Q
"RTN","KMPSPRE",8,0)
 ;
"RTN","KMPSPRE",9,0)
PACK ; Change PREFIX of SAGG PROJECT package to KMPS
"RTN","KMPSPRE",10,0)
 ;
"RTN","KMPSPRE",11,0)
 D BMES^XPDUTL("   Changing PREFIX of SAGG PROJECT package to KMPS ...")
"RTN","KMPSPRE",12,0)
 N DA,DIE,DR
"RTN","KMPSPRE",13,0)
 S DA=+$O(^DIC(9.4,"B","SAGG PROJECT",0)) Q:'DA
"RTN","KMPSPRE",14,0)
 S DIE="^DIC(9.4,",DR="1///KMPS" D ^DIE
"RTN","KMPSPRE",15,0)
 K DA,DIE,DR
"RTN","KMPSPRE",16,0)
 Q
"RTN","KMPSPRE",17,0)
 ;        
"RTN","KMPSPRE",18,0)
MAIL ; Change mail-group A1B5-SAGG to KMPS-SAGG
"RTN","KMPSPRE",19,0)
 ;
"RTN","KMPSPRE",20,0)
 D BMES^XPDUTL("   Changing mail-group A1B5-SAGG to KMPS-SAGG ...")
"RTN","KMPSPRE",21,0)
 N DA,DIE,DR
"RTN","KMPSPRE",22,0)
 S DA=+$O(^XMB(3.8,"B","A1B5-SAGG",0)) Q:'DA
"RTN","KMPSPRE",23,0)
 S DIE="^XMB(3.8,",DR=".01///KMPS-SAGG" D ^DIE
"RTN","KMPSPRE",24,0)
 K DA,DIE,DR
"RTN","KMPSPRE",25,0)
 Q
"RTN","KMPSPRE",26,0)
 ;
"RTN","KMPSPRE",27,0)
TASK ; Change option A1B5 SAGG REPORT to KMPS SAGG REPORT
"RTN","KMPSPRE",28,0)
 ;
"RTN","KMPSPRE",29,0)
 D BMES^XPDUTL("   Changing option A1B5 SAGG REPORT to KMPS SAGG REPORT ...")
"RTN","KMPSPRE",30,0)
 N DA,DIE,DR
"RTN","KMPSPRE",31,0)
 S DA=$O(^DIC(19,"B","A1B5 SAGG REPORT",0)) Q:'DA
"RTN","KMPSPRE",32,0)
 S DIE="^DIC(19,",DR=".01///KMPS SAGG REPORT" D ^DIE
"RTN","KMPSPRE",33,0)
 K DA,DIE,DR
"RTN","KMPSPRE",34,0)
 Q
"RTN","KMPSPRE",35,0)
 ;
"RTN","KMPSPST")
0^19^B24912282
"RTN","KMPSPST",1,0)
KMPSPST ;SF/KAK - SAGG Post Install ;20 FEB 98 2:26 pm
"RTN","KMPSPST",2,0)
 ;;1.8;SAGG PROJECT;;May 29, 1998
"RTN","KMPSPST",3,0)
 ;
"RTN","KMPSPST",4,0)
 N DA,DIC,DIE,DIK,DIU,DR
"RTN","KMPSPST",5,0)
PACK ;
"RTN","KMPSPST",6,0)
 D BMES^XPDUTL("PART 1: Updating SAGG PROJECT data in PACKAGE file ...")
"RTN","KMPSPST",7,0)
 S KMPSDA(1)=+$O(^DIC(9.4,"B","SAGG PROJECT",0)) G:'KMPSDA(1) MOV
"RTN","KMPSPST",8,0)
 ; Update data in ROUTINE field
"RTN","KMPSPST",9,0)
 K DA,DR S KMPSDA=0 F  S KMPSDA=$O(^DIC(9.4,KMPSDA(1),2,KMPSDA)) Q:'+KMPSDA  D
"RTN","KMPSPST",10,0)
 .S KMPSIENS=$$IENS^DILF(.KMPSDA)
"RTN","KMPSPST",11,0)
 .K KMPSFDA S KMPSFDA(9.42,KMPSIENS,.01)="@"
"RTN","KMPSPST",12,0)
 .D FILE^DIE("","KMPSFDA","")
"RTN","KMPSPST",13,0)
 S KMPSIENS="+1,"_KMPSDA(1)_","
"RTN","KMPSPST",14,0)
 F I=1:1:2 S KMPSROUT=$P($T(ROUT+I),";;",2) F J=1:1 S KMPSRTN=$P(KMPSROUT,"^",J) Q:KMPSRTN=""  D
"RTN","KMPSPST",15,0)
 .K KMPSFDA S KMPSFDA(9.42,KMPSIENS,.01)=KMPSRTN
"RTN","KMPSPST",16,0)
 .D UPDATE^DIE("","KMPSFDA","")
"RTN","KMPSPST",17,0)
 ; Update data in GLOBAL field
"RTN","KMPSPST",18,0)
 K DA,DR S DA=0,DA(1)=KMPSDA(1) F  S DA=$O(^DIC(9.4,DA(1),3,DA)) Q:'+DA  D
"RTN","KMPSPST",19,0)
 .S KMPSGBL=$G(^DIC(9.4,DA(1),3,DA,0)) Q:KMPSGBL=""
"RTN","KMPSPST",20,0)
 .S DIE="^DIC(9.4,"_DA(1)_",3,"
"RTN","KMPSPST",21,0)
 .S DR=".01///"_$S(KMPSGBL="A1B5":"KMPS(8970.1",KMPSGBL="A1B5GE":"XTMP('KMPS'",1:KMPSGBL) D ^DIE
"RTN","KMPSPST",22,0)
 ; Update data in FILE field
"RTN","KMPSPST",23,0)
 K DA,DR S DA=0,DA(1)=KMPSDA(1) F  S DA=$O(^DIC(9.4,DA(1),4,DA)) Q:'+DA  D
"RTN","KMPSPST",24,0)
 .S KMPSFIL=$G(^DIC(9.4,DA(1),4,DA,0)) Q:KMPSFIL=""
"RTN","KMPSPST",25,0)
 .S DIE="^DIC(9.4,"_DA(1)_",4,"
"RTN","KMPSPST",26,0)
 .S DR=".01///"_$S(KMPSFIL=11120:"8970.1",1:KMPSFIL) D ^DIE
"RTN","KMPSPST",27,0)
 ; Update data in *LOWEST FILE NUMBER, *HIGHEST FILE NUMBER and
"RTN","KMPSPST",28,0)
 ; *POST-INITIALIZATION ROUTINE fields
"RTN","KMPSPST",29,0)
 K DA,DR S DA=KMPSDA(1),DR="10.6///8970.1;11///8970.1;11.3///I;914///@"
"RTN","KMPSPST",30,0)
 S DIE="^DIC(9.4," D ^DIE
"RTN","KMPSPST",31,0)
 D MES^XPDUTL("        Done (Part 1)")
"RTN","KMPSPST",32,0)
 ;
"RTN","KMPSPST",33,0)
MOV ;
"RTN","KMPSPST",34,0)
 D BMES^XPDUTL("PART 2: Moving data from SAGG PROJECT file #11120 to file #8970.1 ...")
"RTN","KMPSPST",35,0)
 I '$D(^KMPS(8970.1)) D BMES^XPDUTL("        ERROR - Missing new file #8970.1.") G ERRM1
"RTN","KMPSPST",36,0)
 I '$D(^A1B5(11120)) D BMES^XPDUTL("        INFO - No data found in old file #11120.") G ERRM2
"RTN","KMPSPST",37,0)
 I '$D(^A1B5(11120,1,1,"B")) D BMES^XPDUTL("        INFO - No VOLUME SET data found in old file #11120.") G ERRM2
"RTN","KMPSPST",38,0)
 S KMPSOS=$P($G(^%ZOSF("OS")),"^")
"RTN","KMPSPST",39,0)
 S (DIC,DIE)="^KMPS(8970.1,",DIC(0)="LZ",DLAYGO=8970.1,X=1
"RTN","KMPSPST",40,0)
 D ^DIC I Y=-1 D BMES^XPDUTL("        ERROR - Unsuccessful in adding entry 1 into file #8970.1") G ERRM2
"RTN","KMPSPST",41,0)
 S ERR=0,KMPSVOL="" F  S KMPSVOL=$O(^A1B5(11120,1,1,"B",KMPSVOL)) Q:ERR!(KMPSVOL="")  D
"RTN","KMPSPST",42,0)
 .S KMPSUCI=$O(^A1B5(11120,1,1,"B",KMPSVOL,0)),KMPSUCI=$P(^A1B5(11120,1,1,KMPSUCI,0),U,2)
"RTN","KMPSPST",43,0)
 .S DA(1)=1,DLAYGO=8970.1,DIC="^KMPS(8970.1,1,1,",DIC(0)="LZ"
"RTN","KMPSPST",44,0)
 .S DIC("P")=$P(^DD(8970.1,.03,0),U,2),X=KMPSVOL
"RTN","KMPSPST",45,0)
 .D ^DIC I Y=-1 S ERR=1 D BMES^XPDUTL("        ERROR - Unsuccessful in adding VOLUME SET "_KMPSVOL) Q
"RTN","KMPSPST",46,0)
 .S DIE=DIC K DIC
"RTN","KMPSPST",47,0)
 .S DA=+Y,DR=".01///^S X=KMPSVOL"_$S(KMPSOS["DSM":$S(KMPSUCI'="":";.02///^S X=KMPSUCI",1:""),1:"") D ^DIE
"RTN","KMPSPST",48,0)
 I KMPSOS["DSM" D
"RTN","KMPSPST",49,0)
 .K DIE S DA=1,DIE="^KMPS(8970.1,"
"RTN","KMPSPST",50,0)
 .S DR=".02///^S X=XPDQUES(""POSKMPS1"",""B"");.025///^S X=XPDQUES(""POSKMPS2"",""B"")"
"RTN","KMPSPST",51,0)
 .D ^DIE
"RTN","KMPSPST",52,0)
 G:ERR ERRM2
"RTN","KMPSPST",53,0)
 D MES^XPDUTL("        Done (Part 2)")
"RTN","KMPSPST",54,0)
 ;
"RTN","KMPSPST",55,0)
DEL ;
"RTN","KMPSPST",56,0)
 D BMES^XPDUTL("PART 3: Deleting old SAGG PROJECT (#11120) file ...")
"RTN","KMPSPST",57,0)
 K DIC,DIE,DIK S DIK="^A1B5(11120,",DA=1
"RTN","KMPSPST",58,0)
 D ^DIK
"RTN","KMPSPST",59,0)
 S DIU=11120.01,DIU(0)="DST" D EN^DIU2
"RTN","KMPSPST",60,0)
 S DIU="^A1B5(11120,",DIU(0)="DT" D EN^DIU2
"RTN","KMPSPST",61,0)
 D MES^XPDUTL("        Done (Part 3)")
"RTN","KMPSPST",62,0)
 ;
"RTN","KMPSPST",63,0)
TSK ;
"RTN","KMPSPST",64,0)
 D BMES^XPDUTL("PART 4: Rescheduling new KMPS SAGG REPORT background task ...")
"RTN","KMPSPST",65,0)
 N DIFROM,ZTSK K DIFROM
"RTN","KMPSPST",66,0)
 S KMPSDA=$O(^DIC(19,"B","KMPS SAGG REPORT",0)) G:'KMPSDA ERRT
"RTN","KMPSPST",67,0)
 S KMPSDA=$O(^DIC(19.2,"B",KMPSDA,0)) G:'KMPSDA ERRT
"RTN","KMPSPST",68,0)
 S KMPSDTH=$P($G(^DIC(19.2,KMPSDA,0)),"^",2),ZTSK=+$G(^DIC(19.2,KMPSDA,1))
"RTN","KMPSPST",69,0)
 I ZTSK D KILL^%ZTLOAD K DR S DA=KMPSDA,DIE="^DIC(19.2,",DR="12///@" D ^DIE
"RTN","KMPSPST",70,0)
 I KMPSDTH="" G ERRT
"RTN","KMPSPST",71,0)
 K DR S DA=KMPSDA,DIE="^DIC(19.2,",DR="2///@" D ^DIE
"RTN","KMPSPST",72,0)
 I KMPSDTH<DT G ERRT
"RTN","KMPSPST",73,0)
 K DR S DA=KMPSDA,DIE="^DIC(19.2,",DR="2////"_KMPSDTH D ^DIE
"RTN","KMPSPST",74,0)
 I '+$G(^DIC(19.2,KMPSDA,1)) G ERRT
"RTN","KMPSPST",75,0)
 D MES^XPDUTL("        Done (Part 4)")
"RTN","KMPSPST",76,0)
 ;
"RTN","KMPSPST",77,0)
GBL ;
"RTN","KMPSPST",78,0)
 D BMES^XPDUTL("PART 5: Deleting old A1B5GE temporary collection global ...")
"RTN","KMPSPST",79,0)
 S KMPSSITE=$G(^DD("SITE",1)) I KMPSSITE'="" K ^A1B5GE(KMPSSITE)
"RTN","KMPSPST",80,0)
 K ^A1B5GE("ERROR"),^A1B5GE("START"),^A1B5GE("STOP")
"RTN","KMPSPST",81,0)
 D MES^XPDUTL("        Done (Part 5)")
"RTN","KMPSPST",82,0)
 ;
"RTN","KMPSPST",83,0)
 D BMES^XPDUTL("Post-install routine complete.")
"RTN","KMPSPST",84,0)
EXIT ;
"RTN","KMPSPST",85,0)
 K DA,DIC,DIE,DIK,DIU,DLAYGO,DR,ERR
"RTN","KMPSPST",86,0)
 K KMPSDA,KMPSFDA,KMPSDTH,KMPSFIL,KMPSGBL,KMPSIENS,KMPSOS,KMPSRTN,KMPSSITE,KMPSUCI,KMPSVOL,X
"RTN","KMPSPST",87,0)
 Q
"RTN","KMPSPST",88,0)
ERRM1 ;
"RTN","KMPSPST",89,0)
 D MES^XPDUTL("        Please correct the ERROR condition.")
"RTN","KMPSPST",90,0)
 D MES^XPDUTL("        Then re-run routine MOV^KMPSPST.")
"RTN","KMPSPST",91,0)
 G EXIT
"RTN","KMPSPST",92,0)
ERRM2 ;
"RTN","KMPSPST",93,0)
 D MES^XPDUTL("        Enter data manually with 'Edit SAGG Project File'")
"RTN","KMPSPST",94,0)
 D MES^XPDUTL("        [KMPS SAGG FILE] option.")
"RTN","KMPSPST",95,0)
 G DEL
"RTN","KMPSPST",96,0)
ERRT ;
"RTN","KMPSPST",97,0)
 D MES^XPDUTL("        ERROR - Not able to reschedule new KMPS SAGG REPORT background task.")
"RTN","KMPSPST",98,0)
 D MES^XPDUTL("        Use 'Schedule/Unschedule Options' [XUTM SCHEDULE] to reschedule")
"RTN","KMPSPST",99,0)
 D MES^XPDUTL("        the 'SAGG Master Background Task' [KMPS SAGG REPORT].")
"RTN","KMPSPST",100,0)
 G GBL
"RTN","KMPSPST",101,0)
 ;
"RTN","KMPSPST",102,0)
ROUT ; Names of routines
"RTN","KMPSPST",103,0)
 ;;KMPSENV^KMPSGE^KMPSLK^KMPSLOAD^KMPSPRE^KMPSPST^KMPSUTL
"RTN","KMPSPST",104,0)
 ;;ZKMPSGEM^ZKMPSGEN^ZKMPSGEV^ZKMPSGSM^ZKMPSGSN^ZKMPSGSV
"RTN","KMPSUTL")
0^20^B25267014
"RTN","KMPSUTL",1,0)
KMPSUTL ;SF/KAK - SAGG Utilities ;01 SEP 97 11:15 am
"RTN","KMPSUTL",2,0)
 ;;1.8;SAGG PROJECT;;Apr 27, 1998
"RTN","KMPSUTL",3,0)
STAT ;
"RTN","KMPSUTL",4,0)
 W !,?25,"SAGG Project Status",!,?29,"Version ",$P($T(KMPSUTL+1),";",3),! S U="^",KMPSX2=$P(^%ZOSF("PROD"),",")
"RTN","KMPSUTL",5,0)
 S KMPSDA=0 I '$D(^DIC(19,"B","KMPS SAGG REPORT")) W !," The 'SAGG Master Background Task' option [KMPS SAGG REPORT] is missing !",*7,!
"RTN","KMPSUTL",6,0)
 E  S KMPSDA=$O(^DIC(19,"B","KMPS SAGG REPORT",0)),KMPSDA=+$O(^DIC(19.2,"B",KMPSDA,0)),KMPSX=$G(^DIC(19.2,KMPSDA,0)),Y=+$P(KMPSX,U,2) D:Y DD^%DT S $P(KMPSX,U,2)=Y
"RTN","KMPSUTL",7,0)
 S KMPSTSK=+$G(^DIC(19.2,+KMPSDA,1))
"RTN","KMPSUTL",8,0)
 W !,?5,"The 'SAGG Master Background Task' [KMPS SAGG REPORT] is ",$S('KMPSTSK:"NOT ",1:""),"scheduled",$S('KMPSTSK:".",1:""),!
"RTN","KMPSUTL",9,0)
 I KMPSTSK D
"RTN","KMPSUTL",10,0)
 .W ?5,"to run as Task ID ",KMPSTSK," on ",$S($P(KMPSX,U,2)="":"NO DATE",1:$P(KMPSX,U,2))
"RTN","KMPSUTL",11,0)
 .S KMPSX=$P(KMPSX,U,6) W " every ",$S(KMPSX="":"UNKNOWN",1:+KMPSX)," ",$S(KMPSX["D":"day",KMPSX["M":"month",1:KMPSX)
"RTN","KMPSUTL",12,0)
 .W:KMPSX>1 "s" W ".",!
"RTN","KMPSUTL",13,0)
 D SYS
"RTN","KMPSUTL",14,0)
 W !,?5,"SAGG Project collection routines will monitor the following:",!!,?7 S (KMPS,KMPSX)=0
"RTN","KMPSUTL",15,0)
 F  S KMPSX=$O(^KMPS(8970.1,1,1,"B",KMPSX)) Q:KMPSX=""  D  W:KMPS " - " W $S(KMPSSYS'="OMNT":KMPSX3_",",1:""),KMPSX S KMPS=KMPS+1 I KMPS=6 S KMPS=0 W !,?7
"RTN","KMPSUTL",16,0)
 .S KMPSX3=$O(^KMPS(8970.1,1,1,"B",KMPSX,0)),KMPSX3=$P(^KMPS(8970.1,1,1,KMPSX3,0),U,2) S:KMPSX3="" KMPSX3=KMPSX2
"RTN","KMPSUTL",17,0)
 D SYS
"RTN","KMPSUTL",18,0)
 W ! I KMPSSYS'="OMNT" S KMPSX=$G(^KMPS(8970.1,1,0)) W !,?5,"XTMP(""KMPS"") Global Location: ",$S($P(KMPSX,U,3)="":KMPSX2,1:$P(KMPSX,U,3)),",",$S($P(KMPSX,U,2)="":"UNKNOWN",1:$P(KMPSX,U,2)),!
"RTN","KMPSUTL",19,0)
 S KMPS=^DD("SITE",1)
"RTN","KMPSUTL",20,0)
 W !,?5,"The temporary collection global (i.e., ^XTMP(""KMPS"")) has ",$S('$D(^XTMP("KMPS",KMPS)):"no ",1:""),"data.",!
"RTN","KMPSUTL",21,0)
 I $D(^XTMP("KMPS",KMPS,0)) S %H=+^(0) W !,?5,"Session #",%H D YX^%DTC W " is running for ",Y,".",! I +$H-%H>1 W ?5,"This session has probably errored out.",!
"RTN","KMPSUTL",22,0)
 I $D(^XTMP("KMPS","START")) W !,?5,"The SAGG Project routines are still running on:",!!,?7 S (KMPS,KMPSX)=0 F  S KMPSX=$O(^XTMP("KMPS","START",KMPSX)) Q:KMPSX=""  W:KMPS ", " W KMPSX S KMPS=KMPS+1 I KMPS=12 S KMPS=0 W !,?7
"RTN","KMPSUTL",23,0)
 W ! I $D(^XTMP("KMPS","ERROR")) W !!,"Press <RETURN> to continue: " R X:DTIME G:'$T!(X["^") END W @IOF,!,?5,"The SAGG Project collection routines have recorded an error on",!,?5,"Volume Set(s):",!! D  W !
"RTN","KMPSUTL",24,0)
 .S KMPS=0,KMPSX="" F  S KMPSX=$O(^XTMP("KMPS","ERROR",KMPSX)) Q:KMPSX=""  W:KMPS ", " W:'KMPS ?7 W KMPSX S KMPS=1
"RTN","KMPSUTL",25,0)
 I $D(^XTMP("KMPS","STOP")) W !,?5,"The SAGG Project collection routines have been informed to begin",!,?5,"an orderly shut-down process."
"RTN","KMPSUTL",26,0)
 I $D(^XTMP("KMPS","STOP")),$D(^XTMP("KMPS","START")) W "  The routines will stop running",!,?5,"after reaching the appropriate break-point."
"RTN","KMPSUTL",27,0)
 W !!,"Press <RETURN> to continue: " R X:DTIME
"RTN","KMPSUTL",28,0)
END ;
"RTN","KMPSUTL",29,0)
 K %,%H,KMPS,KMPSDA,KMPSSYS,KMPSX,KMPSX2,KMPSX3,X,Y Q
"RTN","KMPSUTL",30,0)
STOP ;
"RTN","KMPSUTL",31,0)
 I '$D(^XTMP("KMPS","START")) W !,?5,"The SAGG Project collection routines have not started.",! Q
"RTN","KMPSUTL",32,0)
 D STAT W !
"RTN","KMPSUTL",33,0)
 S DIR("A")="Do you wish to manually STOP the SAGG Project collection routines (Y/N)",DIR("B")="N",DIR(0)="Y" D ^DIR W !
"RTN","KMPSUTL",34,0)
 I Y S ^XTMP("KMPS","STOP")=1 W !,?5,"The SAGG Project collection routines have been notified to begin an",!,?5,"orderly shut-down process.",!
"RTN","KMPSUTL",35,0)
 K DIR,X,Y Q
"RTN","KMPSUTL",36,0)
FILE ;
"RTN","KMPSUTL",37,0)
 D SYS I KMPSSYS'="OMNT" D
"RTN","KMPSUTL",38,0)
 .W !!,"Please specify the Volume Set and UCI which will hold"
"RTN","KMPSUTL",39,0)
 .W !,"the ^XTMP(""KMPS"") global.",!
"RTN","KMPSUTL",40,0)
 .S DIE="^KMPS(8970.1,",DLAYGO=8970.1,DA=1,DR=".02;.025" D ^DIE
"RTN","KMPSUTL",41,0)
 W !!,"Specify the " W $S(KMPSSYS="VAX":"Volume Sets",1:"Directories")
"RTN","KMPSUTL",42,0)
 W " which hold your VistA production globals:",!!,"For example:",!!,?10
"RTN","KMPSUTL",43,0)
 I KMPSSYS="VAX" W "For DSM =>  ROU, VAA, VBB, VCC ... Vxx"
"RTN","KMPSUTL",44,0)
 I KMPSSYS="MSM" W "For MSM =>  FDA, FDB, FDC ... FDx"
"RTN","KMPSUTL",45,0)
 I KMPSSYS="OMNT" W "For OpenM-NT =>  W:\VAA, W:\VBB, W:\VCC ... V:\Vxx"
"RTN","KMPSUTL",46,0)
 I KMPSSYS="UNKWN" W "Specify all locations of VistA globals"
"RTN","KMPSUTL",47,0)
 W !!,"Do NOT specify 'scratch/test/training' " W $S(KMPSSYS="VAX":"Volume Sets",1:"Directories")
"RTN","KMPSUTL",48,0)
 W " (i.e., ZAA, UTL," W !,"TST, etc.).",!
"RTN","KMPSUTL",49,0)
 S DIE="^KMPS(8970.1,",DA=1,DR=.03 S:KMPSSYS="OMNT" DR(2,8970.11)=.01 D ^DIE
"RTN","KMPSUTL",50,0)
 K DA,DIC,DIE,DLAYGO,DR,KMPSSYS Q
"RTN","KMPSUTL",51,0)
MAIL ;
"RTN","KMPSUTL",52,0)
 W !!,"Specify the users that will receive SAGG notification messages.",!
"RTN","KMPSUTL",53,0)
 S (DIC,DIE)="^XMB(3.8,",DIC(0)="LZ",DLAYGO=3.8,X="KMPS-SAGG" D ^DIC
"RTN","KMPSUTL",54,0)
 S DA=+Y,DR=2 D ^DIE
"RTN","KMPSUTL",55,0)
 K DA,DIC,DIE,DLAYGO,DR,X,Y Q
"RTN","KMPSUTL",56,0)
SYS ;
"RTN","KMPSUTL",57,0)
 S KMPSSYS=$P($P(^%ZOSF("OS"),U),"("),KMPSSYS=$S(KMPSSYS="VAX DSM":"VAX",KMPSSYS["MSM-PC":"MSM",KMPSSYS="OpenM-NT":"OMNT",1:"UNKWN")
"RTN","KMPSUTL",58,0)
 Q
"SEC","^DIC",8970.1,8970.1,0,"DD")
@
"VER")
8.0^21.0
"^DD",8970.1,8970.1,0)
FIELD^^.03^4
"^DD",8970.1,8970.1,0,"DDA")
N
"^DD",8970.1,8970.1,0,"DT")
2980305
"^DD",8970.1,8970.1,0,"IX","B",8970.1,.01)

"^DD",8970.1,8970.1,0,"NM","SAGG PROJECT")

"^DD",8970.1,8970.1,0,"VRPK")
SAGG PROJECT
"^DD",8970.1,8970.1,.01,0)
ONE^RNJ1,0I^^0;1^K:+X'=X!(X>1)!(X<1)!(X?.E1"."1N.N) X
"^DD",8970.1,8970.1,.01,1,0)
^.1
"^DD",8970.1,8970.1,.01,1,1,0)
8970.1^B
"^DD",8970.1,8970.1,.01,1,1,1)
S ^KMPS(8970.1,"B",$E(X,1,30),DA)=""
"^DD",8970.1,8970.1,.01,1,1,2)
K ^KMPS(8970.1,"B",$E(X,1,30),DA)
"^DD",8970.1,8970.1,.01,3)
There should be only ONE (1) entry in this file!  Type in the Number 1.
"^DD",8970.1,8970.1,.01,21,0)
^^2^2^2980227^
"^DD",8970.1,8970.1,.01,21,1,0)
Since the SAGG PROJECT file is identified uniquely with the site at
"^DD",8970.1,8970.1,.01,21,2,0)
which it is installed, this field will only accept one entry.
"^DD",8970.1,8970.1,.01,"DT")
2980227
"^DD",8970.1,8970.1,.02,0)
XTMP GLOBAL LOCATION^F^^0;2^K:$L(X)>9!($L(X)<2)!'(X?.U) X
"^DD",8970.1,8970.1,.02,3)
Input name (2-9 UPPER characters) of the Volume Set (for DSM) where the XTMP global is located.  If OpenM-NT site, leave BLANK.
"^DD",8970.1,8970.1,.02,21,0)
^^4^4^2980324^
"^DD",8970.1,8970.1,.02,21,1,0)
This field will contain the name of the Volume Set (for DSM) where the
"^DD",8970.1,8970.1,.02,21,2,0)
temporary collection global (^XTMP) is located at this site.
"^DD",8970.1,8970.1,.02,21,3,0)
 
"^DD",8970.1,8970.1,.02,21,4,0)
If this is an OpenM-NT site, leave BLANK.
"^DD",8970.1,8970.1,.02,"DT")
2980305
"^DD",8970.1,8970.1,.025,0)
XTMP GLOBAL UCI^F^^0;3^K:$L(X)>9!($L(X)<2)!'(X?.U) X
"^DD",8970.1,8970.1,.025,3)
Input name (2-9 UPPER characters) of UCI (for DSM) where the XTMP global is located.  If OpenM-NT site, leave BLANK.
"^DD",8970.1,8970.1,.025,21,0)
^^6^6^2980305^
"^DD",8970.1,8970.1,.025,21,1,0)
This field will contain the name of the UCI (for DSM) where the temporary
"^DD",8970.1,8970.1,.025,21,2,0)
collection global (^XTMP) is located at this site.  If left BLANK, the
"^DD",8970.1,8970.1,.025,21,3,0)
collection software will default to the value of the first data piece in
"^DD",8970.1,8970.1,.025,21,4,0)
the ^%ZOSF("PROD") global node.
"^DD",8970.1,8970.1,.025,21,5,0)
 
"^DD",8970.1,8970.1,.025,21,6,0)
If this is an OpenM-NT site, leave BLANK.
"^DD",8970.1,8970.1,.025,"DT")
2980305
"^DD",8970.1,8970.1,.03,0)
VOLUME SET TO MONITOR^8970.11^^1;0
"^DD",8970.1,8970.11,0)
VOLUME SET TO MONITOR SUB-FIELD^^.02^2
"^DD",8970.1,8970.11,0,"DT")
2980302
"^DD",8970.1,8970.11,0,"IX","B",8970.11,.01)

"^DD",8970.1,8970.11,0,"NM","VOLUME SET TO MONITOR")

"^DD",8970.1,8970.11,0,"UP")
8970.1
"^DD",8970.1,8970.11,.01,0)
VOLUME SET TO MONITOR^MRF^^0;1^K:$L(X)>9!($L(X)<2)!'((X?1U2P3U)!(X?.U)) X
"^DD",8970.1,8970.11,.01,1,0)
^.1
"^DD",8970.1,8970.11,.01,1,1,0)
8970.11^B
"^DD",8970.1,8970.11,.01,1,1,1)
S ^KMPS(8970.1,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",8970.1,8970.11,.01,1,1,2)
K ^KMPS(8970.1,DA(1),1,"B",$E(X,1,30),DA)
"^DD",8970.1,8970.11,.01,3)
Answer with the name (2-9 UPPER characters) of Directories (for OpenM-NT => W:\VAA) or Volume Sets (for DSM => VAA) that the SAGG Project collection routines will monitor.
"^DD",8970.1,8970.11,.01,21,0)
^^12^12^2980302^^^
"^DD",8970.1,8970.11,.01,21,1,0)
This field will contain the name of the Directory (for OpenM-NT) or the
"^DD",8970.1,8970.11,.01,21,2,0)
Volume Sets (for DSM) that the site wants to monitor with the SAGG Project
"^DD",8970.1,8970.11,.01,21,3,0)
collection routines.  The site should specify only the Directories or
"^DD",8970.1,8970.11,.01,21,4,0)
Volume Sets which hold their VistA production globals:
"^DD",8970.1,8970.11,.01,21,5,0)
 
"^DD",8970.1,8970.11,.01,21,6,0)
For example:
"^DD",8970.1,8970.11,.01,21,7,0)
 
"^DD",8970.1,8970.11,.01,21,8,0)
       For OpenM-NT =>  W:\VAA, W:\VBB, W:\VCC ... V:\Vxx
"^DD",8970.1,8970.11,.01,21,9,0)
       For DSM      =>  ROU, VAA, VBB ... Vxx
"^DD",8970.1,8970.11,.01,21,10,0)
 
"^DD",8970.1,8970.11,.01,21,11,0)
The site should NOT specify 'scratch/test/training' Directories or Volume
"^DD",8970.1,8970.11,.01,21,12,0)
Sets (e.g., ZZA, UTL, TST, etc.).
"^DD",8970.1,8970.11,.01,"DT")
2980302
"^DD",8970.1,8970.11,.02,0)
UCI^F^^0;2^K:$L(X)>9!($L(X)<2)!'(X?.U) X
"^DD",8970.1,8970.11,.02,3)
Answer with the name (2-9 UPPER characters) of the UCI that the SAGG Project collection routines will monitor for the given VOLUME SET.  If OpenM-NT site, leave BLANK.
"^DD",8970.1,8970.11,.02,21,0)
^^6^6^2980305^
"^DD",8970.1,8970.11,.02,21,1,0)
This field will contain the name of the UCI that the SAGG Project
"^DD",8970.1,8970.11,.02,21,2,0)
collection routines will monitor for the given VOLUME SET TO MONITOR.
"^DD",8970.1,8970.11,.02,21,3,0)
If left BLANK, the collection software will default to the value of
"^DD",8970.1,8970.11,.02,21,4,0)
the first data piece in the ^%ZOSF("PROD") global node.
"^DD",8970.1,8970.11,.02,21,5,0)
 
"^DD",8970.1,8970.11,.02,21,6,0)
If this is an OpenM-NT site, leave BLANK.
"^DD",8970.1,8970.11,.02,"DT")
2980227
"^DIC",8970.1,8970.1,0)
SAGG PROJECT^8970.1
"^DIC",8970.1,8970.1,0,"GL")
^KMPS(8970.1,
"^DIC",8970.1,8970.1,"%D",0)
^^2^2^2980227^
"^DIC",8970.1,8970.1,"%D",1,0)
This file is used by the SAGG (Statistical Analysis of Global Growth)
"^DIC",8970.1,8970.1,"%D",2,0)
Project's collection routines.
"^DIC",8970.1,"B","SAGG PROJECT",8970.1)

**END**
**END**

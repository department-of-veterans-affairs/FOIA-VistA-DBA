$TXT Created by ANDREWS,BOB at CPRS27.FO-SLC.MED.VA.GOV  (KIDS) on Monday, 11/27/06 at 12:50
=============================================================================
Run Date: DEC 28, 2006                     Designation: OR*3*260
Package : OR - ORDER ENTRY/RESULTS REPORTING  Priority: Mandatory
Version : 3       SEQ #238                      Status: Released
                  Compliance Date: JAN 28, 2007
=============================================================================


Subject: Miscellaneous updates

Category: 
  - Routine

Description:
============

  
 This patch fixes some problems remaining from CPRS GUI v26 release 
 (OR*3.0*215). These corrections all apply to only the M routines on 
 the server and do not require changes to the GUI executable code.
 This patch queues a post-init process that cleans up any date format
 corrections to the Clinical Reminder Index for Orders.
  
 1. Allergies - User Privilege for entering "Entered in Error"
 [CQ 11166] The parameter, OR ALLERGY ENTERED IN ERROR, was added in v26 
 to control who could mark an allergy as entered in error from the cover 
 sheet. Entity settings for USER CLASS could be set but it didn't account 
 for parent-child class relationships and the ability to override at lower 
 levels. Depending on how the user class was set up, a user could mark 
 allergies as entered in error when they shouldn't have been able to or 
 vice-versa. This patch corrects the behavior so that the user class 
 setting works as it should. 
  
 2. Diets - Printing of Diet Orders
 [Remedy #151709] For inpatient delayed diet orders, given certain 
 combinations of print parameter settings and delay events, it was 
 possible for outpatient special meal vouchers to print for meal types 
 other than outpatient special meals. This should be a rare occurrence and 
 is difficult to reproduce, but there was a clear logic error in the code 
 that has now been corrected.
  
 3. Scheduling - Schedule Replacement Modifications
 [CQ 11427] Recommended coding changes were made.
 [CQ 12172, CQ 12145] When Scheduling Replacement is implemented, there 
 may be occasions when it becomes unavailable for use. Error messages are 
 now displayed on the CPRS GUI Chart application when attempting to select 
 the Provider and Location for current activities.
  
 4. Reminders - Clinical Reminder Index Cleanup
 [Remedy # 151636] The Clinical Reminder Index for Orders is checked for 
 any invalid Fileman date formats (where the time format ends with a 
 zero). These start and/or stop dates are corrected in the Orders file and 
 the Clinical Reminder Index is set correctly. This occurs automatically
 when installing this patch via a queued job from the post-init). A Mailman
 message is sent to the installer when this process has completed.
  
 5. Vitals - BMI added to Vitals for Coversheet and Graphing
 [CQ 8312, CQ 9658] Body Mass Index (BMI), is displayed under the Vitals 
 section of the Coversheet. It is also selectable for graphing.
  
 6. Graphing - Misc. Fixes
 [Remedy # 152261] Non-va Meds were not being graphed when the start date 
 was not specifically entered. Non-va Meds will now graph using the 
 date/time entered as the default start date when the start date is not 
 specified.
 -- Inactive Vital measurements are now screened out when making 
 selections or defining views.
 -- A problem was fixed where views used for defining graph reports were 
 not being recognized unless they were entered in all uppercase characters 
 -- A problem where parameter, ORWG GRAPH EXCLUDE DATA TYPE, 
 was not programmed to use SERVICE level settings is now fixed.
 -- The parameter, ORWG GRAPH PUBLIC EDITOR CLASS, was changed to now
 only use the SYSTEM level setting. (*see install instructions)
 -- The data source, Treatments, is removed from use with graphing. The 
 data from the V Treatment file is not generally used by VA facilities. 
 Any public or personal views using this file are changed so that the file 
 number 9000010.15 is removed. This occurs automatically when installing 
 this patch (via the post-init).
  
 Test Sites
 ==========
 Northern California Health Care System
 Tomah VAMC
 Upstate NY HCS (VISN 2)
 West Palm Beach
  
 Documentation:
 ==============
 The CPRS GUI User Manual and CPRS GUI Technical Manual have been updated
 to reflect the enhancements provided by this patch.  The updated
 documentation is available in the form of a (.PDF) file, as follows:
  
     CPRSGUITM.PDF       CPRS GUI Technical Manual
     CPRSGUIUM.PDF       CPRS GUI User Manual
  
 There are also (.DOC) files of both manuals available at the same
 locations.
  
 These files can be retrieved in BINARY format by FTP. The preferred method
 is to FTP the files from
  
     download.vista.med.va.gov    
  
 which will transmit the files from the first available FTP server.
  
 The files may also be downloaded directly from a particular FTP location
 at the following locations:
  
    CIO FIELD OFFICE   FTP ADDRESS                 DIRECTORY
    ----------------   -------------------------   --------------------
    Albany             ftp.fo-albany.med.va.gov    [anonymous.software]
    Hines              ftp.fo-hines.med.va.gov     [anonymous.software]
    Salt Lake City     ftp.fo-slc.med.va.gov       [anonymous.software]
  
 The documentation (both .PDF and .DOC) can also be found on the VistA
 Document Library Web page: (http://www.va.gov/vdl).
  
 INSTALLATION INSTRUCTIONS:
 ==========================
 *NOTE
 Before installing this patch you may want to use the General Parameter Tools
 menu to List Values for a Selected Parameter for ORWG GRAPH PUBLIC EDITOR
 CLASS. This patch removes all values except those at the SYS level.
  
 This patch can be loaded with users in the system, but it should be
 installed during non-peak hours.  Installation time will be less than
 two minutes.
  
 1.  Choose the PackMan message containing this patch and invoke the
     INTALL/CHECK MESSAGE Packman option.
  
 2.  Start up the Kernel Installation and Distribution System Menu [XPD
     MAIN]:
  
             Edits and Distribution ...
             Utilities ...
             Installation ...
  
     Select Kernel Installation & Distribution System Option:
     Installation
  
             1      Load a Distribution
             2      Verify Checksums in Transport Global
             3      Print Transport Global
             4      Compare Transport Global to Current System
             5      Backup a Transport Global
             6      Install Package(s)
                    Restart Install of Package(s)
                    Unload a Distribution
  
 3.  From this menu, it is highly recommended that you use the following
     options (When prompted for the INSTALL NAME, enter OR*3.0*260):
  
     a.  Verify Checksums in Transport Global - This option will verify the
         checksums of routines included in this patch.
     b.  Print Transport Global - This option will print out a list of all
         the components exported in this patch.
     c.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch is
         installed.  It compares all components of this patch (routines,
         DD's, templates, etc.).
     d.  Backup a Transport Global - This option will back up the current
         versions of the routines in this patch before it is installed.
  
 4.  Use the Install Package(s) option and select the package OR*3.0*260.
  
     a.  When prompted "Want KIDS to INHIBIT LOGONs during the install?
         YES//", answer NO.
     b.  When prompted "Want to DISABLE Scheduled Options and Menu Options
         and Protocols? YES//", answer NO.
  
  
 POST-INSTALLATION INSTRUCTIONS:
 ===============================
 The installation will automatically run a queued process to correct the
 format of any non-FileMan dates in the Orders file and reset any needed
 Clinical Reminder indexes. The queued job takes 10-30 minutes to complete
 and sends an email to the installer. The information on the email documents 
 any changes made.
  
  
 ROUTINE SUMMARY
 ===============
 The following is a list of the routines included in this patch.  
 The second line of each of these routines now looks like: 
  
    ;;3.0;ORDER ENTRY/RESULTS REPORTING;**[Patch List]**;Dec 17, 1997
  
                         CHECK^XTSUMBLD results
   
  Routine       Before Patch    After Patch    Patch List 
  -------       ------------    -----------    ----------
  OR3CONV       8524615         8524615        **14,215,260**
  ORPR01        6946125         7348484        **11,69,92,260**
  ORPR02        16310657        16692990       **11,260**
  ORPRS06       4552380         4397341        **11,69,99,215,260**
  ORPXRM        3416962         3423392        **157,260**
  ORQQVI        8533995         8719271        **10,198,215,250,260**
  ORQRY01       3804671         4056440        **153,174,215,260**
  ORWCV         17206105        17460947       **10,85,109,132,209,214,
                                                 195,215,260**
  ORWD1         8603093         8792456        **10,85,140,215,260**
  ORWDAL33      778465          1305374        **215,260**
  ORWGAPI4      14745323        14889612       **215,260**
  ORWGAPIA      8438296         8670709        **215,251,260**
  ORWGAPIP      9904961         10061108       **215,260**
  ORWGAPIR      13592901        13686082       **215,260**
  ORWGAPIT      9623397         9665416        **215,260**
  ORWGAPIU      10387804        11056924       **215,260**
  ORWGAPIX      1954235         4734792        **215,260**
  ORY260        n/a             6533570        **260**
  
 Note -- the CHECK1 checksum for OR3CONV shows n/a. This checksum is
 actually the same as before this patch (only comment lines were changed).

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: OR3CONV
    Before:       n/a  After: B58054933  **14,215,260**
Routine Name: ORPR01
    Before: B18351453  After: B19254955  **11,69,92,260**
Routine Name: ORPR02
    Before: B41253517  After: B43219777  **11,260**
Routine Name: ORPRS06
    Before: B11670142  After: B11029541  **11,69,99,215,260**
Routine Name: ORPXRM
    Before: B12483594  After: B12504214  **157,260**
Routine Name: ORQQVI
    Before: B39275783  After: B40454772  **10,198,215,250,260**
Routine Name: ORQRY01
    Before:  B8406536  After:  B8896457  **153,174,215,260**
Routine Name: ORWCV
    Before: B71237743  After: B73087696  **10,85,109,132,209,214,195,215,260**
Routine Name: ORWD1
    Before: B27971902  After: B27963897  **10,85,140,215,260**
Routine Name: ORWDAL33
    Before:  B1116079  After:  B2071002  **215,260**
Routine Name: ORWGAPI4
    Before: B84779852  After: B86012135  **215,260**
Routine Name: ORWGAPIA
    Before: B82316738  After: B86031507  **215,251,260**
Routine Name: ORWGAPIP
    Before: B44221334  After: B44949534  **215,260**
Routine Name: ORWGAPIR
    Before: B42089877  After: B42620788  **215,260**
Routine Name: ORWGAPIT
    Before: B58271745  After: B58427487  **215,260**
Routine Name: ORWGAPIU
    Before: B45244899  After: B48983345  **215,260**
Routine Name: ORWGAPIX
    Before:  B7674537  After: B26817522  **215,260**
Routine Name: ORY260
    Before:       n/a  After: B23654256  **260**

=============================================================================
User Information:
Entered By  : ANDREWS,BOB                   Date Entered  : JUN 19, 2006
Completed By: SCHLEHUBER,PAM                Date Completed: DEC 27, 2006
Released By : PIERSON,YVONNE E              Date Released : DEC 28, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

$TXT Created by SMULLEN,GEOFF at MNTVLL.FO-ALBANY.MED.VA.GOV  (KIDS) on Wednesday, 01/10/07 at 11:20
=============================================================================
Run Date: FEB 22, 2007                     Designation: IVM*2*101
Package : IVM - INCOME VERIFICATION MATCH     Priority: Mandatory
Version : 2       SEQ #101                      Status: Released
                  Compliance Date: MAR 25, 2007
=============================================================================


Subject: FIX FILED BY IVM ERROR

Category: 
  - Routine

Description:
============

  
 I. OVERVIEW
  
  HEC shares Means Tests with sites of record for the patient.  The
  Means Test can be sourced from HEC or another site.  Sites receiving
  Means Tests that were entered at another site are not allowed to edit
  that Means Test.  A problem has been discovered where a site that created
  the Means Test is not able to edit the dependents associated with the
  Means Test.
  
  
 II. ASSOCIATED REMEDY TICKETS & NEW SERVICE REQUESTS
  
 The following section lists the Remedy tickets and/or New Service Requests
 associated with this patch.
  
 1. Associated Remedy Tickets:
    -----------------------------------------
    HD0000000063536 - TAM-0603-32193  INACTIVATE DEPENDENT FILED BY IVM
                    Problem: The process of filing SHARED tests (from
                             other VA medical centers) is populating the
                             FILED BY IVM fields for the dependent entries
                             in the PATIENT RELATION file (#408.12).
  
                   Solution: Change the data stored in the FILED BY IVM
                             field when a Means Test is received as part
                             of MT Sharing functions from another site.
                             FILED BY IVM should only indicate "YES" when
                             the source of the Means Test is DCD or IVM.
                             Clean up the PATIENT RELATION file in VistA
                             to remove the data in those 2 fields so that
                             sites can use the VistA options to edit.
  
  
 2. Associated New Service Request(s):
    -----------------------------------------
    NONE 
  
  
 III. FUNCTIONAL OVERVIEW
  
  When a Means Test is received from HEC as part of Means Test Sharing,
  Patient Relation entries are made in the PATIENT RELATION file
  (408.12).  When the Means Test originates from HEC, VistA limits the
  edit functions available to users at the site.  Changes to Patient
  Relation data associated with the Means Test may be limited depending
  on the value of the FILED BY IVM field (#.03 on the EFFECTIVE DATE
  multiple) in the PATIENT RELATION file (#408.12).  The FILED BY IVM
  field indicates "YES" when the Means Test related to the Patient
  Relation originated from HEC.  The Means Test Sharing system also
  shares tests that originate from other VA medical centers.  A site
  that receives Means Test and Patient Relation information originating
  from another medical center is not able to edit that information.
  HEC does not share Means Test and Patient Relation information back to
  the originating site UNLESS a future Means Test is created.  In that
  case, the originating site will receive the future test from HEC.
  When an originating site receives a future test from HEC, the system
  does not currently allow edits to the Patient Relation data.  This
  patch will change the data stored in the FILED BY IVM field so that
  an originating site can edit Patient Relation information when a
  future means test is returned from HEC.
   
  This patch also executes a post-installation routine to clean up
  existing corruption in the FILED BY IVM field for Means Test
  Patient Relation data received through Means Test Sharing that
  originates at another medical center.  This post-installation
  routine will create an ^XTMP("IVM*2*101" global array so IRM staff
  can review the FILED BY IVM fields corrected.  That process also
  sends a VA Mailman message to the person who completes the
  installation.
  
  
 IV. TECHNICAL COMPONENTS
  
 The following section describes the technical components being 
 exported with this patch.
  
 1. The following ROUTINE(s) will be added/modified.
  
  ROUTINE SUMMARY:
  ================
  The following is a list of the routines included in this patch.  
  The second line of each of these routines now looks like: 
  
      <tab>;;2.0;INCOME VERIFICATION MATCH;**[patch list]**; 21-OCT-94
   
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  IVM2101C                   N/A              9038589             101
  IVMCM3                 6279455              6766096           17,101
  IVMUM3                 3411506              3648339          1,17,101
  
  Number of routines in patch:           3
       Number of new routines:           1
   Number of routines changed:           2 
  
  
 V. INSTALLATION INSTRUCTIONS
  
  Installation Steps:
  ===================
  * Users On the System:
     This patch may be installed with users on the system, but should be
     loaded during non-peak hours to minimize disruption to users and to
     reduce the possibility of errors when the routines are updated.
  
  * Software Installation Time:
     The estimated installation time is less than 5 minutes during off peak
     hours.
  
   1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
      the KIDS distribution included with this message.
  
   2. From the 'Kernel Installation & Distribution System' menu, select the
      Installation menu.
  
   3. From this menu, you may now elect to use the following options (when
      prompted for INSTALL NAME, enter IVM*2.0*101).
  
      a. Backup a Transport Global - This option will create a backup
         message of any routines exported with the patch.  It will NOT
         backup any changes such as DDs or templates.
  
      b. Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when the patch is
         installed.  It compares all components of the patch (routines,
         DDs, templates, etc.).
  
      c. Verify Checksums in Transport Global - This option will allow you
         to ensure the integrity of the routines that are in the transport
         global.
  
      d. Print Transport Global - this option will allow you to view the
         components of the KIDS build.
  
   4. Use the Install Package(s) option and select package IVM*2.0*101.
  
   5. When prompted 'Want KIDS to INHIBIT LOGONs during the install?
      YES//', it is recommended you answer NO.
  
   6. When prompted to 'Want to DISABLE Scheduled Options, Menu Options,
      and Protocols? YES//', respond No.
  
  
 VI. IMPLEMENTATION STEPS
  
  There are no special implementation steps to take after the successful
  installation of this software.  A post-installation is included with this
  patch.  The Post-install will send a mail message to the installer.  That
  message will tell the installer the results of the post-installation.
  The post-install will also create a ^XTMP temporary global that includes
  an indication of the data that was corrected.  If, for any reason the
  post install's queued job (description of taskman task will be 
  "IVM*2*101 - FILED BY IVM FLAG CLEANUP") has to be stopped or needs
  to be restarted, this can be accomplished by executing the following
  from programmer mode:
  
           D EP^IVM2101C to queue the job to run
  
  
  The post-installation routine (IVM2101C) will check the values in the
  FILED BY IVM fields against the associated SOURCE OF INCOME TEST fields
  and correct FILED BY IVM, if necessary.  One of the following messages
  will be displayed when installing this patch:
  
       Task: #### Queued.
   OR
       FILED BY IVM FLAG CLEANUP process was completed in previous run.
   OR
       TASK: #### is currently running FILED BY IVM FLAG CLEANUP
       process. Duplicate process cannot be started. 
  
  
  The definition of these messages are as follows:
  
    Task: #### Queued.
    [Def: The Post-install was successfully queued.]
  
    FILED BY IVM FLAG CLEANUP process was completed in previous run.
    [Def: The FILED BY IVM conversion was previously completed]
  
    TASK: #### is currently running FILED BY IVM FLAG CLEANUP
    process. Duplicate process cannot be started.
    [Def: Task exists and is either running, or pending and scheduled]
  
  
  Post-Installation Mail Messages
  ===============================
  
  The installer will receive one of the following messages:
  
   Subj: IVM*2*101 - FILED BY IVM FLAG CLEANUP already completed  [#121]
   11/22/06@12:03  1 line
   From: IVM*2*101 INSTALLATION PROCESS  In 'IN' basket.   Page 1  *New*
   ------------------------------------------------------------------------
   FILED BY IVM FLAG CLEANUP process was completed in previous run.
  
   Enter message action (in IN basket): Ignore// 
  
  
  
   Subj: IVM*2*101 - FILED BY IVM FLAG CLEANUP running  [#122] 
   11/22/06@12:04 2 lines
   From: IVM*2*101 INSTALLATION PROCESS  In 'IN' basket.   Page 1  *New*
   ------------------------------------------------------------------------
   TASK: 123 is currently running FILED BY IVM FLAG CLEANUP
   process. Duplicate process cannot be started.
  
   Enter message action (in IN basket): Ignore// 
  
  
  
   Subj: IVM*2*101 - FILED BY IVM FLAG CLEANUP completed [#123]
   11/22/06@12:07 8 lines
   From: IVM*2*101 INSTALLATION PROCESS  In 'IN' basket.   Page 1  *New*
   ------------------------------------------------------------------------
   TASK: 123 FILED BY IVM FLAG CLEANUP
  
   FILED BY IVM error cleanup process has completed.  Review the
   following ^XTMP global for details on the Patient Relation file (408.12)
   records converted: ^XTMP("IVM*2*101",
  
   This global will be deleted in no more than 120 days from the date
   of this message.
  
   Enter message action (in IN basket): Ignore// 
  
  
  
  If the background job is stopped during execution, the installer will
  receive the following message:
  
   Subj: IVM*2*101 - FILED BY IVM FLAG CLEANUP stopped [#124]
   11/22/06@12:07 6 lines
   From: IVM*2*101 INSTALLATION PROCESS  In 'IN' basket.   Page 1  *New*
   ------------------------------------------------------------------------
   TASK: 123 FILED BY IVM FLAG CLEANUP
  
   FILED BY IVM error cleanup process was requested to stop
   by the user. Please restart the process by using the following
   command at the programmer prompt:
   D EP^IVM2101C
  
   Enter message action (in IN basket): Ignore// 
  
  
  ^XTMP Global
  ============
  The post-installation creates a ^XTMP global that records information
  about the FILED BY IVM data changed.  The global is defined so that the
  system will purge it 120 days after the execution of the post-installation
  cleanup begins.  The global also records information about the last record
  processed so that the post-install can be restarted, if it is stopped
  during execution.  IRM can also review the global for changes to data on
  their system.
   
  An example of the global is:
  
  
  ^XTMP("IVM*2*101",0)=3070321^3061121^IVM*2*101 FIX FILED BY IVM ERROR
  ^XTMP("IVM*2*101",1,"ANNUAL MT IEN")=3363
                        "PATIENT IEN")=7172037
               "PATIENT RELATION IEN")=2950
              "PREVIOUS FILED BY IVM")=1^YES
              "SOURCE OF INCOME TEST")=1^VAMC
  ^XTMP("IVM*2*101",2,"ANNUAL MT IEN")=3218
                        "PATIENT IEN")=7172039
               "PATIENT RELATION IEN")=2930
              "PREVIOUS FILED BY IVM")=1^YES
              "SOURCE OF INCOME TEST")=1^VAMC
  ^XTMP("IVM*2*101","CONFIG","COMPLETED")=1
                           "CURRENT IEN")=9999955641
                            "START DATE")=11/21/2006 3:42:36 pm
                             "STOP DATE")=11/21/2006 3:42:36 pm
                                  "TASK")=123
                           "TOTAL FOUND")=2
                       "TOTAL PROCESSED")=1814
  
  
 VII. TEST SITES
  
 The following sites participated in the testing of the IVM*2.0*101
 software.
  
  Test Sites                       
  ------------------------       
 Bay Pines (Large)
 Little Rock (Large)
 Portland (Integrated) 

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: IVM2101C
    Before:       n/a  After: B40905797  **101**
Routine Name: IVMCM3
    Before: B14729184  After: B18372205  **17,101**
Routine Name: IVMUM3
    Before:  B6919069  After:  B8050850  **1,17,101**

=============================================================================
User Information:
Entered By  : MULLER,RICHARD                Date Entered  : AUG 05, 2004
Completed By: SADA,WILLIAM J                Date Completed: FEB 21, 2007
Released By : GANUS,MAUNETTE                Date Released : FEB 22, 2007
=============================================================================


Packman Mail Message:
=====================

$END TXT

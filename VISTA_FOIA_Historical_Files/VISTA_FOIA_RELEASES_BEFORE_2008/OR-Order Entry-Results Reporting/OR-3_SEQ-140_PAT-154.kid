EMERGENCY Released OR*3*154 SEQ #140
Extracted from mail message
**KIDS**:OR*3.0*154^

**INSTALL NAME**
OR*3.0*154
"BLD",3849,0)
OR*3.0*154^ORDER ENTRY/RESULTS REPORTING^0^3020808^y
"BLD",3849,4,0)
^9.64PA^^
"BLD",3849,"KRN",0)
^9.67PA^8989.52^19
"BLD",3849,"KRN",.4,0)
.4
"BLD",3849,"KRN",.401,0)
.401
"BLD",3849,"KRN",.402,0)
.402
"BLD",3849,"KRN",.403,0)
.403
"BLD",3849,"KRN",.5,0)
.5
"BLD",3849,"KRN",.84,0)
.84
"BLD",3849,"KRN",3.6,0)
3.6
"BLD",3849,"KRN",3.8,0)
3.8
"BLD",3849,"KRN",9.2,0)
9.2
"BLD",3849,"KRN",9.8,0)
9.8
"BLD",3849,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",3849,"KRN",9.8,"NM",1,0)
ORWRA^^0^B7776790
"BLD",3849,"KRN",9.8,"NM","B","ORWRA",1)

"BLD",3849,"KRN",19,0)
19
"BLD",3849,"KRN",19.1,0)
19.1
"BLD",3849,"KRN",101,0)
101
"BLD",3849,"KRN",409.61,0)
409.61
"BLD",3849,"KRN",771,0)
771
"BLD",3849,"KRN",870,0)
870
"BLD",3849,"KRN",8989.51,0)
8989.51
"BLD",3849,"KRN",8989.52,0)
8989.52
"BLD",3849,"KRN",8994,0)
8994
"BLD",3849,"KRN","B",.4,.4)

"BLD",3849,"KRN","B",.401,.401)

"BLD",3849,"KRN","B",.402,.402)

"BLD",3849,"KRN","B",.403,.403)

"BLD",3849,"KRN","B",.5,.5)

"BLD",3849,"KRN","B",.84,.84)

"BLD",3849,"KRN","B",3.6,3.6)

"BLD",3849,"KRN","B",3.8,3.8)

"BLD",3849,"KRN","B",9.2,9.2)

"BLD",3849,"KRN","B",9.8,9.8)

"BLD",3849,"KRN","B",19,19)

"BLD",3849,"KRN","B",19.1,19.1)

"BLD",3849,"KRN","B",101,101)

"BLD",3849,"KRN","B",409.61,409.61)

"BLD",3849,"KRN","B",771,771)

"BLD",3849,"KRN","B",870,870)

"BLD",3849,"KRN","B",8989.51,8989.51)

"BLD",3849,"KRN","B",8989.52,8989.52)

"BLD",3849,"KRN","B",8994,8994)

"BLD",3849,"QUES",0)
^9.62^^
"BLD",3849,"REQB",0)
^9.611^1^1
"BLD",3849,"REQB",1,0)
OR*3.0*148^2
"BLD",3849,"REQB","B","OR*3.0*148",1)

"MBREQ")
0
"PKG",110,-1)
1^1
"PKG",110,0)
ORDER ENTRY/RESULTS REPORTING^OR^Order Entry/Results Reporting
"PKG",110,20,0)
^9.402P^^
"PKG",110,22,0)
^9.49I^1^1
"PKG",110,22,1,0)
3.0^2971217
"PKG",110,22,1,"PAH",1,0)
154^3020808
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","ORWRA")
0^1^B7776790
"RTN","ORWRA",1,0)
ORWRA ; ALB/MJK/REV/JDL -Imaging Calls ;8/6/02  1:30
"RTN","ORWRA",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**10,85,109,135,132,148,154**;Dec 17, 1997
"RTN","ORWRA",3,0)
EXAMS(ROOT,DFN) ; Return imaging exams
"RTN","ORWRA",4,0)
 ; RPC: ORWRA IMAGING EXAMS
"RTN","ORWRA",5,0)
 ;  See RPC definition for details on input and output parameters
"RTN","ORWRA",6,0)
 D GET(0)
"RTN","ORWRA",7,0)
 Q
"RTN","ORWRA",8,0)
EXAMS1(ROOT,DFN) ; Return imaging exams
"RTN","ORWRA",9,0)
 ; RPC: ORWRA IMAGING EXAMS1
"RTN","ORWRA",10,0)
 ;  See RPC definition for details on input and output parameters
"RTN","ORWRA",11,0)
 D GET(1)
"RTN","ORWRA",12,0)
 Q
"RTN","ORWRA",13,0)
GET(GSITE)      ;Get the data
"RTN","ORWRA",14,0)
 N I,ID,RADATA,STRING,SITE,ORCX
"RTN","ORWRA",15,0)
 S RADATA=$NA(^TMP($J,"RAE1",DFN))
"RTN","ORWRA",16,0)
 S ROOT=$NA(^TMP($J,"ORAEXAMS"))
"RTN","ORWRA",17,0)
 S ORCX=1  ;show cancelled reports
"RTN","ORWRA",18,0)
 K @RADATA,@ROOT
"RTN","ORWRA",19,0)
 ;
"RTN","ORWRA",20,0)
 ; -- set date range
"RTN","ORWRA",21,0)
 D GETDEFG(.STRING)
"RTN","ORWRA",22,0)
 D EN1^RAO7PC1(DFN,$P(STRING,U),$P(STRING,"^",2),$P(STRING,"^",3),ORCX)
"RTN","ORWRA",23,0)
 ;
"RTN","ORWRA",24,0)
 ; -- reformat data array for rpc
"RTN","ORWRA",25,0)
 S I=0,ID="",SITE=""
"RTN","ORWRA",26,0)
 I $G(GSITE) S SITE=$$SITE^VASITE,SITE=$P(SITE,"^",2)_";"_$P(SITE,"^",3)_U
"RTN","ORWRA",27,0)
 F  S ID=$O(@RADATA@(ID)) Q:ID=""  D
"RTN","ORWRA",28,0)
 . S I=I+1
"RTN","ORWRA",29,0)
 . S @ROOT@(I)=SITE_ID_U_(9999999.9999-ID)_U_@RADATA@(ID)
"RTN","ORWRA",30,0)
 K @RADATA
"RTN","ORWRA",31,0)
 Q
"RTN","ORWRA",32,0)
 ;
"RTN","ORWRA",33,0)
GETDEFG(Y) ; -- get default context settings for GUI imaging reports
"RTN","ORWRA",34,0)
 N BEG,END,MAX
"RTN","ORWRA",35,0)
 ;!! The following code is for CAPRI, don't change it
"RTN","ORWRA",36,0)
 ;if called from CAPRI, show all reports
"RTN","ORWRA",37,0)
 D OP^XQCHK
"RTN","ORWRA",38,0)
 I $P($G(XQCY0),"^",1)="DVBA CAPRI GUI" D
"RTN","ORWRA",39,0)
 . S BEG=$$DT^ORCHTAB1("T-36500")
"RTN","ORWRA",40,0)
 . S END=$$DT^ORCHTAB1("T")
"RTN","ORWRA",41,0)
 . S MAX="9999"
"RTN","ORWRA",42,0)
 . S Y=BEG_"^"_END_"^"_MAX
"RTN","ORWRA",43,0)
 ; if not CAPRI, use CPRS defaults
"RTN","ORWRA",44,0)
 E  I $P($G(XQCY0),"^",1)'="DVBA CAPRI GUI" D GETIMG^ORWTPD(.Y,"")
"RTN","ORWRA",45,0)
 Q
"RTN","ORWRA",46,0)
GETDEF(Y) ; -- get default context settings for LM imaging reports
"RTN","ORWRA",47,0)
 N BEG,CONTEXT,END,MAX
"RTN","ORWRA",48,0)
 S CONTEXT=$$GET^XPAR("ALL","ORCH CONTEXT REPORTS")
"RTN","ORWRA",49,0)
 S BEG=$$DT^ORCHTAB1($P(CONTEXT,";"))
"RTN","ORWRA",50,0)
 S END=$$DT^ORCHTAB1($P(CONTEXT,";",2))
"RTN","ORWRA",51,0)
 S MAX=$P(CONTEXT,";",5)
"RTN","ORWRA",52,0)
 D OP^XQCHK
"RTN","ORWRA",53,0)
 I $P($G(XQCY0),"^",1)="DVBA CAPRI GUI" D
"RTN","ORWRA",54,0)
 .S BEG=$$DT^ORCHTAB1("T-36500")
"RTN","ORWRA",55,0)
 .S END=$$DT^ORCHTAB1("T")
"RTN","ORWRA",56,0)
 .S MAX="9999"
"RTN","ORWRA",57,0)
 S Y=BEG_"^"_END_"^"_MAX
"RTN","ORWRA",58,0)
 Q
"RTN","ORWRA",59,0)
 ;
"RTN","ORWRA",60,0)
RPT1(ROOT,DFN,ORID,ALPHA,OMEGA,DTRANGE,REMOTE,ORMAX) ; -- return imaging report
"RTN","ORWRA",61,0)
 D RPT(.ROOT,.DFN,.ORID,.ALPHA,.OMEGA,.DTRANGE,.REMOTE)
"RTN","ORWRA",62,0)
 Q
"RTN","ORWRA",63,0)
RPT(ROOT,DFN,ORID,ALPHA,OMEGA,DTRANGE,REMOTE) ; -- return imaging report
"RTN","ORWRA",64,0)
 ;  RPC: ORWRA REPORT TEXT
"RTN","ORWRA",65,0)
 ;  See RPC definition for details on input and output parameters
"RTN","ORWRA",66,0)
 ; -- init locals and globals
"RTN","ORWRA",67,0)
 N ID,LCNT,ORVP,EXAMDATE,CASENMBR
"RTN","ORWRA",68,0)
 S RADATA=$NA(^TMP($J,"RAE3"))
"RTN","ORWRA",69,0)
 S ROOT=$NA(^TMP("ORXPND",$J))
"RTN","ORWRA",70,0)
 K @RADATA,@ROOT
"RTN","ORWRA",71,0)
 ; 
"RTN","ORWRA",72,0)
 ; -- set up exam id and call to get report text
"RTN","ORWRA",73,0)
 S ID=$TR(ORID,"-",U)
"RTN","ORWRA",74,0)
 ;
"RTN","ORWRA",75,0)
 ; -- set up counter and vp local for dfn for formating call
"RTN","ORWRA",76,0)
 S LCNT=0,ORVP=DFN_";DPT("
"RTN","ORWRA",77,0)
 D XRAYS^ORCXPND1
"RTN","ORWRA",78,0)
 K @RADATA
"RTN","ORWRA",79,0)
 Q
"RTN","ORWRA",80,0)
 ;
"RTN","ORWRA",81,0)
TEST ; -- test to get exam list
"RTN","ORWRA",82,0)
 N I,ROOT,DFN
"RTN","ORWRA",83,0)
 S DFN=16
"RTN","ORWRA",84,0)
 D EXAMS1(.ROOT,DFN)
"RTN","ORWRA",85,0)
 W !,"Root: ",ROOT
"RTN","ORWRA",86,0)
 S I=0 F  S I=$O(@ROOT@(I)) Q:'I  W !,@ROOT@(I)
"RTN","ORWRA",87,0)
 Q
"RTN","ORWRA",88,0)
 ;
"RTN","ORWRA",89,0)
TEST1 ; -- test to print reprt for first 3 exams
"RTN","ORWRA",90,0)
 N ORI,ROOT,ROOT1,L,X,DFN
"RTN","ORWRA",91,0)
 S DFN=16
"RTN","ORWRA",92,0)
 D EXAMS1(.ROOT,DFN)
"RTN","ORWRA",93,0)
 S ORI=0 F  S ORI=$O(@ROOT@(ORI)) Q:'ORI  D  Q:ORI=3
"RTN","ORWRA",94,0)
 . S X=@ROOT@(ORI)
"RTN","ORWRA",95,0)
 . D RPT1(.ROOT1,DFN,$P(X,U))
"RTN","ORWRA",96,0)
 . S L=0 F  S L=$O(@ROOT1@(L)) Q:'L  W !,@ROOT1@(L,0)
"RTN","ORWRA",97,0)
 Q
"VER")
8.0^22.0
**END**
**END**

$TXT Created by ORMSBY,SKIP at FM22-PATCH.FO-OAKLAND.MED.VA.GOV  (KIDS) on Tuesday, 11/25/03 at 05:05
=============================================================================
Run Date: FEB 03, 2004                     Designation: DI*22*129
Package : DI - VA FILEMAN                     Priority: Mandatory
Version : 22       SEQ #120                     Status: Released
                  Compliance Date: MAR 05, 2004
=============================================================================

Associated patches: (v)DI*22*76    <<= must be installed BEFORE `DI*22*129'
                    (v)DI*22*104   <<= must be installed BEFORE `DI*22*129'

Subject: Auditing Fixes

Category: 
  - Routine

Description:
============

 This patch corrects the following issues:
  
   When Auditing was turned on for a field in a file the wrong individual
 audit data for that field could be recorded.  An example might be:
  
   NUMBER: 3525930                INTERNAL ENTRY NUMBER: 5127201097
   DATE/TIME RECORDED: OCT 03, 2003@11:16:45
   FIELD NUMBER: .132                    USER: <a name>
   NEW INTERNAL VALUE: N                 DATATYPE OF NEW VALUE: RSXa
   MENU OPTION USED: SDAM APPT MGT
   PROTOCOL or OPTION USED: SDAM PATIENT DEMOGRAPHICS
   ENTRY NAME (c): <a name>  FIELD NAME (c): PHONE NUMBER [WORK]
   OLD VALUE (c): UNKNOWN                NEW VALUE (c): <a phone #>
  
 In this example notice that the "DATATYPE OF NEW VALUE" is "RSXa", which 
 means:
  R=Required
  S=Set of Codes
  X=INPUT TRANSFORM has been modified
  a=Auditing all the time
  
 And yet when we look at the actual Data Dictionary definition for FIELD
 NUMBER .132 in the Patient(#2) file, PHONE NUMBER [WORK](#.132) we see the
 "DATATYPE OF NEW VALUE" is reality "Fa", which means:
  F=Free Text
  a=Auditing all the time
  
 Because the audit field data was incorrect, the "B", "C", and "D" cross
 references could be left unassociated because the data values that are 
 part of the cross reference was incorrect.  The Post-Install routine:
 DIPR129 will go through the "B", "C", and "D" cross references for all
 files above file #1.99999 and remove any of these unassociated cross
 references.  
  
  Note:  Because of the amount of data that can be in the AUDIT(#1.1) file,
 the Post-Install routine DIPR129, which is part of the install, will check
 to see if TaskMan is running.  If TaskMan is running a task will be
 created and the dialog written in the INSTALL(#9.7) file.  If TaskMan is
 not available then Post-Install will run and the dialog will be displayed
 on the installer's screen.  The following is an example post device
 selection:
  
  Install Started for DI*22.0*129 : 
                Jan 29, 2004@14:08:32
  
 Build Distribution Date: Nov 25, 2003
  
  Installing Routines:
                Jan 29, 2004@14:08:32
  
  Running Post-Install Routine: ^DIPR129
 Post Install Task Number is: 2221142
  
  Updating Routine file...
  
  Updating KIDS files...
  
  DI*22.0*129 Installed. 
                Jan 29, 2004@14:08:32
  
  Install Message sent #1482734
  
 Queued Post Install Dialog, Task#: 2221142
 Began checking Audit cross reference: JAN 29, 2004@14:08:34...
 File: 16131 had a total of:1 dangling cross references removed.
 Finished checking Audit cross references: JAN 29, 2004@14:08:40.
  
  
 Documentation Changes
 =====================
  -None-
  
 Blood Bank Team Coordination
 ============================
 Clearance - Nov 19,2003
  
 NOIS
 ====
  MAC-0703-60113; OKL-1003-70680; MAR-1103-20137
  
 Thanks to Test Sites 
 ====================
  MARYLAND HCS
  NORTHERN CALIFORNIA HCS
  OKLAHOMA CITY, OK
  
 Routine Summary: 
 ================
  The following routines are included in this patch.  The second line of 
 these routines now look like: 
   
   <tab>;;22.0;VA FileMan;**[patch list]**;Mar 30, 1999 
   
 CHECK^XTSUMBLD results: 
   
   Routine Name   Before Patch    After Patch     Patch List 
   ============   ============    ===========     ==========
   DIAU           6548236         7492799         76,129
   DIET           3166110         3560691         69,49,104,129
   DIPR129        N/A             1551491         129
  
 Installation Instructions: 
 ==========================
 This patch can be installed with VISTA users online.
 *However, numerous fields within VistA are AUDITED, so it is recommended
 that this patch be Queued for a time of generally least activity.
  
 TaskMan does not need to be STOPPED or placed in a WAIT state and 
 installation should take less than a minute.
  
      1.  AXP/DSM sites: Review your mapped routine set.  If any of the 
 routine(s) listed in the ROUTINE SUMMARY section are mapped, they 
 should be removed from the mapped set at this time.  
  
      2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu.  
 This option will load the KIDS package onto your system.  
  
      3.  The patch has now been loaded into a transport global on your 
 system. You now need to use KIDS to install the transport global.  
   
      4.  On the KIDS menu, under the 'Installation' menu, use the 
 following options: 
             Print Transport Global 
             Compare Transport Global to Current System 
             Verify Checksums in Transport Global 
             Backup a Transport Global 
  
      5.  On the KIDS menu, under the 'Installation' menu, use the 
 following option: 
             Select Installation Option: Install Package(s) 
             Select INSTALL NAME: DI*22.0*129
                                  ===========
         Answer 'NO' to 'Want KIDS to INHIBIT LOGONs during the install?
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
 and Protocols? 
  
      6.  AXP/DSM Sites - After the patch has been installed, rebuild your 
 map set, if necessary.  

Routine Information:
====================

Routine Name:
  - DIET


Routine Checksum:

Routine Name:
  - DIAU


Routine Checksum:

Routine Name:
  - DIPR129


Routine Checksum:

=============================================================================
User Information:
Entered By  : ORMSBY,SKIP                   Date Entered  : JUN 13, 2003
Completed By: SINGH,GURBIR                  Date Completed: FEB 02, 2004
Released By : HARROD,PAUL                   Date Released : FEB 03, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

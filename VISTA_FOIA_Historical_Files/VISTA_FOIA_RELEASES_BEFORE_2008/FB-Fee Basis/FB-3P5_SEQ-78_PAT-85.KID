Released FB*3.5*85 SEQ #78
Extracted from mail message
**KIDS**:FB*3.5*85^

**INSTALL NAME**
FB*3.5*85
"BLD",5742,0)
FB*3.5*85^FEE BASIS^0^3041101^y
"BLD",5742,1,0)
^^2^2^3041028^
"BLD",5742,1,1,0)
Correct the initialization of the variable that hold the out put text for 
"BLD",5742,1,2,0)
the Detail Description.
"BLD",5742,4,0)
^9.64PA^^
"BLD",5742,"INID")

"BLD",5742,"KRN",0)
^9.67PA^8989.52^19
"BLD",5742,"KRN",.4,0)
.4
"BLD",5742,"KRN",.401,0)
.401
"BLD",5742,"KRN",.402,0)
.402
"BLD",5742,"KRN",.403,0)
.403
"BLD",5742,"KRN",.5,0)
.5
"BLD",5742,"KRN",.84,0)
.84
"BLD",5742,"KRN",3.6,0)
3.6
"BLD",5742,"KRN",3.8,0)
3.8
"BLD",5742,"KRN",9.2,0)
9.2
"BLD",5742,"KRN",9.8,0)
9.8
"BLD",5742,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5742,"KRN",9.8,"NM",1,0)
FBAALU^^0^B32617738
"BLD",5742,"KRN",9.8,"NM","B","FBAALU",1)

"BLD",5742,"KRN",19,0)
19
"BLD",5742,"KRN",19.1,0)
19.1
"BLD",5742,"KRN",101,0)
101
"BLD",5742,"KRN",409.61,0)
409.61
"BLD",5742,"KRN",771,0)
771
"BLD",5742,"KRN",870,0)
870
"BLD",5742,"KRN",8989.51,0)
8989.51
"BLD",5742,"KRN",8989.52,0)
8989.52
"BLD",5742,"KRN",8994,0)
8994
"BLD",5742,"KRN","B",.4,.4)

"BLD",5742,"KRN","B",.401,.401)

"BLD",5742,"KRN","B",.402,.402)

"BLD",5742,"KRN","B",.403,.403)

"BLD",5742,"KRN","B",.5,.5)

"BLD",5742,"KRN","B",.84,.84)

"BLD",5742,"KRN","B",3.6,3.6)

"BLD",5742,"KRN","B",3.8,3.8)

"BLD",5742,"KRN","B",9.2,9.2)

"BLD",5742,"KRN","B",9.8,9.8)

"BLD",5742,"KRN","B",19,19)

"BLD",5742,"KRN","B",19.1,19.1)

"BLD",5742,"KRN","B",101,101)

"BLD",5742,"KRN","B",409.61,409.61)

"BLD",5742,"KRN","B",771,771)

"BLD",5742,"KRN","B",870,870)

"BLD",5742,"KRN","B",8989.51,8989.51)

"BLD",5742,"KRN","B",8989.52,8989.52)

"BLD",5742,"KRN","B",8994,8994)

"BLD",5742,"PRE")

"BLD",5742,"QUES",0)
^9.62^^
"BLD",5742,"REQB",0)
^9.611^1^1
"BLD",5742,"REQB",1,0)
FB*3.5*77^2
"BLD",5742,"REQB","B","FB*3.5*77",1)

"MBREQ")
0
"PKG",60,-1)
1^1
"PKG",60,0)
FEE BASIS^FB^Used to pay private vendors
"PKG",60,20,0)
^9.402P^1^1
"PKG",60,20,1,0)
2^^FBPMRG
"PKG",60,20,1,1)

"PKG",60,20,"B",2,1)

"PKG",60,22,0)
^9.49I^1^1
"PKG",60,22,1,0)
3.5^2950130^2950313
"PKG",60,22,1,"PAH",1,0)
85^3041101
"PKG",60,22,1,"PAH",1,1,0)
^^2^2^3041101
"PKG",60,22,1,"PAH",1,1,1,0)
Correct the initialization of the variable that hold the out put text for 
"PKG",60,22,1,"PAH",1,1,2,0)
the Detail Description.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","FBAALU")
0^1^B32617738
"RTN","FBAALU",1,0)
FBAALU ;AISC/GRR,WCIOFO/SAB-CPT CODE & MODIFIER LOOKUP ;7/15/1999
"RTN","FBAALU",2,0)
 ;;3.5;FEE BASIS;**4,77,85**;JAN 30, 1995
"RTN","FBAALU",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","FBAALU",4,0)
 ;
"RTN","FBAALU",5,0)
CPTM(FBDOS,FBDFN,FBCPT,FBMODL) ; Ask CPT Code and optional CPT Modifiers
"RTN","FBAALU",6,0)
 ; input
"RTN","FBAALU",7,0)
 ;   FBDOS - (optional) date of service, fileman format
"RTN","FBAALU",8,0)
 ;   FBDFN - (optional) patient DFN, pointer to file #2 and file #161
"RTN","FBAALU",9,0)
 ;   FBCPT - (optional) default CPT value (internal)
"RTN","FBAALU",10,0)
 ;   FBMODL- (optional) list of default modifiers (internal)
"RTN","FBAALU",11,0)
 ;                      delimited by commas
"RTN","FBAALU",12,0)
 ;                      only used when FBCPT accepted by user
"RTN","FBAALU",13,0)
 ; output
"RTN","FBAALU",14,0)
 ;   FBAACP  - CPT code (internal)
"RTN","FBAALU",15,0)
 ;             OR null if not selected
"RTN","FBAALU",16,0)
 ;             OR @ if default value (FBCPT) was supplied and user
"RTN","FBAALU",17,0)
 ;               entered an @ at the service provided prompt.
"RTN","FBAALU",18,0)
 ;   FBX     - CPT code (external) OR null if not selected
"RTN","FBAALU",19,0)
 ;   FBMODA( - (optional) CPT modifier array
"RTN","FBAALU",20,0)
 ;             FBMODA(#) = CPT modifier (internal)
"RTN","FBAALU",21,0)
 ;               where # is a integer greater than 0
"RTN","FBAALU",22,0)
 ;   FBGOT   - flag (0 or 1) =1 if CPT code was specified and confirmed
"RTN","FBAALU",23,0)
 ;
"RTN","FBAALU",24,0)
INIT ; initialize optional input variables and FBGOT
"RTN","FBAALU",25,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y
"RTN","FBAALU",26,0)
 N FBCATX,FBCPTX,FBEDIT,FBI,FBLAST,FBMOD,FBMODLE,FBMODX,FBTX
"RTN","FBAALU",27,0)
 S:$G(FBDOS)="" FBDOS=DT
"RTN","FBAALU",28,0)
 S FBDFN=$G(FBDFN)
"RTN","FBAALU",29,0)
 S FBGOT=0
"RTN","FBAALU",30,0)
 ;
"RTN","FBAALU",31,0)
ASKCPT ; prompt for CPT code
"RTN","FBAALU",32,0)
 S DIR(0)="PO^81:EMZ"
"RTN","FBAALU",33,0)
 S DIR("A")=$S($G(FBCPT)>0:"",1:"Select ")_"Service Provided"
"RTN","FBAALU",34,0)
 I $G(FBCPT)>0 S DIR("B")=$$CPT^FBAAUTL4(FBCPT)
"RTN","FBAALU",35,0)
 S DIR("?",1)="The Current Procedural Terminology Code (CPT Code) as"
"RTN","FBAALU",36,0)
 S DIR("?",2)="specified on the vendors invoice identifying the service"
"RTN","FBAALU",37,0)
 S DIR("?")="the vendor provided to the veteran."
"RTN","FBAALU",38,0)
 S ICPTVDT=$G(FBDOS) D ^DIR K DIR,ICPTVDT I $D(DTOUT)!$D(DUOUT) G EXIT
"RTN","FBAALU",39,0)
 I $G(FBCPT)]"",X="@" D  G:FBGOT EXIT G ASKCPT
"RTN","FBAALU",40,0)
 . S DIR(0)="Y"
"RTN","FBAALU",41,0)
 . S DIR("A")="SURE YOU WANT TO DELETE THE ENTIRE SERVICE PROVIDED"
"RTN","FBAALU",42,0)
 . D ^DIR K DIR I Y S FBGOT=1,FBAACP="@",FBX="" K FBMODA
"RTN","FBAALU",43,0)
 I Y>0 S FBAACP=+Y,FBX=$P(Y,U,2)
"RTN","FBAALU",44,0)
 E  G EXIT
"RTN","FBAALU",45,0)
 ; *** PASS 3RD PARAMETER TO INCLUDE VA NATIONAL/LOCAL CODES
"RTN","FBAALU",46,0)
 S FBCPTX=$$CPT^ICPTCOD(FBAACP,FBDOS,1)
"RTN","FBAALU",47,0)
 I '$P(FBCPTX,U,7) D  G ASKCPT
"RTN","FBAALU",48,0)
 . W $C(7),!,"     CPT code inactive on date of service ("
"RTN","FBAALU",49,0)
 . W $$FMTE^XLFDT(FBDOS),")"
"RTN","FBAALU",50,0)
 ;
"RTN","FBAALU",51,0)
 K FBMODA
"RTN","FBAALU",52,0)
 I $G(FBCPT)>0,FBCPT=FBAACP,$G(FBMODL)]"" D
"RTN","FBAALU",53,0)
 . N FBI,FBMOD
"RTN","FBAALU",54,0)
 . F FBI=1:1 S FBMOD=$P(FBMODL,",",FBI) Q:FBMOD=""  S FBMODA(FBI)=FBMOD
"RTN","FBAALU",55,0)
 ;
"RTN","FBAALU",56,0)
ASKMOD ; multiply prompt for CPT modifiers
"RTN","FBAALU",57,0)
 ; determine highest number used in list
"RTN","FBAALU",58,0)
 S FBLAST=$O(FBMODA(" "),-1)
"RTN","FBAALU",59,0)
 ; prompt for CPT modifier
"RTN","FBAALU",60,0)
 S DIR(0)="PO^81.3:EMZ"
"RTN","FBAALU",61,0)
 S DIR("A")="Select CPT MODIFIER"
"RTN","FBAALU",62,0)
 S DIR("?")="^D MODHLP^FBAALU"
"RTN","FBAALU",63,0)
 ; *** COMMENT FOLLOWING LINE IF ACCURACY OF API IS NOT FIXED
"RTN","FBAALU",64,0)
 ;S DIR("S")="I $$MODP^ICPTMOD(FBAACP,Y,""I"",FBDOS,1)>0"
"RTN","FBAALU",65,0)
 S FBMODLE=$$MODL^FBAAUTL4("FBMODA","E")
"RTN","FBAALU",66,0)
 W !!,"Current list of modifiers: ",$S(FBMODLE]"":FBMODLE,1:"none")
"RTN","FBAALU",67,0)
 S ICPTVDT=$G(FBDOS) D ^DIR K DIR,ICPTVDT I $D(DTOUT)!$D(DUOUT) G EXIT
"RTN","FBAALU",68,0)
 ; if value was entered then process it and ask another
"RTN","FBAALU",69,0)
 I +Y>0 D  G ASKMOD
"RTN","FBAALU",70,0)
 . S FBMOD=+Y
"RTN","FBAALU",71,0)
 . ; if specified CPT modifier already in list set FBEDIT = it's number
"RTN","FBAALU",72,0)
 . S (FBI,FBEDIT)=0 F  S FBI=$O(FBMODA(FBI)) Q:'FBI  D  Q:FBEDIT
"RTN","FBAALU",73,0)
 . . I FBMODA(FBI)=FBMOD S FBEDIT=FBI
"RTN","FBAALU",74,0)
 . ; if in list then edit the existing modifier
"RTN","FBAALU",75,0)
 . I FBEDIT D  Q:$D(DIRUT)
"RTN","FBAALU",76,0)
 . . S DIR(0)="PO^81.3:EMZ"
"RTN","FBAALU",77,0)
 . . S DIR("A")="  CPT MODIFIER"
"RTN","FBAALU",78,0)
 . . S DIR("B")=$$MOD^FBAAUTL4(FBMODA(FBEDIT))
"RTN","FBAALU",79,0)
 . . ; *** COMMENT FOLLOWING LINE IF ACCURACY OF API IS NOT FIXED
"RTN","FBAALU",80,0)
 . . ;S DIR("S")="I $$MODP^ICPTMOD(FBAACP,Y,""I"",FBDOS,1)>0"
"RTN","FBAALU",81,0)
 . . S ICPTVDT=$G(FBDOS) D ^DIR K DIR,ICPTVDT
"RTN","FBAALU",82,0)
 . . I X="@" K FBMODA(FBEDIT) W "   (deleted)" ; "@" removes from list
"RTN","FBAALU",83,0)
 . . I +Y>0 S FBMOD=+Y
"RTN","FBAALU",84,0)
 . ; validate entered modifier
"RTN","FBAALU",85,0)
 . S FBMODX=$$MOD^ICPTMOD(FBMOD,"I",FBDOS,1)
"RTN","FBAALU",86,0)
 . I '$P(FBMODX,U,7) D  Q
"RTN","FBAALU",87,0)
 . . W $C(7),!,"     CPT Modifier inactive on date of service ("
"RTN","FBAALU",88,0)
 . . W $$FMTE^XLFDT(FBDOS),")"
"RTN","FBAALU",89,0)
 . ; ensure new value of edited modifier is not already on list
"RTN","FBAALU",90,0)
 . I FBEDIT D  Q:FBMOD=""
"RTN","FBAALU",91,0)
 . . S FBI=0 F  S FBI=$O(FBMODA(FBI)) Q:'FBI  D  Q:FBMOD=""
"RTN","FBAALU",92,0)
 . . . I FBMODA(FBI)=FBMOD,FBI'=FBEDIT S FBMOD="" W !,$C(7),"     Change was not accepted because the new value is already on the list."
"RTN","FBAALU",93,0)
 . ; update list
"RTN","FBAALU",94,0)
 . I FBEDIT S FBMODA(FBEDIT)=FBMOD ; updated existing modifier
"RTN","FBAALU",95,0)
 . E  S FBLAST=FBLAST+1,FBMODA(FBLAST)=FBMOD ; added new modifier
"RTN","FBAALU",96,0)
 ;
"RTN","FBAALU",97,0)
DIS ; display entered data
"RTN","FBAALU",98,0)
 ; if default CPT code exists and default code and modifiers were not
"RTN","FBAALU",99,0)
 ;   changed then skip display and confirm steps.
"RTN","FBAALU",100,0)
 I $G(FBCPT)>0,FBCPT=FBAACP,$G(FBMODL)=$$MODL^FBAAUTL4("FBMODA","I") S FBGOT=1 G EXIT
"RTN","FBAALU",101,0)
 S FBCATX=$$CAT^ICPTAPIU($P(FBCPTX,U,4))
"RTN","FBAALU",102,0)
 W !!,"Major Category: " W:$P(FBCATX,U)'=-1 $P(FBCATX,U,4)
"RTN","FBAALU",103,0)
 W !,?2,"Sub-Category: " W:$P(FBCATX,U)'=-1 $P(FBCATX,U)
"RTN","FBAALU",104,0)
 W !,?6,"Procedure: ",$P(FBCPTX,U,2),"   ",$P(FBCPTX,U,3)
"RTN","FBAALU",105,0)
 I $O(FBMODA(0)) D
"RTN","FBAALU",106,0)
 . W !,?6,"Modifiers: "
"RTN","FBAALU",107,0)
 . S FBI=0 F  S FBI=$O(FBMODA(FBI)) Q:'FBI  D
"RTN","FBAALU",108,0)
 . . S FBMODX=$$MOD^ICPTMOD(FBMODA(FBI),"I",FBDOS,1)
"RTN","FBAALU",109,0)
 . . W ?22,"-",$P(FBMODX,U,2),"  ",$P(FBMODX,U,3),!
"RTN","FBAALU",110,0)
 E  W !
"RTN","FBAALU",111,0)
 W !,?20,"Detail Description ",!,?20,"=================="
"RTN","FBAALU",112,0)
 K FBTX
"RTN","FBAALU",113,0)
 S X=$$CPTD^ICPTCOD(FBAACP,"FBTX",$G(FBDFN),$G(FBDOS))
"RTN","FBAALU",114,0)
 S FBI=0 F  S FBI=$O(FBTX(FBI)) Q:'FBI  W !,FBTX(FBI)
"RTN","FBAALU",115,0)
 ;
"RTN","FBAALU",116,0)
CONF ; confirm entered data
"RTN","FBAALU",117,0)
 S DIR(0)="Y",DIR("A")="Is this correct",DIR("B")="YES"
"RTN","FBAALU",118,0)
 D ^DIR K DIR I $D(DIRUT) G EXIT
"RTN","FBAALU",119,0)
 I 'Y W ! G ASKCPT
"RTN","FBAALU",120,0)
 S FBGOT=1
"RTN","FBAALU",121,0)
 ;
"RTN","FBAALU",122,0)
EXIT ; exit point
"RTN","FBAALU",123,0)
 I 'FBGOT S FBAACP="",FBX="" K FBMODA
"RTN","FBAALU",124,0)
 Q
"RTN","FBAALU",125,0)
 ;
"RTN","FBAALU",126,0)
MODHLP ; CPT MODIFIER prompt help text
"RTN","FBAALU",127,0)
 ; input
"RTN","FBAALU",128,0)
 ;   FBMODA( - (optional) array of modifiers
"RTN","FBAALU",129,0)
 ;             FBMODA(#)=CPT MODIFIER (internal)
"RTN","FBAALU",130,0)
 ;
"RTN","FBAALU",131,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT
"RTN","FBAALU",132,0)
 N FBI,FBL,FBMODX,FBQUIT,FBTX
"RTN","FBAALU",133,0)
 ;
"RTN","FBAALU",134,0)
 ; compile help text for modifier prompt including a list of
"RTN","FBAALU",135,0)
 ;   previously entered modifiers.
"RTN","FBAALU",136,0)
 S FBTX(1)="Modifiers are used to better describe the service (CPT)"
"RTN","FBAALU",137,0)
 S FBTX(2)="rendered. Modifier(s) will be combined with the CPT code"
"RTN","FBAALU",138,0)
 S FBTX(3)="for Fee Schedule calculations and to check for duplicate"
"RTN","FBAALU",139,0)
 S FBTX(4)="payment entry."
"RTN","FBAALU",140,0)
 I $O(FBMODA(0)) D
"RTN","FBAALU",141,0)
 . N FBI,FBL,FBMODX
"RTN","FBAALU",142,0)
 . S FBTX(5)=" "
"RTN","FBAALU",143,0)
 . S FBL=5
"RTN","FBAALU",144,0)
 . S FBI=0 F  S FBI=$O(FBMODA(FBI)) Q:'FBI  D
"RTN","FBAALU",145,0)
 . . S FBMODX=$$MOD^ICPTMOD(FBMODA(FBI),"I",$G(FBDOS),1)
"RTN","FBAALU",146,0)
 . . S FBL=FBL+1,FBTX(FBL)="     "_$P(FBMODX,U,2)_"  "_$P(FBMODX,U,3)
"RTN","FBAALU",147,0)
 ;
"RTN","FBAALU",148,0)
 ; display the help text
"RTN","FBAALU",149,0)
 S FBL=0 F  S FBL=$O(FBTX(FBL)) Q:'FBL  D  Q:$D(DIRUT)
"RTN","FBAALU",150,0)
 . ; pause between screens of data (22 lines)
"RTN","FBAALU",151,0)
 . I $E(IOST,1,2)="C-",'(FBL#22) S DIR(0)="E" D ^DIR K DIR Q:$D(DIRUT)
"RTN","FBAALU",152,0)
 . ; write a line of text
"RTN","FBAALU",153,0)
 . W !,FBTX(FBL)
"RTN","FBAALU",154,0)
 ;
"RTN","FBAALU",155,0)
 Q
"RTN","FBAALU",156,0)
 ;
"RTN","FBAALU",157,0)
 ;FBAALU
"VER")
8.0^22
**END**
**END**

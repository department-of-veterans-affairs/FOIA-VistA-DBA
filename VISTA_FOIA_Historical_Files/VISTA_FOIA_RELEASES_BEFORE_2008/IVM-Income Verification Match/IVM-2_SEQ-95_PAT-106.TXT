
=============================================================================
Run Date: APR 26, 2006                     Designation: IVM*2*106
Package : IVM - INCOME VERIFICATION MATCH     Priority: EMERGENCY
Version : 2        SEQ #95                      Status: Released
                  Compliance Date: MAY 03, 2006
=============================================================================

Associated patches: (v)IVM*2*108   <<= must be installed BEFORE `IVM*2*106'

Subject: IVM Address Report Enhancement and County Code Fix

Category: 
  - Routine

Description:
============

 This patch is being released as an emergency with a 7-day compliance 
 window because it includes the fix for the disappearing county codes.
  
 NOTE: This patch is being released with Emergency Registration patch
 DG*5.3*695 Permanent Address Abort Still Updating DT/TM Stamp in host file
 IVM_2_P106.KID. Please see the National Patch Module patch description
 for DG*5.3*695 for details concerning the functionality of that patch.
  
 This patch, IVM*2.0*106, addresses the following issues.
  
 Issues:
 -------
 1) The IVM Address Change Log Report [IVM ADDRESS CHANGE LOG REPORT] has
    been completely re-written from its initial release in patch
    IVM*2.0*108 IVM Address Update Log. The report now has two options,
    Summary and Detail.
  
    The Summary option prompts the user to select the end date of a 90-day
    period and displays all patients who had address changes during that
    time. The output includes the date and time of the last address update
    for each patient within the requested time period. The report also
    shows the number of entries in the IVM ADDRESS CHANGE LOG (#301.7)
    file, once again for each patient during the 90 days selected.
  
    The Detail option displays all previous addresses within a 90-day
    period for whichever patient the user selects. Each entry in the
    detailed report includes the selected patient's SSN, name, prior
    address, prior address change source, prior address change site, and
    date the prior address was changed. The user can see what the prior
    address in any entry was changed to by looking at the next entry. If
    the end date of the report is today's date or any date greater than or
    equal to the date of the most recent update, the address in the last
    entry on the report will be the one just before the current address.
    The current address is not shown on the report but can be seen on 
    screen 1 (PATIENT DEMOGRAPHIC DATA) of Load/Edit Patient Data [DG
    LOAD PATIENT DATA].
  
    At the end of both report types, the total number of records found
    meeting the report criteria is shown. For examples of the reports, see
    the Revised IVM 2.0 User Manual file listed in the DOCUMENTATION
    RETRIEVAL section of this patch description.
  
 2) A bug was introduced in patch IVM*2*108 that caused the COUNTY
    (#.117) field in the PATIENT (#2) file to be overwritten. The source
    of the problem was in the RF1 segment in the Z05 Demographic Data 
    Transmission HL7 message and was fixed on the Health Eligibility Center
    (HEC) side. This patch prevents the problem in VistA.
  
  
 SOFTWARE RETRIEVAL
 ==================
 The software for this patch is not being distributed through the National 
 Patch Module. That is because this patch is being distributed as a host 
 file. The host file will contain the following two KIDS builds:
  
                     Host file name:     IVM_2_P106.KID
  
                             Builds:     IVM*2.0*106
                                         DG*5.3*695
  
 Sites may retrieve the software directly using FTP from the 
 ANONYMOUS.SOFTWARE directory at the following OI Field Offices:
  
                            Albany  :  ftp.fo-albany.med.va.gov
                             Hines  :  ftp.fo-hines.med.va.gov
                    Salt Lake City  :  ftp.fo-slc.med.va.gov
            First Available Server  :  download.vista.med.va.gov
  
 The following file will be available:
  
    File Name                    Description
    ---------                  --------------
    IVM_2_P106.KID             Host file containing KIDS software
                               distribution
  
 Note: Use ASCII mode when transferring the .KID file.
  
  
 DOCUMENTATION RETRIEVAL
 =======================
 Sites may retrieve the user documentation directly using FTP from the
 ANONYMOUS.SOFTWARE directory at the following OI Field Offices:
    
                 Albany   : ftp.fo-albany.med.va.gov
                 Hines    : ftp.fo-hines.med.va.gov
           Salt Lake City : ftp.fo-slc.med.va.gov
   First Available Server : download.vista.med.va.gov (preferred method)
   
                                                                          
  The following files will be available:
    
       File Name                     Description
       ---------                     -----------      
 IVM_2_P106_UM.PDF              Revised IVM 2.0 User Manual 
 DG_5_3_P695_REG_UM.PDF         Revised PIMS 5.3 Registration User Manual
  
  
  Note:  Use Binary mode when transferring the .PDF files.
   
  The VistA Documentation Library [VDL] web site contains all end-user 
  manuals.  The address is http://www.va.gov/vdl/.
  
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch.
   
   
 This patch addresses the following Remedy Ticket:
 ---------------------------------------------------------
 HD0000000134052 - Patient Address change to OLD address
  
  
 Overview of Remedy Ticket:
 ----------------------------------
 1. HD0000000134052 - see Issue #2 above
  
  
 Test Sites:
 -----------
 Salisbury, NC (Large)
 Pittsburgh HCS (Large)
 Durham (Large)
 Portland, OR (Large) 
  
  
          ================INSTALLATION INSTRUCTIONS =================
  
 If these patches (IVM*2.0*106 and DG*5.3*695) are installed during the 
 normal workday, it is recommended that the following menu options (File 
 #19) should be disabled to prevent possible conflicts while running the 
 KIDS Install. Other VistA users will not be affected.
    
               Register a Patient       [DG REGISTER PATIENT]
               Load/Edit Patient Data   [DG LOAD PATIENT DATA]
               Preregister a Patient    [DGPRE PRE-REGISTER OPTION]
               Patient Address Update   [DG ADDRESS UPDATE]
               IVM Output Menu          [IVM OUTPUT MENU]
               IVM BACKGROUND JOB       [IVM BACKGROUND JOB]            
               Demographics Upload      [IVM UPLOAD DEM]                
    
  
 This patch can be loaded with users on the system.  The patch should be 
 installed during non-peak hours.  Installation will take approximately 5 
 minutes.
  
    
        ************** PRE-INSTALLATION INSTRUCTIONS **********************
    
        You may wish to stop the HL7 filers prior to the install to prevent
        possible 'No Source Errors' from occurring. No transmissions will 
        be lost if the filers are stopped first, they will be picked up
        once the filers are restarted.
    
        *******************************************************************
    
   1.   DOWNLOAD HOST KIDS FILE
        -----------------------
        Download the KIDS file IVM_2_P106.KID from the ANONYMOUS.SOFTWARE
        directory of either Albany, Hines, or the Salt Lake OI Field Office
        to the appropriate directory on your system.
     
   2.   LOAD DISTRIBUTION
        -----------------
        Use the 'LOAD A DISTRIBUTION' option on the KIDS INSTALLATION
        menu, and enter:  the directory onto which you have 
        downloaded the host file, immediately followed by IVM_2_P106.KID.
     
   3.   COMPONENTS SENT WITH PATCH 
        --------------------------
  
        ROUTINE SUMMARY:
        ================
        The following is a list of the routines included in this patch.
        The second line of each of these routines now looks like:
   
     <tab>;;2.0;INCOME VERIFICATION MATCH;**[patch list]**; 21-OCT-94
   
                             CHECK^XTSUMBLD results
  
        Routine name  Before Patch   After Patch       Patch List
        ============  ============   ===========   ===================
        IVMADDRP      5750155        8400977       108,106
        IVMLDEM6      13276409       13344528      10,58,73,79,
                                                    108,106
   
 Total number of routines in patch: 2   
   
    
   4.   START UP KIDS
        -------------
        Start up the Kernel Installation and Distribution System Menu
        [XPD MAIN]:
     
             Edits and Distribution ...
             Utilities ...
             Installation ...
     
   Select Kernel Installation & Distribution System Option: INStallation
                                                            ---
             Load a Distribution
             Print Transport Global
             Compare Transport Global to Current System
             Verify Checksums in Transport Global
             Install Package(s)
             Restart Install of Package(s)
             Unload a Distribution
             Backup a Transport Global
     
   Select Installation Option:
    
   5.   Select Installation Option:
        --------------------------
     
        NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
               NAME, enter IVM*2.0*106):
     
        a.  Backup a Transport Global - This option will create a backup
            message of any routines exported with this patch. It will not
            backup any other changes such as DD's or templates.
        b.  Compare Transport Global to Current System - This option will
            allow you to view all changes that will be made when this patch
            is installed.  It compares all components of this patch
            (routines, DD's, templates, etc.).
        c.  Verify Checksums in Transport Global - This option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
    
   6.   Select Installation Option: Install Package(s)
                                    ----------------
        **This is the step to start the installation of this KIDS patch:
     
       a.  Choose the Install Package(s) option to start the patch install.
       b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
           YES//' answer NO.
       c.  When prompted 'Want to DISABLE Scheduled Options, Menu
           Options, and Protocols? YES//' answer YES.
       d.  When prompted 'Enter options you wish to mark as 'Out Of
           Order':'  Enter the following options:
    
               Register a Patient       [DG REGISTER PATIENT]
               Load/Edit Patient Data   [DG LOAD PATIENT DATA]          
               Preregister a Patient    [DGPRE PRE-REGISTER OPTION]
               Patient Address Update   [DG ADDRESS UPDATE]
               IVM Output Menu          [IVM OUTPUT MENU]
               IVM BACKGROUND JOB       [IVM BACKGROUND JOB]            
               Demographics Upload      [IVM UPLOAD DEM]
   
   
 NOTE:  The DG build includes a post-install cleanup to remove bad records 
 from the PATIENT #2 File that do not have a zero node.  Once the 
 process has run to completion, a MailMan message ("DG*5.3*695: PATIENT 
 CLEANUP - SUMMARY REPORT") with a recap of the number of records 
 processed and corrected, as well as percentage completed, will be 
 generated and sent to the installer.  A MailMan message will still be sent
 even if no anomalies were found.
  
    
        ************** POST-INSTALLATION INSTRUCTIONS *************
        When the installation is complete, be sure to re-start the 
        filers if you chose to stop them. 
        ***********************************************************

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: IVMADDRP
    Before: B23649264  After: B53315162  **108,106**
 Description of Changes:
  Summary of routine changes to program IVMADDRP:
   
  This program was completely re-written for Issue # 1.  The functionality 
  that was in this program prior to the patch is no longer needed.
   
  The new functionality will:
  Search for records based on a beginning and ending date range
   
  Search for records in the IVM ADDRESS CHANGE LOG for a specific veteran 
  by name or social security number
   
  Allow the user to print the report in either a detailed format 
  (containing all the data in all the records) or a summary format 
  containing the veteran's name, social security number,  date of last 
  address update, and a total count of updates found within the date range 
  search criteria.

Routine Name: IVMLDEM6
    Before: B59740960  After: B60562553  **10,58,73,79,108,106**
 Description of Changes:
  Original Code:
  --------------
   
  +108       S DIE="^DPT(",DA=DFN,DR=IVMFIELD_"///^S X=IVMVALUE"
  +109       D ^DIE K DA,DIE,DR
  +110       ;
  +111       ; - delete inaccurate Addr Change Site data if Source is not
  +112         VAMC
  +113       ;   (trigger x-ref does not fire with 4 slash stuff)
  +114       I IVMFIELD=.119,IVMVALUE'="VAMC" S FDA(2,+DFN_",",.12)="@" D 
  +115         UPDATE^DIE("E","FDA")
  +116       ;
  +117       Q
  +118       ;
   
   
  Modified Code:
  --------------
  +108       S DIE="^DPT(",DA=DFN,DR=IVMFIELD_"////^S X=IVMVALUE"
  +109       D ^DIE K DA,DIE,DR
  +110       ;
  +111       ; - delete inaccurate Addr Change Site data if Source is not
  +112         VAMC
  +113       ;   (trigger x-ref does not fire with 4 slash stuff)
  +114       I IVMFIELD=.119,IVMVALUE'="VAMC" S FDA(2,+DFN_",",.12)="@" D 
  +115         UPDATE^DIE("E","FDA")
  +116       ;
  +117       ; - delete the Bad Address Indicator field
  +118       I $$BADADR^DGUTL3(DFN) D DELBAI^DGUTL3(DFN)
  +119       Q
  +120       ;


=============================================================================
User Information:
Entered By  : MULLER,RICHARD                Date Entered  : MAR 14, 2005
Completed By: RUDINGER,NANCY L.             Date Completed: APR 26, 2006
Released By : GANUS,MAUNETTE                Date Released : APR 26, 2006
=============================================================================


Packman Mail Message:
=====================

No routines included

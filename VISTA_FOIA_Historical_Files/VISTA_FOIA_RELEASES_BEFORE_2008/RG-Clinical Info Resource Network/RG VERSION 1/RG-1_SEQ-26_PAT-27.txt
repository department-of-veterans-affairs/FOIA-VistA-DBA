$TXT Created by DAVIS,PAULETTE T at DEVCRN.FO-ALBANY.MED.VA.GOV  (KIDS) on Thursday, 11/21/02 at 13:09
=============================================================================
Run Date: NOV 26, 2002                     Designation: RG*1*27
Package : RG - CLINICAL INFO  NETWORKPriority: Mandatory
Version : 1        SEQ #26                      Status: Released
=============================================================================

Associated patches: (v)RG*1*26     <<= must be installed BEFORE `RG*1*27'
                    (v)MPIF*1*24   <<= must be installed BEFORE `RG*1*27'
                    (v)DG*5.3*474  <<= must be installed BEFORE `RG*1*27'

Subject: NEW MESSAGE STRUCTURE - PHASE 2

Category: 
  - Routine
  - Enhancement (Mandatory)

Description: 
============

  IMPORTANT NOTE:
  Although this patch is NOT being sent out as an EMERGENCY patch,
  the Master Patient Index/Patient Demographics (MPI/PD) development
  team and the Master Patient Index Data Quality Management team
  request that you install the patch as soon as your schedule allows.
  Additional development in progress, described below, is dependent
  upon this patch being installed at all facilities.
   
  Also, the MPI/PD development team's facility access should
  remain active until all phases in this process are completed.
   
  DG*5.3*474, MPIF*1.0*24, and RG*1.0*26 are required builds for
  patch RG*1*27.
   
  NOTE:  RG* and MPIF* patches should NOT be installed on legacy
  systems to avoid issues with the legacy systems ending up as
  Coordinating Master of Records (CMORs), treating facilities,
  or subscribers.
   
  This patch includes enhancements that are proposed in the Master
  Patient Index/Patient Demographics, Phase III Enhancements, Software
  Design Document.
   
  1. A series of patches will be distributed to implement a new messaging
  structure for Master Patient Index/Patient Demographics (MPI/PD). 
  Our current message scheme uses the Coordinating Master of Record
  (CMOR) as the origination point for a number of update messages to
  other treating facilities.  Overall, our objective is to reduce the
  amount of facility to facility messaging.  This will be done by using
  the Master Patient Index (MPI) as the source for update messages. 
  For those message types that require CMOR action, the CMOR will update
  the MPI, and the MPI will distribute updates to the appropriate
  treating facilities.
   
  Changes to messaging will include using a new generic Health Level
  Seven (HL7) 2.4 message builder for the ENV, PD1, and PID segments. 
  Additionally, HL7 application acknowledgements will be incorporated
  in all MPI/PD messages.
   
  These changes will take place in three phases.  Phase one consisted
  of patches DG*5.3*428, MPIF*1*22, and RG*1*26.  Those patches
  contained the protocols and routines to execute the protocols for the
  new messaging.
      
  Patches DG*5.3*474, MPIF*1*24, and RG*1*27 constitute phase two.
  The second phase will update the necessary routines to call the new
  trigger events using the updated messaging structure.  The trigger
  events will include the following.
  - Add new patient to the MPI
  - Link to an existing patient on the MPI
  - Update to non-key fields on an existing MPI entry
  - Update to key fields on an existing MPI entry
  - Update to date last treated
  - Resolution of duplicates at the site where both entries
    exist on the MPI
  - Resolution of duplicates on the MPI
  - Identification and resolution of a mismatched patient
  - Inactivation of existing entry on the MPI
   
  After the second phase patches are installed at a facility,
  the subsequent steps can begin.
   
  The next step is a data synchronization process to populate new fields
  in the MPI FACILITY ASSOCIATION (#985.5) file on the MPI for each
  facility associated with a national integration control number. 
  The MPI/PD development team will do this "re-seeding" process.
   
  The third phase will contain additional messaging functionality
  that can not be implemented until the synchronization process has
  completed.  A final group of patches will clean up obsolete routines,
  protocols, options, etc. that are no longer used.
   
  To summarize, patches DG*5.3*474, MPIF*1*24, and RG*1*27 contain
  the necessary routines to call the new trigger events using the
  updated messaging structure.
   
  2.)  NOIS MON-0202-51623 reported a problem with the notification
  message generated when a sensitive record was accessed.  The OPTION/
  PROTOCOL USED field was either null or UNKNOWN.  The problem originated
  from the MPI/PD Exception Handling [RG EXCEPTION HANDLING] option when
  a call was made to PTSEC or NOTICE in routine DGSEC4.  Code has been
  updated in routines RGRPDAT and RGEX03 to define the DGOPT input
  variable for this Application Programmer Interface (API).  Also, in
  routine RGRPDAT, a change was made to print the first line on the
  remote display of the Remote Patient Data Query options.
             
  Protocols:
  ==========
  The MPI/PD ADT-A04 Trigger Protocol [RG ADT-A04 TRIGGER] is added as
  a subscriber to the VAFC ADT-A04 SERVER protocol.
   
  The MPI/PD ADT-A08 Trigger Protocol [RG ADT-A08 TRIGGER] is added as
  a subscriber to the VAFC ADT-A08 SERVER protocol.  Additionally, the
  RECEIVING APPLICATION field has been updated to RG ADT.
       
  Test Sites:
  ===========
  Battle Creek, MI
  Bay Pines, FL
  Montana HCS
  San Francisco, CA
  VA Greater Los Angeles HCS
  White River Junction, VT
   
  Associated NOIS:
  ================
  MON-0202-51623
   
  Routine Summary:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
   
  <TAB>;;1.0;CLINICAL INFO RESOURCE NETWORK;**[Patch List]**;30 Apr 99
  CHECK^XTSUMBLD results:
   
  Routine       Before Patch       After Patch       Patch List
  --------      ------------       ------------      ----------
  RGADT1           7312696            8183547        4,14,17,27
  RGADTP          17407790           10287603        26,27
  RGADTP1         12905370           12756829        26,27
  RGADTP2            N/A              7682257        27
  RGEX03           9756720            9983720        3,12,19,23,27
  RGJCSUB          8837461            8837655        1,19,27
  RGRPDAT         13829409           14086881        23,27
  RGRSDYN          2287825            2496543        4,8,17,23,26,27
  RGRSDYN1         7067553            7795388        1,3,8,23,27
     
  Installation Instructions:
  ==========================
  This patch may be loaded with users on the system.  You may wish to
  install it during non-peak hours to minimize disruption to the users.
  Installation will take less than 5 minutes.
      
  1.  Using the TaskMan option Schedule/Unschedule Options [XUTM SCHEDULE],
      unschedule the following option:
        VAFC BATCH UPDATE          UPDATE BATCH JOB FOR HL7 v2.3
   
  2.  On the Filer and Link Management Options [HL MENU FILER LINK MGT]
      menu, select the Monitor, Start, Stop Filers [HL FILER MONITOR]
      option.  At that menu level, choose the action "Stop incoming 
      filer" to stop each incoming filer that is running.  This is to
      prevent adding entries to the TREATING FACILITY LIST (#391.91)
      file while updating routines.
   
  3.  Use the INSTALL/CHECK MESSAGE option on the Packman menu.  [Note: 
      TEXT PRINT/DISPLAY option in the PackMan menu will display the 
      patch text only.]
   
  4.  None of the routines in the MPI/PD Patient Demographics package
      have been recommended for routine mapping.
   
  5.  From the Kernel Installation and Distribution System Menu, select
      the Installation menu.
   
  6.  From this menu, you may elect to use the following options (when
      prompted for the INSTALL NAME, enter RG*1.0*27).
   
      (a)  Backup a Transport Global - this option will create a backup
           message of any routines exported with the patch.  It will NOT
           backup any other changes such as DDs or templates.
   
      (b)  Compare Transport Global to Current System - this option will
           allow you to view all changes that will be made when the
           patch is installed.  It compares all components of the patch
           (routines, DDs, templates, etc.).
   
      (c)  Verify Checksums in Transport Global - this option will allow
           you to ensure the integrity of the routines that are in the
           transport global.
   
      (d)  Print Transport Global - this option will allow you to view the
           components of the KIDS build.
   
  7.  Use the Install Package(s) option and select the package RG*1.0*27.
     
  8.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//',
      respond NO.
   
  9.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
         Protocols? YES//', respond Yes and enter the following options:
   
         Appointment Check-in/Check-out  [SDAM APPT CHECK IN/OUT]
         Appointment Management          [SDAM APPT MGT]
         Check-in/Unsched. Visit         [SDI]
         Discharge from Clinic           [SDDISCHARGE]
   
         10-10T Registration             [DGRPT 10-10T REGISTRATION]
         Register a Patient              [DG REGISTER PATIENT]
         Load/Edit Patient Data          [DG LOAD PATIENT DATA]
         Electronic 10-10EZ Processing   [EAS EZ 1010EZ PROCESSING]
   
  10. On the Filer and Link Management Options [HL MENU FILER LINK MGT]
      menu, select the Monitor, Start, Stop Filers [HL FILER MONITOR]
      option.  At that menu level, choose the action "Start incoming
      filer" to start the default number of incoming filers.
   
  11. Using the TaskMan option Schedule/Unschedule Options [XUTM SCHEDULE],
      schedule the option VAFC BATCH UPDATE [UPDATE BATCH JOB FOR HL7 v2.3]
      to run every 10 minutes.

Routine Information:
====================

Routine Name:
  - RGADT1


Routine Checksum:

Routine Name:
  - RGEX03


Routine Checksum:

Routine Name:
  - RGRPDAT


Routine Checksum:

Routine Name:
  - RGRSDYN


Routine Checksum:

Routine Name:
  - RGRSDYN1


Routine Checksum:

Routine Name:
  - RGJCSUB


Routine Checksum:

Routine Name:
  - RGADTP


Routine Checksum:

Routine Name:
  - RGADTP1


Routine Checksum:

Routine Name:
  - RGADTP2


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : DAVIS,PAULETTE                 Date Entered : SEP 10, 2002
Completed By: HERREN,CATHRYN                Date Completed: NOV 21, 2002
Released By : SCOTT,JEAN M                 Date Released : NOV 26, 2002
=============================================================================


Packman Mail Message:
=====================

$END TXT

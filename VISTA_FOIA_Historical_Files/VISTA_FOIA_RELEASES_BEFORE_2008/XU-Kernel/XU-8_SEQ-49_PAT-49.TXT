$TXT Created by MARSHALL,RICK at FM21.ISC-SF.VA.GOV  (KIDS) on THURSDAY, 08/07/97 at 17:22
=============================================================================
Run Date: AUG 20, 1997                     Designation: XU*8*49
Package : XU - KERNEL                          Priority: Mandatory
Version : 8        SEQ #49                      Status: Released
=============================================================================


Subject: NOIS FIXES

Category: 
  - Routine
  - Data Dictionary
  - Sort Template

Description: 
============

  PLEASE NOTE: Sites currently testing Broker version T9 or who have
  installed a test version of XU*8*59 will need to reinstall XU*8*59 after
  installing this patch.
  
  This patch fixes the following NOISs and REQUESTS:
   
      NOIS                       Description of fix: 
   
  LAS-1196-60534                 When using the option 'Resource Device
  Edit,' the field 'RESOURCE SLOTS' would get reset to 1.  The patch
  resolves this by performing changes to the DD.
   
  ISL-1196-50019                 When a system crashes, resources are left
  and still allocated, preventing new jobs from starting.  This patch
  provides a new option that can release all resources at startup (Clear all
  Resources) and also an option to release a given slot on a resource (Clear
  one Resource). New routine XUDHRES, change to ZIS6, ZISC.
   
  MUR-0196-30539-XQ33            The option to delete unreferenced options
  from the option file didn't check for options used in the new TaskMan
  Schedule file. Added field 209.2 (KEEP FROM DELETING) to the option file.
   
  CTX-0297-70559                 It was possible to get an earlier entry with
  the Effective Date greater than the next entry.  This caused problems when
  programes tried to find the current person class.  Fixed with a change to
  the DD so only greater dates are allowed. 
  
   
  CHANGES MADE IN RESPONSE TO REQUESTS:
   
  When using the RJD option to stop a TaskMan job, you used to have to
  DISPLAY the task before you could delete it.  Modification to routine
  XUTMRJD was made to allow site to say NO to the display and still delete
  the task from the running task list.  MSG 1060759 (Pete Tichenor)
   
  Removes the testing for MWAPI from ZUMSM.  (Trouble calls)
   
  Have XUS display the Node the user is on.  Changed the XUS routine to
  display the Volume-set:Node rather than just the Volume-set alone.
  Changed the first read to include output text as before in order to flush
  the input buffer on certain systems, such as MSM.  (E3R 8568)
   
  Cleans-up pointers to files 3,6,16,20 in sort and print templates.  It
  adds checks to code of XUSERNEW, XUA4A7 so they are ready for file
  3,6,16,20 cleanup.
   
  Cleans up cross-references in files DEVICE, OPTION, and KERMIT HOLDING.
     
  INVALID LOCK - This patch adds a timeout to the one lock without one.
  Routine XUTMK was modified to resolve this problem.  (E3R #9278)
     
  Updates the ID nodes of files 3.2 and 3.5 to use DDIOL.  Routine XUINPCH
     
  Corrects a problem with the status code returned by STAT^%ZTLOAD.  It
  formerly returned "Inactive: Interrupted" when it should have returned
  "Active: Running". Fixed with changes to %ZTLOAD5.
   
  Changes a call in %ZTMS3 from ZSYNC to PURGELST^%MSMOPS on MSM 4.3
  systems.  In response to a request from MSM.
   
  Changes the way %ZTMS1 waits under load.
   
  Changes %ZIS4 to clean up the IO("ERROR") and IO("LASTERR") variable.
   
  This patch made a change to the setting of IO("ZIO"). ZIS4VXD, ZIS4MSM.
   
  Changes PRIORITY code to keep jobs from assuming system priority.
  (Capacity Management ZOSVMSM) 
  
  Fix $$STATUS^%ZISH  not looking at the correct variable.
  
  Improves the $STACK reporting on DSM systems.
  
  Adds the following new entry point for modifying resource devices (please
  see the Supported References file for full details):
  $$RES^XUDHSET(device_name,resource_name,slot_count,description,subtype)
         device_name   For the resource device.
         resource_name (optional) The resource name if not the same as the
                       device name.
         slot_count    The number of concurrent jobs that can use this device.
                       defaults to 1.
         description   The device description, defaults to 'Resource Device'.
         subtype       The subtype to use, defaults to P-OTHER.
         returns       If an error '-1^text'
                       The 'IEN^device name' like a DIC call.
  
  
    
  Routine Summary:
  ================
  
                   Checksum
  Routine         Old       New      2nd Line
  XQ33          8337880   8946889    **49**
  XUA4A7        5092665   5114645    **49**
  XUA4A72       2742817   3400179    **27,49**
  XUDHRES                  917964    **49**
  XUDHSET                 1534104    **49**
  XUINPCH       1467475   2465171    **20,36,49**
  XUS           7592994   7619050    **16,26,49**
  XUSERNEW      6789632   6995154    **16,49**
  XUTMK         6472549   6514964    **49**
  XUTMRJD       6336192   6554859    **49**
  ZIS1          9986473  10316454    **18,49**
  ZIS4MSM       6649854   7202298    **23,36,49**
  ZIS4VXD       8342152   8150990    **23,36,49**
  ZIS6          9961139   9917028    **24,49**
  ZISC          8463272   7980129    **24,36,49**
  ZISHMSM       5354551   5354575    **24,36,49**
  ZOSVMSM      11524674  11538678    **13,25,49**
  ZTER1         5603505   5664740    **18,24,36,49**
  ZTLOAD5                 4735916    **49**
  ZTMS1         6234917   6234917    **36,49**
  ZTMS3         9454395   9603212    **1,18,36,49**
  ZUMSM         2237614   2252648    **13,42,49**
  
  This patch introduces the following new routines:
  
  Routine       Callable At     Routine Description
  -------       -----------     -------------------
  XUDHRES                       Resource device utility
  XUDHSET       $$RES^XUDHSET   Device setup
  
  ========================================================================= 
  Installation:
  
  (Please note the steps that are different for DSM, MSM, and OpenM sites.)
  
    1.  DSM Sites: Some of these routines are usually mapped, so you will
        need to disable mapping for the affected routines.
        
    2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
        option will load the KIDS package onto your system.
        
    3.  The patch has now been loaded into a Transport global on your
        system. You now need to use KIDS to install the Transport global.
        On the KIDS menu, under the 'Installation' menu, use the following
        options:
        
           Verify Checksum's in Transport Global
           Print Transport Global
           Compare Transport Global to Current System
           Backup a Transport Global
                 
    4.  Inhibit users from logging into the system.
        Also place TASKMAN in a wait state.
        
    5.  On the KIDS menu, under the 'Installation' menu, use the following
        options:
           Install Package(s)  'XU*8.0*49'
                                =========
           
    6.  MSM Site - Rename ZUMSM to ZU with: ZL ZUMSM ZS ZU
        
    7.  After installing this patch:
  
        a. DSM and MSM sites need to move several routines from your
        production account to each manager account:
  
        ZIS1
        ZIS4MSM
        ZIS4VXD
        ZIS6
        ZISC
        ZISHMSM
        ZOSVMSM
        ZTER1
        ZTLOAD5
        ZTMS1
        ZTMS3
      
        b. In the manager account (DSM and MSM sites), or production
        account (OpenM):
         
        DO RELOAD^ZTMGRSET
        Select the System
        Patch number to load: 49
                              ==
         
    8.  DSM Sites: After patch has installed, rebuild your map set.
  
    9.  Enable user's login.
        Remove TASKMAN from the wait state.
  
   =========================================================================

Routine Information:
====================

Routine Name:
  - XQ33


Routine Checksum:

Routine Name:
  - XUA4A7


Routine Checksum:

Routine Name:
  - XUDHRES


Routine Checksum:

Routine Name:
  - XUINPCH


Routine Checksum:

Routine Name:
  - XUS


Routine Checksum:

Routine Name:
  - XUSERNEW


Routine Checksum:

Routine Name:
  - XUTMK


Routine Checksum:

Routine Name:
  - XUTMRJD


Routine Checksum:

Routine Name:
  - ZIS4MSM


Routine Checksum:

Routine Name:
  - ZIS4VXD


Routine Checksum:

Routine Name:
  - ZIS6


Routine Checksum:

Routine Name:
  - ZISC


Routine Checksum:

Routine Name:
  - ZOSVMSM


Routine Checksum:

Routine Name:
  - ZTER1


Routine Checksum:

Routine Name:
  - ZTLOAD5


Routine Checksum:

Routine Name:
  - ZTMS1


Routine Checksum:

Routine Name:
  - ZTMS3


Routine Checksum:

Routine Name:
  - ZUMSM


Routine Checksum:

Routine Name:
  - ZIS1


Routine Checksum:

Routine Name:
  - ZISHMSM


Routine Checksum:

Routine Name:
  - XUDHSET


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : FORT,WALLY                     Date Entered : OCT 10, 1996
Completed By: MARSHALL,RICK                 Date Completed: AUG 12, 1997
Released By : SICARD,JERRY                  Date Released : AUG 20, 1997
=============================================================================


Packman Mail Message:
=====================

$END TXT

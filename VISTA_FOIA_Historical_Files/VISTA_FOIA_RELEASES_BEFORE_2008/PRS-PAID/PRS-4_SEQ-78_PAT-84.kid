Released PRS*4*84 SEQ #78
Extracted from mail message
**KIDS**:PRS*4.0*84^

**INSTALL NAME**
PRS*4.0*84
"BLD",4722,0)
PRS*4.0*84^PAID^0^3030801^y
"BLD",4722,1,0)
^^1^1^3030521^^
"BLD",4722,1,1,0)
See the patch description on Forum for a complete description of this patch.
"BLD",4722,4,0)
^9.64PA^^
"BLD",4722,"INIT")
START^PRSXP84
"BLD",4722,"KRN",0)
^9.67PA^8989.52^19
"BLD",4722,"KRN",.4,0)
.4
"BLD",4722,"KRN",.401,0)
.401
"BLD",4722,"KRN",.402,0)
.402
"BLD",4722,"KRN",.403,0)
.403
"BLD",4722,"KRN",.5,0)
.5
"BLD",4722,"KRN",.84,0)
.84
"BLD",4722,"KRN",3.6,0)
3.6
"BLD",4722,"KRN",3.8,0)
3.8
"BLD",4722,"KRN",9.2,0)
9.2
"BLD",4722,"KRN",9.8,0)
9.8
"BLD",4722,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",4722,"KRN",9.8,"NM",1,0)
PRSXP84^^0^B62200707
"BLD",4722,"KRN",9.8,"NM","B","PRSXP84",1)

"BLD",4722,"KRN",19,0)
19
"BLD",4722,"KRN",19.1,0)
19.1
"BLD",4722,"KRN",101,0)
101
"BLD",4722,"KRN",409.61,0)
409.61
"BLD",4722,"KRN",771,0)
771
"BLD",4722,"KRN",870,0)
870
"BLD",4722,"KRN",8989.51,0)
8989.51
"BLD",4722,"KRN",8989.52,0)
8989.52
"BLD",4722,"KRN",8994,0)
8994
"BLD",4722,"KRN","B",.4,.4)

"BLD",4722,"KRN","B",.401,.401)

"BLD",4722,"KRN","B",.402,.402)

"BLD",4722,"KRN","B",.403,.403)

"BLD",4722,"KRN","B",.5,.5)

"BLD",4722,"KRN","B",.84,.84)

"BLD",4722,"KRN","B",3.6,3.6)

"BLD",4722,"KRN","B",3.8,3.8)

"BLD",4722,"KRN","B",9.2,9.2)

"BLD",4722,"KRN","B",9.8,9.8)

"BLD",4722,"KRN","B",19,19)

"BLD",4722,"KRN","B",19.1,19.1)

"BLD",4722,"KRN","B",101,101)

"BLD",4722,"KRN","B",409.61,409.61)

"BLD",4722,"KRN","B",771,771)

"BLD",4722,"KRN","B",870,870)

"BLD",4722,"KRN","B",8989.51,8989.51)

"BLD",4722,"KRN","B",8989.52,8989.52)

"BLD",4722,"KRN","B",8994,8994)

"BLD",4722,"QUES",0)
^9.62^^
"INIT")
START^PRSXP84
"MBREQ")
0
"PKG",408,-1)
1^1
"PKG",408,0)
PAID^PRS^PAID
"PKG",408,20,0)
^9.402P^^
"PKG",408,22,0)
^9.49I^1^1
"PKG",408,22,1,0)
4.0^2950912^2960130
"PKG",408,22,1,"PAH",1,0)
84^3030801^100831
"PKG",408,22,1,"PAH",1,1,0)
^^1^1^3030801
"PKG",408,22,1,"PAH",1,1,1,0)
See the patch description on Forum for a complete description of this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PRSXP84")
0^1^B62200707
"RTN","PRSXP84",1,0)
PRSXP84 ;WCIOFO/MGD-CORRECT ERRONEOUS DATA IN 459 ;07/25/2003
"RTN","PRSXP84",2,0)
 ;;4.0;PAID;**84**;Sep 21, 1995
"RTN","PRSXP84",3,0)
 ;
"RTN","PRSXP84",4,0)
 Q
"RTN","PRSXP84",5,0)
 ;
"RTN","PRSXP84",6,0)
 ; This routine will correct erroneous data in the PAID PAYRUN DATA
"RTN","PRSXP84",7,0)
 ; (#459) file for Pay Periods 03-06, 03-07 and 03-08.
"RTN","PRSXP84",8,0)
 ; The following fields in the EMPLOYEE (#459.01) multiple will be
"RTN","PRSXP84",9,0)
 ; updated:
"RTN","PRSXP84",10,0)
 ;          GRADE  (#3)
"RTN","PRSXP84",11,0)
 ;          STEP   (#4)
"RTN","PRSXP84",12,0)
 ;          SALARY (#13)
"RTN","PRSXP84",13,0)
 ;
"RTN","PRSXP84",14,0)
 ; For more details see the patch description on FORUM.
"RTN","PRSXP84",15,0)
 ;
"RTN","PRSXP84",16,0)
START ; Main Driver
"RTN","PRSXP84",17,0)
 ;
"RTN","PRSXP84",18,0)
 K ^TMP($J),TMP
"RTN","PRSXP84",19,0)
 N D0305,D0306,D0307,D0308,D450,DA,DB,DIK,DR,EMP,EMPX,FLSA
"RTN","PRSXP84",20,0)
 N GRD05,GRD06,GRD07,GRD08,GRADE,IEN05,IEN06,IEN07,IEN08
"RTN","PRSXP84",21,0)
 N LCNT,MCNT,MESS,MESS1,NAME,PDATE,PP,STP05,STP06,STP07,STP08
"RTN","PRSXP84",22,0)
 N SAL05,SAL06,SAL07,SAL08,SALARY,SD,SSN,STANUM,STEP
"RTN","PRSXP84",23,0)
 N TCNT,TIME,TMP,U,UCIX,XMSUB
"RTN","PRSXP84",24,0)
 S U="^",(DA,LCNT,TCNT)=0,MCNT=1
"RTN","PRSXP84",25,0)
 D NOW^%DTC
"RTN","PRSXP84",26,0)
 S Y=%
"RTN","PRSXP84",27,0)
 D DD^%DT
"RTN","PRSXP84",28,0)
 S TIME=Y
"RTN","PRSXP84",29,0)
 W !!,"Post install routine PRSXP84 beginning at ",TIME_"."
"RTN","PRSXP84",30,0)
 ;
"RTN","PRSXP84",31,0)
 ; Get Station Number
"RTN","PRSXP84",32,0)
 ;
"RTN","PRSXP84",33,0)
 S STANUM=$$KSP^XUPARAM("INST")_","
"RTN","PRSXP84",34,0)
 S STANUM=$$GET1^DIQ(4,STANUM,99)
"RTN","PRSXP84",35,0)
 S MESS1="Station: "_STANUM_" - "
"RTN","PRSXP84",36,0)
 ;
"RTN","PRSXP84",37,0)
 ; Check for UCI,VOL
"RTN","PRSXP84",38,0)
 ;
"RTN","PRSXP84",39,0)
 X ^%ZOSF("UCI")
"RTN","PRSXP84",40,0)
 S UCIX=$G(Y)
"RTN","PRSXP84",41,0)
 I UCIX=""!(UCIX'?3U1","3U) S UCIX="???,???"
"RTN","PRSXP84",42,0)
 S MESS1=MESS1_UCIX_" - "
"RTN","PRSXP84",43,0)
 ;
"RTN","PRSXP84",44,0)
 ; Find IENs for Pay Periods in the PAID PAYRUN DATA (#459) file
"RTN","PRSXP84",45,0)
 ;
"RTN","PRSXP84",46,0)
 S (IEN05,IEN06,IEN07,IEN08)=""
"RTN","PRSXP84",47,0)
 S IEN05=$O(^PRST(459,"B","03-05",IEN05))
"RTN","PRSXP84",48,0)
 S IEN06=$O(^PRST(459,"B","03-06",IEN06))
"RTN","PRSXP84",49,0)
 S IEN07=$O(^PRST(459,"B","03-07",IEN07))
"RTN","PRSXP84",50,0)
 S IEN08=$O(^PRST(459,"B","03-08",IEN08))
"RTN","PRSXP84",51,0)
 I IEN05'>0!(IEN06'>0)!(IEN07'>0)!(IEN08'>0) D  Q
"RTN","PRSXP84",52,0)
 . I IEN05'>0 D
"RTN","PRSXP84",53,0)
 . .S ^TMP($J,"MGD",MCNT)=MESS1_"PP 03-05 Not Found"
"RTN","PRSXP84",54,0)
 . .S MCNT=MCNT+1
"RTN","PRSXP84",55,0)
 . I IEN06'>0 D
"RTN","PRSXP84",56,0)
 . .S ^TMP($J,"MGD",MCNT)=MESS1_"PP 03-06 Not Found"
"RTN","PRSXP84",57,0)
 . .S MCNT=MCNT+1
"RTN","PRSXP84",58,0)
 . I IEN07'>0 D
"RTN","PRSXP84",59,0)
 . .S ^TMP($J,"MGD",MCNT)=MESS1_"PP 03-07 Not Found"
"RTN","PRSXP84",60,0)
 . .S MCNT=MCNT+1
"RTN","PRSXP84",61,0)
 . I IEN08'>0 D
"RTN","PRSXP84",62,0)
 . .S ^TMP($J,"MGD",MCNT)=MESS1_"PP 03-08 Not Found"
"RTN","PRSXP84",63,0)
 . D XMT
"RTN","PRSXP84",64,0)
 ;
"RTN","PRSXP84",65,0)
 ; Loop through employees
"RTN","PRSXP84",66,0)
 ;
"RTN","PRSXP84",67,0)
 S EMP=0
"RTN","PRSXP84",68,0)
 F  S EMP=$O(^PRSPC(EMP)) Q:'EMP  D
"RTN","PRSXP84",69,0)
 . ;
"RTN","PRSXP84",70,0)
 . ; Quit if the employee is separated
"RTN","PRSXP84",71,0)
 . ;
"RTN","PRSXP84",72,0)
 . Q:$P($G(^PRSPC(EMP,1)),U,1)="Y"
"RTN","PRSXP84",73,0)
 . ;
"RTN","PRSXP84",74,0)
 . S D450=$G(^PRSPC(EMP,0))
"RTN","PRSXP84",75,0)
 . Q:D450=""
"RTN","PRSXP84",76,0)
 . S PDATE=$P(D450,U,28)
"RTN","PRSXP84",77,0)
 . ;
"RTN","PRSXP84",78,0)
06 . ; Check for employees who received a promotion in PP 03-06
"RTN","PRSXP84",79,0)
 . ;
"RTN","PRSXP84",80,0)
 . I PDATE>3030322&(PDATE<3030406) D  Q
"RTN","PRSXP84",81,0)
 . . S TCNT=TCNT+1
"RTN","PRSXP84",82,0)
 . . D RPT
"RTN","PRSXP84",83,0)
 . . S MESS="PP 03-05"_$J(SAL05,10)_$J(GRD05,6)_$J(STP05,7)
"RTN","PRSXP84",84,0)
 . . S ^TMP($J,"MGD",MCNT)=MESS
"RTN","PRSXP84",85,0)
 . . S MCNT=MCNT+1
"RTN","PRSXP84",86,0)
 . . ;
"RTN","PRSXP84",87,0)
 . . S MESS="PP 03-06"_$J(SAL06,10)_$J(GRD06,6)_$J(STP06,7)
"RTN","PRSXP84",88,0)
 . . I SAL06'=SALARY!(GRD06'=GRADE)!(STP06'=STEP) D
"RTN","PRSXP84",89,0)
 . . . S MESS=MESS_$J(SALARY,19)_$J(GRADE,6)_$J(STEP,7)
"RTN","PRSXP84",90,0)
 . . S ^TMP($J,"MGD",MCNT)=MESS
"RTN","PRSXP84",91,0)
 . . S MCNT=MCNT+1
"RTN","PRSXP84",92,0)
 . . S DR="3////^S X=GRADE",DIE="^PRST(459,IEN06,""P"",",DA=EMP
"RTN","PRSXP84",93,0)
 . . L +^PRST(459,IEN06,"P",EMP):0 I $T D ^DIE
"RTN","PRSXP84",94,0)
 . . S DR="4////^S X=STEP",DIE="^PRST(459,IEN06,""P"",",DA=EMP D ^DIE
"RTN","PRSXP84",95,0)
 . . S DR="13////^S X=SALARY",DIE="^PRST(459,IEN06,""P"",",DA=EMP D ^DIE
"RTN","PRSXP84",96,0)
 . . L -^PRST(459,IEN06,"P",EMP)
"RTN","PRSXP84",97,0)
 . . ;
"RTN","PRSXP84",98,0)
 . . S MESS="PP 03-07"_$J(SAL07,10)_$J(GRD07,6)_$J(STP07,7)
"RTN","PRSXP84",99,0)
 . . I SAL07'=SALARY!(GRD07'=GRADE)!(STP07'=STEP) D
"RTN","PRSXP84",100,0)
 . . . S MESS=MESS_$J(SALARY,19)_$J(GRADE,6)_$J(STEP,7)
"RTN","PRSXP84",101,0)
 . . S ^TMP($J,"MGD",MCNT)=MESS
"RTN","PRSXP84",102,0)
 . . S MCNT=MCNT+1
"RTN","PRSXP84",103,0)
 . . S DR="3////^S X=GRADE",DIE="^PRST(459,IEN07,""P"",",DA=EMP
"RTN","PRSXP84",104,0)
 . . L +^PRST(459,IEN07,"P",EMP):0 I $T D ^DIE
"RTN","PRSXP84",105,0)
 . . S DR="4////^S X=STEP",DIE="^PRST(459,IEN07,""P"",",DA=EMP D ^DIE
"RTN","PRSXP84",106,0)
 . . S DR="13////^S X=SALARY",DIE="^PRST(459,IEN07,""P"",",DA=EMP D ^DIE
"RTN","PRSXP84",107,0)
 . . L -^PRST(459,IEN07,"P",EMP)
"RTN","PRSXP84",108,0)
 . . ;
"RTN","PRSXP84",109,0)
 . . S MESS="PP 03-08"_$J(SAL08,10)_$J(GRD08,6)_$J(STP08,7)
"RTN","PRSXP84",110,0)
 . . I SAL08'=SALARY!(GRD08'=GRADE)!(STP08'=STEP) D
"RTN","PRSXP84",111,0)
 . . . S MESS=MESS_$J(SALARY,19)_$J(GRADE,6)_$J(STEP,7)
"RTN","PRSXP84",112,0)
 . . S ^TMP($J,"MGD",MCNT)=MESS
"RTN","PRSXP84",113,0)
 . . S MCNT=MCNT+1
"RTN","PRSXP84",114,0)
 . . S DR="3////^S X=GRADE",DIE="^PRST(459,IEN08,""P"",",DA=EMP
"RTN","PRSXP84",115,0)
 . . L +^PRST(459,IEN08,"P",EMP):0 I $T D ^DIE
"RTN","PRSXP84",116,0)
 . . S DR="4////^S X=STEP",DIE="^PRST(459,IEN08,""P"",",DA=EMP D ^DIE
"RTN","PRSXP84",117,0)
 . . S DR="13////^S X=SALARY",DIE="^PRST(459,IEN08,""P"",",DA=EMP D ^DIE
"RTN","PRSXP84",118,0)
 . . L -^PRST(459,IEN08,"P",EMP)
"RTN","PRSXP84",119,0)
 . . ;
"RTN","PRSXP84",120,0)
 . . S ^TMP($J,"MGD",MCNT)="  IN 450"_$J(SALARY,10)_$J(GRADE,6)_$J(STEP,7)
"RTN","PRSXP84",121,0)
 . . S MCNT=MCNT+1
"RTN","PRSXP84",122,0)
 . . S ^TMP($J,"MGD",MCNT)=""
"RTN","PRSXP84",123,0)
 . . S MCNT=MCNT+1
"RTN","PRSXP84",124,0)
 . . ;
"RTN","PRSXP84",125,0)
07 . . ; Check for employees who received a promotion in PP 03-07
"RTN","PRSXP84",126,0)
 . . ;
"RTN","PRSXP84",127,0)
 . I PDATE>3030405&(PDATE<3030420) D  Q
"RTN","PRSXP84",128,0)
 . . ;
"RTN","PRSXP84",129,0)
 . . ; Load data from PP 03-05
"RTN","PRSXP84",130,0)
 . . ;
"RTN","PRSXP84",131,0)
 . . S TCNT=TCNT+1
"RTN","PRSXP84",132,0)
 . . D RPT
"RTN","PRSXP84",133,0)
 . . S MESS="PP 03-05"_$J(SAL05,10)_$J(GRD05,6)_$J(STP05,7)
"RTN","PRSXP84",134,0)
 . . S ^TMP($J,"MGD",MCNT)=MESS
"RTN","PRSXP84",135,0)
 . . S MCNT=MCNT+1
"RTN","PRSXP84",136,0)
 . . ;
"RTN","PRSXP84",137,0)
 . . S MESS="PP 03-06"_$J(SAL06,10)_$J(GRD06,6)_$J(STP06,7)
"RTN","PRSXP84",138,0)
 . . I SAL06'=SAL05!(GRD06'=GRD05)!(STP06'=STP05) D
"RTN","PRSXP84",139,0)
 . . . S MESS=MESS_$J(SAL05,19)_$J(GRD05,6)_$J(STP05,7)
"RTN","PRSXP84",140,0)
 . . S ^TMP($J,"MGD",MCNT)=MESS
"RTN","PRSXP84",141,0)
 . . S MCNT=MCNT+1
"RTN","PRSXP84",142,0)
 . . S DR="3////^S X=GRD05",DIE="^PRST(459,IEN06,""P"",",DA=EMP
"RTN","PRSXP84",143,0)
 . . L +^PRST(459,IEN06,"P",EMP):0 I $T D ^DIE
"RTN","PRSXP84",144,0)
 . . S DR="4////^S X=STP05",DIE="^PRST(459,IEN06,""P"",",DA=EMP D ^DIE
"RTN","PRSXP84",145,0)
 . . S DR="13////^S X=SAL05",DIE="^PRST(459,IEN06,""P"",",DA=EMP D ^DIE
"RTN","PRSXP84",146,0)
 . . L -^PRST(459,IEN06,"P",EMP)
"RTN","PRSXP84",147,0)
 . . ;
"RTN","PRSXP84",148,0)
 . . S MESS="PP 03-07"_$J(SAL07,10)_$J(GRD07,6)_$J(STP07,7)
"RTN","PRSXP84",149,0)
 . . I SAL07'=SALARY!(GRD07'=GRADE)!(STP07'=STEP) D
"RTN","PRSXP84",150,0)
 . . . S MESS=MESS_$J(SALARY,19)_$J(GRADE,6)_$J(STEP,7)
"RTN","PRSXP84",151,0)
 . . S ^TMP($J,"MGD",MCNT)=MESS
"RTN","PRSXP84",152,0)
 . . S MCNT=MCNT+1
"RTN","PRSXP84",153,0)
 . . S DR="3////^S X=GRADE",DIE="^PRST(459,IEN07,""P"",",DA=EMP
"RTN","PRSXP84",154,0)
 . . L +^PRST(459,IEN07,"P",EMP):0 I $T D ^DIE
"RTN","PRSXP84",155,0)
 . . S DR="4////^S X=STEP",DIE="^PRST(459,IEN07,""P"",",DA=EMP D ^DIE
"RTN","PRSXP84",156,0)
 . . S DR="13////^S X=SALARY",DIE="^PRST(459,IEN07,""P"",",DA=EMP D ^DIE
"RTN","PRSXP84",157,0)
 . . L -^PRST(459,IEN07,"P",EMP)
"RTN","PRSXP84",158,0)
 . . ;
"RTN","PRSXP84",159,0)
 . . S MESS="PP 03-08"_$J(SAL08,10)_$J(GRD08,6)_$J(STP08,7)
"RTN","PRSXP84",160,0)
 . . I SAL08'=SALARY!(GRD08'=GRADE)!(STP08'=STEP) D
"RTN","PRSXP84",161,0)
 . . . S MESS=MESS_$J(SALARY,19)_$J(GRADE,6)_$J(STEP,7)
"RTN","PRSXP84",162,0)
 . . S ^TMP($J,"MGD",MCNT)=MESS
"RTN","PRSXP84",163,0)
 . . S MCNT=MCNT+1
"RTN","PRSXP84",164,0)
 . . S DR="3////^S X=GRADE",DIE="^PRST(459,IEN08,""P"",",DA=EMP
"RTN","PRSXP84",165,0)
 . . L +^PRST(459,IEN08,"P",EMP):0 I $T D ^DIE
"RTN","PRSXP84",166,0)
 . . S DR="4////^S X=STEP",DIE="^PRST(459,IEN08,""P"",",DA=EMP D ^DIE
"RTN","PRSXP84",167,0)
 . . S DR="13////^S X=SALARY",DIE="^PRST(459,IEN08,""P"",",DA=EMP D ^DIE
"RTN","PRSXP84",168,0)
 . . L -^PRST(459,IEN08,"P",EMP)
"RTN","PRSXP84",169,0)
 . . S ^TMP($J,"MGD",MCNT)="  IN 450"_$J(SALARY,10)_$J(GRADE,6)_$J(STEP,7)
"RTN","PRSXP84",170,0)
 . . S MCNT=MCNT+1
"RTN","PRSXP84",171,0)
 . . S ^TMP($J,"MGD",MCNT)=""
"RTN","PRSXP84",172,0)
 . . S MCNT=MCNT+1
"RTN","PRSXP84",173,0)
 ;
"RTN","PRSXP84",174,0)
 D XMT
"RTN","PRSXP84",175,0)
 K DIE
"RTN","PRSXP84",176,0)
 Q
"RTN","PRSXP84",177,0)
 ;
"RTN","PRSXP84",178,0)
XMT ; Send status via mail message
"RTN","PRSXP84",179,0)
 ;
"RTN","PRSXP84",180,0)
 I $D(^TMP($J,"MGD")) D
"RTN","PRSXP84",181,0)
 . N DIFROM,XMDUZ,XMTEXT,XMY
"RTN","PRSXP84",182,0)
 . S XMDUZ=.5
"RTN","PRSXP84",183,0)
 . S XMTEXT="^TMP($J,""MGD"","
"RTN","PRSXP84",184,0)
 . S XMSUB=MESS1_"SALARY, GRADE & STEP CLEANUP"
"RTN","PRSXP84",185,0)
 . S XMY("DILL.MATT@FORUM.VA.GOV")="",XMY(DUZ)=""
"RTN","PRSXP84",186,0)
 . S XMY("MCCLARAN.PAM@FORUM.VA.GOV")=""
"RTN","PRSXP84",187,0)
 . D ^XMD
"RTN","PRSXP84",188,0)
 ;
"RTN","PRSXP84",189,0)
 K ^TMP($J),Y,%
"RTN","PRSXP84",190,0)
 D NOW^%DTC
"RTN","PRSXP84",191,0)
 S Y=%
"RTN","PRSXP84",192,0)
 D DD^%DT
"RTN","PRSXP84",193,0)
 S TIME=Y
"RTN","PRSXP84",194,0)
 W !!,"Post install routine PRSXP84 completed at ",TIME_"."
"RTN","PRSXP84",195,0)
 W !,TCNT," Employees were updated."
"RTN","PRSXP84",196,0)
 Q
"RTN","PRSXP84",197,0)
 ;
"RTN","PRSXP84",198,0)
RPT ; 
"RTN","PRSXP84",199,0)
 ;
"RTN","PRSXP84",200,0)
 S GRADE=$P(D450,U,14),STEP=$P(D450,U,39),SALARY=$P(D450,U,29)
"RTN","PRSXP84",201,0)
 S DB=$P(D450,U,10),FLSA=$P(D450,U,12),PP=$P(D450,U,21)
"RTN","PRSXP84",202,0)
 S SSN=$E($P(D450,U,9),6,9),EMPX="         "
"RTN","PRSXP84",203,0)
 S NAME=$P($P(D450,U,1),",",1)_","_$E($P($P(D450,U,1),",",2))
"RTN","PRSXP84",204,0)
 ;
"RTN","PRSXP84",205,0)
 S D0305=$G(^PRST(459,IEN05,"P",EMP,0))
"RTN","PRSXP84",206,0)
 S D0306=$G(^PRST(459,IEN06,"P",EMP,0))
"RTN","PRSXP84",207,0)
 S D0307=$G(^PRST(459,IEN07,"P",EMP,0))
"RTN","PRSXP84",208,0)
 S D0308=$G(^PRST(459,IEN08,"P",EMP,0))
"RTN","PRSXP84",209,0)
 ;
"RTN","PRSXP84",210,0)
 S SAL05=$P(D0305,U,14),GRD05=$P(D0305,U,4),STP05=$P(D0305,U,5)
"RTN","PRSXP84",211,0)
 S SAL06=$P(D0306,U,14),GRD06=$P(D0306,U,4),STP06=$P(D0306,U,5)
"RTN","PRSXP84",212,0)
 S SAL07=$P(D0307,U,14),GRD07=$P(D0307,U,4),STP07=$P(D0307,U,5)
"RTN","PRSXP84",213,0)
 S SAL08=$P(D0308,U,14),GRD08=$P(D0308,U,4),STP08=$P(D0308,U,5)
"RTN","PRSXP84",214,0)
 S SD=""
"RTN","PRSXP84",215,0)
 I PDATE>3030322&(PDATE<3030406) S SD="PP 03-06"
"RTN","PRSXP84",216,0)
 I PDATE>3030405&(PDATE<3030420) S SD="PP 03-07"
"RTN","PRSXP84",217,0)
 S Y=PDATE
"RTN","PRSXP84",218,0)
 D DD^%DT
"RTN","PRSXP84",219,0)
 S PDATE=Y
"RTN","PRSXP84",220,0)
 S $E(EMPX,1,$L(EMP))=EMP
"RTN","PRSXP84",221,0)
 S MESS=NAME_" ID: "_SSN_"  IEN: "_EMPX_"  Salary date: "_PDATE_" - "_SD
"RTN","PRSXP84",222,0)
 S ^TMP($J,"MGD",MCNT)=MESS
"RTN","PRSXP84",223,0)
 S MCNT=MCNT+1
"RTN","PRSXP84",224,0)
 S MESS="Pay Plan: "_PP_"    Duty Basis: "_DB_"  FLSA: "_FLSA
"RTN","PRSXP84",225,0)
 S ^TMP($J,"MGD",MCNT)=MESS
"RTN","PRSXP84",226,0)
 S MCNT=MCNT+1
"RTN","PRSXP84",227,0)
 S MESS="Pay Period  Salary   Grade  Step  Corrected Salary   Grade  Step"
"RTN","PRSXP84",228,0)
 S ^TMP($J,"MGD",MCNT)=MESS
"RTN","PRSXP84",229,0)
 S MCNT=MCNT+1
"RTN","PRSXP84",230,0)
 Q
"VER")
8.0^22
**END**
**END**

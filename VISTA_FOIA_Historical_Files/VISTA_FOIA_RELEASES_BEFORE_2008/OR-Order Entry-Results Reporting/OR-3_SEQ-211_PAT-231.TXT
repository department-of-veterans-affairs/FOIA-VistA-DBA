
=============================================================================
Run Date: MAY 05, 2005                     Designation: OR*3*231
Package : OR - ORDER ENTRY/RESULTS REPORTING  Priority: EMERGENCY
Version : 3       SEQ #211                      Status: Released
                  Compliance Date: MAY 10, 2005
=============================================================================

Associated patches: (v)OR*3*195    <<= must be installed BEFORE `OR*3*231'

Subject: CPRS GUI Fixes for PSI-04-044, PSI-05-004, PSI-05-016, PSI-05-032

Category: 
  - PATCH FOR A PATCH
  - Other
  - Routine

Description:
============

  
 **************************************************************************
 *** This patch addresses four patient safety issues and must be        ***
 *** installed:                                                         ***
 ***                                                                    ***
 *** -- IMMEDIATELY after installation of patch OR*3.0*195              ***
 *** -- By the compliance date, which is 5 days from release date       ***
 ***                                                                    ***
 *** It may be installed with users on the system.                      ***
 **************************************************************************
  
 Patch OR*3*231, version 25.40 of the GUI, resolves four patient safety 
 issues and the defects listed below.
  
 -- MEDICATION ORDERING
  
 Outpatient Supplies No Longer Require Routes - In the OR*3*195 multi-patch
 build, developers changed CPRS to require all orders placed through the
 inpatient and outpatient medication dialogs to have a route-including
 supply items. In patch OR*3*231, supply item orders for outpatients no
 longer require the user to enter a route. If the user does enter a route
 for these supplies, the route must be selected from the list; free-text
 entries are not allowed.  Inpatient supplies, if there are any, still
 require a route.
  
 Mouse Hover Auto-Selection Problem Corrected - When entering a medication 
 order, an incorrect medication could be selected as follows: 
   1. Place the cursor in the field to enter a medication name, and 
      then move the mouse to the medication list. 
   2. Type a few characters for a medication, such as "as" for Aspirin.
   3. Press tab to move the focus to the list. CPRS selects the 
      medication under the mouse instead of the one at the top of the list.
 In this version the list item will no longer become automatically 
 selected upon hovering over the medication list.
  
 Space in Schedule Field Entry Causes Error - When the user enters a space 
 in a schedule for a medication order, CPRS allows them to enter this
 schedule. However, when the user selects Accept Order, CPRS gave an error
 and did not save the order. Developers corrected the schedule validation
 so that CPRS now gives the message that the user did not enter a valid
 schedule.
  
 NOIS/Remedy addressed:
 HWH-1104-41561/HD71095 
  
 Renew Action Modified to Prevent Entry of an Inpatient Medication for an 
 Inpatient from an Outpatient Location - Due to a patient safety 
 consideration identified by San Diego during testing of the OR*3*195 
 multi-patch build, the software was modified to prevent entry of inpatient
 orders for inpatients from an outpatient location.  It was recently
 discovered that the renew action was overlooked when implementing this
 modification for new/copy and change.  In OR*3*231 an additional
 modification was made to prevent renew of an inpatient order for an
 inpatient with an outpatient location.  The user will now receive an error
 message stating that the order cannot be renewed with an outpatient
 location.
  
 NOIS/Remedy addressed:
 HD84581
  
 Lowercase Schedules Now Expand Correctly to Instructions Field - For 
 outpatient medication orders, schedules entered in lower case letters did
 not expand correctly in the instructions field. This was caused because
 the schedules in the file were only in uppercase. Developers added code 
 to ensure that all unique lowercase entries are automatically changed to
 uppercase before being passed to pharmacy.
  
 Dosage Display Problem on Orders Tab for Tablets and Drops - A problem was
 discovered where if the user entered a dosage such as "1-2 tablets" that
 CPRS did not display this correctly in the order dialog, on the Orders
 tab, or in the order detailed display. The "1-2" was missing and only the
 word "TABLETS" displayed. The text was displayed correctly on the Meds tab
 listing, with orders passed to pharmacy, and on the pharmacy label. CPRS
 developers corrected this display problem. CPRS now expands the numbers it
 recognizes and treats other entries as free-text and displays them without
 any changes ("1-2" as "1-2" and "1 - 2" as "ONE - 2" for tablets and
 drops), which was the way the dosage field worked in CPRS GUI v.24.
  
 Complex Outpatient Meds Schedule with PRN Display Problem Corrected -
 Previously, if while placing a complex outpatient medication order, the 
 user entered a free-text schedule and then checked PRN, the free-text 
 schedule was deleted from the field at the bottom of the order dialog when
 CPRS expanded PRN to "AS NEEDED". So, if the user entered a free-text
 schedule of "EVERY AFTERNOON" and checked PRN, the field should have read
 "EVERY AFTERNOON AS NEEDED", but it read "AS NEEDED". This was only a
 display issue on the Order dialog, the listing on the Orders tab, and on
 the detailed display. The correct text was displayed on the Meds tab
 listing, passed to pharmacy, and printed on the label. Developers 
 corrected this problem.
  
  
 PATIENT SAFETY ISSUES RESOLVED BY THIS PATCH:
 =============================================
  
 1. PSI-04-044 - Physician unable to enter medication order, 08/12/04
  
 Defect/Issue:  
 Because of how CPRS auto-completion was working in the medication order
 dialog, the user could incorrectly select a quick order if the user typed 
 too slowly or if CPRS highlighted the quick order when instead the user 
 intended to select the medication in the list below.
  
 Resolution:
 A modification has been made to this CPRS version so that:
   1. Characters will not be auto-deleted from the selection box
   2. Nothing in the selection box will be highlighted in blue until an 
      explicit selection is made.
   3. A unique entry is required for auto-completion
   4. When auto-completion occurs, the OK button is enabled
  
 NOIS/Remedy addressed:
 NJH-0804-20315/HD70898
  
 2. PSI-05-004 - Free-Text Entry Could Cause Incorrect Dose, 01/13/05
  
 Defect/Issue:  
 This corresponds to Issue 7 "Free-Text Entry Could Cause Incorrect 
 Dosage" identified in the OR*3.0*195 Patch Description. 
 This problem could occur when a user is writing medication orders: simple
 and complex inpatient orders, simple and complex outpatient orders, or
 non-VA medications. When a dosage has already been entered by the user or
 by a quick order and the user clicks in the field to edit the dosage
 rather than selecting a different dosage from the available list, the
 highlighted dosage is replaced by the first character of the new dosage.
 However, then the cursor incorrectly moves back to the left and types over
 that character when the user types additional numbers. For example, if a
 quick order contained a dosage of 75MG and the user attempted to change to
 25MG, the user would highlight the dosage if necessary, type the 2, which
 would appear, but the cursor would then incorrectly move back to the far
 left and replace the 2 with a 5 when the user typed the 5. This would
 create a dosage of 5MG instead of the intended 25MG. The cursor movement
 occurs with the first character only.
  
 Resolution:
 A modification has been made to this CPRS version to ensure the cursor
 position does not move to the left after typing in the first character
 when editing a value in the medication order dialog dosage, route, and 
 schedule combination boxes.  
  
 Notes:
 - Non-VA meds are unchanged in that they do not require a route, and 
   free-text entry is allowed.
 - Outpatient medications are unchanged in that they do not require a 
   standard schedule, and free-text entry is allowed.
  
 NOIS/Remedy addressed:
 PUG-0105-51149/HD71190
  
 3. PSI-05-016 - Med Error due to pre-populated med screen, 02/22/05
  
 Defect/Issue:  
 For ease in selection and by design the medication selection screen
 currently allows typing a search term in the medication selection box,
 pre-population and not moving forward until you click on the entry from 
 the list. The OK button is grayed out.  It would be very easy to select 
 the entry that is in the selection box rather than the intended 
 medication.  Although the list may navigate to the searched term, the 
 selection box should stay empty until a selection is made.   
  
 Resolution:
 A modification has been made to this CPRS version so that:
   1. Characters will not be auto-deleted from the selection box
   2. Nothing in the selection box will be highlighted in blue until an 
      explicit selection is made.
   3. A unique entry is required for auto-completion
   4. When auto-completion occurs, the OK button is enabled
  
 NOIS/Remedy addressed:
 TAM-0205-31170/HD71286
  
 4. PSI-05-032 - Displaying all routes after OR*3.0*231 
    installation/implementation may lead to incorrect selection, 03/28/05
  
 Defect/Issue:
 OR*3.0*231 introduced requiring selection of a route from the drop-down 
 list upon ordering medications; a free-text route entry (whether it is in 
 the MEDICATION ROUTES file or not) is not allowed. This means that if a 
 route is not listed in the drop-down list then it cannot be selected. The 
 list of available routes is populated from the DOSAGE FORM file. In that 
 file, many drugs share a dosage form and hence many drugs with the same 
 dosage form will have the same list of routes available. But not all drugs
 with the same dosage form can be given by all the same routes. In the
 past, in order to prevent the clinicians from ordering medications by a
 contraindicated route, some sites MAY have configured their files so that
 some routes were not included in the dosage form file for specific dosage
 forms even though a subset of drugs in that dosage form could be given by
 that route. Since the route could be entered free text or as a match to
 the MEDICATION ROUTES file without having to choose from the drop down
 list, this worked to prevent the display of contraindicated routes to the
 clinicians. With the changes in OR*3.0*231t6 (v25t34), to implement this
 functionality test sites that configured their files to not include all
 available routes had to add back routes to the DOSAGE FORM file to allow
 selection however these additions now displayed may cause a provider to
 select a route which may not be correct for a medication. Not adding
 routes to allow selection prevents ordering of specific medications. Also,
 if there is no route default defined at the orderable item level, a
 default may be displayed upon order entry which may not be correct for a
 medication.  
  
 Resolution:
 A modification has been made to this CPRS version so that:
   1. A route may be selected from the drop down selection list, but 
      selection will not be required from that list
   2. A route may be entered if it exists in the MEDICATION ROUTES file
   3. Route entry will follow the current required rules for Outpatient, 
      Inpatient, Non-VA medications, and Supply items
    
 NOIS/Remedy addressed:
 HD87666
  
  
 The KIDS portion of the installation will simply update the version number
 of the OR CPRS GUI CHART option to be 1.0.25.40. The .ZIP file contains an
 updated CPRS executable.  
  
 REQUIRED BUILDS:
 ================
  
    OR*3.0*195
  
 NOTE: Internet Explorer 4.0 (IE4) or later is REQUIRED in order for GUI
 version 25.40 to run.  However IE 5.5 or later with 128-bit encryption is
 required for PKI functionality. 
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
  <tab>;;3.0;ORDER ENTRY/RESULTS REPORTING;**[patch list]**;Dec 17, 1997
   
                             CHECK^XTSUMBLD results
  Routine name         Before Patch          After Patch         Patch List
  ============         ============          ===========         ==========
  ORY231                        N/A              2138644                231
   
 INSTALLATION FILES:
 ==================
  
 The following software files are exported as part of this patch:
   
     File Name               Contents                    Retrieval Format
     ---------               --------                    ----------------
     OR_30_231.ZIP           File(s) indented below      BINARY
      - CPRSChart.exe          CPRS Executable
      - OR_30_231RN.pdf        Release Notes (Adobe Acrobat version)
      - OR_30_231RN.doc        Release Notes (Word version)
      - CPRSGUIUM.doc          CPRS GUI User Manual (Word Version)  
      - CPRSGUIUM.pdf          CPRS GUI User Manual (Adobe Acrobat version)
      - CPRS.cnt               CPRS Help CNT File
      - CPRS.hlp               CPRS Help File 
     OR_30_231_SRC.ZIP       CPRSChart Source            BINARY
     OR_30_231.KID           KIDS build                  ASCII
   
  The files listed above may be obtained via FTP.  The preferred method is
  to FTP the files from:
   
     download.vista.med.va.gov
   
  This transmits the files from the first available FTP server.  Sites may
  also elect to retrieve software directly from a specific server as
  follows:
   
     OI FIELD OFFICE    FTP ADDRESS                 DIRECTORY
     ----------------   -------------------------   --------------------
     Albany             ftp.fo-albany.med.va.gov    [anonymous.software]
     Hines              ftp.fo-hines.med.va.gov     [anonymous.software]
     Salt Lake City     ftp.fo-slc.med.va.gov       [anonymous.software]
   
   
 INSTALLATION INSTRUCTIONS:
 ========================= 
   
 This patch should be installed during non-peak hours to minimize 
 disruption.  Users may be on the system during installation.  Installation
 should take approximately 1 minute.  This patch should be installed by the
 compliance date to comply with VHA Directive 2001-023.
  
 1.  Obtain the file OR_30_231.KID.
  
 2.  From the Kernel Installation and Distribution System Menu, select the
     Installation menu.
   
 3.  Use Load a Distribution using OR_30_231.KID when prompted to Enter
     a Host File name.  You may need to prepend a directory name.
  
 4.  From this menu, you may then elect to use the following options
      (when prompted for the INSTALL NAME, enter OR*3.0*231):
         a.  Compare Transport Global to Current System
         b.  Verify Checksums in Transport Global 
  
 5.  When ready, select the Install Packages option (when prompted for 
     the INSTALL NAME, enter OR*3.0*231).
  
 6.  When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of
     Install? Yes//", respond "YES" (or respond "NO" and reschedule
     for a later time).
  
 7.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//',
     you may respond NO.
   
 8.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? YES//', respond NO.
  
 9.  Following successful installation, the post-install routine ORY231 may
     be deleted.
   
 10. Retrieve and open the file OR_30_231.ZIP.
  
 11. Place the User and Technical Manual files in a location that can 
     be accessed by CPRS users.
  
 12. Move the CPRSChart.exe and help files to the appropriate directory
     where it can be accessed by all CPRS workstations.

Routine Information:
====================

Routine Name:
  - ORY231


Routine Checksum:

=============================================================================
User Information:
Entered By  : KRIEG,JEAN                    Date Entered  : FEB 09, 2005
Completed By: MERRILL,DAVID P               Date Completed: APR 28, 2005
Released By : STRONG,NICK                   Date Released : MAY 05, 2005
=============================================================================


Packman Mail Message:
=====================

No routines included

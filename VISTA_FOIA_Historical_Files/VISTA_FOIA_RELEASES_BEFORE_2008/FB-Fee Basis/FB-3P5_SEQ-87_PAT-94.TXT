$TXT Created by DEHGHANIAN,JAMSHID at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 03/28/06 at 17:18
=============================================================================
Run Date: MAY 17, 2006                     Designation: FB*3.5*94
Package : FB - FEE BASIS                      Priority: Mandatory
Version : 3.5        SEQ #87                    Status: Released
                  Compliance Date: JUN 17, 2006
=============================================================================

Associated patches: (v)FB*3.5*77   <<= must be installed BEFORE `FB*3.5*94'

Subject: FEE BASIS ERROR FOR CODE INACTIVE PT DISCH

Category: 
  - Routine

Description:
============

 This patch fixes the incorrect date verification for DRG effective date.  
     
 ASSOCIATED E3R(s):
 ==================
 N/A
  
  
 ASSOCIATED REMEDY:
 ==================
 HD0000000085498 - Fee Basis Error for Code Inactive for Pt Discharge
   Duplicates:
         HD0000000124009 - Problem with DRGs in Fee Basis
         HD0000000131224 - Fee can't pay bills because of the way FB 
                           software views 
  
    Problem
    -------
    Currently, the Invoice Edit [FBCH EDIT PAYMENT] option compares the
    DRG's 'Effective Date' to 'Treatment From Date' to allow (if the
    effective date is on or before the treatment from date) or disallow (if
    the effective date is after the treatment from date) the selection of
    that DRG.
  
    Solution
    --------
    The correct date against which to do the check is the 'Discharge Date' 
    from the invoice.  If there is no discharge date , then 'Treatment To 
    date' will be used.  If there is no treatment to date, then 'Treatment 
    From Date' will be used. The Enter Invoice/Payment [FBCH ENTER PAYMENT]
    option and Complete a Payment [FBCH COMPLETE PAYMENT] option will also
    be fixed with this patch.
  
  
  
 PARTICIPATING TEST SITES:
 =========================
 Montana HCS
 Salem, VA
 Portland, OR
  
  
 INSTALLATION INSTRUCTIONS
 =========================
  
 This patch may be run with users on the system, but it is recommended
 that it be queued to run after normal business hours to minimize the 
 impact on users of the Fee Basis package.
  
 Installation will take less than 5 minutes.
  
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
     the KIDS distribution included with this message.
  
 2.  From the Kernel Installation and Distribution System Menu, select
     the Installation menu.
  
 3.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter FB*3.5*94):
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System  - this option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch (routines,
         DDs, templates, etc.).
     c.  Verify Checksums in Transport Global - this option will
         allow you to ensure the integrity of the routines that are in
         the transport global.
     d.  Print Transport Global - this option will allow you to view the
         components of the KIDS build.
  
 4.  Use the Install Package(s) option and select the package FB*3.5*94.
  
 5.  When prompted ' Want KIDS to INHIBIT LOGONs during the install?
     YES//', respond NO.
  
 6.  When prompted, Want to DISABLE Scheduled Options, Menu Options, and 
     Protocols? NO// respond No.
  
  
  
 ROUTINE SUMMARY 
 ===============
 The following is a list of the routines included in this patch.  
 The second line of each of these routines now looks like: 
  
   <tab>;;3.5;FEE BASIS;**[patch list]**;JAN 30, 1995 
  
  
                        CHECK^XTSUMBLD results
   Routine      Before Patch     After Patch      Patch List
   -------      ------------     -----------      ----------
    FBCSV1       3908190          4266319          55,77,94

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: FBCSV1
    Before: B18393988  After: B19921855  **55,77,94**
 Description of Changes:
  Changed the FRDTINV section such that it checks for the Discharge Date 
  first.  If Discharge Date is null, then it looks for Treatment To Date.  
  If Treatment To Date is null, then it looks for Treatment From Date.  
  FInally, if none of the above dates exist, a null value is returned.
   
  ----before---
  FRDTINV(FBDA) ;
       Q $P($G(^FBAAI(FBDA,0)),"^",6)
   
  ----after----
  FRDTINV(FBDA) ;
       N FBRETDT
       S FBRETDT=$P($$B9DISCHG^FBAAV5(FBDA),"^",1) ; Discharge Date
       I FBRETDT="" S FBRETDT=$P($G(^FBAAI(FBDA,0)),"^",7) ; Treatment To DT
       I FBRETDT="" S FBRETDT=$P($G(^FBAAI(FBDA,0)),"^",6) ; Treatment Fr DT
       Q FBRETDT


=============================================================================
User Information:
Entered By  : DEHGHANIAN,JAMSHID            Date Entered  : SEP 22, 2005
Completed By: TSAIMEUCHONG,BRENDA           Date Completed: MAY 11, 2006
Released By : MARSHALL,FALENCIA B.          Date Released : MAY 17, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

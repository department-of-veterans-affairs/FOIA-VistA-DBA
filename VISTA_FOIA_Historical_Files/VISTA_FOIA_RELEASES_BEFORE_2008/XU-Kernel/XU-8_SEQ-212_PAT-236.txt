$TXT Created by ORMSBY,SKIP at NXT.KERNEL.FO-OAKLAND.MED.VA.GOV  (KIDS) on THURSDAY, 06/13/02 at 07:01
=============================================================================
Run Date: OCT 07, 2002                     Designation: XU*8*236
Package : XU - KERNEL                          Priority: Mandatory
Version : 8       SEQ #212                       Status: Released
=============================================================================


Subject:  Hui/VHA CIO SD&D Pharmacy Data Interchange

Category: 
  - Data Dictionary
  - Routine
  - Enhancement (Mandatory)

Description: 
============

 This patch is in support of the Hui/VHA CIO SD&D Pharmacy Data 
 Interchange project. The project provides a method for the one-way 
 electronic transfer of prescription orders from an external system to 
 VistA.
  
  In summary this patch consists of the following parts:
  
  1.  Three routines.
  2.  Two new style cross-references to monitor changes to specific New 
      Person File fields.  See the 'Documentation Changes' section for
      details.
  3.  Two new protocols.  See the 'Documentation Changes' section for
      details.
  
 If sites do not wish to utilize this functionality, nothing needs to be
 done besides installing the patch. If sites want to utilize this
 functionality, more information on the setup and the data elements are
 documented on the VistA Documentation Library.
  
  
 Documentation Changes
 =====================
 ** New Cross-References for NEW PERSON file #200:
  
 FILE: 200                               NAME: AXUHUI
   SHORT DESCRIPTION: Hui Project Top File Xref
   TYPE: MUMPS                           EXECUTION: RECORD
   ROOT TYPE: INDEX FILE                 ROOT FILE: 200
   USE: ACTION
  DESCRIPTION:   This new style cross-reference is on non-multiple fields
  that the Hui project want to monitor for a change in value (Patch
  XU*8*236). The following fields are being monitored in order: 
   
   .01 (NAME) 
   9.2 (TERMINATION DATE) 
   5 (DOB) 
   9 (SSN) 
   SET LOGIC: D HUI^XUHUI("","XUHUI FIELD CHANGE EVENT","","AXUHUI") Q
   KILL LOGIC: Q                         KILL ENTIRE INDEX CODE: Q
 ORDER NUMBER: 1                         TYPE OF VALUE: FIELD
   FILE: 200                             FIELD: .01
   COLLATION: forwards
 ORDER NUMBER: 2                         TYPE OF VALUE: FIELD
   FILE: 200                             FIELD: 9.2
   COLLATION: forwards
 ORDER NUMBER: 3                         TYPE OF VALUE: FIELD
   FILE: 200                             FIELD: 5
   COLLATION: forwards
 ORDER NUMBER: 4                         TYPE OF VALUE: FIELD
   FILE: 200                             FIELD: 9
   COLLATION: forwards
  
 FILE: 200                               NAME: AXUHUIKEY
   SHORT DESCRIPTION: HUI key xref       TYPE: MUMPS
   EXECUTION: RECORD                     ROOT TYPE: WHOLE FILE
   ROOT FILE: 200.051                    USE: ACTION
  DESCRIPTION:   This new style cross-reference is on the multiple: 'KEYS'
  so the Hui project can monitor the allocation/de-allocation of the
  'PROVIDER' key.  
   SET LOGIC: D HUIKEY^XUHUI("","XUHUI FIELD CHANGE EVENT","","AXUHUIKEY") 
 Q
   KILL LOGIC: D HUIKEY^XUHUI("","XUHUI FIELD CHANGE EVENT","K","AXUHUIKEY"
 ) Q                                     KILL ENTIRE INDEX CODE: Q
 ORDER NUMBER: 1                         TYPE OF VALUE: FIELD
   FILE: 200.051                         FIELD: .01
   COLLATION: forwards
  
 ** New Protocols:
 NAME: XUHUI FIELD CHANGE EVENT          ITEM TEXT: Field Change Event
   DISABLE: *Do NOT remove this message  TYPE: extended action
   CREATOR: ORMSBY,SKIP
  DESCRIPTION:   This is used to launch, in the background, the protocols
  that are listed in the ITEM multiple.  Called from routine: DEQUE^XUHUI. 
  
 ITEM: XUHUI SEND MESSAGE
   EXIT ACTION: D CLEAN^XUHUI            TIMESTAMP: 58946,42971
  
 NAME: XUHUI SEND MESSAGE
   ITEM TEXT: Send Notification Message
   DISABLE: *Do NOT remove this message  TYPE: action
   CREATOR: ORMSBY,SKIP
  DESCRIPTION:   This Action protocol is used to send a mail message to
  Members of Group: XUHUI CHANGE EVENT.  
   ENTRY ACTION: D ^XUHUIMSG             TIMESTAMP: 58946,42897
  
 DBA Coordination
 ================
 Clearance - May 30, 2002
  
 Blood Bank Team Coordination
 ============================
 Clearance - Jun 4, 2002
  
 NOIS
 ====
  -None-
  
 Thanks to Test Sites 
 ====================
  Honolulu, HI 
  Clarksburg, WV
  Oklahoma City, OK
  North Chicago, IL
  Hines, IL 
  
 Routine Summary: 
 ================
  The following routines are included in this patch.  The second line of 
 these routines now look like: 
   
   <tab>;;8.0;KERNEL;**[patch list]**;Jul 10, 1995 
   
 CHECK^XTSUMBLD results: 
   
   Routine Name   Before Patch    After Patch     Patch List 
   ============   ============    ===========     ==========
   XUHUI          -N/A-           2038273         236
   XUHUI236       -N/A-           7851898         236
   XUHUIMSG       -N/A-           2421513         236
  
 Installation Instructions: 
 ==========================
 This patch can be installed with VISTA users online.  However, it is 
 recommended that it be Queued for a time of generally least activity.  
  
 TaskMan does not need to be STOPPED or placed in a WAIT state and 
 installation should take less than a minute.
  
      1.  AXP/DSM sites: No review of mapped routine set is necessary 
 since these routines are new.
  
      2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu.  
 This option will load the KIDS package onto your system.  
  
      3.  The patch has now been loaded into a transport global on your 
 system. You now need to use KIDS to install the transport global.  
   
      4.  On the KIDS menu, under the 'Installation' menu, use the 
 following options: 
             Print Transport Global 
             Compare Transport Global to Current System 
             Verify Checksums in Transport Global 
             Backup a Transport Global 
  
      5.  On the KIDS menu, under the 'Installation' menu, use the 
 following option: 
             Select Installation Option: Install Package(s) 
             Select INSTALL NAME: XU*8*236
                                  ==========
         When the following dialog is seen:
         Incoming Mail Groups:
         Enter the Coordinator for Mail Group 'XUHUI CHANGE EVENT': <rtn>
  
         Answer 'NO' to 'Want KIDS to INHIBIT LOGONs during the install?
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols? 
  
      6.  AXP/DSM Sites - After the patch has been installed, no rebuilding
 your map set is necessary.
  
 >>> Sample Installation Dialog <<<
  
 Select INSTALL NAME:    XU*8.0*236     Loaded from Distribution  
 6/7/02@13:27:59
      => TEST v3  ;Created on Jun 07, 2002@13:23:01
  
 This Distribution was loaded on Jun 07, 2002@13:27:59 with header of 
    TEST v3  ;Created on Jun 07, 2002@13:23:01
    It consisted of the following Install(s):
      XU*8.0*236
 Checking Install for Package XU*8.0*236
  
 Install Questions for XU*8.0*236
  
  
 Incoming Mail Groups:
  
 Enter the Coordinator for Mail Group 'XUHUI CHANGE EVENT': 
  
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME// 0;P-OTHER;80;999  SYSTEM
  
  
  Install Started for XU*8.0*236 : 
                Jun 07, 2002@13:28:29
  
 Build Distribution Date: Jun 07, 2002
  
  Installing Routines:....
                Jun 07, 2002@13:28:30
  
  Installing PACKAGE COMPONENTS: 
  
  Installing MAIL GROUP..
  
  Installing PROTOCOL...
                Jun 07, 2002@13:28:30
  
  Running Post-Install Routine: ^XUHUI236.
 Adding 'AXUHUI' new style cross-reference...
 Finished adding 'AXUHUI' cross-reverence.
 Updating any Triggers for cross-reference 'AXUHUI'...
 Finished Updating any Trigers for cross-reference 'AXUHUI'.
 Adding 'AXUHUIKEY' new style cross-reference...
 Finished adding 'AXUHUIKEY' new style cross-reference.
 Updating any triggers for new style cross-reference 'AXUHUIKEY'.
 Finished updating triggers for 'AXUHUIKEY' cross-reference.
 Post installed finished.
  
  Updating Routine file......
  
  Updating KIDS files.......
  
  XU*8.0*236 Installed. 
                Jun 07, 2002@13:28:30
  
  
 =========================================================================
                 Special Post Installation Instructions
 =========================================================================
         For those sites who do not wish to utilize this functionality,
 NO FURTHER ACTION is necessary.
  
 ========================================================================
         For those sites who wish to utilize this functionality, preform
 the following steps.
  
 Step 1: Using Manage Mailman menu option add members to Mail Group 'XUHUI
 CHANGE EVENT', for example:
  
 Select Manage Mailman Option: Group/Distribution Management
  
 Select Group/Distribution Management Option: Mail Group Edit
  
 Select MAIL GROUP NAME: XUHUI CHANGE EVENT     
 MAIL GROUP NAME: XUHUI CHANGE EVENT// 
 Select MEMBER: ormsby,s  ORMSBY,SKIP       SO       
   Are you adding 'ORMSBY,SKIP' as a new MEMBER (the 1ST for this MAIL 
 GROUP)? No// y (Yes)
   TYPE: 
 Select MEMBER: 
 DESCRIPTION:
 This is the mail group that will receive messages from the HUI event of 
 changes either to New Person record for a Provider or if the Provider key 
 is allocated or de-allocated.
  
   Edit? NO// 
 TYPE: public// 
 ALLOW SELF ENROLLMENT?: 
 ORGANIZER: 
 COORDINATOR: 
 Select AUTHORIZED SENDER: 
 Select MEMBER GROUP NAME: 
 Select REMOTE MEMBER: 
 Select DISTRIBUTION LIST: 
  
 Do you wish to forward past mail group messages
 to the user(s) you just added to the mail group(s)? No//   NO
  
 Select MAIL GROUP NAME: 
  
 Select Group/Distribution Management Option: 
  
 Step 2:  Removal of the 'DISABLE' message so the Protocols will launch:
 >D Q^DI
  
  
 VA FileMan 22.0
  
  
 Select OPTION: ENTER OR EDIT FILE ENTRIES  
  
  
  
 INPUT TO WHAT FILE: PROTOCOL// 
 EDIT WHICH FIELD: ALL// DISABLE  
 THEN EDIT FIELD: 
  
  
 Select PROTOCOL NAME: XUHUI
      1   XUHUI FIELD CHANGE EVENT       Field Change Event  
      2   XUHUI SEND MESSAGE       Send Notification Message  
 CHOOSE 1-2: 1  XUHUI FIELD CHANGE EVENT     Field Change Event  
 DISABLE: *Do NOT remove this message  Replace @
    SURE YOU WANT TO DELETE? Y  (Yes)
  
  
 Select PROTOCOL NAME: XUHUI
      1   XUHUI FIELD CHANGE EVENT       Field Change Event  
      2   XUHUI SEND MESSAGE       Send Notification Message  
 CHOOSE 1-2: 2  XUHUI SEND MESSAGE     Send Notification Message  
 DISABLE: *Do NOT remove this message  Replace @
    SURE YOU WANT TO DELETE? Y  (Yes)
  
  
 The protocols are now enabled.  Note: If after some point in time you are
 no longer interested in receiving the e-mail messages about the changes,
 you can reset the 'DISABLE' field in Protocol 'XUHUI SEND MESSAGE'.

Routine Information:
====================

Routine Name:
  - XUHUI


Routine Checksum:

Routine Name:
  - XUHUIMSG


Routine Checksum:

Routine Name:
  - XUHUI236


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : ORMSBY,SKIP                    Date Entered : MAY 21, 2002
Completed By: HERREN,CATHRYN                Date Completed: OCT 04, 2002
Released By : TILLIS,LEWIS                  Date Released : OCT 07, 2002
=============================================================================


Packman Mail Message:
=====================

$END TXT

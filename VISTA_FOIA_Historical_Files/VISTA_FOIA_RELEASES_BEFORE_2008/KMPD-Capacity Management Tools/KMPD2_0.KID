KIDS Distribution saved on Mar 22, 2004@08:01:12
CAPACITY MANAGEMENT TOOLS 2.0
**KIDS**:CAPACITY MANAGEMENT TOOLS 2.0^

**INSTALL NAME**
CAPACITY MANAGEMENT TOOLS 2.0
"BLD",666,0)
CAPACITY MANAGEMENT TOOLS 2.0^CAPACITY MANAGEMENT TOOLS^0^3040322^y
"BLD",666,1,0)
^^1^1^3040218^
"BLD",666,1,1,0)
CM Tools 2.0
"BLD",666,4,0)
^9.64PA^8973.2^4
"BLD",666,4,8972.1,0)
8972.1
"BLD",666,4,8972.1,222)
y^y^f^^^^n
"BLD",666,4,8973,0)
8973
"BLD",666,4,8973,222)
y^y^f^^^^n
"BLD",666,4,8973.1,0)
8973.1
"BLD",666,4,8973.1,222)
y^y^f^^^^n
"BLD",666,4,8973.2,0)
8973.2
"BLD",666,4,8973.2,222)
y^y^f^^^^n
"BLD",666,4,"B",8972.1,8972.1)

"BLD",666,4,"B",8973,8973)

"BLD",666,4,"B",8973.1,8973.1)

"BLD",666,4,"B",8973.2,8973.2)

"BLD",666,"INIT")
EN^KMPDPOST
"BLD",666,"KRN",0)
^9.67PA^8989.52^19
"BLD",666,"KRN",.4,0)
.4
"BLD",666,"KRN",.401,0)
.401
"BLD",666,"KRN",.402,0)
.402
"BLD",666,"KRN",.403,0)
.403
"BLD",666,"KRN",.403,"NM",0)
^9.68A^1^1
"BLD",666,"KRN",.403,"NM",1,0)
KMPD PARAMETERS EDIT    FILE #8973^8973^0
"BLD",666,"KRN",.403,"NM","B","KMPD PARAMETERS EDIT    FILE #8973",1)

"BLD",666,"KRN",.5,0)
.5
"BLD",666,"KRN",.84,0)
.84
"BLD",666,"KRN",3.6,0)
3.6
"BLD",666,"KRN",3.8,0)
3.8
"BLD",666,"KRN",3.8,"NM",0)
^9.68A^1^1
"BLD",666,"KRN",3.8,"NM",1,0)
KMP-CAPMAN^^0
"BLD",666,"KRN",3.8,"NM","B","KMP-CAPMAN",1)

"BLD",666,"KRN",9.2,0)
9.2
"BLD",666,"KRN",9.8,0)
9.8
"BLD",666,"KRN",9.8,"NM",0)
^9.68A^46^46
"BLD",666,"KRN",9.8,"NM",1,0)
KMPDBD01^^0^B1914104
"BLD",666,"KRN",9.8,"NM",2,0)
KMPDHU01^^0^B36642411
"BLD",666,"KRN",9.8,"NM",3,0)
KMPDHU02^^0^B55231717
"BLD",666,"KRN",9.8,"NM",4,0)
KMPDHU03^^0^B28509534
"BLD",666,"KRN",9.8,"NM",5,0)
KMPDHUA^^0^B41047112
"BLD",666,"KRN",9.8,"NM",6,0)
KMPDPOST^^0^B12515134
"BLD",666,"KRN",9.8,"NM",7,0)
KMPDSS^^0^B4666656
"BLD",666,"KRN",9.8,"NM",8,0)
KMPDTP1^^0^B15666050
"BLD",666,"KRN",9.8,"NM",9,0)
KMPDTP2^^0^B21206441
"BLD",666,"KRN",9.8,"NM",10,0)
KMPDTP3^^0^B19757662
"BLD",666,"KRN",9.8,"NM",11,0)
KMPDTP4^^0^B26904696
"BLD",666,"KRN",9.8,"NM",12,0)
KMPDTP5^^0^B26924380
"BLD",666,"KRN",9.8,"NM",13,0)
KMPDTP6^^0^B26626387
"BLD",666,"KRN",9.8,"NM",14,0)
KMPDTP7^^0^B22954285
"BLD",666,"KRN",9.8,"NM",15,0)
KMPDTU02^^0^B7805759
"BLD",666,"KRN",9.8,"NM",16,0)
KMPDTU10^^0^B33878359
"BLD",666,"KRN",9.8,"NM",17,0)
KMPDTU11^^0^B2360612
"BLD",666,"KRN",9.8,"NM",18,0)
KMPDU^^0^B2238823
"BLD",666,"KRN",9.8,"NM",19,0)
KMPDU1^^0^B8912878
"BLD",666,"KRN",9.8,"NM",20,0)
KMPDU2^^0^B37510014
"BLD",666,"KRN",9.8,"NM",21,0)
KMPDU3^^0^B23853998
"BLD",666,"KRN",9.8,"NM",22,0)
KMPDU4^^0^B1414998
"BLD",666,"KRN",9.8,"NM",23,0)
KMPDU5^^0^B24646489
"BLD",666,"KRN",9.8,"NM",24,0)
KMPDUT^^0^B82480
"BLD",666,"KRN",9.8,"NM",25,0)
KMPDUT2^^0^B30234427
"BLD",666,"KRN",9.8,"NM",26,0)
KMPDUT4^^0^B6870660
"BLD",666,"KRN",9.8,"NM",27,0)
KMPDUT4A^^0^B2846593
"BLD",666,"KRN",9.8,"NM",28,0)
KMPDUT4B^^0^B6574044
"BLD",666,"KRN",9.8,"NM",29,0)
KMPDUT4C^^0^B8778533
"BLD",666,"KRN",9.8,"NM",30,0)
KMPDUTL^^0^B9990640
"BLD",666,"KRN",9.8,"NM",31,0)
KMPDUTL1^^0^B21830311
"BLD",666,"KRN",9.8,"NM",32,0)
KMPDUTL2^^0^B10091867
"BLD",666,"KRN",9.8,"NM",33,0)
KMPDUTL3^^0^B2493669
"BLD",666,"KRN",9.8,"NM",34,0)
KMPDUTL4^^0^B7857389
"BLD",666,"KRN",9.8,"NM",35,0)
KMPDUTL5^^0^B53756551
"BLD",666,"KRN",9.8,"NM",36,0)
KMPDUTL6^^0^B2454565
"BLD",666,"KRN",9.8,"NM",37,0)
KMPDUT5^^0^B34870565
"BLD",666,"KRN",9.8,"NM",38,0)
KMPDSSA^^0^B52667026
"BLD",666,"KRN",9.8,"NM",39,0)
KMPDTU01^^0^B50478287
"BLD",666,"KRN",9.8,"NM",40,0)
KMPDTM^^0^B21660210
"BLD",666,"KRN",9.8,"NM",41,0)
KMPDU11^^0^B16579136
"BLD",666,"KRN",9.8,"NM",42,0)
KMPDU6^^0^B2107323
"BLD",666,"KRN",9.8,"NM",43,0)
KMPDUG^^0^B12065844
"BLD",666,"KRN",9.8,"NM",44,0)
KMPDUG1^^0^B12183145
"BLD",666,"KRN",9.8,"NM",45,0)
KMPDUG2^^0^B22783994
"BLD",666,"KRN",9.8,"NM",46,0)
KMPDUGV^^0^B6896463
"BLD",666,"KRN",9.8,"NM","B","KMPDBD01",1)

"BLD",666,"KRN",9.8,"NM","B","KMPDHU01",2)

"BLD",666,"KRN",9.8,"NM","B","KMPDHU02",3)

"BLD",666,"KRN",9.8,"NM","B","KMPDHU03",4)

"BLD",666,"KRN",9.8,"NM","B","KMPDHUA",5)

"BLD",666,"KRN",9.8,"NM","B","KMPDPOST",6)

"BLD",666,"KRN",9.8,"NM","B","KMPDSS",7)

"BLD",666,"KRN",9.8,"NM","B","KMPDSSA",38)

"BLD",666,"KRN",9.8,"NM","B","KMPDTM",40)

"BLD",666,"KRN",9.8,"NM","B","KMPDTP1",8)

"BLD",666,"KRN",9.8,"NM","B","KMPDTP2",9)

"BLD",666,"KRN",9.8,"NM","B","KMPDTP3",10)

"BLD",666,"KRN",9.8,"NM","B","KMPDTP4",11)

"BLD",666,"KRN",9.8,"NM","B","KMPDTP5",12)

"BLD",666,"KRN",9.8,"NM","B","KMPDTP6",13)

"BLD",666,"KRN",9.8,"NM","B","KMPDTP7",14)

"BLD",666,"KRN",9.8,"NM","B","KMPDTU01",39)

"BLD",666,"KRN",9.8,"NM","B","KMPDTU02",15)

"BLD",666,"KRN",9.8,"NM","B","KMPDTU10",16)

"BLD",666,"KRN",9.8,"NM","B","KMPDTU11",17)

"BLD",666,"KRN",9.8,"NM","B","KMPDU",18)

"BLD",666,"KRN",9.8,"NM","B","KMPDU1",19)

"BLD",666,"KRN",9.8,"NM","B","KMPDU11",41)

"BLD",666,"KRN",9.8,"NM","B","KMPDU2",20)

"BLD",666,"KRN",9.8,"NM","B","KMPDU3",21)

"BLD",666,"KRN",9.8,"NM","B","KMPDU4",22)

"BLD",666,"KRN",9.8,"NM","B","KMPDU5",23)

"BLD",666,"KRN",9.8,"NM","B","KMPDU6",42)

"BLD",666,"KRN",9.8,"NM","B","KMPDUG",43)

"BLD",666,"KRN",9.8,"NM","B","KMPDUG1",44)

"BLD",666,"KRN",9.8,"NM","B","KMPDUG2",45)

"BLD",666,"KRN",9.8,"NM","B","KMPDUGV",46)

"BLD",666,"KRN",9.8,"NM","B","KMPDUT",24)

"BLD",666,"KRN",9.8,"NM","B","KMPDUT2",25)

"BLD",666,"KRN",9.8,"NM","B","KMPDUT4",26)

"BLD",666,"KRN",9.8,"NM","B","KMPDUT4A",27)

"BLD",666,"KRN",9.8,"NM","B","KMPDUT4B",28)

"BLD",666,"KRN",9.8,"NM","B","KMPDUT4C",29)

"BLD",666,"KRN",9.8,"NM","B","KMPDUT5",37)

"BLD",666,"KRN",9.8,"NM","B","KMPDUTL",30)

"BLD",666,"KRN",9.8,"NM","B","KMPDUTL1",31)

"BLD",666,"KRN",9.8,"NM","B","KMPDUTL2",32)

"BLD",666,"KRN",9.8,"NM","B","KMPDUTL3",33)

"BLD",666,"KRN",9.8,"NM","B","KMPDUTL4",34)

"BLD",666,"KRN",9.8,"NM","B","KMPDUTL5",35)

"BLD",666,"KRN",9.8,"NM","B","KMPDUTL6",36)

"BLD",666,"KRN",19,0)
19
"BLD",666,"KRN",19,"NM",0)
^9.68A^15^15
"BLD",666,"KRN",19,"NM",1,0)
KMPD BACKGROUND DRIVER^^0
"BLD",666,"KRN",19,"NM",2,0)
KMPD CM TOOLS MANAGER MENU^^0
"BLD",666,"KRN",19,"NM",3,0)
KMPD CM TOOLS REPORTS^^0
"BLD",666,"KRN",19,"NM",4,0)
KMPD PARAM EDIT^^0
"BLD",666,"KRN",19,"NM",5,0)
KMPD STATUS^^0
"BLD",666,"KRN",19,"NM",6,0)
KMPD TMG AVG HR TTL^^0
"BLD",666,"KRN",19,"NM",7,0)
KMPD TMG AVG TTL^^0
"BLD",666,"KRN",19,"NM",8,0)
KMPD TMG DLY TTL DETAIL^^0
"BLD",666,"KRN",19,"NM",9,0)
KMPD TMG HRLY TTL DETAIL^^0
"BLD",666,"KRN",19,"NM",10,0)
KMPD TMG HRLY TTL RT^^0
"BLD",666,"KRN",19,"NM",11,0)
KMPD TMG REPORTS^^0
"BLD",666,"KRN",19,"NM",12,0)
KMPD TMG START/STOP^^0
"BLD",666,"KRN",19,"NM",13,0)
KMPD TMG TTL ALERT^^0
"BLD",666,"KRN",19,"NM",14,0)
KMPD TMG TTL ALERT RT^^0
"BLD",666,"KRN",19,"NM",15,0)
KMPD TMG MONITOR^^0
"BLD",666,"KRN",19,"NM","B","KMPD BACKGROUND DRIVER",1)

"BLD",666,"KRN",19,"NM","B","KMPD CM TOOLS MANAGER MENU",2)

"BLD",666,"KRN",19,"NM","B","KMPD CM TOOLS REPORTS",3)

"BLD",666,"KRN",19,"NM","B","KMPD PARAM EDIT",4)

"BLD",666,"KRN",19,"NM","B","KMPD STATUS",5)

"BLD",666,"KRN",19,"NM","B","KMPD TMG AVG HR TTL",6)

"BLD",666,"KRN",19,"NM","B","KMPD TMG AVG TTL",7)

"BLD",666,"KRN",19,"NM","B","KMPD TMG DLY TTL DETAIL",8)

"BLD",666,"KRN",19,"NM","B","KMPD TMG HRLY TTL DETAIL",9)

"BLD",666,"KRN",19,"NM","B","KMPD TMG HRLY TTL RT",10)

"BLD",666,"KRN",19,"NM","B","KMPD TMG MONITOR",15)

"BLD",666,"KRN",19,"NM","B","KMPD TMG REPORTS",11)

"BLD",666,"KRN",19,"NM","B","KMPD TMG START/STOP",12)

"BLD",666,"KRN",19,"NM","B","KMPD TMG TTL ALERT",13)

"BLD",666,"KRN",19,"NM","B","KMPD TMG TTL ALERT RT",14)

"BLD",666,"KRN",19.1,0)
19.1
"BLD",666,"KRN",101,0)
101
"BLD",666,"KRN",409.61,0)
409.61
"BLD",666,"KRN",771,0)
771
"BLD",666,"KRN",870,0)
870
"BLD",666,"KRN",8989.51,0)
8989.51
"BLD",666,"KRN",8989.52,0)
8989.52
"BLD",666,"KRN",8994,0)
8994
"BLD",666,"KRN",8994,"NM",0)
^9.68A^14^14
"BLD",666,"KRN",8994,"NM",1,0)
KMPD ASSOC ROUTINE ADD/DEL^^0
"BLD",666,"KRN",8994,"NM",2,0)
KMPD ENVIRONMENT^^0
"BLD",666,"KRN",8994,"NM",3,0)
KMPD ERROR LOG DATA^^0
"BLD",666,"KRN",8994,"NM",4,0)
KMPD ERROR LOG DATE^^0
"BLD",666,"KRN",8994,"NM",5,0)
KMPD FILE INQUIRY^^0
"BLD",666,"KRN",8994,"NM",6,0)
KMPD FILE SEARCH^^0
"BLD",666,"KRN",8994,"NM",7,0)
KMPD FM DATE^^0
"BLD",666,"KRN",8994,"NM",8,0)
KMPD GLOBAL LIST^^0
"BLD",666,"KRN",8994,"NM",9,0)
KMPD ROUTINE FIND^^0
"BLD",666,"KRN",8994,"NM",10,0)
KMPD ROUTINE INQ^^0
"BLD",666,"KRN",8994,"NM",11,0)
KMPD ROUTINE LINE SRCH^^0
"BLD",666,"KRN",8994,"NM",12,0)
KMPD ROUTINE SAVE^^0
"BLD",666,"KRN",8994,"NM",13,0)
KMPD ROUTINE STATS^^0
"BLD",666,"KRN",8994,"NM",14,0)
KMPD VERSION^^0
"BLD",666,"KRN",8994,"NM","B","KMPD ASSOC ROUTINE ADD/DEL",1)

"BLD",666,"KRN",8994,"NM","B","KMPD ENVIRONMENT",2)

"BLD",666,"KRN",8994,"NM","B","KMPD ERROR LOG DATA",3)

"BLD",666,"KRN",8994,"NM","B","KMPD ERROR LOG DATE",4)

"BLD",666,"KRN",8994,"NM","B","KMPD FILE INQUIRY",5)

"BLD",666,"KRN",8994,"NM","B","KMPD FILE SEARCH",6)

"BLD",666,"KRN",8994,"NM","B","KMPD FM DATE",7)

"BLD",666,"KRN",8994,"NM","B","KMPD GLOBAL LIST",8)

"BLD",666,"KRN",8994,"NM","B","KMPD ROUTINE FIND",9)

"BLD",666,"KRN",8994,"NM","B","KMPD ROUTINE INQ",10)

"BLD",666,"KRN",8994,"NM","B","KMPD ROUTINE LINE SRCH",11)

"BLD",666,"KRN",8994,"NM","B","KMPD ROUTINE SAVE",12)

"BLD",666,"KRN",8994,"NM","B","KMPD ROUTINE STATS",13)

"BLD",666,"KRN",8994,"NM","B","KMPD VERSION",14)

"BLD",666,"KRN","B",.4,.4)

"BLD",666,"KRN","B",.401,.401)

"BLD",666,"KRN","B",.402,.402)

"BLD",666,"KRN","B",.403,.403)

"BLD",666,"KRN","B",.5,.5)

"BLD",666,"KRN","B",.84,.84)

"BLD",666,"KRN","B",3.6,3.6)

"BLD",666,"KRN","B",3.8,3.8)

"BLD",666,"KRN","B",9.2,9.2)

"BLD",666,"KRN","B",9.8,9.8)

"BLD",666,"KRN","B",19,19)

"BLD",666,"KRN","B",19.1,19.1)

"BLD",666,"KRN","B",101,101)

"BLD",666,"KRN","B",409.61,409.61)

"BLD",666,"KRN","B",771,771)

"BLD",666,"KRN","B",870,870)

"BLD",666,"KRN","B",8989.51,8989.51)

"BLD",666,"KRN","B",8989.52,8989.52)

"BLD",666,"KRN","B",8994,8994)

"BLD",666,"QUES",0)
^9.62^1^1
"BLD",666,"QUES",1,0)
POSTIMING
"BLD",666,"QUES",1,1)
Y
"BLD",666,"QUES",1,"A")
I will start the Timing Collection background job when the install is complete
"BLD",666,"QUES",1,"B")
Yes
"BLD",666,"QUES",1,"M")
K:$G(^KMPTMP("KMPD-CPRS")) DIR
"BLD",666,"QUES","B","POSTIMING",1)

"FIA",8972.1)
CP CODE EVALUATOR
"FIA",8972.1,0)
^KMPD(8972.1,
"FIA",8972.1,0,0)
8972.1AO
"FIA",8972.1,0,1)
y^y^f^^^^n
"FIA",8972.1,0,10)

"FIA",8972.1,0,11)

"FIA",8972.1,0,"RLRO")

"FIA",8972.1,0,"VR")
2.0^CAPACITY MANAGEMENT TOOLS
"FIA",8972.1,8972.1)
0
"FIA",8972.1,8972.11)
0
"FIA",8972.1,8972.111)
0
"FIA",8973)
CP PARAMETERS
"FIA",8973,0)
^KMPD(8973,
"FIA",8973,0,0)
8973P
"FIA",8973,0,1)
y^y^f^^^^n
"FIA",8973,0,10)

"FIA",8973,0,11)

"FIA",8973,0,"RLRO")

"FIA",8973,0,"VR")
2.0^CAPACITY MANAGEMENT TOOLS
"FIA",8973,8973)
0
"FIA",8973,8973.201)
0
"FIA",8973.1)
CM HL7 DATA
"FIA",8973.1,0)
^KMPD(8973.1,
"FIA",8973.1,0,0)
8973.1DI
"FIA",8973.1,0,1)
y^y^f^^^^n
"FIA",8973.1,0,10)

"FIA",8973.1,0,11)

"FIA",8973.1,0,"RLRO")

"FIA",8973.1,0,"VR")
2.0^CAPACITY MANAGEMENT TOOLS
"FIA",8973.1,8973.1)
0
"FIA",8973.2)
CP TIMING
"FIA",8973.2,0)
^KMPD(8973.2,
"FIA",8973.2,0,0)
8973.2I
"FIA",8973.2,0,1)
y^y^f^^^^n
"FIA",8973.2,0,10)

"FIA",8973.2,0,11)

"FIA",8973.2,0,"RLRO")

"FIA",8973.2,0,"VR")
2.0^CAPACITY MANAGEMENT TOOLS
"FIA",8973.2,8973.2)
0
"INIT")
EN^KMPDPOST
"KRN",.403,40,-1)
0^1
"KRN",.403,40,0)
KMPD PARAMETERS EDIT^@^@^^3031203.0915^^^8973^0^0^1
"KRN",.403,40,40,0)
^.4031I^1^1
"KRN",.403,40,40,1,0)
1^^1,1
"KRN",.403,40,40,1,1)
Page 1
"KRN",.403,40,40,1,40,0)
^.4032IP^165^2
"KRN",.403,40,40,1,40,164,0)
KMPD PARAMETERS HDR^1^1,1^e
"KRN",.403,40,40,1,40,165,0)
KMPD PARAMETERS PAGE 1^2^4,1^e
"KRN",.404,164,0)
KMPD PARAMETERS HDR^8973^
"KRN",.404,164,40,0)
^.4044I^3^3
"KRN",.404,164,40,1,0)
1^CM Tools Parameters Edit^1
"KRN",.404,164,40,1,2)
^^1,26
"KRN",.404,164,40,2,0)
2^Page 1^1
"KRN",.404,164,40,2,2)
^^1,72
"KRN",.404,164,40,3,0)
3^!M^1
"KRN",.404,164,40,3,.1)
S Y=$P($G(^DIC(4,+$P($G(^KMPD(8973,1,0)),U),0)),U),Y=$P($G(DDGLVID),$G(DDGLDEL))_$J(" ",(30-$L(Y))\2)_Y_$P($G(DDGLVID),$G(DDGLDEL),3)
"KRN",.404,164,40,3,2)
^^2,24
"KRN",.404,165,0)
KMPD PARAMETERS PAGE 1^8973
"KRN",.404,165,40,0)
^.4044I^12^12
"KRN",.404,165,40,1,0)
1^Current Version^3
"KRN",.404,165,40,1,1)
.02
"KRN",.404,165,40,1,2)
1,18^10^1,1
"KRN",.404,165,40,1,4)
^^^1
"KRN",.404,165,40,2,0)
2^Version Installed^3
"KRN",.404,165,40,2,1)
.03
"KRN",.404,165,40,2,2)
1,53^17^1,34
"KRN",.404,165,40,2,4)
^^^1
"KRN",.404,165,40,3,0)
3^Current Patch^3
"KRN",.404,165,40,3,1)
.04
"KRN",.404,165,40,3,2)
2,18^10^2,3
"KRN",.404,165,40,3,4)
^^^1
"KRN",.404,165,40,4,0)
4^Patch Installed^3
"KRN",.404,165,40,4,1)
.05
"KRN",.404,165,40,4,2)
2,53^17^2,36
"KRN",.404,165,40,4,4)
^^^1
"KRN",.404,165,40,5,0)
5^Purge HL7 Data After^3
"KRN",.404,165,40,5,1)
3.11
"KRN",.404,165,40,5,2)
5,26^3^5,4
"KRN",.404,165,40,5,11)
D HLP^DDSUTL($G(^DD(8973,3.11,3)))
"KRN",.404,165,40,6,0)
6^Weeks^1
"KRN",.404,165,40,6,2)
^^5,30
"KRN",.404,165,40,7,0)
7^Purge Timing Data after^3
"KRN",.404,165,40,7,1)
4.11
"KRN",.404,165,40,7,2)
6,26^3^6,1
"KRN",.404,165,40,7,11)
D HLP^DDSUTL($G(^DD(8973,4.11,3)))
"KRN",.404,165,40,8,0)
8^Weeks^1
"KRN",.404,165,40,8,2)
^^6,30
"KRN",.404,165,40,9,0)
9^Purge RUM Data After^3
"KRN",.404,165,40,9,1)
2.11
"KRN",.404,165,40,9,2)
7,26^3^7,4
"KRN",.404,165,40,9,11)
D HLP^DDSUTL($G(^DD(8973,2.11,3)))
"KRN",.404,165,40,10,0)
10^Weeks^1
"KRN",.404,165,40,10,2)
^^7,30
"KRN",.404,165,40,11,0)
11^Timing Monitor Update Rate - Min^3
"KRN",.404,165,40,11,1)
19.01
"KRN",.404,165,40,11,2)
5,72^2^5,38
"KRN",.404,165,40,11,11)
D HLP^DDSUTL($G(^DD(8973,19.01,3)))
"KRN",.404,165,40,12,0)
12^Timing Monitor Alert - Seconds^3
"KRN",.404,165,40,12,1)
19.02
"KRN",.404,165,40,12,2)
6,72^3^6,40
"KRN",.404,165,40,12,11)
D HLP^DDSUTL($G(^DD(8973,19.02,3)))
"KRN",3.8,1185,-1)
0^1
"KRN",3.8,1185,0)
KMP-CAPMAN^PU^n^^^^
"KRN",3.8,1185,2,0)
^3.801^2^2^3030519^^^^
"KRN",3.8,1185,2,1,0)
This mail group will receive messages for all Capacity Management packages
"KRN",3.8,1185,2,2,0)
(SAGG, RUM).
"KRN",3.8,1185,3)

"KRN",3.8,1185,5,0)
^3.811P^^0
"KRN",3.8,1185,6,0)
^3.812^15^15
"KRN",3.8,1185,6,1,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,2,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,3,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,4,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,5,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,6,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,7,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,8,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,9,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,10,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,11,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,12,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,13,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,14,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,15,0)
G.A1B5@FO-BIRM.MED.VA.GOV
"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",1)

"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",2)

"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",3)

"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",4)

"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",5)

"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",6)

"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",7)

"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",8)

"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",9)

"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",10)

"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",11)

"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",12)

"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",13)

"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",14)

"KRN",3.8,1185,6,"B","G.A1B5@FO-BIRM.MED.VA.GOV",15)

"KRN",3.8,1185,8,0)
^3.814P^^0
"KRN",3.8,1185,9,0)
^3.815P^^0
"KRN",19,7434,-1)
0^5
"KRN",19,7434,0)
KMPD STATUS^Check CM Tools Environment^^R^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7434,1,0)
^^2^2^3020220^
"KRN",19,7434,1,1,0)
This option displays the status of the [KMPD BACKGROUND DRIVER] option, 
"KRN",19,7434,1,2,0)
and information on the CM HL7 DATA file (#8973.1).
"KRN",19,7434,25)
EN^KMPDSS
"KRN",19,7434,"U")
CHECK CM TOOLS ENVIRONMENT
"KRN",19,7435,-1)
0^1
"KRN",19,7435,0)
KMPD BACKGROUND DRIVER^CM Tools Background Driver^^R^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7435,1,0)
^19.06^6^6^3020220^^^^
"KRN",19,7435,1,1,0)
This option should be queued to run each night (1:30am recommended).  Each
"KRN",19,7435,1,2,0)
night it will compress HL7 data into daily statistics and store this data
"KRN",19,7435,1,3,0)
in file #8973.1 (CM HL7 DATA).  Each Sunday this daily data will be
"KRN",19,7435,1,4,0)
compiled into weekly stats and shipped (via MailMan) to the CM National
"KRN",19,7435,1,5,0)
Database.  After the weekly transmission, file #8973.1 will be purged,
"KRN",19,7435,1,6,0)
leaving only two weeks of data.
"KRN",19,7435,25)
KMPDBD01
"KRN",19,7435,200.9)
y^y
"KRN",19,7435,"U")
CM TOOLS BACKGROUND DRIVER
"KRN",19,7436,-1)
0^2
"KRN",19,7436,0)
KMPD CM TOOLS MANAGER MENU^CP Tools Manager Menu^^M^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7436,10,0)
^19.01IP^5^5
"KRN",19,7436,10,1,0)
7434^STA^1
"KRN",19,7436,10,1,"^")
KMPD STATUS
"KRN",19,7436,10,2,0)
7454^RPT^5
"KRN",19,7436,10,2,"^")
KMPD CM TOOLS REPORTS
"KRN",19,7436,10,3,0)
7461^SST^2
"KRN",19,7436,10,3,"^")
KMPD TMG START/STOP
"KRN",19,7436,10,4,0)
7478^PRM^3
"KRN",19,7436,10,4,"^")
KMPD PARAM EDIT
"KRN",19,7436,10,5,0)
7480^TMT^4
"KRN",19,7436,10,5,"^")
KMPD TMG MONITOR
"KRN",19,7436,99)
59609,28274
"KRN",19,7436,"U")
CP TOOLS MANAGER MENU
"KRN",19,7454,-1)
0^3
"KRN",19,7454,0)
KMPD CM TOOLS REPORTS^CP Tools Reports^^M^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7454,10,0)
^19.01IP^1^1
"KRN",19,7454,10,1,0)
7465^TMG^1
"KRN",19,7454,10,1,"^")
KMPD TMG REPORTS
"KRN",19,7454,99)
59609,28274
"KRN",19,7454,"U")
CP TOOLS REPORTS
"KRN",19,7455,-1)
0^7
"KRN",19,7455,0)
KMPD TMG AVG TTL^Average Daily Coversheet Load^^R^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7455,1,0)
^^3^3^3030903^
"KRN",19,7455,1,1,0)
This report displays the daily average time-to-load value for the
"KRN",19,7455,1,2,0)
coversheet at this site.  Average time-to-load values are given for either
"KRN",19,7455,1,3,0)
daily prime time or non-prime time periods.
"KRN",19,7455,25)
EN^KMPDTP1
"KRN",19,7455,"U")
AVERAGE DAILY COVERSHEET LOAD
"KRN",19,7456,-1)
0^8
"KRN",19,7456,0)
KMPD TMG DLY TTL DETAIL^Detailed Daily Coversheet Load^^R^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7456,1,0)
^^3^3^3030903^
"KRN",19,7456,1,1,0)
This detailed report displays daily time-to-load values for the coversheet
"KRN",19,7456,1,2,0)
at this site.  The report breaks the time-to-load metrics into ten second
"KRN",19,7456,1,3,0)
groupings.
"KRN",19,7456,25)
EN^KMPDTP2
"KRN",19,7456,"U")
DETAILED DAILY COVERSHEET LOAD
"KRN",19,7458,-1)
0^9
"KRN",19,7458,0)
KMPD TMG HRLY TTL DETAIL^Detailed Hourly Coversheet Load^^R^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7458,1,0)
^^3^3^3030903^
"KRN",19,7458,1,1,0)
This detail report displays the hourly time-to-load values for the
"KRN",19,7458,1,2,0)
coversheet at this site.  The report breaks the time-to-load metrics into
"KRN",19,7458,1,3,0)
ten second groupings.
"KRN",19,7458,25)
EN^KMPDTP4
"KRN",19,7458,"U")
DETAILED HOURLY COVERSHEET LOA
"KRN",19,7459,-1)
0^13
"KRN",19,7459,0)
KMPD TMG TTL ALERT^Threshold Alert^^R^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7459,1,0)
^^3^3^3031105^
"KRN",19,7459,1,1,0)
This alerting report shows the particular coversheet loads that had
"KRN",19,7459,1,2,0)
excessive time-to-load values. This report will search for a particular
"KRN",19,7459,1,3,0)
person, a particular client name or IP address.
"KRN",19,7459,25)
EN^KMPDTP5
"KRN",19,7459,"U")
THRESHOLD ALERT
"KRN",19,7461,-1)
0^12
"KRN",19,7461,0)
KMPD TMG START/STOP^Start/Stop Timing Collection^^R^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7461,25)
SST^KMPDSS
"KRN",19,7461,"U")
START/STOP TIMING COLLECTION
"KRN",19,7463,-1)
0^14
"KRN",19,7463,0)
KMPD TMG TTL ALERT RT^Real-Time Threshold Alert^^R^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7463,1,0)
^19.06^3^3^3040127^^
"KRN",19,7463,1,1,0)
This alerting report shows the particular coversheet loads that have
"KRN",19,7463,1,2,0)
excessive time-to-load values for TODAY (Real-Time). This report will
"KRN",19,7463,1,3,0)
search for a particular person, a particular client name or IP address.
"KRN",19,7463,25)
EN^KMPDTP6
"KRN",19,7463,"U")
REAL-TIME THRESHOLD ALERT
"KRN",19,7464,-1)
0^10
"KRN",19,7464,0)
KMPD TMG HRLY TTL RT^Real-Time Average Hourly Coversheet Load^^R^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7464,1,0)
^^2^2^3031105^
"KRN",19,7464,1,1,0)
This report displays the hourly average time-to-load value for the
"KRN",19,7464,1,2,0)
coversheet at this site over 24 hours.
"KRN",19,7464,25)
EN^KMPDTP7
"KRN",19,7464,"U")
REAL-TIME AVERAGE HOURLY COVER
"KRN",19,7465,-1)
0^11
"KRN",19,7465,0)
KMPD TMG REPORTS^Timing Reports^^M^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7465,10,0)
^19.01IP^7^7
"KRN",19,7465,10,1,0)
7455^AVD^1
"KRN",19,7465,10,1,"^")
KMPD TMG AVG TTL
"KRN",19,7465,10,2,0)
7477^AVH^2
"KRN",19,7465,10,2,"^")
KMPD TMG AVG HR TTL
"KRN",19,7465,10,3,0)
7456^DTD^3
"KRN",19,7465,10,3,"^")
KMPD TMG DLY TTL DETAIL
"KRN",19,7465,10,4,0)
7458^DTH^4
"KRN",19,7465,10,4,"^")
KMPD TMG HRLY TTL DETAIL
"KRN",19,7465,10,5,0)
7459^TAL^5
"KRN",19,7465,10,5,"^")
KMPD TMG TTL ALERT
"KRN",19,7465,10,6,0)
7463^RTA^6
"KRN",19,7465,10,6,"^")
KMPD TMG TTL ALERT RT
"KRN",19,7465,10,7,0)
7464^RAV^7
"KRN",19,7465,10,7,"^")
KMPD TMG HRLY TTL RT
"KRN",19,7465,99)
59609,28274
"KRN",19,7465,"U")
TIMING REPORTS
"KRN",19,7477,-1)
0^6
"KRN",19,7477,0)
KMPD TMG AVG HR TTL^Average Hourly Coversheet Load^^R^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7477,1,0)
^19.06^2^2^3031105^^^^
"KRN",19,7477,1,1,0)
This report displays the hourly average time-to-load value for the
"KRN",19,7477,1,2,0)
coversheet at this site over 24 hours.
"KRN",19,7477,25)
EN^KMPDTP3
"KRN",19,7477,"U")
AVERAGE HOURLY COVERSHEET LOAD
"KRN",19,7478,-1)
0^4
"KRN",19,7478,0)
KMPD PARAM EDIT^Edit CP Parameters File^^R^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7478,25)
PRM^KMPDSS
"KRN",19,7478,"U")
EDIT CP PARAMETERS FILE
"KRN",19,7480,-1)
0^15
"KRN",19,7480,0)
KMPD TMG MONITOR^Timing Monitor^^R^^^^^^^^CAPACITY MANAGEMENT TOOLS
"KRN",19,7480,1,0)
^19.06^8^8^3040217^^
"KRN",19,7480,1,1,0)
This option displays CPRS Coversheet time-to-load data, as a bar graph, 
"KRN",19,7480,1,2,0)
for the current day.  This option can be left running on a terminal (if 
"KRN",19,7480,1,3,0)
desired).  The monitor is updated every 10 minutes (site configurable 
"KRN",19,7480,1,4,0)
through the [KMPD PARAM EDIT] Edit CP Parameters File option), and 
"KRN",19,7480,1,5,0)
displays current average time-to-load data starting at midnight.  An alarm
"KRN",19,7480,1,6,0)
message is displayed if the average time-to-load exceeds 30 seconds (site
"KRN",19,7480,1,7,0)
configurable through the [KMPD PARAM EDIT] Edit CP Parameters File
"KRN",19,7480,1,8,0)
option).
"KRN",19,7480,25)
EN^KMPDTM
"KRN",19,7480,"U")
TIMING MONITOR
"KRN",8994,50,-1)
0^6
"KRN",8994,50,0)
KMPD FILE SEARCH^FILESRC^KMPDU5^4^R^^^1
"KRN",8994,50,1,0)
^^1^1^2990818^
"KRN",8994,50,1,1,0)
Search for entries in file.
"KRN",8994,50,2,0)
^8994.02A^4^4
"KRN",8994,50,2,1,0)
PARAM1^1^60^1^1
"KRN",8994,50,2,1,1,0)
^^1^1^2990818^
"KRN",8994,50,2,1,1,1,0)
File Number.
"KRN",8994,50,2,2,0)
PARAM2^1^245^1^2
"KRN",8994,50,2,2,1,0)
^^3^3^2990818^
"KRN",8994,50,2,2,1,1,0)
Fields to return.  This will be comma delimited.
"KRN",8994,50,2,2,1,2,0)
 
"KRN",8994,50,2,2,1,3,0)
Example:  ".01,.04,1,12"  - would return fields .01, .01, 1 and 12
"KRN",8994,50,2,3,0)
PARAM3^1^245^1^3
"KRN",8994,50,2,3,1,0)
^^6^6^2990818^
"KRN",8994,50,2,3,1,1,0)
Text to search for.
"KRN",8994,50,2,3,1,2,0)
 
"KRN",8994,50,2,3,1,3,0)
Example:  "DG" - would retrieve all entries beginning with DG.
"KRN",8994,50,2,3,1,4,0)
 
"KRN",8994,50,2,3,1,5,0)
               - if text equals "*" or "" (null) then all entries will be 
"KRN",8994,50,2,3,1,6,0)
                 retrieved
"KRN",8994,50,2,4,0)
PARAM4^1^245^1^4
"KRN",8994,50,2,4,1,0)
^^2^2^2990818^
"KRN",8994,50,2,4,1,1,0)
Name of array for temporary storage.  This should be a global array, and
"KRN",8994,50,2,4,1,2,0)
must be either ^TMP or ^UTILITY.
"KRN",8994,50,2,"B","PARAM1",1)

"KRN",8994,50,2,"B","PARAM2",2)

"KRN",8994,50,2,"B","PARAM3",3)

"KRN",8994,50,2,"B","PARAM4",4)

"KRN",8994,50,2,"PARAMSEQ",1,1)

"KRN",8994,50,2,"PARAMSEQ",2,2)

"KRN",8994,50,2,"PARAMSEQ",3,3)

"KRN",8994,50,2,"PARAMSEQ",4,4)

"KRN",8994,50,3,0)
^^8^8^2990818^
"KRN",8994,50,3,1,0)
Array with data from file in format:
"KRN",8994,50,3,2,0)
 
"KRN",8994,50,3,3,0)
       ARRAY(0)=IEN^FieldName^FieldName^FieldName^...
"KRN",8994,50,3,4,0)
       ARRAY(...)=IEN^FieldData^FieldData^FieldData^...
"KRN",8994,50,3,5,0)
 
"KRN",8994,50,3,6,0)
Please Note:  - the first piece is always the IEN (internal entry number).
"KRN",8994,50,3,7,0)
              - the zero node is always the names of the fields, once
"KRN",8994,50,3,8,0)
                again with the IEN's being first.
"KRN",8994,51,-1)
0^14
"KRN",8994,51,0)
KMPD VERSION^VERSION^KMPDU5^2^R
"KRN",8994,51,1,0)
^^1^1^2990818^
"KRN",8994,51,1,1,0)
Get version number for CM Developer Tools application.
"KRN",8994,51,3,0)
^^1^1^2990818^
"KRN",8994,51,3,1,0)
ARRAY(0)=VersionNumber
"KRN",8994,52,-1)
0^2
"KRN",8994,52,0)
KMPD ENVIRONMENT^ENV^KMPDU5^2^R
"KRN",8994,53,-1)
0^5
"KRN",8994,53,0)
KMPD FILE INQUIRY^FILEINQ^KMPDU5^4^R^^^1
"KRN",8994,53,1,0)
^^1^1^2990818^
"KRN",8994,53,1,1,0)
Return all data in file for specific entry.
"KRN",8994,53,2,0)
^8994.02A^3^3
"KRN",8994,53,2,1,0)
PARAM1^1^60^1^1
"KRN",8994,53,2,1,1,0)
^^1^1^2990818^
"KRN",8994,53,2,1,1,1,0)
File number.
"KRN",8994,53,2,2,0)
PARAM2^1^60^1^2
"KRN",8994,53,2,2,1,0)
^^1^1^2990818^
"KRN",8994,53,2,2,1,1,0)
IEN for file in PARAM1.
"KRN",8994,53,2,3,0)
PARAM3^1^245^1^3
"KRN",8994,53,2,3,1,0)
^^2^2^2990818^
"KRN",8994,53,2,3,1,1,0)
Array for temporary data storage.  This should be a global array, and must
"KRN",8994,53,2,3,1,2,0)
be either ^TMP or ^UTILITY.
"KRN",8994,53,2,"B","PARAM1",1)

"KRN",8994,53,2,"B","PARAM2",2)

"KRN",8994,53,2,"B","PARAM3",3)

"KRN",8994,53,2,"PARAMSEQ",1,1)

"KRN",8994,53,2,"PARAMSEQ",2,2)

"KRN",8994,53,2,"PARAMSEQ",3,3)

"KRN",8994,53,3,0)
^^3^3^2990818^
"KRN",8994,53,3,1,0)
Array containing data in format:
"KRN",8994,53,3,2,0)
 
"KRN",8994,53,3,3,0)
       ARRAY(...)=FieldName^FieldData
"KRN",8994,54,-1)
0^8
"KRN",8994,54,0)
KMPD GLOBAL LIST^GBLLIST^KMPDU1^2^R
"KRN",8994,54,1,0)
^^1^1^2990819^
"KRN",8994,54,1,1,0)
Global list.
"KRN",8994,54,2,0)
^8994.02A^3^3
"KRN",8994,54,2,1,0)
PARAM1^1^245^1^1
"KRN",8994,54,2,1,1,0)
^^2^2^2990819^
"KRN",8994,54,2,1,1,1,0)
Global to list.  This can be an entire global (^DPT) or subscript
"KRN",8994,54,2,1,1,2,0)
(^DPT(25,).
"KRN",8994,54,2,2,0)
PARAM2^1^245^0^2
"KRN",8994,54,2,2,1,0)
^^3^3^2990819^
"KRN",8994,54,2,2,1,1,0)
Starting global node.  If this is a continuation of a global list, then
"KRN",8994,54,2,2,1,2,0)
this will be the starting point.  If the call is for the first time, then
"KRN",8994,54,2,2,1,3,0)
this should be set to null ("").
"KRN",8994,54,2,3,0)
PARAM3^1^245^1^3
"KRN",8994,54,2,3,1,0)
^^1^1^2990819^
"KRN",8994,54,2,3,1,1,0)
Number of lines to fill before quiting.
"KRN",8994,54,2,"B","PARAM1",1)

"KRN",8994,54,2,"B","PARAM2",2)

"KRN",8994,54,2,"B","PARAM3",3)

"KRN",8994,54,2,"PARAMSEQ",1,1)

"KRN",8994,54,2,"PARAMSEQ",2,2)

"KRN",8994,54,2,"PARAMSEQ",3,3)

"KRN",8994,54,3,0)
^^12^12^2990819^
"KRN",8994,54,3,1,0)
Array containing global data.  However, the zero node will contain the
"KRN",8994,54,3,2,0)
last global reference accessed.  This can then be used as the starting
"KRN",8994,54,3,3,0)
point for the next iteration (see PARAM2).  If the end of the global has
"KRN",8994,54,3,4,0)
been reached, then the zero node will equal '***end of global***'.
"KRN",8994,54,3,5,0)
 
"KRN",8994,54,3,6,0)
In the follwing example: PARAM1 = ^DPT(25
"KRN",8994,54,3,7,0)
                         PARAM2 = ""
"KRN",8994,54,3,8,0)
                         PARAM3 = 2
"KRN",8994,54,3,9,0)
 
"KRN",8994,54,3,10,0)
       ARRAY(0)="^DPT(25,.35)"
"KRN",8994,54,3,11,0)
       ARRAY(1)="^DPT(25,0)=GlobalData..."
"KRN",8994,54,3,12,0)
       ARRAY(2)="^DPT(25,.35)=GlobalData..."
"KRN",8994,55,-1)
0^3
"KRN",8994,55,0)
KMPD ERROR LOG DATA^ERRDATA^KMPDU3^4^R^^^1
"KRN",8994,55,1,0)
^^1^1^2990819^
"KRN",8994,55,1,1,0)
Get data from file #3.075 (ERROR LOG).
"KRN",8994,55,2,0)
^8994.02A^2^2
"KRN",8994,55,2,1,0)
PARAM1^1^60^1^1
"KRN",8994,55,2,1,1,0)
^^1^1^2990819^
"KRN",8994,55,2,1,1,1,0)
Ien in format "MultipleIen,Ien" for file #3.075 (ERROR LOG).
"KRN",8994,55,2,2,0)
PARAM2^1^60^1^2
"KRN",8994,55,2,2,1,0)
^^1^1^2990819^
"KRN",8994,55,2,2,1,1,0)
Temporary global storage.  This must be either ^TMP or ^UTILITY.
"KRN",8994,55,2,"B","PARAM1",1)

"KRN",8994,55,2,"B","PARAM2",2)

"KRN",8994,55,2,"PARAMSEQ",1,1)

"KRN",8994,55,2,"PARAMSEQ",2,2)

"KRN",8994,55,3,0)
^^1^1^2990819^
"KRN",8994,55,3,1,0)
Return data in array.
"KRN",8994,56,-1)
0^9
"KRN",8994,56,0)
KMPD ROUTINE FIND^ROUFIND^KMPDU2^4^R^^^1
"KRN",8994,56,1,0)
^^1^1^2991214^^
"KRN",8994,56,1,1,0)
Return list of routine names.
"KRN",8994,56,2,0)
^8994.02A^3^2
"KRN",8994,56,2,1,0)
PARAM1^1^30^1^1
"KRN",8994,56,2,1,1,0)
^^1^1^2990819^
"KRN",8994,56,2,1,1,1,0)
Routine name to search for (may contain an asterisk (*) for a list).
"KRN",8994,56,2,3,0)
PARAM2^1^60^1^3
"KRN",8994,56,2,3,1,0)
^^1^1^2991214^^
"KRN",8994,56,2,3,1,1,0)
Temporary global storage name.  Must be either ^TMP or ^UTILITY.
"KRN",8994,56,2,"B","PARAM1",1)

"KRN",8994,56,2,"B","PARAM2",3)

"KRN",8994,56,2,"PARAMSEQ",1,1)

"KRN",8994,56,2,"PARAMSEQ",3,3)

"KRN",8994,56,3,0)
^^4^4^2991214^^
"KRN",8994,56,3,1,0)
Array of routine names in format:
"KRN",8994,56,3,2,0)
 
"KRN",8994,56,3,3,0)
       ARRAY(0)=RoutineName
"KRN",8994,56,3,4,0)
       ARRAY(1)=Checksum (if requested) else will be next RoutineName.
"KRN",8994,57,-1)
0^10
"KRN",8994,57,0)
KMPD ROUTINE INQ^ROUINQ^KMPDU2^2^R
"KRN",8994,57,1,0)
^^1^1^2990819^
"KRN",8994,57,1,1,0)
Routine inquiry.
"KRN",8994,57,2,0)
^8994.02A^1^1
"KRN",8994,57,2,1,0)
PARAM1^1^30^1^1
"KRN",8994,57,2,1,1,0)
^^1^1^2990819^
"KRN",8994,57,2,1,1,1,0)
Routine name.
"KRN",8994,57,2,"B","PARAM1",1)

"KRN",8994,57,2,"PARAMSEQ",1,1)

"KRN",8994,57,3,0)
^^1^1^2990819^
"KRN",8994,57,3,1,0)
Routine returned in array.
"KRN",8994,58,-1)
0^11
"KRN",8994,58,0)
KMPD ROUTINE LINE SRCH^ROUSRC2^KMPDU2^4^R^^^1
"KRN",8994,58,1,0)
^^1^1^2990824^
"KRN",8994,58,1,1,0)
Search routine(s) for text.
"KRN",8994,58,2,0)
^8994.02A^3^3
"KRN",8994,58,2,1,0)
PARAM1^1^60^1^1
"KRN",8994,58,2,1,1,0)
^^1^1^2990824^
"KRN",8994,58,2,1,1,1,0)
Routine(s) to search for (may contain an asterisk).
"KRN",8994,58,2,2,0)
PARAM2^1^245^1^2
"KRN",8994,58,2,2,1,0)
^^1^1^2990824^
"KRN",8994,58,2,2,1,1,0)
Text to search for.
"KRN",8994,58,2,3,0)
PARAM3^1^60^1^3
"KRN",8994,58,2,3,1,0)
^^1^1^2990824^
"KRN",8994,58,2,3,1,1,0)
Temporary global storage for data.  Must be ^TMP or ^UTILITY.
"KRN",8994,58,2,"B","PARAM1",1)

"KRN",8994,58,2,"B","PARAM2",2)

"KRN",8994,58,2,"B","PARAM3",3)

"KRN",8994,58,2,"PARAMSEQ",1,1)

"KRN",8994,58,2,"PARAMSEQ",2,2)

"KRN",8994,58,2,"PARAMSEQ",3,3)

"KRN",8994,58,3,0)
^^3^3^2990824^
"KRN",8994,58,3,1,0)
Array containing matches.
"KRN",8994,58,3,2,0)
 
"KRN",8994,58,3,3,0)
       ARRAY(...)=RoutineName^Label+Offset  M code
"KRN",8994,64,-1)
0^13
"KRN",8994,64,0)
KMPD ROUTINE STATS^ROUSTATS^KMPDU3^2^R
"KRN",8994,64,1,0)
^^1^1^2991214^
"KRN",8994,64,1,1,0)
Routine stats from file #8972.1 (CAPMAN ROUTINE STATS).
"KRN",8994,64,2,0)
^8994.02A^1^1
"KRN",8994,64,2,1,0)
PARAM1^1^240^1^1
"KRN",8994,64,2,1,1,0)
^^4^4^2991214^
"KRN",8994,64,2,1,1,1,0)
Ien(s) for file #8972.1 (CAPMAN ROUTINE STATS).  If more than one Ien then
"KRN",8994,64,2,1,1,2,0)
each will be seperated by a comma.
"KRN",8994,64,2,1,1,3,0)
 
"KRN",8994,64,2,1,1,4,0)
Example: "12,98,38,123"
"KRN",8994,64,2,"B","PARAM1",1)

"KRN",8994,64,2,"PARAMSEQ",1,1)

"KRN",8994,64,3,0)
^^11^11^2991214^
"KRN",8994,64,3,1,0)
Array containing data from zero node of file #8972.1 (CAPMAN ROUTINE
"KRN",8994,64,3,2,0)
STATS).
"KRN",8994,64,3,3,0)
 
"KRN",8994,64,3,4,0)
        ARRAY(0)=TEST 1 AUG 27^Aug 27, 1999@09:53:17^577^0^0^1^0^3^0
"KRN",8994,64,3,5,0)
        ARRAY(1)=TEST 1 OCT 13^Oct 13, 1999@10:36:49^577^0^0^1^0^4^0
"KRN",8994,64,3,6,0)
        ARRAY(2)=EN~ZZRK OCT 29^Oct 29, 1999@04:33:27^577^0^0^1^0^4^0
"KRN",8994,64,3,7,0)
 
"KRN",8994,64,3,8,0)
See data dictionary for details.
"KRN",8994,64,3,9,0)
 
"KRN",8994,64,3,10,0)
Note: The second piece (Date/Time Entered) has been changed to external
"KRN",8994,64,3,11,0)
      format.
"KRN",8994,65,-1)
0^12
"KRN",8994,65,0)
KMPD ROUTINE SAVE^ROUSAVE^KMPDU3^2^R
"KRN",8994,65,1,0)
^^1^1^2991216^
"KRN",8994,65,1,1,0)
Save Routine.
"KRN",8994,65,2,0)
^8994.02A^2^2
"KRN",8994,65,2,1,0)
PARAM1^1^8^1^1
"KRN",8994,65,2,1,1,0)
^^1^1^2991216^
"KRN",8994,65,2,1,1,1,0)
Routine name (limited to 8 characters).
"KRN",8994,65,2,2,0)
PARAM2^2^240^1^2
"KRN",8994,65,2,2,1,0)
^^1^1^2991216^
"KRN",8994,65,2,2,1,1,0)
Array containing routine code.
"KRN",8994,65,2,"B","PARAM1",1)

"KRN",8994,65,2,"B","PARAM2",2)

"KRN",8994,65,2,"PARAMSEQ",1,1)

"KRN",8994,65,2,"PARAMSEQ",2,2)

"KRN",8994,65,3,0)
^^1^1^2991216^
"KRN",8994,65,3,1,0)
Save routine to server.
"KRN",8994,67,-1)
0^7
"KRN",8994,67,0)
KMPD FM DATE^FMDTI^KMPDU3^2^R
"KRN",8994,67,1,0)
^^1^1^3000202^
"KRN",8994,67,1,1,0)
Return user response as fm date.
"KRN",8994,67,2,0)
^8994.02A^1^1
"KRN",8994,67,2,1,0)
PARAM1^1^30^1^1
"KRN",8994,67,2,1,1,0)
^^3^3^3000202^
"KRN",8994,67,2,1,1,1,0)
User response to request for date: 'T'
"KRN",8994,67,2,1,1,2,0)
                                   'T-1'
"KRN",8994,67,2,1,1,3,0)
                                   01/02/00
"KRN",8994,67,2,"B","PARAM1",1)

"KRN",8994,67,2,"PARAMSEQ",1,1)

"KRN",8994,67,3,0)
^^2^2^3000202^
"KRN",8994,67,3,1,0)
Return: "^" - invalid response
"KRN",8994,67,3,2,0)
        FMInternalDate^ExternalDate
"KRN",8994,68,-1)
0^4
"KRN",8994,68,0)
KMPD ERROR LOG DATE^ERRDATE^KMPDU3^2^R
"KRN",8994,68,1,0)
^^1^1^3000202^
"KRN",8994,68,1,1,0)
Get matching date or list of dates from file #3.075 (ERROR LOG).
"KRN",8994,68,2,0)
^8994.02A^1^1
"KRN",8994,68,2,1,0)
PARAM1^1^30^1^1
"KRN",8994,68,2,1,1,0)
^^2^2^3000202^
"KRN",8994,68,2,1,1,1,0)
Date in internal fileman format or "*" for all dates in file #3.075 (ERROR
"KRN",8994,68,2,1,1,2,0)
LOG).
"KRN",8994,68,2,"B","PARAM1",1)

"KRN",8994,68,2,"PARAMSEQ",1,1)

"KRN",8994,68,3,0)
^^8^8^3000202^
"KRN",8994,68,3,1,0)
        ARRAY(0)=ExternalDate^Ien - for one match 
"KRN",8994,68,3,2,0)
 
"KRN",8994,68,3,3,0)
        or
"KRN",8994,68,3,4,0)
 
"KRN",8994,68,3,5,0)
        ARRAY(0)=ExternalDate^Ien  - for list of all dates
"KRN",8994,68,3,6,0)
        ARRAY(1)=ExternalDate^Ien
"KRN",8994,68,3,7,0)
        ARRAY(2)=ExternalDate^Ien
"KRN",8994,68,3,8,0)
        ARRAY(...)=ExternalDate^Ien
"KRN",8994,69,-1)
0^1
"KRN",8994,69,0)
KMPD ASSOC ROUTINE ADD/DEL^ASSCROU^KMPDU4^2^R
"KRN",8994,69,1,0)
^^2^2^3000405^
"KRN",8994,69,1,1,0)
Delete all entries in multiple field #11 (ASSOCIATED ROUTINE) in file
"KRN",8994,69,1,2,0)
#8972.1 (CM CODE EVALUATOR) and then add entries to multiple.
"KRN",8994,69,2,0)
^8994.02A^2^2
"KRN",8994,69,2,1,0)
PARAM1^1^60^1^1
"KRN",8994,69,2,1,1,0)
^^1^1^3000405^
"KRN",8994,69,2,1,1,1,0)
Ien for file #8972.1 (CM CODE EVALUATOR).
"KRN",8994,69,2,2,0)
PARAM2^2^60^1^2
"KRN",8994,69,2,2,1,0)
^^6^6^3000405^
"KRN",8994,69,2,2,1,1,0)
Array containing routine names to be entered into field #11 (ASSOCIATED
"KRN",8994,69,2,2,1,2,0)
ROUTINE).
"KRN",8994,69,2,2,1,3,0)
 
"KRN",8994,69,2,2,1,4,0)
        ARRAY(1)="ROUTINE1"
"KRN",8994,69,2,2,1,5,0)
        ARRAY(2)="ROUTINE2"
"KRN",8994,69,2,2,1,6,0)
        ARRAY(...)="..."
"KRN",8994,69,2,"B","PARAM1",1)

"KRN",8994,69,2,"B","PARAM2",2)

"KRN",8994,69,2,"PARAMSEQ",1,1)

"KRN",8994,69,2,"PARAMSEQ",2,2)

"MBREQ")
0
"ORD",8,.403)
.403;8;;;EDEOUT^DIFROMSO(.403,DA,"",XPDA);FPRE^DIFROMSI(.403,"",XPDA);EPRE^DIFROMSI(.403,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.403,DA,"",XPDA);DEL^DIFROMSK(.403,"",%)
"ORD",8,.403,0)
FORM
"ORD",11,3.8)
3.8;11;;;MAILG^XPDTA1;MAILGF1^XPDIA1;MAILGE1^XPDIA1;MAILGF2^XPDIA1;;MAILGDEL^XPDIA1(%)
"ORD",11,3.8,0)
MAIL GROUP
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",481,-1)
1^1
"PKG",481,0)
CAPACITY MANAGEMENT TOOLS^KMPD^Capacity Management Tools
"PKG",481,22,0)
^9.49I^1^1
"PKG",481,22,1,0)
2.0^3040322^3040315^577
"PKG",481,22,1,1,0)
^^1^1^3040322
"PKG",481,22,1,1,1,0)
CM Tools 2.0
"PKG",481,"VERSION")
2.0
"QUES","POSTIMING",0)
Y
"QUES","POSTIMING","A")
I will start the Timing Collection background job when the install is complete
"QUES","POSTIMING","B")
Yes
"QUES","POSTIMING","M")
K:$G(^KMPTMP("KMPD-CPRS")) DIR
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
46
"RTN","KMPDBD01")
0^1^B1914104
"RTN","KMPDBD01",1,0)
KMPDBD01 ;OAK/RAK - CM Tools Background Driver ;2/17/04  08:55
"RTN","KMPDBD01",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDBD01",3,0)
 ;
"RTN","KMPDBD01",4,0)
EN ;-entry point for background driver
"RTN","KMPDBD01",5,0)
 ;
"RTN","KMPDBD01",6,0)
 S:'$G(DT) DT=$$DT^XLFDT
"RTN","KMPDBD01",7,0)
 ;
"RTN","KMPDBD01",8,0)
 N DAILY,STR
"RTN","KMPDBD01",9,0)
 ;
"RTN","KMPDBD01",10,0)
 ; update cpu data in file #8973 (CP PARAMETERS)
"RTN","KMPDBD01",11,0)
 D CPUSET^KMPDUTL6(1)
"RTN","KMPDBD01",12,0)
 ;
"RTN","KMPDBD01",13,0)
 ; hl7
"RTN","KMPDBD01",14,0)
 ;compile and store daily stats in file 8973.1 (CM HL7 DATA)
"RTN","KMPDBD01",15,0)
 S STR=$$NOW^XLFDT,DAILY=$$FMADD^XLFDT(DT,-1)
"RTN","KMPDBD01",16,0)
 D DAILY^KMPDHU02(DAILY,DAILY)
"RTN","KMPDBD01",17,0)
 ; store start, stop and delta times for daily background job
"RTN","KMPDBD01",18,0)
 D STRSTP^KMPDUTL2(3,1,1,STR)
"RTN","KMPDBD01",19,0)
 ;
"RTN","KMPDBD01",20,0)
 ; timing
"RTN","KMPDBD01",21,0)
 ; compile and store timing stats in file 8973.2 (CP TIMING)
"RTN","KMPDBD01",22,0)
 S STR=$$NOW^XLFDT
"RTN","KMPDBD01",23,0)
 D DAILY^KMPDTU02
"RTN","KMPDBD01",24,0)
 ; store start, stop and delta times for daily background job
"RTN","KMPDBD01",25,0)
 D STRSTP^KMPDUTL2(4,1,1,STR)
"RTN","KMPDBD01",26,0)
 ;
"RTN","KMPDBD01",27,0)
 ; transmit 'yesterdays' daily stats to national database
"RTN","KMPDBD01",28,0)
 S STR=$$NOW^XLFDT,DAILY=$$FMADD^XLFDT(DT,-1)
"RTN","KMPDBD01",29,0)
 D DAILY^KMPDTU01(DAILY)
"RTN","KMPDBD01",30,0)
 ; store start, stop and delta times for daily background job
"RTN","KMPDBD01",31,0)
 D STRSTP^KMPDUTL2(4,2,1,STR)
"RTN","KMPDBD01",32,0)
 ;
"RTN","KMPDBD01",33,0)
 ;
"RTN","KMPDBD01",34,0)
 ; if sunday
"RTN","KMPDBD01",35,0)
 D:'$$DOW^XLFDT(DT,1) SUNDAY
"RTN","KMPDBD01",36,0)
 ;
"RTN","KMPDBD01",37,0)
 Q
"RTN","KMPDBD01",38,0)
 ;
"RTN","KMPDBD01",39,0)
SUNDAY ;-- weekly
"RTN","KMPDBD01",40,0)
 ;
"RTN","KMPDBD01",41,0)
 N STR
"RTN","KMPDBD01",42,0)
 ;
"RTN","KMPDBD01",43,0)
 S:'$G(DT) DT=$$DT^XLFDT
"RTN","KMPDBD01",44,0)
 ;
"RTN","KMPDBD01",45,0)
 ; hl7 - compress & transmit hl7 data to cm national
"RTN","KMPDBD01",46,0)
 ; database, and purge file #8973.1 (CM HL7 DATA) of old data
"RTN","KMPDBD01",47,0)
 S STR=$$NOW^XLFDT
"RTN","KMPDBD01",48,0)
 D WEEKLY^KMPDHU01(DT,1)
"RTN","KMPDBD01",49,0)
 ; store start, stop and delta times for weekly background job
"RTN","KMPDBD01",50,0)
 D STRSTP^KMPDUTL2(3,2,1,STR)
"RTN","KMPDBD01",51,0)
 ;
"RTN","KMPDBD01",52,0)
 ; timing - compress & transmit timing data to cm national database
"RTN","KMPDBD01",53,0)
 S STR=$$NOW^XLFDT
"RTN","KMPDBD01",54,0)
 D WEEKLY^KMPDTU01(DT)
"RTN","KMPDBD01",55,0)
 D STRSTP^KMPDUTL2(4,2,1,STR)
"RTN","KMPDBD01",56,0)
 ; purge entries from file 8973.2 (CP TIMING)
"RTN","KMPDBD01",57,0)
 S STR=$$NOW^XLFDT
"RTN","KMPDBD01",58,0)
 D PURGE1^KMPDUTL3
"RTN","KMPDBD01",59,0)
 D STRSTP^KMPDUTL2(4,2,2,STR)
"RTN","KMPDBD01",60,0)
 ;
"RTN","KMPDBD01",61,0)
 Q
"RTN","KMPDHU01")
0^2^B36642411
"RTN","KMPDHU01",1,0)
KMPDHU01 ;OAK/RAK - CM Tools HL7 Utility ;2/17/04  08:57
"RTN","KMPDHU01",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDHU01",3,0)
 ;
"RTN","KMPDHU01",4,0)
WEEKLY(KMPDT,KMPDPRGE) ;-- compress daily stats to weekly
"RTN","KMPDHU01",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU01",6,0)
 ; KMPDT.... Compression date in internal fileman formt.  This date
"RTN","KMPDHU01",7,0)
 ;           must be a Sunday.  It represents the date from which the
"RTN","KMPDHU01",8,0)
 ;           previous weeks data should be compressed. 
"RTN","KMPDHU01",9,0)
 ;           Example: if KMPDT = 2981011  then compression will begin
"RTN","KMPDHU01",10,0)
 ;                    on 2981010 (KMPDT-1)
"RTN","KMPDHU01",11,0)
 ; KMPDPRGE. 0 - do not purge data from file #8973.1
"RTN","KMPDHU01",12,0)
 ;           1 - purge data from file #8973.1
"RTN","KMPDHU01",13,0)
 ;
"RTN","KMPDHU01",14,0)
 ; Every Sunday compress the daily stats in file #8973.1 into weekly
"RTN","KMPDHU01",15,0)
 ; and upload the data to the CM RUM National Database
"RTN","KMPDHU01",16,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU01",17,0)
 ;
"RTN","KMPDHU01",18,0)
 Q:'$G(KMPDT)
"RTN","KMPDHU01",19,0)
 S KMPDPRGE=+$G(KMPDPRGE)
"RTN","KMPDHU01",20,0)
 ;
"RTN","KMPDHU01",21,0)
 N DATA,DATE,DDLDT,DELDATE,EN,END,HOURS,I,IEN,J,NM,PT,SITE,STR,START,SYNC
"RTN","KMPDHU01",22,0)
 ;
"RTN","KMPDHU01",23,0)
 ; quit if not sunday.
"RTN","KMPDHU01",24,0)
 Q:$$DOW^XLFDT(KMPDT,1)
"RTN","KMPDHU01",25,0)
 ; storage  processed
"RTN","KMPDHU01",26,0)
 K ^TMP($J),^TMP("KMPDHU01",$J)
"RTN","KMPDHU01",27,0)
 ; site info.
"RTN","KMPDHU01",28,0)
 S SITE=$$SITE^VASITE Q:SITE=""
"RTN","KMPDHU01",29,0)
 S DATE=KMPDT
"RTN","KMPDHU01",30,0)
 S (START,END)="",STR=$$NOW^XLFDT
"RTN","KMPDHU01",31,0)
 ; days to keep - this is represented by 'weeks to keep' in file #8973 
"RTN","KMPDHU01",32,0)
 ; so must be converted to days
"RTN","KMPDHU01",33,0)
 S DDLDT=$P($G(^KMPD(8973,1,3)),U,11)*7
"RTN","KMPDHU01",34,0)
 S:'DDLDT DDLDT=14
"RTN","KMPDHU01",35,0)
 ; Date to begin deletion.
"RTN","KMPDHU01",36,0)
 S DELDATE=$$FMADD^XLFDT(KMPDT,-DDLDT)
"RTN","KMPDHU01",37,0)
 ;
"RTN","KMPDHU01",38,0)
 W:'$D(ZTQUEUED) !,"Compressing data into weekly format..."
"RTN","KMPDHU01",39,0)
 ; Reverse $order to get previous dates.
"RTN","KMPDHU01",40,0)
 F  S DATE=$O(^KMPD(8973.1,"B",DATE),-1) Q:'DATE  D 
"RTN","KMPDHU01",41,0)
 .; If DATE is saturday set START and END dates and kill TMPARRY.
"RTN","KMPDHU01",42,0)
 .I $$DOW^XLFDT(DATE,1)=6 D 
"RTN","KMPDHU01",43,0)
 ..S END=DATE,START=$$FMADD^XLFDT(DATE,-6)
"RTN","KMPDHU01",44,0)
 ..K ^TMP($J)
"RTN","KMPDHU01",45,0)
 .Q:'START
"RTN","KMPDHU01",46,0)
 .S SYNC=0
"RTN","KMPDHU01",47,0)
 .F  S SYNC=$O(^KMPD(8973.1,"ASYNC",DATE,SYNC)) Q:'SYNC  S IEN=0 D 
"RTN","KMPDHU01",48,0)
 ..F  S IEN=$O(^KMPD(8973.1,"ASYNC",DATE,SYNC,IEN)) Q:'IEN  D 
"RTN","KMPDHU01",49,0)
 ...Q:'$D(^KMPD(8973.1,IEN,0))
"RTN","KMPDHU01",50,0)
 ...; data nodes into DATA() array.
"RTN","KMPDHU01",51,0)
 ...S DATA(0)=^KMPD(8973.1,IEN,0) F I=1,1.1,1.2,2,2.1,2.2,5.1:.1:5.5,5.7,5.8,5.9,99,99.2,99.3,99.5 S DATA(I)=$G(^(I))
"RTN","KMPDHU01",52,0)
 ...; quit if data has already been sent to national database
"RTN","KMPDHU01",53,0)
 ...Q:$P(DATA(0),U,2)
"RTN","KMPDHU01",54,0)
 ...; quit if no namespace or protocol
"RTN","KMPDHU01",55,0)
 ...S NM=$P(DATA(0),U,3),PT=$P(DATA(0),U,5) Q:NM=""!(PT="")
"RTN","KMPDHU01",56,0)
 ...; change first piece to start date (this is for national database)
"RTN","KMPDHU01",57,0)
 ...S $P(DATA(0),U)=START
"RTN","KMPDHU01",58,0)
 ...; second piece not applicable to national database
"RTN","KMPDHU01",59,0)
 ...S $P(DATA(0),U,2)=""
"RTN","KMPDHU01",60,0)
 ...D @$S(SYNC=2:"ASYNC(IEN,NM,PT,.DATA)",1:"SYNC(IEN,NM,PT,.DATA)")
"RTN","KMPDHU01",61,0)
 ...; add to processed array.
"RTN","KMPDHU01",62,0)
 ...S ^TMP("KMPDHU01",$J,IEN)=""
"RTN","KMPDHU01",63,0)
 .;
"RTN","KMPDHU01",64,0)
 .; Back to DATE level.
"RTN","KMPDHU01",65,0)
 .; If START then transmit data.
"RTN","KMPDHU01",66,0)
 .I DATE=START I $D(^TMP($J)) D TRANSMIT K ^TMP($J)
"RTN","KMPDHU01",67,0)
 ;
"RTN","KMPDHU01",68,0)
 D:$D(^TMP($J)) TRANSMIT
"RTN","KMPDHU01",69,0)
 K ^TMP($J)
"RTN","KMPDHU01",70,0)
 ;
"RTN","KMPDHU01",71,0)
 ; update field .02 (SENT TO CM NATIONAL DATABASE) to 'YES' for all
"RTN","KMPDHU01",72,0)
 ; processed entries.
"RTN","KMPDHU01",73,0)
 W:'$D(ZTQUEUED) !!,"Updating records to reflect transmission..."
"RTN","KMPDHU01",74,0)
 S IEN=0
"RTN","KMPDHU01",75,0)
 F  S IEN=$O(^TMP("KMPDHU01",$J,IEN)) Q:'IEN  D 
"RTN","KMPDHU01",76,0)
 .K FDA,ERROR W:'$D(ZTQUEUED) "."
"RTN","KMPDHU01",77,0)
 .S FDA($J,8973.1,IEN_",",.02)=1
"RTN","KMPDHU01",78,0)
 .D FILE^DIE("","FDA($J)","ERROR")
"RTN","KMPDHU01",79,0)
 ;
"RTN","KMPDHU01",80,0)
 K ^TMP("KMPDHU01",$J)
"RTN","KMPDHU01",81,0)
 ;
"RTN","KMPDHU01",82,0)
 S STR=$$NOW^XLFDT
"RTN","KMPDHU01",83,0)
 ; leave two complete weeks of data in file #8973.1
"RTN","KMPDHU01",84,0)
 D:KMPDPRGE PURGE^KMPDUTL3(DELDATE)
"RTN","KMPDHU01",85,0)
 D STRSTP^KMPDUTL2(3,2,2,STR)
"RTN","KMPDHU01",86,0)
 ;
"RTN","KMPDHU01",87,0)
 W:'$D(ZTQUEUED) !!,"Finished!"
"RTN","KMPDHU01",88,0)
 ;
"RTN","KMPDHU01",89,0)
 Q
"RTN","KMPDHU01",90,0)
 ;
"RTN","KMPDHU01",91,0)
ASYNC(IEN,NM,PR,DATA) ; compile asynchronous stats
"RTN","KMPDHU01",92,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU01",93,0)
 ; IEN..... Ien for file #8973.1 (CM HL7 DATA)
"RTN","KMPDHU01",94,0)
 ; NM...... Namespace (free text)
"RTN","KMPDHU01",95,0)
 ; PR...... Protocol (free text)
"RTN","KMPDHU01",96,0)
 ; DATA().. Array containing node data for file #8973.1 (CM HL7 DATA)
"RTN","KMPDHU01",97,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU01",98,0)
 Q:'$G(IEN)
"RTN","KMPDHU01",99,0)
 Q:$G(NM)=""
"RTN","KMPDHU01",100,0)
 Q:$G(PR)=""
"RTN","KMPDHU01",101,0)
 Q:'$D(DATA)
"RTN","KMPDHU01",102,0)
 N CS,I,J
"RTN","KMPDHU01",103,0)
 ; quit if no contact site
"RTN","KMPDHU01",104,0)
 S CS=$P(DATA(99.2),U,12) Q:CS=""
"RTN","KMPDHU01",105,0)
 S ^TMP($J,START,NM,PR,CS,0)=DATA(0)
"RTN","KMPDHU01",106,0)
 ; node 99.1 is for national database (end date^facility name)
"RTN","KMPDHU01",107,0)
 S DATA(99.1)=END_"^"_$P(SITE,U,2)_"^"_$P(SITE,U,3)
"RTN","KMPDHU01",108,0)
 ; pieces 6 through 13 of node 99.2 contain text
"RTN","KMPDHU01",109,0)
 F I=6:1:13 S $P(^TMP($J,START,NM,PR,CS,99.2),U,I)=$P(DATA(99.2),U,I)
"RTN","KMPDHU01",110,0)
 W:'$D(ZTQUEUED) "."
"RTN","KMPDHU01",111,0)
 F I=0:0 S I=$O(DATA(I)) Q:'I  D 
"RTN","KMPDHU01",112,0)
 .; 99.1 data not to be totalled
"RTN","KMPDHU01",113,0)
 .I I=99.1 F J=1:1:3 S $P(^TMP($J,START,NM,PR,CS,I),U,J)=$P(DATA(I),U,J)
"RTN","KMPDHU01",114,0)
 .; Add data to get weekly totals.
"RTN","KMPDHU01",115,0)
 .E  F J=1:1:$S($E(I)=5:24,I=99:6,I=99.2:3,I=99.3:9,99.5:3,1:9) D 
"RTN","KMPDHU01",116,0)
 ..S $P(^TMP($J,START,NM,PR,CS,I),U,J)=$P($G(^TMP($J,START,NM,PR,CS,I)),U,J)+$P(DATA(I),U,J)
"RTN","KMPDHU01",117,0)
 ;
"RTN","KMPDHU01",118,0)
 Q
"RTN","KMPDHU01",119,0)
 ;
"RTN","KMPDHU01",120,0)
SYNC(IEN,NM,PR,DATA) ; compile asynchronous stats
"RTN","KMPDHU01",121,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU01",122,0)
 ; IEN..... Ien for file #8973.1 (CM HL7 DATA)
"RTN","KMPDHU01",123,0)
 ; NM...... Namespace (free text)
"RTN","KMPDHU01",124,0)
 ; PR...... Protocol (free text)
"RTN","KMPDHU01",125,0)
 ; DATA().. Array containing node data for file #8973.1 (CM HL7 DATA)
"RTN","KMPDHU01",126,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU01",127,0)
 Q:'$G(IEN)
"RTN","KMPDHU01",128,0)
 Q:$G(NM)=""
"RTN","KMPDHU01",129,0)
 Q:$G(PR)=""
"RTN","KMPDHU01",130,0)
 Q:'$D(DATA)
"RTN","KMPDHU01",131,0)
 N I,J
"RTN","KMPDHU01",132,0)
 S ^TMP($J,START,NM,PR,0)=DATA(0)
"RTN","KMPDHU01",133,0)
 ; node 99.1 is for national database (end date^facility name)
"RTN","KMPDHU01",134,0)
 S DATA(99.1)=END_"^"_$P(SITE,U,2)_"^"_$P(SITE,U,3)
"RTN","KMPDHU01",135,0)
 ; pieces 6 through 13 of node 99.2 contain text
"RTN","KMPDHU01",136,0)
 F I=6:1:13 S $P(^TMP($J,START,NM,PR,99.2),U,I)=$P(DATA(99.2),U,I)
"RTN","KMPDHU01",137,0)
 W:'$D(ZTQUEUED) "."
"RTN","KMPDHU01",138,0)
 F I=0:0 S I=$O(DATA(I)) Q:'I  D 
"RTN","KMPDHU01",139,0)
 .; 99.1 data not to be totalled
"RTN","KMPDHU01",140,0)
 .I I=99.1 F J=1:1:3 S $P(^TMP($J,START,NM,PR,I),U,J)=$P(DATA(I),U,J)
"RTN","KMPDHU01",141,0)
 .; Add data to get weekly totals.
"RTN","KMPDHU01",142,0)
 .E  F J=1:1:$S(I=99:6,1:9) D 
"RTN","KMPDHU01",143,0)
 ..S $P(^TMP($J,START,NM,PR,I),U,J)=$P($G(^TMP($J,START,NM,PR,I)),U,J)+$P(DATA(I),U,J)
"RTN","KMPDHU01",144,0)
 Q
"RTN","KMPDHU01",145,0)
 ;
"RTN","KMPDHU01",146,0)
TRANSMIT ;-- format TMPARRY data, put into e-mail and send to cm.
"RTN","KMPDHU01",147,0)
 ;
"RTN","KMPDHU01",148,0)
 Q:'$D(^TMP($J))
"RTN","KMPDHU01",149,0)
 ;
"RTN","KMPDHU01",150,0)
 N C,CPU,HRSDAYS,I,IEN,LN,N,P,S,XMSUB,X,XMTEXT,XMY,XMZ,Y,Z
"RTN","KMPDHU01",151,0)
 ;
"RTN","KMPDHU01",152,0)
 K ^TMP("KMPDHU01-2",$J)
"RTN","KMPDHU01",153,0)
 ;
"RTN","KMPDHU01",154,0)
 S LN=0
"RTN","KMPDHU01",155,0)
 ; version and patch info
"RTN","KMPDHU01",156,0)
 S LN=LN+1,^TMP("KMPDHU01-2",$J,LN)="VERSION="_$$VERSION^KMPDUTL
"RTN","KMPDHU01",157,0)
 ; system information
"RTN","KMPDHU01",158,0)
 S LN=LN+1,^TMP("KMPDHU01-2",$J,LN)="SYSINFO="_$$SYSINFO^KMPDUTL1()
"RTN","KMPDHU01",159,0)
 ; send cpu data to national database
"RTN","KMPDHU01",160,0)
 D CPU^KMPDUTL5(.CPU) I $D(CPU) S I="" F  S I=$O(CPU(I)) Q:I=""  D 
"RTN","KMPDHU01",161,0)
 .S LN=LN+1,^TMP("KMPDHU01-2",$J,LN)="CPU="_I_U_CPU(I)
"RTN","KMPDHU01",162,0)
 ;
"RTN","KMPDHU01",163,0)
 W:'$D(ZTQUEUED) !!,"Formatting ",$$FMTE^XLFDT($G(START))," data for mail delivery..."
"RTN","KMPDHU01",164,0)
 ; reformat so that data is in ^TMP("KMPR UPLOAD",$J,LN)= format.
"RTN","KMPDHU01",165,0)
 S IEN=0,S=""
"RTN","KMPDHU01",166,0)
 F  S S=$O(^TMP($J,S)) Q:S=""  S N="" W "." D 
"RTN","KMPDHU01",167,0)
 .F  S N=$O(^TMP($J,S,N)) Q:N=""  S P="" D 
"RTN","KMPDHU01",168,0)
 ..F  S P=$O(^TMP($J,S,N,P)) Q:P=""  S I="",IEN=IEN+1 D 
"RTN","KMPDHU01",169,0)
 ...; synchronous data
"RTN","KMPDHU01",170,0)
 ...F  S I=$O(^TMP($J,S,N,P,I)) Q:(+I)'=I  S LN=LN+1 D 
"RTN","KMPDHU01",171,0)
 ....S ^TMP("KMPDHU01-2",$J,LN)=IEN_","_I_")="_^TMP($J,S,N,P,I)
"RTN","KMPDHU01",172,0)
 ...; asynchronous data
"RTN","KMPDHU01",173,0)
 ...S C="-"
"RTN","KMPDHU01",174,0)
 ...F  S C=$O(^TMP($J,S,N,P,C)) Q:C=""  S I="",IEN=IEN+1 D 
"RTN","KMPDHU01",175,0)
 ....F  S I=$O(^TMP($J,S,N,P,C,I)) Q:(+I)'=I  S LN=LN+1 D
"RTN","KMPDHU01",176,0)
 .....S ^TMP("KMPDHU01-2",$J,LN)=IEN_","_I_")="_^TMP($J,S,N,P,C,I)
"RTN","KMPDHU01",177,0)
 ;
"RTN","KMPDHU01",178,0)
 ; quit if no data to transmit.
"RTN","KMPDHU01",179,0)
 Q:'$D(^TMP("KMPDHU01-2",$J))
"RTN","KMPDHU01",180,0)
 ; send packman message.
"RTN","KMPDHU01",181,0)
 S XMTEXT="^TMP(""KMPDHU01-2"","_$J_","
"RTN","KMPDHU01",182,0)
 S XMSUB="CM HL7 DATA~"_$P(SITE,U,2)_" ("_$P(SITE,U,3)_")~"_$$FMTE^XLFDT(START)
"RTN","KMPDHU01",183,0)
 S XMY("S.KMP4-CM-SERVER@FO-ALBANY.MED.VA.GOV")=""
"RTN","KMPDHU01",184,0)
 S XMY("CAPACITY,MANAGEMENT@FO-ALBANY.MED.VA.GOV")=""
"RTN","KMPDHU01",185,0)
 D ^XMD
"RTN","KMPDHU01",186,0)
 W:'$D(ZTQUEUED) !,"Message #",$G(XMZ)," sent..."
"RTN","KMPDHU01",187,0)
 K ^TMP("KMPDHU01-2",$J)
"RTN","KMPDHU01",188,0)
 ;
"RTN","KMPDHU01",189,0)
 Q
"RTN","KMPDHU02")
0^3^B55231717
"RTN","KMPDHU02",1,0)
KMPDHU02 ;OAK/RAK - CM Tools Compile & File HL7 Daily Stats ;2/17/04  08:58
"RTN","KMPDHU02",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDHU02",3,0)
 ;
"RTN","KMPDHU02",4,0)
DAILY(KMPDST,KMPDEN) ;-entry point
"RTN","KMPDHU02",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU02",6,0)
 ; KMPDST... Start date in internal fileman format.
"RTN","KMPDHU02",7,0)
 ; KMPDEN... End date in internal fileman format.
"RTN","KMPDHU02",8,0)
 ;
"RTN","KMPDHU02",9,0)
 ; This API gathers HL7 data and stores it in file 8973.1 (CM HL7 DATA)
"RTN","KMPDHU02",10,0)
 ;
"RTN","KMPDHU02",11,0)
 ; Variables used:
"RTN","KMPDHU02",12,0)
 ; GBL...... Global where data is stored - for use with indirection
"RTN","KMPDHU02",13,0)
 ; GBL1..... globas where compiled data is stored before filing - 
"RTN","KMPDHU02",14,0)
 ;           used with indirection
"RTN","KMPDHU02",15,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU02",16,0)
 ;
"RTN","KMPDHU02",17,0)
 Q:'$G(KMPDST)
"RTN","KMPDHU02",18,0)
 Q:'$G(KMPDEN)
"RTN","KMPDHU02",19,0)
 ; make sure end date has hours
"RTN","KMPDHU02",20,0)
 S:'$P(KMPDEN,".",2) $P(KMPDEN,".",2)="99"
"RTN","KMPDHU02",21,0)
 S:'$G(DT) DT=$$DT^XLFDT
"RTN","KMPDHU02",22,0)
 ;
"RTN","KMPDHU02",23,0)
 N ERROR,GBL,GBL1,STR,X
"RTN","KMPDHU02",24,0)
 ;
"RTN","KMPDHU02",25,0)
 ; get data from hl7 api
"RTN","KMPDHU02",26,0)
 W:'$D(ZTQUEUED) !,"Gathering HL7 data..."
"RTN","KMPDHU02",27,0)
 ; global with 'raw' hl7 api data
"RTN","KMPDHU02",28,0)
 S GBL=$NA(^TMP("KMPDH",$J)) K @GBL
"RTN","KMPDHU02",29,0)
 ; set up global to get asynchronous data
"RTN","KMPDHU02",30,0)
 K ^TMP($J)
"RTN","KMPDHU02",31,0)
 S ^TMP($J,"HLUCM")="DEBUG GLOBAL"
"RTN","KMPDHU02",32,0)
 S X=$$CM2^HLUCM(KMPDST,KMPDEN,1,1,"KMPDH","EITHER",.ERROR)
"RTN","KMPDHU02",33,0)
 I 'X!($D(ERROR))!('$D(^TMP("KMPDH",$J))) D  Q
"RTN","KMPDHU02",34,0)
 .W:'$D(ZTQUEUED) " no data to report"
"RTN","KMPDHU02",35,0)
 ;
"RTN","KMPDHU02",36,0)
 ; global for storing compiled data before filing
"RTN","KMPDHU02",37,0)
 S GBL1=$NA(^TMP("KMPDH-1",$J)) K @GBL1
"RTN","KMPDHU02",38,0)
 ;
"RTN","KMPDHU02",39,0)
 W:'$D(ZTQUEUED) !,"Compiling synchronous HL7 data..."
"RTN","KMPDHU02",40,0)
 D SYNC
"RTN","KMPDHU02",41,0)
 ;
"RTN","KMPDHU02",42,0)
 W:'$D(ZTQUEUED) !,"Compiling asynchronous HL7 data..."
"RTN","KMPDHU02",43,0)
 D ASYNC
"RTN","KMPDHU02",44,0)
 ;
"RTN","KMPDHU02",45,0)
 K @GBL,@GBL1,^TMP($J),^TMP("KMPDHERRTIME",$J)
"RTN","KMPDHU02",46,0)
 W:'$D(ZTQUEUED) !,"Finished!"
"RTN","KMPDHU02",47,0)
 ;
"RTN","KMPDHU02",48,0)
 Q
"RTN","KMPDHU02",49,0)
 ;
"RTN","KMPDHU02",50,0)
 ;
"RTN","KMPDHU02",51,0)
ASYNC ;- asynchronous data
"RTN","KMPDHU02",52,0)
 Q:$G(GBL)=""
"RTN","KMPDHU02",53,0)
 Q:$G(GBL1)=""
"RTN","KMPDHU02",54,0)
 ;
"RTN","KMPDHU02",55,0)
 N COUNT,DATA,DATA1,DATA2,HOUR,I,IEN,IEN1,IEN2,J,LOCAL,MSG,NM,NODE
"RTN","KMPDHU02",56,0)
 N OF,PIECE,PR,PTNP,SD,STDT,TIME1,TIME2,UNIT
"RTN","KMPDHU02",57,0)
 ;
"RTN","KMPDHU02",58,0)
 ; local site name
"RTN","KMPDHU02",59,0)
 S LOCAL=$P($$SITE^VASITE,U,2) Q:LOCAL=""
"RTN","KMPDHU02",60,0)
 S IEN=0
"RTN","KMPDHU02",61,0)
 F  S IEN=$O(^TMP($J,"HLUCMSTORE","U",IEN)) Q:'IEN  S DATA=^(IEN) D 
"RTN","KMPDHU02",62,0)
 .; data = Protocol~Ien^Namespace
"RTN","KMPDHU02",63,0)
 .; message type
"RTN","KMPDHU02",64,0)
 .S MSG=$P(DATA,U,6)
"RTN","KMPDHU02",65,0)
 .; quit if not 'complete' message
"RTN","KMPDHU02",66,0)
 .Q:'$$ASYNCHK(MSG)
"RTN","KMPDHU02",67,0)
 .; protocol - check protocol fist, then inferred protocol
"RTN","KMPDHU02",68,0)
 .S PR=$S($P(DATA,U,7)]"":$P(DATA,U,7),$P(DATA,U,8)]"":$P(DATA,U,8),1:"") Q:PR=""
"RTN","KMPDHU02",69,0)
 .; namespace - check namespace first, then inferred namespace
"RTN","KMPDHU02",70,0)
 .S NM=$S($P(DATA,U,9)]"":$P(DATA,U,9),$P(DATA,U,10)]"":$P(DATA,U,10),1:"") Q:NM=""
"RTN","KMPDHU02",71,0)
 .; other facility
"RTN","KMPDHU02",72,0)
 .S OF=$P(DATA,U,11) S:OF["~" OF=$P(OF,"~",2) Q:OF=""
"RTN","KMPDHU02",73,0)
 .; quit if other facility is LOCAL
"RTN","KMPDHU02",74,0)
 .Q:OF[LOCAL
"RTN","KMPDHU02",75,0)
 .; start date/time
"RTN","KMPDHU02",76,0)
 .S STDT=$P(DATA,U,4) Q:'STDT
"RTN","KMPDHU02",77,0)
 .; date without time
"RTN","KMPDHU02",78,0)
 .S SD=$P(STDT,".") Q:'SD
"RTN","KMPDHU02",79,0)
 .S $P(@GBL1@(SD,PR,NM,OF,99.2),U,11)=$P($P(DATA,U,11),"~")
"RTN","KMPDHU02",80,0)
 .S $P(@GBL1@(SD,PR,NM,OF,99.2),U,12)=$P($P(DATA,U,11),"~",2)
"RTN","KMPDHU02",81,0)
 .S $P(@GBL1@(SD,PR,NM,OF,99.2),U,13)=$P($P(DATA,U,11),"~",3)
"RTN","KMPDHU02",82,0)
 .;
"RTN","KMPDHU02",83,0)
 .S (COUNT,HOUR,IEN1)=0 K UNIT
"RTN","KMPDHU02",84,0)
 .F  S IEN1=$O(^TMP($J,"HLUCMSTORE","U",IEN,IEN1)) Q:'IEN1  D 
"RTN","KMPDHU02",85,0)
 ..; data1 = piece 1 - Characters
"RTN","KMPDHU02",86,0)
 ..;         piece 2 - Messages
"RTN","KMPDHU02",87,0)
 ..;         piece 3 - Seconds
"RTN","KMPDHU02",88,0)
 ..;         piece 4 - Begining Time
"RTN","KMPDHU02",89,0)
 ..;         piece 5 - End Time
"RTN","KMPDHU02",90,0)
 ..;         piece 6 - Type: msg, ca, aa or ca
"RTN","KMPDHU02",91,0)
 ..;         piece 7 - Protocol~Ien
"RTN","KMPDHU02",92,0)
 ..;         piece 8 - Namespace
"RTN","KMPDHU02",93,0)
 ..S DATA1=$G(^TMP($J,"HLUCMSTORE","U",IEN,IEN1,"CCC")) Q:DATA1=""
"RTN","KMPDHU02",94,0)
 ..S COUNT=COUNT+1,UNIT(COUNT)=DATA1
"RTN","KMPDHU02",95,0)
 .;
"RTN","KMPDHU02",96,0)
 .; back to IEN level
"RTN","KMPDHU02",97,0)
 .; quit if unit() array is not complete
"RTN","KMPDHU02",98,0)
 .Q:'$$UNITS(MSG)
"RTN","KMPDHU02",99,0)
 .; hour of transaction
"RTN","KMPDHU02",100,0)
 .S HOUR=+$E($P(STDT,".",2),1,2),HOUR=HOUR+1
"RTN","KMPDHU02",101,0)
 .; prime time or non-prime time
"RTN","KMPDHU02",102,0)
 .S PTNP=$$PTNP^KMPDHU03(STDT) Q:'PTNP
"RTN","KMPDHU02",103,0)
 .; node: 5 - prime time
"RTN","KMPDHU02",104,0)
 .;       6 - non-prime time
"RTN","KMPDHU02",105,0)
 .S NODE=$S(PTNP=2:6,1:5)
"RTN","KMPDHU02",106,0)
 .;
"RTN","KMPDHU02",107,0)
 .; update msg unit count - prime time or non-prime time
"RTN","KMPDHU02",108,0)
 .S $P(@GBL1@(SD,PR,NM,OF,99.5),U,PTNP)=$P($G(@GBL1@(SD,PR,NM,OF,99.5)),U,PTNP)+1
"RTN","KMPDHU02",109,0)
 .;update msg unit count - both prime time & non-prime time
"RTN","KMPDHU02",110,0)
 .S $P(@GBL1@(SD,PR,NM,OF,99.5),U,3)=$P($G(@GBL1@(SD,PR,NM,OF,99.5)),U,3)+1
"RTN","KMPDHU02",111,0)
 .; totals
"RTN","KMPDHU02",112,0)
 .F J=0:0 S J=$O(UNIT(J)) Q:'J  F I=1:1:3 D 
"RTN","KMPDHU02",113,0)
 ..; total
"RTN","KMPDHU02",114,0)
 ..S $P(@GBL1@(SD,PR,NM,OF,99.2),U,I)=$P($G(@GBL1@(SD,PR,NM,OF,99.2)),U,I)+$P(UNIT(J),U,I)
"RTN","KMPDHU02",115,0)
 ..S $P(@GBL1@(SD,PR,NM,OF,99.3),U,(I+6))=$P($G(@GBL1@(SD,PR,NM,OF,99.3)),U,(I+6))+$P(UNIT(J),U,I)
"RTN","KMPDHU02",116,0)
 ..; prime time or non-prime time
"RTN","KMPDHU02",117,0)
 ..; ^ piece to set
"RTN","KMPDHU02",118,0)
 ..S PIECE=I+$S(PTNP=2:3,1:0)
"RTN","KMPDHU02",119,0)
 ..S $P(@GBL1@(SD,PR,NM,OF,99.3),U,PIECE)=$P($G(@GBL1@(SD,PR,NM,OF,99.3)),U,PIECE)+$P(UNIT(J),U,I)
"RTN","KMPDHU02",120,0)
 .;
"RTN","KMPDHU02",121,0)
 .; msg to ca - originating message to commit ack
"RTN","KMPDHU02",122,0)
 .; ^ piece: 1 - characters
"RTN","KMPDHU02",123,0)
 .;          2 - count
"RTN","KMPDHU02",124,0)
 .;          3 - seconds
"RTN","KMPDHU02",125,0)
 .F I=1:1:3 S $P(@GBL1@(SD,PR,NM,OF,NODE+(I*.1)),U,HOUR)=$P($G(@GBL1@(SD,PR,NM,OF,NODE+(I*.1))),U,HOUR)+($P(UNIT(1),U,I)+$P(UNIT(2),U,I))
"RTN","KMPDHU02",126,0)
 .;
"RTN","KMPDHU02",127,0)
 .; processing time (ca to aa) - commit ack ending time to application
"RTN","KMPDHU02",128,0)
 .;                              ack starting time
"RTN","KMPDHU02",129,0)
 .S TIME1=+$P(UNIT(3),U,4),TIME2=+$P(UNIT(2),U,5)
"RTN","KMPDHU02",130,0)
 .S $P(@GBL1@(SD,PR,NM,OF,(NODE+(.4))),U,HOUR)=$$TIMEADD^KMPDU($P($G(@GBL1@(SD,PR,NM,OF,(NODE+(.4)))),U,HOUR)+$$FMDIFF^XLFDT(TIME2,(+TIME1),3))
"RTN","KMPDHU02",131,0)
 .; processing time (ca to aa) - count
"RTN","KMPDHU02",132,0)
 .S $P(@GBL1@(SD,PR,NM,OF,(NODE+(.5))),U,HOUR)=$P($G(@GBL1@(SD,PR,NM,OF,(NODE+(.5)))),U,HOUR)+1
"RTN","KMPDHU02",133,0)
 .;
"RTN","KMPDHU02",134,0)
 .; aa to ca - application ack to commit ack
"RTN","KMPDHU02",135,0)
 .; ^ piece: 1 - characters
"RTN","KMPDHU02",136,0)
 .;          2 - count
"RTN","KMPDHU02",137,0)
 .;          3 - seconds
"RTN","KMPDHU02",138,0)
 .F I=1:1:3 S $P(@GBL1@(SD,PR,NM,OF,NODE+(I+6*.1)),U,HOUR)=$P($G(@GBL1@(SD,PR,NM,OF,NODE+(I+6*.1))),U,HOUR)+($P(UNIT(3),U,I)+$P(UNIT(4),U,I))
"RTN","KMPDHU02",139,0)
 ;
"RTN","KMPDHU02",140,0)
 D:$D(@GBL1) FILE^KMPDHU03(2)
"RTN","KMPDHU02",141,0)
 ;
"RTN","KMPDHU02",142,0)
 Q
"RTN","KMPDHU02",143,0)
 ;
"RTN","KMPDHU02",144,0)
ASYNCHK(KMPDMSG) ;-- extrinsic function - check for 'complete' message
"RTN","KMPDHU02",145,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU02",146,0)
 ; KMPDMGS... message ack designations
"RTN","KMPDHU02",147,0)
 ;
"RTN","KMPDHU02",148,0)
 ; Return: 0 - not a complete message
"RTN","KMPDHU02",149,0)
 ;         1 - complete message
"RTN","KMPDHU02",150,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU02",151,0)
 Q:$G(KMPDMSG)="" 0
"RTN","KMPDHU02",152,0)
 Q:MSG="MSG~CA~AA~CA" 1
"RTN","KMPDHU02",153,0)
 Q:MSG="MSG~CA~AR~CA" 1
"RTN","KMPDHU02",154,0)
 Q:MSG="MSG~AA" 1
"RTN","KMPDHU02",155,0)
 Q 0
"RTN","KMPDHU02",156,0)
 ;
"RTN","KMPDHU02",157,0)
UNITS(MSG) ;-- extrinsic function
"RTN","KMPDHU02",158,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU02",159,0)
 ; MSG.... type of message: 'msg~aa', 'msg~ca~aa~ca', etc.
"RTN","KMPDHU02",160,0)
 ;
"RTN","KMPDHU02",161,0)
 ; Return: 0 - unit() array not complete
"RTN","KMPDHU02",162,0)
 ;         1 - unit() array is complete
"RTN","KMPDHU02",163,0)
 ;
"RTN","KMPDHU02",164,0)
 ; unit() array must be segmented into the following format:
"RTN","KMPDHU02",165,0)
 ;   unit(1) = msg
"RTN","KMPDHU02",166,0)
 ;   unit(2) = ca
"RTN","KMPDHU02",167,0)
 ;   unit(3) = aa
"RTN","KMPDHU02",168,0)
 ;   unit(4) = ca
"RTN","KMPDHU02",169,0)
 ; this data is then used to calculate characters, messages and seconds
"RTN","KMPDHU02",170,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU02",171,0)
 Q:$G(MSG)="" 0
"RTN","KMPDHU02",172,0)
 ; all messages must have unit(2)
"RTN","KMPDHU02",173,0)
 Q:'$D(UNIT(2)) 0
"RTN","KMPDHU02",174,0)
 ; "msg~ca~aa~ca" & "msg~ca~ar~ca" messages must have unit(3) & unit(4)
"RTN","KMPDHU02",175,0)
 I MSG="MSG~CA~AA~CA"!(MSG="MSG~CA~AR~CA") Q:'$D(UNIT(3)) 0
"RTN","KMPDHU02",176,0)
 I MSG="MSG~CA~AA~CA"!(MSG="MSG~CA~AR~CA") Q:'$D(UNIT(4)) 0
"RTN","KMPDHU02",177,0)
 ; 'msg~aaa' messages contain only 2 unit() entries
"RTN","KMPDHU02",178,0)
 ; create 4 unit() entries for processing
"RTN","KMPDHU02",179,0)
 I MSG="MSG~AA" D 
"RTN","KMPDHU02",180,0)
 .S (UNIT(3),UNIT(4))=UNIT(2),UNIT(2)=UNIT(1)
"RTN","KMPDHU02",181,0)
 .S $P(UNIT(1),U,1,3)="0^0^0"
"RTN","KMPDHU02",182,0)
 .S $P(UNIT(4),U,1,3)="0^0^0"
"RTN","KMPDHU02",183,0)
 ; calculate seconds
"RTN","KMPDHU02",184,0)
 ; msg to ca
"RTN","KMPDHU02",185,0)
 S $P(UNIT(2),U,3)=$$FMDIFF^XLFDT($P(UNIT(2),U,5),$P(UNIT(1),U,4),2)
"RTN","KMPDHU02",186,0)
 S:$P(UNIT(2),U,3)<0 $P(UNIT(2),U,3)=0
"RTN","KMPDHU02",187,0)
 ; ca to aa
"RTN","KMPDHU02",188,0)
 S $P(UNIT(3),U,3)=$$FMDIFF^XLFDT($P(UNIT(3),U,5),$P(UNIT(2),U,5),2)
"RTN","KMPDHU02",189,0)
 S:$P(UNIT(3),U,3)<0 $P(UNIT(3),U,3)=0
"RTN","KMPDHU02",190,0)
 ; aa to ca
"RTN","KMPDHU02",191,0)
 S $P(UNIT(4),U,3)=$$FMDIFF^XLFDT($P(UNIT(4),U,5),$P(UNIT(3),U,5),2)
"RTN","KMPDHU02",192,0)
 S:$P(UNIT(4),U,3)<0 $P(UNIT(4),U,3)=0
"RTN","KMPDHU02",193,0)
 ;
"RTN","KMPDHU02",194,0)
 Q 1
"RTN","KMPDHU02",195,0)
 ;
"RTN","KMPDHU02",196,0)
SYNC ;- synchronous data
"RTN","KMPDHU02",197,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU02",198,0)
 ; SS1...... subscript 1 - identifies data
"RTN","KMPDHU02",199,0)
 ;            HR   - hourly
"RTN","KMPDHU02",200,0)
 ;            NMSP - namespace
"RTN","KMPDHU02",201,0)
 ;            PROT - protocol
"RTN","KMPDHU02",202,0)
 ; SS2...... subscript 2 - identifies data sorted within SS1
"RTN","KMPDHU02",203,0)
 ;            IO   - incoming/outgoing messages
"RTN","KMPDHU02",204,0)
 ;            LR   - local/remote messages
"RTN","KMPDHU02",205,0)
 ;            PR   - protocol
"RTN","KMPDHU02",206,0)
 ;            TM   - type of transmission
"RTN","KMPDHU02",207,0)
 ;            
"RTN","KMPDHU02",208,0)
 ; SS3...... subcript 3 - which identifier for SS2 is being sorted
"RTN","KMPDHU02",209,0)
 ;            IO   - I - incoming
"RTN","KMPDHU02",210,0)
 ;                   O - outgoing
"RTN","KMPDHU02",211,0)
 ;                   U - unknown
"RTN","KMPDHU02",212,0)
 ;            LR   - L - local
"RTN","KMPDHU02",213,0)
 ;                   R - remote
"RTN","KMPDHU02",214,0)
 ;                   U - unknown
"RTN","KMPDHU02",215,0)
 ;            PR   - P - placeholder for consistent subscripting
"RTN","KMPDHU02",216,0)
 ;            TM   - M - mailman
"RTN","KMPDHU02",217,0)
 ;                   T - tcp
"RTN","KMPDHU02",218,0)
 ;                   U -unknown
"RTN","KMPDHU02",219,0)
 ; SS4...... subscript 4 - according to SS1
"RTN","KMPDHU02",220,0)
 ;            HR   - date.time
"RTN","KMPDHU02",221,0)
 ;            NMSP - namespace
"RTN","KMPDHU02",222,0)
 ;            PROT - protocal
"RTN","KMPDHU02",223,0)
 ; SS5...... subcript 5 - according to SS1
"RTN","KMPDHU02",224,0)
 ;            HR   - namespace
"RTN","KMPDHU02",225,0)
 ;            NMSP - date.tim
"RTN","KMPDHU02",226,0)
 ;            PROT - namespace
"RTN","KMPDHU02",227,0)
 ; SS6...... subscript 6 - according to SS1
"RTN","KMPDHU02",228,0)
 ;            HR   - protocol
"RTN","KMPDHU02",229,0)
 ;            NMSP - protocol
"RTN","KMPDHU02",230,0)
 ;            PROT - date.time
"RTN","KMPDHU02",231,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU02",232,0)
 Q:$G(GBL)=""
"RTN","KMPDHU02",233,0)
 Q:$G(GBL1)=""
"RTN","KMPDHU02",234,0)
 N SS1,SS2,SS3,SS4,SS5,SS6
"RTN","KMPDHU02",235,0)
 S SS1=""
"RTN","KMPDHU02",236,0)
 F  S SS1=$O(@GBL@(SS1)) Q:SS1=""  I SS1'="RFAC" S SS2="" D 
"RTN","KMPDHU02",237,0)
 .F  S SS2=$O(@GBL@(SS1,SS2)) Q:SS2=""  S SS3="" D 
"RTN","KMPDHU02",238,0)
 ..F  S SS3=$O(@GBL@(SS1,SS2,SS3)) Q:SS3=""  S SS4="" D 
"RTN","KMPDHU02",239,0)
 ...F  S SS4=$O(@GBL@(SS1,SS2,SS3,SS4)) Q:SS4=""  S SS5="" D 
"RTN","KMPDHU02",240,0)
 ....Q:SS1="PROT"&(SS4="ZZZ")
"RTN","KMPDHU02",241,0)
 ....F  S SS5=$O(@GBL@(SS1,SS2,SS3,SS4,SS5)) Q:SS5=""  S SS6="" D 
"RTN","KMPDHU02",242,0)
 .....; if SS1="NMSP" or SS1="PROT" quit if SS4 and SS5 (protocol/
"RTN","KMPDHU02",243,0)
 .....;                             namespace pair) = ZZZ
"RTN","KMPDHU02",244,0)
 .....I SS1="NMSP"!(SS1="PROT") Q:SS4="ZZZ"&(SS5="ZZZ")
"RTN","KMPDHU02",245,0)
 .....F  S SS6=$O(@GBL@(SS1,SS2,SS3,SS4,SS5,SS6)) Q:SS6=""  D 
"RTN","KMPDHU02",246,0)
 ......Q:SS1="HR"&(SS6="ZZZ")
"RTN","KMPDHU02",247,0)
 ......Q:SS1="NMSP"&(SS6="ZZZ")
"RTN","KMPDHU02",248,0)
 ......; compile data into daily stats for file #8973.1 (CM HL7 DATA)
"RTN","KMPDHU02",249,0)
 ......D COMPILE^KMPDHU03
"RTN","KMPDHU02",250,0)
 ;
"RTN","KMPDHU02",251,0)
 D:$D(@GBL1) FILE^KMPDHU03(1)
"RTN","KMPDHU02",252,0)
 ;
"RTN","KMPDHU02",253,0)
 K @GBL1
"RTN","KMPDHU02",254,0)
 ;
"RTN","KMPDHU02",255,0)
 Q
"RTN","KMPDHU03")
0^4^B28509534
"RTN","KMPDHU03",1,0)
KMPDHU03 ;OAK/RAK - CM Tools Compile & File HL7 Daily Stats ;2/17/04  08:59
"RTN","KMPDHU03",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDHU03",3,0)
 ;
"RTN","KMPDHU03",4,0)
COMPILE ;-compile synchronous data into GLB1
"RTN","KMPDHU03",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU03",6,0)
 ; DATA.... data from GBL array
"RTN","KMPDHU03",7,0)
 ; DATE.... date.hr
"RTN","KMPDHU03",8,0)
 ; ND...... node where data will be filed in file #8973.1
"RTN","KMPDHU03",9,0)
 ; LC...... up-arrow (^) piece location of data to be filed
"RTN","KMPDHU03",10,0)
 ; NM....... namespace
"RTN","KMPDHU03",11,0)
 ; PT...... protocol name~ien
"RTN","KMPDHU03",12,0)
 ; PTNP.... prime time - 1
"RTN","KMPDHU03",13,0)
 ;          non-prime time 2
"RTN","KMPDHU03",14,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU03",15,0)
 ;
"RTN","KMPDHU03",16,0)
 N DATA,DATE,I,ND,LC,NM,PT,PTNP
"RTN","KMPDHU03",17,0)
 ;
"RTN","KMPDHU03",18,0)
 Q:'$D(@GBL@(SS1,SS2,SS3,SS4,SS5,SS6))  S DATA=$G(^(SS6)) Q:DATA=""
"RTN","KMPDHU03",19,0)
 ; namespace
"RTN","KMPDHU03",20,0)
 S NM=$S(SS1="HR"!(SS1="PROT"):SS5,SS1="NMSP":SS4,1:"") Q:NM=""
"RTN","KMPDHU03",21,0)
 ; protocol
"RTN","KMPDHU03",22,0)
 S PT=$S(SS1="HR"!(SS1="NMSP"):SS6,SS1="PROT":SS4,1:"") Q:PT=""
"RTN","KMPDHU03",23,0)
 ; prime time - 1, non-prime time - 2
"RTN","KMPDHU03",24,0)
 S DATE=$S(SS1="HR":SS4,SS1="NMSP":SS5,SS1="PROT":SS6,1:"") Q:'DATE
"RTN","KMPDHU03",25,0)
 ; DATE is set by using the 'next highest' hour
"RTN","KMPDHU03",26,0)
 ; 3030509.0811 is returned as 3030509.09
"RTN","KMPDHU03",27,0)
 ; use $$fmadd to go back to previous hour
"RTN","KMPDHU03",28,0)
 S PTNP=$$PTNP^KMPDHU03($$FMADD^XLFDT(DATE,,-1)) Q:'PTNP
"RTN","KMPDHU03",29,0)
 ;
"RTN","KMPDHU03",30,0)
 I SS1="HR" D 
"RTN","KMPDHU03",31,0)
 .S ND=$S(SS2="TM":1,1:""),ND=ND+(PTNP-1)
"RTN","KMPDHU03",32,0)
 .S LC=$S(SS3="T":0,SS3="M":3,SS3="U":6,1:"")
"RTN","KMPDHU03",33,0)
 I SS1="NMSP" D 
"RTN","KMPDHU03",34,0)
 .S ND=$S(SS2="IO":1.1,SS2="LR":1.2,1:""),ND=ND+(PTNP-1)
"RTN","KMPDHU03",35,0)
 .S LC=$S(SS3="I"!(SS3="L"):0,SS3="O"!(SS3="R"):3,SS3="U":6,1:"") Q:LC=""
"RTN","KMPDHU03",36,0)
 I SS1="PROT" D 
"RTN","KMPDHU03",37,0)
 .S ND=99,LC=$S(PTNP=1:0,PTNP=2:3,1:"")
"RTN","KMPDHU03",38,0)
 ;
"RTN","KMPDHU03",39,0)
 ; quit if not node (ND) or location (LC)
"RTN","KMPDHU03",40,0)
 Q:'$P(DATE,".")!('ND)!(LC="")
"RTN","KMPDHU03",41,0)
 ;
"RTN","KMPDHU03",42,0)
 F I=1,3 D 
"RTN","KMPDHU03",43,0)
 .S $P(@GBL1@($P(DATE,"."),PT,NM,ND),U,(I+LC))=$P($G(@GBL1@($P(DATE,"."),PT,NM,ND)),U,(I+LC))+$P(DATA,U,I)
"RTN","KMPDHU03",44,0)
 S $P(@GBL1@($P(DATE,"."),PT,NM,ND),U,(2+LC))=$P($G(@GBL1@($P(DATE,"."),PT,NM,ND)),U,(2+LC))+$P(DATA,U,4)
"RTN","KMPDHU03",45,0)
 ;
"RTN","KMPDHU03",46,0)
 Q
"RTN","KMPDHU03",47,0)
 ;
"RTN","KMPDHU03",48,0)
FILE(KMPDSYNC) ;-file data into file 8973.1 (CM HL7 DATA)
"RTN","KMPDHU03",49,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU03",50,0)
 ; KMPDSYNC... 1 - synchronous
"RTN","KMPDHU03",51,0)
 ;             2 - asynchronous
"RTN","KMPDHU03",52,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU03",53,0)
 Q:'$G(KMPDSYNC)
"RTN","KMPDHU03",54,0)
 Q:KMPDSYNC<1!(KMPDSYNC>2)
"RTN","KMPDHU03",55,0)
 Q:'$D(@GBL1)
"RTN","KMPDHU03",56,0)
 ;
"RTN","KMPDHU03",57,0)
 W:'$D(ZTQUEUED) !,"Filing ",$S(KMPDSYNC=2:"asynchronous",1:"synchronous")," HL7 stats into file 8973.1 (CM HL7 DATA)..."
"RTN","KMPDHU03",58,0)
 ;
"RTN","KMPDHU03",59,0)
 ; file data
"RTN","KMPDHU03",60,0)
 D @("FILE"_KMPDSYNC) Q:'$D(FDA)
"RTN","KMPDHU03",61,0)
 ;
"RTN","KMPDHU03",62,0)
 Q
"RTN","KMPDHU03",63,0)
 ;
"RTN","KMPDHU03",64,0)
FILE1 ;-- file synchronous data
"RTN","KMPDHU03",65,0)
 ;
"RTN","KMPDHU03",66,0)
 Q:'$D(@GBL1)
"RTN","KMPDHU03",67,0)
 ;
"RTN","KMPDHU03",68,0)
 N DATE,ERROR,FDA,I,IEN,INDEX,NM,PT,PT1,ZIEN
"RTN","KMPDHU03",69,0)
 ;
"RTN","KMPDHU03",70,0)
 S DATE=0
"RTN","KMPDHU03",71,0)
 F  S DATE=$O(@GBL1@(DATE)) Q:'DATE  S PT="" D 
"RTN","KMPDHU03",72,0)
 .F  S PT=$O(@GBL1@(DATE,PT)) Q:PT=""  S NM="" D 
"RTN","KMPDHU03",73,0)
 ..; remove ien (name~123) from protocol
"RTN","KMPDHU03",74,0)
 ..S PT1=$P(PT,"~") Q:PT1=""
"RTN","KMPDHU03",75,0)
 ..F  S NM=$O(@GBL1@(DATE,PT,NM)) Q:NM=""  S ND=0 D 
"RTN","KMPDHU03",76,0)
 ...K ERROR,FDA,IEN,ZIEN
"RTN","KMPDHU03",77,0)
 ...; determine if data has already been filed (if ien)
"RTN","KMPDHU03",78,0)
 ...S IEN=$O(^KMPD(8973.1,"APTDTNM",PT1,DATE,NM,0))
"RTN","KMPDHU03",79,0)
 ...;     if filed set IEN="ien," - edit entry
"RTN","KMPDHU03",80,0)
 ...; if not filed set IEN="+1," - add entry
"RTN","KMPDHU03",81,0)
 ...S IEN=$S(IEN:IEN_",",1:"+1,")
"RTN","KMPDHU03",82,0)
 ...S FDA($J,8973.1,IEN,.01)=DATE
"RTN","KMPDHU03",83,0)
 ...S FDA($J,8973.1,IEN,.03)=NM
"RTN","KMPDHU03",84,0)
 ...S FDA($J,8973.1,IEN,.05)=PT1
"RTN","KMPDHU03",85,0)
 ...S FDA($J,8973.1,IEN,.06)=1
"RTN","KMPDHU03",86,0)
 ...F  S ND=$O(@GBL1@(DATE,PT,NM,ND)) Q:'ND  D 
"RTN","KMPDHU03",87,0)
 ....S DATA=@GBL1@(DATE,PT,NM,ND) Q:DATA=""
"RTN","KMPDHU03",88,0)
 ....S INDEX=$S(ND=99:6,ND=99.2:13,ND=99.5:3,$E(ND)=5:24,1:9)
"RTN","KMPDHU03",89,0)
 ....F I=1:1:INDEX S:$P(DATA,U,I)'="" FDA($J,8973.1,IEN,ND+(I*.001))=$P(DATA,U,I)
"RTN","KMPDHU03",90,0)
 ...; file data
"RTN","KMPDHU03",91,0)
 ...D UPDATE^DIE("","FDA($J)","ZIEN","ERROR")
"RTN","KMPDHU03",92,0)
 ...; if error
"RTN","KMPDHU03",93,0)
 ...I $D(ERROR) D 
"RTN","KMPDHU03",94,0)
 ....D MSG^DIALOG("HA",.KMPDERR,60,5,"ERROR")
"RTN","KMPDHU03",95,0)
 ....D EMAIL^KMPDUTL2("CM TOOLS - HL7 DAILY Error","KMPDERR(")
"RTN","KMPDHU03",96,0)
 ;
"RTN","KMPDHU03",97,0)
 Q
"RTN","KMPDHU03",98,0)
 ;
"RTN","KMPDHU03",99,0)
FILE2 ;-- file asynchronous data
"RTN","KMPDHU03",100,0)
 ;
"RTN","KMPDHU03",101,0)
 Q:'$D(@GBL1)
"RTN","KMPDHU03",102,0)
 ;
"RTN","KMPDHU03",103,0)
 N CF,DATE,ERROR,I,IEN,INDEX1,INDEX2,KMPDERR,NM,PT,PT1,ZIEN
"RTN","KMPDHU03",104,0)
 ;
"RTN","KMPDHU03",105,0)
 K ^TMP($J,"KMPDHU03-F2")
"RTN","KMPDHU03",106,0)
 S DATE=0
"RTN","KMPDHU03",107,0)
 F  S DATE=$O(@GBL1@(DATE)) Q:'DATE  S PT="" D 
"RTN","KMPDHU03",108,0)
 .F  S PT=$O(@GBL1@(DATE,PT)) Q:PT=""  S NM="" D 
"RTN","KMPDHU03",109,0)
 ..; remove ien (name~123) from protocol
"RTN","KMPDHU03",110,0)
 ..S PT1=$P(PT,"~") Q:PT1=""
"RTN","KMPDHU03",111,0)
 ..F  S NM=$O(@GBL1@(DATE,PT,NM)) Q:NM=""  S CF="" D 
"RTN","KMPDHU03",112,0)
 ...F  S CF=$O(@GBL1@(DATE,PT,NM,CF)) Q:CF=""  S ND=0 D 
"RTN","KMPDHU03",113,0)
 ....K ERROR,IEN,ZIEN,^TMP($J,"KMPDHU03-F2"),^TMP($J,"KMPDHU03-ERROR")
"RTN","KMPDHU03",114,0)
 ....; determine if data has already been filed (if ien)
"RTN","KMPDHU03",115,0)
 ....S IEN=$O(^KMPD(8973.1,"ACSDTPRNM",CF,DATE,PT1,NM,0))
"RTN","KMPDHU03",116,0)
 ....;     if filed set IEN="ien," - edit entry
"RTN","KMPDHU03",117,0)
 ....; if not filed set IEN="+1," - add entry
"RTN","KMPDHU03",118,0)
 ....S IEN=$S(IEN:IEN_",",1:"+1,")
"RTN","KMPDHU03",119,0)
 ....; date
"RTN","KMPDHU03",120,0)
 ....S ^TMP($J,"KMPDHU03-F2",8973.1,IEN,.01)=DATE
"RTN","KMPDHU03",121,0)
 ....; namespace
"RTN","KMPDHU03",122,0)
 ....S ^TMP($J,"KMPDHU03-F2",8973.1,IEN,.03)=NM
"RTN","KMPDHU03",123,0)
 ....; protocol
"RTN","KMPDHU03",124,0)
 ....S ^TMP($J,"KMPDHU03-F2",8973.1,IEN,.05)=PT1
"RTN","KMPDHU03",125,0)
 ....; 2 = asynchronous
"RTN","KMPDHU03",126,0)
 ....S ^TMP($J,"KMPDHU03-F2",8973.1,IEN,.06)=2
"RTN","KMPDHU03",127,0)
 ....F  S ND=$O(@GBL1@(DATE,PT,NM,CF,ND)) Q:'ND  D 
"RTN","KMPDHU03",128,0)
 .....S DATA=@GBL1@(DATE,PT,NM,CF,ND) Q:DATA=""
"RTN","KMPDHU03",129,0)
 .....; starting index
"RTN","KMPDHU03",130,0)
 .....S INDEX1=1 ;$S($E(ND)=5:9,1:1)
"RTN","KMPDHU03",131,0)
 .....; ending index
"RTN","KMPDHU03",132,0)
 .....S INDEX2=$S(ND=99:6,ND=99.2:13,ND=99.3:9,ND=99.5:3,$E(ND)=5:24,$E(ND)=6:24,1:0)
"RTN","KMPDHU03",133,0)
 .....Q:'INDEX2
"RTN","KMPDHU03",134,0)
 .....F I=INDEX1:1:INDEX2 S:$P(DATA,U,I)'="" ^TMP($J,"KMPDHU03-F2",8973.1,IEN,ND+(I*.001))=$P(DATA,U,I)
"RTN","KMPDHU03",135,0)
 ....;file data
"RTN","KMPDHU03",136,0)
 ....D UPDATE^DIE("",$NA(^TMP($J,"KMPDHU03-F2")),"ZIEN","ERROR")
"RTN","KMPDHU03",137,0)
 ....; if error
"RTN","KMPDHU03",138,0)
 ....I $D(ERROR) D 
"RTN","KMPDHU03",139,0)
 .....D MSG^DIALOG("HA",.KMPDERR,60,5,"ERROR")
"RTN","KMPDHU03",140,0)
 .....D EMAIL^KMPDUTL2("CM TOOLS - HL7 DAILY Error","KMPDERR(")
"RTN","KMPDHU03",141,0)
 ;
"RTN","KMPDHU03",142,0)
 K ^TMP($J,"KMPDHU03-F2")
"RTN","KMPDHU03",143,0)
 ;
"RTN","KMPDHU03",144,0)
 Q
"RTN","KMPDHU03",145,0)
 ;
"RTN","KMPDHU03",146,0)
PTNP(DATE) ;-extrinsic function - determine if date.hr is prime time or non-prime time
"RTN","KMPDHU03",147,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU03",148,0)
 ; DATE.... Date.Time in internal FileMan format
"RTN","KMPDHU03",149,0)
 ;
"RTN","KMPDHU03",150,0)
 ; Return: 1 - prime time
"RTN","KMPDHU03",151,0)
 ;         2 - non-prime time
"RTN","KMPDHU03",152,0)
 ;        "" - unable to identify
"RTN","KMPDHU03",153,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDHU03",154,0)
 Q:'$G(DATE) ""
"RTN","KMPDHU03",155,0)
 N DOW,HOUR
"RTN","KMPDHU03",156,0)
 ; day of week in numeric format
"RTN","KMPDHU03",157,0)
 S DOW=$$DOW^XLFDT(DATE,1)
"RTN","KMPDHU03",158,0)
 ; hours
"RTN","KMPDHU03",159,0)
 S HOUR=$E($P(DATE,".",2),1,2)
"RTN","KMPDHU03",160,0)
 ; prime time - not saturday or sunday or holiday and between the hours
"RTN","KMPDHU03",161,0)
 ;              of 8am (0800) to 5 pm (1700)
"RTN","KMPDHU03",162,0)
 Q:DOW'=0&(DOW'=6)&('$G(^HOLIDAY($P(DATE,"."),0)))&(HOUR>7)&(HOUR<17) 1
"RTN","KMPDHU03",163,0)
 ; non-prime time
"RTN","KMPDHU03",164,0)
 Q 2
"RTN","KMPDHUA")
0^5^B41047112
"RTN","KMPDHUA",1,0)
KMPDHUA ;OAK/RAK - Remote Synchronous HL7 Protocol ;3/15/04  07:48
"RTN","KMPDHUA",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDHUA",3,0)
 ;
"RTN","KMPDHUA",4,0)
EN ;-entry point
"RTN","KMPDHUA",5,0)
 ;
"RTN","KMPDHUA",6,0)
 N DIC,I,KMPDATE,KMPDNMSP,KMPDPROT,KMPDSRCH,POP,X,Y
"RTN","KMPDHUA",7,0)
 N ZTDESC,ZTRTN,ZTSAVE,ZTSK,%ZIS
"RTN","KMPDHUA",8,0)
 ;
"RTN","KMPDHUA",9,0)
 ; option header
"RTN","KMPDHUA",10,0)
 D HDR^KMPDUTL4(" Synchronous Remote Protocol Distribution ") W !!
"RTN","KMPDHUA",11,0)
 ; select protocol
"RTN","KMPDHUA",12,0)
 S DIC=101,DIC(0)="AELMQZ",DIC("A")="Select Protocol: "
"RTN","KMPDHUA",13,0)
 D ^DIC Q:(+Y)<0  S KMPDPROT=Y
"RTN","KMPDHUA",14,0)
 ;
"RTN","KMPDHUA",15,0)
 ; select namespace (package file)
"RTN","KMPDHUA",16,0)
 D NMSPARRY(.KMPDNMSP) Q:'$D(KMPDNMSP)
"RTN","KMPDHUA",17,0)
 ;
"RTN","KMPDHUA",18,0)
 ; select date range
"RTN","KMPDHUA",19,0)
 D DATERNG^KMPDUTL2(.KMPDATE) Q:'KMPDATE
"RTN","KMPDHUA",20,0)
 ;
"RTN","KMPDHUA",21,0)
 ; element to rate protocols
"RTN","KMPDHUA",22,0)
 K DIR
"RTN","KMPDHUA",23,0)
 S DIR(0)="SO^1:Message Size;2:Character Transmission Rate;3:Message Transmission Rate"
"RTN","KMPDHUA",24,0)
 S DIR("B")=1
"RTN","KMPDHUA",25,0)
 D ^DIR Q:$G(Y)=""!($G(Y)="^")
"RTN","KMPDHUA",26,0)
 S KMPDSRCH=$S(Y:Y_"^"_$G(Y(0)),1:Y)
"RTN","KMPDHUA",27,0)
 ;
"RTN","KMPDHUA",28,0)
 ; select output device.
"RTN","KMPDHUA",29,0)
 S %ZIS="Q",%ZIS("A")="Device: ",%ZIS("B")="HOME"
"RTN","KMPDHUA",30,0)
 W ! D ^%ZIS I POP W !,"No action taken." Q
"RTN","KMPDHUA",31,0)
 ; if queued.
"RTN","KMPDHUA",32,0)
 I $D(IO("Q")) K IO("Q") D  Q
"RTN","KMPDHUA",33,0)
 .S ZTDESC="Synchronous Distribution Report"
"RTN","KMPDHUA",34,0)
 .S ZTRTN="EN1^KMPDHUA"
"RTN","KMPDHUA",35,0)
 .F I="KMPDATE","KMPDNMSP","KMPDPROT","KMPDSRCH" S ZTSAVE(I)=""
"RTN","KMPDHUA",36,0)
 .D ^%ZTLOAD W:$G(ZTSK) !,"Task #",ZTSK
"RTN","KMPDHUA",37,0)
 .D EXIT
"RTN","KMPDHUA",38,0)
 ;
"RTN","KMPDHUA",39,0)
 D EN1
"RTN","KMPDHUA",40,0)
 ;
"RTN","KMPDHUA",41,0)
 Q
"RTN","KMPDHUA",42,0)
 ;
"RTN","KMPDHUA",43,0)
EN1 ;-- entry point from taskman
"RTN","KMPDHUA",44,0)
 ;
"RTN","KMPDHUA",45,0)
 Q:'$G(KMPDATE)
"RTN","KMPDHUA",46,0)
 Q:'$D(KMPDNMSP)
"RTN","KMPDHUA",47,0)
 Q:'$G(KMPDSRCH)
"RTN","KMPDHUA",48,0)
 ;
"RTN","KMPDHUA",49,0)
 N END,ERROR,STR,X
"RTN","KMPDHUA",50,0)
 ;
"RTN","KMPDHUA",51,0)
 S STR=$P(KMPDATE,U),END=$P(KMPDATE,U,2)
"RTN","KMPDHUA",52,0)
 Q:'STR!('END)
"RTN","KMPDHUA",53,0)
 ;
"RTN","KMPDHUA",54,0)
 ; get data from hl7 api
"RTN","KMPDHUA",55,0)
 W:'$D(ZTQUEUED) !,"Gathering HL7 data..."
"RTN","KMPDHUA",56,0)
 K ^TMP("KMPDH",$J),^TMP("KMPDH-1",$J)
"RTN","KMPDHUA",57,0)
 ;
"RTN","KMPDHUA",58,0)
 D DATA,PRINT,EXIT
"RTN","KMPDHUA",59,0)
 ;
"RTN","KMPDHUA",60,0)
 Q
"RTN","KMPDHUA",61,0)
 ;
"RTN","KMPDHUA",62,0)
DATA ;
"RTN","KMPDHUA",63,0)
 ; if 'all' namespaces
"RTN","KMPDHUA",64,0)
 I $G(KMPDNMSP(0))="*" D 
"RTN","KMPDHUA",65,0)
 .S X=$$CMF^HLUCM(STR,END,1,KMPDPROT,"KMPDH","EITHER",.ERROR)
"RTN","KMPDHUA",66,0)
 ; if 'specific' namespaces
"RTN","KMPDHUA",67,0)
 E  D 
"RTN","KMPDHUA",68,0)
 .S X=$$CMF^HLUCM(STR,END,.KMPDNMSP,KMPDPROT,"KMPDH","BOTH",.ERROR)
"RTN","KMPDHUA",69,0)
 ;
"RTN","KMPDHUA",70,0)
 ; determine search list
"RTN","KMPDHUA",71,0)
 S FAC=""
"RTN","KMPDHUA",72,0)
 F  S FAC=$O(^TMP("KMPDH",$J,"RFAC","LR","R",FAC)) Q:FAC=""  D 
"RTN","KMPDHUA",73,0)
 .S NMSP=""
"RTN","KMPDHUA",74,0)
 .F  S NMSP=$O(^TMP("KMPDH",$J,"RFAC","LR","R",FAC,NMSP)) Q:NMSP=""  S TOT=^(NMSP) D 
"RTN","KMPDHUA",75,0)
 ..; 1 - message size = chr/message
"RTN","KMPDHUA",76,0)
 ..; 2 - charater transmission rate - chr/sec/msg
"RTN","KMPDHUA",77,0)
 ..; 3 - message transmission rate - sec/msg
"RTN","KMPDHUA",78,0)
 ..S SRCH=""
"RTN","KMPDHUA",79,0)
 ..I (+KMPDSRCH)=1 S SRCH=$P(TOT,U)/$P(TOT,U,2)
"RTN","KMPDHUA",80,0)
 ..I (+KMPDSRCH)=2 S SRCH=($P(TOT,U)/$P(TOT,U,3))/$P(TOT,U,2)
"RTN","KMPDHUA",81,0)
 ..I (+KMPDSRCH)=3 S SRCH=$P(TOT,U,3)/$P(TOT,U,2)
"RTN","KMPDHUA",82,0)
 ..Q:SRCH=""
"RTN","KMPDHUA",83,0)
 ..S ^TMP("KMPDH-1",$J,SRCH,FAC,NMSP)=""
"RTN","KMPDHUA",84,0)
 ;
"RTN","KMPDHUA",85,0)
 Q
"RTN","KMPDHUA",86,0)
 ;
"RTN","KMPDHUA",87,0)
EXIT ;
"RTN","KMPDHUA",88,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","KMPDHUA",89,0)
 K KMPDATE,KMPDNMSP,KMPDPROT,KMPDSRCH
"RTN","KMPDHUA",90,0)
 K ^TMP("KMPDH",$J),^TMP("KMPDH-1",$J)
"RTN","KMPDHUA",91,0)
 D ^%ZISC
"RTN","KMPDHUA",92,0)
 Q
"RTN","KMPDHUA",93,0)
 ;
"RTN","KMPDHUA",94,0)
PRINT ;-- print sync/facility data
"RTN","KMPDHUA",95,0)
 N DATA,DATE,FAC,I,J,NMSP,PROT,RANK,SRCH
"RTN","KMPDHUA",96,0)
 D HDR
"RTN","KMPDHUA",97,0)
 I '$D(^TMP("KMPDH-1",$J)) W !?5," No Data to Report" Q
"RTN","KMPDHUA",98,0)
 S SRCH="A",RANK=1
"RTN","KMPDHUA",99,0)
 F  S SRCH=$O(^TMP("KMPDH-1",$J,SRCH),-1) Q:'SRCH  D 
"RTN","KMPDHUA",100,0)
 .W !,RANK,".",?5,$J($FN(SRCH,",",$S((+KMPDSRCH)=3:2,1:0)),10)
"RTN","KMPDHUA",101,0)
 .S FAC="",RANK=RANK+1
"RTN","KMPDHUA",102,0)
 .F  S FAC=$O(^TMP("KMPDH-1",$J,SRCH,FAC)) Q:FAC=""  D 
"RTN","KMPDHUA",103,0)
 ..W ?17,$E($P(FAC,"~",2),1,18) S NMSP=""
"RTN","KMPDHUA",104,0)
 ..F  S NMSP=$O(^TMP("KMPDH-1",$J,SRCH,FAC,NMSP)) Q:NMSP=""  D 
"RTN","KMPDHUA",105,0)
 ...W ?37,NMSP S DATE=0 K TOT
"RTN","KMPDHUA",106,0)
 ...F  S DATE=$O(^TMP("KMPDH",$J,"RFAC","LR","R",FAC,NMSP,DATE)) Q:'DATE  D 
"RTN","KMPDHUA",107,0)
 ....S PROT=""
"RTN","KMPDHUA",108,0)
 ....F  S PROT=$O(^TMP("KMPDH",$J,"RFAC","LR","R",FAC,NMSP,DATE,PROT)) Q:PROT=""  S DATA=^(PROT) D 
"RTN","KMPDHUA",109,0)
 .....; tcp/mail/unknown
"RTN","KMPDHUA",110,0)
 .....S DATA("T")=$G(^TMP("KMPDH",$J,"HR","TM","T",FAC,DATE,NMSP,PROT))
"RTN","KMPDHUA",111,0)
 .....S DATA("M")=$G(^TMP("KMPDH",$J,"HR","TM","M",FAC,DATE,NMSP,PROT))
"RTN","KMPDHUA",112,0)
 .....S DATA("TMU")=$G(^TMP("KMPDH",$J,"HR","TM","U",FAC,DATE,NMSP,PROT))
"RTN","KMPDHUA",113,0)
 .....; incoming/outgoing/unknown
"RTN","KMPDHUA",114,0)
 .....S DATA("I")=$G(^TMP("KMPDH",$J,"NMSP","IO","I",FAC,NMSP,DATE,PROT))
"RTN","KMPDHUA",115,0)
 .....S DATA("O")=$G(^TMP("KMPDH",$J,"NMSP","IO","O",FAC,NMSP,DATE,PROT))
"RTN","KMPDHUA",116,0)
 .....S DATA("IOU")=$G(^TMP("KMPDH",$J,"NMSP","IO","U",FAC,NMSP,DATE,PROT))
"RTN","KMPDHUA",117,0)
 .....; calculate sub-totals
"RTN","KMPDHUA",118,0)
 .....F I=1:1:3 D 
"RTN","KMPDHUA",119,0)
 ......S $P(TOT,U,I)=$P($G(TOT),U,I)+$P(DATA,U,I)
"RTN","KMPDHUA",120,0)
 ......S $P(TOT("T"),U,I)=$P($G(TOT("T")),U,I)+$P(DATA("T"),U,I)
"RTN","KMPDHUA",121,0)
 ......S $P(TOT("M"),U,I)=$P($G(TOT("M")),U,I)+$P(DATA("M"),U,I)
"RTN","KMPDHUA",122,0)
 ......S $P(TOT("TMU"),U,I)=$P($G(TOT("TMU")),U,I)+$P(DATA("TMU"),U,I)
"RTN","KMPDHUA",123,0)
 ......S $P(TOT("I"),U,I)=$P($G(TOT("I")),U,I)+$P(DATA("I"),U,I)
"RTN","KMPDHUA",124,0)
 ......S $P(TOT("O"),U,I)=$P($G(TOT("O")),U,I)+$P(DATA("O"),U,I)
"RTN","KMPDHUA",125,0)
 ......S $P(TOT("IOU"),U,I)=$P($G(TOT("IOU")),U,I)+$P(DATA("IOU"),U,I)
"RTN","KMPDHUA",126,0)
 ...;
"RTN","KMPDHUA",127,0)
 ...; back to NMSP level
"RTN","KMPDHUA",128,0)
 ...;
"RTN","KMPDHUA",129,0)
 ...W ?45,$J($FN($P(TOT,U),",",0),9)
"RTN","KMPDHUA",130,0)
 ...W ?56,$J($FN($P(TOT,U,2),",",0),9)
"RTN","KMPDHUA",131,0)
 ...W ?67,$J($FN($P(TOT,U,3),",",0),9)
"RTN","KMPDHUA",132,0)
 ...W !
"RTN","KMPDHUA",133,0)
 ...F I="T","M","TMU","I","O","IOU" D 
"RTN","KMPDHUA",134,0)
 ....W ! W:I="I"!(I="L") !
"RTN","KMPDHUA",135,0)
 ....W ?21,$S(I="T":"TCP",I="M":"Mail",I="TMU":"T/M Unknown",1:"")
"RTN","KMPDHUA",136,0)
 ....W ?21,$S(I="I":"Incoming",I="O":"Outgoing",I="IOU":"I/O Unknown",1:"")
"RTN","KMPDHUA",137,0)
 ....F J=1:1:3 W ?$S(J=1:45,J=2:56,1:67),$J($FN($P($G(TOT(I)),U,J),",",0),9)
"RTN","KMPDHUA",138,0)
 ..W !
"RTN","KMPDHUA",139,0)
 ;
"RTN","KMPDHUA",140,0)
 Q
"RTN","KMPDHUA",141,0)
 ;
"RTN","KMPDHUA",142,0)
HDR ;
"RTN","KMPDHUA",143,0)
 S KMPDATE=$G(KMPDATE)
"RTN","KMPDHUA",144,0)
 S KMPDPROT=$G(KMPDPROT)
"RTN","KMPDHUA",145,0)
 S KMPDSRCH=$G(KMPDSRCH)
"RTN","KMPDHUA",146,0)
 W @IOF
"RTN","KMPDHUA",147,0)
 N X
"RTN","KMPDHUA",148,0)
 S X=$$SITE^VASITE,X=$P(X,U,2)_" ("_$P(X,U)_")"
"RTN","KMPDHUA",149,0)
 W !?(80-$L(X)\2),X,?62,"Printed: ",$$FMTE^XLFDT(DT,2)
"RTN","KMPDHUA",150,0)
 W !?21,"Synchronous Remote Protocol Distribution"
"RTN","KMPDHUA",151,0)
 S X="'"_$P(KMPDPROT,"^",2)_"'"
"RTN","KMPDHUA",152,0)
 W !?((80-$L(X))\2),X
"RTN","KMPDHUA",153,0)
 S X=$P($P(KMPDATE,U,3),"@")_": "_$P($P(KMPDATE,U,3),"@",2)
"RTN","KMPDHUA",154,0)
 S X=X_" - "_$P($P(KMPDATE,U,4),"@")_": "_$P($P(KMPDATE,U,4),"@",2)
"RTN","KMPDHUA",155,0)
 W !?(80-$L(X)\2),X
"RTN","KMPDHUA",156,0)
 S X=$P(KMPDSRCH,U)_" - "_$P(KMPDSRCH,U,2)
"RTN","KMPDHUA",157,0)
 W !?((80-$L(X))\2),X
"RTN","KMPDHUA",158,0)
 S X=$S((+KMPDSRCH)=1:"  Chr/Msg",(+KMPDSRCH)=2:"Ch/Sc/Mg",(+KMPDSRCH)=3:"  Sec/Msg",1:"OTHER")
"RTN","KMPDHUA",159,0)
 W !
"RTN","KMPDHUA",160,0)
 W !,"Rank",?6,X,?17,"Remote Facility",?37,"Nmsp",?45,$J("Chrs",9),?56,$J("Messages",9),?67,$J("Seconds",9)
"RTN","KMPDHUA",161,0)
 W !,"----",?6,"---------",?17,"------------------",?37,"----",?45,"---------",?56,"---------",?67,"---------"
"RTN","KMPDHUA",162,0)
 ;
"RTN","KMPDHUA",163,0)
 Q
"RTN","KMPDHUA",164,0)
 ;
"RTN","KMPDHUA",165,0)
NMSPARRY(KMPDNMSP) ;-- namespace arry
"RTN","KMPDHUA",166,0)
 K KMPDNMSP
"RTN","KMPDHUA",167,0)
 N DIC,NM1,NMSP,PKG,X,Y
"RTN","KMPDHUA",168,0)
 S DIC=9.4,DIC(0)="AEMQZ",DIC("A")="Select Namespace: "
"RTN","KMPDHUA",169,0)
 W ! D SELECT^KMPDUT4("KMPDNMSP",1,5)
"RTN","KMPDHUA",170,0)
 Q:$G(KMPDNMSP(0))=""
"RTN","KMPDHUA",171,0)
 Q:KMPDNMSP(0)'="*"&($O(KMPDNMSP(0))="")
"RTN","KMPDHUA",172,0)
 I KMPDNMSP(0)'="*" K KMPDNMSP(0),NM1 D 
"RTN","KMPDHUA",173,0)
 .S I="" F  S I=$O(KMPDNMSP(I)) Q:I=""  S PKG=KMPDNMSP(I) D:PKG 
"RTN","KMPDHUA",174,0)
 ..S NMSP=$P($G(^DIC(9.4,PKG,0)),U,2)
"RTN","KMPDHUA",175,0)
 ..S:NMSP'="" NM1(NMSP)=PKG
"RTN","KMPDHUA",176,0)
 ..K KMPDNMSP(I)
"RTN","KMPDHUA",177,0)
 .M KMPDNMSP=NM1
"RTN","KMPDHUA",178,0)
 ;
"RTN","KMPDHUA",179,0)
 Q
"RTN","KMPDPOST")
0^6^B12515134
"RTN","KMPDPOST",1,0)
KMPDPOST ;OAK/RAK - CM Tools Post Install ;2/17/04  09:02
"RTN","KMPDPOST",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDPOST",3,0)
 ;
"RTN","KMPDPOST",4,0)
EN ;-entry point
"RTN","KMPDPOST",5,0)
 N DATA,ERROR,FDA,IEN,MSG,NOW,SITE,VERSION
"RTN","KMPDPOST",6,0)
 ;
"RTN","KMPDPOST",7,0)
 ; make sure background job is scheduled to run
"RTN","KMPDPOST",8,0)
 D QUEBKG^KMPDUTL("KMPD BACKGROUND DRIVER","T@0130","1D",0)
"RTN","KMPDPOST",9,0)
 ;
"RTN","KMPDPOST",10,0)
 ; remove zero node from ^xtmp("kmpd"
"RTN","KMPDPOST",11,0)
 K ^XTMP("KMPD")
"RTN","KMPDPOST",12,0)
 ;
"RTN","KMPDPOST",13,0)
 D FILE,CPU
"RTN","KMPDPOST",14,0)
 ;
"RTN","KMPDPOST",15,0)
 ; start timing collection
"RTN","KMPDPOST",16,0)
 I $G(XPDQUES("POSTIMING")) D 
"RTN","KMPDPOST",17,0)
 .S ^KMPTMP("KMPD-CPRS")=1
"RTN","KMPDPOST",18,0)
 .D MES^XPDUTL("     Timing Collection has been started!")
"RTN","KMPDPOST",19,0)
 ;
"RTN","KMPDPOST",20,0)
 Q
"RTN","KMPDPOST",21,0)
 ;
"RTN","KMPDPOST",22,0)
CPU ;-update cpu data
"RTN","KMPDPOST",23,0)
 Q:'$O(^KMPD(8973,0))
"RTN","KMPDPOST",24,0)
 D CPUSET^KMPDUTL6(1)
"RTN","KMPDPOST",25,0)
 Q
"RTN","KMPDPOST",26,0)
 ;
"RTN","KMPDPOST",27,0)
FILE ;-populate cp parameters file
"RTN","KMPDPOST",28,0)
 ; quit if file entry present
"RTN","KMPDPOST",29,0)
 Q:$O(^KMPD(8973,0))
"RTN","KMPDPOST",30,0)
 D MES^XPDUTL("     Populating file #8973 - CP PARAMETERS...")
"RTN","KMPDPOST",31,0)
 S SITE=$$SITE^VASITE,VERSION=$$VERSION^KMPDUTL,NOW=$$NOW^XLFDT
"RTN","KMPDPOST",32,0)
 S FDA($J,8973,"+1,",.01)="573"
"RTN","KMPDPOST",33,0)
 S FDA($J,8973,"+1,",.02)=$P(VERSION,U)
"RTN","KMPDPOST",34,0)
 S FDA($J,8973,"+1,",.03)=NOW
"RTN","KMPDPOST",35,0)
 S FDA($J,8973,"+1,",.04)=$P(VERSION,U,2)
"RTN","KMPDPOST",36,0)
 S FDA($J,8973,"+1,",.05)=NOW
"RTN","KMPDPOST",37,0)
 ; rum data
"RTN","KMPDPOST",38,0)
 S VERSION=$$VERSION^KMPRUTL
"RTN","KMPDPOST",39,0)
 S FDA($J,8973,"+1,",2.01)=$P(VERSION,U)
"RTN","KMPDPOST",40,0)
 S FDA($J,8973,"+1,",2.03)=$P(VERSION,U,2)
"RTN","KMPDPOST",41,0)
 ; hl7 data
"RTN","KMPDPOST",42,0)
 S DATA=$G(^KMPTMP("KMPD","BACKGROUND","HL7","DLY","TOTAL","START"))_U_$G(^("END"))_U_$G(^("DELTA"))
"RTN","KMPDPOST",43,0)
 S FDA($J,8973,"+1,",3.05)=$P(DATA,U)
"RTN","KMPDPOST",44,0)
 S FDA($J,8973,"+1,",3.06)=$P(DATA,U,2)
"RTN","KMPDPOST",45,0)
 S FDA($J,8973,"+1,",3.07)=$P(DATA,U,3)
"RTN","KMPDPOST",46,0)
 S DATA=$G(^KMPTMP("KMPD","BACKGROUND","HL7","WKY","TOTAL","START"))_U_$G(^("END"))_U_$G(^("DELTA"))
"RTN","KMPDPOST",47,0)
 S FDA($J,8973,"+1,",3.08)=$P(DATA,U)
"RTN","KMPDPOST",48,0)
 S FDA($J,8973,"+1,",3.09)=$P(DATA,U,2)
"RTN","KMPDPOST",49,0)
 S FDA($J,8973,"+1,",3.1)=$P(DATA,U,3)
"RTN","KMPDPOST",50,0)
 S FDA($J,8973,"+1,",3.11)=2
"RTN","KMPDPOST",51,0)
 S DATA=$G(^KMPTMP("KMPD","BACKGROUND","HL7","DLY","PURGE","START"))_U_$G(^("END"))_U_$G(^("DELTA"))
"RTN","KMPDPOST",52,0)
 S FDA($J,8973,"+1,",3.12)=$P(DATA,U)
"RTN","KMPDPOST",53,0)
 S FDA($J,8973,"+1,",3.13)=$P(DATA,U,2)
"RTN","KMPDPOST",54,0)
 S FDA($J,8973,"+1,",3.14)=$P(DATA,U,3)
"RTN","KMPDPOST",55,0)
 S DATA=$G(^KMPTMP("KMPD","BACKGROUND","HL7","WKY","PURGE","START"))_U_$G(^("END"))_U_$G(^("DELTA"))
"RTN","KMPDPOST",56,0)
 S FDA($J,8973,"+1,",3.15)=$P(DATA,U)
"RTN","KMPDPOST",57,0)
 S FDA($J,8973,"+1,",3.16)=$P(DATA,U,2)
"RTN","KMPDPOST",58,0)
 S FDA($J,8973,"+1,",3.17)=$P(DATA,U,3)
"RTN","KMPDPOST",59,0)
 ; timing data
"RTN","KMPDPOST",60,0)
 S DATA=$G(^KMPTMP("KMPD","BACKGROUND","TMG","DLY","TOTAL","START"))_U_$G(^("END"))_U_$G(^("DELTA"))
"RTN","KMPDPOST",61,0)
 S FDA($J,8973,"+1,",4.05)=$P(DATA,U)
"RTN","KMPDPOST",62,0)
 S FDA($J,8973,"+1,",4.06)=$P(DATA,U,2)
"RTN","KMPDPOST",63,0)
 S FDA($J,8973,"+1,",4.07)=$P(DATA,U,3)
"RTN","KMPDPOST",64,0)
 S DATA=$G(^KMPTMP("KMPD","BACKGROUND","TMG","WKY","TOTAL","START"))_U_$G(^("END"))_U_$G(^("DELTA"))
"RTN","KMPDPOST",65,0)
 S FDA($J,8973,"+1,",4.08)=$P(DATA,U)
"RTN","KMPDPOST",66,0)
 S FDA($J,8973,"+1,",4.09)=$P(DATA,U,2)
"RTN","KMPDPOST",67,0)
 S FDA($J,8973,"+1,",4.1)=$P(DATA,U,3)
"RTN","KMPDPOST",68,0)
 S FDA($J,8973,"+1,",4.11)=4
"RTN","KMPDPOST",69,0)
 S DATA=$G(^KMPTMP("KMPD","BACKGROUND","TMG","DLY","PURGE","START"))_U_$G(^("END"))_U_$G(^("DELTA"))
"RTN","KMPDPOST",70,0)
 S FDA($J,8973,"+1,",4.12)=$P(DATA,U)
"RTN","KMPDPOST",71,0)
 S FDA($J,8973,"+1,",4.13)=$P(DATA,U,2)
"RTN","KMPDPOST",72,0)
 S FDA($J,8973,"+1,",4.14)=$P(DATA,U,3)
"RTN","KMPDPOST",73,0)
 S DATA=$G(^KMPTMP("KMPD","BACKGROUND","TMG","WKY","PURGE","START"))_U_$G(^("END"))_U_$G(^("DELTA"))
"RTN","KMPDPOST",74,0)
 S FDA($J,8973,"+1,",4.15)=$P(DATA,U)
"RTN","KMPDPOST",75,0)
 S FDA($J,8973,"+1,",4.16)=$P(DATA,U,2)
"RTN","KMPDPOST",76,0)
 S FDA($J,8973,"+1,",4.17)=$P(DATA,U,3)
"RTN","KMPDPOST",77,0)
 ;
"RTN","KMPDPOST",78,0)
 D UPDATE^DIE("","FDA($J)","IEN","ERROR")
"RTN","KMPDPOST",79,0)
 ; if error abort install
"RTN","KMPDPOST",80,0)
 I $D(ERROR) D MSG^DIALOG("W","",60,10,"ERROR") Q
"RTN","KMPDPOST",81,0)
 ;
"RTN","KMPDPOST",82,0)
 D MES^XPDUTL("     Complete!")
"RTN","KMPDPOST",83,0)
 ;
"RTN","KMPDPOST",84,0)
 ; remove background/purge data from ^kmptmp
"RTN","KMPDPOST",85,0)
 K ^KMPTMP("KMPD","BACKGROUND")
"RTN","KMPDPOST",86,0)
 ;
"RTN","KMPDPOST",87,0)
 Q
"RTN","KMPDSS")
0^7^B4666656
"RTN","KMPDSS",1,0)
KMPDSS ;OAK/RAK - CM Tools Status ;2/17/04  09:04
"RTN","KMPDSS",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDSS",3,0)
 ;
"RTN","KMPDSS",4,0)
EN ;-entry point
"RTN","KMPDSS",5,0)
 ;
"RTN","KMPDSS",6,0)
 D DISPLAY^KMPDSSA
"RTN","KMPDSS",7,0)
 ;
"RTN","KMPDSS",8,0)
 Q
"RTN","KMPDSS",9,0)
 ;
"RTN","KMPDSS",10,0)
VERDSPL(KMPDPKG) ;--display routine version info
"RTN","KMPDSS",11,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDSS",12,0)
 ; KMPDPKG... CM Package:
"RTN","KMPDSS",13,0)
 ;            "D" - CM Tools
"RTN","KMPDSS",14,0)
 ;            "R" - RUM
"RTN","KMPDSS",15,0)
 ;            "S" - SAGG
"RTN","KMPDSS",16,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDSS",17,0)
 Q:$G(KMPDPKG)=""
"RTN","KMPDSS",18,0)
 Q:KMPDPKG'="D"&(KMPDPKG'="R")&(KMPDPKG'="S")
"RTN","KMPDSS",19,0)
 N I,X
"RTN","KMPDSS",20,0)
 ; routine check
"RTN","KMPDSS",21,0)
 D VERPTCH^KMPDUTL1(KMPDPKG,.X)
"RTN","KMPDSS",22,0)
 W !?5,$S(KMPDPKG="D":"CM TOOLS",KMPDPKG="R":"RUM",1:"SAGG")
"RTN","KMPDSS",23,0)
 W " routines",$$REPEAT^XLFSTR(".",28-$X),": "
"RTN","KMPDSS",24,0)
 I '$P($G(X(0)),U,3) W "No Problems"
"RTN","KMPDSS",25,0)
 E  D 
"RTN","KMPDSS",26,0)
 .W !?20,"Current Version",?55,"Should be"
"RTN","KMPDSS",27,0)
 .S I=0 F  S I=$O(X(I)) Q:I=""  I $P(X(I),U) D 
"RTN","KMPDSS",28,0)
 ..W !?3,I,?20,$P(X(I),U,4)
"RTN","KMPDSS",29,0)
 ..W:$P(X(I),U,5)]"" " - ",$P(X(I),U,5)
"RTN","KMPDSS",30,0)
 ..W ?55,$P(X(I),U,2)
"RTN","KMPDSS",31,0)
 ..W:$P(X(I),U,3)]"" " - ",$P(X(I),U,3)
"RTN","KMPDSS",32,0)
 Q
"RTN","KMPDSS",33,0)
 ;
"RTN","KMPDSS",34,0)
PRM ;-- edit parameters file
"RTN","KMPDSS",35,0)
 ;
"RTN","KMPDSS",36,0)
 N DDSFILE,DR,DA
"RTN","KMPDSS",37,0)
 ;
"RTN","KMPDSS",38,0)
 S DA=$O(^KMPD(8973,0)) Q:'DA
"RTN","KMPDSS",39,0)
 S DDSFILE=8973,DR="[KMPD PARAMETERS EDIT]" D ^DDS
"RTN","KMPDSS",40,0)
 ;
"RTN","KMPDSS",41,0)
 Q
"RTN","KMPDSS",42,0)
 ;
"RTN","KMPDSS",43,0)
SST ;-- start/stop coversheet collection
"RTN","KMPDSS",44,0)
 ; check for cprs patch
"RTN","KMPDSS",45,0)
 I '$$PATCH^XPDUTL("OR*3.0*209") D  Q
"RTN","KMPDSS",46,0)
 .W !! D EN^DDIOL($C(7)_"*** Patch OR*3.0*209 must be installed for CPRS Timing data to be collected ***")
"RTN","KMPDSS",47,0)
 ;
"RTN","KMPDSS",48,0)
 N DIR,STAT,X,Y
"RTN","KMPDSS",49,0)
 S STAT=$G(^KMPTMP("KMPD-CPRS"))
"RTN","KMPDSS",50,0)
 W !!!,"Timing Collection is currently [ ",$S(STAT:"Running",1:"STOPPED")," ]",!
"RTN","KMPDSS",51,0)
 S DIR(0)="YO",DIR("B")="N"
"RTN","KMPDSS",52,0)
 S DIR("A")="Do you want to '"_$S(STAT:"Stop",1:"Start")_"' the collection"
"RTN","KMPDSS",53,0)
 D ^DIR Q:'Y
"RTN","KMPDSS",54,0)
 S ^KMPTMP("KMPD-CPRS")=$S(STAT:"",1:1)
"RTN","KMPDSS",55,0)
 W !!,"Timing Collection has been [ ",$S(STAT:"STOPPED",1:"Started")," ]"
"RTN","KMPDSS",56,0)
 Q
"RTN","KMPDSSA")
0^38^B52667026
"RTN","KMPDSSA",1,0)
KMPDSSA ;OAK/RAK - CM Tools Status ;2/17/04  09:06
"RTN","KMPDSSA",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDSSA",3,0)
 ;
"RTN","KMPDSSA",4,0)
DISPLAY ;-display environment data
"RTN","KMPDSSA",5,0)
 ;
"RTN","KMPDSSA",6,0)
 N HDR,TMP
"RTN","KMPDSSA",7,0)
 ;
"RTN","KMPDSSA",8,0)
 D FORMAT
"RTN","KMPDSSA",9,0)
 D HDR^KMPDUTL4(HDR)
"RTN","KMPDSSA",10,0)
 D DISPLAY^KMPDUT5("TMP(",3)
"RTN","KMPDSSA",11,0)
 ;
"RTN","KMPDSSA",12,0)
 Q
"RTN","KMPDSSA",13,0)
 ;
"RTN","KMPDSSA",14,0)
FORMAT ;-format text for dislay
"RTN","KMPDSSA",15,0)
 ;
"RTN","KMPDSSA",16,0)
 N LN,VERSION S LN=0 K TMP
"RTN","KMPDSSA",17,0)
 ;
"RTN","KMPDSSA",18,0)
 ; if no kmpdutl routine
"RTN","KMPDSSA",19,0)
 S X="KMPDUTL" X ^%ZOSF("TEST") I '$T D  Q
"RTN","KMPDSSA",20,0)
 .D SET(.LN,"The CM Tools Package is not installed!")
"RTN","KMPDSSA",21,0)
 ;
"RTN","KMPDSSA",22,0)
 W !," formatting..."
"RTN","KMPDSSA",23,0)
 ; version data
"RTN","KMPDSSA",24,0)
 S VERSION=$$VERSION^KMPDUTL
"RTN","KMPDSSA",25,0)
 ; header text
"RTN","KMPDSSA",26,0)
 S HDR="CM Tools v"_$P(VERSION,U)
"RTN","KMPDSSA",27,0)
 W "."
"RTN","KMPDSSA",28,0)
 ; option data
"RTN","KMPDSSA",29,0)
 D OPT
"RTN","KMPDSSA",30,0)
 W "."
"RTN","KMPDSSA",31,0)
 ; bacground data
"RTN","KMPDSSA",32,0)
 D BKGRND
"RTN","KMPDSSA",33,0)
 W "."
"RTN","KMPDSSA",34,0)
 ; file data
"RTN","KMPDSSA",35,0)
 D FILES
"RTN","KMPDSSA",36,0)
 W "."
"RTN","KMPDSSA",37,0)
 ; routine version check
"RTN","KMPDSSA",38,0)
 D ROUCHK("D")
"RTN","KMPDSSA",39,0)
 W "."
"RTN","KMPDSSA",40,0)
 ; node/cpu data
"RTN","KMPDSSA",41,0)
 D CPU
"RTN","KMPDSSA",42,0)
 W "."
"RTN","KMPDSSA",43,0)
 ; legend
"RTN","KMPDSSA",44,0)
 D LEGEND
"RTN","KMPDSSA",45,0)
 ;
"RTN","KMPDSSA",46,0)
 Q
"RTN","KMPDSSA",47,0)
 ;
"RTN","KMPDSSA",48,0)
OPT ;-- option data
"RTN","KMPDSSA",49,0)
 ;
"RTN","KMPDSSA",50,0)
 N DIR,KMPDX,KMPDX1,TEXT,X,Y
"RTN","KMPDSSA",51,0)
 ;
"RTN","KMPDSSA",52,0)
 ; if background option is missing
"RTN","KMPDSSA",53,0)
 I '$O(^DIC(19,"B","KMPD BACKGROUND DRIVER",0)) D 
"RTN","KMPDSSA",54,0)
 .D SET(.LN,"   The 'CM Tools Background Driver' option [KMPD BACKGROUND DRIVER] is missing!")
"RTN","KMPDSSA",55,0)
 ; background option is present
"RTN","KMPDSSA",56,0)
 E  D 
"RTN","KMPDSSA",57,0)
 .S KMPDX=+$O(^DIC(19,"B","KMPD BACKGROUND DRIVER",0))
"RTN","KMPDSSA",58,0)
 .S KMPDX=+$O(^DIC(19.2,"B",KMPDX,0))
"RTN","KMPDSSA",59,0)
 .; if not scheduled or no task id
"RTN","KMPDSSA",60,0)
 .I 'KMPDX!('$G(^DIC(19.2,+KMPDX,1))) D  Q:'Y
"RTN","KMPDSSA",61,0)
 ..K DIR S DIR(0)="YO",DIR("B")="YES"
"RTN","KMPDSSA",62,0)
 ..S DIR("A")="Do you want to queue this option to run each night at 1:30am"
"RTN","KMPDSSA",63,0)
 ..W ! D ^DIR I 'Y D  Q
"RTN","KMPDSSA",64,0)
 ...D SET(.LN,"   The 'CM Tools Background Driver' [KMPD BACKGROUND DRIVER] is not scheduled")
"RTN","KMPDSSA",65,0)
 ...D SET(.LN,"   to run!"),SET(.LN,"")
"RTN","KMPDSSA",66,0)
 ..D QUEBKG^KMPDUTL("KMPD BACKGROUND DRIVER","T+1@0130","1D",0)
"RTN","KMPDSSA",67,0)
 .S KMPDX=+$O(^DIC(19,"B","KMPD BACKGROUND DRIVER",0))
"RTN","KMPDSSA",68,0)
 .S KMPDX=+$O(^DIC(19.2,"B",KMPDX,0))
"RTN","KMPDSSA",69,0)
 .S KMPDX=$G(^DIC(19.2,KMPDX,0)),KMPDX1=$G(^(1))
"RTN","KMPDSSA",70,0)
 .S $P(KMPDX,U,2)=$$FMTE^XLFDT($P(KMPDX,U,2))
"RTN","KMPDSSA",71,0)
 .D SET(.LN,"   CM Tools Background Driver..: KMPD BACKGROUND DRIVER")
"RTN","KMPDSSA",72,0)
 .D SET(.LN,"   QUEUED TO RUN AT............: "_$P(KMPDX,U,2))
"RTN","KMPDSSA",73,0)
 .D SET(.LN,"   RESCHEDULING FREQUENCY......: "_$P(KMPDX,U,6))
"RTN","KMPDSSA",74,0)
 .D SET(.LN,"   TASK ID.....................: "_+KMPDX1)
"RTN","KMPDSSA",75,0)
 .; user info.
"RTN","KMPDSSA",76,0)
 .S KMPDX1=$G(^%ZTSK(+KMPDX1,0))
"RTN","KMPDSSA",77,0)
 .S TEXT="   QUEUED BY...................: "_$P($G(^VA(200,+$P(KMPDX1,U,3),0)),U)
"RTN","KMPDSSA",78,0)
 .; if user
"RTN","KMPDSSA",79,0)
 .I (+$P(KMPDX1,U,3)) D 
"RTN","KMPDSSA",80,0)
 ..; user 'active' or 'terminated'
"RTN","KMPDSSA",81,0)
 ..S KMPDX1=$$ACTIVE^XUSER(+$P(KMPDX1,U,3))
"RTN","KMPDSSA",82,0)
 ..S TEXT=TEXT_"  ("_$S($P(KMPDX1,U,2)["TERMINATED":"Terminated - "_$$FMTE^XLFDT($P(KMPDX1,U,3),2),1:"Active")_")"
"RTN","KMPDSSA",83,0)
 .D SET(.LN,TEXT)
"RTN","KMPDSSA",84,0)
 ;
"RTN","KMPDSSA",85,0)
 Q
"RTN","KMPDSSA",86,0)
 ;
"RTN","KMPDSSA",87,0)
BKGRND ; hl7 background info
"RTN","KMPDSSA",88,0)
 ;
"RTN","KMPDSSA",89,0)
 N DATA,DELTA,ENDT,STAT,STDT
"RTN","KMPDSSA",90,0)
 ;
"RTN","KMPDSSA",91,0)
 D PARAMS^KMPDUT("DATA") Q:'$D(DATA)
"RTN","KMPDSSA",92,0)
 S DATA(3)=$G(DATA(3)),DATA(4)=$G(DATA(4))
"RTN","KMPDSSA",93,0)
 S STDT=$P(DATA(3),U,5),ENDT=$P(DATA(3),U,6),DELTA=$P(DATA(3),U,7)
"RTN","KMPDSSA",94,0)
 S:$E(DELTA)=" " $E(DELTA)="0"
"RTN","KMPDSSA",95,0)
 D SET(.LN,"")
"RTN","KMPDSSA",96,0)
 D SET(.LN,"   Hl7 Dly Bckgrnd Last Start..: "_$$FMTE^XLFDT(STDT))
"RTN","KMPDSSA",97,0)
 D SET(.LN,"   HL7 Dly Bckgrnd Last Stop...: "_$$FMTE^XLFDT(ENDT))
"RTN","KMPDSSA",98,0)
 D SET(.LN,"   HL7 Dly Bkgrnd Total Time...: "_DELTA)
"RTN","KMPDSSA",99,0)
 S STDT=$P(DATA(3),U,8),ENDT=$P(DATA(3),U,9),DELTA=$P(DATA(3),U,10)
"RTN","KMPDSSA",100,0)
 S:$E(DELTA)=" " $E(DELTA)="0"
"RTN","KMPDSSA",101,0)
 D SET(.LN,"   HL7 Wkly Backgrnd Last Start: "_$$FMTE^XLFDT(STDT))
"RTN","KMPDSSA",102,0)
 D SET(.LN,"   HL7 Wkly Bckgrnd Last Stop..: "_$$FMTE^XLFDT(ENDT))
"RTN","KMPDSSA",103,0)
 D SET(.LN,"   HL7 Wkly Bckgrnd Total Time.: "_DELTA)
"RTN","KMPDSSA",104,0)
 D SET(.LN,"   HL7 Purge Data After........: "_$P(DATA(3),U,11)_" weeks")
"RTN","KMPDSSA",105,0)
 D SET(.LN,"")
"RTN","KMPDSSA",106,0)
 ; timing background info - if available
"RTN","KMPDSSA",107,0)
 I $D(DATA(4)) D 
"RTN","KMPDSSA",108,0)
 .S STAT=$G(^KMPTMP("KMPD-CPRS"))
"RTN","KMPDSSA",109,0)
 .D SET(.LN,"   TMG Collection Status.......: "_$S(STAT:"Running",1:"STOPPED!"))
"RTN","KMPDSSA",110,0)
 .S STDT=$P(DATA(4),U,5),ENDT=$P(DATA(4),U,6),DELTA=$P(DATA(4),U,7)
"RTN","KMPDSSA",111,0)
 .S:$E(DELTA)=" " $E(DELTA)="0"
"RTN","KMPDSSA",112,0)
 .D SET(.LN,"   TMG Dly Bckgrnd Last Start..: "_$$FMTE^XLFDT(STDT))
"RTN","KMPDSSA",113,0)
 .D SET(.LN,"   TMG Dly Bckgrnd Last Stop...: "_$$FMTE^XLFDT(ENDT))
"RTN","KMPDSSA",114,0)
 .D SET(.LN,"   TMG Dly Bkgrnd Total Time...: "_DELTA)
"RTN","KMPDSSA",115,0)
 .S STDT=$P(DATA(4),U,8),ENDT=$P(DATA(4),U,9),DELTA=$P(DATA(4),U,10)
"RTN","KMPDSSA",116,0)
 .S:$E(DELTA)=" " $E(DELTA)="0"
"RTN","KMPDSSA",117,0)
 .D SET(.LN,"   TMG Wkly Backgrnd Last Start: "_$$FMTE^XLFDT(STDT))
"RTN","KMPDSSA",118,0)
 .D SET(.LN,"   TMG Wkly Bckgrnd Last Stop..: "_$$FMTE^XLFDT(ENDT))
"RTN","KMPDSSA",119,0)
 .D SET(.LN,"   TMG Wkly Bckgrnd Total Time.: "_DELTA)
"RTN","KMPDSSA",120,0)
 .D SET(.LN,"   TMG Purge Data After........: "_$P(DATA(4),U,11)_" weeks")
"RTN","KMPDSSA",121,0)
 .D SET(.LN,"")
"RTN","KMPDSSA",122,0)
 ;
"RTN","KMPDSSA",123,0)
 Q
"RTN","KMPDSSA",124,0)
 ;
"RTN","KMPDSSA",125,0)
CPU ;-- cpu/node data
"RTN","KMPDSSA",126,0)
 ;
"RTN","KMPDSSA",127,0)
 N COUNT,DATA,I,LEN,TEXT
"RTN","KMPDSSA",128,0)
 ;
"RTN","KMPDSSA",129,0)
 D CPUGET^KMPDUTL6(.DATA)
"RTN","KMPDSSA",130,0)
 Q:'$D(DATA)
"RTN","KMPDSSA",131,0)
 D SET(.LN,"")
"RTN","KMPDSSA",132,0)
 S TEXT="   Node/CPU Data............: "
"RTN","KMPDSSA",133,0)
 S (COUNT,I,LEN)=0
"RTN","KMPDSSA",134,0)
 F  S I=$O(DATA(I)) Q:'I  D 
"RTN","KMPDSSA",135,0)
 .S COUNT=COUNT+1,DATA=$G(DATA(I,0)) Q:DATA=""
"RTN","KMPDSSA",136,0)
 .; length of node name
"RTN","KMPDSSA",137,0)
 .S:'LEN LEN=$L($P(DATA,U))+2
"RTN","KMPDSSA",138,0)
 .S TEXT=$S(COUNT=1:TEXT,1:$J(" ",30))_$P(DATA,U)
"RTN","KMPDSSA",139,0)
 .S TEXT=TEXT_$J(" ",30-$L(TEXT)+LEN)_$P(DATA,U,2)_" ("_$P(DATA,U,3)_")"
"RTN","KMPDSSA",140,0)
 .D SET(.LN,TEXT)
"RTN","KMPDSSA",141,0)
 ;
"RTN","KMPDSSA",142,0)
 Q
"RTN","KMPDSSA",143,0)
 ;
"RTN","KMPDSSA",144,0)
FILES ;-- file data
"RTN","KMPDSSA",145,0)
 ;
"RTN","KMPDSSA",146,0)
 N TEXT,X
"RTN","KMPDSSA",147,0)
 ;
"RTN","KMPDSSA",148,0)
 D SET(.LN,$J(" ",35)_" # of     Oldest     Recent")
"RTN","KMPDSSA",149,0)
 D SET(.LN,"   File"_$J(" ",28)_"Entries    Date       Date")
"RTN","KMPDSSA",150,0)
 D SET(.LN,"   -------------------------       -------   -------   -------")
"RTN","KMPDSSA",151,0)
 ; cm hl7 data
"RTN","KMPDSSA",152,0)
 ; file name
"RTN","KMPDSSA",153,0)
 S TEXT="   8973.1 - "_$P($G(^DIC(8973.1,0)),U)
"RTN","KMPDSSA",154,0)
 ; number of entries
"RTN","KMPDSSA",155,0)
 S TEXT=TEXT_$J(" ",35-$L(TEXT))_$J($FN($P($G(^KMPD(8973.1,0)),U,4),",",0),7)
"RTN","KMPDSSA",156,0)
 ; oldest date
"RTN","KMPDSSA",157,0)
 S X=$$FMTE^XLFDT(+$O(^KMPD(8973.1,"B",0)),2)
"RTN","KMPDSSA",158,0)
 S X=$S(X=0:"---",1:X)
"RTN","KMPDSSA",159,0)
 S TEXT=TEXT_$J(" ",45-$L(TEXT))_X
"RTN","KMPDSSA",160,0)
 ; current date
"RTN","KMPDSSA",161,0)
 S X=$$FMTE^XLFDT(+$O(^KMPD(8973.1,"B","A"),-1),2)
"RTN","KMPDSSA",162,0)
 S X=$S(X=0:"---",1:X)
"RTN","KMPDSSA",163,0)
 S TEXT=TEXT_$J(" ",55-$L(TEXT))_X
"RTN","KMPDSSA",164,0)
 D SET(.LN,TEXT)
"RTN","KMPDSSA",165,0)
 ;
"RTN","KMPDSSA",166,0)
 ; cm timing data - if available
"RTN","KMPDSSA",167,0)
 I $D(^KMPD(8973.2,0)) D 
"RTN","KMPDSSA",168,0)
 .; file name
"RTN","KMPDSSA",169,0)
 .S TEXT="   8973.2 - "_$P($G(^DIC(8973.2,0)),U)
"RTN","KMPDSSA",170,0)
 .; number of entries
"RTN","KMPDSSA",171,0)
 .S TEXT=TEXT_$J(" ",35-$L(TEXT))_$J($FN($P($G(^KMPD(8973.2,0)),U,4),",",0),7)
"RTN","KMPDSSA",172,0)
 .; oldest date
"RTN","KMPDSSA",173,0)
 .S X=$$FMTE^XLFDT($P(+$O(^KMPD(8973.2,"ASTDTTM",0)),"."),2)
"RTN","KMPDSSA",174,0)
 .S X=$S(X=0:"---",1:X)
"RTN","KMPDSSA",175,0)
 .S TEXT=TEXT_$J(" ",45-$L(TEXT))_X
"RTN","KMPDSSA",176,0)
 .; most recent date
"RTN","KMPDSSA",177,0)
 .S X=$$FMTE^XLFDT($P(+$O(^KMPD(8973.2,"ASTDTTM","A"),-1),"."),2)
"RTN","KMPDSSA",178,0)
 .S X=$S(X=0:"---",1:X)
"RTN","KMPDSSA",179,0)
 .S TEXT=TEXT_$J(" ",55-$L(TEXT))_X
"RTN","KMPDSSA",180,0)
 .D SET(.LN,TEXT)
"RTN","KMPDSSA",181,0)
 ;
"RTN","KMPDSSA",182,0)
 Q
"RTN","KMPDSSA",183,0)
 ;
"RTN","KMPDSSA",184,0)
LEGEND ;-- display legend
"RTN","KMPDSSA",185,0)
 ;
"RTN","KMPDSSA",186,0)
 D SET(.LN,""),SET(.LN,"")
"RTN","KMPDSSA",187,0)
 D SET(.LN,"     HL7 = Health Level Seven")
"RTN","KMPDSSA",188,0)
 D SET(.LN,"     TMG = Timing Data")
"RTN","KMPDSSA",189,0)
 ;
"RTN","KMPDSSA",190,0)
 Q
"RTN","KMPDSSA",191,0)
 ;
"RTN","KMPDSSA",192,0)
ROUCHK(KMPDPKG) ;--display routine version info
"RTN","KMPDSSA",193,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDSSA",194,0)
 ; KMPDPKG... CM Package:
"RTN","KMPDSSA",195,0)
 ;            "D" - CM Tools
"RTN","KMPDSSA",196,0)
 ;            "R" - RUM
"RTN","KMPDSSA",197,0)
 ;            "S" - SAGG
"RTN","KMPDSSA",198,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDSSA",199,0)
 ;
"RTN","KMPDSSA",200,0)
 Q:$G(KMPDPKG)=""
"RTN","KMPDSSA",201,0)
 Q:KMPDPKG'="D"&(KMPDPKG'="R")&(KMPDPKG'="S")
"RTN","KMPDSSA",202,0)
 ;
"RTN","KMPDSSA",203,0)
 N I,TEXT,X
"RTN","KMPDSSA",204,0)
 ;
"RTN","KMPDSSA",205,0)
 ; routine check
"RTN","KMPDSSA",206,0)
 D VERPTCH^KMPDUTL1(KMPDPKG,.X)
"RTN","KMPDSSA",207,0)
 D SET(.LN,"")
"RTN","KMPDSSA",208,0)
 D SET(.LN,"")
"RTN","KMPDSSA",209,0)
 S TEXT="   "_$S(KMPDPKG="D":"CM TOOLS",KMPDPKG="R":"RUM",1:"SAGG")_" routines"
"RTN","KMPDSSA",210,0)
 S TEXT=TEXT_$$REPEAT^XLFSTR(".",28-$L(TEXT))_": "
"RTN","KMPDSSA",211,0)
 I '$P($G(X(0)),U,3) D SET(.LN,TEXT_+X(0)_" Routines - No Problems") Q
"RTN","KMPDSSA",212,0)
 D SET(.LN,TEXT)
"RTN","KMPDSSA",213,0)
 D SET(.LN,$J(" ",20)_"Current Version"_$J(" ",20)_"Should be")
"RTN","KMPDSSA",214,0)
 S I=0 F  S I=$O(X(I)) Q:I=""  I $P(X(I),U) D 
"RTN","KMPDSSA",215,0)
 .S TEXT="   "_I
"RTN","KMPDSSA",216,0)
 .S TEXT=TEXT_$J(" ",20-$L(TEXT))_$P(X(I),U,4)
"RTN","KMPDSSA",217,0)
 .S:$P(X(I),U,5)]"" TEXT=TEXT_" - "_$P(X(I),U,5)
"RTN","KMPDSSA",218,0)
 .S TEXT=TEXT_$J(" ",55-$L(TEXT))_$P(X(I),U,2)
"RTN","KMPDSSA",219,0)
 .S:$P(X(I),U,3)]"" TEXT=TEXT_" - "_$P(X(I),U,3)
"RTN","KMPDSSA",220,0)
 .D SET(.LN,TEXT)
"RTN","KMPDSSA",221,0)
 ;
"RTN","KMPDSSA",222,0)
 Q
"RTN","KMPDSSA",223,0)
 ;
"RTN","KMPDSSA",224,0)
SET(KMPDLN,KMPDATA) ;-set data into tmp( array
"RTN","KMPDSSA",225,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDSSA",226,0)
 ; KMPDLN.... Line number (passed by reference) to be incremented by 1
"RTN","KMPDSSA",227,0)
 ; KMPDATA... Free text data to be stored
"RTN","KMPDSSA",228,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDSSA",229,0)
 ;
"RTN","KMPDSSA",230,0)
 S KMPDLN=$G(KMPDLN)+1,TMP(KMPDLN,0)=$G(KMPDATA)
"RTN","KMPDSSA",231,0)
 ;
"RTN","KMPDSSA",232,0)
 Q
"RTN","KMPDTM")
0^40^B21660210
"RTN","KMPDTM",1,0)
KMPDTM ;OAK/RAK - CM Tools Timing Monitor ;2/17/04  09:21
"RTN","KMPDTM",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDTM",3,0)
 ;
"RTN","KMPDTM",4,0)
EN ;-- entry point
"RTN","KMPDTM",5,0)
 ;
"RTN","KMPDTM",6,0)
 N DIR,X,Y
"RTN","KMPDTM",7,0)
 ;
"RTN","KMPDTM",8,0)
 D HDR^KMPDUTL4(" Timing Data Monitor ")
"RTN","KMPDTM",9,0)
 ;
"RTN","KMPDTM",10,0)
 ; if no data
"RTN","KMPDTM",11,0)
 I $O(^KMPTMP("KMPDT","ORWCV",""))="" D  Q
"RTN","KMPDTM",12,0)
 .W !!?7,"*** There is currently no data in global ^KMPKMPUTMP(""KMPDT"",""ORWCV"") ***"
"RTN","KMPDTM",13,0)
 ;
"RTN","KMPDTM",14,0)
 W !
"RTN","KMPDTM",15,0)
 W !?7,"This option displays CPRS Coversheet time-to-load data, as a"
"RTN","KMPDTM",16,0)
 W !?7,"bar graph, for the current day.  This option can be left"
"RTN","KMPDTM",17,0)
 W !?7,"running on a terminal (if desired).  The monitor is updated"
"RTN","KMPDTM",18,0)
 W !?7,"every 10 minutes (site configurable through the [KMPD PARAM"
"RTN","KMPDTM",19,0)
 W !?7,"EDIT] Edit CP Parameters File option), and displays current"
"RTN","KMPDTM",20,0)
 W !?7,"average time-to-load data starting at midnight.  An alarm"
"RTN","KMPDTM",21,0)
 W !?7,"message is displayed if the average time-to-load exceeds 30"
"RTN","KMPDTM",22,0)
 W !?7,"seconds (site configurable through the [KMPD PARAM EDIT] Edit"
"RTN","KMPDTM",23,0)
 W !?7,"CP Parameters File option)."
"RTN","KMPDTM",24,0)
 W !
"RTN","KMPDTM",25,0)
 S DIR(0)="YO",DIR("A")="Continue",DIR("B")="YES"
"RTN","KMPDTM",26,0)
 W ! D ^DIR Q:Y'=1
"RTN","KMPDTM",27,0)
 ;
"RTN","KMPDTM",28,0)
 ;
"RTN","KMPDTM",29,0)
 W !!,"Compiling timing stats..."
"RTN","KMPDTM",30,0)
 D EN1
"RTN","KMPDTM",31,0)
 ;
"RTN","KMPDTM",32,0)
 Q
"RTN","KMPDTM",33,0)
 ;
"RTN","KMPDTM",34,0)
EN1 ;-- main loop
"RTN","KMPDTM",35,0)
 ;
"RTN","KMPDTM",36,0)
 N KMPUALRT,KMPUTIME,KMPUTMP,OUT
"RTN","KMPDTM",37,0)
 ;
"RTN","KMPDTM",38,0)
 S KMPUALRT=0,KMPUTIME=$$NOW^XLFDT
"RTN","KMPDTM",39,0)
 S OUT=0
"RTN","KMPDTM",40,0)
 F  D  Q:OUT
"RTN","KMPDTM",41,0)
 .D DATA
"RTN","KMPDTM",42,0)
 .D GRAPH
"RTN","KMPDTM",43,0)
 .S OUT=$$FTR Q:OUT
"RTN","KMPDTM",44,0)
 .D EXIT
"RTN","KMPDTM",45,0)
 Q
"RTN","KMPDTM",46,0)
 ;
"RTN","KMPDTM",47,0)
DATA ;-- compile data
"RTN","KMPDTM",48,0)
 ;
"RTN","KMPDTM",49,0)
 N DATA,DATA1,DATE,DELTA,DOT,HOURS,HR,I
"RTN","KMPDTM",50,0)
 ;
"RTN","KMPDTM",51,0)
 K KMPUTMP
"RTN","KMPDTM",52,0)
 S DOT=1,DATE=$$DT^XLFDT
"RTN","KMPDTM",53,0)
 ; array with hours
"RTN","KMPDTM",54,0)
 S HOURS=$$RLTMHR^KMPDTU11(1,0) Q:HOURS=""
"RTN","KMPDTM",55,0)
 F HR=1:1 Q:$P(HOURS,",",HR)=""  S KMPUTMP(HR,0)=""
"RTN","KMPDTM",56,0)
 S I=""
"RTN","KMPDTM",57,0)
 F  S I=$O(^KMPTMP("KMPDT","ORWCV",I)) Q:I=""  S DATA=^(I) I DATA]"" D 
"RTN","KMPDTM",58,0)
 .S DOT=DOT+1 W:('(DOT#1000)) "."
"RTN","KMPDTM",59,0)
 .; start/end date/time in fileman format
"RTN","KMPDTM",60,0)
 .S DATE(1)=$$HTFM^XLFDT($P(DATA,U)),DATE(2)=$$HTFM^XLFDT($P(DATA,U,2))
"RTN","KMPDTM",61,0)
 .Q:'DATE(1)!('DATE(2))
"RTN","KMPDTM",62,0)
 .S DELTA=$$FMDIFF^XLFDT(DATE(2),DATE(1),2)
"RTN","KMPDTM",63,0)
 .S:DELTA<0 DELTA=""
"RTN","KMPDTM",64,0)
 .; determine hour
"RTN","KMPDTM",65,0)
 .S HR=+$E($P(DATE(1),".",2),1,2) Q:HR=""  ;HR="0"
"RTN","KMPDTM",66,0)
 .;Q:'HR
"RTN","KMPDTM",67,0)
 .; quit if not in HOUR() array
"RTN","KMPDTM",68,0)
 .;Q:'$D(HOUR(HR))
"RTN","KMPDTM",69,0)
 .S DATA1="^^^"_DELTA_"^"_$P(DATA,U,3)_"^"_$P(DATA,U,4)_"^^^"_$P($P(I," ",2),"-")
"RTN","KMPDTM",70,0)
 .;
"RTN","KMPDTM",71,0)
 .; quit if no delta
"RTN","KMPDTM",72,0)
 .Q:$P(DATA1,U,4)=""
"RTN","KMPDTM",73,0)
 .; hour
"RTN","KMPDTM",74,0)
 .S $P(KMPUTMP(HR,0),U)=HR
"RTN","KMPDTM",75,0)
 .; total delta
"RTN","KMPDTM",76,0)
 .S $P(KMPUTMP(HR,0),U,2)=$P(KMPUTMP(HR,0),U,2)+$P(DATA1,U,4)
"RTN","KMPDTM",77,0)
 .; count
"RTN","KMPDTM",78,0)
 .S $P(KMPUTMP(HR,0),U,3)=$P(KMPUTMP(HR,0),U,3)+1
"RTN","KMPDTM",79,0)
 ;
"RTN","KMPDTM",80,0)
 ; average
"RTN","KMPDTM",81,0)
 F HR=1:1 S I=$P(HOURS,",",HR) Q:I=""  I $P($G(KMPUTMP(I,0)),U,2) D 
"RTN","KMPDTM",82,0)
 .S $P(KMPUTMP(I,0),U,2)=$FN($P(KMPUTMP(I,0),U,2)/$P(KMPUTMP(I,0),U,3),"",1)
"RTN","KMPDTM",83,0)
 ;
"RTN","KMPDTM",84,0)
 Q
"RTN","KMPDTM",85,0)
 ;
"RTN","KMPDTM",86,0)
FTR() ;-- extrinsic function - footer
"RTN","KMPDTM",87,0)
 N OUT,PROMPT,UTIME,X
"RTN","KMPDTM",88,0)
 ; update time - how often graph will refress itself
"RTN","KMPDTM",89,0)
 S UTIME=$P($G(^KMPD(8973,1,19)),U)
"RTN","KMPDTM",90,0)
 ; value is in minutes and is converted to seconds for timed read
"RTN","KMPDTM",91,0)
 S UTIME=$S(UTIME:UTIME,1:10)*60
"RTN","KMPDTM",92,0)
 S PROMPT="[Q]uit, [U]pdate: "
"RTN","KMPDTM",93,0)
 S OUT=0
"RTN","KMPDTM",94,0)
 F  D  Q:OUT
"RTN","KMPDTM",95,0)
 .S DX=(IOM-$L(PROMPT)\2),DY=(IOSL-1) X IOXY
"RTN","KMPDTM",96,0)
 .W PROMPT R X:UTIME
"RTN","KMPDTM",97,0)
 .S X=$$UP^XLFSTR(X)
"RTN","KMPDTM",98,0)
 .I X="Q"!(X="^")!(X="U")!('$T) S OUT=1
"RTN","KMPDTM",99,0)
 .E  W $C(7) S DY=(IOSL-1) F DX=1:1:IOM W " " X IOXY
"RTN","KMPDTM",100,0)
 W $S(X="Q":"uit",X="^":"Quit",X="U":"pdate",1:"Update")
"RTN","KMPDTM",101,0)
 Q $S(X="Q"!(X="^"):1,1:0)
"RTN","KMPDTM",102,0)
 ;
"RTN","KMPDTM",103,0)
GRAPH ;-- display graph
"RTN","KMPDTM",104,0)
 Q:'$D(KMPUTMP)
"RTN","KMPDTM",105,0)
 N ALERT,DATA,LOADTM,NOW,TITLE,TXT,UPDATE
"RTN","KMPDTM",106,0)
 ; alert time in seconds - if average time-to-load is not less than this
"RTN","KMPDTM",107,0)
 ;                         value an alert will appear on screen
"RTN","KMPDTM",108,0)
 S NOW=$$NOW^XLFDT
"RTN","KMPDTM",109,0)
 S DATA=$G(^KMPD(8973,1,19))
"RTN","KMPDTM",110,0)
 ; if no ALERT set default to 30 seconds
"RTN","KMPDTM",111,0)
 S ALERT=$S($P(DATA,U,2):$P(DATA,U,2),1:30)
"RTN","KMPDTM",112,0)
 ; if not UPDATE default to 10 minutes
"RTN","KMPDTM",113,0)
 S UPDATE=$S($P(DATA,U):$P(DATA,U),1:10)
"RTN","KMPDTM",114,0)
 ; current hour
"RTN","KMPDTM",115,0)
 S HR=+$E($P(NOW,".",2),1,2)
"RTN","KMPDTM",116,0)
 ; current time-to-load value
"RTN","KMPDTM",117,0)
 S:HR&($D(KMPUTMP(HR))) LOADTM=$P(KMPUTMP(HR,0),U,2)
"RTN","KMPDTM",118,0)
 ; determine if is now an alert condition
"RTN","KMPDTM",119,0)
 S KMPUALRT=$S(LOADTM>ALERT:1,1:0)
"RTN","KMPDTM",120,0)
 ;
"RTN","KMPDTM",121,0)
 ; if load time is greater than alert time
"RTN","KMPDTM",122,0)
 I KMPUALRT S TXT(1,0)=$C(7)_"ALERT!!! - Current Average Time-To-Load exceeds '"_ALERT_" seconds'"
"RTN","KMPDTM",123,0)
 ; else
"RTN","KMPDTM",124,0)
 E  S TXT(1,0)=""
"RTN","KMPDTM",125,0)
 ;
"RTN","KMPDTM",126,0)
 S TXT(2,0)=""
"RTN","KMPDTM",127,0)
 S TXT(3,0)="Last Updated: "_$P($$FMTE^XLFDT(NOW),"@",2)_"  > "
"RTN","KMPDTM",128,0)
 S TXT(3,0)=TXT(3,0)_"Monitor will be updated every "_UPDATE_" min."
"RTN","KMPDTM",129,0)
 I $G(KMPUTIME) D 
"RTN","KMPDTM",130,0)
 .S TXT(4,0)="Running Time: "_$$FMDIFF^XLFDT(NOW,KMPUTIME,3)_"  > "
"RTN","KMPDTM",131,0)
 .S TXT(4,0)=TXT(4,0)_"ALERT will display if Load Time exceeds "_ALERT_" sec."
"RTN","KMPDTM",132,0)
 S TITLE="Timing Data Monitor^CPRS Coversheet^Load Time (Sec)^Hour"
"RTN","KMPDTM",133,0)
 ;
"RTN","KMPDTM",134,0)
 D EN^KMPDUG("KMPUTMP",TITLE,"DV","","TXT",1,40)
"RTN","KMPDTM",135,0)
 ;
"RTN","KMPDTM",136,0)
 Q
"RTN","KMPDTM",137,0)
 ;
"RTN","KMPDTM",138,0)
EXIT ;-- cleanup on exit
"RTN","KMPDTM",139,0)
 D ^%ZISC
"RTN","KMPDTM",140,0)
 Q
"RTN","KMPDTP1")
0^8^B15666050
"RTN","KMPDTP1",1,0)
KMPDTP1 ;OAK/RAK - CP Timing Time to Load Summary ;2/17/04  09:22
"RTN","KMPDTP1",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDTP1",3,0)
 ;
"RTN","KMPDTP1",4,0)
EN ;-- entry point
"RTN","KMPDTP1",5,0)
 N KMPDATE,KMPDPTNP,KMPDTTL,POP,X,Y,ZTDESC,ZTRTN,ZTRSAVE,%ZIS
"RTN","KMPDTP1",6,0)
 S KMPDTTL=" Average Coversheet Time-to-Load (TTL) Report "
"RTN","KMPDTP1",7,0)
 D HDR^KMPDUTL4(KMPDTTL)
"RTN","KMPDTP1",8,0)
 W !
"RTN","KMPDTP1",9,0)
 W !?7,"This report displays the daily average time-to-load value for"
"RTN","KMPDTP1",10,0)
 W !?7,"the coversheet at this site.  Average time-to-load values are"
"RTN","KMPDTP1",11,0)
 W !?7,"given for either daily prime time or non-prime time periods."
"RTN","KMPDTP1",12,0)
 W !
"RTN","KMPDTP1",13,0)
 ;
"RTN","KMPDTP1",14,0)
 I '$O(^KMPD(8973.2,0)) D  Q
"RTN","KMPDTP1",15,0)
 .W !!?7,"*** There is currently no data in file #8973.2 (CP TIMING) ***"
"RTN","KMPDTP1",16,0)
 ;
"RTN","KMPDTP1",17,0)
 D DATERNG^KMPDTU10("ORWCV",7,.KMPDATE)
"RTN","KMPDTP1",18,0)
 Q:$G(KMPDATE(0))=""
"RTN","KMPDTP1",19,0)
 S KMPDPTNP=$$PTNPSEL^KMPDUTL4
"RTN","KMPDTP1",20,0)
 Q:'KMPDPTNP
"RTN","KMPDTP1",21,0)
 ; select output device.
"RTN","KMPDTP1",22,0)
 S %ZIS="Q",%ZIS("A")="Device: ",%ZIS("B")="HOME"
"RTN","KMPDTP1",23,0)
 W ! D ^%ZIS I POP W !,"No action taken." Q
"RTN","KMPDTP1",24,0)
 ; if queued.
"RTN","KMPDTP1",25,0)
 I $D(IO("Q")) K IO("Q") D  Q
"RTN","KMPDTP1",26,0)
 .S ZTDESC=KMPDTTL
"RTN","KMPDTP1",27,0)
 .S ZTRTN="EN1^KMPDTP1"
"RTN","KMPDTP1",28,0)
 .S ZTSAVE("KMPDATE()")="",ZTSAVE("KMPDPTNP")="",ZTSAVE("KMPDTTL")=""
"RTN","KMPDTP1",29,0)
 .D ^%ZTLOAD W:$G(ZTSK) !,"Task #",ZTSK
"RTN","KMPDTP1",30,0)
 .D EXIT
"RTN","KMPDTP1",31,0)
 ;
"RTN","KMPDTP1",32,0)
 ; if output to terminal display message.
"RTN","KMPDTP1",33,0)
 W:$E(IOST,1,2)="C-" !,"Compiling timing stats..."
"RTN","KMPDTP1",34,0)
 D EN1
"RTN","KMPDTP1",35,0)
 ;
"RTN","KMPDTP1",36,0)
 Q
"RTN","KMPDTP1",37,0)
 ;
"RTN","KMPDTP1",38,0)
EN1 ;-- entry point from taskman
"RTN","KMPDTP1",39,0)
 Q:'$D(KMPDATE)
"RTN","KMPDTP1",40,0)
 Q:'$G(KMPDPTNP)
"RTN","KMPDTP1",41,0)
 K ^TMP($J)
"RTN","KMPDTP1",42,0)
 D DATA,PRINT,EXIT
"RTN","KMPDTP1",43,0)
 K ^TMP($J)
"RTN","KMPDTP1",44,0)
 Q
"RTN","KMPDTP1",45,0)
 ;
"RTN","KMPDTP1",46,0)
DATA ;-- compile data
"RTN","KMPDTP1",47,0)
 Q:'$D(KMPDATE)
"RTN","KMPDTP1",48,0)
 Q:'$G(KMPDPTNP)
"RTN","KMPDTP1",49,0)
 N DATA,DATE,DOT,END,IEN,PTNP,QUEUED
"RTN","KMPDTP1",50,0)
 S DATE=$P(KMPDATE(0),U)-.1,END=$P(KMPDATE(0),U,2),PTNP=(+KMPDPTNP)
"RTN","KMPDTP1",51,0)
 Q:'DATE!('END)!('PTNP)
"RTN","KMPDTP1",52,0)
 S DOT=1,QUEUED=$D(ZTQUEUED)
"RTN","KMPDTP1",53,0)
 F  S DATE=$O(^KMPD(8973.2,"ASSDTPT","ORWCV",DATE)) Q:'DATE!(DATE>END)  D 
"RTN","KMPDTP1",54,0)
 .S IEN=0,^TMP($J,DATE)=""
"RTN","KMPDTP1",55,0)
 .F  S IEN=$O(^KMPD(8973.2,"ASSDTPT","ORWCV",DATE,PTNP,IEN)) Q:'IEN  D 
"RTN","KMPDTP1",56,0)
 ..Q:'$D(^KMPD(8973.2,IEN,0))  S DATA=^(0) Q:DATA=""
"RTN","KMPDTP1",57,0)
 ..I 'QUEUED S DOT=DOT+1 W:'(DOT#1000) "."
"RTN","KMPDTP1",58,0)
 ..; if delta
"RTN","KMPDTP1",59,0)
 ..I $P(DATA,U,4)'="" D 
"RTN","KMPDTP1",60,0)
 ...; minimum delta
"RTN","KMPDTP1",61,0)
 ...I $P(^TMP($J,DATE),U,2)=""!($P(DATA,U,4)<$P(^TMP($J,DATE),U,2)) D 
"RTN","KMPDTP1",62,0)
 ....S $P(^TMP($J,DATE),U,2)=$P(DATA,U,4)
"RTN","KMPDTP1",63,0)
 ...; maximum delta
"RTN","KMPDTP1",64,0)
 ...I $P(DATA,U,4)>$P(^TMP($J,DATE),U,3) S $P(^TMP($J,DATE),U,3)=$P(DATA,U,4)
"RTN","KMPDTP1",65,0)
 ...; total delta
"RTN","KMPDTP1",66,0)
 ...S $P(^TMP($J,DATE),U,4)=$P(^TMP($J,DATE),U,4)+$P(DATA,U,4)
"RTN","KMPDTP1",67,0)
 ...; count
"RTN","KMPDTP1",68,0)
 ...S $P(^TMP($J,DATE),U,5)=$P(^TMP($J,DATE),U,5)+1
"RTN","KMPDTP1",69,0)
 ..; if no delta
"RTN","KMPDTP1",70,0)
 ..E  S $P(^TMP($J,DATE),U,6)=$P(^TMP($J,DATE),U,6)+1
"RTN","KMPDTP1",71,0)
 .;
"RTN","KMPDTP1",72,0)
 .; back to DATE level
"RTN","KMPDTP1",73,0)
 .; average
"RTN","KMPDTP1",74,0)
 .S:$P(^TMP($J,DATE),U,5) $P(^TMP($J,DATE),U)=$P(^TMP($J,DATE),U,4)/$P(^TMP($J,DATE),U,5)
"RTN","KMPDTP1",75,0)
 ;
"RTN","KMPDTP1",76,0)
 Q
"RTN","KMPDTP1",77,0)
 ;
"RTN","KMPDTP1",78,0)
PRINT ;-- print data
"RTN","KMPDTP1",79,0)
 D HDR
"RTN","KMPDTP1",80,0)
 Q:'$D(^TMP($J))
"RTN","KMPDTP1",81,0)
 N DATE,TOTAL S (DATE,TOTAL)=""
"RTN","KMPDTP1",82,0)
 F  S DATE=$O(^TMP($J,DATE)) Q:'DATE  S DATA=^TMP($J,DATE) D 
"RTN","KMPDTP1",83,0)
 .W !,$$FMTE^XLFDT(DATE,2)
"RTN","KMPDTP1",84,0)
 .W ?12,$J($FN($P(DATA,U),",",0),10)
"RTN","KMPDTP1",85,0)
 .W ?26,$J($FN($P(DATA,U,2),",",0),10)
"RTN","KMPDTP1",86,0)
 .W ?40,$J($FN($P(DATA,U,3),",",0),10)
"RTN","KMPDTP1",87,0)
 .W ?54,$J($FN($P(DATA,U,5),",",0),10)
"RTN","KMPDTP1",88,0)
 .; total incompletes
"RTN","KMPDTP1",89,0)
 .S TOTAL=TOTAL+$P(DATA,U,6)
"RTN","KMPDTP1",90,0)
 ;
"RTN","KMPDTP1",91,0)
 W !!?12,"Incomplete: ",$J($FN(TOTAL,",",0),$L(TOTAL)+2)
"RTN","KMPDTP1",92,0)
 ; legend
"RTN","KMPDTP1",93,0)
 W !!?2,"CV  = Coversheet",!?2,"TTL = Time-to-Load"
"RTN","KMPDTP1",94,0)
 ; pause if output to terminal
"RTN","KMPDTP1",95,0)
 D CONTINUE^KMPDUTL4("Press RETURN to continue",4)
"RTN","KMPDTP1",96,0)
 Q
"RTN","KMPDTP1",97,0)
 ;
"RTN","KMPDTP1",98,0)
HDR ;-- print header
"RTN","KMPDTP1",99,0)
 W @IOF
"RTN","KMPDTP1",100,0)
 S X=$G(KMPDTTL)
"RTN","KMPDTP1",101,0)
 W !?(80-$L(X)\2),X
"RTN","KMPDTP1",102,0)
 S X=$P($G(KMPDPTNP),U,2)
"RTN","KMPDTP1",103,0)
 W !?(80-$L(X)\2),X
"RTN","KMPDTP1",104,0)
 S X=$G(KMPDATE(0)),X=$P(X,U,3)_" - "_$P(X,U,4)
"RTN","KMPDTP1",105,0)
 W !?(80-$L(X)\2),X,?61,"Printed: ",$$FMTE^XLFDT(DT,2)
"RTN","KMPDTP1",106,0)
 W !
"RTN","KMPDTP1",107,0)
 W !?12,"|---------------Seconds---------------|"
"RTN","KMPDTP1",108,0)
 W !,"Date",?12,"Average TTL",?26,"Minimum TTL",?40,"Maximum TTL",?54,"# of CV Loads"
"RTN","KMPDTP1",109,0)
 W !,$$REPEAT^XLFSTR("-",IOM)
"RTN","KMPDTP1",110,0)
 ;
"RTN","KMPDTP1",111,0)
 Q
"RTN","KMPDTP1",112,0)
 ;
"RTN","KMPDTP1",113,0)
EXIT ;-- cleanup on exit
"RTN","KMPDTP1",114,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","KMPDTP1",115,0)
 D ^%ZISC
"RTN","KMPDTP1",116,0)
 K KMPDATE,KMPDPTNP,KMPDTTL
"RTN","KMPDTP1",117,0)
 Q
"RTN","KMPDTP2")
0^9^B21206441
"RTN","KMPDTP2",1,0)
KMPDTP2 ;OAK/RAK - CP Timing Daily Time-to-Load Detail ;2/17/04  09:23
"RTN","KMPDTP2",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDTP2",3,0)
 ;
"RTN","KMPDTP2",4,0)
EN ;-- entry point
"RTN","KMPDTP2",5,0)
 N KMPDATE,KMPDPTNP,KMPDTTL,POP,X,Y,ZTDESC,ZTRTN,ZTSAVE,ZTSK,%ZIS
"RTN","KMPDTP2",6,0)
 S KMPDTTL=" Daily Coversheet Time-to-Load (TTL) Detailed Report "
"RTN","KMPDTP2",7,0)
 D HDR^KMPDUTL4(KMPDTTL)
"RTN","KMPDTP2",8,0)
 W !
"RTN","KMPDTP2",9,0)
 W !?7,"This detailed report displays daily time-to-load values for the"
"RTN","KMPDTP2",10,0)
 W !?7,"coversheet at this site.  The report breaks the time-to-load"
"RTN","KMPDTP2",11,0)
 W !?7,"metrics into ten second groupings."
"RTN","KMPDTP2",12,0)
 W !
"RTN","KMPDTP2",13,0)
 ;
"RTN","KMPDTP2",14,0)
 ; if no data
"RTN","KMPDTP2",15,0)
 I '$O(^KMPD(8973.2,0)) D  Q
"RTN","KMPDTP2",16,0)
 .W !!?7,"*** There is currently no data in file #8973.2 (CP TIMING) ***"
"RTN","KMPDTP2",17,0)
 ;
"RTN","KMPDTP2",18,0)
 ; select date range
"RTN","KMPDTP2",19,0)
 D DATERNG^KMPDTU10("ORWCV",1,.KMPDATE)
"RTN","KMPDTP2",20,0)
 Q:$G(KMPDATE(0))=""
"RTN","KMPDTP2",21,0)
 ;
"RTN","KMPDTP2",22,0)
 ; select time frame
"RTN","KMPDTP2",23,0)
 S KMPDPTNP=$$PTNPSEL^KMPDUTL4
"RTN","KMPDTP2",24,0)
 Q:'KMPDPTNP
"RTN","KMPDTP2",25,0)
 ;
"RTN","KMPDTP2",26,0)
 ; select output device.
"RTN","KMPDTP2",27,0)
 S %ZIS="Q",%ZIS("A")="Device: ",%ZIS("B")="HOME"
"RTN","KMPDTP2",28,0)
 W ! D ^%ZIS I POP W !,"No action taken." Q
"RTN","KMPDTP2",29,0)
 ; if queued.
"RTN","KMPDTP2",30,0)
 I $D(IO("Q")) K IO("Q") D  Q
"RTN","KMPDTP2",31,0)
 .S ZTDESC=KMPDTTL
"RTN","KMPDTP2",32,0)
 .S ZTRTN="EN1^KMPDTP2"
"RTN","KMPDTP2",33,0)
 .S ZTSAVE("KMPDATE()")="",ZTSAVE("KMPDPTNP")="",ZTSAVE("KMPDTTL")=""
"RTN","KMPDTP2",34,0)
 .D ^%ZTLOAD W:$G(ZTSK) !,"Task #",ZTSK
"RTN","KMPDTP2",35,0)
 .D EXIT
"RTN","KMPDTP2",36,0)
 ;
"RTN","KMPDTP2",37,0)
 ; if output to terminal display message.
"RTN","KMPDTP2",38,0)
 W:$E(IOST,1,2)="C-" !,"Compiling timing stats..."
"RTN","KMPDTP2",39,0)
 D EN1
"RTN","KMPDTP2",40,0)
 ;
"RTN","KMPDTP2",41,0)
 Q
"RTN","KMPDTP2",42,0)
 ;
"RTN","KMPDTP2",43,0)
EN1 ;-- entry point from taskman
"RTN","KMPDTP2",44,0)
 Q:'$D(KMPDATE)
"RTN","KMPDTP2",45,0)
 Q:'$G(KMPDPTNP)
"RTN","KMPDTP2",46,0)
 ;
"RTN","KMPDTP2",47,0)
 K ^TMP($J)
"RTN","KMPDTP2",48,0)
 D DATA,PRINT,EXIT
"RTN","KMPDTP2",49,0)
 K ^TMP($J)
"RTN","KMPDTP2",50,0)
 ;
"RTN","KMPDTP2",51,0)
 Q
"RTN","KMPDTP2",52,0)
 ;
"RTN","KMPDTP2",53,0)
DATA ;-- compile data
"RTN","KMPDTP2",54,0)
 Q:'$D(KMPDATE)
"RTN","KMPDTP2",55,0)
 Q:'$G(KMPDPTNP)
"RTN","KMPDTP2",56,0)
 ;
"RTN","KMPDTP2",57,0)
 N DATA,DATE,DELTA,DOT,END,I,IEN,PTNP,QUEUED,TOTAL
"RTN","KMPDTP2",58,0)
 ;
"RTN","KMPDTP2",59,0)
 S QUEUED=$D(ZTQUEUED),DOT=1
"RTN","KMPDTP2",60,0)
 S DATE=$P(KMPDATE(0),U)-.1,END=$P(KMPDATE(0),U,2),PTNP=(+KMPDPTNP)
"RTN","KMPDTP2",61,0)
 Q:'DATE!('END)!('PTNP)
"RTN","KMPDTP2",62,0)
 ;
"RTN","KMPDTP2",63,0)
 F  S DATE=$O(^KMPD(8973.2,"ASSDTPT","ORWCV",DATE)) Q:'DATE!(DATE>END)  D
"RTN","KMPDTP2",64,0)
 .S (IEN,TOTAL)=0,^TMP($J,DATE)=""
"RTN","KMPDTP2",65,0)
 .F  S IEN=$O(^KMPD(8973.2,"ASSDTPT","ORWCV",DATE,PTNP,IEN)) Q:'IEN  D
"RTN","KMPDTP2",66,0)
 ..Q:'$D(^KMPD(8973.2,IEN,0))  S DATA=^(0) Q:DATA=""
"RTN","KMPDTP2",67,0)
 ..S DOT=DOT+1 W:'QUEUED&('(DOT#1000)) "."
"RTN","KMPDTP2",68,0)
 ..S DELTA=$P(DATA,U,4)
"RTN","KMPDTP2",69,0)
 ..;
"RTN","KMPDTP2",70,0)
 ..; if delta is null increment by 1 and quit
"RTN","KMPDTP2",71,0)
 ..I DELTA="" S $P(^TMP($J,DATE),U,50)=$P(^TMP($J,DATE),U,50)+1 Q
"RTN","KMPDTP2",72,0)
 ..; total
"RTN","KMPDTP2",73,0)
 ..S TOTAL=TOTAL+1
"RTN","KMPDTP2",74,0)
 ..;
"RTN","KMPDTP2",75,0)
 ..; loop - less than I*10 seconds
"RTN","KMPDTP2",76,0)
 ..F I=1:1:9 I DELTA<(I*10) S $P(^TMP($J,DATE),U,I)=$P(^TMP($J,DATE),U,I)+1 Q
"RTN","KMPDTP2",77,0)
 ..; 90 or greater seconds
"RTN","KMPDTP2",78,0)
 ..I DELTA>89 S $P(^TMP($J,DATE),U,10)=$P(^TMP($J,DATE),U,10)+1
"RTN","KMPDTP2",79,0)
 .;
"RTN","KMPDTP2",80,0)
 .; back to DATE level
"RTN","KMPDTP2",81,0)
 .; determine percentage
"RTN","KMPDTP2",82,0)
 .I TOTAL F I=1:1:10 D 
"RTN","KMPDTP2",83,0)
 ..S $P(^TMP($J,DATE,1),U,I)=$FN($P(^TMP($J,DATE),U,I)/TOTAL*100,"",1)
"RTN","KMPDTP2",84,0)
 ;
"RTN","KMPDTP2",85,0)
 Q
"RTN","KMPDTP2",86,0)
 ;
"RTN","KMPDTP2",87,0)
PRINT ;-- print data
"RTN","KMPDTP2",88,0)
 D HDR
"RTN","KMPDTP2",89,0)
 Q:'$D(^TMP($J))
"RTN","KMPDTP2",90,0)
 ;
"RTN","KMPDTP2",91,0)
 N CONT,DATE,I,TOTAL
"RTN","KMPDTP2",92,0)
 ;
"RTN","KMPDTP2",93,0)
 S DATE="",CONT=1
"RTN","KMPDTP2",94,0)
 F  S DATE=$O(^TMP($J,DATE)) Q:'DATE  D  Q:'CONT
"RTN","KMPDTP2",95,0)
 .S TOTAL=""
"RTN","KMPDTP2",96,0)
 .S DATA=^TMP($J,DATE),DATA(1)=$G(^TMP($J,DATE,1))
"RTN","KMPDTP2",97,0)
 .W !,$$FMTE^XLFDT(DATE,2)
"RTN","KMPDTP2",98,0)
 .; if no data
"RTN","KMPDTP2",99,0)
 .I DATA="" W ?12,"<No Data for ",$P(KMPDPTNP,U,2),">",! Q
"RTN","KMPDTP2",100,0)
 .; display data
"RTN","KMPDTP2",101,0)
 .F I=1:1:10 D
"RTN","KMPDTP2",102,0)
 ..W ?12
"RTN","KMPDTP2",103,0)
 ..I I<10 W $J(I-1*10,2)," to <",I*10
"RTN","KMPDTP2",104,0)
 ..E  W "90 or greater"
"RTN","KMPDTP2",105,0)
 ..W ?28,$J($FN($P(DATA,U,I),",",0),10)
"RTN","KMPDTP2",106,0)
 ..; percentages
"RTN","KMPDTP2",107,0)
 ..W ?44,$J($FN($P(DATA(1),U,I),"",1),10),"%",!
"RTN","KMPDTP2",108,0)
 ..; totals
"RTN","KMPDTP2",109,0)
 ..S $P(TOTAL,U)=$P(TOTAL,U)+$P(DATA,U,I)
"RTN","KMPDTP2",110,0)
 ..S $P(TOTAL,U,2)=$P(TOTAL,U,2)+$P(DATA(1),U,I)
"RTN","KMPDTP2",111,0)
 .;
"RTN","KMPDTP2",112,0)
 .; back to DATE level
"RTN","KMPDTP2",113,0)
 .; totals
"RTN","KMPDTP2",114,0)
 .W ?28,"----------",?44,"----------"
"RTN","KMPDTP2",115,0)
 .W !?28,$J($FN($P(TOTAL,U),",",0),10)
"RTN","KMPDTP2",116,0)
 .W ?44,$J($FN($P(TOTAL,U,2),"",0),10),"%"
"RTN","KMPDTP2",117,0)
 .W !!?12,"Incomplete",?28,$J($FN($P(DATA,U,50),",",0),10)
"RTN","KMPDTP2",118,0)
 .; page feed if another date
"RTN","KMPDTP2",119,0)
 .I $O(^TMP($J,DATE)) D 
"RTN","KMPDTP2",120,0)
 ..D CONTINUE^KMPDUTL4("",1,.CONT) Q:'CONT
"RTN","KMPDTP2",121,0)
 ..D HDR
"RTN","KMPDTP2",122,0)
 ;
"RTN","KMPDTP2",123,0)
 I CONT D 
"RTN","KMPDTP2",124,0)
 .; legend
"RTN","KMPDTP2",125,0)
 .W !!?2,"CV  = Coversheet",!?2,"TTL = Time-to-Load"
"RTN","KMPDTP2",126,0)
 .; pause if output to terminal
"RTN","KMPDTP2",127,0)
 .D CONTINUE^KMPDUTL4("Press RETURN to continue",1)
"RTN","KMPDTP2",128,0)
 ;
"RTN","KMPDTP2",129,0)
 Q
"RTN","KMPDTP2",130,0)
 ;
"RTN","KMPDTP2",131,0)
HDR ;-- print header
"RTN","KMPDTP2",132,0)
 W @IOF
"RTN","KMPDTP2",133,0)
 S X=$G(KMPDTTL)
"RTN","KMPDTP2",134,0)
 W !?(80-$L(X)\2),X
"RTN","KMPDTP2",135,0)
 S X=$P($G(KMPDPTNP),U,2)
"RTN","KMPDTP2",136,0)
 W !?(80-$L(X)\2),X
"RTN","KMPDTP2",137,0)
 S X=$G(KMPDATE(0)),X=$P(X,U,3)_" - "_$P(X,U,4)
"RTN","KMPDTP2",138,0)
 W !?(80-$L(X)\2),X,?61,"Printed: ",$$FMTE^XLFDT(DT,2)
"RTN","KMPDTP2",139,0)
 W !
"RTN","KMPDTP2",140,0)
 W !,"Date",?12,"TTL Seconds",?28,"# of CV Loads",?44,"CV Percent"
"RTN","KMPDTP2",141,0)
 W !,$$REPEAT^XLFSTR("-",IOM)
"RTN","KMPDTP2",142,0)
 ;
"RTN","KMPDTP2",143,0)
 Q
"RTN","KMPDTP2",144,0)
 ;
"RTN","KMPDTP2",145,0)
EXIT ;-- cleanup on exit
"RTN","KMPDTP2",146,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","KMPDTP2",147,0)
 D ^%ZISC
"RTN","KMPDTP2",148,0)
 K KMPDATE,KMPDPTNP,KMPDTTL
"RTN","KMPDTP2",149,0)
 Q
"RTN","KMPDTP3")
0^10^B19757662
"RTN","KMPDTP3",1,0)
KMPDTP3 ;OAK/RAK - CP Timing Hourly Time-to-Load ;2/17/04  09:37
"RTN","KMPDTP3",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDTP3",3,0)
 ;
"RTN","KMPDTP3",4,0)
EN ;-- entry point
"RTN","KMPDTP3",5,0)
 N KMPDATE,KMPDTTL,POP,X,Y,ZTDESC,ZTRTN,ZTRSAVE,%ZIS
"RTN","KMPDTP3",6,0)
 S KMPDTTL=" Hourly Coversheet Time-to-Load (TTL) Report "
"RTN","KMPDTP3",7,0)
 D HDR^KMPDUTL4(KMPDTTL)
"RTN","KMPDTP3",8,0)
 W !
"RTN","KMPDTP3",9,0)
 W !?7,"This report displays the hourly average time-to-load value"
"RTN","KMPDTP3",10,0)
 W !?7,"for the coversheet at this site over 24 hours."
"RTN","KMPDTP3",11,0)
 W !
"RTN","KMPDTP3",12,0)
 ;
"RTN","KMPDTP3",13,0)
 ; if no data
"RTN","KMPDTP3",14,0)
 I '$O(^KMPD(8973.2,0)) D  Q
"RTN","KMPDTP3",15,0)
 .W !!?7,"*** There is currently no data in file #8973.2 (CP TIMING) ***"
"RTN","KMPDTP3",16,0)
 ;
"RTN","KMPDTP3",17,0)
 D DATERNG^KMPDTU10("ORWCV",1,.KMPDATE)
"RTN","KMPDTP3",18,0)
 Q:$G(KMPDATE(0))=""
"RTN","KMPDTP3",19,0)
 ; select output device.
"RTN","KMPDTP3",20,0)
 S %ZIS="Q",%ZIS("A")="Device: ",%ZIS("B")="HOME"
"RTN","KMPDTP3",21,0)
 W ! D ^%ZIS I POP W !,"No action taken." Q
"RTN","KMPDTP3",22,0)
 ; if queued.
"RTN","KMPDTP3",23,0)
 I $D(IO("Q")) K IO("Q") D  Q
"RTN","KMPDTP3",24,0)
 .S ZTDESC=KMPDTTL
"RTN","KMPDTP3",25,0)
 .S ZTRTN="EN1^KMPDTP3"
"RTN","KMPDTP3",26,0)
 .S ZTSAVE("KMPDATE()")="",ZTSAVE("KMPDTTL")=""
"RTN","KMPDTP3",27,0)
 .D ^%ZTLOAD W:$G(ZTSK) !,"Task #",ZTSK
"RTN","KMPDTP3",28,0)
 .D EXIT
"RTN","KMPDTP3",29,0)
 ;
"RTN","KMPDTP3",30,0)
 ; if output to terminal display message.
"RTN","KMPDTP3",31,0)
 W:$E(IOST,1,2)="C-" !,"Compiling timing stats..."
"RTN","KMPDTP3",32,0)
 D EN1
"RTN","KMPDTP3",33,0)
 ;
"RTN","KMPDTP3",34,0)
 Q
"RTN","KMPDTP3",35,0)
 ;
"RTN","KMPDTP3",36,0)
EN1 ;-- entry point from taskman
"RTN","KMPDTP3",37,0)
 Q:'$D(KMPDATE)
"RTN","KMPDTP3",38,0)
 K ^TMP($J)
"RTN","KMPDTP3",39,0)
 D DATA,PRINT,EXIT
"RTN","KMPDTP3",40,0)
 K ^TMP($J)
"RTN","KMPDTP3",41,0)
 Q
"RTN","KMPDTP3",42,0)
 ;
"RTN","KMPDTP3",43,0)
DATA ;-- compile data
"RTN","KMPDTP3",44,0)
 Q:'$D(KMPDATE)
"RTN","KMPDTP3",45,0)
 N DATA,DATE,DELTA,DOT,END,HR,I,IEN,PTNP,QUEUED,TOTAL
"RTN","KMPDTP3",46,0)
 S DATE=$P(KMPDATE(0),U)-.1,END=$P(KMPDATE(0),U,2)
"RTN","KMPDTP3",47,0)
 Q:'DATE!('END)
"RTN","KMPDTP3",48,0)
 S DOT=1,QUEUED=$D(ZTQUEUED)
"RTN","KMPDTP3",49,0)
 F  S DATE=$O(^KMPD(8973.2,"ASVDTSS","ORWCV",DATE)) Q:'DATE!(DATE>END)  D 
"RTN","KMPDTP3",50,0)
 .S (IEN,TOTAL)=0
"RTN","KMPDTP3",51,0)
 .; array with hours
"RTN","KMPDTP3",52,0)
 .F I=0:1:23 S ^TMP($J,DATE,I)=""
"RTN","KMPDTP3",53,0)
 .F  S IEN=$O(^KMPD(8973.2,"ASVDTSS","ORWCV",DATE,IEN)) Q:'IEN  D 
"RTN","KMPDTP3",54,0)
 ..Q:'$D(^KMPD(8973.2,IEN,0))  S DATA=^(0) Q:DATA=""
"RTN","KMPDTP3",55,0)
 ..S DOT=DOT+1 W:'QUEUED&('(DOT#1000)) "."
"RTN","KMPDTP3",56,0)
 ..; get delta and hour
"RTN","KMPDTP3",57,0)
 ..S DELTA=$P(DATA,U,4),HR=+$E($P($P(DATA,U,3),".",2),1,2)
"RTN","KMPDTP3",58,0)
 ..; if delta
"RTN","KMPDTP3",59,0)
 ..I $P(DATA,U,4)'="" D 
"RTN","KMPDTP3",60,0)
 ...; minimum delta
"RTN","KMPDTP3",61,0)
 ...I $P(^TMP($J,DATE,HR),U,2)=""!($P(DATA,U,4)<$P(^TMP($J,DATE,HR),U,2)) D 
"RTN","KMPDTP3",62,0)
 ....S $P(^TMP($J,DATE,HR),U,2)=$P(DATA,U,4)
"RTN","KMPDTP3",63,0)
 ...; maximum delta
"RTN","KMPDTP3",64,0)
 ...I $P(DATA,U,4)>$P(^TMP($J,DATE,HR),U,3) S $P(^TMP($J,DATE,HR),U,3)=$P(DATA,U,4)
"RTN","KMPDTP3",65,0)
 ...; total delta
"RTN","KMPDTP3",66,0)
 ...S $P(^TMP($J,DATE,HR),U,4)=$P(^TMP($J,DATE,HR),U,4)+$P(DATA,U,4)
"RTN","KMPDTP3",67,0)
 ...; count
"RTN","KMPDTP3",68,0)
 ...S $P(^TMP($J,DATE,HR),U,5)=$P(^TMP($J,DATE,HR),U,5)+1
"RTN","KMPDTP3",69,0)
 ..; if no delta
"RTN","KMPDTP3",70,0)
 ..E  S $P(^TMP($J,DATE,HR),U,6)=$P(^TMP($J,DATE,HR),U,6)+1
"RTN","KMPDTP3",71,0)
 .;
"RTN","KMPDTP3",72,0)
 .; back to DATE level
"RTN","KMPDTP3",73,0)
 .; average
"RTN","KMPDTP3",74,0)
 .F I=0:1:23 I $P(^TMP($J,DATE,I),U,5) D 
"RTN","KMPDTP3",75,0)
 ..S $P(^TMP($J,DATE,I),U)=$P(^TMP($J,DATE,I),U,4)/$P(^TMP($J,DATE,I),U,5)
"RTN","KMPDTP3",76,0)
 ;
"RTN","KMPDTP3",77,0)
 Q
"RTN","KMPDTP3",78,0)
 ;
"RTN","KMPDTP3",79,0)
PRINT ;-- print data
"RTN","KMPDTP3",80,0)
 D HDR
"RTN","KMPDTP3",81,0)
 Q:'$D(^TMP($J))
"RTN","KMPDTP3",82,0)
 N CONT,DATE,HR,I,TOTAL
"RTN","KMPDTP3",83,0)
 S DATE="",CONT=1
"RTN","KMPDTP3",84,0)
 F  S DATE=$O(^TMP($J,DATE)) Q:'DATE  S HR="" D  Q:'CONT
"RTN","KMPDTP3",85,0)
 .S TOTAL=""
"RTN","KMPDTP3",86,0)
 .W !,$$FMTE^XLFDT(DATE,2)
"RTN","KMPDTP3",87,0)
 .F  S HR=$O(^TMP($J,DATE,HR)) Q:HR=""  D  Q:'CONT
"RTN","KMPDTP3",88,0)
 ..; page feed
"RTN","KMPDTP3",89,0)
 ..I $Y>(IOSL-3) D CONTINUE^KMPDUTL4("",1,.CONT) Q:'CONT  D HDR W !
"RTN","KMPDTP3",90,0)
 ..W ?12," ",$S($L(HR)=1:"0",1:""),HR
"RTN","KMPDTP3",91,0)
 ..S DATA=^TMP($J,DATE,HR)
"RTN","KMPDTP3",92,0)
 ..W ?20,$J($FN($P(DATA,U),",",0),10)
"RTN","KMPDTP3",93,0)
 ..W ?34,$J($FN($P(DATA,U,2),",",0),10)
"RTN","KMPDTP3",94,0)
 ..W ?48,$J($FN($P(DATA,U,3),",",0),10)
"RTN","KMPDTP3",95,0)
 ..W ?62,$J($FN($P(DATA,U,5),",",0),10)
"RTN","KMPDTP3",96,0)
 ..W !
"RTN","KMPDTP3",97,0)
 ..S $P(TOTAL,U)=$P(TOTAL,U)+$P(DATA,U,5)
"RTN","KMPDTP3",98,0)
 ..S $P(TOTAL,U,2)=$P(TOTAL,U,2)+$P(DATA,U,6)
"RTN","KMPDTP3",99,0)
 .;
"RTN","KMPDTP3",100,0)
 .; back to DATE level
"RTN","KMPDTP3",101,0)
 .; totals
"RTN","KMPDTP3",102,0)
 .W ?62,"----------",!?62,$J($FN(TOTAL,",",0),10),!
"RTN","KMPDTP3",103,0)
 .W !?12,"Incomplete: ",$J($FN($P(TOTAL,U,2),",",0),$L($P(TOTAL,U,2))+2),!
"RTN","KMPDTP3",104,0)
 .; if another date
"RTN","KMPDTP3",105,0)
 .I $O(^TMP($J,DATE)) D CONTINUE^KMPDUTL4("",1,.CONT) Q:'CONT  D HDR W !
"RTN","KMPDTP3",106,0)
 ;
"RTN","KMPDTP3",107,0)
 I CONT D 
"RTN","KMPDTP3",108,0)
 .; legend
"RTN","KMPDTP3",109,0)
 .W !!?2,"CV  = Coversheet",!?2,"TTL = Time-to-Load"
"RTN","KMPDTP3",110,0)
 .; pause if output to terminal
"RTN","KMPDTP3",111,0)
 .D CONTINUE^KMPDUTL4("Press RETURN to continue",1)
"RTN","KMPDTP3",112,0)
 ;
"RTN","KMPDTP3",113,0)
 Q
"RTN","KMPDTP3",114,0)
 ;
"RTN","KMPDTP3",115,0)
HDR ;-- print header
"RTN","KMPDTP3",116,0)
 W @IOF
"RTN","KMPDTP3",117,0)
 S X=$G(KMPDTTL)
"RTN","KMPDTP3",118,0)
 W !?(80-$L(X)\2),X
"RTN","KMPDTP3",119,0)
 S X=$G(KMPDATE(0)),X=$P(X,U,3)_" - "_$P(X,U,4)
"RTN","KMPDTP3",120,0)
 W !?(80-$L(X)\2),X,?61,"Printed: ",$$FMTE^XLFDT(DT,2)
"RTN","KMPDTP3",121,0)
 W !
"RTN","KMPDTP3",122,0)
 W !?20,"|---------------Seconds---------------|"
"RTN","KMPDTP3",123,0)
 W !,"Date",?12,"Hour",?20,"TTL Average",?34,"TTL Minimum",?48,"TTL Maximum",?62,"# of CV Loads"
"RTN","KMPDTP3",124,0)
 W !,$$REPEAT^XLFSTR("-",IOM)
"RTN","KMPDTP3",125,0)
 ;
"RTN","KMPDTP3",126,0)
 Q
"RTN","KMPDTP3",127,0)
 ;
"RTN","KMPDTP3",128,0)
EXIT ;-- cleanup on exit
"RTN","KMPDTP3",129,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","KMPDTP3",130,0)
 D ^%ZISC
"RTN","KMPDTP3",131,0)
 K KMPDATE,KMPDTTL
"RTN","KMPDTP3",132,0)
 Q
"RTN","KMPDTP4")
0^11^B26904696
"RTN","KMPDTP4",1,0)
KMPDTP4 ;OAK/RAK - CP Timing Hourly Time-to-Load ;2/17/04  09:38
"RTN","KMPDTP4",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDTP4",3,0)
 ;
"RTN","KMPDTP4",4,0)
EN ;-- entry point
"RTN","KMPDTP4",5,0)
 ;
"RTN","KMPDTP4",6,0)
 N KMPDATE,KMPDTTL,POP,X,Y,ZTDESC,ZTRTN,ZTRSAVE,ZTSK,%ZIS
"RTN","KMPDTP4",7,0)
 ;
"RTN","KMPDTP4",8,0)
 S KMPDTTL=" Hourly Coversheet Time-to-Load (TTL) Detail Report "
"RTN","KMPDTP4",9,0)
 D HDR^KMPDUTL4(KMPDTTL)
"RTN","KMPDTP4",10,0)
 W !
"RTN","KMPDTP4",11,0)
 W !?7,"This detail report displays the hourly time-to-load values"
"RTN","KMPDTP4",12,0)
 W !?7,"for the coversheet at this site.  The report breaks the"
"RTN","KMPDTP4",13,0)
 W !?7,"time-to-load metrics into ten second groupings."
"RTN","KMPDTP4",14,0)
 W !
"RTN","KMPDTP4",15,0)
 ;
"RTN","KMPDTP4",16,0)
 ; if no data
"RTN","KMPDTP4",17,0)
 I '$O(^KMPD(8973.2,0)) D  Q
"RTN","KMPDTP4",18,0)
 .W !!?7,"*** There is currently no data in file #8973.2 (CP TIMING) ***"
"RTN","KMPDTP4",19,0)
 ;
"RTN","KMPDTP4",20,0)
 ; date & hour(s)
"RTN","KMPDTP4",21,0)
 D DTTMRNG^KMPDTU10("ORWCV",1,.KMPDATE,8)
"RTN","KMPDTP4",22,0)
 Q:$G(KMPDATE(0))=""
"RTN","KMPDTP4",23,0)
 Q:$G(KMPDATE(1))=""
"RTN","KMPDTP4",24,0)
 ;
"RTN","KMPDTP4",25,0)
 ; select output device.
"RTN","KMPDTP4",26,0)
 S %ZIS="Q",%ZIS("A")="Device: ",%ZIS("B")="HOME"
"RTN","KMPDTP4",27,0)
 W ! D ^%ZIS I POP W !,"No action taken." Q
"RTN","KMPDTP4",28,0)
 ; if queued.
"RTN","KMPDTP4",29,0)
 I $D(IO("Q")) K IO("Q") D  Q
"RTN","KMPDTP4",30,0)
 .S ZTDESC=KMPDTTL
"RTN","KMPDTP4",31,0)
 .S ZTRTN="EN1^KMPDTP4"
"RTN","KMPDTP4",32,0)
 .S ZTSAVE("KMPDATE()")="",ZTSAVE("KMPDTTL")=""
"RTN","KMPDTP4",33,0)
 .D ^%ZTLOAD W:$G(ZTSK) !,"Task #",ZTSK
"RTN","KMPDTP4",34,0)
 .D EXIT
"RTN","KMPDTP4",35,0)
 ;
"RTN","KMPDTP4",36,0)
 ; if output to terminal display message.
"RTN","KMPDTP4",37,0)
 W:$E(IOST,1,2)="C-" !,"Compiling timing stats..."
"RTN","KMPDTP4",38,0)
 D EN1
"RTN","KMPDTP4",39,0)
 ;
"RTN","KMPDTP4",40,0)
 Q
"RTN","KMPDTP4",41,0)
 ;
"RTN","KMPDTP4",42,0)
EN1 ;-- entry point from taskman
"RTN","KMPDTP4",43,0)
 Q:'$D(KMPDATE)
"RTN","KMPDTP4",44,0)
 K ^TMP($J)
"RTN","KMPDTP4",45,0)
 D DATA,PRINT,EXIT
"RTN","KMPDTP4",46,0)
 K ^TMP($J)
"RTN","KMPDTP4",47,0)
 Q
"RTN","KMPDTP4",48,0)
 ;
"RTN","KMPDTP4",49,0)
DATA ;-- compile data
"RTN","KMPDTP4",50,0)
 ;
"RTN","KMPDTP4",51,0)
 Q:'$D(KMPDATE)
"RTN","KMPDTP4",52,0)
 ;
"RTN","KMPDTP4",53,0)
 N DATA,DATE,DATE1,DELTA,DOT,END,HOUR,HR,I,IEN,PTNP,QUEUED,TOTAL
"RTN","KMPDTP4",54,0)
 ;
"RTN","KMPDTP4",55,0)
 S DOT=1,QUEUED=$D(ZTQUEUED)
"RTN","KMPDTP4",56,0)
 ; set up HOUR() array
"RTN","KMPDTP4",57,0)
 F I=1:1:24 S:$P(KMPDATE(1),",",I)'="" HOUR(+$P(KMPDATE(1),",",I))=""
"RTN","KMPDTP4",58,0)
 Q:'$D(HOUR)
"RTN","KMPDTP4",59,0)
 S DATE=$P(KMPDATE(0),U)-.1,END=$P(KMPDATE(0),U,2)+.9
"RTN","KMPDTP4",60,0)
 Q:'DATE!('END)
"RTN","KMPDTP4",61,0)
 F  S DATE=$O(^KMPD(8973.2,"ASSDTTM","ORWCV",DATE)) Q:'DATE!(DATE>END)  D 
"RTN","KMPDTP4",62,0)
 .; date without time
"RTN","KMPDTP4",63,0)
 .S DATE1=$P(DATE,".")
"RTN","KMPDTP4",64,0)
 .; set up HOUR() array
"RTN","KMPDTP4",65,0)
 .M:'$D(^TMP($J,DATE1)) ^TMP($J,DATE1)=HOUR
"RTN","KMPDTP4",66,0)
 .; set up TOTAL() array
"RTN","KMPDTP4",67,0)
 .M:'$D(TOTAL(DATE1)) TOTAL(DATE1)=HOUR
"RTN","KMPDTP4",68,0)
 .S IEN=0
"RTN","KMPDTP4",69,0)
 .F  S IEN=$O(^KMPD(8973.2,"ASSDTTM","ORWCV",DATE,IEN)) Q:'IEN  D 
"RTN","KMPDTP4",70,0)
 ..S HR=+$E($P(DATE,".",2),1,2) S:HR="" HR="0"
"RTN","KMPDTP4",71,0)
 ..Q:'$D(HOUR(HR))
"RTN","KMPDTP4",72,0)
 ..Q:'$D(^KMPD(8973.2,IEN,0))  S DATA=^(0) Q:DATA=""
"RTN","KMPDTP4",73,0)
 ..S DOT=DOT+1 W:'QUEUED&('(DOT#1000)) "."
"RTN","KMPDTP4",74,0)
 ..S DELTA=$P(DATA,U,4)
"RTN","KMPDTP4",75,0)
 ..; if delta is null increment by 1 and quit
"RTN","KMPDTP4",76,0)
 ..I DELTA="" S $P(^TMP($J,DATE1,HR),U,50)=$P(^TMP($J,DATE1,HR),U,50)+1 Q
"RTN","KMPDTP4",77,0)
 ..; total
"RTN","KMPDTP4",78,0)
 ..S TOTAL(DATE1,HR)=TOTAL(DATE1,HR)+1
"RTN","KMPDTP4",79,0)
 ..;
"RTN","KMPDTP4",80,0)
 ..;
"RTN","KMPDTP4",81,0)
 ..; loop - less than I*10 seconds
"RTN","KMPDTP4",82,0)
 ..F I=1:1:9 I DELTA<(I*10) S $P(^TMP($J,DATE1,HR),U,I)=$P(^TMP($J,DATE1,HR),U,I)+1 Q
"RTN","KMPDTP4",83,0)
 ..; 90 or greater seconds
"RTN","KMPDTP4",84,0)
 ..I DELTA>89 S $P(^TMP($J,DATE1,HR),U,10)=$P(^TMP($J,DATE1,HR),U,10)+1
"RTN","KMPDTP4",85,0)
 ;
"RTN","KMPDTP4",86,0)
 ; determine percentage
"RTN","KMPDTP4",87,0)
 S DATE1=0
"RTN","KMPDTP4",88,0)
 F  S DATE1=$O(TOTAL(DATE1)) Q:'DATE1  S HR="" D 
"RTN","KMPDTP4",89,0)
 .F  S HR=$O(TOTAL(DATE1,HR)) Q:HR=""  I TOTAL(DATE1,HR) F I=1:1:10 D 
"RTN","KMPDTP4",90,0)
 ..S $P(^TMP($J,DATE1,HR,1),U,I)=$FN($P(^TMP($J,DATE1,HR),U,I)/TOTAL(DATE1,HR)*100,"",1)
"RTN","KMPDTP4",91,0)
 ;
"RTN","KMPDTP4",92,0)
 Q
"RTN","KMPDTP4",93,0)
 ;
"RTN","KMPDTP4",94,0)
PRINT ;-- print data
"RTN","KMPDTP4",95,0)
 ;
"RTN","KMPDTP4",96,0)
 D HDR
"RTN","KMPDTP4",97,0)
 Q:'$D(^TMP($J))
"RTN","KMPDTP4",98,0)
 N CONT,DATE,I,TOTAL
"RTN","KMPDTP4",99,0)
 S DATE="",CONT=1
"RTN","KMPDTP4",100,0)
 F  S DATE=$O(^TMP($J,DATE)) Q:'DATE  D  Q:'CONT
"RTN","KMPDTP4",101,0)
 .W !,$$FMTE^XLFDT(DATE,2) S HR=""
"RTN","KMPDTP4",102,0)
 .F  S HR=$O(^TMP($J,DATE,HR)) Q:HR=""  D  Q:'CONT
"RTN","KMPDTP4",103,0)
 ..I $Y>(IOSL-9) D  Q:'CONT
"RTN","KMPDTP4",104,0)
 ...D CONTINUE^KMPDUTL4("",1,.CONT) Q:'CONT
"RTN","KMPDTP4",105,0)
 ...D HDR W !,$$FMTE^XLFDT(DATE,2)
"RTN","KMPDTP4",106,0)
 ..W ?12,HR
"RTN","KMPDTP4",107,0)
 ..S TOTAL="",DATA=^TMP($J,DATE,HR),DATA(1)=$G(^TMP($J,DATE,HR,1))
"RTN","KMPDTP4",108,0)
 ..; if no data
"RTN","KMPDTP4",109,0)
 ..I DATA="" W ?12,"<No Data>",! Q
"RTN","KMPDTP4",110,0)
 ..; display data
"RTN","KMPDTP4",111,0)
 ..F I=1:1:9 D 
"RTN","KMPDTP4",112,0)
 ...W ?16,I-1*10," to <",I*10
"RTN","KMPDTP4",113,0)
 ...W ?32,$J($FN($P(DATA,U,I),",",0),10)
"RTN","KMPDTP4",114,0)
 ...; percentages
"RTN","KMPDTP4",115,0)
 ...W ?48,$J($FN($P(DATA(1),U,I),"",1),10),"%"
"RTN","KMPDTP4",116,0)
 ...W !
"RTN","KMPDTP4",117,0)
 ...; totals
"RTN","KMPDTP4",118,0)
 ...S $P(TOTAL,U)=$P(TOTAL,U)+$P(DATA,U,I)
"RTN","KMPDTP4",119,0)
 ...S $P(TOTAL,U,2)=$P(TOTAL,U,2)+$P(DATA(1),U,I)
"RTN","KMPDTP4",120,0)
 ..;
"RTN","KMPDTP4",121,0)
 ..; back to DATE level
"RTN","KMPDTP4",122,0)
 ..; greater than 90
"RTN","KMPDTP4",123,0)
 ..W ?16,"90 or greater",?32,$J($FN($P(DATA,U,10),",",0),10)
"RTN","KMPDTP4",124,0)
 ..W ?48,$J($FN($P(DATA(1),U,10),"",1),10),"%"
"RTN","KMPDTP4",125,0)
 ..S $P(TOTAL,U)=$P(TOTAL,U)+$P(DATA,U,10)
"RTN","KMPDTP4",126,0)
 ..S $P(TOTAL,U,2)=$P(TOTAL,U,2)+$P(DATA(1),U,10)
"RTN","KMPDTP4",127,0)
 ..; totals
"RTN","KMPDTP4",128,0)
 ..W !?32,"----------",?48,"----------"
"RTN","KMPDTP4",129,0)
 ..W !?32,$J($FN($P(TOTAL,U),",",0),10)
"RTN","KMPDTP4",130,0)
 ..W ?48,$J($FN($P(TOTAL,U,2),"",0),10),"%"
"RTN","KMPDTP4",131,0)
 ..W !?16,"Incomplete",?32,$J($FN($P(DATA,U,50),",",0),10),!
"RTN","KMPDTP4",132,0)
 ..; page feed if another date
"RTN","KMPDTP4",133,0)
 ..I $O(^TMP($J,DATE)) D 
"RTN","KMPDTP4",134,0)
 ...D CONTINUE^KMPDUTL4("",1,.CONT) Q:'CONT
"RTN","KMPDTP4",135,0)
 ...D HDR
"RTN","KMPDTP4",136,0)
 ..W !
"RTN","KMPDTP4",137,0)
 ;
"RTN","KMPDTP4",138,0)
 I CONT D 
"RTN","KMPDTP4",139,0)
 .; legend
"RTN","KMPDTP4",140,0)
 .W !!?2,"CV  = Coversheet",!?2,"TTL = Time-to-Load"
"RTN","KMPDTP4",141,0)
 .; pause if output to terminal
"RTN","KMPDTP4",142,0)
 .D CONTINUE^KMPDUTL4("Press RETURN to continue",1)
"RTN","KMPDTP4",143,0)
 ;
"RTN","KMPDTP4",144,0)
 Q
"RTN","KMPDTP4",145,0)
 ;
"RTN","KMPDTP4",146,0)
HDR ;-- print header
"RTN","KMPDTP4",147,0)
 W @IOF
"RTN","KMPDTP4",148,0)
 S X=$G(KMPDTTL)
"RTN","KMPDTP4",149,0)
 W !?(80-$L(X)\2),X
"RTN","KMPDTP4",150,0)
 S X=$G(KMPDATE(0)),X=$P(X,U,3)_" - "_$P(X,U,4)
"RTN","KMPDTP4",151,0)
 W !?(80-$L(X)\2),X,?61,"Printed: ",$$FMTE^XLFDT(DT,2)
"RTN","KMPDTP4",152,0)
 W !
"RTN","KMPDTP4",153,0)
 W !,"Date",?12,"Hr",?16,"TTL Seconds",?32,"# CV Loads",?48,"CV Percent"
"RTN","KMPDTP4",154,0)
 W !,$$REPEAT^XLFSTR("-",IOM)
"RTN","KMPDTP4",155,0)
 ;
"RTN","KMPDTP4",156,0)
 Q
"RTN","KMPDTP4",157,0)
 ;
"RTN","KMPDTP4",158,0)
EXIT ;-- cleanup on exit
"RTN","KMPDTP4",159,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","KMPDTP4",160,0)
 D ^%ZISC
"RTN","KMPDTP4",161,0)
 K KMPDATE,KMPDTTL
"RTN","KMPDTP4",162,0)
 Q
"RTN","KMPDTP5")
0^12^B26924380
"RTN","KMPDTP5",1,0)
KMPDTP5 ;OAK/RAK - CP Timing Threshold Alert ;2/17/04  09:38
"RTN","KMPDTP5",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDTP5",3,0)
 ;
"RTN","KMPDTP5",4,0)
EN ;-- entry point
"RTN","KMPDTP5",5,0)
 ;
"RTN","KMPDTP5",6,0)
 N I,KMPDATE,KMPDSRCH,KMPDTSEC,KMPDTTL,POP,X,Y
"RTN","KMPDTP5",7,0)
 N ZTDESC,ZTRTN,ZTRSAVE,ZTSK,%ZIS
"RTN","KMPDTP5",8,0)
 ;
"RTN","KMPDTP5",9,0)
 S KMPDTTL=" Coversheet Time-to-Load (TTL) Alert Report "
"RTN","KMPDTP5",10,0)
 D HDR^KMPDUTL4(KMPDTTL)
"RTN","KMPDTP5",11,0)
 W !
"RTN","KMPDTP5",12,0)
 W !?7,"This alerting report shows the particular coversheet loads"
"RTN","KMPDTP5",13,0)
 W !?7,"that had excessive time-to-load values. This report will"
"RTN","KMPDTP5",14,0)
 W !?7,"search for a particular person, a particular client name or"
"RTN","KMPDTP5",15,0)
 W !?7,"IP address."
"RTN","KMPDTP5",16,0)
 W !
"RTN","KMPDTP5",17,0)
 ;
"RTN","KMPDTP5",18,0)
 ; if no data
"RTN","KMPDTP5",19,0)
 I '$O(^KMPD(8973.2,0)) D  Q
"RTN","KMPDTP5",20,0)
 .W !!?7,"*** There is currently no data in file #8973.2 (CP TIMING) ***"
"RTN","KMPDTP5",21,0)
 ;
"RTN","KMPDTP5",22,0)
 ; date & hour(s)
"RTN","KMPDTP5",23,0)
 D DTTMRNG^KMPDTU10("ORWCV",1,.KMPDATE,8)
"RTN","KMPDTP5",24,0)
 Q:$G(KMPDATE(0))=""
"RTN","KMPDTP5",25,0)
 Q:$G(KMPDATE(1))=""
"RTN","KMPDTP5",26,0)
 ;
"RTN","KMPDTP5",27,0)
 ; time-to-load threshold seconds
"RTN","KMPDTP5",28,0)
 S KMPDTSEC=$$TTLSEC^KMPDTU10
"RTN","KMPDTP5",29,0)
 Q:'KMPDTSEC
"RTN","KMPDTP5",30,0)
 ;
"RTN","KMPDTP5",31,0)
 ; search by
"RTN","KMPDTP5",32,0)
 D SRCHBY^KMPDTU10(.KMPDSRCH,"ORWCV")
"RTN","KMPDTP5",33,0)
 Q:'KMPDSRCH
"RTN","KMPDTP5",34,0)
 ;
"RTN","KMPDTP5",35,0)
 ; select output device.
"RTN","KMPDTP5",36,0)
 S %ZIS="Q",%ZIS("A")="Device: ",%ZIS("B")="HOME"
"RTN","KMPDTP5",37,0)
 W ! D ^%ZIS I POP W !,"No action taken." Q
"RTN","KMPDTP5",38,0)
 ; if queued.
"RTN","KMPDTP5",39,0)
 I $D(IO("Q")) K IO("Q") D  Q
"RTN","KMPDTP5",40,0)
 .S ZTDESC=KMPDTTL
"RTN","KMPDTP5",41,0)
 .S ZTRTN="EN1^KMPDTP5"
"RTN","KMPDTP5",42,0)
 .F I="KMPDATE()","KMPDSRCH()","KMPDTSEC","KMPDTTL" S ZTSAVE(I)=""
"RTN","KMPDTP5",43,0)
 .D ^%ZTLOAD W:$G(ZTSK) !,"Task #",ZTSK
"RTN","KMPDTP5",44,0)
 .D EXIT
"RTN","KMPDTP5",45,0)
 ;
"RTN","KMPDTP5",46,0)
 ; if output to terminal display message.
"RTN","KMPDTP5",47,0)
 W:$E(IOST,1,2)="C-" !,"Compiling timing stats..."
"RTN","KMPDTP5",48,0)
 D EN1
"RTN","KMPDTP5",49,0)
 ;
"RTN","KMPDTP5",50,0)
 Q
"RTN","KMPDTP5",51,0)
 ;
"RTN","KMPDTP5",52,0)
EN1 ;-- entry point from taskman
"RTN","KMPDTP5",53,0)
 Q:'$D(KMPDATE)
"RTN","KMPDTP5",54,0)
 Q:'$D(KMPDSRCH)
"RTN","KMPDTP5",55,0)
 Q:'$G(KMPDTSEC)
"RTN","KMPDTP5",56,0)
 Q:$G(KMPDTTL)=""
"RTN","KMPDTP5",57,0)
 ;
"RTN","KMPDTP5",58,0)
 K ^TMP($J)
"RTN","KMPDTP5",59,0)
 D DATA,PRINT,EXIT
"RTN","KMPDTP5",60,0)
 K ^TMP($J)
"RTN","KMPDTP5",61,0)
 Q
"RTN","KMPDTP5",62,0)
 ;
"RTN","KMPDTP5",63,0)
DATA ;-- compile data
"RTN","KMPDTP5",64,0)
 ;
"RTN","KMPDTP5",65,0)
 Q:'$D(KMPDATE)
"RTN","KMPDTP5",66,0)
 Q:'$G(KMPDSRCH)
"RTN","KMPDTP5",67,0)
 Q:'$G(KMPDTSEC)
"RTN","KMPDTP5",68,0)
 ;
"RTN","KMPDTP5",69,0)
 N DATA,DATE,DATE1,DELTA,DOT,END,GBL,HOUR,HR,I,IEN,QUEUED,TIME,XREF
"RTN","KMPDTP5",70,0)
 ;
"RTN","KMPDTP5",71,0)
 S DOT=1,QUEUED=$D(ZTQUEUED)
"RTN","KMPDTP5",72,0)
 ; set up HOUR() array
"RTN","KMPDTP5",73,0)
 F I=1:1:24 S:$P(KMPDATE(1),",",I)'="" HOUR(+$P(KMPDATE(1),",",I))=""
"RTN","KMPDTP5",74,0)
 Q:'$D(HOUR)
"RTN","KMPDTP5",75,0)
 S DATE=$P(KMPDATE(0),U)-.1,END=$P(KMPDATE(0),U,2)+.9
"RTN","KMPDTP5",76,0)
 Q:'DATE!('END)
"RTN","KMPDTP5",77,0)
 S GBL=$$GLOBAL(.KMPDSRCH) Q:GBL=""
"RTN","KMPDTP5",78,0)
 F  S DATE=$O(@GBL@(DATE)) Q:'DATE!(DATE>END)  D 
"RTN","KMPDTP5",79,0)
 .; determine hour
"RTN","KMPDTP5",80,0)
 .S HR=+$E($P(DATE,".",2),1,2) S:HR="" HR="0"
"RTN","KMPDTP5",81,0)
 .; quit if not in HOUR() array
"RTN","KMPDTP5",82,0)
 .Q:'$D(HOUR(HR))
"RTN","KMPDTP5",83,0)
 .; hour & second
"RTN","KMPDTP5",84,0)
 .S TIME=$E($P(DATE,".",2),1,4) Q:'TIME
"RTN","KMPDTP5",85,0)
 .; insert colon (:) between hour & second
"RTN","KMPDTP5",86,0)
 .S TIME=$E(TIME,1,2)_":"_$E(TIME,3,4)
"RTN","KMPDTP5",87,0)
 .; date without time
"RTN","KMPDTP5",88,0)
 .S DATE1=$P(DATE,".")
"RTN","KMPDTP5",89,0)
 .S IEN=0
"RTN","KMPDTP5",90,0)
 .F  S IEN=$O(@GBL@(DATE,IEN)) Q:'IEN  D 
"RTN","KMPDTP5",91,0)
 ..Q:'$D(^KMPD(8973.2,IEN,0))  S DATA=^(0) Q:DATA=""
"RTN","KMPDTP5",92,0)
 ..S DOT=DOT+1 W:'QUEUED&('(DOT#1000)) "."
"RTN","KMPDTP5",93,0)
 ..S DELTA=$P(DATA,U,4)
"RTN","KMPDTP5",94,0)
 ..; quit if delta is less than threshold
"RTN","KMPDTP5",95,0)
 ..Q:DELTA<KMPDTSEC
"RTN","KMPDTP5",96,0)
 ..S ^TMP($J,DATE1,TIME)=DATA
"RTN","KMPDTP5",97,0)
 ..; new person - external format
"RTN","KMPDTP5",98,0)
 ..S $P(^TMP($J,DATE1,TIME),U,5)=$P($G(^VA(200,+$P(DATA,U,5),0)),U)
"RTN","KMPDTP5",99,0)
 ;
"RTN","KMPDTP5",100,0)
 Q
"RTN","KMPDTP5",101,0)
 ;
"RTN","KMPDTP5",102,0)
PRINT ;-- print data
"RTN","KMPDTP5",103,0)
 ;
"RTN","KMPDTP5",104,0)
 D HDR
"RTN","KMPDTP5",105,0)
 Q:'$D(^TMP($J))
"RTN","KMPDTP5",106,0)
 N CONT,DATE,I,TOTAL
"RTN","KMPDTP5",107,0)
 S DATE="",CONT=1,TOTAL=0
"RTN","KMPDTP5",108,0)
 F  S DATE=$O(^TMP($J,DATE)) Q:'DATE  D  Q:'CONT
"RTN","KMPDTP5",109,0)
 .W !,$$FMTE^XLFDT(DATE,2) S HR=""
"RTN","KMPDTP5",110,0)
 .F  S HR=$O(^TMP($J,DATE,HR)) Q:HR=""  D  Q:'CONT
"RTN","KMPDTP5",111,0)
 ..I $Y>(IOSL-4) D  Q:'CONT
"RTN","KMPDTP5",112,0)
 ...D CONTINUE^KMPDUTL4("",1,.CONT) Q:'CONT
"RTN","KMPDTP5",113,0)
 ...D HDR W !,$$FMTE^XLFDT(DATE,2)
"RTN","KMPDTP5",114,0)
 ..W ?10,HR
"RTN","KMPDTP5",115,0)
 ..S DATA=^TMP($J,DATE,HR),TOTAL=TOTAL+1
"RTN","KMPDTP5",116,0)
 ..; user name
"RTN","KMPDTP5",117,0)
 ..W ?16,$S($P(DATA,U,5)]"":$E($P(DATA,U,5),1,15),1:"N/A")
"RTN","KMPDTP5",118,0)
 ..; client name
"RTN","KMPDTP5",119,0)
 ..W ?33,$S($P(DATA,U,6)]"":$E($P(DATA,U,6),1,15),1:"N/A")
"RTN","KMPDTP5",120,0)
 ..; ip address
"RTN","KMPDTP5",121,0)
 ..W ?50,$S($P(DATA,U,9)]"":$P(DATA,U,9),1:"N/A")
"RTN","KMPDTP5",122,0)
 ..; server delta
"RTN","KMPDTP5",123,0)
 ..W ?67,$J($P(DATA,U,4),8)
"RTN","KMPDTP5",124,0)
 ..W ! W:$E($O(^TMP($J,DATE,HR)),1,2)'=$E(HR,1,2) !
"RTN","KMPDTP5",125,0)
 ;
"RTN","KMPDTP5",126,0)
 ;I TOTAL W !!?3,"Total Count: ",$J($FN(TOTAL,",",0),$L(TOTAL)+1)
"RTN","KMPDTP5",127,0)
 ;
"RTN","KMPDTP5",128,0)
 ; pause if output to terminal
"RTN","KMPDTP5",129,0)
 I CONT D CONTINUE^KMPDUTL4("Press RETURN to continue",1)
"RTN","KMPDTP5",130,0)
 ;
"RTN","KMPDTP5",131,0)
 Q
"RTN","KMPDTP5",132,0)
 ;
"RTN","KMPDTP5",133,0)
HDR ;-- print header
"RTN","KMPDTP5",134,0)
 W @IOF
"RTN","KMPDTP5",135,0)
 S X=$G(KMPDTTL)
"RTN","KMPDTP5",136,0)
 W !?(80-$L(X)\2),X
"RTN","KMPDTP5",137,0)
 S X=$G(KMPDATE(0)),X=$P(X,U,3)_" - "_$P(X,U,4)
"RTN","KMPDTP5",138,0)
 W !?(80-$L(X)\2),X,?61,"Printed: ",$$FMTE^XLFDT(DT,2)
"RTN","KMPDTP5",139,0)
 S X=$P($G(KMPDSRCH),U,2)_": "
"RTN","KMPDTP5",140,0)
 S X=X_$P($G(KMPDSRCH(1)),U,$S((+$G(KMPDSRCH))=1:2,1:1))
"RTN","KMPDTP5",141,0)
 W !?(80-$L(X)\2),X
"RTN","KMPDTP5",142,0)
 S X="Threshold: "_$G(KMPDTSEC)_" seconds"
"RTN","KMPDTP5",143,0)
 W !?(80-$L(X)\2),X
"RTN","KMPDTP5",144,0)
 W !
"RTN","KMPDTP5",145,0)
 W !,"Date",?10,"Time",?16,"User Name",?33,"Client Name",?50,"IP Address",?67,"Time-to-Load"
"RTN","KMPDTP5",146,0)
 W !,$$REPEAT^XLFSTR("-",IOM)
"RTN","KMPDTP5",147,0)
 ;
"RTN","KMPDTP5",148,0)
 Q
"RTN","KMPDTP5",149,0)
 ;
"RTN","KMPDTP5",150,0)
EXIT ;-- cleanup on exit
"RTN","KMPDTP5",151,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","KMPDTP5",152,0)
 D ^%ZISC
"RTN","KMPDTP5",153,0)
 K KMPDATE,KMPDSRCH,KMPDTSEC,KMPDTTL
"RTN","KMPDTP5",154,0)
 Q
"RTN","KMPDTP5",155,0)
 ;
"RTN","KMPDTP5",156,0)
GLOBAL(KMPDSRCH) ;-- extrinsic function
"RTN","KMPDTP5",157,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTP5",158,0)
 ; KMPDSRCH... see above
"RTN","KMPDTP5",159,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTP5",160,0)
 Q:'$G(KMPDSRCH) ""
"RTN","KMPDTP5",161,0)
 N GLOBAL,TYPE
"RTN","KMPDTP5",162,0)
 S GLOBAL=""
"RTN","KMPDTP5",163,0)
 S TYPE=+$G(KMPDSRCH)
"RTN","KMPDTP5",164,0)
 Q:'TYPE ""
"RTN","KMPDTP5",165,0)
 ; username
"RTN","KMPDTP5",166,0)
 I TYPE=1 S GLOBAL=$NA(^KMPD(8973.2,"ASSNPDTTM","ORWCV",$P(KMPDSRCH(1),U)))
"RTN","KMPDTP5",167,0)
 ; client name
"RTN","KMPDTP5",168,0)
 I TYPE=2 S GLOBAL=$NA(^KMPD(8973.2,"ASSCLDTTM","ORWCV",KMPDSRCH(1)))
"RTN","KMPDTP5",169,0)
 ; ip address
"RTN","KMPDTP5",170,0)
 I TYPE=3 S GLOBAL=$NA(^KMPD(8973.2,"ASSIPDTTM","ORWCV",KMPDSRCH(1)))
"RTN","KMPDTP5",171,0)
 ; any occurrence
"RTN","KMPDTP5",172,0)
 I TYPE=4 S GLOBAL=$NA(^KMPD(8973.2,"ASSDTTM","ORWCV"))
"RTN","KMPDTP5",173,0)
 Q GLOBAL
"RTN","KMPDTP6")
0^13^B26626387
"RTN","KMPDTP6",1,0)
KMPDTP6 ;OAK/RAK - CP Timing Real-Time Threshold Alert ;2/17/04  09:39
"RTN","KMPDTP6",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDTP6",3,0)
 ;
"RTN","KMPDTP6",4,0)
EN ;-- entry point
"RTN","KMPDTP6",5,0)
 ;
"RTN","KMPDTP6",6,0)
 N I,KMPDHOUR,KMPDSRCH,KMPDTSEC,KMPDTTL,POP,X,Y
"RTN","KMPDTP6",7,0)
 N ZTDESC,ZTRTN,ZTRSAVE,ZTSK,%ZIS
"RTN","KMPDTP6",8,0)
 ;
"RTN","KMPDTP6",9,0)
 S KMPDTTL=" Coversheet Time-to-Load Alert Report > Real-Time "
"RTN","KMPDTP6",10,0)
 D HDR^KMPDUTL4(KMPDTTL)
"RTN","KMPDTP6",11,0)
 W !
"RTN","KMPDTP6",12,0)
 W !?7,"This alerting report shows the particular coversheet loads"
"RTN","KMPDTP6",13,0)
 W !?7,"that have excessive time-to-load values for TODAY (Real-Time)."
"RTN","KMPDTP6",14,0)
 W !?7,"This report will search for a particular person, a particular"
"RTN","KMPDTP6",15,0)
 W !?7,"client name or IP address."
"RTN","KMPDTP6",16,0)
 W !
"RTN","KMPDTP6",17,0)
 ;
"RTN","KMPDTP6",18,0)
 ; if no data
"RTN","KMPDTP6",19,0)
 I $O(^KMPTMP("KMPDT","ORWCV",""))="" D  Q
"RTN","KMPDTP6",20,0)
 .W !!?7,"*** There is currently no data in global ^KMPTMP(""KMPDT"",""ORWCV"") ***"
"RTN","KMPDTP6",21,0)
 ;
"RTN","KMPDTP6",22,0)
 ; hours
"RTN","KMPDTP6",23,0)
 S KMPDHOUR=$$RLTMHR^KMPDTU11(0,1,1)
"RTN","KMPDTP6",24,0)
 Q:KMPDHOUR=""
"RTN","KMPDTP6",25,0)
 ;
"RTN","KMPDTP6",26,0)
 ; time-to-load threshold seconds
"RTN","KMPDTP6",27,0)
 S KMPDTSEC=$$TTLSEC^KMPDTU10
"RTN","KMPDTP6",28,0)
 Q:'KMPDTSEC
"RTN","KMPDTP6",29,0)
 ;
"RTN","KMPDTP6",30,0)
 ; search by
"RTN","KMPDTP6",31,0)
 D SRCHBY^KMPDTU10(.KMPDSRCH,"ORWCV",1)
"RTN","KMPDTP6",32,0)
 Q:'KMPDSRCH
"RTN","KMPDTP6",33,0)
 ;
"RTN","KMPDTP6",34,0)
 ; select output device.
"RTN","KMPDTP6",35,0)
 S %ZIS="Q",%ZIS("A")="Device: ",%ZIS("B")="HOME"
"RTN","KMPDTP6",36,0)
 W ! D ^%ZIS I POP W !,"No action taken." Q
"RTN","KMPDTP6",37,0)
 ; if queued.
"RTN","KMPDTP6",38,0)
 I $D(IO("Q")) K IO("Q") D  Q
"RTN","KMPDTP6",39,0)
 .S ZTDESC=KMPDTTL
"RTN","KMPDTP6",40,0)
 .S ZTRTN="EN1^KMPDTP6"
"RTN","KMPDTP6",41,0)
 .F I="KMPDHOUR","KMPDSRCH()","KMPDTSEC","KMPDTTL" S ZTSAVE(I)=""
"RTN","KMPDTP6",42,0)
 .D ^%ZTLOAD W:$G(ZTSK) !,"Task #",ZTSK
"RTN","KMPDTP6",43,0)
 .D EXIT
"RTN","KMPDTP6",44,0)
 ;
"RTN","KMPDTP6",45,0)
 ; if output to terminal display message.
"RTN","KMPDTP6",46,0)
 W:$E(IOST,1,2)="C-" !,"Compiling timing stats..."
"RTN","KMPDTP6",47,0)
 D EN1
"RTN","KMPDTP6",48,0)
 ;
"RTN","KMPDTP6",49,0)
 Q
"RTN","KMPDTP6",50,0)
 ;
"RTN","KMPDTP6",51,0)
EN1 ;-- entry point from taskman
"RTN","KMPDTP6",52,0)
 Q:'$D(KMPDHOUR)
"RTN","KMPDTP6",53,0)
 Q:'$D(KMPDSRCH)
"RTN","KMPDTP6",54,0)
 Q:'$G(KMPDTSEC)
"RTN","KMPDTP6",55,0)
 Q:$G(KMPDTTL)=""
"RTN","KMPDTP6",56,0)
 ;
"RTN","KMPDTP6",57,0)
 K ^TMP($J)
"RTN","KMPDTP6",58,0)
 D DATA,PRINT,EXIT
"RTN","KMPDTP6",59,0)
 K ^TMP($J)
"RTN","KMPDTP6",60,0)
 Q
"RTN","KMPDTP6",61,0)
 ;
"RTN","KMPDTP6",62,0)
DATA ;-- compile data
"RTN","KMPDTP6",63,0)
 ;
"RTN","KMPDTP6",64,0)
 Q:'$D(KMPDHOUR)
"RTN","KMPDTP6",65,0)
 Q:'$G(KMPDSRCH)
"RTN","KMPDTP6",66,0)
 Q:'$G(KMPDTSEC)
"RTN","KMPDTP6",67,0)
 ;
"RTN","KMPDTP6",68,0)
 N DATA,DATA1,DATE,DATE1,DELTA,DOT,HOUR,HR,I,QUEUED,TIME
"RTN","KMPDTP6",69,0)
 ;
"RTN","KMPDTP6",70,0)
 S DOT=1,QUEUED=$D(ZTQUEUED)
"RTN","KMPDTP6",71,0)
 ; set up HOUR() array
"RTN","KMPDTP6",72,0)
 F I=1:1:24 S:$P(KMPDHOUR,",",I)'="" HOUR(+$P(KMPDHOUR,",",I))=""
"RTN","KMPDTP6",73,0)
 Q:'$D(HOUR)
"RTN","KMPDTP6",74,0)
 S I=""
"RTN","KMPDTP6",75,0)
 F  S I=$O(^KMPTMP("KMPDT","ORWCV",I)) Q:I=""  S DATA=^(I) I DATA]"" D 
"RTN","KMPDTP6",76,0)
 .S DOT=DOT+1 W:'QUEUED&('(DOT#1000)) "."
"RTN","KMPDTP6",77,0)
 .; start/end date/time in fileman format
"RTN","KMPDTP6",78,0)
 .S DATE(1)=$$HTFM^XLFDT($P(DATA,U)),DATE(2)=$$HTFM^XLFDT($P(DATA,U,2))
"RTN","KMPDTP6",79,0)
 .S DELTA=$$HDIFF^XLFDT($P(DATA,U,2),$P(DATA,U),2)
"RTN","KMPDTP6",80,0)
 .Q:DELTA<KMPDTSEC
"RTN","KMPDTP6",81,0)
 .Q:'DATE(1)!('DATE(2))
"RTN","KMPDTP6",82,0)
 .; determine hour
"RTN","KMPDTP6",83,0)
 .S HR=+$E($P(DATE(1),".",2),1,2) S:HR="" HR="0"
"RTN","KMPDTP6",84,0)
 .; quit if not in HOUR() array
"RTN","KMPDTP6",85,0)
 .Q:'$D(HOUR(HR))
"RTN","KMPDTP6",86,0)
 .; hour & second
"RTN","KMPDTP6",87,0)
 .S TIME=$E($P(DATE(1),".",2),1,4) Q:'TIME
"RTN","KMPDTP6",88,0)
 .; insert colon (:) between hour & second
"RTN","KMPDTP6",89,0)
 .S TIME=$E(TIME,1,2)_":"_$E(TIME,3,4)
"RTN","KMPDTP6",90,0)
 .S:$P(TIME,":",2)="" $P(TIME,":",2)="00"
"RTN","KMPDTP6",91,0)
 .; date without time
"RTN","KMPDTP6",92,0)
 .S DATE1=$P(DATE(1),".") Q:'DATE1
"RTN","KMPDTP6",93,0)
 .S DATA1="^^^"_DELTA_"^"_$P(DATA,U,3)_"^"_$P(DATA,U,4)_"^^^"_$P($P(I," ",2),"-")
"RTN","KMPDTP6",94,0)
 .; quit if no match
"RTN","KMPDTP6",95,0)
 .Q:'$$MATCH
"RTN","KMPDTP6",96,0)
 .S ^TMP($J,DATE1,TIME)=DATA1
"RTN","KMPDTP6",97,0)
 .; new person - external format
"RTN","KMPDTP6",98,0)
 .S $P(^TMP($J,DATE1,TIME),U,5)=$P($G(^VA(200,+$P(DATA,U,3),0)),U)
"RTN","KMPDTP6",99,0)
 ;
"RTN","KMPDTP6",100,0)
 Q
"RTN","KMPDTP6",101,0)
 ;
"RTN","KMPDTP6",102,0)
PRINT ;-- print data
"RTN","KMPDTP6",103,0)
 ;
"RTN","KMPDTP6",104,0)
 D HDR
"RTN","KMPDTP6",105,0)
 Q:'$D(^TMP($J))
"RTN","KMPDTP6",106,0)
 N CONT,DATE,I,TOTAL
"RTN","KMPDTP6",107,0)
 S DATE="",CONT=1,TOTAL=0
"RTN","KMPDTP6",108,0)
 F  S DATE=$O(^TMP($J,DATE)) Q:'DATE  D  Q:'CONT
"RTN","KMPDTP6",109,0)
 .W !,$$FMTE^XLFDT(DATE,2) S HR=""
"RTN","KMPDTP6",110,0)
 .F  S HR=$O(^TMP($J,DATE,HR)) Q:HR=""  D  Q:'CONT
"RTN","KMPDTP6",111,0)
 ..I $Y>(IOSL-4) D  Q:'CONT
"RTN","KMPDTP6",112,0)
 ...D CONTINUE^KMPDUTL4("",1,.CONT) Q:'CONT
"RTN","KMPDTP6",113,0)
 ...D HDR W !,$$FMTE^XLFDT(DATE,2)
"RTN","KMPDTP6",114,0)
 ..W ?10,HR
"RTN","KMPDTP6",115,0)
 ..S DATA=^TMP($J,DATE,HR),TOTAL=TOTAL+1
"RTN","KMPDTP6",116,0)
 ..; user name
"RTN","KMPDTP6",117,0)
 ..W ?16,$S($P(DATA,U,5)]"":$E($P(DATA,U,5),1,15),1:"N/A")
"RTN","KMPDTP6",118,0)
 ..; client name
"RTN","KMPDTP6",119,0)
 ..W ?33,$S($P(DATA,U,6)]"":$E($P(DATA,U,6),1,15),1:"N/A")
"RTN","KMPDTP6",120,0)
 ..; ip address
"RTN","KMPDTP6",121,0)
 ..W ?50,$S($P(DATA,U,9)]"":$P(DATA,U,9),1:"N/A")
"RTN","KMPDTP6",122,0)
 ..; server delta
"RTN","KMPDTP6",123,0)
 ..W ?67,$J($P(DATA,U,4),8)
"RTN","KMPDTP6",124,0)
 ..W ! W:$E($O(^TMP($J,DATE,HR)),1,2)'=$E(HR,1,2) !
"RTN","KMPDTP6",125,0)
 ;
"RTN","KMPDTP6",126,0)
 I CONT&(TOTAL) W !!?3,"Total Count: ",$J($FN(TOTAL,",",0),$L(TOTAL)+1)
"RTN","KMPDTP6",127,0)
 ;
"RTN","KMPDTP6",128,0)
 ; pause if output to terminal
"RTN","KMPDTP6",129,0)
 I CONT D CONTINUE^KMPDUTL4("Press RETURN to continue",1)
"RTN","KMPDTP6",130,0)
 ;
"RTN","KMPDTP6",131,0)
 Q
"RTN","KMPDTP6",132,0)
 ;
"RTN","KMPDTP6",133,0)
HDR ;-- print header
"RTN","KMPDTP6",134,0)
 W @IOF
"RTN","KMPDTP6",135,0)
 S X=$G(KMPDTTL)
"RTN","KMPDTP6",136,0)
 W !?(80-$L(X)\2),X
"RTN","KMPDTP6",137,0)
 S X="Hour(s): "_$G(KMPDHOUR)
"RTN","KMPDTP6",138,0)
 W !?(80-$L(X)\2),X,?61,"Printed: ",$$FMTE^XLFDT(DT,2)
"RTN","KMPDTP6",139,0)
 S X=$P($G(KMPDSRCH),U,2)_": "
"RTN","KMPDTP6",140,0)
 S X=X_$P($G(KMPDSRCH(1)),U,$S((+$G(KMPDSRCH))=1:2,1:1))
"RTN","KMPDTP6",141,0)
 W !?(80-$L(X)\2),X
"RTN","KMPDTP6",142,0)
 S X="Threshold: "_$G(KMPDTSEC)_" seconds"
"RTN","KMPDTP6",143,0)
 W !?(80-$L(X)\2),X
"RTN","KMPDTP6",144,0)
 W !
"RTN","KMPDTP6",145,0)
 W !,"Date",?10,"Time",?16,"User Name",?33,"Client Name",?50,"IP Address",?67,"Time-to-Load"
"RTN","KMPDTP6",146,0)
 W !,$$REPEAT^XLFSTR("-",IOM)
"RTN","KMPDTP6",147,0)
 ;
"RTN","KMPDTP6",148,0)
 Q
"RTN","KMPDTP6",149,0)
 ;
"RTN","KMPDTP6",150,0)
EXIT ;-- cleanup on exit
"RTN","KMPDTP6",151,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","KMPDTP6",152,0)
 D ^%ZISC
"RTN","KMPDTP6",153,0)
 K KMPDHOUR,KMPDSRCH,KMPDTSEC,KMPDTTL
"RTN","KMPDTP6",154,0)
 Q
"RTN","KMPDTP6",155,0)
 ;
"RTN","KMPDTP6",156,0)
MATCH() ;-- extrinsic function - check for matches
"RTN","KMPDTP6",157,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTP6",158,0)
 ; Return: 1 - match found
"RTN","KMPDTP6",159,0)
 ;         0 - no match found
"RTN","KMPDTP6",160,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTP6",161,0)
 Q:'$G(KMPDSRCH) 0
"RTN","KMPDTP6",162,0)
 ; any occurrence
"RTN","KMPDTP6",163,0)
 Q:(+KMPDSRCH)=4 1
"RTN","KMPDTP6",164,0)
 ; if not 'any occurrence' then must have kmpdsrch(1) node
"RTN","KMPDTP6",165,0)
 Q:'$D(KMPDSRCH(1)) 0
"RTN","KMPDTP6",166,0)
 ; if not 'any occurrence' must have DATA1 to determine match
"RTN","KMPDTP6",167,0)
 Q:$G(DATA1)=""
"RTN","KMPDTP6",168,0)
 ; user name
"RTN","KMPDTP6",169,0)
 Q:(+KMPDSRCH)=1&($P(DATA1,U,5)'=$P(KMPDSRCH(1),U)) 0
"RTN","KMPDTP6",170,0)
 ; client name
"RTN","KMPDTP6",171,0)
 Q:(+KMPDSRCH)=2&($P(DATA1,U,6)'=$P(KMPDSRCH(1),U)) 0
"RTN","KMPDTP6",172,0)
 ; ip address
"RTN","KMPDTP6",173,0)
 Q:(+KMPDSRCH)=3&($P(DATA1,U,9)'=$P(KMPDSRCH(1),U)) 0
"RTN","KMPDTP6",174,0)
 Q 1
"RTN","KMPDTP7")
0^14^B22954285
"RTN","KMPDTP7",1,0)
KMPDTP7 ;OAK/RAK - Real-Time CP Timing Hourly Time-to-Load ;2/17/04  09:40
"RTN","KMPDTP7",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDTP7",3,0)
 ;
"RTN","KMPDTP7",4,0)
EN ;-- entry point
"RTN","KMPDTP7",5,0)
 N KMPDTTL,POP,X,Y,ZTDESC,ZTRTN,ZTRSAVE,ZTSK,%ZIS
"RTN","KMPDTP7",6,0)
 S KMPDTTL=" Real-Time Hourly Coversheet Time-to-Load (TTL) Report "
"RTN","KMPDTP7",7,0)
 D HDR^KMPDUTL4(KMPDTTL)
"RTN","KMPDTP7",8,0)
 W !
"RTN","KMPDTP7",9,0)
 W !?7,"This report displays the hourly average time-to-load value"
"RTN","KMPDTP7",10,0)
 W !?7,"for the coversheet at this site over 24 hours."
"RTN","KMPDTP7",11,0)
 W !
"RTN","KMPDTP7",12,0)
 ;
"RTN","KMPDTP7",13,0)
 ; if no data
"RTN","KMPDTP7",14,0)
 I $O(^KMPTMP("KMPDT","ORWCV",""))="" D  Q
"RTN","KMPDTP7",15,0)
 .W !!?7,"*** There is currently no data in global ^KMPTMP(""KMPDT"",""ORWCV"") ***"
"RTN","KMPDTP7",16,0)
 ;
"RTN","KMPDTP7",17,0)
 ; select output device.
"RTN","KMPDTP7",18,0)
 S %ZIS="Q",%ZIS("A")="Device: ",%ZIS("B")="HOME"
"RTN","KMPDTP7",19,0)
 W ! D ^%ZIS I POP W !,"No action taken." Q
"RTN","KMPDTP7",20,0)
 ; if queued.
"RTN","KMPDTP7",21,0)
 I $D(IO("Q")) K IO("Q") D  Q
"RTN","KMPDTP7",22,0)
 .S ZTDESC=KMPDTTL
"RTN","KMPDTP7",23,0)
 .S ZTRTN="EN1^KMPDTP7"
"RTN","KMPDTP7",24,0)
 .S ZTSAVE("KMPDTTL")=""
"RTN","KMPDTP7",25,0)
 .D ^%ZTLOAD W:$G(ZTSK) !,"Task #",ZTSK
"RTN","KMPDTP7",26,0)
 .D EXIT
"RTN","KMPDTP7",27,0)
 ;
"RTN","KMPDTP7",28,0)
 ; if output to terminal display message.
"RTN","KMPDTP7",29,0)
 W:$E(IOST,1,2)="C-" !,"Compiling timing stats..."
"RTN","KMPDTP7",30,0)
 D EN1
"RTN","KMPDTP7",31,0)
 ;
"RTN","KMPDTP7",32,0)
 Q
"RTN","KMPDTP7",33,0)
 ;
"RTN","KMPDTP7",34,0)
EN1 ;-- entry point from taskman
"RTN","KMPDTP7",35,0)
 K ^TMP($J)
"RTN","KMPDTP7",36,0)
 D DATA,PRINT,EXIT
"RTN","KMPDTP7",37,0)
 K ^TMP($J)
"RTN","KMPDTP7",38,0)
 Q
"RTN","KMPDTP7",39,0)
 ;
"RTN","KMPDTP7",40,0)
DATA ;-- compile data
"RTN","KMPDTP7",41,0)
 ;
"RTN","KMPDTP7",42,0)
 N DATA,DATA1,DATE,DATE1,DELTA,DOT,HOURS,HR,I,QUEUED,TIME
"RTN","KMPDTP7",43,0)
 ;
"RTN","KMPDTP7",44,0)
 S DOT=1,QUEUED=$D(ZTQUEUED),DATE=$$DT^XLFDT
"RTN","KMPDTP7",45,0)
 ; array with hours
"RTN","KMPDTP7",46,0)
 S HOURS=$$RLTMHR^KMPDTU11(1,0) Q:HOURS=""
"RTN","KMPDTP7",47,0)
 F I=1:1 Q:$P(HOURS,",",I)=""  S ^TMP($J,DATE,$P(HOURS,",",I))=""
"RTN","KMPDTP7",48,0)
 S I="",TOTAL=0
"RTN","KMPDTP7",49,0)
 F  S I=$O(^KMPTMP("KMPDT","ORWCV",I)) Q:I=""  S DATA=^(I) I DATA]"" D 
"RTN","KMPDTP7",50,0)
 .S DOT=DOT+1 W:'QUEUED&('(DOT#1000)) "."
"RTN","KMPDTP7",51,0)
 .; start/end date/time in fileman format
"RTN","KMPDTP7",52,0)
 .S DATE(1)=$$HTFM^XLFDT($P(DATA,U)),DATE(2)=$$HTFM^XLFDT($P(DATA,U,2))
"RTN","KMPDTP7",53,0)
 .Q:'DATE(1)!('DATE(2))
"RTN","KMPDTP7",54,0)
 .S DELTA=$$FMDIFF^XLFDT(DATE(2),DATE(1),2)
"RTN","KMPDTP7",55,0)
 .S:DELTA<0 DELTA=""
"RTN","KMPDTP7",56,0)
 .; determine hour
"RTN","KMPDTP7",57,0)
 .S HR=+$E($P(DATE(1),".",2),1,2) S:HR="" HR="0"
"RTN","KMPDTP7",58,0)
 .; quit if not in HOUR() array
"RTN","KMPDTP7",59,0)
 .;Q:'$D(HOUR(HR))
"RTN","KMPDTP7",60,0)
 .; hour & second
"RTN","KMPDTP7",61,0)
 .S TIME=$E($P(DATE(1),".",2),1,4) Q:'TIME
"RTN","KMPDTP7",62,0)
 .; insert colon (:) between hour & second
"RTN","KMPDTP7",63,0)
 .S TIME=$E(TIME,1,2)_":"_$E(TIME,3,4)
"RTN","KMPDTP7",64,0)
 .S:$P(TIME,":",2)="" $P(TIME,":",2)="00"
"RTN","KMPDTP7",65,0)
 .; date without time
"RTN","KMPDTP7",66,0)
 .S DATE1=$P(DATE(1),".") Q:'DATE1
"RTN","KMPDTP7",67,0)
 .S DATA1="^^^"_DELTA_"^"_$P(DATA,U,3)_"^"_$P(DATA,U,4)_"^^^"_$P($P(I," ",2),"-")
"RTN","KMPDTP7",68,0)
 .;
"RTN","KMPDTP7",69,0)
 .; if delta
"RTN","KMPDTP7",70,0)
 .I $P(DATA1,U,4)'="" D 
"RTN","KMPDTP7",71,0)
 ..; minimum delta
"RTN","KMPDTP7",72,0)
 ..I $P(^TMP($J,DATE,HR),U,2)=""!($P(DATA1,U,4)<$P(^TMP($J,DATE,HR),U,2)) D 
"RTN","KMPDTP7",73,0)
 ...S $P(^TMP($J,DATE,HR),U,2)=$P(DATA1,U,4)
"RTN","KMPDTP7",74,0)
 ..; maximum delta
"RTN","KMPDTP7",75,0)
 ..I $P(DATA1,U,4)>$P(^TMP($J,DATE,HR),U,3) S $P(^TMP($J,DATE,HR),U,3)=$P(DATA1,U,4)
"RTN","KMPDTP7",76,0)
 ..; total delta
"RTN","KMPDTP7",77,0)
 ..S $P(^TMP($J,DATE,HR),U,4)=$P(^TMP($J,DATE,HR),U,4)+$P(DATA1,U,4)
"RTN","KMPDTP7",78,0)
 ..; count
"RTN","KMPDTP7",79,0)
 ..S $P(^TMP($J,DATE,HR),U,5)=$P(^TMP($J,DATE,HR),U,5)+1
"RTN","KMPDTP7",80,0)
 .; if no delta
"RTN","KMPDTP7",81,0)
 .E  S $P(^TMP($J,DATE,HR),U,6)=$P(^TMP($J,DATE,HR),U,6)+1
"RTN","KMPDTP7",82,0)
 ;
"RTN","KMPDTP7",83,0)
 ; average
"RTN","KMPDTP7",84,0)
 F HR=1:1 S I=$P(HOURS,",",HR) Q:I=""  I $P(^TMP($J,DATE,I),U,5) D 
"RTN","KMPDTP7",85,0)
 .S $P(^TMP($J,DATE,I),U)=$P(^TMP($J,DATE,I),U,4)/$P(^TMP($J,DATE,I),U,5)
"RTN","KMPDTP7",86,0)
 ;
"RTN","KMPDTP7",87,0)
 Q
"RTN","KMPDTP7",88,0)
 ;
"RTN","KMPDTP7",89,0)
PRINT ;-- print data
"RTN","KMPDTP7",90,0)
 D HDR
"RTN","KMPDTP7",91,0)
 Q:'$D(^TMP($J))
"RTN","KMPDTP7",92,0)
 N CONT,DATE,HR,I,TOTAL
"RTN","KMPDTP7",93,0)
 S DATE="",CONT=1
"RTN","KMPDTP7",94,0)
 F  S DATE=$O(^TMP($J,DATE)) Q:'DATE  S HR="" D  Q:'CONT
"RTN","KMPDTP7",95,0)
 .S TOTAL=""
"RTN","KMPDTP7",96,0)
 .W !,$$FMTE^XLFDT(DATE,2)
"RTN","KMPDTP7",97,0)
 .F  S HR=$O(^TMP($J,DATE,HR)) Q:HR=""  D  Q:'CONT
"RTN","KMPDTP7",98,0)
 ..; page feed
"RTN","KMPDTP7",99,0)
 ..I $Y>(IOSL-3) D CONTINUE^KMPDUTL4("",1,.CONT) Q:'CONT  D HDR W !
"RTN","KMPDTP7",100,0)
 ..W ?12," ",$S($L(HR)=1:"0",1:""),HR
"RTN","KMPDTP7",101,0)
 ..S DATA=^TMP($J,DATE,HR)
"RTN","KMPDTP7",102,0)
 ..W ?20,$J($FN($P(DATA,U),",",0),10)
"RTN","KMPDTP7",103,0)
 ..W ?34,$J($FN($P(DATA,U,2),",",0),10)
"RTN","KMPDTP7",104,0)
 ..W ?48,$J($FN($P(DATA,U,3),",",0),10)
"RTN","KMPDTP7",105,0)
 ..W ?62,$J($FN($P(DATA,U,5),",",0),10)
"RTN","KMPDTP7",106,0)
 ..W !
"RTN","KMPDTP7",107,0)
 ..S $P(TOTAL,U)=$P(TOTAL,U)+$P(DATA,U,5)
"RTN","KMPDTP7",108,0)
 ..S $P(TOTAL,U,2)=$P(TOTAL,U,2)+$P(DATA,U,6)
"RTN","KMPDTP7",109,0)
 .;
"RTN","KMPDTP7",110,0)
 .; back to DATE level
"RTN","KMPDTP7",111,0)
 .; totals
"RTN","KMPDTP7",112,0)
 .W ?62,"----------",!?62,$J($FN(TOTAL,",",0),10),!
"RTN","KMPDTP7",113,0)
 .W !?12,"Incomplete: ",$J($FN($P(TOTAL,U,2),",",0),$L($P(TOTAL,U,2))+2),!
"RTN","KMPDTP7",114,0)
 .; if another date
"RTN","KMPDTP7",115,0)
 .I $O(^TMP($J,DATE)) D CONTINUE^KMPDUTL4("",1,.CONT) Q:'CONT  D HDR W !
"RTN","KMPDTP7",116,0)
 ;
"RTN","KMPDTP7",117,0)
 I CONT D 
"RTN","KMPDTP7",118,0)
 .; legend
"RTN","KMPDTP7",119,0)
 .W !!?2,"CV  = Coversheet",!?2,"TTL = Time-to-Load"
"RTN","KMPDTP7",120,0)
 .; pause if output to terminal
"RTN","KMPDTP7",121,0)
 .D CONTINUE^KMPDUTL4("Press RETURN to continue",1)
"RTN","KMPDTP7",122,0)
 ;
"RTN","KMPDTP7",123,0)
 Q
"RTN","KMPDTP7",124,0)
 ;
"RTN","KMPDTP7",125,0)
HDR ;-- print header
"RTN","KMPDTP7",126,0)
 W @IOF
"RTN","KMPDTP7",127,0)
 S X=$G(KMPDTTL)
"RTN","KMPDTP7",128,0)
 W !?(80-$L(X)\2),X
"RTN","KMPDTP7",129,0)
 S X=$$FMTE^XLFDT($$DT^XLFDT)
"RTN","KMPDTP7",130,0)
 W !?(80-$L(X)\2),X,?61,"Printed: ",$$FMTE^XLFDT(DT,2)
"RTN","KMPDTP7",131,0)
 W !
"RTN","KMPDTP7",132,0)
 W !?20,"|---------------Seconds---------------|"
"RTN","KMPDTP7",133,0)
 W !,"Date",?12,"Hour",?20,"TTL Average",?34,"TTL Minimum",?48,"TTL Maximum",?62,"# of CV Loads"
"RTN","KMPDTP7",134,0)
 W !,$$REPEAT^XLFSTR("-",IOM)
"RTN","KMPDTP7",135,0)
 ;
"RTN","KMPDTP7",136,0)
 Q
"RTN","KMPDTP7",137,0)
 ;
"RTN","KMPDTP7",138,0)
EXIT ;-- cleanup on exit
"RTN","KMPDTP7",139,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","KMPDTP7",140,0)
 D ^%ZISC
"RTN","KMPDTP7",141,0)
 K KMPDTTL
"RTN","KMPDTP7",142,0)
 Q
"RTN","KMPDTU01")
0^39^B50478287
"RTN","KMPDTU01",1,0)
KMPDTU01 ;OAK/RAK - CM Tools Timing Utility ;2/17/04  09:41
"RTN","KMPDTU01",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDTU01",3,0)
 ;
"RTN","KMPDTU01",4,0)
WEEKLY(KMPDT) ;-- compress daily stats to weekly
"RTN","KMPDTU01",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU01",6,0)
 ; KMPDT.... Compression date in internal fileman formt.  This date
"RTN","KMPDTU01",7,0)
 ;           must be a Sunday.  It represents the date from which the
"RTN","KMPDTU01",8,0)
 ;           previous weeks data should be compressed. 
"RTN","KMPDTU01",9,0)
 ;           Example: if KMPDT = 2981011  then compression will begin
"RTN","KMPDTU01",10,0)
 ;                    on 2981010 (KMPDT-1)
"RTN","KMPDTU01",11,0)
 ; Every Sunday compress the daily stats in file #8973.2 into weekly
"RTN","KMPDTU01",12,0)
 ; and upload the data to the CM RUM National Database
"RTN","KMPDTU01",13,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU01",14,0)
 ;
"RTN","KMPDTU01",15,0)
 Q:'$G(KMPDT)
"RTN","KMPDTU01",16,0)
 ;
"RTN","KMPDTU01",17,0)
 N DATA,DATE,DELTA,END,ERROR,FDA,HOUR,I,IEN,PIECE,PTNP,SDTM,SITE,SS
"RTN","KMPDTU01",18,0)
 N STR,START
"RTN","KMPDTU01",19,0)
 ;
"RTN","KMPDTU01",20,0)
 ; quit if not sunday.
"RTN","KMPDTU01",21,0)
 Q:$$DOW^XLFDT(KMPDT,1)
"RTN","KMPDTU01",22,0)
 ; storage  processed
"RTN","KMPDTU01",23,0)
 K ^TMP($J),^TMP("KMPDTU01",$J)
"RTN","KMPDTU01",24,0)
 ; site info.
"RTN","KMPDTU01",25,0)
 S SITE=$$SITE^VASITE Q:SITE=""
"RTN","KMPDTU01",26,0)
 S DATE=KMPDT
"RTN","KMPDTU01",27,0)
 S (START,END)="",STR=$$NOW^XLFDT
"RTN","KMPDTU01",28,0)
 ;
"RTN","KMPDTU01",29,0)
 W:'$D(ZTQUEUED) !,"Compressing data into weekly format..."
"RTN","KMPDTU01",30,0)
 ; Reverse $order to get previous dates.
"RTN","KMPDTU01",31,0)
 F  S DATE=$O(^KMPD(8973.2,"ADT",DATE),-1) Q:'DATE  D 
"RTN","KMPDTU01",32,0)
 .; If DATE is saturday set START and END dates and kill TMPARRY.
"RTN","KMPDTU01",33,0)
 .I $$DOW^XLFDT(DATE,1)=6 D 
"RTN","KMPDTU01",34,0)
 ..S END=DATE,START=$$FMADD^XLFDT(DATE,-6)
"RTN","KMPDTU01",35,0)
 ..K ^TMP($J)
"RTN","KMPDTU01",36,0)
 .Q:'START
"RTN","KMPDTU01",37,0)
 .;
"RTN","KMPDTU01",38,0)
 .S IEN=0
"RTN","KMPDTU01",39,0)
 .F  S IEN=$O(^KMPD(8973.2,"ADT",DATE,IEN)) Q:'IEN  D 
"RTN","KMPDTU01",40,0)
 ..Q:'$D(^KMPD(8973.2,IEN,0))  S DATA(0)=^(0)
"RTN","KMPDTU01",41,0)
 ..; quit if data has already been sent to national database
"RTN","KMPDTU01",42,0)
 ..Q:$P(DATA(0),U,2)
"RTN","KMPDTU01",43,0)
 ..W:'$D(ZTQUEUED)&('(IEN#1000)) "."
"RTN","KMPDTU01",44,0)
 ..; start date/time      delta
"RTN","KMPDTU01",45,0)
 ..S SDTM=$P(DATA(0),U,3),DELTA=$P(DATA(0),U,4)
"RTN","KMPDTU01",46,0)
 ..; hour
"RTN","KMPDTU01",47,0)
 ..S HOUR=+$E($P(SDTM,".",2),1,2)
"RTN","KMPDTU01",48,0)
 ..; quit if no kmptmp subscript
"RTN","KMPDTU01",49,0)
 ..S SS=$P(DATA(0),U,7)  Q:SS=""
"RTN","KMPDTU01",50,0)
 ..;
"RTN","KMPDTU01",51,0)
 ..S PTNP=$$PTNP^KMPDHU03(SDTM) Q:'PTNP
"RTN","KMPDTU01",52,0)
 ..; piece 4 - prime time
"RTN","KMPDTU01",53,0)
 ..; piece 5 - non-prime time
"RTN","KMPDTU01",54,0)
 ..S PIECE=$S(PTNP=1:4,1:5)
"RTN","KMPDTU01",55,0)
 ..;
"RTN","KMPDTU01",56,0)
 ..S $P(^TMP($J,START,SS),U)=START
"RTN","KMPDTU01",57,0)
 ..S $P(^TMP($J,START,SS),U,3)=SS
"RTN","KMPDTU01",58,0)
 ..S $P(^TMP($J,START,SS),U,PIECE)=$P(^TMP($J,START,SS),U,PIECE)+DELTA
"RTN","KMPDTU01",59,0)
 ..S $P(^TMP($J,START,SS),U,(PIECE+2))=$P(^TMP($J,START,SS),U,(PIECE+2))+1
"RTN","KMPDTU01",60,0)
 ..; hourly delta
"RTN","KMPDTU01",61,0)
 ..S $P(^TMP($J,START,SS,PTNP),U,(HOUR+1))=$P($G(^TMP($J,START,SS,PTNP)),U,(HOUR+1))+DELTA
"RTN","KMPDTU01",62,0)
 ..; hourly occurrences
"RTN","KMPDTU01",63,0)
 ..S $P(^TMP($J,START,SS,PTNP+.1),U,(HOUR+1))=$P($G(^TMP($J,START,SS,PTNP+.1)),U,(HOUR+1))+1
"RTN","KMPDTU01",64,0)
 ..; node 99.1 is for national database (end date^facility name)
"RTN","KMPDTU01",65,0)
 ..S ^TMP($J,START,SS,99.1)=END_"^"_$P(SITE,U,2)_"^"_$P(SITE,U,3)
"RTN","KMPDTU01",66,0)
 ..; add to processed array.
"RTN","KMPDTU01",67,0)
 ..S ^TMP("KMPDTU01",$J,IEN)=""
"RTN","KMPDTU01",68,0)
 .;
"RTN","KMPDTU01",69,0)
 .; Back to DATE level.
"RTN","KMPDTU01",70,0)
 .; If START then transmit data.
"RTN","KMPDTU01",71,0)
 .I DATE=START I $D(^TMP($J)) D TRANSMIT(1) K ^TMP($J)
"RTN","KMPDTU01",72,0)
 ;
"RTN","KMPDTU01",73,0)
 D:$D(^TMP($J)) TRANSMIT(1)
"RTN","KMPDTU01",74,0)
 K ^TMP($J)
"RTN","KMPDTU01",75,0)
 ;
"RTN","KMPDTU01",76,0)
 ; update field .02 (SENT TO CM NATIONAL DATABASE) to 'YES' for all
"RTN","KMPDTU01",77,0)
 ; processed entries.
"RTN","KMPDTU01",78,0)
 W:'$D(ZTQUEUED) !!,"Updating records to reflect transmission..."
"RTN","KMPDTU01",79,0)
 S IEN=0
"RTN","KMPDTU01",80,0)
 F  S IEN=$O(^TMP("KMPDTU01",$J,IEN)) Q:'IEN  D 
"RTN","KMPDTU01",81,0)
 .K FDA,ERROR W:'$D(ZTQUEUED)&('(IEN#1000)) "."
"RTN","KMPDTU01",82,0)
 .S FDA($J,8973.2,IEN_",",.02)=1
"RTN","KMPDTU01",83,0)
 .D FILE^DIE("","FDA($J)","ERROR")
"RTN","KMPDTU01",84,0)
 ;
"RTN","KMPDTU01",85,0)
 K ^TMP("KMPDTU01",$J)
"RTN","KMPDTU01",86,0)
 ;
"RTN","KMPDTU01",87,0)
 W:'$D(ZTQUEUED) !!,"Finished!"
"RTN","KMPDTU01",88,0)
 ;
"RTN","KMPDTU01",89,0)
 Q
"RTN","KMPDTU01",90,0)
 ;
"RTN","KMPDTU01",91,0)
TRANSMIT(KMPDTWD) ;-- format data into e-mail and send to cm national database
"RTN","KMPDTU01",92,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU01",93,0)
 ; KMPDTWD... Weekly/Daily
"RTN","KMPDTU01",94,0)
 ;             1 - weekly
"RTN","KMPDTU01",95,0)
 ;             2 - daily
"RTN","KMPDTU01",96,0)
 ;
"RTN","KMPDTU01",97,0)
 ; D = date
"RTN","KMPDTU01",98,0)
 ; S = subscript
"RTN","KMPDTU01",99,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU01",100,0)
 ;
"RTN","KMPDTU01",101,0)
 Q:'$G(KMPDTWD)
"RTN","KMPDTU01",102,0)
 Q:'$D(^TMP($J))
"RTN","KMPDTU01",103,0)
 ;
"RTN","KMPDTU01",104,0)
 N CPU,D,DATE,I,IEN,LN,S,XMSUB,X,XMTEXT,XMY,XMZ,Y,Z
"RTN","KMPDTU01",105,0)
 ;
"RTN","KMPDTU01",106,0)
 K ^TMP("KMPDTU01-2",$J)
"RTN","KMPDTU01",107,0)
 ;
"RTN","KMPDTU01",108,0)
 S DATE=$S(KMPDTWD=1:$G(START),1:$G(KMPDT))
"RTN","KMPDTU01",109,0)
 S LN=0
"RTN","KMPDTU01",110,0)
 ; version and patch info
"RTN","KMPDTU01",111,0)
 S LN=LN+1,^TMP("KMPDTU01-2",$J,LN)="VERSION="_$$VERSION^KMPDUTL
"RTN","KMPDTU01",112,0)
 ; system information
"RTN","KMPDTU01",113,0)
 S LN=LN+1,^TMP("KMPDTU01-2",$J,LN)="SYSINFO="_$$SYSINFO^KMPDUTL1()
"RTN","KMPDTU01",114,0)
 ; send cpu data to national database
"RTN","KMPDTU01",115,0)
 D CPU^KMPDUTL5(.CPU) I $D(CPU) S I="" F  S I=$O(CPU(I)) Q:I=""  D 
"RTN","KMPDTU01",116,0)
 .S LN=LN+1,^TMP("KMPDTU01-2",$J,LN)="CPU="_I_U_CPU(I)
"RTN","KMPDTU01",117,0)
 ;
"RTN","KMPDTU01",118,0)
 W:'$D(ZTQUEUED) !!,"Formatting ",$$FMTE^XLFDT($G(START))," data for mail delivery..."
"RTN","KMPDTU01",119,0)
 ; reformat so that data is in ^TMP("KMPR UPLOAD",$J,LN)= format.
"RTN","KMPDTU01",120,0)
 S IEN=0,D=""
"RTN","KMPDTU01",121,0)
 F  S D=$O(^TMP($J,D)) Q:D=""  S S="" W "." D 
"RTN","KMPDTU01",122,0)
 .W !,D
"RTN","KMPDTU01",123,0)
 .F  S S=$O(^TMP($J,D,S)) Q:S=""  D 
"RTN","KMPDTU01",124,0)
 ..S IEN=IEN+1,LN=LN+1
"RTN","KMPDTU01",125,0)
 ..S ^TMP("KMPDTU01-2",$J,LN)=IEN_",0)="_^TMP($J,D,S)
"RTN","KMPDTU01",126,0)
 ..; if prime time
"RTN","KMPDTU01",127,0)
 ..I $D(^TMP($J,D,S,1)) D 
"RTN","KMPDTU01",128,0)
 ...S LN=LN+1
"RTN","KMPDTU01",129,0)
 ...S ^TMP("KMPDTU01-2",$J,LN)=IEN_",1)="_^TMP($J,D,S,1)
"RTN","KMPDTU01",130,0)
 ...S LN=LN+1
"RTN","KMPDTU01",131,0)
 ...S ^TMP("KMPDTU01-2",$J,LN)=IEN_",1.1)="_^TMP($J,D,S,1.1)
"RTN","KMPDTU01",132,0)
 ..; if non-prime time
"RTN","KMPDTU01",133,0)
 ..I $D(^TMP($J,D,S,2)) D 
"RTN","KMPDTU01",134,0)
 ...S LN=LN+1
"RTN","KMPDTU01",135,0)
 ...S ^TMP("KMPDTU01-2",$J,LN)=IEN_",2)="_^TMP($J,D,S,2)
"RTN","KMPDTU01",136,0)
 ...S LN=LN+1
"RTN","KMPDTU01",137,0)
 ...S ^TMP("KMPDTU01-2",$J,LN)=IEN_",2.1)="_^TMP($J,D,S,2.1)
"RTN","KMPDTU01",138,0)
 ..; node 99.1 for national database
"RTN","KMPDTU01",139,0)
 ..S LN=LN+1,^TMP("KMPDTU01-2",$J,LN)=IEN_",99.1)="_$G(^TMP($J,D,S,99.1))
"RTN","KMPDTU01",140,0)
 ;
"RTN","KMPDTU01",141,0)
 ; quit if no data to transmit.
"RTN","KMPDTU01",142,0)
 Q:'$D(^TMP("KMPDTU01-2",$J))
"RTN","KMPDTU01",143,0)
 ; send packman message.
"RTN","KMPDTU01",144,0)
 S XMTEXT="^TMP(""KMPDTU01-2"","_$J_","
"RTN","KMPDTU01",145,0)
 S XMSUB=$S(KMPDTWD=1:"CM TIMING DATA~",1:"CM TIMING DATA-DAILY~")_$P(SITE,U,2)_" ("_$P(SITE,U,3)_")~"_$$FMTE^XLFDT(DATE)
"RTN","KMPDTU01",146,0)
 S XMY("S.KMP6-TIMING-SERVER@FO-ALBANY.MED.VA.GOV")=""
"RTN","KMPDTU01",147,0)
 S XMY("CAPACITY,MANAGEMENT@FO-ALBANY.MED.VA.GOV")=""
"RTN","KMPDTU01",148,0)
 D ^XMD
"RTN","KMPDTU01",149,0)
 W:'$D(ZTQUEUED) !,"Message #",$G(XMZ)," sent..."
"RTN","KMPDTU01",150,0)
 K ^TMP("KMPDTU01-2",$J)
"RTN","KMPDTU01",151,0)
 ;
"RTN","KMPDTU01",152,0)
 Q
"RTN","KMPDTU01",153,0)
 ;
"RTN","KMPDTU01",154,0)
DAILY(KMPDT) ;-- transmit daily stats to national database
"RTN","KMPDTU01",155,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU01",156,0)
 ; KMPDT.... Compression date in internal fileman formt. It represents 
"RTN","KMPDTU01",157,0)
 ;           the date from which the previous days data should be
"RTN","KMPDTU01",158,0)
 ;           transmitted. 
"RTN","KMPDTU01",159,0)
 ;           Example: if KMPDT = 2981011  then tranmission will be
"RTN","KMPDTU01",160,0)
 ;                    on 2981010 (KMPDT-1)
"RTN","KMPDTU01",161,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU01",162,0)
 ;
"RTN","KMPDTU01",163,0)
 Q:'$G(KMPDT)
"RTN","KMPDTU01",164,0)
 ;
"RTN","KMPDTU01",165,0)
 N DATA,DELTA,ERROR,FDA,HOUR,I,IEN,PIECE,PTNP,SDTM,SITE,SS
"RTN","KMPDTU01",166,0)
 N STR
"RTN","KMPDTU01",167,0)
 ;
"RTN","KMPDTU01",168,0)
 ; storage  processed
"RTN","KMPDTU01",169,0)
 K ^TMP($J),^TMP("KMPDTU01",$J)
"RTN","KMPDTU01",170,0)
 ; site info.
"RTN","KMPDTU01",171,0)
 S SITE=$$SITE^VASITE Q:SITE=""
"RTN","KMPDTU01",172,0)
 S IEN=0
"RTN","KMPDTU01",173,0)
 W:'$D(ZTQUEUED) !,"Compressing data into daily format..."
"RTN","KMPDTU01",174,0)
 F  S IEN=$O(^KMPD(8973.2,"ADT",KMPDT,IEN)) Q:'IEN  D 
"RTN","KMPDTU01",175,0)
 .Q:'$D(^KMPD(8973.2,IEN,0))  S DATA(0)=^(0)
"RTN","KMPDTU01",176,0)
 .; quit if daily data has already been sent to national database
"RTN","KMPDTU01",177,0)
 .;Q:$P(DATA(0),U,10)
"RTN","KMPDTU01",178,0)
 .W:'$D(ZTQUEUED)&('(IEN#1000)) "."
"RTN","KMPDTU01",179,0)
 .; start date/time      delta
"RTN","KMPDTU01",180,0)
 .S SDTM=$P(DATA(0),U,3),DELTA=$P(DATA(0),U,4)
"RTN","KMPDTU01",181,0)
 .; hour
"RTN","KMPDTU01",182,0)
 .S HOUR=+$E($P(SDTM,".",2),1,2)
"RTN","KMPDTU01",183,0)
 .; quit if no kmptmp subscript
"RTN","KMPDTU01",184,0)
 .S SS=$P(DATA(0),U,7)  Q:SS=""
"RTN","KMPDTU01",185,0)
 .;
"RTN","KMPDTU01",186,0)
 .S PTNP=$$PTNP^KMPDHU03(SDTM) Q:'PTNP
"RTN","KMPDTU01",187,0)
 .; piece 4 - prime time
"RTN","KMPDTU01",188,0)
 .; piece 5 - non-prime time
"RTN","KMPDTU01",189,0)
 .S PIECE=$S(PTNP=1:4,1:5)
"RTN","KMPDTU01",190,0)
 .;
"RTN","KMPDTU01",191,0)
 .S $P(^TMP($J,KMPDT,SS),U)=KMPDT
"RTN","KMPDTU01",192,0)
 .S $P(^TMP($J,KMPDT,SS),U,3)=SS
"RTN","KMPDTU01",193,0)
 .S $P(^TMP($J,KMPDT,SS),U,PIECE)=$P(^TMP($J,KMPDT,SS),U,PIECE)+DELTA
"RTN","KMPDTU01",194,0)
 .S $P(^TMP($J,KMPDT,SS),U,(PIECE+2))=$P(^TMP($J,KMPDT,SS),U,(PIECE+2))+1
"RTN","KMPDTU01",195,0)
 .; hourly delta
"RTN","KMPDTU01",196,0)
 .S $P(^TMP($J,KMPDT,SS,PTNP),U,(HOUR+1))=$P($G(^TMP($J,KMPDT,SS,PTNP)),U,(HOUR+1))+DELTA
"RTN","KMPDTU01",197,0)
 .; hourly occurrences
"RTN","KMPDTU01",198,0)
 .S $P(^TMP($J,KMPDT,SS,PTNP+.1),U,(HOUR+1))=$P($G(^TMP($J,KMPDT,SS,PTNP+.1)),U,(HOUR+1))+1
"RTN","KMPDTU01",199,0)
 .; node 99.1 is for national database (end date^facility name)
"RTN","KMPDTU01",200,0)
 .S ^TMP($J,KMPDT,SS,99.1)=KMPDT_"^"_$P(SITE,U,2)_"^"_$P(SITE,U,3)
"RTN","KMPDTU01",201,0)
 .; add to processed array.
"RTN","KMPDTU01",202,0)
 .S ^TMP("KMPDTU01",$J,IEN)=""
"RTN","KMPDTU01",203,0)
 ;
"RTN","KMPDTU01",204,0)
 D:$D(^TMP($J)) TRANSMIT(2)
"RTN","KMPDTU01",205,0)
 K ^TMP($J)
"RTN","KMPDTU01",206,0)
 ;
"RTN","KMPDTU01",207,0)
 ; update field .1 (DAILY - SENT TO CM NATIONAL DB) to 'YES' for all
"RTN","KMPDTU01",208,0)
 ; processed entries.
"RTN","KMPDTU01",209,0)
 W:'$D(ZTQUEUED) !!,"Updating records to reflect transmission..."
"RTN","KMPDTU01",210,0)
 S IEN=0
"RTN","KMPDTU01",211,0)
 F  S IEN=$O(^TMP("KMPDTU01",$J,IEN)) Q:'IEN  D 
"RTN","KMPDTU01",212,0)
 .K FDA,ERROR W:'$D(ZTQUEUED)&('(IEN#1000)) "."
"RTN","KMPDTU01",213,0)
 .S FDA($J,8973.2,IEN_",",.1)=1
"RTN","KMPDTU01",214,0)
 .D FILE^DIE("","FDA($J)","ERROR")
"RTN","KMPDTU01",215,0)
 ;
"RTN","KMPDTU01",216,0)
 K ^TMP("KMPDTU01",$J)
"RTN","KMPDTU01",217,0)
 ;
"RTN","KMPDTU01",218,0)
 W:'$D(ZTQUEUED) !!,"Finished!"
"RTN","KMPDTU01",219,0)
 ;
"RTN","KMPDTU01",220,0)
 Q
"RTN","KMPDTU02")
0^15^B7805759
"RTN","KMPDTU02",1,0)
KMPDTU02 ;OAK/RAK - CP Tools Compile & File Daily Timing Stats ;2/17/04  09:43
"RTN","KMPDTU02",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDTU02",3,0)
 ;
"RTN","KMPDTU02",4,0)
DAILY ;(KMPDST,KMPDEN);-entry point
"RTN","KMPDTU02",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU02",6,0)
 ; KMPDST... Start date in internal fileman format.
"RTN","KMPDTU02",7,0)
 ; KMPDEN... End date in internal fileman format.
"RTN","KMPDTU02",8,0)
 ;
"RTN","KMPDTU02",9,0)
 ; This API gathers Timing data from ^KMPTMP("KMPDT") and stores it in
"RTN","KMPDTU02",10,0)
 ; file 8973.2 (CP TIMING)
"RTN","KMPDTU02",11,0)
 ;
"RTN","KMPDTU02",12,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU02",13,0)
 ;
"RTN","KMPDTU02",14,0)
 ;Q:'$G(KMPDST)
"RTN","KMPDTU02",15,0)
 ;Q:'$G(KMPDEN)
"RTN","KMPDTU02",16,0)
 ; make sure end date has hours
"RTN","KMPDTU02",17,0)
 ;S:'$P(KMPDEN,".",2) $P(KMPDEN,".",2)="99"
"RTN","KMPDTU02",18,0)
 ;S:'$G(DT) DT=$$DT^XLFDT
"RTN","KMPDTU02",19,0)
 ;
"RTN","KMPDTU02",20,0)
 W:'$D(ZTQUEUED) !,"Compiling Timing data..."
"RTN","KMPDTU02",21,0)
 D COMPILE
"RTN","KMPDTU02",22,0)
 ;
"RTN","KMPDTU02",23,0)
 Q
"RTN","KMPDTU02",24,0)
 ;
"RTN","KMPDTU02",25,0)
COMPILE ;-- compile & file timing data
"RTN","KMPDTU02",26,0)
 ;
"RTN","KMPDTU02",27,0)
 Q:$O(^KMPTMP("KMPDT",""))=""
"RTN","KMPDTU02",28,0)
 N COUNT,DATA,DATA1,ID,OK,SBSCR,TODAY
"RTN","KMPDTU02",29,0)
 S TODAY=$P($H,",") Q:'TODAY
"RTN","KMPDTU02",30,0)
 S SBSCR="",COUNT=0
"RTN","KMPDTU02",31,0)
 F  S SBSCR=$O(^KMPTMP("KMPDT",SBSCR)) Q:SBSCR=""  S ID="" D 
"RTN","KMPDTU02",32,0)
 .F  S ID=$O(^KMPTMP("KMPDT",SBSCR,ID)) Q:ID=""  S DATA=^(ID) D 
"RTN","KMPDTU02",33,0)
 ..; quit if not 'previous' to DT
"RTN","KMPDTU02",34,0)
 ..Q:$P($P(DATA,U),".")'<TODAY
"RTN","KMPDTU02",35,0)
 ..; set up DATA1 for filing
"RTN","KMPDTU02",36,0)
 ..; identifier
"RTN","KMPDTU02",37,0)
 ..S $P(DATA1,U)=ID
"RTN","KMPDTU02",38,0)
 ..; server start date/time in internal fileman format
"RTN","KMPDTU02",39,0)
 ..S $P(DATA1,U,3)=$$HTFM^XLFDT($P(DATA,U))
"RTN","KMPDTU02",40,0)
 ..; server delta
"RTN","KMPDTU02",41,0)
 ..S:$P(DATA,U,2) $P(DATA1,U,4)=$$HDIFF^XLFDT($P(DATA,U,2),$P(DATA,U),2)
"RTN","KMPDTU02",42,0)
 ..; person
"RTN","KMPDTU02",43,0)
 ..S $P(DATA1,U,5)=$P(DATA,U,3)
"RTN","KMPDTU02",44,0)
 ..; client name
"RTN","KMPDTU02",45,0)
 ..S $P(DATA1,U,6)=$P(DATA,U,4)
"RTN","KMPDTU02",46,0)
 ..; kmptmp subscript
"RTN","KMPDTU02",47,0)
 ..S $P(DATA1,U,7)=SBSCR
"RTN","KMPDTU02",48,0)
 ..; title
"RTN","KMPDTU02",49,0)
 ..S $P(DATA1,U,8)=$$TITLEG(SBSCR)
"RTN","KMPDTU02",50,0)
 ..; ip address
"RTN","KMPDTU02",51,0)
 ..S $P(DATA1,U,9)=$P($P(ID,"-")," ",2)
"RTN","KMPDTU02",52,0)
 ..; file data
"RTN","KMPDTU02",53,0)
 ..D FILE(DATA1,.OK)
"RTN","KMPDTU02",54,0)
 ..; update counter if successfully filed
"RTN","KMPDTU02",55,0)
 ..S:OK COUNT=COUNT+1
"RTN","KMPDTU02",56,0)
 ..; kill of old node if successfully filed
"RTN","KMPDTU02",57,0)
 ..K:OK ^KMPTMP("KMPDT",SBSCR,ID)
"RTN","KMPDTU02",58,0)
 ..I '$D(ZTQUEUED) W:'(COUNT#100) "."
"RTN","KMPDTU02",59,0)
 ;
"RTN","KMPDTU02",60,0)
 W:'$D(ZTQUEUED) !,COUNT," records filed!"
"RTN","KMPDTU02",61,0)
 ;
"RTN","KMPDTU02",62,0)
 Q
"RTN","KMPDTU02",63,0)
 ;
"RTN","KMPDTU02",64,0)
FILE(DATA,KMPDOK) ;-- file timing data into file #8973.2
"RTN","KMPDTU02",65,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU02",66,0)
 ; DATA.... Data to file in format:
"RTN","KMPDTU02",67,0)
 ;          piece "^" 1 - id
"RTN","KMPDTU02",68,0)
 ;                    3 - start date/time in internal fileman format
"RTN","KMPDTU02",69,0)
 ;                    4 - delta
"RTN","KMPDTU02",70,0)
 ;                    5 - new person
"RTN","KMPDTU02",71,0)
 ;                    6 - client name
"RTN","KMPDTU02",72,0)
 ;                    7 - kmptmp subscript
"RTN","KMPDTU02",73,0)
 ;                    8 - title
"RTN","KMPDTU02",74,0)
 ;                    9 - ip address
"RTN","KMPDTU02",75,0)
 ;
"RTN","KMPDTU02",76,0)
 ; KMPDOK.. Returned
"RTN","KMPDTU02",77,0)
 ;            0 - not filed successfully
"RTN","KMPDTU02",78,0)
 ;            1 - filed successfully
"RTN","KMPDTU02",79,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU02",80,0)
 ;
"RTN","KMPDTU02",81,0)
 S KMPDOK=0
"RTN","KMPDTU02",82,0)
 Q:$G(DATA)=""
"RTN","KMPDTU02",83,0)
 ; id
"RTN","KMPDTU02",84,0)
 Q:$P(DATA,U)=""
"RTN","KMPDTU02",85,0)
 ; start date/time
"RTN","KMPDTU02",86,0)
 Q:$P(DATA,U,3)=""
"RTN","KMPDTU02",87,0)
 ;
"RTN","KMPDTU02",88,0)
 N ERROR,FDA,I,IEN,ZIEN
"RTN","KMPDTU02",89,0)
 ; build fda() array for filing
"RTN","KMPDTU02",90,0)
 F I=1:1:9 I $P(DATA,U,I)'="" D 
"RTN","KMPDTU02",91,0)
 .S FDA($J,8973.2,"+1,",(I*.01))=$P(DATA,U,I)
"RTN","KMPDTU02",92,0)
 ; quit if no fda() array
"RTN","KMPDTU02",93,0)
 Q:'$D(FDA($J))
"RTN","KMPDTU02",94,0)
 ; file data
"RTN","KMPDTU02",95,0)
 D UPDATE^DIE("","FDA($J)","ZIEN","ERROR")
"RTN","KMPDTU02",96,0)
 ; if error
"RTN","KMPDTU02",97,0)
 I $D(ERROR) D MSG^DIALOG("HA",.ERROR,60,5,"ERROR") Q
"RTN","KMPDTU02",98,0)
 S KMPDOK=1
"RTN","KMPDTU02",99,0)
 ;
"RTN","KMPDTU02",100,0)
 Q
"RTN","KMPDTU02",101,0)
 ;
"RTN","KMPDTU02",102,0)
TITLEG(SBSCR) ;-- extrinsic function - return title name
"RTN","KMPDTU02",103,0)
 Q:$G(SBSCR)="" ""
"RTN","KMPDTU02",104,0)
 N I,TITLE,X S TITLE=""
"RTN","KMPDTU02",105,0)
 F I=1:1 S X=$T(TITLE+I) Q:X=""  I $P(X,";",3)=SBSCR S TITLE=$P(X,";",4) Q
"RTN","KMPDTU02",106,0)
 Q TITLE
"RTN","KMPDTU02",107,0)
 ;
"RTN","KMPDTU02",108,0)
TITLE ;-- convert subscript to title
"RTN","KMPDTU02",109,0)
 ;;ORWCV;CPRS Cover Sheet
"RTN","KMPDTU10")
0^16^B33878359
"RTN","KMPDTU10",1,0)
KMPDTU10 ;OAK/RAK - CP Tools Timing Utility ;2/17/04  09:45
"RTN","KMPDTU10",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDTU10",3,0)
 ;
"RTN","KMPDTU10",4,0)
DATERNG(KMPDSS,KMPDEF,KMPDRES,KMPDDT) ; timing date range for a subscript
"RTN","KMPDTU10",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU10",6,0)
 ; KMPDSS.... KMPTMP SUBSCRIPT
"RTN","KMPDTU10",7,0)
 ; KMPDEF.... (optional) default number of days to track - if not defined
"RTN","KMPDTU10",8,0)
 ;            will default to seven (7)
"RTN","KMPDTU10",9,0)
 ; KMPDRES(). Results of api in format:
"RTN","KMPDTU10",10,0)
 ;             KMPDRES(0)=piece 1 - Start Date Internal
"RTN","KMPDTU10",11,0)
 ;                        piece 2 - End Date Internal
"RTN","KMPDTU10",12,0)
 ;                        piece 3 - Start Date External
"RTN","KMPDTU10",13,0)
 ;                        piece 4 - End Date External
"RTN","KMPDTU10",14,0)
 ;                 Null ("") is returned if no results are found
"RTN","KMPDTU10",15,0)
 ;             KMPDRES(1)=NumberOfDays
"RTN","KMPDTU10",16,0)
 ; KMPDDT.... Date only (do not ask for days)
"RTN","KMPDTU10",17,0)
 ;             0 - both date & days
"RTN","KMPDTU10",18,0)
 ;             1 - date only - do not ask for days
"RTN","KMPDTU10",19,0)
 ;
"RTN","KMPDTU10",20,0)
 ; This api determines the date range for KMPDSS (ex: ORWCV for CPRS 
"RTN","KMPDTU10",21,0)
 ; cover sheets).  It asks the user the ending date.  After the ending
"RTN","KMPDTU10",22,0)
 ; date is entered, the user is prompted for the number of days to track.
"RTN","KMPDTU10",23,0)
 ; Results are returned in the KMPDRES() array as described above.
"RTN","KMPDTU10",24,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU10",25,0)
 K KMPDRES S KMPDRES(0)="",KMPDRES(1)=""
"RTN","KMPDTU10",26,0)
 Q:$G(KMPDSS)=""
"RTN","KMPDTU10",27,0)
 S:'$G(KMPDEF) KMPDEF=7
"RTN","KMPDTU10",28,0)
 S KMPDDT=+$G(KMPDDT)
"RTN","KMPDTU10",29,0)
 N COUNT,DATE,DAYS,END,SESS,START
"RTN","KMPDTU10",30,0)
 ; start & end dates
"RTN","KMPDTU10",31,0)
 S DATE=$$DATERNG1(KMPDSS,.SESS)
"RTN","KMPDTU10",32,0)
 Q:'$D(SESS)
"RTN","KMPDTU10",33,0)
 S START=$P(DATE,U),END=$P(DATE,U,2)
"RTN","KMPDTU10",34,0)
 Q:'START!('END)
"RTN","KMPDTU10",35,0)
 ; get end date
"RTN","KMPDTU10",36,0)
 K DIR S DIR(0)="DO^"_START_":"_END_":E"
"RTN","KMPDTU10",37,0)
 S DIR("A")="Select End Date",DIR("B")=$$FMTE^XLFDT(END)
"RTN","KMPDTU10",38,0)
 W ! D ^DIR Q:'Y  S END=Y
"RTN","KMPDTU10",39,0)
 ; if date only
"RTN","KMPDTU10",40,0)
 I KMPDDT D  Q
"RTN","KMPDTU10",41,0)
 .S KMPDRES(0)=END_U_END_U_$$FMTE^XLFDT(END)_U_$$FMTE^XLFDT(END)
"RTN","KMPDTU10",42,0)
 ; determine number of days
"RTN","KMPDTU10",43,0)
 S DATE=END+.1,START=END,DAYS=0
"RTN","KMPDTU10",44,0)
 F  S DATE=$O(SESS(DATE),-1) Q:'DATE   S START=DATE,DAYS=DAYS+1
"RTN","KMPDTU10",45,0)
 Q:'DAYS
"RTN","KMPDTU10",46,0)
 ; days to go back
"RTN","KMPDTU10",47,0)
 K DIR S DIR(0)="NO^1:"_DAYS_":O"
"RTN","KMPDTU10",48,0)
 S DIR("A")="Select # of Days Review"
"RTN","KMPDTU10",49,0)
 S DIR("B")=$S(DAYS'<KMPDEF:KMPDEF,1:DAYS)
"RTN","KMPDTU10",50,0)
 D ^DIR Q:Y=""!(Y="^")
"RTN","KMPDTU10",51,0)
 ; determine start date
"RTN","KMPDTU10",52,0)
 S START=END
"RTN","KMPDTU10",53,0)
 I Y'=1 S COUNT=1 D 
"RTN","KMPDTU10",54,0)
 .F  S START=$O(SESS(START),-1) Q:'START  S COUNT=COUNT+1 Q:COUNT'<Y
"RTN","KMPDTU10",55,0)
 S KMPDRES(0)=START_U_END_U_$$FMTE^XLFDT(START)_U_$$FMTE^XLFDT(END)
"RTN","KMPDTU10",56,0)
 S KMPDRES(1)=Y
"RTN","KMPDTU10",57,0)
 ;
"RTN","KMPDTU10",58,0)
 Q
"RTN","KMPDTU10",59,0)
 ;
"RTN","KMPDTU10",60,0)
DATERNG1(KMPDSS,KMPDSESS) ;-- extrinsic function
"RTN","KMPDTU10",61,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU10",62,0)
 ; KMPDSS.... KMPTMP SUBSCRIPT
"RTN","KMPDTU10",63,0)
 ; KMPDSESS() Array of dates: 
"RTN","KMPDTU10",64,0)
 ;             KMPDSESS(3030801)=""
"RTN","KMPDTU10",65,0)
 ;             KMPDSESS(3030802)=""
"RTN","KMPDTU10",66,0)
 ;             ...
"RTN","KMPDTU10",67,0)
 ;
"RTN","KMPDTU10",68,0)
 ; Return: StartDate^EndDate - in internal fileman format
"RTN","KMPDTU10",69,0)
 ;         "" - no results
"RTN","KMPDTU10",70,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU10",71,0)
 Q:$G(KMPDSS)="" ""
"RTN","KMPDTU10",72,0)
 N DATE,END,START
"RTN","KMPDTU10",73,0)
 ; determine most recent date
"RTN","KMPDTU10",74,0)
 F DATE=0:0 S DATE=$O(^KMPD(8973.2,"ASVDTSS",KMPDSS,DATE)) Q:'DATE  D 
"RTN","KMPDTU10",75,0)
 .; set array of session dates
"RTN","KMPDTU10",76,0)
 .S KMPDSESS(DATE)=""
"RTN","KMPDTU10",77,0)
 Q:'$D(KMPDSESS) ""
"RTN","KMPDTU10",78,0)
 ; set start and end dates according to SESS() array
"RTN","KMPDTU10",79,0)
 S END=$O(KMPDSESS("A"),-1),START=$O(KMPDSESS(""))
"RTN","KMPDTU10",80,0)
 Q START_"^"_END
"RTN","KMPDTU10",81,0)
 ;
"RTN","KMPDTU10",82,0)
DTTMRNG(KMPDSS,KMPDEF,KMPDRES,KMPDEFH) ; timing date/time range for a subscript
"RTN","KMPDTU10",83,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU10",84,0)
 ; KMPDSS.... KMPTMP SUBSCRIPT
"RTN","KMPDTU10",85,0)
 ; KMPDEF.... (optional) default number of days to track - if not defined
"RTN","KMPDTU10",86,0)
 ;            will default to seven (7)
"RTN","KMPDTU10",87,0)
 ; KMPDRES(). Results of api in format:
"RTN","KMPDTU10",88,0)
 ;             KMPDRES(0)=piece 1 - Start Date Internal
"RTN","KMPDTU10",89,0)
 ;                        piece 2 - End Date Internal
"RTN","KMPDTU10",90,0)
 ;                        piece 3 - Start Date External
"RTN","KMPDTU10",91,0)
 ;                        piece 4 - End Date External
"RTN","KMPDTU10",92,0)
 ;                 Null ("") is returned if no results are found
"RTN","KMPDTU10",93,0)
 ;             KMPDRES(1)=NumberOfDays
"RTN","KMPDTU10",94,0)
 ; KMPDEFH.. (optional) Default hour.
"RTN","KMPDTU10",95,0)
 ;
"RTN","KMPDTU10",96,0)
 ; This api determines the date range for KMPDSS (ex: ORWCV for CPRS 
"RTN","KMPDTU10",97,0)
 ; cover sheets).  It asks the user the ending date.  After the ending
"RTN","KMPDTU10",98,0)
 ; date is entered, the user is prompted for the number of hours to
"RTN","KMPDTU10",99,0)
 ; review. Results are returned in the KMPDRES() array as described 
"RTN","KMPDTU10",100,0)
 ; above.
"RTN","KMPDTU10",101,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU10",102,0)
 K KMPDRES S KMPDRES(0)="",KMPDRES(1)=""
"RTN","KMPDTU10",103,0)
 Q:$G(KMPDSS)=""
"RTN","KMPDTU10",104,0)
 S:'$G(KMPDEF) KMPDEF=7
"RTN","KMPDTU10",105,0)
 S KMPDEFH=$G(KMPDEFH)
"RTN","KMPDTU10",106,0)
 N COUNT,DATE,DAYS,END,SESS,START
"RTN","KMPDTU10",107,0)
 ; get date
"RTN","KMPDTU10",108,0)
 D DATERNG(KMPDSS,1,.KMPDRES,1)
"RTN","KMPDTU10",109,0)
 Q:'$D(KMPDRES)
"RTN","KMPDTU10",110,0)
 Q:$G(KMPDRES(0))=""
"RTN","KMPDTU10",111,0)
 S KMPDRES(1)=""
"RTN","KMPDTU10",112,0)
 ; determine number of hours
"RTN","KMPDTU10",113,0)
 K DIR S DIR(0)="LO^0:23:O"
"RTN","KMPDTU10",114,0)
 S DIR("A")="Select Hour(s) to Review"
"RTN","KMPDTU10",115,0)
 S:KMPDEFH'="" DIR("B")=KMPDEFH
"RTN","KMPDTU10",116,0)
 D ^DIR Q:Y=""!(Y="^")
"RTN","KMPDTU10",117,0)
 S KMPDRES(1)=Y
"RTN","KMPDTU10",118,0)
 Q
"RTN","KMPDTU10",119,0)
 ;
"RTN","KMPDTU10",120,0)
LISTSEL(KMPDLIST,KMPDSS,KMPDRLTM) ;-- extrinsic function - build list and select entry
"RTN","KMPDTU10",121,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU10",122,0)
 ; KMPDLIST... 2 - Client Name
"RTN","KMPDTU10",123,0)
 ;             3 - IP Address
"RTN","KMPDTU10",124,0)
 ; KMPDSS..... Field #.07 (KMPTMP SUBSCRIPT)
"RTN","KMPDTU10",125,0)
 ; KMPDRLTM... Real-Time data
"RTN","KMPDTU10",126,0)
 ;              0 - not real-time
"RTN","KMPDTU10",127,0)
 ;              1 - real-time
"RTN","KMPDTU10",128,0)
 ;
"RTN","KMPDTU10",129,0)
 ; Return: "" - no selection 
"RTN","KMPDTU10",130,0)
 ;         Name - free text
"RTN","KMPDTU10",131,0)
 ;
"RTN","KMPDTU10",132,0)
 ; This function will build a list of entries from file #8973.2 
"RTN","KMPDTU10",133,0)
 ;(CP TIMING) and ask the user to select an entry.
"RTN","KMPDTU10",134,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU10",135,0)
 S KMPDLIST=+$G(KMPDLIST)
"RTN","KMPDTU10",136,0)
 Q:KMPDLIST<2!(KMPDLIST>3) ""
"RTN","KMPDTU10",137,0)
 Q:$G(KMPDSS)="" ""
"RTN","KMPDTU10",138,0)
 S KMPDRLTM=+$G(KMPDRLTM)
"RTN","KMPDTU10",139,0)
 ;
"RTN","KMPDTU10",140,0)
 N DIC,I,X,XREF,Y
"RTN","KMPDTU10",141,0)
 ;
"RTN","KMPDTU10",142,0)
 W " ==> building list..."
"RTN","KMPDTU10",143,0)
 K ^TMP("KMPDTU10-LIST",$J)
"RTN","KMPDTU10",144,0)
 D @$S('KMPDRLTM:"LISTSELH",1:"LISTSELR")
"RTN","KMPDTU10",145,0)
 ; quit if no data
"RTN","KMPDTU10",146,0)
 Q:'$D(^TMP("KMPDTU10-LIST",$J))
"RTN","KMPDTU10",147,0)
 S DIC="^TMP(""KMPDTU10-LIST"",$J,"
"RTN","KMPDTU10",148,0)
 S DIC(0)="AEQZ"
"RTN","KMPDTU10",149,0)
 S DIC("A")=$S(KMPDLIST=2:"Select Client",1:"IP Address")_": "
"RTN","KMPDTU10",150,0)
 D ^DIC
"RTN","KMPDTU10",151,0)
 K ^TMP("KMPDTU10-LIST",$J)
"RTN","KMPDTU10",152,0)
 Q $S(Y<1:"",1:$P(Y,"^",2))
"RTN","KMPDTU10",153,0)
 ;
"RTN","KMPDTU10",154,0)
LISTSELH ;-- historical data list
"RTN","KMPDTU10",155,0)
 N I,CNT,DOT,XREF
"RTN","KMPDTU10",156,0)
 ; determine xref to build list
"RTN","KMPDTU10",157,0)
 S XREF=$S(KMPDLIST=2:"ASSCLDTTM",KMPDLIST=3:"ASSIPDTTM",1:"")
"RTN","KMPDTU10",158,0)
 Q:XREF="" ""
"RTN","KMPDTU10",159,0)
 S I="",(CNT,DOT)=0
"RTN","KMPDTU10",160,0)
 F  S I=$O(^KMPD(8973.2,XREF,KMPDSS,I)) Q:I=""  D 
"RTN","KMPDTU10",161,0)
 .S CNT=CNT+1,DOT=DOT+1 W:'(DOT#100) "."
"RTN","KMPDTU10",162,0)
 .S ^TMP("KMPDTU10-LIST",$J,CNT,0)=I
"RTN","KMPDTU10",163,0)
 .S ^TMP("KMPDTU10-LIST",$J,"B",I,CNT)=""
"RTN","KMPDTU10",164,0)
 Q:'CNT ""
"RTN","KMPDTU10",165,0)
 S ^TMP("KMPDTU10-LIST",$J,0)=$S(KMPDLIST=2:"Client Name",1:"IP Address")_"^1.01^"_CNT_"^"_CNT
"RTN","KMPDTU10",166,0)
 Q
"RTN","KMPDTU10",167,0)
 ;
"RTN","KMPDTU10",168,0)
LISTSELR ;-- real-time data list
"RTN","KMPDTU10",169,0)
 N I,CNT,DATA,DOT,X
"RTN","KMPDTU10",170,0)
 S I="",(CNT,DOT)=0
"RTN","KMPDTU10",171,0)
 F  S I=$O(^KMPTMP("KMPDT",KMPDSS,I)) Q:I=""  S DATA=^(I) I DATA]"" D 
"RTN","KMPDTU10",172,0)
 .S X=$S(KMPDLIST=2:$P(DATA,U,4),1:$P($P(I," ",2),"-"))
"RTN","KMPDTU10",173,0)
 .Q:X=""
"RTN","KMPDTU10",174,0)
 .Q:$O(^TMP("KMPDTU10-LIST",$J,"B",X,0))
"RTN","KMPDTU10",175,0)
 .S CNT=CNT+1,DOT=DOT+1 W:'(DOT#100) "."
"RTN","KMPDTU10",176,0)
 .S ^TMP("KMPDTU10-LIST",$J,CNT,0)=X
"RTN","KMPDTU10",177,0)
 .S ^TMP("KMPDTU10-LIST",$J,"B",X,CNT)=""
"RTN","KMPDTU10",178,0)
 Q:'CNT ""
"RTN","KMPDTU10",179,0)
 S ^TMP("KMPDTU10-LIST",$J,0)=$S(KMPDLIST=2:"Client Name",1:"IP Address")_"^1.01^"_CNT_"^"_CNT
"RTN","KMPDTU10",180,0)
 Q
"RTN","KMPDTU10",181,0)
 ;
"RTN","KMPDTU10",182,0)
SRCHBY(KMPDRES,KMPDSS,KMPDRLTM) ;-- api - search by criteria
"RTN","KMPDTU10",183,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU10",184,0)
 ; KMPDRES().. Array (passed by reference) containing results in format:
"RTN","KMPDTU10",185,0)
 ;             KMPDRES    = "" - no valid selection
"RTN","KMPDTU10",186,0)
 ;             KMPDRES    = 1^User Name
"RTN","KMPDTU10",187,0)
 ;             KMPDRES(1) = DUZ^NewPersonName
"RTN","KMPDTU10",188,0)
 ;             KMPDRES    = 2^Client Name
"RTN","KMPDTU10",189,0)
 ;             KMPDRES(1) = ClientName (free text)
"RTN","KMPDTU10",190,0)
 ;             KMPDRES    = 3^IP Address
"RTN","KMPDTU10",191,0)
 ;             KMPDRES(1) = IPAddress
"RTN","KMPDTU10",192,0)
 ;             KMPDRES    = 4^Any Occurrence
"RTN","KMPDTU10",193,0)
 ; KMPDSS..... KMPTMP SUBSCIPT - field #.07 from file #8973.2 (CP TIMING)
"RTN","KMPDTU10",194,0)
 ; KMPDRLTM... Real-Time data
"RTN","KMPDTU10",195,0)
 ;              0 - not real-time
"RTN","KMPDTU10",196,0)
 ;              1 - real-time
"RTN","KMPDTU10",197,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU10",198,0)
 K KMPDRES S KMPDRES=""
"RTN","KMPDTU10",199,0)
 Q:$G(KMPDSS)=""
"RTN","KMPDTU10",200,0)
 S KMPDRLTM=+$G(KMPDRLTM)
"RTN","KMPDTU10",201,0)
 N DIC,DIR,X,Y
"RTN","KMPDTU10",202,0)
 S DIR(0)="SO^1:User Name;2:Client Name;3:IP Address;4:Any Occurrence"
"RTN","KMPDTU10",203,0)
 S DIR("A")="Search By"
"RTN","KMPDTU10",204,0)
 S DIR("B")=4
"RTN","KMPDTU10",205,0)
 D ^DIR
"RTN","KMPDTU10",206,0)
 Q:'Y
"RTN","KMPDTU10",207,0)
 S KMPDRES=Y_"^"_Y(0)
"RTN","KMPDTU10",208,0)
 ; quit if 'any occurrence'
"RTN","KMPDTU10",209,0)
 Q:(+KMPDRES)=4
"RTN","KMPDTU10",210,0)
 ;
"RTN","KMPDTU10",211,0)
 ; user name
"RTN","KMPDTU10",212,0)
 I (+KMPDRES)=1 D  Q
"RTN","KMPDTU10",213,0)
 .S DIC=200,DIC(0)="AEMQZ",DIC("A")="Select User: "
"RTN","KMPDTU10",214,0)
 .D ^DIC
"RTN","KMPDTU10",215,0)
 .I Y<1 S KMPDRES="" Q
"RTN","KMPDTU10",216,0)
 .S KMPDRES(1)=Y
"RTN","KMPDTU10",217,0)
 ;
"RTN","KMPDTU10",218,0)
 ; client name
"RTN","KMPDTU10",219,0)
 I (+KMPDRES)=2 D  Q
"RTN","KMPDTU10",220,0)
 .S KMPDRES(1)=$$LISTSEL(+KMPDRES,KMPDSS,KMPDRLTM)
"RTN","KMPDTU10",221,0)
 .S:KMPDRES(1)="" KMPDRES=""
"RTN","KMPDTU10",222,0)
 ;
"RTN","KMPDTU10",223,0)
 ; ip address
"RTN","KMPDTU10",224,0)
 I (+KMPDRES)=3 D  Q
"RTN","KMPDTU10",225,0)
 .S KMPDRES(1)=$$LISTSEL(+KMPDRES,KMPDSS,KMPDRLTM)
"RTN","KMPDTU10",226,0)
 .S:KMPDRES(1)="" KMPDRES=""
"RTN","KMPDTU10",227,0)
 ;
"RTN","KMPDTU10",228,0)
 Q
"RTN","KMPDTU10",229,0)
 ;
"RTN","KMPDTU10",230,0)
TTLSEC() ;-- extrinsic function - time-to-load threshold seconds
"RTN","KMPDTU10",231,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU10",232,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU10",233,0)
 N DIR,X,Y
"RTN","KMPDTU10",234,0)
 S DIR(0)="NAO^1"
"RTN","KMPDTU10",235,0)
 S DIR("A")="Select Time-To-Load Threshold (Seconds): "
"RTN","KMPDTU10",236,0)
 S DIR("B")=60
"RTN","KMPDTU10",237,0)
 D ^DIR
"RTN","KMPDTU10",238,0)
 Q $S(Y:Y,1:"")
"RTN","KMPDTU11")
0^17^B2360612
"RTN","KMPDTU11",1,0)
KMPDTU11 ;OAK/RAK - CP Tools Timing Utility ;2/17/04  09:46
"RTN","KMPDTU11",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDTU11",3,0)
 ;
"RTN","KMPDTU11",4,0)
RLTMHR(KMPDQIET,KMPDASK,KMPDEF) ;-- extrinsic function - real time hours
"RTN","KMPDTU11",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU11",6,0)
 ; KMPDQIET... Display output
"RTN","KMPDTU11",7,0)
 ;              0 - display output (not quiet)
"RTN","KMPDTU11",8,0)
 ;              1 - do not display output (quiet)
"RTN","KMPDTU11",9,0)
 ; KMPDASK.... Ask user to select hours
"RTN","KMPDTU11",10,0)
 ;              0 - do not ask user to select
"RTN","KMPDTU11",11,0)
 ;              1 - ask user to select
"RTN","KMPDTU11",12,0)
 ; KMPDEF..... Default
"RTN","KMPDTU11",13,0)
 ;              0 - do not use default
"RTN","KMPDTU11",14,0)
 ;              1 - use time range as default
"RTN","KMPDTU11",15,0)
 ;
"RTN","KMPDTU11",16,0)
 ; Return: List of hours (ie, 1,2,5,6,7...)
"RTN","KMPDTU11",17,0)
 ;         "" - no selection made
"RTN","KMPDTU11",18,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDTU11",19,0)
 ;
"RTN","KMPDTU11",20,0)
 S KMPDQIET=+$G(KMPDQIET),KMPDASK=+$G(KMPDASK),KMPDEF=+$G(KMPDEF)
"RTN","KMPDTU11",21,0)
 N DATA,DIR,DOT,HOURS,HR,I,QUEUED,X,Y
"RTN","KMPDTU11",22,0)
 W:'KMPDQIET !," ==> building Hours list..."
"RTN","KMPDTU11",23,0)
 S I="",DOT=0
"RTN","KMPDTU11",24,0)
 F  S I=$O(^KMPTMP("KMPDT","ORWCV",I)) Q:I=""  S DATA=^(I) I DATA]"" D 
"RTN","KMPDTU11",25,0)
 .S DOT=DOT+1 W:'(DOT#1000)&('KMPDQIET) "."
"RTN","KMPDTU11",26,0)
 .; change $h to fileman format and get hour
"RTN","KMPDTU11",27,0)
 .S HR=$E($P($$HTFM^XLFDT($P(DATA,U)),".",2),1,2) S:HR>23 HR="0"
"RTN","KMPDTU11",28,0)
 .; create HOURS() array
"RTN","KMPDTU11",29,0)
 .S:HR'="" HOURS(+HR)=""
"RTN","KMPDTU11",30,0)
 ;
"RTN","KMPDTU11",31,0)
 ; if no HOURS() array
"RTN","KMPDTU11",32,0)
 Q:'$D(HOURS) ""
"RTN","KMPDTU11",33,0)
 ;
"RTN","KMPDTU11",34,0)
 ; do not ask user to select hours
"RTN","KMPDTU11",35,0)
 I 'KMPDASK D  Q X
"RTN","KMPDTU11",36,0)
 .S (I,X)="" F  S I=$O(HOURS(I)) Q:I=""  S X=X_I_","
"RTN","KMPDTU11",37,0)
 ;
"RTN","KMPDTU11",38,0)
 ; ask user to select hour(s)
"RTN","KMPDTU11",39,0)
 S DIR(0)="LO^"_$O(HOURS(""))_":"_$O(HOURS("A"),-1)
"RTN","KMPDTU11",40,0)
 S DIR("A")="Select Hour(s)"
"RTN","KMPDTU11",41,0)
 S:KMPDEF DIR("B")=$O(HOURS(""))_"-"_$O(HOURS("A"),-1)
"RTN","KMPDTU11",42,0)
 W ! D ^DIR
"RTN","KMPDTU11",43,0)
 Q $S(Y=""!(Y="^"):"",1:$G(Y(0)))
"RTN","KMPDU")
0^18^B2238823
"RTN","KMPDU",1,0)
KMPDU ;OAK/RAK - CM Tools Utility ;2/17/04  09:47
"RTN","KMPDU",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDU",3,0)
FMDTI(Y,X) ;-- date/time in internal fileMan format.
"RTN","KMPDU",4,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU",5,0)
 ;     X - User response ('T', '12/12/94', etc.)
"RTN","KMPDU",6,0)
 ;
"RTN","KMPDU",7,0)
 ; Return: Y(0)=InternalFilemanDate
"RTN","KMPDU",8,0)
 ;         Y(1)=ExternalFilemanDate
"RTN","KMPDU",9,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU",10,0)
 K Y
"RTN","KMPDU",11,0)
 I $G(X)']"" S Y(0)="^" Q
"RTN","KMPDU",12,0)
 N %DT,DATETIME
"RTN","KMPDU",13,0)
 S %DT="ST" D ^%DT
"RTN","KMPDU",14,0)
 S DATETIME=$S(Y>0:Y,1:"^")
"RTN","KMPDU",15,0)
 K Y
"RTN","KMPDU",16,0)
 ;-- fm internal format.
"RTN","KMPDU",17,0)
 S Y(0)=DATETIME
"RTN","KMPDU",18,0)
 ;-- external format.
"RTN","KMPDU",19,0)
 S Y(1)=$$FMTE^XLFDT(DATETIME)
"RTN","KMPDU",20,0)
 Q
"RTN","KMPDU",21,0)
 ;
"RTN","KMPDU",22,0)
TIMEADD(KMPDTM,KMPDADD) ;-- extrinsic function - add time
"RTN","KMPDU",23,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU",24,0)
 ; KMPDTM... Current time in dy hr:mn:sc format
"RTN","KMPDU",25,0)
 ; KMPDTM... Time to add to current time in dy hr:mn:sc format
"RTN","KMPDU",26,0)
 ;
"RTN","KMPDU",27,0)
 ; RETURN: total in dy hr:mn:sc format
"RTN","KMPDU",28,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU",29,0)
 Q:$G(KMPDTM)="" ""
"RTN","KMPDU",30,0)
 Q:$G(KMPDADD)="" KMPDTM
"RTN","KMPDU",31,0)
 N DY,HR,MN,SC
"RTN","KMPDU",32,0)
 ; current time
"RTN","KMPDU",33,0)
 S DY(1)=+$P(KMPDTM," ")
"RTN","KMPDU",34,0)
 S HR(1)=+$P($P(KMPDTM," ",2),":")
"RTN","KMPDU",35,0)
 S MN(1)=+$P($P(KMPDTM," ",2),":",2)
"RTN","KMPDU",36,0)
 S SC(1)=+$P($P(KMPDTM," ",2),":",3)
"RTN","KMPDU",37,0)
 ; time to be added
"RTN","KMPDU",38,0)
 S DY(2)=+$P(KMPDADD," ")
"RTN","KMPDU",39,0)
 S HR(2)=+$P($P(KMPDADD," ",2),":")
"RTN","KMPDU",40,0)
 S MN(2)=+$P($P(KMPDADD," ",2),":",2)
"RTN","KMPDU",41,0)
 S SC(2)=+$P($P(KMPDADD," ",2),":",3)
"RTN","KMPDU",42,0)
 ; add seconds
"RTN","KMPDU",43,0)
 S SC(3)=SC(1)+SC(2)
"RTN","KMPDU",44,0)
 ; if greater than 59 seconds
"RTN","KMPDU",45,0)
 I SC(3)>59 S MN(3)=SC(3)\60,SC(3)=SC(3)-60
"RTN","KMPDU",46,0)
 ; add minutes
"RTN","KMPDU",47,0)
 S MN(3)=$G(MN(3))+MN(1)+MN(2)
"RTN","KMPDU",48,0)
 ; if greater than 59 minutes
"RTN","KMPDU",49,0)
 I MN(3)>59 S HR(3)=MN(3)\60,MN(3)=MN(3)-60
"RTN","KMPDU",50,0)
 ; add hours
"RTN","KMPDU",51,0)
 S HR(3)=$G(HR(3))+HR(1)+HR(2)
"RTN","KMPDU",52,0)
 ; if greater than 23 hours
"RTN","KMPDU",53,0)
 I HR(3)>23 S DY(3)=HR(3)\24,HR(3)=HR(3)-24
"RTN","KMPDU",54,0)
 ; days
"RTN","KMPDU",55,0)
 S DY(3)=$G(DY(3))+DY(1)+DY(2)
"RTN","KMPDU",56,0)
 ;
"RTN","KMPDU",57,0)
 Q DY(3)_" "_HR(3)_":"_MN(3)_":"_SC(3)
"RTN","KMPDU1")
0^19^B8912878
"RTN","KMPDU1",1,0)
KMPDU1 ;SF/RAK - CM Developer Tools Utilities ;2/17/04  09:49
"RTN","KMPDU1",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDU1",3,0)
GBLCHK(KMPDY,KMPDGBL) ;-- check global name.
"RTN","KMPDU1",4,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU1",5,0)
 ; KMPDGBL... Global name.
"RTN","KMPDU1",6,0)
 ;
"RTN","KMPDU1",7,0)
 ; Check to make sure global name is in format for subscript indirection.
"RTN","KMPDU1",8,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU1",9,0)
 ;
"RTN","KMPDU1",10,0)
 K KMPDY
"RTN","KMPDU1",11,0)
 ;
"RTN","KMPDU1",12,0)
 I $G(KMPDGBL)="" S KMPDY(0)="[Global name not defined]" Q
"RTN","KMPDU1",13,0)
 ;
"RTN","KMPDU1",14,0)
 I $E(KMPDGBL)["?" D  Q
"RTN","KMPDU1",15,0)
 .S KMPDY(0)="['"_KMPDGBL_" is an incorrect global name]"
"RTN","KMPDU1",16,0)
 ;
"RTN","KMPDU1",17,0)
 I KMPDGBL["*" S KMPDY(0)="['"_KMPDGBL_" is an incorrect global name]" Q
"RTN","KMPDU1",18,0)
 ;
"RTN","KMPDU1",19,0)
 N GLOBAL
"RTN","KMPDU1",20,0)
 ;
"RTN","KMPDU1",21,0)
 S GLOBAL=KMPDGBL
"RTN","KMPDU1",22,0)
 ; make sure begins with up-arrow (^).
"RTN","KMPDU1",23,0)
 I $E(GLOBAL)'="^" S GLOBAL="^"_GLOBAL
"RTN","KMPDU1",24,0)
 ; make sure contains a '('.
"RTN","KMPDU1",25,0)
 I GLOBAL'["(" S GLOBAL=GLOBAL_"("
"RTN","KMPDU1",26,0)
 ; if ends with comma (,) then remove comma.
"RTN","KMPDU1",27,0)
 I $E(GLOBAL,($L(GLOBAL)))="," S $E(GLOBAL,($L(GLOBAL)))=""
"RTN","KMPDU1",28,0)
 ; make sure ends with a ')'.
"RTN","KMPDU1",29,0)
 I $E(GLOBAL,$L(GLOBAL))'=")" S GLOBAL=GLOBAL_")"
"RTN","KMPDU1",30,0)
 ; if ends with comma (,) then remove comma.
"RTN","KMPDU1",31,0)
 I $E(GLOBAL,($L(GLOBAL)-1))="," S $E(GLOBAL,($L(GLOBAL)-1))=""
"RTN","KMPDU1",32,0)
 ; if global contains () then change to ("").
"RTN","KMPDU1",33,0)
 I $E(GLOBAL,($L(GLOBAL)-1),$L(GLOBAL))="()" D 
"RTN","KMPDU1",34,0)
 .S $E(GLOBAL,$L(GLOBAL))=""""")"
"RTN","KMPDU1",35,0)
 ;
"RTN","KMPDU1",36,0)
 S KMPDY(0)=GLOBAL
"RTN","KMPDU1",37,0)
 ;
"RTN","KMPDU1",38,0)
 Q
"RTN","KMPDU1",39,0)
 ;
"RTN","KMPDU1",40,0)
GBLLIST(KMPDY,KMPDGBL,KMPDST,KMPDLN) ;-- get global data
"RTN","KMPDU1",41,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU1",42,0)
 ; KMPDGBL... Global name.
"RTN","KMPDU1",43,0)
 ; KMPDST... Starting global node.  If this is a continuation then use
"RTN","KMPDU1",44,0)
 ;           this entry as starting point.  If original time through
"RTN","KMPDU1",45,0)
 ;           this should be set to null ("").
"RTN","KMPDU1",46,0)
 ; KMPDLN... Number of lines to fill before quitting.
"RTN","KMPDU1",47,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU1",48,0)
 ;
"RTN","KMPDU1",49,0)
 K KMPDY
"RTN","KMPDU1",50,0)
 ;
"RTN","KMPDU1",51,0)
 S KMPDGBL=$G(KMPDGBL),KMPDST=$G(KMPDST),KMPDLN=+$G(KMPDLN)
"RTN","KMPDU1",52,0)
 ;
"RTN","KMPDU1",53,0)
 I 'KMPDLN S KMPDY(0)="[Number of lines not defined]" Q
"RTN","KMPDU1",54,0)
 ;
"RTN","KMPDU1",55,0)
 N GBL,GLOBAL,LAST,LEN,LN
"RTN","KMPDU1",56,0)
 ;
"RTN","KMPDU1",57,0)
 D GBLCHK(.KMPDY,KMPDGBL)
"RTN","KMPDU1",58,0)
 ; if error.
"RTN","KMPDU1",59,0)
 I $E($G(KMPDY(0)))="[" Q
"RTN","KMPDU1",60,0)
 ;
"RTN","KMPDU1",61,0)
 S GLOBAL=$G(KMPDY(0))
"RTN","KMPDU1",62,0)
 I GLOBAL="" S KMPDY(0)="[Unable to process]" Q
"RTN","KMPDU1",63,0)
 I $Q(@GLOBAL)="" S KMPDY(0)="<No Data to Report>" Q
"RTN","KMPDU1",64,0)
 ;
"RTN","KMPDU1",65,0)
 S GBL=$E(GLOBAL,1,$L(GLOBAL)-1)
"RTN","KMPDU1",66,0)
 ; if GLOBAL("") then just use GLOBAL.
"RTN","KMPDU1",67,0)
 S:$E(GBL,$L(GBL))="""" GBL=$P(GBL,"(")
"RTN","KMPDU1",68,0)
 S LEN=80,LN=1
"RTN","KMPDU1",69,0)
 ;
"RTN","KMPDU1",70,0)
 ; if data in GLOBAL.
"RTN","KMPDU1",71,0)
 I KMPDST=""&(GLOBAL'["("""")") I $D(@GLOBAL)#2 D 
"RTN","KMPDU1",72,0)
 .S KMPDY(LN)=GLOBAL_" = "_@GLOBAL,LN=LN+1
"RTN","KMPDU1",73,0)
 ;
"RTN","KMPDU1",74,0)
 S:KMPDST]"" GLOBAL=KMPDST
"RTN","KMPDU1",75,0)
 ;
"RTN","KMPDU1",76,0)
 F  S GLOBAL=$Q(@GLOBAL) Q:GLOBAL=""!($E(GLOBAL,1,$L(GBL))'=GBL)  D  Q:LN>KMPDLN
"RTN","KMPDU1",77,0)
 .S LAST=GLOBAL
"RTN","KMPDU1",78,0)
 .S KMPDY(LN)=GLOBAL_" = "
"RTN","KMPDU1",79,0)
 .; if fits within LEN.
"RTN","KMPDU1",80,0)
 .I $L(@GLOBAL)'>LEN S KMPDY(LN)=KMPDY(LN)_@GLOBAL,LN=LN+1 Q
"RTN","KMPDU1",81,0)
 .; parse data to fit on line.
"RTN","KMPDU1",82,0)
 .D PARSE(LEN)
"RTN","KMPDU1",83,0)
 ;
"RTN","KMPDU1",84,0)
 S KMPDY(0)=GLOBAL
"RTN","KMPDU1",85,0)
 ; if no more subscripts.
"RTN","KMPDU1",86,0)
 ;($E(GLOBAL,1,$L(GBL))'=GBL)
"RTN","KMPDU1",87,0)
 I GLOBAL="" S KMPDY(0)="***end of list***"
"RTN","KMPDU1",88,0)
 E  I $E($Q(@GLOBAL),1,$L(GBL))'=GBL S KMPDY(0)="***end of list***"
"RTN","KMPDU1",89,0)
 ;
"RTN","KMPDU1",90,0)
 Q
"RTN","KMPDU1",91,0)
 ;
"RTN","KMPDU1",92,0)
PARSE(LEN) ;
"RTN","KMPDU1",93,0)
 ;  if length of data is greater than current position to the end
"RTN","KMPDU1",94,0)
 ;  of the screen the data must be broken down and printed on
"RTN","KMPDU1",95,0)
 ;  separate lines so that $Y will continue to be updated
"RTN","KMPDU1",96,0)
 ;
"RTN","KMPDU1",97,0)
 S LEN=+$G(LEN) Q:'LEN  N C
"RTN","KMPDU1",98,0)
 F C=0:1 Q:$E(@GLOBAL,(LEN*C),(LEN*(C+1)-1))']""  D 
"RTN","KMPDU1",99,0)
 .S:$G(KMPDY(LN))="" KMPDY(LN)="               "
"RTN","KMPDU1",100,0)
 .S KMPDY(LN)=$G(KMPDY(LN))_$E(@GLOBAL,(LEN*C),(LEN*(C+1)-1))
"RTN","KMPDU1",101,0)
 .S LN=LN+1
"RTN","KMPDU1",102,0)
 ;
"RTN","KMPDU1",103,0)
 Q
"RTN","KMPDU11")
0^41^B16579136
"RTN","KMPDU11",1,0)
KMPDU11 ;OAK/RAK - CM Tools Text Display Utility ;2/17/04  09:50
"RTN","KMPDU11",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDU11",3,0)
 ;
"RTN","KMPDU11",4,0)
WP(KMPUAR,KMPUTM,KMPUBM,KMPULM,KMPURM,KMPUNW,KMPUXIT) ;-- word processing display.
"RTN","KMPDU11",5,0)
 ;--------------------------------------------------------------------
"RTN","KMPDU11",6,0)
 ; KMPUAR...  Array containing word processing text.
"RTN","KMPDU11",7,0)
 ;            Example: ^KMPUTMP(1001,1,0)="This is the"
"RTN","KMPDU11",8,0)
 ;                     ^KMPUTMP(1001,2,0)="text to display."
"RTN","KMPDU11",9,0)
 ;
"RTN","KMPDU11",10,0)
 ;  Optional parameters:
"RTN","KMPDU11",11,0)
 ;
"RTN","KMPDU11",12,0)
 ; KMPUTM.. Top margin of screen area.
"RTN","KMPDU11",13,0)
 ; KMPUBM.. Bottom margin of screen area.
"RTN","KMPDU11",14,0)
 ; KMPULM.. Left margin.
"RTN","KMPDU11",15,0)
 ; KMPURM.. Right margin.
"RTN","KMPDU11",16,0)
 ; KMPUNW.. Nowrap:
"RTN","KMPDU11",17,0)
 ;           0 - nowrap (print as entered)
"RTN","KMPDU11",18,0)
 ;           1 - wrap
"RTN","KMPDU11",19,0)
 ; KMPUXIT. Exit without 'continue' text.  This allows the programmer
"RTN","KMPDU11",20,0)
 ;          to use their own display for continuing
"RTN","KMPDU11",21,0)
 ;           0 - do not exit - display 'continue' text
"RTN","KMPDU11",22,0)
 ;           1 - exit
"RTN","KMPDU11",23,0)
 ;
"RTN","KMPDU11",24,0)
 ; If more than one page this routine allows the user to scroll back
"RTN","KMPDU11",25,0)
 ; and forth between pages. If KMPUTM and KMPUBM are not passed will
"RTN","KMPDU11",26,0)
 ; default to full screen (0 to 22).
"RTN","KMPDU11",27,0)
 ;--------------------------------------------------------------------
"RTN","KMPDU11",28,0)
 ;
"RTN","KMPDU11",29,0)
 Q:'$D(KMPUAR)
"RTN","KMPDU11",30,0)
 ;
"RTN","KMPDU11",31,0)
 N CLRSCR,I,KMPUI,KMPUOUT,LEN,LINES,PAGE,PAGES
"RTN","KMPDU11",32,0)
 N DIR,DIW,DIWF,DIWI,DIWL,DIWR,DIWT,DIWTC,DIWX,X,Y,Z
"RTN","KMPDU11",33,0)
 N IOBM,IOECH,IOELALL,IOELEOL,IORVON,IORVOFF,IOTM,IOSTBM
"RTN","KMPDU11",34,0)
 ;
"RTN","KMPDU11",35,0)
 S KMPUXIT=+$G(KMPUXIT)
"RTN","KMPDU11",36,0)
 S KMPUTM=+$G(KMPUTM),KMPUBM=$S(+$G(KMPUBM):KMPUBM,1:22)
"RTN","KMPDU11",37,0)
 S KMPULM=+$G(KMPULM),KMPURM=+$G(KMPURM),KMPUNW=+$G(KMPUNW)
"RTN","KMPDU11",38,0)
 S:KMPUBM>22 KMPUBM=22 S DIWL=KMPULM,DIWR=$S(KMPURM:KMPURM,1:IOM)
"RTN","KMPDU11",39,0)
 S KMPUNW=$S(KMPUNW=1:"",1:"N")
"RTN","KMPDU11",40,0)
 S X="IOECH;IOELALL;IOELEOL;IORVON;IORVOFF;IOSTKMPUBM" D ENDR^%ZISS
"RTN","KMPDU11",41,0)
 ; set CLRSCR (clear screen) 
"RTN","KMPDU11",42,0)
 ; clear full screen
"RTN","KMPDU11",43,0)
 I DIWL=0,(DIWR=IOM) D 
"RTN","KMPDU11",44,0)
 .S CLRSCR="F DY=(KMPUBM-1):-1:KMPUTM X IOXY W IOELALL,!"
"RTN","KMPDU11",45,0)
 ; clear left margin to end of screen
"RTN","KMPDU11",46,0)
 E  I DIWR=IOM D 
"RTN","KMPDU11",47,0)
 .S CLRSCR="S DX=DIWL F DY=(KMPUBM-1):-1:KMPUTM X IOXY W IOELEOL,!"
"RTN","KMPDU11",48,0)
 ; clear left margin to right margin
"RTN","KMPDU11",49,0)
 E  S CLRSCR="F DY=(KMPUBM-1):-1:KMPUTM F DX=DIWL:1:DIWR X IOXY W IOECH"
"RTN","KMPDU11",50,0)
 K ^UTILITY($J,"W") S DIWF=KMPUNW,X=""
"RTN","KMPDU11",51,0)
 ; use fileman to format text
"RTN","KMPDU11",52,0)
 F KMPUI=0:0 S KMPUI=$O(@KMPUAR@(KMPUI)) Q:'KMPUI  D 
"RTN","KMPDU11",53,0)
 .Q:'$D(@KMPUAR@(KMPUI,0))  S X=@KMPUAR@(KMPUI,0) D ^DIWP
"RTN","KMPDU11",54,0)
 Q:'$D(^UTILITY($J,"W",DIWL))  S LINES=$G(^(DIWL))
"RTN","KMPDU11",55,0)
 ; check for last line equal to null
"RTN","KMPDU11",56,0)
 I $G(^UTILITY($J,"W",DIWL,LINES,0))="" S LINES=LINES-1
"RTN","KMPDU11",57,0)
 S LEN=KMPUBM-KMPUTM,PAGES=LINES\LEN I LINES#LEN S PAGES=PAGES+1
"RTN","KMPDU11",58,0)
 ;
"RTN","KMPDU11",59,0)
 ; set up the pages() array -  first piece = starting line
"RTN","KMPDU11",60,0)
 ;                            second piece = ending line
"RTN","KMPDU11",61,0)
 F I=1:1:PAGES D 
"RTN","KMPDU11",62,0)
 .S PAGES(I)=$S(I=1:1,1:(I*LEN-LEN+1))
"RTN","KMPDU11",63,0)
 .I I=1 S $P(PAGES(I),U,2)=$S(LINES<LEN:LINES,1:LEN) Q
"RTN","KMPDU11",64,0)
 .S $P(PAGES(I),U,2)=(I*LEN)
"RTN","KMPDU11",65,0)
 S DY=(KMPUTM-1),PAGE=1,KMPUOUT=0
"RTN","KMPDU11",66,0)
 ; main loop
"RTN","KMPDU11",67,0)
 F  D  Q:KMPUOUT
"RTN","KMPDU11",68,0)
 .F KMPUI=$P(PAGES(PAGE),U):1:$P(PAGES(PAGE),U,2) D 
"RTN","KMPDU11",69,0)
 ..Q:'$D(^UTILITY($J,"W",DIWL,KMPUI,0))
"RTN","KMPDU11",70,0)
 ..S DX=DIWL,DY=DY+1 X IOXY W ^UTILITY($J,"W",DIWL,KMPUI,0),!
"RTN","KMPDU11",71,0)
 .I 'KMPUXIT D FTR X CLRSCR Q:KMPUOUT  S DY=DY-1
"RTN","KMPDU11",72,0)
 .E  S KMPUOUT=1
"RTN","KMPDU11",73,0)
 F DY=22,23 X IOXY W IOELALL
"RTN","KMPDU11",74,0)
 K ^UTILITY($J,"W")
"RTN","KMPDU11",75,0)
 Q
"RTN","KMPDU11",76,0)
 ;
"RTN","KMPDU11",77,0)
FTR ;-- footer designed for wp subroutine above.
"RTN","KMPDU11",78,0)
 N READ,READX S READ=""
"RTN","KMPDU11",79,0)
 S DX=0,DY=22 X IOXY W $$REPEAT^XLFSTR("_",IOM)
"RTN","KMPDU11",80,0)
 I PAGES=1 S READ="X",READ("A")=$J(" ",28)_"Press <RET> to continue"
"RTN","KMPDU11",81,0)
 I PAGES>1 S READ="X",READ("A")="E[x]it" D 
"RTN","KMPDU11",82,0)
 .I PAGE<PAGES S READ=READ_"N",READ("A")=READ("A")_", [N]ext Screen"
"RTN","KMPDU11",83,0)
 .I PAGE>1 S READ=READ_"P",READ("A")=READ("A")_", [P]revious Screen"
"RTN","KMPDU11",84,0)
 S READ("A")=READ("A")_": "
"RTN","KMPDU11",85,0)
FTR1 ;-- read
"RTN","KMPDU11",86,0)
 S DX=0,DY=23 X IOXY W IOELALL
"RTN","KMPDU11",87,0)
 S DX=62 X IOXY W " Page ",PAGE," of ",PAGES," "
"RTN","KMPDU11",88,0)
 S DX=0 X IOXY W READ("A")
"RTN","KMPDU11",89,0)
 R READX:DTIME S READX=$$UP^XLFSTR(READX)
"RTN","KMPDU11",90,0)
 I READX="X"!(READX="^")!(READ="X") S KMPUOUT=1 Q
"RTN","KMPDU11",91,0)
 I READX="N",(READ["N") S PAGE=PAGE+1 Q
"RTN","KMPDU11",92,0)
 I READX="P",(READ["P") S PAGE=PAGE-1 Q
"RTN","KMPDU11",93,0)
 I READX["?" D HELP G FTR1
"RTN","KMPDU11",94,0)
 W *7
"RTN","KMPDU11",95,0)
 G FTR1
"RTN","KMPDU11",96,0)
 ;
"RTN","KMPDU11",97,0)
HELP ;-- clear screen, print help text, repaint screen.
"RTN","KMPDU11",98,0)
 N I,READX X CLRSCR S DY=KMPUTM,DX=$S(DIWL>7:DIWL,1:7) X IOXY
"RTN","KMPDU11",99,0)
 F I=1:1:$L(READ) S DY=DY+1 X IOXY D 
"RTN","KMPDU11",100,0)
 .I $E(READ,I)="X" W "Enter 'X' (or '^') to exit.",!
"RTN","KMPDU11",101,0)
 .I $E(READ,I)="N" W "Enter 'N' to advance to the next screen.",!
"RTN","KMPDU11",102,0)
 .I $E(READ,I)="P" W "Enter 'P' to backup to the previous screen.",!
"RTN","KMPDU11",103,0)
 S DY=(KMPUBM-1) X IOXY R "Press <RET> to continue: ",READX:DTIME
"RTN","KMPDU11",104,0)
 ; repaint screen.
"RTN","KMPDU11",105,0)
 X CLRSCR S DY=(KMPUTM-1)
"RTN","KMPDU11",106,0)
 F I=$P(PAGES(PAGE),U):1:$P(PAGES(PAGE),U,2) D 
"RTN","KMPDU11",107,0)
 .Q:'$D(^UTILITY($J,"W",DIWL,I,0))
"RTN","KMPDU11",108,0)
 .S DX=DIWL,DY=DY+1 X IOXY W ^UTILITY($J,"W",DIWL,I,0),!
"RTN","KMPDU11",109,0)
 Q
"RTN","KMPDU2")
0^20^B37510014
"RTN","KMPDU2",1,0)
KMPDU2 ;OAK/RAK - CM Tools Routine Utilities ;2/17/04  09:52
"RTN","KMPDU2",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDU2",3,0)
IRSRC(KMPDDA) ;-- extrinsic function - check for local mods in INSTALL file
"RTN","KMPDU2",4,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU2",5,0)
 ; KMPDDA... DA as defined in fileman programmers manual.
"RTN","KMPDU2",6,0)
 ;
"RTN","KMPDU2",7,0)
 ; Return: "NO"  - no local mods.
"RTN","KMPDU2",8,0)
 ;         "YES" - local mods.
"RTN","KMPDU2",9,0)
 ;
"RTN","KMPDU2",10,0)
 ; This extrinsic function is called from computed field #573099 (LOCAL
"RTN","KMPDU2",11,0)
 ; MODIFICATIONS) in file #9.7 (INSTALL).
"RTN","KMPDU2",12,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU2",13,0)
 ;
"RTN","KMPDU2",14,0)
 Q:'$G(KMPDDA) "NO"
"RTN","KMPDU2",15,0)
 ;
"RTN","KMPDU2",16,0)
 N I,RTN,RETURN
"RTN","KMPDU2",17,0)
 S I=0,RETURN="NO"
"RTN","KMPDU2",18,0)
 F  S I=$O(^XPD(9.7,KMPDDA,"RTN",I)) Q:'I  D  Q:RETURN="YES"
"RTN","KMPDU2",19,0)
 .Q:'$D(^XPD(9.7,KMPDDA,"RTN",I,0))  S RTN=$P(^(0),U)
"RTN","KMPDU2",20,0)
 .S:$$ROUSRC1(RTN,"LOCAL MOD/") RETURN="YES"
"RTN","KMPDU2",21,0)
 .;S:$$ROUSRC1(RTN,"/LOCAL MOD/") RETURN="YES"
"RTN","KMPDU2",22,0)
 ;
"RTN","KMPDU2",23,0)
 Q RETURN
"RTN","KMPDU2",24,0)
 ;
"RTN","KMPDU2",25,0)
ROUFIND(KMPDY,KMPDRNM,KMPDGBL) ;-- find routines.
"RTN","KMPDU2",26,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU2",27,0)
 ; KMPDRNM.. Routine name to search for.
"RTN","KMPDU2",28,0)
 ; KMPDGBL... Global to store data.  Stored in format:
"RTN","KMPDU2",29,0)
 ;              RoutineName^RoutineSize^Checksum
"RTN","KMPDU2",30,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU2",31,0)
 ;
"RTN","KMPDU2",32,0)
 K KMPDY
"RTN","KMPDU2",33,0)
 ;
"RTN","KMPDU2",34,0)
 S KMPDRNM=$G(KMPDRNM),KMPDGBL=$G(KMPDGBL)
"RTN","KMPDU2",35,0)
 ;
"RTN","KMPDU2",36,0)
 I KMPDGBL="" S KMPDY="[Global for storage is not defined]" Q
"RTN","KMPDU2",37,0)
 ;
"RTN","KMPDU2",38,0)
 N DATA,LN,ROU,RTN,X,Y
"RTN","KMPDU2",39,0)
 ;
"RTN","KMPDU2",40,0)
 ; kill global with check for ^tmp or ^utility.
"RTN","KMPDU2",41,0)
 D KILL^KMPU(.DATA,KMPDGBL)
"RTN","KMPDU2",42,0)
 ; if error.
"RTN","KMPDU2",43,0)
 I $E(DATA)="[" S KMPDY=DATA Q
"RTN","KMPDU2",44,0)
 ;
"RTN","KMPDU2",45,0)
 S KMPDY=$NA(@KMPDGBL)
"RTN","KMPDU2",46,0)
 ;
"RTN","KMPDU2",47,0)
 ; if no asterisk (*) then look for routine.
"RTN","KMPDU2",48,0)
 I KMPDRNM'["*" D  Q
"RTN","KMPDU2",49,0)
 .; if routine name greater than 8 characters
"RTN","KMPDU2",50,0)
 .I $L(KMPDRNM)>8 S @KMPDGBL@(0)="<"_KMPDRNM_" is greater than 8 characters>" Q
"RTN","KMPDU2",51,0)
 .; if routine not defined.
"RTN","KMPDU2",52,0)
 .I '$D(^$ROUTINE(KMPDRNM)) S @KMPDGBL@(0)="<Routine "_KMPDRNM_" not defined>" Q
"RTN","KMPDU2",53,0)
 .; if defined.
"RTN","KMPDU2",54,0)
 .S $P(@KMPDGBL@(0),U)=KMPDRNM
"RTN","KMPDU2",55,0)
 .; checksum
"RTN","KMPDU2",56,0)
 .S X=KMPDRNM X ^%ZOSF("RSUM") S $P(@KMPDGBL@(0),U,2)=Y
"RTN","KMPDU2",57,0)
 ;
"RTN","KMPDU2",58,0)
 ; remove "*" if any.
"RTN","KMPDU2",59,0)
 S:$E(KMPDRNM,$L(KMPDRNM))="*" KMPDRNM=$E(KMPDRNM,1,$L(KMPDRNM)-1)
"RTN","KMPDU2",60,0)
 S (ROU,RTN)=KMPDRNM,LN=0
"RTN","KMPDU2",61,0)
 S ROU=$E(ROU,1,$L(ROU)-1)
"RTN","KMPDU2",62,0)
 S ROU=ROU_$C(($A($E(KMPDRNM,$L(KMPDRNM)))-1))_"zz"
"RTN","KMPDU2",63,0)
 F  S ROU=$O(^$ROUTINE(ROU)) Q:ROU=""!($E(ROU,1,$L(RTN))'=RTN)  D 
"RTN","KMPDU2",64,0)
 .S $P(@KMPDGBL@(LN),U)=ROU
"RTN","KMPDU2",65,0)
 .; checksum
"RTN","KMPDU2",66,0)
 .S X=ROU X ^%ZOSF("RSUM") S $P(@KMPDGBL@(LN),U,2)=Y
"RTN","KMPDU2",67,0)
 .S LN=LN+1
"RTN","KMPDU2",68,0)
 ;
"RTN","KMPDU2",69,0)
 S:'$D(@KMPDGBL) KMPDY(0)="<No Data To Report>"
"RTN","KMPDU2",70,0)
 ;
"RTN","KMPDU2",71,0)
 Q
"RTN","KMPDU2",72,0)
 ;
"RTN","KMPDU2",73,0)
ROUINQ(KMPDY,KMPDROU) ;-- routine inquiry.
"RTN","KMPDU2",74,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU2",75,0)
 ; KMPDROU.. Routine(s) to search (this may be a partial name.
"RTN","KMPDU2",76,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU2",77,0)
 ;
"RTN","KMPDU2",78,0)
 K KMPDY
"RTN","KMPDU2",79,0)
 ;
"RTN","KMPDU2",80,0)
 S KMPDROU=$G(KMPDROU)
"RTN","KMPDU2",81,0)
 I KMPDROU="" S KMPDY(0)="[Routine name not defined]" Q
"RTN","KMPDU2",82,0)
 I '$D(^$ROUTINE(KMPDROU)) S KMPDY(0)="[Routine '"_KMPDROU_"' not defined]" Q
"RTN","KMPDU2",83,0)
 ;
"RTN","KMPDU2",84,0)
 N DIF,I,LN,ROU,X,XCNP
"RTN","KMPDU2",85,0)
 ;
"RTN","KMPDU2",86,0)
 S DIF="ROU(",XCNP=0
"RTN","KMPDU2",87,0)
 S X=KMPDROU X ^%ZOSF("TEST")
"RTN","KMPDU2",88,0)
 I '$T S KMPDY(0)="[Routine '"_KMPDROU_"' not defined]" Q
"RTN","KMPDU2",89,0)
 X ^%ZOSF("LOAD")
"RTN","KMPDU2",90,0)
 S (I,LN)=0
"RTN","KMPDU2",91,0)
 F  S I=$O(ROU(I)) Q:'I  I $D(ROU(I,0)) D 
"RTN","KMPDU2",92,0)
 .S KMPDY(LN)=ROU(I,0),LN=LN+1
"RTN","KMPDU2",93,0)
 ;
"RTN","KMPDU2",94,0)
 S:'$D(KMPDY) KMPDY(0)="[Unable to load routine]"
"RTN","KMPDU2",95,0)
 ;
"RTN","KMPDU2",96,0)
 Q
"RTN","KMPDU2",97,0)
 ;
"RTN","KMPDU2",98,0)
ROUSRC(KMPDY,KMPDROU,KMPDTXT) ;-- routine search
"RTN","KMPDU2",99,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU2",100,0)
 ; KMPDROU.. Routine(s) to search (this may be a partial name.
"RTN","KMPDU2",101,0)
 ; KMPDTXT.. Text to search for in routine.
"RTN","KMPDU2",102,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU2",103,0)
 ;
"RTN","KMPDU2",104,0)
 K KMPDY
"RTN","KMPDU2",105,0)
 ;
"RTN","KMPDU2",106,0)
 S KMPDROU=$G(KMPDROU),KMPDTXT=$$UP^XLFSTR($G(KMPDTXT))
"RTN","KMPDU2",107,0)
 ;
"RTN","KMPDU2",108,0)
 I KMPDROU="" S KMPDY(0)="[Routine(s) not defined]" Q
"RTN","KMPDU2",109,0)
 ;
"RTN","KMPDU2",110,0)
 I KMPDTXT="" S KMPDY(0)="[Search Text not defined]" Q
"RTN","KMPDU2",111,0)
 ;
"RTN","KMPDU2",112,0)
 N LN,RN,RTN,STAR
"RTN","KMPDU2",113,0)
 ;
"RTN","KMPDU2",114,0)
 S RTN=KMPDROU,STAR=$E(RTN,$L(RTN))
"RTN","KMPDU2",115,0)
 S:STAR="*" RTN=$E(RTN,1,$L(RTN)-1)
"RTN","KMPDU2",116,0)
 ;
"RTN","KMPDU2",117,0)
 ; if just one routine.
"RTN","KMPDU2",118,0)
 I STAR'="*" D  Q
"RTN","KMPDU2",119,0)
 .; if match.
"RTN","KMPDU2",120,0)
 .I $$ROUSRC1(RTN,KMPDTXT) S KMPDY(0)=RTN Q
"RTN","KMPDU2",121,0)
 .; else no match.
"RTN","KMPDU2",122,0)
 .S KMPDY(0)="<No Matches Found>"
"RTN","KMPDU2",123,0)
 ;
"RTN","KMPDU2",124,0)
 S RN=RTN,LN=0
"RTN","KMPDU2",125,0)
 F  S RN=$O(^$ROUTINE(RN)) Q:RN=""!($E(RN,1,$L(RTN))'=RTN)  D 
"RTN","KMPDU2",126,0)
 .; if match.
"RTN","KMPDU2",127,0)
 .I $$ROUSRC1(RN,KMPDTXT) S KMPDY(LN)=RN,LN=LN+1 Q
"RTN","KMPDU2",128,0)
 ;
"RTN","KMPDU2",129,0)
 S:'$D(KMPDY) KMPDY(0)="<No Matches Found>"
"RTN","KMPDU2",130,0)
 ;
"RTN","KMPDU2",131,0)
 Q
"RTN","KMPDU2",132,0)
 ;
"RTN","KMPDU2",133,0)
ROUSRC1(KMPDROU,KMPDTXT) ;-- extrinsic function - check for text.
"RTN","KMPDU2",134,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU2",135,0)
 ; KMPDROU.. Routine(s) to search (this may be a partial name.
"RTN","KMPDU2",136,0)
 ; KMPDTXT.. Text to search for in routine.
"RTN","KMPDU2",137,0)
 ;
"RTN","KMPDU2",138,0)
 ; Return: 0 - no match.
"RTN","KMPDU2",139,0)
 ;         1 - match.
"RTN","KMPDU2",140,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU2",141,0)
 ;
"RTN","KMPDU2",142,0)
 S KMPDROU=$G(KMPDROU),KMPDTXT=$$UP^XLFSTR($G(KMPDTXT))
"RTN","KMPDU2",143,0)
 ;
"RTN","KMPDU2",144,0)
 Q:KMPDROU="" 0
"RTN","KMPDU2",145,0)
 Q:KMPDTXT="" 0
"RTN","KMPDU2",146,0)
 ;
"RTN","KMPDU2",147,0)
 N DIF,I,RETURN,ROU,X,XCNP
"RTN","KMPDU2",148,0)
 ;
"RTN","KMPDU2",149,0)
 S DIF="ROU(",(I,RETURN,XCNP)=0,RETURN=0
"RTN","KMPDU2",150,0)
 S X=KMPDROU X ^%ZOSF("TEST")
"RTN","KMPDU2",151,0)
 Q:'$T 0
"RTN","KMPDU2",152,0)
 X ^%ZOSF("LOAD")
"RTN","KMPDU2",153,0)
 F  S I=$O(ROU(I)) Q:'I  I $D(ROU(I,0)) D  Q:RETURN
"RTN","KMPDU2",154,0)
 .I $$UP^XLFSTR(ROU(I,0))[KMPDTXT S RETURN=1
"RTN","KMPDU2",155,0)
 ;
"RTN","KMPDU2",156,0)
 Q RETURN
"RTN","KMPDU2",157,0)
 ;
"RTN","KMPDU2",158,0)
ROUSRC2(KMPDY,KMPDROU,KMPDTXT,KMPDGBL) ;-- search for text in routine.
"RTN","KMPDU2",159,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU2",160,0)
 ; KMPDROU.. Routine(s) to search.
"RTN","KMPDU2",161,0)
 ; KMPDTXT.. Text to search for in routine.
"RTN","KMPDU2",162,0)
 ; KMPDGBL... Global to store data.
"RTN","KMPDU2",163,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU2",164,0)
 ;
"RTN","KMPDU2",165,0)
 K KMPDY
"RTN","KMPDU2",166,0)
 ;
"RTN","KMPDU2",167,0)
 S KMPDROU=$G(KMPDROU),KMPDGBL=$G(KMPDGBL)
"RTN","KMPDU2",168,0)
 ;
"RTN","KMPDU2",169,0)
 I KMPDGBL="" S KMPDY="[Global for storage is not defined]" Q
"RTN","KMPDU2",170,0)
 ;
"RTN","KMPDU2",171,0)
 N DATA,DIF,I,LABEL,LN,OFFSET,ONE,ROU,RTN,X,XCNP
"RTN","KMPDU2",172,0)
 ;
"RTN","KMPDU2",173,0)
 ; kill global with check for ^tmp or ^utility.
"RTN","KMPDU2",174,0)
 D KILL^KMPU(.DATA,KMPDGBL)
"RTN","KMPDU2",175,0)
 ; if error.
"RTN","KMPDU2",176,0)
 I $E(DATA)="[" S KMPDY=DATA Q
"RTN","KMPDU2",177,0)
 ;
"RTN","KMPDU2",178,0)
 S KMPDY=$NA(@KMPDGBL)
"RTN","KMPDU2",179,0)
 ;
"RTN","KMPDU2",180,0)
 S KMPDROU=$G(KMPDROU),KMPDTXT=$$UP^XLFSTR($G(KMPDTXT))
"RTN","KMPDU2",181,0)
 ;
"RTN","KMPDU2",182,0)
 I KMPDROU="" S @KMPDGBL@(0)="[Routine(s) name not defined]" Q
"RTN","KMPDU2",183,0)
 I KMPDTXT="" S @KMPDGBL@(0)="[Search text not defined]" Q
"RTN","KMPDU2",184,0)
 ;
"RTN","KMPDU2",185,0)
 S ONE=1
"RTN","KMPDU2",186,0)
 ; remove "*" if any.
"RTN","KMPDU2",187,0)
 I $E(KMPDROU,$L(KMPDROU))="*" D 
"RTN","KMPDU2",188,0)
 .S KMPDROU=$E(KMPDROU,1,$L(KMPDROU)-1)
"RTN","KMPDU2",189,0)
 .S ONE=0
"RTN","KMPDU2",190,0)
 ; get ready to $order.
"RTN","KMPDU2",191,0)
 S RTN=KMPDROU
"RTN","KMPDU2",192,0)
 S DATA=KMPDROU
"RTN","KMPDU2",193,0)
 S DATA=$E(DATA,1,$L(DATA)-1)
"RTN","KMPDU2",194,0)
 S DATA=DATA_$C(($A($E(KMPDROU,$L(KMPDROU)))-1))_"zz"
"RTN","KMPDU2",195,0)
 S KMPDROU=DATA
"RTN","KMPDU2",196,0)
 ;
"RTN","KMPDU2",197,0)
 S ROU=KMPDROU,LN=0
"RTN","KMPDU2",198,0)
 F  S ROU=$O(^$ROUTINE(ROU)) Q:ROU=""!($E(ROU,1,$L(RTN))'=RTN)  D  Q:ONE
"RTN","KMPDU2",199,0)
 .K ROUT
"RTN","KMPDU2",200,0)
 .S DIF="ROUT(",(I,OFFSET,XCNP)=0,LABEL=ROU
"RTN","KMPDU2",201,0)
 .S X=ROU X ^%ZOSF("TEST") Q:'$T
"RTN","KMPDU2",202,0)
 .X ^%ZOSF("LOAD")
"RTN","KMPDU2",203,0)
 .F  S I=$O(ROUT(I)) Q:'I  I $D(ROUT(I,0)) D 
"RTN","KMPDU2",204,0)
 ..S OFFSET=OFFSET+1
"RTN","KMPDU2",205,0)
 ..; if new label.
"RTN","KMPDU2",206,0)
 ..I $E(ROUT(I,0))'=" " S LABEL=$$ROULABEL^KMPDU2(ROUT(I,0)),OFFSET=0
"RTN","KMPDU2",207,0)
 ..; quit if no match.
"RTN","KMPDU2",208,0)
 ..Q:$$UP^XLFSTR(ROUT(I,0))'[KMPDTXT
"RTN","KMPDU2",209,0)
 ..S @KMPDGBL@(LN)=ROU_"^"_LABEL_$S(OFFSET:"+"_OFFSET,1:"")_"  "_ROUT(I,0)
"RTN","KMPDU2",210,0)
 ..S LN=LN+1
"RTN","KMPDU2",211,0)
 ;
"RTN","KMPDU2",212,0)
 S:'$D(@KMPDGBL) @KMPDGBL@(0)="<No Match Found>"
"RTN","KMPDU2",213,0)
 ;
"RTN","KMPDU2",214,0)
 Q
"RTN","KMPDU2",215,0)
 ;
"RTN","KMPDU2",216,0)
ROULABEL(TEXT) ;-- routine label.
"RTN","KMPDU2",217,0)
 Q:$G(TEXT)="" ""
"RTN","KMPDU2",218,0)
 N I,LABEL
"RTN","KMPDU2",219,0)
 S LABEL=""
"RTN","KMPDU2",220,0)
 F I=1:1 Q:$E(TEXT,I)=" "!($E(TEXT,I)="(")  S LABEL=$E(TEXT,0,I)
"RTN","KMPDU2",221,0)
 Q LABEL
"RTN","KMPDU3")
0^21^B23853998
"RTN","KMPDU3",1,0)
KMPDU3 ;OAK/RAK - CM Tools Utilities ;2/17/04  09:53
"RTN","KMPDU3",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDU3",3,0)
 ;
"RTN","KMPDU3",4,0)
ERRDATA(KMPDY,KMPDIEN,KMPDGBL) ;-- error log data.
"RTN","KMPDU3",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU3",6,0)
 ; KMPDIEN. Ien in format 'multiple,ien'.
"RTN","KMPDU3",7,0)
 ; KMPDGBL... Global where data is stored.
"RTN","KMPDU3",8,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU3",9,0)
 ;
"RTN","KMPDU3",10,0)
 K KMPDY
"RTN","KMPDU3",11,0)
 ;
"RTN","KMPDU3",12,0)
 I $G(KMPDIEN)="" S @KMPDGBL@(0)="[IEN not defined]" Q
"RTN","KMPDU3",13,0)
 ;
"RTN","KMPDU3",14,0)
 I KMPDGBL="" S @KMPDGBL@(0)="[Global for storage is not defined]" Q
"RTN","KMPDU3",15,0)
 ;
"RTN","KMPDU3",16,0)
 N DATA,DATA1,I,IEN,IEN1,LN
"RTN","KMPDU3",17,0)
 ;
"RTN","KMPDU3",18,0)
 ; kill global with check for ^tmp or ^utility.
"RTN","KMPDU3",19,0)
 D KILL^KMPU(.DATA,KMPDGBL)
"RTN","KMPDU3",20,0)
 ; if error.
"RTN","KMPDU3",21,0)
 I $E(DATA)="[" S @KMPDGBL@(0)=DATA Q
"RTN","KMPDU3",22,0)
 ;
"RTN","KMPDU3",23,0)
 S IEN1=$P(KMPDIEN,",")
"RTN","KMPDU3",24,0)
 I 'IEN1 S @KMPDGBL@(0)="[IEN1 not defined]" Q
"RTN","KMPDU3",25,0)
 S IEN=$P(KMPDIEN,",",2)
"RTN","KMPDU3",26,0)
 I 'IEN S @KMPDGBL@(0)="[IEN not defined]" Q
"RTN","KMPDU3",27,0)
 ;
"RTN","KMPDU3",28,0)
 S DATA=$G(^%ZTER(1,IEN,0))
"RTN","KMPDU3",29,0)
 I DATA="" S @KMPDGBL@(0)="[No data for "_KMPDIEN_"]" Q
"RTN","KMPDU3",30,0)
 ;
"RTN","KMPDU3",31,0)
 ; $h date in external format.
"RTN","KMPDU3",32,0)
 S @KMPDGBL@(0)=$$HTE^XLFDT(+DATA)
"RTN","KMPDU3",33,0)
 ; error text.
"RTN","KMPDU3",34,0)
 S @KMPDGBL@(1)=$G(^%ZTER(1,IEN,1,IEN1,"ZE"))
"RTN","KMPDU3",35,0)
 S @KMPDGBL@(2)="",LN=3
"RTN","KMPDU3",36,0)
 ; last global reference.
"RTN","KMPDU3",37,0)
 I $G(^%ZTER(1,IEN,1,IEN1,"GR"))'="" D 
"RTN","KMPDU3",38,0)
 .S @KMPDGBL@(LN)="Last Global Reference: "_^("GR"),LN=LN+1
"RTN","KMPDU3",39,0)
 ; $h.
"RTN","KMPDU3",40,0)
 I $G(^%ZTER(1,IEN,1,IEN1,"H"))'="" D 
"RTN","KMPDU3",41,0)
 .S @KMPDGBL@(LN)="$H: "_^("H"),LN=LN+1
"RTN","KMPDU3",42,0)
 S DATA=$G(^%ZTER(1,IEN,1,IEN1,"ECODE"))
"RTN","KMPDU3",43,0)
 ; $ecode
"RTN","KMPDU3",44,0)
 S @KMPDGBL@(LN)="$ECODE = "_$P(DATA,U),LN=LN+1
"RTN","KMPDU3",45,0)
 ; $stack
"RTN","KMPDU3",46,0)
 S @KMPDGBL@(LN)="$STACK = "_$P(DATA,U,2),LN=LN+1
"RTN","KMPDU3",47,0)
 ; $estack
"RTN","KMPDU3",48,0)
 S @KMPDGBL@(LN)="$ESTACK = "_$P(DATA,U,3),LN=LN+1
"RTN","KMPDU3",49,0)
 ; $quit
"RTN","KMPDU3",50,0)
 S @KMPDGBL@(LN)="$QUIT = "_$P(DATA,U,4),LN=LN+1
"RTN","KMPDU3",51,0)
 ; $stack multiple.
"RTN","KMPDU3",52,0)
 F I=0:0 S I=$O(^%ZTER(1,IEN,1,IEN1,"STACK",I)) Q:'I  D 
"RTN","KMPDU3",53,0)
 .Q:'$D(^%ZTER(1,IEN,1,IEN1,"STACK",I,0))  S DATA=^(0)
"RTN","KMPDU3",54,0)
 .S @KMPDGBL@(LN)=$P(DATA,U)_" = "_$P(DATA,U,2)
"RTN","KMPDU3",55,0)
 .S LN=LN+1
"RTN","KMPDU3",56,0)
 ; variables and data multiple #10.
"RTN","KMPDU3",57,0)
 F I=0:0 S I=$O(^%ZTER(1,IEN,1,IEN1,"ZV",I)) Q:'I  D 
"RTN","KMPDU3",58,0)
 .Q:'$D(^%ZTER(1,IEN,1,IEN1,"ZV",I,0))  S DATA=^(0),DATA1=$G(^("D"))
"RTN","KMPDU3",59,0)
 .Q:DATA=""
"RTN","KMPDU3",60,0)
 .S @KMPDGBL@(LN)=DATA_" = "_$E(DATA1,1,225)
"RTN","KMPDU3",61,0)
 .S LN=LN+1
"RTN","KMPDU3",62,0)
 ;
"RTN","KMPDU3",63,0)
 S KMPDY=$NA(@KMPDGBL)
"RTN","KMPDU3",64,0)
 S:'$D(@KMPDGBL) KMPDY="<No Data To Report>"
"RTN","KMPDU3",65,0)
 ;
"RTN","KMPDU3",66,0)
 Q
"RTN","KMPDU3",67,0)
 ;
"RTN","KMPDU3",68,0)
ERRDATE(KMPDY,KMPDATE) ;-- get error log date or list all dates
"RTN","KMPDU3",69,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU3",70,0)
 ; KMPDATE... Date in internal fileman format, or "*" for a list of all
"RTN","KMPDU3",71,0)
 ;            available dates.
"RTN","KMPDU3",72,0)
 ;
"RTN","KMPDU3",73,0)
 ;          if one date
"RTN","KMPDU3",74,0)
 ; KMPDY(0)=ExternalDate^Ien^NumberOfErrors
"RTN","KMPDU3",75,0)
 ;
"RTN","KMPDU3",76,0)
 ;          or a list of all available dates
"RTN","KMPDU3",77,0)
 ; KMPDY(0)=ExternalDate^Ien^NumberOfErrors
"RTN","KMPDU3",78,0)
 ; KMPDY(1)=ExternalDate^Ien^NumberOfErrors
"RTN","KMPDU3",79,0)
 ; KMPDY(2)=ExternalDate^Ien^NumberOfErrors
"RTN","KMPDU3",80,0)
 ; KMPDY(...)=...
"RTN","KMPDU3",81,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU3",82,0)
 ;
"RTN","KMPDU3",83,0)
 I $G(KMPDATE)="" S KMPDY(0)="[Date entry not defined]" Q
"RTN","KMPDU3",84,0)
 ;
"RTN","KMPDU3",85,0)
 I KMPDATE'="*" D  Q
"RTN","KMPDU3",86,0)
 .; external date
"RTN","KMPDU3",87,0)
 .S $P(KMPDY(0),U)=$$FMTE^XLFDT(KMPDATE)
"RTN","KMPDU3",88,0)
 .; set to date portion of $h format
"RTN","KMPDU3",89,0)
 .S KMPDATE=+$$FMTH^XLFDT(KMPDATE)
"RTN","KMPDU3",90,0)
 .; ien
"RTN","KMPDU3",91,0)
 .S $P(KMPDY(0),U,2)=$O(^%ZTER(1,"B",KMPDATE,0))
"RTN","KMPDU3",92,0)
 .; number of errors
"RTN","KMPDU3",93,0)
 .S $P(KMPDY(0),U,3)=$P($G(^%ZTER(1,+$P(KMPDY(0),U,2),1,0)),U,3)
"RTN","KMPDU3",94,0)
 ;
"RTN","KMPDU3",95,0)
 ; if all entries requested
"RTN","KMPDU3",96,0)
 I KMPDATE="*" D  Q
"RTN","KMPDU3",97,0)
 .N DATE,I,LN S (I,LN)=0
"RTN","KMPDU3",98,0)
 .F  S I=$O(^%ZTER(1,"B",I)) Q:'I  I $D(^%ZTER(1,I,0)) D 
"RTN","KMPDU3",99,0)
 ..; external date
"RTN","KMPDU3",100,0)
 ..S $P(KMPDY(LN),U)=$$HTE^XLFDT(I)
"RTN","KMPDU3",101,0)
 ..; ien
"RTN","KMPDU3",102,0)
 ..S $P(KMPDY(LN),U,2)=I
"RTN","KMPDU3",103,0)
 ..; number of errors
"RTN","KMPDU3",104,0)
 ..S $P(KMPDY(LN),U,3)=$P($G(^%ZTER(1,I,1,0)),U,3)
"RTN","KMPDU3",105,0)
 ..S LN=LN+1
"RTN","KMPDU3",106,0)
 ;
"RTN","KMPDU3",107,0)
 Q
"RTN","KMPDU3",108,0)
 ;
"RTN","KMPDU3",109,0)
FMDTI(Y,X) ;-- date/time in internal fileMan format.
"RTN","KMPDU3",110,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU3",111,0)
 ;     X - User response ('T', '12/12/94', etc.)
"RTN","KMPDU3",112,0)
 ;
"RTN","KMPDU3",113,0)
 ; Return: "^" - incorrect response
"RTN","KMPDU3",114,0)
 ;         FMInternalDate^ExternaDate
"RTN","KMPDU3",115,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU3",116,0)
 K Y
"RTN","KMPDU3",117,0)
 I $G(X)']"" S Y(0)="^" Q
"RTN","KMPDU3",118,0)
 N %DT,DATETIME
"RTN","KMPDU3",119,0)
 S %DT="ST" D ^%DT
"RTN","KMPDU3",120,0)
 S DATETIME=$S(Y>0:Y,1:"^")
"RTN","KMPDU3",121,0)
 K Y
"RTN","KMPDU3",122,0)
 ;-- fm internal format.
"RTN","KMPDU3",123,0)
 S Y(0)=DATETIME
"RTN","KMPDU3",124,0)
 ;-- external format.
"RTN","KMPDU3",125,0)
 S Y(1)=$$FMTE^XLFDT(DATETIME)
"RTN","KMPDU3",126,0)
 Q
"RTN","KMPDU3",127,0)
 ;
"RTN","KMPDU3",128,0)
ROUSAVE(KMPDRES,KMPDRNM,KMPDRCD) ;-- routine save
"RTN","KMPDU3",129,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU3",130,0)
 ; KMPDRNM... Routine name.
"RTN","KMPDU3",131,0)
 ; KMPDRCD... Array contianing routine code (or text).
"RTN","KMPDU3",132,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU3",133,0)
 ;
"RTN","KMPDU3",134,0)
 K KMPDRES
"RTN","KMPDU3",135,0)
 I $G(KMPDRNM)="" S KMPDRES(0)="[Routine Name not defined]" Q
"RTN","KMPDU3",136,0)
 I $L(KMPDRNM)>8 D  Q
"RTN","KMPDU3",137,0)
 .S KMPDRES(0)="[Routine Name must not be greater than 8 characters]"
"RTN","KMPDU3",138,0)
 I '$D(KMPDRCD) D  Q
"RTN","KMPDU3",139,0)
 .S KMPDRES(0)="[There is no Routine code (text) to save]"
"RTN","KMPDU3",140,0)
 ;
"RTN","KMPDU3",141,0)
 N DIE,GLOBAL,I,X,XCN
"RTN","KMPDU3",142,0)
 S GLOBAL=$NA(^TMP("KMPDU3-1",$J))
"RTN","KMPDU3",143,0)
 K @GLOBAL
"RTN","KMPDU3",144,0)
 S I=0
"RTN","KMPDU3",145,0)
 F  S I=$O(KMPDRCD(I)) Q:'I  S @GLOBAL@(I,0)=KMPDRCD(I)
"RTN","KMPDU3",146,0)
 S X=KMPDRNM,DIE="^TMP("_"""KMPDU3-1"""_","_$J_",",XCN=0
"RTN","KMPDU3",147,0)
 X ^%ZOSF("SAVE")
"RTN","KMPDU3",148,0)
 ;
"RTN","KMPDU3",149,0)
 S KMPDRES(0)="<Routine Saved>"
"RTN","KMPDU3",150,0)
 ;
"RTN","KMPDU3",151,0)
 Q
"RTN","KMPDU3",152,0)
 ;
"RTN","KMPDU3",153,0)
ROUSTATS(KMPDRES,KMPDIENS) ;-- routine stats
"RTN","KMPDU3",154,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU3",155,0)
 ; KMPDIENS... Ien(s) for file #8972.1 (CAPMAN ROUTINE STATS).  If more
"RTN","KMPDU3",156,0)
 ;             than one Ien then each will be seperated by a comma.
"RTN","KMPDU3",157,0)
 ;             Example: KMPDIENS="12,98,38,123"
"RTN","KMPDU3",158,0)
 ;
"RTN","KMPDU3",159,0)
 ; KMPDRES()   Results up-arrow (^) delimited in format:
"RTN","KMPDU3",160,0)
 ;             Piece 1  - Name..................(field .01)
"RTN","KMPDU3",161,0)
 ;             Piece 4  - CPU Time..............(field #.04)
"RTN","KMPDU3",162,0)
 ;             Piece 5  - DIO References........(field #.05)
"RTN","KMPDU3",163,0)
 ;             Piece 6  - BIO References........(field #.06)
"RTN","KMPDU3",164,0)
 ;             Piece 7  - Page Faults...........(field #.07)
"RTN","KMPDU3",165,0)
 ;             Piece 8  - M commands/Lines......(field #.08)
"RTN","KMPDU3",166,0)
 ;             Piece 9  - Global References.....(field #.09)
"RTN","KMPDU3",167,0)
 ;             Piece 10 - Count.................(field #.1)
"RTN","KMPDU3",168,0)
 ;             Piece 14 - Ave CPU Time..........(field #99.04 - computed)
"RTN","KMPDU3",169,0)
 ;             Piece 15 - Ave DIO References....(field #99.05 - computed)
"RTN","KMPDU3",170,0)
 ;             Piece 16 - Ave BIO References....(field #99.06 - computed)
"RTN","KMPDU3",171,0)
 ;             Piece 17 - Ave Page Faults.......(field #99.07 - computed)
"RTN","KMPDU3",172,0)
 ;             Piece 18 - Ave M Commands/Lines..(field #99.08 - computed)
"RTN","KMPDU3",173,0)
 ;             Piece 19 - Ave Global References.(field #99.09 - computed)
"RTN","KMPDU3",174,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU3",175,0)
 ;
"RTN","KMPDU3",176,0)
 K KMPDRES
"RTN","KMPDU3",177,0)
 I $G(KMPDIENS)="" S KMPDRES(0)="[IEN data not defined]" Q
"RTN","KMPDU3",178,0)
 ;
"RTN","KMPDU3",179,0)
 N DATA,I,IEN,J,LN
"RTN","KMPDU3",180,0)
 ;
"RTN","KMPDU3",181,0)
 S IEN="",(I,LN)=0
"RTN","KMPDU3",182,0)
 F I=1:1 S IEN=$P(KMPDIENS,",",I) Q:'IEN  D 
"RTN","KMPDU3",183,0)
 .Q:'$D(^KMPD(8972.1,IEN,0))  S DATA=^(0)
"RTN","KMPDU3",184,0)
 .; put second piece (date/time entered) in external format
"RTN","KMPDU3",185,0)
 .S $P(DATA,U,2)=$$FMTE^XLFDT($P(DATA,U,2))
"RTN","KMPDU3",186,0)
 .S KMPDRES(LN)=DATA
"RTN","KMPDU3",187,0)
 .; computed fields
"RTN","KMPDU3",188,0)
 .F J=4:1:9 S $P(KMPDRES(LN),U,(J+10))=$$GET1^DIQ(8972.1,IEN,(99+(.01*J)))
"RTN","KMPDU3",189,0)
 .S LN=LN+1
"RTN","KMPDU3",190,0)
 ;
"RTN","KMPDU3",191,0)
 S:'$D(KMPDRES) KMPDRES(0)="<No Data to Report>"
"RTN","KMPDU3",192,0)
 ;
"RTN","KMPDU3",193,0)
 Q
"RTN","KMPDU4")
0^22^B1414998
"RTN","KMPDU4",1,0)
KMPDU4 ;OAK/RAK - CM Tools Utilities ;2/17/04  09:54
"RTN","KMPDU4",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDU4",3,0)
 ;
"RTN","KMPDU4",4,0)
ASSCROU(KMPDRES,KMPDIEN,KMPDROU) ;-- add/remove Associate Routines to file 8972.1
"RTN","KMPDU4",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU4",6,0)
 ; KMPDIEN... Ien for file #8972.1 (CM CODE EVALUATOR).
"RTN","KMPDU4",7,0)
 ; KMPDROU(). Array containing list of routines for this Ien.
"RTN","KMPDU4",8,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU4",9,0)
 ;
"RTN","KMPDU4",10,0)
 K KMPDRES
"RTN","KMPDU4",11,0)
 I '$G(KMPDIEN) S KMPDRES(0)="[IEN not defined]" Q
"RTN","KMPDU4",12,0)
 I '$D(^KMPD(8972.1,+KMPDIEN,0)) D  Q
"RTN","KMPDU4",13,0)
 .S KMPDRES(0)="[IEN #"_KMPDIEN_" not defined for this file]"
"RTN","KMPDU4",14,0)
 ;
"RTN","KMPDU4",15,0)
 N DA,DIK,FDA,I,MESSAGE,ZIEN
"RTN","KMPDU4",16,0)
 ;
"RTN","KMPDU4",17,0)
 ; delete all entries in ASSOCIATED ROUTINE multiple (#11)
"RTN","KMPDU4",18,0)
 S DA=0,DA(1)=+KMPDIEN,DIK="^KMPD(8972.1,"_+KMPDIEN_",11,"
"RTN","KMPDU4",19,0)
 F  S DA=$O(^KMPD(8972.1,+KMPDIEN,11,DA)) Q:'DA  D ^DIK
"RTN","KMPDU4",20,0)
 ;
"RTN","KMPDU4",21,0)
 ; add routines to list
"RTN","KMPDU4",22,0)
 S I=""
"RTN","KMPDU4",23,0)
 F  S I=$O(KMPDROU(I)) Q:I=""  I KMPDROU(I)]"" D 
"RTN","KMPDU4",24,0)
 .K FDA
"RTN","KMPDU4",25,0)
 .S FDA($J,8972.111,"+2,"_KMPDIEN_",",.01)=KMPDROU(I)
"RTN","KMPDU4",26,0)
 .D UPDATE^DIE("","FDA($J)",.ZIEN,"MESSAGE")
"RTN","KMPDU4",27,0)
 ;
"RTN","KMPDU4",28,0)
 S KMPDRES(0)="<Update Complete>"
"RTN","KMPDU4",29,0)
 ;
"RTN","KMPDU4",30,0)
 Q
"RTN","KMPDU5")
0^23^B24646489
"RTN","KMPDU5",1,0)
KMPDU5 ;OAK/RAK - CM Tools Utilities ;2/17/04  09:55
"RTN","KMPDU5",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDU5",3,0)
 ;
"RTN","KMPDU5",4,0)
FILEINQ(KMPDY,KMPDFN,KMPDIEN,KMPDGBL) ;-- file inquiry.
"RTN","KMPDU5",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU5",6,0)
 ; KMPDFN.... File number.
"RTN","KMPDU5",7,0)
 ; KMPDIEN... Ien for above file.
"RTN","KMPDU5",8,0)
 ; KMPDGBL... Global where data is stored.
"RTN","KMPDU5",9,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU5",10,0)
 ;
"RTN","KMPDU5",11,0)
 K KMPDY
"RTN","KMPDU5",12,0)
 ;
"RTN","KMPDU5",13,0)
 I '$G(KMPDFN) S KMPDY="[File Number not defined]" Q
"RTN","KMPDU5",14,0)
 I '$D(^DD(KMPDFN)) S KMPDY="[File #"_KMPDFN_" is not defined]" Q
"RTN","KMPDU5",15,0)
 ;
"RTN","KMPDU5",16,0)
 I '$G(KMPDIEN) S KMPDY="[IEN not defined]" Q
"RTN","KMPDU5",17,0)
 ;
"RTN","KMPDU5",18,0)
 I KMPDGBL="" S KMPDY="[Global for storage is not defined]" Q
"RTN","KMPDU5",19,0)
 ;
"RTN","KMPDU5",20,0)
 N ARRAY,CNT,DATA,ERROR,FIELD,FILE,I,IEN,LN,TITLE
"RTN","KMPDU5",21,0)
 ;
"RTN","KMPDU5",22,0)
 ; kill global with check for ^tmp or ^utility.
"RTN","KMPDU5",23,0)
 D KILL^KMPDU6(.DATA,KMPDGBL)
"RTN","KMPDU5",24,0)
 ; if error.
"RTN","KMPDU5",25,0)
 I $E(DATA)="[" S KMPDY=DATA Q
"RTN","KMPDU5",26,0)
 ;
"RTN","KMPDU5",27,0)
 S ARRAY=$NA(^TMP("KMPD FILE INQ",$J))
"RTN","KMPDU5",28,0)
 K @ARRAY
"RTN","KMPDU5",29,0)
 ;
"RTN","KMPDU5",30,0)
 S FIELD="**"
"RTN","KMPDU5",31,0)
 I KMPDFN=9.4 S FIELD="" D 
"RTN","KMPDU5",32,0)
 .F I=0:0 S I=$O(^DD(KMPDFN,I)) Q:'I  D 
"RTN","KMPDU5",33,0)
 ..I $P($G(^DD(KMPDFN,I,0)),U,2)'["C"&($P($G(^(0)),U,2)'["M")&($E($G(^(0)))'="*")&($P($G(^(0)),U,3)'="") S FIELD=FIELD_I_";"
"RTN","KMPDU5",34,0)
 .S FIELD=FIELD_"3;" ;4;5;"
"RTN","KMPDU5",35,0)
 ;
"RTN","KMPDU5",36,0)
 D GETS^DIQ(KMPDFN,KMPDIEN,FIELD,"R",ARRAY,"ERROR")
"RTN","KMPDU5",37,0)
 ;
"RTN","KMPDU5",38,0)
 I $D(ERROR) S KMPDY="[Error occurred while getting info.]" Q
"RTN","KMPDU5",39,0)
 ;
"RTN","KMPDU5",40,0)
 I '$D(@ARRAY) S KMPDY="<No Data to Report>" Q
"RTN","KMPDU5",41,0)
 ;
"RTN","KMPDU5",42,0)
 S FILE="",LN=0
"RTN","KMPDU5",43,0)
 F  S FILE=$O(@ARRAY@(FILE)) Q:FILE=""  D 
"RTN","KMPDU5",44,0)
 .S IEN=""
"RTN","KMPDU5",45,0)
 .F  S IEN=$O(@ARRAY@(FILE,IEN)) Q:IEN=""  D 
"RTN","KMPDU5",46,0)
 ..S FIELD=""
"RTN","KMPDU5",47,0)
 ..F  S FIELD=$O(@ARRAY@(FILE,IEN,FIELD)) Q:FIELD=""  D 
"RTN","KMPDU5",48,0)
 ...; if not a multiple.
"RTN","KMPDU5",49,0)
 ...I '$O(@ARRAY@(FILE,IEN,FIELD,0)) D  Q
"RTN","KMPDU5",50,0)
 ....S @KMPDGBL@(LN)=FIELD,@KMPDGBL@(LN)=@KMPDGBL@(LN)_$$REPEAT^XLFSTR(".",30-$L(@KMPDGBL@(LN)))
"RTN","KMPDU5",51,0)
 ....S @KMPDGBL@(LN)=@KMPDGBL@(LN)_": "_@ARRAY@(FILE,IEN,FIELD)
"RTN","KMPDU5",52,0)
 ....S LN=LN+1
"RTN","KMPDU5",53,0)
 ...;
"RTN","KMPDU5",54,0)
 ...; if multiple
"RTN","KMPDU5",55,0)
 ...S @KMPDGBL@(LN)=FIELD
"RTN","KMPDU5",56,0)
 ...S @KMPDGBL@(LN)=@KMPDGBL@(LN)_$$REPEAT^XLFSTR(".",30-$L(@KMPDGBL@(LN)))
"RTN","KMPDU5",57,0)
 ...S @KMPDGBL@(LN)=@KMPDGBL@(LN)_": "
"RTN","KMPDU5",58,0)
 ...;S LN=LN+1
"RTN","KMPDU5",59,0)
 ...S CNT=1
"RTN","KMPDU5",60,0)
 ...F I=0:0 S I=$O(@ARRAY@(FILE,IEN,FIELD,I)) Q:'I  D 
"RTN","KMPDU5",61,0)
 ....;S @KMPDGBL@(LN)=FIELD,@KMPDGBL@(LN)=@KMPDGBL@(LN)_$$REPEAT^XLFSTR(" ",30-$L(@KMPDGBL@(LN)))
"RTN","KMPDU5",62,0)
 ....I CNT=1 S @KMPDGBL@(LN)=$G(@KMPDGBL@(LN))_@ARRAY@(FILE,IEN,FIELD,I)
"RTN","KMPDU5",63,0)
 ....E  D 
"RTN","KMPDU5",64,0)
 .....S @KMPDGBL@(LN)=$G(@KMPDGBL@(LN))_$$REPEAT^XLFSTR(" ",30-$L($G(@KMPDGBL@(LN))))
"RTN","KMPDU5",65,0)
 .....S @KMPDGBL@(LN)=@KMPDGBL@(LN)_"  "_@ARRAY@(FILE,IEN,FIELD,I)
"RTN","KMPDU5",66,0)
 ....S LN=LN+1,CNT=CNT+1
"RTN","KMPDU5",67,0)
 ;
"RTN","KMPDU5",68,0)
 S KMPDY=$NA(@KMPDGBL)
"RTN","KMPDU5",69,0)
 S:'$D(@KMPDGBL) KMPDY="<No Data To Report>"
"RTN","KMPDU5",70,0)
 ;
"RTN","KMPDU5",71,0)
 Q
"RTN","KMPDU5",72,0)
 ;
"RTN","KMPDU5",73,0)
FILESRC(KMPDY,KMPDFN,KMPDFLD,KMPDSRC,KMPDGBL) ;-- file search.
"RTN","KMPDU5",74,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU5",75,0)
 ; KMPDFN... File Number.
"RTN","KMPDU5",76,0)
 ; KMPDFLD.. Fields to be returned, seperated by commas.
"RTN","KMPDU5",77,0)
 ;           Example: ".01,.04,1" would return fields .01, .04 and 1.
"RTN","KMPDU5",78,0)
 ; KMPDSRC.. (optional). Search text.  This will search the .01 field for
"RTN","KMPDU5",79,0)
 ;           a match.  If KMPDSRC="*" or is null then all entries will be
"RTN","KMPDU5",80,0)
 ;           returned.
"RTN","KMPDU5",81,0)
 ; KMPDGBL... Global where data is stored.
"RTN","KMPDU5",82,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU5",83,0)
 ;
"RTN","KMPDU5",84,0)
 K KMPDY
"RTN","KMPDU5",85,0)
 ;
"RTN","KMPDU5",86,0)
 S KMPDFN=+$G(KMPDFN),KMPDFLD=$G(KMPDFLD)
"RTN","KMPDU5",87,0)
 S KMPDSRC=$$UP^XLFSTR($G(KMPDSRC)),KMPDGBL=$G(KMPDGBL)
"RTN","KMPDU5",88,0)
 ;
"RTN","KMPDU5",89,0)
 I 'KMPDFN S KMPDY="[File Number not defined]" Q
"RTN","KMPDU5",90,0)
 ;
"RTN","KMPDU5",91,0)
 I KMPDFLD="" S KMPDY="[No fields have been requested]" Q
"RTN","KMPDU5",92,0)
 ;
"RTN","KMPDU5",93,0)
 I KMPDGBL="" S KMPDY="[Global for storage is not defined]" Q
"RTN","KMPDU5",94,0)
 ;
"RTN","KMPDU5",95,0)
 N DATA,GLOBAL,I,IEN,LN,NAME,NODE,PIECE
"RTN","KMPDU5",96,0)
 ;
"RTN","KMPDU5",97,0)
 ; kill global with check for ^tmp or ^utility.
"RTN","KMPDU5",98,0)
 D KILL^KMPDU6(.DATA,KMPDGBL)
"RTN","KMPDU5",99,0)
 ; if error.
"RTN","KMPDU5",100,0)
 I $E(DATA)="[" S KMPDY=DATA Q
"RTN","KMPDU5",101,0)
 ;
"RTN","KMPDU5",102,0)
 S GLOBAL=$G(^DIC(KMPDFN,0,"GL"))
"RTN","KMPDU5",103,0)
 I GLOBAL="" S KMPDY="[File #"_KMPDFN_" is not defined]" Q
"RTN","KMPDU5",104,0)
 ; make sure global name is closed () for use with subscript indirection.
"RTN","KMPDU5",105,0)
 S:$E(GLOBAL,$L(GLOBAL))="," $E(GLOBAL,$L(GLOBAL))=")"
"RTN","KMPDU5",106,0)
 ;
"RTN","KMPDU5",107,0)
 ; set zero node to field titles.
"RTN","KMPDU5",108,0)
 S $P(@KMPDGBL@(0),U)="IEN"
"RTN","KMPDU5",109,0)
 F I=1:1 S DATA=$P(KMPDFLD,",",I) Q:DATA=""  D 
"RTN","KMPDU5",110,0)
 .; try title first.
"RTN","KMPDU5",111,0)
 .S TITLE=$G(^DD(KMPDFN,DATA,.1))
"RTN","KMPDU5",112,0)
 .; if no title use name.
"RTN","KMPDU5",113,0)
 .S:TITLE="" TITLE=$P($G(^DD(KMPDFN,DATA,0)),U)
"RTN","KMPDU5",114,0)
 .S $P(@KMPDGBL@(0),U,(I+1))=TITLE
"RTN","KMPDU5",115,0)
 ;
"RTN","KMPDU5",116,0)
 S:KMPDSRC="*" KMPDSRC=""
"RTN","KMPDU5",117,0)
 ; remove '*' if last character
"RTN","KMPDU5",118,0)
 S:$E($RE(KMPDSRC))="*" $E(KMPDSRC,$L(KMPDSRC))=""
"RTN","KMPDU5",119,0)
 S LN=1,NAME=KMPDSRC
"RTN","KMPDU5",120,0)
 ; if exact match.
"RTN","KMPDU5",121,0)
 I NAME]"" S IEN=$O(@GLOBAL@("B",NAME,0)) I IEN D 
"RTN","KMPDU5",122,0)
 .Q:'$D(@GLOBAL@(IEN,0))  S DATA=^(0)
"RTN","KMPDU5",123,0)
 .; ien.
"RTN","KMPDU5",124,0)
 .S $P(@KMPDGBL@(LN),U)=IEN
"RTN","KMPDU5",125,0)
 .; user defined data.
"RTN","KMPDU5",126,0)
 .F I=1:1 S DATA=$P(KMPDFLD,",",I) Q:DATA=""  D 
"RTN","KMPDU5",127,0)
 ..S $P(@KMPDGBL@(LN),U,(I+1))=$$GET1^DIQ(KMPDFN,IEN,DATA)
"RTN","KMPDU5",128,0)
 .S LN=LN+1
"RTN","KMPDU5",129,0)
 ;
"RTN","KMPDU5",130,0)
 F  S NAME=$O(@GLOBAL@("B",NAME)) Q:NAME=""!($E(NAME,1,$L(KMPDSRC))'=KMPDSRC)  D 
"RTN","KMPDU5",131,0)
 .F IEN=0:0 S IEN=$O(@GLOBAL@("B",NAME,IEN)) Q:'IEN  D 
"RTN","KMPDU5",132,0)
 ..Q:'$D(@GLOBAL@(IEN,0))  S DATA=^(0)
"RTN","KMPDU5",133,0)
 ..; ien.
"RTN","KMPDU5",134,0)
 ..S $P(@KMPDGBL@(LN),U)=IEN
"RTN","KMPDU5",135,0)
 ..; user defined data.
"RTN","KMPDU5",136,0)
 ..F I=1:1 S DATA=$P(KMPDFLD,",",I) Q:DATA=""  D 
"RTN","KMPDU5",137,0)
 ...S $P(@KMPDGBL@(LN),U,(I+1))=$$GET1^DIQ(KMPDFN,IEN,DATA)
"RTN","KMPDU5",138,0)
 ..S LN=LN+1
"RTN","KMPDU5",139,0)
 ;
"RTN","KMPDU5",140,0)
 S KMPDY=$NA(@KMPDGBL)
"RTN","KMPDU5",141,0)
 S:'$O(@KMPDGBL@(0)) @KMPDGBL@(1)="<No Data To Report>"
"RTN","KMPDU5",142,0)
 ;
"RTN","KMPDU5",143,0)
 Q
"RTN","KMPDU5",144,0)
 ;
"RTN","KMPDU5",145,0)
ENV(KMPDRES) ;-- get uci/volume set
"RTN","KMPDU5",146,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU5",147,0)
 ; KMPDRES(0)="uci,volumeset"
"RTN","KMPDU5",148,0)
 ; KMPDRES(1)="facilityinfo" as returned by $$SITE^VASITE
"RTN","KMPDU5",149,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU5",150,0)
 ;
"RTN","KMPDU5",151,0)
 K KMPDRES
"RTN","KMPDU5",152,0)
 N Y X ^%ZOSF("UCI")
"RTN","KMPDU5",153,0)
 S KMPDRES(0)=Y
"RTN","KMPDU5",154,0)
 ;S KMPDRES(1)=$$SITE^VASITE
"RTN","KMPDU5",155,0)
 ;
"RTN","KMPDU5",156,0)
 Q
"RTN","KMPDU5",157,0)
 ;
"RTN","KMPDU5",158,0)
VERSION(KMPDY) ;-- version^patch info
"RTN","KMPDU5",159,0)
 ; cm tools version^patch
"RTN","KMPDU5",160,0)
 S KMPDY(0)=$P($T(KMPDU+1),";",3) ;_"^"_$P($T(KMPDU+1),";",5)
"RTN","KMPDU5",161,0)
 ; operating system version
"RTN","KMPDU5",162,0)
 S KMPDY(1)=$P($G(^%ZOSF("OS")),U)  ;$ZV
"RTN","KMPDU5",163,0)
 ;
"RTN","KMPDU5",164,0)
 Q
"RTN","KMPDU6")
0^42^B2107323
"RTN","KMPDU6",1,0)
KMPDU6 ;OAK/RAK - CM Tools Remote Procedure Calls (RPC's) ;2/17/04  09:56
"RTN","KMPDU6",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDU6",3,0)
 ;
"RTN","KMPDU6",4,0)
FMDTI(Y,X) ;-- date/time in internal fileMan format.
"RTN","KMPDU6",5,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU6",6,0)
 ;     X - User response ('T', '12/12/94', etc.)
"RTN","KMPDU6",7,0)
 ;----------------------------------------------------------------------
"RTN","KMPDU6",8,0)
 K Y
"RTN","KMPDU6",9,0)
 I $G(X)']"" S Y(0)="^" Q
"RTN","KMPDU6",10,0)
 N %DT,DATETIME
"RTN","KMPDU6",11,0)
 S %DT="ST" D ^%DT
"RTN","KMPDU6",12,0)
 S DATETIME=$S(Y>0:Y,1:"^")
"RTN","KMPDU6",13,0)
 K Y
"RTN","KMPDU6",14,0)
 ;-- fm internal format.
"RTN","KMPDU6",15,0)
 S Y(0)=DATETIME
"RTN","KMPDU6",16,0)
 ;-- external format.
"RTN","KMPDU6",17,0)
 S Y(1)=$$FMTE^XLFDT(DATETIME)
"RTN","KMPDU6",18,0)
 Q
"RTN","KMPDU6",19,0)
 ;
"RTN","KMPDU6",20,0)
GBLCHECK(GLOBAL) ;-- extrinsic function
"RTN","KMPDU6",21,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU6",22,0)
 ; GLOBAL.. Global name to be checked.  Must be either:
"RTN","KMPDU6",23,0)
 ;              ^XTMP
"RTN","KMPDU6",24,0)
 ;              ^TMP
"RTN","KMPDU6",25,0)
 ;              ^UTILITY
"RTN","KMPDU6",26,0)
 ;
"RTN","KMPDU6",27,0)
 ; RESUTL: 0 - Does not pass.
"RTN","KMPDU6",28,0)
 ;         1 - Passes.
"RTN","KMPDU6",29,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU6",30,0)
 Q:$G(GLOBAL)="" 0
"RTN","KMPDU6",31,0)
 N GBL,I,RESULT
"RTN","KMPDU6",32,0)
 S RESULT=0
"RTN","KMPDU6",33,0)
 S GBL=GLOBAL
"RTN","KMPDU6",34,0)
 ;-- remove '^'.
"RTN","KMPDU6",35,0)
 S GBL=$E(GBL,2,$L(GBL))
"RTN","KMPDU6",36,0)
 ;-- remove '('.
"RTN","KMPDU6",37,0)
 S GBL=$P(GBL,"(")
"RTN","KMPDU6",38,0)
 F I="XTMP","TMP","UTILITY" I GBL=I S RESULT=1 Q
"RTN","KMPDU6",39,0)
 Q RESULT
"RTN","KMPDU6",40,0)
 ;
"RTN","KMPDU6",41,0)
KILL(RESULT,VARIABLE) ;-- kill variables.
"RTN","KMPDU6",42,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU6",43,0)
 ;  VARIABLE... local or global variable to be killed.
"RTN","KMPDU6",44,0)
 ;
"RTN","KMPDU6",45,0)
 ; This subroutine kills variables (local or global).  It should be used
"RTN","KMPDU6",46,0)
 ; mostly to kill global variables that have been set when components
"RTN","KMPDU6",47,0)
 ; have been populated with long lists that were set into temporary
"RTN","KMPDU6",48,0)
 ; globals.  If VARIABLE is a global variable, it must be either ^TMP or
"RTN","KMPDU6",49,0)
 ; ^UTILITY to be killed.
"RTN","KMPDU6",50,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDU6",51,0)
 K RESULT S RESULT=""
"RTN","KMPDU6",52,0)
 I $G(VARIABLE)="" S RESULT="[No variable to kill]" Q
"RTN","KMPDU6",53,0)
 I $E(VARIABLE)="^" D  Q:RESULT]""
"RTN","KMPDU6",54,0)
 .I '$$GBLCHECK(VARIABLE) D 
"RTN","KMPDU6",55,0)
 ..S RESULT="[Can only kill globals ^XTMP, ^TMP or ^UTILITY]"
"RTN","KMPDU6",56,0)
 K @VARIABLE
"RTN","KMPDU6",57,0)
 S RESULT="<"_VARIABLE_" killed>"
"RTN","KMPDU6",58,0)
 Q
"RTN","KMPDUG")
0^43^B12065844
"RTN","KMPDUG",1,0)
KMPDUG ;OAK/RAK - CM Tools Graph Utility ;2/17/04  09:57
"RTN","KMPDUG",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUG",3,0)
 ;
"RTN","KMPDUG",4,0)
EN(KMPUAR,KMPUTI,KMPUOPT,KMPUSTRT,KMPUTAR,KMPUXIT,KMPUMAX) ;entry point
"RTN","KMPDUG",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUG",6,0)
 ; KMPUAR.. Local or global array (passed by value) that contains graph
"RTN","KMPDUG",7,0)
 ;          information in the format:
"RTN","KMPDUG",8,0)
 ;
"RTN","KMPDUG",9,0)
 ;          KMPUAR(...,0)=DataTitle^DataValue
"RTN","KMPDUG",10,0)
 ;                        piece 1 - the title of the data
"RTN","KMPDUG",11,0)
 ;                        piece 2 - the actual value of the data
"RTN","KMPDUG",12,0)
 ;
"RTN","KMPDUG",13,0)
 ; KMPUTI.. graph titles in 4 up-arrow pieces
"RTN","KMPDUG",14,0)
 ;          piece 1 - title of the graph 
"RTN","KMPDUG",15,0)
 ;          piece 2 - second title of graph (if any)
"RTN","KMPDUG",16,0)
 ;          piece 3 - x axis title
"RTN","KMPDUG",17,0)
 ;          piece 4 - y axis title
"RTN","KMPDUG",18,0)
 ;   
"RTN","KMPDUG",19,0)
 ; KMPUOPT. (optional) A string of one or more letters representing
"RTN","KMPDUG",20,0)
 ;          desired options.
"RTN","KMPDUG",21,0)
 ;          "A" - angle titles (only for vertical graph)
"RTN","KMPDUG",22,0)
 ;          "D" - double space
"RTN","KMPDUG",23,0)
 ;          "G" - print grid across graph
"RTN","KMPDUG",24,0)
 ;          "S" - display entries with MAX>9999 in scientific notation
"RTN","KMPDUG",25,0)
 ;          "V" - display 'vertical' graph
"RTN","KMPDUG",26,0)
 ;
"RTN","KMPDUG",27,0)
 ; KMPUSTRT (optional). Number to start graph.
"RTN","KMPDUG",28,0)
 ;          if KMPUSTRT=0 first hash mark of graph will equal 0
"RTN","KMPDUG",29,0)
 ;
"RTN","KMPDUG",30,0)
 ; KMPUTAR. (optional) Text array. Local or global array that 
"RTN","KMPDUG",31,0)
 ;          contains text to be displayed with the graph.
"RTN","KMPDUG",32,0)
 ;
"RTN","KMPDUG",33,0)
 ;          Example:  KMPUTAR="UTIL($J,"
"RTN","KMPDUG",34,0)
 ;                    KMPUTAR="^ASK(999999,23,10,"
"RTN","KMPDUG",35,0)
 ;                    KMPUTAR="^TMP($J,""TEXT"","
"RTN","KMPDUG",36,0)
 ;
"RTN","KMPDUG",37,0)
 ; KMPUXIT. (optional) Exit without 'continue' text.  This allows the 
"RTN","KMPDUG",38,0)
 ;          programmer to use their own display for continuing
"RTN","KMPDUG",39,0)
 ;           0 - do not exit - display 'continue' text
"RTN","KMPDUG",40,0)
 ;           1 - exit
"RTN","KMPDUG",41,0)
 ;
"RTN","KMPDUG",42,0)
 ; KMPUMAX. (optional) Maximum scale - if not defined, the maximum value
"RTN","KMPDUG",43,0)
 ;          is determined from the data passed.  If KMPUMAX is defined,
"RTN","KMPDUG",44,0)
 ;          scale will be adjusted accordingly.
"RTN","KMPDUG",45,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUG",46,0)
 ;
"RTN","KMPDUG",47,0)
 I '$D(KMPUAR) W !!?7,"...no array data...",!! D CONT Q
"RTN","KMPDUG",48,0)
 S KMPUSTRT=+$G(KMPUSTRT),KMPUOPT=$$UP^XLFSTR($G(KMPUOPT))
"RTN","KMPDUG",49,0)
 S KMPUXIT=+$G(KMPUXIT),KMPUMAX=+$G(KMPUMAX)
"RTN","KMPDUG",50,0)
 K:$G(KMPUTAR)="" KMPUTAR
"RTN","KMPDUG",51,0)
 I '$D(@KMPUAR) D  Q
"RTN","KMPDUG",52,0)
 .W *7,!!?7,"...no information to graph...",!!
"RTN","KMPDUG",53,0)
 .D CONT
"RTN","KMPDUG",54,0)
 S DTIME=$S($D(DTIME):DTIME,1:600)
"RTN","KMPDUG",55,0)
 ;
"RTN","KMPDUG",56,0)
 N BAR,BOTTOM,DATA,DEC,DEC1,DIV,DIVT,DNUM,DX,DY,END,GWIDTH,I,I1,LABEL,MAX
"RTN","KMPDUG",57,0)
 N MIN,NUM,OFFSET,SCALE,STEP,TEXT,TITLE,X,XCOORD,XTITLE,YNUM,YTITLE,Z
"RTN","KMPDUG",58,0)
 N IOBLC,IOBRC,IOBT,IOG1,IOG0,IOHL,IOLT,IOMT,IORT,IOTLC,IOTRC,IOTT,IOVL
"RTN","KMPDUG",59,0)
 N IOINHI,IOINLOW,IORVOFF,IORVON,IOUOFF,IOUON
"RTN","KMPDUG",60,0)
 ;
"RTN","KMPDUG",61,0)
 D INIT^KMPDUG1 I KMPUOPT["D",(KMPUOPT'["V"),(YNUM>8) D  Q
"RTN","KMPDUG",62,0)
 .W *7,!!?7,"...too many data elements to double space on a terminal"
"RTN","KMPDUG",63,0)
 .W !?7,"   for a Horizontal Graph..."
"RTN","KMPDUG",64,0)
 .W !!! D CONT
"RTN","KMPDUG",65,0)
 I KMPUOPT["D",(KMPUOPT["V"),(YNUM>34) D  Q
"RTN","KMPDUG",66,0)
 .W *7,!!?7,"...too many data elements to double space on a terminal"
"RTN","KMPDUG",67,0)
 .W !?7,"   for a Vertical Graph..."
"RTN","KMPDUG",68,0)
 .W !!! D CONT
"RTN","KMPDUG",69,0)
 ; if not a terminal do printer routine
"RTN","KMPDUG",70,0)
 I $E(IOST)'="C" Q  ;D EN^KMPUGP Q
"RTN","KMPDUG",71,0)
 I $G(IOG1)']""!($G(IOG0)']"") D  Q
"RTN","KMPDUG",72,0)
 .W *7,!!?7,"...unable to place terminal in graphics mode...",!!
"RTN","KMPDUG",73,0)
 .D CONT
"RTN","KMPDUG",74,0)
 I 'MAX D  Q
"RTN","KMPDUG",75,0)
 .W *7,!!?7,"...unable to determine any data to graph or data all zeros...",!!
"RTN","KMPDUG",76,0)
 .D CONT
"RTN","KMPDUG",77,0)
 ; if 'vertical' graph
"RTN","KMPDUG",78,0)
 I KMPUOPT["V" D EN^KMPDUGV Q
"RTN","KMPDUG",79,0)
 ; draw graph - display titles - display data
"RTN","KMPDUG",80,0)
 D DRAW^KMPDUG1,TITLES^KMPDUG1,DATA
"RTN","KMPDUG",81,0)
 ; if text to display.
"RTN","KMPDUG",82,0)
 I $D(KMPUTAR) D WP^KMPDU11(KMPUTAR,(BOTTOM+5),24) Q
"RTN","KMPDUG",83,0)
 D:'KMPUXIT CONT
"RTN","KMPDUG",84,0)
 Q
"RTN","KMPDUG",85,0)
 ;
"RTN","KMPDUG",86,0)
CONT ;-- hold screen
"RTN","KMPDUG",87,0)
 S DX=(IOM-23\2),DY=(IOSL-1) X IOXY
"RTN","KMPDUG",88,0)
 R "Press <RET> to continue",X:DTIME
"RTN","KMPDUG",89,0)
 Q
"RTN","KMPDUG",90,0)
 ;
"RTN","KMPDUG",91,0)
DATA ;-- display data in graph.
"RTN","KMPDUG",92,0)
 W IOG0 S DY=$S(KMPUOPT["D":1,1:2),BAR=0,I=""
"RTN","KMPDUG",93,0)
 F  S I=$O(@KMPUAR@(I)) Q:I=""  I $D(@KMPUAR@(I,0)) S DATA=@KMPUAR@(I,0) D 
"RTN","KMPDUG",94,0)
 .S XCOORD=$P(DATA,U,2),END=(XCOORD-KMPUSTRT-STEP)
"RTN","KMPDUG",95,0)
 .S DX=16,DY=DY+$S(KMPUOPT["D":2,1:1)
"RTN","KMPDUG",96,0)
 .;  if no data quit
"RTN","KMPDUG",97,0)
 .Q:$P(@KMPUAR@(I,0),U,2)']""
"RTN","KMPDUG",98,0)
 .F I1=0:STEP:END X IOXY W @BAR(BAR),! S DX=DX+1 Q:DX=68
"RTN","KMPDUG",99,0)
 .;  print value in parenthesis
"RTN","KMPDUG",100,0)
 .S DX=69 X IOXY W "<",$J((XCOORD/DIV),$L($FN((MAX/DIV),"",DEC)),DEC),">"
"RTN","KMPDUG",101,0)
 .S BAR=$S(BAR=1:0,1:1)
"RTN","KMPDUG",102,0)
 Q
"RTN","KMPDUG1")
0^44^B12183145
"RTN","KMPDUG1",1,0)
KMPDUG1 ;OAK/RAK - CM Tools Graph Utility ;2/17/04  09:58
"RTN","KMPDUG1",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUG1",3,0)
 ;
"RTN","KMPDUG1",4,0)
DRAW ;-- draw graph
"RTN","KMPDUG1",5,0)
 W @IOF,!,IOG1 S DY=2
"RTN","KMPDUG1",6,0)
 ;  draw top line
"RTN","KMPDUG1",7,0)
 F I=1:1:27 S DX=41+I X IOXY W IOHL S DX=43-I X IOXY W IOHL
"RTN","KMPDUG1",8,0)
 ;  draw top left and right corners
"RTN","KMPDUG1",9,0)
 S DX=15 X IOXY W IOTLC S DX=68 X IOXY W IOTRC,!
"RTN","KMPDUG1",10,0)
 ;  draw sides
"RTN","KMPDUG1",11,0)
 F DY=(DY+1):1:BOTTOM F DX=15,68 X IOXY W IOVL,!
"RTN","KMPDUG1",12,0)
 ;  draw bottom left and right corners
"RTN","KMPDUG1",13,0)
 S DY=BOTTOM,DX=15 X IOXY W IOBLC S DX=68 X IOXY W IOBRC,!
"RTN","KMPDUG1",14,0)
 ;  draw bottom line
"RTN","KMPDUG1",15,0)
 F I=1:1:27 S DX=15+I X IOXY W IOHL S DX=68-I X IOXY W IOHL
"RTN","KMPDUG1",16,0)
 ;  draw 'hash marks' on bottom line for relative values
"RTN","KMPDUG1",17,0)
 S DX=15 X IOXY W IOLT,!
"RTN","KMPDUG1",18,0)
 F DX=20:5:65 X IOXY W IOMT,!
"RTN","KMPDUG1",19,0)
 ;  print grid
"RTN","KMPDUG1",20,0)
 I KMPUOPT["G" D 
"RTN","KMPDUG1",21,0)
 .S DY=2 F DX=20:5:65 X IOXY W IOTT,!
"RTN","KMPDUG1",22,0)
 . F DX=20:5:65 F DY=3:1:(BOTTOM-1) X IOXY W IOVL,!
"RTN","KMPDUG1",23,0)
 W IOG0
"RTN","KMPDUG1",24,0)
 Q
"RTN","KMPDUG1",25,0)
INIT ;-- initialize required variables.
"RTN","KMPDUG1",26,0)
 D GSET^%ZISS S X="IOECH;IORVOFF;IORVON;IOUOFF;IOUON" D ENDR^%ZISS
"RTN","KMPDUG1",27,0)
 ; actual bars representing data
"RTN","KMPDUG1",28,0)
 S BAR(0)="IORVON,"" "",IORVOFF"
"RTN","KMPDUG1",29,0)
 S BAR(1)="IOG1,""a"",IOG0"
"RTN","KMPDUG1",30,0)
 S (DEC,DNUM,MAX,MIN,SCALE,YNUM)=0,GWIDTH=$S(KMPUOPT["V":10,1:50)
"RTN","KMPDUG1",31,0)
 S TITLE=$P($G(KMPUTI),U,1,2)
"RTN","KMPDUG1",32,0)
 S XTITLE=$P($G(KMPUTI),U,3)
"RTN","KMPDUG1",33,0)
 S YTITLE=$P($G(KMPUTI),U,4)
"RTN","KMPDUG1",34,0)
 ; determine maximum and minimum number and decimals (if any).
"RTN","KMPDUG1",35,0)
 S (I,MAX,MIN)=""
"RTN","KMPDUG1",36,0)
 F  S I=$O(@KMPUAR@(I)) Q:I=""  I $D(@KMPUAR@(I,0)) S YNUM=YNUM+1 D 
"RTN","KMPDUG1",37,0)
 .I $P(@KMPUAR@(I,0),U,2)>MAX S MAX=$P(@KMPUAR@(I,0),U,2)
"RTN","KMPDUG1",38,0)
 .I $P(@KMPUAR@(I,0),U,2)<MIN S MIN=$P(@KMPUAR@(I,0),U,2)
"RTN","KMPDUG1",39,0)
 .; determine number of decimal places (if any).
"RTN","KMPDUG1",40,0)
 .S DNUM=$P($P(@KMPUAR@(I,0),U,2),".",2) Q:'DNUM
"RTN","KMPDUG1",41,0)
 .I $L(DNUM)>DEC S DEC=$L(DNUM)
"RTN","KMPDUG1",42,0)
 Q:MAX'>0
"RTN","KMPDUG1",43,0)
 ; get maximum number for graph.
"RTN","KMPDUG1",44,0)
 D MAX
"RTN","KMPDUG1",45,0)
 ; determine if there are decimal places when printed at end of graph
"RTN","KMPDUG1",46,0)
 S I="" F  S I=$O(@KMPUAR@(I)) Q:I=""  I $D(@KMPUAR@(I,0)) D 
"RTN","KMPDUG1",47,0)
 .S Z=$L($P($P(@KMPUAR@(I,0),U,2)/DIV,".",2)) Q:'Z
"RTN","KMPDUG1",48,0)
 .I Z>DEC S DEC=$S(Z>2:2,1:1)
"RTN","KMPDUG1",49,0)
 S BOTTOM=$S(KMPUOPT["D":(YNUM*2+2),1:(YNUM+3))
"RTN","KMPDUG1",50,0)
 S SCALE=((MAX-KMPUSTRT)/10),STEP=((MAX-KMPUSTRT)/GWIDTH)
"RTN","KMPDUG1",51,0)
 S NUM=(SCALE+KMPUSTRT)
"RTN","KMPDUG1",52,0)
 ; determine if relative values have decimal
"RTN","KMPDUG1",53,0)
 S DEC1=0 F I=20:5:65 I $L($P((NUM/DIV),".",2)) D 
"RTN","KMPDUG1",54,0)
 .S DEC1=$S($L($P((NUM/DIV),".",2))>2:2,1:1)
"RTN","KMPDUG1",55,0)
 Q
"RTN","KMPDUG1",56,0)
 ;
"RTN","KMPDUG1",57,0)
MAX ;-- determine 'max' or largest number for graph.
"RTN","KMPDUG1",58,0)
 ;
"RTN","KMPDUG1",59,0)
 S:$G(KMPUMAX) MAX=KMPUMAX
"RTN","KMPDUG1",60,0)
 S DIV=1,MAX=$FN(MAX,"",0)
"RTN","KMPDUG1",61,0)
 I MAX<2 S MAX=1 Q
"RTN","KMPDUG1",62,0)
 S X=1 F I=1:1:$L(MAX)-1 S X=X*10 I MAX=X S X=X/10
"RTN","KMPDUG1",63,0)
 S MAX=$E(MAX-1)+1*X
"RTN","KMPDUG1",64,0)
 I $L(MAX)>4 D 
"RTN","KMPDUG1",65,0)
 .F I=1:1:($L(MAX)-1) S DIV=DIV_"0"
"RTN","KMPDUG1",66,0)
 .I $L(DIV)<7 S DIVT=$S(KMPUOPT["S":"10^"_I,1:(DIV/1000)_"k") Q
"RTN","KMPDUG1",67,0)
 .S DIVT=$S(KMPUOPT["S":"10^"_I,1:(DIV/1000000)_"m")
"RTN","KMPDUG1",68,0)
 Q
"RTN","KMPDUG1",69,0)
 ;
"RTN","KMPDUG1",70,0)
TITLES ;-- print graph titles.
"RTN","KMPDUG1",71,0)
 W IOG0
"RTN","KMPDUG1",72,0)
 ; print first and second line of title
"RTN","KMPDUG1",73,0)
 S DX=(IOM-$L($P(TITLE,U))\2+1),DY=0 X IOXY W $P(TITLE,U),!
"RTN","KMPDUG1",74,0)
 S DX=(IOM-$L($P(TITLE,U,2))\2+1),DY=1 X IOXY W $P(TITLE,U,2),!
"RTN","KMPDUG1",75,0)
 ; print y title
"RTN","KMPDUG1",76,0)
 S DX=(14-$L(YTITLE)) X IOXY W IOUON,YTITLE,IOUOFF,!
"RTN","KMPDUG1",77,0)
 ; print relative values under hash marks
"RTN","KMPDUG1",78,0)
 S NUM=(SCALE+KMPUSTRT)
"RTN","KMPDUG1",79,0)
 S DY=BOTTOM+1,DX=15-$S($L($FN((KMPUSTRT/DIV),"",DEC1))=1:0,1:$L($FN((KMPUSTRT/DIV),"",DEC1))-2) X IOXY W $FN((KMPUSTRT/DIV),"",DEC1),!
"RTN","KMPDUG1",80,0)
 F I=20:5:65 D 
"RTN","KMPDUG1",81,0)
 .I $L($FN((NUM/DIV),"",DEC1))=1 S DX=(I-$L($FN((NUM/DIV),"",DEC1))+1)
"RTN","KMPDUG1",82,0)
 .E  S DX=(I-($L($FN((NUM/DIV),"",DEC1))-2))
"RTN","KMPDUG1",83,0)
 .X IOXY W $FN((NUM/DIV),"",DEC1),! S NUM=NUM+SCALE
"RTN","KMPDUG1",84,0)
 ; if div>1 write (x div)
"RTN","KMPDUG1",85,0)
 I DIV>1 S DX=69 X IOXY W "<x",DIVT,">",!
"RTN","KMPDUG1",86,0)
 ; print x title at bottom
"RTN","KMPDUG1",87,0)
 S DX=(IOM-$L(XTITLE)\2+1),DY=BOTTOM+2 X IOXY W IOUON,XTITLE,IOUOFF,!
"RTN","KMPDUG1",88,0)
 ; print data titles
"RTN","KMPDUG1",89,0)
 S DY=3,I=0 F  S I=$O(@KMPUAR@(I)) Q:'I  I $D(@KMPUAR@(I,0)) D 
"RTN","KMPDUG1",90,0)
 .S YTITLE=$E($P(@KMPUAR@(I,0),U),1,14)
"RTN","KMPDUG1",91,0)
 .S DX=(14-$L(YTITLE)) X IOXY W YTITLE,!
"RTN","KMPDUG1",92,0)
 .S DY=DY+$S(KMPUOPT["D":2,1:1)
"RTN","KMPDUG1",93,0)
 Q
"RTN","KMPDUG2")
0^45^B22783994
"RTN","KMPDUG2",1,0)
KMPDUG2 ;OAK/RAK - CM Tools Graph Utility ;2/17/04  09:59
"RTN","KMPDUG2",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUG2",3,0)
 ;
"RTN","KMPDUG2",4,0)
OPTIONS(KMPUOPTS) ;-- select options.
"RTN","KMPDUG2",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUG2",6,0)
 ; KMPUOPTS.. Result of selection.
"RTN","KMPDUG2",7,0)
 ;            Exceptions: "" - No options selected.
"RTN","KMPDUG2",8,0)
 ;                        ^  - User up-arrowed out.
"RTN","KMPDUG2",9,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUG2",10,0)
 N I,X,OUT
"RTN","KMPDUG2",11,0)
 S KMPUOPTS="",OUT=0
"RTN","KMPDUG2",12,0)
 S DTIME=$S($G(DTIME):DTIME,1:300)
"RTN","KMPDUG2",13,0)
 F  D  Q:OUT
"RTN","KMPDUG2",14,0)
 .W !?5,"The following graph selections are 'optional':"
"RTN","KMPDUG2",15,0)
 .D DISPLAY(.KMPUOPTS) I KMPUOPTS="" S OUT=1 Q
"RTN","KMPDUG2",16,0)
 .R !!,"Enter one or more option letter(s): ",X:DTIME
"RTN","KMPDUG2",17,0)
 .I X="" S OUT=1,KMPUOPTS="" Q
"RTN","KMPDUG2",18,0)
 .I X="^" S OUT=1,KMPUOPTS="^" Q
"RTN","KMPDUG2",19,0)
 .I X["?" D HELP W @IOF Q
"RTN","KMPDUG2",20,0)
 .;
"RTN","KMPDUG2",21,0)
 .; remove any commas, dashes or spaces.
"RTN","KMPDUG2",22,0)
 .S X=$TR(X,",- ",""),X=$$UP^XLFSTR(X)
"RTN","KMPDUG2",23,0)
 .;
"RTN","KMPDUG2",24,0)
 .; check for invalid answer.
"RTN","KMPDUG2",25,0)
 .D CHECK Q:KMPUOPTS=""
"RTN","KMPDUG2",26,0)
 .;
"RTN","KMPDUG2",27,0)
 .I X["A",(X'["V") D  Q
"RTN","KMPDUG2",28,0)
 ..W *7,!!?10,"Angle Data Titles only available with a Vertical Graph..."
"RTN","KMPDUG2",29,0)
 .;
"RTN","KMPDUG2",30,0)
 .; if vertical display warning message.
"RTN","KMPDUG2",31,0)
 .I X["V" D 
"RTN","KMPDUG2",32,0)
 ..W !!?7,"...please be aware that because of screen limitations Vertical"
"RTN","KMPDUG2",33,0)
 ..W !?7,"   Graphs are not as accurate as Horizontal Graphs and should be"
"RTN","KMPDUG2",34,0)
 ..W !?7,"   used for visual comparison rather than detailed analysis..."
"RTN","KMPDUG2",35,0)
 .;
"RTN","KMPDUG2",36,0)
 .S KMPUOPTS=X,OUT=1
"RTN","KMPDUG2",37,0)
 ;
"RTN","KMPDUG2",38,0)
 Q
"RTN","KMPDUG2",39,0)
 ;
"RTN","KMPDUG2",40,0)
CHECK ;-- check for valid answer.
"RTN","KMPDUG2",41,0)
 N I
"RTN","KMPDUG2",42,0)
 F I=1:1:$L(X) I KMPUOPTS'[$E(X,I) D  Q
"RTN","KMPDUG2",43,0)
 .W *7,!!?10,"'",$E(X,I),"' is not an available option."
"RTN","KMPDUG2",44,0)
 .S KMPUOPTS=""
"RTN","KMPDUG2",45,0)
 Q
"RTN","KMPDUG2",46,0)
 ;
"RTN","KMPDUG2",47,0)
DISPLAY(KMPUOPT) ;-- display available options.
"RTN","KMPDUG2",48,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUG2",49,0)
 ; KMPUOPT... Will be set to available options.
"RTN","KMPDUG2",50,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUG2",51,0)
 N I S KMPUOPT="" W !
"RTN","KMPDUG2",52,0)
 F I=1:1 Q:$T(OPT+I)']""  D 
"RTN","KMPDUG2",53,0)
 .W !?7,$P($T(OPT+I),";",3)," - ",$P($T(OPT+I),";",4)
"RTN","KMPDUG2",54,0)
 .S KMPUOPT=KMPUOPT_$P($T(OPT+I),";",3)
"RTN","KMPDUG2",55,0)
 Q
"RTN","KMPDUG2",56,0)
 ;
"RTN","KMPDUG2",57,0)
FTR(FOOTER,VALUE) ;print footer
"RTN","KMPDUG2",58,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUG2",59,0)
 ;  line feed to IOSL-3 and place message on screen
"RTN","KMPDUG2",60,0)
 ;  if IOSL or IOM are not defined routine will quit
"RTN","KMPDUG2",61,0)
 ;
"RTN","KMPDUG2",62,0)
 ;  FOOTER - text to appear at the bottom of the screen
"RTN","KMPDUG2",63,0)
 ;           if footer is not defined then the message
"RTN","KMPDUG2",64,0)
 ;           'Press RETURN to continue, '^' to exit'   will appear
"RTN","KMPDUG2",65,0)
 ;
"RTN","KMPDUG2",66,0)
 ;  footer appears in the middle of the screen
"RTN","KMPDUG2",67,0)
 ;
"RTN","KMPDUG2",68,0)
 ;  VALUE - value returned:
"RTN","KMPDUG2",69,0)
 ;          "" - if IOSL or IOM are not defined
"RTN","KMPDUG2",70,0)
 ;           0 - if an uparrow '^' is entered
"RTN","KMPDUG2",71,0)
 ;           1 - if return is entered
"RTN","KMPDUG2",72,0)
 ;
"RTN","KMPDUG2",73,0)
 S VALUE=""
"RTN","KMPDUG2",74,0)
 I '$G(IOSL)!('$G(IOM)) Q
"RTN","KMPDUG2",75,0)
 N DIR,I,X,Y
"RTN","KMPDUG2",76,0)
 I $G(FOOTER)']""  S FOOTER="Press RETURN to continue, '^' to exit"
"RTN","KMPDUG2",77,0)
 I $G(IORVON)']""!($G(IORVOFF)']"") N IORVON,IORVOFF,X D 
"RTN","KMPDUG2",78,0)
 .S X="IORVON;IORVOFF" D ENDR^%ZISS
"RTN","KMPDUG2",79,0)
 S FOOTER=IORVON_" "_FOOTER_" "_IORVOFF
"RTN","KMPDUG2",80,0)
 S DIR(0)="EA",DIR("A")=$J(" ",(IOM-$L(FOOTER)/2))_FOOTER
"RTN","KMPDUG2",81,0)
 F I=$Y:1:(IOSL-3) W !
"RTN","KMPDUG2",82,0)
 D ^DIR S VALUE=Y
"RTN","KMPDUG2",83,0)
 Q
"RTN","KMPDUG2",84,0)
 ;
"RTN","KMPDUG2",85,0)
HELP ;--help display for options.
"RTN","KMPDUG2",86,0)
 N KMPUOUT
"RTN","KMPDUG2",87,0)
 W @IOF
"RTN","KMPDUG2",88,0)
 W !,"A: Angle data titles..:  Angle the titles (for Vertical Graphs only)."
"RTN","KMPDUG2",89,0)
 W !,"               Example:    __________"
"RTN","KMPDUG2",90,0)
 W !,"                           |        |"
"RTN","KMPDUG2",91,0)
 W !,"                           |        |"
"RTN","KMPDUG2",92,0)
 W !,"                           |        |"
"RTN","KMPDUG2",93,0)
 W !,"                           __________"
"RTN","KMPDUG2",94,0)
 W !,"                           J  F  M  A"
"RTN","KMPDUG2",95,0)
 W !,"                            a  e  a  p"
"RTN","KMPDUG2",96,0)
 W !,"                             n  b  r  r"
"RTN","KMPDUG2",97,0)
 W !
"RTN","KMPDUG2",98,0)
 W !,"D: Double space data..: Will place an empty column/row between graph bars"
"RTN","KMPDUG2",99,0)
 W !,"                        (it is highly recommended that double spacing be used"
"RTN","KMPDUG2",100,0)
 W !,"                        with Vertical graphs)."
"RTN","KMPDUG2",101,0)
 W !
"RTN","KMPDUG2",102,0)
 W !,"G: Grid...............: Print grid lines on graph."
"RTN","KMPDUG2",103,0)
 W !,"               example:   ______________________________"
"RTN","KMPDUG2",104,0)
 W !,"                     Jan  |    |    |    |    |    |    |"
"RTN","KMPDUG2",105,0)
 W !,"                     Feb  |    |    |    |    |    |    |"
"RTN","KMPDUG2",106,0)
 W !,"                     Mar  |    |    |    |    |    |    |"
"RTN","KMPDUG2",107,0)
 W !,"                     Apr  |    |    |    |    |    |    |"
"RTN","KMPDUG2",108,0)
 W !,"                          ______________________________"
"RTN","KMPDUG2",109,0)
 D FTR("",.KMPUOUT) Q:'KMPUOUT  W @IOF
"RTN","KMPDUG2",110,0)
 W !,"S: Scientific Notation: If values are 1000 or greater the graph will normally"
"RTN","KMPDUG2",111,0)
 W !,"                        display a description as...: (x10k),  (x100k), etc."
"RTN","KMPDUG2",112,0)
 W !,"                      - Scientific notation will be: (x10^2), (x10^3), etc."
"RTN","KMPDUG2",113,0)
 W !
"RTN","KMPDUG2",114,0)
 W !,"V: Vertical graph.....: The default is horizontal display."
"RTN","KMPDUG2",115,0)
 W !,"                      - Selecting this option will display data vertically"
"RTN","KMPDUG2",116,0)
 W !,"                        (graph bars running top to bottom)."
"RTN","KMPDUG2",117,0)
 D FTR("Press <RET> to continue: ") W @IOF,!!!
"RTN","KMPDUG2",118,0)
 Q
"RTN","KMPDUG2",119,0)
 ;
"RTN","KMPDUG2",120,0)
OPT ;list of options
"RTN","KMPDUG2",121,0)
 ;;A;Angle data titles (vertical graph only).
"RTN","KMPDUG2",122,0)
 ;;D;Double space data.
"RTN","KMPDUG2",123,0)
 ;;G;Grid.
"RTN","KMPDUG2",124,0)
 ;;S;Scientific Notation.
"RTN","KMPDUG2",125,0)
 ;;V;Vertical graph.
"RTN","KMPDUGV")
0^46^B6896463
"RTN","KMPDUGV",1,0)
KMPDUGV ;OAK/RAK - CM Tools Vertical Graph Utility ;2/17/04  10:00
"RTN","KMPDUGV",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUGV",3,0)
 ;
"RTN","KMPDUGV",4,0)
EN ;-- entry point.
"RTN","KMPDUGV",5,0)
 D DRAW,TITLES,DATA W IOG0
"RTN","KMPDUGV",6,0)
 I $D(KMPUTAR) D  Q
"RTN","KMPDUGV",7,0)
 .;D WP^KMPDU11(KMPUTAR,5,24,(RIGHT+5),IOM,0,$G(KMPUXIT))
"RTN","KMPDUGV",8,0)
 .D WP^KMPDU11(KMPUTAR,18,22,5,IOM,0,$G(KMPUXIT))
"RTN","KMPDUGV",9,0)
 D:'KMPUXIT CONT^KMPDUG
"RTN","KMPDUGV",10,0)
 Q
"RTN","KMPDUGV",11,0)
 ;
"RTN","KMPDUGV",12,0)
DATA ;-- display data in graph.
"RTN","KMPDUGV",13,0)
 W IOG0 S DX=$S(KMPUOPT["D":9,1:10),BAR=0,I=""
"RTN","KMPDUGV",14,0)
 F  S I=$O(@KMPUAR@(I)) Q:I=""  I $D(@KMPUAR@(I,0)) S DATA=@KMPUAR@(I,0) D 
"RTN","KMPDUGV",15,0)
 .S XCOORD=$P(DATA,U,2),END=(XCOORD-KMPUSTRT) ;-STEP)
"RTN","KMPDUGV",16,0)
 .S DY=14,DX=DX+$S(KMPUOPT["D":2,1:1)
"RTN","KMPDUGV",17,0)
 .; if no data quit
"RTN","KMPDUGV",18,0)
 .Q:$P(@KMPUAR@(I,0),U,2)']""
"RTN","KMPDUGV",19,0)
 .F I1=0:STEP:END X IOXY W @BAR(BAR),! S DY=DY-1 Q:DY=5
"RTN","KMPDUGV",20,0)
 .S BAR=$S(BAR=1:0,1:1)
"RTN","KMPDUGV",21,0)
 Q
"RTN","KMPDUGV",22,0)
 ;
"RTN","KMPDUGV",23,0)
DRAW ;-- draw graph.
"RTN","KMPDUGV",24,0)
 S RIGHT=$S(KMPUOPT["D":(YNUM*2),1:(YNUM+1))+10
"RTN","KMPDUGV",25,0)
 W @IOF,!,IOG1 S DX=10
"RTN","KMPDUGV",26,0)
 ; draw left line
"RTN","KMPDUGV",27,0)
 F I=1:1:6 S DY=4+I X IOXY W IOVL S DY=15-I X IOXY W IOVL
"RTN","KMPDUGV",28,0)
 ; draw left top corner ;and bottom corners
"RTN","KMPDUGV",29,0)
 ;S DY=4 X IOXY W IOTLC ;S DY=15 X IOXY W IOBLC,!
"RTN","KMPDUGV",30,0)
 ; draw top and bottom lines
"RTN","KMPDUGV",31,0)
 ;F DX=(DX+1):1:(RIGHT-1) S DY=5 X IOXY W IOHL,! S DY=15 X IOXY W "s",!
"RTN","KMPDUGV",32,0)
 F DX=(DX+1):1:(RIGHT-1) S DY=14 X IOXY W "s",!
"RTN","KMPDUGV",33,0)
 ; draw right top corner ;and bottom corners
"RTN","KMPDUGV",34,0)
 ;S DX=RIGHT,DY=5 X IOXY W IOTRC ;S DY=15 X IOXY W IOBRC,!
"RTN","KMPDUGV",35,0)
 ; draw right line
"RTN","KMPDUGV",36,0)
 S DX=RIGHT F I=1:1:6 S DY=4+I X IOXY W IOVL S DY=16-I X IOXY W IOVL
"RTN","KMPDUGV",37,0)
 ; draw 'hash marks' on left line for relative values
"RTN","KMPDUGV",38,0)
 S DX=9,DY=14 X IOXY W "s",! ;W IOLT,!
"RTN","KMPDUGV",39,0)
 F DY=13:-1:4 X IOXY W "s",! ;W IOMT,!
"RTN","KMPDUGV",40,0)
 ; print grid
"RTN","KMPDUGV",41,0)
 I KMPUOPT["G" F DY=14:-1:4 F DX=11:1:(RIGHT-1) X IOXY W "s",!
"RTN","KMPDUGV",42,0)
 W IOG0
"RTN","KMPDUGV",43,0)
 Q
"RTN","KMPDUGV",44,0)
 ;
"RTN","KMPDUGV",45,0)
TITLES ;-- print graph titles.
"RTN","KMPDUGV",46,0)
 W IOG0
"RTN","KMPDUGV",47,0)
 ; print first and second line of title
"RTN","KMPDUGV",48,0)
 S DX=(IOM-$L($P(TITLE,U))\2+1),DY=0 X IOXY W $P(TITLE,U),!
"RTN","KMPDUGV",49,0)
 S DX=(IOM-$L($P(TITLE,U,2))\2+1),DY=1 X IOXY W $P(TITLE,U,2),!
"RTN","KMPDUGV",50,0)
 ; print x title at bottom
"RTN","KMPDUGV",51,0)
 S DX=(10-$L(XTITLE)),DY=3 X IOXY W IOUON,XTITLE,IOUOFF
"RTN","KMPDUGV",52,0)
 ; if div>1 write (x div)
"RTN","KMPDUGV",53,0)
 W:DIV>1 " <x",DIVT,">"
"RTN","KMPDUGV",54,0)
 W !
"RTN","KMPDUGV",55,0)
 ; print y title
"RTN","KMPDUGV",56,0)
 S DY=15,DX=$S(KMPUOPT["A":1,1:2)
"RTN","KMPDUGV",57,0)
 F I=1:1:8 D 
"RTN","KMPDUGV",58,0)
 .X IOXY W IOUON,$E(YTITLE,I),IOUOFF,! S DY=DY+1
"RTN","KMPDUGV",59,0)
 .I KMPUOPT["A" S DX=DX+1
"RTN","KMPDUGV",60,0)
 ; print relative values next to hash marks
"RTN","KMPDUGV",61,0)
 S NUM=(SCALE+KMPUSTRT)
"RTN","KMPDUGV",62,0)
 S DY=14,DX=9-$L($FN((KMPUSTRT/DIV),"",DEC1))
"RTN","KMPDUGV",63,0)
 X IOXY W $FN((KMPUSTRT/DIV),"",DEC1),!
"RTN","KMPDUGV",64,0)
 F DY=13:-1:4 D 
"RTN","KMPDUGV",65,0)
 .S DX=(9-$L($FN((NUM/DIV),"",DEC1)))
"RTN","KMPDUGV",66,0)
 .X IOXY W $FN((NUM/DIV),"",DEC1),! S NUM=NUM+SCALE
"RTN","KMPDUGV",67,0)
 ; print data titles
"RTN","KMPDUGV",68,0)
 S ZDX=11,I=""
"RTN","KMPDUGV",69,0)
 F  S I=$O(@KMPUAR@(I)) Q:I=""  I $D(@KMPUAR@(I,0)) D 
"RTN","KMPDUGV",70,0)
 .S YTITLE=$E($P(@KMPUAR@(I,0),U),1,14),DX=ZDX
"RTN","KMPDUGV",71,0)
 .I KMPUOPT["A" F I1=1:1:8 S DY=14+I1 X IOXY W $E(YTITLE,I1),! S DX=DX+1
"RTN","KMPDUGV",72,0)
 .I KMPUOPT'["A" F I1=1:1:8 S DY=14+I1 X IOXY W $E(YTITLE,I1),!
"RTN","KMPDUGV",73,0)
 .S ZDX=ZDX+$S(KMPUOPT["D":2,1:1)
"RTN","KMPDUGV",74,0)
 Q
"RTN","KMPDUT")
0^24^B82480
"RTN","KMPDUT",1,0)
KMPDUT ;OAK/RAK - CM Tools Utility ;2/17/04  10:45
"RTN","KMPDUT",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUT",3,0)
 ;
"RTN","KMPDUT",4,0)
PARAMS(KMPDARRY) ;-- cp parameters file data
"RTN","KMPDUT",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT",6,0)
 ; KMPDARRY... Array (called by name) that will contain data from file
"RTN","KMPDUT",7,0)
 ;             #8973 (CP PARAMETERS).  This will be returned in internal 
"RTN","KMPDUT",8,0)
 ;             format
"RTN","KMPDUT",9,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT",10,0)
 ;
"RTN","KMPDUT",11,0)
 Q:$G(KMPDARRY)=""
"RTN","KMPDUT",12,0)
 M @KMPDARRY=^KMPD(8973,1)
"RTN","KMPDUT",13,0)
 Q
"RTN","KMPDUT2")
0^25^B30234427
"RTN","KMPDUT2",1,0)
KMPDUT2 ;OAK/RAK - CM Tools Utility ;2/17/04  10:45
"RTN","KMPDUT2",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUT2",3,0)
 ;
"RTN","KMPDUT2",4,0)
ID(KMPDIEN) ;--called from ^DD(8973.1,0,"ID","W")
"RTN","KMPDUT2",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",6,0)
 ; KMPDIEN... Ien for file #8973.1 (CM HL7 DATA)
"RTN","KMPDUT2",7,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",8,0)
 Q:'$G(KMPDIEN)
"RTN","KMPDUT2",9,0)
 Q:'$D(^KMPD(8973.1,+KMPDIEN,0))
"RTN","KMPDUT2",10,0)
 N DATA,TXT
"RTN","KMPDUT2",11,0)
 S DATA=$G(^KMPD(8973.1,+KMPDIEN,0)),DATA(99.2)=$G(^(99.2)) Q:DATA=""
"RTN","KMPDUT2",12,0)
 ; sent to national database
"RTN","KMPDUT2",13,0)
 S TXT(1)=$S($P(DATA,U,2):"sent",1:"not sent")
"RTN","KMPDUT2",14,0)
 S TXT(1)=TXT(1)_$J(" ",11-$L(TXT(1)))
"RTN","KMPDUT2",15,0)
 ; namespace
"RTN","KMPDUT2",16,0)
 S TXT(1)=TXT(1)_$P(DATA,U,3)
"RTN","KMPDUT2",17,0)
 S TXT(1)=TXT(1)_$J(" ",18-$L(TXT(1)))
"RTN","KMPDUT2",18,0)
 ; protocol
"RTN","KMPDUT2",19,0)
 S TXT(1)=TXT(1)_$P(DATA,U,5)
"RTN","KMPDUT2",20,0)
 S TXT(1)=TXT(1)_$J(" ",52-$L(TXT(1)))
"RTN","KMPDUT2",21,0)
 ; synch/asynch
"RTN","KMPDUT2",22,0)
 S TXT(1)=TXT(1)_$S($P(DATA,U,6)=1:"sync",1:"async")
"RTN","KMPDUT2",23,0)
 ; other site number
"RTN","KMPDUT2",24,0)
 I $P(DATA(99.2),U,12)'="" D 
"RTN","KMPDUT2",25,0)
 .S TXT(2)=$P(DATA(99.2),U,12)
"RTN","KMPDUT2",26,0)
 .S TXT(2,"F")="!?41"
"RTN","KMPDUT2",27,0)
 S TXT(1,"F")="?15"
"RTN","KMPDUT2",28,0)
 D EN^DDIOL(.TXT)
"RTN","KMPDUT2",29,0)
 Q
"RTN","KMPDUT2",30,0)
 ;
"RTN","KMPDUT2",31,0)
ID1(KMPDIEN) ;--called from ^DD(8973.2,0,"ID","W")
"RTN","KMPDUT2",32,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",33,0)
 ; KMPDIEN... Ien for file #8973.2 (CM TIMING)
"RTN","KMPDUT2",34,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",35,0)
 Q:'$G(KMPDIEN)
"RTN","KMPDUT2",36,0)
 Q:'$D(^KMPD(8973.2,+KMPDIEN,0))
"RTN","KMPDUT2",37,0)
 N DATA,TXT
"RTN","KMPDUT2",38,0)
 S DATA=$G(^KMPD(8973.2,+KMPDIEN,0)) Q:DATA=""
"RTN","KMPDUT2",39,0)
 S TXT(1)=""
"RTN","KMPDUT2",40,0)
 ; date/time
"RTN","KMPDUT2",41,0)
 S TXT(1)=TXT(1)_$$FMTE^XLFDT($P(DATA,U,3),2)
"RTN","KMPDUT2",42,0)
 S TXT(1)=TXT(1)_$J(" ",18-$L(TXT(1)))
"RTN","KMPDUT2",43,0)
 ; title
"RTN","KMPDUT2",44,0)
 S TXT(1)=TXT(1)_$E($P(DATA,U,8),1,16)
"RTN","KMPDUT2",45,0)
 ; client name
"RTN","KMPDUT2",46,0)
 S TXT(2)=$E($P(DATA,U,6),1,30)
"RTN","KMPDUT2",47,0)
 ; person
"RTN","KMPDUT2",48,0)
 S TXT(3)=$P($G(^VA(200,+$P(DATA,U,5),0)),U)
"RTN","KMPDUT2",49,0)
 ; sent to national database
"RTN","KMPDUT2",50,0)
 S TXT(4)="weekly - "_$S($P(DATA,U,2):"sent",1:"not sent")
"RTN","KMPDUT2",51,0)
 S TXT(5)="daily - "_$S($P(DATA,U,10):"sent",1:"not sent")
"RTN","KMPDUT2",52,0)
 ;S TXT(1)=TXT(1)_$J(" ",11-$L(TXT(1)))
"RTN","KMPDUT2",53,0)
 S TXT(1,"F")="?45"
"RTN","KMPDUT2",54,0)
 S TXT(2,"F")="!?48"
"RTN","KMPDUT2",55,0)
 S TXT(3,"F")="!?48"
"RTN","KMPDUT2",56,0)
 S TXT(4,"F")="!?48"
"RTN","KMPDUT2",57,0)
 S TXT(5,"F")="!?48"
"RTN","KMPDUT2",58,0)
 D EN^DDIOL(.TXT)
"RTN","KMPDUT2",59,0)
 Q
"RTN","KMPDUT2",60,0)
 ;
"RTN","KMPDUT2",61,0)
XREF(DA,X,KMPDTYPE) ;-set/kill 'APTDTNM' xref in file #8973.1
"RTN","KMPDUT2",62,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",63,0)
 ; DA....... Ien for file #8973.1 (CM HL7 DATA)
"RTN","KMPDUT2",64,0)
 ; X........ Value of field #.05 (PROTOCOL)
"RTN","KMPDUT2",65,0)
 ; KMPDTYPE. 1 - set xref
"RTN","KMPDUT2",66,0)
 ;           2 - kill xref
"RTN","KMPDUT2",67,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",68,0)
 Q:'$G(DA)
"RTN","KMPDUT2",69,0)
 Q:$G(X)=""
"RTN","KMPDUT2",70,0)
 Q:'$G(KMPDTYPE)
"RTN","KMPDUT2",71,0)
 N DATA,DATE,NM
"RTN","KMPDUT2",72,0)
 S DATA=$G(^KMPD(8973.1,DA,0)) Q:DATA=""
"RTN","KMPDUT2",73,0)
 S DATE=$P(DATA,U) Q:'DATE
"RTN","KMPDUT2",74,0)
 S NM=$P(DATA,U,3) Q:NM=""
"RTN","KMPDUT2",75,0)
 I KMPDTYPE=1 S ^KMPD(8973.1,"APTDTNM",X,DATE,NM,DA)=""
"RTN","KMPDUT2",76,0)
 I KMPDTYPE=2 K ^KMPD(8973.1,"APTDTNM",X,DATE,NM,DA)
"RTN","KMPDUT2",77,0)
 Q
"RTN","KMPDUT2",78,0)
 ;
"RTN","KMPDUT2",79,0)
XREF1(DA,X,KMPDTYPE) ;-set/kill 'ACSDTPRNM' xref in file #8973.1
"RTN","KMPDUT2",80,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",81,0)
 ; DA....... Ien for file #8973.1 (CM HL7 DATA)
"RTN","KMPDUT2",82,0)
 ; X........ Value of field #99.212 (CONTACTED SITE NAME)
"RTN","KMPDUT2",83,0)
 ; KMPDTYPE. 1 - set xref
"RTN","KMPDUT2",84,0)
 ;           2 - kill xref
"RTN","KMPDUT2",85,0)
 ;
"RTN","KMPDUT2",86,0)
 ; variables used:
"RTN","KMPDUT2",87,0)
 ; DATE.. Internal value of field #.01 (DATE)
"RTN","KMPDUT2",88,0)
 ; NM.... Internal value of field #.03 (NAMESPACE)
"RTN","KMPDUT2",89,0)
 ; PR.... Internal value of field #.05 (PROTOCOL)
"RTN","KMPDUT2",90,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",91,0)
 Q:'$G(DA)
"RTN","KMPDUT2",92,0)
 Q:$G(X)=""
"RTN","KMPDUT2",93,0)
 Q:'$G(KMPDTYPE)
"RTN","KMPDUT2",94,0)
 N DATA,DATE,NM,PR
"RTN","KMPDUT2",95,0)
 S DATA=$G(^KMPD(8973.1,DA,0)) Q:DATA=""
"RTN","KMPDUT2",96,0)
 S DATE=$P(DATA,U) Q:'DATE
"RTN","KMPDUT2",97,0)
 S NM=$P(DATA,U,3) Q:NM=""
"RTN","KMPDUT2",98,0)
 S PR=$P(DATA,U,5) Q:PR=""
"RTN","KMPDUT2",99,0)
 I KMPDTYPE=1 S ^KMPD(8973.1,"ACSDTPRNM",X,DATE,PR,NM,DA)=""
"RTN","KMPDUT2",100,0)
 I KMPDTYPE=2 K ^KMPD(8973.1,"ACSDTPRNM",X,DATE,PR,NM,DA)
"RTN","KMPDUT2",101,0)
 Q
"RTN","KMPDUT2",102,0)
 ;
"RTN","KMPDUT2",103,0)
XREF2(DA,X,KMPDTYPE) ;-set/kill 'ASYNC' xref in file #8973.1
"RTN","KMPDUT2",104,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",105,0)
 ; DA....... Ien for file #8973.1 (CM HL7 DATA)
"RTN","KMPDUT2",106,0)
 ; X........ Value of field #.06 (SYNC/ASYNC)
"RTN","KMPDUT2",107,0)
 ; KMPDTYPE. 1 - set xref
"RTN","KMPDUT2",108,0)
 ;           2 - kill xref
"RTN","KMPDUT2",109,0)
 ;
"RTN","KMPDUT2",110,0)
 ; variables used:
"RTN","KMPDUT2",111,0)
 ; DATE.. Internal value of field #.01 (DATE)
"RTN","KMPDUT2",112,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",113,0)
 Q:'$G(DA)
"RTN","KMPDUT2",114,0)
 Q:$G(X)=""
"RTN","KMPDUT2",115,0)
 Q:'$G(KMPDTYPE)
"RTN","KMPDUT2",116,0)
 N DATA,DATE
"RTN","KMPDUT2",117,0)
 S DATA=$G(^KMPD(8973.1,DA,0)) Q:DATA=""
"RTN","KMPDUT2",118,0)
 S DATE=$P(DATA,U) Q:'DATE
"RTN","KMPDUT2",119,0)
 I KMPDTYPE=1 S ^KMPD(8973.1,"ASYNC",DATE,X,DA)=""
"RTN","KMPDUT2",120,0)
 I KMPDTYPE=2 K ^KMPD(8973.1,"ASYNC",DATE,X,DA)
"RTN","KMPDUT2",121,0)
 Q
"RTN","KMPDUT2",122,0)
 ;
"RTN","KMPDUT2",123,0)
XREFT1(DA,X,KMPDTYPE) ;-set/kill 'ASVDTSS' xref in file #8973.2
"RTN","KMPDUT2",124,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",125,0)
 ; DA....... Ien for file #8973.2 (CM TIMING)
"RTN","KMPDUT2",126,0)
 ; X........ Value of field #.07 (SERVER SUBSCRIPT)
"RTN","KMPDUT2",127,0)
 ; KMPDTYPE. 1 - set xref
"RTN","KMPDUT2",128,0)
 ;           2 - kill xref
"RTN","KMPDUT2",129,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",130,0)
 Q:'$G(DA)
"RTN","KMPDUT2",131,0)
 Q:$G(X)=""
"RTN","KMPDUT2",132,0)
 Q:'$G(KMPDTYPE)
"RTN","KMPDUT2",133,0)
 N DATA,DATE
"RTN","KMPDUT2",134,0)
 S DATA=$G(^KMPD(8973.2,DA,0)) Q:DATA=""
"RTN","KMPDUT2",135,0)
 ; strip off time
"RTN","KMPDUT2",136,0)
 S DATE=$P($P(DATA,U,3),".") Q:'DATE
"RTN","KMPDUT2",137,0)
 I KMPDTYPE=1 S ^KMPD(8973.2,"ASVDTSS",X,DATE,DA)=""
"RTN","KMPDUT2",138,0)
 I KMPDTYPE=2 K ^KMPD(8973.2,"ASVDTSS",X,DATE,DA)
"RTN","KMPDUT2",139,0)
 Q
"RTN","KMPDUT2",140,0)
 ;
"RTN","KMPDUT2",141,0)
XREFT2(DA,X,KMPDTYPE) ;-set/kill 'ASSDTPT' xref in file #8973.2
"RTN","KMPDUT2",142,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",143,0)
 ; DA....... Ien for file #8973.2 (CM TIMING)
"RTN","KMPDUT2",144,0)
 ; X........ Value of field #.07 (SERVER SUBSCRIPT)
"RTN","KMPDUT2",145,0)
 ; KMPDTYPE. 1 - set xref
"RTN","KMPDUT2",146,0)
 ;           2 - kill xref
"RTN","KMPDUT2",147,0)
 ;
"RTN","KMPDUT2",148,0)
 ; ^KMPD(8973.2,"ASSDTPT",ServerSubscript,ServerStartDate,PrimeTime,DA)
"RTN","KMPDUT2",149,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",150,0)
 Q:'$G(DA)
"RTN","KMPDUT2",151,0)
 Q:$G(X)=""
"RTN","KMPDUT2",152,0)
 Q:'$G(KMPDTYPE)
"RTN","KMPDUT2",153,0)
 N DATA,DATE,PTNP
"RTN","KMPDUT2",154,0)
 S DATA=$G(^KMPD(8973.2,DA,0)) Q:DATA=""
"RTN","KMPDUT2",155,0)
 ; server start date/time
"RTN","KMPDUT2",156,0)
 S DATE=$P(DATA,U,3) Q:'DATE
"RTN","KMPDUT2",157,0)
 ; prime time / non-prime time
"RTN","KMPDUT2",158,0)
 S PTNP=$$PTNP^KMPDHU03(DATE) Q:'PTNP
"RTN","KMPDUT2",159,0)
 ; strip off time
"RTN","KMPDUT2",160,0)
 S DATE=$P(DATE,".") Q:'DATE
"RTN","KMPDUT2",161,0)
 I KMPDTYPE=1 S ^KMPD(8973.2,"ASSDTPT",X,DATE,PTNP,DA)=""
"RTN","KMPDUT2",162,0)
 I KMPDTYPE=2 K ^KMPD(8973.2,"ASSDTPT",X,DATE,PTNP,DA)
"RTN","KMPDUT2",163,0)
 Q
"RTN","KMPDUT2",164,0)
 ;
"RTN","KMPDUT2",165,0)
XREFT3(DA,X,KMPDTYPE) ;-set/kill 'ASSDTTM' xref in file #8973.2
"RTN","KMPDUT2",166,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",167,0)
 ; DA....... Ien for file #8973.2 (CM TIMING)
"RTN","KMPDUT2",168,0)
 ; X........ Value of field #.07 (SERVER SUBSCRIPT)
"RTN","KMPDUT2",169,0)
 ; KMPDTYPE. 1 - set xref
"RTN","KMPDUT2",170,0)
 ;           2 - kill xref
"RTN","KMPDUT2",171,0)
 ;
"RTN","KMPDUT2",172,0)
 ; ^KMPD(8973.2,"ASSDTTM",ServerSubscript,ServerStartDate,PrimeTime,DA)
"RTN","KMPDUT2",173,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",174,0)
 Q:'$G(DA)
"RTN","KMPDUT2",175,0)
 Q:$G(X)=""
"RTN","KMPDUT2",176,0)
 Q:'$G(KMPDTYPE)
"RTN","KMPDUT2",177,0)
 N DATA,DATE
"RTN","KMPDUT2",178,0)
 S DATA=$G(^KMPD(8973.2,DA,0)) Q:DATA=""
"RTN","KMPDUT2",179,0)
 ; server start date/time
"RTN","KMPDUT2",180,0)
 S DATE=$P(DATA,U,3) Q:'DATE
"RTN","KMPDUT2",181,0)
 I KMPDTYPE=1 S ^KMPD(8973.2,"ASSDTTM",X,DATE,DA)=""
"RTN","KMPDUT2",182,0)
 I KMPDTYPE=2 K ^KMPD(8973.2,"ASSDTTM",X,DATE,DA)
"RTN","KMPDUT2",183,0)
 Q
"RTN","KMPDUT2",184,0)
 ;
"RTN","KMPDUT2",185,0)
XREFT4(DA,X,KMPDTYPE) ;-set/kill 'ASSCLDTTM' xref in file #8973.2
"RTN","KMPDUT2",186,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",187,0)
 ; DA....... Ien for file #8973.2 (CM TIMING)
"RTN","KMPDUT2",188,0)
 ; X........ Value of field #.07 (KMPTMP SUBSCRIPT)
"RTN","KMPDUT2",189,0)
 ; KMPDTYPE. 1 - set xref
"RTN","KMPDUT2",190,0)
 ;           2 - kill xref
"RTN","KMPDUT2",191,0)
 ;
"RTN","KMPDUT2",192,0)
 ; ^KMPD(8973.2,"ASSCLDTTM",KmptmpSubscript,ClientName,ServerDateTime,DA)
"RTN","KMPDUT2",193,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",194,0)
 Q:'$G(DA)
"RTN","KMPDUT2",195,0)
 Q:$G(X)=""
"RTN","KMPDUT2",196,0)
 Q:'$G(KMPDTYPE)
"RTN","KMPDUT2",197,0)
 N CLNM,DATA,DATE
"RTN","KMPDUT2",198,0)
 S DATA=$G(^KMPD(8973.2,DA,0)) Q:DATA=""
"RTN","KMPDUT2",199,0)
 ; server start date/time
"RTN","KMPDUT2",200,0)
 S DATE=$P(DATA,U,3) Q:'DATE
"RTN","KMPDUT2",201,0)
 ; client name
"RTN","KMPDUT2",202,0)
 S CLNM=$P(DATA,U,6) Q:CLNM=""
"RTN","KMPDUT2",203,0)
 I KMPDTYPE=1 S ^KMPD(8973.2,"ASSCLDTTM",X,CLNM,DATE,DA)=""
"RTN","KMPDUT2",204,0)
 I KMPDTYPE=2 K ^KMPD(8973.2,"ASSCLDTTM",X,CLNM,DATE,DA)
"RTN","KMPDUT2",205,0)
 Q
"RTN","KMPDUT2",206,0)
XREFT5(DA,X,KMPDTYPE) ;-set/kill 'ASSNPDTTM' xref in file #8973.2
"RTN","KMPDUT2",207,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",208,0)
 ; DA....... Ien for file #8973.2 (CM TIMING)
"RTN","KMPDUT2",209,0)
 ; X........ Value of field #.07 (KMPTMP SUBSCRIPT)
"RTN","KMPDUT2",210,0)
 ; KMPDTYPE. 1 - set xref
"RTN","KMPDUT2",211,0)
 ;           2 - kill xref
"RTN","KMPDUT2",212,0)
 ;
"RTN","KMPDUT2",213,0)
 ; ^KMPD(8973.2,"ASSNPDTTM",KmptmpSubscript,NewPerson,ServerDateTime,DA)
"RTN","KMPDUT2",214,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",215,0)
 Q:'$G(DA)
"RTN","KMPDUT2",216,0)
 Q:$G(X)=""
"RTN","KMPDUT2",217,0)
 Q:'$G(KMPDTYPE)
"RTN","KMPDUT2",218,0)
 N NP,DATA,DATE
"RTN","KMPDUT2",219,0)
 S DATA=$G(^KMPD(8973.2,DA,0)) Q:DATA=""
"RTN","KMPDUT2",220,0)
 ; server start date/time
"RTN","KMPDUT2",221,0)
 S DATE=$P(DATA,U,3) Q:'DATE
"RTN","KMPDUT2",222,0)
 ; new person
"RTN","KMPDUT2",223,0)
 S NP=$P(DATA,U,5) Q:NP=""
"RTN","KMPDUT2",224,0)
 I KMPDTYPE=1 S ^KMPD(8973.2,"ASSNPDTTM",X,NP,DATE,DA)=""
"RTN","KMPDUT2",225,0)
 I KMPDTYPE=2 K ^KMPD(8973.2,"ASSNPDTTM",X,NP,DATE,DA)
"RTN","KMPDUT2",226,0)
 Q
"RTN","KMPDUT2",227,0)
 ;
"RTN","KMPDUT2",228,0)
XREFT6(DA,X,KMPDTYPE) ;-set/kill 'ASSIPDTTM' xref in file #8973.2
"RTN","KMPDUT2",229,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",230,0)
 ; DA....... Ien for file #8973.2 (CM TIMING)
"RTN","KMPDUT2",231,0)
 ; X........ Value of field #.07 (KMPTMP SUBSCRIPT)
"RTN","KMPDUT2",232,0)
 ; KMPDTYPE. 1 - set xref
"RTN","KMPDUT2",233,0)
 ;           2 - kill xref
"RTN","KMPDUT2",234,0)
 ;
"RTN","KMPDUT2",235,0)
 ; ^KMPD(8973.2,"ASSIPDTTM",KmptmpSubscript,IpAddress,ServerDateTime,DA)
"RTN","KMPDUT2",236,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUT2",237,0)
 Q:'$G(DA)
"RTN","KMPDUT2",238,0)
 Q:$G(X)=""
"RTN","KMPDUT2",239,0)
 Q:'$G(KMPDTYPE)
"RTN","KMPDUT2",240,0)
 N IP,DATA,DATE
"RTN","KMPDUT2",241,0)
 S DATA=$G(^KMPD(8973.2,DA,0)) Q:DATA=""
"RTN","KMPDUT2",242,0)
 ; server start date/time
"RTN","KMPDUT2",243,0)
 S DATE=$P(DATA,U,3) Q:'DATE
"RTN","KMPDUT2",244,0)
 ; ip address
"RTN","KMPDUT2",245,0)
 S IP=$P(DATA,U,9) Q:IP=""
"RTN","KMPDUT2",246,0)
 I KMPDTYPE=1 S ^KMPD(8973.2,"ASSIPDTTM",X,IP,DATE,DA)=""
"RTN","KMPDUT2",247,0)
 I KMPDTYPE=2 K ^KMPD(8973.2,"ASSIPDTTM",X,IP,DATE,DA)
"RTN","KMPDUT2",248,0)
 Q
"RTN","KMPDUT4")
0^26^B6870660
"RTN","KMPDUT4",1,0)
KMPDUT4 ;OAK/RAK; Multi-Lookup ;2/17/04  10:46
"RTN","KMPDUT4",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUT4",3,0)
 ;
"RTN","KMPDUT4",4,0)
SELECT(ARRAY,SORT,MAX,OPTION) ;select one or more entries
"RTN","KMPDUT4",5,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4",6,0)
 ;  this routine lets user select one or more entries from a file
"RTN","KMPDUT4",7,0)
 ;
"RTN","KMPDUT4",8,0)
 ;    ARRAY - the array the data is to be stored in
"RTN","KMPDUT4",9,0)
 ;            this may be a local or global array
"RTN","KMPDUT4",10,0)
 ;            ARRAY(0) - will contain the number of entries selected
"RTN","KMPDUT4",11,0)
 ;
"RTN","KMPDUT4",12,0)
 ;     SORT - determines how the array is set
"RTN","KMPDUT4",13,0)
 ;            0 - internal file number
"RTN","KMPDUT4",14,0)
 ;            1 - first piece of zero node
"RTN","KMPDUT4",15,0)
 ;
"RTN","KMPDUT4",16,0)
 ;            if zero then ARRAY(internal_number)=external_format
"RTN","KMPDUT4",17,0)
 ;            if one then  ARRAY(external_format)=internal_number
"RTN","KMPDUT4",18,0)
 ;
"RTN","KMPDUT4",19,0)
 ;            internal_number - the internal file number selected
"RTN","KMPDUT4",20,0)
 ;            external_format - the first piece of the zero node or
"RTN","KMPDUT4",21,0)
 ;                              Y(0,0)
"RTN","KMPDUT4",22,0)
 ;
"RTN","KMPDUT4",23,0)
 ;      MAX - if defined this represents the maximum number of entries
"RTN","KMPDUT4",24,0)
 ;            to stuff into array
"RTN","KMPDUT4",25,0)
 ;            - if '*' is selected and the number of file entries
"RTN","KMPDUT4",26,0)
 ;              exceeds this number the array will be killed and
"RTN","KMPDUT4",27,0)
 ;              ARRAY(0) will be equal to "*"
"RTN","KMPDUT4",28,0)
 ;            - if while selecting one entry at a time the number
"RTN","KMPDUT4",29,0)
 ;              of entries is equal to MAX the routine will quit with
"RTN","KMPDUT4",30,0)
 ;              the entries stored as usual and ARRAY(0)=MAX
"RTN","KMPDUT4",31,0)
 ;            this is to prevent partition store errors with local
"RTN","KMPDUT4",32,0)
 ;            arrays or setting a global equal all the patients in
"RTN","KMPDUT4",33,0)
 ;            the patient file
"RTN","KMPDUT4",34,0)
 ;
"RTN","KMPDUT4",35,0)
 ;   OPTION - selected options
"RTN","KMPDUT4",36,0)
 ;            S - suppress asterisk (*)   ;'(* for All)' prompt
"RTN","KMPDUT4",37,0)
 ;            W - allow selected wildcards
"RTN","KMPDUT4",38,0)
 ;                example:  A*     - will select all entries beginning
"RTN","KMPDUT4",39,0)
 ;                                   with the letter 'A'
"RTN","KMPDUT4",40,0)
 ;                          SMITH* - will select all entries beginning
"RTN","KMPDUT4",41,0)
 ;                                   with 'SMITH'
"RTN","KMPDUT4",42,0)
 ;
"RTN","KMPDUT4",43,0)
 ;      DIC - this variable must be defined in the normal fileman
"RTN","KMPDUT4",44,0)
 ;            format
"RTN","KMPDUT4",45,0)
 ; DIC("A") - this variable should be defined
"RTN","KMPDUT4",46,0)
 ;            the string " (* for All)" will be concatenated to the end
"RTN","KMPDUT4",47,0)
 ; DIC("S") - may be defined if necessary and will be honored
"RTN","KMPDUT4",48,0)
 ;   DIC(0) - *** IMPORTANT ***
"RTN","KMPDUT4",49,0)
 ;            this will be set to DIC(0)="EQZ" for the purposes of
"RTN","KMPDUT4",50,0)
 ;            this routine
"RTN","KMPDUT4",51,0)
 ;
"RTN","KMPDUT4",52,0)
 ;  example:  S DIC=4,DIC("A")="Select Institution: "
"RTN","KMPDUT4",53,0)
 ;            D SELECT^KMPDUT4("^TMP($J,")
"RTN","KMPDUT4",54,0)
 ;            D SELECT^KMPDUT4("LOCAL",1,20)
"RTN","KMPDUT4",55,0)
 ;            D SELECT^KMPDUT4("LOCAL($J)",1,0,"W")
"RTN","KMPDUT4",56,0)
 ;
"RTN","KMPDUT4",57,0)
 ;            *** It is the programmers responsibility kill ***
"RTN","KMPDUT4",58,0)
 ;            ***    'ARRAY' when finished with the data    ***
"RTN","KMPDUT4",59,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4",60,0)
 I $$CHECK^KMPDUT4A D FTR^KMPDUTL4("Press <RET> to continue") Q
"RTN","KMPDUT4",61,0)
 S OPTION=$$UP^XLFSTR($G(OPTION))
"RTN","KMPDUT4",62,0)
 S SORT=+$G(SORT),MAX=+$G(MAX) S:SORT'=1 SORT=0
"RTN","KMPDUT4",63,0)
 I MAX=1,(OPTION'["S") S OPTION=OPTION_"S"
"RTN","KMPDUT4",64,0)
 S DIC(0)="EMQZ",DTIME=$S($G(DTIME):DTIME,1:600)
"RTN","KMPDUT4",65,0)
 I $G(DIC("A"))'["(* for All): ",(OPTION'["S") D 
"RTN","KMPDUT4",66,0)
 .S DIC("A")=$G(DIC("A"))_" (* for All): "
"RTN","KMPDUT4",67,0)
 K @ARRAY F  D  Q:X=""!(X="^")
"RTN","KMPDUT4",68,0)
 .I MAX,(+$G(@ARRAY@(0))=MAX) S X="" Q
"RTN","KMPDUT4",69,0)
 .W !
"RTN","KMPDUT4",70,0)
 .I '$D(@ARRAY) W DIC("A")
"RTN","KMPDUT4",71,0)
 .E  W $J(" ",$L(DIC("A"))-12),"...another: "
"RTN","KMPDUT4",72,0)
 .R X:DTIME Q:X=""!(X="^")
"RTN","KMPDUT4",73,0)
 .I X="*",(MAX=1) D  Q
"RTN","KMPDUT4",74,0)
 ..W *7,!!?7,"...you are allowed only one selection...",!
"RTN","KMPDUT4",75,0)
 .I X="*",(OPTION["S") D  Q
"RTN","KMPDUT4",76,0)
 ..W *7,!!?7,"...'*' not allowed...",!
"RTN","KMPDUT4",77,0)
 .I X="*" D ALL^KMPDUT4B S X="" Q
"RTN","KMPDUT4",78,0)
 .I $E(X)="-" D MINUS^KMPDUT4C(X) Q
"RTN","KMPDUT4",79,0)
 .;-------------------------------------------------------------------
"RTN","KMPDUT4",80,0)
 .;  wildcard selection
"RTN","KMPDUT4",81,0)
 .;-------------------------------------------------------------------
"RTN","KMPDUT4",82,0)
 .I $E(X,2,999)["*",(OPTION["W") D WILDCARD^KMPDUT4B(X) Q
"RTN","KMPDUT4",83,0)
 .I $E(X,1,2)="?D"!($E(X,1,2)="?d") D DISPLAY^KMPDUT4B Q
"RTN","KMPDUT4",84,0)
 .I X="?",(MAX'=1) D HELP^KMPDUT4C
"RTN","KMPDUT4",85,0)
 .D ^DIC I Y>0,('$D(@ARRAY@($S(SORT=1:Y(0,0),1:+Y)))) D 
"RTN","KMPDUT4",86,0)
 ..I SORT=1 S @ARRAY@(Y(0,0))=+Y
"RTN","KMPDUT4",87,0)
 ..E  S @ARRAY@(+Y)=Y(0,0)
"RTN","KMPDUT4",88,0)
 ..S @ARRAY@(0)=$G(@ARRAY@(0))+1
"RTN","KMPDUT4",89,0)
EXIT ;
"RTN","KMPDUT4",90,0)
 K X,Y
"RTN","KMPDUT4",91,0)
 Q
"RTN","KMPDUT4A")
0^27^B2846593
"RTN","KMPDUT4A",1,0)
KMPDUT4A ;OAK/RAK; Multi-Lookup Global/Array Check ;2/17/04  10:47
"RTN","KMPDUT4A",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUT4A",3,0)
 ;
"RTN","KMPDUT4A",4,0)
CHECK() ;extrinsic function
"RTN","KMPDUT4A",5,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4A",6,0)
 ;  return:  0 - if successful
"RTN","KMPDUT4A",7,0)
 ;           1 - if error found
"RTN","KMPDUT4A",8,0)
 ;
"RTN","KMPDUT4A",9,0)
 ;  check variable 'ARRAY' for correct global or local array format
"RTN","KMPDUT4A",10,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4A",11,0)
 I '$D(ARRAY) D  Q 1
"RTN","KMPDUT4A",12,0)
 .W !?7,"...variable 'ARRAY' is undefined..."
"RTN","KMPDUT4A",13,0)
 I $G(DIC)']"" D  Q 1
"RTN","KMPDUT4A",14,0)
 .W !?7,"...variable 'DIC' is undefined..."
"RTN","KMPDUT4A",15,0)
 .D FTR^KMPDUTL4("Press <RET> to continue")
"RTN","KMPDUT4A",16,0)
 I $E(ARRAY)="^",(ARRAY'["(")!(ARRAY["()")!($E(ARRAY,$F(ARRAY,"("))']"")!($E(ARRAY,$F(ARRAY,"("))=",") D  Q 1
"RTN","KMPDUT4A",17,0)
 .W !?7,"...global must have a subscript (ex: '^TMP($J' )..."
"RTN","KMPDUT4A",18,0)
 ;
"RTN","KMPDUT4A",19,0)
 ;global array must be either ^TMP or ^UTILITY - just to be safe
"RTN","KMPDUT4A",20,0)
 I $E(ARRAY)="^" I $E(ARRAY,2,($F(ARRAY,"(")-2))'="TMP",($E(ARRAY,2,($F(ARRAY,"(")-2))'="UTILITY") D  Q 1
"RTN","KMPDUT4A",21,0)
 .W !!?7,"...global names must be either '^TMP' or '^UTILITY'..."
"RTN","KMPDUT4A",22,0)
 ;
"RTN","KMPDUT4A",23,0)
 ;if local array
"RTN","KMPDUT4A",24,0)
 I $E(ARRAY)'="^" D 
"RTN","KMPDUT4A",25,0)
 .;remove '()' from local array if no subscript
"RTN","KMPDUT4A",26,0)
 .I $E(ARRAY,$F(ARRAY,"("))=")"!($E(ARRAY,$F(ARRAY,"("))']"") D 
"RTN","KMPDUT4A",27,0)
 ..S ARRAY=$TR(ARRAY,"(",""),ARRAY=$TR(ARRAY,")","")
"RTN","KMPDUT4A",28,0)
 ;
"RTN","KMPDUT4A",29,0)
 ;if subcript array add closing parenthesis and remove trailing comma
"RTN","KMPDUT4A",30,0)
 I ARRAY["("!($E(ARRAY)="^") D 
"RTN","KMPDUT4A",31,0)
 .I $E(ARRAY,$L(ARRAY))'=")" S ARRAY=ARRAY_")"
"RTN","KMPDUT4A",32,0)
 .I $E(ARRAY,($L(ARRAY)-1))="," S ARRAY=$E(ARRAY,1,($L(ARRAY)-2))_")"
"RTN","KMPDUT4A",33,0)
 Q 0
"RTN","KMPDUT4B")
0^28^B6574044
"RTN","KMPDUT4B",1,0)
KMPDUT4B ;OAK/RAK; Multi-Lookup Array Selection cont. ;2/17/04  10:48
"RTN","KMPDUT4B",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUT4B",3,0)
 ;
"RTN","KMPDUT4B",4,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4B",5,0)
 ;  sub-routines to select entries - called from ^KMPDUT4
"RTN","KMPDUT4B",6,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4B",7,0)
ALL ;all entries selected
"RTN","KMPDUT4B",8,0)
 Q:'$D(ARRAY)!('$D(DIC))  S MAX=+$G(MAX),SORT=+$G(SORT)
"RTN","KMPDUT4B",9,0)
 K @ARRAY I DIC S DIC=$G(^DIC(DIC,0,"GL"))
"RTN","KMPDUT4B",10,0)
 I MAX,($P($G(@(DIC_"0)")),U,4)>MAX) S @ARRAY@(0)="*" Q
"RTN","KMPDUT4B",11,0)
 N ASKI W "  selecting 'All' entries"
"RTN","KMPDUT4B",12,0)
 F ASKI=0:0 S ASKI=$O(@(DIC_ASKI_")")) Q:'ASKI  D SET(ASKI)
"RTN","KMPDUT4B",13,0)
 Q
"RTN","KMPDUT4B",14,0)
DISPLAY ;display entries that have been selected
"RTN","KMPDUT4B",15,0)
 Q:'$D(DIC)  S SORT=+$G(SORT)
"RTN","KMPDUT4B",16,0)
 I '$D(@ARRAY) W !!,"...no entries have been selected...",! Q
"RTN","KMPDUT4B",17,0)
 I @ARRAY@(0)="*" W !!,"...'All' entries have been selected...",! Q
"RTN","KMPDUT4B",18,0)
 D HDR^KMPDUTL4("Selected Entries from "_$P($G(@(DIC_"0)")),U)_" file")
"RTN","KMPDUT4B",19,0)
 N ASKI,ASKOUT S ASKI="",ASKOUT=1 W !!
"RTN","KMPDUT4B",20,0)
 F  S ASKI=$O(@ARRAY@(ASKI)) Q:ASKI=""!(ASKOUT'=1)  I ASKI'=0 D 
"RTN","KMPDUT4B",21,0)
 .I $Y>(IOSL-4) D  Q:ASKOUT'=1
"RTN","KMPDUT4B",22,0)
 ..D FTR^KMPDUTL4("",.ASKOUT) Q:ASKOUT'=1
"RTN","KMPDUT4B",23,0)
 ..D HDR^KMPDUTL4("Selected Entries from "_$P($G(@(DIC_"0)")),U)_" file")
"RTN","KMPDUT4B",24,0)
 ..W !!
"RTN","KMPDUT4B",25,0)
 .W !?7,$S(SORT=1:ASKI,1:@ARRAY@(ASKI))
"RTN","KMPDUT4B",26,0)
 W !
"RTN","KMPDUT4B",27,0)
 Q
"RTN","KMPDUT4B",28,0)
WILDCARD(X) ;entries with wildcard selected
"RTN","KMPDUT4B",29,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4B",30,0)
 ;  allow wildcard selections
"RTN","KMPDUT4B",31,0)
 ;       examples: A*
"RTN","KMPDUT4B",32,0)
 ;                 ABC*
"RTN","KMPDUT4B",33,0)
 ;                 SMITH*
"RTN","KMPDUT4B",34,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4B",35,0)
 Q:$G(X)']""
"RTN","KMPDUT4B",36,0)
 N ASKI,COUNT,NARRAY,OUT,STR,STR1 S (COUNT,OUT)=0
"RTN","KMPDUT4B",37,0)
 S MAX=+$G(MAX),SORT=+$G(SORT) S:$G(D)']"" D="B"
"RTN","KMPDUT4B",38,0)
 S STR=$E(X,1,($F(X,"*")-2)) Q:STR']""
"RTN","KMPDUT4B",39,0)
 S STR1=STR,NARRAY=DIC_""""_D_""""_")"
"RTN","KMPDUT4B",40,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4B",41,0)
 ;  if exact match on STR1
"RTN","KMPDUT4B",42,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4B",43,0)
 I $D(@NARRAY@(STR1)) S ASKI=0 D  Q
"RTN","KMPDUT4B",44,0)
 .I STR?.N S NARRAY=DIC_""""_D_""""_","_STR_")"
"RTN","KMPDUT4B",45,0)
 .E  S NARRAY=DIC_""""_D_""""_","_""""_STR_""""_")"
"RTN","KMPDUT4B",46,0)
 .F  S ASKI=$O(@NARRAY@(ASKI)) Q:'ASKI  D  Q:OUT
"RTN","KMPDUT4B",47,0)
 ..D SET(ASKI) I MAX,(+$G(@ARRAY@(0))=MAX) S OUT=1
"RTN","KMPDUT4B",48,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4B",49,0)
 ;  if not an exact match
"RTN","KMPDUT4B",50,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4B",51,0)
 F  S STR1=$O(@NARRAY@(STR1)) Q:$E(STR1,1,$L(STR))'=STR  D  Q:OUT
"RTN","KMPDUT4B",52,0)
 .F ASKI=0:0  S ASKI=$O(@NARRAY@(STR1,ASKI)) Q:'ASKI  D  Q:OUT
"RTN","KMPDUT4B",53,0)
 ..D SET(ASKI) I MAX,(+$G(@ARRAY@(0))=MAX) S OUT=1
"RTN","KMPDUT4B",54,0)
 Q
"RTN","KMPDUT4B",55,0)
SET(IFN) ;set selected data into array
"RTN","KMPDUT4B",56,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4B",57,0)
 ;    IFN - internal file number of entry
"RTN","KMPDUT4B",58,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4B",59,0)
 N X,Y S IFN=+$G(IFN),SORT=+$G(SORT) Q:'IFN
"RTN","KMPDUT4B",60,0)
 Q:'$D(DIC)!('$D(ARRAY))
"RTN","KMPDUT4B",61,0)
 Q:'$D(@(DIC_IFN_",0)"))!($P($G(^(0)),U)']"")
"RTN","KMPDUT4B",62,0)
 S X="`"_ASKI,DIC(0)="Z" D ^DIC Q:Y'>0
"RTN","KMPDUT4B",63,0)
 I SORT=1 S @ARRAY@(Y(0,0))=+Y
"RTN","KMPDUT4B",64,0)
 E  S @ARRAY@(+Y)=Y(0,0)
"RTN","KMPDUT4B",65,0)
 S @ARRAY@(0)=$G(@ARRAY@(0))+1 W:$X>73 !?7 W "."
"RTN","KMPDUT4B",66,0)
 Q
"RTN","KMPDUT4B",67,0)
 ;  for future use - if unable to use `IFN in call to ^DIC
"RTN","KMPDUT4B",68,0)
 I SORT=1 S @ARRAY@($P($G(@(DIC_ASKI_",0)")),U))=ASKI
"RTN","KMPDUT4B",69,0)
 E  S @ARRAY@(ASKI)=$P($G(@(DIC_ASKI_",0)")),U)
"RTN","KMPDUT4C")
0^29^B8778533
"RTN","KMPDUT4C",1,0)
KMPDUT4C ;OAK/RAK; Multi-Lookup cont. ;2/17/04  10:48
"RTN","KMPDUT4C",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUT4C",3,0)
 ;
"RTN","KMPDUT4C",4,0)
HELP ;--help text
"RTN","KMPDUT4C",5,0)
 N OUT
"RTN","KMPDUT4C",6,0)
 W !!?7,"Enter '?D' to display entries selected so far."
"RTN","KMPDUT4C",7,0)
 I $G(OPTION)'["S" W !!?7,"Select '*' for all entries or"
"RTN","KMPDUT4C",8,0)
 W !
"RTN","KMPDUT4C",9,0)
 G:$G(OPTION)'["W" HELPM
"RTN","KMPDUT4C",10,0)
 W !?7,"Select entries by typing one or more characters and then the '*'"
"RTN","KMPDUT4C",11,0)
 W !
"RTN","KMPDUT4C",12,0)
 W !?7,"    Example:  'A*'     - will select all entries begging with"
"RTN","KMPDUT4C",13,0)
 W !?7,"                         the letter 'A'"
"RTN","KMPDUT4C",14,0)
 W !?7,"              'SMITH*' - will select all entries begging with"
"RTN","KMPDUT4C",15,0)
 W !?7,"                         'SMITH'"
"RTN","KMPDUT4C",16,0)
 W !!!
"RTN","KMPDUT4C",17,0)
 D FTR^KMPDUTL4("Press <RET> to continue, '^' to exit Help",.OUT)
"RTN","KMPDUT4C",18,0)
 I 'OUT W !!! Q
"RTN","KMPDUT4C",19,0)
 W !!!
"RTN","KMPDUT4C",20,0)
HELPM ;help text for minus sign
"RTN","KMPDUT4C",21,0)
 W !?7,"You may remove entries that have been selected so far by"
"RTN","KMPDUT4C",22,0)
 W !?7,"entering a minus sign (-) before the entry to be removed"
"RTN","KMPDUT4C",23,0)
 W !
"RTN","KMPDUT4C",24,0)
 W !?7,"    Example:  '-JONES,JANE' - will remove the entry 'JONES,JANE'"
"RTN","KMPDUT4C",25,0)
 W !?7,"                              from the array"
"RTN","KMPDUT4C",26,0)
 W !?7,"              '-SMITH*' - will remove all entries beginning with"
"RTN","KMPDUT4C",27,0)
 W !?7,"                          'SMITH' from the array"
"RTN","KMPDUT4C",28,0)
 W !
"RTN","KMPDUT4C",29,0)
 W !?7,"     ************************************************"
"RTN","KMPDUT4C",30,0)
 W !?7,"     *** It is important to note that using the   ***"
"RTN","KMPDUT4C",31,0)
 W !?7,"     *** minus sign (-) only removes entries from ***"
"RTN","KMPDUT4C",32,0)
 W !?7,"     *** the array storing the selected entries,  ***"
"RTN","KMPDUT4C",33,0)
 W !?7,"     *** it DOES NOT remove any entries from the  ***"
"RTN","KMPDUT4C",34,0)
 W !?7,"     *** look-up file                             ***"
"RTN","KMPDUT4C",35,0)
 W !?7,"     ************************************************"
"RTN","KMPDUT4C",36,0)
 W !!!
"RTN","KMPDUT4C",37,0)
 D FTR^KMPDUTL4("Press <RET> to continue: ")
"RTN","KMPDUT4C",38,0)
 W !!!
"RTN","KMPDUT4C",39,0)
 Q
"RTN","KMPDUT4C",40,0)
MINUS(X) ;de-select entries
"RTN","KMPDUT4C",41,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4C",42,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4C",43,0)
 Q:'$D(@ARRAY)  S X=$G(X) Q:$E(X)'="-"  S X=$E(X,2,$L(X))
"RTN","KMPDUT4C",44,0)
 I X="*" K @ARRAY Q
"RTN","KMPDUT4C",45,0)
 I X["*" S STR=$E(X,1,($F(X,"*")-2))
"RTN","KMPDUT4C",46,0)
 E  S STR=X
"RTN","KMPDUT4C",47,0)
 Q:STR']""  S STR1=STR
"RTN","KMPDUT4C",48,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4C",49,0)
 ;  if exact match on STR1
"RTN","KMPDUT4C",50,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4C",51,0)
 I SORT=1,($D(@ARRAY@(STR1))) D  Q
"RTN","KMPDUT4C",52,0)
 .K @ARRAY@(STR1) S @ARRAY@(0)=$G(@ARRAY@(0))-1 W:$X>73 !?7 W "."
"RTN","KMPDUT4C",53,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4C",54,0)
 ;  if wildcard
"RTN","KMPDUT4C",55,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT4C",56,0)
 I SORT=1,(X["*") D  Q
"RTN","KMPDUT4C",57,0)
 .F  S STR1=$O(@ARRAY@(STR1)) Q:$E(STR1,1,$L(STR))'=STR  D 
"RTN","KMPDUT4C",58,0)
 ..K @ARRAY@(STR1) S @ARRAY@(0)=$G(@ARRAY@(0))-1 W:$X>73 !?7 W "."
"RTN","KMPDUT4C",59,0)
 Q:SORT
"RTN","KMPDUT4C",60,0)
 I X'["*" S ASKI=0 D  Q
"RTN","KMPDUT4C",61,0)
 .F  S ASKI=$O(@ARRAY@(ASKI)) Q:'ASKI  I @ARRAY@(ASKI)=STR1 D 
"RTN","KMPDUT4C",62,0)
 ..K @ARRAY@(ASKI) S @ARRAY@(0)=$G(@ARRAY@(0))-1 W:$X>73 !?7 W "."
"RTN","KMPDUT4C",63,0)
 I X["*" S ASKI=0 D  Q
"RTN","KMPDUT4C",64,0)
 .F  S ASKI=$O(@ARRAY@(ASKI)) Q:'ASKI  I $E(@ARRAY@(ASKI),1,$L(STR))=STR D 
"RTN","KMPDUT4C",65,0)
 ..K @ARRAY@(ASKI) S @ARRAY@(0)=$G(@ARRAY@(0))-1 W:$X>73 !?7 W "."
"RTN","KMPDUT4C",66,0)
 Q
"RTN","KMPDUT5")
0^37^B34870565
"RTN","KMPDUT5",1,0)
KMPDUT5 ;OAK/RAK - CM Tools Utility Text Display ;2/17/04  10:49
"RTN","KMPDUT5",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUT5",3,0)
 ;
"RTN","KMPDUT5",4,0)
DISPLAY(KMPDARRY,KMPDMRGN,KMPDNW,KMPDCLR,KMPDBX) ;display text
"RTN","KMPDUT5",5,0)
 ;-------------------------------------------------------------------
"RTN","KMPDUT5",6,0)
 ;  If there is more than one page (screen) of text this api
"RTN","KMPDUT5",7,0)
 ;  allows the user to scroll back and forth between pages
"RTN","KMPDUT5",8,0)
 ;
"RTN","KMPDUT5",9,0)
 ;   KMPDARRY - global or local array that contains word processing text
"RTN","KMPDUT5",10,0)
 ;           example: "^ASKV(673700,12,11,"
"RTN","KMPDUT5",11,0)
 ;                    "TMP($J)"
"RTN","KMPDUT5",12,0)
 ;
"RTN","KMPDUT5",13,0)
 ;           the following is an example of how the array might be set
"RTN","KMPDUT5",14,0)
 ;           up:
"RTN","KMPDUT5",15,0)
 ;               KMPDARRY($J,0)=number of lines
"RTN","KMPDUT5",16,0)
 ;               KMPDARRY($J,1,0)=text to display
"RTN","KMPDUT5",17,0)
 ;               KMPDARRY($J,2,0)=text to display
"RTN","KMPDUT5",18,0)
 ;               KMPDARRY($J,3,0)=text to display
"RTN","KMPDUT5",19,0)
 ;               KMPDARRY($J...
"RTN","KMPDUT5",20,0)
 ;
"RTN","KMPDUT5",21,0)
 ;
"RTN","KMPDUT5",22,0)
 ;            KMPDARRY must not be ^UTILITY($J,"W") - this routine uses
"RTN","KMPDUT5",23,0)
 ;            fileman to format text, therefore ^UTILITY($J,"W") is
"RTN","KMPDUT5",24,0)
 ;            used and then killed when routine complete
"RTN","KMPDUT5",25,0)
 ;
"RTN","KMPDUT5",26,0)
 ;  optional parameters
"RTN","KMPDUT5",27,0)
 ;
"RTN","KMPDUT5",28,0)
 ; KMPDMRGN - margins for display of text in 4 up-arrow pieces
"RTN","KMPDUT5",29,0)
 ;           TM - top margin of screen area...... piece 1
"RTN","KMPDUT5",30,0)
 ;           BM - bottom margin of screen area... piece 2
"RTN","KMPDUT5",31,0)
 ;           LM - left margin.................... piece 3
"RTN","KMPDUT5",32,0)
 ;           RM - right margin................... piece 4
"RTN","KMPDUT5",33,0)
 ;                        *** NOTE ***
"RTN","KMPDUT5",34,0)
 ;           if TM and BM are not passed the display will default to
"RTN","KMPDUT5",35,0)
 ;           full screen (0 to 22)
"RTN","KMPDUT5",36,0)
 ;
"RTN","KMPDUT5",37,0)
 ;    KMPDNW - nowrap    0 - nowrap (display as entered)
"RTN","KMPDUT5",38,0)
 ;                     1 - wrap
"RTN","KMPDUT5",39,0)
 ;
"RTN","KMPDUT5",40,0)
 ;   KMPDCLR - clear screen when exiting
"RTN","KMPDUT5",41,0)
 ;           0 - clear screen
"RTN","KMPDUT5",42,0)
 ;           1 - do not clear screen
"RTN","KMPDUT5",43,0)
 ;
"RTN","KMPDUT5",44,0)
 ;    KMPDBX - this variable is in 2 up-arrow pieces
"RTN","KMPDUT5",45,0)
 ;           piece 1: 0 - do not draw a box (or window) around text
"RTN","KMPDUT5",46,0)
 ;                    1 - draw box
"RTN","KMPDUT5",47,0)
 ;           piece 2: header (if any) for box
"RTN","KMPDUT5",48,0)
 ;
"RTN","KMPDUT5",49,0)
 ;  other variables
"RTN","KMPDUT5",50,0)
 ;
"RTN","KMPDUT5",51,0)
 ;      FT - top margin for footer
"RTN","KMPDUT5",52,0)
 ;      FB - bottom margin for footer
"RTN","KMPDUT5",53,0)
 ;  LENGTH - length of text to display (RM-LM)
"RTN","KMPDUT5",54,0)
 ;      OS - operating system
"RTN","KMPDUT5",55,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUT5",56,0)
 ;
"RTN","KMPDUT5",57,0)
 Q:'$D(KMPDARRY)
"RTN","KMPDUT5",58,0)
 ;
"RTN","KMPDUT5",59,0)
 S KMPDMRGN=$G(KMPDMRGN),KMPDNW=+$G(KMPDNW)
"RTN","KMPDUT5",60,0)
 S KMPDCLR=+$G(KMPDCLR),KMPDBX=$G(KMPDBX)
"RTN","KMPDUT5",61,0)
 ; place array in correct format
"RTN","KMPDUT5",62,0)
 I $E(KMPDARRY,$L(KMPDARRY))="," S $E(KMPDARRY,$L(KMPDARRY))=")"
"RTN","KMPDUT5",63,0)
 I $E(KMPDARRY,$L(KMPDARRY))'=")" S KMPDARRY=KMPDARRY_")"
"RTN","KMPDUT5",64,0)
 I $E(KMPDARRY)'="^" I $E(KMPDARRY,$L(KMPDARRY)-1,$L(KMPDARRY))="()" D
"RTN","KMPDUT5",65,0)
 .S KMPDARRY=$E(KMPDARRY,1,$L(KMPDARRY)-2)
"RTN","KMPDUT5",66,0)
 ;
"RTN","KMPDUT5",67,0)
 N ASKI,KMPDOUT,BM,CLRSCR,FB,FT,I,LEN,LENGTH,LINES,LM,OS,PAGE,PAGES,RM,TM
"RTN","KMPDUT5",68,0)
 N DIR,DIW,DIWF,DIWI,DIWL,DIWR,DIWT,DIWTC,DIWX,DX,DY,X,Y,Z
"RTN","KMPDUT5",69,0)
 N IOBM,IOECH,IOELALL,IOELEOL,IORVON,IORVOFF,IOTM,IOSTBM
"RTN","KMPDUT5",70,0)
 ;
"RTN","KMPDUT5",71,0)
 ; set up special terminal variables
"RTN","KMPDUT5",72,0)
 S X="IOECH;IOELALL;IOELEOL;IORVON;IORVOFF;IOSTBM" D ENDR^%ZISS
"RTN","KMPDUT5",73,0)
 S OS=$G(^%ZOSF("OS"))
"RTN","KMPDUT5",74,0)
 S TM=+$P(KMPDMRGN,U),LM=+$P(KMPDMRGN,U,3),RM=+$P(KMPDMRGN,U,4)
"RTN","KMPDUT5",75,0)
 S BM=+$P(KMPDMRGN,U,2) S:'BM!(BM>22) BM=$S(OS["MSM":22,1:23)
"RTN","KMPDUT5",76,0)
 S:'RM RM=IOM S FB=BM,FT=(FB-1),BM=(FB-2),LENGTH=(RM-LM)
"RTN","KMPDUT5",77,0)
 S DIWL=LM,DIWR=$S(RM:RM,1:IOM),KMPDNW=$S(KMPDNW=1:"",1:"N")
"RTN","KMPDUT5",78,0)
 ; if full screen
"RTN","KMPDUT5",79,0)
 I LM=0,(RM=IOM) S CLRSCR="F DY=BM:-1:TM X IOXY W IOELALL,!"
"RTN","KMPDUT5",80,0)
 ; else partial screen
"RTN","KMPDUT5",81,0)
 E  S CLRSCR="S DX=LM F DY=BM:-1:TM X IOXY W $J("" "",LENGTH)"
"RTN","KMPDUT5",82,0)
 ;
"RTN","KMPDUT5",83,0)
 D LOOP
"RTN","KMPDUT5",84,0)
 ;
"RTN","KMPDUT5",85,0)
 K ^UTILITY($J,"W")
"RTN","KMPDUT5",86,0)
 ;
"RTN","KMPDUT5",87,0)
 Q
"RTN","KMPDUT5",88,0)
 ;
"RTN","KMPDUT5",89,0)
LOOP ;-- main loop
"RTN","KMPDUT5",90,0)
 ;
"RTN","KMPDUT5",91,0)
 ; use fileman to format text
"RTN","KMPDUT5",92,0)
 K ^UTILITY($J,"W") S DIWF=KMPDNW,X=""
"RTN","KMPDUT5",93,0)
 F I=0:0 S I=$O(@KMPDARRY@(I)) Q:'I  D
"RTN","KMPDUT5",94,0)
 .Q:'$D(@KMPDARRY@(I,0))  S X=@KMPDARRY@(I,0)
"RTN","KMPDUT5",95,0)
 .I KMPDNW="N" S X=$E(X,1,LENGTH)
"RTN","KMPDUT5",96,0)
 .D ^DIWP
"RTN","KMPDUT5",97,0)
 ; quit if no data to display
"RTN","KMPDUT5",98,0)
 Q:'$D(^UTILITY($J,"W",DIWL))  S LINES=$G(^(DIWL))
"RTN","KMPDUT5",99,0)
 ; check for last line equal to null
"RTN","KMPDUT5",100,0)
 I $G(^UTILITY($J,"W",DIWL,LINES,0))="" S LINES=LINES-1
"RTN","KMPDUT5",101,0)
 S LEN=BM-TM+1,PAGES=LINES\LEN I LINES#LEN S PAGES=PAGES+1
"RTN","KMPDUT5",102,0)
 ;
"RTN","KMPDUT5",103,0)
 ; set up the PAGES() array -  first piece = starting line
"RTN","KMPDUT5",104,0)
 ;                            second piece = ending line
"RTN","KMPDUT5",105,0)
 F I=1:1:PAGES D
"RTN","KMPDUT5",106,0)
 .S PAGES(I)=$S(I=1:1,1:(I*LEN-LEN+1))
"RTN","KMPDUT5",107,0)
 .I I=1 S $P(PAGES(I),U,2)=$S(LINES<LEN:LINES,1:LEN) Q
"RTN","KMPDUT5",108,0)
 .S $P(PAGES(I),U,2)=(I*LEN)
"RTN","KMPDUT5",109,0)
 ;
"RTN","KMPDUT5",110,0)
 ; if KMPDBX draw box around text
"RTN","KMPDUT5",111,0)
 ;I KMPDBX D KMPDBX^KMPDUTxxx((TM-1),(LM-1),(RM+1),FB,$P(KMPDBX,U,2))
"RTN","KMPDUT5",112,0)
 S DX=LM,DY=TM,PAGE=1,KMPDOUT=0
"RTN","KMPDUT5",113,0)
 ;
"RTN","KMPDUT5",114,0)
 ; main loop that displays text to the screen and prompts
"RTN","KMPDUT5",115,0)
 ; for the next page or previous page (if appropriate)
"RTN","KMPDUT5",116,0)
 F  D  Q:KMPDOUT
"RTN","KMPDUT5",117,0)
 .F I=$P(PAGES(PAGE),U):1:$P(PAGES(PAGE),U,2) D
"RTN","KMPDUT5",118,0)
 ..Q:'$D(^UTILITY($J,"W",DIWL,I,0))
"RTN","KMPDUT5",119,0)
 ..X IOXY W ^UTILITY($J,"W",DIWL,I,0),! S DY=DY+1
"RTN","KMPDUT5",120,0)
 .D FTR S DY=DY+1 Q:KMPDOUT  X CLRSCR
"RTN","KMPDUT5",121,0)
 ; clear screen if no KMPDCLR
"RTN","KMPDUT5",122,0)
 I 'KMPDCLR X CLRSCR F DY=22,23 X IOXY W IOELALL
"RTN","KMPDUT5",123,0)
 ;
"RTN","KMPDUT5",124,0)
 Q
"RTN","KMPDUT5",125,0)
 ;
"RTN","KMPDUT5",126,0)
FTR ;--footer
"RTN","KMPDUT5",127,0)
 ;
"RTN","KMPDUT5",128,0)
 N READ,READX S READ=""
"RTN","KMPDUT5",129,0)
 F DY=(FB-1):-1:(FB-3) X IOXY W !
"RTN","KMPDUT5",130,0)
 S DX=LM,DY=FT X IOXY W $$REPEAT^XLFSTR("_",LENGTH) ; I OS["MSM" W !
"RTN","KMPDUT5",131,0)
 S DX=LM,DY=FB X IOXY
"RTN","KMPDUT5",132,0)
 I PAGES=1 S READ="Q",READ("A")="Press <RET> to continue"
"RTN","KMPDUT5",133,0)
 I PAGES>1 S READ="Q" D 
"RTN","KMPDUT5",134,0)
 .I PAGE<PAGES S READ=READ_"N"
"RTN","KMPDUT5",135,0)
 .I PAGE>1 S READ=READ_"P"
"RTN","KMPDUT5",136,0)
 ;
"RTN","KMPDUT5",137,0)
 ; READ("A") - the prompt that appears in footer
"RTN","KMPDUT5",138,0)
 ; if LENGTH>44 characters: [Q]uit, [N]ext screen, [P]revious Screen:
"RTN","KMPDUT5",139,0)
 ; if LENGTH>28 characters: [Q]uit, [N]ext, [P]revious:
"RTN","KMPDUT5",140,0)
 ; else....................: [Q], [N], [P]
"RTN","KMPDUT5",141,0)
 I $G(READ("A"))']"" D 
"RTN","KMPDUT5",142,0)
 .I READ["Q" S READ("A")="[Q]" D 
"RTN","KMPDUT5",143,0)
 ..I LENGTH>28 S READ("A")=READ("A")_"uit"
"RTN","KMPDUT5",144,0)
 .I READ["N" S READ("A")=READ("A")_", [N]" D 
"RTN","KMPDUT5",145,0)
 ..I LENGTH>44 S READ("A")=READ("A")_"ext Screen" Q
"RTN","KMPDUT5",146,0)
 ..I LENGTH>28 S READ("A")=READ("A")_"ext"
"RTN","KMPDUT5",147,0)
 .I READ["P" S READ("A")=READ("A")_", [P]" D 
"RTN","KMPDUT5",148,0)
 ..I LENGTH>44 S READ("A")=READ("A")_"revious Screen" Q
"RTN","KMPDUT5",149,0)
 ..I LENGTH>28 S READ("A")=READ("A")_"revious"
"RTN","KMPDUT5",150,0)
 S READ("A")=READ("A")_": "
"RTN","KMPDUT5",151,0)
 ;
"RTN","KMPDUT5",152,0)
 ;-footer loop
"RTN","KMPDUT5",153,0)
 D  Q:KMPDOUT
"RTN","KMPDUT5",154,0)
 .S DX=LM,DY=FB X IOXY W $J(" ",$S(LENGTH<80:LENGTH,1:(LENGTH-1)))
"RTN","KMPDUT5",155,0)
 .I OS["MSM" W !
"RTN","KMPDUT5",156,0)
 .I OS["MSM" W ! F DY=(FB-1):-1:(FB-3) X IOXY W !
"RTN","KMPDUT5",157,0)
 .;
"RTN","KMPDUT5",158,0)
 .; if LENGTH>55 characters print pages
"RTN","KMPDUT5",159,0)
 .I LENGTH>55 D 
"RTN","KMPDUT5",160,0)
 ..S DX=(RM-15),DY=FB X IOXY W " Page ",PAGE," of ",PAGES," "
"RTN","KMPDUT5",161,0)
 ..I OS["MSM" W !
"RTN","KMPDUT5",162,0)
 .S DX=LM,DY=FB X IOXY W READ("A")
"RTN","KMPDUT5",163,0)
 .R READX:DTIME S:'$T READX="Q" S READX=$$UP^XLFSTR(READX)
"RTN","KMPDUT5",164,0)
 .I READX="Q"!(READX="^")!(READ="E") S KMPDOUT=1 Q
"RTN","KMPDUT5",165,0)
 .I READX="N",(READ["N") S PAGE=PAGE+1 Q
"RTN","KMPDUT5",166,0)
 .I READX="P",(READ["P") S PAGE=PAGE-1 Q
"RTN","KMPDUT5",167,0)
 .I READX["?" D HELP Q
"RTN","KMPDUT5",168,0)
 .;
"RTN","KMPDUT5",169,0)
 .; end of the screen - this just scrolls up a couple of lines and
"RTN","KMPDUT5",170,0)
 .; seems to reset the screen coordinates for MSM
"RTN","KMPDUT5",171,0)
 .I OS["MSM" F DY=(BM-1):-1:(BM-3) X IOXY W !
"RTN","KMPDUT5",172,0)
 .W $C(7)
"RTN","KMPDUT5",173,0)
 ;
"RTN","KMPDUT5",174,0)
 Q
"RTN","KMPDUT5",175,0)
 ;
"RTN","KMPDUT5",176,0)
HELP ;-- clear screen, print help text, repaint screen
"RTN","KMPDUT5",177,0)
 ;
"RTN","KMPDUT5",178,0)
 N I,READX X CLRSCR S DY=TM,DX=$S(DIWL>7:DIWL,1:7) X IOXY
"RTN","KMPDUT5",179,0)
 F I=1:1:$L(READ) S DY=DY+1 X IOXY D
"RTN","KMPDUT5",180,0)
 .I $E(READ,I)="E" W "Enter 'E' (or '^') to exit.",!
"RTN","KMPDUT5",181,0)
 .I $E(READ,I)="N" W "Enter 'N' to advance to the next screen.",!
"RTN","KMPDUT5",182,0)
 .I $E(READ,I)="P" W "Enter 'P' to backup to the previous screen.",!
"RTN","KMPDUT5",183,0)
 S DY=BM X IOXY R "Press <RET> to continue: ",READX:DTIME
"RTN","KMPDUT5",184,0)
 ; repaint screen
"RTN","KMPDUT5",185,0)
 X CLRSCR S DY=(TM-1)
"RTN","KMPDUT5",186,0)
 F I=$P(PAGES(PAGE),U):1:$P(PAGES(PAGE),U,2) D
"RTN","KMPDUT5",187,0)
 .Q:'$D(^UTILITY($J,"W",DIWL,I,0))
"RTN","KMPDUT5",188,0)
 .S DX=DIWL,DY=DY+1 X IOXY W ^UTILITY($J,"W",DIWL,I,0),!
"RTN","KMPDUT5",189,0)
 ;
"RTN","KMPDUT5",190,0)
 Q
"RTN","KMPDUTL")
0^30^B9990640
"RTN","KMPDUTL",1,0)
KMPDUTL ;OAK/RAK - CM Tools Utility ;2/17/04  10:50
"RTN","KMPDUTL",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUTL",3,0)
 ;;^2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUTL",4,0)
 ;
"RTN","KMPDUTL",5,0)
QUEBKG(KMPDOPT,KMPDTIME,KMPDFREQ,KMPDDEL) ;-- queue background job
"RTN","KMPDUTL",6,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL",7,0)
 ; KMPDOPT.... Option name to queue (free text name in .01 field of 
"RTN","KMPDUTL",8,0)
 ;                                   OPTION file)
"RTN","KMPDUTL",9,0)
 ; KMPDTIME... Date/time to queue option (T@1400, etc)
"RTN","KMPDUTL",10,0)
 ; KMPDFREQ... Scheduling frequency (1D, etc)
"RTN","KMPDUTL",11,0)
 ; KMPDDEL.... Delete option if it already exists in file 19.2
"RTN","KMPDUTL",12,0)
 ;              0 - do not delete (quit if already scheduled)
"RTN","KMPDUTL",13,0)
 ;              1 - delete if already in file 19.2
"RTN","KMPDUTL",14,0)
 ;
"RTN","KMPDUTL",15,0)
 ; This API will queue an option from file #19 (OPTION) to run in file
"RTN","KMPDUTL",16,0)
 ; 19.2 (OPTION SCHEDULE).
"RTN","KMPDUTL",17,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL",18,0)
 Q:$G(KMPDOPT)=""
"RTN","KMPDUTL",19,0)
 Q:$G(KMPDTIME)=""
"RTN","KMPDUTL",20,0)
 Q:$G(KMPDFREQ)=""
"RTN","KMPDUTL",21,0)
 S KMPDDEL=+$G(KMPDDEL)
"RTN","KMPDUTL",22,0)
 N DA,DIFROM,DIK,FDA,ERROR,IEN,IEN1,IENZ,TEXT,X,Y,Z
"RTN","KMPDUTL",23,0)
 ; Newing DIFROM will force reschedule when installing from KIDS
"RTN","KMPDUTL",24,0)
 S:'$G(DT) DT=$$DT^XLFDT
"RTN","KMPDUTL",25,0)
 ; change to internal format
"RTN","KMPDUTL",26,0)
 D FMDTI^KMPDU(.Z,KMPDTIME)
"RTN","KMPDUTL",27,0)
 Q:Z(0)="^"!(Z(0)="")
"RTN","KMPDUTL",28,0)
 S KMPDTIME=Z(0) K Z
"RTN","KMPDUTL",29,0)
 S TEXT=KMPDOPT
"RTN","KMPDUTL",30,0)
 ; quit if not in file 19
"RTN","KMPDUTL",31,0)
 S IEN=$O(^DIC(19,"B",TEXT,0)) Q:'IEN
"RTN","KMPDUTL",32,0)
 S IEN1=$O(^DIC(19.2,"B",IEN,0))
"RTN","KMPDUTL",33,0)
 ; quit if already in file 19.2 and not KMPDDEL
"RTN","KMPDUTL",34,0)
 Q:IEN1&('KMPDDEL)
"RTN","KMPDUTL",35,0)
 ; delete if in file 19.2
"RTN","KMPDUTL",36,0)
 I IEN1 S DIK="^DIC(19.2,",DA=IEN1 D ^DIK
"RTN","KMPDUTL",37,0)
 ; add entry
"RTN","KMPDUTL",38,0)
 S FDA($J,19.2,"+1,",.01)=IEN
"RTN","KMPDUTL",39,0)
 ; queued to run at what time
"RTN","KMPDUTL",40,0)
 S FDA($J,19.2,"+1,",2)=KMPDTIME
"RTN","KMPDUTL",41,0)
 ; rescheduling frequency.
"RTN","KMPDUTL",42,0)
 S FDA($J,19.2,"+1,",6)=KMPDFREQ
"RTN","KMPDUTL",43,0)
 D UPDATE^DIE("","FDA($J)",.IENZ,"ERROR")
"RTN","KMPDUTL",44,0)
 I $D(ERROR) D MSG^DIALOG("W","",60,10,"ERROR")
"RTN","KMPDUTL",45,0)
 S IEN1=$O(^DIC(19.2,"B",IEN,0))
"RTN","KMPDUTL",46,0)
 I '$G(^DIC(19.2,+IEN1,1)) D 
"RTN","KMPDUTL",47,0)
 .D MES^XPDUTL("     ERROR - Not able to reschedule "_KMPDOPT)
"RTN","KMPDUTL",48,0)
 .D MES^XPDUTL("     Use 'Schedule/Unschedule Options' [XUTM SCHEDULE] to reschedule.")
"RTN","KMPDUTL",49,0)
 ;
"RTN","KMPDUTL",50,0)
 Q
"RTN","KMPDUTL",51,0)
 ;
"RTN","KMPDUTL",52,0)
VERSION() ;-- extrinsic - return current version.
"RTN","KMPDUTL",53,0)
 Q $P($T(+2^KMPDUTL),";",3)_"^"_$P($T(+2^KMPDUTL),";",5)
"RTN","KMPDUTL",54,0)
 ;
"RTN","KMPDUTL",55,0)
VRSNGET(KMPDAPPL) ;-- extrinsic function - get version^patches
"RTN","KMPDUTL",56,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL",57,0)
 ; KMPDAPPL... application:
"RTN","KMPDUTL",58,0)
 ;              0 - CM Tools
"RTN","KMPDUTL",59,0)
 ;              1 - SAGG
"RTN","KMPDUTL",60,0)
 ;              2 - RUM
"RTN","KMPDUTL",61,0)
 ;
"RTN","KMPDUTL",62,0)
 ; Return: Version^Patch^VersionInstallDate^PatchInstallDate
"RTN","KMPDUTL",63,0)
 ;         null = no application
"RTN","KMPDUTL",64,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL",65,0)
 ;
"RTN","KMPDUTL",66,0)
 Q:$G(KMPDAPPL)="" ""
"RTN","KMPDUTL",67,0)
 Q:KMPDAPPL<0!(KMPDAPPL>2) ""
"RTN","KMPDUTL",68,0)
 ;
"RTN","KMPDUTL",69,0)
 N DATA,VERSION S VERSION=""
"RTN","KMPDUTL",70,0)
 ;
"RTN","KMPDUTL",71,0)
 ; cm tools
"RTN","KMPDUTL",72,0)
 I KMPDAPPL=0 D 
"RTN","KMPDUTL",73,0)
 .S DATA=$G(^KMPD(8973,1,KMPDAPPL))
"RTN","KMPDUTL",74,0)
 .S VERSION=$P(DATA,U,2)_U_$P(DATA,U,4)_U_$P(DATA,U,3)_U_$P(DATA,U,5)
"RTN","KMPDUTL",75,0)
 ;
"RTN","KMPDUTL",76,0)
 ; all other applications
"RTN","KMPDUTL",77,0)
 E  D 
"RTN","KMPDUTL",78,0)
 .S DATA=$G(^KMPD(8973,1,KMPDAPPL))
"RTN","KMPDUTL",79,0)
 .S VERSION=$P(DATA,U)_U_$P(DATA,U,3)_U_$P(DATA,U,2)_U_$P(DATA,U,4)
"RTN","KMPDUTL",80,0)
 ;
"RTN","KMPDUTL",81,0)
 Q VERSION
"RTN","KMPDUTL",82,0)
 ;
"RTN","KMPDUTL",83,0)
PTCHINFO ; -- patch information: routine name ^ current version ^ current patch(es)
"RTN","KMPDUTL",84,0)
 ;;KMPDBD01^2.0
"RTN","KMPDUTL",85,0)
 ;;KMPDHU01^2.0
"RTN","KMPDUTL",86,0)
 ;;KMPDHU02^2.0
"RTN","KMPDUTL",87,0)
 ;;KMPDHU03^2.0
"RTN","KMPDUTL",88,0)
 ;;KMPDHUA^2.0
"RTN","KMPDUTL",89,0)
 ;;KMPDSS^2.0
"RTN","KMPDUTL",90,0)
 ;;KMPDSSA^2.0
"RTN","KMPDUTL",91,0)
 ;;KMPDTM^2.0
"RTN","KMPDUTL",92,0)
 ;;KMPDTP1^2.0
"RTN","KMPDUTL",93,0)
 ;;KMPDTP2^2.0
"RTN","KMPDUTL",94,0)
 ;;KMPDTP3^2.0
"RTN","KMPDUTL",95,0)
 ;;KMPDTP4^2.0
"RTN","KMPDUTL",96,0)
 ;;KMPDTP5^2.0
"RTN","KMPDUTL",97,0)
 ;;KMPDTP6^2.0
"RTN","KMPDUTL",98,0)
 ;;KMPDTP7^2.0
"RTN","KMPDUTL",99,0)
 ;;KMPDTU01^2.0
"RTN","KMPDUTL",100,0)
 ;;KMPDTU02^2.0
"RTN","KMPDUTL",101,0)
 ;;KMPDTU10^2.0
"RTN","KMPDUTL",102,0)
 ;;KMPDTU11^2.0
"RTN","KMPDUTL",103,0)
 ;;KMPDU^2.0
"RTN","KMPDUTL",104,0)
 ;;KMPDU1^2.0
"RTN","KMPDUTL",105,0)
 ;;KMPDU2^2.0
"RTN","KMPDUTL",106,0)
 ;;KMPDU3^2.0
"RTN","KMPDUTL",107,0)
 ;;KMPDU4^2.0
"RTN","KMPDUTL",108,0)
 ;;KMPDU5^2.0
"RTN","KMPDUTL",109,0)
 ;;KMPDU6^2.0
"RTN","KMPDUTL",110,0)
 ;;KMPDU11^2.0
"RTN","KMPDUTL",111,0)
 ;;KMPDUG^2.0
"RTN","KMPDUTL",112,0)
 ;;KMPDUG1^2.0
"RTN","KMPDUTL",113,0)
 ;;KMPDUG2^2.0
"RTN","KMPDUTL",114,0)
 ;;KMPDUGV^2.0
"RTN","KMPDUTL",115,0)
 ;;KMPDUT^2.0
"RTN","KMPDUTL",116,0)
 ;;KMPDUT2^2.0
"RTN","KMPDUTL",117,0)
 ;;KMPDUT4^2.0
"RTN","KMPDUTL",118,0)
 ;;KMPDUT4A^2.0
"RTN","KMPDUTL",119,0)
 ;;KMPDUT4B^2.0
"RTN","KMPDUTL",120,0)
 ;;KMPDUT4C^2.0
"RTN","KMPDUTL",121,0)
 ;;KMPDUT5^2.0
"RTN","KMPDUTL",122,0)
 ;;KMPDUTL^2.0
"RTN","KMPDUTL",123,0)
 ;;KMPDUTL1^2.0
"RTN","KMPDUTL",124,0)
 ;;KMPDUTL2^2.0
"RTN","KMPDUTL",125,0)
 ;;KMPDUTL3^2.0
"RTN","KMPDUTL",126,0)
 ;;KMPDUTL4^2.0
"RTN","KMPDUTL",127,0)
 ;;KMPDUTL5^2.0
"RTN","KMPDUTL",128,0)
 ;;KMPDUTL6^2.0
"RTN","KMPDUTL1")
0^31^B21830311
"RTN","KMPDUTL1",1,0)
KMPDUTL1 ;OAK/RAK,KAK - CM TOOLS Utilities ;2/17/04  10:51
"RTN","KMPDUTL1",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUTL1",3,0)
 ;
"RTN","KMPDUTL1",4,0)
CONT(KMPDEXT)  ;-- function displays 'return to continue' message at bottom of page
"RTN","KMPDUTL1",5,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUTL1",6,0)
 ; KMPDEXT 0 = do not show 'to exit' text
"RTN","KMPDUTL1",7,0)
 ;         1 = show 'to exit' text
"RTN","KMPDUTL1",8,0)
 ;
"RTN","KMPDUTL1",9,0)
 ; Return: 0 = continue
"RTN","KMPDUTL1",10,0)
 ;         1 = quit
"RTN","KMPDUTL1",11,0)
 ;--------------------------------------------------------------------
"RTN","KMPDUTL1",12,0)
 ;
"RTN","KMPDUTL1",13,0)
 N DIR,X,Y
"RTN","KMPDUTL1",14,0)
 ;
"RTN","KMPDUTL1",15,0)
 S KMPDEXT=+$G(KMPDEXT)
"RTN","KMPDUTL1",16,0)
 F  Q:$Y>(IOSL-3)  W !
"RTN","KMPDUTL1",17,0)
 S DIR(0)="EA"
"RTN","KMPDUTL1",18,0)
 S DIR("A")="Press RETURN to continue"_$S(KMPDEXT:" or '^' to exit: ",1:": ")
"RTN","KMPDUTL1",19,0)
 D ^DIR
"RTN","KMPDUTL1",20,0)
 Q +$G(Y)
"RTN","KMPDUTL1",21,0)
 ;
"RTN","KMPDUTL1",22,0)
SYSINFO() ;-- returns system information
"RTN","KMPDUTL1",23,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL1",24,0)
 ; Returns:
"RTN","KMPDUTL1",25,0)
 ;         "^" piece 1 - type of M platform
"RTN","KMPDUTL1",26,0)
 ;         "^" piece 2 - $ZV => name and version of M system
"RTN","KMPDUTL1",27,0)
 ;         "^" piece 3 - operating system version
"RTN","KMPDUTL1",28,0)
 ;
"RTN","KMPDUTL1",29,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL1",30,0)
 ;
"RTN","KMPDUTL1",31,0)
 N MPLTF,OSVER,SYSINFO
"RTN","KMPDUTL1",32,0)
 ;
"RTN","KMPDUTL1",33,0)
 S MPLTF=$$MPLTF(),OSVER=$$OSVER(MPLTF)
"RTN","KMPDUTL1",34,0)
 S SYSINFO=MPLTF_U_$ZV_U_OSVER
"RTN","KMPDUTL1",35,0)
 Q SYSINFO
"RTN","KMPDUTL1",36,0)
 ;
"RTN","KMPDUTL1",37,0)
MPLTF() ;-- returns the type of M platform
"RTN","KMPDUTL1",38,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL1",39,0)
 ; Returns:  DSM    for DSM platform
"RTN","KMPDUTL1",40,0)
 ;           CVMS   for Cache for OpenVMS platform
"RTN","KMPDUTL1",41,0)
 ;           CWINNT for Cache for Windows NT platform
"RTN","KMPDUTL1",42,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL1",43,0)
 ;
"RTN","KMPDUTL1",44,0)
 N MPLTF,ZV
"RTN","KMPDUTL1",45,0)
 ;
"RTN","KMPDUTL1",46,0)
 S ZV=$ZV
"RTN","KMPDUTL1",47,0)
 S MPLTF=$S(ZV["DSM":"DSM",ZV["VMS":"CVMS",ZV["Windows":"CWINNT",1:"UNK")
"RTN","KMPDUTL1",48,0)
 Q MPLTF
"RTN","KMPDUTL1",49,0)
 ;
"RTN","KMPDUTL1",50,0)
OSVER(MPLTF) ;-- returns the operating system version
"RTN","KMPDUTL1",51,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL1",52,0)
 ; input: MPLTF = type of M platform
"RTN","KMPDUTL1",53,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL1",54,0)
 ;
"RTN","KMPDUTL1",55,0)
 I $G(MPLTF)="" Q ""
"RTN","KMPDUTL1",56,0)
 ;
"RTN","KMPDUTL1",57,0)
 I MPLTF["DSM" Q $ZC(%GETSYI,"VERSION")
"RTN","KMPDUTL1",58,0)
 I MPLTF["CVMS" Q $$CVMSVER^KMPDUTL5()
"RTN","KMPDUTL1",59,0)
 I MPLTF["CWINNT" Q $$CWNTVER^KMPDUTL5()
"RTN","KMPDUTL1",60,0)
 Q ""
"RTN","KMPDUTL1",61,0)
 ;
"RTN","KMPDUTL1",62,0)
TSKSTAT(OPT) ;-- status of scheduled task option
"RTN","KMPDUTL1",63,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL1",64,0)
 ; input  OPT = option name
"RTN","KMPDUTL1",65,0)
 ; output RTN = status code^literal condition
"RTN","KMPDUTL1",66,0)
 ;              ...^scheduled date@time (day)^numeric day-of-week
"RTN","KMPDUTL1",67,0)
 ;              ...^expanded scheduled frequency^short form frequency
"RTN","KMPDUTL1",68,0)
 ;              ...^task id^queued by^user status
"RTN","KMPDUTL1",69,0)
 ;
"RTN","KMPDUTL1",70,0)
 ; where status code^condition:
"RTN","KMPDUTL1",71,0)
 ;            = 0^SCHEDULED
"RTN","KMPDUTL1",72,0)
 ;            = 1^NOT SCHEDULED and 'scheduled date@time' will
"RTN","KMPDUTL1",73,0)
 ;                   be UNKNOWN and 'numeric day of week' will be -1
"RTN","KMPDUTL1",74,0)
 ;            = 2^NOT RESCHEDULED
"RTN","KMPDUTL1",75,0)
 ;            = 3^MISSING when OPT does not exist
"RTN","KMPDUTL1",76,0)
 ;            = 9^UNKNOWN
"RTN","KMPDUTL1",77,0)
 ;
"RTN","KMPDUTL1",78,0)
 ; where user status = ACTIVE or NOT ACTIVE
"RTN","KMPDUTL1",79,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL1",80,0)
 ;
"RTN","KMPDUTL1",81,0)
 N ACTV,DA,DAY,DOW,FREQ,RTN,TSK,TSKINFO,USER,Y
"RTN","KMPDUTL1",82,0)
 ;
"RTN","KMPDUTL1",83,0)
 S (DOW,FREQ)=-1
"RTN","KMPDUTL1",84,0)
 S RTN="9^UNKNOWN^NO DATE^-1^UNKNOWN^^^UNKNOWN^NOT ACTIVE"
"RTN","KMPDUTL1",85,0)
 ;
"RTN","KMPDUTL1",86,0)
 I '$D(^DIC(19,"B",OPT)) S $P(RTN,U,1,2)="3^MISSING" Q RTN
"RTN","KMPDUTL1",87,0)
 S DA=$O(^DIC(19,"B",OPT,0)),DA=+$O(^DIC(19.2,"B",DA,0))
"RTN","KMPDUTL1",88,0)
 S TSKINFO=$G(^DIC(19.2,DA,0)),(DOW,Y)=$P(TSKINFO,U,2),FREQ=$P(TSKINFO,U,6)
"RTN","KMPDUTL1",89,0)
 D:+Y DD^%DT S $P(TSKINFO,U,2)=Y
"RTN","KMPDUTL1",90,0)
 I DOW'="" S DAY=$$DOW^XLFDT(DOW),DOW=$$DOW^XLFDT(DOW,1)
"RTN","KMPDUTL1",91,0)
 S TSK=+$G(^DIC(19.2,+DA,1))
"RTN","KMPDUTL1",92,0)
 I (DOW="")!(TSK="") S $P(RTN,U,1,2)="1^NOT SCHEDULED"
"RTN","KMPDUTL1",93,0)
 E  D
"RTN","KMPDUTL1",94,0)
 .S $P(RTN,U,1,2)="0^SCHEDULED"
"RTN","KMPDUTL1",95,0)
 .I FREQ="" S $P(RTN,U,1,2)="2^NOT RESCHEDULED"
"RTN","KMPDUTL1",96,0)
 .; queued to run at
"RTN","KMPDUTL1",97,0)
 .S $P(RTN,U,3,4)=$S($P(TSKINFO,U,2)="":"NO DATE",1:$P(TSKINFO,U,2))_$S($D(DAY):" ("_DAY_")",1:"")_U_DOW
"RTN","KMPDUTL1",98,0)
 ; rescheduling frequency
"RTN","KMPDUTL1",99,0)
 I FREQ?1.3N1A D
"RTN","KMPDUTL1",100,0)
 .S $P(RTN,U,5,6)=+FREQ_" "_$S(FREQ["D":"day",FREQ["M":"month",1:FREQ)_$S(+FREQ>1:"s",1:"")_U_FREQ
"RTN","KMPDUTL1",101,0)
 E  S $P(RTN,U,5,6)=$S(FREQ="":"UNKNOWN",1:FREQ)_U_FREQ
"RTN","KMPDUTL1",102,0)
 ; task id
"RTN","KMPDUTL1",103,0)
 S $P(RTN,U,7)=TSK
"RTN","KMPDUTL1",104,0)
 ; find if the user is active
"RTN","KMPDUTL1",105,0)
 I TSK D
"RTN","KMPDUTL1",106,0)
 .S TSKINFO=$G(^%ZTSK(TSK,0))
"RTN","KMPDUTL1",107,0)
 .S USER=+$P(TSKINFO,U,3)
"RTN","KMPDUTL1",108,0)
 .S ACTV=+$$ACTIVE^XUSER(USER)
"RTN","KMPDUTL1",109,0)
 .; queued by
"RTN","KMPDUTL1",110,0)
 .S $P(RTN,U,8)=$P($G(^VA(200,USER,0)),U)
"RTN","KMPDUTL1",111,0)
 I $G(ACTV) S $P(RTN,U,9)="ACTIVE"
"RTN","KMPDUTL1",112,0)
 Q RTN
"RTN","KMPDUTL1",113,0)
 ;
"RTN","KMPDUTL1",114,0)
VERPTCH(PKG,RTNARRY)    ;-- returns current version and patch status of specified CM package
"RTN","KMPDUTL1",115,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL1",116,0)
 ; input PKG = 'D' for CM TOOLS
"RTN","KMPDUTL1",117,0)
 ;             'R' for RUM
"RTN","KMPDUTL1",118,0)
 ;             'S' for SAGG
"RTN","KMPDUTL1",119,0)
 ; Return array (passed by reference) in format:
"RTN","KMPDUTL1",120,0)
 ; output RTNARRY = -1 for error
"RTN","KMPDUTL1",121,0)
 ;        RTNARRY(0) = number of routines^total rtns ok^total rtns bad^total rtns missing
"RTN","KMPDUTL1",122,0)
 ;        RTNARRY(rtn name) = {0=good 1=bad 2=missing routine}^released version^released patch(es)^site version^site patch(es)
"RTN","KMPDUTL1",123,0)
 ;
"RTN","KMPDUTL1",124,0)
 ; This code will reference line tag PTCHINFO^KMP_pkg_UTL for the
"RTN","KMPDUTL1",125,0)
 ; following patch information text starting at PTCHINFO+1:
"RTN","KMPDUTL1",126,0)
 ;
"RTN","KMPDUTL1",127,0)
 ;        ;;routine name ^ current version ^ current patch(es)
"RTN","KMPDUTL1",128,0)
 ;
"RTN","KMPDUTL1",129,0)
 ; Example:    
"RTN","KMPDUTL1",130,0)
 ;           PATCHINFO  ;-- patch information
"RTN","KMPDUTL1",131,0)
 ;                      ;;KMPSGE^1.8^**1,2**
"RTN","KMPDUTL1",132,0)
 ;                      ;;KMPSUTL^1.8^**1,2**
"RTN","KMPDUTL1",133,0)
 ;  last line >         ;;
"RTN","KMPDUTL1",134,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL1",135,0)
 ;
"RTN","KMPDUTL1",136,0)
 K RTNARRY
"RTN","KMPDUTL1",137,0)
 ;
"RTN","KMPDUTL1",138,0)
 N BAD,I,INFO,INFOSITE,OK,OUT,PTCH,PTCHSITE,RTN
"RTN","KMPDUTL1",139,0)
 N TAG,TOTBAD,TOTMISS,TOTOK,TOTRTN,X,VER,VERSITE
"RTN","KMPDUTL1",140,0)
 ;
"RTN","KMPDUTL1",141,0)
 I $G(PKG)=""!("DRS"'[$G(PKG))!($L(PKG)'=1) S RTNARRY=-1 Q
"RTN","KMPDUTL1",142,0)
 S X="KMP"_PKG_"UTL"
"RTN","KMPDUTL1",143,0)
 X ^%ZOSF("TEST") I '$T S RTNARRY=-1 Q
"RTN","KMPDUTL1",144,0)
 ;
"RTN","KMPDUTL1",145,0)
 S (OUT,TOTBAD,TOTMISS,TOTOK,TOTRTN)=0
"RTN","KMPDUTL1",146,0)
 F I=1:1 D  Q:OUT
"RTN","KMPDUTL1",147,0)
 .S TAG="PTCHINFO+"_I_"^KMP"_PKG_"UTL"
"RTN","KMPDUTL1",148,0)
 .S INFO=$P($T(@TAG),";;",2)
"RTN","KMPDUTL1",149,0)
 .I INFO="" S OUT=1 Q
"RTN","KMPDUTL1",150,0)
 .S RTN=$P(INFO,U),VER=$P(INFO,U,2),PTCH=$P(INFO,U,3)
"RTN","KMPDUTL1",151,0)
 .; if routine is missing
"RTN","KMPDUTL1",152,0)
 .I $T(@(RTN_"^"_RTN))="" D  Q
"RTN","KMPDUTL1",153,0)
 ..S TOTMISS=TOTMISS+1,TOTRTN=TOTRTN+1
"RTN","KMPDUTL1",154,0)
 ..S RTNARRY(RTN)="2^"_VER_U_PTCH_"^^"
"RTN","KMPDUTL1",155,0)
 .X "ZL @RTN S INFOSITE=$T(+2)"
"RTN","KMPDUTL1",156,0)
 .S VERSITE=$P(INFOSITE,";",3),PTCHSITE=$P(INFOSITE,";",5)
"RTN","KMPDUTL1",157,0)
 .I VERSITE'=VER!(PTCHSITE'=PTCH) S BAD=1,OK=0
"RTN","KMPDUTL1",158,0)
 .E  S BAD=0,OK=1
"RTN","KMPDUTL1",159,0)
 .S TOTBAD=TOTBAD+BAD,TOTOK=TOTOK+OK,TOTRTN=TOTRTN+1
"RTN","KMPDUTL1",160,0)
 .S RTNARRY(RTN)=BAD_U_VER_U_PTCH_U_VERSITE_U_PTCHSITE
"RTN","KMPDUTL1",161,0)
 S RTNARRY(0)=TOTRTN_U_TOTOK_U_TOTBAD_U_TOTMISS
"RTN","KMPDUTL1",162,0)
 Q
"RTN","KMPDUTL2")
0^32^B10091867
"RTN","KMPDUTL2",1,0)
KMPDUTL2 ;OAK/RAK - CM Tools Utility ;2/17/04  10:52
"RTN","KMPDUTL2",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUTL2",3,0)
 ;
"RTN","KMPDUTL2",4,0)
DATERNG(KMPUY,KMPUSTR,KMPUEND) ;-- date range
"RTN","KMPDUTL2",5,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL2",6,0)
 ; KMPUY..... Value returned in four pieces:
"RTN","KMPDUTL2",7,0)
 ;            fmstartdate^fmenddate^ouputstartdate^outputenddate
"RTN","KMPDUTL2",8,0)
 ;
"RTN","KMPDUTL2",9,0)
 ;            Piece one and two are the date ranges in fileman format.
"RTN","KMPDUTL2",10,0)
 ;            Piece three and four are the same dates in output format:
"RTN","KMPDUTL2",11,0)
 ;                             dy-Mon-yr
"RTN","KMPDUTL2",12,0)
 ;
"RTN","KMPDUTL2",13,0)
 ;                               ********
"RTN","KMPDUTL2",14,0)
 ;                               * NOTE *
"RTN","KMPDUTL2",15,0)
 ;                               ********
"RTN","KMPDUTL2",16,0)
 ;          - The first piece will always be the earliest date entered.
"RTN","KMPDUTL2",17,0)
 ;
"RTN","KMPDUTL2",18,0)
 ;  Optional Parameters:
"RTN","KMPDUTL2",19,0)
 ;
"RTN","KMPDUTL2",20,0)
 ; KMPUSTR... If defined, the earliest date that may be selected.
"RTN","KMPDUTL2",21,0)
 ;            (must be in fileman format)
"RTN","KMPDUTL2",22,0)
 ;
"RTN","KMPDUTL2",23,0)
 ; KMPUEND... If defined, the latest date that may be selected.
"RTN","KMPDUTL2",24,0)
 ;            (must be in fileman format)
"RTN","KMPDUTL2",25,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL2",26,0)
 ;
"RTN","KMPDUTL2",27,0)
 N DATE1,DATE2,DIR,DIRUT,LINE,X,Y
"RTN","KMPDUTL2",28,0)
 ;
"RTN","KMPDUTL2",29,0)
 S KMPUY="",KMPUSTR=$G(KMPUSTR),KMPUEND=$G(KMPUEND)
"RTN","KMPDUTL2",30,0)
 ;
"RTN","KMPDUTL2",31,0)
RANGE ;-- Ask date ranges
"RTN","KMPDUTL2",32,0)
 S DIR(0)="DOA^"_$S(KMPUSTR:KMPUSTR,1:"")_":"_$S(KMPUEND:KMPUEND,1:"")_":ET)"
"RTN","KMPDUTL2",33,0)
 S DIR("A")="Start with Date: "
"RTN","KMPDUTL2",34,0)
 S:KMPUSTR DIR("B")=$$FMTE^XLFDT(KMPUSTR,2)
"RTN","KMPDUTL2",35,0)
 S DIR("?")=" "
"RTN","KMPDUTL2",36,0)
 S DIR("?",1)="Enter the starting date.",LINE=2
"RTN","KMPDUTL2",37,0)
 ; if starting date.
"RTN","KMPDUTL2",38,0)
 I KMPUSTR D 
"RTN","KMPDUTL2",39,0)
 .S DIR("?",LINE)="Date must not precede "_$$FMTE^XLFDT(KMPUSTR)
"RTN","KMPDUTL2",40,0)
 .S LINE=LINE+1
"RTN","KMPDUTL2",41,0)
 ; if ending date.
"RTN","KMPDUTL2",42,0)
 I KMPUEND S DIR("?",LINE)="Date must not follow "_$$FMTE^XLFDT(KMPUEND)
"RTN","KMPDUTL2",43,0)
 W ! D ^DIR I $D(DIRUT) S KMPUY="" Q
"RTN","KMPDUTL2",44,0)
 S DATE1=Y
"RTN","KMPDUTL2",45,0)
 S DIR("A")="  End with Date: "
"RTN","KMPDUTL2",46,0)
 S:KMPUEND DIR("B")=$$FMTE^XLFDT(KMPUEND,2)
"RTN","KMPDUTL2",47,0)
 S DIR("?",1)="Enter the ending date."
"RTN","KMPDUTL2",48,0)
 D ^DIR G:Y="" RANGE I Y="^" S KMPUY="" Q
"RTN","KMPDUTL2",49,0)
 S DATE2=Y
"RTN","KMPDUTL2",50,0)
 ; Set earliest date into first piece.
"RTN","KMPDUTL2",51,0)
 S KMPUY=$S(DATE2<DATE1:DATE2,1:DATE1)_U_$S(DATE2>DATE1:DATE2,1:DATE1)
"RTN","KMPDUTL2",52,0)
 S $P(KMPUY,U,3)=$$FMTE^XLFDT($P(KMPUY,U))
"RTN","KMPDUTL2",53,0)
 S $P(KMPUY,U,4)=$$FMTE^XLFDT($P(KMPUY,U,2))
"RTN","KMPDUTL2",54,0)
 Q
"RTN","KMPDUTL2",55,0)
 ;
"RTN","KMPDUTL2",56,0)
EMAIL(KMPDSUBJ,KMPDTEXT,KMPDTO) ; check and process errors.
"RTN","KMPDUTL2",57,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL2",58,0)
 ; KMPDSUBJ... Free text - to be included in subject
"RTN","KMPDUTL2",59,0)
 ; KMPDTEXT(). Array containing message text.  This must be in a format
"RTN","KMPDUTL2",60,0)
 ;             accepted by XMTEXT - TEXT(
"RTN","KMPDUTL2",61,0)
 ;                                  ^TMP($J,"TEXT",
"RTN","KMPDUTL2",62,0)
 ; KMPDTO..... Address for email recipient:
"RTN","KMPDUTL2",63,0)
 ;              G.KMP2-RUM@FO-ALBANY.MED.VA.GOV
"RTN","KMPDUTL2",64,0)
 ;              G.KMP4-CMTOOLS@FO-ALBANY.MED.VA.GOV
"RTN","KMPDUTL2",65,0)
 ;              G.CAPACITY,MANAGEMENT@FO-ALBANY.MED.GOV
"RTN","KMPDUTL2",66,0)
 ;             If no value is passed the default will be 
"RTN","KMPDUTL2",67,0)
 ;              G.KMP4-CMTOOLS@FO-ALBANY.MED.VA.GOV
"RTN","KMPDUTL2",68,0)
 ;              
"RTN","KMPDUTL2",69,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL2",70,0)
 ;
"RTN","KMPDUTL2",71,0)
 Q:$G(KMPDTEXT)=""
"RTN","KMPDUTL2",72,0)
 S KMPDSUBJ=$S($G(KMPDSUBJ)="":"CM Error",1:KMPDSUBJ)
"RTN","KMPDUTL2",73,0)
 S KMPDTO=$S($G(KMPDTO)="":"G.KMP4-CMTOOLS@FO-ALBANY.MED.VA.GOV",1:KMPDTO)
"RTN","KMPDUTL2",74,0)
 ;
"RTN","KMPDUTL2",75,0)
 N H,I,LN,N,O,SITE,TEXT,XMSUB,X,XMTEXT,XMY,XMZ,Y,Z
"RTN","KMPDUTL2",76,0)
 ;
"RTN","KMPDUTL2",77,0)
 S SITE=$$SITE^VASITE
"RTN","KMPDUTL2",78,0)
 S XMSUB=KMPDSUBJ_" at site "_$P(SITE,U,3)_" on "_$$FMTE^XLFDT($$DT^XLFDT)
"RTN","KMPDUTL2",79,0)
 S XMTEXT=KMPDTEXT
"RTN","KMPDUTL2",80,0)
 S XMY(KMPDTO)=""
"RTN","KMPDUTL2",81,0)
 D ^XMD
"RTN","KMPDUTL2",82,0)
 W:'$D(ZTQUEUED) !,"Message #"_$G(XMZ)_" sent..."
"RTN","KMPDUTL2",83,0)
 ;
"RTN","KMPDUTL2",84,0)
 Q
"RTN","KMPDUTL2",85,0)
 ;
"RTN","KMPDUTL2",86,0)
STRSTP(KMPDAPP,KMPDDW,KMPDBP,KMPDSTM) ;-- record start/stop times
"RTN","KMPDUTL2",87,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL2",88,0)
 ; KMPDAPP.... CP application:
"RTN","KMPDUTL2",89,0)
 ;              1 - sagg
"RTN","KMPDUTL2",90,0)
 ;              2 - rum
"RTN","KMPDUTL2",91,0)
 ;              3 - hl7
"RTN","KMPDUTL2",92,0)
 ;              4 - timing
"RTN","KMPDUTL2",93,0)
 ; KMPDDW..... Daily or Weekly
"RTN","KMPDUTL2",94,0)
 ;              1 - daily
"RTN","KMPDUTL2",95,0)
 ;              2 - weekly
"RTN","KMPDUTL2",96,0)
 ; KMPDBP.... Background or Purge
"RTN","KMPDUTL2",97,0)
 ;              1 - background
"RTN","KMPDUTL2",98,0)
 ;              2 - purge
"RTN","KMPDUTL2",99,0)
 ; KMPDSTM.... Start Time in internal fileman format
"RTN","KMPDUTL2",100,0)
 ;
"RTN","KMPDUTL2",101,0)
 ; This api will calculate END time and DELTA time (END-KMPDSTM) and
"RTN","KMPDUTL2",102,0)
 ; store the results in:
"RTN","KMPDUTL2",103,0)
 ;    ^XTMP("KMPD","BACKGROUND",KMPDAPP,KMPDDW,KMPDBP,...)
"RTN","KMPDUTL2",104,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL2",105,0)
 Q:'$G(KMPDAPP)
"RTN","KMPDUTL2",106,0)
 Q:KMPDAPP<1!(KMPDAPP>4)
"RTN","KMPDUTL2",107,0)
 Q:'$G(KMPDDW)
"RTN","KMPDUTL2",108,0)
 Q:KMPDDW<1!(KMPDDW>2)
"RTN","KMPDUTL2",109,0)
 Q:'$G(KMPDBP)
"RTN","KMPDUTL2",110,0)
 Q:KMPDBP<1!(KMPDBP>2)
"RTN","KMPDUTL2",111,0)
 Q:'$G(KMPDSTM)
"RTN","KMPDUTL2",112,0)
 ;
"RTN","KMPDUTL2",113,0)
 N END,ERROR,FDA,FIELD S END=$$NOW^XLFDT
"RTN","KMPDUTL2",114,0)
 ;
"RTN","KMPDUTL2",115,0)
 ; starting field for daily or background
"RTN","KMPDUTL2",116,0)
 S FIELD=KMPDAPP+($S(KMPDDW=1:5,1:8)*.01)
"RTN","KMPDUTL2",117,0)
 ; if purge
"RTN","KMPDUTL2",118,0)
 S:KMPDBP=2 FIELD=FIELD+.07
"RTN","KMPDUTL2",119,0)
 ;
"RTN","KMPDUTL2",120,0)
 ; store start time, end time, and delta
"RTN","KMPDUTL2",121,0)
 S FDA($J,8973,"1,",FIELD)=KMPDSTM
"RTN","KMPDUTL2",122,0)
 S FDA($J,8973,"1,",FIELD+.01)=END
"RTN","KMPDUTL2",123,0)
 S FDA($J,8973,"1,",FIELD+.02)=$$FMDIFF^XLFDT(END,KMPDSTM,3)
"RTN","KMPDUTL2",124,0)
 ;
"RTN","KMPDUTL2",125,0)
 D FILE^DIE("","FDA($J)","ERROR")
"RTN","KMPDUTL2",126,0)
 ;
"RTN","KMPDUTL2",127,0)
 Q
"RTN","KMPDUTL3")
0^33^B2493669
"RTN","KMPDUTL3",1,0)
KMPDUTL3 ;OAK/RAK - CM Tools Utility ;2/17/04  10:53
"RTN","KMPDUTL3",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUTL3",3,0)
 ;
"RTN","KMPDUTL3",4,0)
PURGE(KMPDT) ;-- purge data in file #8973.1
"RTN","KMPDUTL3",5,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL3",6,0)
 ; KMPDT.. Date to begin purge in internal fileman format. Purge will
"RTN","KMPDUTL3",7,0)
 ;           reverse $order and delete entries 'EARLIER' than KMPDT.
"RTN","KMPDUTL3",8,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL3",9,0)
 ;
"RTN","KMPDUTL3",10,0)
 Q:'$G(KMPDT)
"RTN","KMPDUTL3",11,0)
 ;
"RTN","KMPDUTL3",12,0)
 N DA,DATE,DIK,IEN
"RTN","KMPDUTL3",13,0)
 W:'$D(ZTQUEUED) !!,"Purging old records..."
"RTN","KMPDUTL3",14,0)
 S DATE=KMPDT
"RTN","KMPDUTL3",15,0)
 F  S DATE=$O(^KMPD(8973.1,"B",DATE),-1) Q:'DATE!(DATE>KMPDT)  D 
"RTN","KMPDUTL3",16,0)
 .F IEN=0:0 S IEN=$O(^KMPD(8973.1,"B",DATE,IEN)) Q:'IEN  D 
"RTN","KMPDUTL3",17,0)
 ..; quit if not 'sent to cm database'.
"RTN","KMPDUTL3",18,0)
 ..Q:'$P($G(^KMPD(8973.1,IEN,0)),U,2)
"RTN","KMPDUTL3",19,0)
 ..I '$D(ZTQUEUED) W:$X>78 !?16 W "."
"RTN","KMPDUTL3",20,0)
 ..; Delete entry.
"RTN","KMPDUTL3",21,0)
 ..S DA=IEN,DIK="^KMPD(8973.1," D ^DIK
"RTN","KMPDUTL3",22,0)
 ;
"RTN","KMPDUTL3",23,0)
 Q
"RTN","KMPDUTL3",24,0)
 ;
"RTN","KMPDUTL3",25,0)
PURGE1 ;-- purge data in file #8973.2
"RTN","KMPDUTL3",26,0)
 ;
"RTN","KMPDUTL3",27,0)
 N DA,DATE,DAYS,DIK,IEN,PURGE
"RTN","KMPDUTL3",28,0)
 ;
"RTN","KMPDUTL3",29,0)
 ; days to keep data (weeks * 7)
"RTN","KMPDUTL3",30,0)
 S DAYS=$P($G(^KMPD(8973,1,4)),U,11)
"RTN","KMPDUTL3",31,0)
 S:'DAYS DAYS=4 S DAYS=DAYS*7
"RTN","KMPDUTL3",32,0)
 ; determine date to start purge
"RTN","KMPDUTL3",33,0)
 S PURGE=$$FMADD^XLFDT(DT,-DAYS) Q:'PURGE
"RTN","KMPDUTL3",34,0)
 W:'$D(ZTQUEUED) !!,"Purging old records..."
"RTN","KMPDUTL3",35,0)
 S DATE=PURGE-.1
"RTN","KMPDUTL3",36,0)
 F  S DATE=$O(^KMPD(8973.2,"C",DATE),-1) Q:'DATE!(DATE>PURGE)  D 
"RTN","KMPDUTL3",37,0)
 .F IEN=0:0 S IEN=$O(^KMPD(8973.2,"C",DATE,IEN)) Q:'IEN  D 
"RTN","KMPDUTL3",38,0)
 ..Q:'$D(^KMPD(8973.2,IEN,0))
"RTN","KMPDUTL3",39,0)
 ..W:'$D(ZTQUEUED)&('(IEN#10)) "."
"RTN","KMPDUTL3",40,0)
 ..; delete entry.
"RTN","KMPDUTL3",41,0)
 ..S DA=IEN,DIK="^KMPD(8973.2," D ^DIK
"RTN","KMPDUTL3",42,0)
 ;
"RTN","KMPDUTL3",43,0)
 Q
"RTN","KMPDUTL4")
0^34^B7857389
"RTN","KMPDUTL4",1,0)
KMPDUTL4 ;OAK/RAK; Reverse Video Header/Footer ;2/17/04  10:54
"RTN","KMPDUTL4",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUTL4",3,0)
 ;
"RTN","KMPDUTL4",4,0)
CONTINUE(KMPDMSSG,KMPDLN,KMPDY) ;-- press return to continue
"RTN","KMPDUTL4",5,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL4",6,0)
 ; KMPDMSSG. (optional) Message to display to user (if not defined then
"RTN","KMPDUTL4",7,0)
 ;           default message by ^DIR is used).
"RTN","KMPDUTL4",8,0)
 ; KMPDLN... Lines to go down before printing
"RTN","KMPDUTL4",9,0)
 ; KMPDY.... Return value: 0 - do not continue.
"RTN","KMPDUTL4",10,0)
 ;                         1 - continue.
"RTN","KMPDUTL4",11,0)
 ;           Access by reference.
"RTN","KMPDUTL4",12,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL4",13,0)
 ;
"RTN","KMPDUTL4",14,0)
 S KMPDMSSG=$G(KMPDMSSG),KMPDLN=+$G(KMPDLN),KMPDY=0
"RTN","KMPDUTL4",15,0)
 ;
"RTN","KMPDUTL4",16,0)
 ; if not terminal continue without displaying message.
"RTN","KMPDUTL4",17,0)
 I $E(IOST,1,2)'="C-" S KMPDY=1 Q
"RTN","KMPDUTL4",18,0)
 ;
"RTN","KMPDUTL4",19,0)
 N DIR,I,X,Y
"RTN","KMPDUTL4",20,0)
 S DIR(0)="EO"
"RTN","KMPDUTL4",21,0)
 S:KMPDMSSG]"" DIR("A")=KMPDMSSG
"RTN","KMPDUTL4",22,0)
 I KMPDLN F I=1:1:KMPDLN W !
"RTN","KMPDUTL4",23,0)
 D ^DIR
"RTN","KMPDUTL4",24,0)
 S KMPDY=+$G(Y)
"RTN","KMPDUTL4",25,0)
 ;
"RTN","KMPDUTL4",26,0)
 Q
"RTN","KMPDUTL4",27,0)
 ;
"RTN","KMPDUTL4",28,0)
HDR(TITLE1,TITLE2) ;header
"RTN","KMPDUTL4",29,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL4",30,0)
 ;  clear screen and print header in reverse video
"RTN","KMPDUTL4",31,0)
 ;
"RTN","KMPDUTL4",32,0)
 ;  if TITLE1 is not defined routine will quit
"RTN","KMPDUTL4",33,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL4",34,0)
 S TITLE1=$G(TITLE1),TITLE2=$G(TITLE2) Q:TITLE1']""
"RTN","KMPDUTL4",35,0)
 I $G(IORVON)']""!($G(IORVOFF)']"") N IORVON,IORVOFF,X D 
"RTN","KMPDUTL4",36,0)
 .S X="IORVON;IORVOFF" D ENDR^%ZISS
"RTN","KMPDUTL4",37,0)
 S TITLE1=IORVON_" "_TITLE1_" "_IORVOFF
"RTN","KMPDUTL4",38,0)
 I TITLE2]"" S TITLE2=IORVON_" "_TITLE2_" "_IORVOFF
"RTN","KMPDUTL4",39,0)
 W @IOF
"RTN","KMPDUTL4",40,0)
 W !?(IOM-$L(TITLE1)/2),TITLE1
"RTN","KMPDUTL4",41,0)
 I TITLE2]"" W !?(IOM-$L(TITLE2)/2),TITLE2
"RTN","KMPDUTL4",42,0)
 Q
"RTN","KMPDUTL4",43,0)
 ;
"RTN","KMPDUTL4",44,0)
FTR(FOOTER,VALUE) ;print footer
"RTN","KMPDUTL4",45,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL4",46,0)
 ;  line feed to IOSL-3 and place message on screen
"RTN","KMPDUTL4",47,0)
 ;  if IOSL or IOM are not defined routine will quit
"RTN","KMPDUTL4",48,0)
 ;
"RTN","KMPDUTL4",49,0)
 ;  FOOTER - text to appear at the bottom of the screen
"RTN","KMPDUTL4",50,0)
 ;           if footer is not defined then the message
"RTN","KMPDUTL4",51,0)
 ;           'Press RETURN to continue, '^' to exit'   will appear
"RTN","KMPDUTL4",52,0)
 ;
"RTN","KMPDUTL4",53,0)
 ;  footer appears in the middle of the screen
"RTN","KMPDUTL4",54,0)
 ;
"RTN","KMPDUTL4",55,0)
 ;  VALUE - value returned:
"RTN","KMPDUTL4",56,0)
 ;          "" - if IOSL or IOM are not defined
"RTN","KMPDUTL4",57,0)
 ;           0 - if an uparrow '^' is entered
"RTN","KMPDUTL4",58,0)
 ;           1 - if return is entered
"RTN","KMPDUTL4",59,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL4",60,0)
 ;
"RTN","KMPDUTL4",61,0)
 S VALUE="" I '$G(IOSL)!('$G(IOM)) Q
"RTN","KMPDUTL4",62,0)
 N DIR,I,X,Y
"RTN","KMPDUTL4",63,0)
 I $G(FOOTER)']""  S FOOTER="Press RETURN to continue, '^' to exit"
"RTN","KMPDUTL4",64,0)
 I $G(IORVON)']""!($G(IORVOFF)']"") N IORVON,IORVOFF,X D 
"RTN","KMPDUTL4",65,0)
 .S X="IORVON;IORVOFF" D ENDR^%ZISS
"RTN","KMPDUTL4",66,0)
 S FOOTER=IORVON_" "_FOOTER_" "_IORVOFF
"RTN","KMPDUTL4",67,0)
 S DIR(0)="EA",DIR("A")=$J(" ",(IOM-$L(FOOTER)/2))_FOOTER
"RTN","KMPDUTL4",68,0)
 F I=$Y:1:(IOSL-3) W !
"RTN","KMPDUTL4",69,0)
 D ^DIR S VALUE=Y
"RTN","KMPDUTL4",70,0)
 Q
"RTN","KMPDUTL4",71,0)
 ;
"RTN","KMPDUTL4",72,0)
PTNPSEL() ;-- extrinsic function - select prime time, non-prime time or both
"RTN","KMPDUTL4",73,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL4",74,0)
 ; Return: 1^Prime Time
"RTN","KMPDUTL4",75,0)
 ;         2^Non-Prime Time
"RTN","KMPDUTL4",76,0)
 ;         3^Both Prime Time & Non-Prime Time
"RTN","KMPDUTL4",77,0)
 ;         "" - no selection made
"RTN","KMPDUTL4",78,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL4",79,0)
 N DIR,X,Y
"RTN","KMPDUTL4",80,0)
 S DIR(0)="SO^1:Prime Time;2:Non-Prime Time"
"RTN","KMPDUTL4",81,0)
 S DIR("A")="Select Time Frame",DIR("B")=1
"RTN","KMPDUTL4",82,0)
 S DIR("?",1)="Select one of the following:"
"RTN","KMPDUTL4",83,0)
 S DIR("?",2)=""
"RTN","KMPDUTL4",84,0)
 S DIR("?",3)="      PRIME TIME => Weekdays 8 am till 5 pm"
"RTN","KMPDUTL4",85,0)
 S DIR("?",4)="        - or -"
"RTN","KMPDUTL4",86,0)
 S DIR("?",5)="  NON-PRIME TIME => Weekdays after 5 pm and before 8 am"
"RTN","KMPDUTL4",87,0)
 S DIR("?")="                    and Weekends all day"
"RTN","KMPDUTL4",88,0)
 D ^DIR
"RTN","KMPDUTL4",89,0)
 Q:$G(Y)=""!($G(Y)="^") ""
"RTN","KMPDUTL4",90,0)
 Q $S(Y:Y_"^"_$G(Y(0)),1:Y)
"RTN","KMPDUTL4",91,0)
 ;
"RTN","KMPDUTL4",92,0)
STRIP(TEXT) ;-- function to strip leading spaces from text string
"RTN","KMPDUTL4",93,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL4",94,0)
 ; input TEXT = text string
"RTN","KMPDUTL4",95,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL4",96,0)
 ;
"RTN","KMPDUTL4",97,0)
 N I,LEN
"RTN","KMPDUTL4",98,0)
 ;
"RTN","KMPDUTL4",99,0)
 S LEN=$L(TEXT)
"RTN","KMPDUTL4",100,0)
 F I=1:1:LEN Q:$E(TEXT)'=" "  D
"RTN","KMPDUTL4",101,0)
 .S TEXT=$E(TEXT,2,LEN)
"RTN","KMPDUTL4",102,0)
 ;
"RTN","KMPDUTL4",103,0)
 Q TEXT
"RTN","KMPDUTL4",104,0)
 ;
"RTN","KMPDUTL4",105,0)
COMMA(TEXT) ;-- function to remove commas from text string
"RTN","KMPDUTL4",106,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL4",107,0)
 ; input TEXT = text string
"RTN","KMPDUTL4",108,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL4",109,0)
 ;
"RTN","KMPDUTL4",110,0)
 S TEXT=$TR(TEXT,",")
"RTN","KMPDUTL4",111,0)
 ;
"RTN","KMPDUTL4",112,0)
 Q TEXT
"RTN","KMPDUTL4",113,0)
 ;
"RTN","KMPDUTL5")
0^35^B53756551
"RTN","KMPDUTL5",1,0)
KMPDUTL5 ;OIFO/KAK - Obtain CPU Configuration;28 Feb 2002 ;2/17/04  10:56
"RTN","KMPDUTL5",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUTL5",3,0)
 ;;
"RTN","KMPDUTL5",4,0)
CPU(ARRAY) ;-- get cpu configuration information
"RTN","KMPDUTL5",5,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL5",6,0)
 ; ARRAY = passed back by reference
"RTN","KMPDUTL5",7,0)
 ; returns array with CPU information:
"RTN","KMPDUTL5",8,0)
 ;                          piece : information
"RTN","KMPDUTL5",9,0)
 ;       ARRAY(nodename) =    1   : type of cpu
"RTN","KMPDUTL5",10,0)
 ;                            2   : number of processors
"RTN","KMPDUTL5",11,0)
 ;                            3   : processor speed
"RTN","KMPDUTL5",12,0)
 ;                            4   : amount of memory
"RTN","KMPDUTL5",13,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL5",14,0)
 ;
"RTN","KMPDUTL5",15,0)
 N ZV
"RTN","KMPDUTL5",16,0)
 ;
"RTN","KMPDUTL5",17,0)
 S ZV=$$MPLTF^KMPDUTL1
"RTN","KMPDUTL5",18,0)
 ;
"RTN","KMPDUTL5",19,0)
 S U="^"
"RTN","KMPDUTL5",20,0)
 I (ZV["DSM") D DSM(.ARRAY)
"RTN","KMPDUTL5",21,0)
 I (ZV["CVMS") D CVMS(.ARRAY,1)
"RTN","KMPDUTL5",22,0)
 I (ZV["CWINNT") D CWINNT(.ARRAY,1)
"RTN","KMPDUTL5",23,0)
 Q
"RTN","KMPDUTL5",24,0)
 ;
"RTN","KMPDUTL5",25,0)
DSM(CPUINFO) ;-- for DSM Platform
"RTN","KMPDUTL5",26,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL5",27,0)
 ; CPUINFO = array passed back by reference - see CPU(ARRAY) above
"RTN","KMPDUTL5",28,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL5",29,0)
 ;
"RTN","KMPDUTL5",30,0)
 N CLSTRMEM,CSID,CSIDARRY,NODE,NODEARRY,X
"RTN","KMPDUTL5",31,0)
 ;
"RTN","KMPDUTL5",32,0)
 S CLSTRMEM=$ZC(%GETSYI,"CLUSTER_MEMBER")
"RTN","KMPDUTL5",33,0)
 ;
"RTN","KMPDUTL5",34,0)
 ; not in cluster environment
"RTN","KMPDUTL5",35,0)
 I 'CLSTRMEM D  Q
"RTN","KMPDUTL5",36,0)
 .S NODE=$ZC(%GETSYI,"NODENAME")
"RTN","KMPDUTL5",37,0)
 .S CPUINFO(NODE)=$ZC(%GETSYI,"HW_NAME")_U_$ZC(%GETSYI,"ACTIVECPU_CNT")
"RTN","KMPDUTL5",38,0)
 ;
"RTN","KMPDUTL5",39,0)
 ; in cluster environment
"RTN","KMPDUTL5",40,0)
 D CLSTR
"RTN","KMPDUTL5",41,0)
 S X="ERR^ZU",@^%ZOSF("TRAP")
"RTN","KMPDUTL5",42,0)
 S NODE=""
"RTN","KMPDUTL5",43,0)
 F  S NODE=$O(NODEARRY(NODE)) Q:NODE=""  D
"RTN","KMPDUTL5",44,0)
 .S CSID=NODEARRY(NODE)
"RTN","KMPDUTL5",45,0)
 .S CPUINFO(NODE)=$ZC(%GETSYI,"HW_NAME",CSID)_U_$ZC(%GETSYI,"ACTIVECPU_CNT",CSID)
"RTN","KMPDUTL5",46,0)
 Q
"RTN","KMPDUTL5",47,0)
CLSTR ; get %GETSYI using wild card to get CSID and NODENAME for all nodes
"RTN","KMPDUTL5",48,0)
 ;
"RTN","KMPDUTL5",49,0)
 N X
"RTN","KMPDUTL5",50,0)
 S X="ERRCLU^KMPDUTL5",@^%ZOSF("TRAP"),$ZE=""
"RTN","KMPDUTL5",51,0)
 S CSIDARRY($ZC(%GETSYI,"NODE_CSID",-1))=""
"RTN","KMPDUTL5",52,0)
 F  S CSIDARRY($ZC(%GETSYI,"NODE_CSID",""))=""
"RTN","KMPDUTL5",53,0)
ERRCLU I $ZE'["NOMORENODE" ZQ
"RTN","KMPDUTL5",54,0)
 N CSID
"RTN","KMPDUTL5",55,0)
 S CSID=""
"RTN","KMPDUTL5",56,0)
 F  S CSID=$O(CSIDARRY(CSID)) Q:CSID=""  S NODEARRY($ZC(%GETSYI,"NODENAME",CSID))=CSID
"RTN","KMPDUTL5",57,0)
 Q
"RTN","KMPDUTL5",58,0)
 ;
"RTN","KMPDUTL5",59,0)
CVMS(CPUINFO,TYP) ;-- for Cache for OpenVMS Platform
"RTN","KMPDUTL5",60,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL5",61,0)
 ; input: TYP = type of system information requested
"RTN","KMPDUTL5",62,0)
 ;                1 : cpu system information
"RTN","KMPDUTL5",63,0)
 ;                2 : operating system version information
"RTN","KMPDUTL5",64,0)
 ;
"RTN","KMPDUTL5",65,0)
 ; CPUINFO = array passed back by reference
"RTN","KMPDUTL5",66,0)
 ;           : for TYP=1 see CPU(ARRAY) line tag above
"RTN","KMPDUTL5",67,0)
 ;           : for TYP=2 CPUINFO(1)=os version
"RTN","KMPDUTL5",68,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL5",69,0)
 ;
"RTN","KMPDUTL5",70,0)
 N DIR,FILE,LOG,TYPNM
"RTN","KMPDUTL5",71,0)
 ;
"RTN","KMPDUTL5",72,0)
 S TYPNM=$S(TYP=1:"CPU",TYP=2:"VER",1:"")
"RTN","KMPDUTL5",73,0)
 ;
"RTN","KMPDUTL5",74,0)
 S DIR=$ZU(12)
"RTN","KMPDUTL5",75,0)
 ;
"RTN","KMPDUTL5",76,0)
 ; cleanup log file
"RTN","KMPDUTL5",77,0)
 S LOG=DIR_"KMPDU"_TYPNM_".LOG"
"RTN","KMPDUTL5",78,0)
 O LOG:("R"):0 C LOG:("D")
"RTN","KMPDUTL5",79,0)
 ;
"RTN","KMPDUTL5",80,0)
 ; cleanup com file
"RTN","KMPDUTL5",81,0)
 S FILE=DIR_"KMPDU"_TYPNM_".COM"
"RTN","KMPDUTL5",82,0)
 O FILE:("R"):0 C FILE:("D")
"RTN","KMPDUTL5",83,0)
 ;
"RTN","KMPDUTL5",84,0)
 ; create com file   quit on file creation error
"RTN","KMPDUTL5",85,0)
 Q:$$CREATE(FILE,TYP)<0
"RTN","KMPDUTL5",86,0)
 ;
"RTN","KMPDUTL5",87,0)
 ; run com file and create log file
"RTN","KMPDUTL5",88,0)
 I $ZF(-1,"",LOG,FILE)
"RTN","KMPDUTL5",89,0)
 C LOG
"RTN","KMPDUTL5",90,0)
 ;
"RTN","KMPDUTL5",91,0)
 ; parse log file
"RTN","KMPDUTL5",92,0)
 D PARSE(LOG,.CPUINFO,TYP)
"RTN","KMPDUTL5",93,0)
 ;
"RTN","KMPDUTL5",94,0)
 ; cleanup com file
"RTN","KMPDUTL5",95,0)
 O FILE:("R"):0 C FILE:("D")
"RTN","KMPDUTL5",96,0)
 ; cleanup log file
"RTN","KMPDUTL5",97,0)
 O LOG:("R"):0 C LOG:("D")
"RTN","KMPDUTL5",98,0)
 ;
"RTN","KMPDUTL5",99,0)
 Q
"RTN","KMPDUTL5",100,0)
 ;
"RTN","KMPDUTL5",101,0)
CWINNT(CPUINFO,TYP) ;-- for Cache for Windows NT Platform
"RTN","KMPDUTL5",102,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL5",103,0)
 ; input: TYP = type of system information requested
"RTN","KMPDUTL5",104,0)
 ;                1 : cpu system information
"RTN","KMPDUTL5",105,0)
 ;                2 : operating system version information
"RTN","KMPDUTL5",106,0)
 ;
"RTN","KMPDUTL5",107,0)
 ; CPUINFO = array passed back by reference
"RTN","KMPDUTL5",108,0)
 ;           : for TYP = 1 see CPU(ARRAY) line tag above
"RTN","KMPDUTL5",109,0)
 ;           : for TYP = 2 CPUINFO(1)=os version
"RTN","KMPDUTL5",110,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL5",111,0)
 ;
"RTN","KMPDUTL5",112,0)
 N DATA,FILE,NODE,OUT,X
"RTN","KMPDUTL5",113,0)
 ;
"RTN","KMPDUTL5",114,0)
 S DATA="",OUT=0
"RTN","KMPDUTL5",115,0)
 ;
"RTN","KMPDUTL5",116,0)
 ; $zu(110) = computername
"RTN","KMPDUTL5",117,0)
 S (FILE,NODE)=$ZU(110)
"RTN","KMPDUTL5",118,0)
 S CPUINFO(NODE)=""
"RTN","KMPDUTL5",119,0)
 ;
"RTN","KMPDUTL5",120,0)
 ; cleanup all report files
"RTN","KMPDUTL5",121,0)
 I $ZF(-1,"DEL "_FILE_"*.TXT")
"RTN","KMPDUTL5",122,0)
 ;
"RTN","KMPDUTL5",123,0)
 S FILE=FILE_".TXT"
"RTN","KMPDUTL5",124,0)
 ;
"RTN","KMPDUTL5",125,0)
 ; send system reort to file
"RTN","KMPDUTL5",126,0)
 ; switches: /s => summary report
"RTN","KMPDUTL5",127,0)
 ;           /a => all report
"RTN","KMPDUTL5",128,0)
 ;           /f => send to file named 'computername.TXT'
"RTN","KMPDUTL5",129,0)
 I $ZF(-1,"WINMSD /s /f")
"RTN","KMPDUTL5",130,0)
 ;
"RTN","KMPDUTL5",131,0)
 S X="EOF1",@^%ZOSF("TRAP")
"RTN","KMPDUTL5",132,0)
 ; append *eof* line to report file
"RTN","KMPDUTL5",133,0)
 O FILE:("WA"):0 I $T U FILE W !,"*EOF*" C FILE
"RTN","KMPDUTL5",134,0)
 ;
"RTN","KMPDUTL5",135,0)
 ; read from report file
"RTN","KMPDUTL5",136,0)
 O FILE:("R"):0
"RTN","KMPDUTL5",137,0)
 ;
"RTN","KMPDUTL5",138,0)
 I '$T C FILE:"D" Q
"RTN","KMPDUTL5",139,0)
 ;
"RTN","KMPDUTL5",140,0)
 U FILE
"RTN","KMPDUTL5",141,0)
 ;
"RTN","KMPDUTL5",142,0)
 ; TYP=1 => cpu information
"RTN","KMPDUTL5",143,0)
 I TYP=1 D
"RTN","KMPDUTL5",144,0)
 .F  R X Q:X["*EOF*"  D  Q:OUT
"RTN","KMPDUTL5",145,0)
 ..; type of cpu
"RTN","KMPDUTL5",146,0)
 ..I X["Hardware Abstraction Layer:" S $P(DATA,U)=$$STRIP^KMPDUTL4($P(X,"Hardware Abstraction Layer:",2)) Q
"RTN","KMPDUTL5",147,0)
 ..; number of processors
"RTN","KMPDUTL5",148,0)
 ..I X["NUMBER_OF_PROCESSORS=" S $P(DATA,U,2)=$P(X,"NUMBER_OF_PROCESSORS=",2) Q
"RTN","KMPDUTL5",149,0)
 ..; processor speed - no information available
"RTN","KMPDUTL5",150,0)
 ..; amount of memory
"RTN","KMPDUTL5",151,0)
 ..I X["Physical Memory (K)" D  Q
"RTN","KMPDUTL5",152,0)
 ...R X
"RTN","KMPDUTL5",153,0)
 ...I X["*EOF*" S OUT=1 Q
"RTN","KMPDUTL5",154,0)
 ...I X["Total:" S $P(DATA,U,4)=$$STRIP^KMPDUTL4($$COMMA^KMPDUTL4($P(X,"Total:",2)))\1024 Q
"RTN","KMPDUTL5",155,0)
 ..S CPUINFO(NODE)=DATA
"RTN","KMPDUTL5",156,0)
 ;
"RTN","KMPDUTL5",157,0)
 ; TYP=2 => os version
"RTN","KMPDUTL5",158,0)
 I TYP=2 D
"RTN","KMPDUTL5",159,0)
 .F  R X Q:X["*EOF*"  D  Q:OUT
"RTN","KMPDUTL5",160,0)
 ..; version of operating system
"RTN","KMPDUTL5",161,0)
 ..I X["OS Version Report" D
"RTN","KMPDUTL5",162,0)
 ...F I=1:1:2 R X I X["*EOF*" S OUT=1 Q
"RTN","KMPDUTL5",163,0)
 ...S DATA=X
"RTN","KMPDUTL5",164,0)
 ...R X I X["*EOF*" S OUT=1 Q
"RTN","KMPDUTL5",165,0)
 ...S DATA=DATA_" "_X
"RTN","KMPDUTL5",166,0)
 ...S CPUINFO(1)=DATA
"RTN","KMPDUTL5",167,0)
 ;
"RTN","KMPDUTL5",168,0)
 C FILE:"D"
"RTN","KMPDUTL5",169,0)
 ;
"RTN","KMPDUTL5",170,0)
 Q
"RTN","KMPDUTL5",171,0)
 ;
"RTN","KMPDUTL5",172,0)
CREATE(FILE,TYP) ;-- function to create new com file
"RTN","KMPDUTL5",173,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL5",174,0)
 ; input: FILE = name of file to create
"RTN","KMPDUTL5",175,0)
 ;        TYP  = type of system information requested
"RTN","KMPDUTL5",176,0)
 ;                 1 : cpu system information
"RTN","KMPDUTL5",177,0)
 ;                 2 : operating system version information
"RTN","KMPDUTL5",178,0)
 ;
"RTN","KMPDUTL5",179,0)
 ; returns:  1 successful file creation
"RTN","KMPDUTL5",180,0)
 ;          -1 failure of file creation
"RTN","KMPDUTL5",181,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL5",182,0)
 ;
"RTN","KMPDUTL5",183,0)
 N DIR,TYPNM
"RTN","KMPDUTL5",184,0)
 ;
"RTN","KMPDUTL5",185,0)
 S TYPNM=$S(TYP=1:"CPU",TYP=2:"VER",1:"")
"RTN","KMPDUTL5",186,0)
 ;
"RTN","KMPDUTL5",187,0)
 O FILE:("NWC"):0 Q:'$T -1
"RTN","KMPDUTL5",188,0)
 ;
"RTN","KMPDUTL5",189,0)
 U FILE
"RTN","KMPDUTL5",190,0)
 W "$! KMPDU"_TYPNM_".COM - Obtain System Configuration Information"
"RTN","KMPDUTL5",191,0)
 W "$!--------------------------------------------------------"
"RTN","KMPDUTL5",192,0)
 W "$! OIFO - CAPACITY PLANNING/KAK"
"RTN","KMPDUTL5",193,0)
 W "$! "_$P($T(+2)_";;",2,999)
"RTN","KMPDUTL5",194,0)
 W "$!--------------------------------------------------------"
"RTN","KMPDUTL5",195,0)
 W "$!"
"RTN","KMPDUTL5",196,0)
 ;
"RTN","KMPDUTL5",197,0)
 I TYP=2 D  G TAGXIT
"RTN","KMPDUTL5",198,0)
 .W "$   write sys$output ""VERSION=""   , f$getsyi(""VERSION"")"
"RTN","KMPDUTL5",199,0)
 ;
"RTN","KMPDUTL5",200,0)
 W "$ if f$getsyi(""CLUSTER_MEMBER"") .eqs. ""FALSE"" then goto NOT_CLUSTER"
"RTN","KMPDUTL5",201,0)
 W "$ CONTEXT = """""
"RTN","KMPDUTL5",202,0)
 W "$START:"
"RTN","KMPDUTL5",203,0)
 W "$   ID = f$csid(CONTEXT)"
"RTN","KMPDUTL5",204,0)
 W "$   if ID .eqs. """" then goto EXIT"
"RTN","KMPDUTL5",205,0)
 W "$   write sys$output ""NODE=""    , f$getsyi(""NODENAME"",,ID)"
"RTN","KMPDUTL5",206,0)
 W "$   write sys$output ""TYPE=""    , f$getsyi(""HW_NAME"",,ID)"
"RTN","KMPDUTL5",207,0)
 W "$   write sys$output ""CPU_CNT="" , f$getsyi(""ACTIVECPU_CNT"",,ID)" 
"RTN","KMPDUTL5",208,0)
 W "$   write sys$output ""SPEED=n/a"""
"RTN","KMPDUTL5",209,0)
 W "$   write sys$output ""MEMSIZE="" , f$getsyi(""MEMSIZE"",,ID)"
"RTN","KMPDUTL5",210,0)
 W "$   goto START"
"RTN","KMPDUTL5",211,0)
 W "$NOT_CLUSTER:"
"RTN","KMPDUTL5",212,0)
 W "$   write sys$output ""NODE=""    , f$getsyi(""NODENAME"")"
"RTN","KMPDUTL5",213,0)
 W "$   write sys$output ""TYPE=""    , f$getsyi(""HW_NAME"")"
"RTN","KMPDUTL5",214,0)
 W "$   write sys$output ""CPU_CNT="" , f$getsyi(""ACTIVECPU_CNT"")"
"RTN","KMPDUTL5",215,0)
 W "$   write sys$output ""SPEED=n/a"""
"RTN","KMPDUTL5",216,0)
 W "$   write sys$output ""MEMSIZE="" , f$getsyi(""MEMSIZE"")"
"RTN","KMPDUTL5",217,0)
TAGXIT ;
"RTN","KMPDUTL5",218,0)
 W "$EXIT:"
"RTN","KMPDUTL5",219,0)
 W "$   write sys$output ""*EOF*"""
"RTN","KMPDUTL5",220,0)
 W "$ exit"
"RTN","KMPDUTL5",221,0)
 W "$!"
"RTN","KMPDUTL5",222,0)
 ;
"RTN","KMPDUTL5",223,0)
 C FILE
"RTN","KMPDUTL5",224,0)
 Q 1
"RTN","KMPDUTL5",225,0)
 ;
"RTN","KMPDUTL5",226,0)
PARSE(LOG,CPUARRY,TYP) ;-- parse log file data
"RTN","KMPDUTL5",227,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL5",228,0)
 ; input: LOG = name of log file to parse
"RTN","KMPDUTL5",229,0)
 ;        TYP = type of system information requested
"RTN","KMPDUTL5",230,0)
 ;                1 : cpu system information
"RTN","KMPDUTL5",231,0)
 ;                2 : operating system version information
"RTN","KMPDUTL5",232,0)
 ;
"RTN","KMPDUTL5",233,0)
 ; CPUARRY = passed back by reference
"RTN","KMPDUTL5",234,0)
 ;           : for TYP=1 see CPU(ARRAY) line tag above
"RTN","KMPDUTL5",235,0)
 ;           : for TYP=2 CPUINFO(1)=os version
"RTN","KMPDUTL5",236,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL5",237,0)
 ;
"RTN","KMPDUTL5",238,0)
 N NODE,X
"RTN","KMPDUTL5",239,0)
 ;
"RTN","KMPDUTL5",240,0)
 S X="EOF",@^%ZOSF("TRAP"),NODE=""
"RTN","KMPDUTL5",241,0)
 K X S U="^"
"RTN","KMPDUTL5",242,0)
 ;
"RTN","KMPDUTL5",243,0)
 O LOG:("R")
"RTN","KMPDUTL5",244,0)
 U LOG
"RTN","KMPDUTL5",245,0)
 ;
"RTN","KMPDUTL5",246,0)
 I TYP=1 D
"RTN","KMPDUTL5",247,0)
 .F  R X Q:X["*EOF*"  I $E(X)'="$" I X["NODE=" D
"RTN","KMPDUTL5",248,0)
 ..I X["NODE=" S NODE=$P(X,"=",2)
"RTN","KMPDUTL5",249,0)
 ..F  R X  I $E(X)'="$" D  Q:X["MEMSIZE="
"RTN","KMPDUTL5",250,0)
 ...; type of cpu
"RTN","KMPDUTL5",251,0)
 ...I X["TYPE=" S $P(CPUARRY(NODE),U)=$P(X,"=",2) Q
"RTN","KMPDUTL5",252,0)
 ...; number of processors
"RTN","KMPDUTL5",253,0)
 ...I X["CPU_CNT=" S $P(CPUARRY(NODE),U,2)=$P(X,"=",2) Q
"RTN","KMPDUTL5",254,0)
 ...; processor speed - no information available
"RTN","KMPDUTL5",255,0)
 ...I X["SPEED=" Q
"RTN","KMPDUTL5",256,0)
 ...; amount of memory in MB
"RTN","KMPDUTL5",257,0)
 ...I X["MEMSIZE=" S $P(CPUARRY(NODE),U,4)=$P(X,"=",2)/128 Q
"RTN","KMPDUTL5",258,0)
 ;
"RTN","KMPDUTL5",259,0)
 I TYP=2 D
"RTN","KMPDUTL5",260,0)
 .F  R X Q:X["*EOF*"  I $E(X)'="$" D
"RTN","KMPDUTL5",261,0)
 ..; version of operating system
"RTN","KMPDUTL5",262,0)
 ..I X["VERSION=" S CPUARRY(1)=$P(X,"=",2) Q
"RTN","KMPDUTL5",263,0)
 ;
"RTN","KMPDUTL5",264,0)
 C LOG
"RTN","KMPDUTL5",265,0)
 ;
"RTN","KMPDUTL5",266,0)
 S X="ERR^ZU",@^%ZOSF("TRAP")
"RTN","KMPDUTL5",267,0)
 Q
"RTN","KMPDUTL5",268,0)
 ;
"RTN","KMPDUTL5",269,0)
EOF ;-- end of file condition for CVMS
"RTN","KMPDUTL5",270,0)
 S X="ERR^ZU",@^%ZOSF("TRAP")
"RTN","KMPDUTL5",271,0)
 C LOG
"RTN","KMPDUTL5",272,0)
 Q
"RTN","KMPDUTL5",273,0)
 ;
"RTN","KMPDUTL5",274,0)
EOF1 ;-- end of file condition for CWINNT
"RTN","KMPDUTL5",275,0)
 S X="ERR^ZU",@^%ZOSF("TRAP")
"RTN","KMPDUTL5",276,0)
 C FILE:"D"
"RTN","KMPDUTL5",277,0)
 Q
"RTN","KMPDUTL5",278,0)
 ;
"RTN","KMPDUTL5",279,0)
CVMSVER() ;-- returns version of Cache for OpenVMS operating system
"RTN","KMPDUTL5",280,0)
 ;
"RTN","KMPDUTL5",281,0)
 N VER
"RTN","KMPDUTL5",282,0)
 ;
"RTN","KMPDUTL5",283,0)
 D CVMS(.VER,2)
"RTN","KMPDUTL5",284,0)
 Q $S($D(VER(1)):VER(1),1:"")
"RTN","KMPDUTL5",285,0)
 ;
"RTN","KMPDUTL5",286,0)
CWNTVER() ;-- returns version of Cache for Windows NT operating system
"RTN","KMPDUTL5",287,0)
 ;
"RTN","KMPDUTL5",288,0)
 N VER
"RTN","KMPDUTL5",289,0)
 ;
"RTN","KMPDUTL5",290,0)
 D CWINNT(.VER,2)
"RTN","KMPDUTL5",291,0)
 Q $S($D(VER(1)):VER(1),1:"")
"RTN","KMPDUTL6")
0^36^B2454565
"RTN","KMPDUTL6",1,0)
KMPDUTL6 ;OIFO/RAK - CPU Utilities ;2/17/04  10:58
"RTN","KMPDUTL6",2,0)
 ;;2.0;CAPACITY MANAGEMENT TOOLS;;Mar 22, 2002
"RTN","KMPDUTL6",3,0)
 ;;
"RTN","KMPDUTL6",4,0)
CPUDEL ;-- delete cpu data from file #8973 - cp parameters
"RTN","KMPDUTL6",5,0)
 ;
"RTN","KMPDUTL6",6,0)
 N DA,DIK,X,Y
"RTN","KMPDUTL6",7,0)
 ;
"RTN","KMPDUTL6",8,0)
 S DA(1)=$O(^KMPD(8973,0)) Q:'DA(1)
"RTN","KMPDUTL6",9,0)
 S DIK="^KMPD(8973,"_DA(1)_",20,"
"RTN","KMPDUTL6",10,0)
 F DA=0:0 S DA=$O(^KMPD(8973,DA(1),20,DA)) Q:'DA  D ^DIK
"RTN","KMPDUTL6",11,0)
 ;
"RTN","KMPDUTL6",12,0)
 Q
"RTN","KMPDUTL6",13,0)
 ;
"RTN","KMPDUTL6",14,0)
CPUGET(KMPDARRY) ;--get cpu data
"RTN","KMPDUTL6",15,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL6",16,0)
 ; KMPDARRY... Return array (passed by reference) in format:
"RTN","KMPDUTL6",17,0)
 ;              KMPDARRY(1)=Node
"RTN","KMPDUTL6",18,0)
 ;-----------------------------------------------------------------------
"RTN","KMPDUTL6",19,0)
 ;
"RTN","KMPDUTL6",20,0)
 K KMPDARRY
"RTN","KMPDUTL6",21,0)
 Q:$G(^KMPD(8973,1,20,0))=""
"RTN","KMPDUTL6",22,0)
 M KMPDARRY=^KMPD(8973,1,20)
"RTN","KMPDUTL6",23,0)
 ;
"RTN","KMPDUTL6",24,0)
 Q
"RTN","KMPDUTL6",25,0)
 ;
"RTN","KMPDUTL6",26,0)
CPUSET(KMPDLT) ;-- set cpu info into file #8973 cp parameters
"RTN","KMPDUTL6",27,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL6",28,0)
 ; KMPDLT... Delete previous entries
"RTN","KMPDUTL6",29,0)
 ;            0 - do not delete
"RTN","KMPDUTL6",30,0)
 ;            1 - delete
"RTN","KMPDUTL6",31,0)
 ;---------------------------------------------------------------------
"RTN","KMPDUTL6",32,0)
 ;
"RTN","KMPDUTL6",33,0)
 S KMPDLT=+$G(KMPDLT)
"RTN","KMPDUTL6",34,0)
 ;
"RTN","KMPDUTL6",35,0)
 N CPU,IEN,ERROR,FDA,NODE,ZIEN
"RTN","KMPDUTL6",36,0)
 ;
"RTN","KMPDUTL6",37,0)
 ; delete current CPU entries
"RTN","KMPDUTL6",38,0)
 D:KMPDLT CPUDEL
"RTN","KMPDUTL6",39,0)
 ;
"RTN","KMPDUTL6",40,0)
 S IEN=$O(^KMPD(8973,0)) Q:'IEN
"RTN","KMPDUTL6",41,0)
 ; get cpu data
"RTN","KMPDUTL6",42,0)
 D CPU^KMPDUTL5(.CPU) Q:'$D(CPU)
"RTN","KMPDUTL6",43,0)
 ; file cpu data
"RTN","KMPDUTL6",44,0)
 S NODE=""
"RTN","KMPDUTL6",45,0)
 F  S NODE=$O(CPU(NODE)) Q:NODE=""  D 
"RTN","KMPDUTL6",46,0)
 .K FDA,ERROR,ZIEN
"RTN","KMPDUTL6",47,0)
 .S FDA($J,8973.201,"?+1,"_IEN_",",.01)=NODE
"RTN","KMPDUTL6",48,0)
 .S FDA($J,8973.201,"?+1,"_IEN_",",.02)=$P(CPU(NODE),U)
"RTN","KMPDUTL6",49,0)
 .S FDA($J,8973.201,"?+1,"_IEN_",",.03)=$P(CPU(NODE),U,2)
"RTN","KMPDUTL6",50,0)
 .S FDA($J,8973.201,"?+1,"_IEN_",",.04)=$P(CPU(NODE),U,3)
"RTN","KMPDUTL6",51,0)
 .S FDA($J,8973.201,"?+1,"_IEN_",",.05)=$P(CPU(NODE),U,4)
"RTN","KMPDUTL6",52,0)
 .D UPDATE^DIE("","FDA($J)",.ZIEN,"ERROR")
"RTN","KMPDUTL6",53,0)
 ;
"RTN","KMPDUTL6",54,0)
 Q
"SEC","^DD",8972.1,8972.1,99.04,9)

"SEC","^DD",8972.1,8972.1,99.05,9)

"SEC","^DD",8972.1,8972.1,99.06,9)

"SEC","^DD",8972.1,8972.1,99.07,9)

"SEC","^DD",8972.1,8972.1,99.08,9)

"SEC","^DD",8972.1,8972.1,99.09,9)

"SEC","^DIC",8972.1,8972.1,0,"AUDIT")
@
"SEC","^DIC",8972.1,8972.1,0,"DD")
@
"SEC","^DIC",8972.1,8972.1,0,"DEL")
@
"SEC","^DIC",8972.1,8972.1,0,"LAYGO")
@
"SEC","^DIC",8972.1,8972.1,0,"RD")
@
"SEC","^DIC",8972.1,8972.1,0,"WR")
@
"SEC","^DIC",8973,8973,0,"AUDIT")
@
"SEC","^DIC",8973,8973,0,"DD")
@
"SEC","^DIC",8973,8973,0,"DEL")
@
"SEC","^DIC",8973,8973,0,"LAYGO")
@
"SEC","^DIC",8973,8973,0,"RD")
@
"SEC","^DIC",8973,8973,0,"WR")
@
"SEC","^DIC",8973.1,8973.1,0,"AUDIT")
@
"SEC","^DIC",8973.1,8973.1,0,"DD")
@
"SEC","^DIC",8973.1,8973.1,0,"DEL")
@
"SEC","^DIC",8973.1,8973.1,0,"LAYGO")
@
"SEC","^DIC",8973.1,8973.1,0,"RD")
@
"SEC","^DIC",8973.1,8973.1,0,"WR")
@
"SEC","^DIC",8973.2,8973.2,0,"AUDIT")
@
"SEC","^DIC",8973.2,8973.2,0,"DD")
@
"SEC","^DIC",8973.2,8973.2,0,"DEL")
@
"SEC","^DIC",8973.2,8973.2,0,"LAYGO")
@
"SEC","^DIC",8973.2,8973.2,0,"RD")
@
"SEC","^DIC",8973.2,8973.2,0,"WR")
@
"VER")
8.0^22.0
"^DD",8972.1,8972.1,0)
FIELD^^99.09^22
"^DD",8972.1,8972.1,0,"DDA")
N
"^DD",8972.1,8972.1,0,"DT")
3000405
"^DD",8972.1,8972.1,0,"IX","B",8972.1,.01)

"^DD",8972.1,8972.1,0,"NM","CP CODE EVALUATOR")

"^DD",8972.1,8972.1,0,"VRPK")
CAPACITY MANAGEMENT TOOLS
"^DD",8972.1,8972.1,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",8972.1,8972.1,.01,1,0)
^.1
"^DD",8972.1,8972.1,.01,1,1,0)
8972.1^B
"^DD",8972.1,8972.1,.01,1,1,1)
S ^KMPD(8972.1,"B",$E(X,1,30),DA)=""
"^DD",8972.1,8972.1,.01,1,1,2)
K ^KMPD(8972.1,"B",$E(X,1,30),DA)
"^DD",8972.1,8972.1,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",8972.1,8972.1,.02,0)
DATE/TIME ENTERED^D^^0;2^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",8972.1,8972.1,.02,"DT")
2990820
"^DD",8972.1,8972.1,.03,0)
ENTERED BY^P200'^VA(200,^0;3^Q
"^DD",8972.1,8972.1,.03,"DT")
2990820
"^DD",8972.1,8972.1,.04,0)
CPU TIME^F^^0;4^K:$L(X)>15!($L(X)<1) X
"^DD",8972.1,8972.1,.04,3)
Answer must be 1-15 characters in length.
"^DD",8972.1,8972.1,.04,"DT")
2990820
"^DD",8972.1,8972.1,.05,0)
DIO REFERENCES^F^^0;5^K:$L(X)>15!($L(X)<1) X
"^DD",8972.1,8972.1,.05,3)
Answer must be 1-15 characters in length.
"^DD",8972.1,8972.1,.05,"DT")
2990820
"^DD",8972.1,8972.1,.06,0)
BIO REFERENCES^F^^0;6^K:$L(X)>15!($L(X)<1) X
"^DD",8972.1,8972.1,.06,3)
Answer must be 1-15 characters in length.
"^DD",8972.1,8972.1,.06,"DT")
2990820
"^DD",8972.1,8972.1,.07,0)
PAGE FAULTS^F^^0;7^K:$L(X)>15!($L(X)<1) X
"^DD",8972.1,8972.1,.07,3)
Answer must be 1-15 characters in length.
"^DD",8972.1,8972.1,.07,"DT")
2990820
"^DD",8972.1,8972.1,.08,0)
M COMMANDS^F^^0;8^K:$L(X)>15!($L(X)<1) X
"^DD",8972.1,8972.1,.08,3)
Answer must be 1-15 characters in length.
"^DD",8972.1,8972.1,.08,"DT")
2990820
"^DD",8972.1,8972.1,.09,0)
GLOBAL REFERENCES^F^^0;9^K:$L(X)>15!($L(X)<1) X
"^DD",8972.1,8972.1,.09,3)
Answer must be 1-15 characters in length.
"^DD",8972.1,8972.1,.09,"DT")
2990820
"^DD",8972.1,8972.1,.1,0)
COUNT^F^^0;10^K:$L(X)>15!($L(X)<1) X
"^DD",8972.1,8972.1,.1,3)
Answer must be 1-15 characters in length
"^DD",8972.1,8972.1,.1,"DT")
3000315
"^DD",8972.1,8972.1,.11,0)
ACTIVE^S^0:NO;1:YES;^0;11^Q
"^DD",8972.1,8972.1,.11,"DT")
3000404
"^DD",8972.1,8972.1,1.01,0)
BRIEF DESCRIPTION^F^^1;1^K:$L(X)>60!($L(X)<1) X
"^DD",8972.1,8972.1,1.01,3)
Answer must be 1-60 characters in length
"^DD",8972.1,8972.1,1.01,"DT")
3000316
"^DD",8972.1,8972.1,2.01,0)
DATE/TIME LAST EDITED^D^^2;1^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8972.1,8972.1,2.01,3)
(No range limit on date)
"^DD",8972.1,8972.1,2.01,"DT")
3000329
"^DD",8972.1,8972.1,2.02,0)
LAST EDITED BY^P200'^VA(200,^2;2^Q
"^DD",8972.1,8972.1,2.02,"DT")
3000329
"^DD",8972.1,8972.1,10,0)
COMMENTS^8972.11^^10;0
"^DD",8972.1,8972.1,11,0)
ASSOCIATED ROUTINE^8972.111^^11;0
"^DD",8972.1,8972.1,99.04,0)
AVE CPU TIME^CJ15^^ ; ^X ^DD(8972.1,99.04,9.4) S X=$E(Y(8972.1,99.04,5),Y(8972.1,99.04,6),X)
"^DD",8972.1,8972.1,99.04,9.01)
8972.1^.04;8972.1^.1
"^DD",8972.1,8972.1,99.04,9.1)
$E($S(COUNT:CPU TIME/COUNT,1:CPU TIME),1,15)
"^DD",8972.1,8972.1,99.04,9.2)
S Y(8972.1,99.04,1)=$S($D(^KMPD(8972.1,D0,0)):^(0),1:"") S X=$P(Y(8972.1,99.04,1),U,10),Y(8972.1,99.04,2)=X S X=$P(Y(8972.1,99.04,1),U,4),X=$S($P(Y(8972.1,99.04,1),U,10):X/$P(Y(8972.1,99.04,1),U,10),1:"*******")
"^DD",8972.1,8972.1,99.04,9.3)
X ^DD(8972.1,99.04,9.2) S Y(8972.1,99.04,3)=X S X=1,Y(8972.1,99.04,4)=X S X=$P(Y(8972.1,99.04,1),U,4)
"^DD",8972.1,8972.1,99.04,9.4)
X ^DD(8972.1,99.04,9.3) S X=$S(Y(8972.1,99.04,2):Y(8972.1,99.04,3),Y(8972.1,99.04,4):X),Y(8972.1,99.04,5)=X S X=1,Y(8972.1,99.04,6)=X S X=15
"^DD",8972.1,8972.1,99.04,"DT")
3000404
"^DD",8972.1,8972.1,99.05,0)
AVE DIO REFERENCES^CJ15^^ ; ^X ^DD(8972.1,99.05,9.4) S X=$E(Y(8972.1,99.05,5),Y(8972.1,99.05,6),X)
"^DD",8972.1,8972.1,99.05,9.01)
8972.1^.05;8972.1^.1
"^DD",8972.1,8972.1,99.05,9.1)
$E($S(COUNT:DIO REFERENCES/COUNT,1:DIO REFERENCES),1,15)
"^DD",8972.1,8972.1,99.05,9.2)
S Y(8972.1,99.05,1)=$S($D(^KMPD(8972.1,D0,0)):^(0),1:"") S X=$P(Y(8972.1,99.05,1),U,10),Y(8972.1,99.05,2)=X S X=$P(Y(8972.1,99.05,1),U,5),X=$S($P(Y(8972.1,99.05,1),U,10):X/$P(Y(8972.1,99.05,1),U,10),1:"*******")
"^DD",8972.1,8972.1,99.05,9.3)
X ^DD(8972.1,99.05,9.2) S Y(8972.1,99.05,3)=X S X=1,Y(8972.1,99.05,4)=X S X=$P(Y(8972.1,99.05,1),U,5)
"^DD",8972.1,8972.1,99.05,9.4)
X ^DD(8972.1,99.05,9.3) S X=$S(Y(8972.1,99.05,2):Y(8972.1,99.05,3),Y(8972.1,99.05,4):X),Y(8972.1,99.05,5)=X S X=1,Y(8972.1,99.05,6)=X S X=15
"^DD",8972.1,8972.1,99.05,"DT")
3000404
"^DD",8972.1,8972.1,99.06,0)
AVE BIO REFERENCES^CJ15^^ ; ^X ^DD(8972.1,99.06,9.4) S X=$E(Y(8972.1,99.06,5),Y(8972.1,99.06,6),X)
"^DD",8972.1,8972.1,99.06,9.01)
8972.1^.06;8972.1^.1
"^DD",8972.1,8972.1,99.06,9.1)
$E($S(COUNT:BIO REFERENCES/COUNT,1:BIO REFERENCES),1,15)
"^DD",8972.1,8972.1,99.06,9.2)
S Y(8972.1,99.06,1)=$S($D(^KMPD(8972.1,D0,0)):^(0),1:"") S X=$P(Y(8972.1,99.06,1),U,10),Y(8972.1,99.06,2)=X S X=$P(Y(8972.1,99.06,1),U,6),X=$S($P(Y(8972.1,99.06,1),U,10):X/$P(Y(8972.1,99.06,1),U,10),1:"*******")
"^DD",8972.1,8972.1,99.06,9.3)
X ^DD(8972.1,99.06,9.2) S Y(8972.1,99.06,3)=X S X=1,Y(8972.1,99.06,4)=X S X=$P(Y(8972.1,99.06,1),U,6)
"^DD",8972.1,8972.1,99.06,9.4)
X ^DD(8972.1,99.06,9.3) S X=$S(Y(8972.1,99.06,2):Y(8972.1,99.06,3),Y(8972.1,99.06,4):X),Y(8972.1,99.06,5)=X S X=1,Y(8972.1,99.06,6)=X S X=15
"^DD",8972.1,8972.1,99.06,"DT")
3000404
"^DD",8972.1,8972.1,99.07,0)
AVE PAGE FAULTS^CJ15^^ ; ^X ^DD(8972.1,99.07,9.4) S X=$E(Y(8972.1,99.07,5),Y(8972.1,99.07,6),X)
"^DD",8972.1,8972.1,99.07,9.01)
8972.1^.07;8972.1^.1
"^DD",8972.1,8972.1,99.07,9.1)
$E($S(COUNT:PAGE FAULTS/COUNT,1:PAGE FAULTS),1,15)
"^DD",8972.1,8972.1,99.07,9.2)
S Y(8972.1,99.07,1)=$S($D(^KMPD(8972.1,D0,0)):^(0),1:"") S X=$P(Y(8972.1,99.07,1),U,10),Y(8972.1,99.07,2)=X S X=$P(Y(8972.1,99.07,1),U,7),X=$S($P(Y(8972.1,99.07,1),U,10):X/$P(Y(8972.1,99.07,1),U,10),1:"*******")
"^DD",8972.1,8972.1,99.07,9.3)
X ^DD(8972.1,99.07,9.2) S Y(8972.1,99.07,3)=X S X=1,Y(8972.1,99.07,4)=X S X=$P(Y(8972.1,99.07,1),U,7)
"^DD",8972.1,8972.1,99.07,9.4)
X ^DD(8972.1,99.07,9.3) S X=$S(Y(8972.1,99.07,2):Y(8972.1,99.07,3),Y(8972.1,99.07,4):X),Y(8972.1,99.07,5)=X S X=1,Y(8972.1,99.07,6)=X S X=15
"^DD",8972.1,8972.1,99.07,"DT")
3000404
"^DD",8972.1,8972.1,99.08,0)
AVE M COMMANDS^CJ15^^ ; ^X ^DD(8972.1,99.08,9.4) S X=$E(Y(8972.1,99.08,5),Y(8972.1,99.08,6),X)
"^DD",8972.1,8972.1,99.08,9.01)
8972.1^.08;8972.1^.1
"^DD",8972.1,8972.1,99.08,9.1)
$E($S(COUNT:M COMMANDS/COUNT,1:M COMMANDS),1,15)
"^DD",8972.1,8972.1,99.08,9.2)
S Y(8972.1,99.08,1)=$S($D(^KMPD(8972.1,D0,0)):^(0),1:"") S X=$P(Y(8972.1,99.08,1),U,10),Y(8972.1,99.08,2)=X S X=$P(Y(8972.1,99.08,1),U,8),X=$S($P(Y(8972.1,99.08,1),U,10):X/$P(Y(8972.1,99.08,1),U,10),1:"*******")
"^DD",8972.1,8972.1,99.08,9.3)
X ^DD(8972.1,99.08,9.2) S Y(8972.1,99.08,3)=X S X=1,Y(8972.1,99.08,4)=X S X=$P(Y(8972.1,99.08,1),U,8)
"^DD",8972.1,8972.1,99.08,9.4)
X ^DD(8972.1,99.08,9.3) S X=$S(Y(8972.1,99.08,2):Y(8972.1,99.08,3),Y(8972.1,99.08,4):X),Y(8972.1,99.08,5)=X S X=1,Y(8972.1,99.08,6)=X S X=15
"^DD",8972.1,8972.1,99.08,"DT")
3000404
"^DD",8972.1,8972.1,99.09,0)
AVE GLOBAL REFERENCES^CJ15^^ ; ^X ^DD(8972.1,99.09,9.4) S X=$E(Y(8972.1,99.09,5),Y(8972.1,99.09,6),X)
"^DD",8972.1,8972.1,99.09,9.01)
8972.1^.09;8972.1^.1
"^DD",8972.1,8972.1,99.09,9.1)
$E($S(COUNT:GLOBAL REFERENCES/COUNT,1:GLOBAL REFERENCES),1,15)
"^DD",8972.1,8972.1,99.09,9.2)
S Y(8972.1,99.09,1)=$S($D(^KMPD(8972.1,D0,0)):^(0),1:"") S X=$P(Y(8972.1,99.09,1),U,10),Y(8972.1,99.09,2)=X S X=$P(Y(8972.1,99.09,1),U,9),X=$S($P(Y(8972.1,99.09,1),U,10):X/$P(Y(8972.1,99.09,1),U,10),1:"*******")
"^DD",8972.1,8972.1,99.09,9.3)
X ^DD(8972.1,99.09,9.2) S Y(8972.1,99.09,3)=X S X=1,Y(8972.1,99.09,4)=X S X=$P(Y(8972.1,99.09,1),U,9)
"^DD",8972.1,8972.1,99.09,9.4)
X ^DD(8972.1,99.09,9.3) S X=$S(Y(8972.1,99.09,2):Y(8972.1,99.09,3),Y(8972.1,99.09,4):X),Y(8972.1,99.09,5)=X S X=1,Y(8972.1,99.09,6)=X S X=15
"^DD",8972.1,8972.1,99.09,"DT")
3000404
"^DD",8972.1,8972.11,0)
COMMENTS SUB-FIELD^^.01^1
"^DD",8972.1,8972.11,0,"DT")
2990820
"^DD",8972.1,8972.11,0,"NM","COMMENTS")

"^DD",8972.1,8972.11,0,"UP")
8972.1
"^DD",8972.1,8972.11,.01,0)
COMMENTS^W^^0;1^Q
"^DD",8972.1,8972.11,.01,"DT")
2990820
"^DD",8972.1,8972.111,0)
ASSOCIATED ROUTINE SUB-FIELD^^.01^1
"^DD",8972.1,8972.111,0,"DT")
3000405
"^DD",8972.1,8972.111,0,"IX","B",8972.111,.01)

"^DD",8972.1,8972.111,0,"NM","ASSOCIATED ROUTINE")

"^DD",8972.1,8972.111,0,"UP")
8972.1
"^DD",8972.1,8972.111,.01,0)
ASSOCIATED ROUTINE^MF^^0;1^K:$L(X)>8!($L(X)<1) X
"^DD",8972.1,8972.111,.01,1,0)
^.1
"^DD",8972.1,8972.111,.01,1,1,0)
8972.111^B
"^DD",8972.1,8972.111,.01,1,1,1)
S ^KMPD(8972.1,DA(1),11,"B",$E(X,1,30),DA)=""
"^DD",8972.1,8972.111,.01,1,1,2)
K ^KMPD(8972.1,DA(1),11,"B",$E(X,1,30),DA)
"^DD",8972.1,8972.111,.01,3)
Answer must be 1-8 characters in length
"^DD",8972.1,8972.111,.01,"DT")
3000405
"^DD",8973,8973,0)
FIELD^^20^68
"^DD",8973,8973,0,"DT")
3040213
"^DD",8973,8973,0,"IX","B",8973,.01)

"^DD",8973,8973,0,"NM","CP PARAMETERS")

"^DD",8973,8973,0,"VRPK")
CAPACITY MANAGEMENT TOOLS
"^DD",8973,8973,.01,0)
NAME^R*P4'^DIC(4,^0;1^S DIC("S")="I '$O(^KMPD(8973,0))" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",8973,8973,.01,1,0)
^.1
"^DD",8973,8973,.01,1,1,0)
8973^B
"^DD",8973,8973,.01,1,1,1)
S ^KMPD(8973,"B",$E(X,1,30),DA)=""
"^DD",8973,8973,.01,1,1,2)
K ^KMPD(8973,"B",$E(X,1,30),DA)
"^DD",8973,8973,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",8973,8973,.01,12)
Allow only one entry in file.
"^DD",8973,8973,.01,12.1)
S DIC("S")="I '$O(^KMPD(8973,0))"
"^DD",8973,8973,.01,"DEL",.01,0)
I 1
"^DD",8973,8973,.01,"DT")
3031121
"^DD",8973,8973,.02,0)
CM TOOLS CURRENT VERSION^F^^0;2^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,.02,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,.02,"DT")
3031120
"^DD",8973,8973,.03,0)
CM TOOLS CURRENT VERSION INST^D^^0;3^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,.03,3)
(No range limit on date)
"^DD",8973,8973,.03,"DT")
3031120
"^DD",8973,8973,.04,0)
CM TOOLS CURRENT PATCH^F^^0;4^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,.04,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,.04,"DT")
3031120
"^DD",8973,8973,.05,0)
CM TOOLS CURRENT PATCH INST^D^^0;5^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,.05,3)
(No range limit on date)
"^DD",8973,8973,.05,"DT")
3031120
"^DD",8973,8973,1.01,0)
SAGG CURRENT VERSION^F^^1;1^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,1.01,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,1.01,"DT")
3031121
"^DD",8973,8973,1.02,0)
SAGG CURRENT VERSION INSTALL^D^^1;2^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.02,3)
(No range limit on date)
"^DD",8973,8973,1.02,"DT")
3031121
"^DD",8973,8973,1.03,0)
SAGG CURRENT PATCH^F^^1;3^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,1.03,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,1.03,"DT")
3031121
"^DD",8973,8973,1.04,0)
SAGG CURRENT PATCH INSTALL^D^^1;4^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.04,3)
(No range limit on date)
"^DD",8973,8973,1.04,"DT")
3031121
"^DD",8973,8973,1.05,0)
SAGG DLY BKG START^D^^1;5^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.05,3)
(No range limit on date)
"^DD",8973,8973,1.05,"DT")
3031121
"^DD",8973,8973,1.06,0)
SAGG DLY BKG STOP^D^^1;6^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.06,3)
(No range limit on date)
"^DD",8973,8973,1.06,"DT")
3031121
"^DD",8973,8973,1.07,0)
SAGG DLY BKG DELTA^F^^1;7^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,1.07,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,1.07,"DT")
3031121
"^DD",8973,8973,1.08,0)
SAGG WKY BKG START^D^^1;8^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.08,3)
(No range limit on date)
"^DD",8973,8973,1.08,"DT")
3031121
"^DD",8973,8973,1.09,0)
SAGG WKY BKG STOP^D^^1;9^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.09,3)
(No range limit on date)
"^DD",8973,8973,1.09,"DT")
3031121
"^DD",8973,8973,1.1,0)
SAGG WKY BKG DELTA^F^^1;10^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,1.1,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,1.1,"DT")
3031121
"^DD",8973,8973,1.11,0)
SAGG WEEKS TO KEEP DATA^NJ3,0^^1;11^K:+X'=X!(X>100)!(X<0)!(X?.E1"."1.N) X
"^DD",8973,8973,1.11,3)
Type a number between 0 and 100, 0 Decimal Digits
"^DD",8973,8973,1.11,"DT")
3031121
"^DD",8973,8973,1.12,0)
SAGG DLY PURGE START^D^^1;12^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.12,3)
(No range limit on date)
"^DD",8973,8973,1.12,"DT")
3031121
"^DD",8973,8973,1.13,0)
SAGG DLY PURGE STOP^D^^1;13^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.13,3)
(No range limit on date)
"^DD",8973,8973,1.13,"DT")
3031121
"^DD",8973,8973,1.14,0)
SAGG DLY PURGE DELTA^F^^1;14^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,1.14,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,1.14,"DT")
3031121
"^DD",8973,8973,1.15,0)
SAGG WKY PURGE START^D^^1;15^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.15,3)
(No range limit on date)
"^DD",8973,8973,1.15,"DT")
3031121
"^DD",8973,8973,1.16,0)
SAGG WKY PURGE STOP^D^^1;16^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,1.16,3)
(No range limit on date)
"^DD",8973,8973,1.16,"DT")
3031121
"^DD",8973,8973,1.17,0)
SAGG WKY PURGE DELTA^F^^1;17^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,1.17,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,1.17,"DT")
3031121
"^DD",8973,8973,2.01,0)
RUM CURRENT VERSION^F^^2;1^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,2.01,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,2.01,"DT")
3031120
"^DD",8973,8973,2.02,0)
RUM CURRENT VERSION INSTALL^D^^2;2^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.02,3)
(No range limit on date)
"^DD",8973,8973,2.02,"DT")
3031120
"^DD",8973,8973,2.03,0)
RUM CURRENT PATCH^F^^2;3^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,2.03,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,2.03,"DT")
3031120
"^DD",8973,8973,2.04,0)
RUM CURRENT PATCH INSTALL^D^^2;4^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.04,3)
(No range limit on date)
"^DD",8973,8973,2.04,"DT")
3031120
"^DD",8973,8973,2.05,0)
RUM DLY BKG START^D^^2;5^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.05,3)
(No range limit on date)
"^DD",8973,8973,2.05,"DT")
3031120
"^DD",8973,8973,2.06,0)
RUM DLY BKG STOP^D^^2;6^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.06,3)
(No range limit on date)
"^DD",8973,8973,2.06,"DT")
3031120
"^DD",8973,8973,2.07,0)
RUM DLY BKG DELTA^F^^2;7^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,2.07,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,2.07,"DT")
3031120
"^DD",8973,8973,2.08,0)
RUM WKY BKG START^D^^2;8^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.08,3)
(No range limit on date)
"^DD",8973,8973,2.08,"DT")
3031121
"^DD",8973,8973,2.09,0)
RUM WKY BKG STOP^D^^2;9^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.09,3)
(No range limit on date)
"^DD",8973,8973,2.09,"DT")
3031121
"^DD",8973,8973,2.1,0)
RUM WKY BKG DELTA^F^^2;10^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,2.1,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,2.1,"DT")
3031121
"^DD",8973,8973,2.11,0)
RUM WEEKS TO KEEP DATA^NJ2,0^^2;11^K:+X'=X!(X>20)!(X<2)!(X?.E1"."1.N) X
"^DD",8973,8973,2.11,3)
This is the number of weeks that RUM data will be retained in file #8971.1 before purging.  It is recommended that 2 weeks of data be retained.
"^DD",8973,8973,2.11,"DT")
3031209
"^DD",8973,8973,2.12,0)
RUM DLY PURGE START^D^^2;12^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.12,3)
(No range limit on date)
"^DD",8973,8973,2.12,"DT")
3031121
"^DD",8973,8973,2.13,0)
RUM DLY PURGE STOP^D^^2;13^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.13,3)
(No range limit on date)
"^DD",8973,8973,2.13,"DT")
3031121
"^DD",8973,8973,2.14,0)
RUM DLY PURGE DELTA^F^^2;14^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,2.14,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,2.14,"DT")
3031121
"^DD",8973,8973,2.15,0)
RUM WKY PURGE START^D^^2;15^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.15,3)
(No range limit on date)
"^DD",8973,8973,2.15,"DT")
3031121
"^DD",8973,8973,2.16,0)
RUM WKY PURGE STOP^D^^2;16^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,2.16,3)
(No range limit on date)
"^DD",8973,8973,2.16,"DT")
3031121
"^DD",8973,8973,2.17,0)
RUM WKY PURGE DELTA^F^^2;17^K:$L(X)>10!($L(X)<1) X
"^DD",8973,8973,2.17,3)
Answer must be 1-10 characters in length
"^DD",8973,8973,2.17,"DT")
3031121
"^DD",8973,8973,3.05,0)
HL7 DLY BKG START^D^^3;5^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.05,3)
(No range limit on date)
"^DD",8973,8973,3.05,"DT")
3031120
"^DD",8973,8973,3.06,0)
HL7 DLY BKG STOP^D^^3;6^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.06,3)
(No range limit on date)
"^DD",8973,8973,3.06,"DT")
3031120
"^DD",8973,8973,3.07,0)
HL7 DLY BKG DELTA^F^^3;7^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,3.07,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,3.07,"DT")
3031120
"^DD",8973,8973,3.08,0)
HL7 WKY BKG START^D^^3;8^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.08,3)
(No range limit on date)
"^DD",8973,8973,3.08,"DT")
3031121
"^DD",8973,8973,3.09,0)
HL7 WKY BKG STOP^D^^3;9^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.09,3)
(No range limit on date)
"^DD",8973,8973,3.09,"DT")
3031121
"^DD",8973,8973,3.1,0)
HL7 WKY BKG DELTA^F^^3;10^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,3.1,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,3.1,"DT")
3031121
"^DD",8973,8973,3.11,0)
HL7 WEEKS TO KEEP DATA^NJ2,0^^3;11^K:+X'=X!(X>20)!(X<2)!(X?.E1"."1.N) X
"^DD",8973,8973,3.11,3)
This is the number of weeks that HL7 data will be retained in file #8973.1 before purging.  It is recommended that 2 weeks of data be retained.
"^DD",8973,8973,3.11,"DT")
3031209
"^DD",8973,8973,3.12,0)
HL7 DLY PURGE START^D^^3;12^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.12,3)
(No range limit on date)
"^DD",8973,8973,3.12,"DT")
3031121
"^DD",8973,8973,3.13,0)
HL7 DLY PURGE END^D^^3;13^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.13,3)
(No range limit on date)
"^DD",8973,8973,3.13,"DT")
3031121
"^DD",8973,8973,3.14,0)
HL7 DLY PURGE DELTA^F^^3;14^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,3.14,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,3.14,"DT")
3031121
"^DD",8973,8973,3.15,0)
HL7 WKY PURGE START^D^^3;15^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.15,3)
(No range limit on date)
"^DD",8973,8973,3.15,"DT")
3031121
"^DD",8973,8973,3.16,0)
HL7 WKY PURGE END^D^^3;16^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,3.16,3)
(No range limit on date)
"^DD",8973,8973,3.16,"DT")
3031121
"^DD",8973,8973,3.17,0)
HL7 WKY PURGE DELTA^F^^3;17^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,3.17,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,3.17,"DT")
3031121
"^DD",8973,8973,4.05,0)
TIMING DLY BKG START^D^^4;5^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.05,3)
(No range limit on date)
"^DD",8973,8973,4.05,"DT")
3031120
"^DD",8973,8973,4.06,0)
TIMING DLY BKG STOP^D^^4;6^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.06,3)
(No range limit on date)
"^DD",8973,8973,4.06,"DT")
3031120
"^DD",8973,8973,4.07,0)
TIMING DLY BKG DELTA^F^^4;7^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,4.07,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,4.07,"DT")
3031120
"^DD",8973,8973,4.08,0)
TIMING WKY BKG START^D^^4;8^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.08,3)
(No range limit on date)
"^DD",8973,8973,4.08,"DT")
3031121
"^DD",8973,8973,4.09,0)
TIMING WKY BKG STOP^D^^4;9^S %DT="ESTR" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.09,3)
(No range limit on date)
"^DD",8973,8973,4.09,"DT")
3031121
"^DD",8973,8973,4.1,0)
TIMING WKY BKG DELTA^F^^4;10^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,4.1,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,4.1,"DT")
3031121
"^DD",8973,8973,4.11,0)
TIMING WEEKS TO KEEP DATA^NJ2,0^^4;11^K:+X'=X!(X>40)!(X<2)!(X?.E1"."1.N) X
"^DD",8973,8973,4.11,3)
This is the number of weeks that Timing data will be retained in file #8973.2 before purging.  It is recommended that 4 weeks of data be retained.             
"^DD",8973,8973,4.11,"DT")
3031211
"^DD",8973,8973,4.12,0)
TIMING DLY PURGE START^D^^4;12^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.12,3)
(No range limit on date)
"^DD",8973,8973,4.12,"DT")
3031121
"^DD",8973,8973,4.13,0)
TIMING DLY PURGE END^D^^4;13^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.13,3)
(No range limit on date)
"^DD",8973,8973,4.13,"DT")
3031121
"^DD",8973,8973,4.14,0)
TIMING DLY PURGE DELTA^F^^4;14^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,4.14,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,4.14,"DT")
3031121
"^DD",8973,8973,4.15,0)
TIMING WKY PURGE START^D^^4;15^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.15,3)
(No range limit on date)
"^DD",8973,8973,4.15,"DT")
3031121
"^DD",8973,8973,4.16,0)
TIMING WKY PURGE END^D^^4;16^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973,8973,4.16,3)
(No range limit on date)
"^DD",8973,8973,4.16,"DT")
3031121
"^DD",8973,8973,4.17,0)
TIMING WKY PURGE DELTA^F^^4;17^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973,4.17,3)
Answer must be 1-20 characters in length
"^DD",8973,8973,4.17,"DT")
3031121
"^DD",8973,8973,19.01,0)
MONITOR UPDATE RATE - MINUTES^NJ2,0^^19;1^K:+X'=X!(X>60)!(X<5)!(X?.E1"."1.N) X
"^DD",8973,8973,19.01,3)
When the Timing Monitor is running, this is the number of minutes between automatic updates. (Type a number between 5 and 60)
"^DD",8973,8973,19.01,"DT")
3040213
"^DD",8973,8973,19.02,0)
MONITOR ALERT - SECONDS^NJ3,0^^19;2^K:+X'=X!(X>999)!(X<10)!(X?.E1"."1.N) X
"^DD",8973,8973,19.02,3)
When the Timing Monitor is running, if the average time-to-load a CPRS Coversheet exceeds this value, an alert will appear on the Timing Monitor screen. (Type a number between 10 and 999)
"^DD",8973,8973,19.02,"DT")
3040213
"^DD",8973,8973,20,0)
CPU^8973.201^^20;0
"^DD",8973,8973.201,0)
CPU SUB-FIELD^^.05^5
"^DD",8973,8973.201,0,"DT")
3031125
"^DD",8973,8973.201,0,"IX","B",8973.201,.01)

"^DD",8973,8973.201,0,"NM","CPU")

"^DD",8973,8973.201,0,"UP")
8973
"^DD",8973,8973.201,.01,0)
NODE^F^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",8973,8973.201,.01,1,0)
^.1
"^DD",8973,8973.201,.01,1,1,0)
8973.201^B
"^DD",8973,8973.201,.01,1,1,1)
S ^KMPD(8973,DA(1),20,"B",$E(X,1,30),DA)=""
"^DD",8973,8973.201,.01,1,1,2)
K ^KMPD(8973,DA(1),20,"B",$E(X,1,30),DA)
"^DD",8973,8973.201,.01,3)
Answer must be 1-30 characters in length
"^DD",8973,8973.201,.01,"DT")
3031125
"^DD",8973,8973.201,.02,0)
TYPE OF CPU^F^^0;2^K:$L(X)>60!($L(X)<1) X
"^DD",8973,8973.201,.02,3)
Answer must be 1-60 characters in length
"^DD",8973,8973.201,.02,"DT")
3031125
"^DD",8973,8973.201,.03,0)
NUMBER OF PROCESSORS^NJ3,0^^0;3^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1.N) X
"^DD",8973,8973.201,.03,3)
Type a number between 0 and 999, 0 Decimal Digits
"^DD",8973,8973.201,.03,"DT")
3031125
"^DD",8973,8973.201,.04,0)
PROCESSOR SPEED^F^^0;4^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973.201,.04,3)
Answer must be 1-20 characters in length
"^DD",8973,8973.201,.04,"DT")
3031125
"^DD",8973,8973.201,.05,0)
AMOUNT OF MEMORY^F^^0;5^K:$L(X)>20!($L(X)<1) X
"^DD",8973,8973.201,.05,3)
Answer must be 1-20 characters in length
"^DD",8973,8973.201,.05,"DT")
3031125
"^DD",8973.1,8973.1,0)
FIELD^^99.503^368
"^DD",8973.1,8973.1,0,"DDA")
N
"^DD",8973.1,8973.1,0,"DT")
3030410
"^DD",8973.1,8973.1,0,"ID","W")
D:$G(Y) ID^KMPDUT2(Y)
"^DD",8973.1,8973.1,0,"IX","ACSDTPRNM",8973.1,99.212)

"^DD",8973.1,8973.1,0,"IX","APTDTNM",8973.1,.05)

"^DD",8973.1,8973.1,0,"IX","ASYNC",8973.1,.06)

"^DD",8973.1,8973.1,0,"IX","B",8973.1,.01)

"^DD",8973.1,8973.1,0,"NM","CM HL7 DATA")

"^DD",8973.1,8973.1,0,"VRPK")
CAPACITY MANAGEMENT TOOLS
"^DD",8973.1,8973.1,.01,0)
DATE^RD^^0;1^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",8973.1,8973.1,.01,1,0)
^.1
"^DD",8973.1,8973.1,.01,1,1,0)
8973.1^B
"^DD",8973.1,8973.1,.01,1,1,1)
S ^KMPD(8973.1,"B",$E(X,1,30),DA)=""
"^DD",8973.1,8973.1,.01,1,1,2)
K ^KMPD(8973.1,"B",$E(X,1,30),DA)
"^DD",8973.1,8973.1,.01,3)
(No range limit on date)
"^DD",8973.1,8973.1,.01,"DT")
3010820
"^DD",8973.1,8973.1,.02,0)
SENT TO NATIONAL DATABASE^S^0:NO;1:YES;^0;2^Q
"^DD",8973.1,8973.1,.02,3)

"^DD",8973.1,8973.1,.02,"DT")
3010720
"^DD",8973.1,8973.1,.03,0)
NAMESPACE^F^^0;3^K:$L(X)>4!($L(X)<1) X
"^DD",8973.1,8973.1,.03,3)
Answer must be 1-4 characters in length.
"^DD",8973.1,8973.1,.03,"DT")
3010820
"^DD",8973.1,8973.1,.05,0)
PROTOCOL^F^^0;5^K:$L(X)>63!($L(X)<3) X
"^DD",8973.1,8973.1,.05,1,0)
^.1
"^DD",8973.1,8973.1,.05,1,1,0)
8973.1^APTDTNM^MUMPS
"^DD",8973.1,8973.1,.05,1,1,1)
D XREF^KMPDUT2($G(DA),$G(X),1)
"^DD",8973.1,8973.1,.05,1,1,2)
D XREF^KMPDUT2($G(DA),$G(X),2)
"^DD",8973.1,8973.1,.05,1,1,"%D",0)
^^1^1^3010820^
"^DD",8973.1,8973.1,.05,1,1,"%D",1,0)
^KMPD(8973.1,"APTDTNM",Protocol,Date,Namespace)=""
"^DD",8973.1,8973.1,.05,1,1,"DT")
3010820
"^DD",8973.1,8973.1,.05,3)
Answer must be 3-63 characters in length
"^DD",8973.1,8973.1,.05,"DT")
3010820
"^DD",8973.1,8973.1,.06,0)
SYNC/ASYNC^S^1:SYNCHRONOUS;2:ASYNCHRONOUS;^0;6^Q
"^DD",8973.1,8973.1,.06,1,0)
^.1
"^DD",8973.1,8973.1,.06,1,1,0)
8973.1^ASYNC^MUMPS
"^DD",8973.1,8973.1,.06,1,1,1)
D XREF2^KMPDUT2($G(DA),$G(X),1)
"^DD",8973.1,8973.1,.06,1,1,2)
D XREF2^KMPDUT2($G(DA),$G(X),2)
"^DD",8973.1,8973.1,.06,1,1,"%D",0)
^^4^4^3020712^
"^DD",8973.1,8973.1,.06,1,1,"%D",1,0)
^KMPD(8973.1,"ASYNC",Date,Sync/Async,Ien)=""
"^DD",8973.1,8973.1,.06,1,1,"%D",2,0)
 
"^DD",8973.1,8973.1,.06,1,1,"%D",3,0)
        1 - synchronous
"^DD",8973.1,8973.1,.06,1,1,"%D",4,0)
        2 - asynchronous
"^DD",8973.1,8973.1,.06,1,1,"DT")
3020712
"^DD",8973.1,8973.1,.06,"DT")
3020712
"^DD",8973.1,8973.1,1.001,0)
TRANS TCP TOT CHR (PT)^F^^1;1^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.001,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.001,"DT")
3010720
"^DD",8973.1,8973.1,1.002,0)
TRANS TCP TOT MESSAGES (PT)^F^^1;2^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.002,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.002,"DT")
3010720
"^DD",8973.1,8973.1,1.003,0)
TRANS TCP TOT SECONDS (PT)^F^^1;3^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.003,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.003,"DT")
3010720
"^DD",8973.1,8973.1,1.004,0)
TRANS MAIL TOT CHR (PT)^F^^1;4^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.004,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.004,"DT")
3010720
"^DD",8973.1,8973.1,1.005,0)
TRANS MAIL TOT MESSAGES (PT)^F^^1;5^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.005,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.005,"DT")
3010720
"^DD",8973.1,8973.1,1.006,0)
TRANS MAIL TOT SECONDS (PT)^F^^1;6^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.006,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.006,"DT")
3010720
"^DD",8973.1,8973.1,1.007,0)
TRANS UNK TOT CHR (PT)^F^^1;7^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.007,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.007,"DT")
3010720
"^DD",8973.1,8973.1,1.008,0)
TRANS UNK TOT MESSAGES (PT)^F^^1;8^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.008,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.008,"DT")
3010720
"^DD",8973.1,8973.1,1.009,0)
TRANS UNK TOT SECONDS (PT)^F^^1;9^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.009,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.009,"DT")
3010720
"^DD",8973.1,8973.1,1.101,0)
I/O INCOMING TOT CHR (PT)^F^^1.1;1^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.101,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.101,"DT")
3010720
"^DD",8973.1,8973.1,1.102,0)
I/O INCOMING TOT MESSAGES (PT)^F^^1.1;2^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.102,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.102,"DT")
3010720
"^DD",8973.1,8973.1,1.103,0)
I/O INCOMING TOT SECONDS (PT)^F^^1.1;3^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.103,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.103,"DT")
3010720
"^DD",8973.1,8973.1,1.104,0)
I/O OUTGOING TOT CHR (PT)^F^^1.1;4^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.104,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.104,"DT")
3010720
"^DD",8973.1,8973.1,1.105,0)
I/O OUTGOING TOT MESSAGES (PT)^F^^1.1;5^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.105,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.105,"DT")
3010720
"^DD",8973.1,8973.1,1.106,0)
I/O OUTGOING TOT SECONDS (PT)^F^^1.1;6^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.106,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.106,"DT")
3010720
"^DD",8973.1,8973.1,1.107,0)
I/O UNK TOT CHR (PT)^F^^1.1;7^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.107,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.107,"DT")
3010720
"^DD",8973.1,8973.1,1.108,0)
I/O UNK TOT MESSAGES (PT)^F^^1.1;8^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.108,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.108,"DT")
3010720
"^DD",8973.1,8973.1,1.109,0)
I/O UNK TOT SECONDS (PT)^F^^1.1;9^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.109,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.109,"DT")
3010720
"^DD",8973.1,8973.1,1.201,0)
L/R LOCAL TOT CHR (PT)^F^^1.2;1^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.201,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.201,"DT")
3010720
"^DD",8973.1,8973.1,1.202,0)
L/R LOCAL TOT MESSAGES (PT)^F^^1.2;2^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.202,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.202,"DT")
3010720
"^DD",8973.1,8973.1,1.203,0)
L/R LOCAL TOT SECONDS (PT)^F^^1.2;3^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.203,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.203,"DT")
3010720
"^DD",8973.1,8973.1,1.204,0)
L/R REMOTE TOT CHR (PT)^F^^1.2;4^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.204,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.204,"DT")
3010720
"^DD",8973.1,8973.1,1.205,0)
L/R REMOTE TOT MESSAGES (PT)^F^^1.2;5^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.205,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.205,"DT")
3010720
"^DD",8973.1,8973.1,1.206,0)
L/R REMOTE TOT SECONDS (PT)^F^^1.2;6^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.206,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.206,"DT")
3010720
"^DD",8973.1,8973.1,1.207,0)
L/R UNK TOT CHR (PT)^F^^1.2;7^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.207,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.207,"DT")
3010720
"^DD",8973.1,8973.1,1.208,0)
L/R UNK TOT MESSAGES (PT)^F^^1.2;8^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.208,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.208,"DT")
3010720
"^DD",8973.1,8973.1,1.209,0)
L/R UNK TOT SECONDS (PT)^F^^1.2;9^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,1.209,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,1.209,"DT")
3010720
"^DD",8973.1,8973.1,2.001,0)
TRANS TCP TOT CHR (NP)^F^^2;1^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.001,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.001,"DT")
3010720
"^DD",8973.1,8973.1,2.002,0)
TRANS TCP TOT MESSAGES (NP)^F^^2;2^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.002,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.002,"DT")
3010720
"^DD",8973.1,8973.1,2.003,0)
TRANS TCP TOT SECONDS (NP)^F^^2;3^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.003,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.003,"DT")
3010720
"^DD",8973.1,8973.1,2.004,0)
TRANS MAIL TOT CHR (NP)^F^^2;4^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.004,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.004,"DT")
3010720
"^DD",8973.1,8973.1,2.005,0)
TRANS MAIL TOT MESSAGES (NP)^F^^2;5^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.005,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.005,"DT")
3010720
"^DD",8973.1,8973.1,2.006,0)
TRANS MAIL TOT SECONDS (NP)^F^^2;6^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.006,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.006,"DT")
3010720
"^DD",8973.1,8973.1,2.007,0)
TRANS UNK TOT CHR (NP)^F^^2;7^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.007,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.007,"DT")
3010720
"^DD",8973.1,8973.1,2.008,0)
TRANS UNK TOT MESSAGES (NP)^F^^2;8^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.008,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.008,"DT")
3010720
"^DD",8973.1,8973.1,2.009,0)
TRANS UNK TOT SECONDS (NP)^F^^2;9^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.009,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.009,"DT")
3010720
"^DD",8973.1,8973.1,2.101,0)
I/O INCOMING TOT CHR (PT)^F^^2.1;1^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.101,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.101,"DT")
3010720
"^DD",8973.1,8973.1,2.102,0)
I/O INCOMING TOT MESSAGES (NP)^F^^2.1;2^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.102,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.102,"DT")
3010720
"^DD",8973.1,8973.1,2.103,0)
I/O INCOMING TOT SECONDS (NP)^F^^2.1;3^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.103,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.103,"DT")
3010720
"^DD",8973.1,8973.1,2.104,0)
I/O OUTGOING TOT CHR (NP)^F^^2.1;4^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.104,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.104,"DT")
3010720
"^DD",8973.1,8973.1,2.105,0)
I/O OUTGOING TOT MESSAGES (NP)^F^^2.1;5^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.105,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.105,"DT")
3010720
"^DD",8973.1,8973.1,2.106,0)
I/O OUTGOING TOT SECONDS (NP)^F^^2.1;6^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.106,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.106,"DT")
3010720
"^DD",8973.1,8973.1,2.107,0)
I/O UNK TOT CHR (NP)^F^^2.1;7^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.107,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.107,"DT")
3010720
"^DD",8973.1,8973.1,2.108,0)
I/O UNK TOT MESSAGES (NP)^F^^2.1;8^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.108,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.108,"DT")
3010720
"^DD",8973.1,8973.1,2.109,0)
I/O UNK TOT SECONDS (NP)^F^^2.1;9^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.109,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.109,"DT")
3010720
"^DD",8973.1,8973.1,2.201,0)
L/R LOCAL TOT CHR (NP)^F^^2.2;1^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.201,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.201,"DT")
3010720
"^DD",8973.1,8973.1,2.202,0)
L/R LOCAL TOT MESSAGES (NP)^F^^2.2;2^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.202,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.202,"DT")
3010720
"^DD",8973.1,8973.1,2.203,0)
L/R LOCAL TOT SECONDS (NP)^F^^2.2;3^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.203,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.203,"DT")
3010720
"^DD",8973.1,8973.1,2.204,0)
L/R REMOTE TOT CHR (PT)^F^^2.2;4^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.204,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.204,"DT")
3010720
"^DD",8973.1,8973.1,2.205,0)
L/R REMOTE TOT MESSAGES (NP)^F^^2.2;5^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.205,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.205,"DT")
3010720
"^DD",8973.1,8973.1,2.206,0)
L/R REMOTE TOT SECONDS (NP)^F^^2.2;6^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.206,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.206,"DT")
3010720
"^DD",8973.1,8973.1,2.207,0)
L/R UNK TOT CHR (NP)^F^^2.2;7^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.207,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.207,"DT")
3010720
"^DD",8973.1,8973.1,2.208,0)
L/R UNK TOT MESSAGES (NP)^F^^2.2;8^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.208,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.208,"DT")
3010720
"^DD",8973.1,8973.1,2.209,0)
L/R UNK TOT SECONDS (NP)^F^^2.2;9^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,2.209,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,2.209,"DT")
3010720
"^DD",8973.1,8973.1,5.109,0)
HOUR 8 MSG TO CA CHR (PT)^F^^5.1;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.109,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.109,"DT")
3021205
"^DD",8973.1,8973.1,5.11,0)
HOUR 9 MSG TO CA CHR (PT)^F^^5.1;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.11,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.11,"DT")
3021205
"^DD",8973.1,8973.1,5.111,0)
HOUR 10 MSG TO CA CHR (PT)^F^^5.1;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.111,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.111,"DT")
3021205
"^DD",8973.1,8973.1,5.112,0)
HOUR 11 MSG TO CA CHR (PT)^F^^5.1;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.112,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.112,"DT")
3021205
"^DD",8973.1,8973.1,5.113,0)
HOUR 12 MSG TO CA CHR (PT)^F^^5.1;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.113,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.113,"DT")
3021205
"^DD",8973.1,8973.1,5.114,0)
HOUR 13 MSG TO CA CHR (PT)^F^^5.1;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.114,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.114,"DT")
3021205
"^DD",8973.1,8973.1,5.115,0)
HOUR 14 MSG TO CA CHR (PT)^F^^5.1;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.115,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.115,"DT")
3021205
"^DD",8973.1,8973.1,5.116,0)
HOUR 15 MSG TO CA CHR (PT)^F^^5.1;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.116,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.116,"DT")
3021205
"^DD",8973.1,8973.1,5.117,0)
HOUR 16 MSG TO CA CHR (PT)^F^^5.1;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.117,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.117,"DT")
3021205
"^DD",8973.1,8973.1,5.209,0)
HOUR 8 MSG TO CA MSGS (PT)^F^^5.2;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.209,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.209,"DT")
3021204
"^DD",8973.1,8973.1,5.21,0)
HOUR 9 MSG TO CA MSGS (PT)^F^^5.2;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.21,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.21,"DT")
3021204
"^DD",8973.1,8973.1,5.211,0)
HOUR 10 MSG TO CA MSGS (PT)^F^^5.2;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.211,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.211,"DT")
3021204
"^DD",8973.1,8973.1,5.212,0)
HOUR 11 MSG TO CA MSGS (PT)^F^^5.2;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.212,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.212,"DT")
3021204
"^DD",8973.1,8973.1,5.213,0)
HOUR 12 MSG TO CA MSGS (PT)^F^^5.2;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.213,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.213,"DT")
3021204
"^DD",8973.1,8973.1,5.214,0)
HOUR 13 MSG TO CA MSGS (PT)^F^^5.2;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.214,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.214,"DT")
3021204
"^DD",8973.1,8973.1,5.215,0)
HOUR 14 MSG TO CA MSGS (PT)^F^^5.2;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.215,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.215,"DT")
3021204
"^DD",8973.1,8973.1,5.216,0)
HOUR 15 MSG TO CA MSGS (PT)^F^^5.2;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.216,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.216,"DT")
3021204
"^DD",8973.1,8973.1,5.217,0)
HOUR 16 MSG TO CA MSGS (PT)^F^^5.2;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.217,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.217,"DT")
3021204
"^DD",8973.1,8973.1,5.309,0)
HOUR 8 MSG TO CA SEC (PT)^F^^5.3;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.309,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.309,"DT")
3021205
"^DD",8973.1,8973.1,5.31,0)
HOUR 9 MSG TO CA SEC (PT)^F^^5.3;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.31,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.31,"DT")
3021205
"^DD",8973.1,8973.1,5.311,0)
HOUR 10 MSG TO CA SEC (PT)^F^^5.3;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.311,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.311,"DT")
3021205
"^DD",8973.1,8973.1,5.312,0)
HOUR 11 MSG TO CA SEC (PT)^F^^5.3;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.312,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.312,"DT")
3021205
"^DD",8973.1,8973.1,5.313,0)
HOUR 12 MSG TO CA SEC (PT)^F^^5.3;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.313,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.313,"DT")
3021205
"^DD",8973.1,8973.1,5.314,0)
HOUR 13 MSG TO CA SEC (PT)^F^^5.3;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.314,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.314,"DT")
3021205
"^DD",8973.1,8973.1,5.315,0)
HOUR 14 MSG TO CA SEC (PT)^F^^5.3;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.315,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.315,"DT")
3021205
"^DD",8973.1,8973.1,5.316,0)
HOUR 15 MSG TO CA SEC (PT)^F^^5.3;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.316,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.316,"DT")
3021205
"^DD",8973.1,8973.1,5.317,0)
HOUR 16 MSG TO CA SEC (PT)^F^^5.3;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.317,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.317,"DT")
3021205
"^DD",8973.1,8973.1,5.409,0)
HOUR 8 PROC TM (CA-AA) (PT)^F^^5.4;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.409,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.409,"DT")
3021206
"^DD",8973.1,8973.1,5.41,0)
HOUR 9 PROC TM (CA-AA) (PT)^F^^5.4;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.41,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.41,"DT")
3021206
"^DD",8973.1,8973.1,5.411,0)
HOUR 10 PROC TM (CA-AA) (PT)^F^^5.4;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.411,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.411,"DT")
3021206
"^DD",8973.1,8973.1,5.412,0)
HOUR 11 PROC TM (CA-AA) (PT)^F^^5.4;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.412,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.412,"DT")
3021206
"^DD",8973.1,8973.1,5.413,0)
HOUR 12 PROC TM (CA-AA) (PT)^F^^5.4;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.413,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.413,"DT")
3021206
"^DD",8973.1,8973.1,5.414,0)
HOUR 13 PROC TM (CA-AA) (PT)^F^^5.4;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.414,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.414,"DT")
3021206
"^DD",8973.1,8973.1,5.415,0)
HOUR 14 PROC TM (CA-AA) (PT)^F^^5.4;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.415,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.415,"DT")
3021206
"^DD",8973.1,8973.1,5.416,0)
HOUR 15 PROC TM (CA-AA) (PT)^F^^5.4;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.416,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.416,"DT")
3021206
"^DD",8973.1,8973.1,5.417,0)
HOUR 16 PROC TM (CA-AA) (PT)^F^^5.4;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.417,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.417,"DT")
3021206
"^DD",8973.1,8973.1,5.509,0)
HOUR 8 PROC CNT (CA-AA) (PT)^F^^5.5;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.509,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.509,"DT")
3021210
"^DD",8973.1,8973.1,5.51,0)
HOUR 9 PROC CNT (CA-AA) (PT)^F^^5.5;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.51,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.51,"DT")
3021210
"^DD",8973.1,8973.1,5.511,0)
HOUR 10 PROC CNT (CA-AA) (PT)^F^^5.5;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.511,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.511,"DT")
3021210
"^DD",8973.1,8973.1,5.512,0)
HOUR 11 PROC CNT (CA-AA) (PT)^F^^5.5;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.512,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.512,"DT")
3021210
"^DD",8973.1,8973.1,5.513,0)
HOUR 12 PROC CNT (CA-AA) (PT)^F^^5.5;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.513,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.513,"DT")
3021210
"^DD",8973.1,8973.1,5.514,0)
HOUR 13 PROC CNT (CA-AA) (PT)^F^^5.5;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.514,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.514,"DT")
3021210
"^DD",8973.1,8973.1,5.515,0)
HOUR 14 PROC CNT (CA-AA) (PT)^F^^5.5;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.515,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.515,"DT")
3021210
"^DD",8973.1,8973.1,5.516,0)
HOUR 15 PROC CNT (CA-AA) (PT)^F^^5.5;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.516,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.516,"DT")
3021210
"^DD",8973.1,8973.1,5.517,0)
HOUR 16 PROC CNT (CA-AA) (PT)^F^^5.5;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.517,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.517,"DT")
3021210
"^DD",8973.1,8973.1,5.709,0)
HOUR 8 AA TO CA CHR (PT)^F^^5.7;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.709,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.709,"DT")
3021206
"^DD",8973.1,8973.1,5.71,0)
HOUR 9 AA TO CA CHR (PT)^F^^5.7;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.71,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.71,"DT")
3021206
"^DD",8973.1,8973.1,5.711,0)
HOUR 10 AA TO CA CHR (PT)^F^^5.7;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.711,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.711,"DT")
3021206
"^DD",8973.1,8973.1,5.712,0)
HOUR 11 AA TO CA CHR (PT)^F^^5.7;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.712,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.712,"DT")
3021206
"^DD",8973.1,8973.1,5.713,0)
HOUR 12 AA TO CA CHR (PT)^F^^5.7;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.713,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.713,"DT")
3021206
"^DD",8973.1,8973.1,5.714,0)
HOUR 13 AA TO CA CHR (PT)^F^^5.7;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.714,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.714,"DT")
3021206
"^DD",8973.1,8973.1,5.715,0)
HOUR 14 AA TO CA CHR (PT)^F^^5.7;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.715,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.715,"DT")
3021206
"^DD",8973.1,8973.1,5.716,0)
HOUR 15 AA TO CA CHR (PT)^F^^5.7;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.716,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.716,"DT")
3021206
"^DD",8973.1,8973.1,5.717,0)
HOUR 16 AA TO CA CHR (PT)^F^^5.7;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.717,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.717,"DT")
3021206
"^DD",8973.1,8973.1,5.809,0)
HOUR 8 AA TO CA MSGS (PT)^F^^5.8;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.809,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.809,"DT")
3021204
"^DD",8973.1,8973.1,5.81,0)
HOUR 9 AA TO CA MSGS (PT)^F^^5.8;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.81,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.81,"DT")
3021204
"^DD",8973.1,8973.1,5.811,0)
HOUR 10 AA TO CA MSGS (PT)^F^^5.8;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.811,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.811,"DT")
3021204
"^DD",8973.1,8973.1,5.812,0)
HOUR 11 AA TO CA MSGS (PT)^F^^5.8;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.812,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.812,"DT")
3021204
"^DD",8973.1,8973.1,5.813,0)
HOUR 12 AA TO CA MSGS (PT)^F^^5.8;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.813,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.813,"DT")
3021204
"^DD",8973.1,8973.1,5.814,0)
HOUR 13 AA TO CA MSGS (PT)^F^^5.8;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.814,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.814,"DT")
3021204
"^DD",8973.1,8973.1,5.815,0)
HOUR 14 AA TO CA MSGS (PT)^F^^5.8;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.815,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.815,"DT")
3021204
"^DD",8973.1,8973.1,5.816,0)
HOUR 15 AA TO CA MSGS (PT)^F^^5.8;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.816,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.816,"DT")
3021204
"^DD",8973.1,8973.1,5.817,0)
HOUR 16 AA TO CA MSGS (PT)^F^^5.8;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.817,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.817,"DT")
3021204
"^DD",8973.1,8973.1,5.909,0)
HOUR 8 AA TO CA SEC (PT)^F^^5.9;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.909,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.909,"DT")
3021210
"^DD",8973.1,8973.1,5.91,0)
HOUR 9 AA TO CA SEC (PT)^F^^5.9;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.91,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.91,"DT")
3021210
"^DD",8973.1,8973.1,5.911,0)
HOUR 10 AA TO CA SEC (PT)^F^^5.9;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.911,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.911,"DT")
3021210
"^DD",8973.1,8973.1,5.912,0)
HOUR 11 AA TO CA SEC (PT)^F^^5.9;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.912,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.912,"DT")
3021210
"^DD",8973.1,8973.1,5.913,0)
HOUR 12 AA TO CA SEC (PT)^F^^5.9;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.913,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.913,"DT")
3021210
"^DD",8973.1,8973.1,5.914,0)
HOUR 13 AA TO CA SEC (PT)^F^^5.9;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.914,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.914,"DT")
3021210
"^DD",8973.1,8973.1,5.915,0)
HOUR 14 AA TO CA SEC (PT)^F^^5.9;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.915,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.915,"DT")
3021210
"^DD",8973.1,8973.1,5.916,0)
HOUR 15 AA TO CA SEC (PT)^F^^5.9;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.916,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.916,"DT")
3021210
"^DD",8973.1,8973.1,5.917,0)
HOUR 16 AA TO CA SEC (PT)^F^^5.9;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,5.917,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,5.917,"DT")
3021210
"^DD",8973.1,8973.1,6.101,0)
HOUR 0 MSG TO CA CHR (NP)^F^^6.1;1^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.101,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.101,"DT")
3021120
"^DD",8973.1,8973.1,6.102,0)
HOUR 1 MSG TO CA CHR (NP)^F^^6.1;2^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.102,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.102,"DT")
3021120
"^DD",8973.1,8973.1,6.103,0)
HOUR 2 MSG TO CA CHR (NP)^F^^6.1;3^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.103,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.103,"DT")
3021120
"^DD",8973.1,8973.1,6.104,0)
HOUR 3 MSG TO CA CHR (NP)^F^^6.1;4^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.104,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.104,"DT")
3021120
"^DD",8973.1,8973.1,6.105,0)
HOUR 4 MSG TO CA CHR (NP)^F^^6.1;5^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.105,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.105,"DT")
3021120
"^DD",8973.1,8973.1,6.106,0)
HOUR 5 MSG TO CA CHR (NP)^F^^6.1;6^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.106,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.106,"DT")
3021120
"^DD",8973.1,8973.1,6.107,0)
HOUR 6 MSG TO CA CHR (NP)^F^^6.1;7^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.107,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.107,"DT")
3021120
"^DD",8973.1,8973.1,6.108,0)
HOUR 7 MSG TO CA CHR (NP)^F^^6.1;8^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.108,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.108,"DT")
3021203
"^DD",8973.1,8973.1,6.109,0)
HOUR 8 MSG TO CA CHR (NP)^F^^6.1;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.109,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.109,"DT")
3021120
"^DD",8973.1,8973.1,6.11,0)
HOUR 9 MSG TO CA CHR (NP)^F^^6.1;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.11,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.11,"DT")
3021120
"^DD",8973.1,8973.1,6.111,0)
HOUR 10 MSG TO CA CHR (NP)^F^^6.1;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.111,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.111,"DT")
3021120
"^DD",8973.1,8973.1,6.112,0)
HOUR 11 MSG TO CA CHR (NP)^F^^6.1;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.112,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.112,"DT")
3021120
"^DD",8973.1,8973.1,6.113,0)
HOUR 12 MSG TO CA CHR (NP)^F^^6.1;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.113,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.113,"DT")
3021120
"^DD",8973.1,8973.1,6.114,0)
HOUR 13 MSG TO CA CHR (NP)^F^^6.1;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.114,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.114,"DT")
3021120
"^DD",8973.1,8973.1,6.115,0)
HOUR 14 MSG TO CA CHR (NP)^F^^6.1;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.115,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.115,"DT")
3021120
"^DD",8973.1,8973.1,6.116,0)
HOUR 15 MSG TO CA CHR (NP)^F^^6.1;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.116,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.116,"DT")
3021210
"^DD",8973.1,8973.1,6.117,0)
HOUR 16 MSG TO CA CHR (NP)^F^^6.1;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.117,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.117,"DT")
3021120
"^DD",8973.1,8973.1,6.118,0)
HOUR 17 MSG TO CA CHR (NP)^F^^6.1;18^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.118,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.118,"DT")
3021120
"^DD",8973.1,8973.1,6.119,0)
HOUR 18 MSG TO CA CHR (NP)^F^^6.1;19^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.119,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.119,"DT")
3021120
"^DD",8973.1,8973.1,6.12,0)
HOUR 19 MSG TO CA CHR (NP)^F^^6.1;20^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.12,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.12,"DT")
3021120
"^DD",8973.1,8973.1,6.121,0)
HOUR 20 MSG TO CA CHR (NP)^F^^6.1;21^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.121,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.121,"DT")
3021120
"^DD",8973.1,8973.1,6.122,0)
HOUR 21 MSG TO CA CHR (NP)^F^^6.1;22^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.122,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.122,"DT")
3021120
"^DD",8973.1,8973.1,6.123,0)
HOUR 22 MSG TO CA CHR (NP)^F^^6.1;23^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.123,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.123,"DT")
3021120
"^DD",8973.1,8973.1,6.124,0)
HOUR 23 MSG TO CA CHR (NP)^F^^6.1;24^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.124,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.124,"DT")
3021120
"^DD",8973.1,8973.1,6.201,0)
HOUR 0 MSG TO CA MSGS (NP)^F^^6.2;1^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.201,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.201,"DT")
3021203
"^DD",8973.1,8973.1,6.202,0)
HOUR 1 MSG TO CA MSGS (NP)^F^^6.2;2^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.202,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.202,"DT")
3021203
"^DD",8973.1,8973.1,6.203,0)
HOUR 2 MSG TO CA MSGS (NP)^F^^6.2;3^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.203,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.203,"DT")
3021203
"^DD",8973.1,8973.1,6.204,0)
HOUR 3 MSG TO CA MSGS (NP)^F^^6.2;4^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.204,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.204,"DT")
3021203
"^DD",8973.1,8973.1,6.205,0)
HOUR 4 MSG TO CA MSGS (NP)^F^^6.2;5^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.205,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.205,"DT")
3021203
"^DD",8973.1,8973.1,6.206,0)
HOUR 5 MSG TO CA MSGS (NP)^F^^6.2;6^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.206,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.206,"DT")
3021203
"^DD",8973.1,8973.1,6.207,0)
HOUR 6 MSG TO CA MSGS (NP)^F^^6.2;7^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.207,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.207,"DT")
3021203
"^DD",8973.1,8973.1,6.208,0)
HOUR 7 MSG TO CA MSGS (NP)^F^^6.2;8^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.208,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.208,"DT")
3021203
"^DD",8973.1,8973.1,6.209,0)
HOUR 8 MSG TO CA MSGS (NP)^F^^6.2;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.209,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.209,"DT")
3021203
"^DD",8973.1,8973.1,6.21,0)
HOUR 9 MSG TO CA MSGS (NP)^F^^6.2;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.21,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.21,"DT")
3021203
"^DD",8973.1,8973.1,6.211,0)
HOUR 10 MSG TO CA MSGS (NP)^F^^6.2;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.211,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.211,"DT")
3021203
"^DD",8973.1,8973.1,6.212,0)
HOUR 11 MSG TO CA MSGS (NP)^F^^6.2;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.212,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.212,"DT")
3021203
"^DD",8973.1,8973.1,6.213,0)
HOUR 12 MSG TO CA MSGS (NP)^F^^6.2;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.213,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.213,"DT")
3021203
"^DD",8973.1,8973.1,6.214,0)
HOUR 13 MSG TO CA MSGS (NP)^F^^6.2;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.214,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.214,"DT")
3021203
"^DD",8973.1,8973.1,6.215,0)
HOUR 14 MSG TO CA MSGS (NP)^F^^6.2;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.215,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.215,"DT")
3021203
"^DD",8973.1,8973.1,6.216,0)
HOUR 15 MSG TO CA MSGS (NP)^F^^6.2;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.216,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.216,"DT")
3021203
"^DD",8973.1,8973.1,6.217,0)
HOUR 16 MSG TO CA MSGS (NP)^F^^6.2;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.217,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.217,"DT")
3021203
"^DD",8973.1,8973.1,6.218,0)
HOUR 17 MSG TO CA MSGS (NP)^F^^6.2;18^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.218,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.218,"DT")
3021203
"^DD",8973.1,8973.1,6.219,0)
HOUR 18 MSG TO CA MSGS (NP)^F^^6.2;19^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.219,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.219,"DT")
3021203
"^DD",8973.1,8973.1,6.22,0)
HOUR 19 MSG TO CA MSGS (NP)^F^^6.2;20^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.22,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.22,"DT")
3021203
"^DD",8973.1,8973.1,6.221,0)
HOUR 20 MSG TO CA MSGS (NP)^F^^6.2;21^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.221,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.221,"DT")
3021203
"^DD",8973.1,8973.1,6.222,0)
HOUR 21 MSG TO CA MSGS (NP)^F^^6.2;22^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.222,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.222,"DT")
3021203
"^DD",8973.1,8973.1,6.223,0)
HOUR 22 MSG TO CA MSGS (NP)^F^^6.2;23^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.223,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.223,"DT")
3021203
"^DD",8973.1,8973.1,6.224,0)
HOUR 23 MSG TO CA MSGS (NP)^F^^6.2;24^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.224,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.224,"DT")
3021203
"^DD",8973.1,8973.1,6.301,0)
HOUR 0 MSG TO CA SEC (NP)^F^^6.3;1^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.301,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.301,"DT")
3021120
"^DD",8973.1,8973.1,6.302,0)
HOUR 1 MSG TO CA SEC (NP)^F^^6.3;2^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.302,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.302,"DT")
3021120
"^DD",8973.1,8973.1,6.303,0)
HOUR 2 MSG TO CA SEC (NP)^F^^6.3;3^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.303,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.303,"DT")
3021120
"^DD",8973.1,8973.1,6.304,0)
HOUR 3 MSG TO CA SEC (NP)^F^^6.3;4^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.304,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.304,"DT")
3021120
"^DD",8973.1,8973.1,6.305,0)
HOUR 4 MSG TO CA SEC (NP)^F^^6.3;5^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.305,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.305,"DT")
3021120
"^DD",8973.1,8973.1,6.306,0)
HOUR 5 MSG TO CA SEC (NP)^F^^6.3;6^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.306,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.306,"DT")
3021120
"^DD",8973.1,8973.1,6.307,0)
HOUR 6 MSG TO CA SEC (NP)^F^^6.3;7^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.307,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.307,"DT")
3021120
"^DD",8973.1,8973.1,6.308,0)
HOUR 7 MSG TO CA SEC (NP)^F^^6.3;8^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.308,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.308,"DT")
3021120
"^DD",8973.1,8973.1,6.309,0)
HOUR 8 MSG TO CA SEC (NP)^F^^6.3;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.309,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.309,"DT")
3021120
"^DD",8973.1,8973.1,6.31,0)
HOUR 9 MSG TO CA SEC (NP)^F^^6.3;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.31,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.31,"DT")
3021120
"^DD",8973.1,8973.1,6.311,0)
HOUR 10 MSG TO CA SEC (NP)^F^^6.3;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.311,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.311,"DT")
3021120
"^DD",8973.1,8973.1,6.312,0)
HOUR 11 MSG TO CA SEC (NP)^F^^6.3;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.312,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.312,"DT")
3021120
"^DD",8973.1,8973.1,6.313,0)
HOUR 12 MSG TO CA SEC (NP)^F^^6.3;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.313,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.313,"DT")
3021120
"^DD",8973.1,8973.1,6.314,0)
HOUR 13 MSG TO CA SEC (NP)^F^^6.3;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.314,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.314,"DT")
3021121
"^DD",8973.1,8973.1,6.315,0)
HOUR 14 MSG TO CA SEC (NP)^F^^6.3;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.315,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.315,"DT")
3021121
"^DD",8973.1,8973.1,6.316,0)
HOUR 15 MSG TO CA SEC (NP)^F^^6.3;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.316,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.316,"DT")
3021121
"^DD",8973.1,8973.1,6.317,0)
HOUR 16 MSG TO CA SEC (NP)^F^^6.3;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.317,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.317,"DT")
3021121
"^DD",8973.1,8973.1,6.318,0)
HOUR 17 MSG TO CA SEC (NP)^F^^6.3;18^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.318,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.318,"DT")
3021121
"^DD",8973.1,8973.1,6.319,0)
HOUR 18 MSG TO CA SEC (NP)^F^^6.3;19^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.319,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.319,"DT")
3021121
"^DD",8973.1,8973.1,6.32,0)
HOUR 19 MSG TO CA SEC (NP)^F^^6.3;20^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.32,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.32,"DT")
3021121
"^DD",8973.1,8973.1,6.321,0)
HOUR 20 MSG TO CA SEC (NP)^F^^6.3;21^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.321,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.321,"DT")
3021121
"^DD",8973.1,8973.1,6.322,0)
HOUR 21 MSG TO CA SEC (NP)^F^^6.3;22^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.322,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.322,"DT")
3021121
"^DD",8973.1,8973.1,6.323,0)
HOUR 22 MSG TO CA SEC (NP)^F^^6.3;23^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.323,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.323,"DT")
3021121
"^DD",8973.1,8973.1,6.324,0)
HOUR 23 MSG TO CA SEC (NP)^F^^6.3;24^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.324,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.324,"DT")
3021121
"^DD",8973.1,8973.1,6.401,0)
HOUR 0 PROC TM (CA-AA) (NP)^F^^6.4;1^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.401,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.401,"DT")
3021121
"^DD",8973.1,8973.1,6.402,0)
HOUR 1 PROC TM (CA-AA) (NP)^F^^6.4;2^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.402,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.402,"DT")
3021121
"^DD",8973.1,8973.1,6.403,0)
HOUR 2 PROC TM (CA-AA) (NP)^F^^6.4;3^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.403,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.403,"DT")
3021121
"^DD",8973.1,8973.1,6.404,0)
HOUR 3 PROC TM (CA-AA) (NP)^F^^6.4;4^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.404,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.404,"DT")
3021121
"^DD",8973.1,8973.1,6.405,0)
HOUR 4 PROC TM (CA-AA) (NP)^F^^6.4;5^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.405,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.405,"DT")
3021121
"^DD",8973.1,8973.1,6.406,0)
HOUR 5 PROC TM (CA-AA) (NP)^F^^6.4;6^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.406,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.406,"DT")
3021121
"^DD",8973.1,8973.1,6.407,0)
HOUR 6 PROC TM (CA-AA) (NP)^F^^6.4;7^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.407,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.407,"DT")
3021121
"^DD",8973.1,8973.1,6.408,0)
HOUR 7 PROC TM (CA-AA) (NP)^F^^6.4;8^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.408,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.408,"DT")
3021121
"^DD",8973.1,8973.1,6.409,0)
HOUR 8 PROC TM (CA-AA) (NP)^F^^6.4;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.409,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.409,"DT")
3021121
"^DD",8973.1,8973.1,6.41,0)
HOUR 9 PROC TM (CA-AA) (NP)^F^^6.4;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.41,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.41,"DT")
3021121
"^DD",8973.1,8973.1,6.411,0)
HOUR 10 PROC TM (CA-AA) (NP)^F^^6.4;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.411,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.411,"DT")
3021121
"^DD",8973.1,8973.1,6.412,0)
HOUR 11 PROC TM (CA-AA) (NP)^F^^6.4;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.412,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.412,"DT")
3021121
"^DD",8973.1,8973.1,6.413,0)
HOUR 12 PROC TM (CA-AA) (NP)^F^^6.4;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.413,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.413,"DT")
3021121
"^DD",8973.1,8973.1,6.414,0)
HOUR 13 PROC TM (CA-AA) (NP)^F^^6.4;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.414,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.414,"DT")
3021121
"^DD",8973.1,8973.1,6.415,0)
HOUR 14 PROC TM (CA-AA) (NP)^F^^6.4;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.415,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.415,"DT")
3021121
"^DD",8973.1,8973.1,6.416,0)
HOUR 15 PROC TM (CA-AA) (NP)^F^^6.4;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.416,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.416,"DT")
3021121
"^DD",8973.1,8973.1,6.417,0)
HOUR 16 PROC TM (CA-AA) (NP)^F^^6.4;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.417,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.417,"DT")
3021121
"^DD",8973.1,8973.1,6.418,0)
HOUR 17 PROC TM (CA-AA) (NP)^F^^6.4;18^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.418,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.418,"DT")
3021121
"^DD",8973.1,8973.1,6.419,0)
HOUR 18 PROC TM (CA-AA) (NP)^F^^6.4;19^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.419,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.419,"DT")
3021121
"^DD",8973.1,8973.1,6.42,0)
HOUR 19 PROC TM (CA-AA) (NP)^F^^6.4;20^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.42,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.42,"DT")
3021121
"^DD",8973.1,8973.1,6.421,0)
HOUR 20 PROC TM (CA-AA) (NP)^F^^6.4;21^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.421,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.421,"DT")
3021121
"^DD",8973.1,8973.1,6.422,0)
HOUR 21 PROC TM (CA-AA) (NP)^F^^6.4;22^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.422,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.422,"DT")
3021121
"^DD",8973.1,8973.1,6.423,0)
HOUR 22 PROC TM (CA-AA) (NP)^F^^6.4;23^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.423,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.423,"DT")
3021121
"^DD",8973.1,8973.1,6.424,0)
HOUR 23 PROC TM (CA-AA) (NP)^F^^6.4;24^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.424,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.424,"DT")
3021121
"^DD",8973.1,8973.1,6.501,0)
HOUR 0 PROC CNT (CA-AA) (NP)^F^^6.5;1^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.501,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.501,"DT")
3021121
"^DD",8973.1,8973.1,6.502,0)
HOUR 1 PROC CNT (CA-AA) (NP)^F^^6.5;2^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.502,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.502,"DT")
3021121
"^DD",8973.1,8973.1,6.503,0)
HOUR 2 PROC CNT (CA-AA) (NP)^F^^6.5;3^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.503,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.503,"DT")
3021121
"^DD",8973.1,8973.1,6.504,0)
HOUR 3 PROC CNT (CA-AA) (NP)^F^^6.5;4^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.504,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.504,"DT")
3021121
"^DD",8973.1,8973.1,6.505,0)
HOUR 4 PROC CNT (CA-AA) (NP)^F^^6.5;5^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.505,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.505,"DT")
3021121
"^DD",8973.1,8973.1,6.506,0)
HOUR 5 PROC CNT (CA-AA) (NP)^F^^6.5;6^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.506,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.506,"DT")
3021121
"^DD",8973.1,8973.1,6.507,0)
HOUR 6 PROC CNT (CA-AA) (NP)^F^^6.5;7^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.507,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.507,"DT")
3021121
"^DD",8973.1,8973.1,6.508,0)
HOUR 7 PROC CNT (CA-AA) (NP)^F^^6.5;8^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.508,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.508,"DT")
3021121
"^DD",8973.1,8973.1,6.509,0)
HOUR 8 PROC CNT (CA-AA) (NP)^F^^6.5;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.509,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.509,"DT")
3021121
"^DD",8973.1,8973.1,6.51,0)
HOUR 9 PROC CNT (CA-AA) (NP)^F^^6.5;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.51,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.51,"DT")
3021121
"^DD",8973.1,8973.1,6.511,0)
HOUR 10 PROC CNT (CA-AA) (NP)^F^^6.5;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.511,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.511,"DT")
3021121
"^DD",8973.1,8973.1,6.512,0)
HOUR 11 PROC CNT (CA-AA) (NP)^F^^6.5;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.512,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.512,"DT")
3021121
"^DD",8973.1,8973.1,6.513,0)
HOUR 12 PROC CNT (CA-AA) (NP)^F^^6.5;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.513,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.513,"DT")
3021121
"^DD",8973.1,8973.1,6.514,0)
HOUR 13 PROC CNT (CA-AA) (NP)^F^^6.5;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.514,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.514,"DT")
3021121
"^DD",8973.1,8973.1,6.515,0)
HOUR 14 PROC CNT (CA-AA) (NP)^F^^6.5;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.515,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.515,"DT")
3021121
"^DD",8973.1,8973.1,6.516,0)
HOUR 15 PROC CNT (CA-AA) (NP)^F^^6.5;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.516,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.516,"DT")
3021121
"^DD",8973.1,8973.1,6.517,0)
HOUR 16 PROC CNT (CA-AA) (NP)^F^^6.5;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.517,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.517,"DT")
3021121
"^DD",8973.1,8973.1,6.518,0)
HOUR 17 PROC CNT (CA-AA) (NP)^F^^6.5;18^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.518,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.518,"DT")
3021121
"^DD",8973.1,8973.1,6.519,0)
HOUR 18 PROC CNT (CA-AA) (NP)^F^^6.5;19^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.519,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.519,"DT")
3021121
"^DD",8973.1,8973.1,6.52,0)
HOUR 19 PROC CNT (CA-AA) (NP)^F^^6.5;20^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.52,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.52,"DT")
3021121
"^DD",8973.1,8973.1,6.521,0)
HOUR 20 PROC CNT (CA-AA) (NP)^F^^6.5;21^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.521,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.521,"DT")
3021121
"^DD",8973.1,8973.1,6.522,0)
HOUR 21 PROC CNT (CA-AA) (NP)^F^^6.5;22^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.522,"DT")
3021121
"^DD",8973.1,8973.1,6.523,0)
HOUR 22 PROC CNT (CA-AA) (NP)^F^^6.5;23^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.523,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.523,"DT")
3021121
"^DD",8973.1,8973.1,6.524,0)
HOUR 23 PROC CNT (CA-AA) (NP)^F^^6.5;24^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.524,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.524,"DT")
3021121
"^DD",8973.1,8973.1,6.701,0)
HOUR 0 AA TO CA CHR (NP)^F^^6.7;1^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.701,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.701,"DT")
3021121
"^DD",8973.1,8973.1,6.702,0)
HOUR 1 AA TO CA CHR (NP)^F^^6.7;2^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.702,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.702,"DT")
3021121
"^DD",8973.1,8973.1,6.703,0)
HOUR 2 AA TO CA CHR (NP)^F^^6.7;3^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.703,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.703,"DT")
3021121
"^DD",8973.1,8973.1,6.704,0)
HOUR 3 AA TO CA CHR (NP)^F^^6.7;4^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.704,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.704,"DT")
3021121
"^DD",8973.1,8973.1,6.705,0)
HOUR 4 AA TO CA CHR (NP)^F^^6.7;5^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.705,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.705,"DT")
3021121
"^DD",8973.1,8973.1,6.706,0)
HOUR 5 AA TO CA CHR (NP)^F^^6.7;6^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.706,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.706,"DT")
3021121
"^DD",8973.1,8973.1,6.707,0)
HOUR 6 AA TO CA CHR (NP)^F^^6.7;7^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.707,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.707,"DT")
3021121
"^DD",8973.1,8973.1,6.708,0)
HOUR 7 AA TO CA CHR (NP)^F^^6.7;8^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.708,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.708,"DT")
3021121
"^DD",8973.1,8973.1,6.709,0)
HOUR 8 AA TO CA CHR (NP)^F^^6.7;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.709,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.709,"DT")
3021121
"^DD",8973.1,8973.1,6.71,0)
HOUR 9 AA TO CA CHR (NP)^F^^6.7;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.71,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.71,"DT")
3021121
"^DD",8973.1,8973.1,6.711,0)
HOUR 10 AA TO CA CHR (NP)^F^^6.7;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.711,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.711,"DT")
3021121
"^DD",8973.1,8973.1,6.712,0)
HOUR 11 AA TO CA CHR (NP)^F^^6.7;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.712,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.712,"DT")
3021121
"^DD",8973.1,8973.1,6.713,0)
HOUR 12 AA TO CA CHR (NP)^F^^6.7;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.713,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.713,"DT")
3021121
"^DD",8973.1,8973.1,6.714,0)
HOUR 13 AA TO CA CHR (NP)^F^^6.7;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.714,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.714,"DT")
3021121
"^DD",8973.1,8973.1,6.715,0)
HOUR 14 AA TO CA CHR (NP)^F^^6.7;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.715,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.715,"DT")
3021121
"^DD",8973.1,8973.1,6.716,0)
HOUR 15 AA TO CA CHR (NP)^F^^6.7;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.716,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.716,"DT")
3021121
"^DD",8973.1,8973.1,6.717,0)
HOUR 16 AA TO CA CHR (NP)^F^^6.7;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.717,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.717,"DT")
3021121
"^DD",8973.1,8973.1,6.718,0)
HOUR 17 AA TO CA CHR (NP)^F^^6.7;18^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.718,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.718,"DT")
3021121
"^DD",8973.1,8973.1,6.719,0)
HOUR 18 AA TO CA CHR (NP)^F^^6.7;19^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.719,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.719,"DT")
3021121
"^DD",8973.1,8973.1,6.72,0)
HOUR 19 AA TO CA CHR (NP)^F^^6.7;20^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.72,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.72,"DT")
3021121
"^DD",8973.1,8973.1,6.721,0)
HOUR 20 AA TO CA CHR (NP)^F^^6.7;21^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.721,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.721,"DT")
3021121
"^DD",8973.1,8973.1,6.722,0)
HOUR 21 AA TO CA CHR (NP)^F^^6.7;22^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.722,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.722,"DT")
3021121
"^DD",8973.1,8973.1,6.723,0)
HOUR 22 AA TO CA CHR (NP)^F^^6.7;23^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.723,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.723,"DT")
3021121
"^DD",8973.1,8973.1,6.724,0)
HOUR 23 AA TO CA CHR (NP)^F^^6.7;24^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.724,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.724,"DT")
3021121
"^DD",8973.1,8973.1,6.801,0)
HOUR 0 AA TO CA MSGS (NP)^F^^6.8;1^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.801,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.801,"DT")
3021203
"^DD",8973.1,8973.1,6.802,0)
HOUR 1 AA TO CA MSGS (NP)^F^^6.8;2^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.802,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.802,"DT")
3021203
"^DD",8973.1,8973.1,6.803,0)
HOUR 2 AA TO CA MSGS (NP)^F^^6.8;3^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.803,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.803,"DT")
3021203
"^DD",8973.1,8973.1,6.804,0)
HOUR 3 AA TO CA MSGS (NP)^F^^6.8;4^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.804,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.804,"DT")
3021203
"^DD",8973.1,8973.1,6.805,0)
HOUR 4 AA TO CA MSGS (NP)^F^^6.8;5^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.805,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.805,"DT")
3021203
"^DD",8973.1,8973.1,6.806,0)
HOUR 5 AA TO CA MSGS (NP)^F^^6.8;6^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.806,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.806,"DT")
3021203
"^DD",8973.1,8973.1,6.807,0)
HOUR 6 AA TO CA MSGS (NP)^F^^6.8;7^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.807,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.807,"DT")
3021203
"^DD",8973.1,8973.1,6.808,0)
HOUR 7 AA TO CA MSGS (NP)^F^^6.8;8^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.808,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.808,"DT")
3021203
"^DD",8973.1,8973.1,6.809,0)
HOUR 8 AA TO CA MSGS (NP)^F^^6.8;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.809,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.809,"DT")
3021203
"^DD",8973.1,8973.1,6.81,0)
HOUR 9 AA TO CA MSGS (NP)^F^^6.8;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.81,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.81,"DT")
3021203
"^DD",8973.1,8973.1,6.811,0)
HOUR 10 AA TO CA MSGS (NP)^F^^6.8;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.811,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.811,"DT")
3021203
"^DD",8973.1,8973.1,6.812,0)
HOUR 11 AA TO CA MSGS (NP)^F^^6.8;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.812,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.812,"DT")
3021203
"^DD",8973.1,8973.1,6.813,0)
HOUR 12 AA TO CA MSGS (NP)^F^^6.8;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.813,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.813,"DT")
3021203
"^DD",8973.1,8973.1,6.814,0)
HOUR 13 AA TO CA MSGS (NP)^F^^6.8;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.814,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.814,"DT")
3021203
"^DD",8973.1,8973.1,6.815,0)
HOUR 14 AA TO CA MSGS (NP)^F^^6.8;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.815,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.815,"DT")
3021203
"^DD",8973.1,8973.1,6.816,0)
HOUR 15 AA TO CA MSGS (NP)^F^^6.8;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.816,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.816,"DT")
3021203
"^DD",8973.1,8973.1,6.817,0)
HOUR 16 AA TO CA MSGS (NP)^F^^6.8;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.817,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.817,"DT")
3021203
"^DD",8973.1,8973.1,6.818,0)
HOUR 17 AA TO CA MSGS (NP)^F^^6.8;18^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.818,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.818,"DT")
3021203
"^DD",8973.1,8973.1,6.819,0)
HOUR 18 AA TO CA MSGS (NP)^F^^6.8;19^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.819,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.819,"DT")
3021203
"^DD",8973.1,8973.1,6.82,0)
HOUR 19 AA TO CA MSGS (NP)^F^^6.8;20^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.82,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.82,"DT")
3021203
"^DD",8973.1,8973.1,6.821,0)
HOUR 20 AA TO CA MSGS (NP)^F^^6.8;21^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.821,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.821,"DT")
3021203
"^DD",8973.1,8973.1,6.822,0)
HOUR 21 AA TO CA MSGS (NP)^F^^6.8;22^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.822,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.822,"DT")
3021203
"^DD",8973.1,8973.1,6.823,0)
HOUR 22 AA TO CA MSGS (NP)^F^^6.8;23^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.823,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.823,"DT")
3021203
"^DD",8973.1,8973.1,6.824,0)
HOUR 23 AA TO CA MSGS (NP)^F^^6.8;24^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.824,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.824,"DT")
3021203
"^DD",8973.1,8973.1,6.901,0)
HOUR 0 AA TO CA SEC (NP)^F^^6.9;1^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.901,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.901,"DT")
3021122
"^DD",8973.1,8973.1,6.902,0)
HOUR 1 AA TO CA SEC (NP)^F^^6.9;2^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.902,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.902,"DT")
3021122
"^DD",8973.1,8973.1,6.903,0)
HOUR 2 AA TO CA SEC (NP)^F^^6.9;3^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.903,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.903,"DT")
3021122
"^DD",8973.1,8973.1,6.904,0)
HOUR 3 AA TO CA SEC (NP)^F^^6.9;4^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.904,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.904,"DT")
3021122
"^DD",8973.1,8973.1,6.905,0)
HOUR 4 AA TO CA SEC (NP)^F^^6.9;5^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.905,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.905,"DT")
3021122
"^DD",8973.1,8973.1,6.906,0)
HOUR 5 AA TO CA SEC (NP)^F^^6.9;6^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.906,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.906,"DT")
3021122
"^DD",8973.1,8973.1,6.907,0)
HOUR 6 AA TO CA SEC (NP)^F^^6.9;7^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.907,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.907,"DT")
3021122
"^DD",8973.1,8973.1,6.908,0)
HOUR 7 AA TO CA SEC (NP)^F^^6.9;8^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.908,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.908,"DT")
3021122
"^DD",8973.1,8973.1,6.909,0)
HOUR 8 AA TO CA SEC (NP)^F^^6.9;9^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.909,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.909,"DT")
3021122
"^DD",8973.1,8973.1,6.91,0)
HOUR 9 AA TO CA SEC (NP)^F^^6.9;10^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.91,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.91,"DT")
3021122
"^DD",8973.1,8973.1,6.911,0)
HOUR 10 AA TO CA SEC (NP)^F^^6.9;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.911,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.911,"DT")
3021122
"^DD",8973.1,8973.1,6.912,0)
HOUR 11 AA TO CA SEC (NP)^F^^6.9;12^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.912,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.912,"DT")
3021122
"^DD",8973.1,8973.1,6.913,0)
HOUR 12 AA TO CA SEC (NP)^F^^6.9;13^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.913,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.913,"DT")
3021122
"^DD",8973.1,8973.1,6.914,0)
HOUR 13 AA TO CA SEC (NP)^F^^6.9;14^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.914,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.914,"DT")
3021122
"^DD",8973.1,8973.1,6.915,0)
HOUR 14 AA TO CA SEC (NP)^F^^6.9;15^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.915,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.915,"DT")
3021122
"^DD",8973.1,8973.1,6.916,0)
HOUR 15 AA TO CA SEC (NP)^F^^6.9;16^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.916,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.916,"DT")
3021122
"^DD",8973.1,8973.1,6.917,0)
HOUR 16 AA TO CA SEC (NP)^F^^6.9;17^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.917,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.917,"DT")
3021122
"^DD",8973.1,8973.1,6.918,0)
HOUR 17 AA TO CA SEC (NP)^F^^6.9;18^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.918,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.918,"DT")
3021122
"^DD",8973.1,8973.1,6.919,0)
HOUR 18 AA TO CA SEC (NP)^F^^6.9;19^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.919,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.919,"DT")
3021122
"^DD",8973.1,8973.1,6.92,0)
HOUR 19 AA TO CA SEC (NP)^F^^6.9;20^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.92,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.92,"DT")
3021122
"^DD",8973.1,8973.1,6.921,0)
HOUR 20 AA TO CA SEC (NP)^F^^6.9;21^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.921,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.921,"DT")
3021122
"^DD",8973.1,8973.1,6.922,0)
HOUR 21 AA TO CA SEC (NP)^F^^6.9;22^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.922,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.922,"DT")
3021122
"^DD",8973.1,8973.1,6.923,0)
HOUR 22 AA TO CA SEC (NP)^F^^6.9;23^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.923,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.923,"DT")
3021122
"^DD",8973.1,8973.1,6.924,0)
HOUR 23 AA TO CA SEC (NP)^F^^6.9;24^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,6.924,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,6.924,"DT")
3021122
"^DD",8973.1,8973.1,99.001,0)
TOT CHR (PT)^F^^99;1^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.001,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.001,"DT")
3010816
"^DD",8973.1,8973.1,99.002,0)
TOT MESSAGES (PT)^F^^99;2^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.002,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.002,"DT")
3010816
"^DD",8973.1,8973.1,99.003,0)
TOT SECONDS (PT)^F^^99;3^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.003,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.003,"DT")
3010816
"^DD",8973.1,8973.1,99.004,0)
TOT CHR (NP)^F^^99;4^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.004,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.004,"DT")
3010816
"^DD",8973.1,8973.1,99.005,0)
TOT MESSAGES (NP)^F^^99;5^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.005,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.005,"DT")
3010816
"^DD",8973.1,8973.1,99.006,0)
TOT SECONDS (NP)^F^^99;6^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.006,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.006,"DT")
3010816
"^DD",8973.1,8973.1,99.201,0)
TOT MSG UNIT CHR^F^^99.2;1^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.201,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.201,"DT")
3020701
"^DD",8973.1,8973.1,99.202,0)
TOT MSG UNIT MSGS^F^^99.2;2^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,99.202,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,99.202,"DT")
3020701
"^DD",8973.1,8973.1,99.203,0)
TOT MSG UNIT SEC^F^^99.2;3^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.203,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.203,"DT")
3020701
"^DD",8973.1,8973.1,99.206,0)
MSG UNIT TYPE(S)^F^^99.2;6^K:$L(X)>20!($L(X)<1) X
"^DD",8973.1,8973.1,99.206,3)
Answer must be 1-20 characters in length
"^DD",8973.1,8973.1,99.206,"DT")
3020701
"^DD",8973.1,8973.1,99.207,0)
MSG UNIT PROTOCOL^F^^99.2;7^K:$L(X)>30!($L(X)<1) X
"^DD",8973.1,8973.1,99.207,3)
Answer must be 1-30 characters in length
"^DD",8973.1,8973.1,99.207,"DT")
3020701
"^DD",8973.1,8973.1,99.208,0)
MSG UNIT PROTOCOL - INFERRED^F^^99.2;8^K:$L(X)>30!($L(X)<1) X
"^DD",8973.1,8973.1,99.208,3)
Answer must be 1-30 characters in length
"^DD",8973.1,8973.1,99.208,"DT")
3020701
"^DD",8973.1,8973.1,99.209,0)
MSG UNIT NAMESPACE^F^^99.2;9^K:$L(X)>10!($L(X)<1) X
"^DD",8973.1,8973.1,99.209,3)
Answer must be 1-10 characters in length
"^DD",8973.1,8973.1,99.209,"DT")
3020701
"^DD",8973.1,8973.1,99.21,0)
MSG UNIT NAMESPACE - INFERRED^F^^99.2;10^K:$L(X)>10!($L(X)<1) X
"^DD",8973.1,8973.1,99.21,3)
Answer must be 1-10 characters in length
"^DD",8973.1,8973.1,99.21,"DT")
3020701
"^DD",8973.1,8973.1,99.211,0)
CONTACTED SITE NUMBER^F^^99.2;11^K:$L(X)>9!($L(X)<1) X
"^DD",8973.1,8973.1,99.211,3)
Answer must be 1-9 characters in length
"^DD",8973.1,8973.1,99.211,"DT")
3020701
"^DD",8973.1,8973.1,99.212,0)
CONTACTED SITE NAME^F^^99.2;12^K:$L(X)>45!($L(X)<1) X
"^DD",8973.1,8973.1,99.212,1,0)
^.1
"^DD",8973.1,8973.1,99.212,1,1,0)
8973.1^ACSDTPRNM^MUMPS
"^DD",8973.1,8973.1,99.212,1,1,1)
D XREF1^KMPDUT2($G(DA),$G(X),1)
"^DD",8973.1,8973.1,99.212,1,1,2)
D XREF1^KMPDUT2($G(DA),$G(X),2)
"^DD",8973.1,8973.1,99.212,1,1,"%D",0)
^^1^1^3020702^
"^DD",8973.1,8973.1,99.212,1,1,"%D",1,0)
^KMPD(8973.1,"ACSDTPRNM",ContactSite,Date,Protocol,Namespace)=""
"^DD",8973.1,8973.1,99.212,1,1,"DT")
3020702
"^DD",8973.1,8973.1,99.212,3)
Answer must be 1-45 characters in length
"^DD",8973.1,8973.1,99.212,"DT")
3020701
"^DD",8973.1,8973.1,99.213,0)
CONTACTED SITE LOCAL/REMOTE^F^^99.2;13^K:$L(X)>10!($L(X)<1) X
"^DD",8973.1,8973.1,99.213,3)
Answer must be 1-10 characters in length
"^DD",8973.1,8973.1,99.213,"DT")
3020701
"^DD",8973.1,8973.1,99.301,0)
TOT MSG UNIT CHR (PT)^F^^99.3;1^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.301,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.301,"DT")
3021018
"^DD",8973.1,8973.1,99.302,0)
TOT MSG UNIT MSGS (PT)^F^^99.3;2^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.302,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.302,"DT")
3021029
"^DD",8973.1,8973.1,99.303,0)
TOT MSG UNIT SEC (PT)^F^^99.3;3^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.303,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.303,"DT")
3021018
"^DD",8973.1,8973.1,99.304,0)
TOT MSG UNIT CHR (NP)^F^^99.3;4^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.304,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.304,"DT")
3021029
"^DD",8973.1,8973.1,99.305,0)
TOT MSG UNIT MSGS (NP)^F^^99.3;5^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.305,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.305,"DT")
3021029
"^DD",8973.1,8973.1,99.306,0)
TOT MSG UNIT SEC (NP)^F^^99.3;6^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.306,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.306,"DT")
3021029
"^DD",8973.1,8973.1,99.307,0)
TOT MSG UNIT CHR (PT&NP)^F^^99.3;7^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.307,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.307,"DT")
3021112
"^DD",8973.1,8973.1,99.308,0)
TOT MSG UNIT MSGS (PT&NP)^F^^99.3;8^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.308,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.308,"DT")
3021112
"^DD",8973.1,8973.1,99.309,0)
TOT MSG UNIT SEC (PT&NP)^F^^99.3;9^K:$L(X)>25!($L(X)<1) X
"^DD",8973.1,8973.1,99.309,3)
Answer must be 1-25 characters in length
"^DD",8973.1,8973.1,99.309,"DT")
3021112
"^DD",8973.1,8973.1,99.401,0)
TOT MSG TO CA CHR (PT)^F^^99.4;1^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.401,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.401,"DT")
3021122
"^DD",8973.1,8973.1,99.402,0)
TOT MSG TO CA CHR (NP)^F^^99.4;2^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.402,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.402,"DT")
3021122
"^DD",8973.1,8973.1,99.403,0)
TOT MSG TO CA COUNT (PT)^F^^99.4;3^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.403,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.403,"DT")
3021122
"^DD",8973.1,8973.1,99.404,0)
TOT MSG TO CA COUNT (NP)^F^^99.4;4^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.404,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.404,"DT")
3021122
"^DD",8973.1,8973.1,99.405,0)
TOT MSG TO CA SEC (PT)^F^^99.4;5^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.405,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.405,"DT")
3021122
"^DD",8973.1,8973.1,99.406,0)
TOT MSG TO CA SEC (NP)^F^^99.4;6^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.406,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.406,"DT")
3021122
"^DD",8973.1,8973.1,99.407,0)
TOT PROC TM (CA-AA) (PT)^F^^99.4;7^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.407,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.407,"DT")
3021122
"^DD",8973.1,8973.1,99.408,0)
TOT PROC TM (CA-AA) (NP)^F^^99.4;8^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.408,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.408,"DT")
3021122
"^DD",8973.1,8973.1,99.409,0)
TOT PROC CNT (CA-AA) (PT)^F^^99.4;9^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.409,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.409,"DT")
3021122
"^DD",8973.1,8973.1,99.41,0)
TOT PROC CNT (CA-AA) (NP)^F^^99.4;10^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.41,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.41,"DT")
3021122
"^DD",8973.1,8973.1,99.411,0)
TOT AA TO CA CHR (PT)^F^^99.4;11^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.411,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.411,"DT")
3021122
"^DD",8973.1,8973.1,99.412,0)
TOT AA TO CA CHR (NP)^F^^99.4;12^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.412,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.412,"DT")
3021122
"^DD",8973.1,8973.1,99.413,0)
TOT AA TO CA COUNT (PT)^F^^99.4;13^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.413,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.413,"DT")
3021122
"^DD",8973.1,8973.1,99.414,0)
TOT AA TO CA COUNT (NP)^F^^99.4;14^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.414,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.414,"DT")
3021122
"^DD",8973.1,8973.1,99.415,0)
TOT AA TO CA SEC (PT)^F^^99.4;15^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.415,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.415,"DT")
3021127
"^DD",8973.1,8973.1,99.416,0)
TOT AA TO CA SEC (NP)^F^^99.4;16^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.416,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.416,"DT")
3021122
"^DD",8973.1,8973.1,99.501,0)
TOT MSG UNIT COUNT (PT)^F^^99.5;1^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.501,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.501,"DT")
3030410
"^DD",8973.1,8973.1,99.502,0)
TOT MSG UNIT COUNT (NP)^F^^99.5;2^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.502,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.502,"DT")
3030410
"^DD",8973.1,8973.1,99.503,0)
TOT MSG UNIT COUNT (PT&NP)^F^^99.5;3^K:$L(X)>14!($L(X)<1) X
"^DD",8973.1,8973.1,99.503,3)
Answer must be 1-14 characters in length
"^DD",8973.1,8973.1,99.503,"DT")
3030410
"^DD",8973.2,8973.2,0)
FIELD^^.1^10
"^DD",8973.2,8973.2,0,"DT")
3040210
"^DD",8973.2,8973.2,0,"ID","W")
D:$G(Y) ID1^KMPDUT2(Y)
"^DD",8973.2,8973.2,0,"IX","ACLNM",8973.2,.06)

"^DD",8973.2,8973.2,0,"IX","ADT",8973.2,.03)

"^DD",8973.2,8973.2,0,"IX","ANEWPER",8973.2,.05)

"^DD",8973.2,8973.2,0,"IX","ASSCLDTTM",8973.2,.07)

"^DD",8973.2,8973.2,0,"IX","ASSDTPT",8973.2,.07)

"^DD",8973.2,8973.2,0,"IX","ASSDTTM",8973.2,.07)

"^DD",8973.2,8973.2,0,"IX","ASSIPDTTM",8973.2,.07)

"^DD",8973.2,8973.2,0,"IX","ASSNPDTTM",8973.2,.07)

"^DD",8973.2,8973.2,0,"IX","ASTDTTM",8973.2,.03)

"^DD",8973.2,8973.2,0,"IX","ASVDTSS",8973.2,.07)

"^DD",8973.2,8973.2,0,"IX","ATITLE",8973.2,.08)

"^DD",8973.2,8973.2,0,"IX","ATMPSS",8973.2,.07)

"^DD",8973.2,8973.2,0,"IX","B",8973.2,.01)

"^DD",8973.2,8973.2,0,"IX","C",8973.2,.03)

"^DD",8973.2,8973.2,0,"NM","CP TIMING")

"^DD",8973.2,8973.2,0,"VRPK")
CAPACITY MANAGEMENT TOOLS
"^DD",8973.2,8973.2,.01,0)
IDENTIFIER^RF^^0;1^K:$L(X)>40!($L(X)<3)!'(X'?1P.E) X
"^DD",8973.2,8973.2,.01,1,0)
^.1
"^DD",8973.2,8973.2,.01,1,1,0)
8973.2^B
"^DD",8973.2,8973.2,.01,1,1,1)
S ^KMPD(8973.2,"B",$E(X,1,40),DA)=""
"^DD",8973.2,8973.2,.01,1,1,2)
K ^KMPD(8973.2,"B",$E(X,1,40),DA)
"^DD",8973.2,8973.2,.01,3)
Answer must be 3-40 characters in length
"^DD",8973.2,8973.2,.01,"DT")
3030715
"^DD",8973.2,8973.2,.02,0)
SENT TO NATIONAL DATABASE^S^0:NO;1:YES;^0;2^Q
"^DD",8973.2,8973.2,.02,"DT")
3030715
"^DD",8973.2,8973.2,.03,0)
SERVER START DATE/TIME^D^^0;3^S %DT="EST" D ^%DT S X=Y K:X<1 X
"^DD",8973.2,8973.2,.03,1,0)
^.1
"^DD",8973.2,8973.2,.03,1,1,0)
8973.2^ASTDTTM
"^DD",8973.2,8973.2,.03,1,1,1)
S ^KMPD(8973.2,"ASTDTTM",$E(X,1,30),DA)=""
"^DD",8973.2,8973.2,.03,1,1,2)
K ^KMPD(8973.2,"ASTDTTM",$E(X,1,30),DA)
"^DD",8973.2,8973.2,.03,1,1,"%D",0)
^^1^1^3030715^
"^DD",8973.2,8973.2,.03,1,1,"%D",1,0)
^KMPD(8973.2,"ASTDTTM",StartDateTime,X)=""
"^DD",8973.2,8973.2,.03,1,1,"DT")
3030715
"^DD",8973.2,8973.2,.03,1,2,0)
8973.2^C
"^DD",8973.2,8973.2,.03,1,2,1)
S ^KMPD(8973.2,"C",$E(X,1,30),DA)=""
"^DD",8973.2,8973.2,.03,1,2,2)
K ^KMPD(8973.2,"C",$E(X,1,30),DA)
"^DD",8973.2,8973.2,.03,1,2,"DT")
3030805
"^DD",8973.2,8973.2,.03,1,3,0)
8973.2^ADT^MUMPS
"^DD",8973.2,8973.2,.03,1,3,1)
S:$P(X,".") ^KMPD(8973.2,"ADT",$P(X,"."),DA)=""
"^DD",8973.2,8973.2,.03,1,3,2)
K:$P(X,".") ^KMPD(8973.2,"ADT",$P(X,"."),DA)
"^DD",8973.2,8973.2,.03,1,3,"%D",0)
^^1^1^3031211^
"^DD",8973.2,8973.2,.03,1,3,"%D",1,0)
^KMPD(8973.2,"ADT",Date,Ien)=""
"^DD",8973.2,8973.2,.03,1,3,"DT")
3031211
"^DD",8973.2,8973.2,.03,3)
(No range limit on date)
"^DD",8973.2,8973.2,.03,"DT")
3031211
"^DD",8973.2,8973.2,.04,0)
SERVER DELTA^F^^0;4^K:$L(X)>15!($L(X)<1) X
"^DD",8973.2,8973.2,.04,3)
Answer must be 1-15 characters in length
"^DD",8973.2,8973.2,.04,"DT")
3030718
"^DD",8973.2,8973.2,.05,0)
NEW PERSON^P200'^VA(200,^0;5^Q
"^DD",8973.2,8973.2,.05,1,0)
^.1
"^DD",8973.2,8973.2,.05,1,1,0)
8973.2^ANEWPER
"^DD",8973.2,8973.2,.05,1,1,1)
S ^KMPD(8973.2,"ANEWPER",$E(X,1,30),DA)=""
"^DD",8973.2,8973.2,.05,1,1,2)
K ^KMPD(8973.2,"ANEWPER",$E(X,1,30),DA)
"^DD",8973.2,8973.2,.05,1,1,"%D",0)
^^1^1^3030715^
"^DD",8973.2,8973.2,.05,1,1,"%D",1,0)
^KMPD(8973.2,"ANEWPER",NewPerson,X)=""
"^DD",8973.2,8973.2,.05,1,1,"DT")
3030715
"^DD",8973.2,8973.2,.05,"DT")
3030715
"^DD",8973.2,8973.2,.06,0)
CLIENT NAME^F^^0;6^K:$L(X)>40!($L(X)<1) X
"^DD",8973.2,8973.2,.06,1,0)
^.1^^0
"^DD",8973.2,8973.2,.06,1,1,0)
8973.2^ACLNM
"^DD",8973.2,8973.2,.06,1,1,1)
S ^KMPD(8973.2,"ACLNM",$E(X,1,30),DA)=""
"^DD",8973.2,8973.2,.06,1,1,2)
K ^KMPD(8973.2,"ACLNM",$E(X,1,30),DA)
"^DD",8973.2,8973.2,.06,1,1,"%D",0)
^^1^1^3030715^
"^DD",8973.2,8973.2,.06,1,1,"%D",1,0)
^KMPD(8973.2,"ACLNM",ClientName,X)=""
"^DD",8973.2,8973.2,.06,1,1,"DT")
3030715
"^DD",8973.2,8973.2,.06,3)
Answer must be 1-40 characters in length
"^DD",8973.2,8973.2,.06,"DT")
3030826
"^DD",8973.2,8973.2,.07,0)
KMPTMP SUBSCRIPT^F^^0;7^K:$L(X)>12!($L(X)<1) X
"^DD",8973.2,8973.2,.07,1,0)
^.1
"^DD",8973.2,8973.2,.07,1,1,0)
8973.2^ATMPSS
"^DD",8973.2,8973.2,.07,1,1,1)
S ^KMPD(8973.2,"ATMPSS",$E(X,1,30),DA)=""
"^DD",8973.2,8973.2,.07,1,1,2)
K ^KMPD(8973.2,"ATMPSS",$E(X,1,30),DA)
"^DD",8973.2,8973.2,.07,1,1,"%D",0)
^^1^1^3030715^
"^DD",8973.2,8973.2,.07,1,1,"%D",1,0)
^KMPD(8973.2,"ATMPSS",KmptmpSubscript,X)=""
"^DD",8973.2,8973.2,.07,1,1,"DT")
3030715
"^DD",8973.2,8973.2,.07,1,2,0)
8973.2^ASVDTSS^MUMPS
"^DD",8973.2,8973.2,.07,1,2,1)
D XREFT1^KMPDUT2($G(DA),$G(X),1)
"^DD",8973.2,8973.2,.07,1,2,2)
D XREFT1^KMPDUT2($G(DA),$G(X),2)
"^DD",8973.2,8973.2,.07,1,2,"%D",0)
^^1^1^3030722^
"^DD",8973.2,8973.2,.07,1,2,"%D",1,0)
^KMPD(8973.2,"ASVDTSS",KmptmpSubscript,ServerDate,Ien)=""
"^DD",8973.2,8973.2,.07,1,2,"DT")
3030722
"^DD",8973.2,8973.2,.07,1,3,0)
8973.2^ASSDTPT^MUMPS
"^DD",8973.2,8973.2,.07,1,3,1)
D XREFT2^KMPDUT2($G(DA),$G(X),1)
"^DD",8973.2,8973.2,.07,1,3,2)
D XREFT2^KMPDUT2($G(DA),$G(X),2)
"^DD",8973.2,8973.2,.07,1,3,"%D",0)
^^1^1^3030723^
"^DD",8973.2,8973.2,.07,1,3,"%D",1,0)
^KMPD(8973.2,"ASSDTPT",KmptmpSubscript,ServerDateTime,PrimeTime,DA)=""
"^DD",8973.2,8973.2,.07,1,3,"DT")
3030723
"^DD",8973.2,8973.2,.07,1,4,0)
8973.2^ASSDTTM^MUMPS
"^DD",8973.2,8973.2,.07,1,4,1)
D XREFT3^KMPDUT2($G(DA),$G(X),1)
"^DD",8973.2,8973.2,.07,1,4,2)
D XREFT3^KMPDUT2($G(DA),$G(X),2)
"^DD",8973.2,8973.2,.07,1,4,"%D",0)
^^1^1^3030813^
"^DD",8973.2,8973.2,.07,1,4,"%D",1,0)
^KMPD(8973.2,"ASSDTTM",KmptmpSusbscript,ServerDateTime,Ien)=""
"^DD",8973.2,8973.2,.07,1,4,"DT")
3030813
"^DD",8973.2,8973.2,.07,1,5,0)
8973.2^ASSCLDTTM^MUMPS
"^DD",8973.2,8973.2,.07,1,5,1)
D XREFT4^KMPDUT2($G(DA),$G(X),1)
"^DD",8973.2,8973.2,.07,1,5,2)
D XREFT4^KMPDUT2($G(DA),$G(X),2)
"^DD",8973.2,8973.2,.07,1,5,"%D",0)
^^1^1^3030826^
"^DD",8973.2,8973.2,.07,1,5,"%D",1,0)
S ^KMPD(8973.2,"ASSCLDTTM",KmptmpSubscript,ClientName,ServerDateTime,DA)
"^DD",8973.2,8973.2,.07,1,5,"DT")
3030826
"^DD",8973.2,8973.2,.07,1,6,0)
8973.2^ASSNPDTTM^MUMPS
"^DD",8973.2,8973.2,.07,1,6,1)
D XREFT5^KMPDUT2($G(DA),$G(X),1)
"^DD",8973.2,8973.2,.07,1,6,2)
D XREFT5^KMPDUT2($G(DA),$G(X),2)
"^DD",8973.2,8973.2,.07,1,6,"%D",0)
^^1^1^3030828^
"^DD",8973.2,8973.2,.07,1,6,"%D",1,0)
^KMPD(8973.2,"ASSNPDTTM",KmptmpSubscript,NewPerson,ServerDateTime,DA)=""
"^DD",8973.2,8973.2,.07,1,6,"DT")
3030828
"^DD",8973.2,8973.2,.07,1,7,0)
8973.2^ASSIPDTTM^MUMPS
"^DD",8973.2,8973.2,.07,1,7,1)
D XREFT6^KMPDUT2($G(DA),$G(X),1)
"^DD",8973.2,8973.2,.07,1,7,2)
D XREFT6^KMPDUT2($G(DA),$G(X),2)
"^DD",8973.2,8973.2,.07,1,7,"%D",0)
^^1^1^3030828^
"^DD",8973.2,8973.2,.07,1,7,"%D",1,0)
^KMPD(8973.2,"ASSIPDTTM",KmptmpSubscript,IpAddress,ServerDateTime,DA)=""
"^DD",8973.2,8973.2,.07,1,7,"DT")
3030828
"^DD",8973.2,8973.2,.07,3)
Answer must be 1-12 characters in length
"^DD",8973.2,8973.2,.07,"DT")
3030828
"^DD",8973.2,8973.2,.08,0)
TITLE^F^^0;8^K:$L(X)>30!($L(X)<1) X
"^DD",8973.2,8973.2,.08,1,0)
^.1
"^DD",8973.2,8973.2,.08,1,1,0)
8973.2^ATITLE
"^DD",8973.2,8973.2,.08,1,1,1)
S ^KMPD(8973.2,"ATITLE",$E(X,1,30),DA)=""
"^DD",8973.2,8973.2,.08,1,1,2)
K ^KMPD(8973.2,"ATITLE",$E(X,1,30),DA)
"^DD",8973.2,8973.2,.08,1,1,"%D",0)
^^1^1^3030715^
"^DD",8973.2,8973.2,.08,1,1,"%D",1,0)
^KMPD(8973.2,"ATITLE",Title,X)=""
"^DD",8973.2,8973.2,.08,1,1,"DT")
3030715
"^DD",8973.2,8973.2,.08,3)
Answer must be 1-30 characters in length
"^DD",8973.2,8973.2,.08,"DT")
3030715
"^DD",8973.2,8973.2,.09,0)
IP ADDRESS^F^^0;9^K:$L(X)>15!($L(X)<1) X
"^DD",8973.2,8973.2,.09,3)
Answer must be 1-15 characters in length
"^DD",8973.2,8973.2,.09,"DT")
3030716
"^DD",8973.2,8973.2,.1,0)
DAILY - SENT TO NATIONAL DB^S^0:NO;1:YES;^0;10^Q
"^DD",8973.2,8973.2,.1,"DT")
3040210
"^DIC",8972.1,8972.1,0)
CP CODE EVALUATOR^8972.1
"^DIC",8972.1,8972.1,0,"GL")
^KMPD(8972.1,
"^DIC",8972.1,"B","CP CODE EVALUATOR",8972.1)

"^DIC",8973,8973,0)
CP PARAMETERS^8973
"^DIC",8973,8973,0,"GL")
^KMPD(8973,
"^DIC",8973,"B","CP PARAMETERS",8973)

"^DIC",8973.1,8973.1,0)
CM HL7 DATA^8973.1
"^DIC",8973.1,8973.1,0,"GL")
^KMPD(8973.1,
"^DIC",8973.1,8973.1,"%",0)
^1.005^^0
"^DIC",8973.1,8973.1,"%D",0)
^^1^1^3010820^
"^DIC",8973.1,8973.1,"%D",1,0)
Holds HL7 daily statistics.
"^DIC",8973.1,"B","CM HL7 DATA",8973.1)

"^DIC",8973.2,8973.2,0)
CP TIMING^8973.2
"^DIC",8973.2,8973.2,0,"GL")
^KMPD(8973.2,
"^DIC",8973.2,8973.2,"%",0)
^1.005^^0
"^DIC",8973.2,"B","CP TIMING",8973.2)

**END**
**END**

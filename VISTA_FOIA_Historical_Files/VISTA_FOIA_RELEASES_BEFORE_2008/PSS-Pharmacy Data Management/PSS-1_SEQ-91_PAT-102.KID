Released PSS*1*102 SEQ #91
Extracted from mail message
**KIDS**:PSS*1.0*102^

**INSTALL NAME**
PSS*1.0*102
"BLD",6308,0)
PSS*1.0*102^PHARMACY DATA MANAGEMENT^0^3051018^y
"BLD",6308,1,0)
^^2^2^3050815^
"BLD",6308,1,1,0)
This patch will fix the problem with lookups in the Pharmacy Orderable 
"BLD",6308,1,2,0)
Item file (#50.7) when entering in lowercase drug names.
"BLD",6308,4,0)
^9.64PA^50.7^1
"BLD",6308,4,50.7,0)
50.7
"BLD",6308,4,50.7,2,0)
^9.641^50.76^1
"BLD",6308,4,50.7,2,50.76,0)
OI-DRUG TEXT ENTRY  (sub-file)
"BLD",6308,4,50.7,2,50.76,1,0)
^9.6411^.01^1
"BLD",6308,4,50.7,2,50.76,1,.01,0)
OI-DRUG TEXT ENTRY
"BLD",6308,4,50.7,222)
y^y^p^^^^n^^n
"BLD",6308,4,50.7,224)

"BLD",6308,4,"APDD",50.7,50.76)

"BLD",6308,4,"APDD",50.7,50.76,.01)

"BLD",6308,4,"B",50.7,50.7)

"BLD",6308,"INID")
^n
"BLD",6308,"INIT")
PSS102RP
"BLD",6308,"KRN",0)
^9.67PA^8989.52^19
"BLD",6308,"KRN",.4,0)
.4
"BLD",6308,"KRN",.401,0)
.401
"BLD",6308,"KRN",.402,0)
.402
"BLD",6308,"KRN",.403,0)
.403
"BLD",6308,"KRN",.5,0)
.5
"BLD",6308,"KRN",.84,0)
.84
"BLD",6308,"KRN",3.6,0)
3.6
"BLD",6308,"KRN",3.8,0)
3.8
"BLD",6308,"KRN",9.2,0)
9.2
"BLD",6308,"KRN",9.8,0)
9.8
"BLD",6308,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",6308,"KRN",9.8,"NM",1,0)
PSSPOIMO^^0^B73322011
"BLD",6308,"KRN",9.8,"NM",2,0)
PSSPOIMP^^0^B911666
"BLD",6308,"KRN",9.8,"NM",3,0)
PSS102RP^^0^B5001430
"BLD",6308,"KRN",9.8,"NM","B","PSS102RP",3)

"BLD",6308,"KRN",9.8,"NM","B","PSSPOIMO",1)

"BLD",6308,"KRN",9.8,"NM","B","PSSPOIMP",2)

"BLD",6308,"KRN",19,0)
19
"BLD",6308,"KRN",19.1,0)
19.1
"BLD",6308,"KRN",101,0)
101
"BLD",6308,"KRN",409.61,0)
409.61
"BLD",6308,"KRN",771,0)
771
"BLD",6308,"KRN",870,0)
870
"BLD",6308,"KRN",8989.51,0)
8989.51
"BLD",6308,"KRN",8989.52,0)
8989.52
"BLD",6308,"KRN",8994,0)
8994
"BLD",6308,"KRN","B",.4,.4)

"BLD",6308,"KRN","B",.401,.401)

"BLD",6308,"KRN","B",.402,.402)

"BLD",6308,"KRN","B",.403,.403)

"BLD",6308,"KRN","B",.5,.5)

"BLD",6308,"KRN","B",.84,.84)

"BLD",6308,"KRN","B",3.6,3.6)

"BLD",6308,"KRN","B",3.8,3.8)

"BLD",6308,"KRN","B",9.2,9.2)

"BLD",6308,"KRN","B",9.8,9.8)

"BLD",6308,"KRN","B",19,19)

"BLD",6308,"KRN","B",19.1,19.1)

"BLD",6308,"KRN","B",101,101)

"BLD",6308,"KRN","B",409.61,409.61)

"BLD",6308,"KRN","B",771,771)

"BLD",6308,"KRN","B",870,870)

"BLD",6308,"KRN","B",8989.51,8989.51)

"BLD",6308,"KRN","B",8989.52,8989.52)

"BLD",6308,"KRN","B",8994,8994)

"BLD",6308,"QUES",0)
^9.62^^
"BLD",6308,"REQB",0)
^9.611^1^1
"BLD",6308,"REQB",1,0)
PSS*1.0*68^2
"BLD",6308,"REQB","B","PSS*1.0*68",1)

"FIA",50.7)
PHARMACY ORDERABLE ITEM
"FIA",50.7,0)
^PS(50.7,
"FIA",50.7,0,0)
50.7I
"FIA",50.7,0,1)
y^y^p^^^^n^^n
"FIA",50.7,0,10)

"FIA",50.7,0,11)

"FIA",50.7,0,"RLRO")

"FIA",50.7,0,"VR")
1.0^PSS
"FIA",50.7,50.7)
1
"FIA",50.7,50.7,6)

"FIA",50.7,50.76)
1
"FIA",50.7,50.76,.01)

"INIT")
PSS102RP
"MBREQ")
0
"PKG",488,-1)
1^1
"PKG",488,0)
PHARMACY DATA MANAGEMENT^PSS^Maintenance of Pharmacy files.
"PKG",488,20,0)
^9.402P^^
"PKG",488,22,0)
^9.49I^1^1
"PKG",488,22,1,0)
1.0^2970930^3000316^66481
"PKG",488,22,1,"PAH",1,0)
102^3051018
"PKG",488,22,1,"PAH",1,1,0)
^^2^2^3051018
"PKG",488,22,1,"PAH",1,1,1,0)
This patch will fix the problem with lookups in the Pharmacy Orderable 
"PKG",488,22,1,"PAH",1,1,2,0)
Item file (#50.7) when entering in lowercase drug names.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","PSS102RP")
0^3^B5001430
"RTN","PSS102RP",1,0)
PSS102RP ;OIFO BAY PINES/VGF - TEMP RTN TO UPDATE PLACE OF VISIT IN FILE 1020.2;3/30/04
"RTN","PSS102RP",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**102**;9/30/97
"RTN","PSS102RP",3,0)
 N PSSIEN,PSSDRG,PSSDRUGT,PSSSPCE,PSSDUZ,PSSLN,PSSDRUG
"RTN","PSS102RP",4,0)
 N XMDUZ,XMSUB,XMTEXT,XMY
"RTN","PSS102RP",5,0)
 S PSSDUZ=DUZ
"RTN","PSS102RP",6,0)
 K ^TMP($J,"PSS102"),^XTMP("PSS102")
"RTN","PSS102RP",7,0)
 S PSSIEN="" F  S PSSIEN=$O(^PS(50.7,PSSIEN)) Q:PSSIEN=""  D
"RTN","PSS102RP",8,0)
 .S PSSDRG="" F  S PSSDRG=$O(^PS(50.7,PSSIEN,1,"B",PSSDRG)) Q:PSSDRG=""  D
"RTN","PSS102RP",9,0)
 ..S PSSDRUGT=$G(^PS(51.7,PSSDRG,0))
"RTN","PSS102RP",10,0)
 ..I $D(^PS(50.7,PSSIEN,2,"B",PSSDRUGT)) Q
"RTN","PSS102RP",11,0)
 ..S ^XTMP("PSS102",PSSIEN,PSSDRUGT)=""
"RTN","PSS102RP",12,0)
 I $O(^XTMP("PSS102",""))="" S ^XTMP("PSS102","NO DRUGS TO LIST","NO DRUGS TO LIST")=""
"RTN","PSS102RP",13,0)
 S ^TMP($J,"PSS102")=""
"RTN","PSS102RP",14,0)
 S ^TMP($J,"PSS102",0)=" "
"RTN","PSS102RP",15,0)
 S ^TMP($J,"PSS102",1)=" "
"RTN","PSS102RP",16,0)
 S ^TMP($J,"PSS102",2)="DRUG TEXT REPORT"
"RTN","PSS102RP",17,0)
 S ^TMP($J,"PSS102",3)=" "
"RTN","PSS102RP",18,0)
 S ^TMP($J,"PSS102",4)="This report will list the Drug Text entries in the Pharmacy"
"RTN","PSS102RP",19,0)
 S ^TMP($J,"PSS102",5)="Orderable Item file (#50.7) which are not also set up as"
"RTN","PSS102RP",20,0)
 S ^TMP($J,"PSS102",6)="Synonyms"
"RTN","PSS102RP",21,0)
 S ^TMP($J,"PSS102",7)=" "
"RTN","PSS102RP",22,0)
 S ^TMP($J,"PSS102",8)="DRUG NAME                    DRUG TEXT ENTRY"
"RTN","PSS102RP",23,0)
 S ^TMP($J,"PSS102",9)="---------                    ---------------"
"RTN","PSS102RP",24,0)
 S ^TMP($J,"PSS102",10)=" "
"RTN","PSS102RP",25,0)
 S PSSLN=11,$P(PSSSPCE," ",25)=""
"RTN","PSS102RP",26,0)
 S PSSIEN="" F  S PSSIEN=$O(^XTMP("PSS102",PSSIEN)) Q:PSSIEN=""  D
"RTN","PSS102RP",27,0)
 .S PSSDRUG=$P($G(^PS(50.7,PSSIEN,0)),"^")
"RTN","PSS102RP",28,0)
 .S PSSDRUGT="" F  S PSSDRUGT=$O(^XTMP("PSS102",PSSIEN,PSSDRUGT)) Q:PSSDRUGT=""  D
"RTN","PSS102RP",29,0)
 ..S ^TMP($J,"PSS102",PSSLN)=$E(PSSDRUG_PSSSPCE,1,25)_"     "_$E(PSSDRUGT_PSSSPCE,1,25)
"RTN","PSS102RP",30,0)
 ..S PSSLN=PSSLN+1
"RTN","PSS102RP",31,0)
QUEUE ;Send report to user
"RTN","PSS102RP",32,0)
 S XMSUB="PHARMACY DATA MANAGEMENT",XMTEXT="^TMP("_$J_","_"""PSS102"""_",",XMDUZ="PATCH PSS*1.0*102",XMY(PSSDUZ)=""
"RTN","PSS102RP",33,0)
 D SENDMSG^XMXAPI(PSSDUZ,XMSUB,"^TMP("_$J_","_"""PSS102"""_")",PSSDUZ)
"RTN","PSS102RP",34,0)
 K ^TMP($J)
"RTN","PSS102RP",35,0)
 Q
"RTN","PSSPOIMO")
0^1^B73322011
"RTN","PSSPOIMO",1,0)
PSSPOIMO ;BIR/RTR/WRT-Edit Orderable Item Name and Inactive date ;7/20/04 1:45pm
"RTN","PSSPOIMO",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**29,32,38,47,68,102**;9/30/97
"RTN","PSSPOIMO",3,0)
 S PSSITE=+$O(^PS(59.7,0)) I +$P($G(^PS(59.7,PSSITE,80)),"^",2)<2 W !!?3,"Orderable Item Auto-Create has not been completed yet!",! K PSSITE K DIR S DIR("A")="Press RETURN to continue",DIR(0)="E" D ^DIR K DIR Q
"RTN","PSSPOIMO",4,0)
 K PSSITE W !!,"This option enables you to edit Orderable Item names, Formulary status,",!,"drug text, Inactive Dates, and Synonyms."
"RTN","PSSPOIMO",5,0)
EN I $D(PSOIEN) L -^PS(50.7,PSOIEN)
"RTN","PSSPOIMO",6,0)
 K PSSCROSS
"RTN","PSSPOIMO",7,0)
 K DIC ; S PY=$P($G(^PS(59.7,1,31)),"^",2)
"RTN","PSSPOIMO",8,0)
 S PSS1="W ""  ""_$P(^PS(50.606,$P(^PS(50.7,+Y,0),""^"",2),0),""^"")_""  ""_$S($P($G(^PS(50.7,+Y,0)),""^"",4):$E($P(^(0),""^"",4),4,5)_""-""_$E($P(^(0),""^"",4),6,7)_""-""_$E($P(^(0),""^"",4),2,3),1:"""")"
"RTN","PSSPOIMO",9,0)
 S PSS2=" S NF=$P($G(^PS(50.7,+Y,0)),""^"",12) I NF S NF=""   N/F"" W NF"
"RTN","PSSPOIMO",10,0)
 S DIC("W")=PSS1_PSS2,DIC("S")="I '$P($G(^PS(50.7,+Y,0)),""^"",3)"
"RTN","PSSPOIMO",11,0)
 ;PSO*7*102;ONLY SEARCH B AND C X-REFS
"RTN","PSSPOIMO",12,0)
 S $P(PLINE,"-",79)="" W !! K PSOUT S DIC="^PS(50.7,",DIC(0)="QEAMZ",D="B^C" D MIX^DIC1 K DIC,PY,D G:Y<0!($D(DTOUT))!($D(DUOUT)) END
"RTN","PSSPOIMO",13,0)
 S PSOIEN=+Y,PSOINAME=$P(Y,"^",2),PSDOSE=+$P(^PS(50.7,PSOIEN,0),"^",2) L +^PS(50.7,PSOIEN):0 I '$T W !,$C(7),"Another person is editing this one." Q
"RTN","PSSPOIMO",14,0)
 W !!!,?5,"Orderable Item -> ",PSOINAME,!?5,"Dosage Form    -> ",$P($G(^PS(50.606,PSDOSE,0)),"^"),!
"RTN","PSSPOIMO",15,0)
 ;I $P($G(^PS(50.7,PSOIEN,0)),"^",3) W !?3,"*** This Orderable Item is flagged for IV use! ***",!
"RTN","PSSPOIMO",16,0)
 ;G:$P($G(^PS(50.7,PSOIEN,0)),"^",3) ADDIT
"RTN","PSSPOIMO",17,0)
 K DIR S DIR("?")=" ",DIR("?",1)="Enter 'Yes' to see all of the Dispense Drugs, IV Additives, and IV Solutions",DIR("?",2)="that are matched to this Orderable Item. IV Additives will be identified with"
"RTN","PSSPOIMO",18,0)
  S DIR("?",3)="an (A), and IV Solutions with an (S)."
"RTN","PSSPOIMO",19,0)
 S DIR(0)="Y",DIR("B")="YES",DIR("A")="List all Drugs/Additives/Solutions tied to this Orderable Item" D ^DIR K DIR I Y["^"!($D(DTOUT))!($D(DUOUT)) G EN
"RTN","PSSPOIMO",20,0)
 I Y D DISP
"RTN","PSSPOIMO",21,0)
EDIT K DIR W ! S DIR(0)="Y",DIR("A")="Are you sure you want to edit this Orderable Item",DIR("B")="NO",DIR("?")="Answer YES to edit the fields associated with this Orderable Item." D ^DIR K DIR I 'Y!($D(DTOUT))!($D(DUOUT)) G EN
"RTN","PSSPOIMO",22,0)
 W !!?3,"Now editing Orderable Item:",!?3,PSOINAME,"   ",$P($G(^PS(50.606,PSDOSE,0)),"^")
"RTN","PSSPOIMO",23,0)
DIR K DIR S DIR(0)="F^3:40",DIR("B")=PSOINAME,DIR("A")="Orderable Item Name" D ^DIR
"RTN","PSSPOIMO",24,0)
 I Y["^"!($D(DUOUT))!($D(DTOUT)) G EN
"RTN","PSSPOIMO",25,0)
 I X[""""!($A(X)=45)!('(X'?1P.E))!(X?2"z".E) W $C(7),!!?5,"??" G DIR
"RTN","PSSPOIMO",26,0)
 I X'=PSOINAME S ZZFLAG=0 D @$S('$P($G(^PS(50.7,PSOIEN,0)),"^",3):"CHECK",1:"ZCHECK") I ZZFLAG G DIR
"RTN","PSSPOIMO",27,0)
 S PSONEW=X,DIE="^PS(50.7,",DA=PSOIEN,DR=".01////"_X D ^DIE I PSONEW'=PSOINAME W !!,"Name changed from  ",PSOINAME,!?15,"to  ",PSONEW
"RTN","PSSPOIMO",28,0)
 ;I $P($G(^PS(59.7,1,20.4)),"^",16)=1,$P(^PS(50.7,PSOIEN,0),"^",3)=1,$P(^PS(50.7,PSOIEN,0),"^",11)="" D UDMSG K DIE S DIE="^PS(50.7,",DR="3",DA=PSOIEN D ^DIE
"RTN","PSSPOIMO",29,0)
 ;I $P($G(^PS(59.7,1,20.4)),"^",16)=1,$P(^PS(50.7,PSOIEN,0),"^",3)'=1,$P(^PS(50.7,PSOIEN,0),"^",10)="" D IVMSG K DIE S DIE="^PS(50.7,",DR="4",DA=PSOIEN D ^DIE
"RTN","PSSPOIMO",30,0)
 S PSSDTENT=0 W ! K DIE N MFLG S PSBEFORE=$P(^PS(50.7,PSOIEN,0),"^",4),PSAFTER=0,PSINORDE="" D
"RTN","PSSPOIMO",31,0)
 .;If reactivate OI, prompt to reactivate DD's only if there are any, then always give message saying OI now Active. If Inactivate, prompt to inactivate any active DD's if there are any, and give message
"RTN","PSSPOIMO",32,0)
 .;but if OI is reactivated, and there are no actitives matched to it, and user does not want to activate the drugs, then inactivate the OI again, and give a clear message explaining this.
"RTN","PSSPOIMO",33,0)
 .W !,"This Orderable Item is "_$S($P($G(^PS(50.7,PSOIEN,0)),"^",12):"Non-Formulary.",1:"Formulary."),!
"RTN","PSSPOIMO",34,0)
 .I $P($G(^PS(50.7,PSOIEN,0)),"^",10) W !,"This Orderable Item is marked as a Non-VA Med.",!
"RTN","PSSPOIMO",35,0)
 .S DIE="^PS(50.7,",DA=PSOIEN,DR=6 S PSCREATE=1 D ^DIE K DIE,PSCREATE I $D(DTOUT)!($D(Y)) Q
"RTN","PSSPOIMO",36,0)
 .;PSS*1*102;ADD DRUG TEXT AS SYNONYM IS REQUESTED BY USER
"RTN","PSSPOIMO",37,0)
 .D ADDSYN^PSSPOIMP
"RTN","PSSPOIMO",38,0)
 .K DIR S DIR(0)="DO",DIR("A")="INACTIVE DATE" D  D ^DIR K DIR I $G(Y)["^"!($D(DTOUT))!($G(DUOUT)) Q
"RTN","PSSPOIMO",39,0)
 ..I $G(PSBEFORE) S Y=PSBEFORE D DD^%DT S DIR("B")=$G(Y)
"RTN","PSSPOIMO",40,0)
 .I $G(PSBEFORE),'$G(Y) W ?40,"Inactive Date deleted!"
"RTN","PSSPOIMO",41,0)
 .S PSSDTENT=$G(Y) I $G(Y) D DD^%DT W ?40,$G(Y)
"RTN","PSSPOIMO",42,0)
 .S PSSOTH=$S($P($G(^PS(59.7,1,40.2)),"^"):1,1:0)
"RTN","PSSPOIMO",43,0)
 .S DIE="^PS(50.7,",DA=PSOIEN,DR=".05;.06;.07;.08;7;S:'$G(PSSOTH) Y=""@1"";7.1;@1"
"RTN","PSSPOIMO",44,0)
 .S PSCREATE=1 D ^DIE K DIE,PSCREATE,PSSOTH
"RTN","PSSPOIMO",45,0)
 .S $P(^PS(50.7,PSOIEN,0),"^",4)=PSSDTENT,PSAFTER=PSSDTENT
"RTN","PSSPOIMO",46,0)
 S:PSBEFORE&('$P(^PS(50.7,PSOIEN,0),"^",4)) PSINORDE="D" S:$P(^PS(50.7,PSOIEN,0),"^",4) PSINORDE="I"
"RTN","PSSPOIMO",47,0)
 I PSINORDE'="" D CHECK^PSSPOID2(PSOIEN) D
"RTN","PSSPOIMO",48,0)
 .I PSINORDE="D" D  Q
"RTN","PSSPOIMO",49,0)
 ..I $O(PSSDACTI(0))!($O(PSSSACTI(0)))!($O(PSSAACTI(0))) D
"RTN","PSSPOIMO",50,0)
 ...W !!,"There are inactive "_$S($O(PSSDACTI(0)):"drugs, ",1:"")_$S($O(PSSAACTI(0)):"additives, ",1:"")_$S($O(PSSSACTI(0)):"solutions,",1:""),!,"matched to this Pharmacy Orderable Item."
"RTN","PSSPOIMO",51,0)
 .I $O(PSSDACT(0))!($O(PSSSACT(0)))!($O(PSSAACT(0))) D
"RTN","PSSPOIMO",52,0)
 ..W !!,"There are active "_$S($O(PSSDACT(0)):"drugs, ",1:"")_$S($O(PSSAACT(0)):"additives, ",1:"")_$S($O(PSSSACT(0)):"solutions,",1:""),!,"matched to this Pharmacy Orderable Item."
"RTN","PSSPOIMO",53,0)
 I $G(PSINORDE)="D" I $O(PSSDACTI(0))!($O(PSSSACTI(0)))!($O(PSSAACTI(0))) D REST^PSSPOIDT(PSOIEN)
"RTN","PSSPOIMO",54,0)
 I $G(PSINORDE)="I" I $O(PSSDACT(0))!($O(PSSSACT(0)))!($O(PSSAACT(0))) D REST^PSSPOIDT(PSOIEN)
"RTN","PSSPOIMO",55,0)
 S DIK="^PS(50.7,",DA=PSOIEN,DIK(1)=.04 D EN^DIK K DIK
"RTN","PSSPOIMO",56,0)
 K PSBEFORE,PSAFTER,PSINORDE,PSSDTENT,PSSDACT,PSSDACTI,PSSSACT,PSSSACTI,PSSAACT,PSSAACTI
"RTN","PSSPOIMO",57,0)
SYN W ! K DIC S:'$D(^PS(50.7,PSOIEN,2,0)) ^PS(50.7,PSOIEN,2,0)="^50.72^0^0" S DIC="^PS(50.7,"_PSOIEN_",2,",DA(1)=PSOIEN,DIC(0)="QEAMZL",DIC("A")="Select SYNONYM: ",DLAYGO=50.72 D ^DIC K DIC
"RTN","PSSPOIMO",58,0)
 I Y<0!($D(DUOUT))!($D(DTOUT)) K:'$O(^PS(50.7,PSOIEN,2,0)) ^PS(50.7,PSOIEN,2,0) D EN^PSSPOIDT(PSOIEN),EN2^PSSHL1(PSOIEN,"MUP") G EN
"RTN","PSSPOIMO",59,0)
 W ! S DA=+Y,DIE="^PS(50.7,"_PSOIEN_",2,",DA(1)=PSOIEN,DR=.01 D ^DIE K DIE G SYN
"RTN","PSSPOIMO",60,0)
 D EN^PSSPOIDT(PSOIEN),EN2^PSSHL1(PSOIEN,"MUP")
"RTN","PSSPOIMO",61,0)
 G EN
"RTN","PSSPOIMO",62,0)
END K ZZFLAG,DIC,DIR,DIE,DTOUT,DUOUT,FLAG,PSOINAME,PSOUT,PSDOSE,PSONEW,UPFLAG,VV,ZZ,AA,BB,Y,AAA,SSS,PSOARR,PSOARRAD,PLINE I $D(PSOIEN) L -^PS(50.7,PSOIEN) K PSOIEN
"RTN","PSSPOIMO",63,0)
 Q
"RTN","PSSPOIMO",64,0)
DISP N PSSLFLAG,PSSLDATE S FLAG=1 D HEAD F ZZ=0:0 S ZZ=$O(^PSDRUG("ASP",PSOIEN,ZZ)) Q:'ZZ!($G(PSOUT))  S FLAG=0 D:($Y+5)>IOSL HEAD Q:$G(PSOUT)  I ZZ W !,$P($G(^PSDRUG(ZZ,0)),"^") W:$P($G(^PSDRUG(ZZ,0)),"^",9) "   N/F" D DTE
"RTN","PSSPOIMO",65,0)
 Q:$G(PSOUT)
"RTN","PSSPOIMO",66,0)
 S (FLAG,PSSLFLAG)=0
"RTN","PSSPOIMO",67,0)
 F ZZ=0:0 S ZZ=$O(^PS(52.6,"AOI",PSOIEN,ZZ)) Q:'ZZ!($G(PSOUT))  D:($Y+5)>IOSL HEAD Q:$G(PSOUT)  I ZZ D
"RTN","PSSPOIMO",68,0)
 .S PSSLFLAG=1
"RTN","PSSPOIMO",69,0)
 .W !,$P($G(^PS(52.6,ZZ,0)),"^"),?42,"(A)"
"RTN","PSSPOIMO",70,0)
 .S PSSLDATE=$P($G(^PS(52.6,ZZ,"I")),"^") I PSSLDATE D DTEX
"RTN","PSSPOIMO",71,0)
 Q:$G(PSOUT)
"RTN","PSSPOIMO",72,0)
 ;I $G(PSSLFLAG) W !
"RTN","PSSPOIMO",73,0)
 F ZZ=0:0 S ZZ=$O(^PS(52.7,"AOI",PSOIEN,ZZ)) Q:'ZZ!($G(PSOUT))  D:($Y+5)>IOSL HEAD Q:$G(PSOUT)  I ZZ D
"RTN","PSSPOIMO",74,0)
 .W !,$P($G(^PS(52.7,ZZ,0)),"^"),?31,$P($G(^(0)),"^",3),?42,"(S)"
"RTN","PSSPOIMO",75,0)
 .S PSSLDATE=$P($G(^PS(52.7,ZZ,"I")),"^") I PSSLDATE D DTEX
"RTN","PSSPOIMO",76,0)
 Q
"RTN","PSSPOIMO",77,0)
HEAD I 'FLAG W ! K DIR S DIR(0)="E",DIR("A")="Press RETURN to continue" D ^DIR K DIR I 'Y S PSOUT=1 Q
"RTN","PSSPOIMO",78,0)
 W @IOF W !,?6,"Orderable Item ->  ",PSOINAME,!?6,"Dosage Form    ->  ",$P($G(^PS(50.606,+$P($G(^PS(50.7,PSOIEN,0)),"^",2),0)),"^"),!!,"Dispense Drugs:"_$S('FLAG:" (continued)",1:""),!,"---------------"
"RTN","PSSPOIMO",79,0)
 Q
"RTN","PSSPOIMO",80,0)
ADDIT ;If orderable item is flagged for IV
"RTN","PSSPOIMO",81,0)
 S AA=$O(^PS(52.6,"AOI",PSOIEN,0))
"RTN","PSSPOIMO",82,0)
 S BB=$O(^PS(52.7,"AOI",PSOIEN,0))
"RTN","PSSPOIMO",83,0)
 I 'AA,'BB W $C(7),!,"This Orderable Item is flagged for IV use, but currently there are no IV",!,"Additives or IV Solutions matched to this Orderable Item!" G EDIT
"RTN","PSSPOIMO",84,0)
 G SOL
"RTN","PSSPOIMO",85,0)
CHECK ;
"RTN","PSSPOIMO",86,0)
 S ZZFLAG=0 F VV=0:0 S VV=$O(^PS(50.7,"ADF",X,PSDOSE,VV)) Q:'VV  I VV,'$P($G(^PS(50.7,VV,0)),"^",3) S ZZFLAG=1
"RTN","PSSPOIMO",87,0)
 I ZZFLAG W $C(7),!!?5,"There is already an Orderable Item with this same name and Dosage Form",!?5,"that is not flagged as 'IV'. Use the 'DISPENSE DRUG/ORDERABLE ITEM",!?5,"MAINTENANCE' option if you want to re-match to this Orderable Item!",!
"RTN","PSSPOIMO",88,0)
 Q
"RTN","PSSPOIMO",89,0)
ZCHECK ;
"RTN","PSSPOIMO",90,0)
 S ZZFLAG=0 F VV=0:0 S VV=$O(^PS(50.7,"ADF",X,PSDOSE,VV)) Q:'VV  I VV,$P($G(^PS(50.7,VV,0)),"^",3) S ZZFLAG=1
"RTN","PSSPOIMO",91,0)
 I ZZFLAG W $C(7),!!?5,"There is already an Orderable Item with the same name and Dosage Form,",!?5,"that is flagged for 'IV' use.",!
"RTN","PSSPOIMO",92,0)
 Q
"RTN","PSSPOIMO",93,0)
SOL ;
"RTN","PSSPOIMO",94,0)
 K DIR S DIR(0)="Y",DIR("B")="YES",DIR("A")="List all Additives and Solutions tied to this Orderable Item" D ^DIR K DIR G:Y["^"!($D(DTOUT)) EN G:Y=0 EDIT
"RTN","PSSPOIMO",95,0)
 H 1 K PSOARR,PSOARRAD S AAA=$O(^PS(52.6,"AOI",PSOIEN,0)) I AAA,$D(^PS(52.6,AAA,0)) S PSOARRAD=AAA
"RTN","PSSPOIMO",96,0)
 F SSS=0:0 S SSS=$O(^PS(52.7,"AOI",PSOIEN,SSS)) Q:'SSS  S:$D(^PS(52.7,SSS,0)) PSOARR(SSS)=""
"RTN","PSSPOIMO",97,0)
 S FLAG=1,UPFLAG=0 D SHEAD F ZZ=0:0 S ZZ=$O(PSOARR(ZZ)) Q:'ZZ!($G(PSOUT))!($G(UPFLAG))  S FLAG=0 D:($Y+7)>IOSL SHEAD Q:$G(PSOUT)!($G(UPFLAG))  I ZZ W !,$P($G(^PS(52.7,ZZ,0)),"^"),"   ",$P($G(^(0)),"^",3)
"RTN","PSSPOIMO",98,0)
 G:$G(PSOUT) EN
"RTN","PSSPOIMO",99,0)
 G EDIT
"RTN","PSSPOIMO",100,0)
SHEAD I 'FLAG W ! K DIR S DIR(0)="E",DIR("A")="Press RETURN to continue" D ^DIR K DIR I 'Y S:Y="" PSOUT=1 S:Y=0 UPFLAG=1 Q
"RTN","PSSPOIMO",101,0)
 W @IOF W !?6,"Orderable Item ->  ",PSOINAME,?68,"(IV)",!?6,"Dosage Form    ->  ",$P($G(^PS(50.606,+$P($G(^PS(50.7,PSOIEN,0)),"^",2),0)),"^"),!,PLINE I FLAG,'$G(PSOARRAD) W !?5,"IV Solutions:",!
"RTN","PSSPOIMO",102,0)
 I 'FLAG W !?5,"IV Solutions:",!
"RTN","PSSPOIMO",103,0)
 I FLAG,$G(PSOARRAD) W !,$P($G(^PS(52.6,PSOARRAD,0)),"^"),"    ","(IV Additive)",! I $D(PSOARR) W !?5,"IV Solutions:",!
"RTN","PSSPOIMO",104,0)
 Q
"RTN","PSSPOIMO",105,0)
DTE I $D(^PSDRUG(ZZ,"I")) S Y=$P(^PSDRUG(ZZ,"I"),"^") D DD^%DT W ?50,Y K Y
"RTN","PSSPOIMO",106,0)
 Q
"RTN","PSSPOIMO",107,0)
DTEX S Y=$G(PSSLDATE) D DD^%DT W ?50,$G(Y) K Y
"RTN","PSSPOIMO",108,0)
 Q
"RTN","PSSPOIMO",109,0)
IVMSG ; display a message if the CORRESPONDING IV field is entered
"RTN","PSSPOIMO",110,0)
 ;
"RTN","PSSPOIMO",111,0)
 S PSSIVMSG=$P(^PS(50.7,PSOIEN,0),"^",11) I PSSIVMSG="" Q
"RTN","PSSPOIMO",112,0)
 S PSSIVFRM=$P(^PS(50.7,PSSIVMSG,0),"^",2) I PSSIVFRM S PSSIVFRM=$P(^PS(50.606,PSSIVFRM,0),"^")
"RTN","PSSPOIMO",113,0)
 S PSSIVMSG=$P(^PS(50.7,PSSIVMSG,0),"^")_" "_PSSIVFRM
"RTN","PSSPOIMO",114,0)
 W !!,"The Corresponding IV Item is currently identified as: "_PSSIVMSG,!
"RTN","PSSPOIMO",115,0)
 K PSSIVFRM,PSSIVMSG
"RTN","PSSPOIMO",116,0)
 Q
"RTN","PSSPOIMO",117,0)
UDMSG ; display a message if the CORRESPONDING UD field is entered
"RTN","PSSPOIMO",118,0)
 ;
"RTN","PSSPOIMO",119,0)
 S PSSUDMSG=$P(^PS(50.7,PSOIEN,0),"^",10) I PSSUDMSG="" Q
"RTN","PSSPOIMO",120,0)
 S PSSUDFRM=$P(^PS(50.7,PSSUDMSG,0),"^",2) I PSSUDFRM S PSSUDFRM=$P(^PS(50.606,PSSUDFRM,0),"^")
"RTN","PSSPOIMO",121,0)
 S PSSUDMSG=$P(^PS(50.7,PSSUDMSG,0),"^")_" "_PSSUDFRM
"RTN","PSSPOIMO",122,0)
 W !!,"The Corresponding UD Item is currently identified as: "_PSSUDMSG,!
"RTN","PSSPOIMO",123,0)
 K PSSUDMSG,PSSUDFRM
"RTN","PSSPOIMO",124,0)
 Q
"RTN","PSSPOIMP")
0^2^B911666
"RTN","PSSPOIMP",1,0)
PSSPOIMP ;BIR/RTR/WRT-Edit Orderable Item Name and Inactive date ;7/20/04 1:45pm
"RTN","PSSPOIMP",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**102**;9/30/97
"RTN","PSSPOIMP",3,0)
ASKSYN ;PSS*1*102;PROMPT TO ADD DRUG TEXT AS SYNONYM
"RTN","PSSPOIMP",4,0)
 N DIR
"RTN","PSSPOIMP",5,0)
 S DIR(0)="Y"
"RTN","PSSPOIMP",6,0)
 S DIR("A")="ADD THIS DRUG TEXT AS A SYNONYM? "
"RTN","PSSPOIMP",7,0)
 S DIR("B")="N"
"RTN","PSSPOIMP",8,0)
 D ^DIR
"RTN","PSSPOIMP",9,0)
 I 'Y Q
"RTN","PSSPOIMP",10,0)
 S X=$G(^PS(51.7,X(1),0))
"RTN","PSSPOIMP",11,0)
 I X]"" S PPPTMP(50.72,PSOIEN,X)=""
"RTN","PSSPOIMP",12,0)
 Q
"RTN","PSSPOIMP",13,0)
ADDSYN ;ADD DRUG TEXT AS A SYNONYM
"RTN","PSSPOIMP",14,0)
 N TMP,PSOERR,DIERR,X,PSOIEN
"RTN","PSSPOIMP",15,0)
 S PSOIEN="" F  S PSOIEN=$O(PPPTMP(50.72,PSOIEN)) Q:PSOIEN=""  D
"RTN","PSSPOIMP",16,0)
 .S X="" F  S X=$O(PPPTMP(50.72,PSOIEN,X)) Q:X=""  D
"RTN","PSSPOIMP",17,0)
 ..I $D(^PS(50.7,PSOIEN,2,"B",X)) Q
"RTN","PSSPOIMP",18,0)
 ..S TMP(50.72,"+2,"_PSOIEN_",",.01)=X
"RTN","PSSPOIMP",19,0)
 ..D UPDATE^DIE("","TMP","","PSOERR")
"RTN","PSSPOIMP",20,0)
 ..K DIE,DIR,DIERR,TMP
"RTN","PSSPOIMP",21,0)
 K PPPTMP,TMP
"RTN","PSSPOIMP",22,0)
 Q
"UP",50.7,50.76,-1)
50.7^1
"UP",50.7,50.76,0)
50.76
"VER")
8.0^22.0
"^DD",50.7,50.7,6,0)
OI-DRUG TEXT ENTRY^50.76P^^1;0
"^DD",50.7,50.76,0)
OI-DRUG TEXT ENTRY SUB-FIELD^^.01^1
"^DD",50.7,50.76,0,"NM","OI-DRUG TEXT ENTRY")

"^DD",50.7,50.76,.01,0)
OI-DRUG TEXT ENTRY^M*P51.7'^PS(51.7,^0;1^S DIC("S")="N ZC S ZC=$P($G(^PS(51.7,+Y,0)),""^"",2) I $S('ZC:1,1:ZC>DT)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",50.7,50.76,.01,1,0)
^.1
"^DD",50.7,50.76,.01,1,1,0)
50.76^B
"^DD",50.7,50.76,.01,1,1,1)
S ^PS(50.7,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",50.7,50.76,.01,1,1,2)
K ^PS(50.7,DA(1),1,"B",$E(X,1,30),DA)
"^DD",50.7,50.76,.01,1,2,0)
50.7^DTXT
"^DD",50.7,50.76,.01,1,2,1)
S ^PS(50.7,"DTXT",$E(X,1,30),DA(1),DA)=""
"^DD",50.7,50.76,.01,1,2,2)
K ^PS(50.7,"DTXT",$E(X,1,30),DA(1),DA)
"^DD",50.7,50.76,.01,1,2,3)
Do Not Delete
"^DD",50.7,50.76,.01,1,2,"%D",0)
^^1^1^3011107^
"^DD",50.7,50.76,.01,1,2,"%D",1,0)
This is used to lookup Drug Text entries linked to Orderable Item.
"^DD",50.7,50.76,.01,1,2,"DT")
3011107
"^DD",50.7,50.76,.01,1,3,0)
50.7^AL^MUMPS
"^DD",50.7,50.76,.01,1,3,1)
D ASKSYN^PSSPOIMP
"^DD",50.7,50.76,.01,1,3,2)
I
"^DD",50.7,50.76,.01,1,3,"DT")
3050818
"^DD",50.7,50.76,.01,3)
This field is used to associate entries from the DRUG TEXT File (#51.7) with Pharmacy Orderable Items. This information will be seen in CPRS and Pharmacy during the medication order entry process.
"^DD",50.7,50.76,.01,12)
Only active entries may be selected.
"^DD",50.7,50.76,.01,12.1)
S DIC("S")="N ZC S ZC=$P($G(^PS(51.7,+Y,0)),""^"",2) I $S('ZC:1,1:ZC>DT)"
"^DD",50.7,50.76,.01,21,0)
^.001^7^7^3010320^^
"^DD",50.7,50.76,.01,21,1,0)
This is a pointer to the DRUG TEXT File (#51.7). This file contains such
"^DD",50.7,50.76,.01,21,2,0)
information as drug restrictions, guidelines and protocols to help assure
"^DD",50.7,50.76,.01,21,3,0)
that medications are being used according to formulary specifications.
"^DD",50.7,50.76,.01,21,4,0)
This information will be seen in CPRS and Pharmacy, when a medication
"^DD",50.7,50.76,.01,21,5,0)
order is placed for the Pharmacy Orderable Item. New entries to the DRUG
"^DD",50.7,50.76,.01,21,6,0)
TEXT File (#51.7) must be made through the Drug Text Enter/Edit [PSS EDIT
"^DD",50.7,50.76,.01,21,7,0)
TEXT] option.
"^DD",50.7,50.76,.01,"DT")
3050818
"BLD",6308,6)
^91
**END**
**END**

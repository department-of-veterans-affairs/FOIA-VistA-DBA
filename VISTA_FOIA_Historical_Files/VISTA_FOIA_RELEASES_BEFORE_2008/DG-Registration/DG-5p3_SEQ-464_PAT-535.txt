$TXT Created by HUA,PATRICK at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 07/21/03 at 08:54
=============================================================================
Run Date: AUG 26, 2003                     Designation: DG*5.3*535
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #464                    Status: Released
                  Compliance Date: SEP 26, 2003
=============================================================================

Associated patches: (v)DG*5.3*217  <<= must be installed BEFORE `DG*5.3*535'
                    (v)DG*5.3*313  <<= must be installed BEFORE `DG*5.3*535'
                    (v)DG*5.3*458  <<= must be installed BEFORE `DG*5.3*535'

Subject: Fix Reporting

Category: 
  - Routine

Description:
============

 This patch, DG*5.3*535, corrects various problem associated with certain 
 reports.
  
  
 This patch addresses the following E3R(s):
 ------------------------------------------
 There are no E3Rs associated with this patch.
  
  
 This patch addresses the following NOIS message(s):
 ---------------------------------------------------
 MIA-0899-30207 - Problem with new patch DG*5.3*217
  
 AMA-0501-72668 - Duplicate Spouse SSN Rpt Error
  
 MAD-0403-41881 - GMT Addition
  
  
 Overview of NOIS Message(s):
 ---------------------------
 MIA-0899-30207 - Problem with new patch DG*5.3*217
  
 PROBLEM: The Veterans with Income of a Specified Dollar Amount report is 
 also including copy tests in the report output.
  
 RESOLUTION: Add a check in the report to screen for only means tests.
  
 AMA-0501-72668 - Duplicate Spouse SSN Rpt Error
  
 PROBLEM: When running the Duplicate Spouse SSN report, an allocation 
 error could occur if the data for report is too big.
  
 RESOLUTION: The report mechanism currently uses an array to store the 
 data for the report.  An array is limited on how much data it can hold.  
 The report will be updated to use a global storage to accommodate cases 
 where the data is too big for an array to handle.
  
 MAD-0403-41881 - GMT Addition
  
 PROBLEM: When you add a Required Means Test for someone who is GMT Copay 
 Required, the system doesn't ask if you want to print the prior test.
  
 RESOLUTION: The code for a GMT Copay Required test is not included in the 
 conditional to prompt the user when a test is added.  The software will 
 be updated to include the GMT Copay Required code.
  
  
 Test Sites:
 -----------
 Amarillo
 Madison
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
  
 If installed during the normal workday, it is recommended that the
 following menu options (File #19) and all of their descendants be
 disabled to prevent possible conflicts while running the KIDS Install. 
 Other VISTA users will not be affected.
   
        Duplicate Spouse/Dependent SSN Report  [DG DUPLICATE SSN REPORT]
  
 Install Time - 5 Minutes.
  
  
   1.   LOAD TRANSPORT GLOBAL 
        ---------------------
        Choose the PackMan message containing this patch and invoke the 
        INSTALL/CHECK MESSAGE PackMan option.
  
   2.   DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only) 
        -----------------------
        Disable routine mapping on all systems for the routines listed in 
        step 3 below.
  
        NOTE:  If the routines included in this patch are not currently in 
               your mapped routine set, please skip this step.
  
   3.   COMPONENTS SENT WITH PATCH 
        ------------------------
        The following is a list of the routines included in this patch.  
        The second line of each of these routines now looks like:
  
            <tab>;;5.3;Registration;**[patch list]**;Aug 13, 1993
  
                                   CHECK^XTSUMBLD results
        Routine name  Before Patch   After Patch       Patch List
        ============  ============   ===========   ===================
        DGMTA         13273426       13302531      33,45,137,166,177
                                                   182,290,344,332,433
                                                   458,535
        DGMTARR       14114577       14144207      217,535
        DGSSNRP2      11941825       12915524      313,535
  
         Total number of routines - 3
  
         Total number of routines modified: 3
  
   4.   START UP KIDS 
        -------------
        Start up the Kernel Installation and Distribution System Menu 
        [XPD MAIN]:
  
             Edits and Distribution ...  
             Utilities ...  
             Installation ...
  
   Select Kernel Installation & Distribution System Option: INStallation 
                                                            ---
             Load a Distribution 
             Print Transport Global 
             Compare Transport Global to Current System 
             Verify Checksums in Transport Global 
             Install Package(s) 
             Restart Install of Package(s) 
             Unload a Distribution 
             Backup a Transport Global
   
   Select Installation Option:
  
   5.   Select Installation Option: 
        --------------------------
        NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
               NAME, enter DG*5.3*535):
  
        a.  Backup a Transport Global - This option will create a backup
            message of any routines exported with this patch. It will not
            backup any other changes such as DD's or templates.
        b.  Compare Transport Global to Current System - This option will
            allow you to view all changes that will be made when this patch
            is installed.  It compares all components of this patch
            (routines, DD's, templates, etc.).
        c.  Verify Checksums in Transport Global - This option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
  
   6.   Select Installation Option: Install Package(s) 
                                    ----------------
        **This is the step to start the installation of this KIDS patch:
  
        a.  Choose the Install Package(s) option to start the patch
            install.
        b.  When prompted 'Want KIDS to INHIBIT LOGONs during the
            install? YES//' answer NO.
        c.  When prompted 'Want to DISABLE Scheduled Options, Menu 
            Options, and Protocols? YES//' answer YES.
        d.  When prompted 'Enter options you wish to mark as 'Out Of
            Order':'  Enter the following options:
  
        Duplicate Spouse/Dependent SSN Report  [DG DUPLICATE SSN REPORT]
  
        e.  When prompted 'Enter protocols you wish to mark as 'Out Of 
            Order':'  press <return>.
  
   7.   REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
        -------------------------
        Optional - Include the routines distributed with this patch
        in the mapped routine set.
  
        NOTE: This step is only necessary if you performed step 2 or 
              if you wish to include the routines in your mapped set.

Routine Information:
====================

Routine Name:
  - DGMTA

 Original Code:
  
 PRINT   I "^P^A^C^"[(U_$P(DGLDT,U,4)_U) S %=1 W !,"Do you wish to print 
 the prior means test" D YN^DICN G:%=-1 Q I %Y["?" W !!,"This will print 
 the prior means test information.",! G PRINT
  
  
 Modified Code:
  
 PRINT   I "^P^A^C^G^"[(U_$P(DGLDT,U,4)_U) S %=1 W !,"Do you wish to print
 the prior means test" D YN^DICN G:%=-1 Q I %Y["?" W !!,"This will print
 the prior means test information.",! G PRINT

Routine Checksum:

Routine Name:
  - DGMTARR

 Original Code:
  
 RPTSDA  ;ENTRY POINT FROM XUTMDEVQ
         N DFN,SEX,VADM,DGDAT,DGIEN,DGMT0,DGINC,DGNAME,SSN,DGMTDATE,DGPMDT,
 DGPVISN,DGPVAMC,Y,VAERR,VA,DGPDG,DGPHDOL,DGPLDOL,DGPSDAT,DGPTDAT,DGPVASN
         D DFORM(DGSDAT,DGTDAT,DGFDOL,DGTDOL)
         K ^TMP($J,"MTSPI")
         S DGDAT=DGSDAT-1 F  S DGDAT=$O(^DGMT(408.31,"AG",DGDAT)) 
 Q:DGDAT'>0!(DGDAT\1>DGTDAT)  S DGIEN=0 F  S DGIEN=$O(^DGMT(408.31,"AG",
 DGDAT,DGIEN)) Q:DGIEN'>0  D
         .S DGMT0=$G(^DGMT(408.31,DGIEN,0))
         .S DGINC=$P(DGMT0,"^",4) Q:DGINC=""
         .I DGINC'<DGFDOL&(DGINC'>DGTDOL) D
  
  
 RPTLTT  ;BUILD AND PRINT LESS THAN THRESHOLD REPORT.  ENTRY POINT FROM 
 XUTMDEVQ
         N DGDAT,DFN,SEX,DGIEN,DGINC,DGTHR,DGLDOL,DGHDOL,VADM,SSN,DGPVISN,
 DGPVAMC,DGDIFF,DGMT0,DGNAME,DGPDG,DGPHDOL,DGPLDOL,DGPMDT,DGPSDAT,DGPTDAT,
 DGPVASN
         D DFORM(DGSDAT,DGTDAT,DGFDOL,DGTDOL)
         K ^TMP($J,"MTLTT")
         S DGDAT=DGSDAT-1 F  S DGDAT=$O(^DGMT(408.31,"AG",DGDAT)) 
 Q:DGDAT'>0!(DGDAT\1>DGTDAT)  S DGIEN=0 F  S DGIEN=$O(^DGMT(408.31,"AG",
 DGDAT,DGIEN)) Q:DGIEN'>0  D
         .S DGMT0=$G(^DGMT(408.31,DGIEN,0))
         .S DGINC=$P(DGMT0,"^",4),DGTHR=+$P(DGMT0,"^",12) Q:DGINC=""
         .Q:DGINC>DGTHR
  
  
 Modified Code:
  
 RPTSDA  ;ENTRY POINT FROM XUTMDEVQ
         N DFN,SEX,VADM,DGDAT,DGIEN,DGMT0,DGINC,DGNAME,SSN,DGMTDATE,DGPMDT,
 DGPVISN,DGPVAMC,Y,VAERR,VA,DGPDG,DGPHDOL,DGPLDOL,DGPSDAT,DGPTDAT,DGPVASN
         D DFORM(DGSDAT,DGTDAT,DGFDOL,DGTDOL)
         K ^TMP($J,"MTSPI")
         S DGDAT=DGSDAT-1 F  S DGDAT=$O(^DGMT(408.31,"AG",DGDAT)) 
 Q:DGDAT'>0!(DGDAT\1>DGTDAT)  S DGIEN=0 F  S DGIEN=$O(^DGMT(408.31,"AG",
 DGDAT,DGIEN)) Q:DGIEN'>0  D
         .S DGMT0=$G(^DGMT(408.31,DGIEN,0))
         .S DGINC=$P(DGMT0,"^",4) Q:DGINC=""
         .Q:$P(DGMT0,"^",19)'=1
         .I DGINC'<DGFDOL&(DGINC'>DGTDOL) D
  
  
 RPTLTT  ;BUILD AND PRINT LESS THAN THRESHOLD REPORT.  ENTRY POINT FROM 
 XUTMDEVQ
         N DGDAT,DFN,SEX,DGIEN,DGINC,DGTHR,DGLDOL,DGHDOL,VADM,SSN,DGPVISN,
 DGPVAMC,DGDIFF,DGMT0,DGNAME,DGPDG,DGPHDOL,DGPLDOL,DGPMDT,DGPSDAT,DGPTDAT,
 DGPVASN
         D DFORM(DGSDAT,DGTDAT,DGFDOL,DGTDOL)
         K ^TMP($J,"MTLTT")
         S DGDAT=DGSDAT-1 F  S DGDAT=$O(^DGMT(408.31,"AG",DGDAT)) 
 Q:DGDAT'>0!(DGDAT\1>DGTDAT)  S DGIEN=0 F  S DGIEN=$O(^DGMT(408.31,"AG",
 DGDAT,DGIEN)) Q:DGIEN'>0  D
         .S DGMT0=$G(^DGMT(408.31,DGIEN,0))
         .S DGINC=$P(DGMT0,"^",4),DGTHR=+$P(DGMT0,"^",12) Q:DGINC=""
         .Q:$P(DGMT0,"^",19)'=1
         .Q:DGINC>DGTHR

Routine Checksum:

Routine Name:
  - DGSSNRP2

 The original code to this routine uses a local variable array named 
 DGSSNAR.  All references to this variable has been updated to reference a 
 global named ^TMP("DGSSNAR").

Routine Checksum:

=============================================================================
User Information:
Entered By  : HUA,PATRICK                   Date Entered  : JUL 02, 2003
Completed By: LANDRY,DANNA                  Date Completed: AUG 25, 2003
Released By : KOVACH,STUART                 Date Released : AUG 26, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

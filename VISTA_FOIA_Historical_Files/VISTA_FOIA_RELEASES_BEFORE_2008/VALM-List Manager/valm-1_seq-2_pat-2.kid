Released VALM*1*2 SEQ #2
Extracted from mail message
**KIDS**:VALM*1.0*2^

**INSTALL NAME**
VALM*1.0*2
"BLD",122,0)
VALM*1.0*2^LIST MANAGER^0^2980727^y
"BLD",122,1,0)
^^15^15^2980727^
"BLD",122,1,1,0)
This patch is being released by Capacity Management (CM) in anticiptaion
"BLD",122,1,2,0)
of the national release of the Resource Usage Monitor (RUM) Version 1.0
"BLD",122,1,3,0)
software package.
"BLD",122,1,4,0)
 
"BLD",122,1,5,0)
This patch will not affect the current versions of the RUM software that
"BLD",122,1,6,0)
are running at the sites.  Therefore, all DSM, MSM and OpenM-NT sites are
"BLD",122,1,7,0)
instructed to install this patch.  Test sites which had a pre-release of
"BLD",122,1,8,0)
the RUM software should also install this patch.
"BLD",122,1,9,0)
 
"BLD",122,1,10,0)
The Capacity Management (CM) development team is removing obsolete
"BLD",122,1,11,0)
references to the Resource Usage Monitor (RUM) code.  CM has deemed that
"BLD",122,1,12,0)
these references are no longer necessary in order to monitor system
"BLD",122,1,13,0)
resource consumption.  The system workload data that was gleaned from the
"BLD",122,1,14,0)
existing code in these routines will be located within Kernel's menu
"BLD",122,1,15,0)
manager routines.
"BLD",122,4,0)
^9.64PA^^
"BLD",122,"KRN",0)
^9.67PA^19^16
"BLD",122,"KRN",.4,0)
.4
"BLD",122,"KRN",.401,0)
.401
"BLD",122,"KRN",.402,0)
.402
"BLD",122,"KRN",.403,0)
.403
"BLD",122,"KRN",.5,0)
.5
"BLD",122,"KRN",.84,0)
.84
"BLD",122,"KRN",3.6,0)
3.6
"BLD",122,"KRN",3.8,0)
3.8
"BLD",122,"KRN",9.2,0)
9.2
"BLD",122,"KRN",9.8,0)
9.8
"BLD",122,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",122,"KRN",9.8,"NM",1,0)
VALMXQ02^^0^B13227209
"BLD",122,"KRN",9.8,"NM",2,0)
VALMXQ15^^0^B13025860
"BLD",122,"KRN",9.8,"NM","B","VALMXQ02",1)

"BLD",122,"KRN",9.8,"NM","B","VALMXQ15",2)

"BLD",122,"KRN",19,0)
19
"BLD",122,"KRN",19.1,0)
19.1
"BLD",122,"KRN",101,0)
101
"BLD",122,"KRN",409.61,0)
409.61
"BLD",122,"KRN",771,0)
771
"BLD",122,"KRN",8994,0)
8994
"BLD",122,"KRN","B",.4,.4)

"BLD",122,"KRN","B",.401,.401)

"BLD",122,"KRN","B",.402,.402)

"BLD",122,"KRN","B",.403,.403)

"BLD",122,"KRN","B",.5,.5)

"BLD",122,"KRN","B",.84,.84)

"BLD",122,"KRN","B",3.6,3.6)

"BLD",122,"KRN","B",3.8,3.8)

"BLD",122,"KRN","B",9.2,9.2)

"BLD",122,"KRN","B",9.8,9.8)

"BLD",122,"KRN","B",19,19)

"BLD",122,"KRN","B",19.1,19.1)

"BLD",122,"KRN","B",101,101)

"BLD",122,"KRN","B",409.61,409.61)

"BLD",122,"KRN","B",771,771)

"BLD",122,"KRN","B",8994,8994)

"BLD",122,"QUES",0)
^9.62^^
"BLD",122,"REQB",0)
^9.611^^
"OER",378,0)
378^VALM^^^
"PKG",378,-1)
1^1
"PKG",378,0)
LIST MANAGER^VALM^List Manager Developer Tool
"PKG",378,22,0)
^9.49I^1^1
"PKG",378,22,1,0)
1.0
"PKG",378,22,1,"PAH",1,0)
2^2980727
"PKG",378,22,1,"PAH",1,1,0)
^^15^15^2980727
"PKG",378,22,1,"PAH",1,1,1,0)
This patch is being released by Capacity Management (CM) in anticiptaion
"PKG",378,22,1,"PAH",1,1,2,0)
of the national release of the Resource Usage Monitor (RUM) Version 1.0
"PKG",378,22,1,"PAH",1,1,3,0)
software package.
"PKG",378,22,1,"PAH",1,1,4,0)
 
"PKG",378,22,1,"PAH",1,1,5,0)
This patch will not affect the current versions of the RUM software that
"PKG",378,22,1,"PAH",1,1,6,0)
are running at the sites.  Therefore, all DSM, MSM and OpenM-NT sites are
"PKG",378,22,1,"PAH",1,1,7,0)
instructed to install this patch.  Test sites which had a pre-release of
"PKG",378,22,1,"PAH",1,1,8,0)
the RUM software should also install this patch.
"PKG",378,22,1,"PAH",1,1,9,0)
 
"PKG",378,22,1,"PAH",1,1,10,0)
The Capacity Management (CM) development team is removing obsolete
"PKG",378,22,1,"PAH",1,1,11,0)
references to the Resource Usage Monitor (RUM) code.  CM has deemed that
"PKG",378,22,1,"PAH",1,1,12,0)
these references are no longer necessary in order to monitor system
"PKG",378,22,1,"PAH",1,1,13,0)
resource consumption.  The system workload data that was gleaned from the
"PKG",378,22,1,"PAH",1,1,14,0)
existing code in these routines will be located within Kernel's menu
"PKG",378,22,1,"PAH",1,1,15,0)
manager routines.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","VALMXQ02")
0^1^B13227209
"RTN","VALMXQ02",1,0)
VALMXQ02 ; alb/mjk - XQOR1 for export with LM v1 ; 3/30/93
"RTN","VALMXQ02",2,0)
 ;;1;List Manager;**2**;Aug 13, 1993
"RTN","VALMXQ02",3,0)
 ;
"RTN","VALMXQ02",4,0)
 ;
"RTN","VALMXQ02",5,0)
XQOR1 ; SLC/KCM - Main Unwinding Loop ;3/23/92  08:34 ;
"RTN","VALMXQ02",6,0)
 ;;6.7;Sidewinder;**14**;Jan 08, 1993
"RTN","VALMXQ02",7,0)
LOOP ;From: EN^XQOR
"RTN","VALMXQ02",8,0)
 I "QOLD"[$P(^TMP("XQORS",$J,XQORS,"FLG"),"^"),'$D(^TMP("XQORS",$J,0,"CTXT","ADD")) D ENTRY^XQORO G:$D(XQORQUIT)!$D(XQORPOP)!$D(DIROUT)!$D(DTOUT) EXCT
"RTN","VALMXQ02",9,0)
 D EACH G:$D(XQORQUIT)!$D(XQORPOP)!$D(DIROUT)!$D(DTOUT) EXCT
"RTN","VALMXQ02",10,0)
 ; Start RT Log, IF PROTOCOL HAS AN ENTRY ACTION AND IF $D(XRTL)
"RTN","VALMXQ02",11,0)
 I $D(@(^TMP("XQORS",$J,XQORS,"REF")_"20)"))'[0 S Y=^(20) I $L(Y) D:$D(XRTL) T0^%ZOSV N X X Y S:$D(X)'[0 ^TMP("XQORS",$J,XQORS,"X")=X
"RTN","VALMXQ02",12,0)
 I $D(XRT0) S XRTN=$P($G(^ORD(101,+$G(XQORNOD),0)),U) I XRTN]"" D T1^%ZOSV ; Stop RT Log
"RTN","VALMXQ02",13,0)
 I $D(XQORQUIT)!$D(XQORPOP)!$D(DIROUT)!$D(DTOUT) G EXAT
"RTN","VALMXQ02",14,0)
 I $D(XQORFLG) S:$D(XQORFLG("PS")) $P(^TMP("XQORS",$J,XQORS,"FLG"),"^",2)=+XQORFLG("PS") S:$D(XQORFLG("SH")) $P(^TMP("XQORS",$J,XQORS,"FLG"),"^",5)=+XQORFLG("SH") K XQORFLG
"RTN","VALMXQ02",15,0)
REDO D @$S("QM"[$P(^TMP("XQORS",$J,XQORS,"FLG"),"^"):"MENU^XQOR3","DOX"[$P(^TMP("XQORS",$J,XQORS,"FLG"),"^"):"ACT^XQOR2","T"[$P(^TMP("XQORS",$J,XQORS,"FLG"),"^"):"EN^XQORD",1:"NUL^XQOR2")
"RTN","VALMXQ02",16,0)
 G:'^TMP("XQORS",$J,XQORS,"ITM") EXAT S ^TMP("XQORS",$J,XQORS,"TOT")=^TMP("XQORS",$J,XQORS,"ITM"),^TMP("XQORS",$J,XQORS,"ITM")=0
"RTN","VALMXQ02",17,0)
STAK S ^TMP("XQORS",$J,XQORS,"ITM")=^TMP("XQORS",$J,XQORS,"ITM")+1 G:^TMP("XQORS",$J,XQORS,"ITM")>^TMP("XQORS",$J,XQORS,"TOT") EXST
"RTN","VALMXQ02",18,0)
 I '^TMP("XQORS",$J,XQORS,"ITM",^TMP("XQORS",$J,XQORS,"ITM")) S $P(^TMP("XQORS",$J,XQORS,"FLG"),"^",4)=1 D DJMP^XQOR4 K XQORPOP,XQORQUIT G NXT
"RTN","VALMXQ02",19,0)
 I $D(^TMP("XQORS",$J,XQORS,"ITM",^TMP("XQORS",$J,XQORS,"ITM"),"MA")) S X=^TMP("XQORS",$J,XQORS,"ITM",^TMP("XQORS",$J,XQORS,"ITM"),"MA") D EN^XQOR G:$D(XQORQUIT)!$D(XQORPOP)!$D(DIROUT)!$D(DTOUT) NXT
"RTN","VALMXQ02",20,0)
 S X=^TMP("XQORS",$J,XQORS,"ITM",^TMP("XQORS",$J,XQORS,"ITM")) D EN^XQOR
"RTN","VALMXQ02",21,0)
NXT K XQORQUIT I '$D(XQORPOP),'$D(DIROUT),'$D(DTOUT) G STAK
"RTN","VALMXQ02",22,0)
EXST S ^TMP("XQORS",$J,0,"FILE")=";"_$P(^TMP("XQORS",$J,XQORS,"VPT"),";",2) S:$D(^TMP("XQORS",$J,XQORS,"INP")) $P(^TMP("XQORS",$J,XQORS,"INP"),"^",4)="" K XQORPOP
"RTN","VALMXQ02",23,0)
 S XQORNOD=^TMP("XQORS",$J,XQORS,"VPT"),XQORNOD(0)=^TMP("XQORS",$J,XQORS,"INP")
"RTN","VALMXQ02",24,0)
 I $P(^TMP("XQORS",$J,XQORS,"FLG"),"^",2)!$P(^TMP("XQORS",$J,XQORS,"FLG"),"^",4) S $P(^TMP("XQORS",$J,XQORS,"FLG"),"^",4)=""
"RTN","VALMXQ02",25,0)
 I  I '$D(DIROUT),'$D(DTOUT) D EACH I '$D(XQORQUIT),'$D(XQORPOP),'$D(DIROUT),'$D(DTOUT) K ^TMP("XQORS",$J,XQORS,"ITM") G REDO
"RTN","VALMXQ02",26,0)
EXAT I $P(^TMP("XQORS",$J,XQORS,"FLG"),"^",6) G EX^XQOR
"RTN","VALMXQ02",27,0)
 I $D(@(^TMP("XQORS",$J,XQORS,"REF")_"15)"))'[0 S X=^(15) I $L(X) X X
"RTN","VALMXQ02",28,0)
EXCT I $D(^TMP("XQORS",$J,XQORS,"CTX","AD")) D EXIT^XQORO
"RTN","VALMXQ02",29,0)
 G EX^XQOR
"RTN","VALMXQ02",30,0)
EACH I $P(^TMP("XQORS",$J,XQORS,"FLG"),"^",3),"AXLOD"[$P(^TMP("XQORS",$J,XQORS,"FLG"),"^") D SHDR^XQOR4
"RTN","VALMXQ02",31,0)
 D:$D(OROLD) RSTR^XQORO ;OE/RR Context
"RTN","VALMXQ02",32,0)
 I "QOLD"[$P(^TMP("XQORS",$J,XQORS,"FLG"),"^"),$D(^TMP("XQORS",$J,0,"CTXT","ADD")) D EVERY^XQORO
"RTN","VALMXQ02",33,0)
 Q
"RTN","VALMXQ15")
0^2^B13025860
"RTN","VALMXQ15",1,0)
VALMXQ15 ; alb/mjk - XQORO for export with LM v1 ; 3/30/93
"RTN","VALMXQ15",2,0)
 ;;1;List Manager;**2**;Aug 13, 1993
"RTN","VALMXQ15",3,0)
 ;
"RTN","VALMXQ15",4,0)
 ;
"RTN","VALMXQ15",5,0)
XQORO ; SLC/KCM - Order Entry Calls ;12/14/92  09:46
"RTN","VALMXQ15",6,0)
 ;;6.7;Sidewinder;**14,15**;Jan 08, 1993
"RTN","VALMXQ15",7,0)
ENTRY ;Setup initial 'add orders' context
"RTN","VALMXQ15",8,0)
 Q:$D(ORNOAD)  ;Flag for MAS protocols  Phase out by 11/90
"RTN","VALMXQ15",9,0)
 I $S($D(^DD(100,0,"VR")):^("VR")<1.89,1:1) D WARN Q
"RTN","VALMXQ15",10,0)
 I $D(^ORD(100.99,1,0)),$P(^(0),"^",16) S DIROUT="^^" W !!,*7,"OE/RR Software is currently being updated. Access temporarily denied.",! Q
"RTN","VALMXQ15",11,0)
 I $D(XRTL) D T0^%ZOSV ; Start RT Log
"RTN","VALMXQ15",12,0)
 S XQORQUIT=1 Q:'$D(ORACTION)  Q:ORACTION  S (ORGY,ORACTION,OREND)=0
"RTN","VALMXQ15",13,0)
 D ADD^OR1 I OREND!$D(ORPTLK) S OREND=0 Q
"RTN","VALMXQ15",14,0)
 S ^TMP("XQORS",$J,0,"CTXT","ADD")=XQORS,^TMP("XQORS",$J,XQORS,"CTX","AD")=""
"RTN","VALMXQ15",15,0)
 K XQORQUIT Q
"RTN","VALMXQ15",16,0)
EVERY ;Setup for every new node in 'add orders' context
"RTN","VALMXQ15",17,0)
 Q:$D(ORNOAD)  ;Flag for MAS protocols  Phase out by 11/90
"RTN","VALMXQ15",18,0)
 I $S($D(^DD(100,0,"VR")):^("VR")<1.89,1:1) D WARN Q
"RTN","VALMXQ15",19,0)
 I $D(^ORD(100.99,1,0)),$P(^(0),"^",16) S DIROUT="^^" W !!,*7,"OE/RR Software is currently being updated. Access temporarily denied.",! Q
"RTN","VALMXQ15",20,0)
 K ORIFN,ORCOST,ORIT,ORSTRT,ORSTOP,ORTO,ORPURG,ORTX,ORSTS,ORPK,ORLOG,ORPCL,OR,ORZ,ORNS
"RTN","VALMXQ15",21,0)
 D RSTR I $P(^TMP("XQORS",$J,XQORS,"FLG"),"^")="Q",($G(^ORD(101,+XQORNOD,26))'["^OR") S XQORM("H")="S ORUIEN=XQORNOD D OE^ORUHDR K ORUIEN" D:$L($T(^ORGKEY)) SET^ORGKEY
"RTN","VALMXQ15",22,0)
 ;I "OL"[$P(^TMP("XQORS",$J,XQORS,"FLG"),"^") S X="(for "_ORPNM_")" W !?(40-($L(X)\2)),X
"RTN","VALMXQ15",23,0)
 I $P(^TMP("XQORS",$J,XQORS,"FLG"),"^",3),"OL"[$P(^TMP("XQORS",$J,XQORS,"FLG"),"^"),$P(^ORD(100.99,1,0),"^",11) W !!,"<Orders for ",ORPNM,">"
"RTN","VALMXQ15",24,0)
 S:$D(@(^TMP("XQORS",$J,XQORS,"REF")_"0)")) ORNS=$P(^(0),"^",12),ORTX=$P(^(0),"^",2)
"RTN","VALMXQ15",25,0)
 I $S(ORNS:$S($D(^ORD(100.99,1,20,ORNS,0)):$S($P(^(0),"^",2):0,1:1),$D(^ORD(100.99,1,5,ORNS,0)):$S($P(^(0),"^",3):0,1:1),1:1),1:1) W *7,!,"This item is not setup to order from OE/RR",!,"(Package not setup)" S XQORQUIT=1 D READ^ORUTL Q
"RTN","VALMXQ15",26,0)
 I ORNS,'$D(ORUP(ORNS)) S ORUP(ORNS)="" I $D(^ORD(100.99,1,5,ORNS,3)),$L(^(3)) X ^(3)
"RTN","VALMXQ15",27,0)
 S OREND=0 K ORNS
"RTN","VALMXQ15",28,0)
 Q
"RTN","VALMXQ15",29,0)
EXIT ;When done adding, accept orders and transact them
"RTN","VALMXQ15",30,0)
 N XRTN
"RTN","VALMXQ15",31,0)
 I $S($D(^DD(100,0,"VR")):^("VR")<1.89,1:1) D WARN Q
"RTN","VALMXQ15",32,0)
 D RSTR,AFT^OR1,RSTR K ^TMP("XQORS",$J,0,"CTXT","ADD"),^TMP("XQORS",$J,XQORS,"CTX","AD") S (ORGY,ORACTION)=""
"RTN","VALMXQ15",33,0)
 D PT1^ORX2
"RTN","VALMXQ15",34,0)
 I $D(XRT0) S XRTN="ADD ORDERS" D T1^%ZOSV ; Stop RT Log
"RTN","VALMXQ15",35,0)
 Q
"RTN","VALMXQ15",36,0)
RSTR S ORVP=$P(OROLD,"^"),ORPV=$P(OROLD,"^",2),ORL=$P(OROLD,"^",3),ORTS=$P(OROLD,"^",4),ORL(0)=$P(OROLD,"^",5),ORL(1)=$P(OROLD,"^",6),ORDUZ=$P(OROLD,"^",7),ORNP=$P(OROLD,"^",8),ORL(2)=$P(OROLD,"^",9),OROLOC=$P(OROLD,"^",10)
"RTN","VALMXQ15",37,0)
 S OROLOC=$S($L($P(OROLD,"^",10)):$P(OROLD,"^",10),1:ORL),DFN=$P(OROLD,"^",11) S:$D(^TMP("XQORS",$J,0,"CTXT","ADD")) (ORGY,ORACTION)=0
"RTN","VALMXQ15",38,0)
 Q
"RTN","VALMXQ15",39,0)
WARN W !,*7,"OE/RR is not installed.  Options of this type should not be used.",*7,!
"RTN","VALMXQ15",40,0)
 Q
"VER")
8.0^21.0
**END**
**END**

$TXT Created by SCOTT,APRIL at DEVCRN.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 04/07/03 at 13:31
=============================================================================
Run Date: APR 08, 2003                     Designation: MPIF*1*27
Package : MPIF - MASTER PATIENT INDEX VISTA Priority: Mandatory
Version : 1        SEQ #26                      Status: Released
                  Compliance Date: MAY 09, 2003
=============================================================================

Associated patches: (v)MPIF*1*20   <<= must be installed BEFORE `MPIF*1*27'
                    (v)MPIF*1*21   <<= must be installed BEFORE `MPIF*1*27'
                    (v)MPIF*1*24   <<= must be installed BEFORE `MPIF*1*27'

Subject: NEW SEEDING, DOUBLE MSGS, LOCALS, MISSING CMOR TF

Category: 
  - Routine
  - Enhancement (Mandatory)

Description: 
============

   NOTE:  MPIF and RG patches should NOT be installed on Legacy systems to
   avoid issues with the legacy systems ending up as Coordinating Master 
   of Records (CMORs), Treating Facilities or Subscribers.
  
   Issue 1:  A Local Integration Control Number (ICN) can be assigned to a
   patient that already has a Local ICN.  The SETICN^MPIF001 function has
   been modified to prevent a Local ICN from overwriting an existing
   Local ICN.
  
   Issue 2:  If a patient has their name changed to begin with at least
   two Z's AND the social security number (SSN) is changed to begin with
   at least five zeros, two Health Level Seven (HL7) A29 Inactivate Patient
   from the Master Patient Index (MPI) messages are generated.  Only one
   message should be  generated.  Routine MPIFDEL has been modified to 
   prevent the second message from being generated.
  
   Issue 3:  When a patient is sent to the MPI for a new ICN to be 
   assigned, it is possible for demographic fields stored on the MPI to be
   modified at the site that sent the patient to the MPI.  To ensure that
   the MPI has the same demographic field values as the site, a HL7 A31
   Update Demographics message will be generated after the ICN is returned
   to the site.  Routines MPIFA24 and MPIFA31B have been modified to
   accomplish this.
  
   Issue 4:  During a Coordinating Master of Record (CMOR) change request,
   it is possible that the current CMOR hasn't gotten the treating facility
   list updated yet do to timing and the list doesn't contain the site
   requesting to be the CMOR.  A check will now be performed to ensure if
   the new CMOR isn't in the treating facility list that it is added before
   the list of sites the change of CMOR message is to be routed to.  The
   routine MPIFQUE4 has been modified to accomplish this.
  
   Issue 5:  Patch MPIF*1.0*24 introduced a data synchronization process
   that will populate new fields in the MPI FACILITY ASSOCIATION (#985.5)
   file on the MPI for each facility associated with a national ICN. The
   MPI/PD development team will do this "re-seeding" process.  Some 
   enhancements have been made to this "re-seeding" process to allow for
   messages to be generated during normal business hours as well as after
   hours and throddled to ensure that this processes doesn't impact daily
   operations at the site or on the MPI.  The sites will schedule a new
   option SEEDING BACKGROUND TASK [MPIF SEEDING TASK] to run once an hour.
   The development team will throddle how many messages will be generated
   per run of the job via a Remote Procedure call that will populate the
   COUNTER SEQUENCE (#8) field in the MPI ICN BUILD MANAGEMENT file 
   (#984.8). Initially this field will be set to zero.  Once the seeding
   has been completed at your site, you'll be informed and asked to
   unschedule the SEEDING BACKGROUND TASK job.  Routine MPIFSEED has been
   modified to accomplish this improvement.
  
   Issue 6:  The function GETICNH^MPIF002 returns the ICN history for a
   given patient.  The ICN checksum was not originally included in the
   data returned.  This function has been modified to return the
   ICN checksum as part of the ICN.
  
   Issue 7:  The function GETDFN^MPIF001 is passed an ICN.  If the ICN
   contains the V and the checksum for the ICN, an error message is 
   returned. The V and the checksum will be removed if it is passed as part
   of the ICN.
  
   Issue 8:  The function UPDATE^MPIFAPI was setting the wrong variable, 
   it was setting RETURN instead of MPIRETN.  This has been corrected.
  
   NOIS:
   =====
    None 
   
   TEST SITES:
   ==========
   Battle Creek
   Bay Pines
   Boston
   White River Junction
    
  
   NEW OPTION:
   ========== 
   SEEDING BACKGROUND TASK [MPIF SEEDING TASK]
  
   REMOTE PROCEDURE:
   ================
   MPIF SEEDING UPDATE
   MPIF SEEDING STATS
  
  
   Routine Summary:
   ================
   The following is a list of the routine(s) included in this patch.  The
   second line of each of these routine(s) will look like:
    
   <TAB>;;1.0; MASTER PATIENT INDEX VISTA ;**[Patch List]**;30 Apr 99
   CHECK^XTSUMBLD results:
    
   Routine       Before Patch       After Patch       Patch List
   --------      ------------       ------------      ----------
  
   MPIF001        10163316           11355374      1,3,9,16,18,21,27
   MPIF002         2211505            2387468            20,27
   MPIFA24         4838635            5570470           22,24,27
   MPIFA31B        2522935            2533977           22,24,27
   MPIFAPI        19426970           19451981      1,3,14,16,17,21,27
   MPIFDEL         9622923            9583403      1,3,9,19,17,21,27
   MPIFPT27        N/A                 832546             27
                                         ** DELETED AFTER INSTALL
   MPIFQUE4       15858614           16128090          1,3,11,24,27
   MPIFSEED        4199966            7813141           22,24,27
  
  
   INSTALLATION INSTRUCTIONS:
   ==========================
  
    This patch takes less than 3 minutes to install.  This patch should
    be loaded during non-peak hours to minimize disruption to the users.   
  
    1.  Users are allowed on the system during patch installation.
        
    2.  TaskMan does not need to be stopped or placed in a wait state. 
   
    3.  These routines are not usually mapped, so you will probably not
        have to disable mapping. 
  
    4.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu. [Note:
        TEXT PRINT/DISPLAY option in the PackMan menu will display the
        patch text only.
  
    5.  From the Kernel Installation and Distribution System Menu, select
        the Installation menu.  
  
    6.  From this menu, you may elect to use the following options:
        a.  Backup a Transport Global - this option will create a backup
            message of any routines exported with the patch.  It will NOT
            backup any other changes such as DDs or templates.
        b.  Compare Transport Global to Current System  - this option will
            allow you to view all changes that will be made when the patch
            is installed.  It compares all components of the patch
            (routines, DDs, templates, etc.).
        c.  Verify Checksums in Transport Global - this option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
        d.  Print Transport Global - this option will allow you to view the
            components of the KIDS build.
  
    7.  Use the Install Package(s) option and select the package 
        MPIF*1.0*27.
   
    8.  When prompted, "Want KIDS to Rebuild Menu Trees Upon Completion of
        Install? YES//", respond NO.
  
    9.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? '
        YES//', respond No.
   
   10.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
        Protocols? YES//', respond Yes and enter the following options:
  
         Inactivate Patient from MPI             [MPIF PAT INACT]
         Single Patient Initialization to MPI    [MPIF IND MPI LOAD]
         Display Only Query              [MPIF DISPLAY ONLY QUERY TO MPI] 
         Local/Missing ICN Resolution Background Job [MPIF LOC/MIS ICN RES]
         Coordinating Master of Record (CMOR) Request menu [MPIF CMOR MGR]
         AUTO CHANGE CMOR NIGHT JOB      [MPIF CMOR REQUEST AUTO JOB]
  
         10-10T Registration             [DGRPT 10-10T REGISTRATION]     
         Register a Patient              [DG REGISTER PATIENT]           
         Load/Edit Patient Data          [DG LOAD PATIENT DATA]          
         Electronic 10-10EZ Processing   [EAS EZ 1010EZ PROCESSING]
      
   11.  If you unmapped routines in step 3, remap them after installation
        has completed.
  
   12.  Schedule, via TaskMan, the new option SEEDING BACKGROUND TASK 
        [MPIF SEEDING TASK] to run once every hour.  The SPECIAL QUEUEING  
        parameter should be set to STARTUP.

Routine Information:
====================

Routine Name:
  - MPIF001


Routine Checksum:

Routine Name:
  - MPIFA24


Routine Checksum:

Routine Name:
  - MPIFA31B


Routine Checksum:

Routine Name:
  - MPIFDEL


Routine Checksum:

Routine Name:
  - MPIFPT27


Routine Checksum:

Routine Name:
  - MPIFQUE4


Routine Checksum:

Routine Name:
  - MPIFSEED


Routine Checksum:

Routine Name:
  - MPIF002


Routine Checksum:

Routine Name:
  - MPIFAPI


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : CHESNEY,CHRISTINE M           Date Entered : FEB 05, 2003
Completed By: PEREZ,CAROL                   Date Completed: APR 08, 2003
Released By : BURTS,WANDA                   Date Released : APR 08, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

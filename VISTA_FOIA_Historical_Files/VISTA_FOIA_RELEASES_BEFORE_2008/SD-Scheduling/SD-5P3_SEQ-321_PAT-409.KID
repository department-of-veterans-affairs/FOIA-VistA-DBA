Released SD*5.3*409 SEQ #321
Extracted from mail message
**KIDS**:SD*5.3*409^

**INSTALL NAME**
SD*5.3*409
"BLD",5911,0)
SD*5.3*409^SCHEDULING^0^3041229^y
"BLD",5911,1,0)
^^3^3^3041213^
"BLD",5911,1,1,0)
ACRP Report error. CRI1+17^SCRPW45. The report ODPS Outpatient 
"BLD",5911,1,2,0)
Diagnosis/Procedure Code Search generates an error when the "'" single 
"BLD",5911,1,3,0)
quote is entered at the IF: prompt.
"BLD",5911,4,0)
^9.64PA^^
"BLD",5911,"ABPKG")
n
"BLD",5911,"KRN",0)
^9.67PA^8989.52^19
"BLD",5911,"KRN",.4,0)
.4
"BLD",5911,"KRN",.401,0)
.401
"BLD",5911,"KRN",.402,0)
.402
"BLD",5911,"KRN",.403,0)
.403
"BLD",5911,"KRN",.5,0)
.5
"BLD",5911,"KRN",.84,0)
.84
"BLD",5911,"KRN",3.6,0)
3.6
"BLD",5911,"KRN",3.8,0)
3.8
"BLD",5911,"KRN",9.2,0)
9.2
"BLD",5911,"KRN",9.8,0)
9.8
"BLD",5911,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5911,"KRN",9.8,"NM",1,0)
SCRPW45^^0^B55025168
"BLD",5911,"KRN",9.8,"NM","B","SCRPW45",1)

"BLD",5911,"KRN",19,0)
19
"BLD",5911,"KRN",19.1,0)
19.1
"BLD",5911,"KRN",101,0)
101
"BLD",5911,"KRN",409.61,0)
409.61
"BLD",5911,"KRN",771,0)
771
"BLD",5911,"KRN",870,0)
870
"BLD",5911,"KRN",8989.51,0)
8989.51
"BLD",5911,"KRN",8989.52,0)
8989.52
"BLD",5911,"KRN",8994,0)
8994
"BLD",5911,"KRN","B",.4,.4)

"BLD",5911,"KRN","B",.401,.401)

"BLD",5911,"KRN","B",.402,.402)

"BLD",5911,"KRN","B",.403,.403)

"BLD",5911,"KRN","B",.5,.5)

"BLD",5911,"KRN","B",.84,.84)

"BLD",5911,"KRN","B",3.6,3.6)

"BLD",5911,"KRN","B",3.8,3.8)

"BLD",5911,"KRN","B",9.2,9.2)

"BLD",5911,"KRN","B",9.8,9.8)

"BLD",5911,"KRN","B",19,19)

"BLD",5911,"KRN","B",19.1,19.1)

"BLD",5911,"KRN","B",101,101)

"BLD",5911,"KRN","B",409.61,409.61)

"BLD",5911,"KRN","B",771,771)

"BLD",5911,"KRN","B",870,870)

"BLD",5911,"KRN","B",8989.51,8989.51)

"BLD",5911,"KRN","B",8989.52,8989.52)

"BLD",5911,"KRN","B",8994,8994)

"BLD",5911,"QUES",0)
^9.62^^
"BLD",5911,"REQB",0)
^9.611^2^1
"BLD",5911,"REQB",2,0)
SD*5.3*351^2
"BLD",5911,"REQB","B","SD*5.3*351",2)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
409^3041229
"PKG",16,22,1,"PAH",1,1,0)
^^3^3^3041229
"PKG",16,22,1,"PAH",1,1,1,0)
ACRP Report error. CRI1+17^SCRPW45. The report ODPS Outpatient 
"PKG",16,22,1,"PAH",1,1,2,0)
Diagnosis/Procedure Code Search generates an error when the "'" single 
"PKG",16,22,1,"PAH",1,1,3,0)
quote is entered at the IF: prompt.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","SCRPW45")
0^1^B55025168
"RTN","SCRPW45",1,0)
SCRPW45 ;RENO/KEITH - Outpatient Diagnosis/Procedure Search ; 15 Jul 98  02:38PM
"RTN","SCRPW45",2,0)
 ;;5.3;Scheduling;**144,351,409**;AUG 13, 1993
"RTN","SCRPW45",3,0)
 N SD,SDDIV,SDPAR,SDCRI,DIR,%DT
"RTN","SCRPW45",4,0)
 D TITL^SCRPW50("Outpatient Diagnosis/Procedure Search ")
"RTN","SCRPW45",5,0)
 G:'$$DIVA^SCRPW17(.SDDIV) EXIT
"RTN","SCRPW45",6,0)
 D SUBT^SCRPW50("**** Date Range Selection ****")
"RTN","SCRPW45",7,0)
 W ! S %DT="AEPX",%DT(0)=2961001,%DT("A")="Beginning date: " D ^%DT G:Y<1 EXIT S SD("BDT")=Y X ^DD("DD") S SD("PBDT")=Y
"RTN","SCRPW45",8,0)
EDT S %DT("A")="   Ending date: " W ! D ^%DT G:Y<1 EXIT
"RTN","SCRPW45",9,0)
 I Y<SD("BDT") W !!,$C(7),"End date cannot be before begin date!",! G EDT
"RTN","SCRPW45",10,0)
 S SD("EDT")=Y_.999999 X ^DD("DD") S SD("PEDT")=Y,(SDOUT,SDNUL)=0 F SDI=1:1:26 D PAR Q:SDOUT!SDNUL
"RTN","SCRPW45",11,0)
 G:SDOUT!'$D(SDPAR) EXIT S SDNUL=0 F  D CRI Q:SDOUT!SDNUL
"RTN","SCRPW45",12,0)
 G:SDOUT!'$D(SDCRI) EXIT
"RTN","SCRPW45",13,0)
 D SUBT^SCRPW50("**** Report Detail Format Selection ****")
"RTN","SCRPW45",14,0)
 K DIR S DIR(0)="S^P:PATIENT;V:VISIT;E:ENCOUNTER",DIR("A")="Specify the level of detail desired",DIR("B")="PATIENT",DIR("?")="This determines what type of detail list will be printed."
"RTN","SCRPW45",15,0)
 W ! D ^DIR G:$D(DUOUT)!$D(DTOUT) EXIT S SDFMT=Y_U_Y(0),SDD=$S(Y="E":1,1:2)
"RTN","SCRPW45",16,0)
 K DIR S DIR(0)="Y",DIR("A")="Include additional print fields in the report",DIR("B")="NO" W ! D ^DIR G:$D(DUOUT)!$D(DTOUT) EXIT
"RTN","SCRPW45",17,0)
 I Y D BLD^SCRPW21 S (SDOUT,SDNUL)=0,T="~" F  Q:SDOUT!SDNUL  D APF
"RTN","SCRPW45",18,0)
 G:SDOUT EXIT D PDIS^SCRPW46 G:SDOUT EXIT
"RTN","SCRPW45",19,0)
QUE N ZTSAVE F SDI="SDFMT","SDAPF(","SD(","SDDIV(","SDDIV","SDPAR(","SDCRI(" S ZTSAVE(SDI)=""
"RTN","SCRPW45",20,0)
 W ! D EN^XUTMDEVQ("START^SCRPW46","Outpatient Diagnosis/Procedure Search",.ZTSAVE)
"RTN","SCRPW45",21,0)
EXIT G EXIT^SCRPW47
"RTN","SCRPW45",22,0)
 ;
"RTN","SCRPW45",23,0)
PAR ;Select report search criteria
"RTN","SCRPW45",24,0)
 S SDVAR=$C(SDI+64)
"RTN","SCRPW45",25,0)
 D SUBT^SCRPW50("**** Report Search Criteria Selection (Element '"_SDVAR_"') ****")
"RTN","SCRPW45",26,0)
 K DIR S DIR(0)="SO^DL:DIAGNOSIS LIST;DR:DIAGNOSIS RANGE;PL:PROCEDURE LIST;PR:PROCEDURE RANGE",DIR("A")="Specify criteria type for search element '"_SDVAR_"'"
"RTN","SCRPW45",27,0)
 S DIR("?")="Select the type of data to search for with element '"_SDVAR_"'." W ! D ^DIR I $D(DTOUT)!$D(DUOUT) S SDOUT=1 Q
"RTN","SCRPW45",28,0)
 I X="" S SDNUL=1 Q
"RTN","SCRPW45",29,0)
 S SDSEL=Y,SDSEL(0)=Y(0) N DIC S DIC(0)="AEMQZ",DIC=$S(SDSEL["D":"^ICD9(",1:"^ICPT(") D:SDSEL["L" LIST D:SDSEL["R" RANGE S SDNUL=0
"RTN","SCRPW45",30,0)
 G:'$D(SDPAR(SDVAR)) PAR S SDPAR(SDVAR)=SDSEL_U_SDSEL(0),SD("LIST",$E(SDSEL),$E(SDSEL,2))=""
"RTN","SCRPW45",31,0)
 Q
"RTN","SCRPW45",32,0)
 ;
"RTN","SCRPW45",33,0)
LIST W ! F  D  Q:SDNUL!SDOUT
"RTN","SCRPW45",34,0)
 .D ^DIC I $D(DUOUT)!$D(DTOUT) S SDOUT=1 Q
"RTN","SCRPW45",35,0)
 .I X="" S SDNUL=1 Q
"RTN","SCRPW45",36,0)
 .I Y>0 D
"RTN","SCRPW45",37,0)
 ..S Y(0)=$S(SDSEL["D":$P($$ICDDX^ICDCODE(+Y),"^",2,99),1:$P($$CPT^ICPTCOD(+Y,,1),"^",2,99))
"RTN","SCRPW45",38,0)
 ..S SDPAR(SDVAR,$P(Y,U))=$P(Y(0),U)_" "_$P(Y(0),U,$S(SDSEL["D":3,1:2))
"RTN","SCRPW45",39,0)
 Q
"RTN","SCRPW45",40,0)
 ;
"RTN","SCRPW45",41,0)
RANGE W ! S DIC("A")="From "_$S(SDSEL["D":"ICD DIAGNOSIS: ",1:"CPT CODE: ")
"RTN","SCRPW45",42,0)
 D ^DIC I $D(DUOUT)!$D(DTOUT) S SDOUT=1 Q
"RTN","SCRPW45",43,0)
 I X="" S SDNUL=1 Q
"RTN","SCRPW45",44,0)
 Q:Y<1
"RTN","SCRPW45",45,0)
 S Y(0)=$S(SDSEL["D":$P($$ICDDX^ICDCODE(+Y),"^",2,99),1:$P($$CPT^ICPTCOD(+Y,,1),"^",2,99))
"RTN","SCRPW45",46,0)
 S S1=$P(Y(0),U)_" "_$P(Y(0),U,$S(SDSEL["D":3,1:2)),SDPAR(SDVAR,S1)=$P(Y,U),DIC("A")="To "_$P(DIC("A")," ",2,99)
"RTN","SCRPW45",47,0)
R2 W ! D ^DIC I $D(DUOUT)!$D(DTOUT) S SDOUT=1 Q
"RTN","SCRPW45",48,0)
 I X=""!(Y<1) S SDNUL=1 K SDPAR(SDVAR) Q
"RTN","SCRPW45",49,0)
 S Y(0)=$S(SDSEL["D":$P($$ICDDX^ICDCODE(+Y),"^",2,99),1:$P($$CPT^ICPTCOD(+Y,,1),"^",2,99))
"RTN","SCRPW45",50,0)
 S S2=$P(Y(0),U)_" "_$P(Y(0),U,$S(SDSEL["D":3,1:2))
"RTN","SCRPW45",51,0)
 I S1]S2 W !!,$C(7),"Ending value must collate after beginning value!",! G R2
"RTN","SCRPW45",52,0)
 S SDPAR(SDVAR,S2)=$P(Y,U) Q
"RTN","SCRPW45",53,0)
 ;
"RTN","SCRPW45",54,0)
CRI ;Prompt for element combination criteria
"RTN","SCRPW45",55,0)
 D SUBT^SCRPW50("**** Search Element Combination Criteria ****")
"RTN","SCRPW45",56,0)
 W !!,"  Specify letter combinations that represent how the search elements selected",!,"  above will be applied in evaluating patient activity (eg. ""ABC"" or ""ABC'D""):"
"RTN","SCRPW45",57,0)
 F SDII=1:1 D CRI1 Q:SDOUT!SDNUL
"RTN","SCRPW45",58,0)
 Q
"RTN","SCRPW45",59,0)
 ;
"RTN","SCRPW45",60,0)
CRI1 K DIR S DIR(0)="F"_$S(SDII=1:"",1:"O")_"^1:40",DIR("A")=$S(SDII=1:"IF",1:"OR")
"RTN","SCRPW45",61,0)
 S DIR("?",1)="Enter a string that represents the method which represents how the selected",DIR("?",2)="search criteria items will be applied during evaluation (eg. ""AB"" indicates"
"RTN","SCRPW45",62,0)
 S DIR("?",3)="that element 'A' and 'B' must be true for data to be returned.  The apostrophy",DIR("?",4)="""'"" may be used to negate (or exclude) a sort item.  For example, ""A'B"""
"RTN","SCRPW45",63,0)
 S DIR("?")="will return data where element 'A' is true and element 'B' is not true."
"RTN","SCRPW45",64,0)
 W ! D ^DIR I $D(DTOUT)!$D(DUOUT) S SDOUT=1 Q
"RTN","SCRPW45",65,0)
 I X="" S SDNUL=1 Q
"RTN","SCRPW45",66,0)
 I $E(X)="&" W $C(7),"  ?? Invalid!" G CRI1
"RTN","SCRPW45",67,0)
 F  S SDC=$E(Y,$L(Y)) Q:SDC'="'"  S Y=$E(Y,1,($L(Y)-1))
"RTN","SCRPW45",68,0)
 I '$L(Y)!$TR($TR(Y,"'",""),"&","")="" W $C(7),"No criteria selected!" G CRI1
"RTN","SCRPW45",69,0)
 I Y["'&" W $C(7),"  ??  The value ""'&"" is incorrect syntax!" G CRI1
"RTN","SCRPW45",70,0)
 I Y["''" W $C(7),"  ??  Character ""'"" appears redundantly!" G CRI1
"RTN","SCRPW45",71,0)
 I Y["&&" W $C(7),"  ??  Character ""&"" appears redundantly!" G CRI1
"RTN","SCRPW45",72,0)
 I Y="" W $C(7),"No criteria selected!" G CRI1
"RTN","SCRPW45",73,0)
 S SDBAD=0,SDSTR="",SDRESP=Y,SDR=$TR(Y,"&","") F SDIII=1:1:$L(SDR) S SDC=$E(SDR,SDIII) D  Q:SDBAD
"RTN","SCRPW45",74,0)
 .I "&'"'[SDC,$L(SDR,SDC)>2 W $C(7),"  ??  Element '"_SDC_"' appears redundantly!" S SDBAD=1 Q
"RTN","SCRPW45",75,0)
 .I SDC'="'",'$D(SDPAR(SDC)) W $C(7),"  ??  Character '"_SDC_"' is not recognized!" S SDBAD=1 Q
"RTN","SCRPW45",76,0)
 .S SDSTR=SDSTR_SDC_$S(SDC'="'":"&",1:"")
"RTN","SCRPW45",77,0)
 .Q
"RTN","SCRPW45",78,0)
 G:SDBAD CRI1
"RTN","SCRPW45",79,0)
 S SDSTR=$E(SDSTR,1,($L(SDSTR)-1)) D STR(SDSTR,.SDTX) M SDCRI(SDSTR)=SDTX W "  ",$S(SDII=1:"If ",1:"Or "),SDTX(1) S SDIII=1 F  S SDIII=$O(SDTX(SDIII)) Q:'SDIII  W !?4,SDTX(SDIII)
"RTN","SCRPW45",80,0)
 Q
"RTN","SCRPW45",81,0)
 ;
"RTN","SCRPW45",82,0)
STR(SDSTR,SDTX) ;Convert combine logic into output text string
"RTN","SCRPW45",83,0)
 ;Required input: SDSTR=combine logic string
"RTN","SCRPW45",84,0)
 ;Required input: SDTX=array (pass by reference) to return text
"RTN","SCRPW45",85,0)
 N SDI,SDEXE,SDX
"RTN","SCRPW45",86,0)
 F SDI=1:1:$L(SDSTR) S SDX(SDI)=$$STR1($E(SDSTR,SDI))
"RTN","SCRPW45",87,0)
 S SDOXE(2)="S SDLTH=75",SDLTH=71-$L(SDSTR) D WRAP(.SDX,.SDTX,,.SDOXE,SDLTH,"")
"RTN","SCRPW45",88,0)
 Q
"RTN","SCRPW45",89,0)
 ;
"RTN","SCRPW45",90,0)
STR1(SDX) ;Convert to text (cont.)
"RTN","SCRPW45",91,0)
 ;Required input: SDX=character to transform
"RTN","SCRPW45",92,0)
 Q:SDX="&" "and "  Q:SDX="'" "not "
"RTN","SCRPW45",93,0)
 Q $P(SDPAR(SDX),U,2)_" '"_SDX_"' "
"RTN","SCRPW45",94,0)
 ;
"RTN","SCRPW45",95,0)
APF ;Select additional print fields
"RTN","SCRPW45",96,0)
 D SUBT^SCRPW50("Select additional print fields for patient detail:  (optional)")
"RTN","SCRPW45",97,0)
 K DIR S DIR("A")="Specify additional print field",DIR("?")="These fields will be included in the patient detail list output."
"RTN","SCRPW45",98,0)
 S S1=$$DIR^SCRPW23(.DIR,1,"","","O",SDD) Q:SDOUT!SDNUL
"RTN","SCRPW45",99,0)
 K DIR S DIR("A")="Select "_$P(S1,U,2)_" category",S2=$$DIR^SCRPW23(.DIR,2,"",$P(S1,U),"O",SDD,1) Q:SDOUT  I SDNUL S SDNUL=0 Q
"RTN","SCRPW45",100,0)
 S SDSEL=$P(S1,U)_$P(S2,U) G:$D(SDAPF("PFX",SDSEL)) PFD
"RTN","SCRPW45",101,0)
 S SDS1=$P(^TMP("SCRPW",$J,"ACT",SDSEL),T,11),SDS2=$O(SDAPF(SDS1,""),-1)+1,SDAPF(SDS1,SDS2)=SDSEL_U_$P(S1,U,2)_U_$P(S2,U,2),SDAPF("PFX",SDSEL,SDS1,SDS2)=""
"RTN","SCRPW45",102,0)
 Q
"RTN","SCRPW45",103,0)
 ;
"RTN","SCRPW45",104,0)
PFD N DIR S DIR(0)="Y",DIR("A")="This item is already selected as a print field, do you want to delete it",DIR("B")="NO" D ^DIR Q:$D(DTOUT)!$D(DUOUT)
"RTN","SCRPW45",105,0)
 I Y S S1=$O(SDAPF("PFX",SDSEL,"")),S2=$O(SDAPF("PFX",SDSEL,S1,"")) K SDAPF("SDX",SDSEL),SDAPF("PF",S1,S2) W !,"deleted..."
"RTN","SCRPW45",106,0)
 Q
"RTN","SCRPW45",107,0)
 ;
"RTN","SCRPW45",108,0)
WRAP(SDITX,SDOTX,SDIXE,SDOXE,SDLTH,SDUJC) ;Text wrapper
"RTN","SCRPW45",109,0)
 ;Required input: SDITX=array (passed by reference) of text to be reformatted
"RTN","SCRPW45",110,0)
 ;Required input: SDOTX=array (passed by reference) to return reformatted text
"RTN","SCRPW45",111,0)
 ;Optional input: SDIXE=array (passed by reference) where SDIXE(n) is code to be executed prior to processing node SDITX(n)
"RTN","SCRPW45",112,0)
 ;Optional input: SDOXE=array (passed by reference) where SDOXE(n) is code to be executed prior to creating node SDOTX(n)
"RTN","SCRPW45",113,0)
 ;Optional input: SDLTH=line length, if not defined, SDLTH=IOM
"RTN","SCRPW45",114,0)
 ;Optional input: SDUJC=value (0-5 characters) to be inserted when values are joined, if undefined AQKUJC=" "
"RTN","SCRPW45",115,0)
 ;Output: Reformats values found in SDITX() array into wraparound text in SDOTX() of SDLTH length (10-255) characters
"RTN","SCRPW45",116,0)
 ;
"RTN","SCRPW45",117,0)
 N SDUI,SDUII,X,X1,X2,X3,X4,Y,Y1,Y2,SDLAST,SDUIII,SDUIV,SDTXB
"RTN","SCRPW45",118,0)
 Q:$D(SDITX)'>1  S:'$D(SDUJC) SDUJC=" " S:$G(SDLTH)<10!($G(SDLTH)>255) SDLTH=IOM K SDOTX S SDUJC=$E(SDUJC,1,5),SDUI="",SDUII=1,SDOTX(1)="",SDLAST=$O(SDITX(""),-1) D POX
"RTN","SCRPW45",119,0)
 F  S SDUI=$O(SDITX(SDUI)) Q:SDUI']""  I $L(SDITX(SDUI)) D PIX S X=SDITX(SDUI)_$S(SDUI'=SDLAST:SDUJC,1:"") D MOVE
"RTN","SCRPW45",120,0)
 Q
"RTN","SCRPW45",121,0)
 ;
"RTN","SCRPW45",122,0)
PIX I $D(SDIXE(SDUI)) X SDIXE(SDUI)
"RTN","SCRPW45",123,0)
 Q
"RTN","SCRPW45",124,0)
 ;
"RTN","SCRPW45",125,0)
POX I $D(SDOXE(SDUII)) X SDOXE(SDUII)
"RTN","SCRPW45",126,0)
 Q
"RTN","SCRPW45",127,0)
MOVE S X1=$L(X) Q:'X1  S X2=$L(X," "),Y=SDOTX(SDUII),Y1=$L(Y),Y2=SDLTH-Y1 I 'Y2 D INCR G MOVE
"RTN","SCRPW45",128,0)
 I X1'>Y2 S SDOTX(SDUII)=SDOTX(SDUII)_X Q
"RTN","SCRPW45",129,0)
MOVE1 I X'[" ",X1'>SDLTH D:Y1 INCR S SDOTX(SDUII)=X Q
"RTN","SCRPW45",130,0)
MOVE2 I X'[" ",X1>SDLTH D:Y1 INCR S SDOTX(SDUII)=$E(X,1,SDLTH),X=$E(X,(SDLTH+1),999) G MOVE
"RTN","SCRPW45",131,0)
 S X3=$L($P(X," ")) I X3=Y2 S SDOTX(SDUII)=SDOTX(SDUII)_$P(X," "),X=$P(X," ",2,999) G MOVE
"RTN","SCRPW45",132,0)
 I X3>Y2,X3'>SDLTH D INCR G MOVE
"RTN","SCRPW45",133,0)
 I X3>SDLTH D:Y1 INCR S SDOTX(SDUII)=$E(X,1,SDLTH),X=$E(X,(SDLTH+1),999) G MOVE
"RTN","SCRPW45",134,0)
MOVE3 K SDTXB F SDUIII=1:1:X2 S X4=999-$L($P(X," ",1,SDUIII)),SDTXB(X4,SDUIII)=""
"RTN","SCRPW45",135,0)
 S SDUIII=$O(SDTXB(998-Y2)),SDUIV=$O(SDTXB(SDUIII,0)),SDOTX(SDUII)=SDOTX(SDUII)_$E(X,1,($L($P(X," ",1,SDUIV))+1)),X=$P(X," ",(SDUIV+1),999) G MOVE
"RTN","SCRPW45",136,0)
 Q
"RTN","SCRPW45",137,0)
 ;
"RTN","SCRPW45",138,0)
INCR S SDUII=SDUII+1,SDOTX(SDUII)="" D POX Q
"VER")
8.0^22
**END**
**END**

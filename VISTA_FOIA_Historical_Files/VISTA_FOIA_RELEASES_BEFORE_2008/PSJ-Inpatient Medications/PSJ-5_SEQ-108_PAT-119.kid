Released PSJ*5*119 SEQ #108
Extracted from mail message
**KIDS**:PSJ*5.0*119^

**INSTALL NAME**
PSJ*5.0*119
"BLD",4347,0)
PSJ*5.0*119^INPATIENT MEDICATIONS^0^3031120^y
"BLD",4347,1,0)
^^5^5^3031120^^^
"BLD",4347,1,1,0)
A site reported a problem that occurs when the pick list is sent to the 
"BLD",4347,1,2,0)
ATC. It does not round up and the ATC will not accept fractional units so
"BLD",4347,1,3,0)
the drug does not go to the ATC.  This patch corrects this situation by
"BLD",4347,1,4,0)
providing an optional system parameter to allow rounding of fractional
"BLD",4347,1,5,0)
doses before sending to the ATC.  NOIS ALT-0403-20970
"BLD",4347,4,0)
^9.64PA^^0
"BLD",4347,"ABPKG")
n
"BLD",4347,"KRN",0)
^9.67PA^8989.52^19
"BLD",4347,"KRN",.4,0)
.4
"BLD",4347,"KRN",.401,0)
.401
"BLD",4347,"KRN",.402,0)
.402
"BLD",4347,"KRN",.403,0)
.403
"BLD",4347,"KRN",.5,0)
.5
"BLD",4347,"KRN",.84,0)
.84
"BLD",4347,"KRN",3.6,0)
3.6
"BLD",4347,"KRN",3.8,0)
3.8
"BLD",4347,"KRN",9.2,0)
9.2
"BLD",4347,"KRN",9.8,0)
9.8
"BLD",4347,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",4347,"KRN",9.8,"NM",1,0)
PSGFILED^^0^B25701085
"BLD",4347,"KRN",9.8,"NM",2,0)
PSGTAP0^^0^B12574819
"BLD",4347,"KRN",9.8,"NM",3,0)
PSGTAP1^^0^B17389584
"BLD",4347,"KRN",9.8,"NM",4,0)
PSGPLR^^0^B30038411
"BLD",4347,"KRN",9.8,"NM","B","PSGFILED",1)

"BLD",4347,"KRN",9.8,"NM","B","PSGPLR",4)

"BLD",4347,"KRN",9.8,"NM","B","PSGTAP0",2)

"BLD",4347,"KRN",9.8,"NM","B","PSGTAP1",3)

"BLD",4347,"KRN",19,0)
19
"BLD",4347,"KRN",19.1,0)
19.1
"BLD",4347,"KRN",101,0)
101
"BLD",4347,"KRN",409.61,0)
409.61
"BLD",4347,"KRN",771,0)
771
"BLD",4347,"KRN",870,0)
870
"BLD",4347,"KRN",8989.51,0)
8989.51
"BLD",4347,"KRN",8989.51,"NM",0)
^9.68A^^
"BLD",4347,"KRN",8989.52,0)
8989.52
"BLD",4347,"KRN",8989.52,"NM",0)
^9.68A^^
"BLD",4347,"KRN",8994,0)
8994
"BLD",4347,"KRN","B",.4,.4)

"BLD",4347,"KRN","B",.401,.401)

"BLD",4347,"KRN","B",.402,.402)

"BLD",4347,"KRN","B",.403,.403)

"BLD",4347,"KRN","B",.5,.5)

"BLD",4347,"KRN","B",.84,.84)

"BLD",4347,"KRN","B",3.6,3.6)

"BLD",4347,"KRN","B",3.8,3.8)

"BLD",4347,"KRN","B",9.2,9.2)

"BLD",4347,"KRN","B",9.8,9.8)

"BLD",4347,"KRN","B",19,19)

"BLD",4347,"KRN","B",19.1,19.1)

"BLD",4347,"KRN","B",101,101)

"BLD",4347,"KRN","B",409.61,409.61)

"BLD",4347,"KRN","B",771,771)

"BLD",4347,"KRN","B",870,870)

"BLD",4347,"KRN","B",8989.51,8989.51)

"BLD",4347,"KRN","B",8989.52,8989.52)

"BLD",4347,"KRN","B",8994,8994)

"BLD",4347,"QUES",0)
^9.62^^
"BLD",4347,"REQB",0)
^9.611^2^2
"BLD",4347,"REQB",1,0)
PSJ*5.0*63^2
"BLD",4347,"REQB",2,0)
PSS*1.0*74^2
"BLD",4347,"REQB","B","PSJ*5.0*63",1)

"BLD",4347,"REQB","B","PSS*1.0*74",2)

"MBREQ")
0
"PKG",197,-1)
1^1
"PKG",197,0)
INPATIENT MEDICATIONS^PSJ^UNIT DOSE AND IVS
"PKG",197,20,0)
^9.402P^^
"PKG",197,22,0)
^9.49I^1^1
"PKG",197,22,1,0)
5.0^2971215^2980917^11712
"PKG",197,22,1,"PAH",1,0)
119^3031120
"PKG",197,22,1,"PAH",1,1,0)
^^5^5^3031120
"PKG",197,22,1,"PAH",1,1,1,0)
A site reported a problem that occurs when the pick list is sent to the 
"PKG",197,22,1,"PAH",1,1,2,0)
ATC. It does not round up and the ATC will not accept fractional units so
"PKG",197,22,1,"PAH",1,1,3,0)
the drug does not go to the ATC.  This patch corrects this situation by
"PKG",197,22,1,"PAH",1,1,4,0)
providing an optional system parameter to allow rounding of fractional
"PKG",197,22,1,"PAH",1,1,5,0)
doses before sending to the ATC.  NOIS ALT-0403-20970
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","PSGFILED")
0^1^B25701085
"RTN","PSGFILED",1,0)
PSGFILED ;BIR/CML3-VARIOUS FILES' UPKEEP ;16 Mar 99 / 10:22 AM
"RTN","PSGFILED",2,0)
 ;;5.0; INPATIENT MEDICATIONS ;**20,50,63,119**;16 DEC 97
"RTN","PSGFILED",3,0)
 ;
"RTN","PSGFILED",4,0)
 ; Reference to ^PS(50.606 supported by DBIA# 2174.
"RTN","PSGFILED",5,0)
 ; Reference to ^PSDRUG supported by DBIA# 2192.
"RTN","PSGFILED",6,0)
 ; Reference to ^PS(59.7 is supported by DBIA# 2181.
"RTN","PSGFILED",7,0)
 ; Reference to ^PS(51 is supported by DBIA# 2176.
"RTN","PSGFILED",8,0)
 ; Reference to ^PS(51.2 is supported by DBIA# 2178.     
"RTN","PSGFILED",9,0)
 ;
"RTN","PSGFILED",10,0)
DONE D ENKV^PSGSETU K D0,D1,D2,PSGRBS Q
"RTN","PSGFILED",11,0)
 ;
"RTN","PSGFILED",12,0)
GED ; generic edit
"RTN","PSGFILED",13,0)
 S DA=+Y,DR=".01;1" W ! D ^DIE Q
"RTN","PSGFILED",14,0)
 ;
"RTN","PSGFILED",15,0)
ENAT ; team file
"RTN","PSGFILED",16,0)
 F  S DIC="^PS(57.7,",DIC(0)="QEAMIL",DLAYGO=57.7,DIC("A")="Select WARD: " W ! D ^DIC K DIC,DLAYGO Q:Y'>0  S DA=+Y,DIE="^PS(57.7,",DR="[PSJUMATE]" D ^DIE
"RTN","PSGFILED",17,0)
 G DONE
"RTN","PSGFILED",18,0)
 ;
"RTN","PSGFILED",19,0)
ENAS ; schedules file - no longer used
"RTN","PSGFILED",20,0)
 ;
"RTN","PSGFILED",21,0)
ENMR ; med route file
"RTN","PSGFILED",22,0)
 NEW MRNO,MR K DIE,DIC,DR,Y
"RTN","PSGFILED",23,0)
 F  S DIC="^PS(51.2,",DIC(0)="QEAMIL",DLAYGO=51.2 W ! D ^DIC K DIC,DLAYGO Q:+Y'>0  S MRNO=+Y,MR=$P(Y,U,2),DA=+Y,DIE="^PS(51.2,",DR=".01;1;3;4" D ^DIE D DF
"RTN","PSGFILED",24,0)
 G DONE
"RTN","PSGFILED",25,0)
 ;
"RTN","PSGFILED",26,0)
ENWG ; ward group file
"RTN","PSGFILED",27,0)
 F  S DIC="^PS(57.5,",DIC(0)="QEAMIL",DLAYGO=57.5 W ! D ^DIC K DA,DIC,DR Q:+Y'>0  S DA=+Y,DIE="^PS(57.5,",DR="[PSJU WG]" D ^DIE
"RTN","PSGFILED",28,0)
 G DONE
"RTN","PSGFILED",29,0)
 ;
"RTN","PSGFILED",30,0)
ENMI ; medication instruction file
"RTN","PSGFILED",31,0)
 F  S DIC="^PS(51,",DIC(0)="QEAMIL",DLAYGO=51 W ! D ^DIC K DIC Q:+Y'>0  S DIE="^PS(51,",DA=+Y,DR=".01;1;30" D ^DIE
"RTN","PSGFILED",32,0)
 G DONE
"RTN","PSGFILED",33,0)
 ;
"RTN","PSGFILED",34,0)
ENDRG ; standard drug fields
"RTN","PSGFILED",35,0)
 D NOW^%DTC S PSGDT=% F  S DIC="^PSDRUG(",DIC(0)="AEIMOQ",DIC("A")="Select DISPENSE DRUG: " W ! D ^DIC K DIC Q:+Y'>0  D DE
"RTN","PSGFILED",36,0)
 K PSIUA,PSIUDA,PSIUX G DONE
"RTN","PSGFILED",37,0)
 ;
"RTN","PSGFILED",38,0)
DE ;
"RTN","PSGFILED",39,0)
 I $D(^PSDRUG(+Y,"I")),^("I"),^("I")<PSGDT W $C(7),$C(7),!!?3,"*** WARNING, THIS DRUG IS INACTIVE. ***",!
"RTN","PSGFILED",40,0)
 W ! S DIE="^PSDRUG(",(DA,PSIUDA)=+Y,DR="[PSJ FILED]"
"RTN","PSGFILED",41,0)
 S PSIUX="U^UNIT DOSE PHARMACY^1" D ^PSGIU,^DIE:PSIUA'["^" K DA,DIE,DR Q
"RTN","PSGFILED",42,0)
 ;
"RTN","PSGFILED",43,0)
ENOSE ; order set enter/edit
"RTN","PSGFILED",44,0)
 K DIC F  S DLAYGO=53.2,DIC="^PS(53.2,",DIC(0)="QEAML",DIC("A")="Select ORDER SET: " W ! D ^DIC K DIC Q:Y'>0  S DA=+Y S DIE="^PS(53.2,",DR="[PSJUOSE]" D ^DIE K D0,D1,DA,DIE,DR,PSGNEDFD,PSGS0XT,PSGS0Y
"RTN","PSGFILED",45,0)
 G DONE
"RTN","PSGFILED",46,0)
 ;
"RTN","PSGFILED",47,0)
RBCHK ; used to validate room-bed
"RTN","PSGFILED",48,0)
 ;No longer used.
"RTN","PSGFILED",49,0)
 ;F Z0=0:0 S Z0=$O(^PS(57.7,DA(2),1,Z0)) Q:'Z0  I Z0'=DA(1),$D(^(Z0,1,"B",X)) W !?19,X," is already under ",$S('$D(^PS(57.7,DA(2),1,Z0,0)):"another team ("_Z0_")!",$P(^(0),"^")]"":$P(^(0),"^")_"!",1:"another team ("_Z0_")!") Q
"RTN","PSGFILED",50,0)
 ;I 'Z0,$D(^DIC(42,DA(2),2,+$O(^DIC(42,DA(2),2,"B",$P(X,"-"),0)),1,"B",$P(X,"-",2))) K Z0 Q
"RTN","PSGFILED",51,0)
 ;K X,Z0 Q
"RTN","PSGFILED",52,0)
 ;
"RTN","PSGFILED",53,0)
RBQ ; show room-beds for a ward
"RTN","PSGFILED",54,0)
 W !,"ANSWER WITH A ROOM-BED FROM THIS WARD ",$S('$D(^DIC(42,DA(1),0)):"",$P(^(0),"^")]"":" ("_$P(^(0),"^")_")",1:"") Q:'$D(^(0))  W !,"DO YOU WANT THE ENTIRE ROOM-BED LIST" S %=0 D YN^DICN Q:%'=1
"RTN","PSGFILED",55,0)
 W ! S (Z0,Z3)=0 F Z1=0:0 S Z1=$O(^DIC(42,DA(1),2,Z1)) Q:'Z1  I $D(^(Z1,0)) S Z4=$P(^(0),"^") I Z4]"" F Z2=0:0 S Z2=$O(^DIC(42,DA(1),2,Z1,1,Z2)) Q:'Z2  I $D(^(Z2,0)),$P(^(0),"^")]"" S Z0=Z0+1 D:'(Z0#11) RBNP Q:Z3["^"  W ?1,Z4,"-",$P(^(0),"^"),!
"RTN","PSGFILED",56,0)
 K Z0,Z1,Z2,Z3,Z4 Q
"RTN","PSGFILED",57,0)
 ;
"RTN","PSGFILED",58,0)
RBNP W """^"" TO STOP: " R Z3:DTIME W:'$T $C(7) S:'$T Z3="^" W *13,"            ",*13 Q
"RTN","PSGFILED",59,0)
 ;
"RTN","PSGFILED",60,0)
ENPPD ; edit pharmacy patient data
"RTN","PSGFILED",61,0)
 ; W !!?3,"...This option is still under development...",! Q
"RTN","PSGFILED",62,0)
 ;
"RTN","PSGFILED",63,0)
ENCPDD ; edit patient's default stop date (wall)
"RTN","PSGFILED",64,0)
 D ENCV^PSGSETU I $D(XQUIT) Q
"RTN","PSGFILED",65,0)
 F  D ENAO^PSGGAO Q:PSGP'>0  D
"RTN","PSGFILED",66,0)
 .S WDN=$P($G(^DPT(PSGP,.1)),"^") W:WDN="" !!?2,"The patient is not currently on a ward."
"RTN","PSGFILED",67,0)
 .I WDN]"" S WD=$O(^DIC(42,"B",WDN,0)),WD=$O(^PS(59.6,"B",+WD,0)) I $S('WD:1,1:'$P($G(^PS(59.6,WD,0)),"^",4)) S X="PLEASE NOTE: The 'SAME STOP DATE' parameter for the ward ("_WDN_") is not turned on.  Any date entered here will be ignored "
"RTN","PSGFILED",68,0)
 .I  S X=X_"until the parameter is turned on for this ward." W $C(7),!!?2 F Y=1:1:$L(X," ") S X(1)=$P(X," ",Y) W:$L(X(1))+$X>78 ! W X(1)," "
"RTN","PSGFILED",69,0)
 .S DA=PSGP,DR="62.01T",DIE="^PS(55," W !! D ^DIE
"RTN","PSGFILED",70,0)
 K WD,WDN G DONE
"RTN","PSGFILED",71,0)
 ;
"RTN","PSGFILED",72,0)
ENSYS ; edit system file
"RTN","PSGFILED",73,0)
 ;/S DIE="^PS(59.7,",DA=1,DR="21;26;26.3;26.4;26.2;20.412ALLOW THE CHANGE OF ORDER TYPES ON ORDERS FROM OERR;32"
"RTN","PSGFILED",74,0)
 S DIE="^PS(59.7,",DA=1,DR="21;26;26.3;26.4;26.2;26.5;26.6;26.7"
"RTN","PSGFILED",75,0)
 W ! D ^DIE K DIE,DA,DR Q
"RTN","PSGFILED",76,0)
 ;
"RTN","PSGFILED",77,0)
ENPLSP ; edit pick list site parameters
"RTN","PSGFILED",78,0)
 ;
"RTN","PSGFILED",79,0)
ENCS ; change current site & parameters
"RTN","PSGFILED",80,0)
 I $D(PSJSYSW0)#2 W !!,"Current site: ",$P(PSJSYSW0,"^")
"RTN","PSGFILED",81,0)
 S PSGCSF=1 D ^PSGSET,ENKV^PSGSETU W:$D(XQUIT) !!?5,"(The Inpatient site you are currently working under has not changed.)" K PSGCSF,PSGORSET,XQUIT Q
"RTN","PSGFILED",82,0)
 ;
"RTN","PSGFILED",83,0)
DF ; Add/edit Med route, instruction... to the Dosage form file.
"RTN","PSGFILED",84,0)
 S DIR("A")="Would you like to update the Dosage Form file"
"RTN","PSGFILED",85,0)
 S DIR("?")="If your answer is Yes, you will be able to Add/edit the Med routes, Instructions, Verb, Noun and Preposition that associate with this Dosage form."
"RTN","PSGFILED",86,0)
 S DIR(0)="Y",DIR("B")="Y" D ^DIR Q:Y'=1
"RTN","PSGFILED",87,0)
 NEW Y,DFNO K DIE,DIC,DA,DR
"RTN","PSGFILED",88,0)
 F  S DIC="^PS(50.606,",DIC(0)="QEAMI" D ^DIC Q:+Y'>0  S DFNO=+Y D
"RTN","PSGFILED",89,0)
 . I $G(MR)]"",'$D(^PS(50.606,DFNO,"MR","B",MRNO)) S DIE="^PS(50.606,",DR="1///"_MR,DA=DFNO D ^DIE
"RTN","PSGFILED",90,0)
 . K DIE,DIC,DR,MR S DIE="^PS(50.606,",DR="1;3;4;5",DA=DFNO D ^DIE
"RTN","PSGFILED",91,0)
 ;. K DIE,DIC,DR,MR S DIE="^PS(50.606,",DR="1;2;3;4;5",DA=DFNO D ^DIE
"RTN","PSGFILED",92,0)
 Q
"RTN","PSGPLR")
0^4^B30038411
"RTN","PSGPLR",1,0)
PSGPLR ;BIR/CML3-PRINTS PICK LIST REPORT ;04 May 98 / 11:23 AM
"RTN","PSGPLR",2,0)
 ;;5.0; INPATIENT MEDICATIONS ;**10,50,67,119**;16 DEC 97
"RTN","PSGPLR",3,0)
 ;
"RTN","PSGPLR",4,0)
 ; Reference to ^PS(55 is supported by DBIA# 2191.
"RTN","PSGPLR",5,0)
 ; Reference to ^PS(59.7 is supported by DBIA# 2181.
"RTN","PSGPLR",6,0)
 ; Reference to ^PSDRUG is supported by DBIA# 2192.
"RTN","PSGPLR",7,0)
 ; Reference to ^%DTC is supported by DBIA# 10000.
"RTN","PSGPLR",8,0)
 ; Reference to ^VADPT is supported by DBIA# 10061.
"RTN","PSGPLR",9,0)
 ;
"RTN","PSGPLR",10,0)
 N PSGY,OLDWARD,STPDT D NOW^%DTC S PSGDT=+$E(%,1,12),PPLD=$$ENDTC^PSGMI(PSGDT),$P(OLINE,"-",75)="",PSGPLXR=$S($G(PSGPLUPF)=1:"AU",1:"AC")
"RTN","PSGPLR",11,0)
 S PGN=0,(FACL,LINE)="",$P(LINE,"-",81)="",$P(FACL,"_",31)="",TND=$G(^PS(53.5,PSGPLG,0)),PSD=$P(TND,"^",3),PFD=$P(TND,"^",4),WSF=$P(TND,"^",7),WGPN=$S('$D(^PS(57.5,PSGPLWG,0)):"N/F",$P(^(0),"^")]"":$P(^(0),"^"),1:"N/F")
"RTN","PSGPLR",12,0)
 S FFF=$S($P(PSGPLWGP,"^",4):2,$P(PSGPLWGP,"^",5):1,1:0),CML=IO'=IO(0)!($E(IOST,1,2)'="C-")
"RTN","PSGPLR",13,0)
 F X="PSD","PFD" S @X=$$ENDTC^PSGMI(@X)
"RTN","PSGPLR",14,0)
 U IO
"RTN","PSGPLR",15,0)
 I '$D(^PS(53.5,$S($D(PSGPLUPF):"AU",1:"AC"),PSGPLG)) S NPLF=0 D HEADER W !!?25,"*** No orders to fill ***" W:(IO'=IO(0)!(IOST'["C-"))&($Y) @IOF G DONE
"RTN","PSGPLR",16,0)
 ;
"RTN","PSGPLR",17,0)
BEGIN ;
"RTN","PSGPLR",18,0)
 I '$$LOCK^PSGPLUTL(PSGPLG,"PSGPLR") H 60 G BEGIN
"RTN","PSGPLR",19,0)
 S NPLF=1,TM=0 F  S TM=$O(^PS(53.5,PSGPLXR,PSGPLG,TM)) Q:TM=""!(TM["~")  S (DDRG,PDRG,PN,PST,RM,WDN)="" D HEADER:'FFF,^PSGPLR0 I CML,'FFF D PAGECK W !!?25,"FILLED BY: ",FACL,!!?25,"CHECKED BY: ",FACL
"RTN","PSGPLR",20,0)
 I CML,FFF D PAGECK W !!?25,"FILLED BY: ",FACL,!!?25,"CHECKED BY: ",FACL W:$Y @IOF
"RTN","PSGPLR",21,0)
 ;
"RTN","PSGPLR",22,0)
DONE ;
"RTN","PSGPLR",23,0)
 D UNLOCK^PSGPLUTL(PSGPLG,"PSGPLR")
"RTN","PSGPLR",24,0)
 K AT,ATC,CML,DIS,DO,DR,DRG,FACL,FD,FFF,FQC,LINE,ND,NEED,NPLF,OLINE,PSJJORD,PFD,PGN,PN,POP,PPLD,PPN,PRM,PSD,PSGID,PSGOD,PSGP,PST,PW,RM,RTE,SCH,SD,SM,PSSN,TD,TM,TND,WDN,WL,WG,WSF,WGPN,X
"RTN","PSGPLR",25,0)
 Q
"RTN","PSGPLR",26,0)
 ;
"RTN","PSGPLR",27,0)
DD ;
"RTN","PSGPLR",28,0)
 S (DDRG,OLDWARD)="" N ST S ST=$P(ND0,"^",7) F  S DDRG=$O(^PS(53.5,PSGPLXR,PSGPLG,TM,WDN,RM,PN,PST,DRG,DDRG)) Q:(DDRG="")!(DDRG="NO DISPENSE DRUG")  S X=$G(^PS(53.5,PSGPLG,1,+$P(PN,U,2),1,+$P(DRG,U,2),1,+$P(DDRG,U,2),0)),DR=+X,DND=$P(X,U,2,4) D
"RTN","PSGPLR",29,0)
 .S DRN=$G(^PS(55,PSGP,5,PSJJORD,1,DR,0)),DR=$$ENDDN^PSGMI($P(DRN,"^")) I DND?7N1"DI" S DND=$E($$ENDTC^PSGMI(+DND),1,8) W !?6,DR,?48,ST,?51,"(DI "_DND_")",?66,"Returns: ____" Q
"RTN","PSGPLR",30,0)
 .S UD=$P(DRN,"^",2),ATC=$P($G(^PSDRUG(+DRN,8.5)),"^",2)]"" S:ATC ATC=$D(^(212,"AC",PSGPLWG))
"RTN","PSGPLR",31,0)
 .S DIS=$P(DND,"^",2),NEED=$S($P(DND,"^")]"":$P(DND,"^"),1:0) I ATC S ATCFF=+$P($G(^PS(59.7,1,26)),"^",7),ATC=$S(ATCFF:NEED,UD#1:0,DIS]"":+DIS,1:NEED) I ATC,$S(ATC<1:1,ATC'?1.3N:1,1:ATC#1) S ATC=0
"RTN","PSGPLR",32,0)
 .I ATC S X=0,X=$O(^PS(59.7,X)) I $P($G(^(X,26)),U,2)=1,PST="OC" S ATC=0
"RTN","PSGPLR",33,0)
 .S UD=$S('UD:1,UD=.5:"1/2",UD=.25:"1/4",UD<1:"0"_UD,1:UD)
"RTN","PSGPLR",34,0)
 .W !?6,DR,?48,ST W:(ATC)&(NEED>0) ?57,"ATC" W ?61,$J(UD,4),?68,$J(NEED,4),?75,$S(DIS]"":$J(DIS,4),1:"____")
"RTN","PSGPLR",35,0)
 .S:ST="DISCONTINUED" OLDWARD=1 S ST=""
"RTN","PSGPLR",36,0)
 I DDRG="NO DISPENSE DRUG" W !?6,PDRG,?48,ST,?57,"OI" S:ST="DISCONTINUED" OLDWARD=1 S ST=""
"RTN","PSGPLR",37,0)
 N GIVSTR S GIVSTR=$S(DO]"":DO_" ",1:"")_RTE_" "_SCH D
"RTN","PSGPLR",38,0)
 .N MARX,I,Y,X D TXT^PSGMUTL(GIVSTR,60)
"RTN","PSGPLR",39,0)
 .F I=1:1:MARX W:I=1 !?10,"Give: ",MARX(1) W:I>1 !?16,MARX(I)
"RTN","PSGPLR",40,0)
 D:OLDWARD WARDCHK W:AT]"" !,?65-$L(AT),AT W !?7,"Start: ",SD,?37,"Stop: ",FD
"RTN","PSGPLR",41,0)
 I Y]"" W !?10 F Q=1:1:$L(Y," ") S X=$P(Y," ",Q) W:$X+$L(X)>65 !?10 W X_" "
"RTN","PSGPLR",42,0)
 K ST
"RTN","PSGPLR",43,0)
 Q
"RTN","PSGPLR",44,0)
 ;
"RTN","PSGPLR",45,0)
EXDD ;
"RTN","PSGPLR",46,0)
 W ! S (DDRG,OLDWARD)="" F  S DDRG=$O(^PS(53.5,PSGPLXR,PSGPLG,TM,WDN,RM,PN,PST,DRG,DDRG)) Q:(DDRG="")!(DDRG="NO DISPENSE DRUG")  S DND=^(DDRG) D
"RTN","PSGPLR",47,0)
 .S DR=$P(DDRG,"^",2),DRN=$G(^PS(55,PSGP,5,PSJJORD,1,DR,0)),ID=$P(DRN,"^",3),DR=$$ENDDN^PSGMI($P(DRN,"^")) W !?6,DR,?48,DIS,?66,"Returns: ____" S:DIS="DISCONTINUED" OLDWARD=1 S DIS=""
"RTN","PSGPLR",48,0)
 I DDRG="NO DISPENSE DRUG" S ND1=$G(^PS(55,PSGP,5,PSJJORD,.2)),PDRG=$$ENPDN^PSGMI($P(ND1,"^")) W !?6,PDRG,?48,DIS,?66,"Returns: ____" S:DIS="DISCONTINUED" OLDWARD=1 S DIS=""
"RTN","PSGPLR",49,0)
 W !?10,"Give: ",$S(DO]"":DO_" ",1:""),RTE," ",SCH D:OLDWARD WARDCHK W !?7,"Start: ",SD,?37,"Stop: ",FD
"RTN","PSGPLR",50,0)
 Q
"RTN","PSGPLR",51,0)
 ;
"RTN","PSGPLR",52,0)
FCL ;
"RTN","PSGPLR",53,0)
 I PGN,CML,$P(PSGPLWGP,"^",6) W !!?25,"FILLED BY: ",FACL,!!?25,"CHECKED BY: "_FACL
"RTN","PSGPLR",54,0)
 ;
"RTN","PSGPLR",55,0)
HEADER ;
"RTN","PSGPLR",56,0)
 S PGN=PGN+1 W:$Y @IOF
"RTN","PSGPLR",57,0)
 W ?1,"(",PSGPLG,")",?$S($D(PSGPLUPF):27,1:32),"PICK LIST REPORT" W:$D(PSGPLUPF) " (UPDATE)" W ?64,PPLD,!,"Ward group: ",WGPN,?73-$L(PGN),"Page: ",PGN,!?18,"For ",PSD," through ",PFD W:NPLF !,"Team: ",$S(TM'["zz":TM,1:"** N/F **")
"RTN","PSGPLR",58,0)
 W !!,$S($P(TND,"^",6)&'$P(TND,"^",8):"Bed-Room",1:"Room-Bed"),?15,"Patient",?67,"Units",?74,"Units",!?9,"Medication",?48,"ST",?62,"U/D",?66,"Needed",?74,"Disp'd",!,LINE Q
"RTN","PSGPLR",59,0)
 ;
"RTN","PSGPLR",60,0)
PAGECK ;
"RTN","PSGPLR",61,0)
 S PSGPY=$Y,PSGPY=$Y+4 I PSGPY+4>IOSL W @IOF
"RTN","PSGPLR",62,0)
 Q
"RTN","PSGPLR",63,0)
 ;
"RTN","PSGPLR",64,0)
WARDCHK ;  if patient has discontinued orders from a different ward, print the ward and room/bed that the orders were discontinued from.
"RTN","PSGPLR",65,0)
 Q:'$G(STPDT)
"RTN","PSGPLR",66,0)
 S VAINDT=$$MINUTES(STPDT,5)
"RTN","PSGPLR",67,0)
 S DFN=PSGP D INP^VADPT I PW'=$P(VAIN(4),"^",2) W ?48,$E("(from "_$P(VAIN(4),"^",2)_" "_VAIN(5)_")",1,31)
"RTN","PSGPLR",68,0)
 S OLDWARD="" Q
"RTN","PSGPLR",69,0)
 ;
"RTN","PSGPLR",70,0)
MINUTES(STPDT,LESS)     ; pass in a FM date/time and the number of minutes (9 or less) to subtract from it
"RTN","PSGPLR",71,0)
 S VAINDT=$S($E(STPDT,9,12)<LESS:($E(STPDT,1,7)-1)_"."_(($E(STPDT,9,12)+2360)-LESS),$E(STPDT,11,12)<5:$E(STPDT,1,8)_$S($E(STPDT,9,10)="10":"09",$E(STPDT,9,10)="20":"19",1:$E(STPDT,9)_($E(STPDT,10)-1))_(60+$E(STPDT,12)-LESS),1:STPDT-(LESS*.0001))
"RTN","PSGPLR",72,0)
 Q VAINDT
"RTN","PSGTAP0")
0^2^B12574819
"RTN","PSGTAP0",1,0)
PSGTAP0 ;BIR/CML3-SEND PICK LIST TO TRAVENOL'S ATC 212 ;18 APR 95 / 4:21 PM
"RTN","PSGTAP0",2,0)
 ;;5.0; INPATIENT MEDICATIONS ;**119**;16 DEC 97
"RTN","PSGTAP0",3,0)
 ;
"RTN","PSGTAP0",4,0)
S1 ;
"RTN","PSGTAP0",5,0)
 W $C(48) F Q=1:1:75 R *X:$S(Q<15:1,1:5) G:X=49 S1 I X=48 Q
"RTN","PSGTAP0",6,0)
 E  S QUIT=1 Q
"RTN","PSGTAP0",7,0)
 W A F Q=1:1:75 R *X:$S(Q<15:1,1:5) G:X=49 S1 I X=48 Q
"RTN","PSGTAP0",8,0)
 S:'$T QUIT=1 Q
"RTN","PSGTAP0",9,0)
 ;
"RTN","PSGTAP0",10,0)
S2 ;
"RTN","PSGTAP0",11,0)
 W $C(48) F Q=1:1:75 R X:$S(Q<15:1,1:5) G:$A(X)=49 S2 I $A(X)=48 Q
"RTN","PSGTAP0",12,0)
 E  S QUIT=1 Q
"RTN","PSGTAP0",13,0)
 W A F Q=1:1:75 R X:$S(Q<15:1,1:5) G:$A(X)=49 S2 I $A(X)=48 Q
"RTN","PSGTAP0",14,0)
 S:'$T QUIT=1 Q
"RTN","PSGTAP0",15,0)
 Q
"RTN","PSGTAP0",16,0)
 ;
"RTN","PSGTAP0",17,0)
ENQ ;
"RTN","PSGTAP0",18,0)
 N ATCFF,DNUNIT
"RTN","PSGTAP0",19,0)
 F  Q:$$LOCK^PSGPLUTL(PSGPLG,"PSGTAP")
"RTN","PSGTAP0",20,0)
 F  L +^PS(53.55,PSGPLG):1 Q:$T
"RTN","PSGTAP0",21,0)
 D NOW^%DTC S %=%_"0000000000000",DAT=$E(%,4,5)_$E(%,6,7)_$E(%,2,3)_$E(%,9,10)_$E(%,11,12) I PSGPLG<0 S QUIT=0 G QUIT
"RTN","PSGTAP0",22,0)
 I PSGTAPR S ND=$P($G(^PS(53.55,PSGPLG,0)),"^",2) I ND,$O(^(1,0)) G RESTART
"RTN","PSGTAP0",23,0)
 I $D(^PS(53.55,PSGPLG)) S DIK="^PS(53.55,",DA=PSGPLG D ^DIK
"RTN","PSGTAP0",24,0)
 S (DINUM,X)=PSGPLG,DIC="^PS(53.55,",DIC(0)="L" K DD,DO D FILE^DICN I Y'>0 S QUIT=0 G QUIT
"RTN","PSGTAP0",25,0)
 S ^PS(53.55,PSGPLG,1,0)="^53.56A",BLKS="                      ",G=PSGPLG,(DD,PSGORD,PSJJORD,ND,P,R,S,T,W,O,D)=""
"RTN","PSGTAP0",26,0)
 S ATCFF=+$P($G(^PS(59.7,1,26)),"^",7)
"RTN","PSGTAP0",27,0)
 F  S T=$O(^PS(53.5,"AC",G,T)) Q:T=""  F  S W=$O(^PS(53.5,"AC",G,T,W)) Q:W=""  F  S R=$O(^PS(53.5,"AC",G,T,W,R)) Q:R=""  F  S P=$O(^PS(53.5,"AC",G,T,W,R,P)) Q:P=""  D  ;
"RTN","PSGTAP0",28,0)
 .S (DFN,PSGP)=+$P(P,"^",2) D PID^VADPT S PND=$S($D(^DPT(PSGP,0)):^(0),1:0),PL=$E($S($D(^(.1)):^(.1),1:"N/F")_BLKS,1,12),PN=$E($P(PND,"^")_BLKS,1,20),PID=$E(VA("PID")_BLKS,1,12),S="A"
"RTN","PSGTAP0",29,0)
 .F  S S=$O(^PS(53.5,"AC",G,T,W,R,P,S)) Q:"Z"[S  F  S PSGORD=$O(^PS(53.5,"AC",G,T,W,R,P,S,PSGORD)) Q:PSGORD=""  S O=$P(PSGORD,"^",2) D
"RTN","PSGTAP0",30,0)
 ..S ON=+$G(^PS(53.5,G,1,PSGP,1,O,0)) F  S DD=$O(^PS(53.5,"AC",G,T,W,R,P,S,PSGORD,DD)) Q:DD=""  S D=+$P(DD,"^",2),C=$G(^PS(53.5,G,1,PSGP,1,O,1,D,0)),D=$P(C,"^"),C=$S($P(C,"^",3)]"":+$P(C,"^",3),1:$P(C,"^",2)) I C>0,C?1.3N D  ;
"RTN","PSGTAP0",31,0)
 ...S DN=$G(^PS(55,PSGP,5,ON,1,D,0))
"RTN","PSGTAP0",32,0)
 ...S DNUNIT=$P(DN,"^",2) I DNUNIT#1,ATCFF,+DNUNIT S DNUNIT=(DNUNIT\1)+1
"RTN","PSGTAP0",33,0)
 ...I DN,'(DNUNIT#1),$S('$P(DN,"^",3):1,1:DT<$P(DN,"^",3)) S A=$P($G(^PSDRUG(+DN,8.5)),"^",2) I A]"",$D(^(212,"AC",PSGPLWG)) D
"RTN","PSGTAP0",34,0)
 ....S A=$E(A_BLKS,1,15) I C>99 F ND=ND+1:1 S ^PS(53.55,PSGPLG,1,ND,0)=PN_PID_PL_"BAT"_A_"1 ^099",C=C-99 Q:C<100
"RTN","PSGTAP0",35,0)
 ....Q:C<1  S:$L(C)<3 C=$E("000",1,3-$L(C))_C S ND=ND+1,^PS(53.55,PSGPLG,1,ND,0)=PN_PID_PL_"BAT"_A_"1 ^"_C Q
"RTN","PSGTAP0",36,0)
 S QUIT=$O(^PS(53.55,PSGPLG,1,0)) G:'QUIT QUIT S ^(0)="^53.56A^"_ND_"^"_ND,ND=0
"RTN","PSGTAP0",37,0)
 ;
"RTN","PSGTAP0",38,0)
RESTART ;
"RTN","PSGTAP0",39,0)
 X ^%ZOSF("LABOFF") S QUIT=0
"RTN","PSGTAP0",40,0)
 F  S ND=$O(^PS(53.55,PSGPLG,1,ND)) Q:'ND  S A=$G(^(ND,0)) I A]"" S A=$C(50)_$C(52)_$P(A,"^")_$C(53)_$C(54)_$P(A,"^",2)_DAT_$C(55)_$C(13) D S1:'PSGSPD,S2:PSGSPD Q:QUIT  S $P(^PS(53.55,PSGPLG,0),"^",2)=ND
"RTN","PSGTAP0",41,0)
 ;
"RTN","PSGTAP0",42,0)
QUIT ;
"RTN","PSGTAP0",43,0)
 I 'QUIT S DIK="^PS(53.55,",DA=PSGPLG D ^DIK
"RTN","PSGTAP0",44,0)
 L -^PS(53.55,PSGPLG)
"RTN","PSGTAP0",45,0)
 D UNLOCK^PSGPLUTL(PSGPLG,"PSGTAP") D ^%ZISC Q
"RTN","PSGTAP1")
0^3^B17389584
"RTN","PSGTAP1",1,0)
PSGTAP1 ;BIR/CML3-SEND PICK LIST TO ATC BY PATIENT/ADMIN TIME ;19 Nov 98 / 2:37 PM
"RTN","PSGTAP1",2,0)
 ;;5.0; INPATIENT MEDICATIONS ;**10,119**;16 DEC 97
"RTN","PSGTAP1",3,0)
 ;
"RTN","PSGTAP1",4,0)
S1 ;
"RTN","PSGTAP1",5,0)
 W $C(48) F Q=1:1:75 R *X:$S(Q<15:1,1:5) G:X=49 S1 I X=48 Q
"RTN","PSGTAP1",6,0)
 E  S QUIT=1 Q
"RTN","PSGTAP1",7,0)
 W A F Q=1:1:75 R *X:$S(Q<15:1,1:5) G:X=49 S1 I X=48 Q
"RTN","PSGTAP1",8,0)
 S:'$T QUIT=1 Q
"RTN","PSGTAP1",9,0)
 ;
"RTN","PSGTAP1",10,0)
S2 ;
"RTN","PSGTAP1",11,0)
 W $C(48) F Q=1:1:75 R X:$S(Q<15:1,1:5) G:$A(X)=49 S2 I $A(X)=48 Q
"RTN","PSGTAP1",12,0)
 E  S QUIT=1 Q
"RTN","PSGTAP1",13,0)
 W A F Q=1:1:75 R X:$S(Q<15:1,1:5) G:$A(X)=49 S2 I $A(X)=48 Q
"RTN","PSGTAP1",14,0)
 S:'$T QUIT=1 Q
"RTN","PSGTAP1",15,0)
 Q
"RTN","PSGTAP1",16,0)
 ;
"RTN","PSGTAP1",17,0)
ENQ ;
"RTN","PSGTAP1",18,0)
 N ND,G,TM,W,R,P,ST,DD,ATCFF,DNUNIT K ^TMP("PSGATC",$J)
"RTN","PSGTAP1",19,0)
 F  Q:$$LOCK^PSGPLUTL(PSGPLG,"PSGTAP")
"RTN","PSGTAP1",20,0)
 F  L +^PS(53.55,PSGPLG):1 Q:$T
"RTN","PSGTAP1",21,0)
 D NOW^%DTC S %=%_"0000000000000",PSGPLSD=$P(^PS(53.5,PSGPLG,0),"^",3),PSGPLED=$P(^(0),"^",4) I 'PSGPLSD!'PSGPLED S QUIT=0 G QUIT
"RTN","PSGTAP1",22,0)
 I PSGTAPR S ND=$P($G(^PS(53.55,PSGPLG,0)),"^",2) I ND,$O(^(1,0)) G RESTART
"RTN","PSGTAP1",23,0)
 I $D(^PS(53.55,PSGPLG)) S DIK="^PS(53.55,",DA=PSGPLG D ^DIK
"RTN","PSGTAP1",24,0)
 S (DINUM,X)=PSGPLG,DIC="^PS(53.55,",DIC(0)="L" K DD,DO D FILE^DICN I Y'>0 S QUIT=0 G QUIT
"RTN","PSGTAP1",25,0)
 S ATCFF=+$P($G(^PS(59.7,1,26)),"^",7)
"RTN","PSGTAP1",26,0)
 S ^PS(53.55,PSGPLG,1,0)="^53.56A",BLKS="                      ",G=PSGPLG,(DD,PSGORD,PSJJORD,ND,P,R,ST,TM,W)=""
"RTN","PSGTAP1",27,0)
 F  S TM=$O(^PS(53.5,"AC",G,TM)) Q:TM=""  F  S W=$O(^PS(53.5,"AC",G,TM,W)) Q:W=""  F  S R=$O(^PS(53.5,"AC",G,TM,W,R)) Q:R=""  F  S P=$O(^PS(53.5,"AC",G,TM,W,R,P)) Q:P=""  D
"RTN","PSGTAP1",28,0)
 .S (DFN,PSGP)=+$P(P,"^",2) D PID^VADPT S PND=$S($D(^DPT(PSGP,0)):^(0),1:0),PL=$E($S($D(^(.1)):^(.1),1:"N/F")_BLKS,1,12),PN=$E($P(PND,"^")_BLKS,1,20),PID=$E(VA("PID")_BLKS,1,12)
"RTN","PSGTAP1",29,0)
 .S ST="" F  S ST=$O(^PS(53.5,"AC",G,TM,W,R,P,ST)) Q:ST=""  Q:"Z"[ST  F  S PSGORD=$O(^PS(53.5,"AC",G,TM,W,R,P,ST,PSGORD)) Q:PSGORD=""  S ON=+$G(^PS(53.5,G,1,PSGP,1,$P(PSGORD,"^",2),0)),DD="" D
"RTN","PSGTAP1",30,0)
 ..F  S DD=$O(^PS(53.5,"AC",G,TM,W,R,P,ST,PSGORD,DD)) Q:DD=""  S D=+$P(DD,"^",2),C=$G(^PS(53.5,G,1,PSGP,1,$P(PSGORD,"^",2),1,D,0)),O=$P(C,"^"),C=$S($P(C,"^",3)]"":+$P(C,"^",3),1:$P(C,"^",2)) I C>0,C?1.3N D
"RTN","PSGTAP1",31,0)
 ...S DN=$G(^PS(55,PSGP,5,ON,1,D,0))
"RTN","PSGTAP1",32,0)
 ...S DNUNIT=$P(DN,"^",2) I DNUNIT#1,ATCFF,+DNUNIT S DNUNIT=(DNUNIT\1)+1
"RTN","PSGTAP1",33,0)
 ...I DN,'(DNUNIT#1),$S('$P(DN,"^",3):1,1:DT<$P(DN,"^",3)) S A=$P($G(^PSDRUG(+DN,8.5)),"^",2) I A]"",$D(^(212,"AC",PSGPLWG)) S A=$E(A_BLKS,1,15),C=$S(DNUNIT:DNUNIT,1:1),C=$E("000",1,3-$L(C))_C D OS
"RTN","PSGTAP1",34,0)
 ;
"RTN","PSGTAP1",35,0)
SET ; write ^TMP global to ACT file
"RTN","PSGTAP1",36,0)
 S ND=0,(X,Y)="^TMP(""PSGATC"","_$J,X=X_")"
"RTN","PSGTAP1",37,0)
 F  S X=$Q(@X) Q:X'[Y  S ND=ND+1,^PS(53.55,PSGPLG,1,ND,0)=$G(@X)
"RTN","PSGTAP1",38,0)
 S QUIT=$O(^PS(53.55,PSGPLG,1,0)) G:'QUIT QUIT S ^(0)="^53.56A^"_ND_"^"_ND,ND=0
"RTN","PSGTAP1",39,0)
 ;
"RTN","PSGTAP1",40,0)
RESTART ;
"RTN","PSGTAP1",41,0)
 X ^%ZOSF("LABOFF") S QUIT=0
"RTN","PSGTAP1",42,0)
 F  S ND=$O(^PS(53.55,PSGPLG,1,ND)) Q:'ND  S A=$G(^(ND,0)) I A]"" S A=$C(50)_$C(52)_$P(A,"^")_$C(53)_$C(54)_$P(A,"^",2)_$C(55)_$C(13) D S1:'PSGSPD,S2:PSGSPD Q:QUIT  S $P(^PS(53.55,PSGPLG,0),"^",2)=ND
"RTN","PSGTAP1",43,0)
 ;
"RTN","PSGTAP1",44,0)
QUIT ;
"RTN","PSGTAP1",45,0)
 K ^TMP("PSGATC",$J)
"RTN","PSGTAP1",46,0)
 I 'QUIT S DIK="^PS(53.55,",DA=PSGPLG D ^DIK K DIK
"RTN","PSGTAP1",47,0)
 L -^PS(53.55,PSGPLG)
"RTN","PSGTAP1",48,0)
 D UNLOCK^PSGPLUTL(PSGPLG,"PSGTAP") D ^%ZISC
"RTN","PSGTAP1",49,0)
 Q
"RTN","PSGTAP1",50,0)
 ;
"RTN","PSGTAP1",51,0)
OS ; order record set
"RTN","PSGTAP1",52,0)
 S ND2=$G(^PS(55,PSGP,5,ON,2)),SD=$P(ND2,U,2) I $S($P(SD,".")>$P(^PS(53.5,PSGPLG,0),"^",4):1,$P(ND2,U)["PRN":1,1:0) Q
"RTN","PSGTAP1",53,0)
 S FD=$P($P(ND2,U,4),"."),T=$P(ND2,U,6),PST=$P(^PS(55,PSGP,5,ON,0),"^",7)
"RTN","PSGTAP1",54,0)
 S QST=$S(PST="C"!(PST="O"):PST,PST="OC":"OA",PST="P":"OP",$P(ND2,U)["PRN":"OR",1:"CR")
"RTN","PSGTAP1",55,0)
 ;S:PST="OC" PSGMAR("ZZZ")="999"
"RTN","PSGTAP1",56,0)
 D:PST'="OC" DTS
"RTN","PSGTAP1",57,0)
 Q:'$D(PSGMAR)
"RTN","PSGTAP1",58,0)
 I $P(ND2,U,6)="D",$P(ND2,U,5)="" S $P(ND2,U,5)=$E($P($P(ND2,U,2),".",2)_"0000",1,4)
"RTN","PSGTAP1",59,0)
 S X="" F  S X=$O(PSGMAR(X)) Q:X=""  D
"RTN","PSGTAP1",60,0)
 .S ^TMP("PSGATC",$J,TM,W,R,PN_"^"_PSGP,X,QST,PSGORD,DD)=PN_PID_PL_"BAT"_A_"1 ^"_C_$E($E(X,4,5)_$E(X,6,7)_$E(X,2,3)_$P(X,".",2)_"000",1,10)
"RTN","PSGTAP1",61,0)
 K PSGMAR Q
"RTN","PSGTAP1",62,0)
 ;
"RTN","PSGTAP1",63,0)
DTS ;
"RTN","PSGTAP1",64,0)
 S PSGPLO=ON,PSGMFOR="",PSGPLS=PSGPLSD,PSGPLF=PSGPLED D ^PSJPL0
"RTN","PSGTAP1",65,0)
 K PSGPLO,PSGPLS,PSGPLF
"RTN","PSGTAP1",66,0)
 Q
"VER")
8.0^22.0
**END**
**END**

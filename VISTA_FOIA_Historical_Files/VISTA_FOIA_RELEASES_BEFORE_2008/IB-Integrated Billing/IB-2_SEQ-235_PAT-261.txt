$TXT Created by HOLLOWAY,THOMAS J at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Thursday, 01/22/04 at 17:16
=============================================================================
Run Date: APR 02, 2004                     Designation: IB*2*261
Package : IB - INTEGRATED BILLING             Priority: Mandatory
Version : 2       SEQ #235                      Status: Released
                  Compliance Date: MAY 03, 2004
=============================================================================

Associated patches: (v)IB*2*115    <<= must be installed BEFORE `IB*2*261'
                    (v)IB*2*156    <<= must be installed BEFORE `IB*2*261'

Subject: CORRECTION TO OUTPUT FORMATTING OF NUMERICAL VALUES

Category: 
  - Routine

Description:
============

 Some numeric values were not displayed correctly on the Medication
 Co-Pay Cap Report (option Patient Pharmacy Copay Cap Report).  
 Research showed that a similar problem existed for several fields
 on the Non-Billable Copayments Report (option Non-Billable Copay Report)
 and on the TP Patient Transaction List screen (option IBAT TP MANAGEMENT)
 when using the "Add a Transaction" action.
  
 ASSOCIATED NOIS:
 ================
   
 1. LEB-0104-20959   Incorrect total in PATIENT PHARMACY COPAY CAP REPORT
  
 ASSOCIATED E3R(s):
 ==================
 N/A
   
 PARTICIPATING TEST SITES:
 =========================
 Lebanon,PA
 Columbus,OH
 Fayetteville,AR
 Bedford,MA
  
 NOIS OVERVIEW:
 ==============
   
 1. LEB-0104-20959   Incorrect total in PATIENT PHARMACY COPAY CAP REPORT 
  
    Problem:
    --------
    When reviewing the output from the "Patient Pharmacy Copay Cap Report
    [IBARXM PATIENT CAP REPORT]" option, the summary at the end prints 
    incorrect information for the "Total Unbilled" amount.
    This problem occurs due to incorrect formatting of numeric amounts
    over 999.99.  Although the number is stored correctly, it is not
    displayed correctly on the screen or on printed reports.  In addition
    to the "Total Unbilled" amount noted by the user, there were several
    other fields in the Patient Pharmacy Copay Cap Report that could be
    affected, as well as in the Non-Billable Copayments Report and in
    Transfer Pricing Management.
   
    Resolution:
    -----------
    The formatting code has been modified to display the full, correct
    value in all options.
   
  
 TECHNICAL:
 ==========
   
 1. Changes are made to routines IBARXMO and IBATLM1B.
    There are several places where the capability of $FN to insert
    commas every three digits was used to format numbers prior to
    using $Justify to line the numbers up in a specific column.  In
    the problematic instances, $J is also used to format the number
    with 2 decimal places.
      Example:  $J($FN(+IBDATA,","),12,2)
    This usage results in any number greater than 999.99 being
    truncated at the leftmost comma.  Examples:
    Input         Desired result     Actual result
    ----------    --------------     -------------
      12345.00         12,345.00          12.00
       9876543      9,876,543.00           9.00
     
    The code has been changed to allow $FN to perform the decimal
    place formatting and $J is only used to justify the result
    within the designated column width.
      Example:  $J($FN(+IBDATA,",",2),12)
    This way of coding the format results in the desired value.
   
 ROUTINE SUMMARY 
 ===============
 The following is a list of the routines included in this patch.  
 The second line of each of these routines now looks like: 
  
   <tab>;;2.0;INTEGRATED BILLING;**[PATCH LIST]**;21-MAR-94
  
                        CHECK^XTSUMBLD results
 Routine name      Before Patch        After Patch       Patch List
 ============      ============        ===========       ===========
 IBARXMO               10497186           10497170         156,261
 IBATLM1B              13915989           13915973         115,261 
  
 INSTALLATION INSTRUCTIONS
 =========================
  
  This patch can be installed at any time.
   
  If installed during the normal workday it is recommended that the
  following menu options (File #19) be disabled to prevent possible
  conflicts while running the KIDS Install. Other VISTA users will not
  be affected.
   
     Patient Pharmacy Copay Cap Report     [IBARXM PATIENT CAP REPORT]
     Non-Billable Copay Report             [IBARXM NONBILLABLE COPAY]
     Transfer Pricing Management           [IBAT TP MANAGEMENT]
  
  Install time - less than 2 minutes.
   
   
  1.  LOAD TRANSPORT GLOBAL 
      ---------------------
      Choose the PackMan message containing this patch and invoke the 
      INSTALL/CHECK MESSAGE PackMan option.  
                                
  2.  DISABLE ROUTINE MAPPING   (DSM for open VMS sites only)
      -----------------------
      Disable routine mapping on all systems for the routines listed in
      the routine summary
      NOTE:  If the routines included in this patch are not currently in
      your mapped routine set, please skip this step.
   
  3.  START UP KIDS 
      -------------
      Start up the Kernel Installation and Distribution System Menu 
      [XPD MAIN]: 
                          
            Edits and Distribution ...  
            Utilities ...
            Installation ...  
                                    
      Select Kernel Installation & Distribution System Option: INStallation
                                                               ---
   
      1      Load a Distribution
      2      Verify Checksums in Transport Global
      3      Print Transport Global
      4      Compare Transport Global to Current System
      5      Backup a Transport Global
      6      Install Package(s)
             Restart Install of Package(s)
             Unload a Distribution
      
  4.  From this menu, you may elect to use the following options
      (When prompted for the INSTALL NAME, enter IB*2.0*261):
      
      a.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will
          not backup any other changes such as DD's or templates.
      b.  Compare Transport Global to Current System - This option
          will allow you to view all changes that will be made when
          this patch is installed.  It compares all components of this
          patch (routines, DD's, templates, etc.).
      c.  Verify Checksums in Transport Global - This option will
          allow you to ensure the integrity of the routines that are
          in the transport global.
                    
  5.  Use the Install Package(s) option and select the package IB*2.0*261.
  
      a.  When prompted 'Want KIDS to INHIBIT LOGONs during the
          install- YES//', answer NO.
      b.  When prompted 'Want to DISABLE Scheduled Options, Menu
          Options, and Protocols- YES//' answer YES.
      c.  When prompted 'Enter options you wish to mark as 'Out of
          Order':' Enter the following:       
          Patient Pharmacy Copay Cap Rep    [IBARXM PATIENT CAP REPORT]
          Non-Billable Copay Report         [IBARXM NONBILLABLE COPAY]   
          Transfer Pricing Management       [IBAT TP MANAGEMENT]
      d.  When prompted 'Enter protocols you wish to mark as 'Out of
          Order': Enter the following: (press return) 
   
  6.  REBUILD MAPPED ROUTINES(S)  (DSM for Open VMS sites only)
      --------------------------
      Optional - Include the routines distributed with this patch in the
      mapped routine set.
                     
      NOTE: This step is only necessary if you performed step 2 or if you 
      wish to include the routines in your mapped set.
   
  
   
 INSTALLATION EXAMPLE:
 ---------------------
 Select Installation Option: 6  Install Package(s)
 Select INSTALL NAME: IB*2.0*261       Loaded from Distribution  1/22/04@17:28:17
      => IB*2*261 TEST v1
   
 This Distribution was loaded on Jan 22, 2004@17:28:17 with header of 
    IB*2*261 TEST v1
    It consisted of the following Install(s):
      IB*2.0*261
 Checking Install for Package IB*2.0*261
   
 Install Questions for IB*2.0*261
   
   
   
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// 
   
 Enter options you wish to mark as 'Out Of Order': IBARXM PATIENT CAP REPORT     
   Patient Pharmacy Copay Cap Report
  
 Enter options you wish to mark as 'Out Of Order': IBARXM NONBILLABLE COPAY
  Non-Billable Copay Report 
   
 Enter options you wish to mark as 'Out Of Order': IBAT TP MANAGEMENT       Trans
 fer Pricing Management
   
 Enter options you wish to mark as 'Out Of Order': 
   
 Enter protocols you wish to mark as 'Out Of Order': 
   
 Delay Install (Minutes):  (0-60): 0// 
   
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
   
 DEVICE: HOME//   IP network
   
                                    IB*2.0*261                                   
 --------------------------------------------------------------------------------
  
  Install Started for IB*2.0*261 : 
                Jan 22, 2004@17:31:39
  
 Build Distribution Date: Jan 22, 2004
  
  Installing Routines:
                Jan 22, 2004@17:31:39
  
  Updating Routine file...
  
  Updating KIDS files...
  
  IB*2.0*261 Installed. 
                Jan 22, 2004@17:31:40
  
  Install Message sent #7068
   
 --------------------------------------------------------------------------------
           --------------------------------------------------------------
   100%    |             25             50             75               |
 Complete  --------------------------------------------------------------
   
 Install Completed

Routine Information:
====================

Routine Name:
  - IBARXMO


Routine Checksum:

Routine Name:
  - IBATLM1B


Routine Checksum:

=============================================================================
User Information:
Entered By  : HOLLOWAY,THOMAS J             Date Entered  : JAN 14, 2004
Completed By: BOWEN,MARY JANE               Date Completed: APR 02, 2004
Released By : BOTTINI,STEVE                 Date Released : APR 02, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

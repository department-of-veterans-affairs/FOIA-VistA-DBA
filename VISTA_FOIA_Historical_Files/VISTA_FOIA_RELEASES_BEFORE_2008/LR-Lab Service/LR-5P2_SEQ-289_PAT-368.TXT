$TXT Created by CLUWHYSHU,SHUUN at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Thursday, 06/14/07 at 15:40
=============================================================================
Run Date: AUG 10, 2007                     Designation: LR*5.2*368
Package : LR - LAB SERVICE                    Priority: Mandatory
Version : 5.2       SEQ #289                    Status: Released
                  Compliance Date: SEP 10, 2007
=============================================================================

Associated patches: (v)LR*5.2*317  <<= must be installed BEFORE `LR*5.2*368'
                    (v)DI*22*149   <<= must be installed BEFORE `LR*5.2*368'

Subject: INCORRECT FILEMAN CALL

Category: 
  - Routine

Description:
============

 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: 
 =============================================
 Patch LR*5.2*368 contains changes to a package referenced in VHA OI SEPG
 SOP 192-023 Review of VISTA Patches for Effects on VISTA Blood Bank
 Software. This patch does not alter or modify any VistA Blood Bank
 software design safeguards or safety critical elements functions.
  
 RISK ANALYSIS: Changes made by patch LR*5.2*368 have no effect on Blood 
 Bank software functionality, therefore RISK is none.
  
  
 PATCH DESCRIPTION:
 ==================
 This patch corrects a problem with an improperly formatted FileMan call.
  
  
 PATIENT SAFETY ISSUE:
 =====================
 PSI-07-001 has been created to address this issue.
  
  
 ASSOCIATED REMEDY TICKET:
 =========================
 HD171923 -  Problem with Modify released pathology report option
 Duplicate:  HD194260 - Unable to edit diagnoses
             HD195310 - Patch LR*5.2*317 Problem
             HD195616 - Installation of patch causing problems
             HD197249 - WIL - PROBLEMS AFTER DI*22*149 INSTALL
             HD197290 - POST PATCH PROBLEM
  
  
 PARTICIPATING TEST SITES:
 =========================
 Connecticut HCS
 Hampton VAMC
 Salisbury VAMC
  
  
 REMEDY OVERVIEW:
 ================
   Problem: 
   --------
   Routine LRAPMRL contains an incorrectly formatted FileMan call which up 
   to this point has achieved the desired result.  Changes introduced in
   FileMan patch DI*22.0*149, released on JUNE 4, 2007, cause this section
   of code to no longer achieve the desired result.
  
   When a user executes option MODIFY A RELEASED PATHOLOGY REPORT  
   [LRAPMRL], they are asked to enter an Anatomic Pathology Section.  
   There are 5 choices:
   1. SURGICAL PATHOLOGY
   2. CYTOPATHOLOGY
   3. ELECTRON MICROSOPY
   4. BONE MARROW
   5. AUTOPSY
  
   After a selection has been entered, the system will either give the user
   1 or 2 prompts, depending on the user's choice of Accession area and 
   depending on the site's LABORATORY SITE file (#69.9).
  
   When field ASK SURG PATH DIAGNOSIS (#11.2) of the LABORATORY SITE file 
   (#69.9) is set to 'YES', and the user attempts to modify a released 
   Surgical Pathology report using option MODIFY A RELEASED PATHOLOGY
   REPORT [LRAPMRL], the user should be presented with 2 options:
  
           1         Edit Report
           2         Edit Diagnosis
  
   However, the user is only getting 1 of the options, Edit Report, and is
   not given the opportunity to edit the Diagnosis.  When this field is 
   set to 'NO', the user should only get the first prompt, Edit Report.
  
   The same is true for when the user attempts to modify Cytopathology and 
   Electron Microscopy reports which use ASK CYTOPATH DIAGNOSIS (#11.3) of 
   the LABORATORY SITE file (#69.9) and ASK EM DIAGNOSIS (#11.4) of the 
   LABORATORY SITE file (#69.9) respectively.  When these fields are set 
   to 'YES', the user should see both prompts but because of the improper
   FileMan call, they are only getting the first prompt.
  
   When the user selects Bone Marrow for the Anatomic Pathology Section, 
   the routine uses whatever subscript has been assigned in the ACCESSION 
   file (#68).  Since this is assigned by the sites, it will be up to them 
   to determine if it is working properly.
  
   For AUTOPSY, the routine will always give the user both prompts.
  
   Solution:
   ---------
   Modify the FileMan call in question to pass the proper parameters
   to achieve the desired result.
  
  
 INSTALLATION INSTRUCTIONS:
 ==========================
 The install time for this patch is less than 2 minutes. This patch can be
 installed when Laboratory users are on the system.
  
 NOTE: Kernel patches must be current on the target system
       to avoid problems loading and/or installing this patch.
  
  
   1.  Use the 'INSTALL/CHECK MESSAGE' option of the PackMan menu.  This
       option will load the KIDS patch onto your system.
  
   2.  The patch has now been loaded into a Transport global on your
       system.  You now need to use KIDS to install the transport global.
  
   3.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
       select the 'Installation' menu.
  
   4.  Use the 'Verify Checksum in Transport Global' option and verify that
       all routines have the correct checksums.
  
   5.  On the KIDS menu, under the 'Installation' menu, use the following
       options:
         Print Transport Global
         Compare Transport Global to Current System
         Backup a Transport Global
  
       If you wish to preserve a copy of the routines exported in this 
       patch prior to installation, you should use the 'Backup a Transport
       Global' option at this time.  You may also compare the routines in
       your production account to the routines in the patch by using the
       'Compare a Transport Global to Current System' option.
  
   6.  Use the 'Install Package(s)' option under the 'Installation' menu
       and select the package 'LR*5.2*368'.
  
       If prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//,
       choose 'NO'.
  
       If prompted 'Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? YES//', choose 'NO'.
  
  
 ROUTINE SUMMARY:
 ================
 The following routines are included in this patch.  The second line of
 each of these routines now looks like:
   
             ;;5.2;LAB SERVICE;**[patchlist]**;Sep 27, 1994
   
  
                      Checksum       Checksum
  
     Routine Name     Before Patch   After Patch    Patch List
     ------------     ------------   -----------    ----------------
     LRAPMRL            8358357        8288410      259,295,317,368

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: LRAPMRL
    Before: B65434742   After: B64848132  **259,295,317,368**
 
Routine list of preceding patches: 317

=============================================================================
User Information:
Entered By  : CARPENTER,TERRY               Date Entered  : JAN 18, 2007
Completed By: WERNER,GARY                   Date Completed: AUG 10, 2007
Released By : CURTIS,SEAN                   Date Released : AUG 10, 2007
=============================================================================


Packman Mail Message:
=====================

$END TXT

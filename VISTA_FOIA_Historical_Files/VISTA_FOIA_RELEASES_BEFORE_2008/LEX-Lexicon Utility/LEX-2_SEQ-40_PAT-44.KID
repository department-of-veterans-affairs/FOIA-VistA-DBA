EMERGENCY Released LEX*2*44 SEQ #40
Extracted from mail message
**KIDS**:LEX*2.0*44^

**INSTALL NAME**
LEX*2.0*44
"BLD",6167,0)
LEX*2.0*44^LEXICON UTILITY^0^3060607^y
"BLD",6167,1,0)
^^2^2^3060521^
"BLD",6167,1,1,0)
Please see the National Patch Module for details of the enhancements 
"BLD",6167,1,2,0)
included in this patch.
"BLD",6167,4,0)
^9.64PA^^
"BLD",6167,6)
1^
"BLD",6167,6.3)
2
"BLD",6167,"INIT")
POST^LEX2044P
"BLD",6167,"KRN",0)
^9.67PA^8989.52^19
"BLD",6167,"KRN",.4,0)
.4
"BLD",6167,"KRN",.401,0)
.401
"BLD",6167,"KRN",.402,0)
.402
"BLD",6167,"KRN",.403,0)
.403
"BLD",6167,"KRN",.5,0)
.5
"BLD",6167,"KRN",.84,0)
.84
"BLD",6167,"KRN",3.6,0)
3.6
"BLD",6167,"KRN",3.8,0)
3.8
"BLD",6167,"KRN",9.2,0)
9.2
"BLD",6167,"KRN",9.8,0)
9.8
"BLD",6167,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",6167,"KRN",9.8,"NM",1,0)
LEX2044^^0^B69344090
"BLD",6167,"KRN",9.8,"NM",2,0)
LEX2044P^^0^B46860814
"BLD",6167,"KRN",9.8,"NM","B","LEX2044",1)

"BLD",6167,"KRN",9.8,"NM","B","LEX2044P",2)

"BLD",6167,"KRN",19,0)
19
"BLD",6167,"KRN",19.1,0)
19.1
"BLD",6167,"KRN",101,0)
101
"BLD",6167,"KRN",409.61,0)
409.61
"BLD",6167,"KRN",771,0)
771
"BLD",6167,"KRN",870,0)
870
"BLD",6167,"KRN",8989.51,0)
8989.51
"BLD",6167,"KRN",8989.52,0)
8989.52
"BLD",6167,"KRN",8994,0)
8994
"BLD",6167,"KRN","B",.4,.4)

"BLD",6167,"KRN","B",.401,.401)

"BLD",6167,"KRN","B",.402,.402)

"BLD",6167,"KRN","B",.403,.403)

"BLD",6167,"KRN","B",.5,.5)

"BLD",6167,"KRN","B",.84,.84)

"BLD",6167,"KRN","B",3.6,3.6)

"BLD",6167,"KRN","B",3.8,3.8)

"BLD",6167,"KRN","B",9.2,9.2)

"BLD",6167,"KRN","B",9.8,9.8)

"BLD",6167,"KRN","B",19,19)

"BLD",6167,"KRN","B",19.1,19.1)

"BLD",6167,"KRN","B",101,101)

"BLD",6167,"KRN","B",409.61,409.61)

"BLD",6167,"KRN","B",771,771)

"BLD",6167,"KRN","B",870,870)

"BLD",6167,"KRN","B",8989.51,8989.51)

"BLD",6167,"KRN","B",8989.52,8989.52)

"BLD",6167,"KRN","B",8994,8994)

"BLD",6167,"PRE")
LEX2044
"BLD",6167,"QUES",0)
^9.62^^
"BLD",6167,"REQB",0)
^9.611^3^3
"BLD",6167,"REQB",1,0)
LEX*2.0*39^2
"BLD",6167,"REQB",2,0)
LEX*2.0*38^2
"BLD",6167,"REQB",3,0)
LEX*2.0*40^2
"BLD",6167,"REQB","B","LEX*2.0*38",2)

"BLD",6167,"REQB","B","LEX*2.0*39",1)

"BLD",6167,"REQB","B","LEX*2.0*40",3)

"INIT")
POST^LEX2044P
"MBREQ")
0
"PKG",167,-1)
1^1
"PKG",167,0)
LEXICON UTILITY^LEX^Medical and Biomedical Terminology System.^^^3030115
"PKG",167,20,0)
^9.402P^^
"PKG",167,22,0)
^9.49I^1^1
"PKG",167,22,1,0)
2.0^2950923^2950923^1118
"PKG",167,22,1,"PAH",1,0)
44^3060607^1118
"PKG",167,22,1,"PAH",1,1,0)
^^2^2^3060607
"PKG",167,22,1,"PAH",1,1,1,0)
Please see the National Patch Module for details of the enhancements 
"PKG",167,22,1,"PAH",1,1,2,0)
included in this patch.
"PRE")
LEX2044
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","LEX2044")
0^1^B69344090
"RTN","LEX2044",1,0)
LEX2044 ; ISL/KER - Environment Check/Pre/Post Install ; 05/31/2006
"RTN","LEX2044",2,0)
 ;;2.0;LEXICON UTILITY;**44**;Sep 23, 1996;Build 2
"RTN","LEX2044",3,0)
 ;                     
"RTN","LEX2044",4,0)
 ; External References
"RTN","LEX2044",5,0)
 ;   DBIA 10015  EN^DIQ1
"RTN","LEX2044",6,0)
 ;   DBIA 10141  $$PATCH^XPDUTL
"RTN","LEX2044",7,0)
 ;   DBIA 10141  $$VERSION^XPDUTL
"RTN","LEX2044",8,0)
 ;   DBIA 10141  BMES^XPDUTL
"RTN","LEX2044",9,0)
 ;   DBIA 10141  MES^XPDUTL
"RTN","LEX2044",10,0)
 ;                            
"RTN","LEX2044",11,0)
ENV ; LEX*2.0*44 Environment Check
"RTN","LEX2044",12,0)
 ;
"RTN","LEX2044",13,0)
 W !,"LEX*2.0*44 Environment Check",!
"RTN","LEX2044",14,0)
 W !," ""Adjust Activation and Inactivation Dates for HCPCS Codes""",!
"RTN","LEX2044",15,0)
 ;
"RTN","LEX2044",16,0)
 W !,"  General",!
"RTN","LEX2044",17,0)
 ;
"RTN","LEX2044",18,0)
 N LEXBUILD,LEXIGHF,LEXREQP,LEXLREV,LEXG,LEXE
"RTN","LEX2044",19,0)
 D IMP S U="^"
"RTN","LEX2044",20,0)
 ;     No user
"RTN","LEX2044",21,0)
 D:+($$UR)'>0 ET("User not defined (DUZ)")
"RTN","LEX2044",22,0)
 ;     No IO
"RTN","LEX2044",23,0)
 D:+($$SY)'>0 ET("Undefined IO variable(s)") I $D(LEXE) D ABRT Q
"RTN","LEX2044",24,0)
 ;
"RTN","LEX2044",25,0)
 ;   Load Distribution
"RTN","LEX2044",26,0)
 ;
"RTN","LEX2044",27,0)
 ;     XPDENV = 0 Environment Check during Load
"RTN","LEX2044",28,0)
 ;
"RTN","LEX2044",29,0)
 ;       Check Version (2.0)
"RTN","LEX2044",30,0)
 I $$VERSION^XPDUTL("LEX")'="2.0" D  D ABRT Q
"RTN","LEX2044",31,0)
 . D ET("Version 2.0 not found.  Please install Lexicon Utility v 2.0")
"RTN","LEX2044",32,0)
 ;
"RTN","LEX2044",33,0)
 ;       Check Required Patches
"RTN","LEX2044",34,0)
 D:'$L($G(LEXREQP)) IMP I $L(LEXREQP) D
"RTN","LEX2044",35,0)
 . N LEXPAT,LEXI,LEXPN
"RTN","LEX2044",36,0)
 . F LEXI=1:1 Q:'$L($P(LEXREQP,";",LEXI))  S LEXPAT=$P(LEXREQP,";",LEXI) D
"RTN","LEX2044",37,0)
 . . S LEXPN=$$PATCH^XPDUTL(LEXPAT) W !,"    Checking for ",LEXPAT I +LEXPN>0 H 1 W " - installed"
"RTN","LEX2044",38,0)
 . . I +LEXPN'>0 D ET((LEXPAT_" not found, please install "_LEXPAT_" before continuing"))
"RTN","LEX2044",39,0)
 I $D(LEXE) D ABRT Q
"RTN","LEX2044",40,0)
 S LEXG=$$RGBL
"RTN","LEX2044",41,0)
 I $D(LEXE)&(+LEXG=0) D ABRT Q
"RTN","LEX2044",42,0)
 I $D(LEXE)&(+LEXG<0) D ABRT Q
"RTN","LEX2044",43,0)
 I '$D(LEXFULL)&(+($G(XPDENV))'=1) D QUIT Q
"RTN","LEX2044",44,0)
 ;
"RTN","LEX2044",45,0)
 ;   Install Package(s)
"RTN","LEX2044",46,0)
 ;
"RTN","LEX2044",47,0)
 ;     XPDENV = 1 Environment Check during Install
"RTN","LEX2044",48,0)
 ;
"RTN","LEX2044",49,0)
 ;       Check Data "is installed" or "is translated"
"RTN","LEX2044",50,0)
 ;N LEXIT S LEXIT=+($$CPD) I '$D(LEXFULL)&(LEXIT) D QUIT Q
"RTN","LEX2044",51,0)
 ;       Checking Global "Write" Protection 
"RTN","LEX2044",52,0)
 ;D:+($G(XPDENV))=1 GBLS I $D(LEXE) D ABRT Q
"RTN","LEX2044",53,0)
 ;       Check Import Global Checksum 
"RTN","LEX2044",54,0)
 ;D:+($G(XPDENV))=1 CS I $D(LEXE) D ABRT Q
"RTN","LEX2044",55,0)
 ;
"RTN","LEX2044",56,0)
 ;   Quit, Exit or Abort
"RTN","LEX2044",57,0)
 ;
"RTN","LEX2044",58,0)
QUIT ;     Quit   Passed Environment Check
"RTN","LEX2044",59,0)
 K LEXFULL D OK
"RTN","LEX2044",60,0)
 Q
"RTN","LEX2044",61,0)
EXIT ;     Exit   Failed Environment Check
"RTN","LEX2044",62,0)
 D:$D(LEXE) ED S XPDQUIT=2 K LEXE,LEXFULL Q
"RTN","LEX2044",63,0)
ABRT ;     Abort  Failed Environment Check, KILL the distribution
"RTN","LEX2044",64,0)
 D:$D(LEXE) ED S XPDABORT=1,XPDQUIT=1,XPDQUIT("LEX*2.0*44")=1 K LEXE,LEXFULL
"RTN","LEX2044",65,0)
 Q
"RTN","LEX2044",66,0)
 ;               
"RTN","LEX2044",67,0)
 ; Checks
"RTN","LEX2044",68,0)
 ;
"RTN","LEX2044",69,0)
GBLS ;   Check Write access on globals
"RTN","LEX2044",70,0)
 N LEXE,LEXGBL,LEXRT,LEXT,LEXF,LEXI,LEXX,LEXOK,LEXCPD,LEXS,X S LEXOK=1
"RTN","LEX2044",71,0)
 D BM("   I will now check the protection on ^LEX, ^ICPT, ^ICD and ^DIC Globals.")
"RTN","LEX2044",72,0)
 D M("   If you get an ERROR, you will need to change the protection on these")
"RTN","LEX2044",73,0)
 D M("   globals to allow read/write as indicated:")
"RTN","LEX2044",74,0)
 D BM("                        Owner     Group    World   Network")
"RTN","LEX2044",75,0)
 D M("      Cache systems      RWD       RW       RW      RWD")
"RTN","LEX2044",76,0)
 D BM("   Checking:"),M(" ")
"RTN","LEX2044",77,0)
 S LEXCPD=$$CPD,LEXS="",X=1 F LEXI=1:1 D  Q:'$L(LEXX)
"RTN","LEX2044",78,0)
 . S LEXX="" S LEXE="S LEXX=$T(GD+"_LEXI_")" X LEXE S LEXX=$$TRIM(LEXX) Q:'$L(LEXX)  Q:'$L($TR(LEXX,";",""))
"RTN","LEX2044",79,0)
 . S LEXGBL=$P(LEXX,";",3) Q:+LEXCPD>0&(LEXGBL="^LEXM(0)")  S LEXRT=$P(LEXX,";",4),LEXT=$P(LEXX,";",5),LEXF=$P(LEXX,";",6)
"RTN","LEX2044",80,0)
 . S (LEXB1,LEXB2)="",$P(LEXB1," ",(19-$L(LEXRT)))="",$P(LEXB2," ",(28-$L(LEXT)))=""
"RTN","LEX2044",81,0)
 . I '$D(@LEXGBL) D RGNF S LEXOK=0 D M(("      <"_LEXRT_" not found>")) Q
"RTN","LEX2044",82,0)
 . D M(("      "_LEXRT_LEXB1_LEXT_LEXB2_LEXF)) S @LEXGBL=$G(@LEXGBL) H 1
"RTN","LEX2044",83,0)
 D:LEXOK M("    --> ok") D:'LEXOK M("    ??") D M(" ")
"RTN","LEX2044",84,0)
 Q
"RTN","LEX2044",85,0)
RGBL(X) ;   Check Write access on globals
"RTN","LEX2044",86,0)
 N LEXCPD,LEXS,LEXI,LEXX,LEXEC,LEXGBL,LEXRT,LEXT,LEXF,LEXB1,LEXB2
"RTN","LEX2044",87,0)
 S LEXCPD=$$CPD,LEXS="",X=1 F LEXI=1:1 D  Q:'$L(LEXX)
"RTN","LEX2044",88,0)
 . S LEXX="" S LEXEC="S LEXX=$T(GD+"_LEXI_")" X LEXEC S LEXX=$$TRIM(LEXX) Q:'$L(LEXX)  Q:'$L($TR(LEXX,";",""))
"RTN","LEX2044",89,0)
 . S LEXGBL=$P(LEXX,";",3) Q:+LEXCPD>0&(LEXGBL="^LEXM(0)")  S LEXRT=$P(LEXX,";",4),LEXT=$P(LEXX,";",5),LEXF=$P(LEXX,";",6)
"RTN","LEX2044",90,0)
 . S (LEXB1,LEXB2)="",$P(LEXB1," ",(15-$L(LEXRT)))="",$P(LEXB2," ",(28-$L(LEXT)))=""
"RTN","LEX2044",91,0)
 . I '$D(@LEXGBL) S:LEXS'[LEXRT LEXS=LEXS_", "_LEXRT S X=-1 S:LEXGBL["LEXM("&(X=1) X=0
"RTN","LEX2044",92,0)
 I $L(LEXS),X'>0 D
"RTN","LEX2044",93,0)
 . S:LEXS[", " LEXS=$P(LEXS,", ",1,($L(LEXS,", ")-1))_" and "_$P(LEXS,", ",$L(LEXS,", "))
"RTN","LEX2044",94,0)
 . S:$E(LEXS,1,2)=", " LEXS=$E(LEXS,3,$L(LEXS)) S:$E(LEXS,1,7)[" and " LEXS=$P(LEXS," and ",2)
"RTN","LEX2044",95,0)
 . D:X=-1 ET(("Global"_$S(LEXS[", "!(LEXS[" and "):"s",1:"")_" "_LEXS_" either not found or incomplete."))
"RTN","LEX2044",96,0)
 . D:X=0 CM
"RTN","LEX2044",97,0)
 Q X
"RTN","LEX2044",98,0)
RGNF ;   Required global not found
"RTN","LEX2044",99,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF D IMP
"RTN","LEX2044",100,0)
 D:$G(LEXGL)["^LEX"&($G(LEXGL)'["^LEXM") ET(""),ET("Required global "_$P($G(LEXGL),"(",1)_" not found.")
"RTN","LEX2044",101,0)
 D:$G(LEXGL)["^LEX"&($G(LEXGL)["^LEXM") CM
"RTN","LEX2044",102,0)
 Q
"RTN","LEX2044",103,0)
CHK ;   Check the Checksum
"RTN","LEX2044",104,0)
 D CS I $D(LEXE) D ED Q
"RTN","LEX2044",105,0)
 D BM("  OK"),M(" ")
"RTN","LEX2044",106,0)
 Q
"RTN","LEX2044",107,0)
CS ;   Checksum for import global
"RTN","LEX2044",108,0)
 K LEXE
"RTN","LEX2044",109,0)
 D BM("   Running checksum routine on the ^LEXM import global, please wait")
"RTN","LEX2044",110,0)
 N LEXCHK,LEXNDS,LEXVER S LEXCHK=+($G(^LEXM(0,"CHECKSUM")))
"RTN","LEX2044",111,0)
 S LEXNDS=+($G(^LEXM(0,"NODES"))),LEXVER=+($$VC(LEXCHK,LEXNDS))
"RTN","LEX2044",112,0)
 D M(" ") D:LEXVER>0 M("     Checksum is ok"),M(" ")
"RTN","LEX2044",113,0)
 D:LEXVER=0 CM D:LEXVER=-1 CW D:LEXVER=-2 CU D:LEXVER=-3 CF
"RTN","LEX2044",114,0)
 Q
"RTN","LEX2044",115,0)
VC(X,Y) ;   Verify Checksum for import global
"RTN","LEX2044",116,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF Q:'$D(^LEXM) 0
"RTN","LEX2044",117,0)
 D IMP I $G(^LEXM(0,"BUILD"))'=$G(LEXBUILD) Q -1
"RTN","LEX2044",118,0)
 N LEXCHK,LEXNDS,LEXCNT,LEXLC,LEXL,LEXS,LEXNC,LEXD,LEXN,LEXC,LEXGCS,LEXP,LEXT
"RTN","LEX2044",119,0)
 S LEXCHK=+($G(X)),LEXNDS=+($G(Y))
"RTN","LEX2044",120,0)
 Q:LEXCHK'>0!(LEXNDS'>0) -2
"RTN","LEX2044",121,0)
 S LEXL=64,(LEXCNT,LEXLC)=0,LEXS=(+(LEXNDS\LEXL))
"RTN","LEX2044",122,0)
 S:LEXS=0 LEXS=1 D:+($O(^LEXM(0)))>0 M("")
"RTN","LEX2044",123,0)
 S (LEXC,LEXN)="^LEXM",(LEXNC,LEXGCS)=0 W "   "
"RTN","LEX2044",124,0)
 F  S LEXN=$Q(@LEXN) Q:LEXN=""!(LEXN'[LEXC)  D
"RTN","LEX2044",125,0)
 . Q:LEXN="^LEXM(0,""CHECKSUM"")"
"RTN","LEX2044",126,0)
 . Q:LEXN="^LEXM(0,""NODES"")"
"RTN","LEX2044",127,0)
 . S LEXCNT=LEXCNT+1
"RTN","LEX2044",128,0)
 . I LEXCNT'<LEXS S LEXLC=LEXLC+1 W:LEXLC'>LEXL "." S LEXCNT=0
"RTN","LEX2044",129,0)
 . S LEXNC=LEXNC+1,LEXD=@LEXN,LEXT=LEXN_"="_LEXD
"RTN","LEX2044",130,0)
 . F LEXP=1:1:$L(LEXT) S LEXGCS=$A(LEXT,LEXP)*LEXP+LEXGCS
"RTN","LEX2044",131,0)
 Q:LEXNC'=LEXNDS -3
"RTN","LEX2044",132,0)
 Q:LEXGCS'=LEXCHK -3
"RTN","LEX2044",133,0)
 Q 1
"RTN","LEX2044",134,0)
SY(X) ;   Check System variables
"RTN","LEX2044",135,0)
 Q:'$D(IO)!('$D(IOF))!('$D(IOM))!('$D(ION))!('$D(IOSL))!('$D(IOST)) 0
"RTN","LEX2044",136,0)
 Q 1
"RTN","LEX2044",137,0)
UR(X) ;   Check User variables
"RTN","LEX2044",138,0)
 Q:'$L($G(DUZ(0))) 0
"RTN","LEX2044",139,0)
 Q:+($G(DUZ))=0!($$NOTDEF(+$G(DUZ))) 0
"RTN","LEX2044",140,0)
 Q 1
"RTN","LEX2044",141,0)
CPD(X) ;  Check Current Patched Data is installed
"RTN","LEX2044",142,0)
 Q 0
"RTN","LEX2044",143,0)
 ;
"RTN","LEX2044",144,0)
 ; Error messages
"RTN","LEX2044",145,0)
 ;
"RTN","LEX2044",146,0)
CM ;   Missing ^LEXM
"RTN","LEX2044",147,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF D IMP D ET(""),ET("Missing import global ^LEXM.") D CO
"RTN","LEX2044",148,0)
 Q
"RTN","LEX2044",149,0)
CW ;   Wrong ^LEXM
"RTN","LEX2044",150,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF,LEXB D IMP S LEXB=$G(^LEXM(0,"BUILD")) D ET("")
"RTN","LEX2044",151,0)
 I $L(LEXBUILD),$L(LEXB),LEXBUILD'=LEXB D  Q
"RTN","LEX2044",152,0)
 . D ET(("Incorrect import global ^LEXM found ("_LEXB_" global).")) D CKO
"RTN","LEX2044",153,0)
 D ET("Incorrect import global ^LEXM found.") D CKO
"RTN","LEX2044",154,0)
 Q
"RTN","LEX2044",155,0)
CU ;   Unable to verify
"RTN","LEX2044",156,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF D IMP D ET(""),ET("Unable to verify checksum for import global ^LEXM (possibly corrupt).") D CKO
"RTN","LEX2044",157,0)
 Q
"RTN","LEX2044",158,0)
CF ;   Failed checksum
"RTN","LEX2044",159,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF D IMP D ET("") D ET("Import global ^LEXM failed checksum.") D CKO
"RTN","LEX2044",160,0)
 Q
"RTN","LEX2044",161,0)
CO ;   Obtain new global
"RTN","LEX2044",162,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF D IMP
"RTN","LEX2044",163,0)
 D ET(""),ET("    Please obtain a copy of the import global ^LEXM contained in the ")
"RTN","LEX2044",164,0)
 D ET(("    global host file "_LEXIGHF_" before continuing with the "_LEXBUILD))
"RTN","LEX2044",165,0)
 D ET(("    installation."))
"RTN","LEX2044",166,0)
 Q
"RTN","LEX2044",167,0)
CKO ;   Kill and Obtain new global
"RTN","LEX2044",168,0)
 N LEXLREV,LEXREQP,LEXBUILD,LEXIGHF D IMP
"RTN","LEX2044",169,0)
 D ET(""),ET("    Please KILL the existing import global ^LEXM from your system")
"RTN","LEX2044",170,0)
 D ET(("    and obtain a new copy of ^LEXM contained in the global host file"))
"RTN","LEX2044",171,0)
 D ET(("    "_LEXIGHF_" before continuing with the "_LEXBUILD_" installation."))
"RTN","LEX2044",172,0)
 Q
"RTN","LEX2044",173,0)
ET(X) ;   Error Text
"RTN","LEX2044",174,0)
 N LEXI S LEXI=+($G(LEXE(0))),LEXI=LEXI+1,LEXE(LEXI)="    "_$G(X),LEXE(0)=LEXI
"RTN","LEX2044",175,0)
 Q
"RTN","LEX2044",176,0)
ED ;   Error Display
"RTN","LEX2044",177,0)
 N LEXI S LEXI=0 F  S LEXI=$O(LEXE(LEXI)) Q:+LEXI=0  D M(LEXE(LEXI))
"RTN","LEX2044",178,0)
 D M(" ") K LEXE Q
"RTN","LEX2044",179,0)
 ;                   
"RTN","LEX2044",180,0)
 ; Miscellaneous
"RTN","LEX2044",181,0)
 ;
"RTN","LEX2044",182,0)
IMP ;   Import names
"RTN","LEX2044",183,0)
 S LEXLREV=44,LEXREQP="LEX*2.0*38;LEX*2.0*39;LEX*2.0*40",LEXBUILD="LEX*2.0*44"
"RTN","LEX2044",184,0)
 Q
"RTN","LEX2044",185,0)
NOTDEF(IEN) ;   Check to see if user is defined
"RTN","LEX2044",186,0)
 N DA,DR,DIQ,LEX,DIC S DA=IEN,DR=.01,DIC=200,DIQ="LEX" D EN^DIQ1 Q '$D(LEX)
"RTN","LEX2044",187,0)
OK ;   Environment is OK
"RTN","LEX2044",188,0)
 N LEXBUILD,LEXIGHF,LEXREQP,LEXLREV,LEXT
"RTN","LEX2044",189,0)
 D IMP S LEXT="  Environment "_$S($L(LEXBUILD):("for patch/build "_LEXBUILD_" "),1:"")_"is ok"
"RTN","LEX2044",190,0)
 D BM(LEXT),M(" ")
"RTN","LEX2044",191,0)
 Q
"RTN","LEX2044",192,0)
BM(X) ;   Blank Line with Message
"RTN","LEX2044",193,0)
 D BMES^XPDUTL($G(X)) Q
"RTN","LEX2044",194,0)
M(X) ;   Message
"RTN","LEX2044",195,0)
 D MES^XPDUTL($G(X)) Q
"RTN","LEX2044",196,0)
TRIM(X) ;   Trim Spaces
"RTN","LEX2044",197,0)
 S X=$G(X) F  Q:$E(X,1)'=" "  S X=$E(X,2,$L(X))
"RTN","LEX2044",198,0)
 F  Q:$E(X,$L(X))'=" "  S X=$E(X,1,($L(X)-1))
"RTN","LEX2044",199,0)
 Q X
"RTN","LEX2044",200,0)
 ; Exported Files
"RTN","LEX2044",201,0)
 ;;^LEX(757.01);^LEX(*;Lexicon;757-757.41
"RTN","LEX2044",202,0)
 ;;^LEXT(757.2);^LEXT(757.2);Lexicon Subsets/Defaults;757.2
"RTN","LEX2044",203,0)
 ;;^LEXC(757.9);^LEXC(*;Lexicon Change File;757.9-757.91
"RTN","LEX2044",204,0)
 ;;^LEXM(0);^LEXM(*;Lexicon Export/Import;No File #
"RTN","LEX2044",205,0)
 ;;^ICPT(0);^ICPT(;CPT/HCPCS;81
"RTN","LEX2044",206,0)
 ;;^DIC(81.1,0);^DIC(81.1);CPT Category;81.1
"RTN","LEX2044",207,0)
 ;;^DIC(81.2,0);^DIC(81.2);CPT Copyright;81.2
"RTN","LEX2044",208,0)
 ;;^DIC(81.3,0);^DIC(81.3);CPT Modifier;81.3
"RTN","LEX2044",209,0)
 ;;^ICD9(0);^ICD9(;ICD Diagnosis;80
"RTN","LEX2044",210,0)
 ;;^ICD0(0);^ICD0(;ICD Operation/Procedure;80.1
"RTN","LEX2044",211,0)
 ;;^ICD(0);^ICD(;DRG Grouper;80.2
"RTN","LEX2044",212,0)
 ;;^ICM(0);^ICM(;MAJOR DIAGNOSTIC CATEGORY;80.3
"RTN","LEX2044",213,0)
 ;;^ICD9(0);^ICD9(;ICD Diagnosis;80
"RTN","LEX2044",214,0)
 ;;^DIC(81.3,0);^DIC(81.3);CPT Modifier;81.3
"RTN","LEX2044",215,0)
 ;;^LEX(757.01);^LEX(*;Lexicon;757-757.41
"RTN","LEX2044",216,0)
 ;;^ICPT(0);^ICPT(;CPT/HCPCS;81
"RTN","LEX2044",217,0)
 Q
"RTN","LEX2044",218,0)
GD ; Global Data
"RTN","LEX2044P")
0^2^B46860814
"RTN","LEX2044P",1,0)
LEX2044P ; ISL/KER - Pre/Post Install LEX*2.0*44 ; 05/31/2006
"RTN","LEX2044P",2,0)
 ;;2.0;LEXICON UTILITY;**44**;Sep 23, 1996;Build 2
"RTN","LEX2044P",3,0)
 ;
"RTN","LEX2044P",4,0)
POST ; Main Entry for LEX*2.0*44
"RTN","LEX2044P",5,0)
 D MES^XPDUTL(" ") D C1,C2,C3,C4,MES^XPDUTL(" ")
"RTN","LEX2044P",6,0)
 Q
"RTN","LEX2044P",7,0)
 ;
"RTN","LEX2044P",8,0)
C1 ; Change #1 - Adjust Activation from 03/15/2006 to 01/01/2006
"RTN","LEX2044P",9,0)
 D DL(" Adjust Activation for 82 HCPCS codes to 01/01/2006")
"RTN","LEX2044P",10,0)
 N CODE
"RTN","LEX2044P",11,0)
 F CODE="G8054","G9050","G9051","G9052","G9053","G9054","G9055","G9056","G9057","G9058","G9059" D U1(CODE)
"RTN","LEX2044P",12,0)
 F CODE="G9060","G9061","G9062","G9063","G9064","G9065","G9066","G9067","G9068","G9069","G9070" D U1(CODE)
"RTN","LEX2044P",13,0)
 F CODE="G9071","G9072","G9073","G9074","G9075","G9076","G9077","G9078","G9079","G9080","G9081" D U1(CODE)
"RTN","LEX2044P",14,0)
 F CODE="G9082","G9083","G9084","G9085","G9086","G9087","G9088","G9089","G9090","G9091","G9092" D U1(CODE)
"RTN","LEX2044P",15,0)
 F CODE="G9093","G9094","G9095","G9096","G9097","G9098","G9099","G9100","G9101","G9102","G9103" D U1(CODE)
"RTN","LEX2044P",16,0)
 F CODE="G9104","G9105","G9106","G9107","G9108","G9109","G9110","G9111","G9112","G9113","G9114" D U1(CODE)
"RTN","LEX2044P",17,0)
 F CODE="G9115","G9116","G9117","G9118","G9119","G9120","G9121","G9122","G9123","G9124","G9125" D U1(CODE)
"RTN","LEX2044P",18,0)
 F CODE="G9126","G9127","G9128","G9129","G9130" D U1(CODE)
"RTN","LEX2044P",19,0)
 Q
"RTN","LEX2044P",20,0)
U1(CODE) ; Update #1 - Adjust Activation from 03/15/2006 to 01/01/2006
"RTN","LEX2044P",21,0)
 N LEXDA,DA,ND,OD,IENS,FDA,SIEN,IENR,MSG
"RTN","LEX2044P",22,0)
 S CODE=$G(CODE) Q:'$L(CODE)  S OD=3060315,ND=3060101
"RTN","LEX2044P",23,0)
 K IENS,FDA S (SIEN,LEXDA,DA)=$$CODEN^ICPTCOD(CODE) Q:+DA'>0  S IENS=$$IENS^DILF(.LEXDA)
"RTN","LEX2044P",24,0)
 S FDA(81,IENS,8)=ND K IENR,MSG D UPDATE^DIE("","FDA","IENR","MSG") S (LEXDA(1),DA(1))=DA
"RTN","LEX2044P",25,0)
 K IENS,FDA S (LEXDA,DA)=$O(^ICPT(+DA(1),60,"B",OD,0)) I DA(1)>0,+DA>0 D
"RTN","LEX2044P",26,0)
 . S IENS=$$IENS^DILF(.LEXDA),FDA(81.02,IENS,.01)=ND K IENR,MSG
"RTN","LEX2044P",27,0)
 . D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2044P",28,0)
 K IENS,FDA S (LEXDA,DA)=$O(^ICPT(+DA(1),61,"B",OD,0)) I DA(1)>0,+DA>0 D
"RTN","LEX2044P",29,0)
 . S IENS=$$IENS^DILF(.LEXDA),FDA(81.061,IENS,.01)=ND K IENR,MSG
"RTN","LEX2044P",30,0)
 . D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2044P",31,0)
 K IENS,FDA S (LEXDA,DA)=$O(^ICPT(+DA(1),62,"B",OD,0)) I DA(1)>0,+DA>0 D
"RTN","LEX2044P",32,0)
 . S IENS=$$IENS^DILF(.LEXDA),FDA(81.062,IENS,.01)=ND K IENR,MSG
"RTN","LEX2044P",33,0)
 . D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2044P",34,0)
 D N0D(SIEN) K LEXDA,DA
"RTN","LEX2044P",35,0)
 K IENS,FDA S SIEN=0  F  S SIEN=$O(^LEX(757.02,"CODE",(CODE_" "),SIEN))  Q:+SIEN'>0  D
"RTN","LEX2044P",36,0)
 . S (LEXDA(1),DA(1))=SIEN  S DA=0 F  S DA=$O(^LEX(757.02,DA(1),4,"B",OD,DA)) Q:+DA'>0  D
"RTN","LEX2044P",37,0)
 . . K IENS,FDA S LEXDA=DA,IENS=$$IENS^DILF(.LEXDA),FDA(757.28,IENS,.01)=ND
"RTN","LEX2044P",38,0)
 . . K IENR,MSG D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2044P",39,0)
 Q
"RTN","LEX2044P",40,0)
 ;            
"RTN","LEX2044P",41,0)
C2 ; Change #2 - Inactivate 93 HCPC Codes
"RTN","LEX2044P",42,0)
 D DL(" Inactivate 90 HCPCS Codes as of 04/02/2006")
"RTN","LEX2044P",43,0)
 N CODE
"RTN","LEX2044P",44,0)
 F CODE="C9117","C9118","C9124","C9125","C9204","C9213","C9214","C9215","C9216","C9217","C9219" D U2(CODE)
"RTN","LEX2044P",45,0)
 F CODE="C9226","C9412","C9712","C9714","C9715","C9717","E1019","E1021","K0548","K0549","K0550" D U2(CODE)
"RTN","LEX2044P",46,0)
 F CODE="K0560","K0561","K0562","K0563","K0564","K0565","K0566","K0567","K0568","K0569","K0570" D U2(CODE)
"RTN","LEX2044P",47,0)
 F CODE="K0571","K0572","K0573","K0574","K0575","K0576","K0577","K0578","K0579","K0580","K0610" D U2(CODE)
"RTN","LEX2044P",48,0)
 F CODE="K0611","K0612","K0613","K0614","K0615","K0616","K0617","K0621","K0622","K0623","K0624" D U2(CODE)
"RTN","LEX2044P",49,0)
 F CODE="K0625","K0626","K0627","K0650","K0651","K0652","K0653","K0654","K0655","K0656","K0657" D U2(CODE)
"RTN","LEX2044P",50,0)
 F CODE="K0658","K0659","K0660","K0661","K0662","K0663","K0664","K0665","K0666","K0667","K0668" D U2(CODE)
"RTN","LEX2044P",51,0)
 F CODE="Q3030","Q4052","Q4053","Q4078","S0112","S0163","S0165","S0193","S2131","S2255","S8002" D U2(CODE)
"RTN","LEX2044P",52,0)
 F CODE="S8003","S8470" D U2(CODE)
"RTN","LEX2044P",53,0)
 Q
"RTN","LEX2044P",54,0)
U2(CODE) ; Update #2 - Inactivate 93 HCPC Codes
"RTN","LEX2044P",55,0)
 N LEXDA,DA,ND,OD,IENS,FDA,SIEN,LIEN,IENR,MSG,LAYGO S LAYGO=""
"RTN","LEX2044P",56,0)
 S CODE=$G(CODE) Q:'$L(CODE)  S OD=3060401,ND=3060402
"RTN","LEX2044P",57,0)
 S (LEXDA,DA,SIEN)=$$CODEN^ICPTCOD(CODE) I +DA>0 D
"RTN","LEX2044P",58,0)
 . S (LEXDA(1),DA(1))=DA,(LEXDA,DA)=+($O(^ICPT(+DA(1),60,"B",OD,0)))+1 S:DA=1 (LEXDA,DA)=$O(^ICPT(+DA(1),60," "),-1)+1
"RTN","LEX2044P",59,0)
 . S IENS=$$IENS^DILF(.LEXDA),IENS="+"_IENS
"RTN","LEX2044P",60,0)
 . N FDA S FDA(81.02,IENS,.01)=ND,FDA(81.02,IENS,.02)=0
"RTN","LEX2044P",61,0)
 . K IENR,MSG D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2044P",62,0)
 D N0D(SIEN) K LEXDA,DA
"RTN","LEX2044P",63,0)
 S SIEN=0 F  S SIEN=$O(^LEX(757.02,"CODE",(CODE_" "),SIEN)) Q:+SIEN'>0  D
"RTN","LEX2044P",64,0)
 . S LIEN=$O(^LEX(757.02,SIEN,4," "),-1)
"RTN","LEX2044P",65,0)
 . I $G(^LEX(757.02,SIEN,4,LIEN,0))=(OD_"^1") D
"RTN","LEX2044P",66,0)
 . . S (LEXDA(1),DA(1))=SIEN,(LEXDA,DA)=LIEN+1,IENS=$$IENS^DILF(.LEXDA),IENS="+"_IENS
"RTN","LEX2044P",67,0)
 . . N FDA S FDA(757.28,IENS,.01)=ND,FDA(757.28,IENS,1)=0
"RTN","LEX2044P",68,0)
 . . K IENR,MSG D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2044P",69,0)
 Q
"RTN","LEX2044P",70,0)
 ;               
"RTN","LEX2044P",71,0)
C3 ; Change #3 - Adjust Activation from 04/03/2006 to 01/01/2001
"RTN","LEX2044P",72,0)
 D DL(" Adjust Activation for 3 HCPCS codes to 01/01/2001")
"RTN","LEX2044P",73,0)
 N CODE F CODE="S0190","S0191","S0199" D U3(CODE)
"RTN","LEX2044P",74,0)
 Q
"RTN","LEX2044P",75,0)
U3(CODE) ; Update #3 - Adjust Activation from 04/03/2006 to 01/01/2001
"RTN","LEX2044P",76,0)
 N LEXDA,DA,ND,OD,IENS,FDA,SIEN,IENR,MSG S CODE=$G(CODE) Q:'$L(CODE)  S OD=3060401,ND=3010101
"RTN","LEX2044P",77,0)
 K IENS,FDA S (SIEN,LEXDA,DA)=$$CODEN^ICPTCOD(CODE) Q:+DA'>0  S (LEXDA(1),DA(1))=DA
"RTN","LEX2044P",78,0)
 K IENS,FDA S (LEXDA,DA)=$O(^ICPT(+DA(1),60,"B",OD,0)) I DA(1)>0,+DA>0 D
"RTN","LEX2044P",79,0)
 . S IENS=$$IENS^DILF(.LEXDA),FDA(81.02,IENS,.01)=ND K IENR,MSG S:+IENS>0 IENS="+"_IENS
"RTN","LEX2044P",80,0)
 . D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2044P",81,0)
 K IENS,FDA S (LEXDA,DA)=$O(^ICPT(+DA(1),61,"B",OD,0)) I DA(1)>0,+DA>0 D
"RTN","LEX2044P",82,0)
 . S IENS=$$IENS^DILF(.LEXDA),FDA(81.061,IENS,.01)=ND K IENR,MSG S:+IENS>0 IENS="+"_IENS
"RTN","LEX2044P",83,0)
 . D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2044P",84,0)
 K IENS,FDA S (LEXDA,DA)=$O(^ICPT(+DA(1),62,"B",OD,0)) I DA(1)>0,+DA>0 D
"RTN","LEX2044P",85,0)
 . S IENS=$$IENS^DILF(.LEXDA),FDA(81.062,IENS,.01)=ND K IENR,MSG S:+IENS>0 IENS="+"_IENS
"RTN","LEX2044P",86,0)
 . D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2044P",87,0)
 D N0D(SIEN) K LEXDA,DA
"RTN","LEX2044P",88,0)
 K IENS,FDA S SIEN=0  F  S SIEN=$O(^LEX(757.02,"CODE",(CODE_" "),SIEN))  Q:+SIEN'>0  D
"RTN","LEX2044P",89,0)
 . S (LEXDA(1),DA(1))=SIEN  S DA=0 F  S DA=$O(^LEX(757.02,DA(1),4,"B",OD,DA)) Q:+DA'>0  D
"RTN","LEX2044P",90,0)
 . . K IENS,FDA S LEXDA=DA,IENS=$$IENS^DILF(.LEXDA),FDA(757.28,IENS,.01)=ND K IENR,MSG S:+IENS>0 IENS="+"_IENS
"RTN","LEX2044P",91,0)
 . . D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2044P",92,0)
 K LEXDA,DA S (LEXDA,DA)=$$CODEN^ICPTCOD(CODE) Q:+DA'>0  S IENS=$$IENS^DILF(.LEXDA) S FDA(81,IENS,8)=ND K IENR,MSG
"RTN","LEX2044P",93,0)
 D UPDATE^DIE("","FDA","IENR","MSG")
"RTN","LEX2044P",94,0)
 Q
"RTN","LEX2044P",95,0)
 ;                             
"RTN","LEX2044P",96,0)
C4 ; Change #4 - Reactivate 4 codes 01/02/2006
"RTN","LEX2044P",97,0)
 D DL(" Reactivate 4 HCPCS Codes on 01/02/2006")
"RTN","LEX2044P",98,0)
 N CODE F CODE="E1239","G0252","J7317","J7320" D U4(CODE)
"RTN","LEX2044P",99,0)
 Q
"RTN","LEX2044P",100,0)
U4(CODE) ; Update #4 - Reactivate 4 codes 01/02/2006
"RTN","LEX2044P",101,0)
 N LEXDA,DA,ND,OD,RD,RT,IENS,FDA,SIEN,LIEN,IENR,MSG,LAYGO S LAYGO=""
"RTN","LEX2044P",102,0)
 S CODE=$G(CODE) Q:'$L(CODE)  S OD=3050101,ND=3060102
"RTN","LEX2044P",103,0)
 S (LEXDA,DA,SIEN)=$$CODEN^ICPTCOD(CODE) I +DA>0 D
"RTN","LEX2044P",104,0)
 . N RD,OD,SD,ID,ND,NS S (SD,ID)=""
"RTN","LEX2044P",105,0)
 . S RD=" " F  S RD=$O(^ICPT(SIEN,60,"B",RD),-1) Q:+RD'>0  D  Q:$L(SD)
"RTN","LEX2044P",106,0)
 . . N RI S RI=1 F  S RI=$O(^ICPT(SIEN,60,"B",RD,RI)) Q:+RI'>0  D  Q:$L(SD)
"RTN","LEX2044P",107,0)
 . . . S ND=$G(^ICPT(SIEN,60,RI,0)),NS=$P(ND,"^",2),ND=$P(ND,"^",1)
"RTN","LEX2044P",108,0)
 . . . S:+NS'>0 SD=ND
"RTN","LEX2044P",109,0)
 . I +SD>0 S RI=0 F  S RI=$O(^ICPT(SIEN,60,RI)) Q:+RI'>0  D
"RTN","LEX2044P",110,0)
 . . S ND=$P($G(^ICPT(SIEN,60,RI,0)),"^",1)
"RTN","LEX2044P",111,0)
 . . I ND=SD!(ND>SD) D
"RTN","LEX2044P",112,0)
 . . . N DA,DIK S DA(1)=SIEN,DA=RI,DIK="^ICPT("_DA(1)_",60,"
"RTN","LEX2044P",113,0)
 . . . D ^DIK
"RTN","LEX2044P",114,0)
 . D N0D(SIEN)
"RTN","LEX2044P",115,0)
 S SIEN=0 F  S SIEN=$O(^LEX(757.02,"CODE",(CODE_" "),SIEN)) Q:+SIEN'>0  D
"RTN","LEX2044P",116,0)
 . N RD,OD,SD,ID,ND,NS S (SD,ID)=""
"RTN","LEX2044P",117,0)
 . S RD=" " F  S RD=$O(^LEX(757.02,+SIEN,4,"B",RD),-1) Q:+RD'>0  D  Q:$L(SD)
"RTN","LEX2044P",118,0)
 . . N RI S RI=1 F  S RI=$O(^LEX(757.02,+SIEN,4,"B",RD,RI)) Q:+RI'>0  D  Q:$L(SD)
"RTN","LEX2044P",119,0)
 . . . S ND=$G(^LEX(757.02,+SIEN,4,RI,0)),NS=$P(ND,"^",2),ND=$P(ND,"^",1)
"RTN","LEX2044P",120,0)
 . . . S:+NS'>0 SD=ND
"RTN","LEX2044P",121,0)
 . I +SD>0 S RI=0 F  S RI=$O(^LEX(757.02,+SIEN,4,RI)) Q:+RI'>0  D
"RTN","LEX2044P",122,0)
 . . S ND=$P($G(^LEX(757.02,+SIEN,4,RI,0)),"^",1)
"RTN","LEX2044P",123,0)
 . . I ND=SD!(ND>SD) D
"RTN","LEX2044P",124,0)
 . . . N DA,DIK S DA(1)=SIEN,DA=RI,DIK="^LEX(757.02,"_DA(1)_",4,"
"RTN","LEX2044P",125,0)
 . . . D ^DIK
"RTN","LEX2044P",126,0)
 Q
"RTN","LEX2044P",127,0)
N0D(X) ; Node 0 Date
"RTN","LEX2044P",128,0)
 N IEN,DA,DIK,EFF,EFI,STA
"RTN","LEX2044P",129,0)
 S IEN=$G(X),EFF=$O(^ICPT(+IEN,60,"B"," "),-1) Q:+EFF'>0  Q:EFF'?7N  S EFI=$O(^ICPT(+IEN,60,"B",EFF,0)) Q:+EFI'>0
"RTN","LEX2044P",130,0)
 S STA=$G(^ICPT(+IEN,60,EFI,0)),EFF=$P(STA,"^",1),STA=$P(STA,"^",2) Q:EFF'?7N  Q:STA'?1N
"RTN","LEX2044P",131,0)
 S $P(^ICPT(+IEN,0),"^",7)="",$P(^ICPT(+IEN,0),"^",8)=""
"RTN","LEX2044P",132,0)
 S:+STA=0 $P(^ICPT(+IEN,0),"^",7)=EFF S:+STA=1 $P(^ICPT(+IEN,0),"^",8)=EFF
"RTN","LEX2044P",133,0)
 I EFI>1,STA=0 F  S EFI=$O(^ICPT(+IEN,60,EFI),-1) Q:+EFI'>0  Q:$P($G(^ICPT(+IEN,60,+EFI,0)),"^",2)=1
"RTN","LEX2044P",134,0)
 I EFI>0 S EFF=$P($G(^ICPT(+IEN,60,EFI,0)),"^",1) S:EFF?7N $P(^ICPT(+IEN,0),"^",8)=EFF
"RTN","LEX2044P",135,0)
 Q
"RTN","LEX2044P",136,0)
 ;                           
"RTN","LEX2044P",137,0)
DL(X,I) ; Display Line
"RTN","LEX2044P",138,0)
 S X=$G(X),I=+($G(I)) S:+I'>0 I=1 N SP S SP=$J(" ",I) S X=SP_X D MES^XPDUTL(X)
"RTN","LEX2044P",139,0)
 Q
"RTN","LEX2044P",140,0)
SC(X) ; Show CPT
"RTN","LEX2044P",141,0)
 N IEN,NN,NC S IEN=+($G(X)) Q:IEN'>0  S NN="^ICPT("_IEN_")",NC="^ICPT("_IEN_","
"RTN","LEX2044P",142,0)
 F  S NN=$Q(@NN) Q:NN=""!(NN'[NC)  W !,NN,"=",@NN
"RTN","LEX2044P",143,0)
 Q
"RTN","LEX2044P",144,0)
SL(X) ; Show LEX
"RTN","LEX2044P",145,0)
 N IEN,NN,NC S IEN=+($G(X)) Q:IEN'>0  S NN="^LEX(757.02,"_IEN_")",NC="^LEX(757.02,"_IEN_","
"RTN","LEX2044P",146,0)
 F  S NN=$Q(@NN) Q:NN=""!(NN'[NC)  W !,NN,"=",@NN
"RTN","LEX2044P",147,0)
 Q
"VER")
8.0^22.0
"BLD",6167,6)
^40
**END**
**END**

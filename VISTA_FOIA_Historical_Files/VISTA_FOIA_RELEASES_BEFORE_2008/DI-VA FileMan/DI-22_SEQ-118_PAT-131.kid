Released DI*22*131 SEQ #118
Extracted from mail message
**KIDS**:DI*22.0*131^

**INSTALL NAME**
DI*22.0*131
"BLD",509,0)
DI*22.0*131^VA FILEMAN^0^3030929^y
"BLD",509,1,0)
^^2^2^3030929^
"BLD",509,1,1,0)
See patch DI*22*131 in the National Patch Module on FORUM for complete
"BLD",509,1,2,0)
information on this patch.
"BLD",509,4,0)
^9.64PA^^
"BLD",509,"KRN",0)
^9.67PA^8989.52^19
"BLD",509,"KRN",.4,0)
.4
"BLD",509,"KRN",.401,0)
.401
"BLD",509,"KRN",.402,0)
.402
"BLD",509,"KRN",.403,0)
.403
"BLD",509,"KRN",.5,0)
.5
"BLD",509,"KRN",.84,0)
.84
"BLD",509,"KRN",3.6,0)
3.6
"BLD",509,"KRN",3.8,0)
3.8
"BLD",509,"KRN",9.2,0)
9.2
"BLD",509,"KRN",9.8,0)
9.8
"BLD",509,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",509,"KRN",9.8,"NM",1,0)
DIDH1^^0^B18710612
"BLD",509,"KRN",9.8,"NM","B","DIDH1",1)

"BLD",509,"KRN",19,0)
19
"BLD",509,"KRN",19.1,0)
19.1
"BLD",509,"KRN",101,0)
101
"BLD",509,"KRN",409.61,0)
409.61
"BLD",509,"KRN",771,0)
771
"BLD",509,"KRN",870,0)
870
"BLD",509,"KRN",8989.51,0)
8989.51
"BLD",509,"KRN",8989.52,0)
8989.52
"BLD",509,"KRN",8994,0)
8994
"BLD",509,"KRN","B",.4,.4)

"BLD",509,"KRN","B",.401,.401)

"BLD",509,"KRN","B",.402,.402)

"BLD",509,"KRN","B",.403,.403)

"BLD",509,"KRN","B",.5,.5)

"BLD",509,"KRN","B",.84,.84)

"BLD",509,"KRN","B",3.6,3.6)

"BLD",509,"KRN","B",3.8,3.8)

"BLD",509,"KRN","B",9.2,9.2)

"BLD",509,"KRN","B",9.8,9.8)

"BLD",509,"KRN","B",19,19)

"BLD",509,"KRN","B",19.1,19.1)

"BLD",509,"KRN","B",101,101)

"BLD",509,"KRN","B",409.61,409.61)

"BLD",509,"KRN","B",771,771)

"BLD",509,"KRN","B",870,870)

"BLD",509,"KRN","B",8989.51,8989.51)

"BLD",509,"KRN","B",8989.52,8989.52)

"BLD",509,"KRN","B",8994,8994)

"BLD",509,"QUES",0)
^9.62^^
"BLD",509,"REQB",0)
^9.611^1^1
"BLD",509,"REQB",1,0)
DI*22.0*105^2
"BLD",509,"REQB","B","DI*22.0*105",1)

"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
VA FILEMAN^DI^FM INIT
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
22.0^2990330^3030110^41
"PKG",5,22,1,"PAH",1,0)
131^3030929
"PKG",5,22,1,"PAH",1,1,0)
^^2^2^3030929
"PKG",5,22,1,"PAH",1,1,1,0)
See patch DI*22*131 in the National Patch Module on FORUM for complete
"PKG",5,22,1,"PAH",1,1,2,0)
information on this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","DIDH1")
0^1^B18710612
"RTN","DIDH1",1,0)
DIDH1 ;SFISC-HDR FOR DD LISTS ;7:34 AM  29 Sep 2003
"RTN","DIDH1",2,0)
 ;;22.0;VA FileMan;**76,105,131**;Mar 30, 1999
"RTN","DIDH1",3,0)
 ;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","DIDH1",4,0)
 N DIDHI,DIDHJ,W D  ;*131*
"RTN","DIDH1",5,0)
 .N I,J D IJ^DIUTL(DFF) M DIDHJ=J,DIDHI=I S DIDHJ=$O(J(""),-1)
"RTN","DIDH1",6,0)
 S M=1 I DC=1 S (F(1),DA)=DFF,Z=1
"RTN","DIDH1",7,0)
 E  I $Y,IOST?1"C".E W $C(7) R M:DTIME I M=U!'$T K DIOEND S M=U,DN=0 Q
"RTN","DIDH1",8,0)
 S M1=$S($G(^DD(F(1),0,"VR"))]"":" (VERSION "_$P(^("VR"),U)_")   ",1:"") I IOST?1"C".E S DIFF=1
"RTN","DIDH1",9,0)
 W:$D(DIFF)&($Y) @IOF S DIFF=1 W $S(DHIT["DIDX":"BRIEF",DHIT["DIDG":"GLOBAL MAP",$D(DINM):"MODIFIED",1:"STANDARD")
"RTN","DIDH1",10,0)
 W " DATA DICTIONARY #"_DFF_" -- "_$O(^DD(DFF,0,"NM",0))_" "_$S(DIDHJ:"SUB-",1:"")_"FILE   "
"RTN","DIDH1",11,0)
 S DIC=^DIC(DUB,0,"GL") D
"RTN","DIDH1",12,0)
 .N X,Y
"RTN","DIDH1",13,0)
 .X ^DD("FUNC",24,1) S Y=X X ^DD("DD")
"RTN","DIDH1",14,0)
 .S W=Y_"  PAGE "_DC W:$L(W)+$X+2>IOM ! W ?(IOM-$L(W)-1),W
"RTN","DIDH1",15,0)
 S M=IOM\2,S=" ",W="" I $D(^DD("SITE")) S W="SITE: "_^("SITE")_"   "
"RTN","DIDH1",16,0)
 I $D(^%ZOSF("UCI"))#2 X ^("UCI") S W=W_"UCI: "_Y
"RTN","DIDH1",17,0)
 W ! I DHIT["DIDX" W W,?(IOM-$L(M1)-1),M1 S W="",$P(W,"-",IOM)="" W !,W S W="" G Q^DIDH
"RTN","DIDH1",18,0)
 W "STORED IN ",DIC F I=1:1 Q:'$D(DIDHI(I))  W "D",I-1,",",DIDHI(I),","
"RTN","DIDH1",19,0)
 I 'DIDHJ D
"RTN","DIDH1",20,0)
 .I $O(@(DIC_"0)"))'>0 W "  *** NO DATA STORED YET ***" Q
"RTN","DIDH1",21,0)
 .S I=$P(^(0),U,4) W:I "  ("_I_" ENTR"_$S(I=1:"Y)",1:"IES)")
"RTN","DIDH1",22,0)
 W "   ",W,?(IOM-$L(M1)-1),M1 D:DHIT'["DIDG"
"RTN","DIDH1",23,0)
 .W !!,"DATA",?14,"NAME",?36,"GLOBAL",?50,"DATA",!,"ELEMENT",?14,"TITLE",?36,"LOCATION",?50,"TYPE"
"RTN","DIDH1",24,0)
G W ! F I=1:1:IOM-1 W "-"
"RTN","DIDH1",25,0)
 S W="" Q:DC>1!$G(DIDRANGE)
"RTN","DIDH1",26,0)
PAGE1 I 'DIDHJ,'$$WP^DIUTL($NA(^DIC(DA,"%D"))) S M="^" Q
"RTN","DIDH1",27,0)
 I DIDHJ D  I M=U Q
"RTN","DIDH1",28,0)
 .S W=DIDHJ(DIDHJ-1),W=$NA(^DD(W,+$O(^DD(W,"SB",DFF,"")))) I '$$WP^DIUTL($NA(@W@(21))) S M=U Q
"RTN","DIDH1",29,0)
 .I $D(@W@(23)) W !,"TECHNICAL DESCRIPTION:",! I '$$WP^DIUTL($NA(@W@(23))) S M=U
"RTN","DIDH1",30,0)
 .F I=8,9 I $D(@W@(I)) W !,?15,$P("READ^WRITE",U,I-7)," ACCESS: ",^(I)
"RTN","DIDH1",31,0)
 I DHIT["DIDG" D  Q
"RTN","DIDH1",32,0)
 . D XR^DIDH Q:M=U
"RTN","DIDH1",33,0)
 . N DIDPG S DIDPG("H")="W """" D H^DIDH S:M=U PAGE(U)=1"
"RTN","DIDH1",34,0)
 . D LIST^DIKCP(DA,"","C15",.DIDPG) Q:M=U
"RTN","DIDH1",35,0)
 . D WRLN^DIKCP1("",0,.DIDPG)
"RTN","DIDH1",36,0)
 Q:DHIT["DIDX"!(M=U)  W !
"RTN","DIDH1",37,0)
 F %=1:1:4 S X=$P("SCR^DIC^ACT^DIK",U,%) I $G(^DD(DA,0,X))]"" W !,$P("FILE SCREEN (SCR-node) ^SPECIAL LOOKUP ROUTINE ^POST-SELECTION ACTION  ^COMPILED CROSS-REFERENCE ROUTINE",U,%)_": " S W=^(X) D W^DIDH G Q:M=U
"RTN","DIDH1",38,0)
 W:$P($G(^DD(DA,0,"DI")),U)["Y" !,"THIS IS AN ARCHIVE FILE."
"RTN","DIDH1",39,0)
 W:$P($G(^DD(DA,0,"DI")),U,2)["Y" !,"EDITING OF FILE IS NOT ALLOWED."
"RTN","DIDH1",40,0)
 F N="DD","RD","WR","DEL","LAYGO","AUDIT" I $D(^DIC(DA,0,N)) W !?(Z+Z+14-$L(N)),N," ACCESS: ",^(N)
"RTN","DIDH1",41,0)
 I $D(^VA(200,"AFOF")) W !!?8,"(NOTE: Kernel's File Access Security has been installed in this UCI.)",!
"RTN","DIDH1",42,0)
 I $O(^DD(DA,0,"ID",""))]"" W !,"IDENTIFIED BY: "
"RTN","DIDH1",43,0)
 S X=0 F  S X=$O(^DD(DA,0,"ID",X)) Q:X=""  Q:'$D(^DD(DA,X,0))  S I1=$P(^(0),U)_" (#"_X_")"_$S($P(^(0),U,2)["R":"[R]",1:"") W:($L(I1)+$X)+1>IOM ! W ?15,I1 I $O(^DD(DA,0,"ID",X)) W ", "
"RTN","DIDH1",44,0)
 S:X="" X=-1
"RTN","DIDH1",45,0)
 ;
"RTN","DIDH1",46,0)
 ;Print "WRITE" identifiers
"RTN","DIDH1",47,0)
 I '$D(DINM) S X=" " F  S X=$O(^DD(DA,0,"ID",X)) Q:X=""  D  Q:M=U
"RTN","DIDH1",48,0)
 . N DIDLN,DIDPG
"RTN","DIDH1",49,0)
 . S DIDLN(1)=$G(^DD(DA,0,"ID",X)) Q:DIDLN(1)?."^"
"RTN","DIDH1",50,0)
 . S DIDLN(0)=""""_X_""": "
"RTN","DIDH1",51,0)
 . S DIDLN(0)=$J("",15-$L(DIDLN(0)))_DIDLN(0)
"RTN","DIDH1",52,0)
 . S DIDPG("H")="W """" D H^DIDH S:M=U PAGE(U)=1"
"RTN","DIDH1",53,0)
 . D WRPHI^DIKCP1(.DIDLN,IOM-16,0,15,1,.DIDPG)
"RTN","DIDH1",54,0)
 Q:M=U
"RTN","DIDH1",55,0)
 ;
"RTN","DIDH1",56,0)
 I $D(^DD("KEY","B",DA)) D
"RTN","DIDH1",57,0)
 . N DIDPG
"RTN","DIDH1",58,0)
 . S DIDPG("H")="W """" D H^DIDH S:M=U PAGE(U)=1"
"RTN","DIDH1",59,0)
 . D PRINT^DIKKP(DA,"","C20",.DIDPG)
"RTN","DIDH1",60,0)
 D POINT^DIDH Q:M=U  D TRIG^DIDH,XR^DIDH Q:M=U
"RTN","DIDH1",61,0)
 I $D(^DD("IX","B",DA)) D  Q:M=U  W !
"RTN","DIDH1",62,0)
 . N DIDPG
"RTN","DIDH1",63,0)
 . S DIDPG("H")="W """" D H^DIDH S:M=U PAGE(U)=1"
"RTN","DIDH1",64,0)
 . D LIST^DIKCP(DA,"","C15",.DIDPG)
"RTN","DIDH1",65,0)
 S N=$G(^DIC(DA,"%A")),Y=$P(N,U,2) I Y X ^DD("DD") W !!?3,"CREATED ON: "_Y I $S($D(^VA(200,0)):1,1:$D(^DIC(3,0))),^(0)["NEW PERSON"!(^(0)["USER")!(^(0)["EMPLOY"),$D(^(+N,0)) W " by "_$P(^(0),U)
"RTN","DIDH1",66,0)
Q Q
"RTN","DIDH1",67,0)
W W:$X+$L(W)+3>IOM !,?$S(IOM-$L(W)-5<M:IOM-5-$L(W),1:M),S S %Y=$E(W,IOM-$X,999) W $E(W,1,IOM-$X-1),S Q:%Y=""  S W=%Y G W
"RTN","DIDH1",68,0)
 Q
"RTN","DIDH1",69,0)
WR ;
"RTN","DIDH1",70,0)
 S W="TRIGGERED by the "_$P(^(0),U)_" field"
"RTN","DIDH1",71,0)
UP1 S W=W_" of the "_$O(^DD(%,0,"NM",0))
"RTN","DIDH1",72,0)
 I $D(^DD(%,0,"UP")) S %=^("UP") S W=W_" sub-field" G UP1
"RTN","DIDH1",73,0)
 S W=W_" File"
"RTN","DIDH1",74,0)
W1 S DDV1="" W ?DDL2 F K=1:1 S DDV=$P(W," ",K)_" ",DDV1=DDV1_DDV W:$L(DDV)+$X>IOM !?DDL2 W DDV Q:$L(DDV1)>$L(W)
"RTN","DIDH1",75,0)
 I $Y+6>IOSL S DC=DC+1 D DIDH1
"RTN","DIDH1",76,0)
 K DDV,DDV1 Q
"RTN","DIDH1",77,0)
DE ;
"RTN","DIDH1",78,0)
 W !?DDL1,$P("DESCRIPTION:^TECHNICAL DESCR:",U,%Y=23+1)
"RTN","DIDH1",79,0)
 I '$$WP^DIUTL($NA(^DD(F(Z),DJ(Z),%Y)),DDL2+1) S M="^"
"RTN","DIDH1",80,0)
 Q
"VER")
8^22.0
**END**
**END**

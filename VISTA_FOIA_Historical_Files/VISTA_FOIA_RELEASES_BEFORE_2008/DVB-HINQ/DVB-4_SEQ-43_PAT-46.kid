Released DVB*4*46 SEQ #43
Extracted from mail message
**KIDS**:DVB*4.0*46^

**INSTALL NAME**
DVB*4.0*46
"BLD",4749,0)
DVB*4.0*46^HINQ^0^3030605^y
"BLD",4749,1,0)
^^2^2^3030605^
"BLD",4749,1,1,0)
Upgrading to Cache 4.1.x created a problem when the I/O device is not 
"BLD",4749,1,2,0)
defined.
"BLD",4749,4,0)
^9.64PA^^
"BLD",4749,"ABPKG")
n
"BLD",4749,"KRN",0)
^9.67PA^8989.52^19
"BLD",4749,"KRN",.4,0)
.4
"BLD",4749,"KRN",.401,0)
.401
"BLD",4749,"KRN",.402,0)
.402
"BLD",4749,"KRN",.403,0)
.403
"BLD",4749,"KRN",.5,0)
.5
"BLD",4749,"KRN",.84,0)
.84
"BLD",4749,"KRN",3.6,0)
3.6
"BLD",4749,"KRN",3.8,0)
3.8
"BLD",4749,"KRN",9.2,0)
9.2
"BLD",4749,"KRN",9.8,0)
9.8
"BLD",4749,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",4749,"KRN",9.8,"NM",1,0)
DVBHQD1^^0^B22992944
"BLD",4749,"KRN",9.8,"NM","B","DVBHQD1",1)

"BLD",4749,"KRN",19,0)
19
"BLD",4749,"KRN",19.1,0)
19.1
"BLD",4749,"KRN",101,0)
101
"BLD",4749,"KRN",409.61,0)
409.61
"BLD",4749,"KRN",771,0)
771
"BLD",4749,"KRN",870,0)
870
"BLD",4749,"KRN",8989.51,0)
8989.51
"BLD",4749,"KRN",8989.52,0)
8989.52
"BLD",4749,"KRN",8994,0)
8994
"BLD",4749,"KRN","B",.4,.4)

"BLD",4749,"KRN","B",.401,.401)

"BLD",4749,"KRN","B",.402,.402)

"BLD",4749,"KRN","B",.403,.403)

"BLD",4749,"KRN","B",.5,.5)

"BLD",4749,"KRN","B",.84,.84)

"BLD",4749,"KRN","B",3.6,3.6)

"BLD",4749,"KRN","B",3.8,3.8)

"BLD",4749,"KRN","B",9.2,9.2)

"BLD",4749,"KRN","B",9.8,9.8)

"BLD",4749,"KRN","B",19,19)

"BLD",4749,"KRN","B",19.1,19.1)

"BLD",4749,"KRN","B",101,101)

"BLD",4749,"KRN","B",409.61,409.61)

"BLD",4749,"KRN","B",771,771)

"BLD",4749,"KRN","B",870,870)

"BLD",4749,"KRN","B",8989.51,8989.51)

"BLD",4749,"KRN","B",8989.52,8989.52)

"BLD",4749,"KRN","B",8994,8994)

"BLD",4749,"QUES",0)
^9.62^^
"BLD",4749,"REQB",0)
^9.611^1^1
"BLD",4749,"REQB",1,0)
DVB*4.0*40^1
"BLD",4749,"REQB","B","DVB*4.0*40",1)

"MBREQ")
0
"PKG",119,-1)
1^1
"PKG",119,0)
HINQ^DVB^HINQ(Hospital Inquiry)
"PKG",119,20,0)
^9.402P^^
"PKG",119,22,0)
^9.49I^1^1
"PKG",119,22,1,0)
4.0^2930615^2920421
"PKG",119,22,1,"PAH",1,0)
46^3030605
"PKG",119,22,1,"PAH",1,1,0)
^^2^2^3030605
"PKG",119,22,1,"PAH",1,1,1,0)
Upgrading to Cache 4.1.x created a problem when the I/O device is not 
"PKG",119,22,1,"PAH",1,1,2,0)
defined.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","DVBHQD1")
0^1^B22992944
"RTN","DVBHQD1",1,0)
DVBHQD1 ;ISC-ALBANY/PKE- HINQ receiver ; 11/5/87  14:01 ; [ 09/23/94  11:58 AM ]
"RTN","DVBHQD1",2,0)
 ;;4.0;HINQ;**3,12,16,22,23,32,34,40,46**; 03/25/92 
"RTN","DVBHQD1",3,0)
 ;
"RTN","DVBHQD1",4,0)
 S:'$D(DTIME) DTIME=300 S DVBTIME=DTIME
"RTN","DVBHQD1",5,0)
EN S:$G(IO(0))="" IO(0)=$I S (C,DVBTSK,DVBABORT)=0,DVBXM=1,DTIME=30 U IO(0)
"RTN","DVBHQD1",6,0)
 ;
"RTN","DVBHQD1",7,0)
SEL S (DVBRTC,DVBTRY)=1,DVBNRT="Y"
"RTN","DVBHQD1",8,0)
 R !!," Select Input: (P)atient File, or (D)irect  P//",X:DTIME I '$T!(X["^") G HINQ
"RTN","DVBHQD1",9,0)
 I "Pp"[$E(X) S DVBPRGM="TM^DVBHIQD" G ASK
"RTN","DVBHQD1",10,0)
 I "Dd"[$E(X_1) S DVBPRGM="EN^DVBHQDE" G ASK
"RTN","DVBHQD1",11,0)
 I X["?" D HP^DVBHQAT G SEL
"RTN","DVBHQD1",12,0)
 G SEL
"RTN","DVBHQD1",13,0)
ASK S:$G(IO(0))="" IO(0)=$I W ! S Y=0,DVBIO=IO D @DVBPRGM
"RTN","DVBHQD1",14,0)
ASK1 I Y'<0,$D(DVBP),$L(DVBP)=4 S IO=DVBIO D STUFF^DVBHQAT:$D(DFN),MES
"RTN","DVBHQD1",15,0)
 I $D(DVBMISS) K DVBMISS D:DVBTRY>3 RETRY^DVBHQD2 G:DVBNRT="N" LOAD2^DVBHQD2 I DVBTRY<4&(DVBRTC<4) S DVBTRY=DVBTRY+1 U IO(0) W ?35,"Retrying Request." G ASK1
"RTN","DVBHQD1",16,0)
 S IO=DVBIO U IO(0) K DVBP S DVBABORT=0
"RTN","DVBHQD1",17,0)
 I '$D(Y) G ASK
"RTN","DVBHQD1",18,0)
 I Y>0 G ASK
"RTN","DVBHQD1",19,0)
 ;
"RTN","DVBHQD1",20,0)
HINQ U IO(0) W !!,"Do you wish to continue " S %=2 D YN^DICN G:'% HINQ I %=1 W ! G EN
"RTN","DVBHQD1",21,0)
EX S DTIME=$S($D(DVBTIME):DVBTIME,1:300)
"RTN","DVBHQD1",22,0)
 Q
"RTN","DVBHQD1",23,0)
MES ;
"RTN","DVBHQD1",24,0)
 S:$G(IO(0))="" IO(0)=$I S E=$L(DVBZ) I '$D(DVBDXX),($E(DVBZ,E-7,E-4)'=DVBNUM) S DVBZ=$E(DVBZ,1,E-4)_DVBNUM_$E(DVBZ,E-3,999)
"RTN","DVBHQD1",25,0)
 K E H 1 S DVBEND="NNNN" S:'$D(DVBXM) DVBXM=0 S:'$D(C) C=0
"RTN","DVBHQD1",26,0)
 ;
"RTN","DVBHQD1",27,0)
TOTIMS S TRY=0,CN=$F(DVBZ,"/CN",24),DVBZ0=DVBZ
"RTN","DVBHQD1",28,0)
 I $S('$D(DFN):1,DFN:0,1:1) S CN=0 D SEND^DVBHQD2,KTO^DVBHQD2 Q
"RTN","DVBHQD1",29,0)
 I 'CN D CNLKUP^DVBHQAT
"RTN","DVBHQD1",30,0)
 DO  D SEND^DVBHQD2 I TRY DO  I TRY H 1 D SEND^DVBHQD2
"RTN","DVBHQD1",31,0)
 .I CN,'TRY S DVBZ0=$E(DVBZ,1,23)_$E(DVBZ,24,CN-3)_$E(DVBZ,CN+9,999) Q
"RTN","DVBHQD1",32,0)
 .I CN,TRY S DVBZ1=$E(DVBZ,1,23)_$E(DVBZ,CN-2,999) Q
"RTN","DVBHQD1",33,0)
 .I 'CN S DVBZ0=DVBZ,TRY=0 Q
"RTN","DVBHQD1",34,0)
 I $D(DVBMISS)&($D(DVBPRGM)) I (DVBPRGM["TM") K DVBMISS D:DVBTRY>3 RETRY^DVBHQD2 G:DVBNRT="N" LOAD^DVBHQD2 I DVBTRY<4&(DVBRTC<4) S DVBTRY=DVBTRY+1 U IO(0) W ?35,"Retrying Request." G MES
"RTN","DVBHQD1",35,0)
 G KTO^DVBHQD2
"RTN","DVBHQD1",36,0)
 ;
"RTN","DVBHQD1",37,0)
 ;z1 is first x(),z9 is last x()
"RTN","DVBHQD1",38,0)
OK ;I 'DVBTSK DO
"RTN","DVBHQD1",39,0)
 ;. U IO(0) W !!?3 S Z1=0 F  S Z1=$O(X(Z1)) Q:'Z1  S LX=$G(LX)+$L(X(Z1)) W Z1," ",$L(X(Z1)),"   "
"RTN","DVBHQD1",40,0)
 ;. W !?9,LX,! K LX H 3 U IO
"RTN","DVBHQD1",41,0)
 S:$G(IO(0))="" IO(0)=$I S Z1=$O(X(0)) F  Q:$E(X(Z1))'=$C(10)  S X(Z1)=$E(X(Z1),2,999)
"RTN","DVBHQD1",42,0)
 I $G(X(Z1))["HINQ" S X(Z1)="HINQ"_$P(X(Z1),"HINQ",2)
"RTN","DVBHQD1",43,0)
 E  K X(Z1) DO
"RTN","DVBHQD1",44,0)
 . S Z1=$O(X(0)) I Z1="" S Z1=0,X(0)=""
"RTN","DVBHQD1",45,0)
 . I $G(X(Z1))["HINQ" S X(Z1)="HINQ"_$P(X(Z1),"HINQ",2)
"RTN","DVBHQD1",46,0)
 I $L(X(Z1))>25 S DVBLEN=+$E(X(Z1),22,25)
"RTN","DVBHQD1",47,0)
 E  I $D(X(Z1+1)) DO
"RTN","DVBHQD1",48,0)
 . S DVBLEN=+$E($E(X(Z1),1,99)_$E(X(Z1+1),1,30),22,25)
"RTN","DVBHQD1",49,0)
 I '$D(DVBLEN) S DVBABORT=DVBABORT+1 U IO(0) W:'DVBTSK !,"Missing string" U IO Q
"RTN","DVBHQD1",50,0)
 ;
"RTN","DVBHQD1",51,0)
 I $D(F3) S DVBLEN=DVBLEN-F3 K F3
"RTN","DVBHQD1",52,0)
 I "456789ABCDUVWNMXY"'[$E(X(Z1),5) S DVBLEN=DVBLEN-2
"RTN","DVBHQD1",53,0)
 ;
"RTN","DVBHQD1",54,0)
 S (Z,Z9,F2)=0 F  S Z=$O(X(Z)) Q:'Z  S Z9=Z,F2=F2+$L(X(Z))
"RTN","DVBHQD1",55,0)
 ;
"RTN","DVBHQD1",56,0)
 I DVBLEN'=F2,X(Z9)[$C(10) S DVBABORT=DVBABORT+1 U IO(0) W:'DVBTSK !,"Missing character" S DVBMISS="" Q
"RTN","DVBHQD1",57,0)
 ;
"RTN","DVBHQD1",58,0)
 I DVBLEN'=F2-1,X(Z9)'[$C(10),$S('$D(X(Z9-1)):1,1:$S(X(Z9-1)'[$C(10):1,1:0)) S DVBABORT=DVBABORT+1 U IO(0) W:'DVBTSK !,"Missing character" S DVBMISS="" Q
"RTN","DVBHQD1",59,0)
 ;trim,e will pack back to x(1)
"RTN","DVBHQD1",60,0)
 I Z9 S:$D(X) DVBSOX=X D TRIM,E^DVBHQAT S:$D(DVBSOX) X=DVBSOX K DVBSOX I $E(X(1),1,4)["HINQ","AXY69"'[$E($E(X(1),5)_1) D ALLM Q
"RTN","DVBHQD1",61,0)
 ;
"RTN","DVBHQD1",62,0)
 S DVBABORT=DVBABORT+1 Q:$E(X(1),1,4)'="HINQ"
"RTN","DVBHQD1",63,0)
 I $E(X(1),5)="A" U IO(0) W:'DVBTSK !,"VBA File not Available" U IO H 2 D ALL QUIT
"RTN","DVBHQD1",64,0)
 ;
"RTN","DVBHQD1",65,0)
 I DVBTSK,"69XY"[$E($E(X(1),5)_1) S DVBBADP="" D ALL QUIT
"RTN","DVBHQD1",66,0)
 I 'Z9 Q
"RTN","DVBHQD1",67,0)
 ;
"RTN","DVBHQD1",68,0)
ALL I 'DVBXM,$D(DFN),+DFN K:C ^TMP("DVBHINQ",$J,DFN) S Z=0 F  S Z=$O(X(Z)) Q:'Z  S ^TMP("DVBHINQ",$J,DFN,Z)=X(Z)
"RTN","DVBHQD1",69,0)
 E  I DVBXM D RS,RECMAL^DVBHQD2,A^DVBHIQR,IALERT^DVBHT2,EN^DVBHIQM H 1 D WRT K DVBTX Q
"RTN","DVBHQD1",70,0)
 I DVBABORT=3!($D(DVBBADP)) S DFN=0
"RTN","DVBHQD1",71,0)
 Q
"RTN","DVBHQD1",72,0)
 ; do all if no error or retrying
"RTN","DVBHQD1",73,0)
ALLM I "BC"'[$E($E(X(1),5)_1) D ALL Q
"RTN","DVBHQD1",74,0)
 I CN,'TRY S TRY=1 D:DVBXM DCN Q
"RTN","DVBHQD1",75,0)
 I 'CN D ALL Q
"RTN","DVBHQD1",76,0)
 S X(1)=X(1)_"[TRY]1" D ALL Q
"RTN","DVBHQD1",77,0)
 ;
"RTN","DVBHQD1",78,0)
DCN S:$G(IO(0))="" IO(0)=$I U IO(0) W !,"..Name, SSN didn't work ....retrying using Claim Number",! U IO Q
"RTN","DVBHQD1",79,0)
 ;
"RTN","DVBHQD1",80,0)
RS Q:'$D(DFN)  Q:'DFN  Q:'$D(^DVB(395.5,DFN,0))  S DVBDFN=DFN,DVBCS=0
"RTN","DVBHQD1",81,0)
 F DVBSZ=0:0 S DVBSZ=$O(X(DVBSZ)) D SC^DVBHQST Q:'DVBSZ  D ST^DVBHQDB
"RTN","DVBHQD1",82,0)
 K DVBSZ,DVBDFN Q
"RTN","DVBHQD1",83,0)
 ;
"RTN","DVBHQD1",84,0)
TRIM Q:F1=999
"RTN","DVBHQD1",85,0)
 I '$D(F1) S F1=$F(X(Z9),DVBEND)
"RTN","DVBHQD1",86,0)
 I $E(X(Z9),F1-F4)=$C(10) S F1=F1-1
"RTN","DVBHQD1",87,0)
 S X(Z9)=$E(X(Z9),1,F1-F4)
"RTN","DVBHQD1",88,0)
 K F1 Q
"RTN","DVBHQD1",89,0)
 ;
"RTN","DVBHQD1",90,0)
WRT S:$G(IO(0))="" IO(0)=$I S DVBJIO=IO(0)
"RTN","DVBHQD1",91,0)
WRT1 S:$G(DVBJIO)="" DVBJIO=$I S:'$D(DVBIOSL) DVBIOSL=IOSL S:'$D(DVBIOST) DVBIOST=IOST S:'$D(DVBIOF) DVBIOF=IOF
"RTN","DVBHQD1",92,0)
 S X="" U DVBJIO W !!! D CODE^DVBHQUS W !! S Y0=$Y F Z=0:0 S Z=$O(^TMP($J,Z)) Q:'Z  I $D(^(Z,0)) W ^(0),! D:$Y-Y0>(DVBIOSL-4) SROLL^DVBHQD2 Q:X="^"  D:$Y<Y0 ABS^DVBHQD2
"RTN","DVBHQD1",93,0)
 Q:X="^"  K DVBJIO D SROLL^DVBHQD2 Q
"RTN","DVBHQD1",94,0)
 ;
"RTN","DVBHQD1",95,0)
CH S F1=0
"RTN","DVBHQD1",96,0)
 I X(W)=$C(10)_"NNNN" K X(W) S F1=999 Q
"RTN","DVBHQD1",97,0)
 I $L(X(W))>4!($L(X(W))<1) Q
"RTN","DVBHQD1",98,0)
 F A=$L(X(W)):-1:1 Q:$E(X(W),A)'="N"
"RTN","DVBHQD1",99,0)
 I A=1,$E(X(W),A)="N" S F1=$L(X(W-1))+1,F3=$L(X(W)),F4=5-$L(X(W)) K X(W)
"RTN","DVBHQD1",100,0)
 Q
"VER")
8.0^22
**END**
**END**

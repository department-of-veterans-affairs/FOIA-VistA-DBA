Released RMPR*3*105 SEQ #84
Extracted from mail message
**KIDS**:RMPR*3.0*105^

**INSTALL NAME**
RMPR*3.0*105
"BLD",5610,0)
RMPR*3.0*105^PROSTHETICS^0^3050623^y
"BLD",5610,1,0)
^^3^3^3050623^^^
"BLD",5610,1,1,0)
This patch will address two issues;
"BLD",5610,1,2,0)
  1. Problem accessing the 2319 correspondence letter prompt.
"BLD",5610,1,3,0)
  2. The use of the % variable in 3 routines.
"BLD",5610,4,0)
^9.64PA^^
"BLD",5610,"ABPKG")
n
"BLD",5610,"KRN",0)
^9.67PA^8989.52^19
"BLD",5610,"KRN",.4,0)
.4
"BLD",5610,"KRN",.4,"NM",0)
^9.68A^^
"BLD",5610,"KRN",.401,0)
.401
"BLD",5610,"KRN",.402,0)
.402
"BLD",5610,"KRN",.403,0)
.403
"BLD",5610,"KRN",.5,0)
.5
"BLD",5610,"KRN",.84,0)
.84
"BLD",5610,"KRN",3.6,0)
3.6
"BLD",5610,"KRN",3.8,0)
3.8
"BLD",5610,"KRN",9.2,0)
9.2
"BLD",5610,"KRN",9.8,0)
9.8
"BLD",5610,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",5610,"KRN",9.8,"NM",1,0)
RMPRFO^^0^B11136896
"BLD",5610,"KRN",9.8,"NM",2,0)
RMPRFO1^^0^B17393061
"BLD",5610,"KRN",9.8,"NM",3,0)
RMPRFO2^^0^B22825483
"BLD",5610,"KRN",9.8,"NM",4,0)
RMPRPRT^^0^B32430363
"BLD",5610,"KRN",9.8,"NM","B","RMPRFO",1)

"BLD",5610,"KRN",9.8,"NM","B","RMPRFO1",2)

"BLD",5610,"KRN",9.8,"NM","B","RMPRFO2",3)

"BLD",5610,"KRN",9.8,"NM","B","RMPRPRT",4)

"BLD",5610,"KRN",19,0)
19
"BLD",5610,"KRN",19.1,0)
19.1
"BLD",5610,"KRN",101,0)
101
"BLD",5610,"KRN",409.61,0)
409.61
"BLD",5610,"KRN",771,0)
771
"BLD",5610,"KRN",870,0)
870
"BLD",5610,"KRN",8989.51,0)
8989.51
"BLD",5610,"KRN",8989.52,0)
8989.52
"BLD",5610,"KRN",8994,0)
8994
"BLD",5610,"KRN","B",.4,.4)

"BLD",5610,"KRN","B",.401,.401)

"BLD",5610,"KRN","B",.402,.402)

"BLD",5610,"KRN","B",.403,.403)

"BLD",5610,"KRN","B",.5,.5)

"BLD",5610,"KRN","B",.84,.84)

"BLD",5610,"KRN","B",3.6,3.6)

"BLD",5610,"KRN","B",3.8,3.8)

"BLD",5610,"KRN","B",9.2,9.2)

"BLD",5610,"KRN","B",9.8,9.8)

"BLD",5610,"KRN","B",19,19)

"BLD",5610,"KRN","B",19.1,19.1)

"BLD",5610,"KRN","B",101,101)

"BLD",5610,"KRN","B",409.61,409.61)

"BLD",5610,"KRN","B",771,771)

"BLD",5610,"KRN","B",870,870)

"BLD",5610,"KRN","B",8989.51,8989.51)

"BLD",5610,"KRN","B",8989.52,8989.52)

"BLD",5610,"KRN","B",8994,8994)

"BLD",5610,"QUES",0)
^9.62^^
"BLD",5610,"REQB",0)
^9.611^5^1
"BLD",5610,"REQB",5,0)
RMPR*3.0*82^2
"BLD",5610,"REQB","B","RMPR*3.0*82",5)

"MBREQ")
0
"PKG",101,-1)
1^1
"PKG",101,0)
PROSTHETICS^RMPR^PROSTHETICS VERSION 3.0 ALPHA
"PKG",101,20,0)
^9.402P^^0
"PKG",101,22,0)
^9.49I^1^1
"PKG",101,22,1,0)
3.0^2960209^2960214
"PKG",101,22,1,"PAH",1,0)
105^3050623
"PKG",101,22,1,"PAH",1,1,0)
^^3^3^3050623
"PKG",101,22,1,"PAH",1,1,1,0)
This patch will address two issues;
"PKG",101,22,1,"PAH",1,1,2,0)
  1. Problem accessing the 2319 correspondence letter prompt.
"PKG",101,22,1,"PAH",1,1,3,0)
  2. The use of the % variable in 3 routines.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","RMPRFO")
0^1^B11136896
"RTN","RMPRFO",1,0)
RMPRFO ;PHX/RFM,HPL-DRIVER FOR PROSTHETIC LETTERS ; 1/5/04 1:41pm
"RTN","RMPRFO",2,0)
 ;;3.0;PROSTHETICS;**55,77,82,105**;Feb 09, 1996
"RTN","RMPRFO",3,0)
 ;
"RTN","RMPRFO",4,0)
 ; ODJ - patch 55 - 1/29/01 - replace hard code 121 mail symbol with
"RTN","RMPRFO",5,0)
 ;                            call to extrinsic to read site param.
"RTN","RMPRFO",6,0)
 ;                            nois AUG-1097-32118
"RTN","RMPRFO",7,0)
 ;RVD patch #77 - remove link to suspense
"RTN","RMPRFO",8,0)
 ;KAM patch #82 - remove SSN from Patient Correspondence print
"RTN","RMPRFO",9,0)
 N RMPRAA68 K ^TMP($J,1),^TMP($J,"RMPR") D HOME^%ZIS S RMPRIN=0
"RTN","RMPRFO",10,0)
 K RMPRFF,DFN
"RTN","RMPRFO",11,0)
 S RMPRDEL="S RMPRGO=$S($D(^RMPR(665.4,RMPRIN,0)):""DEL^RMPRFO1"",1:""EXIT^RMPRFO1"") G @RMPRGO"
"RTN","RMPRFO",12,0)
 I '$D(RMPRFF)!($G(DFN)="") D DIV4^RMPRSIT G:$D(X) EXIT^RMPRFO1 S DIC="^DPT(",DIC(0)="AEMQ",DIC("A")="Select PATIENT: "
"RTN","RMPRFO",13,0)
 I $D(RMPRFF)&($G(DFN)>0) S DIC="^DPT(",DIC(0)="N"
"RTN","RMPRFO",14,0)
 D ^DIC G:Y<0 EXIT^RMPRFO1
"RTN","RMPRFO",15,0)
 K DIC S DFN=+Y
"RTN","RMPRFO",16,0)
CUM K ^TMP($J,1),^TMP($J,"RMPR")
"RTN","RMPRFO",17,0)
 S Y=DT D DD^%DT S NAME=Y D TRANS^RMPRUTL1 S RMPRDATE=RMPRNAME
"RTN","RMPRFO",18,0)
 S DIC="^RMPR(665.2,",DIC(0)="AEMQ",DIC("A")="Select FORM LETTER TYPE: " D ^DIC G:Y<0 EXIT^RMPRFO1
"RTN","RMPRFO",19,0)
 K DIC S RMPRFA=+Y
"RTN","RMPRFO",20,0)
 S RMPRTY=$P(Y,U,2)
"RTN","RMPRFO",21,0)
 I $P(^RMPR(665.2,RMPRFA,0),U,3) D VEN^RMPRFO3 D EXIT^RMPRFO1 Q
"RTN","RMPRFO",22,0)
 D DEM^VADPT,ADD^VADPT
"RTN","RMPRFO",23,0)
 F RI=1:1:17 S ^TMP($J,1,RI,0)=" "
"RTN","RMPRFO",24,0)
HEAD1 S %=1 W !,"Would you like a header on this letter" D YN^DICN S RMPRAA68=% G:RMPRAA68<0 EXIT^RMPRFO1
"RTN","RMPRFO",25,0)
 I RMPRAA68=0 W !,"Answer `YES` for a header, `NO` for no header" G HEAD1
"RTN","RMPRFO",26,0)
 W @IOF I RMPRAA68=2 S RMPRHED=1 G HEADER
"RTN","RMPRFO",27,0)
 S ^TMP($J,1,1,0)="|SETTAB(""C"")|"
"RTN","RMPRFO",28,0)
 S ^TMP($J,1,2,0)="|TAB|Department of Veterans Affairs"
"RTN","RMPRFO",29,0)
 S NAME=$P(^RMPR(669.9,RMPRSITE,2),U,4) I NAME]"" S NAME=$S($D(^DIC(5,NAME)):$P(^DIC(5,NAME,0),U),1:"STATE") W $$PARS^RMPRUTL1(NAME)
"RTN","RMPRFO",30,0)
 S ^TMP($J,1,3,0)="|TAB|"_$P(^RMPR(669.9,RMPRSITE,0),U)
"RTN","RMPRFO",31,0)
 S ^TMP($J,1,4,0)="|TAB|"_$P(^RMPR(669.9,RMPRSITE,2),U,2)
"RTN","RMPRFO",32,0)
 S ^TMP($J,1,5,0)="|TAB|"_$P(^RMPR(669.9,RMPRSITE,2),U,3)_", "_FIXDNAME_" "_$P(^RMPR(669.9,RMPRSITE,2),U,5) K FIXDNAME
"RTN","RMPRFO",33,0)
HEADER S ^TMP($J,1,9,0)="|SETTAB(5,50)||TAB|"_RMPRDATE
"RTN","RMPRFO",34,0)
 I '$D(RMPRHED) D
"RTN","RMPRFO",35,0)
 . S ^TMP($J,1,11,0)="|TAB|"_$P(VADM(1),",",2)_" "_$P(VADM(1),",",1)_"|TAB|In Reply Refer To: "_$$STA^RMPRUTIL_"/"_$$ROU^RMPRUTIL(RMPRSITE)
"RTN","RMPRFO",36,0)
 . Q
"RTN","RMPRFO",37,0)
 E  D
"RTN","RMPRFO",38,0)
 . S ^TMP($J,1,11,0)="|TAB|"_$P(VADM(1),",",2)_" "_$P(VADM(1),",",1)_"|TAB|"_"             "_$$STA^RMPRUTIL_"/"_$$ROU^RMPRUTIL(RMPRSITE)
"RTN","RMPRFO",39,0)
 . Q
"RTN","RMPRFO",40,0)
 S ^TMP($J,1,12,0)="|TAB|"_VAPA(1)
"RTN","RMPRFO",41,0)
 I VAPA(2)]"" S ^TMP($J,1,13,0)="|TAB|"_VAPA(2)_"|TAB|"_VADM(1),^TMP($J,1,14,0)="|TAB|"_VAPA(4)_","_" "_$P(VAPA(5),U,2)_" "_VAPA(6)
"RTN","RMPRFO",42,0)
 E  S ^TMP($J,1,13,0)="|TAB|"_VAPA(4)_","_" "_$P(VAPA(5),U,2)_" "_VAPA(6)_"|TAB|"_VADM(1)
"RTN","RMPRFO",43,0)
 S NAME=$P(VADM(1),",")
"RTN","RMPRFO",44,0)
 I $P(NAME," ",2)?1A.A D
"RTN","RMPRFO",45,0)
 .S NAME1=NAME,NAME=$P(NAME," ",1) D TRANS^RMPRUTL1 S RMPRNAM1=RMPRNAME,NAME=NAME1,NAME=$P(NAME," ",2) D TRANS^RMPRUTL1 S RMPRNAM2=RMPRNAME,RMPRNAME=RMPRNAM1_" "_RMPRNAM2
"RTN","RMPRFO",46,0)
 E  D TRANS^RMPRUTL1
"RTN","RMPRFO",47,0)
 G NAME^RMPRFO1
"RTN","RMPRFO1")
0^2^B17393061
"RTN","RMPRFO1",1,0)
RMPRFO1 ;PHX/RFM,HPL-DRIVER FOR PROSTHETIC LETTERS ;3/17/03  12:19
"RTN","RMPRFO1",2,0)
 ;;3.0;PROSTHETICS;**8,44,77,105**;Feb 09, 1996
"RTN","RMPRFO1",3,0)
 ;RVD 3/17/03 patch #77 - remove link to suspense from letter module.
"RTN","RMPRFO1",4,0)
NAME ;
"RTN","RMPRFO1",5,0)
 S RMPRNAME=$P(RMPRNAME," ",1,2)
"RTN","RMPRFO1",6,0)
 I $P(VADM(5),U)["M" S ^TMP($J,1,16,0)="|TAB|"_"Dear Mr. "_RMPRNAME_":"
"RTN","RMPRFO1",7,0)
 E  S ^TMP($J,1,16,0)="|TAB|"_"Dear Ms. "_RMPRNAME_":"
"RTN","RMPRFO1",8,0)
 S RV=18 F RI=0:0 S RI=$O(^RMPR(665.2,RMPRFA,1,RI)) Q:RI'>0  Q:^(RI,0)'=" "
"RTN","RMPRFO1",9,0)
 S RI=RI-1 F  S RI=$O(^RMPR(665.2,RMPRFA,1,RI)) Q:RI'>0  S TAB=$S($P(^RMPR(665.2,RMPRFA,1,RI,0),U)["|TAB|":"",1:"|TAB|") S ^TMP($J,1,RV,0)=TAB_^(0),RV=RV+1
"RTN","RMPRFO1",10,0)
EDIT S DIC="^TMP($J,1," D EN^DIWE S RMPRFLAG=1
"RTN","RMPRFO1",11,0)
EDIT1 S %=1 W !,"Do you wish to view this letter" D YN^DICN
"RTN","RMPRFO1",12,0)
 S RMPRAA68=% I RMPRAA68<0 G EXIT^RMPRFO1
"RTN","RMPRFO1",13,0)
 I RMPRAA68=0 W !,"Answer `YES` to view the letter, `NO` to not" G EDIT1
"RTN","RMPRFO1",14,0)
 I RMPRAA68=1 S RMPRFFL=1 G:$G(RMPRPRIN)'="" PRINT S RMPRPRIN=1 G SET^RMPRFO2
"RTN","RMPRFO1",15,0)
ASK ;
"RTN","RMPRFO1",16,0)
 S %=1 W !,"Do you wish to accept this letter" D YN^DICN
"RTN","RMPRFO1",17,0)
 S RMPRAA68=% I RMPRAA68<0 G EXIT^RMPRFO1
"RTN","RMPRFO1",18,0)
 I RMPRAA68=0 W !,"Answer `YES` or `NO`" G ASK
"RTN","RMPRFO1",19,0)
 I RMPRAA68=2 G ASK2
"RTN","RMPRFO1",20,0)
 K RMPRFFL G:$D(RMPRPRIN) PRINT G SET^RMPRFO2
"RTN","RMPRFO1",21,0)
ASK2 ;DECIDES TO KEEP EDITING LETTER OR DELETE IT
"RTN","RMPRFO1",22,0)
 ; ALREADY SAID NOT TO ACCEPT LETTER
"RTN","RMPRFO1",23,0)
 S %=2 W !,"Do you wish to Delete this letter" D YN^DICN
"RTN","RMPRFO1",24,0)
 S RMPRAA68=% I RMPRAA68=1!(RMPRAA68<0) D  Q
"RTN","RMPRFO1",25,0)
 .I $G(RMPRIN)'>0 W $C(7),!!,?35,"Letter Deleted..." D EXIT^RMPRFO1  Q
"RTN","RMPRFO1",26,0)
 .I $D(^RMPR(665.4,RMPRIN,0)) D DEL^RMPRFO1
"RTN","RMPRFO1",27,0)
 .W $C(7),!!,?35,"Deleted..." H 1 Q
"RTN","RMPRFO1",28,0)
 I RMPRAA68=0 W !,"Enter `YES` to Delete this letter" G ASK2
"RTN","RMPRFO1",29,0)
 G EDIT
"RTN","RMPRFO1",30,0)
EN2 ;PRINT/DELETE A LETTER
"RTN","RMPRFO1",31,0)
 K DIC D DIV4^RMPRSIT I $D(Y),(Y<0) G EXIT
"RTN","RMPRFO1",32,0)
 D HOME^%ZIS S DIC=2,DIC(0)="AEQMZ",DIC("A")="Select PATIENT: "
"RTN","RMPRFO1",33,0)
DICW ;CHOOSE THE LETTER TO PRINT
"RTN","RMPRFO1",34,0)
 ;S DIC("W")="S (RMPRDFN,DFN)=+Y" D ^DIC K DIC G:Y<0 EXIT
"RTN","RMPRFO1",35,0)
 D ^DIC K DIC G:Y<0 EXIT S (RMPRDFN,DFN)=+Y
"RTN","RMPRFO1",36,0)
 D EN^RMPRUTL2 Q:RMPRIN=-1  S:$G(RMPRIN)>0 DA=RMPRIN
"RTN","RMPRFO1",37,0)
 Q:$G(DA)<1  Q:$G(DA)=""  S RMPRIN=DA
"RTN","RMPRFO1",38,0)
 Q:$G(RMPRIN)'>0  S RMPRTY=$P(^RMPR(665.4,RMPRIN,0),U,2) L +^RMPR(665.4,RMPRIN,0):1 I $T=0 W !,?5,$C(7),"Someone else is Editing this entry!" G EXIT
"RTN","RMPRFO1",39,0)
 G:$D(RMPRDELE) DEL
"RTN","RMPRFO1",40,0)
 S DA=RMPRIN,ITMFLG=0 S:$D(^RMPR(665.4,DA,3,0)) ITMFLG=$P(^RMPR(665.4,DA,3,0),U,4) S:ITMFLG>4 ITMFLG=1
"RTN","RMPRFO1",41,0)
 S ITM=RMPRIN
"RTN","RMPRFO1",42,0)
 I $P(^RMPR(665.2,RMPRTY,0),U,3) D PRNT1^RMPRFO3 K RMPRTY,DA,ITM,ITMFLG D EXIT^RMPRFO3 G EXIT
"RTN","RMPRFO1",43,0)
PRINT ;VIEW LETTER
"RTN","RMPRFO1",44,0)
 I $G(RMPRIN)'>0 Q:$G(RMPRDA)'>0  S RMPRIN=RMPRDA
"RTN","RMPRFO1",45,0)
 S DFN=$P(^RMPR(665.4,RMPRIN,0),U)
"RTN","RMPRFO1",46,0)
 S RMPRTY=$P(^RMPR(665.4,RMPRIN,0),U,2)
"RTN","RMPRFO1",47,0)
 S RMPR1=^RMPR(665.2,RMPRTY,0)
"RTN","RMPRFO1",48,0)
 I $P(^RMPR(665.2,RMPRTY,0),U,3) S DA=RMPRIN K RMPR1 G PRNT1^RMPRFO3
"RTN","RMPRFO1",49,0)
 S DIC="^RMPR(665.4,",RMPRPG=0,DHD="[RMPR BLANK]-[RMPR PAGE]"
"RTN","RMPRFO1",50,0)
 S BY="@NUMBER",FR=RMPRIN,TO=RMPRIN,FLDS="3",L=0,PG=2
"RTN","RMPRFO1",51,0)
 D EN1^DIP I '$D(POP) S POP=0
"RTN","RMPRFO1",52,0)
 I POP,$D(RMPRFFL) S RMPRGO=$S($D(^RMPR(665.4,RMPRIN,0)):"DEL^RMPRFO1",1:"EXIT^RMPRFO1") D @RMPRGO W ?9," Deleted..." G EXIT
"RTN","RMPRFO1",53,0)
 ;I '$D(RMPRFFL),'$D(RNSK) S RMPRDFN=DFN D LINK^RMPRS G EXIT
"RTN","RMPRFO1",54,0)
 ;I 'POP,'$D(RMPRFFL),'$D(RNSK) S RMPRDFN=DFN K DIR S DIR(0)="E" W ! D ^DIR,LINK^RMPRS G EXIT
"RTN","RMPRFO1",55,0)
VI I $D(RMPRFFL) R !!,"Enter `return` to continue: ",X:DTIME G:'$T EXIT I X'="" W $C(7),!,"You may only enter `return` here.." G VI
"RTN","RMPRFO1",56,0)
 I $D(RMPRFFL) S DIE="^RMPR(665.4,",DA=RMPRIN,DR=3,DIE("NO^")="" D ^DIE G:$D(DTOUT)!($D(DUOUT)) EXIT G EDIT1
"RTN","RMPRFO1",57,0)
EXIT ;common exit point
"RTN","RMPRFO1",58,0)
 L:$D(RMPRIN) -^RMPR(665.4,RMPRIN,0)
"RTN","RMPRFO1",59,0)
 K ^TMP($J,1),^TMP($J,"RMPR")
"RTN","RMPRFO1",60,0)
 K %X,RMPRFFL,RMPRHED,RMPRPRIN,%Y,RMPRDEL,RMPRRVA,DIC,RMPRFA,KILL,DIE,DA,DR,DIK,RMPR1,RMPR2,RMPRDATE,RMPRIN,RMPRL,RMPRNAME,RMPRU,RMPRDELE,FR,RI,RV
"RTN","RMPRFO1",61,0)
 I '$D(RMPRCOMB)!('$D(RMPRFF)) K RMPREND,VADM,VAPA,VA,NAME,RMPRGO,NAME1,RMPRDEN,RMPRFLAG,RMPRNAM1,RMPRNAM2,RMPRFF,J,RP,RO,RZ D KVAR^VADPT
"RTN","RMPRFO1",62,0)
 D ^%ZISC Q
"RTN","RMPRFO1",63,0)
DEL I $D(RMPRDELE) S %=2 W !,"Are you sure you want to delete this letter" D YN^DICN S RMPRAA68=% I RMPRAA68=0 W !,"Answer `YES` to Delete the letter, `NO` to exit" G DEL
"RTN","RMPRFO1",64,0)
 I $D(RMPRDELE),(RMPRAA68<0!(RMPRAA68=2)) G EXIT
"RTN","RMPRFO1",65,0)
 S DIK="^RMPR(665.4,",DA=RMPRIN D ^DIK G EXIT
"RTN","RMPRFO2")
0^3^B22825483
"RTN","RMPRFO2",1,0)
RMPRFO2 ;PHX/RFM,HPL-CONTINUATION OF RMPRFO1 ;11/01/1994
"RTN","RMPRFO2",2,0)
 ;;3.0;PROSTHETICS;**77,105**;Feb 09, 1996
"RTN","RMPRFO2",3,0)
 ;
"RTN","RMPRFO2",4,0)
 ;RVD patch #77 - check for variable %
"RTN","RMPRFO2",5,0)
VIEW ;VIEW LETTERS FROM ELIG SCREEN2 UNDER ISSUE FROM STOCK
"RTN","RMPRFO2",6,0)
 N RMPRDA,DA,RMPRIN,RMPRAA68
"RTN","RMPRFO2",7,0)
 S:$D(%) RMPRAA68=%
"RTN","RMPRFO2",8,0)
 ;Q:'$D(RMPRAA68)
"RTN","RMPRFO2",9,0)
 Q:$G(DFN)=""
"RTN","RMPRFO2",10,0)
 S RMPRFF=1 I '$D(^RMPR(665.4,"B",DFN)) G RO1
"RTN","RMPRFO2",11,0)
 K KILL
"RTN","RMPRFO2",12,0)
 W !!,"Letters on file:"
"RTN","RMPRFO2",13,0)
 ;!,?5,"Type",?29,"Employee",?55,"Date or Vendor"
"RTN","RMPRFO2",14,0)
ASK1 ;SET UP REVERSE LETTER LIST & ASK IF USER WANTS TO VIEW MORE LETTERS
"RTN","RMPRFO2",15,0)
 D EN^RMPRUTL2
"RTN","RMPRFO2",16,0)
 S DA=RMPRIN G:$G(DA)'>0 ASK2
"RTN","RMPRFO2",17,0)
 S RMPRIN=DA D PRINT^RMPRFO1
"RTN","RMPRFO2",18,0)
MOLET K DA,RMPRDA,RMPRIN
"RTN","RMPRFO2",19,0)
 S %=2 W !,"Would you like to see more letters" D YN^DICN
"RTN","RMPRFO2",20,0)
 S RMPRAA68=% I RMPRAA68=-1 S KILL=1 Q
"RTN","RMPRFO2",21,0)
 I RMPRAA68=0 W !,"'YES' will let you review another letter for this patient",!,"'NO' will let you continue the program"
"RTN","RMPRFO2",22,0)
 I  W !,"Enter '^' to exit the correspondence screen totally" G MOLET
"RTN","RMPRFO2",23,0)
 I RMPRAA68=2 S KILL=1 D RO1 Q
"RTN","RMPRFO2",24,0)
 I RMPRAA68=1 G ASK1
"RTN","RMPRFO2",25,0)
 G RO1
"RTN","RMPRFO2",26,0)
ASK2 ;Q:RMPRIN=-1
"RTN","RMPRFO2",27,0)
 S %=2 W !,"Do you wish to view a letter" D YN^DICN Q:$D(DTOUT)  S RMPRAA68=% S:RMPRAA68<0 KILL=1 G:RMPRAA68=2!(RMPRAA68<0) RO1
"RTN","RMPRFO2",28,0)
 I RMPRAA68=0 W !,"Answer `YES` or `NO`" G ASK2
"RTN","RMPRFO2",29,0)
 I RMPRAA68=1 G VIEW
"RTN","RMPRFO2",30,0)
 ;I %=1 S %=3 G VIEW
"RTN","RMPRFO2",31,0)
ASK3 S RMPRAA68=% I RMPRAA68=2 K X R !!,"Enter the number: ",X:DTIME Q:'$T!(X="")  Q:X="^"  I X>(I-1)!(+X<1)!(X'?1N.N) W !,$C(7),"Enter a number between 1 and ",(I-1)_" or `^` to quit." G ASK3
"RTN","RMPRFO2",32,0)
 I RMPRAA68=1 I $G(X)'="" I $G(RMPR9VA($G(X)))=""&($G(RMPRDFN)'="") S RMPR9VA($G(X))=RMPRDFN
"RTN","RMPRFO2",33,0)
 I RMPRAA68=1,$D(^RMPR(665.4,RMPR9VA(+X),0)) S RMPRIN=RMPR9VA(+X),RMPREN=1 D PRINT^RMPRFO1 G VIEW
"RTN","RMPRFO2",34,0)
RO1 K RMPREN S %=2 W !,"Do you wish to create a correspondence letter" D YN^DICN
"RTN","RMPRFO2",35,0)
 S RMPRAA68=% I RMPRAA68=1 D CUM^RMPRFO Q
"RTN","RMPRFO2",36,0)
 S RMPRAA68=% I RMPRAA68=0 W !,"Answer `YES` to create a form letter, `NO` to continue." G RO1
"RTN","RMPRFO2",37,0)
 I RMPRAA68=2 K RMPRBB,RMPRFF,RMPR9ZRO,RMPR9VA(1),RMPR9VA(2)
"RTN","RMPRFO2",38,0)
 S RMPRAA68=3 Q
"RTN","RMPRFO2",39,0)
EN4 ;EDIT A SKELETON
"RTN","RMPRFO2",40,0)
 K DIC S DIC="^RMPR(665.2,",DIC(0)="AEQLM",DLAYGO=665.2 D ^DIC K DLAYGO
"RTN","RMPRFO2",41,0)
 I +Y<0!($P(Y,U,4)["1") W !!,"SORRY, THIS IS A NON-EDITABLE LETTER" G EXIT^RMPRFO1
"RTN","RMPRFO2",42,0)
 S RMPRIN=+Y L +^RMPR(665.2,RMPRIN,0):1 I $T=0 W !,$C(7),?5,"Someone else is Editing this entry!" K RMPRIN G EXIT^RMPRFO1
"RTN","RMPRFO2",43,0)
 S DIE="^RMPR(665.2,",DA=RMPRIN,DR=".01;1",DIE("NO^")="" D ^DIE L -^RMPR(665.2,RMPRIN,0) I '$D(DA)!($D(DTOUT))!($D(DUOUT)) G EXIT^RMPRFO1
"RTN","RMPRFO2",44,0)
DEN S %=$S($P(^RMPR(665.2,RMPRIN,0),U,2)=1:1,1:2) W !,"Is this a Denial type of letter" D YN^DICN
"RTN","RMPRFO2",45,0)
 S RMPRAA68=% G:RMPRAA68<0 EXIT^RMPRFO1
"RTN","RMPRFO2",46,0)
 I RMPRAA68=0 G QUES1
"RTN","RMPRFO2",47,0)
 S $P(^RMPR(665.2,RMPRIN,0),U,2)=$S(RMPRAA68=2:0,RMPRAA68=1:1,1:"")
"RTN","RMPRFO2",48,0)
 G EXIT^RMPRFO1
"RTN","RMPRFO2",49,0)
QUES1 W !,"Enter `YES` if letter is an AMIS Denial" G DEN
"RTN","RMPRFO2",50,0)
EN3 ;PRINT FORM LETTER
"RTN","RMPRFO2",51,0)
 I '$D(RMPR("SIG")) D DIV4^RMPRSIT Q:$D(X)
"RTN","RMPRFO2",52,0)
 D HOME^%ZIS
"RTN","RMPRFO2",53,0)
 ;CHECK IF IT IS THE ADP FL 10-90
"RTN","RMPRFO2",54,0)
 K DIC S DIC="^RMPR(665.2,",DIC(0)="AEQM" D ^DIC G:+Y<0 EXIT^RMPRFO1
"RTN","RMPRFO2",55,0)
 S RMPRIN=+Y K DIC
"RTN","RMPRFO2",56,0)
 ;check if it is the ADP FL 10-90
"RTN","RMPRFO2",57,0)
 I $P(^RMPR(665.2,RMPRIN,0),U,4)["1" K DA D PRNT1^RMPRFO3 D EXIT^RMPRFO1 Q
"RTN","RMPRFO2",58,0)
PR S DIWF="^RMPR(665.2,RMPRIN,1,",DIWF(1)=665.2,BY="@NUMBER",FR=RMPRIN,TO=RMPRIN D EN2^DIWF
"RTN","RMPRFO2",59,0)
 G EXIT^RMPRFO1
"RTN","RMPRFO2",60,0)
SET K DIC S DIC="^RMPR(665.4,",DIC(0)="L",X=DFN,DLAYGO=665.4 K DD,DO,DINUM D FILE^DICN K DLAYGO
"RTN","RMPRFO2",61,0)
 G:Y<0 EXIT^RMPRFO1
"RTN","RMPRFO2",62,0)
 S RMPRIN=+Y,$P(^RMPR(665.4,RMPRIN,0),U,2)=RMPRFA,$P(^(0),U,3)=DT,$P(^(0),U,4)=DUZ,$P(^RMPR(665.4,RMPRIN,0),U,5)=$P(^RMPR(665.2,RMPRFA,0),U,2),$P(^RMPR(665.4,RMPRIN,0),U,6)=RMPR("STA") S DIK=DIC,DA=RMPRIN D IX1^DIK
"RTN","RMPRFO2",63,0)
 S %X="^TMP($J,1,",%Y="^RMPR(665.4,+Y,1," D %XY^%RCR
"RTN","RMPRFO2",64,0)
 G PRINT^RMPRFO1
"RTN","RMPRFO2",65,0)
WRITE S:$G(RMPR9ZRO)'=""&(RO="") RO=RMPR9ZRO
"RTN","RMPRFO2",66,0)
 I I#15=0 S DIR(0)="FAOU^1:245",DIR("A")="End of page: select a letter by number or enter'^' to continue listing" D  I $G(X)="^" Q
"RTN","RMPRFO2",67,0)
 .D ^DIR
"RTN","RMPRFO2",68,0)
 .I $G(X)="" Q
"RTN","RMPRFO2",69,0)
 .I $G(X)>0&($G(RO)>0&($G(X)<(RO+1))) S DA=^TMP($J,"RMPR",RO) W !,"***",DA Q
"RTN","RMPRFO2",70,0)
 W !,I_" ",?4,$S($D(^RMPR(665.2,+$P(^RMPR(665.4,^TMP($J,"RMPR",RO),0),U,2),0)):$E($P(^(0),U,1),1,20),1:"UNKNOWN")
"RTN","RMPRFO2",71,0)
 S:$D(^RMPR(665.4,^TMP($J,"RMPR",RO),2)) RMPR2=$P(^RMPR(665.4,^TMP($J,"RMPR",RO),2),U,1)
"RTN","RMPRFO2",72,0)
 ;W ?27,$S($D(^VA(200,+$P(^RMPR(665.4,^TMP($J,"RMPR",RO),0),U,4),0)):$E($P(^(0),U),1,15),1:"")
"RTN","RMPRFO2",73,0)
 S RMPRPP=$G(^VA(200,+$P(^RMPR(665.4,^TMP($J,"RMPR",RO),0),U,4),0))'="" W ?27,$E($P(^(0),U),1,15) K RMPRPP
"RTN","RMPRFO2",74,0)
 S Y=$S($P(^RMPR(665.4,^TMP($J,"RMPR",RO),0),U,3):$P(^RMPR(665.4,^TMP($J,"RMPR",RO),0),U,3),$D(RMPR2):$P(^PRC(440,RMPR2,0),U,1),1:"") D DD^%DT W ?55,$E(Y,1,24) S RMPR9VA(I)=^TMP($J,"RMPR",RO)
"RTN","RMPRFO2",75,0)
 Q
"RTN","RMPRPRT")
0^4^B32430363
"RTN","RMPRPRT",1,0)
RMPRPRT ;PHX/HNB-PRINT 2319 ;3/18/03  09:04
"RTN","RMPRPRT",2,0)
 ;;3.0;PROSTHETICS;**7,50,77,105**;Feb 09, 1996
"RTN","RMPRPRT",3,0)
 ;
"RTN","RMPRPRT",4,0)
 ; ODJ - Patch 50 - 7/7/00 - NOIS SFC-0300-62501
"RTN","RMPRPRT",5,0)
 ;                           Put N I statement in HDR subroutine
"RTN","RMPRPRT",6,0)
 ;                           because it can get killed here and 
"RTN","RMPRPRT",7,0)
 ;                           calling routines are still using it
"RTN","RMPRPRT",8,0)
 ; RVD 3/18/03 patch #77 - remove the ability of adding pt under
"RTN","RMPRPRT",9,0)
 ;                         option print 2319.
"RTN","RMPRPRT",10,0)
 ;
"RTN","RMPRPRT",11,0)
DSP ;DO PRE DISPLAY HOUSEKEEPING
"RTN","RMPRPRT",12,0)
 ;VARIABLES REQUIRED:
"RTN","RMPRPRT",13,0)
 ;VARIABLES SET; RMPR ARRAY - SITE SPECIFIC INFO
"RTN","RMPRPRT",14,0)
 ;               RMPRDFN - IEN OF PATIENT IN FILE 665
"RTN","RMPRPRT",15,0)
 ;               RMPRNAM - NAME OF PATIENT
"RTN","RMPRPRT",16,0)
 ;               RMPRSSN - SSN O PATIENT
"RTN","RMPRPRT",17,0)
 ;               RMPRDOB - EXTERNAL VERSION OF PATIENT'S DATE OF BIRTH
"RTN","RMPRPRT",18,0)
 ; CALLED BY DSP1^RMPRPRT
"RTN","RMPRPRT",19,0)
 D DIV4^RMPRSIT G:$D(X) EXIT
"RTN","RMPRPRT",20,0)
 K RMPRDFN,RMPRSSN,RMPRSSNE,RMPRDOB,DIC,Y
"RTN","RMPRPRT",21,0)
 S DIC="^RMPR(665,",DIC(0)="AEMQ"
"RTN","RMPRPRT",22,0)
 S DIC("A")="Select PROSTHETIC PATIENT: " D ^DIC K DIC Q:$G(Y)'>0
"RTN","RMPRPRT",23,0)
 S:+Y>0 (RMPRDFN,DFN)=+Y D DEM^VADPT,ELIG^VADPT
"RTN","RMPRPRT",24,0)
 S RMPRNAM=$P(VADM(1),U),RMPRSSN=$P(VADM(2),U)
"RTN","RMPRPRT",25,0)
 S RMPRDOB=$P(VADM(3),U),RMPRSSNE=VA("PID")
"RTN","RMPRPRT",26,0)
 S RMPRCNUM=VAEL(7)
"RTN","RMPRPRT",27,0)
 I +VADM(6) S RMPRDOD=$P(VADM(6),U) W !!,$C(7),"PATIENT IS DECEASED. DATE OF DEATH WAS ",$P(VADM(6),U,2)
"RTN","RMPRPRT",28,0)
 I $D(RMPRDOD) S DIR(0)="Y",DIR("A")="Would you Like to continue Processing this Patient",DIR("B")="NO" D ^DIR K DIR I +Y=0 K RMPRDFN
"RTN","RMPRPRT",29,0)
 K RMPRDOD D KVAR^VADPT
"RTN","RMPRPRT",30,0)
 G:'$D(RMPRDFN) EXIT
"RTN","RMPRPRT",31,0)
DSP2 S %ZIS="MQ" K IOP D ^%ZIS G:POP EXIT
"RTN","RMPRPRT",32,0)
 I '$D(IO("Q")) U IO G DSP1
"RTN","RMPRPRT",33,0)
 K IO("Q") S ZTRTN="START^RMPRPRT",ZTDESC="PROSTHETIC PATIENT PRINT",ZTIO=ION F RG="RMPRDFN","RMPRNAM","RMPRDOB","RMPRSSN" S ZTSAVE(RG)=""
"RTN","RMPRPRT",34,0)
 K RG D ^%ZTLOAD G EXIT
"RTN","RMPRPRT",35,0)
DSP1 I $E(IOST)["C" S RFLG=1 D ^RMPRPAT K ANS W ! ;G DSP2
"RTN","RMPRPRT",36,0)
START ;DO THE ACUTAL PRINTINTG OF THE ELIGIBILITY SCREENS DATA TO THE PRINTER
"RTN","RMPRPRT",37,0)
 ;VARIABLES REQUIRED: RMPRDFN - PATIENT IEN IN FILE 665
"RTN","RMPRPRT",38,0)
 ;                    RMPRNAM - PATIENT'S NAME
"RTN","RMPRPRT",39,0)
 ;                    RMPRSSN - PATIENT'S SSN NUMBEER
"RTN","RMPRPRT",40,0)
 ;                    RMPRDOB - PATIENT'S DATE OF BIRTH
"RTN","RMPRPRT",41,0)
 ;VARIABLES SET:      RMPR($J,"DESQ",--- - ARRAY  HOLDS PATIENT EYE AND
"RTN","RMPRPRT",42,0)
 ;                                         HAIR COLOR
"RTN","RMPRPRT",43,0)
 ;                    RA("DIQ1",$J,--- - ARRAY  HOLDS PATIENT MAS 
"RTN","RMPRPRT",44,0)
 ;                    R5(---  - ARRAY HOLDING PROSTHETIC  DISABILITY
"RTN","RMPRPRT",45,0)
 ;                              CODE INFORMATION
"RTN","RMPRPRT",46,0)
 ;CALLED BY DSP^RMPRPRT      
"RTN","RMPRPRT",47,0)
 Q:$G(RMPRDFN)<1
"RTN","RMPRPRT",48,0)
 S PAGE=1
"RTN","RMPRPRT",49,0)
 K DIQ,DIC S DIC=2,DA=RMPRDFN,DR=.3721,DR(2.04)=".01;2;3",DIQ="RA(""DIQ1"",$J," F LP=1:1 S DA(2.04)=LP D EN^DIQ1 Q:$G(RA("DIQ1",$J,2.04,LP,.01))=""
"RTN","RMPRPRT",50,0)
 S HGT=" ",WGT=" " S:$D(^RMPR(665,RMPRDFN,10)) HGT=$P(^(10),U,1),WGT=$P(^(10),U,2)
"RTN","RMPRPRT",51,0)
 S %X="^RMPR(665,"_RMPRDFN_",",%Y="R5(" D %XY^%RCR K %X,%Y S DFN=RMPRDFN
"RTN","RMPRPRT",52,0)
 K DIQ,DIC S DIC="^RMPR(665,",DR="22;23",DA=RMPRDFN,DIQ="RMPR($J,""DESC"",",DIQ(0)="E" D EN^DIQ1 K DIC,DIQ,DR
"RTN","RMPRPRT",53,0)
 S HAIR=$S($G(RMPR($J,"DESC",665,RMPRDFN,23,"E"))'="":RMPR($J,"DESC",665,RMPRDFN,23,"E"),1:" "),EYE=$S($G(RMPR($J,"DESC",665,RMPRDFN,22,"E"))'="":RMPR($J,"DESC",665,RMPRDFN,22,"E"),1:" ")
"RTN","RMPRPRT",54,0)
 D HDR D ADD^VADPT W !,"Phone: ",$S($G(VAPA(8))'="":VAPA(8),1:"UNKNOWN"),!
"RTN","RMPRPRT",55,0)
 S DFN=RMPRDFN D OAD^VADPT W !,"Office: ",$S(VAOA(8)'="":VAOA(8),1:"UNKNOWN"),!
"RTN","RMPRPRT",56,0)
 D COMP^RMPRUTIL W !,"Permanent Address:",?40,"Temporary Address:",!,XP(1),?40,X1(1),!
"RTN","RMPRPRT",57,0)
 W:J>2 XP(2) W:J1>2 ?40,X1(2) W:(J>2!(J1>2)) ! W:J>3 XP(3) W:J1>3 ?40,X1(3) W:(J>3!(J1>3)) ! W:J>4 XP(4) W:J1>4 ?40,X1(4)
"RTN","RMPRPRT",58,0)
 W:(J>4!(J1>4)) ! K J,J1,XP,X1
"RTN","RMPRPRT",59,0)
 W !,"Height(IN): ",HGT,"  Weight(LB): ",WGT,"  Eyes: ",EYE,"  Hair: ",HAIR,!!
"RTN","RMPRPRT",60,0)
 ;if you quit here than that is all that will print on the printer
"RTN","RMPRPRT",61,0)
 ;is not complete 19 record.
"RTN","RMPRPRT",62,0)
 ;I $D(RMPRBACK) Q
"RTN","RMPRPRT",63,0)
END D ELIG^VADPT W !!,"Patient Type: ",$P(VAEL(6),U,2),?40,"Period of Service: ",$P(VAEL(2),U,2),!,"Primary Eligibility Code:",?40,"Status: ",$P(VAEL(9),U,2),!,$P(VAEL(1),U,2)
"RTN","RMPRPRT",64,0)
 W ?40,"Eligibility Status: ",$E($P(VAEL(8),U,2),1,19) D MB^VADPT W !!,"Receiving A&A Benefits? " W:VAMB(1)=0 "NO" W:$P(VAMB(1),U,1)=1 $P(VAMB(1),U,2)
"RTN","RMPRPRT",65,0)
 W ?40,"Receiving Housebound Benefits? " W:VAMB(2)=0 "NO" W:$P(VAMB(2),U,1)=1 $P(VAMB(2),U,2)
"RTN","RMPRPRT",66,0)
 W !,"Receiving Social Security? " W:VAMB(3)=0 "NO" W:$P(VAMB(3),U,1)=1 $P(VAMB(3),U,2) W ?40,"Receiving VA Pension? " W:VAMB(4)=0 "NO" W:$P(VAMB(4),U,1)=1 $P(VAMB(4),U,2)
"RTN","RMPRPRT",67,0)
 W !,"Receiving Military Retirement? " W:VAMB(5)=0 "NO" W:$P(VAMB(5),U,1)=1 $P(VAMB(5),U,2) W ?40,"Receiving VA Disability? " W:VAMB(7)=0 "NO" W:$P(VAMB(7),U,1)=1 $P(VAMB(7),U,2) W !!
"RTN","RMPRPRT",68,0)
 W "MAS Disabilities: Code  Disability                           %  TOTAL%=",$S($P(VAEL(3),U,2):$P(VAEL(3),U,2),1:""),! S J=0
"RTN","RMPRPRT",69,0)
 S LP=0 F I=1:1 S LP=$O(RA("DIQ1",$J,2.04,LP)) Q:LP=""  D
"RTN","RMPRPRT",70,0)
 .W !,?21,RA("DIQ1",$J,2.04,LP,.01),?60,RA("DIQ1",$J,2.04,LP,2),?70,RA("DIQ1",$J,2.04,LP,3)
"RTN","RMPRPRT",71,0)
 I I=1 W !?10," NONE LISTED",!
"RTN","RMPRPRT",72,0)
 W !,"Prosthetic Disability Codes:",!
"RTN","RMPRPRT",73,0)
 W ?1,"Code",?10,"Elig",?40,"SC/NSC",?52,"Date",?63,!
"RTN","RMPRPRT",74,0)
 S J=0 F I=1:1 S J=$O(R5(1,J)) Q:J=""!(J?.A)  D DISP
"RTN","RMPRPRT",75,0)
 I I=1 W !?10,"NONE LISTED",!
"RTN","RMPRPRT",76,0)
 K I,LP
"RTN","RMPRPRT",77,0)
 G ^RMPRPRT1
"RTN","RMPRPRT",78,0)
 Q
"RTN","RMPRPRT",79,0)
EXIT ;EXIT FROM PRINTING A PATIENT'S 10-2319
"RTN","RMPRPRT",80,0)
 ;CALLED BY DSP^RMPRPRT AND DSP1^RMPRPRT
"RTN","RMPRPRT",81,0)
 D ^%ZISC,KVAR^VADPT
"RTN","RMPRPRT",82,0)
 K RDP,FG,Y,%,AN,NA,ANST,RC,DA,DIC,DIE,DIPGM,DIYS,ANS,EYE,HAIR,HGT,POP,R2,R5,WGT,X,Y,PAGE,RMPRSSNE,RMPRAA68
"RTN","RMPRPRT",83,0)
 K:'$D(RMPRF)&($G(RMPRBACK)=0) RMPRDFN,RMPRDOB,RMPRNAM,RMPRSSN,VADM
"RTN","RMPRPRT",84,0)
 Q
"RTN","RMPRPRT",85,0)
HDR ;HEADER FOR 10-2319
"RTN","RMPRPRT",86,0)
 ;CALLED BY START^RMPRPRT
"RTN","RMPRPRT",87,0)
 ;VARTIABLES REQUIRED:RMPRNAM - PATIENT'S NAME
"RTN","RMPRPRT",88,0)
 ;                    RMPRSSN - PATIENT'S SSN
"RTN","RMPRPRT",89,0)
 ;                    VAEL ARRAY - SEE PIMS TECHNICAL MANUAL
"RTN","RMPRPRT",90,0)
 ;                    RMPRDOB - PATIENT'S DATE OF BIRTH
"RTN","RMPRPRT",91,0)
 N I
"RTN","RMPRPRT",92,0)
 I $Y+6>IOSL W @IOF
"RTN","RMPRPRT",93,0)
 I '$D(RMPRSSN) D
"RTN","RMPRPRT",94,0)
 .N DFN
"RTN","RMPRPRT",95,0)
 .S DFN=RMPRDFN
"RTN","RMPRPRT",96,0)
 .D DEM^VADPT
"RTN","RMPRPRT",97,0)
 .S RMPRSSN=$P(VADM(2),U)
"RTN","RMPRPRT",98,0)
 .S RMPRDOB=$P(VADM(3),U)
"RTN","RMPRPRT",99,0)
 W !!,?23,"10-2319 PROSTHETICS VETERAN RECORD",!,$E(RMPRNAM,1,25),?27,"C#: " S DFN=RMPRDFN D ELIG^VADPT W $S(VAEL(7)'="":VAEL(7),1:"UNKNOWN")
"RTN","RMPRPRT",100,0)
 W ?45,"SSN: ",$E(RMPRSSN,1,3)_"-"_$E(RMPRSSN,4,5)_"-"_$E(RMPRSSN,6,9),?63,"DOB: "
"RTN","RMPRPRT",101,0)
 W $E(RMPRDOB,4,5)_"-"_$E(RMPRDOB,6,7)_"-"_($E(RMPRDOB,1,3)+1700),!
"RTN","RMPRPRT",102,0)
 ;
"RTN","RMPRPRT",103,0)
 W "Comment: ",$S($P(R5(0),U,3)]"":$P(R5(0),U,3),1:"")
"RTN","RMPRPRT",104,0)
 Q
"RTN","RMPRPRT",105,0)
DISP ;DISPLAY PROSTHETIC DISABILITY CODES
"RTN","RMPRPRT",106,0)
 ;CALLED BY END^RMPRPRT
"RTN","RMPRPRT",107,0)
 ;VARIABLES REQUIRED R5 - A STRING ARRAY
"RTN","RMPRPRT",108,0)
 ;                    J - AN INDEX INTO THE R5 ARRAY
"RTN","RMPRPRT",109,0)
 W ?1,$P(^RMPR(662,+R5(1,J,0),0),U,1),?10
"RTN","RMPRPRT",110,0)
 S R5=$P(R5(1,J,0),U,4)
"RTN","RMPRPRT",111,0)
 K DIC
"RTN","RMPRPRT",112,0)
 S RC=$P(R5(1,J,0),U,4)
"RTN","RMPRPRT",113,0)
 S REC=$S(RC=1:"SC Vietnam",RC=2:"All Other Service-Connected",RC=3:"NSC A&A",RC=4:"Others Eligible",RC=5:"V.I.S.T.",RC=6:"Voc Rehab.",RC=7:"PHC",RC=8:"Inpatient",RC=9:"Employee",RC=10:"Prima Facia",1:"")
"RTN","RMPRPRT",114,0)
 S RMPRSC=$P(R5(1,J,0),U,3) S RMPRSCC=$S(RMPRSC=1:"SC",RMPRSC=2:"NSC",1:"")
"RTN","RMPRPRT",115,0)
 W REC W:REC'=""&(RMPRSC'="") ?41,RMPRSCC
"RTN","RMPRPRT",116,0)
 K RMPRSCC,RMPRSC,RMEC,REC
"RTN","RMPRPRT",117,0)
 W ?52 S Y=$P(R5(1,J,0),U,2)
"RTN","RMPRPRT",118,0)
 D DD^%DT W Y,?63," ",!
"RTN","RMPRPRT",119,0)
 Q
"VER")
8.0^22.0
"BLD",5610,6)
^SEQ #84
**END**
**END**

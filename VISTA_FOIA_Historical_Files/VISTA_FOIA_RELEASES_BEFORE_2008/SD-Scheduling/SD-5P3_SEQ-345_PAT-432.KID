Released SD*5.3*432 SEQ #345
Extracted from mail message
**KIDS**:SD*5.3*432^

**INSTALL NAME**
SD*5.3*432
"BLD",6055,0)
SD*5.3*432^SCHEDULING^0^3050316^y
"BLD",6055,1,0)
^^2^2^3050316^
"BLD",6055,1,1,0)
Last and Next appointment dates to not print on the Detailed Patient 
"BLD",6055,1,2,0)
Assignment report.
"BLD",6055,4,0)
^9.64PA^^
"BLD",6055,"ABPKG")
n
"BLD",6055,"KRN",0)
^9.67PA^8989.52^19
"BLD",6055,"KRN",.4,0)
.4
"BLD",6055,"KRN",.401,0)
.401
"BLD",6055,"KRN",.402,0)
.402
"BLD",6055,"KRN",.403,0)
.403
"BLD",6055,"KRN",.5,0)
.5
"BLD",6055,"KRN",.84,0)
.84
"BLD",6055,"KRN",3.6,0)
3.6
"BLD",6055,"KRN",3.8,0)
3.8
"BLD",6055,"KRN",9.2,0)
9.2
"BLD",6055,"KRN",9.8,0)
9.8
"BLD",6055,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6055,"KRN",9.8,"NM",1,0)
SCRPU3^^0^B18892849
"BLD",6055,"KRN",9.8,"NM","B","SCRPU3",1)

"BLD",6055,"KRN",19,0)
19
"BLD",6055,"KRN",19.1,0)
19.1
"BLD",6055,"KRN",101,0)
101
"BLD",6055,"KRN",409.61,0)
409.61
"BLD",6055,"KRN",771,0)
771
"BLD",6055,"KRN",870,0)
870
"BLD",6055,"KRN",8989.51,0)
8989.51
"BLD",6055,"KRN",8989.52,0)
8989.52
"BLD",6055,"KRN",8994,0)
8994
"BLD",6055,"KRN","B",.4,.4)

"BLD",6055,"KRN","B",.401,.401)

"BLD",6055,"KRN","B",.402,.402)

"BLD",6055,"KRN","B",.403,.403)

"BLD",6055,"KRN","B",.5,.5)

"BLD",6055,"KRN","B",.84,.84)

"BLD",6055,"KRN","B",3.6,3.6)

"BLD",6055,"KRN","B",3.8,3.8)

"BLD",6055,"KRN","B",9.2,9.2)

"BLD",6055,"KRN","B",9.8,9.8)

"BLD",6055,"KRN","B",19,19)

"BLD",6055,"KRN","B",19.1,19.1)

"BLD",6055,"KRN","B",101,101)

"BLD",6055,"KRN","B",409.61,409.61)

"BLD",6055,"KRN","B",771,771)

"BLD",6055,"KRN","B",870,870)

"BLD",6055,"KRN","B",8989.51,8989.51)

"BLD",6055,"KRN","B",8989.52,8989.52)

"BLD",6055,"KRN","B",8994,8994)

"BLD",6055,"QUES",0)
^9.62^^
"BLD",6055,"REQB",0)
^9.611^1^1
"BLD",6055,"REQB",1,0)
SD*5.3*177^1
"BLD",6055,"REQB","B","SD*5.3*177",1)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
432^3050316
"PKG",16,22,1,"PAH",1,1,0)
^^2^2^3050316
"PKG",16,22,1,"PAH",1,1,1,0)
Last and Next appointment dates to not print on the Detailed Patient 
"PKG",16,22,1,"PAH",1,1,2,0)
Assignment report.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","SCRPU3")
0^1^B18892849
"RTN","SCRPU3",1,0)
SCRPU3 ;ALB/CMM - GENERIC UTILITIES ; 29 Jun 99  04:11PM
"RTN","SCRPU3",2,0)
 ;;5.3;Scheduling;**41,45,52,140,181,177,432**;AUG 13, 1993
"RTN","SCRPU3",3,0)
 ;
"RTN","SCRPU3",4,0)
ELIG(DFN) ;
"RTN","SCRPU3",5,0)
 ;Gets Primary Eligibility
"RTN","SCRPU3",6,0)
 N PRIM,MT
"RTN","SCRPU3",7,0)
 I '$D(^DPT(DFN,.36)) Q 0
"RTN","SCRPU3",8,0)
 I '$D(^DIC(8,+$P(^DPT(DFN,.36),"^"),0)) Q 0
"RTN","SCRPU3",9,0)
 S PRIM=$P($G(^DIC(8,$P($G(^DPT(DFN,.36)),"^"),0)),"^",9)
"RTN","SCRPU3",10,0)
 ;MAS Primary Eligibility Code
"RTN","SCRPU3",11,0)
 S PRIM=$P($G(^DIC(8.1,PRIM,0)),"^")
"RTN","SCRPU3",12,0)
 ;
"RTN","SCRPU3",13,0)
 S PRIM=$TR(PRIM,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","SCRPU3",14,0)
 I PRIM="NON-SERVICE CONNECTED" S PRIM="NSC"
"RTN","SCRPU3",15,0)
 I PRIM["SERVICE CONNECTED" S PRIM=$P(PRIM,"SERVICE CONNECTED")_"SC"_$P(PRIM,"SERVICE CONNECTED",2,999)
"RTN","SCRPU3",16,0)
 I PRIM["LESS THAN" S PRIM=$P(PRIM,"LESS THAN")_"<"_$P(PRIM,"LESS THAN",2,999)
"RTN","SCRPU3",17,0)
 I PRIM[" TO " S PRIM=$P(PRIM," TO ")_"-"_$P(PRIM," TO ",2,999)
"RTN","SCRPU3",18,0)
 I PRIM["%" S PRIM=$TR(PRIM,"%","")
"RTN","SCRPU3",19,0)
 S PRIM=$E(PRIM,1,9)
"RTN","SCRPU3",20,0)
 Q PRIM
"RTN","SCRPU3",21,0)
 ;
"RTN","SCRPU3",22,0)
GETNEXT(DFN,CLN) ;
"RTN","SCRPU3",23,0)
 ;Get next appointment for patient (DFN) at Clinic (CLN)
"RTN","SCRPU3",24,0)
 ;Returning the date in 00/00/0000 format
"RTN","SCRPU3",25,0)
 N NEXT,APPT,FOUND
"RTN","SCRPU3",26,0)
 S APPT=DT,FOUND=0,NEXT=""
"RTN","SCRPU3",27,0)
 F  S APPT=$O(^DPT(DFN,"S",APPT)) Q:APPT=""!(FOUND)  D
"RTN","SCRPU3",28,0)
 .I $P(^DPT(DFN,"S",APPT,0),U,2)'["C" S FOUND=1,NEXT=$TR($$FMTE^XLFDT(APPT,"5DF")," ","0")  ;SD*5.3*432
"RTN","SCRPU3",29,0)
 Q NEXT
"RTN","SCRPU3",30,0)
 ;
"RTN","SCRPU3",31,0)
GETLAST(DFN,CLN) ;
"RTN","SCRPU3",32,0)
 ;Get last appointment for patient (DFN) at Clinic (CLN)
"RTN","SCRPU3",33,0)
 ;Returning the date in 00/00/0000 format
"RTN","SCRPU3",34,0)
 N LAST,APPT,FOUND,STATUS
"RTN","SCRPU3",35,0)
 S APPT=DT,FOUND=0,LAST=""
"RTN","SCRPU3",36,0)
 F  S APPT=$O(^DPT(DFN,"S",APPT),-1) Q:APPT=""!(APPT=0)!(FOUND)  D
"RTN","SCRPU3",37,0)
 .S STATUS=$P(^DPT(DFN,"S",APPT,0),U,2) D    ;SD*5.3*432
"RTN","SCRPU3",38,0)
 ..I STATUS=""!("NAPCA"'[STATUS) S FOUND=1,LAST=$TR($$FMTE^XLFDT(APPT,"5DF")," ","0")
"RTN","SCRPU3",39,0)
 ..Q
"RTN","SCRPU3",40,0)
 .Q
"RTN","SCRPU3",41,0)
 Q LAST
"RTN","SCRPU3",42,0)
 ;
"RTN","SCRPU3",43,0)
PDEVICE() ;
"RTN","SCRPU3",44,0)
 ;Generic Printer Call
"RTN","SCRPU3",45,0)
 N TION,POP
"RTN","SCRPU3",46,0)
 S %ZIS="QN" D ^%ZIS K %ZIS Q:POP!(ION="^") -1
"RTN","SCRPU3",47,0)
 S TION=ION
"RTN","SCRPU3",48,0)
 I $D(IO("Q")) S TION="Q;"_TION
"RTN","SCRPU3",49,0)
 Q TION_"^"_IOST
"RTN","SCRPU3",50,0)
 ;
"RTN","SCRPU3",51,0)
GETTIME() ;
"RTN","SCRPU3",52,0)
 ;Prompt for Queue Time
"RTN","SCRPU3",53,0)
 N X,Y
"RTN","SCRPU3",54,0)
 S DIR(0)="D^::RFE",DIR("A")="Start Time",DIR("B")="NOW"
"RTN","SCRPU3",55,0)
 D ^DIR
"RTN","SCRPU3",56,0)
 I $D(DTOUT)!(X="") S Y=$H
"RTN","SCRPU3",57,0)
 I $D(DUOUT)!($D(DIROUT)) S Y=-1
"RTN","SCRPU3",58,0)
 K DIR,DTOUT,DUOUT,DIROUT
"RTN","SCRPU3",59,0)
 Q Y
"RTN","SCRPU3",60,0)
 ;
"RTN","SCRPU3",61,0)
HOLD(PAGE,TIT,MARG) ;
"RTN","SCRPU3",62,0)
 ;device is home, reached end of page
"RTN","SCRPU3",63,0)
 N X
"RTN","SCRPU3",64,0)
 S MARG=$G(MARG) S:MARG'>80 MARG=80
"RTN","SCRPU3",65,0)
 W !!,"Press Any Key to Continue or '^' to Quit" R X:DTIME
"RTN","SCRPU3",66,0)
 I '$T!(X="^") S STOP=1 Q
"RTN","SCRPU3",67,0)
 D NEWP1(.PAGE,TIT,MARG)
"RTN","SCRPU3",68,0)
 Q
"RTN","SCRPU3",69,0)
 ;
"RTN","SCRPU3",70,0)
NEWP1(PAGE,TITL,MARG) ;
"RTN","SCRPU3",71,0)
 ;new page
"RTN","SCRPU3",72,0)
 ;
"RTN","SCRPU3",73,0)
 S MARG=$G(MARG) S:MARG'>80 MARG=80
"RTN","SCRPU3",74,0)
 D STOPCHK^DGUTL
"RTN","SCRPU3",75,0)
 I $G(STOP) D STOPPED^DGUTL Q
"RTN","SCRPU3",76,0)
 W:PAGE>0 @IOF
"RTN","SCRPU3",77,0)
 S PAGE=PAGE+1
"RTN","SCRPU3",78,0)
 D TITLE(PAGE,TITL,MARG)
"RTN","SCRPU3",79,0)
 Q
"RTN","SCRPU3",80,0)
 ;
"RTN","SCRPU3",81,0)
TITLE(PG,TITL,MARG) ;
"RTN","SCRPU3",82,0)
 N PDATE,SCX,SCI
"RTN","SCRPU3",83,0)
 S MARG=$G(MARG) S:MARG'>80 MARG=80
"RTN","SCRPU3",84,0)
 S PDATE=$$FMTE^XLFDT(DT,"5D")
"RTN","SCRPU3",85,0)
 S SCI=(IOM-$L(TITL)\2) S:SCI<24 SCI=24
"RTN","SCRPU3",86,0)
 S SCX="Printed on: "_PDATE
"RTN","SCRPU3",87,0)
 S $E(SCX,SCI)=TITL
"RTN","SCRPU3",88,0)
 S $E(SCX,(IOM-6-$L(PG)))="Page: "_PG
"RTN","SCRPU3",89,0)
 W SCX,!
"RTN","SCRPU3",90,0)
 Q
"RTN","SCRPU3",91,0)
 ;
"RTN","SCRPU3",92,0)
CLOSE ;close device
"RTN","SCRPU3",93,0)
 D:$E(IOST)'="C" ^%ZISC
"RTN","SCRPU3",94,0)
 Q
"RTN","SCRPU3",95,0)
 ;
"RTN","SCRPU3",96,0)
OPEN ;opens device
"RTN","SCRPU3",97,0)
 IF IOST?1"C-".E D  Q  ;%zis has already been called via $$pdevice
"RTN","SCRPU3",98,0)
 .W @IOF
"RTN","SCRPU3",99,0)
 D ^%ZIS
"RTN","SCRPU3",100,0)
 Q:POP
"RTN","SCRPU3",101,0)
 U IO
"RTN","SCRPU3",102,0)
 Q
"RTN","SCRPU3",103,0)
 ;
"RTN","SCRPU3",104,0)
NODATA(TITL) ;
"RTN","SCRPU3",105,0)
 ;no data to print
"RTN","SCRPU3",106,0)
 ;returns 1
"RTN","SCRPU3",107,0)
 D OPEN
"RTN","SCRPU3",108,0)
 D TITLE(1,TITL)
"RTN","SCRPU3",109,0)
 W !,"No data to report"
"RTN","SCRPU3",110,0)
 D CLOSE
"RTN","SCRPU3",111,0)
 Q 1
"RTN","SCRPU3",112,0)
 ;
"RTN","SCRPU3",113,0)
HELP W:'$D(VAUTNA) !,"ENTER:",!?5,"- A or ALL for all ",VAUTSTR,"s, or"
"RTN","SCRPU3",114,0)
 W:($D(VAUTTN))&(VAUTSTR="TEAM") !?5,"- N or NOT for not assigned to a team or"
"RTN","SCRPU3",115,0)
 W:($D(VAUTPO))&(VAUTSTR="PRACTITIONER") !?5,"- N or NONE or NOT for not assigned to a Practitioner"
"RTN","SCRPU3",116,0)
 W !?5,"- Select individual "_VAUTSTR W:'$D(VAUTPO) " -- limit 20"
"RTN","SCRPU3",117,0)
 W !?5,"Imprecise selections will yield an additional prompt."
"RTN","SCRPU3",118,0)
 I $O(@VAUTVB@(0))]"" W !?5,"- An entry preceeded by a minus [-] sign to remove entry from list."
"RTN","SCRPU3",119,0)
 I $O(@VAUTVB@(0))]"" W !,"NOTE, you have already selected:" S VAJ=0 F VAJ1=0:0 S VAJ=$O(@VAUTVB@(VAJ)) Q:VAJ=""  W !?8,$S(VAUTNI=1:VAJ,1:@VAUTVB@(VAJ))
"RTN","SCRPU3",120,0)
 Q
"RTN","SCRPU3",121,0)
 ;
"RTN","SCRPU3",122,0)
CONV(ORIGA,NEWA) ;
"RTN","SCRPU3",123,0)
 ;ORIGA - original array - name(ien)=data
"RTN","SCRPU3",124,0)
 ;NEWA - new array - name(n)=ien^data
"RTN","SCRPU3",125,0)
 ;
"RTN","SCRPU3",126,0)
 N ENT,CNT
"RTN","SCRPU3",127,0)
 S ENT=0,CNT=0
"RTN","SCRPU3",128,0)
 S NEWA=ORIGA
"RTN","SCRPU3",129,0)
 F  S ENT=$O(ORIGA(ENT)) Q:ENT=""!(ENT'?.N)  D
"RTN","SCRPU3",130,0)
 .S CNT=CNT+1
"RTN","SCRPU3",131,0)
 .S NEWA(CNT)=ENT_"^"_ORIGA(ENT)
"RTN","SCRPU3",132,0)
 Q
"VER")
8.0^22.0
"BLD",6055,6)
^SEQ #345
**END**
**END**

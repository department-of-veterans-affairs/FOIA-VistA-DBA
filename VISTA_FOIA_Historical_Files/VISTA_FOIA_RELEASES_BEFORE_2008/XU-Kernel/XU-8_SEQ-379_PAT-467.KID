Released XU*8*467 SEQ #379
Extracted from mail message
**KIDS**:XU*8.0*467^

**INSTALL NAME**
XU*8.0*467
"BLD",1020,0)
XU*8.0*467^KERNEL^0^3070919^y
"BLD",1020,1,0)
^9.61A^2^2^3070919^^
"BLD",1020,1,1,0)
Kernel patch XU*8.0*467; NPI Phase II Modifications. Please refer to the 
"BLD",1020,1,2,0)
Description in Forum Patch Module for details.
"BLD",1020,4,0)
^9.64PA^200^1
"BLD",1020,4,200,0)
200
"BLD",1020,4,200,2,0)
^9.641^200.042^2
"BLD",1020,4,200,2,200,0)
NEW PERSON  (File-top level)
"BLD",1020,4,200,2,200,1,0)
^9.6411^41.99^1
"BLD",1020,4,200,2,200,1,41.99,0)
NPI
"BLD",1020,4,200,2,200.042,0)
EFFECTIVE DATE/TIME  (sub-file)
"BLD",1020,4,200,2,200.042,1,0)
^9.6411^.03^1
"BLD",1020,4,200,2,200.042,1,.03,0)
NPI
"BLD",1020,4,200,222)
y^n^p^^^^n^^n
"BLD",1020,4,200,224)

"BLD",1020,4,"APDD",200,200)

"BLD",1020,4,"APDD",200,200,41.99)

"BLD",1020,4,"APDD",200,200.042)

"BLD",1020,4,"APDD",200,200.042,.03)

"BLD",1020,4,"B",200,200)

"BLD",1020,6.3)
12
"BLD",1020,"ABPKG")
n
"BLD",1020,"INID")
^y
"BLD",1020,"INIT")
POST^XU8P467
"BLD",1020,"KRN",0)
^9.67PA^779.2^20
"BLD",1020,"KRN",.4,0)
.4
"BLD",1020,"KRN",.4,"NM",0)
^9.68A^1^1
"BLD",1020,"KRN",.4,"NM",1,0)
XUSERINQ    FILE #200^200^0
"BLD",1020,"KRN",.4,"NM","B","XUSERINQ    FILE #200",1)

"BLD",1020,"KRN",.401,0)
.401
"BLD",1020,"KRN",.402,0)
.402
"BLD",1020,"KRN",.403,0)
.403
"BLD",1020,"KRN",.5,0)
.5
"BLD",1020,"KRN",.84,0)
.84
"BLD",1020,"KRN",3.6,0)
3.6
"BLD",1020,"KRN",3.8,0)
3.8
"BLD",1020,"KRN",9.2,0)
9.2
"BLD",1020,"KRN",9.8,0)
9.8
"BLD",1020,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",1020,"KRN",9.8,"NM",1,0)
XUSERNEW^^0^B22745531
"BLD",1020,"KRN",9.8,"NM",2,0)
XU8P467A^^0^B88291503
"BLD",1020,"KRN",9.8,"NM",3,0)
XUSTAX^^0^B9417496
"BLD",1020,"KRN",9.8,"NM","B","XU8P467A",2)

"BLD",1020,"KRN",9.8,"NM","B","XUSERNEW",1)

"BLD",1020,"KRN",9.8,"NM","B","XUSTAX",3)

"BLD",1020,"KRN",19,0)
19
"BLD",1020,"KRN",19.1,0)
19.1
"BLD",1020,"KRN",101,0)
101
"BLD",1020,"KRN",409.61,0)
409.61
"BLD",1020,"KRN",771,0)
771
"BLD",1020,"KRN",779.2,0)
779.2
"BLD",1020,"KRN",870,0)
870
"BLD",1020,"KRN",8989.51,0)
8989.51
"BLD",1020,"KRN",8989.52,0)
8989.52
"BLD",1020,"KRN",8994,0)
8994
"BLD",1020,"KRN","B",.4,.4)

"BLD",1020,"KRN","B",.401,.401)

"BLD",1020,"KRN","B",.402,.402)

"BLD",1020,"KRN","B",.403,.403)

"BLD",1020,"KRN","B",.5,.5)

"BLD",1020,"KRN","B",.84,.84)

"BLD",1020,"KRN","B",3.6,3.6)

"BLD",1020,"KRN","B",3.8,3.8)

"BLD",1020,"KRN","B",9.2,9.2)

"BLD",1020,"KRN","B",9.8,9.8)

"BLD",1020,"KRN","B",19,19)

"BLD",1020,"KRN","B",19.1,19.1)

"BLD",1020,"KRN","B",101,101)

"BLD",1020,"KRN","B",409.61,409.61)

"BLD",1020,"KRN","B",771,771)

"BLD",1020,"KRN","B",779.2,779.2)

"BLD",1020,"KRN","B",870,870)

"BLD",1020,"KRN","B",8989.51,8989.51)

"BLD",1020,"KRN","B",8989.52,8989.52)

"BLD",1020,"KRN","B",8994,8994)

"BLD",1020,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",1020,"QUES",0)
^9.62^^
"BLD",1020,"REQB",0)
^9.611^3^3
"BLD",1020,"REQB",1,0)
XU*8.0*454^1
"BLD",1020,"REQB",2,0)
XU*8.0*419^1
"BLD",1020,"REQB",3,0)
XU*8.0*459^1
"BLD",1020,"REQB","B","XU*8.0*419",2)

"BLD",1020,"REQB","B","XU*8.0*454",1)

"BLD",1020,"REQB","B","XU*8.0*459",3)

"FIA",200)
NEW PERSON
"FIA",200,0)
^VA(200,
"FIA",200,0,0)
200I
"FIA",200,0,1)
y^n^p^^^^n^^n
"FIA",200,0,10)

"FIA",200,0,11)

"FIA",200,0,"RLRO")

"FIA",200,0,"VR")
8.0^XU
"FIA",200,200)
1
"FIA",200,200,41.99)

"FIA",200,200.042)
1
"FIA",200,200.042,.03)

"INIT")
POST^XU8P467
"IX",200,200,"NPI42",0)
200^NPI42^NPI42 X-REF^R^^F^IR^W^200.042^^^^^LS
"IX",200,200,"NPI42",1)
S ^VA(200,"NPI42",$E(X,1,10),DA(1),DA)=""
"IX",200,200,"NPI42",2)
K ^VA(200,"NPI42",$E(X,1,10),DA(1),DA)
"IX",200,200,"NPI42",2.5)
K ^VA(200,"NPI42")
"IX",200,200,"NPI42",11.1,0)
^.114IA^1^1
"IX",200,200,"NPI42",11.1,1,0)
1^F^200.042^.03^10^1^F
"KRN",.4,27,-1)
0^1
"KRN",.4,27,0)
XUSERINQ^3070803.1149^^200^^@^3070914
"KRN",.4,27,"DXS",1,9.2)
S DIP(1)=$S($D(^VA(200,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1)_"  (#"_$S('$D(D0):"",D0<0:"",1:D0)_")"
"KRN",.4,27,"DXS",2,9.2)
S DIP(1)=$S($D(^VA(200,D0,0)):^(0),1:"") S X=$P(DIP(1),U,11),DIP(2)=$G(X) S X=1,X1=DIP(2) S X=$$FMTE^XLFDT(X1,X) S X=X,DIP(3)=$G(X) S X="TD"
"KRN",.4,27,"DXS",3,9.2)
S DIP(2)=$C(59)_$P($G(^DD(200,7,0)),U,3),DIP(1)=$S($D(^VA(200,D0,0)):^(0),1:"") S X=$P($P(DIP(2),$C(59)_$P(DIP(1),U,7)_":",2),$C(59)),DIP(3)=$G(X) S X="DIS"
"KRN",.4,27,"DXS",4,9.2)
S DIP(1)=$S($D(^VA(200,D0,1)):^(1),1:"") S X=$P($G(^VA(200,+$P(DIP(1),U,8),0)),U),DIP(2)=$G(X) S X=19
"KRN",.4,27,"DXS",5,9.2)
S DIP(1)=$S($D(^VA(200,D0,1)):^(1),1:"") S X=$P(DIP(1),U,7),DIP(2)=$G(X) S X=1,X1=DIP(2) S X=$$FMTE^XLFDT(X1,X) S X=X,DIP(3)=$G(X) S X=62
"KRN",.4,27,"DXS",6,9.2)
S DIP(2)=$C(59)_$P($G(^DD(200,200.04,0)),U,3),DIP(1)=$S($D(^VA(200,D0,200)):^(200),1:"") S X=$P($P(DIP(2),$C(59)_$P(DIP(1),U,4)_":",2),$C(59)),DIP(3)=$G(X) S X=19
"KRN",.4,27,"DXS",7,9.2)
S DIP(1)=$S($D(^VA(200,D0,0)):^(0),1:"") S X=$P(DIP(1),U,4),DIP(2)=$G(X) S X=62
"KRN",.4,27,"DXS",8,9.2)
S DIP(1)=$S($D(^VA(200,D0,200)):^(200),1:"") S X=$P(DIP(1),U,10),DIP(2)=$G(X) S X=19
"KRN",.4,27,"DXS",9,9.2)
S DIP(2)=$C(59)_$P($G(^DD(200,200.09,0)),U,3),DIP(1)=$S($D(^VA(200,D0,200)):^(200),1:"") S X=$P($P(DIP(2),$C(59)_$P(DIP(1),U,9)_":",2),$C(59)),DIP(3)=$G(X) S X=62
"KRN",.4,27,"DXS",10,9.2)
S DIP(1)=$S($D(^VA(200,D0,0)):^(0),1:"") S X=$P($G(^DIC(3.1,+$P(DIP(1),U,9),0)),U),DIP(2)=$G(X) S X=19
"KRN",.4,27,"DXS",11,9.2)
S DIP(1)=$S($D(^VA(200,D0,.13)):^(.13),1:"") S X=$P(DIP(1),U,2),DIP(2)=$G(X) S X=62
"KRN",.4,27,"DXS",12,9.2)
S DIP(2)=$C(59)_$P($G(^DD(200,200.06,0)),U,3),DIP(1)=$S($D(^VA(200,D0,200)):^(200),1:"") S X=$P($P(DIP(2),$C(59)_$P(DIP(1),U,6)_":",2),$C(59)),DIP(3)=$G(X) S X=19
"KRN",.4,27,"DXS",13,9.2)
S DIP(1)=$S($D(^VA(200,D0,.13)):^(.13),1:"") S X=$P(DIP(1),U,7),DIP(2)=$G(X) S X=62
"KRN",.4,27,"DXS",14,9.2)
S DIP(1)=$S($D(^VA(200,D0,1.1)):^(1.1),1:"") S X=$P(DIP(1),U,1),DIP(2)=$G(X) S X="1D",X1=DIP(2) S X=$$FMTE^XLFDT(X1,X) S X=X,DIP(3)=$G(X) S X=19
"KRN",.4,27,"DXS",15,9.2)
S DIP(1)=$S($D(^VA(200,D0,.13)):^(.13),1:"") S X=$P(DIP(1),U,8),DIP(2)=$G(X) S X=62
"KRN",.4,27,"DXS",16,9.2)
S X="ESIG",X=$S(X=""!(X'?.ANP):"",$D(DIPA($E(X,1,30))):DIPA($E(X,1,30)),1:"") S X=X,DIP(1)=$G(X) S X=19
"KRN",.4,27,"DXS",17,9.2)
S DIP(2)=$C(59)_$P($G(^DD(200,53.1,0)),U,3),DIP(1)=$S($D(^VA(200,D0,"PS")):^("PS"),1:"") S X=$P($P(DIP(2),$C(59)_$P(DIP(1),U,1)_":",2),$C(59)),DIP(3)=$G(X) S X=62
"KRN",.4,27,"DXS",18,9.2)
S DIP(1)=$S($D(^VA(200,D0,"NPI")):^("NPI"),1:"") S X=$P(DIP(1),U,1),DIP(2)=$G(X) S X=19
"KRN",.4,27,"DXS",19,9.2)
S X="TAX",X=$S(X=""!(X'?.ANP):"",$D(DIPA($E(X,1,30))):DIPA($E(X,1,30)),1:"") S X=X,DIP(1)=$G(X) S X=62
"KRN",.4,27,"DXS",20,9.2)
S DIP(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P(DIP(1),U,2),X=X S X=X,DIP(2)=$G(X) S X="POS"
"KRN",.4,27,"DXS",21,9.2)
S DIP(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^HL(771.9,+$P(DIP(1),U,1),0)),U),DIP(2)=$G(X) S X="F12.1"
"KRN",.4,27,"DXS",22,9.2)
S DIP(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^USC(8932.2,+$P(DIP(1),U,2),0)),U),DIP(2)=$G(X) S X="F12.2"
"KRN",.4,27,"DXS",23,9.2)
N C S Y=$P(DIP(1),U,3),C="FXO" D:$D(^DD(200,12.3,0)) Y^DIQ
"KRN",.4,27,"DXS",23,9.3)
S DIP(1)=$S($D(^VA(200,D0,12)):^(12),1:"") X DXS(23,9.2) S X=Y,DIP(2)=$G(X) S X="F12.3"
"KRN",.4,27,"DXS",24,9.2)
S DIP(1)=$S($D(^VA(200,D0,12)):^(12),1:"") S X=$P($G(^DIC(4,+$P(DIP(1),U,4),0)),U),DIP(2)=$G(X) S X="F12.4"
"KRN",.4,27,"DXS",25,9.2)
S I(0,0)=$G(D0),DIP(1)=$S($D(^VA(200,D0,201)):^(201),1:""),D0=$P(DIP(1),U,1) S:'D0!'$D(^DIC(19,+D0,0)) D0=-1 S DIP(101)=$S($D(^DIC(19,D0,0)):^(0),1:"")
"KRN",.4,27,"DXS",26,9.2)
S I(1,0)=$G(D1),I(0,0)=$G(D0),DIP(1)=$S($D(^VA(200,D0,203,D1,0)):^(0),1:""),D0=$P(DIP(1),U,1) S:'D0!'$D(^DIC(19,+D0,0)) D0=-1 S DIP(101)=$S($D(^DIC(19,D0,0)):^(0),1:"")
"KRN",.4,27,"DXS",27,9)
W:$O(^VA(200,D0,"ORD",0)) !?2,"Name  Description",?46,"Effective   Expiration",!?2,"----  -----------",?46,"---------   ----------"
"KRN",.4,27,"DXS",28,9.2)
S I(1,0)=$G(D1),I(0,0)=$G(D0),DIP(1)=$S($D(^VA(200,D0,"ORD",D1,0)):^(0),1:""),D0=$P(DIP(1),U,1) S:'D0!'$D(^ORD(101.13,+D0,0)) D0=-1 S DIP(101)=$S($D(^ORD(101.13,D0,0)):^(0),1:"")
"KRN",.4,27,"DXS",29,0)
NO
"KRN",.4,27,"DXS",29,1)
YES
"KRN",.4,27,"F",1)
X DXS(1,9.2) S %=$L(X),%1=$X,$P(%2,"-",%)="-" W X,!,?%1,%2 K %1,%2 S X="" W X K DIP;C1;"";Z;"XUDASH(NAME_"  (#"_NUMBER_")")"~"Service/Section: ";C1;~
"KRN",.4,27,"F",2)
29~
"KRN",.4,27,"F",3)
X DXS(2,9.2) S X1=DIP(3) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;"";X;Z;"SETPARAM(XUFMTOEX(TERMINATION DATE,1),"TD")"~
"KRN",.4,27,"F",4)
W:$L($P(^VA(200,D0,0),U,11)) !,$C(7),?5,"Terminated:   ",DIPA("TD");Z;"W:$L($P(^VA(200,D0,0),U,11)) !,$C(7),?5,"Terminated:   ",DIPA("TD")"~
"KRN",.4,27,"F",5)
X DXS(3,9.2) S X1=DIP(3) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;"";X;Z;"SETPARAM(DISUSER,"DIS")"~
"KRN",.4,27,"F",6)
W:DIPA("DIS")["Y" !,?8,"Disuser:   ",DIPA("DIS");Z;"W:DIPA("DIS")["Y" !,?8,"Disuser:   ",DIPA("DIS")"~D INQ^XUS9 S X="";Z;"D INQ^XUS9 S X="""~
"KRN",.4,27,"F",7)
S X="ATTRIBUTES",%=$L(X),%1=$X,$P(%2,"-",%)="-" W X,!,?%1,%2 K %1,%2 S X="" W X K DIP;C1;S1;Z;"XUDASH("ATTRIBUTES")"~"Creator";C3;""~
"KRN",.4,27,"F",8)
X DXS(4,9.2) S X1=DIP(2) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(CREATOR,19)"~
"KRN",.4,27,"F",9)
S X="Date entered" W X K DIP;C43;";Z;""Date entered""~
"KRN",.4,27,"F",10)
X DXS(5,9.2) S X1=DIP(3) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(XUFMTOEX(DATE ENTERED,1),62)"~
"KRN",.4,27,"F",11)
"Mult Sign-on";C3~
"KRN",.4,27,"F",12)
X DXS(6,9.2) S X1=DIP(3) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(MULTIPLE SIGN-ON,19)"~
"KRN",.4,27,"F",13)
"Fileman codes";C43~
"KRN",.4,27,"F",14)
X DXS(7,9.2) S X1=DIP(2) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(FILE MANAGER ACCESS CODE,62)"~
"KRN",.4,27,"F",15)
"Time-out";C3~
"KRN",.4,27,"F",16)
X DXS(8,9.2) S X1=DIP(2) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(TIMED READ,19)"~
"KRN",.4,27,"F",17)
"Type-ahead";C43~
"KRN",.4,27,"F",18)
X DXS(9,9.2) S X1=DIP(3) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(TYPE-AHEAD,62)"~
"KRN",.4,27,"F",19)
"Title";C3;""~X DXS(10,9.2) S X1=DIP(2) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(TITLE,19)"~
"KRN",.4,27,"F",20)
"Office Phone";C43~
"KRN",.4,27,"F",21)
X DXS(11,9.2) S X1=DIP(2) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(OFFICE PHONE,62)"~
"KRN",.4,27,"F",22)
"Auto-Menu";C3;""~
"KRN",.4,27,"F",23)
X DXS(12,9.2) S X1=DIP(3) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(AUTO MENU,19)"~
"KRN",.4,27,"F",24)
"Voice Pager";C43~
"KRN",.4,27,"F",25)
X DXS(13,9.2) S X1=DIP(2) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(VOICE PAGER,62)"~
"KRN",.4,27,"F",26)
"Last Sign-on";C3~
"KRN",.4,27,"F",27)
X DXS(14,9.2) S X1=DIP(3) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(XUFMTOEX(LAST SIGN,"1D"),19)"~
"KRN",.4,27,"F",28)
"Digital Pager";C43~
"KRN",.4,27,"F",29)
X DXS(15,9.2) S X1=DIP(2) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(DIGITAL PAGER,62)"~
"KRN",.4,27,"F",30)
"Has a E-SIG";C3~
"KRN",.4,27,"F",31)
S DIPA("ESIG")=$S($L($P($G(^VA(200,D0,20)),U,4)):"Yes",1:"No");"";X;Z;"S DIPA("ESIG")=$S($L($P($G(^VA(200,D0,20)),U,4)):"Yes",1:"No")"~
"KRN",.4,27,"F",32)
X DXS(16,9.2) S X1=DIP(1) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(PARAM("ESIG"),19)"~
"KRN",.4,27,"F",33)
"Write Med's";C43~
"KRN",.4,27,"F",34)
X DXS(17,9.2) S X1=DIP(3) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(AUTHORIZED TO WRITE,62)"~
"KRN",.4,27,"F",35)
" ";C1~"NPI";C3~X DXS(18,9.2) S X1=DIP(2) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(NPI,19)"~
"KRN",.4,27,"F",36)
"Taxonomy";C43~S DIPA("TAX")=$P($$TAXINQ^XUSTAX(D0),"^");"";X;Z;"S DIPA("TAX")=$P($$TAXINQ^XUSTAX(D0),"^")"~
"KRN",.4,27,"F",37)
X DXS(19,9.2) S X1=DIP(1) S %=$X,%1=$S(X>%:X-%,1:0),%="",$P(%,".",%1)="." W %,X1 K %,%1 S (X,X1)="" W X K DIP;"";Z;"XUDOTTAB(PARAM("TAX"),62)"~
"KRN",.4,27,"F",38)
"Person Class: ";C3~D SHPC^XUSER1(D0);Z;"D SHPC^XUSER1(D0)"~" ";C1~
"KRN",.4,27,"F",39)
X DXS(20,9.2) S X1=DIP(2) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;X;Z;"SETPARAM(INTERNAL(#12.2),"POS")"~
"KRN",.4,27,"F",40)
W:$G(DIPA("POS"))'="" !,"Clinical Trainee Data";Z;"W:$G(DIPA("POS"))'="" !,"Clinical Trainee Data""~
"KRN",.4,27,"F",41)
W:$G(DIPA("POS"))'="" !,"---------------------";Z;"W:$G(DIPA("POS"))'="" !,"---------------------""~
"KRN",.4,27,"F",42)
X DXS(21,9.2) S X1=DIP(2) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;X;Z;"SETPARAM((#12.1),"F12.1")"~
"KRN",.4,27,"F",43)
W:$G(DIPA("POS"))'="" !,?2,"Current Degree Level: ",DIPA("F12.1");Z;"W:$G(DIPA("POS"))'="" !,?2,"Current Degree Level: ",DIPA("F12.1")"~
"KRN",.4,27,"F",44)
X DXS(22,9.2) S X1=DIP(2) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;Z;"SETPARAM((#12.2),"F12.2")"~
"KRN",.4,27,"F",45)
W:$G(DIPA("POS"))'="" !,?2,"Program of Study: ",DIPA("F12.2");Z;"W:$G(DIPA("POS"))'="" !,?2,"Program of Study: ",DIPA("F12.2")"~
"KRN",.4,27,"F",46)
X DXS(23,9.3) S X1=DIP(2) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;Z;"SETPARAM((#12.3),"F12.3")"~
"KRN",.4,27,"F",47)
W:$G(DIPA("POS"))'="" !,?2,"Last Training Year: ",DIPA("F12.3");Z;"W:$G(DIPA("POS"))'="" !,?2,"Last Training Year: ",DIPA("F12.3")"~
"KRN",.4,27,"F",48)
X DXS(24,9.2) S X1=DIP(2) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;Z;"SETPARAM((#12.4),"F12.4")"~
"KRN",.4,27,"F",49)
W:$G(DIPA("POS"))'="" !,?2,"VHA Training Facility: ",DIPA("F12.4");Z;"W:$G(DIPA("POS"))'="" !,?2,"VHA Training Facility: ",DIPA("F12.4")"~
"KRN",.4,27,"F",50)
W:$G(DIPA("POS"))'="" !," ";Z;"W:$G(DIPA("POS"))'="" !," ""~
"KRN",.4,27,"F",51)
S DIP(1)=$S($D(^VA(200,D0,201)):^(201),1:"") S X="Primary Menu: "_$P($G(^DIC(19,+$P(DIP(1),U,1),0)),U) W X K DIP;C1;Z;""Primary Menu: "_PRIMARY MENU"~
"KRN",.4,27,"F",52)
X DXS(25,9.2) S X=$P(DIP(101),U,2) S D0=I(0,0) W X K DIP;C40;"";Z;"PRIMARY MENU:MENU TEXT"~
"KRN",.4,27,"F",53)
S X="Secondary Menu(s)",%=$L(X),%1=$X,$P(%2,"-",%)="-" W X,!,?%1,%2 K %1,%2 S X="" W X K DIP;C1;Z;"XUDASH("Secondary Menu(s)")"~203,2;C2;""~
"KRN",.4,27,"F",54)
203,S DIP(1)=$S($D(^VA(200,D0,203,D1,0)):^(0),1:"") S X="["_$P($G(^DIC(19,+$P(DIP(1),U,1),0)),U)_"]" W X K DIP;C8;"";Z;""["_SECONDARY MENU OPTIONS_"]""~
"KRN",.4,27,"F",55)
203,X DXS(26,9.2) S X=$P(DIP(101),U,2) S D0=I(0,0) S D1=I(1,0) W X K DIP;C42;"";Z;".01:MENU TEXT"~
"KRN",.4,27,"F",56)
S X="Keys Held",%=$L(X),%1=$X,$P(%2,"-",%)="-" W X,!,?%1,%2 K %1,%2 S X="" W X K DIP;S1;Z;"XUDASH("Keys Held")"~
"KRN",.4,27,"F",57)
D GKEYS^XUSER1(D0,.DIP),SHLIST^XUSER1(.DIP,3,4);Z;"D GKEYS^XUSER1(D0,.DIP),SHLIST^XUSER1(.DIP,3,4)"~
"KRN",.4,27,"F",58)
S X="Patient Selection",%=$L(X),%1=$X,$P(%2,"-",%)="-" W X,!,?%1,%2 K %1,%2 S X="" W X K DIP;S1;Z;"XUDASH("Patient Selection")"~"Restrict?:";C3~
"KRN",.4,27,"F",59)
101.01;C14~"OE/RR List:";C2~101.02;C14;""~
"KRN",.4,27,"F",60)
S X="CPRS Access Tabs",%=$L(X),%1=$X,$P(%2,"-",%)="-" W X,!,?%1,%2 K %1,%2 S X="" W X K DIP;S1;Z;"XUDASH("CPRS Access Tabs")"~
"KRN",.4,27,"F",61)
X DXS(27,9);Z;"W:$O(^VA(200,D0,"ORD",0)) !?2,"Name  Description",?46,"Effective   Expiration",!?2,"----  -----------",?46,"---------   ----------""~
"KRN",.4,27,"F",62)
101.13,.01;C3;X~101.13,X DXS(28,9.2) S X=$P(DIP(101),U,2) S D0=I(0,0) S D1=I(1,0) W X K DIP;C9;X;Z;"CPRS TAB:TAB DESCRIPTION"~101.13,.02;C46;X~
"KRN",.4,27,"F",63)
101.13,.03;C59;X~
"KRN",.4,27,"F",64)
S X="CPRS Parameter info (User Specific)",%=$L(X),%1=$X,$P(%2,"-",%)="-" W X,!,?%1,%2 K %1,%2 S X="" W X K DIP;S1;Z;"XUDASH("CPRS Parameter info (User Specific)")"~
"KRN",.4,27,"F",65)
D GPARAM^XUSER1(D0,"ORWOR WRITE ORDERS LIST",.DIP),SHLIST^XUSER1(.DIP,3,3);"";Z;"D GPARAM^XUSER1(D0,"ORWOR WRITE ORDERS LIST",.DIP),SHLIST^XUSER1(.DIP,3,3)"~
"KRN",.4,27,"F",66)
D GPARAM^XUSER1(D0,"ORWDX WRITE ORDERS LIST",.DIP),SHLIST^XUSER1(.DIP,3,3);"";Z;"D GPARAM^XUSER1(D0,"ORWDX WRITE ORDERS LIST",.DIP),SHLIST^XUSER1(.DIP,3,3)"~
"KRN",.4,27,"F",67)
D GPARAM^XUSER1(D0,"OR ADD ORDERS MENU",.DIP),SHLIST^XUSER1(.DIP,3,3);Z;"D GPARAM^XUSER1(D0,"OR ADD ORDERS MENU",.DIP),SHLIST^XUSER1(.DIP,3,3)"~"";S1~
"KRN",.4,27,"F",68)
D CLEAN^DILF;Z;"D CLEAN^DILF"~
"KRN",.4,27,"F",69)
S Y=IOSL N IOSL S IOSL=$S(IOST["P-":999,1:Y),Y=D0 D EN^XMA7;Z;"S Y=IOSL N IOSL S IOSL=$S(IOST["P-":999,1:Y),Y=D0 D EN^XMA7"~"";S1~
"KRN",.4,27,"H")
@
"KRN",.4,27,"IOM")
80
"KRN",.4,27,"LAST")
1
"KRN",.4,27,"ROU")
^XUCT01
"KRN",.4,27,"ROUOLD")
XUCT01
"KRN",.4,27,"SUB")
1
"MBREQ")
0
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"PKG",3,-1)
1^1
"PKG",3,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",3,20,0)
^9.402P^^0
"PKG",3,22,0)
^9.49I^1^1
"PKG",3,22,1,0)
8.0^3051215^2970507^.5
"PKG",3,22,1,"PAH",1,0)
467^3070919
"PKG",3,22,1,"PAH",1,1,0)
^^2^2^3070919
"PKG",3,22,1,"PAH",1,1,1,0)
Kernel patch XU*8.0*467; NPI Phase II Modifications. Please refer to the 
"PKG",3,22,1,"PAH",1,1,2,0)
Description in Forum Patch Module for details.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","XU8P467")
0^^B50769945^n/a
"RTN","XU8P467",1,0)
XU8P467 ; BT/OAKLAND - POST ROUTINE;8/2/07
"RTN","XU8P467",2,0)
 ;;8.0;KERNEL;**467**;Jul 10, 1995;Build 12
"RTN","XU8P467",3,0)
 Q
"RTN","XU8P467",4,0)
POST ;
"RTN","XU8P467",5,0)
 D ADD,EDIT,COMP
"RTN","XU8P467",6,0)
 S X="XU8P467A" X ^%ZOSF("DEL")
"RTN","XU8P467",7,0)
 Q
"RTN","XU8P467",8,0)
COMP ; compile template
"RTN","XU8P467",9,0)
 N X,Y,DMAX S X="XUCT01"
"RTN","XU8P467",10,0)
 S Y=$$FIND1^DIC(.4,"","MX","XUSERINQ","","","ERR")
"RTN","XU8P467",11,0)
 S DMAX=$$ROUSIZE^DILF I +Y>0 D EN^DIPZ
"RTN","XU8P467",12,0)
 Q
"RTN","XU8P467",13,0)
ADD ; Add new entries from 957-1131 
"RTN","XU8P467",14,0)
 N XUI,XUPR,XUCL,XUSP,XUX12,XUIEN,XUDATA
"RTN","XU8P467",15,0)
 F XUI=1:1:150 S XUDATA=$T(DATA+XUI^XU8P467A) Q:XUDATA=" ;;END"  D
"RTN","XU8P467",16,0)
 . S XUDATA=$P(XUDATA,";;",2) Q:XUDATA="END"
"RTN","XU8P467",17,0)
 . S XUIEN=$P(XUDATA,"^"),XUPR=$P(XUDATA,"^",2),XUCL=$P(XUDATA,"^",3),XUSP=$P(XUDATA,"^",4),XUX12=$P(XUDATA,"^",5)
"RTN","XU8P467",18,0)
 . D UPDT(XUIEN,XUPR,XUCL,XUSP,XUX12)
"RTN","XU8P467",19,0)
 F XUI=1:1:150 S XUDATA=$T(DATA+XUI) Q:XUDATA=" ;;END"  D
"RTN","XU8P467",20,0)
 . S XUDATA=$P(XUDATA,";;",2) Q:XUDATA="END"
"RTN","XU8P467",21,0)
 . S XUIEN=$P(XUDATA,"^"),XUPR=$P(XUDATA,"^",2),XUCL=$P(XUDATA,"^",3),XUSP=$P(XUDATA,"^",4),XUX12=$P(XUDATA,"^",5)
"RTN","XU8P467",22,0)
 . D UPDT(XUIEN,XUPR,XUCL,XUSP,XUX12)
"RTN","XU8P467",23,0)
 Q
"RTN","XU8P467",24,0)
EDIT ;Edit entries 954,955,956
"RTN","XU8P467",25,0)
 N FDA
"RTN","XU8P467",26,0)
 S FDA(8932.1,"954,",.01)="Hospitals",FDA(8932.1,"954,",1)="General Acute Care Hospital",FDA(8932.1,"954,",3)="a"
"RTN","XU8P467",27,0)
 D FILE^DIE("","FDA","ZZERR")
"RTN","XU8P467",28,0)
 N FDA
"RTN","XU8P467",29,0)
 S FDA(8932.1,"955,",.01)="Ambulatory Health Care Facilities",FDA(8932.1,"955,",1)="Clinic/Center"
"RTN","XU8P467",30,0)
 S FDA(8932.1,"955,",2)="VA",FDA(8932.1,"955,",3)="a"
"RTN","XU8P467",31,0)
 D FILE^DIE("","FDA","ZZERR")
"RTN","XU8P467",32,0)
 N FDA
"RTN","XU8P467",33,0)
 S FDA(8932.1,"956,",.01)="Suppliers",FDA(8932.1,"956,",1)="Department of Veterans Affairs (VA) Pharmacy",FDA(8932.1,"956,",3)="a"
"RTN","XU8P467",34,0)
 D FILE^DIE("","FDA","ZZERR")
"RTN","XU8P467",35,0)
 ;
"RTN","XU8P467",36,0)
 N FDA ; inactivate the entry #1046
"RTN","XU8P467",37,0)
 S FDA(8932.1,"1046,",3)="i",FDA(8932.1,"1046,",4)=3050401
"RTN","XU8P467",38,0)
 D FILE^DIE("","FDA","ZZERR")
"RTN","XU8P467",39,0)
 Q
"RTN","XU8P467",40,0)
UPDT(XUIEN,XUPR,XUCL,XUSP,XUX12) ; add single entry
"RTN","XU8P467",41,0)
 N FDA,FDAIEN S FDAIEN(1)=XUIEN
"RTN","XU8P467",42,0)
 S FDA(8932.1,"+1,",.01)=XUPR,FDA(8932.1,"+1,",1)=XUCL
"RTN","XU8P467",43,0)
 S FDA(8932.1,"+1,",2)=XUSP,FDA(8932.1,"+1,",3)="a"
"RTN","XU8P467",44,0)
 S FDA(8932.1,"+1,",6)=XUX12,FDA(8932.1,"+1,",90002)="N"
"RTN","XU8P467",45,0)
 D UPDATE^DIE("","FDA","FDAIEN","ERR")
"RTN","XU8P467",46,0)
 Q
"RTN","XU8P467",47,0)
DATA ; information of entries from 1076-1131
"RTN","XU8P467",48,0)
 ;;1076^Residential Treatment Facilities^Community Based Residential Treatment Facility, Mental Retardation and/or Developmental Disabilities^^320900000X
"RTN","XU8P467",49,0)
 ;;1077^Residential Treatment Facilities^Psychiatric Residential Treatment Facility^^323P00000X
"RTN","XU8P467",50,0)
 ;;1078^Residential Treatment Facilities^Residential Treatment Facility, Emotionally Disturbed Children^^322D00000X
"RTN","XU8P467",51,0)
 ;;1079^Residential Treatment Facilities^Residential Treatment Facility, Mental Retardation and/or Developmental Disabilities^^320600000X
"RTN","XU8P467",52,0)
 ;;1080^Residential Treatment Facilities^Residential Treatment Facility, Physical Disabilities^^320700000X
"RTN","XU8P467",53,0)
 ;;1081^Residential Treatment Facilities^Substance Abuse Rehabilitation Facility^^324500000X
"RTN","XU8P467",54,0)
 ;;1082^Residential Treatment Facilities^Substance Abuse Rehabilitation Facility^Substance Abuse Treatment, Children^3245S0500X
"RTN","XU8P467",55,0)
 ;;1083^Respite Care Facility^Respite Care^^385H00000X
"RTN","XU8P467",56,0)
 ;;1084^Respite Care Facility^Respite Care^Respite Care Camp^385HR2050X
"RTN","XU8P467",57,0)
 ;;1085^Respite Care Facility^Respite Care^Respite Care, Mental Illness, Child^385HR2055X
"RTN","XU8P467",58,0)
 ;;1086^Respite Care Facility^Respite Care^Respite Care, Mental Retardation and/or Developmental Disabilities^385HR2060X
"RTN","XU8P467",59,0)
 ;;1087^Respite Care Facility^Respite Care^Respite Care, Physical Disabilities, Child^385HR2065X
"RTN","XU8P467",60,0)
 ;;1088^Suppliers^Blood Bank^^331L00000X
"RTN","XU8P467",61,0)
 ;;1089^Suppliers^Durable Medical Equipment & Medical Supplies^^332B00000X
"RTN","XU8P467",62,0)
 ;;1090^Suppliers^Durable Medical Equipment & Medical Supplies^Customized Equipment^332BC3200X
"RTN","XU8P467",63,0)
 ;;1091^Suppliers^Durable Medical Equipment & Medical Supplies^Dialysis Equipment & Supplies^332BD1200X
"RTN","XU8P467",64,0)
 ;;1092^Suppliers^Durable Medical Equipment & Medical Supplies^Nursing Facility Supplies^332BN1400X
"RTN","XU8P467",65,0)
 ;;1093^Suppliers^Durable Medical Equipment & Medical Supplies^Oxygen Equipment & Supplies^332BX2000X
"RTN","XU8P467",66,0)
 ;;1094^Suppliers^Durable Medical Equipment & Medical Supplies^Parenteral & Enteral Nutrition^332BP3500X
"RTN","XU8P467",67,0)
 ;;1095^Suppliers^Emergency Response System Companies^^333300000X
"RTN","XU8P467",68,0)
 ;;1096^Suppliers^Eye Bank^^332G00000X
"RTN","XU8P467",69,0)
 ;;1097^Suppliers^Eyewear Supplier (Equipment, not the service)^^332H00000X
"RTN","XU8P467",70,0)
 ;;1098^Suppliers^Hearing Aid Equipment^^332S00000X
"RTN","XU8P467",71,0)
 ;;1099^Suppliers^Home Delivered Meals^^332U00000X
"RTN","XU8P467",72,0)
 ;;1100^Suppliers^Indian Health Service/Tribal/Urban Indian Health (I/T/U) Pharmacy^^332800000X
"RTN","XU8P467",73,0)
 ;;1101^Suppliers^Military/U.S. Coast Guard Pharmacy^^332000000X
"RTN","XU8P467",74,0)
 ;;1102^Suppliers^Non-Pharmacy Dispensing Site^^332900000X
"RTN","XU8P467",75,0)
 ;;1103^Suppliers^Organ Procurement Organization^^335U00000X
"RTN","XU8P467",76,0)
 ;;1104^Suppliers^Pharmacy^^333600000X
"RTN","XU8P467",77,0)
 ;;1105^Suppliers^Pharmacy^Clinic Pharmacy^3336C0002X
"RTN","XU8P467",78,0)
 ;;1106^Suppliers^Pharmacy^Community/Retail Pharmacy^3336C0003X
"RTN","XU8P467",79,0)
 ;;1107^Suppliers^Pharmacy^Compounding Pharmacy^3336C0004X
"RTN","XU8P467",80,0)
 ;;1108^Suppliers^Pharmacy^Home Infusion Therapy Pharmacy^3336H0001X
"RTN","XU8P467",81,0)
 ;;1109^Suppliers^Pharmacy^Institutional Pharmacy^3336I0012X
"RTN","XU8P467",82,0)
 ;;1110^Suppliers^Pharmacy^Long Term Care Pharmacy^3336L0003X
"RTN","XU8P467",83,0)
 ;;1111^Suppliers^Pharmacy^Mail Order Pharmacy^3336M0002X
"RTN","XU8P467",84,0)
 ;;1112^Suppliers^Pharmacy^Managed Care Organization Pharmacy^3336M0003X
"RTN","XU8P467",85,0)
 ;;1113^Suppliers^Pharmacy^Nuclear Pharmacy^3336N0007X
"RTN","XU8P467",86,0)
 ;;1114^Suppliers^Pharmacy^Specialty Pharmacy^3336S0011X
"RTN","XU8P467",87,0)
 ;;1115^Suppliers^Portable X-Ray Supplier^^335V00000X
"RTN","XU8P467",88,0)
 ;;1116^Suppliers^Prosthetic/Orthotic Supplier^^335E00000X
"RTN","XU8P467",89,0)
 ;;1117^Transportation Services^Ambulance^^341600000X
"RTN","XU8P467",90,0)
 ;;1118^Transportation Services^Ambulance^Air Transport^3416A0800X
"RTN","XU8P467",91,0)
 ;;1119^Transportation Services^Ambulance^Land Transport^3416L0300X
"RTN","XU8P467",92,0)
 ;;1120^Transportation Services^Ambulance^Water Transport^3416S0300X
"RTN","XU8P467",93,0)
 ;;1121^Transportation Services^Bus^^347B00000X
"RTN","XU8P467",94,0)
 ;;1122^Transportation Services^Military/U.S. Coast Guard Transport^^341800000X
"RTN","XU8P467",95,0)
 ;;1123^Transportation Services^Military/U.S. Coast Guard Transport^Military or U.S. Coast Guard Ambulance, Air Transport^3418M1120X
"RTN","XU8P467",96,0)
 ;;1124^Transportation Services^Military/U.S. Coast Guard Transport^Military or U.S. Coast Guard Ambulance, Ground Transport^3418M1110X
"RTN","XU8P467",97,0)
 ;;1125^Transportation Services^Military/U.S. Coast Guard Transport^Military or U.S. Coast Guard Ambulance, Water Transport^3418M1130X
"RTN","XU8P467",98,0)
 ;;1126^Transportation Services^Non-emergency Medical Transport (VAN)^^343900000X
"RTN","XU8P467",99,0)
 ;;1127^Transportation Services^Private Vehicle^^347C00000X
"RTN","XU8P467",100,0)
 ;;1128^Transportation Services^Secured Medical Transport (VAN)^^343800000X
"RTN","XU8P467",101,0)
 ;;1129^Transportation Services^Taxi^^344600000X
"RTN","XU8P467",102,0)
 ;;1130^Transportation Services^Train^^347D00000X
"RTN","XU8P467",103,0)
 ;;1131^Transportation Services^Transportation Broker^^347E00000X
"RTN","XU8P467",104,0)
 ;;END
"RTN","XU8P467A")
0^2^B88291503^n/a
"RTN","XU8P467A",1,0)
XU8P467A ; BT/BP - Update the Person Class file #9832.1; 7/2/07
"RTN","XU8P467A",2,0)
 ;;8.0;KERNEL;**467**;Jul 10, 1995;Build 12
"RTN","XU8P467A",3,0)
DATA ; information of entries from 957-1131
"RTN","XU8P467A",4,0)
 ;;957^Agencies^Local Education Agency (LEA)^^251300000X
"RTN","XU8P467A",5,0)
 ;;958^Agencies^Case Management^^251B00000X
"RTN","XU8P467A",6,0)
 ;;959^Agencies^Community/Behavioral Health^^251S00000X
"RTN","XU8P467A",7,0)
 ;;960^Agencies^Day Training, Developmentally Disabled Services^^251C00000X
"RTN","XU8P467A",8,0)
 ;;961^Agencies^Early Intervention Provider Agency^^252Y00000X
"RTN","XU8P467A",9,0)
 ;;962^Agencies^Home Health^^251E00000X
"RTN","XU8P467A",10,0)
 ;;963^Agencies^Home Infusion^^251F00000X
"RTN","XU8P467A",11,0)
 ;;964^Agencies^Hospice Care, Community Based^^251G00000X
"RTN","XU8P467A",12,0)
 ;;965^Agencies^Nursing Care^^251J00000X
"RTN","XU8P467A",13,0)
 ;;966^Agencies^Program of All-Inclusive Care for the Elderly (PACE) Provider Organization^^251T00000X
"RTN","XU8P467A",14,0)
 ;;967^Agencies^Public Health or Welfare^^251K00000X
"RTN","XU8P467A",15,0)
 ;;968^Agencies^Supports Brokerage^^251X00000X
"RTN","XU8P467A",16,0)
 ;;969^Agencies^Voluntary or Charitable^^251V00000X
"RTN","XU8P467A",17,0)
 ;;970^Ambulatory Health Care Facilities^Clinic/Center^^261Q00000X
"RTN","XU8P467A",18,0)
 ;;971^Ambulatory Health Care Facilities^Clinic/Center^Adolescent and Children Mental Health^261QM0855X
"RTN","XU8P467A",19,0)
 ;;972^Ambulatory Health Care Facilities^Clinic/Center^Adult Day Care^261QA0600X
"RTN","XU8P467A",20,0)
 ;;973^Ambulatory Health Care Facilities^Clinic/Center^Adult Mental Health^261QM0850X
"RTN","XU8P467A",21,0)
 ;;974^Ambulatory Health Care Facilities^Clinic/Center^Ambulatory Family Planning Facility^261QA0005X
"RTN","XU8P467A",22,0)
 ;;975^Ambulatory Health Care Facilities^Clinic/Center^Ambulatory Fertility Facility^261QA0006X
"RTN","XU8P467A",23,0)
 ;;976^Ambulatory Health Care Facilities^Clinic/Center^Ambulatory Surgical^261QA1903X
"RTN","XU8P467A",24,0)
 ;;977^Ambulatory Health Care Facilities^Clinic/Center^Amputee^261QA0900X
"RTN","XU8P467A",25,0)
 ;;978^Ambulatory Health Care Facilities^Clinic/Center^Augmentative Communication^261QA3000X
"RTN","XU8P467A",26,0)
 ;;979^Ambulatory Health Care Facilities^Clinic/Center^Birthing^261QB0400X
"RTN","XU8P467A",27,0)
 ;;980^Ambulatory Health Care Facilities^Clinic/Center^Community Health^261QC1500X
"RTN","XU8P467A",28,0)
 ;;981^Ambulatory Health Care Facilities^Clinic/Center^Corporate Health^261QC1800X
"RTN","XU8P467A",29,0)
 ;;982^Ambulatory Health Care Facilities^Clinic/Center^Critical Access Hospital^261QC0050X
"RTN","XU8P467A",30,0)
 ;;983^Ambulatory Health Care Facilities^Clinic/Center^Dental^261QD0000X
"RTN","XU8P467A",31,0)
 ;;984^Ambulatory Health Care Facilities^Clinic/Center^Developmental Disabilities^261QD1600X
"RTN","XU8P467A",32,0)
 ;;985^Ambulatory Health Care Facilities^Clinic/Center^Emergency Care^261QE0002X
"RTN","XU8P467A",33,0)
 ;;986^Ambulatory Health Care Facilities^Clinic/Center^Endoscopy^261QE0800X
"RTN","XU8P467A",34,0)
 ;;987^Ambulatory Health Care Facilities^Clinic/Center^End-Stage Renal Disease (ESRD) Treatment^261QE0700X
"RTN","XU8P467A",35,0)
 ;;988^Ambulatory Health Care Facilities^Clinic/Center^Family Planning, Non-Surgical^261QF0050X
"RTN","XU8P467A",36,0)
 ;;989^Ambulatory Health Care Facilities^Clinic/Center^Federally Qualified Health Center (FQHC)^261QF0400X
"RTN","XU8P467A",37,0)
 ;;990^Ambulatory Health Care Facilities^Clinic/Center^Genetics^261QG0250X
"RTN","XU8P467A",38,0)
 ;;991^Ambulatory Health Care Facilities^Clinic/Center^Health Service^261QH0100X
"RTN","XU8P467A",39,0)
 ;;992^Ambulatory Health Care Facilities^Clinic/Center^Hearing and Speech^261QH0700X
"RTN","XU8P467A",40,0)
 ;;993^Ambulatory Health Care Facilities^Clinic/Center^Infusion Therapy^261QI0500X
"RTN","XU8P467A",41,0)
 ;;994^Ambulatory Health Care Facilities^Clinic/Center^Lithotripsy^261QL0400X
"RTN","XU8P467A",42,0)
 ;;995^Ambulatory Health Care Facilities^Clinic/Center^Magnetic Resonance Imaging (MRI)^261QM1200X
"RTN","XU8P467A",43,0)
 ;;996^Ambulatory Health Care Facilities^Clinic/Center^Medical Specialty^261QM2500X
"RTN","XU8P467A",44,0)
 ;;997^Ambulatory Health Care Facilities^Clinic/Center^Medically Fragile Infants and Children Day Care^261QM3000X
"RTN","XU8P467A",45,0)
 ;;998^Ambulatory Health Care Facilities^Clinic/Center^Mental Health (Including Community Mental Health Center)^261QM0801X
"RTN","XU8P467A",46,0)
 ;;999^Ambulatory Health Care Facilities^Clinic/Center^Methadone^261QM2800X
"RTN","XU8P467A",47,0)
 ;;1000^Ambulatory Health Care Facilities^Clinic/Center^Migrant Health^261QM1000X
"RTN","XU8P467A",48,0)
 ;;1001^Ambulatory Health Care Facilities^Clinic/Center^Military Ambulatory Procedure Visits Operational (Transportable)^261QM1103X
"RTN","XU8P467A",49,0)
 ;;1002^Ambulatory Health Care Facilities^Clinic/Center^Military and U.S. Coast Guard Ambulatory Procedure^261QM1101X
"RTN","XU8P467A",50,0)
 ;;1003^Ambulatory Health Care Facilities^Clinic/Center^Military Outpatient Operational (Transportable) Component^261QM1102X
"RTN","XU8P467A",51,0)
 ;;1004^Ambulatory Health Care Facilities^Clinic/Center^Military/U.S. Coast Guard Outpatient^261QM1100X
"RTN","XU8P467A",52,0)
 ;;1005^Ambulatory Health Care Facilities^Clinic/Center^Multi-Specialty^261QM1300X
"RTN","XU8P467A",53,0)
 ;;1006^Ambulatory Health Care Facilities^Clinic/Center^Occupational Medicine^261QX0100X
"RTN","XU8P467A",54,0)
 ;;1007^Ambulatory Health Care Facilities^Clinic/Center^Oncology^261QX0200X
"RTN","XU8P467A",55,0)
 ;;1008^Ambulatory Health Care Facilities^Clinic/Center^Oncology, Radiation^261QX0203X
"RTN","XU8P467A",56,0)
 ;;1009^Ambulatory Health Care Facilities^Clinic/Center^Ophthalmologic Surgery^261QS0132X
"RTN","XU8P467A",57,0)
 ;;1010^Ambulatory Health Care Facilities^Clinic/Center^Oral and Maxillofacial Surgery^261QS0112X
"RTN","XU8P467A",58,0)
 ;;1011^Ambulatory Health Care Facilities^Clinic/Center^Pain^261QP3300X
"RTN","XU8P467A",59,0)
 ;;1012^Ambulatory Health Care Facilities^Clinic/Center^Physical Therapy^261QP2000X
"RTN","XU8P467A",60,0)
 ;;1013^Ambulatory Health Care Facilities^Clinic/Center^Podiatric^261QP1100X
"RTN","XU8P467A",61,0)
 ;;1014^Ambulatory Health Care Facilities^Clinic/Center^Primary Care^261QP2300X
"RTN","XU8P467A",62,0)
 ;;1015^Ambulatory Health Care Facilities^Clinic/Center^Prison Health^261QP2400X
"RTN","XU8P467A",63,0)
 ;;1016^Ambulatory Health Care Facilities^Clinic/Center^Public Health, Federal^261QP0904X
"RTN","XU8P467A",64,0)
 ;;1017^Ambulatory Health Care Facilities^Clinic/Center^Public Health, State or Local^261QP0905X
"RTN","XU8P467A",65,0)
 ;;1018^Ambulatory Health Care Facilities^Clinic/Center^Radiology^261QR0200X
"RTN","XU8P467A",66,0)
 ;;1019^Ambulatory Health Care Facilities^Clinic/Center^Radiology, Mammography^261QR0206X
"RTN","XU8P467A",67,0)
 ;;1020^Ambulatory Health Care Facilities^Clinic/Center^Radiology, Mobile^261QR0208X
"RTN","XU8P467A",68,0)
 ;;1021^Ambulatory Health Care Facilities^Clinic/Center^Radiology, Mobile Mammography^261QR0207X
"RTN","XU8P467A",69,0)
 ;;1022^Ambulatory Health Care Facilities^Clinic/Center^Recovery Care^261QR0800X
"RTN","XU8P467A",70,0)
 ;;1023^Ambulatory Health Care Facilities^Clinic/Center^Rehabilitation^261QR0400X
"RTN","XU8P467A",71,0)
 ;;1024^Ambulatory Health Care Facilities^Clinic/Center^Rehabilitation, Cardiac Facilities^261QR0404X
"RTN","XU8P467A",72,0)
 ;;1025^Ambulatory Health Care Facilities^Clinic/Center^Rehabilitation, Comprehensive Outpatient Rehabilitation Facility (CORF)^261QR0401X
"RTN","XU8P467A",73,0)
 ;;1026^Ambulatory Health Care Facilities^Clinic/Center^Rehabilitation, Substance Use Disorder^261QR0405X
"RTN","XU8P467A",74,0)
 ;;1027^Ambulatory Health Care Facilities^Clinic/Center^Research^261QR1100X
"RTN","XU8P467A",75,0)
 ;;1028^Ambulatory Health Care Facilities^Clinic/Center^Rural Health^261QR1300X
"RTN","XU8P467A",76,0)
 ;;1029^Ambulatory Health Care Facilities^Clinic/Center^Sleep Disorder Diagnostic^261QS1200X
"RTN","XU8P467A",77,0)
 ;;1030^Ambulatory Health Care Facilities^Clinic/Center^Student Health^261QS1000X
"RTN","XU8P467A",78,0)
 ;;1031^Ambulatory Health Care Facilities^Clinic/Center^Urgent Care^261QU0200X
"RTN","XU8P467A",79,0)
 ;;1032^Hospital Units^Epilepsy Unit^^273100000X
"RTN","XU8P467A",80,0)
 ;;1033^Hospital Units^Medicare Defined Swing Bed Unit^^275N00000X
"RTN","XU8P467A",81,0)
 ;;1034^Hospital Units^Psychiatric Unit^^273R00000X
"RTN","XU8P467A",82,0)
 ;;1035^Hospital Units^Rehabilitation Unit^^273Y00000X
"RTN","XU8P467A",83,0)
 ;;1036^Hospital Units^Rehabilitation, Substance Use Disorder Unit^^276400000X
"RTN","XU8P467A",84,0)
 ;;1037^Hospitals^Christian Science Sanitorium^^287300000X
"RTN","XU8P467A",85,0)
 ;;1038^Hospitals^Chronic Disease Hospital^^281P00000X
"RTN","XU8P467A",86,0)
 ;;1039^Hospitals^Chronic Disease Hospital^Children^281PC2000X
"RTN","XU8P467A",87,0)
 ;;1040^Hospitals^General Acute Care Hospital^Children^282NC2000X
"RTN","XU8P467A",88,0)
 ;;1041^Hospitals^General Acute Care Hospital^Critical Access^282NC0060X
"RTN","XU8P467A",89,0)
 ;;1042^Hospitals^General Acute Care Hospital^Rural^282NR1301X
"RTN","XU8P467A",90,0)
 ;;1043^Hospitals^General Acute Care Hospital^Women^282NW0100X
"RTN","XU8P467A",91,0)
 ;;1044^Hospitals^Long Term Care Hospital^^282E00000X
"RTN","XU8P467A",92,0)
 ;;1045^Hospitals^Military Hospital^^286500000X
"RTN","XU8P467A",93,0)
 ;;1046^Hospitals^Military Hospital^Community Health^2865C1500X
"RTN","XU8P467A",94,0)
 ;;1047^Hospitals^Military Hospital^Military General Acute Care Hospital^2865M2000X
"RTN","XU8P467A",95,0)
 ;;1048^Hospitals^Military Hospital^Military General Acute Care Hospital. Operational (Transportable)^2865X1600X
"RTN","XU8P467A",96,0)
 ;;1049^Hospitals^Psychiatric Hospital^^283Q00000X
"RTN","XU8P467A",97,0)
 ;;1050^Hospitals^Rehabilitation Hospital^^283X00000X
"RTN","XU8P467A",98,0)
 ;;1051^Hospitals^Rehabilitation Hospital^Children^283XC2000X
"RTN","XU8P467A",99,0)
 ;;1052^Hospitals^Religious Nonmedical Health Care Institution^^282J00000X
"RTN","XU8P467A",100,0)
 ;;1053^Hospitals^Special Hospital^^284300000X
"RTN","XU8P467A",101,0)
 ;;1054^Laboratories^Clinical Medical Laboratory^^291U00000X
"RTN","XU8P467A",102,0)
 ;;1055^Laboratories^Dental Laboratory^^292200000X
"RTN","XU8P467A",103,0)
 ;;1056^Laboratories^Military Clinical Medical Laboratory^^291900000X
"RTN","XU8P467A",104,0)
 ;;1057^Laboratories^Physiological Laboratory^^293D00000X
"RTN","XU8P467A",105,0)
 ;;1058^Managed Care Organizations^Exclusive Provider Organization^^302F00000X
"RTN","XU8P467A",106,0)
 ;;1059^Managed Care Organizations^Health Maintenance Organization^^302R00000X
"RTN","XU8P467A",107,0)
 ;;1060^Managed Care Organizations^Point of Service^^305S00000X
"RTN","XU8P467A",108,0)
 ;;1061^Managed Care Organizations^Preferred Provider Organization^^305R00000X
"RTN","XU8P467A",109,0)
 ;;1062^Nursing & Custodial Care Facilities^Alzheimer Center (Dementia Center)^^311500000X
"RTN","XU8P467A",110,0)
 ;;1063^Nursing & Custodial Care Facilities^Assisted Living Facility^^310400000X
"RTN","XU8P467A",111,0)
 ;;1064^Nursing & Custodial Care Facilities^Assisted Living Facility^Assisted Living, Behavioral Disturbances^3104A0630X
"RTN","XU8P467A",112,0)
 ;;1065^Nursing & Custodial Care Facilities^Assisted Living Facility^Assisted Living, Mental Illness^3104A0625X
"RTN","XU8P467A",113,0)
 ;;1066^Nursing & Custodial Care Facilities^Christian Science Facility^^317400000X
"RTN","XU8P467A",114,0)
 ;;1067^Nursing & Custodial Care Facilities^Custodial Care Facility^^311Z00000X
"RTN","XU8P467A",115,0)
 ;;1068^Nursing & Custodial Care Facilities^Custodial Care Facility^Adult Care Home^311ZA0620X
"RTN","XU8P467A",116,0)
 ;;1069^Nursing & Custodial Care Facilities^Hospice, Inpatient^^315D00000X
"RTN","XU8P467A",117,0)
 ;;1070^Nursing & Custodial Care Facilities^Intermediate Care Facility, Mental Illness ^^310500000X
"RTN","XU8P467A",118,0)
 ;;1071^Nursing & Custodial Care Facilities^Intermediate Care Facility, Mentally Retarded^^315P00000X
"RTN","XU8P467A",119,0)
 ;;1072^Nursing & Custodial Care Facilities^Nursing Facility/Intermediate Care Facility^^313M00000X
"RTN","XU8P467A",120,0)
 ;;1073^Nursing & Custodial Care Facilities^Skilled Nursing Facility^^314000000X
"RTN","XU8P467A",121,0)
 ;;1074^Nursing & Custodial Care Facilities^Skilled Nursing Facility^Nursing Care, Pediatric^3140N1450X
"RTN","XU8P467A",122,0)
 ;;1075^Residential Treatment Facilities^Community Based Residential Treatment Facility, Mental Illness^^320800000X
"RTN","XU8P467A",123,0)
 ;;END
"RTN","XUSERNEW")
0^1^B22745531^B21302863
"RTN","XUSERNEW",1,0)
XUSERNEW ;SF/RWF - ADD NEW USER ;6/27/07
"RTN","XUSERNEW",2,0)
 ;;8.0;KERNEL;**16,49,134,208,157,313,351,419,467**;Jul 10, 1995;Build 12
"RTN","XUSERNEW",3,0)
 ;In the call to NEW^XM for new users the variable XMZ must be undef.
"RTN","XUSERNEW",4,0)
 ;on a reactivation XMZ should be set to the current max message number.
"RTN","XUSERNEW",5,0)
EN ;Add
"RTN","XUSERNEW",6,0)
 N Y,XUN,DR,DIE,DA,DTOUT,DIWF,XMDT,XMM,XMZ
"RTN","XUSERNEW",7,0)
 S Y=$$ADD("","",1) G EXIT:Y'>0,RE:$P(Y,U,3)'=1
"RTN","XUSERNEW",8,0)
 S XUN=+Y ;XU USER ADD called in $$ADD
"RTN","XUSERNEW",9,0)
 S DR="["_$$GET^XUPARAM("XUNEW USER","N")_"]"
"RTN","XUSERNEW",10,0)
 S DIE=200,DA=XUN D XUDIE^XUS5 G:$D(DTOUT) EXIT
"RTN","XUSERNEW",11,0)
 I $$GET1^DIQ(200,XUN_",",11,"I")="" W !,"Without a VERIFY code the user will not be able to sign-on!",$C(7),!
"RTN","XUSERNEW",12,0)
 S Y=XUN K XMZ D NEW^XM K XMDT,XMM,XMZ
"RTN","XUSERNEW",13,0)
 ;ACCESS LETTER, Also see XUSERBLK
"RTN","XUSERNEW",14,0)
 W ! D LETTER(XUN,1)
"RTN","XUSERNEW",15,0)
 K DIR,DIWF,XUTEXT
"RTN","XUSERNEW",16,0)
 ;
"RTN","XUSERNEW",17,0)
 ;Fall in from above, called from REACT
"RTN","XUSERNEW",18,0)
KEYS N DIR,XQHOLD,XQKEY,XQDA,XQAL,XQ6,XQFL
"RTN","XUSERNEW",19,0)
 S DIR(0)="Y",DIR("B")="NO",DIR("A")="Do you wish to allocate security keys" D ^DIR G:$D(DIRUT) EXIT
"RTN","XUSERNEW",20,0)
 I Y=1 S XQHOLD(XUN)="",XQKEY(0)=0,XQDA=0,XQAL=1,XQ6="",XQFL="" D KEY^XQ6
"RTN","XUSERNEW",21,0)
 ;
"RTN","XUSERNEW",22,0)
 ;Check on adding this user to user groups
"RTN","XUSERNEW",23,0)
 I $P(^VA(200,XUN,0),U,3)'="" D  ;Must have access code & mailbox
"RTN","XUSERNEW",24,0)
 .N DIR,Y
"RTN","XUSERNEW",25,0)
 .S DIR(0)="Y",DIR("B")="NO",DIR("A")="Do you wish to add this user to mail groups" D ^DIR Q:$D(DIRUT)
"RTN","XUSERNEW",26,0)
 .I Y=1 D ENLOCAL1^XMVGRP(XUN)
"RTN","XUSERNEW",27,0)
 .K XMDUN,XMDUZ,XMV
"RTN","XUSERNEW",28,0)
 .Q
"RTN","XUSERNEW",29,0)
 ;
"RTN","XUSERNEW",30,0)
EXIT K D0,DA,DDER,DDSFILE,DIE,DIC,DIR,DI,DICR,DIG,DIH,DISYS,DIU,DIV,DIWT,DLAYGO,DR,DQ,K,I,X,X1,XQHOLD,XQKEY,XUN,XUSOLD,XMB,XMZ,Y,Z,XQ6,XQFL,DTOUT
"RTN","XUSERNEW",31,0)
 Q
"RTN","XUSERNEW",32,0)
 ;
"RTN","XUSERNEW",33,0)
RE ;Jump from new user to reactivate
"RTN","XUSERNEW",34,0)
 S XUN=+Y,DIR("A")="This isn't a new user, Want to reactivate?",DIR(0)="Y",DIR("B")="NO"
"RTN","XUSERNEW",35,0)
 D ^DIR
"RTN","XUSERNEW",36,0)
 G EXIT:$D(DIRUT)!(Y'=1),RE2
"RTN","XUSERNEW",37,0)
 ;Reactivate a user
"RTN","XUSERNEW",38,0)
REACT ;SEA/WDE-REACTIVATE A USER
"RTN","XUSERNEW",39,0)
 N XUN,XUSOLD,DIE,DIC,DA,DR,FDA
"RTN","XUSERNEW",40,0)
 S XUN=+$$LOOKUP^XUSER G EXIT:XUN<0
"RTN","XUSERNEW",41,0)
RE2 S XUSOLD=^VA(200,XUN,0)
"RTN","XUSERNEW",42,0)
 S FDA(200,XUN_",",9.2)="@" ;Clear the Termination date
"RTN","XUSERNEW",43,0)
 D UPDATE^DIE("E","FDA")
"RTN","XUSERNEW",44,0)
 ;Show the screanman form
"RTN","XUSERNEW",45,0)
 S DIE=200,DR="["_$$GET^XUPARAM("XUREACT USER","N")_"]",DA=XUN
"RTN","XUSERNEW",46,0)
 D XUDIE^XUS5 G:$D(DTOUT) EXIT
"RTN","XUSERNEW",47,0)
 I $P(^VA(200,XUN,0),U,3)="" W !!,"No ACCESS CODE has been entered.",$C(7),!
"RTN","XUSERNEW",48,0)
 I $P(^VA(200,XUN,0),U,11)>0,$P(^(0),U,11)'>DT W !!,"User is still TERMINATED.",$C(7),!
"RTN","XUSERNEW",49,0)
 I $$GET1^DIQ(200,XUN_",",11,"I")="" W !,"Without a VERIFY code the user will not be able to sign-on!",$C(7),!
"RTN","XUSERNEW",50,0)
 N DIR
"RTN","XUSERNEW",51,0)
 S DIR(0)="Y",DIR("A")="Deny access to old mail messages",DIR("B")="NO",DIR("?")="Enter a 'YES' to restrict access to old mail messages."
"RTN","XUSERNEW",52,0)
 D ^DIR G:$D(DIRUT) EXIT
"RTN","XUSERNEW",53,0)
 K XMZ S:Y=1 XMZ=+$P(^XMB(3.9,0),"^",3) S Y=XUN D NEW^XM K XMDT,XMM,XMZ
"RTN","XUSERNEW",54,0)
 D REACT^XQ84(XUN) ;See if this user's menu trees need to be rebuilt
"RTN","XUSERNEW",55,0)
 G KEYS
"RTN","XUSERNEW",56,0)
 Q
"RTN","XUSERNEW",57,0)
 ;
"RTN","XUSERNEW",58,0)
ADD(NP1,KEYS,NONC) ;Common point to do DIC call for adding a new person.
"RTN","XUSERNEW",59,0)
 ;NP1 will be added to the default or what comes from the NPI field of the KSP.
"RTN","XUSERNEW",60,0)
 ;KEYS is a list of Keys to give the new person
"RTN","XUSERNEW",61,0)
 N DA,DR,DLAYGO,XUITNAME,XUS1,XUS2,DIC,DIE,DIK,NP2,Y
"RTN","XUSERNEW",62,0)
 I $G(^XTV(8989.3,1,"NPI"))]"" X ^("NPI") S NP2=DR
"RTN","XUSERNEW",63,0)
 S:'$D(NP2) NP2="1;"_$S($D(^XUSEC("XUSPF200",DUZ)):9,1:"9R~")_";4;41.99"
"RTN","XUSERNEW",64,0)
 ;";41.99" is for adding National Provider Identifier
"RTN","XUSERNEW",65,0)
 S DIC="^VA(200,",DIC(0)="AELMQ",DLAYGO=200,DIC("A")="Enter NEW PERSON's name (Family,Given Middle Suffix): ",DIC("DR")="",XUITNAME=1
"RTN","XUSERNEW",66,0)
 D ^DIC S XUS1=Y G AX:(Y'>0)!($P(Y,U,3)'>0)
"RTN","XUSERNEW",67,0)
 S DA=+$G(^VA(200,+XUS1,3.1)) I DA,'$G(NONC) D
"RTN","XUSERNEW",68,0)
 . W !,"Name components."
"RTN","XUSERNEW",69,0)
 . S DIE="^VA(20,",DR="1;2;3;5"
"RTN","XUSERNEW",70,0)
 . L +^VA(20,DA,0):60 D ^DIE L -^VA(20,DA,0)
"RTN","XUSERNEW",71,0)
 . I $D(Y)!$D(DTOUT) S DA=+XUS1,XUS1=-1
"RTN","XUSERNEW",72,0)
 . E  S $P(XUS1,U,2)=$P(^VA(200,+XUS1,0),U)
"RTN","XUSERNEW",73,0)
 D:XUS1>0
"RTN","XUSERNEW",74,0)
 . W !,"Now for the Identifiers."
"RTN","XUSERNEW",75,0)
 . S DA=+XUS1,DIE="^VA(200,",DR=NP2_$S($D(NP1):";"_NP1,1:""),DIE("NO^")="OUTOK"
"RTN","XUSERNEW",76,0)
 . L +^VA(200,DA,0):60 D ^DIE L -^VA(200,DA,0)
"RTN","XUSERNEW",77,0)
 . S:$D(Y)!$D(DTOUT) XUS1=-1
"RTN","XUSERNEW",78,0)
 I XUS1<0 D  S XUS1=-1
"RTN","XUSERNEW",79,0)
 . W !?5,"<'",$P(^VA(200,DA,0),U),"' DELETED>"
"RTN","XUSERNEW",80,0)
 . S DIK="^VA(200," D ^DIK
"RTN","XUSERNEW",81,0)
 . Q:$P($G(^DIC(3,0)),U)'="USER"!'$D(^DD(3,0))
"RTN","XUSERNEW",82,0)
 . S DIK="^DIC(3,",XUS1=$P($G(^DIC(3,DA,0)),U,16) D ^DIK
"RTN","XUSERNEW",83,0)
 . Q:'XUS1!($P($G(^DIC(16,0)),U)'="PERSON")!'$D(^DD(16,0))
"RTN","XUSERNEW",84,0)
 . S DIK="^DIC(16,",DA=XUS1 D ^DIK
"RTN","XUSERNEW",85,0)
 N XUSNPI S XUSNPI=$P($G(^VA(200,DA,"NPI")),"^")
"RTN","XUSERNEW",86,0)
 I XUS1>0,+XUSNPI>0 S XUSNPI=$$ADDNPI^XUSNPI("Individual_ID",DA,XUSNPI,$$NOW^XLFDT(),1) ;add NPI
"RTN","XUSERNEW",87,0)
 I XUS1>0,$D(KEYS) F XUS2=1:1 S Y=$P(KEYS,",",XUS2) Q:'$L(Y)  D
"RTN","XUSERNEW",88,0)
 . S %=$$ADD^XQKEY(XUS1,Y) I '% W !,"Key '",Y,"' not allocated"
"RTN","XUSERNEW",89,0)
 I XUS1>0 D CALL^XUSERP(+XUS1,1) ;XQOR add
"RTN","XUSERNEW",90,0)
AX Q XUS1
"RTN","XUSERNEW",91,0)
 ;
"RTN","XUSERNEW",92,0)
REPRINT ;Reprint letter
"RTN","XUSERNEW",93,0)
 S DA=+$$LOOKUP^XUSER G EXIT:DA'>0
"RTN","XUSERNEW",94,0)
 D LETTER(DA)
"RTN","XUSERNEW",95,0)
 G EXIT
"RTN","XUSERNEW",96,0)
 ;
"RTN","XUSERNEW",97,0)
LETTER(XUN,ASK) ;Print access letter
"RTN","XUSERNEW",98,0)
 Q:'$G(XUN)
"RTN","XUSERNEW",99,0)
 N DIWF,FR,TO,BY,DIR,XUTEXT
"RTN","XUSERNEW",100,0)
 S XUTEXT=$$GET^XUPARAM("XUSER COMPUTER ACCOUNT","N"),XUTEXT=$O(^DIC(9.2,"B",XUTEXT,0))
"RTN","XUSERNEW",101,0)
 S DIR(0)="Y",DIR("A")="Print User Account Access Letter"
"RTN","XUSERNEW",102,0)
 I XUTEXT>0 S Y=1 D:$G(ASK) ^DIR I Y=1 D
"RTN","XUSERNEW",103,0)
 . S (XUU,XUU2)="________",DIWF="^DIC(9.2,XUTEXT,1,",DIWF(1)=200,FR=XUN,TO=XUN,BY="NUMBER" D EN2^DIWF
"RTN","XUSERNEW",104,0)
 . Q
"RTN","XUSERNEW",105,0)
 Q
"RTN","XUSTAX")
0^3^B9417496^B7921460
"RTN","XUSTAX",1,0)
XUSTAX ;PRXM/GCD, TAXONOMY CODE LOOKUP FOR INTEGRATED BILLING ;8/3/07
"RTN","XUSTAX",2,0)
        ;;8.0;KERNEL;**410,452,454,467**; July 10, 1995;Build 12
"RTN","XUSTAX",3,0)
        ;
"RTN","XUSTAX",4,0)
        ; Must call at an entry point.
"RTN","XUSTAX",5,0)
        Q
"RTN","XUSTAX",6,0)
        ;
"RTN","XUSTAX",7,0)
        ; TAXIND - Extrinsic function to retrieve the taxonomy code
"RTN","XUSTAX",8,0)
        ;          for a given record in the NEW PERSON file (#200).
"RTN","XUSTAX",9,0)
        ;
"RTN","XUSTAX",10,0)
        ; Input
"RTN","XUSTAX",11,0)
        ;    XUIEN - IEN of the record in file #200
"RTN","XUSTAX",12,0)
        ; Output
"RTN","XUSTAX",13,0)
        ;    Piece 1 = Taxonomy X12 code of the record in file #200
"RTN","XUSTAX",14,0)
        ;    Piece 2 = Taxonomy IEN from file 8932.1
"RTN","XUSTAX",15,0)
TAXIND(XUIEN) ; Get taxonomy for an individual
"RTN","XUSTAX",16,0)
            N U S U="^"
"RTN","XUSTAX",17,0)
        I $G(XUIEN)'>0 Q U
"RTN","XUSTAX",18,0)
        ;I (XUIEN?.N)=0 Q U
"RTN","XUSTAX",19,0)
        I ((XUIEN?.N)!(XUIEN?.N1"."1N.N))=0 Q "-1^Invalid IEN"
"RTN","XUSTAX",20,0)
        N IEN,XUPTR,XUTAXARR,DIC,DR,DA,DIQ,DI,D0,XUTAX
"RTN","XUSTAX",21,0)
        S IEN=0,XUPTR=""
"RTN","XUSTAX",22,0)
        F  S IEN=$O(^VA(200,XUIEN,"USC1",IEN)) Q:'IEN  D  ;Q:XUPTR'=""
"RTN","XUSTAX",23,0)
        . S DIC=200,DR=8932.1,DA=XUIEN,DR(200.05)=".01:3",DA(200.05)=IEN,DIQ="XUTAXARR",DIQ(0)="I"
"RTN","XUSTAX",24,0)
        . D EN^DIQ1
"RTN","XUSTAX",25,0)
        . I XUTAXARR(200.05,IEN,"2","I")>DT Q  ; Not effective yet
"RTN","XUSTAX",26,0)
        . I XUTAXARR(200.05,IEN,"3","I")'="",XUTAXARR(200.05,IEN,"3","I")<DT Q  ; Expired
"RTN","XUSTAX",27,0)
        . S XUPTR=XUTAXARR(200.05,IEN,".01","I")
"RTN","XUSTAX",28,0)
        S XUTAX=$$GET1^DIQ(8932.1,XUPTR,"X12 CODE")
"RTN","XUSTAX",29,0)
        Q XUTAX_U_XUPTR
"RTN","XUSTAX",30,0)
        ;
"RTN","XUSTAX",31,0)
        ; TAXORG - Extrinsic function to retrieve the taxonomy code
"RTN","XUSTAX",32,0)
        ;          for a given record in the INSTITUTION file (#4).
"RTN","XUSTAX",33,0)
        ;
"RTN","XUSTAX",34,0)
        ; Input
"RTN","XUSTAX",35,0)
        ;    XUIEN - IEN of the record in file #4
"RTN","XUSTAX",36,0)
        ; Output
"RTN","XUSTAX",37,0)
        ;    Piece 1 = Taxonomy X12 code of the record in file #4
"RTN","XUSTAX",38,0)
        ;    Piece 2 = Taxonomy IEN from file 8932.1
"RTN","XUSTAX",39,0)
TAXORG(XUIEN) ; Get taxonomy for an organization
"RTN","XUSTAX",40,0)
            N U S U="^"
"RTN","XUSTAX",41,0)
        I $G(XUIEN)'>0 Q U
"RTN","XUSTAX",42,0)
        ;I (XUIEN?.N)=0 Q U
"RTN","XUSTAX",43,0)
        I ((XUIEN?.N)!(XUIEN?.N1"."1N.N))=0 Q "-1^Invalid IEN"
"RTN","XUSTAX",44,0)
        N IEN,XUPTR,XUTAXAR,DIC,DR,DA,DIQ,DI,D0,XUTAX
"RTN","XUSTAX",45,0)
        S IEN=0,XUPTR=""
"RTN","XUSTAX",46,0)
        F  S IEN=$O(^DIC(4,XUIEN,"TAXONOMY",IEN)) Q:'IEN  D
"RTN","XUSTAX",47,0)
        . S DIC=4,DR=43,DA=XUIEN,DR(4.043)=".01:.03",DA(4.043)=IEN,DIQ="XUTAXARR",DIQ(0)="IE"
"RTN","XUSTAX",48,0)
        . D EN^DIQ1
"RTN","XUSTAX",49,0)
        . I XUTAXARR(4.043,IEN,".03","E")'="ACTIVE" Q
"RTN","XUSTAX",50,0)
        . I XUTAXARR(4.043,IEN,".02","E")="YES" S XUPTR=XUTAXARR(4.043,IEN,".01","I") Q
"RTN","XUSTAX",51,0)
        . I XUPTR="" S XUPTR=XUTAXARR(4.043,IEN,".01","I")
"RTN","XUSTAX",52,0)
        S XUTAX=$$GET1^DIQ(8932.1,XUPTR,"X12 CODE")
"RTN","XUSTAX",53,0)
        Q XUTAX_U_XUPTR
"RTN","XUSTAX",54,0)
        ;
"RTN","XUSTAX",55,0)
TAXINQ(XUIEN) ;Get the last taxonomy for an individual
"RTN","XUSTAX",56,0)
 I +$G(XUIEN)'=$G(XUIEN) Q ""
"RTN","XUSTAX",57,0)
 N IEN,XUI,XUY,XUEXF S IEN=0,XUI="",XUEXF="-Expired"
"RTN","XUSTAX",58,0)
 F  S IEN=$O(^VA(200,XUIEN,"USC1",IEN)) Q:'IEN  D
"RTN","XUSTAX",59,0)
 . S XUY=+$G(^VA(200,XUIEN,"USC1",IEN,0))
"RTN","XUSTAX",60,0)
 . S XUI=$G(^USC(8932.1,XUY,0))
"RTN","XUSTAX",61,0)
 . S XUI=$P(XUI,"^",7)
"RTN","XUSTAX",62,0)
 I +$$GET^XUA4A72(XUIEN)=-2,XUI'="" S XUI=XUI_XUEXF
"RTN","XUSTAX",63,0)
 Q XUI
"UP",200,200.042,-1)
200^NPISTATUS
"UP",200,200.042,0)
200.042
"VER")
8.0^22.0
"^DD",200,200,41.99,0)
NPI^FX^^NPI;1^K:'($$CHKDGT^XUSNPIE1(X,DA,"Individual_ID")) X
"^DD",200,200,41.99,1,0)
^.1^^-1
"^DD",200,200,41.99,1,1,0)
200^ANPI
"^DD",200,200,41.99,1,1,1)
S ^VA(200,"ANPI",$E(X,1,30),DA)=""
"^DD",200,200,41.99,1,1,2)
K ^VA(200,"ANPI",$E(X,1,30),DA)
"^DD",200,200,41.99,1,1,"%D",0)
^^1^1^3060301^
"^DD",200,200,41.99,1,1,"%D",1,0)
File entries by NPI.
"^DD",200,200,41.99,1,1,"DT")
3060301
"^DD",200,200,41.99,3)
Answer must be 10 digit value assigned by Centers for Medicare and Medicaid Services (CMS).
"^DD",200,200,41.99,21,0)
^^6^6^3070918^
"^DD",200,200,41.99,21,1,0)
Each VHA Billable Practitioner should have applied for the NPI through
"^DD",200,200,41.99,21,2,0)
CMS' National Plan and Provider Enumeration System (NPPES).  NPI
"^DD",200,200,41.99,21,3,0)
Confirmation Letters are sent by CMS and indicate the NPI assigned.
"^DD",200,200,41.99,21,4,0)
Practitioners may present their NPI Confirmation Letter as a source
"^DD",200,200,41.99,21,5,0)
document to verify the accuracy of the NPI or you may contact your Local
"^DD",200,200,41.99,21,6,0)
NPI Maintenance Team Leader for assistance.
"^DD",200,200,41.99,"DT")
3070918
"^DD",200,200.042,.03,0)
NPI^RFX^^0;3^K:'($$CHKDGT^XUSNPIE1(X,DA,"Individual_ID")) X
"^DD",200,200.042,.03,1,0)
^.1
"^DD",200,200.042,.03,1,1,0)
200.042^C
"^DD",200,200.042,.03,1,1,1)
S ^VA(200,DA(1),"NPISTATUS","C",$E(X,1,30),DA)=""
"^DD",200,200.042,.03,1,1,2)
K ^VA(200,DA(1),"NPISTATUS","C",$E(X,1,30),DA)
"^DD",200,200.042,.03,1,1,"DT")
3060301
"^DD",200,200.042,.03,1,2,0)
200.042^AC^MUMPS
"^DD",200,200.042,.03,1,2,1)
D SET^XUSNPIE1(DA(1),X)
"^DD",200,200.042,.03,1,2,2)
Q
"^DD",200,200.042,.03,1,2,3)
Special Trigger
"^DD",200,200.042,.03,1,2,"%D",0)
^.101^1^1^3060511^^
"^DD",200,200.042,.03,1,2,"%D",1,0)
This Special x-ref sets the NPI field (#41.99).
"^DD",200,200.042,.03,1,2,"DT")
3060511
"^DD",200,200.042,.03,3)
Answer must be 10 digit value assigned by Centers for Medicare and Medicaid Services (CMS).
"^DD",200,200.042,.03,21,0)
^^6^6^3070918^
"^DD",200,200.042,.03,21,1,0)
Each VHA Billable Practitioner should have applied for the NPI through
"^DD",200,200.042,.03,21,2,0)
CMS' National Plan and Provider Enumeration System (NPPES).  NPI
"^DD",200,200.042,.03,21,3,0)
Confirmation Letters are sent by CMS and indicate the NPI assigned.
"^DD",200,200.042,.03,21,4,0)
Practitioners may present their NPI Confirmation Letter as a source
"^DD",200,200.042,.03,21,5,0)
document to verify the accuracy of the NPI or you may contact your Local
"^DD",200,200.042,.03,21,6,0)
NPI Maintenance Team Leader for assistance.
"^DD",200,200.042,.03,"DT")
3070918
"BLD",1020,6)
^379
**END**
**END**

Released EAS*1*40 SEQ #35
Extracted from mail message
**KIDS**:EAS*1.0*40^

**INSTALL NAME**
EAS*1.0*40
"BLD",4382,0)
EAS*1.0*40^ENROLLMENT APPLICATION SYSTEM^0^3031023^y
"BLD",4382,1,0)
^^1^1^3030827^
"BLD",4382,1,1,0)
Long Term Care Copayments Phase IV
"BLD",4382,4,0)
^9.64PA^408.22^3
"BLD",4382,4,408.21,0)
408.21
"BLD",4382,4,408.21,2,0)
^9.641^408.21^1
"BLD",4382,4,408.21,2,408.21,0)
INDIVIDUAL ANNUAL INCOME  (File-top level)
"BLD",4382,4,408.21,2,408.21,1,0)
^9.6411^2.09^3
"BLD",4382,4,408.21,2,408.21,1,2.07,0)
OTHER RESIDENCES/LAND/FARM
"BLD",4382,4,408.21,2,408.21,1,2.08,0)
VEHICLE(S)
"BLD",4382,4,408.21,2,408.21,1,2.09,0)
OTHER LIQUID ASSETS
"BLD",4382,4,408.21,222)
y^y^p^^^^n^^n
"BLD",4382,4,408.21,224)

"BLD",4382,4,408.22,0)
408.22
"BLD",4382,4,408.22,2,0)
^9.641^408.22^1
"BLD",4382,4,408.22,2,408.22,0)
INCOME RELATION  (File-top level)
"BLD",4382,4,408.22,2,408.22,1,0)
^9.6411^.17^2
"BLD",4382,4,408.22,2,408.22,1,.14,0)
MARRIED THIS YEAR
"BLD",4382,4,408.22,2,408.22,1,.17,0)
LEGALLY SEPARATED
"BLD",4382,4,408.22,222)
y^y^p^^^^n^^n
"BLD",4382,4,408.22,224)

"BLD",4382,4,408.31,0)
408.31
"BLD",4382,4,408.31,2,0)
^9.641^408.31^1
"BLD",4382,4,408.31,2,408.31,0)
ANNUAL MEANS TEST  (File-top level)
"BLD",4382,4,408.31,2,408.31,1,0)
^9.6411^2.1^1
"BLD",4382,4,408.31,2,408.31,1,2.1,0)
1010EC FORM
"BLD",4382,4,408.31,222)
y^y^p^^^^n^^n
"BLD",4382,4,408.31,224)

"BLD",4382,4,"APDD",408.21,408.21)

"BLD",4382,4,"APDD",408.21,408.21,2.07)

"BLD",4382,4,"APDD",408.21,408.21,2.08)

"BLD",4382,4,"APDD",408.21,408.21,2.09)

"BLD",4382,4,"APDD",408.22,408.22)

"BLD",4382,4,"APDD",408.22,408.22,.14)

"BLD",4382,4,"APDD",408.22,408.22,.17)

"BLD",4382,4,"APDD",408.31,408.31)

"BLD",4382,4,"APDD",408.31,408.31,2.1)

"BLD",4382,4,"B",408.21,408.21)

"BLD",4382,4,"B",408.22,408.22)

"BLD",4382,4,"B",408.31,408.31)

"BLD",4382,"KRN",0)
^9.67PA^8989.52^19
"BLD",4382,"KRN",.4,0)
.4
"BLD",4382,"KRN",.4,"NM",0)
^9.68A^^
"BLD",4382,"KRN",.401,0)
.401
"BLD",4382,"KRN",.401,"NM",0)
^9.68A^^
"BLD",4382,"KRN",.402,0)
.402
"BLD",4382,"KRN",.402,"NM",0)
^9.68A^3^3
"BLD",4382,"KRN",.402,"NM",1,0)
EASEC ENTER/EDIT ASSETS NEW    FILE #408.21^408.21^0
"BLD",4382,"KRN",.402,"NM",2,0)
EASEC ENTER/EDIT INCOME NEW    FILE #408.21^408.21^0
"BLD",4382,"KRN",.402,"NM",3,0)
EASEC EDIT MARITAL STATUS    FILE #408.22^408.22^0
"BLD",4382,"KRN",.402,"NM","B","EASEC EDIT MARITAL STATUS    FILE #408.22",3)

"BLD",4382,"KRN",.402,"NM","B","EASEC ENTER/EDIT ASSETS NEW    FILE #408.21",1)

"BLD",4382,"KRN",.402,"NM","B","EASEC ENTER/EDIT INCOME NEW    FILE #408.21",2)

"BLD",4382,"KRN",.403,0)
.403
"BLD",4382,"KRN",.403,"NM",0)
^9.68A^^
"BLD",4382,"KRN",.5,0)
.5
"BLD",4382,"KRN",.5,"NM",0)
^9.68A^^
"BLD",4382,"KRN",.84,0)
.84
"BLD",4382,"KRN",.84,"NM",0)
^9.68A^^
"BLD",4382,"KRN",3.6,0)
3.6
"BLD",4382,"KRN",3.6,"NM",0)
^9.68A^^
"BLD",4382,"KRN",3.8,0)
3.8
"BLD",4382,"KRN",3.8,"NM",0)
^9.68A^^
"BLD",4382,"KRN",9.2,0)
9.2
"BLD",4382,"KRN",9.2,"NM",0)
^9.68A^^
"BLD",4382,"KRN",9.8,0)
9.8
"BLD",4382,"KRN",9.8,"NM",0)
^9.68A^21^21
"BLD",4382,"KRN",9.8,"NM",1,0)
EASECA^^0^B15053921
"BLD",4382,"KRN",9.8,"NM",2,0)
EASECU^^0^B7172309
"BLD",4382,"KRN",9.8,"NM",3,0)
EASECSC2^^0^B7316385
"BLD",4382,"KRN",9.8,"NM",4,0)
EASECSCU^^0^B9518083
"BLD",4382,"KRN",9.8,"NM",5,0)
EASECSC4^^0^B11253228
"BLD",4382,"KRN",9.8,"NM",6,0)
EASECSC5^^0^B14985478
"BLD",4382,"KRN",9.8,"NM",7,0)
EASECDD^^0^B51743119
"BLD",4382,"KRN",9.8,"NM",8,0)
EASECDP3^^0^B9369220
"BLD",4382,"KRN",9.8,"NM",9,0)
EASECSU3^^0^B7411866
"BLD",4382,"KRN",9.8,"NM",10,0)
EASECSCC^^0^B35526778
"BLD",4382,"KRN",9.8,"NM",11,0)
EASECE^^0^B15140589
"BLD",4382,"KRN",9.8,"NM",12,0)
EASEC10E^^0^B20828812
"BLD",4382,"KRN",9.8,"NM",13,0)
EASEC100^^0^B63489043
"BLD",4382,"KRN",9.8,"NM",14,0)
EASEC101^^0^B23014708
"BLD",4382,"KRN",9.8,"NM",15,0)
EASEC103^^0^B21798267
"BLD",4382,"KRN",9.8,"NM",16,0)
EASEC10R^^0^B86760896
"BLD",4382,"KRN",9.8,"NM",17,0)
EASECSCR^^0^B14618078
"BLD",4382,"KRN",9.8,"NM",18,0)
EASECEXP^^0^B39421251
"BLD",4382,"KRN",9.8,"NM",19,0)
EASECPC^^0^B14573671
"BLD",4382,"KRN",9.8,"NM",20,0)
EASECPC1^^0^B77767454
"BLD",4382,"KRN",9.8,"NM",21,0)
EASECCAL^^0^B11243307
"BLD",4382,"KRN",9.8,"NM","B","EASEC100",13)

"BLD",4382,"KRN",9.8,"NM","B","EASEC101",14)

"BLD",4382,"KRN",9.8,"NM","B","EASEC103",15)

"BLD",4382,"KRN",9.8,"NM","B","EASEC10E",12)

"BLD",4382,"KRN",9.8,"NM","B","EASEC10R",16)

"BLD",4382,"KRN",9.8,"NM","B","EASECA",1)

"BLD",4382,"KRN",9.8,"NM","B","EASECCAL",21)

"BLD",4382,"KRN",9.8,"NM","B","EASECDD",7)

"BLD",4382,"KRN",9.8,"NM","B","EASECDP3",8)

"BLD",4382,"KRN",9.8,"NM","B","EASECE",11)

"BLD",4382,"KRN",9.8,"NM","B","EASECEXP",18)

"BLD",4382,"KRN",9.8,"NM","B","EASECPC",19)

"BLD",4382,"KRN",9.8,"NM","B","EASECPC1",20)

"BLD",4382,"KRN",9.8,"NM","B","EASECSC2",3)

"BLD",4382,"KRN",9.8,"NM","B","EASECSC4",5)

"BLD",4382,"KRN",9.8,"NM","B","EASECSC5",6)

"BLD",4382,"KRN",9.8,"NM","B","EASECSCC",10)

"BLD",4382,"KRN",9.8,"NM","B","EASECSCR",17)

"BLD",4382,"KRN",9.8,"NM","B","EASECSCU",4)

"BLD",4382,"KRN",9.8,"NM","B","EASECSU3",9)

"BLD",4382,"KRN",9.8,"NM","B","EASECU",2)

"BLD",4382,"KRN",19,0)
19
"BLD",4382,"KRN",19,"NM",0)
^9.68A^2^2
"BLD",4382,"KRN",19,"NM",1,0)
EASEC LTC COPAY TEST EXPIRE^^0
"BLD",4382,"KRN",19,"NM",2,0)
EASEC LTC COPAY MENU^^2
"BLD",4382,"KRN",19,"NM","B","EASEC LTC COPAY MENU",2)

"BLD",4382,"KRN",19,"NM","B","EASEC LTC COPAY TEST EXPIRE",1)

"BLD",4382,"KRN",19.1,0)
19.1
"BLD",4382,"KRN",101,0)
101
"BLD",4382,"KRN",409.61,0)
409.61
"BLD",4382,"KRN",771,0)
771
"BLD",4382,"KRN",870,0)
870
"BLD",4382,"KRN",8989.51,0)
8989.51
"BLD",4382,"KRN",8989.52,0)
8989.52
"BLD",4382,"KRN",8994,0)
8994
"BLD",4382,"KRN","B",.4,.4)

"BLD",4382,"KRN","B",.401,.401)

"BLD",4382,"KRN","B",.402,.402)

"BLD",4382,"KRN","B",.403,.403)

"BLD",4382,"KRN","B",.5,.5)

"BLD",4382,"KRN","B",.84,.84)

"BLD",4382,"KRN","B",3.6,3.6)

"BLD",4382,"KRN","B",3.8,3.8)

"BLD",4382,"KRN","B",9.2,9.2)

"BLD",4382,"KRN","B",9.8,9.8)

"BLD",4382,"KRN","B",19,19)

"BLD",4382,"KRN","B",19.1,19.1)

"BLD",4382,"KRN","B",101,101)

"BLD",4382,"KRN","B",409.61,409.61)

"BLD",4382,"KRN","B",771,771)

"BLD",4382,"KRN","B",870,870)

"BLD",4382,"KRN","B",8989.51,8989.51)

"BLD",4382,"KRN","B",8989.52,8989.52)

"BLD",4382,"KRN","B",8994,8994)

"BLD",4382,"QUES",0)
^9.62^^
"BLD",4382,"REQB",0)
^9.611^2^2
"BLD",4382,"REQB",1,0)
EAS*1.0*34^2
"BLD",4382,"REQB",2,0)
EAS*1.0*39^2
"BLD",4382,"REQB","B","EAS*1.0*34",1)

"BLD",4382,"REQB","B","EAS*1.0*39",2)

"FIA",408.21)
INDIVIDUAL ANNUAL INCOME
"FIA",408.21,0)
^DGMT(408.21,
"FIA",408.21,0,0)
408.21ID
"FIA",408.21,0,1)
y^y^p^^^^n^^n
"FIA",408.21,0,10)

"FIA",408.21,0,11)

"FIA",408.21,0,"RLRO")

"FIA",408.21,0,"VR")
1.0^EAS
"FIA",408.21,408.21)
1
"FIA",408.21,408.21,2.07)

"FIA",408.21,408.21,2.08)

"FIA",408.21,408.21,2.09)

"FIA",408.22)
INCOME RELATION
"FIA",408.22,0)
^DGMT(408.22,
"FIA",408.22,0,0)
408.22IP
"FIA",408.22,0,1)
y^y^p^^^^n^^n
"FIA",408.22,0,10)

"FIA",408.22,0,11)

"FIA",408.22,0,"RLRO")

"FIA",408.22,0,"VR")
1.0^EAS
"FIA",408.22,408.22)
1
"FIA",408.22,408.22,.14)

"FIA",408.22,408.22,.17)

"FIA",408.31)
ANNUAL MEANS TEST
"FIA",408.31,0)
^DGMT(408.31,
"FIA",408.31,0,0)
408.31ID
"FIA",408.31,0,1)
y^y^p^^^^n^^n
"FIA",408.31,0,10)

"FIA",408.31,0,11)

"FIA",408.31,0,"RLRO")

"FIA",408.31,0,"VR")
1.0^EAS
"FIA",408.31,408.31)
1
"FIA",408.31,408.31,2.1)

"KRN",.402,2613,-1)
0^3
"KRN",.402,2613,0)
EASEC EDIT MARITAL STATUS^3030902.1412^@^408.22^^@^3031022
"KRN",.402,2613,"DIAB",2,0,408.22,2)
.08//^S X=$S($D(DGREL("C")):"YES",1:"");REQ;T
"KRN",.402,2613,"DIAB",3,0,408.22,1)
.17;REQ;"ARE YOU LEGALLY SEPARATED"
"KRN",.402,2613,"DIAB",5,0,408.22,0)
.14//^S X=$S("^2^5^"[(U_$S($D(^DPT(DFN,0)):$P(^(0),U,5),1:"")_U)!($D(DGREL("S"))):"YES",1:"NO");REQ;T
"KRN",.402,2613,"DIAB",5,0,408.22,1)
.16;REQ;"IS YOUR SPOUSE RESIDING IN THE COMMUNITY"
"KRN",.402,2613,"DIAB",8,0,408.22,1)
.15;REQ;"ARE YOU LIVING WITH YOUR SPOUSE"
"KRN",.402,2613,"DR",1,408.22)
K DGFIN;I '$D(DFN)!('$D(DGDR)) W !,*7,"Variables DFN and DGDR must be defined!" S Y="@999";S:DGDR'["101" Y="@102";@101;.14T~R~//^S X=$S("^2^5^"[(U_$S($D(^DPT(DFN,0)):$P(^(0),U,5),1:"")_U)!($D(DGREL("S"))):"YES",1:"NO");
"KRN",.402,2613,"DR",1,408.22,1)
S:'X Y="@102";S:'$G(DGFORM) Y=.16;.17ARE YOU LEGALLY SEPARATED~R~;S:X Y="@102";.16IS YOUR SPOUSE RESIDING IN THE COMMUNITY~R~;S:'X Y="@102";S:$G(DGFORM) Y="@102";.15ARE YOU LIVING WITH YOUR SPOUSE~R~;S:X Y="@102";@102;
"KRN",.402,2613,"DR",1,408.22,2)
S:DGDR'["102" Y="@998";.08T~R~//^S X=$S($D(DGREL("C")):"YES",1:"");@998;S DGFIN="";@999;
"KRN",.402,2644,-1)
0^1
"KRN",.402,2644,0)
EASEC ENTER/EDIT ASSETS NEW^3030827.1145^@^408.21^^@^3031022
"KRN",.402,2644,"DIAB",2,0,408.21,1)
2.01;"CASH, STOCKS, BONDS, MUTUAL FUNDS, ETC."
"KRN",.402,2644,"DIAB",8,0,408.21,0)
2.07;"OTHER RESIDENCES/LAND/FARM OR RANCH"
"KRN",.402,2644,"DR",1,408.21)
K DGFIN;I '$D(DGDR) W !,*7,"Variable DGDR must be defined!" S Y="@999";S:DGDR'["101" Y="@102";@101;2.06;@102;S:DGDR'["102" Y="@103";2.07OTHER RESIDENCES/LAND/FARM OR RANCH~;@103;S:DGDR'["103" Y="@104";2.08;@104;
"KRN",.402,2644,"DR",1,408.21,1)
S:DGDR'["104" Y="@105";2.01CASH, STOCKS, BONDS, MUTUAL FUNDS, ETC.~;@105;S:DGDR'["105" Y="@998";2.09;@998;S DGFIN="";@999;
"KRN",.402,2645,-1)
0^2
"KRN",.402,2645,0)
EASEC ENTER/EDIT INCOME NEW^3030828.1633^@^408.21^^@^3031022
"KRN",.402,2645,"DIAB",5,0,408.21,0)
.14;"CURRENT INCOME"
"KRN",.402,2645,"DIAB",8,0,408.21,0)
.15;"INCOME FROM FARM/RANCH/BUSINESS"
"KRN",.402,2645,"DIAB",11,0,408.21,0)
.17;"ALL OTHER INCOME"
"KRN",.402,2645,"DR",1,408.21)
K DGFIN;I '$D(DGDR) W !,*7,"Variable DGDR must be defined!" S Y="@999";S:DGDR'["101" Y="@102";@101;.14CURRENT INCOME~;@102;S:DGDR'["102" Y="@103";.15INCOME FROM FARM/RANCH/BUSINESS~;@103;S:DGDR'["103" Y="@998";.17ALL OTHER INCOME~;
"KRN",.402,2645,"DR",1,408.21,1)
@998;S DGFIN="";@999;
"KRN",19,11069,-1)
2^2
"KRN",19,11069,0)
EASEC LTC COPAY MENU^LTC Copayments Menu^^M^12540^^^^^^^^y
"KRN",19,11069,10,0)
^19.01IP^8^8
"KRN",19,11069,10,8,0)
11581
"KRN",19,11069,10,8,"^")
EASEC LTC COPAY TEST EXPIRE
"KRN",19,11069,"U")
LTC COPAYMENTS MENU
"KRN",19,11581,-1)
0^1
"KRN",19,11581,0)
EASEC LTC COPAY TEST EXPIRE^Expiring or Expired LTC Copayment Tests^^R^^^^^^^^
"KRN",19,11581,1,0)
^^9^9^3030915^
"KRN",19,11581,1,1,0)
This option will print a choice of two reports:  one is a list of 
"KRN",19,11581,1,2,0)
veterans whose LTC copayment test (10-10EC) is about to be a year old 
"KRN",19,11581,1,3,0)
within a user-specified time frame (up to 60 days), the other is a 
"KRN",19,11581,1,4,0)
list of veterans whose LTC copayment test (10-10EC) is more than a year
"KRN",19,11581,1,5,0)
old since a user-specified date. The user will be prompted to select which
"KRN",19,11581,1,6,0)
report to produce. These reports will not include deceased veterans,
"KRN",19,11581,1,7,0)
veterans who were exempt from LTC copayments due to a compensable
"KRN",19,11581,1,8,0)
service-connected disability, or veterans whose LTC episode began before
"KRN",19,11581,1,9,0)
11/30/99.
"KRN",19,11581,25)
EN^EASECEXP
"KRN",19,11581,"U")
EXPIRING OR EXPIRED LTC COPAYM
"MBREQ")
0
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",551,-1)
1^1
"PKG",551,0)
ENROLLMENT APPLICATION SYSTEM^EAS^ENROLLMENT
"PKG",551,20,0)
^9.402P^1^1
"PKG",551,20,1,0)
2^^EASXDR
"PKG",551,20,1,1)
 
"PKG",551,20,"B",2,1)

"PKG",551,22,0)
^9.49I^1^1
"PKG",551,22,1,0)
1.0^3010315^3010523^66481
"PKG",551,22,1,"PAH",1,0)
40^3031023
"PKG",551,22,1,"PAH",1,1,0)
^^1^1^3031023
"PKG",551,22,1,"PAH",1,1,1,0)
Long Term Care Copayments Phase IV
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
21
"RTN","EASEC100")
0^13^B63489043
"RTN","EASEC100",1,0)
EASEC100 ;ALB/BRM,LBD - Print 1010EC LTC Enrollment form ; 3/1/02 8:22am
"RTN","EASEC100",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,7,16,40**;Mar 15, 2001
"RTN","EASEC100",3,0)
 ;
"RTN","EASEC100",4,0)
 ; This routine is called by EASEC10E to gather veteran data to be
"RTN","EASEC100",5,0)
 ; printed in the 1010EC (Long Term Care) form.
"RTN","EASEC100",6,0)
 ;
"RTN","EASEC100",7,0)
GETDATA(EASDFN,EAINFO) ;get veterans LTC data to be printed
"RTN","EASEC100",8,0)
 ;Input:
"RTN","EASEC100",9,0)
 ;   EASDFN - DFN for the Patient file (#2)
"RTN","EASEC100",10,0)
 ;Output:
"RTN","EASEC100",11,0)
 ;   ^TMP("1010EC",$J
"RTN","EASEC100",12,0)
 ;
"RTN","EASEC100",13,0)
 N EASROOT,DGINC,DGINR,DGREL,DGDEP
"RTN","EASEC100",14,0)
 S EASROOT="^TMP(""1010EC"",$J,"_EASDFN_","
"RTN","EASEC100",15,0)
 ; data for section 1
"RTN","EASEC100",16,0)
 D DATA1(EASDFN,.EAINFO,EASROOT)
"RTN","EASEC100",17,0)
 ; data for section 2
"RTN","EASEC100",18,0)
 D DATA2(EASDFN,EASROOT)
"RTN","EASEC100",19,0)
 ; data for section 3
"RTN","EASEC100",20,0)
 D DATA3(EASDFN,.EAINFO,EASROOT,.DGINC)
"RTN","EASEC100",21,0)
 ; data for section 4 and part of section 5
"RTN","EASEC100",22,0)
 D DATA4(EASDFN,EASROOT,.DGINC)
"RTN","EASEC100",23,0)
 ; data for section 5
"RTN","EASEC100",24,0)
 D DATA5(EASDFN,EASROOT,.DGINC)
"RTN","EASEC100",25,0)
 ; data for section 6
"RTN","EASEC100",26,0)
 D DATA6(EASDFN,EASROOT,.DGINC)
"RTN","EASEC100",27,0)
 ; data for section 8
"RTN","EASEC100",28,0)
 D DATA8(EASROOT,.EAINFO)
"RTN","EASEC100",29,0)
 Q
"RTN","EASEC100",30,0)
 ;
"RTN","EASEC100",31,0)
DATA1(EASDFN,EAINFO,EASROOT) ;data for section 1
"RTN","EASEC100",32,0)
 N EASINS,INSTMP,MDATA,EASROOT1,MPA,MPB,MPADT,MPBDT,MCN
"RTN","EASEC100",33,0)
 S EASROOT1=EASROOT_"1)"
"RTN","EASEC100",34,0)
 S @EASROOT1@(1)=$G(EAINFO("VET"))                     ;name
"RTN","EASEC100",35,0)
 S @EASROOT1@(2)=$G(EAINFO("SSN"))                      ;ssn
"RTN","EASEC100",36,0)
 S @EASROOT1@(3)=$$GET1^DIQ(2,EASDFN_",",".381","E")   ;medicaid
"RTN","EASEC100",37,0)
 ; **  determine medicare info
"RTN","EASEC100",38,0)
 S EASINS=0,(MPA,MPB)="NO",(MPADT,MPBDT,MCN)=""
"RTN","EASEC100",39,0)
 S MDATA=$$GETWNR^IBCNSMM1    ;
"RTN","EASEC100",40,0)
 I +MDATA D  ;
"RTN","EASEC100",41,0)
 .F  S EASINS=$O(^DPT(EASDFN,.312,EASINS)) Q:'EASINS  D
"RTN","EASEC100",42,0)
 ..S INSTMP=$G(^DPT(EASDFN,.312,EASINS,0))
"RTN","EASEC100",43,0)
 ..Q:$P(INSTMP,"^")'=+MDATA
"RTN","EASEC100",44,0)
 ..I $P(INSTMP,"^",18)=$P(MDATA,"^",3) S MPA="YES",MPADT=$$FMTE^XLFDT($P(INSTMP,"^",8)),MCN=$P(INSTMP,"^",2) Q
"RTN","EASEC100",45,0)
 ..I $P(INSTMP,"^",18)=$P(MDATA,"^",5) S MPB="YES",MPBDT=$$FMTE^XLFDT($P(INSTMP,"^",8)),MCN=$P(INSTMP,"^",2) Q
"RTN","EASEC100",46,0)
 S @EASROOT1@(4)=MPA      ;medicare part a
"RTN","EASEC100",47,0)
 S @EASROOT1@(5)=MPADT    ;medicare part a effective date
"RTN","EASEC100",48,0)
 S @EASROOT1@(6)=MPB      ;medicare part b
"RTN","EASEC100",49,0)
 S @EASROOT1@(7)=MPBDT    ;medicare part b effective date
"RTN","EASEC100",50,0)
 S @EASROOT1@(8)=MCN      ;medicare claim number
"RTN","EASEC100",51,0)
 Q
"RTN","EASEC100",52,0)
DATA2(EASDFN,EASROOT) ;data for section 2
"RTN","EASEC100",53,0)
 N EASI,EASINS,X,Z,EASROOT2,EASINS,CNT,NUM,EASIN1I,GRPIEN,INSUR
"RTN","EASEC100",54,0)
 S EASROOT2=EASROOT_"2)"
"RTN","EASEC100",55,0)
 S @EASROOT2@(1)=$$GET1^DIQ(2,EASDFN_",",".3192","E")  ;covered by ins
"RTN","EASEC100",56,0)
 F X=2:1:22 S @EASROOT2@(X)=""
"RTN","EASEC100",57,0)
 F I=3,10,17 F Z=.111:.001:.116 S @EASROOT2@(I,Z)=""
"RTN","EASEC100",58,0)
 S EASI=0,CNT=2
"RTN","EASEC100",59,0)
 F  S EASI=$O(^DPT(EASDFN,.312,EASI)) Q:'EASI!(CNT>16)  D
"RTN","EASEC100",60,0)
 .S EASIN1I=EASI_","_EASDFN_","
"RTN","EASEC100",61,0)
 .D GETS^DIQ(2.312,EASIN1I,".01;.18;1;16;17;","IE","INSUR")
"RTN","EASEC100",62,0)
 .S @EASROOT2@(CNT+3)=$G(INSUR(2.312,EASIN1I,17,"E"))  ;insured name
"RTN","EASEC100",63,0)
 .S @EASROOT2@(CNT+4)=$G(INSUR(2.312,EASIN1I,16,"E"))  ;relationship
"RTN","EASEC100",64,0)
 .S @EASROOT2@(CNT+5)=$G(INSUR(2.312,EASIN1I,1,"E"))  ;policy #
"RTN","EASEC100",65,0)
 .S GRPIEN=$G(INSUR(2.312,EASIN1I,.18,"I"))  ;group ien/name
"RTN","EASEC100",66,0)
 .S:GRPIEN @EASROOT2@(CNT+6)=$$GET1^DIQ(355.3,GRPIEN_",",".03","E")
"RTN","EASEC100",67,0)
 .S EASINS=$G(INSUR(2.312,EASIN1I,.01,"I"))  ;pointer to insurance file #36
"RTN","EASEC100",68,0)
 .D INSDAT(EASINS,CNT)
"RTN","EASEC100",69,0)
 .S CNT=CNT+7
"RTN","EASEC100",70,0)
 Q
"RTN","EASEC100",71,0)
INSDAT(EASINS,CNT) ;obtain insurance information from the insurance file (#36)
"RTN","EASEC100",72,0)
 Q:'EASINS
"RTN","EASEC100",73,0)
 N X,INSDAT,ERR
"RTN","EASEC100",74,0)
 D GETS^DIQ(36,EASINS_",",".01;.111:.116;.131","E","INSDAT","ERR")
"RTN","EASEC100",75,0)
 Q:$D(ERR)
"RTN","EASEC100",76,0)
 S @EASROOT2@(CNT)=$G(INSDAT(36,EASINS_",",.01,"E"))  ;insurance name
"RTN","EASEC100",77,0)
 F X=.111:.001:.116 S @EASROOT2@((CNT+1),X)=$G(INSDAT(36,EASINS_",",X,"E"))  ;insurance address
"RTN","EASEC100",78,0)
 S @EASROOT2@(CNT+2)=$G(INSDAT(36,EASINS_",",.131,"E"))  ;ins. phone
"RTN","EASEC100",79,0)
 Q
"RTN","EASEC100",80,0)
DATA3(EASDFN,EAINFO,EASROOT,DGINC) ;data for section 3
"RTN","EASEC100",81,0)
 N INFO13,DEP1,DEP,X,I,EASROOT3,SSN
"RTN","EASEC100",82,0)
 S EASROOT3=EASROOT_"3)"
"RTN","EASEC100",83,0)
 F X=0:1:11 S @EASROOT3@(X)=""
"RTN","EASEC100",84,0)
 D ALL^EASECU21(EASDFN,"SCV",EAINFO("MTDT"),"IPR",$G(EAINFO("DGMTIEN")))
"RTN","EASEC100",85,0)
 ;Marital Status added for LTC Phase IV (EAS*1*40)
"RTN","EASEC100",86,0)
 S @EASROOT3@(0)=$$GET1^DIQ(2,EASDFN,".05","E")
"RTN","EASEC100",87,0)
 S:$$GET1^DIQ(408.22,+$G(DGINR("V")),".17","I") @EASROOT3@(0)="LEGALLY SEPARATED"
"RTN","EASEC100",88,0)
 D:$D(DGREL("S"))
"RTN","EASEC100",89,0)
 .S INFO13=$G(^DGPR(408.13,+$P(DGREL("S"),"^",2),0))
"RTN","EASEC100",90,0)
 .S @EASROOT3@(1)=$P(INFO13,"^")  ;Spouse Name
"RTN","EASEC100",91,0)
 .S SSN=$P(INFO13,"^",9)          ;Spouse SSN
"RTN","EASEC100",92,0)
 .S @EASROOT3@(3)=$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,9)
"RTN","EASEC100",93,0)
 .S:$G(DGINR("V")) @EASROOT3@(2)=$$GET1^DIQ(408.22,DGINR("V"),".16","E")                               ;Spouse Residing in the Community?
"RTN","EASEC100",94,0)
 Q:'$D(DGREL("C"))
"RTN","EASEC100",95,0)
 S DEP=""
"RTN","EASEC100",96,0)
 F  S DEP=$O(DGREL("C",DEP)) Q:'DEP!(DEP>2)  D
"RTN","EASEC100",97,0)
 .Q:'$D(^DGPR(408.13,+$P(DGREL("C",DEP),"^",2),0))
"RTN","EASEC100",98,0)
 .S INFO13=$G(^DGPR(408.13,+$P(DGREL("C",DEP),"^",2),0))
"RTN","EASEC100",99,0)
 .S DEP1=$S(DEP=1:4,DEP=2:8)
"RTN","EASEC100",100,0)
 .S @EASROOT3@(DEP1)=$P(INFO13,"^")                   ;Dependent Name
"RTN","EASEC100",101,0)
 .S @EASROOT3@(DEP1+1)=$$FMTE^XLFDT($P(INFO13,"^",3))  ;Dependent DOB
"RTN","EASEC100",102,0)
 .S SSN=$P(INFO13,"^",9)                               ;Dependent SSN
"RTN","EASEC100",103,0)
 .S @EASROOT3@(DEP1+2)=$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,9)
"RTN","EASEC100",104,0)
 .S:$G(DGINR("C",DEP)) @EASROOT3@(DEP1+3)=$$GET1^DIQ(408.22,DGINR("C",DEP),".16","E")                  ;Dependent Living in Community?
"RTN","EASEC100",105,0)
 Q
"RTN","EASEC100",106,0)
DATA4(EASDFN,EASROOT,DGINC) ;data for section 4 and the first part of 5
"RTN","EASEC100",107,0)
 N EASROOT4,EASROOT5,ASSETV,ASSETS,NUM,X,ASSETRT,IENS,I
"RTN","EASEC100",108,0)
 S EASROOT4=EASROOT_"4)"
"RTN","EASEC100",109,0)
 S EASROOT5=EASROOT_"5)"
"RTN","EASEC100",110,0)
 ;Add subscripts to array to store assets for spouse (needed for new
"RTN","EASEC100",111,0)
 ;10-10EC form).  LTC Phase IV (EAS*1*40)
"RTN","EASEC100",112,0)
 F I=1:.5:4.5 S @EASROOT4@(I)=""
"RTN","EASEC100",113,0)
 F I=1:.5:5.5 S @EASROOT5@(I)=""
"RTN","EASEC100",114,0)
 F X="V","S" Q:'$D(DGINC(X))  D
"RTN","EASEC100",115,0)
 .D GETS^DIQ(408.21,+DGINC(X),"2.01;2.02;2.06:2.09","I","ASSET"_X)
"RTN","EASEC100",116,0)
 .S NUM=$S(X="V":1,1:1.5)
"RTN","EASEC100",117,0)
 .S IENS=+DGINC(X)_","
"RTN","EASEC100",118,0)
 .S ASSETRT="ASSET"_X_"(408.21,"_""""_IENS_""""_","
"RTN","EASEC100",119,0)
 .;Fixed Assets
"RTN","EASEC100",120,0)
 .S @EASROOT4@(NUM)=+$G(@(ASSETRT_"2.06,""I"")")) ;Residence
"RTN","EASEC100",121,0)
 .S @EASROOT4@(NUM+1)=+$G(@(ASSETRT_"2.07,""I"")")) ;Land/Farm
"RTN","EASEC100",122,0)
 .S @EASROOT4@(NUM+2)=+$G(@(ASSETRT_"2.08,""I"")")) ;Vehicles
"RTN","EASEC100",123,0)
 .;Liquid Assets
"RTN","EASEC100",124,0)
 .S @EASROOT5@(NUM)=+$G(@(ASSETRT_"2.01,""I"")")) ;Cash
"RTN","EASEC100",125,0)
 .S @EASROOT5@(NUM+1)=+$G(@(ASSETRT_"2.02,""I"")")) ;Stocks
"RTN","EASEC100",126,0)
 .S @EASROOT5@(NUM+2)=+$G(@(ASSETRT_"2.09,""I"")")) ;Other
"RTN","EASEC100",127,0)
 .;Subtotals
"RTN","EASEC100",128,0)
 .F I=NUM:1:(NUM+2) S @EASROOT4@(NUM+3)=@EASROOT4@(NUM+3)+@EASROOT4@(I),@EASROOT5@(NUM+3)=@EASROOT5@(NUM+3)+@EASROOT5@(I) ;Sub-totals
"RTN","EASEC100",129,0)
 S @EASROOT5@(5)=@EASROOT4@(4)+@EASROOT5@(4)  ;Total Assets Vet
"RTN","EASEC100",130,0)
 S @EASROOT5@(5.5)=@EASROOT4@(4.5)+@EASROOT5@(4.5)  ;Total Assets Spouse
"RTN","EASEC100",131,0)
 Q
"RTN","EASEC100",132,0)
DATA5(EASDFN,EASROOT,DGINC) ;data for section 5 (the rest of it)
"RTN","EASEC100",133,0)
 N EASROOT5,ASSETV,ASSETS,NUM,X,ASSETRT,IENS,I
"RTN","EASEC100",134,0)
 S EASROOT5=EASROOT_"5)"
"RTN","EASEC100",135,0)
 F I=6:1:35 S @EASROOT5@(I)=""
"RTN","EASEC100",136,0)
 F X="V","S" Q:'$D(DGINC(X))  D  ;
"RTN","EASEC100",137,0)
 .D GETS^DIQ(408.21,+DGINC(X),".06:.2","I","ASSET"_X)
"RTN","EASEC100",138,0)
 .S NUM=$S(X="V":6,X="S":7)
"RTN","EASEC100",139,0)
 .S IENS=+DGINC(X)_","
"RTN","EASEC100",140,0)
 .S ASSETRT="ASSET"_X_"(408.21,"_""""_IENS_""""_","
"RTN","EASEC100",141,0)
 .S @EASROOT5@(NUM)=+$G(@(ASSETRT_".14,""I"")"))    ;Gross Income
"RTN","EASEC100",142,0)
 .S @EASROOT5@(NUM+2)=+$G(@(ASSETRT_".08,""I"")"))  ;Soc. Security
"RTN","EASEC100",143,0)
 .S @EASROOT5@(NUM+4)=+$G(@(ASSETRT_".15,""I"")"))  ;Interest/Div
"RTN","EASEC100",144,0)
 .S @EASROOT5@(NUM+6)=+$G(@(ASSETRT_".06,""I"")"))  ;Retire/Pension
"RTN","EASEC100",145,0)
 .S @EASROOT5@(NUM+8)=+$G(@(ASSETRT_".09,""I"")"))  ;Civil Service
"RTN","EASEC100",146,0)
 .S @EASROOT5@(NUM+10)=+$G(@(ASSETRT_".1,""I"")"))  ;US Railroad
"RTN","EASEC100",147,0)
 .S @EASROOT5@(NUM+12)=+$G(@(ASSETRT_".07,""I"")"))  ;VA Pension
"RTN","EASEC100",148,0)
 .S @EASROOT5@(NUM+14)=+$G(@(ASSETRT_".19,""I"")"))  ;Spouse Disab
"RTN","EASEC100",149,0)
 .S @EASROOT5@(NUM+16)=+$G(@(ASSETRT_".12,""I"")"))  ;Unemployment
"RTN","EASEC100",150,0)
 .S @EASROOT5@(NUM+18)=+$G(@(ASSETRT_".16,""I"")"))  ;Workers Comp,etc
"RTN","EASEC100",151,0)
 .S @EASROOT5@(NUM+20)=+$G(@(ASSETRT_".11,""I"")"))  ;Military Retire
"RTN","EASEC100",152,0)
 .S @EASROOT5@(NUM+22)=+$G(@(ASSETRT_".13,""I"")"))  ;Other Retire
"RTN","EASEC100",153,0)
 .S @EASROOT5@(NUM+24)=+$G(@(ASSETRT_".2,""I"")"))  ;Court Mandated
"RTN","EASEC100",154,0)
 .S @EASROOT5@(NUM+26)=+$G(@(ASSETRT_".17,""I"")"))  ;Other Income
"RTN","EASEC100",155,0)
 .F I=NUM:2:NUM+26 S @EASROOT5@(NUM+28)=@EASROOT5@(NUM+28)+@EASROOT5@(I)  ;Total Income
"RTN","EASEC100",156,0)
 Q
"RTN","EASEC100",157,0)
DATA6(EASDFN,EASROOT,DGINC) ;
"RTN","EASEC100",158,0)
 N IENS,EXPRT,EASROOT6,EXPENSE
"RTN","EASEC100",159,0)
 S EASROOT6=EASROOT_"6)"
"RTN","EASEC100",160,0)
 F I=1:1:11 S @EASROOT6@(I)=""
"RTN","EASEC100",161,0)
 Q:'$G(DGINC("V"))
"RTN","EASEC100",162,0)
 D GETS^DIQ(408.21,+DGINC("V"),"1.01:1.1","I","EXPENSE")
"RTN","EASEC100",163,0)
 S IENS=+DGINC("V")_","
"RTN","EASEC100",164,0)
 S EXPRT="EXPENSE(408.21,"_""""_IENS_""""_","
"RTN","EASEC100",165,0)
 S @EASROOT6@(1)=+$G(@(EXPRT_"1.03,""I"")"))  ;Education
"RTN","EASEC100",166,0)
 S @EASROOT6@(2)=+$G(@(EXPRT_"1.02,""I"")"))  ;Funeral and Burial
"RTN","EASEC100",167,0)
 S @EASROOT6@(3)=+$G(@(EXPRT_"1.04,""I"")"))  ;Rent/Mortgage
"RTN","EASEC100",168,0)
 S @EASROOT6@(4)=+$G(@(EXPRT_"1.05,""I"")"))  ;Utilities
"RTN","EASEC100",169,0)
 S @EASROOT6@(5)=+$G(@(EXPRT_"1.06,""I"")"))  ;Car Payment
"RTN","EASEC100",170,0)
 S @EASROOT6@(6)=+$G(@(EXPRT_"1.07,""I"")"))  ;Food
"RTN","EASEC100",171,0)
 S @EASROOT6@(7)=+$G(@(EXPRT_"1.01,""I"")"))  ;Medical Expenses
"RTN","EASEC100",172,0)
 S @EASROOT6@(8)=+$G(@(EXPRT_"1.08,""I"")"))  ;Court-Ordered Payments
"RTN","EASEC100",173,0)
 S @EASROOT6@(9)=+$G(@(EXPRT_"1.09,""I"")"))  ;Insurance
"RTN","EASEC100",174,0)
 S @EASROOT6@(10)=+$G(@(EXPRT_"1.1,""I"")"))  ;Taxes (Income, etc)
"RTN","EASEC100",175,0)
 F I=1:1:10 S @EASROOT6@(11)=@EASROOT6@(11)+@EASROOT6@(I)  ;Total Expenses
"RTN","EASEC100",176,0)
 Q
"RTN","EASEC100",177,0)
DATA8(EASROOT,EAINFO) ;get the word processing field for section 8
"RTN","EASEC100",178,0)
 N LINE,X,EASROOT8,IENS,WP
"RTN","EASEC100",179,0)
 S EASROOT8=EASROOT_"8)",LINE=0
"RTN","EASEC100",180,0)
 Q:'EAINFO("DGMTIEN")
"RTN","EASEC100",181,0)
 S IENS=EAINFO("DGMTIEN")_","
"RTN","EASEC100",182,0)
 S X=$$GET1^DIQ(408.31,IENS,50,"","WP")
"RTN","EASEC100",183,0)
 F  S LINE=$O(WP(LINE)) Q:'LINE  S @EASROOT8@(LINE)=$G(WP(LINE))
"RTN","EASEC100",184,0)
 Q
"RTN","EASEC101")
0^14^B23014708
"RTN","EASEC101",1,0)
EASEC101 ;ALB/BRM,LBD - Print 1010EC LTC Enrollment Form ; 9/6/01 9:46am
"RTN","EASEC101",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,40**;Mar 15, 2001
"RTN","EASEC101",3,0)
 ;
"RTN","EASEC101",4,0)
 ; Called from ^EASEC10E to print page 1 of the 1010EC
"RTN","EASEC101",5,0)
 ;
"RTN","EASEC101",6,0)
PAGE1(EALNE,EAINFO,EASDFN) ;Print page 1
"RTN","EASEC101",7,0)
 N X,EASROOT
"RTN","EASEC101",8,0)
 S EASROOT="^TMP(""1010EC"",$J,"_EASDFN_","
"RTN","EASEC101",9,0)
 D HDRMAIN^EASEC10E(.EALNE)
"RTN","EASEC101",10,0)
 D SEC1
"RTN","EASEC101",11,0)
 D SEC2
"RTN","EASEC101",12,0)
 D SEC3
"RTN","EASEC101",13,0)
 D DISCLAIM
"RTN","EASEC101",14,0)
 D FT^EASEC10E(.EALNE,.EAINFO)
"RTN","EASEC101",15,0)
 Q
"RTN","EASEC101",16,0)
SEC1 ;print section 1 - General Information
"RTN","EASEC101",17,0)
 N EAS1
"RTN","EASEC101",18,0)
 S EAS1=EASROOT_"1)"
"RTN","EASEC101",19,0)
 W !,"1. Veteran's Name",?100,"|2. Social Security Number"
"RTN","EASEC101",20,0)
 W !?3,@EAS1@(1),?100,"|",?104,@EAS1@(2),?131,$C(13) X EAINFO("L")
"RTN","EASEC101",21,0)
 ;
"RTN","EASEC101",22,0)
 W !?26,"Answer Yes or No where applicable (Otherwise provide the requested information)",?131,$C(13) X EAINFO("L")
"RTN","EASEC101",23,0)
 ;
"RTN","EASEC101",24,0)
 W !,"3. Are You Eligible for Medicaid?"
"RTN","EASEC101",25,0)
 W ?36,"|3A. Are You Enrolled in Medicare Part A (Hospital Insurance)"
"RTN","EASEC101",26,0)
 W ?100,"|3B. Effective Date (If ""Yes"")"
"RTN","EASEC101",27,0)
 W !?3,@EAS1@(3),?36,"|",?41,@EAS1@(4),?100,"|",?105,@EAS1@(5),?131,$C(13) X EAINFO("L")
"RTN","EASEC101",28,0)
 ;
"RTN","EASEC101",29,0)
 W !,"4. Are You Enrolled in Medicare Part B (Medical Insurance)"
"RTN","EASEC101",30,0)
 W ?63,"|4A. Effective Date (If ""Yes"")"
"RTN","EASEC101",31,0)
 W ?97,"|4B. Medicare Claim Number"
"RTN","EASEC101",32,0)
 W !?3,@EAS1@(6),?63,"|",?68,@EAS1@(7),?97,"|",?102,@EAS1@(8),?131,$C(13) X EAINFO("L")
"RTN","EASEC101",33,0)
 Q
"RTN","EASEC101",34,0)
SEC2 ;print section 2 - Insurance Information
"RTN","EASEC101",35,0)
 N EAS2,X
"RTN","EASEC101",36,0)
 S EAS2=EASROOT_"2)"
"RTN","EASEC101",37,0)
 ;
"RTN","EASEC101",38,0)
 W !?48,"SECTION II - INSURANCE INFORMATION",!,EALNE("D")
"RTN","EASEC101",39,0)
 ;
"RTN","EASEC101",40,0)
 W !,"5. Are You Covered By Health Insurance (including coverage through a spouse)? (If ""Yes"", provide the following information for"
"RTN","EASEC101",41,0)
 W !?3,"all insurance company(s) providing coverage to you.)"
"RTN","EASEC101",42,0)
 W !?3,@EAS2@(1),?131,$C(13) X EAINFO("L")
"RTN","EASEC101",43,0)
 ;
"RTN","EASEC101",44,0)
 F X=2,9,16 D  ;loop through insurance companies
"RTN","EASEC101",45,0)
 .W !,$S(X=2:6,X=9:7,X=16:8)_". Name of Insurance Company"
"RTN","EASEC101",46,0)
 .W ?40,"|"_$S(X=2:6,X=9:7,X=16:8)_"A. Address of Insurance Company"
"RTN","EASEC101",47,0)
 .W ?90,"|"_$S(X=2:6,X=9:7,X=16:8)_"B. Phone Number of Insurance Company"
"RTN","EASEC101",48,0)
 .W !?3,@EAS2@(X),?40,"|",?45,@EAS2@(X+1,.111),?90,"|",?95,@EAS2@(X+2),?131,$C(13)
"RTN","EASEC101",49,0)
 .W:$G(@EAS2@(X+1,.112))'="" !?40,"|",?45,@EAS2@(X+1,.112),?90,"|",?131,$C(13)
"RTN","EASEC101",50,0)
 .W:$G(@EAS2@(X+1,.113))'="" !?40,"|",?45,@EAS2@(X+1,.113),?90,"|",?131,$C(13)
"RTN","EASEC101",51,0)
 .W !?40,"|",?45,@EAS2@(X+1,.114) W:@EAS2@(X+1,.114)]"" ","
"RTN","EASEC101",52,0)
 .W @EAS2@(X+1,.115)," ",@EAS2@(X+1,.116),?90,"|",?131,$C(13) X EAINFO("L")
"RTN","EASEC101",53,0)
 .;
"RTN","EASEC101",54,0)
 .W !,$S(X=2:6,X=9:7,X=16:8)_"C. Name of Policy Holder"
"RTN","EASEC101",55,0)
 .W ?40,"|"_$S(X=2:6,X=9:7,X=16:8)_"D. Relationship of Policy Holder"
"RTN","EASEC101",56,0)
 .W ?75,"|"_$S(X=2:6,X=9:7,X=16:8)_"E. Policy Number"
"RTN","EASEC101",57,0)
 .W ?100,"|"_$S(X=2:6,X=9:7,X=16:8)_"F. Group Name and/or Number"
"RTN","EASEC101",58,0)
 .W !?4,@EAS2@(X+3),?40,"|",?45,@EAS2@(X+4),?75,"|"
"RTN","EASEC101",59,0)
 .W ?80,@EAS2@(X+5),?100,"|",?105,@EAS2@(X+6),$C(13) X EAINFO("L")
"RTN","EASEC101",60,0)
 Q
"RTN","EASEC101",61,0)
SEC3 ;print section 3 - Spouse/Dependent Information
"RTN","EASEC101",62,0)
 ;This section was modified to print Current Marital Status for the
"RTN","EASEC101",63,0)
 ;new 10-10EC form. Added for LTC Phase IV (EAS*1*40)
"RTN","EASEC101",64,0)
 N X,EAS3
"RTN","EASEC101",65,0)
 S EAS3=EASROOT_"3)"
"RTN","EASEC101",66,0)
 W !?44,"SECTION III - SPOUSE/DEPENDENT INFORMATION",!,EALNE("D")
"RTN","EASEC101",67,0)
 ;
"RTN","EASEC101",68,0)
 I $G(EAINFO("FORM")) D
"RTN","EASEC101",69,0)
 .W !,"9. Current Marital Status"
"RTN","EASEC101",70,0)
 .W ?55,"|9A. Spouse's Name (Last, First, MI)"
"RTN","EASEC101",71,0)
 .W !?3,@EAS3@(0),?55,"|",?61,@EAS3@(1),?131,$C(13) X EAINFO("L")
"RTN","EASEC101",72,0)
 .;
"RTN","EASEC101",73,0)
 .W !,"9B. Spouse Residing in the Community?"
"RTN","EASEC101",74,0)
 .W ?90,"|9C. Spouse's Social Security Number"
"RTN","EASEC101",75,0)
 .W !?4,@EAS3@(2),?90,"|",?95,@EAS3@(3),?131,$C(13) X EAINFO("L")
"RTN","EASEC101",76,0)
 ;
"RTN","EASEC101",77,0)
 I '$G(EAINFO("FORM")) D
"RTN","EASEC101",78,0)
 .W !,"9. Spouse's Name (Last,First,MI)"
"RTN","EASEC101",79,0)
 .W !?3,@EAS3@(1),?131,$C(13) X EAINFO("L")
"RTN","EASEC101",80,0)
 .;
"RTN","EASEC101",81,0)
 .W !,"9A. Spouse Residing in the Community?"
"RTN","EASEC101",82,0)
 .W ?90,"|9B. Spouse's Social Security Number"
"RTN","EASEC101",83,0)
 .W !?4,@EAS3@(2),?90,"|",?95,@EAS3@(3),?131,$C(13) X EAINFO("L")
"RTN","EASEC101",84,0)
 ;
"RTN","EASEC101",85,0)
 F X=4,8 D  ;loop through dependents
"RTN","EASEC101",86,0)
 .W !,$S(X=4:10,X=8:11)_". Dependent's Name (Last, First, MI)"
"RTN","EASEC101",87,0)
 .W ?55,"|",$S(X=4:10,X=8:11)_"A. Dependent's Date of Birth"
"RTN","EASEC101",88,0)
 .W ?90,"|",$S(X=4:10,X=8:11)_"B. Dependent's Social Security Number"
"RTN","EASEC101",89,0)
 .W !?4,@EAS3@(X),?55,"|",?61,@EAS3@(X+1),?90,"|",?96,@EAS3@(X+2),?131,$C(13) X EAINFO("L")
"RTN","EASEC101",90,0)
 .;
"RTN","EASEC101",91,0)
 .W !,$S(X=4:10,X=8:11)_"C. Dependent Residing in the Community?"
"RTN","EASEC101",92,0)
 .W !?5,@EAS3@(X+3),?131,$C(13) X EAINFO("L")
"RTN","EASEC101",93,0)
 Q
"RTN","EASEC101",94,0)
DISCLAIM ;
"RTN","EASEC101",95,0)
 W !,"We need to collect information regarding income, assets, and "
"RTN","EASEC101",96,0)
 W "expenses for you and your spouse.  If you do not wish to provide this"
"RTN","EASEC101",97,0)
 W !,"information you must sign agreeing to make copayments and will "
"RTN","EASEC101",98,0)
 W "be charged the maximum copayment amount for all services.  See the"
"RTN","EASEC101",99,0)
 W !,"top of page 2, read, sign, and date."
"RTN","EASEC101",100,0)
 Q
"RTN","EASEC103")
0^15^B21798267
"RTN","EASEC103",1,0)
EASEC103 ;ALB/BRM,LBD - Print 1010EC LTC Enrollment form ; 9/7/01 9:49am
"RTN","EASEC103",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,7,40**;Mar 15, 2001
"RTN","EASEC103",3,0)
 ;
"RTN","EASEC103",4,0)
 ; Called from ^EASEC10E to print page 3 of the 1010EC
"RTN","EASEC103",5,0)
 ;
"RTN","EASEC103",6,0)
PAGE3(EALNE,EAINFO,EASDFN) ;Print page 3
"RTN","EASEC103",7,0)
 N X,EASROOT
"RTN","EASEC103",8,0)
 S EASROOT="^TMP(""1010EC"",$J,"_EASDFN_","
"RTN","EASEC103",9,0)
 D HDR^EASEC10E(.EALNE,.EAINFO)
"RTN","EASEC103",10,0)
 D SEC6
"RTN","EASEC103",11,0)
 D SEC7
"RTN","EASEC103",12,0)
 D SEC8
"RTN","EASEC103",13,0)
 D FT^EASEC10E(.EALNE,.EAINFO)
"RTN","EASEC103",14,0)
 Q
"RTN","EASEC103",15,0)
 ;
"RTN","EASEC103",16,0)
SEC6 ; print section 6 - Expenses
"RTN","EASEC103",17,0)
 N EAS6
"RTN","EASEC103",18,0)
 S EAS6=EASROOT_"6)"
"RTN","EASEC103",19,0)
 ;
"RTN","EASEC103",20,0)
 W !?55,"SECTION VI - EXPENSES",!,EALNE("D")
"RTN","EASEC103",21,0)
 W !?54,"ITEMS",?113,"|",?119,"AMOUNT",?131,$C(13) X EAINFO("L")
"RTN","EASEC103",22,0)
 W !,"1. Education (veteran, spouse or dependent)",?113,"| $",$J(@EAS6@(1),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC103",23,0)
 W !,"2. Funeral and Burial (spouse or child)",?113,"| $",$J(@EAS6@(2),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC103",24,0)
 W !,"3. Rent/Mortgage",?113,"| $",$J(@EAS6@(3),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC103",25,0)
 W !,"4. Utilities",?113,"| $",$J(@EAS6@(4),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC103",26,0)
 W !,"5. Car Payment Only (excludes gas, insurance, parking fees)",?113,"| $",$J(@EAS6@(5),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC103",27,0)
 W !,"6. Food",?113,"| $",$J(@EAS6@(6),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC103",28,0)
 W !,"7. Non-reimbursed medical expenses",?113,"| $",$J(@EAS6@(7),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC103",29,0)
 W !,"8. Court-ordered payments",?113,"| $",$J(@EAS6@(8),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC103",30,0)
 W !,"9. Insurance (exclude life insurance)",?113,"| $",$J(@EAS6@(9),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC103",31,0)
 W !,"10. Taxes (on any amount include in gross income, property, personal)",?113,"| $",$J(@EAS6@(10),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC103",32,0)
 W !,?95,"|      TOTAL",?113,"| $",$J(@EAS6@(11),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC103",33,0)
 Q
"RTN","EASEC103",34,0)
SEC7 ;print section 7 - Consent for Assignment of Benefits
"RTN","EASEC103",35,0)
 N SECN
"RTN","EASEC103",36,0)
 S SECN=$S($G(EAINFO("FORM")):"VIII",1:"VII")  ;Added for LTC Phase IV
"RTN","EASEC103",37,0)
 W !?42,"SECTION ",SECN," - CONSENT FOR ASSIGNMENT OF BENEFITS",!,EALNE("D")
"RTN","EASEC103",38,0)
 W !,"I hereby authorize the Department of Veterans Affairs to disclose any such history, diagnostic and treatment information from my"
"RTN","EASEC103",39,0)
 W !,"medical records to the contractor of any health plan contract under which I am apparently eligible for medical care or payment of"
"RTN","EASEC103",40,0)
 W !,"the expense of care or to any other party against whom liability is asserted.  I understand that I may revoke this authorization at"
"RTN","EASEC103",41,0)
 W !,"any time, except to the extent that action has already been taken in reliance on it.  Without my express revocation, this consent"
"RTN","EASEC103",42,0)
 W !,"will automatically expire when all action arising from VA's claim for reimbursement from my medical care has been completed."
"RTN","EASEC103",43,0)
 W !,"I authorize payment of medical benefits to VA for any services for which payment is accepted.",?131,$C(13) X EAINFO("L")
"RTN","EASEC103",44,0)
 W !,"Signature",?100,"| Date",!?100,"|",?131,$C(13) X EAINFO("L")
"RTN","EASEC103",45,0)
 Q
"RTN","EASEC103",46,0)
SEC8 ;print section 8 - Consent and Agreement to make copayments
"RTN","EASEC103",47,0)
 N I,WPLINE,EAS8,WPCNT,SECN
"RTN","EASEC103",48,0)
 S EAS8=EASROOT_"8)",WPLINE=0,WPCNT=1
"RTN","EASEC103",49,0)
 S SECN=$S($G(EAINFO("FORM")):"IX",1:"VIII")  ; Added for LTC Phase IV
"RTN","EASEC103",50,0)
 W !?39,"SECTION ",SECN," - CONSENT AND AGREEMENT TO MAKE COPAYMENTS",!,EALNE("D")
"RTN","EASEC103",51,0)
 W !,"Completion of this form with signature of the Veteran or veteran's representative is certification that the veteran/representative"
"RTN","EASEC103",52,0)
 W !,"has received a copy of the Privacy Act Statement and agrees to make appropriate copayments."
"RTN","EASEC103",53,0)
 W !!,"I certify the foregoing statement(s) are true and correct to the best of my knowledge and belief and agree to make the applicable"
"RTN","EASEC103",54,0)
 W !,"copayment for extended care services as required by law.",?131,$C(13) X EAINFO("L")
"RTN","EASEC103",55,0)
 W !,"Signature",?100,"| Date",!?100,"|",?131,$C(13) X EAINFO("L")
"RTN","EASEC103",56,0)
 Q:$G(EAINFO("FORM"))  ;Added for LTC Phase IV (EAS*1*40)
"RTN","EASEC103",57,0)
 W !,"Additional Comments:"
"RTN","EASEC103",58,0)
 D:$D(EAS8)
"RTN","EASEC103",59,0)
 .F  S WPLINE=$O(@EAS8@(WPLINE)) Q:'WPLINE  S WPCNT=WPCNT+1 W !,@EAS8@(WPLINE)
"RTN","EASEC103",60,0)
 F I=WPCNT:1:14 W !
"RTN","EASEC103",61,0)
 Q
"RTN","EASEC10E")
0^12^B20828812
"RTN","EASEC10E",1,0)
EASEC10E ;ALB/BRM,LBD - Print 1010EC LTC Enrollment form ; 9/20/01 1:46pm
"RTN","EASEC10E",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,40**;Mar 15, 2001
"RTN","EASEC10E",3,0)
 ;
"RTN","EASEC10E",4,0)
 ; The EASEC10* routines print a version of the OMB approved
"RTN","EASEC10E",5,0)
 ; VA10-10EC form (Long Term Care).
"RTN","EASEC10E",6,0)
 ;
"RTN","EASEC10E",7,0)
 ; No Local modifications to these routines will be made.  Any changes
"RTN","EASEC10E",8,0)
 ; will be provided through the National Patch Module release process.
"RTN","EASEC10E",9,0)
 ;
"RTN","EASEC10E",10,0)
 Q
"RTN","EASEC10E",11,0)
OEN ;Entry point to print an LTC Co-Pay test from the menu option
"RTN","EASEC10E",12,0)
 ;
"RTN","EASEC10E",13,0)
 N DIC,DFN,DGMTI,ZTSK,DGMSGF
"RTN","EASEC10E",14,0)
 S DGMSGF=1  ;this flag is set to suppress the financial query
"RTN","EASEC10E",15,0)
 S DIC("S")="I $D(^DGMT(408.31,""AID"",3,+Y))"
"RTN","EASEC10E",16,0)
 S DIC="^DPT(",DIC(0)="AEMQ" W ! D ^DIC K DIC G Q:Y<0 S DFN=+Y
"RTN","EASEC10E",17,0)
 S DIC("A")="Select DATE OF TEST: "
"RTN","EASEC10E",18,0)
 I $D(^DGMT(408.31,+$$LST^EASECU(DFN,"",3),0)) S DIC("B")=$P(^(0),"^")
"RTN","EASEC10E",19,0)
 S DIC("S")="I $P(^(0),U,2)=DFN,$P(^(0),U,19)=3"
"RTN","EASEC10E",20,0)
 S DIC="^DGMT(408.31,",DIC(0)="EQZ" W ! D EN^DGMTLK K DIC G Q:Y<0
"RTN","EASEC10E",21,0)
 S DGMTI=+Y
"RTN","EASEC10E",22,0)
 S ZTSK=$$QUE(DFN,DGMTI)
"RTN","EASEC10E",23,0)
Q Q
"RTN","EASEC10E",24,0)
QUE(DFN,DGMTIEN) ; queue the 1010EC print job
"RTN","EASEC10E",25,0)
 ; Input:
"RTN","EASEC10E",26,0)
 ;       DFN - Internal entry number for the #2 (Patient) file
"RTN","EASEC10E",27,0)
 ; Output:
"RTN","EASEC10E",28,0)
 ;       ZTSK - Task Number returned from call to Task Manager
"RTN","EASEC10E",29,0)
 ;
"RTN","EASEC10E",30,0)
 N ZTDESC,ZTIO,ZTRTN,ZTSAVE,ZTSK,ZUSR,POP,X,ERR
"RTN","EASEC10E",31,0)
 W !!?5,$C(7),"This output requires a 132 column printer."
"RTN","EASEC10E",32,0)
 W !?5,"Output to SCREEN will be unreadable.",!
"RTN","EASEC10E",33,0)
 K IOP,%ZIS
"RTN","EASEC10E",34,0)
 S %ZIS="Q" D ^%ZIS G:POP EXIT
"RTN","EASEC10E",35,0)
 I $D(IO("Q")) D  Q +$G(ZTSK)
"RTN","EASEC10E",36,0)
 .S ZTSAVE("ZUSR")=+$G(DUZ)
"RTN","EASEC10E",37,0)
 .S ZTRTN="EN^EASEC10E("_DFN_","_$G(DGMTIEN)_")",ZTDESC="1010EC PRINT"
"RTN","EASEC10E",38,0)
 .D ^%ZTLOAD
"RTN","EASEC10E",39,0)
 .D ^%ZISC,HOME^%ZIS
"RTN","EASEC10E",40,0)
 .W !,$S($D(ZTSK):"REQUEST QUEUED!",1:"REQUEST CANCELLED!")
"RTN","EASEC10E",41,0)
 D EN(DFN,$G(DGMTIEN))
"RTN","EASEC10E",42,0)
EXIT D ^%ZISC,HOME^%ZIS
"RTN","EASEC10E",43,0)
 Q +$G(ZTSK)
"RTN","EASEC10E",44,0)
 ;
"RTN","EASEC10E",45,0)
EN(EASDFN,DGMTIEN) ; Entry point to print the 1010EC form
"RTN","EASEC10E",46,0)
 ; Input:
"RTN","EASEC10E",47,0)
 ;    EASDFN  - Internal entry number for the #2 (Patient) file
"RTN","EASEC10E",48,0)
 ;    DTMTDT  - Date of Long Term Care Test to print
"RTN","EASEC10E",49,0)
 ;    DGMTIEN - IEN of the Long term Care test in the #408.31 file
"RTN","EASEC10E",50,0)
 ;
"RTN","EASEC10E",51,0)
 U IO
"RTN","EASEC10E",52,0)
 Q:'$G(EASDFN)
"RTN","EASEC10E",53,0)
 N EALNE,EAINFO
"RTN","EASEC10E",54,0)
 S:$G(DGMTIEN) EAINFO("DGMTIEN")=DGMTIEN
"RTN","EASEC10E",55,0)
 ; set-up print variables
"RTN","EASEC10E",56,0)
 D SETUP(.EALNE,.EAINFO,EASDFN)
"RTN","EASEC10E",57,0)
 ; get veteran data to be printed
"RTN","EASEC10E",58,0)
 D GETDATA^EASEC100(EASDFN,.EAINFO)
"RTN","EASEC10E",59,0)
 ; print page 1
"RTN","EASEC10E",60,0)
 D PAGE1^EASEC101(.EALNE,.EAINFO,EASDFN)
"RTN","EASEC10E",61,0)
 ; print pages 2 and 3
"RTN","EASEC10E",62,0)
 I $G(EAINFO("FORM")) D  G ENQUIT
"RTN","EASEC10E",63,0)
 .; new 10-10EC format (LTC Phase IV - EAS*1*40)
"RTN","EASEC10E",64,0)
 .D PAGE2^EASEC10R(.EALNE,.EAINFO,EASDFN)
"RTN","EASEC10E",65,0)
 .D PAGE3^EASEC10R(.EALNE,.EAINFO,EASDFN)
"RTN","EASEC10E",66,0)
 E  D
"RTN","EASEC10E",67,0)
 .; old 10-10EC format
"RTN","EASEC10E",68,0)
 .D PAGE2^EASEC102(.EALNE,.EAINFO,EASDFN)
"RTN","EASEC10E",69,0)
 .D PAGE3^EASEC103(.EALNE,.EAINFO,EASDFN)
"RTN","EASEC10E",70,0)
 ;
"RTN","EASEC10E",71,0)
ENQUIT ; cleanup temp globals after printing has completed
"RTN","EASEC10E",72,0)
 K ^TMP("1010EC",$J,EASDFN)
"RTN","EASEC10E",73,0)
 Q
"RTN","EASEC10E",74,0)
 ;
"RTN","EASEC10E",75,0)
SETUP(EALNE,EAINFO,EASDFN) ;setup print variables
"RTN","EASEC10E",76,0)
 ; Input:
"RTN","EASEC10E",77,0)
 ;   EALNE - Line format array
"RTN","EASEC10E",78,0)
 ;   EAINFO - Misc data array
"RTN","EASEC10E",79,0)
 ;      ("CLRK")    - Clerk's Initials
"RTN","EASEC10E",80,0)
 ;      ("PGE")     - Page number
"RTN","EASEC10E",81,0)
 ;      ("PD")      - Print Date
"RTN","EASEC10E",82,0)
 ;      ("VET")     - Veteran's Name
"RTN","EASEC10E",83,0)
 ;      ("SSN")     - Veteran's SSN
"RTN","EASEC10E",84,0)
 ;      ("MTDT")    - Long Term Care Test date
"RTN","EASEC10E",85,0)
 ;      ("DGMTIEN") - ien of LTC Test in 408.31 
"RTN","EASEC10E",86,0)
 ;   EASDFN - DFN of applicant in the Patient file (#2)
"RTN","EASEC10E",87,0)
 ;
"RTN","EASEC10E",88,0)
 N X,SSN
"RTN","EASEC10E",89,0)
 ;
"RTN","EASEC10E",90,0)
 ;Build Line array for printout
"RTN","EASEC10E",91,0)
 S EALNE("ULC")=$S('($D(IOST)#2):"-",IOST["C-":"-",1:"_")
"RTN","EASEC10E",92,0)
 S EALNE("D")="",EALNE("DD")="",EALNE("UL")=""
"RTN","EASEC10E",93,0)
 S $P(EALNE("D"),"-",131)="",$P(EALNE("DD"),"=",131)="",$P(EALNE("UL"),EALNE("ULC"),131)=""
"RTN","EASEC10E",94,0)
 S EAINFO("L")="W !,EALNE(""UL"")"
"RTN","EASEC10E",95,0)
 S:EALNE("ULC")'="-" EAINFO("L")=$TR(EAINFO("L"),"!,")
"RTN","EASEC10E",96,0)
 ;
"RTN","EASEC10E",97,0)
 ;Get clerk's initials
"RTN","EASEC10E",98,0)
 S ZUSR=$G(ZUSR)
"RTN","EASEC10E",99,0)
 S:$G(ZUSR)="" ZUSR=$G(DUZ)
"RTN","EASEC10E",100,0)
 I +ZUSR>0 D
"RTN","EASEC10E",101,0)
 .S EAINFO("CLRK")=$$GET1^DIQ(200,ZUSR,1)
"RTN","EASEC10E",102,0)
 .I EAINFO("CLRK")']"" D
"RTN","EASEC10E",103,0)
 ..S X=$$GET1^DIQ(200,ZUSR,.01)
"RTN","EASEC10E",104,0)
 ..S EAINFO("CLRK")=$E($P(X,",",2),1)_$E($P(X,","),1)
"RTN","EASEC10E",105,0)
 E  D
"RTN","EASEC10E",106,0)
 .S EAINFO("CLRK")="unk"
"RTN","EASEC10E",107,0)
 ;
"RTN","EASEC10E",108,0)
 ;Get LTC Test date (if it is not passed, use latest LTC test date)
"RTN","EASEC10E",109,0)
 I $G(EAINFO("DGMTIEN")) S EAINFO("MTDT")=$$GET1^DIQ(408.31,EAINFO("DGMTIEN"),.01,"I")
"RTN","EASEC10E",110,0)
 E  D  ;
"RTN","EASEC10E",111,0)
 .N MTDTNEG
"RTN","EASEC10E",112,0)
 .S MTDTNEG=+$O(^DGMT(408.31,"AID",3,EASDFN,""))
"RTN","EASEC10E",113,0)
 .S EAINFO("MTDT")=$TR(MTDTNEG,"-")
"RTN","EASEC10E",114,0)
 .S EAINFO("DGMTIEN")=$O(^DGMT(408.31,"AID",3,EASDFN,MTDTNEG,""))
"RTN","EASEC10E",115,0)
 ;
"RTN","EASEC10E",116,0)
 ;Set data elements
"RTN","EASEC10E",117,0)
 S EAINFO("PGE")=0
"RTN","EASEC10E",118,0)
 S EAINFO("PD")=$$FMTE^XLFDT($$NOW^XLFDT)
"RTN","EASEC10E",119,0)
 S EAINFO("VET")=$$GET1^DIQ(2,EASDFN_",",.01)
"RTN","EASEC10E",120,0)
 S SSN=$$GET1^DIQ(2,EASDFN_",",.09)
"RTN","EASEC10E",121,0)
 S EAINFO("SSN")=$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,9)
"RTN","EASEC10E",122,0)
 ;Line added to set new variable to indicate which version of the
"RTN","EASEC10E",123,0)
 ;10-10EC form is to be printed.  LTC Phase IV (EAS*1*40)
"RTN","EASEC10E",124,0)
 S EAINFO("FORM")=$$FORM^EASECU(EAINFO("DGMTIEN"))
"RTN","EASEC10E",125,0)
 Q
"RTN","EASEC10E",126,0)
 ;
"RTN","EASEC10E",127,0)
HDRMAIN(EALNE) ;
"RTN","EASEC10E",128,0)
 W @IOF
"RTN","EASEC10E",129,0)
 W !,EALNE("DD")
"RTN","EASEC10E",130,0)
 W !,"D E P A R T M E N T   O F   V E T E R A N S   A F F A I R S",?90,"APPLICATION FOR EXTENDED CARE SERVICES",!,EALNE("DD")
"RTN","EASEC10E",131,0)
 W !?50,"SECTION I - GENERAL INFORMATION",!,EALNE("D")
"RTN","EASEC10E",132,0)
 Q
"RTN","EASEC10E",133,0)
 ;
"RTN","EASEC10E",134,0)
HDR(EALNE,EAINFO) ;
"RTN","EASEC10E",135,0)
 W @IOF
"RTN","EASEC10E",136,0)
 W EALNE("DD")
"RTN","EASEC10E",137,0)
 W !,"APPLICATION FOR EXTENDED CARE SERVICES, Continued"
"RTN","EASEC10E",138,0)
 W ?65,"| Veteran's Name",?100,"| Social Security Number"
"RTN","EASEC10E",139,0)
 W !?65,"| ",EAINFO("VET"),?100,"| ",EAINFO("SSN")
"RTN","EASEC10E",140,0)
 W !,EALNE("DD")
"RTN","EASEC10E",141,0)
 Q
"RTN","EASEC10E",142,0)
 ;
"RTN","EASEC10E",143,0)
FT(EALNE,EAINFO) ;
"RTN","EASEC10E",144,0)
 N %,Y
"RTN","EASEC10E",145,0)
 W !,EALNE("DD")
"RTN","EASEC10E",146,0)
 ;Modified date printed on form if new 10-10EC format.
"RTN","EASEC10E",147,0)
 ;Added for LTC Phase IV (EAS*1*40).
"RTN","EASEC10E",148,0)
 W !,"VA FORM 10-10EC DEC "_$S(EAINFO("FORM"):"2002",1:"2000"),?40,"PRINTED: ",EAINFO("PD")
"RTN","EASEC10E",149,0)
 W ?80,"Clerk: ",EAINFO("CLRK")
"RTN","EASEC10E",150,0)
 S EAINFO("PGE")=EAINFO("PGE")+1
"RTN","EASEC10E",151,0)
 W ?120,"Page ",EAINFO("PGE"),?131,$C(13)
"RTN","EASEC10E",152,0)
 Q
"RTN","EASEC10R")
0^16^B86760896
"RTN","EASEC10R",1,0)
EASEC10R ;ALB/LBD - Print 1010EC LTC Enrollment form ; 9/20/01 12:25pm
"RTN","EASEC10R",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**40**;Mar 15, 2001
"RTN","EASEC10R",3,0)
 ;
"RTN","EASEC10R",4,0)
 ; Called from ^EASEC10E to print pages 2 and 3 of the revised 1010EC
"RTN","EASEC10R",5,0)
 ;
"RTN","EASEC10R",6,0)
PAGE2(EALNE,EAINFO,EASDFN) ;Print page 2 of revised 1010EC
"RTN","EASEC10R",7,0)
 N X,EASROOT
"RTN","EASEC10R",8,0)
 S EASROOT="^TMP(""1010EC"",$J,"_EASDFN_","
"RTN","EASEC10R",9,0)
 D HDR^EASEC10E(.EALNE,.EAINFO)
"RTN","EASEC10R",10,0)
 D SIGN
"RTN","EASEC10R",11,0)
 D SEC4
"RTN","EASEC10R",12,0)
 D SEC5  ;SEC 6 is part of SEC 5
"RTN","EASEC10R",13,0)
 D SEC7
"RTN","EASEC10R",14,0)
 D FT^EASEC10E(.EALNE,.EAINFO)
"RTN","EASEC10R",15,0)
 Q
"RTN","EASEC10R",16,0)
SIGN ;print disclaimer and signature block to refuse income data
"RTN","EASEC10R",17,0)
 ;
"RTN","EASEC10R",18,0)
 W !,"I do not wish to provide my detailed financial information.  "
"RTN","EASEC10R",19,0)
 W "I understand that I will be assessed the maximum copayment amount for"
"RTN","EASEC10R",20,0)
 W !,"extended care services and agree to pay the applicable VA copayment as required by law.",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",21,0)
 W !,"Signature",?97,"| Date",!?97,"|",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",22,0)
 Q
"RTN","EASEC10R",23,0)
 ;
"RTN","EASEC10R",24,0)
SEC4 ; print section 4 - Fixed Assets (Veteran and Spouse)
"RTN","EASEC10R",25,0)
 N EAS4
"RTN","EASEC10R",26,0)
 S EAS4=EASROOT_"4)"
"RTN","EASEC10R",27,0)
 W !?23,"SECTION IV - FIXED ASSETS (VETERAN AND SPOUSE)",?97,"|",?102,"VETERAN",?113,"|",?119,"SPOUSE",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",28,0)
 ;
"RTN","EASEC10R",29,0)
 W !,"1. Primary Residence (Market value minus mortgages or liens. "
"RTN","EASEC10R",30,0)
 W "Exclude if veteran receiving only",?97,"| $",$J(@EAS4@(1),12,2),?113,"| $",$J(@EAS4@(1.5),12,2)
"RTN","EASEC10R",31,0)
 W !?3,"non-institutional extended care services or spouse or dependent residing in community. If the",?97,"|",?113,"|"
"RTN","EASEC10R",32,0)
 W !?3,"veteran and spouse maintain separate residences, and the veteran is receiving institutional",?97,"|",?113,"|"
"RTN","EASEC10R",33,0)
 W !?3,"(inpatient) extended care services, include value of the veteran's primary residence.)",?97,"|",?113,"|",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",34,0)
 ;
"RTN","EASEC10R",35,0)
 W !,"2. Other Residences/Land/Farm or Ranch (Market value minus mortgages or liens. "
"RTN","EASEC10R",36,0)
 W "This would",?97,"| $",$J(@EAS4@(2),12,2),?113,"| $",$J(@EAS4@(2.5),12,2)
"RTN","EASEC10R",37,0)
 W !?3,"include a second home, vacation home, rental property.)",?97,"|",?113,"|",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",38,0)
 ;
"RTN","EASEC10R",39,0)
 W !,"3. Vehicle(s) (Value minus outstanding lien. Exclude primary vehicle if veteran "
"RTN","EASEC10R",40,0)
 W "receiving only",?97,"| $",$J(@EAS4@(3),12,2),?113,"| $",$J(@EAS4@(3.5),12,2)
"RTN","EASEC10R",41,0)
 W !?3,"non-institutional extended care services or spouse or dependent residing in community. If the",?97,"|",?113,"|"
"RTN","EASEC10R",42,0)
 W !?3,"veteran and spouse maintain separate residences and vehicles, and the veteran is receiving",?97,"|",?113,"|"
"RTN","EASEC10R",43,0)
 W !?3,"institutional (inpatient) extended care services, include value of veteran's primary vehicle.)",?97,"|",?113,"|",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",44,0)
 ;
"RTN","EASEC10R",45,0)
 Q
"RTN","EASEC10R",46,0)
SEC5 ; print section 5 - Liquid Assets (Veteran and Spouse)
"RTN","EASEC10R",47,0)
 N EAS5
"RTN","EASEC10R",48,0)
 S EAS5=EASROOT_"5)"
"RTN","EASEC10R",49,0)
 W !?23,"SECTION V - LIQUID ASSETS (VETERAN AND SPOUSE)",?97,"|",?113,"|",?131 X EAINFO("L")
"RTN","EASEC10R",50,0)
 ;
"RTN","EASEC10R",51,0)
 W !,"1. Cash, Amount in Bank Accounts (e.g., checking and savings accounts, certificates "
"RTN","EASEC10R",52,0)
 W "of deposit",?97,"| $",$J(@EAS5@(1),12,2),?113,"| $",$J(@EAS5@(1.5),12,2)
"RTN","EASEC10R",53,0)
 W !?3,"individual retirement accounts, stocks and bonds.)"
"RTN","EASEC10R",54,0)
 W ?97,"|",?113,"|",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",55,0)
 ;
"RTN","EASEC10R",56,0)
 W !,"2. Value of Other Liquid Assets (e.g., art, rare coins, stamp collections, collectibles)  Minus"
"RTN","EASEC10R",57,0)
 W ?97,"| $",$J(@EAS5@(3),12,2),?113,"| $",$J(@EAS5@(3.5),12,2)
"RTN","EASEC10R",58,0)
 W !?3,"the amount you owe on these items. Exclude household effects, clothing, jewelry, and personal",?97,"|",?113,"|"
"RTN","EASEC10R",59,0)
 W !?3,"items if veteran receiving only non-institutional extended care services or spouse or",?97,"|",?113,"|"
"RTN","EASEC10R",60,0)
 W !?3,"dependent residing in the community.",?97,"|",?113,"|",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",61,0)
 ;
"RTN","EASEC10R",62,0)
 W !," SUM OF ALL LINES FIXED AND LIQUID ASSETS"
"RTN","EASEC10R",63,0)
 W ?75,"|    TOTAL ASSETS",?97,"| $",$J(@EAS5@(5),12,2),?113,"| $",$J(@EAS5@(5.5),12,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",64,0)
 ;
"RTN","EASEC10R",65,0)
 ; print section 6 - Current Gross Income
"RTN","EASEC10R",66,0)
 W !?23,"SECTION VI - CURRENT GROSS INCOME OF VETERAN AND SPOUSE",?97,"|",?113,"|",?131 X EAINFO("L")
"RTN","EASEC10R",67,0)
 W !?45,"CATEGORY",?97,"|",?102,"VETERAN",?113,"|",?119,"SPOUSE",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",68,0)
 ;
"RTN","EASEC10R",69,0)
 W !,"1. Gross annual income from employment (e.g., wages, bonuses, tips, severance pay"
"RTN","EASEC10R",70,0)
 W ?97,"| $",$J(@EAS5@(6),10,2),?113,"| $",$J(@EAS5@(7),10,2)
"RTN","EASEC10R",71,0)
 W !,"accrued benefits)",?97,"|",?113,"|",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",72,0)
 ;
"RTN","EASEC10R",73,0)
 W !,"2. Net income from your farm/ranch, property or business.",?97,"| $",$J(@EAS5@(10),10,2),?113,"| $",$J(@EAS5@(11),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",74,0)
 ;
"RTN","EASEC10R",75,0)
 W !,"3. List other income amounts (e.g., Social Security, retirement and pension, ",?97,"| $",$J(@EAS5@(32),10,2),?113,"| $",$J(@EAS5@(33),10,2)
"RTN","EASEC10R",76,0)
 W !?3,"interest, dividends)  Refer to instructions.",?97,"|",?113,"|",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",77,0)
 Q
"RTN","EASEC10R",78,0)
SEC7 ; print section 7 - Expenses
"RTN","EASEC10R",79,0)
 ; Expenses are in section 7 on the new 10-10EC (section 6 on the old)
"RTN","EASEC10R",80,0)
 N EAS6
"RTN","EASEC10R",81,0)
 S EAS6=EASROOT_"6)"
"RTN","EASEC10R",82,0)
 ;
"RTN","EASEC10R",83,0)
 W !?43,"SECTION VII - DEDUCTIBLE EXPENSES",!,EALNE("D")
"RTN","EASEC10R",84,0)
 W !?54,"ITEMS",?113,"|",?119,"AMOUNT",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",85,0)
 W !,"1. Educational expenses of veteran, spouse or dependent (e.g., tuition, books, fees, material, etc.)",?113,"| $",$J(@EAS6@(1),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",86,0)
 W !,"2. Funeral and Burial (spouse or child, amount you paid for funeral and burial expenses, including prepaid",?113,"| $",$J(@EAS6@(2),10,2)
"RTN","EASEC10R",87,0)
 W !?3,"arrangements)",?113,"|",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",88,0)
 W !,"3. Rent/Mortgage (monthly amount or annual amount)",?113,"| $",$J(@EAS6@(3),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",89,0)
 W !,"4. Utilities (calculate by average monthly amounts over the past 12 months)",?113,"| $",$J(@EAS6@(4),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",90,0)
 W !,"5. Car Payment for one vehicle only (exclude gas, automobile insurance, parking fees, repairs)",?113,"| $",$J(@EAS6@(5),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",91,0)
 W !,"6. Food (for veteran, spouse and dependent)",?113,"| $",$J(@EAS6@(6),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",92,0)
 W !,"7. Non-reimbursed medical expenses paid by you or spouse (e.g., copayments for physicians, dentists,",?113,"| $",$J(@EAS6@(7),10,2)
"RTN","EASEC10R",93,0)
 W !?3,"medications, Medicare, health insurance, hospital and nursing home expenses)",?113,"|",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",94,0)
 W !,"8. Court-ordered payments (e.g., alimony, child support)",?113,"| $",$J(@EAS6@(8),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",95,0)
 W !,"9. Insurance (e.g., automobile insurance, homeowners insurance) Exclude life insurance",?113,"| $",$J(@EAS6@(9),10,2),?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",96,0)
 W !,"10. Taxes (e.g., personal property for home, automobile) Include average monthly expense for taxes paid on",?113,"| $",$J(@EAS6@(10),10,2)
"RTN","EASEC10R",97,0)
 W !?3,"income over the past 12 months.",?113,"|",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",98,0)
 W !,?95,"|      TOTAL",?113,"| $",$J(@EAS6@(11),10,2),?131
"RTN","EASEC10R",99,0)
 Q
"RTN","EASEC10R",100,0)
 ;
"RTN","EASEC10R",101,0)
PAGE3(EALNE,EAINFO,EASDFN) ;Print page 3
"RTN","EASEC10R",102,0)
 N X,EASROOT
"RTN","EASEC10R",103,0)
 S EASROOT="^TMP(""1010EC"",$J,"_EASDFN_","
"RTN","EASEC10R",104,0)
 D HDR^EASEC10E(.EALNE,.EAINFO)
"RTN","EASEC10R",105,0)
 D SEC8
"RTN","EASEC10R",106,0)
 D SEC9
"RTN","EASEC10R",107,0)
 D SEC10
"RTN","EASEC10R",108,0)
 D FT^EASEC10E(.EALNE,.EAINFO)
"RTN","EASEC10R",109,0)
 Q
"RTN","EASEC10R",110,0)
 ;
"RTN","EASEC10R",111,0)
SEC8 ; print section 8 - Consent for Assignment of Benefits
"RTN","EASEC10R",112,0)
 ; (section 7 on old 10-10EC form)
"RTN","EASEC10R",113,0)
 D SEC7^EASEC103
"RTN","EASEC10R",114,0)
 Q
"RTN","EASEC10R",115,0)
 ;
"RTN","EASEC10R",116,0)
SEC9 ;print section 9 - Consent to Agreement to Make Copayments
"RTN","EASEC10R",117,0)
 ; (section 8 on old 10-10EC form)
"RTN","EASEC10R",118,0)
 D SEC8^EASEC103
"RTN","EASEC10R",119,0)
 Q
"RTN","EASEC10R",120,0)
 ;
"RTN","EASEC10R",121,0)
SEC10 ; print section 10 - Paperwork Privacy Act Information
"RTN","EASEC10R",122,0)
 N I,WPLINE,EAS8,WPCNT
"RTN","EASEC10R",123,0)
 S EAS8=EASROOT_"8)",WPLINE=0,WPCNT=1
"RTN","EASEC10R",124,0)
 W !?43,"SECTION X - PAPERWORK PRIVACY ACT INFORMATION",!,EALNE("D")
"RTN","EASEC10R",125,0)
 W !,"The Paperwork Reduction Act of 1995 requires us to notify you that this information collection is in accordance with the clearance"
"RTN","EASEC10R",126,0)
 W !,"requirements of section 3507 of the Paperwork Reduction Act of 1995. We may not conduct or sponsor, and you are not required to"
"RTN","EASEC10R",127,0)
 W !,"respond to, a collection of information unless it displays a valid OMB number. We anticipate that the time expended by all"
"RTN","EASEC10R",128,0)
 W !,"individuals who must complete this form will average 90 minutes. This includes the time it will take to read instructions, gather"
"RTN","EASEC10R",129,0)
 W !,"the necessary facts and fill out the form. If you have comments regarding this burden estimate or any other aspect of this"
"RTN","EASEC10R",130,0)
 W !,"collection, call 202.273.8247 for mailing information on where to send your comments.",!
"RTN","EASEC10R",131,0)
 W !,"Privacy Act Information:  The VA is asking you to provide the information on this form under Title 38, United States Code,"
"RTN","EASEC10R",132,0)
 W !,"sections 1710, 1712, 1722 and 1729 in order for VA to determine your eligibility for extended care benefits and to establish"
"RTN","EASEC10R",133,0)
 W !,"financial eligibility, if applicable, when placed in extended care services. The information you supply may be verified through a"
"RTN","EASEC10R",134,0)
 W !,"computer-matching program. VA may disclose the information that you put on the form as permitted by law. VA may make a"
"RTN","EASEC10R",135,0)
 W !,"""routine use"" disclosure of the information as outlined in the Privacy Act systems of records notices and in accordance with the"
"RTN","EASEC10R",136,0)
 W !,"VHA Notice of Privacy Practices. You do not have to provide the information to VA, but if you don't, VA will be unable to process"
"RTN","EASEC10R",137,0)
 W !,"your request and serve your medical needs. Failure to furnish the information will not have any affect on any other benefits to"
"RTN","EASEC10R",138,0)
 W !,"which you may be entitled. If you provide VA your Social Security Number, VA will use it to administer your VA benefits. VA may"
"RTN","EASEC10R",139,0)
 W !,"also use this information to identify veterans and persons claiming or receiving VA benefits and their records, and for other"
"RTN","EASEC10R",140,0)
 W !,"purposes authorized or required by law.",?131,$C(13) X EAINFO("L")
"RTN","EASEC10R",141,0)
 W !,"Additional Comments:"
"RTN","EASEC10R",142,0)
 D:$D(EAS8)
"RTN","EASEC10R",143,0)
 .F  S WPLINE=$O(@EAS8@(WPLINE)) Q:'WPLINE  S WPCNT=WPCNT+1 W !,@EAS8@(WPLINE)
"RTN","EASEC10R",144,0)
 F I=WPCNT:1:14 W !
"RTN","EASEC10R",145,0)
 Q
"RTN","EASECA")
0^1^B15053921
"RTN","EASECA",1,0)
EASECA ;ALB/PHH,LBD - Add a New LTC Co-Pay Test ;10 AUG 2001
"RTN","EASECA",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,7,34,40**;Mar 15, 2001
"RTN","EASECA",3,0)
 ;
"RTN","EASECA",4,0)
EN ;Entry point to add a new LTC Co-Pay test
"RTN","EASECA",5,0)
 N DGMDOD S DGMDOD=""
"RTN","EASECA",6,0)
 S DGMTYPT=3
"RTN","EASECA",7,0)
 I $D(DGMTDFN)#2 K DGMTDFN
"RTN","EASECA",8,0)
 S DIC="^DPT(",DIC(0)="AEMQ" W !! D ^DIC K DIC G Q:Y<0 S (DFN,DGMTDFN)=+Y
"RTN","EASECA",9,0)
 I $P($G(^DPT(DFN,.35)),U)'="" S DGMDOD=$P(^DPT(DFN,.35),U)
"RTN","EASECA",10,0)
 I $G(DGMDOD) W !!,"Patient died on: ",$$FMTE^XLFDT(DGMDOD,"1D") Q
"RTN","EASECA",11,0)
 ; Is patient a veteran?  Added for LTC III (EAS*1*34)
"RTN","EASECA",12,0)
 I $P($G(^DPT(DFN,"VET")),U)'="Y" W !!,"Patient is not a Veteran." Q
"RTN","EASECA",13,0)
 ;
"RTN","EASECA",14,0)
 S DGLDT=$$LST^EASECU(DFN,"",DGMTYPT),DGLD=$P(DGLDT,U,2),DGLDYR=$E(DGLD,1,3)_"1231"
"RTN","EASECA",15,0)
 ;
"RTN","EASECA",16,0)
DT S %DT("A")="Date of LTC Copay Test: ",%DT="AEX",%DT(0)="-NOW",%DT("B")="NOW" W ! D ^%DT K %DT G Q:Y<0 S DGMTDT=Y
"RTN","EASECA",17,0)
 I DGLD,DGMTDT'>DGLD W !?3,*7,"The date of test must be after the date of the last test on " S Y=DGLD X ^DD("DD") W Y,"." G DT
"RTN","EASECA",18,0)
 ; LTC III (EAS*1*34) - change to allow multiple tests within a year
"RTN","EASECA",19,0)
 I DGLD S X1=DGMTDT,X2=DGLD D ^%DTC I X<365 D  G EN:$G(Y)'=1
"RTN","EASECA",20,0)
 .W !?3,*7,"An LTC Copay Test already exists on " S Y=DGLD X ^DD("DD") W Y,"."
"RTN","EASECA",21,0)
 .S DIR(0)="Y",DIR("A")="Are you sure you want to add a new test",DIR("B")="NO" D ^DIR K DIR
"RTN","EASECA",22,0)
 .;S DGTTYP="LTC COPAY "
"RTN","EASECA",23,0)
 .;W !,$S($P($G(^DG(408.34,+$P($G(^DGMT(408.31,+DGLDT,0)),U,23),0)),U)="VAMC":"   Use the 'EASEC "_DGTTYP_"TEST EDIT' Option.",1:"   Use the 'EASEC "_DGTTYP_"TEST VIEW' Option.")
"RTN","EASECA",24,0)
 ;
"RTN","EASECA",25,0)
 D ADD G EN:DGMTI<0
"RTN","EASECA",26,0)
 ;
"RTN","EASECA",27,0)
EXMPT ; Is veteran exempt from LTC copayments?
"RTN","EASECA",28,0)
 S DGEXMPT=$$EXMPT^EASECU(DFN)
"RTN","EASECA",29,0)
 I DGEXMPT D EXMPT^EASECSCC(DFN,DGMTI,DGEXMPT) D Q G EN
"RTN","EASECA",30,0)
 ; Is veteran exempt for reason other than low income?
"RTN","EASECA",31,0)
 ; LTC Phase IV (EAS*1*40)
"RTN","EASECA",32,0)
 W !!
"RTN","EASECA",33,0)
 S DIR("A")="Is veteran EXEMPT from LTC copayments",DIR("B")="NO",DIR(0)="Y",DIR("?")="Enter either 'Y' or 'N'."
"RTN","EASECA",34,0)
 S DIR("?",1)="Answer 'Yes' if the veteran is exempt from LTC copayments"
"RTN","EASECA",35,0)
 S DIR("?",2)="for a reason other than low income.",DIR("?",3)=""
"RTN","EASECA",36,0)
 D ^DIR K DIR I $D(DTOUT)!($D(DUOUT)) D DEL,Q G EN
"RTN","EASECA",37,0)
 I Y D  D Q G EN
"RTN","EASECA",38,0)
 .; Get reason for exemption
"RTN","EASECA",39,0)
 .S DIR("A")="Reason for Exemption",DIR(0)="P^714.1:EM"
"RTN","EASECA",40,0)
 .S DIR("S")="I $P(^(0),U,2),""^1^2^12^""'[(U_Y_U)"
"RTN","EASECA",41,0)
 .D ^DIR K DIR I 'Y!($D(DUOUT))!($D(DTOUT)) D  D DEL Q
"RTN","EASECA",42,0)
 ..W !!,"A reason for exemption must be entered.  LTC Copay Test cannot be added.",!
"RTN","EASECA",43,0)
 .D EXMPT^EASECSCC(DFN,DGMTI,+Y)
"RTN","EASECA",44,0)
 ; Check if veteran's income is below the pension threshold
"RTN","EASECA",45,0)
 D EN^EASECMT I $G(DGOUT) D DEL,Q G EN
"RTN","EASECA",46,0)
 I DGEXMPT D EXMPT^EASECSCC(DFN,DGMTI,2) D Q G EN
"RTN","EASECA",47,0)
 W !! F I=1:1:80 W "="
"RTN","EASECA",48,0)
 W !!,?10,"Veteran is NOT EXEMPT from Long Term Care copayments based"
"RTN","EASECA",49,0)
 W !,?10,"on last year's income and must complete a 10-10EC form."
"RTN","EASECA",50,0)
 W !! F I=1:1:80 W "="
"RTN","EASECA",51,0)
 ; Does veteran decline to provide income information?
"RTN","EASECA",52,0)
 W !!
"RTN","EASECA",53,0)
 D REF^EASECSCC I $D(DTOUT)!($D(DUOUT)) D Q G EN
"RTN","EASECA",54,0)
 I $D(DGREF) D  D Q G EN
"RTN","EASECA",55,0)
 .; Ask if veteran agrees to pay copayments; complete LTC copay test
"RTN","EASECA",56,0)
 .D AGREE^EASECSCC Q:$D(DTOUT)!($D(DUOUT))
"RTN","EASECA",57,0)
 .S DGSTA="NON-EXEMPT",DGCAT="T" D STA^DGMTSCU2 S (DGINT,DGDET,DGNWT)=""
"RTN","EASECA",58,0)
 .D UPD^EASECSCC
"RTN","EASECA",59,0)
 ; Go to LTC co-pay test (1010-EC) input screens
"RTN","EASECA",60,0)
 S DGMTACT="ADD",DGMTROU="EN^EASECA" G EN^EASECSC
"RTN","EASECA",61,0)
 ;
"RTN","EASECA",62,0)
Q K DA,DFN,DGADDF,DGBL,DGCAT,DGEXMPT,DGFL,DGFLD,DGIRO,DGLD,DGLDT,DGLDYR
"RTN","EASECA",63,0)
 K DGMTACT,DGMTCOR,DGMTDT,DGMTI,DGMTROU,DGMTYPT,DGOUT,DGREQF,DGSTA
"RTN","EASECA",64,0)
 K DGTTYP,DGVI,DGVO,DTOUT,DUOUT,X,X1,X2,Y
"RTN","EASECA",65,0)
 Q
"RTN","EASECA",66,0)
 ;
"RTN","EASECA",67,0)
ADD ;Add LTC Copay test
"RTN","EASECA",68,0)
 ; Input  -- DFN     Patient IEN
"RTN","EASECA",69,0)
 ;           DGMTDT  Date
"RTN","EASECA",70,0)
 ;           DGMTYPT Type of Test 3 = LTC Copay
"RTN","EASECA",71,0)
 ; Output -- DGMTI   Annual LTC Copay Test IEN
"RTN","EASECA",72,0)
 N DA,DD,DIC,DIK,DINUM,DLAYGO,DO,DS,X,D0,DGSITE
"RTN","EASECA",73,0)
 ;
"RTN","EASECA",74,0)
 S X=DGMTDT,(DIC,DIK)="^DGMT(408.31,",DIC(0)="L",DLAYGO=408.31
"RTN","EASECA",75,0)
 S DGSITE=$$GETSITE^DGMTU4(.DUZ)
"RTN","EASECA",76,0)
 ; For LTC IV (EAS*1*40) - set 1010EC Form field (#2.1) = 1
"RTN","EASECA",77,0)
 S DIC("DR")=".02////"_DFN_";.019////"_DGMTYPT_";.23////1;2.05////"_DGSITE_";2.1////1"
"RTN","EASECA",78,0)
 K DD,D0
"RTN","EASECA",79,0)
 D FILE^DICN S DGMTI=+Y
"RTN","EASECA",80,0)
ADDQ Q
"RTN","EASECA",81,0)
 ;
"RTN","EASECA",82,0)
DEL ;Delete incomplete LTC Copay test
"RTN","EASECA",83,0)
 ; Input   -- DGMTI  LTC Copay test IEN
"RTN","EASECA",84,0)
 N DA,DIK
"RTN","EASECA",85,0)
 Q:'$G(DGMTI)  Q:$P($G(^DGMT(408.31,DGMTI,0)),U,19)'=3
"RTN","EASECA",86,0)
 S DA=DGMTI,DIK="^DGMT(408.31,"
"RTN","EASECA",87,0)
 D ^DIK
"RTN","EASECA",88,0)
 Q
"RTN","EASECCAL")
0^21^B11243307
"RTN","EASECCAL",1,0)
EASECCAL ;ALB/LBD - Calculate LTC copayment ;27 AUG 2001
"RTN","EASECCAL",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,7,19,34,39,40**;Mar 15, 2001
"RTN","EASECCAL",3,0)
 ;
"RTN","EASECCAL",4,0)
 ; Input --   DFN    Patient IEN
"RTN","EASECCAL",5,0)
 ;            MNTH   Last day of month for the LTC copay calculation
"RTN","EASECCAL",6,0)
 ;                    in FM format (e.g. 3020131)
"RTN","EASECCAL",7,0)
 ;            LOS    (Length of stay) The number of days in the patient's
"RTN","EASECCAL",8,0)
 ;                    LTC episode
"RTN","EASECCAL",9,0)
 ; Output --  COPAY  String containing copayment calculation
"RTN","EASECCAL",10,0)
 ;                    = 0: no completed LTC copay test on file
"RTN","EASECCAL",11,0)
 ;                    piece 1: LTC copay test status
"RTN","EASECCAL",12,0)
 ;                               (1=Exempt; 2=Non-Exempt)
"RTN","EASECCAL",13,0)
 ;                          2: If Exempt, Reason for Exemption
"RTN","EASECCAL",14,0)
 ;                               (IEN to file #714.1)
"RTN","EASECCAL",15,0)
 ;                          3: Calculated LTC copayment for IP 
"RTN","EASECCAL",16,0)
 ;                               (1-180 days)
"RTN","EASECCAL",17,0)
 ;                          4: Calculated LTC copayment for IP
"RTN","EASECCAL",18,0)
 ;                               (181+ days)
"RTN","EASECCAL",19,0)
 ;                          5: Calculated LTC copayment for OP
"RTN","EASECCAL",20,0)
 ;
"RTN","EASECCAL",21,0)
COPAY(DFN,MNTH,LOS) ;
"RTN","EASECCAL",22,0)
 N COPAY,DAYS,MX,IPDR,OPDR,IPMAX,OPMAX,LST,DGMT,DGMTI,DGMTDT,DGSTA,DGEXR
"RTN","EASECCAL",23,0)
 N ERR,X1,X2,INC,EXP,AST,ALLOW,DGSP,SRIC
"RTN","EASECCAL",24,0)
 S COPAY=0
"RTN","EASECCAL",25,0)
 I 'DFN!('MNTH) G Q
"RTN","EASECCAL",26,0)
 S LOS=+$G(LOS),DAYS=$E(MNTH,6,7)
"RTN","EASECCAL",27,0)
 ; Get maximum daily rate for LTC copayments
"RTN","EASECCAL",28,0)
 ; DBIA #3717
"RTN","EASECCAL",29,0)
 S MX=$$MAXRATE^IBAECU(MNTH),OPDR=$P(MX,U),IPDR=$P(MX,U,2) I 'OPDR!('IPDR) G Q
"RTN","EASECCAL",30,0)
 ; Calculate maximum copayment for the month
"RTN","EASECCAL",31,0)
 S OPMAX=DAYS*OPDR,IPMAX=DAYS*IPDR
"RTN","EASECCAL",32,0)
 ; Get last completed LTC copay test
"RTN","EASECCAL",33,0)
 S LST=$$LST^EASECU(DFN,MNTH,3) I +LST=0 G Q
"RTN","EASECCAL",34,0)
 S DGMTI=$P(LST,U),DGMT(0)=$G(^DGMT(408.31,DGMTI,0)) I 'DGMT(0) G Q
"RTN","EASECCAL",35,0)
 S DGMTDT=+DGMT(0),DGSTA=$P($G(^DG(408.32,+$P(DGMT(0),U,3),0)),U,1)
"RTN","EASECCAL",36,0)
 S DGEXR=$P($G(^DGMT(408.31,DGMTI,2)),U,7)
"RTN","EASECCAL",37,0)
 ; If LTC copay test status is neither NON-EXEMPT nor EXEMPT, quit
"RTN","EASECCAL",38,0)
 I DGSTA'="NON-EXEMPT",DGSTA'="EXEMPT" G Q
"RTN","EASECCAL",39,0)
 ; If LTC copay test is more than a year old and the veteran does
"RTN","EASECCAL",40,0)
 ; not have an exemption for eligibility (Compensable SC) or LTC
"RTN","EASECCAL",41,0)
 ; before 11/30/99, quit  (Added for LTC Phase III - EAS*1*34)
"RTN","EASECCAL",42,0)
 ;S X1=MNTH,X2=DGMTDT D ^%DTC I X>365,"^1^4^"'[(U_DGEXR_U) G Q
"RTN","EASECCAL",43,0)
 S COPAY=$S(DGSTA="EXEMPT":1,1:2)_U
"RTN","EASECCAL",44,0)
 ; If test status = 'EXEMPT', get Reason for Exemption
"RTN","EASECCAL",45,0)
 I DGSTA="EXEMPT" S COPAY=COPAY_DGEXR
"RTN","EASECCAL",46,0)
 ; If veteran declined to give financial info, copay = max monthly copay
"RTN","EASECCAL",47,0)
 I $P(DGMT(0),U,14) S COPAY=COPAY_U_IPMAX_U_IPMAX_U_OPMAX G Q
"RTN","EASECCAL",48,0)
 ; Get total income, assets and expenses for veteran (and spouse)
"RTN","EASECCAL",49,0)
 D FINTOT I $G(ERR) D  G Q
"RTN","EASECCAL",50,0)
 .I +COPAY=1 Q
"RTN","EASECCAL",51,0)
 .;no financial data but veteran agreed to pay copayments, copay = max
"RTN","EASECCAL",52,0)
 .I $P(DGMT(0),U,11) S COPAY=COPAY_U_IPMAX_U_IPMAX_U_OPMAX Q
"RTN","EASECCAL",53,0)
 .S COPAY=0
"RTN","EASECCAL",54,0)
 ; Calculate copayments
"RTN","EASECCAL",55,0)
 D CALC
"RTN","EASECCAL",56,0)
Q ; Quit and return COPAY
"RTN","EASECCAL",57,0)
 Q COPAY
"RTN","EASECCAL",58,0)
 ;
"RTN","EASECCAL",59,0)
FINTOT ; Get total income, assets and expenses for veteran (and spouse)
"RTN","EASECCAL",60,0)
 N DGDC,DGDEP,DGDET,DGERR,DGIN0,DGIN1,DGIN2,DGINI,DGINT,DGINTF,DGIRI
"RTN","EASECCAL",61,0)
 N DGNC,DGND,DGNWT,DGNWTF,DGPRI,DGVINI,DGVIR0,DGVIRI
"RTN","EASECCAL",62,0)
 S ERR=0
"RTN","EASECCAL",63,0)
 S DGPRI=$O(^DGPR(408.12,"C",DFN_";DPT(",0)) I 'DGPRI S ERR=1 Q
"RTN","EASECCAL",64,0)
 D GETIENS^EASECU2(DFN,DGPRI,DGMTDT) I '$G(DGIRI),'$G(DGINI) S ERR=1 Q
"RTN","EASECCAL",65,0)
 S DGVIRI=DGIRI,DGVINI=DGINI
"RTN","EASECCAL",66,0)
 D DEP^EASECSU3
"RTN","EASECCAL",67,0)
 D INC^EASECSU3
"RTN","EASECCAL",68,0)
 I DGINT=0,DGDET=0,DGNWT=0 S ERR=1 Q
"RTN","EASECCAL",69,0)
 ; Does spouse reside in community?
"RTN","EASECCAL",70,0)
 S SRIC=$P(DGVIR0,U,16)
"RTN","EASECCAL",71,0)
 ; Divide income and expense totals by 12 to get monthly amounts
"RTN","EASECCAL",72,0)
 S INC=DGINT/12,EXP=DGDET/12,AST=DGNWT
"RTN","EASECCAL",73,0)
 ; Calculate total monthly allowance:
"RTN","EASECCAL",74,0)
 ; 20*number of days in month*(veteran+spouse(if married and spouse
"RTN","EASECCAL",75,0)
 ;   resides in the community))
"RTN","EASECCAL",76,0)
 S ALLOW=20*DAYS*(1+SRIC)
"RTN","EASECCAL",77,0)
 Q
"RTN","EASECCAL",78,0)
 ;
"RTN","EASECCAL",79,0)
CALC ; Calculate copayments
"RTN","EASECCAL",80,0)
 N CCPY,OPCPY,IPCPY1,IPCPY2,TINC,TEXP,TAST,OVR180,IPRPT,CPYFLG,EASADM
"RTN","EASECCAL",81,0)
 ; Calculation for IP services up to 180 days and OP services:
"RTN","EASECCAL",82,0)
 ;   Income-Allowance-Expenses
"RTN","EASECCAL",83,0)
 S CCPY=INC-ALLOW-EXP
"RTN","EASECCAL",84,0)
 S (OPCPY,IPCPY1)=$S(CCPY>0:(CCPY+.5)\1,1:0)
"RTN","EASECCAL",85,0)
 ; Calculation for IP services 181+ days, add in assets
"RTN","EASECCAL",86,0)
 S IPCPY2=0 I LOS>180 D
"RTN","EASECCAL",87,0)
 . S TEXP=0 I DGSP,SRIC S TEXP=TEXP+EXP
"RTN","EASECCAL",88,0)
 . S TINC=INC,TAST=AST,(OVR180,IPRPT)=1,CPYFLG=0
"RTN","EASECCAL",89,0)
 . S EASADM=$$FMADD^XLFDT(MNTH,-LOS)
"RTN","EASECCAL",90,0)
 . ; Get value of assets after spenddown is applied
"RTN","EASECCAL",91,0)
 . S TAST=$$ASSET^EASECPC1
"RTN","EASECCAL",92,0)
 . S CCPY=CCPY+TAST
"RTN","EASECCAL",93,0)
 . ;If veteran is single or spouse does not reside in the community,
"RTN","EASECCAL",94,0)
 . ;add expenses back in
"RTN","EASECCAL",95,0)
 . I 'DGSP!('SRIC) S CCPY=CCPY+EXP
"RTN","EASECCAL",96,0)
 . S IPCPY2=(CCPY+.5)\1 I IPCPY2<0 S IPCPY2=0
"RTN","EASECCAL",97,0)
 S COPAY=COPAY_U_IPCPY1_U_IPCPY2_U_OPCPY
"RTN","EASECCAL",98,0)
 Q
"RTN","EASECDD")
0^7^B51743119
"RTN","EASECDD",1,0)
EASECDD ;ALB/LBD - Executable help for fields in file #408.21  ;4 SEP 2001
"RTN","EASECDD",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,7,34,40**;Mar 15, 2001
"RTN","EASECDD",3,0)
 ;
"RTN","EASECDD",4,0)
8 ; Social Security
"RTN","EASECDD",5,0)
 W !,?8,"Enter in this field the annual amount of Social Security"
"RTN","EASECDD",6,0)
 W !,?8,"received during the current calendar year."
"RTN","EASECDD",7,0)
 W !!,?8,"A monthly amount can be entered with an '*' after it.",!
"RTN","EASECDD",8,0)
 S X="?"
"RTN","EASECDD",9,0)
 Q
"RTN","EASECDD",10,0)
9 ; US Civil Service
"RTN","EASECDD",11,0)
 W !,?8,"Enter in this field the annual amount of U.S. Civil Service"
"RTN","EASECDD",12,0)
 W !,?8,"received during the current calendar year."
"RTN","EASECDD",13,0)
 W !!,?8,"A monthly amount can be entered with an '*' after it.",!
"RTN","EASECDD",14,0)
 S X="?"
"RTN","EASECDD",15,0)
 Q
"RTN","EASECDD",16,0)
10 ; US Railroad Retirement
"RTN","EASECDD",17,0)
 W !,?8,"Enter in this field the annual amount of U.S. Railroad Retirement"
"RTN","EASECDD",18,0)
 W !,?8,"received during the current calendar year."
"RTN","EASECDD",19,0)
 W !!,?8,"A monthly amount can be entered with an '*' after it.",!
"RTN","EASECDD",20,0)
 S X="?"
"RTN","EASECDD",21,0)
 Q
"RTN","EASECDD",22,0)
11 ; Military Retirement
"RTN","EASECDD",23,0)
 W !,?8,"Enter in this field the annual amount of Military Retirement"
"RTN","EASECDD",24,0)
 W !,?8,"received during the current calendar year."
"RTN","EASECDD",25,0)
 W !!,?8,"A monthly amount can be entered with an '*' after it.",!
"RTN","EASECDD",26,0)
 S X="?"
"RTN","EASECDD",27,0)
 Q
"RTN","EASECDD",28,0)
12 ; Unemployment Compensation
"RTN","EASECDD",29,0)
 W !,?8,"Enter in this field the annual amount of Unemployment Compensation"
"RTN","EASECDD",30,0)
 W !,?8,"received during the current calendar year."
"RTN","EASECDD",31,0)
 W !!,?8,"A monthly amount can be entered with an '*' after it.",!
"RTN","EASECDD",32,0)
 S X="?"
"RTN","EASECDD",33,0)
 Q
"RTN","EASECDD",34,0)
13 ; Other Retirement
"RTN","EASECDD",35,0)
 W !,?8,"Enter in this field the annual amount of Other Retirement received"
"RTN","EASECDD",36,0)
 W !,?8,"during the current calendar year.  This includes company, state,"
"RTN","EASECDD",37,0)
 W !,?8,"local, etc."
"RTN","EASECDD",38,0)
 W !!,?8,"A monthly amount can be entered with an '*' after it.",!
"RTN","EASECDD",39,0)
 S X="?"
"RTN","EASECDD",40,0)
 Q
"RTN","EASECDD",41,0)
14 ; Total Income from Employment
"RTN","EASECDD",42,0)
 W !,?8,"Enter in this field the annual amount of Gross Income received during"
"RTN","EASECDD",43,0)
 W !,?8,"the current year.  This includes, but is not limited to, wages and"
"RTN","EASECDD",44,0)
 W !,?8,"income from a business, bonuses, tips, severance pay, accrued"
"RTN","EASECDD",45,0)
 W !,?8,"benefits, cash gifts."
"RTN","EASECDD",46,0)
 W !!,?8,"A monthly amount can be entered with an '*' after it.",!
"RTN","EASECDD",47,0)
 S X="?"
"RTN","EASECDD",48,0)
 Q
"RTN","EASECDD",49,0)
15 ; Interest, Dividend or Annuity (Original 10-10EC)
"RTN","EASECDD",50,0)
 ; Net Income from Farm, Ranch or Business (Revised 10-10EC)
"RTN","EASECDD",51,0)
 ;  Display a different message for the revised 10-10EC form.
"RTN","EASECDD",52,0)
 ;  Modified for LTC IV (EAS*1*40)
"RTN","EASECDD",53,0)
 I $G(DGFORM) D
"RTN","EASECDD",54,0)
 .W !,?8,"Enter in this field the annual amount of Net Income received during"
"RTN","EASECDD",55,0)
 .W !,?8,"the current calendar year from the operation of a farm, ranch,"
"RTN","EASECDD",56,0)
 .W !,?8,"property or business."
"RTN","EASECDD",57,0)
 I '$G(DGFORM) D
"RTN","EASECDD",58,0)
 .W !,?8,"Enter in this field the annual amount of Interest and Dividend"
"RTN","EASECDD",59,0)
 .W !,?8,"Income received during the current calendar year (i.e., interest"
"RTN","EASECDD",60,0)
 .W !,?8,"income, standard dividend income from non tax deferred annuities)."
"RTN","EASECDD",61,0)
 W !!,?8,"A monthly amount can be entered with an '*' after it.",!
"RTN","EASECDD",62,0)
 S X="?"
"RTN","EASECDD",63,0)
 Q
"RTN","EASECDD",64,0)
16 ; Workers Comp or Black Lung
"RTN","EASECDD",65,0)
 W !,?8,"Enter in this field the annual amount of Workers Compensation or"
"RTN","EASECDD",66,0)
 W !,?8,"Black Lung Benefits received during the current calendar year."
"RTN","EASECDD",67,0)
 W !!,?8,"A monthly amount can be entered with an '*' after it.",!
"RTN","EASECDD",68,0)
 S X="?"
"RTN","EASECDD",69,0)
 Q
"RTN","EASECDD",70,0)
17 ; All Other Income
"RTN","EASECDD",71,0)
 ;  Display a different message for the revised 10-10EC form.
"RTN","EASECDD",72,0)
 ;  Modified for LTC IV (EAS*1*40)
"RTN","EASECDD",73,0)
 I $G(DGFORM) D
"RTN","EASECDD",74,0)
 .W !,?8,"Enter in this field the annual amount of All Other Income received"
"RTN","EASECDD",75,0)
 .W !,?8,"during the current calendar year, including retirement and pension"
"RTN","EASECDD",76,0)
 .W !,?8,"income, Social Security Retirement and Social Security Disability"
"RTN","EASECDD",77,0)
 .W !,?8,"income, compensation benefits such as unemployment, Workers and"
"RTN","EASECDD",78,0)
 .W !,?8,"Black Lung, or VA disability.  Also cash gifts, court mandated"
"RTN","EASECDD",79,0)
 .W !,?8,"payments, inheritance amounts, tort settlement payments, interest"
"RTN","EASECDD",80,0)
 .W !,?8,"and dividends, including tax exempt earnings and distributions from"
"RTN","EASECDD",81,0)
 .W !,?8,"Individual Retirement Accounts (IRAs) or annuities."
"RTN","EASECDD",82,0)
 I '$G(DGFORM) D
"RTN","EASECDD",83,0)
 .W !,?8,"Enter in this field the annual amount of All Other Income"
"RTN","EASECDD",84,0)
 .W !,?8,"received during the current calendar year (i.e., inheritance amounts,"
"RTN","EASECDD",85,0)
 .W !,?8,"tort settlement payments)."
"RTN","EASECDD",86,0)
 W !!,?8,"A monthly amount can be entered with an '*' after it.",!
"RTN","EASECDD",87,0)
 S X="?"
"RTN","EASECDD",88,0)
 Q
"RTN","EASECDD",89,0)
101 ; Medical Expenses
"RTN","EASECDD",90,0)
 W !,?8,"Enter in this field the total amount of unreimbursed medical expenses"
"RTN","EASECDD",91,0)
 W !,?8,"paid by the veteran during the current calendar year.  The expenses"
"RTN","EASECDD",92,0)
 W !,?8,"can be for the veteran or for members of the veteran's family."
"RTN","EASECDD",93,0)
 W !,?8,"Reportable medical expenses include amounts paid for the following:"
"RTN","EASECDD",94,0)
 W !,?8,"fees of physicians, dentists, and other providers of health services;"
"RTN","EASECDD",95,0)
 W !,?8,"hospital and nursing home fees; medical insurance premiums (including"
"RTN","EASECDD",96,0)
 W !,?8,"the Medicare premium); drugs and medicines; eyeglasses; any other"
"RTN","EASECDD",97,0)
 W !,?8,"expenses that are reasonable related to medical care.  The expenses"
"RTN","EASECDD",98,0)
 W !,?8,"must actually have been paid by the veteran.  Do not list expenses"
"RTN","EASECDD",99,0)
 W !,?8,"which have not been paid or which have been paid by someone other"
"RTN","EASECDD",100,0)
 W !,?8,"than the veteran.  Do not list expenses which the veteran has paid if"
"RTN","EASECDD",101,0)
 W !,?8,"the veteran expects to receive reimbursement from insurance or some"
"RTN","EASECDD",102,0)
 W !,?8,"other source."
"RTN","EASECDD",103,0)
 W !
"RTN","EASECDD",104,0)
 W !,?8,"A monthly amount can be entered with an '*' after it.",!
"RTN","EASECDD",105,0)
 S X="?"
"RTN","EASECDD",106,0)
 Q
"RTN","EASECDD",107,0)
102 ; Funeral and Burial Expenses
"RTN","EASECDD",108,0)
 ;   Modified wording for LTC Phase III (EAS*1*34)
"RTN","EASECDD",109,0)
 W !,?8,"Enter in this field amounts paid by the veteran during the current"
"RTN","EASECDD",110,0)
 W !,?8,"calendar year for funeral or burial expenses of the veteran's"
"RTN","EASECDD",111,0)
 W !,?8,"spouse or child, or pre-paid arrangements for the veteran."
"RTN","EASECDD",112,0)
 W !,?8,"Do not report amounts paid for funeral or burial expenses of other"
"RTN","EASECDD",113,0)
 W !,?8,"relatives such as parents, siblings, etc."
"RTN","EASECDD",114,0)
 W !
"RTN","EASECDD",115,0)
 W !,?8,"A monthly amount can be entered with an '*' after it.",!
"RTN","EASECDD",116,0)
 S X="?"
"RTN","EASECDD",117,0)
 Q
"RTN","EASECDD",118,0)
103 ; Educational Expenses
"RTN","EASECDD",119,0)
 W !,?8,"Enter in this field the total amount paid by the veteran for"
"RTN","EASECDD",120,0)
 W !,?8,"educational expenses during the current calendar year.  This"
"RTN","EASECDD",121,0)
 W !,?8,"includes educational expenses for the veteran, spouse and children."
"RTN","EASECDD",122,0)
 W !,?8,"Educational expenses are tuition, fees, and books if enrolled in a"
"RTN","EASECDD",123,0)
 W !,?8,"program of education."
"RTN","EASECDD",124,0)
 W !
"RTN","EASECDD",125,0)
 W !,?8,"A monthly amount can be entered with an '*' after it.",!
"RTN","EASECDD",126,0)
 S X="?"
"RTN","EASECDD",127,0)
 Q
"RTN","EASECDD",128,0)
201 ; Cash
"RTN","EASECDD",129,0)
 ;  Display a different message for the revised 10-10EC form.
"RTN","EASECDD",130,0)
 ;  Modified for LTC IV (EAS*1*40)
"RTN","EASECDD",131,0)
 W !,?8,"Enter in this field cash and amounts in bank accounts.  This"
"RTN","EASECDD",132,0)
 W !,?8,"includes checking accounts, savings accounts, money markets,"
"RTN","EASECDD",133,0)
 W !,?8,"interest, dividends from IRA, 401K's, and other tax deferred"
"RTN","EASECDD",134,0)
 W !,?8,"annuities.",!
"RTN","EASECDD",135,0)
 ;If this is the revised 10-10EC form, also print the message for stocks.
"RTN","EASECDD",136,0)
 I $G(DGFORM) G 202
"RTN","EASECDD",137,0)
 S X="?"
"RTN","EASECDD",138,0)
 Q
"RTN","EASECDD",139,0)
202 ; Stock, bonds, mutual funds
"RTN","EASECDD",140,0)
 W !,?8,"Enter in this field the current value of stocks, bonds, mutual"
"RTN","EASECDD",141,0)
 W !,?8,"funds, SEP's, and other retirement accounts (e.g., IRA, 401K,"
"RTN","EASECDD",142,0)
 W !,?8,"annuities, self-employed person).",!
"RTN","EASECDD",143,0)
 S X="?"
"RTN","EASECDD",144,0)
 Q
"RTN","EASECDP3")
0^8^B9369220
"RTN","EASECDP3",1,0)
EASECDP3 ;ALB/LBD - Dependents display ; 20 AUG 2001
"RTN","EASECDP3",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,40**;Mar 15, 2001
"RTN","EASECDP3",3,0)
 ;NOTE: This routine was modified from DGDEP3 for LTC co-pay
"RTN","EASECDP3",4,0)
 ;
"RTN","EASECDP3",5,0)
SELF(INCPER,NAME,RELATE,ACT,DGMTI,CNT) ; Display information concerning veteran
"RTN","EASECDP3",6,0)
 ;
"RTN","EASECDP3",7,0)
 S DGX="",DGX=$$SETSTR^VALM1(CNT,DGX,3,3)
"RTN","EASECDP3",8,0)
 I $G(DGMTI),INCPER,($P($G(^DGMT(408.22,+INCPER,"MT")),U)=DGMTI) S DGX=$$SETSTR^VALM1("*",DGX,5,1)
"RTN","EASECDP3",9,0)
 S DGX=$$SETSTR^VALM1(NAME,DGX,9,22)
"RTN","EASECDP3",10,0)
 S DGX=$$SETSTR^VALM1($P($G(^DG(408.11,RELATE,0)),U),DGX,32,30)
"RTN","EASECDP3",11,0)
 S DGX=$$SETSTR^VALM1($S($P(ACT,U,2)=1:"*",1:""),DGX,65,1)
"RTN","EASECDP3",12,0)
 D SET^EASECDEP(DGX)
"RTN","EASECDP3",13,0)
 ;
"RTN","EASECDP3",14,0)
 Q:RELATE=2
"RTN","EASECDP3",15,0)
 S INCPER=^DGMT(408.22,INCPER,0)
"RTN","EASECDP3",16,0)
 S DGX="",DGX=$$SETSTR^VALM1("Married This Year: ",DGX,18,19)
"RTN","EASECDP3",17,0)
 S DGX=$$SETSTR^VALM1($S($P(INCPER,U,14):"Yes",$P(INCPER,U,14)="":"Unanswered",1:"No"),DGX,38,10)
"RTN","EASECDP3",18,0)
 D SET^EASECDEP(DGX)
"RTN","EASECDP3",19,0)
 ;
"RTN","EASECDP3",20,0)
 Q:'$G(DGMTI)
"RTN","EASECDP3",21,0)
 I $P(INCPER,U,14)=1 D
"RTN","EASECDP3",22,0)
 . ;If this is the new 10-10EC format display Legally Separated field
"RTN","EASECDP3",23,0)
 . ;Added for LTC Phase IV (EAS*1*40)
"RTN","EASECDP3",24,0)
 .I $G(DGFORM) D  Q:$P(INCPER,U,17)=1
"RTN","EASECDP3",25,0)
 ..S DGX="",DGX=$$SETSTR^VALM1("Legally Separated: ",DGX,18,19)
"RTN","EASECDP3",26,0)
 ..S DGX=$$SETSTR^VALM1($S($P(INCPER,U,17):"Yes",$P(INCPER,U,17)="":"Unanswered",1:"No"),DGX,38,10)
"RTN","EASECDP3",27,0)
 ..D SET^EASECDEP(DGX)
"RTN","EASECDP3",28,0)
 .S DGX="",DGX=$$SETSTR^VALM1("Spouse Residing in Community: ",DGX,7,30)
"RTN","EASECDP3",29,0)
 .S DGX=$$SETSTR^VALM1($S($P(INCPER,U,16):"Yes",$P(INCPER,U,16)="":"Unanswered",1:"No"),DGX,38,10)
"RTN","EASECDP3",30,0)
 .D SET^EASECDEP(DGX)
"RTN","EASECDP3",31,0)
 .Q:$P(INCPER,U,16)=0!($G(DGFORM))
"RTN","EASECDP3",32,0)
 .S DGX="",DGX=$$SETSTR^VALM1("Living with Spouse: ",DGX,17,20)
"RTN","EASECDP3",33,0)
 .S DGX=$$SETSTR^VALM1($S($P(INCPER,U,15):"Yes",$P(INCPER,U,15)="":"Unanswered",1:"No"),DGX,38,10)
"RTN","EASECDP3",34,0)
 .D SET^EASECDEP(DGX)
"RTN","EASECDP3",35,0)
 ;
"RTN","EASECDP3",36,0)
 Q
"RTN","EASECDP3",37,0)
 ;
"RTN","EASECDP3",38,0)
CHILD(INCPER,NAME,RELATE,ACT,DGMTI,DGMTACT,CNT) ; Display information concerning dependents
"RTN","EASECDP3",39,0)
 ;
"RTN","EASECDP3",40,0)
 S DGX="",DGX=$$SETSTR^VALM1(CNT,DGX,3,3)
"RTN","EASECDP3",41,0)
 I $G(DGMTI),INCPER,($P($G(^DGMT(408.22,+INCPER,"MT")),U)=DGMTI) S DGX=$$SETSTR^VALM1("*",DGX,5,1)
"RTN","EASECDP3",42,0)
 S DGX=$$SETSTR^VALM1(NAME,DGX,9,22)
"RTN","EASECDP3",43,0)
 S DGX=$$SETSTR^VALM1($P($G(^DG(408.11,RELATE,0)),U),DGX,32,30)
"RTN","EASECDP3",44,0)
 S DGX=$$SETSTR^VALM1($S($P(ACT,U,2)=1:"*",1:""),DGX,65,1)
"RTN","EASECDP3",45,0)
 D SET^EASECDEP(DGX)
"RTN","EASECDP3",46,0)
 ;
"RTN","EASECDP3",47,0)
 Q:'$G(DGMTI)!('$P($G(^DG(408.11,RELATE,0)),U,4))
"RTN","EASECDP3",48,0)
 S INCPER=^DGMT(408.22,INCPER,0)
"RTN","EASECDP3",49,0)
 S DGX="",DGX=$$SETSTR^VALM1("Dependent Residing in Community: ",DGX,4,33)
"RTN","EASECDP3",50,0)
 S DGX=$$SETSTR^VALM1($S($P(INCPER,U,16):"Yes",$P(INCPER,U,16)="":"Unanswered",1:"No"),DGX,38,10)
"RTN","EASECDP3",51,0)
 D SET^EASECDEP(DGX)
"RTN","EASECDP3",52,0)
 G:$P(INCPER,U,16)=0 CHILDQ
"RTN","EASECDP3",53,0)
 S DGX="",DGX=$$SETSTR^VALM1("Dependent Living with You: ",DGX,10,27)
"RTN","EASECDP3",54,0)
 S DGX=$$SETSTR^VALM1($S($P(INCPER,U,15):"Yes",$P(INCPER,U,15)="":"Unanswered",1:"No"),DGX,38,10)
"RTN","EASECDP3",55,0)
 D SET^EASECDEP(DGX)
"RTN","EASECDP3",56,0)
CHILDQ Q
"RTN","EASECE")
0^11^B15140589
"RTN","EASECE",1,0)
EASECE ;ALB/PHH,LBD - Edit an Existing LTC Co-Pay Test ;17 AUG 2001
"RTN","EASECE",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,7,34,40**;Mar 15, 2001
"RTN","EASECE",3,0)
 ;
"RTN","EASECE",4,0)
EN ;Entry point to edit an existing LTC co-pay test
"RTN","EASECE",5,0)
 N DGMDOD S DGMDOD="",DGMTYPT=3
"RTN","EASECE",6,0)
 S DIC("S")="I $D(^DGMT(408.31,""AID"",DGMTYPT,+Y))"
"RTN","EASECE",7,0)
 I $D(DGMTDFN)#2 K DGMTDFN
"RTN","EASECE",8,0)
 S DIC="^DPT(",DIC(0)="AEMQ" W ! D ^DIC K DIC G Q:Y<0 S (DFN,DGMTDFN)=+Y
"RTN","EASECE",9,0)
 I $P($G(^DPT(DFN,.35)),U)'="" S DGMDOD=$P(^DPT(DFN,.35),U)
"RTN","EASECE",10,0)
 I $G(DGMDOD) W !,"Patient died on: ",$$FMTE^XLFDT(DGMDOD,"1D") Q
"RTN","EASECE",11,0)
 ;
"RTN","EASECE",12,0)
DT S DIC("A")="Select DATE OF LTC COPAY TEST: "
"RTN","EASECE",13,0)
 I $D(^DGMT(408.31,+$$LST^EASECU(DFN,"",DGMTYPT),0)) S DIC("B")=$P(^(0),"^")
"RTN","EASECE",14,0)
 S DIC("S")="I $P(^(0),U,2)=DFN,$P(^(0),U,19)=DGMTYPT"
"RTN","EASECE",15,0)
 S DIC="^DGMT(408.31,",DIC(0)="EQZ" W ! D EN^DGMTLK K DIC G Q:Y<0
"RTN","EASECE",16,0)
 S DGMTI=+Y,DGMTDT=$P(Y,"^",2),DGMT0=Y(0)
"RTN","EASECE",17,0)
 ;
"RTN","EASECE",18,0)
 ;If test is uneditable, print error message and allow user to view test
"RTN","EASECE",19,0)
 ;or print 10/10EC
"RTN","EASECE",20,0)
 ;
"RTN","EASECE",21,0)
 I '$P($G(^DG(408.34,+$P(Y(0),U,23),0)),U,2) D  D:$G(DGMTERR) VIEWPRT G EN
"RTN","EASECE",22,0)
 .W !!?3,*7,"Warning: Uneditable LTC Copay test.  The source of this test is "_$S($$SR^DGMTAUD1(Y(0))]"":$$SR^DGMTAUD1(Y(0)),1:"UNKNOWN")
"RTN","EASECE",23,0)
 .W !?12,"which has been flagged as an uneditable source.",!
"RTN","EASECE",24,0)
 .S DIR("A")="Would you like to view the LTC Copay test or print the 10-10EC",DIR("B")="NO",DIR(0)="Y"
"RTN","EASECE",25,0)
 .D ^DIR K DIR S DGMTERR=Y I $D(DTOUT)!($D(DUOUT)) K DGMTERR,DTOUT,DUOUT
"RTN","EASECE",26,0)
 ;
"RTN","EASECE",27,0)
 ; If user holds DG MTDELETE security key, allow test date to be edited.
"RTN","EASECE",28,0)
 ; LTC III (EAS*1*34)
"RTN","EASECE",29,0)
 I $D(^XUSEC("DG MTDELETE",+$G(DUZ))) D
"RTN","EASECE",30,0)
 .N DIR,DA,DR,DIE,X,Y,DTOUT,DUOUT,DIROUT,DIRUT,DGNEWDT
"RTN","EASECE",31,0)
 .S DIR(0)="D^:DT:EX",DIR("A")="DATE OF TEST",DIR("B")=$$FMTE^XLFDT(DGMTDT,1)
"RTN","EASECE",32,0)
 .S DIR("?")="Enter a date that is less than or equal to today."
"RTN","EASECE",33,0)
 .S DIR("?",1)="Enter the date of the LTC Copay Test."
"RTN","EASECE",34,0)
 .D ^DIR K DIR Q:'Y!(Y=DGMTDT)  S DGNEWDT=Y
"RTN","EASECE",35,0)
 .S DIR(0)="Y",DIR("A")="Are you sure you want to change the date of the LTC Copay Test",DIR("B")="NO" D ^DIR Q:'Y
"RTN","EASECE",36,0)
 .S DIE="^DGMT(408.31,",DA=DGMTI,DR=".01////"_DGNEWDT_";2.02///NOW"
"RTN","EASECE",37,0)
 .D ^DIE
"RTN","EASECE",38,0)
 ;
"RTN","EASECE",39,0)
EXMPT ; Is veteran exempt?
"RTN","EASECE",40,0)
 S DGEXMPT=$$EXMPT^EASECU(DFN)
"RTN","EASECE",41,0)
 I DGEXMPT D EXMPT^EASECSCC(DFN,DGMTI,DGEXMPT) D Q G EN
"RTN","EASECE",42,0)
 ;
"RTN","EASECE",43,0)
 D DISPLAY^EASECU23(DGMTI,DGMTYPT),PAUSE I $D(DTOUT)!($D(DUOUT)) K DTOUT,DUOUT G EN
"RTN","EASECE",44,0)
 ;
"RTN","EASECE",45,0)
 ; Allow user to edit LTC copay test status or reason for exemption.
"RTN","EASECE",46,0)
 ; If veteran is exempt for reason other than low income, don't do
"RTN","EASECE",47,0)
 ; income check.  Added for LTC Phase IV (EAS*1*40)
"RTN","EASECE",48,0)
 W ! S DGEFLG=1 D STA^EASECSCC K DGEFLG
"RTN","EASECE",49,0)
 I $G(DGSTA)="EXEMPT",$G(DGRE),"^2^12^"'[(U_DGRE_U) D EXMPT^EASECSCC(DFN,DGMTI,DGRE) D Q G EN
"RTN","EASECE",50,0)
 S DGNSTA=$G(DGSTA)
"RTN","EASECE",51,0)
 ;
"RTN","EASECE",52,0)
 ; Check if veteran's income is below the pension threshold
"RTN","EASECE",53,0)
 D EN^EASECMT I $G(DGOUT) D Q G EN
"RTN","EASECE",54,0)
 I DGEXMPT D EXMPT^EASECSCC(DFN,DGMTI,2) D Q G EN
"RTN","EASECE",55,0)
 S DGMT0=$G(^DGMT(408.31,DGMTI,0)) F I=4,5,15 I $P(DGMT0,U,I) G EDT
"RTN","EASECE",56,0)
 ; Display message for vets who declined to provide income info
"RTN","EASECE",57,0)
 ; LTC III (EAS*1*34)
"RTN","EASECE",58,0)
 I $P(DGMT0,U,14)=1 D
"RTN","EASECE",59,0)
 .W !! F I=1:1:80 W "="
"RTN","EASECE",60,0)
 .W !!,?10,"Veteran is NOT EXEMPT from Long Term Care copayments and"
"RTN","EASECE",61,0)
 .W !,?10,"must complete a 10-10EC form."
"RTN","EASECE",62,0)
 .W !! F I=1:1:80 W "="
"RTN","EASECE",63,0)
 ; Does veteran decline to provide income information?
"RTN","EASECE",64,0)
 W !!
"RTN","EASECE",65,0)
 D REF^EASECSCC I $D(DTOUT)!($D(DUOUT)) D Q G EN
"RTN","EASECE",66,0)
 I $D(DGREF) D  D Q G EN
"RTN","EASECE",67,0)
 .; Ask if veteran agrees to pay copayments; complete LTC copay test
"RTN","EASECE",68,0)
 .D AGREE^EASECSCC Q:$D(DTOUT)!($D(DUOUT))
"RTN","EASECE",69,0)
 .S DGSTA="NON-EXEMPT",DGCAT="T" D STA^DGMTSCU2 S (DGINT,DGDET,DGNWT)=""
"RTN","EASECE",70,0)
 .D UPD^EASECSCC
"RTN","EASECE",71,0)
 ;
"RTN","EASECE",72,0)
EDT S DGMTACT="EDT",DGMTROU="EN^EASECE" G EN^EASECSC
"RTN","EASECE",73,0)
 ;
"RTN","EASECE",74,0)
Q K DFN,DGEXMPT,DGMTACT,DGMTDT,DGMTERR,DGMT0,DGMTI,DGMTROU,DGMTYPT,DGMTX,DGOUT,DTOUT,DUOUT,X,Y
"RTN","EASECE",75,0)
 K DGREF,DGSTA,DGCAT,DGINT,DGDET,DGNWT,I,DGFORM,DGMTS,DGRE,DGNSTA
"RTN","EASECE",76,0)
 Q
"RTN","EASECE",77,0)
 ;
"RTN","EASECE",78,0)
PAUSE S DIR(0)="E" D ^DIR
"RTN","EASECE",79,0)
 Q
"RTN","EASECE",80,0)
 ;
"RTN","EASECE",81,0)
VIEWPRT ; Select 1 to view an uneditable means test or 2 to print a 10/10EC
"RTN","EASECE",82,0)
 ;
"RTN","EASECE",83,0)
 S DIR(0)="S^1:View LTC Copay Test;2:Print LTC Copay Test 10-10EC",DIR("A")="Select Choice"
"RTN","EASECE",84,0)
 D ^DIR S DGMTANS=Y G:$D(DTOUT)!($D(DUOUT)) VIEWPRTQ
"RTN","EASECE",85,0)
 I DGMTANS=1 D EN1^EASECV
"RTN","EASECE",86,0)
 I DGMTANS=2 D OEN^EASEC10E
"RTN","EASECE",87,0)
VIEWPRTQ ;
"RTN","EASECE",88,0)
 K DGMTANS,DIR,DTOUT,DUOUT,Y
"RTN","EASECE",89,0)
 Q
"RTN","EASECE",90,0)
 ;
"RTN","EASECEXP")
0^18^B39421251
"RTN","EASECEXP",1,0)
EASECEXP ;ALB/LBD - Report of Expiring or Expired LTC Copay Tests; 10-SEP-2003
"RTN","EASECEXP",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**40**;Mar 15, 2001
"RTN","EASECEXP",3,0)
 ;
"RTN","EASECEXP",4,0)
 ; This routine is called from menu option EASEC LTC COPAY TEST EXPIRE
"RTN","EASECEXP",5,0)
 ; and will print a report of LTC Copay Tests that have expired or are
"RTN","EASECEXP",6,0)
 ; about to expire.
"RTN","EASECEXP",7,0)
 ;
"RTN","EASECEXP",8,0)
EN ; Entry point
"RTN","EASECEXP",9,0)
 N EASRPT,EASUDT,EASSRT
"RTN","EASECEXP",10,0)
 ; Select which report to print (1=Pending Expiration; 2=Expired)
"RTN","EASECEXP",11,0)
 S EASRPT=$$RPT Q:'EASRPT
"RTN","EASECEXP",12,0)
 ; Select number of days (report 1) or start date (report 2)
"RTN","EASECEXP",13,0)
 I EASRPT=1 S EASUDT=$$DATE1
"RTN","EASECEXP",14,0)
 E  S EASUDT=$$DATE2
"RTN","EASECEXP",15,0)
 Q:'EASUDT
"RTN","EASECEXP",16,0)
 ; Sort by name or date
"RTN","EASECEXP",17,0)
 S EASSRT=$$SRT Q:EASSRT=""
"RTN","EASECEXP",18,0)
 ; Run the report
"RTN","EASECEXP",19,0)
 D QUE
"RTN","EASECEXP",20,0)
 D ^%ZISC,HOME^%ZIS
"RTN","EASECEXP",21,0)
 Q
"RTN","EASECEXP",22,0)
 ;
"RTN","EASECEXP",23,0)
RPT() ; Select which report to print
"RTN","EASECEXP",24,0)
 ; Input:   None
"RTN","EASECEXP",25,0)
 ; Output:  Y - Report Type (1=Pending Expiration; 2=Expired; 0=Quit)
"RTN","EASECEXP",26,0)
 N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","EASECEXP",27,0)
 W !!,"Report of LTC Copayment Tests"
"RTN","EASECEXP",28,0)
 S DIR(0)="S^1:Pending Expiration;2:Expired"
"RTN","EASECEXP",29,0)
 S DIR("A")="Enter 1 or 2"
"RTN","EASECEXP",30,0)
 S DIR("?",1)="Indicate whether the report should include:"
"RTN","EASECEXP",31,0)
 S DIR("?",2)="(1) a list of veterans whose LTC Copayment Test is pending expiration (i.e.,"
"RTN","EASECEXP",32,0)
 S DIR("?",3)="the anniversary date of the test is approaching) within a user-specified"
"RTN","EASECEXP",33,0)
 S DIR("?",4)="number of days, or"
"RTN","EASECEXP",34,0)
 S DIR("?",5)="(2) a list of veterans whose LTC Copayment Test has already expired (i.e.,"
"RTN","EASECEXP",35,0)
 S DIR("?")="the anniversary date of the test has passed) since a user-specified date."
"RTN","EASECEXP",36,0)
 D ^DIR I 'Y!($D(DTOUT))!($D(DUOUT)) Q 0
"RTN","EASECEXP",37,0)
 Q Y
"RTN","EASECEXP",38,0)
DATE1() ; Select number of days for report 1
"RTN","EASECEXP",39,0)
 ; Input:   None
"RTN","EASECEXP",40,0)
 ; Output:  Y - Number of days to report (1-60)
"RTN","EASECEXP",41,0)
 N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","EASECEXP",42,0)
 S DIR(0)="N^1:60",DIR("A")="Enter number of days to report"
"RTN","EASECEXP",43,0)
 D ^DIR I 'Y!($D(DTOUT))!($D(DUOUT)) Q 0
"RTN","EASECEXP",44,0)
 Q Y
"RTN","EASECEXP",45,0)
DATE2() ; Select start date for report 2
"RTN","EASECEXP",46,0)
 ; Input:   None
"RTN","EASECEXP",47,0)
 ; Output:  Y - Report start date
"RTN","EASECEXP",48,0)
 N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT,SDT,EDT
"RTN","EASECEXP",49,0)
 S SDT=$$FMADD^XLFDT(DT,-365),EDT=$$FMADD^XLFDT(DT,-1)
"RTN","EASECEXP",50,0)
 S DIR(0)="D^"_SDT_":"_EDT_":EX",DIR("A")="Enter a start date"
"RTN","EASECEXP",51,0)
 D ^DIR I 'Y!($D(DTOUT))!($D(DUOUT)) Q 0
"RTN","EASECEXP",52,0)
 Q Y
"RTN","EASECEXP",53,0)
SRT() ; Select sort
"RTN","EASECEXP",54,0)
 ; Input:   None
"RTN","EASECEXP",55,0)
 ; Output:  Y - Sort (N=Name; D=Date)
"RTN","EASECEXP",56,0)
 N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","EASECEXP",57,0)
 S DIR(0)="SB^N:Name;D:Date",DIR("A")="Sort report by Name or Date"
"RTN","EASECEXP",58,0)
 S DIR("?",1)="Indicate whether the report should be sorted by the"
"RTN","EASECEXP",59,0)
 S DIR("?")="Veteran's Name or the LTC Copay Test Anniversary Date"
"RTN","EASECEXP",60,0)
 D ^DIR I $D(DTOUT)!($D(DUOUT)) Q ""
"RTN","EASECEXP",61,0)
 Q Y
"RTN","EASECEXP",62,0)
 ;
"RTN","EASECEXP",63,0)
QUE ; Get the report device, queue if requested
"RTN","EASECEXP",64,0)
 N ZTDESC,ZTIO,ZTRTN,ZTSAVE,ZTSK,POP
"RTN","EASECEXP",65,0)
 K IOP,%ZIS
"RTN","EASECEXP",66,0)
 S %ZIS="Q" D ^%ZIS I POP W !!,"Report Cancelled!" Q
"RTN","EASECEXP",67,0)
 I $D(IO("Q")) D  Q
"RTN","EASECEXP",68,0)
 .S ZTRTN="START^EASECEXP"
"RTN","EASECEXP",69,0)
 .S ZTDESC="PRINT"_$S(EASRPT=1:"EXPIRING",1:"EXPIRED")_"LTC COPAY TESTS"
"RTN","EASECEXP",70,0)
 .S (ZTSAVE("EASRPT"),ZTSAVE("EASUDT"),ZTSAVE("EASSRT"))=""
"RTN","EASECEXP",71,0)
 .D ^%ZTLOAD
"RTN","EASECEXP",72,0)
 .W !,"Report ",$S($D(ZTSK):"Queued!",1:"Cancelled!")
"RTN","EASECEXP",73,0)
 D START
"RTN","EASECEXP",74,0)
 Q
"RTN","EASECEXP",75,0)
 ;
"RTN","EASECEXP",76,0)
START ; Generate report
"RTN","EASECEXP",77,0)
 ; Input:  EASRPT - Report Type (1=Pending Expiration; 2=Expired)
"RTN","EASECEXP",78,0)
 ;         EASUDT - Number of Days or Start Date
"RTN","EASECEXP",79,0)
 ;         EASSRT - Sort (N=Name; D=Date)
"RTN","EASECEXP",80,0)
 N PG,RPTDT,HDR1,HDR2,HDR3,HDRLN,CRT,LINE,OUT,MXLNE,TMP
"RTN","EASECEXP",81,0)
 K ^TMP("EASECEXP",$J) S:$G(ZTSK) ZTREQ="@"
"RTN","EASECEXP",82,0)
 D GETREC
"RTN","EASECEXP",83,0)
 D PRTVAR
"RTN","EASECEXP",84,0)
 U IO D HDR
"RTN","EASECEXP",85,0)
 I '$D(^TMP("EASECEXP",$J)) W !!,?10,"*** No records to print ***" Q
"RTN","EASECEXP",86,0)
 D PRINT I CRT S OUT=$$PAUSE
"RTN","EASECEXP",87,0)
 K ^TMP("EASECEXP",$J)
"RTN","EASECEXP",88,0)
 Q
"RTN","EASECEXP",89,0)
GETREC ; Loop through Annual Means Test File #408.31 to find LTC Copay Tests
"RTN","EASECEXP",90,0)
 ; within the date range
"RTN","EASECEXP",91,0)
 N EASSDT,EASEDT,EDT,ST,DFN,EASIEN
"RTN","EASECEXP",92,0)
 ; Get start and end dates
"RTN","EASECEXP",93,0)
 I EASRPT=1 D
"RTN","EASECEXP",94,0)
 .S EASSDT=$$FMADD^XLFDT(DT,-365)
"RTN","EASECEXP",95,0)
 .S EASEDT=$$FMADD^XLFDT(EASSDT,EASUDT)
"RTN","EASECEXP",96,0)
 E  D
"RTN","EASECEXP",97,0)
 .S EASSDT=$$FMADD^XLFDT(EASUDT,-365)
"RTN","EASECEXP",98,0)
 .S EASEDT=$$FMADD^XLFDT(DT,-365)
"RTN","EASECEXP",99,0)
 ; Find records using "AS" x-ref
"RTN","EASECEXP",100,0)
 S ST=""
"RTN","EASECEXP",101,0)
 F  S ST=$O(^DGMT(408.31,"AS",3,ST)) Q:ST=""  S EDT=-EASEDT-1 F  S EDT=$O(^DGMT(408.31,"AS",3,ST,EDT)) Q:'EDT!(EDT>-EASSDT)  S DFN=0 F  S DFN=$O(^DGMT(408.31,"AS",3,ST,EDT,DFN)) Q:'DFN  D
"RTN","EASECEXP",102,0)
 .S EASIEN=$O(^DGMT(408.31,"AS",3,ST,EDT,DFN,0)) Q:'EASIEN
"RTN","EASECEXP",103,0)
 .Q:'$D(^DGMT(408.31,EASIEN,0))
"RTN","EASECEXP",104,0)
 .;If record meets criteria, save in ^TMP global
"RTN","EASECEXP",105,0)
 .I $$CHK(DFN,EASIEN) D SET(DFN,EASIEN,EASSRT)
"RTN","EASECEXP",106,0)
 Q
"RTN","EASECEXP",107,0)
 ;
"RTN","EASECEXP",108,0)
SET(DFN,IEN,SRT) ;Store data to be printed in the ^TMP global
"RTN","EASECEXP",109,0)
 ; Input:    DFN - Patient IEN
"RTN","EASECEXP",110,0)
 ;           IEN - LTC Copay Test IEN
"RTN","EASECEXP",111,0)
 Q:'$G(DFN)  Q:'$G(IEN)
"RTN","EASECEXP",112,0)
 I $G(SRT)="" S SRT="D"
"RTN","EASECEXP",113,0)
 N NAME,SSN,STAT,REAS,ANNDT
"RTN","EASECEXP",114,0)
 S NAME=$$GET1^DIQ(2,DFN_",",.01),SSN=$$GET1^DIQ(2,DFN_",",.09)
"RTN","EASECEXP",115,0)
 S ANNDT=$$FMADD^XLFDT(+$G(^DGMT(408.31,IEN,0)),365)
"RTN","EASECEXP",116,0)
 S STAT=$$GET1^DIQ(408.31,IEN_",",.03) S:STAT="" STAT="INCOMPLETE"
"RTN","EASECEXP",117,0)
 S REAS=$E($$GET1^DIQ(408.31,IEN_",",2.07),1,41)
"RTN","EASECEXP",118,0)
 I SRT="D" S ^TMP("EASECEXP",$J,ANNDT,NAME,SSN)=STAT_U_REAS
"RTN","EASECEXP",119,0)
 E  S ^TMP("EASECEXP",$J,NAME,ANNDT,SSN)=STAT_U_REAS
"RTN","EASECEXP",120,0)
 Q
"RTN","EASECEXP",121,0)
 ;
"RTN","EASECEXP",122,0)
CHK(DFN,EASIEN) ;Check if LTC Copay Test meets criteria for the report
"RTN","EASECEXP",123,0)
 ; Input:    DFN - Patient IEN
"RTN","EASECEXP",124,0)
 ;           EASIEN - LTC Copay Test IEN
"RTN","EASECEXP",125,0)
 ; Output:   1 = meets criteria for report
"RTN","EASECEXP",126,0)
 ;           0 = doesn't meet criteria for report
"RTN","EASECEXP",127,0)
 I '$G(DFN)!('$G(EASIEN)) Q 0
"RTN","EASECEXP",128,0)
 N LTC,LTCDT,LTCST,CHKDT
"RTN","EASECEXP",129,0)
 S CHKDT=+^DGMT(408.31,EASIEN,0)
"RTN","EASECEXP",130,0)
 ; Don't report if veteran has had another LTC copay test within the year
"RTN","EASECEXP",131,0)
 S LTC=$$LST^EASECU(DFN),LTCDT=$P(LTC,U,2),LTCST=$P(LTC,U,3)
"RTN","EASECEXP",132,0)
 I LTCDT,LTCDT>CHKDT,$$FMDIFF^XLFDT(DT,LTCDT)<365,LTCST'="" Q 0
"RTN","EASECEXP",133,0)
 ; Don't report if veteran is deceased
"RTN","EASECEXP",134,0)
 I $P($G(^DPT(DFN,.35)),U) Q 0
"RTN","EASECEXP",135,0)
 ; Don't report if veteran is exempt due to compensable SC disability or
"RTN","EASECEXP",136,0)
 ; LTC before 11/30/99
"RTN","EASECEXP",137,0)
 I "^1^4^"[(U_$P($G(^DGMT(408.31,EASIEN,2)),U,7)_U) Q 0
"RTN","EASECEXP",138,0)
 Q 1
"RTN","EASECEXP",139,0)
 ;
"RTN","EASECEXP",140,0)
PRTVAR ; Set up variables needed to print report
"RTN","EASECEXP",141,0)
 S CRT=$S($E(IOST,1,2)="C-":1,1:0)
"RTN","EASECEXP",142,0)
 S TMP="^TMP(""EASECEXP"",$J)"
"RTN","EASECEXP",143,0)
 S (PG,OUT)=0,RPTDT=$$FMTE^XLFDT(DT),MXLNE=$S(CRT:13,1:55)
"RTN","EASECEXP",144,0)
 S HDR1=$$CJ^XLFSTR("VETERANS WITH LONG TERM CARE COPAYMENT TESTS THAT",80)
"RTN","EASECEXP",145,0)
 I EASRPT=1 S HDR2=$$CJ^XLFSTR("ARE PENDING EXPIRATION IN "_EASUDT_" DAYS",80)
"RTN","EASECEXP",146,0)
 E  S HDR2=$$CJ^XLFSTR("HAVE EXPIRED SINCE "_$$FMTE^XLFDT(EASUDT,2),80)
"RTN","EASECEXP",147,0)
 S HDR3="SORTED BY "_$S(EASSRT="D":"DATE",1:"NAME")
"RTN","EASECEXP",148,0)
 S HDRLN="",$P(HDRLN,"=",80)=""
"RTN","EASECEXP",149,0)
 Q
"RTN","EASECEXP",150,0)
HDR ; Print report header
"RTN","EASECEXP",151,0)
 S PG=PG+1,LINE=0
"RTN","EASECEXP",152,0)
 W @IOF
"RTN","EASECEXP",153,0)
 W ?0,"REPORT DATE: ",RPTDT,?73,"PAGE: ",$$RJ^XLFSTR(PG,3)
"RTN","EASECEXP",154,0)
 W !!,HDR1,!,HDR2,!,HDR3
"RTN","EASECEXP",155,0)
 W !?50,"LTC Test",?66,"LTC Test"
"RTN","EASECEXP",156,0)
 W !,"SSN",?14,"Veteran's Name",?46,"Anniversary Date",?67,"Status"
"RTN","EASECEXP",157,0)
 W !,HDRLN
"RTN","EASECEXP",158,0)
 Q
"RTN","EASECEXP",159,0)
PRINT ; Print report data
"RTN","EASECEXP",160,0)
 N EASI,EASJ,SSN,REC,NAME,ANNDT,STAT,REAS
"RTN","EASECEXP",161,0)
 S EASI=""
"RTN","EASECEXP",162,0)
 F  S EASI=$O(@TMP@(EASI)) Q:EASI=""!OUT  S EASJ="" F  S EASJ=$O(@TMP@(EASI,EASJ)) Q:EASJ=""  S SSN="" F  S SSN=$O(@TMP@(EASI,EASJ,SSN)) Q:SSN=""  D
"RTN","EASECEXP",163,0)
 .S REC=@TMP@(EASI,EASJ,SSN)
"RTN","EASECEXP",164,0)
 .S NAME=$S(EASSRT="D":EASJ,1:EASI),NAME=$E(NAME,1,30)
"RTN","EASECEXP",165,0)
 .S ANNDT=$S(EASSRT="D":EASI,1:EASJ),ANNDT=$$FMTDT(ANNDT)
"RTN","EASECEXP",166,0)
 .S STAT=$P(REC,U,1)
"RTN","EASECEXP",167,0)
 .S REAS=$P(REC,U,2)
"RTN","EASECEXP",168,0)
 .I LINE>MXLNE S OUT=$$PAUSE Q:OUT   D HDR
"RTN","EASECEXP",169,0)
 .W !,$$SSN(SSN),?14,NAME,?50,ANNDT,?66,STAT
"RTN","EASECEXP",170,0)
 .S LINE=LINE+1
"RTN","EASECEXP",171,0)
 .I STAT="EXEMPT" W !,?30,"Reason: ",REAS S LINE=LINE+1
"RTN","EASECEXP",172,0)
 Q
"RTN","EASECEXP",173,0)
 ;
"RTN","EASECEXP",174,0)
FMTDT(X) ;Format date to print on report
"RTN","EASECEXP",175,0)
 Q $E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"RTN","EASECEXP",176,0)
SSN(X) ; Format SSN to print on report
"RTN","EASECEXP",177,0)
 Q $E(X,1,3)_"-"_$E(X,4,5)_"-"_$E(X,6,9)
"RTN","EASECEXP",178,0)
 ;
"RTN","EASECEXP",179,0)
PAUSE() ; Prompt for next page or quit, if report is sent to screen
"RTN","EASECEXP",180,0)
 N DIR,DIRUT,DUOUT,DTOUT,X,Y
"RTN","EASECEXP",181,0)
 I 'CRT Q 0
"RTN","EASECEXP",182,0)
 S DIR(0)="E"
"RTN","EASECEXP",183,0)
 D ^DIR I 'Y Q 1
"RTN","EASECEXP",184,0)
 Q 0
"RTN","EASECPC")
0^19^B14573671
"RTN","EASECPC",1,0)
EASECPC ;ALB/PHH,CKN,LBD - LTC Copayment Report; 29-AUG-2001
"RTN","EASECPC",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,7,19,24,34,40**;Mar 15, 2001
"RTN","EASECPC",3,0)
 ;
"RTN","EASECPC",4,0)
 ; This routine prints a report of calculated LTC copayments for a veteran.
"RTN","EASECPC",5,0)
 ; It is called by menu option EASEC LTC COPAY PRINT
"RTN","EASECPC",6,0)
 ;
"RTN","EASECPC",7,0)
EN N DFN,EASRPT,EASADM,EASRDT,MAXRT,DGMTI,DGMTDT
"RTN","EASECPC",8,0)
 ; Select which report to print (1=Institutional (IP); 2=Non-Institutional (OP))
"RTN","EASECPC",9,0)
 S EASRPT=$$RPT Q:'EASRPT
"RTN","EASECPC",10,0)
 ; Select Patient
"RTN","EASECPC",11,0)
 S DFN=$$GETDFN Q:'DFN
"RTN","EASECPC",12,0)
 ; Get most recent LTC Copay Test for patient and set up LTC variables
"RTN","EASECPC",13,0)
 I '$$GETLTC(DFN) Q
"RTN","EASECPC",14,0)
 ; Get the LTC admission date (if EASRPT=1)
"RTN","EASECPC",15,0)
 I EASRPT=1 S EASADM=$$ADMDT Q:'EASADM
"RTN","EASECPC",16,0)
 ; Get start date for report
"RTN","EASECPC",17,0)
 S EASRDT=$$RPTDT Q:'EASRDT
"RTN","EASECPC",18,0)
 ; Run the report
"RTN","EASECPC",19,0)
 D QUE
"RTN","EASECPC",20,0)
 Q
"RTN","EASECPC",21,0)
RPT() ; Select which report to print
"RTN","EASECPC",22,0)
 ; Input:   None
"RTN","EASECPC",23,0)
 ; Output:  Y - Report Type (1=Institutional (IP); 2=Non-Institutional (OP); 0=Quit)
"RTN","EASECPC",24,0)
 N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","EASECPC",25,0)
 W !!,"Report of Calculated Long Term Care Copayments"
"RTN","EASECPC",26,0)
 W !,"=============================================="
"RTN","EASECPC",27,0)
 S DIR(0)="S^1:Institutional (Inpatient);2:Non-Institutional (Outpatient)"
"RTN","EASECPC",28,0)
 S DIR("A")="Enter 1 or 2"
"RTN","EASECPC",29,0)
 D ^DIR I 'Y!($D(DTOUT))!($D(DUOUT)) Q 0
"RTN","EASECPC",30,0)
 Q Y
"RTN","EASECPC",31,0)
GETDFN() ; Get the veteran's DFN
"RTN","EASECPC",32,0)
 N DIC,DTOUT,DUOUT,X,Y
"RTN","EASECPC",33,0)
 W !
"RTN","EASECPC",34,0)
 S DIC="^DPT(",DIC(0)="AEMZQ",DIC("S")="I $D(^DGMT(408.31,""AID"",3,+Y))"
"RTN","EASECPC",35,0)
 D ^DIC
"RTN","EASECPC",36,0)
 Q:$D(DTOUT)!($D(DUOUT)) 0
"RTN","EASECPC",37,0)
 Q:Y<0 0
"RTN","EASECPC",38,0)
 Q +Y
"RTN","EASECPC",39,0)
GETLTC(DFN) ; Get the most recent LTC copay test.  If no completed test on
"RTN","EASECPC",40,0)
 ; file, test status is exempt or LTC copay rates not defined, quit 0
"RTN","EASECPC",41,0)
 ; Input:   DFN - Patient file IEN
"RTN","EASECPC",42,0)
 ; Output:  DGMTI - LTC Copay Test IEN (file #408.31)
"RTN","EASECPC",43,0)
 ;          DGMTDT - LTC Copay Test Date
"RTN","EASECPC",44,0)
 ;          MAXRT - Maximum daily copay rates for OP and IP LTC
"RTN","EASECPC",45,0)
 ;          1=OK to continue; 0=Not OK to continue
"RTN","EASECPC",46,0)
 N LTC,STAT
"RTN","EASECPC",47,0)
 S LTC=$$LST^EASECU(DFN),DGMTI=+LTC
"RTN","EASECPC",48,0)
 I 'DGMTI W !!,"No LTC Copayment Test on file for this veteran!" Q 0
"RTN","EASECPC",49,0)
 S DGMTDT=$P(LTC,U,2),STAT=$P(LTC,U,3)
"RTN","EASECPC",50,0)
 ; Get the maximum daily copay rate for outpatient and inpatient LTC
"RTN","EASECPC",51,0)
 ; DBIA #3717
"RTN","EASECPC",52,0)
 S MAXRT=$$MAXRATE^IBAECU(DGMTDT)
"RTN","EASECPC",53,0)
 I '$P(MAXRT,U)!('$P(MAXRT,U,2)) W !!,"Copayment rates for LTC are not available at this time.",!! Q 0
"RTN","EASECPC",54,0)
 ; Check test status, if anything other than Non-Exempt don't continue
"RTN","EASECPC",55,0)
 D DIS^EASECU(DFN)
"RTN","EASECPC",56,0)
 I STAT="NON-EXEMPT" Q 1
"RTN","EASECPC",57,0)
 I STAT="" W !!,"The LTC Copayment Test is incomplete!" Q 0
"RTN","EASECPC",58,0)
 I STAT="EXEMPT" W !!,"This veteran is Exempt from LTC copayments!" Q 0
"RTN","EASECPC",59,0)
 W !!,"This LTC Copayment Test contains an invalid status!"
"RTN","EASECPC",60,0)
 Q 0
"RTN","EASECPC",61,0)
ADMDT() ; Get the LTC admission date (for IP report only)
"RTN","EASECPC",62,0)
 N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","EASECPC",63,0)
 W !
"RTN","EASECPC",64,0)
 S DIR(0)="D^::EX"
"RTN","EASECPC",65,0)
 S DIR("A")="Enter the LTC Admission Date"
"RTN","EASECPC",66,0)
 S DIR("?",1)="Enter the admission date for the current institutional"
"RTN","EASECPC",67,0)
 S DIR("?")="Long Term Care episode."
"RTN","EASECPC",68,0)
 D ^DIR I 'Y!($D(DTOUT))!($D(DUOUT)) Q 0
"RTN","EASECPC",69,0)
 Q Y
"RTN","EASECPC",70,0)
RPTDT() ; Get the start date for the report
"RTN","EASECPC",71,0)
 N DIR,X,Y,DTOUT,DUOUT,DIRUT,DIROUT,DAYS
"RTN","EASECPC",72,0)
RD W !
"RTN","EASECPC",73,0)
 S DIR(0)="D^::EMX"
"RTN","EASECPC",74,0)
 S DIR("A")="Enter the Report Start Date (Month/Year)"
"RTN","EASECPC",75,0)
 S DIR("?",1)="Enter the starting date for the report in the format month/year (e.g. 9/03)."
"RTN","EASECPC",76,0)
 S DIR("?",2)="The report will print 12 months of copayments starting with the"
"RTN","EASECPC",77,0)
 S DIR("?")="month and year entered."
"RTN","EASECPC",78,0)
 D ^DIR I 'Y!($D(DTOUT))!($D(DUOUT)) Q 0
"RTN","EASECPC",79,0)
 S DAYS=$$DOM^EASECPC1(Y)
"RTN","EASECPC",80,0)
 I (Y+DAYS)<$G(EASADM) W !!,*7,"Report Start Date cannot be before LTC Admission Date!" G RD
"RTN","EASECPC",81,0)
 Q Y+DAYS
"RTN","EASECPC",82,0)
 ;
"RTN","EASECPC",83,0)
QUE ; Get report device. Queue report if requested.
"RTN","EASECPC",84,0)
 N POP,ZTRTN,ZTDESC,ZTSAVE
"RTN","EASECPC",85,0)
 K IOP,%ZIS
"RTN","EASECPC",86,0)
 S %ZIS="MQ"
"RTN","EASECPC",87,0)
 W !
"RTN","EASECPC",88,0)
 D ^%ZIS I POP W !!,"Report Cancelled!" Q
"RTN","EASECPC",89,0)
 I $D(IO("Q")) D  Q
"RTN","EASECPC",90,0)
 .S ZTRTN="START^EASECPC1"
"RTN","EASECPC",91,0)
 .S ZTDESC="LTC Copay Calculation Report"
"RTN","EASECPC",92,0)
 .S (ZTSAVE("DFN"),ZTSAVE("DGMTI"),ZTSAVE("DGMTDT"),ZTSAVE("MAXRT"))=""
"RTN","EASECPC",93,0)
 .S (ZTSAVE("EASRPT"),ZTSAVE("EASRDT"))="",ZTSAVE("EASADM")=$G(EASADM)
"RTN","EASECPC",94,0)
 .D ^%ZTLOAD
"RTN","EASECPC",95,0)
 .W !!,"Report "_$S($D(ZTSK):"Queued!",1:"Cancelled!")
"RTN","EASECPC",96,0)
 .D HOME^%ZIS
"RTN","EASECPC",97,0)
 D START^EASECPC1,^%ZISC
"RTN","EASECPC",98,0)
 Q
"RTN","EASECPC1")
0^20^B77767454
"RTN","EASECPC1",1,0)
EASECPC1 ;ALB/LBD,CKN - LTC CoPayment Report continuation ; 6-FEB-2002
"RTN","EASECPC1",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**7,24,40**;Mar 15, 2001
"RTN","EASECPC1",3,0)
 ;
"RTN","EASECPC1",4,0)
 ; This routine is a continuation of EASECPC.
"RTN","EASECPC1",5,0)
 ;
"RTN","EASECPC1",6,0)
 ; Input:  DFN - Patient file IEN
"RTN","EASECPC1",7,0)
 ;         DGMTI - LTC Copay Test IEN (file #408.31)
"RTN","EASECPC1",8,0)
 ;         DGMTDT - LTC Copay Test Date
"RTN","EASECPC1",9,0)
 ;         MAXRT - Maximum daily copay rates for LTC (OP^IP)
"RTN","EASECPC1",10,0)
 ;         EASRPT - Report type:  1=Institutional (IP)
"RTN","EASECPC1",11,0)
 ;                                2=Non-Institutional (OP)
"RTN","EASECPC1",12,0)
 ;         EASRDT - Report start date
"RTN","EASECPC1",13,0)
 ;         EASADM - LTC admission date (only if EASRPT=1)
"RTN","EASECPC1",14,0)
 ;
"RTN","EASECPC1",15,0)
START ; Generate Report
"RTN","EASECPC1",16,0)
 N ARRY,IPRPT,DGSP,SRIC,LSEP,DECINF,AGRPAY,ERR
"RTN","EASECPC1",17,0)
 I $G(ZTSK) S ZTREQ="@"
"RTN","EASECPC1",18,0)
 D INIT(EASRDT,.ARRY)
"RTN","EASECPC1",19,0)
 D BLDTBL(.ARRY) Q:$G(ERR)
"RTN","EASECPC1",20,0)
 D PRINT
"RTN","EASECPC1",21,0)
 Q
"RTN","EASECPC1",22,0)
PRINT ; Print the Report
"RTN","EASECPC1",23,0)
 N CRT,PAGE,RPTDT,LINE,HDR,CALC1,CALC2,SIDX,EIDX,MNTH,NAME,SSN,DOB,LOS
"RTN","EASECPC1",24,0)
 D PRTVAR
"RTN","EASECPC1",25,0)
 U IO
"RTN","EASECPC1",26,0)
 D HEADER
"RTN","EASECPC1",27,0)
 W !,$S(DGSP:"MARRIED",LSEP:"LEGALLY SEPARATED",1:"SINGLE")
"RTN","EASECPC1",28,0)
 W:SRIC ?15,"SPOUSE RESIDING IN THE COMMUNITY"
"RTN","EASECPC1",29,0)
 I DECINF,AGRPAY W !,"*** DECLINED TO PROVIDE INCOME INFORMATION -- AGREED TO PAY COPAYMENTS ***"
"RTN","EASECPC1",30,0)
 I AGRPAY=0 W !,"*** VETERAN IS INELIGIBLE FOR LTC SERVICES -- REFUSED TO SIGN 10-10EC ***"
"RTN","EASECPC1",31,0)
 W !,"LTC COPAY TEST DATE: ",$$FMTE^XLFDT(DGMTDT)
"RTN","EASECPC1",32,0)
 W:$G(EASADM) ?47,"LTC ADMISSION DATE: ",$$FMTE^XLFDT(EASADM)
"RTN","EASECPC1",33,0)
 W !!!,"LTC COPAYMENT CALCULATION"_$S(IPRPT:"S:",1:":")
"RTN","EASECPC1",34,0)
 W ! W:IPRPT "FOR DAYS 1-180  " W CALC1
"RTN","EASECPC1",35,0)
 I IPRPT W !,"FOR DAYS 181+   " W CALC2
"RTN","EASECPC1",36,0)
 ;
"RTN","EASECPC1",37,0)
 S SIDX=1,EIDX=6
"RTN","EASECPC1",38,0)
 W !!,"              "
"RTN","EASECPC1",39,0)
 F MNTH=1:1:6 W $J($P(ARRY(MNTH),"^"),11)
"RTN","EASECPC1",40,0)
 I IPRPT D PRINTROW("TOT ASSETS    ",SIDX,EIDX,9)
"RTN","EASECPC1",41,0)
 D PRINTROW("TOT INCOME    ",SIDX,EIDX,3)
"RTN","EASECPC1",42,0)
 I 'IPRPT!($G(LOS)<181)!(DGSP&(SRIC)) D PRINTROW("TOT EXPENSES  ",SIDX,EIDX,4)
"RTN","EASECPC1",43,0)
 D PRINTROW("TOT ALLOWANCE ",SIDX,EIDX,5)
"RTN","EASECPC1",44,0)
 W ! D PRINTROW("CALC COPAY    ",SIDX,EIDX,6)
"RTN","EASECPC1",45,0)
 D PRINTROW("MAX COPAY     ",SIDX,EIDX,7)
"RTN","EASECPC1",46,0)
 W !,LINE
"RTN","EASECPC1",47,0)
 D PRINTROW("VET COPAY     ",SIDX,EIDX,8)
"RTN","EASECPC1",48,0)
 W !,LINE
"RTN","EASECPC1",49,0)
 ;
"RTN","EASECPC1",50,0)
 S SIDX=7,EIDX=12
"RTN","EASECPC1",51,0)
 W !!,"              "
"RTN","EASECPC1",52,0)
 F MNTH=7:1:12 W $J($P(ARRY(MNTH),"^"),11)
"RTN","EASECPC1",53,0)
 I IPRPT D PRINTROW("TOT ASSETS    ",SIDX,EIDX,9)
"RTN","EASECPC1",54,0)
 D PRINTROW("TOT INCOME    ",SIDX,EIDX,3)
"RTN","EASECPC1",55,0)
 I 'IPRPT!(DGSP&(SRIC)) D PRINTROW("TOT EXPENSES  ",SIDX,EIDX,4)
"RTN","EASECPC1",56,0)
 D PRINTROW("TOT ALLOWANCE ",SIDX,EIDX,5)
"RTN","EASECPC1",57,0)
 W ! D PRINTROW("CALC COPAY    ",SIDX,EIDX,6)
"RTN","EASECPC1",58,0)
 D PRINTROW("MAX COPAY     ",SIDX,EIDX,7)
"RTN","EASECPC1",59,0)
 W !,LINE
"RTN","EASECPC1",60,0)
 D PRINTROW("VET COPAY     ",SIDX,EIDX,8)
"RTN","EASECPC1",61,0)
 W !,LINE
"RTN","EASECPC1",62,0)
 ;
"RTN","EASECPC1",63,0)
 I CRT Q:$$PAUSE(0)
"RTN","EASECPC1",64,0)
 D:CRT HEADER
"RTN","EASECPC1",65,0)
 D NOTETXT
"RTN","EASECPC1",66,0)
 I CRT Q:$$PAUSE(0)
"RTN","EASECPC1",67,0)
 I IPRPT D HEADER,SPNDDWN I CRT Q:$$PAUSE(0)
"RTN","EASECPC1",68,0)
 Q
"RTN","EASECPC1",69,0)
PRINTROW(TEXT,SIDX,EIDX,NODE) ; Print the Rows
"RTN","EASECPC1",70,0)
 N MNTH
"RTN","EASECPC1",71,0)
 W !,TEXT
"RTN","EASECPC1",72,0)
 F MNTH=SIDX:1:EIDX W $J($S($P(ARRY(MNTH),"^",NODE)[".":$P($P(ARRY(MNTH),"^",NODE),"."),1:$P(ARRY(MNTH),"^",NODE)),11)
"RTN","EASECPC1",73,0)
 Q
"RTN","EASECPC1",74,0)
PRTVAR ; Set up variables needed to print report
"RTN","EASECPC1",75,0)
 N PAT0
"RTN","EASECPC1",76,0)
 S CRT=$S($E(IOST,1,2)="C-":1,1:0)
"RTN","EASECPC1",77,0)
 S PAGE=0,RPTDT=$$FMTE^XLFDT(DT)
"RTN","EASECPC1",78,0)
 S LINE="",$P(LINE,"-",81)=""
"RTN","EASECPC1",79,0)
 S HDR=$$CJ^XLFSTR("LONG TERM CARE ESTIMATED COPAYMENTS FOR "_$S('IPRPT:"NON-",1:"")_"INSTITUTIONAL SERVICES",80)
"RTN","EASECPC1",80,0)
 S PAT0=$G(^DPT(DFN,0)),NAME=$P(PAT0,"^"),DOB=$P(PAT0,"^",3)
"RTN","EASECPC1",81,0)
 S SSN=$P(PAT0,"^",9),SSN=$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,9)
"RTN","EASECPC1",82,0)
 S CALC1="TOTAL INCOME - TOTAL EXPENSES - TOTAL ALLOWANCE"
"RTN","EASECPC1",83,0)
 I DGSP,SRIC S CALC2="(TOTAL ASSETS + TOTAL INCOME) - TOTAL EXPENSES - TOTAL ALLOWANCE"
"RTN","EASECPC1",84,0)
 E  S CALC2="(TOTAL ASSETS + TOTAL INCOME) - TOTAL ALLOWANCE"
"RTN","EASECPC1",85,0)
 S:$G(EASADM) LOS=$$FMDIFF^XLFDT(EASRDT,EASADM)
"RTN","EASECPC1",86,0)
 Q
"RTN","EASECPC1",87,0)
HEADER ; Print the header
"RTN","EASECPC1",88,0)
 S PAGE=PAGE+1
"RTN","EASECPC1",89,0)
 W @IOF
"RTN","EASECPC1",90,0)
 W RPTDT,?71,"Page: ",$J(PAGE,3)
"RTN","EASECPC1",91,0)
 W !!,HDR
"RTN","EASECPC1",92,0)
 W !!,NAME,?35,SSN,?62,"DOB: ",$$FMTE^XLFDT(DOB)
"RTN","EASECPC1",93,0)
 Q
"RTN","EASECPC1",94,0)
PAUSE(RESP) ; Prompt user for next page or quit
"RTN","EASECPC1",95,0)
 N DIR,DIRUT,DUOUT,DTOUT,U,X,Y
"RTN","EASECPC1",96,0)
 S DIR(0)="E"
"RTN","EASECPC1",97,0)
 D ^DIR
"RTN","EASECPC1",98,0)
 I 'Y S RESP=1
"RTN","EASECPC1",99,0)
 Q RESP
"RTN","EASECPC1",100,0)
 ;
"RTN","EASECPC1",101,0)
INIT(DATE,ARRY) ; Initialize the Month/Year Table
"RTN","EASECPC1",102,0)
 N IDX,MNYR
"RTN","EASECPC1",103,0)
 S MNYR=$E(DATE,1,5)_"00"
"RTN","EASECPC1",104,0)
 F IDX=1:1:12 D
"RTN","EASECPC1",105,0)
 .S ARRY(IDX)=$$UP^XLFSTR($$FMTE^XLFDT(MNYR))
"RTN","EASECPC1",106,0)
 .S ARRY(IDX)=$P(ARRY(IDX)," ")_"'"_$E($P(ARRY(IDX)," ",2),3,4)
"RTN","EASECPC1",107,0)
 .S $P(ARRY(IDX),"^",2)=MNYR
"RTN","EASECPC1",108,0)
 .S MNYR=MNYR+100
"RTN","EASECPC1",109,0)
 .S:$E(MNYR,4,5)=13 MNYR=$E(MNYR,1,3)+1_"0100"
"RTN","EASECPC1",110,0)
 Q
"RTN","EASECPC1",111,0)
BLDTBL(ARRY) ; Get the veteran's financial data, do the copay calculations,
"RTN","EASECPC1",112,0)
 ; build the data table
"RTN","EASECPC1",113,0)
 ;
"RTN","EASECPC1",114,0)
 N DGDC,DGDEP,DGERR,DGFL,DGIN0,DGIN1,DGIN2,DGINI,DGIRI,DGDET,DGINT,DGNWT
"RTN","EASECPC1",115,0)
 N DGPRI,DGNC,DGND,DGNWTF,DGVINI,DGVIR0,DGVIRI,DGVPRI,DGINTF,CPYFLG,IDX
"RTN","EASECPC1",116,0)
 N OVR180,TAST,TINC,TEXP,ALLOW,CALCCPY,DAYS,MAXCPY,VETMAX,IPDR,OPDR,LOS
"RTN","EASECPC1",117,0)
 ;
"RTN","EASECPC1",118,0)
 S ERR=0
"RTN","EASECPC1",119,0)
 S DGPRI=$O(^DGPR(408.12,"C",DFN_";DPT(",0)) I 'DGPRI S ERR=1 Q
"RTN","EASECPC1",120,0)
 D GETIENS^EASECU2(DFN,DGPRI,DGMTDT) I '$G(DGIRI),'$G(DGINI) S ERR=1 Q
"RTN","EASECPC1",121,0)
 S DGVIRI=DGIRI,DGVINI=DGINI
"RTN","EASECPC1",122,0)
 D DEP^EASECSU3,INC^EASECSU3
"RTN","EASECPC1",123,0)
 S IPRPT=$S(EASRPT=1:1,1:0)
"RTN","EASECPC1",124,0)
 S CPYFLG=0
"RTN","EASECPC1",125,0)
 S DECINF=$P($G(^DGMT(408.31,DGMTI,0)),"^",14)
"RTN","EASECPC1",126,0)
 S AGRPAY=$P($G(^DGMT(408.31,DGMTI,0)),"^",11)
"RTN","EASECPC1",127,0)
 I DECINF=1!(AGRPAY=0) S CPYFLG=1
"RTN","EASECPC1",128,0)
 S SRIC=$P(DGVIR0,U,16),LSEP=$P(DGVIR0,U,17)
"RTN","EASECPC1",129,0)
 S OPDR=$P(MAXRT,U),IPDR=$P(MAXRT,U,2)
"RTN","EASECPC1",130,0)
 I IPRPT S LOS=$$FMDIFF^XLFDT(EASRDT,EASADM)+1
"RTN","EASECPC1",131,0)
 ;
"RTN","EASECPC1",132,0)
 S OVR180=$S($G(LOS)>180:1,1:0)
"RTN","EASECPC1",133,0)
 S TINC=DGINT/12,TEXP=DGDET/12
"RTN","EASECPC1",134,0)
 I OVR180,('DGSP!('SRIC)) S TEXP=0
"RTN","EASECPC1",135,0)
 S TAST=DGNWT I OVR180 S TAST=$$ASSET
"RTN","EASECPC1",136,0)
 ;
"RTN","EASECPC1",137,0)
 ; Build data table
"RTN","EASECPC1",138,0)
 F IDX=1:1:12 D
"RTN","EASECPC1",139,0)
 .S DAYS=$$DOM($P(ARRY(IDX),"^",2))
"RTN","EASECPC1",140,0)
 .D CALCALL
"RTN","EASECPC1",141,0)
 .S $P(ARRY(IDX),"^",3)=TINC
"RTN","EASECPC1",142,0)
 .S $P(ARRY(IDX),"^",4)=TEXP
"RTN","EASECPC1",143,0)
 .S $P(ARRY(IDX),"^",5)=ALLOW
"RTN","EASECPC1",144,0)
 .S $P(ARRY(IDX),"^",6)=CALCCPY
"RTN","EASECPC1",145,0)
 .S $P(ARRY(IDX),"^",7)=MAXCPY
"RTN","EASECPC1",146,0)
 .S $P(ARRY(IDX),"^",8)=VETMAX
"RTN","EASECPC1",147,0)
 .S $P(ARRY(IDX),"^",9)=$S(OVR180:TAST,1:"-")
"RTN","EASECPC1",148,0)
 .S:OVR180 TAST=$$ASTSPD
"RTN","EASECPC1",149,0)
 .I $G(LOS) D
"RTN","EASECPC1",150,0)
 ..S LOS=LOS+DAYS
"RTN","EASECPC1",151,0)
 ..S:'OVR180 OVR180=$S(LOS>180:1,1:0)
"RTN","EASECPC1",152,0)
 ..I OVR180,('DGSP!'(SRIC)) S:TEXP TEXP=0
"RTN","EASECPC1",153,0)
 Q
"RTN","EASECPC1",154,0)
 ;
"RTN","EASECPC1",155,0)
CALCALL ; Calculate the allowance and all the copayment amounts
"RTN","EASECPC1",156,0)
 S ALLOW=20*DAYS*(1+SRIC) S:CPYFLG ALLOW=0
"RTN","EASECPC1",157,0)
 S CALCCPY=$$CALCCPY
"RTN","EASECPC1",158,0)
 S MAXCPY=$$CALCMAX(DAYS)
"RTN","EASECPC1",159,0)
 S VETMAX=$$VETMAX(CALCCPY,MAXCPY)
"RTN","EASECPC1",160,0)
 Q
"RTN","EASECPC1",161,0)
ASSET() ; Initialize asset amount by applying spend-down
"RTN","EASECPC1",162,0)
 N NUM,MNYR,J,DONE,DAYS,ALLOW,CALCCPY,MAXCPY,VETMAX
"RTN","EASECPC1",163,0)
 S DONE=0
"RTN","EASECPC1",164,0)
 ; Calculate number of months to spend down the assets
"RTN","EASECPC1",165,0)
 S NUM=(LOS-180)\30
"RTN","EASECPC1",166,0)
 ; Get month to start spend down
"RTN","EASECPC1",167,0)
 S MNYR=$$FMADD^XLFDT(EASADM,180)
"RTN","EASECPC1",168,0)
 I NUM>0 F J=1:1:NUM D  Q:DONE
"RTN","EASECPC1",169,0)
 .S DAYS=$$DOM(MNYR)
"RTN","EASECPC1",170,0)
 .D CALCALL
"RTN","EASECPC1",171,0)
 .S TAST=$$ASTSPD I TAST=0 S DONE=1 Q
"RTN","EASECPC1",172,0)
 .S MNYR=MNYR+100 S:$E(MNYR,4,5)=13 MNYR=$E(MNYR,1,3)+1_"0100"
"RTN","EASECPC1",173,0)
 Q TAST
"RTN","EASECPC1",174,0)
ASTSPD() ;Asset Spend down for 180+ days
"RTN","EASECPC1",175,0)
 Q:CPYFLG TAST
"RTN","EASECPC1",176,0)
 I (TINC-TEXP-ALLOW)'>VETMAX D
"RTN","EASECPC1",177,0)
 . I DGSP,SRIC S TAST=TAST-(VETMAX-(TINC-TEXP-ALLOW))
"RTN","EASECPC1",178,0)
 . E  S TAST=TAST-(VETMAX-(TINC-ALLOW))
"RTN","EASECPC1",179,0)
 . S:TAST<0 TAST=0
"RTN","EASECPC1",180,0)
 Q TAST
"RTN","EASECPC1",181,0)
 ;
"RTN","EASECPC1",182,0)
CALCCPY() ; Calculate the Co-Pay Amount
"RTN","EASECPC1",183,0)
 ;
"RTN","EASECPC1",184,0)
 Q:CPYFLG 0
"RTN","EASECPC1",185,0)
 Q:OVR180 TAST+TINC-ALLOW-TEXP
"RTN","EASECPC1",186,0)
 Q TINC-ALLOW-TEXP
"RTN","EASECPC1",187,0)
DOM(MNYR) ; Days in Month
"RTN","EASECPC1",188,0)
 ; Returns: number of days in a month
"RTN","EASECPC1",189,0)
 N DAYS,MN,YR
"RTN","EASECPC1",190,0)
 S MN=+$E(MNYR,4,5)
"RTN","EASECPC1",191,0)
 I "^4^6^9^11^"[("^"_MN_"^") S DAYS=30 Q DAYS
"RTN","EASECPC1",192,0)
 I MN=2 D  Q DAYS
"RTN","EASECPC1",193,0)
 .S DAYS=28
"RTN","EASECPC1",194,0)
 .S YR=$E(MNYR,1,3)+1700
"RTN","EASECPC1",195,0)
 .S:YR#4=0 DAYS=29
"RTN","EASECPC1",196,0)
 S DAYS=31
"RTN","EASECPC1",197,0)
 Q DAYS
"RTN","EASECPC1",198,0)
CALCMAX(DAYS) ; Calculate the Maximum Co-Pay Amount
"RTN","EASECPC1",199,0)
 ;
"RTN","EASECPC1",200,0)
 Q $S(IPRPT:IPDR,1:OPDR)*DAYS
"RTN","EASECPC1",201,0)
VETMAX(CALCCPY,MAXCPY) ; Calculate the Veteran Maximum Co-Pay Amount
"RTN","EASECPC1",202,0)
 ;
"RTN","EASECPC1",203,0)
 Q:CPYFLG MAXCPY
"RTN","EASECPC1",204,0)
 Q:CALCCPY<0 0
"RTN","EASECPC1",205,0)
 Q:CALCCPY<MAXCPY CALCCPY
"RTN","EASECPC1",206,0)
 Q MAXCPY
"RTN","EASECPC1",207,0)
 ;
"RTN","EASECPC1",208,0)
NOTETXT ; Write the Note message
"RTN","EASECPC1",209,0)
 W !!,"IMPORTANT NOTICE: The copayment amounts shown in this report are"
"RTN","EASECPC1",210,0)
 W " estimates",!,"based on calculations of the copayment amount for "
"RTN","EASECPC1",211,0)
 W "an entire month. The",!,"copayment amounts will be adjusted to "
"RTN","EASECPC1",212,0)
 W "reflect the actual start date of LTC",!,"services and the "
"RTN","EASECPC1",213,0)
 W "copayment exemption for the first 21 days of service. The VET",!
"RTN","EASECPC1",214,0)
 W "COPAY amount is based on the assumption that the veteran "
"RTN","EASECPC1",215,0)
 W "will be responsible",!,"to pay the lesser of EITHER the calculated"
"RTN","EASECPC1",216,0)
 W " copayment (CALC COPAY) OR the",!,"maximum copayment (MAX COPAY).  "
"RTN","EASECPC1",217,0)
 W "In the event that the calculated copayment",!,"(CALC COPAY) is a "
"RTN","EASECPC1",218,0)
 W "negative figure, the veteran copayment (VET COPAY)",!
"RTN","EASECPC1",219,0)
 W "will be adjusted to zero (0). If the veteran declined to provide"
"RTN","EASECPC1",220,0)
 W " income",!,"information, the veteran will be obligated to pay the"
"RTN","EASECPC1",221,0)
 W " maximum copayment."
"RTN","EASECPC1",222,0)
 Q
"RTN","EASECPC1",223,0)
 ;
"RTN","EASECPC1",224,0)
SPNDDWN ; Text of message to explain the asset spend down
"RTN","EASECPC1",225,0)
 W !!,"EXPLANATION OF ASSET SPEND DOWN CALCULATION:"
"RTN","EASECPC1",226,0)
 W !,"============================================"
"RTN","EASECPC1",227,0)
 W !,"The veteran's assets are included in the calculation of copayments"
"RTN","EASECPC1",228,0)
 W !,"after 180 days of institutional LTC services.  The assets then may"
"RTN","EASECPC1",229,0)
 W !,"be reduced each month according to the following formula:"
"RTN","EASECPC1",230,0)
 W !
"RTN","EASECPC1",231,0)
 W !,"Single Veteran:"
"RTN","EASECPC1",232,0)
 W !
"RTN","EASECPC1",233,0)
 W !,"  TOTAL ASSETS-(VET COPAY-(INCOME-ALLOWANCE))"
"RTN","EASECPC1",234,0)
 W !
"RTN","EASECPC1",235,0)
 W !,"Married Veteran (spouse residing in the community):"
"RTN","EASECPC1",236,0)
 W !
"RTN","EASECPC1",237,0)
 W !,"  TOTAL ASSETS-(VET COPAY-(INCOME-EXPENSES-ALLOWANCE))"
"RTN","EASECPC1",238,0)
 W !
"RTN","EASECPC1",239,0)
 W !,"In other words, the assets will be reduced by the amount of the"
"RTN","EASECPC1",240,0)
 W !,"veteran's copayment that is not covered by the veteran's income "
"RTN","EASECPC1",241,0)
 W !,"after all expenses and allowances are subtracted.  If the amount"
"RTN","EASECPC1",242,0)
 W !,"of the veteran's income after all expenses and allowances are"
"RTN","EASECPC1",243,0)
 W !,"subtracted is greater than the veteran's copayment then the assets"
"RTN","EASECPC1",244,0)
 W !,"will not be reduced."
"RTN","EASECPC1",245,0)
 W !
"RTN","EASECPC1",246,0)
 Q
"RTN","EASECSC2")
0^3^B7316385
"RTN","EASECSC2",1,0)
EASECSC2 ;ALB/PHH,LBD - LTC Copay Test Screen Insurance Information ;18 AUG 2001
"RTN","EASECSC2",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,40**;Mar 15, 2001
"RTN","EASECSC2",3,0)
 ;
"RTN","EASECSC2",4,0)
 ; Input  -- DFN      Patient IEN
"RTN","EASECSC2",5,0)
 ;           DGMTACT  LTC Co-Pay Test Action
"RTN","EASECSC2",6,0)
 ;           DGVINI   Veteran Individual Annual Income IEN
"RTN","EASECSC2",7,0)
 ;           DGVIRI   Veteran Income Relation IEN
"RTN","EASECSC2",8,0)
 ;           DGVPRI   Veteran Patient Relation IEN
"RTN","EASECSC2",9,0)
 ; Output -- None
"RTN","EASECSC2",10,0)
 ;
"RTN","EASECSC2",11,0)
 ; ** For LTC Phase IV (EAS*1*40) this routine has been modified to
"RTN","EASECSC2",12,0)
 ;    display the patient's insurance information instead of 
"RTN","EASECSC2",13,0)
 ;    eligibility
"RTN","EASECSC2",14,0)
 ;
"RTN","EASECSC2",15,0)
EN ;Entry point
"RTN","EASECSC2",16,0)
 D ^DGRPV
"RTN","EASECSC2",17,0)
 D EASECRP5
"RTN","EASECSC2",18,0)
 S X="^3"
"RTN","EASECSC2",19,0)
 S:$$PAUSE(0) X="^"
"RTN","EASECSC2",20,0)
 K DGRP,DGRPCM,DGRPLAST,DGRPNA,DGRPS,DGRPSCE1,DGRPTYPE,DGRPU,DGRPV,DGRPVV,DGRPW,DGRPX,Z1
"RTN","EASECSC2",21,0)
 G EN1^EASECSCR
"RTN","EASECSC2",22,0)
 Q
"RTN","EASECSC2",23,0)
PAUSE(RESP) ; Prompt user for next page or quit
"RTN","EASECSC2",24,0)
 N DIR,DIRUT,DUOUT,DTOUT,I,X,Y
"RTN","EASECSC2",25,0)
 F I=$Y:1:20 W !
"RTN","EASECSC2",26,0)
 S DIR(0)="E"
"RTN","EASECSC2",27,0)
 D ^DIR
"RTN","EASECSC2",28,0)
 I 'Y S RESP=1
"RTN","EASECSC2",29,0)
 Q RESP
"RTN","EASECSC2",30,0)
 ;
"RTN","EASECSC2",31,0)
EASECRP5 ; Display the screen
"RTN","EASECSC2",32,0)
 ; Note: This section was copied from ^DGRP5 and modified specifically
"RTN","EASECSC2",33,0)
 ;       to work with LTC.
"RTN","EASECSC2",34,0)
 ;
"RTN","EASECSC2",35,0)
 S DGRPW=1,(DGRPS,DGMTSCI)=2 D HD^EASECSCU S Z=1 D WW W " Covered by Health Insurance: " S Z=$S($D(^DPT(DFN,.31)):$P(^(.31),"^",11),1:""),Z=$S(Z="Y":"YES",Z="N":"NO",Z="U":"UNKNOWN",1:"NOT ANSWERED"),Z1=15 D WW1^DGRPV
"RTN","EASECSC2",36,0)
 ; *REMOVEW !!?3 S Z=" Insurance",Z1=27 D WW1^DGRPV S Z="Policy #",Z1=22 D WW1^DGRPV S Z="Group #",Z1=19 D WW1^DGRPV W "Holder",!?4,"---------",?30,"--------",?52,"-------",?71,"-------"
"RTN","EASECSC2",37,0)
 ; *REMOVES I1="" F I=0:0 S I=$O(^DPT(DFN,.312,I)) Q:'I  S DGRPX=^(I,0) I $P(DGRPX,"^",4)']""!(+$P(DGRPX,"^",4)'<DT) S I1=1 
"RTN","EASECSC2",38,0)
 W ! D DISP^IBCNSP2
"RTN","EASECSC2",39,0)
 ;*REMOVEW:'I1 !?4,"NO ACTIVE (UNEXPIRED) INSURANCE ON FILE FOR THIS APPLICANT"
"RTN","EASECSC2",40,0)
 W ! S DGRPX=$G(^DPT(DFN,.38)),Z=2 D WW W " Eligible for MEDICAID: ",$S(+DGRPX:"YES",$P(DGRPX,"^",1)=0:"NO",1:DGRPU)
"RTN","EASECSC2",41,0)
 S Y=$P(DGRPX,"^",2) I Y X ^DD("DD") W "   [last updated ",Y,"]"
"RTN","EASECSC2",42,0)
 ;; *** Added for Medicaid information
"RTN","EASECSC2",43,0)
 W ! S Z=3 D WW W " Medicaid Number: ",$P(DGRPX,U,3) ;previous $S($P(DGRPX,U,3)>0:$P(DGRPX,U,3),1:"")
"RTN","EASECSC2",44,0)
 Q
"RTN","EASECSC2",45,0)
IN S J="*" F J(1)=9:1:14 I $P(DGRPX,"^",J(1))]"" S J=" "
"RTN","EASECSC2",46,0)
 S:J="*" DGRPAG="" W !?3,J,$S($D(^DIC(36,+$P(DGRPX,"^",1),0)):$E($P(^(0),"^",1),1,25),1:DGRPU),?30,$S($P(DGRPX,"^",2)]"":$P(DGRPX,"^",2),1:DGRPU),?52,$S($P(DGRPX,"^",3)]"":$P(DGRPX,"^",3),1:DGRPU)
"RTN","EASECSC2",47,0)
 W ?71,$S($P(DGRPX,"^",6)="v":"APPLICANT",$P(DGRPX,"^",6)="s":"SPOUSE",$P(DGRPX,"^",6)="o":"OTHER",1:"UNKNOWN") K J,X Q
"RTN","EASECSC2",48,0)
 ;
"RTN","EASECSC2",49,0)
WW ;Write number on screens for display and/or edit (Z=number)
"RTN","EASECSC2",50,0)
 ; NOTE: This section was copied from WW^DGRPV and modified specifically
"RTN","EASECSC2",51,0)
 ;       for LTC.  The code calling ^DGRPV has been redirected here.
"RTN","EASECSC2",52,0)
 W:DGRPW !
"RTN","EASECSC2",53,0)
 Q
"RTN","EASECSC4")
0^5^B11253228
"RTN","EASECSC4",1,0)
EASECSC4 ;ALB/PHH,LBD - LTC Co-Pay Test Screen Assets ;10 AUG 2001
"RTN","EASECSC4",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,40**;Mar 15, 2001
"RTN","EASECSC4",3,0)
 ;
"RTN","EASECSC4",4,0)
 ; Input  -- DFN      Patient IEN
"RTN","EASECSC4",5,0)
 ;           DGMTDT   Date of Test
"RTN","EASECSC4",6,0)
 ;           DGMTYPT  Type of Test 3=LTC Co-Pay
"RTN","EASECSC4",7,0)
 ;           DGMTPAR  Annual Test Parameter Array
"RTN","EASECSC4",8,0)
 ;           DGVINI   Veteran Individual Annual Income IEN
"RTN","EASECSC4",9,0)
 ;           DGVIRI   Veteran Income Relation IEN
"RTN","EASECSC4",10,0)
 ;           DGVPRI   Veteran Patient Relation IEN
"RTN","EASECSC4",11,0)
 ;           DGFORM   10-10EC Format (1=Revised; 0=Original)
"RTN","EASECSC4",12,0)
 ; Output -- None
"RTN","EASECSC4",13,0)
 ;
"RTN","EASECSC4",14,0)
EN ;Entry point for net worth screen
"RTN","EASECSC4",15,0)
 S DGMTSCI=4 D HD^EASECSCU
"RTN","EASECSC4",16,0)
 D DIS
"RTN","EASECSC4",17,0)
 S DGRNG=$S($G(DGFORM):"1-5",1:"1-6") G EN^EASECSCR
"RTN","EASECSC4",18,0)
 ;
"RTN","EASECSC4",19,0)
EN1 ;Entry point for read processor return
"RTN","EASECSC4",20,0)
 D ALL^EASECU21(DFN,"S",DGMTDT,"IPR",$S($G(DGMTI):DGMTI,1:""))
"RTN","EASECSC4",21,0)
 I DGX!($G(DGSELTY)["V") S DGPRI=DGVPRI,DGPRTY="V" D EDT
"RTN","EASECSC4",22,0)
 I '$G(DGMTOUT)&($G(DGSEL)["S")&(DGX!($G(DGSELTY)["S")) S DGPRI=+DGREL("S"),DGPRTY="S" D EDT
"RTN","EASECSC4",23,0)
Q K DGCNT,DGDEP,DGDR,DGMTOUT,DGPRI,DGPRTY,DGREL,DGSEL,DGSELTY,DGX,DGY,DTOUT,DUOUT,Y
"RTN","EASECSC4",24,0)
 G EN
"RTN","EASECSC4",25,0)
 ;
"RTN","EASECSC4",26,0)
DIS ;Display net worth
"RTN","EASECSC4",27,0)
 N DGCAT,DGDC,DGDET,DGIN0,DGIN1,DGIN2,DGINT,DGINTF,DGMTS,DGNC,DGND,DGNWT,DGNWTF,DGSP,DGTYC,DGTHA,DGTHB,DGVIR0,DGCNT
"RTN","EASECSC4",28,0)
 D DEP^EASECSU3,INC^EASECSU3 S DGCNT=1
"RTN","EASECSC4",29,0)
 ; Revised 10-10EC form uses separate columns for veteran and spouse
"RTN","EASECSC4",30,0)
 ; added for LTC Phase IV (EAS*1*40)
"RTN","EASECSC4",31,0)
 I $G(DGFORM) W !?39,"Veteran" W:DGSP ?56,"Spouse" W ?73,"Total"
"RTN","EASECSC4",32,0)
 E  W !?39,"Veteran" W:DGSP " and Spouse" W ?73,"Total"
"RTN","EASECSC4",33,0)
 W !?36,"------------------------------------------"
"RTN","EASECSC4",34,0)
 D HIGH^DGMTSCU1(1,DGMTACT),FLD(.DGIN2,6,"Residence")
"RTN","EASECSC4",35,0)
 D HIGH^DGMTSCU1(2,DGMTACT),FLD(.DGIN2,7,"Other Residences/Land/Farm/or Ranch")
"RTN","EASECSC4",36,0)
 D HIGH^DGMTSCU1(3,DGMTACT),FLD(.DGIN2,8,"Vehicle(s)")
"RTN","EASECSC4",37,0)
 ; Revised 10-10EC format, added for LTC IV (EAS*1*40)
"RTN","EASECSC4",38,0)
 I $G(DGFORM) D
"RTN","EASECSC4",39,0)
 .D HIGH^DGMTSCU1(4,DGMTACT),FLD(.DGIN2,1,"Cash, Stocks, Mutual Funds")
"RTN","EASECSC4",40,0)
 .D HIGH^DGMTSCU1(5,DGMTACT),FLD(.DGIN2,9,"Other Liquid Assets")
"RTN","EASECSC4",41,0)
 ; Original 10-10EC format
"RTN","EASECSC4",42,0)
 I '$G(DGFORM) D
"RTN","EASECSC4",43,0)
 .D HIGH^DGMTSCU1(4,DGMTACT),FLD(.DGIN2,1,"Cash")
"RTN","EASECSC4",44,0)
 .D HIGH^DGMTSCU1(5,DGMTACT),FLD(.DGIN2,2,"Stocks, Bonds, Mutual Funds, SEP's")
"RTN","EASECSC4",45,0)
 .D HIGH^DGMTSCU1(6,DGMTACT),FLD(.DGIN2,9,"Other Liquid Assets")
"RTN","EASECSC4",46,0)
 W !?56,"Total -->",?66,$J($$AMT^DGMTSCU1(DGNWT),12)
"RTN","EASECSC4",47,0)
DISQ Q
"RTN","EASECSC4",48,0)
 ;
"RTN","EASECSC4",49,0)
FLD(DGIN,DGPCE,DGTXT) ;Display income fields
"RTN","EASECSC4",50,0)
 ;
"RTN","EASECSC4",51,0)
 ;    Input -- DGIN as Individual Annual Income 0 node for vet,
"RTN","EASECSC4",52,0)
 ;                  spouse, and dependents
"RTN","EASECSC4",53,0)
 ;             DGRPCE as piece position wanted
"RTN","EASECSC4",54,0)
 ;             DGTXT as income description
"RTN","EASECSC4",55,0)
 ;
"RTN","EASECSC4",56,0)
 ;             Also keeps running total if DGGTOT is defined (grand
"RTN","EASECSC4",57,0)
 ;                  total)
"RTN","EASECSC4",58,0)
 ;
"RTN","EASECSC4",59,0)
 N DGTOT,I
"RTN","EASECSC4",60,0)
 I '$D(DGBL) S $P(DGBL," ",26)=""
"RTN","EASECSC4",61,0)
 W:DGCNT<10 " "
"RTN","EASECSC4",62,0)
 W " ",$E(DGTXT_DGBL,1,26)
"RTN","EASECSC4",63,0)
 W $J($$AMT^DGMTSCU1($P(DGIN("V"),"^",DGPCE)),15)
"RTN","EASECSC4",64,0)
 ; Display spouse amount if married (only applies to new 10-10EC form)
"RTN","EASECSC4",65,0)
 ; Added for LTC Phase IV (EAS*1*40)
"RTN","EASECSC4",66,0)
 W " ",$S($D(DGIN("S"))&($G(DGFORM)):$J($$AMT^DGMTSCU1($P(DGIN("S"),"^",DGPCE)),15),1:$E(DGBL,1,15))
"RTN","EASECSC4",67,0)
 W "  "
"RTN","EASECSC4",68,0)
 S DGTOT="",I="" F  S I=$O(DGIN(I)) Q:I=""  I $P(DGIN(I),"^",DGPCE)]"" S DGTOT=DGTOT+$P(DGIN(I),"^",DGPCE)
"RTN","EASECSC4",69,0)
 W "  ",$J($$AMT^DGMTSCU1(DGTOT),12)
"RTN","EASECSC4",70,0)
 S DGCNT=DGCNT+1
"RTN","EASECSC4",71,0)
 Q
"RTN","EASECSC4",72,0)
 ;
"RTN","EASECSC4",73,0)
EDT ;Edit net worth fields
"RTN","EASECSC4",74,0)
 N DA,DGERR,DGFIN,DGINI,DGIN2,DGIRI,DIE,DR
"RTN","EASECSC4",75,0)
 D GETIENS^EASECU2(DFN,DGPRI,DGMTDT) G EDTQ:DGERR
"RTN","EASECSC4",76,0)
 I $G(DGSEL)]"" W !!,"NAME: ",$$NAME^DGMTU1(DGPRI)
"RTN","EASECSC4",77,0)
 S DGIN2=$G(^DGMT(408.21,DGINI,2))
"RTN","EASECSC4",78,0)
 ; If this is the new 10-10EC form use the template [EASEC ENTER/EDIT
"RTN","EASECSC4",79,0)
 ; ASSETS NEW].  Added for LTC IV (EAS*1*40).
"RTN","EASECSC4",80,0)
 S DA=DGINI,DIE="^DGMT(408.21,",DR="[EASEC ENTER/EDIT ASSETS"_$S($G(DGFORM):" NEW]",1:"]")
"RTN","EASECSC4",81,0)
 D ^DIE S:'$D(DGFIN) DGMTOUT=1
"RTN","EASECSC4",82,0)
 I DGIN2'=$G(^DGMT(408.21,DGINI,2)) D
"RTN","EASECSC4",83,0)
 .S DR="103////^S X=DUZ;104///^S X=""NOW"""
"RTN","EASECSC4",84,0)
 .I '$G(^DGMT(408.21,DGINI,"MT")) S DR=DR_";31////^S X=$G(DGMTI)"
"RTN","EASECSC4",85,0)
 .D ^DIE
"RTN","EASECSC4",86,0)
EDTQ Q
"RTN","EASECSC5")
0^6^B14985478
"RTN","EASECSC5",1,0)
EASECSC5 ;ALB/PHH,LBD - LTC Co-Pay Test Screen Income ;13 AUG 2001
"RTN","EASECSC5",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,7,40**;Mar 15, 2001
"RTN","EASECSC5",3,0)
 ;
"RTN","EASECSC5",4,0)
 ; Input  -- DFN      Patient IEN
"RTN","EASECSC5",5,0)
 ;           DGMTDT   Date of Test
"RTN","EASECSC5",6,0)
 ;           DGVINI   Veteran Individual Annual Income IEN
"RTN","EASECSC5",7,0)
 ;           DGVIRI   Veteran Income Relation IEN
"RTN","EASECSC5",8,0)
 ;           DGVPRI   Veteran Patient Relation IEN
"RTN","EASECSC5",9,0)
 ;           DGMTI    LTC Co-Pay Test IEN
"RTN","EASECSC5",10,0)
 ;           DGFORM   10-10EC Format (1=Revised; 0=Original)
"RTN","EASECSC5",11,0)
 ; Output -- None
"RTN","EASECSC5",12,0)
 ;
"RTN","EASECSC5",13,0)
EN ;Entry point for calendar year income screen
"RTN","EASECSC5",14,0)
 S DGMTSCI=5 D HD^EASECSCU
"RTN","EASECSC5",15,0)
 D DIS
"RTN","EASECSC5",16,0)
 S DGRNG=$S($G(DGFORM):"1-3",1:"1-14") G EN^EASECSCR
"RTN","EASECSC5",17,0)
 ;
"RTN","EASECSC5",18,0)
EN1 ;Entry point for read processor return
"RTN","EASECSC5",19,0)
 D ALL^EASECU21(DFN,"S",DGMTDT,"IPR",$S($G(DGMTI):DGMTI,1:""))
"RTN","EASECSC5",20,0)
 I DGX!($G(DGSELTY)["V") S DGPRI=DGVPRI,DGPRTY="V" D EDT
"RTN","EASECSC5",21,0)
 I '$G(DGMTOUT)&($G(DGSEL)["S")&(DGX!($G(DGSELTY)["S")) S DGPRI=+DGREL("S"),DGPRTY="S" D EDT
"RTN","EASECSC5",22,0)
Q K DGCNT,DGDEP,DGDR,DGMTOUT,DGPRI,DGPRTY,DGREL,DGSEL,DGSELTY,DGX,DGY,DTOUT,DUOUT,Y
"RTN","EASECSC5",23,0)
 G EN
"RTN","EASECSC5",24,0)
 ;
"RTN","EASECSC5",25,0)
DIS ;Display income
"RTN","EASECSC5",26,0)
 N DGDC,DGDET,DGIN0,DGIN1,DGIN2,DGINT,DGINTF,DGNC,DGND,DGNWT,DGNWTF,DGSP,DGVIR0,DGCNT
"RTN","EASECSC5",27,0)
 D DEP^EASECSU3,INC^EASECSU3 S DGCNT=1
"RTN","EASECSC5",28,0)
 W !!?39,"Veteran" W:DGSP ?56,"Spouse" W ?73,"Total"
"RTN","EASECSC5",29,0)
 W !?36,"------------------------------------------"
"RTN","EASECSC5",30,0)
 ; Revised 10-10EC format, added for LTC IV (EAS*1*40)
"RTN","EASECSC5",31,0)
 I $G(DGFORM) D
"RTN","EASECSC5",32,0)
 .D HIGH^DGMTSCU1(1,DGMTACT),FLD(.DGIN0,14,"Current Employment Income")
"RTN","EASECSC5",33,0)
 .D HIGH^DGMTSCU1(2,DGMTACT),FLD(.DGIN0,15,"Income from Farm/Ranch/Business")
"RTN","EASECSC5",34,0)
 .D HIGH^DGMTSCU1(3,DGMTACT),FLD(.DGIN0,17,"All Other Income")
"RTN","EASECSC5",35,0)
 ; Original 10-10EC format
"RTN","EASECSC5",36,0)
 I '$G(DGFORM) D
"RTN","EASECSC5",37,0)
 .D HIGH^DGMTSCU1(1,DGMTACT),FLD(.DGIN0,14,"Current Income")
"RTN","EASECSC5",38,0)
 .D HIGH^DGMTSCU1(2,DGMTACT),FLD(.DGIN0,8,"Soc. Sec. Retire/Disabil")
"RTN","EASECSC5",39,0)
 .D HIGH^DGMTSCU1(3,DGMTACT),FLD(.DGIN0,15,"Interest/Dividends")
"RTN","EASECSC5",40,0)
 .D HIGH^DGMTSCU1(4,DGMTACT),FLD(.DGIN0,6,"Retirement/Pension Income")
"RTN","EASECSC5",41,0)
 .D HIGH^DGMTSCU1(5,DGMTACT),FLD(.DGIN0,9,"Civil Service Retirement")
"RTN","EASECSC5",42,0)
 .D HIGH^DGMTSCU1(6,DGMTACT),FLD(.DGIN0,10,"U.S. Railroad Retirement")
"RTN","EASECSC5",43,0)
 .D HIGH^DGMTSCU1(7,DGMTACT),FLD(.DGIN0,7,"VA Pension")
"RTN","EASECSC5",44,0)
 .D HIGH^DGMTSCU1(8,DGMTACT),FLD(.DGIN0,19,"Spouse VA Disabil/Compens")
"RTN","EASECSC5",45,0)
 .D HIGH^DGMTSCU1(9,DGMTACT),FLD(.DGIN0,12,"Unemployment Benefit/Comp")
"RTN","EASECSC5",46,0)
 .D HIGH^DGMTSCU1(10,DGMTACT),FLD(.DGIN0,16,"Other Compensation")
"RTN","EASECSC5",47,0)
 .D HIGH^DGMTSCU1(11,DGMTACT),FLD(.DGIN0,11,"Military Retirement")
"RTN","EASECSC5",48,0)
 .D HIGH^DGMTSCU1(12,DGMTACT),FLD(.DGIN0,13,"Other Retirement")
"RTN","EASECSC5",49,0)
 .D HIGH^DGMTSCU1(13,DGMTACT),FLD(.DGIN0,20,"Court Mandated")
"RTN","EASECSC5",50,0)
 .D HIGH^DGMTSCU1(14,DGMTACT),FLD(.DGIN0,17,"Other Income")
"RTN","EASECSC5",51,0)
 W !?56,"Total -->",?66,$J($$AMT^DGMTSCU1(DGINT),12)
"RTN","EASECSC5",52,0)
 Q
"RTN","EASECSC5",53,0)
 ;
"RTN","EASECSC5",54,0)
FLD(DGIN,DGPCE,DGTXT) ;Display income fields
"RTN","EASECSC5",55,0)
 ;
"RTN","EASECSC5",56,0)
 ;    Input -- DGIN as Individual Annual Income 0 node for vet,
"RTN","EASECSC5",57,0)
 ;                  spouse, and dependents
"RTN","EASECSC5",58,0)
 ;             DGPCE as piece position wanted
"RTN","EASECSC5",59,0)
 ;             DGTXT as income description
"RTN","EASECSC5",60,0)
 ;
"RTN","EASECSC5",61,0)
 ;             Also keeps running total if DGGTOT is defined (grand
"RTN","EASECSC5",62,0)
 ;                  total)
"RTN","EASECSC5",63,0)
 ;
"RTN","EASECSC5",64,0)
 N DGTOT,I,AMT
"RTN","EASECSC5",65,0)
 I '$D(DGBL) S $P(DGBL," ",26)=""
"RTN","EASECSC5",66,0)
 W:DGCNT<10 " "
"RTN","EASECSC5",67,0)
 W " ",$E(DGTXT_DGBL,1,26)
"RTN","EASECSC5",68,0)
 ; Display veteran amount
"RTN","EASECSC5",69,0)
 S AMT=$$AMT^DGMTSCU1($P(DGIN("V"),U,DGPCE))
"RTN","EASECSC5",70,0)
 ; No amount for Spouse VA Disability/Compensation
"RTN","EASECSC5",71,0)
 I DGPCE=19 S AMT="N/A"
"RTN","EASECSC5",72,0)
 ; No amount for VA Pension if Receiving VA Pension is not YES
"RTN","EASECSC5",73,0)
 I DGPCE=7,$P($G(^DPT(DFN,.362)),U,14)'="Y" S AMT="N/A"
"RTN","EASECSC5",74,0)
 W $J(AMT,15)
"RTN","EASECSC5",75,0)
 ; Display spouse amount (if married)
"RTN","EASECSC5",76,0)
 W " ",$S($D(DGIN("S")):$J($$AMT^DGMTSCU1($P(DGIN("S"),"^",DGPCE)),15),1:$E(DGBL,1,15))
"RTN","EASECSC5",77,0)
 W "  "
"RTN","EASECSC5",78,0)
 S DGTOT="",I="" F  S I=$O(DGIN(I)) Q:I=""  I $P(DGIN(I),"^",DGPCE)]"" S DGTOT=DGTOT+$P(DGIN(I),"^",DGPCE)
"RTN","EASECSC5",79,0)
 W "  ",$J($$AMT^DGMTSCU1(DGTOT),12)
"RTN","EASECSC5",80,0)
 S DGCNT=DGCNT+1
"RTN","EASECSC5",81,0)
 Q
"RTN","EASECSC5",82,0)
 ;
"RTN","EASECSC5",83,0)
EDT ;Edit income fields
"RTN","EASECSC5",84,0)
 N DA,DGERR,DGFIN,DGINI,DGIN0,DGIRI,DIE,DR
"RTN","EASECSC5",85,0)
 D GETIENS^EASECU2(DFN,DGPRI,DGMTDT) G EDTQ:DGERR
"RTN","EASECSC5",86,0)
 I $G(DGSEL)]"" W !!,"NAME: ",$$NAME^DGMTU1(DGPRI)
"RTN","EASECSC5",87,0)
 S DGIN0=$G(^DGMT(408.21,DGINI,0))
"RTN","EASECSC5",88,0)
 ; If this is the new 10-10EC form use the template [EASEC ENTER/EDIT
"RTN","EASECSC5",89,0)
 ; INCOME NEW].  Added for LTC IV (EAS*1*40).
"RTN","EASECSC5",90,0)
 S DA=DGINI,DIE="^DGMT(408.21,",DR="[EASEC ENTER/EDIT INCOME"_$S($G(DGFORM):" NEW]",1:"]")
"RTN","EASECSC5",91,0)
 D ^DIE S:'$D(DGFIN) DGMTOUT=1
"RTN","EASECSC5",92,0)
 I DGIN0'=$G(^DGMT(408.21,DGINI,0)) D
"RTN","EASECSC5",93,0)
 .S DR="103////^S X=DUZ;104///^S X=""NOW"""
"RTN","EASECSC5",94,0)
 .I '$G(^DGMT(408.21,DGINI,"MT")) S DR=DR_";31////^S X=$G(DGMTI)"
"RTN","EASECSC5",95,0)
 .D ^DIE
"RTN","EASECSC5",96,0)
EDTQ Q
"RTN","EASECSCC")
0^10^B35526778
"RTN","EASECSCC",1,0)
EASECSCC ;ALB/LBD - LTC Co-Pay Test Screen Completion;13 AUG 2001 ; 3/20/03 2:24pm
"RTN","EASECSCC",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,7,34,40**;Mar 15, 2001
"RTN","EASECSCC",3,0)
 ;
"RTN","EASECSCC",4,0)
 ;NOTE: This routine was modified from DGMTSCC for LTC Co-pay
"RTN","EASECSCC",5,0)
 ; Input  -- DFN      Patient IEN
"RTN","EASECSCC",6,0)
 ;           DGMTACT  Menu Action
"RTN","EASECSCC",7,0)
 ;           DGMTDT   Date of Test
"RTN","EASECSCC",8,0)
 ;           DGMTYPT  Type of Test 3=LTC COPAY
"RTN","EASECSCC",9,0)
 ;           DGMTPAR  Annual Means Test Parameters
"RTN","EASECSCC",10,0)
 ;           DGMTI    Annual Means Test IEN
"RTN","EASECSCC",11,0)
 ;           DGVINI   Veteran Individual Annual Income IEN
"RTN","EASECSCC",12,0)
 ;           DGVIRI   Veteran Income Relation IEN
"RTN","EASECSCC",13,0)
 ;           DGVPRI   Veteran Patient Relation IEN
"RTN","EASECSCC",14,0)
 ; Output -- DGERR    1=INCOMPLETE and 0=COMPLETE
"RTN","EASECSCC",15,0)
 ;
"RTN","EASECSCC",16,0)
EN N DGCAT,DGCOMF,DGDC,DGDET,DGIN0,DGIN1,DGIN2,DGINT,DGINTF,DGMTS,DGNC,DGND,DGNWT,DGNWTF,DGREF1,DGSP,DGTYC,DGTHA,DGTHB,DGVIR0,DGCOPS,DGCOST,DGRE,DGSTA,DGAGR
"RTN","EASECSCC",17,0)
 S DGERR=0
"RTN","EASECSCC",18,0)
 S DGCOMF=1 D DEP^EASECSU3,INC^EASECSU3
"RTN","EASECSCC",19,0)
 ; If veteran's income is below the threshold then exempt from LTC copay
"RTN","EASECSCC",20,0)
 ;   LTC III (EAS*1*34)  modified to make vet with $0 income exempt 
"RTN","EASECSCC",21,0)
 I DGINT'>+$$THRES^IBARXEU1(DGMTDT,1,0) D  G Q
"RTN","EASECSCC",22,0)
 .D EXMPT(DFN,DGMTI,12)
"RTN","EASECSCC",23,0)
 .D PRT
"RTN","EASECSCC",24,0)
 ; Check if test can be completed
"RTN","EASECSCC",25,0)
 D CHK I DGERR W !?3,*7,"LTC copay test cannot be completed." G Q
"RTN","EASECSCC",26,0)
 ; Did vet refuse to give income info
"RTN","EASECSCC",27,0)
 I 'DGINTF,'DGNWTF S DGREF1="" D  G Q:$D(DTOUT)!($D(DUOUT))
"RTN","EASECSCC",28,0)
 .D REF
"RTN","EASECSCC",29,0)
 .I $D(DGREF) S DGSTA="NON-EXEMPT"
"RTN","EASECSCC",30,0)
 ; Get test status (Exempt or Non-Exempt)
"RTN","EASECSCC",31,0)
 D STA G Q:$D(DTOUT)!($D(DUOUT))
"RTN","EASECSCC",32,0)
 ; Does vet agree to pay co-payments
"RTN","EASECSCC",33,0)
 I $G(DGSTA)="NON-EXEMPT" D AGREE G Q:$D(DTOUT)!($D(DUOUT))
"RTN","EASECSCC",34,0)
UPD S DA=DGMTI,DIE="^DGMT(408.31,",DIE("NO^")="",DR="[EASEC COMPLETE LTC CO-PAY TEST]" D ^DIE K DA,DIE,DR I '$D(DGFIN) S DGERR=1 G Q
"RTN","EASECSCC",35,0)
 W !?3,"...The LTC copay test has been completed with a status of ",DGSTA,"..."
"RTN","EASECSCC",36,0)
 D PRT
"RTN","EASECSCC",37,0)
 ;
"RTN","EASECSCC",38,0)
Q K DGFIN,DGREF,DTOUT,DUOUT,Y
"RTN","EASECSCC",39,0)
 Q
"RTN","EASECSCC",40,0)
 ;
"RTN","EASECSCC",41,0)
COM ;Check if user wants to complete the LTC co-pay test
"RTN","EASECSCC",42,0)
 N DIR
"RTN","EASECSCC",43,0)
 S DIR("A")="Do you wish to complete the LTC copay test"
"RTN","EASECSCC",44,0)
 S DIR("B")="YES",DIR(0)="Y" D ^DIR
"RTN","EASECSCC",45,0)
 Q
"RTN","EASECSCC",46,0)
 ;
"RTN","EASECSCC",47,0)
REF ;Check if patient declines to provide income information
"RTN","EASECSCC",48,0)
 N DIR,Y
"RTN","EASECSCC",49,0)
 S DIR("A")="Does veteran decline to give income information"
"RTN","EASECSCC",50,0)
 I $P($G(^DGMT(408.31,DGMTI,0)),"^",14)]"" S DIR("B")=$$YN^DGMTSCU1($P(^(0),"^",14))
"RTN","EASECSCC",51,0)
 S:'$D(DIR("B")) DIR("B")="NO"
"RTN","EASECSCC",52,0)
 S DIR("?")="Answer 'Y' or 'N'."
"RTN","EASECSCC",53,0)
 S DIR("?",1)="Enter whether the veteran declines to provide current income information."
"RTN","EASECSCC",54,0)
 S DIR(0)="Y" D ^DIR K DIR G REFQ:$D(DTOUT)!($D(DUOUT))
"RTN","EASECSCC",55,0)
 S:Y DGREF=""
"RTN","EASECSCC",56,0)
REFQ Q
"RTN","EASECSCC",57,0)
 ;
"RTN","EASECSCC",58,0)
CHK ;Check if LTC copay test can be completed
"RTN","EASECSCC",59,0)
 ;   For LTC III (EAS*1*34) removed check if expenses greater than income
"RTN","EASECSCC",60,0)
 N DGA,DGD,DGDEP,DGREL,DGL,DGM,I
"RTN","EASECSCC",61,0)
 D GETREL^DGMTU11(DFN,"CS",$E(DGMTDT,1,3)_"0000",$S($G(DGMTI):DGMTI,1:""))
"RTN","EASECSCC",62,0)
 S DGM=$P(DGVIR0,"^",14),DGL=$P(DGVIR0,"^",17),DGD=$P(DGVIR0,"^",8)
"RTN","EASECSCC",63,0)
 I DGM="" W !?3,"Marital section must be completed." S DGERR=1
"RTN","EASECSCC",64,0)
 ;  For LTC IV (EAS*1*40) added check for legally separated
"RTN","EASECSCC",65,0)
 I DGM,'DGL,'$D(DGREL("S")) W !?3,"Married is 'YES'.  An active spouse for this LTC copay test does not exist." S DGERR=1
"RTN","EASECSCC",66,0)
 I 'DGM,$D(DGREL("S")) W !?3,"An active spouse exists for this LTC copay test. Married should be 'YES'." S DGERR=1
"RTN","EASECSCC",67,0)
 I DGD']"" W !?3,"Dependent Children section must be completed." S DGERR=1
"RTN","EASECSCC",68,0)
 I DGD,'$D(DGREL("C")) W !?3,"Dependent Children is 'YES'.  No active children exist." S DGERR=1
"RTN","EASECSCC",69,0)
 I 'DGD,$D(DGREL("C")) W !?3,"Active children exist.  Dependent Children should be 'YES'." S DGERR=1
"RTN","EASECSCC",70,0)
 Q:$G(DGERR)
"RTN","EASECSCC",71,0)
 N CNT,ACT,DGDEP,FLAG,DGINCP
"RTN","EASECSCC",72,0)
 D INIT^EASECDEP S CNT=0 D
"RTN","EASECSCC",73,0)
 .F  S CNT=$O(DGDEP(CNT)) Q:'CNT  I $P(DGDEP(CNT),U,2)="SPOUSE" D  Q:$G(DGERR)
"RTN","EASECSCC",74,0)
 ..D GETIENS^EASECU2(DFN,$P(DGDEP(CNT),U,20),DGMTDT)
"RTN","EASECSCC",75,0)
 ..S DGINCP=$G(^DGMT(408.22,+DGIRI,"MT")) S:DGINCP FLAG=$G(FLAG)+1
"RTN","EASECSCC",76,0)
 ..I $G(FLAG)>1 W !?3,"Patient has more than one spouse for this LTC copay test." S DGERR=1
"RTN","EASECSCC",77,0)
 Q
"RTN","EASECSCC",78,0)
 ;
"RTN","EASECSCC",79,0)
STA ;Ask test status
"RTN","EASECSCC",80,0)
 N DIR,Y,SCRN
"RTN","EASECSCC",81,0)
 S DGMTS=$P($G(^DGMT(408.31,DGMTI,0)),U,3)
"RTN","EASECSCC",82,0)
 S DGRE=$P($G(^DGMT(408.31,DGMTI,2)),U,7)
"RTN","EASECSCC",83,0)
 I DGMTS S DGSTA=$P($G(^DG(408.32,DGMTS,0)),U)
"RTN","EASECSCC",84,0)
 I '$D(DGSTA) S DGSTA="NON-EXEMPT"
"RTN","EASECSCC",85,0)
 I DGSTA="EXEMPT",("12"[DGRE),$G(DGINT)>+$$THRES^IBARXEU1(DGMTDT,1,0) S DGSTA="NON-EXEMPT"
"RTN","EASECSCC",86,0)
 I DGSTA="EXEMPT",$G(DGNSTA)="NON-EXEMPT" S DGSTA="NON-EXEMPT"
"RTN","EASECSCC",87,0)
 S DIR("A")="LTC Copay Test Status" S DIR("B")=DGSTA
"RTN","EASECSCC",88,0)
 S DIR(0)="P^408.32:EM",DIR("S")="I $P(^(0),U,19)=3"
"RTN","EASECSCC",89,0)
 D ^DIR K DIR Q:'Y!($D(DTOUT))!($D(DUOUT))
"RTN","EASECSCC",90,0)
 S DGMTS=+Y,DGSTA=$P(Y,U,2) Q:DGSTA="NON-EXEMPT"
"RTN","EASECSCC",91,0)
 ;If Exempt, ask reason for exemption
"RTN","EASECSCC",92,0)
 S DIR("A")="Reason for Exemption"
"RTN","EASECSCC",93,0)
 I DGRE S DIR("B")=$P($G(^EAS(714.1,DGRE,0)),U)
"RTN","EASECSCC",94,0)
 ; Screen the look-up on file #714.1.  Exemption reasons 1, 2 and 12
"RTN","EASECSCC",95,0)
 ; will be screened out unless this is the call from the Edit option
"RTN","EASECSCC",96,0)
 ; (DGEFLG=1) and only reason 1 is screened out.
"RTN","EASECSCC",97,0)
 S SCRN="2^12^" S:$G(DGEFLG) SCRN=""
"RTN","EASECSCC",98,0)
 S DIR("S")="I $P(^(0),U,2),""^1^"_SCRN_"""'[(U_Y_U)"
"RTN","EASECSCC",99,0)
 S DIR(0)="P^714.1:EM" D ^DIR K DIR I 'Y!($D(DTOUT))!($D(DUOUT)) D  G STA
"RTN","EASECSCC",100,0)
 .W !!,"A reason for exemption must be entered for an Exempt status.",!
"RTN","EASECSCC",101,0)
 S DGRE=+Y
"RTN","EASECSCC",102,0)
 Q
"RTN","EASECSCC",103,0)
AGREE ;Ask if vet agrees to pay co-payment
"RTN","EASECSCC",104,0)
 N DIR,Y
"RTN","EASECSCC",105,0)
 S DIR("A")="Does the veteran agree to pay copayments"
"RTN","EASECSCC",106,0)
 I $P($G(^DGMT(408.31,DGMTI,0)),U,11)]"" S DIR("B")=$$YN^DGMTSCU1($P(^(0),U,11))
"RTN","EASECSCC",107,0)
 S:'$D(DIR("B")) DIR("B")="YES"
"RTN","EASECSCC",108,0)
 S DIR("?")="Answer 'Y' or 'N'."
"RTN","EASECSCC",109,0)
 S DIR("?",1)="Enter in this field whether the veteran agrees to pay the"
"RTN","EASECSCC",110,0)
 S DIR("?",2)="LTC copayments.  The veteran must also sign the 1010-EC form"
"RTN","EASECSCC",111,0)
 S DIR("?",3)="agreeing to pay the copayments. If the veteran does not agree"
"RTN","EASECSCC",112,0)
 S DIR("?",4)="to pay the copayments, the veteran becomes ineligible to"
"RTN","EASECSCC",113,0)
 S DIR("?",5)="receive extended care services."
"RTN","EASECSCC",114,0)
 S DIR(0)="Y" D ^DIR K DIR Q:$D(DTOUT)!($D(DUOUT))
"RTN","EASECSCC",115,0)
 S DGAGR=Y
"RTN","EASECSCC",116,0)
 Q
"RTN","EASECSCC",117,0)
PRT ;Print Extended Care Services test (1010EC)
"RTN","EASECSCC",118,0)
 N DIR,Y,X,ZTSK
"RTN","EASECSCC",119,0)
 S DIR("A")="PRINT 10-10EC"
"RTN","EASECSCC",120,0)
 S DIR("B")="YES",DIR(0)="Y" D ^DIR G PRTQ:'Y!($D(DTOUT))!($D(DUOUT))
"RTN","EASECSCC",121,0)
 S ZTSK=$$QUE^EASEC10E(DFN,DGMTI)
"RTN","EASECSCC",122,0)
PRTQ Q
"RTN","EASECSCC",123,0)
 ;
"RTN","EASECSCC",124,0)
EXMPT(DFN,DGMTI,EX) ; Veteran is exempt from LTC co-payments
"RTN","EASECSCC",125,0)
 ; Complete LTC co-pay test in Annual Means Test file (#408.31)
"RTN","EASECSCC",126,0)
 ; Input -- DFN     Patient IEN
"RTN","EASECSCC",127,0)
 ;          DGMTI   Annual Means Test IEN
"RTN","EASECSCC",128,0)
 ;          EX      Copay exemption code
"RTN","EASECSCC",129,0)
 ;                  1 = SC compensable disability
"RTN","EASECSCC",130,0)
 ;                  2 = NSC, single, receiving VA pension (no A&A, HB)
"RTN","EASECSCC",131,0)
 ;                         or
"RTN","EASECSCC",132,0)
 ;                      Income (last year) is below single pension threshold
"RTN","EASECSCC",133,0)
 ;                 12 = Income (current year) is below single pension threshold 
"RTN","EASECSCC",134,0)
 Q:'DGMTI  Q:'EX
"RTN","EASECSCC",135,0)
 N DATA,I
"RTN","EASECSCC",136,0)
 W !! F I=1:1:80 W "="
"RTN","EASECSCC",137,0)
 W !!,?10,"Veteran is EXEMPT from Long Term Care copayments."
"RTN","EASECSCC",138,0)
 W !,?10,"Reason for Exemption: ",$P($G(^EAS(714.1,EX,0)),U)
"RTN","EASECSCC",139,0)
 W !! F I=1:1:80 W "="
"RTN","EASECSCC",140,0)
 W !!
"RTN","EASECSCC",141,0)
 S DATA(.03)=$O(^DG(408.32,"C","X","")),DATA(2.07)=EX,DATA(.06)=DUZ
"RTN","EASECSCC",142,0)
 S (DATA(.07),DATA(2.02))=$$NOW^XLFDT
"RTN","EASECSCC",143,0)
 S DATA(.04)=$G(DGINT),DATA(.05)=$G(DGNWT),DATA(.15)=$G(DGDET)
"RTN","EASECSCC",144,0)
 S DATA(.18)=$G(DGND),DATA(2.08)=$P($$GETLTC4^EASECMT(DFN),U,1)
"RTN","EASECSCC",145,0)
 S DATA(.14)=$S($D(DGREF):1,1:0)     ;LTC III (EAS*1*34)
"RTN","EASECSCC",146,0)
 I $$UPD^DGENDBS(408.31,DGMTI,.DATA) Q
"RTN","EASECSCC",147,0)
 W !,"ERROR:  COULD NOT UPDATE LTC COPAY TEST",!!
"RTN","EASECSCC",148,0)
 Q
"RTN","EASECSCR")
0^17^B14618078
"RTN","EASECSCR",1,0)
EASECSCR ;ALB/LBD - LTC Co-Pay Test Screen Read Processor;10 AUG 2001
"RTN","EASECSCR",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,40**;Mar 15, 2001
"RTN","EASECSCR",3,0)
 ;
"RTN","EASECSCR",4,0)
 ;NOTE: This routine was modified from DGMTSCR for LTC Co-pay
"RTN","EASECSCR",5,0)
 ; Input  -- DGRNG    Range of selectable items
"RTN","EASECSCR",6,0)
 ;           DGMTACT  Means Test Action
"RTN","EASECSCR",7,0)
 ;           DGMTSC   Screen Driver Array
"RTN","EASECSCR",8,0)
 ;           DGMTSCI  Screen number
"RTN","EASECSCR",9,0)
 ;           DGVINI   Veteran Individual Annual Income IEN
"RTN","EASECSCR",10,0)
 ;           DGVIRI   Veteran Income Relation IEN
"RTN","EASECSCR",11,0)
 ; Output -- DGDR     Template tags  (ie, 101,102,103,104)
"RTN","EASECSCR",12,0)
 ;           DGX      User input - maybe modified (ie, 1-4) 
"RTN","EASECSCR",13,0)
 ;           DGY      Items selected in expanded form  (ie, 1,2,3,4)
"RTN","EASECSCR",14,0)
 ;    Returned for screen 2 and 4:
"RTN","EASECSCR",15,0)
 ;           DGSEL    Column selections available  (ie, V, S, C)
"RTN","EASECSCR",16,0)
 ;           DGSELTY  User input - column selected  (ie, V or S or C)
"RTN","EASECSCR",17,0)
 ;
"RTN","EASECSCR",18,0)
EN K DGDR,DGSEL,DGSELTY,DGX,DGY,I D FEED
"RTN","EASECSCR",19,0)
 I $G(DGSCR1) S X="" G EN1
"RTN","EASECSCR",20,0)
 W !,DGVI,"<RET>",DGVO," to CONTINUE," W:DGMTACT'="VEW" " ",DGVI,DGRNG,DGVO," or ",DGVI,"'ALL' ",DGVO,"to EDIT," W DGVI," ^N",DGVO," for screen N, or ",DGVI,"'^'",DGVO," to EXIT: " R X:DTIME S:'$T X="^"
"RTN","EASECSCR",21,0)
EN1 K DGSCR1 S DGX=$$UPPER^DGUTL(X)
"RTN","EASECSCR",22,0)
 I DGX="^" G Q^EASECSC
"RTN","EASECSCR",23,0)
 I DGX?1"^".N,$D(DGMTSC(+$P(DGX,"^",2))) G @($$ROU^EASECSCU(+$P(DGX,"^",2)))
"RTN","EASECSCR",24,0)
 ; Modified next line to allow entry of assets for spouse (only for new
"RTN","EASECSCR",25,0)
 ; 10-10EC form).  Added for LTC Phase IV (EAS*1*40)
"RTN","EASECSCR",26,0)
 I DGMTACT'="VEW",(DGMTSCI=5!($G(DGFORM)&(DGMTSCI=4))) D SEL I DGSEL[$E(DGX),$E(DGX,2)?1N S DGSELTY=$E(DGX),DGX=$P(DGX,DGSELTY,2)
"RTN","EASECSCR",27,0)
 I DGMTACT'="VEW",$E(DGX)="A" S X=DGX,Z="^ALL" D IN^DGHELP S:%'=-1 DGX=DGRNG
"RTN","EASECSCR",28,0)
 I DGX["?" D HLP G Q^EASECSC:$D(DTOUT)!($D(DUOUT)),@($$ROU^EASECSCU(DGMTSCI))
"RTN","EASECSCR",29,0)
 I DGX="",$O(DGMTSC(DGMTSCI)) G @($$ROU^EASECSCU($O(DGMTSC(DGMTSCI))))
"RTN","EASECSCR",30,0)
 I DGX="" G Q^EASECSC
"RTN","EASECSCR",31,0)
 I DGMTACT'="VEW" D PRO I $D(DGSELTY) S DGX=DGSELTY_DGX
"RTN","EASECSCR",32,0)
 S:DGMTACT="VEW" DGERR=1 I DGERR D HLP G @($$ROU^EASECSCU(DGMTSCI))
"RTN","EASECSCR",33,0)
Q G @($$ROURET^EASECSCU(DGMTSCI))
"RTN","EASECSCR",34,0)
 ;
"RTN","EASECSCR",35,0)
FEED ;Line feed to the bottom of the screen
"RTN","EASECSCR",36,0)
 N DGB,I
"RTN","EASECSCR",37,0)
 S DGB=$S('IOSL:24,1:IOSL)-5 F I=$Y:1:DGB W !
"RTN","EASECSCR",38,0)
 Q
"RTN","EASECSCR",39,0)
 ;
"RTN","EASECSCR",40,0)
SEL ;Check available column selections for Veteran, Spouse or Children
"RTN","EASECSCR",41,0)
 N DGDC,DGNC,DGND,DGSP,DGVIR0,DGX
"RTN","EASECSCR",42,0)
 D DEP^EASECSU3
"RTN","EASECSCR",43,0)
 S DGSEL="V"_$S(DGSP:"S",1:"")
"RTN","EASECSCR",44,0)
SELQ Q
"RTN","EASECSCR",45,0)
 ;
"RTN","EASECSCR",46,0)
HLP ;Help display
"RTN","EASECSCR",47,0)
 N DGIOM,DGLNE,DGMTSCR,DIR,I,X
"RTN","EASECSCR",48,0)
 S DGHLPF=1 D HD^EASECSCU
"RTN","EASECSCR",49,0)
 W !!,"Enter <RET> to continue to the next available screen."
"RTN","EASECSCR",50,0)
 I DGMTACT'="VEW" W !,"Enter an available item number from ",DGRNG," to edit.",!,"The items should be separated by commas or a range of numbers",!,"separated by a dash, or a combination of commas and dashes."
"RTN","EASECSCR",51,0)
 ;Modified next line to add screen 4 for LTC Phase IV (EAS*1*40)
"RTN","EASECSCR",52,0)
 I DGMTACT'="VEW","^4^5^"[(U_DGMTSCI_U),$D(DGSEL) W !,"To edit a specific column, enter 'V'",$S(DGSEL["S":", 'S'",1:"")," in front of the selected items."
"RTN","EASECSCR",53,0)
 I DGMTACT'="VEW" W !,"Enter 'ALL' to edit all available items on the screen."
"RTN","EASECSCR",54,0)
 W !,"Enter '^N' to jump to a select screen.  Enter '^' to exit."
"RTN","EASECSCR",55,0)
 W !!,"AVAILABLE SCREENS"
"RTN","EASECSCR",56,0)
 S I=0 F  S I=$O(DGMTSC(I)) Q:'I  W !,"[",+$$SCR^EASECSCU(I),"]  ",$P($$SCR^EASECSCU(I),";",2)
"RTN","EASECSCR",57,0)
 S DGLNE="",DGIOM=$S('IOM:80,1:IOM),$P(DGLNE,"=",(DGIOM-1))=""
"RTN","EASECSCR",58,0)
 W !,DGLNE S DIR(0)="E" D ^DIR
"RTN","EASECSCR",59,0)
 Q
"RTN","EASECSCR",60,0)
 ;
"RTN","EASECSCR",61,0)
PRO ;Process user selection; cnt - dash - parse - selection
"RTN","EASECSCR",62,0)
 N DGC,DGD,DGP,DGS
"RTN","EASECSCR",63,0)
 S DGC=0,DGERR=0,DGY="",DGDR=""
"RTN","EASECSCR",64,0)
PARSE S DGC=DGC+1,DGP=$P(DGX,",",DGC) G PROQ:DGP=""
"RTN","EASECSCR",65,0)
 I DGP?.N1"-".N S DGD="" F DGS=$P(DGP,"-"):1:$P(DGP,"-",2) D CHK Q:DGERR
"RTN","EASECSCR",66,0)
 I '$D(DGD) S DGS=DGP D CHK
"RTN","EASECSCR",67,0)
 K DGD G PROQ:DGERR,PARSE
"RTN","EASECSCR",68,0)
PROQ Q
"RTN","EASECSCR",69,0)
 ;
"RTN","EASECSCR",70,0)
CHK I $D(DGD),+$P(DGP,"-",2)<+$P(DGP,"-",1) S DGERR=1
"RTN","EASECSCR",71,0)
 I 'DGERR,DGS'?.N S DGERR=1
"RTN","EASECSCR",72,0)
 I 'DGERR&(DGS>$P(DGRNG,"-",2)!(DGS<$P(DGRNG,"-"))) S DGERR=1
"RTN","EASECSCR",73,0)
 I 'DGERR S DGY=DGY_$S($L(DGY):",",1:"")_DGS,DGDR=DGDR_$S($L(DGDR):",",1:"")_(DGS+100)
"RTN","EASECSCR",74,0)
 Q
"RTN","EASECSCU")
0^4^B9518083
"RTN","EASECSCU",1,0)
EASECSCU ;ALB/LBD - LTC Co-Pay Test Screen Driver Utilities ;10 AUG 2001
"RTN","EASECSCU",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,7,40**;Mar 15, 2001
"RTN","EASECSCU",3,0)
 ;
"RTN","EASECSCU",4,0)
 ;NOTE: This routine was modified from DGMTSCU for LTC Co-pay
"RTN","EASECSCU",5,0)
SETUP ;Set-up the screen driver array and required screen variables
"RTN","EASECSCU",6,0)
 ; Input  -- DFN              Patient IEN
"RTN","EASECSCU",7,0)
 ;           DGMTDT           Date of Test
"RTN","EASECSCU",8,0)
 ;           DGMTYPT          Type of Test
"RTN","EASECSCU",9,0)
 ; Output -- DGMTSC           Screen Driver Array
"RTN","EASECSCU",10,0)
 ;           DGVPRI           Veteran Patient Relation IEN
"RTN","EASECSCU",11,0)
 ;           DGVINI           Veteran Individual Annual Income IEN
"RTN","EASECSCU",12,0)
 ;           DGVIRI           Veteran Income Relation IEN
"RTN","EASECSCU",13,0)
 ;           DGMTPAR          Annual Means Test Parameter Array
"RTN","EASECSCU",14,0)
 ;           DGFORM           10-10EC Form (1=Revised; 0=Original)
"RTN","EASECSCU",15,0)
 ;           DGERR            1=ERROR and 0=NO ERROR
"RTN","EASECSCU",16,0)
 N DGINI,DGIRI,DGLY,DGPRI,DGPRTY,DGSCR,I,X
"RTN","EASECSCU",17,0)
 K DGMTSC S DGERR=0,DGLY=$$LYR^DGMTSCU1(DGMTDT)
"RTN","EASECSCU",18,0)
 F I=1:1 S X=$P($T(SCRNS+I),";;",2) Q:X="QUIT"  S DGMTSC(+X)=X
"RTN","EASECSCU",19,0)
 D NEW^EASECED1 S:DGPRI'>0 DGERR=1 G Q:DGERR S DGVPRI=DGPRI
"RTN","EASECSCU",20,0)
 D GETIENS^EASECU2(DFN,DGPRI,DGMTDT) G Q:DGERR S DGVINI=DGINI,DGVIRI=DGIRI
"RTN","EASECSCU",21,0)
 D PAR S:DGMTPAR="" DGERR=1
"RTN","EASECSCU",22,0)
 ; Set DGFORM to indicate which 10-10EC form was used to complete
"RTN","EASECSCU",23,0)
 ; the LTC copay test.  If DGFORM=1 the revised format will be used
"RTN","EASECSCU",24,0)
 ; for the LTC copay test screens, otherwise the original format is
"RTN","EASECSCU",25,0)
 ; used. Added for LTC IV (EAS*1*40).
"RTN","EASECSCU",26,0)
 S DGFORM=$$FORM^EASECU($G(DGMTI))
"RTN","EASECSCU",27,0)
Q Q
"RTN","EASECSCU",28,0)
 ;
"RTN","EASECSCU",29,0)
PAR ;Annual Means Test Parameters
"RTN","EASECSCU",30,0)
 ; Input  -- DGLY             Last Year
"RTN","EASECSCU",31,0)
 ; Output -- DGMTPAR          Means Test Parameter 0th node
"RTN","EASECSCU",32,0)
 ;    Returned if the current year's parameters are not available:
"RTN","EASECSCU",33,0)
 ;           DGMTPAR("PREV")  Previous Year Income Parameters
"RTN","EASECSCU",34,0)
 S DGMTPAR=$S($D(^DG(43,1,"MT",DGLY+10000,0)):^(0),1:"")
"RTN","EASECSCU",35,0)
 I DGMTPAR']"",$D(^DG(43,1,"MT",DGLY,0)) S DGMTPAR=^(0),DGMTPAR("PREV")=""
"RTN","EASECSCU",36,0)
 Q
"RTN","EASECSCU",37,0)
 ;
"RTN","EASECSCU",38,0)
HD ;Print screen header
"RTN","EASECSCU",39,0)
 ; Input  -- DGMTSCI  Screen number
"RTN","EASECSCU",40,0)
 ;           DGVPRI   Veteran Patient Relation IEN
"RTN","EASECSCU",41,0)
 ;           DGMTDT   Date of Test
"RTN","EASECSCU",42,0)
 ;           DGHLPF   Help Flag  (Optional)
"RTN","EASECSCU",43,0)
 ; Output -- Screen Header
"RTN","EASECSCU",44,0)
 N DGHDR,DGIOM,DGLNE,DGMTSCR,DGTAB,Y,IOINHI,IOINLOW
"RTN","EASECSCU",45,0)
 S:'$D(DGHLPF) DGHLPF=0
"RTN","EASECSCU",46,0)
 S DGLNE="",DGIOM=$S('IOM:80,1:IOM),$P(DGLNE,"=",(DGIOM-1))=""
"RTN","EASECSCU",47,0)
 S DGHDR=$P($$SCR(DGMTSCI),";",2)_", SCREEN <"_+$$SCR(DGMTSCI)_"> "_$S(DGHLPF:"HELP",1:"")
"RTN","EASECSCU",48,0)
 S DGTAB=DGIOM-$L(DGHDR)\2
"RTN","EASECSCU",49,0)
 S (DGVI,DGVO)="" I $S('$D(IOST(0)):1,'$D(^DG(43,1,0)):1,'$P(^DG(43,1,0),"^",36):1,$D(^DG(43,1,"TERM",IOST(0))):1,1:0) G HDNH ;goto HDNH if not high intensity
"RTN","EASECSCU",50,0)
 S X="IOINHI;IOINLOW" D ENDR^%ZISS K X S DGVI=IOINHI,DGVO=IOINLOW S X=132 X ^%ZOSF("RM")
"RTN","EASECSCU",51,0)
HDNH ;
"RTN","EASECSCU",52,0)
 W @IOF W ?DGTAB,DGVI,DGHDR,DGVO
"RTN","EASECSCU",53,0)
 I 'DGHLPF W !,$$NAME^DGMTU1(DGVPRI),"  ",$$SSN^DGMTU1(DGVPRI),?(DGIOM-26),"LTC COPAY TEST FOR " S Y=$E(DGMTDT,1,3)_"0000" X ^DD("DD") W Y
"RTN","EASECSCU",54,0)
 W !,DGLNE
"RTN","EASECSCU",55,0)
 K DGHLPF Q
"RTN","EASECSCU",56,0)
 ;
"RTN","EASECSCU",57,0)
SCR(DGMTSCI) ;Screen name and number
"RTN","EASECSCU",58,0)
 ;         Input  -- DGMTSCI  Screen number
"RTN","EASECSCU",59,0)
 ;         Output -- Screen number;Screen name
"RTN","EASECSCU",60,0)
 N DGMTSCR
"RTN","EASECSCU",61,0)
 S DGMTSCR=$P($G(DGMTSC(DGMTSCI)),";",1,2)
"RTN","EASECSCU",62,0)
 Q $G(DGMTSCR)
"RTN","EASECSCU",63,0)
 ;
"RTN","EASECSCU",64,0)
ROU(DGMTSCI) ;Screen entry routine
"RTN","EASECSCU",65,0)
 ;         Input  -- DGMTSCI  Screen number
"RTN","EASECSCU",66,0)
 ;         Output -- Routine name
"RTN","EASECSCU",67,0)
 N DGROU
"RTN","EASECSCU",68,0)
 S DGROU=$P($G(DGMTSC(DGMTSCI)),";",3)
"RTN","EASECSCU",69,0)
 Q $G(DGROU)
"RTN","EASECSCU",70,0)
 ;
"RTN","EASECSCU",71,0)
ROURET(DGMTSCI) ;Screen read processor return routine
"RTN","EASECSCU",72,0)
 ;         Input  -- DGMTSCI  Screen number
"RTN","EASECSCU",73,0)
 ;         Output -- Routine name
"RTN","EASECSCU",74,0)
 N DGROU
"RTN","EASECSCU",75,0)
 S DGROU=$P($G(DGMTSC(DGMTSCI)),";",4)
"RTN","EASECSCU",76,0)
 Q $G(DGROU)
"RTN","EASECSCU",77,0)
 ;
"RTN","EASECSCU",78,0)
SCRNS ;Screen Number;Screen Name;Screen Entry Routine;Reader Return Routine
"RTN","EASECSCU",79,0)
 ;;1;MILITARY SERVICE DATA;EN^EASECSC1;EN1^EASECSC1
"RTN","EASECSCU",80,0)
 ;;2;INSURANCE DATA;EN^EASECSC2;EN1^EASECSC2
"RTN","EASECSCU",81,0)
 ;;3;MARITAL STATUS/DEPENDENTS;EN^EASECSC3;EN1^EASECSC3
"RTN","EASECSCU",82,0)
 ;;4;FIXED AND LIQUID ASSETS;EN^EASECSC4;EN1^EASECSC4
"RTN","EASECSCU",83,0)
 ;;5;CURRENT CALENDAR YEAR GROSS INCOME;EN^EASECSC5;EN1^EASECSC5
"RTN","EASECSCU",84,0)
 ;;6;DEDUCTIBLE EXPENSES;EN^EASECSC6;EN1^EASECSC6
"RTN","EASECSCU",85,0)
 ;;QUIT
"RTN","EASECSU3")
0^9^B7411866
"RTN","EASECSU3",1,0)
EASECSU3 ;ALB/LBD - LTC Co-Pay Test Screen Variable Utilities Cont. ;14 AUG 2001
"RTN","EASECSU3",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,7,40**;Mar 15, 2001
"RTN","EASECSU3",3,0)
 ;
"RTN","EASECSU3",4,0)
INC ;Determine income, expense and net worth
"RTN","EASECSU3",5,0)
 ; Input  -- DFN      Patient file IEN
"RTN","EASECSU3",6,0)
 ;           DGCOMF   LTC Co-Pay Test Completion Flag  (Optional)
"RTN","EASECSU3",7,0)
 ;                    (1 if completing LTC co-pay test)
"RTN","EASECSU3",8,0)
 ;           DGMTDT   Date of Test
"RTN","EASECSU3",9,0)
 ;           DGMTI    Annual Means Test IEN
"RTN","EASECSU3",10,0)
 ;           DGVINI   Veteran Individual Annual Income IEN
"RTN","EASECSU3",11,0)
 ;           DGSP     Spouse 1=YES and 0=NO (mt income)
"RTN","EASECSU3",12,0)
 ;           DGDC     Dependent children 1=YES and 0=NO (mt income)
"RTN","EASECSU3",13,0)
 ;           DGMTPAR  Annual Means Test Parameters
"RTN","EASECSU3",14,0)
 ; Output -- DGIN0    Annual Income 0th node array (income)
"RTN","EASECSU3",15,0)
 ;           DGIN1    Annual Income 1 node array (expense)
"RTN","EASECSU3",16,0)
 ;           DGIN2    Annual Income 2 node array (net worth)
"RTN","EASECSU3",17,0)
 ;           DGINT    Total income
"RTN","EASECSU3",18,0)
 ;           DGDET    Total deductible expenses
"RTN","EASECSU3",19,0)
 ;           DGNWT    Total net worth
"RTN","EASECSU3",20,0)
 ;           DGINTF   Income flag
"RTN","EASECSU3",21,0)
 ;           DGNWTF   Net worth flag
"RTN","EASECSU3",22,0)
 N DGCNT,DGINC,DGINR,I,J,Y
"RTN","EASECSU3",23,0)
 D ALL^EASECU21(DFN,"VCS",DGMTDT,"IR",$S($G(DGMTI):DGMTI,1:""))
"RTN","EASECSU3",24,0)
 S DGIN0("V")=$G(^DGMT(408.21,DGVINI,0)),DGIN1("V")=$G(^(1)),DGIN2("V")=$G(^(2))
"RTN","EASECSU3",25,0)
 S DGINT=$$TOT^DGMTSCU1(DGIN0("V"),6,17)+$$TOT^DGMTSCU1(DGIN0("V"),19,20)
"RTN","EASECSU3",26,0)
 S DGDET=$$TOT^DGMTSCU1(DGIN1("V"),1,10)
"RTN","EASECSU3",27,0)
 S DGNWT=$$TOT^DGMTSCU1(DGIN2("V"),1,4)+$$TOT^DGMTSCU1(DGIN2("V"),6,9)
"RTN","EASECSU3",28,0)
 I $G(DGCOMF) D MT(DGINR("V"),DGMTI)
"RTN","EASECSU3",29,0)
 I DGSP S (DGIN0("S"),DGIN1("S"),DGIN2("S"))="" D SPOUSE:$D(DGINC("S"))
"RTN","EASECSU3",30,0)
 ; dependent child income is not included for LTC co-pay test
"RTN","EASECSU3",31,0)
 ;I DGDC S (DGIN0("C"),DGIN1("C"))="",DGCNT=0 F  S DGCNT=$O(DGINC("C",DGCNT)) Q:'DGCNT  D CHK^DGMTSCU2,CHILD:Y
"RTN","EASECSU3",32,0)
 S DGINTF=$S(DGINT:1,1:0)
"RTN","EASECSU3",33,0)
 S DGNWTF=$S(DGNWT:1,1:0)
"RTN","EASECSU3",34,0)
 Q
"RTN","EASECSU3",35,0)
 ;
"RTN","EASECSU3",36,0)
SPOUSE ;Determine spouse income and net worth
"RTN","EASECSU3",37,0)
 S DGIN0("S")=$G(^DGMT(408.21,DGINC("S"),0)),DGIN1("S")=$G(^(1)),DGIN2("S")=$G(^(2))
"RTN","EASECSU3",38,0)
 S DGINT=DGINT+$$TOT^DGMTSCU1(DGIN0("S"),6,17)+$$TOT^DGMTSCU1(DGIN0("S"),19,20)
"RTN","EASECSU3",39,0)
 ; Added next line for LTC Phase IV (EAS*1*40)
"RTN","EASECSU3",40,0)
 S DGNWT=DGNWT+$$TOT^DGMTSCU1(DGIN2("S"),1,4)+$$TOT^DGMTSCU1(DGIN2("S"),6,9)
"RTN","EASECSU3",41,0)
 I $G(DGCOMF) D MT(DGINR("S"),DGMTI)
"RTN","EASECSU3",42,0)
SPOUSEQ Q
"RTN","EASECSU3",43,0)
 ;
"RTN","EASECSU3",44,0)
CHILD ;Determine total dependent children(s) income and expense
"RTN","EASECSU3",45,0)
 N DGCE,DGEMP,I,X
"RTN","EASECSU3",46,0)
 S X=$G(^DGMT(408.21,DGINC("C",DGCNT),0)) F I=8:1:17 I $P(X,"^",I)]"" S $P(DGIN0("C"),"^",I)=$P(DGIN0("C"),"^",I)+$P(X,"^",I)
"RTN","EASECSU3",47,0)
 S DGEMP=$P(X,"^",14),DGINT=DGINT+$$TOT^DGMTSCU1(X,8,17)
"RTN","EASECSU3",48,0)
 S X=$G(^DGMT(408.21,DGINC("C",DGCNT),1)) I $P(X,"^",3)]"" S $P(DGIN1("C"),"^",3)=$P(DGIN1("C"),"^",3)+$P(X,"^",3)
"RTN","EASECSU3",49,0)
 S DGCE=(DGEMP-$P(DGMTPAR,"^",17))-$P(X,"^",3)
"RTN","EASECSU3",50,0)
 S DGDET=DGDET+DGEMP-$S($G(DGCE)>0:DGCE,1:0)
"RTN","EASECSU3",51,0)
 I $G(DGCOMF) D MT(DGINR("C",DGCNT),DGMTI)
"RTN","EASECSU3",52,0)
CHILDQ Q
"RTN","EASECSU3",53,0)
 ;
"RTN","EASECSU3",54,0)
MT(DGINR,DGMTI) ;Update Income Relation file with Means Test IEN
"RTN","EASECSU3",55,0)
 ;         Input  -- DGINR  Income Relation IEN
"RTN","EASECSU3",56,0)
 ;                   DGMTI  Annual Means Test IEN
"RTN","EASECSU3",57,0)
 ;         Output -- Update Means Test IEN
"RTN","EASECSU3",58,0)
 N DA,DIE,DR
"RTN","EASECSU3",59,0)
 S DA=DGINR,DIE="^DGMT(408.22,",DR="31////^S X="_DGMTI D ^DIE
"RTN","EASECSU3",60,0)
 Q
"RTN","EASECSU3",61,0)
 ;
"RTN","EASECSU3",62,0)
DEP ;Determine dependent data
"RTN","EASECSU3",63,0)
 ; Input  -- DFN     Patient file IEN
"RTN","EASECSU3",64,0)
 ;           DGMTDT  Date of Test
"RTN","EASECSU3",65,0)
 ;           DGVIRI  Veteran Income Relation IEN
"RTN","EASECSU3",66,0)
 ; Output -- DGVIR0  Veteran Income Relation 0th node
"RTN","EASECSU3",67,0)
 ;           DGSP    Spouse 1=YES and 0=NO (mt income)
"RTN","EASECSU3",68,0)
 ;           DGDC    Dependent children 1=YES and 0=NO (mt income)
"RTN","EASECSU3",69,0)
 ;           DGNC    Number of dependent children
"RTN","EASECSU3",70,0)
 ;           DGND    Total number of dependents
"RTN","EASECSU3",71,0)
 N DGCNT,DGDEP,DGINR,DGREL,Y
"RTN","EASECSU3",72,0)
 S DGVIR0=$G(^DGMT(408.22,DGVIRI,0)) D ALL^EASECU21(DFN,"SC",DGMTDT,"PR",$S($G(DGMTI):DGMTI,1:""))
"RTN","EASECSU3",73,0)
 ;Include spouse's income for LTC co-pay if vet is married
"RTN","EASECSU3",74,0)
 ;If vet is legally separated, do not include spouse's income. Added for
"RTN","EASECSU3",75,0)
 ;LTC Phase IV (EAS*1*40)
"RTN","EASECSU3",76,0)
 S DGSP=$S('$P(DGVIR0,U,14):0,$P(DGVIR0,U,17):0,'$G(DGREL("S")):0,1:1)
"RTN","EASECSU3",77,0)
 ;Child's income is not included for LTC co-pay test
"RTN","EASECSU3",78,0)
 S DGDC=0
"RTN","EASECSU3",79,0)
 S DGNC=+$P(DGVIR0,"^",13)
"RTN","EASECSU3",80,0)
 S DGND=DGSP+DGNC
"RTN","EASECSU3",81,0)
 Q
"RTN","EASECU")
0^2^B7172309
"RTN","EASECU",1,0)
EASECU ;ALB/PHH,LBD - LTC Co-Pay Test Utilities ; 22 AUG 2001
"RTN","EASECU",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**5,7,34,40**;Mar 15, 2001
"RTN","EASECU",3,0)
 ;
"RTN","EASECU",4,0)
LST(DFN,DGDT,DGMTYPT) ;Last LTC Co-Pay test for a patient
"RTN","EASECU",5,0)
 ;         Input  -- DFN   Patient IEN
"RTN","EASECU",6,0)
 ;                   DGDT  Date/Time  (Optional- default today@2359)
"RTN","EASECU",7,0)
 ;                DGMTYPT  Type of Test (Optional - if not defined 
"RTN","EASECU",8,0)
 ;                                       LTC Co-Pay will be assumed)
"RTN","EASECU",9,0)
 ;         Output -- LTC Co-Pay Test IEN^Date of Test
"RTN","EASECU",10,0)
 ;                   ^Status Name^Status Code^Source of Test
"RTN","EASECU",11,0)
 N DGIDT,DGMTFL1,DGMTI,DGNOD,Y I '$D(DGMTYPT) S DGMTYPT=3
"RTN","EASECU",12,0)
 S DGIDT=$S($G(DGDT)>0:-DGDT,1:-DT) S:'$P(DGIDT,".",2) DGIDT=DGIDT_.2359
"RTN","EASECU",13,0)
 F  S DGIDT=+$O(^DGMT(408.31,"AID",DGMTYPT,DFN,DGIDT)) Q:'DGIDT!$G(DGMTFL1)  D
"RTN","EASECU",14,0)
 .F DGMTI=0:0 S DGMTI=+$O(^DGMT(408.31,"AID",DGMTYPT,DFN,DGIDT,DGMTI)) Q:'DGMTI!$G(DGMTFL1)  D
"RTN","EASECU",15,0)
 ..S DGNOD=$G(^DGMT(408.31,DGMTI,0)) I DGNOD S DGMTFL1=1,Y=DGMTI_"^"_$P(^(0),"^")_"^"_$$MTS(+$P(^(0),"^",3))_"^"_$P(DGNOD,"^",23)
"RTN","EASECU",16,0)
 Q $G(Y)
"RTN","EASECU",17,0)
 ;
"RTN","EASECU",18,0)
MTS(DGMTS) ;LTC Co-Pay test status -- default current
"RTN","EASECU",19,0)
 ;         Input  -- DGMTS  LTC Co-Pay Test Status IEN
"RTN","EASECU",20,0)
 ;         Output -- Status Name^Status Code
"RTN","EASECU",21,0)
 N Y
"RTN","EASECU",22,0)
 I $G(DGMTS) S Y=$P($G(^DG(408.32,DGMTS,0)),"^",1,2)
"RTN","EASECU",23,0)
 Q $G(Y)
"RTN","EASECU",24,0)
 ;
"RTN","EASECU",25,0)
EXMPT(DFN) ;Check if veteran is exempt from LTC co-payments:
"RTN","EASECU",26,0)
 ; If the veteran has a compensable SC disability, OR
"RTN","EASECU",27,0)
 ; If the veteran is a single, NSC pensioner not in receipt of A&A
"RTN","EASECU",28,0)
 ; and HB benefits
"RTN","EASECU",29,0)
 ;   Input   -- DFN  Patient IEN
"RTN","EASECU",30,0)
 ;   Output  -- 0 = veteran not exempt
"RTN","EASECU",31,0)
 ;              1 = veteran has compensable SC disability
"RTN","EASECU",32,0)
 ;              2 = veteran is single NSC pensioner (no A&A, HB)
"RTN","EASECU",33,0)
 N X,Y,ELG
"RTN","EASECU",34,0)
 S Y=0
"RTN","EASECU",35,0)
 ; if service connected percentage is greater than 10% OR service
"RTN","EASECU",36,0)
 ; connected percentage is less than 10% and annual VA
"RTN","EASECU",37,0)
 ; check amount is greater than 0, then exempt type 1
"RTN","EASECU",38,0)
 S X=$G(^DPT(DFN,.36)),ELG=$P($G(^DIC(8,+X,0)),U,9)
"RTN","EASECU",39,0)
 I ELG=1!($P($G(^DPT(DFN,.3)),U,2)'<10) S Y=1 G EXMPTQ
"RTN","EASECU",40,0)
 I ELG=3,$P($G(^DPT(DFN,.3)),U,2)<10,$P($G(^DPT(DFN,.362)),U,20)>0 S Y=1 G EXMPTQ
"RTN","EASECU",41,0)
 ; if Service Connected quit
"RTN","EASECU",42,0)
 I $P($G(^DPT(DFN,.3)),U)="Y" G EXMPTQ
"RTN","EASECU",43,0)
 ; if Marital Status = 'Married' or 'Separated' quit
"RTN","EASECU",44,0)
 S X=$P($G(^DIC(11,+$P($G(^DPT(DFN,0)),U,5),0)),U,3)
"RTN","EASECU",45,0)
 I "^M^S^"[("^"_X_"^") G EXMPTQ
"RTN","EASECU",46,0)
 ; if not receiving VA pension quit
"RTN","EASECU",47,0)
 S X=$G(^DPT(DFN,.362)) I $P(X,U,14)'="Y" G EXMPTQ
"RTN","EASECU",48,0)
 ; if receiving A&A or HP benefits quit
"RTN","EASECU",49,0)
 I $P(X,U,12)="Y"!($P(X,U,13)="Y") G EXMPTQ
"RTN","EASECU",50,0)
 S Y=2
"RTN","EASECU",51,0)
EXMPTQ Q Y
"RTN","EASECU",52,0)
 ;
"RTN","EASECU",53,0)
DIS(DFN) ;Display patient's current LTC Copay Test status and test date
"RTN","EASECU",54,0)
 ; Input --  DFN   IEN of Patient file
"RTN","EASECU",55,0)
 ; Output -- None
"RTN","EASECU",56,0)
 N DGX,DGMTI,DGMTDT,DGMTS
"RTN","EASECU",57,0)
 Q:'$G(DFN)
"RTN","EASECU",58,0)
 S DGX=$$LST(DFN) Q:'DGX
"RTN","EASECU",59,0)
 S DGMTI=+DGX,DGMTDT=$P(DGX,U,2),DGMTS=$P(DGX,U,3) S:DGMTS="" DGMTS="UNKNOWN"
"RTN","EASECU",60,0)
 W !,"LTC Copayment Status: ",DGMTS,"   Last Test: " S Y=DGMTDT X ^DD("DD") W Y
"RTN","EASECU",61,0)
 ; If last test is over a year old and patient is not deceased or not
"RTN","EASECU",62,0)
 ; exempt due to eligibility (compensable SC) or LTC before 11/30/99
"RTN","EASECU",63,0)
 ; display message that a new test is required
"RTN","EASECU",64,0)
 I $$FMDIFF^XLFDT(DT,DGMTDT)>364 D
"RTN","EASECU",65,0)
 .I $P($G(^DPT(DFN,.35)),U) Q
"RTN","EASECU",66,0)
 .I "^1^4^"[(U_$P($G(^DGMT(408.31,DGMTI,2)),U,7)_U) Q
"RTN","EASECU",67,0)
 .W " **NEW TEST REQUIRED**"
"RTN","EASECU",68,0)
 I $P($G(^DGMT(408.31,DGMTI,0)),U,11)=0 W !,"Patient INELIGIBLE to Receive LTC Services -- Did Not Agree to Pay Copayments"
"RTN","EASECU",69,0)
 Q
"RTN","EASECU",70,0)
 ;
"RTN","EASECU",71,0)
FORM(DGMTI) ; Return the version of the 10-10EC form used to complete
"RTN","EASECU",72,0)
 ; the LTC Copay Test passed in DGMTI
"RTN","EASECU",73,0)
 ;     Input:  DGMTI - LTC Copay Test (IEN file #408.31)
"RTN","EASECU",74,0)
 ;     Output: 0 = Original format
"RTN","EASECU",75,0)
 ;             1 = Revised format
"RTN","EASECU",76,0)
 I '$G(DGMTI) Q 0
"RTN","EASECU",77,0)
 Q $P($G(^DGMT(408.31,DGMTI,2)),U,10)
"VER")
8.0^22
"^DD",408.21,408.21,2.07,0)
OTHER RESIDENCES/LAND/FARM^NJ10,2^^2;7^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999999)!(X<0) X
"^DD",408.21,408.21,2.07,3)
Type a Dollar Amount between 0 and 9999999, 2 Decimal Digits
"^DD",408.21,408.21,2.07,21,0)
^^3^3^3030828^
"^DD",408.21,408.21,2.07,21,1,0)
Enter in this field the current market value, minus any outstanding
"^DD",408.21,408.21,2.07,21,2,0)
mortgages or liens, of the veteran's other residence(s), land, farm or
"^DD",408.21,408.21,2.07,21,3,0)
ranch.  Exclude the value of burial plots.
"^DD",408.21,408.21,2.07,"DT")
3030828
"^DD",408.21,408.21,2.08,0)
VEHICLE(S)^NJ10,2^^2;8^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999999)!(X<0) X
"^DD",408.21,408.21,2.08,3)
Type a Dollar Amount between 0 and 9999999, 2 Decimal Digits
"^DD",408.21,408.21,2.08,21,0)
^.001^4^4^3030828^^^
"^DD",408.21,408.21,2.08,21,1,0)
Enter in this field the current value, minus any outstanding liens, of
"^DD",408.21,408.21,2.08,21,2,0)
any vehicle(s) owned by the veteran.  Exclude the value of one vehicle
"^DD",408.21,408.21,2.08,21,3,0)
if the veteran is receiving only non-institutional care, or there is a
"^DD",408.21,408.21,2.08,21,4,0)
spouse or dependent residing in the community.
"^DD",408.21,408.21,2.08,"DT")
3010920
"^DD",408.21,408.21,2.09,0)
OTHER LIQUID ASSETS^NJ10,2^^2;9^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>9999999)!(X<0) X
"^DD",408.21,408.21,2.09,3)
Type a Dollar Amount between 0 and 9999999, 2 Decimal Digits
"^DD",408.21,408.21,2.09,21,0)
^^6^6^3030828^
"^DD",408.21,408.21,2.09,21,1,0)
Enter in this field the current value of such items as stamp or coin
"^DD",408.21,408.21,2.09,21,2,0)
collections, art work, and collectibles minus any amount owed.  Exclude
"^DD",408.21,408.21,2.09,21,3,0)
from this amount the value of household furniture and other household
"^DD",408.21,408.21,2.09,21,4,0)
goods, clothing, jewelry, and personal items if the veteran is receiving
"^DD",408.21,408.21,2.09,21,5,0)
only non-institutional care, or there is a spouse or dependent residing
"^DD",408.21,408.21,2.09,21,6,0)
in the community.
"^DD",408.21,408.21,2.09,"DT")
3020312
"^DD",408.22,408.22,.14,0)
MARRIED THIS YEAR^S^1:YES;0:NO;^0;14^Q
"^DD",408.22,408.22,.14,.1)
IS YOUR MARITAL STATUS EITHER MARRIED OR SEPARATED
"^DD",408.22,408.22,.14,1,0)
^.1
"^DD",408.22,408.22,.14,1,1,0)
^^TRIGGER^408.22^.15
"^DD",408.22,408.22,.14,1,1,1)
X ^DD(408.22,.14,1,1,1.3) I X S X=DIV S Y(1)=$S($D(^DGMT(408.22,D0,0)):^(0),1:"") S X=$P(Y(1),U,15),X=X S DIU=X K Y S X="" S DIH=$G(^DGMT(408.22,DIV(0),0)),DIV=X S $P(^(0),U,15)=DIV,DIH=408.22,DIG=.15 D ^DICR
"^DD",408.22,408.22,.14,1,1,1.3)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S Y(1)=$C(59)_$P($G(^DD(408.22,.14,0)),U,3) S X=$P($P(Y(1),$C(59)_Y(0)_":",2),$C(59),1)="NO"
"^DD",408.22,408.22,.14,1,1,2)
X ^DD(408.22,.14,1,1,2.3) I X S X=DIV S Y(1)=$S($D(^DGMT(408.22,D0,0)):^(0),1:"") S X=$P(Y(1),U,15),X=X S DIU=X K Y S X="" S DIH=$G(^DGMT(408.22,DIV(0),0)),DIV=X S $P(^(0),U,15)=DIV,DIH=408.22,DIG=.15 D ^DICR
"^DD",408.22,408.22,.14,1,1,2.3)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(408.22,.14,0)),U,3),Y(1)=$S($D(^DGMT(408.22,D0,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,14)_":",2),$C(59),1)=""
"^DD",408.22,408.22,.14,1,1,"%D",0)
^^3^3^3010822^
"^DD",408.22,408.22,.14,1,1,"%D",1,0)
This triggered cross-reference will update the Living With Patient field
"^DD",408.22,408.22,.14,1,1,"%D",2,0)
(#.15).  If Married This Year="NO", the Living With Patient field will be
"^DD",408.22,408.22,.14,1,1,"%D",3,0)
deleted.
"^DD",408.22,408.22,.14,1,1,"CREATE CONDITION")
#.14="NO"
"^DD",408.22,408.22,.14,1,1,"CREATE VALUE")
@
"^DD",408.22,408.22,.14,1,1,"DELETE CONDITION")
#.14=""
"^DD",408.22,408.22,.14,1,1,"DELETE VALUE")
@
"^DD",408.22,408.22,.14,1,1,"FIELD")
#.15
"^DD",408.22,408.22,.14,1,2,0)
^^TRIGGER^408.22^.16
"^DD",408.22,408.22,.14,1,2,1)
X ^DD(408.22,.14,1,2,1.3) I X S X=DIV S Y(1)=$S($D(^DGMT(408.22,D0,0)):^(0),1:"") S X=$P(Y(1),U,16),X=X S DIU=X K Y S X="" S DIH=$G(^DGMT(408.22,DIV(0),0)),DIV=X S $P(^(0),U,16)=DIV,DIH=408.22,DIG=.16 D ^DICR
"^DD",408.22,408.22,.14,1,2,1.3)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S Y(1)=$C(59)_$P($G(^DD(408.22,.14,0)),U,3) S X=$P($P(Y(1),$C(59)_Y(0)_":",2),$C(59),1)="NO"
"^DD",408.22,408.22,.14,1,2,2)
X ^DD(408.22,.14,1,2,2.3) I X S X=DIV S Y(1)=$S($D(^DGMT(408.22,D0,0)):^(0),1:"") S X=$P(Y(1),U,16),X=X S DIU=X K Y S X="" S DIH=$G(^DGMT(408.22,DIV(0),0)),DIV=X S $P(^(0),U,16)=DIV,DIH=408.22,DIG=.16 D ^DICR
"^DD",408.22,408.22,.14,1,2,2.3)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(408.22,.14,0)),U,3),Y(1)=$S($D(^DGMT(408.22,D0,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,14)_":",2),$C(59),1)=""
"^DD",408.22,408.22,.14,1,2,"%D",0)
^^3^3^3010822^
"^DD",408.22,408.22,.14,1,2,"%D",1,0)
This trigger cross-reference will update the Residing In The Community
"^DD",408.22,408.22,.14,1,2,"%D",2,0)
field (#.16).  If Married This Year="NO", the Residing In The Community
"^DD",408.22,408.22,.14,1,2,"%D",3,0)
field will be deleted.
"^DD",408.22,408.22,.14,1,2,"CREATE CONDITION")
#.14="NO"
"^DD",408.22,408.22,.14,1,2,"CREATE VALUE")
@
"^DD",408.22,408.22,.14,1,2,"DELETE CONDITION")
#.14=""
"^DD",408.22,408.22,.14,1,2,"DELETE VALUE")
@
"^DD",408.22,408.22,.14,1,2,"DT")
3010822
"^DD",408.22,408.22,.14,1,2,"FIELD")
#.16
"^DD",408.22,408.22,.14,1,3,0)
^^TRIGGER^408.22^.17
"^DD",408.22,408.22,.14,1,3,1)
X ^DD(408.22,.14,1,3,1.3) I X S X=DIV S Y(1)=$S($D(^DGMT(408.22,D0,0)):^(0),1:"") S X=$P(Y(1),U,17),X=X S DIU=X K Y S X="" S DIH=$G(^DGMT(408.22,DIV(0),0)),DIV=X S $P(^(0),U,17)=DIV,DIH=408.22,DIG=.17 D ^DICR
"^DD",408.22,408.22,.14,1,3,1.3)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S Y(1)=$C(59)_$P($G(^DD(408.22,.14,0)),U,3) S X=$P($P(Y(1),$C(59)_Y(0)_":",2),$C(59))="NO"
"^DD",408.22,408.22,.14,1,3,2)
X ^DD(408.22,.14,1,3,2.3) I X S X=DIV S Y(1)=$S($D(^DGMT(408.22,D0,0)):^(0),1:"") S X=$P(Y(1),U,17),X=X S DIU=X K Y S X="" S DIH=$G(^DGMT(408.22,DIV(0),0)),DIV=X S $P(^(0),U,17)=DIV,DIH=408.22,DIG=.17 D ^DICR
"^DD",408.22,408.22,.14,1,3,2.3)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(408.22,.14,0)),U,3),Y(1)=$S($D(^DGMT(408.22,D0,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,14)_":",2),$C(59))=""
"^DD",408.22,408.22,.14,1,3,"%D",0)
^^3^3^3030902^
"^DD",408.22,408.22,.14,1,3,"%D",1,0)
This trigger cross-reference will update the Legally Separated field
"^DD",408.22,408.22,.14,1,3,"%D",2,0)
(#.17).  If Married This Year="NO", the Legally Separated field will be
"^DD",408.22,408.22,.14,1,3,"%D",3,0)
deleted.
"^DD",408.22,408.22,.14,1,3,"CREATE CONDITION")
#.14="NO"
"^DD",408.22,408.22,.14,1,3,"CREATE VALUE")
@
"^DD",408.22,408.22,.14,1,3,"DELETE CONDITION")
#.14=""
"^DD",408.22,408.22,.14,1,3,"DELETE VALUE")
@
"^DD",408.22,408.22,.14,1,3,"DT")
3030902
"^DD",408.22,408.22,.14,1,3,"FIELD")
#.17
"^DD",408.22,408.22,.14,21,0)
^.001^2^2^3010822^^
"^DD",408.22,408.22,.14,21,1,0)
Enter 'YES' in this field if the veteran's marital status currently is
"^DD",408.22,408.22,.14,21,2,0)
either married or separated.  Otherwise, enter 'NO'.
"^DD",408.22,408.22,.14,"DT")
3030902
"^DD",408.22,408.22,.17,0)
LEGALLY SEPARATED^S^1:YES;0:NO;^0;17^Q
"^DD",408.22,408.22,.17,1,0)
^.1
"^DD",408.22,408.22,.17,1,1,0)
^^TRIGGER^408.22^.16
"^DD",408.22,408.22,.17,1,1,1)
X ^DD(408.22,.17,1,1,1.3) I X S X=DIV S Y(1)=$S($D(^DGMT(408.22,D0,0)):^(0),1:"") S X=$P(Y(1),U,16),X=X S DIU=X K Y S X="" S DIH=$G(^DGMT(408.22,DIV(0),0)),DIV=X S $P(^(0),U,16)=DIV,DIH=408.22,DIG=.16 D ^DICR
"^DD",408.22,408.22,.17,1,1,1.3)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S Y(1)=$C(59)_$P($G(^DD(408.22,.17,0)),U,3) S X=$P($P(Y(1),$C(59)_Y(0)_":",2),$C(59))="YES"
"^DD",408.22,408.22,.17,1,1,2)
X ^DD(408.22,.17,1,1,2.3) I X S X=DIV S Y(1)=$S($D(^DGMT(408.22,D0,0)):^(0),1:"") S X=$P(Y(1),U,16),X=X S DIU=X K Y S X="" S DIH=$G(^DGMT(408.22,DIV(0),0)),DIV=X S $P(^(0),U,16)=DIV,DIH=408.22,DIG=.16 D ^DICR
"^DD",408.22,408.22,.17,1,1,2.3)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(408.22,.17,0)),U,3),Y(1)=$S($D(^DGMT(408.22,D0,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,17)_":",2),$C(59))="YES"
"^DD",408.22,408.22,.17,1,1,"%D",0)
^^3^3^3030902^
"^DD",408.22,408.22,.17,1,1,"%D",1,0)
This trigger cross-reference will update the Residing in the Community
"^DD",408.22,408.22,.17,1,1,"%D",2,0)
field (#.16).  If Legally Separated="YES", the Residing in the Community
"^DD",408.22,408.22,.17,1,1,"%D",3,0)
field will be deleted.
"^DD",408.22,408.22,.17,1,1,"CREATE CONDITION")
#.17="YES"
"^DD",408.22,408.22,.17,1,1,"CREATE VALUE")
@
"^DD",408.22,408.22,.17,1,1,"DELETE CONDITION")
#.17="YES"
"^DD",408.22,408.22,.17,1,1,"DELETE VALUE")
@
"^DD",408.22,408.22,.17,1,1,"DT")
3030902
"^DD",408.22,408.22,.17,1,1,"FIELD")
#.16
"^DD",408.22,408.22,.17,5,1,0)
408.22^.14^3
"^DD",408.22,408.22,.17,21,0)
^^2^2^3030902^
"^DD",408.22,408.22,.17,21,1,0)
Enter 'YES' in this field if the veteran and spouse are legally
"^DD",408.22,408.22,.17,21,2,0)
separated.
"^DD",408.22,408.22,.17,23,0)
^^4^4^3030902^
"^DD",408.22,408.22,.17,23,1,0)
This field will be used to determine how the veteran's LTC copayment is 
"^DD",408.22,408.22,.17,23,2,0)
calculated. If LEGALLY SEPARATED = "YES", then the calculation used will 
"^DD",408.22,408.22,.17,23,3,0)
be the same as an unmarried veteran. This question will be asked if the 
"^DD",408.22,408.22,.17,23,4,0)
field MARRIED THIS YEAR (#.14) = "YES".
"^DD",408.22,408.22,.17,"DT")
3030902
"^DD",408.31,408.31,2.1,0)
1010EC FORM^S^1:DEC 2002;^2;10^Q
"^DD",408.31,408.31,2.1,21,0)
^.001^2^2^3030825^^
"^DD",408.31,408.31,2.1,21,1,0)
This field indicates which version of the 10-10EC form was used to
"^DD",408.31,408.31,2.1,21,2,0)
complete the LTC copay test.
"^DD",408.31,408.31,2.1,"DT")
3030825
**END**
**END**

$TXT Created by MOORE,JIM at DEVCRN.ISC-ALBANY.VA.GOV  (KIDS) on TUESDAY, 10/31/00 at 11:09
=============================================================================
Run Date: NOV 07, 2000                     Designation: RG*1*9
Package : RG - CLINICAL INFO  NETWORKPriority: Mandatory
Version : 1         SEQ #9                     Status: Released
=============================================================================

Associated patches: (v)RG*1*5     <<= must be installed BEFORE `RG*1*9'

Subject: NASHVILLE/MURFREESBORO NDBI/MPI CLEANUP

Category: 
  - Routine
  - Other
  - Enhancement (Mandatory)

Description: 
============

  This patch should be installed by all sites that have installed
  Clinical Information Resource Network - Patient Demographics and
  Master Patient Index (CIRN PD/MPI) version 1.0.
  
  RG*1.0*5 is a required build for patch RG*1.0*9.  Only sites that
  have installed CIRN PD/MPI version 1.0 should install this patch.
  
  1.  During the site integration between the Murfreesboro Veterans
  Affairs Medical Center (VAMC) and the Nashville VAMC, the vast
  majority of the required updates to other sites were successfully
  completed.  This was accomplished via the transmission of the
  HL7 Facility Integration Messages that were sent to all sites that
  shared patients with Murfreesboro.  This patch is to ensure that
  all updates to the CIRN PD/MPI data required by the October 1, 2000
  integration between Murfreesboro and Nashville have been accomplished.
  The post-install routine will perform this final cleanup.
   
  During site integrations, two or more databases are merged.  The new
  merged database is referred to as the primary site and the others are
  referred to as legacy sites.
   
  The CIRN PD/MPI software maintains data that is affected by site
  integrations.  The data includes the following:
  a) CIRN MASTER OF RECORD (#991.03) field in the PATIENT (#2) file.
     This field points to the INSTITUTION (#4) file.
  b) Records in the TREATING FACILITY LIST (#391.91) file.  This file 
     points to the INSTITUTION (#4) file.
  c) Records in the SUBSCRIPTION CONTROL (#774) file. This file points
     to the HL LOGICAL LINK (#870) file, which in turn points to the
     INSTITUTION (#4) file.
   
  The Nashville and Murfreesboro systems were successfully integrated
  on October 1, 2000.  The integration between these two sites, both
  of which were running CIRN PD/MPI, required that the CIRN PD/MPI data
  be updated at all other CIRN PD/MPI sites that shared any patients
  with Murfreesboro. For each shared patient these updates were required
  at all sites that shared the patient:
  a) If Murfreesboro was the CIRN Master of Record (CMOR) then the
     CMOR should be changed to Nashville.
  b) Murfreesboro should be removed as a Treating Facility for that
     patient and the subscription to Murfreesboro terminated.
  c) If Nashville was not already a Treating Facility for that patient
     it should be added, and also a subscription to Nashville added.
  
  2.  In addition to the cleanup described above, two changes are being
  made as to how the HL7 Facility Integration Messages are processed.
  When sites are integrated, Facility Integration Messages are transmitted
  to sites that share patients with the legacy site being integrated. The
  changes to the message processing are the following:
  a) When the CMOR receives the Facility Integration Message from the
     legacy site it in turn transmits the message to all sites that
     share that patient. At the point this is done the legacy site should
     already have been removed from the list of subscribers, but this
     patch adds a check to insure that the message is not sent back to the 
     legacy site.
  b) As stated above, there is no need to send the Facility Integration
     Message back to the legacy site.  However, a change has been made so
     that if the legacy site does receive a Facility Integration Message
     it will not process it.
     
  
  Data Dictionary Changes:
  ========================
  There are no data dictionary changes.  Three exception types in the
  CIRN HL7 EXCEPTION TYPE (#991.11) file will have the value of the
  ACTION (#2) field changed to MAIL.
   
  Test Sites:
  ===========
  Birmingham, AL
  Lexington, KY
  Salisbury, NC
     
  Routine Summary:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routines will look like:
   
  <TAB>;;1.0;CLINICAL INFO RESOURCE NETWORK;**[patch list]**;30 Apr 99
  CHECK^XTSUMBLD results:
   
  Routine Name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  RGFIBM                 6832030              8908039             5,9
  RGFICLN                    N/A              7904592               9
  RGFIPM1                8551714              8888135             5,9
  RGFIRM                 6159192              6180406             5,9
  RGP9ENV                    N/A                  N/A               9
  RGP9PST                    N/A                  N/A               9
  Note: Routine RGP9ENV and RGP9PST are deleted by the installation. The 
  checksums prior to deletion are:
                           RGP9ENV            2691731
                           RGP9PST             606710
   
  Installation Instructions:
  ==========================
  This patch can be loaded with users on the system.  Installation
  will take less than 5 minutes.
  
  Suggested time to install - non-peak requirement hours.
   
  1.  Existing CIRN PD/MPI 1.0 sites should install patch RG*1.0*9 
      immediately.  For all other sites, RG*1.0*9 will be installed
      during your CIRN PD/MPI installation weekend.
   
  2.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
      [Note: TEXT PRINT/DISPLAY option in the PackMan menu will
      display the patch text only.]
    
  3.  None of the included routines are recommended for mapping.
   
  4.  From the Kernel Installation and Distribution System Menu, select
      the Installation menu.
   
  5.  From this menu, you may elect to use the following options (when
      prompted for the INSTALL NAME, enter RG*1.0*9).
   
      (a)  Backup a Transport Global - this option will create a backup
           message of any routines exported with the patch.  It will NOT
           backup any other changes such as DDs or templates.
   
      (b)  Compare Transport Global to Current System - this option will
           allow you to view all changes that will be made when the
           patch is installed.  It compares all components of the patch
           (routines, DDs, templates, etc.).
   
      (c)  Verify Checksums in Transport Global - this option will allow
           you to ensure the integrity of the routines that are in the
           transport global.
   
      (d)  Print Transport Global - this option will allow you to view the
           components of the KIDS build.
   
  6.  Use the Install Package(s) option and select the package RG*1.0*9.
   
  7.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//',
      respond NO.
   
  8.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? YES//', respond NO.
  
  9.  Kids will automatically delete the routines RGP9ENV and RGP9PST upon
      successful installation of this patch.
 
 

Routine Information:
====================

Routine Name:
  - RGFICLN


Routine Checksum:

Routine Name:
  - RGP9ENV


Routine Checksum:

Routine Name:
  - RGP9PST


Routine Checksum:

Routine Name:
  - RGFIRM


Routine Checksum:

Routine Name:
  - RGFIPM1


Routine Checksum:

Routine Name:
  - RGFIBM


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : MOORE,CHARLES J               Date Entered : SEP 27, 2000
Completed By: CARBY,DIANA                   Date Completed: NOV 02, 2000
Released By : CARLSON-GOTTS,NANCY           Date Released : NOV 07, 2000
=============================================================================


Packman Mail Message:
=====================

$END TXT

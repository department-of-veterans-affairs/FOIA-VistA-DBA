$TXT Created by YORTY,M. ROBERT at CSL.FO-WASH.MED.VA.GOV  (KIDS) on Tuesday, 07/15/03 at 15:37
=============================================================================
Run Date: OCT 30, 2003                     Designation: DGBT*1*3
Package : DGBT - BENEFICIARY TRAVEL           Priority: Mandatory
Version : 1         SEQ #3                      Status: Released
                  Compliance Date: NOV 30, 2003
=============================================================================

Associated patches: (v)DGBT*1*2    <<= must be installed BEFORE `DGBT*1*3'

Subject: CoreFLS Update Corrections

Category: 
  - Data Dictionary
  - Routine

Description:
============

 This patch corrects a problem found during ITC2 (Integrated Test Cycle,
 phase 2) testing of the CoreFLS Beneficiary Travel package, in the 
 developmental Bay Pines test account. Installation will delete/replace the
 existing "BB" key index of the LOCAL VENDOR (#392.31) file with a
 corrected "BB" key index. Two routines that add and update the entries in
 the LOCAL VENDOR (#392.31) file have also been modified to address the
 "BB" key index change.
  
 Problem:  Users made site vendor name changes to the Oracle database
 through the VRS (Vendor Registration System).  These Oracle name changes
 were not updating the local vendor name when running the 'Update Local 
 Vendor (COREFLS)' option.
  
 Resolution:  It was determined that the "BB" key index, containing name, 
 site name, and vendor number did not consist of a unique key to be 
 indexed.  Because the names between Oracle and the Local Vendor file were 
 different, the update was not performed.  A new "BB" key index was created
 with only site name and vendor number being in the index.  Two routines 
 were modified to address the key index changes.
  
 This patch addresses the following New Service Request (NSR):
 -------------------------------------------------------------
 There is no NSR associated with this patch.
  
  
 This patch addresses the following NOIS message(s):
 ---------------------------------------------------
 There are no NOIS messages associated with this patch. 
  
  
 Test Sites:
 -----------
 Bay Pines
 Clarksburg
 Grand Junction 
  
 =======================INSTALLATION INSTRUCTIONS==========================
  
 This patch can be loaded with users on the system.
  
 Install Time - 1 minute.
  
 Please ensure that your programming variables are set, 
 including your DUZ(0)="@", otherwise installation will abort.
  
  
 1.   DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only) 
      -----------------------
      Disable routine mapping on all systems for the routines listed in 
      step 3 below.  
       
      NOTE:  If the routines included in this patch are not currently in 
      your mapped routine set, please skip this step.
  
 2.   LOAD TRANSPORT GLOBAL 
      ---------------------
      Choose the PackMan message containing this patch and invoke the 
      INSTALL/CHECK MESSAGE PackMan option.  
  
 3.   COMPONENTS SENT WITH PATCH 
      --------------------------
      The following is a list of the routines included in this patch.  
      The second line of each of these routines now looks like:  
  
      <tab>;;1.0;Beneficiary Travel;**[patch list]**;September 25, 2001
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
 DGBT1P3                     N/A              1075361                 3
 DGBTCSL                 3089744              3110053               2,3
 DGBTVUP                14152123             13952695               2,3
  
   Total number of routines - 3
  
 4.   START UP KIDS 
      -------------
      Start up the Kernel Installation and Distribution System Menu 
      [XPD MAIN]: 
    
           Edits and Distribution ...  
           Utilities ...  
           Installation ...  
    
 Select Kernel Installation & Distribution System Option: INStallation 
                                                          ---
           Load a Distribution 
           Print Transport Global 
           Compare Transport Global to Current System 
           Verify Checksums in Transport Global 
           Install Package(s) 
           Restart Install of Package(s) 
           Unload a Distribution 
           Backup a Transport Global 
    
 Select Installation Option: 
  
 5.   Select Installation Option: 
      ---------------------------
      NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
             NAME, enter DGBT*1.0*3):
       
      a.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will not
          backup any other changes such as DD's or templates.
      b.  Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when this patch
          is installed.  It compares all components of this patch
          (routines, DD's, templates, etc.).
      c.  Verify Checksums in Transport Global - This option will allow
          you to ensure the integrity of the routines that are in the
          transport global.
      
 6.  Select Installation Option: Install Package(s)
                                 ------------------
     a. Choose the Install Package(s) option to start the patch install.
  
     b. When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of 
        Install? YES//", answer 'NO'.
  
     c. When prompted "Want KIDS to INHIBIT LOGONs during the install? 
        YES//", answer 'NO'.
  
     d. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
        Protocols? YES//", answer 'NO'.
  
  
 7.  REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
     ==========================
     NOTE: This step is only necessary if you performed step 1 or if you 
     wish to include the routines in your mapped set.
  
 8.  After a successful installation, routine DGBT1P3 can be deleted from 
     your system.

Routine Information:
====================

Routine Name:
  - DGBTCSL

  Routine: DGBTCSL
 * OLD *  DGBTCSL ;ALB/MRY- Local Vendor additions (COREFLS) ; 
 04/04/02@0900 AM
 * NEW *  DGBTCSL ;ALB/MRY- Local Vendor additions (COREFLS) ; 
 07/15/02@0900 AM
 * OLD *   ;;1.0;Beneficiary Travel;**2**;September 25, 2001
 * NEW *   ;;1.0;Beneficiary Travel;**2,3**;September 25, 2001
 * OLD *   N FDA,FDAIEN F DGBTI="NAME","NUMBER","SITE_CODE" D
 * NEW *   N FDA,FDAIEN F DGBTI="NUMBER","SITE_CODE" D
 * OLD *   S VAL(1)=FDA(392.31,"+1,",.01)
 * NEW *   ;S VAL(1)=FDA(392.31,"+1,",.01)
 * OLD *   S VAL(2)=FDA(392.31,"+1,",.03)
 * NEW *   S VAL(1)=FDA(392.31,"+1,",.03)
 * OLD *   S VAL(3)=FDA(392.31,"+1,",.02)
 * NEW *   S VAL(2)=FDA(392.31,"+1,",.02)
 * OLD *   I '$D(DIERR) W !,"**COREFLS VENDOR UPDATED**" Q +Y
 * NEW *   I '$D(DIERR) W !,"** LOCAL VENDOR (#392.31) File updated. **" Q 
 +Y

Routine Checksum:

Routine Name:
  - DGBTVUP

  Routine: DGBTVUP
 * OLD *  DGBTVUP ;ALB/MRY-UPDATE LOCAL VENDOR FILE W/ COREFLS VENDORS 
 ;11/9/2002
 * NEW *  DGBTVUP ;ALB/MRY-UPDATE LOCAL VENDOR FILE W/ COREFLS VENDORS 
 ;7/15/2003
 * OLD *   ;;1.0;Beneficiary Travel;**2**;September 25, 2001
 * NEW *   ;;1.0;Beneficiary Travel;**2,3**;September 25, 2001
 * OLD *   . S 
 DGBTVDA=$O(^DGBT(392.31,"BB",@DGBTARRY@(DGBTIDX,"NAME"),@DGBTARRY@
 (DGBTIDX,"SITE_CODE"),@DGBTARRY@(DGBTIDX,"NUMBER"),""))
 * NEW *   . S 
 DGBTVDA=$O(^DGBT(392.31,"BB",@DGBTARRY@(DGBTIDX,"SITE_CODE"),@DGBT
 ARRY@(DGBTIDX,"NUMBER"),""))

Routine Checksum:

Routine Name:
  - DGBT1P3

 Environment Check and Post-init "BB" reindexing routine.

Routine Checksum:

=============================================================================
User Information:
Entered By  : YORTY,M ROBERT                Date Entered  : JUL 15, 2003
Completed By: RUDINGER,NANCY L.             Date Completed: OCT 28, 2003
Released By : FITCH,DONNA                   Date Released : OCT 30, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

$TXT Created by NAPOLIELLO,GREG at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Saturday, 01/03/04 at 23:00
=============================================================================
Run Date: JAN 09, 2004                     Designation: DG*5.3*558
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #488                    Status: Released
                  Compliance Date: FEB 09, 2004
=============================================================================


Subject: CLEANUP MEANS TEST DUPLICATES

Category: 
  - Routine

Description:
============

 This patch, DG*5.3*558, will be removing/deleting records from the 
 ANNUAL MEANS TEST (#408.31) File that meet/match the following criteria:
  
 1. Duplicate tests are defined as those that are of the same test 
    type, test date, and test status.
 2. Income Tests that are corrupted with an invalid test status of null.
  
 Most null status tests have been found to be LTC type tests.  There may be
 other types with the null status codes, which will also be deleted.
  
 The Purge Cleanup along with the Purge Monitor options will be placed on
 the DG MEANS TEST SUPERVISOR MENU.  The Purge Duplicates option will let
 you select to run a small group or all.  This option will be scheduled via
 Taskman and can be stopped via taskman if desired.  The small group will
 process 5 or so qualified records and then stop automatically.  The Purge
 cleanup can be re-selected any time after it has been stopped and it will
 resume where it left off.  See below options that will be added to the 
 menu.
  
     Purge Duplicate Income Tests   [DG CLEANUP INCOME TEST DUPES]
     Purge Income Test Monitor      [DG CLEANUP INCOME TEST MONITOR]
  
   
 When selecting the Purge Duplicate option, you will receive the 
 following prompt:
  
   Purge Duplicate Income Tests
   Do you want to process a group of 5 duplicate patients and stop?
   Enter Yes or No: YES
  
 Entering Y for Yes above will process the small group and then stop 
 the utility at that point.  You will also receive an email of all that
 have been processed and purged from the ANNUAL MEANS TEST file (#408.31).
  
 You will then receive a prompt for a time to Que this job.
  
   Cleanup Duplicates in the Means Test file
  
   Requested Start Time: NOW//
  
 Upon completion of the small group or the entire file, you will be sent
 an email showing a summary of what was done in one mail message and 
 subsequent message(s) with detail of what was deleted.
  
  
   [#1834624] 11/03/03@08:48  24 lines
   From: POSTMASTER  In 'IN' basket.   Page 1
   ------------------------------------------------------------------------
   Cleanup
   Duplicates in the Means Test file STOPPED on Nov 03, 2003@08:48:42
   Elapsed time:  0:00:04
  
  
        Records Processed:       1,409
   Duplicate Tests Purged:           9
        Null Tests Purged:           2
  
  
  
   Detail changes to follow in subsequent mail messages
  
   Enter message action (in IN basket): Ignore//
  
  
 Subsequent mail messages with detail will be limited to 2000 lines of text
 and for this reason, you may receive multiple messages similar to the
 examples below:                                                   
  
  
 Cleanup Duplicates in the Means Test file COMPLETED on Nov 13, 2003@14:47
  
 Message number: 1
  
 Dupe> ssn: 999999010            MEANS TEST  dated: Aug 16, 1994  ien: 1295
 Dupe> ssn: 999999321            MEANS TEST  dated: Aug 16, 1994  ien: 1304
 Null> ssn: 999999444 LTC COPAY EXEMPTION TST dated: Nov 13, 2003 ien: 1499
 Dupe> ssn: 999999055            MEANS TEST  dated: Feb 07, 1995  ien: 1934
 Dupe> ssn: 999999067            MEANS TEST  dated: Aug 25, 1994  ien: 1382
 Dupe> ssn: 999999545            MEANS TEST  dated: Sep 22, 1994  ien: 1708
 Dupe> ssn: 999999432            MEANS TEST  dated: Mar 30, 1995  ien: 1983
 Dupe> ssn: 999999567            MEANS TEST  dated: May 01, 1995  ien: 2018
  
 Enter message action (in IN basket): Ignore//
  
  
  
 Cleanup Duplicates in the Means Test file COMPLETED on Nov 13, 2003@14:47
  
 Message number: 2
  
 Dupe> ssn: 999999151            MEANS TEST  dated: Jan 31, 2001  ien: 2880
 Dupe> ssn: 999999151            MEANS TEST  dated: Jan 31, 2001  ien: 2938
 Dupe> ssn: 999999532            MEANS TEST  dated: Feb 06, 2001  ien: 2865
 Dupe> ssn: 999999380            MEANS TEST  dated: Feb 02, 2001  ien: 2996
 Dupe> ssn: 999999380            MEANS TEST  dated: Sep 19, 2001  ien: 2995
 Dupe> ssn: 999999945            MEANS TEST  dated: Jul 26, 2002  ien: 3031
 Dupe> ssn: 999999865 CO-PAY EXEMPTION TEST  dated: Apr 11, 2003  ien: 3098
  
 Enter message action (in IN basket): Ignore//
  
  
  
  
  This patch addresses the following E3R(s):
  ------------------------------------------
  There are no E3Rs associated with this patch.
  
  
  This patch addresses the following NOIS message(s):
  ---------------------------------------------------
  MAD-0503-41984  - Multiple MT Uploads
  MAD-0703-40828  - LTC TESTS
  
  Overview of NOIS Message(s):
  ---------------------------
  MAD-0503-41984  - Multiple MT Uploads
  
  PROBLEM: Many duplicate Means tests are being uploaded on the same 
           day. 
  
  RESOLUTION: Create a cleanup routine to delete all tests that are 
              duplicate on the same day.
  
  
  MAD-0703-40828  - LTC TESTS
  
  PROBLEM: There are cases where veterans are receiving valid future dated
           Means Test along with "ghost" LTC tests on the same day.  These
           "ghosts" tests have a null status and have been determined to be
           fictitious tests.  The source of these test are unknown and
           should be removed from the file.
  
  RESOLUTION: Create a cleanup routine to delete all tests that have a 
              null status in the ANNUAL MEANS TEST file #408.31.
  
  
         ================INSTALLATION INSTRUCTIONS =================
  
  
  This patch can be loaded with users on the system, however, it should be
  installed during period of minimum usage.  If installed during the normal
  workday, it is recommended that the following menu options (File #19) and
  all of their descendants be disabled to prevent possible conflicts while
  running the KIDS Install.  Other VISTA users will not be affected.
  
 [DG MEANS TEST EDIT]             Edit an Existing Means Test
 [DG CO-PAY TEST EDIT]            Edit an Existing Copay Exemption Test
 [EASEC LTC COPAY TEST EDIT]      Edit an Existing LTC Copayment Test
 [EASEC LTC EXEMPTION TEST EDIT]  Edit an Existing LTC Copay Exemption Test
  
  
  Install Time - 5 Minutes.
  
  
    1.   LOAD TRANSPORT GLOBAL
         ---------------------
         Choose the PackMan message containing this patch and invoke the
         INSTALL/CHECK MESSAGE PackMan option.
  
    2.   DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only)
         -----------------------
         Disable routine mapping on all systems for the routines listed in
         step 3 below.
  
         NOTE:  If the routines included in this patch are not currently in
                your mapped routine set, please skip this step.
  
    3.   COMPONENTS SENT WITH PATCH
         ------------------------
   The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
      <tab>;;5.3;REGISTRATION;**[patch list]**;JUNE 1 2000
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  DG53358C                334364               334364           358,558
  DG53358D               5308190              5159277           358,558
  DG53558                    N/A              9622082             558
  DG53558M                   N/A              6267160             558
  
          Total number of routines - 4
  
 ** The two routines DG53358C and DG53358D were redeployed with this patch
    with one minor change.  They have been sent because the original
    instructions for patch DG*5.3*358, indicated they may be deleted.  So
    to insure that they exist for use by this patch, with the minor change,
    they have been included with this patch.
  
  
    4.   START UP KIDS
         -------------
         Start up the Kernel Installation and Distribution System Menu
         [XPD MAIN]:
  
              Edits and Distribution ...
              Utilities ...
              Installation ...
  
    Select Kernel Installation & Distribution System Option: INStallation
                                                             ---
              Load a Distribution
              Print Transport Global
              Compare Transport Global to Current System
              Verify Checksums in Transport Global
              Install Package(s)
              Restart Install of Package(s)
              Unload a Distribution
              Backup a Transport Global
  
    Select Installation Option:
  
    5.   Select Installation Option:
         --------------------------
         NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
                NAME, enter DG*5.3*558):
  
         a.  Backup a Transport Global - This option will create a backup
             message of any routines exported with this patch. It will not
             backup any other changes such as DD's or templates.
         b.  Compare Transport Global to Current System - This option will
             allow you to view all changes that will be made when this 
             patch is installed.  It compares all components of this patch
             (routines, DD's, templates, etc.).
         c.  Verify Checksums in Transport Global - This option will allow
             you to ensure the integrity of the routines that are in the
             transport global.
  
    6.   Select Installation Option: Install Package(s)
                                     ----------------
         **This is the step to start the installation of this KIDS patch:
  
         a.  Choose the Install Package(s) option to start the patch
             install.
         b.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion
             of Install? YES// answer NO.
         c.  When prompted 'Want KIDS to INHIBIT LOGONs during the
             install? YES//' answer NO.
         d.  When prompted 'Want to DISABLE Scheduled Options, Menu
             Options, and Protocols? YES//' answer YES.
         e.  When prompted 'Enter options you wish to mark as 'Out Of
             Order':'  Enter the following options:
  
 [DG MEANS TEST EDIT]             Edit an Existing Means Test
 [DG CO-PAY TEST EDIT]            Edit an Existing Copay Exemption Test
 [EASEC LTC COPAY TEST EDIT]      Edit an Existing LTC Copayment Test
 [EASEC LTC EXEMPTION TEST EDIT]  Edit an Existing LTC Copay Exemption Test
  
  
    7.   REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
         -------------------------
         Optional - Include the routines distributed with this patch
         in the mapped routine set.
  
         NOTE: This step is only necessary if you performed step 2 or
               if you wish to include the routines in your mapped set.

Routine Information:
====================

Routine Name:
  - DG53358D

 This routine was modified to allow the deletion of a Linked Rx Co-Pay 
 when the Means Test pointed to does not exist any longer.
  
  
 OLD CODE
 ========
 36     I IVMTOT=2,IVMLINK Q 0  ; don't delete copay test linked to means
 test
  
 NEW CODE
 ========
 36     ;don't delete copay test linked to valid means test
 37     I IVMTOT=2,IVMLINK,$D(^DGMT(408.31,IVMLINK,0)) Q 0

Routine Checksum:

Routine Name:
  - DG53558

 Cleanup routine for Income test Dupes and Bad status codes of null.

Routine Checksum:

Routine Name:
  - DG53358C


Routine Checksum:

Routine Name:
  - DG53558M

 This routine contains utility code for mailing completed messages and the 
 monitor utility.

Routine Checksum:

=============================================================================
User Information:
Entered By  : NAPOLIELLO,GREG               Date Entered  : OCT 07, 2003
Completed By: LANDRY,DANNA                  Date Completed: JAN 06, 2004
Released By : GROOMS,ANTHONY E              Date Released : JAN 09, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

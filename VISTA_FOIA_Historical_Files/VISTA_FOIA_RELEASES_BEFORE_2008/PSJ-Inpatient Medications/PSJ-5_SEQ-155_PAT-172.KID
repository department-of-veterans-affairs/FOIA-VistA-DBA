Released PSJ*5*172 SEQ #155
Extracted from mail message
**KIDS**:PSJ*5.0*172^

**INSTALL NAME**
PSJ*5.0*172
"BLD",6060,0)
PSJ*5.0*172^INPATIENT MEDICATIONS^0^3060803^y
"BLD",6060,1,0)
^^27^27^3060803^
"BLD",6060,1,1,0)
This patch contains Application Program Interfaces (APIs) that will be 
"BLD",6060,1,2,0)
used by calling applications that currently do direct global reads or 
"BLD",6060,1,3,0)
writes to the Inpatient Medications files. Since the IV ROOM file 
"BLD",6060,1,4,0)
(#59.5) and the NON-VERIFIED ORDERS file (#53.1) are being replaced as part
"BLD",6060,1,5,0)
of the Pharmacy Re-engineering project, any direct M-based global reads
"BLD",6060,1,6,0)
or writes to this file must be replaced by calling the APIs provided in 
"BLD",6060,1,7,0)
this patch. When the new data source is in place, the calling applications 
"BLD",6060,1,8,0)
will not be required to make any changes, because these APIs will be 
"BLD",6060,1,9,0)
flexible enough to retrieve the requested data from the new data source, 
"BLD",6060,1,10,0)
when the time comes.
"BLD",6060,1,11,0)
 
"BLD",6060,1,12,0)
This API replaces the following integration agreements:
"BLD",6060,1,13,0)
 
"BLD",6060,1,14,0)
DBIA #  Affected Package(s)
"BLD",6060,1,15,0)
------  -------------------
"BLD",6060,1,16,0)
1884    DSS EXTRACTS,DRUG ACCOUNTABILITY
"BLD",6060,1,17,0)
2907    TEXT INTEGRATION UTILITIES
"BLD",6060,1,18,0)
534     HEALTH SUMMARY
"BLD",6060,1,19,0)
 
"BLD",6060,1,20,0)
This patch enhances an original INPATIENT MEDICATIONS API call 
"BLD",6060,1,21,0)
ALL^PSJ59P5. This enhancement allows a double question mark ("??") to be
"BLD",6060,1,22,0)
passed in to the second parameter PSJFT. PSJFT represents the free-text
"BLD",6060,1,23,0)
name a user wishes to retrieve from this file. Passing "??" to the PSJFT
"BLD",6060,1,24,0)
parameter will cause the API to return all entries from the IV ROOM FILE 
"BLD",6060,1,25,0)
(#59.5). Specifications for this API can be found in the Pharmacy
"BLD",6060,1,26,0)
Re-Engineering (PRE) API Manual. Reference to MEDICAL CENTER 
"BLD",6060,1,27,0)
DIVISION FILE (#40.8) is supported by DBIA 2269.
"BLD",6060,4,0)
^9.64PA^^
"BLD",6060,6.3)
13
"BLD",6060,"KRN",0)
^9.67PA^^
"BLD",6060,"KRN",.4,0)
.4
"BLD",6060,"KRN",.4,"NM",0)
^9.68A^^0
"BLD",6060,"KRN",.401,0)
.401
"BLD",6060,"KRN",.401,"NM",0)
^9.68A^^0
"BLD",6060,"KRN",.402,0)
.402
"BLD",6060,"KRN",.402,"NM",0)
^9.68A^^0
"BLD",6060,"KRN",.403,0)
.403
"BLD",6060,"KRN",.5,0)
.5
"BLD",6060,"KRN",.84,0)
.84
"BLD",6060,"KRN",3.6,0)
3.6
"BLD",6060,"KRN",3.8,0)
3.8
"BLD",6060,"KRN",9.2,0)
9.2
"BLD",6060,"KRN",9.8,0)
9.8
"BLD",6060,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",6060,"KRN",9.8,"NM",1,0)
PSJ59P5^^0^B11701444
"BLD",6060,"KRN",9.8,"NM",2,0)
PSJ53P1^^0^B5710218
"BLD",6060,"KRN",9.8,"NM","B","PSJ53P1",2)

"BLD",6060,"KRN",9.8,"NM","B","PSJ59P5",1)

"BLD",6060,"KRN",19,0)
19
"BLD",6060,"KRN",19.1,0)
19.1
"BLD",6060,"KRN",101,0)
101
"BLD",6060,"KRN",409.61,0)
409.61
"BLD",6060,"KRN",771,0)
771
"BLD",6060,"KRN",869.2,0)
869.2
"BLD",6060,"KRN",870,0)
870
"BLD",6060,"KRN",8994,0)
8994
"BLD",6060,"KRN","B",.4,.4)

"BLD",6060,"KRN","B",.401,.401)

"BLD",6060,"KRN","B",.402,.402)

"BLD",6060,"KRN","B",.403,.403)

"BLD",6060,"KRN","B",.5,.5)

"BLD",6060,"KRN","B",.84,.84)

"BLD",6060,"KRN","B",3.6,3.6)

"BLD",6060,"KRN","B",3.8,3.8)

"BLD",6060,"KRN","B",9.2,9.2)

"BLD",6060,"KRN","B",9.8,9.8)

"BLD",6060,"KRN","B",19,19)

"BLD",6060,"KRN","B",19.1,19.1)

"BLD",6060,"KRN","B",101,101)

"BLD",6060,"KRN","B",409.61,409.61)

"BLD",6060,"KRN","B",771,771)

"BLD",6060,"KRN","B",869.2,869.2)

"BLD",6060,"KRN","B",870,870)

"BLD",6060,"KRN","B",8994,8994)

"BLD",6060,"QUES",0)
^9.62^^
"BLD",6060,"REQB",0)
^9.611^1^1
"BLD",6060,"REQB",1,0)
PSJ*5.0*163^1
"BLD",6060,"REQB","B","PSJ*5.0*163",1)

"BLD",6060,"REQG",0)
^9.611^^
"MBREQ")
0
"PKG",197,-1)
1^1
"PKG",197,0)
INPATIENT MEDICATIONS^PSJ^UNIT DOSE AND IVS
"PKG",197,20,0)
^9.402P^^
"PKG",197,22,0)
^9.49I^1^1
"PKG",197,22,1,0)
5.0^2971215^2980917^11712
"PKG",197,22,1,"PAH",1,0)
172^3060803
"PKG",197,22,1,"PAH",1,1,0)
^^27^27^3060803
"PKG",197,22,1,"PAH",1,1,1,0)
This patch contains Application Program Interfaces (APIs) that will be 
"PKG",197,22,1,"PAH",1,1,2,0)
used by calling applications that currently do direct global reads or 
"PKG",197,22,1,"PAH",1,1,3,0)
writes to the Inpatient Medications files. Since the IV ROOM file 
"PKG",197,22,1,"PAH",1,1,4,0)
(#59.5) and the NON-VERIFIED ORDERS file (#53.1) are being replaced as part
"PKG",197,22,1,"PAH",1,1,5,0)
of the Pharmacy Re-engineering project, any direct M-based global reads
"PKG",197,22,1,"PAH",1,1,6,0)
or writes to this file must be replaced by calling the APIs provided in 
"PKG",197,22,1,"PAH",1,1,7,0)
this patch. When the new data source is in place, the calling applications 
"PKG",197,22,1,"PAH",1,1,8,0)
will not be required to make any changes, because these APIs will be 
"PKG",197,22,1,"PAH",1,1,9,0)
flexible enough to retrieve the requested data from the new data source, 
"PKG",197,22,1,"PAH",1,1,10,0)
when the time comes.
"PKG",197,22,1,"PAH",1,1,11,0)
 
"PKG",197,22,1,"PAH",1,1,12,0)
This API replaces the following integration agreements:
"PKG",197,22,1,"PAH",1,1,13,0)
 
"PKG",197,22,1,"PAH",1,1,14,0)
DBIA #  Affected Package(s)
"PKG",197,22,1,"PAH",1,1,15,0)
------  -------------------
"PKG",197,22,1,"PAH",1,1,16,0)
1884    DSS EXTRACTS,DRUG ACCOUNTABILITY
"PKG",197,22,1,"PAH",1,1,17,0)
2907    TEXT INTEGRATION UTILITIES
"PKG",197,22,1,"PAH",1,1,18,0)
534     HEALTH SUMMARY
"PKG",197,22,1,"PAH",1,1,19,0)
 
"PKG",197,22,1,"PAH",1,1,20,0)
This patch enhances an original INPATIENT MEDICATIONS API call 
"PKG",197,22,1,"PAH",1,1,21,0)
ALL^PSJ59P5. This enhancement allows a double question mark ("??") to be
"PKG",197,22,1,"PAH",1,1,22,0)
passed in to the second parameter PSJFT. PSJFT represents the free-text
"PKG",197,22,1,"PAH",1,1,23,0)
name a user wishes to retrieve from this file. Passing "??" to the PSJFT
"PKG",197,22,1,"PAH",1,1,24,0)
parameter will cause the API to return all entries from the IV ROOM FILE 
"PKG",197,22,1,"PAH",1,1,25,0)
(#59.5). Specifications for this API can be found in the Pharmacy
"PKG",197,22,1,"PAH",1,1,26,0)
Re-Engineering (PRE) API Manual. Reference to MEDICAL CENTER 
"PKG",197,22,1,"PAH",1,1,27,0)
DIVISION FILE (#40.8) is supported by DBIA 2269.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PSJ53P1")
0^2^B5710218^n/a
"RTN","PSJ53P1",1,0)
PSJ53P1 ;BIR/DB - API FOR INFORMATION FROM FILE 53.1; 5 Sep 03
"RTN","PSJ53P1",2,0)
 ;;5.0; INPATIENT MEDICATIONS ;**172**;16 DEC 97;Build 13
"RTN","PSJ53P1",3,0)
PSJ(PSJIEN,LIST) ;
"RTN","PSJ53P1",4,0)
 ;PSJIEN - INTERNAL ENTRY NUMBER [REQUIRED]
"RTN","PSJ53P1",5,0)
 ;LIST: Subscript name used in ^TMP global [REQUIRED]
"RTN","PSJ53P1",6,0)
 I $G(PSJIEN)="" Q
"RTN","PSJ53P1",7,0)
 I $G(LIST)="" Q
"RTN","PSJ53P1",8,0)
 K ^TMP($J,LIST),DA,^UTILITY("DIQ1",$J),DIQ
"RTN","PSJ53P1",9,0)
 I $G(PSJIEN)]"" S DA=PSJIEN I '$D(^PS(53.1,DA,0)) G RET0
"RTN","PSJ53P1",10,0)
 K ^UTILITY("DIQ1",$J),DIC S DIC=53.1,DR=".01;1;3;7;10;25;26;28;108;109",DIQ(0)="IE" D EN^DIQ1
"RTN","PSJ53P1",11,0)
 I '$D(^UTILITY("DIQ1",$J)) G RET0
"RTN","PSJ53P1",12,0)
 S ^TMP($J,LIST,0)=1,PSJDA=DA
"RTN","PSJ53P1",13,0)
 S PSJTXT=^UTILITY("DIQ1",$J,53.1,DA,.01,"E")
"RTN","PSJ53P1",14,0)
 F X=.01,1,3,7,10,26,28,25,108,109 S ^TMP($J,LIST,DA,X)=$G(^UTILITY("DIQ1",$J,53.1,DA,X,"I"))
"RTN","PSJ53P1",15,0)
 F X=1,3,7,10,28,25,108 S ^TMP($J,LIST,DA,X)=$S($G(^UTILITY("DIQ1",$J,53.1,DA,X,"E"))'="":^TMP($J,LIST,DA,X)_"^"_$G(^UTILITY("DIQ1",$J,53.1,DA,X,"E")),1:"")
"RTN","PSJ53P1",16,0)
 S ^TMP($J,LIST,"B",PSJTXT,DA)=""
"RTN","PSJ53P1",17,0)
 S PSJDRG=0 F  S PSJDRG=$O(^PS(53.1,PSJDA,1,PSJDRG)) Q:PSJDRG'>0  D
"RTN","PSJ53P1",18,0)
 .S DA=PSJDA,DIC=53.1,DR=2,DR(53.11)=".01;.02",DIQ(0)="IE",DA(53.11)=PSJDRG D EN^DIQ1 Q:'$D(^UTILITY("DIQ1",$J))
"RTN","PSJ53P1",19,0)
 .S ^TMP($J,LIST,PSJDA,"DDRUG",PSJDRG,.01)=$G(^UTILITY("DIQ1",$J,53.11,PSJDRG,.01,"I"))
"RTN","PSJ53P1",20,0)
 .S ^TMP($J,LIST,PSJDA,"DDRUG",PSJDRG,.02)=$G(^UTILITY("DIQ1",$J,53.11,PSJDRG,.02,"I"))
"RTN","PSJ53P1",21,0)
 .S ^TMP($J,LIST,PSJDA,"DDRUG",PSJDRG,.01)=$S($G(^UTILITY("DIQ1",$J,53.11,PSJDRG,.01,"E"))'="":^TMP($J,LIST,PSJDA,"DDRUG",PSJDRG,.01)_"^"_$G(^UTILITY("DIQ1",$J,53.11,PSJDRG,.01,"E")),1:"")
"RTN","PSJ53P1",22,0)
 .S ^TMP($J,LIST,PSJDA,"DDRUG",0)=$G(^TMP($J,LIST,PSJDA,"DDRUG",0))+1
"RTN","PSJ53P1",23,0)
 I '$D(^TMP($J,LIST,PSJDA,"DDRUG",0)) S ^TMP($J,LIST,PSJDA,"DDRUG",0)="-1^NO DATA FOUND"
"RTN","PSJ53P1",24,0)
 K PSJIEN,DA,X,PSJTXT,DR,DIC,^UTILITY("DIQ1",$J),DIQ,PSJDA,PSJDRG
"RTN","PSJ53P1",25,0)
 Q
"RTN","PSJ53P1",26,0)
RET0 ;return no data
"RTN","PSJ53P1",27,0)
 K PSJIEN,PSJTXT S ^TMP($J,LIST,0)="-1^NO DATA FOUND" Q
"RTN","PSJ59P5")
0^1^B11701444^B5365908
"RTN","PSJ59P5",1,0)
PSJ59P5 ;BIR/LDT,TSS - API FOR INFORMATION FROM FILE 59.5; 5 Sep 03
"RTN","PSJ59P5",2,0)
 ;;5.0; INPATIENT MEDICATIONS ;**163,172**;16 DEC 97;Build 13
"RTN","PSJ59P5",3,0)
 ;
"RTN","PSJ59P5",4,0)
 ;Reference to ^DG(40.8 - DBIA 2269
"RTN","PSJ59P5",5,0)
 ;
"RTN","PSJ59P5",6,0)
ALL(PSJIEN,PSJFT,LIST) ;
"RTN","PSJ59P5",7,0)
 ;PSJIEN - IEN of entry in 59.5.
"RTN","PSJ59P5",8,0)
 ;PSJFT - Free Text name in 59.5 or "??" for all names
"RTN","PSJ59P5",9,0)
 ;LIST - Subscript of ^TMP array in the form ^TMP($J,LIST,Field Number where Field Number is the
"RTN","PSJ59P5",10,0)
 ;       Field Number of the data piece being returned.
"RTN","PSJ59P5",11,0)
 ;Returns NAME field (#.01), DIVISION field (#.02), and INACTIVATION DATE field (#19) of IV ROOM file (#59.5).
"RTN","PSJ59P5",12,0)
 N DIERR,ZZERR,PSJ59P5,SCR,PSJ,PSJIEN2
"RTN","PSJ59P5",13,0)
 I $G(LIST)']"" Q
"RTN","PSJ59P5",14,0)
 K ^TMP($J,LIST)
"RTN","PSJ59P5",15,0)
 I +$G(PSJIEN)'>0,($G(PSJFT)']"") S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSJ59P5",16,0)
 I $G(PSJIEN)]"",+$G(PSJIEN)'>0 S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSJ59P5",17,0)
 I +$G(PSJIEN)>0 S PSJIEN2=$$FIND1^DIC(59.5,"","A","`"_PSJIEN,,,"") D
"RTN","PSJ59P5",18,0)
 .I +PSJIEN2'>0 S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSJ59P5",19,0)
 .S ^TMP($J,LIST,0)=1
"RTN","PSJ59P5",20,0)
 .D GETS^DIQ(59.5,+PSJIEN2,".01;.02;19","IE","PSJ59P5") S PSJ(1)=0
"RTN","PSJ59P5",21,0)
 .F  S PSJ(1)=$O(PSJ59P5(59.5,PSJ(1))) Q:'PSJ(1)  D SETALL
"RTN","PSJ59P5",22,0)
 I +$G(PSJIEN)'>0,$G(PSJFT)="??" D  Q
"RTN","PSJ59P5",23,0)
 .D LOOPDIR
"RTN","PSJ59P5",24,0)
 I +$G(PSJIEN)'>0,$G(PSJFT)]"" D
"RTN","PSJ59P5",25,0)
 .D FIND^DIC(59.5,,"@;.01;","QP",PSJFT,,"B",,,"")
"RTN","PSJ59P5",26,0)
 .I +$G(^TMP("DILIST",$J,0))=0 S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSJ59P5",27,0)
 .I +^TMP("DILIST",$J,0)>0 S ^TMP($J,LIST,0)=+^TMP("DILIST",$J,0) N PSJXLP S PSJXLP=0 F  S PSJXLP=$O(^TMP("DILIST",$J,PSJXLP)) Q:'PSJXLP  D
"RTN","PSJ59P5",28,0)
 ..S PSJIEN=+^TMP("DILIST",$J,PSJXLP,0) K PSJ59P5 D GETS^DIQ(59.5,+PSJIEN,".01;.02;19","IE","PSJ59P5") S PSJ(1)=0
"RTN","PSJ59P5",29,0)
 ..F  S PSJ(1)=$O(PSJ59P5(59.5,PSJ(1))) Q:'PSJ(1)  D SETALL
"RTN","PSJ59P5",30,0)
 K ^TMP("DILIST",$J)
"RTN","PSJ59P5",31,0)
 Q
"RTN","PSJ59P5",32,0)
 ;
"RTN","PSJ59P5",33,0)
LOOPDIR ;LOOP FOR A DIRECT READ.
"RTN","PSJ59P5",34,0)
 N PSJCNT S PSJCNT=0
"RTN","PSJ59P5",35,0)
 S PSJIEN2=0
"RTN","PSJ59P5",36,0)
 F  S PSJIEN2=$O(^PS(59.5,PSJIEN2)) Q:'PSJIEN2  D
"RTN","PSJ59P5",37,0)
 .D SETDIR
"RTN","PSJ59P5",38,0)
 D COUNT
"RTN","PSJ59P5",39,0)
 Q
"RTN","PSJ59P5",40,0)
 ;
"RTN","PSJ59P5",41,0)
SETALL ;
"RTN","PSJ59P5",42,0)
 S ^TMP($J,LIST,+PSJ(1),.01)=$G(PSJ59P5(59.5,PSJ(1),.01,"I"))
"RTN","PSJ59P5",43,0)
 S ^TMP($J,LIST,"B",$G(PSJ59P5(59.5,PSJ(1),.01,"I")),+PSJ(1))=""
"RTN","PSJ59P5",44,0)
 S ^TMP($J,LIST,+PSJ(1),.02)=$S($G(PSJ59P5(59.5,PSJ(1),.02,"I"))="":"",1:PSJ59P5(59.5,PSJ(1),.02,"I")_"^"_PSJ59P5(59.5,PSJ(1),.02,"E"))
"RTN","PSJ59P5",45,0)
 S ^TMP($J,LIST,+PSJ(1),19)=$S($G(PSJ59P5(59.5,PSJ(1),19,"I"))="":"",1:PSJ59P5(59.5,PSJ(1),19,"I")_"^"_PSJ59P5(59.5,PSJ(1),19,"E"))
"RTN","PSJ59P5",46,0)
 Q
"RTN","PSJ59P5",47,0)
 ;
"RTN","PSJ59P5",48,0)
SETDIR ;
"RTN","PSJ59P5",49,0)
 S ^TMP($J,LIST,+PSJIEN2,.01)=$P($G(^PS(59.5,PSJIEN2,0)),U,1)
"RTN","PSJ59P5",50,0)
 S ^TMP($J,LIST,"B",$P($G(^PS(59.5,PSJIEN2,0)),U,1),+PSJIEN2)=""
"RTN","PSJ59P5",51,0)
 S ^TMP($J,LIST,+PSJIEN2,.02)=$S($P($G(^PS(59.5,PSJIEN2,0)),U,4)="":"",1:$P($G(^PS(59.5,PSJIEN2,0)),U,4)_"^"_$P($G(^DG(40.8,$P($G(^PS(59.5,PSJIEN2,0)),U,4),0)),U,1))
"RTN","PSJ59P5",52,0)
 S ^TMP($J,LIST,+PSJIEN2,19)=$S($P($G(^PS(59.5,PSJIEN2,"I")),U,1)="":"",1:$P($G(^PS(59.5,PSJIEN2,"I")),U,1)_"^"_$$GETDATE($P($G(^PS(59.5,PSJIEN2,"I")),U,1)))
"RTN","PSJ59P5",53,0)
 S PSJCNT=PSJCNT+1
"RTN","PSJ59P5",54,0)
 Q
"RTN","PSJ59P5",55,0)
 ;
"RTN","PSJ59P5",56,0)
GETDATE(PSJDATE) ;RETURNS FORMATTED DATE
"RTN","PSJ59P5",57,0)
 N Y S Y=PSJDATE X ^DD("DD")
"RTN","PSJ59P5",58,0)
 Q $G(Y)
"RTN","PSJ59P5",59,0)
 ;
"RTN","PSJ59P5",60,0)
WRT(PSJDFN,PSJVAL,LIST) ;Sets Division field
"RTN","PSJ59P5",61,0)
 ;PSJDFN = IV ROOM (REQUIRED)
"RTN","PSJ59P5",62,0)
 ;PSJVAL = Division (REQUIRED)
"RTN","PSJ59P5",63,0)
 ;LIST: Subscript name used in ^TMP global [REQUIRED]
"RTN","PSJ59P5",64,0)
 I $G(PSJDFN)'>0 Q
"RTN","PSJ59P5",65,0)
 I $G(PSJVAL)="" Q
"RTN","PSJ59P5",66,0)
 I $G(LIST)="" Q
"RTN","PSJ59P5",67,0)
 I '$D(^PS(59.5,PSJDFN)) S ^TMP($J,LIST,0)=0 Q
"RTN","PSJ59P5",68,0)
 I $G(PSJVAL)'>0 S ^TMP($J,LIST,0)=0 Q
"RTN","PSJ59P5",69,0)
 I '$D(^DG(40.8,PSJVAL,0)) S ^TMP($J,LIST,0)=0 Q
"RTN","PSJ59P5",70,0)
 S $P(^PS(59.5,PSJDFN,0),"^",4)=PSJVAL,^TMP($J,LIST,0)=1 K PSJVAL,PSJDFN Q
"RTN","PSJ59P5",71,0)
COUNT ;
"RTN","PSJ59P5",72,0)
 I PSJCNT>0 S ^TMP($J,LIST,0)=PSJCNT
"RTN","PSJ59P5",73,0)
 ELSE  S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND"
"RTN","PSJ59P5",74,0)
 Q
"RTN","PSJ59P5",75,0)
 ;
"VER")
8.0^22.0
"BLD",6060,6)
^155
**END**
**END**

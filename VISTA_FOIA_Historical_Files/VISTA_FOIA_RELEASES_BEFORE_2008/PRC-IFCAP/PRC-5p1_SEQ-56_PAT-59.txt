$TXT Created by NIXON,TONY at MNTVBB.FO-WASH.MED.VA.GOV  (KIDS) on Tuesday, 06/17/03 at 17:15
=============================================================================
Run Date: JUL 30, 2003                     Designation: PRC*5.1*59
Package : PRC - IFCAP                          Priority: Mandatory
Version : 5.1        SEQ #56                    Status: Released
                  Compliance Date: AUG 30, 2003
=============================================================================

Associated patches: (v)PRC*5.1*21  <<= must be installed BEFORE `PRC*5.1*59'

Subject: NEW PO NUMBER DOES NOT DISPLAY & PROBLEM WITH VENDOR EDIT

Category: 
  - Routine

Description: 
============

 This patch addresses 2 NOIS(s).  The 1st NOIS deals with a type 12
 amendment for a purchase order.  In a type 12 amendment, a new purchase
 order is created, and the old purchase order is canceled.  Currently, if a
 type 12 amendment is performed, the new purchase order does not appear
 under its FCP in the Purchase Order Display [PRCH DISPLAY PO] option. In
 the second NOIS, users have difficulty editing the socioeconomic group for
 a vendor. 
  
  
 This patch addresses the following E3R(s):
 ------------------------------------------ 
 There are no E3R messages addressed in this patch.
  
  
 This patch addresses the following NOIS Message(s):
 ---------------------------------------------------
 1. LOM-0302-62930 New PO does not display.
 2. V13-0802-N1396 Problem editing the "Socioeconomic group" for a vendor.
  
  
 Overview of NOIS Message(s):
 ----------------------------
 1. LOM-0302-62930 New PO does not display.
  
 Problem:
 --------
 If a type 12 amendment is done on a purchase order, the new PO does not
 appear under its FCP in the Purchase Order Display [PRCH DISPLAY PO]
 option.
    
 User defined issue:
 -------------------
 The new purchase order did not appear under its FCP for the history of an
 item. 
  
 Resolution:
 -----------
 Modify routine PRCHAMYA. The following files are now updated with the new
 purchase order number:
  
    a. PROCUREMENT & ACCOUNTING TRANSACTIONS (#442)
    b. ITEM MASTER (#441)
  
  
 2. V13-0802-N1396 Problem editing the "Socioeconomic group" for a vendor.
  
 Problem:
 --------
 User had trouble editing the socioeconomic group for a vendor. If a
 vendor has multiple entries in the socioeconomic group, and the user
 enters the group to be edited, the group chosen does not display as a
 default to be edited.
  
 Resolution:
 -----------
 Modified these vendor input templates:
    1. PRCHVENDOR
    2. PRCHVENDOR1
    3. PRCHVENDORNOREACT 
   
 The socioeconomic group chosen now displays as a default to be edited.
  
    
 Developer Initiated Issue:
 --------------------------
 If a user does not enter a socioeconomic group for a vendor, the
 application does not provide a warning that this information is missing.
  
 Resolution:
 -----------
 If a user fails to provide a socioeconomic group for a vendor, they will
 see the following message:
  
    *** SOCIOECONOMIC GROUP IS MISSING ***
    Failure to enter required data may affect Purchase Order processing.
  
  
 Test Sites:
 -----------
 CENTRAL TEXAS HCS 
 CLARKSBURG, WV   
 LOMA LINDA, CA    
 PORTLAND, OR      
 ST CLOUD, MN     
 VA GREATER LOS ANGELES HCS 
  
  
  
 ===================== INSTALLATION INSTRUCTIONS ==========================
  
     If installed during the normal workday it is recommended that
     the following menu options (File #19) and all of their descendants
     be disabled to prevent possible conflicts while running the KIDS
     Install. Other VISTA users will not be affected.
  
         Combined A&MM Menus                     [PRCHUSER MASTER]  
         Control Point Official's Menu           [PRCSCP OFFICIAL]  
         Funds Distribution & Accounting Menu    [PRCF MASTER]      
         IFCAP Application Coordinator Menu      [PRCHUSER COORDINATOR]
         Purchase Card Menu                      [PRCH PURCHASE CARD MENU]
         Delivery Orders Menu                    [PRCH DELIVERY ORDER MENU] 
          
         Install Time - Less than 5 minutes 
  
    
   1.   LOAD TRANSPORT GLOBAL 
        ---------------------
        Choose the PackMan message containing this patch and invoke the 
        INSTALL/CHECK MESSAGE PackMan option.  
  
              
   2.   DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only) 
        -----------------------
        Disable routine mapping on all systems for the routines listed in 
        step 3 below.  
  
        NOTE:  If the routines included in this patch are not currently in 
        your mapped routine set, please skip this step.
  
   
   3.   COMPONENTS SENT WITH PATCH 
        --------------------------
        The following is a list of the routines included in this patch.  
        The second line of each of these routines now looks like: 
  
            ;;5.1;IFCAP;**[patch list]**;Oct 20, 2000
          
                       CHECK^XTSUMBLD results
  
        Routine       Before Patch     After Patch     Patch List 
        -------       ------------     -----------     ----------
        PRCHAMYA      12844047         14289740        6,21,59     
        PRCHE1        4472118          4853826         7,59
        PRCHFPDS      9435310          9546143         16,59
  
        Total number of routines =  3
  
  
        The following input template is included in this patch:
  
        Template Name            File            New/Modified
        -------------            ----            ------------
        PRCHVENDOR               440             Modified
        PRCHVENDOR1              440             Modified
        PRCHVENDORNOREACT        440             Modified
  
  
   4.   START UP KIDS 
        -------------
        Start up the Kernel Installation and Distribution System Menu 
        [XPD MAIN]: 
    
             Edits and Distribution ...  
             Utilities ...  
             Installation ...  
    
   Select Kernel Installation & Distribution System Option: INStallation 
                                                            ---
             Load a Distribution 
             Print Transport Global 
             Compare Transport Global to Current System 
             Verify Checksums in Transport Global 
             Install Package(s) 
             Restart Install of Package(s) 
             Unload a Distribution 
             Backup a Transport Global 
    
   Select Installation Option: 
  
    
   5.   Select Installation Option: 
        ---------------------------
        NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
               NAME, enter PRC*5.1*59):
      
        a.  Backup a Transport Global - This option will create a backup
            message of any routines exported with this patch. It will not
            backup any other changes such as DD's or templates.
        b.  Compare Transport Global to Current System - This option will
            allow you to view all changes that will be made when this patch
            is installed.  It compares all components of this patch
            (routines, DD's, templates, etc.).
        c.  Verify Checksums in Transport Global - This option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
  
      
   6.   Select Installation Option: Install Package(s) 
                                    ------------------
        **This is the step to start the installation of this KIDS patch: 
    
        a.  Choose the Install Package(s) option to start the patch install.
        b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
            YES// answer NO (unless otherwise indicated)
        c.  When prompted 'Want to DISABLE Scheduled Options, Menu 
            Options, and Protocols? YES//' answer YES.
        d.  When prompted 'Enter options you wish to mark as 'Out Of
            Order':'  Enter the following options:
  
         Combined A&MM Menus                     [PRCHUSER MASTER]  
         Control Point Official's Menu           [PRCSCP OFFICIAL]  
         Funds Distribution & Accounting Menu    [PRCF MASTER]      
         IFCAP Application Coordinator Menu      [PRCHUSER COORDINATOR]
         Purchase Card Menu                      [PRCH PURCHASE CARD MENU]
         Delivery Orders Menu                    [PRCH DELIVERY ORDER MENU] 
  
        e.  When prompted 'Enter protocols you wish to mark as 'Out Of
            Order':' press <return>
  
  
    7.  REBUILD MAPPED ROUTINE(S)   (DSM for Open VMS sites only)
        -------------------------
        Optional - Include the routines distributed with this patch in the
        mapped routine set.
  
        NOTE: This step is only necessary if you performed step 2 or if you
        wish to include the routines in your mapped set.

Routine Information:
====================

Routine Name:
  - PRCHAMYA

 * Update files 442 and 441 with the new PO number.        
 
         *** NEW CODE ***
         ;There has been a change in Purchase Order number.
         ;See NOIS LOM-0302-62930
         I $P(PRCJ,U,2)=32 D  ;
         . NEW CP,NEWPO
         . S NEWPO=$P($G(^PRC(443.6,PRCHPO,23)),U,4)
         . Q:NEWPO=""
         . S CP=$P(PRC("CP")," ")          ;Control point
        . S ^PRC(442,"D",VENDOR,NEWPO)="" ;Set up "D" X-ref for PO display
         . S ^PRC(442,"E",CP,NEWPO)=""     ;Set up "E" X-ref for PO display
         . S CP=PRC("SITE")_CP             ;Station & control point
         . ;
         . ;Get items from PO to setup item master file history
         . NEW CNT,ITEM,ITEMNUM
         . S ITEMNUM=0
         . F  S ITEMNUM=$O(^PRC(443.6,PRCHPO,2,ITEMNUM)) Q:'ITEMNUM  D
         . . S ITEM=$P(^PRC(443.6,PRCHPO,2,ITEMNUM,0),U,5)
        . . QUIT:ITEM=""
         . . S ^PRC(441,ITEM,4,CP,1,NEWPO,0)=NEWPO
         . . S ^PRC(441,ITEM,4,CP,1,"AC",9999999-PRC("PODT"),NEWPO)=""
         . . S $P(^PRC(441,ITEM,4,CP,1,0),U,3)=NEWPO
         . . S CNT=$P(^PRC(441,ITEM,4,CP,1,0),U,4)
         . . S $P(^PRC(441,ITEM,4,CP,1,0),U,4)=CNT+1

Routine Checksum:

Routine Name:
  - PRCHE1

 I $P($G(^PRC(440,DA,1.1,0)),"^",3)="" D
 . . KILL ^PRC(440,DA,1.1)
 . . W $C(7),!!,"*** SOCIOECONOMIC GROUP IS MISSING ***"
 . . W !,"Failure to enter required data may affect Purchase Order"
 . . W " processing",!

Routine Checksum:

Routine Name:
  - PRCHFPDS

 
 NEW CODE => I $P($G(^PRC(440,DA,1.1,0)),"^",3)="" G ERR

Routine Checksum:

=============================================================================
User Information:                               
Entered By  : NIXON,ANTOINE                  Date Entered : AUG 16, 2002
Completed By: ROBBINS,BRADLEY               Date Completed: JUL 30, 2003
Released By : COOPER,SAMANTHA               Date Released : JUL 30, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

$TXT Created by CHESNEY,CHRISTINE M at DEVCRN.FO-ALBANY.MED.VA.GOV  (KIDS) on Wednesday, 06/16/04 at 07:22
=============================================================================
Run Date: JUN 22, 2004                     Designation: DG*5.3*575
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #516                    Status: Released
                  Compliance Date: JUL 23, 2004
=============================================================================

Associated patches: (v)DG*5.3*179  <<= must be installed BEFORE `DG*5.3*575'
                    (v)DG*5.3*428  <<= must be installed BEFORE `DG*5.3*575'
                    (v)DG*5.3*477  <<= must be installed BEFORE `DG*5.3*575'
                    (v)DG*5.3*526  <<= must be installed BEFORE `DG*5.3*575'

Subject: TRIGGER UPDATES

Category: 
  - Routine
  - Data Dictionary

Description:
============

  This patch is in support of the MASTER PATIENT INDEX/PATIENT 
  DEMOGRAPHICS (MPI/PD) project.
  
  Issue 1: The Master Patient Index (MPI) database is now storing a 
  number of additional fields and needs to be notified when a change to 
  these fields happens in the PATIENT (#2) file for any patient with an 
  Integration Control Number (ICN). New FIELD INDEX type cross-
  references, AVAFC<field number>, have been added to the following 
  fields to support this notification:
          994   MULTIPLE BIRTH INDICATOR
          2.01,.01 ALIAS
          2.02,.01 RACE INFORMATION
          2.06,.01 ETHNICITY INFORMATION
  
  These new cross-references utilize the DG FIELD MONITOR tool that was 
  released in patch DG*5.3*527.  This tool will utilize the new 
  protocol VAFC MPIPD FIELD TRIGGER, which will create an entry in the 
  ADT/HL7 PIVOT (#391.71) file, as well as set the VAFCF variable to 
  capture which fields have been modified during an edit. These fields 
  will be included in the existing Health Level Seven (HL7) 2.4 
  messages generated by the MPI/PD applications.  Routine VAFCTR 
  supports this effort.
  
  Issue 2:  The field SERVICE CONNECTED PERCENTAGE (#.302) already had 
  an 'AVAFC302' cross-reference to monitor the editing of the field, 
  but it wasn't setting the VAFCF variable that adds .302 to the list 
  of fields edited. Cross-reference 'AVAFC302' has been updated to 
  correct this.
  
  Issue 3:  Routine VAFCQRY is being modified to create the HL7 ZPD 
  segment to carry the POW STATUS INDICATED? (#.525) field from the 
  PATIENT (#2) file when a request for demographics for a patient is 
  made.
  
  Issue 4:  Routine VAFCQRY1 is being modified to correct the value 
  passed in the HL7 PID segment for the MARITAL STATUS (#.05) field. 
  When the value in VistA is "S" ("SEPARATED"), the HL7 value should be   
  "A" ("SEPARATED").
  
  Issue 5:  Routine VAFHPIVT is being modified to utilize the variable 
  DGUSER for the person editing patient data instead of DUZ when this 
  routine is called from within the DG FIELD MONITOR tool.
  
  Issue 6:  The entry point BLDPID^VAFCQRY is being modified to support
  the passing of fields in the SEQ variable.  Currently even if field 
  numbers are passed in the SEQ variable, all fields are populated in the
  PID segment.  Once this change is in place, only fields passed in SEQ
  will be populated in the PID segment. Routines VAFCQRY1 and VAFCQRY3
  are modified to support this change.
  
  Post-Install Routine:
  =====================
  The post-install routine, DG575PST, uses the ^DIE("AF" cross-
  reference to find all compiled templates on fields that were edited 
  in the PATIENT (#2) file for MPI/PD and re-compiles the templates.
  NOTE:  The post-init routine will be removed after successful 
  completion of the patch installation.
  
  TEST SITES:
  ==========
  
  Alexandria (VSM/Cache)
  Battle Creek (Alpha/DSM)
  Big Spring (Cache/NT)
  Birmingham (Alpha/DSM)  
  Hines (Alpha/DSM)
  New Jersey (Alpha/DSM)
  Palo Alto (Alpha/DSM)
  Salisbury (Alpha/DSM)
   
  
  Routine Summary:
  ================
  The following is a list of the routine(s) included in this patch.  
  The second line of each of these routine(s) will look like:
  
  <TAB>;;5.3;Registration;**[Patch List]**;Aug 13, 1993
  CHECK^XTSUMBLD results:
  
  Routine       Before Patch       After Patch       Patch List
  --------      ------------       ------------      ----------
  DG575PST         NEW             9542417               575
           *** DG575PST is removed after patch installation
  VAFCQRY         5053739          4970292            428,575
  VAFCQRY1       24830265         24389962       428,474,477,575
  VAFCQRY3         NEW             7251538               575
  VAFCTR           NEW              711538               575
  VAFHPIVT        8660202          8705007            91,179,575
  
  INSTALLATION INSTRUCTIONS:
  ==========================
  
  This patch takes less than 3 minutes to install.  This patch should 
  be loaded during non-peak hours to minimize disruption to the users.
  
   1.  Users are allowed on the system during patch installation.
  
   2.  TaskMan does not need to be stopped or placed in a wait state. 
    
   3.  These routines are not usually mapped, so you will probably not
       have to disable mapping. 
   
   4.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu. [Note:
       TEXT PRINT/DISPLAY option in the PackMan menu will display the
       patch text only.]
  
   5.  From the Kernel Installation and Distribution System Menu, 
       select the Installation menu.
  
   6.  From this menu, you may elect to use the following options:
       a.  Backup a Transport Global - this option will create a backup
           message of any routines exported with the patch.  It will 
           NOT backup any other changes such as DDs or templates.
       b.  Compare Transport Global to Current System  - this option 
           will allow you to view all changes that will be made when 
           the patch is installed.  It compares all components of the 
           patch (routines, DDs, templates, etc.).
       c.  Verify Checksums in Transport Global - this option will 
           allow you to ensure the integrity of the routines that are 
           in the transport global.
       d.  Print Transport Global - this option will allow you to view 
           the components of the KIDS build.
  
   7.  Use the Install Package(s) option and select the package 
       DG*5.3*575.
   
   8.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
       YES//', respond No.
   
   9.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
       and Protocols? YES//', respond Yes and enter the following 
       option:
  
         10-10T Registration                   [DGRPT 10-10T REGISTRATION]
         Register a Patient                    [DG REGISTER PATIENT]
         Load/Edit Patient Data                [DG LOAD PATIENT DATA]
         Electronic 10-10EZ Processing         [EAS EZ 1010EZ PROCESSING]
         UPDATE BATCH JOB FOR HL7 v2.3         [VAFC BATCH UPDATE]
  
         Single Patient Initialization to MPI  [MPIF IND MPI LOAD]
         Inactivate Patient from MPI           [MPIF PAT INACT]
         Coordinating Master of Record (CMOR) Request    [MPIF CMOR MGR]
  
         MPI/PD Exception Handling             [RG EXCEPTION HANDLING]
  
  10.  If you unmapped routines in step 3, remap them after 
       installation has completed.

Routine Information:
====================

Routine Name:
  - VAFCQRY


Routine Checksum:

Routine Name:
  - DG575PST


Routine Checksum:

Routine Name:
  - VAFCQRY1


Routine Checksum:

Routine Name:
  - VAFCTR


Routine Checksum:

Routine Name:
  - VAFHPIVT


Routine Checksum:

Routine Name:
  - VAFCQRY3


Routine Checksum:

=============================================================================
User Information:
Entered By  : CHESNEY,CHRISTINE M           Date Entered  : DEC 10, 2003
Completed By: ALDERMAN,MATT S               Date Completed: JUN 22, 2004
Released By : BURTS,WANDA                   Date Released : JUN 22, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

$TXT Created by CHAN,ALAN at NXT.KERNEL.ISC-SF.VA.GOV  (KIDS) on MONDAY, 09/18/00 at 13:52
=============================================================================
Run Date: SEP 19, 2000                     Designation: HL*1.6*66
Package : HL - HEALTH LEVEL SEVEN            Priority: EMERGENCY
Version : 1.6        SEQ #57                    Status: Released
=============================================================================

Associated patches: (v)HL*1.6*51   <<= must be installed BEFORE `HL*1.6*66'
                    (v)HL*1.6*59   <<= must be installed BEFORE `HL*1.6*66'
                    (v)HL*1.6*63   <<= must be installed BEFORE `HL*1.6*66'
                    (v)HL*1.6*64   <<= must be installed BEFORE `HL*1.6*66'
                    (v)HL*1.6*65   <<= must be installed BEFORE `HL*1.6*66'
                    (v)XU*8*168    <<= must be installed BEFORE `HL*1.6*66'

Subject: Undefined in HLSUB, use new Mail API

Category: 
  - Routine

Description: 
============

  
  *** PLEASE NOTE THE FOLLOWING:  ***
  
      This patch requires patch XU*8.0*168 HL7 date fix.
      Also, this patch corrects the interpretation of midnight when
      converting FileMan to HL7 date/time formats and vice versa.
      In addition, the Vista HL7 Functions $$HLDATE^HLFNC(X,Y) and
      $$FMDATE^HLFNC(X) now call the Kernel functions $$FMTHL7^XLFDT(X)
      and $$HL7TFM^XLFDT(X) respectively.  Furthermore, ZULU offsets
      are added to HL7 date/time formats whenever time is included.
  
      Also, please install this patch prior to installing patch RG*1*4.
      This patch is needed by the CPRS Remote Data Views.
      If RG*1*4 is already installed, install this patch as soon
      as posssible.
  
      Future patch XM*7.1*51, which will change the domain names for
      all sites which have requested it, will not be released until all
      sites have installed HL*1.6*66.
  
   **********************************
  
 This patch addresses the following issues:
  1. ISA-0600-10916  Correct problem with HLDATE^HLFNC when midnight is
     used.
  2. CHS-0499-43088  Corrects a problem with Mailman Logical Links when
     mail group has no members. Updated to use new Mailman API's and send a
     message to the HL7 mail group.
  3. ISF-0600-61155  Prevents an UNDEFINED when the subscription control
     number is not passed into GET^HLSUB.
  4. ISB-0600-32294  Prevents the loss of the 'AC' cross reference
     on pending messages.
  5. WIM-0700-20527     PROBLEM ON SYSTEMS LINK MONITOR.  Patch HL*1.6*65
     introduced some new enhancements to the HL7 System Link Monitor.
     However, this patch also introduced a new bug that prevented users
     from backing up a screen when in 'Screened' mode.  This patch corrects
     this problem with the monitor.
  6. General variable cleanup in routine HLTP3 associated with Dynamic
     Addressing and Enhanced Headers.  This patch fixes the
     Invalid Message Control ID in MSA Segment that was encountered with
     patch RG*1*4 CPRS REMOTE DATA VIEWS.
  7. Related NOISes:
     ELP-0700-72334     Undefined Variable @ SF+14~HLTPCK2A
     LAS-0700-62279     MESSAGE ERROR FROM NEW ORLEANS
     BIR-0700-32233     Undefined Variable
     MUR-0800-30482     <UNDEF(ECODE)>SF+14^HLTPCK2A
     PRE-0800-60365     $ZE= <UNDEFINED>SF+14^HLTPCK2A
     This patch fixes the undefined variable at SF+14^HLTPCK2A.  This was
     first encountered after the staff at New Orleans VAMC changed their
     domain entry to include the '.MED' in front of the '.VA.GOV' suffix.
     Afterwards, sites receiving CIRN/HL7 messages from New Orleans would
     encounter this error.  In addition, this patch changes the way that it
     performs a FileMan lookup of the Domain Name.  Previously, it was only
     based only on the .01/Name field.  After this patch is installed, the
     lookup process will work with either the Name or Synonym.
  8. Related NOISes:
     AUG-0800-32024     LINK HAS NEGATIVE NUMBERS
     AUG-0800-31661     HL7 INTERFACE NOT WORKING
     AUS-0800-N0079     Negative Numbers on Monitor
     ISB-0800-30179     Entries in the 'AC' x-ref but with a status of 3
     This patch fixes the problem where sites encountered negative
     numbers in the 'TO SEND' column of the HL7 System Link Monitor.
     These negative numbers were a result of the HL7 code inadvertently
     changing the status of messages to 'SUCCESSFULLY COMPLETED'
     in the wrong file.  Although the 'AC' cross-reference existed
     for these messages, the status of 'SUCCESSFULLY COMPLETED' prevented
     these message from being delivered.
     In addition, the use of $$REPROC^HLUTIL(IEN, routine) extrinsic
     function after this patch is installed, will update the
     DATE/TIME PROCESSED field(#100) in the HL7 MESSAGE ADMINISTRATION
     file (#870).
  
 Routine Information:
 ====================
 The following routines are included in this patch.  The second line of
 each of these routines now looks like:
  ;;1.6;HEALTH LEVEL SEVEN;<patchlist>;JUL 17,1995
  
                  Checksum
  Routine         Old         New            2nd Line
  ========     ========     ========     =====================     
  HLCSMM        2836421      2312930     **17,35,57,66**
  HLCSMON      11036657     11192960     **34,40,48,49,65,66**
  HLCSTCP2     11197019     11334736     **19,43,49,57,63,64,66**
  HLFNC         5785780      5669016     **38,42,51,66**
  HLMA          7929932      7962943     **19,43,58,63,66**
  HLSUB         5552075      5558527     **14,57,58,59,66**
  HLTP3        14649677     14792516     **19,43,57,58,59,66**
  HLTP31        1651062      1770560     **57,58,66**
  HLTPCK2A     15611547     16050022     **19,57,59,66**
  HLUTIL        3175738      3187029     **36,19,57,64,66**
  
  
  List of preceding patches: 51, 58, 59, 63, 64, 65
  Sites should use CHECK^XTSUMBLD to verify checksums.
  
 External patch dependency:  XU*8.0*168    HL7 date fix.
  
  
 Installation Instructions: 
 ==========================
   1.  Users are allowed to be on the system during the installation.  
  
   2.  DSM SITES: Review your mapped set.  If any of the routines listed in
       the Routine Summary section are mapped, they should be removed from 
       the mapped set at this time.  
  
   3.  Shutdown all Logical Links and incoming and outgoing filers, and
       the Link Manager. Use the options:
  
         Filer and Link Management Options -> 
             SA     Stop All Messaging Background Processes
             LM     TCP/IP Link Manager Start/Stop
  
       For DSM sites ONLY, disabled all HL7 UCX Services 
       for this installation.
  
   4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
       option will load the KIDS package onto your system.  
  
   5.  The patch has now been loaded into a Transport global on your 
       system. You now need to use KIDS to install the Transport global.  
       On the KIDS menu, under the 'Installation' menu, use the following 
       options: 
  
          2 Verify Checksums in Transport Global 
          3 Print Transport Global 
          4 Compare Transport Global to Current System 
          5 Backup a Transport Global 
          6 Install Package(s) 
              INSTALL NAME: HL*1.6*66
                            =========
  
         Answer 'NO' to 'Want KIDS to INHIBIT LOGONS during the install?'.
  
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
          and Protocols?'.
  
   6.  Startup all Logical Links and incoming and outgoing filers. Use the 
  
         Filer and Link Management Options ->
             RA     Restart/Start All Links and Filers
         (Note that links that do not have "autostart" enabled will need to
         be restarted manually)
  
       For DSM sites ONLY, if you previously disabled an HL7 UCX Service
       for this installation, you may now enable it.
  
   7.  DSM Sites: Rebuild your mapped set if necessary.
  
   8.  Start Link Manager using the option: "TCP/IP
         Link Manager Start/Stop."

Routine Information:
====================

Routine Name:
  - HLSUB


Routine Checksum:

Routine Name:
  - HLFNC


Routine Checksum:

Routine Name:
  - HLCSMM


Routine Checksum:

Routine Name:
  - HLCSMON


Routine Checksum:

Routine Name:
  - HLCSTCP2


Routine Checksum:

Routine Name:
  - HLTP3


Routine Checksum:

Routine Name:
  - HLMA


Routine Checksum:

Routine Name:
  - HLTPCK2A


Routine Checksum:

Routine Name:
  - HLTP31


Routine Checksum:

Routine Name:
  - HLUTIL


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : CLEMENS,JOHN                   Date Entered : JUL 03, 2000
Completed By: CHAN,ALAN                     Date Completed: SEP 18, 2000
Released By : SINGH,GURBIR                  Date Released : SEP 19, 2000
=============================================================================


Packman Mail Message:
=====================

$END TXT

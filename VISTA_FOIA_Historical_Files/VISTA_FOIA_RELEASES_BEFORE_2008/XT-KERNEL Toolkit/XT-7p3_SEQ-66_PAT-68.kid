Released XT*7.3*68 SEQ #66
Extracted from mail message
**KIDS**:XT*7.3*68^

**INSTALL NAME**
XT*7.3*68
"BLD",755,0)
XT*7.3*68^TOOLKIT^0^3031224^y
"BLD",755,1,0)
^^2^2^3031023^
"BLD",755,1,1,0)
Please refer to the Description in the FORUM Patch Module for details.
"BLD",755,1,2,0)
Patch XT*7.3*68
"BLD",755,4,0)
^9.64PA^^
"BLD",755,"KRN",0)
^9.67PA^8989.52^19
"BLD",755,"KRN",.4,0)
.4
"BLD",755,"KRN",.401,0)
.401
"BLD",755,"KRN",.402,0)
.402
"BLD",755,"KRN",.403,0)
.403
"BLD",755,"KRN",.5,0)
.5
"BLD",755,"KRN",.84,0)
.84
"BLD",755,"KRN",3.6,0)
3.6
"BLD",755,"KRN",3.8,0)
3.8
"BLD",755,"KRN",9.2,0)
9.2
"BLD",755,"KRN",9.8,0)
9.8
"BLD",755,"KRN",9.8,"NM",0)
^9.68A^7^7
"BLD",755,"KRN",9.8,"NM",1,0)
XINDEX^^0^B21133883
"BLD",755,"KRN",9.8,"NM",2,0)
XINDX1^^0^B15760349
"BLD",755,"KRN",9.8,"NM",3,0)
XINDX3^^0^B11306466
"BLD",755,"KRN",9.8,"NM",4,0)
XINDX4^^0^B10469833
"BLD",755,"KRN",9.8,"NM",5,0)
XINDX9^^0^B12499095
"BLD",755,"KRN",9.8,"NM",6,0)
XINDX10^^0^B25398590
"BLD",755,"KRN",9.8,"NM",7,0)
XINDX7^^0^B11008474
"BLD",755,"KRN",9.8,"NM","B","XINDEX",1)

"BLD",755,"KRN",9.8,"NM","B","XINDX1",2)

"BLD",755,"KRN",9.8,"NM","B","XINDX10",6)

"BLD",755,"KRN",9.8,"NM","B","XINDX3",3)

"BLD",755,"KRN",9.8,"NM","B","XINDX4",4)

"BLD",755,"KRN",9.8,"NM","B","XINDX7",7)

"BLD",755,"KRN",9.8,"NM","B","XINDX9",5)

"BLD",755,"KRN",19,0)
19
"BLD",755,"KRN",19.1,0)
19.1
"BLD",755,"KRN",101,0)
101
"BLD",755,"KRN",409.61,0)
409.61
"BLD",755,"KRN",771,0)
771
"BLD",755,"KRN",870,0)
870
"BLD",755,"KRN",8989.51,0)
8989.51
"BLD",755,"KRN",8989.52,0)
8989.52
"BLD",755,"KRN",8994,0)
8994
"BLD",755,"KRN","B",.4,.4)

"BLD",755,"KRN","B",.401,.401)

"BLD",755,"KRN","B",.402,.402)

"BLD",755,"KRN","B",.403,.403)

"BLD",755,"KRN","B",.5,.5)

"BLD",755,"KRN","B",.84,.84)

"BLD",755,"KRN","B",3.6,3.6)

"BLD",755,"KRN","B",3.8,3.8)

"BLD",755,"KRN","B",9.2,9.2)

"BLD",755,"KRN","B",9.8,9.8)

"BLD",755,"KRN","B",19,19)

"BLD",755,"KRN","B",19.1,19.1)

"BLD",755,"KRN","B",101,101)

"BLD",755,"KRN","B",409.61,409.61)

"BLD",755,"KRN","B",771,771)

"BLD",755,"KRN","B",870,870)

"BLD",755,"KRN","B",8989.51,8989.51)

"BLD",755,"KRN","B",8989.52,8989.52)

"BLD",755,"KRN","B",8994,8994)

"BLD",755,"QUES",0)
^9.62^^
"BLD",755,"REQB",0)
^9.611^1^1
"BLD",755,"REQB",1,0)
XT*7.3*66^2
"BLD",755,"REQB","B","XT*7.3*66",1)

"MBREQ")
0
"PKG",6,-1)
1^1
"PKG",6,0)
TOOLKIT^XT^PROGRAMMERS OPTIONS, MULTI. TERM LOOKUP^
"PKG",6,20,0)
^9.402P^^
"PKG",6,22,0)
^9.49I^1^1
"PKG",6,22,1,0)
7.3^2961029^2970513^2
"PKG",6,22,1,"PAH",1,0)
68^3031224^2
"PKG",6,22,1,"PAH",1,1,0)
^^2^2^3031224
"PKG",6,22,1,"PAH",1,1,1,0)
Please refer to the Description in the FORUM Patch Module for details.
"PKG",6,22,1,"PAH",1,1,2,0)
Patch XT*7.3*68
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
7
"RTN","XINDEX")
0^1^B21133883
"RTN","XINDEX",1,0)
XINDEX ;ISC/REL,GFT,GRK,RWF - INDEX & CROSS-REFERENCE ;10/23/2003  17:35
"RTN","XINDEX",2,0)
 ;;7.3;TOOLKIT;**20,27,48,61,66,68**;Apr 25, 1995
"RTN","XINDEX",3,0)
 G ^XINDX6
"RTN","XINDEX",4,0)
SEP F I=1:1 S CH=$E(LIN,I) D QUOTE:CH=Q Q:" "[CH
"RTN","XINDEX",5,0)
 S ARG=$E(LIN,1,I-1) S:CH=" " I=I+1 S LIN=$E(LIN,I,999) Q
"RTN","XINDEX",6,0)
QUOTE F I=I+1:1 S CH=$E(LIN,I) Q:CH=""!(CH=Q)
"RTN","XINDEX",7,0)
 Q:CH]""  S ERR=6 G ^XINDX1
"RTN","XINDEX",8,0)
ALIVE ;enter here from taskman
"RTN","XINDEX",9,0)
 D SETUP^XINDX7 ;Get ready to process
"RTN","XINDEX",10,0)
A2 S RTN=$O(^UTILITY($J,RTN)) G ^XINDX5:RTN=""
"RTN","XINDEX",11,0)
 S INDLC=(RTN?1"|"1.4L.NP) D LOAD:'INDLC
"RTN","XINDEX",12,0)
 I $D(ZTQUEUED),$$S^%ZTLOAD S RTN="~",IND("QUIT")=1,ZTSTOP=1 G A2
"RTN","XINDEX",13,0)
 I 'INDDS,INDLC W !!?10,"Data Dictionaries",! S INDDS=1
"RTN","XINDEX",14,0)
 D BEG
"RTN","XINDEX",15,0)
 G A2
"RTN","XINDEX",16,0)
 ;
"RTN","XINDEX",17,0)
LOAD S X=RTN,XCNP=0,DIF="^UTILITY("_$J_",1,RTN,0," X ^%ZOSF("TEST") Q:'$T  X ^%ZOSF("LOAD") S ^UTILITY($J,1,RTN,0,0)=XCNP-1
"RTN","XINDEX",18,0)
 Q
"RTN","XINDEX",19,0)
BEG ;
"RTN","XINDEX",20,0)
 S %=INDLC*5 W:$X+10+%>IOM ! W RTN,$J("",10+%-$L(RTN))
"RTN","XINDEX",21,0)
 S (IND("DO"),IND("SZT"),IND("SZC"),LABO)=0,LC=$G(^UTILITY($J,1,RTN,0,0))
"RTN","XINDEX",22,0)
 I LC="" W !,">>>Routine '",RTN,"' not found <<<",! Q
"RTN","XINDEX",23,0)
 S TXT="",LAB=$P($P(^UTILITY($J,1,RTN,0,1,0)," "),"(") I RTN'=LAB D E^XINDX1(17)
"RTN","XINDEX",24,0)
 I 'INDLC,LC>2 S LIN=$G(^UTILITY($J,1,RTN,0,2,0)) D
"RTN","XINDEX",25,0)
 . I $P(LIN,";",3)'?1.2N1"."1.2N.1(1"T",1"V").2N D E^XINDX1(44)
"RTN","XINDEX",26,0)
 . I $L(INP(11)) X INP(11) ;Version number check
"RTN","XINDEX",27,0)
 . I $L(INP(12)) X INP(12) ;Patch number check
"RTN","XINDEX",28,0)
B5 F TXT=1:1:LC S LIN=^UTILITY($J,1,RTN,0,TXT,0),LN=$L(LIN),IND("SZT")=IND("SZT")+LN+2 D LN,ST
"RTN","XINDEX",29,0)
 S LAB="",LABO=0,TXT=0,^UTILITY($J,1,RTN,0)=IND("SZT")_"^"_LC_"^"_IND("SZC")
"RTN","XINDEX",30,0)
 I IND("SZT")>INP("MAX"),'INDLC S ERR=35,ERR(1)=IND("SZT") D ^XINDX1
"RTN","XINDEX",31,0)
 D POSTRTN
"RTN","XINDEX",32,0)
 Q
"RTN","XINDEX",33,0)
 ;Proccess one line, LN = Length, LIN = Line.
"RTN","XINDEX",34,0)
LN K V S (ARG,GRB,IND("COM"))="",X=$P(LIN," ") I '$L(X) S LABO=LABO+1 G CD
"RTN","XINDEX",35,0)
 S (IND("COM"),LAB)=$P(X,"("),ARG=$P($P(X,"(",2),")"),LABO=0,IND("PP")=X?1.8E1"(".E1")"
"RTN","XINDEX",36,0)
 D:$L(ARG) NE^XINDX3 ;Process formal parameters as New list.
"RTN","XINDEX",37,0)
 I 'INDLC,'$$VT^XINDX2(LAB) D E^XINDX1($S(LAB=$$CASE^XINDX52(LAB):11,1:55)) ;Check for lowercase tags
"RTN","XINDEX",38,0)
 I $D(^UTILITY($J,1,RTN,"T",LAB)) D E^XINDX1(15) G CD
"RTN","XINDEX",39,0)
 S ^UTILITY($J,1,RTN,"T",LAB)=""
"RTN","XINDEX",40,0)
CD D:LN>245 E^XINDX1(19) D:LIN'?1.ANP E^XINDX1(18)
"RTN","XINDEX",41,0)
 S I=0,LIN=$P(LIN," ",2,999),IND("LCC")=1,ERR=42 G:LIN="" ^XINDX1 ;Watch the scope of I.
"RTN","XINDEX",42,0)
 I " ."[$E(LIN) D  S X=$L($E(LIN,1,I),".")-1,LIN=$E(LIN,I,999)
"RTN","XINDEX",43,0)
 . F I=1:1:245 Q:". "'[$E(LIN,I)
"RTN","XINDEX",44,0)
 . Q
"RTN","XINDEX",45,0)
 D:'I&$G(IND("DO1")) E^XINDX1(51) S IND("DO1")=0 S:'I IND("DO")=0 I I D:X>IND("DO") E^XINDX1(51) S IND("DO")=X
"RTN","XINDEX",46,0)
 ;Process commands on line.
"RTN","XINDEX",47,0)
EE I LIN="" D ^XINDX2 Q
"RTN","XINDEX",48,0)
 S COM=$E(LIN),GK="",ARG=""
"RTN","XINDEX",49,0)
 I COM=";" S:$E(LIN,2)'=";" IND("SZC")=IND("SZC")+$L(LIN) S LIN="" G EE
"RTN","XINDEX",50,0)
 I COM=" " S ERR=$S(LIN?1." ":13,1:0),LIN=$S(ERR:"",1:$E(LIN,2,999)) D:ERR ^XINDX1 G EE
"RTN","XINDEX",51,0)
 D SEP
"RTN","XINDEX",52,0)
 S CM=$P(ARG,":",1),POST=$P(ARG,":",2,999),IND("COM")=IND("COM")_$C(9)_COM,ERR=48 D:ARG[":"&(POST']"") ^XINDX1 S:POST]"" GRB=GRB_$C(9)_POST,IND("COM")=IND("COM")_":"
"RTN","XINDEX",53,0)
 I CM?.E1L.E S CM=$$CASE^XINDX52(CM),COM=$E(CM) I IND("LCC") S IND("LCC")=0 D E^XINDX1(47)
"RTN","XINDEX",54,0)
 I CM="" D E^XINDX1(21) G EE ;Missing command
"RTN","XINDEX",55,0)
 S CX=$G(IND("CMD",CM)) I CX="" D  G:CX="" EE
"RTN","XINDEX",56,0)
 . I $E(CM)="Z" S CX="^Z" Q  ;Proccess Z commands
"RTN","XINDEX",57,0)
 . D E^XINDX1(1) S LIN="" Q
"RTN","XINDEX",58,0)
 S CX=$P(CX,"^",2,9)
"RTN","XINDEX",59,0)
 D SEP I '$L(LIN),CH=" " D E^XINDX1(13) ;trailing space
"RTN","XINDEX",60,0)
 I ARG="","CGJMORSUWX"[COM S ERR=49 G ^XINDX1
"RTN","XINDEX",61,0)
 I CX>0 D E^XINDX1(CX) S CX=""
"RTN","XINDEX",62,0)
 D:$L(CX) @CX S:ARG'="" GRB=GRB_$C(9)_ARG G EE
"RTN","XINDEX",63,0)
B S ERR=25 G ^XINDX1
"RTN","XINDEX",64,0)
C S ERR=29 G ^XINDX1
"RTN","XINDEX",65,0)
D G DG1^XINDX4
"RTN","XINDEX",66,0)
E Q:ARG=""  S ERR=7 G ^XINDX1
"RTN","XINDEX",67,0)
F G:ARG]"" FR^XINDX4 Q
"RTN","XINDEX",68,0)
G G DG^XINDX4
"RTN","XINDEX",69,0)
H Q:ARG'=""  S ERR=32 G ^XINDX1
"RTN","XINDEX",70,0)
J S ERR=36,ARG="" G ^XINDX1
"RTN","XINDEX",71,0)
K S ERR=$S(ARG?1"(".E:22,ARG?." ":23,1:0) D:ERR ^XINDX1
"RTN","XINDEX",72,0)
 G KL^XINDX3
"RTN","XINDEX",73,0)
L G LO^XINDX4
"RTN","XINDEX",74,0)
M G S^XINDX3
"RTN","XINDEX",75,0)
N G NE^XINDX3
"RTN","XINDEX",76,0)
O S ERR=34 D ^XINDX1,O^XINDX3 Q
"RTN","XINDEX",77,0)
Q Q:ARG=""  G Q^XINDX4
"RTN","XINDEX",78,0)
R S RDTIME=0 G RD^XINDX3
"RTN","XINDEX",79,0)
S G S^XINDX3
"RTN","XINDEX",80,0)
U S ARG=$P(ARG,":") Q
"RTN","XINDEX",81,0)
V S ARG="",ERR=20 G ^XINDX1
"RTN","XINDEX",82,0)
W G WR^XINDX4
"RTN","XINDEX",83,0)
X G XE^XINDX4
"RTN","XINDEX",84,0)
Z S ERR=2 D ^XINDX1 G ZC^XINDX4
"RTN","XINDEX",85,0)
 ;Save off items from line.
"RTN","XINDEX",86,0)
ST S R=LAB_$S(LABO:"+"_LABO,1:"")
"RTN","XINDEX",87,0)
 ;Local variable, Global, Marked Items, Naked global, Internal ref, eXternal ref., Tag ref.
"RTN","XINDEX",88,0)
 S LOC="" F  S LOC=$O(V(LOC)),S="" Q:LOC=""  F  S S=$O(V(LOC,S)) Q:S=""  D SET
"RTN","XINDEX",89,0)
 S ^UTILITY($J,1,RTN,"COM",TXT)=IND("COM")
"RTN","XINDEX",90,0)
 Q
"RTN","XINDEX",91,0)
SET I V(LOC,S)]"" F %="!","~" I V(LOC,S)[%,$G(^UTILITY($J,1,RTN,LOC,S))'[% S ^(S)=$G(^(S))_%
"RTN","XINDEX",92,0)
 S %=0
"RTN","XINDEX",93,0)
SE2 S ARG=$G(^UTILITY($J,1,RTN,LOC,S,%)) I $L(ARG)>230 S %=%+1 G SE2
"RTN","XINDEX",94,0)
 S ^UTILITY($J,1,RTN,LOC,S,%)=ARG_R_V(LOC,S)_","
"RTN","XINDEX",95,0)
 Q
"RTN","XINDEX",96,0)
POSTRTN ;Do more overall checking
"RTN","XINDEX",97,0)
 N V S LAB="",LABO=0
"RTN","XINDEX",98,0)
 F  S LAB=$O(^UTILITY($J,1,RTN,"I",LAB)),L=LAB Q:LAB=""  D
"RTN","XINDEX",99,0)
 . Q:$E(L,1,2)="@("
"RTN","XINDEX",100,0)
 . S:$E(L,1,2)="$$" L=$E(L,3,99) I L]"",'$D(^UTILITY($J,1,RTN,"T",$P(L,"+",1))) D E^XINDX1(14)
"RTN","XINDEX",101,0)
 . Q
"RTN","XINDEX",102,0)
 S LAB="" I 'INDLC F  S LAB=$O(^UTILITY($J,1,RTN,"T",LAB)) Q:LAB=""  D
"RTN","XINDEX",103,0)
 . D:'$$VT^XINDX2(LAB) E^XINDX1(37)
"RTN","XINDEX",104,0)
 . Q
"RTN","XINDEX",105,0)
 S LAB="" F  S LAB=$O(^UTILITY($J,1,RTN,"L",LAB)) Q:LAB=""  D
"RTN","XINDEX",106,0)
 . D VLNF^XINDX3($P(LAB,"("))
"RTN","XINDEX",107,0)
 . Q
"RTN","XINDEX",108,0)
 Q
"RTN","XINDX1")
0^2^B15760349
"RTN","XINDX1",1,0)
XINDX1 ;ISC/REL,GRK,RWF - ERROR ROUTINE ;10/30/2003  11:00
"RTN","XINDX1",2,0)
 ;;7.3;TOOLKIT;**20,61,66,68**;Apr 25, 1995
"RTN","XINDX1",3,0)
A N %,%1 ;TXT is the line of the error.
"RTN","XINDX1",4,0)
 S ERTX=LAB_$S(LABO:"+"_LABO,1:""),ERTX=$E(ERTX_"           ",1,11),%1=$T(ERROR+ERR),ERTX=ERTX_"  "_$S(ERR:$P(%1,";",4,9),1:ERR)
"RTN","XINDX1",5,0)
 I ERTX["|" F %=1:1 S ERTX=$P(ERTX,"|")_$S($D(ERR(%)):ERR(%),1:"??")_$P(ERTX,"|",%+1,99) Q:ERTX'["|"
"RTN","XINDX1",6,0)
B I $P(%1,";",3)]"" D  Q:%1]""  ;Don't flag kernel doing kernel.
"RTN","XINDX1",7,0)
 . S %1=$P(%1,";",3)
"RTN","XINDX1",8,0)
 . F  Q:RTN[$P(%1,",")  S %1=$P(%1,",",2,99) ;quit if RTN[%1 or null.
"RTN","XINDX1",9,0)
 . Q
"RTN","XINDX1",10,0)
 I ERR=17,$E(RTN)'="%",$E(LAB)="%" Q  ;Don't flag %RTN w/o %.
"RTN","XINDX1",11,0)
 S %=$G(^UTILITY($J,1,RTN,"E",0))+1,^(0)=%,^(%)=TXT_$C(9)_ERTX Q
"RTN","XINDX1",12,0)
 ;
"RTN","XINDX1",13,0)
E(ERR) ;
"RTN","XINDX1",14,0)
 G A Q
"RTN","XINDX1",15,0)
 ;F = Fatal, S = Standard, W = Warning, I = Info
"RTN","XINDX1",16,0)
ERROR ;
"RTN","XINDX1",17,0)
1 ;;;F - UNDEFINED COMMAND (rest of line not checked).
"RTN","XINDX1",18,0)
2 ;;ZTER;F - Non-standard (Undefined) 'Z' command.
"RTN","XINDX1",19,0)
3 ;;XTRMON;F - Undefined Function.
"RTN","XINDX1",20,0)
4 ;;;F - Undefined Special Variable.
"RTN","XINDX1",21,0)
5 ;;;F - Unmatched Parenthesis.
"RTN","XINDX1",22,0)
6 ;;;F - Unmatched Quotation Marks.
"RTN","XINDX1",23,0)
7 ;;;F - ELSE Command followed by only one space.
"RTN","XINDX1",24,0)
8 ;;;F - FOR Command did not contain '='.
"RTN","XINDX1",25,0)
9 ;;;I - QUIT Command followed by only one space.
"RTN","XINDX1",26,0)
10 ;;;F - Unrecognized argument in SET command.
"RTN","XINDX1",27,0)
11 ;;;W - Invalid local variable name.
"RTN","XINDX1",28,0)
12 ;;;W - Invalid global variable name.
"RTN","XINDX1",29,0)
13 ;;;W - Blank(s) at end of line.
"RTN","XINDX1",30,0)
14 ;;;F - Missing LABEL, REFERENCED in this routine.
"RTN","XINDX1",31,0)
15 ;;;W - Duplicate label. (M57)
"RTN","XINDX1",32,0)
16 ;;;F - Error in pattern code.
"RTN","XINDX1",33,0)
17 ;;;W - First line tag NOT routine name.
"RTN","XINDX1",34,0)
18 ;;;W - Line contains a CONTROL (non-graphic) character.
"RTN","XINDX1",35,0)
19 ;;;S - Line is longer than 245 bytes.
"RTN","XINDX1",36,0)
20 ;;;S - View command used.
"RTN","XINDX1",37,0)
21 ;;;F - General Syntax Error.
"RTN","XINDX1",38,0)
22 ;;;S - Exclusive Kill.
"RTN","XINDX1",39,0)
23 ;;;S - Unargumented Kill.
"RTN","XINDX1",40,0)
24 ;;;S - Kill of an unsubscripted global.
"RTN","XINDX1",41,0)
25 ;;;S - Break command used.
"RTN","XINDX1",42,0)
26 ;;;S - Exclusive or Unargumented NEW command.
"RTN","XINDX1",43,0)
27 ;;;S - $View function used.
"RTN","XINDX1",44,0)
28 ;;ZOSV;S - Non-standard $Z special variable used.
"RTN","XINDX1",45,0)
29 ;;ZIS;S - 'Close' command should be invoked through 'D ^%ZISC'.
"RTN","XINDX1",46,0)
30 ;;;S - TAG+OFFSET syntax.
"RTN","XINDX1",47,0)
31 ;;ZOSV;S - Non-standard $Z function used.
"RTN","XINDX1",48,0)
32 ;;;S - 'HALT' command should be invoked through 'G ^XUSCLEAN'.
"RTN","XINDX1",49,0)
33 ;;;S - Read command doesn't have a timeout.
"RTN","XINDX1",50,0)
34 ;;ZIS;S - 'OPEN' command should be invoked through ^%ZIS.
"RTN","XINDX1",51,0)
35 ;;;S - Routine exceeds SACC maximum size of 10000 (|).
"RTN","XINDX1",52,0)
36 ;;ZTM;S - Should use 'TASKMAN' instead of 'JOB' command.
"RTN","XINDX1",53,0)
37 ;;;F - Tag is not valid.
"RTN","XINDX1",54,0)
38 ;;;F - Call to this |
"RTN","XINDX1",55,0)
39 ;;ZIS,XUS,XUP;S - Kill of a protected variable (|).
"RTN","XINDX1",56,0)
40 ;;;S - Space where a command should be.
"RTN","XINDX1",57,0)
41 ;;;I - Star or pound READ used.
"RTN","XINDX1",58,0)
42 ;;;W - Null line (no commands or comment).
"RTN","XINDX1",59,0)
43 ;;;F - Invalid or wrong number of arguments to a function.
"RTN","XINDX1",60,0)
44 ;;;S - Version number not found on 2nd line of routine.
"RTN","XINDX1",61,0)
45 ;;ZTM,ZTLO,ZIS,XUTM;S - Set to a '%' global.
"RTN","XINDX1",62,0)
46 ;;;F - Quoted string not followed by a separator.
"RTN","XINDX1",63,0)
47 ;;;S - Lowercase command(s) used in line.
"RTN","XINDX1",64,0)
48 ;;;F - Missing argument to a command post-conditional.
"RTN","XINDX1",65,0)
49 ;;;F - Command missing an argument.
"RTN","XINDX1",66,0)
50 ;;ZTM;S - Extended reference.
"RTN","XINDX1",67,0)
51 ;;;F - Block structure mismatch
"RTN","XINDX1",68,0)
52 ;;;F - Reference to routine '^|'. That isn't in this UCI.
"RTN","XINDX1",69,0)
53 ;;;F - Bad Number
"RTN","XINDX1",70,0)
54 ;;XG;S - Access to SSVN's restricted to Kernel.
"RTN","XINDX1",71,0)
55 ;;;S - Violates VA programming standards.
"RTN","XINDX1",72,0)
56 ;;;S - Patch number '|' missing from second line.
"RTN","XINDX1",73,0)
57 ;;;S - Lower/Mixed case Variable name used.
"RTN","XINDX10")
0^6^B25398590
"RTN","XINDX10",1,0)
XINDX10 ;ISC/GRK - assemble DD executable code ;11/12/2002  11:40
"RTN","XINDX10",2,0)
 ;;7.3;TOOLKIT;**20,27,66,68**;Apr 25, 1995
"RTN","XINDX10",3,0)
ASK ;Ask for Build file, Package file.
"RTN","XINDX10",4,0)
 N X,Y,P,V,RN S DA=0,INP(11)=""
"RTN","XINDX10",5,0)
 K DIC I $D(^DD(9.6,0)) S Y=$$BUILD^XTRUTL1
"RTN","XINDX10",6,0)
 I Y>0 D  Q
"RTN","XINDX10",7,0)
 . S INP(10)=9.6,DA=+Y,X=$P(Y,"^",2),V=$$VER^XTRUTL1(X)
"RTN","XINDX10",8,0)
 . S INP(11)="I $P(LIN,"";"",3)'["""_V_""" D E^XINDX1(44)",INP(11.1)=V
"RTN","XINDX10",9,0)
 . I $L($P(X,"*",3)) S INP(12)="I $P(LIN,"";"",5)'?.E1P1"""_$P(X,"*",3)_"""1P.E S ERR=56,ERR(1)=INP(12.1) D E^XINDX1(.ERR)",INP(12.1)=$P(X,"*",3)
"RTN","XINDX10",10,0)
 . Q
"RTN","XINDX10",11,0)
 K DIC I $D(^DD(9.4,0)) S DIC="^DIC(9.4,",DIC(0)="AEQMZ" D ^DIC S INP(10)=9.4,DA=+Y Q
"RTN","XINDX10",12,0)
 ;
"RTN","XINDX10",13,0)
START I INP(10)=9.4 G PKG
"RTN","XINDX10",14,0)
 ;Get routines and other code from BUILD.
"RTN","XINDX10",15,0)
 W !,"The BUILD file Data Dictionaries are being processed.",!
"RTN","XINDX10",16,0)
 F J=0:0 S J=$O(^XPD(9.6,DA,4,J)) Q:J'>0  I $D(^(J,0)) S INDFN=+^(0),INDRN="|dd"_INDFN D XPD
"RTN","XINDX10",17,0)
 G NEXT
"RTN","XINDX10",18,0)
PKG W !,"The package file Data Dictionaries are being processed.",!
"RTN","XINDX10",19,0)
 F J=0:0 S J=$O(^DIC(9.4,DA,4,J)) Q:J'>0  I $D(^(J,0)) S INDFN=+^(0),INDRN="|dd"_INDFN,(INDF,INDL)=0 D INSERT
"RTN","XINDX10",20,0)
NEXT D ^XINDX11,REMCOMP:'INP(9) K A,B,C,C9,G,H,INDD,INDEL,INDF,INDFN,INDID,INDL,INDN,INDRN,INDSB,INDX,INDXN,INDXRF,DA,DIC,J,INDLC,INDC
"RTN","XINDX10",21,0)
 Q
"RTN","XINDX10",22,0)
XPD ;Check if Full/Partial DD
"RTN","XINDX10",23,0)
 N IND1,IND222,J2,J3 S IND222=$G(^XPD(9.6,DA,4,J,222))
"RTN","XINDX10",24,0)
 S (INDF,INDL)=0 I $P(IND222,"^",3)="f" K IND222 D INSERT Q
"RTN","XINDX10",25,0)
 ;Each entry at the J2 level is a new file/sub-file.
"RTN","XINDX10",26,0)
 F J2=0:0 S J2=$O(^XPD(9.6,DA,4,J,2,J2)) Q:J2'>0  S IND1=^(J2,0) D
"RTN","XINDX10",27,0)
 . S INDFN=J2,INDRN="|dd"_INDFN,INDLC=0 Q:'$$HDR()
"RTN","XINDX10",28,0)
 . ;Each J3 is a field in the file.
"RTN","XINDX10",29,0)
 . F J3=0:0 S J3=$O(^XPD(9.6,DA,4,J,2,J2,1,J3)) Q:J3'>0  S INDFN=J2,INDF=J3,INDL=0 D STRIP
"RTN","XINDX10",30,0)
 . S ^UTILITY($J,1,INDRN,0,0)=INDLC
"RTN","XINDX10",31,0)
 . Q
"RTN","XINDX10",32,0)
 Q
"RTN","XINDX10",33,0)
HDR() ;Display Header and start faux routine build
"RTN","XINDX10",34,0)
 I '$D(^DD(INDFN)) W !,"File # ",INDFN," is missing !",$C(7) Q 0
"RTN","XINDX10",35,0)
 S ^UTILITY($J,INDRN)="",NRO=NRO+1 W !,INDFN," ",$O(^DD(INDFN,0,"NM",0))
"RTN","XINDX10",36,0)
 S INDLC=0,INDC=INDRN_" ;"_$S($D(IND222):"Partial ",1:"")_"DD of the "_$O(^DD(INDFN,0,"NM",0))_$S(INDL:" sub-",1:" ")_"file"_$S(INDL:" of the "_$O(^DD(INDFN(1),0,"NM",0))_" (#"_INDFN(1)_") file.",1:"."),INDX="" D ADD
"RTN","XINDX10",37,0)
 Q 1
"RTN","XINDX10",38,0)
INSERT ;Find executable code in this DD
"RTN","XINDX10",39,0)
 Q:'$$HDR
"RTN","XINDX10",40,0)
ID S INDID=-1 F G=0:0 S INDID=$O(^DD(INDFN,0,"ID",INDID)) Q:INDID=""  I $D(^(INDID))#2 S INDC="ID"_INDID_" ; IDENTIFIER CODE FOR "_INDID S INDX=$S(^(INDID)]"":^(INDID),1:"Q") D ADD
"RTN","XINDX10",41,0)
W I $D(^DD(INDFN,0,"W"))#2 S INDX=^("W"),INDC="W ; 'W' code ??" D ADD
"RTN","XINDX10",42,0)
FLD S INDF=$O(^DD(INDFN,INDF)) I INDF>0 D STRIP W "." G FLD
"RTN","XINDX10",43,0)
 S ^UTILITY($J,1,INDRN,0,0)=INDLC Q
"RTN","XINDX10",44,0)
STRIP ;
"RTN","XINDX10",45,0)
 S A=$P(^DD(INDFN,INDF,0),"^",2) I A D PUSH,INSERT,POP Q
"RTN","XINDX10",46,0)
 I A'["W",A'["S" S INDX=$P(^(0),"^",5,99),INDC=INDF_" ; "_$P(^(0),"^",1) D ADD
"RTN","XINDX10",47,0)
 I $D(^DD(INDFN,INDF,2))#2 S INDC=INDF_"OT ; OUTPUT TRANSFORM CODE",INDX=^(2) D ADD
"RTN","XINDX10",48,0)
 I $D(^DD(INDFN,INDF,4))#2 S INDC=INDF_"HELP ; EXECUTABLE HELP CODE",INDX=^(4) D ADD
"RTN","XINDX10",49,0)
 I $D(^DD(INDFN,INDF,12)) S INDC=INDF_"SCR ; "_$E(^(12),1,220) S INDX=$S($D(^(12.1))#2:^(12.1),1:"Q") D ADD
"RTN","XINDX10",50,0)
 I $D(^DD(INDFN,INDF,7.5))#2 S INDC=INDF_"TPL ; TRANSFORM DONE PRIOR TO THE DIC LOOK-UP",INDX=^(7.5) D ADD
"RTN","XINDX10",51,0)
 I $D(^DD(INDFN,INDF,"AX"))#2 S INDC=INDF_"AX ; EXECUTABLE AUDIT CHECK CODE",INDX=^("AX") D ADD
"RTN","XINDX10",52,0)
 F INDEL=9.2:.1:9.9 I $D(^DD(INDFN,INDF,INDEL))#2 S INDC=INDF_"OF"_INDEL_" ; OVERFLOW CODE",INDX=^(INDEL) D ADD
"RTN","XINDX10",53,0)
 S INDEL="" F  S INDEL=$O(^DD(INDFN,INDF,"DEL",INDEL)) Q:INDEL=""  I $D(^(INDEL,0))#2 S INDC=INDF_"DEL"_INDEL_" ; DELETE PROTECTION CODE",INDX=^(0) D ADD
"RTN","XINDX10",54,0)
 S INDEL="" F G=0:0 S INDEL=$O(^DD(INDFN,INDF,"LAYGO",INDEL)) Q:INDEL=""  I $D(^(INDEL,0))#2 S INDC=INDF_"LAYGO"_INDEL_" ; LAYGO CHECK CODE",INDX=^(0) D ADD
"RTN","XINDX10",55,0)
 F INDXRF=0:0 S INDXRF=$O(^DD(INDFN,INDF,1,INDXRF)) Q:INDXRF'>0  S C=$P(^(INDXRF,0),"^",2) F G=0:0 S G=$O(^DD(INDFN,INDF,1,INDXRF,G)) Q:G'>0  D XREFS
"RTN","XINDX10",56,0)
 Q
"RTN","XINDX10",57,0)
XREFS Q:('$D(^(G))#2)!(G=3)  ;Node 3 is don't delete comment.
"RTN","XINDX10",58,0)
 S INDC=INDF_"XRF"_INDXRF_$S(G=1:"S",G=2:"K",1:"n"_G)_" ; "_$S(G<2:"SET",G<3:"KILL",1:"OVERFLOW")_" LOGIC FOR '"_$S(C]"":C,1:INDXRF)_"' XREF",INDX=^(G) D ADD
"RTN","XINDX10",59,0)
 Q
"RTN","XINDX10",60,0)
ADD ;Put code in UTILITY for processing
"RTN","XINDX10",61,0)
 S INDLC=INDLC+1,^UTILITY($J,1,INDRN,0,INDLC,0)=INDC I INDX]"" S INDLC=INDLC+1,^UTILITY($J,1,INDRN,0,INDLC,0)=" "_INDX
"RTN","XINDX10",62,0)
 Q
"RTN","XINDX10",63,0)
PUSH S INDL=INDL+1 F A="INDFN","INDF","INDLC","INDRN" S @(A_"(INDL)")=@A
"RTN","XINDX10",64,0)
 S INDFN=+$P(^DD(INDFN,INDF,0),"^",2),INDRN="|dd"_INDFN,(INDLC,INDF)=0
"RTN","XINDX10",65,0)
 Q
"RTN","XINDX10",66,0)
POP F A="INDFN","INDF","INDLC","INDRN" S @A=@(A_"(INDL)")
"RTN","XINDX10",67,0)
 S INDL=INDL-1 Q
"RTN","XINDX10",68,0)
REMCOMP ;Remove compiled template routines from selected list
"RTN","XINDX10",69,0)
 S %="|dd"
"RTN","XINDX10",70,0)
 F J=1:1 S %=$O(^UTILITY($J,%)) Q:%'?1"|dd".NP  S INDFN=+$E(%,4,999) I '$D(^DD(INDFN,0,"UP")) F F="^DIE(","^DIPT(" S F1=F_"""F"_INDFN_""",",%1="" F J=0:0 S %1=$O(@(F1_"%1)")) Q:%1=""  F %2=0:0 S %2=$O(@(F1_"%1,%2)")) Q:%2'>0  D P
"RTN","XINDX10",71,0)
 Q
"RTN","XINDX10",72,0)
P I $D(@(F_"%2,0)")) S R=$E($S($D(^("ROU")):^("ROU"),$D(^("ROUOLD")):^("ROUOLD"),1:""),2,999)
"RTN","XINDX10",73,0)
 Q:R=""
"RTN","XINDX10",74,0)
 I $D(^UTILITY($J,R)) K ^UTILITY($J,R)
"RTN","XINDX10",75,0)
 S RN=R F J=0:0 S RN=$O(^UTILITY($J,RN)) Q:RN=""!(RN'?@("1"""_R_"""1N.N"))  K ^UTILITY($J,RN)
"RTN","XINDX10",76,0)
 Q
"RTN","XINDX3")
0^3^B11306466
"RTN","XINDX3",1,0)
XINDX3 ;ISC/REL,GRK,RWF - PROCESS MERGE/SET/READ/KILL/NEW/OPEN COMMANDS ;10/23/2003  17:43
"RTN","XINDX3",2,0)
 ;;7.3;TOOLKIT;**20,27,61,68**;Apr 25, 1995
"RTN","XINDX3",3,0)
PEEK S Y=$G(LV(LV,LI+1)) Q
"RTN","XINDX3",4,0)
PEEK2 S Y=$G(LV(LV,LI+2)) Q
"RTN","XINDX3",5,0)
INC2 S LI=LI+1 ;Drop into INC
"RTN","XINDX3",6,0)
INC S LI=LI+1,S=$G(LV(LV,LI)),S1=$G(LV(LV,LI+1)),CH=$E(S) G ERR:$A(S)=10 Q
"RTN","XINDX3",7,0)
DN S LI(LV)=LI,LI(LV,1)=AC,LV=LV+1,LI=LI(LV),AC=NOA
"RTN","XINDX3",8,0)
 Q
"RTN","XINDX3",9,0)
UP ;Inc LI as we save to skip the $C(10).
"RTN","XINDX3",10,0)
 D PEEK S:$A(Y)=10 LI=LI+1 S LI(LV)=LI,LV=LV-1,LI=LI(LV),AC=LI(LV,1) Q
"RTN","XINDX3",11,0)
PEEKDN S Y=$G(LV(LV+1,LI(LV+1)+1)) Q
"RTN","XINDX3",12,0)
FIND F Y=LI:1:AC Q:L[$G(LV(LV,Y))
"RTN","XINDX3",13,0)
ERR D E^XINDX1(43) S (S,S1,CH)="" Q
"RTN","XINDX3",14,0)
 Q
"RTN","XINDX3",15,0)
 Q
"RTN","XINDX3",16,0)
S S ERR=10 G:ARG="" ^XINDX1 S STR=ARG,ARG="",RHS=0 D ^XINDX9
"RTN","XINDX3",17,0)
S2 S GK="" D INC I S="" D:'RHS E^XINDX1(10) Q
"RTN","XINDX3",18,0)
 I CH="," S RHS=0 G S2
"RTN","XINDX3",19,0)
 I CH="=" S RHS=1 D:","[S1 E^XINDX1(10) G S2
"RTN","XINDX3",20,0)
 I CH="$",'RHS D  D:% E^XINDX1(10)
"RTN","XINDX3",21,0)
 . S %=1
"RTN","XINDX3",22,0)
 . I "$E$P$X$Y"[$E(S,1,2) S %=0 Q
"RTN","XINDX3",23,0)
 . I "$EC$ET$QS"[$E(S,1,3) S %=0 Q
"RTN","XINDX3",24,0)
 . I "$ZE$ZT"[$E(S,1,3) D E^XINDX1(28) S %=0 Q  ;Should not be used
"RTN","XINDX3",25,0)
 . Q
"RTN","XINDX3",26,0)
 I CH="^" D FL G S2
"RTN","XINDX3",27,0)
 I CH="@" S Y=$$ASM(LV,LI,",") S:Y'["=" RHS=1 D INC,ARG^XINDX2 G S2
"RTN","XINDX3",28,0)
 I CH="(" D MULT G S2
"RTN","XINDX3",29,0)
 D FL G S2
"RTN","XINDX3",30,0)
MULT D INC S NOA=S I S'>0 S ERR=5 G ^XINDX1
"RTN","XINDX3",31,0)
 D DN S AC=AC+LI F  Q:AC'>LI  S:'RHS GK="*" D INC,ARG^XINDX2
"RTN","XINDX3",32,0)
 D UP Q
"RTN","XINDX3",33,0)
FL ;
"RTN","XINDX3",34,0)
 S:'RHS GK="*" D ARG^XINDX2
"RTN","XINDX3",35,0)
 Q
"RTN","XINDX3",36,0)
VLNF(X) ;Drop into VLN
"RTN","XINDX3",37,0)
VLN S ERR=0
"RTN","XINDX3",38,0)
 Q:X?1.8UN
"RTN","XINDX3",39,0)
 Q:X?1"%".7UN
"RTN","XINDX3",40,0)
 I X'?1.8AN,X'?1"%".7AN D E^XINDX1(11)
"RTN","XINDX3",41,0)
 D E^XINDX1(57) ;Must contain lowercase
"RTN","XINDX3",42,0)
 ;I X'?1.8UN,X'?1.8LN,X'?1"%".7UN,X'?1"%".7LN D E^XINDX1(ERR)
"RTN","XINDX3",43,0)
 Q
"RTN","XINDX3",44,0)
VGN S ERR=0 I X'?1.8UN,X'?1"%".7UN D E^XINDX1(12)
"RTN","XINDX3",45,0)
 Q
"RTN","XINDX3",46,0)
KL ;Process KILL
"RTN","XINDX3",47,0)
 S STR=ARG,ARG(1)=ARG,ARG="" D ^XINDX9
"RTN","XINDX3",48,0)
A D INC Q:S=""  G A:CH="," S LOC="L" D @$S(CH="@":"KL1",CH="^":"KL2",CH="(":"KL4",1:"KL3") G A
"RTN","XINDX3",49,0)
KL1 D INC,ARG^XINDX2 Q
"RTN","XINDX3",50,0)
KL2 S GK="!"
"RTN","XINDX3",51,0)
 I S1'="(" S ERR=24 D ^XINDX1
"RTN","XINDX3",52,0)
 G ARG^XINDX2
"RTN","XINDX3",53,0)
KL3 I "^DT^DTIME^DUZ^IOST^IOM^U^"[("^"_S_"^") S ERR=39,ERR(1)=S D ^XINDX1
"RTN","XINDX3",54,0)
 I "IO"=S D:S1="(" PEEKDN S ERR=39,ERR(1)=S_$S(S1["(":S1_Y_")",1:"") D:S1'="(" ^XINDX1 I S1="(",("QC"'[$E(Y,2)) D ^XINDX1
"RTN","XINDX3",55,0)
KL5 S GK="!" D ARG^XINDX2 Q  ;KILL SUBS
"RTN","XINDX3",56,0)
 Q
"RTN","XINDX3",57,0)
KL4 S NOA=S1 D DN,ARGS^XINDX2,UP,INC2 Q
"RTN","XINDX3",58,0)
NE ;NEW
"RTN","XINDX3",59,0)
 S ERR=$S("("[$E(ARG):26,1:0) I ERR G ^XINDX1 ;look for null or (
"RTN","XINDX3",60,0)
 S STR=ARG D ^XINDX9
"RTN","XINDX3",61,0)
N2 D INC Q:S=""  G N2:CH="," I CH?1P,("%@()"'[CH)&("$E"'[$E(S,1,2)) D E^XINDX1(11) G N2
"RTN","XINDX3",62,0)
 S GK="~" D ARG^XINDX2 G N2
"RTN","XINDX3",63,0)
 ;
"RTN","XINDX3",64,0)
RD S STR=ARG D ^XINDX9 S ARG=""
"RTN","XINDX3",65,0)
RD1 D INC Q:S=""
"RTN","XINDX3",66,0)
 ;I (CH="!")!(CH=",")!(CH=Q)!(CH="#") G RD1
"RTN","XINDX3",67,0)
 ;I CH="^" S ERR=11 D ^XINDX1
"RTN","XINDX3",68,0)
 I '((CH="%")!(CH?1A)!(CH="*")) D RD3 G RD1
"RTN","XINDX3",69,0)
 S Y=$$ASM(LV,LI,",") I Y'[":" S ERR=33,RDTIME=1 D ^XINDX1
"RTN","XINDX3",70,0)
 D RD2 G RD1
"RTN","XINDX3",71,0)
RD2 Q:","[CH
"RTN","XINDX3",72,0)
 I "*#"[CH D E^XINDX1(41)
"RTN","XINDX3",73,0)
 I "#:"[CH D INC,ARG^XINDX2,INC G RD2
"RTN","XINDX3",74,0)
 I (CH="%")!(CH?1A) S LOC="L",GK="*" D ARG^XINDX2,INC G RD2
"RTN","XINDX3",75,0)
 D INC G RD2
"RTN","XINDX3",76,0)
RD3 Q:","[CH  I "!#?"[CH D INC G RD3
"RTN","XINDX3",77,0)
 I (CH="%")!(CH?1A)!(CH="@") D ARG^XINDX2,INC G RD3
"RTN","XINDX3",78,0)
 Q
"RTN","XINDX3",79,0)
O S STR=ARG,AC=99 D ^XINDX9,INC S ARG="" I S["@" D ARGS^XINDX2 Q
"RTN","XINDX3",80,0)
 D ARG^XINDX2,INC D  D INC,ARGS^XINDX2 Q
"RTN","XINDX3",81,0)
 . F  D INC Q:":"[S
"RTN","XINDX3",82,0)
 . Q
"RTN","XINDX3",83,0)
 Q
"RTN","XINDX3",84,0)
ERRCP S ERR=5 D ^XINDX1 Q
"RTN","XINDX3",85,0)
ST ;
"RTN","XINDX3",86,0)
 S:'$D(V(LOC,S)) V(LOC,S)="" S:V(LOC,S)'[GK V(LOC,S)=V(LOC,S)_GK,GK="" Q
"RTN","XINDX3",87,0)
 Q
"RTN","XINDX3",88,0)
ASM(WL,SI,L,SEP) ;
"RTN","XINDX3",89,0)
 N %,CH,Y S SEP=$G(SEP),Y="" F %=SI:1 S CH=$G(LV(WL,%)) Q:L[CH  S Y=Y_SEP_CH
"RTN","XINDX3",90,0)
 Q Y
"RTN","XINDX4")
0^4^B10469833
"RTN","XINDX4",1,0)
XINDX4 ;ISC/REL,GRK - PROCESS DO, GO TO, WRITE & FOR COMMANDS ;10/30/2003  15:07
"RTN","XINDX4",2,0)
 ;;7.3;TOOLKIT;**20,61,68**;Apr 25, 1995
"RTN","XINDX4",3,0)
DG1 I ARG="" S:'IND("DO1") IND("DO")=IND("DO")+1,IND("DO1")=1 Q
"RTN","XINDX4",4,0)
DG S (LBL,PGM,OFF,PRM)="",S=1,L="+^:," S:$E(ARG,1,2)="@^" S=3
"RTN","XINDX4",5,0)
 D LOOP S LBL=$E(ARG,1,I-1)
"RTN","XINDX4",6,0)
 I CH="+" S (J,S)=I+1,ERR=30 D ^XINDX1:$E(ARG)'="@" S:$E(ARG,I)="^" S=I+1 D LOOP S OFF=$E(ARG,J,I-1) I OFF'?.N S GRB=GRB_$C(9)_OFF
"RTN","XINDX4",7,0)
 I CH="^" S S=I+1 D LOOP S PGM=$E(ARG,S,I-1)
"RTN","XINDX4",8,0)
 I CH=":" S S=I+1,L="," D LOOP S S=$E(ARG,S,I-1) I S'="" S GRB=GRB_$C(9)_S
"RTN","XINDX4",9,0)
 S ARG=$E(ARG,I+1,999)
"RTN","XINDX4",10,0)
 I $E(LBL)="@" S GRB=GRB_$C(9)_$E(LBL,2,999),LBL="@("
"RTN","XINDX4",11,0)
 I $E(PGM)="@" S GRB=GRB_$C(9)_$E(PGM,2,999),PGM="@("
"RTN","XINDX4",12,0)
 I LBL[")" S PRM=$$INSIDE(LBL,"(",")"),LBL=$P(LBL,"(")
"RTN","XINDX4",13,0)
 I PGM[")" S PRM=$$INSIDE(PGM,"(",")"),PGM=$P(PGM,"(")
"RTN","XINDX4",14,0)
 I PRM]"" S GRB=GRB_$C(9)_$$PRUNE($$CNG(PRM,",,",","),",") ;strip null parameters
"RTN","XINDX4",15,0)
 S:OFF'="" LBL=LBL_"+"_OFF
"RTN","XINDX4",16,0)
 S S="",LOC="I" I PGM'="" S S=PGM_" ",LOC="X"
"RTN","XINDX4",17,0)
 S:LBL_PGM["&" LOC="X"
"RTN","XINDX4",18,0)
 S:LBL'="" S=S_LBL I S'="" D ST
"RTN","XINDX4",19,0)
 G:ARG'="" DG K LBL,PGM,OFF,PRM Q
"RTN","XINDX4",20,0)
LOOP F I=S:1 S CH=$E(ARG,I) D QUOTE:CH=Q,PAREN:CH="(",ERRCP:CH=")" Q:L[CH
"RTN","XINDX4",21,0)
 Q
"RTN","XINDX4",22,0)
PAREN S PC=1
"RTN","XINDX4",23,0)
 F I=I+1:1 S CH=$E(ARG,I) Q:PC=0!(CH="")  I "()"""[CH D QUOTE:CH=Q S PC=PC+$S("("[CH:1,")"[CH:-1,1:0)
"RTN","XINDX4",24,0)
 S ERR=5 D:PC ^XINDX1 Q
"RTN","XINDX4",25,0)
QUOTE F I=I+1:1 S CH=$E(ARG,I) Q:CH=""!(CH=Q)
"RTN","XINDX4",26,0)
 I CH="" S ERR=6 G ^XINDX1
"RTN","XINDX4",27,0)
 Q
"RTN","XINDX4",28,0)
ST S R=$F(S,"(") S:R>1 S=$E(S,1,R-1) S:"IX"[LOC IND("COM")=IND("COM")_","_S
"RTN","XINDX4",29,0)
 S:'$D(V(LOC,S)) V(LOC,S)="" S:LOC="L"&(V(LOC,S)'["*") V(LOC,S)=V(LOC,S)_"*" Q
"RTN","XINDX4",30,0)
 Q
"RTN","XINDX4",31,0)
FR Q:$E(ARG,1)="@"  S S=2,L="=" D LOOP I CH="" S ERR=8 G ^XINDX1
"RTN","XINDX4",32,0)
 S GK="*",STR=$E(ARG,1,I-1),ARG=$E(ARG,I+1,999) D ARGG^XINDX2
"RTN","XINDX4",33,0)
 Q
"RTN","XINDX4",34,0)
WR N S0,WR S STR=ARG,WR="#!,",S0="" ;Need to handle /controlmnemonic
"RTN","XINDX4",35,0)
 D ^XINDX9 S ARG=""
"RTN","XINDX4",36,0)
 F  D INC^XINDX2 Q:S=""  D  S S0=S
"RTN","XINDX4",37,0)
 . I S="?" D:","[S1 E^XINDX1(49) Q
"RTN","XINDX4",38,0)
 . I S="!",WR'[$E(S0),S1="!" D E^XINDX1(49) Q
"RTN","XINDX4",39,0)
 . D ARG^XINDX2
"RTN","XINDX4",40,0)
 . Q
"RTN","XINDX4",41,0)
 Q
"RTN","XINDX4",42,0)
ERRCP S ERR=5 D ^XINDX1 Q
"RTN","XINDX4",43,0)
SET S ARG=$E(ARG,1,I-1)_","_$E(ARG,I+1,999) Q
"RTN","XINDX4",44,0)
XE S GRB=GRB_$C(9)_ARG,ARG="" Q
"RTN","XINDX4",45,0)
REP S L=",:",S=1 D LOOP I CH=":" S ARG=$E(ARG,I+1,999),L="," D LOOP
"RTN","XINDX4",46,0)
 S ARG=$E(ARG,I+1,999) Q:ARG=""  G REP
"RTN","XINDX4",47,0)
 ;
"RTN","XINDX4",48,0)
ZC I "ILRS"'[$E(CM,2)!($E(CM,2)="") S ARG="" Q  ;Zcommands
"RTN","XINDX4",49,0)
 S COM=$E(CM,1,2) Q:CM="ZI"  G:CM="ZR" ZR
"RTN","XINDX4",50,0)
U1 S L=",",S=1 D LOOP S S=$E(ARG,1,I-1),ARG=$E(ARG,I+1,999)
"RTN","XINDX4",51,0)
 S:$E(S,1)="@" S=$E(S,2,999),GRB=GRB_$C(9)_S Q:ARG=""  G U1
"RTN","XINDX4",52,0)
ZR Q:ARG=""  S L=":,",S=1 D LOOP S S=$E(ARG,1,I-1),ARG=$E(ARG,I+1,999)
"RTN","XINDX4",53,0)
 I $E(S,1)="@" S GRB=GRB_$C(9)_S G ZR
"RTN","XINDX4",54,0)
 S:S["+" GRB=GRB_$C(9)_$P(S,"+",2,999) G ZR
"RTN","XINDX4",55,0)
LO S GRB=GRB_$C(9)_ARG,ARG=""
"RTN","XINDX4",56,0)
 Q
"RTN","XINDX4",57,0)
Q ;QUIT
"RTN","XINDX4",58,0)
 ;D SEP(LIN," ",.S) I $E(S(1),1)=";" S S=0 ;Check for comments
"RTN","XINDX4",59,0)
 ;I IND("PP") S ERR=$S($E(ARG)=";":49,ARG?1A&(S>1):9,1:0) D:ERR ^XINDX1 Q
"RTN","XINDX4",60,0)
 ;Q:($L(ARG)>1&(S<2))!(S=0)  ;
"RTN","XINDX4",61,0)
 I $E(ARG)=";" S ARG="",ERR=9 G ^XINDX1 ;Quit followed by a comment
"RTN","XINDX4",62,0)
 ;I ARG?1A&(S>1) S LIN=ARG_" "_LIN,ARG="",ERR=9 G ^XINDX1
"RTN","XINDX4",63,0)
 ;S ERR=9 G:ERR ^XINDX1
"RTN","XINDX4",64,0)
 Q
"RTN","XINDX4",65,0)
PT(X) ;Tag for parameter passing
"RTN","XINDX4",66,0)
 S ^UTILITY($J,1,RTN,"P",LAB)=X Q
"RTN","XINDX4",67,0)
PC ;Parameter passing call
"RTN","XINDX4",68,0)
 N LOC S LOC="P" D ST
"RTN","XINDX4",69,0)
 Q
"RTN","XINDX4",70,0)
INSIDE(X,X1,X2) ;Return the data inside the param x1,x2
"RTN","XINDX4",71,0)
 S J=$L(X,X2)-1,J=$S(J<1:1,1:J)
"RTN","XINDX4",72,0)
 Q $P($P(X,X2,1,J),X1,2,99)
"RTN","XINDX4",73,0)
SEP(ST,SP,RV) ;String,Separters,Return array)
"RTN","XINDX4",74,0)
 N %,N
"RTN","XINDX4",75,0)
 F N=1:1 S %=$E(ST,N) D SQT:%=Q Q:SP[%
"RTN","XINDX4",76,0)
 S RV=N-1,RV(1)=$E(ST,1,N) Q
"RTN","XINDX4",77,0)
SQT F N=N+1:1 Q:Q[$E(ST,N)
"RTN","XINDX4",78,0)
 Q
"RTN","XINDX4",79,0)
CNG(S1,S2,S3) ;String,replace,with
"RTN","XINDX4",80,0)
 ;
"RTN","XINDX4",81,0)
 F  Q:S1'[S2  S S1=$P(S1,S2)_S3_$P(S1,S2,2,999)
"RTN","XINDX4",82,0)
 Q S1
"RTN","XINDX4",83,0)
PRUNE(S1,S2) ;String,prune char from front and back
"RTN","XINDX4",84,0)
 F  Q:$E(S1)'=S2  S S1=$E(S1,2,999)
"RTN","XINDX4",85,0)
 F  Q:$E(S1,$L(S1))'=S2  S S1=$E(S1,1,$L(S1)-1)
"RTN","XINDX4",86,0)
 Q S1
"RTN","XINDX7")
0^7^B11008474
"RTN","XINDX7",1,0)
XINDX7 ;ISC/RWF - SETUP ENVITOMENT ;12/01/2003  13:40
"RTN","XINDX7",2,0)
 ;;7.3;TOOLKIT;**20,27,48,68**;Apr 25, 1995
"RTN","XINDX7",3,0)
 ;To call XINDEX from elsewere.
"RTN","XINDX7",4,0)
 ;D SETUP^XINDX7 then load routines into ^UTILITY($J,1,<rtn name>,0,n,0)
"RTN","XINDX7",5,0)
 ;with @root@(0)='line count' and @root@(n,0)=a routine line
"RTN","XINDX7",6,0)
 ;Then for each routine S RTN="rtn name",INDLC=0 D BEG^XINDEX
"RTN","XINDX7",7,0)
 ;
"RTN","XINDX7",8,0)
 Q
"RTN","XINDX7",9,0)
SETUP ;Write startup header stuff.
"RTN","XINDX7",10,0)
 D BUILD
"RTN","XINDX7",11,0)
 U IO D HDR
"RTN","XINDX7",12,0)
 S Q="""",U="^",INDDS=0,RTN="$",DA=INDDA,IND("TM")=$H
"RTN","XINDX7",13,0)
 I INDDA>0 D START^XINDX10 D:IOSL\2<$Y HDR W !!,"Routines are being processed.",!
"RTN","XINDX7",14,0)
 ;Build count of routines.
"RTN","XINDX7",15,0)
 S NRO=0,NRO(1)=0,RTN="$"
"RTN","XINDX7",16,0)
 F  S RTN=$O(^UTILITY($J,RTN)) Q:RTN=""  S NRO=NRO+1 S:RTN["|" NRO(1)=NRO(1)+1
"RTN","XINDX7",17,0)
 S RTN="$"
"RTN","XINDX7",18,0)
 W "Routines: ",NRO-NRO(1),"  Faux Routines: ",NRO(1),!!
"RTN","XINDX7",19,0)
 Q
"RTN","XINDX7",20,0)
HDR D NOW^%DTC S Y=%,DT=$P(Y,".",1) D DD^%DT S INDXDT=Y X ^%ZOSF("UCI") S INDHDR(1)="UCI: "_$P(Y,",")_" CPU: "_^%ZOSF("VOL")_"    "_INDXDT,INDHDR="V. A.  C R O S S  R E F E R E N C E R  "_$P($T(+2),";",3)
"RTN","XINDX7",21,0)
 W:$Y>3 @IOF W !!,?IOM-$L(INDHDR)\2,INDHDR,!,?IOM-$L(INDHDR(1))\2,INDHDR(1),!
"RTN","XINDX7",22,0)
 Q
"RTN","XINDX7",23,0)
BUILD N IX,X,TAG,TG,TX,S,L,V K IND
"RTN","XINDX7",24,0)
 F TAG=1:1 S X=$T(TABLE+TAG) Q:X=""  D
"RTN","XINDX7",25,0)
 . S TG=$P(X,";;",2),TX=$P(X,";;",3) Q:TG=""
"RTN","XINDX7",26,0)
 . F IX=1:1 S X=$P(TX,":",IX) Q:X=""  D
"RTN","XINDX7",27,0)
 . . S S=$P(X,","),L=$P(X,",",2),V=$P(X,",",3)
"RTN","XINDX7",28,0)
 . . S IND(TG,S)=L_"^"_V,IND(TG,L)=L_"^"_V
"RTN","XINDX7",29,0)
 . Q
"RTN","XINDX7",30,0)
 Q
"RTN","XINDX7",31,0)
TABLE ;;Short name, Full name, parameters (CMD default - add to GRB)
"RTN","XINDX7",32,0)
CMD ;;CMD;;B,BREAK,B:C,CLOSE,C:D,DO,DG1^XINDX4:E,ELSE,E:ESTA,ESTART,:ESTO,ESTOP,:ETR,ETRIGER,:F,FOR,F:G,GOTO,G:H,HALT,H:H,HANG,H:I,IF,:J,JOB,J:K,KILL,K:L,LOCK,L
"RTN","XINDX7",33,0)
 ;;CMD;;M,MERGE,M:N,NEW,N:O,OPEN,O:Q,QUIT,Q:R,READ,R:S,SET,S:TC,TCOMMIT,2:TRE,TRESTART,2:TRO,TROLLBACK,2:TS,TSTART,2:U,USE,U:V,VIEW,V:W,WRITE,W:X,XECUTE,X:
"RTN","XINDX7",34,0)
 ;;
"RTN","XINDX7",35,0)
FNC ;;FNC;;A,ASCII,1;2:C,CHAR,1;999:D,DATA,1;1:E,EXTRACT,1;3:F,FIND,2;3:G,GET,1;2:J,JUSTIFY,2;3:L,LENGTH,1;2:O,ORDER,1;2:P,PIECE,2;4:Q,QUERY,1;2:R,RANDOM,1;1:S,SELECT,1;999:T,TEXT,1;1:V,VIEW,1;999,
"RTN","XINDX7",36,0)
 ;;FNC;;FN,FNUMBER,2;3:NA,NAME,1;2:QL,QLENGTH,1;1:QS,QSUBSCRIPT,1;3:RE,REVERSE,1;1:ST,STACK,1;2:TR,TRANSLATE,1;3:WFONT,WFONT,4;4:WTFIT,WTFIT,6;6:WTWIDTH,WTWIDTH,5;5:
"RTN","XINDX7",37,0)
 ;;
"RTN","XINDX7",38,0)
SVN ;;SVN;;D,DEVICE:EC,ECODE:ES,ESTACK:ET,ETRAP:H,HOROLOG:I,IO:J,JOB:K,KEY:PD,PDISPLAY:P,PRINCIPAL:Q,QUIT:S,STORAGE:ST,STACK:SY,SYSTEM:T,TEST:X,X:Y,Y
"RTN","XINDX7",39,0)
 ;;
"RTN","XINDX7",40,0)
SSVN ;;SSVN;;C,CHARACTER:D,DEVICE:DI,DISPLAY:E,EVENT:G,GLOBAL:J,JOB:L,LOCK:R,ROUTINE:S,SYSTEM:W,WINDOW:Z,Z
"RTN","XINDX9")
0^5^B12499095
"RTN","XINDX9",1,0)
XINDX9 ;SF/RWF - XINDEX SYNTAX CHECKER ;11/07/2002  14:57
"RTN","XINDX9",2,0)
 ;;7.3;TOOLKIT;**20,27,48,61,66,68**;Apr 25, 1995
"RTN","XINDX9",3,0)
 N CH1,EC,OP
"RTN","XINDX9",4,0)
 D PARSE S LI=0,AC=255 F %=0:0 S %=$O(LV(%)) Q:%'>0  S LI(%)=0
"RTN","XINDX9",5,0)
 Q
"RTN","XINDX9",6,0)
 ;LV is a set of Linked Values
"RTN","XINDX9",7,0)
PARSE K LV,LI S (ERR,LI,I)=0,(LL,LV)=1,(OP,CH)="",Q=""""
"RTN","XINDX9",8,0)
 ;
"RTN","XINDX9",9,0)
PA2 S I=I+1,CH=$E(STR,I),CH1=$E(STR,I+1) G:CH="" PEND
"RTN","XINDX9",10,0)
 G E:CH=";"!(CH'?1ANP) I """$()"[CH D QUOTE:CH=Q,FUNC:CH="$",DN:CH="(",UP:CH=")" G PA2
"RTN","XINDX9",11,0)
 I CH="^",CH1="$" D SSVN G PA2
"RTN","XINDX9",12,0)
 I CH="^",I=LL G PA2:CH1'="[" S I=I+1,X=$E(STR,LL,I) D ADD S LL=I+1 G PA2
"RTN","XINDX9",13,0)
 I CH?1A!(CH="%") D VAR G PA2
"RTN","XINDX9",14,0)
 I CH?1N D NUM G PA2
"RTN","XINDX9",15,0)
 S:"+-#'/*_&![]<>?"[CH OP=CH I CH="?",",!#"'[$E(STR,I-1) D AR,PAT G PA2
"RTN","XINDX9",16,0)
 I CH?1P D  ;Check for dup operators
"RTN","XINDX9",17,0)
 . D AR
"RTN","XINDX9",18,0)
 . Q:(CH_CH1="]]")
"RTN","XINDX9",19,0)
 . I ((CH=CH1)&(",_/\[]"[CH))&($$FNC()'="$$") D E^XINDX1(21)
"RTN","XINDX9",20,0)
 G PA2
"RTN","XINDX9",21,0)
 ;
"RTN","XINDX9",22,0)
DN D STR S X=CH D ADD,NEW S LI(LV)=LI,LV=LV+1 S:'$D(LI(LV)) LI(LV)=0 S LI=LI(LV),LI(LV-1,1)=LI
"RTN","XINDX9",23,0)
 Q
"RTN","XINDX9",24,0)
UP I LV<2 D E^XINDX1(5) Q
"RTN","XINDX9",25,0)
 D STR S EC=LI-LI(LV-1,1),X=$C(10) D ADD,NEW S LI(LV)=LI,LV=LV-1,LI=LI(LV)
"RTN","XINDX9",26,0)
 S X=EC D ADD S X=CH D ADD I CH1]"",",_=+-*/\#'):<>[]?&!@"'[CH1 D E^XINDX1(43)
"RTN","XINDX9",27,0)
 Q
"RTN","XINDX9",28,0)
NEW S LL=I+1
"RTN","XINDX9",29,0)
 Q
"RTN","XINDX9",30,0)
AR D STR S X=CH D ADD,NEW Q
"RTN","XINDX9",31,0)
STR S X=$E(STR,LL,I-1) Q:'$L(X)  ;Drop into ADD
"RTN","XINDX9",32,0)
ADD S LI=LI+1,LV(LV,LI)=X Q
"RTN","XINDX9",33,0)
 ;
"RTN","XINDX9",34,0)
FNC(NEW) ;Sets or returns the current function
"RTN","XINDX9",35,0)
 I $D(NEW) S LV(LV+1,"FNC",$G(LI(LV))+1)=NEW Q
"RTN","XINDX9",36,0)
 N W S W=+$S($D(LV(LV,"FNC",LI)):LI,1:$O(LV(LV,"FNC",LI),-1))
"RTN","XINDX9",37,0)
 Q $G(LV(LV,"FNC",W))
"RTN","XINDX9",38,0)
 ;
"RTN","XINDX9",39,0)
OP(NEW) ;Sets or returns the current operator
"RTN","XINDX9",40,0)
 I $D(NEW) S LV(LV,"OP",LI)=NEW Q
"RTN","XINDX9",41,0)
 N W S W=+$S($D(LV(LV,"OP",LI)):LI,1:$O(LV(LV,"OP",LI),-1))
"RTN","XINDX9",42,0)
 Q $G(LV(LV,"OP",W))
"RTN","XINDX9",43,0)
 ;
"RTN","XINDX9",44,0)
QUOTE F I=I+1:1 S CH=$E(STR,I) Q:CH=""!(CH=Q)
"RTN","XINDX9",45,0)
 I $E(STR,I+1)=Q S I=I+1 G QUOTE
"RTN","XINDX9",46,0)
 I OP'="?",$E(STR,I+1)]"","[]()<>\/+-=&!_#*,:'|"'[$E(STR,I+1) D E^XINDX1(46) Q
"RTN","XINDX9",47,0)
 Q:CH]""  D E^XINDX1(6) Q
"RTN","XINDX9",48,0)
GVAR() ;EF get var
"RTN","XINDX9",49,0)
 N % D VAR S %=$E(STR,LL,I),LL=I+1 Q %
"RTN","XINDX9",50,0)
VAR F J=I+1:1 S CH=$E(STR,J) Q:CH'?1AN
"RTN","XINDX9",51,0)
 S I=J-1 D SUM("V") Q
"RTN","XINDX9",52,0)
NUM F J=I+1:1 S CH=$E(STR,J) Q:"0123456789."'[CH!(CH="")
"RTN","XINDX9",53,0)
 I CH="E" S CH=$E(STR,J+1) I CH?1N!("+-"[CH) S I=J G NUM
"RTN","XINDX9",54,0)
 I CH]"",CH'?1P S ERR=53 D ^XINDX1
"RTN","XINDX9",55,0)
 S I=J-1 D SUM("N") Q
"RTN","XINDX9",56,0)
INC S I=I+1,CH=$E(STR,I)
"RTN","XINDX9",57,0)
 Q
"RTN","XINDX9",58,0)
FUNC D INC S X=CH,S=$$GVAR() G EXT:S["$$",PKG:S["$&",SPV:CH'="("
"RTN","XINDX9",59,0)
 S S=$E(S,2,11),F1=$G(IND("FNC",S)) I '$L(F1) D E^XINDX1(3) S F1=S G FX
"RTN","XINDX9",60,0)
 I "ZV"[X S ERR=$S("Z"[X:31,1:27) D ^XINDX1
"RTN","XINDX9",61,0)
FX S X="$"_F1,CH="" D FNC("$F"),ADD,SUM("F") Q
"RTN","XINDX9",62,0)
SPV S X=S D FNC("$V"),ADD,SUM("V") S X=$E(S,2,9),CH=""
"RTN","XINDX9",63,0)
 I $E(S,2)="Z" D E^XINDX1(28) Q
"RTN","XINDX9",64,0)
 I '$D(IND("SVN",X)) D E^XINDX1(4)
"RTN","XINDX9",65,0)
 Q
"RTN","XINDX9",66,0)
EXT ;EXTRINSIC
"RTN","XINDX9",67,0)
 S X=S,CH="" D FNC("$$"),ADD,SUM("V") Q
"RTN","XINDX9",68,0)
SSVN ;Error 54 access for Kernel only
"RTN","XINDX9",69,0)
 D INC S X=$$GVAR() I '$D(IND("SSVN",$E(X,3,99))) D E^XINDX1(4) Q  ;Need new #
"RTN","XINDX9",70,0)
 D E^XINDX1(54),ADD,SUM("V") Q
"RTN","XINDX9",71,0)
PKG ;External Function
"RTN","XINDX9",72,0)
 S J=$F(STR,"(",I),I=J-2,X=S_$E(STR,LL,I),LL=J-1,CH=""
"RTN","XINDX9",73,0)
 D ADD,E^XINDX1(55) ;Not standard VA
"RTN","XINDX9",74,0)
 Q
"RTN","XINDX9",75,0)
E S ERR=11 D ^XINDX1 Q  ;
"RTN","XINDX9",76,0)
PAT F I=I+1:1 S CH=$E(STR,I) D PATQ:CH=Q,PAREN:CH="(" I CH=""!(CH'?1N&("ACELNPUacelnpu."'[CH)) Q
"RTN","XINDX9",77,0)
 S I=I-1 I ":),@+-_*/\!&'"'[CH D E^XINDX1(16),SEP Q
"RTN","XINDX9",78,0)
 Q
"RTN","XINDX9",79,0)
PATQ F I=I+1:1 S CH=$E(STR,I) Q:CH=""!(CH=Q)
"RTN","XINDX9",80,0)
 S ERR=6,I=I+1,CH=$E(STR,I) D:$E(STR,I-1)="" ^XINDX1 G:CH=Q PATQ
"RTN","XINDX9",81,0)
 Q
"RTN","XINDX9",82,0)
PAREN F I=I+1:1 S CH=$E(STR,I) Q:CH=""!(CH=")")
"RTN","XINDX9",83,0)
 D:CH="" E^XINDX1(5) S CH="."
"RTN","XINDX9",84,0)
 Q
"RTN","XINDX9",85,0)
PEND D AR,E^XINDX1(5):LV>1,E^XINDX1(21):($G(LV(1,1))=",") ;LV>1 means mis-match ()
"RTN","XINDX9",86,0)
 Q
"RTN","XINDX9",87,0)
SEP ;Find sep
"RTN","XINDX9",88,0)
 Q
"RTN","XINDX9",89,0)
SUM(P) ;Build summry line
"RTN","XINDX9",90,0)
 S LV(LV,"S")=$G(LV(LV,"S"))_P
"RTN","XINDX9",91,0)
 Q
"RTN","XINDX9",92,0)
TEST S STR="@^(0)" D XINDX9
"VER")
8.0^22.0
**END**
**END**

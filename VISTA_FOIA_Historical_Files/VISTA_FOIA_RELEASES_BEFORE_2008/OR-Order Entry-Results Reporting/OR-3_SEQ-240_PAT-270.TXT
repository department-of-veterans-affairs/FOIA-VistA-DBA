
=============================================================================
Run Date: JAN 23, 2007                     Designation: OR*3*270
Package : OR - ORDER ENTRY/RESULTS REPORTING  Priority: EMERGENCY
Version : 3       SEQ #240                      Status: Released
                  Compliance Date: FEB 06, 2007
=============================================================================

Associated patches: (v)OR*3*258    <<= must be installed BEFORE `OR*3*270'

Subject: CPRS GUI - PSI-06-145 CCOW Fixes

Category: 
  - PATCH FOR A PATCH
  - Routine
  - Other

Description:
============

 Test Sites
 ==============
 Dayton 
 Heartland West (Kansas City/ Columbia, MO/Eastern Kansas 
                 Topeka/Leavenworth)/Wichita) 
 Miami 
 Northern California Health Care (NCHC) 
 San Diego 
  
 **************************************************************************
 *** This patch addresses one patient safety issue and must be          ***
 *** installed by the compliance date, which is 14 days from release    ***
 *** date. It may be installed with users on the system.                ***
 **************************************************************************
  
 Patch OR*3.0*270, CPRS GUI version 26.69, resolves one patient safety 
 issue, related to CCOW patient context.
  
 PATIENT SAFETY ISSUES RESOLVED BY THIS PATCH:
 =============================================
  
 PSI-06-145 - HD 162746, 163113, 166913 - Information on patient name 
 button does not match demographics and other information in chart.
  
 PROBLEM:  Under certain circumstances, it is possible to arrive at a 
 situation where the patient named on the patient button (upper left of 
 toolbar) is a different patient from the data shown in the rest of CPRS.  
 This is not made clear to the user in any way, and has been recognized in 
 the field only by vigilant users noticing that the data shown was not for 
 the selected patient.  This could very easily lead to orders being 
 unintentionally placed for the wrong patient.
  
 SCENARIO #1:  A CCOW-enabled application is also running on the 
 desktop alongside CPRS (BCMA, Vitals, CCR, second linked copy of CPRS, 
 etc), and the user is processing alerts in CPRS.  The other application 
 in the background is unable to process a patient change caused by 
 selection of a particular alert without certain consequences (items will 
 be left unsigned, current process will be left incomplete, etc).  
 Standard CCOW behavior is to alert the user to the inability of that 
 application to change patients, and to provide 3 choices to the user.  
 The user can choose "OK", and continue with the patient change in both 
 applications, despite the known consequences.  The user can choose 
 "Cancel", and leave both applications in the existing patient, with no 
 change occurring.  Or the user can choose "Break link".  The correct 
 behavior in that case would be to leave the CCOW context, change to the 
 newly selected patient, show a broken link, and not affect the background 
 application, which remains linked in context with the existing patient.  
 Currently, in v26.68 and all earlier released versions, clicking "Break 
 link" is malfunctioning, but only while processing alerts with another 
 application linked to context in the background.  While it appears that 
 CPRS has indeed changed to the newly selected patient, only the 
 information on the patient name button has actually been changed.  All 
 other information in the chart remains that of the previously selected 
 patient.  "Break link" is already functioning correctly on a patient 
 change initiated by "File/Select patient", or by the "Select new patient" 
 button on the patient demographics screen.
  
 SCENARIOS #2 and #3:  If a CCOW connectivity error occurs between the
 Vergence Locator on the desktop and the CCOW vault, when and only when the
 patient selection screen is visible, CPRS v26.68 does not respond
 correctly to this error condition after the usual CCOW error message is
 displayed to the user.
  
  - SCENARIO #2:  If this is the first patient being selected on startup
 and such an error occurs, the patient name button will fail to display the
 selected patient's information, remaining in a "no patient selected"
 state, despite the population of all other chart information for that
 patient.
  
  - SCENARIO #3:  If an error occurs at this point while selection of a
 second or subsequent patient is in progress, the patient name button will
 still contain the information for the previous patient.  All other chart
 information will be that of the newly selected patient.
  
  - RELATED MENU DEFECT: When any CCOW connectivity error results in the
 error message to the user advising that CCOW will be unavailable for the
 remainder of the session, the "File/Break link" and "File/Rejoin" menus 
 should remain disabled as advertised.  In v26.68, selection of each new 
 patient following this error would inadvertently reenable these menus, 
 even though CCOW may not be available.  Clicking on either of these menu 
 items in that situation would very likely only cause further CCOW error 
 messages to display, and could lead to other unpredictable behavior.
  
  
 RESOLUTION:  
  
 SCENARIO #1:  The alert processing code in CPRS has been corrected to 
 respond as it should to any user choice on the "Problem changing clinical 
 context" screen.
  
 SCENARIOS #2 and #3: CPRS error processing code has been corrected to
 reflect the correct patient after one of these patient selection errors
 occurs.
  
 RELATED MENU DEFECT: These menus are no longer reenabled on every patient
 change, if a prior CCOW error condition for the session is still in 
 effect.
  
 KNOWN CCOW ISSUE:  Although unrelated to the issues corrected here, and 
 common to all VistA CCOW-enabled applications, users should also be aware 
 of the following behavior, recently discovered in internal testing.  If a 
 user uses CTRL-ALT-DEL to open Windows Task Manager, and then uses the 
 "End Task" button to terminate a participating CCOW application, the 
 information in the CCOW vault is NOT cleared when that application 
 terminates.  A timeout setting in the vault itself determines how long 
 this information remains active, but a typical value is 20 to 40 
 minutes.  Starting a subsequent application following such a shutdown can 
 result in that application utilizing both the existing user and patient 
 contexts if present, and linking automatically to those items on 
 startup.  
  
 There is no possible correction to VistA GUI applications to address this
 Sentillion vault behavior.  One possible action would be to reboot the 
 workstation, which will establish a new connection with the vault.
  
 REQUIRED BUILDS:
 ================
  
 OR*3.0*258
  
 The KIDS portion of the installation will simply update the version number
 of the OR CPRS GUI CHART option to be 1.0.26.69. The .ZIP file contains an
 updated CPRS executable.
  
 NOTE: Internet Explorer 4.0 (IE4) or later is REQUIRED in order for GUI
 version 26.69 to run.  However IE 5.5 or later with 128-bit encryption is
 required for PKI functionality. 
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
 <tab>;;3.0;ORDER ENTRY/RESULTS REPORTING;**[patch list]**;Dec 17, 1997
  
 CHECK^XTSUMBLD results
  
 Routine name         Before Patch          After Patch         Patch List
 ============         ============          ===========         ==========
 ORY270                        N/A               903607            270
  
 INSTALLATION FILES:
 ==================
  
 The following software files are exported as part of this patch:
  
 File Name               Contents                    Retrieval Format
 ---------               --------                    ----------------
 OR_30_270.ZIP           File(s) indented below      BINARY
 - CPRSChart.exe          CPRS Executable
 - OR_30_270RN.pdf        Release Notes (Adobe Acrobat version)
 - OR_30_270RN.doc        Release Notes (Word version)
 OR_30_270_SRC.ZIP       CPRSChart Source            BINARY
 OR_30_270.KID           KIDS build                  ASCII
  
 The files listed above may be obtained via FTP.  The preferred method is
 to FTP the files from:
  
              download.vista.med.va.gov
  
 This transmits the files from the first available FTP server.  Sites may
 also elect to retrieve software directly from a specific server as
 follows:
  
 OI FIELD OFFICE    FTP ADDRESS                 DIRECTORY
 ----------------   -------------------------   --------------------
 Albany             ftp.fo-albany.med.va.gov    [anonymous.software]
 Hines              ftp.fo-hines.med.va.gov     [anonymous.software]
 Salt Lake City     ftp.fo-slc.med.va.gov       [anonymous.software]
  
 INSTALLATION REQUIREMENTS/NOTES:
 ================================
  
 -- Required Patches:
  
   OR*3.0*258
  
 -- Installation Compliance Date:
  
   OR*3.0*270 must be installed within 14 days of its national release 
   date.
  
 -- Internet Explorer:
  
 NOTE: Internet Explorer 4.0 (IE4) or later is REQUIRED in order for 
 GUI version 26.69 to run.  However IE 5.5 or later with 128-bit 
 encryption is required for PKI functionality.
  
 -- Build components:
  
 The KIDS portion of the installation will simply update the version number
 of the OR CPRS GUI CHART option to be 1.0.26.69 with routine ORY270. The 
 .ZIP file contains an updated CPRS executable.
  
 INSTALLATION INSTRUCTIONS:
 ==========================
  
 Users should not be on the system during installation of this patch.  This
 patch should be installed during non-peak hours to minimize disruption.  
 Installation should take approximately 1 minute.  
  
 1.  Read the above section "INSTALLATION REQUIREMENTS/NOTES" and take
 appropriate actions.
  
 2.  Obtain the file OR_30_270.KID.
  
 3.  From the Kernel Installation and Distribution System (KIDS) Menu, 
 select the Installation menu.
  
 4.  Use Load a Distribution using OR_30_270.KID when prompted to Enter
 a Host File name.  You may need to prepend a directory name.
  
 5.  From this menu, you may then elect to use the following options
 (when prompted for the INSTALL NAME, enter OR*3.0*270):
 a.  Backup a Transport Global
 b.  Compare Transport Global to Current System
 c.  Verify Checksums in Transport Global 
  
 6.  When ready, select the Install Packages option (when prompted for 
 the INSTALL NAME, enter OR*3.0*270).
  
 7.  When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of
 Install? Yes//", respond "YES."
  
 8.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
 YES//', respond "YES." 
  
 9.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
 Protocols? YES//', respond YES.  When prompted to select the 
 options you would like to place out of order, enter the following:
  
 OR OE/RR MENU CLINICIAN          CPRS Clinician Menu
 OR OE/RR MENU NURSE              CPRS Nurse Menu
 OR OE/RR MENU WARD CLERK         CPRS Ward Clerk Menu
 OR CPRS GUI CHART
  
 10. When prompted 'Delay Install (Minutes):  (0-60): 0//; respond '0.'
  
 11. Move the routines to other CPUs if appropriate.
  
 12. Following successful installation, the post-install routine 
 ORY270 may be deleted.
  
 13. Retrieve and open the file OR_30_270.ZIP.
  
 14. Note the file date/time inside the ZIP for CPRSChart.EXE.  Move this 
 file to the appropriate directory where it can be accessed by all CPRS
 workstations.  After moving the files, compare the file date/time of
 the extracted copy to that contained in the ZIP.  They should be the
 same.  Some ZIP extraction utilities may produce extracted files with
 the current date/time.  If this is the case, the CPRSUpdate
 application may not function correctly.
  
 15.  In National Center for Patient Safety (NCPS) Alert #AL07-03
 (http://vaww.ncps.med.va.gov/Guidelines/alerts/Docs/CPRSCCOWAL07-03.pdf),
 sites were previously instructed to edit the BCMA desktop shortcut
 parameters on all applicable workstations to disable CCOW.  A follow-up
 informational BCMA patch, PSB*3*34, will provide instructions for enabling
 CCOW and notification of the patch s availability will be posted to the
 NCPS Patient Safety Log:
  
        http://vaww.ncps.med.va.gov/Dialogue/pslog/default.asp

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: ORY270
    Before:       n/a  After:  B1830696  **270**

=============================================================================
User Information:
Entered By  : VERTIGAN,RICHARD E            Date Entered  : NOV 16, 2006
Completed By: OLINGER,BRIAN                 Date Completed: JAN 17, 2007
Released By : SCHMIT,BECKY                  Date Released : JAN 23, 2007
=============================================================================


Packman Mail Message:
=====================

No routines included

Released PRPF*3*16 SEQ #19
Extracted from mail message
**KIDS**:PRPF*3.0*16^

**INSTALL NAME**
PRPF*3.0*16
"BLD",5124,0)
PRPF*3.0*16^INTEGRATED PATIENT FUNDS^0^3070206^y
"BLD",5124,1,0)
^^1^1^3050719^
"BLD",5124,1,1,0)
Patient Funds Migration Patch
"BLD",5124,4,0)
^9.64PA^^0
"BLD",5124,"INID")
^y
"BLD",5124,"INIT")
ADDPROXY^PRPFMR2
"BLD",5124,"KRN",0)
^9.67PA^8989.52^19
"BLD",5124,"KRN",.4,0)
.4
"BLD",5124,"KRN",.401,0)
.401
"BLD",5124,"KRN",.402,0)
.402
"BLD",5124,"KRN",.403,0)
.403
"BLD",5124,"KRN",.5,0)
.5
"BLD",5124,"KRN",.84,0)
.84
"BLD",5124,"KRN",3.6,0)
3.6
"BLD",5124,"KRN",3.8,0)
3.8
"BLD",5124,"KRN",9.2,0)
9.2
"BLD",5124,"KRN",9.8,0)
9.8
"BLD",5124,"KRN",9.8,"NM",0)
^9.68A^8^2
"BLD",5124,"KRN",9.8,"NM",7,0)
PRPFMR1^^0^B74854586
"BLD",5124,"KRN",9.8,"NM",8,0)
PRPFMR2^^0^B1579962
"BLD",5124,"KRN",9.8,"NM","B","PRPFMR1",7)

"BLD",5124,"KRN",9.8,"NM","B","PRPFMR2",8)

"BLD",5124,"KRN",19,0)
19
"BLD",5124,"KRN",19,"NM",0)
^9.68A^3^1
"BLD",5124,"KRN",19,"NM",3,0)
PRPF RPC UTILS^^0
"BLD",5124,"KRN",19,"NM","B","PRPF RPC UTILS",3)

"BLD",5124,"KRN",19.1,0)
19.1
"BLD",5124,"KRN",19.1,"NM",0)
^9.68A^11^11
"BLD",5124,"KRN",19.1,"NM",1,0)
PRPF_BASIC_PFC^^0
"BLD",5124,"KRN",19.1,"NM",2,0)
PRPF_DEFERRAL_OVERRIDE^^0
"BLD",5124,"KRN",19.1,"NM",3,0)
PRPF_FISCAL_MANAGEMENT^^0
"BLD",5124,"KRN",19.1,"NM",4,0)
PRPF_LEAD_PFC^^0
"BLD",5124,"KRN",19.1,"NM",5,0)
PRPF_PFC_SUPER^^0
"BLD",5124,"KRN",19.1,"NM",6,0)
PRPF_RESTRICTION_OVERRIDE^^0
"BLD",5124,"KRN",19.1,"NM",7,0)
PRPF_VPFS_SECURITY_ADMIN^^0
"BLD",5124,"KRN",19.1,"NM",8,0)
PRPF_VPFS_SYSTEM_ADMIN^^0
"BLD",5124,"KRN",19.1,"NM",9,0)
PRPF_ACCOUNT_OVERDRAW^^0
"BLD",5124,"KRN",19.1,"NM",10,0)
PRPF_BASIC_OFFICIAL_USER^^0
"BLD",5124,"KRN",19.1,"NM",11,0)
PRPF_DATA_MIGRATION_USERS^^0
"BLD",5124,"KRN",19.1,"NM","B","PRPF_ACCOUNT_OVERDRAW",9)

"BLD",5124,"KRN",19.1,"NM","B","PRPF_BASIC_OFFICIAL_USER",10)

"BLD",5124,"KRN",19.1,"NM","B","PRPF_BASIC_PFC",1)

"BLD",5124,"KRN",19.1,"NM","B","PRPF_DATA_MIGRATION_USERS",11)

"BLD",5124,"KRN",19.1,"NM","B","PRPF_DEFERRAL_OVERRIDE",2)

"BLD",5124,"KRN",19.1,"NM","B","PRPF_FISCAL_MANAGEMENT",3)

"BLD",5124,"KRN",19.1,"NM","B","PRPF_LEAD_PFC",4)

"BLD",5124,"KRN",19.1,"NM","B","PRPF_PFC_SUPER",5)

"BLD",5124,"KRN",19.1,"NM","B","PRPF_RESTRICTION_OVERRIDE",6)

"BLD",5124,"KRN",19.1,"NM","B","PRPF_VPFS_SECURITY_ADMIN",7)

"BLD",5124,"KRN",19.1,"NM","B","PRPF_VPFS_SYSTEM_ADMIN",8)

"BLD",5124,"KRN",101,0)
101
"BLD",5124,"KRN",409.61,0)
409.61
"BLD",5124,"KRN",771,0)
771
"BLD",5124,"KRN",870,0)
870
"BLD",5124,"KRN",8989.51,0)
8989.51
"BLD",5124,"KRN",8989.52,0)
8989.52
"BLD",5124,"KRN",8994,0)
8994
"BLD",5124,"KRN",8994,"NM",0)
^9.68A^2^2
"BLD",5124,"KRN",8994,"NM",1,0)
PRPF DATABASE DIAG^^0
"BLD",5124,"KRN",8994,"NM",2,0)
PRPF DATABASE EXTR^^0
"BLD",5124,"KRN",8994,"NM","B","PRPF DATABASE DIAG",1)

"BLD",5124,"KRN",8994,"NM","B","PRPF DATABASE EXTR",2)

"BLD",5124,"KRN","B",.4,.4)

"BLD",5124,"KRN","B",.401,.401)

"BLD",5124,"KRN","B",.402,.402)

"BLD",5124,"KRN","B",.403,.403)

"BLD",5124,"KRN","B",.5,.5)

"BLD",5124,"KRN","B",.84,.84)

"BLD",5124,"KRN","B",3.6,3.6)

"BLD",5124,"KRN","B",3.8,3.8)

"BLD",5124,"KRN","B",9.2,9.2)

"BLD",5124,"KRN","B",9.8,9.8)

"BLD",5124,"KRN","B",19,19)

"BLD",5124,"KRN","B",19.1,19.1)

"BLD",5124,"KRN","B",101,101)

"BLD",5124,"KRN","B",409.61,409.61)

"BLD",5124,"KRN","B",771,771)

"BLD",5124,"KRN","B",870,870)

"BLD",5124,"KRN","B",8989.51,8989.51)

"BLD",5124,"KRN","B",8989.52,8989.52)

"BLD",5124,"KRN","B",8994,8994)

"BLD",5124,"QUES",0)
^9.62^^
"BLD",5124,"REQB",0)
^9.611^5^1
"BLD",5124,"REQB",5,0)
PRPF*3.0*15^1
"BLD",5124,"REQB","B","PRPF*3.0*15",5)

"INIT")
ADDPROXY^PRPFMR2
"KRN",19,11881,-1)
0^3
"KRN",19,11881,0)
PRPF RPC UTILS^Patient Funds RPC^^B^^^^^^^^INTEGRATED PATIENT FUNDS
"KRN",19,11881,99.1)
59519,60559
"KRN",19,11881,"RPC",0)
^19.05P^2^2
"KRN",19,11881,"RPC",1,0)
PRPF DATABASE DIAG
"KRN",19,11881,"RPC",2,0)
PRPF DATABASE EXTR
"KRN",19,11881,"U")
PATIENT FUNDS RPC
"KRN",19.1,460,-1)
0^10
"KRN",19.1,460,0)
PRPF_BASIC_OFFICIAL_USER^VistaLink PRPF Basic user^^^1
"KRN",19.1,461,-1)
0^1
"KRN",19.1,461,0)
PRPF_BASIC_PFC^VistaLink PRPF Basic PFC^^^1
"KRN",19.1,462,-1)
0^4
"KRN",19.1,462,0)
PRPF_LEAD_PFC^VistaLink PRPF Lead PFC^^^1
"KRN",19.1,463,-1)
0^3
"KRN",19.1,463,0)
PRPF_FISCAL_MANAGEMENT^^^^1
"KRN",19.1,464,-1)
0^5
"KRN",19.1,464,0)
PRPF_PFC_SUPER^^^^1
"KRN",19.1,465,-1)
0^8
"KRN",19.1,465,0)
PRPF_VPFS_SYSTEM_ADMIN^^^^1
"KRN",19.1,466,-1)
0^7
"KRN",19.1,466,0)
PRPF_VPFS_SECURITY_ADMIN^^^^1
"KRN",19.1,467,-1)
0^9
"KRN",19.1,467,0)
PRPF_ACCOUNT_OVERDRAW^^^^1
"KRN",19.1,468,-1)
0^2
"KRN",19.1,468,0)
PRPF_DEFERRAL_OVERRIDE^^^^1
"KRN",19.1,469,-1)
0^6
"KRN",19.1,469,0)
PRPF_RESTRICTION_OVERRIDE^^^^1
"KRN",19.1,470,-1)
0^11
"KRN",19.1,470,0)
PRPF_DATA_MIGRATION_USERS^^^^1
"KRN",8994,1552,-1)
0^1
"KRN",8994,1552,0)
PRPF DATABASE DIAG^RPC^PRPFDR3^4^R^0^^1^.001
"KRN",8994,1552,2,0)
^8994.02A^1^1
"KRN",8994,1552,2,1,0)
PRPFRPC^4^100^1^1
"KRN",8994,1552,2,"B","PRPFRPC",1)

"KRN",8994,1552,2,"PARAMSEQ",1,1)

"KRN",8994,1554,-1)
0^2
"KRN",8994,1554,0)
PRPF DATABASE EXTR^RPC^PRPFMR1^4^R^0^^1^.001
"KRN",8994,1554,1,0)
^8994.01^1^1^3040113^^
"KRN",8994,1554,1,1,0)
THIS USED FOR J2EE MIGRATION
"MBREQ")
0
"ORD",3,19.1)
19.1;3;1;;KEY^XPDTA1;;;KEYF2^XPDIA1;;KEYDEL^XPDIA1
"ORD",3,19.1,0)
SECURITY KEY
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",466,-1)
1^1
"PKG",466,0)
INTEGRATED PATIENT FUNDS^PRPF^PATIENT FUNDS.  INTEGRATED WITH PATIENT FILE
"PKG",466,20,0)
^9.402P^^
"PKG",466,22,0)
^9.49I^1^1
"PKG",466,22,1,0)
3.0^2970224
"PKG",466,22,1,"PAH",1,0)
16^3070206
"PKG",466,22,1,"PAH",1,1,0)
^^1^1^3070206
"PKG",466,22,1,"PAH",1,1,1,0)
Patient Funds Migration Patch
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PRPFMR1")
0^7^B74854586^n/a
"RTN","PRPFMR1",1,0)
PRPFMR1 ;BAYPINES/MJE  DATA MIGRATION ROUTINE 1 ;05/15/03
"RTN","PRPFMR1",2,0)
 ;;3.0;PATIENT FUNDS - MIGRATION 5.1;**16**;JUNE 1, 1989
"RTN","PRPFMR1",3,0)
 ;ENTRY AT LINETAG ONLY
"RTN","PRPFMR1",4,0)
 Q
"RTN","PRPFMR1",5,0)
RPC(RESULTS,PARAM1,PARAM2) ;ENTRY POINT FOR VPFS RPC
"RTN","PRPFMR1",6,0)
 S PRPFSEG=PARAM1
"RTN","PRPFMR1",7,0)
 S PRPFJ=PARAM2
"RTN","PRPFMR1",8,0)
 I PRPFSEG>1 D SENDSEG Q
"RTN","PRPFMR1",9,0)
TEST S PRPFOUT1=1
"RTN","PRPFMR1",10,0)
LEG ;LEGACY ENTRY POINT
"RTN","PRPFMR1",11,0)
 S:'$D(PRPFOUT1) PRPFOUT1=2
"RTN","PRPFMR1",12,0)
 K ^TMP("PRPF_EXTDATA")
"RTN","PRPFMR1",13,0)
 S (PRPFHLD1,PRPFHLD2,PRPFHLD3,PRPFHLD4,CNTREC,CNTPREC,CNTTOT,PFG,PFX,PFXX)=0
"RTN","PRPFMR1",14,0)
 S U="^"
"RTN","PRPFMR1",15,0)
 S PFSITE=$P($$SITE^VASITE(),"^",3)
"RTN","PRPFMR1",16,0)
 S:PFSITE="" PFSITE="###"
"RTN","PRPFMR1",17,0)
 S (CNTSEG,CNTXREC)=1
"RTN","PRPFMR1",18,0)
 F  S PRPFHLD1=$O(^PRPF(470,PRPFHLD1)) Q:'PRPFHLD1  D
"RTN","PRPFMR1",19,0)
 .S PFG=PFG+1 I PFG=100 W "." S PFG=0
"RTN","PRPFMR1",20,0)
 .S CNTPREC=CNTPREC+1
"RTN","PRPFMR1",21,0)
 .S PFNODE12=PFSITE
"RTN","PRPFMR1",22,0)
 .D:$G(^PRPF(470,PRPFHLD1,0))'="" COMPU
"RTN","PRPFMR1",23,0)
 .D NODE12
"RTN","PRPFMR1",24,0)
 .D:$G(^PRPF(470,PRPFHLD1,0))'="" NODE0
"RTN","PRPFMR1",25,0)
 .D:$G(^PRPF(470,PRPFHLD1,1))'="" NODE1
"RTN","PRPFMR1",26,0)
 .D:$G(^PRPF(470,PRPFHLD1,2))'="" NODE2
"RTN","PRPFMR1",27,0)
 .D:$O(^PRPF(470,PRPFHLD1,4,0))>0 NODE4
"RTN","PRPFMR1",28,0)
 .D:$O(^PRPF(470,PRPFHLD1,5,0))>0 NODE5
"RTN","PRPFMR1",29,0)
 .D:$O(^PRPF(470,PRPFHLD1,6,0))>0 NODE6
"RTN","PRPFMR1",30,0)
 .D:$O(^PRPF(470,PRPFHLD1,7,0))>0 NODE7
"RTN","PRPFMR1",31,0)
 .D:$O(^PRPF(470,PRPFHLD1,8,0))>0 NODE8
"RTN","PRPFMR1",32,0)
 D:PRPFOUT1=1
"RTN","PRPFMR1",33,0)
 .S CNTTOT=CNTTOT+CNTREC
"RTN","PRPFMR1",34,0)
 .S ^TMP("PRPF_EXTDATA",$J,0)=DTIME_U_DTIME_U_"DATA FOR PRPF MIGRATION"
"RTN","PRPFMR1",35,0)
 .S ^TMP("PRPF_EXTDATA",$J,1,0)="VPFS"_U_PFSITE_U_U_U_U_"0"_U_"A1"_U_CNTPREC_U_CNTTOT_U_$J
"RTN","PRPFMR1",36,0)
 .D NOW^%DTC S Y=% D DD^%DT
"RTN","PRPFMR1",37,0)
 .S $P(^TMP("PRPF_EXTDATA",$J,1,0),"^",3)="(VER#5.0) "_"RUN-DATE@TIME="_Y
"RTN","PRPFMR1",38,0)
 .S RESULTS=$NA(^TMP("PRPF_EXTDATA",$J,1))
"RTN","PRPFMR1",39,0)
 D:PRPFOUT1=2 OUT
"RTN","PRPFMR1",40,0)
 D KILLIT
"RTN","PRPFMR1",41,0)
 Q
"RTN","PRPFMR1",42,0)
SENDSEG ;SEND A SEGMENT OF DATA TO MIGRATION JAVA APP
"RTN","PRPFMR1",43,0)
 S RESULTS=$NA(^TMP("PRPF_EXTDATA",PRPFJ,PRPFSEG))
"RTN","PRPFMR1",44,0)
 Q
"RTN","PRPFMR1",45,0)
 ;***************************************************************
"RTN","PRPFMR1",46,0)
COMPU ;
"RTN","PRPFMR1",47,0)
 S PFNAME=$P($G(^DPT(PRPFHLD1,0)),"^",1)
"RTN","PRPFMR1",48,0)
 S PFSSN=$P($G(^DPT(PRPFHLD1,0)),"^",9)
"RTN","PRPFMR1",49,0)
 I PFNAME="" I PFSSN'="" S PFNAME="NAME-MISSING-SSN#"_PFSSN
"RTN","PRPFMR1",50,0)
 I PFNAME="" I PFSSN="" S PFNAME="NAME-MISSING-NO-SSN-IEN#"_PRPFHLD1
"RTN","PRPFMR1",51,0)
 S PFSSN=$P($G(^DPT(PRPFHLD1,0)),"^",9)
"RTN","PRPFMR1",52,0)
 S PFDOB=$P($G(^DPT(PRPFHLD1,0)),"^",3)
"RTN","PRPFMR1",53,0)
 S PFWARD=$P($G(^DPT(PRPFHLD1,.1)),"^",1)
"RTN","PRPFMR1",54,0)
 S PFCLAIM=$P($G(^DPT(PRPFHLD1,.31)),"^",3)
"RTN","PRPFMR1",55,0)
 S PFADDR1=$P($G(^DPT(PRPFHLD1,.11)),"^",1)
"RTN","PRPFMR1",56,0)
 S PFADDR2=$P($G(^DPT(PRPFHLD1,.11)),"^",2)
"RTN","PRPFMR1",57,0)
 S PFADDR3=$P($G(^DPT(PRPFHLD1,.11)),"^",3)
"RTN","PRPFMR1",58,0)
 S PFCITY=$P($G(^DPT(PRPFHLD1,.11)),"^",4)
"RTN","PRPFMR1",59,0)
 S PFSTATE=$P($G(^DPT(PRPFHLD1,.11)),"^",5)
"RTN","PRPFMR1",60,0)
 S PFZIP=$P($G(^DPT(PRPFHLD1,.11)),"^",6)
"RTN","PRPFMR1",61,0)
 ;S PFICN=$P($G(^DPT(PRPFHLD1,"MPI")),"^",1)
"RTN","PRPFMR1",62,0)
 S PFICN=$P($$GETICN^MPIF001(PRPFHLD1),"^")
"RTN","PRPFMR1",63,0)
 S:PFICN=-1 PFICN=""
"RTN","PRPFMR1",64,0)
 ;S PFSITE=$$KSP^XUPARAM("INST")
"RTN","PRPFMR1",65,0)
 S PFAUTH=$P(^PRPF(470,PRPFHLD1,0),"^",13)
"RTN","PRPFMR1",66,0)
 I PFAUTH S PFAUTHRS=$P($G(^VA(200,PFAUTH,0)),"^",1)
"RTN","PRPFMR1",67,0)
 E  S PFAUTHRS=""
"RTN","PRPFMR1",68,0)
 Q
"RTN","PRPFMR1",69,0)
NODE0 S PFNODE0=^PRPF(470,PRPFHLD1,0)
"RTN","PRPFMR1",70,0)
 S CNTREC=CNTREC+1
"RTN","PRPFMR1",71,0)
 S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"D1"_U_PFNAME_U_PFSSN_U_PFDOB_U_PFWARD_U_PFCLAIM_U_PFADDR1_U_PFADDR2_U_PFADDR3_U_PFCITY_U_PFSTATE_U_PFZIP_U_PFAUTHRS_U_PFNODE12
"RTN","PRPFMR1",72,0)
 D SEG
"RTN","PRPFMR1",73,0)
 S CNTREC=CNTREC+1
"RTN","PRPFMR1",74,0)
 S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"D2"_U_PFNODE0
"RTN","PRPFMR1",75,0)
 D SEG
"RTN","PRPFMR1",76,0)
 Q
"RTN","PRPFMR1",77,0)
NODE1 S PFNODE1=^PRPF(470,PRPFHLD1,1)
"RTN","PRPFMR1",78,0)
 S CNTREC=CNTREC+1
"RTN","PRPFMR1",79,0)
 S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"B1"_U_PFNODE1
"RTN","PRPFMR1",80,0)
 D SEG
"RTN","PRPFMR1",81,0)
 Q
"RTN","PRPFMR1",82,0)
NODE2 S PFNODE2=^PRPF(470,PRPFHLD1,2)
"RTN","PRPFMR1",83,0)
 S CNTREC=CNTREC+1
"RTN","PRPFMR1",84,0)
 S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"B2"_U_PFNODE2
"RTN","PRPFMR1",85,0)
 D SEG
"RTN","PRPFMR1",86,0)
 Q
"RTN","PRPFMR1",87,0)
NODE4 S PRPFHLD2=0
"RTN","PRPFMR1",88,0)
 F  S PRPFHLD2=$O(^PRPF(470,PRPFHLD1,4,PRPFHLD2)) Q:'PRPFHLD2  D
"RTN","PRPFMR1",89,0)
 .S PFNODE4=^PRPF(470,PRPFHLD1,4,PRPFHLD2,0)
"RTN","PRPFMR1",90,0)
 .S PFNODE4D=$P(PFNODE4,"^",2)
"RTN","PRPFMR1",91,0)
 .I $D(^PRPF(470.1,$P(PFNODE4,"^",1),0)) D
"RTN","PRPFMR1",92,0)
 ..S PFNODE4T=^PRPF(470.1,$P(PFNODE4,"^",1),0)
"RTN","PRPFMR1",93,0)
 ..S PFCLERK=$P(PFNODE4T,"^",14)
"RTN","PRPFMR1",94,0)
 ..I $P(PFNODE4T,"^",11) D
"RTN","PRPFMR1",95,0)
 ...S $P(PFNODE4T,"^",11)=$P($G(^PRPF(470.2,$P(PFNODE4T,"^",11),0)),"^",1)
"RTN","PRPFMR1",96,0)
 ..I PFCLERK S PFCLERKN=$P($G(^VA(200,PFCLERK,0)),"^",1)
"RTN","PRPFMR1",97,0)
 ..E  S PFCLERKN=""
"RTN","PRPFMR1",98,0)
 ..S $P(PFNODE4T,"^",14)=PFCLERKN
"RTN","PRPFMR1",99,0)
 ..S CNTREC=CNTREC+1
"RTN","PRPFMR1",100,0)
 ..S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"T1"_U_PFNODE4D_U_PFNODE4T
"RTN","PRPFMR1",101,0)
 ..D SEG
"RTN","PRPFMR1",102,0)
 Q
"RTN","PRPFMR1",103,0)
NODE5 S (PRPFHLD2,PRPFHLD3,PRPFHLD4)=0
"RTN","PRPFMR1",104,0)
 F  S PRPFHLD2=$O(^PRPF(470,PRPFHLD1,5,PRPFHLD2)) Q:'PRPFHLD2  D
"RTN","PRPFMR1",105,0)
 .S PFNODE5=$G(^PRPF(470,PRPFHLD1,5,PRPFHLD2,0))
"RTN","PRPFMR1",106,0)
 .S CNTREC=CNTREC+1
"RTN","PRPFMR1",107,0)
 .S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"S1"_U_PFNODE5
"RTN","PRPFMR1",108,0)
 .D SEG
"RTN","PRPFMR1",109,0)
 .S PRPFHLD3=0
"RTN","PRPFMR1",110,0)
 .F  S PRPFHLD3=$O(^PRPF(470,PRPFHLD1,5,PRPFHLD2,1,PRPFHLD3)) Q:'PRPFHLD3  D
"RTN","PRPFMR1",111,0)
 ..S PFNODE51=$G(^PRPF(470,PRPFHLD1,5,PRPFHLD2,1,PRPFHLD3,0))
"RTN","PRPFMR1",112,0)
 ..S PRPFHLD4=0
"RTN","PRPFMR1",113,0)
 ..I $O(^PRPF(470,PRPFHLD1,5,PRPFHLD2,1,PRPFHLD3,1,PRPFHLD4))'>0 D
"RTN","PRPFMR1",114,0)
 ...S CNTREC=CNTREC+1
"RTN","PRPFMR1",115,0)
 ...S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"S2"_U_PFNODE51_U
"RTN","PRPFMR1",116,0)
 ...D SEG
"RTN","PRPFMR1",117,0)
 ..F  S PRPFHLD4=$O(^PRPF(470,PRPFHLD1,5,PRPFHLD2,1,PRPFHLD3,1,PRPFHLD4)) Q:'PRPFHLD4  D
"RTN","PRPFMR1",118,0)
 ...S PFNODE52=$G(^PRPF(470,PRPFHLD1,5,PRPFHLD2,1,PRPFHLD3,1,PRPFHLD4,0))
"RTN","PRPFMR1",119,0)
 ...I $L(PFNODE52)<128 D
"RTN","PRPFMR1",120,0)
 ....S CNTREC=CNTREC+1
"RTN","PRPFMR1",121,0)
 ....S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"S2"_U_PFNODE51_U_PFNODE52
"RTN","PRPFMR1",122,0)
 ....D SEG
"RTN","PRPFMR1",123,0)
 ...I $L(PFNODE52)>127 D
"RTN","PRPFMR1",124,0)
 ....S PFNODE53=$E(PFNODE52,128,256)
"RTN","PRPFMR1",125,0)
 ....S PFNODE52=$E(PFNODE52,1,127)
"RTN","PRPFMR1",126,0)
 ....S CNTREC=CNTREC+1
"RTN","PRPFMR1",127,0)
 ....S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"S2"_U_PFNODE51_U_PFNODE52
"RTN","PRPFMR1",128,0)
 ....D SEG
"RTN","PRPFMR1",129,0)
 ....S CNTREC=CNTREC+1
"RTN","PRPFMR1",130,0)
 ....S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"S3"_U_PFNODE51_U_PFNODE53
"RTN","PRPFMR1",131,0)
 ....D SEG
"RTN","PRPFMR1",132,0)
 Q
"RTN","PRPFMR1",133,0)
NODE6 S PRPFHLD2=0
"RTN","PRPFMR1",134,0)
 F  S PRPFHLD2=$O(^PRPF(470,PRPFHLD1,6,PRPFHLD2)) Q:'PRPFHLD2  D
"RTN","PRPFMR1",135,0)
 .S PFNODE6=^PRPF(470,PRPFHLD1,6,PRPFHLD2,0)
"RTN","PRPFMR1",136,0)
 .S CNTREC=CNTREC+1
"RTN","PRPFMR1",137,0)
 .S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"I1"_U_PFNODE6
"RTN","PRPFMR1",138,0)
 .D SEG
"RTN","PRPFMR1",139,0)
 Q
"RTN","PRPFMR1",140,0)
NODE7 S PRPFHLD2=0
"RTN","PRPFMR1",141,0)
 F  S PRPFHLD2=$O(^PRPF(470,PRPFHLD1,7,PRPFHLD2)) Q:'PRPFHLD2  D
"RTN","PRPFMR1",142,0)
 .S PFNODE7=^PRPF(470,PRPFHLD1,7,PRPFHLD2,0)
"RTN","PRPFMR1",143,0)
 .I $L(PFNODE7)<128 D
"RTN","PRPFMR1",144,0)
 ..S CNTREC=CNTREC+1
"RTN","PRPFMR1",145,0)
 ..S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"R1"_U_PFNODE7
"RTN","PRPFMR1",146,0)
 ..D SEG
"RTN","PRPFMR1",147,0)
 .I $L(PFNODE7)>127 D
"RTN","PRPFMR1",148,0)
 ..S PFNODE71=$E(PFNODE7,128,256)
"RTN","PRPFMR1",149,0)
 ..S PFNODE7=$E(PFNODE7,1,127)
"RTN","PRPFMR1",150,0)
 ..S CNTREC=CNTREC+1
"RTN","PRPFMR1",151,0)
 ..S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"R1"_U_PFNODE7
"RTN","PRPFMR1",152,0)
 ..D SEG
"RTN","PRPFMR1",153,0)
 ..S CNTREC=CNTREC+1
"RTN","PRPFMR1",154,0)
 ..S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"R2"_U_PFNODE71
"RTN","PRPFMR1",155,0)
 ..D SEG
"RTN","PRPFMR1",156,0)
 Q
"RTN","PRPFMR1",157,0)
NODE8 S PRPFHLD2=0
"RTN","PRPFMR1",158,0)
 F  S PRPFHLD2=$O(^PRPF(470,PRPFHLD1,8,PRPFHLD2)) Q:'PRPFHLD2  D
"RTN","PRPFMR1",159,0)
 .S PFNODE8=^PRPF(470,PRPFHLD1,8,PRPFHLD2,0)
"RTN","PRPFMR1",160,0)
 .I $L(PFNODE8)<128 D
"RTN","PRPFMR1",161,0)
 ..S CNTREC=CNTREC+1
"RTN","PRPFMR1",162,0)
 ..S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"X1"_U_PFNODE8
"RTN","PRPFMR1",163,0)
 ..D SEG
"RTN","PRPFMR1",164,0)
 .I $L(PFNODE8)>127 D
"RTN","PRPFMR1",165,0)
 ..S PFNODE81=$E(PFNODE8,128,256)
"RTN","PRPFMR1",166,0)
 ..S PFNODE8=$E(PFNODE8,1,127)
"RTN","PRPFMR1",167,0)
 ..S CNTREC=CNTREC+1
"RTN","PRPFMR1",168,0)
 ..S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"X1"_U_PFNODE8
"RTN","PRPFMR1",169,0)
 ..D SEG
"RTN","PRPFMR1",170,0)
 ..S CNTREC=CNTREC+1
"RTN","PRPFMR1",171,0)
 ..S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTXREC_U_"X2"_U_PFNODE81
"RTN","PRPFMR1",172,0)
 ..D SEG
"RTN","PRPFMR1",173,0)
 Q
"RTN","PRPFMR1",174,0)
NODE12 ;CHECK STATION ID
"RTN","PRPFMR1",175,0)
 I $D(^PRPF(470,PRPFHLD1,12)) I ^PRPF(470,PRPFHLD1,12)'="" D
"RTN","PRPFMR1",176,0)
 .S:$D(^DIC(4,$G(^PRPF(470,PRPFHLD1,12)),99)) PFNODE12=$P($G(^DIC(4,$G(^PRPF(470,PRPFHLD1,12)),99)),"^",1)
"RTN","PRPFMR1",177,0)
 .S:'$D(^DIC(4,$G(^PRPF(470,PRPFHLD1,12)),99)) PFNODE12=PFSITE
"RTN","PRPFMR1",178,0)
 S:'$D(^PRPF(470,PRPFHLD1,12)) PFNODE12=PFSITE
"RTN","PRPFMR1",179,0)
 S:PFNODE12="" PFNODE12=PFSITE
"RTN","PRPFMR1",180,0)
 ;S CNTREC=CNTREC+1
"RTN","PRPFMR1",181,0)
 ;S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_PFSSN_U_PFICN_U_CNTREC_U_"12"_U_PFNODE12
"RTN","PRPFMR1",182,0)
 ;S ^TMP("PRPF_EXTDATA",$J,CNTSEG,CNTREC)="VPFS"_U_PFSITE_U_PRPFHLD1_U_U_U_CNTREC_U_"12"_U_PFNODE12
"RTN","PRPFMR1",183,0)
 ;D SEG
"RTN","PRPFMR1",184,0)
 Q
"RTN","PRPFMR1",185,0)
SEG ;SET UP NEW SEGMENT NODE
"RTN","PRPFMR1",186,0)
 S CNTXREC=CNTXREC+1
"RTN","PRPFMR1",187,0)
 D:CNTREC=10000
"RTN","PRPFMR1",188,0)
 .S CNTSEG=CNTSEG+1
"RTN","PRPFMR1",189,0)
 .S CNTTOT=CNTTOT+CNTREC
"RTN","PRPFMR1",190,0)
 .S CNTREC=0
"RTN","PRPFMR1",191,0)
 Q
"RTN","PRPFMR1",192,0)
OUT ;WRITE OUT TO DEVICE
"RTN","PRPFMR1",193,0)
 S CNTTOT=CNTTOT+CNTREC
"RTN","PRPFMR1",194,0)
 W !
"RTN","PRPFMR1",195,0)
 W !,"Please enter the output device for the detail report or ""^"" to exit:"
"RTN","PRPFMR1",196,0)
 S %ZIS("B")="",%ZIS("HFSMODE")="W" D ^%ZIS K XION R X:2
"RTN","PRPFMR1",197,0)
 I POP K ^TMP("PRPF_EXTDATA") Q
"RTN","PRPFMR1",198,0)
 U IO
"RTN","PRPFMR1",199,0)
 W "VPFS"_U_PFSITE_U_U_U_U_"0"_U_"A1"_U_CNTPREC_U_CNTXREC
"RTN","PRPFMR1",200,0)
 F  S PFX=$O(^TMP("PRPF_EXTDATA",$J,PFX)) Q:PFX=""  D
"RTN","PRPFMR1",201,0)
 .F  S PFXX=$O(^TMP("PRPF_EXTDATA",$J,PFX,PFXX)) Q:PFXX=""  D
"RTN","PRPFMR1",202,0)
 ..W !,^TMP("PRPF_EXTDATA",$J,PFX,PFXX)
"RTN","PRPFMR1",203,0)
 D ^%ZISC
"RTN","PRPFMR1",204,0)
 K ^TMP("PRPF_EXTDATA")
"RTN","PRPFMR1",205,0)
 Q
"RTN","PRPFMR1",206,0)
KILLIT ;KILL LOCAL VARIABLES
"RTN","PRPFMR1",207,0)
 K CNTPREC,CNTREC,CNTSEG,CNTTOT,CNTXREC,PARAMS,PFADDR1,PFADDR2,PFADDR3
"RTN","PRPFMR1",208,0)
 K PFAUTH,PFAUTHRS,PFCITY,PFCLAIM,PFCLERK,PFCLERKN,PFDOB,PFG
"RTN","PRPFMR1",209,0)
 K PFICN,PFNAME,PFNODE0,PFNODE1,PFNODE12,PFNODE2,PFNODE4,PFNODE4D
"RTN","PRPFMR1",210,0)
 K PFNODE4T,PFNODE5,PFNODE51,PFNODE52,PFNODE53,PFNODE6,PFNODE7
"RTN","PRPFMR1",211,0)
 K PFNODE71,PFNODE8,PFNODE81,PFSITE,PFSSN,PFSTATE,PFWARD,PFX
"RTN","PRPFMR1",212,0)
 K PFXX,PFZIP,POP,PRPFHLD1,PRPFHLD2,PRPFHLD3,PRPFHLD4,PRPFJ
"RTN","PRPFMR1",213,0)
 K PRPFOUT1,PRPFSEG,X
"RTN","PRPFMR1",214,0)
 Q
"RTN","PRPFMR2")
0^8^B1579962^n/a
"RTN","PRPFMR2",1,0)
PRPFMR2 ;BAYPINES/MJE  VPFS APP PROXY CREATOR ;06/15/05
"RTN","PRPFMR2",2,0)
 ;;3.0;PATIENT FUNDS - MIGRATION 5.0;**16**;JUNE 1, 1989
"RTN","PRPFMR2",3,0)
 ;ENTRY AT LINETAG ONLY
"RTN","PRPFMR2",4,0)
 Q
"RTN","PRPFMR2",5,0)
ADDPROXY ; add VPFS application proxy user account if not present
"RTN","PRPFMR2",6,0)
 ; depends on XU*8*361
"RTN","PRPFMR2",7,0)
 N XOBID
"RTN","PRPFMR2",8,0)
 W !,""
"RTN","PRPFMR2",9,0)
 W !," ****************** PROXY INSTALL RESULT ******************************"
"RTN","PRPFMR2",10,0)
 S XOBID=$$CREATE^XUSAP("VPFS,APPLICATION PROXY","","DGRR PATIENT SERVICE QUERY","")
"RTN","PRPFMR2",11,0)
 I (+XOBID)>0 D
"RTN","PRPFMR2",12,0)
 .W !," THE VPFS APPLICATION PROXY USER ACCOUNT HAS BEEN SUCCESSFULLY CREATED!"
"RTN","PRPFMR2",13,0)
 I (+XOBID)=0 D
"RTN","PRPFMR2",14,0)
 .W !," WARNING: THE VPFS APPLICATION PROXY USER ACCOUNT ALREADY PRESENT!!"
"RTN","PRPFMR2",15,0)
 I (+XOBID)<0 D
"RTN","PRPFMR2",16,0)
 .W !," ERROR: THE VPFS APPLICATION PROXY USER ACCOUNT COULD NOT BE CREATED!!!"
"RTN","PRPFMR2",17,0)
 W !," **********************************************************************"
"RTN","PRPFMR2",18,0)
 W !,""
"RTN","PRPFMR2",19,0)
 K XOBID
"VER")
8.0^22.0
"BLD",5124,6)
^19
**END**
**END**

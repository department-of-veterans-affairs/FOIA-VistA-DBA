$TXT Created by PAJERSKI,JAN at MNTVBB.ISC-ALBANY.VA.GOV  (KIDS) on WEDNESDAY, 04/01/98 at 14:51
=============================================================================
Run Date: JUN 04, 1998                     Designation: DVBA*2.7*19
Package : DVBA - AUTOMATED MED INFO Priority: Mandatory
Version : 2.7        SEQ #18                    Status: Released
=============================================================================

Associated patches: (v)DVBA*2.7*13 <<= must be installed BEFORE `DVBA*2.7*19'
                    (v)DVBA*2.7*17 <<= must be installed BEFORE `DVBA*2.7*19'

Subject: CLEAN UP NOIS ISSUES

Category: 
  - Routine

Description: 
============

   The routine modifications included in this patch have been made to 
   address issues raised in the following NOIS and E3R entries: 
   
   MAD-0497-41434
   BAN-0497-10632
   CLA-0997-20738
   MCM-0198-50872
   E3R #8509
   E3R #10778  
   
   (1) Routine DVBCADR has been revised as follows:
   
       In subroutine MAIL, the call to EN^XMB has been changed to ^XMB.
       This resolves the problem where a bulletin for "Editing of 
       patient address" was leaving behind the ^TMP("XMBTEXT",$J,
       global whenever the Edit Patient Address Information [DVBA C 
       EDIT PAT ADDRESS] option was used.  Then when the same user 
       proceeded to the Enter a C&P Exam Request [DVBA C ENTER C&P
       REQUEST] option, a "New C&P Veteran Added to Patient File"
       bulletin was issued.  Because ^TMP("XMBTEXT",$J, existed with
       data (i.e., the address data from the previous option), it was
       being appended to the new patient bulletin.  Using ^XMB rather
       than EN^XMB will insure that ^TMP("XMBTEXT",$J, is always
       deleted after a bulletin is issued.
     
       (NOIS MAD-0497-41434)
       
   (2) Routine DVBCNTSC has been revised as follows:
       
       Subroutine GO1 will check for existence of the "TRAN" node
       within each 2507 EXAM file (#396.4) record in order to ascertain
       whether the exam has been transferred to another facility.
       Previously, only the STATUS field (#.04) of the record was being
       checked for a status code of "T".  But transferred exams which
       have been completed will have a status code of "C".  This caused
       requests for these transferred exams to appear on the Report of
       Exams Not Scheduled in Three Days [DVBA C NOT SCHEDULED IN 
       3 DAYS].
   
       (NOIS BAN-0497-10632)
   
   (3) Routines DVBCIUTL, DVBCIRPT, and DVBCIRP1 have been modified to
       enhance the Insufficient Exam Report [DVBA C INSUFFICIENT EXAM
       RPT].
   
       Four additional data items will appear on this report:
    
       Total insufficient 2507 requests cancelled by RO for date range
       % of uncancelled insufficient requests per total requests received
       Total insufficient 2507 exams cancelled by RO for date range
       % of uncancelled insufficient exams per total exams received
    
       Please note that the section of the report which shows Summary of 
       insufficient exams per Reason has not been modified.  The figures
       presented here will continue to reflect percentages for all exams,
       cancelled as well as uncancelled.
    
       (NOIS CLA-0997-20738, E3R #8509)
    
   (4) The routine DVBCREQ1 has been modified to correct and improve
       the output from Manual Printing of New C&P Requests [DVBA C 
       PRINT NEW C&P REQUESTS].
   
       If any line of text within the REMARKS field (#23) of the 2507
       REQUEST file (#396.3) record contained more than 75 characters,
       the end characters were lost when printing to a device with
       an 80 column output.  This has been corrected by removing the
       N(o wrap) parameter from the DIWF variable in the call to ^DIWP.
      
       (NOIS MCM-0198-50872)
    
       If the length of the Remarks section causes the request to be
       continued on a second page, then the patient's name and SSN
       will be printed on the second page header.
    
       (E3R #10778)
       
     
   ROUTINE SUMMARY:
   ================
   The following is a list of the routine(s) included in this patch.  The
   second line of each of these routine(s) will look like:
   
       <tab>;;2.7;AMIE;**[patch list]**;Apr 10, 1995
   
                              CHECK^XTSUMBLD results
   
   Routine name        Before Patch       After Patch      Patch List
   ============        ============       ===========      ==========
   DVBCADR                5562753            5561437             19
   DVBCIRP1              11040294           11043099          13,19
   DVBCIRPT               3963493            4415237          13,19
   DVBCIUTL               5573723            6633231       13,17,19
   DVBCNTSC               9570510            9068942           2,19
   DVBCREQ1               9905931            9998272             19
   
    
   INSTALLATION INSTRUCTIONS:
   ==========================
   
   This patch can be loaded with users on the system. 
   
   Installation will take less than 2 minutes.  
    
   1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
       the KIDS distribution included with this message.
     
   2.  Review your mapped set.  If any of the routines listed in the
       ROUTINE SUMMARY section are mapped, they should be removed
       from the mapped set at this time.
   
   3.  From the Kernel Installation and Distribution System Menu, select 
       the Installation menu.  
    
   4.  From this menu, you may elect to use the following options
       (when prompted for INSTALL NAME, enter DVBA*2.7*19):
   
       a. Backup a Transport Global - This option will create a backup 
          message of any routines exported with this patch. It will not 
          backup any other changes such as DD's or templates.  
       b. Compare Transport Global to Current System - This option will 
          allow you to view all changes that will be made when this patch 
          is installed. It compares all components of this patch 
          (routines, DD's, templates, etc.).  
       c. Verify Checksums in Transport Global - This option will allow 
          you to ensure the integrity of the routines that are in the 
          transport global.  
    
   5.  Use the Install Package(s) option and select the package DVBA*2.7*19.
   
   6.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? YES//', respond YES.  When prompted to select the options
       you would like to place out of order, enter the following:
      
          Enter a C&P Exam Request          [DVBA C ENTER C&P REQUEST]
          Edit Patient Address Information  [DVBA C EDIT PAT ADDRESS]
          Manual Printing of New C&P
          Requests                          [DVBA C PRINT NEW C&P REQUESTS]
          Insufficient Exam Report          [DVBA C INSUFFICIENT EXAM RPT]
          Report of Exams Not Scheduled
          in Three Days                     [DVBA C NOT SCHEDULED IN 3 DAYS]
    
   7.  If routines were unmapped as part of step 2, they should be returned
       to the mapped set once the installation has run to completion.
   

Routine Information:
====================

Routine Name:
  - DVBCADR


Routine Checksum:

Routine Name:
  - DVBCIRP1


Routine Checksum:

Routine Name:
  - DVBCIRPT


Routine Checksum:

Routine Name:
  - DVBCIUTL


Routine Checksum:

Routine Name:
  - DVBCNTSC


Routine Checksum:

Routine Name:
  - DVBCREQ1


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : PAJERSKI,JAN                   Date Entered : MAR 17, 1998
Completed By: RUBIN,ALICE                   Date Completed: MAY 29, 1998
Released By : NELSON,VICKI M               Date Released : JUN 04, 1998
=============================================================================


Packman Mail Message:
=====================

$END TXT

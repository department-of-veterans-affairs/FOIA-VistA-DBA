Released IB*2*236 SEQ #215
Extracted from mail message
**KIDS**:IB*2.0*236^

**INSTALL NAME**
IB*2.0*236
"BLD",4319,0)
IB*2.0*236^INTEGRATED BILLING^0^3030731^y
"BLD",4319,1,0)
^^1^1^3030730^^^
"BLD",4319,1,1,0)
INTERIM ADDRESS ENHANCEMENT
"BLD",4319,4,0)
^9.64PA^^
"BLD",4319,"INIT")
EN^IB20P236
"BLD",4319,"KRN",0)
^9.67PA^8989.52^19
"BLD",4319,"KRN",.4,0)
.4
"BLD",4319,"KRN",.401,0)
.401
"BLD",4319,"KRN",.402,0)
.402
"BLD",4319,"KRN",.402,"NM",0)
^9.68A^1^1
"BLD",4319,"KRN",.402,"NM",1,0)
IB SCREEN1    FILE #399^399^0
"BLD",4319,"KRN",.402,"NM","B","IB SCREEN1    FILE #399",1)

"BLD",4319,"KRN",.403,0)
.403
"BLD",4319,"KRN",.5,0)
.5
"BLD",4319,"KRN",.84,0)
.84
"BLD",4319,"KRN",3.6,0)
3.6
"BLD",4319,"KRN",3.8,0)
3.8
"BLD",4319,"KRN",9.2,0)
9.2
"BLD",4319,"KRN",9.8,0)
9.8
"BLD",4319,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",4319,"KRN",9.8,"NM",1,0)
IBCSCE^^0^B14171985
"BLD",4319,"KRN",9.8,"NM",2,0)
IB20P236^^0^B529776
"BLD",4319,"KRN",9.8,"NM","B","IB20P236",2)

"BLD",4319,"KRN",9.8,"NM","B","IBCSCE",1)

"BLD",4319,"KRN",19,0)
19
"BLD",4319,"KRN",19.1,0)
19.1
"BLD",4319,"KRN",101,0)
101
"BLD",4319,"KRN",409.61,0)
409.61
"BLD",4319,"KRN",771,0)
771
"BLD",4319,"KRN",870,0)
870
"BLD",4319,"KRN",8989.51,0)
8989.51
"BLD",4319,"KRN",8989.52,0)
8989.52
"BLD",4319,"KRN",8994,0)
8994
"BLD",4319,"KRN","B",.4,.4)

"BLD",4319,"KRN","B",.401,.401)

"BLD",4319,"KRN","B",.402,.402)

"BLD",4319,"KRN","B",.403,.403)

"BLD",4319,"KRN","B",.5,.5)

"BLD",4319,"KRN","B",.84,.84)

"BLD",4319,"KRN","B",3.6,3.6)

"BLD",4319,"KRN","B",3.8,3.8)

"BLD",4319,"KRN","B",9.2,9.2)

"BLD",4319,"KRN","B",9.8,9.8)

"BLD",4319,"KRN","B",19,19)

"BLD",4319,"KRN","B",19.1,19.1)

"BLD",4319,"KRN","B",101,101)

"BLD",4319,"KRN","B",409.61,409.61)

"BLD",4319,"KRN","B",771,771)

"BLD",4319,"KRN","B",870,870)

"BLD",4319,"KRN","B",8989.51,8989.51)

"BLD",4319,"KRN","B",8989.52,8989.52)

"BLD",4319,"KRN","B",8994,8994)

"BLD",4319,"QUES",0)
^9.62^^
"BLD",4319,"REQB",0)
^9.611^2^2
"BLD",4319,"REQB",1,0)
DG*5.3*522^2
"BLD",4319,"REQB",2,0)
IB*2.0*137^2
"BLD",4319,"REQB","B","DG*5.3*522",1)

"BLD",4319,"REQB","B","IB*2.0*137",2)

"INIT")
EN^IB20P236
"KRN",.402,1071,-1)
0^1
"KRN",.402,1071,0)
IB SCREEN1^3030730.1135^@^399^^@^3030730
"KRN",.402,1071,"%D",0)
^^1^1^2920708^^
"KRN",.402,1071,"%D",1,0)
Enter/Edit billing screen 1, demographic information.
"KRN",.402,1071,"DIAB",1,0,399,0)
.02:
"KRN",.402,1071,"DIAB",1,2,2.01,0)
ALL
"KRN",.402,1071,"DR",1,399)
^2^DPT(^^S I(0,0)=D0 S Y(1)=$S($D(^DGCR(399,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S D(0)=+X S X=$S(D(0)>0:D(0),1:"");S:IBDR20'["16" Y="@17";110;@17;S:IBDR20'["17" Y="@18";I $D(DFN) D DIS^DGRPDB W !!;.18;@18;D:IBDR20[11 DEM^VADPT;
"KRN",.402,1071,"DR",2,2)
S:IBDR20'["11" Y="@12";.03;@12;S:IBDR20'["12" Y="@13";1;@13;S:IBDR20'["13" Y="@14";.02;.05;@14;S:IBDR20'["14" Y="@15";1901;.361;@15;S:IBDR20'["15" Y="@16";S:$$EDADDR^IBCSCE(+$G(DFN)) Y="@155";.111;S:X="" Y=.114;.112;S:X="" Y=.114;
"KRN",.402,1071,"DR",2,2,1)
.113;.114;.115;.1112;.117;.131;@155;.12105;S:X="N" Y="@915" S:X="Y" DIE("NO^")="";.1217;I X']"" W !?4,*7,"But I need a Start Date for this Temporary Address." S Y=.12105;.1218;.1211;
"KRN",.402,1071,"DR",2,2,2)
I X']"" W !?4,*7,"But I need at least one line of a Temporary address." S Y=.12105;.1212;S:X']"" Y=.1214;.1213;.1214;.1215;.12112;.1219;@915;K DIE("NO^");@16;
"KRN",.402,1071,"DR",3,2.01)
.01:1
"KRN",.402,1071,"ROU")
^IBXSC1
"KRN",.402,1071,"ROUOLD")
IBXSC1
"MBREQ")
0
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^2^1
"PKG",200,20,2,0)
2^^IBAXDR
"PKG",200,20,2,1)

"PKG",200,20,"B",2,2)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
236^3030731
"PKG",200,22,1,"PAH",1,1,0)
^^1^1^3030731
"PKG",200,22,1,"PAH",1,1,1,0)
INTERIM ADDRESS ENHANCEMENT
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","IB20P236")
0^2^B529776
"RTN","IB20P236",1,0)
IB20P236 ;WOIFO/SS-PATCH INSTALL ROUTINE ;7/30/03
"RTN","IB20P236",2,0)
 ;;2.0;INTEGRATED BILLING;**236**;21-MAR-94
"RTN","IB20P236",3,0)
 ;File #399 input template compilation routine
"RTN","IB20P236",4,0)
 Q  ;stub
"RTN","IB20P236",5,0)
EN ;entry point for post-install routine
"RTN","IB20P236",6,0)
 ;re-compile template
"RTN","IB20P236",7,0)
 N DMAX,IBX,Y,X,IBMAX
"RTN","IB20P236",8,0)
 D BMES^XPDUTL("Recompilation of [IB SCREEN1] Input Template:")
"RTN","IB20P236",9,0)
 S IBMAX=^DD("ROU")
"RTN","IB20P236",10,0)
 S IBX="IB SCREEN1"
"RTN","IB20P236",11,0)
 S Y=$O(^DIE("B",IBX,0)) Q:'Y
"RTN","IB20P236",12,0)
 I $D(^DIE(Y,"ROUOLD")),^("ROUOLD")]"",$D(^(0)) D
"RTN","IB20P236",13,0)
 . S X=$P(^("ROUOLD"),"^"),DMAX=IBMAX
"RTN","IB20P236",14,0)
 . D EN^DIEZ
"RTN","IB20P236",15,0)
 Q
"RTN","IB20P236",16,0)
 ;
"RTN","IBCSCE")
0^1^B14171985
"RTN","IBCSCE",1,0)
IBCSCE ;ALB/MRL,MJB - MCCR SCREEN EDITS ;07 JUN 88 14:35
"RTN","IBCSCE",2,0)
 ;;2.0;INTEGRATED BILLING;**52,80,91,106,51,137,236**;21-MAR-94
"RTN","IBCSCE",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","IBCSCE",4,0)
 ;
"RTN","IBCSCE",5,0)
 ;MAP TO DGCRSCE
"RTN","IBCSCE",6,0)
 ; always do procedures last because they are edited upon return to screen routine
"RTN","IBCSCE",7,0)
 I IBDR20["54," S IBDR20=$P(IBDR20,"54,",1)_$P(IBDR20,"54,",2)_"54,"
"RTN","IBCSCE",8,0)
 I IBDR20["44," S IBDR20=$P(IBDR20,"44,",1)_$P(IBDR20,"44,",2)_"44,"
"RTN","IBCSCE",9,0)
LOOP N IBDRLP,IBDRL S IBDRLP=IBDR20 F IBDRL=1:1 S IBDR20=$P(IBDRLP,",",IBDRL) Q:IBDR20=""  D EDIT
"RTN","IBCSCE",10,0)
 Q
"RTN","IBCSCE",11,0)
EDIT N IBQUERY
"RTN","IBCSCE",12,0)
 I (IBDR20["31") D MCCR^IBCNSP2 G ENQ
"RTN","IBCSCE",13,0)
 I (IBDR20["43")!(IBDR20["52") D ^IBCSC4D G ENQ
"RTN","IBCSCE",14,0)
 I (IBDR20["74")!(IBDR20["53") K DR N I D ^IBCOPV S (DA,Y)=IBIFN G TMPL
"RTN","IBCSCE",15,0)
 I (IBDR20["54"),$P($G(^IBE(350.9,1,1)),"^",17) K DR N I D EN1^IBCCPT(.IBQUERY) D CLOSE^IBSDU(.IBQUERY) G TMPL ;
"RTN","IBCSCE",16,0)
 I (IBDR20["55") D ^IBCSC5A G ENQ
"RTN","IBCSCE",17,0)
 I (IBDR20["45")!(IBDR20["56") D ^IBCSC5B G ENQ
"RTN","IBCSCE",18,0)
 I (IBDR20["66")!(IBDR20["76") D EDIT^IBCRBE(IBIFN) G ENQ
"RTN","IBCSCE",19,0)
 I (IBDR20["87") D EN1^IBCEP6 G ENQ
"RTN","IBCSCE",20,0)
 F Q=1:1:9 I IBDR20[("9"_Q) D EDIT^IBCSC9 G ENQ
"RTN","IBCSCE",21,0)
TMPL N IBFLIAE S IBFLIAE=1 ;to invoke EN^DGREGAED from [IB SCREEN1]
"RTN","IBCSCE",22,0)
 S DR="[IB SCREEN"_IBSR_IBSR1_"]",(DA,Y)=IBIFN,DIE="^DGCR(399,"
"RTN","IBCSCE",23,0)
 D ^DIE K DIE,DR,DLAYGO
"RTN","IBCSCE",24,0)
 I (IBDR20["15") S DR="110///"_$$PTADD^IBCU(+$P(^DGCR(399,IBIFN,0),U,2),"PSA"),(DA,Y)=IBIFN,DIE="^DGCR(399," D ^DIE K DIE,DR
"RTN","IBCSCE",25,0)
ENQ K DIE,DR,IBDR1,IBDR20,DGDRD,DGDRS,DGDRS1,DA Q
"RTN","IBCSCE",26,0)
 ;
"RTN","IBCSCE",27,0)
 ; W I "^11^12^13^15^14^21^22^23^"[("^"_J_"^") G W1
"RTN","IBCSCE",28,0)
 ; I "^44^"[("^"_J_"^") S DR(2,399.0304)=".01;1;I $D(IBIP),X<$P(IBIP,""^"",2)!($P(IBIP,""^"",6)&(X>$P(IBIP,""^"",6))) K X"
"RTN","IBCSCE",29,0)
 ; I "^64^"[("^"_J_"^") S DR(2,399.042)=".01:.03;"
"RTN","IBCSCE",30,0)
 ; I $T(@J) S DGDRD=$P($T(@J),";;",2) D S S K=(J*10) I $T(@K) S DGDRD=$P($T(@K),";;",2) D S
"RTN","IBCSCE",31,0)
 ; D ^IBCSCE1:("^31^")[("^"_J_"^") Q
"RTN","IBCSCE",32,0)
 ; W1 I @DGDRS["^2^DPT(^^D SET^IBCSCE;" D ^IBCSCE1 Q
"RTN","IBCSCE",33,0)
 ; S DGDRD="^2^DPT(^^D SET^IBCSCE;" D S,^IBCSCE1 Q
"RTN","IBCSCE",34,0)
 ; S I $L(@DGDRS)+$L(DGDRD)<241 S @DGDRS=@DGDRS_DGDRD Q
"RTN","IBCSCE",35,0)
 ; S DGCT=DGCT+1,DGDRS="DR(1,399,"_DGCT_")",@DGDRS=DGDRD Q
"RTN","IBCSCE",36,0)
 ; Q
"RTN","IBCSCE",37,0)
16 ;;110;
"RTN","IBCSCE",38,0)
17 ;;.18;
"RTN","IBCSCE",39,0)
31 ;;.07;S X=$P(^DGCR(399,DA,0),U,11);S Y="@"_$S(X']"":31,X="p":31,X="o":311,1:310);@310;D 1^IBCSCH1 S Y="@"_$S(IBADI=-1:31,'IBADI:312,1:313);@313;^2^DPT(^^D SET^IBCSCE;D UPDT^IBCSCE;@312;
"RTN","IBCSCE",40,0)
310 ;;101;102;103;S Y="@31";@311;D INST^IBCU;111;K DIC("DR"),DLAYGO;@31;
"RTN","IBCSCE",41,0)
32 ;;104;105;106;121;107;108;109
"RTN","IBCSCE",42,0)
41 ;;S:IBPTF Y="@411";159.5;@411;160;159;158;
"RTN","IBCSCE",43,0)
42 ;;162;
"RTN","IBCSCE",44,0)
43 ;;I IBPTF S Y="@943";64;65;66;67;68;S Y="@43";@943;D DX^IBCSC4B;@43;
"RTN","IBCSCE",45,0)
44 ;;S IBZ20=$P(^DGCR(399,DA,0),U,9);.09;D PRO^IBCSC4B;S IBASKCOD=1
"RTN","IBCSCE",46,0)
45 ;;41;
"RTN","IBCSCE",47,0)
46 ;;40;
"RTN","IBCSCE",48,0)
51 ;;.03;
"RTN","IBCSCE",49,0)
999 ;;64;65;66;67;68;
"RTN","IBCSCE",50,0)
52 ;;64;S:X="" Y="@99";65;S:X="" Y="@99";66;S:X="" Y="@99";67;S:X="" Y="@99";68;@99;
"RTN","IBCSCE",51,0)
53 ;;;;same as 74
"RTN","IBCSCE",52,0)
54 ;;S IBZ20=$P(^DGCR(399,DA,0),U,9);.09;S IBASKCOD=1
"RTN","IBCSCE",53,0)
55 ;;41;
"RTN","IBCSCE",54,0)
56 ;;40;
"RTN","IBCSCE",55,0)
61 ;;.06;164;
"RTN","IBCSCE",56,0)
62 ;;155;S:X=0 Y=156;157;156;S:'$D(IBOX) Y="@62";153;@62;
"RTN","IBCSCE",57,0)
63 ;;151;152;
"RTN","IBCSCE",58,0)
64 ;;161;165;
"RTN","IBCSCE",59,0)
65 ;;D RCD^IBCU1;42;202;S:'X Y=201;203;201;I $P(^DGCR(399,DA,"U1"),"^",11)']"" S Y="@65";210;@65;
"RTN","IBCSCE",60,0)
71 ;;.06;164;
"RTN","IBCSCE",61,0)
72 ;;155;S:X=0 Y=156;157;156;S:'$D(IBOX) Y="@72";153;@72;
"RTN","IBCSCE",62,0)
73 ;;151;152;
"RTN","IBCSCE",63,0)
74 ;;S:$D(IBOUT) Y="@999";43;@999;K IBOUT;
"RTN","IBCSCE",64,0)
75 ;;D RCD^IBCU1;42;202;S:'X Y=201;203;201;I $P(^DGCR(399,DA,"U1"),"^",11)']"" S Y="@75";210;@75;
"RTN","IBCSCE",65,0)
81 ;;208;
"RTN","IBCSCE",66,0)
82 ;;204;
"RTN","IBCSCE",67,0)
83 ;;205;
"RTN","IBCSCE",68,0)
84 ;;206;
"RTN","IBCSCE",69,0)
85 ;;207;
"RTN","IBCSCE",70,0)
86 ;;163;
"RTN","IBCSCE",71,0)
 ; AD S X=$S($D(^DPT(DA,.11)):^(.11),1:""),IBPHO=$S($D(^(.13)):$P(^(.13),U,1),1:""),Y=$S($D(^(IBADD)):^(IBADD),1:""),^(IBADD)=$P(Y,U,1)_U_$P(Y,U,2)_U_$P(X,U,1,6)_U_IBPHO_U_$P(Y,U,10) K IBADD,IBPHO Q
"RTN","IBCSCE",72,0)
 ; SET S I(0,0)=D0,Y(1)=$S($D(^DGCR(399,D0,0)):^(0),1:""),X=$P(Y(1),"^",2),D(0)=X,X=$S(D(0)>0:D(0),1:"") Q
"RTN","IBCSCE",73,0)
 ;called by screen 3 (input template)
"RTN","IBCSCE",74,0)
UPDT F IBDD=0:0 S IBDD=$O(^DPT(DFN,.312,IBDD)) Q:IBDD'>0  S IBI1=^DPT(DFN,.312,IBDD,0) I $D(^DIC(36,+IBI1,0)),$P(^(0),"^",2)'="N" S IBDD(+IBI1)=IBI1
"RTN","IBCSCE",75,0)
 F IBAIC=0:0 S IBAIC=$O(^DGCR(399,IBIFN,"AIC",IBAIC)) Q:IBAIC'>0  I $D(IBDD(IBAIC)) F IBI1="I1","I2","I3" I $D(^DGCR(399,IBIFN,IBI1)),+^(IBI1)=IBAIC,^(IBI1)'=IBDD(IBAIC) S ^DGCR(399,IBIFN,IBI1)=IBDD(IBAIC)
"RTN","IBCSCE",76,0)
 K IBAIC,IBDD,IBI1 Q
"RTN","IBCSCE",77,0)
 ;
"RTN","IBCSCE",78,0)
 ;Edit patient's address using DGREGAED API
"RTN","IBCSCE",79,0)
EDADDR(IBDFN) ;
"RTN","IBCSCE",80,0)
 I $G(IBFLIAE)'=1!(IBDFN=0) Q 0
"RTN","IBCSCE",81,0)
 N IBFL S IBFL(1)=1
"RTN","IBCSCE",82,0)
 N X,Y,DIE,DA,DR,DIDEL,DIW,DIEDA,DG,DICR
"RTN","IBCSCE",83,0)
 D EN^DGREGAED(IBDFN,.IBFL)
"RTN","IBCSCE",84,0)
 Q 1
"RTN","IBCSCE",85,0)
 ;IBCSCE
"VER")
8.0^22
**END**
**END**

Released DG*5.3*459 SEQ #507
Extracted from mail message
**KIDS**:DG*5.3*459^

**INSTALL NAME**
DG*5.3*459
"BLD",3607,0)
DG*5.3*459^REGISTRATION^0^3040303^y
"BLD",3607,1,0)
^^1^1^3020711^
"BLD",3607,1,1,0)
REMOVAL OF WORKLOAD CAPTURE FROM REGISTRATION
"BLD",3607,4,0)
^9.64PA^^
"BLD",3607,"ABPKG")
n
"BLD",3607,"KRN",0)
^9.67PA^8989.52^19
"BLD",3607,"KRN",.4,0)
.4
"BLD",3607,"KRN",.401,0)
.401
"BLD",3607,"KRN",.402,0)
.402
"BLD",3607,"KRN",.403,0)
.403
"BLD",3607,"KRN",.5,0)
.5
"BLD",3607,"KRN",.84,0)
.84
"BLD",3607,"KRN",3.6,0)
3.6
"BLD",3607,"KRN",3.8,0)
3.8
"BLD",3607,"KRN",9.2,0)
9.2
"BLD",3607,"KRN",9.8,0)
9.8
"BLD",3607,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",3607,"KRN",9.8,"NM",1,0)
DGDIS^^0^B24974607
"BLD",3607,"KRN",9.8,"NM",2,0)
DGREGE^^0^B13823984
"BLD",3607,"KRN",9.8,"NM","B","DGDIS",1)

"BLD",3607,"KRN",9.8,"NM","B","DGREGE",2)

"BLD",3607,"KRN",19,0)
19
"BLD",3607,"KRN",19.1,0)
19.1
"BLD",3607,"KRN",101,0)
101
"BLD",3607,"KRN",409.61,0)
409.61
"BLD",3607,"KRN",771,0)
771
"BLD",3607,"KRN",870,0)
870
"BLD",3607,"KRN",8989.51,0)
8989.51
"BLD",3607,"KRN",8989.52,0)
8989.52
"BLD",3607,"KRN",8994,0)
8994
"BLD",3607,"KRN","B",.4,.4)

"BLD",3607,"KRN","B",.401,.401)

"BLD",3607,"KRN","B",.402,.402)

"BLD",3607,"KRN","B",.403,.403)

"BLD",3607,"KRN","B",.5,.5)

"BLD",3607,"KRN","B",.84,.84)

"BLD",3607,"KRN","B",3.6,3.6)

"BLD",3607,"KRN","B",3.8,3.8)

"BLD",3607,"KRN","B",9.2,9.2)

"BLD",3607,"KRN","B",9.8,9.8)

"BLD",3607,"KRN","B",19,19)

"BLD",3607,"KRN","B",19.1,19.1)

"BLD",3607,"KRN","B",101,101)

"BLD",3607,"KRN","B",409.61,409.61)

"BLD",3607,"KRN","B",771,771)

"BLD",3607,"KRN","B",870,870)

"BLD",3607,"KRN","B",8989.51,8989.51)

"BLD",3607,"KRN","B",8989.52,8989.52)

"BLD",3607,"KRN","B",8994,8994)

"BLD",3607,"QUES",0)
^9.62^^
"BLD",3607,"REQB",0)
^9.611^1^1
"BLD",3607,"REQB",1,0)
PX*1.0*116^2
"BLD",3607,"REQB","B","PX*1.0*116",1)

"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2941102^2941102
"PKG",5,22,1,"PAH",1,0)
459^3040303
"PKG",5,22,1,"PAH",1,1,0)
^^1^1^3040303
"PKG",5,22,1,"PAH",1,1,1,0)
REMOVAL OF WORKLOAD CAPTURE FROM REGISTRATION
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","DGDIS")
0^1^B24974607
"RTN","DGDIS",1,0)
DGDIS ;ALB/JDS - DISPOSITION A REGISTRATION ; 26 AUG 84  14:09
"RTN","DGDIS",2,0)
 ;;5.3;Registration;**108,121,161,151,459**;Aug 13, 1993
"RTN","DGDIS",3,0)
 ;
"RTN","DGDIS",4,0)
 D LO^DGUTL
"RTN","DGDIS",5,0)
GETL S L=^DG(43,1,0),DISL=+$P(L,"^",7) S:DISL=0 DISL=24 N SDISHDL
"RTN","DGDIS",6,0)
FIND W !! S DIC("A")="Disposition PATIENT: ",DIC="^DPT(",DIC(0)="AEQMZ",DIC("S")="I $D(^DPT(""ADA"",1,+Y))" D ^DIC K DIC("S"),DIC("A") G Q:Y'>0 S (DA,DFN,DGDFN)=+Y
"RTN","DGDIS",7,0)
 S I=+$O(^DPT(DA,"DIS",0)),L=$S($D(^(I,0)):^(0),1:""),(DA,DFN1,DGDFN1)=I,SDL=L ;I $P(L,"^",6)?7N.E!(L="") W !!,"There are no open registrations to disposition for this patient.",!!,*7,*7 K DA,DFN1 G FIND
"RTN","DGDIS",8,0)
DP W !!,"LOG DATE",?20,"TYPE OF BENEFIT APPLIED FOR",! F I=1:1:47 W "-"
"RTN","DGDIS",9,0)
 S L2=";"_$P(^DD(2.101,2,0),"^",3),L3=";"_$P(L,"^",3)_":"
"RTN","DGDIS",10,0)
 W !,$$FMTE^XLFDT($E($P(L,U),1,12),"5Z"),?20,$P($P(L2,L3,2),";",1)
"RTN","DGDIS",11,0)
 S DGODSND=L
"RTN","DGDIS",12,0)
ANS ;
"RTN","DGDIS",13,0)
 ;** DG*5.3*108; Eligibility Code and Period of Service Checks follow
"RTN","DGDIS",14,0)
 W !! S DR="1;2;2.1;13;5//NOW;D CHT^DGDIS;8"_$S(DUZ'="":";9////"_DUZ,1:""),DIE="^DPT("_DFN_",""DIS"",",DA(1)=DFN,DP=2.101 D ^DIE I $S('$D(^DPT(DFN,"DIS",DA,0)):1,'$P(^(0),"^",6):1,1:0) G DEL
"RTN","DGDIS",15,0)
 N DGPOSX,DGELIGX,DGSTRX
"RTN","DGDIS",16,0)
 S DGELIGX=$S('$D(^DPT(DFN,.36)):1,$P(^(.36),"^",1)']"":1,1:0)
"RTN","DGDIS",17,0)
 S DGPOSX=$S('$D(^DPT(DFN,.32)):1,$P(^(.32),"^",3)']"":1,1:0)
"RTN","DGDIS",18,0)
 I (DGELIGX)&(DGPOSX) W !!,"Primary Eligibility Code and Period of Service are unspecified." K DGPOSX,DGELIGX,DGSTRX G DEL
"RTN","DGDIS",19,0)
 I (DGELIGX)&('DGPOSX) W !!,"Primary Eligibility Code is unspecified." K DGPOSX,DGELIGX,DGSTRX G DEL
"RTN","DGDIS",20,0)
 I ('DGELIGX)&(DGPOSX) W !!,"Period of Service is unspecified." K DGPOSX,DGELIGX,DGSTRX G DEL
"RTN","DGDIS",21,0)
 ;S DGXXXD=0 D EL^DGREGE
"RTN","DGDIS",22,0)
DISP W ! S DIC="^DIC(37,",DIC(0)="AEQMZ",DIC("A")="Select the type of disposition: ",DIC("S")="I '$P(^(0),""^"",10)" D ^DIC K DIC("A"),DIC("B") I Y'>0 G DEL:X?1"^".E W !!,"A disposition must be entered to continue.",!!,*7,*7 G DISP
"RTN","DGDIS",23,0)
 D ODS
"RTN","DGDIS",24,0)
 S DR="" I $P(Y(0),"^",1)["INELIG" S DIE("NO^")="",DR="2.1;"
"RTN","DGDIS",25,0)
 S DR=DR_"S:'DGODS Y=6;11500.01////1;11500.02////^S X=$S(DGODSE>0:DGODSE,1:"""");"
"RTN","DGDIS",26,0)
 S DR=DR_"6///"_(+Y),DISP=+Y,DA=DFN1,DP=2.101,DA(1)=DFN D ^DIE K DIE("NO^") S DDT=$S($D(^DPT(DFN,"DIS",DA,0)):^(0),1:""),DGDIV=+$P(DDT,"^",4),DDT=$P(DDT,"^",6) S:'DGDIV DGDIV=""
"RTN","DGDIS",27,0)
 I $P(^DG(43,1,0),U,30) S %ZIS="N",IOP="HOME" D ^%ZIS I $D(IOS),IOS,$D(^%ZIS(1,+IOS,99)),$D(^%ZIS(1,+^(99),0)) S Y=$P(^(0),U,1),DGIO(10)=Y
"RTN","DGDIS",28,0)
 S X=$S($D(^DG(40.8,+DGDIV,"DEV")):^("DEV"),1:"1^1^1") S:'$D(DGIO(10)) DGIO(10)=$S($P(X,U,1)]"":$P(X,U,1),1:1)
"RTN","DGDIS",29,0)
 S DFN=DGDFN,DFN1=DGDFN1,DGXXXD=0,DIE="^DPT("_DFN_",""DIS""," D EL^DGREGE
"RTN","DGDIS",30,0)
 D MT
"RTN","DGDIS",31,0)
 D EN1^DGEN(DFN) ;enrollment
"RTN","DGDIS",32,0)
 W !!,"***** Registration dispositioned *****",!!,*7
"RTN","DGDIS",33,0)
 D VALIDATE(DFN,DFN1) ; -- call c/o validator
"RTN","DGDIS",34,0)
 D ACT
"RTN","DGDIS",35,0)
 K DGDFN1,DGDOM,DGHEM,DGKAAS,DGL,DGNHCU,DGW,MASD,MASDEV,PARA,POP
"RTN","DGDIS",36,0)
DONE D Q G FIND
"RTN","DGDIS",37,0)
 ;
"RTN","DGDIS",38,0)
Q K %H,%Y,C,D0,D1,DG1,DGA1,DGDFN1,DGL,DGT,DQ,I1,SD321,SDDIV,SDL,VA,VAROOT,Z,DGDFN,DIC,DGIO,DDT,DISP,DGDIV,DA,DR,DFN,DFN1,L,I,Y,X,DIE,DIC,DP
"RTN","DGDIS",39,0)
 K DGODS,DGODSND,SDISDEL Q
"RTN","DGDIS",40,0)
 ;
"RTN","DGDIS",41,0)
CHT S L=^DPT(DA(1),"DIS",DA,0),DGL=0,L2=+$P(L,"^",6),(L1,X)=+L D H^%DTC S LL1=%H,X=L2 D H^%DTC S LL2=%H
"RTN","DGDIS",42,0)
 S X1=L1#1*10000,X2=L2#1*10000 S:LL2-LL1 X2=X2+(LL2-LL1*2400\1) S X3=X2\100-(X1\100),X2=X2#100,X1=X1#100 S:X1'<X2 X2=X2+60,X3=X3-1
"RTN","DGDIS",43,0)
 S Y=$S(DUZ'="":9,1:0) S:X3'<DISL Y=8,DGL=1 Q
"RTN","DGDIS",44,0)
 ;
"RTN","DGDIS",45,0)
DEL S L=$S($D(^DPT(DFN,"DIS",DFN1,0)):^(0),1:0),X=$P(L,U,6) I X S $P(^(0),U,6)="" F I=0:0 S I=$O(^DD(2.101,5,1,I)) Q:'I  X ^(I,2)
"RTN","DGDIS",46,0)
 I $P($G(^DPT(DFN,"DIS",DFN1,0)),"^",18) D EN^SDCODEL(+$P(^(0),"^",18),1,SDISHDL)
"RTN","DGDIS",47,0)
 D Q W !!,"* Disposition deleted *",!!,*7,*7 G FIND
"RTN","DGDIS",48,0)
 ;
"RTN","DGDIS",49,0)
ODS ;if operation desert shield admission, create an entry in the ODS ADMISSIONS file
"RTN","DGDIS",50,0)
 N DIE,DGDISTYP
"RTN","DGDIS",51,0)
 S DGODS=0,DGDISTYP=+Y
"RTN","DGDIS",52,0)
 I $P(Y(0),"^",1)["ADMIT"!($P(Y(0),"^",1)["ADMISSION"&($P(Y(0),"^",1)'["SCHEDULED")) Q  ;don't store dispositions to admit
"RTN","DGDIS",53,0)
 N Y D PT^DGYZODS I 'DGODS Q
"RTN","DGDIS",54,0)
 S A1B2FL=11500.4,A1B2DT=+DGODSND D ADD^A1B2UTL S (DA,DGODSE)=+Y
"RTN","DGDIS",55,0)
 S DIE="^A1B2(11500.4,",DR=".02////^S X=DGODS;.05////^S X=DGDISTYP;" D ^DIE
"RTN","DGDIS",56,0)
 K DIE,DA Q
"RTN","DGDIS",57,0)
 ;
"RTN","DGDIS",58,0)
MT ;Check if user requires a means test.  Ask user if s/he wants to
"RTN","DGDIS",59,0)
 ;proceed if one is required.
"RTN","DGDIS",60,0)
 N DGREQF
"RTN","DGDIS",61,0)
 D EN^DGMTR
"RTN","DGDIS",62,0)
 I $P($$MTS^DGMTU(DFN),U,2)="R" D EDT^DGMTU(DFN,DT)
"RTN","DGDIS",63,0)
 Q
"RTN","DGDIS",64,0)
 ;
"RTN","DGDIS",65,0)
ACT ;Execute Program Action
"RTN","DGDIS",66,0)
 N DFN1
"RTN","DGDIS",67,0)
 S DGDFN=DFN I $D(^DIC(37,DISP,"P")),^("P")]"" X ^("P")
"RTN","DGDIS",68,0)
 Q
"RTN","DGDIS",69,0)
 ;
"RTN","DGDIS",70,0)
BEFORE(DFN,SDDT,SDEVT,SDISHDL) ; -- set 'before' vars for opt evt drv
"RTN","DGDIS",71,0)
 ; -- use tag for NEWing
"RTN","DGDIS",72,0)
 N DA,DFN1,DGDFN,DGDFN1,DGODSND
"RTN","DGDIS",73,0)
 D BEFORE^SDAMEVT3(.DFN,.SDDT,.SDEVT,.SDISHDL)
"RTN","DGDIS",74,0)
 Q
"RTN","DGDIS",75,0)
 ;
"RTN","DGDIS",76,0)
EVT(DFN,SDDT,SDEVT,SDISHDL) ; -- opt evt drv
"RTN","DGDIS",77,0)
 ; -- use tag for NEWing
"RTN","DGDIS",78,0)
 N DIV,DFN1,DGDFN,SDL,DGDIV,DISP,SD321,SDDIV,I,DGDFN1,DGDOM,DGHEM,DGKAAS,DGL,DGNHCU,DGW,MASD,MASDEV,PARA,POP
"RTN","DGDIS",79,0)
 D EVT^SDAMEVT3(.DFN,.SDDT,.SDEVT,.SDISHDL)
"RTN","DGDIS",80,0)
 Q
"RTN","DGDIS",81,0)
 ;
"RTN","DGDIS",82,0)
VALIDATE(DFN,DFN1) ; -- c/o validator
"RTN","DGDIS",83,0)
 ; -- use tag for NEWing
"RTN","DGDIS",84,0)
 N DIV,DGDFN,SDL,DGDIV,DISP,SD321,SDDIV,I,DGDFN1,DGDOM,DGHEM,DGKAAS,DGL,DGNHCU,DGW,MASD,MASDEV,PARA,POP
"RTN","DGDIS",85,0)
 ;
"RTN","DGDIS",86,0)
 N DGDIS0,DGOE,DGOE0,DGVST
"RTN","DGDIS",87,0)
 S DGDIS0=$G(^DPT(+DFN,"DIS",+DFN1,0))
"RTN","DGDIS",88,0)
 I "^0^1^"[(U_$P(DGDIS0,"^",2)_U) D
"RTN","DGDIS",89,0)
 . ;
"RTN","DGDIS",90,0)
 . ; -- get encounter
"RTN","DGDIS",91,0)
 . S DGOE=+$P(DGDIS0,U,18)
"RTN","DGDIS",92,0)
 . IF 'DGOE Q
"RTN","DGDIS",93,0)
 . ;
"RTN","DGDIS",94,0)
 . ; -- get encounter and visit
"RTN","DGDIS",95,0)
 . S DGOE0=$$GETOE^SDOE(DGOE)
"RTN","DGDIS",96,0)
 . S DGVST=+$P(DGOE0,U,5)
"RTN","DGDIS",97,0)
 . IF 'DGVST Q
"RTN","DGDIS",98,0)
 . ;
"RTN","DGDIS",99,0)
 . ; -- validate disposition
"RTN","DGDIS",100,0)
 . D FINAL^SCDXHLDR(DGVST)
"RTN","DGDIS",101,0)
 Q
"RTN","DGREGE")
0^2^B13823984
"RTN","DGREGE",1,0)
DGREGE ;ALB/JDS - EDIT REGISTRATIONS/DISPOSITIONS ; 26 AUG 84  14:50
"RTN","DGREGE",2,0)
 ;;5.3;Registration;**24,161,151,459**;Aug 13, 1993
"RTN","DGREGE",3,0)
 N SDISHDL
"RTN","DGREGE",4,0)
A W !! S DIC=2,DIC(0)="AEQM" D ^DIC K DIC G Q:Y<0 S (DFN,DA)=+Y
"RTN","DGREGE",5,0)
 I '$O(^DPT(DA,"DIS",0)) W !!,"No registrations to print from.",!! G A
"RTN","DGREGE",6,0)
F11 R !!,"Registration date/time: ",X:DTIME G A:'$T!(X?1"^".E)!(X=""),NUM:$L(X)<7 S %DT="T" D ^%DT S DFN1=9999999-Y G W1:$D(^DPT(DA,"DIS",DFN1)) W !!
"RTN","DGREGE",7,0)
HELP W ! S J=0 F I=0:0 S I=$O(^DPT(DA,"DIS",I)) Q:'I  S J=J+1,L=+(^(I,0))_"00000" W $J(J,2),".  ",$$FMTE^XLFDT($E(L,1,12),"5Z") W ?$X\40+1*40 W:$X>75 ! Q:J>20
"RTN","DGREGE",8,0)
 W !,"Enter the date and time, Entry #, or 'L' for the last registration,",!," to select the registration you wish to edit" G F11
"RTN","DGREGE",9,0)
NUM ; choose by number of find last registration
"RTN","DGREGE",10,0)
 S DFN1=0
"RTN","DGREGE",11,0)
 I X="L" S DFN1=$O(^DPT(DA,"DIS",0)) ; get last
"RTN","DGREGE",12,0)
 F I=1:1:+X S DFN1=$O(^DPT(DA,"DIS",DFN1)) Q:'DFN1
"RTN","DGREGE",13,0)
 G HELP:'DFN1
"RTN","DGREGE",14,0)
 W "   ",$$FMTE^XLFDT(9999999-DFN1,"5Z"),!!
"RTN","DGREGE",15,0)
W1 S DA=DFN1,DA(1)=DFN,L=$G(^DPT(DFN,"DIS",DFN1,0)),DP=2.101,DR=$S($P(L,U,6):"[DGREGE]",1:"[DGREGEO]")
"RTN","DGREGE",16,0)
 I $P(L,U,18) S SDISHDL=$$HANDLE^SDAMEVT(3) D BEFORE^DGDIS(DFN,9999999-DFN1,9,SDISHDL)
"RTN","DGREGE",17,0)
 S DIE="^DPT(",DA=DFN D ^DIE K DE,DQ,DIE,DR S DIE="^DPT("_DFN_",""DIS"",",DGXXXD=0 D EL
"RTN","DGREGE",18,0)
 N DGL
"RTN","DGREGE",19,0)
 S DGL=$G(^DPT(DFN,"DIS",DFN1,0))
"RTN","DGREGE",20,0)
 I $P(DGL,U,18) D
"RTN","DGREGE",21,0)
 . I "^0^1^"[(U_$P(DGL,U,2)_U),$P(DGL,U,6) D CO(DFN,9999999-DFN1,SDISHDL)
"RTN","DGREGE",22,0)
 . D EVT^DGDIS(DFN,9999999-DFN1,9,SDISHDL)
"RTN","DGREGE",23,0)
 . D VALIDATE^DGDIS(DFN,DFN1) ; -- call c/o validator
"RTN","DGREGE",24,0)
 G A
"RTN","DGREGE",25,0)
 ;
"RTN","DGREGE",26,0)
Q K %,%H,%X,%Y,C,D0,D1,DA,DFN,DFN1,DIE,DP,I,J,L,X,Y
"RTN","DGREGE",27,0)
 Q
"RTN","DGREGE",28,0)
 ;
"RTN","DGREGE",29,0)
DT I Y X ^DD("DD") W Y
"RTN","DGREGE",30,0)
 Q
"RTN","DGREGE",31,0)
EL W !!,"Updating eligibility status for this registration...",!
"RTN","DGREGE",32,0)
 S DA=DFN1,DIE("NO^")="",DA(1)=DFN,DP=2.101,DGXXX=$S($D(^DPT(DFN,.361)):$P(^(.361),"^",1),1:""),DGXXX1=$S($D(^DPT(DFN,"DIS",DFN1,0)):^(0),1:"") Q:'DGXXX1  S DGXXX2=+$P(DGXXX1,"^",13),DR="14///"_$S(DGXXX="V":1,1:0)
"RTN","DGREGE",33,0)
 I $D(^DIC(8,DGXXX2,0)),$P(^(0),"^",5)="Y",$P(^(0),"^",4)=1!($P(^(0),"^",4)=3) S DGXXX3=$S($D(^DPT(DFN,.3)):$P(^(.3),"^",2),1:""),DR=DR_";15///1;16//"_DGXXX3
"RTN","DGREGE",34,0)
 E  S DR=DR_";15///NO"
"RTN","DGREGE",35,0)
 S:$P(DGXXX1,"^",17) DR=DR_";17///@" D ^DIE G ELQ:DGXXXD
"RTN","DGREGE",36,0)
 S DGXXXD=0 D SEG^DGA4004 I DGSEG W !!,"Disposition on AMIS Segment ",DGSEG," - ",$S($D(^DG(391.1,+DGSEG,0)):$P(^(0),"^",1),1:"SEGMENT NAME UNKNOWN") K DR S DR="17///"_DGSEG D ^DIE K DE,DQ,DIE,DR
"RTN","DGREGE",37,0)
 E  W !!,"Patient falls into a means test category...AMIS 401-420 segment will be",!,"determined at time the report is generated..."
"RTN","DGREGE",38,0)
ELQ W ! K DGXXX,DGXXX1,DGXXX2,DGXXX3,DGXXXD,DR,DIE("NO^"),DGSEG Q
"RTN","DGREGE",39,0)
 ;
"RTN","DGREGE",40,0)
CO(DFN,SDDT,SDISHDL) ; -- ask check out questions
"RTN","DGREGE",41,0)
 N DFN1,SDCOQUIT,SDIS,SDOE,SDPMTDF
"RTN","DGREGE",42,0)
 S SDOE=$$GETDISP^SDVSIT2(DFN,SDDT) G COQ:'SDOE
"RTN","DGREGE",43,0)
 S SDIS=$G(^DPT(DFN,"DIS",9999999-SDDT,0))
"RTN","DGREGE",44,0)
 I '$$SCE^DGSDU(+SDOE,7,0)!($P($G(^TMP("SDEVT",$J,SDISHDL,3,"DIS",0,"BEFORE")),"^",13)'=$P(SDIS,"^",13)) D INT^SDCO6(SDOE,.SDCOQUIT)
"RTN","DGREGE",45,0)
 I '$D(SDCOQUIT) D
"RTN","DGREGE",46,0)
 .S SDPMTDF=$S($P(^DG(43,1,0),"^",32):1,$P($G(^DIC(37,+$P(SDIS,"^",7),0)),"^")="SCHEDULE FUTURE APPOINTMENT":1,1:0)
"RTN","DGREGE",47,0)
 . I $$ASK^SDCO6(SDPMTDF) D EN^SDCO(SDOE,SDISHDL,1)
"RTN","DGREGE",48,0)
COQ Q
"VER")
8.0^22.0
**END**
**END**

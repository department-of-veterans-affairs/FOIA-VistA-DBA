Released DG*5.3*758 SEQ #671
Extracted from mail message
**KIDS**:DG*5.3*758^

**INSTALL NAME**
DG*5.3*758
"BLD",6811,0)
DG*5.3*758^REGISTRATION^0^3070625^y
"BLD",6811,4,0)
^9.64PA^^
"BLD",6811,6.3)
1
"BLD",6811,"INID")
n^n^n
"BLD",6811,"KRN",0)
^9.67PA^8989.52^19
"BLD",6811,"KRN",.4,0)
.4
"BLD",6811,"KRN",.401,0)
.401
"BLD",6811,"KRN",.402,0)
.402
"BLD",6811,"KRN",.403,0)
.403
"BLD",6811,"KRN",.5,0)
.5
"BLD",6811,"KRN",.84,0)
.84
"BLD",6811,"KRN",3.6,0)
3.6
"BLD",6811,"KRN",3.8,0)
3.8
"BLD",6811,"KRN",9.2,0)
9.2
"BLD",6811,"KRN",9.8,0)
9.8
"BLD",6811,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6811,"KRN",9.8,"NM",1,0)
DGENRPT5^^0^B5391862
"BLD",6811,"KRN",9.8,"NM","B","DGENRPT5",1)

"BLD",6811,"KRN",19,0)
19
"BLD",6811,"KRN",19.1,0)
19.1
"BLD",6811,"KRN",101,0)
101
"BLD",6811,"KRN",409.61,0)
409.61
"BLD",6811,"KRN",771,0)
771
"BLD",6811,"KRN",870,0)
870
"BLD",6811,"KRN",8989.51,0)
8989.51
"BLD",6811,"KRN",8989.52,0)
8989.52
"BLD",6811,"KRN",8994,0)
8994
"BLD",6811,"KRN","B",.4,.4)

"BLD",6811,"KRN","B",.401,.401)

"BLD",6811,"KRN","B",.402,.402)

"BLD",6811,"KRN","B",.403,.403)

"BLD",6811,"KRN","B",.5,.5)

"BLD",6811,"KRN","B",.84,.84)

"BLD",6811,"KRN","B",3.6,3.6)

"BLD",6811,"KRN","B",3.8,3.8)

"BLD",6811,"KRN","B",9.2,9.2)

"BLD",6811,"KRN","B",9.8,9.8)

"BLD",6811,"KRN","B",19,19)

"BLD",6811,"KRN","B",19.1,19.1)

"BLD",6811,"KRN","B",101,101)

"BLD",6811,"KRN","B",409.61,409.61)

"BLD",6811,"KRN","B",771,771)

"BLD",6811,"KRN","B",870,870)

"BLD",6811,"KRN","B",8989.51,8989.51)

"BLD",6811,"KRN","B",8989.52,8989.52)

"BLD",6811,"KRN","B",8994,8994)

"BLD",6811,"QUES",0)
^9.62^^
"BLD",6811,"REQB",0)
^9.611^1^1
"BLD",6811,"REQB",1,0)
DG*5.3*725^2
"BLD",6811,"REQB","B","DG*5.3*725",1)

"MBREQ")
0
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2930813
"PKG",5,22,1,"PAH",1,0)
758^3070625
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","DGENRPT5")
0^1^B5391862^B5443273
"RTN","DGENRPT5",1,0)
DGENRPT5 ;ALB/DW,LBD,GAH,PHH - EGT Impact Report Utility; 06/21/2007
"RTN","DGENRPT5",2,0)
 ;;5.3;Registration;**568,725,758**;Aug 13,1993;Build 1
"RTN","DGENRPT5",3,0)
 ;
"RTN","DGENRPT5",4,0)
 ;
"RTN","DGENRPT5",5,0)
 Q
"RTN","DGENRPT5",6,0)
GETAPPT(TYPE) ; Set up array of Patient IENs for SD API to process
"RTN","DGENRPT5",7,0)
 N VETARRAY,PIEN,PNAME,RCNT,ACNT,DGARRAY,SDCNT,I
"RTN","DGENRPT5",8,0)
 S ACNT=1,RCNT=0
"RTN","DGENRPT5",9,0)
 S PNAME="" F  S PNAME=$O(^TMP($J,TYPE,PNAME)) Q:PNAME=""  D
"RTN","DGENRPT5",10,0)
 .S PIEN=0 F  S PIEN=$O(^TMP($J,TYPE,PNAME,PIEN)) Q:'PIEN  D
"RTN","DGENRPT5",11,0)
 ..S RCNT=RCNT+1,VETARRAY(ACNT)=$G(VETARRAY(ACNT))_PIEN_";"
"RTN","DGENRPT5",12,0)
 ..; Group DFNs by no more than twenty records
"RTN","DGENRPT5",13,0)
 ..I RCNT>19 S ACNT=ACNT+1,RCNT=0
"RTN","DGENRPT5",14,0)
 ;
"RTN","DGENRPT5",15,0)
 ; Call SD API by array of Patient DFNs
"RTN","DGENRPT5",16,0)
 F I=1:1 Q:'$D(VETARRAY(I))  D
"RTN","DGENRPT5",17,0)
 .S DGARRAY("FLDS")="1;2;3;10",DGARRAY(4)=VETARRAY(I)
"RTN","DGENRPT5",18,0)
 .S SDCNT=$$SDAPI^SDAMA301(.DGARRAY)
"RTN","DGENRPT5",19,0)
 .I SDCNT<0 D
"RTN","DGENRPT5",20,0)
 ..N ERR,ERROR,CNT
"RTN","DGENRPT5",21,0)
 ..S ERR=$O(^TMP($J,"SDAMA301",""))
"RTN","DGENRPT5",22,0)
 ..D
"RTN","DGENRPT5",23,0)
 ...I ERR=101 S ERROR="Appt. DB unavail. Try later" Q
"RTN","DGENRPT5",24,0)
 ...I ERR=115 S ERROR="Invalid reqst, Call help desk" Q
"RTN","DGENRPT5",25,0)
 ...I ERR=117 S ERROR="Error:  Check RSA error log" Q
"RTN","DGENRPT5",26,0)
 ...I ERR=113 S ERROR="Bad appt,pat stat fltr combo" Q
"RTN","DGENRPT5",27,0)
 ...I ERR=109 S ERROR="Invalid appt status filter" Q
"RTN","DGENRPT5",28,0)
 ...S ERROR=^TMP($J,"SDAMA301",ERR)
"RTN","DGENRPT5",29,0)
 ..F CNT=1:1:$L(VETARRAY(I),";")-1 S ^TMP($J,"SDAMA",$P(VETARRAY(I),";",CNT),"ERROR")=ERROR
"RTN","DGENRPT5",30,0)
 .;
"RTN","DGENRPT5",31,0)
 .I SDCNT>0 M ^TMP($J,"SDAMA")=^TMP($J,"SDAMA301")
"RTN","DGENRPT5",32,0)
 .K ^TMP($J,"SDAMA301")
"RTN","DGENRPT5",33,0)
 .K DGARRAY
"RTN","DGENRPT5",34,0)
 Q
"RTN","DGENRPT5",35,0)
 ;
"RTN","DGENRPT5",36,0)
BLDUTL(DFN) ; Build Utility Global Entries for records processed
"RTN","DGENRPT5",37,0)
 Q:'$D(^TMP($J,"SDAMA",DFN))
"RTN","DGENRPT5",38,0)
 N CLIEN,APPTDT,NODE,APPTNUM S APPTNUM=1
"RTN","DGENRPT5",39,0)
 S CLIEN=0  F  S CLIEN=$O(^TMP($J,"SDAMA",DFN,CLIEN)) Q:'CLIEN  D
"RTN","DGENRPT5",40,0)
 .S APPTDT=0 F  S APPTDT=$O(^TMP($J,"SDAMA",DFN,CLIEN,APPTDT)) Q:'APPTDT  D
"RTN","DGENRPT5",41,0)
 ..Q:APPTDT'>DT
"RTN","DGENRPT5",42,0)
 ..S NODE=^TMP($J,"SDAMA",DFN,CLIEN,APPTDT)
"RTN","DGENRPT5",43,0)
 ..S ^UTILITY("VASD",$J,APPTNUM,"E")=$$FMTE^DILIBF($P(NODE,U),"5U")_U_$P($P(NODE,U,2),";",2)_U_U_$P($P(NODE,U,10),";",2)
"RTN","DGENRPT5",44,0)
 ..S ^UTILITY("VASD",$J,APPTNUM,"I")=NODE,APPTNUM=APPTNUM+1
"RTN","DGENRPT5",45,0)
 K ^TMP($J,"SDAMA",DFN)
"RTN","DGENRPT5",46,0)
 Q
"VER")
8.0^22.0
"BLD",6811,6)
^671
**END**
**END**

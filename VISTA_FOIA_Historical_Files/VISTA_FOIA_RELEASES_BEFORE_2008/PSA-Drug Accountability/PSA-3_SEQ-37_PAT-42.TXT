$TXT Created by WESLEY,PAUL at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 06/07/05 at 14:59
=============================================================================
Run Date: AUG 08, 2005                     Designation: PSA*3*42
Package : PSA - DRUG ACCOUNTABILITY           Priority: Mandatory
Version : 3        SEQ #37                      Status: Released
                  Compliance Date: SEP 08, 2005
=============================================================================

Associated patches: (v)PSA*3*21    <<= must be installed BEFORE `PSA*3*42'

Subject: DRUG PRICE UPDATES, DRUG LOCATION MAIL MESSAGE, VARIANCE REPORTS

Category: 
  - Routine

Description:
============

 This patch addresses the following problems:
   
 1.    HD68526  Price updates into the Drug file (#50) are failing due to
 current logic that both order units and dispense units between the matched
 drug and the invoice must be equal before updating. Also, the reporting
 and/or representation of which drugs are about to have order units, costs,
 dispense units, and/or NDCs  (National Drug Codes) is hard to read, not
 concise, and unwanted changes are being overlooked.
  
 2.    HD85690  Drugs that are added to pharmacy locations are initially
 setup with a minimum of information and need to be completed manually by 
 the pharmacy staff. A method of notification is needed to let the 
 pharmacy staff know which drugs are needing completion.
  
 3.    HD68611  Invoice items that have a zero quantity are updating 
 inventory costing for dispensing. This results in a miss-representation 
 of costs being presented for statistics and being billed to third party 
 insurances.
  
 4.    HD97002  Updating of Order Unit (OU), Dispense Unit per Order Unit
 (DUOU), Price Per Order Unit (PPOU) is depending on there being  
 differences in the Price Per Dispense Unit (PPDU)  between the invoice and
 the DRUG file (#50). In this case a bottle of 1000 tablets at $6.60
 changed to a bottle of 500 tablets at  $3.30. The error in logic saw the
 PPDUs equal and did not update the DUOU, PPOU, nor OU.
  
 5.    HD97003  The proper updating of NDC was found to be dependant on OUs
 and DUOUs being the same between the incoming invoice and the existing
 entry in the DRUG file (#50) when there are no changes in PPDU. NDC
 updating should not be dependent on those conditions.
  
 ASSOCIATED REMEDY:
 =======================
 HD68526
 HD85690
 HD68611
 HD97002
 HD97003
  
 ASSOCIATED E3R(s):
 ==================
 N/A
  
 PARTICIPATING TEST SITES:
 =========================
 INDIANAPOLIS, IN
 LAS VEGAS, NV 
 MARYLAND HCS 
 PUGET SOUND HCS
 SPOKANE, WA
 UPSTATE NEW YORK HCS
  
 REMEDY OVERVIEW:
 ====================
 1.     HD68526    CLL-1204-40999  PRICE/NDC NOT UPDATING
 Problem:
 -------- 
 Price updates into the Drug file (#50) are failing due to logic that both 
 order units and dispense units between the matched drug and the invoice 
 must be equal before updating. The reporting and/or representation of 
 which drugs are about to have order units, costs, dispense units, and/or 
 NDCs is hard to read, not concise, and unwanted changes are being 
 overlooked.
  
    Resolution:
    -----------  
 The logic blocking cost updating has been removed. New formatted variance 
 reports are now available as mailman messages to the members of the G.NDC 
 PRICE UPDATES for pre and post verification reviews of drugs and their 
 invoice changes. 
  
 The invoice processor will see a notification that pre-verification 
 variances have been found and a mailman message has been generated. 
  
 PRE Verify C502396064 : 72299264 Variance Report
  
 Noted differences between the invoice line items and the drug file have
 been found. A mail message is being sent to G.PSA NDC UPDATES.
  
     Please check the message for accuracy.
 <cr> - continue:
  
 The pre verification variance report will look like:
   
 Subj: PRE Verify C502396064 : 72299264 Variance Report  [#1985889]
 03/30/05@13:24  12 lines
 From: WESLEY,PAUL  In 'IN' basket.   Page 1
 --------------------------------------------------------------------------
 -----
 PRE Verify C502396064 : 72299264 Variance Report
  
   1   ACETAMINOPHEN WITH CODEINE 30MG
    DUOU     Old: 1000              New: 4
    OU       Old: BT                New: BX
    PPDU     Old: 0.0400            New: 5.0000
   
   2   METHADONE 10MG TAB
    DUOU     Old: 20                New: 1
    NDC      Old: 000054-4571-25    New: 00054-4571-25
    PPDU     Old: 1.0000            New: 20.0000
  
 Enter message action (in IN basket): Ignore//
 = = = = = 
  
 The current report DRUG file Price/NDC Update is replaced by the new 
 report :
  
 Subj: POST Verify C502396300 : 7229924063 Variance Report  [#1985968]
 03/31/05@17:30  12 lines
 From: WESLEY,PAUL  In 'IN' basket.   Page 1
 --------------------------------------------------------------------------
 -----
 POST Verify C502396300 : 7229924063 Variance Report
   1   ACETAMINOPHEN WITH CODEINE 30MG
    DUOU     Old: 20                New: 500
    OU       Old: CO                New: AM
    PPDU     Old: 1.0000            New: 1.2000
   2   METHADONE 10MG TAB
    DUOU     Old: 1                 New: 80
    OU       Old: CO                New: BT
    PPDU     Old: 20.0000           New: 0.1120
   
 TECHNICAL:
 ========== 
  
 PSAPROC7 has been modified to generate the pre verification variance 
 report.
  
 PSAVER7 has been modified to remove the blocking updating logic, insure 
 proper Drug file (#50) fields are being updated, and remove the current 
 DRUG file Price/NDC Update report.
  
 PSAVERA3 has been modified to insure proper Drug file (#50) fields are 
 being updated.
  
 PSAVER6 has been modified to generate the post verification variance 
 report.
  
 PSAULT6 has been created to provide APIs that will pull the invoice line 
 item field elements into an array from the Drug Accountability Order file 
 #58.811 and its various sub and sub-sub levels in either external or 
 internal formats.
  
 2.     HD85690   New drugs are added to pharmacy locations and are only 
 partially setup.
  
 Problem:
 ======== 
 Drugs that are added to pharmacy locations are initially setup with a 
 minimum of information and need to be completed manually by the pharmacy 
 staff. A method of notification is needed to let the pharmacy staff know 
 which drugs are needing completion.
  
 Resolution:
 =========== 
 A mailman message is now being generated to go to the holders of the keys 
 PSAMGR and PSDMGR when a drug is added to a pharmacy location.
  
 Example:
  
 Subj: FENTANYL 0.05MG/ML 5ML S.S. added to OUTPATIENT CLEVELAND
 [#1981947] 03/01/05@19:23  4 lines
 From: WESLEY,PAUL  In 'IN' basket.   Page 1
 --------------------------------------------------------------------------
 FENTANYL 0.05MG/ML 5ML S.S. added to OUTPATIENT CLEVELAND
 by Drug Accountability on Mar 01, 2005
 C502395500 7229924055 CS
 Please complete the drug's setup with CS or DA menus.
  
 Enter message action (in IN basket): Ignore//
  
 TECHNICAL:
 ==========
 PSAVER6 has been modified to generate mailman messages regarding addition 
 of drugs to pharmacy locations.
  
 3.     HD68611  ANN-0105-40229  ZERO amount transactions
  
 Problem:
 ======== 
 Invoice items that have a zero quantity are updating inventory costing 
 for dispensing. This results in a miss-representation of costs being 
 presented for statistics and being billed third party insurances.
  
 Resolution:
 =========== 
 PSAVER6 has been modified to block the Drug file (#50) updating of 
 pricing for invoice line items that have a zero quantity.
  
 4.     HD97002    PSAVER7  Updating OU, DUOU, PPOU, and PPDU
 Problem:
 ======== 
 Updating of Order Unit (OU), Dispense Unit per Order Unit (DUOU), Price 
 Per Order Unit (PPOU) is depending on there being  differences in the 
 Price Per Dispense Unit (PPDU)  between the invoice and the DRUG file 
 (#50). In this case a bottle of 1000 tablets at $6.60 changed to a bottle 
 of 500 tablets at  $3.30. The error in logic saw the PPDUs equal and did 
 not update the DUOU, PPOU, nor OU.
  
 Resolution:
 =========== 
 The routine PSAVER7 has been modified to update OU, PPOU, DUOU regardless 
 of PPDU values.
  
 5.     HD97003    PSAVER7 Updating NDC dependency
 Problem:
 ======== 
 The proper updating of NDC was found to be dependant on OUs and DUOUs 
 being the same between the incoming invoice and the existing entry in the 
 DRUG file (#50) when there are no changes in PPDU. NDC updating should 
 not be dependent on those conditions.  
  
 Resolution:
 =========== 
 The routine PSAVER7 has been modified to update and change the NDC in the 
 DRUG file (#50) accordingly to what is presented on the invoice.
  
 ROUTINE SUMMARY
 =============== 
 The following is a list of the routines included in this patch.  
 The second line of each of these routines now looks like: 
  
  <tab>;;3.0;DRUG ACCOUNTABILITY/INVENTORY INTERFACE;**[PATCH  LIST]**; 10/24/97
  
                        CHECK^XTSUMBLD results
 Routine name      Before Patch        After Patch       Patch List
 ============      ============        ===========       ===========
 PSAPROC7          12923348            17947479            3,12,24,27,21,42
 PSAVER6           16179156            19376443            1,3,21,42
 PSAVER7           13035973            8426155             12,21,42
 PSAVERA3          5768891             5863377             21,42
 PSAUTL6           N/A                 9954448             42
  
  
 DOCUMENTATION DISTRIBUTION:
 =========================== 
 The revised Drug Accountability User Manual and the Change Pages document
 are available on the ANONYMOUS.SOFTWARE directory at one of the following
 Office of Information (OI) Field Offices.
  
 Sites may retrieve documentation in one of the following ways:
  
 (1) The preferred method is to FTP (using BIN mode) the files from 
     download.vista.med.va.gov,
     which will transmit the files from the first available FTP server.
  
 (2) Sites may also elect to retrieve documentation directly from a
     specific server as follows:
  
     Albany                     ftp.fo-albany.med.va.gov
     Hines                      ftp.fo-hines.med.va.gov
     Salt Lake City             ftp.fo-slc.med.va.gov
  
  The documentation distribution includes:
  
   FILE NAMES                       DESCRIPTION
   ----------                       -----------
   PSA_3_UM_R0805.PDF               User Manual
   PSA_3_p42_UM_CP.PDF              Change Pages
  
  (3) The documentation can also be retrieved from VISTA Documentation
     Library (VDL) on the Internet at the following address,
     http://www.va.gov/vdl.
  
 INSTALLATION INSTRUCTIONS:
 ==========================
 This patch can be loaded with users in the system.  Installation time is 
 less than one minute.
  
  1.  This patch can be queued to run in the background during a period
      where Drug Accountability users are not on the system.  However, you 
      don't need to inhibit logon's or disable any options.  The install
      will be less than one minute.
  
  2.  Start up the Kernel Installation and Distribution System Menu
      [XPD MAIN]: 
    
           Edits and Distribution ...  
           Utilities ...  
           Installation ...  
   
  3.  Select Kernel Installation & Distribution System Option: Installation
                                                               ---
           1      Load a Distribution
           2      Verify Checksums in Transport Global
           3      Print Transport Global
           4      Compare Transport Global to Current System
           5      Backup a Transport Global
           6      Install Package(s)
                  Restart Install of Package(s)
                  Unload a Distribution
   
  4.  From this menu, you may elect to use the following options
      (When prompted for the INSTALL NAME, enter PSA*3.0*42):
      
      a.  Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will
          not backup any other changes such as DD's or templates.
      b.  Compare Transport Global to Current System - This option
          will allow you to view all changes that will be made when
          this patch is installed.  It compares all components of this
          patch (routines, DD's, templates, etc.).
      c.  Verify Checksums in Transport Global - This option will
          allow you to ensure the integrity of the routines that are
          in the transport global.
   
  5.  Use the Install Package(s) option and select the package
      PSA*3.0*42.
    
      a.  When prompted 'Want KIDS to INHIBIT LOGONs during the
          install? YES//', answer NO.
      b.  When prompted 'Want to DISABLE Scheduled Options and Menu 
          Options and Protocols? YES//', answer NO.
    
    
 INSTALLATION EXAMPLE:
 ===================== 
 Select Installation Option: INstall Package(s)
 Select INSTALL NAME: PSA*3.0*42       Loaded from Distribution  
 4/5/05@19:51:27
      => PSA*3.0*42 v1a 4/5/05 MNTVAA
  
 This Distribution was loaded on Apr 05, 2005@19:51:27 with header of
    PSA*3.0*42 v1a 4/5/05 MNTVAA
    It consisted of the following Install(s):
      PSA*3.0*42
 Checking Install for Package PSA*3.0*42
 Install Questions for PSA*3.0*42
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   UCX/TELNET
 = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
  Install Started for PSA*3.0*42 :
                Apr 05, 2005@20:00:20
 Build Distribution Date: Apr 05, 2005
  Installing Routines:
                Apr 05, 2005@20:00:21
  Updating Routine file...
  Updating KIDS files...
  PSA*3.0*42 Installed.
                Apr 05, 2005@20:00:21
 Install Completed

Routine Information:
====================

Routine Name:
  - PSAVER6


Routine Checksum:

Routine Name:
  - PSAVER7


Routine Checksum:

Routine Name:
  - PSAVERA3


Routine Checksum:

Routine Name:
  - PSAPROC7


Routine Checksum:

Routine Name:
  - PSAUTL6


Routine Checksum:

=============================================================================
User Information:
Entered By  : WESLEY,PAUL                   Date Entered  : APR 07, 2004
Completed By: ANDERSON,MAXINE               Date Completed: AUG 05, 2005
Released By : VECE,VIRGINIA                 Date Released : AUG 08, 2005
=============================================================================


Packman Mail Message:
=====================

$END TXT

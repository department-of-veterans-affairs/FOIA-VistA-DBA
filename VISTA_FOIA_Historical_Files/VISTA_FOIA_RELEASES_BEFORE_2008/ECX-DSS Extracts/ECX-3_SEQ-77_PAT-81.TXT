$TXT Created by THOMAS,GAIL at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Thursday, 02/10/05 at 10:29
=============================================================================
Run Date: JUN 07, 2005                     Designation: ECX*3*81
Package : ECX - DSS EXTRACTS                  Priority: Mandatory
Version : 3        SEQ #77                      Status: Released
                  Compliance Date: JUL 08, 2005
=============================================================================

Associated patches: (v)ECX*3*71    <<= must be installed BEFORE `ECX*3*81'

Subject: PRE EXTRACT WRONG ENCOUNTER NUMBER FIX

Category: 
  - Routine

Description:
============

 The purpose of this patch is to fix the Prescription Extract from building
 the wrong encounter number for CMOP records.
 
 ASSOCIATED REMEDY TICKET:
 ========================
 HD0000000055666:	PRE building wrong encounter #'s for CMOP records
  
  
 ASSOCIATED E3R(s) :
 ===================
 N/A
  
 PARTICIPATING TEST SITES:
 =========================
 Central Texas HCS
 Little Rock, AR
 
 REMEDY TICKET OVERVIEW:
 =======================
  
 Problem:
 --------
    PRE VistA extract is building an incorrect Consolidated Mail Outpatient
    Pharmacy (CMOP) encounter number if the patient is an inpatient at the   
    time the CMOP prescription is released.  
      
    Software Requirement Specification (SRS) for PRE extract states:  
      
    The PRESCRIPTION EXTRACT file (#727.81) shall be modified so that when   
    the MAIL field (#12) is 2 (CMOP) then an outpatient encounter number   
    shall be created.  This shall ensure that CMOP-generated records in the   
    PRE extract are given an outpatient encounter number no matter what the   
    status of the patient at the day/time CMOP mailed the pharmacy item.  If   
    the MAIL field (#12) is equal to "2", then bypass the in/out logic,   
    calculate the encounter number field with SSN + Julian Date + "160".    
    Then set in/out patient indicator field (#5) as "O" for outpatient.   
    Otherwise use current calculations.  
      
    Problem is seen when a patient is in an inpatient status at the time   
    a CMOP prescription is released. The extract logic does NOT bypass the  
    in/out logic when creating this outpatient encounter number.  The Julian  
    date of visit for this CMOP outpatient encounter should be the Released  
    date/time, not the Julian admit date of the inpatient stay. 
  
 Resolution
 ----------
    Routine ECXOPRX was modified so that when the MAIL field (#12) in 
    PRESCRIPTION EXTRACT (#727.81) file is 2 (CMOP) then an outpatient 
    encounter number will be created using the prescription released day
    to set the encounter number field equal to SSN + Julian Date + "160".
 
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
      <tab>;;3.0;DSS EXTRACTS;**[patch list]**;Dec 22, 1997
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  ECXOPRX               17689707             17531381        10,11,8,13,24
                                                            30,33,38,39,46
                                                               49,71,81
 
 INSTALLATION INSTRUCTIONS:
 ==========================
  
   This patch can be loaded with users on the system.
   Installation will take less than 5 minutes.
  
   1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
       the KIDS distribution included with this message.
  
   2.  Review your mapped set. If the routines are mapped, they should
       be removed from the mapped set at this time.
  
   3.  From the Kernel Installation and Distribution System Menu, select
       the Installation menu.
  
   4.  From this menu, you may elect to use the following options
       (when prompted for INSTALL NAME, enter ECX*3.0*81):
       a. Backup a Transport Global - this option will create a backup
          message of any routines exported with the patch. It will NOT
          backup any other changes such as DDs or templates.
       b. Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when this patch
          is installed. It compares all components of this patch
          (routines, DD's, templates, etc.).
       c. Verify Checksums in Transport Global - This option will allow
          you to ensure the integrity of the routines that are in the
          transport global.
       d. Print Transport Global - this option will allow you to view the
          components of the KIDS build.
   5.  Use the Install Package(s) option and select the package ECX*3.0*81.
  
   6.  When prompted "Want KIDS to INHIBIT LOGONs during the install? YES//"
       Respond "No".
  
   7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? YES//', respond "NO"
  
   8.  If routines were unmapped as part of step 2, they should be returned
       to the mapped set once the installation has run to completion.
  
   

Routine Information:
====================

Routine Name:
  - ECXOPRX


Routine Checksum:

=============================================================================
User Information:
Entered By  : THOMAS,GAIL                   Date Entered  : FEB 04, 2005
Completed By: TSAIMEUCHONG,BRENDA           Date Completed: JUN 06, 2005
Released By : STRICKLAND,JOAN C             Date Released : JUN 07, 2005
=============================================================================


Packman Mail Message:
=====================

$END TXT

$TXT Created by MORRISON,JENNIFER at DEVVCC.ISC-ALBANY.VA.GOV  (KIDS) on THURSDAY, 03/09/00 at 11:09
=============================================================================
Run Date: MAR 16, 2000                     Designation: ECX*3*31
Package : ECX - DSS EXTRACTS                  Priority: Mandatory
Version : 3        SEQ #31                      Status: Released
=============================================================================

Associated patches: (v)ECX*3*30    <<= must be installed BEFORE `ECX*3*31'

Subject: FY2000 EXTRACT CORRECTIONS

Category: 
  - Routine
  - Data Dictionary

Description: 
============

 Description:
 ============
  
      ********************* IMPORTANT NOTE ***************************
  
      This patch ONLY applies to DSS sites that have installed DSS
      EXTRACTS V3.0 (dated DEC 22,1997 on the second line of routines)
      and are prepared to begin extracts for FY2000 data.
        
      Please insure that the DSS Site Manager obtains a copy of this
      patch description.
        
      ****************************************************************
     
   Patch ECX*3*31 corrects (a) three problems identified in the FY2000
   CLI and CLJ extracts; (b) errors when running the prosthetics audit
   option [ECX PRO SOURCE AUDIT] due to missing NPPD category; 
   (c) undefine variable ECXMPI when running the LAB extract; and 
   (d) technical documentation on DAY and TIME fields in LABORATORY
   EXTRACT file (#727.813).
      
   (1) Lengthy processing time on CLI and CLJ extracts.
       Several sites have reported about the increased processing time of 
       the CLI/CLJ extracts with the release of patch ECX*3.0*30.  In patch
       #30 the clinic no-shows and encounters were polled starting with the
       patient file (#2) and cross-referencing the encounter file (#409.68). 
       This meant searching the entire patient file to obtain those records 
       satisfying the extract date range.  In the absence of an appropriate
       cross-reference, this extract was changed to use the hospital location 
       file (#44) and the encounter file (#409.68) to reduce processing time.
      
       NOTE:
         1. This extract should be run during non-peak hours since its CPU 
            intensive.
         2. If a site has already extracted data using patch ECX*3.0*30 and
            is satisified with the results, there is no need to re-run the 
            extract with this patch.
     
   (2) Missing clinic in File (#728.44) E-mail message.
       There was a logic flaw in the code causing this message to be 
       generated erroneously on hospital locations than were not classified 
       as a 'C' TYPE.  This has been corrected to check ONLY for hospital 
       locations with a 'C' TYPE.
    
       NOTE: Sites shouldn't be concerned since this message didn't affect 
             the content of the extract pulled using patch #30.
       
   (3) 'String too long' error on ICD-9 codes.
       This problem was reported by some sites in NOISes HVH-0200-11585, 
       EKH-0200-41656, and DAY-0200-41390 while running the CLI/CLJ extract.
       This problem occurs ONLY when there is an encounter with multiple 
       ICD-9 codes whose total length exceed the maximum string allotment.
       A change was made to check for only 9 ICD-9 codes, the maximum allowed
       in the extract.
     
   (4) Error when running prosthetics audit report, [ECX PRO SOURCE AUDIT]
       There were NPPD categories added in prosthetics patch, RMPR*3*39
       that were not added in DSS patch, ECX*3*21.  As a result this caused 
       errors when the [ECX PRO SOURCE AUDIT] was ran. This was reported in 
       NOIS REN-0200-62297.  This patch adds the following NPPD categories
       to routine ECXAPRO3.
   
             OXYGEN AND RESPIRATORY              ARTIFICIAL LEGS
             R91    O2 & RESPIRATORY             200 I  LEG COMPONENT
             R91 A  CONCENTRATOR
             R91 B  VENTILATOR                   HISA
             R91 C  EQUIPMENT A/O                940    HISA
             R91 D  SERVICE VISIT                940 A  HISA SC
             R91 E  COMPRESSED 02                940 B  HISA NSC
             R91 F  LIQUID 02
     
                                SURGICAL IMPLANTS
             960    SURGICAL IMPLANTS            960 C  UPPER EXTREMITY
             960 A  HEAD & NECK                  960 D  LOWER EXTREMITY
             960 B  ABDOMEN                      960 E  THORACIC
    
   (5) Undefine error when running LAB extract.
       NOIS ALN-0200-12490 reported an undefine variable ECXMPI when running
       the LAB extract.  This problem has been corrected in this patch.
     
   (6) Update field documentation in LABORATORY EXTRACT file (#727.813)
       The documentation on the DAY (#8) and TIME (#18) fields of file 
       (#727.813) were not in synch with the routine.  The source of data
       stated in the these field differed from the routine.  These two 
       fields were updated to correctly reflect the origin of the data.
    
   
  Additionally, routine ECXKILL was modified to include variables that were 
  not being killed as a result of running the CLI/CLJ extract.
   
        
  ROUTINE SUMMARY:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
     
      <tab>;;3.0;DSS EXTRACTS;**[patch list]**;Dec 22, 1997
      
                             CHECK^XTSUMBLD results
  Routine name      Before Patch      After Patch           Patch List
  ============      ============      ===========           ==========
  ECXAPRO3               1995173          2245395               21,31
  ECXKILL               11980063         12138651             9,8,21,24,31
  ECXLABN                7263589          7269040    1,11,8,13,28,24,30,31
  ECXSCX1               15612924         15846868      8,28,24,27,29,30,31
  ECXSCXN               15830670         15926578           24,27,29,30,31
    
          
   INSTALLATION INSTRUCTIONS:
   ==========================
     
   This patch can be loaded with users on the system.
     
   Installation will take less than 5 minutes.
     
   1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
       the KIDS distribution included with this message.
     
   2.  Review your mapped set.  If any of the routines listed in the
       ROUTINE SUMMARY section are mapped, they should be removed
       from the mapped set at this time.
     
   3.  From the Kernel Installation and Distribution System Menu, select
       the Installation menu.
     
   4.  From this menu, you may elect to use the following options
       (when prompted for INSTALL NAME, enter ECX*3.0*31):
      
       a. Backup a Transport Global - This option will create a backup
          message of any routines exported with this patch. It will not
          backup any other changes such as DD's or templates.
       b. Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when this patch
          is installed. It compares all components of this patch
          (routines, DD's, templates, etc.).
       c. Verify Checksums in Transport Global - This option will allow
          you to ensure the integrity of the routines that are in the
          transport global.
    
   5.  Use the Install Package(s) option and select the package ECX*3.0*31.
    
   6.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? YES//', respond YES.  When prompted to select the options
       you would like to place out of order, enter the following:
       Package Extracts ...               ECXMENU
       Extract Audit Reports Menu ...     ECX SOURCE AUDITS
       Prosthetics (PRO) Extract Audit    ECX PRO SOURCE AUDIT
    
   7.  If routines were unmapped as part of step 2, they should be returned
       to the mapped set once the installation has run to completion.

Routine Information:
====================

Routine Name:
  - ECXSCXN


Routine Checksum:

Routine Name:
  - ECXSCX1


Routine Checksum:

Routine Name:
  - ECXKILL


Routine Checksum:

Routine Name:
  - ECXAPRO3


Routine Checksum:

Routine Name:
  - ECXLABN


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : MORRISON,JENNIFER              Date Entered : FEB 11, 2000
Completed By: RODRIGUEZ,ANGELITA            Date Completed: MAR 16, 2000
Released By : COOPER,SAMANTHA               Date Released : MAR 16, 2000
=============================================================================


Packman Mail Message:
=====================

$END TXT

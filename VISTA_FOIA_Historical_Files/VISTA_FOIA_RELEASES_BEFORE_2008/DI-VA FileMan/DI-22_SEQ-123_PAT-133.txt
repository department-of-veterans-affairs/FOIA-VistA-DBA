$TXT Created by ORMSBY,SKIP at FM22-PATCH.FO-OAKLAND.MED.VA.GOV  (KIDS) on Monday, 11/24/03 at 06:11
=============================================================================
Run Date: AUG 09, 2004                     Designation: DI*22*133
Package : DI - VA FILEMAN                     Priority: Mandatory
Version : 22       SEQ #123                     Status: Released
                  Compliance Date: SEP 09, 2004
=============================================================================

Associated patches: (v)DI*22*99    <<= must be installed BEFORE `DI*22*133'
                    (v)DI*22*118   <<= must be installed BEFORE `DI*22*133'

Subject: Fix DIQ Bugs

Category: 
  - Routine

Description:
============

 This patch corrects the following issues:
  
 1. If a field is a Computed field and was defined using a previous 
 version of FileMan, the it was possible that the local variable X was not
 always defined and an Undefined error would occur at C+5^DIQG:2.  Reported
 on exchange by development.
  
 2. If a user was sorting on a file and there was a cross reference that 
 pointed to a record that did not exist and that user was printing the 
 data using the CAPTIONED template, an Undefined error would occur at 
 A+2^DIQ1:7 because the local variable X was not defined.
 NOIS: MAR-0203-21392
  
 3. If a Computed pointer value was being requested by using the $$GET1^DIQ
 call and if the value in the pointed to field was Free Text value and that
 Free Text value was a <number(s)>E<number(s)> then a Illegal Number error
 would occur at CP^DIQG:1.  On the other hand, if the record was being 
 displayed using the CAPTIONED print template and computed fields were 
 requested, then the Illegal Number error would occur at A+4^DIQ1.
 NOIS: NYH-1103-10990
  
 4. If DBS call $$GET1^DIQ was being called, and an "on the fly computed
 expression" was used, and the target field was defined as a Date/Time, 
 and either no FLAGS were passed or the FLAG was set to an "E", then 
 only the Internal value of the Date/Time would be returned.  Reported
 on exchange by development.
  
  
 Documentation Changes
 =====================
  -None-
  
 Blood Bank Team Coordination
 ============================
 Clearance - Nov 26, 2003
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch DI*22*133 contains 
 changes to a package referenced in VHA IO SEPG SOP 192-023 "Review of 
 VISTA Patches for Effects on VISTA Blood Bank Software . This patch does 
 not alter or modify any VistA Blood Bank software design safeguards or 
 safety critical elements functions.
  
 RISK ANALYSIS: Changes made by patch DI*22*133 have no effect on Blood 
 Bank software functionality, therefore RISK is none.
  
 NOIS
 ====
  NYH-1103-10990; MAR-0203-21392; SBY-1203-31393
  
 Thanks to Test Sites 
 ====================
  MARYLAND HCS; ALPHA/DSM
  NEW YORK HCS; ALPHA/DSM
  SALISBURY, NC; ALPHA/DSM
  CLARKSBURG, WV; CACHE/VMS
  
 Routine Summary: 
 ================
  The following routines are included in this patch.  The second line of 
 these routines now look like: 
   
   <tab>;;22.0;VA FileMan;**[patch list]**;Mar 30, 1999 
   
 CHECK^XTSUMBLD results: 
   
   Routine Name   Before Patch    After Patch     Patch List 
   ============   ============    ===========     ==========
   DIQ            11207900        11436138        19,64,74,81,99,133
   DIQ1           3487039         3487073         19,64,76,133 
   DIQG           14867559        15160997        76,118,133
  
 Installation Instructions: 
 ==========================
 This patch can be installed with VISTA users online.  However, it is 
 recommended that it be Queued for a time of generally least activity.  
  
 TaskMan does not need to be STOPPED or placed in a WAIT state and 
 installation should take less than a minute.
  
      1.  AXP/DSM sites: Review your mapped routine set.  If any of the 
 routine(s) listed in the ROUTINE SUMMARY section are mapped, they 
 should be removed from the mapped set at this time.  
  
      2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu.  
 This option will load the KIDS package onto your system.  
  
      3.  The patch has now been loaded into a transport global on your 
 system. You now need to use KIDS to install the transport global.  
   
      4.  On the KIDS menu, under the 'Installation' menu, use the 
 following options: 
             Print Transport Global 
             Compare Transport Global to Current System 
             Verify Checksums in Transport Global 
             Backup a Transport Global 
  
      5.  On the KIDS menu, under the 'Installation' menu, use the 
 following option: 
             Select Installation Option: Install Package(s) 
             Select INSTALL NAME: DI*22.0*133
                                  ===========
         Answer 'NO' to 'Want KIDS to INHIBIT LOGONs during the install?
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
 and Protocols? 
  
      6.  AXP/DSM Sites - After the patch has been installed, rebuild your 
 map set, if necessary.  

Routine Information:
====================

Routine Name:
  - DIQ


Routine Checksum:

Routine Name:
  - DIQG


Routine Checksum:

Routine Name:
  - DIQ1


Routine Checksum:

=============================================================================
User Information:
Entered By  : ORMSBY,SKIP                   Date Entered  : NOV 17, 2003
Completed By: SINGH,GURBIR                  Date Completed: JUL 30, 2004
Released By : HARROD,PAUL                   Date Released : AUG 09, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

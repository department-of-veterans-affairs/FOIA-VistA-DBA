$TXT Created by ANDREASSEN,LARRY J at NXT.KERNEL.FO-OAKLAND.MED.VA.GOV  (KIDS) on MONDAY, 06/03/02 at 12:45
=============================================================================
Run Date: JUN 04, 2002                     Designation: HL*1.6*85
Package : HL - HEALTH LEVEL SEVEN     Priority: Mandatory
Version : 1.6        SEQ #78                    Status: Released
=============================================================================


Subject: Error listing and disk full errors

Category: 
  - Routine
  - Enhancement (Mandatory)

Description: 
============

 Test sites:    Greater Los Angeles Regional Healthcare (West Los Angeles),
                Montana Healthcare System, VA Maryland Healthcare system
  
 NOIS:          MON-0102-51257
  
 Note:          This patch requires that KIDS build HL*1.6*50
                be installed.
  
  
 OVERVIEW
 ========
  
 VistA Health Level Seven (HL7) Transmission Control Protocol (TCP)
 messages that experience problems are assigned an error status.  Under
 unusually adverse circumstances, the number of TCP messages marked with
 an error status can be quite large.
  
 The 'View Transmission Log (TCP only) [HL VIEW TRANSMISSION LOG]' menu
 option enables users to view TCP messages that are in the error status.
 (This option's initial screen displays four sub-options. Select the 'Error
 Listing' option to display error status messages.) Before displaying the
 error messages, the option collects information about the error status
 entries into the ^TMP global.  When an excessive number of error status
 messages exist, the creation of ^TMP global data has resulted in disk full
 errors.
  
 Before this patch, users could print all error status TCP messages, or
 select one error status to include in the option's report.  After this
 patch is installed, this functionality remains, but additional controls
 over the TCP error status messages collected into the ^TMP global, and
 included on the report have been added.
  
  
 NEW PROMPTS
 =========== 
  
 After this patch is installed, users will now see several new prompts.  
 Some of these new prompts enable the user to control the amount of data
 collected into the ^TMP global and included on the report.  Some new 
 prompts control report format.  These new prompts are mentioned and
 explained below.
  
 New prompt: REPORT FORMAT
  
 The terminal dialogue seen by the user for the first new prompt is shown
 below.
  
     Select the report view now.  There are two report views.  Both 
     list the internal entry number from the HL7 Message Administration
     file (#773) entry, message ID, processing date or time, and logical
     link.  The two report views differ in the remainder of the 
     information displayed on the report.
  
          Select one of the following:
  
               1         Display message, event, & application data
               2         Display error type
  
     Select data to display: 1// 
  
  
 New prompt: ERRORS TO PRINT
  
 There are two new prompts by which users can control the number of errors
 included on the report. The user is first asked whether they wish to view
 all error status entries.  If they answer NO, they are then asked to
 specify the number of errors to include on the report. The terminal
 dialogue seen for both these new prompts is shown below.
  
     Print all errors? No//
  
 If the user answers 'NO' to the above query, they will see the following
 prompt:
  
     Enter the maximum number errors to report for every error status.
  
     Enter maximum number errors/status:  999//
  
  
 New prompt: TIME RANGE
  
 The above prompts can be used to limit the number of entries 
 included on the report.  In addition, there are two new queries asked
 users by which they can define the starting and ending times for the
 report.  The terminal dialogue seen when establishing the report time
 range is shown below.
  
     The first entry at your site is from Aug 29, 1994@16:44.
  
     Enter START DATE/TIME:  Dec 25, 2001//
     Enter END DATE/TIME:  NOW//
  
 In the above example, 'Aug 29, 1994@16:44' is the date and time of the
 first TCP message at the site.  This date and time will differ from site
 to site.  Users may enter any start and end date and time.
  
  
 MORE DETAILS
 ============
  
 After entering the START DATE/TIME, the search for error status TCP
 messages starts immediately.  Depending on the total number of error
 status TCP messages that exist, the process of finding eligible messages
 might take some time.  This is true even if only a small number of
 messages are requested.  (The option searches all messages with an
 error status to ensure that only the most recent error status TCP messages
 are included.)
  
 In addition to the new prompts mentioned above, the report content has
 been enhanced.  A new column showing the date or time of the error's
 occurrence has been added immediately after the message ID column.  The
 column is labeled 'Procd', meaning 'processed time'.  When using this
 option, users will now be required to enter a time range for the report.
 If the start and stop times of the range are within the same day, the time
 of processing will be displayed.  If the start and stop times encompass
 more than one day, the date of processing will be displayed.
  
 The first new prompt users will see when using this option is 'Select
 data to display'.  If the user elects to display message, event and
 application data, the report format includes the requested information;
 this is the same report format as displayed prior to the patch.  At this
 prompt, if the user elects to display error type information, the last
 section of the report contains error type information collected from each
 error status entry.
  
  
 ROUTINE INFORMATION
 =================== 
  
 The routines HLCSRPT2, HLCSRPT4, and HLCSRPT5 are included in this
 patch.  The first and second lines of these routine are shown below.
  
 HLCSRPT2  ;ISC-SF/RAH-TRANS LOG ERROR LIST ;06/23/99  11:10 AM
            ;;1.6;HEALTH LEVEL SEVEN;**50,85**;Oct 13, 1995
 HLCSRPT4  ;OIFO-O/LJA - Error Listing code ;3/18/02 10:19
            ;;1.6;HEALTH LEVEL SEVEN;**85**;Oct 13, 1995
 HLCSRPT5  ;OIFO-O/LJA - Error Listing code ;3/18/02 10:19
            ;;1.6;HEALTH LEVEL SEVEN;**85**;Oct 13, 1995
  
 The VA Kernel checksum for the routine included in this patch
 (calculated using CHECK^XTSUMBLD) is listed below.
  
                 Checksum        Checksum
   Routine Name  Before Patch    After Patch     Patch List
   ============  ============    ===========     =====================
   HLCSRPT2      18087507        16748679        **50,85**
   HLCSRPT4      -----------     11631444        **85**
   HLCSRPT5      -----------      4522232        **85**
  
 Sites should use CHECK^XTSUMBLD to verify checksums after patch
 installation.
  
  
 INSTALLATION INSTRUCTIONS
 =========================
  
    NOTICE:  Do not proceed unless patch HL*1.6*50 has been installed.
 
             Do not proceed unless you have backed up your current 
             HLCSRPT2 routine.
  
    1.  Users are allowed to be on the system during the installation.
        Do not stop any background jobs, (such as filers), while installing
        this patch.
  
    2.  AXP/DSM SITES: Review your mapped routine set.  If the
        routine listed in the ROUTINE SUMMARY section is mapped, it
        should be removed from the mapped set at this time.
  
    3.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
        option will load the KIDS package onto your system.
  
    4.  This patch is now loaded into a transport global on your
        system. The next step is to use KIDS to install the Transport
        global. This is done using the 'Installation' menu's 'Install
        Package(s) [XPD INSTALL BUILD]' menu option. When using this
        menu option to install the patch build, you will be asked
        several questions.  The questions, and the answers you should
        supply, are shown below.
  
        INSTALL NAME: <HL*1.6*85>
        Want KIDS to INHIBIT LOGONS during the install?  <NO>
        Want to DISABLE Scheduled Options, Menu Options,
          and Protocols?  <NO>
  
    5.  AXP/DSM Sites:  After the patch has been installed, rebuild your
        map set, if necessary.

Routine Information:
====================

Routine Name:
  - HLCSRPT2


Routine Checksum:

Routine Name:
  - HLCSRPT4


Routine Checksum:

Routine Name:
  - HLCSRPT5


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : ANDREASSEN,LARRY               Date Entered : OCT 17, 2001
Completed By: HERREN,CATHRYN                Date Completed: JUN 03, 2002
Released By : GAYFIELD,LISA                 Date Released : JUN 04, 2002
=============================================================================


Packman Mail Message:
=====================

$END TXT

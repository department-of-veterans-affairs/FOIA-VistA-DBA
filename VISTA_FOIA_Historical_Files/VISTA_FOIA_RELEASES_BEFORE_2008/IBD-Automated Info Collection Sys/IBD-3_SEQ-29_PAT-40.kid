Released IBD*3*40 SEQ #29
Extracted from mail message
**KIDS**:IBD*3.0*40^

**INSTALL NAME**
IBD*3.0*40
"BLD",2609,0)
IBD*3.0*40^AUTOMATED INFO COLLECTION SYS^0^3000601^y
"BLD",2609,1,0)
^^1^1^3000511^
"BLD",2609,1,1,0)
INACTIVE HEALTH FACTORS NOT SCREENING
"BLD",2609,4,0)
^9.64PA^^0
"BLD",2609,"INID")
^n
"BLD",2609,"INIT")
IBDY340
"BLD",2609,"KRN",0)
^9.67PA^19^17
"BLD",2609,"KRN",.4,0)
.4
"BLD",2609,"KRN",.401,0)
.401
"BLD",2609,"KRN",.402,0)
.402
"BLD",2609,"KRN",.403,0)
.403
"BLD",2609,"KRN",.5,0)
.5
"BLD",2609,"KRN",.84,0)
.84
"BLD",2609,"KRN",3.6,0)
3.6
"BLD",2609,"KRN",3.8,0)
3.8
"BLD",2609,"KRN",9.2,0)
9.2
"BLD",2609,"KRN",9.8,0)
9.8
"BLD",2609,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",2609,"KRN",9.8,"NM",1,0)
IBDFDE5^^0^B71812500
"BLD",2609,"KRN",9.8,"NM",2,0)
IBDFN10^^0^B8034174
"BLD",2609,"KRN",9.8,"NM",3,0)
IBDY340^^0^B1607764
"BLD",2609,"KRN",9.8,"NM",4,0)
IBDFN12^^0^B7519249
"BLD",2609,"KRN",9.8,"NM","B","IBDFDE5",1)

"BLD",2609,"KRN",9.8,"NM","B","IBDFN10",2)

"BLD",2609,"KRN",9.8,"NM","B","IBDFN12",4)

"BLD",2609,"KRN",9.8,"NM","B","IBDY340",3)

"BLD",2609,"KRN",19,0)
19
"BLD",2609,"KRN",19.1,0)
19.1
"BLD",2609,"KRN",101,0)
101
"BLD",2609,"KRN",409.61,0)
409.61
"BLD",2609,"KRN",771,0)
771
"BLD",2609,"KRN",870,0)
870
"BLD",2609,"KRN",8994,0)
8994
"BLD",2609,"KRN","B",.4,.4)

"BLD",2609,"KRN","B",.401,.401)

"BLD",2609,"KRN","B",.402,.402)

"BLD",2609,"KRN","B",.403,.403)

"BLD",2609,"KRN","B",.5,.5)

"BLD",2609,"KRN","B",.84,.84)

"BLD",2609,"KRN","B",3.6,3.6)

"BLD",2609,"KRN","B",3.8,3.8)

"BLD",2609,"KRN","B",9.2,9.2)

"BLD",2609,"KRN","B",9.8,9.8)

"BLD",2609,"KRN","B",19,19)

"BLD",2609,"KRN","B",19.1,19.1)

"BLD",2609,"KRN","B",101,101)

"BLD",2609,"KRN","B",409.61,409.61)

"BLD",2609,"KRN","B",771,771)

"BLD",2609,"KRN","B",870,870)

"BLD",2609,"KRN","B",8994,8994)

"BLD",2609,"QUES",0)
^9.62^^
"BLD",2609,"REQB",0)
^9.611^2^2
"BLD",2609,"REQB",1,0)
IBD*3.0*12^1
"BLD",2609,"REQB",2,0)
IBD*3.0*38^1
"BLD",2609,"REQB","B","IBD*3.0*12",1)

"BLD",2609,"REQB","B","IBD*3.0*38",2)

"INIT")
IBDY340
"MBREQ")
0
"PKG",421,-1)
1^1
"PKG",421,0)
AUTOMATED INFO COLLECTION SYS^IBD^The utilities for generating a paper encounter form.
"PKG",421,20,0)
^9.402P^^
"PKG",421,22,0)
^9.49I^1^1
"PKG",421,22,1,0)
3.0^2970212^2970424^1258
"PKG",421,22,1,"PAH",1,0)
40^3000601
"PKG",421,22,1,"PAH",1,1,0)
^^1^1^3000601
"PKG",421,22,1,"PAH",1,1,1,0)
INACTIVE HEALTH FACTORS NOT SCREENING
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","IBDFDE5")
0^1^B71812500
"RTN","IBDFDE5",1,0)
IBDFDE5 ;ALB/AAS - AICS Manual Data Entry, Loader routine for 357.6 ; 19-APR-96
"RTN","IBDFDE5",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**40**;APR 24, 1997
"RTN","IBDFDE5",3,0)
 ;
"RTN","IBDFDE5",4,0)
% G ^IBDFDE
"RTN","IBDFDE5",5,0)
 ;
"RTN","IBDFDE5",6,0)
 ;
"RTN","IBDFDE5",7,0)
COMPLST ; -- procedure, compile form list arrays in ^tmp
"RTN","IBDFDE5",8,0)
 ;    ^tmp("ibd-lText",$j,form,package interface,list,text,cnt,n)=entry number
"RTN","IBDFDE5",9,0)
 ;    ^tmp("ibd-lCode",$j,form,package interface,list," "_code,cnt,n)= entry number
"RTN","IBDFDE5",10,0)
 ;    ^tmp("ibd-lst",$j,form,package inteface,list)=display text^display code^input value^ optional caption^ optional term^selectable?
"RTN","IBDFDE5",11,0)
 ;
"RTN","IBDFDE5",12,0)
 N IBDI,FORM,PI,IEN,CNT,CH,CODE
"RTN","IBDFDE5",13,0)
 I '$G(IBDF("PI"))!('$G(IBDF("IEN")))!('$G(IBDFMIEN)) G COMPQ
"RTN","IBDFDE5",14,0)
 S PI=IBDF("PI"),IEN=IBDF("IEN"),FORM=IBDFMIEN
"RTN","IBDFDE5",15,0)
 ;
"RTN","IBDFDE5",16,0)
 ;K ^TMP("IBD-LST",$J,FORM,PI,IEN),^TMP("IBD-LTEXT",$J,FORM,PI,IEN),^TMP("IBD-LCODE",$J,FORM,PI,IEN)
"RTN","IBDFDE5",17,0)
 K ^TMP("IBD-LTEXT",$J,FORM,PI,IEN),^TMP("IBD-LCODE",$J,FORM,PI,IEN)
"RTN","IBDFDE5",18,0)
 ;
"RTN","IBDFDE5",19,0)
 ;M ^TMP("IBD-LST",$J,FORM,PI,IEN)=CHOICE
"RTN","IBDFDE5",20,0)
 K CHOICE
"RTN","IBDFDE5",21,0)
 ;
"RTN","IBDFDE5",22,0)
 ; -- Expand choices
"RTN","IBDFDE5",23,0)
 S HDR=""
"RTN","IBDFDE5",24,0)
 S IBDI=0 F  S IBDI=$O(^TMP("IBD-LST",$J,FORM,PI,IEN,IBDI)) Q:'IBDI  S CH=$G(^(IBDI)) D
"RTN","IBDFDE5",25,0)
 .I $P(CH,"^",7)=0 S HDR=$P(CH,"^") Q
"RTN","IBDFDE5",26,0)
 .I $P(CH,"^",8)="" S $P(^TMP("IBD-LST",$J,FORM,PI,IEN,IBDI),"^",8)=HDR
"RTN","IBDFDE5",27,0)
 .;
"RTN","IBDFDE5",28,0)
 .; -- build array of text
"RTN","IBDFDE5",29,0)
 .I $P(CH,"^",1)'="" D
"RTN","IBDFDE5",30,0)
 ..I '$D(^TMP("IBD-LTEXT",$J,FORM,PI,IEN,$E($$UP^XLFSTR($P(CH,"^",1)),1,80))) S ^TMP("IBD-LTEXT",$J,FORM,PI,IEN,$E($$UP^XLFSTR($P(CH,"^",1)),1,80),1)=IBDI Q
"RTN","IBDFDE5",31,0)
 ..S CNT=$O(^TMP("IBD-LTEXT",$J,FORM,PI,IEN,$E($$UP^XLFSTR($P(CH,"^",1)),1,80),""),-1)
"RTN","IBDFDE5",32,0)
 ..S ^TMP("IBD-LTEXT",$J,FORM,PI,IEN,$E($$UP^XLFSTR($P(CH,"^",1)),1,80),CNT+1)=IBDI
"RTN","IBDFDE5",33,0)
 .;
"RTN","IBDFDE5",34,0)
 .; -- build array of codes
"RTN","IBDFDE5",35,0)
 .S CODE=$S($P(CH,"^",2)'="":$P(CH,"^",2),1:$P(CH,"^",3)) Q:CODE=""
"RTN","IBDFDE5",36,0)
 .I '$D(^TMP("IBD-LCODE",$J,FORM,PI,IEN," "_CODE,1)) S ^TMP("IBD-LCODE",$J,FORM,PI,IEN," "_CODE,1)=IBDI Q
"RTN","IBDFDE5",37,0)
 .S CNT=$O(^TMP("IBD-LCODE",$J,FORM,PI,IEN," "_CODE,""),-1) S ^TMP("IBD-LCODE",$J,FORM,PI,IEN," "_CODE,CNT+1)=IBDI
"RTN","IBDFDE5",38,0)
 ;
"RTN","IBDFDE5",39,0)
COMPQ Q
"RTN","IBDFDE5",40,0)
 ;
"RTN","IBDFDE5",41,0)
MDCOMP(FORM) ; -- compile form for manual data entry into ^xtmp
"RTN","IBDFDE5",42,0)
 ; -- ^xtmp("ibd"_form,0) := date ^ date
"RTN","IBDFDE5",43,0)
 ;    ^xtmp("ibd"_form, "ibd-obj", n) := object listing for form
"RTN","IBDFDE5",44,0)
 ;    ^xtmp("ibd"_form, "ibd-lst", pkg interface, list, n) := listing of each list
"RTN","IBDFDE5",45,0)
 ;    ^xtmp("ibd"_form, "ibd-lst", pkg interface, list ,"code", " "_code, n) := code index
"RTN","IBDFDE5",46,0)
 ;    ^xtmp("ibd"_form, "ibd-lst", pkg interface, list "text", text, n) := text index
"RTN","IBDFDE5",47,0)
 ;
"RTN","IBDFDE5",48,0)
 ; -- before converting to xtmp must resolve compile issues,
"RTN","IBDFDE5",49,0)
 ;    such as when form is in use for data entry etc.
"RTN","IBDFDE5",50,0)
 ;    need schema for locks...think about this
"RTN","IBDFDE5",51,0)
 ;    remember to check old logic for changes
"RTN","IBDFDE5",52,0)
 ;
"RTN","IBDFDE5",53,0)
 N I,J,X,Y,NAM,IBDOBJ
"RTN","IBDFDE5",54,0)
 G:$G(^IBE(357,+$G(FORM),0))="" MDCQ
"RTN","IBDFDE5",55,0)
 S NAM="IBD"_FORM
"RTN","IBDFDE5",56,0)
 L +^XTMP(NAM):10 I '$T W !!,"form is in use, data entry compile failed",! S IBQUIT=1 G MDCQ
"RTN","IBDFDE5",57,0)
 K ^XTMP(NAM) ; make sure ibdfde locks so doesn't kill when in use
"RTN","IBDFDE5",58,0)
 S ^XTMP(NAM,0)=$$FMADD^XLFDT(DT,90)_"^"_DT
"RTN","IBDFDE5",59,0)
 D FRMLSTI^IBDFRPC(.IBDOBJ,FORM,"",1)
"RTN","IBDFDE5",60,0)
 M ^XTMP(NAM,"IBD-OBJ")=IBDOBJ
"RTN","IBDFDE5",61,0)
 K IBDOBJ
"RTN","IBDFDE5",62,0)
 ;
"RTN","IBDFDE5",63,0)
 ; -- build entry for lists
"RTN","IBDFDE5",64,0)
 S X=0 F  S X=$O(^XTMP(NAM,"IBD-OBJ",X)) Q:'X  S Y=^(X) D
"RTN","IBDFDE5",65,0)
 .Q:$P($G(^IBE(357.6,+$P(Y,"^",2),0)),"^",14)  ;dyanamic lists get compiled by ibdfde2 and then killed
"RTN","IBDFDE5",66,0)
 .I $P(Y,"^",5)="LIST" D MDCLIST(FORM,$P(Y,"^",2),$P(Y,"^",6))
"RTN","IBDFDE5",67,0)
 ;
"RTN","IBDFDE5",68,0)
MDCQ L -^XTMP(NAM)
"RTN","IBDFDE5",69,0)
 Q
"RTN","IBDFDE5",70,0)
 ;
"RTN","IBDFDE5",71,0)
MDCLIST(FORM,PI,LIST) ; -- Compile one list
"RTN","IBDFDE5",72,0)
 N I,J,X,Y,IBDF,CH,CODE
"RTN","IBDFDE5",73,0)
 G:$G(^IBE(357.6,+$G(PI),0))=""!($G(^IBE(357.2,+$G(LIST),0))="")!($G(^IBE(357,+$G(FORM),0))="") MDCLQ
"RTN","IBDFDE5",74,0)
 S IBDF("PI")=PI,IBDF("IEN")=LIST,IBDF("TYPE")="LIST"
"RTN","IBDFDE5",75,0)
 K ^XTMP("IBD"_FORM,"IBD-LST",PI,LIST)
"RTN","IBDFDE5",76,0)
 D OBJLST^IBDFRPC1(.CH,.IBDF)
"RTN","IBDFDE5",77,0)
 M ^XTMP("IBD"_FORM,"IBD-LST",PI,LIST)=CH
"RTN","IBDFDE5",78,0)
 ;
"RTN","IBDFDE5",79,0)
 ; -- Expand choices
"RTN","IBDFDE5",80,0)
 S HDR=""
"RTN","IBDFDE5",81,0)
 S IBDI=0 F  S IBDI=$O(^XTMP("IBD"_FORM,"IBD-LST",PI,LIST,IBDI)) Q:'IBDI  S CH=^(IBDI) D
"RTN","IBDFDE5",82,0)
 .I $P(CH,"^",7)=0 S HDR=$P(CH,"^") Q
"RTN","IBDFDE5",83,0)
 .I $P(CH,"^",8)="" S $P(^XTMP("IBD"_FORM,"IBD-LST",PI,LIST,I),"^",8)=HDR
"RTN","IBDFDE5",84,0)
 .;
"RTN","IBDFDE5",85,0)
 .; -- build array of text
"RTN","IBDFDE5",86,0)
 .I $P(CH,"^",1)'="" D
"RTN","IBDFDE5",87,0)
 ..I '$D(^XTMP("IBD"_FORM,"IBD-LST",PI,LIST,"TEXT",$$UP^XLFSTR($P(CH,"^",1)))) S ^XTMP("IBD"_FORM,PI,LIST,"TEXT",$$UP^XLFSTR($P(CH,"^",1)),1)=IBDI Q
"RTN","IBDFDE5",88,0)
 ..S CNT=$O(^XTMP("IBD"_FORM,"IBD-LST",PI,LIST,"TEXT",$$UP^XLFSTR($P(CH,"^",1)),""),-1)
"RTN","IBDFDE5",89,0)
 ..S ^XTMP("IBD"_FORM,"IBD-LST",PI,LIST,"TEXT",$$UP^XLFSTR($P(CH,"^",1)),CNT+1)=IBDI
"RTN","IBDFDE5",90,0)
 .;
"RTN","IBDFDE5",91,0)
 .; -- build array of codes
"RTN","IBDFDE5",92,0)
 .S CODE=$S($P(CH,"^",2)'="":$P(CH,"^",2),1:$P(CH,"^",3)) Q:CODE=""
"RTN","IBDFDE5",93,0)
 .I '$D(^XTMP("IBD"_FORM,"IBD-LST",PI,LIST,"CODE"," "_CODE,1)) S ^XTMP("IBD"_FORM,"IBD-LST",PI,LIST,"CODE"," "_CODE,1)=IBDI Q
"RTN","IBDFDE5",94,0)
 .S CNT=$O(^XTMP("IBD"_FORM,"IBD-LST",PI,LIST,"CODE"," "_CODE,""),-1) S ^XTMP("IBD"_FORM,"IBD-LST",PI,LIST,"CODE"," "_CODE,CNT+1)=IBDI
"RTN","IBDFDE5",95,0)
 .Q
"RTN","IBDFDE5",96,0)
 ;
"RTN","IBDFDE5",97,0)
MDCLQ Q
"RTN","IBDFDE5",98,0)
 ;
"RTN","IBDFDE5",99,0)
18 ; -- Post init for data entry patch
"RTN","IBDFDE5",100,0)
 D 14,CLNTMP,XREF,PIDIM,PIUP
"RTN","IBDFDE5",101,0)
 Q
"RTN","IBDFDE5",102,0)
 ;
"RTN","IBDFDE5",103,0)
14 ;Populate the .14 FIELD IN FILE 357.96
"RTN","IBDFDE5",104,0)
 S ZTIO="",ZTDTH=$H,ZTRTN="DQ^IBDFDE5",ZTDESC="IBD-Patch 2 populate 357.96;.14" D ^%ZTLOAD
"RTN","IBDFDE5",105,0)
 D BMES^XPDUTL("Queing the Conversion to populate the .14 field (NO APPOINTMENT ENTRY) of file 357.96 ENCOUNTER FORM TRACKING......")
"RTN","IBDFDE5",106,0)
 Q
"RTN","IBDFDE5",107,0)
 ;
"RTN","IBDFDE5",108,0)
DQ ;
"RTN","IBDFDE5",109,0)
 N IBDFIFN,IBDFCLIN,IBDFAPPT,IBDFDFN
"RTN","IBDFDE5",110,0)
 S IBDFIFN=0
"RTN","IBDFDE5",111,0)
 F  S IBDFIFN=$O(^IBD(357.96,IBDFIFN)) Q:'IBDFIFN  S IBDFNODE=$G(^IBD(357.96,IBDFIFN,0)) S IBDFDFN=$P(IBDFNODE,"^",2),IBDFAPPT=$P(IBDFNODE,"^",3) I IBDFDFN,IBDFAPPT D
"RTN","IBDFDE5",112,0)
 .S DIE="^IBD(357.96,",DA=IBDFIFN
"RTN","IBDFDE5",113,0)
 .I $D(^DPT(+IBDFIFN,"S",IBDFAPPT)) S DR=".14////0"
"RTN","IBDFDE5",114,0)
 .E  S DR=".14////1"
"RTN","IBDFDE5",115,0)
 .D ^DIE K DA,DR,DIE
"RTN","IBDFDE5",116,0)
 ;W !!,"DONE"
"RTN","IBDFDE5",117,0)
 Q
"RTN","IBDFDE5",118,0)
CLNTMP ; -- kill tmp globals, on load, forces rebuild with updates
"RTN","IBDFDE5",119,0)
 K ^TMP("IBD-LST"),^TMP("IBD-OBJ")
"RTN","IBDFDE5",120,0)
 Q
"RTN","IBDFDE5",121,0)
 ;
"RTN","IBDFDE5",122,0)
XREF ;
"RTN","IBDFDE5",123,0)
 D BMES^XPDUTL("Removing 'RECD' cross-reference on PRINTED FORM ID field")
"RTN","IBDFDE5",124,0)
 S DA=0
"RTN","IBDFDE5",125,0)
 F  S DA=$O(^DD(357.96,.01,1,DA)) Q:DA<1  I $G(^(DA,0))="357.96^RECD^MUMPS" S DIK="^DD(357.96,.01,1,",DA(2)=357.96,DA(1)=.01 D ^DIK K DIK
"RTN","IBDFDE5",126,0)
 ;
"RTN","IBDFDE5",127,0)
 D BMES^XPDUTL("Removing 'RECD2' cross-reference on DATE/TIME RECEIVED IN VISTA field")
"RTN","IBDFDE5",128,0)
 S DA=0
"RTN","IBDFDE5",129,0)
 F  S DA=$O(^DD(357.96,.06,1,DA)) Q:DA<1  I $G(^(DA,0))="357.96^RECD2^MUMPS" S DIK="^DD(357.96,.06,1,",DA(2)=357.96,DA(1)=.06 D ^DIK K DIK
"RTN","IBDFDE5",130,0)
 ;
"RTN","IBDFDE5",131,0)
 D BMES^XPDUTL("Removing 'RECD3' cross-reference on DATE/TIME PRINTED field")
"RTN","IBDFDE5",132,0)
 S DA=0
"RTN","IBDFDE5",133,0)
 F  S DA=$O(^DD(357.96,.05,1,DA)) Q:DA<1  I $G(^(DA,0))="357.96^RECD3^MUMPS" S DIK="^DD(357.96,.05,1,",DA(2)=357.96,DA(1)=.05 D ^DIK K DIK
"RTN","IBDFDE5",134,0)
 K DA
"RTN","IBDFDE5",135,0)
 K ^IBD(357.96,"RECD")
"RTN","IBDFDE5",136,0)
 Q
"RTN","IBDFDE5",137,0)
 ;
"RTN","IBDFDE5",138,0)
PIDIM ;
"RTN","IBDFDE5",139,0)
 D BMES^XPDUTL("Updating PCE DIM OUTPUT TRANSFORM in file 357.6")
"RTN","IBDFDE5",140,0)
 N IBD,LINE,PKG,NOD14,IEN
"RTN","IBDFDE5",141,0)
 F IBD=1:1 S LINE=$P($T(OUTTRANS+IBD),";;",2) Q:LINE=""  D
"RTN","IBDFDE5",142,0)
 .S PKG=$P(LINE,"^",2)
"RTN","IBDFDE5",143,0)
 .S NOD14=$P(LINE,"^",3,99)
"RTN","IBDFDE5",144,0)
 .S IEN=+$O(^IBE(357.6,"B",$E(PKG,1,30),0))
"RTN","IBDFDE5",145,0)
 .Q:IEN<1
"RTN","IBDFDE5",146,0)
 .I $P($G(^IBE(357.6,IEN,0)),"^")=PKG S ^IBE(357.6,IEN,14)=NOD14
"RTN","IBDFDE5",147,0)
 Q
"RTN","IBDFDE5",148,0)
OUTTRANS ;;
"RTN","IBDFDE5",149,0)
 ;;61^INPUT PROVIDER^S Y=$$DSPLYPRV^IBDFN9(Y)
"RTN","IBDFDE5",150,0)
 ;;62^INPUT VISIT TYPE^S Y=$$DSPLYCPT^IBDFN9(Y)
"RTN","IBDFDE5",151,0)
 ;;102^PX INPUT VISIT TYPE^S Y=$$DSPLYCPT^IBDFN9(Y)
"RTN","IBDFDE5",152,0)
 ;;
"RTN","IBDFDE5",153,0)
PIUP ;
"RTN","IBDFDE5",154,0)
 D BMES^XPDUTL("Updating Package Interface File for Data Entry")
"RTN","IBDFDE5",155,0)
 N PKG,ENT,RTN,DYN,NODE18,IEN
"RTN","IBDFDE5",156,0)
 F IBD=1:1 S LINE=$P($T(UPDATE+IBD),";;",2) Q:LINE=""  D
"RTN","IBDFDE5",157,0)
 .S PKG=$P(LINE,"^",2)
"RTN","IBDFDE5",158,0)
 .S ENT=$P(LINE,"^",3)
"RTN","IBDFDE5",159,0)
 .S RTN=$P(LINE,"^",4)
"RTN","IBDFDE5",160,0)
 .S DYN=$P(LINE,"^",5)
"RTN","IBDFDE5",161,0)
 .S NOD18=$P(LINE,"^",6,99)
"RTN","IBDFDE5",162,0)
 .S IEN=+$O(^IBE(357.6,"B",$E(PKG,1,30),0))
"RTN","IBDFDE5",163,0)
 .Q:IEN<1
"RTN","IBDFDE5",164,0)
 .I $P($G(^IBE(357.6,IEN,0)),"^")=PKG D
"RTN","IBDFDE5",165,0)
 ..S ^IBE(357.6,IEN,18)=NOD18
"RTN","IBDFDE5",166,0)
 ..I $G(ENT)'="" S $P(^IBE(357.6,IEN,0),"^",2)=ENT
"RTN","IBDFDE5",167,0)
 ..I $G(RTN)'="" S $P(^IBE(357.6,IEN,0),"^",3)=RTN
"RTN","IBDFDE5",168,0)
 ..I $G(DYN)'="" S $P(^IBE(357.6,IEN,0),"^",14)=DYN
"RTN","IBDFDE5",169,0)
 Q
"RTN","IBDFDE5",170,0)
 ;
"RTN","IBDFDE5",171,0)
UPDATE ;;
"RTN","IBDFDE5",172,0)
 ;;59^INPUT PROCEDURE CODE (CPT4)^^^^S IBDF("OTHER")="81^I '$P(^(0),U,4)" D LIST^IBDFDE2(.IBDSEL,.IBDF,"CPT Procedure Code")
"RTN","IBDFDE5",173,0)
 ;;61^INPUT PROVIDER^PRVDR^IBDFN4^1^S IBDF("OTHER")="200^$$SCREEN^IBDFDE10(+Y)" D LIST^IBDFDE2(.IBDSEL,.IBDF,"Provider")
"RTN","IBDFDE5",174,0)
 ;;62^INPUT VISIT TYPE^^^^S IBDF("OTHER")="357.69^I '$P(^(0),U,4)" D LIST^IBDFDE2(.IBDSEL,.IBDF,"Visit Type (EM) Code")
"RTN","IBDFDE5",175,0)
 ;;69^INPUT DIAGNOSIS CODE (ICD9)^^^^S IBDF("OTHER")="80^I '$P(^(0),U,9)" D LIST^IBDFDE2(.IBDSEL,.IBDF,"Diagnosis Code")
"RTN","IBDFDE5",176,0)
 ;;74^PX INPUT PATIENT ACTIVE PROBLEM^DSELECT^GMPLENFM^1^D LIST^IBDFDE2(.IBDSEL,.IBDF,"Active Problem")
"RTN","IBDFDE5",177,0)
 ;;91^PX INPUT EDUCATION TOPICS^^^^S IBDF("OTHER")="9999999.09^I '$P(^(0),U,3)" D LIST^IBDFDE2(.IBDSEL,.IBDF,"Patient Education")
"RTN","IBDFDE5",178,0)
 ;;92^PX INPUT EXAMS^^^^S IBDF("OTHER")="9999999.15^I '$P(^(0),U,4)" D LIST^IBDFDE2(.IBDSEL,.IBDF,"Exam")
"RTN","IBDFDE5",179,0)
 ;;93^PX INPUT HEALTH FACTORS^^^^S IBDF("OTHER")="9999999.64^I '$P(^(0),U,10),$P(^(0),U,10)=""F"",'$P(^(0),U,11)" D LIST^IBDFDE2(.IBDSEL,.IBDF,"Health Factors")
"RTN","IBDFDE5",180,0)
 ;;94^PX INPUT IMMUNIZATION^^^^S IBDF("OTHER")="9999999.14^I '$P(^(0),U,7)" D LIST^IBDFDE2(.IBDSEL,.IBDF,"Immunizations")
"RTN","IBDFDE5",181,0)
 ;;97^PX INPUT SKIN TESTS^^^^S IBDF("OTHER")="9999999.28^I '$P(^(0),U,3)" D LIST^IBDFDE2(.IBDSEL,.IBDF,"Skin Tests")
"RTN","IBDFDE5",182,0)
 ;;99^PX INPUT VITALS^^^^D HNDPR^IBDFDE3(.IBDSEL,.IBDF)
"RTN","IBDFDE5",183,0)
 ;;103^GMP INPUT CLINIC COMMON PROBLEMS^^^^S IBDF("LEXICON")=1,IBDF("OTHER")="757.01^" D LIST^IBDFDE2(.IBDSEL,.IBDF,"Diagnosis, Problem, or Term")
"RTN","IBDFDE5",184,0)
 ;;
"RTN","IBDFDE5",185,0)
 ;; -- Example of setting up a date/time prompt
"RTN","IBDFDE5",186,0)
 ;;95^PX INPUT CHECKOUT TIME^^^^S IBDF("ASKDATE")=1 D HNDPR^IBDFDE3(.IBDSEL,.IBDF) K IBDF("ASKDATE")
"RTN","IBDFDE5",187,0)
 ;;
"RTN","IBDFDE5",188,0)
 ;; -- Example of setting up a multiple choice field
"RTN","IBDFDE5",189,0)
 ;;100^PX INPUT VISIT CLASSIFICATION^^^^D MULT^IBDFDE4(.IBDSEL,.IBDF)
"RTN","IBDFDE5",190,0)
 ;;
"RTN","IBDFN10")
0^2^B8034174
"RTN","IBDFN10",1,0)
IBDFN10 ;ALB/AAS - ENCOUNTER FORM - (selection routines - mostly for PCE files) ; 5-Jun-95
"RTN","IBDFN10",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**40**;APR 24, 1997
"RTN","IBDFN10",3,0)
 ;
"RTN","IBDFN10",4,0)
LOOK(DIC,SCREEN) ; -- Look up entry
"RTN","IBDFN10",5,0)
 I +$G(DIC)<1 Q
"RTN","IBDFN10",6,0)
 S DIC(0)="AEMQZ",DIC("S")=$G(SCREEN) D ^DIC K DIC
"RTN","IBDFN10",7,0)
 Q
"RTN","IBDFN10",8,0)
 ;
"RTN","IBDFN10",9,0)
EDTOP ; -- select Education Topics (from file 9999999.09)
"RTN","IBDFN10",10,0)
 N X,Y,SCREEN
"RTN","IBDFN10",11,0)
 I '$D(@IBARY@("SCREEN")) D EDSCRN
"RTN","IBDFN10",12,0)
 S SCREEN=$G(@IBARY@("SCREEN"))
"RTN","IBDFN10",13,0)
 D LOOK(9999999.09,SCREEN) I +Y<1 K @IBARY Q  ;kill if nothing selected
"RTN","IBDFN10",14,0)
 S @IBARY=+Y_"^"_$P(Y(0),"^",1,2)
"RTN","IBDFN10",15,0)
 Q
"RTN","IBDFN10",16,0)
EDSCRN ;
"RTN","IBDFN10",17,0)
 S @IBARY@("SCREEN")="I '$P(^(0),U,3)"
"RTN","IBDFN10",18,0)
 Q
"RTN","IBDFN10",19,0)
 ;
"RTN","IBDFN10",20,0)
IMM ; -- select Immunizations (from file 9999999.14)
"RTN","IBDFN10",21,0)
 N X,Y,SCREEN
"RTN","IBDFN10",22,0)
 I '$D(@IBARY@("SCREEN")) D IMSCRN
"RTN","IBDFN10",23,0)
 S SCREEN=$G(@IBARY@("SCREEN"))
"RTN","IBDFN10",24,0)
 D LOOK(9999999.14,SCREEN) I +Y<1 K @IBARY Q  ;kill if nothing selected
"RTN","IBDFN10",25,0)
 S @IBARY=+Y_"^"_$P(Y(0),"^",1,3)
"RTN","IBDFN10",26,0)
 Q
"RTN","IBDFN10",27,0)
IMSCRN ;
"RTN","IBDFN10",28,0)
 S @IBARY@("SCREEN")="I '$P(^(0),U,7)"
"RTN","IBDFN10",29,0)
 Q
"RTN","IBDFN10",30,0)
 ;
"RTN","IBDFN10",31,0)
EXAM ; -- select Exams (from file 9999999.15)
"RTN","IBDFN10",32,0)
 N X,Y,SCREEN
"RTN","IBDFN10",33,0)
 I '$D(@IBARY@("SCREEN")) D EXSCRN
"RTN","IBDFN10",34,0)
 S SCREEN=$G(@IBARY@("SCREEN"))
"RTN","IBDFN10",35,0)
 D LOOK(9999999.15,SCREEN) I +Y<1 K @IBARY Q  ;kill if nothing selected
"RTN","IBDFN10",36,0)
 S @IBARY=+Y_"^"_$P(Y(0),"^",1,3)
"RTN","IBDFN10",37,0)
 Q
"RTN","IBDFN10",38,0)
EXSCRN ;
"RTN","IBDFN10",39,0)
 S @IBARY@("SCREEN")="I '$P(^(0),U,4)"
"RTN","IBDFN10",40,0)
 Q
"RTN","IBDFN10",41,0)
 ;
"RTN","IBDFN10",42,0)
TRTMNT ; -- select treatments (from file 9999999.17)
"RTN","IBDFN10",43,0)
 N X,Y,SCREEN
"RTN","IBDFN10",44,0)
 I '$D(@IBARY@("SCREEN")) D TRSCRN
"RTN","IBDFN10",45,0)
 S SCREEN=$G(@IBARY@("SCREEN"))
"RTN","IBDFN10",46,0)
 D LOOK(9999999.17,SCREEN) I +Y<1 K @IBARY Q  ;kill if nothing selected
"RTN","IBDFN10",47,0)
 S @IBARY=+Y_"^"_$P(Y(0),"^",1,2)
"RTN","IBDFN10",48,0)
 Q
"RTN","IBDFN10",49,0)
TRSCRN ;
"RTN","IBDFN10",50,0)
 S @IBARY@("SCREEN")="I '$P(^(0),U,4)"
"RTN","IBDFN10",51,0)
 Q
"RTN","IBDFN10",52,0)
 ;
"RTN","IBDFN10",53,0)
SKINTST ; -- select Skin Tests (from file 9999999.28)
"RTN","IBDFN10",54,0)
 N X,Y,SCREEN
"RTN","IBDFN10",55,0)
 I '$D(@IBARY@("SCREEN")) D SKSCRN
"RTN","IBDFN10",56,0)
 S SCREEN=$G(@IBARY@("SCREEN"))
"RTN","IBDFN10",57,0)
 D LOOK(9999999.28,SCREEN) I +Y<1 K @IBARY Q  ;kill if nothing selected
"RTN","IBDFN10",58,0)
 S @IBARY=+Y_"^"_$P(Y(0),"^",1,2)
"RTN","IBDFN10",59,0)
 Q
"RTN","IBDFN10",60,0)
SKSCRN ;
"RTN","IBDFN10",61,0)
 S @IBARY@("SCREEN")="I '$P(^(0),U,3)"
"RTN","IBDFN10",62,0)
 Q
"RTN","IBDFN10",63,0)
 ;
"RTN","IBDFN10",64,0)
HF ; -- select Health Factors (from file 9999999.64)
"RTN","IBDFN10",65,0)
 N X,Y,SCREEN
"RTN","IBDFN10",66,0)
 I '$D(@IBARY@("SCREEN")) D HFSCRN
"RTN","IBDFN10",67,0)
 S SCREEN=$G(@IBARY@("SCREEN"))
"RTN","IBDFN10",68,0)
 D LOOK(9999999.64,SCREEN) I +Y<1 K @IBARY Q  ;kill if nothing selected
"RTN","IBDFN10",69,0)
 S @IBARY=+Y_"^"_$P(Y(0),"^",1,5)
"RTN","IBDFN10",70,0)
 Q
"RTN","IBDFN10",71,0)
HFSCRN ;
"RTN","IBDFN10",72,0)
 S @IBARY@("SCREEN")="I '$P(^(0),U,10),$P(^(0),U,10)=""F"",'$P(^(0),U,11)"
"RTN","IBDFN10",73,0)
 Q
"RTN","IBDFN10",74,0)
 ;
"RTN","IBDFN10",75,0)
CHECKOUT ;other visit dispositions than checkout
"RTN","IBDFN10",76,0)
 ;the PCE GDI does not accept this now,but it may in the future
"RTN","IBDFN10",77,0)
 K DIR S DIR(0)="SO^1:No-show;2:Cancel;3:Rescheduled"
"RTN","IBDFN10",78,0)
 S DIR("A")="APPOINTMENT DISPOSITION TYPE"
"RTN","IBDFN10",79,0)
 D ^DIR
"RTN","IBDFN10",80,0)
 I $D(DIRUT) K @IBARY Q  ;kill if nothing selected
"RTN","IBDFN10",81,0)
 S @IBARY=+Y_"^"_$S(+Y=1:"No-show",+Y=2:"Cancel",+Y=3:"Rescheduled",1:"")
"RTN","IBDFN10",82,0)
 K DIR
"RTN","IBDFN10",83,0)
 Q
"RTN","IBDFN12")
0^4^B7519249
"RTN","IBDFN12",1,0)
IBDFN12 ;ALB/CJM - ENCOUNTER FORM - SELECTORS;MAY 10, 1995
"RTN","IBDFN12",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**12,38,40**;APR 24, 1997
"RTN","IBDFN12",3,0)
 ;
"RTN","IBDFN12",4,0)
LOOKUP(FILE,SCREEN,X,NODE) ;
"RTN","IBDFN12",5,0)
 ; -- lookup X in file using SCREEN
"RTN","IBDFN12",6,0)
 ; -- kills X if lookup not successful, else sets X to the ien and returns NODE as the 0 node
"RTN","IBDFN12",7,0)
 ; -- pass X and NODE by reference
"RTN","IBDFN12",8,0)
 ;
"RTN","IBDFN12",9,0)
 I +$G(FILE)<1 K X Q
"RTN","IBDFN12",10,0)
 N Y
"RTN","IBDFN12",11,0)
 S (NODE,Y)=""
"RTN","IBDFN12",12,0)
 K DIC S DIC=FILE,DIC("S")=SCREEN
"RTN","IBDFN12",13,0)
 S DIC(0)="EMQZ"
"RTN","IBDFN12",14,0)
 I $D(^DIC(FILE)) D ^DIC K DIC
"RTN","IBDFN12",15,0)
 I +Y>0 D
"RTN","IBDFN12",16,0)
 .S X=Y,NODE=Y(0)
"RTN","IBDFN12",17,0)
 E  K X
"RTN","IBDFN12",18,0)
 Q
"RTN","IBDFN12",19,0)
 ;
"RTN","IBDFN12",20,0)
SLCTCPT(X) ;for CPT codes
"RTN","IBDFN12",21,0)
 ;pass X by reference
"RTN","IBDFN12",22,0)
 ;example of use: D SLCTCPT^IBDFN12(.X)
"RTN","IBDFN12",23,0)
 ;
"RTN","IBDFN12",24,0)
 N NODE
"RTN","IBDFN12",25,0)
 D LOOKUP(81,"I '$P(^(0),U,4)",.X,.NODE)
"RTN","IBDFN12",26,0)
 I $D(X) S IBLABEL=$P(NODE,"^",2),(IBID,X)=$P(NODE,"^",1)
"RTN","IBDFN12",27,0)
 Q
"RTN","IBDFN12",28,0)
 ;
"RTN","IBDFN12",29,0)
SLCTDX(X) ;for ICD9 diagnosis codes
"RTN","IBDFN12",30,0)
 ;pass X by reference
"RTN","IBDFN12",31,0)
 ;example of use: D SLCTICD^IBDFN12(.X)
"RTN","IBDFN12",32,0)
 ;
"RTN","IBDFN12",33,0)
 N NODE
"RTN","IBDFN12",34,0)
 D LOOKUP(80,"I '$P(^(0),U,9)",.X,.NODE)
"RTN","IBDFN12",35,0)
 I $D(X) S IBLABEL=$P(NODE,"^",3),(IBID,X)=$P(NODE,"^",1)
"RTN","IBDFN12",36,0)
 Q
"RTN","IBDFN12",37,0)
 ;
"RTN","IBDFN12",38,0)
SLCTVST(X) ;for VISIT TYPE codes
"RTN","IBDFN12",39,0)
 ;pass X by reference
"RTN","IBDFN12",40,0)
 ;example of use: D SLCTVST^IBDFN12(.X)
"RTN","IBDFN12",41,0)
 ;
"RTN","IBDFN12",42,0)
 N NODE
"RTN","IBDFN12",43,0)
 D LOOKUP(357.69,"I '$P(^(0),U,4)",.X,.NODE)
"RTN","IBDFN12",44,0)
 ;; --change to api cpt ; dhh
"RTN","IBDFN12",45,0)
 I $G(X) S NODE=$$CPT^ICPTCOD(+NODE),NODE=$G(NODE),(IBID,X)=$P(NODE,"^",2),IBLABEL=$P(NODE,"^",3)
"RTN","IBDFN12",46,0)
 Q
"RTN","IBDFN12",47,0)
 ;
"RTN","IBDFN12",48,0)
SLCTED(X) ;for Education Topics
"RTN","IBDFN12",49,0)
 ;pass X by reference
"RTN","IBDFN12",50,0)
 ;example of use: D SLCTED^IBDFN12(.X)
"RTN","IBDFN12",51,0)
 ;
"RTN","IBDFN12",52,0)
 N NODE
"RTN","IBDFN12",53,0)
 D LOOKUP(9999999.09,"",.X,.NODE)
"RTN","IBDFN12",54,0)
 I $D(X) S IBLABEL=$P(NODE,"^"),IBID=+X,X=IBLABEL
"RTN","IBDFN12",55,0)
 Q
"RTN","IBDFN12",56,0)
 ;
"RTN","IBDFN12",57,0)
SLCTIMM(X) ;for Immunizations
"RTN","IBDFN12",58,0)
 ;pass X by reference
"RTN","IBDFN12",59,0)
 ;example of use: D SLCTIMM^IBDFN12(.X)
"RTN","IBDFN12",60,0)
 ;
"RTN","IBDFN12",61,0)
 N NODE
"RTN","IBDFN12",62,0)
 D LOOKUP(9999999.14,"",.X,.NODE)
"RTN","IBDFN12",63,0)
 I $D(X) S IBLABEL=$P(NODE,"^",2),IBID=+X,X=IBLABEL
"RTN","IBDFN12",64,0)
 Q
"RTN","IBDFN12",65,0)
 ;
"RTN","IBDFN12",66,0)
SLCTEX(X) ;for Exams
"RTN","IBDFN12",67,0)
 ;pass X by reference
"RTN","IBDFN12",68,0)
 ;example of use: D SLCTEX^IBDFN12(.X)
"RTN","IBDFN12",69,0)
 ;
"RTN","IBDFN12",70,0)
 N NODE
"RTN","IBDFN12",71,0)
 D LOOKUP(9999999.15,"",.X,.NODE)
"RTN","IBDFN12",72,0)
 I $D(X) S IBLABEL=$P(NODE,"^"),IBID=+X,X=IBLABEL
"RTN","IBDFN12",73,0)
 Q
"RTN","IBDFN12",74,0)
 ;
"RTN","IBDFN12",75,0)
SLCTSKN(X) ;for Skin Tests
"RTN","IBDFN12",76,0)
 ;pass X by reference
"RTN","IBDFN12",77,0)
 ;example of use: D SLCTSKN^IBDFN12(.X)
"RTN","IBDFN12",78,0)
 ;
"RTN","IBDFN12",79,0)
 N NODE
"RTN","IBDFN12",80,0)
 D LOOKUP(9999999.28,"",.X,.NODE)
"RTN","IBDFN12",81,0)
 I $D(X) S IBLABEL=$P(NODE,"^"),IBID=+X,X=IBLABEL
"RTN","IBDFN12",82,0)
 Q
"RTN","IBDFN12",83,0)
 ;
"RTN","IBDFN12",84,0)
SLCTHF(X) ;for Health Factors
"RTN","IBDFN12",85,0)
 ;pass X by reference
"RTN","IBDFN12",86,0)
 ;example of use: D SLCTHF^IBDFN12(.X)
"RTN","IBDFN12",87,0)
 ;
"RTN","IBDFN12",88,0)
 N NODE
"RTN","IBDFN12",89,0)
 D LOOKUP(9999999.64,"I $P(^(0),U,10)=""F"",'$P(^(0),U,11)",.X,.NODE)
"RTN","IBDFN12",90,0)
 I $D(X) S IBLABEL=$P(NODE,"^"),IBID=+X,X=IBLABEL
"RTN","IBDFN12",91,0)
 Q
"RTN","IBDFN12",92,0)
SLCTTR(X) ;for Treatments
"RTN","IBDFN12",93,0)
 ;pass X by reference
"RTN","IBDFN12",94,0)
 ;example of use: D SLCTTR^IBDFN12(.X)
"RTN","IBDFN12",95,0)
 ;
"RTN","IBDFN12",96,0)
 N NODE
"RTN","IBDFN12",97,0)
 D LOOKUP(9999999.17,"",.X,.NODE)
"RTN","IBDFN12",98,0)
 I $D(X) S IBLABEL=$P(NODE,"^"),IBID=+X,X=IBLABEL
"RTN","IBDFN12",99,0)
 Q
"RTN","IBDFN12",100,0)
 ;
"RTN","IBDFN12",101,0)
SLCTYN(X) ;for selecting YES or NO
"RTN","IBDFN12",102,0)
 ;
"RTN","IBDFN12",103,0)
 I "Yy"[$E(X) S X="YES",IBID=1 Q
"RTN","IBDFN12",104,0)
 I "Nn"[$E(X) S X="NO",IBID=0 Q
"RTN","IBDFN12",105,0)
 W "Enter YES or NO."
"RTN","IBDFN12",106,0)
 K X
"RTN","IBDFN12",107,0)
 Q
"RTN","IBDFN12",108,0)
 ;
"RTN","IBDFN12",109,0)
SLCTCLS(PI,X) ;for visit classification
"RTN","IBDFN12",110,0)
 ;pass X by reference
"RTN","IBDFN12",111,0)
 ;*NOTE: if interactive sets IBQUAL to the qualifier, IBLABEL to the recommended label, for use in the input template
"RTN","IBDFN12",112,0)
 ;example of use: D INPUTCLS^IBDFN12(PI,.X)
"RTN","IBDFN12",113,0)
 ;
"RTN","IBDFN12",114,0)
 N NODE
"RTN","IBDFN12",115,0)
 D LOOKUP(357.98,"I $$DQGOOD^IBDFU9(PI,Y)",.X,.NODE)
"RTN","IBDFN12",116,0)
 I $D(X) S IBID="",IBLABEL=$P(NODE,"^",3),IBQUAL=+X,X=$P(NODE,"^")
"RTN","IBDFN12",117,0)
 Q
"RTN","IBDY340")
0^3^B1607764
"RTN","IBDY340",1,0)
IBDY340 ;ALB/DHH - POST INSTALL FOR PATCH IBD*3*40 ; OCT 1, 1999
"RTN","IBDY340",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**40**;APR 24, 1997
"RTN","IBDY340",3,0)
 ;
"RTN","IBDY340",4,0)
 D ASK
"RTN","IBDY340",5,0)
 ;
"RTN","IBDY340",6,0)
 Q
"RTN","IBDY340",7,0)
 ;
"RTN","IBDY340",8,0)
ASK ;-- Change PX INPUT HEALTH FACTORS to check for inactive 
"RTN","IBDY340",9,0)
 ;   in the package interface file
"RTN","IBDY340",10,0)
 ;
"RTN","IBDY340",11,0)
 D MES^XPDUTL(">>> Updating PX INPUT HEALTH FACTORS Package Interface.")
"RTN","IBDY340",12,0)
 N I,J,X
"RTN","IBDY340",13,0)
 S I=0
"RTN","IBDY340",14,0)
 F  S I=$O(^IBE(357.6,"B",$E("PX INPUT HEALTH FACTORS",1,30),I)) Q:'I  D
"RTN","IBDY340",15,0)
 .I $P($G(^IBE(357.6,I,0)),"^")="PX INPUT HEALTH FACTORS" D
"RTN","IBDY340",16,0)
 ..S ^IBE(357.6,I,18)="S IBDF(""OTHER"")=""9999999.64^I '$P(^(0),U,10),$P(^(0),U,10)=""""F"""",'$P(^(0),U,11)"" D LIST^IBDFDE2(.IBDSEL,.IBDF,""Health Factors"")"
"RTN","IBDY340",17,0)
 Q
"VER")
8.0^22
**END**
**END**

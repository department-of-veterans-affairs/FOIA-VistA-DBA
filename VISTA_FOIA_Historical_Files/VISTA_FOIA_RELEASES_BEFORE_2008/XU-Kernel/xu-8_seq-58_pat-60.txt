$TXT Created by IVEY,JOEL at KERNEL.ISC-SF.VA.GOV  (KIDS) on THURSDAY, 03/27/97 at 13:03
=============================================================================
Run Date: MAR 20, 1998                     Designation: XU*8*60
Package : XU - KERNEL                          Priority: Mandatory
Version : 8        SEQ #58                      Status: Released
=============================================================================


Subject: FIX NAMESPACE PROBLEM/FIX MICROSURGERY

Category: 
  - Routine

Description: 
============

  
  Prerequisites:
  
       The following patches must be installed before this patch: 44
  
  
       XU*8*60   CORRECT NAMESPACE PROBLEM/FIX MICROSURGERY
  
       When the routine XUSHSHP was written to hash the signature block in
       file 200, several local variables were used that were not within
       the Kernel namespace.  As would be expected, at least one of the
       variables is now another namespace and conflicts have arisen.
       This patch uses the NEW command to limit the scope of these
       incorrectly namespaced variables to the code in which they are
       used, and will prevent future problems with other packages due to
       this error.
  
       Several alpha sites reported unusually high activity associated
       with the XUTL global.  This was identified as a problem related to
       a spuriously high date value being set into the "AT" cross
       reference in file 19.  Since this date was always ahead of NOW,
       micro-surgery would restart as soon as it had completed.  To
       correct this problem, this patch contains a change to XQ83 which
       will reset any of these spurious future nodes to NOW and stop this
       excess activity.  A change is also made in XQ7 which will prevent
       these nodes being set incorrectly in the future.
  
       There have also been some reports of problems [NOIS CLA-0397-22395]
       associated with the value of ZTCPU being reset as a result of a
       call to KICK^XQ7 during KIDS installations.  This problem is
       corrected by NEWING the value ZTCPU before it is used in KICK^XQ7.
  
  
  Category:
  =========
       Routine
  
  
  Test Sites :
  ============
  Dayton VAMC
  
  
  Routine Summary :
  =================
       The following is a list of the routines included in this patch.
       The second line of each of these routines now looks like:
  
               <tab>;;8.0;KERNEL;**Patch List**;Jul 10, 1995
  
  Routine Name                      Patch List
  ------------                      ----------
  XQ7                                44,60
  XQ83                               60
  XUSHSHP                            60
  
  Checksums:
  ==========
    Rtn Nm           Chksum Before        Chksum After         Patch List
  
    XQ7                2506259              2523046             44,60
    XQ83               9490213             10007662             60
    XUSHSHP           11148336             11486766             60
  
    _X_ Used CHECK^XTSUMBLD     (or)    ___ Used KIDS option
  
       To test if the transport has been corrupted, you can use the
       "Verify Package Integrity" option.  This option is under Utilities
       under the KIDS menu.  It will compare the checksums in the build
       with the current checksums and list any that differ.
  
  
  Installation Instructions:
  ==========================
 Please note the instructions specific to DSM sites.
  
       1.   Users ARE allowed to be on the system during the
            installation.  However, since XQ83 is referenced during the
            log-on procedure, BRIEFLY INHIBITING LOGONS while the patch is
            installed is recommended
  
       2.   DO NOT place TaskMan in a WAIT/STOP state.
  
       3.   The routines in this patch are used in the background and will
            not normally affect journaling, compiled templates, or option
            usage.
  
       4.   DSM Sites: These routines are usually mapped so you will need
            to disable mapping for the affected routines.
  
       5.   Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu.
            This option will load the KIDS package onto your system.
  
       6.   The patch has now been loaded into a Transport global on your
            system. You now need to use KIDS to install the Transport
            global.
  
       7.   On the KIDS menu, under the 'Installation' menu, use the
            following options:
  
             Verify Checksums in Transport Global
             Print Transport Global
             Compare Transport Global to Current System
             Backup a Transport Global
             Install Package(s)
             INSTALL NAME: XU*8.0*60
                           =========
       8.   DSM Sites: Rebuild your mapped set if necessary.

Routine Information:
====================

Routine Name:
  - XUSHSHP

  

Routine Checksum:

Routine Name:
  - XQ7

  

Routine Checksum:

Routine Name:
  - XQ83

  

Routine Checksum:
 

=============================================================================
User Information:                               
Entered By  : IVEY,JOEL                      Date Entered : MAR 27, 1997
Completed By: MARSHALL,RICK                 Date Completed: MAR 10, 1998
Released By : GIBBONS,JOE                   Date Released : MAR 20, 1998
=============================================================================


Packman Mail Message:
=====================

$END TXT

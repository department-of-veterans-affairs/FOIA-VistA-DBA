KIDS Distribution saved on Jul 13, 2005@10:53:16
1010 EZ PHASE 3.0 ENHANCEMENTS
**KIDS**:DG*5.3*624^EAS*1.0*57^

**INSTALL NAME**
DG*5.3*624
"BLD",5141,0)
DG*5.3*624^REGISTRATION^0^3050713^y
"BLD",5141,1,0)
^^1^1^3050407^
"BLD",5141,1,1,0)
1010 EZ PHASE 3.0
"BLD",5141,4,0)
^9.64PA^408.22^4
"BLD",5141,4,2,0)
2
"BLD",5141,4,2,2,0)
^9.641^2^1
"BLD",5141,4,2,2,2,0)
PATIENT  (File-top level)
"BLD",5141,4,2,2,2,1,0)
^9.6411^.2515^10
"BLD",5141,4,2,2,2,1,.133,0)
EMAIL ADDRESS
"BLD",5141,4,2,2,2,1,.134,0)
CELL PHONE NUMBER
"BLD",5141,4,2,2,2,1,.135,0)
PAGER NUMBER
"BLD",5141,4,2,2,2,1,.2515,0)
SPOUSE'S EMPLOYMENT STATUS
"BLD",5141,4,2,2,2,1,.2516,0)
SPOUSE'S RETIREMENT DATE
"BLD",5141,4,2,2,2,1,.31115,0)
EMPLOYMENT STATUS
"BLD",5141,4,2,2,2,1,.31116,0)
DATE OF RETIREMENT
"BLD",5141,4,2,2,2,1,.362,0)
DISABILITY RET. FROM MILITARY?
"BLD",5141,4,2,2,2,1,1010.1511,0)
APPOINTMENT REQUEST DATE
"BLD",5141,4,2,2,2,1,1010.159,0)
APPOINTMENT REQUEST ON 1010EZ
"BLD",5141,4,2,222)
y^y^p^^^^n^^n
"BLD",5141,4,2,224)

"BLD",5141,4,408.13,0)
408.13
"BLD",5141,4,408.13,2,0)
^9.641^408.13^1
"BLD",5141,4,408.13,2,408.13,0)
INCOME PERSON  (File-top level)
"BLD",5141,4,408.13,2,408.13,1,0)
^9.6411^1.8^8
"BLD",5141,4,408.13,2,408.13,1,1.1,0)
MAIDEN NAME
"BLD",5141,4,408.13,2,408.13,1,1.2,0)
STREET ADDRESS 1
"BLD",5141,4,408.13,2,408.13,1,1.3,0)
STREET ADDRESS 2
"BLD",5141,4,408.13,2,408.13,1,1.4,0)
STREET ADDRESS 3
"BLD",5141,4,408.13,2,408.13,1,1.5,0)
CITY
"BLD",5141,4,408.13,2,408.13,1,1.6,0)
STATE
"BLD",5141,4,408.13,2,408.13,1,1.7,0)
ZIP
"BLD",5141,4,408.13,2,408.13,1,1.8,0)
TELEPHONE NUMBER
"BLD",5141,4,408.13,222)
y^y^p^^^^n^^n
"BLD",5141,4,408.13,224)

"BLD",5141,4,408.21,0)
408.21
"BLD",5141,4,408.21,2,0)
^9.641^408.21^1
"BLD",5141,4,408.21,2,408.21,0)
INDIVIDUAL ANNUAL INCOME  (File-top level)
"BLD",5141,4,408.21,2,408.21,1,0)
^9.6411^1.01^2
"BLD",5141,4,408.21,2,408.21,1,1.01,0)
ADJUSTED MEDICAL EXPENSES
"BLD",5141,4,408.21,2,408.21,1,1.12,0)
GROSS MEDICAL EXPENSES
"BLD",5141,4,408.21,222)
y^y^p^^^^n^^n
"BLD",5141,4,408.21,224)

"BLD",5141,4,408.22,0)
408.22
"BLD",5141,4,408.22,2,0)
^9.641^408.22^1
"BLD",5141,4,408.22,2,408.22,0)
INCOME RELATION  (File-top level)
"BLD",5141,4,408.22,2,408.22,1,0)
^9.6411^.1^4
"BLD",5141,4,408.22,2,408.22,1,.07,0)
AMOUNT CONTRIBUTED TO SPOUSE
"BLD",5141,4,408.22,2,408.22,1,.1,0)
CONTRIBUTED TO SUPPORT
"BLD",5141,4,408.22,2,408.22,1,.18,0)
CHILD 18-23 IN SCHOOL
"BLD",5141,4,408.22,2,408.22,1,.19,0)
AMOUNT CONTRIBUTED TO CHILD
"BLD",5141,4,408.22,222)
y^y^p^^^^n^^n
"BLD",5141,4,408.22,224)

"BLD",5141,4,"APDD",2,2)

"BLD",5141,4,"APDD",2,2,.133)

"BLD",5141,4,"APDD",2,2,.134)

"BLD",5141,4,"APDD",2,2,.135)

"BLD",5141,4,"APDD",2,2,.2515)

"BLD",5141,4,"APDD",2,2,.2516)

"BLD",5141,4,"APDD",2,2,.31115)

"BLD",5141,4,"APDD",2,2,.31116)

"BLD",5141,4,"APDD",2,2,.362)

"BLD",5141,4,"APDD",2,2,1010.1511)

"BLD",5141,4,"APDD",2,2,1010.159)

"BLD",5141,4,"APDD",408.13,408.13)

"BLD",5141,4,"APDD",408.13,408.13,1.1)

"BLD",5141,4,"APDD",408.13,408.13,1.2)

"BLD",5141,4,"APDD",408.13,408.13,1.3)

"BLD",5141,4,"APDD",408.13,408.13,1.4)

"BLD",5141,4,"APDD",408.13,408.13,1.5)

"BLD",5141,4,"APDD",408.13,408.13,1.6)

"BLD",5141,4,"APDD",408.13,408.13,1.7)

"BLD",5141,4,"APDD",408.13,408.13,1.8)

"BLD",5141,4,"APDD",408.21,408.21)

"BLD",5141,4,"APDD",408.21,408.21,1.01)

"BLD",5141,4,"APDD",408.21,408.21,1.12)

"BLD",5141,4,"APDD",408.22,408.22)

"BLD",5141,4,"APDD",408.22,408.22,.07)

"BLD",5141,4,"APDD",408.22,408.22,.1)

"BLD",5141,4,"APDD",408.22,408.22,.18)

"BLD",5141,4,"APDD",408.22,408.22,.19)

"BLD",5141,4,"B",2,2)

"BLD",5141,4,"B",408.13,408.13)

"BLD",5141,4,"B",408.21,408.21)

"BLD",5141,4,"B",408.22,408.22)

"BLD",5141,"ABPKG")
n
"BLD",5141,"INID")
^n
"BLD",5141,"INIT")
POST^DG53P624
"BLD",5141,"KRN",0)
^9.67PA^8989.52^19
"BLD",5141,"KRN",.4,0)
.4
"BLD",5141,"KRN",.4,"NM",0)
^9.68A^2^2
"BLD",5141,"KRN",.4,"NM",1,0)
DGOPENDISPOSITIONS    FILE #2^2^0
"BLD",5141,"KRN",.4,"NM",2,0)
DGDISPOSTIONS    FILE #2^2^0
"BLD",5141,"KRN",.4,"NM","B","DGDISPOSTIONS    FILE #2",2)

"BLD",5141,"KRN",.4,"NM","B","DGOPENDISPOSITIONS    FILE #2",1)

"BLD",5141,"KRN",.401,0)
.401
"BLD",5141,"KRN",.402,0)
.402
"BLD",5141,"KRN",.402,"NM",0)
^9.68A^2^2
"BLD",5141,"KRN",.402,"NM",1,0)
DGMT ENTER/EDIT EXPENSES    FILE #408.21^408.21^0
"BLD",5141,"KRN",.402,"NM",2,0)
DGMT ENTER/EDIT DEPENDENTS    FILE #408.22^408.22^0
"BLD",5141,"KRN",.402,"NM","B","DGMT ENTER/EDIT DEPENDENTS    FILE #408.22",2)

"BLD",5141,"KRN",.402,"NM","B","DGMT ENTER/EDIT EXPENSES    FILE #408.21",1)

"BLD",5141,"KRN",.403,0)
.403
"BLD",5141,"KRN",.403,"NM",0)
^9.68A^^
"BLD",5141,"KRN",.5,0)
.5
"BLD",5141,"KRN",.84,0)
.84
"BLD",5141,"KRN",3.6,0)
3.6
"BLD",5141,"KRN",3.8,0)
3.8
"BLD",5141,"KRN",9.2,0)
9.2
"BLD",5141,"KRN",9.8,0)
9.8
"BLD",5141,"KRN",9.8,"NM",0)
^9.68A^60^52
"BLD",5141,"KRN",9.8,"NM",2,0)
DGMTSC3^^0^B5245052
"BLD",5141,"KRN",9.8,"NM",3,0)
DG53P624^^0^B75648051
"BLD",5141,"KRN",9.8,"NM",5,0)
DGRPCADD^^0^B9636895
"BLD",5141,"KRN",9.8,"NM",6,0)
DGRPH^^0^B27125641
"BLD",5141,"KRN",9.8,"NM",7,0)
DGRP4^^0^B7761202
"BLD",5141,"KRN",9.8,"NM",9,0)
DGRPV^^0^B16185844
"BLD",5141,"KRN",9.8,"NM",12,0)
DGEN^^0^B67215817
"BLD",5141,"KRN",9.8,"NM",13,0)
DGRPE^^0^B48301429
"BLD",5141,"KRN",9.8,"NM",15,0)
DGENU^^0^B36371341
"BLD",5141,"KRN",9.8,"NM",16,0)
DGMTSC1^^0^B2651546
"BLD",5141,"KRN",9.8,"NM",17,0)
DGDEP2^^0^B20373879
"BLD",5141,"KRN",9.8,"NM",18,0)
DGRPEIS^^0^B38166965
"BLD",5141,"KRN",9.8,"NM",19,0)
DGRPEIS3^^0^B78826774
"BLD",5141,"KRN",9.8,"NM",20,0)
DGMTSCU4^^0^B11617563
"BLD",5141,"KRN",9.8,"NM",21,0)
DGRPEIS1^^0^B25496202
"BLD",5141,"KRN",9.8,"NM",22,0)
DGDEP3^^0^B20134504
"BLD",5141,"KRN",9.8,"NM",23,0)
DGDEP0^^0^B10372330
"BLD",5141,"KRN",9.8,"NM",24,0)
DGDEP1^^0^B24063483
"BLD",5141,"KRN",9.8,"NM",25,0)
DGLOCK2^^0^B23708639
"BLD",5141,"KRN",9.8,"NM",26,0)
DG1010P^^0^B26643387
"BLD",5141,"KRN",9.8,"NM",27,0)
DG1010PA^^0^B12827041
"BLD",5141,"KRN",9.8,"NM",28,0)
DGMTSCC^^0^B31522709
"BLD",5141,"KRN",9.8,"NM",29,0)
DGRPT^^1^
"BLD",5141,"KRN",9.8,"NM",30,0)
DGRPTI^^1^
"BLD",5141,"KRN",9.8,"NM",31,0)
DGRPTL^^1^
"BLD",5141,"KRN",9.8,"NM",32,0)
DGRPTL1^^1^
"BLD",5141,"KRN",9.8,"NM",33,0)
DGRPTL2^^1^
"BLD",5141,"KRN",9.8,"NM",34,0)
DGRPTL3^^1^
"BLD",5141,"KRN",9.8,"NM",35,0)
DGEN1^^0^B16711540
"BLD",5141,"KRN",9.8,"NM",38,0)
DGRPTP3^^1^
"BLD",5141,"KRN",9.8,"NM",39,0)
DGRPTP2^^1^
"BLD",5141,"KRN",9.8,"NM",40,0)
DGRPTP1^^1^
"BLD",5141,"KRN",9.8,"NM",41,0)
DGRPTP^^1^
"BLD",5141,"KRN",9.8,"NM",42,0)
DGREG^^0^B46440553
"BLD",5141,"KRN",9.8,"NM",43,0)
DGREG0^^0^B14385234
"BLD",5141,"KRN",9.8,"NM",44,0)
DGREG00^^0^B15924500
"BLD",5141,"KRN",9.8,"NM",45,0)
DG1010P1^^1^
"BLD",5141,"KRN",9.8,"NM",46,0)
DG1010P2^^1^
"BLD",5141,"KRN",9.8,"NM",47,0)
DG1010P3^^1^
"BLD",5141,"KRN",9.8,"NM",48,0)
DG1010P4^^1^
"BLD",5141,"KRN",9.8,"NM",49,0)
DG1010P5^^1^
"BLD",5141,"KRN",9.8,"NM",50,0)
DG1010P6^^1^
"BLD",5141,"KRN",9.8,"NM",51,0)
DG1010P7^^1^
"BLD",5141,"KRN",9.8,"NM",52,0)
DG1010PX^^1^
"BLD",5141,"KRN",9.8,"NM",53,0)
DG1010S1^^1^
"BLD",5141,"KRN",9.8,"NM",54,0)
DG1010S2^^1^
"BLD",5141,"KRN",9.8,"NM",55,0)
DG3PR0^^1^
"BLD",5141,"KRN",9.8,"NM",56,0)
DGRPU^^0^B45887048
"BLD",5141,"KRN",9.8,"NM",57,0)
DGMTE^^0^B25460516
"BLD",5141,"KRN",9.8,"NM",58,0)
DGRPE4^^0^B10228807
"BLD",5141,"KRN",9.8,"NM",59,0)
DGMTU23^^0^B30264819
"BLD",5141,"KRN",9.8,"NM",60,0)
DGMTU22^^0^B16752051
"BLD",5141,"KRN",9.8,"NM","B","DG1010P",26)

"BLD",5141,"KRN",9.8,"NM","B","DG1010P1",45)

"BLD",5141,"KRN",9.8,"NM","B","DG1010P2",46)

"BLD",5141,"KRN",9.8,"NM","B","DG1010P3",47)

"BLD",5141,"KRN",9.8,"NM","B","DG1010P4",48)

"BLD",5141,"KRN",9.8,"NM","B","DG1010P5",49)

"BLD",5141,"KRN",9.8,"NM","B","DG1010P6",50)

"BLD",5141,"KRN",9.8,"NM","B","DG1010P7",51)

"BLD",5141,"KRN",9.8,"NM","B","DG1010PA",27)

"BLD",5141,"KRN",9.8,"NM","B","DG1010PX",52)

"BLD",5141,"KRN",9.8,"NM","B","DG1010S1",53)

"BLD",5141,"KRN",9.8,"NM","B","DG1010S2",54)

"BLD",5141,"KRN",9.8,"NM","B","DG3PR0",55)

"BLD",5141,"KRN",9.8,"NM","B","DG53P624",3)

"BLD",5141,"KRN",9.8,"NM","B","DGDEP0",23)

"BLD",5141,"KRN",9.8,"NM","B","DGDEP1",24)

"BLD",5141,"KRN",9.8,"NM","B","DGDEP2",17)

"BLD",5141,"KRN",9.8,"NM","B","DGDEP3",22)

"BLD",5141,"KRN",9.8,"NM","B","DGEN",12)

"BLD",5141,"KRN",9.8,"NM","B","DGEN1",35)

"BLD",5141,"KRN",9.8,"NM","B","DGENU",15)

"BLD",5141,"KRN",9.8,"NM","B","DGLOCK2",25)

"BLD",5141,"KRN",9.8,"NM","B","DGMTE",57)

"BLD",5141,"KRN",9.8,"NM","B","DGMTSC1",16)

"BLD",5141,"KRN",9.8,"NM","B","DGMTSC3",2)

"BLD",5141,"KRN",9.8,"NM","B","DGMTSCC",28)

"BLD",5141,"KRN",9.8,"NM","B","DGMTSCU4",20)

"BLD",5141,"KRN",9.8,"NM","B","DGMTU22",60)

"BLD",5141,"KRN",9.8,"NM","B","DGMTU23",59)

"BLD",5141,"KRN",9.8,"NM","B","DGREG",42)

"BLD",5141,"KRN",9.8,"NM","B","DGREG0",43)

"BLD",5141,"KRN",9.8,"NM","B","DGREG00",44)

"BLD",5141,"KRN",9.8,"NM","B","DGRP4",7)

"BLD",5141,"KRN",9.8,"NM","B","DGRPCADD",5)

"BLD",5141,"KRN",9.8,"NM","B","DGRPE",13)

"BLD",5141,"KRN",9.8,"NM","B","DGRPE4",58)

"BLD",5141,"KRN",9.8,"NM","B","DGRPEIS",18)

"BLD",5141,"KRN",9.8,"NM","B","DGRPEIS1",21)

"BLD",5141,"KRN",9.8,"NM","B","DGRPEIS3",19)

"BLD",5141,"KRN",9.8,"NM","B","DGRPH",6)

"BLD",5141,"KRN",9.8,"NM","B","DGRPT",29)

"BLD",5141,"KRN",9.8,"NM","B","DGRPTI",30)

"BLD",5141,"KRN",9.8,"NM","B","DGRPTL",31)

"BLD",5141,"KRN",9.8,"NM","B","DGRPTL1",32)

"BLD",5141,"KRN",9.8,"NM","B","DGRPTL2",33)

"BLD",5141,"KRN",9.8,"NM","B","DGRPTL3",34)

"BLD",5141,"KRN",9.8,"NM","B","DGRPTP",41)

"BLD",5141,"KRN",9.8,"NM","B","DGRPTP1",40)

"BLD",5141,"KRN",9.8,"NM","B","DGRPTP2",39)

"BLD",5141,"KRN",9.8,"NM","B","DGRPTP3",38)

"BLD",5141,"KRN",9.8,"NM","B","DGRPU",56)

"BLD",5141,"KRN",9.8,"NM","B","DGRPV",9)

"BLD",5141,"KRN",19,0)
19
"BLD",5141,"KRN",19,"NM",0)
^9.68A^7^7
"BLD",5141,"KRN",19,"NM",1,0)
DG REGISTRATION 10/10 REPRINT^^0
"BLD",5141,"KRN",19,"NM",2,0)
DGRPT 10-10T REGISTRATION^^1^
"BLD",5141,"KRN",19,"NM",3,0)
DG MEANS TEST EDIT^^0
"BLD",5141,"KRN",19,"NM",4,0)
DG CO-PAY TEST ADD^^0
"BLD",5141,"KRN",19,"NM",5,0)
DG CO-PAY TEST EDIT^^0
"BLD",5141,"KRN",19,"NM",6,0)
DG MEANS TEST ADD^^0
"BLD",5141,"KRN",19,"NM",7,0)
DG MEANS TEST COMPLETE^^0
"BLD",5141,"KRN",19,"NM","B","DG CO-PAY TEST ADD",4)

"BLD",5141,"KRN",19,"NM","B","DG CO-PAY TEST EDIT",5)

"BLD",5141,"KRN",19,"NM","B","DG MEANS TEST ADD",6)

"BLD",5141,"KRN",19,"NM","B","DG MEANS TEST COMPLETE",7)

"BLD",5141,"KRN",19,"NM","B","DG MEANS TEST EDIT",3)

"BLD",5141,"KRN",19,"NM","B","DG REGISTRATION 10/10 REPRINT",1)

"BLD",5141,"KRN",19,"NM","B","DGRPT 10-10T REGISTRATION",2)

"BLD",5141,"KRN",19.1,0)
19.1
"BLD",5141,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",5141,"KRN",101,0)
101
"BLD",5141,"KRN",101,"NM",0)
^9.68A^5^5
"BLD",5141,"KRN",101,"NM",1,0)
DGENUP PRINT 1010EZ-EZR^^0
"BLD",5141,"KRN",101,"NM",2,0)
DGEN PATIENT ENROLLMENT MENU^^3
"BLD",5141,"KRN",101,"NM",3,0)
DGENCD CATASTROPHIC DISABILITY^^0
"BLD",5141,"KRN",101,"NM",4,0)
DGRPT MENU^^1^
"BLD",5141,"KRN",101,"NM",5,0)
DGRPT INTERVIEW^^1^
"BLD",5141,"KRN",101,"NM","B","DGEN PATIENT ENROLLMENT MENU",2)

"BLD",5141,"KRN",101,"NM","B","DGENCD CATASTROPHIC DISABILITY",3)

"BLD",5141,"KRN",101,"NM","B","DGENUP PRINT 1010EZ-EZR",1)

"BLD",5141,"KRN",101,"NM","B","DGRPT INTERVIEW",5)

"BLD",5141,"KRN",101,"NM","B","DGRPT MENU",4)

"BLD",5141,"KRN",409.61,0)
409.61
"BLD",5141,"KRN",409.61,"NM",0)
^9.68A^2^2
"BLD",5141,"KRN",409.61,"NM",1,0)
DGMT DEPENDENTS^^0
"BLD",5141,"KRN",409.61,"NM",2,0)
DGRPT 10-10T REGISTRATION^^1^
"BLD",5141,"KRN",409.61,"NM","B","DGMT DEPENDENTS",1)

"BLD",5141,"KRN",409.61,"NM","B","DGRPT 10-10T REGISTRATION",2)

"BLD",5141,"KRN",771,0)
771
"BLD",5141,"KRN",870,0)
870
"BLD",5141,"KRN",8989.51,0)
8989.51
"BLD",5141,"KRN",8989.51,"NM",0)
^9.68A^4^4
"BLD",5141,"KRN",8989.51,"NM",1,0)
DGMT MAPR GLOBAL RATE^^0
"BLD",5141,"KRN",8989.51,"NM",2,0)
DGMT MAPR 0 DEPENDENTS^^0
"BLD",5141,"KRN",8989.51,"NM",3,0)
DGMT MAPR 1 DEPENDENTS^^0
"BLD",5141,"KRN",8989.51,"NM",4,0)
DGMT MAPR N DEPENDENTS^^0
"BLD",5141,"KRN",8989.51,"NM","B","DGMT MAPR 0 DEPENDENTS",2)

"BLD",5141,"KRN",8989.51,"NM","B","DGMT MAPR 1 DEPENDENTS",3)

"BLD",5141,"KRN",8989.51,"NM","B","DGMT MAPR GLOBAL RATE",1)

"BLD",5141,"KRN",8989.51,"NM","B","DGMT MAPR N DEPENDENTS",4)

"BLD",5141,"KRN",8989.52,0)
8989.52
"BLD",5141,"KRN",8994,0)
8994
"BLD",5141,"KRN","B",.4,.4)

"BLD",5141,"KRN","B",.401,.401)

"BLD",5141,"KRN","B",.402,.402)

"BLD",5141,"KRN","B",.403,.403)

"BLD",5141,"KRN","B",.5,.5)

"BLD",5141,"KRN","B",.84,.84)

"BLD",5141,"KRN","B",3.6,3.6)

"BLD",5141,"KRN","B",3.8,3.8)

"BLD",5141,"KRN","B",9.2,9.2)

"BLD",5141,"KRN","B",9.8,9.8)

"BLD",5141,"KRN","B",19,19)

"BLD",5141,"KRN","B",19.1,19.1)

"BLD",5141,"KRN","B",101,101)

"BLD",5141,"KRN","B",409.61,409.61)

"BLD",5141,"KRN","B",771,771)

"BLD",5141,"KRN","B",870,870)

"BLD",5141,"KRN","B",8989.51,8989.51)

"BLD",5141,"KRN","B",8989.52,8989.52)

"BLD",5141,"KRN","B",8994,8994)

"BLD",5141,"PRE")
DG53P624
"BLD",5141,"QUES",0)
^9.62^^
"BLD",5141,"REQB",0)
^9.611^9^5
"BLD",5141,"REQB",2,0)
DG*5.3*395^2
"BLD",5141,"REQB",5,0)
DG*5.3*642^2
"BLD",5141,"REQB",7,0)
DG*5.3*563^2
"BLD",5141,"REQB",8,0)
DG*5.3*610^2
"BLD",5141,"REQB",9,0)
DG*5.3*638^2
"BLD",5141,"REQB","B","DG*5.3*395",2)

"BLD",5141,"REQB","B","DG*5.3*563",7)

"BLD",5141,"REQB","B","DG*5.3*610",8)

"BLD",5141,"REQB","B","DG*5.3*638",9)

"BLD",5141,"REQB","B","DG*5.3*642",5)

"FIA",2)
PATIENT
"FIA",2,0)
^DPT(
"FIA",2,0,0)
2I
"FIA",2,0,1)
y^y^p^^^^n^^n
"FIA",2,0,10)

"FIA",2,0,11)

"FIA",2,0,"RLRO")

"FIA",2,0,"VR")
5.3^DG
"FIA",2,2)
1
"FIA",2,2,.133)

"FIA",2,2,.134)

"FIA",2,2,.135)

"FIA",2,2,.2515)

"FIA",2,2,.2516)

"FIA",2,2,.31115)

"FIA",2,2,.31116)

"FIA",2,2,.362)

"FIA",2,2,1010.1511)

"FIA",2,2,1010.159)

"FIA",408.13)
INCOME PERSON
"FIA",408.13,0)
^DGPR(408.13,
"FIA",408.13,0,0)
408.13
"FIA",408.13,0,1)
y^y^p^^^^n^^n
"FIA",408.13,0,10)

"FIA",408.13,0,11)

"FIA",408.13,0,"RLRO")

"FIA",408.13,0,"VR")
5.3^DG
"FIA",408.13,408.13)
1
"FIA",408.13,408.13,1.1)

"FIA",408.13,408.13,1.2)

"FIA",408.13,408.13,1.3)

"FIA",408.13,408.13,1.4)

"FIA",408.13,408.13,1.5)

"FIA",408.13,408.13,1.6)

"FIA",408.13,408.13,1.7)

"FIA",408.13,408.13,1.8)

"FIA",408.21)
INDIVIDUAL ANNUAL INCOME
"FIA",408.21,0)
^DGMT(408.21,
"FIA",408.21,0,0)
408.21ID
"FIA",408.21,0,1)
y^y^p^^^^n^^n
"FIA",408.21,0,10)

"FIA",408.21,0,11)

"FIA",408.21,0,"RLRO")

"FIA",408.21,0,"VR")
5.3^DG
"FIA",408.21,408.21)
1
"FIA",408.21,408.21,1.01)

"FIA",408.21,408.21,1.12)

"FIA",408.22)
INCOME RELATION
"FIA",408.22,0)
^DGMT(408.22,
"FIA",408.22,0,0)
408.22IP
"FIA",408.22,0,1)
y^y^p^^^^n^^n
"FIA",408.22,0,10)

"FIA",408.22,0,11)

"FIA",408.22,0,"RLRO")

"FIA",408.22,0,"VR")
5.3^DG
"FIA",408.22,408.22)
1
"FIA",408.22,408.22,.07)

"FIA",408.22,408.22,.1)

"FIA",408.22,408.22,.18)

"FIA",408.22,408.22,.19)

"INIT")
POST^DG53P624
"KRN",.4,81,-1)
0^2
"KRN",.4,81,0)
DGDISPOSTIONS^3050310.1251^^2^^^3050315
"KRN",.4,81,"DXS",1,9.2)
S DIP(1)=$S($D(^DPT(D0,"DIS",D1,0)):^(0),1:"") S X=$P(DIP(1),U,1)
"KRN",.4,81,"DXS",2,9.2)
S DIP(1)=$S($D(^DPT(D0,"DIS",D1,0)):^(0),1:"") S X=$P(DIP(1),U,6),DIP(2)=$G(X),DIP(3)=$G(X) S X=$P(DIP(1),U,6)
"KRN",.4,81,"DXS",2,9.3)
X DXS(2,9.2) S X=$E($P(X,".",2)_"0000",1,4),%=X>1159 S:X>1259 X=X-1200 S X=X\100_":"_$E(X#100+100,2,3)_" "_$E("AP",%+1)_"M" S X=X,DIP(4)=$G(X) S X=1
"KRN",.4,81,"F",1)

"KRN",.4,81,"F",2)
1000,S DIP(1)=$S($D(^DPT(D0,"DIS",D1,0)):^(0),1:"") S X=$P(DIP(1),U,1) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_(1700+$E(X,1,3)) W X K DIP;"LOG-IN";L10;Z;"NUMDATE4(LOG IN DATE/TIME)"~
"KRN",.4,81,"F",3)
1000,X DXS(1,9.2) S X=$E($P(X,".",2)_"0000",1,4),%=X>1159 S:X>1259 X=X-1200 S X=X\100_":"_$E(X#100+100,2,3)_" "_$E("AP",%+1)_"M" W X K DIP;"";C12;Z;"TIME(LOG IN DATE/TIME)"~
"KRN",.4,81,"F",4)
1000,S DIP(1)=$S($D(^DPT(D0,"DIS",D1,0)):^(0),1:"") S X=$P(DIP(1),U,6) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_(1700+$E(X,1,3)) W X K DIP;"LOG-OUT";L10;C22;Z;"NUMDATE4(LOG OUT DATE TIME)"~
"KRN",.4,81,"F",5)
1000,X DXS(2,9.3) S DIP(5)=$G(X) S X="",X=$S(DIP(2):DIP(4),DIP(5):X) W X K DIP;"";C33;Z;"$S(LOG OUT DATE TIME:TIME(LOG OUT DATE TIME),1:"")"~
"KRN",.4,81,"F",6)
1000,S L1=^DPT(D0,"DIS",D1,0) D PRO^DGDISPL W $J(PT,8);"PROCESS";C43;Z;"S L1=^DPT(D0,"DIS",D1,0) D PRO^DGDISPL W $J(PT,8)"~1000,6;L18;C54~
"KRN",.4,81,"F",7)
S DFN=D0 D PID^VADPT6 W VA("PID");L14;"PT ID";C74;Z;"S DFN=D0 D PID^VADPT6 W VA("PID")"~.01;L20;C89~1000,8;L15~
"KRN",.4,81,"H")
DISPOSITION TOTAL LOG
"KRN",.4,761,-1)
0^1
"KRN",.4,761,0)
DGOPENDISPOSITIONS^3050310.1256^^2^^^3050315
"KRN",.4,761,"F",2)
1000,.01~1000,S DFN=D0 D PID^VADPT6 W VA("PID");L14;"PT ID";Z;"S DFN=D0 D PID^VADPT6 W VA("PID")"~.01~
"KRN",.4,761,"H")
PATIENT LIST
"KRN",.402,1019,-1)
0^2
"KRN",.402,1019,0)
DGMT ENTER/EDIT DEPENDENTS^3050224.1105^^408.22^^^3050708
"KRN",.402,1019,"DIAB",2,0,408.22,2)
CONTRIBUTED TO SUPPORT;T
"KRN",.402,1019,"DIAB",4,0,408.22,2)
AMOUNT CONTRIBUTED TO CHILD;T
"KRN",.402,1019,"DIAB",5,0,408.22,1)
INCAPABLE OF SELF-SUPPORT;T
"KRN",.402,1019,"DIAB",6,0,408.22,2)
CHILD HAD INCOME;T
"KRN",.402,1019,"DIAB",7,0,408.22,1)
CHILD 18-23 IN SCHOOL//YES;T
"KRN",.402,1019,"DIAB",8,0,408.22,2)
INCOME AVAILABLE TO YOU;T
"KRN",.402,1019,"DIAB",10,0,408.22,1)
CHILD 18-23 IN SCHOOL//NO;T
"KRN",.402,1019,"DIAB",12,0,408.22,1)
LIVED WITH PATIENT;"DID THE CHILD LIVE WITH YOU"
"KRN",.402,1019,"DR",1,408.22)
K DGFIN;N IAIPTR,PRPTR,PFILE,PIEN,PREC;N PDOB,AGE,PREF;S IAIPTR=$P(^DGMT(408.22,DA,0),"^",2);S PRPTR=$P(^DGMT(408.21,IAIPTR,0),"^",2);S PREF=$P(^DGPR(408.12,PRPTR,0),"^",3);S PFILE="^"_$P(PREF,$CHAR(59),2);
"KRN",.402,1019,"DR",1,408.22,1)
S PIEN=$P(PREF,$CHAR(59),1);S PREC=PFILE_PIEN_",0)";S DOB=$P(@PREC,"^",3);S AGE=($$FMDIFF^XLFDT(DT,DOB)/365.25);.09T~;I (AGE<18)!(AGE>23.99999) S Y="@1";.18T~//YES;S Y="@2";@1;.18T~//NO;@2;.06DID THE CHILD LIVE WITH YOU~;
"KRN",.402,1019,"DR",1,408.22,2)
S:X Y="@10";.1T~;S:'X Y="@10";.19T~;@10;.11T~;S:'X Y="@998";.12T~;@998;S DGFIN="";
"KRN",.402,1019,"ROU")
^DGMTXD
"KRN",.402,1019,"ROUOLD")
DGMTXD
"KRN",.402,2435,-1)
0^1
"KRN",.402,2435,0)
DGMT ENTER/EDIT EXPENSES^3050111.104^@^408.21^^@^3050712
"KRN",.402,2435,"DR",1,408.21)
K DGFIN;I '$D(DGDR)!('$D(DGVIR0)) W !,*7,"Variables DGDR and DGVIR0 must be defined!" S Y="@999";S:DGDR'["101" Y="@998";@112;1.12;W !,$$GRSADJ^DGMTSCU4(DA,DFN,DGMTDT,DGVIRI);S:'$P(DGVIR0,U,5)&('$P(DGVIR0,U,8)) Y="@1010";1.02;@1010;
"KRN",.402,2435,"DR",1,408.21,1)
1.03;@998;S DGFIN="";@999;
"KRN",.402,2435,"ROU")
^DGMTXE
"KRN",.402,2435,"ROUOLD")
DGMTXE
"KRN",19,214,-1)
0^1
"KRN",19,214,0)
DG REGISTRATION 10/10 REPRINT^10-10 Print^^R^^^^^^^^REGISTRATION
"KRN",19,214,1,0)
^19.06^2^2^3050125^^^^
"KRN",19,214,1,1,0)
This option is used to generate a copy of the 10/10 document for
"KRN",19,214,1,2,0)
a specified, previously entered, registration.
"KRN",19,214,25)
DG1010P
"KRN",19,214,99)
55733,47558
"KRN",19,214,"U")
10-10 PRINT
"KRN",19,731,-1)
0^3
"KRN",19,731,0)
DG MEANS TEST EDIT^Edit an Existing Means Test^^A^^DG MEANSTEST^^^^^^REGISTRATION^^1^1
"KRN",19,731,1,0)
^19.06^1^1^3041028^^^
"KRN",19,731,1,1,0)
Edit existing Means Test Information
"KRN",19,731,15)
K DGFINOP
"KRN",19,731,20)
S DGMTYPT=1 S DGFINOP="" D EN^DGMTE
"KRN",19,731,25)

"KRN",19,731,99)
55626,37832
"KRN",19,731,"U")
EDIT AN EXISTING MEANS TEST
"KRN",19,732,-1)
0^7
"KRN",19,732,0)
DG MEANS TEST COMPLETE^Complete a Required Means Test^^R^^^^^^^^REGISTRATION^^1^1
"KRN",19,732,1,0)
^^2^2^2901022^^^^
"KRN",19,732,1,1,0)
Complete means test generated through registration or by other circumstances.
"KRN",19,732,1,2,0)
Can only complete Means Test records with a status of 'R'equired.
"KRN",19,732,15)
K DGFINOP
"KRN",19,732,20)
S DGFINOP=""
"KRN",19,732,25)
COM^DGMTEO
"KRN",19,732,"U")
COMPLETE A REQUIRED MEANS TEST
"KRN",19,767,-1)
0^6
"KRN",19,767,0)
DG MEANS TEST ADD^Add a New Means Test^^A^^DG MEANSTEST^^^^^^REGISTRATION^^1^1
"KRN",19,767,1,0)
^^1^1^2890719^^
"KRN",19,767,1,1,0)
Add new Means Test
"KRN",19,767,15)
K DFN,DGMTI,DGMTYPT,DGFINOP
"KRN",19,767,20)
S DGMTYPT=1 S DGFINOP="" D EN^DGMTA
"KRN",19,767,25)

"KRN",19,767,"U")
ADD A NEW MEANS TEST
"KRN",19,3932,-1)
0^4
"KRN",19,3932,0)
DG CO-PAY TEST ADD^Add a Copay Exemption Test^^A^^DG MEANSTEST^^^^^^REGISTRATION^^1^1
"KRN",19,3932,1,0)
^^1^1^2921216^
"KRN",19,3932,1,1,0)
Add new Co-Pay Test.
"KRN",19,3932,15)
K DGFINOP
"KRN",19,3932,20)
D ON^DGMTCOU I Y S DGMTYPT=2 S DGFINOP="" D EN^DGMTA
"KRN",19,3932,25)

"KRN",19,3932,"U")
ADD A COPAY EXEMPTION TEST
"KRN",19,3933,-1)
0^5
"KRN",19,3933,0)
DG CO-PAY TEST EDIT^Edit an Existing Copay Exemption Test^^A^^DG MEANSTEST^^^^^^^^1^1
"KRN",19,3933,1,0)
^^1^1^2930413^^
"KRN",19,3933,1,1,0)
Edit existing Co-Pay Test Information.
"KRN",19,3933,15)
K DGFINOP
"KRN",19,3933,20)
D ON^DGMTCOU I Y S DGMTYPT=2 S DGFINOP="" D EN^DGMTE
"KRN",19,3933,25)

"KRN",19,3933,"U")
EDIT AN EXISTING COPAY EXEMPTI
"KRN",19,11785,-1)
1^2
"KRN",19,11785,0)
DGRPT 10-10T REGISTRATION
"KRN",101,1859,-1)
3^2
"KRN",101,1859,0)
DGEN PATIENT ENROLLMENT MENU^Patient Enrollment^^M^^^^^^^^REGISTRATION
"KRN",101,1859,1,0)
^101.06^1^1^3050203^^^^
"KRN",101,1859,1,1,0)
This protocol menu contains all the activities for patient enrollment.
"KRN",101,1859,4)
26^4
"KRN",101,1859,10,0)
^101.01PA^25^25
"KRN",101,1859,10,20,0)
1867^CD^70^
"KRN",101,1859,10,20,"^")
DGENCD CATASTROPHIC DISABILITY
"KRN",101,1859,10,25,0)
4010^PZ^95^
"KRN",101,1859,10,25,"^")
DGENUP PRINT 1010EZ-EZR
"KRN",101,1859,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^",1),24)) ^(24)
"KRN",101,1859,25)
 
"KRN",101,1859,26)
D SHOW^VALM
"KRN",101,1859,28)
Select Action:
"KRN",101,1859,99)
59942,36009
"KRN",101,1867,-1)
0^3
"KRN",101,1867,0)
DGENCD CATASTROPHIC DISABILITY^Catastrophic Disab.^^A^^^^^^^^REGISTRATION
"KRN",101,1867,1,0)
^^1^1^2990706^^^^
"KRN",101,1867,1,1,0)
Displays the DGEN CATASTROPHIC DISABILITY List Template.
"KRN",101,1867,20)
D EN^DGENCD1($G(DFN))
"KRN",101,1867,24)
 
"KRN",101,1867,99)
59934,53466
"KRN",101,4010,-1)
0^1
"KRN",101,4010,0)
DGENUP PRINT 1010EZ-EZR^Print 1010EZ/EZR^^A^^^^^^^^REGISTRATION
"KRN",101,4010,1,0)
^101.06^1^1^3050211^^^
"KRN",101,4010,1,1,0)
Allows the user to print a 1010EZ or 1010EZR.
"KRN",101,4010,2,0)
^101.02A^2^1
"KRN",101,4010,2,2,0)
PZ
"KRN",101,4010,2,"B","PZ",2)

"KRN",101,4010,20)
D PEZ^DGEN1
"KRN",101,4010,99)
59942,35633
"KRN",101,4147,-1)
1^4
"KRN",101,4147,0)
DGRPT MENU
"KRN",101,4148,-1)
1^5
"KRN",101,4148,0)
DGRPT INTERVIEW
"KRN",409.61,977,-1)
0^1
"KRN",409.61,977,0)
DGMT DEPENDENTS^1^1^80^5^14^1^1^Dependent^DGMT MEANS TEST DEPENDENT MENU^Dependents Module^4
"KRN",409.61,977,1)
^VALM HIDDEN ACTIONS
"KRN",409.61,977,"ARRAY")
 ^TMP("DGDEP",$J)
"KRN",409.61,977,"COL",0)
^409.621^6^6
"KRN",409.61,977,"COL",1,0)
DEP #^3^2
"KRN",409.61,977,"COL",2,0)
NAME^9^22^Patient/Dependent
"KRN",409.61,977,"COL",3,0)
RELATION^32^20^Relationship
"KRN",409.61,977,"COL",4,0)
MEANS TEST^5^2^MT
"KRN",409.61,977,"COL",5,0)
ACTIVE^63^6^Active
"KRN",409.61,977,"COL",6,0)
ADDRESS^71^7^Address
"KRN",409.61,977,"COL","B","ACTIVE",5)

"KRN",409.61,977,"COL","B","ADDRESS",6)

"KRN",409.61,977,"COL","B","DEP #",1)

"KRN",409.61,977,"COL","B","MEANS TEST",4)

"KRN",409.61,977,"COL","B","NAME",2)

"KRN",409.61,977,"COL","B","RELATION",3)

"KRN",409.61,977,"EXP")

"KRN",409.61,977,"FNL")
D ENQ^DGDEP,CLEAR^VALM1
"KRN",409.61,977,"HDR")
D HDR^DGDEP
"KRN",409.61,977,"HLP")
S VAR="HELPTXT" D ^DGDEPH
"KRN",409.61,977,"INIT")
D INIT^DGDEP
"KRN",409.61,1061,-1)
1^2
"KRN",409.61,1061,0)
DGRPT 10-10T REGISTRATION
"KRN",8989.51,371,-1)
0^1
"KRN",8989.51,371,0)
DGMT MAPR GLOBAL RATE^Allowable Medical Expense Rates^1^^^0
"KRN",8989.51,371,1)
F^^What is the global MAPR?
"KRN",8989.51,371,6)
N^0:99999^What is the MT year (YYYY) the rate applies to?
"KRN",8989.51,371,20,0)
^^2^2^3041006^
"KRN",8989.51,371,20,1,0)
Used by $$MEDEXP^DGMTSCU4 to derive gross & adjusted medical expense 
"KRN",8989.51,371,20,2,0)
values.
"KRN",8989.51,371,30,0)
^8989.513I^1^1
"KRN",8989.51,371,30,1,0)
1^9.4
"KRN",8989.51,372,-1)
0^2
"KRN",8989.51,372,0)
DGMT MAPR 0 DEPENDENTS^Max. Ann. Rate - 0 Dependents^1^^^0
"KRN",8989.51,372,1)
F^^What is the MAPR rate for zero (0) dependents?
"KRN",8989.51,372,6)
N^0:99999^What is the MT year (YYYY) the MAPR rate applies to?
"KRN",8989.51,372,20,0)
^^2^2^3041006^
"KRN",8989.51,372,20,1,0)
Used by $$MEDEXP^DGMTSCU4 to derive gross & adjusted medical expense 
"KRN",8989.51,372,20,2,0)
values.
"KRN",8989.51,372,30,0)
^8989.513I^1^1
"KRN",8989.51,372,30,1,0)
1^9.4
"KRN",8989.51,373,-1)
0^3
"KRN",8989.51,373,0)
DGMT MAPR 1 DEPENDENTS^Max. Ann. Rate - 1 Dependents^1^^^0
"KRN",8989.51,373,1)
F^^What is the MAPR rate for one (1) dependents?
"KRN",8989.51,373,6)
N^0:99999^What is the MT year (YYYY) the MAPR rate applies to?
"KRN",8989.51,373,20,0)
^^2^2^3041006^
"KRN",8989.51,373,20,1,0)
Used by $$MEDEXP^DGMTSCU4 to derive gross & adjusted medical expense 
"KRN",8989.51,373,20,2,0)
values.
"KRN",8989.51,373,30,0)
^8989.513I^1^1
"KRN",8989.51,373,30,1,0)
1^9.4
"KRN",8989.51,374,-1)
0^4
"KRN",8989.51,374,0)
DGMT MAPR N DEPENDENTS^Max. Ann. Rate - 1+n Dependents^1^^^0
"KRN",8989.51,374,1)
F^^What is the MAPR rate for each dependent more than 1 (n+1)?
"KRN",8989.51,374,6)
N^0:99999^What is the MT year (YYYY) the MAPR rate applies to?
"KRN",8989.51,374,20,0)
^^2^2^3041006^
"KRN",8989.51,374,20,1,0)
Used by $$MEDEXP^DGMTSCU4 to derive gross & adjusted medical expense 
"KRN",8989.51,374,20,2,0)
values.
"KRN",8989.51,374,30,0)
^8989.513I^1^1
"KRN",8989.51,374,30,1,0)
1^9.4
"MBREQ")
0
"ORD",0,9.8)
9.8;;1;RTNF^XPDTA;RTNE^XPDTA
"ORD",0,9.8,0)
ROUTINE
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",15,101)
101;15;;;PRO^XPDTA;PROF1^XPDIA;PROE1^XPDIA;PROF2^XPDIA;;PRODEL^XPDIA
"ORD",15,101,0)
PROTOCOL
"ORD",17,409.61)
409.61;17;1;;;;;;;LMDEL^XPDIA1
"ORD",17,409.61,0)
LIST TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"ORD",20,8989.51)
8989.51;20;;;PAR1E1^XPDTA2;PAR1F1^XPDIA3;PAR1E1^XPDIA3;PAR1F2^XPDIA3;;PAR1DEL^XPDIA3(%)
"ORD",20,8989.51,0)
PARAMETER DEFINITION
"PKG",5,-1)
1^1
"PKG",5,0)
REGISTRATION^DG^PATIENT REGISTRATION, ADMISSION, DISCHARGE, EMBOSSER 
"PKG",5,20,0)
^9.402P^^
"PKG",5,22,0)
^9.49I^1^1
"PKG",5,22,1,0)
5.3^2941102^2941102
"PKG",5,22,1,"PAH",1,0)
624^3050713
"PKG",5,22,1,"PAH",1,1,0)
^^1^1^3050713
"PKG",5,22,1,"PAH",1,1,1,0)
1010 EZ PHASE 3.0
"PRE")
DG53P624
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
52
"RTN","DG1010P")
0^26^B26643387
"RTN","DG1010P",1,0)
DG1010P ;ALB/JDS;REW - 1010 PRINT--INQUIRY PATIENT ; 1/3/05 6:18pm
"RTN","DG1010P",2,0)
 ;;5.3;Registration;**86,108,113,161,642,624**;Aug 13, 1993
"RTN","DG1010P",3,0)
 ;
"RTN","DG1010P",4,0)
FIND W !! S DIC="^DPT(",DIC(0)="AEQZM" D ^DIC G Q:+Y'>0 S (DA,DFN)=+Y
"RTN","DG1010P",5,0)
 S DFN1=0
"RTN","DG1010P",6,0)
 I $O(^DPT(DFN,"DIS",0))>0 S DFN1=$O(^DPT(DFN,"DIS",0))
"RTN","DG1010P",7,0)
W1 D NOREG^DG1010PA(DFN)
"RTN","DG1010P",8,0)
QU ;
"RTN","DG1010P",9,0)
 S DGHDFN=DFN
"RTN","DG1010P",10,0)
 I DGOPT]"" D
"RTN","DG1010P",11,0)
 . N EAPP,EAIP
"RTN","DG1010P",12,0)
 . S (EAPP,EAIP)=0 F  S EAPP=$O(^EAS(712,"AC",DFN,EAPP)) Q:'EAPP!EAIP  D
"RTN","DG1010P",13,0)
 . . I $$GET1^DIQ(712,EAPP,7.1)="" D
"RTN","DG1010P",14,0)
 . . . N EAIX,EADT F EAIX="REV","PRT","SIG" Q:EAIP  D
"RTN","DG1010P",15,0)
 . . . . S EADT=0 F  S EADT=$O(^EAS(712,EAIX,EADT)) Q:'EADT!EAIP  I $D(^EAS(712,EAIX,EADT,EAPP)) S EAIP=1
"RTN","DG1010P",16,0)
 . I EAIP D  Q
"RTN","DG1010P",17,0)
 . . N DIR
"RTN","DG1010P",18,0)
 . . W !!,"No data have been found for the selected patient, or"
"RTN","DG1010P",19,0)
 . . W !,"the patient may have an on-line 10-10EZ application"
"RTN","DG1010P",20,0)
 . . W !,"in progress.  The 10-10EZ form shall not be printed."
"RTN","DG1010P",21,0)
 . . S DIR(0)="E" D ^DIR
"RTN","DG1010P",22,0)
 . . S DGOPT=""
"RTN","DG1010P",23,0)
 I DGOPT]"" D  S DGPGM="DQ^DG1010P",DGVAR="DGOPT^PRF^DFN^DFN1^DUZ^DGPMDA^PSOINST^PSONOPG^PSOPAR^PSTYPE^GMTSTYP^EASMTIEN" D ZIS^DGUTQ G:POP EMB U IO D DQ G EMB
"RTN","DG1010P",24,0)
 .W:DGOPT'=5 !!?5,*7,"This output requires 132 column output to a PRINTER.",!?5,*7,"Output to SCREEN will be unreadable."
"RTN","DG1010P",25,0)
 G EMB
"RTN","DG1010P",26,0)
EN ;
"RTN","DG1010P",27,0)
 Q
"RTN","DG1010P",28,0)
DQ ;
"RTN","DG1010P",29,0)
 D NOW^%DTC,YX^%DTC S DGNOW=Y
"RTN","DG1010P",30,0)
 S X=132 X ^%ZOSF("RM") F I="DFN","DFN1","DGPMDA","PRF","GMTSTYP" S DGHOLD(I)=$S($D(@I):@I,1:"")
"RTN","DG1010P",31,0)
 I DGOPT[0&'($G(DGSTOP)) DO
"RTN","DG1010P",32,0)
 . S (EASDFN,DA)=DFN,ZUSR=DUZ
"RTN","DG1010P",33,0)
 . D EN^EASEZPDG ;1010EZ
"RTN","DG1010P",34,0)
 . K EASDFN,ZUSR,EASMTIEN
"RTN","DG1010P",35,0)
 I DGOPT[1&'($G(DGSTOP)) DO
"RTN","DG1010P",36,0)
 . S (EASDFN,DA)=DFN,EASFLAG="EZR",ZUSR=DUZ
"RTN","DG1010P",37,0)
 . D EN^EASEZPDG ;1010EZR
"RTN","DG1010P",38,0)
 . K EASFLAG,EASDFN,ZUSR,EASMTIEN
"RTN","DG1010P",39,0)
 I DGOPT[3&'($G(DGSTOP)) D RESTORE,RET^DGBLRV ;3rd party review
"RTN","DG1010P",40,0)
 I DGOPT[8&'($G(DGSTOP)) D RESTORE,ENXQ^GMTSDVR
"RTN","DG1010P",41,0)
 I DGOPT[5&'($G(DGSTOP)) S POP=0 D RESTORE,DFN^PSOSD1 K POP S X=132 X ^%ZOSF("RM") ;DRUG PROFILE NOTE: EXECUTES ^%ZIS("C")
"RTN","DG1010P",42,0)
 D ^%ZISC
"RTN","DG1010P",43,0)
 D CLOSE^DGUTQ,Q K DGHOLD,DGOPT,DGPMDA Q
"RTN","DG1010P",44,0)
Q K %,%DT,DA,DB,DFN,DFN1,DGHSFLG,DGOPT,DGL2,DGLDASH,DGLDOUBL,DGLSUP,DGLSUP1,DGLUND,DGPGM,DGPMDA,DGMTDT,DGMTI,DGMTYPT,DGNOW,DGVAR,DGX,DIC,DIRUT,DTOUT,DUOUT,I,J,L,POP,PRF,X,Y,DGSTOP
"RTN","DG1010P",45,0)
 K LMI,PSCNT,PSDIS,PSDT,PSII,PSOPRINT ;FROM DRUG PROFILE
"RTN","DG1010P",46,0)
 K GMTSTYP,EASMTIEN
"RTN","DG1010P",47,0)
 Q
"RTN","DG1010P",48,0)
RESTORE F I="DFN","DFN1","PRF","DGPMDA","GMTSTYP" S @I=DGHOLD(I)
"RTN","DG1010P",49,0)
 Q
"RTN","DG1010P",50,0)
EMB ;emboss card?
"RTN","DG1010P",51,0)
 S DFN=DGHDFN
"RTN","DG1010P",52,0)
 ;W !! D EMBOS^DGQEMA
"RTN","DG1010P",53,0)
 D EF
"RTN","DG1010P",54,0)
 K DGHDFN G FIND
"RTN","DG1010P",55,0)
 ;
"RTN","DG1010P",56,0)
EF ;encounter form?
"RTN","DG1010P",57,0)
 N EFX,WITHDATA,IBDFRION
"RTN","DG1010P",58,0)
 I $$PROMPRN^DG1010PA("EF") I DG1'<0 S EFX=1 D
"RTN","DG1010P",59,0)
 .S WITHDATA=1
"RTN","DG1010P",60,0)
 .D MAIN^IBDFREG(WITHDATA)
"RTN","DG1010P",61,0)
 Q
"RTN","DG1010P",62,0)
 ;
"RTN","DG1010P",63,0)
SEL1010(PROMPT) ;* Prompt user to select the 1010EZ to print
"RTN","DG1010P",64,0)
 ;
"RTN","DG1010P",65,0)
 ; INPUT:
"RTN","DG1010P",66,0)
 ;     PROMPT : Indicate which prompts to present
"RTN","DG1010P",67,0)
 ;              : NULL    - Prompt both (EZ prompted 1st)
"RTN","DG1010P",68,0)
 ;              : EZ      - Prompt 1010EZ only
"RTN","DG1010P",69,0)
 ;              : EZR/EZ  - Prompt both (EZR prompted 1st)
"RTN","DG1010P",70,0)
 ;              : EZR     - Prompt 1010EZR only
"RTN","DG1010P",71,0)
 ;
"RTN","DG1010P",72,0)
 ; OUTPUT
"RTN","DG1010P",73,0)
 ;        RPTSEL : NULL  - No report selected
"RTN","DG1010P",74,0)
 ;               : "EZ"  - 1010EZ report was selected
"RTN","DG1010P",75,0)
 ;               : "EZR" - 1010EZR report was selected
"RTN","DG1010P",76,0)
 ;
"RTN","DG1010P",77,0)
 N PRT1010,PRT1010R,RPTSEL
"RTN","DG1010P",78,0)
 I '$D(PROMPT) S PROMPT=""
"RTN","DG1010P",79,0)
 S PRT1010=0
"RTN","DG1010P",80,0)
 S PRT1010R=0
"RTN","DG1010P",81,0)
 S RPTSEL=""
"RTN","DG1010P",82,0)
 ;
"RTN","DG1010P",83,0)
 ;* Prompt 1010EZ and then 1010EZR
"RTN","DG1010P",84,0)
 I PROMPT="" DO
"RTN","DG1010P",85,0)
 . S PRT1010=$$EZPRMPT
"RTN","DG1010P",86,0)
 . I PRT1010 S RPTSEL="EZ"
"RTN","DG1010P",87,0)
 . S:PRT1010=0 PRT1010R=$$EZRPRMPT
"RTN","DG1010P",88,0)
 . I PRT1010R S RPTSEL="EZR"
"RTN","DG1010P",89,0)
 . I (PRT1010=-2)!(PRT1010R=-2) S RPTSEL=-1
"RTN","DG1010P",90,0)
 ;
"RTN","DG1010P",91,0)
 ;* Prompt 1010EZR and then 1010EZ
"RTN","DG1010P",92,0)
 I PROMPT="EZR/EZ" DO
"RTN","DG1010P",93,0)
 . S PRT1010R=$$EZRPRMPT
"RTN","DG1010P",94,0)
 . I PRT1010R S RPTSEL="EZR"
"RTN","DG1010P",95,0)
 . S:PRT1010R=0 PRT1010=$$EZPRMPT
"RTN","DG1010P",96,0)
 . I PRT1010 S RPTSEL="EZ"
"RTN","DG1010P",97,0)
 . I (PRT1010=-2)!(PRT1010R=-2) S RPTSEL=-1
"RTN","DG1010P",98,0)
 ;
"RTN","DG1010P",99,0)
 ;* Prompt 1010EZ only
"RTN","DG1010P",100,0)
 I PROMPT="EZ" DO
"RTN","DG1010P",101,0)
 . S PRT1010=$$EZPRMPT
"RTN","DG1010P",102,0)
 . I PRT1010 S RPTSEL="EZ"
"RTN","DG1010P",103,0)
 . I (PRT1010=-2) S RPTSEL=-1
"RTN","DG1010P",104,0)
 ;
"RTN","DG1010P",105,0)
 ;* Prompt 1010EZR only
"RTN","DG1010P",106,0)
 I PROMPT="EZR" DO
"RTN","DG1010P",107,0)
 . S PRT1010R=$$EZRPRMPT
"RTN","DG1010P",108,0)
 . I PRT1010R S RPTSEL="EZR"
"RTN","DG1010P",109,0)
 . I (PRT1010R=-2) S RPTSEL=-1
"RTN","DG1010P",110,0)
 ;
"RTN","DG1010P",111,0)
 Q RPTSEL
"RTN","DG1010P",112,0)
 ;
"RTN","DG1010P",113,0)
EZPRMPT() ;* Prompt for 1010EZ print
"RTN","DG1010P",114,0)
 ; OUTPUT - 
"RTN","DG1010P",115,0)
 ;     RPTSEL : -1  REPORT NOT SELECTED
"RTN","DG1010P",116,0)
 ;     RPTSEL : -2  USER EXITED WITHOUT RESPONSE
"RTN","DG1010P",117,0)
 ;     RPTSEL :  0  USER ANSWERED "NO"
"RTN","DG1010P",118,0)
 ;     RPTSEL :  1  USER ANSWERED "YES"
"RTN","DG1010P",119,0)
 ;
"RTN","DG1010P",120,0)
 N RPTSEL,PRT1010
"RTN","DG1010P",121,0)
 S RPTSEL=-1
"RTN","DG1010P",122,0)
 K DIR,Y,X,DIRUT,DTOUT,DIROUT,DUOUT
"RTN","DG1010P",123,0)
 S DIR(0)="Y^A0^"
"RTN","DG1010P",124,0)
 S DIR("A")="PRINT 10-10EZ"
"RTN","DG1010P",125,0)
 S DIR("?",1)="Enter 'Yes' to print a 10-10EZ Application for Health Benefits form."
"RTN","DG1010P",126,0)
 S DIR("?")="Otherwise enter 'No'."
"RTN","DG1010P",127,0)
 S DIR("B")="YES"
"RTN","DG1010P",128,0)
 D ^DIR
"RTN","DG1010P",129,0)
 I $D(DIRUT)!$D(DTOUT)!$D(DIROUT)!$D(DUOUT) S RPTSEL=-2
"RTN","DG1010P",130,0)
 S:RPTSEL'=-2 RPTSEL=Y
"RTN","DG1010P",131,0)
 ;;S PRT1010=Y
"RTN","DG1010P",132,0)
 ;;I PRT1010 S RPTSEL="EZ"
"RTN","DG1010P",133,0)
 K DIR,Y,X,DIRUT,DTOUT,DIROUT,DUOUT
"RTN","DG1010P",134,0)
 Q RPTSEL
"RTN","DG1010P",135,0)
 ;
"RTN","DG1010P",136,0)
EZRPRMPT() ;* Prompt for 1010EZR print
"RTN","DG1010P",137,0)
 ; OUTPUT - 
"RTN","DG1010P",138,0)
 ;     RPTSEL : -1  REPORT NOT SELECTED
"RTN","DG1010P",139,0)
 ;     RPTSEL : -2  USER EXITED WITHOUT RESPONSE
"RTN","DG1010P",140,0)
 ;     RPTSEL :  0  USER ANSWERED "NO"
"RTN","DG1010P",141,0)
 ;     RPTSEL :  1  USER ANSWERED "YES"
"RTN","DG1010P",142,0)
 ;
"RTN","DG1010P",143,0)
 N RPTSEL,PRT1010R
"RTN","DG1010P",144,0)
 S RPTSEL=-1
"RTN","DG1010P",145,0)
 K DIR,Y,X,DIRUT,DTOUT,DIROUT,DUOUT
"RTN","DG1010P",146,0)
 S DIR(0)="Y^A0^"
"RTN","DG1010P",147,0)
 S DIR("A")="PRINT 10-10EZR"
"RTN","DG1010P",148,0)
 S DIR("?",1)="Enter 'YES' to print a 10-10EZR Health Benefits Renewal form."
"RTN","DG1010P",149,0)
 S DIR("?")="Otherwise enter 'No'."
"RTN","DG1010P",150,0)
 S DIR("B")="YES"
"RTN","DG1010P",151,0)
 D ^DIR
"RTN","DG1010P",152,0)
 I $D(DIRUT)!$D(DTOUT)!$D(DIROUT)!$D(DUOUT) S RPTSEL=-2
"RTN","DG1010P",153,0)
 S:RPTSEL'=-2 RPTSEL=Y
"RTN","DG1010P",154,0)
 ;;S PRT1010R=Y
"RTN","DG1010P",155,0)
 ;;I PRT1010R S RPTSEL="EZR"
"RTN","DG1010P",156,0)
 K DIR,Y,X,DIRUT,DTOUT,DIROUT,DUOUT
"RTN","DG1010P",157,0)
 Q RPTSEL
"RTN","DG1010P",158,0)
 ;
"RTN","DG1010P",159,0)
MTPRMPT(DFN,DGMTI) ;* Prompt for Means test included on 1010EZ
"RTN","DG1010P",160,0)
 ;input:
"RTN","DG1010P",161,0)
 ;  DFN - Patient file (#2) ien (required)
"RTN","DG1010P",162,0)
 ;  DGMTI - Means Test file (#408.31) ien (required)
"RTN","DG1010P",163,0)
 ;output:
"RTN","DG1010P",164,0)
 ;  MTSEL - Means Test IEN selected
"RTN","DG1010P",165,0)
 N MTSEL
"RTN","DG1010P",166,0)
 S MTSEL=+DGMTI
"RTN","DG1010P",167,0)
 I $D(^DGMT(408.31,MTSEL,0)) Q MTSEL
"RTN","DG1010P",168,0)
 Q $$ENEZ^EASEZPDG(DFN,0)
"RTN","DG1010P",169,0)
 ;
"RTN","DG1010P",170,0)
PRT1010(PRT1010,DFN,MTIEN) ;* Print 1010EZ reports
"RTN","DG1010P",171,0)
 ;INPUT:
"RTN","DG1010P",172,0)
 ;  PRT1010 -
"RTN","DG1010P",173,0)
 ;          "EZ": Print 1010EZ report
"RTN","DG1010P",174,0)
 ;         "EZR": Print 1010EZR report
"RTN","DG1010P",175,0)
 ;  DFN - IEN from Patient entry in Patient file
"RTN","DG1010P",176,0)
 ;  MTIEN - IEN from 408.31 Means Test file
"RTN","DG1010P",177,0)
 ;
"RTN","DG1010P",178,0)
 ;OUTPUT:
"RTN","DG1010P",179,0)
 ;  DGTASK : Value of ZTSK passed back from ^%ZTLOAD in EASEZPDG
"RTN","DG1010P",180,0)
 ;         : 0 indicates print task was not completed
"RTN","DG1010P",181,0)
 ;
"RTN","DG1010P",182,0)
 N DGTASK
"RTN","DG1010P",183,0)
 S DGTASK=0
"RTN","DG1010P",184,0)
 ;* Following calls allowed via IA #4600
"RTN","DG1010P",185,0)
 I PRT1010="EZ" S DGTASK=$$ENEZ^EASEZPDG(DFN,MTIEN)
"RTN","DG1010P",186,0)
 I PRT1010="EZR" S DGTASK=$$ENEZR^EASEZPDG(DFN,MTIEN)
"RTN","DG1010P",187,0)
 Q DGTASK
"RTN","DG1010P1")
1^45
"RTN","DG1010P2")
1^46
"RTN","DG1010P3")
1^47
"RTN","DG1010P4")
1^48
"RTN","DG1010P5")
1^49
"RTN","DG1010P6")
1^50
"RTN","DG1010P7")
1^51
"RTN","DG1010PA")
0^27^B12827041
"RTN","DG1010PA",1,0)
DG1010PA ;ALB/REW - 1010 PRINT--INQUIRY PATIENT -ADDITIONL ; 28-MAY-93
"RTN","DG1010PA",2,0)
 ;;5.3;Registration;**18,28,86,108,113,570,624**;Aug 13, 1993
"RTN","DG1010PA",3,0)
 ;
"RTN","DG1010PA",4,0)
NOREG(DFN) ; DOES PROMPTS FOR 10/10 PRINT W/O REGISTRATION
"RTN","DG1010PA",5,0)
 ;INPUT: DFN
"RTN","DG1010PA",6,0)
 ;OUTPUT: VARIABLES NEEDED FOR DIFFERENT PRINTOUTS
"RTN","DG1010PA",7,0)
 ;   DGMTYPT - MT=1 Copay=2 None=0
"RTN","DG1010PA",8,0)
 ;   DGOPT   - WHICH REPORTS TO PRINT
"RTN","DG1010PA",9,0)
 ;   DGPMDA  - Admissions Report Info
"RTN","DG1010PA",10,0)
 ;   PRF     - FLAG FOR RX PROFILE
"RTN","DG1010PA",11,0)
 ;   PSOINST - STATION NUMBER (INSTITUTION FILE) FOR ACTION PROFILE PRINT
"RTN","DG1010PA",12,0)
 ;   PSONOPG - USED FOR PRINTING ACTION PROFILE (SET TO 1)
"RTN","DG1010PA",13,0)
 ;   PSOPAR  - PRINT BARCODES FOR ACTION PROFILE (SET TO 1)
"RTN","DG1010PA",14,0)
 ;   PSTYPE  - TYPE OF DRUG PROFILE
"RTN","DG1010PA",15,0)
 ;   GMTSTYP - TYPE OF HEALTH SUMMARY
"RTN","DG1010PA",16,0)
 ;   EASMTIEN - Means Test IEN used for EZ/EZR
"RTN","DG1010PA",17,0)
 ;
"RTN","DG1010PA",18,0)
 ;
"RTN","DG1010PA",19,0)
 N DG1,I,X,Y,FORM
"RTN","DG1010PA",20,0)
 S FREE=+$P(^DG(43,1,0),U,8),DGOPT=""
"RTN","DG1010PA",21,0)
 S PRF=0 G QTNOREG:'$D(^DG(43,1,0)) ;NEED MAS PARAMETERS TO CONTINUE
"RTN","DG1010PA",22,0)
 I $$PROMPRN("THIRD") G:DG1<0 QTNOREG S DGOPT=DGOPT_3
"RTN","DG1010PA",23,0)
 S FORM=$$SEL1010^DG1010P()
"RTN","DG1010PA",24,0)
 S EASMTIEN=$$MTPRMPT^DG1010P(DFN,$G(DGMTI))
"RTN","DG1010PA",25,0)
 I FORM<0 S DG1=-1 G QTNOREG
"RTN","DG1010PA",26,0)
 I FORM="EZ" S DGOPT=DGOPT_0
"RTN","DG1010PA",27,0)
 I FORM="EZR" S DGOPT=DGOPT_1
"RTN","DG1010PA",28,0)
 I $$PROMPRN("HS") G:DG1<0 QTNOREG S DGOPT=DGOPT_8
"RTN","DG1010PA",29,0)
 I $$PROMPRN("PRO") G:DG1<0 QTNOREG S DGOPT=DGOPT_5,PRF=1
"RTN","DG1010PA",30,0)
QTNOREG S:$G(DG1)<0 DGOPT=""
"RTN","DG1010PA",31,0)
 Q
"RTN","DG1010PA",32,0)
PROMPRN(DGX) ; PROMPTS FOR PRINT
"RTN","DG1010PA",33,0)
 ; RETURNS DGX [1=YES;0=NO;-1=DIRUT CONDITIONS]
"RTN","DG1010PA",34,0)
 ; OUTPUT:DG1 VALUE
"RTN","DG1010PA",35,0)
 S DG1=0
"RTN","DG1010PA",36,0)
 I $$FAILCOND(DGX) S DG1=$S($D(DG1):DG1,1:2) G QTPROMP ;DEFAULT=NO
"RTN","DG1010PA",37,0)
 F  D  Q:$G(DG1)
"RTN","DG1010PA",38,0)
 .S DG1=$$ASK(DGX)
"RTN","DG1010PA",39,0)
 .S:DG1=1 DG1=$$AFTERASK(DGX)
"RTN","DG1010PA",40,0)
QTPROMP Q $S(DG1=2:0,(DG1=1):1,1:DG1)
"RTN","DG1010PA",41,0)
ASK(DGX) ; PROMPTS FOR PRINT
"RTN","DG1010PA",42,0)
 ;
"RTN","DG1010PA",43,0)
 ; RETURNS DGX [2=NO,1=YES;0=?,-1=DIRUT CONDITIONS]
"RTN","DG1010PA",44,0)
 W !,"PRINT "
"RTN","DG1010PA",45,0)
 W $S(DGX="THIRD":"ERROR",(DGX="HS"):"HEALTH SUMMARY",(DGX="PRO"):"DRUG PROFILE",(DGX="EF"):"ENCOUNTER FORMS",1:"ERROR")
"RTN","DG1010PA",46,0)
 S %=1 D YN^DICN I '% W !,"ENTER 'Y'ES TO PRINT A ",DGX,".  OTHERWISE ENTER 'N'O."
"RTN","DG1010PA",47,0)
 Q $G(%)
"RTN","DG1010PA",48,0)
FAILCOND(DGX) ;CHECKS IF PROMPT SHOULD BE ASKED
"RTN","DG1010PA",49,0)
 ;
"RTN","DG1010PA",50,0)
 ;   DGI: 2=NO;1=YES;-1=DIRUT
"RTN","DG1010PA",51,0)
 ;RETURNS 1=DON'T ASK AND SKIP TO NEXT;0=ASK
"RTN","DG1010PA",52,0)
 ;
"RTN","DG1010PA",53,0)
 N DGFAIL
"RTN","DG1010PA",54,0)
 S DGFAIL=0
"RTN","DG1010PA",55,0)
 I DGX=1010 G QTFAIL
"RTN","DG1010PA",56,0)
 I DGX="THIRD" F  D  Q:$G(%)  G QTFAIL
"RTN","DG1010PA",57,0)
 .N DGNOQ,DGDEF
"RTN","DG1010PA",58,0)
 .D ADM
"RTN","DG1010PA",59,0)
 .S DGFAIL=1
"RTN","DG1010PA",60,0)
 .I DGPMDA>0!$D(^DGS(41.1,"B",DFN)) D
"RTN","DG1010PA",61,0)
 ..S (DGNOQ,DGDEF)=1 D ASK^DGBLRV
"RTN","DG1010PA",62,0)
 ..S DG1=%
"RTN","DG1010PA",63,0)
 I DGX="HS" S DGFAIL=1 D  G QTFAIL
"RTN","DG1010PA",64,0)
 .S X="GMTSDVR" X ^%ZOSF("TEST") I $T D
"RTN","DG1010PA",65,0)
 ..S:$T(ENXQ^GMTSDVR)]""&($P(^DG(43,1,0),U,42)) DGFAIL=0
"RTN","DG1010PA",66,0)
 I DGX="PRO" S DGFAIL=1 D  G QTFAIL
"RTN","DG1010PA",67,0)
 .S X="PSOSD1" X ^%ZOSF("TEST") I '$T Q
"RTN","DG1010PA",68,0)
 .I '$P(^DG(43,1,0),U,17) Q
"RTN","DG1010PA",69,0)
 .S DGFAIL=0
"RTN","DG1010PA",70,0)
 I DGX="EF" D  G QTFAIL
"RTN","DG1010PA",71,0)
 .I $P(^DG(43,1,0),U,47)'=1 S DGFAIL=1 Q
"RTN","DG1010PA",72,0)
QTFAIL Q DGFAIL
"RTN","DG1010PA",73,0)
AFTERASK(DGX) ;ACTIONS AFTER REPONSE OF YES TO PRINT
"RTN","DG1010PA",74,0)
 ;NOTE: Reports removed from DG REGISTRATION 10/10 REPRINT option are
"RTN","DG1010PA",75,0)
 ;       remaining to support any outside integrations.
"RTN","DG1010PA",76,0)
 ;
"RTN","DG1010PA",77,0)
 ; RETURNS DGGO[2=DON'T PRINT,1=PRINT,-1=ABORT]
"RTN","DG1010PA",78,0)
 ; SETS PRINT-SETUP VARIABLES
"RTN","DG1010PA",79,0)
 ;   PSOINST - STATION NUMBER (INSTITUTION FILE) FOR ACTION PROFILE PRINT
"RTN","DG1010PA",80,0)
 ;   PSONOPG - USED FOR PRINTING ACTION PROFILE (SET TO 1)
"RTN","DG1010PA",81,0)
 ;   PSOPAR  - PRINT BARCODES FOR ACTION PROFILE (SET TO 1)
"RTN","DG1010PA",82,0)
 ;   PSTYPE = DRUG PROFILE TYPE
"RTN","DG1010PA",83,0)
 ;   GMTSTYP = POINTER TO HEALTH SUMMARY TYPE
"RTN","DG1010PA",84,0)
 ;
"RTN","DG1010PA",85,0)
 N DGGO,DIR,X,Y
"RTN","DG1010PA",86,0)
 S DGGO=1
"RTN","DG1010PA",87,0)
 I DGX="HS" D  ;HEALTH SUMMARY
"RTN","DG1010PA",88,0)
 .S X=$P($G(^DG(43,1,0)),U,43),DIC=142,DIC(0)="NX"
"RTN","DG1010PA",89,0)
 .D ^DIC K DIC
"RTN","DG1010PA",90,0)
 .S:+Y DIR("B")=$P(Y,U,2)
"RTN","DG1010PA",91,0)
 .S DIR(0)="PO^142:QAMEZ"
"RTN","DG1010PA",92,0)
 .D ^DIR
"RTN","DG1010PA",93,0)
 .I Y'>0 W !,*7,"No Type Selected.  HS will not print" S DGGO=2 K DIR,DIRUT,DUOUT Q
"RTN","DG1010PA",94,0)
 .S GMTSTYP=+Y
"RTN","DG1010PA",95,0)
 I DGX="PRO" D  ;DRUG PROFILE
"RTN","DG1010PA",96,0)
 .S DGGO=0
"RTN","DG1010PA",97,0)
 .N DGDEF
"RTN","DG1010PA",98,0)
 .S DGDEF=$P(^DG(43,1,0),U,45)
"RTN","DG1010PA",99,0)
 .I $P(^DG(43,1,0),U,44) D
"RTN","DG1010PA",100,0)
 ..S:DGDEF]"" DIR("B")=$S(DGDEF="A":"ACTION",(DGDEF="I"):"INFORMATIONAL",1:"")
"RTN","DG1010PA",101,0)
 ..S DIR(0)="SM^A:ACTION;I:INFORMATIONAL"
"RTN","DG1010PA",102,0)
 ..S DIR("A")="Select type of Drug Profile"
"RTN","DG1010PA",103,0)
 ..D ^DIR
"RTN","DG1010PA",104,0)
 ..S DGDEF=Y
"RTN","DG1010PA",105,0)
 .I '$D(DIRUT) D
"RTN","DG1010PA",106,0)
 ..S (PSOPAR,PSTYPE)=$S(DGDEF="A":1,(DGDEF="I"):0,1:0),(DGGO,PSONOPG)=1
"RTN","DG1010PA",107,0)
 ..S PSOINST=+$P($G(^DIC(4,+$P($G(^XMB(1,1,"XUS")),U,17),99)),U)
"RTN","DG1010PA",108,0)
 Q DGGO
"RTN","DG1010PA",109,0)
ADM K DGPMDA I $D(^DGPM("ATID1",DFN)) F I=0:0 S I=$O(^DGPM("ATID1",DFN,I)) Q:'I!(I>(DFN1+.9999))  S DGPMDA=$O(^(I,0))
"RTN","DG1010PA",110,0)
 S DGPMDA=$S($D(DGPMDA):DGPMDA,1:0)
"RTN","DG1010PA",111,0)
 Q
"RTN","DG1010PX")
1^52
"RTN","DG1010S1")
1^53
"RTN","DG1010S2")
1^54
"RTN","DG3PR0")
1^55
"RTN","DG53P624")
0^3^B75648051
"RTN","DG53P624",1,0)
DG53P624 ;ALB/CMF - PATCH DG*5.3*624 INSTALL UTILITIES ; 09/30/04 8:14am
"RTN","DG53P624",2,0)
 ;;5.3;Registration;**624**;Aug 13, 1993
"RTN","DG53P624",3,0)
 ;
"RTN","DG53P624",4,0)
ENV ;Main entry point for Environment check point.
"RTN","DG53P624",5,0)
 ;
"RTN","DG53P624",6,0)
 S XPDABORT=""
"RTN","DG53P624",7,0)
 D PROGCHK(.XPDABORT) ;checks programmer variables
"RTN","DG53P624",8,0)
 I XPDABORT="" K XPDABORT
"RTN","DG53P624",9,0)
 Q
"RTN","DG53P624",10,0)
 ;
"RTN","DG53P624",11,0)
 ;
"RTN","DG53P624",12,0)
PRE ;Main entry point for Pre-init items.
"RTN","DG53P624",13,0)
 ;
"RTN","DG53P624",14,0)
 Q
"RTN","DG53P624",15,0)
 ;
"RTN","DG53P624",16,0)
 ;
"RTN","DG53P624",17,0)
POST ;Main entry point for Post-init items.
"RTN","DG53P624",18,0)
 D MAPRS
"RTN","DG53P624",19,0)
 D BULLETIN
"RTN","DG53P624",20,0)
 Q
"RTN","DG53P624",21,0)
 ;
"RTN","DG53P624",22,0)
MAPRS ; set maximum annual pension rate parameters
"RTN","DG53P624",23,0)
 D BMES^XPDUTL("*****")
"RTN","DG53P624",24,0)
 D MES^XPDUTL("Setting Maximum Annual Pension Rate Parameters")
"RTN","DG53P624",25,0)
 ;
"RTN","DG53P624",26,0)
 ;set MAPR rate parameter to 5(%)
"RTN","DG53P624",27,0)
 D SETPARM("DGMT MAPR GLOBAL RATE",1999,5)
"RTN","DG53P624",28,0)
 D SETPARM("DGMT MAPR GLOBAL RATE",2000,5)
"RTN","DG53P624",29,0)
 D SETPARM("DGMT MAPR GLOBAL RATE",2001,5)
"RTN","DG53P624",30,0)
 D SETPARM("DGMT MAPR GLOBAL RATE",2002,5)
"RTN","DG53P624",31,0)
 D SETPARM("DGMT MAPR GLOBAL RATE",2003,5)
"RTN","DG53P624",32,0)
 D SETPARM("DGMT MAPR GLOBAL RATE",2004,5)
"RTN","DG53P624",33,0)
 ;
"RTN","DG53P624",34,0)
 ;set MAPR max values                         
"RTN","DG53P624",35,0)
 D SETPARM("DGMT MAPR 0 DEPENDENTS",1999,8989)
"RTN","DG53P624",36,0)
 D SETPARM("DGMT MAPR 0 DEPENDENTS",2000,9304)
"RTN","DG53P624",37,0)
 D SETPARM("DGMT MAPR 0 DEPENDENTS",2001,9556)
"RTN","DG53P624",38,0)
 D SETPARM("DGMT MAPR 0 DEPENDENTS",2002,9690)
"RTN","DG53P624",39,0)
 D SETPARM("DGMT MAPR 0 DEPENDENTS",2003,9894)
"RTN","DG53P624",40,0)
 D SETPARM("DGMT MAPR 0 DEPENDENTS",2004,10162)
"RTN","DG53P624",41,0)
 ;
"RTN","DG53P624",42,0)
 D SETPARM("DGMT MAPR 1 DEPENDENTS",1999,11773)
"RTN","DG53P624",43,0)
 D SETPARM("DGMT MAPR 1 DEPENDENTS",2000,12186)
"RTN","DG53P624",44,0)
 D SETPARM("DGMT MAPR 1 DEPENDENTS",2001,12516)
"RTN","DG53P624",45,0)
 D SETPARM("DGMT MAPR 1 DEPENDENTS",2002,12692)
"RTN","DG53P624",46,0)
 D SETPARM("DGMT MAPR 1 DEPENDENTS",2003,12959)
"RTN","DG53P624",47,0)
 D SETPARM("DGMT MAPR 1 DEPENDENTS",2004,13309)
"RTN","DG53P624",48,0)
 ;
"RTN","DG53P624",49,0)
 D SETPARM("DGMT MAPR N DEPENDENTS",1999,1532)
"RTN","DG53P624",50,0)
 D SETPARM("DGMT MAPR N DEPENDENTS",2000,1586)
"RTN","DG53P624",51,0)
 D SETPARM("DGMT MAPR N DEPENDENTS",2001,1630)
"RTN","DG53P624",52,0)
 D SETPARM("DGMT MAPR N DEPENDENTS",2002,1653)
"RTN","DG53P624",53,0)
 D SETPARM("DGMT MAPR N DEPENDENTS",2003,1688)
"RTN","DG53P624",54,0)
 D SETPARM("DGMT MAPR N DEPENDENTS",2004,1734)
"RTN","DG53P624",55,0)
 ;
"RTN","DG53P624",56,0)
 D MES^XPDUTL("...Rates set.")
"RTN","DG53P624",57,0)
 D MES^XPDUTL("*****")
"RTN","DG53P624",58,0)
 Q
"RTN","DG53P624",59,0)
 ;
"RTN","DG53P624",60,0)
SETPARM(DGPARM,DGINST,DGVALU) ;set PACKAGE entity parameters
"RTN","DG53P624",61,0)
 ;
"RTN","DG53P624",62,0)
 ;  DBIA: #2263 SUPPORTED PARAMETER TOOL ENTRY POINTS
"RTN","DG53P624",63,0)
 ;
"RTN","DG53P624",64,0)
 ;  Input:
"RTN","DG53P624",65,0)
 ;    DGPARM - PARAMETER DEFINITION name
"RTN","DG53P624",66,0)
 ;    DGINST - parameter instance
"RTN","DG53P624",67,0)
 ;    DGVALU - parameter value
"RTN","DG53P624",68,0)
 ;
"RTN","DG53P624",69,0)
 ;  Output:
"RTN","DG53P624",70,0)
 ;    None
"RTN","DG53P624",71,0)
 ;
"RTN","DG53P624",72,0)
 N DGERR
"RTN","DG53P624",73,0)
 ;
"RTN","DG53P624",74,0)
 D EN^XPAR("PKG",DGPARM,DGINST,DGVALU,.DGERR)
"RTN","DG53P624",75,0)
 I '$G(DGERR) D
"RTN","DG53P624",76,0)
 .D MES^XPDUTL(DGPARM_" parameter, instance "_DGINST_", set to "_DGVALU_".")
"RTN","DG53P624",77,0)
 E  D
"RTN","DG53P624",78,0)
 .D MES^XPDUTL(DGPARM_" parameter, instance "_DGINST_", FAILED! ("_DGVALU_")")
"RTN","DG53P624",79,0)
 Q
"RTN","DG53P624",80,0)
 ;
"RTN","DG53P624",81,0)
 ;
"RTN","DG53P624",82,0)
PROGCHK(XPDABORT) ;checks for necessary programmer variables
"RTN","DG53P624",83,0)
 ;
"RTN","DG53P624",84,0)
 I '$G(DUZ)!($G(DUZ(0))'="@")!('$G(DT))!($G(U)'="^") DO
"RTN","DG53P624",85,0)
 .D BMES^XPDUTL("*****")
"RTN","DG53P624",86,0)
 .D MES^XPDUTL("Your programming variables are not set up properly.")
"RTN","DG53P624",87,0)
 .D MES^XPDUTL("Installation aborted.")
"RTN","DG53P624",88,0)
 .D MES^XPDUTL("*****")
"RTN","DG53P624",89,0)
 .S XPDABORT=2
"RTN","DG53P624",90,0)
 Q
"RTN","DG53P624",91,0)
 ;
"RTN","DG53P624",92,0)
BULLETIN ;
"RTN","DG53P624",93,0)
 N ZTDTH,ZTIO,ZTDESC,ZTRTN,ZTSAVE
"RTN","DG53P624",94,0)
 S ZTDTH=$H
"RTN","DG53P624",95,0)
 S ZTIO=""
"RTN","DG53P624",96,0)
 S ZTDESC="DG*5.3*624 Post-Install message"
"RTN","DG53P624",97,0)
 S ZTRTN="DQMESS^DG53P624"
"RTN","DG53P624",98,0)
 S ZTSAVE("DUZ")=""
"RTN","DG53P624",99,0)
 S ZTSAVE("JVAL")=$J
"RTN","DG53P624",100,0)
 D ^%ZTLOAD
"RTN","DG53P624",101,0)
 I $G(ZTSK) D BMES^XPDUTL("POST-INSTALL CLEANUP MESSAGE QUEUED TO SEND")
"RTN","DG53P624",102,0)
 I '$G(ZTSK) D BMES^XPDUTL("PROBLEM: POST-INSTALL CLEANUP MESSAGE NOT SENT")
"RTN","DG53P624",103,0)
 ;
"RTN","DG53P624",104,0)
 I $D(^XTMP("DG",$J,"PATCH 624 ERROR MESSAGE")) DO
"RTN","DG53P624",105,0)
 . D BMES^XPDUTL("PROBLEM SENDING MESSAGE")
"RTN","DG53P624",106,0)
 . D MES^XPDUTL("CHECK FOR ^XTMP(""DG"",$J,""PATCH 624 CLEANUP BULLETIN"") GLOBAL")
"RTN","DG53P624",107,0)
 . D MES^XPDUTL("CHECK FOR ^XTMP(""DG"",$J,""PATCH 624 ERROR MESSAGE"") GLOBAL")
"RTN","DG53P624",108,0)
 D BMES^XPDUTL("Means Test database cleanup has been completed.  Check your VA Mailman")
"RTN","DG53P624",109,0)
 D MES^XPDUTL("mailbox for the ""DG*5.3*624 External value cleanup"" message.")
"RTN","DG53P624",110,0)
 D BMES^XPDUTL("If you do not receive an E-mail, remember to check the following globals:")
"RTN","DG53P624",111,0)
 D MES^XPDUTL("  ^XTMP(""DG"",$J,""PATCH 624 CLEANUP BULLETIN"")")
"RTN","DG53P624",112,0)
 D MES^XPDUTL("  ^XTMP(""DG"",$J,""PATCH 624 ERROR MESSAGE"")")
"RTN","DG53P624",113,0)
 Q
"RTN","DG53P624",114,0)
 ;
"RTN","DG53P624",115,0)
DQMESS ;
"RTN","DG53P624",116,0)
 N DGMMLNE
"RTN","DG53P624",117,0)
 ;*Create bulletin head to identify cleanup records
"RTN","DG53P624",118,0)
 K ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN")
"RTN","DG53P624",119,0)
 S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",1)="This message indicates the patients in the Income Person file (408.13)"
"RTN","DG53P624",120,0)
 S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",2)=" and the Income Relation file (408.22) that have had external values"
"RTN","DG53P624",121,0)
 S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",3)=" in the STATE, LIVED WITH PATIENT, and CONTRIBUTED TO SUPPORT"
"RTN","DG53P624",122,0)
 S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",4)=" fields converted to internal pointer or set of code values."
"RTN","DG53P624",123,0)
 S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",5)=" "
"RTN","DG53P624",124,0)
 S DGMMLNE=6
"RTN","DG53P624",125,0)
 ;
"RTN","DG53P624",126,0)
 ;*Perform cleanup
"RTN","DG53P624",127,0)
 D STATE
"RTN","DG53P624",128,0)
 D CLEAN
"RTN","DG53P624",129,0)
 ;
"RTN","DG53P624",130,0)
 ;*Send message
"RTN","DG53P624",131,0)
 I $O(^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",11))="" DO
"RTN","DG53P624",132,0)
 .S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",11)=" "
"RTN","DG53P624",133,0)
 .S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",12)=" No corrupted records found."
"RTN","DG53P624",134,0)
 .S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",13)=" "
"RTN","DG53P624",135,0)
 ;
"RTN","DG53P624",136,0)
 ;* Queue message to be sent
"RTN","DG53P624",137,0)
 S XMSUB="DG*5.3*624 External value cleanup"
"RTN","DG53P624",138,0)
 S XMDUZ="DG*5.3*624 Install Cleanup"
"RTN","DG53P624",139,0)
 S XMTEXT="^XTMP(""DG"",JVAL,""PATCH 624 CLEANUP BULLETIN"","
"RTN","DG53P624",140,0)
 S XMY(DUZ)=""
"RTN","DG53P624",141,0)
 S XMY(.5)=""
"RTN","DG53P624",142,0)
 S XMY("G.EAS_1_57@FORUM.VA.GOV")=""
"RTN","DG53P624",143,0)
 D ^XMD
"RTN","DG53P624",144,0)
 S DGMMLNE=$P($$FMADD^XLFDT($$NOW^XLFDT,,,5),".")_U_$G(XMMG)_U_$G(XMZ)
"RTN","DG53P624",145,0)
 S ^XTMP("DG",JVAL,"PATCH 624 ERROR MESSAGE",0)=DGMMLNE
"RTN","DG53P624",146,0)
 S DGMMLNE=$P($$FMADD^XLFDT($$NOW^XLFDT,,,5),".")
"RTN","DG53P624",147,0)
 S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",0)=DGMMLNE
"RTN","DG53P624",148,0)
 I '$D(XMMG) K ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN")
"RTN","DG53P624",149,0)
 Q
"RTN","DG53P624",150,0)
 ;
"RTN","DG53P624",151,0)
STATE ;Correct STATE field in 408.13/1.6 with text instead of pointers
"RTN","DG53P624",152,0)
 N DA,STATE,PTR
"RTN","DG53P624",153,0)
 ;* Setup message text
"RTN","DG53P624",154,0)
 S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)="Checking STATE field (1.6) in the INCOME PERSON file (408.13)..."
"RTN","DG53P624",155,0)
 S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",156,0)
 S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)=" "
"RTN","DG53P624",157,0)
 S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",158,0)
 ;
"RTN","DG53P624",159,0)
 S DA=0 F  S DA=$O(^DGPR(408.13,DA)) Q:'DA  D
"RTN","DG53P624",160,0)
 . Q:'$D(^DGPR(408.13,DA,1))
"RTN","DG53P624",161,0)
 . S STATE=$P(^DGPR(408.13,DA,1),"^",6)
"RTN","DG53P624",162,0)
 . Q:(+STATE=STATE)  Q:(STATE']"")
"RTN","DG53P624",163,0)
 . S PTR=$O(^DIC(5,"B",STATE,""))
"RTN","DG53P624",164,0)
 . S $P(^DGPR(408.13,DA,1),"^",6)=PTR
"RTN","DG53P624",165,0)
 .;
"RTN","DG53P624",166,0)
 . S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)="  State for "_$P(^DGPR(408.13,DA,0),"^",1)_"'s entry "_DA_" has been changed: "
"RTN","DG53P624",167,0)
 . S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",168,0)
 . S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)="     "_STATE_" has been changed to "_PTR_" IEN from STATE file (5)."
"RTN","DG53P624",169,0)
 . S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",170,0)
 . S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)=" "
"RTN","DG53P624",171,0)
 . S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",172,0)
 Q
"RTN","DG53P624",173,0)
 ;
"RTN","DG53P624",174,0)
CLEAN ;Clean up text "YES" and "NO" values in 408.22/.06 and 408.22/.1
"RTN","DG53P624",175,0)
 N DA,LWP,CTS
"RTN","DG53P624",176,0)
 ;*Setup message text
"RTN","DG53P624",177,0)
 S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)="Checking LIVED WITH PATIENT field (.06) in the INCOME RELATION file (408.22)..."
"RTN","DG53P624",178,0)
 S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",179,0)
 S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)=" "
"RTN","DG53P624",180,0)
 S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",181,0)
 ;
"RTN","DG53P624",182,0)
 S DA=0 F  S DA=$O(^DGMT(408.22,DA)) Q:'DA  D
"RTN","DG53P624",183,0)
 . S LWP=$P($G(^DGMT(408.22,DA,0)),"^",6)   ;Lived With Patient
"RTN","DG53P624",184,0)
 . Q:(+LWP=LWP)  Q:(LWP']"")
"RTN","DG53P624",185,0)
 . S $P(^DGMT(408.22,DA,0),"^",6)=$S(LWP="YES":1,LWP="NO":0,1:"")
"RTN","DG53P624",186,0)
 . S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)="  LIVED WITH PATIENT for "_$P($G(^DPT($P($G(^DGMT(408.22,DA,0)),"^",1),0)),"^",1)_"'s entry "_DA_" has been changed: "
"RTN","DG53P624",187,0)
 . S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",188,0)
 . S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)="     "_LWP_" has been changed to "_$S(LWP="YES":1,LWP="NO":0,1:"NULL")_"."
"RTN","DG53P624",189,0)
 . S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",190,0)
 . S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)=" "
"RTN","DG53P624",191,0)
 . S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",192,0)
 .;
"RTN","DG53P624",193,0)
 . S DIK="^DGMT(408.22,"
"RTN","DG53P624",194,0)
 . S DIK(1)=".06"
"RTN","DG53P624",195,0)
 . D EN^DIK
"RTN","DG53P624",196,0)
 . K DIK
"RTN","DG53P624",197,0)
 ;
"RTN","DG53P624",198,0)
 ;
"RTN","DG53P624",199,0)
 S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)="Checking CONTRIBUTED TO SUPPORT field (.1) in the INCOME RELATION file (408.22)..."
"RTN","DG53P624",200,0)
 S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",201,0)
 S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)=" "
"RTN","DG53P624",202,0)
 S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",203,0)
 ;
"RTN","DG53P624",204,0)
 S DA=0 F  S DA=$O(^DGMT(408.22,DA)) Q:'DA  D
"RTN","DG53P624",205,0)
 . S CTS=$P($G(^DGMT(408.22,DA,0)),"^",10)   ;Contributed To Support
"RTN","DG53P624",206,0)
 . Q:(+CTS=CTS)  Q:(CTS']"")
"RTN","DG53P624",207,0)
 . S $P(^DGMT(408.22,DA,0),"^",10)=$S(CTS="YES":1,CTS="NO":0,1:"")
"RTN","DG53P624",208,0)
 . S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)="  CONTRIBUTED TO SUPPORT for "_$P($G(^DPT($P($G(^DGMT(408.22,DA,0)),"^",1),0)),"^",1)_"'s entry "_DA_" has been changed: "
"RTN","DG53P624",209,0)
 . S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",210,0)
 . S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)="     "_CTS_" has been changed to "_$S(CTS="YES":1,CTS="NO":0,1:"NULL")_"."
"RTN","DG53P624",211,0)
 . S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",212,0)
 . S ^XTMP("DG",JVAL,"PATCH 624 CLEANUP BULLETIN",DGMMLNE)=" "
"RTN","DG53P624",213,0)
 . S DGMMLNE=DGMMLNE+1
"RTN","DG53P624",214,0)
 .;
"RTN","DG53P624",215,0)
 . S DIK="^DGMT(408.22,"
"RTN","DG53P624",216,0)
 . S DIK(1)=".06"
"RTN","DG53P624",217,0)
 . D EN^DIK
"RTN","DG53P624",218,0)
 . K DIK
"RTN","DG53P624",219,0)
 Q
"RTN","DGDEP0")
0^23^B10372330
"RTN","DGDEP0",1,0)
DGDEP0 ;ALB/CAW,JAN Dependent Driver (con't) ;11/21/94;8/17/01
"RTN","DGDEP0",2,0)
 ;;5.3;Registration;**45,60,395,624**;Aug 13, 1993
"RTN","DGDEP0",3,0)
 ;
"RTN","DGDEP0",4,0)
RETDEP ;Return printable data of dependents
"RTN","DGDEP0",5,0)
 Q:'$D(DGDEP("DGDEP",$J))
"RTN","DGDEP0",6,0)
 N ACT,ACTIVE,CNT,CNTR,DEP,DGII,DGX,EDATE,INCOME,INCPER,MORE,NAME,RELATE
"RTN","DGDEP0",7,0)
 F DGII=0:0 S DGII=$O(DGDEP(DGII)) Q:'DGII  K DGDEP(DGII) ; clear dependent array
"RTN","DGDEP0",8,0)
 S RELATE=0,CNT=1
"RTN","DGDEP0",9,0)
 ;
"RTN","DGDEP0",10,0)
 F  S RELATE=$O(DGDEP("DGDEP",$J,RELATE)) Q:'RELATE  D
"RTN","DGDEP0",11,0)
 .;
"RTN","DGDEP0",12,0)
 .S MORE=0
"RTN","DGDEP0",13,0)
 .F  S MORE=$O(DGDEP("DGDEP",$J,RELATE,MORE)) Q:'MORE  S DEP=DGDEP("DGDEP",$J,RELATE,MORE) D  S CNT=CNT+1,DGCNT=CNT-1
"RTN","DGDEP0",14,0)
 ..;
"RTN","DGDEP0",15,0)
 ..S $P(DGDEP(CNT),U,2)=$P($G(^DG(408.11,RELATE,0)),U)
"RTN","DGDEP0",16,0)
 ..S NAME=$P(DEP,U),$P(DGDEP(CNT),U)=$P(DEP,U)
"RTN","DGDEP0",17,0)
 ..S $P(DGDEP(CNT),U,3)=$S($P(DEP,U,2)="M":"Male",$P(DEP,U,2)="F":"Female",1:"Unknown"),$P(DGDEP(CNT),U,20)=$P(DEP,U,20)
"RTN","DGDEP0",18,0)
 ..S $P(DGDEP(CNT),U,21)=$P(DEP,U,21),$P(DGDEP(CNT),U,22)=$P(DEP,U,22)
"RTN","DGDEP0",19,0)
 ..N Y S Y=$P(DEP,U,3) D DD^%DT S $P(DGDEP(CNT),U,4)=Y
"RTN","DGDEP0",20,0)
 ..I $P(DEP,U,9) S $P(DGDEP(CNT),U,5)=$E($P(DEP,U,9),1,3)_"-"_$E($P(DEP,U,9),4,5)_"-"_$E($P(DEP,U,9),6,9)
"RTN","DGDEP0",21,0)
 ..;
"RTN","DGDEP0",22,0)
 ..S INCOME=$P(DGDEP("DGDEP",$J,RELATE,MORE),U,21)
"RTN","DGDEP0",23,0)
 ..S INCPER=$P(DGDEP("DGDEP",$J,RELATE,MORE),U,22)
"RTN","DGDEP0",24,0)
 ..I RELATE>1 S DGDEP(CNT,"MNADD")=$$SPDEPADD(INCPER)
"RTN","DGDEP0",25,0)
 ..I RELATE=1 D SELF("",NAME,RELATE,"",DGDEP(1),$G(DGMTI),CNT)
"RTN","DGDEP0",26,0)
 ..S ACT=$O(DGDEP("DGDEP",$J,RELATE,MORE,"")) Q:'ACT  S ACT=DGDEP("DGDEP",$J,RELATE,MORE,+ACT)
"RTN","DGDEP0",27,0)
 ..I RELATE=1 D SELF(INCPER,NAME,RELATE,ACT,DGDEP(1),$G(DGMTI),CNT)
"RTN","DGDEP0",28,0)
 ..I RELATE=2 D DEP(INCPER,NAME,RELATE,ACT,DGDEP(CNT),$G(DGMTI),$G(DGMTACT),CNT)
"RTN","DGDEP0",29,0)
 ..I RELATE>2 D DEP(INCPER,NAME,RELATE,ACT,DGDEP(CNT),$G(DGMTI),$G(DGMTACT),CNT)
"RTN","DGDEP0",30,0)
 ..S EDATE="",CNTR=0
"RTN","DGDEP0",31,0)
 ..F  S EDATE=$O(DGDEP("DGDEP",$J,RELATE,MORE,EDATE)) Q:EDATE']""  S ACTIVE=DGDEP("DGDEP",$J,RELATE,MORE,EDATE) D
"RTN","DGDEP0",32,0)
 ...;
"RTN","DGDEP0",33,0)
 ...N Y S Y=+ACTIVE D DD^%DT S DGDEP(CNT,EDATE)=Y
"RTN","DGDEP0",34,0)
 ...S $P(DGDEP(CNT,EDATE),U,2)=$S($P(ACTIVE,U,2)=1:"Active",1:"Inactive")
"RTN","DGDEP0",35,0)
 ...S $P(DGDEP(CNT,EDATE),U,3)=$P(ACTIVE,U,3)
"RTN","DGDEP0",36,0)
 K DGDEP("DGDEP",$J)
"RTN","DGDEP0",37,0)
 Q
"RTN","DGDEP0",38,0)
 ;
"RTN","DGDEP0",39,0)
SELF(INCPER,NAME,RELATE,ACT,DGDEP,DGMTI,CNT) ;
"RTN","DGDEP0",40,0)
 I $G(DGMTI),$G(DGMTACT)="VEW" G SELFQ
"RTN","DGDEP0",41,0)
 I $G(DGMTI) D ADD^DGDEP2(DFN,DGDEP,DGMTI)
"RTN","DGDEP0",42,0)
SELFQ I INCPER>0 D SELF^DGDEP3(INCPER,NAME,RELATE,ACT,$G(DGMTI),CNT)
"RTN","DGDEP0",43,0)
 Q
"RTN","DGDEP0",44,0)
 ;
"RTN","DGDEP0",45,0)
DEP(INCPER,NAME,RELATE,ACT,DGDEP,DGMTI,DGMTACT,CNT) ;
"RTN","DGDEP0",46,0)
 ;
"RTN","DGDEP0",47,0)
 I $G(DGMTI),$G(DGMTACT)="VEW" G DEP1
"RTN","DGDEP0",48,0)
 I $G(DGMTI),$P(ACT,U,2),$G(DGMTACT)="ADD",'$G(DGREMOVE) D ADD^DGDEP2(DFN,DGDEP,DGMTI)
"RTN","DGDEP0",49,0)
DEP1 I RELATE=2 D SELF^DGDEP3(INCPER,NAME,RELATE,ACT,$G(DGMTI),CNT) G DEPQ
"RTN","DGDEP0",50,0)
 I INCPER>0 D CHILD^DGDEP3(INCPER,NAME,RELATE,ACT,$G(DGMTI),$G(DGMTACT),CNT)
"RTN","DGDEP0",51,0)
DEPQ Q
"RTN","DGDEP0",52,0)
 ;
"RTN","DGDEP0",53,0)
SPDEPADD(INCPER) ;Return Spouse/Dependent Maiden Name and Address info
"RTN","DGDEP0",54,0)
 N ADDCKVAL,INDAIIEN,PRIEN,IPIEN,SPDEPINF
"RTN","DGDEP0",55,0)
 S INDAIIEN=$P($G(^DGMT(408.22,INCPER,0)),"^",2)
"RTN","DGDEP0",56,0)
 S PRIEN=$P($G(^DGMT(408.21,INDAIIEN,0)),"^",2)
"RTN","DGDEP0",57,0)
 S IPIEN=$P($G(^DGPR(408.12,PRIEN,0)),"^",3)
"RTN","DGDEP0",58,0)
 I IPIEN["DGPR(408.13" DO
"RTN","DGDEP0",59,0)
 . S IPIEN=$P(IPIEN,";",1)
"RTN","DGDEP0",60,0)
 . S SPDEPINF=$P($G(^DGPR(408.13,IPIEN,1)),"^",1,8)
"RTN","DGDEP0",61,0)
 Q SPDEPINF
"RTN","DGDEP1")
0^24^B24063483
"RTN","DGDEP1",1,0)
DGDEP1 ;ALB/CAW List One Dependent/Edit Effective Dates ;10/31/94
"RTN","DGDEP1",2,0)
 ;;5.3;Registration;**45,60,624**;Aug 13, 1993
"RTN","DGDEP1",3,0)
 ;
"RTN","DGDEP1",4,0)
LSTDEP(DGDEP) ;List Dependents
"RTN","DGDEP1",5,0)
 N DEP,CNT S CNT=0
"RTN","DGDEP1",6,0)
 F  S CNT=$O(DGDEP(CNT)) Q:'CNT  D ONE(CNT)
"RTN","DGDEP1",7,0)
 Q
"RTN","DGDEP1",8,0)
 ;
"RTN","DGDEP1",9,0)
ONE(CNT) ; List one dependent
"RTN","DGDEP1",10,0)
 ;
"RTN","DGDEP1",11,0)
 N DGLN S DGLN=1
"RTN","DGDEP1",12,0)
 ;
"RTN","DGDEP1",13,0)
 S X="",X=$$SETSTR^VALM1("SSN: ",X,4,5)
"RTN","DGDEP1",14,0)
 S X=$$SETSTR^VALM1($P(DGDEP(CNT),U,5),X,9,24)
"RTN","DGDEP1",15,0)
 S X=$$SETSTR^VALM1("Sex: ",X,52,5)
"RTN","DGDEP1",16,0)
 S X=$$SETSTR^VALM1($P(DGDEP(CNT),U,3),X,58,7)
"RTN","DGDEP1",17,0)
 D SET(X)
"RTN","DGDEP1",18,0)
 ;
"RTN","DGDEP1",19,0)
 S X="",X=$$SETSTR^VALM1("DOB: ",X,4,5)
"RTN","DGDEP1",20,0)
 S X=$$SETSTR^VALM1($P(DGDEP(CNT),U,4),X,9,24)
"RTN","DGDEP1",21,0)
 ;
"RTN","DGDEP1",22,0)
 ;* Output Spouse' Maiden Name, if defined (DG*5.3*624)
"RTN","DGDEP1",23,0)
 I $P($G(DGDEP(CNT)),U,2)="SPOUSE" DO
"RTN","DGDEP1",24,0)
 . N DGMNTEXT
"RTN","DGDEP1",25,0)
 . S X=$$SETSTR^VALM1("Maiden: ",X,49,8)
"RTN","DGDEP1",26,0)
 . S DGMNTEXT=$P($G(DGDEP(CNT,"MNADD")),U,1)
"RTN","DGDEP1",27,0)
 . S:DGMNTEXT]"" X=$$SETSTR^VALM1(DGMNTEXT,X,58,30)
"RTN","DGDEP1",28,0)
 . S:DGMNTEXT']"" X=$$SETSTR^VALM1("UNANSWERED",X,58,10)
"RTN","DGDEP1",29,0)
 D SET(X)
"RTN","DGDEP1",30,0)
 S DEP=""
"RTN","DGDEP1",31,0)
 F  S DEP=$O(DGDEP(CNT,DEP)) Q:DEP']""  D
"RTN","DGDEP1",32,0)
 .I DEP'="MNADD" DO
"RTN","DGDEP1",33,0)
 ..S X="",X=$$SETSTR^VALM1("Status: ",X,1,8)
"RTN","DGDEP1",34,0)
 ..S X=$$SETSTR^VALM1($P(DGDEP(CNT,DEP),U,2),X,9,24)
"RTN","DGDEP1",35,0)
 ..S X=$$SETSTR^VALM1("Effective Date: ",X,41,16)
"RTN","DGDEP1",36,0)
 ..S X=$$SETSTR^VALM1($P(DGDEP(CNT,DEP),U),X,58,20)
"RTN","DGDEP1",37,0)
 ..D SET(X)
"RTN","DGDEP1",38,0)
 ..I $P(DGDEP(CNT,DEP),U,3) D
"RTN","DGDEP1",39,0)
 ...S X="",X=$$SETSTR^VALM1("Filed by IVM: ",X,43,14)
"RTN","DGDEP1",40,0)
 ...S X=$$SETSTR^VALM1("Yes",X,58,20)
"RTN","DGDEP1",41,0)
 ...D SET(X)
"RTN","DGDEP1",42,0)
 ..D SET("")
"RTN","DGDEP1",43,0)
 S VALMCNT=DGLN-1
"RTN","DGDEP1",44,0)
 ;
"RTN","DGDEP1",45,0)
 S X=""
"RTN","DGDEP1",46,0)
 S X=$$SETSTR^VALM1("Address: ",X,1,9)
"RTN","DGDEP1",47,0)
 S:($P($G(DGDEP(CNT,"MNADD")),U,2,7)="^^^^^") X=$$SETSTR^VALM1("UNANSWERED",X,10,10)
"RTN","DGDEP1",48,0)
 S:($P($G(DGDEP(CNT,"MNADD")),U,2,7)'="^^^^^") X=$$SETSTR^VALM1($P($G(DGDEP(CNT,"MNADD")),U,2),X,10,35)
"RTN","DGDEP1",49,0)
 S X=$$SETSTR^VALM1("Phone: ",X,50,7)
"RTN","DGDEP1",50,0)
 S:($P($G(DGDEP(CNT,"MNADD")),U,8)="") X=$$SETSTR^VALM1("UNANSWERED",X,58,10)
"RTN","DGDEP1",51,0)
 S:($P($G(DGDEP(CNT,"MNADD")),U,8)'="") X=$$SETSTR^VALM1($P($G(DGDEP(CNT,"MNADD")),U,8),X,58,13)
"RTN","DGDEP1",52,0)
 D SET(X)
"RTN","DGDEP1",53,0)
 ;
"RTN","DGDEP1",54,0)
 ;* Output dependent address (DG*5.3*624)
"RTN","DGDEP1",55,0)
 I ($P($G(DGDEP(CNT,"MNADD")),U,2,7)'="^^^^^") DO
"RTN","DGDEP1",56,0)
 .S X=""
"RTN","DGDEP1",57,0)
 .S:($P($G(DGDEP(CNT,"MNADD")),U,3)'="") X=$$SETSTR^VALM1($P($G(DGDEP(CNT,"MNADD")),U,3),X,10,30)
"RTN","DGDEP1",58,0)
 .S:($P($G(DGDEP(CNT,"MNADD")),U,3)="") X=$$SETSTR^VALM1(" ",X,10,1)
"RTN","DGDEP1",59,0)
 .D SET(X)
"RTN","DGDEP1",60,0)
 .S X=""
"RTN","DGDEP1",61,0)
 .S:($P($G(DGDEP(CNT,"MNADD")),U,4)'="") X=$$SETSTR^VALM1($P($G(DGDEP(CNT,"MNADD")),U,4),X,10,30)
"RTN","DGDEP1",62,0)
 .S:($P($G(DGDEP(CNT,"MNADD")),U,4)="") X=$$SETSTR^VALM1(" ",X,10,1)
"RTN","DGDEP1",63,0)
 .D SET(X)
"RTN","DGDEP1",64,0)
 .S X=""
"RTN","DGDEP1",65,0)
 .I ($P($G(DGDEP(CNT,"MNADD")),U,5)'="") DO
"RTN","DGDEP1",66,0)
 ..S X=$$SETSTR^VALM1($P($G(DGDEP(CNT,"MNADD")),U,5),X,10,30)
"RTN","DGDEP1",67,0)
 ..S X=$$SETSTR^VALM1(",",X,($L($P($G(DGDEP(CNT,"MNADD")),U,5))+10),1)
"RTN","DGDEP1",68,0)
 .S:($P($G(DGDEP(CNT,"MNADD")),U,5)="") X=$$SETSTR^VALM1(" ",X,10,1)
"RTN","DGDEP1",69,0)
 .N STATVAL,ZIPPOS
"RTN","DGDEP1",70,0)
 .S STATVAL=""
"RTN","DGDEP1",71,0)
 .I ($P($G(DGDEP(CNT,"MNADD")),U,6)'="") DO
"RTN","DGDEP1",72,0)
 ..S STATVAL=$P(^DIC(5,$P($G(DGDEP(CNT,"MNADD")),U,6),0),"^",1)
"RTN","DGDEP1",73,0)
 ..S X=$$SETSTR^VALM1(STATVAL,X,($L($P($G(DGDEP(CNT,"MNADD")),U,5))+12),30)
"RTN","DGDEP1",74,0)
 .S:($P($G(DGDEP(CNT,"MNADD")),U,6)="") X=$$SETSTR^VALM1(" ",X,41,1)
"RTN","DGDEP1",75,0)
 .;;D SET(X)
"RTN","DGDEP1",76,0)
 .;;S X=""
"RTN","DGDEP1",77,0)
 .I ($P($G(DGDEP(CNT,"MNADD")),U,7)'="") DO
"RTN","DGDEP1",78,0)
 ..S ZIPPOS=($L($P($G(DGDEP(CNT,"MNADD")),U,5))+($L(STATVAL))+14)
"RTN","DGDEP1",79,0)
 ..S X=$$SETSTR^VALM1($P($G(DGDEP(CNT,"MNADD")),U,7),X,ZIPPOS,10)
"RTN","DGDEP1",80,0)
 .S:($P($G(DGDEP(CNT,"MNADD")),U,7)="") X=$$SETSTR^VALM1(" ",X,20,1)
"RTN","DGDEP1",81,0)
 .D SET(X)
"RTN","DGDEP1",82,0)
 ;
"RTN","DGDEP1",83,0)
 S VALMCNT=DGLN-1
"RTN","DGDEP1",84,0)
 Q
"RTN","DGDEP1",85,0)
 ;
"RTN","DGDEP1",86,0)
SET(X) ;Set up array
"RTN","DGDEP1",87,0)
 S ^TMP("DGMTEP",$J,DGLN,0)=X
"RTN","DGDEP1",88,0)
 S DGLN=DGLN+1
"RTN","DGDEP1",89,0)
 Q
"RTN","DGDEP1",90,0)
 ;
"RTN","DGDEP1",91,0)
EXIT ;
"RTN","DGDEP1",92,0)
 K ^TMP("DGMTEP",$J)
"RTN","DGDEP1",93,0)
 Q
"RTN","DGDEP1",94,0)
 ;
"RTN","DGDEP1",95,0)
EN ; Effective Dates
"RTN","DGDEP1",96,0)
 S VALMBCK=""
"RTN","DGDEP1",97,0)
 I $D(DGMTI),$G(DGMTACT)="VEW" W !,"Cannot edit when viewing a means test." H 2 G ENQ
"RTN","DGDEP1",98,0)
 I '$D(DGMTI),$G(DGRPV)=1 W !,"Not while viewing" H 2 G ENQ
"RTN","DGDEP1",99,0)
 D EDIT
"RTN","DGDEP1",100,0)
 I DGW=1 D  I $G(DGERR) W !,"Cannot inactivate veteran" K DGERR G EN
"RTN","DGDEP1",101,0)
 .S DATE=$O(DGDEP(1,""))
"RTN","DGDEP1",102,0)
 .S ACTIVE=$P(DGDEP(1,DATE),U,2)
"RTN","DGDEP1",103,0)
 .I ACTIVE="Inactive" S DGERR=1
"RTN","DGDEP1",104,0)
ENQ S VALMBCK="R"
"RTN","DGDEP1",105,0)
 Q
"RTN","DGDEP1",106,0)
 ;
"RTN","DGDEP1",107,0)
EDIT ; Edit Effective Dates
"RTN","DGDEP1",108,0)
 ;  values for DGFLG:
"RTN","DGDEP1",109,0)
 ;     DGFLG = 1   IVM effective date
"RTN","DGDEP1",110,0)
 ;
"RTN","DGDEP1",111,0)
 N DA,DR,DIE,DIC,DATE,DGEDIT,DGEE,Y
"RTN","DGDEP1",112,0)
 S DGFLG=0,DGEDIT=1
"RTN","DGDEP1",113,0)
 S DGPR=$S($G(DGW):$P(DGDEP(DGW),U,20),1:$P(DGDEP,U,20))
"RTN","DGDEP1",114,0)
 S DIE="^DGPR(408.12,",DA=DGPR,DR="75"
"RTN","DGDEP1",115,0)
 S DR(2,408.1275)="I $P($G(^DGPR(408.12,DGPR,""E"",DA,0)),U,3) S Y=0,DGFLG=1;S:$P($G(^DGPR(408.12,DGPR,""E"",DA,0)),U,2)']"""" DIE(""NO^"")="""";.01;.02"
"RTN","DGDEP1",116,0)
 D ^DIE
"RTN","DGDEP1",117,0)
 I DGFLG W !!,"Cannot edit date added by IVM." H 2 G EDITQ
"RTN","DGDEP1",118,0)
 S DATE=0,DATE=$O(^DGPR(408.12,$P(DGDEP(DGW),U,20),"E",DATE))
"RTN","DGDEP1",119,0)
 I 'DATE W !!,"There has to be an effective date for this person." H 2 G EDIT
"RTN","DGDEP1",120,0)
EDITQ K DGDEP,DGFLG D INIT^DGDEP
"RTN","DGDEP1",121,0)
 K ^TMP("DGMTEP",$J) D ONE(DGW)
"RTN","DGDEP1",122,0)
 Q
"RTN","DGDEP1",123,0)
 ;
"RTN","DGDEP1",124,0)
DOB(DA,X) ;CHECK EFFECTIVE DATE AGAINST DOB
"RTN","DGDEP1",125,0)
 N DGFILE,X1
"RTN","DGDEP1",126,0)
 S DGFILE=$P($G(^DGPR(408.12,DA,0)),U,3),X1=$P(DGFILE,";"),DGFILE=$S(DGFILE["DGPR":"^DGPR(408.13,",1:"^DPT(")
"RTN","DGDEP1",127,0)
 I X<$P($G(@(DGFILE_X1_",0)")),U,3) D
"RTN","DGDEP1",128,0)
 . W !,"  <<EFFECTIVE DATE may not precede Date Of Birth>>",*7
"RTN","DGDEP1",129,0)
 . S X=0
"RTN","DGDEP1",130,0)
 Q X
"RTN","DGDEP2")
0^17^B20373879
"RTN","DGDEP2",1,0)
DGDEP2 ;ALB/CAW,JAN - Dependent Utilities ;11/3/94,7/30/01
"RTN","DGDEP2",2,0)
 ;;5.3;Registration;**45,60,395,624**;Aug 13, 1993
"RTN","DGDEP2",3,0)
 ;624: DGMTDPCH=flag to force recalc of adj med exp when deps change
"RTN","DGDEP2",4,0)
 ;
"RTN","DGDEP2",5,0)
EN1 ; Add dependent to means test
"RTN","DGDEP2",6,0)
 ;
"RTN","DGDEP2",7,0)
 N DGSAVE,DGMTD,DGSAVE1
"RTN","DGDEP2",8,0)
 I '$G(DGMTI) W !,"Not a means test - use means test options." H 2 G EN1Q
"RTN","DGDEP2",9,0)
 I $G(DGMTACT)="VEW" W !,"Cannot edit when viewing a means test." H 2 G EN1Q
"RTN","DGDEP2",10,0)
 S VALMBCK="",DGSAVE=VALMLST,DGSAVE1=VALMBG
"RTN","DGDEP2",11,0)
 S VALMBG=1,VALMLST=DGCNT D SEL^VALM2 S VALMBG=DGSAVE1,VALMLST=DGSAVE G EN1Q:'$O(VALMY(0))
"RTN","DGDEP2",12,0)
 N CTR S CTR=0 F  S CTR=$O(VALMY(CTR)) Q:'CTR  D
"RTN","DGDEP2",13,0)
 .D ADD(DFN,DGDEP(CTR),$G(DGMTI))
"RTN","DGDEP2",14,0)
 S DGMTD=$S($G(DGMTI):$P(^DGMT(408.31,DGMTI,0),U),1:DT)
"RTN","DGDEP2",15,0)
 D ALL^DGMTU21(DFN,"VSC",DGMTD,"IPR",DGMTI)
"RTN","DGDEP2",16,0)
 K DGDEP D INIT^DGDEP
"RTN","DGDEP2",17,0)
 S DGMTDPCH=1
"RTN","DGDEP2",18,0)
EN1Q S VALMBCK="R" Q
"RTN","DGDEP2",19,0)
 ;
"RTN","DGDEP2",20,0)
ADD(DFN,DGDEP,DGMTI) ;Add
"RTN","DGDEP2",21,0)
 N DA,DR,DIE,DGMTD,DGIRI
"RTN","DGDEP2",22,0)
 I '$G(DGMTI) W !,"Not a means test - use means test options." H 2 G ADDQ
"RTN","DGDEP2",23,0)
 I $G(DGMTACT)="VEW" W !,"Cannot edit when viewing a means test." G ADDQ
"RTN","DGDEP2",24,0)
 S DGMTR=$O(^DG(408.11,"B",$P(DGDEP,U,2),"")) I '$P(^DG(408.11,DGMTR,0),U,4) D  G ADDQ
"RTN","DGDEP2",25,0)
 .W !,"Cannot add a "_$P(DGDEP,U,2)_" as a dependent to the means test." H 2
"RTN","DGDEP2",26,0)
 S DGMTD=$S($G(DGMTI):$P($G(^DGMT(408.31,DGMTI,0)),U),1:DT)
"RTN","DGDEP2",27,0)
 D GETIENS^DGMTU2(DFN,$P(DGDEP,U,20),DGMTD)
"RTN","DGDEP2",28,0)
 S DA=DGIRI
"RTN","DGDEP2",29,0)
 S DIE="^DGMT(408.22,",DR="31////"_DGMTI
"RTN","DGDEP2",30,0)
 D ^DIE
"RTN","DGDEP2",31,0)
 S DGMTDPCH=1
"RTN","DGDEP2",32,0)
ADDQ Q
"RTN","DGDEP2",33,0)
 ;
"RTN","DGDEP2",34,0)
EN2 ; Remove dependent from means test
"RTN","DGDEP2",35,0)
 ;
"RTN","DGDEP2",36,0)
 N DGSAVE1,DGSAVE2,DGMTD
"RTN","DGDEP2",37,0)
 I '$G(DGMTI) W !,"Not a means test - use means test options." H 2 G EN2Q
"RTN","DGDEP2",38,0)
 I $G(DGMTACT)="VEW" W !,"Cannot edit when viewing a means test." H 2 G EN2Q
"RTN","DGDEP2",39,0)
 S VALMBCK="",DGSAVE1=VALMBG,DGSAVE2=VALMLST,VALMBG=2
"RTN","DGDEP2",40,0)
 S VALMLST=DGCNT D SEL^VALM2 S VALMBG=DGSAVE1,VALMLST=DGSAVE2 G EN1Q:'$O(VALMY(0))
"RTN","DGDEP2",41,0)
 N CTR S CTR=0 F  S CTR=$O(VALMY(CTR)) Q:'CTR  D
"RTN","DGDEP2",42,0)
 .D REMOVE(DFN,DGDEP(CTR),$G(DGMTI))
"RTN","DGDEP2",43,0)
 S DGMTD=$S($G(DGMTI):$P(^DGMT(408.31,DGMTI,0),U),1:DT)
"RTN","DGDEP2",44,0)
 D ALL^DGMTU21(DFN,"VSC",DGMTD,"IPR",DGMTI)
"RTN","DGDEP2",45,0)
 S DGMTDPCH=1
"RTN","DGDEP2",46,0)
EN2Q S VALMBCK="R" Q
"RTN","DGDEP2",47,0)
 ;
"RTN","DGDEP2",48,0)
REMOVE(DFN,DGDEP,DGMTI) ;Remove
"RTN","DGDEP2",49,0)
 N DA,DR,DIE,DGMTD
"RTN","DGDEP2",50,0)
 I '$G(DGMTI) W !,"Not a means test - use means test options." H 2 G REMOVEQ
"RTN","DGDEP2",51,0)
 I $G(DGMTACT)="VEW" W !,"Cannot edit when viewing a means test." H 2 G EN2Q
"RTN","DGDEP2",52,0)
 S DGMTD=$S($G(DGMTI):$P($G(^DGMT(408.31,DGMTI,0)),U),1:DT)
"RTN","DGDEP2",53,0)
 D GETIENS^DGMTU2(DFN,$P(DGDEP,U,20),DGMTD)
"RTN","DGDEP2",54,0)
 S DA=DGIRI
"RTN","DGDEP2",55,0)
 S DIE="^DGMT(408.22,",DR="31////@"
"RTN","DGDEP2",56,0)
 D ^DIE S DGREMOVE=1
"RTN","DGDEP2",57,0)
 K DGDEP D INIT^DGDEP
"RTN","DGDEP2",58,0)
 S DGMTDPCH=1
"RTN","DGDEP2",59,0)
REMOVEQ K DGREMOVE Q
"RTN","DGDEP2",60,0)
 ;
"RTN","DGDEP2",61,0)
EN3 ; Edit dependent demo
"RTN","DGDEP2",62,0)
 ;
"RTN","DGDEP2",63,0)
 S VALMBCK=""
"RTN","DGDEP2",64,0)
 N DGSAVE1,DGSAVE2,DGMTD,DGBEG,I
"RTN","DGDEP2",65,0)
 I $G(DGMTACT)="VEW" W !,"Cannot edit when viewing a means test." H 2 G EN3Q
"RTN","DGDEP2",66,0)
 I '$D(DGMTI),$G(DGRPV)=1 W !,"Not while viewing" H 2 G EN3Q
"RTN","DGDEP2",67,0)
 S VALMBCK="",DGSAVE1=VALMBG,DGSAVE2=VALMLST,VALMBG=1
"RTN","DGDEP2",68,0)
 S VALMLST=DGCNT D SEL^VALM2 S VALMBG=DGSAVE1,VALMLST=DGSAVE2 G EN1Q:'$O(VALMY(0))
"RTN","DGDEP2",69,0)
 N CTR S CTR=0 F  S CTR=$O(VALMY(CTR)) Q:'CTR  D
"RTN","DGDEP2",70,0)
 .D EDITD(DFN,DGDEP(CTR),CTR,$G(DGMTI))
"RTN","DGDEP2",71,0)
 S VALMBCK="R"
"RTN","DGDEP2",72,0)
 K DGDEP D INIT^DGDEP
"RTN","DGDEP2",73,0)
EN3Q Q
"RTN","DGDEP2",74,0)
 ;
"RTN","DGDEP2",75,0)
EDITD(DFN,DGDEP,DGW,DGMTI) ; Edit
"RTN","DGDEP2",76,0)
 N DA,DR,DIE,DGMTDT,SPOUSE,DGREL,DGDR,CNT,RELATION
"RTN","DGDEP2",77,0)
 I $G(DGMTACT)="VEW" W !,"Cannot edit when viewing a means test." H 2 G EDITDQ
"RTN","DGDEP2",78,0)
 W !!,$P(DGDEP,U)
"RTN","DGDEP2",79,0)
 I '$G(DGMTI),$P(DGDEP,U,2)="SELF" D  G EDITDQ
"RTN","DGDEP2",80,0)
 .S DGREL("V")=$P(DGDEP,U,20) D SPOUSE^DGRPEIS2
"RTN","DGDEP2",81,0)
 I '$G(DGMTI) W !,"Can only input information for veteran." H 2 G EN3Q
"RTN","DGDEP2",82,0)
 S DGMTDT=$P(^DGMT(408.31,DGMTI,0),U)
"RTN","DGDEP2",83,0)
 I $P(DGDEP,U,2)="SPOUSE" W !,"Married information is entered under the veteran." H 2 G EDITDQ
"RTN","DGDEP2",84,0)
 I $P(DGDEP,U,2)="SELF" D  G EDITDQ
"RTN","DGDEP2",85,0)
 .S DGDR=101
"RTN","DGDEP2",86,0)
 .D GETREL^DGMTU11(DFN,"S",$$LYR^DGMTSCU1($S($G(DGMTDT):DGMTDT,1:DT)))
"RTN","DGDEP2",87,0)
 .D GETIENS^DGMTU2(DFN,DGPRI,DGMTDT) S DGVIRI=DGIRI
"RTN","DGDEP2",88,0)
 .I DGVIRI<0 W !,"No information in Income Relation file." H 2 G EDITDQ
"RTN","DGDEP2",89,0)
 .S DA=DGVIRI,DIE="^DGMT(408.22,",DR="[DGMT ENTER/EDIT MARITAL STATUS]" D ^DIE K DA,DIE,DR
"RTN","DGDEP2",90,0)
 .I $G(DGMTI),$G(DGREL("S")) D
"RTN","DGDEP2",91,0)
 ..S SPOUSE=+DGREL("S")
"RTN","DGDEP2",92,0)
 ..D INIT^DGDEP
"RTN","DGDEP2",93,0)
 ..S CNT=0 F  S CNT=$O(DGDEP(CNT)) Q:'CNT  I $P(DGDEP(CNT),U,20)=SPOUSE D ADD(DFN,DGDEP(CNT),DGMTI)
"RTN","DGDEP2",94,0)
 S RELATION=$O(^DG(408.11,"B",$P(DGDEP,U,2),""))
"RTN","DGDEP2",95,0)
 I '$P(^DG(408.11,+RELATION,0),U,4) W !,"Not applicable for means test" H 2 G EDITDQ
"RTN","DGDEP2",96,0)
 S DGPRI=$P(DGDEP,U,20)
"RTN","DGDEP2",97,0)
 D EDT^DGMTSC11
"RTN","DGDEP2",98,0)
 I $G(DGFL)'<0 D ADD(DFN,DGDEP,DGMTI)
"RTN","DGDEP2",99,0)
EDITDQ ;
"RTN","DGDEP2",100,0)
 Q
"RTN","DGDEP3")
0^22^B20134504
"RTN","DGDEP3",1,0)
DGDEP3 ;ALB/CAW - Dependents display ; 11/9/94
"RTN","DGDEP3",2,0)
 ;;5.3;Registration;**45,624**;Aug 13, 1993
"RTN","DGDEP3",3,0)
 ;
"RTN","DGDEP3",4,0)
SELF(INCPER,NAME,RELATE,ACT,DGMTI,CNT) ; Display information concerning veteran
"RTN","DGDEP3",5,0)
 ;
"RTN","DGDEP3",6,0)
 S DGX="",DGX=$$SETSTR^VALM1(CNT,DGX,3,3)
"RTN","DGDEP3",7,0)
 I $G(DGMTI),INCPER,($P($G(^DGMT(408.22,+INCPER,"MT")),U)=DGMTI) S DGX=$$SETSTR^VALM1("*",DGX,5,1)
"RTN","DGDEP3",8,0)
 S DGX=$$SETSTR^VALM1(NAME,DGX,9,22)
"RTN","DGDEP3",9,0)
 S DGX=$$SETSTR^VALM1($P($G(^DG(408.11,RELATE,0)),U),DGX,32,30)
"RTN","DGDEP3",10,0)
 S DGX=$$SETSTR^VALM1($S($P(ACT,U,2)=1:"*",1:""),DGX,65,1)
"RTN","DGDEP3",11,0)
 S:RELATE=2 DGX=$$SETSTR^VALM1($S(+$$ADDCHK(INCPER)=1:"*",1:""),DGX,73,1)
"RTN","DGDEP3",12,0)
 D SET^DGDEP(DGX)
"RTN","DGDEP3",13,0)
 ;
"RTN","DGDEP3",14,0)
 Q:RELATE=2
"RTN","DGDEP3",15,0)
 S INCPER=^DGMT(408.22,INCPER,0)
"RTN","DGDEP3",16,0)
 S DGX="",DGX=$$SETSTR^VALM1("Married Last Year: ",DGX,18,19)
"RTN","DGDEP3",17,0)
 S DGX=$$SETSTR^VALM1($S($P(INCPER,U,5):"Yes",$P(INCPER,U,5)="":"Unanswered",1:"No"),DGX,38,10)
"RTN","DGDEP3",18,0)
 D SET^DGDEP(DGX)
"RTN","DGDEP3",19,0)
 ;
"RTN","DGDEP3",20,0)
 Q:'$G(DGMTI)
"RTN","DGDEP3",21,0)
 I $P(INCPER,U,5)=1 D
"RTN","DGDEP3",22,0)
 .S DGX="",DGX=$$SETSTR^VALM1("Lived with Spouse: ",DGX,18,19)
"RTN","DGDEP3",23,0)
 .S DGX=$$SETSTR^VALM1($S($P(INCPER,U,6):"Yes",$P(INCPER,U,6)="":"Unanswered",1:"No"),DGX,38,10)
"RTN","DGDEP3",24,0)
 .D SET^DGDEP(DGX)
"RTN","DGDEP3",25,0)
 ;
"RTN","DGDEP3",26,0)
 I $P(INCPER,U,6)=0 D
"RTN","DGDEP3",27,0)
 .S DGX="",DGX=$$SETSTR^VALM1("Amount Contributed: ",DGX,17,19)
"RTN","DGDEP3",28,0)
 .S DGX=$$SETSTR^VALM1($S($P(INCPER,U,7)]"":$P(INCPER,U,7),1:"Unanswered"),DGX,38,10)
"RTN","DGDEP3",29,0)
 .D SET^DGDEP(DGX)
"RTN","DGDEP3",30,0)
 Q
"RTN","DGDEP3",31,0)
 ;
"RTN","DGDEP3",32,0)
CHILD(INCPER,NAME,RELATE,ACT,DGMTI,DGMTACT,CNT) ; Display information concerning dependents
"RTN","DGDEP3",33,0)
 ;
"RTN","DGDEP3",34,0)
 S DGX="",DGX=$$SETSTR^VALM1(CNT,DGX,3,3)
"RTN","DGDEP3",35,0)
 I $G(DGMTI),INCPER,($P($G(^DGMT(408.22,+INCPER,"MT")),U)=DGMTI) S DGX=$$SETSTR^VALM1("*",DGX,5,1)
"RTN","DGDEP3",36,0)
 S DGX=$$SETSTR^VALM1(NAME,DGX,9,22)
"RTN","DGDEP3",37,0)
 S DGX=$$SETSTR^VALM1($P($G(^DG(408.11,RELATE,0)),U),DGX,32,30)
"RTN","DGDEP3",38,0)
 S DGX=$$SETSTR^VALM1($S($P(ACT,U,2)=1:"*",1:""),DGX,65,1)
"RTN","DGDEP3",39,0)
 S DGX=$$SETSTR^VALM1($S(+$$ADDCHK(INCPER)=1:"*",1:""),DGX,73,1)
"RTN","DGDEP3",40,0)
 D SET^DGDEP(DGX)
"RTN","DGDEP3",41,0)
 ;
"RTN","DGDEP3",42,0)
 Q:'$G(DGMTI)!('$P($G(^DG(408.11,RELATE,0)),U,4))
"RTN","DGDEP3",43,0)
 S INCPER=^DGMT(408.22,INCPER,0)
"RTN","DGDEP3",44,0)
 S DGX="",DGX=$$SETSTR^VALM1("Incapable of Self-support: ",DGX,10,27)
"RTN","DGDEP3",45,0)
 S DGX=$$SETSTR^VALM1($S($P(INCPER,U,9):"Yes",$P(INCPER,U,9)="":"Unanswered",1:"No"),DGX,38,10)
"RTN","DGDEP3",46,0)
 D SET^DGDEP(DGX)
"RTN","DGDEP3",47,0)
 ;
"RTN","DGDEP3",48,0)
 ;* DG*5.3*624
"RTN","DGDEP3",49,0)
 S DGX="",DGX=$$SETSTR^VALM1("Child 18 to 23. Attended School: ",DGX,4,33)
"RTN","DGDEP3",50,0)
 S DGX=$$SETSTR^VALM1($S($P(INCPER,U,18):"Yes",$P(INCPER,U,18)="":"Unanswered",1:"No"),DGX,38,10)
"RTN","DGDEP3",51,0)
 D SET^DGDEP(DGX)
"RTN","DGDEP3",52,0)
 ;
"RTN","DGDEP3",53,0)
 S DGX="",DGX=$$SETSTR^VALM1("Child lived with you: ",DGX,15,22)
"RTN","DGDEP3",54,0)
 S DGX=$$SETSTR^VALM1($S($P(INCPER,U,6):"Yes",$P(INCPER,U,6)="":"Unanswered",1:"No"),DGX,38,10)
"RTN","DGDEP3",55,0)
 D SET^DGDEP(DGX)
"RTN","DGDEP3",56,0)
 ;
"RTN","DGDEP3",57,0)
 S DGX="",DGX=$$SETSTR^VALM1("Child Support: ",DGX,22,15)
"RTN","DGDEP3",58,0)
 S DGX=$$SETSTR^VALM1($S($P(INCPER,U,6)=1:"N/A",$P(INCPER,U,10)=1:"Yes",$P(INCPER,U,10)="":"Unanswered",1:"No"),DGX,38,10)
"RTN","DGDEP3",59,0)
 D SET^DGDEP(DGX)
"RTN","DGDEP3",60,0)
 ;
"RTN","DGDEP3",61,0)
 ;* DG*5.3*624
"RTN","DGDEP3",62,0)
 S DGX="",DGX=$$SETSTR^VALM1("Amount contributed: ",DGX,17,20)
"RTN","DGDEP3",63,0)
 S DGX=$$SETSTR^VALM1($S($P(INCPER,U,10)'=1:"N/A",($P(INCPER,U,19)'="0")&($P(INCPER,U,19)'=""):$P(INCPER,U,19),$P(INCPER,U,19)="":"Unanswered",1:"0"),DGX,38,10)
"RTN","DGDEP3",64,0)
 D SET^DGDEP(DGX)
"RTN","DGDEP3",65,0)
 ;
"RTN","DGDEP3",66,0)
 S DGX="",DGX=$$SETSTR^VALM1("Child Has Income: ",DGX,19,18)
"RTN","DGDEP3",67,0)
 S DGX=$$SETSTR^VALM1($S($P(INCPER,U,11)=1:"Yes",$P(INCPER,U,11)="":"Unanswered",1:"No"),DGX,38,10)
"RTN","DGDEP3",68,0)
 D SET^DGDEP(DGX)
"RTN","DGDEP3",69,0)
 ;
"RTN","DGDEP3",70,0)
 S DGX="",DGX=$$SETSTR^VALM1("Income Available: ",DGX,19,18)
"RTN","DGDEP3",71,0)
 S DGX=$$SETSTR^VALM1($S($P(INCPER,U,11)=0:"N/A",$P(INCPER,U,12)=1:"Yes",$P(INCPER,U,12)="":"Unanswered",1:"No"),DGX,38,10)
"RTN","DGDEP3",72,0)
 D SET^DGDEP(DGX)
"RTN","DGDEP3",73,0)
CHILDQ Q
"RTN","DGDEP3",74,0)
 ;
"RTN","DGDEP3",75,0)
ADDCHK(INCPER) ; Indicates existence of any dependent address
"RTN","DGDEP3",76,0)
 ; Input:
"RTN","DGDEP3",77,0)
 ;      INCPER - Pointer to dep. entry in Income Relation file (408.22)
"RTN","DGDEP3",78,0)
 ;
"RTN","DGDEP3",79,0)
 ; Output: 
"RTN","DGDEP3",80,0)
 ;   both address and phone^address^phone
"RTN","DGDEP3",81,0)
 ;      KEY:
"RTN","DGDEP3",82,0)
 ;        0 - No data exists for the dependent in 408.13
"RTN","DGDEP3",83,0)
 ;        1 - Data exists for the dependent in 408.13
"RTN","DGDEP3",84,0)
 ;
"RTN","DGDEP3",85,0)
 ;    1^1^1 - Address and Phone data exist for dependent
"RTN","DGDEP3",86,0)
 ;    0^1^0 - Address only exists for dependent
"RTN","DGDEP3",87,0)
 ;    0^0^1 - Phone only exists for dependent
"RTN","DGDEP3",88,0)
 ;    0^0^0 - Neither Phone nor Address data exists for dependent
"RTN","DGDEP3",89,0)
 ;
"RTN","DGDEP3",90,0)
 N ADDCKVAL,INDAIIEN,PRIEN,IPIEN
"RTN","DGDEP3",91,0)
 S ADDCKVAL="0^0^0"
"RTN","DGDEP3",92,0)
 S INDAIIEN=$P($G(^DGMT(408.22,INCPER,0)),"^",2)
"RTN","DGDEP3",93,0)
 S PRIEN=$P($G(^DGMT(408.21,INDAIIEN,0)),"^",2)
"RTN","DGDEP3",94,0)
 S IPIEN=$P($G(^DGPR(408.12,PRIEN,0)),"^",3)
"RTN","DGDEP3",95,0)
 I IPIEN["DGPR(408.13" DO
"RTN","DGDEP3",96,0)
 . S IPIEN=$P(IPIEN,";",1)
"RTN","DGDEP3",97,0)
 . I $P($G(^DGPR(408.13,IPIEN,1)),"^",2)]"" S $P(ADDCKVAL,U,1,2)="1^1"
"RTN","DGDEP3",98,0)
 . I $P($G(^DGPR(408.13,IPIEN,1)),"^",3)]"" S $P(ADDCKVAL,U,1,2)="1^1"
"RTN","DGDEP3",99,0)
 . I $P($G(^DGPR(408.13,IPIEN,1)),"^",4)]"" S $P(ADDCKVAL,U,1,2)="1^1"
"RTN","DGDEP3",100,0)
 . I $P($G(^DGPR(408.13,IPIEN,1)),"^",5)]"" S $P(ADDCKVAL,U,1,2)="1^1"
"RTN","DGDEP3",101,0)
 . I $P($G(^DGPR(408.13,IPIEN,1)),"^",6)]"" S $P(ADDCKVAL,U,1,2)="1^1"
"RTN","DGDEP3",102,0)
 . I $P($G(^DGPR(408.13,IPIEN,1)),"^",7)]"" S $P(ADDCKVAL,U,1,2)="1^1"
"RTN","DGDEP3",103,0)
 . I $P($G(^DGPR(408.13,IPIEN,1)),"^",8)]"" S $P(ADDCKVAL,U,3)="1"
"RTN","DGDEP3",104,0)
 Q ADDCKVAL
"RTN","DGEN")
0^12^B67215817
"RTN","DGEN",1,0)
DGEN ;ALB/RMO/CJM - Patient Enrollment Option; 11/17/00 12:12pm ; 12/6/00 5:32pm
"RTN","DGEN",2,0)
 ;;5.3;Registration;**121,122,165,147,232,314,624**;Aug 13,1993
"RTN","DGEN",3,0)
 ;
"RTN","DGEN",4,0)
EN ;Entry point for stand-alone enrollment option
"RTN","DGEN",5,0)
 ; Input  -- None
"RTN","DGEN",6,0)
 ; Output -- None
"RTN","DGEN",7,0)
 N DFN
"RTN","DGEN",8,0)
 ;
"RTN","DGEN",9,0)
 ;Get Patient file (#2) IEN - DFN
"RTN","DGEN",10,0)
 D GETPAT^DGRPTU(,,.DFN,) G ENQ:DFN<0
"RTN","DGEN",11,0)
 ;
"RTN","DGEN",12,0)
 ;Load patient enrollment screen
"RTN","DGEN",13,0)
 D EN^DGENL(DFN)
"RTN","DGEN",14,0)
ENQ Q
"RTN","DGEN",15,0)
 ;
"RTN","DGEN",16,0)
EN1(DFN) ;Entry point for enrollment from registration and disposition
"RTN","DGEN",17,0)
 ; Input  -- DFN      Patient IEN
"RTN","DGEN",18,0)
 ; Output -- None
"RTN","DGEN",19,0)
 N DGENOUT
"RTN","DGEN",20,0)
 ;
"RTN","DGEN",21,0)
 ;Check if patient should be asked to enroll
"RTN","DGEN",22,0)
 I $$CHK(DFN) D
"RTN","DGEN",23,0)
 . ;Enroll patient
"RTN","DGEN",24,0)
 . I $$ENRPAT(DFN,.DGENOUT)
"RTN","DGEN",25,0)
 ;
"RTN","DGEN",26,0)
 ;If user did not timeout or '^' and
"RTN","DGEN",27,0)
 ;patient is an eligible veteran or has an enrollment status
"RTN","DGEN",28,0)
 I '$G(DGENOUT),($$VET^DGENPTA(DFN)!($$STATUS^DGENA(DFN))) D
"RTN","DGEN",29,0)
 . ;Display enrollment
"RTN","DGEN",30,0)
 . D DISPLAY^DGENU(DFN)
"RTN","DGEN",31,0)
EN1Q Q
"RTN","DGEN",32,0)
 ;
"RTN","DGEN",33,0)
CHK(DFN) ;Check if patient should be asked to enroll
"RTN","DGEN",34,0)
 ; Input  -- DFN      Patient IEN
"RTN","DGEN",35,0)
 ; Output -- 1=Yes and 0=No
"RTN","DGEN",36,0)
 N Y,STATUS
"RTN","DGEN",37,0)
 S Y=1
"RTN","DGEN",38,0)
 ;Is patient an eligible veteran
"RTN","DGEN",39,0)
 S Y=$$VET^DGENPTA(DFN)
"RTN","DGEN",40,0)
 ;
"RTN","DGEN",41,0)
 ;Is patient already enrolled or pending enrollment
"RTN","DGEN",42,0)
 S STATUS=$$STATUS^DGENA(DFN)
"RTN","DGEN",43,0)
 ; Purple Heart added status 21
"RTN","DGEN",44,0)
 I Y,(STATUS=9)!(STATUS=1)!(STATUS=2)!(STATUS=14)!(STATUS=15)!(STATUS=16)!(STATUS=17)!(STATUS=18)!(STATUS=21) S Y=0
"RTN","DGEN",45,0)
 Q +$G(Y)
"RTN","DGEN",46,0)
 ;
"RTN","DGEN",47,0)
ENRPAT(DFN,DGENOUT) ;Enroll patient
"RTN","DGEN",48,0)
 ; Input  -- DFN      Patient IEN
"RTN","DGEN",49,0)
 ; Output -- 1=Successful and 0=Failure
"RTN","DGEN",50,0)
 ;           DGENOUT  1=Timeout or up-arrow
"RTN","DGEN",51,0)
 N DGOKF
"RTN","DGEN",52,0)
 ;Ask patient if s/he would like to enroll
"RTN","DGEN",53,0)
 I $$ASK("enroll",.DGENOUT) D
"RTN","DGEN",54,0)
 . ;If 'Yes' enroll patient
"RTN","DGEN",55,0)
 . S DGOKF=$$ENROLL(DFN)
"RTN","DGEN",56,0)
 ELSE  D
"RTN","DGEN",57,0)
 . ;Quit if timeout or '^'
"RTN","DGEN",58,0)
 . Q:$G(DGENOUT)
"RTN","DGEN",59,0)
 . ;Otherwise patient declined enrollment
"RTN","DGEN",60,0)
 . ;Cancel/decline functionality disabled by DG*5.3*232
"RTN","DGEN",61,0)
 . ;S DGOKF=$$DECLINE(DFN,DT)
"RTN","DGEN",62,0)
 . S DGOKF=0
"RTN","DGEN",63,0)
 . ;* Prompt for requested appt. (DG*5.3*624)
"RTN","DGEN",64,0)
 . I $P($G(^DPT(DFN,1010.15)),"^",9)="" DO
"RTN","DGEN",65,0)
 . . N DGSXS,DGAPPTAN
"RTN","DGEN",66,0)
 . . S DGSXS=$$PROMPT^DGENU(2,1010.159,1,.DGAPPTAN,"",1)
"RTN","DGEN",67,0)
 . . I DGSXS DO
"RTN","DGEN",68,0)
 . . . N DA,DR,DIE
"RTN","DGEN",69,0)
 . . . S DA=DFN
"RTN","DGEN",70,0)
 . . . S DIE="^DPT("
"RTN","DGEN",71,0)
 . . . S DR="1010.159////^S X=DGAPPTAN"
"RTN","DGEN",72,0)
 . . . D ^DIE
"RTN","DGEN",73,0)
 . . . K DA,DR,DIE
"RTN","DGEN",74,0)
 . . . ;*Set Appointment Request Date to current date
"RTN","DGEN",75,0)
 . . . N DA,DR,DIE
"RTN","DGEN",76,0)
 . . . S DIE="^DPT("
"RTN","DGEN",77,0)
 . . . S DA=DFN
"RTN","DGEN",78,0)
 . . . S DR="1010.1511////^S X=DT"
"RTN","DGEN",79,0)
 . . . D ^DIE
"RTN","DGEN",80,0)
 . . . K DA,DR,DIE
"RTN","DGEN",81,0)
ENRPATQ Q +$G(DGOKF)
"RTN","DGEN",82,0)
 ;
"RTN","DGEN",83,0)
ASK(ACTION,DGENOUT) ;Ask patient if s/he would like to enroll or cease enrollment
"RTN","DGEN",84,0)
 ; Input  -- ACTION   Action description
"RTN","DGEN",85,0)
 ; Output -- 1=Yes and 0=No
"RTN","DGEN",86,0)
 ;           DGENOUT  1=Timeout or up-arrow
"RTN","DGEN",87,0)
 N DIR,DTOUT,DUOUT,Y
"RTN","DGEN",88,0)
 S DIR("A")="Do you wish to "_ACTION_" in the VA Patient Enrollment System"
"RTN","DGEN",89,0)
 S DIR("B")="YES",DIR(0)="Y"
"RTN","DGEN",90,0)
 W ! D ^DIR
"RTN","DGEN",91,0)
 I $D(DTOUT)!($D(DUOUT)) S DGENOUT=1
"RTN","DGEN",92,0)
 Q +$G(Y)
"RTN","DGEN",93,0)
 ;
"RTN","DGEN",94,0)
ENROLL(DFN) ;Create new local unverified enrollment
"RTN","DGEN",95,0)
 ; Input  -- DFN      Patient IEN
"RTN","DGEN",96,0)
 ; Output -- 1=Successful and 0=Failure
"RTN","DGEN",97,0)
 N DGENR,DGOKF,DGREQF,APPDATE
"RTN","DGEN",98,0)
 ;Lock enrollment record
"RTN","DGEN",99,0)
 I '$$LOCK^DGENA1(DFN) D  G ENROLLQ
"RTN","DGEN",100,0)
 . W !,">>> Another user is editing, try later ..."
"RTN","DGEN",101,0)
 . D PAUSE^VALM1
"RTN","DGEN",102,0)
 ;
"RTN","DGEN",103,0)
 ;now that the enrollment history is locked, need to check again whether or not patient may be enrolled (query reply may have been received)
"RTN","DGEN",104,0)
 G:'$$CHK^DGEN(DFN) ENROLLQ
"RTN","DGEN",105,0)
 ;
"RTN","DGEN",106,0)
 ;Ask Application Date
"RTN","DGEN",107,0)
 W !
"RTN","DGEN",108,0)
 I $$PROMPT^DGENU(27.11,.01,DT,.APPDATE) D
"RTN","DGEN",109,0)
 . ;Does patient require a Means Test?
"RTN","DGEN",110,0)
 . D EN^DGMTR
"RTN","DGEN",111,0)
 . ;Create local enrollment array
"RTN","DGEN",112,0)
 . I $$CREATE^DGENA6(DFN,APPDATE,,,,.DGENR) D
"RTN","DGEN",113,0)
 . . ;Store local enrollment as current
"RTN","DGEN",114,0)
 . . I $$STORECUR^DGENA1(.DGENR) D
"RTN","DGEN",115,0)
 . . . S DGOKF=1
"RTN","DGEN",116,0)
 . . . ;Ask preferred facility
"RTN","DGEN",117,0)
 . . . D PREFER^DGENPT(DFN)
"RTN","DGEN",118,0)
 . . . ;If patient's means test status is required, send bulletin
"RTN","DGEN",119,0)
 . . . I $$MTREQ(DFN) D MTBULL(DFN,.DGENR)
"RTN","DGEN",120,0)
 I $P($G(^DPT(DFN,1010.15)),"^",11)="" DO
"RTN","DGEN",121,0)
 . N DGSXS,DGAPPTAN,DGDFLT
"RTN","DGEN",122,0)
 . S DGDFLT=$P($G(^DPT(DFN,1010.15)),"^",9)
"RTN","DGEN",123,0)
 . S:DGDFLT="" DGDFLT=1
"RTN","DGEN",124,0)
 . S DGSXS=$$PROMPT^DGENU(2,1010.159,DGDFLT,.DGAPPTAN,"",1)
"RTN","DGEN",125,0)
 . I DGSXS DO
"RTN","DGEN",126,0)
 . . N DA,DR,DIE
"RTN","DGEN",127,0)
 . . S DA=DFN
"RTN","DGEN",128,0)
 . . S DIE="^DPT("
"RTN","DGEN",129,0)
 . . S DR="1010.159////^S X=DGAPPTAN"
"RTN","DGEN",130,0)
 . . D ^DIE
"RTN","DGEN",131,0)
 . . K DA,DR,DIE
"RTN","DGEN",132,0)
 . . ;*If patient answered NO to "Do you want an appt" question
"RTN","DGEN",133,0)
 . . I $P($G(^DPT(DFN,1010.15)),"^",9)=0 DO
"RTN","DGEN",134,0)
 . . . N DA,DR,DIE
"RTN","DGEN",135,0)
 . . . S DIE="^DPT("
"RTN","DGEN",136,0)
 . . . S DA=DFN
"RTN","DGEN",137,0)
 . . . S DR="1010.1511////^S X=DT"
"RTN","DGEN",138,0)
 . . . D ^DIE
"RTN","DGEN",139,0)
 . . . K DA,DR,DIE
"RTN","DGEN",140,0)
 . . ;*If patient answered YES to "Do you want an appt" question
"RTN","DGEN",141,0)
 . . I $P($G(^DPT(DFN,1010.15)),"^",9)=1 DO
"RTN","DGEN",142,0)
 . . . N DA,DR,DIE
"RTN","DGEN",143,0)
 . . . S DIE="^DPT("
"RTN","DGEN",144,0)
 . . . S DA=DFN
"RTN","DGEN",145,0)
 . . . S DR="1010.1511////^S X=APPDATE"
"RTN","DGEN",146,0)
 . . . D ^DIE
"RTN","DGEN",147,0)
 . . . K DA,DR,DIE
"RTN","DGEN",148,0)
ENROLLQ D UNLOCK^DGENA1(DFN)
"RTN","DGEN",149,0)
 Q +$G(DGOKF)
"RTN","DGEN",150,0)
 ;
"RTN","DGEN",151,0)
CANCEL(DFN,DGENR,EFFDATE) ;Cancel current enrollment
"RTN","DGEN",152,0)
 ; Input
"RTN","DGEN",153,0)
 ;    DFN      Patient IEN
"RTN","DGEN",154,0)
 ;    DGENR    Array containing current enrollment (pass by reference)
"RTN","DGEN",155,0)
 ;    EFFDATE  Enrollment Effective Date Of Change  (optional)
"RTN","DGEN",156,0)
 ; Output
"RTN","DGEN",157,0)
 ;   Function Return Value is 1 if Successful and 0 on Failure
"RTN","DGEN",158,0)
 ;
"RTN","DGEN",159,0)
 N DGENR2,DGOKF,REASON,REMARKS,BEGIN,END,ERRMSG
"RTN","DGEN",160,0)
 ;Lock enrollment record
"RTN","DGEN",161,0)
 I '$$LOCK^DGENA1(DFN) D  G CANCELQ
"RTN","DGEN",162,0)
 .W !,">>> Another user is editing, try later ..."
"RTN","DGEN",163,0)
 .D PAUSE^VALM1
"RTN","DGEN",164,0)
 W !
"RTN","DGEN",165,0)
 ;Ask effective date of change for cessation
"RTN","DGEN",166,0)
 I '$G(EFFDATE) D  G:'EFFDATE CANCELQ
"RTN","DGEN",167,0)
 .N DIR
"RTN","DGEN",168,0)
 .S BEGIN=$S(DGENR("DATE"):DGENR("DATE"),1:DGENR("APP"))
"RTN","DGEN",169,0)
 .S END=DGENR("END")
"RTN","DGEN",170,0)
 .S DIR(0)="D^::AEX"
"RTN","DGEN",171,0)
 .S DIR("A")="Effective Date of Cancellation"
"RTN","DGEN",172,0)
 .S DIR("B")=$$VIEWDATE(DT)
"RTN","DGEN",173,0)
ASKDATE .W !,"Please enter the date to cease enrollment, no earlier than "_$$VIEWDATE(BEGIN)
"RTN","DGEN",174,0)
 .I END W !,"and no later than "_$$VIEWDATE(END)_"."
"RTN","DGEN",175,0)
 .D ^DIR
"RTN","DGEN",176,0)
 .I $D(DIRUT)!('Y) S EFFDATE="" Q
"RTN","DGEN",177,0)
 .E  S EFFDATE=Y I (EFFDATE<BEGIN)!(END&(END<EFFDATE)) G ASKDATE
"RTN","DGEN",178,0)
 .;
"RTN","DGEN",179,0)
 ;Ask reason canceled/declined enrollment
"RTN","DGEN",180,0)
 I '$$PROMPT^DGENU(27.11,.05,,.REASON,1) G CANCELQ
"RTN","DGEN",181,0)
 ;If reason is 'Other', ask for remarks 
"RTN","DGEN",182,0)
 I REASON=4,'$$PROMPT^DGENU(27.11,25,,.REMARKS,1) G CANCELQ
"RTN","DGEN",183,0)
 ;Create local enrollment array
"RTN","DGEN",184,0)
 I $$CREATE^DGENA6(DFN,DGENR("APP"),EFFDATE,REASON,$G(REMARKS),.DGENR2,DGENR("DATE"),EFFDATE) D
"RTN","DGEN",185,0)
 .;Store local enrollment as current
"RTN","DGEN",186,0)
 .I $$STORECUR^DGENA1(.DGENR2,,.ERRMSG) D
"RTN","DGEN",187,0)
 ..S DGOKF=1
"RTN","DGEN",188,0)
 .E  D
"RTN","DGEN",189,0)
 ..W !,$G(ERRMSG)
"RTN","DGEN",190,0)
 ;
"RTN","DGEN",191,0)
 D UNLOCK^DGENA1(DFN)
"RTN","DGEN",192,0)
CANCELQ Q +$G(DGOKF)
"RTN","DGEN",193,0)
 ;
"RTN","DGEN",194,0)
DECLINE(DFN,APPDATE) ;Create Declined enrollment
"RTN","DGEN",195,0)
 ; Input  -- DFN      Patient IEN
"RTN","DGEN",196,0)
 ;           APPDATE  Application date  (optional)
"RTN","DGEN",197,0)
 ; Output -- 1=Successful and 0=Failure
"RTN","DGEN",198,0)
 N DGENR,DGOKF,REASON,REMARKS
"RTN","DGEN",199,0)
 ;Lock enrollment record
"RTN","DGEN",200,0)
 I '$$LOCK^DGENA1(DFN) D  G DECLINEQ
"RTN","DGEN",201,0)
 . W !,">>> Another user is editing, try later ..."
"RTN","DGEN",202,0)
 . D PAUSE^VALM1
"RTN","DGEN",203,0)
 ;Ask enrollment date
"RTN","DGEN",204,0)
 W !
"RTN","DGEN",205,0)
 I '$G(APPDATE),'$$PROMPT^DGENU(27.11,.01,DT,.APPDATE) G DECLINEQ
"RTN","DGEN",206,0)
 ;Ask reason declined enrollment
"RTN","DGEN",207,0)
 I '$$PROMPT^DGENU(27.11,.05,,.REASON,1) G DECLINEQ
"RTN","DGEN",208,0)
 ;If reason is 'Other', ask for remarks 
"RTN","DGEN",209,0)
 I REASON=4,'$$PROMPT^DGENU(27.11,25,,.REMARKS,1) G DECLINEQ
"RTN","DGEN",210,0)
 ;Create local enrollment array
"RTN","DGEN",211,0)
 I $$CREATE^DGENA6(DFN,APPDATE,DT,REASON,$G(REMARKS),.DGENR) D
"RTN","DGEN",212,0)
 . ;Store local enrollment as current
"RTN","DGEN",213,0)
 . I $$STORECUR^DGENA1(.DGENR) D
"RTN","DGEN",214,0)
 . . S DGOKF=1
"RTN","DGEN",215,0)
 . . ;Ask preferred facility
"RTN","DGEN",216,0)
 . . D PREFER^DGENPT(DFN)
"RTN","DGEN",217,0)
 D UNLOCK^DGENA1(DFN)
"RTN","DGEN",218,0)
DECLINEQ ;
"RTN","DGEN",219,0)
 Q +$G(DGOKF)
"RTN","DGEN",220,0)
 ;
"RTN","DGEN",221,0)
MTBULL(DFN,DGENR) ;Create/Send means test 'REQUIRED' bulletin for PATIENT ENROLLMENT
"RTN","DGEN",222,0)
 ;
"RTN","DGEN",223,0)
 ;  Input:
"RTN","DGEN",224,0)
 ;         DFN - patient IEN
"RTN","DGEN",225,0)
 ;       DGENR - this local array represents the PATIENT ENROLLMENT and
"RTN","DGEN",226,0)
 ;               should be passed by reference
"RTN","DGEN",227,0)
 ;
"RTN","DGEN",228,0)
 ; Output: None
"RTN","DGEN",229,0)
 ;
"RTN","DGEN",230,0)
 N DGBULL,DGLINE,DGMGRP,DGNAME,DIFROM,VA,VAERR,XMTEXT,XMSUB,XMDUZ
"RTN","DGEN",231,0)
 ;
"RTN","DGEN",232,0)
 ; get Means Test 'Required' mail group
"RTN","DGEN",233,0)
 S DGMGRP=$P($G(^DG(43,1,"NOT")),"^",13)
"RTN","DGEN",234,0)
 ;
"RTN","DGEN",235,0)
 ; if mail group not defined, exit
"RTN","DGEN",236,0)
 I 'DGMGRP G MTBULLQ
"RTN","DGEN",237,0)
 ;
"RTN","DGEN",238,0)
 ; set up XMY array
"RTN","DGEN",239,0)
 D XMY^DGMTUTL(DGMGRP,0,1)
"RTN","DGEN",240,0)
 ;
"RTN","DGEN",241,0)
 ; obtain patient identifier
"RTN","DGEN",242,0)
 D PID^VADPT6
"RTN","DGEN",243,0)
 ;
"RTN","DGEN",244,0)
 ; patient name
"RTN","DGEN",245,0)
 S DGNAME=$P($G(^DPT(DFN,0)),"^")
"RTN","DGEN",246,0)
 ;
"RTN","DGEN",247,0)
 ; local array containing msg text
"RTN","DGEN",248,0)
 S XMTEXT="DGBULL("
"RTN","DGEN",249,0)
 ;
"RTN","DGEN",250,0)
 ; - msg subject
"RTN","DGEN",251,0)
 S XMSUB=$E("Patient: "_DGNAME,1,30)_" ("_VA("BID")_") "_"Means Test Required"
"RTN","DGEN",252,0)
 ;
"RTN","DGEN",253,0)
 ; - insert lines of text into message
"RTN","DGEN",254,0)
 S DGLINE=0
"RTN","DGEN",255,0)
 D LINE("The following patient is enrolled in the VA Patient Enrollment",.DGLINE)
"RTN","DGEN",256,0)
 D LINE("System and 'REQUIRES' a means test.",.DGLINE)
"RTN","DGEN",257,0)
 D LINE("",.DGLINE)
"RTN","DGEN",258,0)
 D LINE("        Patient Name: "_DGNAME,.DGLINE)
"RTN","DGEN",259,0)
 D LINE("          Patient ID: "_VA("PID"),.DGLINE)
"RTN","DGEN",260,0)
 D LINE("",.DGLINE)
"RTN","DGEN",261,0)
 D LINE("     Enrollment Date: "_$$EXT^DGENU("DATE",DGENR("DATE")),.DGLINE)
"RTN","DGEN",262,0)
 D LINE("   Enrollment Status: "_$$EXT^DGENU("STATUS",DGENR("STATUS")),.DGLINE)
"RTN","DGEN",263,0)
 D LINE("          Entered By: "_$$EXT^DGENU("USER",DGENR("USER")),.DGLINE)
"RTN","DGEN",264,0)
 D LINE("   Date/Time Entered: "_$$EXT^DGENU("DATETIME",DGENR("DATETIME")),.DGLINE)
"RTN","DGEN",265,0)
 D ^XMD
"RTN","DGEN",266,0)
 ;
"RTN","DGEN",267,0)
MTBULLQ Q
"RTN","DGEN",268,0)
 ;
"RTN","DGEN",269,0)
LINE(DGTEXT,DGLINE) ;Add lines of text to mail message
"RTN","DGEN",270,0)
 ;
"RTN","DGEN",271,0)
 ;  Input:
"RTN","DGEN",272,0)
 ;    DGTEXT - as line of text to be inserted into mail message
"RTN","DGEN",273,0)
 ;    DGLINE - as number of lines in message, passed by reference
"RTN","DGEN",274,0)
 ;
"RTN","DGEN",275,0)
 ; Output:
"RTN","DGEN",276,0)
 ;    DGBULL - as local array containing message text
"RTN","DGEN",277,0)
 ;
"RTN","DGEN",278,0)
 S DGLINE=DGLINE+1
"RTN","DGEN",279,0)
 S DGBULL(DGLINE)=DGTEXT
"RTN","DGEN",280,0)
 Q
"RTN","DGEN",281,0)
 ;
"RTN","DGEN",282,0)
MTREQ(DFN) ; --
"RTN","DGEN",283,0)
 ;Determine if Means Test (required) bulletin should be sent for patient.
"RTN","DGEN",284,0)
 ;
"RTN","DGEN",285,0)
 ;  Input:
"RTN","DGEN",286,0)
 ;        DFN - patient IEN
"RTN","DGEN",287,0)
 ;
"RTN","DGEN",288,0)
 ; Output:
"RTN","DGEN",289,0)
 ;        1=Successful and 0=Failure
"RTN","DGEN",290,0)
 ;
"RTN","DGEN",291,0)
 N DGMTNODE,DGMTREQ
"RTN","DGEN",292,0)
 ;
"RTN","DGEN",293,0)
 ;Last means test for patient
"RTN","DGEN",294,0)
 S DGMTNODE=$$LST^DGMTU(DFN)
"RTN","DGEN",295,0)
 ;
"RTN","DGEN",296,0)
 ;If scheduling bulletin already sent, exit
"RTN","DGEN",297,0)
 I $P($G(^DGMT(408.31,+DGMTNODE,"BUL")),"^")=DT G MTREQQ
"RTN","DGEN",298,0)
 ;
"RTN","DGEN",299,0)
 ;If patient means test status is 'REQUIRED'
"RTN","DGEN",300,0)
 I $P(DGMTNODE,"^",4)="R" D
"RTN","DGEN",301,0)
 . ;set flag (send bulletin)
"RTN","DGEN",302,0)
 . S DGMTREQ=1
"RTN","DGEN",303,0)
 ;
"RTN","DGEN",304,0)
MTREQQ Q +$G(DGMTREQ)
"RTN","DGEN",305,0)
 ;
"RTN","DGEN",306,0)
VIEWDATE(FMDATE) ;
"RTN","DGEN",307,0)
 ;This function changes a FM date to its external representation
"RTN","DGEN",308,0)
 N Y
"RTN","DGEN",309,0)
 S Y=$G(FMDATE)
"RTN","DGEN",310,0)
 D DD^%DT
"RTN","DGEN",311,0)
 Q Y
"RTN","DGEN1")
0^35^B16711540
"RTN","DGEN1",1,0)
DGEN1 ;ALB/RMO - Patient Enrollment Protocols;16 JUN 1997 01:30 pm
"RTN","DGEN1",2,0)
 ;;5.3;Registration;**121,147,624**;08/13/93
"RTN","DGEN1",3,0)
 ;
"RTN","DGEN1",4,0)
EP ;Entry point for DGEN ENROLL PATIENT protocol 
"RTN","DGEN1",5,0)
 ; Input  -- DFN      Patient IEN
"RTN","DGEN1",6,0)
 ; Output -- VALMBCK  R   =Refresh screen
"RTN","DGEN1",7,0)
 ;
"RTN","DGEN1",8,0)
 ;send an enrollment/eligibility query
"RTN","DGEN1",9,0)
 I $$SEND^DGENQRY1(DFN) W !!,"Enrollment/Eligibility Query sent...",!!
"RTN","DGEN1",10,0)
 ;
"RTN","DGEN1",11,0)
 N DGENOUT
"RTN","DGEN1",12,0)
 S VALMBCK=""
"RTN","DGEN1",13,0)
 D FULL^VALM1
"RTN","DGEN1",14,0)
 ;
"RTN","DGEN1",15,0)
 ;Enroll patient
"RTN","DGEN1",16,0)
 I '$$ENRPAT^DGEN(DFN,.DGENOUT) D
"RTN","DGEN1",17,0)
 . I '$G(DGENOUT) D
"RTN","DGEN1",18,0)
 . . W !!,">>> Patient enrollment record was not created."
"RTN","DGEN1",19,0)
 . . D PAUSE^VALM1
"RTN","DGEN1",20,0)
 ELSE  D
"RTN","DGEN1",21,0)
 . ;Re-build enrollment screen
"RTN","DGEN1",22,0)
 . D BLD^DGENL
"RTN","DGEN1",23,0)
 D MESSAGE^DGENL(DFN)
"RTN","DGEN1",24,0)
 S VALMBCK="R"
"RTN","DGEN1",25,0)
 Q
"RTN","DGEN1",26,0)
 ;
"RTN","DGEN1",27,0)
CE ;Entry point for DGEN CEASE ENROLLMENT protocol 
"RTN","DGEN1",28,0)
 ; Input  -- DFN      Patient IEN
"RTN","DGEN1",29,0)
 ; Output -- VALMBCK  R   =Refresh screen
"RTN","DGEN1",30,0)
 N DGENOUT,DGENR,DGENRIEN
"RTN","DGEN1",31,0)
 S VALMBCK=""
"RTN","DGEN1",32,0)
 D FULL^VALM1
"RTN","DGEN1",33,0)
 ;
"RTN","DGEN1",34,0)
 ;Ask patient if s/he would like to cease enrollment
"RTN","DGEN1",35,0)
 I $$ASK^DGEN("cease enrollment",.DGENOUT) D
"RTN","DGEN1",36,0)
 . ;If 'Yes' cancel current enrollment
"RTN","DGEN1",37,0)
 . ;Find current enrollment
"RTN","DGEN1",38,0)
 . S DGENRIEN=$$FINDCUR^DGENA(DFN) Q:'DGENRIEN
"RTN","DGEN1",39,0)
 . ;Get current enrollment array
"RTN","DGEN1",40,0)
 . I $$GET^DGENA(DGENRIEN,.DGENR) D
"RTN","DGEN1",41,0)
 . . ;Cancel current enrollment
"RTN","DGEN1",42,0)
 . . I '$$CANCEL^DGEN(DFN,.DGENR) D
"RTN","DGEN1",43,0)
 . . . W !!,">>> Patient's enrollment was not ceased."
"RTN","DGEN1",44,0)
 . . . D PAUSE^VALM1
"RTN","DGEN1",45,0)
 . . ELSE  D
"RTN","DGEN1",46,0)
 . . . ;Re-build enrollment screen
"RTN","DGEN1",47,0)
 . . . D BLD^DGENL
"RTN","DGEN1",48,0)
 D MESSAGE^DGENL(DFN)
"RTN","DGEN1",49,0)
 S VALMBCK="R"
"RTN","DGEN1",50,0)
 Q
"RTN","DGEN1",51,0)
 ;
"RTN","DGEN1",52,0)
EH ;Entry point for DGEN EXPAND HISTORY protocol
"RTN","DGEN1",53,0)
 ; Input  -- DFN      Patient IEN
"RTN","DGEN1",54,0)
 ; Output -- VALMBCK  R   =Refresh screen
"RTN","DGEN1",55,0)
 N DGI,DGSELY
"RTN","DGEN1",56,0)
 S VALMBCK=""
"RTN","DGEN1",57,0)
 ;
"RTN","DGEN1",58,0)
 ;Select entries to expand
"RTN","DGEN1",59,0)
 D EN^DGENLR(XQORNOD(0),"EH",.DGSELY)
"RTN","DGEN1",60,0)
 I $D(DGSELY("^"))!($D(DGSELY("ERR"))) G EHQ
"RTN","DGEN1",61,0)
 D FULL^VALM1
"RTN","DGEN1",62,0)
 ;
"RTN","DGEN1",63,0)
 ;Expand history for selected entries
"RTN","DGEN1",64,0)
 S DGI=0
"RTN","DGEN1",65,0)
 ;Loop through selection
"RTN","DGEN1",66,0)
 F  S DGI=$O(DGSELY(DGI)) Q:'DGI  D
"RTN","DGEN1",67,0)
 . N DGLINE,DGENRIEN
"RTN","DGEN1",68,0)
 . S DGLINE=+$O(^TMP("DGENIDX",$J,"EH",DGI,0)),DGENRIEN=+$G(^(DGLINE))
"RTN","DGEN1",69,0)
 . W !!,^TMP("DGEN",$J,DGLINE,0)
"RTN","DGEN1",70,0)
 . ;Load patient enrollment history screen
"RTN","DGEN1",71,0)
 . D EN^DGENLEH(DFN,DGENRIEN)
"RTN","DGEN1",72,0)
 D MESSAGE^DGENL(DFN)
"RTN","DGEN1",73,0)
 S VALMBCK="R"
"RTN","DGEN1",74,0)
EHQ Q
"RTN","DGEN1",75,0)
 ;
"RTN","DGEN1",76,0)
SP ;Entry point for DGEN SELECT PATIENT protocol
"RTN","DGEN1",77,0)
 ; Input  -- None
"RTN","DGEN1",78,0)
 ; Output -- DFN      Patient IEN
"RTN","DGEN1",79,0)
 ;           VALMBCK  R   =Refresh screen
"RTN","DGEN1",80,0)
 N DGDFN
"RTN","DGEN1",81,0)
 S VALMBCK=""
"RTN","DGEN1",82,0)
 D FULL^VALM1
"RTN","DGEN1",83,0)
 ;
"RTN","DGEN1",84,0)
 ;Get Patient File (#2) IEN
"RTN","DGEN1",85,0)
 D GETPAT^DGRPTU(,,.DGDFN,)
"RTN","DGEN1",86,0)
 ;
"RTN","DGEN1",87,0)
 ;If a patient is selected
"RTN","DGEN1",88,0)
 I DGDFN>0 D
"RTN","DGEN1",89,0)
 . ;Reset DFN to selected patient
"RTN","DGEN1",90,0)
 . S DFN=DGDFN
"RTN","DGEN1",91,0)
 . ;Re-build enrollment screen for selected patient
"RTN","DGEN1",92,0)
 . D BLD^DGENL
"RTN","DGEN1",93,0)
 D MESSAGE^DGENL(DFN)
"RTN","DGEN1",94,0)
 S VALMBCK="R"
"RTN","DGEN1",95,0)
SPQ Q
"RTN","DGEN1",96,0)
 ;
"RTN","DGEN1",97,0)
QUERY ;entry point for DGEN SEND ENROLLMENT QUERY protocol
"RTN","DGEN1",98,0)
 I '$$ON^DGENQRY W "sending of enrollment queries turned off" Q
"RTN","DGEN1",99,0)
 N NOTIFY,DIR,ERROR
"RTN","DGEN1",100,0)
 S DIR("A")="Do you want to be notified when the reply is received"
"RTN","DGEN1",101,0)
 S DIR("B")="YES"
"RTN","DGEN1",102,0)
 S DIR(0)="Y"
"RTN","DGEN1",103,0)
 S DIR("?")="If YES, you will be mailed notification when the reply is received."
"RTN","DGEN1",104,0)
 D ^DIR
"RTN","DGEN1",105,0)
 I '$D(DIRUT) D
"RTN","DGEN1",106,0)
 .K DIR
"RTN","DGEN1",107,0)
 .I Y=1 S NOTIFY=$G(DUZ)
"RTN","DGEN1",108,0)
 .I $$SEND^DGENQRY1(DFN,$G(NOTIFY),,.ERROR) D
"RTN","DGEN1",109,0)
 ..W !!,"Enrollment/Eligibility query sent ..."
"RTN","DGEN1",110,0)
 .E  D
"RTN","DGEN1",111,0)
 ..W !!,"Failure to send Query: ",ERROR
"RTN","DGEN1",112,0)
 .D PAUSE^VALM1
"RTN","DGEN1",113,0)
 D MESSAGE^DGENL(DFN)
"RTN","DGEN1",114,0)
 S VALMBCK="R"
"RTN","DGEN1",115,0)
 Q
"RTN","DGEN1",116,0)
 ;
"RTN","DGEN1",117,0)
CHECK ;Entry point for the DGEN CHECK QUERY STATUS protocol
"RTN","DGEN1",118,0)
 I $$PENDING^DGENQRY(DFN) D
"RTN","DGEN1",119,0)
 .W !!,"Query still pending ..."
"RTN","DGEN1",120,0)
 .D PAUSE^VALM1
"RTN","DGEN1",121,0)
 .D MESSAGE^DGENL(DFN)
"RTN","DGEN1",122,0)
 E  D
"RTN","DGEN1",123,0)
 .W !!,"Query is not pending ..."
"RTN","DGEN1",124,0)
 .D PAUSE^VALM1
"RTN","DGEN1",125,0)
 .D BLD^DGENL
"RTN","DGEN1",126,0)
 S VALMBCK="R"
"RTN","DGEN1",127,0)
 Q
"RTN","DGEN1",128,0)
 ;
"RTN","DGEN1",129,0)
PEZ ;Entry point for DGENUP PRINT 1010EZ-EZR protocol (DG*5.3*624)
"RTN","DGEN1",130,0)
 N RPTSEL,DGTASK,MTIEN
"RTN","DGEN1",131,0)
 D FULL^VALM1
"RTN","DGEN1",132,0)
 S (RPTSEL,DGTASK,MTIEN)=""
"RTN","DGEN1",133,0)
 S RPTSEL=$$SEL1010^DG1010P("") ;*Select 1010EZ/R form to print
"RTN","DGEN1",134,0)
 D:RPTSEL'="-1"
"RTN","DGEN1",135,0)
 .S MTIEN=$$MTPRMPT^DG1010P(DFN,"") ;select mt to print 
"RTN","DGEN1",136,0)
 .S DGTASK=$$PRT1010^DG1010P(RPTSEL,DFN,MTIEN) ;*Print 1010EZ/R
"RTN","DGEN1",137,0)
 S VALMBCK="R"
"RTN","DGEN1",138,0)
 Q
"RTN","DGENU")
0^15^B36371341
"RTN","DGENU",1,0)
DGENU ;ALB/CJM,ISA/KWP,Zoltan,LBD - Enrollment Utilities; 12/11/00 4:33pm ; 12/11/00 9:21pm
"RTN","DGENU",2,0)
 ;;5.3;Registration;**121,122,147,232,314,564,624**;Aug 13,1993
"RTN","DGENU",3,0)
 ;
"RTN","DGENU",4,0)
DISPLAY(DFN) ;
"RTN","DGENU",5,0)
 ;Description: Display status message, current enrollment and
"RTN","DGENU",6,0)
 ;     preferred facility information
"RTN","DGENU",7,0)
 ;Input:
"RTN","DGENU",8,0)
 ;  DFN - Patient IEN
"RTN","DGENU",9,0)
 ;  Output:     none
"RTN","DGENU",10,0)
 ;
"RTN","DGENU",11,0)
 N STATUS
"RTN","DGENU",12,0)
 S STATUS=$$STATUS^DGENA(DFN)
"RTN","DGENU",13,0)
 I 'STATUS W !!,"Patient is NOT enrolled in the VA Patient Enrollment System..."
"RTN","DGENU",14,0)
 E  I STATUS=2 D
"RTN","DGENU",15,0)
 .W !!,"Patient is enrolled in the VA Patient Enrollment System..."
"RTN","DGENU",16,0)
 ; Purple Heart added status 21
"RTN","DGENU",17,0)
 E  I (STATUS=9)!(STATUS=1)!(STATUS=15)!(STATUS=16)!(STATUS=17)!(STATUS=18)!(STATUS=21) D
"RTN","DGENU",18,0)
 .W !!,"Application is pending for enrollment in the VA Patient Enrollment System..."
"RTN","DGENU",19,0)
 E  D
"RTN","DGENU",20,0)
 .W !!,"Patient is NOT enrolled in the VA Patient Enrollment System..."
"RTN","DGENU",21,0)
 D CUR(DFN)
"RTN","DGENU",22,0)
 Q
"RTN","DGENU",23,0)
 ;
"RTN","DGENU",24,0)
CUR(DFN) ;
"RTN","DGENU",25,0)
 ;Description - displays current enrollment, category, enrollment group threshold, and preferred facility
"RTN","DGENU",26,0)
 ;
"RTN","DGENU",27,0)
 N FACNAME,PREFAC,DGEGT,DGEGTIEN,DGENCAT,DGENR,IORVON,IORVOFF
"RTN","DGENU",28,0)
 I $$GET^DGENA($$FINDCUR^DGENA(DFN),.DGENR)
"RTN","DGENU",29,0)
 ;Get enrollment category
"RTN","DGENU",30,0)
 S DGENCAT=$$CATEGORY^DGENA4(DFN)
"RTN","DGENU",31,0)
 ;Display Category in reverse video
"RTN","DGENU",32,0)
 D REV
"RTN","DGENU",33,0)
 ;Get enrollment group threshold
"RTN","DGENU",34,0)
 S DGEGTIEN=$$FINDCUR^DGENEGT
"RTN","DGENU",35,0)
 S DGEGT=$$GET^DGENEGT(DGEGTIEN,.DGEGT)
"RTN","DGENU",36,0)
 ;Preferred facility
"RTN","DGENU",37,0)
 S PREFAC=$$PREF^DGENPTA(DFN,.FACNAME)
"RTN","DGENU",38,0)
 W !?3,"Enrollment Date",?35,": ",$S('$G(DGENR("DATE")):"-none-",1:$$EXT^DGENU("DATE",DGENR("DATE")))
"RTN","DGENU",39,0)
 W !?3,"Enrollment Application Date",?35,": ",$S('$G(DGENR("APP")):"-none-",1:$$EXT^DGENU("DATE",DGENR("APP")))
"RTN","DGENU",40,0)
 W !?3,IORVON,"Enrollment Category             : ",$S($G(DGENCAT)="":"-none-",1:$$EXTERNAL^DILFD(27.15,.02,"",DGENCAT)),IORVOFF
"RTN","DGENU",41,0)
 W !?3,"Enrollment Status",?35,": ",$S($G(DGENR("STATUS"))="":"-none-",1:$$EXT^DGENU("STATUS",DGENR("STATUS")))
"RTN","DGENU",42,0)
 W !?3,"Enrollment Priority",?35,": ",$S($G(DGENR("PRIORITY"))="":"-none-",1:DGENR("PRIORITY")),$S($G(DGENR("SUBGRP"))="":"",1:$$EXT("SUBGRP",DGENR("SUBGRP")))
"RTN","DGENU",43,0)
 W !?3,"Preferred Facility",?35,": ",$S($G(FACNAME)'="":FACNAME,1:"-none-")
"RTN","DGENU",44,0)
 W !?3,"Enrollment Group Threshold",?35,": ",$S($G(DGEGT("PRIORITY"))="":"-none-",1:$$EXTERNAL^DILFD(27.16,.02,"",$G(DGEGT("PRIORITY")))),$S($G(DGEGT("SUBGRP"))="":"",1:$$EXTERNAL^DILFD(27.16,.03,"",$G(DGEGT("SUBGRP"))))
"RTN","DGENU",45,0)
 W !
"RTN","DGENU",46,0)
 Q
"RTN","DGENU",47,0)
REV ;Get variables to display text in reverse video
"RTN","DGENU",48,0)
 N X
"RTN","DGENU",49,0)
 S X="IORVON;IORVOFF"
"RTN","DGENU",50,0)
 D ENDR^%ZISS
"RTN","DGENU",51,0)
 Q
"RTN","DGENU",52,0)
PATID(DFN) ;
"RTN","DGENU",53,0)
 ;Description - Called by FileMan as an identifier for the Patient file.
"RTN","DGENU",54,0)
 ;Displays current enrollment status, priority, and preferred facility.
"RTN","DGENU",55,0)
 ;
"RTN","DGENU",56,0)
 ;Input:
"RTN","DGENU",57,0)
 ;  DFN - ien to Patient file
"RTN","DGENU",58,0)
 ;
"RTN","DGENU",59,0)
 N PREFAC,DGENR,OUTPUT
"RTN","DGENU",60,0)
 I '$$GET^DGENA($$FINDCUR^DGENA(DFN),.DGENR) D
"RTN","DGENU",61,0)
 .S OUTPUT="NO ENROLLMENT APPLICATION ON FILE "
"RTN","DGENU",62,0)
 E  D
"RTN","DGENU",63,0)
 .S OUTPUT=$E("PRIORITY:"_DGENR("PRIORITY")_"   ",1,12)_$E("STATUS:"_$$EXT^DGENU("STATUS",DGENR("STATUS"))_"         ",1,26)
"RTN","DGENU",64,0)
 S PREFAC=$$PREF^DGENPTA(DFN)
"RTN","DGENU",65,0)
 S:PREFAC OUTPUT=OUTPUT_"PREFERRED FACILITY:"_$P($G(^DIC(4,PREFAC,99)),"^")
"RTN","DGENU",66,0)
 I $G(IOM) I ($X#$G(IOM))<6 D
"RTN","DGENU",67,0)
 .D EN^DDIOL(OUTPUT,,"?($X+(10-($X#IOM)))")
"RTN","DGENU",68,0)
 E  D
"RTN","DGENU",69,0)
 .D EN^DDIOL(OUTPUT,,"!?10")
"RTN","DGENU",70,0)
 Q
"RTN","DGENU",71,0)
 ;
"RTN","DGENU",72,0)
EXT(SUB,VAL) ;
"RTN","DGENU",73,0)
 ;Description: Given the subscript used in the PATIENT ENROLLMENT array,
"RTN","DGENU",74,0)
 ;     and a field value, returns the external representation of the
"RTN","DGENU",75,0)
 ;     value, as defined in the fields output transform of the PATIENT
"RTN","DGENU",76,0)
 ;     ENROLLMENT file.
"RTN","DGENU",77,0)
 ;Input: 
"RTN","DGENU",78,0)
 ;  SUB - subscript in the array defined by the PATIENT ENROLLMENT object
"RTN","DGENU",79,0)
 ;  VAL - value of the PATIENT ENROLLMENT object attribute named by SUB
"RTN","DGENU",80,0)
 ;Output:
"RTN","DGENU",81,0)
 ;  Function Value - returns the external value of the attribute as
"RTN","DGENU",82,0)
 ;     defined by the PATIENT ENROLLMENT file
"RTN","DGENU",83,0)
 ;
"RTN","DGENU",84,0)
 Q:(($G(SUB)="")!($G(VAL)="")) ""
"RTN","DGENU",85,0)
 ;
"RTN","DGENU",86,0)
 N FLD
"RTN","DGENU",87,0)
 S FLD=$$FIELD(SUB)
"RTN","DGENU",88,0)
 ;
"RTN","DGENU",89,0)
 Q:(FLD="") ""
"RTN","DGENU",90,0)
 Q $$EXTERNAL^DILFD(27.11,FLD,"F",VAL)
"RTN","DGENU",91,0)
 ;
"RTN","DGENU",92,0)
FIELD(SUB) ;
"RTN","DGENU",93,0)
 ;Description: given a subscript in the enrollment array, returns the
"RTN","DGENU",94,0)
 ;     corresponding field number
"RTN","DGENU",95,0)
 N FLD S FLD=""
"RTN","DGENU",96,0)
 D  ;drops out of block once SUB is determined
"RTN","DGENU",97,0)
 .I SUB="APP" S FLD=.01 Q
"RTN","DGENU",98,0)
 .I SUB="DATE" S FLD=.1 Q
"RTN","DGENU",99,0)
 .I SUB="END" S FLD=.11 Q
"RTN","DGENU",100,0)
 .I SUB="DFN" S FLD=.02 Q
"RTN","DGENU",101,0)
 .I SUB="SOURCE" S FLD=.03 Q
"RTN","DGENU",102,0)
 .I SUB="STATUS" S FLD=.04 Q
"RTN","DGENU",103,0)
 .I SUB="REASON" S FLD=.05 Q
"RTN","DGENU",104,0)
 .I SUB="REMARKS" S FLD=25 Q
"RTN","DGENU",105,0)
 .I SUB="FACREC" S FLD=.06 Q
"RTN","DGENU",106,0)
 .I SUB="PRIORITY" S FLD=.07 Q
"RTN","DGENU",107,0)
 .I SUB="EFFDATE" S FLD=.08 Q
"RTN","DGENU",108,0)
 .I SUB="PRIORREC" S FLD=.09 Q
"RTN","DGENU",109,0)
 .I SUB="SUBGRP" S FLD=.12 Q
"RTN","DGENU",110,0)
 .I SUB="CODE" S FLD=50.01 Q
"RTN","DGENU",111,0)
 .I SUB="SC" S FLD=50.02 Q
"RTN","DGENU",112,0)
 .I SUB="SCPER" S FLD=50.03 Q
"RTN","DGENU",113,0)
 .I SUB="POW" S FLD=50.04 Q
"RTN","DGENU",114,0)
 .I SUB="A&A" S FLD=50.05 Q
"RTN","DGENU",115,0)
 .I SUB="HB" S FLD=50.06 Q
"RTN","DGENU",116,0)
 .I SUB="VAPEN" S FLD=50.07 Q
"RTN","DGENU",117,0)
 .I SUB="VACKAMT" S FLD=50.08 Q
"RTN","DGENU",118,0)
 .I SUB="DISRET" S FLD=50.09 Q
"RTN","DGENU",119,0)
 .I SUB="MEDICAID" S FLD=50.1 Q
"RTN","DGENU",120,0)
 .I SUB="AO" S FLD=50.11 Q
"RTN","DGENU",121,0)
 .I SUB="IR" S FLD=50.12 Q
"RTN","DGENU",122,0)
 .I SUB="EC" S FLD=50.13 Q
"RTN","DGENU",123,0)
 .I SUB="MTSTA" S FLD=50.14 Q
"RTN","DGENU",124,0)
 .I SUB="VCD" S FLD=50.15 Q
"RTN","DGENU",125,0)
 .I SUB="PH" S FLD=50.16 Q
"RTN","DGENU",126,0)
 .I SUB="UNEMPLOY" S FLD=50.17 Q
"RTN","DGENU",127,0)
 .I SUB="CVELEDT" S FLD=50.18 Q
"RTN","DGENU",128,0)
 .I SUB="DATETIME" S FLD=75.01 Q
"RTN","DGENU",129,0)
 .I SUB="USER" S FLD=75.02 Q
"RTN","DGENU",130,0)
 Q FLD
"RTN","DGENU",131,0)
 ;
"RTN","DGENU",132,0)
PROMPT(FILE,FIELD,DEFAULT,RESPONSE,REQUIRE,PRMPTNM) ;
"RTN","DGENU",133,0)
 ;Description: requests user to enter a single field value.
"RTN","DGENU",134,0)
 ;Input:
"RTN","DGENU",135,0)
 ;  FILE - the file #
"RTN","DGENU",136,0)
 ;  FIELD - the field #
"RTN","DGENU",137,0)
 ;  DEFAULT - default value, internal form
"RTN","DGENU",138,0)
 ;  REQUIRE - a flag, (+value)'=0 means to require a value to be
"RTN","DGENU",139,0)
 ;            entered and to return failure otherwise (optional)
"RTN","DGENU",140,0)
 ;  PRMPTNM - Optional
"RTN","DGENU",141,0)
 ;             0 - display field LABEL
"RTN","DGENU",142,0)
 ;             1 - Prompt field TITLE
"RTN","DGENU",143,0)
 ;Output:
"RTN","DGENU",144,0)
 ;  Function Value - 0 on failure, 1 on success
"RTN","DGENU",145,0)
 ;  RESPONSE - value entered by user, pass by reference
"RTN","DGENU",146,0)
 ;
"RTN","DGENU",147,0)
 Q:(('$G(FILE))!('$G(FIELD))) 0
"RTN","DGENU",148,0)
 S REQUIRE=$G(REQUIRE)
"RTN","DGENU",149,0)
 S PRMPTNM=$G(PRMPTNM)
"RTN","DGENU",150,0)
 N DIR,DA,QUIT,AGAIN
"RTN","DGENU",151,0)
 ;
"RTN","DGENU",152,0)
 S DIR(0)=FILE_","_FIELD_$S($G(REQUIRE):"",1:"O")_"AO"
"RTN","DGENU",153,0)
 I $G(DEFAULT)'="" DO
"RTN","DGENU",154,0)
 . S:+$G(PRMPTNM)=0 DIR("A")=$$GET1^DID(FILE,FIELD,"","LABEL")_": "_$$EXTERNAL^DILFD(FILE,FIELD,"F",DEFAULT)_"// "
"RTN","DGENU",155,0)
 . S:+$G(PRMPTNM)>0 DIR("A")=$$GET1^DID(FILE,FIELD,"","TITLE")_": "_$$EXTERNAL^DILFD(FILE,FIELD,"F",DEFAULT)_"// "
"RTN","DGENU",156,0)
 S QUIT=0
"RTN","DGENU",157,0)
 F  D  Q:QUIT
"RTN","DGENU",158,0)
 . D ^DIR
"RTN","DGENU",159,0)
 . I $D(DTOUT)!$D(DUOUT) S QUIT=1 Q
"RTN","DGENU",160,0)
 . I X="@" D  Q:AGAIN
"RTN","DGENU",161,0)
 . . S AGAIN=0
"RTN","DGENU",162,0)
 . . I 'REQUIRE,"Yy"'[$E($$YN^DGENCD1("  Are you sure")_"X") S AGAIN=1 Q
"RTN","DGENU",163,0)
 . . S RESPONSE="" ; This might trigger the "required" message below.
"RTN","DGENU",164,0)
 . E  I X="" S RESPONSE=$G(DEFAULT)
"RTN","DGENU",165,0)
 . E  S RESPONSE=$P(Y,"^")
"RTN","DGENU",166,0)
 . ;
"RTN","DGENU",167,0)
 . ; quit this loop if the user entered value OR value not required
"RTN","DGENU",168,0)
 . I RESPONSE'="" S QUIT=1 Q
"RTN","DGENU",169,0)
 . I 'REQUIRE S QUIT=1 Q
"RTN","DGENU",170,0)
 . W !,"This is a required response. Enter '^' to exit"
"RTN","DGENU",171,0)
 I $D(DTOUT)!$D(DUOUT) Q 0
"RTN","DGENU",172,0)
 Q 1
"RTN","DGENU",173,0)
 ;
"RTN","DGENU",174,0)
INST() ;
"RTN","DGENU",175,0)
 ; Description: Determine the institution affiliation associated with a user.
"RTN","DGENU",176,0)
 ;
"RTN","DGENU",177,0)
 ;  Input:
"RTN","DGENU",178,0)
 ;     DUZ(2) - Pointer to the INSTITUTION (#4) file (institution
"RTN","DGENU",179,0)
 ;              affiliated with user, prompted at Kernel sign-on)
"RTN","DGENU",180,0)
 ;
"RTN","DGENU",181,0)
 ; Output:
"RTN","DGENU",182,0)
 ;   Function Value - Returns pointer to the INSTITUTION (#4) file
"RTN","DGENU",183,0)
 ;    entry that is associated with the user, otherwise the pointer
"RTN","DGENU",184,0)
 ;    to the INSTITUTION (#4) file entry of the primary VA Medical
"RTN","DGENU",185,0)
 ;    Center division is returned.
"RTN","DGENU",186,0)
 ;
"RTN","DGENU",187,0)
 Q $S($G(DUZ(2)):DUZ(2),1:$P($$SITE^VASITE(),"^"))
"RTN","DGENU",188,0)
 ;
"RTN","DGENU",189,0)
GETINST(DGPREFAC,DGINST) ;Get Institution file data
"RTN","DGENU",190,0)
 ; Input  -- DGPREFAC Institution file IEN
"RTN","DGENU",191,0)
 ; Output -- 1=Successful and 0=Failure
"RTN","DGENU",192,0)
 ;           DGINST - Institution file Array
"RTN","DGENU",193,0)
 N DGINST0,DGINST99,DGOKF
"RTN","DGENU",194,0)
 S DGINST0=$G(^DIC(4,DGPREFAC,0)) G GETQ:DGINST0=""
"RTN","DGENU",195,0)
 S DGINST("NAME")=$P(DGINST0,U)
"RTN","DGENU",196,0)
 S DGINST99=$G(^DIC(4,DGPREFAC,99))
"RTN","DGENU",197,0)
 S DGINST("STANUM")=$P(DGINST99,U)
"RTN","DGENU",198,0)
 S DGOKF=1
"RTN","DGENU",199,0)
GETQ Q +$G(DGOKF)
"RTN","DGLOCK2")
0^25^B23708639
"RTN","DGLOCK2",1,0)
DGLOCK2 ;ALB/MRL - PATIENT FILE DATA EDIT CHECKS ; 28 Jan 2002  2:37 PM
"RTN","DGLOCK2",2,0)
 ;;5.3;Registration;**18,244,624**;Aug 13, 1993
"RTN","DGLOCK2",3,0)
K1 ;NOK Add
"RTN","DGLOCK2",4,0)
 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",5,0)
 I $S('$D(^DPT(DFN,.21)):1,$P(^(.21),U,1)']"":1,1:0) W !?4,*7,"'NEXT OF KIN' name must be specified to enter/edit this field" K X
"RTN","DGLOCK2",6,0)
 Q
"RTN","DGLOCK2",7,0)
K1D ;NOK Delete
"RTN","DGLOCK2",8,0)
 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",9,0)
 I $D(^DPT(DFN,.21)),$P(^(.21),U,1)]"" W !?4,*7,"Can't be deleted as long as 'NEXT OF KIN' is specified" K X
"RTN","DGLOCK2",10,0)
 Q
"RTN","DGLOCK2",11,0)
K2 ;NOK2 Add
"RTN","DGLOCK2",12,0)
 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",13,0)
 D K1 I $D(X),$S('$D(^DPT(DFN,.211)):1,$P(^(.211),U,1)']"":1,1:0) W !?4,*7,"'NEXT OF KIN-2' name must be specified to enter/edit this field" K X
"RTN","DGLOCK2",14,0)
 Q
"RTN","DGLOCK2",15,0)
K2D ;NOK2 Delete
"RTN","DGLOCK2",16,0)
 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",17,0)
 I $D(^DPT(DFN,.211)),$P(^(.211),U,1)]"" W !?4,*7,"Can't be deleted as long as 'NEXT OF KIN-2' is specified" K X
"RTN","DGLOCK2",18,0)
 Q
"RTN","DGLOCK2",19,0)
E1 ;Emer Add
"RTN","DGLOCK2",20,0)
 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",21,0)
 I $S('$D(^DPT(DFN,.33)):1,$P(^(.33),U,1)']"":1,1:0) W !?4,*7,"'EMERGENCY CONTACT' name must be specified to enter/edit this field" K X
"RTN","DGLOCK2",22,0)
 Q
"RTN","DGLOCK2",23,0)
E1D ;Emer Delete
"RTN","DGLOCK2",24,0)
 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",25,0)
 I $D(^DPT(DFN,.33)),$P(^(.33),U,1)]"" W !?4,*7,"Can't be deleted as long as 'EMERGENCY CONTACT' is specified" K X
"RTN","DGLOCK2",26,0)
 Q
"RTN","DGLOCK2",27,0)
E2 ;Emer2 Add
"RTN","DGLOCK2",28,0)
 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",29,0)
 D E1 I $D(X),$S('$D(^DPT(DFN,.331)):1,$P(^(.331),U,1)']"":1,1:0) W !?4,*7,"'EMERGENCY CONTACT-2' name must be specified to enter/edit this field" K X
"RTN","DGLOCK2",30,0)
 Q
"RTN","DGLOCK2",31,0)
E2D ;Emer2 Delete
"RTN","DGLOCK2",32,0)
 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",33,0)
 I $D(^DPT(DFN,.331)),$P(^(.331),U,1)]"" W !?4,*7,"Can't be deleted as long as 'EMERGENCY CONTACT-2' is specified" K X
"RTN","DGLOCK2",34,0)
 Q
"RTN","DGLOCK2",35,0)
D ;Desig Add
"RTN","DGLOCK2",36,0)
 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",37,0)
 I $S('$D(^DPT(DFN,.34)):1,$P(^(.34),U,1)']"":1,1:0) W !?4,*7,"'DESIGNEE' name must be specified to enter/edit this field" K X
"RTN","DGLOCK2",38,0)
 Q
"RTN","DGLOCK2",39,0)
DD ;Desig Delete
"RTN","DGLOCK2",40,0)
 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",41,0)
 I $D(^DPT(DFN,.34)),$P(^(.34),U,1)]"" W !?4,*7,"Can't be deleted as long as 'DESIGNEE' is specified" K X
"RTN","DGLOCK2",42,0)
 Q
"RTN","DGLOCK2",43,0)
SDD ;Spouse/Dependent Delete
"RTN","DGLOCK2",44,0)
 Q:'DA
"RTN","DGLOCK2",45,0)
 I $D(^DGPR(408.13,DA,0)),$P(^(0),U,1)]"" D EN^DDIOL("    Can't be deleted as long as Spouse/Dependent Income Person is specified.") K X
"RTN","DGLOCK2",46,0)
 Q
"RTN","DGLOCK2",47,0)
EM ;Emp Add
"RTN","DGLOCK2",48,0)
 I $S('$D(^DPT(DA,.311)):1,"^3^9^"[$P(^(.311),U,15):1,1:0) G EMW
"RTN","DGLOCK2",49,0)
 Q
"RTN","DGLOCK2",50,0)
EMW W !?4,*7,"'EMPLOYMENT STATUS' must be specified to enter/edit this field" K X Q
"RTN","DGLOCK2",51,0)
EM1 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",52,0)
 I $S('$D(^DPT(DFN,.311)):1,"^3^9^"[$P(^(.311),U,15):1,1:0) G EMW
"RTN","DGLOCK2",53,0)
 I $P(^DPT(DFN,.311),U)']"" W !?4,*7,"'EMPLOYER NAME' must be specified to enter/edit this field" K X
"RTN","DGLOCK2",54,0)
 Q
"RTN","DGLOCK2",55,0)
EMD ;Emp Delete
"RTN","DGLOCK2",56,0)
 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",57,0)
 I $D(^DPT(DFN,.311)),$P(^(.311),U,1)]"" W !?4,*7,"Can't be deleted as long as 'EMPLOYER NAME' is specified" K X
"RTN","DGLOCK2",58,0)
 Q
"RTN","DGLOCK2",59,0)
SE ;Sp Emp Add
"RTN","DGLOCK2",60,0)
 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",61,0)
 D MAR I $D(X),$S('$D(^DPT(DFN,.25)):1,$P(^(.25),U,1)']"":1,1:0) W !?4,*7,"'SPOUSES EMPLOYER' name must be specified to enter/edit this field" K X
"RTN","DGLOCK2",62,0)
 Q
"RTN","DGLOCK2",63,0)
SED ;Sp Emp Delete
"RTN","DGLOCK2",64,0)
 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",65,0)
 I $D(^DPT(DFN,.25)),$P(^(.25),U,1)]"" W !?4,*7,"Can't be deleted as long as 'SPOUSES EMPLOYER' is specified" K X
"RTN","DGLOCK2",66,0)
 Q
"RTN","DGLOCK2",67,0)
MAR ;Married or Separated
"RTN","DGLOCK2",68,0)
 I '$G(DFN) N DFN S DFN=$G(DA) Q:'DFN
"RTN","DGLOCK2",69,0)
 I $S('$D(^DIC(11,+$P(^DPT(DFN,0),U,5),0)):1,$P(^(0),U,1)="MARRIED":0,$P(^(0),U,1)="SEPARATED":0,1:1) W !?4,*7,"NOT POSSIBLE...Applicant is not Married." K X Q
"RTN","DGLOCK2",70,0)
 Q
"RTN","DGLOCK2",71,0)
AAC1 ;Agency/Country Screen
"RTN","DGLOCK2",72,0)
 S DGAAC=$S($D(^DPT(DFN,.36)):$S($D(^DIC(8,+$P(^DPT(DFN,.36),U,1),0)):+$P(^(0),U,4),1:""),1:""),DGAAC(1)=$S('$D(^DPT(DFN,"VET")):"",^("VET")'="N":"",DGAAC=4:"A",DGAAC=5:"C",1:"")
"RTN","DGLOCK2",73,0)
 Q
"RTN","DGLOCK2",74,0)
AAC D AAC1 S DIC("S")="I $P(^(0),U,4)=DGAAC(1)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X Q
"RTN","DGLOCK2",75,0)
 ;
"RTN","DGLOCK2",76,0)
DOL I $S(X']"":1,X'["*":1,1:0) S:X["$" X=+$P(X,"$",2) G DOL2
"RTN","DGLOCK2",77,0)
DOL1 I $L(X),"$*"[$E(X) S X=$E(X,2,999) G DOL1
"RTN","DGLOCK2",78,0)
 Q:'+X  S X=+X,X=X*12
"RTN","DGLOCK2",79,0)
DOL2 S:X["." X=+$P(X,".",1)_"."_$E($P(X,".",2)_"00",1,2) W "  ($",X,")" Q
"RTN","DGLOCK2",80,0)
TOTCHK(DFN) ;Returns 1 if Any of 4 'Received' YES/NO amounts =YES
"RTN","DGLOCK2",81,0)
 ;For A&A, HB, Pension, Disability
"RTN","DGLOCK2",82,0)
 S:'$D(DFN) DFN=DA
"RTN","DGLOCK2",83,0)
 Q ($P($G(^DPT(DFN,.362)),U,12,14)_$P($G(^DPT(DFN,.3)),U,11))["Y"
"RTN","DGLOCK2",84,0)
TOTCKMSG ;ERROR MESSAGE FOR ABOVE
"RTN","DGLOCK2",85,0)
 W !,?4,*7,"Must Receive A&A, HB, Pension, or Disability Benefits."
"RTN","DGLOCK2",86,0)
 Q
"RTN","DGLOCK2",87,0)
TOTCKDEL ;ERROR MESSAGE IF DELETE .36295
"RTN","DGLOCK2",88,0)
 S DFN=DA I $$TOTCHK(DFN) W !,?4,*7,"Delete by indicating receipt of A&A, HB, Pension, & Disability as 'NO'." K X
"RTN","DGLOCK2",89,0)
 Q
"RTN","DGMTE")
0^57^B25460516
"RTN","DGMTE",1,0)
DGMTE ;ALB/RMO,CAW,LD,SCG - Edit an Existing Means Test ;03 APR 2002 2:00 pm
"RTN","DGMTE",2,0)
 ;;5.3;Registration;**33,45,182,344,332,433,624**;Aug 13, 1993
"RTN","DGMTE",3,0)
 ;
"RTN","DGMTE",4,0)
EN ;Entry point to edit an existing means test
"RTN","DGMTE",5,0)
 N DGMDOD S DGMDOD=""
"RTN","DGMTE",6,0)
 I DGMTYPT=1 S DIC("S")="I $P(^(0),U,14)"
"RTN","DGMTE",7,0)
 I DGMTYPT=2!(DGMTYPT=4) S DIC("S")="I $D(^DGMT(408.31,""AID"",DGMTYPT,+Y))"
"RTN","DGMTE",8,0)
 I $D(DGMTDFN)#2 D UNLOCK^DGMTUTL(DGMTDFN) K DGMTDFN
"RTN","DGMTE",9,0)
 S DIC="^DPT(",DIC(0)="AEMQ" W ! D ^DIC K DIC G Q:Y<0 S (DFN,DGMTDFN)=+Y
"RTN","DGMTE",10,0)
 I $P($G(^DPT(DFN,.35)),U)'="" S DGMDOD=$P(^DPT(DFN,.35),U)
"RTN","DGMTE",11,0)
 I $G(DGMDOD) W !,"Patient died on: ",$$FMTE^XLFDT(DGMDOD,"1D") Q
"RTN","DGMTE",12,0)
 ;
"RTN","DGMTE",13,0)
 ; check if income test upload in progress
"RTN","DGMTE",14,0)
 D CKUPLOAD^IVMCUPL(DFN)
"RTN","DGMTE",15,0)
 ;
"RTN","DGMTE",16,0)
 ; obtain lock used to synchronize local MT/CT options with income test upload
"RTN","DGMTE",17,0)
 I $$LOCK^DGMTUTL(DFN)
"RTN","DGMTE",18,0)
 ;
"RTN","DGMTE",19,0)
DT S DIC("A")="Select DATE OF TEST: "
"RTN","DGMTE",20,0)
 N FUTFLG,VSITE S FUTFLG=0,VSITE=+$P($$SITE^VASITE(),U,3)
"RTN","DGMTE",21,0)
 I $D(^DGMT(408.31,+$$FUT^DGMTU(DFN,"",DGMTYPT),0)),+$P($G(^(2)),U,5)=VSITE S DIC("B")=$P(^(0),"^"),FUTFLG=1
"RTN","DGMTE",22,0)
 I 'FUTFLG I $D(^DGMT(408.31,+$$LST^DGMTU(DFN,"",DGMTYPT),0)) S DIC("B")=$P(^(0),"^")
"RTN","DGMTE",23,0)
 S DIC("S")="I $P(^(0),U,2)=DFN,$P(^(0),U,19)=DGMTYPT"
"RTN","DGMTE",24,0)
 S:DGMTYPT'=4 DIC("S")=DIC("S")_" I $G(^(""PRIM""))!($P(^(0),U,1)>DT)"
"RTN","DGMTE",25,0)
 S DIC="^DGMT(408.31,",DIC(0)="EQZ" W ! D EN^DGMTLK K DIC G Q:Y<0
"RTN","DGMTE",26,0)
 S DGMTI=+Y,DGMTDT=$P(Y,"^",2),DGMT0=Y(0)
"RTN","DGMTE",27,0)
 ;
"RTN","DGMTE",28,0)
 ;If test is uneditable, print error message and allow user to view test
"RTN","DGMTE",29,0)
 ;or print 10-10EZ/EZR
"RTN","DGMTE",30,0)
 ;
"RTN","DGMTE",31,0)
 I '$P($G(^DG(408.34,+$P(Y(0),U,23),0)),U,2) D  D:$G(DGMTERR) VIEWPRT G EN
"RTN","DGMTE",32,0)
 .W !!?3,*7,"Warning: Uneditable "_$S(DGMTYPT=1:"means",1:"copay")_" test.  The source of this test is "_$S($$SR^DGMTAUD1(Y(0))]"":$$SR^DGMTAUD1(Y(0)),1:"UNKNOWN")
"RTN","DGMTE",33,0)
 .W !?12,"which has been flagged as an uneditable source.",!
"RTN","DGMTE",34,0)
 .S DIR("A")="Would you like to view the "_$S(DGMTYPT=1:"means",1:"copay")_" test or print the 10-10EZR/EZ",DIR("B")="NO",DIR(0)="Y"
"RTN","DGMTE",35,0)
 .D ^DIR K DIR S DGMTERR=Y I $D(DTOUT)!($D(DUOUT)) K DGMTERR,DTOUT,DUOUT
"RTN","DGMTE",36,0)
 I "^3^10^"[("^"_$P(Y(0),"^",3)_"^") W !?3,*7,$S(DGMTYPT=1:"Means",1:"Copay")_" test is NO LONGER "_$S(DGMTYPT=1:"REQUIRED",1:"APPLICABLE")_", it cannot be edited." G EN
"RTN","DGMTE",37,0)
 I DGMTYPT=4,$P($G(^DGMT(408.31,DGMTI,2)),U,8) D  I $G(DGOUT) K DGOUT G EN
"RTN","DGMTE",38,0)
 .N DGMT,DGT S DGMT=$P(^DGMT(408.31,DGMTI,2),U,8),DGT=$P($G(^DGMT(408.31,DGMT,0)),U,19)
"RTN","DGMTE",39,0)
 .I DGT,DGT>2 Q
"RTN","DGMTE",40,0)
 .W !!,?3,"This LTC copay exemption test is linked to the ",$$FTIME^DGMTUTL(+^DGMT(408.31,DGMT,0)),$S(DGT=1:" means",1:" RX copay")," test."
"RTN","DGMTE",41,0)
 .W !,?3,"Changes should be made using the 'Edit an Existing ",$S(DGT=1:"Means",1:"Copay Exemption")," Test'"
"RTN","DGMTE",42,0)
 .W !,?3,"menu option."
"RTN","DGMTE",43,0)
 .S DGOUT=1
"RTN","DGMTE",44,0)
 D DISPLAY^DGMTU23(DGMTI,DGMTYPT),PAUSE I $D(DTOUT)!($D(DUOUT)) K DTOUT,DUOUT G EN
"RTN","DGMTE",45,0)
 ;
"RTN","DGMTE",46,0)
 ;hardship determination, once granted, will remain unless deleted by
"RTN","DGMTE",47,0)
 ;hardship option
"RTN","DGMTE",48,0)
 ;I $P(DGMT0,"^",20),'$$EDIT() G EN ; if hardship
"RTN","DGMTE",49,0)
 ;
"RTN","DGMTE",50,0)
 S DGMTACT="EDT",DGMTROU="EN^DGMTE" G EN^DGMTSC
"RTN","DGMTE",51,0)
 ;
"RTN","DGMTE",52,0)
Q K DFN,DGMTACT,DGMTDT,DGMTERR,DGMT0,DGMTI,DGMTROU,DGMTYPT,DGMTX,DGOUT,DTOUT,DUOUT,X,Y
"RTN","DGMTE",53,0)
 ;
"RTN","DGMTE",54,0)
 ; release lock used to synchronize local MT/CT options with income test upload
"RTN","DGMTE",55,0)
 I $D(DGMTDFN)#2 D UNLOCK^DGMTUTL(DGMTDFN) K DGMTDFN
"RTN","DGMTE",56,0)
 Q
"RTN","DGMTE",57,0)
 ;
"RTN","DGMTE",58,0)
PAUSE S DIR(0)="E" D ^DIR
"RTN","DGMTE",59,0)
 Q
"RTN","DGMTE",60,0)
 ;
"RTN","DGMTE",61,0)
VIEWPRT ; Select 1 to view an uneditable means test or 2 to print a 10-10EZ/EZR
"RTN","DGMTE",62,0)
 ;
"RTN","DGMTE",63,0)
 S DIR(0)="S^1:View Means Test;2:Print Means Test 10-10EZR/EZ",DIR("A")="Select Choice"
"RTN","DGMTE",64,0)
 D ^DIR S DGMTANS=Y G:$D(DTOUT)!($D(DUOUT)) VIEWPRTQ
"RTN","DGMTE",65,0)
 I DGMTANS=1 D EN1^DGMTV
"RTN","DGMTE",66,0)
 I DGMTANS=2 D 
"RTN","DGMTE",67,0)
 .N RPTSEL,DGTASK
"RTN","DGMTE",68,0)
 .D FULL^VALM1
"RTN","DGMTE",69,0)
 .S (RPTSEL,DGTASK)=""
"RTN","DGMTE",70,0)
 .I $D(DGFINOP) DO
"RTN","DGMTE",71,0)
 ..W !!,"Options for printing financial assessment information will follow."
"RTN","DGMTE",72,0)
 ..W !,"Generally, you should answer 'YES' to 'PRINT 10-10EZR?' after updating"
"RTN","DGMTE",73,0)
 ..W !,"patient demographic or financial information.  Answer 'YES' to 'PRINT"
"RTN","DGMTE",74,0)
 ..W !,"10-10EZ?' after entering new patient demographic and financial information."
"RTN","DGMTE",75,0)
 .S RPTSEL=$$SEL1010^DG1010P("EZR/EZ") ;*Select 1010EZ/R form to print
"RTN","DGMTE",76,0)
 .S:RPTSEL'="-1" DGTASK=$$PRT1010^DG1010P(RPTSEL,DFN,DGMTI) ;*Print 1010EZ/R
"RTN","DGMTE",77,0)
 ;
"RTN","DGMTE",78,0)
VIEWPRTQ ;
"RTN","DGMTE",79,0)
 K DGMTANS,DIR,DTOUT,DUOUT,Y
"RTN","DGMTE",80,0)
 Q
"RTN","DGMTE",81,0)
 ;
"RTN","DGMTE",82,0)
EDIT() ; want to edit even though MT is hardship?
"RTN","DGMTE",83,0)
 ;
"RTN","DGMTE",84,0)
 ; Output:  1 if user wants to edit, 0 otherwise
"RTN","DGMTE",85,0)
 ;
"RTN","DGMTE",86,0)
 N DIR,DTOUT,DUOUT,DIRUT,DIROUT,I,X,Y
"RTN","DGMTE",87,0)
 S DIR("?",1)="WARNING:  You are about to access a means test for which a hardship has"
"RTN","DGMTE",88,0)
 S DIR("?",2)="          been authorized.  If you proceed, the hardship will be removed"
"RTN","DGMTE",89,0)
 S DIR("?",3)="          and the means test category will be recalculated!  To avoid"
"RTN","DGMTE",90,0)
 S DIR("?",4)="          this problem, enter NO at the next prompt and use the 'View"
"RTN","DGMTE",91,0)
 S DIR("?",5)="          a Past Means Test' option should you need to see details of"
"RTN","DGMTE",92,0)
 S DIR("?",6)="          this means test."
"RTN","DGMTE",93,0)
 S DIR("?",7)=" "
"RTN","DGMTE",94,0)
 S DIR("?")="Enter NO to stop editing this means test.  Enter YES to continue"
"RTN","DGMTE",95,0)
 F I=1:1 Q:'$D(DIR("?",I))  W !,DIR("?",I)
"RTN","DGMTE",96,0)
 S DIR("A")="Do you want to continue editing this means test?  ",DIR("B")="NO",DIR(0)="YA"
"RTN","DGMTE",97,0)
 D ^DIR
"RTN","DGMTE",98,0)
 Q Y
"RTN","DGMTSC1")
0^16^B2651546
"RTN","DGMTSC1",1,0)
DGMTSC1 ;ALB/RMO/CAW - Means Test Screen Marital Status/Dependents ;24 JAN 1992 7:40 am
"RTN","DGMTSC1",2,0)
 ;;5.3;Registration;**45,624**;Aug 13, 1993
"RTN","DGMTSC1",3,0)
 ;
"RTN","DGMTSC1",4,0)
 ; Input  -- DFN      Patient IEN
"RTN","DGMTSC1",5,0)
 ;           DGMTACT  Means Test Action
"RTN","DGMTSC1",6,0)
 ;           DGVINI   Veteran Individual Annual Income IEN
"RTN","DGMTSC1",7,0)
 ;           DGVIRI   Veteran Income Relation IEN
"RTN","DGMTSC1",8,0)
 ;           DGVPRI   Veteran Patient Relation IEN
"RTN","DGMTSC1",9,0)
 ; Output -- None
"RTN","DGMTSC1",10,0)
 ;
"RTN","DGMTSC1",11,0)
EN ;Entry point for marital status/dependent screen
"RTN","DGMTSC1",12,0)
 D DIS
"RTN","DGMTSC1",13,0)
 S X="^2" G EN1^DGMTSCR
"RTN","DGMTSC1",14,0)
 ;
"RTN","DGMTSC1",15,0)
DIS ;Display marital status/dependent information
"RTN","DGMTSC1",16,0)
 N DGDEP,DGINR,DGREL,DGVIR0,X
"RTN","DGMTSC1",17,0)
 D ALL^DGMTU21(DFN,"CS",DGMTDT,"PR",$S($G(DGMTI):DGMTI,1:""))
"RTN","DGMTSC1",18,0)
 D GROSS^DGMTSCU4(DGVINI,DFN,DGMTDT,DGVIRI)
"RTN","DGMTSC1",19,0)
 D EN^DGDEP,DEP
"RTN","DGMTSC1",20,0)
DISQ Q
"RTN","DGMTSC1",21,0)
 ;
"RTN","DGMTSC1",22,0)
SPOUSE ;Add/Edit spouse demographic data
"RTN","DGMTSC1",23,0)
 N DGFL,DGIPI,DGPRI,DGREL,DGPRTY
"RTN","DGMTSC1",24,0)
 D GETREL^DGMTU11(DFN,"S",$$LYR^DGMTSCU1($S($G(DGMTDT):DGMTDT,1:DT)),$S($G(DGMTI):DGMTI,1:""))
"RTN","DGMTSC1",25,0)
SPOUSE1 S DGPRTY="S",DGPRI=$G(DGREL("S"))
"RTN","DGMTSC1",26,0)
 D:DGPRI EDIT^DGRPEIS(DGPRI,DGPRTY)
"RTN","DGMTSC1",27,0)
 D ADD^DGRPEIS(DFN,DGPRTY):'DGPRI
"RTN","DGMTSC1",28,0)
 I DGFL<0 S DGMTOUT=1
"RTN","DGMTSC1",29,0)
SPOUSEQ Q
"RTN","DGMTSC1",30,0)
 ;
"RTN","DGMTSC1",31,0)
DEP ;Update number of dependent children
"RTN","DGMTSC1",32,0)
 N DA,DGDEP,DGREL,DIE,DR
"RTN","DGMTSC1",33,0)
 D GETREL^DGMTU11(DFN,"C",$$LYR^DGMTSCU1(DGMTDT),$S($G(DGMTI):DGMTI,1:""))
"RTN","DGMTSC1",34,0)
 S DA=DGVIRI,DIE="^DGMT(408.22,",DR=".08////^S X="_$S(DGDEP:1,1:0)_";.13///"_$S(DGDEP:DGDEP,1:"@") D ^DIE
"RTN","DGMTSC1",35,0)
 D:+$G(DGMTDPCH)  S DGMTDPCH=0
"RTN","DGMTSC1",36,0)
 .S DGMTDPCH=$$ADJUST^DGMTSCU4(DGVINI,DFN,DGMTDT,DGVIRI)
"RTN","DGMTSC1",37,0)
 .Q
"RTN","DGMTSC1",38,0)
 Q
"RTN","DGMTSC3")
0^2^B5245052
"RTN","DGMTSC3",1,0)
DGMTSC3 ;ALB/RMO/CAW - Means Test Screen Deductible Expense ;23 JAN 1992 11:00 am [ 10/02/92  11:31 AM ]
"RTN","DGMTSC3",2,0)
 ;;5.3;Registration;**624**;Aug 13, 1993
"RTN","DGMTSC3",3,0)
 ;
"RTN","DGMTSC3",4,0)
 ; Input  -- DGVINI  Veteran Individual Annual Income IEN
"RTN","DGMTSC3",5,0)
 ;           DGVIRI  Veteran Income Relation IEN
"RTN","DGMTSC3",6,0)
 ;           DGVPRI  Veteran Patient Relation IEN
"RTN","DGMTSC3",7,0)
 ; Output -- None
"RTN","DGMTSC3",8,0)
 ;
"RTN","DGMTSC3",9,0)
EN ;Entry point for deductible expense screen
"RTN","DGMTSC3",10,0)
 S DGMTSCI=3 D HD^DGMTSCU
"RTN","DGMTSC3",11,0)
 D DIS
"RTN","DGMTSC3",12,0)
 S DGRNG="1-"_$S('DGDC:1,1:2) G EN^DGMTSCR
"RTN","DGMTSC3",13,0)
EN1 ;Entry point for read processor return
"RTN","DGMTSC3",14,0)
 S DGVIR0=$G(^DGMT(408.22,DGVIRI,0)),DGIN1("V")=$G(^DGMT(408.21,DGVINI,1))
"RTN","DGMTSC3",15,0)
 S DA=DGVINI,DIE="^DGMT(408.21,",DR="[DGMT ENTER/EDIT EXPENSES]" D ^DIE S:'$D(DGFIN) DGMTOUT=1
"RTN","DGMTSC3",16,0)
 I DGIN1("V")'=$G(^DGMT(408.21,DGVINI,1)) S DR="103////^S X=DUZ;104///^S X=""NOW""" D ^DIE K DA,DIE,DR
"RTN","DGMTSC3",17,0)
 I '$G(DGMTOUT),DGDR["102" D EN^DGMTSC31
"RTN","DGMTSC3",18,0)
Q K DGDC,DGDR,DGFIN,DGIN1,DGMTOUT,DGREL,DGVIR0,DGX,DGY,DTOUT,DUOUT
"RTN","DGMTSC3",19,0)
 G EN
"RTN","DGMTSC3",20,0)
 ;
"RTN","DGMTSC3",21,0)
DIS ;Display deductible expenses
"RTN","DGMTSC3",22,0)
 N DGCNT,DGDCS,DGDEP,DGIN1,DGINC,DGINR,DGREL,DGVIR0
"RTN","DGMTSC3",23,0)
 S DGVIR0=$G(^DGMT(408.22,DGVIRI,0)),DGIN1("V")=$G(^DGMT(408.21,DGVINI,1))
"RTN","DGMTSC3",24,0)
 S DGDC=$P(DGVIR0,"^",8) I DGDC D SET^DGMTSC31 S:'$D(DGDCS) DGDC=0
"RTN","DGMTSC3",25,0)
 D HIGH^DGMTSCU1(1,DGMTACT) W $J("Gross Medical Expenses: ",33),$S(+$P(DGIN1("V"),"^",12)'<0:$$AMT^DGMTSCU1(+$P(DGIN1("V"),"^",12)),1:"N/A")
"RTN","DGMTSC3",26,0)
 W !,$J("Adjusted Medical Expenses: ",36),$S(+$P(DGIN1("V"),"^")'<0:$$AMT^DGMTSCU1(+$P(DGIN1("V"),"^")),1:"N/A")
"RTN","DGMTSC3",27,0)
 W !,$J("Funeral and Burial Expenses: ",36),$S('$P(DGVIR0,"^",5)&('$P(DGVIR0,"^",8)):"N/A",1:$$AMT^DGMTSCU1($P(DGIN1("V"),"^",2)))
"RTN","DGMTSC3",28,0)
 W !,$J("Veteran's Educational Expenses: ",36),$$AMT^DGMTSCU1($P(DGIN1("V"),"^",3))
"RTN","DGMTSC3",29,0)
 W ! D HIGH^DGMTSCU1(2,DGMTACT) W ?7," Child's Education Expenses: ",$S('DGDC:"N/A",1:"") D DIS^DGMTSC31:DGDC
"RTN","DGMTSC3",30,0)
 Q
"RTN","DGMTSCC")
0^28^B31522709
"RTN","DGMTSCC",1,0)
DGMTSCC ;ALB/RMO,CAW,LBD,EG - Means Test Screen Completion ; 03/08/2005
"RTN","DGMTSCC",2,0)
 ;;5.3;Registration;**33,45,130,438,332,433,462,456,610,624**;Aug 13, 1993
"RTN","DGMTSCC",3,0)
 ;
"RTN","DGMTSCC",4,0)
 ; Input  -- DFN      Patient IEN
"RTN","DGMTSCC",5,0)
 ;           DGMTACT  Means Test Action
"RTN","DGMTSCC",6,0)
 ;           DGMTDT   Date of Test
"RTN","DGMTSCC",7,0)
 ;           DGMTYPT  Type of Test 1=MT 2=COPAY
"RTN","DGMTSCC",8,0)
 ;           DGMTPAR  Annual Means Test Parameters
"RTN","DGMTSCC",9,0)
 ;           DGVINI   Veteran Individual Annual Income IEN
"RTN","DGMTSCC",10,0)
 ;           DGVIRI   Veteran Income Relation IEN
"RTN","DGMTSCC",11,0)
 ;           DGVPRI   Veteran Patient Relation IEN
"RTN","DGMTSCC",12,0)
 ;           DGMTNWC  Net Worth Calculation flag
"RTN","DGMTSCC",13,0)
 ; Output -- DGERR    1=INCOMPLETE and 0=COMPLETE
"RTN","DGMTSCC",14,0)
 ;
"RTN","DGMTSCC",15,0)
EN N DGCAT,DGCOMF,DGDC,DGDET,DGIN0,DGIN1,DGIN2,DGINT,DGINTF,DGMTS,DGNC,DGND,DGNWT,DGNWTF,DGREF1,DGSP,DGTYC,DGTHA,DGTHB,DGVIR0,DGCOPS,DGCOST,DGTHG
"RTN","DGMTSCC",16,0)
 S DGERR=0
"RTN","DGMTSCC",17,0)
 I DGMTACT="ADD" D COM I 'Y!($D(DTOUT))!($D(DUOUT)) G Q
"RTN","DGMTSCC",18,0)
 S DGCOMF=1 D DEP^DGMTSCU2,INC^DGMTSCU3
"RTN","DGMTSCC",19,0)
 I 'DGINTF,'DGNWTF S DGREF1="" D REF G Q:$D(DTOUT)!($D(DUOUT))
"RTN","DGMTSCC",20,0)
 D CAT^DGMTSCU2,STA^DGMTSCU2
"RTN","DGMTSCC",21,0)
 D CHK I DGERR W !?3,*7,$S(DGMTYPT=1:"Means",1:"Copay")_" test cannot be completed." G Q
"RTN","DGMTSCC",22,0)
 I DGMTYPT=1,DGTYC="M",(DGNWT-DGDET)+$S(DGMTNWC:0,1:DGINT)'<$P(DGMTPAR,"^",8) D ADJ G Q:$D(DTOUT)!($D(DUOUT))
"RTN","DGMTSCC",23,0)
 I DGMTYPT=2,DGCAT="P" D ADJ G Q:$D(DTOUT)!($D(DUOUT))
"RTN","DGMTSCC",24,0)
 S DA=DGMTI,DIE="^DGMT(408.31,",DIE("NO^")="",DR="[DGMT ENTER/EDIT COMPLETION]" D ^DIE K DA,DIE,DR I '$D(DGFIN) S DGERR=1 G Q
"RTN","DGMTSCC",25,0)
 I DGMTACT="EDT",DGMTDT>DT D
"RTN","DGMTSCC",26,0)
 . N DATA S (DATA(.01),DATA(.07))=DT,DATA(2)=1 I $$UPD^DGENDBS(408.31,DGMTI,.DATA)
"RTN","DGMTSCC",27,0)
 W:DGMTYPT=1 !?3,"...means test status is ",$P($$MTS^DGMTU(DFN,DGMTS),"^"),"..."
"RTN","DGMTSCC",28,0)
 W:DGMTYPT=2 !?3,"...copay test status is ",$S(DGCAT="E":"EXEMPT",DGCAT="M":"NON-EXEMPT",DGCAT="P":"PENDING ADJUDICATION",1:"INCOMPLETE"),"..."
"RTN","DGMTSCC",29,0)
 D PRT
"RTN","DGMTSCC",30,0)
 ;
"RTN","DGMTSCC",31,0)
Q K DGFIN,DGREF,DTOUT,DUOUT,Y
"RTN","DGMTSCC",32,0)
 Q
"RTN","DGMTSCC",33,0)
 ;
"RTN","DGMTSCC",34,0)
COM ;Check if user wants to complete the means test
"RTN","DGMTSCC",35,0)
 N DIR
"RTN","DGMTSCC",36,0)
 S DIR("A")="Do you wish to complete the "_$S(DGMTYPT=1:"means",1:"copay exemption")_" test"
"RTN","DGMTSCC",37,0)
 S DIR("B")="YES",DIR(0)="Y" D ^DIR
"RTN","DGMTSCC",38,0)
 ; The following was added for LTC Copay Phase II (DG*5.3*433)
"RTN","DGMTSCC",39,0)
 I DGMTYPT=4,'Y D
"RTN","DGMTSCC",40,0)
 . W !,"NOTE: If you do not complete the LTC copay exemption test, the incomplete test",!?6,"will be deleted."
"RTN","DGMTSCC",41,0)
 . S DIR("A")="Do you wish to complete the copay exemption test"
"RTN","DGMTSCC",42,0)
 . S DIR("B")="YES",DIR(0)="Y" D ^DIR
"RTN","DGMTSCC",43,0)
 Q
"RTN","DGMTSCC",44,0)
 ;
"RTN","DGMTSCC",45,0)
REF ;Check if patient declines to provide income information
"RTN","DGMTSCC",46,0)
 N DIR,Y
"RTN","DGMTSCC",47,0)
 S DIR("A")="DECLINES TO GIVE INCOME INFORMATION"
"RTN","DGMTSCC",48,0)
 I $P($G(^DGMT(408.31,DGMTI,0)),"^",14)]"" S DIR("B")=$$YN^DGMTSCU1($P(^(0),"^",14))
"RTN","DGMTSCC",49,0)
 S DIR(0)="408.31,.14" D ^DIR K DIR G REFQ:$D(DTOUT)!($D(DUOUT))
"RTN","DGMTSCC",50,0)
 S:Y DGREF="" Q:'$D(DGREF)!($D(DGREF1))!(DGMTYPT'=1)  S DGCAT="C" D STA^DGMTSCU2
"RTN","DGMTSCC",51,0)
REFQ Q
"RTN","DGMTSCC",52,0)
 ;
"RTN","DGMTSCC",53,0)
CHK ;Check if means test can be completed
"RTN","DGMTSCC",54,0)
 N DGA,DGD,DGDEP,DGREL,DGL,DGM,I
"RTN","DGMTSCC",55,0)
 D GETREL^DGMTU11(DFN,"CS",$$LYR^DGMTSCU1(DGMTDT),$S($G(DGMTI):DGMTI,1:""))
"RTN","DGMTSCC",56,0)
 S DGM=$P(DGVIR0,"^",5),DGL=$P(DGVIR0,"^",6),DGA=$P(DGVIR0,"^",7),DGD=$P(DGVIR0,"^",8)
"RTN","DGMTSCC",57,0)
 I DGM']""!(DGM&(DGL']""))!(DGM&('DGL)&(DGA']"")) W !?3,"Marital section must be completed." S DGERR=1
"RTN","DGMTSCC",58,0)
 I DGM,'$D(DGREL("S")),'$D(DGREF) W !?3,"Married is 'YES'.  An active spouse for this means test does not exist." S DGERR=1
"RTN","DGMTSCC",59,0)
 I 'DGM,$D(DGREL("S")) W !?3,"An active spouse exists for this means test. Married should be 'YES'." S DGERR=1
"RTN","DGMTSCC",60,0)
 I DGD']"" W !?3,"Dependent Children section must be completed." S DGERR=1
"RTN","DGMTSCC",61,0)
 I DGD,'$D(DGREL("C")) W !?3,"Dependent Children is 'YES'.  No active children exist." S DGERR=1
"RTN","DGMTSCC",62,0)
 I 'DGD,$D(DGREL("C")) W !?3,"Active children exist.  Dependent Children should be 'YES'." S DGERR=1
"RTN","DGMTSCC",63,0)
 I DGMTYPT=1,'$D(DGREF),DGTYC="M",'DGNWTF W !?3,"A status of ",$$GETNAME^DGMTH(DGMTS)," requires property information." S DGERR=1
"RTN","DGMTSCC",64,0)
 I DGMTYPT=2,'DGNWTF,DGCAT="E",$$ASKNW^DGMTCOU W !?3,"Patient is in an 'EXEMPT' status and requires property information." S DGERR=1
"RTN","DGMTSCC",65,0)
 I DGDET>DGINT W !?3,"Patient's deductible expenses cannot exceed income." S DGERR=1
"RTN","DGMTSCC",66,0)
 Q:$G(DGERR)
"RTN","DGMTSCC",67,0)
 N CNT,ACT,DGDEP,FLAG,DGINCP
"RTN","DGMTSCC",68,0)
 D INIT^DGDEP S CNT=0 D
"RTN","DGMTSCC",69,0)
 . F  S CNT=$O(DGDEP(CNT)) Q:'CNT  I $P(DGDEP(CNT),U,2)="SPOUSE" D  Q:$G(DGERR)
"RTN","DGMTSCC",70,0)
 . . D GETIENS^DGMTU2(DFN,$P(DGDEP(CNT),U,20),DGMTDT)
"RTN","DGMTSCC",71,0)
 . . S DGINCP=$G(^DGMT(408.22,+DGIRI,"MT")) S:DGINCP FLAG=$G(FLAG)+1
"RTN","DGMTSCC",72,0)
 . . I $G(FLAG)>1 W !?3,"Patient has more than one spouse for this means test." S DGERR=1
"RTN","DGMTSCC",73,0)
 Q
"RTN","DGMTSCC",74,0)
 ;
"RTN","DGMTSCC",75,0)
ADJ ;Adjudicate the means test
"RTN","DGMTSCC",76,0)
 N DIR,Y
"RTN","DGMTSCC",77,0)
 S DIR("?",1)="Since assets exceed the threshold, the "_$S(DGMTYPT=1:"means",1:"copay")_" test can"
"RTN","DGMTSCC",78,0)
 S DIR("?",2)="be sent to adjudication.  If the "_$S(DGMTYPT=1:"means",1:"copay")_" test is not"
"RTN","DGMTSCC",79,0)
 S DIR("?")="adjudicated, the patient will be placed in "_$S(DGMTYPT=1&(DGTHG>DGTHA):"GMT Copay Required",DGMTYPT=1:"MT Copay Required",1:"Non-exempt")_" status."
"RTN","DGMTSCC",80,0)
 S DIR("A")="Do you wish to send this case to adjudication"
"RTN","DGMTSCC",81,0)
 S DIR("B")="YES",DIR(0)="Y" D ^DIR G ADJQ:$D(DTOUT)!($D(DUOUT))
"RTN","DGMTSCC",82,0)
 S DGCAT=$S(Y:"P",DGMTYPT=1&(DGTHG>DGTHA):"G",DGMTYPT=1:"C",1:"N") D STA^DGMTSCU2
"RTN","DGMTSCC",83,0)
ADJQ Q
"RTN","DGMTSCC",84,0)
 ;
"RTN","DGMTSCC",85,0)
 ;DG*5.3*624 - REMOVE 10-10F AND REPLACE WITH 10-10EZ/EZR
"RTN","DGMTSCC",86,0)
PRT ;Print the 10-10EZR or 10-10EZ
"RTN","DGMTSCC",87,0)
 N EZFLAG
"RTN","DGMTSCC",88,0)
 I $D(DGFINOP) DO
"RTN","DGMTSCC",89,0)
 .W !!,"Options for printing financial assessment information will follow."
"RTN","DGMTSCC",90,0)
 .W !,"Generally, you should answer 'YES' to 'PRINT 10-10EZR?' after updating"
"RTN","DGMTSCC",91,0)
 .W !,"patient demographic or financial information.  Answer 'YES' to 'PRINT"
"RTN","DGMTSCC",92,0)
 .W !,"10-10EZ?' after entering new patient demographic and financial information."
"RTN","DGMTSCC",93,0)
 S EZFLAG=$$SEL1010^DG1010P("EZR/EZ")
"RTN","DGMTSCC",94,0)
 Q:(EZFLAG=-1)
"RTN","DGMTSCC",95,0)
 D QUE
"RTN","DGMTSCC",96,0)
 ;
"RTN","DGMTSCC",97,0)
PRTQ Q
"RTN","DGMTSCC",98,0)
 ;
"RTN","DGMTSCC",99,0)
 ;DG*5.3*624 - REMOVE 10-10F AND REPLACE WITH 10-10EZ/EZR
"RTN","DGMTSCC",100,0)
QUE ;
"RTN","DGMTSCC",101,0)
 N X
"RTN","DGMTSCC",102,0)
 I $G(EZFLAG)="EZ" S X=$$ENEZ^EASEZPDG(DFN,DGMTI)
"RTN","DGMTSCC",103,0)
 I $G(EZFLAG)="EZR" S X=$$ENEZR^EASEZPDG(DFN,DGMTI)
"RTN","DGMTSCC",104,0)
 Q
"RTN","DGMTSCU4")
0^20^B11617563
"RTN","DGMTSCU4",1,0)
DGMTSCU4 ;ALB/CMF - Means Test Maximum Annual Pension Rate Utilities ;4 OCT 2004 3:33 pm
"RTN","DGMTSCU4",2,0)
 ;;5.3;Registration;**624**;Aug 13, 1993
"RTN","DGMTSCU4",3,0)
 ;
"RTN","DGMTSCU4",4,0)
 Q
"RTN","DGMTSCU4",5,0)
MEDEXP(DGGRS,DGADJ,DGYR,DGDEP) ;
"RTN","DGMTSCU4",6,0)
 ; in:   DGGRS = gross medical expense, default is 0
"RTN","DGMTSCU4",7,0)
 ;       DGADJ = adjusted medical expense, default is 0
"RTN","DGMTSCU4",8,0)
 ;       DGYR  = rate table year
"RTN","DGMTSCU4",9,0)
 ;       DGDEP = # of dependents
"RTN","DGMTSCU4",10,0)
 ; out:  if gross >0, adjusted medical expense
"RTN","DGMTSCU4",11,0)
 ;       if adjusted > 0, gross medical expense (back-compute)
"RTN","DGMTSCU4",12,0)
 ;       else 0
"RTN","DGMTSCU4",13,0)
 N DGRTN,DGMAP,DGPER,DGADD
"RTN","DGMTSCU4",14,0)
 ; initialize variables, quit if inappropriate
"RTN","DGMTSCU4",15,0)
 S DGRTN=0
"RTN","DGMTSCU4",16,0)
 S DGGRS=$S(+$G(DGGRS)>0:DGGRS,1:0)
"RTN","DGMTSCU4",17,0)
 S DGADJ=$S(+DGGRS:0,+$G(DGADJ)>0:DGADJ,1:0)
"RTN","DGMTSCU4",18,0)
 Q:(DGGRS=0)&(DGADJ=0) DGRTN
"RTN","DGMTSCU4",19,0)
 S DGYR=$S(+$G(DGYR):DGYR,1:-1)
"RTN","DGMTSCU4",20,0)
 Q:DGYR=-1 DGRTN
"RTN","DGMTSCU4",21,0)
 S DGDEP=$S(+$G(DGDEP):+DGDEP,1:0)
"RTN","DGMTSCU4",22,0)
 ;
"RTN","DGMTSCU4",23,0)
 ; get global % rate
"RTN","DGMTSCU4",24,0)
 S DGPER=$$GET^XPAR("PKG","DGMT MAPR GLOBAL RATE",DGYR)
"RTN","DGMTSCU4",25,0)
 Q:DGPER="" DGRTN
"RTN","DGMTSCU4",26,0)
 ;
"RTN","DGMTSCU4",27,0)
 ; get max annual value
"RTN","DGMTSCU4",28,0)
 I DGDEP=0 S DGMAP=$$GET^XPAR("PKG","DGMT MAPR 0 DEPENDENTS",DGYR)
"RTN","DGMTSCU4",29,0)
 I DGDEP>0 S DGMAP=$$GET^XPAR("PKG","DGMT MAPR 1 DEPENDENTS",DGYR)
"RTN","DGMTSCU4",30,0)
 S DGADD=0
"RTN","DGMTSCU4",31,0)
 D:DGDEP>1
"RTN","DGMTSCU4",32,0)
 .S DGADD=$$GET^XPAR("PKG","DGMT MAPR N DEPENDENTS",DGYR)
"RTN","DGMTSCU4",33,0)
 .S DGADD=DGADD*(DGDEP-1)
"RTN","DGMTSCU4",34,0)
 .Q
"RTN","DGMTSCU4",35,0)
 ;
"RTN","DGMTSCU4",36,0)
 S DGRTN=(DGMAP+DGADD)*DGPER/100
"RTN","DGMTSCU4",37,0)
 D:DGGRS>0
"RTN","DGMTSCU4",38,0)
 .S DGRTN=DGGRS-DGRTN
"RTN","DGMTSCU4",39,0)
 .S DGRTN=$S(DGRTN>0:DGRTN,1:0)
"RTN","DGMTSCU4",40,0)
 .Q
"RTN","DGMTSCU4",41,0)
 ;
"RTN","DGMTSCU4",42,0)
 D:DGADJ>0
"RTN","DGMTSCU4",43,0)
 .S DGRTN=DGADJ+DGRTN
"RTN","DGMTSCU4",44,0)
 .S DGRTN=$S(DGRTN>0:DGRTN,1:0)
"RTN","DGMTSCU4",45,0)
 .Q
"RTN","DGMTSCU4",46,0)
 ;
"RTN","DGMTSCU4",47,0)
 Q DGRTN
"RTN","DGMTSCU4",48,0)
 ;
"RTN","DGMTSCU4",49,0)
ND(DGP1,DGP2,DGP3) ;return # of deps for a test
"RTN","DGMTSCU4",50,0)
 ; in:   dgp1:DFN = patient ien
"RTN","DGMTSCU4",51,0)
 ;       dgp2:DGMTDT = means test date
"RTN","DGMTSCU4",52,0)
 ;       dgp3:DGVIRI = veteran income relation ien
"RTN","DGMTSCU4",53,0)
 ; out:  DGND = # of dependents for a test 
"RTN","DGMTSCU4",54,0)
 N DGDC,DGNC,DGND,DGSP,DGVIR0,DFN,DGMTDT,DGVIRI
"RTN","DGMTSCU4",55,0)
 S DFN=+$G(DGP1)
"RTN","DGMTSCU4",56,0)
 S DGMTDT=+$G(DGP2)
"RTN","DGMTSCU4",57,0)
 S DGVIRI=+$G(DGP3)
"RTN","DGMTSCU4",58,0)
 Q:(DFN=0)!(DGMTDT=0)!(DGVIRI=0) 0
"RTN","DGMTSCU4",59,0)
 D DEP^DGMTSCU2
"RTN","DGMTSCU4",60,0)
 Q $S(DGND<0:0,DGND<21:DGND,1:20)
"RTN","DGMTSCU4",61,0)
 ;
"RTN","DGMTSCU4",62,0)
GRSADJ(DGP1,DGP2,DGP3,DGP4) ;write adjusted medical expense
"RTN","DGMTSCU4",63,0)
 ;called from [DGMT ENTER/EDIT EXPENSES] edit template
"RTN","DGMTSCU4",64,0)
 ; in:   see $$ADJUST
"RTN","DGMTSCU4",65,0)
 ; out:  text string with adjusted medical expense
"RTN","DGMTSCU4",66,0)
 N DGADJ
"RTN","DGMTSCU4",67,0)
 S DGADJ=$$ADJUST(DGP1,DGP2,DGP3,DGP4)
"RTN","DGMTSCU4",68,0)
 S DGADJ=$$AMT^DGMTSCU1(DGADJ)
"RTN","DGMTSCU4",69,0)
 Q "ADJUSTED MEDICAL EXPENSES: "_DGADJ_"//"
"RTN","DGMTSCU4",70,0)
 ;
"RTN","DGMTSCU4",71,0)
ADJUST(DGP1,DGP2,DGP3,DGP4) ;derive adjust med exp from gross med exp
"RTN","DGMTSCU4",72,0)
 ; in:   dgp1:DGVINI = veteran income test ien
"RTN","DGMTSCU4",73,0)
 ;       dgp2:DGDFN = patient ien
"RTN","DGMTSCU4",74,0)
 ;       dgp3:DGMTDT = means test date
"RTN","DGMTSCU4",75,0)
 ;       dgp4:DGVIRI = veteran income relation ien
"RTN","DGMTSCU4",76,0)
 ; out:  adjusted medical expense or -1 if not set
"RTN","DGMTSCU4",77,0)
 N DGND,DGYR,DGGRS,DGADJ,DGVINI,DGDFN,DGMTDT,DGVIRI
"RTN","DGMTSCU4",78,0)
 S DGVINI=+$G(DGP1)
"RTN","DGMTSCU4",79,0)
 S DGDFN=+$G(DGP2)
"RTN","DGMTSCU4",80,0)
 S DGMTDT=+$G(DGP3)
"RTN","DGMTSCU4",81,0)
 S DGVIRI=+$G(DGP4)
"RTN","DGMTSCU4",82,0)
 Q:(DGVINI=0)!(DGDFN=0)!(DGMTDT=0)!(DGVIRI=0) -1
"RTN","DGMTSCU4",83,0)
 Q:'$D(^DGMT(408.21,DGVINI,1)) 0
"RTN","DGMTSCU4",84,0)
 S DGND=$$ND(DGDFN,DGMTDT,DGVIRI)
"RTN","DGMTSCU4",85,0)
 S DGYR=$$YEAR(DGMTDT)
"RTN","DGMTSCU4",86,0)
 S DGGRS=$P(^DGMT(408.21,DGVINI,1),U,12)
"RTN","DGMTSCU4",87,0)
 S DGADJ=$$MEDEXP(DGGRS,,DGYR,DGND)
"RTN","DGMTSCU4",88,0)
 S $P(^DGMT(408.21,DGVINI,1),U)=DGADJ
"RTN","DGMTSCU4",89,0)
 Q DGADJ
"RTN","DGMTSCU4",90,0)
 ;
"RTN","DGMTSCU4",91,0)
GROSS(DGP1,DGP2,DGP3,DGP4) ;derive gross med exp from adj med exp
"RTN","DGMTSCU4",92,0)
 ; in:   dgp1:DGVINI = veteran income test ien
"RTN","DGMTSCU4",93,0)
 ;       dgp2:DGDFN = patient ien
"RTN","DGMTSCU4",94,0)
 ;       dgp3:DGMTDT = means test date
"RTN","DGMTSCU4",95,0)
 ;       dgp4:DGVIRI = veteran income relation ien
"RTN","DGMTSCU4",96,0)
 ; out:  gross medical expense reset if necessary
"RTN","DGMTSCU4",97,0)
 N DGND,DGYR,DGGRS,DGADJ,DGVINI,DGDFN,DGMTDT,DGVIRI
"RTN","DGMTSCU4",98,0)
 S DGVINI=+$G(DGP1)
"RTN","DGMTSCU4",99,0)
 S DGDFN=+$G(DGP2)
"RTN","DGMTSCU4",100,0)
 S DGMTDT=+$G(DGP3)
"RTN","DGMTSCU4",101,0)
 S DGVIRI=+$G(DGP4)
"RTN","DGMTSCU4",102,0)
 Q:(DGVINI=0)!(DGDFN=0)!(DGMTDT=0)!(DGVIRI=0)
"RTN","DGMTSCU4",103,0)
 Q:'$D(^DGMT(408.21,DGVINI,1))
"RTN","DGMTSCU4",104,0)
 S DGGRS=+$P(^DGMT(408.21,DGVINI,1),U,12)
"RTN","DGMTSCU4",105,0)
 S DGADJ=+$P(^DGMT(408.21,DGVINI,1),U,1)
"RTN","DGMTSCU4",106,0)
 Q:DGGRS+DGADJ=0
"RTN","DGMTSCU4",107,0)
 Q:DGADJ=0
"RTN","DGMTSCU4",108,0)
 S DGND=$$ND(DGDFN,DGMTDT,DGVIRI)
"RTN","DGMTSCU4",109,0)
 S DGYR=$$YEAR(DGMTDT)
"RTN","DGMTSCU4",110,0)
 Q:DGADJ=$$MEDEXP(DGGRS,,DGYR,DGND)
"RTN","DGMTSCU4",111,0)
 S DGGRS=$$MEDEXP(,DGADJ,DGYR,DGND)
"RTN","DGMTSCU4",112,0)
 S $P(^DGMT(408.21,DGVINI,1),U,12)=DGGRS
"RTN","DGMTSCU4",113,0)
 Q
"RTN","DGMTSCU4",114,0)
 ;
"RTN","DGMTSCU4",115,0)
YEAR(DGMTDT) ;get MAPR year from means test date
"RTN","DGMTSCU4",116,0)
 Q $$FMTE^XLFDT($E(DGMTDT,1,3)_"0000",1)-2
"RTN","DGMTSCU4",117,0)
 ;
"RTN","DGMTSCU4",118,0)
AGME101(DGP1) ;force recalculate gross upon FM change to adjusted
"RTN","DGMTSCU4",119,0)
 ; in:   dgp1:~DGVINI = veteran income test ien
"RTN","DGMTSCU4",120,0)
 ; out:  queued task
"RTN","DGMTSCU4",121,0)
 ; called from AGME101 x-ref of 408.21/1.01
"RTN","DGMTSCU4",122,0)
 N DGVINI
"RTN","DGMTSCU4",123,0)
 S DGVINI=+$G(DGP1)
"RTN","DGMTSCU4",124,0)
 Q:'DGVINI
"RTN","DGMTSCU4",125,0)
 Q:'$D(^DGMT(408.21,DGVINI,1))
"RTN","DGMTSCU4",126,0)
 S $P(^DGMT(408.21,DGVINI,1),U,12)=0
"RTN","DGMTSCU4",127,0)
 Q
"RTN","DGMTSCU4",128,0)
 ;
"RTN","DGMTU22")
0^60^B16752051
"RTN","DGMTU22",1,0)
DGMTU22 ;ALB/CAW - COPY PRIOR YEAR INCOME INFORMATION; 6/18/92
"RTN","DGMTU22",2,0)
 ;;5.3;Registration;**33,45,624**;Aug 13, 1993
"RTN","DGMTU22",3,0)
 ;
"RTN","DGMTU22",4,0)
COPY(DFN,DGDT,DGMTI) ;
"RTN","DGMTU22",5,0)
 ;  Input:
"RTN","DGMTU22",6,0)
 ;        DFN - Patient IFN
"RTN","DGMTU22",7,0)
 ;       DGDT - Date passed in where you want the prior years
"RTN","DGMTU22",8,0)
 ;              income data to be copied into the last year
"RTN","DGMTU22",9,0)
 ;              Ex.  If DGDT is 6/30/92 the income from 1990 can
"RTN","DGMTU22",10,0)
 ;                   be optionally copied into 1991 if available.
"RTN","DGMTU22",11,0)
 ;      DGMTI - Current MT IEN (optional)
"RTN","DGMTU22",12,0)
 ;  Output:
"RTN","DGMTU22",13,0)
 ;          Y - 0 not copied
"RTN","DGMTU22",14,0)
 ;              1 copied
"RTN","DGMTU22",15,0)
 ;             -1 timed out or ^
"RTN","DGMTU22",16,0)
 N DGIN1,DGMT,DGPRI,DGFL,DGLY,DGLST,DGPY,DGI,DGINI,DGIRI,DGERR,DGREL,DGINC,DGINR,DGDEP,DEP,DGMTS,DGMTD
"RTN","DGMTU22",17,0)
 D INIT I Y'>0 W !,"Cannot copy information.  Either there is no prior year income",!,"or there is income already on file for this year." H 2 G COPYQ
"RTN","DGMTU22",18,0)
 D ASK I Y'>0 W !,"Cannot copy information.  Either there is no prior year income",!,"or there is income already on file for this year." H 2 G COPYQ
"RTN","DGMTU22",19,0)
 D STUFF
"RTN","DGMTU22",20,0)
COPYQ ;
"RTN","DGMTU22",21,0)
 K DTOUT Q
"RTN","DGMTU22",22,0)
INIT ; Init
"RTN","DGMTU22",23,0)
 D NEW^DGRPEIS1 I DGPRI'>0 S Y=0 G INITQ ; obtain pt's relation IEN
"RTN","DGMTU22",24,0)
 S DGLY=$$LYR^DGMTSCU1(DGDT),DGPY=$$LYR^DGMTSCU1(DGLY)
"RTN","DGMTU22",25,0)
 S DGLST=$$LST^DGMTU(DFN,DGDT-1) I DGLST']"" S Y=1 G INITQ
"RTN","DGMTU22",26,0)
 F DGI=4,5,15 I $P(^DGMT(408.31,+DGLST,0),U,DGI)["-" W !,"Previous year data contains a negative amount.  Data cannot be copied." H 3 S Y=0 G INITQ
"RTN","DGMTU22",27,0)
 S Y=1
"RTN","DGMTU22",28,0)
INITQ Q
"RTN","DGMTU22",29,0)
ASK ; Can user copy?
"RTN","DGMTU22",30,0)
 N DGINR S Y=1
"RTN","DGMTU22",31,0)
 I '$D(^DGMT(408.21,"AI",+DGPRI,-DGPY)) S Y=0 Q
"RTN","DGMTU22",32,0)
 I $D(^DGMT(408.21,"AI",+DGPRI,-DGLY)) D
"RTN","DGMTU22",33,0)
 .S Y=$$NOBUCKS(DFN,DGDT)
"RTN","DGMTU22",34,0)
 Q
"RTN","DGMTU22",35,0)
 ;
"RTN","DGMTU22",36,0)
STUFF ; Copy infomation into last year
"RTN","DGMTU22",37,0)
 ;
"RTN","DGMTU22",38,0)
 ; Get prior year info IENs
"RTN","DGMTU22",39,0)
 I $G(DGMTI) N DGMT S DGMT=$$LST^DGMTU(DFN,$P(^DGMT(408.31,DGMTI,0),U)),DGMT=+$$LST^DGMTU(DFN,($P(DGMT,U,2)-1))
"RTN","DGMTU22",40,0)
 N Y D ALL^DGMTU21(DFN,"VSD",DGLY,"IPR",$G(DGMT))
"RTN","DGMTU22",41,0)
 ; Save prior year info
"RTN","DGMTU22",42,0)
 N DGCNT,DGPRTY
"RTN","DGMTU22",43,0)
 S DGCNT=0 F DGPRTY="V","S","D" I $D(DGREL(DGPRTY)) D
"RTN","DGMTU22",44,0)
 .I "D"[DGPRTY F  S DGCNT=$O(DGREL(DGPRTY,DGCNT)) Q:'DGCNT  D SET(DFN,DGDT,+DGREL(DGPRTY,DGCNT),+$G(DGINC(DGPRTY,DGCNT)),+$G(DGINR(DGPRTY,DGCNT)),$G(DGMTI))
"RTN","DGMTU22",45,0)
 .I "SV"[DGPRTY D SET(DFN,DGDT,+DGREL(DGPRTY),+$G(DGINC(DGPRTY)),+$G(DGINR(DGPRTY)),+$G(DGMTI))
"RTN","DGMTU22",46,0)
 Q
"RTN","DGMTU22",47,0)
SET(DFN,DGDT,DGPRI,DGPINI,DGPINR,DGMTI) ; Create last year IENs
"RTN","DGMTU22",48,0)
 ;
"RTN","DGMTU22",49,0)
 N DGERR,DGINI,DGIRI,DGMT,I,DGGRS
"RTN","DGMTU22",50,0)
 F I=0:1:2 S DGMT(I)=$G(^DGMT(408.21,DGPINI,I))
"RTN","DGMTU22",51,0)
 S DGMT(3)=$G(^DGMT(408.22,DGPINR,0))
"RTN","DGMTU22",52,0)
 D GETIENS^DGMTU2(DFN,DGPRI,DGDT) G SETQ:DGERR
"RTN","DGMTU22",53,0)
 ; Set info into global and index
"RTN","DGMTU22",54,0)
 S $P(^DGMT(408.22,+DGIRI,0),U,3,99)=$P(DGMT(3),U,3,99)
"RTN","DGMTU22",55,0)
 I $G(DGMTI) S ^DGMT(408.22,+DGIRI,"MT")=+DGMTI
"RTN","DGMTU22",56,0)
 S DIK="^DGMT(408.22,",DA=DGIRI D IX^DIK K DA,DIK
"RTN","DGMTU22",57,0)
 S $P(^DGMT(408.21,+DGINI,0),U,3,99)=$P(DGMT(0),U,3,99)
"RTN","DGMTU22",58,0)
 F I=1:1:2 I DGMT(I)'="" S ^DGMT(408.21,+DGINI,I)=DGMT(I)
"RTN","DGMTU22",59,0)
 S DGGRS=$P(DGMT(1),U,12) ;dg624 - preserve gross from 'AGME101' xref
"RTN","DGMTU22",60,0)
 S DIK="^DGMT(408.21,",DA=DGINI D IX^DIK K DA,DIK
"RTN","DGMTU22",61,0)
 D:+DGGRS  ;dg624 - if gross, restore it & force recalc of adjusted
"RTN","DGMTU22",62,0)
 . S $P(^DGMT(408.21,+DGINI,1),U,12)=DGGRS
"RTN","DGMTU22",63,0)
 . S $P(^DGMT(408.21,+DGINI,1),U,1)=""
"RTN","DGMTU22",64,0)
SETQ Q
"RTN","DGMTU22",65,0)
NOBUCKS(DFN,DGDT) ; Used by Income Screen Checks if BOTH
"RTN","DGMTU22",66,0)
 ;  NO meaningful Income Data for Prior Year
"RTN","DGMTU22",67,0)
 ;  AND there is data for Year before Prior Year
"RTN","DGMTU22",68,0)
 ;  2=YES (but some edit/entry in 408.22),1=YES & 0=NO
"RTN","DGMTU22",69,0)
 ;  ** REQUIRES DGINR("V")
"RTN","DGMTU22",70,0)
 N DGCURR,DGPRIEN,DGPRIOR,DGPY,DGLY,DGIAI,DGIR,DGY,DGINP
"RTN","DGMTU22",71,0)
 I $G(DGNOCOPY) S DGY=0 G QTNB
"RTN","DGMTU22",72,0)
 S:'$D(DGDT) DGDT=DT
"RTN","DGMTU22",73,0)
 S DGLY=$E(DGDT,1,3)_"0000"-10000,DGPY=DGLY-10000
"RTN","DGMTU22",74,0)
 S (DGPRIOR,DGCURR)=0
"RTN","DGMTU22",75,0)
 F DGPRIEN=0:0 S DGPRIEN=$O(^DGPR(408.12,"B",DFN,DGPRIEN)) Q:'DGPRIEN  D
"RTN","DGMTU22",76,0)
 .S:$D(^DGMT(408.21,"AI",+DGPRIEN,-DGPY)) DGPRIOR=DGPRIOR+1
"RTN","DGMTU22",77,0)
 .S DGIAI=$$IAI^DGMTU3(+DGPRIEN,DGLY)
"RTN","DGMTU22",78,0)
 .I DGIAI]"" D
"RTN","DGMTU22",79,0)
 ..S DGCURR=DGCURR+$S($P($G(^DGMT(408.21,DGIAI,0)),U,8,18)'?."^":1,($P($G(^(1)),U,1,3)]""):1,($P($G(^(2)),U,1,5)]""):1,1:0)
"RTN","DGMTU22",80,0)
 ..;S DGINP=$O(^DGMT(408.22,"AIND",+DGIAI,"")) I $P($G(^DGMT(408.22,+DGINP,"MT")),U) S DGCURR=DGCURR+1
"RTN","DGMTU22",81,0)
 I 'DGPRIOR!DGCURR S DGY=0 G QTNB
"RTN","DGMTU22",82,0)
 S DGIR=$G(^DGMT(408.22,+$G(DGINR("V")),0))
"RTN","DGMTU22",83,0)
 S DGY=$S($P(DGIR,U,5)]"":2,($P(DGIR,U,13)]""):2,1:1)
"RTN","DGMTU22",84,0)
QTNB Q DGY
"RTN","DGMTU23")
0^59^B30264819
"RTN","DGMTU23",1,0)
DGMTU23 ;ALB/CAW/LD,LBD - Display means test information 12/20/01
"RTN","DGMTU23",2,0)
 ;;5.3;Registration;**33,182,254,272,420,435,456,624**;Aug 13, 1993
"RTN","DGMTU23",3,0)
 ;
"RTN","DGMTU23",4,0)
 ;
"RTN","DGMTU23",5,0)
DISPLAY(DGMTI,DGMTYPT) ;Display means test data
"RTN","DGMTU23",6,0)
 ;          Input:  DGMTI - IEN of MT
"RTN","DGMTU23",7,0)
 ;                  DGMTYPT - Type of Test
"RTN","DGMTU23",8,0)
 ;         Output:  None
"RTN","DGMTU23",9,0)
 N DGFCOL,DGSCOL,DGMTDIS,DGMTDI2,DGMTWP,WP,X,X1,Y,Y1,Z,DGSOURCE
"RTN","DGMTU23",10,0)
 S (DGMTWP,WP)=0,DGFCOL=24,DGSCOL=65
"RTN","DGMTU23",11,0)
 S DGMTDIS=^DGMT(408.31,DGMTI,0) I $D(^("C")) F  S DGMTWP=$O(^DGMT(408.31,DGMTI,"C",DGMTWP)) Q:'DGMTWP  S DGMTDIS(DGMTWP)=^(DGMTWP,0)
"RTN","DGMTU23",12,0)
 S X="",X=$$SETSTR^VALM1("Patient:",X,15,8)
"RTN","DGMTU23",13,0)
 S X=$$SETSTR^VALM1($P(^DPT($P(DGMTDIS,U,2),0),U),X,DGFCOL,25)
"RTN","DGMTU23",14,0)
 S X=$$SETSTR^VALM1("Date of Test:",X,51,13)
"RTN","DGMTU23",15,0)
 S X=$$SETSTR^VALM1($$FTIME^DGMTUTL($P(DGMTDIS,U)),X,DGSCOL,15)
"RTN","DGMTU23",16,0)
 W !!,X
"RTN","DGMTU23",17,0)
 S X="",X=$$SETSTR^VALM1("Total Dependents:",X,6,17)
"RTN","DGMTU23",18,0)
 S X=$$SETSTR^VALM1($P(DGMTDIS,U,18),X,DGFCOL,25)
"RTN","DGMTU23",19,0)
 S X=$$SETSTR^VALM1("Type Of Test:",X,51,13)
"RTN","DGMTU23",20,0)
 S X=$$SETSTR^VALM1($P($G(^DG(408.33,+$P(DGMTDIS,U,19),0)),U),X,DGSCOL,15)
"RTN","DGMTU23",21,0)
 W !,X
"RTN","DGMTU23",22,0)
 S X="",X=$$SETSTR^VALM1("Status:",X,16,7)
"RTN","DGMTU23",23,0)
 S X=$$SETSTR^VALM1($P(^DG(408.32,$P(DGMTDIS,U,3),0),U),X,DGFCOL,25)
"RTN","DGMTU23",24,0)
 S X=$$SETSTR^VALM1("Date/Time Completed:",X,44,20)
"RTN","DGMTU23",25,0)
 S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,7)'="":$$FTIME^DGMTUTL($P(DGMTDIS,U,7)),1:""),X,DGSCOL,15)
"RTN","DGMTU23",26,0)
 W !,X
"RTN","DGMTU23",27,0)
 S X="",X=$$SETSTR^VALM1("Primary Test For Year:",X,1,22)
"RTN","DGMTU23",28,0)
 S X1=$G(^DGMT(408.31,DGMTI,"PRIM")),X=$$SETSTR^VALM1($S(X1=1:"YES",X1=0:"NO",1:"UNKNOWN"),X,DGFCOL,25)
"RTN","DGMTU23",29,0)
 S X=$$SETSTR^VALM1("Source Of Test:",X,49,15)
"RTN","DGMTU23",30,0)
 S DGSOURCE=$$SR^DGMTAUD1(DGMTDIS)
"RTN","DGMTU23",31,0)
 I DGSOURCE="OTHER FACILITY" S DGSOURCE=$P($G(^DGMT(408.31,DGMTI,2)),"^",5)
"RTN","DGMTU23",32,0)
 S X=$$SETSTR^VALM1(DGSOURCE,X,DGSCOL,15)
"RTN","DGMTU23",33,0)
 W !,X
"RTN","DGMTU23",34,0)
 S X="",X=$$SETSTR^VALM1("Income:",X,16,7)
"RTN","DGMTU23",35,0)
 S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,4)'="":"$"_$P(DGMTDIS,U,4),1:""),X,DGFCOL,25)
"RTN","DGMTU23",36,0)
 S X=$$SETSTR^VALM1("Completed By:",X,51,13)
"RTN","DGMTU23",37,0)
 S X=$$SETSTR^VALM1($P($G(^VA(200,+$P(DGMTDIS,U,6),0)),U),X,DGSCOL,15)
"RTN","DGMTU23",38,0)
 W !,X
"RTN","DGMTU23",39,0)
 S X=""
"RTN","DGMTU23",40,0)
 I DGMTYPT=1 D
"RTN","DGMTU23",41,0)
 .S X=$$SETSTR^VALM1("Net Worth:",X,13,10)
"RTN","DGMTU23",42,0)
 .S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,5)'="":"$"_$P(DGMTDIS,U,5),1:""),X,DGFCOL,25)
"RTN","DGMTU23",43,0)
 .S X=$$SETSTR^VALM1("Date/Time Category Changed:",X,37,28)
"RTN","DGMTU23",44,0)
 .S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,9)'="":$$FTIME^DGMTUTL($P(DGMTDIS,U,9)),1:""),X,DGSCOL,15)
"RTN","DGMTU23",45,0)
 .W !,X
"RTN","DGMTU23",46,0)
 S X=""
"RTN","DGMTU23",47,0)
 S X=$$SETSTR^VALM1("Deductible Expenses:",X,3,20)
"RTN","DGMTU23",48,0)
 S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,15)'="":$$AMT^DGMTSCU1($P(DGMTDIS,U,15)),1:""),X,DGFCOL,25)
"RTN","DGMTU23",49,0)
 I DGMTYPT=1 D
"RTN","DGMTU23",50,0)
 .S X=$$SETSTR^VALM1("Category Changed By:",X,44,25)
"RTN","DGMTU23",51,0)
 .S X=$$SETSTR^VALM1($P($G(^VA(200,+$P(DGMTDIS,U,8),0)),U),X,DGSCOL,15)
"RTN","DGMTU23",52,0)
 W !,X
"RTN","DGMTU23",53,0)
 S X=""
"RTN","DGMTU23",54,0)
 I DGMTYPT=1 D
"RTN","DGMTU23",55,0)
 .S X=$$SETSTR^VALM1("Agreed to Pay Deduct.:",X,1,22)
"RTN","DGMTU23",56,0)
 .S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,11)=1:"YES",$P(DGMTDIS,U,11)=0:"NO",1:""),X,DGFCOL,25)
"RTN","DGMTU23",57,0)
 .S X=$$SETSTR^VALM1("Adjudicated Date/Time:",X,42,28)
"RTN","DGMTU23",58,0)
 .S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,10)'="":$$FTIME^DGMTUTL($P(DGMTDIS,U,10)),1:""),X,DGSCOL,15)
"RTN","DGMTU23",59,0)
 .W !,X
"RTN","DGMTU23",60,0)
 S X=""
"RTN","DGMTU23",61,0)
 S X=$$SETSTR^VALM1("Declines Income Info:",X,2,21)
"RTN","DGMTU23",62,0)
 S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,14)=1:"YES",$P(DGMTDIS,U,14)=0:"NO",1:""),X,DGFCOL,25)
"RTN","DGMTU23",63,0)
 S Y=$S(DGMTYPT=1:"No Longer Required Date:",1:"No Longer Applicable Date:"),Z=$S(DGMTYPT=1:40,1:38)
"RTN","DGMTU23",64,0)
 S X=$$SETSTR^VALM1(Y,X,Z,28)
"RTN","DGMTU23",65,0)
 S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,17)'="":$$FTIME^DGMTUTL($P(DGMTDIS,U,17)),1:""),X,DGSCOL,15)
"RTN","DGMTU23",66,0)
 W !,X
"RTN","DGMTU23",67,0)
 S (X,Y)=""
"RTN","DGMTU23",68,0)
 I DGMTYPT=1 D
"RTN","DGMTU23",69,0)
 .S X=$$SETSTR^VALM1("MT Threshold:",X,10,13)
"RTN","DGMTU23",70,0)
 .S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,12)'="":"$"_$P(DGMTDIS,U,12),1:""),X,DGFCOL,25)
"RTN","DGMTU23",71,0)
 .I $P(DGMTDIS,U,20) D
"RTN","DGMTU23",72,0)
 ..S X=$$SETSTR^VALM1("Hardship Review Date:",X,43,21)
"RTN","DGMTU23",73,0)
 ..S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,21)'="":$$FTIME^DGMTUTL($P(DGMTDIS,U,21)),1:""),X,DGSCOL,15)
"RTN","DGMTU23",74,0)
 .W !,X
"RTN","DGMTU23",75,0)
 ;
"RTN","DGMTU23",76,0)
 S X=""
"RTN","DGMTU23",77,0)
 S X=$$SETSTR^VALM1("GMT Threshold:",X,9,14)
"RTN","DGMTU23",78,0)
 S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,27)'="":"$"_$P(DGMTDIS,U,27),1:""),X,DGFCOL,25)
"RTN","DGMTU23",79,0)
 W !,X
"RTN","DGMTU23",80,0)
 ;
"RTN","DGMTU23",81,0)
 S X=""
"RTN","DGMTU23",82,0)
 S X=$$SETSTR^VALM1("Date Vet Signed Test:",X,2,21)
"RTN","DGMTU23",83,0)
 S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,24)'="":$$FTIME^DGMTUTL($P(DGMTDIS,U,24)),1:""),X,DGFCOL,25)
"RTN","DGMTU23",84,0)
 I $G(^DGMT(408.31,DGMTI,"PURGE"))'="" D
"RTN","DGMTU23",85,0)
 .S X=$$SETSTR^VALM1("Income Data Purged:",X,45,19)
"RTN","DGMTU23",86,0)
 .S X1=^DGMT(408.31,DGMTI,"PURGE")
"RTN","DGMTU23",87,0)
 .S X=$$SETSTR^VALM1($$FTIME^DGMTUTL(X1),X,DGSCOL,15)
"RTN","DGMTU23",88,0)
 W !,X
"RTN","DGMTU23",89,0)
 ;
"RTN","DGMTU23",90,0)
 S X=""
"RTN","DGMTU23",91,0)
 S X=$$SETSTR^VALM1("Means Test Signed?:",X,4,19)
"RTN","DGMTU23",92,0)
 S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,29)=1:"YES",$P(DGMTDIS,U,29)=0:"NO",$P(DGMTDIS,U,29)=9:"DELETED",1:""),X,DGFCOL,25)
"RTN","DGMTU23",93,0)
 W !,X
"RTN","DGMTU23",94,0)
 ;
"RTN","DGMTU23",95,0)
 S (X,Y,Y1,Z)=""
"RTN","DGMTU23",96,0)
 I DGMTYPT=1 D
"RTN","DGMTU23",97,0)
 .I $P($G(^DG(408.34,+$P(DGMTDIS,U,23),0)),U)="IVM" D
"RTN","DGMTU23",98,0)
 ..;S X=$$SETSTR^VALM1("Date Vet Signed Test:",X,2,21)
"RTN","DGMTU23",99,0)
 ..;S X=$$SETSTR^VALM1($S($P(DGMTDIS,U,24)'="":$$FTIME^DGMTUTL($P(DGMTDIS,U,24)),1:""),X,DGFCOL,25)
"RTN","DGMTU23",100,0)
 ..S Y=$$SETSTR^VALM1("Refused to Sign:",Y,7,16)
"RTN","DGMTU23",101,0)
 ..S Y=$$SETSTR^VALM1($S($P(DGMTDIS,U,26)=1:"YES",$P(DGMTDIS,U,26)=0:"NO",1:""),Y,DGFCOL,25)
"RTN","DGMTU23",102,0)
 ..S Z=$$SETSTR^VALM1("Date IVM MT Completed:",Z,1,22)
"RTN","DGMTU23",103,0)
 ..S Z=$$SETSTR^VALM1($S($P(DGMTDIS,U,25)'="":$$FTIME^DGMTUTL($P(DGMTDIS,U,25)),1:""),Z,DGFCOL,25)
"RTN","DGMTU23",104,0)
 .I $P(DGMTDIS,U,21) D
"RTN","DGMTU23",105,0)
 ..S DGMTDI2=$G(^DGMT(408.31,DGMTI,2))
"RTN","DGMTU23",106,0)
 ..S X=$$SETSTR^VALM1("Hardship Approved By:",X,43,21)
"RTN","DGMTU23",107,0)
 ..I +$P(DGMTDI2,U,4)=$$INST^DGENU() D
"RTN","DGMTU23",108,0)
 ...S X=$$SETSTR^VALM1($P($G(^VA(200,+$P(DGMTDIS,U,22),0)),U),X,DGSCOL,15)
"RTN","DGMTU23",109,0)
 ..E  S X=$$SETSTR^VALM1("OTHER VAMC",X,DGSCOL,15)
"RTN","DGMTU23",110,0)
 ..S Y=$$SETSTR^VALM1("Hardship Review Site:",Y,43,21)
"RTN","DGMTU23",111,0)
 ..S Y=$$SETSTR^VALM1($P($G(^DIC(4,+$P(DGMTDI2,"^",4),0)),"^"),Y,DGSCOL,15)
"RTN","DGMTU23",112,0)
 ..S Y1=$$SETSTR^VALM1("Hardship Reason:",Y1,7,16)
"RTN","DGMTU23",113,0)
 ..S Y1=$$SETSTR^VALM1($P(DGMTDI2,U,9),Y1,DGFCOL,80)
"RTN","DGMTU23",114,0)
 .W !,X,!,Y,!,Y1,!,Z
"RTN","DGMTU23",115,0)
 W !,"COMMENT(S):" F  S WP=$O(DGMTDIS(WP)) Q:'WP  D
"RTN","DGMTU23",116,0)
 .W !,DGMTDIS(WP)
"RTN","DGMTU23",117,0)
 Q
"RTN","DGREG")
0^42^B46440553
"RTN","DGREG",1,0)
DGREG ;ALB/JDS,MRL/PJR-REGISTER PATIENT ; 12/20/04 10:35am
"RTN","DGREG",2,0)
 ;;5.3;Registration;**1,32,108,147,149,182,245,250,513,425,533,574,563,624**;Aug 13, 1993
"RTN","DGREG",3,0)
START ;
"RTN","DGREG",4,0)
EN D LO^DGUTL S DGCLPR=""
"RTN","DGREG",5,0)
 N DGDIV
"RTN","DGREG",6,0)
 S DGDIV=$$PRIM^VASITE
"RTN","DGREG",7,0)
 S:DGDIV %ZIS("B")=$P($G(^DG(40.8,+DGDIV,"DEV")),U,1)
"RTN","DGREG",8,0)
 I $P(^DG(43,1,0),U,39) S %ZIS="NQ",%ZIS("A")="Select 1010 printer: " D ^%ZIS Q:POP  S (DGIO(10),DGIO("PRF"),DGIO("RT"),DGIO("HS"))=ION,DGASKDEV="" I $E(IOST,1,2)'["P-" W !,$C(7),"Not a printer" G DGREG
"RTN","DGREG",9,0)
 K %ZIS("B")
"RTN","DGREG",10,0)
 I '$D(DGIO),$P(^DG(43,1,0),U,30) S %ZIS="N",IOP="HOME" D ^%ZIS I $D(IOS),IOS,$D(^%ZIS(1,+IOS,99)),$D(^%ZIS(1,+^(99),0)) S Y=$P(^(0),U,1) W !,"Using closest printer ",Y,! F I=10,"PRF","RT","HS" S DGIO(I)=Y
"RTN","DGREG",11,0)
A D ENDREG($G(DFN))
"RTN","DGREG",12,0)
 W !! S DIC=2,DIC(0)="ALEQM",DLAYGO=2 K DIC("S"),DIC("B") D ^DIC K DLAYGO G Q1:Y<0 S (DFN,DA)=+Y,DGNEW=$P(Y,"^",3) N Y D PAUSE^DG10 D BEGINREG(DFN) I DGNEW D NEW^DGRP
"RTN","DGREG",13,0)
 ;
"RTN","DGREG",14,0)
 ;; ask to continue if patient died - DG*5.3*563 - pjr 10/12/04
"RTN","DGREG",15,0)
 S DOD="" I $G(DFN) S DOD=$P($G(^DPT(DFN,.35)),"^",1)
"RTN","DGREG",16,0)
 I DOD S Y=DOD,DGPME=0 D DIED^DGPMV I DGPME K DFN,DGRPOUT G A
"RTN","DGREG",17,0)
 ;
"RTN","DGREG",18,0)
 D CIRN
"RTN","DGREG",19,0)
 ;
"RTN","DGREG",20,0)
 I +$G(DGNEW) D
"RTN","DGREG",21,0)
 . ; query CMOR for Patient Record Flag Assignments if NEW patient and
"RTN","DGREG",22,0)
 . ; display results.
"RTN","DGREG",23,0)
 . I $$PRFQRY^DGPFAPI(DFN) D DISPPRF^DGPFAPI(DFN)
"RTN","DGREG",24,0)
 ;
"RTN","DGREG",25,0)
 D ROMQRY
"RTN","DGREG",26,0)
 ;
"RTN","DGREG",27,0)
 S (DGFC,CURR)=0
"RTN","DGREG",28,0)
 D:'$G(DGNEW) WARN S DA=DFN,DGFC="^1",VET=$S($D(^DPT(DFN,"VET")):^("VET")'="Y",1:0)
"RTN","DGREG",29,0)
 S %ZIS="N",IOP="HOME" D ^%ZIS S DGELVER=0 D EN^DGRPD I $D(DGRPOUT) D ENDREG($G(DFN)) D HL7A08^VAFCDD01 K DFN,DGRPOUT G A
"RTN","DGREG",30,0)
 D HINQ^DG10
"RTN","DGREG",31,0)
 I $D(^DIC(195.4,1,"UP")) I ^("UP") D ADM^RTQ3
"RTN","DGREG",32,0)
 D REG^IVMCQ($G(DFN))  ; send financial query  
"RTN","DGREG",33,0)
 G A1
"RTN","DGREG",34,0)
 ;
"RTN","DGREG",35,0)
RT I $D(^DIC(195.4,1,"UP")) I ^("UP") S $P(DGFC,U,1)=DIV D ADM^RTQ3
"RTN","DGREG",36,0)
 Q
"RTN","DGREG",37,0)
 ;
"RTN","DGREG",38,0)
A1 W !,"Do you want to ",$S(DGNEW:"enter",1:"edit")," Patient Data" S %=1 D YN^DICN G H:'%,CK:%'=1 S DGRPV=0 D EN1^DGRP G Q:'$D(DA)
"RTN","DGREG",39,0)
 G CH
"RTN","DGREG",40,0)
PR W !!,"Is the patient currently being followed in a clinic for the same condition" S %=0 D YN^DICN G Q:%=-1
"RTN","DGREG",41,0)
 I '% W !?4,$C(7),"Enter 'Y' if the patient is being followed in clinic for condition for which",!?6,"registered, 'N' if not." G PR
"RTN","DGREG",42,0)
 S CURR=% G SEEN
"RTN","DGREG",43,0)
 ;
"RTN","DGREG",44,0)
CK S DGEDCN=1 D ^DGRPC
"RTN","DGREG",45,0)
CH S X=$S('$D(^DPT(DFN,.36)):1,$P(^(.36),"^",1)']"":1,1:0),X1=$S('$D(^DPT(DFN,.32)):1,$P(^(.32),"^",3)']"":1,1:0) I 'X,'X1 G CH1
"RTN","DGREG",46,0)
CH1 S DA=DFN G PR:'$D(^DPT("ADA",1,DA)) W !!,"There is still an open disposition--register aborted.",$C(7),$C(7) G Q
"RTN","DGREG",47,0)
SEEN W !!,"Is the patient to be examined in the medical center today" S %=1 D YN^DICN S SEEN=% G:%<0 Q I %'>0 W !!,"Enter 'Y' if the patient is to be examined today, 'N' if not.",$C(7) G SEEN
"RTN","DGREG",48,0)
ABIL D ^DGREGG
"RTN","DGREG",49,0)
ENR ; next line appears to be dead code.  left commented just to test.  mli 4/28/94
"RTN","DGREG",50,0)
 ;S DE=0 F I=0:0 S I=$O(^DPT(DA,"DE",I)) Q:'I  I $P(^(I,0),"^",3)'?7N Q  D PR:'DE S L=+$P($S($D(^SC(L,0)):^(0),1:""),"^",1)
"RTN","DGREG",51,0)
REG S (DIE,DIC)="^DPT("_DFN_",""DIS"",",%DT="PTEX",%DT("A")="Registration login date/time: NOW// "
"RTN","DGREG",52,0)
 W !,%DT("A") R ANS:DTIME S:'$T ANS="^" S:ANS="" ANS="N" S X=ANS G Q:ANS="^" S DA(1)=DFN D CHK^DIE(2.101,.01,"E",X,.RESULT) G REG:RESULT="^"!('$D(RESULT)),PR3:'(RESULT#1) S Y=RESULT
"RTN","DGREG",53,0)
 I (RESULT'="^") W "  ("_RESULT(0)_")"
"RTN","DGREG",54,0)
 S DINUM=9999999-RESULT
"RTN","DGREG",55,0)
 S (DFN1,Y1)=DINUM,APD=Y I $D(^DPT(DFN,"DIS",Y1)) W !!,"You must enter a date that does not exist.",$C(7),$C(7) G REG
"RTN","DGREG",56,0)
 G:$D(^DPT("ADA",1,DA)) CH1 L @(DIE_DINUM_")"):2 G:'$T MSG S:'($D(^DPT(DA(1),"DIS",0))#2) ^(0)="^2.101D^^" S DIC(0)="L",X=+Y D ^DIC
"RTN","DGREG",57,0)
 ;
"RTN","DGREG",58,0)
 ;SAVE OFF DATE/TIME OF REGISTRATION FOR HL7 V2.3 MESSAGING, IN VAFCDDT
"RTN","DGREG",59,0)
 S VAFCDDT=X
"RTN","DGREG",60,0)
 ;
"RTN","DGREG",61,0)
 S DA=DFN1,DIE("NO^")="",DA(1)=DFN,DP=2.101,DR="1///"_$S(SEEN=2:2,CURR=1:1,1:0)_";Q;2"_$S(CURR=1:"///3",1:"")_";2.1;3//"_$S($P(^DG(43,1,"GL"),"^",2):"",1:"/")_$S($D(^DG(40.8,+$P(^DG(43,1,"GL"),"^",3),0)):$P(^(0),"^",1),1:"")_";4////"_DUZ
"RTN","DGREG",62,0)
 D EL K DIC("A") N DGNDLOCK S DGNDLOCK=DIE_DFN1_")" L +@DGNDLOCK:2 G:'$T MSG D ^DIE L -@DGNDLOCK
"RTN","DGREG",63,0)
 I $D(DTOUT) D  G Q
"RTN","DGREG",64,0)
 .K DTOUT
"RTN","DGREG",65,0)
 .N DA,DIK
"RTN","DGREG",66,0)
 .S DA(1)=DFN,DA=DFN1,DIK="^DPT("_DFN_",""DIS"","
"RTN","DGREG",67,0)
 .D ^DIK
"RTN","DGREG",68,0)
 .W !!?5,"User Time-out.  Required registration data could be missing."
"RTN","DGREG",69,0)
 .W !,?5,"This registration has been deleted."
"RTN","DGREG",70,0)
 ; check whether facility applying to (division) is inactive
"RTN","DGREG",71,0)
 I '$$DIVCHK^DGREGFAC(DFN,DFN1) G CONT
"RTN","DGREG",72,0)
ASKDIV W !!?5,"The facility chosen either has no pointer to an Institution"
"RTN","DGREG",73,0)
 W !?5,"file record or the Institution file record is inactive."
"RTN","DGREG",74,0)
 W !?5,"Please choose another division."
"RTN","DGREG",75,0)
 S DA=DFN1,DIE("NO^")="",DA(1)=DFN,DP=2.101,DR="3" D ^DIE
"RTN","DGREG",76,0)
 I $$DIVCHK^DGREGFAC(DFN,DFN1) G ASKDIV
"RTN","DGREG",77,0)
CONT ; continue
"RTN","DGREG",78,0)
 S DGXXXD=1 D EL^DGREGE I $P(^DPT(DFN,"DIS",DFN1,0),"^",3)=4 S DA=DFN,DIE="^DPT(",DR=".368;.369" D ^DIE S DIE="^DPT("_DFN_",""DIS"",",DA(1)=DFN,DA=DFN1
"RTN","DGREG",79,0)
 S DA=DFN,DR="[DGREG]",DIE="^DPT(" D ^DIE K DIE("NO^")
"RTN","DGREG",80,0)
 I $D(^DPT(DFN,"DIS",DFN1,2)),$P(^(2),"^",1)="Y" S DIE="^DPT(",DR="[DG EMPLOYER]",DA=DFN D ^DIE
"RTN","DGREG",81,0)
 G ^DGREG0
"RTN","DGREG",82,0)
PR2 W !!,"You can only enter new registrations through this option.",$C(7),$C(7) G REG
"RTN","DGREG",83,0)
PR3 W !!,"Time is required to register the patient.",!!,$C(7),$C(7) G REG
"RTN","DGREG",84,0)
H W !?5,"Enter 'YES' to enter/edit registration data or 'NO' to continue." G A1
"RTN","DGREG",85,0)
Q K DG,DQ G Q1^DGREG0
"RTN","DGREG",86,0)
Q1 K DGIO,DGASKDEV,DGFC,DGCLRP,CURR,DGELVER,DGNEW Q
"RTN","DGREG",87,0)
EL S DR=DR_";13//" I $D(^DPT(DFN,.36)),$D(^DIC(8,+^(.36),0)) S DR=DR_$P(^(0),"^",1) Q
"RTN","DGREG",88,0)
 S DR=DR_"HUMANITARIAN EMERGENCY" Q
"RTN","DGREG",89,0)
FEE S DGRPFEE=1 D DGREG K DGRPFEE G Q1
"RTN","DGREG",90,0)
 ;
"RTN","DGREG",91,0)
WARN I $S('$D(^DPT(DFN,.1)):0,$P(^(.1),"^",1)']"":0,1:1) W !,$C(7),"***PATIENT IS CURRENTLY AN INPATIENT***",! H 2
"RTN","DGREG",92,0)
 I $S('$D(^DPT(DFN,.107)):0,$P(^(.107),"^",1)']"":0,1:1) W !,$C(7),"***PATIENT IS CURRENTLY A LODGER***",! H 2
"RTN","DGREG",93,0)
 Q
"RTN","DGREG",94,0)
MSG W !,"Another user is editing, try later ..." G Q
"RTN","DGREG",95,0)
 ;
"RTN","DGREG",96,0)
BEGINREG(DFN) ;
"RTN","DGREG",97,0)
 ;Description: This is called at the beginning of the registration process.
"RTN","DGREG",98,0)
 ;Concurrent processes can check the lock to determine if the patient is
"RTN","DGREG",99,0)
 ;currently being registered.
"RTN","DGREG",100,0)
 ;
"RTN","DGREG",101,0)
 Q:'$G(DFN) 0
"RTN","DGREG",102,0)
 I $$QRY^DGENQRY(DFN) W !!,"Enrollment/Eligibility Query sent ...",!!
"RTN","DGREG",103,0)
 L +^TMP(DFN,"REGISTRATION IN PROGRESS"):1
"RTN","DGREG",104,0)
 I $$LOCK^DGENPTA1(DFN) ;try to lock the patient record
"RTN","DGREG",105,0)
 Q
"RTN","DGREG",106,0)
 ;
"RTN","DGREG",107,0)
ENDREG(DFN) ;
"RTN","DGREG",108,0)
 ;Description: releases the lock obtained by calling BEGINREG.
"RTN","DGREG",109,0)
 ;
"RTN","DGREG",110,0)
 Q:'$G(DFN)
"RTN","DGREG",111,0)
 L -^TMP(DFN,"REGISTRATION IN PROGRESS")
"RTN","DGREG",112,0)
 D UNLOCK^DGENPTA1(DFN)
"RTN","DGREG",113,0)
 Q
"RTN","DGREG",114,0)
 ;
"RTN","DGREG",115,0)
IFREG(DFN) ;
"RTN","DGREG",116,0)
 ;Description: tests whether the lock set by BEGINREG is set
"RTN","DGREG",117,0)
 ;
"RTN","DGREG",118,0)
 ;Input:  DFN
"RTN","DGREG",119,0)
 ;Output:
"RTN","DGREG",120,0)
 ;      Function Value = 1 if lock is set, 0 otherwise
"RTN","DGREG",121,0)
 ;
"RTN","DGREG",122,0)
 N RETURN
"RTN","DGREG",123,0)
 Q:'$G(DFN) 0
"RTN","DGREG",124,0)
 L +^TMP(DFN,"REGISTRATION IN PROGRESS"):1
"RTN","DGREG",125,0)
 S RETURN='$T
"RTN","DGREG",126,0)
 L -^TMP(DFN,"REGISTRATION IN PROGRESS")
"RTN","DGREG",127,0)
 Q RETURN
"RTN","DGREG",128,0)
 Q
"RTN","DGREG",129,0)
CIRN ;MPI QUERY
"RTN","DGREG",130,0)
 ;check to see if CIRN PD/MPI is installed
"RTN","DGREG",131,0)
 N X S X="MPIFAPI" X ^%ZOSF("TEST") Q:'$T
"RTN","DGREG",132,0)
 K MPIFRTN
"RTN","DGREG",133,0)
 D MPIQ^MPIFAPI(DFN)
"RTN","DGREG",134,0)
 K MPIFRTN
"RTN","DGREG",135,0)
 Q
"RTN","DGREG",136,0)
ROMQRY ;
"RTN","DGREG",137,0)
 I +$G(DGNEW) D
"RTN","DGREG",138,0)
 . ; query LST for Patient Demographic Information if NEW patient and
"RTN","DGREG",139,0)
 . ; file into patient's record.
"RTN","DGREG",140,0)
 . N A
"RTN","DGREG",141,0)
 . I $$ROMQRY^DGROAPI(DFN) D
"RTN","DGREG",142,0)
 . . ;display busy message to interactive users
"RTN","DGREG",143,0)
 . .S DGMSG(1)="Data retrieval from LST site has been completed successfully"
"RTN","DGREG",144,0)
 . .S DGMSG(2)="Thank you for your patience."
"RTN","DGREG",145,0)
 . .D EN^DDIOL(.DGMSG) R A:5
"RTN","DGREG",146,0)
 . E  D
"RTN","DGREG",147,0)
 . . ;display busy message to interactive users
"RTN","DGREG",148,0)
 . .S DGMSG(1)="Data retrieval from LST site has not been successful."
"RTN","DGREG",149,0)
 . .S DGMSG(2)="Please continue the Registration Process."
"RTN","DGREG",150,0)
 . .D EN^DDIOL(.DGMSG) R A:5
"RTN","DGREG",151,0)
 . ;
"RTN","DGREG",152,0)
 Q
"RTN","DGREG0")
0^43^B14385234
"RTN","DGREG0",1,0)
DGREG0 ;ALB/JDS/AEG-REGISTER A PATIENT, CONT. ;03 OCT 85
"RTN","DGREG0",2,0)
 ;;5.3;Registration;**108,121,91,149,326,624**;Aug 13, 1993
"RTN","DGREG0",3,0)
REFILE F I=0,1,2,3 S A(I)="" S:$D(^DPT(DFN,"DIS",DFN1,I)) A(I)=^(I)
"RTN","DGREG0",4,0)
 S DIV=$S('$D(^DG(40.8,+$P(A(0),"^",4),0)):1,1:$P(A(0),"^",4))
"RTN","DGREG0",5,0)
 ;I $D(^DIC(195.4,1,"UP")) I ^("UP") S $P(DGFC,U,1)=DIV D ADM^RTQ3
"RTN","DGREG0",6,0)
 S X=+$P(A(0),"^",4),X=$S($D(^DG(40.8,X,"DEV")):^("DEV"),1:"1^1^1") F I=1:1:3 S:'$D(DGIO($P("10^PRF^RT","^",I))) DGIO($P("10^PRF^RT","^",I))=$S($P(X,U,I)]"":$P(X,U,I),1:1)
"RTN","DGREG0",7,0)
 S DGIO("HS")=DGIO("PRF") ;HS DEVICE=PROFILE DEVICE
"RTN","DGREG0",8,0)
 F I=10,"PRF","RT" I $D(DGIO(I)) S DGHIO(I)=DGIO(I)
"RTN","DGREG0",9,0)
 F I=1010,1010.176,1010.18,1010.17 S B(I)="" S:$D(^DPT(DFN,I)) B(I)=^(I)
"RTN","DGREG0",10,0)
 S INTL="",INTL=$$GET1^DIQ(200,+$P(A(0),"^",5),1,"I") S:INTL="" INTL=0
"RTN","DGREG0",11,0)
 S I=1010,B(I)=$P(A(0),"^",3)_"^"_$P(B(I)_"^^^^^^^^^","^",2,8)_"^"_(+A(0))_"^"_INTL_"^"_$P(B(I),"^",11,99)
"RTN","DGREG0",12,0)
 S:A(1)'="" B(1010.18)=A(1) S I1=$P(A(2),"^",6),I1=$P($S($D(^DIC(36,+I1,0)):^(0),1:""),"^",1),I=1010.176,B(I)=$P(A(2)_"^^^^","^",2,3)_"^"_$P(A(2),"^",7)_"^"_$E(I1,1,45)_"^"_$P(B(I),5,99)
"RTN","DGREG0",13,0)
 S X=3,X1=1,X2=2
"RTN","DGREG0",14,0)
MOVE S S(X1)=$P(A(X),"^",X2),S(X1+1)=$P(A(X),"^",X2+1),S(X1+2)=$P(A(X),"^",X2+2),S(X1+3)=$P(A(X),"^",X2+3)_$S($D(^DIC(5,+$P(A(X),"^",X2+4),0)):", "_$P(^(0),"^",2),1:"")_$S($P(A(X),"^",X2+5)'="":"  ",1:"")_$P(A(X),"^",X2+5)
"RTN","DGREG0",15,0)
 S:S(X1+2)="" S(X1+2)=S(X1+3),S(X1+3)="" S:S(X1+1)="" S(X1+1)=S(X1+2),S(X1+2)=S(X1+3),S(X1+3)="" S:S(X1)="" S(X1)=S(X1+1),S(X1+1)=S(X1+2),S(X1+2)=S(X1+3),S(X1+3)=""
"RTN","DGREG0",16,0)
 S I1=S(1) F I=2:1:4 S:S(I)'="" I1=I1_"/"_S(I)
"RTN","DGREG0",17,0)
 S:$P(A(3),"^",8)'="" I1=I1_" "_$P(A(3),"^",8) S I1=$E(I1,1,45),I=1010.17,B(I)=$P(B(I)_"^^^","^",1,3)_"^"_$P(A(3),"^",1)_"^"_I1_"^"_$P(B(I),"^",6,99)
"RTN","DGREG0",18,0)
 F I=1010,1010.176,1010.17,1010.18 S:B(I)'=""&(B(I)'?1"^"."^") ^DPT(DFN,I)=B(I)
"RTN","DGREG0",19,0)
 K B,S,I,I1,L,L1,L2,LL,LL1,LL2,DR,DEF
"RTN","DGREG0",20,0)
 D MT
"RTN","DGREG0",21,0)
 D CP
"RTN","DGREG0",22,0)
 D EN1^DGEN(DFN) ;enrollment
"RTN","DGREG0",23,0)
W1 F I=10,"PRF","RT","HS" I $D(DGHIO(I)) S DGIO(I)=DGHIO(I)
"RTN","DGREG0",24,0)
 K DGHIO
"RTN","DGREG0",25,0)
 G ^DGREG00
"RTN","DGREG0",26,0)
Q K:'$D(DGASKDEV) DGIO
"RTN","DGREG0",27,0)
Q1 ;If Send HL7 V2.3 messaging flag is set to SEND or SUSPEND and
"RTN","DGREG0",28,0)
 ;If user exits Register a Patient option or 10-10t Registration
"RTN","DGREG0",29,0)
 ;having edited some fields but not completing the Registration
"RTN","DGREG0",30,0)
 ;then send an A08 message
"RTN","DGREG0",31,0)
 I $P($$SEND^VAFHUTL(),"^",2) D HL7A08^VAFCDD01
"RTN","DGREG0",32,0)
 ;
"RTN","DGREG0",33,0)
QE K %,%DT,A,B,ANS,APD,B,CURR,DA,DB,DE,DEF,DGCLPR,DGDAY,DGDFN,DGE,DGERR,DGL,DGLL,DFMD,DGNEW,DGO,DIC,DIE,DINUM,DOW,DP,DR,I,I1,IOZBK,IOZFO,L,L1,L2,LL,LL1,LL2,MDCARD,PARA,PRF,RT,S,SC,SEEN
"RTN","DGREG0",34,0)
 K VAFHMRG,VAFHBEF,VAFHFLG,VET,X,X1,X2,Y,Y1,ZTSK,D0,D1,DIV,DLAYGO,J,PGM,Z
"RTN","DGREG0",35,0)
 G A^DGREG:('$D(DGRPFEE)&('$D(RGMPI))) Q
"RTN","DGREG0",36,0)
 ;
"RTN","DGREG0",37,0)
DT G DT^DIQ:Y
"RTN","DGREG0",38,0)
 Q
"RTN","DGREG0",39,0)
SSD Q:'$D(^DPT(DA(1),.321))  S DGZ1=0 F I=1:1:3 I $P(^DPT(DA(1),.321),"^",I)["Y" S DGZ1=1 Q
"RTN","DGREG0",40,0)
 I 'DGZ1 K DGZ1 Q
"RTN","DGREG0",41,0)
 S:'$D(^DPT("ASDPSD","B",SDIV,(9999999-DA)\1,DA(1))) ^(DA(1))=0 S:'$D(^DPT("ASDPSD","C",SDIV,SDX,9999999-DA,DA(1))) ^(DA(1))="E"
"RTN","DGREG0",42,0)
 K DGZ1 Q
"RTN","DGREG0",43,0)
SSDK I $D(^DPT("ASDPSD","C",SDIV,SDX,(9999999-DA),DA(1))) K ^(DA(1))
"RTN","DGREG0",44,0)
 Q
"RTN","DGREG0",45,0)
 ;
"RTN","DGREG0",46,0)
CP ;If not (autoexempt or MTested) & no CP test this year then
"RTN","DGREG0",47,0)
 ;prompt for add/edit cp test
"RTN","DGREG0",48,0)
 N DIV,DGIB,DGIBDT,DGX,X,DIRUT,DTOUT
"RTN","DGREG0",49,0)
 G:'$P($G(^DG(43,1,0)),U,41) QTCP ;USE CP FLAG
"RTN","DGREG0",50,0)
 S DGIBDT=$S($D(DFN1):9999999-DFN1,1:DT)
"RTN","DGREG0",51,0)
 D EN^DGMTCOR
"RTN","DGREG0",52,0)
 I +$G(DGNOCOPF) S DGMTCOR=0
"RTN","DGREG0",53,0)
 I DGMTCOR D THRESH^DGMTCOU1(DGIBDT) D EDT^DGMTCOU(DFN,DT)
"RTN","DGREG0",54,0)
 K DGNOCOPF
"RTN","DGREG0",55,0)
QTCP Q
"RTN","DGREG0",56,0)
MT ;Check if user requires a means test.  Ask user if s/he wants to
"RTN","DGREG0",57,0)
 ;proceed if one is required.
"RTN","DGREG0",58,0)
 N DGREQF,DIV
"RTN","DGREG0",59,0)
 D EN^DGMTR
"RTN","DGREG0",60,0)
 I DGREQF D MTDT:APD\1<DT,EDT^DGMTU(DFN,DT):$P($$MTS^DGMTU(DFN),U,2)="R"
"RTN","DGREG0",61,0)
 Q
"RTN","DGREG0",62,0)
 ;
"RTN","DGREG0",63,0)
MTDT ;Date of Test should be the same as the Registration Date
"RTN","DGREG0",64,0)
 N DA,DGMT,DGMTA,DGMTACT,DGMTDT,DGMTI,DGMTINF,DGMTP,DGMTYPT,DIE,DR
"RTN","DGREG0",65,0)
 S DGMT=$$LST^DGMTU(DFN) G MTDTQ:$P(DGMT,"^",2)'=DT
"RTN","DGREG0",66,0)
 S DGMTI=+DGMT,DGMTDT=APD\1,DGMTYPT=1
"RTN","DGREG0",67,0)
 S DGMTACT="STA" D PRIOR^DGMTEVT
"RTN","DGREG0",68,0)
 S DIE="^DGMT(408.31,",DA=DGMTI,DR=".01///^S X="_DGMTDT D ^DIE
"RTN","DGREG0",69,0)
 D AFTER^DGMTEVT S DGMTINF=1 D EN^DGMTEVT
"RTN","DGREG0",70,0)
MTDTQ Q
"RTN","DGREG00")
0^44^B15924500
"RTN","DGREG00",1,0)
DGREG00 ;ALB/JDS-REGISTER A PATIENT, CONT. ; 1/3/05 6:18pm
"RTN","DGREG00",2,0)
 ;;5.3;Registration;**86,108,113,91,149,642,624**;Aug 13, 1993
"RTN","DGREG00",3,0)
W1 D NOW^%DTC S DGNOW=% K A,DGOPT
"RTN","DGREG00",4,0)
 ;Print 10-10EZ
"RTN","DGREG00",5,0)
 N FORM,EASMTIEN
"RTN","DGREG00",6,0)
 S FORM=$$SEL1010^DG1010P("EZ")
"RTN","DGREG00",7,0)
 S EASMTIEN=0
"RTN","DGREG00",8,0)
 I FORM="EZ" D
"RTN","DGREG00",9,0)
 . N EAPP,EAIP
"RTN","DGREG00",10,0)
 . S (EAPP,EAIP)=0 F  S EAPP=$O(^EAS(712,"AC",DFN,EAPP)) Q:'EAPP!EAIP  D
"RTN","DGREG00",11,0)
 . . I $$GET1^DIQ(712,EAPP,7.1)="" D
"RTN","DGREG00",12,0)
 . . . N EAIX,EADT F EAIX="REV","PRT","SIG" Q:EAIP  D
"RTN","DGREG00",13,0)
 . . . . S EADT=0 F  S EADT=$O(^EAS(712,EAIX,EADT)) Q:'EADT!EAIP  I $D(^EAS(712,EAIX,EADT,EAPP)) S EAIP=1
"RTN","DGREG00",14,0)
 . I EAIP D  Q
"RTN","DGREG00",15,0)
 . . N DIR
"RTN","DGREG00",16,0)
 . . W !!,"No data have been found for the selected patient, or"
"RTN","DGREG00",17,0)
 . . W !,"the patient may have an on-line 10-10EZ application"
"RTN","DGREG00",18,0)
 . . W !,"in progress.  The 10-10EZ form shall not be printed."
"RTN","DGREG00",19,0)
 . . S DIR(0)="E" D ^DIR
"RTN","DGREG00",20,0)
 . . S FORM=""
"RTN","DGREG00",21,0)
 . S EASMTIEN=$$MTPRMPT^DG1010P(DFN,$G(DGMTI))
"RTN","DGREG00",22,0)
 I FORM="EZ" S DB=1
"RTN","DGREG00",23,0)
 ;
"RTN","DGREG00",24,0)
W3 S PRF=0,RT=0 G QU:'$D(^DG(43,1,0))
"RTN","DGREG00",25,0)
PRO I $$PROMPRN^DG1010PA("PRO") S PRF=1
"RTN","DGREG00",26,0)
 I $$PROMPRN^DG1010PA("HS") S DGHS=1
"RTN","DGREG00",27,0)
RT W !,"ROUTING SLIP" S %=1 D YN^DICN G Q:%=-1 I '% S DGPRINT=4 D HLP G RT
"RTN","DGREG00",28,0)
 S RT=(%=1)
"RTN","DGREG00",29,0)
QU I $G(DB) D
"RTN","DGREG00",30,0)
 .S ZTRTN="EN^EASEZPDG",ZTDTH=DGNOW,ZTDESC="1010EZ - FROM REGISTRATION"
"RTN","DGREG00",31,0)
 .S ZTSAVE("DA")=DFN,ZTSAVE("DFN")=DFN,ZTSAVE("DFN1")=DFN1
"RTN","DGREG00",32,0)
 .S ZTSAVE("EASDFN")=DFN,ZTSAVE("EASFLAG")="",ZTSAVE("ZUSR")=DUZ
"RTN","DGREG00",33,0)
 .S ZTSAVE("EASMTIEN")=EASMTIEN
"RTN","DGREG00",34,0)
 .S ZTIO=DGIO(10) D ^%ZTLOAD
"RTN","DGREG00",35,0)
QUPRF I $G(PRF) D
"RTN","DGREG00",36,0)
 .S ZTRTN="DFN^PSOSD1",ZTDTH=DGNOW,ZTDESC="DRUG PROFILE - FROM REGISTRATION",ZTSAVE("PSOINST")=$G(PSOINST),ZTSAVE("PSONOPG")=$G(PSONOPG)
"RTN","DGREG00",37,0)
 .S ZTSAVE("PSOPAR")=$G(PSOPAR),ZTSAVE("PSTYPE")=$G(PSTYPE),ZTSAVE("DFN")=DFN,ZTSAVE("DFN1")=DFN1,ZTIO=DGIO("PRF")
"RTN","DGREG00",38,0)
 .D ^%ZTLOAD
"RTN","DGREG00",39,0)
QUHS I $G(DGHS)&$G(GMTSTYP) D
"RTN","DGREG00",40,0)
 .S ZTRTN="ENXQ^GMTSDVR",ZTDTH=DGNOW,ZTDESC="HEALTH SUMMARY - FROM REGISTRATION",ZTSAVE("GMTSTYP")=GMTSTYP,ZTSAVE("DFN")=DFN,ZTIO=DGIO(10)
"RTN","DGREG00",41,0)
 .D ^%ZTLOAD
"RTN","DGREG00",42,0)
 .K DGHS,GMTSTYP
"RTN","DGREG00",43,0)
QURT I $G(RT) S ZTRTN="EN1^SDROUT1",ZTDTH=DGNOW,ZTDESC="ROUTING SLIP - FROM REGISTRATION",ZTSAVE("DFN")=DFN,ZTSAVE("DIV")=DIV,ZTSAVE("DT")=DT,ZTIO=DGIO("RT") D ^%ZTLOAD
"RTN","DGREG00",44,0)
EMBOS ;W ! D EMBOS^DGQEMA
"RTN","DGREG00",45,0)
 D EF^DG1010P
"RTN","DGREG00",46,0)
Q K:'$D(DGASKDEV) DGIO
"RTN","DGREG00",47,0)
Q1 ;
"RTN","DGREG00",48,0)
 D EVNT
"RTN","DGREG00",49,0)
 D CIRN
"RTN","DGREG00",50,0)
 K %,%DT,A,B,ANS,APD,B,CURR,DA,DB,DE,DEF,DG1,DGCLPR,DGDAY,DGDFN,DGE,DGL,DGLL,DFMD,DGNEW,DGNOW,DGO,DIC,DIE,DINUM,DOW,DP,DR,I,I1,IOZBK,IOZFO,L,L1,L2,LL,LL1,LL2,MDCARD,PARA,PRF,RT,S,SC,SEEN
"RTN","DGREG00",51,0)
 K VET,X,X1,X2,Y,Y1,ZTSK,D0,D1,DIV,DLAYGO,J,PGM,Z,EASMTIEN G A^DGREG:('$D(DGRPFEE)&('$D(RGMPI))) Q
"RTN","DGREG00",52,0)
 ;
"RTN","DGREG00",53,0)
DT G DT^DIQ:Y
"RTN","DGREG00",54,0)
 Q
"RTN","DGREG00",55,0)
SSD S DIV=$S('$D(^DG(40.8,+$P(A(0),"^",4),0)):" 1",1:" "_$P(A(0),"^",4))
"RTN","DGREG00",56,0)
 Q
"RTN","DGREG00",57,0)
HLP S DGPRINT=$P("10-10^10-10I^DRUG PROFILE^ROUTING SLIP","^",DGPRINT) W !!,"CHOOSE FROM",!?4,"YES - To include a copy of the ",DGPRINT," for this patient.",!?4,"NO  - If you don't want to print a copy of the ",DGPRINT,"." K DGPRINT Q
"RTN","DGREG00",58,0)
 ;
"RTN","DGREG00",59,0)
EVNT ;list of external calls
"RTN","DGREG00",60,0)
 N VAFHDATE
"RTN","DGREG00",61,0)
 S VAFHDATE=+$G(^DPT(DFN,"DIS",DFN1,0))
"RTN","DGREG00",62,0)
 K VAFHFLG D:+$$SEND^VAFHUTL() EN^VAFHLA04(DFN,VAFHDATE) ;fires Registration HL7 V1.5 message
"RTN","DGREG00",63,0)
 K VAFHMRG
"RTN","DGREG00",64,0)
 Q
"RTN","DGREG00",65,0)
CIRN ;
"RTN","DGREG00",66,0)
 Q:$P($$SEND^VAFHUTL(),"^",2)'>0
"RTN","DGREG00",67,0)
 ;W !,"Doing CIRN Messaging..."
"RTN","DGREG00",68,0)
 N DGZDATE,ERR
"RTN","DGREG00",69,0)
 S DGZDATE=+$G(^DPT(DFN,"DIS",DFN1,0))
"RTN","DGREG00",70,0)
 S ERR=$$EN^VAFCA04(DFN,DGZDATE) ; fires off HL7 V1.6 message
"RTN","DGREG00",71,0)
 Q
"RTN","DGRP4")
0^7^B7761202
"RTN","DGRP4",1,0)
DGRP4 ;ALB/MRL - REGISTRATION SCREEN 4/EMPLOYMENT INFORMATION;06 JUN 88@2300
"RTN","DGRP4",2,0)
 ;;5.3;Registration;**624**;Aug 13, 1993
"RTN","DGRP4",3,0)
 N DGMRD
"RTN","DGRP4",4,0)
 S DGRPS=4 D H^DGRPU S DGRPW=1 F I=0,.311,.25 S DGRP(I)=$S($D(^DPT(DFN,I)):^(I),1:"")
"RTN","DGRP4",5,0)
 S X=$P($G(^DIC(11,+$P(DGRP(0),"^",5),0)),"^",3) S DGMRD=$S("^M^S^"[("^"_X_"^"):1,1:0),DGRPVV(4)=$E(DGRPVV(4))_'DGMRD ; spouse's employer only editable if married or separated
"RTN","DGRP4",6,0)
 S DGAD=.311,DGA1=3,DGA2=1 D:$P(DGRP(.311),"^",1)]"" AL^DGRPU(26) S DGAD=.25,(DGA1,DGA2)=2 I $P(DGRP(.25),"^",1)]"",DGMRD D AL^DGRPU(26)
"RTN","DGRP4",7,0)
 S Z=1 D WW^DGRPV W " Employer: " S Z=$S($P(DGRP(.311),"^",1)]"":$E($P(DGRP(.311),"^",1),1,23),1:DGRPU),Z1=26 D WW1^DGRPV S DGRPW=0,Z=2 D WW^DGRPV W " Spouse's: ",$S('DGMRD:"NOT APPLICABLE",$P(DGRP(.25),"^",1)]"":$P(DGRP(.25),"^",1),1:DGRPU)
"RTN","DGRP4",8,0)
 F I=0:0 S I=$O(DGA(I)) Q:'I  S Z=DGA(I) S:(I#2) Z="              "_Z W:(I#2)!($X>50) ! W:(I#2) Z I '(I#2) W ?54,Z
"RTN","DGRP4",9,0)
 W ! I $P(DGRP(.311),"^",1)]"" W ?7,"Phone: ",$S($P(DGRP(.311),"^",9)]"":$P(DGRP(.311),"^",9),1:DGRPU)
"RTN","DGRP4",10,0)
 I $P(DGRP(.25),"^",1)]"",DGMRD W ?47,"Phone: ",$S($P(DGRP(.25),"^",8)]"":$P(DGRP(.25),"^",8),1:DGRPU)
"RTN","DGRP4",11,0)
 W !,?2,"Occupation: ",$S($P(DGRP(0),"^",7)]"":$P(DGRP(0),"^",7),1:DGRPU)
"RTN","DGRP4",12,0)
 I DGMRD W ?42,"Occupation: ",$S($P(DGRP(.25),"^",14)]"":$P(DGRP(.25),"^",14),1:DGRPU)
"RTN","DGRP4",13,0)
 W ! S X1="EMPLOYED FULL TIME^EMPLOYED PART TIME^NOT EMPLOYED^SELF EMPLOYED^RETIRED^ACTIVE MILITARY DUTY^^^UNKNOWN"
"RTN","DGRP4",14,0)
 S X=$P(DGRP(.311),"^",15) W ?6,"Status: ",$S($P(X1,"^",X)]"":$P(X1,"^",X),1:DGRPU)
"RTN","DGRP4",15,0)
 I DGMRD S X=$P(DGRP(.25),"^",15) W ?46,"Status: ",$S($P(X1,"^",X)]"":$P(X1,"^",X),1:DGRPU)
"RTN","DGRP4",16,0)
 W !
"RTN","DGRP4",17,0)
 W ?1,"Retired Dt.: "
"RTN","DGRP4",18,0)
 I +$P(DGRP(.311),"^",15)=5 DO
"RTN","DGRP4",19,0)
 . I +$P($G(DGRP(.311)),"^",16)>0 DO
"RTN","DGRP4",20,0)
 . . N Y
"RTN","DGRP4",21,0)
 . . S Y=$P(DGRP(.311),"^",16)
"RTN","DGRP4",22,0)
 . . D DD^%DT
"RTN","DGRP4",23,0)
 . . W Y
"RTN","DGRP4",24,0)
 . . K Y
"RTN","DGRP4",25,0)
 I +$P(DGRP(.311),"^",15)'=5 DO
"RTN","DGRP4",26,0)
 . W "NOT APPLICABLE"
"RTN","DGRP4",27,0)
 I DGMRD DO
"RTN","DGRP4",28,0)
 . W ?41,"Retired Dt.: "
"RTN","DGRP4",29,0)
 . I +$P(DGRP(.25),"^",15)=5 DO
"RTN","DGRP4",30,0)
 . . I +$P($G(DGRP(.25)),"^",16)>0 DO
"RTN","DGRP4",31,0)
 . . . N Y
"RTN","DGRP4",32,0)
 . . . S Y=$P(DGRP(.25),"^",16)
"RTN","DGRP4",33,0)
 . . . D DD^%DT
"RTN","DGRP4",34,0)
 . . . W Y
"RTN","DGRP4",35,0)
 . . . K Y
"RTN","DGRP4",36,0)
 . I +$P(DGRP(.25),"^",15)'=5 DO
"RTN","DGRP4",37,0)
 . . W "NOT APPLICABLE"
"RTN","DGRP4",38,0)
 G ^DGRPP
"RTN","DGRPCADD")
0^5^B9636895
"RTN","DGRPCADD",1,0)
DGRPCADD ;ALB/MRL - REGISTRATION SCREEN 1.1/CONFIDENTIAL ADDRESS INFORMATION ;FEB 2003@2300
"RTN","DGRPCADD",2,0)
 ;;5.3;Registration;**489,624**;Aug 13, 1993
"RTN","DGRPCADD",3,0)
CADD ;Confidential Address
"RTN","DGRPCADD",4,0)
 N CNT,DGA1,DGA2,DGA3,DGACT,DGBEG,DGCAN,DGCAT,DGCC,DGEND,DGTYP,DGTYPNAM,DGX,DGXX,DGZ,DGZIP,DGI,Y,Z,DGERR
"RTN","DGRPCADD",5,0)
 S DGRPS=1.1 D H^DGRPU
"RTN","DGRPCADD",6,0)
 S DGRP(.141)=$G(^DPT(DFN,.141))
"RTN","DGRPCADD",7,0)
 S Z=1,DGRPW=1.1 D WW^DGRPV W "Confidential Address"
"RTN","DGRPCADD",8,0)
 I DGRP(.141)=""!($P(DGRP(.141),U)="")!('$P($$CAACT(DFN),U)) D  G END
"RTN","DGRPCADD",9,0)
 .W !?5,"NO CONFIDENTIAL ADDRESS"
"RTN","DGRPCADD",10,0)
 .W !!?42,"From/To:  NOT APPLICABLE"
"RTN","DGRPCADD",11,0)
 S DGXX=DGRP(.141),DGA1=$P(DGXX,"^",1),DGA2=$P(DGXX,"^",2),DGA3=$P(DGXX,"^",3)
"RTN","DGRPCADD",12,0)
 W !?3,DGA1,?43,"County: "
"RTN","DGRPCADD",13,0)
 I $D(^DIC(5,+$P(DGRP(.141),"^",5),1,+$P(DGRP(.141),"^",11),0)) D
"RTN","DGRPCADD",14,0)
 .S DGCC=^DIC(5,+$P(DGRP(.141),"^",5),1,+$P(DGRP(.141),"^",11),0) W $P(DGCC,"^",1),"(",$P(DGCC,"^",3),")"
"RTN","DGRPCADD",15,0)
 W:DGA2'="" !?3,DGA2
"RTN","DGRPCADD",16,0)
 W:DGA3'="" !?3,DGA3
"RTN","DGRPCADD",17,0)
 W !?3,$P(DGRP(.141),"^",4) I $D(^DIC(5,+$P(DGRP(.141),"^",5),0)) W ",",$P(^DIC(5,+$P(DGRP(.141),"^",5),0),"^",2)
"RTN","DGRPCADD",18,0)
 S DGZIP=$P(DGRP(.141),"^",6) I $L(DGZIP)>5 S DGZIP=$E(DGZIP,1,5)_"-"_$E(DGZIP,6,12)
"RTN","DGRPCADD",19,0)
 W " ",DGZIP
"RTN","DGRPCADD",20,0)
 W ?42,"From/To: " S (DGZ,DGX)="" F DGI=7,8 S DGZ=$P(DGRP(.141),"^",DGI),Y=DGZ D
"RTN","DGRPCADD",21,0)
 .I DGI=7 X:Y]"" ^DD("DD") S DGBEG=Y,DGX=Y
"RTN","DGRPCADD",22,0)
 .I DGI=8 X:Y]"" ^DD("DD") S DGEND=Y,DGX=DGX_"-"_$S(Y]"":Y,1:"UNANSWERED")
"RTN","DGRPCADD",23,0)
 W DGX
"RTN","DGRPCADD",24,0)
 W !!,"Categories: " I $D(^DPT(DFN,.14)) D
"RTN","DGRPCADD",25,0)
 .S DGCAT=$$GET1^DID(2.141,.01,"","POINTER","","DGERR")
"RTN","DGRPCADD",26,0)
 .S DGX="",DGCAN="" F  S DGCAN=$O(^DPT(DFN,.14,DGCAN)) Q:DGCAN=""  D
"RTN","DGRPCADD",27,0)
 ..Q:'$D(^DPT(DFN,.14,DGCAN,0))
"RTN","DGRPCADD",28,0)
 ..S DGTYP=$P(^DPT(DFN,.14,DGCAN,0),"^",1),DGACT=$P(^DPT(DFN,.14,DGCAN,0),"^",2)
"RTN","DGRPCADD",29,0)
 ..S DGACT=$S(DGACT="Y":"Active",DGACT="N":"Inactive",1:"Unanswered")
"RTN","DGRPCADD",30,0)
 ..S DGTYPNAM="" F DGI=1:1 S DGTYPNAM=$P(DGCAT,";",DGI) Q:DGTYPNAM=""  D
"RTN","DGRPCADD",31,0)
 ...I DGTYPNAM[DGTYP S DGTYPNAM=$P(DGTYPNAM,":",2),DGX=DGTYPNAM_"("_DGACT_")"_","_DGX
"RTN","DGRPCADD",32,0)
 S DGXX="",CNT=0 F DGI=1:1 S DGXX=$P(DGX,",",DGI) Q:DGXX=""  D
"RTN","DGRPCADD",33,0)
 .W:CNT>0 !
"RTN","DGRPCADD",34,0)
 .W ?13,DGXX
"RTN","DGRPCADD",35,0)
 .S CNT=CNT+1
"RTN","DGRPCADD",36,0)
END ;
"RTN","DGRPCADD",37,0)
 S DGRP(.13)=$G(^DPT(DFN,.13))
"RTN","DGRPCADD",38,0)
 S Z=2,DGRPW=1.1 D WW^DGRPV W "    Cell Phone: "
"RTN","DGRPCADD",39,0)
 ;
"RTN","DGRPCADD",40,0)
 ;* Output Cell phone
"RTN","DGRPCADD",41,0)
 I $P(DGRP(.13),U,4)'="" W ?20,$P(DGRP(.13),U,4)
"RTN","DGRPCADD",42,0)
 I $P(DGRP(.13),U,4)="" W ?20,"UNANSWERED"
"RTN","DGRPCADD",43,0)
 ;
"RTN","DGRPCADD",44,0)
 ;* Output Pager
"RTN","DGRPCADD",45,0)
 W !,"          Pager #: "
"RTN","DGRPCADD",46,0)
 I $P(DGRP(.13),U,5)'="" W ?19,$P(DGRP(.13),U,5)
"RTN","DGRPCADD",47,0)
 I $P(DGRP(.13),U,5)="" W ?19,"UNANSWERED"
"RTN","DGRPCADD",48,0)
 ;
"RTN","DGRPCADD",49,0)
 ;* Output Email Address
"RTN","DGRPCADD",50,0)
 W !,"    Email Address: "
"RTN","DGRPCADD",51,0)
 I $P(DGRP(.13),U,3)'="" W ?19,$P(DGRP(.13),U,3)
"RTN","DGRPCADD",52,0)
 I $P(DGRP(.13),U,3)="" W ?19,"UNANSWERED"
"RTN","DGRPCADD",53,0)
 ;
"RTN","DGRPCADD",54,0)
 G ^DGRPP
"RTN","DGRPCADD",55,0)
CAACT(DFN,ACTDT) ;Determines if the Confidential Address is active
"RTN","DGRPCADD",56,0)
 ;Input:  DFN - Patient (#2) file internal entry number (Required)
"RTN","DGRPCADD",57,0)
 ;        ACTDT - Date used to determine if address is active 
"RTN","DGRPCADD",58,0)
 ;                (Optional) Defaults to DT if not defined. 
"RTN","DGRPCADD",59,0)
 ;
"RTN","DGRPCADD",60,0)
 ;Output:
"RTN","DGRPCADD",61,0)
 ;   1st piece 0 inactive based on start/stop dates
"RTN","DGRPCADD",62,0)
 ;             1 active based on start/stop dates
"RTN","DGRPCADD",63,0)
 ;   2nd piece 0 - no active correspondence types
"RTN","DGRPCADD",64,0)
 ;             1 - at least one active correspondence type
"RTN","DGRPCADD",65,0)
 ;
"RTN","DGRPCADD",66,0)
 N DGCA,DGCABEG,DGCAEND,DGSTAT,DGIEN,DGTYP,DGFLG
"RTN","DGRPCADD",67,0)
 S DGSTAT="0^0"
"RTN","DGRPCADD",68,0)
 I '$D(DFN) Q DGSTAT
"RTN","DGRPCADD",69,0)
 I '$D(ACTDT) S ACTDT=DT
"RTN","DGRPCADD",70,0)
 S DGCA=$G(^DPT(DFN,.141)) D
"RTN","DGRPCADD",71,0)
 .I DGCA="" Q
"RTN","DGRPCADD",72,0)
 .S DGCABEG=$P(DGCA,U,7)
"RTN","DGRPCADD",73,0)
 .S DGCAEND=$P(DGCA,U,8)
"RTN","DGRPCADD",74,0)
 .I 'DGCABEG!(DGCABEG>ACTDT)!(DGCAEND&(DGCAEND<ACTDT)) Q
"RTN","DGRPCADD",75,0)
 .S DGSTAT="1^0"
"RTN","DGRPCADD",76,0)
 ;Build array of correspondence types
"RTN","DGRPCADD",77,0)
 S (DGIEN,DGFLG)=0
"RTN","DGRPCADD",78,0)
 F  S DGIEN=$O(^DPT(DFN,.14,DGIEN)) Q:'DGIEN  D  Q:DGFLG
"RTN","DGRPCADD",79,0)
 .S DGTYP=$G(^DPT(DFN,.14,+DGIEN,0))
"RTN","DGRPCADD",80,0)
 .I $P(DGTYP,U,2)="Y" S DGFLG=1
"RTN","DGRPCADD",81,0)
 S $P(DGSTAT,U,2)=$S(DGFLG=1:1,1:0)
"RTN","DGRPCADD",82,0)
 Q DGSTAT
"RTN","DGRPE")
0^13^B48301429
"RTN","DGRPE",1,0)
DGRPE ;ALB/MRL,LBD - REGISTRATIONS EDITS ; 11/19/03 10:53am
"RTN","DGRPE",2,0)
 ;;5.3;Registration;**32,114,139,169,175,247,190,343,397,342,454,415,489,506,244,547,522,528,555,508,451,626,638,624**;Aug 13, 1993
"RTN","DGRPE",3,0)
 ;
"RTN","DGRPE",4,0)
 ;DGDR contains a string of edits; edit=screen*10+item #
"RTN","DGRPE",5,0)
 ;
"RTN","DGRPE",6,0)
 ;line tag screen*10+item*1000 = continuation line
"RTN","DGRPE",7,0)
 ;
"RTN","DGRPE",8,0)
 I DGRPS=1,DGDR["101," D CEDITS^DGRPECE(DFN)
"RTN","DGRPE",9,0)
 I DGRPS=8 D ^DGRPEIS,Q Q  ; family demographic edit...not conventional!!  :)
"RTN","DGRPE",10,0)
 I DGRPS=9 D EDIT9^DGRPEIS2,Q Q  ; income screening data ($$$)
"RTN","DGRPE",11,0)
 I DGRPS=5,DGDR["501," D
"RTN","DGRPE",12,0)
 .I $G(DGPRFLG) D PREG^IBCNBME(DFN) Q
"RTN","DGRPE",13,0)
 .D REG^IBCNBME(DFN)
"RTN","DGRPE",14,0)
 .Q
"RTN","DGRPE",15,0)
 ;-- Tricare screen #15
"RTN","DGRPE",16,0)
 I DGRPS=15 D EDIT^DGRP15,Q Q
"RTN","DGRPE",17,0)
 ;
"RTN","DGRPE",18,0)
 N DGPH,DGPHFLG
"RTN","DGRPE",19,0)
 K DR S (DA,Y)=DFN,DIE="^DPT(",DR="",DGDRS="DR",DGCT=0
"RTN","DGRPE",20,0)
 G ^DGRPE1:DGRPS>6
"RTN","DGRPE",21,0)
 I DGRPS=4 D ^DGRPE4
"RTN","DGRPE",22,0)
 K DR S (DA,Y)=DFN,DIE="^DPT(",DR="",DGDRS="DR",DGCT=0
"RTN","DGRPE",23,0)
 F I=1:1 S J=$P(DGDR,",",I) Q:J=""  F J1=J,J*1000,J*1000+1,J*1000+2 Q:'$T(@J1)  S DGDRD=$P($T(@J1),";;",2) D S
"RTN","DGRPE",24,0)
 D ^DIE
"RTN","DGRPE",25,0)
 ;check for Combat Vet status
"RTN","DGRPE",26,0)
 I $G(DGCVFLG)=1,($P($$CVEDT^DGCV(DFN),U,2)']"") D
"RTN","DGRPE",27,0)
 . W !!,"**NOTE-Change(s) made in this session deleted the veteran's Combat Vet status!"
"RTN","DGRPE",28,0)
 . S DIR(0)="EA" D ^DIR K DIR
"RTN","DGRPE",29,0)
 I $G(DGPHFLG)>0 D EDITPH1^DGRPLE()
"RTN","DGRPE",30,0)
Q K DA,DIE,DR,DGCT,DGCVFLG,DGDR,DGDRD,DGDRS,DGRPADI,I,J,J1,DGCOMLOC
"RTN","DGRPE",31,0)
 Q
"RTN","DGRPE",32,0)
S I $L(@DGDRS)+$L(DGDRD)<241 S @DGDRS=@DGDRS_DGDRD Q
"RTN","DGRPE",33,0)
 S DGCT=DGCT+1,DGDRS="DR(1,2,"_DGCT_")",@DGDRS=DGDRD Q
"RTN","DGRPE",34,0)
 Q
"RTN","DGRPE",35,0)
 ;
"RTN","DGRPE",36,0)
101 ;;
"RTN","DGRPE",37,0)
102 ;;1;
"RTN","DGRPE",38,0)
103 ;;.091;
"RTN","DGRPE",39,0)
104 ;;N FLG S (FLG(1),FLG(2))=1 D EN^DGREGAED(DFN,.FLG);
"RTN","DGRPE",40,0)
105 ;;.12105//NO;S:X="N" Y="@15" S:X="Y" DIE("NO^")="";.1217;I X']"" W !?4,$C(7),"But I need a Start Date for this Temporary Address." S Y=.12105;.1218;.1211;I X']"" W !?4,$C(7),"But I need at least one line of a Temporary address." S Y=.12105;
"RTN","DGRPE",41,0)
105000 ;;.1212;S:X']"" Y=.1214;.1213:.1215;.12112;Q;.12111;.1219;@15;K DIE("NO^");
"RTN","DGRPE",42,0)
109 ;;N FLG S (FLG(1),FLG(2))=1 D EN^DGREGAED(DFN,.FLG);.02;D DR109^DGRPE;6;2;K DR(2,2.02),DR(2,2.06);.05;.08;K DIE("NO^");
"RTN","DGRPE",43,0)
111 ;;.14105//NO;S:X="N" Y="@111" S:X="Y" DIE("NO^")="";.1417;I X']"" W !?4,$C(7),"But I need a Start Date." S Y=.14105;.1418;D DR111^DGRPE;.141;I '$P($$CAACT^DGRPCADD(DFN),U,2) W !?4,"But I need at least one active category." S Y=.14105;
"RTN","DGRPE",44,0)
111000 ;;K DR(2,2.141);.1411;I X']"" W !?4,$C(7),"I need at least one line of Address." S Y=.14105;.1412;S:X']"" Y=.1414;.1413;.1414;.1415;.1416;Q;.14111;@111;K DIE("NO^");
"RTN","DGRPE",45,0)
112 ;;.134;.135;.133
"RTN","DGRPE",46,0)
201 ;;.05;.08;.092;.093;.2401:.2403;57.4//NOT APPLICABLE;
"RTN","DGRPE",47,0)
202 ;;1010.15//NO;S:X'="Y" Y="@22";S DIE("NO^")="";1010.152;I X']"" W !?4,*7,"But I need to know where you were treated most recently." S Y=1010.15;1010.151;1010.154;S:X']"" Y="@22";1010.153;@22;K DIE("NO^");
"RTN","DGRPE",48,0)
203 ;;D DR203^DGRPE;6ETHNICITY;2RACE;K DR(2,2.02),DR(2,2.06);
"RTN","DGRPE",49,0)
301 ;;.211;S:X']"" Y="@31";.212;.2125//NO;I X="Y" S DGADD=".21" D AD^DGRPE S Y=.21011;.213;S:X']"" Y=.216;.214;S:X']"" Y=.216;.215:.217;.2207;.219;.21011;@31;
"RTN","DGRPE",50,0)
302 ;;.2191;S:X']"" Y="@32";.2192;.21925//NO;I X="Y" S DGADD=".211" D AD^DGRPE S Y=.211011;
"RTN","DGRPE",51,0)
302000 ;;.2193;S:X']"" Y=.2196;.2194;S:X']"" Y=.2196;.2195:.2197;.2203;.2199;.211011;@32;
"RTN","DGRPE",52,0)
303 ;;N DGX1,DGX2;I '$L($P($G(^DPT(DFN,.21)),U)) S Y="@33";.3305//NO;I X="Y" S Y="@34",DGX1=1;@33;S:$D(^DPT(DFN,.22)) $P(^(.22),U,1)=$P(^(.22),U,7);.331;S:X']"" DGX1=2,Y="@34";.332;@34;
"RTN","DGRPE",53,0)
303000 ;;S:$G(DGX1) Y="@341";.333;S:X']"" Y=.336;.334;S:X']"" Y=.336;.335:.337;.2201;.339;.33011;S DGX1=2;@341;
"RTN","DGRPE",54,0)
303001 ;;S:$G(DGX1)=2 Y="@35";S DGX2=$G(^DPT(DA,.21));.331///^S X=$P(DGX2,U);.332///^S X=$P(DGX2,U,2);.333////^S X=$P(DGX2,U,3);.334///^S X=$P(DGX2,U,4);@35;
"RTN","DGRPE",55,0)
303002 ;;S:$G(DGX1)=2 Y="@351";.335///^S X=$P(DGX2,U,5);.336///^S X=$P(DGX2,U,6);.337///^S X=$P(DGX2,U,7);.338///^S X=$P(DGX2,U,8);.339///^S X=$P(DGX2,U,9);.33011///^S X=$P(DGX2,U,11);@351;K DGX1,DGX2;
"RTN","DGRPE",56,0)
304 ;;.3311;S:X']"" Y="@36";.3312;.3313;S:X']"" Y=.3316;.3314;S:X']"" Y=.3316;.3315:.3317;.2204;.3319;.331011;@36;        
"RTN","DGRPE",57,0)
305 ;;N DGX1,DGX2;I '$L($P($G(^DPT(DFN,.21)),U)) S Y="@37";.3405//NO;I X="Y" S DGX1=1,Y="@371";@37;S:$D(^DPT(DFN,.22)) $P(^(.22),U,2)=$P(^(.22),U,7);.341;S:X']"" DGX1=2,Y="@371";.342;@371;
"RTN","DGRPE",58,0)
305000 ;;S:$G(DGX1) Y="@38";.343;S:X']"" Y=.346;.344;S:X']"" Y=.346;.345:.347;.2202;.349;.34011;S DGX1=2;@38;
"RTN","DGRPE",59,0)
305001 ;;S:$G(DGX1)=2 Y="@381";S DGX2=$G(^DPT(DA,.21));.341///^S X=$P(DGX2,U);.342///^S X=$P(DGX2,U,2);.343///^S X=$P(DGX2,U,3);.344///^S X=$P(DGX2,U,4);@381
"RTN","DGRPE",60,0)
305002 ;;S:$G(DGX1)=2 Y="@39";.345///^S X=$P(DGX2,U,5);.346///^S X=$P(DGX2,U,6);.347///^S X=$P(DGX2,U,7);.348///^S X=$P(DGX2,U,8);.349///^S X=$P(DGX2,U,9);.34011///^S X=$P(DGX2,U,11);@39;K DGX1,DGX2;
"RTN","DGRPE",61,0)
401 ;;.01;.31115;S:($S(X']"":1,X=3:1,X=9:1,1:0)) Y="@41" S:(X'=5) Y=.3111;.31116;.3111;S:X']"" Y="@41";.3113;S:X']"" Y=.3116;.3114;S:X']"" Y=.3116;.3115:.3117;.2205;.3119;@41;
"RTN","DGRPE",62,0)
402 ;;.2514;.2515;S:($S(X']"":1,X=3:1,X=9:1,1:0)) Y="@42" S:(X'=5) Y=.251;.2516;.251;S:X']"" Y="@42";.252;S:X']"" Y=.255;.253;S:X']"" Y=.255;.254:.256;.2206;.258;@42;
"RTN","DGRPE",63,0)
501 ;;
"RTN","DGRPE",64,0)
502 ;;.381;.382///NOW;
"RTN","DGRPE",65,0)
503 ;;.383;
"RTN","DGRPE",66,0)
601 ;;.325;S:X']"" Y="@61";S:$$FV^DGRPMS(X)'=1 Y=".328";.3214;I X']"" W !?4,$C(7),"Proof is required for Filipino Vet." S Y=".325";.328;.326;.327;.324;
"RTN","DGRPE",67,0)
601000 ;;.3285//NO;S:X'="Y" Y="@61";.3291;S:X']"" Y="@61";S:$$FV^DGRPMS(X)'=1 Y=".3294";.3214;I X']"" W !?4,$C(7),"Proof is required for Filipino Vet." S Y=".3291";.3294;.3292;.3293;.329;
"RTN","DGRPE",68,0)
601001 ;;.32945//NO;S:X'="Y" Y="@61";.3296;S:X']"" Y="@61";S:$$FV^DGRPMS(X)'=1 Y=".3299";.3214;I X']"" W !?4,$C(7),"Proof is required for Filipino Vet." S Y=".3296";.3299;.3297;.3298;.3295;@61;
"RTN","DGRPE",69,0)
602 ;;.525//NO;S:X'="Y" Y="@62";.526:.528;@62;
"RTN","DGRPE",70,0)
603 ;;.5291//NO;S:X'="Y" Y="@63";.5292:.5294;@63;
"RTN","DGRPE",71,0)
604 ;;.32101//NO;S:X'="Y" Y="@64";.32104;.32105;@64;
"RTN","DGRPE",72,0)
605 ;;.32102//NO;S:X'="Y" Y="@65";.32107;.32109;.3211;.3213;@65;
"RTN","DGRPE",73,0)
606 ;;.32103//NO;S:X'="Y" Y="@66";.3212;.32111;@66;
"RTN","DGRPE",74,0)
607 ;;.3221//NO;S:X'="Y" Y="@67";.3222;Q;.3223;@67;
"RTN","DGRPE",75,0)
608 ;;.3224//NO;S:X'="Y" Y="@68";.3225;Q;.3226;@68;
"RTN","DGRPE",76,0)
609 ;;.3227//NO;S:X'="Y" Y="@69";.3228;Q;.3229;@69;
"RTN","DGRPE",77,0)
610 ;;.32201//NO;S:X'="Y" Y="@610";.322011;Q;.322012;@610;
"RTN","DGRPE",78,0)
611 ;;.322016//NO;S:X'="Y" Y="@611";.322017;Q;.322018;@611;
"RTN","DGRPE",79,0)
612 ;;.322013//NO;S:X'="Y" Y="@612";.322014;Q;.322015;@612;
"RTN","DGRPE",80,0)
613 ;;.362;
"RTN","DGRPE",81,0)
614 ;;.368//NO;.369//NO;I $S('$D(^DPT(DA,.36)):1,$P(^(.36),U,8)="Y"!($P(^(.36),U,9)="Y"):0,1:1) S Y="@614";.37;@614;
"RTN","DGRPE",82,0)
615 ;;.322019//NO;S:X'="Y" Y="@615";.32202;Q;.322021;@615;
"RTN","DGRPE",83,0)
616 ;;S DGPHFLG=0;.531;S:X'="Y" DGX=X,Y="@616";.532///^S X="PENDING";S Y="@6161";@616;S:DGX'="N" Y="@6162";.533///^S X="VAMC";@6161;S DGPHFLG=1;.535///^S X=$$DIV^DGRPLE();@6162;
"RTN","DGRPE",84,0)
617 ;;D REG^DGNTQ(DFN);
"RTN","DGRPE",85,0)
AD N DGZ4,DGPC
"RTN","DGRPE",86,0)
 S X=$S($D(^DPT(DA,.11)):^(.11),1:""),DGZ4=$P(X,U,12),DGPHONE=$S($D(^(.13)):$P(^(.13),U,1),1:""),Y=$S($D(^(DGADD)):^(DGADD),1:""),^(DGADD)=$P(Y,U,1)_U_$P(Y,U,2)_U_$P(X,U,1,6)_U_DGPHONE_U_$P(Y,U,10)
"RTN","DGRPE",87,0)
 I DGZ4 S DGPC=$S((DGADD=.33):1,(DGADD=.34):2,(DGADD=.211):3,(DGADD=.331):4,(DGADD=.311):5,(DGADD=.25):6,(DGADD=.21):7,1:0) S:DGPC $P(^DPT(DFN,.22),U,DGPC)=DGZ4
"RTN","DGRPE",88,0)
 K DGADD,DGPHONE Q
"RTN","DGRPE",89,0)
DR109 ;Drop through (use same logic as DR203)
"RTN","DGRPE",90,0)
DR203 S DR(2,2.02)=".01RACE;I $P($G(^DIC(10.3,+$P($G(^DPT(DA(1),.02,DA,0)),""^"",2),0)),""^"",2)=""S"" S Y=""@2031"";.02;@2031;"
"RTN","DGRPE",91,0)
 S DR(2,2.06)=".01ETHNICITY;I $P($G(^DIC(10.3,+$P($G(^DPT(DA(1),.06,DA,0)),""^"",2),0)),""^"",2)=""S"" S Y=""@2032"";.02;@2032;"
"RTN","DGRPE",92,0)
 Q
"RTN","DGRPE",93,0)
DR111 ;Set DR string for Confidential Address categories
"RTN","DGRPE",94,0)
 S DR(2,2.141)=".01;1//YES;"
"RTN","DGRPE",95,0)
 Q
"RTN","DGRPE4")
0^58^B10228807
"RTN","DGRPE4",1,0)
DGRPE4 ;ALB/GTS - REGISTRATIONS EDITS ; 5/25/05 08:53am
"RTN","DGRPE4",2,0)
 ;;5.3;Registration;**624**;Aug 13, 1993
"RTN","DGRPE4",3,0)
 ;
"RTN","DGRPE4",4,0)
 ;DGDR contains a string of edits; edit=screen*10+item #
"RTN","DGRPE4",5,0)
 ;
"RTN","DGRPE4",6,0)
 ;line tag screen*10+item*1000 = continuation line
"RTN","DGRPE4",7,0)
 ;
"RTN","DGRPE4",8,0)
 N DGPH,DGPHFLG,UPARROUT
"RTN","DGRPE4",9,0)
 S UPARROUT=0
"RTN","DGRPE4",10,0)
 K DR S (DA,Y)=DFN,DIE="^DPT(",DR="",DGDRS="DR",DGCT=0
"RTN","DGRPE4",11,0)
 I (DGDR["401") DO
"RTN","DGRPE4",12,0)
 . S J1="A401"
"RTN","DGRPE4",13,0)
 . S DGDRD=$P($T(@J1),";;",2)
"RTN","DGRPE4",14,0)
 . D S
"RTN","DGRPE4",15,0)
 . D ^DIE
"RTN","DGRPE4",16,0)
 . I $D(Y)'=0 S UPARROUT=1
"RTN","DGRPE4",17,0)
 . I UPARROUT=0 DO
"RTN","DGRPE4",18,0)
 . . K DR,DA,Y,DIE
"RTN","DGRPE4",19,0)
 . . S (DA,Y)=DFN,DIE="^DPT(",DR="",DGDRS="DR",DGCT=0
"RTN","DGRPE4",20,0)
 . . S J1="B401"
"RTN","DGRPE4",21,0)
 . . S DGDRD=$P($T(@J1),";;",2)
"RTN","DGRPE4",22,0)
 . . D S
"RTN","DGRPE4",23,0)
 . . S DIE("NO^")=""
"RTN","DGRPE4",24,0)
 . . D ^DIE
"RTN","DGRPE4",25,0)
 . . K DR,DA,Y,DIE
"RTN","DGRPE4",26,0)
 . . N DGEMPST
"RTN","DGRPE4",27,0)
 . . S DGEMPST=(+$P($G(^DPT(DFN,.311)),"^",15))
"RTN","DGRPE4",28,0)
 . . I (DGEMPST]"")!(DGEMPST'=3)!(DGEMPST'=9) DO
"RTN","DGRPE4",29,0)
 . . . S (DA,Y)=DFN,DIE="^DPT(",DR="",DGDRS="DR",DGCT=0
"RTN","DGRPE4",30,0)
 . . . S J1="C401"
"RTN","DGRPE4",31,0)
 . . . S DGDRD=$P($T(@J1),";;",2)
"RTN","DGRPE4",32,0)
 . . . D S
"RTN","DGRPE4",33,0)
 . . . D ^DIE
"RTN","DGRPE4",34,0)
 K DR,DA,Y,DIE
"RTN","DGRPE4",35,0)
 F  Q:DGDR'["401,"  S DGDR=$P(DGDR,"401,")_""_$P(DGDR,"401,",2,999)
"RTN","DGRPE4",36,0)
 I (UPARROUT=0)&(DGDR["402") DO
"RTN","DGRPE4",37,0)
 . K DR S (DA,Y)=DFN,DIE="^DPT(",DR="",DGDRS="DR",DGCT=0
"RTN","DGRPE4",38,0)
 . S J1="A402"
"RTN","DGRPE4",39,0)
 . S DGDRD=$P($T(@J1),";;",2)
"RTN","DGRPE4",40,0)
 . D S
"RTN","DGRPE4",41,0)
 . D ^DIE
"RTN","DGRPE4",42,0)
 . I $D(Y)'=0 S UPARROUT=1
"RTN","DGRPE4",43,0)
 . I UPARROUT=0 DO
"RTN","DGRPE4",44,0)
 . . K DR,DA,Y,DIE
"RTN","DGRPE4",45,0)
 . . S (DA,Y)=DFN,DIE="^DPT(",DR="",DGDRS="DR",DGCT=0
"RTN","DGRPE4",46,0)
 . . S J1="B402"
"RTN","DGRPE4",47,0)
 . . S DGDRD=$P($T(@J1),";;",2)
"RTN","DGRPE4",48,0)
 . . D S
"RTN","DGRPE4",49,0)
 . . S DIE("NO^")=""
"RTN","DGRPE4",50,0)
 . . D ^DIE
"RTN","DGRPE4",51,0)
 . . K DR,DA,Y,DIE
"RTN","DGRPE4",52,0)
 . . N DGEMPST
"RTN","DGRPE4",53,0)
 . . S DGEMPST=(+$P($G(^DPT(DFN,.311)),"^",15))
"RTN","DGRPE4",54,0)
 . . I (DGEMPST]"")!(DGEMPST'=3)!(DGEMPST'=9) DO
"RTN","DGRPE4",55,0)
 . . . S (DA,Y)=DFN,DIE="^DPT(",DR="",DGDRS="DR",DGCT=0
"RTN","DGRPE4",56,0)
 . . . S J1="C402"
"RTN","DGRPE4",57,0)
 . . . S DGDRD=$P($T(@J1),";;",2)
"RTN","DGRPE4",58,0)
 . . . D S
"RTN","DGRPE4",59,0)
 . . . D ^DIE
"RTN","DGRPE4",60,0)
 K DR,DA,Y,DIE
"RTN","DGRPE4",61,0)
 F  Q:DGDR'["402,"  S DGDR=$P(DGDR,"402,")_""_$P(DGDR,"402,",2,999)
"RTN","DGRPE4",62,0)
 K DR,DA,Y,DIE
"RTN","DGRPE4",63,0)
 Q
"RTN","DGRPE4",64,0)
S I $L(@DGDRS)+$L(DGDRD)<241 S @DGDRS=@DGDRS_DGDRD Q
"RTN","DGRPE4",65,0)
 S DGCT=DGCT+1,DGDRS="DR(1,2,"_DGCT_")",@DGDRS=DGDRD Q
"RTN","DGRPE4",66,0)
 Q
"RTN","DGRPE4",67,0)
A401 ;;.07;
"RTN","DGRPE4",68,0)
B401 ;;.31115;
"RTN","DGRPE4",69,0)
C401 ;;S DGST=$P(^DPT(DA,.311),"^",15);S:$S(DGST']"":1,DGST=3:1,DGST=9:1,1:0) Y=0 I Y=0 K DGST;S:($P(^DPT(DA,.311),"^",15)'=5) Y=.3111;.31116;.3111;S:X']"" Y="@41";.3113;S:X']"" Y=.3116;.3114;S:X']"" Y=.3116;.3115:.3117;.2205;.3119;@41;K DGST;
"RTN","DGRPE4",70,0)
A402 ;;.2514;
"RTN","DGRPE4",71,0)
B402 ;;.2515;
"RTN","DGRPE4",72,0)
C402 ;;S DGST=$P(^DPT(DA,.25),"^",15);S:$S(DGST']"":1,DGST=3:1,DGST=9:1,1:0) Y=0 I Y=0 K DGST;S:($P(^DPT(DA,.25),"^",15)'=5) Y=.251;.2516;.251;S:X']"" Y="@42";.252;S:X']"" Y=.255;.253;S:X']"" Y=.255;.254:.256;.2206;.258;@42;K DGST;
"RTN","DGRPEIS")
0^18^B38166965
"RTN","DGRPEIS",1,0)
DGRPEIS ;ALB/MIR - INCOME SCREENING DATA FOR EDIT ; 27 JAN 92
"RTN","DGRPEIS",2,0)
 ;;5.3;Registration;**10,45,108,624**;Aug 13, 1993
"RTN","DGRPEIS",3,0)
 ; Handles editing of dependent info
"RTN","DGRPEIS",4,0)
 ; CHANGES TO THIS ROUTINE SHOULD BE COORDINATED WITH THE MEANS TEST
"RTN","DGRPEIS",5,0)
 ; DEVELOPER.  MANY CALLS IN THIS ROUTINE (ADD, EDIT, INACT, ETC.) ARE
"RTN","DGRPEIS",6,0)
 ; CALLED FROM MEANS TEST OR ARE MIMICKED THERE.
"RTN","DGRPEIS",7,0)
 ; In:   DFN as IEN of PATIENT file
"RTN","DGRPEIS",8,0)
 ;       DGDR as string of items selected for editing
"RTN","DGRPEIS",9,0)
 ;Out:   DGFL as -2 if time-out, -1 if up-arrow
"RTN","DGRPEIS",10,0)
EN S DGFL=0
"RTN","DGRPEIS",11,0)
 S DGISDT=$$LYR^DGMTSCU1(DT)
"RTN","DGRPEIS",12,0)
 S DGRP(0)=$G(^DPT(DFN,0)) D NEW^DGRPEIS1,GETREL^DGMTU11(DFN,"VSD",DGISDT)
"RTN","DGRPEIS",13,0)
 I DGDR[801 D SPOUSE^DGRPEIS2 S DGPREF=$G(DGREL("S")) G Q:DGFL I DGSPFL D:DGPREF EDIT(DGPREF,"S") I 'DGPREF D ADD(DFN,"S")
"RTN","DGRPEIS",14,0)
 K DGSPFL,DGPREF
"RTN","DGRPEIS",15,0)
Q Q
"RTN","DGRPEIS",16,0)
 ;
"RTN","DGRPEIS",17,0)
ADD(DFN,DGTYPE,DGTSTDT) ; subroutine to add to files 408.12 & 408.13
"RTN","DGRPEIS",18,0)
 ; In -- DFN as the IEN of file 2 for the vet
"RTN","DGRPEIS",19,0)
 ;       DGTYPE as C for mt children or D for all deps
"RTN","DGRPEIS",20,0)
 ;            S for spouse (default spouse)
"RTN","DGRPEIS",21,0)
 ;       DGTSTDT - optional test date
"RTN","DGRPEIS",22,0)
 ;Out -- DGPRI as patient relation IEN
"RTN","DGRPEIS",23,0)
 ;       DGIPI as income person IEN
"RTN","DGRPEIS",24,0)
 ;       DGFL as -2 if time-out, -1 if '^', 0 otherwise
"RTN","DGRPEIS",25,0)
 N ANS,DA,PROMPT,SPOUSE,TYPE,DGVADD,DGSKIPST,DGSADD,DGIPIEN,DGUQTLP
"RTN","DGRPEIS",26,0)
 I '$D(DGTSTDT) N DGTSTDT S DGTSTDT=$S($D(DGMTDT):DGMTDT,1:DT)
"RTN","DGRPEIS",27,0)
 S DGFL=$G(DGFL)
"RTN","DGRPEIS",28,0)
 S DGTYPE=$G(DGTYPE),SPOUSE=$S(DGTYPE']"":1,DGTYPE="C":0,DGTYPE="D":0,1:1)
"RTN","DGRPEIS",29,0)
 S DGFL=$G(DGFL),PROMPT="NAME^SEX^DATE OF BIRTH^^^^^^SSN^^MAIDEN NAME^STREET ADDRESS [LINE 1]^STREET ADDRESS [LINE 2]^STREET ADDRESS [LINE 3]^CITY^STATE^ZIP^PHONE NUMBER"
"RTN","DGRPEIS",30,0)
 S TYPE=$S(SPOUSE:"SPOUSE'S ",DGTYPE="C":"CHILD'S ",1:"DEPENDENT'S ")
"RTN","DGRPEIS",31,0)
 S DGSKIPST=0 ;* Skip Add 2 and 3 prompts when Add 1 or 2 not entered
"RTN","DGRPEIS",32,0)
 S DGUQTLP=0
"RTN","DGRPEIS",33,0)
 F DGRPI=.01:.01:.03,.09,1.1:.1:1.8 D  Q:DGVADD  Q:DGSADD  Q:DGUQTLP  I DGFL Q
"RTN","DGRPEIS",34,0)
 . S (DGSADD,DGVADD,DGIPIEN)=0
"RTN","DGRPEIS",35,0)
 . ; Is spouse/dependent address same as patient address?
"RTN","DGRPEIS",36,0)
 . I +DGRPI=1.2 DO
"RTN","DGRPEIS",37,0)
 . . K DIR
"RTN","DGRPEIS",38,0)
 . . S DIR(0)="YAO^^"
"RTN","DGRPEIS",39,0)
 . . S DIR("A")=TYPE_"STREET ADDRESS SAME AS PATIENT'S: "
"RTN","DGRPEIS",40,0)
 . . S DIR("B")="YES"
"RTN","DGRPEIS",41,0)
 . . S:TYPE'="SPOUSE'S " DIR("?")="Enter 'Y' if the child/dependent has the same address and phone number as the patient, otherwise enter 'N'."
"RTN","DGRPEIS",42,0)
 . . S:TYPE="SPOUSE'S " DIR("?")="Enter 'Y' if the spouse has the same address and phone number as the patient, otherwise enter 'N'."
"RTN","DGRPEIS",43,0)
 . . D ^DIR
"RTN","DGRPEIS",44,0)
 . . S DGVADD=+Y
"RTN","DGRPEIS",45,0)
 . . K Y,DIR
"RTN","DGRPEIS",46,0)
 . . S DGIPIEN=$$SPSCHK(DFN)
"RTN","DGRPEIS",47,0)
 . . I 'DGVADD,(TYPE'="SPOUSE'S"),(DGIPIEN) DO
"RTN","DGRPEIS",48,0)
 . . . K DIR,Y
"RTN","DGRPEIS",49,0)
 . . . S DIR(0)="YAO^^"
"RTN","DGRPEIS",50,0)
 . . . S DIR("A")=TYPE_"STREET ADDRESS SAME AS SPOUSE'S: "
"RTN","DGRPEIS",51,0)
 . . . S DIR("B")="YES"
"RTN","DGRPEIS",52,0)
 . . . S DIR("?")="Enter 'Y' if the child/dependent has the same address as the spouse, otherwise enter 'N'."
"RTN","DGRPEIS",53,0)
 . . . D ^DIR
"RTN","DGRPEIS",54,0)
 . . . S DGSADD=+Y
"RTN","DGRPEIS",55,0)
 . . . K Y,DIR
"RTN","DGRPEIS",56,0)
 . ;
"RTN","DGRPEIS",57,0)
 . ; If spouse/dependent address is same as patient's set spouse/dep add.
"RTN","DGRPEIS",58,0)
 . I DGVADD D PATASET(DFN) ;*Set to Patient address
"RTN","DGRPEIS",59,0)
 . I DGSADD D SPSASET(DGIPIEN) ;*Set to Spouse address
"RTN","DGRPEIS",60,0)
 . ;
"RTN","DGRPEIS",61,0)
 . ; Spouse/dep address is not same as patient/spouse add, prompt add.
"RTN","DGRPEIS",62,0)
 . I 'DGVADD,'DGSADD DO
"RTN","DGRPEIS",63,0)
 . . K DIR S DIR(0)="408.13,"_DGRPI I DGRPI=.01 S DIR(0)=DIR(0)_"O"
"RTN","DGRPEIS",64,0)
 . . I DGRPI=.02,SPOUSE S X=$P($G(^DPT(DFN,0)),"^",2) I X]"" S DIR("B")=$S(X="F":"MALE",1:"FEMALE") ; default spouse sex
"RTN","DGRPEIS",65,0)
 . . S:DGRPI=.03 DIR(0)=DIR(0)_"^^"_"S %DT=""EP"" D ^%DT S X=Y K:($E(DGTSTDT,1,3)-1_1231)<X X"
"RTN","DGRPEIS",66,0)
 . . S:+DGRPI<1 DIR("A")=TYPE_$P(PROMPT,"^",DGRPI*100)
"RTN","DGRPEIS",67,0)
 . . S:+DGRPI>1 DIR("A")=TYPE_$P(PROMPT,"^",DGRPI*10)
"RTN","DGRPEIS",68,0)
 . . I (+DGRPI'=1.1)!((+DGRPI=1.1)&(SPOUSE)&($G(ANS(.02))="F")) DO
"RTN","DGRPEIS",69,0)
 . . . I (+DGRPI=1.3)!(+DGRPI=1.4) D:('DGSKIPST) ^DIR
"RTN","DGRPEIS",70,0)
 . . . I (+DGRPI'=1.3)&(+DGRPI'=1.4) D ^DIR
"RTN","DGRPEIS",71,0)
 . . . I $D(DTOUT)!$D(DUOUT) S:((DGRPI=.09)!((DGRPI>1.1)&(DGRPI<1.9))) DGUQTLP=1
"RTN","DGRPEIS",72,0)
 . . . I $D(DTOUT)!$D(DUOUT) S DGFL=$S($D(DUOUT):$S((DGRPI=.09)!((DGRPI>1.1)&(DGRPI<1.9)):"",1:-1),1:-2) Q
"RTN","DGRPEIS",73,0)
 . . . I DGRPI=.01,(Y']"") S DGFL=-1 Q
"RTN","DGRPEIS",74,0)
 . . . S ANS(DGRPI)=Y
"RTN","DGRPEIS",75,0)
 . . . I (+DGRPI=1.2),(ANS(1.2)']"") S DGSKIPST=1
"RTN","DGRPEIS",76,0)
 . . . I (+DGRPI=1.3),(ANS(1.3)']"") S DGSKIPST=1
"RTN","DGRPEIS",77,0)
 . . . I DGRPI=.03,$D(ANS(.03)) S X2=ANS(.03),X1=DT D ^%DTC I 'SPOUSE S AGE=(X/365.25) W ?62,"(AGE: "_$P(AGE,".")_")" I AGE>17 D WRT^DGRPEIS3
"RTN","DGRPEIS",78,0)
 . . I DGRPI=.01,(Y']"") Q
"RTN","DGRPEIS",79,0)
 I '$D(ANS(.01)) S DGFL=0 G ADDQ
"RTN","DGRPEIS",80,0)
 I DGFL=-2!'$D(ANS(.03)) W !?3,*7,"Incomplete Entry...Deleted" G ADDQ
"RTN","DGRPEIS",81,0)
 S DGRP0ND=ANS(.01)_"^"_ANS(.02)_"^"_ANS(.03)_"^^^^^^"_$G(ANS(.09))
"RTN","DGRPEIS",82,0)
 S DGRP1ND=$G(ANS(1.1))_"^"_$G(ANS(1.2))_"^"_$G(ANS(1.3))_"^"_$G(ANS(1.4))_"^"_$G(ANS(1.5))_"^"_$P($G(ANS(1.6)),"^",1)_"^"_$G(ANS(1.7))_"^"_$G(ANS(1.8))
"RTN","DGRPEIS",83,0)
 D NEWIP^DGRPEIS1
"RTN","DGRPEIS",84,0)
ADDQ K DGRP0ND,DGRP1ND,DGRPI,DIR,DIRUT,DTOUT,DUOUT
"RTN","DGRPEIS",85,0)
 Q
"RTN","DGRPEIS",86,0)
 ;
"RTN","DGRPEIS",87,0)
PATASET(DFN) ;* Set the address equal to the patient's
"RTN","DGRPEIS",88,0)
 ; Input:  DFN   - Patient file IEN and key to Patient Relation entries
"RTN","DGRPEIS",89,0)
 ; Output: ANS array of dependents address
"RTN","DGRPEIS",90,0)
 S ANS(1.2)=$P($G(^DPT(DFN,.11)),"^",1)
"RTN","DGRPEIS",91,0)
 S ANS(1.3)=$P($G(^DPT(DFN,.11)),"^",2)
"RTN","DGRPEIS",92,0)
 S ANS(1.4)=$P($G(^DPT(DFN,.11)),"^",3)
"RTN","DGRPEIS",93,0)
 S ANS(1.5)=$P($G(^DPT(DFN,.11)),"^",4)
"RTN","DGRPEIS",94,0)
 S ANS(1.6)=$P($G(^DPT(DFN,.11)),"^",5)
"RTN","DGRPEIS",95,0)
 S ANS(1.7)=$P($G(^DPT(DFN,.11)),"^",12)
"RTN","DGRPEIS",96,0)
 S ANS(1.8)=$P($G(^DPT(DFN,.13)),"^",1)
"RTN","DGRPEIS",97,0)
 Q
"RTN","DGRPEIS",98,0)
 ;
"RTN","DGRPEIS",99,0)
SPSCHK(DFN) ;*Check for existence of active spouse
"RTN","DGRPEIS",100,0)
 ; Input:  DFN   - Patient file IEN and key to Patient Relation entries
"RTN","DGRPEIS",101,0)
 ; Output: IPIEN - Spouse IEN in 408.13
"RTN","DGRPEIS",102,0)
 ;                 0: no active spouse
"RTN","DGRPEIS",103,0)
 N PRIEN,IPIEN,SPREDIEN,SPRED
"RTN","DGRPEIS",104,0)
 S IPIEN=0
"RTN","DGRPEIS",105,0)
 I $D(^DGPR(408.12,"B",DFN)) DO
"RTN","DGRPEIS",106,0)
 . S PRIEN=""
"RTN","DGRPEIS",107,0)
 . F  S PRIEN=$O(^DGPR(408.12,"B",DFN,PRIEN)) Q:(+PRIEN=0)  DO
"RTN","DGRPEIS",108,0)
 . . I $D(^DG(408.11,$P(^DGPR(408.12,PRIEN,0),"^",2),0)) DO
"RTN","DGRPEIS",109,0)
 . . . I $P(^DG(408.11,$P(^DGPR(408.12,PRIEN,0),"^",2),0),"^",1)="SPOUSE" DO
"RTN","DGRPEIS",110,0)
 . . . . S SPRED=$O(^DGPR(408.12,PRIEN,"E","AID",""))
"RTN","DGRPEIS",111,0)
 . . . . S:+SPRED'=0 SPREDIEN=$O(^DGPR(408.12,PRIEN,"E","AID",SPRED,""))
"RTN","DGRPEIS",112,0)
 . . . . I +$P($G(^DGPR(408.12,PRIEN,"E",SPREDIEN,0)),"^",2)=1 S IPIEN=$P($P(^DGPR(408.12,PRIEN,0),"^",3),";",1)
"RTN","DGRPEIS",113,0)
 Q IPIEN
"RTN","DGRPEIS",114,0)
 ;
"RTN","DGRPEIS",115,0)
SPSASET(IPIEN) ;* Set the address equal to the patient's spouse address
"RTN","DGRPEIS",116,0)
 ; Input:  IPIEN - Spouse IEN in 408.13
"RTN","DGRPEIS",117,0)
 ; Output: ANS array of Childs address
"RTN","DGRPEIS",118,0)
 ;
"RTN","DGRPEIS",119,0)
 S ANS(1.2)=$P($G(^DGPR(408.13,IPIEN,1)),"^",2)
"RTN","DGRPEIS",120,0)
 S ANS(1.3)=$P($G(^DGPR(408.13,IPIEN,1)),"^",3)
"RTN","DGRPEIS",121,0)
 S ANS(1.4)=$P($G(^DGPR(408.13,IPIEN,1)),"^",4)
"RTN","DGRPEIS",122,0)
 S ANS(1.5)=$P($G(^DGPR(408.13,IPIEN,1)),"^",5)
"RTN","DGRPEIS",123,0)
 S ANS(1.6)=$P($G(^DGPR(408.13,IPIEN,1)),"^",6)
"RTN","DGRPEIS",124,0)
 S ANS(1.7)=$P($G(^DGPR(408.13,IPIEN,1)),"^",7)
"RTN","DGRPEIS",125,0)
 S ANS(1.8)=$P($G(^DGPR(408.13,IPIEN,1)),"^",8)
"RTN","DGRPEIS",126,0)
 Q
"RTN","DGRPEIS",127,0)
 ;
"RTN","DGRPEIS",128,0)
INACT ; prompt to inactivate a patient relation
"RTN","DGRPEIS",129,0)
 ;     Input -- DGREL("D") array of dependents
"RTN","DGRPEIS",130,0)
 ;              DGDEP as number of deps (from GETREL call)
"RTN","DGRPEIS",131,0)
 N ACT,DGDT,IEN,X
"RTN","DGRPEIS",132,0)
 S DGFL=$G(DGFL)
"RTN","DGRPEIS",133,0)
 I 'DGDEP W !!,"No dependents to inactivate!" Q
"RTN","DGRPEIS",134,0)
 W !!,"Enter a number 1-",DGDEP," to indicate the dependent you wish to inactivate: " R X:DTIME
"RTN","DGRPEIS",135,0)
 I '$T S DGFL=-2 Q
"RTN","DGRPEIS",136,0)
 I X["^" S DGFL=-1 Q
"RTN","DGRPEIS",137,0)
 I X']"" Q
"RTN","DGRPEIS",138,0)
 I X["?" W !!,"Enter a number 1-",DGDEP," indicating the number of the dependent you wish to inactivate" G INACT
"RTN","DGRPEIS",139,0)
 I $D(DGREL("D",X)) S X=DGREL("D",X) D SETUP^DGRPEIS1 Q  ; check for IVM dependents
"RTN","DGRPEIS",140,0)
 S X=$G(DGREL("C",X)) I 'X G INACT ; check for MT deps
"RTN","DGRPEIS",141,0)
 D SETUP^DGRPEIS1
"RTN","DGRPEIS",142,0)
 Q
"RTN","DGRPEIS",143,0)
EDIT(DGPREF,DGTYPE,DATE) ; edit demographic data for a dep
"RTN","DGRPEIS",144,0)
 ;    Input -- DGPREF as returned by GETREL^DGMTU11 for dep to edit
"RTN","DGRPEIS",145,0)
 ;             DGTYPE as D if all deps or C if MT children only
"RTN","DGRPEIS",146,0)
 ;                    S for spouse (optional - spouse if not defined)
"RTN","DGRPEIS",147,0)
 ;             DATE [optional] as income screening year/default= last yr
"RTN","DGRPEIS",148,0)
 ;   Output -- DGFL as -2 if timeout, -1 if '^', or 0 o/w
"RTN","DGRPEIS",149,0)
 N DOB,DGACT,RELATION,UPARROW,X,Y,DGEDDEP
"RTN","DGRPEIS",150,0)
 D EDIT^DGRPEIS3
"RTN","DGRPEIS",151,0)
 Q
"RTN","DGRPEIS1")
0^21^B25496202
"RTN","DGRPEIS1",1,0)
DGRPEIS1 ;ALB/MIR - CALLS TO ADD NEW PATIENT RELATIONS AND INCOME PERSONS ; 27 FEB 92
"RTN","DGRPEIS1",2,0)
 ;;5.3;Registration;**10,45,108,624**;Aug 13, 1993
"RTN","DGRPEIS1",3,0)
 ;Adds entries to FILES #408.12 & 408.13
"RTN","DGRPEIS1",4,0)
 ;
"RTN","DGRPEIS1",5,0)
NEW ;check if data in FILE #408.12
"RTN","DGRPEIS1",6,0)
 ;out - DGPRI=IFN of #408.12
"RTN","DGRPEIS1",7,0)
 ;      DGFL [-1='^'/-2=time-out]
"RTN","DGRPEIS1",8,0)
 N DGRPDOB,DGRP0ND
"RTN","DGRPEIS1",9,0)
 I '$D(DGTSTDT) N DGTSTDT S DGTSTDT=$S($D(DGMTDT):DGMTDT,1:DT)
"RTN","DGRPEIS1",10,0)
 S DGPRI=$O(^DGPR(408.12,"C",DFN_";DPT(",0)),DGFL=$G(DGFL)
"RTN","DGRPEIS1",11,0)
 I '$D(^DGPR(408.12,+DGPRI,0)) S DGRP0ND=DFN_"^"_1_"^"_DFN_";DPT(",DGRPDOB=$P($G(^DPT(+DFN,0)),"^",3) D NEWPR
"RTN","DGRPEIS1",12,0)
 S DGIRI=$O(^DGMT(408.22,"B",DFN,0))
"RTN","DGRPEIS1",13,0)
 I '$D(^DGMT(408.22,+DGIRI,0)) D GETIENS^DGMTU2(DFN,+DGPRI,DGTSTDT)
"RTN","DGRPEIS1",14,0)
 Q
"RTN","DGRPEIS1",15,0)
NEWIP ;Add relation to #408.13 file
"RTN","DGRPEIS1",16,0)
 ; In - DFN=IEN of File #2
"RTN","DGRPEIS1",17,0)
 ;      DGRP0ND=0 node of 408.13
"RTN","DGRPEIS1",18,0)
 ;Out - DGIPI=408.13 IEN
"RTN","DGRPEIS1",19,0)
 K DINUM N DGRPDOB,DGSEX,I,X
"RTN","DGRPEIS1",20,0)
 S DGRPDOB=$P(DGRP0ND,"^",3),DGSEX=$P(DGRP0ND,"^",2)
"RTN","DGRPEIS1",21,0)
 S (DIK,DIC)="^DGPR(408.13,",DIC(0)="L",DLAYGO=408.13,X=$P(DGRP0ND,"^",1) K DD,DO D FILE^DICN S (DGIPI,DA)=+Y K DLAYGO
"RTN","DGRPEIS1",22,0)
 L +^DGPR(408.13,+DGIPI) S ^DGPR(408.13,+DGIPI,0)=DGRP0ND S ^DGPR(408.13,+DGIPI,1)=DGRP1ND D IX1^DIK L -^DGPR(408.13,+DGIPI)
"RTN","DGRPEIS1",23,0)
 S Y=DGIPI,DGRP0ND=DFN_"^"_$S(SPOUSE:2,1:"")_"^"_+Y_";DGPR(408.13,"
"RTN","DGRPEIS1",24,0)
 ;FALLS THRU!
"RTN","DGRPEIS1",25,0)
NEWPR ;Add entry to file #408.12
"RTN","DGRPEIS1",26,0)
 ;In - DGRP0ND=0 node of 408.12
"RTN","DGRPEIS1",27,0)
 ;     DGRPDOB=DOB of relation
"RTN","DGRPEIS1",28,0)
 ;Out - DGPRI=IFN of new 408.12 entry
"RTN","DGRPEIS1",29,0)
 K DINUM N DOB,X
"RTN","DGRPEIS1",30,0)
 I '$D(DGTSTDT) N DGTSTDT S DGTSTDT=$S($D(DGMTDT):DGMTDT,1:DT)
"RTN","DGRPEIS1",31,0)
 S DOB=$G(DGRPDOB) I 'DOB S DOB=$E(DGTSTDT,1,3)-1_"0101" ; use dob for effective date...default = Jan 1 of prior year
"RTN","DGRPEIS1",32,0)
DIC I $P(DGRP0ND,"^",2)']"" S DIC="^DG(408.11,",DIC(0)="AEQMZ",DIC("A")="RELATIONSHIP: ",DIC("S")="I Y>2,""E""_DGSEX[$P(^(0),""^"",3),$S(DGTYPE=""D"":1,Y<7:1,1:0)" D ^DIC I '$D(DTOUT),(Y'>0) W *7,"   Required!!" G DIC
"RTN","DGRPEIS1",33,0)
 I $D(DTOUT) K DTOUT S DGFL=-2 G NEWPRQ
"RTN","DGRPEIS1",34,0)
 I $P(DGRP0ND,"^",2)']"" S $P(DGRP0ND,"^",2)=+Y
"RTN","DGRPEIS1",35,0)
 D ACT^DGRPEIS2 I DGFL<0 D  G NEWPRQ
"RTN","DGRPEIS1",36,0)
 .W !?3,*7,"Entry incomplete...deleted",!
"RTN","DGRPEIS1",37,0)
 .Q:'$G(DA)!($G(DIK)'="^DGPR(408.13,")  ;defined for deps in newip
"RTN","DGRPEIS1",38,0)
 .D ^DIK
"RTN","DGRPEIS1",39,0)
 S (DIK,DIC)="^DGPR(408.12,",DIC(0)="L",DLAYGO=408.12,X=+DGRP0ND K DD,DO D FILE^DICN S DGPRI=+Y K DLAYGO
"RTN","DGRPEIS1",40,0)
 S DA=+DGPRI L +^DGPR(408.12,+DGPRI) S ^DGPR(408.12,+DGPRI,0)=DGRP0ND,^DGPR(408.12,+DGPRI,"E",0)="^408.1275D^1^1",^(1,0)=DGACT_"^"_1 D IX1^DIK L -^DGPR(408.12,+DGPRI)
"RTN","DGRPEIS1",41,0)
 D RESET^DGMTU11(DFN)
"RTN","DGRPEIS1",42,0)
 S Y=DGPRI
"RTN","DGRPEIS1",43,0)
NEWPRQ K DGACT,DGSEX,DGRPDOB,DA,DIC,DIK,DIRUT,DTOUT,DUOUT,X,Y
"RTN","DGRPEIS1",44,0)
 Q
"RTN","DGRPEIS1",45,0)
SETUP ; called from SPINACT / sets vars for ASOF tag
"RTN","DGRPEIS1",46,0)
 N FNAME S FNAME=$P($$NAME^DGMTU1(+X),",",2)
"RTN","DGRPEIS1",47,0)
 S ACT=$O(^DGPR(408.12,+X,"E","AID","")),ACT=$O(^(+ACT,0)),ACT=$G(^DGPR(408.12,+X,"E",+ACT,0))
"RTN","DGRPEIS1",48,0)
 I $P(ACT,"^",2)']"" Q  ; never active
"RTN","DGRPEIS1",49,0)
 I '$P(ACT,U,2) D  Q
"RTN","DGRPEIS1",50,0)
 .W !,"Dependent has been inactivated as of "
"RTN","DGRPEIS1",51,0)
 .S Y=+ACT
"RTN","DGRPEIS1",52,0)
 .D DD^%DT W Y H 3
"RTN","DGRPEIS1",53,0)
 S IEN=+X
"RTN","DGRPEIS1",54,0)
ASOF ;ask as of date
"RTN","DGRPEIS1",55,0)
 N LYR,SPOUSE,DGXDT
"RTN","DGRPEIS1",56,0)
 I '$D(DGTSTDT) N DGTSTDT S DGTSTDT=$S($D(DGMTDT):DGMTDT,1:DT)
"RTN","DGRPEIS1",57,0)
 S SPOUSE=$S($P($G(^DGPR(408.12,+IEN,0)),"^",2)=2:1,1:0)
"RTN","DGRPEIS1",58,0)
 S LYR=$E($$LYR^DGMTSCU1(DGTSTDT),1,3)_1231
"RTN","DGRPEIS1",59,0)
 ;I 'SPOUSE S LYR=$E($$LYR^DGMTSCU1(LYR),1,3)_1231
"RTN","DGRPEIS1",60,0)
 K DIR S DIR(0)="D^"_+ACT_":"_LYR_":AEP",DIR("A")="Date "_FNAME_" no longer a dependent"
"RTN","DGRPEIS1",61,0)
 S DIR("?",1)="Enter the date this person was no longer a dependent of the veteran.",DIR("?",2)="This could include a date of death or the date a child turned 18 for"
"RTN","DGRPEIS1",62,0)
 S DIR("?",3)="children.  For a spouse, this would be the date of divorce or date ",DIR("?",4)="of death of the spouse.  Date must be after the person became a"
"RTN","DGRPEIS1",63,0)
 S DIR("?",5)="dependent, but prior to 12/31/"_($E(LYR,1,3)+1700)_"."
"RTN","DGRPEIS1",64,0)
 I 'SPOUSE S DIR("?",6)=" ",DIR("?",7)="A person should only be inactivated if the individual was not a",DIR("?",8)="dependent at any time during the prior calendar year."
"RTN","DGRPEIS1",65,0)
 S DIR("?")=" "
"RTN","DGRPEIS1",66,0)
 I SPOUSE S DIR("?",6)=" ",DIR("?",7)="A spouse should be inactivated if the spouse and veteran were not",DIR("?",8)="married as of 12/31/"_($E(LYR,1,3)+1700)_"."
"RTN","DGRPEIS1",67,0)
 D ^DIR K DIR
"RTN","DGRPEIS1",68,0)
 I $D(DTOUT)!$D(DUOUT) S DGFL=$S($D(DTOUT):-2,1:-1) Q
"RTN","DGRPEIS1",69,0)
 S DGXDT=Y
"RTN","DGRPEIS1",70,0)
 I $E(Y,1,3)=$E(LYR,1,3) D  Q:'$G(Y)
"RTN","DGRPEIS1",71,0)
 .N DIR,DIRUT,DIROUT,DTOUT,DUOUT
"RTN","DGRPEIS1",72,0)
 .W !!,"Warning: Data will be used if dependent was active at least one day in a"
"RTN","DGRPEIS1",73,0)
 .W !,"year.  Data will not be used if inactivation is prior to 1/1/"_($E(LYR,1,3)+1700)_" or it"
"RTN","DGRPEIS1",74,0)
 .W !,"is equal to the activation date."
"RTN","DGRPEIS1",75,0)
 .S DIR(0)="Y",DIR("B")="NO",DIR("A")="Do you wish to inactivate this dependent on the selected date?"
"RTN","DGRPEIS1",76,0)
 .D ^DIR
"RTN","DGRPEIS1",77,0)
 S DA(1)=IEN,DIC="^DGPR(408.12,"_DA(1)_",""E"",",X=DGXDT,DIC(0)="L",DLAYGO=408.1275 D ^DIC S DIE=DIC,DA=+Y,DR=".02////0" D ^DIE
"RTN","DGRPEIS1",78,0)
 D RESET^DGMTU11(DFN)
"RTN","DGRPEIS1",79,0)
ASOFQ K DA,DIC,DIE,DIR,DIRUT,DLAYGO,DR,DTOUT,DUOUT,X,Y
"RTN","DGRPEIS1",80,0)
 Q
"RTN","DGRPEIS3")
0^19^B78826774
"RTN","DGRPEIS3",1,0)
DGRPEIS3 ;ALB/CAW - INCOME SCREENING DATA (CON'T) ;12/1/94
"RTN","DGRPEIS3",2,0)
 ;;5.3;Registration;**45,624**;Aug 13, 1993
"RTN","DGRPEIS3",3,0)
 ;
"RTN","DGRPEIS3",4,0)
HELP ; Display information when veteran's DOB is past the income year
"RTN","DGRPEIS3",5,0)
 ;
"RTN","DGRPEIS3",6,0)
 W !!,"Please return to screen 8 and check the veteran's effective date."
"RTN","DGRPEIS3",7,0)
 W !,"The effective date was created based on the veteran's date of birth."
"RTN","DGRPEIS3",8,0)
 W !,"You might also want to check the date of birth for this veteran."
"RTN","DGRPEIS3",9,0)
 W ! S DIR(0)="E" D ^DIR K DIR W !
"RTN","DGRPEIS3",10,0)
 Q
"RTN","DGRPEIS3",11,0)
 ;
"RTN","DGRPEIS3",12,0)
WRT ; Write age statement
"RTN","DGRPEIS3",13,0)
 Q:'$G(DGMTI)
"RTN","DGRPEIS3",14,0)
 W !!,"This dependent is 18 years or older.  To list this person as a dependent"
"RTN","DGRPEIS3",15,0)
 W !,"they have to be:"
"RTN","DGRPEIS3",16,0)
 W !,"     1.  An UNMARRIED child who is under the age of 18."
"RTN","DGRPEIS3",17,0)
 W !,"     2.  Between the ages of 18 and 23 and attending school."
"RTN","DGRPEIS3",18,0)
 W !,"     3.  An unmarried child over the age of 17 who became permanently"
"RTN","DGRPEIS3",19,0)
 W !,"         incapable of self support before the age of 18."
"RTN","DGRPEIS3",20,0)
 Q
"RTN","DGRPEIS3",21,0)
 ;
"RTN","DGRPEIS3",22,0)
EDIT ;CALLED FROM ROUTINE DGRPEIS
"RTN","DGRPEIS3",23,0)
 S DGEDDEP=1
"RTN","DGRPEIS3",24,0)
 S DGFL=$G(DGFL)
"RTN","DGRPEIS3",25,0)
 S DATE=$S($G(DATE):DATE,1:$$LYR^DGMTSCU1(DT))
"RTN","DGRPEIS3",26,0)
 S X=$P(DGPREF,"^",2)
"RTN","DGRPEIS3",27,0)
 S DGTYPE=$G(DGTYPE),DGTYPE=$S(DGTYPE']"":"S",DGTYPE="C":"C",DGTYPE="D":"D",1:"S")
"RTN","DGRPEIS3",28,0)
 S DIE="^"_$P(X,";",2),DA=+X
"RTN","DGRPEIS3",29,0)
 ;
"RTN","DGRPEIS3",30,0)
 S DR=".01;.02;.03;.09"_$S(DGTYPE="S":";1.1",1:"")_";S UPARROW=1"
"RTN","DGRPEIS3",31,0)
 K DG,DQ D ^DIE I $D(DTOUT)!$D(DUOUT)!'$D(UPARROW) S DGFL=$S($D(DTOUT):-2,1:-1) D EDITQ Q
"RTN","DGRPEIS3",32,0)
 S DOB=$P($G(@(DIE_DA_",0)")),U,3)
"RTN","DGRPEIS3",33,0)
 ;
"RTN","DGRPEIS3",34,0)
 N DGVADD,DGSADD,DGIPIEN,DGUQTLP,SPOUSE,DGFL,DGRPI
"RTN","DGRPEIS3",35,0)
 S (DGVADD,DGSADD,DGIPIEN,DGUQTLP)=0
"RTN","DGRPEIS3",36,0)
 S SPOUSE=$S(DGTYPE="S":1,1:0),DGFL=$G(DGFL)
"RTN","DGRPEIS3",37,0)
 ; Is spouse/dependent address same as patient address?
"RTN","DGRPEIS3",38,0)
 K DIR
"RTN","DGRPEIS3",39,0)
 S DIR(0)="YAO^^"
"RTN","DGRPEIS3",40,0)
 S DIR("A")="STREET ADDRESS SAME AS PATIENT'S: "
"RTN","DGRPEIS3",41,0)
 S DIR("B")="YES"
"RTN","DGRPEIS3",42,0)
 S DIR("?")="Enter 'Y' if the "_$S(SPOUSE:"spouse",1:"child")_" has the same address as the patient, otherwise enter 'N'."
"RTN","DGRPEIS3",43,0)
 D ^DIR
"RTN","DGRPEIS3",44,0)
 S DGVADD=+Y
"RTN","DGRPEIS3",45,0)
 K Y,DIR
"RTN","DGRPEIS3",46,0)
 S DGIPIEN=$$SPSCHK^DGRPEIS(DFN)
"RTN","DGRPEIS3",47,0)
 I 'DGVADD,(DGTYPE'="S"),DGIPIEN D
"RTN","DGRPEIS3",48,0)
 . K DIR,Y
"RTN","DGRPEIS3",49,0)
 . S DIR(0)="YAO^^"
"RTN","DGRPEIS3",50,0)
 . S DIR("A")="STREET ADDRESS SAME AS SPOUSE'S: "
"RTN","DGRPEIS3",51,0)
 . S DIR("B")="YES"
"RTN","DGRPEIS3",52,0)
 . S DIR("?")="Enter 'Y' if the child has the same address as the spouse, otherwise enter 'N'."
"RTN","DGRPEIS3",53,0)
 . D ^DIR
"RTN","DGRPEIS3",54,0)
 . S DGSADD=+Y
"RTN","DGRPEIS3",55,0)
 . K Y,DIR
"RTN","DGRPEIS3",56,0)
 ;
"RTN","DGRPEIS3",57,0)
 ; If spouse/dependent address is same as patient's, set spouse/dep address
"RTN","DGRPEIS3",58,0)
 I DGVADD!DGSADD D
"RTN","DGRPEIS3",59,0)
 . I DGVADD D PATASET^DGRPEIS(DFN) ;*Set to Patient address
"RTN","DGRPEIS3",60,0)
 . I DGSADD D SPSASET^DGRPEIS(DGIPIEN) ;*Set to Spouse address
"RTN","DGRPEIS3",61,0)
 . N FLD,FDA S FLD=0 F  S FLD=$O(ANS(FLD)) Q:'FLD  D
"RTN","DGRPEIS3",62,0)
 . . S FDA(408.13,DA_",",FLD)=ANS(FLD) K ANS(FLD)
"RTN","DGRPEIS3",63,0)
 . D FILE^DIE("","FDA","")
"RTN","DGRPEIS3",64,0)
 ;
"RTN","DGRPEIS3",65,0)
 ;Spouse/dep address not same as patient/spouse address; prompt for it
"RTN","DGRPEIS3",66,0)
 I 'DGVADD,'DGSADD D
"RTN","DGRPEIS3",67,0)
 . S DR="1.2;S:X']"""" Y=1.5;1.3;S:X']"""" Y=1.5;1.4;1.5;1.6;1.7;1.8;S UPARROW=1"
"RTN","DGRPEIS3",68,0)
 . K DG,DQ D ^DIE
"RTN","DGRPEIS3",69,0)
 I $D(DTOUT)!$D(DUOUT)!'$D(UPARROW) S DGFL=$S($D(DTOUT):-2,1:-1) D EDITQ Q
"RTN","DGRPEIS3",70,0)
 ;
"RTN","DGRPEIS3",71,0)
 I DGTYPE'="S" K UPARROW S DIE="^DGPR(408.12,",DA=+DGPREF,DR=".02;S UPARROW=1" K DG,DQ D ^DIE I $D(DTOUT)!$D(DUOUT)!'$D(UPARROW) S DGFL=$S($D(DTOUT):-2,1:-1)
"RTN","DGRPEIS3",72,0)
 S RELATION=$P($G(^DGPR(408.12,+DGPREF,0)),"^",2)
"RTN","DGRPEIS3",73,0)
 S DGX=$O(^DGPR(408.12,+DGPREF,"E","AID","")),DGMIEN=$O(^(+DGX,0))
"RTN","DGRPEIS3",74,0)
EDACTDT I $G(^DGPR(408.12,+DGPREF,"E",+DGMIEN,0)) D  G:$G(DGFL)<0 EDITQ
"RTN","DGRPEIS3",75,0)
 . S (DGACT,Y)=+^(0) X ^DD("DD")
"RTN","DGRPEIS3",76,0)
 . S DIR("B")=Y
"RTN","DGRPEIS3",77,0)
 . D READ^DGRPEIS2
"RTN","DGRPEIS3",78,0)
 . I -DGACT'=DGX W !,"Use 'Expand Dependent' option to change effective date." H 2 S DGFL=-1 Q
"RTN","DGRPEIS3",79,0)
 . Q:$G(DGFL)<0
"RTN","DGRPEIS3",80,0)
 . S DIE="^DGPR(408.12,"_+DGPREF_",""E"",",DA(1)=+DGPREF,DA=DGMIEN,DR=".01///"_DGACT
"RTN","DGRPEIS3",81,0)
 . D ^DIE
"RTN","DGRPEIS3",82,0)
 I DGTYPE="S" S X=+DGPREF D SETUP^DGRPEIS1
"RTN","DGRPEIS3",83,0)
 K DGACT,DGMIEN,RELATION,DA,DIE,DR,UPARROW,DTOUT,DUOUT,DIRUT
"RTN","DGRPEIS3",84,0)
EDITQ K DA,DIE,DIRUT,DR,DTOUT,DUOUT
"RTN","DGRPEIS3",85,0)
 Q
"RTN","DGRPEIS3",86,0)
 ;
"RTN","DGRPEIS3",87,0)
HELP1(DGISDT) ; Displays the help for the active/inactive prompt
"RTN","DGRPEIS3",88,0)
 ;
"RTN","DGRPEIS3",89,0)
 D CLEAR^VALM1
"RTN","DGRPEIS3",90,0)
 W !,"Enter the date this person first became a dependent of the veteran."
"RTN","DGRPEIS3",91,0)
 W !,"In the case of a spouse, this would be the date of marriage.  For"
"RTN","DGRPEIS3",92,0)
 W !,"a parent or other dependent, this would be the date the dependent"
"RTN","DGRPEIS3",93,0)
 W !,"moved in.  For a child, this would be the date of birth or date of"
"RTN","DGRPEIS3",94,0)
 W !,"adoption."
"RTN","DGRPEIS3",95,0)
 W !," "
"RTN","DGRPEIS3",96,0)
 W !,"Date must be before DEC 31, "_DGISDT_" as dependents are collected for the"
"RTN","DGRPEIS3",97,0)
 W !,"prior calendar year only."
"RTN","DGRPEIS3",98,0)
 S VALMBCK="R"
"RTN","DGRPEIS3",99,0)
 Q
"RTN","DGRPEIS3",100,0)
 ;
"RTN","DGRPEIS3",101,0)
HELPDOB ; * Displays help for Date of Birth
"RTN","DGRPEIS3",102,0)
 N DGRDVAR
"RTN","DGRPEIS3",103,0)
 I X="?" D  Q
"RTN","DGRPEIS3",104,0)
 . W !?5,"Enter the date this dependent was born.  The date must not be during the"
"RTN","DGRPEIS3",105,0)
 . W !?5,"current calendar year.  Only persons that were dependents before the"
"RTN","DGRPEIS3",106,0)
 . W !?5,"current year may be entered.",!
"RTN","DGRPEIS3",107,0)
 . I $G(DA) W !,"Enter RETURN to continue:" R DGRDVAR:DTIME W !
"RTN","DGRPEIS3",108,0)
 ;
"RTN","DGRPEIS3",109,0)
 W !?8,"Enter the date on which this relative was born.  This information is"
"RTN","DGRPEIS3",110,0)
 W !?8,"necessary for use in the income screening and means test portions of"
"RTN","DGRPEIS3",111,0)
 W !?8,"MAS."
"RTN","DGRPEIS3",112,0)
 W !!?8,"The date entered must not be during the current calendar year.  That"
"RTN","DGRPEIS3",113,0)
 W !?8,"is, it must be on or before December 31 or the prior calendar year."
"RTN","DGRPEIS3",114,0)
 I $G(DA) W ! S DIR(0)="E" D ^DIR Q:+Y<1
"RTN","DGRPEIS3",115,0)
 W !!?8,"The reason for this is that this data is used for collecting income"
"RTN","DGRPEIS3",116,0)
 W !?8,"information for the purposes of comparing this data with the Internal"
"RTN","DGRPEIS3",117,0)
 W !?8,"Revenue Service (IRS).  Children born during the calendar year cannot"
"RTN","DGRPEIS3",118,0)
 W !?8,"be entered until next year."
"RTN","DGRPEIS3",119,0)
 I $G(DA) W !!,"Enter RETURN to continue:" R DGRDVAR:DTIME W !
"RTN","DGRPEIS3",120,0)
 Q
"RTN","DGRPEIS3",121,0)
 ;
"RTN","DGRPEIS3",122,0)
HELPMN ; * Displays help for Spouse Maiden Name
"RTN","DGRPEIS3",123,0)
 W !?8,"Enter the spouse's maiden name in 'LAST,FIRST MIDDLE SUFFIX' format."
"RTN","DGRPEIS3",124,0)
 W !?8,"Entry of the LAST name only is permitted and the comma may be omitted."
"RTN","DGRPEIS3",125,0)
 W !?8,"If the response contains no comma, one will be appended to the value."
"RTN","DGRPEIS3",126,0)
 W !?8,"Including the comma, the value must be at least 3 characters in length.",!
"RTN","DGRPEIS3",127,0)
 Q
"RTN","DGRPEIS3",128,0)
 ;
"RTN","DGRPEIS3",129,0)
HELPSA1 ; * Displays help for Street Address 1
"RTN","DGRPEIS3",130,0)
 N DGRELTP
"RTN","DGRPEIS3",131,0)
 S DGRELTP=$$RELTYPE($G(DA),1)
"RTN","DGRPEIS3",132,0)
 W !,"If a "_DGRELTP_"'s name has been specified, enter the first line of"
"RTN","DGRPEIS3",133,0)
 W !,"that person's street address [3-30 characters]; otherwise this field"
"RTN","DGRPEIS3",134,0)
 W !,"may be left blank.  This field cannot be deleted as long as a "_DGRELTP_"'s"
"RTN","DGRPEIS3",135,0)
 W !,"name is on file."
"RTN","DGRPEIS3",136,0)
 I $G(DA),(X="?") W !
"RTN","DGRPEIS3",137,0)
 Q
"RTN","DGRPEIS3",138,0)
 ;
"RTN","DGRPEIS3",139,0)
HELPSA2 ; * Displays help for Street Address 2
"RTN","DGRPEIS3",140,0)
 N DGRELTP
"RTN","DGRPEIS3",141,0)
 S DGRELTP=$$RELTYPE($G(DA),1)
"RTN","DGRPEIS3",142,0)
 W !,"If a "_DGRELTP_"'s name has been specified, enter the second line of"
"RTN","DGRPEIS3",143,0)
 W !,"that person's street address [3-30 characters]; otherwise this field"
"RTN","DGRPEIS3",144,0)
 W !,"may be left blank.  This field cannot be deleted as long as a "_DGRELTP_"'s"
"RTN","DGRPEIS3",145,0)
 W !,"name is on file."
"RTN","DGRPEIS3",146,0)
 I $G(DA),(X="?") W !
"RTN","DGRPEIS3",147,0)
 Q
"RTN","DGRPEIS3",148,0)
 ;
"RTN","DGRPEIS3",149,0)
HELPSA3 ; * Displays help for Street Address 3
"RTN","DGRPEIS3",150,0)
 N DGRELTP
"RTN","DGRPEIS3",151,0)
 S DGRELTP=$$RELTYPE($G(DA),1)
"RTN","DGRPEIS3",152,0)
 W !,"If a "_DGRELTP_"'s name has been specified, enter the third line of"
"RTN","DGRPEIS3",153,0)
 W !,"that person's street address [3-30 characters]; otherwise this field"
"RTN","DGRPEIS3",154,0)
 W !,"may be left blank.  This field cannot be deleted as long as a "_DGRELTP_"'s"
"RTN","DGRPEIS3",155,0)
 W !,"name is on file."
"RTN","DGRPEIS3",156,0)
 I $G(DA),(X="?") W !
"RTN","DGRPEIS3",157,0)
 Q
"RTN","DGRPEIS3",158,0)
 ;
"RTN","DGRPEIS3",159,0)
HELPCITY ; * Displays help for City
"RTN","DGRPEIS3",160,0)
 N DGRELTP
"RTN","DGRPEIS3",161,0)
 S DGRELTP=$$RELTYPE($G(DA),1)
"RTN","DGRPEIS3",162,0)
 W !,"If a "_DGRELTP_"'s name has been specified, enter the city in which"
"RTN","DGRPEIS3",163,0)
 W !,"that person resides [3-30 characters]; otherwise this field may be"
"RTN","DGRPEIS3",164,0)
 W !,"left blank.  This field cannot be deleted as long as a "_DGRELTP_"'s"
"RTN","DGRPEIS3",165,0)
 W !,"name is on file."
"RTN","DGRPEIS3",166,0)
 I $G(DA),(X="?") W !
"RTN","DGRPEIS3",167,0)
 Q
"RTN","DGRPEIS3",168,0)
 ;
"RTN","DGRPEIS3",169,0)
HELPSTAT ; * Displays help for the state
"RTN","DGRPEIS3",170,0)
 N DGRELTP,DIRA,DGRDVAR
"RTN","DGRPEIS3",171,0)
 S DGRELTP=$$RELTYPE($G(DA),1)
"RTN","DGRPEIS3",172,0)
 W !,"If a "_DGRELTP_"'s name has been specified, select the state in which"
"RTN","DGRPEIS3",173,0)
 W !,"that person resides; otherwise this field may be left blank.  This"
"RTN","DGRPEIS3",174,0)
 W !,"field cannot be deleted as long as a "_DGRELTP_"'s name is on file.",!
"RTN","DGRPEIS3",175,0)
 ;
"RTN","DGRPEIS3",176,0)
 Q:X="?"
"RTN","DGRPEIS3",177,0)
 W !,"Enter RETURN to continue:" R DGRDVAR:DTIME
"RTN","DGRPEIS3",178,0)
 Q
"RTN","DGRPEIS3",179,0)
 ;
"RTN","DGRPEIS3",180,0)
HELPZIP ; * Displays help for the Zip code
"RTN","DGRPEIS3",181,0)
 N DGRELTP
"RTN","DGRPEIS3",182,0)
 S DGRELTP=$$RELTYPE($G(DA),1)
"RTN","DGRPEIS3",183,0)
 W !,"Answer with the 5 digit format (e.g. 12345) or the nine digit"
"RTN","DGRPEIS3",184,0)
 W !,"format (e.g. 12345-6789 or 123456789).  This is related to the"
"RTN","DGRPEIS3",185,0)
 W !,DGRELTP_"'s address."
"RTN","DGRPEIS3",186,0)
 I $G(DA),(X="?") W !
"RTN","DGRPEIS3",187,0)
 Q
"RTN","DGRPEIS3",188,0)
 ;
"RTN","DGRPEIS3",189,0)
HELPPHON ; * Displays help for the Phone number
"RTN","DGRPEIS3",190,0)
 N DGRELTP
"RTN","DGRPEIS3",191,0)
 S DGRELTP=$$RELTYPE($G(DA),1)
"RTN","DGRPEIS3",192,0)
 W !,"If a "_DGRELTP_"'s name has been specified, enter the "_DGRELTP_"'s"
"RTN","DGRPEIS3",193,0)
 W !,"phone number [4-20 characters], otherwise this field may be left"
"RTN","DGRPEIS3",194,0)
 W !,"blank.  This field cannot be deleted as long as a "_DGRELTP_"'s"
"RTN","DGRPEIS3",195,0)
 W !,"name is on file."
"RTN","DGRPEIS3",196,0)
 I $G(DA),(X="?") W !
"RTN","DGRPEIS3",197,0)
 Q
"RTN","DGRPEIS3",198,0)
 ;
"RTN","DGRPEIS3",199,0)
RELTYPE(RELIEN,TYPE) ;* Return type of relationship
"RTN","DGRPEIS3",200,0)
 ;
"RTN","DGRPEIS3",201,0)
 ;* INPUT
"RTN","DGRPEIS3",202,0)
 ;    RELIEN - IEN from Income Person file (408.13)
"RTN","DGRPEIS3",203,0)
 ;    TYPE   - 0: Pull specific relationship from Relationship file
"RTN","DGRPEIS3",204,0)
 ;           - 1: Just return "spouse", "child", "dependent"
"RTN","DGRPEIS3",205,0)
 ;
"RTN","DGRPEIS3",206,0)
 ;* OUTPUT
"RTN","DGRPEIS3",207,0)
 ;    DGPATREL - Relationship value
"RTN","DGRPEIS3",208,0)
 ;
"RTN","DGRPEIS3",209,0)
 N DGPTRLIN,DGRELIEN,DGPATREL
"RTN","DGRPEIS3",210,0)
 S TYPE=+$G(TYPE)
"RTN","DGRPEIS3",211,0)
 I +$G(RELIEN)>0 DO
"RTN","DGRPEIS3",212,0)
 .S DGPTRLIN=""
"RTN","DGRPEIS3",213,0)
 .S DGPTRLIN=$O(^DGPR(408.12,"C",RELIEN_";DGPR(408.13,",DGPTRLIN))
"RTN","DGRPEIS3",214,0)
 .S DGRELIEN=$P($G(^DGPR(408.12,DGPTRLIN,0)),"^",2)
"RTN","DGRPEIS3",215,0)
 .S DGPATREL=$P($G(^DG(408.11,DGRELIEN,0)),"^",1)
"RTN","DGRPEIS3",216,0)
 .S:DGPATREL']"" DGPATREL="dependent"
"RTN","DGRPEIS3",217,0)
 .I +TYPE=1 S DGPATREL=$S(DGPATREL["SPOUSE":"spouse",($G(DGRPS)=8):"relative",$G(DGSCR8):"relative",1:"child")
"RTN","DGRPEIS3",218,0)
 I +$G(RELIEN)'>0 DO
"RTN","DGRPEIS3",219,0)
 .S:$G(DGANS)="S" DGPATREL="spouse"
"RTN","DGRPEIS3",220,0)
 .S:$G(DGANS)="C" DGPATREL="child"
"RTN","DGRPEIS3",221,0)
 .S:$G(DGANS)="D" DGPATREL="relative"
"RTN","DGRPEIS3",222,0)
 S:DGPATREL="" DGPATREL="relative"
"RTN","DGRPEIS3",223,0)
 Q DGPATREL
"RTN","DGRPH")
0^6^B27125641
"RTN","DGRPH",1,0)
DGRPH ;ALB/MRL - REGISTRATION HELP ROUTINE ;06 JUN 88@2300
"RTN","DGRPH",2,0)
 ;;5.3;Registration;**114,343,397,415,489,545,638,624**;Aug 13, 1993
"RTN","DGRPH",3,0)
 S DGRPH="" D H^DGRPU K DGRPH W !,"Enter '^' to stop the display ",$S(DGRPV:"",1:"and edit "),"of data, '^N' to jump to screen #N (see",!,"listing below), <RET> to continue on to the next available screen" I DGRPV W "." G M
"RTN","DGRPH",4,0)
 W " or enter",!,"the field group number(s) you wish to edit using commas and dashes as",!,"delimiters.  Those groups enclosed in brackets ""[]"" are editable while those",!,"enclosed in arrows ""<>"" are not."
"RTN","DGRPH",5,0)
 W "  Enter 'ALL' to edit all editable data",!,"elements on the screen."
"RTN","DGRPH",6,0)
M I DGRPS=9,DGRPSEL="V" W !!,"You may precede your selection with 'V' to denote veteran."
"RTN","DGRPH",7,0)
 I DGRPS=9,DGRPSEL]"V" W !!,"To edit a specific column, enter 'V'",$S($D(DGREL("S")):", 'S'",1:""),$S($D(DGREL("D")):", 'D'",1:"")," in front of the selected items."
"RTN","DGRPH",8,0)
 S Z="DATA GROUPS ON SCREEN "_DGRPS,DGRPCM=1 W ! D WW^DGRPV S DGRPCM=0 D:DGRPS=1.1 A1 D:DGRPS'=1.1 @DGRPS D:$S(DGRPS<11:1,DGRPS=14:1,1:0) W D S W ! F I=$Y:1:20 W !
"RTN","DGRPH",9,0)
 ;S Z="Press RETURN key",DGRPCM=1 D WW^DGRPV S DGRPCM=0 W " to EXIT Screen ",DGRPS," HELP " R X:DTIME S X="" Q
"RTN","DGRPH",10,0)
 S DGRPW=0 W "Press " S Z="<RETURN>",DGRPCM=1 D WW^DGRPV W " KEY " S Z="TO EXIT" D WW^DGRPV W " SCREEN ",DGRPS," " S Z="HELP" D WW^DGRPV W " " R X:DTIME S (DGRPCM,DGRPW)=0 Q
"RTN","DGRPH",11,0)
1 S X="Name, SSN, DOB, Sex^Alias Name & SSN (if applicable)^Remarks concerning this patient^Home Address, Phone & Work Phone^Temporary Address, Dates, Phone" Q
"RTN","DGRPH",12,0)
A1 S X="Conf. Address,Dates and Types^E-Mail, Cell Phone & Pager #s" Q
"RTN","DGRPH",13,0)
2 S X="POB, Parents, etc.^Dates/Locations of Previous Care^Race and Ethnicity^Date of Death Information" Q
"RTN","DGRPH",14,0)
3 S X="Primary Next-of-Kin^Secondary Next-of-Kin^Primary Emergency Contact^Secondary Emergency Contact^Designee to receive personal effects" Q
"RTN","DGRPH",15,0)
4 S X="Applicant Employer, Address^Spouses Employer, Address" Q
"RTN","DGRPH",16,0)
5 S X="Unexpired Insurance Policies^Eligibile for Medicaid" Q
"RTN","DGRPH",17,0)
6 S X="Service History^Prisoner of War^Combat^Vietnam Service^Agent Orange Exposure^IONizing Radiation Exposure^"
"RTN","DGRPH",18,0)
 S X=X_"Lebanon Service^Grenada Service^Panama Service^Persian Gulf Service^Somalia Service^Environmental Contaminants Exposure^Military Retirement/Disability^Dental History^Yugoslavia Service^Purple Heart Recipient^"
"RTN","DGRPH",19,0)
 S X=X_"Nose/Throat Radium Treatment"
"RTN","DGRPH",20,0)
 Q
"RTN","DGRPH",21,0)
7 S X="Patient Type, SC Data, Claim Info^VA Monetary Benefits^POS, Eligibility Code(s)^SC Conditions relayed by applicant" Q
"RTN","DGRPH",22,0)
8 S X="Spouse's Demographic Info^Dependents' Demographic Info" Q
"RTN","DGRPH",23,0)
9 S X="Social Security^U.S. Civil Service^U.S. Railroad Retirement^Military Retirement^Unemployment^Other Retirement^Total Employment Income^Interest,Dividend,Annuity^Workers Comp or Black Lung^Other Income" Q
"RTN","DGRPH",24,0)
10 S X="Ineligible Patient Information^Missing Patient Information" Q
"RTN","DGRPH",25,0)
11 S X="Eligibility Verification^Monetary Benefits Verification^Service Record Verification^Rated Disabilities (VA)" Q
"RTN","DGRPH",26,0)
12 W !,"Four most recent admission episodes on file for this applicant are displayed",!,"in inverse order." Q
"RTN","DGRPH",27,0)
13 W !,"Four most recent applications for care (registrations) are displayed in",!,"inverse order." Q
"RTN","DGRPH",28,0)
14 S X="Clinics in which actively enrolled^Pending (future) appointments" Q
"RTN","DGRPH",29,0)
15 W !,"Sponsor information is displayed for patients." Q
"RTN","DGRPH",30,0)
S W ! S Z="AVAILABLE SCREENS",DGRPCM=1 D WW^DGRPV S DGRPCM=0
"RTN","DGRPH",31,0)
 S X="Demographic^Confidential Address^Patient^Contact^Employment^Insurance^Service Record^Eligibility^Family Demographic^Income Screening^Missing/Ineligible^Eligibility Verification^"
"RTN","DGRPH",32,0)
 S X=X_"Admission Info^Application Info^Appointment Info^Sponsor Demograhics"
"RTN","DGRPH",33,0)
 ;S C=0 F I=1:1 S J=$P(X,"^",I) Q:J=""  I '$E(DGRPVV,I) S C=C+1,Z="^"_I,DGRPW=(C#2) D WW^DGRPV S Z=$S(I?1N:"  ",1:" ")_J_" Data",Z1=$S((C#2)&(I?1N):36,(C#2):35,1:1) D WW1^DGRPV:(C#2) I '(C#2) W Z
"RTN","DGRPH",34,0)
 N DGJ
"RTN","DGRPH",35,0)
 S DGJ=""
"RTN","DGRPH",36,0)
 S C=0 F I=1:1 S DGJ=$O(DGRPVV(DGJ)) Q:DGJ=""  I '$E(DGRPVV,DGJ) D
"RTN","DGRPH",37,0)
 .S C=C+1,Z="^"_DGJ,DGRPW=(C#2)
"RTN","DGRPH",38,0)
 .D WW^DGRPV
"RTN","DGRPH",39,0)
 .S Z1=$S((C#2)&(DGJ?1N):36,(C#2):35,1:1)
"RTN","DGRPH",40,0)
 .S Z=$S(DGJ?1N:"  ",1:" ")_$P(X,U,I)_" Data"
"RTN","DGRPH",41,0)
 .D WW1^DGRPV:(C#2)
"RTN","DGRPH",42,0)
 .I '(C#2) W Z
"RTN","DGRPH",43,0)
 Q
"RTN","DGRPH",44,0)
W F I=1:1 S J=$P(X,"^",I) Q:J=""  S Z=I,DGRPW=(I#2) D WW^DGRPV S Z=$S(I<10:"  ",1:" ")_J,Z1=$S((I#2)&(I>10):36,(I#2):37,1:1) D WW1^DGRPV
"RTN","DGRPH",45,0)
 W:'((I-1)#2) ! Q
"RTN","DGRPT")
1^29
"RTN","DGRPTI")
1^30
"RTN","DGRPTL")
1^31
"RTN","DGRPTL1")
1^32
"RTN","DGRPTL2")
1^33
"RTN","DGRPTL3")
1^34
"RTN","DGRPTP")
1^41
"RTN","DGRPTP1")
1^40
"RTN","DGRPTP2")
1^39
"RTN","DGRPTP3")
1^38
"RTN","DGRPU")
0^56^B45887048
"RTN","DGRPU",1,0)
DGRPU ;ALB/MRL - REGISTRATION UTILITY ROUTINE ;06 JUN 88@2300
"RTN","DGRPU",2,0)
 ;;5.3;Registration;**33,114,489,624**;Aug 13, 1993
"RTN","DGRPU",3,0)
H ;Screen Header
"RTN","DGRPU",4,0)
 I (DGRPS'=1.1)&(DGRPS'=6.1) W @IOF S Z=$P($T(H1+DGRPS),";;",2)_", SCREEN <"_DGRPS_">"_$S($D(DGRPH):" HELP",1:""),X=79-$L(Z)\2 D W
"RTN","DGRPU",5,0)
 I DGRPS=1.1 W @IOF S Z="ADDITIONAL PATIENT DEMOGRAPHIC DATA, SCREEN <"_DGRPS_">"_$S($D(DGRPH):" HELP",1:""),X=79-$L(Z)\2 D W
"RTN","DGRPU",6,0)
 I DGRPS=6.1 W @IOF S Z="ADDITIONAL MILITARY SERVICE DATA, SCREEN <"_DGRPS_">"_$S($D(DGRPH):" HELP",1:""),X=79-$L(Z)\2 D W
"RTN","DGRPU",7,0)
 S X=$S($D(^DPT(+DFN,0)):^(0),1:""),SSN=$P(X,"^",9),SSN=$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,10)
"RTN","DGRPU",8,0)
 I '$D(DGRPH) W !,$P(X,"^",1),"; ",SSN S X=$S($D(DGRPTYPE):$P(DGRPTYPE,"^",1),1:"PATIENT TYPE UNKNOWN"),X1=79-$L(X) W ?X1,X
"RTN","DGRPU",9,0)
 S X="",$P(X,"=",80)="" W !,X Q
"RTN","DGRPU",10,0)
 Q
"RTN","DGRPU",11,0)
AL(DGLEN) ;DGLEN= Available length of line
"RTN","DGRPU",12,0)
A ;Format address(es)
"RTN","DGRPU",13,0)
 I '$D(DGLEN) N DGLEN S DGLEN=29
"RTN","DGRPU",14,0)
 N DGX
"RTN","DGRPU",15,0)
 F I=DGA1:1:DGA1+2 I $P(DGRP(DGAD),U,I)]"" S DGA(DGA2)=$P(DGRP(DGAD),U,I),DGA2=DGA2+2
"RTN","DGRPU",16,0)
 I DGA2=1 S DGA(1)="STREET ADDRESS UNKNOWN",DGA2=DGA2+2
"RTN","DGRPU",17,0)
 S J=$S('$D(^DIC(5,+$P(DGRP(DGAD),U,DGA1+4),0)):"",('$L($P(^(0),U,2))):$P(^(0),U,1),1:$P(^(0),U,2)),J(1)=$P(DGRP(DGAD),U,DGA1+3),J(2)=$P(DGRP(DGAD),U,DGA1+5),DGA(DGA2)=$S(J(1)]""&(J]""):J(1)_","_J,J(1)]"":J(1),J]"":J,1:"UNK. CITY/STATE")
"RTN","DGRPU",18,0)
 I ".33^.34^.211^.331^.311^.25^.21"[DGAD D
"RTN","DGRPU",19,0)
 .F I=1:1:7 I $P(".33^.34^.211^.331^.311^.25^.21",U,I)=DGAD S DGX=$P($G(^DPT(DFN,.22)),U,I)
"RTN","DGRPU",20,0)
 E  D
"RTN","DGRPU",21,0)
 .I DGAD=.141 S DGX=$P(DGRP(.141),U,6) Q
"RTN","DGRPU",22,0)
 .S DGX=$P(DGRP(DGAD),U,DGA1+11)
"RTN","DGRPU",23,0)
 S:$L(DGX)>5 DGX=$E(DGX,1,5)_"-"_$E(DGX,6,9)
"RTN","DGRPU",24,0)
 S DGA(DGA2)=$E($P(DGA(DGA2),",",1),1,(DGLEN-($L(DGX)+4)))_$S($L($P(DGA(DGA2),",",2)):",",1:"")_$P(DGA(DGA2),",",2)_" "_DGX
"RTN","DGRPU",25,0)
 F I=0:0 S I=$O(DGA(I)) Q:'I  S DGA(I)=$E(DGA(I),1,DGLEN)
"RTN","DGRPU",26,0)
 K DGA1,I,J
"RTN","DGRPU",27,0)
 Q
"RTN","DGRPU",28,0)
 ;
"RTN","DGRPU",29,0)
W I IOST="C-QUME",$L(DGVI)'=2 W ?X,Z Q
"RTN","DGRPU",30,0)
 W ?X,@DGVI,Z,@DGVO
"RTN","DGRPU",31,0)
 Q
"RTN","DGRPU",32,0)
 ;
"RTN","DGRPU",33,0)
H1 ;
"RTN","DGRPU",34,0)
 ;;PATIENT DEMOGRAPHIC DATA
"RTN","DGRPU",35,0)
 ;;PATIENT DATA
"RTN","DGRPU",36,0)
 ;;EMERGENCY CONTACT DATA
"RTN","DGRPU",37,0)
 ;;APPLICANT/SPOUSE EMPLOYMENT DATA
"RTN","DGRPU",38,0)
 ;;INSURANCE DATA
"RTN","DGRPU",39,0)
 ;;MILITARY SERVICE DATA
"RTN","DGRPU",40,0)
 ;;ELIGIBILITY STATUS DATA
"RTN","DGRPU",41,0)
 ;;FAMILY DEMOGRAPHIC DATA
"RTN","DGRPU",42,0)
 ;;INCOME SCREENING DATA
"RTN","DGRPU",43,0)
 ;;INELIGIBLE/MISSING DATA
"RTN","DGRPU",44,0)
 ;;ELIGIBILITY VERIFICATION DATA
"RTN","DGRPU",45,0)
 ;;ADMISSION INFORMATION
"RTN","DGRPU",46,0)
 ;;APPLICATION INFORMATION
"RTN","DGRPU",47,0)
 ;;APPOINTMENT INFORMATION
"RTN","DGRPU",48,0)
 ;;SPONSOR DEMOGRAPHIC INFORMATION
"RTN","DGRPU",49,0)
 ;
"RTN","DGRPU",50,0)
 ;
"RTN","DGRPU",51,0)
INCOME(DFN,DGDT) ; compute income for veteran...if not in 408.21, pass back file 2 data
"RTN","DGRPU",52,0)
 ; (called by PTF)
"RTN","DGRPU",53,0)
 ;
"RTN","DGRPU",54,0)
 ;
"RTN","DGRPU",55,0)
 ;  Input:  DFN as IEN of PATIENT file
"RTN","DGRPU",56,0)
 ;          DGDT as date to return income as of
"RTN","DGRPU",57,0)
 ;
"RTN","DGRPU",58,0)
 ; Output:  total income (computed function)
"RTN","DGRPU",59,0)
 ;          (from 408.21 if available...otherwise from file 2)
"RTN","DGRPU",60,0)
 ;
"RTN","DGRPU",61,0)
 ;
"RTN","DGRPU",62,0)
 N DGDEP,DGINC,DGREL,DGTOT,DGX,I S DGTOT=0
"RTN","DGRPU",63,0)
 D ALL^DGMTU21(DFN,"V",DGDT,"I")
"RTN","DGRPU",64,0)
 S DGX=$G(^DGMT(408.21,+$G(DGINC("V")),0)) I DGX]"" F I=8:1:17 S DGTOT=DGTOT+$P(DGX,"^",I)
"RTN","DGRPU",65,0)
 I DGX']"" S DGTOT=$P($G(^DPT(DFN,.362)),U,20)
"RTN","DGRPU",66,0)
 Q DGTOT
"RTN","DGRPU",67,0)
 ;
"RTN","DGRPU",68,0)
 ;
"RTN","DGRPU",69,0)
MTCOMP(DFN,DGDT) ; is current means test OR COPAY complete?
"RTN","DGRPU",70,0)
 ;
"RTN","DGRPU",71,0)
 ;  Input:  DFN as IEN of PATIENT file
"RTN","DGRPU",72,0)
 ;          DGDT as 'as of' date
"RTN","DGRPU",73,0)
 ;
"RTN","DGRPU",74,0)
 ; Output:  1 if means test/COPAY for year prior to DT passed is complete
"RTN","DGRPU",75,0)
 ;          0 otherwise
"RTN","DGRPU",76,0)
 ;          DGMTYPT 1=MT;2=CP;0=NONE
"RTN","DGRPU",77,0)
 ;
"RTN","DGRPU",78,0)
 N COMP,MT,X,YR
"RTN","DGRPU",79,0)
 S YR=$$LYR^DGMTSCU1(DGDT),MT=$$LST^DGMTCOU1(DFN,DGDT)
"RTN","DGRPU",80,0)
 S DGMTYPT=+$P(MT,U,5)
"RTN","DGRPU",81,0)
 S COMP=1
"RTN","DGRPU",82,0)
 I DGMTYPT=1 D  ;MT
"RTN","DGRPU",83,0)
 .I $P(MT,"^",4)']""!("^R^N^"[("^"_$P(MT,"^",4)_"^")) S COMP=0
"RTN","DGRPU",84,0)
 I DGMTYPT=2 D  ;CP
"RTN","DGRPU",85,0)
 .I $P(MT,"^",4)']""!("^I^L^"[("^"_$P(MT,"^",4)_"^")) S COMP=0
"RTN","DGRPU",86,0)
 S X=+$P(MT,"^",2) I ($E(X,1,3)-1)*10000<YR S COMP=0
"RTN","DGRPU",87,0)
 Q COMP
"RTN","DGRPU",88,0)
 ;
"RTN","DGRPU",89,0)
HLP1010 ;* This is called by the Executable Help for Patient field #1010.159
"RTN","DGRPU",90,0)
 ;   (APPOINTMENT REQUEST ON 1010EZ)
"RTN","DGRPU",91,0)
 W !!,"    Enter a 'Y' if the veteran applicant has requested an"
"RTN","DGRPU",92,0)
 W !,"    appointment with a VA doctor or provider and wants to be"
"RTN","DGRPU",93,0)
 W !,"    seen as soon as one becomes available  Enter a 'N'"
"RTN","DGRPU",94,0)
 W !,"    if the veteran applicant has not requested an appointment."
"RTN","DGRPU",95,0)
 W !!,"    This question may ONLY be entered ONCE for the veteran."
"RTN","DGRPU",96,0)
 W !,"    The answer to this question CANNOT be changed after the"
"RTN","DGRPU",97,0)
 W !,"    initial entry.",!
"RTN","DGRPU",98,0)
 Q
"RTN","DGRPU",99,0)
 ;
"RTN","DGRPU",100,0)
HLPCS ; * This is called by the Executable Help for Income Relation field #.1
"RTN","DGRPU",101,0)
 Q:X="?"
"RTN","DGRPU",102,0)
 N DIR,DGRDVAR
"RTN","DGRPU",103,0)
 W !?8,"Enter in this field a Yes or No to indicate whether the veteran"
"RTN","DGRPU",104,0)
 W !?8,"contributed any dollar amount to the child's support last calendar"
"RTN","DGRPU",105,0)
 W !?8,"year.  The contributions do not have to be in regular set amounts."
"RTN","DGRPU",106,0)
 W !?8,"For example, a veteran who paid a child's school tuition or"
"RTN","DGRPU",107,0)
 W !?8,"medical bills would be contributing to the child's support.",!
"RTN","DGRPU",108,0)
 W !,"Enter RETURN to continue:" R DGRDVAR:DTIME W !
"RTN","DGRPU",109,0)
 Q
"RTN","DGRPU",110,0)
 ;
"RTN","DGRPU",111,0)
HLP1823 ;*This is called by the Executable Help for Patient Relation field #.18
"RTN","DGRPU",112,0)
 N DIR,DGRDVAR
"RTN","DGRPU",113,0)
 W !?7,"Enter 'Y' if the child is currently 18 to 23 years old and the child"
"RTN","DGRPU",114,0)
 W !?7,"attended school last calendar year.  Enter 'N' if the child is currently"
"RTN","DGRPU",115,0)
 W !?7,"18 to 23 years old but the child did not attend school last calendar"
"RTN","DGRPU",116,0)
 W !?7,"year.  Enter 'N' if the child is not currently 18 to 23 years old.",!
"RTN","DGRPU",117,0)
 I $G(DA) W !,"Enter RETURN to continue:" R DGRDVAR:DTIME W !
"RTN","DGRPU",118,0)
 Q
"RTN","DGRPU",119,0)
 ;
"RTN","DGRPU",120,0)
HLPMLDS ;* This is called by the Executable Help for Patient field #.362
"RTN","DGRPU",121,0)
 ;   (DISABILITY RET. FROM MILITARY?)
"RTN","DGRPU",122,0)
 N X,Y,DIR
"RTN","DGRPU",123,0)
 W !!,"  Enter '0' or 'NO' if the veteran:"
"RTN","DGRPU",124,0)
 W !,"    -- Is NOT retired from the military OR"
"RTN","DGRPU",125,0)
 W !,"    -- Is retired from the military due to length of service AND"
"RTN","DGRPU",126,0)
 W !,"       does NOT have a disability confirmed by the Military Branch"
"RTN","DGRPU",127,0)
 W !,"       to have been incurred in or aggravated while on active duty."
"RTN","DGRPU",128,0)
 W !!,"  Enter '1' or 'YES, RECEIVING MILITARY RETIREMENT' if the veteran:"
"RTN","DGRPU",129,0)
 W !,"    -- Is confirmed by the Military Branch to have been discharged"
"RTN","DGRPU",130,0)
 W !,"       or released due to a disability incurred in or aggravated"
"RTN","DGRPU",131,0)
 W !,"       while on active duty AND"
"RTN","DGRPU",132,0)
 W !,"       -- Has NOT filed a claim for VA compensation benefits OR"
"RTN","DGRPU",133,0)
 W !,"       -- Has been rated by the VA to be NSC OR"
"RTN","DGRPU",134,0)
 W !,"       -- Has been rated by the VA to have noncompensable 0%"
"RTN","DGRPU",135,0)
 W !,"          SC conditions."
"RTN","DGRPU",136,0)
 S DIR(0)="E" D ^DIR Q:+Y<1
"RTN","DGRPU",137,0)
 W !!,"  Enter '2' or 'YES, RECEIVING MILITARY RETIREMENT IN LIEU OF VA"
"RTN","DGRPU",138,0)
 W !,"                COMPENSATION' if the veteran:"
"RTN","DGRPU",139,0)
 W !,"       -- Is confirmed by the Military Branch to have been discharged"
"RTN","DGRPU",140,0)
 W !,"          or released due to a disability incurred in or aggravated"
"RTN","DGRPU",141,0)
 W !,"          while on active duty AND"
"RTN","DGRPU",142,0)
 W !,"       -- Is receiving military disability retirement pay AND"
"RTN","DGRPU",143,0)
 W !,"       -- Has been rated by VA to have compensable SC conditions"
"RTN","DGRPU",144,0)
 W !,"          but is NOT receiving compensation from the VA"
"RTN","DGRPU",145,0)
 W !!,"          Once eligibility has been verified, this field will no longer"
"RTN","DGRPU",146,0)
 W !,"          be editable to any user who does not hold the designated security"
"RTN","DGRPU",147,0)
 W !,"          key."
"RTN","DGRPU",148,0)
 Q
"RTN","DGRPV")
0^9^B16185844
"RTN","DGRPV",1,0)
DGRPV ;ALB/MRL,RTK,PJR - REGISTRATION DEFINE VARIABLES ON ENTRY ; 3/5/04 11:40am
"RTN","DGRPV",2,0)
 ;;5.3;Registration;**109,114,247,190,327,365,343,397,415,489,546,545,451,624**;Aug 13, 1993
"RTN","DGRPV",3,0)
 ;
"RTN","DGRPV",4,0)
 ;
"RTN","DGRPV",5,0)
 ;set up variables for registration screen processing
"RTN","DGRPV",6,0)
 ;
"RTN","DGRPV",7,0)
 ;DGRPVV   :string of 15 ones and zeros each character corresponding to
"RTN","DGRPV",8,0)
 ;          a particular screen (0 means allow edit, 1 means don't)
"RTN","DGRPV",9,0)
 ;
"RTN","DGRPV",10,0)
 ;DGRPVV(n):where n=screen number.  String of x ones and zeros where
"RTN","DGRPV",11,0)
 ;          x is the number of elements on screen n (0=edit, 1=don't)
"RTN","DGRPV",12,0)
 ;
"RTN","DGRPV",13,0)
 ;DGVI     :Turn on high intensity
"RTN","DGRPV",14,0)
 ;DGVO     :Turn off high intensity
"RTN","DGRPV",15,0)
 ;
"RTN","DGRPV",16,0)
EN D DT^DICRW I '$D(DVBGUI) D HOME^%ZIS
"RTN","DGRPV",17,0)
 S (DGVI,DGVO)="""""" I $S('$D(IOST(0)):1,'$D(^DG(43,1,0)):1,'$P(^DG(43,1,0),"^",36):1,$D(^DG(43,1,"TERM",IOST(0))):1,1:0) G M ;goto M if not high intensity
"RTN","DGRPV",18,0)
 I $D(^%ZIS(2,IOST(0),7)) S I=^(7),X=$S($P(I,"^",3)]"":3,1:2) I $L($P(I,"^",1)),$L($P(I,"^",X)) S DGVI=$P(I,"^",1),DGVO=$P(I,"^",X)
"RTN","DGRPV",19,0)
M I $L(DGVI_DGVO)>4 S X=132 X ^%ZOSF("RM")
"RTN","DGRPV",20,0)
 S DGRPW=1,DGRPCM=0,DGRPU="UNANSWERED",DGRPNA="NOT APPLICABLE",DGRPV=$S($D(DGRPV):DGRPV,1:1)
"RTN","DGRPV",21,0)
SC7 S X=$S('$D(^DPT(DFN,"TYPE")):0,1:+^("TYPE")) S:'$D(DGELVER) DGELVER=0
"RTN","DGRPV",22,0)
 S DGRPTYPE=$S($D(^DG(391,+X,0)):^(0),1:""),(DGRPSC,DGRPSCE,DGRPSCE1)="" S:'$D(DGELVER) DGELVER=0
"RTN","DGRPV",23,0)
 I DGRPTYPE'="" S DGRPSC=$G(^DG(391,+X,"S")),DGRPSCE=$G(^("E")),DGRPSCE1=$G(^("E10"))
"RTN","DGRPV",24,0)
 ;
"RTN","DGRPV",25,0)
 S DGPH=$P($G(^DPT(DFN,.53)),U)  ;Purple Heart Indicator
"RTN","DGRPV",26,0)
 I $G(DGPRFLG)=1 D
"RTN","DGRPV",27,0)
 . S DGRPVV="000001111111111"
"RTN","DGRPV",28,0)
 E  D
"RTN","DGRPV",29,0)
 . S DGRPVV="000000000000000"
"RTN","DGRPV",30,0)
 S X="5^3^5^2^3^17^4^2^10^2^4^5^5^2^1"
"RTN","DGRPV",31,0)
 F I=1:1:15 S J=+$P(X,"^",I),DGRPVV(I)=$S((I<12)!(I=15):$E("00000000000000000",1,J),1:$E("11111111111111111",1,J))
"RTN","DGRPV",32,0)
 S DGRPVV(1.1)="00"
"RTN","DGRPV",33,0)
 S DGRPVV(2)="0001"
"RTN","DGRPV",34,0)
 I $G(DGPH)]"" S $E(DGRPVV(6),16)=1
"RTN","DGRPV",35,0)
 I $$GETSTAT^DGNTAPI1(DFN)>2,'$D(^XUSEC("DGNT VERIFY",DUZ)) D
"RTN","DGRPV",36,0)
 . S $E(DGRPVV(6),17)=1
"RTN","DGRPV",37,0)
 ;
"RTN","DGRPV",38,0)
 F I=3,6,8,9,10,11 S J=+$P(DGRPSC,"^",I) I 'J S DGRPVV=$E(DGRPVV,0,I-1)_1_$E(DGRPVV,I+1,99)
"RTN","DGRPV",39,0)
 ;
"RTN","DGRPV",40,0)
 ;-- if patient type is TRICARE then turn off screens 2,4
"RTN","DGRPV",41,0)
 ;
"RTN","DGRPV",42,0)
 ;-- modified 08/20/2003 for NOIS Calls MAC-0400-61574 & AMA-0700-71769 
"RTN","DGRPV",43,0)
 ;-- commented the line to allow screens 2 & 4 to display for Tricare
"RTN","DGRPV",44,0)
 ;I DGRPTYPE["TRICARE" F I=2,4 S J=+$P(DGRPSC,"^",I) I 'J S DGRPVV=$E(DGRPVV,0,I-1)_1_$E(DGRPVV,I+1,99)
"RTN","DGRPV",45,0)
 ;
"RTN","DGRPV",46,0)
 F I=31:0 S I=$O(^DD(391,I)) Q:I=""!(I>99)  I $D(^(I,0)),($E(^(0),1)'="*"),'+$P(DGRPSCE,"^",I) S X1=$E(I),X2=$E(I,2) I +X1 S DGRPVV(X1)=$E(DGRPVV(X1),0,X2-1)_1_$E(DGRPVV(X1),X2+1,99)
"RTN","DGRPV",47,0)
 I $G(^DPT(DFN,.35)),(^(.35)<+($E(DT,1,3)_"0000")) S DGRPVV=$E(DGRPVV,0,7)_11_$E(DGRPVV,10,99)
"RTN","DGRPV",48,0)
 K DIRUT,DUOUT,DTOUT
"RTN","DGRPV",49,0)
 ;
"RTN","DGRPV",50,0)
 ;Fields are numbered screen_item and put in that piece position.
"RTN","DGRPV",51,0)
 ;Because FM does not allow more than 100 pieces on a node, it was
"RTN","DGRPV",52,0)
 ;necessary to start a new node E10 for fields on screens 10 or higher.
"RTN","DGRPV",53,0)
 ;In these instances, the piece position will be screen_item-100 so,
"RTN","DGRPV",54,0)
 ;for example, screen 11, item 2 would be field 112, but piece 12.
"RTN","DGRPV",55,0)
 ;Items on screens <10 will be found on node E.
"RTN","DGRPV",56,0)
 ;
"RTN","DGRPV",57,0)
 F I=100:0 S I=$O(^DD(391,I)) Q:I=""!(I>150)  I $D(^(I,0)),($E(^(0),1)'="*"),'+$P(DGRPSCE1,"^",I-100) S X1=$E(I,1,2),X2=$E(I,3) I +X1 S DGRPVV(X1)=$E(DGRPVV(X1),0,X2-1)_1_$E(DGRPVV(X1),X2+1,99)
"RTN","DGRPV",58,0)
 ;
"RTN","DGRPV",59,0)
 I $S('($D(DUZ)#2):0,'$D(^XUSEC("DG ELIGIBILITY",DUZ)):0,1:1) G ELVER ;if user holds eligibility key, skip
"RTN","DGRPV",60,0)
 F I=.3,.32,.361 S DGRP(I)=$S($D(^DPT(DFN,I)):^(I),1:"")
"RTN","DGRPV",61,0)
 S DGRPVV(10)=11 I $P(DGRP(.361),"^",1)="V" S DGRPVV(7)=111,DGRPVV(1)=1_$E(DGRPVV(1),2,99) ;if elig verified, can't edit elig data, name, ssn, or dob
"RTN","DGRPV",62,0)
 I $P(DGRP(.3),"^",6)]"" S DGRPVV(8)=11 ;if monetary ben. verified, can't edit income screening data
"RTN","DGRPV",63,0)
 I $P(DGRP(.32),"^",2)]"" S DGRPVV(6)=11111111111111111 ;if service data verified, can't edit service screen
"RTN","DGRPV",64,0)
 ;
"RTN","DGRPV",65,0)
ELVER ;set up variables for eligibility verification
"RTN","DGRPV",66,0)
 ;if elig ver option, only edit screens 1, 2, and 7 (and 6, 8, 9, 10,
"RTN","DGRPV",67,0)
 ;   and 11 if they're turned on).
"RTN","DGRPV",68,0)
 ;
"RTN","DGRPV",69,0)
 I $P($G(^DPT(DFN,.361)),U,3)="H" S DGRPVV(10)=10,DGRPVV(11)=1000
"RTN","DGRPV",70,0)
 S:'DGELVER DGRPLAST=$S($G(DGPRFLG)=1:5,1:15)
"RTN","DGRPV",71,0)
 I DGELVER S DGRPVV="00111"_$E(DGRPVV,6,11)_"1111" F I=1:1:11 S J=$E(DGRPVV,I) I 'J S DGRPLAST=I
"RTN","DGRPV",72,0)
Q K DGRPSC,DGRPSCE
"RTN","DGRPV",73,0)
 Q
"RTN","DGRPV",74,0)
 ;
"RTN","DGRPV",75,0)
WW ;Write number on screens for display and/or edit (Z=number)
"RTN","DGRPV",76,0)
 W:DGRPW ! S Z=$S(DGRPCM:Z,DGRPV:"<"_Z_">",$E(DGRPVV(DGRPS),Z):"<"_Z_">",1:"["_Z_"]")
"RTN","DGRPV",77,0)
 I DGRPCM!($E(Z)="[") W @DGVI,Z,@DGVO
"RTN","DGRPV",78,0)
 I 'DGRPCM&($E(Z)'="[") W Z
"RTN","DGRPV",79,0)
 Q
"RTN","DGRPV",80,0)
 ;
"RTN","DGRPV",81,0)
WW1 ;spacing for screen display (Z=item to print)
"RTN","DGRPV",82,0)
 F Z2=1:1:(Z1-$L(Z)) S Z=Z_" "
"RTN","DGRPV",83,0)
 W Z K Z2
"RTN","DGRPV",84,0)
 Q
"VER")
8.0^22.0
"^DD",2,2,.133,0)
EMAIL ADDRESS^F^^.13;3^K:$L(X)>50!($L(X)<3)!'(X?1.E1"@"1.E1"."1.E) X
"^DD",2,2,.133,.1)
Email Address
"^DD",2,2,.133,3)
Enter the applicant's email address [3-50 characters].  The entry must include an '@'.
"^DD",2,2,.133,21,0)
^^2^2^3050111^
"^DD",2,2,.133,21,1,0)
Enter the applicant's email address [3-50 characters].  The entry must
"^DD",2,2,.133,21,2,0)
have an '@' in the format.
"^DD",2,2,.133,"DT")
3050107
"^DD",2,2,.134,0)
PHONE NUMBER [CELLULAR]^FX^^.13;4^K:$L(X)>20!($L(X)<4) X I $D(X) N CTR,CHR,VAR S VAR=X F CTR=1:1:20 S CHR=$E(VAR,CTR) K:("1234567890 -()."'[CHR) X
"^DD",2,2,.134,.1)
Cell Phone
"^DD",2,2,.134,3)
Answer must be 4-20 characters in length, be numeric with only spaces, parenthesis, periods, and dashes for separators.
"^DD",2,2,.134,21,0)
^^2^2^3050111^
"^DD",2,2,.134,21,1,0)
Enter the telephone number [4-20 characters] to the applicant's
"^DD",2,2,.134,21,2,0)
mobile phone.
"^DD",2,2,.134,"DT")
3041207
"^DD",2,2,.135,0)
PAGER NUMBER^FX^^.13;5^K:$L(X)>20!($L(X)<4) X I $D(X) N CTR,CHR,VAR S VAR=X F CTR=1:1:20 S CHR=$E(VAR,CTR) K:("1234567890 -()."'[CHR) X
"^DD",2,2,.135,.1)
Pager #
"^DD",2,2,.135,3)
Answer must be 4-20 characters in length, be numeric with only spaces, parenthesis, periods, and dashes for separators.
"^DD",2,2,.135,21,0)
^^1^1^3050111^
"^DD",2,2,.135,21,1,0)
Enter the applicant's pager number [4-20 characters].
"^DD",2,2,.135,23,0)
^.001^1^1^3050111^^^
"^DD",2,2,.135,23,1,0)
Contains between 4 and 20 Free Text characters.
"^DD",2,2,.135,"DT")
3041207
"^DD",2,2,.2515,0)
SPOUSE'S EMPLOYMENT STATUS^RS^1:EMPLOYED FULL TIME;2:EMPLOYED PART TIME;3:NOT EMPLOYED;4:SELF EMPLYED;5:RETIRED;6:ACTIVE MILITARY DUTY;9:UNKNOWN;^.25;15^Q
"^DD",2,2,.2515,1,0)
^.1
"^DD",2,2,.2515,1,1,0)
^^TRIGGER^2^.251
"^DD",2,2,.2515,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X I "^3^9^"[("^"_$P(^DPT(DA,.25),"^",15)_"^") I X S X=DIV S Y(1)=$S($D(^DPT(D0,.25)):^(.25),1:"") S X=$P(Y(1),U,1),X=X S DIU=X K Y S X="" X ^DD(2,.2515,1,1,1.4)
"^DD",2,2,.2515,1,1,1.4)
S DIH=$S($D(^DPT(DIV(0),.25)):^(.25),1:""),DIV=X S $P(^(.25),U,1)=DIV,DIH=2,DIG=.251 D ^DICR:$N(^DD(DIH,DIG,1,0))>0
"^DD",2,2,.2515,1,1,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X I "^3^9^"[("^"_$P(^DPT(DA,.25),"^",15)_"^") I X S X=DIV S Y(1)=$S($D(^DPT(D0,.25)):^(.25),1:"") S X=$P(Y(1),U,1),X=X S DIU=X K Y S X="" X ^DD(2,.2515,1,1,2.4)
"^DD",2,2,.2515,1,1,2.4)
S DIH=$S($D(^DPT(DIV(0),.25)):^(.25),1:""),DIV=X S $P(^(.25),U,1)=DIV,DIH=2,DIG=.251 D ^DICR:$N(^DD(DIH,DIG,1,0))>0
"^DD",2,2,.2515,1,1,"CREATE CONDITION")
I "^3^9^"[("^"_$P(^DPT(DA,.25),"^",15)_"^")
"^DD",2,2,.2515,1,1,"CREATE VALUE")
@
"^DD",2,2,.2515,1,1,"DELETE CONDITION")
I "^3^9^"[("^"_$P(^DPT(DA,.25),"^",15)_"^")
"^DD",2,2,.2515,1,1,"DELETE VALUE")
@
"^DD",2,2,.2515,1,1,"FIELD")
SPOUSE'S EMPLOYER NAME
"^DD",2,2,.2515,1,2,0)
^^TRIGGER^2^.2516
"^DD",2,2,.2515,1,2,1)
X ^DD(2,.2515,1,2,1.3) I X S X=DIV S Y(1)=$S($D(^DPT(D0,.25)):^(.25),1:"") S X=$P(Y(1),U,16),X=X S DIU=X K Y S X="" S DIH=$G(^DPT(DIV(0),.25)),DIV=X S $P(^(.25),U,16)=DIV,DIH=2,DIG=.2516 D ^DICR
"^DD",2,2,.2515,1,2,1.3)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S Y(1)=$C(59)_$P($G(^DD(2,.2515,0)),U,3) S X=$P($P(Y(1),$C(59)_Y(0)_":",2),$C(59))'="RETIRED"
"^DD",2,2,.2515,1,2,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^DPT(D0,.25)):^(.25),1:"") S X=$P(Y(1),U,16),X=X S DIU=X K Y S X="" S DIH=$G(^DPT(DIV(0),.25)),DIV=X S $P(^(.25),U,16)=DIV,DIH=2,DIG=.2516 D ^DICR
"^DD",2,2,.2515,1,2,"CREATE CONDITION")
SPOUSE'S EMPLOYMENT STATUS'="RETIRED"
"^DD",2,2,.2515,1,2,"CREATE VALUE")
@
"^DD",2,2,.2515,1,2,"DELETE VALUE")
@
"^DD",2,2,.2515,1,2,"DT")
3041130
"^DD",2,2,.2515,1,2,"FIELD")
SPOUSE'S RETIREMENT DATE
"^DD",2,2,.2515,3)
Enter the current employment status for this patient's spouse.
"^DD",2,2,.2515,21,0)
^^2^2^2920110^
"^DD",2,2,.2515,21,1,0)
Choose from the available list the choice that most correctly indicates
"^DD",2,2,.2515,21,2,0)
the current employment status for this patient's spouse.
"^DD",2,2,.2515,"DT")
3041130
"^DD",2,2,.2516,0)
SPOUSE'S RETIREMENT DATE^DX^^.25;16^S %DT="E" D ^%DT S X=Y K:Y<1 X K:Y>DT X K:(+$P(^DPT(DA,0),"^",3)>Y) X K:(+$P($G(^DPT(DA,.25)),"^",15)'=5) X
"^DD",2,2,.2516,3)
For this veteran applicant's spouse, enter the date s/he retired from her/his place of employment.  A date may only be entered if the spouse is RETIRED.
"^DD",2,2,.2516,5,1,0)
2^.2515^2
"^DD",2,2,.2516,21,0)
^.001^2^2^3050526^^^
"^DD",2,2,.2516,21,1,0)
For this veteran applicant's spouse, enter the date s/he retired from
"^DD",2,2,.2516,21,2,0)
her/his place of employment. 
"^DD",2,2,.2516,23,0)
^.001^4^4^3050526^^^^
"^DD",2,2,.2516,23,1,0)
The Input Transform prevents entry of a Spouse Date of Retirement earlier 
"^DD",2,2,.2516,23,2,0)
than the Veteran s Date of Birth or later than the current date (i.e.: 
"^DD",2,2,.2516,23,3,0)
future retirement dates and retirement dates prior to Veteran's birthdate
"^DD",2,2,.2516,23,4,0)
are not be permitted).
"^DD",2,2,.2516,"DT")
3050526
"^DD",2,2,.31115,0)
EMPLOYMENT STATUS^RSa^1:EMPLOYED FULL TIME;2:EMPLOYED PART TIME;3:NOT EMPLOYED;4:SELF EMPLOYED;5:RETIRED;6:ACTIVE MILITARY DUTY;9:UNKNOWN;^.311;15^Q
"^DD",2,2,.31115,1,0)
^.1
"^DD",2,2,.31115,1,1,0)
^^TRIGGER^2^.31116
"^DD",2,2,.31115,1,1,1)
X ^DD(2,.31115,1,1,1.3) I X S X=DIV S Y(1)=$S($D(^DPT(D0,.311)):^(.311),1:"") S X=$P(Y(1),U,16),X=X S DIU=X K Y S X="" S DIH=$G(^DPT(DIV(0),.311)),DIV=X S $P(^(.311),U,16)=DIV,DIH=2,DIG=.31116 D ^DICR
"^DD",2,2,.31115,1,1,1.3)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S Y(1)=$C(59)_$P($G(^DD(2,.31115,0)),U,3) S X=$P($P(Y(1),$C(59)_Y(0)_":",2),$C(59))'="RETIRED"
"^DD",2,2,.31115,1,1,2)
X ^DD(2,.31115,1,1,2.3) I X S X=DIV S Y(1)=$S($D(^DPT(D0,.311)):^(.311),1:"") S X=$P(Y(1),U,16),X=X S DIU=X K Y S X="" S DIH=$G(^DPT(DIV(0),.311)),DIV=X S $P(^(.311),U,16)=DIV,DIH=2,DIG=.31116 D ^DICR
"^DD",2,2,.31115,1,1,2.3)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X S Y(1)=$C(59)_$P($G(^DD(2,.31115,0)),U,3) S X=$P($P(Y(1),$C(59)_X_":",2),$C(59))="RETIRED"
"^DD",2,2,.31115,1,1,"%D",0)
^.101^5^5^3050302^^^
"^DD",2,2,.31115,1,1,"%D",1,0)
This trigger Cross Reference will remove the DATE OF RETIREMENT value when
"^DD",2,2,.31115,1,1,"%D",2,0)
the EMPLOYMENT STATUS changes from RETIRED to any other status.
"^DD",2,2,.31115,1,1,"%D",3,0)
 
"^DD",2,2,.31115,1,1,"%D",4,0)
When the EMPLOYMENT STATUS changes from anything other than RETIRED, no 
"^DD",2,2,.31115,1,1,"%D",5,0)
change should be made to the DATE OF RETIREMENT.
"^DD",2,2,.31115,1,1,"CREATE CONDITION")
EMPLOYMENT STATUS'="RETIRED"
"^DD",2,2,.31115,1,1,"CREATE VALUE")
@
"^DD",2,2,.31115,1,1,"DELETE CONDITION")
OLD EMPLOYMENT STATUS="RETIRED"
"^DD",2,2,.31115,1,1,"DELETE VALUE")
@
"^DD",2,2,.31115,1,1,"DT")
3041130
"^DD",2,2,.31115,1,1,"FIELD")
DATE OF RETIREMENT
"^DD",2,2,.31115,1,2,0)
^^TRIGGER^2^.3111
"^DD",2,2,.31115,1,2,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X I "^3^9^"[$P(^DPT(DA,.311),U,15) I X S X=DIV S Y(1)=$S($D(^DPT(D0,.311)):^(.311),1:"") S X=$P(Y(1),U,1),X=X S DIU=X K Y S X="" X ^DD(2,.31115,1,2,1.4)
"^DD",2,2,.31115,1,2,1.4)
S DIH=$S($D(^DPT(DIV(0),.311)):^(.311),1:""),DIV=X S %=$P(DIH,U,2,999),DIU=$P(DIH,U,1),^(.311)=DIV_$S(%]"":U_%,1:""),DIH=2,DIG=.3111 D ^DICR:$N(^DD(DIH,DIG,1,0))>0
"^DD",2,2,.31115,1,2,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(0)=X I "^3^9^"[$P(^DPT(DA,.311),U,15) I X S X=DIV S Y(1)=$S($D(^DPT(D0,.311)):^(.311),1:"") S X=$P(Y(1),U,1),X=X S DIU=X K Y S X="" X ^DD(2,.31115,1,2,2.4)
"^DD",2,2,.31115,1,2,2.4)
S DIH=$S($D(^DPT(DIV(0),.311)):^(.311),1:""),DIV=X S %=$P(DIH,U,2,999),DIU=$P(DIH,U,1),^(.311)=DIV_$S(%]"":U_%,1:""),DIH=2,DIG=.3111 D ^DICR:$N(^DD(DIH,DIG,1,0))>0
"^DD",2,2,.31115,1,2,"CREATE CONDITION")
I "^3^9^"[$P(^DPT(DA,.311),U,15)
"^DD",2,2,.31115,1,2,"CREATE VALUE")
@
"^DD",2,2,.31115,1,2,"DELETE CONDITION")
I "^3^9^"[$P(^DPT(DA,.311),U,15)
"^DD",2,2,.31115,1,2,"DELETE VALUE")
@
"^DD",2,2,.31115,1,2,"FIELD")
EMPLOYER NAME
"^DD",2,2,.31115,1,991,0)
2^AVAFC31115^MUMPS
"^DD",2,2,.31115,1,991,1)
I ($T(AVAFC^VAFCDD01)'="") S VAFCF=".31115;" D AVAFC^VAFCDD01(DA)
"^DD",2,2,.31115,1,991,2)
I ($T(AVAFC^VAFCDD01)'="") S VAFCF=".31115;" D AVAFC^VAFCDD01(DA)
"^DD",2,2,.31115,1,991,"%D",0)
^.101^15^15^3041130^^^^
"^DD",2,2,.31115,1,991,"%D",1,0)
This cross reference is used to remember that changes were made to the
"^DD",2,2,.31115,1,991,"%D",2,0)
PATIENT file (#2) outside of the Registration process.  Execution of this
"^DD",2,2,.31115,1,991,"%D",3,0)
cross reference will create an entry in the ADT/HL7 PIVOT file (#391.71)
"^DD",2,2,.31115,1,991,"%D",4,0)
and mark it as requiring transmission of an HL7 ADT-A08 message.
"^DD",2,2,.31115,1,991,"%D",5,0)
 
"^DD",2,2,.31115,1,991,"%D",6,0)
The local variable VAFCFLG will be set to 1 if the cross reference is
"^DD",2,2,.31115,1,991,"%D",7,0)
not executed because the change is being made from within the Registration
"^DD",2,2,.31115,1,991,"%D",8,0)
process.
"^DD",2,2,.31115,1,991,"%D",9,0)
 
"^DD",2,2,.31115,1,991,"%D",10,0)
Execution of this cross reference can be prevented by setting the local
"^DD",2,2,.31115,1,991,"%D",11,0)
variable VAFCA08 equal to 1.
"^DD",2,2,.31115,1,991,"%D",12,0)
  
"^DD",2,2,.31115,1,991,"%D",13,0)
The local variable VAFCF is used to identify the field edited.
"^DD",2,2,.31115,1,991,"%D",14,0)
This data is stored in the FIELD(S) EDITED (#2.1) field in the 
"^DD",2,2,.31115,1,991,"%D",15,0)
ADT/HL7 PIVOT file (#391.71).
"^DD",2,2,.31115,1,991,"DT")
2970825
"^DD",2,2,.31115,3)
Enter this patient's current employment status.
"^DD",2,2,.31115,20,0)
^.3LA^1^1
"^DD",2,2,.31115,20,1,0)
PEMP
"^DD",2,2,.31115,21,0)
^^2^2^2920604^^
"^DD",2,2,.31115,21,1,0)
Enter the patient's current employment status.  Choose from the available
"^DD",2,2,.31115,21,2,0)
choices.
"^DD",2,2,.31115,"AUDIT")
y
"^DD",2,2,.31115,"DT")
3041130
"^DD",2,2,.31116,0)
DATE OF RETIREMENT^DX^^.311;16^S %DT="E" D ^%DT S X=Y K:Y<1 X K:Y>DT X K:(+$P(^DPT(DA,0),"^",3)>Y) X K:(+$P($G(^DPT(DA,.311)),"^",15)'=5) X
"^DD",2,2,.31116,3)
For this veteran applicant enter the date s/he retired from her/his place of employment.  A date may only be entered if the veteran is RETIRED.
"^DD",2,2,.31116,5,1,0)
2^.31115^1
"^DD",2,2,.31116,21,0)
^.001^2^2^3050526^^^^
"^DD",2,2,.31116,21,1,0)
For this veteran applicant, enter the date s/he retired from
"^DD",2,2,.31116,21,2,0)
her/his place of employment.
"^DD",2,2,.31116,23,0)
^.001^4^4^3050526^^^^
"^DD",2,2,.31116,23,1,0)
The Input Transform for the DATE OF RETIREMENT compares the date entered
"^DD",2,2,.31116,23,2,0)
to the Patient's DATE OF BIRTH.  If the DATE OF BIRTH is later than the 
"^DD",2,2,.31116,23,3,0)
DATE OF RETIREMENT, the entered date is not accepted for the DATE OF 
"^DD",2,2,.31116,23,4,0)
RETIREMENT.
"^DD",2,2,.31116,"DT")
3050526
"^DD",2,2,.362,0)
DISABILITY RET. FROM MILITARY?^RSX^0:NO;1:YES, RECEIVING MILITARY RETIREMENT;2:YES, RECEIVING MILITARY RETIREMENT IN LIEU OF VA COMPENSATION;3:UNKNOWN;^.36;2^S DFN=DA D SV^DGLOCK
"^DD",2,2,.362,.1)
MILT RET DUE TO DISABILITY?
"^DD",2,2,.362,1,0)
^.1
"^DD",2,2,.362,1,1,0)
2^AH^MUMPS
"^DD",2,2,.362,1,1,1)
S DFN=DA D EN^DGMTR K DGREQF
"^DD",2,2,.362,1,1,2)
Q
"^DD",2,2,.362,1,1,"DT")
2920929
"^DD",2,2,.362,1,2,0)
2^AENR362^MUMPS
"^DD",2,2,.362,1,2,1)
D AUTOUPD^DGENA2(DA)
"^DD",2,2,.362,1,2,2)
D AUTOUPD^DGENA2(DA)
"^DD",2,2,.362,1,2,3)
DO NOT DELETE
"^DD",2,2,.362,1,2,"%D",0)
^.101^2^2^3041115^^^
"^DD",2,2,.362,1,2,"%D",1,0)
This cross-reference is used to update the patient's current Patient Enrollment 
"^DD",2,2,.362,1,2,"%D",2,0)
record.
"^DD",2,2,.362,1,2,"DT")
2970630
"^DD",2,2,.362,3)
Was this patient retired from the U.S. Armed forces due to an disability incurred while serving?
"^DD",2,2,.362,4)
D HLPMLDS^DGRPU
"^DD",2,2,.362,20,0)
^.3LA^1^1
"^DD",2,2,.362,20,1,0)
SVC
"^DD",2,2,.362,"DT")
3040420
"^DD",2,2,1010.1511,0)
APPOINTMENT REQUEST DATE^D^^1010.15;11^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",2,2,1010.1511,3)
Enter date VA was notified the enrolling patient is requesting an appointment.
"^DD",2,2,1010.1511,21,0)
^^2^2^3041118^
"^DD",2,2,1010.1511,21,1,0)
This field contains the date the VA enrolling a patient for the first time
"^DD",2,2,1010.1511,21,2,0)
was notified that the patient requests an appointment with a provider.
"^DD",2,2,1010.1511,"DT")
3041118
"^DD",2,2,1010.159,0)
APPOINTMENT REQUEST ON 1010EZ^S^0:NO;1:YES;^1010.15;9^Q
"^DD",2,2,1010.159,.1)
Do you want an appt. with a VA doctor/provider as soon as available? 
"^DD",2,2,1010.159,3)
Enter 'Y' if the veteran applicant has requested an appointment with a VA doctor/provider.
"^DD",2,2,1010.159,4)

"^DD",2,2,1010.159,21,0)
^.001^7^7^3050225^^^^
"^DD",2,2,1010.159,21,1,0)
Enter a 'Y' if the veteran applicant has requested an appointment with a
"^DD",2,2,1010.159,21,2,0)
VA doctor or provider and wants to be seen as soon as one becomes
"^DD",2,2,1010.159,21,3,0)
available.  Enter a 'N' if the veteran applicant has not requested an
"^DD",2,2,1010.159,21,4,0)
appointment.
"^DD",2,2,1010.159,21,5,0)
 
"^DD",2,2,1010.159,21,6,0)
This question may ONLY be entered ONCE for the veteran.  The answer to
"^DD",2,2,1010.159,21,7,0)
this question CANNOT be changed after the initial entry.
"^DD",2,2,1010.159,23,0)
^.001^2^2^3050225^^^^
"^DD",2,2,1010.159,23,1,0)
This field reflects the a request indicated on the patient's initial 
"^DD",2,2,1010.159,23,2,0)
1010EZ.
"^DD",2,2,1010.159,"DT")
3050112
"^DD",408.13,408.13,1.1,0)
MAIDEN NAME^FX^^1;1^K:$L(X)>35!($L(X)<2) X I $D(X) S DG20NAME=X,(X,DG20NAME)=$$FORMAT^XLFNAME7(.DG20NAME,3,35,,2,,1) K:'$L(X) X,DG20NAME
"^DD",408.13,408.13,1.1,3)
Answer must be 2-35 characters in length.
"^DD",408.13,408.13,1.1,4)

"^DD",408.13,408.13,1.1,21,0)
^.001^4^4^3050607^^
"^DD",408.13,408.13,1.1,21,1,0)
Enter the spouse's maiden name in 'LAST,FIRST MIDDLE SUFFIX' format.  
"^DD",408.13,408.13,1.1,21,2,0)
Entry of the LAST name only is permitted and the comma may be omitted.  
"^DD",408.13,408.13,1.1,21,3,0)
If the response contains no comma, one will be appended to the value.  
"^DD",408.13,408.13,1.1,21,4,0)
Including the comma, the value must be at least 3 characters in length.
"^DD",408.13,408.13,1.1,23,0)
^.001^8^8^3050607^^
"^DD",408.13,408.13,1.1,23,1,0)
This field was added via patch DG*5.3*597, distributed with EAS*1.0*51.
"^DD",408.13,408.13,1.1,23,2,0)
 
"^DD",408.13,408.13,1.1,23,3,0)
The purpose of this field is to store in the INCOME PERSON file
"^DD",408.13,408.13,1.1,23,4,0)
the maiden name of the Veteran's spouse as reported on the
"^DD",408.13,408.13,1.1,23,5,0)
1010EZ application.
"^DD",408.13,408.13,1.1,23,6,0)
 
"^DD",408.13,408.13,1.1,23,7,0)
However, the field may be used to add the maiden name of any
"^DD",408.13,408.13,1.1,23,8,0)
dependent of the Veteran.
"^DD",408.13,408.13,1.1,"DT")
3050607
"^DD",408.13,408.13,1.2,0)
STREET ADDRESS [LINE 1]^FX^^1;2^K:X[""""!($A(X)=45) X K:$L(X)>30!($L(X)<3) X
"^DD",408.13,408.13,1.2,3)
Answer must be 3-30 characters in length.
"^DD",408.13,408.13,1.2,4)
D HELPSA1^DGRPEIS3
"^DD",408.13,408.13,1.2,"DEL",1,0)
D SDD^DGLOCK2 I '$D(X)
"^DD",408.13,408.13,1.2,"DT")
3050224
"^DD",408.13,408.13,1.3,0)
STREET ADDRESS [LINE 2]^FX^^1;3^K:X[""""!($A(X)=45) X K:$L(X)>30!($L(X)<3) X
"^DD",408.13,408.13,1.3,3)
Answer must be 3-30 characters in length.
"^DD",408.13,408.13,1.3,4)
D HELPSA2^DGRPEIS3
"^DD",408.13,408.13,1.3,"DEL",1,0)
D SDD^DGLOCK2 I '$D(X)
"^DD",408.13,408.13,1.3,"DT")
3050224
"^DD",408.13,408.13,1.4,0)
STREET ADDRESS [LINE 3]^F^^1;4^K:$L(X)>30!($L(X)<3) X
"^DD",408.13,408.13,1.4,3)
Answer must be 3-30 characters in length.
"^DD",408.13,408.13,1.4,4)
D HELPSA3^DGRPEIS3
"^DD",408.13,408.13,1.4,"DEL",1,0)
D SDD^DGLOCK2 I '$D(X)
"^DD",408.13,408.13,1.4,"DT")
3050224
"^DD",408.13,408.13,1.5,0)
CITY^F^^1;5^K:$L(X)>30!($L(X)<3) X
"^DD",408.13,408.13,1.5,3)
Answer must be 3-30 characters in length.
"^DD",408.13,408.13,1.5,4)
D HELPCITY^DGRPEIS3
"^DD",408.13,408.13,1.5,"DEL",1,0)
D SDD^DGLOCK2 I '$D(X)
"^DD",408.13,408.13,1.5,"DT")
3040416
"^DD",408.13,408.13,1.6,0)
STATE^P5'^DIC(5,^1;6^Q
"^DD",408.13,408.13,1.6,3)

"^DD",408.13,408.13,1.6,4)
D HELPSTAT^DGRPEIS3
"^DD",408.13,408.13,1.6,"DEL",1,0)
D SDD^DGLOCK2 I '$D(X)
"^DD",408.13,408.13,1.6,"DT")
3040416
"^DD",408.13,408.13,1.7,0)
ZIP^F^^1;7^K:$L(X)>10!($L(X)<5)!'((X?5N)!(X?5N1"-"4N)) X
"^DD",408.13,408.13,1.7,3)
Answer must be 5-10 characters in length.
"^DD",408.13,408.13,1.7,4)
D HELPZIP^DGRPEIS3
"^DD",408.13,408.13,1.7,"DT")
3040416
"^DD",408.13,408.13,1.8,0)
TELEPHONE NUMBER^FX^^1;8^K:$L(X)>20!($L(X)<4) X
"^DD",408.13,408.13,1.8,3)
Answer must be 4-20 characters in length.
"^DD",408.13,408.13,1.8,4)
D HELPPHON^DGRPEIS3
"^DD",408.13,408.13,1.8,23,0)
^^7^7^3050303^
"^DD",408.13,408.13,1.8,23,1,0)
May be exactly 10 digits or may be formatted upto 13 characters as:
"^DD",408.13,408.13,1.8,23,2,0)
 
"^DD",408.13,408.13,1.8,23,3,0)
   (nnn)nnn-nnnn
"^DD",408.13,408.13,1.8,23,4,0)
   i.e., (<area_code>)<exchange>-<number>
"^DD",408.13,408.13,1.8,23,5,0)
   or
"^DD",408.13,408.13,1.8,23,6,0)
   nnn.nnn.nnnn
"^DD",408.13,408.13,1.8,23,7,0)
   i.e., <area_code>.<exchange>.<number>
"^DD",408.13,408.13,1.8,"DT")
3050111
"^DD",408.21,408.21,1.01,0)
ADJUSTED MEDICAL EXPENSES^NJ8,2X^^1;1^S:X["$" X=$P(X,"$",2) X:X["*" "S X=X*12 D EN^DDIOL(""  ""_X,"""",""?0"")" K:X'?.N.1".".2N!(X>9999999)!(X<0) X
"^DD",408.21,408.21,1.01,1,0)
^.1
"^DD",408.21,408.21,1.01,1,1,0)
408.21^AGME101^MUMPS
"^DD",408.21,408.21,1.01,1,1,1)
D AGME101^DGMTSCU4(DA)
"^DD",408.21,408.21,1.01,1,1,2)
D AGME101^DGMTSCU4(DA)
"^DD",408.21,408.21,1.01,1,1,"%D",0)
^.101^2^2^3050310^^^
"^DD",408.21,408.21,1.01,1,1,"%D",1,0)
Should fire only upon an IVM upload change to this field.  Gross medical 
"^DD",408.21,408.21,1.01,1,1,"%D",2,0)
expense needs to be back-calculated when IVM changes this field.
"^DD",408.21,408.21,1.01,1,1,"DT")
3050309
"^DD",408.21,408.21,1.01,3)
Type a Dollar Amount between 0 and 9999999, 2 Decimal Digits
"^DD",408.21,408.21,1.01,4)
D:$G(DGMTYPT)=3 101^EASECDD
"^DD",408.21,408.21,1.01,21,0)
^.001^13^13^3050225^^^
"^DD",408.21,408.21,1.01,21,1,0)
Enter in this field the total amount of unreimbursed medical expenses
"^DD",408.21,408.21,1.01,21,2,0)
paid by the veteran during the previous calendar year.  The expenses
"^DD",408.21,408.21,1.01,21,3,0)
can be for the veteran or for members of the veteran's family.
"^DD",408.21,408.21,1.01,21,4,0)
Reportable medical expenses include amounts paid for the following:
"^DD",408.21,408.21,1.01,21,5,0)
fees of physicians, dentists, and other providers of health services;
"^DD",408.21,408.21,1.01,21,6,0)
hospital and nursing home fees; medical insurance premiums (including
"^DD",408.21,408.21,1.01,21,7,0)
the Medicare premium); drugs and medicines; eyeglasses; any other
"^DD",408.21,408.21,1.01,21,8,0)
expenses that are reasonable related to medical care.  The expenses
"^DD",408.21,408.21,1.01,21,9,0)
must actually have been paid by the veteran.  Do not list expenses
"^DD",408.21,408.21,1.01,21,10,0)
which have not been paid or which have been paid by someone other
"^DD",408.21,408.21,1.01,21,11,0)
than the veteran.  Do not list expenses which the veteran has paid if
"^DD",408.21,408.21,1.01,21,12,0)
the veteran expects to receive reimbursement from insurance or some
"^DD",408.21,408.21,1.01,21,13,0)
other source.
"^DD",408.21,408.21,1.01,23,0)
^.001^5^5^3050225^^
"^DD",408.21,408.21,1.01,23,1,0)
As of patch DG*5.3*624, this field should not be edited directly.
"^DD",408.21,408.21,1.01,23,2,0)
This field is now derived based upon the value entered in field 1.12 and 
"^DD",408.21,408.21,1.01,23,3,0)
the number of dependents active for the test.  An IVM upload is the only 
"^DD",408.21,408.21,1.01,23,4,0)
exception.  When this happens, field 1.12 will be back-calculated based 
"^DD",408.21,408.21,1.01,23,5,0)
on the value IVM places here.
"^DD",408.21,408.21,1.01,"DT")
3050309
"^DD",408.21,408.21,1.12,0)
GROSS MEDICAL EXPENSES^NJ10,2X^^1;12^S:X["$" X=$P(X,"$",2) X:X["*" "S X=X*12 D EN^DDIOL(""  ""_X,"""",""?0"")" K:X'?.N.1".".2N!(X>9999999)!(X<0) X
"^DD",408.21,408.21,1.12,3)
Type a Dollar Amount between 0 and 9999999, 2 Decimal Digits
"^DD",408.21,408.21,1.12,4)

"^DD",408.21,408.21,1.12,21,0)
^^17^17^3050301^
"^DD",408.21,408.21,1.12,21,1,0)
Enter the total amount of unreimbursed medical expenses paid by the
"^DD",408.21,408.21,1.12,21,2,0)
veteran during the previous calendar year.  The expenses can be for the
"^DD",408.21,408.21,1.12,21,3,0)
veteran or for persons that the veteran has a legal or moral obligation
"^DD",408.21,408.21,1.12,21,4,0)
to support.  The expenses must actually have been paid by the veteran.  
"^DD",408.21,408.21,1.12,21,5,0)
Reportable medical expenses include amounts paid for the following:
"^DD",408.21,408.21,1.12,21,6,0)
fees of physicians, dentists, and other providers of health services; 
"^DD",408.21,408.21,1.12,21,7,0)
hospital and nursing home fees; medical insurance premiums (including
"^DD",408.21,408.21,1.12,21,8,0)
the Medicare premium); drugs and medicines; eyeglasses; any other
"^DD",408.21,408.21,1.12,21,9,0)
expenses that are reasonable related to medical care.  Do not list
"^DD",408.21,408.21,1.12,21,10,0)
expenses which the veteran has paid if the veteran expects to receive
"^DD",408.21,408.21,1.12,21,11,0)
reimbursement from insurance or some other source.
"^DD",408.21,408.21,1.12,21,12,0)
 
"^DD",408.21,408.21,1.12,21,13,0)
By law, not all of the unreimbursed medical expenses paid by the veteran
"^DD",408.21,408.21,1.12,21,14,0)
during the previous calendar year may be deducted from the total annual 
"^DD",408.21,408.21,1.12,21,15,0)
income.  The total amount of the unreimbursed medical expenses entered
"^DD",408.21,408.21,1.12,21,16,0)
in this field will be automatically adjusted based upon the veteran's 
"^DD",408.21,408.21,1.12,21,17,0)
maximum annual pension amount and number of dependents.
"^DD",408.21,408.21,1.12,23,0)
^.001^4^4^3050301^^
"^DD",408.21,408.21,1.12,23,1,0)
Enter the total amount of unreimbursed medical expenses
"^DD",408.21,408.21,1.12,23,2,0)
paid by the veteran during the previous calendar year.
"^DD",408.21,408.21,1.12,23,3,0)
The expenses can be for the veteran or for persons that
"^DD",408.21,408.21,1.12,23,4,0)
the veteran has a legal or moral obligation to support.
"^DD",408.21,408.21,1.12,"DT")
3050222
"^DD",408.22,408.22,.07,0)
AMOUNT CONTRIBUTED TO SPOUSE^NJ8,2X^^0;7^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>99999)!(X<0) X D AMT^DGMTDD2:$D(X)
"^DD",408.22,408.22,.07,.1)
IF YOU DID NOT LIVE WITH SPOUSE, AMOUNT CONTRIBUTED TO SPOUSE LAST YEAR
"^DD",408.22,408.22,.07,1,0)
^.1
"^DD",408.22,408.22,.07,1,1,0)
408.22^AIX7^MUMPS
"^DD",408.22,408.22,.07,1,1,1)
I $D(^DGMT(408.22,DA,0)),'$P(^(0),U,6),$P(^(0),U,7)<600 D SP^DGMTDD2
"^DD",408.22,408.22,.07,1,1,2)
I $D(^DGMT(408.22,DA,0)),'$P(^(0),U,6),$P(^(0),U,7)="" D SP^DGMTDD2
"^DD",408.22,408.22,.07,1,1,"%D",0)
^^4^4^2920723^^^^
"^DD",408.22,408.22,.07,1,1,"%D",1,0)
This mumps cross-reference works like a "trigger" cross-reference.
"^DD",408.22,408.22,.07,1,1,"%D",2,0)
If the patient did not contribute at least $600 to the spouse,
"^DD",408.22,408.22,.07,1,1,"%D",3,0)
any corresponding income and net worth on file for the year
"^DD",408.22,408.22,.07,1,1,"%D",4,0)
are deleted.
"^DD",408.22,408.22,.07,1,1,"DT")
2920723
"^DD",408.22,408.22,.07,3)
Type a Dollar Amount between 0 and 99999, 2 Decimal Digits
"^DD",408.22,408.22,.07,5,1,0)
408.22^.06^1
"^DD",408.22,408.22,.07,21,0)
^^8^8^3050111^
"^DD",408.22,408.22,.07,21,1,0)
This response must be a number.
"^DD",408.22,408.22,.07,21,2,0)
 
"^DD",408.22,408.22,.07,21,3,0)
If the veteran did not live with his or her spouse, enter in this
"^DD",408.22,408.22,.07,21,4,0)
field the amount the veteran contributed to his or her spouse last
"^DD",408.22,408.22,.07,21,5,0)
calendar year.
"^DD",408.22,408.22,.07,21,6,0)
 
"^DD",408.22,408.22,.07,21,7,0)
If the amount the veteran contributed is less than $600, then the
"^DD",408.22,408.22,.07,21,8,0)
spouse will not be considered a dependent for financial assessment.
"^DD",408.22,408.22,.07,"DT")
2920723
"^DD",408.22,408.22,.1,0)
CONTRIBUTED TO SUPPORT^SX^1:YES;0:NO;^0;10^D CON^DGMTDD2
"^DD",408.22,408.22,.1,.1)
DID YOU CONTRIBUTE TO THE CHILD'S SUPPORT
"^DD",408.22,408.22,.1,3)
Enter in this field a Yes or No to indicate whether the veteran contributed any dollar amount to the child's support last calendar year.
"^DD",408.22,408.22,.1,4)
D HLPCS^DGRPU
"^DD",408.22,408.22,.1,5,1,0)
408.22^.06^2
"^DD",408.22,408.22,.1,21,0)
^.001^5^5^3050228^^^^
"^DD",408.22,408.22,.1,21,1,0)
Enter in this field a Yes or No to indicate whether the veteran
"^DD",408.22,408.22,.1,21,2,0)
contributed any dollar amount to the child's support last calendar
"^DD",408.22,408.22,.1,21,3,0)
year.  The contributions do not have to be in regular set amounts.
"^DD",408.22,408.22,.1,21,4,0)
For example, a veteran who paid a child's school tuition or
"^DD",408.22,408.22,.1,21,5,0)
medical bills would be contributing to the child's support.
"^DD",408.22,408.22,.1,"DT")
2920402
"^DD",408.22,408.22,.18,0)
CHILD 18-23 IN SCHOOL^S^0:NO;1:YES;^0;18^Q
"^DD",408.22,408.22,.18,.1)
CHILD IS 18-23 YRS AND CHILD ATTENDED SCHOOL LAST YR
"^DD",408.22,408.22,.18,3)

"^DD",408.22,408.22,.18,4)
D HLP1823^DGRPU
"^DD",408.22,408.22,.18,"DT")
3050124
"^DD",408.22,408.22,.19,0)
AMOUNT CONTRIBUTED TO CHILD^NJ8,2^^0;19^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>99999)!(X<0) X
"^DD",408.22,408.22,.19,.1)
IF YOU DID NOT LIVE WITH CHILD, AMOUNT CONTRIBUTED TO CHILD LAST YEAR
"^DD",408.22,408.22,.19,3)
Type a Dollar Amount between 0 and 99999, 2 Decimal Digits
"^DD",408.22,408.22,.19,21,0)
^.001^5^5^3050223^^^^
"^DD",408.22,408.22,.19,21,1,0)
Enter in this field the dollar amount that the veteran contributed
"^DD",408.22,408.22,.19,21,2,0)
to the child's support last calendar year.  The contributions do not 
"^DD",408.22,408.22,.19,21,3,0)
have to be in regular set amounts.  For example, a veteran who paid
"^DD",408.22,408.22,.19,21,4,0)
a child's school tuition or medical bills would be contributing to
"^DD",408.22,408.22,.19,21,5,0)
the child's support. 
"^DD",408.22,408.22,.19,"DT")
3050124
**INSTALL NAME**
EAS*1.0*57
"BLD",5253,0)
EAS*1.0*57^ENROLLMENT APPLICATION SYSTEM^0^3050713^y
"BLD",5253,1,0)
^^1^1^3050407^
"BLD",5253,1,1,0)
1010 EZ Phase 3.0
"BLD",5253,4,0)
^9.64PA^711^1
"BLD",5253,4,711,0)
711
"BLD",5253,4,711,222)
y^y^f^^n^^y^o^n
"BLD",5253,4,"B",711,711)

"BLD",5253,"KRN",0)
^9.67PA^8989.52^19
"BLD",5253,"KRN",.4,0)
.4
"BLD",5253,"KRN",.401,0)
.401
"BLD",5253,"KRN",.402,0)
.402
"BLD",5253,"KRN",.403,0)
.403
"BLD",5253,"KRN",.5,0)
.5
"BLD",5253,"KRN",.84,0)
.84
"BLD",5253,"KRN",3.6,0)
3.6
"BLD",5253,"KRN",3.8,0)
3.8
"BLD",5253,"KRN",9.2,0)
9.2
"BLD",5253,"KRN",9.8,0)
9.8
"BLD",5253,"KRN",9.8,"NM",0)
^9.68A^32^32
"BLD",5253,"KRN",9.8,"NM",1,0)
EASEZP6U^^0^B28307233
"BLD",5253,"KRN",9.8,"NM",2,0)
EASEZPU2^^0^B37335348
"BLD",5253,"KRN",9.8,"NM",3,0)
EASEZF2^^0^B69490106
"BLD",5253,"KRN",9.8,"NM",4,0)
EASEZF1^^0^B48422626
"BLD",5253,"KRN",9.8,"NM",5,0)
EASEZF1A^^0^B348068
"BLD",5253,"KRN",9.8,"NM",6,0)
EASEZT2^^0^B31810763
"BLD",5253,"KRN",9.8,"NM",7,0)
EASEZPDG^^0^B57975781
"BLD",5253,"KRN",9.8,"NM",8,0)
EASEZPVD^^0^B19564311
"BLD",5253,"KRN",9.8,"NM",9,0)
EASEZPV2^^0^B32363733
"BLD",5253,"KRN",9.8,"NM",10,0)
EASEZPVI^^0^B27047859
"BLD",5253,"KRN",9.8,"NM",11,0)
EASEZPDU^^0^B40371978
"BLD",5253,"KRN",9.8,"NM",12,0)
EASEZPU3^^0^B24284626
"BLD",5253,"KRN",9.8,"NM",13,0)
EASEZP6F^^0^B15092600
"BLD",5253,"KRN",9.8,"NM",14,0)
EASEZRP1^^0^B32905037
"BLD",5253,"KRN",9.8,"NM",15,0)
EASEZRP2^^0^B74192279
"BLD",5253,"KRN",9.8,"NM",16,0)
EASEZRP3^^0^B26356109
"BLD",5253,"KRN",9.8,"NM",17,0)
EASEZRPF^^0^B15944209
"BLD",5253,"KRN",9.8,"NM",18,0)
EASEZRPD^^0^B8374061
"BLD",5253,"KRN",9.8,"NM",19,0)
EASEZRPI^^0^B2991778
"BLD",5253,"KRN",9.8,"NM",20,0)
EASEZRPM^^0^B29656175
"BLD",5253,"KRN",9.8,"NM",21,0)
EASEZRPP^^0^B33578225
"BLD",5253,"KRN",9.8,"NM",22,0)
EASEZRPU^^0^B44900402
"BLD",5253,"KRN",9.8,"NM",23,0)
EASEZP64^^0^B25850526
"BLD",5253,"KRN",9.8,"NM",24,0)
EASEZP6M^^0^B29083028
"BLD",5253,"KRN",9.8,"NM",25,0)
EASEZDD^^0^B17328269
"BLD",5253,"KRN",9.8,"NM",26,0)
EASEZI^^0^B25119785
"BLD",5253,"KRN",9.8,"NM",27,0)
EASEZI1^^0^B15739163
"BLD",5253,"KRN",9.8,"NM",28,0)
EASEZF4^^0^B20073619
"BLD",5253,"KRN",9.8,"NM",29,0)
EASEZU3^^0^B62866657
"BLD",5253,"KRN",9.8,"NM",30,0)
EASEZF3^^0^B21135276
"BLD",5253,"KRN",9.8,"NM",31,0)
EASEZP63^^0^B55264854
"BLD",5253,"KRN",9.8,"NM",32,0)
EASEZPVU^^0^B5763873
"BLD",5253,"KRN",9.8,"NM","B","EASEZDD",25)

"BLD",5253,"KRN",9.8,"NM","B","EASEZF1",4)

"BLD",5253,"KRN",9.8,"NM","B","EASEZF1A",5)

"BLD",5253,"KRN",9.8,"NM","B","EASEZF2",3)

"BLD",5253,"KRN",9.8,"NM","B","EASEZF3",30)

"BLD",5253,"KRN",9.8,"NM","B","EASEZF4",28)

"BLD",5253,"KRN",9.8,"NM","B","EASEZI",26)

"BLD",5253,"KRN",9.8,"NM","B","EASEZI1",27)

"BLD",5253,"KRN",9.8,"NM","B","EASEZP63",31)

"BLD",5253,"KRN",9.8,"NM","B","EASEZP64",23)

"BLD",5253,"KRN",9.8,"NM","B","EASEZP6F",13)

"BLD",5253,"KRN",9.8,"NM","B","EASEZP6M",24)

"BLD",5253,"KRN",9.8,"NM","B","EASEZP6U",1)

"BLD",5253,"KRN",9.8,"NM","B","EASEZPDG",7)

"BLD",5253,"KRN",9.8,"NM","B","EASEZPDU",11)

"BLD",5253,"KRN",9.8,"NM","B","EASEZPU2",2)

"BLD",5253,"KRN",9.8,"NM","B","EASEZPU3",12)

"BLD",5253,"KRN",9.8,"NM","B","EASEZPV2",9)

"BLD",5253,"KRN",9.8,"NM","B","EASEZPVD",8)

"BLD",5253,"KRN",9.8,"NM","B","EASEZPVI",10)

"BLD",5253,"KRN",9.8,"NM","B","EASEZPVU",32)

"BLD",5253,"KRN",9.8,"NM","B","EASEZRP1",14)

"BLD",5253,"KRN",9.8,"NM","B","EASEZRP2",15)

"BLD",5253,"KRN",9.8,"NM","B","EASEZRP3",16)

"BLD",5253,"KRN",9.8,"NM","B","EASEZRPD",18)

"BLD",5253,"KRN",9.8,"NM","B","EASEZRPF",17)

"BLD",5253,"KRN",9.8,"NM","B","EASEZRPI",19)

"BLD",5253,"KRN",9.8,"NM","B","EASEZRPM",20)

"BLD",5253,"KRN",9.8,"NM","B","EASEZRPP",21)

"BLD",5253,"KRN",9.8,"NM","B","EASEZRPU",22)

"BLD",5253,"KRN",9.8,"NM","B","EASEZT2",6)

"BLD",5253,"KRN",9.8,"NM","B","EASEZU3",29)

"BLD",5253,"KRN",19,0)
19
"BLD",5253,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",5253,"KRN",19,"NM",1,0)
EASEC LTC EXEMPTION TEST EDIT^^0
"BLD",5253,"KRN",19,"NM","B","EASEC LTC EXEMPTION TEST EDIT",1)

"BLD",5253,"KRN",19.1,0)
19.1
"BLD",5253,"KRN",101,0)
101
"BLD",5253,"KRN",409.61,0)
409.61
"BLD",5253,"KRN",771,0)
771
"BLD",5253,"KRN",870,0)
870
"BLD",5253,"KRN",8989.51,0)
8989.51
"BLD",5253,"KRN",8989.52,0)
8989.52
"BLD",5253,"KRN",8994,0)
8994
"BLD",5253,"KRN","B",.4,.4)

"BLD",5253,"KRN","B",.401,.401)

"BLD",5253,"KRN","B",.402,.402)

"BLD",5253,"KRN","B",.403,.403)

"BLD",5253,"KRN","B",.5,.5)

"BLD",5253,"KRN","B",.84,.84)

"BLD",5253,"KRN","B",3.6,3.6)

"BLD",5253,"KRN","B",3.8,3.8)

"BLD",5253,"KRN","B",9.2,9.2)

"BLD",5253,"KRN","B",9.8,9.8)

"BLD",5253,"KRN","B",19,19)

"BLD",5253,"KRN","B",19.1,19.1)

"BLD",5253,"KRN","B",101,101)

"BLD",5253,"KRN","B",409.61,409.61)

"BLD",5253,"KRN","B",771,771)

"BLD",5253,"KRN","B",870,870)

"BLD",5253,"KRN","B",8989.51,8989.51)

"BLD",5253,"KRN","B",8989.52,8989.52)

"BLD",5253,"KRN","B",8994,8994)

"BLD",5253,"QUES",0)
^9.62^^
"BLD",5253,"REQB",0)
^9.611^2^2
"BLD",5253,"REQB",1,0)
DG*5.3*624^2
"BLD",5253,"REQB",2,0)
EAS*1.0*60^2
"BLD",5253,"REQB","B","DG*5.3*624",1)

"BLD",5253,"REQB","B","EAS*1.0*60",2)

"DATA",711,.1,0)
UNKNOWN^UNKNOWN^A^^1.0
"DATA",711,.1,1)
0^0^0
"DATA",711,1,0)
TYPE OF BENEFIT-HEALTH SERVICES^I;1A.1^A^^1.0
"DATA",711,1,1)
0^0^0
"DATA",711,1,2)
Applying for Health Services
"DATA",711,1,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,1,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,2,0)
TYPE OF BENEFIT-NURSING HOME^I;1A.2^A^^1.0
"DATA",711,2,1)
0^0^0
"DATA",711,2,2)
Applying for Nursing Home
"DATA",711,2,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,2,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,3,0)
TYPE OF BENEFIT-DOMICILIARY^I;1A.3^A^^1.0
"DATA",711,3,1)
0^0^0
"DATA",711,3,2)
Applying for Domiciliary
"DATA",711,3,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,3,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,4,0)
TYPE OF BENEFIT-DENTAL^I;1A.4^A^^1.0
"DATA",711,4,1)
0^0^0
"DATA",711,4,2)
Applying for Dental
"DATA",711,4,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,4,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,5,0)
TYPE OF BENEFIT-ENROLLMENT^I;1A.5^A^^1.0
"DATA",711,5,1)
0^0^0
"DATA",711,5,2)
Applying for Enrollment
"DATA",711,5,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,5,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,6,0)
FACILITY TO RECEIVE 1010EZ^I;1B.^A^^1.0
"DATA",711,6,1)
0^0^0
"DATA",711,6,2)
Facility Applying To
"DATA",711,6,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,7,0)
APPLICANT LAST NAME^I;2.1^A^^1.0
"DATA",711,7,1)
2^2^.01
"DATA",711,7,2)
Applicant Name
"DATA",711,7,3)
S DIR(0)="FO^1:50^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,7,"T")
S EASRTR=$$NAME^EASEZT1(EASAPP,"APPLICANT",EASMULT)
"DATA",711,8,0)
APPLICANT FIRST NAME^I;2.2^A^^1.0
"DATA",711,8,1)
2^2^.01
"DATA",711,8,3)
S DIR(0)="FO^1:25^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,9,0)
APPLICANT MIDDLE NAME^I;2.3^A^^1.0
"DATA",711,9,1)
2^2^.01
"DATA",711,9,3)
S DIR(0)="FO^1:25^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,10,0)
APPLICANT SUFFIX NAME^I;2.4^A^^1.0
"DATA",711,10,1)
2^2^.01
"DATA",711,10,3)
S DIR(0)="FO^1:6^K:X'?1.A X"
"DATA",711,11,0)
APPLICANT OTHER NAME^I;3.^A^^1.0
"DATA",711,11,1)
2^2.01^.01
"DATA",711,11,2)
Alias
"DATA",711,11,3)
S DIR(0)="FO^2:30"
"DATA",711,11,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,12,0)
APPLICANT SEX^I;4.^A^^1.0
"DATA",711,12,1)
2^2^.02
"DATA",711,12,2)
Sex
"DATA",711,12,"T")
S EASRTR=$$SEX^EASEZT1(EZDATA)
"DATA",711,13,0)
APPLICANT SOCIAL SECURITY NUMBER^I;5.^A^^1.0
"DATA",711,13,1)
2^2^.09
"DATA",711,13,2)
SSN
"DATA",711,13,3)
S DIR(0)="F^11:11^K:X'?3N1""-""2N1""-""4N X",DIR("?")="Use format nnn-nnn-nnn.  Example: ***********"
"DATA",711,14,0)
APPLICANT CLAIM NUMBER^I;6.^A^^1.0
"DATA",711,14,1)
2^2^.313
"DATA",711,14,2)
Claim #
"DATA",711,15,0)
APPLICANT DATE OF BIRTH^I;7.^A^^1.0
"DATA",711,15,1)
2^2^.03
"DATA",711,15,2)
DOB
"DATA",711,16,0)
RELIGION^I;8.^A^^1.0
"DATA",711,16,1)
2^2^.08
"DATA",711,16,2)
Religion
"DATA",711,16,"T")
S EASRTR=$$RELIGION^EASEZT2(EZDATA)
"DATA",711,17,0)
APPLICANT STREET ADDRESS^I;9A.^A^^1.0
"DATA",711,17,1)
2^2^.111
"DATA",711,17,2)
Street Address
"DATA",711,17,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,18,0)
APPLICANT CITY^I;9B.^A^^1.0
"DATA",711,18,1)
2^2^.114
"DATA",711,18,2)
City
"DATA",711,18,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,19,0)
APPLICANT STATE^I;9C.^A^^1.0
"DATA",711,19,1)
2^2^.115
"DATA",711,19,2)
State
"DATA",711,19,"T")
S EASRTR=$$STATE^EASEZT1(EZDATA)
"DATA",711,20,0)
APPLICANT ZIP^I;9D.^A^^1.0
"DATA",711,20,1)
2^2^.1112
"DATA",711,20,2)
Zipcode
"DATA",711,20,3)
S DIR(0)="FO^5:10^S XX=$TR(X,""-"","""") I XX'?5N,(XX'?9N) K X"
"DATA",711,20,"T")
S EASRTR=$$ZIP^EASEZT2(EZDATA)
"DATA",711,21,0)
APPLICANT COUNTY^I;9E.^A^^1.0
"DATA",711,21,1)
2^2^.117
"DATA",711,21,2)
County
"DATA",711,21,"T")
S EASRTR=$$UC^EASEZT1(EZDATA),EASRTR=$$COUNTY^EASEZT1(EASAPP,EASRTR)
"DATA",711,22,0)
APPLICANT HOME PHONE AREA CODE^I;10.1^A^^1.0
"DATA",711,22,1)
2^2^.131
"DATA",711,22,2)
Home Phone
"DATA",711,22,3)
S DIR(0)="FO^3:3^K:X'?3N X"
"DATA",711,22,"T")
S EASRTR=$$HOMEPH^EASEZT2(EASAPP,"APPLICANT")
"DATA",711,23,0)
APPLICANT HOME PHONE NUMBER^I;10.2^A^^1.0
"DATA",711,23,1)
2^2^.131
"DATA",711,23,2)
Home Phone
"DATA",711,23,3)
S DIR(0)="FO^8:8^K:X'?3N1""-""4N X"
"DATA",711,24,0)
APPLICANT WORK PHONE AREA CODE^I;11.1^A^^1.0
"DATA",711,24,1)
2^2^.132
"DATA",711,24,2)
Work Phone
"DATA",711,24,3)
S DIR(0)="FO^3:3^K:X'?3N X"
"DATA",711,24,"T")
S EASRTR=$$WORKPH^EASEZT2(EASAPP,"APPLICANT")
"DATA",711,25,0)
APPLICANT WORK PHONE NUMBER^I;11.2^A^^1.0
"DATA",711,25,1)
2^2^.132
"DATA",711,25,2)
Work Phone
"DATA",711,25,3)
S DIR(0)="FO^8:8^K:X'?3N1""-""4N X"
"DATA",711,26,0)
APPLICANT WORK PHONE EXTENSION^I;11.3^A^^1.0
"DATA",711,26,1)
2^2^.132
"DATA",711,26,3)
S DIR(0)="FO^1:5^K:X'?1.N X"
"DATA",711,27,0)
MARITAL STATUS^I;12.^A^^1.0
"DATA",711,27,1)
2^2^.05
"DATA",711,27,2)
Marital Status
"DATA",711,27,"T")
S EASRTR=$$MARR^EASEZT2(EZDATA)
"DATA",711,28,0)
LAST BRANCH OF SERVICE^I;13A.^A^^1.0
"DATA",711,28,1)
2^2^.325
"DATA",711,28,2)
Last Br. of Service
"DATA",711,28,"T")
S EASRTR=$$SVCBRCH^EASEZT2(EZDATA)
"DATA",711,29,0)
LAST ENTRY DATE^I;13B.^A^^1.0
"DATA",711,29,1)
2^2^.326
"DATA",711,29,2)
Last Entry Date
"DATA",711,29,"T")
S EASRTR=$$XDATE^EASEZT1(EZDATA)
"DATA",711,30,0)
LAST DISCHARGE DATE^I;13C.^A^^1.0
"DATA",711,30,1)
2^2^.327
"DATA",711,30,2)
Last Discharge Date
"DATA",711,30,"T")
S EASRTR=$$XDATE^EASEZT1(EZDATA)
"DATA",711,31,0)
LAST DISCHARGE TYPE^I;13D.^A^^1.0
"DATA",711,31,1)
2^2^.324
"DATA",711,31,2)
Discharge Type
"DATA",711,32,0)
SERVICE NUMBER^I;13E.^A^^1.0
"DATA",711,32,1)
2^2^.328
"DATA",711,32,2)
Service Number
"DATA",711,33,0)
PURPLE HEART^I;14A1.^A^^1.0
"DATA",711,33,1)
2^2^.531
"DATA",711,33,2)
Purple Heart?
"DATA",711,33,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,34,0)
PRISONER OF WAR^I;14A2.^A^^1.0
"DATA",711,34,1)
2^2^.525
"DATA",711,34,2)
POW?
"DATA",711,34,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,35,0)
SERVICE-CONNECTED^I;14B.^A^^1.0
"DATA",711,35,1)
2^2^.301
"DATA",711,35,2)
Service-Connected?
"DATA",711,35,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,36,0)
RATED PERCENTAGE^I;14B1.^A^^1.0
"DATA",711,36,1)
2^2^.302
"DATA",711,36,2)
SC %
"DATA",711,37,0)
VA PENSION^I;14C.^A^^1.0
"DATA",711,37,1)
2^2^.36235
"DATA",711,37,2)
VA Pension?
"DATA",711,37,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,38,0)
RETIRED FROM MILITARY^I;14D.^A^^1.0
"DATA",711,38,1)
2^2^.36255
"DATA",711,38,2)
Ret. From Military?
"DATA",711,38,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,39,0)
DISABILITY RETIREMENT FROM MILITARY^I;14D1.^A^^1.0
"DATA",711,39,1)
2^2^.362
"DATA",711,39,2)
Mil. Disab. Ret.?
"DATA",711,39,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,40,0)
REGULAR RETIREMENT FROM MILITARY^I;14D2.^A^^1.0
"DATA",711,40,1)
2^2^.36255
"DATA",711,40,2)
Mil. Regular Ret.?
"DATA",711,40,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,41,0)
TOXINS IN GULF WAR^I;14E.^A^^1.0
"DATA",711,41,1)
2^2^.322013
"DATA",711,41,2)
Gulf War Toxin Exp.?
"DATA",711,41,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,42,0)
AGENT ORANGE^I;14F.^A^^1.0
"DATA",711,42,1)
2^2^.32102
"DATA",711,42,2)
Agent Orange Exp.?
"DATA",711,42,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,43,0)
RADIATION EXPOSURE^I;14G.^A^^1.0
"DATA",711,43,1)
2^2^.32103
"DATA",711,43,2)
Radiation Exp.?
"DATA",711,43,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,44,0)
DENTAL INJURY^I;14H.^A^^1.0
"DATA",711,44,1)
2^2^.368
"DATA",711,44,2)
Mil. Dental Injury?
"DATA",711,44,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,45,0)
SPINAL CORD INJURY^I;14I.^A^^1.0
"DATA",711,45,1)
2^2^57.4
"DATA",711,45,2)
Spinal Cord Injury?
"DATA",711,45,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,46,0)
ELIGIBLE FOR MEDICAID^I;14J.^A^^1.0
"DATA",711,46,1)
2^2^.381
"DATA",711,46,2)
Elig. For Medicaid?
"DATA",711,46,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,47,0)
MEDICARE PART A^I;14K.^A^^1.0
"DATA",711,47,1)
355.33^355.33^20.01
"DATA",711,47,2)
Medicare Part A?
"DATA",711,47,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,47,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,48,0)
MEDICARE PART A EFFECTIVE DATE^I;14K1.^A^^1.0
"DATA",711,48,1)
355.33^355.33^60.02
"DATA",711,48,2)
Part A Effective DT
"DATA",711,48,"T")
S EASRTR=$$XDATE^EASEZT1(EZDATA)
"DATA",711,49,0)
MEDICARE PART B^I;14L.^A^^1.0
"DATA",711,49,1)
355.33^355.33^20.01
"DATA",711,49,2)
Medicare Part B?
"DATA",711,49,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,49,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,50,0)
MEDICARE PART B EFFECTIVE DATE^I;14L1.^A^^1.0
"DATA",711,50,1)
355.33^355.33^60.02
"DATA",711,50,2)
Part B Effective DT
"DATA",711,50,"T")
S EASRTR=$$XDATE^EASEZT1(EZDATA)
"DATA",711,51,0)
MEDICARE CLAIM NUMBER^I;14M.^A^^1.0
"DATA",711,51,1)
0^0^0
"DATA",711,51,2)
Medicare Claim #
"DATA",711,52,0)
SIGNEE ON MEDICARE CARD^I;14N.^A^^1.0
"DATA",711,52,1)
355.33^355.33^60.07
"DATA",711,52,2)
Medicare Card Name
"DATA",711,52,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,53,0)
APPLICANT EMPLOYMENT STATUS^I;15A.1^A^^1.0
"DATA",711,53,1)
2^2^.31115
"DATA",711,53,2)
Emp. Status
"DATA",711,53,"T")
S EASRTR=$$EMPLOY^EASEZT2(EZDATA)
"DATA",711,54,0)
APPLICANT DATE OF RETIREMENT^I;15A.2^A^^2.5
"DATA",711,54,1)
2^2^.31116
"DATA",711,54,2)
Retirement Date
"DATA",711,54,3)
S DIR(0)="D^::AEP"
"DATA",711,54,"T")
S EASRTR=$$XDATE^EASEZT1(EZDATA)
"DATA",711,55,0)
APPLICANT EMPLOYER^I;15B.1^A^^1.0
"DATA",711,55,1)
2^2^.3111
"DATA",711,55,2)
Employer
"DATA",711,55,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,56,0)
APPLICANT EMPLOYER STREET ADDRESS^I;15B.2^A^^1.0
"DATA",711,56,1)
2^2^.3113
"DATA",711,56,2)
Emp. Street Addr.
"DATA",711,56,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,57,0)
APPLICANT EMPLOYER CITY^I;15B.3^A^^1.0
"DATA",711,57,1)
2^2^.3116
"DATA",711,57,2)
Emp. City
"DATA",711,57,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,58,0)
APPLICANT EMPLOYER STATE^I;15B.4^A^^1.0
"DATA",711,58,1)
2^2^.3117
"DATA",711,58,2)
Emp. State
"DATA",711,58,"T")
S EASRTR=$$STATE^EASEZT1(EZDATA)
"DATA",711,59,0)
APPLICANT EMPLOYER ZIP^I;15B.5^A^^1.0
"DATA",711,59,1)
2^2^.2205
"DATA",711,59,2)
Emp. Zip
"DATA",711,59,3)
S DIR(0)="FO^5:10^S XX=$TR(X,""-"","""") I XX'?5N,(XX'?9N) K X"
"DATA",711,59,"T")
S EASRTR=$$ZIP^EASEZT2(EZDATA)
"DATA",711,60,0)
APPLICANT EMPLOYER PHONE AREA CODE^I;15B.6^A^^1.0
"DATA",711,60,1)
2^2^.3119
"DATA",711,60,2)
Emp. Phone Number
"DATA",711,60,3)
S DIR(0)="FO^3:3^K:X'?3N X"
"DATA",711,60,"T")
S EASRTR=$$EMPLPH^EASEZT2(EASAPP,"APPLICANT")
"DATA",711,61,0)
APPLICANT EMPLOYER PHONE NUMBER^I;15B.7^A^^1.0
"DATA",711,61,1)
2^2^.3119
"DATA",711,61,2)
Emp. Phone
"DATA",711,61,3)
S DIR(0)="FO^8:8^K:X'?3N1""-""4N X"
"DATA",711,62,0)
APPLICANT EMPLOYER PHONE EXTENSION^I;15B.8^A^^1.0
"DATA",711,62,1)
2^2^.3119
"DATA",711,62,2)
Emp. Phone Ext.
"DATA",711,62,3)
S DIR(0)="FO^1:5^K:X'?1.N X"
"DATA",711,63,0)
SPOUSE EMPLOYMENT STATUS^I;16A.1^A^^1.0
"DATA",711,63,1)
2^2^.2515
"DATA",711,63,2)
Sp. Empl. Status
"DATA",711,63,"T")
S EASRTR=$$EMPLOY^EASEZT2(EZDATA)
"DATA",711,64,0)
SPOUSE DATE OF RETIREMENT^I;16A.2^A^^2.5
"DATA",711,64,1)
2^2^.2516
"DATA",711,64,2)
Sp. Retirement Date
"DATA",711,64,3)
S DIR(0)="D^::AEP"
"DATA",711,64,"T")
S EASRTR=$$XDATE^EASEZT1(EZDATA)
"DATA",711,65,0)
SPOUSE EMPLOYER^I;16B.1^A^^1.0
"DATA",711,65,1)
2^2^.251
"DATA",711,65,2)
Sp. Employer
"DATA",711,65,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,66,0)
SPOUSE EMPLOYER STREET ADDRESS^I;16B.2^A^^1.0
"DATA",711,66,1)
2^2^.252
"DATA",711,66,2)
Sp. Empl. Street Addr.
"DATA",711,66,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,67,0)
SPOUSE EMPLOYER CITY^I;16B.3^A^^1.0
"DATA",711,67,1)
2^2^.255
"DATA",711,67,2)
Sp. Employer City
"DATA",711,67,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,68,0)
SPOUSE EMPLOYER STATE^I;16B.4^A^^1.0
"DATA",711,68,1)
2^2^.256
"DATA",711,68,2)
Sp. Employer State
"DATA",711,68,"T")
S EASRTR=$$STATE^EASEZT1(EZDATA)
"DATA",711,69,0)
SPOUSE EMPLOYER ZIP^I;16B.5^A^^1.0
"DATA",711,69,1)
2^2^.2206
"DATA",711,69,2)
Sp. Employer Zip
"DATA",711,69,3)
S DIR(0)="FO^5:10^S XX=$TR(X,""-"","""") I XX'?5N,(XX'?9N) K X"
"DATA",711,69,"T")
S EASRTR=$$ZIP^EASEZT2(EZDATA)
"DATA",711,70,0)
SPOUSE EMPLOYER PHONE AREA CODE^I;16B.6^A^^1.0
"DATA",711,70,1)
2^2^.258
"DATA",711,70,2)
Sp. Employer Phone Number
"DATA",711,70,3)
S DIR(0)="FO^3:3^K:X'?3N X"
"DATA",711,70,"T")
S EASRTR=$$EMPLPH^EASEZT2(EASAPP,"SPOUSE")
"DATA",711,71,0)
SPOUSE EMPLOYER PHONE NUMBER^I;16B.7^A^^1.0
"DATA",711,71,1)
2^2^.258
"DATA",711,71,2)
Sp. Employer Phone
"DATA",711,71,3)
S DIR(0)="FO^8:8^K:X'?3N1""-""4N X"
"DATA",711,72,0)
SPOUSE EMPLOYER PHONE EXTENSION^I;16B.8^A^^1.0
"DATA",711,72,1)
2^2^.258
"DATA",711,72,2)
Sp. Employer Phone Ext.
"DATA",711,72,3)
S DIR(0)="FO^1:5^K:X'?1.N X"
"DATA",711,73,0)
APPLICANT HAS INSURANCE^I;17.^A^^1.0
"DATA",711,73,1)
0^0^0
"DATA",711,73,2)
Health Insurance?
"DATA",711,73,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,73,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,74,0)
APPLICANT INSURANCE COMPANY^I;17A.^A^^1.0
"DATA",711,74,1)
355.33^355.33^20.01
"DATA",711,74,2)
Health Insurer
"DATA",711,74,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,75,0)
APPLICANT INSURANCE POLICY HOLDER^I;17B.^A^^1.0
"DATA",711,75,1)
355.33^355.33^60.07
"DATA",711,75,2)
Policy Holder Name
"DATA",711,75,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,76,0)
APPLICANT INSURANCE POLICY NUMBER^I;17C.^A^^1.0
"DATA",711,76,1)
355.33^355.33^60.04
"DATA",711,76,2)
Policy #
"DATA",711,76,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,77,0)
APPLICANT INSURANCE GROUP CODE^I;17D.^A^^1.0
"DATA",711,77,1)
355.33^355.33^40.03
"DATA",711,77,2)
Group Code
"DATA",711,77,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,78,0)
SPOUSE HAS INSURANCE^I;18.^A^^1.0
"DATA",711,78,1)
0^0^0
"DATA",711,78,2)
Sp. Health Ins.?
"DATA",711,78,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,78,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,79,0)
SPOUSE INSURANCE COMPANY^I;18A.^A^^1.0
"DATA",711,79,1)
355.33^355.33^20.01
"DATA",711,79,2)
Sp. Insurance Co.
"DATA",711,79,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,80,0)
SPOUSE INSURANCE POLICY HOLDER^I;18B.^A^^1.0
"DATA",711,80,1)
355.33^355.33^60.07
"DATA",711,80,2)
Sp. Pol. Holder Name
"DATA",711,80,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,81,0)
SPOUSE INSURANCE POLICY NUMBER^I;18C.^A^^1.0
"DATA",711,81,1)
355.33^355.33^60.04
"DATA",711,81,2)
Sp. Policy #
"DATA",711,81,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,82,0)
SPOUSE INSURANCE GROUP CODE^I;18D.^A^^1.0
"DATA",711,82,1)
355.33^355.33^40.03
"DATA",711,82,2)
Sp. Group Code
"DATA",711,82,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,83,0)
NEXT-OF-KIN LAST NAME^I;19A.1^A^^1.0
"DATA",711,83,1)
2^2^.211
"DATA",711,83,2)
NOK Name
"DATA",711,83,3)
S DIR(0)="FO^1:50^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,83,"T")
S EASRTR=$$NAME^EASEZT1(EASAPP,"NEXT-OF-KIN",EASMULT)
"DATA",711,84,0)
NEXT-OF-KIN FIRST NAME^I;19A.2^A^^1.0
"DATA",711,84,1)
2^2^.211
"DATA",711,84,3)
S DIR(0)="FO^1:25^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,85,0)
NEXT-OF-KIN STREET ADDRESS^I;19A.3^A^^1.0
"DATA",711,85,1)
2^2^.213
"DATA",711,85,2)
NOK Street Address
"DATA",711,85,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,86,0)
NEXT-OF-KIN CITY^I;19A.4^A^^1.0
"DATA",711,86,1)
2^2^.216
"DATA",711,86,2)
NOK City
"DATA",711,86,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,87,0)
NEXT-OF-KIN STATE^I;19A.5^A^^1.0
"DATA",711,87,1)
2^2^.217
"DATA",711,87,2)
NOK State
"DATA",711,87,"T")
S EASRTR=$$STATE^EASEZT1(EZDATA)
"DATA",711,88,0)
NEXT-OF-KIN ZIP^I;19A.6^A^^1.0
"DATA",711,88,1)
2^2^.2207
"DATA",711,88,2)
NOK Zipcode
"DATA",711,88,3)
S DIR(0)="FO^5:10^S XX=$TR(X,""-"","""") I XX'?5N,(XX'?9N) K X"
"DATA",711,88,"T")
S EASRTR=$$ZIP^EASEZT2(EZDATA)
"DATA",711,89,0)
NEXT-OF-KIN RELATIONSHIP^I;19A.7^A^^1.0
"DATA",711,89,1)
2^2^.212
"DATA",711,89,2)
NOK Relationship
"DATA",711,89,3)
S DIR(0)="S^1:SELF;2:SPOUSE;3:SON;4:DAUGHTER;5:FATHER;6:MOTHER;99:OTHER"
"DATA",711,89,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,90,0)
NEXT-OF-KIN HOME PHONE AREA CODE^I;19B.1^A^^1.0
"DATA",711,90,1)
2^2^.219
"DATA",711,90,2)
NOK Home Phone
"DATA",711,90,3)
S DIR(0)="FO^3:3^K:X'?3N X"
"DATA",711,90,"T")
S EASRTR=$$HOMEPH^EASEZT2(EASAPP,"NEXT-OF-KIN")
"DATA",711,91,0)
NEXT-OF-KIN HOME PHONE NUMBER^I;19B.2^A^^1.0
"DATA",711,91,1)
2^2^.219
"DATA",711,91,2)
NOK Home Phone
"DATA",711,91,3)
S DIR(0)="FO^8:8^K:X'?3N1""-""4N X"
"DATA",711,92,0)
NEXT-OF-KIN WORK PHONE AREA CODE^I;19C.1^A^^1.0
"DATA",711,92,1)
2^2^.21011
"DATA",711,92,2)
NOK Work Phone
"DATA",711,92,3)
S DIR(0)="FO^3:3^K:X'?3N X"
"DATA",711,92,"T")
S EASRTR=$$WORKPH^EASEZT2(EASAPP,"NEXT-OF-KIN")
"DATA",711,93,0)
NEXT-OF-KIN WORK PHONE NUMBER^I;19C.2^A^^1.0
"DATA",711,93,1)
2^2^.21011
"DATA",711,93,2)
NOK Work Phone
"DATA",711,93,3)
S DIR(0)="FO^8:8^K:X'?3N1""-""4N X"
"DATA",711,94,0)
NEXT-OF-KIN WORK PHONE EXTENSION^I;19C.3^A^^1.0
"DATA",711,94,1)
2^2^.21011
"DATA",711,94,3)
S DIR(0)="FO^1:5^K:X'?1.N X"
"DATA",711,95,0)
E-CONTACT LAST NAME^I;20A.1^A^^1.0
"DATA",711,95,1)
2^2^.331
"DATA",711,95,2)
E-Cont. Name
"DATA",711,95,3)
S DIR(0)="FO^1:50^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,95,"T")
S EASRTR=$$NAME^EASEZT1(EASAPP,"E-CONTACT",EASMULT)
"DATA",711,96,0)
E-CONTACT FIRST NAME^I;20A.2^A^^1.0
"DATA",711,96,1)
2^2^.331
"DATA",711,96,2)
E-Cont. First Name
"DATA",711,96,3)
S DIR(0)="FO^1:25^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,97,0)
E-CONTACT STREET ADDRESS^I;20A.3^A^^1.0
"DATA",711,97,1)
2^2^.333
"DATA",711,97,2)
E-Cont. Street Addr.
"DATA",711,97,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,98,0)
E-CONTACT CITY^I;20A.4^A^^1.0
"DATA",711,98,1)
2^2^.336
"DATA",711,98,2)
E-Cont. City
"DATA",711,98,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,99,0)
E-CONTACT STATE^I;20A.5^A^^1.0
"DATA",711,99,1)
2^2^.337
"DATA",711,99,2)
E-Cont. State
"DATA",711,99,"T")
S EASRTR=$$STATE^EASEZT1(EZDATA)
"DATA",711,100,0)
E-CONTACT ZIP^I;20A.6^A^^1.0
"DATA",711,100,1)
2^2^.2201
"DATA",711,100,2)
E-Cont. Zip
"DATA",711,100,3)
S DIR(0)="FO^5:10^S XX=$TR(X,""-"","""") I XX'?5N,(XX'?9N) K X"
"DATA",711,100,"T")
S EASRTR=$$ZIP^EASEZT2(EZDATA)
"DATA",711,101,0)
E-CONTACT RELATIONSHIP^I;20A.7^A^^1.0
"DATA",711,101,1)
2^2^.332
"DATA",711,101,2)
E-Cont. Relationship
"DATA",711,101,3)
S DIR(0)="S^1:SELF;2:SPOUSE;3:SON;4:DAUGHTER;5:FATHER;6:MOTHER;99:OTHER"
"DATA",711,101,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,102,0)
E-CONTACT HOME PHONE AREA CODE^I;20B.1^A^^1.0
"DATA",711,102,1)
2^2^.339
"DATA",711,102,2)
E-Cont. Home Phone
"DATA",711,102,3)
S DIR(0)="FO^3:3^K:X'?3N X"
"DATA",711,102,"T")
S EASRTR=$$HOMEPH^EASEZT2(EASAPP,"E-CONTACT")
"DATA",711,103,0)
E-CONTACT HOME PHONE NUMBER^I;20B.2^A^^1.0
"DATA",711,103,1)
2^2^.339
"DATA",711,103,2)
E-Cont. Home Phone
"DATA",711,103,3)
S DIR(0)="FO^8:8^K:X'?3N1""-""4N X"
"DATA",711,104,0)
E-CONTACT WORK PHONE AREA CODE^I;20C.1^A^^1.0
"DATA",711,104,1)
2^2^.33011
"DATA",711,104,2)
E-Cont. Work Number
"DATA",711,104,3)
S DIR(0)="FO^3:3^K:X'?3N X"
"DATA",711,104,"T")
S EASRTR=$$WORKPH^EASEZT2(EASAPP,"E-CONTACT")
"DATA",711,105,0)
E-CONTACT WORK PHONE NUMBER^I;20C.2^A^^1.0
"DATA",711,105,1)
2^2^.33011
"DATA",711,105,2)
E-Cont. Work Phone
"DATA",711,105,3)
S DIR(0)="FO^8:8^K:X'?3N1""-""4N X"
"DATA",711,106,0)
E-CONTACT WORK PHONE EXTENSION^I;20C.3^A^^1.0
"DATA",711,106,1)
2^2^.33011
"DATA",711,106,2)
E-Cont. Work Ext.
"DATA",711,106,3)
S DIR(0)="FO^1:5^K:X'?1.N X"
"DATA",711,107,0)
DESIGNEE^I;21.^A^^1.0
"DATA",711,107,1)
2^2^.3405
"DATA",711,107,2)
Designee
"DATA",711,107,3)
S DIR(0)="SM^N:NEXT OF KIN;E:EMERGENCY CONTACT"
"DATA",711,108,0)
NEED RELATED TO JOB INJURY^I;22A.^A^^1.0
"DATA",711,108,1)
0^0^0
"DATA",711,108,2)
Need Due to Job Inj.?
"DATA",711,108,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,109,0)
NEED RELATED TO ACCIDENT^I;22B.^A^^1.0
"DATA",711,109,1)
0^0^0
"DATA",711,109,2)
Need Due to Accid.?
"DATA",711,109,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,110,0)
SPOUSE LAST NAME^IIA;1.1^A^^1.0
"DATA",711,110,1)
408.13^408.13^.01
"DATA",711,110,2)
Sp. Name
"DATA",711,110,3)
S DIR(0)="FO^1:50^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,110,"T")
S EASRTR=$$NAME^EASEZT1(EASAPP,"SPOUSE",EASMULT)
"DATA",711,111,0)
SPOUSE FIRST NAME^IIA;1.2^A^^1.0
"DATA",711,111,1)
408.13^408.13^.01
"DATA",711,111,2)
Sp. First Name
"DATA",711,111,3)
S DIR(0)="FO^1:25^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,112,0)
SPOUSE MIDDLE NAME^IIA;1.3^A^^1.0
"DATA",711,112,1)
408.13^408.13^.01
"DATA",711,112,3)
S DIR(0)="FO^1:25^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,113,0)
SPOUSE SUFFIX NAME^IIA;1.4^A^^1.0
"DATA",711,113,1)
408.13^408.13^.01
"DATA",711,113,3)
S DIR(0)="FO^1:6^K:X'?1.A X"
"DATA",711,114,0)
CHILD1 LAST NAME^IIA;2.1^A^^1.0
"DATA",711,114,1)
408.13^408.13^.01
"DATA",711,114,2)
Child Name
"DATA",711,114,3)
S DIR(0)="FO^1:50^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,114,"T")
S EASRTR=$$NAME^EASEZT1(EASAPP,"CHILD1",EASMULT)
"DATA",711,115,0)
CHILD1 FIRST NAME^IIA;2.2^A^^1.0
"DATA",711,115,1)
408.13^408.13^.01
"DATA",711,115,3)
S DIR(0)="FO^1:25^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,116,0)
CHILD1 MIDDLE NAME^IIA;2.3^A^^1.0
"DATA",711,116,1)
408.13^408.13^.01
"DATA",711,116,3)
S DIR(0)="FO^1:25^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,117,0)
CHILD1 SUFFIX NAME^IIA;2.4^A^^1.0
"DATA",711,117,1)
408.13^408.13^.01
"DATA",711,117,3)
S DIR(0)="FO^1:6^K:X'?1.A X"
"DATA",711,118,0)
SPOUSE SOCIAL SECURITY NUMBER^IIA;3.^A^^1.0
"DATA",711,118,1)
408.13^408.13^.09
"DATA",711,118,2)
Sp. SSN
"DATA",711,118,3)
S DIR(0)="F^11:11^K:X'?3N1""-""2N1""-""4N X",DIR("?")="Use format nnn-nnn-nnn.  Example: ***********"
"DATA",711,118,"T")
S EASRTR=$$SSNOUT^EASEZT1(EZDATA)
"DATA",711,119,0)
SPOUSE DATE OF BIRTH^IIA;4.^A^^1.0
"DATA",711,119,1)
408.13^408.13^.03
"DATA",711,119,2)
Sp. DOB
"DATA",711,119,"T")
S EASRTR=$$XDATE^EASEZT1(EZDATA)
"DATA",711,120,0)
CHILD1 DATE OF BIRTH^IIA;5.^A^^1.0
"DATA",711,120,1)
408.13^408.13^.03
"DATA",711,120,2)
Child DOB
"DATA",711,120,"T")
S EASRTR=$$XDATE^EASEZT1(EZDATA)
"DATA",711,121,0)
SPOUSE STREET^IIA;6.1^A^^2.5
"DATA",711,121,1)
408.13^408.13^1.2
"DATA",711,121,2)
Sp. Street Addr.
"DATA",711,121,3)
S DIR(0)="F^3:35"
"DATA",711,121,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,122,0)
SPOUSE CITY^IIA;6.2^A^^2.5
"DATA",711,122,1)
408.13^408.13^1.5
"DATA",711,122,2)
Sp. City
"DATA",711,122,3)
S DIR(0)="F^2:15"
"DATA",711,122,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,123,0)
SPOUSE STATE^IIA;6.3^A^^2.5
"DATA",711,123,1)
408.13^408.13^1.6
"DATA",711,123,2)
Sp. State
"DATA",711,123,"T")
S EASRTR=$$STATE^EASEZT1(EZDATA)
"DATA",711,124,0)
SPOUSE ZIP^IIA;6.4^A^^2.5
"DATA",711,124,1)
408.13^408.13^1.7
"DATA",711,124,2)
Sp. Zip
"DATA",711,124,3)
S DIR(0)="FO^5:10^S XX=$TR(X,""-"","""") I XX'?5N,(XX'?9N) K X"
"DATA",711,124,"T")
S EASRTR=$$ZIP^EASEZT2(EZDATA)
"DATA",711,125,0)
CHILD1 SOCIAL SECURITY NUMBER^IIA;7.^A^^1.0
"DATA",711,125,1)
408.13^408.13^.09
"DATA",711,125,2)
Child SSN
"DATA",711,125,3)
S DIR(0)="F^11:11^K:X'?3N1""-""2N1""-""4N X",DIR("?")="Use format nnn-nnn-nnn.  Example: ***********"
"DATA",711,125,"T")
S EASRTR=$$SSNOUT^EASEZT1(EZDATA)
"DATA",711,126,0)
SPOUSE HOME PHONE AREA CODE^IIA;8.1^A^^2.5
"DATA",711,126,1)
408.13^408.13^1.8
"DATA",711,126,2)
Sp. Home Phone
"DATA",711,126,3)
S DIR(0)="FO^3:3^K:X'?3N X"
"DATA",711,126,"T")
S EASRTR=$$HOMEPH^EASEZT2(EASAPP,"SPOUSE")
"DATA",711,127,0)
SPOUSE HOME PHONE NUMBER^IIA;8.2^A^^2.5
"DATA",711,127,1)
408.13^408.13^1.8
"DATA",711,127,2)
Sp. Home Phone
"DATA",711,127,3)
S DIR(0)="FO^8:8^K:X'?3N1""-""4N X"
"DATA",711,128,0)
CHILD1 RELATIONSHIP^IIA;9.^A^^1.0
"DATA",711,128,1)
408.12^408.12^.02
"DATA",711,128,2)
Child Relationship
"DATA",711,128,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,129,0)
DATE OF MARRIAGE TO SPOUSE^IIA;10.^A^^1.0
"DATA",711,129,1)
408.12^408.1275^.01
"DATA",711,129,2)
Sp. Effective Date
"DATA",711,129,"T")
S EASRTR=$$XDATE^EASEZT1(EZDATA)
"DATA",711,130,0)
DATE CHILD1 BECAME DEPENDENT^IIA;11.^A^^1.0
"DATA",711,130,1)
408.12^408.1275^.01
"DATA",711,130,2)
Child Effective Date
"DATA",711,130,"T")
S EASRTR=$$XDATE^EASEZT1(EZDATA)
"DATA",711,131,0)
AMOUNT CONTRIBUTED TO SP^IIA;12.1^A^^1.0
"DATA",711,131,1)
408.22^408.22^.07
"DATA",711,131,2)
Amt To Sp. Support
"DATA",711,131,3)
D H07^EASEZDD
"DATA",711,132,0)
AMOUNT CONTRIBUTED TO CHILD1^IIA;12.2^A^^1.0
"DATA",711,132,1)
408.22^408.22^.19
"DATA",711,132,2)
Amt To Child Support
"DATA",711,132,3)
D H19^EASEZDD
"DATA",711,133,0)
CHILD1 EDUCATION EXPENSES^IIA;13.^A^^1.0
"DATA",711,133,1)
408.21^408.21^1.03
"DATA",711,133,2)
Ed. $ Paid by Child
"DATA",711,134,0)
CHILD1 PERMANENTLY DISABLED^IIA;14.^A^^1.0
"DATA",711,134,1)
408.22^408.22^.09
"DATA",711,134,2)
Child Perm. Disab.?
"DATA",711,134,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,135,0)
CHILD1 18-23 IN SCHOOL^IIA;15.^A^^2.5
"DATA",711,135,1)
408.22^408.22^.18
"DATA",711,135,2)
Age 18-23 in School?
"DATA",711,135,3)
D H18^EASEZDD
"DATA",711,135,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,136,0)
CHILD(N) LAST NAME^IIB;1.1^A^^1.0
"DATA",711,136,1)
408.13^408.13^.01
"DATA",711,136,2)
Child Name
"DATA",711,136,3)
S DIR(0)="FO^1:50^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,136,"T")
S EASRTR=$$NAME^EASEZT1(EASAPP,"CHILD(N)",EASMULT)
"DATA",711,137,0)
CHILD(N) FIRST NAME^IIB;1.2^A^^1.0
"DATA",711,137,1)
408.13^408.13^.01
"DATA",711,137,3)
S DIR(0)="FO^1:25^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,138,0)
CHILD(N) MIDDLE NAME^IIB;1.3^A^^1.0
"DATA",711,138,1)
408.13^408.13^.01
"DATA",711,138,3)
S DIR(0)="FO^1:25^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,139,0)
CHILD(N) SUFFIX NAME^IIB;1.4^A^^1.0
"DATA",711,139,1)
408.13^408.13^.01
"DATA",711,139,3)
S DIR(0)="FO^1:6^K:X'?1.A X"
"DATA",711,140,0)
CHILD(N) SOCIAL SECURITY NUMBER^IIB;2.^A^^1.0
"DATA",711,140,1)
408.13^408.13^.09
"DATA",711,140,2)
Child SSN
"DATA",711,140,3)
S DIR(0)="F^11:11^K:X'?3N1""-""2N1""-""4N X",DIR("?")="Use format nnn-nnn-nnn.  Example: ***********"
"DATA",711,140,"T")
S EASRTR=$$SSNOUT^EASEZT1(EZDATA)
"DATA",711,141,0)
CHILD(N) DATE OF BIRTH^IIB;3.^A^^1.0
"DATA",711,141,1)
408.13^408.13^.03
"DATA",711,141,2)
Child DOB
"DATA",711,141,"T")
S EASRTR=$$XDATE^EASEZT1(EZDATA)
"DATA",711,142,0)
CHILD(N) RELATIONSHIP^IIB;4.^A^^1.0
"DATA",711,142,1)
408.12^408.12^.02
"DATA",711,142,2)
Child Relationship
"DATA",711,142,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,143,0)
DATE CHILD(N) BECAME DEPENDENT^IIB;5.^A^^1.0
"DATA",711,143,1)
408.12^408.1275^.01
"DATA",711,143,2)
Child Effective Date
"DATA",711,143,"T")
S EASRTR=$$XDATE^EASEZT1(EZDATA)
"DATA",711,144,0)
AMOUNT CONTRIBUTED TO CHILD(N)^IIB;6.^A^^3.0
"DATA",711,144,1)
408.22^408.22^.19
"DATA",711,144,2)
Amt To Child Support
"DATA",711,144,3)
D H19^EASEZDD
"DATA",711,145,0)
CHILD(N) EDUCATION EXPENSES^IIB;7.^A^^1.0
"DATA",711,145,1)
408.21^408.21^1.03
"DATA",711,145,2)
Ed. $ Paid by Child
"DATA",711,146,0)
CHILD(N) PERMANENTLY DISABLED^IIB;8.^A^^1.0
"DATA",711,146,1)
408.22^408.22^.09
"DATA",711,146,2)
Child Perm. Disab.?
"DATA",711,146,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,147,0)
CHILD(N) 18-23 IN SCHOOL^IIB;9.^A^^2.5
"DATA",711,147,1)
408.22^408.22^.18
"DATA",711,147,2)
Age 18-23 in School?
"DATA",711,147,3)
D H18^EASEZDD
"DATA",711,147,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,148,0)
APPLICANT GROSS ANNUAL INCOME^IIC;1.1^A^^1.0
"DATA",711,148,1)
408.21^408.21^.14
"DATA",711,148,2)
Gross Annual Inc.
"DATA",711,149,0)
SPOUSE GROSS ANNUAL INCOME^IIC;1.2^A^^1.0
"DATA",711,149,1)
408.21^408.21^.14
"DATA",711,149,2)
Gross Ann. Inc. (Sp)
"DATA",711,150,0)
CHILD1 GROSS ANNUAL INCOME^IIC;1.3^A^^1.0
"DATA",711,150,1)
408.21^408.21^.14
"DATA",711,150,2)
Gross Ann. Inc. (Ch)
"DATA",711,151,0)
APPLICANT OTHER INCOME^IIC;2.1^A^^2.5
"DATA",711,151,1)
408.21^408.21^.08
"DATA",711,151,2)
Other Income
"DATA",711,152,0)
SPOUSE OTHER INCOME^IIC;2.2^A^^2.5
"DATA",711,152,1)
408.21^408.21^.08
"DATA",711,152,2)
Other Income (Sp)
"DATA",711,153,0)
CHILD1 OTHER INCOME^IIC;2.3^A^^2.5
"DATA",711,153,1)
408.21^408.21^.08
"DATA",711,153,2)
Other Income (Ch+)
"DATA",711,154,0)
APPLICANT FARM OR BUSINESS^IIC;3.^A^^1.0
"DATA",711,154,1)
0^0^0
"DATA",711,154,2)
Farm/Bus. Income?
"DATA",711,154,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,154,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,155,0)
APPLICANT MEDICAL EXPENSES^IID;1.^A^^3.0
"DATA",711,155,1)
408.21^408.21^1.12
"DATA",711,155,2)
Gross Medical Exp.
"DATA",711,155,3)
D H112^EASEZDD
"DATA",711,156,0)
APPLICANT FUNERAL EXPENSES^IID;2.^A^^1.0
"DATA",711,156,1)
408.21^408.21^1.02
"DATA",711,156,2)
Funeral Expenses
"DATA",711,157,0)
APPLICANT EDUCATION EXPENSES^IID;3.^A^^1.0
"DATA",711,157,1)
408.21^408.21^1.03
"DATA",711,157,2)
Education Expenses
"DATA",711,158,0)
APPLICANT CASH IN BANK^IIE;1.1^A^^1.0
"DATA",711,158,1)
408.21^408.21^2.01
"DATA",711,158,2)
Cash in Bank
"DATA",711,158,3)
S DIR("?")="This response must be a number.  The Cash in Bank value represents the cash in bank dollar amount of the veteran PLUS the cash in bank dollar amounts of all the children."
"DATA",711,159,0)
SPOUSE CASH IN BANK^IIE;1.2^A^^1.0
"DATA",711,159,1)
408.21^408.21^2.01
"DATA",711,159,2)
Cash in Bank (Sp.)
"DATA",711,160,0)
APPLICANT REAL PROPERTY LESS MORTGAGES^IIE;2.1^A^^1.0
"DATA",711,160,1)
408.21^408.21^2.03
"DATA",711,160,2)
Real Property
"DATA",711,160,3)
S DIR("?")="This response must be a number.  The Real Property value represents the real property amount of the veteran PLUS the real property amounts of all the children."
"DATA",711,161,0)
SPOUSE REAL PROPERTY LESS MORTGAGES^IIE;2.2^A^^1.0
"DATA",711,161,1)
408.21^408.21^2.03
"DATA",711,161,2)
Real Property (Sp.)
"DATA",711,162,0)
APPLICANT STOCKS BONDS ASSETS LESS DEBTS^IIE;3.1^A^^1.0
"DATA",711,162,1)
408.21^408.21^2.04
"DATA",711,162,2)
Other Property
"DATA",711,162,3)
S DIR("?")="This response must be a number.  The Other Property value represents the other property amount of the veteran PLUS the other property amounts of all the children."
"DATA",711,163,0)
SPOUSE STOCKS BONDS ASSETS LESS DEBTS^IIE;3.2^A^^1.0
"DATA",711,163,1)
408.21^408.21^2.04
"DATA",711,163,2)
Other Property (Sp.)
"DATA",711,164,0)
DESIGNEE LAST NAME^I;21A.1^A^^1.0
"DATA",711,164,1)
2^2^.341
"DATA",711,164,2)
Designee Name
"DATA",711,164,3)
S DIR(0)="FO^1:50^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,164,"T")
S EASRTR=$$NAME^EASEZT1(EASAPP,"DESIGNEE",EASMULT)
"DATA",711,165,0)
DESIGNEE FIRST NAME^I;21A.2^A^^1.0
"DATA",711,165,1)
2^2^.341
"DATA",711,165,3)
S DIR(0)="FO^1:25^I X'?1.A,X'?1.A1""-""1.A,X'?1.A1"" ""1.A K X"
"DATA",711,166,0)
DESIGNEE STREET ADDRESS^I;21A.3^A^^1.0
"DATA",711,166,1)
2^2^.343
"DATA",711,166,2)
Designee Street Address
"DATA",711,166,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,167,0)
DESIGNEE CITY^I;21A.4^A^^1.0
"DATA",711,167,1)
2^2^.346
"DATA",711,167,2)
Designee City
"DATA",711,167,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,168,0)
DESIGNEE STATE^I;21A.5^A^^1.0
"DATA",711,168,1)
2^2^.347
"DATA",711,168,2)
Designee State
"DATA",711,168,"T")
S EASRTR=$$STATE^EASEZT1(EZDATA)
"DATA",711,169,0)
DESIGNEE ZIP^I;21A.6^A^^1.0
"DATA",711,169,1)
2^2^.2202
"DATA",711,169,2)
Designee Zipcode
"DATA",711,169,3)
S DIR(0)="FO^5:10^S XX=$TR(X,""-"","""") I XX'?5N,(XX'?9N) K X"
"DATA",711,169,"T")
S EASRTR=$$ZIP^EASEZT2(EZDATA)
"DATA",711,170,0)
DESIGNEE RELATIONSHIP^I;21A.7^A^^1.0
"DATA",711,170,1)
2^2^.342
"DATA",711,170,2)
Designee Relationship
"DATA",711,170,3)
S DIR(0)="S^1:SELF;2:SPOUSE;3:SON;4:DAUGHTER;5:FATHER;6:MOTHER;99:OTHER"
"DATA",711,170,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,171,0)
DESIGNEE HOME PHONE AREA CODE^I;21B.1^A^^1.0
"DATA",711,171,1)
2^2^.349
"DATA",711,171,2)
Designee Home Phone
"DATA",711,171,3)
S DIR(0)="FO^3:3^K:X'?3N X"
"DATA",711,171,"T")
S EASRTR=$$HOMEPH^EASEZT2(EASAPP,"DESIGNEE")
"DATA",711,172,0)
DESIGNEE HOME PHONE NUMBER^I;21B.2^A^^1.0
"DATA",711,172,1)
2^2^.349
"DATA",711,172,2)
Designee Home Phone
"DATA",711,172,3)
S DIR(0)="FO^8:8^K:X'?3N1""-""4N X"
"DATA",711,173,0)
DESIGNEE WORK PHONE AREA CODE^I;21C.1^A^^1.0
"DATA",711,173,1)
2^2^.34011
"DATA",711,173,2)
Designee Work Phone
"DATA",711,173,3)
S DIR(0)="FO^3:3^K:X'?3N X"
"DATA",711,173,"T")
S EASRTR=$$WORKPH^EASEZT2(EASAPP,"DESIGNEE")
"DATA",711,174,0)
DESIGNEE WORK PHONE NUMBER^I;21C.2^A^^1.0
"DATA",711,174,1)
2^2^.34011
"DATA",711,174,2)
Designee Work Phone
"DATA",711,174,3)
S DIR(0)="FO^8:8^K:X'?3N1""-""4N X"
"DATA",711,175,0)
DESIGNEE WORK PHONE EXTENSION^I;21C.3^A^^1.0
"DATA",711,175,1)
2^2^.34011
"DATA",711,175,3)
S DIR(0)="FO^1:5^K:X'?1.N X"
"DATA",711,176,0)
APPLICANT MOTHER MAIDEN NAME^I;3A.^A^^2.5
"DATA",711,176,1)
2^2^.2403
"DATA",711,176,2)
Mother's Maiden Name
"DATA",711,176,3)
S DIR(0)="F^2:35"
"DATA",711,176,"T")
S EASRTR=$$LAST^EASEZT1(EZDATA)
"DATA",711,177,0)
APPLICANT SPANISH, HISPANIC, OR LATIN^I;4A.^A^^2.5
"DATA",711,177,1)
2^2.06^.01
"DATA",711,177,2)
Span/Hisp/Latino?
"DATA",711,177,3)
S DIR(0)="S^Y:YES;N:NO;U:UNKNOWN"
"DATA",711,177,"T")
S EASRTR=$$ETHNIC^EASEZT1(EZDATA)
"DATA",711,178,0)
APPLICANT RACE - AMERICAN INDIAN OR ALASKA NATIVE^I;4B.^A^^2.5
"DATA",711,178,1)
2^2.02^.01
"DATA",711,178,2)
Am. Indian/AK Native?
"DATA",711,178,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,178,"T")
S EASRTR=$$RACE^EASEZT1(EZDATA)
"DATA",711,179,0)
APPLICANT RACE - BLACK OR AFRICAN AMERICAN^I;4C.^A^^2.5
"DATA",711,179,1)
2^2.02^.01
"DATA",711,179,2)
Black/African Am.?
"DATA",711,179,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,179,"T")
S EASRTR=$$RACE^EASEZT1(EZDATA)
"DATA",711,180,0)
APPLICANT RACE - NATIVE HAWAIIAN OR OTHER PACIFIC^I;4D.^A^^2.5
"DATA",711,180,1)
2^2.02^.01
"DATA",711,180,2)
Hawaiian/Pac. Isl.?
"DATA",711,180,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,180,"T")
S EASRTR=$$RACE^EASEZT1(EZDATA)
"DATA",711,181,0)
APPLICANT RACE - ASIAN^I;4E.^A^^2.5
"DATA",711,181,1)
2^2.02^.01
"DATA",711,181,2)
Asian?
"DATA",711,181,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,181,"T")
S EASRTR=$$RACE^EASEZT1(EZDATA)
"DATA",711,182,0)
APPLICANT RACE - WHITE^I;4F.^A^^2.5
"DATA",711,182,1)
2^2.02^.01
"DATA",711,182,2)
White?
"DATA",711,182,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,182,"T")
S EASRTR=$$RACE^EASEZT1(EZDATA)
"DATA",711,183,0)
APPLICANT RACE - UNANSWERED^I;4G.^A^^2.5
"DATA",711,183,1)
2^2.02^.01
"DATA",711,183,2)
Race - Unanswered
"DATA",711,183,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,183,"T")
S EASRTR=$$RACE^EASEZT1(EZDATA)
"DATA",711,184,0)
APPLICANT PLACE OF BIRTH CITY^I;8A.^A^^2.5
"DATA",711,184,1)
2^2^.092
"DATA",711,184,2)
Place of Birth City
"DATA",711,184,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,185,0)
APPLICANT PLACE OF BIRTH STATE^I;8B.^A^^2.5
"DATA",711,185,1)
2^2^.093
"DATA",711,185,2)
Place of Birth State
"DATA",711,185,"T")
S EASRTR=$$STATE^EASEZT1(EZDATA)
"DATA",711,186,0)
SEEN AT VA LOCATION^I;11D.^A^^2.5
"DATA",711,186,1)
2^2^1010.152
"DATA",711,186,2)
Seen at VA Location
"DATA",711,186,3)
S DIR(0)="P^4:EMZ"
"DATA",711,186,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,187,0)
SEEN AT VA MED FACILITY^I;11C.^A^^2.5
"DATA",711,187,1)
2^2^1010.15
"DATA",711,187,2)
Seen at VA Med. Fac
"DATA",711,187,3)
S DIR(0)="S^Y:YES;N:NO"
"DATA",711,187,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,188,0)
EMAIL^I;11A.^A^^2.5
"DATA",711,188,1)
2^2^.133
"DATA",711,188,2)
Email
"DATA",711,189,0)
APPOINTMENT REQUESTED^I;11B.^A^^2.5
"DATA",711,189,1)
2^2^1010.159
"DATA",711,189,2)
Appointment Request
"DATA",711,189,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,190,0)
COMBAT AFTER 11/11/1998^I;14B2.^A^^2.5
"DATA",711,190,1)
2^2^1010.157
"DATA",711,190,2)
Combat Aft. 11/11/98
"DATA",711,190,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,191,0)
NOSE/THROAT RADIUM^I;14G1.^A^^2.5
"DATA",711,191,1)
0^0^0
"DATA",711,191,2)
Nose/Throat Radium
"DATA",711,191,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,192,0)
APPLICANT INSURANCE ADDRESS^I;17E.^A^^2.5
"DATA",711,192,1)
355.33^355.33^21.01
"DATA",711,192,2)
Ins. Address
"DATA",711,193,0)
APPLICANT INSURANCE CITY^I;17F.^A^^2.5
"DATA",711,193,1)
355.33^355.33^21.04
"DATA",711,193,2)
Ins. City
"DATA",711,194,0)
APPLICANT INSURANCE STATE^I;17G.^A^^2.5
"DATA",711,194,1)
355.33^355.33^21.05
"DATA",711,194,2)
Ins. State
"DATA",711,194,"T")
S EASRTR=$$STATE^EASEZT1(EZDATA)
"DATA",711,195,0)
APPLICANT INSURANCE ZIP^I;17H.^A^^2.5
"DATA",711,195,1)
355.33^355.33^21.06
"DATA",711,195,2)
Ins. ZIP
"DATA",711,195,"T")
S EASRTR=$$ZIP^EASEZT2(EZDATA)
"DATA",711,196,0)
APPLICANT INSURANCE PHONE AREA CODE^I;17I.^A^^2.5
"DATA",711,196,1)
355.33^355.33^20.02
"DATA",711,196,2)
Ins. Phone
"DATA",711,196,"T")
S EASRTR=$$INSPH^EASEZT2(EASAPP,"APPLICANT",EASMULT)
"DATA",711,197,0)
APPLICANT INSURANCE PHONE NUMBER^I;17J.^A^^2.5
"DATA",711,197,1)
355.33^355.33^20.02
"DATA",711,197,2)
Ins. Phone
"DATA",711,197,"T")

"DATA",711,198,0)
OTHER(N) INSURANCE COMPANY^IA;17A.^A^^2.5
"DATA",711,198,1)
355.33^355.33^20.01
"DATA",711,198,2)
Other Health Insurer
"DATA",711,198,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,199,0)
OTHER(N) INSURANCE POLICY HOLDER^IA;17B.^A^^2.5
"DATA",711,199,1)
355.33^355.33^60.07
"DATA",711,199,2)
 Policy Holder Name
"DATA",711,199,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,200,0)
OTHER(N) INSURANCE POLICY NUMBER^IA;17C.^A^^2.5
"DATA",711,200,1)
355.33^355.33^60.04
"DATA",711,200,2)
 Policy #
"DATA",711,200,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,201,0)
OTHER(N) INSURANCE GROUP CODE^IA;17D.^A^^2.5
"DATA",711,201,1)
355.33^355.33^40.03
"DATA",711,201,2)
 Group Code
"DATA",711,201,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,202,0)
OTHER(N) INSURANCE ADDRESS^IA;17E.^A^^2.5
"DATA",711,202,1)
355.33^355.33^21.01
"DATA",711,202,2)
 Ins. Address
"DATA",711,202,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,203,0)
OTHER(N) INSURANCE CITY^IA;17F.^A^^2.5
"DATA",711,203,1)
355.33^355.33^21.04
"DATA",711,203,2)
 Ins. City
"DATA",711,203,"T")
S EASRTR=$$UC^EASEZT1(EZDATA)
"DATA",711,204,0)
OTHER(N) INSURANCE STATE^IA;17G.^A^^2.5
"DATA",711,204,1)
355.33^355.33^21.05
"DATA",711,204,2)
 Ins. State
"DATA",711,204,"T")
S EASRTR=$$STATE^EASEZT1(EZDATA)
"DATA",711,205,0)
OTHER(N) INSURANCE ZIP^IA;17H.^A^^2.5
"DATA",711,205,1)
355.33^355.33^21.06
"DATA",711,205,2)
 Ins. ZIP
"DATA",711,205,"T")
S EASRTR=$$ZIP^EASEZT2(EZDATA)
"DATA",711,206,0)
OTHER(N) INSURANCE PHONE AREA CODE^IA;17I.^A^^2.5
"DATA",711,206,1)
355.33^355.33^20.02
"DATA",711,206,2)
 Ins. Phone
"DATA",711,206,"T")
S EASRTR=$$INSPH^EASEZT2(EASAPP,"OTHER(N)",EASMULT)
"DATA",711,207,0)
OTHER(N) INSURANCE PHONE NUMBER^IA;17J.^A^^2.5
"DATA",711,207,1)
355.33^355.33^20.02
"DATA",711,207,2)
 Ins. Phone
"DATA",711,207,"T")

"DATA",711,208,0)
MILITARY COMP NOT VA COMP^I;14D3.^A^^2.5
"DATA",711,208,1)
2^2^.362
"DATA",711,208,2)
Mil. Comp. Lieu VA
"DATA",711,208,3)
D H362^EASEZDD
"DATA",711,208,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,209,0)
SPOUSE MAIDEN NAME^IIA;1.5^A^^2.5
"DATA",711,209,1)
408.13^408.13^1.1
"DATA",711,209,2)
Sp. Maiden Name
"DATA",711,209,"T")
S EASRTR=$$LAST^EASEZT1(EZDATA)
"DATA",711,210,0)
APPLICANT FARM OR BUSINESS INCOME^IIC;3.1^A^^2.5
"DATA",711,210,1)
408.21^408.21^.17
"DATA",711,210,2)
Farm/Bus. Income
"DATA",711,211,0)
SPOUSE FARM OR BUSINESS INCOME^IIC;3.2^A^^2.5
"DATA",711,211,1)
408.21^408.21^.17
"DATA",711,211,2)
Farm/Bus. Inc. (Sp)
"DATA",711,212,0)
CHILD1 FARM OR BUSINESS INCOME^IIC;3.3^A^^2.5
"DATA",711,212,1)
408.21^408.21^.17
"DATA",711,212,2)
Farm/Bus. Inc. (Ch+)
"DATA",711,213,0)
CHILD(N) CHILD #^IIF;7.^A^^2.5
"DATA",711,213,1)
0^0^0
"DATA",711,213,2)
Additional Income of
"DATA",711,214,0)
CHILD(N) GROSS ANNUAL INCOME^IIF;7.1^A^^2.5
"DATA",711,214,1)
408.21^408.21^.14
"DATA",711,214,2)
 Gross Annual Inc.
"DATA",711,215,0)
CHILD(N) FARM/BUS INCOME^IIF;7.2^A^^2.5
"DATA",711,215,1)
408.21^408.21^.17
"DATA",711,215,2)
 Farm/Bus. Inc.
"DATA",711,216,0)
CHILD(N) OTHER INCOME^IIF;7.3^A^^2.5
"DATA",711,216,1)
408.21^408.21^.08
"DATA",711,216,2)
 Other Income
"DATA",711,217,0)
ASSET(N) CHILD #^IIG;9.^A^^2.5
"DATA",711,217,1)
0^0^0
"DATA",711,217,2)
Additional Assets of
"DATA",711,218,0)
ASSET(N) CHILD CASH^IIG;9.1^A^^2.5
"DATA",711,218,1)
0^0^0
"DATA",711,218,2)
 Cash in Bank
"DATA",711,219,0)
ASSET(N) CHILD REAL PROPERTY^IIG;9.2^A^^2.5
"DATA",711,219,1)
0^0^0
"DATA",711,219,2)
 Real Property
"DATA",711,220,0)
ASSET(N) CHILD OTHER PROPERTY^IIG;9.3^A^^2.5
"DATA",711,220,1)
0^0^0
"DATA",711,220,2)
 Other Property
"DATA",711,221,0)
CHILD1 CASH IN BANK^IIE;1.3^A^^2.5
"DATA",711,221,1)
0^0^0
"DATA",711,221,2)
Cash in Bank (Ch+)
"DATA",711,222,0)
CHILD1 REAL PROPERTY LESS MORTGAGES^IIE;2.3^A^^2.5
"DATA",711,222,1)
0^0^0
"DATA",711,222,2)
Real Property (Ch+)
"DATA",711,223,0)
CHILD1 STOCKS BONDS ASSETS LESS DEBTS^IIE;3.3^A^^2.5
"DATA",711,223,1)
0^0^0
"DATA",711,223,2)
Other Property (Ch+)
"DATA",711,227,0)
APPLICANT CASH IN BANK2^IIE;1.^A^^2.5
"DATA",711,227,1)
0^0^0
"DATA",711,227,2)
Cash in Bank
"DATA",711,228,0)
APPLICANT REAL PROPERTY LESS MORTGAGES2^IIE;2.^A^^2.5
"DATA",711,228,1)
0^0^0
"DATA",711,228,2)
Real Property
"DATA",711,229,0)
APPLICANT STOCKS BONDS ASSETS LESS DEBTS2^IIE;3.^A^^2.5
"DATA",711,229,1)
0^0^0
"DATA",711,229,2)
Other Property
"DATA",711,231,0)
APPLICANT GROSS ANNUAL INCOME2^IIC;1.4^A^^2.5
"DATA",711,231,1)
408.21^408.21^.14
"DATA",711,231,2)
Gross Annual Inc.
"DATA",711,232,0)
SPOUSE GROSS ANNUAL INCOME2^IIC;1.5^A^^2.5
"DATA",711,232,1)
408.21^408.21^.14
"DATA",711,232,2)
Gross Ann. Inc. (Sp)
"DATA",711,233,0)
CHILD1 GROSS ANNUAL INCOME2^IIC;1.6^A^^2.5
"DATA",711,233,1)
0^0^0
"DATA",711,233,2)
Gross Ann. Inc. (Ch+)
"DATA",711,234,0)
DISABILITY DISCHARGE CLAIMED^I;14D4.^A^^2.5
"DATA",711,234,1)
2^2^1010.158
"DATA",711,234,2)
Disab. Discharge?   
"DATA",711,234,"T")
S EASRTR=$$YN^EASEZT1(EZDATA)
"DATA",711,235,0)
APPLICANT CELLULAR PHONE AREA CODE^I;11A1.^A^^3.0
"DATA",711,235,1)
2^2^.134
"DATA",711,235,2)
Cell Phone
"DATA",711,235,3)
D AC^EASEZDD
"DATA",711,235,"T")
S EASRTR=$$CELLPH^EASEZT2(EASAPP,"APPLICANT")
"DATA",711,236,0)
APPLICANT CELLULAR PHONE NUMBER^I;11A2.^A^^3.0
"DATA",711,236,1)
2^2^.134
"DATA",711,236,2)
Cell Phone
"DATA",711,236,3)
D PN^EASEZDD
"DATA",711,237,0)
APPLICANT PAGER PHONE AREA CODE^I;11A3.^A^^3.0
"DATA",711,237,1)
2^2^.135
"DATA",711,237,2)
Pager #
"DATA",711,237,3)
D AC^EASEZDD
"DATA",711,237,"T")
S EASRTR=$$PAGERPH^EASEZT2(EASAPP,"APPLICANT")
"DATA",711,238,0)
APPLICANT PAGER PHONE NUMBER^I;11A4.^A^^3.0
"DATA",711,238,1)
2^2^.135
"DATA",711,238,2)
Pager #
"DATA",711,238,3)
D PN^EASEZDD
"DATA",711,239,0)
AMOUNT CONTRIBUTED TO SPOUSE^IIA;12.1^A^^1.0
"DATA",711,239,1)
408.22^408.22^.07
"DATA",711,239,2)
Amt To Sp. Support
"DATA",711,239,3)
D H07^EASEZDD
"FIA",711)
1010EZ MAPPING
"FIA",711,0)
^EAS(711,
"FIA",711,0,0)
711
"FIA",711,0,1)
y^y^f^^n^^y^o^n
"FIA",711,0,10)

"FIA",711,0,11)

"FIA",711,0,"RLRO")

"FIA",711,0,"VR")
1.0^EAS
"FIA",711,711)
0
"KRN",19,10673,-1)
0^1
"KRN",19,10673,0)
EASEC LTC EXEMPTION TEST EDIT^Edit an Existing LTC Copay Exemption Test^^A^^^^^^^^ENROLLMENT APPLICATION SYSTEM^^1^1
"KRN",19,10673,1,0)
^19.06^1^1^3020306^^
"KRN",19,10673,1,1,0)
Edit existing LTC Copay Exemption Test information.
"KRN",19,10673,15)
K DGFINOP
"KRN",19,10673,20)
S DGMTYPT=4 S DGFINOP="" D EN^DGMTE
"KRN",19,10673,"U")
EDIT AN EXISTING LTC COPAY EXE
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",477,-1)
1^1
"PKG",477,0)
ENROLLMENT APPLICATION SYSTEM^EAS^ENROLLMENT
"PKG",477,20,0)
^9.402P^1^1
"PKG",477,20,1,0)
2^^EASXDR
"PKG",477,20,1,1)
 
"PKG",477,20,"B",2,1)

"PKG",477,22,0)
^9.49I^1^1
"PKG",477,22,1,0)
1.0^3010315^3010328^66476
"PKG",477,22,1,"PAH",1,0)
57^3050713
"PKG",477,22,1,"PAH",1,1,0)
^^1^1^3050713
"PKG",477,22,1,"PAH",1,1,1,0)
1010 EZ Phase 3.0
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
32
"RTN","EASEZDD")
0^25^B17328269
"RTN","EASEZDD",1,0)
EASEZDD ;ALB/CMF - EZ help for long texts  ;22 FEB 2005
"RTN","EASEZDD",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZDD",3,0)
 ;
"RTN","EASEZDD",4,0)
H112 ;Applicant Medical Expense
"RTN","EASEZDD",5,0)
 S DIR("?",1)="This response must be a number.  Enter the total"
"RTN","EASEZDD",6,0)
 S DIR("?",2)="amount of unreimbursed medical expenses paid by the"
"RTN","EASEZDD",7,0)
 S DIR("?",3)="veteran during the previous calendar year.  The"
"RTN","EASEZDD",8,0)
 S DIR("?",4)="expenses can be for the veteran or for persons that"
"RTN","EASEZDD",9,0)
 S DIR("?",5)="the veteran has a legal or moral obligation"
"RTN","EASEZDD",10,0)
 S DIR("?")="to support."
"RTN","EASEZDD",11,0)
 Q
"RTN","EASEZDD",12,0)
 ;
"RTN","EASEZDD",13,0)
H07 ;Amount Contributed to Spouse
"RTN","EASEZDD",14,0)
 S DIR("?",1)="If the veteran did not live with his or her spouse, enter"
"RTN","EASEZDD",15,0)
 S DIR("?",2)="in this field the amount the veteran contributed to his"
"RTN","EASEZDD",16,0)
 S DIR("?",3)="or her spouse last calendar year.  If the amount the"
"RTN","EASEZDD",17,0)
 S DIR("?",4)="veteran contributed is less than $600, then the spouse"
"RTN","EASEZDD",18,0)
 S DIR("?")="will not be considered a dependent for financial assessment."
"RTN","EASEZDD",19,0)
 Q
"RTN","EASEZDD",20,0)
H18 ;Child 18-23 In School
"RTN","EASEZDD",21,0)
 S DIR("?",1)="Enter 'Y' if the child is currently 18 to 23 years old"
"RTN","EASEZDD",22,0)
 S DIR("?",2)="and the child attended school last calendar year.  Enter"
"RTN","EASEZDD",23,0)
 S DIR("?",3)="'N' if the child is currently 18 to 23 years old but the"
"RTN","EASEZDD",24,0)
 S DIR("?",4)="child did not attend school last calendar year.  Enter"
"RTN","EASEZDD",25,0)
 S DIR("?")="'N' if the child is not currently 18 to 23 years old."
"RTN","EASEZDD",26,0)
 Q
"RTN","EASEZDD",27,0)
 ;
"RTN","EASEZDD",28,0)
H19 ;Amount Contributed to Child
"RTN","EASEZDD",29,0)
 S DIR("?",1)="Enter in this field the dollar amount that the veteran"
"RTN","EASEZDD",30,0)
 S DIR("?",2)="contributed to the child's support last calendar year."
"RTN","EASEZDD",31,0)
 S DIR("?",3)="The contributions do not have to be in regular set amounts."
"RTN","EASEZDD",32,0)
 S DIR("?",4)="For example, a veteran who paid a child's school tuition or"
"RTN","EASEZDD",33,0)
 S DIR("?")="medical bills would be contributing to the child's support."
"RTN","EASEZDD",34,0)
 Q
"RTN","EASEZDD",35,0)
 ;
"RTN","EASEZDD",36,0)
H362 ;Military Comp
"RTN","EASEZDD",37,0)
 S DIR("?",1)="Enter '0' or 'NO' if the veteran: --Is NOT retired from the military OR --Is"
"RTN","EASEZDD",38,0)
 S DIR("?",2)="retired from the military due to length of service AND does NOT have a"
"RTN","EASEZDD",39,0)
 S DIR("?",3)="disability confirmed by the Military Branch to have been incurred in or "
"RTN","EASEZDD",40,0)
 S DIR("?",4)="aggravated while on active duty.  Enter '1' or 'YES, RECEIVING MILITARY"
"RTN","EASEZDD",41,0)
 S DIR("?",5)="RETIREMENT', if the veteran: --Is confirmed by the Military Branch to have"
"RTN","EASEZDD",42,0)
 S DIR("?",6)="been discharged or released due to a disability incurred in or aggravated"
"RTN","EASEZDD",43,0)
 S DIR("?",7)="while on active duty AND --Has NOT filed a claim for VA compensation benefits"
"RTN","EASEZDD",44,0)
 S DIR("?",8)="OR --Has been rated by the VA to be NSC OR --Has been rated by the VA to"
"RTN","EASEZDD",45,0)
 S DIR("?",9)="have noncompensable 0% SC conditions.  Enter '2' or 'YES, RECEIVING MILITARY"
"RTN","EASEZDD",46,0)
 S DIR("?",10)="RETIREMENT IN LIEU OF VA COMPENSATION',if the veteran: --Is confirmed by the"
"RTN","EASEZDD",47,0)
 S DIR("?",11)="Military Branch to have been discharged or released due to a disability"
"RTN","EASEZDD",48,0)
 S DIR("?",12)="incurred in or aggravated while on active duty, AND --Is receiving military"
"RTN","EASEZDD",49,0)
 S DIR("?",13)="disability retirement pay AND --Has been rated by VA to have compensable SC"
"RTN","EASEZDD",50,0)
 S DIR("?")="conditions but is NOT receiving compensation from the VA."
"RTN","EASEZDD",51,0)
 Q
"RTN","EASEZDD",52,0)
AC ;Area Code
"RTN","EASEZDD",53,0)
 S DIR(0)="FO^3:3^K:X'?3N X"
"RTN","EASEZDD",54,0)
 S DIR("?")="This response must be numeric. Use format nnn. Example 904,412."
"RTN","EASEZDD",55,0)
 Q
"RTN","EASEZDD",56,0)
PN ;Phone Number
"RTN","EASEZDD",57,0)
 S DIR(0)="FO^8:8^K:X'?3N1""-""4N X"
"RTN","EASEZDD",58,0)
 S DIR("?")="This response must be numeric. Use format nnn-nnnn. Example 222-1234."
"RTN","EASEZDD",59,0)
 Q
"RTN","EASEZDD",60,0)
 ;
"RTN","EASEZF1")
0^4^B48422626
"RTN","EASEZF1",1,0)
EASEZF1 ;ALB/jap - Filing 1010EZ Data to Patient Database ;10/12/00  13:07
"RTN","EASEZF1",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**1,51,57**;Mar 15, 2001
"RTN","EASEZF1",3,0)
 ;
"RTN","EASEZF1",4,0)
F2(EASAPP,EASDFN) ;file to Patient record in #2
"RTN","EASEZF1",5,0)
 ;input EASDFN = ien to #2
"RTN","EASEZF1",6,0)
 N KEYIEN,FILE,SUBFILE,FLD,DATAKEY,MULTIPLE,SECT,QUES,SUBIEN,ACCEPT,EZDATA,PTDATA,LINK,EROOT,EAS,ERR,IENS,ARRAY,ELIGVER
"RTN","EASEZF1",7,0)
 N DIC,DIQ,DA,DR,X,Y
"RTN","EASEZF1",8,0)
 Q:'$G(EASDFN)
"RTN","EASEZF1",9,0)
 L +^DPT(EASDFN)
"RTN","EASEZF1",10,0)
 I '$G(EASVRSN) S EASVRSN=$$VERSION^EASEZU4(EASAPP)
"RTN","EASEZF1",11,0)
 S KEYIEN=0
"RTN","EASEZF1",12,0)
 F  S KEYIEN=$O(^TMP("EZDATA",$J,KEYIEN)) Q:'KEYIEN  D
"RTN","EASEZF1",13,0)
 .S LN=^TMP("EZDATA",$J,KEYIEN),FILE=$P(LN,U,1)
"RTN","EASEZF1",14,0)
 .Q:FILE'=2
"RTN","EASEZF1",15,0)
 .S SUBFILE=$P(LN,U,2),FLD=$P(LN,U,3),DATAKEY=$P(LN,U,4)
"RTN","EASEZF1",16,0)
 .S SECT=$P(DATAKEY,";",1),QUES=$P(DATAKEY,";",2)
"RTN","EASEZF1",17,0)
 .;call to suppress may be redundant
"RTN","EASEZF1",18,0)
 .Q:$$SUPPRESS^EASEZU4(EASAPP,DATAKEY,1,EASVRSN)
"RTN","EASEZF1",19,0)
 .;in file #2, multiple is always 1
"RTN","EASEZF1",20,0)
 .S MULTIPLE=1
"RTN","EASEZF1",21,0)
 .Q:'$D(^TMP("EZDATA",$J,KEYIEN,MULTIPLE,1))
"RTN","EASEZF1",22,0)
 .S X=$G(^TMP("EZTEMP",$J,SECT,MULTIPLE,QUES))
"RTN","EASEZF1",23,0)
 .Q:$P(X,U,1)'=KEYIEN
"RTN","EASEZF1",24,0)
 .S EZDATA=$P(X,U,2),ACCEPT=$P(X,U,3),SUBIEN=$P(X,U,4),PTDATA=$P(X,U,5)
"RTN","EASEZF1",25,0)
 .Q:EZDATA=""
"RTN","EASEZF1",26,0)
 .Q:'SUBIEN
"RTN","EASEZF1",27,0)
 .;special handling for Designee
"RTN","EASEZF1",28,0)
 .I FLD=.3405 S EZDATA=$S(EZDATA="NEXT OF KIN":"YES",1:"NO")
"RTN","EASEZF1",29,0)
 .;strip off code display from county
"RTN","EASEZF1",30,0)
 .I SECT="I",QUES="9E." S EZDATA=$P(EZDATA," (",1)
"RTN","EASEZF1",31,0)
 .;get file #2 ien; always same as EASDFN
"RTN","EASEZF1",32,0)
 .S LINK=EASDFN
"RTN","EASEZF1",33,0)
 .;don't continue if data item not accepted
"RTN","EASEZF1",34,0)
 .Q:ACCEPT<1
"RTN","EASEZF1",35,0)
 .;process subfile data elsewhere
"RTN","EASEZF1",36,0)
 .I SUBFILE=2.01 Q
"RTN","EASEZF1",37,0)
 .I SUBFILE=2.101 Q
"RTN","EASEZF1",38,0)
 .I SUBFILE=2.02 D F202^EASEZF1(SUBFILE,DATAKEY,EZDATA,SUBIEN,KEYIEN) Q
"RTN","EASEZF1",39,0)
 .I SUBFILE=2.06 D F206^EASEZF1(SUBFILE,DATAKEY,EZDATA,SUBIEN) Q
"RTN","EASEZF1",40,0)
 .;special conversion to file data to field #.328
"RTN","EASEZF1",41,0)
 .I FLD=.328 D
"RTN","EASEZF1",42,0)
 ..S X=$$UC^EASEZT1(EZDATA) I X="SSN" D
"RTN","EASEZF1",43,0)
 ...;allow SSN as Service Number only if field #.328 in patient record is null;
"RTN","EASEZF1",44,0)
 ...S PTSSN=$$GETANY^EASEZU1(EASAPP,EASDFN,SUBIEN)
"RTN","EASEZF1",45,0)
 ...I PTSSN="" S EZDATA="SS" Q
"RTN","EASEZF1",46,0)
 ...;otherwise Applicant SSN must match Patient SSN
"RTN","EASEZF1",47,0)
 ...S KK=$$KEY711^EASEZU1("APPLICANT SOCIAL SECURITY NUMBER")
"RTN","EASEZF1",48,0)
 ...S EZSSN=$P($G(^TMP("EZDATA",$J,KK,1,1)),U,1),EZSSN=$TR(EZSSN,"-","")
"RTN","EASEZF1",49,0)
 ...I EZSSN=PTSSN S EZDATA="SS" Q
"RTN","EASEZF1",50,0)
 ...S EZDATA="ssn"
"RTN","EASEZF1",51,0)
 ..K KK,PTSSN,EZSSN
"RTN","EASEZF1",52,0)
 .;special for fields #.092 & #.093
"RTN","EASEZF1",53,0)
 .I FILE=2,((FLD=.092)!(FLD=.093)) D FPOB(DATAKEY,EZDATA,SUBIEN,PTDATA) Q
"RTN","EASEZF1",54,0)
 .;special for field #.362
"RTN","EASEZF1",55,0)
 .I FILE=2,FLD=.362,EASVRSN>5.99 I (EZDATA="Y")!(EZDATA="YES") S EZDATA="YES, RECEIVING MILITARY RETIREMENT IN LIEU OF VA COMPENSATION"
"RTN","EASEZF1",56,0)
 .Q:EZDATA=PTDATA
"RTN","EASEZF1",57,0)
 .;repeat check for verified eligibility;
"RTN","EASEZF1",58,0)
 .;do not file certain fields if eligibility verified
"RTN","EASEZF1",59,0)
 .K ARRAY
"RTN","EASEZF1",60,0)
 .S DA=EASDFN,DIC="^DPT(",DR=".3611;.3613",DIQ(0)="I",DIQ="ARRAY"
"RTN","EASEZF1",61,0)
 .D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","EASEZF1",62,0)
 .I $G(ARRAY(2,EASDFN,.3611,"I"))="V",$G(ARRAY(2,EASDFN,.3613,"I"))="H" S ELIGVER=1
"RTN","EASEZF1",63,0)
 .I FLD=.313,$G(ARRAY(2,EASDFN,.3611,"I"))="V" Q
"RTN","EASEZF1",64,0)
 .I $G(ELIGVER),((FLD=.301)!(FLD=.302)!(FLD=.36235)) Q
"RTN","EASEZF1",65,0)
 .;special for field #.32102 - Agent Orange Exposure . DATAKEY = I;14F
"RTN","EASEZF1",66,0)
 .I FLD=.32102 D F32102^EASEZF1A(EASAPP,EASDFN,EZDATA)
"RTN","EASEZF1",67,0)
 .;setup to call FM database server using EASDFN as file #2 record
"RTN","EASEZF1",68,0)
 .K EAS,ERR
"RTN","EASEZF1",69,0)
 .S IENS=EASDFN_","
"RTN","EASEZF1",70,0)
 .S EROOT="EAS("_EASAPP_")"
"RTN","EASEZF1",71,0)
 .D VAL^DIE(2,IENS,FLD,"F",EZDATA,,EROOT,"ERR")
"RTN","EASEZF1",72,0)
 .;try to resolve possible invalid input for free text fields due to length
"RTN","EASEZF1",73,0)
 .I $D(ERR) D RESOLVE
"RTN","EASEZF1",74,0)
 .I $D(ERR) D ERROR^EASEZF2("AP",MULTIPLE,.ERR,"LINK")
"RTN","EASEZF1",75,0)
 .;file to database if input is valid
"RTN","EASEZF1",76,0)
 .I '$D(ERR) D
"RTN","EASEZF1",77,0)
 ..;2/1/2001 - don't attempt to file Name, SSN, DOB; too many complications;
"RTN","EASEZF1",78,0)
 ..;  example: if system assigns pseudo-SSN to new patient, user could overwrite;
"RTN","EASEZF1",79,0)
 ..;  example: if applicant matched to existing patient, all critical identifying
"RTN","EASEZF1",80,0)
 ..;           data could be overwritten; could impact HEC as well
"RTN","EASEZF1",81,0)
 ..D FILE^DIE("S",EROOT,"ERR")
"RTN","EASEZF1",82,0)
 ..;set any replaced data into subfile #712.01 for audit
"RTN","EASEZF1",83,0)
 ..S ^EAS(712,EASAPP,10,SUBIEN,2)=PTDATA_U_LINK
"RTN","EASEZF1",84,0)
 ;
"RTN","EASEZF1",85,0)
 L -^DPT(EASDFN)
"RTN","EASEZF1",86,0)
 Q
"RTN","EASEZF1",87,0)
 ;
"RTN","EASEZF1",88,0)
RESOLVE ;try to resolve invalid input for free text fields only
"RTN","EASEZF1",89,0)
 ;see if mapped to free text field
"RTN","EASEZF1",90,0)
 N FDEF,FTYPE,MAX
"RTN","EASEZF1",91,0)
 I (SUBFILE=FILE)!(SUBFILE="") S FDEF=FILE
"RTN","EASEZF1",92,0)
 E  S FDEF=SUBFILE
"RTN","EASEZF1",93,0)
 S FTYPE=$$GET1^DID(FDEF,FLD,"","TYPE")
"RTN","EASEZF1",94,0)
 Q:FTYPE'="FREE TEXT"
"RTN","EASEZF1",95,0)
 S MAX=$$GET1^DID(FDEF,FLD,"","FIELD LENGTH")
"RTN","EASEZF1",96,0)
 S EZDATA=$E(EZDATA,1,MAX)
"RTN","EASEZF1",97,0)
 K ERR
"RTN","EASEZF1",98,0)
 D VAL^DIE(2,IENS,FLD,"F",EZDATA,,EROOT,"ERR")
"RTN","EASEZF1",99,0)
 ;if still sets ERR array then won't be filed to database
"RTN","EASEZF1",100,0)
 Q
"RTN","EASEZF1",101,0)
 ;
"RTN","EASEZF1",102,0)
F202(SUBFILE,DATAKEY,EZDATA,SUBIEN,KEYIEN) ;add or edit subrecord in subfile #2.02
"RTN","EASEZF1",103,0)
 ;input SUBFILE = 2.02
"RTN","EASEZF1",104,0)
 ;      DATAKEY = data item identifier, e.g., I;4B.
"RTN","EASEZF1",105,0)
 ;      EZDATA  = in these cases, either "N(o)" or "Y(es)"
"RTN","EASEZF1",106,0)
 ;      SUBIEN  = subrecord # for data in #712/#10
"RTN","EASEZF1",107,0)
 ;      KEYIEN  = record # for data element in #711
"RTN","EASEZF1",108,0)
 N X,N,DATANM,EROOT,EAS,EIEN,ERR,FLD,IENS,EASARRAY,LINK,OUT,K1,K3
"RTN","EASEZF1",109,0)
 Q:EZDATA'["Y"
"RTN","EASEZF1",110,0)
 Q:SUBFILE'=2.02
"RTN","EASEZF1",111,0)
 ;covert data to corresponding file #10 pointer
"RTN","EASEZF1",112,0)
 S X=$$KEY711^EASEZU1(DATAKEY)
"RTN","EASEZF1",113,0)
 S K1=$P(X,U,1),DATANM=$P(X,U,2),K3=$P(X,U,3)
"RTN","EASEZF1",114,0)
 Q:(DATANM="")
"RTN","EASEZF1",115,0)
 Q:(K1'=KEYIEN)
"RTN","EASEZF1",116,0)
 Q:(K3'=DATAKEY)
"RTN","EASEZF1",117,0)
 S DATANM=$P(DATANM," - ",2),DATANM=$E(DATANM,1,30)
"RTN","EASEZF1",118,0)
 I DATANM["UNANSWERED" S DATANM="UNKNOWN BY PATIENT"
"RTN","EASEZF1",119,0)
 S EZDATA=$O(^DIC(10,"B",DATANM,0))
"RTN","EASEZF1",120,0)
 Q:EZDATA=""
"RTN","EASEZF1",121,0)
 D I202^EASEZI(EASDFN,.EASARRAY)
"RTN","EASEZF1",122,0)
 ;if matching race already exists, edit method only
"RTN","EASEZF1",123,0)
 S OUT=0,N=0 F  S N=$O(EASARRAY(N)) Q:'N  D
"RTN","EASEZF1",124,0)
 .Q:($P(EASARRAY(N),";",2)'=EZDATA)
"RTN","EASEZF1",125,0)
 .K EAS,ERR
"RTN","EASEZF1",126,0)
 .S IENS=EZDATA_","_EASDFN_","
"RTN","EASEZF1",127,0)
 .S EROOT="EAS("_EASAPP_")"
"RTN","EASEZF1",128,0)
 .S FLD=.02,EAS(EASAPP,SUBFILE,IENS,FLD)=1
"RTN","EASEZF1",129,0)
 .D FILE^DIE("S",EROOT,"ERR")
"RTN","EASEZF1",130,0)
 .S OUT=1
"RTN","EASEZF1",131,0)
 ;no matching race in patient record, add new subrecord
"RTN","EASEZF1",132,0)
 I 'OUT D
"RTN","EASEZF1",133,0)
 .K ERR
"RTN","EASEZF1",134,0)
 .S EROOT="EAS("_EASAPP_")"
"RTN","EASEZF1",135,0)
 .S IENS="+1,"_EASDFN_",",EIEN(1)=EZDATA
"RTN","EASEZF1",136,0)
 .S FLD=.01,EAS(EASAPP,SUBFILE,IENS,FLD)=EZDATA
"RTN","EASEZF1",137,0)
 .S FLD=.02,EAS(EASAPP,SUBFILE,IENS,FLD)=1
"RTN","EASEZF1",138,0)
 .D UPDATE^DIE("S",EROOT,"EIEN","ERR")
"RTN","EASEZF1",139,0)
 .I $D(ERR) D ERROR^EASEZF2("AP",1,.ERR,"LINK") Q
"RTN","EASEZF1",140,0)
 .S LINK=EASDFN_";"_EZDATA
"RTN","EASEZF1",141,0)
 .S ^EAS(712,EASAPP,10,SUBIEN,2)=U_LINK
"RTN","EASEZF1",142,0)
 Q
"RTN","EASEZF1",143,0)
 ;
"RTN","EASEZF1",144,0)
F206(SUBFILE,DATAKEY,EZDATA,SUBIEN) ;add subrecord in subfile #2.06 
"RTN","EASEZF1",145,0)
 ;input SUBFILE = 2.06
"RTN","EASEZF1",146,0)
 ;      DATAKEY = data item identifier, e.g., I;4A.
"RTN","EASEZF1",147,0)
 ;      EZDATA  = in these cases, either "N(o)" or "Y(es)"
"RTN","EASEZF1",148,0)
 N X,EROOT,EAS,EIEN,ERR,FLD,EASARRAY,IENS,LINK,PTDATA
"RTN","EASEZF1",149,0)
 Q:SUBFILE'=2.06
"RTN","EASEZF1",150,0)
 D I206^EASEZI(EASDFN,.EASARRAY)
"RTN","EASEZF1",151,0)
 S LINK=$P($G(EASARRAY(1)),";",2),PTDATA="" I LINK S PTDATA=$P(^DPT(EASDFN,.06,LINK,0),U,1)
"RTN","EASEZF1",152,0)
 I DATAKEY="I;4A." S EZDATA=$S(EZDATA["Y":"H",$E(EZDATA,1)="N":"N",1:"U") D
"RTN","EASEZF1",153,0)
 .S EROOT="EAS("_EASAPP_")"
"RTN","EASEZF1",154,0)
 .S IENS="+1,"_EASDFN_","
"RTN","EASEZF1",155,0)
 .S FLD=.01,EAS(EASAPP,SUBFILE,IENS,FLD)=EZDATA
"RTN","EASEZF1",156,0)
 .S FLD=.02,EAS(EASAPP,SUBFILE,IENS,FLD)="SELF IDENTIFICATION"
"RTN","EASEZF1",157,0)
 .D UPDATE^DIE("ES",EROOT,"EIEN","ERR")
"RTN","EASEZF1",158,0)
 .S LINK=EASDFN_";"_$G(EIEN(1))
"RTN","EASEZF1",159,0)
 .S ^EAS(712,EASAPP,10,SUBIEN,2)=PTDATA_U_LINK
"RTN","EASEZF1",160,0)
 Q
"RTN","EASEZF1",161,0)
 ;
"RTN","EASEZF1",162,0)
FPOB(DATAKEY,EZDATA,SUBIEN,PTDATA) ;add or edit pob city & state
"RTN","EASEZF1",163,0)
 ;input DATAKEY = data item identifier, either, I;8A. or I;8B.
"RTN","EASEZF1",164,0)
 ;      EZDATA  = free text if city or 
"RTN","EASEZF1",165,0)
 ;                state abbrv if state
"RTN","EASEZF1",166,0)
 ;filing for both city & state only done when datakey=I;8A.
"RTN","EASEZF1",167,0)
 N X,EROOT,EAS,EIEN,ERR,FLD,EASARRAY,IENS,LINK,SECT,QUES,XIEN,XDATA
"RTN","EASEZF1",168,0)
 Q:(DATAKEY'="I;8A.")
"RTN","EASEZF1",169,0)
 Q:(EZDATA="")
"RTN","EASEZF1",170,0)
 Q:(EZDATA=PTDATA)
"RTN","EASEZF1",171,0)
 ;file pob city
"RTN","EASEZF1",172,0)
 K EAS,ERR
"RTN","EASEZF1",173,0)
 S FLD=.092,LINK=EASDFN
"RTN","EASEZF1",174,0)
 S IENS=EASDFN_","
"RTN","EASEZF1",175,0)
 S EROOT="EAS("_EASAPP_")"
"RTN","EASEZF1",176,0)
 D VAL^DIE(2,IENS,FLD,"F",EZDATA,,EROOT,"ERR")
"RTN","EASEZF1",177,0)
 I $D(ERR) D RESOLVE
"RTN","EASEZF1",178,0)
 I $D(ERR) D ERROR^EASEZF2("AP",1,.ERR,"LINK") Q
"RTN","EASEZF1",179,0)
 D FILE^DIE("ES",EROOT,"ERR")
"RTN","EASEZF1",180,0)
 ;set any replaced data into subfile #712.01 for audit
"RTN","EASEZF1",181,0)
 S ^EAS(712,EASAPP,10,SUBIEN,2)=PTDATA_U_LINK
"RTN","EASEZF1",182,0)
 ;file pob state
"RTN","EASEZF1",183,0)
 S (EZDATA,XDATA)=""
"RTN","EASEZF1",184,0)
 S DATAKEY="I;8B.",SECT=$P(DATAKEY,";",1),QUES=$P(DATAKEY,";",2)
"RTN","EASEZF1",185,0)
 S X=$G(^TMP("EZTEMP",$J,SECT,1,QUES)),EZDATA=$P(X,U,2),XIEN=$P(X,U,4),XDATA=$P(X,U,5)
"RTN","EASEZF1",186,0)
 Q:(EZDATA="")
"RTN","EASEZF1",187,0)
 Q:(EZDATA=XDATA)
"RTN","EASEZF1",188,0)
 I (EZDATA["FOREIGN")!(EZDATA="FC")!(EZDATA="FG") S EZDATA="FOREIGN"
"RTN","EASEZF1",189,0)
 K EAS,ERR
"RTN","EASEZF1",190,0)
 S FLD=.093
"RTN","EASEZF1",191,0)
 S IENS=EASDFN_","
"RTN","EASEZF1",192,0)
 S EROOT="EAS("_EASAPP_")"
"RTN","EASEZF1",193,0)
 D VAL^DIE(2,IENS,FLD,"F",EZDATA,,EROOT,"ERR")
"RTN","EASEZF1",194,0)
 I $D(ERR) D ERROR^EASEZF2("AP",1,.ERR,"LINK") Q
"RTN","EASEZF1",195,0)
 D FILE^DIE("ES",EROOT,"ERR")
"RTN","EASEZF1",196,0)
 S ^EAS(712,EASAPP,10,XIEN,2)=XDATA_U_LINK
"RTN","EASEZF1",197,0)
 Q
"RTN","EASEZF1A")
0^5^B348068
"RTN","EASEZF1A",1,0)
EASEZF1A ;ALB/ma-Filing 1010EZ Data to Patient Database(AO) ;11/09/04  13:07
"RTN","EASEZF1A",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Nov 9, 2004
"RTN","EASEZF1A",3,0)
 ;
"RTN","EASEZF1A",4,0)
 Q
"RTN","EASEZF1A",5,0)
 ; File value "V(ietnam)" in Patient File #2
"RTN","EASEZF1A",6,0)
 ;  in field "Agent Orange Location" #3213
"RTN","EASEZF1A",7,0)
 ;  if answer is "Y(es)" in the field "Agent Orange exposure"
"RTN","EASEZF1A",8,0)
 ;  and File NULL if "N(o)"
"RTN","EASEZF1A",9,0)
F32102(EASAPP,EASDFN,EASDATA) ; File Value to Patient File #2
"RTN","EASEZF1A",10,0)
 ;input  EASAPP = ien to file #712
"RTN","EASEZF1A",11,0)
 ;       EASDFN = ien to #2
"RTN","EASEZF1A",12,0)
 ;       EASDATA = Agent Orange Exposure ("Y/N")
"RTN","EASEZF1A",13,0)
 ;
"RTN","EASEZF1A",14,0)
 N EZAOL,EZIENS
"RTN","EASEZF1A",15,0)
 S EZIENS=EASDFN_","
"RTN","EASEZF1A",16,0)
 S EZAOL(EASAPP,2,EZIENS,.3213)=$S(EASDATA["Y":"V",1:"")
"RTN","EASEZF1A",17,0)
 D FILE^DIE("","EZAOL("_EASAPP_")","ERR")
"RTN","EASEZF1A",18,0)
 Q
"RTN","EASEZF2")
0^3^B69490106
"RTN","EASEZF2",1,0)
EASEZF2 ;ALB/jap - Filing 1010EZ Data to Patient Database ;10/31/00  13:07
"RTN","EASEZF2",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**1,9,51,57**;Mar 15, 2001
"RTN","EASEZF2",3,0)
 ;
"RTN","EASEZF2",4,0)
F408(EASAPP,EASDFN) ;
"RTN","EASEZF2",5,0)
 N KEYIEN,FILE,SUBFILE,FLD,DATAKEY,MULTIPLE,MM,SECT,QUES,SUBIEN,ACCEPT,EZDATA,PTDATA,LINK
"RTN","EASEZF2",6,0)
 N DFN,DGPR12,INCYR,TESTYR,LASTINC,XLINK,EROOT,EAS,ERR,IENS,MSG,X,Y
"RTN","EASEZF2",7,0)
 Q:'$G(EASDFN)
"RTN","EASEZF2",8,0)
 ;determine income year for financial data
"RTN","EASEZF2",9,0)
 S Y=$P($G(^EAS(712,EASAPP,0)),U,6) I Y="" S Y=DT
"RTN","EASEZF2",10,0)
 S %F=5,X=$$FMTE^XLFDT(Y,%F),X=+$P(X,"/",3)-1,%DT="P" D ^%DT S INCYR=Y
"RTN","EASEZF2",11,0)
 S YREND=$E(DT,1,3)_"1231"
"RTN","EASEZF2",12,0)
 ;don't file any 408 data if applicant has income test for current year at this site
"RTN","EASEZF2",13,0)
 S LASTINC=$$LST^DGMTU(EASDFN,YREND,1) I LASTINC="" S LASTINC=$$LST^DGMTU(EASDFN,YREND,2)
"RTN","EASEZF2",14,0)
 S TESTYR=$P(LASTINC,U,2)
"RTN","EASEZF2",15,0)
 Q:($E(TESTYR,1,3)=$E(DT,1,3))&($P(LASTINC,U,5)>1)
"RTN","EASEZF2",16,0)
 ;
"RTN","EASEZF2",17,0)
 ;DGPR12("AP") is the Applicant's (veteran's) IEN in file #408.12
"RTN","EASEZF2",18,0)
 S DGPR12("AP")=""
"RTN","EASEZF2",19,0)
 ;add Applicant to file #408.12 if not there already;
"RTN","EASEZF2",20,0)
 ;make this addition even if no other financial data is available;
"RTN","EASEZF2",21,0)
 I '$D(^DGPR(408.12,"B",EASDFN)) D
"RTN","EASEZF2",22,0)
 .;create the file #408.12 record
"RTN","EASEZF2",23,0)
 .K EAS,ERR,EZIENS
"RTN","EASEZF2",24,0)
 .S EAS(EASAPP,408.12,"+1,",".01")=EASDFN
"RTN","EASEZF2",25,0)
 .S EAS(EASAPP,408.12,"+1,",".02")=1
"RTN","EASEZF2",26,0)
 .S EAS(EASAPP,408.12,"+1,",".03")=EASDFN_";DPT("
"RTN","EASEZF2",27,0)
 .S EROOT="EAS("_EASAPP_")"
"RTN","EASEZF2",28,0)
 .D UPDATE^DIE("S",EROOT,"EZIENS","ERR")
"RTN","EASEZF2",29,0)
 .S DGPR12("AP")=$G(EZIENS(1))
"RTN","EASEZF2",30,0)
 .Q:DGPR12("AP")=""
"RTN","EASEZF2",31,0)
 .;create the subfile #408.1275 record
"RTN","EASEZF2",32,0)
 .K EAS,ERR,EZIENS
"RTN","EASEZF2",33,0)
 .;S KEY=+$$KEY711^EASEZU1("APPLICANT DATE OF BIRTH")
"RTN","EASEZF2",34,0)
 .;S DOB=$P($$DATA712^EASEZU1(EASAPP,KEY,1),U,1)
"RTN","EASEZF2",35,0)
 .;use DOB from file #2
"RTN","EASEZF2",36,0)
 .S X=$P($G(^DPT(EASDFN,0)),U,3),%DT="PX" D ^%DT S DOB=Y
"RTN","EASEZF2",37,0)
 .S EAS(EASAPP,408.1275,"+1,"_DGPR12("AP")_",",".01")=DOB
"RTN","EASEZF2",38,0)
 .S EAS(EASAPP,408.1275,"+1,"_DGPR12("AP")_",",".02")="YES"
"RTN","EASEZF2",39,0)
 .D UPDATE^DIE("ES",EROOT,"EZIENS","ERR")
"RTN","EASEZF2",40,0)
 .;link 1010EZ data with new record in #408.12
"RTN","EASEZF2",41,0)
 I DGPR12("AP")="" S DGPR12("AP")=$O(^DGPR(408.12,"B",EASDFN,0))
"RTN","EASEZF2",42,0)
 ;if no record for Applicant in file #408.12 exists, then don't continue
"RTN","EASEZF2",43,0)
 Q:DGPR12("AP")=""
"RTN","EASEZF2",44,0)
 ;
"RTN","EASEZF2",45,0)
 ;kill local holding arrays
"RTN","EASEZF2",46,0)
 K AP,SP,CN,FLINK
"RTN","EASEZF2",47,0)
 ;get data for file #408.12,#408.13,#408.21,#408.22 into local arrays 
"RTN","EASEZF2",48,0)
 S SECT=""
"RTN","EASEZF2",49,0)
 F  S SECT=$O(^TMP("EZTEMP",$J,SECT)) Q:SECT=""  S MULTIPLE=0 D
"RTN","EASEZF2",50,0)
 .F  S MULTIPLE=$O(^TMP("EZTEMP",$J,SECT,MULTIPLE)) Q:MULTIPLE=""  S QUES="" D
"RTN","EASEZF2",51,0)
 ..F  S QUES=$O(^TMP("EZTEMP",$J,SECT,MULTIPLE,QUES)) Q:QUES=""  D
"RTN","EASEZF2",52,0)
 ...S DATAKEY=SECT_";"_QUES
"RTN","EASEZF2",53,0)
 ...;call to suppress may be redundant
"RTN","EASEZF2",54,0)
 ...Q:$$SUPPRESS^EASEZU4(EASAPP,DATAKEY,1,EASVRSN)
"RTN","EASEZF2",55,0)
 ...S X=^TMP("EZTEMP",$J,SECT,MULTIPLE,QUES)
"RTN","EASEZF2",56,0)
 ...S KEYIEN=$P(X,U,1),EZDATA=$P(X,U,2),ACCEPT=$P(X,U,3),SUBIEN=$P(X,U,4),PTDATA=$P(X,U,5)
"RTN","EASEZF2",57,0)
 ...S LN=^TMP("EZDATA",$J,KEYIEN),FILE=$P(LN,U,1),SUBFILE=$P(LN,U,2),FLD=$P(LN,U,3)
"RTN","EASEZF2",58,0)
 ...Q:($P(FILE,".",1)'=408)
"RTN","EASEZF2",59,0)
 ...S LINK=$P($G(^EAS(712,EASAPP,10,SUBIEN,2)),U,2)
"RTN","EASEZF2",60,0)
 ...S DATANM=$P($G(^EAS(711,KEYIEN,0)),U,1)
"RTN","EASEZF2",61,0)
 ...S MM=MULTIPLE S:DATANM["CHILD(N)" MM=MULTIPLE+1
"RTN","EASEZF2",62,0)
 ...I (SECT="IIF")!(SECT="IIG") S MM=MULTIPLE
"RTN","EASEZF2",63,0)
 ...S ARR=$S(DATANM["SPOUSE":"SP",DATANM["CHILD":"CN",1:"AP")
"RTN","EASEZF2",64,0)
 ...S @ARR@(MM,FILE,SUBFILE,FLD)=EZDATA_U_ACCEPT_U_SUBIEN_U_PTDATA_U_LINK
"RTN","EASEZF2",65,0)
 ;delete any Spouse or Dependent data if #.01 field for file #408.13 does not exist
"RTN","EASEZF2",66,0)
 I $D(SP(1,408.13,408.13,.01))'=1 K SP
"RTN","EASEZF2",67,0)
 ;if contributed to spouse, applicant lived with patient = NO
"RTN","EASEZF2",68,0)
 I +$P($G(AP(1,408.22,408.22,.07)),U,1) D
"RTN","EASEZF2",69,0)
 .S AP(1,408.22,408.22,.06)="NO^2^^^"_$P(AP(1,408.22,408.22,.07),U,5)
"RTN","EASEZF2",70,0)
 S MM=0 F  S MM=$O(CN(MM)) Q:'MM  D
"RTN","EASEZF2",71,0)
 .I $D(CN(MM,408.13,408.13,.01))'=1 K CN(MM) Q
"RTN","EASEZF2",72,0)
 .;check for amt contributed to child
"RTN","EASEZF2",73,0)
 .I +$P($G(CN(MM,408.22,408.22,.19)),U,1) D
"RTN","EASEZF2",74,0)
 ..S CN(MM,408.22,408.22,.1)="YES^2^^^"_$P(CN(MM,408.22,408.22,.19),U,5)
"RTN","EASEZF2",75,0)
 ..S CN(MM,408.22,408.22,.06)="NO^2^^^"_$P(CN(MM,408.22,408.22,.19),U,5)
"RTN","EASEZF2",76,0)
 ;
"RTN","EASEZF2",77,0)
 ;gather links to VistA for Applicant
"RTN","EASEZF2",78,0)
 S FLINK("AP",1,408.12)=DGPR12("AP")
"RTN","EASEZF2",79,0)
 F FILE=408.21,408.22 D
"RTN","EASEZF2",80,0)
 .S XLINK="",MULTIPLE=1,SUBFILE=FILE,FLD=""
"RTN","EASEZF2",81,0)
 .F  S FLD=$O(AP(MULTIPLE,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF2",82,0)
 ..S FLINK("AP",1,FILE)=+$P(AP(MULTIPLE,FILE,SUBFILE,FLD),U,5)
"RTN","EASEZF2",83,0)
 ;gather links to VistA for Spouse
"RTN","EASEZF2",84,0)
 F FILE=408.12,408.13,408.21,408.22 D
"RTN","EASEZF2",85,0)
 .S XLINK="",MULTIPLE=1,SUBFILE=FILE,FLD=""
"RTN","EASEZF2",86,0)
 .F  S FLD=$O(SP(MULTIPLE,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF2",87,0)
 ..S FLINK("SP",MULTIPLE,FILE)=+$P(SP(MULTIPLE,FILE,SUBFILE,FLD),U,5)
"RTN","EASEZF2",88,0)
 .I FILE=408.12 S SUBFILE=408.1275 F  S FLD=$O(SP(MULTIPLE,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF2",89,0)
 ..S FLINK("SP",MULTIPLE,SUBFILE)=$P($P(SP(MULTIPLE,FILE,SUBFILE,FLD),U,5),";",2)
"RTN","EASEZF2",90,0)
 ..S FLINK("SP",MULTIPLE,FILE)=$P($P(SP(MULTIPLE,FILE,SUBFILE,FLD),U,5),";",1)
"RTN","EASEZF2",91,0)
 ;gather links to VistA for Dependents
"RTN","EASEZF2",92,0)
 S MULTIPLE=0 F  S MULTIPLE=$O(CN(MULTIPLE)) Q:'MULTIPLE  D
"RTN","EASEZF2",93,0)
 .F FILE=408.13,408.12,408.21,408.22 D
"RTN","EASEZF2",94,0)
 ..S XLINK="",SUBFILE=FILE,FLD=""
"RTN","EASEZF2",95,0)
 ..F  S FLD=$O(CN(MULTIPLE,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF2",96,0)
 ...S FLINK("CN",MULTIPLE,FILE)=+$P(CN(MULTIPLE,FILE,SUBFILE,FLD),U,5)
"RTN","EASEZF2",97,0)
 ..I FILE=408.12 S SUBFILE=408.1275 F  S FLD=$O(CN(MULTIPLE,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF2",98,0)
 ...S FLINK("CN",MULTIPLE,SUBFILE)=$P($P(CN(MULTIPLE,FILE,SUBFILE,FLD),U,5),";",2)
"RTN","EASEZF2",99,0)
 ...S FLINK("CN",MULTIPLE,FILE)=$P($P(CN(MULTIPLE,FILE,SUBFILE,FLD),U,5),";",1)
"RTN","EASEZF2",100,0)
 ;
"RTN","EASEZF2",101,0)
 ;file data
"RTN","EASEZF2",102,0)
 Q:DGPR12("AP")=""
"RTN","EASEZF2",103,0)
 S DFN=EASDFN
"RTN","EASEZF2",104,0)
 D AP
"RTN","EASEZF2",105,0)
 I $D(FLINK("SP")) D SP^EASEZF3
"RTN","EASEZF2",106,0)
 I $D(FLINK("CN")) D CN^EASEZF4
"RTN","EASEZF2",107,0)
 D LINKUP^EASEZF4
"RTN","EASEZF2",108,0)
 ;
"RTN","EASEZF2",109,0)
 Q
"RTN","EASEZF2",110,0)
 ;
"RTN","EASEZF2",111,0)
AP ;file Applicant data
"RTN","EASEZF2",112,0)
 N MT,P22,MULTIPLE,FILE,SUBFILE,FLD,XDATA,ACCEPT,SUBIEN,EZDATA,EAS,ERR,KEY
"RTN","EASEZF2",113,0)
 F FILE=408.21,408.22 D
"RTN","EASEZF2",114,0)
 .S MULTIPLE=1,SUBFILE=FILE,FLD=""
"RTN","EASEZF2",115,0)
 .S XLINK=$G(FLINK("AP",1,FILE))
"RTN","EASEZF2",116,0)
 .;record in file #408.21 needed for all further data filing
"RTN","EASEZF2",117,0)
 .Q:(FILE'=408.21)&('$G(FLINK("AP",1,408.21)))
"RTN","EASEZF2",118,0)
 .;for data elements with link to database, 
"RTN","EASEZF2",119,0)
 .;only file 1010EZ data if accepted by user;
"RTN","EASEZF2",120,0)
 .;data in external format
"RTN","EASEZF2",121,0)
 .I XLINK D
"RTN","EASEZF2",122,0)
 ..S FLD="" F  S FLD=$O(AP(MULTIPLE,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF2",123,0)
 ...S XDATA=AP(MULTIPLE,FILE,SUBFILE,FLD),ACCEPT=$P(XDATA,U,2)
"RTN","EASEZF2",124,0)
 ...I ACCEPT D LINK(XDATA,FILE,FLD,"AP",MULTIPLE)
"RTN","EASEZF2",125,0)
 .;for data elements with no link to database, 
"RTN","EASEZF2",126,0)
 .;always create new record(s) to store 1010EZ data;
"RTN","EASEZF2",127,0)
 .;use internal data format
"RTN","EASEZF2",128,0)
 .I 'XLINK D
"RTN","EASEZF2",129,0)
 ..K EAS,ERR
"RTN","EASEZF2",130,0)
 ..S FLD="" F  S FLD=$O(AP(MULTIPLE,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF2",131,0)
 ...S EZDATA=$P(AP(MULTIPLE,FILE,SUBFILE,FLD),U,1)
"RTN","EASEZF2",132,0)
 ...S EAS(EASAPP,FILE,"+1,",FLD)=EZDATA
"RTN","EASEZF2",133,0)
 ..I FILE=408.21 D
"RTN","EASEZF2",134,0)
 ...S EAS(EASAPP,FILE,"+1,",".01")=INCYR
"RTN","EASEZF2",135,0)
 ...S EAS(EASAPP,FILE,"+1,",".02")=FLINK("AP",1,408.12)
"RTN","EASEZF2",136,0)
 ...S EAS(EASAPP,FILE,"+1,","101")=DUZ
"RTN","EASEZF2",137,0)
 ...S EAS(EASAPP,FILE,"+1,","102")=DT
"RTN","EASEZF2",138,0)
 ...S EAS(EASAPP,FILE,"+1,","103")=DUZ
"RTN","EASEZF2",139,0)
 ...S EAS(EASAPP,FILE,"+1,","104")=DT
"RTN","EASEZF2",140,0)
 ..I FILE=408.22,$G(FLINK("AP",1,408.21)) D
"RTN","EASEZF2",141,0)
 ...S EAS(EASAPP,FILE,"+1,",".01")=EASDFN
"RTN","EASEZF2",142,0)
 ...S EAS(EASAPP,FILE,"+1,",".02")=FLINK("AP",1,408.21)
"RTN","EASEZF2",143,0)
 ...I $G(SP(1,408.13,408.13,.01))'="" S EAS(EASAPP,FILE,"+1,",".05")=1
"RTN","EASEZF2",144,0)
 ...I $G(CN(1,408.13,408.13,.01))'="" S EAS(EASAPP,FILE,"+1,",".08")=1
"RTN","EASEZF2",145,0)
 ...S X=$G(EAS(EASAPP,FILE,"+1,",".06"))
"RTN","EASEZF2",146,0)
 ...S EAS(EASAPP,FILE,"+1,",".06")=$S(X="YES":1,X="NO":0,1:"")
"RTN","EASEZF2",147,0)
 ..S FLINK("AP",MULTIPLE,FILE)=$$NOLINK(.EAS,"AP",MULTIPLE)
"RTN","EASEZF2",148,0)
 ..S FLD="" F  S FLD=$O(AP(MULTIPLE,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF2",149,0)
 ...S SUBIEN=$P(AP(MULTIPLE,FILE,SUBFILE,FLD),U,3)
"RTN","EASEZF2",150,0)
 ...;store link to new record in subfile #712.01
"RTN","EASEZF2",151,0)
 ...S $P(AP(MULTIPLE,FILE,SUBFILE,FLD),U,5)=FLINK("AP",1,FILE)
"RTN","EASEZF2",152,0)
 ;
"RTN","EASEZF2",153,0)
 Q
"RTN","EASEZF2",154,0)
 ;
"RTN","EASEZF2",155,0)
LINK(XDATA,FILE,FLD,GRP,MULTIPLE) ;setup to call FM database server if link to file exists & data accepted
"RTN","EASEZF2",156,0)
 N MSG,EZDATA,SUBIEN,PTDATA,XLINK
"RTN","EASEZF2",157,0)
 K EAS,ERR
"RTN","EASEZF2",158,0)
 S EZDATA=$P(XDATA,U,1),SUBIEN=$P(XDATA,U,3),PTDATA=$P(XDATA,U,4),XLINK=$P(XDATA,U,5)
"RTN","EASEZF2",159,0)
 S IENS=XLINK_","
"RTN","EASEZF2",160,0)
 S EROOT="EAS("_EASAPP_")"
"RTN","EASEZF2",161,0)
 D VAL^DIE(FILE,IENS,FLD,"F",EZDATA,,EROOT,"ERR")
"RTN","EASEZF2",162,0)
 I $D(ERR) D ERROR(GRP,MULTIPLE,.ERR,"LINK") Q
"RTN","EASEZF2",163,0)
 ;file to database if input is valid
"RTN","EASEZF2",164,0)
 I '$D(ERR) D
"RTN","EASEZF2",165,0)
 .I FILE=408.21 D
"RTN","EASEZF2",166,0)
 ..S EAS(EASAPP,FILE,IENS,103)=DUZ
"RTN","EASEZF2",167,0)
 ..S EAS(EASAPP,FILE,IENS,104)=DT
"RTN","EASEZF2",168,0)
 .D FILE^DIE("S",EROOT,"ERR")
"RTN","EASEZF2",169,0)
 .;set any replaced data into subfile #712.01 for audit
"RTN","EASEZF2",170,0)
 .I SUBIEN S $P(^EAS(712,EASAPP,10,SUBIEN,2),U,1)=PTDATA
"RTN","EASEZF2",171,0)
 Q
"RTN","EASEZF2",172,0)
 ;
"RTN","EASEZF2",173,0)
NOLINK(EAS,GRP,MULTIPLE) ;add new record with accepted data if no link exists;
"RTN","EASEZF2",174,0)
 ;
"RTN","EASEZF2",175,0)
 K EZIENS,ERR,LINK
"RTN","EASEZF2",176,0)
 S EROOT="EAS("_EASAPP_")"
"RTN","EASEZF2",177,0)
 D UPDATE^DIE("S",EROOT,"EZIENS","ERR")
"RTN","EASEZF2",178,0)
 ;call to UPDATE should not return ERR since internal data formats are used, but just in case;
"RTN","EASEZF2",179,0)
 I $D(ERR) D ERROR(GRP,MULTIPLE,.ERR,"NOLINK")
"RTN","EASEZF2",180,0)
 ;return ien to new record
"RTN","EASEZF2",181,0)
 S LINK=$G(EZIENS(1))
"RTN","EASEZF2",182,0)
 Q LINK
"RTN","EASEZF2",183,0)
 ;
"RTN","EASEZF2",184,0)
ERROR(GRP,MULTIPLE,ERR,FROM) ;add FM error text to error msg
"RTN","EASEZF2",185,0)
 N L,LSTLN,ECODE,ENUMBER
"RTN","EASEZF2",186,0)
 S ECODE="" F  S ECODE=$O(ERR("DIERR","E",ECODE)) Q:ECODE=""  S ENUMBER=0 F  S ENUMBER=$O(ERR("DIERR","E",ECODE,ENUMBER)) Q:'ENUMBER  D
"RTN","EASEZF2",187,0)
 .S LSTLN=+$O(^TMP("1010EZERROR",$J,""),-1) I 'LSTLN S LSTLN=6
"RTN","EASEZF2",188,0)
 .S WHO=$S(GRP="SP":"SPOUSE",GRP="CN":"CHILD",1:"APPLICANT")
"RTN","EASEZF2",189,0)
 .I WHO="CHILD" S WHO=WHO_" #"_MULTIPLE
"RTN","EASEZF2",190,0)
 .S FIELD=$G(ERR("DIERR",ENUMBER,"PARAM","FIELD")),FILE=$G(ERR("DIERR",ENUMBER,"PARAM","FILE"))
"RTN","EASEZF2",191,0)
 .I FROM="LINK" D
"RTN","EASEZF2",192,0)
 ..S LSTLN=LSTLN+1,^TMP("1010EZERROR",$J,LSTLN,0)="1010EZ data for "_WHO_" was not filed to"
"RTN","EASEZF2",193,0)
 ..S LSTLN=LSTLN+1,^TMP("1010EZERROR",$J,LSTLN,0)="Field #"_FIELD_" of File #"_FILE_" because:"
"RTN","EASEZF2",194,0)
 .I FROM="NOLINK" D
"RTN","EASEZF2",195,0)
 ..S LSTLN=LSTLN+1,^TMP("1010EZERROR",$J,LSTLN,0)="A new record for "_WHO_" could not be created in"
"RTN","EASEZF2",196,0)
 ..S LSTLN=LSTLN+1,^TMP("1010EZERROR",$J,LSTLN,0)="File #"_FILE_" because Field #"_FIELD_" produced an error:"
"RTN","EASEZF2",197,0)
 .S L=0 F  S L=$O(ERR("DIERR",ENUMBER,"TEXT",L)) Q:'L  D
"RTN","EASEZF2",198,0)
 ..S LN=ERR("DIERR",ENUMBER,"TEXT",L)
"RTN","EASEZF2",199,0)
 ..I $L(LN)<50 S LSTLN=LSTLN+1,^TMP("1010EZERROR",$J,LSTLN,0)=LN Q
"RTN","EASEZF2",200,0)
 ..D WRAP(LN,.LSTLN)
"RTN","EASEZF2",201,0)
 .S LSTLN=LSTLN+1,^TMP("1010EZERROR",$J,LSTLN,0)=" "
"RTN","EASEZF2",202,0)
 Q
"RTN","EASEZF2",203,0)
 ;
"RTN","EASEZF2",204,0)
WRAP(LN,LSTLN) ;parse a long error text line into several message lines
"RTN","EASEZF2",205,0)
 N PART,BB
"RTN","EASEZF2",206,0)
 F  D  Q:$L(LN)<41
"RTN","EASEZF2",207,0)
 .S PART=""
"RTN","EASEZF2",208,0)
 .F BB=1:1:99 S PART=PART_$P(LN," ",BB)_" " I $L(PART)>40 D  Q
"RTN","EASEZF2",209,0)
 ..S LSTLN=LSTLN+1,^TMP("1010EZERROR",$J,LSTLN,0)=PART
"RTN","EASEZF2",210,0)
 ..S LN=$P(LN," ",BB+1,99)
"RTN","EASEZF2",211,0)
 S LSTLN=LSTLN+1,^TMP("1010EZERROR",$J,LSTLN,0)=LN
"RTN","EASEZF2",212,0)
 Q
"RTN","EASEZF3")
0^30^B21135276
"RTN","EASEZF3",1,0)
EASEZF3 ;ALB/jap - Filing 1010EZ Data to Patient Database ;10/31/00  13:07
"RTN","EASEZF3",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**1,57**;Mar 15, 2001
"RTN","EASEZF3",3,0)
 ;
"RTN","EASEZF3",4,0)
SP ;file Spouse data
"RTN","EASEZF3",5,0)
 N C,MULTIPLE,FILE,SUBFILE,FLD,XDATA,ACCEPT,SUBIEN,SEX,EZDATA,EAS,ERR
"RTN","EASEZF3",6,0)
 N KEY,X,Y,XLINK,DIC
"RTN","EASEZF3",7,0)
 ;process sequence must be 408.13 - 408.12 - 408.21 - 408.22
"RTN","EASEZF3",8,0)
 ;set sex of spouse
"RTN","EASEZF3",9,0)
 S KEY=+$$KEY711^EASEZU1("APPLICANT SEX")
"RTN","EASEZF3",10,0)
 S X=$$DATA712^EASEZU1(EASAPP,KEY,1),APSEX=$P(X,U,1),SEX=$S(APSEX="M":"FEMALE",1:"MALE")
"RTN","EASEZF3",11,0)
 S XLINK=$G(FLINK("SP",1,408.13)),PTDATA="" I XLINK D
"RTN","EASEZF3",12,0)
 .S FFF="408.13^408.13^.02" S PTDATA=$$GET^EASEZC1(XLINK,FFF)
"RTN","EASEZF3",13,0)
 .S SP(1,408.13,408.13,.02)=SEX_U_2_U_U_PTDATA_U_XLINK
"RTN","EASEZF3",14,0)
 ;
"RTN","EASEZF3",15,0)
 F FILE=408.13,408.12,408.21,408.22 D
"RTN","EASEZF3",16,0)
 .S MULTIPLE=1,SUBFILE=FILE,FLD=""
"RTN","EASEZF3",17,0)
 .S XLINK=$G(FLINK("SP",MULTIPLE,FILE))
"RTN","EASEZF3",18,0)
 .;record in file #408.13 is needed for all further data filng
"RTN","EASEZF3",19,0)
 .Q:(FILE'=408.13)&('$G(FLINK("SP",MULTIPLE,408.13)))
"RTN","EASEZF3",20,0)
 .;for data elements with link to database, 
"RTN","EASEZF3",21,0)
 .;only file 1010EZ data if accepted by user;
"RTN","EASEZF3",22,0)
 .;data in external format
"RTN","EASEZF3",23,0)
 .I XLINK D
"RTN","EASEZF3",24,0)
 ..;when #408.12 record exists, don't try to update subfile #408.1275
"RTN","EASEZF3",25,0)
 ..S FLD="" F  S FLD=$O(SP(MULTIPLE,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF3",26,0)
 ...S XDATA=SP(MULTIPLE,FILE,SUBFILE,FLD),ACCEPT=$P(XDATA,U,2)
"RTN","EASEZF3",27,0)
 ...I FILE=408.13,FLD=.09 S XDATA=$TR(XDATA,"-","")
"RTN","EASEZF3",28,0)
 ...I ACCEPT D LINK^EASEZF2(XDATA,FILE,FLD,"SP",MULTIPLE)
"RTN","EASEZF3",29,0)
 .;for data elements with no link to database, 
"RTN","EASEZF3",30,0)
 .;always create new record(s) to store 1010EZ data;
"RTN","EASEZF3",31,0)
 .;put data in internal format
"RTN","EASEZF3",32,0)
 .I 'XLINK D
"RTN","EASEZF3",33,0)
 ..K EAS,ERR
"RTN","EASEZF3",34,0)
 ..;supplement data and convert to internal format
"RTN","EASEZF3",35,0)
 ..S FLD="" F  S FLD=$O(SP(MULTIPLE,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF3",36,0)
 ...S EZDATA=$P(SP(MULTIPLE,FILE,SUBFILE,FLD),U,1)
"RTN","EASEZF3",37,0)
 ...S EAS(EASAPP,FILE,"+1,",FLD)=EZDATA
"RTN","EASEZF3",38,0)
 ..I FILE=408.13 D
"RTN","EASEZF3",39,0)
 ...S X=$G(EAS(EASAPP,FILE,"+1,",".03")) I X'="" D ^%DT S EAS(EASAPP,FILE,"+1,",".03")=Y
"RTN","EASEZF3",40,0)
 ...S X=$G(EAS(EASAPP,FILE,"+1,",".09")) I X'="" D
"RTN","EASEZF3",41,0)
 ....S SSN=$TR(X,"-","") S EAS(EASAPP,FILE,"+1,",".09")=SSN
"RTN","EASEZF3",42,0)
 ....I $D(^DGPR(408.13,"SSN",SSN)) S EAS(EASAPP,FILE,"+1,",".09")=""
"RTN","EASEZF3",43,0)
 ...S KEY=+$$KEY711^EASEZU1("APPLICANT SEX")
"RTN","EASEZF3",44,0)
 ...S X=$P($$DATA712^EASEZU1(EASAPP,KEY,1),U,1),SEX=$S(X="M":"F",1:"M")
"RTN","EASEZF3",45,0)
 ...S EAS(EASAPP,FILE,"+1,",".02")=SEX
"RTN","EASEZF3",46,0)
 ...S X=$G(EAS(EASAPP,FILE,"+1,","1.6")) I X'="" D
"RTN","EASEZF3",47,0)
 ....S DIC=5,DIC(0)="X" D ^DIC
"RTN","EASEZF3",48,0)
 ....S EAS(EASAPP,FILE,"+1,","1.6")=$S(+Y:+Y,1:"")
"RTN","EASEZF3",49,0)
 ..I FILE=408.12,$G(FLINK("SP",MULTIPLE,408.13)) D F40812("SP",1)
"RTN","EASEZF3",50,0)
 ..I FILE=408.21,$G(FLINK("SP",MULTIPLE,408.12)) D
"RTN","EASEZF3",51,0)
 ...S EAS(EASAPP,FILE,"+1,",".01")=INCYR
"RTN","EASEZF3",52,0)
 ...S EAS(EASAPP,FILE,"+1,",".02")=FLINK("SP",MULTIPLE,408.12)
"RTN","EASEZF3",53,0)
 ...S EAS(EASAPP,FILE,"+1,","101")=DUZ
"RTN","EASEZF3",54,0)
 ...S EAS(EASAPP,FILE,"+1,","102")=DT
"RTN","EASEZF3",55,0)
 ...S EAS(EASAPP,FILE,"+1,","103")=DUZ
"RTN","EASEZF3",56,0)
 ...S EAS(EASAPP,FILE,"+1,","104")=DT
"RTN","EASEZF3",57,0)
 ..I FILE=408.22,$G(FLINK("SP",MULTIPLE,408.21)) D
"RTN","EASEZF3",58,0)
 ...S EAS(EASAPP,FILE,"+1,",".01")=EASDFN
"RTN","EASEZF3",59,0)
 ...S EAS(EASAPP,FILE,"+1,",".02")=FLINK("SP",MULTIPLE,408.21)
"RTN","EASEZF3",60,0)
 ..I FILE'=408.12 D
"RTN","EASEZF3",61,0)
 ...S FLINK("SP",MULTIPLE,FILE)=$$NOLINK^EASEZF2(.EAS,"SP",MULTIPLE)
"RTN","EASEZF3",62,0)
 ...S FLD="" F  S FLD=$O(SP(MULTIPLE,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF3",63,0)
 ....S $P(SP(MULTIPLE,FILE,SUBFILE,FLD),U,5)=FLINK("SP",MULTIPLE,FILE)
"RTN","EASEZF3",64,0)
 Q
"RTN","EASEZF3",65,0)
 ;
"RTN","EASEZF3",66,0)
F40812(TYPE,MULT) ;create a new record in file #408.12
"RTN","EASEZF3",67,0)
 ;input TYPE = "SP" for Souse or "CN" for Child
"RTN","EASEZF3",68,0)
 ;      MULT = always 1 for spouse; or
"RTN","EASEZF3",69,0)
 ;             1st subscript of CN array for child
"RTN","EASEZF3",70,0)
 ;can't use normal FileMan data entry
"RTN","EASEZF3",71,0)
 N C,ARR,FILE,SUBFILE,FLD,DGPRIEN,XDATE,SUBIEN,RELATE,XX,X,Y,DA,DIK,EAS,ERR
"RTN","EASEZF3",72,0)
 S DGPRIEN=""
"RTN","EASEZF3",73,0)
 S ARR=TYPE
"RTN","EASEZF3",74,0)
 S FILE=408.12,SUBFILE=408.12
"RTN","EASEZF3",75,0)
 I TYPE="SP" S RELATE=2
"RTN","EASEZF3",76,0)
 I TYPE="CN" D
"RTN","EASEZF3",77,0)
 .S X=$P($G(CN(MULT,FILE,SUBFILE,".02")),U,1)
"RTN","EASEZF3",78,0)
 .S RELATE=$S(X="SON":3,X="DAUGHTER":4,1:99)
"RTN","EASEZF3",79,0)
 ;verify that no record points to known file #408.13 record
"RTN","EASEZF3",80,0)
 S C=FLINK(TYPE,MULT,408.13)_";DGPR(408.13,"
"RTN","EASEZF3",81,0)
 I $D(^DGPR(408.12,"C",C)) S DGPRIEN=$O(^DGPR(408.12,"C",C,0))
"RTN","EASEZF3",82,0)
 ;if it does, quit w/o filing
"RTN","EASEZF3",83,0)
 Q:DGPRIEN
"RTN","EASEZF3",84,0)
 ;otherwise create a new entry
"RTN","EASEZF3",85,0)
 L +^DGPR(408.12,0):30
"RTN","EASEZF3",86,0)
 K DA,DIK
"RTN","EASEZF3",87,0)
 S DGPRIEN=$P(^DGPR(408.12,0),U,3)+1,$P(^DGPR(408.12,0),U,3)=DGPRIEN
"RTN","EASEZF3",88,0)
 S ^DGPR(408.12,DGPRIEN,0)=EASDFN_U_RELATE_U_C
"RTN","EASEZF3",89,0)
 S DA=DGPRIEN,DIK="^DGPR(408.12,",DIK(1)=".01^" D EN^DIK S DIK(1)=".03" D EN^DIK
"RTN","EASEZF3",90,0)
 S X=$P(^DGPR(408.12,0),U,4),$P(^DGPR(408.12,0),U,4)=X+1
"RTN","EASEZF3",91,0)
 L -^DGPR(408.12,0)
"RTN","EASEZF3",92,0)
 S FLINK(TYPE,MULT,408.12)=DGPRIEN
"RTN","EASEZF3",93,0)
 ;don't continue if file#408.12 record doesn't exist
"RTN","EASEZF3",94,0)
 Q:'$G(FLINK(TYPE,MULT,408.12))
"RTN","EASEZF3",95,0)
 ;store the link in subfile #712.01 record
"RTN","EASEZF3",96,0)
 S FLD="" F  S FLD=$O(@ARR@(MULT,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF3",97,0)
 .S SUBIEN=$P(@ARR@(MULT,FILE,SUBFILE,FLD),U,3)
"RTN","EASEZF3",98,0)
 .S $P(@ARR@(MULT,FILE,SUBFILE,FLD),U,5)=FLINK(TYPE,MULT,FILE)
"RTN","EASEZF3",99,0)
 ;there's never more than one array node for subfile #408.1275; for field #.01;
"RTN","EASEZF3",100,0)
 S SUBFILE=408.1275,FLD=".01"
"RTN","EASEZF3",101,0)
 S XX=$G(@ARR@(MULT,FILE,SUBFILE,FLD))
"RTN","EASEZF3",102,0)
 K EAS
"RTN","EASEZF3",103,0)
 S XDATE=$P(XX,U,1)
"RTN","EASEZF3",104,0)
 S SUBIEN=$P(XX,U,3)
"RTN","EASEZF3",105,0)
 Q:XDATE=""
"RTN","EASEZF3",106,0)
 S X=XDATE D ^%DT S XDATE=Y
"RTN","EASEZF3",107,0)
 S EAS(EASAPP,SUBFILE,"+1,"_FLINK(TYPE,MULT,408.12)_",",".01")=XDATE
"RTN","EASEZF3",108,0)
 S EAS(EASAPP,SUBFILE,"+1,"_FLINK(TYPE,MULT,408.12)_",",".02")=1
"RTN","EASEZF3",109,0)
 S FLINK(TYPE,MULT,SUBFILE)=$$NOLINK^EASEZF2(.EAS,TYPE,MULT)
"RTN","EASEZF3",110,0)
 Q:FLINK(TYPE,MULT,SUBFILE)=""
"RTN","EASEZF3",111,0)
 ;store link to new subrecord in subfile #712.01
"RTN","EASEZF3",112,0)
 S $P(@ARR@(MULT,FILE,SUBFILE,FLD),U,5)=FLINK(TYPE,MULT,FILE)_";"_FLINK(TYPE,MULT,SUBFILE)
"RTN","EASEZF3",113,0)
 Q
"RTN","EASEZF4")
0^28^B20073619
"RTN","EASEZF4",1,0)
EASEZF4 ;ALB/jap - Filing 1010EZ Data to Patient Database ;10/31/00  13:07
"RTN","EASEZF4",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**1,51,57**;Mar 15, 2001
"RTN","EASEZF4",3,0)
 ;
"RTN","EASEZF4",4,0)
CN ;file Dependent/Child data
"RTN","EASEZF4",5,0)
 N MULTIPLE,FILE,SUBFILE,FLD,XDATA,ACCEPT,SUBIEN,SEX,SSN,EZDATA,EAS,ERR,X,Y
"RTN","EASEZF4",6,0)
 ;process sequence must be 408.13 - 408.12 - 408.21 - 408.22
"RTN","EASEZF4",7,0)
 S MULTIPLE=0 F  S MULTIPLE=$O(CN(MULTIPLE)) Q:'MULTIPLE  F FILE=408.13,408.12,408.21,408.22 D
"RTN","EASEZF4",8,0)
 . S SUBFILE=FILE,FLD=""
"RTN","EASEZF4",9,0)
 . S XLINK=$G(FLINK("CN",MULTIPLE,FILE))
"RTN","EASEZF4",10,0)
 . ;record in file #408.13 is needed for all further data filng
"RTN","EASEZF4",11,0)
 . Q:(FILE'=408.13)&('$G(FLINK("CN",MULTIPLE,408.13)))
"RTN","EASEZF4",12,0)
 . ;for data elements with link to database, 
"RTN","EASEZF4",13,0)
 . ;only file 1010EZ data if accepted by user;
"RTN","EASEZF4",14,0)
 . ;data in external format
"RTN","EASEZF4",15,0)
 . I XLINK D
"RTN","EASEZF4",16,0)
 . . ;when #408.12 record exists, don't try to update subfile #408.1275
"RTN","EASEZF4",17,0)
 . . S FLD="" F  S FLD=$O(CN(MULTIPLE,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF4",18,0)
 . . . S XDATA=CN(MULTIPLE,FILE,SUBFILE,FLD),ACCEPT=$P(XDATA,U,2)
"RTN","EASEZF4",19,0)
 . . . I FILE=408.13,FLD=.09 S XDATA=$TR(XDATA,"-","")
"RTN","EASEZF4",20,0)
 . . . I ACCEPT D LINK^EASEZF2(XDATA,FILE,FLD,"CN",MULTIPLE)
"RTN","EASEZF4",21,0)
 . ;for data elements with no link to database, 
"RTN","EASEZF4",22,0)
 . ;always create new record(s) to store 1010EZ data;
"RTN","EASEZF4",23,0)
 . ;put data in internal format
"RTN","EASEZF4",24,0)
 . I 'XLINK D
"RTN","EASEZF4",25,0)
 . . K EAS,ERR
"RTN","EASEZF4",26,0)
 . . S FLD="" F  S FLD=$O(CN(MULTIPLE,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF4",27,0)
 . . . S EZDATA=$P(CN(MULTIPLE,FILE,SUBFILE,FLD),U,1)
"RTN","EASEZF4",28,0)
 . . . S EAS(EASAPP,FILE,"+1,",FLD)=EZDATA
"RTN","EASEZF4",29,0)
 . . ;supplement data and convert to internal format
"RTN","EASEZF4",30,0)
 . . I FILE=408.13 D
"RTN","EASEZF4",31,0)
 . . . S X=$G(EAS(EASAPP,FILE,"+1,",".03")) I X'="" D ^%DT S EAS(EASAPP,FILE,"+1,",".03")=Y
"RTN","EASEZF4",32,0)
 . . . S X=$G(EAS(EASAPP,FILE,"+1,",".09")) I X'="" D
"RTN","EASEZF4",33,0)
 . . . . S SSN=$TR(X,"-","") S EAS(EASAPP,FILE,"+1,",".09")=SSN
"RTN","EASEZF4",34,0)
 . . . . I $D(^DGPR(408.13,"SSN",SSN)) S EAS(EASAPP,FILE,"+1,",".09")=""
"RTN","EASEZF4",35,0)
 . . . S X=$P($G(CN(MULTIPLE,408.12,408.12,.02)),U,1) S SEX=$S(X["SON":"M",X["DAUGHTER":"F",1:"")
"RTN","EASEZF4",36,0)
 . . . I SEX'="" S EAS(EASAPP,FILE,"+1,",".02")=SEX
"RTN","EASEZF4",37,0)
 . . I FILE=408.12,$G(FLINK("CN",MULTIPLE,408.13)) D F40812^EASEZF3("CN",MULTIPLE)
"RTN","EASEZF4",38,0)
 . . I FILE=408.21,$G(FLINK("CN",MULTIPLE,408.12)) D
"RTN","EASEZF4",39,0)
 . . . S EAS(EASAPP,FILE,"+1,",".01")=INCYR
"RTN","EASEZF4",40,0)
 . . . S EAS(EASAPP,FILE,"+1,",".02")=FLINK("CN",MULTIPLE,408.12)
"RTN","EASEZF4",41,0)
 . . . S EAS(EASAPP,FILE,"+1,","101")=DUZ
"RTN","EASEZF4",42,0)
 . . . S EAS(EASAPP,FILE,"+1,","102")=DT
"RTN","EASEZF4",43,0)
 . . . S EAS(EASAPP,FILE,"+1,","103")=DUZ
"RTN","EASEZF4",44,0)
 . . . S EAS(EASAPP,FILE,"+1,","104")=DT
"RTN","EASEZF4",45,0)
 . . I FILE=408.22,$G(FLINK("CN",MULTIPLE,408.21)) D
"RTN","EASEZF4",46,0)
 . . . S EAS(EASAPP,FILE,"+1,",".01")=EASDFN
"RTN","EASEZF4",47,0)
 . . . S EAS(EASAPP,FILE,"+1,",".02")=FLINK("CN",MULTIPLE,408.21)
"RTN","EASEZF4",48,0)
 . . . S X=$P($G(CN(MULTIPLE,FILE,SUBFILE,".1")),U,1) I X S EAS(EASAPP,FILE,"+1,",".1")="Y"
"RTN","EASEZF4",49,0)
 . . . ;EAS*1.0*57 - ALLOW NULL VALUES FOR .09 AND .18
"RTN","EASEZF4",50,0)
 . . . S X=$P($G(CN(MULTIPLE,FILE,SUBFILE,".09")),U,1),EAS(EASAPP,FILE,"+1,",".09")=$S(X["Y":1,X["N":0,1:"")
"RTN","EASEZF4",51,0)
 . . . S X=$P($G(CN(MULTIPLE,408.21,408.21,".14")),U,1) I X S EAS(EASAPP,FILE,"+1,",".11")=1
"RTN","EASEZF4",52,0)
 . . . S X=$P($G(CN(MULTIPLE,FILE,SUBFILE,".18")),U,1),EAS(EASAPP,FILE,"+1,",".18")=$S(X["Y":1,X["N":0,1:"")
"RTN","EASEZF4",53,0)
 . . . S X=$G(EAS(EASAPP,FILE,"+1,",".1"))
"RTN","EASEZF4",54,0)
 . . . S EAS(EASAPP,FILE,"+1,",".1")=$S(X="YES":1,X="NO":0,1:"")
"RTN","EASEZF4",55,0)
 . . . S X=$G(EAS(EASAPP,FILE,"+1,",".06"))
"RTN","EASEZF4",56,0)
 . . . S EAS(EASAPP,FILE,"+1,",".06")=$S(X="YES":1,X="NO":0,1:"")
"RTN","EASEZF4",57,0)
 . . I FILE'=408.12 D
"RTN","EASEZF4",58,0)
 . . . S FLINK("CN",MULTIPLE,FILE)=$$NOLINK^EASEZF2(.EAS)
"RTN","EASEZF4",59,0)
 . . . S FLD="" F  S FLD=$O(CN(MULTIPLE,FILE,SUBFILE,FLD)) Q:FLD=""  D
"RTN","EASEZF4",60,0)
 . . . . S $P(CN(MULTIPLE,FILE,SUBFILE,FLD),U,5)=FLINK("CN",MULTIPLE,FILE)
"RTN","EASEZF4",61,0)
 Q
"RTN","EASEZF4",62,0)
 ;
"RTN","EASEZF4",63,0)
LINKUP ;
"RTN","EASEZF4",64,0)
 N SUBIEN,KEYIEN,MULTIPLE,FILE,SUBFILE,FIELD,DATAKEY,DATANM,TYPE,LINK,X
"RTN","EASEZF4",65,0)
 S SUBIEN=0 F  S SUBIEN=$O(^EAS(712,EASAPP,10,SUBIEN)) Q:+SUBIEN=0  D
"RTN","EASEZF4",66,0)
 . S X=$G(^EAS(712,EASAPP,10,SUBIEN,1))
"RTN","EASEZF4",67,0)
 . ;quit if no data to file
"RTN","EASEZF4",68,0)
 . Q:(($P(X,U,1)="")&($P(X,U,2)=""))
"RTN","EASEZF4",69,0)
 . S TYPE=""
"RTN","EASEZF4",70,0)
 . S KEYIEN=$P(^EAS(712,EASAPP,10,SUBIEN,0),U,1),MULTIPLE=$P(^(0),U,2)
"RTN","EASEZF4",71,0)
 . S DATANM=$P(^EAS(711,KEYIEN,0),U,1),DATAKEY=$P(^(0),U,2),FILE=$P(^EAS(711,KEYIEN,1),U,1),SUBFILE=$P(^(1),U,2),FIELD=$P(^(1),U,3)
"RTN","EASEZF4",72,0)
 . Q:FILE<408
"RTN","EASEZF4",73,0)
 . Q:FILE>408.22
"RTN","EASEZF4",74,0)
 . I SUBFILE=408.1275 S FILE=SUBFILE
"RTN","EASEZF4",75,0)
 . I DATANM["CHILD" S TYPE="CN"
"RTN","EASEZF4",76,0)
 . I DATANM["CHILD(N)" D
"RTN","EASEZF4",77,0)
 . . ;necessary because some version 6 income data for child1 is brought-in via a child(n) multiple
"RTN","EASEZF4",78,0)
 . . S MULTIPLE=MULTIPLE+1
"RTN","EASEZF4",79,0)
 . . Q:$G(EASVRSN)<6
"RTN","EASEZF4",80,0)
 . . I FILE=408.21,(".08;.14;.17"[FIELD) S MULTIPLE=MULTIPLE-1
"RTN","EASEZF4",81,0)
 . I DATANM["SPOUSE" S TYPE="SP"
"RTN","EASEZF4",82,0)
 . I TYPE="" S TYPE="AP"
"RTN","EASEZF4",83,0)
 . S LINK=$G(FLINK(TYPE,MULTIPLE,FILE))
"RTN","EASEZF4",84,0)
 . Q:'LINK
"RTN","EASEZF4",85,0)
 . Q:$$SUPPRESS^EASEZU4(EASAPP,DATAKEY,1,$G(EASVRSN))
"RTN","EASEZF4",86,0)
 . I FILE=408.1275 S LINK=FLINK(TYPE,MULTIPLE,408.12)_";"_FLINK(TYPE,MULTIPLE,FILE)
"RTN","EASEZF4",87,0)
 . S $P(^EAS(712,EASAPP,10,SUBIEN,2),U,2)=LINK
"RTN","EASEZF4",88,0)
 Q
"RTN","EASEZI")
0^26^B25119785
"RTN","EASEZI",1,0)
EASEZI ;ALB/jap - Database Inquiry & Record Finder for 1010EZ Processing ;10/12/00  13:08
"RTN","EASEZI",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**1,9,44,51,57**;Mar 15, 2001
"RTN","EASEZI",3,0)
 ;
"RTN","EASEZI",4,0)
DFN(EASAPP,EASDFN) ;match or add 1010EZ applicant to Patient file #2
"RTN","EASEZI",5,0)
 ;
"RTN","EASEZI",6,0)
 ;input  
"RTN","EASEZI",7,0)
 ;  EASAPP = application ien in file #712
"RTN","EASEZI",8,0)
 ;output 
"RTN","EASEZI",9,0)
 ;  EASDFN = valid ien in file #2; passed by reference
"RTN","EASEZI",10,0)
 ;           OR -1 if no patient match made;
"RTN","EASEZI",11,0)
 ;           note: this may be an existing patient or one newly created by user action
"RTN","EASEZI",12,0)
 ;
"RTN","EASEZI",13,0)
 ;This entry point it used only for initial match of Applicant with Patient database.
"RTN","EASEZI",14,0)
 ;
"RTN","EASEZI",15,0)
 N DFN,DGNEWPF,DGRPTOUT,EZDATA,KEY,NAME,SSN,DOB,SEX,KEYIEN,ACCEPT,ARRAY,RECD
"RTN","EASEZI",16,0)
 N VETTYPE,NEW,TSSN,REM,N,X,DA,DR,DIE,DIC,DIQ,ALREADY,OUT,FILE,SUBFILE,FLD,ELIGVER,SVCVER,APPTVER
"RTN","EASEZI",17,0)
 Q:'EASAPP
"RTN","EASEZI",18,0)
 ;do not proceed if link to file #2 already established
"RTN","EASEZI",19,0)
 S EASDFN=$P($G(^EAS(712,EASAPP,0)),U,10) Q:EASDFN
"RTN","EASEZI",20,0)
 D FULL^VALM1 W @IOF
"RTN","EASEZI",21,0)
 S EASEZNEW="",ELIGVER=0,SVCVER=0,APPTVER=0
"RTN","EASEZI",22,0)
 S KEY=$$KEY711^EASEZU1("APPLICANT SEX")
"RTN","EASEZI",23,0)
 S SEX=$P($$DATA712^EASEZU1(EASAPP,KEY),U,1),SEX=$S(SEX="M":"Male",SEX="F":"Female",1:"")
"RTN","EASEZI",24,0)
 S DIQ="ARRAY",DIQ(0)="E",DA=EASAPP,DR="1;2;3;3.3",DIC=712 D EN^DIQ1
"RTN","EASEZI",25,0)
 S NAME=$G(ARRAY(712,EASAPP,1,"E"))
"RTN","EASEZI",26,0)
 S SSN=$P($G(ARRAY(712,EASAPP,2,"E")),"&",1)
"RTN","EASEZI",27,0)
 S DOB=$P($G(ARRAY(712,EASAPP,2,"E")),"&",2)
"RTN","EASEZI",28,0)
 S RECD=$G(ARRAY(712,EASAPP,3,"E"))
"RTN","EASEZI",29,0)
 S VETTYPE=$G(ARRAY(712,EASAPP,3.3,"E"))
"RTN","EASEZI",30,0)
 W !,"Applicant Data",?24,"Application #: ",EASAPP,?48,"Received: ",RECD,!
"RTN","EASEZI",31,0)
 W !,"Name: ",NAME
"RTN","EASEZI",32,0)
 W !,"SSN: ",SSN,?24,"DOB: ",DOB,?48,"Sex: ",SEX
"RTN","EASEZI",33,0)
 W !,"Veteran Type: ",VETTYPE
"RTN","EASEZI",34,0)
 W !!,"Enter Applicant data as prompted --"
"RTN","EASEZI",35,0)
 ;
"RTN","EASEZI",36,0)
 ;Get Patient file (#2) IEN - DFN
"RTN","EASEZI",37,0)
 D GETPAT^DGRPTU("",1,.DFN,.DGNEWPF)
"RTN","EASEZI",38,0)
 Q:($G(DFN)'>0)
"RTN","EASEZI",39,0)
 ;if DGNEWPF=1 then applicant has just been added to file #2 as new patient
"RTN","EASEZI",40,0)
 S NEW=""
"RTN","EASEZI",41,0)
 I DGNEWPF D
"RTN","EASEZI",42,0)
 . S NEW=1
"RTN","EASEZI",43,0)
 . ;add a remark to file #2 record to help keep track of new patients added by 1010EZ
"RTN","EASEZI",44,0)
 . S REM="NEW PT. FROM ELECTRONIC 10-10EZ -- IN PROCESS"
"RTN","EASEZI",45,0)
 . S DA=DFN,DIE="^DPT(",DR=".091///^S X=REM"
"RTN","EASEZI",46,0)
 . D ^DIE
"RTN","EASEZI",47,0)
 ;if seems to be not new, check remark field just to make sure
"RTN","EASEZI",48,0)
 I NEW="" D
"RTN","EASEZI",49,0)
 . S REM="NEW PT. FROM ELECTRONIC 10-10EZ -- IN PROCESS"
"RTN","EASEZI",50,0)
 . I $P(^DPT(DFN,0),U,10)=REM S NEW=1
"RTN","EASEZI",51,0)
 . S REM="New Patient record added by ELECTRONIC 10-10EZ."
"RTN","EASEZI",52,0)
 . I $P(^DPT(DFN,0),U,10)=REM S NEW=1
"RTN","EASEZI",53,0)
 ;MPI Query
"RTN","EASEZI",54,0)
 S X="MPIFAPI" X ^%ZOSF("TEST")  D
"RTN","EASEZI",55,0)
 . Q:'$T
"RTN","EASEZI",56,0)
 . K MPIFRTN
"RTN","EASEZI",57,0)
 . D MPIQ^MPIFAPI(DFN)
"RTN","EASEZI",58,0)
 . K MPIFRTN,MPIQRYNM
"RTN","EASEZI",59,0)
 ;check for an in-process application already linked to this DFN
"RTN","EASEZI",60,0)
 S OUT=0,ALREADY=0 F  S ALREADY=$O(^EAS(712,"AC",DFN,ALREADY)) Q:'ALREADY  D  Q:OUT
"RTN","EASEZI",61,0)
 . S FILDATE=$P($G(^EAS(712,ALREADY,2)),U,5)
"RTN","EASEZI",62,0)
 . S CLSDATE=$P($G(^EAS(712,ALREADY,2)),U,9)
"RTN","EASEZI",63,0)
 . I 'FILDATE,'CLSDATE S OUT=1 D
"RTN","EASEZI",64,0)
 . . W !!?3,"Sorry... cannot link to selected Patient."
"RTN","EASEZI",65,0)
 . . W !?3,"Application #"_ALREADY_" is already linked to this Patient,"
"RTN","EASEZI",66,0)
 . . W !?3,"and is still in-process."
"RTN","EASEZI",67,0)
 . . D PAUSE^VALM1 K FILDATE,CLSDATE
"RTN","EASEZI",68,0)
 Q:OUT
"RTN","EASEZI",69,0)
 D RESET^EASEZI1
"RTN","EASEZI",70,0)
 Q
"RTN","EASEZI",71,0)
 ;
"RTN","EASEZI",72,0)
I201(EASDFN,EASARRAY) ;retrieve ien(s) in subfile #2.01
"RTN","EASEZI",73,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZI",74,0)
 ;output EASARRAY = ien(s) to #2.01
"RTN","EASEZI",75,0)
 ;                  each array element = EASDFN;subfile_ien
"RTN","EASEZI",76,0)
 ;
"RTN","EASEZI",77,0)
 N N,IEN
"RTN","EASEZI",78,0)
 S IEN=0,N=0 F  S IEN=$O(^DPT(EASDFN,.01,IEN)) Q:'IEN  S N=N+1,EASARRAY(N)=EASDFN_";"_IEN
"RTN","EASEZI",79,0)
 Q
"RTN","EASEZI",80,0)
 ;
"RTN","EASEZI",81,0)
I202(EASDFN,EASARRAY) ;retrieve ien(s) in subfile #2.02
"RTN","EASEZI",82,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZI",83,0)
 ;output EASARRAY = ien(s) to #2.01
"RTN","EASEZI",84,0)
 ;                  each array element = EASDFN;subfile_ien
"RTN","EASEZI",85,0)
 ;
"RTN","EASEZI",86,0)
 N N,IEN
"RTN","EASEZI",87,0)
 S IEN=0,N=0 F  S IEN=$O(^DPT(EASDFN,.02,IEN)) Q:'IEN  S N=N+1,EASARRAY(N)=EASDFN_";"_IEN
"RTN","EASEZI",88,0)
 Q
"RTN","EASEZI",89,0)
 ;
"RTN","EASEZI",90,0)
I206(EASDFN,EASARRAY) ;retrieve ien(s) in subfile #2.06
"RTN","EASEZI",91,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZI",92,0)
 ;output EASARRAY = ien(s) to #2.01
"RTN","EASEZI",93,0)
 ;                  each array element = EASDFN;subfile_ien
"RTN","EASEZI",94,0)
 ;
"RTN","EASEZI",95,0)
 N N,IEN
"RTN","EASEZI",96,0)
 S IEN=0,N=0 F  S IEN=$O(^DPT(EASDFN,.06,IEN)) Q:'IEN  S N=N+1,EASARRAY(N)=EASDFN_";"_IEN
"RTN","EASEZI",97,0)
 Q
"RTN","EASEZI",98,0)
 ;
"RTN","EASEZI",99,0)
I2101(EASDFN,EASARRAY) ;retrieve ien to subfile #2.101
"RTN","EASEZI",100,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZI",101,0)
 ;output EASARRAY = most recent ien in #2.101;
"RTN","EASEZI",102,0)
 ;                  array element = EASDFN;subfile_ien
"RTN","EASEZI",103,0)
 ;
"RTN","EASEZI",104,0)
 N N,IEN,ARR,LAST
"RTN","EASEZI",105,0)
 S IEN=0,N=0 F  S IEN=$O(^DPT(EASDFN,"DIS",IEN)) Q:'IEN  D
"RTN","EASEZI",106,0)
 . S RDATE=$P(^DPT(EASDFN,"DIS",IEN,0),U,1),ARR(RDATE)=IEN
"RTN","EASEZI",107,0)
 I $D(ARR) D
"RTN","EASEZI",108,0)
 . S LAST=$O(ARR(999999999),-1),IEN=ARR(LAST)
"RTN","EASEZI",109,0)
 . S EASARRAY(1)=EASDFN_";"_IEN
"RTN","EASEZI",110,0)
 Q
"RTN","EASEZI",111,0)
 ;
"RTN","EASEZI",112,0)
I2711(EASDFN,EASARRAY) ;retrieve ien to file #27.11
"RTN","EASEZI",113,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZI",114,0)
 ;output EASARRAY = current enrollment ien in #27.11;
"RTN","EASEZI",115,0)
 ;                  array element = ien
"RTN","EASEZI",116,0)
 N CUR
"RTN","EASEZI",117,0)
 S CUR=$$FINDCUR^DGENA(+EASDFN)
"RTN","EASEZI",118,0)
 S EASARRAY(1)=CUR
"RTN","EASEZI",119,0)
 Q
"RTN","EASEZI",120,0)
 ;
"RTN","EASEZI",121,0)
I408(EASDFN,EASAPP,EASARRAY) ;retrieve ien(s) to files #408.12,#408.13,#408.21,#408.22
"RTN","EASEZI",122,0)
 ;
"RTN","EASEZI",123,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZI",124,0)
 ;      EASAPP    = ien to #712
"RTN","EASEZI",125,0)
 ;output EASARRAY = ien(s) to files; passed by reference
"RTN","EASEZI",126,0)
 ;       array(408,"V",1) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;veteran data
"RTN","EASEZI",127,0)
 ;       array(408,"S",1) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;spouse data
"RTN","EASEZI",128,0)
 ;       array(408,"C",multiple) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;child data
"RTN","EASEZI",129,0)
 ;   where ien_#408.13 = ien;global_root
"RTN","EASEZI",130,0)
 ;
"RTN","EASEZI",131,0)
 N CURINCYR,X,Y,DIC,DA,DR,DIQ,EAS,DEP,REL,IX,JX,KX,I13,SUB1,SUB2,INCYR,PT
"RTN","EASEZI",132,0)
 ;
"RTN","EASEZI",133,0)
 Q:'EASDFN
"RTN","EASEZI",134,0)
 S Y=$P($G(^EAS(712,EASAPP,0)),U,6) I Y="" S Y=DT
"RTN","EASEZI",135,0)
 S %F=5,X=$$FMTE^XLFDT(Y,%F),X=+$P(X,"/",3)-1,%DT="P" D ^%DT S CURINCYR=Y
"RTN","EASEZI",136,0)
 ;find all associated 408 records, even if no actual income test
"RTN","EASEZI",137,0)
 ; get #408.12, #408.13, #408.21, #408.22 iens
"RTN","EASEZI",138,0)
 K EAS S DEP=0
"RTN","EASEZI",139,0)
 S IX=0 F  S IX=$O(^DGPR(408.12,"B",EASDFN,IX)) Q:'IX  D
"RTN","EASEZI",140,0)
 . S DIC=408.12,DA=IX,DIQ="EAS",DIQ(0)="I",DR=".02;.03" D EN^DIQ1
"RTN","EASEZI",141,0)
 . S REL=$G(EAS(408.12,IX,.02,"I")),I13=$G(EAS(408.12,IX,.03,"I"))
"RTN","EASEZI",142,0)
 . S (SUB1,SUB2)="" S:REL=1 SUB1="V",SUB2=1 S:REL=2 SUB1="S",SUB2=1 S:REL>2 SUB1="C",DEP=DEP+1,SUB2=DEP
"RTN","EASEZI",143,0)
 . I SUB1]"" S EASARRAY(408,SUB1,SUB2)=IX_U_I13 D
"RTN","EASEZI",144,0)
 . . S JX=$O(^DGMT(408.21,"C",IX,""),-1)
"RTN","EASEZI",145,0)
 . . I JX D
"RTN","EASEZI",146,0)
 . . . S DIC=408.21,DA=JX,DIQ="EAS",DIQ(0)="I",DR=".01;.02" D EN^DIQ1
"RTN","EASEZI",147,0)
 . . . S INCYR=$G(EAS(408.21,JX,.01,"I")),PT=$G(EAS(408.21,JX,.02,"I"))
"RTN","EASEZI",148,0)
 . . . Q:PT'=IX
"RTN","EASEZI",149,0)
 . . . Q:(INCYR<CURINCYR)
"RTN","EASEZI",150,0)
 . . . S KX=$O(^DGMT(408.22,"AIND",JX,0))
"RTN","EASEZI",151,0)
 . . . S EASARRAY(408,SUB1,SUB2)=EASARRAY(408,SUB1,SUB2)_U_JX_U_KX
"RTN","EASEZI",152,0)
 Q
"RTN","EASEZI",153,0)
 ;
"RTN","EASEZI",154,0)
I1275(IEN) ;get the active subrecord from subfile #408.1275
"RTN","EASEZI",155,0)
 ;input     IEN = internal record number to file #408.12
"RTN","EASEZI",156,0)
 ;output SUBIEN = internal record number for active subrecord,
"RTN","EASEZI",157,0)
 ;                or -1 if invalid
"RTN","EASEZI",158,0)
 N B,ACT,SUBIEN
"RTN","EASEZI",159,0)
 I 'IEN Q -1
"RTN","EASEZI",160,0)
 S SUBIEN=-1
"RTN","EASEZI",161,0)
 S B=0 F  S B=$O(^DGPR(408.12,IEN,"E",B)) Q:'B  D
"RTN","EASEZI",162,0)
 . S ACT=$P(^DGPR(408.12,IEN,"E",B,0),U,2)
"RTN","EASEZI",163,0)
 . I ACT S SUBIEN=B
"RTN","EASEZI",164,0)
 Q SUBIEN
"RTN","EASEZI1")
0^27^B15739163
"RTN","EASEZI1",1,0)
EASEZI1 ;ALB/jap - Database Inquiry & Record Finder for 1010EZ Processing ;10/12/00  13:08
"RTN","EASEZI1",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZI1",3,0)
 ;continuation of EASEZI, split by patch 57 due to Max size limit
"RTN","EASEZI1",4,0)
 ;
"RTN","EASEZI1",5,0)
RESET ;
"RTN","EASEZI1",6,0)
 ;set link in file #712 record
"RTN","EASEZI1",7,0)
 N FDA,ERR
"RTN","EASEZI1",8,0)
 S FDA(712,EASAPP_",",3.4)=DFN
"RTN","EASEZI1",9,0)
 I NEW D
"RTN","EASEZI1",10,0)
 . S FDA(712,EASAPP_",",3.5)=NEW
"RTN","EASEZI1",11,0)
 D FILE^DIE("","FDA","ERR")
"RTN","EASEZI1",12,0)
 ;
"RTN","EASEZI1",13,0)
 W !,"One moment please...",!
"RTN","EASEZI1",14,0)
 S EASDFN=DFN
"RTN","EASEZI1",15,0)
 ;setup tmp array for data mapping
"RTN","EASEZI1",16,0)
 D LOCAL711^EASEZU2
"RTN","EASEZI1",17,0)
 I '$G(EASVRSN) S EASVRSN=$$VERSION^EASEZU4(EASAPP)
"RTN","EASEZI1",18,0)
 ;if applicant is new to database, user accept/not accept of data elements is constrained; 
"RTN","EASEZI1",19,0)
 ;if applicant is new to VistA, mark all data elements 'accepted';
"RTN","EASEZI1",20,0)
 I NEW S N=0 F  S N=$O(^EAS(712,EASAPP,10,N)) Q:'N  I $G(^EAS(712,EASAPP,10,N,1))'="" D
"RTN","EASEZI1",21,0)
 .S ACCEPT="",FLD="",SUBFILE="",FILE=""
"RTN","EASEZI1",22,0)
 .S KEYIEN=$P(^EAS(712,EASAPP,10,N,0),U,1)
"RTN","EASEZI1",23,0)
 .I KEYIEN S X=$G(^TMP("EZDATA",$J,KEYIEN)),FILE=$P(X,U,1),SUBFILE=$P(X,U,2),FLD=$P(X,U,3),DATAKEY=$P(X,U,4),SECT=$P(DATAKEY,";",1)
"RTN","EASEZI1",24,0)
 .I FLD S ACCEPT=1
"RTN","EASEZI1",25,0)
 .I 'FLD S ACCEPT=-1
"RTN","EASEZI1",26,0)
 .I (FILE=355.33)!(FILE>408) S ACCEPT=2
"RTN","EASEZI1",27,0)
 .I FILE=2,SUBFILE=2,((FLD=.01)!(FLD=.03)!(FLD=.09)!(FLD=.531)) S ACCEPT=-1
"RTN","EASEZI1",28,0)
 .I ((SUBFILE=2.01)!(SUBFILE=2.101)) S ACCEPT=-1
"RTN","EASEZI1",29,0)
 .I (EASVRSN>5.99),((SECT="IIC")!(SECT="IIE")) D
"RTN","EASEZI1",30,0)
 ..S QUES=$P(DATAKEY,";",2)
"RTN","EASEZI1",31,0)
 ..I SECT="IIC","1.6;2.3;3.3"[QUES S ACCEPT=-1 Q
"RTN","EASEZI1",32,0)
 ..I SECT="IIE","1.3;2.3;3.3"[QUES S ACCEPT=-1
"RTN","EASEZI1",33,0)
 .S $P(^EAS(712,EASAPP,10,N,0),U,3)=ACCEPT
"RTN","EASEZI1",34,0)
 ;for applicants matched to existing patients check for 
"RTN","EASEZI1",35,0)
 ; verified eligibility and appt request on 1010 app
"RTN","EASEZI1",36,0)
 I 'NEW D
"RTN","EASEZI1",37,0)
 .K ARRAY
"RTN","EASEZI1",38,0)
 .S DA=EASDFN,DIC="^DPT(",DR=".3611;.3613;1010.159;1010.1511"
"RTN","EASEZI1",39,0)
 .S DIQ(0)="I",DIQ="ARRAY"
"RTN","EASEZI1",40,0)
 .D EN^DIQ1
"RTN","EASEZI1",41,0)
 .I ARRAY(2,EASDFN,.3611,"I")="V",ARRAY(2,EASDFN,.3613,"I")="H" S ELIGVER=1
"RTN","EASEZI1",42,0)
 .I ARRAY(2,EASDFN,1010.159,"I")'="",ARRAY(2,EASDFN,1010.1511,"I")'="" S APPTVER=1
"RTN","EASEZI1",43,0)
 ;correlate #712 data with mapping array
"RTN","EASEZI1",44,0)
 S N=0 F  S N=$O(^EAS(712,EASAPP,10,N)) Q:'N  S X=^(N,0) D
"RTN","EASEZI1",45,0)
 .;don't set array node if no 1010EZ data
"RTN","EASEZI1",46,0)
 .S EZDATA=$P($G(^EAS(712,EASAPP,10,N,1)),U,1)
"RTN","EASEZI1",47,0)
 .Q:EZDATA=""
"RTN","EASEZI1",48,0)
 .S IEN=$P(X,U,1),MULTIPLE=$P(X,U,2),ACCEPT=$P(X,U,3)
"RTN","EASEZI1",49,0)
 .S ^TMP("EZDATA",$J,IEN,MULTIPLE,1)=EZDATA_U_ACCEPT_U_N
"RTN","EASEZI1",50,0)
 ;
"RTN","EASEZI1",51,0)
 ;if applicant new to VistA, stop here;
"RTN","EASEZI1",52,0)
 I NEW S EASEZNEW=1
"RTN","EASEZI1",53,0)
 Q:$G(EASEZNEW)
"RTN","EASEZI1",54,0)
 ;if matched to existing patient, get all iens needed
"RTN","EASEZI1",55,0)
 W !,"Preparing for data comparison to VistA Patient database...",!
"RTN","EASEZI1",56,0)
 K ALIAS,DISPOS,ENROLL,INCREL,RACE,ETHNC
"RTN","EASEZI1",57,0)
 D I201^EASEZI(EASDFN,.ALIAS) W "."
"RTN","EASEZI1",58,0)
 I $D(ALIAS)>1 D C201^EASEZC1
"RTN","EASEZI1",59,0)
 D I2101^EASEZI(EASDFN,.DISPOS) W "."
"RTN","EASEZI1",60,0)
 I $D(DISPOS)>1 D C2101^EASEZC1
"RTN","EASEZI1",61,0)
 ;finish getting the rest of file #2 data needed for comparison 
"RTN","EASEZI1",62,0)
 D C2^EASEZC1
"RTN","EASEZI1",63,0)
 D I2711^EASEZI(EASDFN,.ENROLL) W "."
"RTN","EASEZI1",64,0)
 I $D(ENROLL)>1 D C2711^EASEZC1
"RTN","EASEZI1",65,0)
 D I408^EASEZI(EASDFN,EASAPP,.INCREL) W "."
"RTN","EASEZI1",66,0)
 I $D(INCREL)>1 D C408^EASEZC1
"RTN","EASEZI1",67,0)
 D I202^EASEZI(EASDFN,.RACE) W "."
"RTN","EASEZI1",68,0)
 I $D(RACE)>1 D C202^EASEZC3
"RTN","EASEZI1",69,0)
 D I206^EASEZI(EASDFN,.ETHNC) W "."
"RTN","EASEZI1",70,0)
 I $D(ETHNC)>1 D C206^EASEZC3
"RTN","EASEZI1",71,0)
 ;set file #355.33 data to 'always accept';
"RTN","EASEZI1",72,0)
 ;set unmatched data for files #408.12, #408.13, #408.21, #408.22 to 'always accept';
"RTN","EASEZI1",73,0)
 S N=0 F  S N=$O(^EAS(712,EASAPP,10,N)) Q:'N  S X=^(N,0) D
"RTN","EASEZI1",74,0)
 .S KEYIEN=$P(X,U,1),MULTIPLE=$P(X,U,2)
"RTN","EASEZI1",75,0)
 .I KEYIEN S X=$G(^TMP("EZDATA",$J,KEYIEN)),FILE=$P(X,U,1),SUBFILE=$P(X,U,2),FLD=$P(X,U,3),DATAKEY=$P(X,U,4),SECT=$P(DATAKEY,";",1)
"RTN","EASEZI1",76,0)
 .S ACCEPT=""
"RTN","EASEZI1",77,0)
 .I 'FLD S ACCEPT=-1
"RTN","EASEZI1",78,0)
 .I FILE=2,SUBFILE=2,((FLD=.01)!(FLD=.03)!(FLD=.09)!(FLD=.531)) S ACCEPT=-1
"RTN","EASEZI1",79,0)
 .;set certain eligibility related data elements to 'never accept' if eligibility verified
"RTN","EASEZI1",80,0)
 .I FILE=2,FLD=.313,$G(ARRAY(2,EASDFN,.3611,"I"))="V" S ACCEPT=-1
"RTN","EASEZI1",81,0)
 .I FILE=2,$G(ELIGVER),((FLD=.301)!(FLD=.302)!(FLD=.36235)) S ACCEPT=-1
"RTN","EASEZI1",82,0)
 .;set appt requested element to 'never accept' if already exist
"RTN","EASEZI1",83,0)
 .I FILE=2,$G(APPTVER),FLD=1010.159 S ACCEPT=-1
"RTN","EASEZI1",84,0)
 .I FILE=355.33 S ACCEPT=2
"RTN","EASEZI1",85,0)
 .I FILE>408 S ACCEPT=2
"RTN","EASEZI1",86,0)
 .I (EASVRSN>5.99),((SECT="IIC")!(SECT="IIE")) D
"RTN","EASEZI1",87,0)
 ..S QUES=$P(DATAKEY,";",2)
"RTN","EASEZI1",88,0)
 ..I SECT="IIC","1.6;2.3;3.3"[QUES S ACCEPT=-1 Q
"RTN","EASEZI1",89,0)
 ..I SECT="IIE","1.3;2.3;3.3"[QUES S ACCEPT=-1
"RTN","EASEZI1",90,0)
 .S $P(^EAS(712,EASAPP,10,N,0),U,3)=ACCEPT
"RTN","EASEZI1",91,0)
 .S $P(^TMP("EZDATA",$J,KEYIEN,MULTIPLE,1),U,2)=ACCEPT
"RTN","EASEZI1",92,0)
 K ALIAS,DISPOS,ENROLL,INCREL
"RTN","EASEZI1",93,0)
 Q
"RTN","EASEZI1",94,0)
 ;
"RTN","EASEZP63")
0^31^B55264854
"RTN","EASEZP63",1,0)
EASEZP63 ; ALB/AMA - Print 1010EZ, Version 6 or greater, Cont. ; 10/25/2000
"RTN","EASEZP63",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**51,60,57**;Mar 15, 2001
"RTN","EASEZP63",3,0)
 ;
"RTN","EASEZP63",4,0)
 ;This routine copied from EASEZPF3; if the version # of the 1010EZ
"RTN","EASEZP63",5,0)
 ;application is 6.0 or greater, then this routine will be executed.
"RTN","EASEZP63",6,0)
 ;
"RTN","EASEZP63",7,0)
EN(EALNE,EAINFO,EASDG) ; Entry point to print Page 3, called from EN^EASEZP6F
"RTN","EASEZP63",8,0)
 ;  Input
"RTN","EASEZP63",9,0)
 ;     EALNE  - Array of line formats for output
"RTN","EASEZP63",10,0)
 ;     EAINFO - Application Data array, see SETUP^EASEZRPF
"RTN","EASEZP63",11,0)
 ;     EASDG  - Flag variable to signify request to print from DG options
"RTN","EASEZP63",12,0)
 ;
"RTN","EASEZP63",13,0)
 N EASIGN
"RTN","EASEZP63",14,0)
 ;
"RTN","EASEZP63",15,0)
 I $$GET1^DIQ(712,EAINFO("EASAPP")_",",4)]"" D
"RTN","EASEZP63",16,0)
 . S EASIGN=$$GET1^DIQ(712,EAINFO("EASAPP")_",",4.1)
"RTN","EASEZP63",17,0)
 S EASIGN=$G(EASIGN)
"RTN","EASEZP63",18,0)
 ;
"RTN","EASEZP63",19,0)
 D HDR^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP63",20,0)
 S EASD=$NA(^TMP("EASEZ",$J,2))
"RTN","EASEZP63",21,0)
 ;
"RTN","EASEZP63",22,0)
 D FIN
"RTN","EASEZP63",23,0)
 D DEP
"RTN","EASEZP63",24,0)
 D INC
"RTN","EASEZP63",25,0)
 D EXP
"RTN","EASEZP63",26,0)
 D FT^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP63",27,0)
 ;
"RTN","EASEZP63",28,0)
 Q
"RTN","EASEZP63",29,0)
 ;
"RTN","EASEZP63",30,0)
FIN ; Print out VA 10-10EZ Section VI, Financial Disclosure information
"RTN","EASEZP63",31,0)
 ;
"RTN","EASEZP63",32,0)
 W !!?50,"SECTION VI - FINANCIAL DISCLOSURE"
"RTN","EASEZP63",33,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",34,0)
 ;
"RTN","EASEZP63",35,0)
 W !,"Failure to disclose your previous year's financial information may affect your eligibility for health care benefits.  Your financial"
"RTN","EASEZP63",36,0)
 W !,"information is used by VA to accurately determine if you should be responsible for copayments for office visits, pharmacy,"
"RTN","EASEZP63",37,0)
 W !,"inpatient, nursing home and long term care, and for some veterans, priority for enrollment.  You are not required to provide this"
"RTN","EASEZP63",38,0)
 W !,"information.  However, completing the financial dislosure section results in a more accurate determination of your eligibility for"
"RTN","EASEZP63",39,0)
 W !,"health care services/benefits."
"RTN","EASEZP63",40,0)
 ;
"RTN","EASEZP63",41,0)
 N EAN,EAY S (EAY,EAN)="___"
"RTN","EASEZP63",42,0)
 ;IF NO ENTRY, THEN NO MEANS TEST, SO NO ANSWER
"RTN","EASEZP63",43,0)
 ;IF @EASD@(998)="Y", THEN VET DECLINES TO GIVE INFO, SO ANSWER "NO"
"RTN","EASEZP63",44,0)
 I $D(@EASD@(998)) D
"RTN","EASEZP63",45,0)
 . S:@EASD@(998)="YES" EAN=" X "
"RTN","EASEZP63",46,0)
 . S:@EASD@(998)="NO" EAY=" X "
"RTN","EASEZP63",47,0)
 ;
"RTN","EASEZP63",48,0)
 W !!?3,EAN," NO, I DO NOT WISH TO PROVIDE INFORMATION IN SECTIONS VII THROUGH X.  I understand that VA is currently not enrolling veterans"
"RTN","EASEZP63",49,0)
 W !,"who decline to provide financial information unless other special eligibility factors exist.  However, if I am enrolled, I agree to"
"RTN","EASEZP63",50,0)
 W !,"pay the applicable VA copayments.  (Sign and date the application in Section XII.)"
"RTN","EASEZP63",51,0)
 ;
"RTN","EASEZP63",52,0)
 W !!?3,EAY," YES, I WILL PROVIDE SPECIFIC INCOME AND/OR ASSET INFORMATION TO ESTABLISH MY ELIGIBILITY FOR CARE.  (Complete all sections"
"RTN","EASEZP63",53,0)
 W !,"below that apply to you with last calendar year's information.  Sign and date the application in Section XII.)"
"RTN","EASEZP63",54,0)
 W !?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",55,0)
 Q
"RTN","EASEZP63",56,0)
 ;
"RTN","EASEZP63",57,0)
DEP ;  Print out VA 10-10EZ Section VII, Dependent Information
"RTN","EASEZP63",58,0)
 ;
"RTN","EASEZP63",59,0)
 W !!?24,"SECTION VII - DEPENDENT INFORMATION  (Use a separate sheet for additional dependents)"
"RTN","EASEZP63",60,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",61,0)
 ;
"RTN","EASEZP63",62,0)
 W !,"1.  SPOUSE'S NAME (Last, First, Middle Name)",?60,"|2.  CHILD'S NAME (Last, First, Middle Name)"
"RTN","EASEZP63",63,0)
 W !?4,$P(@EASD@(1),U),?60,"|    ",@EASD@(2)
"RTN","EASEZP63",64,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",65,0)
 ;
"RTN","EASEZP63",66,0)
 W !,"1A. SPOUSE'S MAIDEN NAME",?60,"|2A. CHILD'S RELATIONSHIP TO YOU"
"RTN","EASEZP63",67,0)
 W !?4,$P(@EASD@(1),U,2),?60,"|    ",@EASD@(9)
"RTN","EASEZP63",68,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",69,0)
 ;
"RTN","EASEZP63",70,0)
 W !,"1B. SPOUSE'S SOCIAL SECURITY NUMBER",?60,"|2B. CHILD'S SOCIAL SECURITY NUMBER",?99,"|2C. DATE CHILD BECAME YOUR"
"RTN","EASEZP63",71,0)
 W !?4,@EASD@(3),?60,"|    ",@EASD@(7),?99,"|    DEPENDENT   ",@EASD@(11)
"RTN","EASEZP63",72,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",73,0)
 ;
"RTN","EASEZP63",74,0)
 W !,"1C. SPOUSE'S DATE OF BIRTH (mm/dd/yyyy)",?44,"|1D. DATE OF MARRIAGE (mm/dd/yyyy)",?84,"|2D. CHILD'S DATE OF BIRTH (mm/dd/yyyy)"
"RTN","EASEZP63",75,0)
 W !?4,@EASD@(4),?44,"|    ",@EASD@(10),?84,"|    ",@EASD@(5)
"RTN","EASEZP63",76,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",77,0)
 ;
"RTN","EASEZP63",78,0)
 W !,"1E. SPOUSE'S ADDRESS AND TELEPHONE NUMBER (Street, City, State, ZIP)",?84,"|2E. WAS CHILD PREMANENTLY AND TOTALLY"
"RTN","EASEZP63",79,0)
 W !?4,$P(@EASD@(6),U),?84,"|    DISABLED BEFORE THE AGE OF 18?   ",@EASD@(14)
"RTN","EASEZP63",80,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! N Z F Z=1:1:85 W " "
"RTN","EASEZP63",81,0)
 W $E(EALNE("UL"),1,47)
"RTN","EASEZP63",82,0)
 ;
"RTN","EASEZP63",83,0)
 W !?4,$P(@EASD@(6),U,2),?84,"|2F. IF CHILD IS BETWEEN 18 AND 23 YEARS"
"RTN","EASEZP63",84,0)
 W !?4,@EASD@(8),?84,"|    OF AGE, DID CHILD ATTEND SCHOOL LAST"
"RTN","EASEZP63",85,0)
 W !?84,"|    CALENDAR YEAR?   ",@EASD@(15)
"RTN","EASEZP63",86,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",87,0)
 ;
"RTN","EASEZP63",88,0)
 W !,"3. IF YOUR SPOUSE OR DEPENDENT CHILD DID NOT LIVE WITH YOU LAST",?65,"|2G. EXPENSES PAID BY YOUR DEPENDENT CHILD FOR COLLEGE, VOCATIONAL"
"RTN","EASEZP63",89,0)
 W !?3,"YEAR, ENTER THE AMOUNT YOU CONTRIBUTED TO THEIR SUPPORT",?65,"|    REHABILITATION OR TRAINING (e.g., tuition, books, materials)"
"RTN","EASEZP63",90,0)
 W !?6,"SPOUSE  $ ",$P(@EASD@(12),U),?35,"CHILD  $ ",$P(@EASD@(12),U,2),?65,"|",?73,"$ ",@EASD@(13)
"RTN","EASEZP63",91,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",92,0)
 Q
"RTN","EASEZP63",93,0)
 ;
"RTN","EASEZP63",94,0)
INC ; Print out VA 10-10EZ Section VIII, Gross Annual Income information
"RTN","EASEZP63",95,0)
 ;
"RTN","EASEZP63",96,0)
 I $G(EASDG),+@EASD@(999) W !!?6,"SECTION VIII - PREVIOUS CALENDAR YEAR GROSS ANNUAL INCOME OF VETERAN, SPOUSE AND DEPENDENT CHILDREN  (INCOME YEAR:  ",@EASD@(999),")"
"RTN","EASEZP63",97,0)
 E  W !!?17,"SECTION VIII - PREVIOUS CALENDAR YEAR GROSS ANNUAL INCOME OF VETERAN, SPOUSE AND DEPENDENT CHILDREN"
"RTN","EASEZP63",98,0)
 W !?30,"(Use a separate sheet for additional dependents' financial information)"
"RTN","EASEZP63",99,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",100,0)
 ;
"RTN","EASEZP63",101,0)
 W !?76,"VETERAN",?97,"SPOUSE",?117,"CHILD 1"
"RTN","EASEZP63",102,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",103,0)
 ;
"RTN","EASEZP63",104,0)
 W !,"1. GROSS ANNUAL INCOME FROM EMPLOYMENT (wages, bonuses, tips, etc.)",?69,"|  $ ",$P(@EASD@("2C1"),U),?90,"|  $ ",$P(@EASD@("2C1"),U,2),?110,"|  $ ",$P(@EASD@("2C1"),U,3)
"RTN","EASEZP63",105,0)
 W !,"EXCLUDING INCOME FROM YOUR FARM, RANCH, PROPERTY OR BUSINESS",?69,"|",?90,"|",?110,"|"
"RTN","EASEZP63",106,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",107,0)
 ;
"RTN","EASEZP63",108,0)
 W !,"2. NET INCOME FROM YOUR FARM, RANCH, PROPERTY OR BUSINESS",?69,"|  $ ",$P(@EASD@("2C3"),U),?90,"|  $ ",$P(@EASD@("2C3"),U,2),?110,"|  $ ",$P(@EASD@("2C3"),U,3)
"RTN","EASEZP63",109,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",110,0)
 ;
"RTN","EASEZP63",111,0)
 W !,"3. LIST OTHER INCOME AMOUNTS (Social Security, compensation,",?69,"|  $ ",$P(@EASD@("2C2"),U),?90,"|  $ ",$P(@EASD@("2C2"),U,2),?110,"|  $ ",$P(@EASD@("2C2"),U,3)
"RTN","EASEZP63",112,0)
 W !,"pension, interest, dividends.  Exclude welfare)",?69,"|",?90,"|",?110,"|"
"RTN","EASEZP63",113,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",114,0)
 Q
"RTN","EASEZP63",115,0)
 ;
"RTN","EASEZP63",116,0)
EXP ; Print out VA 10-10EZ Section IX, Deductible Expense Information
"RTN","EASEZP63",117,0)
 ;
"RTN","EASEZP63",118,0)
 I $G(EASDG),+@EASD@(999) W !!?27,"SECTION IX - PREVIOUS CALENDAR YEAR DEDUCTIBLE EXPENSES  (INCOME YEAR:  ",@EASD@(999),")"
"RTN","EASEZP63",119,0)
 E  W !!?38,"SECTION IX - PREVIOUS CALENDAR YEAR DEDUCTIBLE EXPENSES"
"RTN","EASEZP63",120,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",121,0)
 ;
"RTN","EASEZP63",122,0)
 W !,"1. TOTAL NON-REIMBURSED MEDICAL EXPENSES PAID BY YOU OR YOUR SPOUSE (e.g., payments for doctors, dentists,",?110,"|  $ ",@EASD@("2D1")
"RTN","EASEZP63",123,0)
 W !,"medications, Medicare, health insurance, hospital and nursing home)  VA will calculate a deductible and the",?110,"|"
"RTN","EASEZP63",124,0)
 W !,"net medical expenses you may claim.",?110,"|"
"RTN","EASEZP63",125,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",126,0)
 ;
"RTN","EASEZP63",127,0)
 W !,"2. AMOUNT YOU PAID LAST CALENDAR YEAR FOR FUNERAL AND BURIAL EXPENSES FOR YOUR DECEASED SPOUSE OR DEPENDENT",?110,"|  $ ",@EASD@("2D2")
"RTN","EASEZP63",128,0)
 W !,"CHILD  (Also enter spouse or child's information in Section VII.)",?110,"|"
"RTN","EASEZP63",129,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",130,0)
 ;
"RTN","EASEZP63",131,0)
 W !,"3. AMOUNT YOU PAID LAST CALENDAR YEAR FOR YOUR COLLEGE OR VOCATIONAL EDUCATIONAL EXPENSES (e.g., tuition,",?110,"|  $ ",@EASD@("2D3")
"RTN","EASEZP63",132,0)
 W !,"books, fees, materials)  DO NOT LIST YOUR DEPENDENT'S EDUCATIONAL EXPENSES",?110,"|"
"RTN","EASEZP63",133,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP63",134,0)
 Q
"RTN","EASEZP64")
0^23^B25850526
"RTN","EASEZP64",1,0)
EASEZP64 ; ALB/AMA - Print 1010EZ, Version 6 or greater, Cont. ; 10/25/2000
"RTN","EASEZP64",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**60,57**;Mar 15, 2001
"RTN","EASEZP64",3,0)
 ;
"RTN","EASEZP64",4,0)
 ;This routine carved from EASEZPF3; if the version # of the 1010EZ
"RTN","EASEZP64",5,0)
 ;application is 6.0 or greater, then this routine will be executed.
"RTN","EASEZP64",6,0)
 ;
"RTN","EASEZP64",7,0)
EN(EALNE,EAINFO) ; Entry point to print Page 3, called from EN^EASEZP6F
"RTN","EASEZP64",8,0)
 N EASIGN,EASD
"RTN","EASEZP64",9,0)
 ;
"RTN","EASEZP64",10,0)
 I $$GET1^DIQ(712,EAINFO("EASAPP")_",",4)]"" D
"RTN","EASEZP64",11,0)
 . S EASIGN=$$GET1^DIQ(712,EAINFO("EASAPP")_",",4.1)
"RTN","EASEZP64",12,0)
 S EASIGN=$G(EASIGN)
"RTN","EASEZP64",13,0)
 ;
"RTN","EASEZP64",14,0)
 D HDR^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP64",15,0)
 S EASD=$NA(^TMP("EASEZ",$J,2))
"RTN","EASEZP64",16,0)
 ;
"RTN","EASEZP64",17,0)
 D NET
"RTN","EASEZP64",18,0)
 D CON
"RTN","EASEZP64",19,0)
 D AOB
"RTN","EASEZP64",20,0)
 D FT^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP64",21,0)
 ;
"RTN","EASEZP64",22,0)
 Q
"RTN","EASEZP64",23,0)
 ;
"RTN","EASEZP64",24,0)
NET ;  Print SECTION X - PREVIOUS CALENDAR YEAR NET WORTH
"RTN","EASEZP64",25,0)
 ;
"RTN","EASEZP64",26,0)
 W !!?18,"SECTION X - PREVIOUS CALENDAR YEAR NET WORTH  (Use a separate sheet for additional dependents)"
"RTN","EASEZP64",27,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",28,0)
 ;
"RTN","EASEZP64",29,0)
 W !?78,"|",?84,"VETERAN",?96,"|",?102,"SPOUSE",?114,"|",?120,"CHILD 1"
"RTN","EASEZP64",30,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",31,0)
 ;
"RTN","EASEZP64",32,0)
 W !,"1. CASH, AMOUNT IN BANK ACCOUNTS (e.g., checking and savings accounts,",?78,"|  $ ",$P(@EASD@("2E1"),U),?96,"|  $ ",$P(@EASD@("2E1"),U,2),?114,"|  $ ",$P(@EASD@("2E1"),U,3)
"RTN","EASEZP64",33,0)
 W !,"certificates of deposit, individual retirement accounts, stocks and bonds)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZP64",34,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",35,0)
 ;
"RTN","EASEZP64",36,0)
 W !,"2. MARKET VALUE OF LAND AND BUILDINGS MINUS MORTGAGES AND LIENS (e.g., second",?78,"|  $ ",$P(@EASD@("2E2"),U),?96,"|  $ ",$P(@EASD@("2E2"),U,2),?114,"|  $ ",$P(@EASD@("2E2"),U,3)
"RTN","EASEZP64",37,0)
 W !,"homes and non-income-producing property.  Do not count your primary home.)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZP64",38,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",39,0)
 ;
"RTN","EASEZP64",40,0)
 W !,"3. VALUE OF OTHER PROPERTY OR ASSETS (e.g., art, rare coins, collectibles)",?78,"|  $ ",$P(@EASD@("2E3"),U),?96,"|  $ ",$P(@EASD@("2E3"),U,2),?114,"|  $ ",$P(@EASD@("2E3"),U,3)
"RTN","EASEZP64",41,0)
 W !,"MINUS THE AMOUNT YOU OWE ON THESE ITEMS.  INCLUDE VALUE OF FARM, RANCH, OR",?78,"|",?96,"|",?114,"|"
"RTN","EASEZP64",42,0)
 W !,"BUSINESS ASSETS.  Exclude household effects and family vehicles.",?78,"|",?96,"|",?114,"|"
"RTN","EASEZP64",43,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",44,0)
 Q
"RTN","EASEZP64",45,0)
 ;
"RTN","EASEZP64",46,0)
CON ;  Print SECTION XI - CONSENT TO COPAYMENTS
"RTN","EASEZP64",47,0)
 ;
"RTN","EASEZP64",48,0)
 W !!?49,"SECTION XI - CONSENT TO COPAYMENTS"
"RTN","EASEZP64",49,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",50,0)
 ;
"RTN","EASEZP64",51,0)
 W !,"If you are a 0% service-connected veteran and do not receive VA monetary benefits or a nonservice-connected veteran (and you are"
"RTN","EASEZP64",52,0)
 W !,"not an Ex-POW, Purple Heart Recipient, WWI veteran or VA pensioner) and your household income (or combined income and net worth)"
"RTN","EASEZP64",53,0)
 W !,"exceeds the established threshold, this application will be considered for enrollment, but only if you agree to pay VA copayments"
"RTN","EASEZP64",54,0)
 W !,"for treatment of your nonservice-connected conditions.  If you are such a veteran, by signing this application you are agreeing"
"RTN","EASEZP64",55,0)
 W !,"to pay the applicable VA copayment as required by law.",!
"RTN","EASEZP64",56,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",57,0)
 Q
"RTN","EASEZP64",58,0)
 ;
"RTN","EASEZP64",59,0)
AOB ;  Print SECTION XII - ASSIGNMENT OF BENEFITS
"RTN","EASEZP64",60,0)
 ;
"RTN","EASEZP64",61,0)
 W !!?48,"SECTION XII - ASSIGNMENT OF BENEFITS"
"RTN","EASEZP64",62,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",63,0)
 ;
"RTN","EASEZP64",64,0)
 W !,"I understand that pursuant to 38 U.S.C. section 1729, VA is authorized to recover or collect from my health plan (HP) for the"
"RTN","EASEZP64",65,0)
 W !,"reasonable charges of nonservice-connected VA medical care or services furnished or provided to me.  I hereby authorize payment"
"RTN","EASEZP64",66,0)
 W !,"directly to VA from any HP under which I am covered (including coverage provided under my spouse's HP) that is responsible for"
"RTN","EASEZP64",67,0)
 W !,"payment of the charges for my medical care, including benefits otherwise payable to me or my spouse.",!
"RTN","EASEZP64",68,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",69,0)
 ;
"RTN","EASEZP64",70,0)
 W !!?6,"ALL APPLICANTS MUST SIGN AND DATE THIS FORM.  REFER TO INSTRUCTIONS WHICH DEFINE WHO CAN SIGN ON BEHALF OF THE VETERAN.",!
"RTN","EASEZP64",71,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",72,0)
 ;
"RTN","EASEZP64",73,0)
 W !,"SIGNATURE OF APPLICANT",?90,"| DATE"
"RTN","EASEZP64",74,0)
 I $G(EASIGN)]"" W !,"SIGNATURE OF APPLICANT OR APPLICANT'S REPRESENTATIVE HAS BEEN VERIFIED",?90,"| ",EASIGN,!?90,"|"
"RTN","EASEZP64",75,0)
 E  W !?90,"|",!?90,"|"
"RTN","EASEZP64",76,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP64",77,0)
 Q
"RTN","EASEZP6F")
0^13^B15092600
"RTN","EASEZP6F",1,0)
EASEZP6F ;ALB/AMA - Print 1010EZ, Version 6 or greater ; 10/19/2000
"RTN","EASEZP6F",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**51,60,57**;Mar 15, 2001
"RTN","EASEZP6F",3,0)
 ;
"RTN","EASEZP6F",4,0)
 ; These routines print a version of the OMB approved VA10-10EZ form.
"RTN","EASEZP6F",5,0)
 ; No local modifications to these routines will be made.  Any changes
"RTN","EASEZP6F",6,0)
 ; will be provided through the National Patch Module  release process.
"RTN","EASEZP6F",7,0)
 ;
"RTN","EASEZP6F",8,0)
 ; This routine was copied from EASEZPF; if the version # of the 1010EZ
"RTN","EASEZP6F",9,0)
 ; application is 6.0 or greater, then this routine will be executed.
"RTN","EASEZP6F",10,0)
 ;
"RTN","EASEZP6F",11,0)
EN ; Entry point to print 1010EZ, Version 6 or greater
"RTN","EASEZP6F",12,0)
 N EALNE,EAINFO,EAABRT,EAADL,ERR,EAMULT
"RTN","EASEZP6F",13,0)
 ;
"RTN","EASEZP6F",14,0)
 D SETUP(.EALNE,.EAINFO,EASAPP,EASDFN)
"RTN","EASEZP6F",15,0)
 ;
"RTN","EASEZP6F",16,0)
 D PAGE1^EASEZP6U
"RTN","EASEZP6F",17,0)
 D PAGE1^EASEZPU3
"RTN","EASEZP6F",18,0)
 D EN^EASEZP61(.EALNE,.EAINFO)
"RTN","EASEZP6F",19,0)
 ;
"RTN","EASEZP6F",20,0)
 D PAGE2^EASEZPU2
"RTN","EASEZP6F",21,0)
 D EN^EASEZP62(.EALNE,.EAINFO)
"RTN","EASEZP6F",22,0)
 ;
"RTN","EASEZP6F",23,0)
 D EN^EASEZP63(.EALNE,.EAINFO)
"RTN","EASEZP6F",24,0)
 D EN^EASEZP64(.EALNE,.EAINFO)   ;EAS*1.0*60
"RTN","EASEZP6F",25,0)
 ;
"RTN","EASEZP6F",26,0)
 ;Print additional insurance pages if more than 1 insurance company
"RTN","EASEZP6F",27,0)
 F EAADL=1:1 D  Q:$G(EAABRT)
"RTN","EASEZP6F",28,0)
 . I '$D(^TMP("EZTEMP",$J,"IA",EAADL)) S EAABRT=1 Q
"RTN","EASEZP6F",29,0)
 . S EAMULT=1
"RTN","EASEZP6F",30,0)
 . D PAGEI^EASEZPU3(EAADL)
"RTN","EASEZP6F",31,0)
 I $G(EAMULT) D EN^EASEZP6I(.EALNE,.EAINFO)
"RTN","EASEZP6F",32,0)
 ;
"RTN","EASEZP6F",33,0)
 ;Print additional dependent pages if more than 1 dependent
"RTN","EASEZP6F",34,0)
 S (EAABRT,EAMULT)=0 F EAADL=1:1 D  Q:$G(EAABRT)
"RTN","EASEZP6F",35,0)
 . I '$D(^TMP("EZTEMP",$J,"IIB",EAADL)) S EAABRT=1 Q
"RTN","EASEZP6F",36,0)
 . S EAMULT=1
"RTN","EASEZP6F",37,0)
 . D PAGEN^EASEZPU3(EAADL)
"RTN","EASEZP6F",38,0)
 I EAMULT D EN^EASEZP6D(.EALNE,.EAINFO)
"RTN","EASEZP6F",39,0)
 ;
"RTN","EASEZP6F",40,0)
 ;Print additional dependent financial pages if more
"RTN","EASEZP6F",41,0)
 ;than 1 dependent, starting with the 2nd one
"RTN","EASEZP6F",42,0)
 ;(since Child 1 info already displayed on pages 2 & 3)
"RTN","EASEZP6F",43,0)
 S (EAABRT,EAMULT)=0 F EAADL=2:1 D  Q:$G(EAABRT)
"RTN","EASEZP6F",44,0)
 . I '$D(^TMP("EZTEMP",$J,"IIF",EAADL)) S EAABRT=1 Q
"RTN","EASEZP6F",45,0)
 . S EAMULT=1
"RTN","EASEZP6F",46,0)
 . D PAGEDFF^EASEZPU2(EAADL)
"RTN","EASEZP6F",47,0)
 S EAABRT=0 F EAADL=2:1 D  Q:$G(EAABRT)
"RTN","EASEZP6F",48,0)
 . I '$D(^TMP("EZTEMP",$J,"IIG",EAADL)) S EAABRT=1 Q
"RTN","EASEZP6F",49,0)
 . S EAMULT=1
"RTN","EASEZP6F",50,0)
 . D PAGEDFG^EASEZPU2(EAADL)
"RTN","EASEZP6F",51,0)
 I EAMULT D EN^EASEZP6M(.EALNE,.EAINFO)
"RTN","EASEZP6F",52,0)
 ;
"RTN","EASEZP6F",53,0)
ENQUIT ; Clean up temp globals after printing is complete
"RTN","EASEZP6F",54,0)
 K ^TMP("EASEZ",$J)
"RTN","EASEZP6F",55,0)
 K ^TMP("EZDATA",$J)
"RTN","EASEZP6F",56,0)
 K ^TMP("EZINDEX",$J)
"RTN","EASEZP6F",57,0)
 K ^TMP("EZTEMP",$J)
"RTN","EASEZP6F",58,0)
 K ^TMP("EZDISP",$J)
"RTN","EASEZP6F",59,0)
 Q
"RTN","EASEZP6F",60,0)
 ;
"RTN","EASEZP6F",61,0)
SETUP(EALNE,EAINFO,EASAPP,EASDFN) ; Set-up print variables
"RTN","EASEZP6F",62,0)
 ; Input
"RTN","EASEZP6F",63,0)
 ;   EALNE   - Line format array
"RTN","EASEZP6F",64,0)
 ;   EAINFO  - Misc Data
"RTN","EASEZP6F",65,0)
 ;      ("CLRK") - Clerk's initials
"RTN","EASEZP6F",66,0)
 ;      ("ID")   - Web ID from #712
"RTN","EASEZP6F",67,0)
 ;      ("PGE")  - Page number
"RTN","EASEZP6F",68,0)
 ;      ("VET" ) - Veteran's name submitting the application
"RTN","EASEZP6F",69,0)
 ;      ("SSN")  - Veteran's SSN
"RTN","EASEZP6F",70,0)
 ;      ("DISC") - Financial Disclosure status
"RTN","EASEZP6F",71,0)
 ;   EASAPP  - IEN of applicant on the 1010EZ HOLDING File, #712
"RTN","EASEZP6F",72,0)
 ;   EASDFN  - DFN of applicant in the PATIENT File, #2
"RTN","EASEZP6F",73,0)
 ;
"RTN","EASEZP6F",74,0)
 N X
"RTN","EASEZP6F",75,0)
 ;
"RTN","EASEZP6F",76,0)
 ; Build Line array for printout
"RTN","EASEZP6F",77,0)
 S EALNE("ULC")=$S('($D(IOST)#2):"-",IOST["C-":"-",1:"_")
"RTN","EASEZP6F",78,0)
 S EALNE("D")="",EALNE("DD")="",EALNE("UL")=""
"RTN","EASEZP6F",79,0)
 S $P(EALNE("D"),"-",133)="",$P(EALNE("DD"),"=",133)="",$P(EALNE("UL"),EALNE("ULC"),133)=""
"RTN","EASEZP6F",80,0)
 ;
"RTN","EASEZP6F",81,0)
 ; Set up information array & get clerk's initials
"RTN","EASEZP6F",82,0)
 S ZUSR=$G(ZUSR)
"RTN","EASEZP6F",83,0)
 I +ZUSR>0 D
"RTN","EASEZP6F",84,0)
 . S EAINFO("CLRK")=$$GET1^DIQ(200,ZUSR,1)
"RTN","EASEZP6F",85,0)
 . I EAINFO("CLRK")']"" D
"RTN","EASEZP6F",86,0)
 . . S X=$$GET1^DIQ(200,ZUSR,.01)
"RTN","EASEZP6F",87,0)
 . . S EAINFO("CLRK")=$E($P(X,",",2),1)_$E($P(X,","),1)
"RTN","EASEZP6F",88,0)
 E  D
"RTN","EASEZP6F",89,0)
 . S EAINFO("CLRK")="unk"
"RTN","EASEZP6F",90,0)
 ;
"RTN","EASEZP6F",91,0)
 ; Set data elements
"RTN","EASEZP6F",92,0)
 S EAINFO("PGE")=0
"RTN","EASEZP6F",93,0)
 S EAINFO("ID")=$$GET1^DIQ(712,EASAPP_",",.1)
"RTN","EASEZP6F",94,0)
 S EAINFO("PD")=$$FMTE^XLFDT($$NOW^XLFDT)
"RTN","EASEZP6F",95,0)
 S EAINFO("DISC")=$$GET1^DIQ(712,EASAPP_",",3.8)
"RTN","EASEZP6F",96,0)
 S EAINFO("EASAPP")=EASAPP
"RTN","EASEZP6F",97,0)
 S EAINFO("VET")=$$GET1^DIQ(712,EASAPP_",",1)
"RTN","EASEZP6F",98,0)
 S EAINFO("SSN")=$$GET1^DIQ(712,EASAPP_",",2)
"RTN","EASEZP6F",99,0)
 ;
"RTN","EASEZP6F",100,0)
 ; Retrieve application data from holding file, #712
"RTN","EASEZP6F",101,0)
 D EN^EASEZC1(EASAPP)
"RTN","EASEZP6F",102,0)
 D SORT^EASEZC3(EASAPP)
"RTN","EASEZP6F",103,0)
SETQ Q
"RTN","EASEZP6F",104,0)
 ;
"RTN","EASEZP6F",105,0)
HDRMAIN(EALNE) ; PRINT THE FIRST PAGE HEADER INFORMATION
"RTN","EASEZP6F",106,0)
 W @IOF
"RTN","EASEZP6F",107,0)
 W ?106,"OMB APPROVED NO. 2900-0091"
"RTN","EASEZP6F",108,0)
 W !?103,"Estimated Burden Avg. 45 min."
"RTN","EASEZP6F",109,0)
 W !?107,"Expiration Date 6/30/2007",!,EALNE("DD")
"RTN","EASEZP6F",110,0)
 W !,"D E P A R T M E N T   O F   V E T E R A N S   A F F A I R S",?80,"APPLICATION FOR HEALTH BENEFITS",!,EALNE("DD")
"RTN","EASEZP6F",111,0)
 Q
"RTN","EASEZP6F",112,0)
 ;
"RTN","EASEZP6F",113,0)
HDR(EALNE,EAINFO) ; PRINT THE PAGE HEADER INFO FOR PAGES GREATER THAN 1
"RTN","EASEZP6F",114,0)
 W @IOF
"RTN","EASEZP6F",115,0)
 W "APPLICATION FOR HEALTH BENEFITS, Continued",?55,"| VETERAN'S NAME (Last, First, Middle)",?106,"| SOCIAL SECURITY NUMBER"
"RTN","EASEZP6F",116,0)
 W !?55,"| ",EAINFO("VET"),?106,"| ",EAINFO("SSN")
"RTN","EASEZP6F",117,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6F",118,0)
 Q
"RTN","EASEZP6F",119,0)
 ;
"RTN","EASEZP6F",120,0)
FT(EALNE,EAINFO) ; PRINT THE PAGE FOOTER INFORMATION
"RTN","EASEZP6F",121,0)
 W !,EALNE("DD")
"RTN","EASEZP6F",122,0)
 W !,"VA FORM 10-10EZ FEB 2005",?40,"PRINTED: ",EAINFO("PD")
"RTN","EASEZP6F",123,0)
 W ?80,"Clerk: ",EAINFO("CLRK"),"/",EAINFO("ID")
"RTN","EASEZP6F",124,0)
 W ?120,"PAGE " S EAINFO("PGE")=EAINFO("PGE")+1 W EAINFO("PGE")
"RTN","EASEZP6F",125,0)
 Q
"RTN","EASEZP6M")
0^24^B29083028
"RTN","EASEZP6M",1,0)
EASEZP6M ;ALB/AMA - Print 1010EZ, Version 6 or greater, Cont., Other Dependent Financial Pages ; 10/19/2000
"RTN","EASEZP6M",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**51,60,57**;Mar 15, 2001
"RTN","EASEZP6M",3,0)
 ;
"RTN","EASEZP6M",4,0)
 ;New page, to print multiple dependent financial information
"RTN","EASEZP6M",5,0)
EN(EALNE,EAINFO,EASDG) ;Entry point, called from EN^EASEZP6F
"RTN","EASEZP6M",6,0)
 ;  Input
"RTN","EASEZP6M",7,0)
 ;     EALNE  - Array of line formats for output
"RTN","EASEZP6M",8,0)
 ;     EAINFO - Application Data array, see SETUP^EASEZP6F
"RTN","EASEZP6M",9,0)
 ;     EASDG  - Flag variable to signify request to print from DG options
"RTN","EASEZP6M",10,0)
 ;
"RTN","EASEZP6M",11,0)
 N FNP,GNP        ;MAX NO. ENTRIES PER PAGE FOR EACH SECTION
"RTN","EASEZP6M",12,0)
 N EASF,EASG      ;VARS FOR INDIRECT ^TMP GLOBAL REFERENCE
"RTN","EASEZP6M",13,0)
 N DEPF,DEPG      ;VARS TO LOOP THROUGH ^TMP GLOBALS
"RTN","EASEZP6M",14,0)
 N DFCNT,DGCNT    ;COUNTERS OF NO. DEPENDENTS
"RTN","EASEZP6M",15,0)
 N NEWPG,SECOND   ;VARS TO DETERMINE WHEN NEW PAGE SHOULD OCCUR
"RTN","EASEZP6M",16,0)
 ;
"RTN","EASEZP6M",17,0)
 ;Assuming 55 print lines per page, 5 lines per IIF entry, 6 lines
"RTN","EASEZP6M",18,0)
 ;per IIG entry, plus lines for titles and blank dividing lines:
"RTN","EASEZP6M",19,0)
 S FNP=9   ;can fit 9 dependents on one page for Section IIF
"RTN","EASEZP6M",20,0)
 S GNP=7   ;can fit 7 dependents on one page for Section IIG
"RTN","EASEZP6M",21,0)
 ;
"RTN","EASEZP6M",22,0)
 ;Find additional dependents from Section IIF
"RTN","EASEZP6M",23,0)
 S EASF=$NA(^TMP("EASEZ",$J,"DFF"))
"RTN","EASEZP6M",24,0)
 I $O(@EASF@(1)) D BEGINF
"RTN","EASEZP6M",25,0)
 ;
"RTN","EASEZP6M",26,0)
 ;Start printing with 2nd dependent
"RTN","EASEZP6M",27,0)
 S DEPF=1,DFCNT=0 F  S DEPF=$O(@EASF@(DEPF)) Q:'DEPF  D
"RTN","EASEZP6M",28,0)
 . S DFCNT=DFCNT+1
"RTN","EASEZP6M",29,0)
 . ;Check to see if a new page is needed
"RTN","EASEZP6M",30,0)
 . I (DFCNT>1),'((DFCNT-1)#FNP) D
"RTN","EASEZP6M",31,0)
 . . D FT^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP6M",32,0)
 . . D BEGINF
"RTN","EASEZP6M",33,0)
 . I (DFCNT#FNP)'=1 W !?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6M",34,0)
 . D ADFF
"RTN","EASEZP6M",35,0)
 ;
"RTN","EASEZP6M",36,0)
 ;Find additional dependents from Section IIG
"RTN","EASEZP6M",37,0)
 S EASG=$NA(^TMP("EASEZ",$J,"DFG"))
"RTN","EASEZP6M",38,0)
 I $O(@EASG@(1)) D
"RTN","EASEZP6M",39,0)
 . I $O(@EASF@(1)) D  I 1
"RTN","EASEZP6M",40,0)
 . . I ((DFCNT#FNP)'=0),((DFCNT#FNP)'=GNP) W !!,?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6M",41,0)
 . . ;At the end of IIF, to find when to jump to the next page, 
"RTN","EASEZP6M",42,0)
 . . ;55 print lines, minus 3 lines for Section IIG title header,
"RTN","EASEZP6M",43,0)
 . . ;minus the number of lines already used on current page,
"RTN","EASEZP6M",44,0)
 . . ;divided by the number of lines for a Section IIG entry
"RTN","EASEZP6M",45,0)
 . . S NEWPG=(51-((DFCNT#FNP)*6))\7
"RTN","EASEZP6M",46,0)
 . . I '(DFCNT#FNP)!'NEWPG!(NEWPG=GNP) S NEWPG=GNP D FT^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP6M",47,0)
 . E  S NEWPG=GNP
"RTN","EASEZP6M",48,0)
 . D BEGING
"RTN","EASEZP6M",49,0)
 ;
"RTN","EASEZP6M",50,0)
 ;Start printing with 2nd dependent
"RTN","EASEZP6M",51,0)
 S DEPG=1,DGCNT=0 F  S DEPG=$O(@EASG@(DEPG)) Q:'DEPG  D
"RTN","EASEZP6M",52,0)
 . S DGCNT=DGCNT+1
"RTN","EASEZP6M",53,0)
 . ;Check to see if a new page is needed
"RTN","EASEZP6M",54,0)
 . I (DGCNT>1),'((DGCNT-$G(SECOND)-1)#NEWPG) D
"RTN","EASEZP6M",55,0)
 . . D FT^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP6M",56,0)
 . . I NEWPG'=GNP S SECOND=NEWPG,NEWPG=GNP
"RTN","EASEZP6M",57,0)
 . . D BEGING
"RTN","EASEZP6M",58,0)
 . I (DGCNT-$G(SECOND))#GNP'=1 W !?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6M",59,0)
 . D ADFG
"RTN","EASEZP6M",60,0)
 ;
"RTN","EASEZP6M",61,0)
 D FT^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP6M",62,0)
 Q
"RTN","EASEZP6M",63,0)
 ;
"RTN","EASEZP6M",64,0)
BEGINF ; Print page header info
"RTN","EASEZP6M",65,0)
 ;
"RTN","EASEZP6M",66,0)
 D HDR^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP6M",67,0)
 I $G(EASDG) D  I 1
"RTN","EASEZP6M",68,0)
 . N EZINYR
"RTN","EASEZP6M",69,0)
 . S EZINYR=^TMP("EASEZ",$J,2,999)
"RTN","EASEZP6M",70,0)
 . W !!?9,"SECTION VIII - PREVIOUS CALENDAR YEAR GROSS ANNUAL INCOME OF ADDITIONAL DEPENDENT CHILD(REN)  (INCOME YEAR:  ",EZINYR,")"
"RTN","EASEZP6M",71,0)
 E  W !!?20,"SECTION VIII - PREVIOUS CALENDAR YEAR GROSS ANNUAL INCOME OF ADDITIONAL DEPENDENT CHILD(REN)"
"RTN","EASEZP6M",72,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6M",73,0)
 Q
"RTN","EASEZP6M",74,0)
 ;
"RTN","EASEZP6M",75,0)
BEGING ; Print page header info
"RTN","EASEZP6M",76,0)
 ;
"RTN","EASEZP6M",77,0)
 I NEWPG=GNP D HDR^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZP6M",78,0)
 I $G(EASDG) D  I 1
"RTN","EASEZP6M",79,0)
 . N EZINYR
"RTN","EASEZP6M",80,0)
 . S EZINYR=^TMP("EASEZ",$J,2,999)
"RTN","EASEZP6M",81,0)
 . W !!?14,"SECTION X - PREVIOUS CALENDAR YEAR NET WORTH FOR ADDITIONAL DEPENDENT CHILD(REN)  (INCOME YEAR:  ",EZINYR,")"
"RTN","EASEZP6M",82,0)
 E  W !!?25,"SECTION X - PREVIOUS CALENDAR YEAR NET WORTH FOR ADDITIONAL DEPENDENT CHILD(REN)"
"RTN","EASEZP6M",83,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6M",84,0)
 Q
"RTN","EASEZP6M",85,0)
 ;
"RTN","EASEZP6M",86,0)
ADFF ; Print out VA 10-10EZ Section VIII, Gross Annual Income information - Additional Dependents
"RTN","EASEZP6M",87,0)
 ;
"RTN","EASEZP6M",88,0)
 W !,"1. GROSS ANNUAL INCOME FROM EMPLOYMENT (wages, bonuses, tips, etc.)",?90,"|  $ ",$P(@EASF@(DEPF,7),U,2)
"RTN","EASEZP6M",89,0)
 W !,"EXCLUDING INCOME FROM YOUR FARM, RANCH, PROPERTY OR BUSINESS -- ",$P(@EASF@(DEPF,7),U),?90,"|"
"RTN","EASEZP6M",90,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6M",91,0)
 ;
"RTN","EASEZP6M",92,0)
 W !,"2. NET INCOME FROM YOUR FARM, RANCH, PROPERTY OR BUSINESS -- ",$P(@EASF@(DEPF,7),U),?90,"|  $ ",$P(@EASF@(DEPF,7),U,3)
"RTN","EASEZP6M",93,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6M",94,0)
 ;
"RTN","EASEZP6M",95,0)
 W !,"3. LIST OTHER INCOME AMOUNTS (Social Security, compensation,",?90,"|  $ ",$P(@EASF@(DEPF,7),U,4)
"RTN","EASEZP6M",96,0)
 W !,"pension, interest, dividends.)  EXCLUDE WELFARE. -- ",$P(@EASF@(DEPF,7),U),?90,"|"
"RTN","EASEZP6M",97,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6M",98,0)
 Q
"RTN","EASEZP6M",99,0)
 ;
"RTN","EASEZP6M",100,0)
ADFG ;  Print SECTION X - PREVIOUS CALENDAR YEAR NET WORTH - ADDITIONAL DEPENDENTS
"RTN","EASEZP6M",101,0)
 ;
"RTN","EASEZP6M",102,0)
 W !,"1. CASH, AMOUNT IN BANK ACCOUNTS (e.g., checking and savings accounts,",?116,"|  $ ",$P(@EASG@(DEPG,9),U,2)
"RTN","EASEZP6M",103,0)
 W !,"certificates of deposit, individual retirement accounts, stocks and bonds)  -- ",$P(@EASG@(DEPG,9),U),?116,"|"
"RTN","EASEZP6M",104,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6M",105,0)
 ;
"RTN","EASEZP6M",106,0)
 W !,"2. MARKET VALUE OF LAND AND BUILDINGS MINUS MORTGAGES AND LIENS (e.g., second",?116,"|  $ ",$P(@EASG@(DEPG,9),U,3)
"RTN","EASEZP6M",107,0)
 W !,"homes and non-income-producing property.  Do not count your primary home.)  -- ",$P(@EASG@(DEPG,9),U),?116,"|"
"RTN","EASEZP6M",108,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6M",109,0)
 ;
"RTN","EASEZP6M",110,0)
 W !,"3. VALUE OF OTHER PROPERTY OR ASSETS (e.g., art, rare coins, collectibles) MINUS THE AMOUNT YOU OWE ON THESE ITEMS.",?116,"|  $ ",$P(@EASG@(DEPG,9),U,4)
"RTN","EASEZP6M",111,0)
 W !,"INCLUDE VALUE OF FARM, RANCH, OR BUSINESS ASSETS.  Exclude household effects and family vehicles.  -- ",$P(@EASG@(DEPG,9),U),?116,"|"
"RTN","EASEZP6M",112,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZP6M",113,0)
 Q
"RTN","EASEZP6U")
0^1^B28307233
"RTN","EASEZP6U",1,0)
EASEZP6U ;ALB/AMA - Print utility for 10-10EZ, Version 6 or greater; 10/23/00
"RTN","EASEZP6U",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**51,60,57**;Mar 15, 2001
"RTN","EASEZP6U",3,0)
 ;
"RTN","EASEZP6U",4,0)
 Q
"RTN","EASEZP6U",5,0)
 ;Parts of this routine were copied from EASEZPU (the other parts are
"RTN","EASEZP6U",6,0)
 ;in EASEZPU2); if the version # of the 1010EZ application is 6.0 or
"RTN","EASEZP6U",7,0)
 ;greater, then this routine will be executed.
"RTN","EASEZP6U",8,0)
 ;
"RTN","EASEZP6U",9,0)
PAGE1 ;This function retrieves and formats the page 1 application data from
"RTN","EASEZP6U",10,0)
 ;the 1010EZ Holding File, #712, for the printed version of the VistA
"RTN","EASEZP6U",11,0)
 ;10-10EZ form.  If the holding file entry has not been accepted, and
"RTN","EASEZP6U",12,0)
 ;a vista entry is available, the vista entry is printed.
"RTN","EASEZP6U",13,0)
 ;   Called from EN^EASEZP6F
"RTN","EASEZP6U",14,0)
 ;
"RTN","EASEZP6U",15,0)
 ;The ^TMP("EZTEMP") global is built in SETUP^EASEZP6F and
"RTN","EASEZP6U",16,0)
 ;remains until the printed form is complete.
"RTN","EASEZP6U",17,0)
 ; Variables
"RTN","EASEZP6U",18,0)
 ;   ZDATA   - references TMP global for output data
"RTN","EASEZP6U",19,0)
 ;   EZDATA  - references available data from 1010EZ holding file
"RTN","EASEZP6U",20,0)
 ;   EASTR   - Temporary String data variable
"RTN","EASEZP6U",21,0)
 ;   EAX,EAY - Temporary data variables
"RTN","EASEZP6U",22,0)
 ;   EACT    - Temporary city variable
"RTN","EASEZP6U",23,0)
 ;
"RTN","EASEZP6U",24,0)
 N ZDATA,EZDATA,EASTR,EAX,EAY,EACT
"RTN","EASEZP6U",25,0)
 ;
"RTN","EASEZP6U",26,0)
 S ZDATA=$NA(^TMP("EASEZ",$J,1))
"RTN","EASEZP6U",27,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"I",1))
"RTN","EASEZP6U",28,0)
 K @ZDATA
"RTN","EASEZP6U",29,0)
 ;
"RTN","EASEZP6U",30,0)
 ;Type Of Benefits Applied For
"RTN","EASEZP6U",31,0)
 S EASTR="" F EAX="1A.1","1A.2","1A.3","1A.4","1A.5" D
"RTN","EASEZP6U",32,0)
 . I $$PROCESS(EAX)="UNKNOWN" S EASTR="UNKNOWN, ",EAX="1A.5" Q
"RTN","EASEZP6U",33,0)
 . I $$PROCESS(EAX)="YES" S EASTR=EASTR_$$BENEFIT(EAX)_", "
"RTN","EASEZP6U",34,0)
 S @ZDATA@("1A")=$E(EASTR,1,($L(EASTR)-2))   ;remove last comma & space
"RTN","EASEZP6U",35,0)
 ;
"RTN","EASEZP6U",36,0)
 S @ZDATA@("1B")=$$PROCESS("1B.")            ;Which facility?
"RTN","EASEZP6U",37,0)
 S @ZDATA@(2)=$$PROCESS(2.1)                 ;Vet's name
"RTN","EASEZP6U",38,0)
 S @ZDATA@(3)=$E($$PROCESS("3."),1,35)       ;Other names used
"RTN","EASEZP6U",39,0)
 S EAX=$E($$PROCESS("3A."),1,35)             ;Mother's maiden name
"RTN","EASEZP6U",40,0)
 I $E(EAX,$L(EAX))="," S EAX=$E(EAX,1,$L(EAX)-1)
"RTN","EASEZP6U",41,0)
 S @ZDATA@("3A")=EAX
"RTN","EASEZP6U",42,0)
 S @ZDATA@(4)=$$PROCESS("4.")                ;Gender
"RTN","EASEZP6U",43,0)
 ;
"RTN","EASEZP6U",44,0)
 S EAX=$$PROCESS("4A.")   ;Are You Spanish, Hispanic, or Latino?
"RTN","EASEZP6U",45,0)
 ;EAS*1.0*57 - print full word "UNKNOWN"
"RTN","EASEZP6U",46,0)
 S @ZDATA@("4A")=$S($E(EAX)="Y"!($E(EAX,1,3)="YES"):"YES",$E(EAX)="N"!($E(EAX,1,3)="NO"):"NO",$E(EAX,1,7)="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZP6U",47,0)
 ;
"RTN","EASEZP6U",48,0)
 F EAX="4B","4C","4D","4E","4F","4G" D       ;Race
"RTN","EASEZP6U",49,0)
 . I $E($$PROCESS(EAX_"."),1,3)="YES" S @ZDATA@(EAX)=" X " I 1
"RTN","EASEZP6U",50,0)
 . E  S @ZDATA@(EAX)="___"
"RTN","EASEZP6U",51,0)
 ;
"RTN","EASEZP6U",52,0)
 S @ZDATA@(5)=$$PROCESS("5.")                ;SSN
"RTN","EASEZP6U",53,0)
 S @ZDATA@(6)=$$PROCESS("6.")                ;Claim number
"RTN","EASEZP6U",54,0)
 S @ZDATA@(7)=$$PROCESS("7.")                ;Date of birth
"RTN","EASEZP6U",55,0)
 S @ZDATA@(8)=$$PROCESS("8.")                ;Religion
"RTN","EASEZP6U",56,0)
 S EAX=$$PROCESS("8A."),EAY=$$PROCESS("8B.") ;Birth place city & state
"RTN","EASEZP6U",57,0)
 I (EAX]""),(EAY]"") S @ZDATA@("8A")=EAX_", "_EAY
"RTN","EASEZP6U",58,0)
 E  S @ZDATA@("8A")=$S(EAX]"":EAX,EAY]"":EAY,1:"")
"RTN","EASEZP6U",59,0)
 S @ZDATA@("9A")=$E($$PROCESS("9A."),1,35)   ;Address
"RTN","EASEZP6U",60,0)
 S @ZDATA@("9B")=$E($$PROCESS("9B."),1,32)   ;City
"RTN","EASEZP6U",61,0)
 S @ZDATA@("9C")=$$PROCESS("9C.")            ;State
"RTN","EASEZP6U",62,0)
 S @ZDATA@("9D")=$$PROCESS("9D.")            ;Zip
"RTN","EASEZP6U",63,0)
 S @ZDATA@("9E")=$$PROCESS("9E.")            ;County
"RTN","EASEZP6U",64,0)
 S @ZDATA@(10)=$$PROCESS("10.1")             ;Home phone
"RTN","EASEZP6U",65,0)
 S @ZDATA@(11)=$$PROCESS("11.1")             ;Work phone
"RTN","EASEZP6U",66,0)
 S @ZDATA@("11A")=$$PROCESS("11A.")          ;E-mail
"RTN","EASEZP6U",67,0)
 S @ZDATA@("11B")=$$PROCESS("11B.")          ;Want an appt?
"RTN","EASEZP6U",68,0)
 S @ZDATA@("11C")=$$PROCESS("11C.")          ;Been seen before?
"RTN","EASEZP6U",69,0)
 S @ZDATA@("11D")=$$PROCESS("11D.")          ;Location seen before
"RTN","EASEZP6U",70,0)
 ;
"RTN","EASEZP6U",71,0)
 ;EAS*1.0*60 -- add cell phone and pager
"RTN","EASEZP6U",72,0)
 S @ZDATA@("11G")=$$PROCESS("11A1.")         ;Cell phone number
"RTN","EASEZP6U",73,0)
 S @ZDATA@("11H")=$$PROCESS("11A3.")         ;Pager number
"RTN","EASEZP6U",74,0)
 ;
"RTN","EASEZP6U",75,0)
 S @ZDATA@(12)=$$PROCESS("12.")              ;Marital status
"RTN","EASEZP6U",76,0)
 S @ZDATA@("13A")=$$PROCESS("13A.")          ;Last branch of service
"RTN","EASEZP6U",77,0)
 S @ZDATA@("13B")=$$PROCESS("13B.")          ;Last entry date
"RTN","EASEZP6U",78,0)
 S @ZDATA@("13C")=$$PROCESS("13C.")          ;Last discharge date
"RTN","EASEZP6U",79,0)
 S @ZDATA@("13D")=$$PROCESS("13D.")          ;Discharge type
"RTN","EASEZP6U",80,0)
 S @ZDATA@("13E")=$$PROCESS("13E.")          ;Military service number
"RTN","EASEZP6U",81,0)
 ;
"RTN","EASEZP6U",82,0)
 F EAX="14A1","14A2","14B","14B2","14D3","14D4","14E","14F","14G","14G1","14I","14J","14K","14L" D
"RTN","EASEZP6U",83,0)
 . S EAY=$$PROCESS(EAX_".")
"RTN","EASEZP6U",84,0)
 . ;EAS*1.0*57 - no room on form here to print full word "UNKNOWN"
"RTN","EASEZP6U",85,0)
 . S @ZDATA@(EAX)=$S(EAY="Y"!(EAY="YES"):"YES",EAY="N"!(EAY="NO"):"NO",EAY="UNKNOWN":"UNK",1:"")
"RTN","EASEZP6U",86,0)
 ;
"RTN","EASEZP6U",87,0)
 S @ZDATA@("14B1")=$$PROCESS("14B1.")   ;Rated percentage
"RTN","EASEZP6U",88,0)
 S @ZDATA@("14K1")=$$PROCESS("14K1.")   ;Medicare Part A effective date
"RTN","EASEZP6U",89,0)
 S @ZDATA@("14L1")=$$PROCESS("14L1.")   ;Medicare Part B effective date
"RTN","EASEZP6U",90,0)
 S @ZDATA@("14M")=$$PROCESS("14M.")     ;Medicare claim number
"RTN","EASEZP6U",91,0)
 S @ZDATA@("14N")=$$PROCESS("14N.")     ;Name on Medicare card
"RTN","EASEZP6U",92,0)
 ;Vet's employment status^Date of retirement
"RTN","EASEZP6U",93,0)
 S @ZDATA@("15A")=$$PROCESS("15A.1")_U_$$PROCESS("15A.2")
"RTN","EASEZP6U",94,0)
 ;
"RTN","EASEZP6U",95,0)
 S EAX=$E($$PROCESS("15B.1"),1,30)            ;Company's name
"RTN","EASEZP6U",96,0)
 S EACT="",EACT=$E($$PROCESS("15B.3"),1,30)   ;Company's city
"RTN","EASEZP6U",97,0)
 I EACT]"" S EACT=EACT_", "   ;if there's a city, add comma & space
"RTN","EASEZP6U",98,0)
 ;Company's name^Street^City, State Zip^Phone
"RTN","EASEZP6U",99,0)
 S EAX=EAX_U_$E($$PROCESS("15B.2"),1,30)_U_EACT_$$PROCESS("15B.4")_" "_$E($$PROCESS("15B.5"),1,10)_U_$$PROCESS("15B.6")
"RTN","EASEZP6U",100,0)
 S @ZDATA@("15B")=EAX
"RTN","EASEZP6U",101,0)
 ;
"RTN","EASEZP6U",102,0)
 ;Spouse's employment status^Date of retirement
"RTN","EASEZP6U",103,0)
 S @ZDATA@("16A")=$$PROCESS("16A.1")_U_$$PROCESS("16A.2")
"RTN","EASEZP6U",104,0)
 ;
"RTN","EASEZP6U",105,0)
 S EAX=$E($$PROCESS("16B.1"),1,30)            ;Spouse's company's name
"RTN","EASEZP6U",106,0)
 S EACT="",EACT=$E($$PROCESS("16B.3"),1,30)   ;Spouse's company's city
"RTN","EASEZP6U",107,0)
 I EACT]"" S EACT=EACT_", "   ;if there's a city, add comma & space
"RTN","EASEZP6U",108,0)
 ;Spouse's company's name^Street^City, State Zip^Phone
"RTN","EASEZP6U",109,0)
 S EAX=EAX_U_$E($$PROCESS("16B.2"),1,30)_U_EACT_$$PROCESS("16B.4")_" "_$E($$PROCESS("16B.5"),1,10)_U_$$PROCESS("16B.6")
"RTN","EASEZP6U",110,0)
 S @ZDATA@("16B")=EAX
"RTN","EASEZP6U",111,0)
 ;
"RTN","EASEZP6U",112,0)
 Q
"RTN","EASEZP6U",113,0)
 ;
"RTN","EASEZP6U",114,0)
PROCESS(KEY) ; Process data value from ^TMP("EZTEMP" array
"RTN","EASEZP6U",115,0)
 ;format = IEN ^ EAS DATA ^ ACCEPT VALUE ^ 712 SUBIEN ^ VISTA DATA
"RTN","EASEZP6U",116,0)
 ;Take #712 value from 2nd piece, if it's accepted;
"RTN","EASEZP6U",117,0)
 ;otherwise, take the Patient File value from the 5th piece
"RTN","EASEZP6U",118,0)
 ;
"RTN","EASEZP6U",119,0)
 N EAV,RSLT
"RTN","EASEZP6U",120,0)
 ;
"RTN","EASEZP6U",121,0)
 I '$D(@EZDATA@(KEY)) G PQ
"RTN","EASEZP6U",122,0)
 S EAV=@EZDATA@(KEY)
"RTN","EASEZP6U",123,0)
 S RSLT=$S(+$P(EAV,U,3):$P(EAV,U,2),1:$P(EAV,U,5))
"RTN","EASEZP6U",124,0)
PQ Q $G(RSLT)
"RTN","EASEZP6U",125,0)
 ;
"RTN","EASEZP6U",126,0)
BENEFIT(X) ; Return External format of benefit applied for
"RTN","EASEZP6U",127,0)
 ;
"RTN","EASEZP6U",128,0)
 Q $S(X="1A.1":"HEALTH SERVICES",X="1A.2":"NURSING HOME",X="1A.3":"DOMICILIARY",X="1A.4":"DENTAL",X="1A.5":"ENROLLMENT",1:"")
"RTN","EASEZPDG")
0^7^B57975781
"RTN","EASEZPDG",1,0)
EASEZPDG ;ALB/AMA/GTS/CMF - PRINT 10-10EZ OR EZR FROM DG OPTIONS
"RTN","EASEZPDG",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZPDG",3,0)
 ;
"RTN","EASEZPDG",4,0)
 Q
"RTN","EASEZPDG",5,0)
 ;
"RTN","EASEZPDG",6,0)
ENEZR(EASDFN,EASMTIEN) ;DBIA 4600 - PRINT THE 10-10EZR FROM DG OPTIONS
"RTN","EASEZPDG",7,0)
 ;   INPUT:
"RTN","EASEZPDG",8,0)
 ;      EASDFN - POINTER TO THE PATIENT FILE (#2) - required
"RTN","EASEZPDG",9,0)
 ;      EASMTIEN - POINTER TO MEANS TEST FILE (#408.31) - optional
"RTN","EASEZPDG",10,0)
 ;       (+ien, "", or 0)
"RTN","EASEZPDG",11,0)
 ;   OUTPUT:
"RTN","EASEZPDG",12,0)
 ;      (+ien or ""):ZTSK - TASKMAN JOB NUMBER
"RTN","EASEZPDG",13,0)
 ;      (0):mt ien (forces test lookup only)
"RTN","EASEZPDG",14,0)
 ;
"RTN","EASEZPDG",15,0)
 N EASFLAG,X
"RTN","EASEZPDG",16,0)
 S EASFLAG="EZR"
"RTN","EASEZPDG",17,0)
 S EASDFN=$G(EASDFN)
"RTN","EASEZPDG",18,0)
 S EASMTIEN=$G(EASMTIEN)
"RTN","EASEZPDG",19,0)
 ;
"RTN","EASEZPDG",20,0)
 S X=$$ENEZ(EASDFN,EASMTIEN)
"RTN","EASEZPDG",21,0)
 Q X
"RTN","EASEZPDG",22,0)
 ;
"RTN","EASEZPDG",23,0)
ENEZ(EASDFN,EASMTIEN) ;DBIA 4600 - PRINT THE 10-10EZ FROM DG OPTIONS
"RTN","EASEZPDG",24,0)
 ;   INPUT:
"RTN","EASEZPDG",25,0)
 ;      EASDFN - POINTER TO THE PATIENT FILE (#2) - required
"RTN","EASEZPDG",26,0)
 ;      EASMTIEN - POINTER TO MEANS TEST FILE (#408.31) - optional
"RTN","EASEZPDG",27,0)
 ;       (+ien, "", or 0)
"RTN","EASEZPDG",28,0)
 ;   OUTPUT:
"RTN","EASEZPDG",29,0)
 ;      (+ien or ""):ZTSK - TASKMAN JOB NUMBER
"RTN","EASEZPDG",30,0)
 ;      (0):mt ien (forces test lookup only)
"RTN","EASEZPDG",31,0)
 ;
"RTN","EASEZPDG",32,0)
 S EASDFN=$G(EASDFN)
"RTN","EASEZPDG",33,0)
 S EASMTIEN=$G(EASMTIEN)
"RTN","EASEZPDG",34,0)
 I EASMTIEN=0 Q $$PICK^EASEZPVU(EASDFN,0)
"RTN","EASEZPDG",35,0)
 E  S EASMTIEN=$$PICK^EASEZPVU(EASDFN,EASMTIEN)
"RTN","EASEZPDG",36,0)
 ;
"RTN","EASEZPDG",37,0)
 ;If any EAS applications exist, ensure they're all filed
"RTN","EASEZPDG",38,0)
 N X,INPROG
"RTN","EASEZPDG",39,0)
 S X=0,INPROG=0 F  S X=$O(^EAS(712,"AC",EASDFN,X)) Q:'X!INPROG  D
"RTN","EASEZPDG",40,0)
 . I $$GET1^DIQ(712,X,7.1)="" D
"RTN","EASEZPDG",41,0)
 . . N IX,DATE F IX="REV","PRT","SIG" Q:INPROG  D
"RTN","EASEZPDG",42,0)
 . . . S DATE=0 F  S DATE=$O(^EAS(712,IX,DATE)) Q:'DATE!INPROG  D
"RTN","EASEZPDG",43,0)
 . . . . I $D(^EAS(712,IX,DATE,X)) S INPROG=1
"RTN","EASEZPDG",44,0)
 I INPROG D  Q 0
"RTN","EASEZPDG",45,0)
 . N DIR
"RTN","EASEZPDG",46,0)
 . W !!,"No data have been found for the selected patient, or"
"RTN","EASEZPDG",47,0)
 . W !,"the patient may have an on-line 10-10EZ application"
"RTN","EASEZPDG",48,0)
 . W !,"in progress.  The 10-10EZ"_$S($G(EASFLAG)="EZR":"R",1:"")_" form shall not be printed."
"RTN","EASEZPDG",49,0)
 . S DIR(0)="E" D ^DIR
"RTN","EASEZPDG",50,0)
 ;
"RTN","EASEZPDG",51,0)
 N %ZIS,ZTDESC,ZTIO,ZTRTN,ZTSAVE,ZTSK,ZUSR,POP,ERR
"RTN","EASEZPDG",52,0)
 ;
"RTN","EASEZPDG",53,0)
 W !!?5,*7,"Do not select a slave device for output."
"RTN","EASEZPDG",54,0)
 W !?5,"This output requires a 132 column output printer."
"RTN","EASEZPDG",55,0)
 W !?5,"Output to SCREEN will be unreadable.",!
"RTN","EASEZPDG",56,0)
 ;
"RTN","EASEZPDG",57,0)
 ;
"RTN","EASEZPDG",58,0)
DEV S %ZIS="QM"
"RTN","EASEZPDG",59,0)
 S %ZIS("S")="I $P($G(^(1)),U)'[""SLAVE""&($P($G(^(0)),U)'[""SLAVE"")"
"RTN","EASEZPDG",60,0)
 S %ZIS("B")=""
"RTN","EASEZPDG",61,0)
 ;S IOP="Q"
"RTN","EASEZPDG",62,0)
 D ^%ZIS
"RTN","EASEZPDG",63,0)
 ;
"RTN","EASEZPDG",64,0)
 I POP D  G EXIT
"RTN","EASEZPDG",65,0)
 . I $D(IO("Q")) K IO("Q")
"RTN","EASEZPDG",66,0)
 . W !,"Print request cancelled!"
"RTN","EASEZPDG",67,0)
 . Q
"RTN","EASEZPDG",68,0)
 I IO=IO(0),$E(IOST,1,2)="C-" D  G DEV
"RTN","EASEZPDG",69,0)
 . W !,*7,"CANNOT QUEUE TO HOME DEVICE!",!
"RTN","EASEZPDG",70,0)
 . Q
"RTN","EASEZPDG",71,0)
 ;
"RTN","EASEZPDG",72,0)
 I $G(EASFLAG)="EZR" S ZTDESC="1010EZR PRINT"
"RTN","EASEZPDG",73,0)
 E  S ZTDESC="1010EZ PRINT"
"RTN","EASEZPDG",74,0)
 S ZUSR=DUZ,ZTRTN="EN^EASEZPDG"
"RTN","EASEZPDG",75,0)
 ;
"RTN","EASEZPDG",76,0)
 F X="ZUSR","EASDFN","EASMTIEN","EASFLAG" S ZTSAVE(X)=""
"RTN","EASEZPDG",77,0)
 D ^%ZTLOAD
"RTN","EASEZPDG",78,0)
 D HOME^%ZIS
"RTN","EASEZPDG",79,0)
 ;
"RTN","EASEZPDG",80,0)
EXIT Q +$G(ZTSK)
"RTN","EASEZPDG",81,0)
 ;
"RTN","EASEZPDG",82,0)
EN ;BACKGROUND JOB ENTRY POINT TO PRINT EZ/EZR FROM DG OPTIONS
"RTN","EASEZPDG",83,0)
 ;
"RTN","EASEZPDG",84,0)
 N EASAPP,C2711
"RTN","EASEZPDG",85,0)
 S EASAPP=0
"RTN","EASEZPDG",86,0)
 I '$G(EASVRSN) S EASVRSN=6
"RTN","EASEZPDG",87,0)
 ;
"RTN","EASEZPDG",88,0)
 ;SET UP ^TMP("EZDATA" AND ^TMP("EZINDEX" FROM ^EAS(711,"A","A"
"RTN","EASEZPDG",89,0)
 D LOCAL711^EASEZU2
"RTN","EASEZPDG",90,0)
 ;
"RTN","EASEZPDG",91,0)
 S C2711=+$$KEY711^EASEZU1("TYPE OF BENEFIT-ENROLLMENT")
"RTN","EASEZPDG",92,0)
 D VISTA^EASEZPVD(EASDFN,EASMTIEN)
"RTN","EASEZPDG",93,0)
 ;
"RTN","EASEZPDG",94,0)
 ;SET UP ^TMP("EZTEMP" AND ^TMP("EZDISP" GLOBALS
"RTN","EASEZPDG",95,0)
 D SORT^EASEZC3(0)
"RTN","EASEZPDG",96,0)
 ;
"RTN","EASEZPDG",97,0)
 ;SET UP PRINT VARIABLES
"RTN","EASEZPDG",98,0)
 N EALNE,EAINFO,EAABRT,EAADL,EAMULT,EAAD,EACNT,KEY
"RTN","EASEZPDG",99,0)
 D SETUP^EASEZPDU(.EALNE,.EAINFO)
"RTN","EASEZPDG",100,0)
 ;
"RTN","EASEZPDG",101,0)
 ;DETERMINE WHICH FORM TO PRINT
"RTN","EASEZPDG",102,0)
 I $G(EASFLAG)="EZR" D EZR I 1
"RTN","EASEZPDG",103,0)
 E  D EZ
"RTN","EASEZPDG",104,0)
 ;
"RTN","EASEZPDG",105,0)
 K ^TMP("EASEZ",$J),^TMP("EASEZR",$J)
"RTN","EASEZPDG",106,0)
 K ^TMP("EZDATA",$J),^TMP("EZRDATA",$J)
"RTN","EASEZPDG",107,0)
 K ^TMP("EZINDEX",$J),^TMP("EZRINDEX",$J)
"RTN","EASEZPDG",108,0)
 K ^TMP("EZTEMP",$J),^TMP("EZRTEMP",$J)
"RTN","EASEZPDG",109,0)
 K ^TMP("EZDISP",$J),^TMP("EZRDISP",$J)
"RTN","EASEZPDG",110,0)
 Q
"RTN","EASEZPDG",111,0)
 ;
"RTN","EASEZPDG",112,0)
EZR ; Entry point to print 1010EZR
"RTN","EASEZPDG",113,0)
 ;
"RTN","EASEZPDG",114,0)
 N EASDG,EAADL,EAAD,EACNT
"RTN","EASEZPDG",115,0)
 M ^TMP("EASEZR",$J)=^TMP("EASEZ",$J) K ^TMP("EASEZ",$J)
"RTN","EASEZPDG",116,0)
 M ^TMP("EZRDATA",$J)=^TMP("EZDATA",$J) K ^TMP("EZDATA",$J)
"RTN","EASEZPDG",117,0)
 M ^TMP("EZRINDEX",$J)=^TMP("EZINDEX",$J) K ^TMP("EZINDEX",$J)
"RTN","EASEZPDG",118,0)
 M ^TMP("EZRTEMP",$J)=^TMP("EZTEMP",$J) K ^TMP("EZTEMP",$J)
"RTN","EASEZPDG",119,0)
 M ^TMP("EZRDISP",$J)=^TMP("EZDISP",$J) K ^TMP("EZDISP",$J)
"RTN","EASEZPDG",120,0)
 ;
"RTN","EASEZPDG",121,0)
 D PAGE1^EASEZRPU
"RTN","EASEZPDG",122,0)
 D EN^EASEZRP1(.EALNE,.EAINFO)
"RTN","EASEZPDG",123,0)
 ;
"RTN","EASEZPDG",124,0)
 D PAGE2^EASEZRPP
"RTN","EASEZPDG",125,0)
 S EASDG=1   ;FLAG VARIABLE TO SIGNIFY PRINTING FROM DG
"RTN","EASEZPDG",126,0)
 D EN^EASEZRP2(.EALNE,.EAINFO,EASDG)
"RTN","EASEZPDG",127,0)
 ;
"RTN","EASEZPDG",128,0)
 D NETEZR^EASEZPDU(.EALNE,.EAINFO)
"RTN","EASEZPDG",129,0)
 ;
"RTN","EASEZPDG",130,0)
 ;Print additional insurance pages if more than 1 insurance company
"RTN","EASEZPDG",131,0)
 F EAADL=1:1 Q:'$D(^TMP("EZRTEMP",$J,"IA",EAADL))  D
"RTN","EASEZPDG",132,0)
 . S EAAD=1
"RTN","EASEZPDG",133,0)
 . D PAGEI^EASEZRPU(EAADL)
"RTN","EASEZPDG",134,0)
 I $G(EAAD) D EN^EASEZRPI(.EALNE,.EAINFO)
"RTN","EASEZPDG",135,0)
 ;
"RTN","EASEZPDG",136,0)
 ;Print additional dependent pages if more than 1 dependent
"RTN","EASEZPDG",137,0)
 S EAAD=0 F EAADL=1:1 Q:'$D(^TMP("EZRTEMP",$J,"IIB",EAADL))  D
"RTN","EASEZPDG",138,0)
 . S EAAD=1   ;FLAG THAT THERE ARE ADDITIONAL DEPENDENTS
"RTN","EASEZPDG",139,0)
 . D PAGEN^EASEZRPU(EAADL)
"RTN","EASEZPDG",140,0)
 I EAAD D EN^EASEZRPD(.EALNE,.EAINFO)
"RTN","EASEZPDG",141,0)
 ;
"RTN","EASEZPDG",142,0)
 ;;RESORT DEPENDENT SUBSCRIPTS TO ENSURE PROPER NUMERICAL ORDER
"RTN","EASEZPDG",143,0)
 ;K ^TMP("EZRSORT",$J)
"RTN","EASEZPDG",144,0)
 ;M ^TMP("EZRSORT",$J,"IIF")=^TMP("EZRTEMP",$J,"IIF")
"RTN","EASEZPDG",145,0)
 ;K ^TMP("EZRTEMP",$J,"IIF")
"RTN","EASEZPDG",146,0)
 ;S EAADL=0,EACNT=1 F  S EAADL=$O(^TMP("EZRSORT",$J,"IIF",EAADL)) Q:'EAADL  D
"RTN","EASEZPDG",147,0)
 ;. N EAQUES
"RTN","EASEZPDG",148,0)
 ;. S EACNT=EACNT+1
"RTN","EASEZPDG",149,0)
 ;. S EAQUES="" F  S EAQUES=$O(^TMP("EZRSORT",$J,"IIF",EAADL,EAQUES)) Q:EAQUES=""  D
"RTN","EASEZPDG",150,0)
 ;. . S ^TMP("EZRTEMP",$J,"IIF",EACNT,EAQUES)=^TMP("EZRSORT",$J,"IIF",EAADL,EAQUES)
"RTN","EASEZPDG",151,0)
 ;K ^TMP("EZRSORT",$J)
"RTN","EASEZPDG",152,0)
 ;
"RTN","EASEZPDG",153,0)
 ;Print additional dependent financial pages if more
"RTN","EASEZPDG",154,0)
 ;than 1 dependent, starting with the 2nd one
"RTN","EASEZPDG",155,0)
 ;(since Child 1 info already displayed on pages 2 & 3)
"RTN","EASEZPDG",156,0)
 S EAAD=0,EAADL=1 F  S EAADL=$O(^TMP("EZRTEMP",$J,"IIF",EAADL)) Q:'EAADL  D
"RTN","EASEZPDG",157,0)
 . S EAAD=1,KEY=+$$KEY711^EASEZU1("CHILD(N) CHILD #")
"RTN","EASEZPDG",158,0)
 . S ^TMP("EZRTEMP",$J,"IIF",EAADL,"7.")=KEY_"^CHILD "_EAADL_"^1"
"RTN","EASEZPDG",159,0)
 . D PAGEDFF^EASEZRPP(EAADL)
"RTN","EASEZPDG",160,0)
 ;
"RTN","EASEZPDG",161,0)
 ;SINCE ANY ADDITIONAL DEPENDENTS' NET WORTH AMOUNTS (SECTION IIG)
"RTN","EASEZPDG",162,0)
 ;ARE INCLUDED IN THE VET'S AMOUNT, DISPLAY A MESSAGE ON THE FORM
"RTN","EASEZPDG",163,0)
 I EAAD D
"RTN","EASEZPDG",164,0)
 . N TEMP,HDR,FTR,BEGF,BEGG,ADFF,FNP,GNP
"RTN","EASEZPDG",165,0)
 . S TEMP="EASEZR",HDR="HDR^EASEZRPF(.EALNE,.EAINFO)"
"RTN","EASEZPDG",166,0)
 . S FTR="FT^EASEZRPF(.EALNE,.EAINFO)",BEGF="BEGINF^EASEZRPM"
"RTN","EASEZPDG",167,0)
 . S BEGG="BEGING^EASEZRPM",ADFF="ADFF^EASEZRPM"
"RTN","EASEZPDG",168,0)
 . S FNP=9,GNP=7
"RTN","EASEZPDG",169,0)
 . D NETMSG
"RTN","EASEZPDG",170,0)
 ;
"RTN","EASEZPDG",171,0)
 Q
"RTN","EASEZPDG",172,0)
 ;
"RTN","EASEZPDG",173,0)
EZ ;PRINT THE 10-10EZ FORM (copied from EASEZP6F)
"RTN","EASEZPDG",174,0)
 ;
"RTN","EASEZPDG",175,0)
 N EASDG,EAADL,EAAD,EACNT
"RTN","EASEZPDG",176,0)
 D PAGE1^EASEZP6U
"RTN","EASEZPDG",177,0)
 D PAGE1^EASEZPU3
"RTN","EASEZPDG",178,0)
 D EN^EASEZP61(.EALNE,.EAINFO)
"RTN","EASEZPDG",179,0)
 ;
"RTN","EASEZPDG",180,0)
 D PAGE2^EASEZPU2
"RTN","EASEZPDG",181,0)
 D EN^EASEZP62(.EALNE,.EAINFO)
"RTN","EASEZPDG",182,0)
 ;
"RTN","EASEZPDG",183,0)
 S EASDG=1   ;FLAG VARIABLE TO SIGNIFY PRINTING FROM DG
"RTN","EASEZPDG",184,0)
 D EN^EASEZP63(.EALNE,.EAINFO,EASDG)
"RTN","EASEZPDG",185,0)
 D NETEZ^EASEZPDU(.EALNE,.EAINFO)
"RTN","EASEZPDG",186,0)
 ;
"RTN","EASEZPDG",187,0)
 ;Print additional insurance pages if more than 1 insurance company
"RTN","EASEZPDG",188,0)
 F EAADL=1:1 Q:'$D(^TMP("EZTEMP",$J,"IA",EAADL))  D
"RTN","EASEZPDG",189,0)
 . S EAAD=1
"RTN","EASEZPDG",190,0)
 . D PAGEI^EASEZPU3(EAADL)
"RTN","EASEZPDG",191,0)
 I $G(EAAD) D EN^EASEZP6I(.EALNE,.EAINFO)
"RTN","EASEZPDG",192,0)
 ;
"RTN","EASEZPDG",193,0)
 ;Print additional dependent pages if more than 1 dependent
"RTN","EASEZPDG",194,0)
 S EAAD=0 F EAADL=1:1 Q:'$D(^TMP("EZTEMP",$J,"IIB",EAADL))  D
"RTN","EASEZPDG",195,0)
 . S EAAD=1   ;FLAG THAT THERE ARE ADDITIONAL DEPENDENTS
"RTN","EASEZPDG",196,0)
 . D PAGEN^EASEZPU3(EAADL)
"RTN","EASEZPDG",197,0)
 I EAAD D EN^EASEZP6D(.EALNE,.EAINFO)
"RTN","EASEZPDG",198,0)
 ;
"RTN","EASEZPDG",199,0)
 K ^AMAB("EASEZ"),^AMAB("EZDATA"),^AMAB("EZINDEX"),^AMAB("EZTEMP"),^AMAB("EZDISP")
"RTN","EASEZPDG",200,0)
 M ^AMAB("EASEZ",$J)=^TMP("EASEZ",$J)
"RTN","EASEZPDG",201,0)
 M ^AMAB("EZDATA",$J)=^TMP("EZDATA",$J)
"RTN","EASEZPDG",202,0)
 M ^AMAB("EZINDEX",$J)=^TMP("EZINDEX",$J)
"RTN","EASEZPDG",203,0)
 M ^AMAB("EZTEMP",$J)=^TMP("EZTEMP",$J)
"RTN","EASEZPDG",204,0)
 M ^AMAB("EZDISP",$J)=^TMP("EZDISP",$J)
"RTN","EASEZPDG",205,0)
 ;
"RTN","EASEZPDG",206,0)
 ;;RESORT DEPENDENT SUBSCRIPTS TO ENSURE PROPER NUMERICAL ORDER
"RTN","EASEZPDG",207,0)
 ;K ^TMP("EZSORT",$J)
"RTN","EASEZPDG",208,0)
 ;M ^TMP("EZSORT",$J,"IIF")=^TMP("EZTEMP",$J,"IIF")
"RTN","EASEZPDG",209,0)
 ;K ^TMP("EZTEMP",$J,"IIF")
"RTN","EASEZPDG",210,0)
 ;S (EAADL,EACNT)=1 F  S EAADL=$O(^TMP("EZSORT",$J,"IIF",EAADL)) Q:'EAADL  D
"RTN","EASEZPDG",211,0)
 ;. N EAQUES
"RTN","EASEZPDG",212,0)
 ;. S EACNT=EACNT+1
"RTN","EASEZPDG",213,0)
 ;. S EAQUES="" F  S EAQUES=$O(^TMP("EZSORT",$J,"IIF",EAADL,EAQUES)) Q:EAQUES=""  D
"RTN","EASEZPDG",214,0)
 ;. . S ^TMP("EZTEMP",$J,"IIF",EACNT,EAQUES)=^TMP("EZSORT",$J,"IIF",EAADL,EAQUES)
"RTN","EASEZPDG",215,0)
 ;K ^TMP("EZSORT",$J)
"RTN","EASEZPDG",216,0)
 ;
"RTN","EASEZPDG",217,0)
 ;Print additional dependent financial pages if more
"RTN","EASEZPDG",218,0)
 ;than 1 dependent, starting with the 2nd one
"RTN","EASEZPDG",219,0)
 ;(since Child 1 info already displayed on pages 2 & 3)
"RTN","EASEZPDG",220,0)
 S EAAD=0,EAADL=1 F  S EAADL=$O(^TMP("EZTEMP",$J,"IIF",EAADL)) Q:'EAADL  D
"RTN","EASEZPDG",221,0)
 . S EAAD=1,KEY=+$$KEY711^EASEZU1("CHILD(N) CHILD #")
"RTN","EASEZPDG",222,0)
 . S ^TMP("EZTEMP",$J,"IIF",EAADL,"7.")=KEY_"^CHILD "_EAADL_"^1"
"RTN","EASEZPDG",223,0)
 . D PAGEDFF^EASEZPU2(EAADL)
"RTN","EASEZPDG",224,0)
 ;
"RTN","EASEZPDG",225,0)
 ;SINCE ANY ADDITIONAL DEPENDENTS' NET WORTH AMOUNTS (SECTION IIG)
"RTN","EASEZPDG",226,0)
 ;ARE INCLUDED IN THE VET'S AMOUNT, DISPLAY A MESSAGE ON THE FORM
"RTN","EASEZPDG",227,0)
 I EAAD D
"RTN","EASEZPDG",228,0)
 . ;PRINT IIF AND IIG SECTIONS
"RTN","EASEZPDG",229,0)
 . N TEMP,HDR,FTR,BEGF,BEGG,ADFF,FNP,GNP
"RTN","EASEZPDG",230,0)
 . S TEMP="EASEZ",HDR="HDR^EASEZP6F(.EALNE,.EAINFO)"
"RTN","EASEZPDG",231,0)
 . S FTR="FT^EASEZP6F(.EALNE,.EAINFO)",BEGF="BEGINF^EASEZP6M"
"RTN","EASEZPDG",232,0)
 . S BEGG="BEGING^EASEZP6M",ADFF="ADFF^EASEZP6M"
"RTN","EASEZPDG",233,0)
 . S FNP=9,GNP=7
"RTN","EASEZPDG",234,0)
 . D NETMSG
"RTN","EASEZPDG",235,0)
 ;
"RTN","EASEZPDG",236,0)
 Q
"RTN","EASEZPDG",237,0)
 ;
"RTN","EASEZPDG",238,0)
NETMSG ;PRINT THE MESSAGE FOR THE NET WORTH SECTION
"RTN","EASEZPDG",239,0)
 ;
"RTN","EASEZPDG",240,0)
 N EASF,DEPF,DFCNT,NEWPG
"RTN","EASEZPDG",241,0)
 ;
"RTN","EASEZPDG",242,0)
 S EASF=$NA(^TMP(TEMP,$J,"DFF"))
"RTN","EASEZPDG",243,0)
 I $O(@EASF@(1)) D @BEGF
"RTN","EASEZPDG",244,0)
 ;
"RTN","EASEZPDG",245,0)
 ;Start printing with 2nd dependent
"RTN","EASEZPDG",246,0)
 S DEPF=1,DFCNT=0 F  S DEPF=$O(@EASF@(DEPF)) Q:'DEPF  D
"RTN","EASEZPDG",247,0)
 . S DFCNT=DFCNT+1
"RTN","EASEZPDG",248,0)
 . ;Check to see if a new page is needed
"RTN","EASEZPDG",249,0)
 . I (DFCNT>1),'((DFCNT-1)#FNP) D
"RTN","EASEZPDG",250,0)
 . . D @FTR
"RTN","EASEZPDG",251,0)
 . . D @BEGF
"RTN","EASEZPDG",252,0)
 . I (DFCNT#FNP)'=1 W !?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDG",253,0)
 . D @ADFF
"RTN","EASEZPDG",254,0)
 ;
"RTN","EASEZPDG",255,0)
 ;PRINT NET WORTH MESSAGE IF THERE ARE *any* ADDITIONAL DEPENDENTS
"RTN","EASEZPDG",256,0)
 I ((DFCNT#FNP)'=0),((DFCNT#FNP)'=GNP) W !!,?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDG",257,0)
 ;At the end of IIF, to find when to jump to the next page, 
"RTN","EASEZPDG",258,0)
 ;55 print lines, minus 3 lines for Section IIG title header,
"RTN","EASEZPDG",259,0)
 ;minus the number of lines already used on current page,
"RTN","EASEZPDG",260,0)
 ;divided by the number of lines for a Section IIG entry
"RTN","EASEZPDG",261,0)
 S NEWPG=(52-((DFCNT#FNP)*6))\7
"RTN","EASEZPDG",262,0)
 I '(DFCNT#FNP)!'NEWPG!(NEWPG=GNP) S NEWPG=GNP D @FTR
"RTN","EASEZPDG",263,0)
 D @BEGG
"RTN","EASEZPDG",264,0)
 W !!?23,"ANY PREVIOUS CALENDAR YEAR NET WORTH AMOUNTS FROM ANY ADDITIONAL DEPENDENT CHILD(REN)"
"RTN","EASEZPDG",265,0)
 W !!?29,"WILL BE INCLUDED IN THE VETERAN'S PREVIOUS CALENDAR YEAR NET WORTH AMOUNTS.",!
"RTN","EASEZPDG",266,0)
 D @FTR
"RTN","EASEZPDG",267,0)
 ;
"RTN","EASEZPDG",268,0)
 Q
"RTN","EASEZPDU")
0^11^B40371978
"RTN","EASEZPDU",1,0)
EASEZPDU ;ALB/AMA - PRINT 10-10EZ OR EZR FROM DG OPTIONS UTILITIES
"RTN","EASEZPDU",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZPDU",3,0)
 ;
"RTN","EASEZPDU",4,0)
 Q
"RTN","EASEZPDU",5,0)
 ;
"RTN","EASEZPDU",6,0)
SETUP(EALNE,EAINFO) ; Set-up print variables
"RTN","EASEZPDU",7,0)
 ; Input
"RTN","EASEZPDU",8,0)
 ;   EALNE   - Line format array
"RTN","EASEZPDU",9,0)
 ;   EAINFO  - Misc Data
"RTN","EASEZPDU",10,0)
 ;      ("CLRK") - Clerk's initials
"RTN","EASEZPDU",11,0)
 ;      ("ID")   - Web ID from #712
"RTN","EASEZPDU",12,0)
 ;      ("PGE")  - Page number
"RTN","EASEZPDU",13,0)
 ;      ("VET" ) - Veteran's name submitting the application
"RTN","EASEZPDU",14,0)
 ;      ("SSN")  - Veteran's SSN
"RTN","EASEZPDU",15,0)
 ;
"RTN","EASEZPDU",16,0)
 N X
"RTN","EASEZPDU",17,0)
 ;
"RTN","EASEZPDU",18,0)
 ; Build Line array for printout
"RTN","EASEZPDU",19,0)
 S EALNE("ULC")=$S('($D(IOST)#2):"-",IOST["C-":"-",1:"_")
"RTN","EASEZPDU",20,0)
 S EALNE("D")="",EALNE("DD")="",EALNE("UL")=""
"RTN","EASEZPDU",21,0)
 S $P(EALNE("D"),"-",133)="",$P(EALNE("DD"),"=",133)="",$P(EALNE("UL"),EALNE("ULC"),133)=""
"RTN","EASEZPDU",22,0)
 ;
"RTN","EASEZPDU",23,0)
 ; Set up information array & get clerk's initials
"RTN","EASEZPDU",24,0)
 S ZUSR=$G(ZUSR)
"RTN","EASEZPDU",25,0)
 I +ZUSR>0 D
"RTN","EASEZPDU",26,0)
 . S EAINFO("CLRK")=$$GET1^DIQ(200,ZUSR,1)
"RTN","EASEZPDU",27,0)
 . I EAINFO("CLRK")']"" D
"RTN","EASEZPDU",28,0)
 . . S X=$$GET1^DIQ(200,ZUSR,.01)
"RTN","EASEZPDU",29,0)
 . . S EAINFO("CLRK")=$E($P(X,",",2),1)_$E($P(X,","),1)
"RTN","EASEZPDU",30,0)
 E  D
"RTN","EASEZPDU",31,0)
 . S EAINFO("CLRK")="unk"
"RTN","EASEZPDU",32,0)
 ;
"RTN","EASEZPDU",33,0)
 ; Set data elements
"RTN","EASEZPDU",34,0)
 S EAINFO("PGE")=0
"RTN","EASEZPDU",35,0)
 S EAINFO("ID")=""
"RTN","EASEZPDU",36,0)
 S EAINFO("PD")=$$FMTE^XLFDT($$NOW^XLFDT)
"RTN","EASEZPDU",37,0)
 S EAINFO("EASAPP")=0
"RTN","EASEZPDU",38,0)
 S EAINFO("VET")=""
"RTN","EASEZPDU",39,0)
 S EAINFO("SSN")=""
"RTN","EASEZPDU",40,0)
 Q
"RTN","EASEZPDU",41,0)
 ;
"RTN","EASEZPDU",42,0)
NETEZ(EALNE,EAINFO) ;  Print SECTION X - PREVIOUS CALENDAR YEAR NET WORTH
"RTN","EASEZPDU",43,0)
 ;Copied from EASEZP64
"RTN","EASEZPDU",44,0)
 ; Input
"RTN","EASEZPDU",45,0)
 ;   EALNE   - Line format array
"RTN","EASEZPDU",46,0)
 ;   EAINFO  - Misc Data
"RTN","EASEZPDU",47,0)
 ;      ("CLRK") - Clerk's initials
"RTN","EASEZPDU",48,0)
 ;      ("ID")   - Web ID from #712
"RTN","EASEZPDU",49,0)
 ;      ("PGE")  - Page number
"RTN","EASEZPDU",50,0)
 ;      ("VET" ) - Veteran's name submitting the application
"RTN","EASEZPDU",51,0)
 ;      ("SSN")  - Veteran's SSN
"RTN","EASEZPDU",52,0)
 ;      ("DISC") - Financial Disclosure status
"RTN","EASEZPDU",53,0)
 ;
"RTN","EASEZPDU",54,0)
 N EASIGN,EASD
"RTN","EASEZPDU",55,0)
 ;
"RTN","EASEZPDU",56,0)
 I $$GET1^DIQ(712,EAINFO("EASAPP")_",",4)]"" D
"RTN","EASEZPDU",57,0)
 . S EASIGN=$$GET1^DIQ(712,EAINFO("EASAPP")_",",4.1)
"RTN","EASEZPDU",58,0)
 S EASIGN=$G(EASIGN)
"RTN","EASEZPDU",59,0)
 ;
"RTN","EASEZPDU",60,0)
 D HDR^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZPDU",61,0)
 S EASD=$NA(^TMP("EASEZ",$J,2))
"RTN","EASEZPDU",62,0)
 ;
"RTN","EASEZPDU",63,0)
 I +@EASD@(999) W !!?7,"SECTION X - PREVIOUS CALENDAR YEAR NET WORTH  (INCOME YEAR:  ",@EASD@(999),")  (Use a separate sheet for additional dependents)"
"RTN","EASEZPDU",64,0)
 E  W !!?18,"SECTION X - PREVIOUS CALENDAR YEAR NET WORTH  (Use a separate sheet for additional dependents)"
"RTN","EASEZPDU",65,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",66,0)
 ;
"RTN","EASEZPDU",67,0)
 W !?78,"|",?84,"VETERAN",?96,"|",?102,"SPOUSE",?114,"|",?120,"CHILD 1"
"RTN","EASEZPDU",68,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",69,0)
 ;
"RTN","EASEZPDU",70,0)
 W !,"1. CASH, AMOUNT IN BANK ACCOUNTS (e.g., checking and savings accounts,",?78,"|  $ ",$P(@EASD@("2E1"),U),?96,"|  $ ",$P(@EASD@("2E1"),U,2),?114,"|"
"RTN","EASEZPDU",71,0)
 I $P(@EASD@("2E1"),U) W "  Included in"
"RTN","EASEZPDU",72,0)
 W !,"certificates of deposit, individual retirement accounts, stocks and bonds)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",73,0)
 I $P(@EASD@("2E1"),U) W "  Veteran amount"
"RTN","EASEZPDU",74,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",75,0)
 ;
"RTN","EASEZPDU",76,0)
 W !,"2. MARKET VALUE OF LAND AND BUILDINGS MINUS MORTGAGES AND LIENS (e.g., second",?78,"|  $ ",$P(@EASD@("2E2"),U),?96,"|  $ ",$P(@EASD@("2E2"),U,2),?114,"|"
"RTN","EASEZPDU",77,0)
 I $P(@EASD@("2E2"),U) W "  Included in"
"RTN","EASEZPDU",78,0)
 W !,"homes and non-income-producing property.  Do not count your primary home.)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",79,0)
 I $P(@EASD@("2E2"),U) W "  Veteran amount"
"RTN","EASEZPDU",80,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",81,0)
 ;
"RTN","EASEZPDU",82,0)
 W !,"3. VALUE OF OTHER PROPERTY OR ASSETS (e.g., art, rare coins, collectibles)",?78,"|  $ ",$P(@EASD@("2E3"),U),?96,"|  $ ",$P(@EASD@("2E3"),U,2),?114,"|"
"RTN","EASEZPDU",83,0)
 I $P(@EASD@("2E3"),U) W "  Included in"
"RTN","EASEZPDU",84,0)
 W !,"MINUS THE AMOUNT YOU OWE ON THESE ITEMS.  INCLUDE VALUE OF FARM, RANCH, OR",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",85,0)
 I $P(@EASD@("2E3"),U) W "  Veteran amount"
"RTN","EASEZPDU",86,0)
 W !,"BUSINESS ASSETS.  Exclude household effects and family vehicles.",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",87,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",88,0)
 ;
"RTN","EASEZPDU",89,0)
 D CON^EASEZP64
"RTN","EASEZPDU",90,0)
 D AOB^EASEZP64
"RTN","EASEZPDU",91,0)
 D FT^EASEZP6F(.EALNE,.EAINFO)
"RTN","EASEZPDU",92,0)
 ;
"RTN","EASEZPDU",93,0)
 Q
"RTN","EASEZPDU",94,0)
 ;
"RTN","EASEZPDU",95,0)
NETEZR(EALNE,EAINFO) ;  Print SECTION IX - PREVIOUS CALENDAR YEAR NET WORTH
"RTN","EASEZPDU",96,0)
 ;Copied from EASEZRP3
"RTN","EASEZPDU",97,0)
 ; Input
"RTN","EASEZPDU",98,0)
 ;   EALNE   - Line format array
"RTN","EASEZPDU",99,0)
 ;   EAINFO  - Misc Data
"RTN","EASEZPDU",100,0)
 ;      ("CLRK") - Clerk's initials
"RTN","EASEZPDU",101,0)
 ;      ("ID")   - Web ID from #712
"RTN","EASEZPDU",102,0)
 ;      ("PGE")  - Page number
"RTN","EASEZPDU",103,0)
 ;      ("VET" ) - Veteran's name submitting the application
"RTN","EASEZPDU",104,0)
 ;      ("SSN")  - Veteran's SSN
"RTN","EASEZPDU",105,0)
 ;      ("DISC") - Financial Disclosure status
"RTN","EASEZPDU",106,0)
 ;
"RTN","EASEZPDU",107,0)
 N EASIGN,EASD
"RTN","EASEZPDU",108,0)
 ;
"RTN","EASEZPDU",109,0)
 I $$GET1^DIQ(712,EAINFO("EASAPP")_",",4)]"" D
"RTN","EASEZPDU",110,0)
 . S EASIGN=$$GET1^DIQ(712,EAINFO("EASAPP")_",",4.1)
"RTN","EASEZPDU",111,0)
 S EASIGN=$G(EASIGN)
"RTN","EASEZPDU",112,0)
 ;
"RTN","EASEZPDU",113,0)
 D HDR^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZPDU",114,0)
 S EASD=$NA(^TMP("EASEZR",$J,2))
"RTN","EASEZPDU",115,0)
 ;
"RTN","EASEZPDU",116,0)
 I +@EASD@(999) W !?7,"SECTION IX - PREVIOUS CALENDAR YEAR NET WORTH  (INCOME YEAR:  ",@EASD@(999),")  (Use a separate sheet for additional dependents)"
"RTN","EASEZPDU",117,0)
 E  W !?18,"SECTION IX - PREVIOUS CALENDAR YEAR NET WORTH  (Use a separate sheet for additional dependents)"
"RTN","EASEZPDU",118,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",119,0)
 ;
"RTN","EASEZPDU",120,0)
 W !?78,"|",?84,"VETERAN",?96,"|",?102,"SPOUSE",?114,"|",?120,"CHILD 1"
"RTN","EASEZPDU",121,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",122,0)
 ;
"RTN","EASEZPDU",123,0)
 W !,"1. CASH, AMOUNT IN BANK ACCOUNTS (e.g., checking and savings accounts,",?78,"|  $ ",$P(@EASD@("2E1"),U),?96,"|  $ ",$P(@EASD@("2E1"),U,2),?114,"|"
"RTN","EASEZPDU",124,0)
 I $P(@EASD@("2E1"),U) W "  Included in"
"RTN","EASEZPDU",125,0)
 W !,"certificates of deposit, individual retirement accounts, stocks and bonds)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",126,0)
 I $P(@EASD@("2E1"),U) W "  Veteran amount"
"RTN","EASEZPDU",127,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",128,0)
 ;
"RTN","EASEZPDU",129,0)
 W !,"2. MARKET VALUE OF LAND AND BUILDINGS MINUS MORTGAGES AND LIENS (e.g., second",?78,"|  $ ",$P(@EASD@("2E2"),U),?96,"|  $ ",$P(@EASD@("2E2"),U,2),?114,"|"
"RTN","EASEZPDU",130,0)
 I $P(@EASD@("2E2"),U) W "  Included in"
"RTN","EASEZPDU",131,0)
 W !,"homes and non-income-producing property.  Do not include your primary home.)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",132,0)
 I $P(@EASD@("2E2"),U) W "  Veteran amount"
"RTN","EASEZPDU",133,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",134,0)
 ;
"RTN","EASEZPDU",135,0)
 W !,"3. VALUE OF OTHER PROPERTY OR ASSETS (e.g., art, rare coins, collectibles)",?78,"|  $ ",$P(@EASD@("2E3"),U),?96,"|  $ ",$P(@EASD@("2E3"),U,2),?114,"|"
"RTN","EASEZPDU",136,0)
 I $P(@EASD@("2E3"),U) W "  Included in"
"RTN","EASEZPDU",137,0)
 W !,"MINUS THE AMOUNT YOU OWE ON THESE ITEMS.  INCLUDE VALUE OF FARM, RANCH, OR",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",138,0)
 I $P(@EASD@("2E3"),U) W "  Veteran amount"
"RTN","EASEZPDU",139,0)
 W !,"BUSINESS ASSETS.  Exclude household effects and family vehicles.",?78,"|",?96,"|",?114,"|"
"RTN","EASEZPDU",140,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZPDU",141,0)
 ;
"RTN","EASEZPDU",142,0)
 D CON^EASEZRP3
"RTN","EASEZPDU",143,0)
 D AOB^EASEZRP3
"RTN","EASEZPDU",144,0)
 D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZPDU",145,0)
 Q
"RTN","EASEZPU2")
0^2^B37335348
"RTN","EASEZPU2",1,0)
EASEZPU2 ; ALB/AMA - Print utility for 10-10EZ, Version 6 or greater; 12/28/2004
"RTN","EASEZPU2",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**51,60,57**;Mar 15, 2001
"RTN","EASEZPU2",3,0)
 ;
"RTN","EASEZPU2",4,0)
 Q
"RTN","EASEZPU2",5,0)
 ;Parts of this routine were copied from EASEZPU (this is the second
"RTN","EASEZPU2",6,0)
 ;part of EASEZP6U); if the version # of the 1010EZ application is
"RTN","EASEZPU2",7,0)
 ;6.0 or greater, then this routine will be executed.
"RTN","EASEZPU2",8,0)
 ;
"RTN","EASEZPU2",9,0)
PAGE2 ;Retrieve page 2 data and format for output on 10-10EZ form
"RTN","EASEZPU2",10,0)
 ;   Called from EN^EASEZP6F
"RTN","EASEZPU2",11,0)
 ;
"RTN","EASEZPU2",12,0)
 ;Variables
"RTN","EASEZPU2",13,0)
 ;   ZDATA         - references TMP global for output data
"RTN","EASEZPU2",14,0)
 ;   EZDATA        - references available data from 1010EZ holding file
"RTN","EASEZPU2",15,0)
 ;   EAX, EAY      - temporary storage variables
"RTN","EASEZPU2",16,0)
 ;   EACT          - Temporary city variable
"RTN","EASEZPU2",17,0)
 ;   EAV, EAS, EAC - temp storage for vet, spouse, and child variables
"RTN","EASEZPU2",18,0)
 ;
"RTN","EASEZPU2",19,0)
 N ZDATA,EZDATA,EAX,EAY,EACT,EAV,EAS,EAC
"RTN","EASEZPU2",20,0)
 ;
"RTN","EASEZPU2",21,0)
 S ZDATA=$NA(^TMP("EASEZ",$J,2))
"RTN","EASEZPU2",22,0)
 K @ZDATA
"RTN","EASEZPU2",23,0)
 ;
"RTN","EASEZPU2",24,0)
 ; Process Section IIA - Dependent Info
"RTN","EASEZPU2",25,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"IIA",1))
"RTN","EASEZPU2",26,0)
 ;
"RTN","EASEZPU2",27,0)
 S EAX=$$PROCESS(1.1),EAY=$$PROCESS(1.5)
"RTN","EASEZPU2",28,0)
 I $E(EAY,$L(EAY))="," S EAY=$E(EAY,1,$L(EAY)-1)
"RTN","EASEZPU2",29,0)
 S @ZDATA@(1)=EAX_U_EAY             ;Spouse's name^maiden name
"RTN","EASEZPU2",30,0)
 S @ZDATA@(2)=$$PROCESS(2.1)        ;Child 1's name
"RTN","EASEZPU2",31,0)
 S @ZDATA@(3)=$$PROCESS("3.")       ;Spouse's SSN
"RTN","EASEZPU2",32,0)
 S @ZDATA@(4)=$$PROCESS("4.")       ;Spouse's date of birth
"RTN","EASEZPU2",33,0)
 S @ZDATA@(5)=$$PROCESS("5.")       ;Child 1's date of birth
"RTN","EASEZPU2",34,0)
 S EACT="",EACT=$$PROCESS(6.2)      ;Spouse's city
"RTN","EASEZPU2",35,0)
 I EACT]"" S EACT=EACT_", "   ;if there's a city, add comma & space
"RTN","EASEZPU2",36,0)
 ;Spouse's street^city, state zip
"RTN","EASEZPU2",37,0)
 S @ZDATA@(6)=$$PROCESS(6.1)_U_EACT_$$PROCESS(6.3)_" "_$$PROCESS(6.4)
"RTN","EASEZPU2",38,0)
 ;
"RTN","EASEZPU2",39,0)
 S @ZDATA@(7)=$$PROCESS("7.")       ;Child 1's SSN
"RTN","EASEZPU2",40,0)
 S @ZDATA@(8)=$$PROCESS(8.1)        ;Spouse's phone
"RTN","EASEZPU2",41,0)
 S @ZDATA@(9)=$$PROCESS("9.")       ;Child 1's relationship
"RTN","EASEZPU2",42,0)
 S @ZDATA@(10)=$$PROCESS("10.")     ;Date of marriage to spouse
"RTN","EASEZPU2",43,0)
 S @ZDATA@(11)=$$PROCESS("11.")     ;Date Child 1 became dependent
"RTN","EASEZPU2",44,0)
 ;
"RTN","EASEZPU2",45,0)
 S EAX=$$PROCESS(12.1)              ;Amount contributed to spouse
"RTN","EASEZPU2",46,0)
 S EAY=$$PROCESS(12.2)              ;Amount contributed to Child 1
"RTN","EASEZPU2",47,0)
 S @ZDATA@(12)=$S(EAX="":"",1:$J(EAX,0,2))_U_$S(EAY="":"",1:$J(EAY,0,2))
"RTN","EASEZPU2",48,0)
 ;
"RTN","EASEZPU2",49,0)
 S @ZDATA@(13)=$$PROCESS("13.")     ;Educational expenses for Child 1
"RTN","EASEZPU2",50,0)
 S @ZDATA@(13)=$S(@ZDATA@(13)="":"",1:$J(@ZDATA@(13),0,2))
"RTN","EASEZPU2",51,0)
 ;
"RTN","EASEZPU2",52,0)
 S EAX=$$PROCESS("14.")             ;Child 1 disabled?
"RTN","EASEZPU2",53,0)
 ;EAS*1.0*57 - print full word "UNKNOWN"
"RTN","EASEZPU2",54,0)
 ;             If Child 1 exists and answer is blank, set to "UNKNOWN"
"RTN","EASEZPU2",55,0)
 ;             If no Child 1, then leave blank
"RTN","EASEZPU2",56,0)
 I (EAX=""),(@ZDATA@(2)]"") S EAX="UNKNOWN"
"RTN","EASEZPU2",57,0)
 I @ZDATA@(2)']"" S EAX=""
"RTN","EASEZPU2",58,0)
 S @ZDATA@(14)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZPU2",59,0)
 S EAX=$$PROCESS("15.")             ;Child 1 attend school last year?
"RTN","EASEZPU2",60,0)
 ;EAS*1.0*57 - print full word "UNKNOWN"
"RTN","EASEZPU2",61,0)
 ;             If Child 1 exists and answer is blank, set to "UNKNOWN"
"RTN","EASEZPU2",62,0)
 ;             If no Child 1, then leave blank
"RTN","EASEZPU2",63,0)
 I (EAX=""),(@ZDATA@(2)]"") S EAX="UNKNOWN"
"RTN","EASEZPU2",64,0)
 I @ZDATA@(2)']"" S EAX=""
"RTN","EASEZPU2",65,0)
 S @ZDATA@(15)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZPU2",66,0)
 ;
"RTN","EASEZPU2",67,0)
 ; Process Section IIC - Previous Calendar Year Gross Annual Income
"RTN","EASEZPU2",68,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"IIC",1))
"RTN","EASEZPU2",69,0)
 ;
"RTN","EASEZPU2",70,0)
 S EAV=$$PROCESS(1.4),EAS=$$PROCESS(1.5)     ;Vet & spouse gross income
"RTN","EASEZPU2",71,0)
 S @ZDATA@("2C1")=$S(EAV="":"",1:$J(EAV,0,2))_U_$S(EAS="":"",1:$J(EAS,0,2))
"RTN","EASEZPU2",72,0)
 ;
"RTN","EASEZPU2",73,0)
 S EAV=$$PROCESS(2.1),EAS=$$PROCESS(2.2)     ;Vet & spouse other income
"RTN","EASEZPU2",74,0)
 S @ZDATA@("2C2")=$S(EAV="":"",1:$J(EAV,0,2))_U_$S(EAS="":"",1:$J(EAS,0,2))
"RTN","EASEZPU2",75,0)
 ;
"RTN","EASEZPU2",76,0)
 S EAV=$$PROCESS(3.1),EAS=$$PROCESS(3.2)     ;Vet & spouse net income
"RTN","EASEZPU2",77,0)
 S @ZDATA@("2C3")=$S(EAV="":"",1:$J(EAV,0,2))_U_$S(EAS="":"",1:$J(EAS,0,2))
"RTN","EASEZPU2",78,0)
 ;
"RTN","EASEZPU2",79,0)
 S @ZDATA@(999)=$$PROCESS(999)               ;Vet income year
"RTN","EASEZPU2",80,0)
 I $D(@EZDATA@(998)) D
"RTN","EASEZPU2",81,0)
 . S @ZDATA@(998)=$$PROCESS(998)             ;Vet Declines To Give Info
"RTN","EASEZPU2",82,0)
 ;
"RTN","EASEZPU2",83,0)
 ;Since Child amounts in Section IIC are for ALL dependents,
"RTN","EASEZPU2",84,0)
 ;get just Child 1 amounts from Section IIF - Dependent Gross Incomes
"RTN","EASEZPU2",85,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"IIF",1))
"RTN","EASEZPU2",86,0)
 S EAC=$$PROCESS(7.1)                            ;Child 1 gross income
"RTN","EASEZPU2",87,0)
 S @ZDATA@("2C1")=@ZDATA@("2C1")_U_$S(EAC="":"",1:$J(EAC,0,2))
"RTN","EASEZPU2",88,0)
 S EAC=$$PROCESS(7.2)                            ;Child 1 net income
"RTN","EASEZPU2",89,0)
 S @ZDATA@("2C3")=@ZDATA@("2C3")_U_$S(EAC="":"",1:$J(EAC,0,2))
"RTN","EASEZPU2",90,0)
 S EAC=$$PROCESS(7.3)                            ;Child 1 other income
"RTN","EASEZPU2",91,0)
 S @ZDATA@("2C2")=@ZDATA@("2C2")_U_$S(EAC="":"",1:$J(EAC,0,2))
"RTN","EASEZPU2",92,0)
 ;
"RTN","EASEZPU2",93,0)
 ; Process Section IID - Previous Calendar Year Expenses
"RTN","EASEZPU2",94,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"IID",1))
"RTN","EASEZPU2",95,0)
 ;
"RTN","EASEZPU2",96,0)
 ;Medical expenses
"RTN","EASEZPU2",97,0)
 S EAX=$$PROCESS("1."),@ZDATA@("2D1")=$S(EAX="":"",1:$J(EAX,0,2))
"RTN","EASEZPU2",98,0)
 ;Funeral expenses
"RTN","EASEZPU2",99,0)
 S EAX=$$PROCESS("2."),@ZDATA@("2D2")=$S(EAX="":"",1:$J(EAX,0,2))
"RTN","EASEZPU2",100,0)
 ;Educational expenses
"RTN","EASEZPU2",101,0)
 S EAX=$$PROCESS("3."),@ZDATA@("2D3")=$S(EAX="":"",1:$J(EAX,0,2))
"RTN","EASEZPU2",102,0)
 ;
"RTN","EASEZPU2",103,0)
 ; Process Section IIE - Previous Calendar Year Net Worth
"RTN","EASEZPU2",104,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"IIE",1))
"RTN","EASEZPU2",105,0)
 ;
"RTN","EASEZPU2",106,0)
 S EAV=$$PROCESS("1."),EAS=$$PROCESS(1.2)  ;Vet & spouse cash
"RTN","EASEZPU2",107,0)
 S @ZDATA@("2E1")=$S(EAV="":"",1:$J(EAV,0,2))_U_$S(EAS="":"",1:$J(EAS,0,2))
"RTN","EASEZPU2",108,0)
 ;
"RTN","EASEZPU2",109,0)
 S EAV=$$PROCESS("2."),EAS=$$PROCESS(2.2)  ;Vet & spouse land value
"RTN","EASEZPU2",110,0)
 S @ZDATA@("2E2")=$S(EAV="":"",1:$J(EAV,0,2))_U_$S(EAS="":"",1:$J(EAS,0,2))
"RTN","EASEZPU2",111,0)
 ;
"RTN","EASEZPU2",112,0)
 S EAV=$$PROCESS("3."),EAS=$$PROCESS(3.2)  ;Vet & spouse other property
"RTN","EASEZPU2",113,0)
 S @ZDATA@("2E3")=$S(EAV="":"",1:$J(EAV,0,2))_U_$S(EAS="":"",1:$J(EAS,0,2))
"RTN","EASEZPU2",114,0)
 ;
"RTN","EASEZPU2",115,0)
 ;Since Child amounts in Section IIE are for ALL dependents,
"RTN","EASEZPU2",116,0)
 ;get just Child 1 amounts from Section IIG - Dependent Net Worths
"RTN","EASEZPU2",117,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"IIG",1))
"RTN","EASEZPU2",118,0)
 S EAC=$$PROCESS(9.1)                           ;Child 1 cash
"RTN","EASEZPU2",119,0)
 S @ZDATA@("2E1")=@ZDATA@("2E1")_U_$S(EAC="":"",1:$J(EAC,0,2))
"RTN","EASEZPU2",120,0)
 S EAC=$$PROCESS(9.2)                           ;Child 1 land value
"RTN","EASEZPU2",121,0)
 S @ZDATA@("2E2")=@ZDATA@("2E2")_U_$S(EAC="":"",1:$J(EAC,0,2))
"RTN","EASEZPU2",122,0)
 S EAC=$$PROCESS(9.3)                           ;Child 1 other property
"RTN","EASEZPU2",123,0)
 S @ZDATA@("2E3")=@ZDATA@("2E3")_U_$S(EAC="":"",1:$J(EAC,0,2))
"RTN","EASEZPU2",124,0)
 ;
"RTN","EASEZPU2",125,0)
 Q
"RTN","EASEZPU2",126,0)
 ;
"RTN","EASEZPU2",127,0)
PAGEDFF(EADEP) ;  Additional dependent financial page(s) for Section IIF
"RTN","EASEZPU2",128,0)
 ; Called from EN^EASEZP6F
"RTN","EASEZPU2",129,0)
 N ZDATA,EZDATA,EANAME,EAGROSS,EANET,EAOTHER
"RTN","EASEZPU2",130,0)
 ;
"RTN","EASEZPU2",131,0)
 S ZDATA=$NA(^TMP("EASEZ",$J,"DFF",EADEP))
"RTN","EASEZPU2",132,0)
 K @ZDATA
"RTN","EASEZPU2",133,0)
 ;
"RTN","EASEZPU2",134,0)
 ; Process Section IIF
"RTN","EASEZPU2",135,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"IIF",EADEP))
"RTN","EASEZPU2",136,0)
 ;
"RTN","EASEZPU2",137,0)
 S EANAME=$$PROCESS("7.")   ;Child number (2 through 19)
"RTN","EASEZPU2",138,0)
 S EAGROSS=$$PROCESS(7.1),EANET=$$PROCESS(7.2),EAOTHER=$$PROCESS(7.3)
"RTN","EASEZPU2",139,0)
 ;Child #^gross income^net income^other income
"RTN","EASEZPU2",140,0)
 S @ZDATA@(7)=EANAME_U_$S(EAGROSS="":"",1:$J(EAGROSS,0,2))_U_$S(EANET="":"",1:$J(EANET,0,2))_U_$S(EAOTHER="":"",1:$J(EAOTHER,0,2))
"RTN","EASEZPU2",141,0)
 ;
"RTN","EASEZPU2",142,0)
 Q
"RTN","EASEZPU2",143,0)
 ;
"RTN","EASEZPU2",144,0)
PAGEDFG(EADEP)  ; Additional dependent financial page(s) for Section IIG
"RTN","EASEZPU2",145,0)
 ; Called from EN^EASEZP6F
"RTN","EASEZPU2",146,0)
 N ZDATA,EZDATA,EANAME,EACASH,EAREAL,EAOTHER
"RTN","EASEZPU2",147,0)
 ;
"RTN","EASEZPU2",148,0)
 S ZDATA=$NA(^TMP("EASEZ",$J,"DFG",EADEP))
"RTN","EASEZPU2",149,0)
 K @ZDATA
"RTN","EASEZPU2",150,0)
 ;
"RTN","EASEZPU2",151,0)
 ; Process Section IIG
"RTN","EASEZPU2",152,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"IIG",EADEP))
"RTN","EASEZPU2",153,0)
 ;
"RTN","EASEZPU2",154,0)
 S EANAME=$$PROCESS("9.")   ;Child number (2 through 19)
"RTN","EASEZPU2",155,0)
 S EACASH=$$PROCESS(9.1),EAREAL=$$PROCESS(9.2),EAOTHER=$$PROCESS(9.3)
"RTN","EASEZPU2",156,0)
 ;Child #^cash^land value^other property
"RTN","EASEZPU2",157,0)
 S @ZDATA@(9)=EANAME_U_$S(EACASH="":"",1:$J(EACASH,0,2))_U_$S(EAREAL="":"",1:$J(EAREAL,0,2))_U_$S(EAOTHER="":"",1:$J(EAOTHER,0,2))
"RTN","EASEZPU2",158,0)
 ;
"RTN","EASEZPU2",159,0)
 Q
"RTN","EASEZPU2",160,0)
 ;
"RTN","EASEZPU2",161,0)
PROCESS(KEY) ; Process data value from ^TMP("EZTEMP" array                   
"RTN","EASEZPU2",162,0)
 ;format = IEN ^ EAS DATA ^ ACCEPT VALUE ^ 712 SUBIEN ^ VISTA DATA
"RTN","EASEZPU2",163,0)
 ;Take #712 value from 2nd piece, if it's accepted;
"RTN","EASEZPU2",164,0)
 ;otherwise, take the Patient File value from the 5th piece
"RTN","EASEZPU2",165,0)
 ;
"RTN","EASEZPU2",166,0)
 N EAV,RSLT
"RTN","EASEZPU2",167,0)
 ;
"RTN","EASEZPU2",168,0)
 I '$D(@EZDATA@(KEY)) G PQ
"RTN","EASEZPU2",169,0)
 S EAV=@EZDATA@(KEY)
"RTN","EASEZPU2",170,0)
 S RSLT=$S(+$P(EAV,U,3):$P(EAV,U,2),1:$P(EAV,U,5))
"RTN","EASEZPU2",171,0)
PQ Q $G(RSLT)
"RTN","EASEZPU3")
0^12^B24284626
"RTN","EASEZPU3",1,0)
EASEZPU3 ;ALB/AMA - Print utility for 10-10EZ, Version 6 or greater; 10/23/00
"RTN","EASEZPU3",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZPU3",3,0)
 ;
"RTN","EASEZPU3",4,0)
 Q
"RTN","EASEZPU3",5,0)
 ;Split from EASEZP6U
"RTN","EASEZPU3",6,0)
 ;
"RTN","EASEZPU3",7,0)
PAGE1 ;This function retrieves and formats the page 1 application data from
"RTN","EASEZPU3",8,0)
 ;the 1010EZ Holding File, #712, for the printed version of the VistA
"RTN","EASEZPU3",9,0)
 ;10-10EZ form.  If the holding file entry has not been accepted, and
"RTN","EASEZPU3",10,0)
 ;a vista entry is available, the vista entry is printed.
"RTN","EASEZPU3",11,0)
 ;   Called from EN^EASEZP6F
"RTN","EASEZPU3",12,0)
 ;
"RTN","EASEZPU3",13,0)
 ;The ^TMP("EZTEMP") global is built in SETUP^EASEZP6F and
"RTN","EASEZPU3",14,0)
 ;remains until the printed form is complete.
"RTN","EASEZPU3",15,0)
 ; Variables
"RTN","EASEZPU3",16,0)
 ;   ZDATA   - references TMP global for output data
"RTN","EASEZPU3",17,0)
 ;   EZDATA  - references available data from 1010EZ holding file
"RTN","EASEZPU3",18,0)
 ;   EAX     - Temporary data variables
"RTN","EASEZPU3",19,0)
 ;   EACT    - Temporary city variable
"RTN","EASEZPU3",20,0)
 ;
"RTN","EASEZPU3",21,0)
 N ZDATA,EZDATA,EAX,EACT
"RTN","EASEZPU3",22,0)
 ;
"RTN","EASEZPU3",23,0)
 S ZDATA=$NA(^TMP("EASEZ",$J,1))
"RTN","EASEZPU3",24,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"I",1))
"RTN","EASEZPU3",25,0)
 ;
"RTN","EASEZPU3",26,0)
 S EAX=$$PROCESS("17.")   ;Covered by health insurance?
"RTN","EASEZPU3",27,0)
 ;EAS*1.0*57 - print full word "UNKNOWN"
"RTN","EASEZPU3",28,0)
 S @ZDATA@(17)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZPU3",29,0)
 ;
"RTN","EASEZPU3",30,0)
 S @ZDATA@("17A")=$$PROCESS("17A.")           ;Insurance company's name
"RTN","EASEZPU3",31,0)
 S @ZDATA@("17B")=$E($$PROCESS("17B."),1,30)  ;Name of policy holder
"RTN","EASEZPU3",32,0)
 S @ZDATA@("17C")=$$PROCESS("17C.")           ;Policy number
"RTN","EASEZPU3",33,0)
 S @ZDATA@("17D")=$$PROCESS("17D.")           ;Group code
"RTN","EASEZPU3",34,0)
 ;
"RTN","EASEZPU3",35,0)
 S EACT="",EACT=$$PROCESS("17F.")             ;Insurance company's city
"RTN","EASEZPU3",36,0)
 I EACT]"" S EACT=EACT_", "   ;if there's a city, add comma & space
"RTN","EASEZPU3",37,0)
 ;Insurance company's street^city, state zip
"RTN","EASEZPU3",38,0)
 S @ZDATA@("17E")=$$PROCESS("17E.")_U_EACT_$$PROCESS("17G.")_" "_$$PROCESS("17H.")
"RTN","EASEZPU3",39,0)
 S @ZDATA@("17I")=$$PROCESS("17I.")           ;Insurance company's phone
"RTN","EASEZPU3",40,0)
 ;
"RTN","EASEZPU3",41,0)
 S EACT="",EACT=$E($$PROCESS("19A.4"),1,30)   ;Next-of-kin's city
"RTN","EASEZPU3",42,0)
 I EACT]"" S EACT=EACT_", "   ;if there's a city, add comma & space
"RTN","EASEZPU3",43,0)
 ;Next-of-kin's name^street^city, state zip^relationship
"RTN","EASEZPU3",44,0)
 S @ZDATA@("19A")=$$PROCESS("19A.1")_U_$E($$PROCESS("19A.3"),1,30)_U_EACT_$$PROCESS("19A.5")_" "_$E($$PROCESS("19A.6"),1,10)_U_$$PROCESS("19A.7")
"RTN","EASEZPU3",45,0)
 S @ZDATA@("19B")=$$PROCESS("19B.1")          ;Next-of-kin's home phone
"RTN","EASEZPU3",46,0)
 S @ZDATA@("19C")=$$PROCESS("19C.1")          ;Next-of-kin's work phone
"RTN","EASEZPU3",47,0)
 ;
"RTN","EASEZPU3",48,0)
 S EACT="",EACT=$E($$PROCESS("20A.4"),1,30)   ;Emergency contact's city
"RTN","EASEZPU3",49,0)
 I EACT]"" S EACT=EACT_", "   ;if there's a city, add comma & space
"RTN","EASEZPU3",50,0)
 ;Emergency contact's name^street^city, state zip^relationship
"RTN","EASEZPU3",51,0)
 S @ZDATA@("20A")=$$PROCESS("20A.1")_U_$E($$PROCESS("20A.3"),1,30)_U_EACT_$$PROCESS("20A.5")_" "_$E($$PROCESS("20A.6"),1,10)_U_$$PROCESS("20A.7")
"RTN","EASEZPU3",52,0)
 S @ZDATA@("20B")=$$PROCESS("20B.1")          ;EC's home phone
"RTN","EASEZPU3",53,0)
 S @ZDATA@("20C")=$$PROCESS("20C.1")          ;EC's work phone
"RTN","EASEZPU3",54,0)
 ;
"RTN","EASEZPU3",55,0)
 S @ZDATA@("21")=$$PROCESS("21.")             ;Who receives property?
"RTN","EASEZPU3",56,0)
 S EAX=$$PROCESS("22A.")                      ;On-the-job injury?
"RTN","EASEZPU3",57,0)
 ;EAS*1.0*57 - print full word "UNKNOWN"
"RTN","EASEZPU3",58,0)
 S @ZDATA@("22A")=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",(EAX="UNKNOWN"):"UNKNOWN",1:"")
"RTN","EASEZPU3",59,0)
 ;
"RTN","EASEZPU3",60,0)
 S EAX=$$PROCESS("22B.")                      ;Accident?
"RTN","EASEZPU3",61,0)
 ;EAS*1.0*57 - print full word "UNKNOWN"
"RTN","EASEZPU3",62,0)
 S @ZDATA@("22B")=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",(EAX="UNKNOWN"):"UNKNOWN",1:"")
"RTN","EASEZPU3",63,0)
 Q
"RTN","EASEZPU3",64,0)
 ;
"RTN","EASEZPU3",65,0)
PAGEI(EAINS) ;  Additional Insurance pages
"RTN","EASEZPU3",66,0)
 ; Called from EN^EASEZP6F
"RTN","EASEZPU3",67,0)
 N ZDATA,EZDATA,EACT
"RTN","EASEZPU3",68,0)
 ;
"RTN","EASEZPU3",69,0)
 S ZDATA=$NA(^TMP("EASEZ",$J,"I",EAINS))
"RTN","EASEZPU3",70,0)
 K @ZDATA
"RTN","EASEZPU3",71,0)
 ;
"RTN","EASEZPU3",72,0)
 ; Process Section IA
"RTN","EASEZPU3",73,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"IA",EAINS))
"RTN","EASEZPU3",74,0)
 ;
"RTN","EASEZPU3",75,0)
 S @ZDATA@("17A")=$$PROCESS("17A.")           ;Insurance company's name
"RTN","EASEZPU3",76,0)
 S @ZDATA@("17B")=$E($$PROCESS("17B."),1,30)  ;Name of policy holder
"RTN","EASEZPU3",77,0)
 S @ZDATA@("17C")=$$PROCESS("17C.")           ;Policy number
"RTN","EASEZPU3",78,0)
 S @ZDATA@("17D")=$$PROCESS("17D.")           ;Group code
"RTN","EASEZPU3",79,0)
 S EACT="",EACT=$$PROCESS("17F.")             ;Insurance company's city
"RTN","EASEZPU3",80,0)
 I EACT]"" S EACT=EACT_", "   ;if there's a street, add comma & space
"RTN","EASEZPU3",81,0)
 ;Health insurance company's street^city, state zip
"RTN","EASEZPU3",82,0)
 S @ZDATA@("17E")=$$PROCESS("17E.")_U_EACT_$$PROCESS("17G.")_" "_$$PROCESS("17H.")
"RTN","EASEZPU3",83,0)
 S @ZDATA@("17I")=$$PROCESS("17I.")           ;Insurance company's phone
"RTN","EASEZPU3",84,0)
 ;
"RTN","EASEZPU3",85,0)
 Q
"RTN","EASEZPU3",86,0)
 ;
"RTN","EASEZPU3",87,0)
PAGEN(EADEP) ;  Additional dependent page(s)
"RTN","EASEZPU3",88,0)
 ; Called from EN^EASEZP6F
"RTN","EASEZPU3",89,0)
 N ZDATA,EZDATA,EAX
"RTN","EASEZPU3",90,0)
 ;
"RTN","EASEZPU3",91,0)
 S ZDATA=$NA(^TMP("EASEZ",$J,"D",EADEP))
"RTN","EASEZPU3",92,0)
 K @ZDATA
"RTN","EASEZPU3",93,0)
 ;
"RTN","EASEZPU3",94,0)
 ; Process Section IIB
"RTN","EASEZPU3",95,0)
 S EZDATA=$NA(^TMP("EZTEMP",$J,"IIB",EADEP))
"RTN","EASEZPU3",96,0)
 ;
"RTN","EASEZPU3",97,0)
 S @ZDATA@(2)=$$PROCESS(1.1)                      ;Child's name
"RTN","EASEZPU3",98,0)
 S @ZDATA@(5)=$$PROCESS("3.")                     ;Date of birth
"RTN","EASEZPU3",99,0)
 S @ZDATA@(7)=$$PROCESS("2.")                     ;SSN
"RTN","EASEZPU3",100,0)
 S @ZDATA@(9)=$$PROCESS("4.")                     ;Relationship
"RTN","EASEZPU3",101,0)
 S @ZDATA@(11)=$$PROCESS("5.")                    ;Date of dependency
"RTN","EASEZPU3",102,0)
 ;Amount contributed
"RTN","EASEZPU3",103,0)
 S EAX=$$PROCESS("6."),@ZDATA@(12)=U_$S(EAX="":"",1:$J(EAX,0,2))
"RTN","EASEZPU3",104,0)
 ;Education expenses
"RTN","EASEZPU3",105,0)
 S EAX=$$PROCESS("7."),@ZDATA@(13)=$S(EAX="":"",1:$J(EAX,0,2))
"RTN","EASEZPU3",106,0)
 ;
"RTN","EASEZPU3",107,0)
 S EAX=$$PROCESS("8.")                            ;Permanently disabled?
"RTN","EASEZPU3",108,0)
 ;EAS*1.0*57 - print full word "UNKNOWN"
"RTN","EASEZPU3",109,0)
 S @ZDATA@(14)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZPU3",110,0)
 S EAX=$$PROCESS("9.")                            ;School last year?
"RTN","EASEZPU3",111,0)
 ;EAS*1.0*57 - print full word "UNKNOWN"
"RTN","EASEZPU3",112,0)
 S @ZDATA@(15)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZPU3",113,0)
 ;
"RTN","EASEZPU3",114,0)
 Q
"RTN","EASEZPU3",115,0)
 ;
"RTN","EASEZPU3",116,0)
PROCESS(KEY) ; Process data value from ^TMP("EZTEMP" array
"RTN","EASEZPU3",117,0)
 ;format = IEN ^ EAS DATA ^ ACCEPT VALUE ^ 712 SUBIEN ^ VISTA DATA
"RTN","EASEZPU3",118,0)
 ;Take #712 value from 2nd piece, if it's accepted;
"RTN","EASEZPU3",119,0)
 ;otherwise, take the Patient File value from the 5th piece
"RTN","EASEZPU3",120,0)
 ;
"RTN","EASEZPU3",121,0)
 N EAV,RSLT
"RTN","EASEZPU3",122,0)
 ;
"RTN","EASEZPU3",123,0)
 I '$D(@EZDATA@(KEY)) G PQ
"RTN","EASEZPU3",124,0)
 S EAV=@EZDATA@(KEY)
"RTN","EASEZPU3",125,0)
 S RSLT=$S(+$P(EAV,U,3):$P(EAV,U,2),1:$P(EAV,U,5))
"RTN","EASEZPU3",126,0)
PQ Q $G(RSLT)
"RTN","EASEZPV2")
0^9^B32363733
"RTN","EASEZPV2",1,0)
EASEZPV2 ;ALB/AMA/GTS/CMF - GATHER VISTA MEANS TEST DATA TO PRINT FROM DG OPTIONS
"RTN","EASEZPV2",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZPV2",3,0)
 ;
"RTN","EASEZPV2",4,0)
V408(EASDFN,EASMTIEN) ;GATHER MEANS TEST DATA -- CALLED FROM VISTA^EASEZPVD
"RTN","EASEZPV2",5,0)
 ;   INPUT:
"RTN","EASEZPV2",6,0)
 ;      EASDFN - POINTER TO PATIENT FILE (#2)
"RTN","EASEZPV2",7,0)
 ;      EASMTIEN - MeansTestIEN (#408.31)
"RTN","EASEZPV2",8,0)
 N MTIFN,MTDT,INCREL
"RTN","EASEZPV2",9,0)
 S MTIFN=+$G(EASMTIEN)
"RTN","EASEZPV2",10,0)
 S MTDT=$$GET1^DIQ(408.31,MTIFN_",",.01,"I")
"RTN","EASEZPV2",11,0)
 ;
"RTN","EASEZPV2",12,0)
 ;GET DATA FROM FILES 408.12, 408.13, 408.21, AND 408.22
"RTN","EASEZPV2",13,0)
 D I408^EASEZPVI(EASDFN,MTDT,.INCREL)
"RTN","EASEZPV2",14,0)
 I $D(INCREL)>1 D
"RTN","EASEZPV2",15,0)
 . ;MODIFIED FROM A408^EASEZC2
"RTN","EASEZPV2",16,0)
 . N IENS,B,FILE,M,MM,TYPE,IEN,NSD,FLD
"RTN","EASEZPV2",17,0)
 . N FFF,PERS,GRP,GRP1,SUBF,SUBIEN,WHERE
"RTN","EASEZPV2",18,0)
 . S IENS=$G(INCREL(408,"V",1))
"RTN","EASEZPV2",19,0)
 . ;ADD "INCOME YEAR" AND "DECLINES TO GIVE INFO" INTO ^TMP GLOBALS
"RTN","EASEZPV2",20,0)
 . N EZTMPIEN
"RTN","EASEZPV2",21,0)
 . S EZTMPIEN=$O(^TMP("EZDATA",$J,""),-1)+1
"RTN","EASEZPV2",22,0)
 . S ^TMP("EZDATA",$J,EZTMPIEN)="408.21^408.21^.01^IIC;999^Income Year"
"RTN","EASEZPV2",23,0)
 . S ^TMP("EZINDEX",$J,"A",408.21,408.21,.01,EZTMPIEN)=EZTMPIEN_"^APPLICANT INCOME YEAR"
"RTN","EASEZPV2",24,0)
 . S EZTMPIEN=EZTMPIEN+1
"RTN","EASEZPV2",25,0)
 . S ^TMP("EZDATA",$J,EZTMPIEN)="408.31^408.31^.14^IIC;998^Declines To Give Info"
"RTN","EASEZPV2",26,0)
 . S ^TMP("EZINDEX",$J,"A",408.31,408.31,.14,EZTMPIEN)=EZTMPIEN_"^APPLICANT DECLINES TO GIVE INFO"
"RTN","EASEZPV2",27,0)
 . I MTIFN>0 S B=0 D GET408(408.31,"A",MTIFN)
"RTN","EASEZPV2",28,0)
 . ;
"RTN","EASEZPV2",29,0)
 . I IENS S B=0 F FILE=408.12,2,408.21,408.22 D GET408(FILE,"A",IENS)
"RTN","EASEZPV2",30,0)
 . ;MODIFIED FROM SP408^EASEZC2
"RTN","EASEZPV2",31,0)
 . S IENS=$G(INCREL(408,"S",1))
"RTN","EASEZPV2",32,0)
 . I IENS S B=0 F FILE=408.12,408.13,408.21,408.22 D GET408(FILE,"S",IENS)
"RTN","EASEZPV2",33,0)
 . ;MODIFIED FROM C1N408^EASEZC2
"RTN","EASEZPV2",34,0)
 . S (M,MM)=0 F  S M=$O(INCREL(408,"C",M)) Q:'M  D
"RTN","EASEZPV2",35,0)
 . . ;DETERMINE IF ACTIVE
"RTN","EASEZPV2",36,0)
 . . S IEN=+$P(INCREL(408,"C",M),U)
"RTN","EASEZPV2",37,0)
 . . ;
"RTN","EASEZPV2",38,0)
 . . S IEN=+$P(INCREL(408,"C",M),U,2)
"RTN","EASEZPV2",39,0)
 . . S NSD="" F FLD=.01,.09,.03 D
"RTN","EASEZPV2",40,0)
 . . . S FFF=408.13_U_408.13_U_FLD,VDATA=$$GET^EASEZC1(IEN,FFF)
"RTN","EASEZPV2",41,0)
 . . . I FLD=.09 S VDATA=$$SSNOUT^EASEZT1(VDATA)
"RTN","EASEZPV2",42,0)
 . . . I FLD=.03 S VDATA=$$XDATE^EASEZT1(VDATA)
"RTN","EASEZPV2",43,0)
 . . . S NSD=NSD_VDATA_U
"RTN","EASEZPV2",44,0)
 . . I MM=0 D  I 1
"RTN","EASEZPV2",45,0)
 . . . S MM=1
"RTN","EASEZPV2",46,0)
 . . . S PERS("EZ","CHILD1",1)=NSD
"RTN","EASEZPV2",47,0)
 . . . S PERS("EZ","CHILD1",1,"IENS")=INCREL(408,"C",M)
"RTN","EASEZPV2",48,0)
 . . E  D
"RTN","EASEZPV2",49,0)
 . . . S PERS("EZ","CHILD(N)",MM)=NSD
"RTN","EASEZPV2",50,0)
 . . . S PERS("EZ","CHILD(N)",MM,"IENS")=INCREL(408,"C",M)
"RTN","EASEZPV2",51,0)
 . . . S MM=MM+1
"RTN","EASEZPV2",52,0)
 . ;
"RTN","EASEZPV2",53,0)
 . ;get identifying data for child in database
"RTN","EASEZPV2",54,0)
 . F TYPE="CHILD1","CHILD(N)" S M=0 F  S M=$O(PERS("EZ",TYPE,M)) Q:'M  D
"RTN","EASEZPV2",55,0)
 . . S IENS=$G(PERS("EZ",TYPE,M,"IENS")) Q:IENS=""
"RTN","EASEZPV2",56,0)
 . . S GRP=$S(TYPE="CHILD1":"C1",1:"CN")
"RTN","EASEZPV2",57,0)
 . . ;associate each ien with file/subfile
"RTN","EASEZPV2",58,0)
 . . S B=0 F FILE=408.12,408.13,408.21,408.22 D
"RTN","EASEZPV2",59,0)
 . . . S B=B+1,IEN=+$P(IENS,U,B) Q:'IEN
"RTN","EASEZPV2",60,0)
 . . . I 'MTDT,((FILE=408.21)!(FILE=408.22)) Q
"RTN","EASEZPV2",61,0)
 . . . D CONT
"RTN","EASEZPV2",62,0)
 Q
"RTN","EASEZPV2",63,0)
 ;
"RTN","EASEZPV2",64,0)
GET408(FILE,SRCE,IENS) ;GATHER THE DATA FROM THE 408 FILES
"RTN","EASEZPV2",65,0)
 ;   INPUT:
"RTN","EASEZPV2",66,0)
 ;      FILE - FILE TO SEARCH
"RTN","EASEZPV2",67,0)
 ;      SRCE - SOURCE OF DATA ("A"PPLICANT, "S"POUSE)
"RTN","EASEZPV2",68,0)
 ;      IENS - IEN FROM THE INCREL ARRAY
"RTN","EASEZPV2",69,0)
 ;
"RTN","EASEZPV2",70,0)
 N IEN,FLD,MAP,VDATA,KEY
"RTN","EASEZPV2",71,0)
 ;IF NO MEANS TEST, THEN DON'T GATHER ANY MONEY AMOUNTS
"RTN","EASEZPV2",72,0)
 I 'MTDT,((FILE=408.21)!(FILE=408.22)) Q
"RTN","EASEZPV2",73,0)
 S B=B+1,IEN=+$P(IENS,U,B) Q:'IEN  Q:FILE=2
"RTN","EASEZPV2",74,0)
 I (FILE=408.22),('MTIFN!($P($G(^DGMT(FILE,+IEN,"MT")),U)'=MTIFN)) Q
"RTN","EASEZPV2",75,0)
 S FLD=0 F  S FLD=$O(^TMP("EZINDEX",$J,SRCE,FILE,FILE,FLD)) Q:'FLD  D
"RTN","EASEZPV2",76,0)
 . S MAP=FILE_U_FILE_U_FLD
"RTN","EASEZPV2",77,0)
 . S VDATA=$$GET^EASEZC1(IEN,MAP)
"RTN","EASEZPV2",78,0)
 . I (FILE=408.31),(FLD=.14) D
"RTN","EASEZPV2",79,0)
 . . I (VDATA="")!(VDATA=0) S VDATA="NO"
"RTN","EASEZPV2",80,0)
 . . I VDATA=1 S VDATA="YES"
"RTN","EASEZPV2",81,0)
 . I (FILE=408.21) D
"RTN","EASEZPV2",82,0)
 . . I (FLD=.08) S VDATA=$$SUMSSI^EASEZT2(VDATA,IEN)
"RTN","EASEZPV2",83,0)
 . . I (FLD=2.01) S VDATA=$$SUMCASH^EASEZT2(VDATA,IEN)
"RTN","EASEZPV2",84,0)
 . . I (FLD=2.04) S VDATA=$$SUMPROP^EASEZT2(VDATA,IEN)
"RTN","EASEZPV2",85,0)
 . . Q
"RTN","EASEZPV2",86,0)
 . Q:VDATA=-1  Q:VDATA=""
"RTN","EASEZPV2",87,0)
 . I (SRCE="S"),(FILE=408.13),(FLD=.09) S VDATA=$$SSNOUT^EASEZT1(VDATA)
"RTN","EASEZPV2",88,0)
 . I (SRCE="S"),(FILE=408.13),(FLD=.03) S VDATA=$$XDATE^EASEZT1(VDATA)
"RTN","EASEZPV2",89,0)
 . S KEY=0 F  S KEY=$O(^TMP("EZINDEX",$J,SRCE,FILE,FILE,FLD,KEY)) Q:'KEY  D
"RTN","EASEZPV2",90,0)
 . . S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPV2",91,0)
 . . I (FILE=408.21),(SRCE="A") D
"RTN","EASEZPV2",92,0)
 . . . I ";2.01;2.03;2.04;"'[(";"_FLD_";") Q
"RTN","EASEZPV2",93,0)
 . . . N TEXT,NEWKEY
"RTN","EASEZPV2",94,0)
 . . . I FLD=2.01 S TEXT="APPLICANT CASH IN BANK2"
"RTN","EASEZPV2",95,0)
 . . . I FLD=2.03 S TEXT="APPLICANT REAL PROPERTY LESS MORTGAGES2"
"RTN","EASEZPV2",96,0)
 . . . I FLD=2.04 S TEXT="APPLICANT STOCKS BONDS ASSETS LESS DEBTS2"
"RTN","EASEZPV2",97,0)
 . . . S NEWKEY=+$$KEY711^EASEZU1(TEXT)
"RTN","EASEZPV2",98,0)
 . . . S ^TMP("EZDATA",$J,NEWKEY,1,2)=VDATA
"RTN","EASEZPV2",99,0)
 ;
"RTN","EASEZPV2",100,0)
 I (FILE=408.12),(SRCE="S") D
"RTN","EASEZPV2",101,0)
 . S SUBF=408.1275
"RTN","EASEZPV2",102,0)
 . S FLD=0 F  S FLD=$O(^TMP("EZINDEX",$J,SRCE,FILE,SUBF,FLD)) Q:'FLD  D
"RTN","EASEZPV2",103,0)
 . . S SUBIEN=$$I1275^EASEZI(IEN)
"RTN","EASEZPV2",104,0)
 . . S MAP=FILE_U_SUBF_U_FLD,WHERE=IEN_";"_SUBIEN
"RTN","EASEZPV2",105,0)
 . . S VDATA=$$GET^EASEZC1(WHERE,MAP)
"RTN","EASEZPV2",106,0)
 . . Q:VDATA=-1  Q:VDATA=""
"RTN","EASEZPV2",107,0)
 . . S KEY=0 F  S KEY=$O(^TMP("EZINDEX",$J,SRCE,FILE,SUBF,FLD,KEY)) Q:'KEY  D
"RTN","EASEZPV2",108,0)
 . . . S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPV2",109,0)
 Q
"RTN","EASEZPV2",110,0)
 ;
"RTN","EASEZPV2",111,0)
CONT ;CONTINUATION OF CHILD FINANCIAL DATA
"RTN","EASEZPV2",112,0)
 ;
"RTN","EASEZPV2",113,0)
 I (FILE=408.22),('MTIFN!'IEN!($P($G(^DGMT(FILE,+IEN,"MT")),U)'=MTIFN)) Q
"RTN","EASEZPV2",114,0)
 S FLD=0 F  S FLD=$O(^TMP("EZINDEX",$J,GRP,FILE,FILE,FLD)) Q:FLD=""  D
"RTN","EASEZPV2",115,0)
 . S MAP=FILE_U_FILE_U_FLD
"RTN","EASEZPV2",116,0)
 . S GRP1=GRP I (EASVRSN>5.99),(FILE=408.21),(".08;.14;.17"[FLD) S GRP1="CN"
"RTN","EASEZPV2",117,0)
 . S VDATA=$$GET^EASEZC1(IEN,MAP)
"RTN","EASEZPV2",118,0)
 . I (FILE=408.21) D
"RTN","EASEZPV2",119,0)
 . . I (FLD=.08) S VDATA=$$SUMSSI^EASEZT2(VDATA,IEN)
"RTN","EASEZPV2",120,0)
 . . I (FLD=2.01) S VDATA=$$SUMCASH^EASEZT2(VDATA,IEN)
"RTN","EASEZPV2",121,0)
 . . I (FLD=2.04) S VDATA=$$SUMPROP^EASEZT2(VDATA,IEN)
"RTN","EASEZPV2",122,0)
 . . Q
"RTN","EASEZPV2",123,0)
 . Q:VDATA=-1  Q:VDATA=""
"RTN","EASEZPV2",124,0)
 . I (FILE=408.13),(FLD=.09) S VDATA=$$SSNOUT^EASEZT1(VDATA)
"RTN","EASEZPV2",125,0)
 . I (FILE=408.13),(FLD=.03) S VDATA=$$XDATE^EASEZT1(VDATA)
"RTN","EASEZPV2",126,0)
 . ;store link in all 1010EZ elements associated with this file/subfile
"RTN","EASEZPV2",127,0)
 . S KEY=$O(^TMP("EZINDEX",$J,GRP1,FILE,FILE,FLD,0)) Q:'KEY
"RTN","EASEZPV2",128,0)
 . S MM=M I EASVRSN>5.99,FILE=408.21,".08;.14;.17"[FLD S:(TYPE="CHILD(N)") MM=M+1
"RTN","EASEZPV2",129,0)
 . S ^TMP("EZDATA",$J,KEY,MM,2)=VDATA
"RTN","EASEZPV2",130,0)
 ;get data in subfile #408.1275
"RTN","EASEZPV2",131,0)
 I FILE=408.12 S SUBF=408.1275 D
"RTN","EASEZPV2",132,0)
 . S FLD=0 F  S FLD=$O(^TMP("EZINDEX",$J,GRP,FILE,SUBF,FLD)) Q:FLD=""  D
"RTN","EASEZPV2",133,0)
 . . S SUBIEN=$$I1275^EASEZI(IEN)
"RTN","EASEZPV2",134,0)
 . . S MAP=FILE_U_SUBF_U_FLD,WHERE=IEN_";"_SUBIEN
"RTN","EASEZPV2",135,0)
 . . S VDATA=$$GET^EASEZC1(WHERE,MAP)
"RTN","EASEZPV2",136,0)
 . . Q:VDATA=-1  Q:VDATA=""
"RTN","EASEZPV2",137,0)
 . . ;store link in all 1010EZ elements associated with this file/subfile
"RTN","EASEZPV2",138,0)
 . . S KEY=0 F  S KEY=$O(^TMP("EZINDEX",$J,GRP,FILE,SUBF,FLD,KEY)) Q:'KEY  D
"RTN","EASEZPV2",139,0)
 . . . S ^TMP("EZDATA",$J,KEY,MM,2)=VDATA
"RTN","EASEZPV2",140,0)
 Q
"RTN","EASEZPVD")
0^8^B19564311
"RTN","EASEZPVD",1,0)
EASEZPVD ;ALB/AMA/CMF - GATHER VISTA DATA TO PRINT FROM DG OPTIONS
"RTN","EASEZPVD",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZPVD",3,0)
 ;
"RTN","EASEZPVD",4,0)
VISTA(EASDFN,EASMTIEN) ;GATHER VISTA DATA -- CALLED FROM EN^EASEZPDG
"RTN","EASEZPVD",5,0)
 ;   INPUT:
"RTN","EASEZPVD",6,0)
 ;      EASDFN - POINTER TO PATIENT FILE (#2)
"RTN","EASEZPVD",7,0)
 ;      EASMTIEN - MeansTestIEN (408.31)
"RTN","EASEZPVD",8,0)
 ;
"RTN","EASEZPVD",9,0)
 N X,KEY,VDATA,DISPOS,DGNT,ENROLL,RACE,ETHNC
"RTN","EASEZPVD",10,0)
 ;
"RTN","EASEZPVD",11,0)
 ;GET LAST ALIAS NAME
"RTN","EASEZPVD",12,0)
 S X=$O(^DPT(EASDFN,.01,""),-1)
"RTN","EASEZPVD",13,0)
 I +X D
"RTN","EASEZPVD",14,0)
 . S KEY=+$$KEY711^EASEZU1("APPLICANT OTHER NAME")
"RTN","EASEZPVD",15,0)
 . S VDATA=$$GET^EASEZC1(EASDFN_";"_+X,"2^2.01^.01")
"RTN","EASEZPVD",16,0)
 . Q:VDATA=-1  Q:VDATA=""
"RTN","EASEZPVD",17,0)
 . S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",18,0)
 ;
"RTN","EASEZPVD",19,0)
 ;GATHER MOST RECENT DISPOSITION DATA, IF IT EXISTS
"RTN","EASEZPVD",20,0)
 ;OTHERWISE, PRINT "UNKNOWN" FOR THE FOLLOWING FIELDS
"RTN","EASEZPVD",21,0)
 D I2101^EASEZI(EASDFN,.DISPOS)
"RTN","EASEZPVD",22,0)
 I $D(DISPOS)>1 D  I 1
"RTN","EASEZPVD",23,0)
 . ;GET TYPE OF BENEFIT
"RTN","EASEZPVD",24,0)
 . S VDATA=$$GET^EASEZC1(DISPOS(1),"2^2.101^2")
"RTN","EASEZPVD",25,0)
 . I (VDATA'=-1),(VDATA'="") D
"RTN","EASEZPVD",26,0)
 . . I (VDATA="HOSPITAL")!(VDATA="OUTPATIENT MEDICAL") S VDATA="HEALTH SERVICES"
"RTN","EASEZPVD",27,0)
 . . I VDATA["DENTAL" S VDATA="DENTAL"
"RTN","EASEZPVD",28,0)
 . . I VDATA["NURSING" S VDATA="NURSING HOME"
"RTN","EASEZPVD",29,0)
 . . S KEY=+$$KEY711^EASEZU1("TYPE OF BENEFIT-"_VDATA)
"RTN","EASEZPVD",30,0)
 . . S ^TMP("EZDATA",$J,KEY,1,2)="YES"
"RTN","EASEZPVD",31,0)
 . ;GET FACILITY APPLYING TO
"RTN","EASEZPVD",32,0)
 . S KEY=+$$KEY711^EASEZU1("FACILITY TO RECEIVE 1010EZ")
"RTN","EASEZPVD",33,0)
 . S VDATA=$$GET^EASEZC1(DISPOS(1),"2^2.101^3")
"RTN","EASEZPVD",34,0)
 . I (VDATA'=-1),(VDATA'="") S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",35,0)
 . ;
"RTN","EASEZPVD",36,0)
 . ;GET NEED RELATED TO JOB INJURY OR ACCIDENT
"RTN","EASEZPVD",37,0)
 . S KEY=+$$KEY711^EASEZU1("NEED RELATED TO JOB INJURY")
"RTN","EASEZPVD",38,0)
 . S VDATA=$$GET^EASEZC1(DISPOS(1),"2^2.101^20")
"RTN","EASEZPVD",39,0)
 . I (VDATA'=-1),(VDATA'="") S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",40,0)
 . S KEY=+$$KEY711^EASEZU1("NEED RELATED TO ACCIDENT")
"RTN","EASEZPVD",41,0)
 . S VDATA=$$GET^EASEZC1(DISPOS(1),"2^2.101^23")
"RTN","EASEZPVD",42,0)
 . I (VDATA'=-1),(VDATA'="") S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",43,0)
 E  D
"RTN","EASEZPVD",44,0)
 . ;IF NO DISPOSITION DATA, PRINT "UNKNOWN" FOR ABOVE FIELDS
"RTN","EASEZPVD",45,0)
 . S KEY=+$$KEY711^EASEZU1("TYPE OF BENEFIT-HEALTH SERVICES")
"RTN","EASEZPVD",46,0)
 . S ^TMP("EZDATA",$J,KEY,1,2)="UNKNOWN"
"RTN","EASEZPVD",47,0)
 . S KEY=+$$KEY711^EASEZU1("FACILITY TO RECEIVE 1010EZ")
"RTN","EASEZPVD",48,0)
 . S ^TMP("EZDATA",$J,KEY,1,2)="UNKNOWN"
"RTN","EASEZPVD",49,0)
 . S KEY=+$$KEY711^EASEZU1("NEED RELATED TO JOB INJURY")
"RTN","EASEZPVD",50,0)
 . S ^TMP("EZDATA",$J,KEY,1,2)="UNKNOWN"
"RTN","EASEZPVD",51,0)
 . S KEY=+$$KEY711^EASEZU1("NEED RELATED TO ACCIDENT")
"RTN","EASEZPVD",52,0)
 . S ^TMP("EZDATA",$J,KEY,1,2)="UNKNOWN"
"RTN","EASEZPVD",53,0)
 ;
"RTN","EASEZPVD",54,0)
 ;GET DATA FROM FILE #2
"RTN","EASEZPVD",55,0)
 S KEY=0 F  S KEY=$O(^TMP("EZDATA",$J,KEY)) Q:'KEY  D
"RTN","EASEZPVD",56,0)
 . S X=^TMP("EZDATA",$J,KEY)
"RTN","EASEZPVD",57,0)
 . I $P(X,U,1,2)="2^2" D
"RTN","EASEZPVD",58,0)
 . . S VDATA=$$GET^EASEZC1(EASDFN,X)
"RTN","EASEZPVD",59,0)
 . . Q:VDATA=-1  Q:VDATA=""
"RTN","EASEZPVD",60,0)
 . . I $P(X,U,3)=.09 S VDATA=$$SSNOUT^EASEZT1(VDATA)
"RTN","EASEZPVD",61,0)
 . . I $P(X,U,3)=.117 D
"RTN","EASEZPVD",62,0)
 . . . N ST,CNTY,CNAME
"RTN","EASEZPVD",63,0)
 . . . S ST=$$GET1^DIQ(2,EASDFN,.115,"I")
"RTN","EASEZPVD",64,0)
 . . . S CNTY=$$GET1^DIQ(2,EASDFN,.117,"I")
"RTN","EASEZPVD",65,0)
 . . . S CNAME=$$GET1^DIQ(5.01,CNTY_","_ST,.01)
"RTN","EASEZPVD",66,0)
 . . . S VDATA=CNAME_" ("_VDATA_")"
"RTN","EASEZPVD",67,0)
 . . I $P(X,U,3)=.3405 D
"RTN","EASEZPVD",68,0)
 . . . I VDATA="N" S VDATA="EMERGENCY CONTACT"
"RTN","EASEZPVD",69,0)
 . . . E  S VDATA="NEXT OF KIN"
"RTN","EASEZPVD",70,0)
 . . I $P(X,U,3)=.362 D
"RTN","EASEZPVD",71,0)
 . . . I VDATA'["IN LIEU OF" S VDATA="NO"
"RTN","EASEZPVD",72,0)
 . . . E  S VDATA="YES"
"RTN","EASEZPVD",73,0)
 . . I $P(X,U,3)=57.4 D
"RTN","EASEZPVD",74,0)
 . . . I +VDATA S VDATA="YES"
"RTN","EASEZPVD",75,0)
 . . . E  S VDATA="NO"
"RTN","EASEZPVD",76,0)
 . . S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",77,0)
 ;IF PURPLE HEART OR NOSE/THROAT RADIUM UNANSWERED, SET TO "UNKNOWN"
"RTN","EASEZPVD",78,0)
 S KEY=+$$KEY711^EASEZU1("PURPLE HEART")
"RTN","EASEZPVD",79,0)
 S VDATA=$G(^TMP("EZDATA",$J,KEY,1,2))
"RTN","EASEZPVD",80,0)
 I (VDATA=-1)!(VDATA="") S ^TMP("EZDATA",$J,KEY,1,2)="UNKNOWN"
"RTN","EASEZPVD",81,0)
 S KEY=+$$KEY711^EASEZU1("NOSE/THROAT RADIUM")
"RTN","EASEZPVD",82,0)
 S X=$$GETCUR^DGNTAPI(EASDFN,"DGNT")
"RTN","EASEZPVD",83,0)
 S VDATA=$E($G(DGNT("INTRP")))
"RTN","EASEZPVD",84,0)
 I (VDATA=-1)!(VDATA="") S VDATA="UNKNOWN"
"RTN","EASEZPVD",85,0)
 I (VDATA'=-1),(VDATA'="") S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",86,0)
 ;
"RTN","EASEZPVD",87,0)
 ;GET ENROLLMENT DATA
"RTN","EASEZPVD",88,0)
 D I2711^EASEZI(EASDFN,.ENROLL)
"RTN","EASEZPVD",89,0)
 I $D(ENROLL)>1 D
"RTN","EASEZPVD",90,0)
 . S VDATA="" D ENR^EASEZC1(ENROLL(1),.VDATA)
"RTN","EASEZPVD",91,0)
 . Q:VDATA=-1  Q:VDATA=""
"RTN","EASEZPVD",92,0)
 . S ^TMP("EZDATA",$J,C2711,1,2)=VDATA
"RTN","EASEZPVD",93,0)
 ;
"RTN","EASEZPVD",94,0)
 ;GET DATA FROM FILES 408.12, 408.13, 408.21, AND 408.22
"RTN","EASEZPVD",95,0)
 D V408^EASEZPV2(EASDFN,EASMTIEN)
"RTN","EASEZPVD",96,0)
 ;
"RTN","EASEZPVD",97,0)
 ;GET RACE DATA
"RTN","EASEZPVD",98,0)
 D I202^EASEZI(EASDFN,.RACE)
"RTN","EASEZPVD",99,0)
 I $D(RACE)>1 D
"RTN","EASEZPVD",100,0)
 . N SBIEN
"RTN","EASEZPVD",101,0)
 . S X=0 F  S X=$O(RACE(X)) Q:'X  D
"RTN","EASEZPVD",102,0)
 . . S SBIEN=$P(RACE(X),";",2)
"RTN","EASEZPVD",103,0)
 . . S VDATA=$$GET1^DIQ(2.02,SBIEN_","_EASDFN,.01)
"RTN","EASEZPVD",104,0)
 . . Q:VDATA=-1  Q:VDATA=""
"RTN","EASEZPVD",105,0)
 . . S KEY=+$$KEY711^EASEZU1("APPLICANT RACE - "_VDATA)
"RTN","EASEZPVD",106,0)
 . . S ^TMP("EZDATA",$J,KEY,1,2)="YES"
"RTN","EASEZPVD",107,0)
 ;
"RTN","EASEZPVD",108,0)
 ;GET ETHNICITY DATA
"RTN","EASEZPVD",109,0)
 D I206^EASEZI(EASDFN,.ETHNC)
"RTN","EASEZPVD",110,0)
 I $D(ETHNC)>1 D
"RTN","EASEZPVD",111,0)
 . N SBIEN
"RTN","EASEZPVD",112,0)
 . S X=0 F  S X=$O(ETHNC(X)) Q:'X  D
"RTN","EASEZPVD",113,0)
 . . S SBIEN=$P(ETHNC(X),";",2)
"RTN","EASEZPVD",114,0)
 . . S VDATA=$$GET1^DIQ(2.06,SBIEN_","_EASDFN,.01)
"RTN","EASEZPVD",115,0)
 . . Q:VDATA=-1  Q:VDATA=""
"RTN","EASEZPVD",116,0)
 . . Q:$E(VDATA,1,8)="DECLINED"
"RTN","EASEZPVD",117,0)
 . . I VDATA="HISPANIC OR LATINO" S VDATA="YES"
"RTN","EASEZPVD",118,0)
 . . I $E(VDATA,1,3)="NOT" S VDATA="NO"
"RTN","EASEZPVD",119,0)
 . . I $E(VDATA,1,3)="UNK" S VDATA="UNKNOWN"
"RTN","EASEZPVD",120,0)
 . . S KEY=+$$KEY711^EASEZU1("APPLICANT SPANISH, HISPANIC, OR LATIN")
"RTN","EASEZPVD",121,0)
 . . S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVD",122,0)
 ;
"RTN","EASEZPVD",123,0)
 ;GET INSURANCE DATA
"RTN","EASEZPVD",124,0)
 D INSUR^EASEZPVI(EASDFN)
"RTN","EASEZPVD",125,0)
 Q
"RTN","EASEZPVI")
0^10^B27047859
"RTN","EASEZPVI",1,0)
EASEZPVI ;ALB/AMA; GATHER VISTA INSURANCE DATA TO PRINT FROM DG OPTIONS ; 06 Jul 2005  1:45 PM
"RTN","EASEZPVI",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZPVI",3,0)
 ;
"RTN","EASEZPVI",4,0)
 Q
"RTN","EASEZPVI",5,0)
 ;
"RTN","EASEZPVI",6,0)
INSUR(EASDFN) ;GET INSURANCE DATA
"RTN","EASEZPVI",7,0)
 ;   INPUT:
"RTN","EASEZPVI",8,0)
 ;      EASDFN - POINTER TO THE PATIENT FILE
"RTN","EASEZPVI",9,0)
 ;
"RTN","EASEZPVI",10,0)
 ;IF THEY EXIST, FIND INSURANCE COMPANY NAME(S), ADDRESS,
"RTN","EASEZPVI",11,0)
 ;CITY, STATE, ZIP, PHONE, GROUP CODE(S), POLICY NUMBER(S),
"RTN","EASEZPVI",12,0)
 ;NAME(S) OF INSURED, MEDICARE PART A/B, AND EFFECTIVE DATE(S)
"RTN","EASEZPVI",13,0)
 ;
"RTN","EASEZPVI",14,0)
 N KEY,VDATA,MULTIPLE,INDA,IENS,INSUR,INSORT,FLD,TYPE,IEN,INPTR,NAME
"RTN","EASEZPVI",15,0)
 N STREET,CITY,STPTR,STATE,ZIP,PHONE,GRPCD,POLNO,INNAME,KEYNM,M,CAT
"RTN","EASEZPVI",16,0)
 S KEY=+$$KEY711^EASEZU1("APPLICANT HAS INSURANCE")
"RTN","EASEZPVI",17,0)
 S VDATA=$$GET^EASEZC1(EASDFN,"2^2^.3192")
"RTN","EASEZPVI",18,0)
 I (VDATA=-1)!(VDATA="") S ^TMP("EZDATA",$J,KEY,1,2)="UNKNOWN"
"RTN","EASEZPVI",19,0)
 I (VDATA'=-1),(VDATA'="") S ^TMP("EZDATA",$J,KEY,1,2)=VDATA
"RTN","EASEZPVI",20,0)
 Q:VDATA'="YES"
"RTN","EASEZPVI",21,0)
 ;
"RTN","EASEZPVI",22,0)
 S MULTIPLE=0
"RTN","EASEZPVI",23,0)
 S INDA=0 F  S INDA=$O(^DPT(EASDFN,.312,INDA)) Q:'INDA  D
"RTN","EASEZPVI",24,0)
 . D GETS^DIQ(2.312,INDA_","_EASDFN,"**","IE","INSUR")
"RTN","EASEZPVI",25,0)
 S IENS="" F  S IENS=$O(INSUR(2.312,IENS)) Q:IENS=""  D
"RTN","EASEZPVI",26,0)
 . S FLD=0 F  S FLD=$O(INSUR(2.312,IENS,FLD)) Q:'FLD  D
"RTN","EASEZPVI",27,0)
 . . F TYPE="E","I" S INSORT(2.312,+IENS,FLD,TYPE)=$G(INSUR(2.312,IENS,FLD,TYPE))
"RTN","EASEZPVI",28,0)
 K INSUR
"RTN","EASEZPVI",29,0)
 S IEN=0 F  S IEN=$O(INSORT(2.312,IEN)) Q:'IEN  D
"RTN","EASEZPVI",30,0)
 . Q:'$G(INSORT(2.312,IEN,.18,"I"))
"RTN","EASEZPVI",31,0)
 . S INPTR=INSORT(2.312,IEN,.18,"I")
"RTN","EASEZPVI",32,0)
 . Q:$$GET1^DIQ(355.3,INPTR,.11,"I")   ;INACTIVE FLAG
"RTN","EASEZPVI",33,0)
 . I DT'>$G(INSORT(2.312,IEN,3,"I")) Q   ;INSUR EXPIRATION DATE
"RTN","EASEZPVI",34,0)
 . S NAME=$G(INSORT(2.312,IEN,.18,"E"))
"RTN","EASEZPVI",35,0)
 . S STREET=$$GET1^DIQ(36,INPTR,.111),CITY=$$GET1^DIQ(36,INPTR,.114)
"RTN","EASEZPVI",36,0)
 . S STPTR=$$GET1^DIQ(36,INPTR,.115,"I"),STATE=$$GET1^DIQ(5,STPTR,1)
"RTN","EASEZPVI",37,0)
 . S ZIP=$$GET1^DIQ(36,INPTR,.116),PHONE=$$GET1^DIQ(36,INPTR,.131)
"RTN","EASEZPVI",38,0)
 . S GRPCD=$$GET1^DIQ(355.3,INPTR,.04),POLNO=$G(INSORT(2.312,IEN,1,"E"))
"RTN","EASEZPVI",39,0)
 . S INNAME=$G(INSORT(2.312,IEN,17,"E"))
"RTN","EASEZPVI",40,0)
 . S MULTIPLE=MULTIPLE+1
"RTN","EASEZPVI",41,0)
 . I MULTIPLE=1 S KEYNM="APPLICANT",M=1
"RTN","EASEZPVI",42,0)
 . E  S KEYNM="OTHER(N)",M=MULTIPLE-1
"RTN","EASEZPVI",43,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE COMPANY")
"RTN","EASEZPVI",44,0)
 . I NAME]"" S ^TMP("EZDATA",$J,KEY,M,2)=NAME
"RTN","EASEZPVI",45,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE ADDRESS")
"RTN","EASEZPVI",46,0)
 . I STREET]"" S ^TMP("EZDATA",$J,KEY,M,2)=STREET
"RTN","EASEZPVI",47,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE CITY")
"RTN","EASEZPVI",48,0)
 . I CITY]"" S ^TMP("EZDATA",$J,KEY,M,2)=CITY
"RTN","EASEZPVI",49,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE STATE")
"RTN","EASEZPVI",50,0)
 . I STATE]"" S ^TMP("EZDATA",$J,KEY,M,2)=STATE
"RTN","EASEZPVI",51,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE ZIP")
"RTN","EASEZPVI",52,0)
 . I ZIP]"" S ^TMP("EZDATA",$J,KEY,M,2)=ZIP
"RTN","EASEZPVI",53,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE PHONE")
"RTN","EASEZPVI",54,0)
 . I PHONE]"" S ^TMP("EZDATA",$J,KEY,M,2)=PHONE
"RTN","EASEZPVI",55,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE GROUP CODE")
"RTN","EASEZPVI",56,0)
 . I GRPCD]"" S ^TMP("EZDATA",$J,KEY,M,2)=GRPCD
"RTN","EASEZPVI",57,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE POLICY HOLDER")
"RTN","EASEZPVI",58,0)
 . I INNAME]"" S ^TMP("EZDATA",$J,KEY,M,2)=INNAME
"RTN","EASEZPVI",59,0)
 . S KEY=+$$KEY711^EASEZU1(KEYNM_" INSURANCE POLICY NUMBER")
"RTN","EASEZPVI",60,0)
 . I POLNO]"" S ^TMP("EZDATA",$J,KEY,M,2)=POLNO
"RTN","EASEZPVI",61,0)
 . ;
"RTN","EASEZPVI",62,0)
 . I $$GET^EASEZC1(INPTR,"355.3^355.3^.09")="MEDICARE (M)" D
"RTN","EASEZPVI",63,0)
 . . S CAT=$$GET^EASEZC1(INPTR,"355.3^355.3^.14")
"RTN","EASEZPVI",64,0)
 . . I (CAT'="MEDICARE PART A"),(CAT'="MEDICARE PART B") Q
"RTN","EASEZPVI",65,0)
 . . S KEY=+$$KEY711^EASEZU1(CAT)
"RTN","EASEZPVI",66,0)
 . . S ^TMP("EZDATA",$J,KEY,M,2)="YES"
"RTN","EASEZPVI",67,0)
 . . S VDATA=$$GET^EASEZC1(EASDFN_";"_INDA,"2^2.312^8")
"RTN","EASEZPVI",68,0)
 . . Q:VDATA=""  Q:VDATA=-1
"RTN","EASEZPVI",69,0)
 . . S KEY=+$$KEY711^EASEZU1(CAT_" EFFECTIVE DATE")
"RTN","EASEZPVI",70,0)
 . . S ^TMP("EZDATA",$J,KEY,M,2)=VDATA
"RTN","EASEZPVI",71,0)
 ;
"RTN","EASEZPVI",72,0)
 Q
"RTN","EASEZPVI",73,0)
 ;
"RTN","EASEZPVI",74,0)
I408(EASDFN,MTDT,EASARRAY) ;retrieve ien(s) to files #408.12,#408.13,#408.21,#408.22
"RTN","EASEZPVI",75,0)
 ;   Modified from I408^EASEZI, called from V408^EASEZPV2
"RTN","EASEZPVI",76,0)
 ;input EASDFN    = ien to #2
"RTN","EASEZPVI",77,0)
 ;        MTDT    = Means Test date
"RTN","EASEZPVI",78,0)
 ;output EASARRAY = ien(s) to files; passed by reference
"RTN","EASEZPVI",79,0)
 ;   array(408,"V",1) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;veteran data
"RTN","EASEZPVI",80,0)
 ;   array(408,"S",1) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;spouse data
"RTN","EASEZPVI",81,0)
 ;   array(408,"C",multiple) = ien_#408.12^ien_#408.13^ien_#408.21^ien#408.22 ;child data
"RTN","EASEZPVI",82,0)
 ;where ien_#408.13 = ien;global_root
"RTN","EASEZPVI",83,0)
 ;
"RTN","EASEZPVI",84,0)
 N Y,%F,X,%DT,MTDATE
"RTN","EASEZPVI",85,0)
 N SUB1,SUB2,INCYR,DGINC,DGREL,DGINR
"RTN","EASEZPVI",86,0)
 N I21,I22
"RTN","EASEZPVI",87,0)
 ;
"RTN","EASEZPVI",88,0)
 Q:'EASDFN
"RTN","EASEZPVI",89,0)
 S Y=MTDT,%F=5,X=$$FMTE^XLFDT(Y,%F),X=+$P(X,"/",3)-1,%DT="P"
"RTN","EASEZPVI",90,0)
 D ^%DT S MTDATE=Y
"RTN","EASEZPVI",91,0)
 ;retrieve all associated 408 records; refer to api call for docu
"RTN","EASEZPVI",92,0)
 I MTDT D ALL^DGMTU21(EASDFN,"VSC",MTDT)
"RTN","EASEZPVI",93,0)
 ;massage "V" and "S" nodes for clear use in for loop below
"RTN","EASEZPVI",94,0)
 S:$D(DGINC("V")) DGINC("V",1)=DGINC("V")
"RTN","EASEZPVI",95,0)
 S:$D(DGINR("V")) DGINR("V",1)=DGINR("V")
"RTN","EASEZPVI",96,0)
 S:$D(DGREL("V")) DGREL("V",1)=DGREL("V")
"RTN","EASEZPVI",97,0)
 S:$D(DGINC("S")) DGINC("S",1)=DGINC("S")
"RTN","EASEZPVI",98,0)
 S:$D(DGINR("S")) DGINR("S",1)=DGINR("S")
"RTN","EASEZPVI",99,0)
 S:$D(DGREL("S")) DGREL("S",1)=DGREL("S")
"RTN","EASEZPVI",100,0)
 ;
"RTN","EASEZPVI",101,0)
 F SUB1="V","S","C" D
"RTN","EASEZPVI",102,0)
 . Q:'$D(DGREL(SUB1))
"RTN","EASEZPVI",103,0)
 . S SUB2=0
"RTN","EASEZPVI",104,0)
 . F  S SUB2=$O(DGREL(SUB1,SUB2)) Q:'SUB2  D
"RTN","EASEZPVI",105,0)
 . . S EASARRAY(408,SUB1,SUB2)=DGREL(SUB1,SUB2)
"RTN","EASEZPVI",106,0)
 . . S I21=$G(DGINC(SUB1,SUB2))  ; 408.21 ien
"RTN","EASEZPVI",107,0)
 . . Q:'I21
"RTN","EASEZPVI",108,0)
 . . S INCYR=$$GET1^DIQ(408.21,I21_",",.01,"I")
"RTN","EASEZPVI",109,0)
 . . ;NOTE: The following two quit conditions are probably not
"RTN","EASEZPVI",110,0)
 . . ;      not necessary given the arrays being returned from
"RTN","EASEZPVI",111,0)
 . . ;      ALL^DGMTU21
"RTN","EASEZPVI",112,0)
 . . Q:'MTDT
"RTN","EASEZPVI",113,0)
 . . Q:(INCYR<MTDATE)
"RTN","EASEZPVI",114,0)
 . . S I22=$G(DGINR(SUB1,SUB2))  ;408.22 ien
"RTN","EASEZPVI",115,0)
 . . Q:$G(^DGMT(408.22,+I22,"MT"))=""
"RTN","EASEZPVI",116,0)
 . . ;
"RTN","EASEZPVI",117,0)
 . . ;NOTE: The following line of code is designed to throw away all
"RTN","EASEZPVI",118,0)
 . . ;      income/net worth figures when the dependent childs income
"RTN","EASEZPVI",119,0)
 . . ;      is NOT available to the patient.   In the next release,
"RTN","EASEZPVI",120,0)
 . . ;      this will need to be changed to set EASARRAY with I21 and
"RTN","EASEZPVI",121,0)
 . . ;      I22 for all children and then screen the reporting of Child
"RTN","EASEZPVI",122,0)
 . . ;      income (not available to patient) in the report output code.
"RTN","EASEZPVI",123,0)
 . . ;      ASSUMING THAT THE NET WORTH IS COLLECTED WHEN IT IS NOT
"RTN","EASEZPVI",124,0)
 . . ;      AVAILABLE TO THE PATIENT.  IF THAT IS NOT TRUE, LEAVE CODE.
"RTN","EASEZPVI",125,0)
 . . ;
"RTN","EASEZPVI",126,0)
 . . I SUB1="C" Q:(+$P($G(^DGMT(408.22,+I22,0)),"^",12))'=1
"RTN","EASEZPVI",127,0)
 . . S EASARRAY(408,SUB1,SUB2)=EASARRAY(408,SUB1,SUB2)_U_I21_U_I22
"RTN","EASEZPVI",128,0)
 Q
"RTN","EASEZPVI",129,0)
 ;
"RTN","EASEZPVU")
0^32^B5763873
"RTN","EASEZPVU",1,0)
EASEZPVU ;ALB/GTS/CMF - MT PICKER FOR EZ/EZR PRINT
"RTN","EASEZPVU",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZPVU",3,0)
 ;
"RTN","EASEZPVU",4,0)
 Q
"RTN","EASEZPVU",5,0)
PICK(EASDFN,EASMTIEN) ;validate or pick mtien for printing
"RTN","EASEZPVU",6,0)
 ; Input: EASDFN - POINTER TO PATIENT FILE (#2) - required
"RTN","EASEZPVU",7,0)
 ;        EASMTIEN - POINTER TO MEANS TEST FILE (#408.31 - optional
"RTN","EASEZPVU",8,0)
 ; Output: RESULT - valid mt pointer, or null
"RTN","EASEZPVU",9,0)
 N RESULT,MTIEN,DIC,D,X,Y,DTOUT,DUOUT,EASSORT
"RTN","EASEZPVU",10,0)
 S RESULT=""
"RTN","EASEZPVU",11,0)
 ; if means test ien, then return it
"RTN","EASEZPVU",12,0)
 S MTIEN=$G(EASMTIEN)
"RTN","EASEZPVU",13,0)
 S MTIEN=$S($D(^DGMT(408.31,+MTIEN)):+MTIEN,MTIEN=0:0,MTIEN=-1:-1,1:"")
"RTN","EASEZPVU",14,0)
 I (+MTIEN>0)!(MTIEN=-1) Q MTIEN
"RTN","EASEZPVU",15,0)
 ;
"RTN","EASEZPVU",16,0)
 ; if no means test ien, then ask user for one
"RTN","EASEZPVU",17,0)
 D GETMTDAT(EASDFN)
"RTN","EASEZPVU",18,0)
 I $D(EASSORT) D
"RTN","EASEZPVU",19,0)
 .;display sort array here!
"RTN","EASEZPVU",20,0)
 .D DISPLAY
"RTN","EASEZPVU",21,0)
 .;lookup filtered by sort array
"RTN","EASEZPVU",22,0)
 .S DIC=408.31
"RTN","EASEZPVU",23,0)
 .S DIC(0)="AEMQ"
"RTN","EASEZPVU",24,0)
 .S DIC("A")="Select DATE OF TEST:"
"RTN","EASEZPVU",25,0)
 .S DIC("S")="I $D(EASSORT($P(^(0),U),Y))"
"RTN","EASEZPVU",26,0)
 .S D="ADFN"_EASDFN_"^B"
"RTN","EASEZPVU",27,0)
 .D MIX^DIC1
"RTN","EASEZPVU",28,0)
 .S RESULT=+Y
"RTN","EASEZPVU",29,0)
 Q RESULT
"RTN","EASEZPVU",30,0)
 ;
"RTN","EASEZPVU",31,0)
GETMTDAT(EASDFN) ;sort primary tests for printing selection
"RTN","EASEZPVU",32,0)
 ;
"RTN","EASEZPVU",33,0)
 ; Input:  EASDFN - Patient file IEN (DFN)
"RTN","EASEZPVU",34,0)
 ; Output: EASSORT - Array of Means Tests in the following format:
"RTN","EASEZPVU",35,0)
 ;  EASSORT(DATE,MTIEN)=MT IEN^Date of Test^Status Name^Status Code^Source
"RTN","EASEZPVU",36,0)
 ;
"RTN","EASEZPVU",37,0)
 ;check for futures
"RTN","EASEZPVU",38,0)
 ;  means test
"RTN","EASEZPVU",39,0)
 D SORT($$FUT^DGMTU(EASDFN,,1),"NO")
"RTN","EASEZPVU",40,0)
 ;  copay test
"RTN","EASEZPVU",41,0)
 D SORT($$FUT^DGMTU(EASDFN,,2),"NO")
"RTN","EASEZPVU",42,0)
 ;  ltc copay exemption test
"RTN","EASEZPVU",43,0)
 D SORT($$FUT^DGMTU(EASDFN,,4),"NO")
"RTN","EASEZPVU",44,0)
 ;look for current
"RTN","EASEZPVU",45,0)
 ;  means test
"RTN","EASEZPVU",46,0)
 D SORT($$LST^DGMTU(EASDFN,,1),"YES")
"RTN","EASEZPVU",47,0)
 ;  copay test
"RTN","EASEZPVU",48,0)
 D SORT($$LST^DGMTU(EASDFN,,2),"YES")
"RTN","EASEZPVU",49,0)
 ;  ltc copay exemption test
"RTN","EASEZPVU",50,0)
 D SORT($$LST^DGMTU(EASDFN,,4),"YES")
"RTN","EASEZPVU",51,0)
 Q
"RTN","EASEZPVU",52,0)
 ;
"RTN","EASEZPVU",53,0)
SORT(RETURN,PRIMARY) ;sort mt status string
"RTN","EASEZPVU",54,0)
 N DATE,MTIEN
"RTN","EASEZPVU",55,0)
 I +RETURN=0 Q
"RTN","EASEZPVU",56,0)
 S DATE=$P(RETURN,U,2)
"RTN","EASEZPVU",57,0)
 S MTIEN=$P(RETURN,U,1)
"RTN","EASEZPVU",58,0)
 S:$$GET1^DIQ(408.31,MTIEN_",",2)=PRIMARY EASSORT(DATE,MTIEN)=RETURN
"RTN","EASEZPVU",59,0)
 Q
"RTN","EASEZPVU",60,0)
 ;
"RTN","EASEZPVU",61,0)
DISPLAY ; eassort array
"RTN","EASEZPVU",62,0)
 N MTDT,MTIEN,MTIENS
"RTN","EASEZPVU",63,0)
 W !?3,"Choose from:"
"RTN","EASEZPVU",64,0)
 S MTDT=""
"RTN","EASEZPVU",65,0)
 F  S MTDT=$O(EASSORT(MTDT)) Q:MTDT=""  D
"RTN","EASEZPVU",66,0)
 .S MTIEN=""
"RTN","EASEZPVU",67,0)
 .F  S MTIEN=$O(EASSORT(MTDT,MTIEN)) Q:MTIEN=""  D
"RTN","EASEZPVU",68,0)
 ..S MTIENS=MTIEN_","
"RTN","EASEZPVU",69,0)
 ..W !?3,MTDT_"   "
"RTN","EASEZPVU",70,0)
 ..W $$GET1^DIQ(408.31,MTIENS,.01)_"   "  ;test date
"RTN","EASEZPVU",71,0)
 ..W $$GET1^DIQ(408.31,MTIENS,.019)_"   " ;type of test
"RTN","EASEZPVU",72,0)
 ..W $$GET1^DIQ(408.31,MTIENS,.03)_"   "  ;status
"RTN","EASEZPVU",73,0)
 ..W $$GET1^DIQ(408.31,MTIENS,.23)_"   "  ;source of test
"RTN","EASEZPVU",74,0)
 ..W $S($$GET1^DIQ(408.31,MTIENS,2)="YES":"PRIMARY",1:"NOT PRIMARY")
"RTN","EASEZPVU",75,0)
 ..Q
"RTN","EASEZPVU",76,0)
 .Q
"RTN","EASEZPVU",77,0)
 Q
"RTN","EASEZPVU",78,0)
 ;
"RTN","EASEZRP1")
0^14^B32905037
"RTN","EASEZRP1",1,0)
EASEZRP1 ;ALB/AMA - Print 1010EZR
"RTN","EASEZRP1",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZRP1",3,0)
 ;
"RTN","EASEZRP1",4,0)
EN(EALNE,EAINFO) ;Entry point for VA 10-10EZR, page 1
"RTN","EASEZRP1",5,0)
 ; Called from EN^EASEZRPF
"RTN","EASEZRP1",6,0)
 N EASD,X
"RTN","EASEZRP1",7,0)
 ;
"RTN","EASEZRP1",8,0)
 S EASD=$NA(^TMP("EASEZR",$J,1))
"RTN","EASEZRP1",9,0)
 D HDRMAIN^EASEZRPF(.EALNE)
"RTN","EASEZRP1",10,0)
 D DEM
"RTN","EASEZRP1",11,0)
 D II
"RTN","EASEZRP1",12,0)
 D EI
"RTN","EASEZRP1",13,0)
 ;
"RTN","EASEZRP1",14,0)
 D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRP1",15,0)
 S EAINFO("VET")=@EASD@(2),EAINFO("SSN")=@EASD@(5)
"RTN","EASEZRP1",16,0)
 Q
"RTN","EASEZRP1",17,0)
 ;
"RTN","EASEZRP1",18,0)
DEM ; Print VA 10-10EZR Section I, Demographic information
"RTN","EASEZRP1",19,0)
 ;
"RTN","EASEZRP1",20,0)
 W !?50,"SECTION I - GENERAL INFORMATION"
"RTN","EASEZRP1",21,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",22,0)
 W !?18,"Federal law provides criminal penalties, including a fine and/or imprisonment for up to 5 years,"
"RTN","EASEZRP1",23,0)
 W !?20,"for concealing a material fact or making a materially false statement.  (See 18 U.S.C. 1001)"
"RTN","EASEZRP1",24,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",25,0)
 ;
"RTN","EASEZRP1",26,0)
 W !,"1. VETERAN'S NAME (Last, First, Middle Name)",?66,"|2. OTHER NAMES USED"
"RTN","EASEZRP1",27,0)
 W !?3,@EASD@(2),?66,"|   ",@EASD@(3)
"RTN","EASEZRP1",28,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",29,0)
 ;
"RTN","EASEZRP1",30,0)
 W !,"3. GENDER",?20,"|4. SOCIAL SECURITY NUMBER",?55,"|5. DATE OF BIRTH (mm/dd/yyyy)",?95,"|6. CURRENT MARITAL STATUS"
"RTN","EASEZRP1",31,0)
 W !?3,@EASD@(4),?20,"|   ",@EASD@(5),?55,"|   ",@EASD@(7),?95,"|   ",@EASD@(12)
"RTN","EASEZRP1",32,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",33,0)
 ;
"RTN","EASEZRP1",34,0)
 W !,"7. PERMANENT ADDRESS (Street)",?42,"|7A. CITY",?66,"|7B. STATE",?105,"|7C. ZIP"
"RTN","EASEZRP1",35,0)
 W !?3,@EASD@("9A"),?42,"|    ",@EASD@("9B"),?66,"|    ",@EASD@("9C"),?105,"|    ",@EASD@("9D")
"RTN","EASEZRP1",36,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",37,0)
 ;
"RTN","EASEZRP1",38,0)
 W !,"7D. COUNTY",?34,"|7E. HOME TELEPHONE NUMBER (Include area code)",?82,"|7F. E-MAIL ADDRESS"
"RTN","EASEZRP1",39,0)
 W !?4,@EASD@("9E"),?34,"|    ",@EASD@(10),?82,"|    ",@EASD@("11A")
"RTN","EASEZRP1",40,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",41,0)
 ;
"RTN","EASEZRP1",42,0)
 W !,"7G. CELLULAR TELEPHONE NUMBER (Include area code)",?66,"|7H. PAGER NUMBER (Include area code)"
"RTN","EASEZRP1",43,0)
 W !?4,@EASD@("11G"),?66,"|    ",@EASD@("11H")
"RTN","EASEZRP1",44,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",45,0)
 ;
"RTN","EASEZRP1",46,0)
 W !,"8. NAME, ADDRESS AND RELATIONSHIP OF NEXT OF KIN",?83,"|8A. NEXT OF KIN'S HOME TELEPHONE NUMBER"
"RTN","EASEZRP1",47,0)
 W !?3,$P(@EASD@("19A"),U)," - ",$P(@EASD@("19A"),U,4),?83,"|    (Include area code)   ",@EASD@("19B")
"RTN","EASEZRP1",48,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! F X=1:1:84 W " "
"RTN","EASEZRP1",49,0)
 W $E(EALNE("UL"),1,48)
"RTN","EASEZRP1",50,0)
 W !?3,$P(@EASD@("19A"),U,2),?83,"|8B. NEXT OF KIN'S WORK TELEPHONE NUMBER"
"RTN","EASEZRP1",51,0)
 W !?3,$P(@EASD@("19A"),U,3),?83,"|    (Include area code)   ",@EASD@("19C")
"RTN","EASEZRP1",52,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",53,0)
 ;
"RTN","EASEZRP1",54,0)
 W !,"9. NAME, ADDRESS AND RELATIONSHIP OF EMERGENCY CONTACT",?83,"|9A. EMERGENCY CONTACT'S HOME TELEPHONE NUMBER"
"RTN","EASEZRP1",55,0)
 W !?3,$P(@EASD@("20A"),U)," - ",$P(@EASD@("20A"),U,4),?83,"|    (Include area code)   ",@EASD@("20B")
"RTN","EASEZRP1",56,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! F X=1:1:84 W " "
"RTN","EASEZRP1",57,0)
 W $E(EALNE("UL"),1,48)
"RTN","EASEZRP1",58,0)
 W !?3,$P(@EASD@("20A"),U,2),?83,"|9B. EMERGENCY CONTACT'S WORK TELEPHONE NUMBER"
"RTN","EASEZRP1",59,0)
 W !?3,$P(@EASD@("20A"),U,3),?83,"|    (Include area code)   ",@EASD@("20C")
"RTN","EASEZRP1",60,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",61,0)
 ;
"RTN","EASEZRP1",62,0)
 W !,"10. INDIVIDUAL TO RECEIVE POSSESSION OF YOUR PERSONAL PROPERTY LEFT ON PREMISES UNDER VA CONTROL AFTER YOUR DEPARTURE OR AT THE"
"RTN","EASEZRP1",63,0)
 W !?4,"TIME OF DEATH.  Note: This does not constitute a will or transfer of title.   ",@EASD@(21)
"RTN","EASEZRP1",64,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",65,0)
 Q
"RTN","EASEZRP1",66,0)
 ;
"RTN","EASEZRP1",67,0)
II ; Print VA 10-10EZR SECTION II - INSURANCE INFORMATION
"RTN","EASEZRP1",68,0)
 ;
"RTN","EASEZRP1",69,0)
 W !?23,"SECTION II - INSURANCE INFORMATION  (Use a separate sheet for additional information)"
"RTN","EASEZRP1",70,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",71,0)
 ;
"RTN","EASEZRP1",72,0)
 W !,"1. ARE YOU COVERED BY HEALTH INSURANCE,",?49,"|2. HEALTH INSURANCE COMPANY NAME, ADDRESS AND TELEPHONE NUMBER"
"RTN","EASEZRP1",73,0)
 W !?3,"INCLUDING COVERAGE THROUGH A SPOUSE",?49,"|   ",@EASD@("17A")
"RTN","EASEZRP1",74,0)
 W !?3,"OR ANOTHER PERSON?   ",@EASD@(17),?49,"|   "
"RTN","EASEZRP1",75,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W $E(EALNE("UL"),1,49)
"RTN","EASEZRP1",76,0)
 ;
"RTN","EASEZRP1",77,0)
 W !,"3. NAME OF POLICY HOLDER",?49,"|   ",$P(@EASD@("17E"),U,2)
"RTN","EASEZRP1",78,0)
 W !?3,@EASD@("17B"),?49,"|   ",@EASD@("17I")
"RTN","EASEZRP1",79,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",80,0)
 ;
"RTN","EASEZRP1",81,0)
 W !,"4. POLICY NUMBER",?41,"|5. GROUP CODE",?70,"|6. ARE YOU ELIGIBLE FOR MEDICAID?"
"RTN","EASEZRP1",82,0)
 W !?3,@EASD@("17C"),?41,"|   ",@EASD@("17D"),?70,"|   ",@EASD@("14J")
"RTN","EASEZRP1",83,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",84,0)
 ;
"RTN","EASEZRP1",85,0)
 W !,"7. ARE YOU ENROLLED IN MEDICARE HOSPITAL INSURANCE PART A?",?70,"|7A. EFFECTIVE DATE (mm/dd/yyyy)"
"RTN","EASEZRP1",86,0)
 W !?3,@EASD@("14K"),?70,"|    ",@EASD@("14K1")
"RTN","EASEZRP1",87,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",88,0)
 ;
"RTN","EASEZRP1",89,0)
 W !,"8. ARE YOU ENROLLED IN MEDICARE HOSPITAL INSURANCE PART B?",?70,"|8A. EFFECTIVE DATE (mm/dd/yyyy)"
"RTN","EASEZRP1",90,0)
 W !?3,@EASD@("14L"),?70,"|    ",@EASD@("14L1")
"RTN","EASEZRP1",91,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",92,0)
 ;
"RTN","EASEZRP1",93,0)
 W !,"9. NAME EXACTLY AS IT APPEARS ON YOUR MEDICARE CARD",?70,"|10. MEDICARE CLAIM NUMBER"
"RTN","EASEZRP1",94,0)
 W !?3,@EASD@("14N"),?70,"|    ",@EASD@("14M")
"RTN","EASEZRP1",95,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",96,0)
 Q
"RTN","EASEZRP1",97,0)
 ;
"RTN","EASEZRP1",98,0)
EI ; Print VA 10-10EZR SECTION III - EMPLOYMENT INFORMATION
"RTN","EASEZRP1",99,0)
 ;
"RTN","EASEZRP1",100,0)
 W !?48,"SECTION III - EMPLOYMENT INFORMATION"
"RTN","EASEZRP1",101,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",102,0)
 ;
"RTN","EASEZRP1",103,0)
 W !,"1. VETERAN'S EMPLOYMENT STATUS",?47,"|1A. COMPANY NAME, ADDRESS AND TELEPHONE NUMBER"
"RTN","EASEZRP1",104,0)
 W !?3,$P(@EASD@("15A"),U),?47,"|    ",$P(@EASD@("15B"),U)
"RTN","EASEZRP1",105,0)
 W !,"Date of retirement (mm/dd/yyyy)   ",$P(@EASD@("15A"),U,2),?47,"|    ",$P(@EASD@("15B"),U,2)
"RTN","EASEZRP1",106,0)
 W !,"If employed or retired, complete item 1A",?47,"|    ",$P(@EASD@("15B"),U,3)
"RTN","EASEZRP1",107,0)
 W !?47,"    ",$P(@EASD@("15B"),U,4)
"RTN","EASEZRP1",108,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",109,0)
 ;
"RTN","EASEZRP1",110,0)
 W !,"2. SPOUSE'S EMPLOYMENT STATUS",?47,"|2A. COMPANY NAME, ADDRESS AND TELEPHONE NUMBER"
"RTN","EASEZRP1",111,0)
 W !?3,$P(@EASD@("16A"),U),?47,"|    ",$P(@EASD@("16B"),U)
"RTN","EASEZRP1",112,0)
 W !,"Date of retirement (mm/dd/yyyy)   ",$P(@EASD@("16A"),U,2),?47,"|    ",$P(@EASD@("16B"),U,2)
"RTN","EASEZRP1",113,0)
 W !,"If employed or retired, complete item 2A",?47,"|    ",$P(@EASD@("16B"),U,3)
"RTN","EASEZRP1",114,0)
 W !?47,"|    ",$P(@EASD@("16B"),U,4)
"RTN","EASEZRP1",115,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP1",116,0)
 Q
"RTN","EASEZRP2")
0^15^B74192279
"RTN","EASEZRP2",1,0)
EASEZRP2 ;ALB/AMA - Print 1010EZR, Cont., Page 2
"RTN","EASEZRP2",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZRP2",3,0)
 ;
"RTN","EASEZRP2",4,0)
 Q
"RTN","EASEZRP2",5,0)
 ;
"RTN","EASEZRP2",6,0)
EN(EALNE,EAINFO,EASDG) ; Entry point, called from EN^EASEZRPF
"RTN","EASEZRP2",7,0)
 ;  Input
"RTN","EASEZRP2",8,0)
 ;     EALNE  - Array of line formats for output
"RTN","EASEZRP2",9,0)
 ;     EAINFO - Application Data array, see SETUP^EASEZRPF
"RTN","EASEZRP2",10,0)
 ;     EASDG  - Flag variable to signify request to print from DG options
"RTN","EASEZRP2",11,0)
 ;
"RTN","EASEZRP2",12,0)
 N EASD
"RTN","EASEZRP2",13,0)
 ;
"RTN","EASEZRP2",14,0)
 D HDR^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRP2",15,0)
 S EASD=$NA(^TMP("EASEZR",$J,2))
"RTN","EASEZRP2",16,0)
 D PAP
"RTN","EASEZRP2",17,0)
 D FD
"RTN","EASEZRP2",18,0)
 D DEP
"RTN","EASEZRP2",19,0)
 D INC
"RTN","EASEZRP2",20,0)
 D EXP
"RTN","EASEZRP2",21,0)
 ;
"RTN","EASEZRP2",22,0)
 D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRP2",23,0)
 Q
"RTN","EASEZRP2",24,0)
 ;
"RTN","EASEZRP2",25,0)
PAP ;  Print SECTION IV - PAPERWORK REDUCTION ACT AND PRIVACY ACT INFORMATION
"RTN","EASEZRP2",26,0)
 ;
"RTN","EASEZRP2",27,0)
 W !?34,"SECTION IV - PAPERWORK REDUCTION ACT AND PRIVACY ACT INFORMATION"
"RTN","EASEZRP2",28,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",29,0)
 ;
"RTN","EASEZRP2",30,0)
 W !?5,"The Paperwork Reduction Act of 1995 requires us to notify you that this information collection is in accordance with the"
"RTN","EASEZRP2",31,0)
 W !,"clearance requirements of Section 3507 of the Paperwork Reduction Act of 1995.  We may not conduct or sponsor, and you are not"
"RTN","EASEZRP2",32,0)
 W !,"required to respond to, a collection of information unless it displays a valid OMB number.  We anticipate that the time expended by"
"RTN","EASEZRP2",33,0)
 W !,"all individuals who must complete this form will average 24 minutes.  This includes the time it will take to read instructions,"
"RTN","EASEZRP2",34,0)
 W !,"gather the necessary facts and fill out the form."
"RTN","EASEZRP2",35,0)
 W !?5,"Privacy Act Information:  VA is asking you to provide the information on this form under 38 U.S.C. Sections 1710, 1712, and"
"RTN","EASEZRP2",36,0)
 W !,"1722 in order for VA to determine your eligibility for medical benefits.  Information you supply may be verified through a"
"RTN","EASEZRP2",37,0)
 W !,"computer-matching program.  VA may disclose the information that you put on the form as permitted by law.  VA may make a ""routine"
"RTN","EASEZRP2",38,0)
 W !,"use"" disclosure of the information as outlined in the Privacy Act systems of records notices and in accordance with the VHA Notice"
"RTN","EASEZRP2",39,0)
 W !,"of Privacy Practices.  You do not have to provide the information to VA, but if you don't, VA may be unable to process your request"
"RTN","EASEZRP2",40,0)
 W !,"and serve your medical needs.  Failure to furnish the information will not have any affect on any other benefits to which you may"
"RTN","EASEZRP2",41,0)
 W !,"be entitled.  If you provide VA your Social Security Number, VA will use it to administer your VA benefits.  VA may also use this"
"RTN","EASEZRP2",42,0)
 W !,"information to identify veterans and persons claiming or receiving VA benefits and their records, and for other purposes"
"RTN","EASEZRP2",43,0)
 W !,"authorized or required by law."
"RTN","EASEZRP2",44,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",45,0)
 Q
"RTN","EASEZRP2",46,0)
 ;
"RTN","EASEZRP2",47,0)
FD ; Print VA 10-10EZR SECTION V - FINANCIAL DISCLOSURE
"RTN","EASEZRP2",48,0)
 ;
"RTN","EASEZRP2",49,0)
 W !?49,"SECTION V - FINANCIAL DISCLOSURE"
"RTN","EASEZRP2",50,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",51,0)
 ;
"RTN","EASEZRP2",52,0)
 W !?5,"Failure to disclose your previous year's financial information may affect your eligibility for health care benefits.  Your"
"RTN","EASEZRP2",53,0)
 W !,"financial information is used by VA to accurately determine if you should be responsible for copayments for office visits, pharmacy,"
"RTN","EASEZRP2",54,0)
 W !,"inpatient, nursing home and long term care, and for some veterans, priority for enrollment.  You are not required to provide this"
"RTN","EASEZRP2",55,0)
 W !,"information.  However, completing the financial dislosure section results in a more accurate determination of your eligibility for"
"RTN","EASEZRP2",56,0)
 W !,"health care services/benefits."
"RTN","EASEZRP2",57,0)
 ;
"RTN","EASEZRP2",58,0)
 N EZRY,EZRN S (EZRY,EZRN)="___"
"RTN","EASEZRP2",59,0)
 ;  IF NO ENTRY, THEN NO MEANS TEST, SO NO ANSWER
"RTN","EASEZRP2",60,0)
 ;  IF @EASD@(998)="Y", THEN VET DECLINES TO GIVE INFO, SO ANSWER "NO"
"RTN","EASEZRP2",61,0)
 I $D(@EASD@(998)) D
"RTN","EASEZRP2",62,0)
 . S:@EASD@(998)="YES" EZRN=" X "
"RTN","EASEZRP2",63,0)
 . S:@EASD@(998)="NO" EZRY=" X "
"RTN","EASEZRP2",64,0)
 ;
"RTN","EASEZRP2",65,0)
 W !?3,EZRN," NO, I DO NOT WISH TO PROVIDE INFORMATION IN SECTIONS VI THROUGH IX.  I understand that VA is currently not enrolling"
"RTN","EASEZRP2",66,0)
 W !,"veterans who decline to provide financial information unless other special eligibility factors exist.  However, if I am already"
"RTN","EASEZRP2",67,0)
 W !,"enrolled, I agree to pay the applicable VA copayments.  (Sign and date the application in Section XI.)"
"RTN","EASEZRP2",68,0)
 ;
"RTN","EASEZRP2",69,0)
 W !?3,EZRY," YES, I WILL PROVIDE SPECIFIC INCOME AND/OR ASSET INFORMATION TO ESTABLISH MY ELIGIBILITY FOR CARE.  (Complete all sections"
"RTN","EASEZRP2",70,0)
 W !,"below that apply to you with last calendar year's information.  Sign and date the application in Section XI.)"
"RTN","EASEZRP2",71,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",72,0)
 Q
"RTN","EASEZRP2",73,0)
 ;
"RTN","EASEZRP2",74,0)
DEP ;  Print out VA 10-10EZR Section VI, Dependent Information
"RTN","EASEZRP2",75,0)
 ;
"RTN","EASEZRP2",76,0)
 W !?24,"SECTION VI - DEPENDENT INFORMATION  (Use a separate sheet for additional dependents)"
"RTN","EASEZRP2",77,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",78,0)
 ;
"RTN","EASEZRP2",79,0)
 W !,"1. SPOUSE'S NAME (Last, First, Middle Name)",?49,"|2. CHILD'S NAME (Last, First, Middle Name)",?94,"|2A. CHILD'S RELATIONSHIP TO YOU"
"RTN","EASEZRP2",80,0)
 W !?3,$P(@EASD@(1),U),?49,"|   ",@EASD@(2),?94,"|    ",@EASD@(9)
"RTN","EASEZRP2",81,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",82,0)
 ;
"RTN","EASEZRP2",83,0)
 W !,"1A. SPOUSE'S MAIDEN NAME",?49,"|2B. CHILD'S SOCIAL SECURITY NUMBER",?94,"|2C. DATE CHILD BECAME YOUR DEPENDENT"
"RTN","EASEZRP2",84,0)
 W !?4,$P(@EASD@(1),U,2),?49,"|    ",@EASD@(7),?94,"|    ",@EASD@(11)
"RTN","EASEZRP2",85,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",86,0)
 ;
"RTN","EASEZRP2",87,0)
 W !,"1B. SPOUSE'S SOCIAL SECURITY NUMBER  ",@EASD@(3),?66,"|2D. CHILD'S DATE OF BIRTH (mm/dd/yyyy)  ",@EASD@(5)
"RTN","EASEZRP2",88,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",89,0)
 ;
"RTN","EASEZRP2",90,0)
 W !,"1C. SPOUSE'S DATE OF BIRTH (mm/dd/yyyy)",?44,"|1D. DATE OF MARRIAGE (mm/dd/yyyy)",?84,"|2E. WAS CHILD PREMANENTLY AND TOTALLY"
"RTN","EASEZRP2",91,0)
 W !?4,@EASD@(4),?44,"|    ",@EASD@(10),?84,"|    DISABLED BEFORE THE AGE OF 18?   ",@EASD@(14)
"RTN","EASEZRP2",92,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",93,0)
 ;
"RTN","EASEZRP2",94,0)
 W !,"1E. SPOUSE'S ADDRESS AND TELEPHONE NUMBER (Street, City, State, ZIP)",?84,"|2F. IF CHILD IS BETWEEN 18 AND 23 YEARS"
"RTN","EASEZRP2",95,0)
 W !?4,$P(@EASD@(6),U),?84,"|    OF AGE, DID CHILD ATTEND SCHOOL LAST"
"RTN","EASEZRP2",96,0)
 W !?4,$P(@EASD@(6),U,2),?84,"|    CALENDAR YEAR?   ",@EASD@(15)
"RTN","EASEZRP2",97,0)
 W !?4,@EASD@(8),?84,"|"
"RTN","EASEZRP2",98,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",99,0)
 ;
"RTN","EASEZRP2",100,0)
 W !,"3. IF YOUR SPOUSE OR DEPENDENT CHILD DID NOT LIVE WITH YOU LAST",?65,"|2G. EXPENSES PAID BY YOUR DEPENDENT CHILD FOR COLLEGE, VOCATIONAL"
"RTN","EASEZRP2",101,0)
 W !?3,"YEAR, ENTER THE AMOUNT YOU CONTRIBUTED TO THEIR SUPPORT",?65,"|    REHABILITATION OR TRAINING (e.g., tuition, books, materials)"
"RTN","EASEZRP2",102,0)
 W !?6,"SPOUSE  $ ",$P(@EASD@(12),U),?35,"CHILD  $ ",$P(@EASD@(12),U,2),?65,"|",?73,"$ ",@EASD@(13)
"RTN","EASEZRP2",103,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",104,0)
 Q
"RTN","EASEZRP2",105,0)
 ;
"RTN","EASEZRP2",106,0)
INC ; Print out VA 10-10EZ Section VII, Gross Annual Income information
"RTN","EASEZRP2",107,0)
 ;
"RTN","EASEZRP2",108,0)
 I $G(EASDG),+@EASD@(999) W !?6,"SECTION VII - PREVIOUS CALENDAR YEAR GROSS ANNUAL INCOME OF VETERAN, SPOUSE AND DEPENDENT CHILDREN  (INCOME YEAR:  ",@EASD@(999),")"
"RTN","EASEZRP2",109,0)
 E  W !?17,"SECTION VII - PREVIOUS CALENDAR YEAR GROSS ANNUAL INCOME OF VETERAN, SPOUSE AND DEPENDENT CHILDREN"
"RTN","EASEZRP2",110,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",111,0)
 ;
"RTN","EASEZRP2",112,0)
 W !?69,"|",?76,"VETERAN",?90,"|",?97,"SPOUSE",?110,"|",?117,"CHILD 1"
"RTN","EASEZRP2",113,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",114,0)
 ;
"RTN","EASEZRP2",115,0)
 W !,"1. GROSS ANNUAL INCOME FROM EMPLOYMENT (e.g., wages, bonuses, tips)",?69,"|  $ ",$P(@EASD@("2C1"),U),?90,"|  $ ",$P(@EASD@("2C1"),U,2),?110,"|  $ ",$P(@EASD@("2C1"),U,3)
"RTN","EASEZRP2",116,0)
 W !?3,"EXCLUDING INCOME FROM YOUR FARM, RANCH, PROPERTY OR BUSINESS",?69,"|",?90,"|",?110,"|"
"RTN","EASEZRP2",117,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",118,0)
 ;
"RTN","EASEZRP2",119,0)
 W !,"2. NET INCOME FROM YOUR FARM, RANCH, PROPERTY OR BUSINESS",?69,"|  $ ",$P(@EASD@("2C3"),U),?90,"|  $ ",$P(@EASD@("2C3"),U,2),?110,"|  $ ",$P(@EASD@("2C3"),U,3)
"RTN","EASEZRP2",120,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",121,0)
 ;
"RTN","EASEZRP2",122,0)
 W !,"3. LIST OTHER INCOME AMOUNTS (e.g., Social Security, compensation,",?69,"|  $ ",$P(@EASD@("2C2"),U),?90,"|  $ ",$P(@EASD@("2C2"),U,2),?110,"|  $ ",$P(@EASD@("2C2"),U,3)
"RTN","EASEZRP2",123,0)
 W !?3,"pension, interest, dividends).  EXCLUDING WELFARE",?69,"|",?90,"|",?110,"|"
"RTN","EASEZRP2",124,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",125,0)
 Q
"RTN","EASEZRP2",126,0)
 ;
"RTN","EASEZRP2",127,0)
EXP ; Print out VA 10-10EZR Section VIII, Deductible Expense Information
"RTN","EASEZRP2",128,0)
 ;
"RTN","EASEZRP2",129,0)
 I $G(EASDG),+@EASD@(999) W !?26,"SECTION VIII - PREVIOUS CALENDAR YEAR DEDUCTIBLE EXPENSES  (INCOME YEAR:  ",@EASD@(999),")"
"RTN","EASEZRP2",130,0)
 E  W !?37,"SECTION VIII - PREVIOUS CALENDAR YEAR DEDUCTIBLE EXPENSES"
"RTN","EASEZRP2",131,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",132,0)
 ;
"RTN","EASEZRP2",133,0)
 W !,"1. NON-REIMBURSED MEDICAL EXPENSES PAID BY YOU OR YOUR SPOUSE (e.g., payments for doctors, dentists,",?110,"|  $ ",@EASD@("2D1")
"RTN","EASEZRP2",134,0)
 W !,"medications, Medicare, health insurance, hospital and nursing home)",?110,"|"
"RTN","EASEZRP2",135,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",136,0)
 ;
"RTN","EASEZRP2",137,0)
 W !,"2. AMOUNT YOU PAID LAST CALENDAR YEAR FOR FUNERAL AND BURIAL EXPENSES FOR YOUR DECEASED SPOUSE OR DEPENDENT",?110,"|  $ ",@EASD@("2D2")
"RTN","EASEZRP2",138,0)
 W !,"CHILD (Also enter spouse or child's information in Section V.)",?110,"|"
"RTN","EASEZRP2",139,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",140,0)
 ;
"RTN","EASEZRP2",141,0)
 W !,"3. AMOUNT YOU PAID LAST CALENDAR YEAR FOR YOUR COLLEGE OR VOCATIONAL EDUCATIONAL EXPENSES (e.g., tuition,",?110,"|  $ ",@EASD@("2D3")
"RTN","EASEZRP2",142,0)
 W !,"books, fees, materials).  DO NOT LIST YOUR DEPENDENTS' EDUCATIONAL EXPENSES.",?110,"|"
"RTN","EASEZRP2",143,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP2",144,0)
 Q
"RTN","EASEZRP3")
0^16^B26356109
"RTN","EASEZRP3",1,0)
EASEZRP3 ;ALB/AMA - Print 1010EZR, Cont.
"RTN","EASEZRP3",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZRP3",3,0)
 ;
"RTN","EASEZRP3",4,0)
 Q
"RTN","EASEZRP3",5,0)
 ;
"RTN","EASEZRP3",6,0)
EN(EALNE,EAINFO) ; Entry point to print Page 3, called from EN^EASEZRPF
"RTN","EASEZRP3",7,0)
 ;  Input
"RTN","EASEZRP3",8,0)
 ;     EALNE  - Array of line formats for output
"RTN","EASEZRP3",9,0)
 ;     EAINFO - Application Data array, see SETUP^EASEZRPF
"RTN","EASEZRP3",10,0)
 N EASIGN,EASD
"RTN","EASEZRP3",11,0)
 ;
"RTN","EASEZRP3",12,0)
 I $$GET1^DIQ(712,EAINFO("EASAPP")_",",4)]"" D
"RTN","EASEZRP3",13,0)
 . S EASIGN=$$GET1^DIQ(712,EAINFO("EASAPP")_",",4.1)
"RTN","EASEZRP3",14,0)
 S EASIGN=$G(EASIGN)
"RTN","EASEZRP3",15,0)
 ;
"RTN","EASEZRP3",16,0)
 D HDR^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRP3",17,0)
 S EASD=$NA(^TMP("EASEZR",$J,2))
"RTN","EASEZRP3",18,0)
 ;
"RTN","EASEZRP3",19,0)
 D NET
"RTN","EASEZRP3",20,0)
 D CON
"RTN","EASEZRP3",21,0)
 D AOB
"RTN","EASEZRP3",22,0)
 D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRP3",23,0)
 ;
"RTN","EASEZRP3",24,0)
 Q
"RTN","EASEZRP3",25,0)
 ;
"RTN","EASEZRP3",26,0)
NET ;  Print SECTION IX - PREVIOUS CALENDAR YEAR NET WORTH
"RTN","EASEZRP3",27,0)
 ;
"RTN","EASEZRP3",28,0)
 W !?18,"SECTION IX - PREVIOUS CALENDAR YEAR NET WORTH  (Use a separate sheet for additional dependents)"
"RTN","EASEZRP3",29,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",30,0)
 ;
"RTN","EASEZRP3",31,0)
 W !?78,"|",?84,"VETERAN",?96,"|",?102,"SPOUSE",?114,"|",?120,"CHILD 1"
"RTN","EASEZRP3",32,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",33,0)
 ;
"RTN","EASEZRP3",34,0)
 W !,"1. CASH, AMOUNT IN BANK ACCOUNTS (e.g., checking and savings accounts,",?78,"|  $ ",$P(@EASD@("2E1"),U),?96,"|  $ ",$P(@EASD@("2E1"),U,2),?114,"|  $ ",$P(@EASD@("2E1"),U,3)
"RTN","EASEZRP3",35,0)
 W !,"certificates of deposit, individual retirement accounts, stocks and bonds)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZRP3",36,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",37,0)
 ;
"RTN","EASEZRP3",38,0)
 W !,"2. MARKET VALUE OF LAND AND BUILDINGS MINUS MORTGAGES AND LIENS (e.g., second",?78,"|  $ ",$P(@EASD@("2E2"),U),?96,"|  $ ",$P(@EASD@("2E2"),U,2),?114,"|  $ ",$P(@EASD@("2E2"),U,3)
"RTN","EASEZRP3",39,0)
 W !,"homes and non-income-producing property.  Do not include your primary home.)",?78,"|",?96,"|",?114,"|"
"RTN","EASEZRP3",40,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",41,0)
 ;
"RTN","EASEZRP3",42,0)
 W !,"3. VALUE OF OTHER PROPERTY OR ASSETS (e.g., art, rare coins, collectibles)",?78,"|  $ ",$P(@EASD@("2E3"),U),?96,"|  $ ",$P(@EASD@("2E3"),U,2),?114,"|  $ ",$P(@EASD@("2E3"),U,3)
"RTN","EASEZRP3",43,0)
 W !,"MINUS THE AMOUNT YOU OWE ON THESE ITEMS.  INCLUDE VALUE OF FARM, RANCH, OR",?78,"|",?96,"|",?114,"|"
"RTN","EASEZRP3",44,0)
 W !,"BUSINESS ASSETS.  Exclude household effects and family vehicles.",?78,"|",?96,"|",?114,"|"
"RTN","EASEZRP3",45,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",46,0)
 Q
"RTN","EASEZRP3",47,0)
 ;
"RTN","EASEZRP3",48,0)
CON ;  Print SECTION X - CONSENT TO COPAYMENTS
"RTN","EASEZRP3",49,0)
 ;
"RTN","EASEZRP3",50,0)
 W !?49,"SECTION X - CONSENT TO COPAYMENTS"
"RTN","EASEZRP3",51,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",52,0)
 ;
"RTN","EASEZRP3",53,0)
 W !,"If you are a 0% service-connected veteran and do not receive VA monetary benefits or a nonservice-connected veteran (and you are"
"RTN","EASEZRP3",54,0)
 W !,"not an Ex-POW, Purple Heart Recipient, WWI veteran or VA pensioner) and your household income (or combined income and net worth)"
"RTN","EASEZRP3",55,0)
 W !,"exceeds the established threshold, this application will be considered for enrollment, but only if you agree to pay VA copayments"
"RTN","EASEZRP3",56,0)
 W !,"for treatment of your nonservice-connected conditions.  If you are such a veteran, by signing this application you are agreeing"
"RTN","EASEZRP3",57,0)
 W !,"to pay the applicable VA copayment as required by law.",!
"RTN","EASEZRP3",58,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",59,0)
 Q
"RTN","EASEZRP3",60,0)
 ;
"RTN","EASEZRP3",61,0)
AOB ;  Print SECTION XI - ASSIGNMENT OF BENEFITS
"RTN","EASEZRP3",62,0)
 ;
"RTN","EASEZRP3",63,0)
 W !?48,"SECTION XI - ASSIGNMENT OF BENEFITS"
"RTN","EASEZRP3",64,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",65,0)
 ;
"RTN","EASEZRP3",66,0)
 W !,"I understand that pursuant to 38 U.S.C. Section 1729, VA is authorized to recover or collect from my health plan (HP) for the"
"RTN","EASEZRP3",67,0)
 W !,"reasonable charges of nonservice-connected VA medical care or services furnished or provided to me.  I hereby authorize payment"
"RTN","EASEZRP3",68,0)
 W !,"directly to VA from any HP under which I am covered (including coverage provided under my spouse's HP) that is responsible for"
"RTN","EASEZRP3",69,0)
 W !,"payment of the charges for my medical care, including benefits otherwise payable to me or my spouse.",!
"RTN","EASEZRP3",70,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",71,0)
 ;
"RTN","EASEZRP3",72,0)
 W !?11,"ALL APPLICANTS MUST SIGN AND DATE THIS FORM.  REFER TO INSTRUCTIONS ON WHO CAN SIGN ON BEHALF OF THE VETERAN.",!
"RTN","EASEZRP3",73,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",74,0)
 ;
"RTN","EASEZRP3",75,0)
 W !,"SIGNATURE OF APPLICANT",?90,"| DATE (mm/dd/yyyy)"
"RTN","EASEZRP3",76,0)
 I $G(EASIGN)]"" W !,"SIGNATURE OF APPLICANT OR APPLICANT'S REPRESENTATIVE HAS BEEN VERIFIED",?90,"| ",EASIGN,!?90,"|"
"RTN","EASEZRP3",77,0)
 E  W !?90,"|",!?90,"|"
"RTN","EASEZRP3",78,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRP3",79,0)
 Q
"RTN","EASEZRPD")
0^18^B8374061
"RTN","EASEZRPD",1,0)
EASEZRPD ;ALB/AMA - Print 1010EZR, Cont., - OTHER DEPENDENT(S) PAGE(S)
"RTN","EASEZRPD",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZRPD",3,0)
 ;
"RTN","EASEZRPD",4,0)
 Q
"RTN","EASEZRPD",5,0)
 ;
"RTN","EASEZRPD",6,0)
EN(EALNE,EAINFO) ;Print multiple dependent information
"RTN","EASEZRPD",7,0)
 ;Called from EN^EASEZRPF
"RTN","EASEZRPD",8,0)
 ;  Input
"RTN","EASEZRPD",9,0)
 ;     EALNE  - Array of line formats for output
"RTN","EASEZRPD",10,0)
 ;     EAINFO - Application Data array, see SETUP^EASEZRPF
"RTN","EASEZRPD",11,0)
 ;
"RTN","EASEZRPD",12,0)
 N EASD,NEWPG,X,Y
"RTN","EASEZRPD",13,0)
 S EASD=$NA(^TMP("EASEZR",$J,"D"))
"RTN","EASEZRPD",14,0)
 ; assuming 55 print lines per page, 8 lines per entry, 1 line for
"RTN","EASEZRPD",15,0)
 ; title and 1 blank dividing line, 6 entries will fit on one page
"RTN","EASEZRPD",16,0)
 S NEWPG=6
"RTN","EASEZRPD",17,0)
 D BEGIN
"RTN","EASEZRPD",18,0)
 ;
"RTN","EASEZRPD",19,0)
 F X=1:1 Q:'$D(@EASD@(X))  D
"RTN","EASEZRPD",20,0)
 . ;Check to see if a new page is needed
"RTN","EASEZRPD",21,0)
 . I (X>1),'((X-1)#NEWPG) D
"RTN","EASEZRPD",22,0)
 . . D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRPD",23,0)
 . . D BEGIN
"RTN","EASEZRPD",24,0)
 . I (X#NEWPG)'=1 W !?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPD",25,0)
 . S Y=X+1
"RTN","EASEZRPD",26,0)
 . D ADEP
"RTN","EASEZRPD",27,0)
 ;
"RTN","EASEZRPD",28,0)
 D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRPD",29,0)
 Q
"RTN","EASEZRPD",30,0)
 ;
"RTN","EASEZRPD",31,0)
BEGIN ; Print page header info
"RTN","EASEZRPD",32,0)
 ;
"RTN","EASEZRPD",33,0)
 D HDR^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRPD",34,0)
 W !!?42,"SECTION VI - DEPENDENT INFORMATION - ADDITIONAL"
"RTN","EASEZRPD",35,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPD",36,0)
 Q
"RTN","EASEZRPD",37,0)
 ;
"RTN","EASEZRPD",38,0)
ADEP ;  Print out VA 10-10EZ Section VI, Additional Dependent Information
"RTN","EASEZRPD",39,0)
 ;
"RTN","EASEZRPD",40,0)
 W !,"1."_Y_" CHILD'S NAME (Last, First, Middle Name)",?64,"|2."_Y_" CHILD'S DATE OF BIRTH",?93,"|3."_Y_" CHILD'S SOCIAL SECURITY NUMBER"
"RTN","EASEZRPD",41,0)
 W !?4,@EASD@(X,2),?64,"|    ",@EASD@(X,5),?93,"|    ",@EASD@(X,7)
"RTN","EASEZRPD",42,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPD",43,0)
 ;
"RTN","EASEZRPD",44,0)
 W !,"4."_Y_" DATE CHILD BECAME YOUR DEPENDENT:   ",@EASD@(X,11),?64,"|5."_Y_" CHILD'S RELATIONSHIP TO YOU:   ",@EASD@(X,9)
"RTN","EASEZRPD",45,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPD",46,0)
 ;
"RTN","EASEZRPD",47,0)
 W !,"6."_Y_" IF YOUR DEPENDENT CHILD DID NOT LIVE WITH YOU LAST",?64,"|7."_Y_" EXPENSES PAID BY YOUR DEPENDENT CHILD FOR COLLEGE, VOCATIONAL"
"RTN","EASEZRPD",48,0)
 W !?4,"YEAR, ENTER THE AMOUNT YOU CONTRIBUTED TO THEIR SUPPORT",?64,"|    REHABILITATION OR TRAINING (e.g., tuition, books, materials)"
"RTN","EASEZRPD",49,0)
 W !?10,"$ ",$P(@EASD@(X,12),U,2),?64,"|",?75,"$ ",@EASD@(X,13)
"RTN","EASEZRPD",50,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPD",51,0)
 ;
"RTN","EASEZRPD",52,0)
 W !,"8."_Y_" WAS CHILD PERMANENTLY AND TOTALLY DISABLED BEFORE THE",?64,"|9."_Y_" IF CHILD IS BETWEEN 18 AND 23 YEARS OF AGE, DID CHILD"
"RTN","EASEZRPD",53,0)
 W !?4,"AGE OF 18?   ",@EASD@(X,14),?64,"|    ATTEND SCHOOL LAST CALENDAR YEAR?   ",@EASD@(X,15)
"RTN","EASEZRPD",54,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPD",55,0)
 Q
"RTN","EASEZRPF")
0^17^B15944209
"RTN","EASEZRPF",1,0)
EASEZRPF ;ALB/AMA - Print 1010EZR
"RTN","EASEZRPF",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZRPF",3,0)
 ;
"RTN","EASEZRPF",4,0)
 ; These routines print a version of the OMB approved VA10-10EZR form.
"RTN","EASEZRPF",5,0)
 ; No local modifications to these routines will be made.  Any changes
"RTN","EASEZRPF",6,0)
 ; will be provided through the National Patch Module release process.
"RTN","EASEZRPF",7,0)
 ;
"RTN","EASEZRPF",8,0)
 Q
"RTN","EASEZRPF",9,0)
EN ; Entry point to print 1010EZR
"RTN","EASEZRPF",10,0)
 N EALNE,EAINFO,EAADL,EAABRT,EAMULT
"RTN","EASEZRPF",11,0)
 ;
"RTN","EASEZRPF",12,0)
 D SETUP(.EALNE,.EAINFO,EASAPP,EASDFN)
"RTN","EASEZRPF",13,0)
 ;
"RTN","EASEZRPF",14,0)
 M ^TMP("EASEZR",$J)=^TMP("EASEZ",$J) K ^TMP("EASEZ",$J)
"RTN","EASEZRPF",15,0)
 M ^TMP("EZRDATA",$J)=^TMP("EZDATA",$J) K ^TMP("EZDATA",$J)
"RTN","EASEZRPF",16,0)
 M ^TMP("EZRINDEX",$J)=^TMP("EZINDEX",$J) K ^TMP("EZINDEX",$J)
"RTN","EASEZRPF",17,0)
 M ^TMP("EZRTEMP",$J)=^TMP("EZTEMP",$J) K ^TMP("EZTEMP",$J)
"RTN","EASEZRPF",18,0)
 M ^TMP("EZRDISP",$J)=^TMP("EZDISP",$J) K ^TMP("EZDISP",$J)
"RTN","EASEZRPF",19,0)
 ;
"RTN","EASEZRPF",20,0)
 D PAGE1^EASEZRPU
"RTN","EASEZRPF",21,0)
 D EN^EASEZRP1(.EALNE,.EAINFO)
"RTN","EASEZRPF",22,0)
 ;
"RTN","EASEZRPF",23,0)
 D PAGE2^EASEZRPP
"RTN","EASEZRPF",24,0)
 D EN^EASEZRP2(.EALNE,.EAINFO)
"RTN","EASEZRPF",25,0)
 ;
"RTN","EASEZRPF",26,0)
 D EN^EASEZRP3(.EALNE,.EAINFO)
"RTN","EASEZRPF",27,0)
 ;
"RTN","EASEZRPF",28,0)
 ;Print additional insurance pages if more than 1 insurance company
"RTN","EASEZRPF",29,0)
 F EAADL=1:1 D  Q:$G(EAABRT)
"RTN","EASEZRPF",30,0)
 . I '$D(^TMP("EZRTEMP",$J,"IA",EAADL)) S EAABRT=1 Q
"RTN","EASEZRPF",31,0)
 . S EAMULT=1
"RTN","EASEZRPF",32,0)
 . D PAGEI^EASEZRPU(EAADL)
"RTN","EASEZRPF",33,0)
 I $G(EAMULT) D EN^EASEZRPI(.EALNE,.EAINFO)
"RTN","EASEZRPF",34,0)
 ;
"RTN","EASEZRPF",35,0)
 ;Print additional dependent pages if more than 1 dependent
"RTN","EASEZRPF",36,0)
 S (EAABRT,EAMULT)=0 F EAADL=1:1 D  Q:$G(EAABRT)
"RTN","EASEZRPF",37,0)
 . I '$D(^TMP("EZRTEMP",$J,"IIB",EAADL)) S EAABRT=1 Q
"RTN","EASEZRPF",38,0)
 . S EAMULT=1
"RTN","EASEZRPF",39,0)
 . D PAGEN^EASEZRPU(EAADL)
"RTN","EASEZRPF",40,0)
 I EAMULT D EN^EASEZRPD(.EALNE,.EAINFO)
"RTN","EASEZRPF",41,0)
 ;
"RTN","EASEZRPF",42,0)
 ;Print additional dependent financial pages if more
"RTN","EASEZRPF",43,0)
 ;than 1 dependent, starting with the 2nd one
"RTN","EASEZRPF",44,0)
 ;(since Child 1 info already displayed on pages 2 & 3)
"RTN","EASEZRPF",45,0)
 S (EAABRT,EAMULT)=0 F EAADL=2:1 D  Q:$G(EAABRT)
"RTN","EASEZRPF",46,0)
 . I '$D(^TMP("EZRTEMP",$J,"IIF",EAADL)) S EAABRT=1 Q
"RTN","EASEZRPF",47,0)
 . S EAMULT=1
"RTN","EASEZRPF",48,0)
 . D PAGEDFF^EASEZRPP(EAADL)
"RTN","EASEZRPF",49,0)
 S EAABRT=0 F EAADL=2:1 D  Q:$G(EAABRT)
"RTN","EASEZRPF",50,0)
 . I '$D(^TMP("EZRTEMP",$J,"IIG",EAADL)) S EAABRT=1 Q
"RTN","EASEZRPF",51,0)
 . S EAMULT=1
"RTN","EASEZRPF",52,0)
 . D PAGEDFG^EASEZRPP(EAADL)
"RTN","EASEZRPF",53,0)
 I EAMULT D EN^EASEZRPM(.EALNE,.EAINFO)
"RTN","EASEZRPF",54,0)
 ;
"RTN","EASEZRPF",55,0)
ENQUIT ; Clean up temp globals after printing is complete
"RTN","EASEZRPF",56,0)
 K ^TMP("EASEZR",$J)
"RTN","EASEZRPF",57,0)
 K ^TMP("EZRDATA",$J)
"RTN","EASEZRPF",58,0)
 K ^TMP("EZRINDEX",$J)
"RTN","EASEZRPF",59,0)
 K ^TMP("EZRTEMP",$J)
"RTN","EASEZRPF",60,0)
 K ^TMP("EZRDISP",$J)
"RTN","EASEZRPF",61,0)
 Q
"RTN","EASEZRPF",62,0)
 ;
"RTN","EASEZRPF",63,0)
SETUP(EALNE,EAINFO,EASAPP,EASDFN) ; Set-up print variables
"RTN","EASEZRPF",64,0)
 ; Input
"RTN","EASEZRPF",65,0)
 ;   EALNE   - Line format array
"RTN","EASEZRPF",66,0)
 ;   EAINFO  - Misc Data
"RTN","EASEZRPF",67,0)
 ;      ("CLRK") - Clerk's initials
"RTN","EASEZRPF",68,0)
 ;      ("ID")   - Web ID from #712
"RTN","EASEZRPF",69,0)
 ;      ("PGE")  - Page number
"RTN","EASEZRPF",70,0)
 ;      ("VET" ) - Veteran's name submitting the application
"RTN","EASEZRPF",71,0)
 ;      ("SSN")  - Veteran's SSN
"RTN","EASEZRPF",72,0)
 ;      ("DISC") - Financial Disclosure status
"RTN","EASEZRPF",73,0)
 ;   EASAPP  - IEN of applicant on the 1010EZ HOLDING File, #712
"RTN","EASEZRPF",74,0)
 ;   EASDFN  - DFN of applicant in the PATIENT File, #2
"RTN","EASEZRPF",75,0)
 ;
"RTN","EASEZRPF",76,0)
 N X
"RTN","EASEZRPF",77,0)
 ;
"RTN","EASEZRPF",78,0)
 ; Build Line array for printout
"RTN","EASEZRPF",79,0)
 S EALNE("ULC")=$S('($D(IOST)#2):"-",IOST["C-":"-",1:"_")
"RTN","EASEZRPF",80,0)
 S EALNE("D")="",EALNE("DD")="",EALNE("UL")=""
"RTN","EASEZRPF",81,0)
 S $P(EALNE("D"),"-",133)="",$P(EALNE("DD"),"=",133)="",$P(EALNE("UL"),EALNE("ULC"),133)=""
"RTN","EASEZRPF",82,0)
 ;
"RTN","EASEZRPF",83,0)
 ; Set up information array & get clerk's initials
"RTN","EASEZRPF",84,0)
 S ZUSR=$G(ZUSR)
"RTN","EASEZRPF",85,0)
 I +ZUSR>0 D
"RTN","EASEZRPF",86,0)
 . S EAINFO("CLRK")=$$GET1^DIQ(200,ZUSR,1)
"RTN","EASEZRPF",87,0)
 . I EAINFO("CLRK")']"" D
"RTN","EASEZRPF",88,0)
 . . S X=$$GET1^DIQ(200,ZUSR,.01)
"RTN","EASEZRPF",89,0)
 . . S EAINFO("CLRK")=$E($P(X,",",2),1)_$E($P(X,","),1)
"RTN","EASEZRPF",90,0)
 E  D
"RTN","EASEZRPF",91,0)
 . S EAINFO("CLRK")="unk"
"RTN","EASEZRPF",92,0)
 ;
"RTN","EASEZRPF",93,0)
 ; Set data elements
"RTN","EASEZRPF",94,0)
 S EAINFO("PGE")=0
"RTN","EASEZRPF",95,0)
 S EAINFO("ID")=$$GET1^DIQ(712,EASAPP_",",.1)
"RTN","EASEZRPF",96,0)
 S EAINFO("PD")=$$FMTE^XLFDT($$NOW^XLFDT)
"RTN","EASEZRPF",97,0)
 S EAINFO("DISC")=$$GET1^DIQ(712,EASAPP_",",3.8)
"RTN","EASEZRPF",98,0)
 S EAINFO("EASAPP")=EASAPP
"RTN","EASEZRPF",99,0)
 S EAINFO("VET")=$$GET1^DIQ(712,EASAPP_",",1)
"RTN","EASEZRPF",100,0)
 S EAINFO("SSN")=$$GET1^DIQ(712,EASAPP_",",2)
"RTN","EASEZRPF",101,0)
 ;
"RTN","EASEZRPF",102,0)
 ; Retrieve application data from holding file, #712
"RTN","EASEZRPF",103,0)
 D EN^EASEZC1(EASAPP)
"RTN","EASEZRPF",104,0)
 D SORT^EASEZC3(EASAPP)
"RTN","EASEZRPF",105,0)
SETQ Q
"RTN","EASEZRPF",106,0)
 ;
"RTN","EASEZRPF",107,0)
HDRMAIN(EALNE) ; PRINT THE FIRST PAGE HEADER INFORMATION
"RTN","EASEZRPF",108,0)
 W @IOF
"RTN","EASEZRPF",109,0)
 W ?44,"OMB APPROVED NO. 2900-0091 / Estimated Burden Avg. 24 min. / Expiration Date: 6/30/2007",!,EALNE("DD")
"RTN","EASEZRPF",110,0)
 W !,"D E P A R T M E N T   O F   V E T E R A N S   A F F A I R S",?76,"HEALTH BENEFITS RENEWAL FORM",!,EALNE("DD")
"RTN","EASEZRPF",111,0)
 Q
"RTN","EASEZRPF",112,0)
 ;
"RTN","EASEZRPF",113,0)
HDR(EALNE,EAINFO) ; PRINT THE PAGE HEADER INFO FOR PAGES GREATER THAN 1
"RTN","EASEZRPF",114,0)
 W @IOF
"RTN","EASEZRPF",115,0)
 W "DEPARTMENT OF VETERANS AFFAIRS",?40,"| VETERAN'S NAME (Last, First, Middle)",?106,"| SOCIAL SECURITY NUMBER"
"RTN","EASEZRPF",116,0)
 W !?40,"| ",EAINFO("VET"),?106,"| ",EAINFO("SSN")
"RTN","EASEZRPF",117,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPF",118,0)
 Q
"RTN","EASEZRPF",119,0)
 ;
"RTN","EASEZRPF",120,0)
FT(EALNE,EAINFO) ; PRINT THE PAGE FOOTER INFORMATION
"RTN","EASEZRPF",121,0)
 W !,EALNE("DD")
"RTN","EASEZRPF",122,0)
 W !,"VA FORM 10-10EZR FEB 2005",?40,"PRINTED: ",EAINFO("PD")
"RTN","EASEZRPF",123,0)
 W ?80,"Clerk: ",EAINFO("CLRK"),"/",EAINFO("ID")
"RTN","EASEZRPF",124,0)
 W ?120,"PAGE " S EAINFO("PGE")=EAINFO("PGE")+1 W EAINFO("PGE")
"RTN","EASEZRPF",125,0)
 Q
"RTN","EASEZRPI")
0^19^B2991778
"RTN","EASEZRPI",1,0)
EASEZRPI ;ALB/AMA - Print 1010EZR, Cont. - OTHER INSURANCE PAGE
"RTN","EASEZRPI",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZRPI",3,0)
 ;
"RTN","EASEZRPI",4,0)
 Q
"RTN","EASEZRPI",5,0)
 ;
"RTN","EASEZRPI",6,0)
EN(EALNE,EAINFO) ;Print multiple insurance companies
"RTN","EASEZRPI",7,0)
 ;Called from EN^EASEZRPF
"RTN","EASEZRPI",8,0)
 ;   Input
"RTN","EASEZRPI",9,0)
 ;     EALNE  - Array of line formats for output
"RTN","EASEZRPI",10,0)
 ;     EAINFO - Application Data array, see SETUP^EASEZRPF
"RTN","EASEZRPI",11,0)
 N EASD,X
"RTN","EASEZRPI",12,0)
 ;
"RTN","EASEZRPI",13,0)
 ;Expecting 4 additional insurance companies or less, and with only 5
"RTN","EASEZRPI",14,0)
 ;lines per entry, so no need to worry about going to another page
"RTN","EASEZRPI",15,0)
 S EASD=$NA(^TMP("EASEZR",$J,"I"))
"RTN","EASEZRPI",16,0)
 D HDR^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRPI",17,0)
 W !!?42,"SECTION II - INSURANCE INFORMATION - ADDITIONAL"
"RTN","EASEZRPI",18,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPI",19,0)
 ;
"RTN","EASEZRPI",20,0)
 F X=1:1 Q:'$D(@EASD@(X))  D
"RTN","EASEZRPI",21,0)
 . I X>1 W !?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPI",22,0)
 . D AI
"RTN","EASEZRPI",23,0)
 ;
"RTN","EASEZRPI",24,0)
 D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRPI",25,0)
 Q
"RTN","EASEZRPI",26,0)
 ;
"RTN","EASEZRPI",27,0)
AI ; Print SECTION II - ADDITIONAL INSURANCE INFORMATION
"RTN","EASEZRPI",28,0)
 ;
"RTN","EASEZRPI",29,0)
 W !,"1."_(X+1)_" HEALTH INSURANCE COMPANY NAME "_(X+1),?38,"|2."_(X+1)_" ADDRESS",?104,"|3."_(X+1)_" TELEPHONE"
"RTN","EASEZRPI",30,0)
 W !?4,@EASD@(X,"17A"),?38,"|    ",$P(@EASD@(X,"17E"),U),?104,"|    ",@EASD@(X,"17I")
"RTN","EASEZRPI",31,0)
 W !?38,"|    ",$P(@EASD@(X,"17E"),U,2),?104,"|"
"RTN","EASEZRPI",32,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPI",33,0)
 ;
"RTN","EASEZRPI",34,0)
 W !,"4."_(X+1)_" NAME OF POLICY HOLDER",?50,"|5."_(X+1)_" POLICY NUMBER",?85,"|6."_(X+1)_" GROUP CODE"
"RTN","EASEZRPI",35,0)
 W !?4,@EASD@(X,"17B"),?50,"|    ",@EASD@(X,"17C"),?85,"|    ",@EASD@(X,"17D")
"RTN","EASEZRPI",36,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPI",37,0)
 Q
"RTN","EASEZRPM")
0^20^B29656175
"RTN","EASEZRPM",1,0)
EASEZRPM ;ALB/AMA - Print 1010EZR, Cont., Other Dependent Financial Pages
"RTN","EASEZRPM",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZRPM",3,0)
 ;
"RTN","EASEZRPM",4,0)
 Q
"RTN","EASEZRPM",5,0)
 ;
"RTN","EASEZRPM",6,0)
EN(EALNE,EAINFO,EASDG) ;Print multiple dependent financial information
"RTN","EASEZRPM",7,0)
 ;Called from EN^EASEZRPF
"RTN","EASEZRPM",8,0)
 ;  Input
"RTN","EASEZRPM",9,0)
 ;     EALNE  - Array of line formats for output
"RTN","EASEZRPM",10,0)
 ;     EAINFO - Application Data array, see SETUP^EASEZRPF
"RTN","EASEZRPM",11,0)
 ;     EASDG  - Flag variable to signify request to print from DG options
"RTN","EASEZRPM",12,0)
 ;
"RTN","EASEZRPM",13,0)
 N FNP,GNP        ;MAX NO. ENTRIES PER PAGE FOR EACH SECTION
"RTN","EASEZRPM",14,0)
 N EASF,EASG      ;VARS FOR INDIRECT ^TMP GLOBAL REFERENCE
"RTN","EASEZRPM",15,0)
 N DEPF,DEPG      ;VARS TO LOOP THROUGH ^TMP GLOBALS
"RTN","EASEZRPM",16,0)
 N DFCNT,DGCNT    ;COUNTERS FOR NO. DEPENDENTS
"RTN","EASEZRPM",17,0)
 N NEWPG,SECOND   ;VARS TO DETERMINE WHEN A NEW PAGE SHOULD OCCUR
"RTN","EASEZRPM",18,0)
 ;
"RTN","EASEZRPM",19,0)
 ;Assuming 55 print lines per page, 5 lines per IIF entry, 6 lines
"RTN","EASEZRPM",20,0)
 ;per IIG entry, plus lines for titles and blank dividing lines:
"RTN","EASEZRPM",21,0)
 S FNP=9   ;can fit 9 dependents on one page for Section IIF
"RTN","EASEZRPM",22,0)
 S GNP=7   ;can fit 7 dependents on one page for Section IIG
"RTN","EASEZRPM",23,0)
 ;
"RTN","EASEZRPM",24,0)
 ;Find additional dependents from Section IIF
"RTN","EASEZRPM",25,0)
 S EASF=$NA(^TMP("EASEZR",$J,"DFF"))
"RTN","EASEZRPM",26,0)
 I $O(@EASF@(1)) D BEGINF
"RTN","EASEZRPM",27,0)
 ;
"RTN","EASEZRPM",28,0)
 ;Start printing with 2nd dependent
"RTN","EASEZRPM",29,0)
 S DEPF=1,DFCNT=0 F  S DEPF=$O(@EASF@(DEPF)) Q:'DEPF  D
"RTN","EASEZRPM",30,0)
 . S DFCNT=DFCNT+1
"RTN","EASEZRPM",31,0)
 . ;Check to see if a new page is needed
"RTN","EASEZRPM",32,0)
 . I (DFCNT>1),'((DFCNT-1)#FNP) D
"RTN","EASEZRPM",33,0)
 . . D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRPM",34,0)
 . . D BEGINF
"RTN","EASEZRPM",35,0)
 . I (DFCNT#FNP)'=1 W !?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPM",36,0)
 . D ADFF
"RTN","EASEZRPM",37,0)
 ;
"RTN","EASEZRPM",38,0)
 ;Find additional dependents from Section IIG
"RTN","EASEZRPM",39,0)
 S EASG=$NA(^TMP("EASEZR",$J,"DFG"))
"RTN","EASEZRPM",40,0)
 I $O(@EASG@(1)) D
"RTN","EASEZRPM",41,0)
 . I $O(@EASF@(1)) D  I 1
"RTN","EASEZRPM",42,0)
 . . I ((DFCNT#FNP)'=0),((DFCNT#FNP)'=GNP) W !!,?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPM",43,0)
 . . ;At the end of IIF, to find when to jump to the next page, 
"RTN","EASEZRPM",44,0)
 . . ;55 print lines, minus 3 lines for Section IIG title header,
"RTN","EASEZRPM",45,0)
 . . ;minus the number of lines already used on current page,
"RTN","EASEZRPM",46,0)
 . . ;divided by the number of lines for a Section IIG entry
"RTN","EASEZRPM",47,0)
 . . S NEWPG=(51-((DFCNT#FNP)*6))\7
"RTN","EASEZRPM",48,0)
 . . I '(DFCNT#FNP)!'NEWPG!(NEWPG=GNP) S NEWPG=GNP D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRPM",49,0)
 . E  S NEWPG=GNP
"RTN","EASEZRPM",50,0)
 . D BEGING
"RTN","EASEZRPM",51,0)
 ;
"RTN","EASEZRPM",52,0)
 ;Start printing with 2nd dependent
"RTN","EASEZRPM",53,0)
 S DEPG=1,DGCNT=0 F  S DEPG=$O(@EASG@(DEPG)) Q:'DEPG  D
"RTN","EASEZRPM",54,0)
 . S DGCNT=DGCNT+1
"RTN","EASEZRPM",55,0)
 . ;Check to see if a new page is needed
"RTN","EASEZRPM",56,0)
 . I (DGCNT>1),'((DGCNT-$G(SECOND)-1)#NEWPG) D
"RTN","EASEZRPM",57,0)
 . . D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRPM",58,0)
 . . I NEWPG'=GNP S SECOND=NEWPG,NEWPG=GNP
"RTN","EASEZRPM",59,0)
 . . D BEGING
"RTN","EASEZRPM",60,0)
 . I (DGCNT-$G(SECOND))#GNP'=1 W !?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPM",61,0)
 . D ADFG
"RTN","EASEZRPM",62,0)
 ;
"RTN","EASEZRPM",63,0)
 D FT^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRPM",64,0)
 Q
"RTN","EASEZRPM",65,0)
 ;
"RTN","EASEZRPM",66,0)
BEGINF ; Print page header info
"RTN","EASEZRPM",67,0)
 ;
"RTN","EASEZRPM",68,0)
 D HDR^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRPM",69,0)
 I $G(EASDG) D  I 1
"RTN","EASEZRPM",70,0)
 . N EZINYR
"RTN","EASEZRPM",71,0)
 . S EZINYR=^TMP("EASEZR",$J,2,999)
"RTN","EASEZRPM",72,0)
 . W !!?9,"SECTION VII - PREVIOUS CALENDAR YEAR GROSS ANNUAL INCOME OF ADDITIONAL DEPENDENT CHILD(REN)  (INCOME YEAR:  ",EZINYR,")"
"RTN","EASEZRPM",73,0)
 E  W !!?20,"SECTION VII - PREVIOUS CALENDAR YEAR GROSS ANNUAL INCOME OF ADDITIONAL DEPENDENT CHILD(REN)"
"RTN","EASEZRPM",74,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPM",75,0)
 Q
"RTN","EASEZRPM",76,0)
 ;
"RTN","EASEZRPM",77,0)
BEGING ; Print page header info
"RTN","EASEZRPM",78,0)
 ;
"RTN","EASEZRPM",79,0)
 I NEWPG=GNP D HDR^EASEZRPF(.EALNE,.EAINFO)
"RTN","EASEZRPM",80,0)
 I $G(EASDG) D  I 1
"RTN","EASEZRPM",81,0)
 . N EZINYR
"RTN","EASEZRPM",82,0)
 . S EZINYR=^TMP("EASEZR",$J,2,999)
"RTN","EASEZRPM",83,0)
 . W !!?14,"SECTION IX - PREVIOUS CALENDAR YEAR NET WORTH FOR ADDITIONAL DEPENDENT CHILD(REN)  (INCOME YEAR:  ",EZINYR,")"
"RTN","EASEZRPM",84,0)
 E  W !!?25,"SECTION IX - PREVIOUS CALENDAR YEAR NET WORTH FOR ADDITIONAL DEPENDENT CHILD(REN)"
"RTN","EASEZRPM",85,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPM",86,0)
 Q
"RTN","EASEZRPM",87,0)
 ;
"RTN","EASEZRPM",88,0)
ADFF ; Print out VA 10-10EZ Section VII, Gross Annual Income information - Additional Dependents
"RTN","EASEZRPM",89,0)
 ;
"RTN","EASEZRPM",90,0)
 W !,"1. GROSS ANNUAL INCOME FROM EMPLOYMENT (e.g., wages, bonuses, tips)",?90,"|  $ ",$P(@EASF@(DEPF,7),U,2)
"RTN","EASEZRPM",91,0)
 W !,"EXCLUDING INCOME FROM YOUR FARM, RANCH, PROPERTY OR BUSINESS -- ",$P(@EASF@(DEPF,7),U),?90,"|"
"RTN","EASEZRPM",92,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPM",93,0)
 ;
"RTN","EASEZRPM",94,0)
 W !,"2. NET INCOME FROM YOUR FARM, RANCH, PROPERTY OR BUSINESS -- ",$P(@EASF@(DEPF,7),U),?90,"|  $ ",$P(@EASF@(DEPF,7),U,3)
"RTN","EASEZRPM",95,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPM",96,0)
 ;
"RTN","EASEZRPM",97,0)
 W !,"3. LIST OTHER INCOME AMOUNTS (e.g., Social Security, compensation,",?90,"|  $ ",$P(@EASF@(DEPF,7),U,4)
"RTN","EASEZRPM",98,0)
 W !,"pension, interest, dividends).  EXCLUDING WELFARE -- ",$P(@EASF@(DEPF,7),U),?90,"|"
"RTN","EASEZRPM",99,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPM",100,0)
 Q
"RTN","EASEZRPM",101,0)
 ;
"RTN","EASEZRPM",102,0)
ADFG ;  Print SECTION IX - PREVIOUS CALENDAR YEAR NET WORTH - ADDITIONAL DEPENDENTS
"RTN","EASEZRPM",103,0)
 ;
"RTN","EASEZRPM",104,0)
 W !,"1. CASH, AMOUNT IN BANK ACCOUNTS (e.g., checking and savings accounts,",?116,"|  $ ",$P(@EASG@(DEPG,9),U,2)
"RTN","EASEZRPM",105,0)
 W !,"certificates of deposit, individual retirement accounts, stocks and bonds)  -- ",$P(@EASG@(DEPG,9),U),?116,"|"
"RTN","EASEZRPM",106,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPM",107,0)
 ;
"RTN","EASEZRPM",108,0)
 W !,"2. MARKET VALUE OF LAND AND BUILDINGS MINUS MORTGAGES AND LIENS (e.g., second",?116,"|  $ ",$P(@EASG@(DEPG,9),U,3)
"RTN","EASEZRPM",109,0)
 W !,"homes and non-income-producing property).  DO NOT INCLUDE YOUR PRIMARY HOME.  -- ",$P(@EASG@(DEPG,9),U),?116,"|"
"RTN","EASEZRPM",110,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPM",111,0)
 ;
"RTN","EASEZRPM",112,0)
 W !,"3. VALUE OF OTHER PROPERTY OR ASSETS (e.g., art, rare coins, collectibles) MINUS THE AMOUNT YOU OWE ON THESE ITEMS.",?116,"|  $ ",$P(@EASG@(DEPG,9),U,4)
"RTN","EASEZRPM",113,0)
 W !,"INCLUDE VALUE OF FARM, RANCH, OR BUSINESS ASSETS.  Exclude household effects and family vehicles.  -- ",$P(@EASG@(DEPG,9),U),?116,"|"
"RTN","EASEZRPM",114,0)
 W ?131,$C(13) W:EALNE("ULC")="-" ! W EALNE("UL")
"RTN","EASEZRPM",115,0)
 Q
"RTN","EASEZRPP")
0^21^B33578225
"RTN","EASEZRPP",1,0)
EASEZRPP ;ALB/AMA - Print utility for 10-10EZR, Part 2
"RTN","EASEZRPP",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZRPP",3,0)
 ;
"RTN","EASEZRPP",4,0)
 Q
"RTN","EASEZRPP",5,0)
 ;
"RTN","EASEZRPP",6,0)
PAGE2 ;Retrieve page 2 data and format for output on 10-10EZR form
"RTN","EASEZRPP",7,0)
 ;   Called from EN^EASEZRPF
"RTN","EASEZRPP",8,0)
 ;
"RTN","EASEZRPP",9,0)
 ;Variables
"RTN","EASEZRPP",10,0)
 ;   ZDATA         - references TMP global for output data
"RTN","EASEZRPP",11,0)
 ;   EZDATA        - references available data from 1010EZ holding file
"RTN","EASEZRPP",12,0)
 ;   EACT          - Temporary city variable
"RTN","EASEZRPP",13,0)
 ;   EAX, EAY      - temporary storage variables
"RTN","EASEZRPP",14,0)
 ;   EAV, EAS, EAC - temp storage for vet, spouse, and child variables
"RTN","EASEZRPP",15,0)
 ;
"RTN","EASEZRPP",16,0)
 N ZDATA,EZDATA,EACT,EAX,EAY,EAV,EAS,EAC
"RTN","EASEZRPP",17,0)
 ;
"RTN","EASEZRPP",18,0)
 S ZDATA=$NA(^TMP("EASEZR",$J,2))
"RTN","EASEZRPP",19,0)
 K @ZDATA
"RTN","EASEZRPP",20,0)
 ;
"RTN","EASEZRPP",21,0)
 ; Process Section IIA - Dependent Info
"RTN","EASEZRPP",22,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"IIA",1))
"RTN","EASEZRPP",23,0)
 ;
"RTN","EASEZRPP",24,0)
 ;Spouse's name^maiden name
"RTN","EASEZRPP",25,0)
 S @ZDATA@(1)=$$PROCESS(1.1)_U_$$PROCESS(1.5)
"RTN","EASEZRPP",26,0)
 S @ZDATA@(2)=$$PROCESS(2.1)        ;Child 1's name
"RTN","EASEZRPP",27,0)
 S @ZDATA@(3)=$$PROCESS("3.")       ;Spouse's SSN
"RTN","EASEZRPP",28,0)
 S @ZDATA@(4)=$$PROCESS("4.")       ;Spouse's date of birth
"RTN","EASEZRPP",29,0)
 S @ZDATA@(5)=$$PROCESS("5.")       ;Child 1's date of birth
"RTN","EASEZRPP",30,0)
 S EACT="",EACT=$$PROCESS(6.2)      ;Spouse's city
"RTN","EASEZRPP",31,0)
 I EACT]"" S EACT=EACT_", "   ;if there's a city, add comma & space
"RTN","EASEZRPP",32,0)
 ;Spouse's street^city, state zip
"RTN","EASEZRPP",33,0)
 S @ZDATA@(6)=$$PROCESS(6.1)_U_EACT_$$PROCESS(6.3)_" "_$$PROCESS(6.4)
"RTN","EASEZRPP",34,0)
 ;
"RTN","EASEZRPP",35,0)
 S @ZDATA@(7)=$$PROCESS("7.")       ;Child 1's SSN
"RTN","EASEZRPP",36,0)
 S @ZDATA@(8)=$$PROCESS(8.1)        ;Spouse's phone
"RTN","EASEZRPP",37,0)
 S @ZDATA@(9)=$$PROCESS("9.")       ;Child 1's relationship
"RTN","EASEZRPP",38,0)
 S @ZDATA@(10)=$$PROCESS("10.")     ;Date of marriage to spouse
"RTN","EASEZRPP",39,0)
 S @ZDATA@(11)=$$PROCESS("11.")     ;Date Child 1 became dependent
"RTN","EASEZRPP",40,0)
 ;
"RTN","EASEZRPP",41,0)
 S EAX=$$PROCESS(12.1)              ;Amount contributed to spouse
"RTN","EASEZRPP",42,0)
 S EAY=$$PROCESS(12.2)              ;Amount contributed to Child 1
"RTN","EASEZRPP",43,0)
 S @ZDATA@(12)=$S(EAX="":"",1:$J(EAX,0,2))_U_$S(EAY="":"",1:$J(EAY,0,2))
"RTN","EASEZRPP",44,0)
 ;
"RTN","EASEZRPP",45,0)
 S @ZDATA@(13)=$$PROCESS("13.")     ;Educational expenses for Child 1
"RTN","EASEZRPP",46,0)
 S @ZDATA@(13)=$S(@ZDATA@(13)="":"",1:$J(@ZDATA@(13),0,2))
"RTN","EASEZRPP",47,0)
 ;
"RTN","EASEZRPP",48,0)
 S EAX=$$PROCESS("14.")             ;Child 1 disabled?
"RTN","EASEZRPP",49,0)
 I (EAX=""),(@ZDATA@(2)]"") S EAX="UNKNOWN"
"RTN","EASEZRPP",50,0)
 I @ZDATA@(2)']"" S EAX=""
"RTN","EASEZRPP",51,0)
 S @ZDATA@(14)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZRPP",52,0)
 S EAX=$$PROCESS("15.")             ;Child 1 attend school last year?
"RTN","EASEZRPP",53,0)
 I (EAX=""),(@ZDATA@(2)]"") S EAX="UNKNOWN"
"RTN","EASEZRPP",54,0)
        I @ZDATA@(2)']"" S EAX=""
"RTN","EASEZRPP",55,0)
 S @ZDATA@(15)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZRPP",56,0)
 ;
"RTN","EASEZRPP",57,0)
 ; Process Section IIC - Previous Calendar Year Gross Annual Income
"RTN","EASEZRPP",58,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"IIC",1))
"RTN","EASEZRPP",59,0)
 S EAV=$$PROCESS(1.4),EAS=$$PROCESS(1.5)     ;Vet & spouse gross income
"RTN","EASEZRPP",60,0)
 S @ZDATA@("2C1")=$S(EAV="":"",1:$J(EAV,0,2))_U_$S(EAS="":"",1:$J(EAS,0,2))
"RTN","EASEZRPP",61,0)
 S EAV=$$PROCESS(2.1),EAS=$$PROCESS(2.2)     ;Vet & spouse other income
"RTN","EASEZRPP",62,0)
 S @ZDATA@("2C2")=$S(EAV="":"",1:$J(EAV,0,2))_U_$S(EAS="":"",1:$J(EAS,0,2))
"RTN","EASEZRPP",63,0)
 S EAV=$$PROCESS(3.1),EAS=$$PROCESS(3.2)     ;Vet & spouse net income
"RTN","EASEZRPP",64,0)
 S @ZDATA@("2C3")=$S(EAV="":"",1:$J(EAV,0,2))_U_$S(EAS="":"",1:$J(EAS,0,2))
"RTN","EASEZRPP",65,0)
 ;
"RTN","EASEZRPP",66,0)
 S @ZDATA@(999)=$$PROCESS(999)               ;Vet income year
"RTN","EASEZRPP",67,0)
 I $D(@EZDATA@(998)) D
"RTN","EASEZRPP",68,0)
 . S @ZDATA@(998)=$$PROCESS(998)             ;Vet Declines To Give Info
"RTN","EASEZRPP",69,0)
 ;
"RTN","EASEZRPP",70,0)
 ;Since Child amounts in Section IIC are for ALL dependents,
"RTN","EASEZRPP",71,0)
 ;get just Child 1 amounts from Section IIF - Dependent Gross Incomes
"RTN","EASEZRPP",72,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"IIF",1))
"RTN","EASEZRPP",73,0)
 S EAC=$$PROCESS(7.1)                            ;Child 1 gross income
"RTN","EASEZRPP",74,0)
 S @ZDATA@("2C1")=@ZDATA@("2C1")_U_$S(EAC="":"",1:$J(EAC,0,2))
"RTN","EASEZRPP",75,0)
 S EAC=$$PROCESS(7.2)                            ;Child 1 net income
"RTN","EASEZRPP",76,0)
 S @ZDATA@("2C3")=@ZDATA@("2C3")_U_$S(EAC="":"",1:$J(EAC,0,2))
"RTN","EASEZRPP",77,0)
 S EAC=$$PROCESS(7.3)                            ;Child 1 other income
"RTN","EASEZRPP",78,0)
 S @ZDATA@("2C2")=@ZDATA@("2C2")_U_$S(EAC="":"",1:$J(EAC,0,2))
"RTN","EASEZRPP",79,0)
 ;
"RTN","EASEZRPP",80,0)
 ; Process Section IID - Previous Calendar Year Expenses
"RTN","EASEZRPP",81,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"IID",1))
"RTN","EASEZRPP",82,0)
 ;Medical expenses
"RTN","EASEZRPP",83,0)
 S EAX=$$PROCESS("1."),@ZDATA@("2D1")=$S(EAX="":"",1:$J(EAX,0,2))
"RTN","EASEZRPP",84,0)
 ;Funeral expenses
"RTN","EASEZRPP",85,0)
 S EAX=$$PROCESS("2."),@ZDATA@("2D2")=$S(EAX="":"",1:$J(EAX,0,2))
"RTN","EASEZRPP",86,0)
 ;Educational expenses
"RTN","EASEZRPP",87,0)
 S EAX=$$PROCESS("3."),@ZDATA@("2D3")=$S(EAX="":"",1:$J(EAX,0,2))
"RTN","EASEZRPP",88,0)
 ;
"RTN","EASEZRPP",89,0)
 ; Process Section IIE - Previous Calendar Year Net Worth
"RTN","EASEZRPP",90,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"IIE",1))
"RTN","EASEZRPP",91,0)
 S EAV=$$PROCESS("1."),EAS=$$PROCESS(1.2)  ;Vet & spouse cash
"RTN","EASEZRPP",92,0)
 S @ZDATA@("2E1")=$S(EAV="":"",1:$J(EAV,0,2))_U_$S(EAS="":"",1:$J(EAS,0,2))
"RTN","EASEZRPP",93,0)
 S EAV=$$PROCESS("2."),EAS=$$PROCESS(2.2)  ;Vet & spouse land value
"RTN","EASEZRPP",94,0)
 S @ZDATA@("2E2")=$S(EAV="":"",1:$J(EAV,0,2))_U_$S(EAS="":"",1:$J(EAS,0,2))
"RTN","EASEZRPP",95,0)
 S EAV=$$PROCESS("3."),EAS=$$PROCESS(3.2)  ;Vet & spouse other property
"RTN","EASEZRPP",96,0)
 S @ZDATA@("2E3")=$S(EAV="":"",1:$J(EAV,0,2))_U_$S(EAS="":"",1:$J(EAS,0,2))
"RTN","EASEZRPP",97,0)
 ;
"RTN","EASEZRPP",98,0)
 ;Since Child amounts in Section IIE are for ALL dependents,
"RTN","EASEZRPP",99,0)
 ;get just Child 1 amounts from Section IIG - Dependent Net Worths
"RTN","EASEZRPP",100,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"IIG",1))
"RTN","EASEZRPP",101,0)
 S EAC=$$PROCESS(9.1)                           ;Child 1 cash
"RTN","EASEZRPP",102,0)
 S @ZDATA@("2E1")=@ZDATA@("2E1")_U_$S(EAC="":"",1:$J(EAC,0,2))
"RTN","EASEZRPP",103,0)
 S EAC=$$PROCESS(9.2)                           ;Child 1 land value
"RTN","EASEZRPP",104,0)
 S @ZDATA@("2E2")=@ZDATA@("2E2")_U_$S(EAC="":"",1:$J(EAC,0,2))
"RTN","EASEZRPP",105,0)
 S EAC=$$PROCESS(9.3)                           ;Child 1 other property
"RTN","EASEZRPP",106,0)
 S @ZDATA@("2E3")=@ZDATA@("2E3")_U_$S(EAC="":"",1:$J(EAC,0,2))
"RTN","EASEZRPP",107,0)
 ;
"RTN","EASEZRPP",108,0)
 Q
"RTN","EASEZRPP",109,0)
 ;
"RTN","EASEZRPP",110,0)
PAGEDFF(EADEP) ;  Additional dependent financial page(s) for Section IIF
"RTN","EASEZRPP",111,0)
 ; Called from EN^EASEZRPF
"RTN","EASEZRPP",112,0)
 N ZDATA,EZDATA,EANAME,EAGROSS,EANET,EAOTHER
"RTN","EASEZRPP",113,0)
 ;
"RTN","EASEZRPP",114,0)
 S ZDATA=$NA(^TMP("EASEZR",$J,"DFF",EADEP))
"RTN","EASEZRPP",115,0)
 K @ZDATA
"RTN","EASEZRPP",116,0)
 ;
"RTN","EASEZRPP",117,0)
 ; Process Section IIF
"RTN","EASEZRPP",118,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"IIF",EADEP))
"RTN","EASEZRPP",119,0)
 ;
"RTN","EASEZRPP",120,0)
 S EANAME=$$PROCESS("7.")   ;Child number (2 through 19)
"RTN","EASEZRPP",121,0)
 S EAGROSS=$$PROCESS(7.1),EANET=$$PROCESS(7.2),EAOTHER=$$PROCESS(7.3)
"RTN","EASEZRPP",122,0)
 ;Child #^gross income^net income^other income
"RTN","EASEZRPP",123,0)
 S @ZDATA@(7)=EANAME_U_$S(EAGROSS="":"",1:$J(EAGROSS,0,2))_U_$S(EANET="":"",1:$J(EANET,0,2))_U_$S(EAOTHER="":"",1:$J(EAOTHER,0,2))
"RTN","EASEZRPP",124,0)
 ;
"RTN","EASEZRPP",125,0)
 Q
"RTN","EASEZRPP",126,0)
 ;
"RTN","EASEZRPP",127,0)
PAGEDFG(EADEP)  ; Additional dependent financial page(s) for Section IIG
"RTN","EASEZRPP",128,0)
 ; Called from EN^EASEZRPF
"RTN","EASEZRPP",129,0)
 N ZDATA,EZDATA,EANAME,EACASH,EAREAL,EAOTHER
"RTN","EASEZRPP",130,0)
 ;
"RTN","EASEZRPP",131,0)
 S ZDATA=$NA(^TMP("EASEZR",$J,"DFG",EADEP))
"RTN","EASEZRPP",132,0)
 K @ZDATA
"RTN","EASEZRPP",133,0)
 ;
"RTN","EASEZRPP",134,0)
 ; Process Section IIG
"RTN","EASEZRPP",135,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"IIG",EADEP))
"RTN","EASEZRPP",136,0)
 ;
"RTN","EASEZRPP",137,0)
 S EANAME=$$PROCESS("9.")   ;Child number (2 through 19)
"RTN","EASEZRPP",138,0)
 S EACASH=$$PROCESS(9.1),EAREAL=$$PROCESS(9.2),EAOTHER=$$PROCESS(9.3)
"RTN","EASEZRPP",139,0)
 ;Child #^cash^land value^other property
"RTN","EASEZRPP",140,0)
 S @ZDATA@(9)=EANAME_U_$S(EACASH="":"",1:$J(EACASH,0,2))_U_$S(EAREAL="":"",1:$J(EAREAL,0,2))_U_$S(EAOTHER="":"",1:$J(EAOTHER,0,2))
"RTN","EASEZRPP",141,0)
 ;
"RTN","EASEZRPP",142,0)
 Q
"RTN","EASEZRPP",143,0)
 ;
"RTN","EASEZRPP",144,0)
PROCESS(KEY) ; Process data value from EZRTEMP array, take #712 value
"RTN","EASEZRPP",145,0)
 ; if it's accepted, otherwise take the Patient File value
"RTN","EASEZRPP",146,0)
 ;
"RTN","EASEZRPP",147,0)
 N EAV,RSLT
"RTN","EASEZRPP",148,0)
 ;
"RTN","EASEZRPP",149,0)
 I '$D(@EZDATA@(KEY)) G PQ
"RTN","EASEZRPP",150,0)
 S EAV=@EZDATA@(KEY)
"RTN","EASEZRPP",151,0)
 S RSLT=$S(+$P(EAV,U,3):$P(EAV,U,2),1:$P(EAV,U,5))
"RTN","EASEZRPP",152,0)
PQ Q $G(RSLT)
"RTN","EASEZRPU")
0^22^B44900402
"RTN","EASEZRPU",1,0)
EASEZRPU ;ALB/AMA - Print utility for 10-10EZR
"RTN","EASEZRPU",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**57**;Mar 15, 2001
"RTN","EASEZRPU",3,0)
 ;
"RTN","EASEZRPU",4,0)
 Q
"RTN","EASEZRPU",5,0)
 ;
"RTN","EASEZRPU",6,0)
PAGE1 ;This function retrieves and formats the page 1 application data from
"RTN","EASEZRPU",7,0)
 ;the 1010EZ Holding File, #712, for the printed version of the VistA
"RTN","EASEZRPU",8,0)
 ;10-10EZR form.  If the holding file entry has not been accepted, and
"RTN","EASEZRPU",9,0)
 ;a vista entry is available, the vista entry is printed.
"RTN","EASEZRPU",10,0)
 ;   Called from EN^EASEZRPF
"RTN","EASEZRPU",11,0)
 ;
"RTN","EASEZRPU",12,0)
 ;The ^TMP("EZRTEMP") global is built in SETUP^EASEZRPF and
"RTN","EASEZRPU",13,0)
 ;remains until the printed form is complete.
"RTN","EASEZRPU",14,0)
 ; Variables
"RTN","EASEZRPU",15,0)
 ;   ZDATA   - references TMP global for output data
"RTN","EASEZRPU",16,0)
 ;   EZDATA  - references available data from 1010EZ holding file
"RTN","EASEZRPU",17,0)
 ;   EASTR   - Temporary String data variable
"RTN","EASEZRPU",18,0)
 ;   EAX,EAY - Temporary data variables
"RTN","EASEZRPU",19,0)
 ;   EACT    - Temporary city variable
"RTN","EASEZRPU",20,0)
 ;
"RTN","EASEZRPU",21,0)
 ;THIS ROUTINE WAS COPIED FROM EASEZP6U, AND MODIFIED TO
"RTN","EASEZRPU",22,0)
 ;PROCESS JUST THE DATA ELEMENTS NEEDED FOR THE EZR FORM
"RTN","EASEZRPU",23,0)
 ;
"RTN","EASEZRPU",24,0)
 N ZDATA,EZDATA,EASTR,EAX,EAY,EACT
"RTN","EASEZRPU",25,0)
 ;
"RTN","EASEZRPU",26,0)
 S ZDATA=$NA(^TMP("EASEZR",$J,1))
"RTN","EASEZRPU",27,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"I",1))
"RTN","EASEZRPU",28,0)
 K @ZDATA
"RTN","EASEZRPU",29,0)
 ;
"RTN","EASEZRPU",30,0)
 S @ZDATA@(2)=$$PROCESS(2.1)                 ;Vet's name
"RTN","EASEZRPU",31,0)
 S @ZDATA@(3)=$E($$PROCESS("3."),1,35)       ;Other names used
"RTN","EASEZRPU",32,0)
 S @ZDATA@(4)=$$PROCESS("4.")                ;Gender
"RTN","EASEZRPU",33,0)
 ;
"RTN","EASEZRPU",34,0)
 S @ZDATA@(5)=$$PROCESS("5.")                ;SSN
"RTN","EASEZRPU",35,0)
 S @ZDATA@(7)=$$PROCESS("7.")                ;Date of birth
"RTN","EASEZRPU",36,0)
 S @ZDATA@("9A")=$E($$PROCESS("9A."),1,35)   ;Address
"RTN","EASEZRPU",37,0)
 S @ZDATA@("9B")=$E($$PROCESS("9B."),1,32)   ;City
"RTN","EASEZRPU",38,0)
 S @ZDATA@("9C")=$$PROCESS("9C.")            ;State
"RTN","EASEZRPU",39,0)
 S @ZDATA@("9D")=$$PROCESS("9D.")            ;Zip
"RTN","EASEZRPU",40,0)
 S @ZDATA@("9E")=$$PROCESS("9E.")            ;County
"RTN","EASEZRPU",41,0)
 S @ZDATA@(10)=$$PROCESS("10.1")             ;Home phone
"RTN","EASEZRPU",42,0)
 S @ZDATA@("11A")=$$PROCESS("11A.")          ;E-mail
"RTN","EASEZRPU",43,0)
 S @ZDATA@("11G")=$$PROCESS("11A1.")         ;Cell phone number
"RTN","EASEZRPU",44,0)
 S @ZDATA@("11H")=$$PROCESS("11A3.")         ;Pager number
"RTN","EASEZRPU",45,0)
 S @ZDATA@(12)=$$PROCESS("12.")              ;Marital status
"RTN","EASEZRPU",46,0)
 ;
"RTN","EASEZRPU",47,0)
 K EAX
"RTN","EASEZRPU",48,0)
 F EAX="14J","14K","14L" D     ;Medicare eligible, Enrolled in Part A/B?
"RTN","EASEZRPU",49,0)
 . S EAY=$$PROCESS(EAX_".")
"RTN","EASEZRPU",50,0)
 . S @ZDATA@(EAX)=$S(EAY="Y"!(EAY="YES"):"YES",EAY="N"!(EAY="NO"):"NO",EAY="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZRPU",51,0)
 ;
"RTN","EASEZRPU",52,0)
 S @ZDATA@("14K1")=$$PROCESS("14K1.")   ;Medicare Part A effective date
"RTN","EASEZRPU",53,0)
 S @ZDATA@("14L1")=$$PROCESS("14L1.")   ;Medicare Part B effective date
"RTN","EASEZRPU",54,0)
 S @ZDATA@("14M")=$$PROCESS("14M.")     ;Medicare claim number
"RTN","EASEZRPU",55,0)
 S @ZDATA@("14N")=$$PROCESS("14N.")     ;Name on Medicare card
"RTN","EASEZRPU",56,0)
 ;
"RTN","EASEZRPU",57,0)
 ;Vet's employment status^Date of retirement
"RTN","EASEZRPU",58,0)
 S @ZDATA@("15A")=$$PROCESS("15A.1")_U_$$PROCESS("15A.2")
"RTN","EASEZRPU",59,0)
 K EAX
"RTN","EASEZRPU",60,0)
 S EAX=$E($$PROCESS("15B.1"),1,30)            ;Company's name
"RTN","EASEZRPU",61,0)
 S EACT="",EACT=$E($$PROCESS("15B.3"),1,30)   ;Company's city
"RTN","EASEZRPU",62,0)
 I EACT]"" S EACT=EACT_", "   ;if there's a city, add comma & space
"RTN","EASEZRPU",63,0)
 ;Company's name^Street^City, State Zip^Phone
"RTN","EASEZRPU",64,0)
 S EAX=EAX_U_$E($$PROCESS("15B.2"),1,30)_U_EACT_$$PROCESS("15B.4")_" "_$E($$PROCESS("15B.5"),1,10)_U_$$PROCESS("15B.6")
"RTN","EASEZRPU",65,0)
 S @ZDATA@("15B")=EAX
"RTN","EASEZRPU",66,0)
 ;
"RTN","EASEZRPU",67,0)
 ;Spouse's employment status^Date of retirement
"RTN","EASEZRPU",68,0)
 S @ZDATA@("16A")=$$PROCESS("16A.1")_U_$$PROCESS("16A.2")
"RTN","EASEZRPU",69,0)
 ;
"RTN","EASEZRPU",70,0)
 K EAX
"RTN","EASEZRPU",71,0)
 S EAX=$E($$PROCESS("16B.1"),1,30)            ;Spouse's company's name
"RTN","EASEZRPU",72,0)
 S EACT="",EACT=$E($$PROCESS("16B.3"),1,30)   ;Spouse's company's city
"RTN","EASEZRPU",73,0)
 I EACT]"" S EACT=EACT_", "    ;if there's a city, add comma & space
"RTN","EASEZRPU",74,0)
 ;Spouse's company's name^Street^City, State Zip^Phone
"RTN","EASEZRPU",75,0)
 S EAX=EAX_U_$E($$PROCESS("16B.2"),1,30)_U_EACT_$$PROCESS("16B.4")_" "_$E($$PROCESS("16B.5"),1,10)_U_$$PROCESS("16B.6")
"RTN","EASEZRPU",76,0)
 S @ZDATA@("16B")=EAX
"RTN","EASEZRPU",77,0)
 ;
"RTN","EASEZRPU",78,0)
 S EAX=$$PROCESS("17.")   ;Covered by health insurance?
"RTN","EASEZRPU",79,0)
 S @ZDATA@(17)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZRPU",80,0)
 ;
"RTN","EASEZRPU",81,0)
 S @ZDATA@("17A")=$$PROCESS("17A.")           ;Insurance company's name
"RTN","EASEZRPU",82,0)
 S @ZDATA@("17B")=$E($$PROCESS("17B."),1,30)  ;Name of policy holder
"RTN","EASEZRPU",83,0)
 S @ZDATA@("17C")=$$PROCESS("17C.")           ;Policy number
"RTN","EASEZRPU",84,0)
 S @ZDATA@("17D")=$$PROCESS("17D.")           ;Group code
"RTN","EASEZRPU",85,0)
 ;
"RTN","EASEZRPU",86,0)
 S EACT="",EACT=$$PROCESS("17F.")             ;Insurance company's city
"RTN","EASEZRPU",87,0)
 I EACT]"" S EACT=EACT_", "    ;if there's a city, add comma & space
"RTN","EASEZRPU",88,0)
 ;Insurance company's street^city, state zip
"RTN","EASEZRPU",89,0)
 S @ZDATA@("17E")=$$PROCESS("17E.")_U_EACT_$$PROCESS("17G.")_" "_$$PROCESS("17H.")
"RTN","EASEZRPU",90,0)
 S @ZDATA@("17I")=$$PROCESS("17I.")           ;Insurance company's phone
"RTN","EASEZRPU",91,0)
 ;
"RTN","EASEZRPU",92,0)
 S EACT="",EACT=$E($$PROCESS("19A.4"),1,30)   ;Next-of-kin's city
"RTN","EASEZRPU",93,0)
 I EACT]"" S EACT=EACT_", "    ;if there's a city, add comma & space
"RTN","EASEZRPU",94,0)
 ;Next-of-kin's name^street^city, state zip^relationship
"RTN","EASEZRPU",95,0)
 S @ZDATA@("19A")=$$PROCESS("19A.1")_U_$E($$PROCESS("19A.3"),1,30)_U_EACT_$$PROCESS("19A.5")_" "_$E($$PROCESS("19A.6"),1,10)_U_$$PROCESS("19A.7")
"RTN","EASEZRPU",96,0)
 S @ZDATA@("19B")=$$PROCESS("19B.1")          ;Next-of-kin's home phone
"RTN","EASEZRPU",97,0)
 S @ZDATA@("19C")=$$PROCESS("19C.1")          ;Next-of-kin's work phone
"RTN","EASEZRPU",98,0)
 ;
"RTN","EASEZRPU",99,0)
 S EACT="",EACT=$E($$PROCESS("20A.4"),1,30)   ;Emergency contact's city
"RTN","EASEZRPU",100,0)
 I EACT]"" S EACT=EACT_", "    ;if there's a city, add comma & space
"RTN","EASEZRPU",101,0)
 ;Emergency contact's name^street^city, state zip^relationship
"RTN","EASEZRPU",102,0)
 S @ZDATA@("20A")=$$PROCESS("20A.1")_U_$E($$PROCESS("20A.3"),1,30)_U_EACT_$$PROCESS("20A.5")_" "_$E($$PROCESS("20A.6"),1,10)_U_$$PROCESS("20A.7")
"RTN","EASEZRPU",103,0)
 S @ZDATA@("20B")=$$PROCESS("20B.1")          ;EC's home phone
"RTN","EASEZRPU",104,0)
 S @ZDATA@("20C")=$$PROCESS("20C.1")          ;EC's work phone
"RTN","EASEZRPU",105,0)
 S @ZDATA@("21")=$$PROCESS("21.")             ;Who receives property?
"RTN","EASEZRPU",106,0)
 ;
"RTN","EASEZRPU",107,0)
 Q
"RTN","EASEZRPU",108,0)
 ;
"RTN","EASEZRPU",109,0)
PAGEI(EAINS) ;  Additional Insurance pages
"RTN","EASEZRPU",110,0)
 ; Called from EN^EASEZRPF
"RTN","EASEZRPU",111,0)
 N ZDATA,EZDATA,EACT
"RTN","EASEZRPU",112,0)
 ;
"RTN","EASEZRPU",113,0)
 S ZDATA=$NA(^TMP("EASEZR",$J,"I",EAINS))
"RTN","EASEZRPU",114,0)
 K @ZDATA
"RTN","EASEZRPU",115,0)
 ;
"RTN","EASEZRPU",116,0)
 ; Process Section IA
"RTN","EASEZRPU",117,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"IA",EAINS))
"RTN","EASEZRPU",118,0)
 ;
"RTN","EASEZRPU",119,0)
 S @ZDATA@("17A")=$$PROCESS("17A.")           ;Insurance company's name
"RTN","EASEZRPU",120,0)
 S @ZDATA@("17B")=$E($$PROCESS("17B."),1,30)  ;Name of policy holder
"RTN","EASEZRPU",121,0)
 S @ZDATA@("17C")=$$PROCESS("17C.")           ;Policy number
"RTN","EASEZRPU",122,0)
 S @ZDATA@("17D")=$$PROCESS("17D.")           ;Group code
"RTN","EASEZRPU",123,0)
 S EACT="",EACT=$$PROCESS("17F.")             ;Insurance company's city
"RTN","EASEZRPU",124,0)
 I EACT]"" S EACT=EACT_", "    ;if there's a street, add comma & space
"RTN","EASEZRPU",125,0)
 ;Health insurance company's street^city, state zip
"RTN","EASEZRPU",126,0)
 S @ZDATA@("17E")=$$PROCESS("17E.")_U_EACT_$$PROCESS("17G.")_" "_$$PROCESS("17H.")
"RTN","EASEZRPU",127,0)
 S @ZDATA@("17I")=$$PROCESS("17I.")           ;Insurance company's phone
"RTN","EASEZRPU",128,0)
 ;
"RTN","EASEZRPU",129,0)
 Q
"RTN","EASEZRPU",130,0)
 ;
"RTN","EASEZRPU",131,0)
PAGEN(EADEP) ;  Additional dependent page(s)
"RTN","EASEZRPU",132,0)
 ; Called from EN^EASEZRPF
"RTN","EASEZRPU",133,0)
 N ZDATA,EZDATA,EAX
"RTN","EASEZRPU",134,0)
 ;
"RTN","EASEZRPU",135,0)
 S ZDATA=$NA(^TMP("EASEZR",$J,"D",EADEP))
"RTN","EASEZRPU",136,0)
 K @ZDATA
"RTN","EASEZRPU",137,0)
 ;
"RTN","EASEZRPU",138,0)
 ; Process Section IIB
"RTN","EASEZRPU",139,0)
 S EZDATA=$NA(^TMP("EZRTEMP",$J,"IIB",EADEP))
"RTN","EASEZRPU",140,0)
 ;
"RTN","EASEZRPU",141,0)
 S @ZDATA@(2)=$$PROCESS(1.1)                      ;Child's name
"RTN","EASEZRPU",142,0)
 S @ZDATA@(5)=$$PROCESS("3.")                     ;Date of birth
"RTN","EASEZRPU",143,0)
 S @ZDATA@(7)=$$PROCESS("2.")                     ;SSN
"RTN","EASEZRPU",144,0)
 S @ZDATA@(9)=$$PROCESS("4.")                     ;Relationship
"RTN","EASEZRPU",145,0)
 S @ZDATA@(11)=$$PROCESS("5.")                    ;Date of dependency
"RTN","EASEZRPU",146,0)
 S EAX=$$PROCESS("6.")                            ;Amount contributed
"RTN","EASEZRPU",147,0)
 S @ZDATA@(12)=U_$S(EAX="":"",1:$J(EAX,0,2))
"RTN","EASEZRPU",148,0)
 S EAX=$$PROCESS("7.")                            ;Education expenses
"RTN","EASEZRPU",149,0)
 S @ZDATA@(13)=$S(EAX="":"",1:$J(EAX,0,2))
"RTN","EASEZRPU",150,0)
 ;
"RTN","EASEZRPU",151,0)
 S EAX=$$PROCESS("8.")                            ;Permanently disabled?
"RTN","EASEZRPU",152,0)
 S @ZDATA@(14)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZRPU",153,0)
 S EAX=$$PROCESS("9.")                            ;School last year?
"RTN","EASEZRPU",154,0)
 S @ZDATA@(15)=$S(EAX="Y"!(EAX="YES"):"YES",EAX="N"!(EAX="NO"):"NO",EAX="UNKNOWN":"UNKNOWN",1:"")
"RTN","EASEZRPU",155,0)
 ;
"RTN","EASEZRPU",156,0)
 Q
"RTN","EASEZRPU",157,0)
 ;
"RTN","EASEZRPU",158,0)
PROCESS(KEY) ; Process data value from EZRTEMP array, take #712 value
"RTN","EASEZRPU",159,0)
 ; if it's accepted, otherwise take the Patient File value
"RTN","EASEZRPU",160,0)
 ;
"RTN","EASEZRPU",161,0)
 N EAV,RSLT
"RTN","EASEZRPU",162,0)
 ;
"RTN","EASEZRPU",163,0)
 I '$D(@EZDATA@(KEY)) G PQ
"RTN","EASEZRPU",164,0)
 S EAV=@EZDATA@(KEY)
"RTN","EASEZRPU",165,0)
 S RSLT=$S(+$P(EAV,U,3):$P(EAV,U,2),1:$P(EAV,U,5))
"RTN","EASEZRPU",166,0)
PQ Q $G(RSLT)
"RTN","EASEZT2")
0^6^B31810763
"RTN","EASEZT2",1,0)
EASEZT2 ;ALB/jap - Data Transformation Logic for 1010EZ Processing ;10/12/00  13:08
"RTN","EASEZT2",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**51,57**;Mar 15, 2001
"RTN","EASEZT2",3,0)
 ;
"RTN","EASEZT2",4,0)
WORKPH(EASAPP,TYPE) ;
"RTN","EASEZT2",5,0)
 ;input  EASAPP = application ien in file #712
"RTN","EASEZT2",6,0)
 ;         TYPE = "APPLICANT", "SPOUSE", "NEXT-OF-KIN", "E-CONTACT",
"RTN","EASEZT2",7,0)
 ;output  PHONE = formatted work phone or null;
"RTN","EASEZT2",8,0)
 ;                example: (432)987-1234 X123
"RTN","EASEZT2",9,0)
 ;
"RTN","EASEZT2",10,0)
 N PHONE,MULTIPLE,AC,NUM,EXT,KEY,T
"RTN","EASEZT2",11,0)
 S PHONE="",MULTIPLE=1
"RTN","EASEZT2",12,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" WORK PHONE AREA CODE") I KEY D
"RTN","EASEZT2",13,0)
 .S AC=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZT2",14,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" WORK PHONE NUMBER") I KEY D
"RTN","EASEZT2",15,0)
 .S NUM=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZT2",16,0)
 .F T=1,2 S ^TMP("EZDATA",$J,KEY,MULTIPLE,T)=""
"RTN","EASEZT2",17,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" WORK PHONE EXTENSION") I KEY D
"RTN","EASEZT2",18,0)
 .S EXT=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZT2",19,0)
 .F T=1,2 S ^TMP("EZDATA",$J,KEY,MULTIPLE,T)=""
"RTN","EASEZT2",20,0)
 I AC'="" S AC="("_AC_")"
"RTN","EASEZT2",21,0)
 I NUM="-" S NUM=""
"RTN","EASEZT2",22,0)
 I NUM'="" S:NUM'["-" NUM=$E(NUM,1,3)_"-"_$E(NUM,4,7)
"RTN","EASEZT2",23,0)
 I EXT'="" S EXT=" X"_EXT
"RTN","EASEZT2",24,0)
 I NUM="" Q PHONE
"RTN","EASEZT2",25,0)
 S PHONE=AC_NUM_EXT
"RTN","EASEZT2",26,0)
 Q PHONE
"RTN","EASEZT2",27,0)
 ;
"RTN","EASEZT2",28,0)
HOMEPH(EASAPP,TYPE) ;
"RTN","EASEZT2",29,0)
 ;input  EASAPP = application ien in file #712
"RTN","EASEZT2",30,0)
 ;         TYPE = "APPLICANT", "SPOUSE", "NEXT-OF-KIN", "E-CONTACT"
"RTN","EASEZT2",31,0)
 ;output  PHONE = formatted home phone;
"RTN","EASEZT2",32,0)
 ;                example: (432)987-1234
"RTN","EASEZT2",33,0)
 ;
"RTN","EASEZT2",34,0)
 N PHONE,MULTIPLE,AC,NUM,KEY,T
"RTN","EASEZT2",35,0)
 S PHONE="",MULTIPLE=1
"RTN","EASEZT2",36,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" HOME PHONE AREA CODE") I KEY D
"RTN","EASEZT2",37,0)
 .S AC=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZT2",38,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" HOME PHONE NUMBER") I KEY D
"RTN","EASEZT2",39,0)
 .S NUM=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZT2",40,0)
 .F T=1,2 S ^TMP("EZDATA",$J,KEY,MULTIPLE,T)=""
"RTN","EASEZT2",41,0)
 I AC'="" S AC="("_AC_")"
"RTN","EASEZT2",42,0)
 I NUM="-" S NUM=""
"RTN","EASEZT2",43,0)
 I NUM'="" S:NUM'["-" NUM=$E(NUM,1,3)_"-"_$E(NUM,4,7)
"RTN","EASEZT2",44,0)
 I NUM="" Q PHONE
"RTN","EASEZT2",45,0)
 S PHONE=AC_NUM
"RTN","EASEZT2",46,0)
 Q PHONE
"RTN","EASEZT2",47,0)
 ;
"RTN","EASEZT2",48,0)
INSPH(EASAPP,TYPE,MULTIPLE) ;
"RTN","EASEZT2",49,0)
 ;input  EASAPP = application ien in file #712
"RTN","EASEZT2",50,0)
 ;         TYPE = "APPLICANT", "OTHER(N)"
"RTN","EASEZT2",51,0)
 ;     MULTIPLE = EASMULT Value def=1
"RTN","EASEZT2",52,0)
 ;output  PHONE = formatted home phone;
"RTN","EASEZT2",53,0)
 ;                example: (432)987-1234
"RTN","EASEZT2",54,0)
 ;
"RTN","EASEZT2",55,0)
 N PHONE,AC,NUM,KEY,T
"RTN","EASEZT2",56,0)
 S PHONE="",MULTIPLE=+$G(MULTIPLE) I MULTIPLE<2 S MULTIPLE=1
"RTN","EASEZT2",57,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" INSURANCE PHONE AREA CODE") I KEY D
"RTN","EASEZT2",58,0)
 .S AC=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZT2",59,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" INSURANCE PHONE NUMBER") I KEY D
"RTN","EASEZT2",60,0)
 .S NUM=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZT2",61,0)
 .F T=1,2 S ^TMP("EZDATA",$J,KEY,MULTIPLE,T)=""
"RTN","EASEZT2",62,0)
 I AC'="" S AC="("_AC_")"
"RTN","EASEZT2",63,0)
 I NUM="-" S NUM=""
"RTN","EASEZT2",64,0)
 I NUM'="" S:NUM'["-" NUM=$E(NUM,1,3)_"-"_$E(NUM,4,7)
"RTN","EASEZT2",65,0)
 I NUM="" Q PHONE
"RTN","EASEZT2",66,0)
 S PHONE=AC_NUM
"RTN","EASEZT2",67,0)
 Q PHONE
"RTN","EASEZT2",68,0)
 ;
"RTN","EASEZT2",69,0)
EMPLPH(EASAPP,TYPE) ;
"RTN","EASEZT2",70,0)
 ;input  EASAPP = application ien in file #712
"RTN","EASEZT2",71,0)
 ;         TYPE = "APPLICANT", "SPOUSE" 
"RTN","EASEZT2",72,0)
 ;output  PHONE = formatted employer phone or null;
"RTN","EASEZT2",73,0)
 ;                example: (432)987-1234 X123
"RTN","EASEZT2",74,0)
 ;
"RTN","EASEZT2",75,0)
 N PHONE,MULTIPLE,AC,NUM,EXT,KET,T
"RTN","EASEZT2",76,0)
 S PHONE="",MULTIPLE=1
"RTN","EASEZT2",77,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" EMPLOYER PHONE AREA CODE") I KEY D
"RTN","EASEZT2",78,0)
 .S AC=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZT2",79,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" EMPLOYER PHONE NUMBER") I KEY D
"RTN","EASEZT2",80,0)
 .S NUM=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZT2",81,0)
 .F T=1,2 S ^TMP("EZDATA",$J,KEY,MULTIPLE,T)=""
"RTN","EASEZT2",82,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" EMPLOYER PHONE EXTENSION") I KEY D
"RTN","EASEZT2",83,0)
 .S EXT=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZT2",84,0)
 .F T=1,2 S ^TMP("EZDATA",$J,KEY,MULTIPLE,T)=""
"RTN","EASEZT2",85,0)
 I AC'="" S AC="("_AC_")"
"RTN","EASEZT2",86,0)
 I NUM="-" S NUM=""
"RTN","EASEZT2",87,0)
 I NUM'="" S:NUM'["-" NUM=$E(NUM,1,3)_"-"_$E(NUM,4,7)
"RTN","EASEZT2",88,0)
 I EXT'="" S EXT=" X"_EXT
"RTN","EASEZT2",89,0)
 I NUM="" Q PHONE
"RTN","EASEZT2",90,0)
 S PHONE=AC_NUM_EXT
"RTN","EASEZT2",91,0)
 Q PHONE
"RTN","EASEZT2",92,0)
 ;
"RTN","EASEZT2",93,0)
CELLPH(EASAPP,TYPE) ;
"RTN","EASEZT2",94,0)
 ;input  EASAPP = application ien in file #712
"RTN","EASEZT2",95,0)
 ;         TYPE = "APPLICANT"
"RTN","EASEZT2",96,0)
 ;output  PHONE = formatted cell phone or null;
"RTN","EASEZT2",97,0)
 ;                example: (432)987-1234
"RTN","EASEZT2",98,0)
 ;
"RTN","EASEZT2",99,0)
 N PHONE,MULTIPLE,AC,NUM,EXT,KEY,T
"RTN","EASEZT2",100,0)
 S PHONE="",MULTIPLE=1
"RTN","EASEZT2",101,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" CELLULAR PHONE AREA CODE") I KEY D
"RTN","EASEZT2",102,0)
 .S AC=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZT2",103,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" CELLULAR PHONE NUMBER") I KEY D
"RTN","EASEZT2",104,0)
 .S NUM=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZT2",105,0)
 .F T=1,2 S ^TMP("EZDATA",$J,KEY,MULTIPLE,T)=""
"RTN","EASEZT2",106,0)
 I AC'="" S AC="("_AC_")"
"RTN","EASEZT2",107,0)
 I NUM="-" S NUM=""
"RTN","EASEZT2",108,0)
 I NUM'="" S:NUM'["-" NUM=$E(NUM,1,3)_"-"_$E(NUM,4,7)
"RTN","EASEZT2",109,0)
 I NUM="" Q PHONE
"RTN","EASEZT2",110,0)
 S PHONE=AC_NUM
"RTN","EASEZT2",111,0)
 Q PHONE
"RTN","EASEZT2",112,0)
 ;
"RTN","EASEZT2",113,0)
PAGERPH(EASAPP,TYPE) ;
"RTN","EASEZT2",114,0)
 ;input  EASAPP = application ien in file #712
"RTN","EASEZT2",115,0)
 ;         TYPE = "APPLICANT"
"RTN","EASEZT2",116,0)
 ;output  PHONE = formatted pager phone or null;
"RTN","EASEZT2",117,0)
 ;                example: (432)987-1234
"RTN","EASEZT2",118,0)
 ;
"RTN","EASEZT2",119,0)
 N PHONE,MULTIPLE,AC,NUM,EXT,KEY,T
"RTN","EASEZT2",120,0)
 S PHONE="",MULTIPLE=1
"RTN","EASEZT2",121,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" PAGER PHONE AREA CODE") I KEY D
"RTN","EASEZT2",122,0)
 .S AC=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZT2",123,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" PAGER PHONE NUMBER") I KEY D
"RTN","EASEZT2",124,0)
 .S NUM=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZT2",125,0)
 .F T=1,2 S ^TMP("EZDATA",$J,KEY,MULTIPLE,T)=""
"RTN","EASEZT2",126,0)
 I AC'="" S AC="("_AC_")"
"RTN","EASEZT2",127,0)
 I NUM="-" S NUM=""
"RTN","EASEZT2",128,0)
 I NUM'="" S:NUM'["-" NUM=$E(NUM,1,3)_"-"_$E(NUM,4,7)
"RTN","EASEZT2",129,0)
 I NUM="" Q PHONE
"RTN","EASEZT2",130,0)
 S PHONE=AC_NUM
"RTN","EASEZT2",131,0)
 Q PHONE
"RTN","EASEZT2",132,0)
 ;
"RTN","EASEZT2",133,0)
ZIP(XDATA) ;
"RTN","EASEZT2",134,0)
 N X
"RTN","EASEZT2",135,0)
 I XDATA="-" S XDATA=""
"RTN","EASEZT2",136,0)
 I XDATA["-",($L(XDATA)'=10) Q $E(XDATA,1,5)
"RTN","EASEZT2",137,0)
 I $L(XDATA)<5 S XDATA=""
"RTN","EASEZT2",138,0)
 Q XDATA
"RTN","EASEZT2",139,0)
 ;
"RTN","EASEZT2",140,0)
EMPLOY(XDATA) ;
"RTN","EASEZT2",141,0)
 N X
"RTN","EASEZT2",142,0)
 I XDATA="" Q "UNKNOWN"
"RTN","EASEZT2",143,0)
 I XDATA="EMPLOYED" Q "EMPLOYED FULL TIME"
"RTN","EASEZT2",144,0)
 Q XDATA
"RTN","EASEZT2",145,0)
 ;
"RTN","EASEZT2",146,0)
MARR(XDATA) ;
"RTN","EASEZT2",147,0)
 N X
"RTN","EASEZT2",148,0)
 I XDATA="" Q "UNKNOWN"
"RTN","EASEZT2",149,0)
 I XDATA["WIDOW" S XDATA="WIDOW/WIDOWER"
"RTN","EASEZT2",150,0)
 S X=$O(^DIC(11,"B",XDATA,0))
"RTN","EASEZT2",151,0)
 I X="" Q "UNKNOWN"
"RTN","EASEZT2",152,0)
 Q XDATA
"RTN","EASEZT2",153,0)
 ;
"RTN","EASEZT2",154,0)
RELIGION(XDATA) ;
"RTN","EASEZT2",155,0)
 N X
"RTN","EASEZT2",156,0)
 I XDATA="" Q "UNKNOWN/NO PREFERENCE"
"RTN","EASEZT2",157,0)
 S X=$O(^DIC(13,"B",XDATA,0))
"RTN","EASEZT2",158,0)
 I X="" Q "UNKNOWN/NO PREFERENCE"
"RTN","EASEZT2",159,0)
 Q XDATA
"RTN","EASEZT2",160,0)
 ;
"RTN","EASEZT2",161,0)
SVCBRCH(XDATA) ;
"RTN","EASEZT2",162,0)
 N X
"RTN","EASEZT2",163,0)
 I XDATA="" Q "OTHER"
"RTN","EASEZT2",164,0)
 S X=$O(^DIC(23,"B",XDATA,0))
"RTN","EASEZT2",165,0)
 I X="" Q "OTHER"
"RTN","EASEZT2",166,0)
 Q XDATA
"RTN","EASEZT2",167,0)
 ;
"RTN","EASEZT2",168,0)
SUMSSI(XDATA,IEN) ; glomb income fields for print
"RTN","EASEZT2",169,0)
 N NODE,CIVIL,RAIL,MILIT,UNEMP,OTHER,INTER,COMP,OUT
"RTN","EASEZT2",170,0)
 S NODE=$G(^DGMT(408.21,IEN,0))
"RTN","EASEZT2",171,0)
 S CIVIL=$P(NODE,U,9)
"RTN","EASEZT2",172,0)
 S RAIL=$P(NODE,U,10)
"RTN","EASEZT2",173,0)
 S MILIT=$P(NODE,U,11)
"RTN","EASEZT2",174,0)
 S UNEMP=$P(NODE,U,12)
"RTN","EASEZT2",175,0)
 S OTHER=$P(NODE,U,13)
"RTN","EASEZT2",176,0)
 S INTER=$P(NODE,U,15)
"RTN","EASEZT2",177,0)
 S COMP=$P(NODE,U,16)
"RTN","EASEZT2",178,0)
 S OUT=XDATA+CIVIL+RAIL+MILIT+UNEMP+OTHER+INTER+COMP
"RTN","EASEZT2",179,0)
 Q OUT
"RTN","EASEZT2",180,0)
 ;
"RTN","EASEZT2",181,0)
SUMCASH(XDATA,IEN) ; glomb net worth fields for print
"RTN","EASEZT2",182,0)
 N NODE,STOCKS,OUT
"RTN","EASEZT2",183,0)
 S NODE=$G(^DGMT(408.21,IEN,2))
"RTN","EASEZT2",184,0)
 S STOCKS=$P(NODE,U,2)
"RTN","EASEZT2",185,0)
 S OUT=XDATA+STOCKS
"RTN","EASEZT2",186,0)
 Q OUT
"RTN","EASEZT2",187,0)
 ;
"RTN","EASEZT2",188,0)
SUMPROP(XDATA,IEN) ; glomb net worth fields for print
"RTN","EASEZT2",189,0)
 N NODE,DEBT,OUT
"RTN","EASEZT2",190,0)
 S NODE=$G(^DGMT(408.21,IEN,2))
"RTN","EASEZT2",191,0)
 S DEBT=$P(NODE,U,5)
"RTN","EASEZT2",192,0)
 S OUT=XDATA-DEBT
"RTN","EASEZT2",193,0)
 Q OUT
"RTN","EASEZT2",194,0)
 ;
"RTN","EASEZU3")
0^29^B62866657
"RTN","EASEZU3",1,0)
EASEZU3 ;ALB/jap - Utilities for 1010EZ Processing ;10/12/00  13:08
"RTN","EASEZU3",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**1,57**;Mar 15, 2001
"RTN","EASEZU3",3,0)
 ;
"RTN","EASEZU3",4,0)
NSD(EASAPP,TYPE,MULTIPLE) ;get name, ssn, dob for person of interest
"RTN","EASEZU3",5,0)
 ;input  EASAPP = application ien in file #712
"RTN","EASEZU3",6,0)
 ;         TYPE = "APPLICANT", "SPOUSE", "CHILD1", or "CHILD(N)"
"RTN","EASEZU3",7,0)
 ;     MULTIPLE = default to 1, unless TYPE="CHILD(N)"
"RTN","EASEZU3",8,0)
 ;output  RTR   =  name^ssn^dob
"RTN","EASEZU3",9,0)
 N RTR,KEY,EASNAME,EASSSN,EASDOB,LAST,FIRST,MDL,SUFF
"RTN","EASEZU3",10,0)
 S RTR="",EASNAME="",EASSSN="",EASDOB=""
"RTN","EASEZU3",11,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" LAST NAME") I KEY S LAST=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZU3",12,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" FIRST NAME") I KEY S FIRST=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZU3",13,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" MIDDLE NAME") I KEY S MDL=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZU3",14,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" SUFFIX NAME") I KEY S SUFF=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZU3",15,0)
 I (LAST="")!(FIRST="") Q RTR
"RTN","EASEZU3",16,0)
 S EASNAME=LAST_","_FIRST
"RTN","EASEZU3",17,0)
 I $L(EASNAME)+$L(MDL)>45 S MDL=$E(MDL,1)
"RTN","EASEZU3",18,0)
 I MDL'="" S EASNAME=EASNAME_" "_MDL
"RTN","EASEZU3",19,0)
 I SUFF'="" S EASNAME=EASNAME_" "_SUFF
"RTN","EASEZU3",20,0)
 S EASNAME=$$UC^EASEZT1($E(EASNAME,1,45))
"RTN","EASEZU3",21,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" SOCIAL SECURITY NUMBER")
"RTN","EASEZU3",22,0)
 I KEY S EASSSN=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1),EASSSN=$$SSNOUT^EASEZT1(EASSSN)
"RTN","EASEZU3",23,0)
 S KEY=+$$KEY711^EASEZU1(TYPE_" DATE OF BIRTH")
"RTN","EASEZU3",24,0)
 I KEY S EASDOB=$P($$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE),U,1)
"RTN","EASEZU3",25,0)
 S RTR=EASNAME_U_EASSSN_U_EASDOB
"RTN","EASEZU3",26,0)
 Q RTR
"RTN","EASEZU3",27,0)
 ;
"RTN","EASEZU3",28,0)
LINK ;
"RTN","EASEZU3",29,0)
 ;link applicant to file #2 as new or existing patient
"RTN","EASEZU3",30,0)
 Q:EASVIEW'=1
"RTN","EASEZU3",31,0)
 S EASPSTAT="NEW"
"RTN","EASEZU3",32,0)
 D DFN^EASEZI(EASAPP,.EASDFN)
"RTN","EASEZU3",33,0)
 I $G(EASDFN)>0 D
"RTN","EASEZU3",34,0)
 .D SETDATE^EASEZU2(EASAPP,"REV") S EASPSTAT="REV"
"RTN","EASEZU3",35,0)
 .D BLD^EASEZLM
"RTN","EASEZU3",36,0)
 .W ! D WAIT^DICD,EN^VALM("EAS EZ 1010EZ REVIEW2")
"RTN","EASEZU3",37,0)
 .S VALMBCK="Q"
"RTN","EASEZU3",38,0)
 I '$G(EASDFN) S VALMBCK="R"
"RTN","EASEZU3",39,0)
 Q
"RTN","EASEZU3",40,0)
 ;
"RTN","EASEZU3",41,0)
ACCFLD ;accept a single 1010EZ data element 
"RTN","EASEZU3",42,0)
 ;if data element was previously accepted, this action returns to non-accepted status
"RTN","EASEZU3",43,0)
 ;input  EASAPP   = pointer to file #712 for 1010EZ
"RTN","EASEZU3",44,0)
 ;       EASPSTAT = current processing status of Application;
"RTN","EASEZU3",45,0)
 ;result ACCEPT = 1, if toggled to accepted
"RTN","EASEZU3",46,0)
 ;                0, if toggled to non-accepted
"RTN","EASEZU3",47,0)
 N J,LN,SUBIEN,KEYIEN,MULTIPLE,ACCEPT,ACTION,LINK,ONE
"RTN","EASEZU3",48,0)
 Q:'EASAPP  Q:EASPSTAT=""
"RTN","EASEZU3",49,0)
 Q:'EASLN
"RTN","EASEZU3",50,0)
 S ACTION="'Accept Field'"
"RTN","EASEZU3",51,0)
 I EASPSTAT="PRT" D NOACT^EASEZLM("Printed",ACTION) Q
"RTN","EASEZU3",52,0)
 I EASPSTAT="SIG" D NOACT^EASEZLM("Signed",ACTION) Q
"RTN","EASEZU3",53,0)
 I EASPSTAT="FIL" D NOACT^EASEZLM("Filed",ACTION) Q
"RTN","EASEZU3",54,0)
 I EASPSTAT="CLS" D NOACT^EASEZLM("Inactivated",ACTION) Q
"RTN","EASEZU3",55,0)
 ;select data item to toggle
"RTN","EASEZU3",56,0)
 S VALMBCK=""
"RTN","EASEZU3",57,0)
 S ONE=0
"RTN","EASEZU3",58,0)
 S VALM("ENTITY")="Line Item" D SELRNGE^EASEZLM
"RTN","EASEZU3",59,0)
 Q:$G(EASERR)
"RTN","EASEZU3",60,0)
 Q:'$G(EASSEL("BG"))
"RTN","EASEZU3",61,0)
 ;
"RTN","EASEZU3",62,0)
 I EASSEL("BG")=EASSEL("LST") S ONE=1
"RTN","EASEZU3",63,0)
 ;
"RTN","EASEZU3",64,0)
 S J=0 F  S J=$O(EASSEL(J)) Q:'J  S EASLN=J D
"RTN","EASEZU3",65,0)
 .S LN=$G(^TMP("EASEXP",$J,"IDX",EASLN))
"RTN","EASEZU3",66,0)
 .Q:LN=""
"RTN","EASEZU3",67,0)
 .S SUBIEN=$P(LN,U,1),MULTIPLE=$P(LN,U,2),KEYIEN=$P(LN,U,3)
"RTN","EASEZU3",68,0)
 .S EZDATA=$P($G(^TMP("EZDATA",$J,KEYIEN,MULTIPLE,1)),U,1),XFILE=$P($G(^TMP("EZDATA",$J,KEYIEN)),U,1)
"RTN","EASEZU3",69,0)
 .Q:EZDATA=""
"RTN","EASEZU3",70,0)
 .Q:'SUBIEN
"RTN","EASEZU3",71,0)
 .S ACCEPT=$P($G(^EAS(712,EASAPP,10,SUBIEN,0)),U,3)
"RTN","EASEZU3",72,0)
 .;provide info to user only if exactly one line item being 'accepted'
"RTN","EASEZU3",73,0)
 .I ONE D FULL^VALM1
"RTN","EASEZU3",74,0)
 .;don't allow accept of data which cannot be filed
"RTN","EASEZU3",75,0)
 .I ((XFILE=0)!(ACCEPT=-1)) D:ONE  Q
"RTN","EASEZU3",76,0)
 ..W !!,?5,"Sorry, that data element cannot be 'Accepted' for 'Filing'."
"RTN","EASEZU3",77,0)
 ..W !!,?5,"After filing this Application to VistA, use Register a Patient "
"RTN","EASEZU3",78,0)
 ..W !,?5,"or Patient Enrollment to enter/update data as needed.",!
"RTN","EASEZU3",79,0)
 ..K DIR D PAUSE^VALM1 S VALMBCK="R"
"RTN","EASEZU3",80,0)
 .;if an 'always' accept data element, don't allow user to toggle off;
"RTN","EASEZU3",81,0)
 .I ACCEPT=2 D:ONE  Q
"RTN","EASEZU3",82,0)
 ..W !!,?5,"Sorry, that data element must be 'Accepted' for this Applicant."
"RTN","EASEZU3",83,0)
 ..I XFILE'=355.33 D
"RTN","EASEZU3",84,0)
 ...W !!,?5,"After filing this Application to VistA, the Registration options"
"RTN","EASEZU3",85,0)
 ...W !,?5,"can be used to modify data as needed.",!
"RTN","EASEZU3",86,0)
 ..I XFILE=355.33 D
"RTN","EASEZU3",87,0)
 ...W !!,?5,"After filing this Application to VistA, Integrated Billing users"
"RTN","EASEZU3",88,0)
 ...W !,?5,"can modify the data using the 'Process Insurance Buffer' option.",!
"RTN","EASEZU3",89,0)
 ..K DIR D PAUSE^VALM1 S VALMBCK="R"
"RTN","EASEZU3",90,0)
 .;don't allow 'updated' element to be toggled off;
"RTN","EASEZU3",91,0)
 .S UPD=$P($G(^EAS(712,EASAPP,10,SUBIEN,1)),U,2) I UPD'="" D:ONE  Q
"RTN","EASEZU3",92,0)
 ..W !!,?5,"Sorry, that data element has been Updated and must be 'Accepted'"
"RTN","EASEZU3",93,0)
 ..W !,?5,"for this Applicant."
"RTN","EASEZU3",94,0)
 ..K DIR D PAUSE^VALM1 S VALMBCK="R"
"RTN","EASEZU3",95,0)
 .;toggle 'accept' indicator for line itme
"RTN","EASEZU3",96,0)
 .S ACCEPT=$$ATOGGLE(EASLN,SUBIEN,ACCEPT)
"RTN","EASEZU3",97,0)
 ;
"RTN","EASEZU3",98,0)
 Q
"RTN","EASEZU3",99,0)
 ;
"RTN","EASEZU3",100,0)
ATOGGLE(EASLN,SUBIEN,ACCEPT) ;toggle 'accept' on line item
"RTN","EASEZU3",101,0)
 S ACCEPT='ACCEPT
"RTN","EASEZU3",102,0)
 S $P(^EAS(712,EASAPP,10,SUBIEN,0),U,3)=ACCEPT
"RTN","EASEZU3",103,0)
 ;highlight data on screen
"RTN","EASEZU3",104,0)
 I ACCEPT D CNTRL^VALM10(EASLN,27,25,IORVON,IORVOFF)
"RTN","EASEZU3",105,0)
 I 'ACCEPT D CNTRL^VALM10(EASLN,27,25,IORVOFF,IORVOFF)
"RTN","EASEZU3",106,0)
 D WRITE^VALM10(EASLN)
"RTN","EASEZU3",107,0)
 S VALMBCK="R"
"RTN","EASEZU3",108,0)
 Q ACCEPT
"RTN","EASEZU3",109,0)
 ;
"RTN","EASEZU3",110,0)
ACCALL ;accept all non-null 1010EZ data elements
"RTN","EASEZU3",111,0)
 ;prevously accepted data elements are not toggled to non-accepted
"RTN","EASEZU3",112,0)
 ;input  EASAPP   = pointer to file #712 for 1010EZ
"RTN","EASEZU3",113,0)
 ;       EASPSTAT = current processing status of Application; 
"RTN","EASEZU3",114,0)
 N EASLN,ACTION,XFILE
"RTN","EASEZU3",115,0)
 Q:'EASAPP  Q:EASPSTAT=""
"RTN","EASEZU3",116,0)
 S ACTION="'Accept All'"
"RTN","EASEZU3",117,0)
 I EASPSTAT="PRT" D NOACT^EASEZLM("Printed",ACTION) Q
"RTN","EASEZU3",118,0)
 I EASPSTAT="SIG" D NOACT^EASEZLM("Signed",ACTION) Q
"RTN","EASEZU3",119,0)
 I EASPSTAT="FIL" D NOACT^EASEZLM("Filed",ACTION) Q
"RTN","EASEZU3",120,0)
 I EASPSTAT="CLS" D NOACT^EASEZLM("Inactivated",ACTION) Q
"RTN","EASEZU3",121,0)
 ;
"RTN","EASEZU3",122,0)
 S EASLN=0 F  S EASLN=$O(^TMP("EASEXP",$J,"IDX",EASLN)) Q:'EASLN  D
"RTN","EASEZU3",123,0)
 .S SUBIEN=$P(^TMP("EASEXP",$J,"IDX",EASLN),U,1),MULTIPLE=$P(^(EASLN),U,2),KEYIEN=$P(^(EASLN),U,3)
"RTN","EASEZU3",124,0)
 .S XFILE=$P(^TMP("EZDATA",$J,KEYIEN),U,1)
"RTN","EASEZU3",125,0)
 .Q:XFILE=0
"RTN","EASEZU3",126,0)
 .S EZDATA=$P($G(^TMP("EZDATA",$J,KEYIEN,MULTIPLE,1)),U,1) I EZDATA'="" D
"RTN","EASEZU3",127,0)
 ..I $P(^EAS(712,EASAPP,10,SUBIEN,0),U,3)="" S $P(^(0),U,3)=1
"RTN","EASEZU3",128,0)
 ..D FLDCTRL^VALM10(EASLN,"EZDATA",IORVON,IORVOFF)
"RTN","EASEZU3",129,0)
 ..Q:(EASLN<VALMBG)!(EASLN>VALMLST)
"RTN","EASEZU3",130,0)
 ..D CNTRL^VALM10(EASLN,27,25,IORVON,IORVOFF)
"RTN","EASEZU3",131,0)
 ..D WRITE^VALM10(EASLN)
"RTN","EASEZU3",132,0)
 ;
"RTN","EASEZU3",133,0)
 ;update processing status if necessary
"RTN","EASEZU3",134,0)
 I EASPSTAT="NEW" D
"RTN","EASEZU3",135,0)
 .D SETDATE^EASEZU2(EASAPP,"REV") S EASPSTAT="REV"
"RTN","EASEZU3",136,0)
 .D BLD^EASEZLM,HDR2^EASEZL1
"RTN","EASEZU3",137,0)
 S VALMBCK="R"
"RTN","EASEZU3",138,0)
 Q
"RTN","EASEZU3",139,0)
 ;
"RTN","EASEZU3",140,0)
CLEAR ;clear all accept indicators from subfile #712.01 & LM array
"RTN","EASEZU3",141,0)
 ;input EASAPP   = ien to #712 for Application
"RTN","EASEZU3",142,0)
 ;      EASPSTAT = current processing status of Application; 
"RTN","EASEZU3",143,0)
 N BB,EASLN,ACTION
"RTN","EASEZU3",144,0)
 Q:'EASAPP  Q:EASPSTAT=""
"RTN","EASEZU3",145,0)
 S ACTION="'Clear All'"
"RTN","EASEZU3",146,0)
 I EASPSTAT="PRT" D NOACT^EASEZLM("Printed",ACTION) Q
"RTN","EASEZU3",147,0)
 I EASPSTAT="SIG" D NOACT^EASEZLM("Signed",ACTION) Q
"RTN","EASEZU3",148,0)
 I EASPSTAT="FIL" D NOACT^EASEZLM("Filed",ACTION) Q
"RTN","EASEZU3",149,0)
 I EASPSTAT="CLS" D NOACT^EASEZLM("Inactivated",ACTION) Q
"RTN","EASEZU3",150,0)
 ;
"RTN","EASEZU3",151,0)
 ;if a new patient, don't allow user to reset all accept
"RTN","EASEZU3",152,0)
 I $G(EASEZNEW) D  Q
"RTN","EASEZU3",153,0)
 .D FULL^VALM1
"RTN","EASEZU3",154,0)
 .W !!,?5,"Sorry, the 'Clear All' action cannot be used for this new patient."
"RTN","EASEZU3",155,0)
 .W !,?5,"It is recommended that all data elements be 'Accepted' for 'Filing'."
"RTN","EASEZU3",156,0)
 .W !!,?5,"After filing the Application to VistA, the Registration options"
"RTN","EASEZU3",157,0)
 .W !,?5,"can be used to modify data.",!
"RTN","EASEZU3",158,0)
 .D PAUSE^VALM1 S VALMBCK="R"
"RTN","EASEZU3",159,0)
 ;
"RTN","EASEZU3",160,0)
 ;clear accept flags and updates
"RTN","EASEZU3",161,0)
 ;remove accept indicators from List Manager display array
"RTN","EASEZU3",162,0)
 S EASLN=0 F  S EASLN=$O(^TMP("EASEXP",$J,"IDX",EASLN)) Q:'EASLN  D
"RTN","EASEZU3",163,0)
 .S SUBIEN=$P(^TMP("EASEXP",$J,"IDX",EASLN),U,1)
"RTN","EASEZU3",164,0)
 .;don't clear if updated
"RTN","EASEZU3",165,0)
 .Q:'SUBIEN
"RTN","EASEZU3",166,0)
 .I $P($G(^EAS(712,EASAPP,10,SUBIEN,0)),U,3)=1 D
"RTN","EASEZU3",167,0)
 ..F P=3,4,5 S $P(^EAS(712,EASAPP,10,SUBIEN,0),U,P)=""
"RTN","EASEZU3",168,0)
 ..S $P(^EAS(712,EASAPP,10,SUBIEN,1),U,2)=""
"RTN","EASEZU3",169,0)
 ..S $P(^EAS(712,EASAPP,10,SUBIEN,2),U,1)=""
"RTN","EASEZU3",170,0)
 ..D FLDCTRL^VALM10(EASLN,"EZDATA",IORVOFF,IORVOFF)
"RTN","EASEZU3",171,0)
 ..Q:(EASLN<VALMBG)!(EASLN>VALMLST)
"RTN","EASEZU3",172,0)
 ..D CNTRL^VALM10(EASLN,27,25,IORVOFF,IORVOFF) D WRITE^VALM10(EASLN)
"RTN","EASEZU3",173,0)
 S VALMBCK=""
"RTN","EASEZU3",174,0)
 Q
"RTN","EASEZU3",175,0)
 ;
"RTN","EASEZU3",176,0)
RESET ;reset 1010EZ Application to 'new' processing status
"RTN","EASEZU3",177,0)
 ;input  EASAPP  = pointer to file #712 for 1010EZ
"RTN","EASEZU3",178,0)
 ;      EASPSTAT = current processing status of Application; 
"RTN","EASEZU3",179,0)
 ;this action must be follwed by an 'exit' action from the List Manager screen
"RTN","EASEZU3",180,0)
 N ACTION,NEWDATE
"RTN","EASEZU3",181,0)
 Q:'EASAPP  Q:EASPSTAT=""
"RTN","EASEZU3",182,0)
 S ACTION="'Reset to New'"
"RTN","EASEZU3",183,0)
 I EASPSTAT="SIG" D NOACT^EASEZLM("Signed",ACTION) Q
"RTN","EASEZU3",184,0)
 I EASPSTAT="FIL" D NOACT^EASEZLM("Filed",ACTION) Q
"RTN","EASEZU3",185,0)
 I EASPSTAT="CLS" D NOACT^EASEZLM("Inactivated",ACTION) Q
"RTN","EASEZU3",186,0)
 ;
"RTN","EASEZU3",187,0)
 D OKRESET
"RTN","EASEZU3",188,0)
 ;update to 'New' status
"RTN","EASEZU3",189,0)
 S EASPSTAT="NEW",NEWDATE=$P(^EAS(712,EASAPP,0),U,6)
"RTN","EASEZU3",190,0)
 D REINDEX^EASEZU2(EASAPP,EASPSTAT,NEWDATE)
"RTN","EASEZU3",191,0)
 ;rebuild selection list since this application is removed from list
"RTN","EASEZU3",192,0)
 D BLD^EASEZLM
"RTN","EASEZU3",193,0)
 I 'VALMCNT D NOLINES^EASEZLM
"RTN","EASEZU3",194,0)
 W !,"Application has been Reset to New...",!
"RTN","EASEZU3",195,0)
 D PAUSE^VALM1
"RTN","EASEZU3",196,0)
 S VALMBCK="Q"
"RTN","EASEZU3",197,0)
 Q
"RTN","EASEZU3",198,0)
 ;
"RTN","EASEZU3",199,0)
OKRESET ;perform all housekeeping to for 'reset to new' or 'inactivate'
"RTN","EASEZU3",200,0)
 N BB,DA,DR,DIE,REM
"RTN","EASEZU3",201,0)
 ;remove status indicator fields from file #712 record
"RTN","EASEZU3",202,0)
 S DA=EASAPP,DIE="^EAS(712,"
"RTN","EASEZU3",203,0)
 S DR="5.1///^S X=""@"";5.2///^S X=""@"";6.1///^S X=""@"";6.2///^S X=""@"";8.1///^S X=""@"";8.2///^S X=""@"";"
"RTN","EASEZU3",204,0)
 D ^DIE
"RTN","EASEZU3",205,0)
 ;
"RTN","EASEZU3",206,0)
 ;delete link to file #2
"RTN","EASEZU3",207,0)
 I '$G(EASDFN) S EASDFN=$P(^EAS(712,EASAPP,0),U,10)
"RTN","EASEZU3",208,0)
 S $P(^EAS(712,EASAPP,0),U,10)=""
"RTN","EASEZU3",209,0)
 I $G(EASDFN) K ^EAS(712,"AC",EASDFN,EASAPP)
"RTN","EASEZU3",210,0)
 ;remove all links to VistA datbase
"RTN","EASEZU3",211,0)
 ;delete link, delete updated data, remove accept in each subfile #712.01 record
"RTN","EASEZU3",212,0)
 S BB=0 F  S BB=$O(^EAS(712,EASAPP,10,BB)) Q:'BB  D
"RTN","EASEZU3",213,0)
 .F P=3,4,5 S $P(^EAS(712,EASAPP,10,BB,0),U,P)=""
"RTN","EASEZU3",214,0)
 .S $P(^EAS(712,EASAPP,10,BB,1),U,2)=""
"RTN","EASEZU3",215,0)
 .F P=1,2 S $P(^EAS(712,EASAPP,10,BB,2),U,P)=""
"RTN","EASEZU3",216,0)
 ;
"RTN","EASEZU3",217,0)
 ;clear new patient indicator since applicant must be re-matched to VistA;
"RTN","EASEZU3",218,0)
 ;but if this applicant is matched again with same new stub record in VistA,
"RTN","EASEZU3",219,0)
 ;  there's a comment in file #2/field #.091 to indicate the record was previously
"RTN","EASEZU3",220,0)
 ;  added by 1010EZ process
"RTN","EASEZU3",221,0)
 ;update 'new patient' remark
"RTN","EASEZU3",222,0)
 I '$G(EASEZNEW) S EASEZNEW=$P(^EAS(712,EASAPP,0),U,11)
"RTN","EASEZU3",223,0)
 S $P(^EAS(712,EASAPP,0),U,11)=""
"RTN","EASEZU3",224,0)
 I EASEZNEW,EASDFN D
"RTN","EASEZU3",225,0)
 .S REM="New Patient record added by ELECTRONIC 10-10EZ."
"RTN","EASEZU3",226,0)
 .S DA=EASDFN,DIE="^DPT(",DR=".091///^S X=REM"
"RTN","EASEZU3",227,0)
 .D ^DIE
"RTN","EASEZU3",228,0)
 Q
"SEC","^DIC",711,711,0,"AUDIT")
@
"SEC","^DIC",711,711,0,"DD")
@
"SEC","^DIC",711,711,0,"DEL")
@
"SEC","^DIC",711,711,0,"LAYGO")
@
"SEC","^DIC",711,711,0,"RD")
@
"SEC","^DIC",711,711,0,"WR")
@
"VER")
8.0^22.0
"^DD",711,711,0)
FIELD^^10^11
"^DD",711,711,0,"DDA")
N
"^DD",711,711,0,"DT")
3010303
"^DD",711,711,0,"IX","A",711,1)

"^DD",711,711,0,"IX","AB",711,.01)

"^DD",711,711,0,"IX","B",711,.01)

"^DD",711,711,0,"IX","C",711,.1)

"^DD",711,711,0,"NM","1010EZ MAPPING")

"^DD",711,711,0,"NM","1010EZ MAPPING ")

"^DD",711,711,0,"PT",712.01,.01)

"^DD",711,711,0,"VRPK")
EAS
"^DD",711,711,.01,0)
ASSIGNED DATA NAME^RF^^0;1^K:$L(X)>50!($L(X)<3)!'(X'?1P.E) X
"^DD",711,711,.01,1,0)
^.1
"^DD",711,711,.01,1,1,0)
711^B
"^DD",711,711,.01,1,1,1)
S ^EAS(711,"B",$E(X,1,30),DA)=""
"^DD",711,711,.01,1,1,2)
K ^EAS(711,"B",$E(X,1,30),DA)
"^DD",711,711,.01,1,2,0)
711^AB^MUMPS
"^DD",711,711,.01,1,2,1)
S ^EAS(711,"AB",X,DA)=""
"^DD",711,711,.01,1,2,2)
K ^EAS(711,"AB",X,DA)
"^DD",711,711,.01,1,2,3)
DO NOT DELETE
"^DD",711,711,.01,1,2,"DT")
3001012
"^DD",711,711,.01,3)
Answer must be 3-50 characters in length.
"^DD",711,711,.01,21,0)
^^2^2^3010303^
"^DD",711,711,.01,21,1,0)
This unique descriptive name is used to group related 10-10EZ
"^DD",711,711,.01,21,2,0)
data elements.
"^DD",711,711,.01,"DT")
3001009
"^DD",711,711,.1,0)
DATA KEY^F^^0;2^K:$L(X)>12!($L(X)<1) X
"^DD",711,711,.1,1,0)
^.1
"^DD",711,711,.1,1,1,0)
711^C
"^DD",711,711,.1,1,1,1)
S ^EAS(711,"C",$E(X,1,30),DA)=""
"^DD",711,711,.1,1,1,2)
K ^EAS(711,"C",$E(X,1,30),DA)
"^DD",711,711,.1,1,1,3)
DO NOT DELETE
"^DD",711,711,.1,1,1,"DT")
3001009
"^DD",711,711,.1,3)
Answer must be 1-12 characters in length.
"^DD",711,711,.1,21,0)
^.001^6^6^3010307^^
"^DD",711,711,.1,21,1,0)
The Data Key is a unique identifier that associates this data element
"^DD",711,711,.1,21,2,0)
with a specific Section and Question in the On-Line 10-10EZ.
"^DD",711,711,.1,21,3,0)
Format is:  Section_;_Question
"^DD",711,711,.1,21,4,0)
            where Section and Question refer to specific data locations
"^DD",711,711,.1,21,5,0)
            on the 10-10EZ; each Section;Question identifier has been
"^DD",711,711,.1,21,6,0)
            mapped to a particular VistA database field (in most cases).
"^DD",711,711,.1,"DT")
3001009
"^DD",711,711,1,0)
ACTIVE^RS^A:ACTIVE;I:INACTIVE;^0;3^Q
"^DD",711,711,1,1,0)
^.1
"^DD",711,711,1,1,1,0)
711^A
"^DD",711,711,1,1,1,1)
S ^EAS(711,"A",$E(X,1,30),DA)=""
"^DD",711,711,1,1,1,2)
K ^EAS(711,"A",$E(X,1,30),DA)
"^DD",711,711,1,1,1,3)
DO NOT DELETE
"^DD",711,711,1,1,1,"DT")
3001017
"^DD",711,711,1,21,0)
^^3^3^3010303^
"^DD",711,711,1,21,1,0)
This provides a means to inactivate the mapping between a 10-10EZ
"^DD",711,711,1,21,2,0)
data element and the VistA database without destroying the mapping
"^DD",711,711,1,21,3,0)
for Applications already processed and filed to VistA.
"^DD",711,711,1,"DT")
3001017
"^DD",711,711,1.1,0)
INACTIVATE DATE^D^^0;4^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",711,711,1.1,21,0)
^^3^3^3010303^
"^DD",711,711,1.1,21,1,0)
If the mapping between a 10-10EZ data element and the VistA database
"^DD",711,711,1.1,21,2,0)
is 'inactivated', this field holds the date on which the inactivation
"^DD",711,711,1.1,21,3,0)
occurred.
"^DD",711,711,1.1,"DT")
3001008
"^DD",711,711,1.2,0)
VERSION #^RF^^0;5^K:$L(X)>8!($L(X)<1) X
"^DD",711,711,1.2,3)
Answer must be 1-8 characters in length.
"^DD",711,711,1.2,21,0)
^^2^2^3010303^
"^DD",711,711,1.2,21,1,0)
The version number of the On-Line 10-10EZ software which utilizes
"^DD",711,711,1.2,21,2,0)
this 1010EZ-to-VistA mapping.
"^DD",711,711,1.2,"DT")
3001211
"^DD",711,711,2,0)
MAP-TO FILE^RF^^1;1^K:$L(X)>8!($L(X)<1) X
"^DD",711,711,2,3)
Answer must be 1-8 characters in length.
"^DD",711,711,2,21,0)
^.001^2^2^3010307^^
"^DD",711,711,2,21,1,0)
This is the file number of the VistA database file which holds the
"^DD",711,711,2,21,2,0)
field to which this 10-10EZ data element has been mapped.
"^DD",711,711,2,"DT")
3001006
"^DD",711,711,3,0)
MAP-TO SUB-FILE^RF^^1;2^K:$L(X)>8!($L(X)<1) X
"^DD",711,711,3,3)
Answer must be 1-8 characters in length.
"^DD",711,711,3,21,0)
^.001^2^2^3010307^^
"^DD",711,711,3,21,1,0)
This is the sub-file number of the VistA database sub-file which holds
"^DD",711,711,3,21,2,0)
the field to which this 10-10EZ data element has been mapped.
"^DD",711,711,3,"DT")
3001006
"^DD",711,711,4,0)
MAP-TO FIELD^RF^^1;3^K:$L(X)>8!($L(X)<1) X
"^DD",711,711,4,3)
Answer must be 1-8 characters in length.
"^DD",711,711,4,21,0)
^^2^2^3010303^
"^DD",711,711,4,21,1,0)
This is the field number within the VistA database file or sub-file
"^DD",711,711,4,21,2,0)
to which this 10-10EZ data element has been mapped.
"^DD",711,711,4,"DT")
3010303
"^DD",711,711,5,0)
DISPLAY NAME^F^^2;1^K:$L(X)>30!($L(X)<3) X
"^DD",711,711,5,3)
Answer must be 3-30 characters in length.
"^DD",711,711,5,21,0)
^^2^2^3010303^
"^DD",711,711,5,21,1,0)
The shortened name for this 10-10EZ data element employed within the
"^DD",711,711,5,21,2,0)
1010EZ module List Manager interface.
"^DD",711,711,5,"DT")
3001024
"^DD",711,711,6,0)
DIR(0)^K^^3;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",711,711,6,3)
This is Standard MUMPS code.
"^DD",711,711,6,9)
@
"^DD",711,711,6,21,0)
^^4^4^3010303^
"^DD",711,711,6,21,1,0)
M code to set DIR(0) for a call to the FileMan Reader can be placed
"^DD",711,711,6,21,2,0)
here.  If present, this code will be used when the data element is
"^DD",711,711,6,21,3,0)
being updated within the "Update Field (UF)" action of the 
"^DD",711,711,6,21,4,0)
EAS EZ 1010EZ PROCESSING option.
"^DD",711,711,6,"DT")
3001102
"^DD",711,711,10,0)
TRANSFORM^K^^T;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",711,711,10,3)
This is Standard MUMPS code.
"^DD",711,711,10,9)
@
"^DD",711,711,10,21,0)
^^4^4^3010303^
"^DD",711,711,10,21,1,0)
Certain 10-10EZ data elements cannot be used directly to overwrite
"^DD",711,711,10,21,2,0)
VistA database fields; instead they require some transformation.
"^DD",711,711,10,21,3,0)
This field contains the M code needed to perform the needed data
"^DD",711,711,10,21,4,0)
transformation.
"^DD",711,711,10,"DT")
3001006
"^DIC",711,711,0)
1010EZ MAPPING^711
"^DIC",711,711,0,"GL")
^EAS(711,
"^DIC",711,711,"%",0)
^1.005^^0
"^DIC",711,711,"%D",0)
^^10^10^3010307^^^
"^DIC",711,711,"%D",1,0)
The 1010EZ MAPPING File holds the mapping between each data element
"^DIC",711,711,"%D",2,0)
in the On-Line 10-10EZ Application and the VistA Patient database.
"^DIC",711,711,"%D",3,0)
Each record in this file is uniquely identified by a Data Key which
"^DIC",711,711,"%D",4,0)
correlates exactly with a specific 10-10EZ form question within a
"^DIC",711,711,"%D",5,0)
specific 10-10EZ section.  Each record also contains the exact VistA
"^DIC",711,711,"%D",6,0)
database location (i.e., file/sub-file/field) where the data will be
"^DIC",711,711,"%D",7,0)
stored.
"^DIC",711,711,"%D",8,0)
 
"^DIC",711,711,"%D",9,0)
Local modifications to this file will cause the the 1010EZ module
"^DIC",711,711,"%D",10,0)
to malfunction and may jeopardize database integrity.
"^DIC",711,"B","1010EZ MAPPING",711)

**END**
**END**

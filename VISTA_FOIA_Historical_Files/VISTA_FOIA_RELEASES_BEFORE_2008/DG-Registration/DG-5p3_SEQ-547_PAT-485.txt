$TXT Created by KOPECKY,STEVE at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 12/13/04 at 14:12
=============================================================================
Run Date: JAN 03, 2005                     Designation: DG*5.3*485
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #547                    Status: Released
                  Compliance Date: FEB 03, 2005
=============================================================================

Associated patches: (v)DG*5.3*247  <<= must be installed BEFORE `DG*5.3*485'
                    (v)DG*5.3*277  <<= must be installed BEFORE `DG*5.3*485'
                    (v)DG*5.3*600  <<= must be installed BEFORE `DG*5.3*485'

Subject: FUGITIVE FELON PROGRAM

Category: 
  - Routine
  - Data Dictionary
  - Other

Description:
============

 This patch will install the initial functionality in support of Public 
 Law 107-103, section 505, which prohibits federal agencies from providing 
 certain benefits to persons who are fugitive felons.
  
 NOTE:  Training and training materials instructing sites on how to 
 accommodate this law will be provided by VACO on a VISN by VISN basis. This
 patch will have no impact on current operations until after this training
 and follow-up directions have been provided.  At the time of training,
 sites will be informed on how to enter and/or clear the Fugitive Felon
 flag as required.
  
 PLEASE NOTE:  
 National Training plans are being developed at this time and will be 
 announced soon.  Though sites can use  NOIS to enter a support request 
 regarding installation questions or problems, please hold any 
 implementation or process questions until after the training has occurred.
  
 This is new functionality in support of Pub. L. 107-103, section 505.  
 This patch will export a series of new fields to the PATIENT File (#2), 
 new menu options, a List Manager template and a new security key.  In 
 addition, this patch modifies the VistA patient lookup to display a new 
 alert when called by a Registration or Scheduling menu option. 
  
 Data Dictionary
 ---------------
 Five new fields are being added to the PATIENT File, #2.
  
 FUGITIVE FELON FLAG, field #1100.01 
 This field is in support of Pub. L. 107-103, section 505, and is used to
 flag a patient who has a fugitive felon warrant outstanding.  This field
 is a Set of Codes with a single code value of "YES".  This field is either
 "YES" or it is null.
  
 FFF ENTERED BY, field #1100.02  
 Pointer to the NEW PERSON file, #200
 This field contains the user who entered the current Fugitive Felon Flag 
 for this patient.  It is set when the FUGITIVE FELON FLAG field, 
 #1100.01, is updated.
  
 FFF DATE ENTERED, field #1100.03
 This is a Date-valued field.
 This is the Date/Time the FUGITIVE FELON FLAG, field #1100.01, was 
 entered.  This field is set when the FUGITIVE FELON FLAG, field #1100.01, 
 is updated.
  
 FFF REMOVED BY, field #1100.04
 Pointer to the NEW PERSON file, #200
 This field contains the user who removed the current Fugitive Felon Flag 
 for this patient.  It is set when the FUGITIVE FELON FLAG, field 
 #1100.01, is deleted.
  
 FFF DATE REMOVED, field #1100.05
 This is a Date-valued field.
 This is the Date/Time the FUGITIVE FELON FLAG, field #1100.01, was 
 removed.  This field is set when the FUGITIVE FELON FLAG, field #1100.01, 
 is deleted.
  
 FFF REMOVAL REMARKS, field #1100.09
 This is a free text field 2 to 80 characters in length
 If the FFF flag has been cleared for this patient, this field contains a 
 short reason as to why the flag was cleared.
  
 The FFF ENTERED BY, FFF DATE ENTERED, FFF REMOVED BY, and the FFF DATE 
 REMOVED fields are protected so they cannot be accessed directly through 
 FileMan.  These fields will be updated through the DD^DGFFP01 API which 
 is called through AUFFP cross-reference on the FUGITIVE FELON FLAG, field 
 #1100.01. 
  
 Options
 -------
 Fugitive Felon Program Main Menu [DGFFP FUGITIVE FELON PROGRAM]
 This is the main menu for the Fugitive Felon Program menu options.
  
 Set the Fugitive Felon Flag [DGFFP SET FUGITIVE FELON FLAG]
 This option set the FUGITIVE FELON FLAG (#1100.01) in the PATIENT File 
 (#2).  Locked by the DGFFP ACCESS security key.  
  
 Clear the Fugitive Felon Flag [DGFFP CLR FUGITIVE FELON FLAG]
 This option will remove the FUGITIVE FELON FLAG (#1100.01) from the 
 PATIENT File (#2).  Locked by the DGFFP ACCESS security key.  
  
 Fugitive Felon Status Reports [DGFFP REPORT MENU]
 This is the Main Menu for Fugitive Felon reports.  
  
 Fugitive Felon Alpha Report [DGFFP ALPHA LIST]
 This option generates an alphabetized list of patients for whom the 
 Fugitive Felon Flag is currently set in the Patient File.  This report 
 will display the patient's name, Last four of the social security number, 
 the date the flag was set, and the user who entered the flag.  
  
 Cleared Fugitive Felon Flag Report [DGFFP CLEARED STATUS RPT]
 This report shows an alphabetized list of patients for whom the Fugitive 
 Felon Flag has been cleared.  
  
 Fugitive Felon Inquiry [DGFFP FFP INQUIRY]
 This option opens a List Manager display showing information on the 
 current Fugitive Felon status of the selected patient.  Locked by the 
 DGFFP ACCESS security key.
  
 Fugitive Felon Status Report [DGFFP STATUS REPORT]
 This report generates an alphabetized list of patients who have the 
 Fugitive Felon Flag set and displays their current inpatient/outpatient 
 status, any future appointments scheduled, and whether they have any 
 active scripts.  
  
 List Template
 -------------
 Fugitive Felon Inquiry [DGFFP PATIENT STATUS INQUIRY]
 This template provides an inquiry capability to view selected patient 
 information in a List Manager format.  Information displayed includes the 
 Fugitive Felon Information from the new fields added to the PATIENT File 
 (#2), last appointment information, permanent and temporary address
 information, and future appointment information.
  
 Protocols
 ---------
 Change Patient [DGFFP CHANGE PATIENT]
 Protocol to select another patient to display in the Fugitive Felon 
 Inquiry List Display. 
  
 DGFFP MAIN MENU [DGFFP LM MENU] 
 Main menu protocol for the Fugitive Felon patient inquiry List Manager 
 screen 
  
  
 Security Key
 ------------
 DGFFP ACCESS - This is a new key required to access the Fugitive Felon 
 Program menus and field edits.  
  
 Patient Lookup
 --------------
 The custom patient lookup in VistA has been modified to display an alert 
 when a patient lookup is performed from a Scheduling or Registration 
 package option and the FUGITIVE FELON FLAG has been set for the selected 
 patient.  In this case, the following display is presented to the user: 
  
     *** WARNING - FFP FLAG ACTIVE ***
       PLEASE NOTIFY YOUR SUPERVISOR
  
 The user must press the ENTER key to continue past this message.  Patient 
 Lookups performed as a standalone query or from a package other than 
 Scheduling or Registration will not display the alert.
  
  
 The following documentation will be available:
 ==============================================
  
       File Name                 Description
       ---------                 -----------
       DG_5_3_P485_UM.PDF        Fugitive Felon Program (FFP)
  
   The preferred method is to FTP the file from:
  
       download.vista.med.va.gov
  
   Sites may retrieve the documentation directly using FTP from
   the ANONYMOUS.SOFTWARE directory at the following OI Field Offices:
  
           Albany:  ftp.fo-albany.med.va.gov
            Hines:  ftp.fo-hines.med.va.gov
   Salt Lake City:  ftp.fo-slc.med.va.gov
  
  
 This patch addresses the following E3R(s):
 ------------------------------------------
 There are no E3R's associated with this patch
  
  
 This patch addresses the following NOIS message(s):
 ---------------------------------------------------
 There are no NOIS messages associated with this patch
  
  
 Overview of NOIS Message(s):
 ---------------------------
 N/A
  
  
 Test Sites:
 -----------
 No. California HCS
 Palo Alto HCS
 San Francisco VAMC
 Fresno VAMC
 Reno VAMC
 Greater LA
 Loma Linda VAMC
 Long Beach VAMC
 San Diego VAMC
 Las Vegas VAMC
  
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 Because the patient lookup is being modified, it is recommended that this 
 patch be installed during non-peak hours to limit interruptions to users.
  
 Install Time - 10 MINUTES
  
  
   1.   LOAD TRANSPORT GLOBAL 
        ---------------------
        Choose the PackMan message containing this patch and invoke the 
        INSTALL/CHECK MESSAGE PackMan option.  
              
   2.   DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only) 
        -----------------------
        Disable routine mapping on all systems for the routines listed in 
        step 3 below.  
       
        NOTE:  If the routines included in this patch are not currently in 
               your mapped routine set, please skip this step.
   
   3.   COMPONENTS SENT WITH PATCH 
        ------------------------
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
     <tab>;;5.3;Registration;**[patch list]**;Aug 13, 1993
  
                            CHECK^XTSUMBLD results
 Routine name      Before Patch          After Patch         Patch List
 ============      ============          ===========         ==========
 DGFFP01                    N/A              4040826             485
 DGFFP02                    N/A              3797381             485
 DGFFP03                    N/A              7715530             485
 DGFFP04                    N/A              3825225             485
 DGFFPLM                    N/A              1026886             485
 DGFFPLM1                   N/A              6769456             485
 DGLOCK                16589080             17043033       108,161,247,485
 DPTLK                 17589567             17636747       32,72,93,73,136
                                                       157,197,232,265,277
                                                       223,327,244,513,528
                                                         541,576,600,485
 DPTLK5                  809380              1628679       265,276,277,485
  
         Total number of routines - 9 ****
  
   
   4.   START UP KIDS 
        -------------
        Start up the Kernel Installation and Distribution System Menu 
        [XPD MAIN]: 
    
             Edits and Distribution ...  
             Utilities ...  
             Installation ...  
    
   Select Kernel Installation & Distribution System Option: INStallation 
                                                            ---
             Load a Distribution 
             Print Transport Global 
             Compare Transport Global to Current System 
             Verify Checksums in Transport Global 
             Install Package(s) 
             Restart Install of Package(s) 
             Unload a Distribution 
             Backup a Transport Global 
    
   Select Installation Option: 
    
   5.   Select Installation Option: 
        --------------------------
        NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
               NAME, enter DG*5.3*485):
       
        a.  Backup a Transport Global - This option will create a backup
            message of any routines exported with this patch. It will not
            backup any other changes such as DD's or templates.
        b.  Compare Transport Global to Current System - This option will
            allow you to view all changes that will be made when this patch
            is installed.  It compares all components of this patch
            (routines, DD's, templates, etc.).
        c.  Verify Checksums in Transport Global - This option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
      
   6.   Select Installation Option: Install Package(s) 
                                    ----------------
        **This is the step to start the installation of this KIDS patch: 
    
        a.  Choose the Install Package(s) option to start the patch
            install.
        b.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion
            of Install? YES//' answer NO
        c.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
            YES//' answer NO
        d.  When prompted 'Want to DISABLE Scheduled Options, Menu 
            Options, and Protocols? YES//' answer NO
  
   7.    REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
        -------------------------
        Optional - Include the routines distributed with this patch
        in the mapped routine set.
      
        NOTE: This step is only necessary if you performed step 2 or 
              if you wish to include the routines in your mapped set.
  
    8.  The Fugitive Felon Program Main Menu [DGFFP FUGITIVE FELON PROGRAM]
        option should be assigned as a secondary menu option to selected 
        personnel.  This menu includes the Set and Remove options as well as
        various reports.  The  DGFFP ACCESS security key is required to
        either Set or Remove the FFP Flag and should be provided on a
        restricted basis.  IRM should not assign this key to anyone until
        instructed by the appropriate FFP Coordinator at their site.  This
        should occur after training materials have been received and training
        has occurred by the appropriate Business Office.  Installation of 
        this patch will not impact any existing applications or menu options.

Routine Information:
====================

Routine Name:
  - DGFFP01

 This is a new routine for this patch

Routine Checksum:

Routine Name:
  - DGFFP02

 This is a new routine for this patch

Routine Checksum:

Routine Name:
  - DGFFP03

 This is a new routine for this patch

Routine Checksum:

Routine Name:
  - DPTLK

  
 Before:
 =======
 111        ;DG*600
 112        ;I DIC(0)["E",$P($G(^DPT(+Y,0)),U,21) W *7,!,"Warning : You have sel
             ected a test patient."
 113        I DIC(0)["E",$$TESTPAT^VADPT(+Y) W *7,!,"WARNING : You may have sele
             cted a test patient."
 114        ;Display enrollment information
  
  
 After:
 ======
 111        ;DG*600
 112        ;I DIC(0)["E",$P($G(^DPT(+Y,0)),U,21) W *7,!,"Warning : You have sel
             ected a test patient."
 113        I DIC(0)["E",$$TESTPAT^VADPT(+Y) W *7,!,"WARNING : You may have sele
             cted a test patient."
 114        ;DG*485
 115        I $D(^DPT("AXFFP",1,+Y)) D FFP^DPTLK5
 116        ;Display enrollment information

Routine Checksum:

Routine Name:
  - DPTLK5

 The following API has been added to the DPTLK5 routine:
  
 FFP ; This function checks if the 'Display Fugitive Felon Message'
     ; message is to be displayed.  Message displays only for DG and SD
     ; menu options
     ;
     Q:'$D(XQY0)
     Q:$E(XQY0,1,2)'="SD"&($E(XQY0,1,2)'="DG")
     ;
     N X,Y,IORVON,IORVOFF,DIR,DIRUT
     S X="IORVON;IORVOFF"
     D ENDR^%ZISS
     W !?17,$CHAR(7) W:$D(IORVON) IORVON W "*** WARNING - FFP FLAG ACTIVE
 ***" W:$D(IORVOFF) IORVOFF
     W !?19,$CHAR(7) W:$D(IORVON) IORVON W "PLEASE NOTIFY YOUR SUPERVISOR"
 W:$D(IORVOFF) IORVOFF
     W !
     S DIR(0)="FAO",DIR("A")="Enter <RETURN> to continue."
     D ^DIR K DIR
     Q

Routine Checksum:

Routine Name:
  - DGLOCK

 Before:
 =======
  
 DGLOCK  ;ALB/MRL - PATIENT FILE DATA EDIT CHECKS ; 28 JUL 86
         ;;5.3;Registration;**108,161,247**;Aug 13, 1993
 EK      ;EKey Rqrd
         I '$D(^XUSEC("DG ELIGIBILITY",DUZ)) W !?4,$C(7),"Eligibility Key 
 required to edit this field." K X
  
  
 After:
 ======
  
 DGLOCK  ;ALB/MRL - PATIENT FILE DATA EDIT CHECKS ; 28 JUL 86        
         ;;5.3;Registration;**108,161,247,485**;Aug 13, 1993
 FFP     ; DGFFP Access key required
         I '$D(^XUSEC("DGFFP ACCESS",DUZ)) D EN^DDIOL("Fugitive Felon Key
 required to edit this field.","","!!?4") K X
         Q 
 EK      ;EKey Rqrd
         I '$D(^XUSEC("DG ELIGIBILITY",DUZ)) W !?4,$C(7),"Eligibility Key
 required to edit this field." K X

Routine Checksum:

Routine Name:
  - DGFFP04

 This is a new routine for this patch

Routine Checksum:

Routine Name:
  - DGFFPLM

 This is a new routine for this patch

Routine Checksum:

Routine Name:
  - DGFFPLM1

 This is a new routine for this patch

Routine Checksum:

=============================================================================
User Information:
Entered By  : KOPECKY,STEPHEN C.            Date Entered  : NOV 06, 2002
Completed By: MULLER,RICHARD                Date Completed: DEC 22, 2004
Released By : CANNEDY,JOELLEN               Date Released : JAN 03, 2005
=============================================================================


Packman Mail Message:
=====================

$END TXT

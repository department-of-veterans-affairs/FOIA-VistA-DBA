Released GMTS*2.7*43 SEQ #41
Extracted from mail message
**KIDS**:GMTS*2.7*43^

**INSTALL NAME**
GMTS*2.7*43
"BLD",2816,0)
GMTS*2.7*43^HEALTH SUMMARY^0^3010412^y
"BLD",2816,1,0)
^^2^2^3010404^^^
"BLD",2816,1,1,0)
The description of this patch may be found on the National Patch Module 
"BLD",2816,1,2,0)
under GMTS*2.7*43.
"BLD",2816,4,0)
^9.64PA^^
"BLD",2816,"KRN",0)
^9.67PA^19^17
"BLD",2816,"KRN",.4,0)
.4
"BLD",2816,"KRN",.401,0)
.401
"BLD",2816,"KRN",.402,0)
.402
"BLD",2816,"KRN",.403,0)
.403
"BLD",2816,"KRN",.5,0)
.5
"BLD",2816,"KRN",.84,0)
.84
"BLD",2816,"KRN",3.6,0)
3.6
"BLD",2816,"KRN",3.8,0)
3.8
"BLD",2816,"KRN",9.2,0)
9.2
"BLD",2816,"KRN",9.8,0)
9.8
"BLD",2816,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",2816,"KRN",9.8,"NM",1,0)
GMTSU^^0^B50648038
"BLD",2816,"KRN",9.8,"NM","B","GMTSU",1)

"BLD",2816,"KRN",19,0)
19
"BLD",2816,"KRN",19.1,0)
19.1
"BLD",2816,"KRN",101,0)
101
"BLD",2816,"KRN",409.61,0)
409.61
"BLD",2816,"KRN",771,0)
771
"BLD",2816,"KRN",870,0)
870
"BLD",2816,"KRN",8994,0)
8994
"BLD",2816,"KRN","B",.4,.4)

"BLD",2816,"KRN","B",.401,.401)

"BLD",2816,"KRN","B",.402,.402)

"BLD",2816,"KRN","B",.403,.403)

"BLD",2816,"KRN","B",.5,.5)

"BLD",2816,"KRN","B",.84,.84)

"BLD",2816,"KRN","B",3.6,3.6)

"BLD",2816,"KRN","B",3.8,3.8)

"BLD",2816,"KRN","B",9.2,9.2)

"BLD",2816,"KRN","B",9.8,9.8)

"BLD",2816,"KRN","B",19,19)

"BLD",2816,"KRN","B",19.1,19.1)

"BLD",2816,"KRN","B",101,101)

"BLD",2816,"KRN","B",409.61,409.61)

"BLD",2816,"KRN","B",771,771)

"BLD",2816,"KRN","B",870,870)

"BLD",2816,"KRN","B",8994,8994)

"BLD",2816,"QUES",0)
^9.62^^
"BLD",2816,"REQB",0)
^9.611^1^1
"BLD",2816,"REQB",1,0)
GMTS*2.7*37^2
"BLD",2816,"REQB","B","GMTS*2.7*37",1)

"MBREQ")
0
"PKG",126,-1)
1^1
"PKG",126,0)
HEALTH SUMMARY^GMTS^Integrated Health Summary Tools^^^3010208
"PKG",126,20,0)
^9.402P^^
"PKG",126,22,0)
^9.49I^1^1
"PKG",126,22,1,0)
2.7^2951020^2951020^11
"PKG",126,22,1,"PAH",1,0)
43^3010412^1118
"PKG",126,22,1,"PAH",1,1,0)
^^2^2^3010412
"PKG",126,22,1,"PAH",1,1,1,0)
The description of this patch may be found on the National Patch Module 
"PKG",126,22,1,"PAH",1,1,2,0)
under GMTS*2.7*43.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","GMTSU")
0^1^B50648038
"RTN","GMTSU",1,0)
GMTSU ; SLC/JER,KER/NDBI - Health Summary Utilities ; 04/04/2001
"RTN","GMTSU",2,0)
 ;;2.7;Health Summary;**27,28,31,35,37,43**;Oct 20, 1995
"RTN","GMTSU",3,0)
 ;
"RTN","GMTSU",4,0)
MTIM ;CONVERT TIME from X=2890313.1304 INTO X=13:04
"RTN","GMTSU",5,0)
 S X=$P(X,".",2) Q:'$L(X)
"RTN","GMTSU",6,0)
 S X=$S(X:$E(X,1,2)_$E("00",0,2-$L($E(X,1,2)))_":"_$E(X,3,4)_$E("00",0,2-$L($E(X,3,4))),1:"")
"RTN","GMTSU",7,0)
 Q
"RTN","GMTSU",8,0)
PROK(X,Y) ; Routine and Patch # OK (in UCI)
"RTN","GMTSU",9,0)
 N GMTS,GMTSI,GMTSO S X=$G(X),Y=$G(Y) Q:'$L(X) 0 Q:Y'=""&(+Y=0)
"RTN","GMTSU",10,0)
 S Y=+Y,GMTS=$$ROK(X) Q:'GMTS 0 Q:+Y=0 1 S GMTSO=0,GMTS=$T(@("+2^"_X)),GMTS=$P($P(GMTS,"**",2),"**",1)
"RTN","GMTSU",11,0)
 F GMTSI=1:1:$L(GMTS,",") S:+($P(GMTS,",",GMTSI))=Y GMTSO=1 Q:GMTSO=1
"RTN","GMTSU",12,0)
 S X=GMTSO Q X
"RTN","GMTSU",13,0)
ROK(X) ; Routine OK (in UCI) (NDBI)
"RTN","GMTSU",14,0)
 S X=$G(X) Q:'$L(X) 0 Q:$L(X)>8 0
"RTN","GMTSU",15,0)
 ; DBIA 10096 access ^%ZOSF
"RTN","GMTSU",16,0)
 X ^%ZOSF("TEST") Q:$T 1 Q 0
"RTN","GMTSU",17,0)
NDBI(X) ; National Database Integration site 1 = yes  0 = no
"RTN","GMTSU",18,0)
 N R,G S X="A7RDUP"
"RTN","GMTSU",19,0)
 ; DBIA 10096 access ^%ZOSF
"RTN","GMTSU",20,0)
 X ^%ZOSF("TEST") S R=$T
"RTN","GMTSU",21,0)
 ; DBIA 2934 access ^A7RCP
"RTN","GMTSU",22,0)
 S G=$S($D(^A7RCP):1,1:0),X=R+G,X=$S(X=2:1,1:0) Q X
"RTN","GMTSU",23,0)
CPT(X) ; Use CPT Modifiers  Needs GMTSEG Array
"RTN","GMTSU",24,0)
 S X=+($G(X)) N GMTSN,GMTSC,GMTSM,GMTSA,GMTSI S GMTSN=$G(GMTSEG(X))
"RTN","GMTSU",25,0)
 S GMTSC=+($P(GMTSN,"^",2)) Q:'GMTSC 0
"RTN","GMTSU",26,0)
 S GMTSM=$S($P(GMTSN,"^",9)="N":0,$P(GMTSN,"^",9)="":1,1:1) Q:'GMTSM 0
"RTN","GMTSU",27,0)
 S GMTSA=$S(+($$CMU(+GMTSC))>0:1,1:0) Q:'GMTSA 0
"RTN","GMTSU",28,0)
 Q 1
"RTN","GMTSU",29,0)
CMU(X) ; Component Uses CPT Modifiers
"RTN","GMTSU",30,0)
 N GMTSA,GMTSN,GMTSI S X=$G(X) Q:'$L(X) 0 S GMTSI=+X
"RTN","GMTSU",31,0)
 S GMTSA=$O(^GMT(142.1,"C",X,0)),GMTSN=$O(^GMT(142.1,"D",X,0)) S:GMTSI=0&(+GMTSA>0) GMTSI=GMTSA S:GMTSI=0&(+GMTSN>0) GMTSI=GMTSN
"RTN","GMTSU",32,0)
 Q:+GMTSI=0 0 S GMTSA=$S($P($G(^GMT(142.1,+GMTSI,0)),"^",14)="Y":1,1:0) Q:'GMTSA 0
"RTN","GMTSU",33,0)
 Q 1
"RTN","GMTSU",34,0)
ED(X) ; External Date
"RTN","GMTSU",35,0)
 S X=$G(X) Q:'$L(X) ""
"RTN","GMTSU",36,0)
 D REGDT4 Q X
"RTN","GMTSU",37,0)
EDT(X) ; External Date and Time
"RTN","GMTSU",38,0)
 S X=$G(X) Q:'$L(X) ""
"RTN","GMTSU",39,0)
 D REGDTM4 Q X
"RTN","GMTSU",40,0)
REGDT ; Receives X in internal date.time, and returns X in MM/DD/YY format
"RTN","GMTSU",41,0)
 ; DBIA 10103 call $$FMTE^XLFDT
"RTN","GMTSU",42,0)
 S X=$TR($$FMTE^XLFDT(X,"2DZ"),"@"," ") Q
"RTN","GMTSU",43,0)
REGDT4 ; Receives X in internal date.time, and returns X in MM/DD/YYYY format
"RTN","GMTSU",44,0)
 ; DBIA 10103 call $$FMTE^XLFDT
"RTN","GMTSU",45,0)
 S X=$TR($$FMTE^XLFDT(X,"5DZ"),"@"," ") Q
"RTN","GMTSU",46,0)
REGDTM ;Receives X in internal date.time, and returns X in MM/DD/YY TT:TT
"RTN","GMTSU",47,0)
 ; DBIA 10103 call $$FMTE^XLFDT
"RTN","GMTSU",48,0)
 S X=$TR($$FMTE^XLFDT(X,"2ZM"),"@"," ") Q
"RTN","GMTSU",49,0)
REGDTM4 ;Receives X in internal date.time, and returns X in MM/DD/YYYY TT:TT
"RTN","GMTSU",50,0)
 ; DBIA 10103 call $$FMTE^XLFDT
"RTN","GMTSU",51,0)
 S X=$TR($$FMTE^XLFDT(X,"5ZM"),"@"," ") Q
"RTN","GMTSU",52,0)
SIDT ; Receives X as internal date/time and returns X in DD MMM YY
"RTN","GMTSU",53,0)
 N MON,MM
"RTN","GMTSU",54,0)
 S X=$P(X,".") I 'X S X="" Q
"RTN","GMTSU",55,0)
 S MON="JAN^FEB^MAR^APR^MAY^JUN^JUL^AUG^SEP^OCT^NOV^DEC"
"RTN","GMTSU",56,0)
 S MM=$E(X,4,5),MM=$S(MM:$P(MON,U,MM),1:"")
"RTN","GMTSU",57,0)
 S X=$E(X,6,7)_" "_MM_" "_$E(X,2,3)
"RTN","GMTSU",58,0)
 Q
"RTN","GMTSU",59,0)
 ;                       
"RTN","GMTSU",60,0)
HF(X) ; Host File - Used to distinguish from Host Files that are intended
"RTN","GMTSU",61,0)
 ; for Printers and Host Files for other purposes (windows/files)
"RTN","GMTSU",62,0)
 ;   1 - if Device Type is HFS and not a TCP/IP Printer
"RTN","GMTSU",63,0)
 ;   0 - if Device Type is not HFS or device is a Printer
"RTN","GMTSU",64,0)
 ;                       
"RTN","GMTSU",65,0)
 ; Check Device (Independent)
"RTN","GMTSU",66,0)
 ;   Check Host File Server
"RTN","GMTSU",67,0)
 Q:$G(IOT)'="HFS" 0
"RTN","GMTSU",68,0)
 ; Check Device (Post OR*3.0*85)
"RTN","GMTSU",69,0)
 N GMTS85 S GMTS85=$$PROK("ORWRP",85)
"RTN","GMTSU",70,0)
 Q:+($G(GMTS85))>0&(+($G(ORWINDEV))>0) 0
"RTN","GMTSU",71,0)
 Q:+($G(GMTS85))>0&(+($G(ORWINDEV))'>0) 1
"RTN","GMTSU",72,0)
 ; Check Device (Pre OR*3.0*85)
"RTN","GMTSU",73,0)
 ;   Host File for GUI Scrollable Window
"RTN","GMTSU",74,0)
 Q:$E($G(ION),1,14)["OR WORKSTATION" 1
"RTN","GMTSU",75,0)
 ;   TCP/IP Printer
"RTN","GMTSU",76,0)
 Q:$G(IO)["$PRT"!($G(IO)["PRN|") 0
"RTN","GMTSU",77,0)
 ;   Windows Printer
"RTN","GMTSU",78,0)
 Q:$E($G(ION),1,14)["OR WINDOWS HFS" 0
"RTN","GMTSU",79,0)
 ;   Host Files (file or unspecifed printer)
"RTN","GMTSU",80,0)
 S X=0 S:$G(ION)["HOST FILE" X=1
"RTN","GMTSU",81,0)
 S:$E($G(IOST),1,5)["P-OTH" X=1
"RTN","GMTSU",82,0)
 Q X
"RTN","GMTSU",83,0)
 ;                       
"RTN","GMTSU",84,0)
FMHL7DTM ; Convert X - int date/time to HL7 CCYYMMDDHHMM-HHHH
"RTN","GMTSU",85,0)
 S X=$$FMTHL7^XLFDT(+($G(X))) Q
"RTN","GMTSU",86,0)
HL7FMDTM ; Convert X - HL7 CCYYMMDDHHMM-HHHH to int date/time local
"RTN","GMTSU",87,0)
 S X=$$HL7TFM^XLFDT($G(X),"L") Q
"RTN","GMTSU",88,0)
DEM ; Gets Demographic Data from VADPT
"RTN","GMTSU",89,0)
 ; Receives: DFN
"RTN","GMTSU",90,0)
 ; Returns: GMTSPNM,GMTSSN,GMTSDOB,SEX,GMTSWARD,GMTSRB,GMTSAGE
"RTN","GMTSU",91,0)
 K VAHOW
"RTN","GMTSU",92,0)
 ; DBIA 10061 call OERR^VADPT
"RTN","GMTSU",93,0)
 D OERR^VADPT
"RTN","GMTSU",94,0)
 S GMTSPNM=VADM(1)
"RTN","GMTSU",95,0)
 S GMTSSN=$S($D(VA("PID")):VA("PID"),1:$P(VADM(2),"^",2))
"RTN","GMTSU",96,0)
 S GMTSAGE=$S(+VADM(4)>0:+VADM(4),1:99),SEX=$P(VADM(5),"^")
"RTN","GMTSU",97,0)
 S GMTSWARD=$P(VAIN(4),"^",2),GMTSRB=VAIN(5)
"RTN","GMTSU",98,0)
 S X=$P(VADM(3),"^") D REGDT4 S GMTSDOB=X
"RTN","GMTSU",99,0)
 K VA
"RTN","GMTSU",100,0)
 ;Establish the information for the patient header.
"RTN","GMTSU",101,0)
 K GMTSPHDR
"RTN","GMTSU",102,0)
 N DOB,LWARDRB,NMSSN,NMSSNE,WARDRB,WARDRBE,WARDRBS
"RTN","GMTSU",103,0)
 S NMSSN=GMTSPNM_"    "_GMTSSN
"RTN","GMTSU",104,0)
 S NMSSNE=$L(NMSSN)+2
"RTN","GMTSU",105,0)
 S WARDRB=GMTSWARD_" "_GMTSRB
"RTN","GMTSU",106,0)
 S LWARDRB=$L(WARDRB)
"RTN","GMTSU",107,0)
 S WARDRBS=40-(LWARDRB/2),WARDRBE=WARDRBS+LWARDRB
"RTN","GMTSU",108,0)
 S DOB="DOB: "_GMTSDOB
"RTN","GMTSU",109,0)
 S GMTSPHDR("NMSSN")=NMSSN
"RTN","GMTSU",110,0)
 S GMTSPHDR("WARDRB")=WARDRB
"RTN","GMTSU",111,0)
 S GMTSPHDR("WARDRBS")=WARDRBS
"RTN","GMTSU",112,0)
 S GMTSPHDR("DOB")=DOB
"RTN","GMTSU",113,0)
 S GMTSPHDR("DOBS")=64
"RTN","GMTSU",114,0)
 I (NMSSNE'<WARDRBS)!(WARDRBE'<64) S GMTSPHDR("TWO")=1
"RTN","GMTSU",115,0)
 Q
"RTN","GMTSU",116,0)
NAME ; Format names ;6/30/89  11:20 ;
"RTN","GMTSU",117,0)
 ; Recieves: FILE (3 for User, 16 for Person, 6 for Provider)
"RTN","GMTSU",118,0)
 ;           IFN (Internal file # for above file),
"RTN","GMTSU",119,0)
 ;           NML (Desired length for name to be returned)
"RTN","GMTSU",120,0)
 ;           FNF (Flag to specify first name format: 0 for FI, 1 for FN)
"RTN","GMTSU",121,0)
 ; Returns: Lastname,First(name/initial) to specified length as NM
"RTN","GMTSU",122,0)
 ;
"RTN","GMTSU",123,0)
 N DIC,RAWNM,LN,FN,FA,NI,CH,X,Y
"RTN","GMTSU",124,0)
 S DIC=FILE,DIC(0)="NXZ",X=IFN
"RTN","GMTSU",125,0)
 ; DBIA 10006 call ^DIC
"RTN","GMTSU",126,0)
 D ^DIC S RAWNM=$S($D(Y(0,0)):Y(0,0),1:"UNKNOWN")
"RTN","GMTSU",127,0)
 S LN=$P(RAWNM,","),FN=$P(RAWNM,",",2)
"RTN","GMTSU",128,0)
 S FA=0 I $L(FN) F NI=1:1 S CH=$E(FN,NI) Q:CH?1A  S FA=NI
"RTN","GMTSU",129,0)
 I FA S FN=$E(FN,FA+1,$L(FN))
"RTN","GMTSU",130,0)
 I 'FNF S FN=$E(FN,1)
"RTN","GMTSU",131,0)
 S NM=$S($L(FN):LN_","_FN,1:LN),NM=$E(NM,1,NML)
"RTN","GMTSU",132,0)
 K FILE,IFN,NML,FNF
"RTN","GMTSU",133,0)
 Q
"RTN","GMTSU",134,0)
GETRANGE(FROMDATE,TODATE) ; Selection by Date Range (from and to dates)
"RTN","GMTSU",135,0)
 ;      VARIABLES LIST (OUTPUT)
"RTN","GMTSU",136,0)
 ; FROMDATE = FROM DATE
"RTN","GMTSU",137,0)
 ; TODATE = TO DATE
"RTN","GMTSU",138,0)
 N DIR,X,Y,DTOUT,DIRUT S DIR(0)="DO^:DT",DIR("A")="Enter Beginning Date (MM/DD/YY)" W !
"RTN","GMTSU",139,0)
 ; DBIA 10026 call ^DIR
"RTN","GMTSU",140,0)
 D ^DIR I $D(DIROUT)!$D(DUOUT)!$D(DTOUT)!$D(DIRUT) W ! Q
"RTN","GMTSU",141,0)
 S FROMDATE=Y I +FROMDATE>0 D
"RTN","GMTSU",142,0)
 . ; DBIA 10104 call $$UP^XLFSTR
"RTN","GMTSU",143,0)
 . ; DBIA 10103 call $$FMTE^XLFDT
"RTN","GMTSU",144,0)
 . W "  (",$$UP^XLFSTR($$FMTE^XLFDT(+FROMDATE,1)),")"
"RTN","GMTSU",145,0)
 . N DIR,X,Y S DIR(0)="DO^::EX",DIR("A")="Enter Ending Date (MM/DD/YY)" S DIR("B")="TODAY"
"RTN","GMTSU",146,0)
 . ; DBIA 10026 call ^DIR
"RTN","GMTSU",147,0)
 . D ^DIR I $D(DIROUT)!$D(DUOUT)!$D(DTOUT)!$D(DIRUT) K FROMDATE Q
"RTN","GMTSU",148,0)
 . I Y'>0 K FROMDATE Q
"RTN","GMTSU",149,0)
 . S TODATE=Y Q:TODATE>FROMDATE!(TODATE=FROMDATE) 
"RTN","GMTSU",150,0)
 . ; If 2nd date older than 1st date entered (Dates entered in reverse order)
"RTN","GMTSU",151,0)
 . N FRDT S FRDT=FROMDATE,FROMDATE=TODATE,TODATE=FRDT
"RTN","GMTSU",152,0)
 W !
"RTN","GMTSU",153,0)
 Q
"RTN","GMTSU",154,0)
OED() ; Other Editor - DIC("S")
"RTN","GMTSU",155,0)
 N COMP,OTHER,OWNER,OWNN,USER,AUSER,NAT S COMP=+($G(DA(1))) Q:'$D(^GMT(142,+COMP,0)) 0
"RTN","GMTSU",156,0)
 S OWNER=$P($G(^GMT(142,+COMP,0)),"^",3),OWNN=$$UNAM^GMTSU2(OWNER),NAT=+($P($G(^GMT(142,+COMP,"VA")),"^",1)),USER=+($G(DUZ)),AUSER=$$UACT^GMTSU2(+USER),OTHER=+($G(X))
"RTN","GMTSU",157,0)
 ;   If National Component and Uneditable
"RTN","GMTSU",158,0)
 W:+NAT=2 !!,"  Nationally exported Health Summary Type (uneditable)",! Q:+NAT=2 0
"RTN","GMTSU",159,0)
 ;   If OWNER is special case (national, uneditable)
"RTN","GMTSU",160,0)
 W:+OWNER>0&(OWNER<1)&(NAT'=1) !!,"  OWNER does not allow 'OTHER EDITORS'",! Q:+OWNER>0&(OWNER<1)&(NAT'=1) 0
"RTN","GMTSU",161,0)
 ;   If OWNER is special case (national, editable)
"RTN","GMTSU",162,0)
 Q:+OWNER>0&(OWNER<1)&(OWNER=USER)&(NAT=1) 1
"RTN","GMTSU",163,0)
 ;   If DUZ is inactive user, or the user is not the owner, quit
"RTN","GMTSU",164,0)
 W:+AUSER=0!(+OWNER=0)!(+OWNER'=+USER) !!,"  Only the OWNER may assign 'OTHER EDITORS'",! Q:+AUSER=0!(+OWNER=0)!(+OWNER'=+USER) 0
"RTN","GMTSU",165,0)
 ;   If OTHER is inactive user, quit
"RTN","GMTSU",166,0)
 S AUSER=$$UACT^GMTSU2(OTHER) W:+AUSER=0!(+OTHER'>.999999999) !!,"  Selected 'OTHER EDITOR' is not an active user",! Q:+AUSER=0!(+OTHER'>.999999999) 0
"RTN","GMTSU",167,0)
 ;   If OTHER=OWNER, quit
"RTN","GMTSU",168,0)
 W:+OTHER=+OWNER !!,"  ",OWNN," is the OWNER",! Q:+OTHER=+OWNER 0
"RTN","GMTSU",169,0)
 Q 1
"RTN","GMTSU",170,0)
FCLR(X) ; File Closed Root
"RTN","GMTSU",171,0)
 S X=$G(X) Q:+X=0 "" N GMTSL S GMTSL=$$FLOC(X),X=$S($E(GMTSL,$L(GMTSL))=",":$P(GMTSL,",")_")",1:$E(GMTSL,1,$L(GMTSL)-1)) Q:'$L(X) "" S:'$D(@X) X=""
"RTN","GMTSU",172,0)
 Q X
"RTN","GMTSU",173,0)
FSFN(X) ; File/Sub-File Name
"RTN","GMTSU",174,0)
 N FI,FR,%X,%Y S FI=$G(X) Q:+X=0 "" N DIERR,GMTSN,GMTSE
"RTN","GMTSU",175,0)
 ; DBIA 2052 call FILE^DID
"RTN","GMTSU",176,0)
 D FILE^DID(+FI,"N","NAME","GMTSN","GMTSE")
"RTN","GMTSU",177,0)
 S X="" S:'$D(DIERR) X=$$UP^XLFSTR($G(GMTSN("NAME"))) Q:$L(X) X
"RTN","GMTSU",178,0)
 K FR S %X="^DD("_+($G(FI))_",0,""NM"",",%Y="FR(" D %XY^%RCR
"RTN","GMTSU",179,0)
 S X=$$UP^XLFSTR($O(FR(""))) S:+X>0 X="" S:$L(X) X=X_" SUB-FILE" Q X
"RTN","GMTSU",180,0)
FNAM(X) ; File Name
"RTN","GMTSU",181,0)
 S X=$G(X) Q:+X=0 "" N DIERR,GMTSN,GMTSE
"RTN","GMTSU",182,0)
 ; DBIA 2052 call FILE^DID
"RTN","GMTSU",183,0)
 D FILE^DID(+X,"N","NAME","GMTSN","GMTSE")
"RTN","GMTSU",184,0)
 S X="" S:'$D(DIERR) X=$G(GMTSN("NAME")) Q X
"RTN","GMTSU",185,0)
FLOC(X) ; File location
"RTN","GMTSU",186,0)
 S X=$G(X) Q:+X=0 "" N DIERR,GMTSN,GMTSE
"RTN","GMTSU",187,0)
 ; DBIA 2052 call FILE^DID
"RTN","GMTSU",188,0)
 D FILE^DID(+X,"N","GLOBAL NAME","GMTSN","GMTSE")
"RTN","GMTSU",189,0)
 S X="" S:'$D(DIERR) X=$G(GMTSN("GLOBAL NAME")) Q X
"RTN","GMTSU",190,0)
FHDD(X) ; File has a DD?
"RTN","GMTSU",191,0)
 ; DBIA 2055 call VFIELD^DILFD
"RTN","GMTSU",192,0)
 S X=+($G(X)) Q:+($G(X))=0 0 S X=$$VFIELD^DILFD(X,.01),X=$S($L(X):1,1:0) Q X
"RTN","GMTSU",193,0)
FLDN(X,Y) ; Field Name
"RTN","GMTSU",194,0)
 ; DBIA 2052 call GET1^DID
"RTN","GMTSU",195,0)
 Q:+($G(X))=0!(+($G(Y))=0) "" S X=$$GET1^DID(+($G(X)),+($G(Y)),,"LABEL") Q X
"RTN","GMTSU",196,0)
FLDS(X,Y) ; Field Set of Codes
"RTN","GMTSU",197,0)
 ; DBIA 2052 call GET1^DID
"RTN","GMTSU",198,0)
 Q:+($G(X))=0!(+($G(Y))=0) "" Q:$$GET1^DID(+($G(X)),+($G(Y)),,"TYPE")'="SET" "" S X=$$GET1^DID(+($G(X)),+($G(Y)),,"POINTER") Q X
"RTN","GMTSU",199,0)
FLDI(X,Y) ; Field Input Transform
"RTN","GMTSU",200,0)
 ; DBIA 2052 call GET1^DID
"RTN","GMTSU",201,0)
 Q:+($G(X))=0!(+($G(Y))=0) "" S X=$$GET1^DID(+($G(X)),+($G(Y)),,"INPUT TRANSFORM") Q X
"VER")
8.0^22.0
**END**
**END**

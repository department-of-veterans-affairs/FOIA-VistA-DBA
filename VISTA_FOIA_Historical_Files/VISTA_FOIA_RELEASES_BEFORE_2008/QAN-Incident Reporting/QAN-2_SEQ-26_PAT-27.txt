$TXT Created by CURTIN,EDNA at MNTVBB.ISC-ALBANY.VA.GOV  (KIDS) on WEDNESDAY, 07/21/99 at 13:27
=============================================================================
Run Date: JUL 26, 1999                     Designation: QAN*2*27
Package : QAN - INCIDENT REPORTING            Priority: Mandatory
Version : 2        SEQ #26                      Status: Released
=============================================================================

Associated patches: (v)QAN*2*1     <<= must be installed BEFORE `QAN*2*27'
                    (v)QAN*2*14    <<= must be installed BEFORE `QAN*2*27'
                    (v)QAN*2*17    <<= must be installed BEFORE `QAN*2*27'
                    (v)QAN*2*20    <<= must be installed BEFORE `QAN*2*27'
                    (v)QAN*2*23    <<= must be installed BEFORE `QAN*2*27'

Subject: Y2K ISSUE/BRIEF INCIDENT EDIT

Category: 
  - Routine
  - Other

Description: 
============

 Danville, using a test system set for the year 2000, discovered that the
 current method of creating new Incident Report numbers will not work
 correctly after the beginning of year 2000.  This patch changes the method
 of determining the new Incident Report numbers. 
  
 In addition to the fact that the Incident Report numbers are not correctly
 constructed once year 2000 is reached it was discovered that there was
 another problem with the Incident Report numbers.  The format for the
 report numbers is site number followed by a decimal point followed by the
 two digit year, followed by the sequence number.  Currently, if a site has
 more than 9999 reports in the QA INCIDENT REPORT file (#742.4), report
 number 10000 would be assigned 500.100000, instead of 500.9910000.  (The
 logic took the 2 digit year, concatonated "0000" to it, then added the
 next sequence number to that.)  A change has been made in this patch to
 construct the numbers correctly.  If a site has already passed the 9999
 report point, the next report after installation will revert to the year
 99, but there will not be duplicate numbers.  For example, if the previous
 number was 500.1004427 the next number will be 500.9914428.  Also to
 prevent confusion after year 2000, the Ad Hoc Report [QAN ADHOC REPORT]
 can no longer sort by Incident Report numbers.  This change will prevent
 Incident Reports from the year 2000 and beyond from sorting ahead of the
 older records.  It was felt that date is a more useful sort criterium so
 this change should not cause inconvenience.
  
  
 This patch addresses issues about the Brief Incident Edit option [QAN
 INCIDENT REPORT]. Service level Risk users cannot edit Incident Reports,
 and if timed out before entering the patient name the whole Incident
 Report is deleted and they must start again.  Several changes have been
 made.  The prompt for the patient now comes earlier in the process so that
 the Incident Report is preserved even if the user does not finish the
 entry.  Also, at the end of the entry process the information is displayed
 on the screen, the user is asked "Is this information correct?", and if
 not, there is an opportunity to edit it.  There is a new option, Edit
 Existing Brief Incident [QAN BRIEF EDIT] that will be available to the
 service level users.  This option will limit availability to open
 Incidents originally entered by that user. The option is being sent as a
 stand-alone and should be placed on the menu being used by service level
 users.  These issues were addressed by NOIS ANN-0399-40036 and
 LEX-1297-41587.
  
 This patch also fixes a problem with the Ad Hoc report.  When sorting by a
 date range and Incident Case Status the report contained dates past the
 end of the date range.  This problem is addressed by NOIS EKH-0498-40693.
  
 This patch will disable the following options, which deal with the
 Regions, since there are no longer any regions.
     Mail to Region                   [QAN INCIDENT MAIL TO REGION]
     Early Warning System Manual      [QAN EARLY WARNING SYSTEM MAN]
     Incident Summary to Region       [QAN INCIDENT SUMMARY REGION]
     Edit Incident Regional Status    [QAN INCIDENT REGION STATUS]
  
  
 This patch addresses the following NOIS messages:
        ANN-0399-40036, EKH-0498-40693, and LEX-1297-41587 
  
  
 If installed during the normal work day it is recommended that the
 following menu options (File #19) and all of their descendants be
 disabled to prevent possible conflicts while running the KIDS Install.
 Other VistA users will not be affected.
  
        Incident Reporting Main Menu ... [QAN INCIDENT MAIN MENU]
        Incident Reporting Managers Menu [QAN MANAGER MENU]
  
 Install Time - less than 10 minutes
  
  
          ================INSTALLATION INSTRUCTIONS =================
   
   1.   LOAD TRANSPORT GLOBAL 
        ---------------------
        Choose the PackMan message containing this patch and invoke the 
        INSTALL/CHECK MESSAGE PackMan option.  
              
   2.   DISABLE ROUTINE MAPPING   (DSM for OpenM sites only) 
        -----------------------
        Disable routine mapping on all systems for the routines listed in 
        step 3 below.  
        NOTE:  If the routines included in this patch are not currently in 
        your mapped routine set, please skip this step.
   
   3.   ROUTINES SENT WITH PATCH 
        ------------------------
        The following is a list of the routines included in this patch.  
        The second line of each of these routines now looks like: 
   
            ;;2.0;Incident Reporting;**[patch list]**;08/07/1992 
   
                       CHECK^XTSUMBLD results
  
    Routine          Before Patch     After Patch   Patch List 
    -------          ------------     -----------   ----------
    QANAHOC            10977232         10907725    1,15,17,27
    QANCDNT            13620869         15719207    1,9,14,27
    QANEDIT              N/A            11275910    27
    QANQUCK            13918051         11220851    1,9,14,27
    QANUTL1            14355293         15147586    20,27
    QANUTL2            16057656         16081705    1,7,19,23,27
    QANUTL3             7364311          7657943    27
    QANVAL             13957840         14746652    1,27
   
         Total number of routines - 8
   
   4.   START UP KIDS 
        -------------
        Start up the Kernel Installation and Distribution System Menu 
        [XPD MAIN]: 
    
             Edits and Distribution ...  
             Utilities ...  
             Installation ...  
    
   Select Kernel Installation & Distribution System Option: INStallation 
                                                            ---
             Load a Distribution 
             Print Transport Global 
             Compare Transport Global to Current System 
             Verify Checksums in Transport Global 
             Install Package(s) 
             Restart Install of Package(s) 
             Unload a Distribution 
             Backup a Transport Global 
    
   Select Installation Option: 
    
   5.   Select Installation Option: 
        --------------------------
        NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
               NAME, enter QAN*2.0*27):
       
        a.  Backup a Transport Global - This option will create a backup
            message of any routines exported with this patch. It will not
            backup any other changes such as DD's or templates.
        b.  Compare Transport Global to Current System - This option will
            allow you to view all changes that will be made when this patch
            is installed.  It compares all components of this patch
            (routines, DD's, templates, etc.).
        c.  Verify Checksums in Transport Global - This option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
      
   6.   Select Installation Option: Install Package(s) 
                                    ----------------
        (When prompted for the INSTALL NAME enter QAN*2.0*27
        **This is the step to start the installation of this KIDS patch: 
    
        a.  Choose the Install Package(s) option to start the patch
            install.
        b.  When prompted 'Want to DISABLE Scheduled Options, Menu 
            Options, and Protocols? YES//' answer YES.
        c.  When prompted 'Enter options you wish to mark as 'Out Of
            Order':'  Enter the following options:
   
                Incident Reporting Main Menu ...   [QAN INCIDENT MAIN MENU]
                Incident Reporting Managers Menu   [QAN MANAGER MENU]
        d. When prompted 'Enter protocols you wish to mark as 'Out Of
           Order': press <return>.
  
   
 7.   ENABLE MENU OPTION
      ------------------
          Optional - If you disabled any menu options (file #19) prior to
          installing this patch, please be sure to enable them at this
          time.
  
  
 8.   ATTACH NEW OPTION TO MENU
      -------------------------
          Attach the new option Edit Existing brief Incident [QAN BRIEF
          EDIT] to the menu used at the site for service level users.

Routine Information:
====================

Routine Name:
  - QANCDNT


Routine Checksum:

Routine Name:
  - QANUTL2


Routine Checksum:

Routine Name:
  - QANVAL


Routine Checksum:

Routine Name:
  - QANAHOC


Routine Checksum:

Routine Name:
  - QANUTL1


Routine Checksum:

Routine Name:
  - QANUTL3


Routine Checksum:

Routine Name:
  - QANEDIT


Routine Checksum:

Routine Name:
  - QANQUCK


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : CURTIN,EDNA                    Date Entered : APR 19, 1999
Completed By: PETERSON,JAMES R             Date Completed: JUL 26, 1999
Released By : LEWIS-LITNER,ANN E           Date Released : JUL 26, 1999
=============================================================================


Packman Mail Message:
=====================

$END TXT

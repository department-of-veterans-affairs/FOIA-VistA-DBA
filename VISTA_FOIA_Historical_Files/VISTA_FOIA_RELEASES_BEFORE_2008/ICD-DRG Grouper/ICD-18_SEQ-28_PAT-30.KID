Released ICD*18*30 SEQ #28
Extracted from mail message
**KIDS**:ICD*18.0*30^

**INSTALL NAME**
ICD*18.0*30
"BLD",7310,0)
ICD*18.0*30^DRG GROUPER^0^3070904^y
"BLD",7310,1,0)
^^1^1^3070829^
"BLD",7310,1,1,0)
Patch fixes DRG calculations.
"BLD",7310,4,0)
^9.64PA^^
"BLD",7310,6)
1^
"BLD",7310,6.3)
5
"BLD",7310,"INI")
ICD1830G
"BLD",7310,"INID")
n^^n
"BLD",7310,"KRN",0)
^9.67PA^8989.52^19
"BLD",7310,"KRN",.4,0)
.4
"BLD",7310,"KRN",.401,0)
.401
"BLD",7310,"KRN",.402,0)
.402
"BLD",7310,"KRN",.403,0)
.403
"BLD",7310,"KRN",.5,0)
.5
"BLD",7310,"KRN",.84,0)
.84
"BLD",7310,"KRN",3.6,0)
3.6
"BLD",7310,"KRN",3.8,0)
3.8
"BLD",7310,"KRN",9.2,0)
9.2
"BLD",7310,"KRN",9.8,0)
9.8
"BLD",7310,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",7310,"KRN",9.8,"NM",1,0)
ICD1830G^^0^B881066
"BLD",7310,"KRN",9.8,"NM",2,0)
ICD1830V^^0^B732340
"BLD",7310,"KRN",9.8,"NM",3,0)
ICDDRG0^^0^B36037586
"BLD",7310,"KRN",9.8,"NM",4,0)
ICDTLB6C^^0^B58422258
"BLD",7310,"KRN",9.8,"NM","B","ICD1830G",1)

"BLD",7310,"KRN",9.8,"NM","B","ICD1830V",2)

"BLD",7310,"KRN",9.8,"NM","B","ICDDRG0",3)

"BLD",7310,"KRN",9.8,"NM","B","ICDTLB6C",4)

"BLD",7310,"KRN",19,0)
19
"BLD",7310,"KRN",19.1,0)
19.1
"BLD",7310,"KRN",101,0)
101
"BLD",7310,"KRN",409.61,0)
409.61
"BLD",7310,"KRN",771,0)
771
"BLD",7310,"KRN",870,0)
870
"BLD",7310,"KRN",8989.51,0)
8989.51
"BLD",7310,"KRN",8989.52,0)
8989.52
"BLD",7310,"KRN",8994,0)
8994
"BLD",7310,"KRN","B",.4,.4)

"BLD",7310,"KRN","B",.401,.401)

"BLD",7310,"KRN","B",.402,.402)

"BLD",7310,"KRN","B",.403,.403)

"BLD",7310,"KRN","B",.5,.5)

"BLD",7310,"KRN","B",.84,.84)

"BLD",7310,"KRN","B",3.6,3.6)

"BLD",7310,"KRN","B",3.8,3.8)

"BLD",7310,"KRN","B",9.2,9.2)

"BLD",7310,"KRN","B",9.8,9.8)

"BLD",7310,"KRN","B",19,19)

"BLD",7310,"KRN","B",19.1,19.1)

"BLD",7310,"KRN","B",101,101)

"BLD",7310,"KRN","B",409.61,409.61)

"BLD",7310,"KRN","B",771,771)

"BLD",7310,"KRN","B",870,870)

"BLD",7310,"KRN","B",8989.51,8989.51)

"BLD",7310,"KRN","B",8989.52,8989.52)

"BLD",7310,"KRN","B",8994,8994)

"BLD",7310,"PRE")
ICD1830V
"BLD",7310,"QUES",0)
^9.62^^
"BLD",7310,"REQB",0)
^9.611^1^1
"BLD",7310,"REQB",1,0)
ICD*18.0*27^1
"BLD",7310,"REQB","B","ICD*18.0*27",1)

"INI")
ICD1830G
"MBREQ")
0
"PKG",151,-1)
1^1
"PKG",151,0)
DRG GROUPER^ICD^DRG GROUPER
"PKG",151,20,0)
^9.402P^^
"PKG",151,22,0)
^9.49I^1^1
"PKG",151,22,1,0)
18.0^3001024^3010118^66481
"PKG",151,22,1,"PAH",1,0)
30^3070904^100850
"PKG",151,22,1,"PAH",1,1,0)
^^1^1^3070904
"PKG",151,22,1,"PAH",1,1,1,0)
Patch fixes DRG calculations.
"PRE")
ICD1830V
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","ICD1830G")
0^1^B881066^n/a
"RTN","ICD1830G",1,0)
ICD1830G ;;BAY/JAT - FY 2007 UPDATE;
"RTN","ICD1830G",2,0)
 ;;18.0;DRG Grouper;**30**;Oct 13,2000;Build 5
"RTN","ICD1830G",3,0)
 ;
"RTN","ICD1830G",4,0)
 D CC
"RTN","ICD1830G",5,0)
 Q
"RTN","ICD1830G",6,0)
CC ; update complications/comorbidities field in diag file
"RTN","ICD1830G",7,0)
 N LINE,X,ICDDIAG,ENTRY,IDENT,DA,DIE,DR,DUPE
"RTN","ICD1830G",8,0)
 F LINE=1:1 S X=$T(CCID+LINE) S ICDDIAG=$P(X,";;",2) Q:ICDDIAG="EXIT"  D
"RTN","ICD1830G",9,0)
 .S ENTRY=+$O(^ICD9("BA",$P(ICDDIAG,U)_" ",0)) I ENTRY D
"RTN","ICD1830G",10,0)
 ..; check for any dupe (there are some in MNTVBB)
"RTN","ICD1830G",11,0)
 ..S DUPE=+$O(^ICD9("BA",$P(ICDDIAG,U)_" ",ENTRY)) I DUPE Q
"RTN","ICD1830G",12,0)
 ..S IDENT=1
"RTN","ICD1830G",13,0)
 ..S DA=ENTRY,DIE="^ICD9("
"RTN","ICD1830G",14,0)
 ..S DR="70///^S X=IDENT"
"RTN","ICD1830G",15,0)
 ..D ^DIE
"RTN","ICD1830G",16,0)
 Q
"RTN","ICD1830G",17,0)
CCID ;
"RTN","ICD1830G",18,0)
 ;;799.02^
"RTN","ICD1830G",19,0)
 ;;EXIT
"RTN","ICD1830V")
0^2^B732340^n/a
"RTN","ICD1830V",1,0)
ICD1830V ;ALB/MRY - ENVIRONMENT CHECK; 10/2/03 3:32pm
"RTN","ICD1830V",2,0)
 ;;18.0;DRG Grouper;**30**;Oct 13,2000;Build 5
"RTN","ICD1830V",3,0)
 ;;
"RTN","ICD1830V",4,0)
EN ;
"RTN","ICD1830V",5,0)
 S XPDABORT=""
"RTN","ICD1830V",6,0)
 D PROGCHK(.XPDABORT)
"RTN","ICD1830V",7,0)
 I XPDABORT="" K XPDABORT
"RTN","ICD1830V",8,0)
 ;
"RTN","ICD1830V",9,0)
 Q
"RTN","ICD1830V",10,0)
 ;
"RTN","ICD1830V",11,0)
PROGCHK(XPDABORT) ;
"RTN","ICD1830V",12,0)
 I '$G(DUZ)!($G(DUZ(0))'="@")!('$G(DT))!($G(U)'="^") DO
"RTN","ICD1830V",13,0)
 .D BMES^XPDUTL("*****")
"RTN","ICD1830V",14,0)
 .D MES^XPDUTL("Your programming variables are not set up properly.")
"RTN","ICD1830V",15,0)
 .D MES^XPDUTL("Installation aborted.")
"RTN","ICD1830V",16,0)
 .D MES^XPDUTL("*****")
"RTN","ICD1830V",17,0)
 .S XPDABORT=2
"RTN","ICD1830V",18,0)
 .Q
"RTN","ICD1830V",19,0)
 Q
"RTN","ICD1830V",20,0)
 ;
"RTN","ICDDRG0")
0^3^B36037586^B35757184
"RTN","ICDDRG0",1,0)
ICDDRG0 ;ALB/GRR/EG/ADL - DRG GROUPER PROCESSING BEGINS ; 5/16/05 9:05pm
"RTN","ICDDRG0",2,0)
 ;;18.0;DRG Grouper;**1,2,7,10,14,17,20,24,27,30**;Oct 20, 2000;Build 5
"RTN","ICDDRG0",3,0)
 ;GROUPING PROCESS BEGINS
"RTN","ICDDRG0",4,0)
 ;
"RTN","ICDDRG0",5,0)
GROUP ;
"RTN","ICDDRG0",6,0)
 I $D(ICDSEX(1))&($D(ICDSEX(2))) S ICDRTC=4,ICDDRG=470 G KILL^ICDDRG
"RTN","ICDDRG0",7,0)
 I ICDMDC'=14,ICDMDC'=17,ICDMDC'=18,ICDMDC'=19,ICDMDC'=20,ICDMDC'=23,ICDMDC'=15 D:ICDOPCT<2  I "468^476^477"[ICDRG G END
"RTN","ICDDRG0",8,0)
 . ;I ICDPD["M",ICDOR'["a" S ICDPDRG(344)="",ICDOPCT=0
"RTN","ICDDRG0",9,0)
 . I $D(ICDF) Q
"RTN","ICDDRG0",10,0)
 . I ICDPD["M",ICDOR'["y" S ICDOPCT=0 Q
"RTN","ICDDRG0",11,0)
 .I ICDORNI["O",ICDNOR=ICDONR,ICDNOR>0,'$D(ICDPDRG(377)),ICDORNI'["p" S ICDRG=$S($D(ICDORNI("O")):468,ICDORNI["y":476,ICDORNI["z":477,1:468) Q
"RTN","ICDDRG0",12,0)
 .I ICDOPNR S ICDRG=$S(ICDORNI["y":476,1:468),ICDOPNR=0 Q
"RTN","ICDDRG0",13,0)
 ;
"RTN","ICDDRG0",14,0)
 ;if number of non-extensive ORs eqs # OR, 477
"RTN","ICDDRG0",15,0)
 ;
"RTN","ICDDRG0",16,0)
 I ICDMDC'=14,ICDMDC'=17,ICDMDC'=18,ICDMDC'=19,ICDMDC'=20,ICDMDC'=23,ICDMDC'=15,ICDORNI'["y"&(ICDORNI'="")&(ICDORNI["z") D  I ICDRG=477 G END
"RTN","ICDDRG0",17,0)
 . I $D(ICDF) Q
"RTN","ICDDRG0",18,0)
 . NEW K S K=$$ORNI(ICDORNI) I K=ICDOPCT S ICDRG=477 Q
"RTN","ICDDRG0",19,0)
 ;
"RTN","ICDDRG0",20,0)
 ;if number of non-extensive ORs+prostatics eqs # OR, 476
"RTN","ICDDRG0",21,0)
 ;
"RTN","ICDDRG0",22,0)
 I ICDMDC'=14,ICDMDC'=17,ICDMDC'=18,ICDMDC'=19,ICDMDC'=20,ICDMDC'=23,ICDMDC'=15,ICDORNI["y"&(ICDORNI'="") D  I ICDRG=476 G END
"RTN","ICDDRG0",23,0)
 .N K S K=$$ORNI(ICDORNI) I K=ICDOPCT&(ICDNOR=ICDONR) S ICDRG=476 Q
"RTN","ICDDRG0",24,0)
 I ICDMDC'=14,ICDMDC'=17,ICDMDC'=18,ICDMDC'=19,ICDMDC'=20,ICDMDC'=23,ICDMDC'=15,ICDNOR=ICDONR&(ICDOPCT>0) S ICDRG=468 G END
"RTN","ICDDRG0",25,0)
 I ICDMDC=5,ICDOR'["O" S ICDRTC=$S(ICDEXP="":5,1:"") S:ICDRTC'="" ICDRG=470 D:ICDRTC="" MI G END
"RTN","ICDDRG0",26,0)
 ;I ICDMDC=18,ICDOR["O"!(ICDORNI["O") S ICDRG=415 G END  ;;disabled by ICD*18*24 and new DRGs 578/579 - see ICDTLB6C
"RTN","ICDDRG0",27,0)
 I ICDMDC=19,ICDOCNT>0,ICDOR["O" S (ICDRG,HICDRG)=424 D CKDRG
"RTN","ICDDRG0",28,0)
 I ICDMDC=23,ICDOR["O"!(ICDORNI["O") S ICDRG=461 G END
"RTN","ICDDRG0",29,0)
 I ICDMDC=14 D ^ICDDRG14 I ICDRG]"" G END
"RTN","ICDDRG0",30,0)
 I ICDMDC=20 S ICDRTC=$S(ICDDMS="":7,1:"") I ICDDMS'=0 S ICDRG=$S(ICDDMS="":470,1:433) G END
"RTN","ICDDRG0",31,0)
 I ICDMDC=22 S ICDRTC=$S(ICDTRS="":6,1:"") S:ICDRTC'="" ICDRG=470 D:ICDRTC="" CKBURN G END
"RTN","ICDDRG0",32,0)
 I ICDMDC=15 S ICDRTC=$S(ICDEXP="":5,ICDTRS="":6,1:"") I ICDTRS'=0 S ICDRG=$S(ICDRTC'="":470,1:385) G END
"RTN","ICDDRG0",33,0)
NEONATE I 'ICDNOR!('$D(ICDODRG)) S ICDRG=$O(ICDPDRG(0)) X "I ICDMDC=15,$D(ICDSDRG),$O(ICDSDRG(0))<ICDRG S ICDRG=$S($D(ICDPDRG(391)):391,$D(ICDPDRG(387)):387,1:$O(ICDSDRG(0)))" D  D DODRG G GETMOR:ICDRG="",END
"RTN","ICDDRG0",34,0)
 . N X,X1,X2,%
"RTN","ICDDRG0",35,0)
 . S X1=$S($G(DGADM):$G(DGADM),1:DT),X2=$G(DOB) I X1,X2 D ^%DTC I X<29 D NBCOMP Q
"RTN","ICDDRG0",36,0)
 . I ICDRG<385!(ICDRG>391) Q
"RTN","ICDDRG0",37,0)
 .; I "^11917^11918^11921^"[("^"_ICDDX(1)_"^") S ICDRG=395 Q
"RTN","ICDDRG0",38,0)
 . I $O(ICDRG(391)) S ICDRG=$O(ICDRG(391)) Q
"RTN","ICDDRG0",39,0)
 . I 'ICDRG S ICDRG=470,ICDRTC=8
"RTN","ICDDRG0",40,0)
 I AGE="",ICDMDC=3 S ICDRTC=3,ICDRG=470 G END
"RTN","ICDDRG0",41,0)
 D ^ICDDRG1:ICDMDC=1,^ICDDRG2:ICDMDC=2,^ICDDRG3:ICDMDC=3,^ICDDRG5:ICDMDC=5,^ICDDRG6:ICDMDC=6,^ICDDRG7:ICDMDC=7,^ICDDRG8:ICDMDC=8,^ICDDRG9:ICDMDC=9,^ICDDRG10:ICDMDC=10,^ICDDRG11:ICDMDC=11,^ICDDRG12:ICDMDC=12,^ICDDRG13:ICDMDC=13
"RTN","ICDDRG0",42,0)
 D ^ICDDRG17:ICDMDC=17
"RTN","ICDDRG0",43,0)
CONT G:ICDMDC=15 GETMOR S (ICDRG,HICDRG)=$O(ICDODRG(0)) G:ICDRG'>0 ENTER
"RTN","ICDDRG0",44,0)
 D DODRG
"RTN","ICDDRG0",45,0)
 G:ICDRG'>0 LOOK8:ICDMDC=8,AGAIN G END
"RTN","ICDDRG0",46,0)
ENTER I 'ICDNOR,ICDORNR'=0,ICDMDC'=20,ICDMDC'=15 S ICDRG=468 G END
"RTN","ICDDRG0",47,0)
GETMOR S (ICDRG,HICDRG)=$O(ICDPDRG(0)) S:ICDRG'>0 (ICDRG,HICDRG)=469 ;I ICDMDC=15,'$D(ICDODRG),$D(ICDSDRG),$O(ICDSDRG(0))<ICDRG S (ICDRG,HICDRG)=$O(ICDSDRG(0))
"RTN","ICDDRG0",48,0)
CKDRG D DODRG
"RTN","ICDDRG0",49,0)
 I ICDRG="" K ICDPDRG(HICDRG) G GETMOR
"RTN","ICDDRG0",50,0)
DODRG ;Go to DRG file and retrieve table entry to use if defined
"RTN","ICDDRG0",51,0)
 N ICDMCV,ICDMCV1,ICDMCV2
"RTN","ICDDRG0",52,0)
 N DRGFY,ICDREF S (DRGFY,ICDREF)=""
"RTN","ICDDRG0",53,0)
 I ICDRG S DRGFY=$O(^ICD(ICDRG,2,"B",$P(+$G(ICDDATE),".")_.01),-1)
"RTN","ICDDRG0",54,0)
 I 'DRGFY S DRGFY=3061001 ;default to current fiscal year
"RTN","ICDDRG0",55,0)
 S ICDREF=$O(^ICD(+ICDRG,2,"B",+DRGFY,ICDREF))
"RTN","ICDDRG0",56,0)
 I ICDREF'="" D
"RTN","ICDDRG0",57,0)
 . S ICDREF=$P($G(^ICD(+ICDRG,2,ICDREF,0)),U,3)
"RTN","ICDDRG0",58,0)
 . S ICDREF="DRG"_ICDRG_"^"_ICDREF D @ICDREF K ICDREF
"RTN","ICDDRG0",59,0)
 I ICDOR["4" D DRG232^ICDTLB3
"RTN","ICDDRG0",60,0)
 Q
"RTN","ICDDRG0",61,0)
ORNI(X) ;
"RTN","ICDDRG0",62,0)
 N I,K
"RTN","ICDDRG0",63,0)
 S K=0 F I=1:1:$L(ICDORNI) I $E(ICDORNI,I,I)="z"!($E(ICDORNI,I,I)="y") S K=K+1
"RTN","ICDDRG0",64,0)
 Q K
"RTN","ICDDRG0",65,0)
END ;
"RTN","ICDDRG0",66,0)
 D:ICDP24'=""!($D(ICDS24)) CKMST^ICDDRGX S ICDDRG=ICDRG
"RTN","ICDDRG0",67,0)
 ;ICD*18*24 check for higher numbered DRG (such as new DRG 561) before checking for 489 in CKHIV^ICDDRGX
"RTN","ICDDRG0",68,0)
 I ICDRG=489!(ICDRG=490)!(ICDRG=543&($G(ICDOR)="")) S ICDRG=$P($G(ICDPDRG),U,2) I ICDRG=543 S ICDRG=561
"RTN","ICDDRG0",69,0)
 D:$G(ICDP25)=1!(($G(ICDP25)>1)&($D(ICDS25(1)))) CKHIV^ICDDRGX S ICDDRG=ICDRG
"RTN","ICDDRG0",70,0)
 ; this will effectively make DRG 103 into a pre-MDC (ICD*18*1)
"RTN","ICDDRG0",71,0)
 I $D(ICDOP(" 33.6"))!$D(ICDOP(" 37.5"))!(ICDDATE>3030930.9&($D(ICDOP(" 37.51"))!$D(ICDOP(" 37.66")))) S ICDRG=103,ICDNMDC(1)=""
"RTN","ICDDRG0",72,0)
 I (ICDDATE>3050930.9)&($D(ICDOP(" 37.64")))&($D(ICDOP(" 37.65"))) S ICDRG=103,ICDNMDC(1)=""
"RTN","ICDDRG0",73,0)
 I (ICDDATE>3060930.9)&($D(ICDOP(" 37.63")))&($D(ICDOP(" 37.64"))) S ICDRG=103,ICDNMDC(1)=""
"RTN","ICDDRG0",74,0)
 I $D(ICDOP(" 39.65")) S ICDRG=541,ICDNMDC(1)=""
"RTN","ICDDRG0",75,0)
 ; this will create DRGs 512/513 as pre-MDC
"RTN","ICDDRG0",76,0)
 I $D(ICDOP(" 52.80"))!$D(ICDOP(" 52.82")) S ICDRG=513,ICDNMDC(1)=""
"RTN","ICDDRG0",77,0)
 I ICDRG=513 I $D(ICDOP(" 55.69")) S ICDRG=512
"RTN","ICDDRG0",78,0)
 ; this will create DRG 481 as pre-MDC - loops thru 41.00 thru .09
"RTN","ICDDRG0",79,0)
 N X S X=0 F  S X=$O(ICDOP(X)) Q:X=""  I X["41.0" S ICDRG=481,ICDNMDC(1)=""
"RTN","ICDDRG0",80,0)
 I $D(ICDNMDC(1)) I ICDNMDC(1)="" D CKNMDC^ICDDRGX S ICDDRG=ICDRG K ICDNMDC
"RTN","ICDDRG0",81,0)
 I ICDRG=468 D CHKMDC4^ICDDRGX D DODRG S ICDDRG=ICDRG
"RTN","ICDDRG0",82,0)
 S:ICDRTC="" ICDRTC=0
"RTN","ICDDRG0",83,0)
 S ICDTMP=$$DRG^ICDGTDRG(ICDDRG,ICDDATE) I '$P(ICDTMP,U,14) S ICDDRG=470
"RTN","ICDDRG0",84,0)
 G KILL^ICDDRG
"RTN","ICDDRG0",85,0)
MI ;
"RTN","ICDDRG0",86,0)
 ; if PTCA and not a bypass
"RTN","ICDDRG0",87,0)
 I ICDOR["1"!($D(ICDOP(" 37.90"))) I ICDOR'["b"&(ICDOR'["6") I ICDDATE>3050930.9 D DRG516^ICDTLB6B Q
"RTN","ICDDRG0",88,0)
 I ICDPD["A" D EN1^ICDDRG5 I ICDCC3 S ICDRG=$O(ICDODRG(0)) D DODRG Q
"RTN","ICDDRG0",89,0)
 I ICDPD["AI"!(ICDSD["AI") D  Q
"RTN","ICDDRG0",90,0)
 . I $D(ICDOP(" 36.07")) I $D(ICDOP(" 37.26"))!($D(ICDOP(" 37.27"))) S ICDRG=526 Q
"RTN","ICDDRG0",91,0)
 . S ICDRG=$S($S($D(ICDEXP):ICDEXP,1:0):123,ICDPD["V"!(ICDSD["V"):121,1:122)
"RTN","ICDDRG0",92,0)
 I $D(ICDOP(" 37.26"))&($D(ICDOP(" 39.61"))) S ICDRG=108 Q
"RTN","ICDDRG0",93,0)
 ;I $D(ICDOP(" 37.26")) S ICDRG=112 Q
"RTN","ICDDRG0",94,0)
 I $D(ICDOP(" 36.07")) I $D(ICDOP(" 37.26"))!($D(ICDOP(" 37.27"))) S ICDRG=527 Q
"RTN","ICDDRG0",95,0)
 I $D(ICDOP(" 36.06")) I $D(ICDOP(" 37.26"))!$D(ICDOP(" 37.27")) S ICDRG=517 Q
"RTN","ICDDRG0",96,0)
 I $D(ICDOP(" 37.26"))!$D(ICDOP(" 37.27")) S ICDRG=518 Q 
"RTN","ICDDRG0",97,0)
 I ICDOR["H" S ICDRG=$S(ICDPD["X"!(ICDSD["X"):124,1:125) Q
"RTN","ICDDRG0",98,0)
 K ICDPDRG(124)
"RTN","ICDDRG0",99,0)
 I ICDOR["p" S ICDRG=$O(ICDODRG(0)) D DODRG Q
"RTN","ICDDRG0",100,0)
 I ICDOR["F" S ICDRG=$O(ICDODRG(0)) D DODRG Q
"RTN","ICDDRG0",101,0)
 E  K ICDPDRG(121) S ICDRG=$O(ICDPDRG(0)) D DODRG Q
"RTN","ICDDRG0",102,0)
 ;
"RTN","ICDDRG0",103,0)
CKBURN ; MDC22 - Burns (extensive, full thickness, or non-extensive)
"RTN","ICDDRG0",104,0)
 D
"RTN","ICDDRG0",105,0)
 . I ICDPD["*"!(ICDSD["*") S ICDRG=$S(ICDOR["k":504,1:505) Q
"RTN","ICDDRG0",106,0)
 . I ICDPD["b"!(ICDSD["b") D FTBURN Q
"RTN","ICDDRG0",107,0)
 . S ICDRG=$S(ICDCC!(ICDPD["T")!(ICDSD["T"):510,1:511)
"RTN","ICDDRG0",108,0)
 Q
"RTN","ICDDRG0",109,0)
 ;
"RTN","ICDDRG0",110,0)
AGAIN G:'$D(ICDODRG) ENTER
"RTN","ICDDRG0",111,0)
 K ICDODRG(HICDRG) I $O(ICDODRG(HICDRG))'>0 K ICDODRG G GROUP
"RTN","ICDDRG0",112,0)
 S ICDRG=$O(ICDODRG(HICDRG)) G GROUP
"RTN","ICDDRG0",113,0)
 ;
"RTN","ICDDRG0",114,0)
 ;
"RTN","ICDDRG0",115,0)
LOOK8 G:'$D(ICDJ) GETMOR
"RTN","ICDDRG0",116,0)
 S ICDJ=$O(ICDJ(0)) G:ICDJ'>0 GETMOR
"RTN","ICDDRG0",117,0)
 K ICDJ(ICDJ),ICDODRG D END^ICDDRG8 G GETMOR:'$D(ICDODRG),CONT
"RTN","ICDDRG0",118,0)
 Q
"RTN","ICDDRG0",119,0)
 ;
"RTN","ICDDRG0",120,0)
NBCOMP ; check for complication related to NB
"RTN","ICDDRG0",121,0)
 I ICDSD'["J"!'$D(ICDSDRG) Q
"RTN","ICDDRG0",122,0)
 N ICDSDXCK
"RTN","ICDDRG0",123,0)
 S ICDSDXCK=$O(ICDSDRG(0))
"RTN","ICDDRG0",124,0)
 I ICDSDXCK<ICDRG,ICDSDXCK>384,ICDSDXCK<392 D
"RTN","ICDDRG0",125,0)
 . S ICDRG=$S($D(ICDPDRG(391)):391,$D(ICDPDRG(387)):387,1:$O(ICDSDRG(0)))
"RTN","ICDDRG0",126,0)
 Q
"RTN","ICDDRG0",127,0)
 ;
"RTN","ICDDRG0",128,0)
FTBURN ; full thickness burn check
"RTN","ICDDRG0",129,0)
 I ICDSD["j"!(ICDOR["k") D
"RTN","ICDDRG0",130,0)
 . I ICDCC!(ICDPD["T")!(ICDSD["T") S ICDRG=506
"RTN","ICDDRG0",131,0)
 . E  S ICDRG=507
"RTN","ICDDRG0",132,0)
 E  D
"RTN","ICDDRG0",133,0)
 . I ICDCC!(ICDPD["T")!(ICDSD["T") S ICDRG=508
"RTN","ICDDRG0",134,0)
 . E  S ICDRG=509
"RTN","ICDDRG0",135,0)
 Q
"RTN","ICDTLB6C")
0^4^B58422258^B58004450
"RTN","ICDTLB6C",1,0)
ICDTLB6C ;ALB/EG/MRY - GROUPER UTILITY FUNCTIONS FY 2007; 9/29/03 2:47pm ; 6/28/05 4:06pm
"RTN","ICDTLB6C",2,0)
 ;;18.0;DRG Grouper;**24,30**;Oct 20, 2000;Build 5
"RTN","ICDTLB6C",3,0)
DRG403 S ICDRG=$S(ICDPD["l":$S(AGE="":470,AGE<18:405,1:473),ICDOR["O"!(ICDORNI["O"):$S(ICDCC:401,1:402),ICDCC:403,1:404),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6C",4,0)
DRG404 S ICDRG=$S(ICDPD["l":$S(AGE="":470,AGE<18:405,1:473),ICDOR["O"!(ICDORNI["O"):$S(ICDCC:401,1:402),ICDCC:403,1:404),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6C",5,0)
DRG405 D DRG404 Q
"RTN","ICDTLB6C",6,0)
DRG406 ;
"RTN","ICDTLB6C",7,0)
 I ICDORNI["K" D
"RTN","ICDTLB6C",8,0)
 .S ICDRG=$S((ICDPD["L")&(ICDCC):539,ICDPD["L":540,ICDCC:406,1:407)
"RTN","ICDTLB6C",9,0)
 I ICDORNI'["K" D DRG408
"RTN","ICDTLB6C",10,0)
 Q
"RTN","ICDTLB6C",11,0)
DRG407 D DRG406 Q
"RTN","ICDTLB6C",12,0)
DRG408 I $D(ICDDX(1))&(ICDOPCT=0) D  Q:ICDRG=409
"RTN","ICDTLB6C",13,0)
 .I ICDDX(1)=$O(^ICD9("AB","V58.0 ",0)) S ICDRG=409 Q
"RTN","ICDTLB6C",14,0)
 .I ICDDX(1)=$O(^ICD9("AB","V67.1 ",0)) S ICDRG=409 Q
"RTN","ICDTLB6C",15,0)
 .Q
"RTN","ICDTLB6C",16,0)
 I $D(ICDDX(1))&(ICDOPCT=0) D  Q:"410^492"[ICDRG
"RTN","ICDTLB6C",17,0)
 .I ICDDX(1)=$O(^ICD9("AB","V58.11 ",0)) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB6C",18,0)
 .I ICDDX(1)=$O(^ICD9("AB","V58.12 ",0)) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB6C",19,0)
 .I ICDDX(1)=$O(^ICD9("AB","V67.2 ",0)) S ICDRG=$S(ICDSD["2":492,1:410) Q
"RTN","ICDTLB6C",20,0)
 I ICDOPCT>0 S ICDRG=$S(ICDPD'["L":408,ICDCC:401,1:402) Q
"RTN","ICDTLB6C",21,0)
 I ICDOPCT=0 D DRG412
"RTN","ICDTLB6C",22,0)
 Q
"RTN","ICDTLB6C",23,0)
DRG411 S ICDRG=$S(ICDOR["O"!(ICDORNI["O"):408,ICDOR["N":412,1:411) Q
"RTN","ICDTLB6C",24,0)
DRG412 ;S ICDRG=$S(ICDOR["O"!(ICDORNI["O"):408,ICDOR["N"&($D(ICDPDRG(412))):412,$D(ICDPDRG(411)):411,ICDCC:413,1:414)
"RTN","ICDTLB6C",25,0)
 I ICDOPCT>0 D DRG408 Q
"RTN","ICDTLB6C",26,0)
 D DRG412^ICDTLB61
"RTN","ICDTLB6C",27,0)
 Q
"RTN","ICDTLB6C",28,0)
DRG413 S ICDRG=$S(ICDCC:413,1:414) Q
"RTN","ICDTLB6C",29,0)
DRG414 S ICDRG=$S(ICDCC:413,1:414) Q
"RTN","ICDTLB6C",30,0)
DRG416 S ICDRG=$S(ICDOR["O":578,AGE="":470,AGE>17:576,1:417),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) I ICDRG=576&($D(ICDOP(" 96.72"))) S ICDRG=575
"RTN","ICDTLB6C",31,0)
 Q
"RTN","ICDTLB6C",32,0)
DRG417 S ICDRG=$S(ICDOR["O":578,AGE="":470,AGE>17:576,1:417),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6C",33,0)
DRG418 S ICDRG=$S(ICDOR["O":579,1:418) Q
"RTN","ICDTLB6C",34,0)
DRG419 S ICDRG=$S(ICDOR["O":578,AGE="":470,AGE<18:422,ICDCC:419,1:420),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6C",35,0)
DRG420 S ICDRG=$S(ICDOR["O":578,AGE="":470,AGE<18:422,ICDCC:419,1:420),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6C",36,0)
DRG421 S ICDRG=$S(ICDOR["O":578,AGE="":470,AGE>17:421,1:422),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6C",37,0)
DRG422 S ICDRG=$S(ICDOR["O":578,AGE="":470,AGE>17:421,1:422),ICDRTC=$S(ICDRG=470:3,1:ICDRTC) Q
"RTN","ICDTLB6C",38,0)
DRG423 S ICDRG=$S(ICDOR["O":578,1:423) I ICDRG=578&(ICDDX(1)=7615) S ICDRG=579
"RTN","ICDTLB6C",39,0)
 Q
"RTN","ICDTLB6C",40,0)
DRG424 S ICDRG=$S(ICDOR["O":424,1:425) Q
"RTN","ICDTLB6C",41,0)
DRG425 S ICDRG=$S(ICDOR["O":424,1:425) Q
"RTN","ICDTLB6C",42,0)
DRG426 S ICDRG=$S(ICDOR["O":424,1:426) Q
"RTN","ICDTLB6C",43,0)
DRG427 S ICDRG=$S(ICDOR["O":424,1:427) Q
"RTN","ICDTLB6C",44,0)
DRG428 S ICDRG=$S(ICDOR["O":424,1:428) Q
"RTN","ICDTLB6C",45,0)
DRG429 S ICDRG=$S(ICDOR["O":424,1:429) Q
"RTN","ICDTLB6C",46,0)
DRG430 S ICDRG=$S(ICDOR["O":424,1:430) Q
"RTN","ICDTLB6C",47,0)
DRG431 S ICDRG=$S(ICDOR["O":424,1:431) Q
"RTN","ICDTLB6C",48,0)
DRG432 S ICDRG=$S(ICDOR["O":424,1:432) Q
"RTN","ICDTLB6C",49,0)
DRG434 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6C",50,0)
DRG435 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6C",51,0)
DRG436 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6C",52,0)
DRG437 S ICDRG=$S(ICDPD["t"!(ICDSD["t"):$S(ICDOR["D":437,ICDOR["R":436,ICDCC:434,1:435),ICDCC:434,1:435) Q
"RTN","ICDTLB6C",53,0)
DRG439 S ICDRG=$S($D(ICDODRG(440)):440,1:439) Q
"RTN","ICDTLB6C",54,0)
DRG442 S ICDRG=$S(ICDCC:442,1:443) Q
"RTN","ICDTLB6C",55,0)
DRG443 D EN1^ICDDRG5 S ICDRG=$S(ICDCC3:$S(ICDCC:442,1:443),1:"") Q
"RTN","ICDTLB6C",56,0)
DRG444 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",57,0)
 Q
"RTN","ICDTLB6C",58,0)
DRG445 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",59,0)
 Q
"RTN","ICDTLB6C",60,0)
DRG446 S ICDRG=$S(AGE<18:446,ICDCC:444,1:445) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",61,0)
 Q
"RTN","ICDTLB6C",62,0)
DRG447 S ICDRG=$S(AGE>17:447,1:448) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",63,0)
 Q
"RTN","ICDTLB6C",64,0)
DRG448 S ICDRG=$S(AGE>17:447,1:448) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",65,0)
 Q
"RTN","ICDTLB6C",66,0)
DRG449 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",67,0)
 Q
"RTN","ICDTLB6C",68,0)
DRG450 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",69,0)
 Q
"RTN","ICDTLB6C",70,0)
DRG451 S ICDRG=$S(AGE<18:451,ICDCC:449,1:450) I AGE="" S ICDRG=470,ICDRTC=3
"RTN","ICDTLB6C",71,0)
 Q
"RTN","ICDTLB6C",72,0)
DRG452 S ICDRG=$S(ICDCC:452,1:453) Q
"RTN","ICDTLB6C",73,0)
DRG453 S ICDRG=$S(ICDCC:452,1:453) Q
"RTN","ICDTLB6C",74,0)
DRG454 S ICDRG=$S(ICDCC:454,1:455) Q
"RTN","ICDTLB6C",75,0)
DRG455 S ICDRG=$S(ICDCC:454,1:455) Q
"RTN","ICDTLB6C",76,0)
DRG462 S ICDRG=$S(ICDOR["O":461,1:462) Q
"RTN","ICDTLB6C",77,0)
DRG463 S ICDRG=$S(ICDOR["O":461,ICDCC:463,1:464) Q
"RTN","ICDTLB6C",78,0)
DRG464 S ICDRG=$S(ICDOR["O":461,ICDCC:463,1:464) Q
"RTN","ICDTLB6C",79,0)
DRG465 S ICDRG=$S(ICDOR["O":461,ICDSD["m":465,1:466) Q
"RTN","ICDTLB6C",80,0)
DRG466 S ICDRG=$S(ICDOR["O":461,ICDSD["m":465,1:466) Q
"RTN","ICDTLB6C",81,0)
DRG467 S ICDRG=$S(ICDOR["O":461,1:467) Q
"RTN","ICDTLB6C",82,0)
DRG471 S ICDRG=$S($F($P(ICDOR,"M",2,99),"M"):471,1:"") Q
"RTN","ICDTLB6C",83,0)
DRG475 S ICDRG=$S(ICDOR["V":475,1:$S($D(ICDPDRG):$O(ICDPDRG(0)),1:468)) I ICDRG<468 D DODRG^ICDDRG0
"RTN","ICDTLB6C",84,0)
 Q
"RTN","ICDTLB6C",85,0)
DRG478 S ICDRG=$S(ICDOR["O"&ICDCC:478,1:479)
"RTN","ICDTLB6C",86,0)
 I ICDRG=478 D DRG553^ICDTLB6C
"RTN","ICDTLB6C",87,0)
 Q
"RTN","ICDTLB6C",88,0)
DRG479 G DRG478
"RTN","ICDTLB6C",89,0)
DRG493 ;I (ICDI-1)=1,'ICDCC S ICDCC=$S($D(^ICD9("ACC",ICDDX(1),ICDDX(1))):1,1:0)
"RTN","ICDTLB6C",90,0)
 S ICDRG=$S(ICDCC:493,1:494) Q
"RTN","ICDTLB6C",91,0)
DRG494 ;I (ICD-1),'ICDCC S ICDCC=$S($D(^ICD9("ACC",ICDDX(1),ICDDX(1))):1,1:0)
"RTN","ICDTLB6C",92,0)
 S ICDRG=$S(ICDCC:493,1:494) Q
"RTN","ICDTLB6C",93,0)
DRG495 Q
"RTN","ICDTLB6C",94,0)
DRG496 S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498)
"RTN","ICDTLB6C",95,0)
     I ICDRG=497!(ICDRG=498) I ICDPD["6" S ICDRG=546 Q
"RTN","ICDTLB6C",96,0)
     I ICDRG=497!(ICDRG=498) I $D(ICDDXT("737.40"))!($D(ICDDXT("737.41")))!($D(ICDDXT("737.42")))!($D(ICDDXT("737.43"))) S ICDRG=546
"RTN","ICDTLB6C",97,0)
     Q 
"RTN","ICDTLB6C",98,0)
DRG497 G DRG496  ;S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498) Q
"RTN","ICDTLB6C",99,0)
DRG498 G DRG496  ;S ICDRG=$S(ICDOR["F":496,ICDCC:497,1:498) Q
"RTN","ICDTLB6C",100,0)
DRG499 S ICDRG=$S(ICDCC:499,1:500) Q
"RTN","ICDTLB6C",101,0)
DRG500 S ICDRG=$S(ICDCC:499,1:500) Q
"RTN","ICDTLB6C",102,0)
DRG501 D
"RTN","ICDTLB6C",103,0)
 . I (ICDPD["k") D
"RTN","ICDTLB6C",104,0)
 .. I ICDCC S ICDRG=501
"RTN","ICDTLB6C",105,0)
 .. I 'ICDCC S ICDRG=502
"RTN","ICDTLB6C",106,0)
 . E  S ICDRG=503
"RTN","ICDTLB6C",107,0)
 Q
"RTN","ICDTLB6C",108,0)
DRG502 D DRG501 Q
"RTN","ICDTLB6C",109,0)
DRG503 D DRG501 Q
"RTN","ICDTLB6C",110,0)
DRG514 ; Replaced with DRG535
"RTN","ICDTLB6C",111,0)
 N ICDE1,ICDE2
"RTN","ICDTLB6C",112,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&($D(ICDOP(" 37.96"))):1,1:0)
"RTN","ICDTLB6C",113,0)
 S ICDE2=$S($D(ICDOP(" 37.97"))&($D(ICDOP(" 37.98"))):1,1:0)
"RTN","ICDTLB6C",114,0)
 S ICDRG=470
"RTN","ICDTLB6C",115,0)
 I $D(ICDOP(" 37.94")) I ICDE1+ICDE2=0 S ICDRG=515
"RTN","ICDTLB6C",116,0)
 I '$D(ICDOP(" 37.94")) I ICDE1!ICDE2 S ICDRG=515
"RTN","ICDTLB6C",117,0)
 ; "HN" in ICDOR represents OR proc 37.21-.23, 37.26, 88.52-.58
"RTN","ICDTLB6C",118,0)
 I ICDRG=515 I ICDOR["HN" S ICDRG=514
"RTN","ICDTLB6C",119,0)
 Q
"RTN","ICDTLB6C",120,0)
DRG515 D DRG535 Q
"RTN","ICDTLB6C",121,0)
DRG516 ; DRG 516,517,526 and 527 replaced by DRG 555-558 respectively
"RTN","ICDTLB6C",122,0)
 ; ICD*18*30 DRG551 is higher in surgical hierarchy
"RTN","ICDTLB6C",123,0)
 I ICDRG=551 Q
"RTN","ICDTLB6C",124,0)
 S ICDRG=518
"RTN","ICDTLB6C",125,0)
 D DRG555
"RTN","ICDTLB6C",126,0)
 I $D(ICDOP(" 36.06"))!$D(ICDOP(" 92.27")) D DRG556
"RTN","ICDTLB6C",127,0)
 I $D(ICDOP(" 36.07")) D DRG557
"RTN","ICDTLB6C",128,0)
 Q
"RTN","ICDTLB6C",129,0)
DRG517 D DRG516 Q
"RTN","ICDTLB6C",130,0)
DRG518 D DRG516 Q
"RTN","ICDTLB6C",131,0)
DRG519 S ICDRG=$S(ICDOR["F":496,ICDCC:519,1:520) Q
"RTN","ICDTLB6C",132,0)
DRG520 D DRG519 Q
"RTN","ICDTLB6C",133,0)
DRG521 S ICDRG=$S(ICDCC:521,ICDOR["D"!(ICDOR["R"):522,1:523) Q
"RTN","ICDTLB6C",134,0)
DRG522 D DRG521 Q
"RTN","ICDTLB6C",135,0)
DRG523 D DRG521 Q
"RTN","ICDTLB6C",136,0)
DRG526 D DRG516 Q
"RTN","ICDTLB6C",137,0)
DRG527 D DRG516 Q
"RTN","ICDTLB6C",138,0)
DRG531 S ICDRG=$S(ICDCC:531,1:532) Q
"RTN","ICDTLB6C",139,0)
DRG532 D DRG531 Q
"RTN","ICDTLB6C",140,0)
DRG533 S ICDRG=$S(ICDCC:533,1:534) I $D(ICDOP(" 00.61"))&($D(ICDOP(" 00.63"))) S ICDRG=577
"RTN","ICDTLB6C",141,0)
 Q
"RTN","ICDTLB6C",142,0)
DRG534 D DRG533 Q
"RTN","ICDTLB6C",143,0)
DRG535 N ICDE1,ICDE2,ICDE3,ICDE4
"RTN","ICDTLB6C",144,0)
 S ICDE1=$S($D(ICDOP(" 37.95"))&(($D(ICDOP(" 37.96")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTLB6C",145,0)
 S ICDE2=$S($D(ICDOP(" 37.97"))&(($D(ICDOP(" 37.98")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTLB6C",146,0)
 S ICDE3=$S($D(ICDOP(" 00.52"))&($D(ICDOP(" 00.54"))):1,1:0)
"RTN","ICDTLB6C",147,0)
 ;S ICDE4=$S($D(ICDOP(" 00.54"))&($D(ICDOP(" 37.95"))):1,1:0)
"RTN","ICDTLB6C",148,0)
 S ICDE4=$S($D(ICDOP(" 37.74"))&(($D(ICDOP(" 37.96")))!($D(ICDOP(" 37.98")))!($D(ICDOP(" 00.54")))):1,1:0)
"RTN","ICDTLB6C",149,0)
 S ICDRG=470
"RTN","ICDTLB6C",150,0)
 I $D(ICDOP(" 37.94"))!$D(ICDOP(" 00.51")) I ICDE1+ICDE2+ICDE3+ICDE4=0 S ICDRG=515
"RTN","ICDTLB6C",151,0)
 I '$D(ICDOP(" 37.94"))&('$D(ICDOP(" 00.51"))) I ICDE1!ICDE2!ICDE3!ICDE4 S ICDRG=515
"RTN","ICDTLB6C",152,0)
 ; "HN" in ICDOR represents OR proc 37.21-.23, 37.26, 88.52-.58
"RTN","ICDTLB6C",153,0)
 I ICDRG=515 I ICDOR["HN" I '$D(ICDOP(" 37.26")) S ICDRG=$S(ICDPD["A":535,1:536)
"RTN","ICDTLB6C",154,0)
 I ICDRG=470 D DRG115^ICDTLB2C
"RTN","ICDTLB6C",155,0)
 Q
"RTN","ICDTLB6C",156,0)
DRG536 D DRG535 Q
"RTN","ICDTLB6C",157,0)
DRG537 S ICDRG=$S(ICDCC:537,1:538) Q
"RTN","ICDTLB6C",158,0)
DRG538 D DRG537 Q
"RTN","ICDTLB6C",159,0)
DRG539 I ICDPD["L"&(ICDMAJ'[3) D DRG401^ICDTLB5C Q:"401^402^403^404^405^470^473"[ICDRG
"RTN","ICDTLB6C",160,0)
 S ICDRG=$S((ICDPD["L")&(ICDCC):539,ICDPD["L":540,ICDCC:406,1:407) Q
"RTN","ICDTLB6C",161,0)
DRG540 D DRG539 Q
"RTN","ICDTLB6C",162,0)
DRG543 S ICDRG=$S((ICDPD["Q")&(ICDOR["Q"):543,ICDOR["Q"&$D(ICDOP(" 00.10")):543,$D(ICDOP(" 02.93"))&($D(ICDOP(" 86.95"))):543,1:ICDRG) Q
"RTN","ICDTLB6C",163,0)
DRG544 Q
"RTN","ICDTLB6C",164,0)
DRG545 Q
"RTN","ICDTLB6C",165,0)
DRG546 Q
"RTN","ICDTLB6C",166,0)
DRG547 ; called from DRG106^ICDTLB2C     
"RTN","ICDTLB6C",167,0)
 D MCV
"RTN","ICDTLB6C",168,0)
 S ICDRG=$S(ICDMCV:547,ICDMCV1:547,1:548) Q
"RTN","ICDTLB6C",169,0)
DRG548 G DRG547
"RTN","ICDTLB6C",170,0)
DRG549 ; called from DRG106^ICDTLB2C
"RTN","ICDTLB6C",171,0)
 D MCV
"RTN","ICDTLB6C",172,0)
 S ICDRG=$S(ICDMCV:549,ICDMCV1:549,1:550) Q
"RTN","ICDTLB6C",173,0)
DRG550 G DRG549
"RTN","ICDTLB6C",174,0)
DRG551 ; called from DRG115^ICDTLB2C 
"RTN","ICDTLB6C",175,0)
 D MCV
"RTN","ICDTLB6C",176,0)
 I ICDMCV!(ICDMCV2) S ICDRG=551
"RTN","ICDTLB6C",177,0)
 Q
"RTN","ICDTLB6C",178,0)
DRG552 Q
"RTN","ICDTLB6C",179,0)
DRG553 ; called from DRG478
"RTN","ICDTLB6C",180,0)
 D MCV
"RTN","ICDTLB6C",181,0)
 S ICDRG=$S(ICDMCV:553,ICDMCV1:553,1:554) Q
"RTN","ICDTLB6C",182,0)
DRG554 G DRG553
"RTN","ICDTLB6C",183,0)
DRG555 ; called from DRG516
"RTN","ICDTLB6C",184,0)
 D MCV
"RTN","ICDTLB6C",185,0)
 I ICDMCV!(ICDMCV1) S ICDRG=555
"RTN","ICDTLB6C",186,0)
 Q
"RTN","ICDTLB6C",187,0)
DRG556 ; called from DRG516
"RTN","ICDTLB6C",188,0)
 D MCV
"RTN","ICDTLB6C",189,0)
 I 'ICDMCV&('ICDMCV1) S ICDRG=556
"RTN","ICDTLB6C",190,0)
 Q
"RTN","ICDTLB6C",191,0)
DRG557 ; called from DRG516
"RTN","ICDTLB6C",192,0)
 D MCV
"RTN","ICDTLB6C",193,0)
 I ICDMCV!ICDMCV1 S ICDRG=557
"RTN","ICDTLB6C",194,0)
 E  S ICDRG=558
"RTN","ICDTLB6C",195,0)
 Q
"RTN","ICDTLB6C",196,0)
DRG558 G DRG516
"RTN","ICDTLB6C",197,0)
DRG559 ;I DGDX(1)["433.01"!(DGDX(1)["433.11")!(DGDX(1)["433.21")!(DGDX(1)["433.31")!(DGDX(1)["433.81")!(DGDX(1)["433.91")!(DGDX(1)["434.01")!(DGDX(1)["434.11")!(DGDX(1)["434.91") S ICDRG=559
"RTN","ICDTLB6C",198,0)
 I $G(ICDDX(1))=12856!($G(ICDDX(1))=12858)!($G(ICDDX(1))=12860)!($G(ICDDX(1))=12862)!($G(ICDDX(1))=12864)!($G(ICDDX(1))=12866)!($G(ICDDX(1))=12868)!($G(ICDDX(1))=12870)!($G(ICDDX(1))=12872) S ICDRG=559
"RTN","ICDTLB6C",199,0)
 Q
"RTN","ICDTLB6C",200,0)
DRG560 Q
"RTN","ICDTLB6C",201,0)
DRG561 Q
"RTN","ICDTLB6C",202,0)
DRG562 Q
"RTN","ICDTLB6C",203,0)
DRG563 Q
"RTN","ICDTLB6C",204,0)
DRG564 Q
"RTN","ICDTLB6C",205,0)
DRG565 Q
"RTN","ICDTLB6C",206,0)
DRG566 Q
"RTN","ICDTLB6C",207,0)
DRG567 Q
"RTN","ICDTLB6C",208,0)
DRG568 Q
"RTN","ICDTLB6C",209,0)
DRG569 Q
"RTN","ICDTLB6C",210,0)
DRG570 Q
"RTN","ICDTLB6C",211,0)
DRG571 Q
"RTN","ICDTLB6C",212,0)
DRG572 Q
"RTN","ICDTLB6C",213,0)
DRG573 Q
"RTN","ICDTLB6C",214,0)
DRG574 Q
"RTN","ICDTLB6C",215,0)
DRG575 Q
"RTN","ICDTLB6C",216,0)
DRG576 Q
"RTN","ICDTLB6C",217,0)
DRG577 Q
"RTN","ICDTLB6C",218,0)
DRG578 Q
"RTN","ICDTLB6C",219,0)
DRG579 Q
"RTN","ICDTLB6C",220,0)
MCV ; checks to see if case qualifies as an MCV (major cardiovascular complications or complex conditions)
"RTN","ICDTLB6C",221,0)
 S (ICDMCV,ICDMCV1,ICDMCV2)=0
"RTN","ICDTLB6C",222,0)
 ; ICDPD=identifier for prime dx  ICDSD=identifier for any secondary dx
"RTN","ICDTLB6C",223,0)
 ; DGDX(1)=prime dx  ICDDX(1)=ien of prime dx ICDDXT=any secondary dx  
"RTN","ICDTLB6C",224,0)
 I ICDPD["c"!(ICDSD["c") S ICDMCV=1
"RTN","ICDTLB6C",225,0)
 I ICDSD["s" S ICDMCV=1
"RTN","ICDTLB6C",226,0)
 ;I DGDX(1)["426.0"!(DGDX(1)["426.53")!(DGDX(1)["426.54") S ICDMCV1=1
"RTN","ICDTLB6C",227,0)
 I $G(ICDDX(1))=9056!($G(ICDDX(1))=2548)!($G(ICDDX(1))=2549) S ICDMCV1=1
"RTN","ICDTLB6C",228,0)
 I $D(ICDDXT("426.0"))!($D(ICDDXT("426.53")))!($D(ICDDXT("426.54"))) S ICDMCV1=1
"RTN","ICDTLB6C",229,0)
 ;I DGDX(1)["411.1"!(DGDX(1)["411.81") S ICDMCV2=1
"RTN","ICDTLB6C",230,0)
 I $G(ICDDX(1))=2500!($G(ICDDX(1))=12477) S ICDMCV2=1
"RTN","ICDTLB6C",231,0)
 I $D(ICDDXT("411.1"))!($D(ICDDXT("411.81"))) S ICDMCV2=1
"RTN","ICDTLB6C",232,0)
 Q
"VER")
8.0^22.0
"BLD",7310,6)
^28
**END**
**END**

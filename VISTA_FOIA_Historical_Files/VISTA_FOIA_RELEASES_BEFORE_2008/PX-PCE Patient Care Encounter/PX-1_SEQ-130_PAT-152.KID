Released PX*1*152 SEQ #130
Extracted from mail message
**KIDS**:PX*1.0*152^

**INSTALL NAME**
PX*1.0*152
"BLD",6420,0)
PX*1.0*152^PCE PATIENT CARE ENCOUNTER^0^3051017^y
"BLD",6420,1,0)
^^2^2^3050906^
"BLD",6420,1,1,0)
Increase limit to QUANTITY field in the V-CPT file to 3 digits and fix 
"BLD",6420,1,2,0)
the provider prompting for the CPT code in the check-out interview.
"BLD",6420,4,0)
^9.64PA^9000010.18^1
"BLD",6420,4,9000010.18,0)
9000010.18
"BLD",6420,4,9000010.18,2,0)
^9.641^9000010.18^1
"BLD",6420,4,9000010.18,2,9000010.18,0)
V CPT  (File-top level)
"BLD",6420,4,9000010.18,2,9000010.18,1,0)
^9.6411^.16^1
"BLD",6420,4,9000010.18,2,9000010.18,1,.16,0)
QUANTITY
"BLD",6420,4,9000010.18,222)
y^n^p^^^^n^^n
"BLD",6420,4,9000010.18,224)

"BLD",6420,4,"APDD",9000010.18,9000010.18)

"BLD",6420,4,"APDD",9000010.18,9000010.18,.16)

"BLD",6420,4,"B",9000010.18,9000010.18)

"BLD",6420,"KRN",0)
^9.67PA^8989.52^19
"BLD",6420,"KRN",.4,0)
.4
"BLD",6420,"KRN",.401,0)
.401
"BLD",6420,"KRN",.402,0)
.402
"BLD",6420,"KRN",.403,0)
.403
"BLD",6420,"KRN",.5,0)
.5
"BLD",6420,"KRN",.84,0)
.84
"BLD",6420,"KRN",3.6,0)
3.6
"BLD",6420,"KRN",3.8,0)
3.8
"BLD",6420,"KRN",9.2,0)
9.2
"BLD",6420,"KRN",9.8,0)
9.8
"BLD",6420,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",6420,"KRN",9.8,"NM",1,0)
PXBPQUA^^0^3450823
"BLD",6420,"KRN",9.8,"NM",2,0)
PXBUTL0^^0^31365408
"BLD",6420,"KRN",9.8,"NM",3,0)
PXBPPRV^^0^36235103
"BLD",6420,"KRN",9.8,"NM","B","PXBPPRV",3)

"BLD",6420,"KRN",9.8,"NM","B","PXBPQUA",1)

"BLD",6420,"KRN",9.8,"NM","B","PXBUTL0",2)

"BLD",6420,"KRN",19,0)
19
"BLD",6420,"KRN",19.1,0)
19.1
"BLD",6420,"KRN",101,0)
101
"BLD",6420,"KRN",409.61,0)
409.61
"BLD",6420,"KRN",771,0)
771
"BLD",6420,"KRN",870,0)
870
"BLD",6420,"KRN",8989.51,0)
8989.51
"BLD",6420,"KRN",8989.52,0)
8989.52
"BLD",6420,"KRN",8994,0)
8994
"BLD",6420,"KRN","B",.4,.4)

"BLD",6420,"KRN","B",.401,.401)

"BLD",6420,"KRN","B",.402,.402)

"BLD",6420,"KRN","B",.403,.403)

"BLD",6420,"KRN","B",.5,.5)

"BLD",6420,"KRN","B",.84,.84)

"BLD",6420,"KRN","B",3.6,3.6)

"BLD",6420,"KRN","B",3.8,3.8)

"BLD",6420,"KRN","B",9.2,9.2)

"BLD",6420,"KRN","B",9.8,9.8)

"BLD",6420,"KRN","B",19,19)

"BLD",6420,"KRN","B",19.1,19.1)

"BLD",6420,"KRN","B",101,101)

"BLD",6420,"KRN","B",409.61,409.61)

"BLD",6420,"KRN","B",771,771)

"BLD",6420,"KRN","B",870,870)

"BLD",6420,"KRN","B",8989.51,8989.51)

"BLD",6420,"KRN","B",8989.52,8989.52)

"BLD",6420,"KRN","B",8994,8994)

"BLD",6420,"QUES",0)
^9.62^^
"BLD",6420,"REQB",0)
^9.611^3^3
"BLD",6420,"REQB",1,0)
PX*1.0*124^2
"BLD",6420,"REQB",2,0)
PX*1.0*132^2
"BLD",6420,"REQB",3,0)
PX*1.0*141^2
"BLD",6420,"REQB","B","PX*1.0*124",1)

"BLD",6420,"REQB","B","PX*1.0*132",2)

"BLD",6420,"REQB","B","PX*1.0*141",3)

"FIA",9000010.18)
V CPT
"FIA",9000010.18,0)
^AUPNVCPT(
"FIA",9000010.18,0,0)
9000010.18IP
"FIA",9000010.18,0,1)
y^n^p^^^^n^^n
"FIA",9000010.18,0,10)

"FIA",9000010.18,0,11)

"FIA",9000010.18,0,"RLRO")

"FIA",9000010.18,0,"VR")
1.0^PX
"FIA",9000010.18,9000010.18)
1
"FIA",9000010.18,9000010.18,.16)

"MBREQ")
0
"PKG",461,-1)
1^1
"PKG",461,0)
PCE PATIENT CARE ENCOUNTER^PX^Patient Care Encounter (VA Parent package)
"PKG",461,22,0)
^9.49I^1^1
"PKG",461,22,1,0)
1.0^2960812^2960914^1271
"PKG",461,22,1,"PAH",1,0)
152^3051017
"PKG",461,22,1,"PAH",1,1,0)
^^2^2^3051017
"PKG",461,22,1,"PAH",1,1,1,0)
Increase limit to QUANTITY field in the V-CPT file to 3 digits and fix 
"PKG",461,22,1,"PAH",1,1,2,0)
the provider prompting for the CPT code in the check-out interview.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","PXBPPRV")
0^3^B36235103
"RTN","PXBPPRV",1,0)
PXBPPRV ;ISL/JVS,ESW - PROMPT PROVIDER ; 10/31/02 12:12pm
"RTN","PXBPPRV",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**1,7,11,19,108,141,152**;Aug 12, 1996
"RTN","PXBPPRV",3,0)
 ;
"RTN","PXBPPRV",4,0)
 ; VARIABLE LIST
"RTN","PXBPPRV",5,0)
 ; SELINE= Line number of selected item
"RTN","PXBPPRV",6,0)
 ;
"RTN","PXBPPRV",7,0)
PRV ;--PROVIDER
"RTN","PXBPPRV",8,0)
 I $D(PXBNPRVL) W IOSC D LOC^PXBCC(2,0) W IOUON,"Previous Entry:   ",$G(PXBNPRVL(1)) F I=1:1:10 W " "
"RTN","PXBPPRV",9,0)
 I $D(PXBNPRVL) W IORC
"RTN","PXBPPRV",10,0)
 W IOUOFF
"RTN","PXBPPRV",11,0)
 N TIMED,EDATA,DIC,LINE,XFLAG,SELINE,UDATA,ECHO
"RTN","PXBPPRV",12,0)
 I '$D(^DISV(DUZ,"PXBPRV-4")) S ^DISV(DUZ,"PXBPRV-4")=" "
"RTN","PXBPPRV",13,0)
 I '$D(IOSC) D TERM^PXBCC
"RTN","PXBPPRV",14,0)
 S DOUBLEQQ=0
"RTN","PXBPPRV",15,0)
 S TIMED="I '$T!(DATA=""^"")"
"RTN","PXBPPRV",16,0)
P ;--Second Entry point
"RTN","PXBPPRV",17,0)
 W IOSC
"RTN","PXBPPRV",18,0)
 ;--DYNAMIC  HEADER--
"RTN","PXBPPRV",19,0)
 I '$D(CYCL) D
"RTN","PXBPPRV",20,0)
 .I PXBCNT=0,DOUBLEQQ=0,$G(WHAT)'["PRV" D LOC^PXBCC(1,10) W "...There are "_$G(PXBCNT)_" PROVIDER(S) associated with this encounter."
"RTN","PXBPPRV",21,0)
 .I PXBCNT=1,DOUBLEQQ=0,$G(WHAT)'["PRV" D LOC^PXBCC(1,10) W "...There is "_$G(PXBCNT)_" PROVIDER associated with this encounter."
"RTN","PXBPPRV",22,0)
 .I PXBCNT>1,DOUBLEQQ=0,$G(WHAT)'["PRV" D LOC^PXBCC(1,10) W "...There are "_$G(PXBCNT)_" PROVIDERS associated with this encounter."
"RTN","PXBPPRV",23,0)
 ;
"RTN","PXBPPRV",24,0)
 I $G(FROM)'="PL" D LOC^PXBCC(15,0)
"RTN","PXBPPRV",25,0)
 I $G(FROM)'["PRV" N PXBNPRVL
"RTN","PXBPPRV",26,0)
 I $D(FROM),FROM="PL" W IORC
"RTN","PXBPPRV",27,0)
 I $G(FROM)'="PL",PXBCNT>10&('$G(DOUBLEQQ)) W IOELEOL,!,"Enter '+' for next page, '-' for previous page."
"RTN","PXBPPRV",28,0)
 ;--Dynamic prompting for the provider--
"RTN","PXBPPRV",29,0)
 I '$D(^TMP("PXK",$J,"PRV")),'$D(FROM) W !,"Enter PROVIDER: " W IOELEOL
"RTN","PXBPPRV",30,0)
 I '$D(FROM),$D(^TMP("PXK",$J,"PRV")) W !,"Enter ",IOINHI,"NEXT",IOINLOW," PROVIDER: " W IOELEOL
"RTN","PXBPPRV",31,0)
 I $D(FROM),FROM="CPT",'$D(^TMP("PXK",$J,"PRV")) W IORC,!,"Enter PROVIDER associated with PROCEDURE: " W IOELEOL
"RTN","PXBPPRV",32,0)
 I $D(FROM),FROM="PRV" W !,"Enter PROVIDER: " W IOELEOL
"RTN","PXBPPRV",33,0)
 I $D(FROM),FROM="CPT",$D(^TMP("PXK",$J,"PRV")) W IORC,!,"Enter PROVIDER associated with PROCEDURES: " W IOELEOL
"RTN","PXBPPRV",34,0)
 I $D(FROM),FROM="PL"  W !,"Enter PROVIDER associated with PROBLEM: " W IOELEOL
"RTN","PXBPPRV",35,0)
 I $D(FROM),FROM="PL" S PXBDPRV="^"_$P($G(PRVDR("PRIMARY")),U)  ;;108
"RTN","PXBPPRV",36,0)
 ;I $D(PRVDR) S PXBDPRV="^"_$P(PRVDR("PRIMARY"),U) S:$G(PXBCNT)>1&($P($G(REQE),U)=0) D0=$P($G(PRVDR("PRIMARY")),U,3)
"RTN","PXBPPRV",37,0)
 I $D(PRVDR) S PXBDPRV="^"_$P(PRVDR("PRIMARY"),U),D0=$P($G(PRVDR("PRIMARY")),U,3)
"RTN","PXBPPRV",38,0)
 I $D(FROM),FROM="CPT",$P(REQI,U,1),$P(REQE,U,1)'["..." S $P(PXBDPRV,U,2)=$P(REQE,U,1)
"RTN","PXBPPRV",39,0)
 I $P($G(REQI),U,8)'="",$G(FROM)'="CPT" S D0=$P($G(^AUPNVCPT($P(REQI,U,8),12)),U,4),PXBDPRV="^"_$P(REQE,U)
"RTN","PXBPPRV",40,0)
 W $P($G(PXBDPRV),"^",2) W:$D(PXBDPRV) " // ",IOELEOL
"RTN","PXBPPRV",41,0)
 ;
"RTN","PXBPPRV",42,0)
 R DATA:DTIME S (EDATA,ECHO)=DATA
"RTN","PXBPPRV",43,0)
P1 ;--Third entry point
"RTN","PXBPPRV",44,0)
 X TIMED I  S PXBUT=1 S:DATA="^" LEAVE=1 G PRVX
"RTN","PXBPPRV",45,0)
 I DATA?1.N1"E".NAP S DATA=" "_DATA
"RTN","PXBPPRV",46,0)
 I $L(DATA)>200 S (DATA,EDATA)=$E(DATA,1,199)
"RTN","PXBPPRV",47,0)
 I DATA?24.N S (DATA,EDATA)=$E(DATA,1,24)
"RTN","PXBPPRV",48,0)
 D CASE^PXBUTL
"RTN","PXBPPRV",49,0)
 ;---SPACE BAR
"RTN","PXBPPRV",50,0)
 I DATA=" ",$D(^DISV(DUZ,"PXBPRV-4")) S (DATA,EDATA)=^DISV(DUZ,"PXBPRV-4") W DATA
"RTN","PXBPPRV",51,0)
 ;-----------
"RTN","PXBPPRV",52,0)
 I DATA="^^" S PXBEXIT=0 G PRVX
"RTN","PXBPPRV",53,0)
 ;---I Prompt can jump to others put symbols in here
"RTN","PXBPPRV",54,0)
 I DATA["^P" G PRVX
"RTN","PXBPPRV",55,0)
 I DATA["^I" G PRVX
"RTN","PXBPPRV",56,0)
 ; PX*1.0*152 - need to flag if default has been chosen. PXBDPRV gets killed so can't be used as flag.
"RTN","PXBPPRV",57,0)
 N PXDEF152 S PXDEF152=0
"RTN","PXBPPRV",58,0)
 I DATA="",$D(PXBDPRV) S DATA=$P($G(PXBDPRV),"^",2),PXDEF152=1 I DATA="" S PXBUT=1 G PRVX
"RTN","PXBPPRV",59,0)
 I DATA="",'$D(PXBDPRV) S PXBUT=1 G PRVX
"RTN","PXBPPRV",60,0)
 ;
"RTN","PXBPPRV",61,0)
 I PXBCNT>10&((DATA="+")!(DATA="-")) D DPRV4^PXBDPRV(DATA) W IORC D WIN17^PXBCC(PXBCNT) G P
"RTN","PXBPPRV",62,0)
 ;
"RTN","PXBPPRV",63,0)
 K PRVN1 S VIEN=0 F I=1:1 S VIEN=$O(PXBSAM(VIEN)) Q:VIEN=""  S PRVN1=PXBSAM(VIEN),PRVN1($P(PRVN1,U,4))=PRVN1_"^"_VIEN
"RTN","PXBPPRV",64,0)
M ;--IF Multiple entries have been entered
"RTN","PXBPPRV",65,0)
 ;--CAN'T DO!!!!
"RTN","PXBPPRV",66,0)
 ;--IF Multiple deleting of entries
"RTN","PXBPPRV",67,0)
 D DELM^PXBPPRV1
"RTN","PXBPPRV",68,0)
 I $G(NF) G P1
"RTN","PXBPPRV",69,0)
 ;
"RTN","PXBPPRV",70,0)
LI ;--If picked a line number
"RTN","PXBPPRV",71,0)
 I (DATA>0)&(DATA<(PXBCNT+1))&($L(DATA)'>$L(PXBCNT)) S XFLAG=1 D REVPRV^PXBCC(DATA) S SELINE=DATA D
"RTN","PXBPPRV",72,0)
 .I $G(FROM)["PL" Q
"RTN","PXBPPRV",73,0)
 .I $G(FROM)["CPT"  K SELINE S DATA="NOT VALID" Q
"RTN","PXBPPRV",74,0)
 .F I=1:1:$L(DATA) W IOCUB,IOECH
"RTN","PXBPPRV",75,0)
 .S PRISEC=$P($G(PXBSAM(DATA)),U,2) S:PRISEC["PRI" FPRI=0
"RTN","PXBPPRV",76,0)
 .S DATA=$P($G(PXBSAM(DATA)),U,1)
"RTN","PXBPPRV",77,0)
 I $D(XFLAG),XFLAG=1 S Y=DATA G PFIN
"RTN","PXBPPRV",78,0)
 ;
"RTN","PXBPPRV",79,0)
 ;--If PRV is already in the file
"RTN","PXBPPRV",80,0)
 I DATA="" S PXBUT=1 G PRVX
"RTN","PXBPPRV",81,0)
 I $G(FROM)'="CPT",'$G(DOUBLEQQ),$D(PXBKY(DATA)) D
"RTN","PXBPPRV",82,0)
 .I PXBCNT>10 D DPRV4^PXBDPRV($O(PXBKY(DATA,0)))
"RTN","PXBPPRV",83,0)
 .K Q D TIMES^PXBUTL(DATA)
"RTN","PXBPPRV",84,0)
 .I Q=1 S LINE=$O(PXBKY(DATA,0)) S XFLAG=1 D:$G(FROM)'="PL" REVPRV^PXBCC(LINE) S PRISEC=$P($G(PXBSAM(LINE)),"^",2) I $P(PXBSAM(LINE),"^",2)["PRI" S FPRI=0
"RTN","PXBPPRV",85,0)
 .I Q>1 S NLINE=0 F  S NLINE=$O(Q(NLINE)) Q:NLINE=""  D REVPRV^PXBCC(NLINE)
"RTN","PXBPPRV",86,0)
 I $D(Q),Q>1 D WHICH^PXBPWCH G LI
"RTN","PXBPPRV",87,0)
 I $D(XFLAG),XFLAG=1 S Y=DATA S:"CPT:PRV"[FROM&($G(D0)>0) Y="`"_D0 G PFIN
"RTN","PXBPPRV",88,0)
 ;--Need to do a DIC lookup on data
"RTN","PXBPPRV",89,0)
 ;
"RTN","PXBPPRV",90,0)
 K FIRST
"RTN","PXBPPRV",91,0)
 I DATA'="??" D:DATA="?" EN1^PXBHLP0("PXB","PRV",1,"",1) G:DATA="^P" P I DATA="?" G P
"RTN","PXBPPRV",92,0)
 I DATA="??" S DOUBLEQQ=1 D EN1^PXBHLP0("PXB","PRV","",1,2) S:DATA="P" UDATA="^P" S:$L(DATA,"^")>1 (Y,DATA,EDATA)=$P(DATA,U,2) S:$G(UDATA)="" UDATA="^P" S:UDATA="^P" (DATA,EDATA,Y)=UDATA G:UDATA="^P" P1 G PFIN
"RTN","PXBPPRV",93,0)
 ;
"RTN","PXBPPRV",94,0)
 ;--If a "?" is NOT entered during lookup
"RTN","PXBPPRV",95,0)
 ;----PX*1.0*152
"RTN","PXBPPRV",96,0)
 ;----If PXDEF152 is 1 then the user has hit the enter key with a specific provider provided as the default.
"RTN","PXBPPRV",97,0)
 ;----There should be no need to prompt again.
"RTN","PXBPPRV",98,0)
 I PXDEF152 D
"RTN","PXBPPRV",99,0)
 .S X=DATA,DIC="^VA(200,",DIC(0)="O"
"RTN","PXBPPRV",100,0)
 .D ^DIC S VAL=Y
"RTN","PXBPPRV",101,0)
 .I Y<1 S PXDEF152=0
"RTN","PXBPPRV",102,0)
 I 'PXDEF152 S FROM="PRV",(VAL,Y)=$$DOUBLE1^PXBGPRV2(FROM)
"RTN","PXBPPRV",103,0)
 I Y<1 S DATA="^P",DOUBLEQQ=1 G P1
"RTN","PXBPPRV",104,0)
 ;S (X,DATA,EDATA)=$P(VAL,U,2),DIC="^VA(200,",DIC(0)="MZ" D ^DIC
"RTN","PXBPPRV",105,0)
 S X="`"_+Y,(DATA,EDATA)=$P(VAL,U,2),DIC="^VA(200,",DIC(0)="MZ" D ^DIC
"RTN","PXBPPRV",106,0)
 I Y=-1 S PXBUT=1 G PRVX
"RTN","PXBPPRV",107,0)
 ;
"RTN","PXBPPRV",108,0)
 ;--If Y is good and already in file...
"RTN","PXBPPRV",109,0)
 ;I '$G(DOUBLEQQ),$D(Y),$D(PXBKY($P(Y,"^",2))) D
"RTN","PXBPPRV",110,0)
 I '$G(DOUBLEQQ),($P($G(Y),U)>0),$D(PRVN1($P(Y,U))) D
"RTN","PXBPPRV",111,0)
 .S LINE=$P(PRVN1($P(Y,U)),U,5)
"RTN","PXBPPRV",112,0)
 .S PRISEC=$P($G(PXBSAM(LINE)),"^",2) S:PRISEC["PRI" FPRI=0
"RTN","PXBPPRV",113,0)
 S PRV=Y(0)
"RTN","PXBPPRV",114,0)
 ;
"RTN","PXBPPRV",115,0)
PFIN ;--Finish the Provider
"RTN","PXBPPRV",116,0)
 I $L(Y,"^")'>1,$G(SELINE) S X="`"_$P(^AUPNVPRV($O(PXBSKY(SELINE,0)),0),"^",1),DIC="^VA(200,",DIC(0)="MZ" D ^DIC
"RTN","PXBPPRV",117,0)
 I $L(Y,"^")'>1,'$G(SELINE) S X=Y,DIC="^VA(200,",DIC(0)="MZ" D ^DIC
"RTN","PXBPPRV",118,0)
 I +Y<0 D HELP^PXBUTL0("PRVM") W IOCUU G P
"RTN","PXBPPRV",119,0)
 S PRV=Y(0)
"RTN","PXBPPRV",120,0)
 S PXBNPRV($P(PRV,U,1))=""
"RTN","PXBPPRV",121,0)
 S PXBNPRVL(1)=$P(PRV,U,1) S ^DISV(DUZ,"PXBPRV-4")=$P(PRV,U,1)
"RTN","PXBPPRV",122,0)
 I $D(PRVN1($P(Y,U))),$G(SELINE) S $P(REQI,U,7)=$O(PXBSKY(SELINE,0)),$P(REQI,U,2)=$P($G(PXBSAM(SELINE)),U,2)
"RTN","PXBPPRV",123,0)
 I $D(PRVN1($P(Y,U))),'$G(SELINE) S PRVN1=PRVN1($P(Y,U)) D
"RTN","PXBPPRV",124,0)
 .S $P(REQI,U,7)=$O(PXBSKY($P(PRVN1,U,5),0))
"RTN","PXBPPRV",125,0)
 .S PAT=$P(Y(0),U,1),ITEM=$P(PRVN1,U,5),$P(REQI,U,2)=$E($P(PRVN1,U,2),1),$P(REQE,U,2)=$P(PRVN1,U,2)
"RTN","PXBPPRV",126,0)
 S $P(REQI,U,1)=+Y
"RTN","PXBPPRV",127,0)
 I $P(REQI,U,2)']"" S $P(REQI,U,2)="S",$P(REQE,U,2)="SECONDARY"
"RTN","PXBPPRV",128,0)
 S $P(REQE,U,1)=$P(PRV,U,1)
"RTN","PXBPPRV",129,0)
 I '$D(REQI) S REQI=""
"RTN","PXBPPRV",130,0)
 ;---IF INACTIVE ISSUE A WARNING
"RTN","PXBPPRV",131,0)
 I DATA]"" D ACTIVE^PXBPPRV1 K DIR
"RTN","PXBPPRV",132,0)
PRVX ;--EXIT AND CLEAN UP
"RTN","PXBPPRV",133,0)
 K PRVN1,VIEN,D0
"RTN","PXBPPRV",134,0)
 I $G(WHAT)="INTV",DATA="^" S PXBEXIT="^^"
"RTN","PXBPPRV",135,0)
 I '$D(REQI) S REQI=""
"RTN","PXBPPRV",136,0)
 I '$D(REQE) S REQE=""
"RTN","PXBPPRV",137,0)
 I $P(REQE,U,1)="" S $P(REQE,U,1)="...No Provider Selected..."
"RTN","PXBPPRV",138,0)
 I FROM="PRV",$L(EDATA)<40 D
"RTN","PXBPPRV",139,0)
 .F I=1:1:$L(ECHO) W IOCUB,IOELEOL
"RTN","PXBPPRV",140,0)
 .F I=1:1:$L(ECHO) W IOCUF
"RTN","PXBPPRV",141,0)
 .I $P(REQE,U,1)'["...No" W $P(REQE,U,1)
"RTN","PXBPPRV",142,0)
 Q
"RTN","PXBPQUA")
0^1^B3450823
"RTN","PXBPQUA",1,0)
PXBPQUA ;ISL/JVS,ESW - PROMPT QUANTITY ; 6/18/03 6:34pm
"RTN","PXBPQUA",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**11,112,132,152**;Aug 12, 1996
"RTN","PXBPQUA",3,0)
 ;
"RTN","PXBPQUA",4,0)
 ;
"RTN","PXBPQUA",5,0)
 ;
"RTN","PXBPQUA",6,0)
 ;
"RTN","PXBPQUA",7,0)
QUA ;--Quantity
"RTN","PXBPQUA",8,0)
 N TIMED,DATA,DIC,X
"RTN","PXBPQUA",9,0)
 K PXBUT,EDATA
"RTN","PXBPQUA",10,0)
 I '$D(IOEDEOP) D TERM^PXBCC
"RTN","PXBPQUA",11,0)
 S TIMED="I '$T!(DATA[""^"")"
"RTN","PXBPQUA",12,0)
Q ;--SECOND ENTRY POINT
"RTN","PXBPQUA",13,0)
 W !!,"How many times was this procedure performed: "_$S($G(CPTQUA):CPTQUA,1:1)_"//",IOELEOL R DATA:DTIME S EDATA=DATA
"RTN","PXBPQUA",14,0)
Q1 ;---
"RTN","PXBPQUA",15,0)
 X TIMED I  S PXBUT=1 D RSET^PXBDREQ("CPT") G QUAX
"RTN","PXBPQUA",16,0)
 I DATA?.N1"E".NAP S DATA=" "_DATA
"RTN","PXBPQUA",17,0)
 I DATA?24.N S DATA=$E(DATA,1,24)
"RTN","PXBPQUA",18,0)
 ;----SPACE BAR---
"RTN","PXBPQUA",19,0)
 I DATA'=" ",DATA'["^",DATA'="" S ^DISV(DUZ,"PXBQUA-5")=DATA
"RTN","PXBPQUA",20,0)
 I DATA=" ",$D(^DISV(DUZ,"PXBQUA-5")) S DATA=^DISV(DUZ,"PXBQUA-5") W DATA
"RTN","PXBPQUA",21,0)
 ;-----------------
"RTN","PXBPQUA",22,0)
 I DATA]"",DATA'?.3N D:DATA="?" HELP^PXBUTL0("QU1") D:DATA="??" HELP^PXBUTL0("QU2") G Q
"RTN","PXBPQUA",23,0)
 I DATA'="",DATA<1!(DATA>999) G Q
"RTN","PXBPQUA",24,0)
 I DATA="",$G(CPTQUA) S DATA=CPTQUA
"RTN","PXBPQUA",25,0)
 I DATA="",'$G(CPTQUA) S DATA=1
"RTN","PXBPQUA",26,0)
 I DATA="?" D HELP^PXBUTL0("QU1") G QUA
"RTN","PXBPQUA",27,0)
 I DATA="??" D HELP^PXBUTL0("QU2") G QUA
"RTN","PXBPQUA",28,0)
QFIN ;--FINISH UP VARIABLES
"RTN","PXBPQUA",29,0)
 S QUA=DATA
"RTN","PXBPQUA",30,0)
 N VALP S VALP=+$P($G(REQI),U,3)
"RTN","PXBPQUA",31,0)
 I +QUA>1,VALP>0,$D(^IBE(357.69,VALP)) D
"RTN","PXBPQUA",32,0)
 .;PX*1.0*132,IB*2*257
"RTN","PXBPQUA",33,0)
 .I $$GET1^DIQ(357.69,VALP,.06,"I")'="Y" W !,"Only one E&M code allowed, quantity changed to 1." S QUA=1
"RTN","PXBPQUA",34,0)
 S $P(REQI,"^",4)=$P(QUA,"^",1)
"RTN","PXBPQUA",35,0)
 S $P(REQE,"^",4)=$P(QUA,"^",1)
"RTN","PXBPQUA",36,0)
QUAX ;--EXIT AND CLEANUP
"RTN","PXBPQUA",37,0)
 K X,CPTQUA
"RTN","PXBPQUA",38,0)
 Q
"RTN","PXBUTL0")
0^2^B31365408
"RTN","PXBUTL0",1,0)
PXBUTL0 ;ISL/JVS,ESW - UTILITIES-3 LINE HELP MESSAGES ;6/17/03 10:29
"RTN","PXBUTL0",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**108,124,152**;Aug 12, 1996
"RTN","PXBUTL0",3,0)
 ;
"RTN","PXBUTL0",4,0)
HELP(CAT) ;Help messages written when ?'s are entered.
"RTN","PXBUTL0",5,0)
 ;Each message must have 3 line although any of them can be blank.
"RTN","PXBUTL0",6,0)
 N MES,I
"RTN","PXBUTL0",7,0)
 D @CAT,WR
"RTN","PXBUTL0",8,0)
 Q
"RTN","PXBUTL0",9,0)
 ;
"RTN","PXBUTL0",10,0)
WR ;--Write to the screen
"RTN","PXBUTL0",11,0)
 S I=0 F I=1:1:3 W !,IOELEOL,?(IOM-$L(MES(I)))\2,MES(I)
"RTN","PXBUTL0",12,0)
 Q
"RTN","PXBUTL0",13,0)
 ;
"RTN","PXBUTL0",14,0)
STP1 ;--STOP CODE 1 ?
"RTN","PXBUTL0",15,0)
 S MES(1)="Answer with CLINIC STOP NAME, or AMIS RPORTING STOP CODE."
"RTN","PXBUTL0",16,0)
 S MES(2)=""
"RTN","PXBUTL0",17,0)
 S MES(3)=""
"RTN","PXBUTL0",18,0)
 Q
"RTN","PXBUTL0",19,0)
STP3 ;--STOP CODE 3 ?
"RTN","PXBUTL0",20,0)
 S MES(1)="Enter the STOP CODE associated with this ENCOUNTER."
"RTN","PXBUTL0",21,0)
 S MES(2)="Enter '??' to get the entire list of possible STOP CODES"
"RTN","PXBUTL0",22,0)
 S MES(3)="'*' indicates that STOP CODE has been visited in this session."
"RTN","PXBUTL0",23,0)
 Q
"RTN","PXBUTL0",24,0)
STP900 ;--STOP CODE 900
"RTN","PXBUTL0",25,0)
 S MES(1)="The stop code 900 SPECIAL SERVICES is no longer in service."
"RTN","PXBUTL0",26,0)
 S MES(2)="If you wish to enter procedures, you must use the"
"RTN","PXBUTL0",27,0)
 S MES(3)="option provided to enter a PROCEDURE."
"RTN","PXBUTL0",28,0)
 Q
"RTN","PXBUTL0",29,0)
PRV1 ;--Provider 1 ?
"RTN","PXBUTL0",30,0)
 S MES(1)="Answer with PROVIDER'S NAME, or INITIALS, or SSN, or NICK NAME,"
"RTN","PXBUTL0",31,0)
 S MES(2)="or KEY DELEGATION LEVEL, OR USER CLASS, or LINE NUMBER"
"RTN","PXBUTL0",32,0)
 S MES(3)="from the above list."
"RTN","PXBUTL0",33,0)
 Q
"RTN","PXBUTL0",34,0)
PRV3 ;--Provider 3 ?
"RTN","PXBUTL0",35,0)
 S MES(1)="Enter the PROVIDER who performed or ordered the PROCEDURES"
"RTN","PXBUTL0",36,0)
 S MES(2)="that were performed on the patient during this Encounter."
"RTN","PXBUTL0",37,0)
 S MES(3)="'*' indicates that PROVIDER has been used in this session."
"RTN","PXBUTL0",38,0)
 Q
"RTN","PXBUTL0",39,0)
PRVM ;--CPT Add Multiple Provider(s)
"RTN","PXBUTL0",40,0)
 S MES(1)=$E(EDATA,1,50)
"RTN","PXBUTL0",41,0)
 S MES(2)="The above NAME is not a VALID PROVIDER."
"RTN","PXBUTL0",42,0)
 S MES(3)="" ;--Enter each one separately to get more complete help."
"RTN","PXBUTL0",43,0)
 Q
"RTN","PXBUTL0",44,0)
PRVMD ;--CPT Delete Multiple Providers(s)
"RTN","PXBUTL0",45,0)
 S MES(1)=$E(EDATA,1,50)
"RTN","PXBUTL0",46,0)
 S MES(2)="The above Item(s) are not VALID line numbers or Item numbers."
"RTN","PXBUTL0",47,0)
 S MES(3)=""
"RTN","PXBUTL0",48,0)
 Q
"RTN","PXBUTL0",49,0)
 ;
"RTN","PXBUTL0",50,0)
POV1 ;--Purpose of Visit 1 ?
"RTN","PXBUTL0",51,0)
 S MES(1)=""
"RTN","PXBUTL0",52,0)
 S MES(2)="Answer with ICD DIAGNOSIS CODE NUMBER or DESCRIPTION."
"RTN","PXBUTL0",53,0)
 S MES(3)=""
"RTN","PXBUTL0",54,0)
 Q
"RTN","PXBUTL0",55,0)
POV3 ;--Purpose of Visit 3 ?
"RTN","PXBUTL0",56,0)
 S MES(1)="Enter the DIAGNOSIS that is associated with this ENCOUNTER."
"RTN","PXBUTL0",57,0)
 S MES(2)="It is possible that there is more than one DIAGNOSIS."
"RTN","PXBUTL0",58,0)
 S MES(3)=""
"RTN","PXBUTL0",59,0)
 Q
"RTN","PXBUTL0",60,0)
PL1 ;--Problem list ?
"RTN","PXBUTL0",61,0)
 S MES(1)="Select an Item Number, a '+' or '-', or 'ENTER' or '^' to EXIT this prompt."
"RTN","PXBUTL0",62,0)
 S MES(2)="By selecting one of the PROBLEMS, it can then be entered as a"
"RTN","PXBUTL0",63,0)
 S MES(3)="Diagnosis for this ENCOUNTER with "_NAME_"."
"RTN","PXBUTL0",64,0)
 Q
"RTN","PXBUTL0",65,0)
PL11 ;--Problem List ?
"RTN","PXBUTL0",66,0)
 S MES(1)="Select an Item Number, or 'ENTER' or '^' to EXIT this prompt."
"RTN","PXBUTL0",67,0)
 S MES(2)="By selecting one of the PROBLEMS, it can then be entered as a"
"RTN","PXBUTL0",68,0)
 S MES(3)="Diagnosis for this ENCOUNTER with "_PNAME_"."
"RTN","PXBUTL0",69,0)
 Q
"RTN","PXBUTL0",70,0)
PLM ;--Problem List ?
"RTN","PXBUTL0",71,0)
 S MES(1)="The above is not a valid or active problem."
"RTN","PXBUTL0",72,0)
 S MES(2)=""
"RTN","PXBUTL0",73,0)
 S MES(3)=""
"RTN","PXBUTL0",74,0)
 Q
"RTN","PXBUTL0",75,0)
 ;
"RTN","PXBUTL0",76,0)
CPT1 ;--CPT Procedure 1 ?
"RTN","PXBUTL0",77,0)
 S MES(1)="Answer with CPT CODE or CPT CATEGORY or DESCRIPTION."
"RTN","PXBUTL0",78,0)
 S MES(2)="A '*' next to a procedure indicates that it was either"
"RTN","PXBUTL0",79,0)
 S MES(3)=" ADDED or EDITED during this session."
"RTN","PXBUTL0",80,0)
 Q
"RTN","PXBUTL0",81,0)
CPT4 ;--USE MORE THAN 1 LETTER ?
"RTN","PXBUTL0",82,0)
 S MES(1)="Please use more than 1 letter for your request."
"RTN","PXBUTL0",83,0)
 S MES(2)=""
"RTN","PXBUTL0",84,0)
 S MES(3)=""
"RTN","PXBUTL0",85,0)
 Q
"RTN","PXBUTL0",86,0)
CPT3 ;--CPT Procedure 3 ?
"RTN","PXBUTL0",87,0)
 S MES(1)="Enter the PROCEDURE(S) that were performed during this ENCOUNTER."
"RTN","PXBUTL0",88,0)
 S MES(2)="It may also be a procedure that occurred at another time but."
"RTN","PXBUTL0",89,0)
 S MES(3)="occurred as a result of this ENCOUNTER with the Patient."
"RTN","PXBUTL0",90,0)
 Q
"RTN","PXBUTL0",91,0)
CPTM ;--CPT Add Multiple Procedure(s)
"RTN","PXBUTL0",92,0)
 S MES(1)=$E(EDATA,1,50)
"RTN","PXBUTL0",93,0)
 S MES(2)="The above entry is not a VALID or ACTIVE Code(s)."
"RTN","PXBUTL0",94,0)
 S MES(3)=""
"RTN","PXBUTL0",95,0)
 ;S MES(3)="Enter each one separately to get more complete help."
"RTN","PXBUTL0",96,0)
 Q
"RTN","PXBUTL0",97,0)
CPTMDP ;--CPT Adding Procedure with Multiple that already exist
"RTN","PXBUTL0",98,0)
 S MES(1)=$E(EDATA,1,50)
"RTN","PXBUTL0",99,0)
 S MES(2)="The above entry was already entered for this Encounter."
"RTN","PXBUTL0",100,0)
 S MES(3)="Enter it separately if you still want to add/edit."
"RTN","PXBUTL0",101,0)
 Q
"RTN","PXBUTL0",102,0)
CPTMNO ;--CPT Add Multiple Procedure(s)
"RTN","PXBUTL0",103,0)
 W !,$E(EDATA,1,50)
"RTN","PXBUTL0",104,0)
 W !,"The above Item(s) are not VALID or ACTIVE Codes."
"RTN","PXBUTL0",105,0)
 W !,"Enter each one separately to get more complete help."
"RTN","PXBUTL0",106,0)
 Q
"RTN","PXBUTL0",107,0)
CPTMD ;--CPT Delete Multiple Procedure(s)
"RTN","PXBUTL0",108,0)
 S MES(1)=$E(EDATA,1,50)
"RTN","PXBUTL0",109,0)
 S MES(2)="The above Item(s) are not VALID line numbers or Item numbers."
"RTN","PXBUTL0",110,0)
 S MES(3)=""
"RTN","PXBUTL0",111,0)
 Q
"RTN","PXBUTL0",112,0)
WH1 ;--WHICH when selecting different line options 1 ?
"RTN","PXBUTL0",113,0)
 S MES(1)="Enter the line number of the entry that you are selecting."
"RTN","PXBUTL0",114,0)
 S MES(2)=""
"RTN","PXBUTL0",115,0)
 S MES(3)=""
"RTN","PXBUTL0",116,0)
 Q
"RTN","PXBUTL0",117,0)
 ;
"RTN","PXBUTL0",118,0)
WH2 ;--WHICH when selecting different line options 2 ?
"RTN","PXBUTL0",119,0)
 S MES(1)="You can select any line number that you wish."
"RTN","PXBUTL0",120,0)
 S MES(2)=""
"RTN","PXBUTL0",121,0)
 S MES(3)=""
"RTN","PXBUTL0",122,0)
 Q
"RTN","PXBUTL0",123,0)
 ;
"RTN","PXBUTL0",124,0)
WH3 ;--WHICH when selecting different line options 3 ?
"RTN","PXBUTL0",125,0)
 S MES(1)="Please select any line number that you wish or ""^"" to exit."
"RTN","PXBUTL0",126,0)
 S MES(2)=""
"RTN","PXBUTL0",127,0)
 S MES(3)=""
"RTN","PXBUTL0",128,0)
 Q
"RTN","PXBUTL0",129,0)
QU1 ;--QUANTITY when changing quantity of CPT's ?
"RTN","PXBUTL0",130,0)
 S MES(1)="This is the number of times this CPT was done"
"RTN","PXBUTL0",131,0)
 S MES(2)="to the patient during the encounter."
"RTN","PXBUTL0",132,0)
 S MES(3)=""
"RTN","PXBUTL0",133,0)
 Q
"RTN","PXBUTL0",134,0)
QU2 ;--QUANTITY when changing quantity of CPT'S ??
"RTN","PXBUTL0",135,0)
 S MES(1)="Enter a number between 0 and 999 indicating how many"
"RTN","PXBUTL0",136,0)
 S MES(2)="times this procedure was performed on the patient"
"RTN","PXBUTL0",137,0)
 S MES(3)="during this encounter."
"RTN","PXBUTL0",138,0)
 Q
"RTN","PXBUTL0",139,0)
OP1 ;--ORDERING PROVIDER for CPT's ?
"RTN","PXBUTL0",140,0)
 S MES(1)="This is the ordering provider for the Procedure"
"RTN","PXBUTL0",141,0)
 S MES(2)="during the encounter."
"RTN","PXBUTL0",142,0)
 S MES(3)=""
"RTN","PXBUTL0",143,0)
 Q
"RTN","PXBUTL0",144,0)
OP2 ;--ORDERING PROVIDER for CPT'S ??
"RTN","PXBUTL0",145,0)
 S MES(1)="Enter the ordering provider for this"
"RTN","PXBUTL0",146,0)
 S MES(2)="procedure performed on the patient"
"RTN","PXBUTL0",147,0)
 S MES(3)="during this encounter."
"RTN","PXBUTL0",148,0)
 Q
"VER")
8.0^22.0
"^DD",9000010.18,9000010.18,.16,0)
QUANTITY^NJ2,0X^^0;16^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X
"^DD",9000010.18,9000010.18,.16,3)
Enter a number between 1 and 999 indicating how many times this procedure was done.
"^DD",9000010.18,9000010.18,.16,21,0)
^^2^2^2950901^^^
"^DD",9000010.18,9000010.18,.16,21,1,0)
This is the number of times this procedure was done to the patient during
"^DD",9000010.18,9000010.18,.16,21,2,0)
the encounter.
"^DD",9000010.18,9000010.18,.16,"DT")
3050902
"BLD",6420,6)
^130
**END**
**END**

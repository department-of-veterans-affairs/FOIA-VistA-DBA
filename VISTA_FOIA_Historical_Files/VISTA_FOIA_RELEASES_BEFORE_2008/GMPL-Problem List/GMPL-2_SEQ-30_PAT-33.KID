Released GMPL*2*33 SEQ #30
Extracted from mail message
**KIDS**:GMPL*2.0*33^

**INSTALL NAME**
GMPL*2.0*33
"BLD",6572,0)
GMPL*2.0*33^PROBLEM LIST^0^3060109^y
"BLD",6572,1,0)
^^2^2^3060109^
"BLD",6572,1,1,0)
This Patch addresses where users are unable to modify the 
"BLD",6572,1,2,0)
current Problem Category Lists to make it assignable to users.
"BLD",6572,4,0)
^9.64PA^^
"BLD",6572,"ABPKG")
n
"BLD",6572,"KRN",0)
^9.67PA^8989.52^19
"BLD",6572,"KRN",.4,0)
.4
"BLD",6572,"KRN",.401,0)
.401
"BLD",6572,"KRN",.402,0)
.402
"BLD",6572,"KRN",.403,0)
.403
"BLD",6572,"KRN",.5,0)
.5
"BLD",6572,"KRN",.84,0)
.84
"BLD",6572,"KRN",3.6,0)
3.6
"BLD",6572,"KRN",3.8,0)
3.8
"BLD",6572,"KRN",9.2,0)
9.2
"BLD",6572,"KRN",9.8,0)
9.8
"BLD",6572,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6572,"KRN",9.8,"NM",1,0)
GMPLBLD^^0^B38813778
"BLD",6572,"KRN",9.8,"NM","B","GMPLBLD",1)

"BLD",6572,"KRN",19,0)
19
"BLD",6572,"KRN",19,"NM",0)
^9.68A^^
"BLD",6572,"KRN",19.1,0)
19.1
"BLD",6572,"KRN",101,0)
101
"BLD",6572,"KRN",409.61,0)
409.61
"BLD",6572,"KRN",771,0)
771
"BLD",6572,"KRN",870,0)
870
"BLD",6572,"KRN",8989.51,0)
8989.51
"BLD",6572,"KRN",8989.52,0)
8989.52
"BLD",6572,"KRN",8994,0)
8994
"BLD",6572,"KRN","B",.4,.4)

"BLD",6572,"KRN","B",.401,.401)

"BLD",6572,"KRN","B",.402,.402)

"BLD",6572,"KRN","B",.403,.403)

"BLD",6572,"KRN","B",.5,.5)

"BLD",6572,"KRN","B",.84,.84)

"BLD",6572,"KRN","B",3.6,3.6)

"BLD",6572,"KRN","B",3.8,3.8)

"BLD",6572,"KRN","B",9.2,9.2)

"BLD",6572,"KRN","B",9.8,9.8)

"BLD",6572,"KRN","B",19,19)

"BLD",6572,"KRN","B",19.1,19.1)

"BLD",6572,"KRN","B",101,101)

"BLD",6572,"KRN","B",409.61,409.61)

"BLD",6572,"KRN","B",771,771)

"BLD",6572,"KRN","B",870,870)

"BLD",6572,"KRN","B",8989.51,8989.51)

"BLD",6572,"KRN","B",8989.52,8989.52)

"BLD",6572,"KRN","B",8994,8994)

"BLD",6572,"QUES",0)
^9.62^^
"BLD",6572,"REQB",0)
^9.611^1^1
"BLD",6572,"REQB",1,0)
GMPL*2.0*28^2
"BLD",6572,"REQB","B","GMPL*2.0*28",1)

"MBREQ")
0
"PKG",452,-1)
1^1
"PKG",452,0)
PROBLEM LIST^GMPL^Automated Patient Problem List
"PKG",452,20,0)
^9.402P^^
"PKG",452,22,0)
^9.49I^1^1
"PKG",452,22,1,0)
2.0^2940825^2961022
"PKG",452,22,1,"PAH",1,0)
33^3060109
"PKG",452,22,1,"PAH",1,1,0)
^^2^2^3060109
"PKG",452,22,1,"PAH",1,1,1,0)
This Patch addresses where users are unable to modify the 
"PKG",452,22,1,"PAH",1,1,2,0)
current Problem Category Lists to make it assignable to users.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","GMPLBLD")
0^1^B38813778^B35403742
"RTN","GMPLBLD",1,0)
GMPLBLD ; SLC/MKB -- Build Problem Selection Lists ; 3/12/03  9:31
"RTN","GMPLBLD",2,0)
 ;;2.0;Problem List;**3,28,33**;Aug 25, 1994
"RTN","GMPLBLD",3,0)
 ;
"RTN","GMPLBLD",4,0)
 ;This routine invokes IA #3991
"RTN","GMPLBLD",5,0)
 ;
"RTN","GMPLBLD",6,0)
EN ; -- main entry point
"RTN","GMPLBLD",7,0)
 D EN^VALM("GMPL SELECTION LIST BUILD")
"RTN","GMPLBLD",8,0)
 Q
"RTN","GMPLBLD",9,0)
 ;
"RTN","GMPLBLD",10,0)
HDR ; -- header code
"RTN","GMPLBLD",11,0)
 N NAME,NUM,DATE
"RTN","GMPLBLD",12,0)
 S NUM=+^TMP("GMPLST",$J,0)_" categor"_$S(+^TMP("GMPLST",$J,0)'=1:"ies",1:"y")
"RTN","GMPLBLD",13,0)
 S DATE="Last Modified: "_$S(+$P(GMPLSLST,U,3):$$FMTE^XLFDT($P(GMPLSLST,U,3)),1:"<new list>")
"RTN","GMPLBLD",14,0)
 S VALMHDR(1)=DATE_$J(NUM,79-$L(DATE))
"RTN","GMPLBLD",15,0)
 S NAME=$P(GMPLSLST,U,2),VALMHDR(2)=$J(NAME,$L(NAME)\2+41)
"RTN","GMPLBLD",16,0)
 Q
"RTN","GMPLBLD",17,0)
 ;
"RTN","GMPLBLD",18,0)
INIT ; -- init variables and list array
"RTN","GMPLBLD",19,0)
 S GMPLSLST=$$LIST^GMPLBLD2("L") I GMPLSLST="^" S VALMQUIT=1 Q
"RTN","GMPLBLD",20,0)
 L +^GMPL(125,+GMPLSLST,0):1 I '$T D  G INIT
"RTN","GMPLBLD",21,0)
 . W $C(7),!!,"This list is currently being edited by another user!",!
"RTN","GMPLBLD",22,0)
 S GMPLMODE="E",VALMSG=$$MSG^GMPLX
"RTN","GMPLBLD",23,0)
 D GETLIST,BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE)
"RTN","GMPLBLD",24,0)
 D LENGTH
"RTN","GMPLBLD",25,0)
 Q
"RTN","GMPLBLD",26,0)
 ;
"RTN","GMPLBLD",27,0)
GETLIST ; Build ^TMP("GMPLIST",$J,#)
"RTN","GMPLBLD",28,0)
 N IFN,SEQ,GRP,ITEM,CNT K ^TMP("GMPLIST",$J) S CNT=0
"RTN","GMPLBLD",29,0)
 W !,"Searching for the list ..."
"RTN","GMPLBLD",30,0)
 F IFN=0:0 S IFN=$O(^GMPL(125.1,"B",+GMPLSLST,IFN)) Q:IFN'>0  D
"RTN","GMPLBLD",31,0)
 . S ITEM=$G(^GMPL(125.1,IFN,0)),SEQ=$P(ITEM,U,2),GRP=$P(ITEM,U,3)
"RTN","GMPLBLD",32,0)
 . S ^TMP("GMPLIST",$J,IFN)=$P(ITEM,U,2,5),CNT=CNT+1 ; seq ^ group ^ subhdr ^ probs
"RTN","GMPLBLD",33,0)
 . S (^TMP("GMPLIST",$J,"GRP",GRP),^TMP("GMPLIST",$J,"SEQ",SEQ))=IFN
"RTN","GMPLBLD",34,0)
 S ^TMP("GMPLIST",$J,0)=CNT
"RTN","GMPLBLD",35,0)
 Q
"RTN","GMPLBLD",36,0)
 ;
"RTN","GMPLBLD",37,0)
BUILD(LIST,MODE) ; Build ^TMP("GMPLST",$J,)
"RTN","GMPLBLD",38,0)
 N SEQ,LCNT,NUM,HDR,GROUP,IFN,ITEM,PSEQ D CLEAN^VALM10
"RTN","GMPLBLD",39,0)
 S:'$D(^TMP("GMPLIST",$J,0)) ^TMP("GMPLIST",$J,0)=0
"RTN","GMPLBLD",40,0)
 I $P($G(^TMP("GMPLIST",$J,0)),U,1)'>0 S ^TMP("GMPLST",$J,1,0)="   ",^TMP("GMPLST",$J,2,0)="No items available.",^TMP("GMPLST",$J,0)="0^2",VALMCNT=2 Q
"RTN","GMPLBLD",41,0)
 S (LCNT,NUM,SEQ)=0
"RTN","GMPLBLD",42,0)
 F  S SEQ=$O(^TMP("GMPLIST",$J,"SEQ",SEQ)) Q:SEQ'>0  D
"RTN","GMPLBLD",43,0)
 . S IFN=^TMP("GMPLIST",$J,"SEQ",SEQ),LCNT=LCNT+1,NUM=NUM+1
"RTN","GMPLBLD",44,0)
 . S GROUP=$P(^TMP("GMPLIST",$J,IFN),U,2),HDR=$P(^TMP("GMPLIST",$J,IFN),U,3)
"RTN","GMPLBLD",45,0)
 . S:'$L(HDR) HDR="<no header>"
"RTN","GMPLBLD",46,0)
 . I LCNT>1,+$P(^TMP("GMPLIST",$J,IFN),U,4),^TMP("GMPLST",$J,LCNT-1,0)'="   " S LCNT=LCNT+1,^TMP("GMPLST",$J,LCNT,0)="   "
"RTN","GMPLBLD",47,0)
 . S ^TMP("GMPLST",$J,LCNT,0)=$S(MODE="I":$J("<"_SEQ_">",8),1:"        ")_$J(NUM,4)_" "_HDR,^TMP("GMPLST",$J,"B",NUM)=IFN
"RTN","GMPLBLD",48,0)
 . D CNTRL^VALM10(LCNT,9,5,IOINHI,IOINORM)
"RTN","GMPLBLD",49,0)
 . Q:'+$P(^TMP("GMPLIST",$J,IFN),U,4)
"RTN","GMPLBLD",50,0)
 . D CNTRL^VALM10(LCNT,14,$L(HDR),IOUON,IOUOFF)
"RTN","GMPLBLD",51,0)
 . F PSEQ=0:0 S PSEQ=$O(^GMPL(125.12,"C",+GROUP,PSEQ)) Q:PSEQ'>0  D
"RTN","GMPLBLD",52,0)
 . . S IFN=$O(^GMPL(125.12,"C",+GROUP,PSEQ,0)),LCNT=LCNT+1
"RTN","GMPLBLD",53,0)
 . . S ITEM=$G(^GMPL(125.12,IFN,0)),^TMP("GMPLST",$J,LCNT,0)="             "_$P(ITEM,U,4)
"RTN","GMPLBLD",54,0)
 . . I $L($P(ITEM,U,5)) D
"RTN","GMPLBLD",55,0)
 ... S ^TMP("GMPLST",$J,LCNT,0)=^TMP("GMPLST",$J,LCNT,0)_" ("_$P(ITEM,U,5)_")"
"RTN","GMPLBLD",56,0)
 ... I $$STATCHK^ICDAPIU($P(ITEM,U,5),DT) Q  ; code is active
"RTN","GMPLBLD",57,0)
 ... S ^TMP("GMPLST",$J,LCNT,0)=^TMP("GMPLST",$J,LCNT,0)_"    <INACTIVE CODE>"
"RTN","GMPLBLD",58,0)
 . S LCNT=LCNT+1,^TMP("GMPLST",$J,LCNT,0)="   "
"RTN","GMPLBLD",59,0)
 S ^TMP("GMPLST",$J,0)=NUM_U_LCNT,VALMCNT=LCNT
"RTN","GMPLBLD",60,0)
 Q
"RTN","GMPLBLD",61,0)
 ;
"RTN","GMPLBLD",62,0)
HELP ; -- help code
"RTN","GMPLBLD",63,0)
 N X
"RTN","GMPLBLD",64,0)
 W !!?4,"You may take a variety of actions to update this selection list."
"RTN","GMPLBLD",65,0)
 W !?4,"New categories may be added to this list, or an existing one"
"RTN","GMPLBLD",66,0)
 W !?4,"removed; Edit Category will allow you to change the contents of"
"RTN","GMPLBLD",67,0)
 W !?4,"a category, or create a new one that may be added to this list."
"RTN","GMPLBLD",68,0)
 W !?4,"You may also change how each category appears in this list,"
"RTN","GMPLBLD",69,0)
 W !?4,"view each category's sequence number to facilitate resequencing,"
"RTN","GMPLBLD",70,0)
 W !?4,"assign this list to a clinic or user(s), or edit a different list."
"RTN","GMPLBLD",71,0)
 W !!,"Press <return> to continue ..." R X:DTIME
"RTN","GMPLBLD",72,0)
 S VALMSG=$$MSG^GMPLX,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","GMPLBLD",73,0)
 Q
"RTN","GMPLBLD",74,0)
 ;
"RTN","GMPLBLD",75,0)
EXIT ; -- exit code
"RTN","GMPLBLD",76,0)
 I $D(GMPLSAVE),$$CKSAVE^GMPLBLD2 D
"RTN","GMPLBLD",77,0)
 . D SAVE^GMPLBLD2
"RTN","GMPLBLD",78,0)
 . S ^GMPL(125,+GMPLSLST,0)=$P(GMPLSLST,U,2)_U_DT_U_$P(GMPLSLST,U,4)
"RTN","GMPLBLD",79,0)
 L -^GMPL(125,+GMPLSLST,0)
"RTN","GMPLBLD",80,0)
 K GMPLIST,GMPLST,GMPLMODE,GMPLSLST,GMPLSAVE,GMPREBLD,GMPQUIT,RT,TMPLST
"RTN","GMPLBLD",81,0)
 K ^TMP("GMPLIST",$J),^TMP("GMPLST",$J)
"RTN","GMPLBLD",82,0)
 Q
"RTN","GMPLBLD",83,0)
 ;
"RTN","GMPLBLD",84,0)
ADD ; Add group(s)
"RTN","GMPLBLD",85,0)
 N SEQ,GROUP,HDR,IFN,GMPQUIT,GMPREBLD D FULL^VALM1
"RTN","GMPLBLD",86,0)
 F  D  Q:$D(GMPQUIT)  W !
"RTN","GMPLBLD",87,0)
 . S GROUP=$$GROUP^GMPLBLD2("") I GROUP="^" S GMPQUIT=1 Q
"RTN","GMPLBLD",88,0)
 . I $D(^TMP("GMPLIST",$J,"GRP",+GROUP)) W !?4,">>>  This category is already part of this list!" Q
"RTN","GMPLBLD",89,0)
 . I '$$VALGRP^GMPLBLD2(+GROUP) D  Q
"RTN","GMPLBLD",90,0)
 .. D FULL^VALM1
"RTN","GMPLBLD",91,0)
 .. W !!,$C(7),"This category contains one or more problems with inactive ICD-9 codes. "
"RTN","GMPLBLD",92,0)
 .. W !,"These codes must be updated before adding the category to a selection list."
"RTN","GMPLBLD",93,0)
 .. N DIR,DTOUT,DIRUT,DUOUT,X,Y
"RTN","GMPLBLD",94,0)
 .. S DIR(0)="E" D ^DIR
"RTN","GMPLBLD",95,0)
 .. S VALMBCK="R"
"RTN","GMPLBLD",96,0)
 . S HDR=$$HDR^GMPLBLD1($P(GROUP,U,2)) I HDR="^" S GMPQUIT=1 Q
"RTN","GMPLBLD",97,0)
 . S RT="^TMP(""GMPLIST"",$J,""SEQ"",",SEQ=+$$LAST^GMPLBLD2(RT)+1
"RTN","GMPLBLD",98,0)
 . S SEQ=$$SEQ^GMPLBLD1(SEQ) I SEQ="^" S GMPQUIT=1 Q
"RTN","GMPLBLD",99,0)
 . S IFN=$$TMPIFN^GMPLBLD1,^TMP("GMPLIST",$J,IFN)=SEQ_U_+GROUP_U_HDR_"^1"
"RTN","GMPLBLD",100,0)
 . S (^TMP("GMPLIST",$J,"GRP",+GROUP),^TMP("GMPLIST",$J,"SEQ",SEQ))=IFN,^TMP("GMPLIST",$J,0)=^TMP("GMPLIST",$J,0)+1,GMPREBLD=1
"RTN","GMPLBLD",101,0)
 I $D(GMPREBLD) S VALMBCK="R",GMPLSAVE=1 D BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE),HDR
"RTN","GMPLBLD",102,0)
 S VALMBCK="R",VALMSG=$$MSG^GMPLX
"RTN","GMPLBLD",103,0)
 Q
"RTN","GMPLBLD",104,0)
 ;
"RTN","GMPLBLD",105,0)
EDIT ; Edit category contents
"RTN","GMPLBLD",106,0)
 N GMPLIST,GMPLST,GMPLMODE,GMPLGRP,GMPLSAVE
"RTN","GMPLBLD",107,0)
 D EN^VALM("GMPL SELECTION GROUP BUILD")
"RTN","GMPLBLD",108,0)
 S GMPLMODE="E"
"RTN","GMPLBLD",109,0)
 D GETLIST,BUILD("TMP(""GMPLIST"",$J)",GMPLMODE)
"RTN","GMPLBLD",110,0)
 S VALMBCK="R",VALMSG=$$MSG^GMPLX
"RTN","GMPLBLD",111,0)
 Q
"RTN","GMPLBLD",112,0)
 ;
"RTN","GMPLBLD",113,0)
REMOVE ; Remove group
"RTN","GMPLBLD",114,0)
 N NUM,IFN,SEQ,GRP,DIR,X,Y S VALMBCK=""
"RTN","GMPLBLD",115,0)
 S NUM=$$SEL1^GMPLBLD1 G:NUM="^" RMQ
"RTN","GMPLBLD",116,0)
 S IFN=$G(^TMP("GMPLST",$J,"B",NUM)) G:+IFN'>0 RMQ
"RTN","GMPLBLD",117,0)
 I "@"[$G(^TMP("GMPLIST",$J,IFN)) W $C(7),!!,"Category is not part of this list!" H 2 G RMQ
"RTN","GMPLBLD",118,0)
 S DIR("A")="Are you sure you want to remove '"_$P(^TMP("GMPLIST",$J,IFN),U,3)_"'? "
"RTN","GMPLBLD",119,0)
 S DIR("?")="Enter YES to delete this category from the current list; enter NO to exit."
"RTN","GMPLBLD",120,0)
 S DIR(0)="YA",DIR("B")="NO" D ^DIR
"RTN","GMPLBLD",121,0)
 I 'Y W !?5,"< Nothing removed! >" H 1 G RMQ
"RTN","GMPLBLD",122,0)
 D DELETE^GMPLBLD1(IFN) S VALMBCK="R",GMPLSAVE=1
"RTN","GMPLBLD",123,0)
 D BUILD("^TMP(""GMPLIST"",$J)",GMPLMODE),HDR
"RTN","GMPLBLD",124,0)
RMQ S:'VALMCC VALMBCK="R" S VALMSG=$$MSG^GMPLX
"RTN","GMPLBLD",125,0)
 Q
"RTN","GMPLBLD",126,0)
 ;
"RTN","GMPLBLD",127,0)
LENGTH ;SHORTEN THE ICD9'S DESCRIPTION TO FIT SCREEN
"RTN","GMPLBLD",128,0)
 S LLCNT=0
"RTN","GMPLBLD",129,0)
 F  S LLCNT=$O(^TMP("GMPLST",$J,LLCNT)) Q:LLCNT=""  Q:LLCNT'?1N.N  D
"RTN","GMPLBLD",130,0)
 .; I '$D(^TMP("GMPLST",$J,LLCNT,O)) Q
"RTN","GMPLBLD",131,0)
 . S ICD9VAR=^TMP("GMPLST",$J,LLCNT,0) I $L(ICD9VAR)>50 D
"RTN","GMPLBLD",132,0)
 .. S ICD9VAR=$P(ICD9VAR,"(",1)
"RTN","GMPLBLD",133,0)
 .. S ICD9VAR=$E(ICD9VAR,1,50)_" ("_$P(^TMP("GMPLST",$J,LLCNT,0),"(",2)
"RTN","GMPLBLD",134,0)
 .. S ^TMP("GMPLST",$J,LLCNT,0)=ICD9VAR
"RTN","GMPLBLD",135,0)
 Q
"VER")
8.0^22.0
"BLD",6572,6)
^30
**END**
**END**

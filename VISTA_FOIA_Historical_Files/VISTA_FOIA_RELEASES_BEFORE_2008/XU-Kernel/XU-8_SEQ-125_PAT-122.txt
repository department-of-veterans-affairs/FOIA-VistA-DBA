
=============================================================================
Run Date: MAR 07, 2000                     Designation: XU*8*122
Package : XU - KERNEL                          Priority: Mandatory
Version : 8       SEQ #125                       Status: Released
=============================================================================


Subject: RUM Update

Category: 
  - Routine

Description: 
============

 *** THIS INSTALL CONTAINS 2 PATCHES: XU*8.0*122 and KMPR*1.0*1 ***
 *** BECAUSE OF THE TIGHT INTEGRATION OF THESE PATCHES THEY ARE ***
 *** BEING RELEASED TOGETHER. THIS MESSAGE CONTAINS ONLY THE    ***
 *** INSTRUCTIONS FOR INSTALLATION. THE ROUTINES ARE LOCATED IN *** 
 *** KIDS FILE 'XU_8_122.KID'.                                  ***
  
  SOFTWARE AVAILABILITY:
  
  This patch is available from one of the CIO Field Offices listed below.
  All VAMCs are encouraged to use their FTP capability to obtain the
  software from the appropriate directory.
  
  CIO FIELD OFFICE      FTP ADDRESS                    DIRECTORY
  -----------------    -------------             ------------------
  Hines                152.129.1.110            anonymous.software
  Albany               152.127.1.5              anonymous.software
  Salt Lake            152.131.2.1              anonymous.software
  
  File Name: XU_8_122.KID
  
  This file contains two patches, XU*8.0*122, KMPR*1.0*1
  
  
 This patch contains the following updates:
  
 1. Routine %ZOSVKR now obtains actual days/hours of RUM data for each
    node. 
 2. Routine %ZOSVKR now checks to make sure it is being executed from
    the production account (^%ZOSV("PROD")).  There were occasions when
    %ZOSVKR was called from within the manager account, causing an error.
    (Reported by Tampa).
 3. Occasionally the date would equal zero.  This has been fixed.
 4. Possible negative numbers for M COMMANDS has been fixed.
 5. Under certain circumstances file 8971.1 (RESOURCE USAGE MONITOR) would
    be left with more than 2 weeks of data after the Sunday purge. This has
    been corrected. (Reported by Washington).
 6. Having an entry in the SPECIAL QUEUEING field of the OPTION SCHEDULING
    file (#19.2) could cause problems.  A post-install routine removes any
    entries in this field for option 'RUM Background Driver [KMPR
    BACKGROUND DRIVER]'. (Reported by Dayton).
 7. Option 'Status of RUM Collection [KMPR STATUS COLLECTION]' now displays
    the installed patch numbers (if any) below the Version.
 8. RUM version and patch information are now returned with each weekly
    update.
  
  
 Routine Summary
                      Checksum
 Routine         Old             New             2nd line
 --------        --------        --------        --------
 KMPRBD01        2657445         3125663         **1**
 KMPRBD02        7968846         7806256         **1**
 KMPRPOST        ----            339091          **1**
 KMPRSS          6385084         6447598         **1**
 KMPRUTL         4367084         4452862         **1**
 KMPRUTL1        3346667         3328402         **1**
 KMPRUTL3        ----            3796957         **1**
 ZOSVKRM         217494          217494          **90,94,107,122**
 ZOSVKRO         217494          217494          **90,94,107,122**
 ZOSVKRV         5456477         5750377         **90,94,107,122**
  
  
 Installation instructions follow:
  
                                 *** NOTE ***
         All sites should install this patch.  However, only DSM sites
         should turn RUM on at this time.  A future patch will address
         other Operating Systems.
         
  
 1. Turn RUM off.
  
 2. You need to use KIDS to install this patch.
  
      On the KIDS menu, under the 'Installation' menu, use the following
      options:
         
           Load a Distribution
           Verify Checksums in Transport Global
           Print Transport Global
           Compare Transport Global to Current System
           Backup a Transport Global
  
 3. Users can remain on the system. This patch should be loaded at a
    non-peak time. If the possibility of a few <NOSOURCE> errors is
    acceptable then installation can take place immediately after
    turning RUM off.  Otherwise it is recommended that RUM be
    turned off for 2 hours before patch installation.
    
    This patch should NOT be installed while the RUM Background Driver
    [KMPR BACKGROUND DRIVER] option is running (this job is queued to run
    every day, usually at 1 a.m.).
  
 4. On the KIDS menu, under the 'Installation' menu, use the following
    option:
  
          Install Package(s)  'XU*8.0*122'
                               ==========
  
          No Options or Protocols need to be placed out-of-order.
  
          Want to DISABLE Scheduled Options, Menu Options, and Protocols?
          NO
  
 5. After installing this patch,
  
    OpenM Sites - you don't need to move anything, skip this step. 
  
    DSM/MSM sites - you need to move the following routines from your
    production account to each manager account: 
       ZOSVKRM 
       ZOSVKRO 
       ZOSVKRV
  
 6. And in the manager account,  (OpenM sites remain in VAH)
    All sites:
    DO RELOAD^ZTMGRSET
    Select the System
    Patch number to load: 122
                          ===
  
 7. Turn RUM back on (DSM sites only). 
 =========================================================================
  
 Example of a typical install follows:
  
 Select OPTION NAME: KMPR RUM MANAGER MENU       RUM Manager Menu menu
 CAPACITY MANAGEMENT - RUM
  
  
                          * Resource Usage Monitor 1.0 *
  
  
   STA    Status of RUM Collection
   STR    Start RUM Collection
   STP    Stop RUM Collection
   RPT    RUM Reports ...
  
 Select RUM Manager Menu Option: STA  Status of RUM Collection
  
  
  
                          Resource Usage Monitor Status
                                   Version 1.0
  
      The Resource Usage Monitor is currently running.
  
      The 'RUM Background Driver' [KMPR BACKGROUND DRIVER] is scheduled
      to run on Oct 06, 1999@01:00 every 1 day.
  
      The temporary collection global (i.e., 'XTMP("KMPR")') is present
      on your system.
  
 Press <RETURN> to continue: 
  
   STA    Status of RUM Collection
   STR    Start RUM Collection
   STP    Stop RUM Collection
   RPT    RUM Reports ...
  
 Select RUM Manager Menu Option: STOP RUM Collection
  
 Do you want to stop Resource Usage Monitor collection? YES// 
  
           Resource Usage Monitor collection is stopped.
  
  
  
  
 Select OPTION NAME: XPD MAIN       Kernel Installation & Distribution
 System menu     KIDS
  
   Edits and Distribution ...
   Utilities ...
   Installation ...
  
 Select Kernel Installation & Distribution System Option: INstallation
  
   1      Load a Distribution
   2      Verify Checksums in Transport Global
   3      Print Transport Global
   4      Compare Transport Global to Current System
   5      Backup a Transport Global
   6      Install Package(s)
          Restart Install of Package(s)
          Unload a Distribution
  
 Select Installation Option: LOAD a Distribution
 Enter a Host File: XU_8_122.KID 
  
 KIDS Distribution saved on Oct 05, 1999@08:41:52
 Comment: PATCHES XU*8.0*122 AND KMPR*1.0*1
  
 This Distribution contains Transport Globals for the following Package(s):
      XU*8.0*122
      KMPR*1.0*1
  
 Want to Continue with Load? YES// 
 Loading Distribution...
  
    XU*8.0*122
    KMPR*1.0*1
 Use INSTALL NAME: XU*8.0*122 to install this Distribution.
  
   1      Load a Distribution
   2      Verify Checksums in Transport Global
   3      Print Transport Global
   4      Compare Transport Global to Current System
   5      Backup a Transport Global
   6      Install Package(s)
          Restart Install of Package(s)
          Unload a Distribution
  
 Select Installation Option: VERify Checksums in Transport Global
 Select INSTALL NAME: XU*8.0*122 Loaded from Distribution
 12/10/99@09:07:10
      => PATCHES XU*8.0*122, KMPR*1.0*1  ;Created on Dec 10, 1999@09:05:48
  
 This Distribution was loaded on Dec 10, 1999@09:07:10 with header of 
    PATCHES XU*8.0*122, KMPR*1.0*1  ;Created on Dec 10, 1999@09:05:48
    It consisted of the following Install(s):
      XU*8.0*122     KMPR*1.0*1
 DEVICE: HOME//   TELNET DEVICE
  
 PACKAGE: XU*8.0*122     Dec 10, 1999 9:07 am                     PAGE 1
 --------------------------------------------------------------------------
  
    3 Routine checked, 0 failed.
  
  
 PACKAGE: KMPR*1.0*1     Dec 10, 1999 9:07 am                      PAGE 1
 --------------------------------------------------------------------------
  
    7 Routine checked, 0 failed.
  
  
  
   1      Load a Distribution
   2      Verify Checksums in Transport Global
   3      Print Transport Global
   4      Compare Transport Global to Current System
   5      Backup a Transport Global
   6      Install Package(s)
          Restart Install of Package(s)
          Unload a Distribution
  
 Select Installation Option: BAckup a Transport Global
 Select INSTALL NAME:    XU*8.0*122     Loaded from Distribution
 11/30/99@14:46: 36
      => XU*8.0*122, KMPR*1.0*1  ;Created on Nov 30, 1999@13:16:26
  
 This Distribution was loaded on Nov 30, 1999@14:46:36 with header of 
    XU*8.0*122, KMPR*1.0*1  ;Created on Nov 30, 1999@13:16:26
    It consisted of the following Install(s):
      XU*8.0*122     KMPR*1.0*1
 Subject: Backup of XU*8.0*122 install on Nov 30, 1999
   Replace 
 Loading Routines for XU*8.0*122...
 Loading Routines for KMPR*1.0*1....
 Send mail to: KAMAROWSKI,ROBERT A.  Replace   KAMAROWSKI,ROBERT A.
 Select basket to send to: IN//   
 And Send to: 
  
 Select Installation Option: INstall Package(s)
 Select INSTALL NAME: XU*8.0*122       Loaded from Distribution
 10/5/99@08:42:50
      => PATCHES XU*8.0*122 AND KMPR*1.0*1  ;Created on Oct 05,
 1999@08:41:52
  
 This Distribution was loaded on Oct 05, 1999@08:42:50 with header of 
 PATCHES XU*8.0*122 AND KMPR*1.0*1  ;Created on Oct 05, 1999@08:41:52
 It consisted of the following Install(s):
 XU*8.0*122
 KMPR*1.0*1
  
    XU*8.0*122
  
 Install Questions for XU*8.0*122
  
    KMPR*1.0*1
  
 Install Questions for KMPR*1.0*1
  
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
  
 DEVICE: HOME//   TELNET DEVICE
  
  
  Install Started for XU*8.0*122 : 
                Oct 05, 1999@08:43:38
  
  Installing Routines:
                Oct 05, 1999@08:43:38
  
  Updating Routine file...
  
  Updating KIDS files...
  
  XU*8.0*122 Installed. 
                Oct 05, 1999@08:43:39
  
  
                                    KMPR*1.0*1
 --------------------------------------------------------------------------
  Install Message sent #2723
  
  Install Started for KMPR*1.0*1 : 
                Oct 05, 1999@08:43:39
  
  Installing Routines:
                Oct 05, 1999@08:43:41
  
  Running Post-Install Routine: EN^KMPRPOST
  
  Updating Routine file...
  
  Updating KIDS files...
  
  KMPR*1.0*1 Installed. 
                Oct 05, 1999@08:43:41
  
  Install Message sent #2724
 --------------------------------------------------------------------------
           +------------------------------------------------------------+
   100%    |             25             50             75               |
 Complete  +------------------------------------------------------------+
  
 Install Completed
  
  
  
   1      Load a Distribution
   2      Verify Checksums in Transport Global
   3      Print Transport Global
   4      Compare Transport Global to Current System
   5      Backup a Transport Global
   6      Install Package(s)
          Restart Install of Package(s)
          Unload a Distribution
  
 Select Installation Option: 
  Cancel %DSM-E-CTLC, control C typed
 %DSM-I-ATLABEL, ASK+1^XQ:3      W !,XQAA R XQUR:DTIME I '$T Q:$D(XQALEXIT)
  W *7 ,"  Timed out...." G CON^XQTOC
  
 VAH,TST> D ^%RS
 Routine Save
  
 Output Device ?  > ZOSVKRMGR.RTN
  
 Header comment... ZOSVKR* ROUTINES FOR MGR
  
 routine(s) ?   >   ZOSVKR*
 searching directory ...
 routine(s) ?   >   ^L
  
 ZOSVKRM   ZOSVKRO   ZOSVKRV
  
 routine(s) ?   >   
  
 Saving routines on USER$:[PROGRAMMER.KAMAROWSKI]ZOSVKRMGR.RTN;2
  
 ZOSVKRM   ZOSVKRO   ZOSVKRV   
  
     3 routines saved
  
 Output Device ?  > 
 VAH,TST> 
 VAH,TST> D ^%ZUCI
  
 What UCI: MGR  
 YOU'RE IN UCI: MGR,TST
  
 MGR,TST> D ^%RR
  
 Routine Restore
  
 Input Device ?  > ZOSVKRMGR.RTN
  
  
  
 Restoring routines from USER$:[PROGRAMMER.KAMAROWSKI]ZOSVKRMGR.RTN;2
  
 Saved by %RS from [VAH,TST] on  5-OCT-1999 08:44:22.02
 Header: ZOSVKR* ROUTINES FOR MGR
  
 Restore All (A), Selected (S), or Confirm on overwrite (C) ? <A> 
  
 ZOSVKRM   ZOSVKRO   ZOSVKRV   
  
     3 routines restored
  
 Input Device ?  > 
 MGR,TST> 
 MGR,TST> 
 MGR,TST> D RELOAD^ZTMGRSET
  
  
 ZTMGRSET Version 8.0 **34,36,69,94,121**
 HELLO! I exist to assist you in correctly initializing the MGR account
 or to update the current account.
 I think you are using VAX DSM(V6)
 Which MUMPS system should I install?
  
 1 = VAX DSM(V6)
 2 = MSM-PC/PLUS
 3 = OpenM for NT
 4 = Datatree,DTM-PC,DT-MAX
 5 = MVX,ISM VAX
 6 = ISM (UNIX, Open VMS)
 System: 1//  <-- Enter the appropiate number for your facility -->
  
 Patch number to load: 122
  
 I will now rename a group of routines specific to your operating system.
 Routine: ZOSVVXD
 Routine: ZTBKCVXD
 Routine: ZIS4VXD
 Routine: ZISFVXD
 Routine: ZISHVXD
 Routine: XUCIVXD
 Routine: ZISETVXD
 Routine: ZOSV1VXD
 Routine: ZOSV2VXD
 Routine: ZTMDCL
 Routine: ZOSVKRV      Loaded, Saved as %ZOSVKR
 Routine: ZOSVKSVE
 Routine: ZOSVKSVS
 Routine: ZOSVKSD
  
 Now to load routines common to all systems.
 Routine: ZTLOAD
 Routine: ZTLOAD1
 ... 
 Routine: ZTMOVE
 Installing ^%Z editor
 ALL DONE
 MGR,TST> D ^%ZUCI
  
 What UCI: VAH  
 YOU'RE IN UCI: VAH,TST
  
 Select OPTION NAME: KMPR RUM MANAGER MENU       RUM Manager Menu m enu
 CAPACITY MANAGEMENT - RUM
  
  
  
                          * Resource Usage Monitor 1.0 *
  
  
   STA    Status of RUM Collection
   STR    Start RUM Collection
   STP    Stop RUM Collection
   RPT    RUM Reports ...
  
 Select RUM Manager Menu Option: STR  Start RUM Collection
  
 Do you want to start Resource Usage Monitor collection? YES// 
  
           Resource Usage Monitor collection is started.
  
  
   STA    Status of RUM Collection
   STR    Start RUM Collection
   STP    Stop RUM Collection
   RPT    RUM Reports ...
  
 Select RUM Manager Menu Option: STA  Status of RUM Collection
  
  
  
                          Resource Usage Monitor Status
                                   Version 1.0
  
      The Resource Usage Monitor is currently running.
  
      The 'RUM Background Driver' [KMPR BACKGROUND DRIVER] is scheduled
      to run on Oct 06, 1999@01:00 every 1 day.
  
      The temporary collection global (i.e., 'XTMP("KMPR")') is present
      on your system.
  
  
 Press <RETURN> to continue: 

Routine Information:
====================

=============================================================================
User Information:                               
Entered By  : FORT,WALLY                     Date Entered : JUN 25, 1999
Completed By: KAMAROWSKI,ROBERT             Date Completed: MAR 06, 2000
Released By : GIBBONS,JOE                   Date Released : MAR 07, 2000
=============================================================================


Packman Mail Message:
=====================

No routines included

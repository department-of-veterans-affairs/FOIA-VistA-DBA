Released RT*2*35 SEQ #34
Extracted from mail message
**KIDS**:RT*2.0*35^

**INSTALL NAME**
RT*2.0*35
"BLD",4451,0)
RT*2.0*35^RECORD TRACKING^0^3030410^y
"BLD",4451,1,0)
^^1^1^3030124^
"BLD",4451,1,1,0)
Checks that device can be queued to and fixes other NOISes.
"BLD",4451,4,0)
^9.64PA^^
"BLD",4451,"KRN",0)
^9.67PA^8989.52^19
"BLD",4451,"KRN",.4,0)
.4
"BLD",4451,"KRN",.401,0)
.401
"BLD",4451,"KRN",.402,0)
.402
"BLD",4451,"KRN",.403,0)
.403
"BLD",4451,"KRN",.5,0)
.5
"BLD",4451,"KRN",.84,0)
.84
"BLD",4451,"KRN",3.6,0)
3.6
"BLD",4451,"KRN",3.8,0)
3.8
"BLD",4451,"KRN",9.2,0)
9.2
"BLD",4451,"KRN",9.8,0)
9.8
"BLD",4451,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",4451,"KRN",9.8,"NM",1,0)
RTL1^^0^B18993386
"BLD",4451,"KRN",9.8,"NM",2,0)
RTSYS^^0^B17554039
"BLD",4451,"KRN",9.8,"NM",3,0)
RTDPA1^^0^B17805126
"BLD",4451,"KRN",9.8,"NM","B","RTDPA1",3)

"BLD",4451,"KRN",9.8,"NM","B","RTL1",1)

"BLD",4451,"KRN",9.8,"NM","B","RTSYS",2)

"BLD",4451,"KRN",19,0)
19
"BLD",4451,"KRN",19.1,0)
19.1
"BLD",4451,"KRN",101,0)
101
"BLD",4451,"KRN",409.61,0)
409.61
"BLD",4451,"KRN",771,0)
771
"BLD",4451,"KRN",870,0)
870
"BLD",4451,"KRN",8989.51,0)
8989.51
"BLD",4451,"KRN",8989.52,0)
8989.52
"BLD",4451,"KRN",8994,0)
8994
"BLD",4451,"KRN","B",.4,.4)

"BLD",4451,"KRN","B",.401,.401)

"BLD",4451,"KRN","B",.402,.402)

"BLD",4451,"KRN","B",.403,.403)

"BLD",4451,"KRN","B",.5,.5)

"BLD",4451,"KRN","B",.84,.84)

"BLD",4451,"KRN","B",3.6,3.6)

"BLD",4451,"KRN","B",3.8,3.8)

"BLD",4451,"KRN","B",9.2,9.2)

"BLD",4451,"KRN","B",9.8,9.8)

"BLD",4451,"KRN","B",19,19)

"BLD",4451,"KRN","B",19.1,19.1)

"BLD",4451,"KRN","B",101,101)

"BLD",4451,"KRN","B",409.61,409.61)

"BLD",4451,"KRN","B",771,771)

"BLD",4451,"KRN","B",870,870)

"BLD",4451,"KRN","B",8989.51,8989.51)

"BLD",4451,"KRN","B",8989.52,8989.52)

"BLD",4451,"KRN","B",8994,8994)

"BLD",4451,"QUES",0)
^9.62^^
"BLD",4451,"REQB",0)
^9.611^3^3
"BLD",4451,"REQB",1,0)
RT*2.0*29^1
"BLD",4451,"REQB",2,0)
RT*2.0*31^1
"BLD",4451,"REQB",3,0)
RT*2.0*27^1
"BLD",4451,"REQB","B","RT*2.0*27",3)

"BLD",4451,"REQB","B","RT*2.0*29",1)

"BLD",4451,"REQB","B","RT*2.0*31",2)

"MBREQ")
0
"PKG",72,-1)
1^1
"PKG",72,0)
RECORD TRACKING^RT^Medical Records and Film Jacket Tracking
"PKG",72,20,0)
^9.402P^^
"PKG",72,22,0)
^9.49I^1^1
"PKG",72,22,1,0)
2.0^2911022
"PKG",72,22,1,"PAH",1,0)
35^3030410
"PKG",72,22,1,"PAH",1,1,0)
^^1^1^3030410
"PKG",72,22,1,"PAH",1,1,1,0)
Checks that device can be queued to and fixes other NOISes.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","RTDPA1")
0^3^B17805126
"RTN","RTDPA1",1,0)
RTDPA1 ;TROY ISC/MJK,PKE-Record Label Creation ; 4/2/03 10:01am
"RTN","RTDPA1",2,0)
 ;;2.0;Record Tracking;**25,31,35**;10/22/91 
"RTN","RTDPA1",3,0)
 I '$D(RTAPL) D APL2^RTPSET D NEXT:$D(RTAPL) K RTAPL,RTSYS Q
"RTN","RTDPA1",4,0)
 ;
"RTN","RTDPA1",5,0)
NEXT S RTA=+RTAPL D ASK^RTB K RTA G Q:$D(RTESC),NEXT:Y<0 S RTE=X
"RTN","RTDPA1",6,0)
 S RTDC("S")="I $P(^(0),U,4)=+RTAPL,$S('$D(RTTY):1,$P(^RT(+Y,0),U,3)=+RTTY:1,1:0)",RTSEL="S",RTSEL("A")="Select Label" D ^RTUTL2 K RTSEL
"RTN","RTDPA1",7,0)
 I $D(RTY) S RTION=$S('$D(RTFR):"",1:$P(RTFR,"^",4)) F RTI=0:0 S RTI=$O(RTY(RTI)) Q:'RTI  S RT=+RTY(RTI) D REC^RTL1
"RTN","RTDPA1",8,0)
 I $D(RTY) D Q G NEXT
"RTN","RTDPA1",9,0)
 D ASK I '$D(RTESC) D Q G NEXT
"RTN","RTDPA1",10,0)
Q K RT,RTI,RTY,RTC,RT1,RTBCIFN,RTDC,RTE,RTESC,RTION
"RTN","RTDPA1",11,0)
 K RTRANEW,%YV,DIC1,DIY,DIYS,N,POP
"RTN","RTDPA1",12,0)
 K Y,Y2,X,X1,DIE,DIC,DA Q
"RTN","RTDPA1",13,0)
ASK S RTESC="",RTRD(1)="Yes^create a new record or volume",RTRD(2)="No^do not create any new records",RTRD("B")=2,RTRD(0)="S",RTRD("A")="Do you wish to create a new record or volume? " D SET^RTRD K RTRD I $E(X)="^" S RTESC="" Q
"RTN","RTDPA1",14,0)
 I $E(X)="Y" S RTSHOW="" D TYPE1:$D(RTTY),TYPE:'$D(RTTY) K RTSHOW
"RTN","RTDPA1",15,0)
 Q
"RTN","RTDPA1",16,0)
 ;
"RTN","RTDPA1",17,0)
TYPE K RTESC W ! S DIC="^DIC(195.2,",DIC("S")="I $P(^(0),U,3)=+RTAPL,$S('$D(^(""I"")):1,'^(""I""):1,DT'>^(""I""):1,1:0)",DIC("A")="Select NEW Record Type: ",DIC(0)="IAEMQ" D ^DIC K DIC S:X="^" RTESC="" Q:Y<0  D TYPE1^RTUTL S RTKILL=""
"RTN","RTDPA1",18,0)
TYPE1 D CREATE S RTTY1=+RTTY F RTTY2=0:0 S RTTY2=$O(^DIC(195.2,RTTY1,"LINKED","B",RTTY2)) Q:'RTTY2  I $D(^DIC(195.2,RTTY2,0)),'$D(^RT("AT",RTTY2,RTE)) S Y=RTTY2 D TYPE1^RTUTL,CREATE
"RTN","RTDPA1",19,0)
 S Y=RTTY1 K RTTY,RTTY1,RTTY2 D:'$D(RTKILL) TYPE1^RTUTL K RTKILL Q
"RTN","RTDPA1",20,0)
 ;
"RTN","RTDPA1",21,0)
CREATE ;Entry pt. with RTAPL, RTE and RTTY set
"RTN","RTDPA1",22,0)
 F I=0:0 S I=$O(^RT("AA",+RTAPL,RTE,I)) Q:'I  I $D(^RT(I,0)),+$P(^(0),"^",3)=+RTTY Q
"RTN","RTDPA1",23,0)
 I I Q:$D(RTBKGRD)
"RTN","RTDPA1",24,0)
 I I W !!?3,*7,$P(RTAPL,"^",9)," already has a '",$P(^DIC(195.2,+RTTY,0),"^"),"' record (#",I,") Vol: ",+$P(^RT(I,0),"^",7),"." I $P(^DIC(195.2,+RTTY,0),"^",17)'="y" W !?3,"[Multiple volumes are NOT allowed for this record type.]" Q
"RTN","RTDPA1",25,0)
 I I D NEW^RTT1 Q
"RTN","RTDPA1",26,0)
 S RTVOL=1,RTPAR="" D SET K RTVOL,RTPAR Q
"RTN","RTDPA1",27,0)
 ;
"RTN","RTDPA1",28,0)
SET ;Entry pt. with RTAPL, RTE, RTTY, RTVOL, and RTPAR defined; RTDIV optional
"RTN","RTDPA1",29,0)
 S X=$S($D(RTDIV):+RTDIV,1:"") I 'X S X=+$O(^DIC(195.1,+RTAPL,"INST",0)),X=$S('$O(^(X)):X,1:"")
"RTN","RTDPA1",30,0)
 S RTINIT="" I $D(^DIC(195.1,"AB",+RTTY,+RTAPL,+X)),$D(^DIC(195.1,+RTAPL,"INST",+X,"TYPE",+$O(^(+X,0)),0)) S RTINIT=^(0)
"RTN","RTDPA1",31,0)
 D NOW^%DTC S RTNOW=%,I=$P(^RT(0),"^",3) K %
"RTN","RTDPA1",32,0)
 ;D:$D(XRTL) T0^%ZOSV ; monitor record creation et, non-inter = 'rtshow
"RTN","RTDPA1",33,0)
 I '$D(RTSHOW),$D(XRTL) D T0^%ZOSV
"RTN","RTDPA1",34,0)
LOCK S I=I+1 S:$L(I)=4 I=10000 L +^RT(I):1 I '$T!$D(^RT(I)) L -^RT(I) G LOCK
"RTN","RTDPA1",35,0)
 S ^RT(I,0)=RTE_"^"_+^DIC(195.4,1,"SITE"),^RT("B",RTE,I)="",^(0)=$P(^RT(0),"^",1,2)_"^"_I_"^"_($P(^(0),"^",4)+1),^DISV($S($D(DUZ)'[0:DUZ,1:0),"^RT(")=I S:$P(RTE,";",2)="DPT(" ^RT(I,0)=^RT(I,0)_"^^^^^^^"_+RTE,^RT("C",+RTE,I)="" L -^RT(I)
"RTN","RTDPA1",36,0)
 ;
"RTN","RTDPA1",37,0)
 S (RT,DA)=I,DIE="^RT(",DR="[RT NEW RECORD]"
"RTN","RTDPA1",38,0)
 D ^DIE K DQ,DE,RTINIT,RTNOW D MOVE^RTUTL1
"RTN","RTDPA1",39,0)
 ;S:$D(XRT0) XRTN=$T(+0) D:$D(XRT0) T1^%ZOSV ; end et, non-inter
"RTN","RTDPA1",40,0)
 I '$D(RTSHOW),$D(XRT0) S XRTN=$T(+0) D T1^%ZOSV
"RTN","RTDPA1",41,0)
 W:'$D(RTBKGRD) !?3,"...'",$E($P(^DIC(195.2,+RTTY,0),"^"),1,22),?30,"   VOL: ",RTVOL,"' created (#",RT,")"
"RTN","RTDPA1",42,0)
 ;
"RTN","RTDPA1",43,0)
MOR I '$D(RTSHOW),'$D(RTADM) Q
"RTN","RTDPA1",44,0)
 N RTERROR
"RTN","RTDPA1",45,0)
MOR1 S X=$S($D(RTFR):$P(RTFR,"^",4),1:""),RTERROR=0
"RTN","RTDPA1",46,0)
 I $S(X']"":1,'$D(^%ZIS(1,"B",X)):1,'$D(^%ZIS(1,+$O(^(X,0)),0)):1,1:0) D  Q:POP  I RTERROR G MOR1
"RTN","RTDPA1",47,0)
 . S %ZIS("A")="Select Barcode Printer: ",%ZIS="QN" D ^%ZIS K %ZIS,IO("Q") Q:POP
"RTN","RTDPA1",48,0)
 . S X=ION
"RTN","RTDPA1",49,0)
 . S RTA=$O(^%ZIS(1,"B",ION,0)) I ^%ZIS(1,RTA,"TYPE")="VTRM" D ER^RTL1 S RTERROR=1
"RTN","RTDPA1",50,0)
 S RTION=X D REC^RTL1 K RTION Q
"RTN","RTDPA1",51,0)
 Q
"RTN","RTDPA1",52,0)
TRAN ;creat record transfered in
"RTN","RTDPA1",53,0)
 S RTRANEW="",RTA=+RTAPL D ASK^RTB K RTA G Q:$D(RTESC),TRAN:Y<0 S RTE=X
"RTN","RTDPA1",54,0)
 D ASK I '$D(RTESC) D Q G TRAN
"RTN","RTL1")
0^1^B18993386
"RTN","RTL1",1,0)
RTL1 ;TROY ISC/MJK-Routine to Print Labels ; 5/1/87  11:55 AM ; 4/10/03 3:28pm
"RTN","RTL1",2,0)
 ;;2.0;Record Tracking;**27,35**;10/22/91
"RTN","RTL1",3,0)
RTQ Q:'$D(^RTV(190.1,RTQ,0))  S RTIFN=RTQ I $D(^RT(+^(0),0)) S X=+$P(^(0),"^",3),T=6,RTMES="W !?3,""...notice for request #"_RTIFN_" has been queued to print on device "",$E(RTION,1,15)",RTNUM=1
"RTN","RTL1",4,0)
REC I '$D(RTIFN) Q:'$D(^RT(RT,0))  S RTIFN=RT,X=+$P(^(0),"^",3),T=5,RTMES="W !?3,""...label for record #"_RTIFN_" has been queued to print on device "",$E(RTION,1,15)",RTNUM=1
"RTN","RTL1",5,0)
 D FMT,Q:RTFMT K RTMES,RTNUM,RTIFN,RTFMT,T Q
"RTN","RTL1",6,0)
 ;
"RTN","RTL1",7,0)
FMT S RTFMT=$S('$D(^DIC(195.2,X,0)):"",$D(^DIC(194.4,+$P(^(0),"^",T),0)):$P(^DIC(195.2,X,0),"^",T),1:"") Q
"RTN","RTL1",8,0)
 ;
"RTN","RTL1",9,0)
PRT K RTBAR,RTQ,RTBC Q:'$D(^DIC(194.4,RTFMT,0))  S T=$P(^(0),"^",4)
"RTN","RTL1",10,0)
 I $D(RTEST) F RTI=0:0 S RTI=$O(^DIC(194.4,RTFMT,1,RTI)) Q:RTI'>0  I $D(^(RTI,0)),$D(^DIC(194.5,+^(0),0)) S @$P(^(0),"^",5)=$P(^(0),"^",4) S:$P(^(0),"^",6)="y" RTBC=$P(^(0),"^",5)
"RTN","RTL1",11,0)
 I '$D(RTEST) D TYPE G EXIT:RT0="" F RTI=0:0 S RTI=$O(^DIC(194.4,RTFMT,1,RTI)) Q:RTI'>0  I $D(^(RTI,0)) S RTJ=+^(0) I $D(^DIC(194.5,RTJ,0)) S:$P(^(0),"^",6)="y" RTBC=$P(^(0),"^",5) I $D(^("E")) X ^("E")
"RTN","RTL1",12,0)
 F RTII=1:1:RTNUM W @IOF F RTI=0:0 S RTI=$O(^DIC(194.4,RTFMT,"E",RTI)) Q:RTI'>0  X ^DIC(194.4,RTFMT,"E",RTI,0)
"RTN","RTL1",13,0)
 ;reverse video
"RTN","RTL1",14,0)
 ;
"RTN","RTL1",15,0)
 ;"bar1,bar0,barx"; flush for intermec RD
"RTN","RTL1",16,0)
 I $D(RTBC) S RTON=$S($D(^%ZIS(2,IOST(0),"BAR1")):^("BAR1"),1:""),RTON=$S(RTON]"":RTON,1:"*0"),RTOFF=$S($D(^("BAR0")):^("BAR0"),1:""),RTOFF=$S(RTOFF]"":RTOFF,1:"*0"),X=@RTBC W @RTON,X,@RTOFF K RTON,RTOFF
"RTN","RTL1",17,0)
EXIT F RTI=0:0 S RTI=$O(^DIC(194.4,RTFMT,1,RTI)) Q:RTI'>0  I $D(^(RTI,0)),$D(^DIC(194.5,+^(0),0)) K @$P(^(0),"^",5)
"RTN","RTL1",18,0)
 I $D(RTBAR) S T=5,RTIFN=+RTQ,X=+$P(RT0,"^",3) D FMT G PRT:RTFMT
"RTN","RTL1",19,0)
RD I $D(ION),ION["INTERMEC" F ZQ=0:0 R ZQ:0 Q:'$T
"RTN","RTL1",20,0)
 K ZQ,RTCL,RT0,RTQ,T,RTI,RTII,RTIFN,RTNUM,RTFMT D:'$D(RTTASK) CLOSE^RTUTL Q
"RTN","RTL1",21,0)
 ;
"RTN","RTL1",22,0)
TYPE I T="r",$D(^RT(RTIFN,0)) D NOW^%DTC S $P(^(0),"^",8)=%,RT0=^(0),RTCL=$S($D(^RT(RTIFN,"CL")):^("CL"),1:"") Q
"RTN","RTL1",23,0)
 I T="q",$D(^RTV(190.1,RTIFN,0)),$P(^(0),"^",6)'="x" D NOW^%DTC S $P(^(0),"^",13)=%,RTQ=^(0),RT0=$S($D(^RT(+RTQ,0)):^(0),1:0),RTCL=$S($D(^RT(+RTQ,"CL")):^("CL"),1:"") S:$S($P(RT0,"^",8):0,1:$D(^RTV(195.9,"AC",ION))>0) RTBAR="" Q
"RTN","RTL1",24,0)
 I T="b",$D(^RTV(195.9,RTIFN,0)) S RT0=^(0) Q
"RTN","RTL1",25,0)
 S RT0="" Q
"RTN","RTL1",26,0)
 ;
"RTN","RTL1",27,0)
 ;
"RTN","RTL1",28,0)
Q I $S('$D(RTION):1,RTION']"":1,'$D(^%ZIS(1,"B",RTION)):1,'$D(^%ZIS(1,+$O(^(RTION,0)),0)):1,1:0) Q:$D(RTBKGRD)  D ZIS Q:POP  S RTION=ION,RTA=$O(^%ZIS(1,"B",ION,0)) N RTERR D CHKDEV G Q:RTERR I (^%ZIS(1,RTA,"TYPE")="VTRM") D ER G Q
"RTN","RTL1",29,0)
 S RTVAR="RTIFN^RTNUM^RTFMT",RTVAL=RTIFN_"^"_RTNUM_"^"_RTFMT,RTW=$H
"RTN","RTL1",30,0)
 X ^%ZOSF("UCI") S ZTRTN="DQ^RTL1",ZTUCI=Y,ZTDTH=$H,ZTSAVE("RTVAR")="",ZTSAVE("RTVAL")="" S:$D(DUZ(0)) ZTSAVE("DUZ(0)")=""
"RTN","RTL1",31,0)
 ;
"RTN","RTL1",32,0)
 S ZTDESC="Record Tracking Label Print"
"RTN","RTL1",33,0)
 I '$D(RTTASK) S RTHG=$E(RTION,$L(RTION)-5,99),RTION=$S(RTHG'["RTHG":RTION,1:$E(RTION,1,$L(RTION)-1)_(1+($S($D(RTE):$S(RTE[";DPT(":+$P(^DPT(+RTE,0),"^",9)#2,1:+RTE#2),1:0)))) K RTHG
"RTN","RTL1",34,0)
 S ZTIO=RTION
"RTN","RTL1",35,0)
 D ^%ZTLOAD
"RTN","RTL1",36,0)
 D HOME^%ZIS ;returns io to home device
"RTN","RTL1",37,0)
 X:$D(RTMES)&('$D(RTBKGRD))&('$D(RTIRE)) RTMES H:$D(RTMES) 1 K RTW,RTVAR,RTVAL,ZTSK Q
"RTN","RTL1",38,0)
 ;
"RTN","RTL1",39,0)
DQ S IO(0)=IO
"RTN","RTL1",40,0)
 F I=1:1 Q:$P(RTVAR,"^",I)']""  S @($P(RTVAR,"^",I))=$P(RTVAL,"^",I)
"RTN","RTL1",41,0)
 S U="^" S X="T",%DT="" D ^%DT S DT=Y G PRT
"RTN","RTL1",42,0)
 Q
"RTN","RTL1",43,0)
 ;
"RTN","RTL1",44,0)
ER W !!,*7,"You can not queue to a virtual terminal, try again."
"RTN","RTL1",45,0)
 S RTION=""
"RTN","RTL1",46,0)
 Q
"RTN","RTL1",47,0)
 ;
"RTN","RTL1",48,0)
ZIS S %ZIS("A")="Select Label Device: ",%ZIS="NQ" D ^%ZIS K %ZIS,IO("Q")
"RTN","RTL1",49,0)
 Q
"RTN","RTL1",50,0)
CHKDEV ; check that device can be queued to
"RTN","RTL1",51,0)
 N RTDEV,RTSUB
"RTN","RTL1",52,0)
 S RTERR=0
"RTN","RTL1",53,0)
 S RTDEV=$G(^%ZIS(1,RTA,0))
"RTN","RTL1",54,0)
 I $P(RTDEV,U,12)=2 S RTERR=1
"RTN","RTL1",55,0)
 I $P(RTDEV,U)["SLAVE" S RTERR=1
"RTN","RTL1",56,0)
 S RTSUB=+$G(^%ZIS(1,RTA,"SUBTYPE"))
"RTN","RTL1",57,0)
 I RTSUB S RTSUB=$G(^%ZIS(2,RTSUB,0),U)
"RTN","RTL1",58,0)
 I RTSUB["SLAVE" S RTERR=1
"RTN","RTL1",59,0)
 I RTERR S RTION="" W !!,*7,"You cannot queue to this device, try again."
"RTN","RTL1",60,0)
 Q
"RTN","RTSYS")
0^2^B17554039
"RTN","RTSYS",1,0)
RTSYS ;TROY ISC/MJK-Record Tracking System Definition Menu ; 5/19/87  11:34 AM ; 4/10/03 3:27pm
"RTN","RTSYS",2,0)
 ;;2.0;Record Tracking;**21,29,35**;10/22/91 
"RTN","RTSYS",3,0)
 D DT^DICRW S X=$T(+1),DIK="^DOPT("""_$P(X," ;",1)_""","
"RTN","RTSYS",4,0)
 G:$D(^DOPT($P(X," ;"),9)) A S ^DOPT($P(X," ;"),0)=$P(X,";",3)_"^1N^" F I=1:1 S Y=$T(@I) Q:Y=""  S ^DOPT($P(X," ;"),I,0)=$P(Y,";",3,99)
"RTN","RTSYS",5,0)
 D IXALL^DIK
"RTN","RTSYS",6,0)
A D OVERALL^RTPSET Q:$D(XQUIT)
"RTN","RTSYS",7,0)
 W !! S DIC="^DOPT("""_$P($T(+1)," ;")_""",",DIC(0)="IQEAM" D ^DIC Q:Y<0  D @+Y G A
"RTN","RTSYS",8,0)
 ;
"RTN","RTSYS",9,0)
1 ;;Type of Record Set-up
"RTN","RTSYS",10,0)
 W ! S DIC("DR")="3////"_+RTAPL,DIC("A")="Select Record Type: ",DIC(0)="IAEMLQ",DIC("S")="I $P(^(0),U,3)=+RTAPL",DIC="^DIC(195.2,",DLAYGO=195.2 D ^DIC K DIC,DLAYGO G Q:Y<0 S DA=+Y
"RTN","RTSYS",11,0)
 S DIE="^DIC(195.2,",DR="[RT TYPE SET-UP]" D ^DIE K DQ,DE G 1
"RTN","RTSYS",12,0)
Q K DA,D0,DIC,DIE,DR,I,C,P,X,Y,RT0 Q
"RTN","RTSYS",13,0)
 ;
"RTN","RTSYS",14,0)
2 ;;File Room Set-up
"RTN","RTSYS",15,0)
L2 D FR^RTSM G Q:Y<0 S DA=+Y,DIE="^RTV(195.9,",DR="[RT FILE ROOM SET-UP]" D ^DIE K DQ,DE G L2
"RTN","RTSYS",16,0)
Q2 Q
"RTN","RTSYS",17,0)
 ;
"RTN","RTSYS",18,0)
3 ;;Application Set-up
"RTN","RTSYS",19,0)
 W ! S DA=+RTAPL,DIE="^DIC(195.1,",DR="[RT APPL SET-UP]" D ^DIE K DE,DQ G Q
"RTN","RTSYS",20,0)
 ;
"RTN","RTSYS",21,0)
4 ;;Reasons File Set-up
"RTN","RTSYS",22,0)
L4 W ! S DIC("DR")="3////"_+RTAPL,DIC("A")="Select Reason: ",DIC(0)="IAEMLQ",DIC("S")="I $P(^(0),U,3)=+RTAPL",DIC="^DIC(195.6," D ^DIC K DIC G Q:Y<0 S DA=+Y
"RTN","RTSYS",23,0)
 S DIE="^DIC(195.6,",DR="[RT REASON SET-UP]" D ^DIE K DQ,DE G L4
"RTN","RTSYS",24,0)
Q4 Q
"RTN","RTSYS",25,0)
 ;
"RTN","RTSYS",26,0)
5 ;;Label Function Menu
"RTN","RTSYS",27,0)
 G ^RTL
"RTN","RTSYS",28,0)
 ;
"RTN","RTSYS",29,0)
6 ;;Individual Borrower Set-up
"RTN","RTSYS",30,0)
L6 W ! S A=+RTAPL D DIC^RTDPA31 S DIC="^RTV(195.9,",DIC("A")="Select Borrower: ",DIC(0)="IAELMQ",DIC("S")="S Z0=^(0),Z=$P($P(Z0,U),"";"",2) I $P(Z0,U,3)="_+RTAPL_" D DICS1^RTDPA31" D ^DIC K DIC G Q6:Y<0
"RTN","RTSYS",31,0)
 ;
"RTN","RTSYS",32,0)
 D BOR G L6
"RTN","RTSYS",33,0)
Q6 K RTDA G Q
"RTN","RTSYS",34,0)
 ;
"RTN","RTSYS",35,0)
BOR S DA=+Y,DR="[RT BORROWER SET-UP]",DIE="^RTV(195.9," D ^DIE K DE,DQ Q
"RTN","RTSYS",36,0)
 ;
"RTN","RTSYS",37,0)
7 ;;[FOR FUTURE USE]
"RTN","RTSYS",38,0)
 ;
"RTN","RTSYS",39,0)
TFR W ! S DIC(0)="IALEMQ",DIC="^DIC(4,",DIC("A")="Transfer Institution: " D ^DIC K DIC Q:Y<0  S RTA=+RTAPL,RTB=+Y_";DIC(4,",Y=+$O(^RTV(195.9,"ABOR",RTB,RTA,0)) D SET^RTDPA3:'Y K RTB,RTA
"RTN","RTSYS",40,0)
 Q
"RTN","RTSYS",41,0)
 ;
"RTN","RTSYS",42,0)
8 ;;Print Borrower Label
"RTN","RTSYS",43,0)
 I $S('$D(^DIC(194.4,+$P(RTAPL,"^",3),0)):1,$P(^(0),"^",4)'="b":1,$P(^(0),"^",3)'=+RTAPL:1,1:0) W !?3,*7,"No valid borrower label format assigned for application." G Q8
"RTN","RTSYS",44,0)
 S DIC("A")="Select Borrower: ",DIC="^RTV(195.9,",DIC(0)="IAEMLQ",DIC("DR")="3////"_+RTAPL,DIC("S")="I $P(^(0),U,3)="_+RTAPL D ^DIC K DIC G Q8:Y<0
"RTN","RTSYS",45,0)
 S:$D(RTFR) RTION=$P(RTFR,"^",4) S RTIFN=+Y,RTFMT=+$P(RTAPL,"^",3),RTMES="W !?3,""...Barcode label has been queued to print on device "",RTION,"".""",RTNUM=1 D Q^RTL1 G 8
"RTN","RTSYS",46,0)
Q8 K RTFMT,RTA,RTIFN,RTION,RTNUM,RTMES G Q
"RTN","RTSYS",47,0)
 ;
"RTN","RTSYS",48,0)
9 ;;Add/Edit 'PERSON' Borrower
"RTN","RTSYS",49,0)
 ;W ! S DIC="^VA(200,",DIC(0)="IAEQELM" D ^DIC K DIC G Q:Y<0 D CHK^RTDPA3,BOR:Y>0 G 9
"RTN","RTSYS",50,0)
Q9 Q
"RTN","RTSYS",51,0)
 ;
"RTN","RTSYS",52,0)
OTHER ;
"RTN","RTSYS",53,0)
 W !!,"Applications Using this 'PERSON' borrower:" S I=0 F A=0:0 S A=$O(^RTV(195.9,"ABOR",$P(Y,"^",2),A)) Q:'A  S I=I+1 W !?5,"- ",$S($D(^DIC(195.1,A,0)):$P(^(0),"^"),1:"UNKNOWN")
"RTN","RTSYS",54,0)
 W:'I !!?5,*7,"No applications use this 'PERSON'." W !!,"Be careful when changing the 'NAME' of this 'PERSON' borrower." K A,I Q
"RTN","RTSYS",55,0)
 ;
"RTN","RTSYS",56,0)
10 ;;Movement Type Set-up
"RTN","RTSYS",57,0)
 W ! S DIC="^DIC(195.3,",DIC(0)="IAEMQ",DIC("S")="I $P(^(0),U,3)="_+RTAPL,DIC("A")="Select MOVEMENT TYPE: " D ^DIC K DIC G Q:Y<0 S DA=+Y,DIE="^DIC(195.3,",DR="[RT MOVEMENT SET-UP]" D ^DIE K DE,DR,DQ G 10
"VER")
8.0^22
**END**
**END**

$TXT Created by NABER,DAVID A at DEVCUR.FO-SLC.MED.VA.GOV  (KIDS) on Friday, 10/24/03 at 11:40
=============================================================================
Run Date: DEC 08, 2003                     Designation: GMRA*4*17
Package : GMRA - ADVERSE REACTION TRACKING    Priority: Mandatory
Version : 4        SEQ #16                      Status: Released
                  Compliance Date: JAN 08, 2004
=============================================================================

Associated patches: (v)GMRA*4*6    <<= must be installed BEFORE `GMRA*4*17'
                    (v)GMRA*4*8    <<= must be installed BEFORE `GMRA*4*17'
                    (v)GMRA*4*14   <<= must be installed BEFORE `GMRA*4*17'

Subject: Free text utility

Category: 
  - Routine
  - Data Dictionary

Description:
============

 A utility is introduced in this patch that will help sites identify
 and fix allergy entries that have free text reactants.  Previously,
 users were allowed to add free text reactants, which are undesirable
 as they often do not include all the required information for
 order checking, etc.
  
 Release notes, contained in file GMRA_4_17_RN.pdf, are available for 
 download.  The preferred method is to FTP the files from 
 download.vista.med.va.gov. This transmits the files from the first
 available FTP server.  Sites may also elect to retrieve software directly
 from a specific server as follows:
  
 Albany          ftp.fo-albany.med.va.gov
 Hines           ftp.fo-hines.med.va.gov 
 Salt Lake City  ftp.fo-slc.med.va.go
  
 The documentation can also be found on the System Design and Development
 Web page:(http://vista.med.va.gov/vdl/).
  
 With this patch, free text entries will no longer be allowed from
 within the allergy tracking package.  A subsequent patch to CPRS will
 stop the ability to add free text entries from within CPRS as well.
 However, in an effort to let sites begin the clean up process the
 utility is being sent out ahead of the scheduled changes for the CPRS
 interface.
  
 A new mail group, GMRA REQUEST NEW REACTANT, will be added with this
 patch.  Sites should populate this mail group with the people responsible
 for addressing requests to add new reactants.  If a user attempts to
 enter a reactant that is not found during the look up process they are
 asked if they would like to send an email requesting the addition of
 the new reactant.  The request can then be reviewed for accuracy and
 new, local entries can added if appropriate.  Previously, the user
 was asked if they wanted to add the new entry and it was immediately
 available in the patient's record.  Under the new system, the new
 reactant would need to be reviewed prior to being added to the patient's
 record.
  
 Lower case entries are no longer allowed.  Previously, lower case
 entries could be added to the GMR ALLERGIES file (120.82).  A
 post-installation routine will identify any local entries and update
 the entries to upper case. Synonyms will also be checked and converted to 
 uppercase if required.
  
 The post-installation routine will also clean up erroneous entries in the 
 PATIENT ALLERGIES file caused by previous package problems. Also, the 
 AODT cross reference will be reviewed and updated if necessary.  Due to a 
 problem with date conversion it was possible to have fileman dates with 
 trailing zeros.  This caused the cross reference to be incorrectly built.
  
 From within the allergy tracking package, when selecting a reactant,
 the user will now be shown the file that is being searched.  This should
 aid the user in selecting the best reactant to associate with the
 patient's allergy entry.
  
 Currently, the allergy tracking package allows users to leave entries
 in a "not signed off" state.  The allergy, though not complete, will
 be part of the patient's record even though the user is told that it
 will not be.  Depending on how the entry was made, an alert may not
 be sent indicating that the entry needs to be signed off.  Ultimately, 
 an unfinished entry may never be finished but may still appear in the 
 patient's record.  A change has been made so that no new entry can be left
 in a "not signed off" state.  Upon entering a new allergy, if the user
 enters an "^" at any point during the data gathering process, the entry
 will be deleted.  Upon completing the new entry the user will be asked if
 the entry is ok.  If the user enters no then they'll be given the
 opportunity to edit or delete the entry.  The entry must then be deleted
 or accepted before exiting this process.  As a result, no new entries will
 be allowed to be in an unsigned state.
  
 **NOTE** Sites should run the "Patient Allergies Not Signed Off" option to
 identify all existing entries that have not yet been completed.  Each
 entry should be reviewed and marked as entered-in-error or completed by
 entering the required information.  Once these entries are cleaned up then
 no unsigned entries should appear in the patient's chart.  You are not
 required to update these entries as data may not be available but you
 should review them and take action if possible.  The post-installation 
 routine will also list any allergies that are observed, have been signed 
 off, but are missing either an observed date or a sign/symptom.  These 
 entries should also be reviewed and updated if possible.
  
 This patch also fixes a problem where signs/symptoms could be erroneously 
 stored as "-1" rather than the correct numerical representation.  This 
 has been fixed and the post-installation routine will identify and delete 
 any erroneous sign/symptom entries from the associated files.
  
 NOIS
 ====
 PUG-0503-50846     PROTOCOL PSO EDIT ALLERGY FAILS TO CLEANUP GMRAOUT
 BAY-0103-31601     Unable to Enter Allergy/ADR
  
 When a user enters an "^" to escape from a prompt a variable is set 
 indicating that you exited using an "^".  In a number of places in the 
 allergy tracking code this value is not cleared upon exiting from the 
 option.  The value is now cleared and users may continue to process 
 normally.
  
 HIN-0800-41504     ODD AODT XREF
  
 Before a kernel patch was distributed to fix a problem with the 
 conversion of HL7 formatted dates to file manager formatted dates it was 
 possible to have dates with trailing zeros.  Dates with trailing zeros 
 are treated as strings rather than numbers.  Cross references do not 
 build correctly when the date/time is a string rather than a number.  The 
 post-install routine will identify all existing "string date/time" 
 entries and will convert them to correct file manager format.
  
 OKL-1001-73363     ART entries in lower case
 CON-0700-11467     Provider allowed to put in lower case letters
 WRJ-0200-10423     CAN'T edit an allergy that is in lowercase letters
 ALX-0100-71981     Can't edit allergies entered in lower case
 CMO-0100-40317     Allergies Entered in Lowercase
 POR-1299-50568     Can't edit allergy entries
 MON-0999-51189     CPRS entered allergens
 STC-0599-41575     RECORDS FLAGGED - NO KNOWN ALLERGY
 WBP-0499-20346     LOWER CASE ALLERGY ENTRY
 WPB-0498-30034     CPRS entry of ART in lower case
  
 Previously, it was possible to add lower case reactants either as free 
 text entries or as local entries into the GMR ALLERGIES file.  A change 
 has been made so that entries into the GMR ALLERGIES file will be in 
 upper case.  In addition, a change was made in the ART package so that 
 lowercase free text entries can no longer be allowed.  Lower case entries 
 may still be added via the List manager interface in CPRS, but this will 
 be fixed in a subsequent patch to CPRS.  All lowercase free text entries 
 need to be reviewed and either marked as entered in error or updated to 
 an existing reactant from one of the files that allergies points to.  In 
 order to accomplish this a utility has been developed that will find all 
 existing free text entries.  This utility will then allow you to either 
 update the entries or mark them as entered in error.  The utility will be 
 added to the Enter/Edit Site Configurable Files menu in the allergy 
 tracking package.
  
 ISA-1297-10002     Creation of Progress Note w/o Electronic Signature
 SBY-1099-32649     Reinstate editing/signing PN through ART
  
 Prior to the installation of OE/RR when entering a reaction you were 
 taken to the progress notes package and allowed to modify the progress 
 note that was filed.  With the installation of this patch, this 
 functionality is restored.  When appropriate, the user is taken to the 
 TIU package to modify the progress note that would be filed due to 
 changes made to the patient's allergy.
  
 SDC-0399-62721     VIEW ALERT FOR NOT SIGNED OFF ALLERGY GOES AWAY ANYWAY
 HUN-0998-20735     ALLERGIES NOT SIGNED OFF
 HUN-0998-20737     UNSIGNED ALLERGIES ENTERED
  
 Alerts are sent when an allergy is entered and left unsigned 
 (incomplete).  Prior to this patch, it was possible to exit the entry of 
 an allergy in such a way that the alert was never sent.  It was also 
 possible for the alert to go away without ever signing off on the 
 allergy.  After installation of patch 17, you will no longer be allowed 
 to leave an allergy in a "not signed off" state.  Required information 
 must be entered or the allergy will be deleted and the user will have to 
 re-enter the information when they have everything they need.  Sites will 
 need to review their unsigned allergies and either complete them or mark 
 them as entered in error.  The option GMRA PRINT-NOT SIGNED OFF can be 
 used to obtain a listing of allergies that need to be reviewed.  In 
 addition, the post-install routine will also list all observed allergies 
 that have been signed off that do not have the required information of 
 observed date/time and sign/symptoms.  These allergies should also be 
 reviewed and either completed or marked as entered in error.
  
 ALB-1299-52704     SIGN+8 GMRADSP1 undef variable
 MWV-0401-20238     Error - $ZE= SIGN+8^GMRADSP1:1,
 PUG-1201-50760     <UNDEF>SIGN+8~GMRADSP1:1
  
 When entering reaction information (signs/symptoms) for an allergy via the
 list manager interface in CPRS it was possible for the system to send a 
 -1 when a non-existent sign/symptom was entered at the same time as an 
 existing entry.  For example, if the user entered hives, anziety 
 (mis-spelled on purpose for this example), the system would have sent a 
 -1 for the incorrect entry.  Invalid reaction entries are now ignored.  
 The post-installation routine will also identify and delete any existing 
 entries.
  
 PROTOCOL SUMMARY:
 =================
 The following protocols are added in support of the free text utility:
  
 GMRA FIX ADD/EDIT ALLERGY FILE
 GMRA FIX ADD/EDIT ALLERGY FILE IN DETAIL
 GMRA FIX DETAIL IN DETAIL
 GMRA FIX DETAIL LIST
 GMRA FIX DETAIL MENU
 GMRA FIX ENTERED IN ERROR
 GMRA FIX ENTERED IN ERROR IN DETAIL
 GMRA FIX FREE TEXT LIST
 GMRA FIX UPDATE REACTANT
 GMRA FIX UPDATE REACTANT IN DETAIL
 GMRA FIX PATIENT A/AR EDIT IN DETAIL
  
 LIST TEMPLATES:
 ===============
 GMRA FIX and GMRA FIX DETAIL are added in support of the free text 
 utility.
  
 OPTION:
 ========
 The option GMRA FREE TEXT UTILITY has been added to the GMRA SITE FILE 
 MENU option.
  
 MAIL GROUP:
 ===========
 The mail group GMRA REQUEST NEW REACTANT has been added.  Requests for 
 new allergy entries will be sent to the members of this group.  Members 
 must be added to this group.
  
 FILES:
 ======
 The GMR ALLERGIES (#120.82) file has been updated so that entries are 
 stored in upper case.  This includes any synonyms as well.
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
      <tab>;;4.0;Adverse Reaction Tracking;**[patch list]**;Mar 29, 1996
  
                            CHECK^XTSUMBLD results
 Routine name         Before Patch          After Patch         Patch List
 ============         ============          ===========         ==========
 GMRAFX                        N/A             29943036              17
 GMRAFX1                       N/A             13606085              17
 GMRAFX2                       N/A             13058727              17
 GMRAFX3                       N/A             14437876              17
 GMRAOR6                   1825026              1989086              17
 GMRAOR7                   1356308              1525209             4,17
 GMRAPED0                 13519042             14150599              17
 GMRAPEM0                  8281139             14054587            2,5,17
 GMRAPEO0                  4242971              4362542             8,17
 GMRAPES0                 15729385             27112804            13,17
 GMRAPES1                  5625701              5627244           13,14,17
 GMRAPET0                  6614863              7048876             6,17
 GMRASIG1                  5985745              6039446             2,17
 GMRASIGN                  8182730             14414875              17
 GMRAUTL                   6845848              6969746              17
 GMRAY17                       N/A             13568415              17
  
 INSTALLATION
 ============
 Users may be on the system during installation of this patch, though this
 patch should be loaded during non-peak hours to minimize disruption to
 users.  Installation will take less than 5 minutes.
  
 *NOTE: A routine will be queued to run in the background that will fix a 
 number of issues with the existing allergy data.  A mail message will be 
 sent upon completion of the review.  The message may include allergies 
 that are observed and signed off that are missing required data.  You may 
 wish to review those entries for possible updating.
  
 *NOTE: A new mail group GMRA REQUEST NEW REACTANT has been added with 
 this patch.  You must populate this mail group in order for information 
 to be sent when users attempt to add 'free text' reactants.
  
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
 2.  Review your mapped set.  If any of the routines listed in the
     ROUTINE SUMMARY section are mapped, they should be removed
     from the mapped set at this time.
  
 3.  From the Kernel Installation and Distribution System Menu, select
     the Installation menu.
  
 4.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter GMRA*4.0*17):
         a.  Backup a Transport Global
         b.  Compare Transport Global to Current System
         c.  Verify Checksums in Transport Global
  
 5.  Use the Install Package(s) option and select the package GMRA*4.0*17.
  
 6.  When prompted Enter the Coordinator for Mail Group 'GMRA REQUEST NEW 
     REACTANT':, you may hit return and leave it blank.
  
 7.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of   
     Install? YES//', you may respond NO and rebuild at a later time, 
     depending on your site's preferences.
  
 8.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//',
     you may respond NO.
  
 9.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? YES//', respond NO.
  
 10. If routines were unmapped as part of step 2, they should be returned
     to the mapped set once the installation has run to completion.
  
 11. Populate new mail group GMRA REQUEST NEW REACTANT will local members.
  
 12. Upon receipt of the post-installation message you may delete routine 
     GMRAY17

Routine Information:
====================

Routine Name:
  - GMRAFX


Routine Checksum:

Routine Name:
  - GMRAFX1


Routine Checksum:

Routine Name:
  - GMRAFX2


Routine Checksum:

Routine Name:
  - GMRAFX3


Routine Checksum:

Routine Name:
  - GMRAPES1


Routine Checksum:

Routine Name:
  - GMRAPES0


Routine Checksum:

Routine Name:
  - GMRAY17


Routine Checksum:

Routine Name:
  - GMRAPET0


Routine Checksum:

Routine Name:
  - GMRASIGN


Routine Checksum:

Routine Name:
  - GMRAPEM0


Routine Checksum:

Routine Name:
  - GMRAUTL


Routine Checksum:

Routine Name:
  - GMRASIG1


Routine Checksum:

Routine Name:
  - GMRAPEO0


Routine Checksum:

Routine Name:
  - GMRAOR6


Routine Checksum:

Routine Name:
  - GMRAOR7


Routine Checksum:

Routine Name:
  - GMRAPED0


Routine Checksum:

=============================================================================
User Information:
Entered By  : NABER,DAVID A                 Date Entered  : JUL 28, 2003
Completed By: ASKEW,DENEEN                  Date Completed: DEC 04, 2003
Released By : HEMBREE,SUSAN                 Date Released : DEC 08, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

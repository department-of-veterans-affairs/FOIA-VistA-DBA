
=============================================================================
Run Date: MAY 08, 2006                     Designation: MPIF*1*43
Package : MPIF - MASTER PATIENT INDEX VISTA   Priority: Mandatory
Version : 1        SEQ #41                      Status: Released
                  Compliance Date: JUN 08, 2006
=============================================================================

Associated patches: (v)MPIF*1*25   <<= must be installed BEFORE `MPIF*1*43'
                    (v)MPIF*1*28   <<= must be installed BEFORE `MPIF*1*43'
                    (v)MPIF*1*31   <<= must be installed BEFORE `MPIF*1*43'
                    (v)MPIF*1*33   <<= must be installed BEFORE `MPIF*1*43'
                    (v)MPIF*1*35   <<= must be installed BEFORE `MPIF*1*43'
                    (v)MPIF*1*37   <<= must be installed BEFORE `MPIF*1*43'
                    (v)MPIF*1*38   <<= must be installed BEFORE `MPIF*1*43'

Subject: ICN ASSIGNMENT CHANGE/REMOVE SINGLE PATIENT INITIALIZATION OPTION

Category: 
  - Routine
  - Enhancement (Mandatory)
  - Other

Description:
============

  NOTE: The software for this patch, MPIF*1*43, and associated patch
        RG*1*43 is not being distributed through the National Patch
        Module.  These patches are being distributed as a single KIDS
        software distribution (host file).  This patch contains the
        informational portion of MPIF*1*43.  Please refer to the
        'Software Retrieval' and 'Installation Instructions' sections
        of this patch description for the instructions on how to acquire
        and install the patch software.
   
  NOTE: RG* and MPIF* patches should NOT be installed on legacy
        systems to avoid issues with the legacy systems ending up as
        Coordinating Master of Records (CMORs) or Treating Facilities.
   
  MPIF*1.0*25, MPIF*1.0*28, MPIF*1.0*31, MPIF*1.0*33, MPIF*1.0*35,
  MPIF*1.0*37, and MPIF*1.0*38 are required builds for patch MPIF*1*43.
     
  Issue #1 - Change in ICN Assignment Process
  In order to support the effort to get Integration Control Numbers
  (ICNs) for all patients in the Health Eligibility Center (HEC)
  database, when and how a patient gets an ICN is changing.  If an
  exact match is not found on the Master Patient Index (MPI), then
  the patient will be added to the MPI.  The only time a patient will
  get a local ICN is when communication with the MPI is unavailable
  or temporarily while the national ICN is being created.  As a result
  of these changes, specific exceptions are no longer generated.  These
  include the following three exception types:
      - Required field(s) missing for patient sent to MPI
      - SSN Match Failed
      - Name Doesn't Match
  
  All existing active exceptions in the CIRN HL7 EXCEPTION LOG (#991.1)
  file that have any of the above three exception types and the 
  Potential Matches Returned exception type will be marked as PROCESSED
  by patch RG*1*43.
    
  A change has been made in the Display Only Query [MPIF DISPLAY ONLY
  QUERY TO MPI] option.  It will now return potential matches, even if
  the patient being queried for is already known on the MPI.
    
  A change has been made in the Remote Single Patient Initialization
  [MPI DATA MGT REMOTE SPI] option used by the Identity Management Data
  Quality (IMDQ) staff on the Austin MPI.  Previously, if the patient
  record being processed had a local ICN, the SPI process did not attempt
  to get a national ICN.  This has been modified so that the remote SPI
  process can now send a VistA patient with a local ICN up to the MPI
  for national ICN assignment.  Also, if the DFN passed is a merged
  record, it will find the primary record and use that DFN for the
  SPI query.  The merge information will be included in the response.
    
  Issue #2 - If a patient is presented to the MPI and there is not an exact
  match but there is a potential match, the patient will be added to the
  MPI and a Potential Matches Returned exception will occur on the local
  VistA site.  The user can use a new action, Potential Match Rev [PMR], to
  review the potential match exception in the MPI/PD Exception Handling
  option [RG EXCEPTION HANDLING]. This action is only available for
  Potential Matches Returned exceptions that are not marked as processed.
   
  The Potential Match Rev action will trigger a query to the MPI and
  present any potential matches to the user.  The user can resolve
  a duplicate on the MPI if one exists for the patient being processed.
  The Potential Match Review process gives the user the same capability
  as the Single Patient Initialization action did, except for the ability
  to add.  That is no longer needed as the patient has already been added
  to the MPI.  The user will not see the ICN currently assigned to their
  patient in the list of potential matches.  They will only see other 
  potential matches.  If there is not a match to be made, the user should
  quit and mark the exception as processed.  If they are not sure if there
  is a match or not, the exception should remain in a NOT PROCESSED
  status.  If the exception is marked as processed, it will be removed
  from the list of active exceptions.  If the user is presented with more
  than one match that is the same patient, the IMDQ team should be
  contacted to assist in the resolution of more than one duplicate on the
  MPI.  The user will only be able to match with one entry on the MPI.
  Since the patient has already been added to the MPI, there will not be a 
  local ICN for this patient as there has been in the past.  The only way 
  to know that there is a potential match to be reviewed, at this point, is
  this exception.
   
  New Protocols to support this:
   CMORs Data View  [MPIF POTENTIAL DUP (CMOR PDAT)]
   HELP  [MPIF POTENTIAL DUP (HELP)]
   MPI Data View  [MPIF POTENTIAL DUP (MPI PDAT)]
   Match With Existing Pt on List  [MPIF POTENTIAL DUP (SELECT PATIENT)]
   Actions for Potential Duplication screen  [MPIF POTENTIAL DUP MENU]
   
  New List Template to support this:  MPIF POTENTIAL DUP
   
  Issue #3 - Menu Structure Changes
  Since all patients now receive a national ICN unless the MPI is
  unavailable, the Single Patient Initialization [MPIF IND MPI LOAD]
  option and the SPI action within the MPI/PD Exception Handling
  [RG EXCEPTION HANDLING] option are no longer needed in VistA.
   
  Because these options are in different namespaces, they will be
  deleted in the following separate patches:
  Patch MPIF*1*43 will remove the Single Patient Initialization
  [MPIF IND MPI LOAD] option.
  Patch RG*1*43 will remove the SPI action within the MPI/PD
  Exception Handling [RG EXCEPTION HANDLING] option.
   
  The Single Patient Initialization to MPI [MPIF IND MPI LOAD] option
  is being removed from the Master Patient Index Menu [MPIF VISTA MENU].
  That change would have left only one item on the Master Patient Index
  Menu [MPIF VISTA MENU] structure.  Therefore, the remaining option,
  Display Only Query [MPIF DISPLAY ONLY QUERY TO MPI], is moved from the
  Master Patient Index Menu [MPIF VISTA MENU] to the Message Exception
  Menu [RG EXCEPTION MENU].  The Master Patient Index Menu [MPIF VISTA
  MENU] is then deleted, as it no longer has sub-menu options.
   
  MENU STRUCTURE BEFORE:
  CORD MPI/PD Patient Admin Coordinator Menu ... [RG ADMIN COORD MENU]
   MPI  Master Patient Index Menu ... [MPIF VISTA MENU]  <REMOVE
         Single Patient Initialization to MPI
              [MPIF IND MPI LOAD]  <REMOVE
         Display Only Query
              [MPIF DISPLAY ONLY QUERY TO MPI]  <<MOVE FROM HERE
   MSG  Message Exception Menu ... [RG EXCEPTION MENU]
         View Potential Match Patient [RG EXCEPTION POTENTIAL MATCH]
         MPI/PD Exception Handling [RG EXCEPTION HANDLING]
         Patient MPI/PD Data Inquiry [RG EXCEPTION TF INQUIRY]
         Remote Patient Data Query Menu ... [RG REMOTE PDAT MENU]
   
  MENU STRUCTURE AFTER:
  CORD MPI/PD Patient Admin Coordinator Menu ... [RG ADMIN COORD MENU]
   MSG  Message Exception Menu ... [RG EXCEPTION MENU]
         View Potential Match Patient [RG EXCEPTION POTENTIAL MATCH]
         MPI/PD Exception Handling [RG EXCEPTION HANDLING]
         Patient MPI/PD Data Inquiry [RG EXCEPTION TF INQUIRY]
         Remote Patient Data Query Menu ... [RG REMOTE PDAT MENU]
         Display Only Query
              [MPIF DISPLAY ONLY QUERY TO MPI]  <<MOVED TO HERE
     
  Issue #4 - Cross-Reference Clean Up
  An issue in routine MPIFRES was reported during site testing.  An
  undefined error occurred because of a cross-reference that should
  not have been present.  The ^DPT("AMPIMIS" cross-reference for a
  record was not properly deleted after a duplicate record merge process.
  The existence of the cross-reference caused the Local/Missing ICN
  Resolution Background Job [MPIF LOC/MIS ICN RES] to error.  A code
  change in MPIFRES will clean up the cross-reference if it exists
  for a merged record.
   
  Documentation Update:
  =====================
  The following previously released Master Patient Index/Patient
  Demographics (MPI/PD) VistA documents are available from the 
  ANONYMOUS.SOFTWARE directory.
   
    User Manual                    RG1_0_UM.PDF
    Exception Handling             RG1_0_EH.PDF
    Programmer Manual              RG1_0_PM.PDF
    Technical Manual               RG1_0_TM.PDF
   
  A new document with this release is titled: "Changes to National ICN
  Assignments and Resolving Potential Matches Returned Exceptions,
  Supplement to Patch Descriptions MPI*1*38, MPIF*1*43, and RG*1*43:"
   
                                   RG1_0_SPP43_38.PDF
   
  The preferred retrieval method is to FTP from the ANONYMOUS.SOFTWARE
  directory at: DOWNLOAD.VISTA.MED.VA.GOV.
   
  This transmits the file from the first available FTP server. Sites
  may also elect to retrieve software directly from one of the
  following servers:
   
    OI Field Office         FTP Address                  Directory
    ------------------------------------------------------------------
    Albany             ftp.fo-albany.med.va.gov     ANONYMOUS.SOFTWARE
    Hines              ftp.fo-hines.med.va.gov      ANONYMOUS.SOFTWARE
    Salt Lake City     ftp.fo-slc.med.va.gov        ANONYMOUS.SOFTWARE
   
  Note:  These files must be transferred in binary or IMAGE, not
         ASCII, mode.  The VistA Documentation Library (VDL) contains
         all end-user manuals.
   
  This documentation can also be downloaded from the VistA Documentation
  Library (VDL) Web site listed below.  On the VDL, the documents are
  available in two formats, Adobe Acrobat (PDF) and Microsoft Word (DOC).
   
    http://www.va.gov/vdl/Infrastructure.asp?appID=16
   
  Test Sites:
  ===========
  Bay Pines, FL
  Eastern Colorado HCS
  Manchester, NH
     
  Routine Summary:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
   
  <TAB>;;1.0; MASTER PATIENT INDEX VISTA ;**[Patch List]**;30 Apr 99
   
  Using old logic - CHECK^XTSUMBLD results:
  -----------------------------------------
  Routine       Before Patch       After Patch       Patch List
  --------      ------------       ------------      ----------
  MPIF002          6171097            8690656        20,27,33,43
  MPIFA24B         3269573            3566314        22,28,31,25,43
  MPIFAPI          8167509            7469264        1,3,14,16,17,21,27,
                                                     28,33,35,37,43
  MPIFBT2         20379145           21186224        1,3,10,17,21,31,43
  MPIFBT3         16375512            9758315        1,3,10,17,21,24,28,
                                                     31,33,35,43
  MPIFD1             N/A             18056105        43
  MPIFDUP            N/A             18537189        43
  MPIFP43            N/A               722354        43
  MPIFQ0          21421169           21454333        1,3,8,14,13,16,17,
                                                     21,20,24,26,28,31,
                                                     33,35,38,43
  MPIFQ3           9905395           10945522        28,43
  MPIFRES          5679691            7671130        1,7,10,15,17,21,26,
                                                     28,33,35,43
  MPIFRPC2         5436926            9037932        20,24,33,43
  MPIFSA2         20823700           20900133        28,29,35,38,43
  MPIFSA3         17047641           17072124        28,31,35,43
    
  Note: Routine MPIFP43 is deleted by the installation.
   
  Using new logic - CHECK1^XTSUMBLD results:
  ------------------------------------------
  Routine       Before Patch       After Patch       Patch List
  --------      ------------       ------------      ----------
  MPIF002         21350253           28350773        20,27,33,43
  MPIFA24B         6739707            7230667        22,28,31,25,43
  MPIFAPI         31852226           28137088        1,3,14,16,17,21,27,
                                                     28,33,35,37,43
  MPIFBT2         48374458           50661186        1,3,10,17,21,31,43
  MPIFBT3         39361685           22745391        1,3,10,17,21,24,28,
                                                     31,33,35,43
  MPIFD1             N/A             49972281        43
  MPIFDUP            N/A             52696250        43
  MPIFP43            N/A               958116        43
  MPIFQ0          66211325           70311672        1,3,8,14,13,16,17,
                                                     21,20,24,26,28,31,
                                                     33,35,38,43
  MPIFQ3          16977860           19268712        28,43
  MPIFRES         18642902           21931451        1,7,10,15,17,21,26,
                                                     28,33,35,43
  MPIFRPC2        11239382           20174050        20,24,33,43
  MPIFSA2         51929844           53121126        28,29,35,38,43
  MPIFSA3         25608882           25833370        28,31,35,43
     
  Note: Routine MPIFP43 is deleted by the installation.
   
  Post-Install Routine MPIFP43:
  =============================
  The "AICNL" cross-reference is on the LOCALLY ASSIGNED ICN (#991.04)
  field in the PATIENT (#2) file.  Post-init routine, MPIFP43, resets
  the "AICNL" cross-reference to null.  The existing methodology
  prevented the resending of local ICNs to the MPI in the Local/Missing
  ICN Resolution [MPIF LOC/MIS ICN RES] job.  This change will allow all
  of the existing local ICNs to be sent to the MPI for enumeration.
   
  Post-Install Routine RGP43PST:
  ==============================
  Some exceptions in the CIRN HL7 EXCEPTION LOG (#991.1) file will be
  marked as processed by post-init routine RGP43PST.  The following
  existing active exception types will be retired.
      - Required field(s) missing for patient sent to MPI
      - SSN Match Failed
      - Name Doesn't Match
      - Potential Matches Returned
  A patient that in the past would have generated one of these
  exceptions, will now receive a national ICN as a result of the
  Master Patient Index - Health Eligibility Center (HEC) Enumeration
  project.
     
  Software Retrieval:
  ===================
  The software for this patch is not being distributed through the
  National Patch Module.  The patch is being distributed as a host file.
  The host file contains the following two KIDS builds:
   
             Host file name: MPIF_1_P43.KID
  
                     Builds: MPIF*1.0*43
                             RG*1.0*43
  
  Sites may retrieve the software directly using FTP from the
  ANONYMOUS.SOFTWARE directory at the following OI Field Offices:
  
                       Albany: ftp.fo-albany.med.va.gov
                        Hines: ftp.fo-hines.med.va.gov
               Salt Lake City: ftp.fo-slc.med.va.gov
       First Available Server: download.vista.med.va.gov
  
 Select the following file:
  
     File Name          Description
     ---------          -----------
     MPIF_1_P43.KID     Host file containing KIDS software distribution
  
  Note:  Use ASCII mode when transferring the .KID file.
   
  Installation Instructions:
  ==========================
  This patch takes less than 5 minutes to install.  This patch should
  be loaded during non-peak hours to minimize disruption to the users.
   
  1.  Users are allowed on the system during patch installation.
   
  2.  TaskMan does not need to be stopped or placed in a wait state.
     
  3.  These routines are not usually mapped, so you will not have to
      disable mapping.
   
  4.  Download the KIDS file, MPIF_1_P43.KID from the
      ANONYMOUS.SOFTWARE directory at the Albany, Hines, or Salt
      Lake CIOFO to the appropriate directory on your system.
   
  5.  From the Kernel Installation and Distribution System Menu, select
      the Installation menu.
   
  6.  Use the Load a Distribution option on the KIDS Installation
      menu, and enter:  the directory onto which you have 
      downloaded the host file, immediately followed by MPIF_1_P43.KID.
   
  7.  From the Installation menu, you may elect to use the following
      options.  At the 'Select INSTALL NAME' prompt, enter MPIF*1.0*43.
      (a)  Backup a Transport Global.
      (b)  Compare Transport Global to Current System.
      (c)  Verify Checksums in Transport Global.
      (d)  Print Transport Global.
   
  8.  Use the Install Package(s) option.
      At the 'Select INSTALL NAME' prompt, enter MPIF*1.0*43.
   
  9.  When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
      Install? YES//' respond YES for both patches.
   
  10. When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//',
      respond NO.
   
  11. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? YES//', respond YES.  The following OPTIONS should be
      disabled during the installation.
   
      Single Patient Initialization to MPI    [MPIF IND MPI LOAD]
      NOTE: If you install the patch more than once,  ^  the above
      option will no longer be on your system, as it is being deleted.
      Display Only Query              [MPIF DISPLAY ONLY QUERY TO MPI]
      Local/Missing ICN Resolution Background Job [MPIF LOC/MIS ICN RES]
      MPI/PD Exception Handling       [RG EXCEPTION HANDLING]
        
      Register a Patient              [DG REGISTER PATIENT]
      Load/Edit Patient Data          [DG LOAD PATIENT DATA]
      Electronic 10-10EZ Processing   [EAS EZ 1010EZ PROCESSING]
   
  12. If you unmapped routines in step 3, remap them after installation
      has completed.
   
  13. The MPIFP43 and RGP43PST routines are automatically deleted from
      your system after successful installation of the patch.
   
  The MPI HEC Enumeration Process (After Installation):
  =====================================================
  In order to support the Health Eligibility Center (HEC) migration to
  the Administrative Data Repository (ADR), each record in the HEC must
  have a national Integration Control Number (ICN). To accomplish this,
  the Master Patient Index (MPI) development team and the HEC development
  /support staff have identified these patients by DFN at the respective
  site.  They have created a new global on the MPI in Austin that contains
  this data.  There are approximately 1.6 million records (across all
  facilities) that must be enumerated.
   
  After you have installed the MPIF*1*43 and RG*1*43 patches, you will
  be contacted to establish a timeframe for enumeration of the identified
  records.  This is a remote process that takes place from the MPI to your
  facility and generates an ICN for each of the identified records.  As
  additional messaging is involved, this will be coordinated with each
  facility to ensure adequate disk space is available for the extra HL
  messages and journal space for the HL7 globals.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: MPIF002
    Before: B21350253  After: B26919791  **20,27,33,43**
Routine Name: MPIFA24B
    Before:  B6739707  After:  B7230667  **22,28,31,25,43**
Routine Name: MPIFAPI
    Before: B31852226  After: B28137088  **1,3,14,16,17,21,27,28,33,35,37,43**
Routine Name: MPIFBT2
    Before: B48374458  After: B50661186  **1,3,10,17,21,31,43**
Routine Name: MPIFBT3
    Before: B39361685  After: B22745391  **1,3,10,17,21,24,28,31,33,35,43**
Routine Name: MPIFD1
    Before:       n/a  After: B47503592  **43**
Routine Name: MPIFDUP
    Before:       n/a  After: B27969993  **43**
Routine Name: MPIFP43
    Before:       n/a  After:   B958116  **43**
Routine Name: MPIFQ0
    Before: B66211325  After: B69367805  **1,3,8,14,13,16,17,21,20,24,
                                          26,28,31,33,35,38,43**
Routine Name: MPIFQ3
    Before: B16977860  After: B18652216  **28,43**
Routine Name: MPIFRES
    Before: B18642902  After: B20988611  **1,7,10,15,17,21,26,28,33,35,43**
Routine Name: MPIFRPC2
    Before: B11239382  After: B20174050  **20,24,33,43**
Routine Name: MPIFSA2
    Before: B51929844  After: B53121126  **28,29,35,38,43**
Routine Name: MPIFSA3

=============================================================================
User Information:
Entered By  : CHESNEY,CHRISTINE M           Date Entered  : OCT 12, 2005
Completed By: ALDERMAN,MATT S               Date Completed: MAY 04, 2006
Released By : FITCH,DONNA                   Date Released : MAY 08, 2006
=============================================================================


Packman Mail Message:
=====================

No routines included

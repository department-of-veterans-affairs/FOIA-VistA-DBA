Released QAC*2*21 SEQ #20
Extracted from mail message
**KIDS**:QAC*2.0*21^

**INSTALL NAME**
QAC*2.0*21
"BLD",6285,0)
QAC*2.0*21^PATIENT REPRESENTATIVE^0^3071002^y
"BLD",6285,1,0)
^^164^164^3071002^
"BLD",6285,1,1,0)
Associated patches: (v)QAC*2*19    <<= must be installed BEFORE 
"BLD",6285,1,2,0)
`QAC*2*21'
"BLD",6285,1,3,0)
                    
"BLD",6285,1,4,0)
Subject:  Employee Lookup Bugs in PATS
"BLD",6285,1,5,0)
 
"BLD",6285,1,6,0)
Category:  ROUTINE
"BLD",6285,1,7,0)
 
"BLD",6285,1,8,0)
Description:
"BLD",6285,1,9,0)
===========
"BLD",6285,1,10,0)
The Patient Advocate Tracking System (PATS) has two remote procedure calls
"BLD",6285,1,11,0)
(RPC) that return data from the NEW PERSON file. The RPC names are QACV
"BLD",6285,1,12,0)
KEY HOLDERS VLH and QACV PERSON LOOKUP VLH. Both RPCs execute the same
"BLD",6285,1,13,0)
code in routine QACVEMPX. The RPCs return NAME, TITLE and MAIL CODE for
"BLD",6285,1,14,0)
selected employees.
"BLD",6285,1,15,0)
 
"BLD",6285,1,16,0)
Problem #1
"BLD",6285,1,17,0)
----------
"BLD",6285,1,18,0)
Currently, if the TITLE or MAIL CODE contain an ampersand character (&), 
"BLD",6285,1,19,0)
the PATS java code interprets this as a reserved xml character and fails.
"BLD",6285,1,20,0)
This is experienced in 4 places in PATS.
"BLD",6285,1,21,0)
 
"BLD",6285,1,22,0)
1. Adding a New Report of Contact (ROC), Cover Sheet tab, the system
"BLD",6285,1,23,0)
should display a drop-down list of Information Takers. Without the patch,
"BLD",6285,1,24,0)
the drop-down list of Info Takers is not present.
"BLD",6285,1,25,0)
 
"BLD",6285,1,26,0)
2. Edit a ROC, search by Information Taker option, should display a 
"BLD",6285,1,27,0)
drop-down list of Information Takers. Without the patch, the drop-down
"BLD",6285,1,28,0)
list of Info Takers is not present.
"BLD",6285,1,29,0)
 
"BLD",6285,1,30,0)
3. Edit a ROC, Resolution tab, adding a new Issue Code, when user tries to
"BLD",6285,1,31,0)
look up an Employee Involved. Without the patch, the users receive the 
"BLD",6285,1,32,0)
error: "A problem was encountered while attempting to communicate with 
"BLD",6285,1,33,0)
VistA. This problem appears to be related with VistALink. Try again. If
"BLD",6285,1,34,0)
this problem persists contact the support desk for further assistance."
"BLD",6285,1,35,0)
 
"BLD",6285,1,36,0)
4. Edit a ROC, Notification tab, when user tries to look up an Employee 
"BLD",6285,1,37,0)
to send a notification. Without the patch, the users receive the 
"BLD",6285,1,38,0)
error: "A problem was encountered while attempting to communicate with 
"BLD",6285,1,39,0)
VistA. This problem appears to be related with VistALink. Try again. If
"BLD",6285,1,40,0)
this problem persists contact the support desk for further assistance."
"BLD",6285,1,41,0)
 
"BLD",6285,1,42,0)
The fix is to use the Kernel routine $$SYMENC^MXMLUTL in routine QACVEMPX
"BLD",6285,1,43,0)
to replace reserved xml symbols in the TITLE and MAIL CODE output with
"BLD",6285,1,44,0)
their coded values.
"BLD",6285,1,45,0)
 
"BLD",6285,1,46,0)
Problem #2
"BLD",6285,1,47,0)
----------
"BLD",6285,1,48,0)
The NEW PERSON file may contain last names standardized under an old 
"BLD",6285,1,49,0)
format that removed all punctuation except for hyphens, and last names 
"BLD",6285,1,50,0)
standardized under a newer format that also leaves spaces and apostrophes 
"BLD",6285,1,51,0)
in the last name. Thus you may find names like O'BRIEN as well as OBRIEN.
"BLD",6285,1,52,0)
 
"BLD",6285,1,53,0)
When a user enters O'Brien as a lookup value, PATS was only using the old 
"BLD",6285,1,54,0)
name standardization, so was only finding matches to the last name 
"BLD",6285,1,55,0)
OBRIEN, but was not finding O'BRIEN.
"BLD",6285,1,56,0)
 
"BLD",6285,1,57,0)
This occurs in two different places in PATS.
"BLD",6285,1,58,0)
 
"BLD",6285,1,59,0)
1. Edit a ROC, Resolution tab, adding a new Issue Code, when user tries to
"BLD",6285,1,60,0)
look up an Employee Involved.
"BLD",6285,1,61,0)
 
"BLD",6285,1,62,0)
2. Edit a ROC, Notification tab, when user tries to look up an Employee 
"BLD",6285,1,63,0)
to send a notification.
"BLD",6285,1,64,0)
 
"BLD",6285,1,65,0)
After the patch is installed, if a user enters a last name containing
"BLD",6285,1,66,0)
either an apostrophe or a space, PATS will look for matches to the name
"BLD",6285,1,67,0)
both with and without the apostrophe or space. Thus, if a user enters
"BLD",6285,1,68,0)
O'Brien, PATS will find names matching both O'BRIEN and OBRIEN, if there
"BLD",6285,1,69,0)
are any.
"BLD",6285,1,70,0)
 
"BLD",6285,1,71,0)
ASSOCIATED NOIS:
"BLD",6285,1,72,0)
 ===============
"BLD",6285,1,73,0)
 Remedy: HD0000000200638
"BLD",6285,1,74,0)
 Remedy: HD0000000202881
"BLD",6285,1,75,0)
 Remedy: HD0000000204329
"BLD",6285,1,76,0)
 Remedy: HD0000000207038
"BLD",6285,1,77,0)
 Remedy: HD0000000207041
"BLD",6285,1,78,0)
  
"BLD",6285,1,79,0)
 ASSOCIATED E3R:
"BLD",6285,1,80,0)
 ==============
"BLD",6285,1,81,0)
 n/a
"BLD",6285,1,82,0)
  
"BLD",6285,1,83,0)
 TEST SITES:
"BLD",6285,1,84,0)
 ===========
"BLD",6285,1,85,0)
PORTLAND (OR) VAMC  -  648
"BLD",6285,1,86,0)
PHOENIX VAMC        -  644
"BLD",6285,1,87,0)
LONG BEACH,CA VAMC  -  600
"BLD",6285,1,88,0)
CHEYENNE VAMC       -  442
"BLD",6285,1,89,0)
UPSTATE NEW YORK HCS-  528
"BLD",6285,1,90,0)
CENTRAL TEXAS HCS   -  674
"BLD",6285,1,91,0)
 
"BLD",6285,1,92,0)
  
"BLD",6285,1,93,0)
 INSTALLATION INSTRUCTIONS:
"BLD",6285,1,94,0)
 ==========================
"BLD",6285,1,95,0)
 >>> Users may remain on the system
"BLD",6285,1,96,0)
 >>> TaskMan does NOT need to be stopped
"BLD",6285,1,97,0)
 >>> Time to install patch is less than 2 minutes
"BLD",6285,1,98,0)
 
"BLD",6285,1,99,0)
 1. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
"BLD",6285,1,100,0)
option will load the KIDS package onto your system.
"BLD",6285,1,101,0)
 
"BLD",6285,1,102,0)
 2. The patch has now been loaded into a Transport global on your system. 
"BLD",6285,1,103,0)
From the KIDS menu, you can use the following options:
"BLD",6285,1,104,0)
 
"BLD",6285,1,105,0)
        Verify Checksums in Transport Global (optional)
"BLD",6285,1,106,0)
        Print Transport Global (optional)
"BLD",6285,1,107,0)
        Compare Transport Global to Current System (optional)
"BLD",6285,1,108,0)
        Backup a Transport Global (optional)
"BLD",6285,1,109,0)
 
"BLD",6285,1,110,0)
 5. From the KIDS menu, under the 'Installation' menu, use the following
"BLD",6285,1,111,0)
option to install the patch:
"BLD",6285,1,112,0)
 
"BLD",6285,1,113,0)
  Install Package(s) QAC*2.0*21
"BLD",6285,1,114,0)
  .
"BLD",6285,1,115,0)
  .
"BLD",6285,1,116,0)
  .
"BLD",6285,1,117,0)
  Want KIDS to INHIBIT LOGONs during the install? YES// NO
"BLD",6285,1,118,0)
 
"BLD",6285,1,119,0)
  Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
"BLD",6285,1,120,0)
 
"BLD",6285,1,121,0)
 
"BLD",6285,1,122,0)
DOCUMENTATION:
"BLD",6285,1,123,0)
================= 
"BLD",6285,1,124,0)
Documents for the PATS system can be obtained by using FTP from the
"BLD",6285,1,125,0)
appropriate Customer Service directory:
"BLD",6285,1,126,0)
  
"BLD",6285,1,127,0)
    OI FIELD OFFICE    FTP ADDRESS    DIRECTORY
"BLD",6285,1,128,0)
    ===============    ===========    ==================
"BLD",6285,1,129,0)
                       download.vista.med.va.gov
"BLD",6285,1,130,0)
    Albany                            ftp.fo-albany.med.va.gov
"BLD",6285,1,131,0)
    Hines                             ftp.fo-hines.med.va.gov 
"BLD",6285,1,132,0)
    Salt Lake City                    ftp.fo-slc.med.va.gov
"BLD",6285,1,133,0)
  
"BLD",6285,1,134,0)
 Document can also be downloaded from the VistA Documentation Library
"BLD",6285,1,135,0)
(VDL) Web page:
"BLD",6285,1,136,0)
  
"BLD",6285,1,137,0)
    <http://www.va.gov/vdl/section.asp?secid=4>
"BLD",6285,1,138,0)
 
"BLD",6285,1,139,0)
 
"BLD",6285,1,140,0)
 ROUTINE SUMMARY - CHECK^XTSUMBLD results
"BLD",6285,1,141,0)
 ========================================
"BLD",6285,1,142,0)
 The second line of the routines will look like:
"BLD",6285,1,143,0)
  
"BLD",6285,1,144,0)
 ;;2.0;Patient Representative;**19,21**;07/25/1995
"BLD",6285,1,145,0)
  
"BLD",6285,1,146,0)
 Routine Name    Before Patch    After Patch     Patch list
"BLD",6285,1,147,0)
 ==========      =========       ========        =======
"BLD",6285,1,148,0)
 QACVEMPX        6135557         9113636         **19,21**
"BLD",6285,1,149,0)
 
"BLD",6285,1,150,0)
 
"BLD",6285,1,151,0)
Routine Information:
"BLD",6285,1,152,0)
====================
"BLD",6285,1,153,0)
 
"BLD",6285,1,154,0)
 
"BLD",6285,1,155,0)
The second line of each of these routines now looks like:
"BLD",6285,1,156,0)
 ;;2.0;Patient Representative;**[Patch List]**;07/25/1995;Build 4
"BLD",6285,1,157,0)
 
"BLD",6285,1,158,0)
The checksums below are new checksums, and
"BLD",6285,1,159,0)
 can be checked with CHECK1^XTSUMBLD.
"BLD",6285,1,160,0)
 
"BLD",6285,1,161,0)
Routine Name: QACVEMPX
"BLD",6285,1,162,0)
    Before: B18632980   After: B39562803  **19,21**
"BLD",6285,1,163,0)
 
"BLD",6285,1,164,0)
Routine list of preceding patches: 19
"BLD",6285,4,0)
^9.64PA^^
"BLD",6285,6.3)
5
"BLD",6285,"KRN",0)
^9.67PA^8989.52^19
"BLD",6285,"KRN",.4,0)
.4
"BLD",6285,"KRN",.401,0)
.401
"BLD",6285,"KRN",.402,0)
.402
"BLD",6285,"KRN",.403,0)
.403
"BLD",6285,"KRN",.5,0)
.5
"BLD",6285,"KRN",.84,0)
.84
"BLD",6285,"KRN",3.6,0)
3.6
"BLD",6285,"KRN",3.8,0)
3.8
"BLD",6285,"KRN",9.2,0)
9.2
"BLD",6285,"KRN",9.8,0)
9.8
"BLD",6285,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6285,"KRN",9.8,"NM",1,0)
QACVEMPX^^0^B39562803
"BLD",6285,"KRN",9.8,"NM","B","QACVEMPX",1)

"BLD",6285,"KRN",19,0)
19
"BLD",6285,"KRN",19.1,0)
19.1
"BLD",6285,"KRN",101,0)
101
"BLD",6285,"KRN",409.61,0)
409.61
"BLD",6285,"KRN",771,0)
771
"BLD",6285,"KRN",870,0)
870
"BLD",6285,"KRN",8989.51,0)
8989.51
"BLD",6285,"KRN",8989.52,0)
8989.52
"BLD",6285,"KRN",8994,0)
8994
"BLD",6285,"KRN","B",.4,.4)

"BLD",6285,"KRN","B",.401,.401)

"BLD",6285,"KRN","B",.402,.402)

"BLD",6285,"KRN","B",.403,.403)

"BLD",6285,"KRN","B",.5,.5)

"BLD",6285,"KRN","B",.84,.84)

"BLD",6285,"KRN","B",3.6,3.6)

"BLD",6285,"KRN","B",3.8,3.8)

"BLD",6285,"KRN","B",9.2,9.2)

"BLD",6285,"KRN","B",9.8,9.8)

"BLD",6285,"KRN","B",19,19)

"BLD",6285,"KRN","B",19.1,19.1)

"BLD",6285,"KRN","B",101,101)

"BLD",6285,"KRN","B",409.61,409.61)

"BLD",6285,"KRN","B",771,771)

"BLD",6285,"KRN","B",870,870)

"BLD",6285,"KRN","B",8989.51,8989.51)

"BLD",6285,"KRN","B",8989.52,8989.52)

"BLD",6285,"KRN","B",8994,8994)

"BLD",6285,"QUES",0)
^9.62^^
"BLD",6285,"REQB",0)
^9.611^1^1
"BLD",6285,"REQB",1,0)
QAC*2.0*19^1
"BLD",6285,"REQB","B","QAC*2.0*19",1)

"MBREQ")
0
"PKG",378,-1)
1^1
"PKG",378,0)
PATIENT REPRESENTATIVE^QAC^PATIENT REPRESENTATIVE PACKAGE
"PKG",378,22,0)
^9.49I^1^1
"PKG",378,22,1,0)
2.0^2950725^2951208
"PKG",378,22,1,"PAH",1,0)
21^3071002
"PKG",378,22,1,"PAH",1,1,0)
^^164^164^3071002
"PKG",378,22,1,"PAH",1,1,1,0)
Associated patches: (v)QAC*2*19    <<= must be installed BEFORE 
"PKG",378,22,1,"PAH",1,1,2,0)
`QAC*2*21'
"PKG",378,22,1,"PAH",1,1,3,0)
                    
"PKG",378,22,1,"PAH",1,1,4,0)
Subject:  Employee Lookup Bugs in PATS
"PKG",378,22,1,"PAH",1,1,5,0)
 
"PKG",378,22,1,"PAH",1,1,6,0)
Category:  ROUTINE
"PKG",378,22,1,"PAH",1,1,7,0)
 
"PKG",378,22,1,"PAH",1,1,8,0)
Description:
"PKG",378,22,1,"PAH",1,1,9,0)
===========
"PKG",378,22,1,"PAH",1,1,10,0)
The Patient Advocate Tracking System (PATS) has two remote procedure calls
"PKG",378,22,1,"PAH",1,1,11,0)
(RPC) that return data from the NEW PERSON file. The RPC names are QACV
"PKG",378,22,1,"PAH",1,1,12,0)
KEY HOLDERS VLH and QACV PERSON LOOKUP VLH. Both RPCs execute the same
"PKG",378,22,1,"PAH",1,1,13,0)
code in routine QACVEMPX. The RPCs return NAME, TITLE and MAIL CODE for
"PKG",378,22,1,"PAH",1,1,14,0)
selected employees.
"PKG",378,22,1,"PAH",1,1,15,0)
 
"PKG",378,22,1,"PAH",1,1,16,0)
Problem #1
"PKG",378,22,1,"PAH",1,1,17,0)
----------
"PKG",378,22,1,"PAH",1,1,18,0)
Currently, if the TITLE or MAIL CODE contain an ampersand character (&), 
"PKG",378,22,1,"PAH",1,1,19,0)
the PATS java code interprets this as a reserved xml character and fails.
"PKG",378,22,1,"PAH",1,1,20,0)
This is experienced in 4 places in PATS.
"PKG",378,22,1,"PAH",1,1,21,0)
 
"PKG",378,22,1,"PAH",1,1,22,0)
1. Adding a New Report of Contact (ROC), Cover Sheet tab, the system
"PKG",378,22,1,"PAH",1,1,23,0)
should display a drop-down list of Information Takers. Without the patch,
"PKG",378,22,1,"PAH",1,1,24,0)
the drop-down list of Info Takers is not present.
"PKG",378,22,1,"PAH",1,1,25,0)
 
"PKG",378,22,1,"PAH",1,1,26,0)
2. Edit a ROC, search by Information Taker option, should display a 
"PKG",378,22,1,"PAH",1,1,27,0)
drop-down list of Information Takers. Without the patch, the drop-down
"PKG",378,22,1,"PAH",1,1,28,0)
list of Info Takers is not present.
"PKG",378,22,1,"PAH",1,1,29,0)
 
"PKG",378,22,1,"PAH",1,1,30,0)
3. Edit a ROC, Resolution tab, adding a new Issue Code, when user tries to
"PKG",378,22,1,"PAH",1,1,31,0)
look up an Employee Involved. Without the patch, the users receive the 
"PKG",378,22,1,"PAH",1,1,32,0)
error: "A problem was encountered while attempting to communicate with 
"PKG",378,22,1,"PAH",1,1,33,0)
VistA. This problem appears to be related with VistALink. Try again. If
"PKG",378,22,1,"PAH",1,1,34,0)
this problem persists contact the support desk for further assistance."
"PKG",378,22,1,"PAH",1,1,35,0)
 
"PKG",378,22,1,"PAH",1,1,36,0)
4. Edit a ROC, Notification tab, when user tries to look up an Employee 
"PKG",378,22,1,"PAH",1,1,37,0)
to send a notification. Without the patch, the users receive the 
"PKG",378,22,1,"PAH",1,1,38,0)
error: "A problem was encountered while attempting to communicate with 
"PKG",378,22,1,"PAH",1,1,39,0)
VistA. This problem appears to be related with VistALink. Try again. If
"PKG",378,22,1,"PAH",1,1,40,0)
this problem persists contact the support desk for further assistance."
"PKG",378,22,1,"PAH",1,1,41,0)
 
"PKG",378,22,1,"PAH",1,1,42,0)
The fix is to use the Kernel routine $$SYMENC^MXMLUTL in routine QACVEMPX
"PKG",378,22,1,"PAH",1,1,43,0)
to replace reserved xml symbols in the TITLE and MAIL CODE output with
"PKG",378,22,1,"PAH",1,1,44,0)
their coded values.
"PKG",378,22,1,"PAH",1,1,45,0)
 
"PKG",378,22,1,"PAH",1,1,46,0)
Problem #2
"PKG",378,22,1,"PAH",1,1,47,0)
----------
"PKG",378,22,1,"PAH",1,1,48,0)
The NEW PERSON file may contain last names standardized under an old 
"PKG",378,22,1,"PAH",1,1,49,0)
format that removed all punctuation except for hyphens, and last names 
"PKG",378,22,1,"PAH",1,1,50,0)
standardized under a newer format that also leaves spaces and apostrophes 
"PKG",378,22,1,"PAH",1,1,51,0)
in the last name. Thus you may find names like O'BRIEN as well as OBRIEN.
"PKG",378,22,1,"PAH",1,1,52,0)
 
"PKG",378,22,1,"PAH",1,1,53,0)
When a user enters O'Brien as a lookup value, PATS was only using the old 
"PKG",378,22,1,"PAH",1,1,54,0)
name standardization, so was only finding matches to the last name 
"PKG",378,22,1,"PAH",1,1,55,0)
OBRIEN, but was not finding O'BRIEN.
"PKG",378,22,1,"PAH",1,1,56,0)
 
"PKG",378,22,1,"PAH",1,1,57,0)
This occurs in two different places in PATS.
"PKG",378,22,1,"PAH",1,1,58,0)
 
"PKG",378,22,1,"PAH",1,1,59,0)
1. Edit a ROC, Resolution tab, adding a new Issue Code, when user tries to
"PKG",378,22,1,"PAH",1,1,60,0)
look up an Employee Involved.
"PKG",378,22,1,"PAH",1,1,61,0)
 
"PKG",378,22,1,"PAH",1,1,62,0)
2. Edit a ROC, Notification tab, when user tries to look up an Employee 
"PKG",378,22,1,"PAH",1,1,63,0)
to send a notification.
"PKG",378,22,1,"PAH",1,1,64,0)
 
"PKG",378,22,1,"PAH",1,1,65,0)
After the patch is installed, if a user enters a last name containing
"PKG",378,22,1,"PAH",1,1,66,0)
either an apostrophe or a space, PATS will look for matches to the name
"PKG",378,22,1,"PAH",1,1,67,0)
both with and without the apostrophe or space. Thus, if a user enters
"PKG",378,22,1,"PAH",1,1,68,0)
O'Brien, PATS will find names matching both O'BRIEN and OBRIEN, if there
"PKG",378,22,1,"PAH",1,1,69,0)
are any.
"PKG",378,22,1,"PAH",1,1,70,0)
 
"PKG",378,22,1,"PAH",1,1,71,0)
ASSOCIATED NOIS:
"PKG",378,22,1,"PAH",1,1,72,0)
 ===============
"PKG",378,22,1,"PAH",1,1,73,0)
 Remedy: HD0000000200638
"PKG",378,22,1,"PAH",1,1,74,0)
 Remedy: HD0000000202881
"PKG",378,22,1,"PAH",1,1,75,0)
 Remedy: HD0000000204329
"PKG",378,22,1,"PAH",1,1,76,0)
 Remedy: HD0000000207038
"PKG",378,22,1,"PAH",1,1,77,0)
 Remedy: HD0000000207041
"PKG",378,22,1,"PAH",1,1,78,0)
  
"PKG",378,22,1,"PAH",1,1,79,0)
 ASSOCIATED E3R:
"PKG",378,22,1,"PAH",1,1,80,0)
 ==============
"PKG",378,22,1,"PAH",1,1,81,0)
 n/a
"PKG",378,22,1,"PAH",1,1,82,0)
  
"PKG",378,22,1,"PAH",1,1,83,0)
 TEST SITES:
"PKG",378,22,1,"PAH",1,1,84,0)
 ===========
"PKG",378,22,1,"PAH",1,1,85,0)
PORTLAND (OR) VAMC  -  648
"PKG",378,22,1,"PAH",1,1,86,0)
PHOENIX VAMC        -  644
"PKG",378,22,1,"PAH",1,1,87,0)
LONG BEACH,CA VAMC  -  600
"PKG",378,22,1,"PAH",1,1,88,0)
CHEYENNE VAMC       -  442
"PKG",378,22,1,"PAH",1,1,89,0)
UPSTATE NEW YORK HCS-  528
"PKG",378,22,1,"PAH",1,1,90,0)
CENTRAL TEXAS HCS   -  674
"PKG",378,22,1,"PAH",1,1,91,0)
 
"PKG",378,22,1,"PAH",1,1,92,0)
  
"PKG",378,22,1,"PAH",1,1,93,0)
 INSTALLATION INSTRUCTIONS:
"PKG",378,22,1,"PAH",1,1,94,0)
 ==========================
"PKG",378,22,1,"PAH",1,1,95,0)
 >>> Users may remain on the system
"PKG",378,22,1,"PAH",1,1,96,0)
 >>> TaskMan does NOT need to be stopped
"PKG",378,22,1,"PAH",1,1,97,0)
 >>> Time to install patch is less than 2 minutes
"PKG",378,22,1,"PAH",1,1,98,0)
 
"PKG",378,22,1,"PAH",1,1,99,0)
 1. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
"PKG",378,22,1,"PAH",1,1,100,0)
option will load the KIDS package onto your system.
"PKG",378,22,1,"PAH",1,1,101,0)
 
"PKG",378,22,1,"PAH",1,1,102,0)
 2. The patch has now been loaded into a Transport global on your system. 
"PKG",378,22,1,"PAH",1,1,103,0)
From the KIDS menu, you can use the following options:
"PKG",378,22,1,"PAH",1,1,104,0)
 
"PKG",378,22,1,"PAH",1,1,105,0)
        Verify Checksums in Transport Global (optional)
"PKG",378,22,1,"PAH",1,1,106,0)
        Print Transport Global (optional)
"PKG",378,22,1,"PAH",1,1,107,0)
        Compare Transport Global to Current System (optional)
"PKG",378,22,1,"PAH",1,1,108,0)
        Backup a Transport Global (optional)
"PKG",378,22,1,"PAH",1,1,109,0)
 
"PKG",378,22,1,"PAH",1,1,110,0)
 5. From the KIDS menu, under the 'Installation' menu, use the following
"PKG",378,22,1,"PAH",1,1,111,0)
option to install the patch:
"PKG",378,22,1,"PAH",1,1,112,0)
 
"PKG",378,22,1,"PAH",1,1,113,0)
  Install Package(s) QAC*2.0*21
"PKG",378,22,1,"PAH",1,1,114,0)
  .
"PKG",378,22,1,"PAH",1,1,115,0)
  .
"PKG",378,22,1,"PAH",1,1,116,0)
  .
"PKG",378,22,1,"PAH",1,1,117,0)
  Want KIDS to INHIBIT LOGONs during the install? YES// NO
"PKG",378,22,1,"PAH",1,1,118,0)
 
"PKG",378,22,1,"PAH",1,1,119,0)
  Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
"PKG",378,22,1,"PAH",1,1,120,0)
 
"PKG",378,22,1,"PAH",1,1,121,0)
 
"PKG",378,22,1,"PAH",1,1,122,0)
DOCUMENTATION:
"PKG",378,22,1,"PAH",1,1,123,0)
================= 
"PKG",378,22,1,"PAH",1,1,124,0)
Documents for the PATS system can be obtained by using FTP from the
"PKG",378,22,1,"PAH",1,1,125,0)
appropriate Customer Service directory:
"PKG",378,22,1,"PAH",1,1,126,0)
  
"PKG",378,22,1,"PAH",1,1,127,0)
    OI FIELD OFFICE    FTP ADDRESS    DIRECTORY
"PKG",378,22,1,"PAH",1,1,128,0)
    ===============    ===========    ==================
"PKG",378,22,1,"PAH",1,1,129,0)
                       download.vista.med.va.gov
"PKG",378,22,1,"PAH",1,1,130,0)
    Albany                            ftp.fo-albany.med.va.gov
"PKG",378,22,1,"PAH",1,1,131,0)
    Hines                             ftp.fo-hines.med.va.gov 
"PKG",378,22,1,"PAH",1,1,132,0)
    Salt Lake City                    ftp.fo-slc.med.va.gov
"PKG",378,22,1,"PAH",1,1,133,0)
  
"PKG",378,22,1,"PAH",1,1,134,0)
 Document can also be downloaded from the VistA Documentation Library
"PKG",378,22,1,"PAH",1,1,135,0)
(VDL) Web page:
"PKG",378,22,1,"PAH",1,1,136,0)
  
"PKG",378,22,1,"PAH",1,1,137,0)
    <http://www.va.gov/vdl/section.asp?secid=4>
"PKG",378,22,1,"PAH",1,1,138,0)
 
"PKG",378,22,1,"PAH",1,1,139,0)
 
"PKG",378,22,1,"PAH",1,1,140,0)
 ROUTINE SUMMARY - CHECK^XTSUMBLD results
"PKG",378,22,1,"PAH",1,1,141,0)
 ========================================
"PKG",378,22,1,"PAH",1,1,142,0)
 The second line of the routines will look like:
"PKG",378,22,1,"PAH",1,1,143,0)
  
"PKG",378,22,1,"PAH",1,1,144,0)
 ;;2.0;Patient Representative;**19,21**;07/25/1995
"PKG",378,22,1,"PAH",1,1,145,0)
  
"PKG",378,22,1,"PAH",1,1,146,0)
 Routine Name    Before Patch    After Patch     Patch list
"PKG",378,22,1,"PAH",1,1,147,0)
 ==========      =========       ========        =======
"PKG",378,22,1,"PAH",1,1,148,0)
 QACVEMPX        6135557         9113636         **19,21**
"PKG",378,22,1,"PAH",1,1,149,0)
 
"PKG",378,22,1,"PAH",1,1,150,0)
 
"PKG",378,22,1,"PAH",1,1,151,0)
Routine Information:
"PKG",378,22,1,"PAH",1,1,152,0)
====================
"PKG",378,22,1,"PAH",1,1,153,0)
 
"PKG",378,22,1,"PAH",1,1,154,0)
 
"PKG",378,22,1,"PAH",1,1,155,0)
The second line of each of these routines now looks like:
"PKG",378,22,1,"PAH",1,1,156,0)
 ;;2.0;Patient Representative;**[Patch List]**;07/25/1995;Build 4
"PKG",378,22,1,"PAH",1,1,157,0)
 
"PKG",378,22,1,"PAH",1,1,158,0)
The checksums below are new checksums, and
"PKG",378,22,1,"PAH",1,1,159,0)
 can be checked with CHECK1^XTSUMBLD.
"PKG",378,22,1,"PAH",1,1,160,0)
 
"PKG",378,22,1,"PAH",1,1,161,0)
Routine Name: QACVEMPX
"PKG",378,22,1,"PAH",1,1,162,0)
    Before: B18632980   After: B39562803  **19,21**
"PKG",378,22,1,"PAH",1,1,163,0)
 
"PKG",378,22,1,"PAH",1,1,164,0)
Routine list of preceding patches: 19
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","QACVEMPX")
0^1^B39562803^B18632980
"RTN","QACVEMPX",1,0)
QACVEMPX ; OAKOIFO/TKW - Return Person Data, called by RPC ;9/25/07  14:14
"RTN","QACVEMPX",2,0)
 ;;2.0;Patient Representative;**19,21**;07/25/1995;Build 5
"RTN","QACVEMPX",3,0)
EN(PATSBY,LKUPVAL,PATSROWS,PATSFRM0,PATSFRM1)        ; Lookup Employee by Name, then
"RTN","QACVEMPX",4,0)
 ; Output XML formatted data from NEW PERSON file.
"RTN","QACVEMPX",5,0)
 ; PATSBY contains the name of the output array (pass by reference)
"RTN","QACVEMPX",6,0)
 ; LKUPVAL is the name of the person to be matched (LAST,FIRST), or
"RTN","QACVEMPX",7,0)
 ;         an array of Security Keys.
"RTN","QACVEMPX",8,0)
 ; PATSROWS=Number of rows to return in each call
"RTN","QACVEMPX",9,0)
 ; PATSFRM0=Employee Name value from previous call (empty on first call, pass by ref)
"RTN","QACVEMPX",10,0)
 ; PATSFRM1=Employee IEN from previous call (empty on first call, pass by ref)
"RTN","QACVEMPX",11,0)
 K ^TMP("DILIST",$J),^TMP("PatsPersonXml",$J)
"RTN","QACVEMPX",12,0)
 N STDNAME,ULASTNM,NAMECOMP,IENS,PIECE,OUTCNT,TAGLIST,FROM,PART,SRVIEN,MAILCODE,TITLE,SRVRSTA,PATSMORE,PATSERR,DIERR,I,J,X,Y
"RTN","QACVEMPX",13,0)
 ; If LKUPVAL exists, it contains an employee name, find partial matches.
"RTN","QACVEMPX",14,0)
 I $G(LKUPVAL)]"" D
"RTN","QACVEMPX",15,0)
 . S ULASTNM=$P(LKUPVAL,",")
"RTN","QACVEMPX",16,0)
 . D LOOKUP1
"RTN","QACVEMPX",17,0)
 . I (ULASTNM[" ")!(ULASTNM["'") D LOOKUP2
"RTN","QACVEMPX",18,0)
 . Q
"RTN","QACVEMPX",19,0)
 ; Else, it contains an array of Security Key values, find all
"RTN","QACVEMPX",20,0)
 ; holders of those keys.
"RTN","QACVEMPX",21,0)
 I $G(LKUPVAL)="" D
"RTN","QACVEMPX",22,0)
 . D EN^QACVKHLD(.LKUPVAL,PATSROWS,.PATSFRM0,.PATSFRM1)
"RTN","QACVEMPX",23,0)
 . S FROM(1)=$G(PATSFRM0),FROM(2)=$G(PATSFRM1)
"RTN","QACVEMPX",24,0)
 . S PATSMORE=$S(FROM(1)="":0,1:1)
"RTN","QACVEMPX",25,0)
 . Q
"RTN","QACVEMPX",26,0)
 I '$D(^TMP("DILIST",$J)),'$D(^TMP("DIERR",$J)) Q
"RTN","QACVEMPX",27,0)
 S PATSERR="" I $D(^TMP("DIERR",$J)) S PATSERR=$G(^TMP("DIERR",$J,1,"TEXT",1))
"RTN","QACVEMPX",28,0)
 ; Get Station Number of Institution where server resides (IA #1518)
"RTN","QACVEMPX",29,0)
 S SRVRSTA=$$STA^XUAF4(+$$GET1^DIQ(8989.3,1,217,"I"))
"RTN","QACVEMPX",30,0)
 ; Set name of output array into output parameter.
"RTN","QACVEMPX",31,0)
 S PATSBY=$NA(^TMP("PatsPersonXml",$J))
"RTN","QACVEMPX",32,0)
 ; Now build the output.
"RTN","QACVEMPX",33,0)
 D HDR
"RTN","QACVEMPX",34,0)
 S OUTCNT=2
"RTN","QACVEMPX",35,0)
 D EN2(.OUTCNT),FOOTER(.OUTCNT)
"RTN","QACVEMPX",36,0)
 Q
"RTN","QACVEMPX",37,0)
 ;
"RTN","QACVEMPX",38,0)
 ;
"RTN","QACVEMPX",39,0)
LOOKUP1 ; Use current routine to standardize the name (IA #3065)
"RTN","QACVEMPX",40,0)
 ; (name may contain spaces or apostrophes).
"RTN","QACVEMPX",41,0)
 S STDNAME=LKUPVAL
"RTN","QACVEMPX",42,0)
 I '$G(PATSROWS) S PATSROWS=10
"RTN","QACVEMPX",43,0)
 S PATSMORE=0
"RTN","QACVEMPX",44,0)
 I STDNAME["," S STDNAME=$$FORMAT^XLFNAME7(.STDNAME,1,35,,,,,1)
"RTN","QACVEMPX",45,0)
 E  S STDNAME=$$FORMAT^XLFNAME7(.STDNAME,1,35,,0,,1,1)
"RTN","QACVEMPX",46,0)
 ; If we've already found all matches to current standard, get out.
"RTN","QACVEMPX",47,0)
 N QOUT S QOUT=0
"RTN","QACVEMPX",48,0)
 I (ULASTNM[" ")!(ULASTNM["'") D  Q:QOUT
"RTN","QACVEMPX",49,0)
 . S X=$P($G(PATSFRM0),",")
"RTN","QACVEMPX",50,0)
 . Q:X=""
"RTN","QACVEMPX",51,0)
 . I (X[" ")!(X["'") Q
"RTN","QACVEMPX",52,0)
 . S QOUT=1 Q
"RTN","QACVEMPX",53,0)
 ; Get list of matching names.
"RTN","QACVEMPX",54,0)
 D GETLIST(STDNAME,PATSROWS,.PATSFRM0,.PATSFRM1,.PATSMORE,.FROM)
"RTN","QACVEMPX",55,0)
 Q
"RTN","QACVEMPX",56,0)
LOOKUP2 ; Use old routine to standardize the name (no punctuation
"RTN","QACVEMPX",57,0)
 ; except hyphens).)
"RTN","QACVEMPX",58,0)
 ; Quit if the maximum number of names has been found.
"RTN","QACVEMPX",59,0)
 Q:PATSMORE
"RTN","QACVEMPX",60,0)
 ; Convert user input using old standardization routine
"RTN","QACVEMPX",61,0)
 S STDNAME=LKUPVAL
"RTN","QACVEMPX",62,0)
 D STDNAME^XLFNAME(.STDNAME,"FG")
"RTN","QACVEMPX",63,0)
 ; Find enough names to fill the list
"RTN","QACVEMPX",64,0)
 N NEWROWS
"RTN","QACVEMPX",65,0)
 S NEWROWS=PATSROWS-$P($G(^TMP("DILIST",$J,0)),"^")
"RTN","QACVEMPX",66,0)
 ; If list is already full, see whether there are more names
"RTN","QACVEMPX",67,0)
 ; using the old standardization, then quit.
"RTN","QACVEMPX",68,0)
 I NEWROWS'>0 D  Q
"RTN","QACVEMPX",69,0)
 . I $D(^VA(200,"B",STDNAME)) S NEWROWS=1
"RTN","QACVEMPX",70,0)
 . E  S X=$O(^VA(200,"B",STDNAME)) I $E(X,1,$L(STDNAME))=STDNAME S NEWROWS=1
"RTN","QACVEMPX",71,0)
 . I NEWROWS=1 S PATSMORE=1,FROM(1)=STDNAME,FROM(2)=""
"RTN","QACVEMPX",72,0)
 . Q
"RTN","QACVEMPX",73,0)
 ; Save off names found using current name standardization.
"RTN","QACVEMPX",74,0)
 K ^TMP("QACOLD",$J)
"RTN","QACVEMPX",75,0)
 I $D(^TMP("DILIST",$J)) D
"RTN","QACVEMPX",76,0)
 . M ^TMP("QACOLD",$J)=^TMP("DILIST",$J)
"RTN","QACVEMPX",77,0)
 . K ^TMP("QACOLD",$J,0) Q
"RTN","QACVEMPX",78,0)
 K ^TMP("DILIST",$J)
"RTN","QACVEMPX",79,0)
 ; Get new list of matching names.
"RTN","QACVEMPX",80,0)
 D GETLIST(STDNAME,NEWROWS,.PATSFRM0,.PATSFRM1,.PATSMORE,.FROM)
"RTN","QACVEMPX",81,0)
 ; Merge the two lists into ^TMP("DILIST",$J).
"RTN","QACVEMPX",82,0)
 S I=$O(^TMP("QACOLD",$J,PATSROWS+1),-1)
"RTN","QACVEMPX",83,0)
 I I D
"RTN","QACVEMPX",84,0)
 . S X=$P($G(^TMP("DILIST",$J,0)),"^")
"RTN","QACVEMPX",85,0)
 . I X F J=1:1:X I $D(^TMP("DILIST",$J,J,0)) S ^TMP("QACOLD",$J,(I+J),0)=^TMP("DILIST",$J,J,0) K ^TMP("DILIST",$J,J,0)
"RTN","QACVEMPX",86,0)
 . M ^TMP("DILIST",$J)=^TMP("QACOLD",$J)
"RTN","QACVEMPX",87,0)
 . S $P(^TMP("DILIST",$J,0),"^")=X+I
"RTN","QACVEMPX",88,0)
 . K ^TMP("QACOLD",$J)
"RTN","QACVEMPX",89,0)
 . Q
"RTN","QACVEMPX",90,0)
 Q 
"RTN","QACVEMPX",91,0)
GETLIST(STDNAME,PATSROWS,PATSFRM0,PATSFRM1,PATSMORE,FROM) ; Get a list of names matching STDNAME
"RTN","QACVEMPX",92,0)
 N FIRST,LAST,LEN,SCR,CURRDT
"RTN","QACVEMPX",93,0)
 S LAST=$P(STDNAME,","),FIRST=$P(STDNAME,",",2,99)
"RTN","QACVEMPX",94,0)
 S CURRDT=$$DT^XLFDT()
"RTN","QACVEMPX",95,0)
 ; Screen out terminated users.
"RTN","QACVEMPX",96,0)
 S SCR="I ($P(^(0),""^"",11)=""""!(CURRDT<$P(^(0),""^"",11)))"
"RTN","QACVEMPX",97,0)
 ; If first name was passed, check for it with a screen.
"RTN","QACVEMPX",98,0)
 S LEN=$L(FIRST) I LEN>0 S SCR=SCR_",$E($P($P(^(0),""^""),"","",2,99),1,"_LEN_")="_""""_FIRST_""""
"RTN","QACVEMPX",99,0)
 ; Set the starting values, and partial match values.
"RTN","QACVEMPX",100,0)
 I $G(PATSFRM0)="" S FROM(1)=LAST,FROM(2)=""
"RTN","QACVEMPX",101,0)
 E  S FROM(1)=PATSFRM0,FROM(2)=$G(PATSFRM1)
"RTN","QACVEMPX",102,0)
 S PART(1)=LAST
"RTN","QACVEMPX",103,0)
 ; Return list of standard name pointer, title and mail code (IA #10060)
"RTN","QACVEMPX",104,0)
 D LIST^DIC(200,,"@;8;28","MP",PATSROWS,.FROM,.PART,"B",SCR)
"RTN","QACVEMPX",105,0)
 ; Set flag telling whether there are more entries to fetch).
"RTN","QACVEMPX",106,0)
 S PATSMORE=$S(FROM(1)="":0,1:1)
"RTN","QACVEMPX",107,0)
 Q
"RTN","QACVEMPX",108,0)
 ;
"RTN","QACVEMPX",109,0)
HDR ; Build header node
"RTN","QACVEMPX",110,0)
 S ^TMP("PatsPersonXml",$J,1)="<?xml version=""1.0"" encoding=""utf-8""?>"
"RTN","QACVEMPX",111,0)
 S ^TMP("PatsPersonXml",$J,2)="<PersonDataSet hasMore="""_PATSMORE_""" patsFrom0="""_FROM(1)_""" patsFrom1="""_FROM(2)_""" vistAError="""_PATSERR_""">"
"RTN","QACVEMPX",112,0)
 Q
"RTN","QACVEMPX",113,0)
 ;
"RTN","QACVEMPX",114,0)
EN2(OUTCNT) ; Build output for individual persons.
"RTN","QACVEMPX",115,0)
 N TAGLIST,IENS,TITLE,MAILCODE,NAMECOMP,I,J,X,Y
"RTN","QACVEMPX",116,0)
 ; Build list of XML tags to use in output.
"RTN","QACVEMPX",117,0)
 D BLDLST(.TAGLIST)
"RTN","QACVEMPX",118,0)
 ; Read through lister results and build output
"RTN","QACVEMPX",119,0)
 F I=0:0 S I=$O(^TMP("DILIST",$J,I)) Q:'I  S X=$G(^(I,0)) D
"RTN","QACVEMPX",120,0)
 . S OUTCNT=OUTCNT+1
"RTN","QACVEMPX",121,0)
 . S ^TMP("PatsPersonXml",$J,OUTCNT)="<PatsPerson>"
"RTN","QACVEMPX",122,0)
 . S IENS=$P(X,"^") Q:IENS=""  S IENS=IENS_","
"RTN","QACVEMPX",123,0)
 . ; NOTE: removes reserved XML characters (see $$SYMENC^MXMLUTL, IA#4153)
"RTN","QACVEMPX",124,0)
 . S TITLE=$$SYMENC^MXMLUTL($E($P(X,"^",2),1,30))
"RTN","QACVEMPX",125,0)
 . S MAILCODE=$$SYMENC^MXMLUTL($E($P(X,"^",3),1,30))
"RTN","QACVEMPX",126,0)
 . ; Get the individual name components and add them to the output (IA #3065)
"RTN","QACVEMPX",127,0)
 . K NAMECOMP
"RTN","QACVEMPX",128,0)
 . S NAMECOMP=$P($G(^VA(200,+IENS,0)),"^")
"RTN","QACVEMPX",129,0)
 . ; If name contains apostrophes or spaces, use current standardization
"RTN","QACVEMPX",130,0)
 . I ($P(NAMECOMP,",")["'")!($P(NAMECOMP,",")[" ") D
"RTN","QACVEMPX",131,0)
 .. S NAMECOMP=$$FORMAT^XLFNAME7(.NAMECOMP,1,35,,,,,2)
"RTN","QACVEMPX",132,0)
 .. S NAMECOMP=NAMECOMP("FAMILY")_"^"_NAMECOMP("GIVEN")_"^"_NAMECOMP("MIDDLE")_"^"_NAMECOMP("SUFFIX")
"RTN","QACVEMPX",133,0)
 .. Q
"RTN","QACVEMPX",134,0)
 . ; Else, use old standardization routine.
"RTN","QACVEMPX",135,0)
 . E  D
"RTN","QACVEMPX",136,0)
 .. K NAMECOMP S NAMECOMP("FILE")=200,NAMECOMP("FIELD")=.01,NAMECOMP("IENS")=IENS
"RTN","QACVEMPX",137,0)
 .. S NAMECOMP=$$HLNAME^XLFNAME(.NAMECOMP,"S")
"RTN","QACVEMPX",138,0)
 . F J=1:1:6 D
"RTN","QACVEMPX",139,0)
 .. S OUTCNT=OUTCNT+1
"RTN","QACVEMPX",140,0)
 .. S Y=$P(NAMECOMP,"^",J)
"RTN","QACVEMPX",141,0)
 .. S ^TMP("PatsPersonXml",$J,OUTCNT)="<"_TAGLIST(J)_">"_Y_"</"_TAGLIST(J)_">"
"RTN","QACVEMPX",142,0)
 .. Q
"RTN","QACVEMPX",143,0)
 . S OUTCNT=OUTCNT+1
"RTN","QACVEMPX",144,0)
 . S ^TMP("PatsPersonXml",$J,OUTCNT)="<Title>"_TITLE_"</Title>"
"RTN","QACVEMPX",145,0)
 . S OUTCNT=OUTCNT+1
"RTN","QACVEMPX",146,0)
 . S ^TMP("PatsPersonXml",$J,OUTCNT)="<MailCode>"_MAILCODE_"</MailCode>"
"RTN","QACVEMPX",147,0)
 . S OUTCNT=OUTCNT+1
"RTN","QACVEMPX",148,0)
 . S ^TMP("PatsPersonXml",$J,OUTCNT)="<VistaIen>"_$P(X,"^")_"</VistaIen>"
"RTN","QACVEMPX",149,0)
 . S OUTCNT=OUTCNT+1
"RTN","QACVEMPX",150,0)
 . S ^TMP("PatsPersonXml",$J,OUTCNT)="</PatsPerson>"
"RTN","QACVEMPX",151,0)
 . Q
"RTN","QACVEMPX",152,0)
 Q
"RTN","QACVEMPX",153,0)
 ;
"RTN","QACVEMPX",154,0)
FOOTER(OUTCNT) ; Add the footer
"RTN","QACVEMPX",155,0)
 S ^TMP("PatsPersonXml",$J,OUTCNT+1)="</PersonDataSet>"
"RTN","QACVEMPX",156,0)
 K ^TMP("DILIST",$J)
"RTN","QACVEMPX",157,0)
 Q
"RTN","QACVEMPX",158,0)
 ;
"RTN","QACVEMPX",159,0)
CONV(NAMEPART) ; Convert a name part to mixed case
"RTN","QACVEMPX",160,0)
 N LEN,TEMP,UPPER,I,X
"RTN","QACVEMPX",161,0)
 S LEN=$L(NAMEPART),UPPER=1,TEMP=""
"RTN","QACVEMPX",162,0)
 F I=1:1:LEN S X=$E(NAMEPART,I,I) D
"RTN","QACVEMPX",163,0)
 . I UPPER=1 D
"RTN","QACVEMPX",164,0)
 .. I X?1L S X=$C($A(X)-32)
"RTN","QACVEMPX",165,0)
 .. S UPPER=0 Q
"RTN","QACVEMPX",166,0)
 . E  I X?1U S X=$C($A(X)+32)
"RTN","QACVEMPX",167,0)
 . S TEMP=TEMP_X
"RTN","QACVEMPX",168,0)
 . I X'?1L,X'?1U S UPPER=1
"RTN","QACVEMPX",169,0)
 . Q
"RTN","QACVEMPX",170,0)
 Q TEMP
"RTN","QACVEMPX",171,0)
 ;
"RTN","QACVEMPX",172,0)
BLDLST(TAGLIST) ; Build list of XML data tags
"RTN","QACVEMPX",173,0)
 S TAGLIST(1)="LastName"
"RTN","QACVEMPX",174,0)
 S TAGLIST(2)="FirstName"
"RTN","QACVEMPX",175,0)
 S TAGLIST(3)="MiddleName"
"RTN","QACVEMPX",176,0)
 S TAGLIST(4)="NameSuffix"
"RTN","QACVEMPX",177,0)
 S TAGLIST(5)="NamePrefix"
"RTN","QACVEMPX",178,0)
 S TAGLIST(6)="Degree"
"RTN","QACVEMPX",179,0)
 Q
"RTN","QACVEMPX",180,0)
 ;
"VER")
8.0^22.0
"BLD",6285,6)
^20
**END**
**END**

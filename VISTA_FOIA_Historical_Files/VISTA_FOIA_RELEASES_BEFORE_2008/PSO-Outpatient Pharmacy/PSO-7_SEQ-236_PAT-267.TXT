$TXT Created by VARGAS,ALBERTO at DMSCACHE.ISC-BIRM.MED.VA.GOV  (KIDS) on Wednesday, 05/16/07 at 13:14
=============================================================================
Run Date: JUL 05, 2007                     Designation: PSO*7*267
Package : PSO - OUTPATIENT PHARMACY           Priority: Mandatory
Version : 7       SEQ #236                      Status: Released
                  Compliance Date: AUG 05, 2007
=============================================================================

Associated patches: (v)PSO*7*213   <<= must be installed BEFORE `PSO*7*267'
                    (v)PSO*7*229   <<= must be installed BEFORE `PSO*7*267'
                    (v)PSO*7*245   <<= must be installed BEFORE `PSO*7*267'
                    (v)PSO*7*252   <<= must be installed BEFORE `PSO*7*267'
                    (v)PSO*7*254   <<= must be installed BEFORE `PSO*7*267'

Subject: ENCAPSULATION FOLLOW-UP

Category: 
  - Routine
  - Enhancement (Mandatory)

Description:
============

 This patch enhances the functionality of PSODI, PSO59, and PSO52EX.
  
 PSODI contains a new Application Programmer Interface (API) named GET1.
 This API will invoke the $$GET1^DIQ FileMan Database Server (DBS) call and
 is to be used as an extrinsic function.  GET1 has five parameters:
  
    PSOFILE: FILE OR SUBFILE NUMBER TO RETRIEVE DATA FROM [REQUIRED]
    PSOIEN: IEN TO RETRIEVE DATA FROM [REQUIRED] 
    PSOFIELD: FIELD TO RETRIEVE DATA FROM [REQUIRED] 
    PSOFLAGS: CONTROLS THE PROCESSING OF DATA RETURNED [OPTIONAL] 
    PSOWORD: RETURN OF WORD PROCESSING FIELDS [REQUIRED only with word 
    processing fields]
  
 If a file access error is encountered, the calling application will have
 "0^FILE ACCESS ERROR" returned.  If a FileMan error has occurred, the
 calling application will have "0^FILEMAN UNABLE TO PROCESS REQUEST"
 returned.  A successful data retrieval will return in the format "1^(FIELD
 DATA)".  When retrieving data from a word processing field, an array name
 must be passed in to PSOWORD.  Once the word processing field is returned,
 it will then populate an array as defined by PSOWORD and the calling
 application will have "1^(PSOWORD)" returned.  If there is no data in the
 Word Processing field, the calling application will have "1^" returned,
 and the array defined by PSOWORD will be empty.
  
 Please see the VA FileMan Programmer Manual V. 22.0 for $$GET1^DIQ input
 definitions and DBIA 4858 for further description.
  
 PSO59 retrieves data from the OUTPATIENT SITE file (#59) and has three
 parameters: PSOIEN (optional), PSOTXT (optional), and LIST (required).  
 While PSOIEN and PSOTXT are both labeled as optional, PSO59 requires that 
 either parameter be passed in or no data will be returned.  PSOIEN is the 
 internal entry number (IEN) of a site, PSOTXT is a free text entry that 
 works as a search parameter, and LIST is the subscript name used in the 
 ^TMP global. The new functionality, added to the PSS component, now allows
 the user to pass in "??" to retrieve all divisions in the file and
 subscripts them accordingly.  If both an IEN and "??" are passed in, PSO59
 will ignore the "??" and return data specific to the IEN.
  
 Please refer to DBIA 4827 for further description on PSO59.
  
 PSO52EX contains a new Application Programmer Interface (API) named 
 ARXREF.  This API is to be used as an extrinsic function and indicates if
 the RELEASED DATE/TIME, IEN, and FILL NUMBER from the PRESCRIPTION file
 (#52) exists in the "AR  cross-reference. The "AR  cross-reference in the
 format of ^PSRX("AR ,RELEASED DATE/TIME,IEN,FILL NUMBER) will be used
 where: RELEASE DATE/TIME is either RELEASED DATE/TIME field (#31) for an
 Original Fill or RELEASED DATE/TIME field (#17) for a refill, IEN is the
 Internal Entry Number from the PRESCRIPTION file (#52), and FILL NUMBER is
 0 for Original Fill, 1 for Refill 1, 2 for Refill 2, etc.
  
    0 (zero) = Data does not exist in the "AR" cross reference, indicating
    the fill was not dispensed from the Consolidated Mail Outpatient
    Pharmacy (CMOP).
  
    1 (one) = Data does exist in the "AR" cross reference, indicating the
    fill was dispensed from the CMOP.
  
 Please refer to DBIA 4902 for further description on PSO52EX.
  
   Associated Remedy Tickets:                                      
   ==========================
   N/A
     
   Associated E3Rs:
   ================
   N/A
     
   Test Sites:
   ===========
   Louisville, KY
   Oklahoma City, OK
   Puget Sound HCS, WA
                                                             
   Installation Instructions:
   ==========================
   This patch exports a routine that is a supported reference, so any other
   Vista application can make a call to this routine. For that reason, it
   is recommended that this patch be installed when Vista activity is at a
   minimum.
    
   Installation of this patch should take no longer than 5 minutes. 
     
   1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
     
   2. From the Kernel Installation & Distribution System menu, select the
      Installation menu.
     
   3. From this menu, you may select to use the following options:
      (when prompted for INSTALL NAME, enter PSO*7.0*267)
     
       a. Backup a Transport Global - this option will create a backup
          message of any routines exported with the patch. It will NOT
          backup any other changes such as DDs or templates.
     
       b. Compare Transport Global to Current System - this option will
          allow you to view all changes that will be made when the patch
          is installed. It compares all components of the patch (routines,
          DDs, templates, etc.).
     
       c. Verify Checksums in Transport Global - this option will ensure
          the integrity of the routines that are in the transport global.
    
   4. Use the Install Package(s) option and select the package PSO*7.0*267.
     
   5. When prompted "Want KIDS to INHIBIT LOGONs during the install? YES//"
      respond NO.
     
   6. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? YES//" respond NO. 
     
   7. When prompted "Device: Home//" respond with the correct device and 
      DO NOT queue this to P-Message.
    
   Documentation Retrieval:
   ========================
   Sites may retrieve documentation in one of the following ways:
    
   (1) The preferred method is to FTP the files from
   download.vista.med.va.gov, which will transmit the files from the first
   available FTP server.
    
   (2) Sites may also elect to retrieve documentation directly
   from a specific server as follows:
    Albany          ftp.fo-albany.med.va.gov
    Hines           ftp.fo-hines.med.va.gov
    Salt Lake City  ftp.fo-slc.med.va.gov
    
   The documentation includes:
   
    FILE NAME                        DESCRIPTION
    PHAR_1_API_R0607.PDF             Pharmacy Re-Engineering API Manual
  
   Once released, documentation may be retrieved from VISTA Documentation
   Library (VDL) on the Internet at the following address, 
   http://www.va.gov/vdl
    
   Routine Summary:
   ================
   The second line now reads as follows:
    
      <TAB>;;7.0;OUTPATIENT PHARMACY;**[patch list]**;DECEMBER 1997
    
   CHECK^XTSUMBLD results:
    
   Routine     Before Patch     After Patch        Patch List
   ==========================================================
   PSO52EX      4364622          4591102              252,267
   PSO59        2707806          5161924      213,229,254,267
   PSODI        2177339          3646164              245,267

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSO52EX
    Before: B11974692   After: B13165848  **252,267**
Routine Name: PSO59
    Before:  B3468336   After:  B8608274  **213,229,254,267**
Routine Name: PSODI
    Before:  B5060362   After: B10666961  **245,267**
 
Routine list of preceding patches: 245, 252, 254

=============================================================================
User Information:
Entered By  : VARGAS,ALBERTO                Date Entered  : MAR 07, 2007
Completed By: IYER,ARTI                     Date Completed: JUL 03, 2007
Released By : TEAGUE,LYN                    Date Released : JUL 05, 2007
=============================================================================


Packman Mail Message:
=====================

$END TXT

$TXT Created by ORMSBY,SKIP at FM22-PATCH.FO-OAKLAND.MED.VA.GOV  (KIDS) on Tuesday, 01/24/06 at 10:05
=============================================================================
Run Date: MAR 06, 2006                     Designation: DI*22*146
Package : DI - VA FILEMAN                     Priority: Mandatory
Version : 22       SEQ #129                     Status: Released
                  Compliance Date: APR 06, 2006
=============================================================================

Associated patches: (v)DI*22*41    <<= must be installed BEFORE `DI*22*146'
                    (v)DI*22*95    <<= must be installed BEFORE `DI*22*146'

Subject: Re-setting 3rd Piece After Re-indexing

Category: 
  - Routine

Description:
============

 ** Notice: See "Installation Instructions" section for Installation
            Warning **
  
 This patch corrects the following issues:
 1.  FileMan stores the last record number added and the number of entries 
 that the file contains on the file/sub-file header node.  The 
 file/sub-file header node is located at:
  
  GlobalRoot of the File/Sub-file_"0)"
  The last recorded number added is the 3rd "^" piece
  The number of entries is the 4th "^" piece.
  
   When a request is made of FileMan to index all the records within a 
 file/sub-file FileMan has always re-set the 3rd and 4th piece of the 
 file/sub-file to the last record found and the number of entries that 
 were found.  So if for example the order of records numbers that were 
 entered was: 1, 2, 3, 1000, 8, 5
 before re-indexing the 3rd and 4th piece of would look like: ^5^6
 but after re-indexing the 3rd and 4th piece would now look like: ^1000^6
  
 After installing this patch, when a file/sub-file is re-indexed the 3rd 
 piece will no longer be re-set.
  Routines DIK1 & DIKC
  
 2.  When a field is Audited and that field has an Output transform 
 that depends on certain FileMan variables to be preserved and error can 
 occur when the Output transform is executed for the Audit data.
  Routine DIK1
  
 Documentation Changes
 =====================
  -None-
  
 Blood Bank Clearance
 ====================
 Clearance - Jan 04, 2006
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch DI*22*146 contains 
 changes to a package referenced in VHA OI SEPG SOP 192-023 Review of 
 VISTA Patches for Effects on VISTA Blood Bank Software. This patch does 
 not alter or modify any VistA Blood Bank software design safeguards or 
 safety critical elements functions.
  
 RISK ANALYSIS: Changes made by patch DI*22*146 have no effect on Blood 
 Bank software functionality, therefore RISK is none.
  
 Remedy Tickets
 ==============
  Primary: 122373
  Duplicates: 122398; 122620; 122796; 123119; 123817; 123835; 124952; 
              125930; 123101; 127245
  
 Thanks to Test Site 
 ====================
 CLARKSBURG, WV           
 VA GREATER LOS ANGELES HCS  
 WILKES BARRE, PA         
  
 Routine Summary: 
 ================
  See the "Routine Information" section for details.  The "B" in front of 
 the checksum denotes that the value was derived by using CHECK1^XTSUMBLD.
  
 *Note: Routine: DIENVWRN issues a warning during the installation of 
 this patch if it appears that TaskMan is still running and/or logons have
 not been inhibited.  Routine DIENVWRN should already exist on your 
 system. It is listed in the routine section as a courtesy to the installer
 because it is listed when doing the "CHECK1^XTSUMBLD" and selecting the
 "Build" option.
  
 Installation Instructions:
 =========================
 ** Although queuing of this patch is allowed, it is HIGHLY recommended 
 that ALL Users be off the system and VISTA Background jobs be STOPPED 
 before this patch is installed. Failure to do so may result in 'source 
 routine edited' errors during a database update. Edits may be lost and 
 records may be left in an inconsistent state. An error that occurs before 
 a cross-reference is executed, for example, may lead to corrupted data or 
 hard errors in the future. **
  
 The following installation instructions are based upon the premise that 
 the installer has heeded the above warning.
  
 Installation should take less than a minute.
  
      1.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
 option will load the KIDS package onto your system.
  
      2.  The patch has now been loaded into a transport global on your 
 system. You now need to use KIDS to install the transport global.
  
      3.  On the KIDS menu, under the 'Installation' menu, use the 
 following options:
  
            Print Transport Global
            Compare Transport Global to Current System
            Verify Checksums in Transport Global
            Backup a Transport Global
  
      4.  In accordance with the warning at the beginning of the 
 installation instructions, make sure ALL interactive processes, and ALL 
 non-interactive background jobs are stopped following your site specific 
 procedures.  NOT performing this step could result in 'source routine
 edited' errors during database updates, and records may be left in an
 inconsistent state.
  
      5.  On the KIDS menu, under the 'Installation' menu, use the 
 following option:
  
            Select Installation Option: Install Package(s)
            Select INSTALL NAME: DI*22.0*146
                                 ===========
  
 The Environment Check Routine DIENVWRN runs automatically during this
 step. DIENVWRN issues a warning if it appears that TaskMan is still 
 running or logons have not been inhibited.
  
            Answer 'YES' to 'Want KIDS to INHIBIT LOGONs during the 
 install?'
            Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu 
 Options, and Protocols?
  
      6.  Reenable all processes stopped in step 4 above.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: DIENVWRN
    Before:  B3680036  After:  B3680036  
Routine Name: DIK1
    Before: B12892614  After: B12914189  **1,10,41,146**
Routine Name: DIKC
    Before: B61623191  After: B61603904  **1,22,11,68,95,146**

=============================================================================
User Information:
Entered By  : ORMSBY,SKIP                   Date Entered  : DEC 14, 2005
Completed By: SINGH,GURBIR                  Date Completed: MAR 03, 2006
Released By : HARROD,PAUL                   Date Released : MAR 06, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

Released OR*3*171 SEQ #156
Extracted from mail message
**KIDS**:OR*3.0*171^

**INSTALL NAME**
OR*3.0*171
"BLD",4142,0)
OR*3.0*171^ORDER ENTRY/RESULTS REPORTING^0^3030123^y
"BLD",4142,1,0)
^^2^2^3030114^
"BLD",4142,1,1,0)
The description of this build is found in the National Patch Module under 
"BLD",4142,1,2,0)
patch OR*3.0*171.
"BLD",4142,4,0)
^9.64PA^^
"BLD",4142,"KRN",0)
^9.67PA^8989.52^19
"BLD",4142,"KRN",.4,0)
.4
"BLD",4142,"KRN",.401,0)
.401
"BLD",4142,"KRN",.402,0)
.402
"BLD",4142,"KRN",.403,0)
.403
"BLD",4142,"KRN",.5,0)
.5
"BLD",4142,"KRN",.84,0)
.84
"BLD",4142,"KRN",3.6,0)
3.6
"BLD",4142,"KRN",3.8,0)
3.8
"BLD",4142,"KRN",9.2,0)
9.2
"BLD",4142,"KRN",9.8,0)
9.8
"BLD",4142,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",4142,"KRN",9.8,"NM",1,0)
ORCXPIN2^^0^B44501711
"BLD",4142,"KRN",9.8,"NM",2,0)
ORCXPIN3^^0^B13318918
"BLD",4142,"KRN",9.8,"NM","B","ORCXPIN2",1)

"BLD",4142,"KRN",9.8,"NM","B","ORCXPIN3",2)

"BLD",4142,"KRN",19,0)
19
"BLD",4142,"KRN",19.1,0)
19.1
"BLD",4142,"KRN",101,0)
101
"BLD",4142,"KRN",409.61,0)
409.61
"BLD",4142,"KRN",771,0)
771
"BLD",4142,"KRN",870,0)
870
"BLD",4142,"KRN",8989.51,0)
8989.51
"BLD",4142,"KRN",8989.52,0)
8989.52
"BLD",4142,"KRN",8994,0)
8994
"BLD",4142,"KRN","B",.4,.4)

"BLD",4142,"KRN","B",.401,.401)

"BLD",4142,"KRN","B",.402,.402)

"BLD",4142,"KRN","B",.403,.403)

"BLD",4142,"KRN","B",.5,.5)

"BLD",4142,"KRN","B",.84,.84)

"BLD",4142,"KRN","B",3.6,3.6)

"BLD",4142,"KRN","B",3.8,3.8)

"BLD",4142,"KRN","B",9.2,9.2)

"BLD",4142,"KRN","B",9.8,9.8)

"BLD",4142,"KRN","B",19,19)

"BLD",4142,"KRN","B",19.1,19.1)

"BLD",4142,"KRN","B",101,101)

"BLD",4142,"KRN","B",409.61,409.61)

"BLD",4142,"KRN","B",771,771)

"BLD",4142,"KRN","B",870,870)

"BLD",4142,"KRN","B",8989.51,8989.51)

"BLD",4142,"KRN","B",8989.52,8989.52)

"BLD",4142,"KRN","B",8994,8994)

"BLD",4142,"QUES",0)
^9.62^^
"BLD",4142,"REQB",0)
^9.611^1^1
"BLD",4142,"REQB",1,0)
OR*3.0*159^2
"BLD",4142,"REQB","B","OR*3.0*159",1)

"MBREQ")
0
"PKG",110,-1)
1^1
"PKG",110,0)
ORDER ENTRY/RESULTS REPORTING^OR^Order Entry/Results Reporting
"PKG",110,20,0)
^9.402P^^
"PKG",110,22,0)
^9.49I^1^1
"PKG",110,22,1,0)
3.0^2971217
"PKG",110,22,1,"PAH",1,0)
171^3030123^1118
"PKG",110,22,1,"PAH",1,1,0)
^^2^2^3030123
"PKG",110,22,1,"PAH",1,1,1,0)
The description of this build is found in the National Patch Module under 
"PKG",110,22,1,"PAH",1,1,2,0)
patch OR*3.0*171.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","ORCXPIN2")
0^1^B44501711
"RTN","ORCXPIN2",1,0)
ORCXPIN2 ; SLC/KER Patient Inquiry (cont)         ; 01/23/2003
"RTN","ORCXPIN2",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**159,171**;Dec 17,1997
"RTN","ORCXPIN2",3,0)
 ;
"RTN","ORCXPIN2",4,0)
 ; External References
"RTN","ORCXPIN2",5,0)
 ;                   
"RTN","ORCXPIN2",6,0)
 ;   DBIA  3796  ^DGS(41.1
"RTN","ORCXPIN2",7,0)
 ;   DBIA 10039  ^DIC(42,
"RTN","ORCXPIN2",8,0)
 ;   DBIA   723  ^DIC(42,
"RTN","ORCXPIN2",9,0)
 ;   DBIA   519  ^DIC(45.7
"RTN","ORCXPIN2",10,0)
 ;   DBIA  3797  ^DPT(  file #2
"RTN","ORCXPIN2",11,0)
 ;   DBIA 10035  ^DPT(  file #2
"RTN","ORCXPIN2",12,0)
 ;   DBIA 10040  ^SC(  file #44
"RTN","ORCXPIN2",13,0)
 ;   DBIA  3789  DIS^DGMTU
"RTN","ORCXPIN2",14,0)
 ;   DBIA 10036  ^DGPMLOS
"RTN","ORCXPIN2",15,0)
 ;   DBIA  2056  $$GET1^DIQ  (file #2, 200, 405 and 404.51)
"RTN","ORCXPIN2",16,0)
 ;   DBIA 10147  DISP^IBARXEU
"RTN","ORCXPIN2",17,0)
 ;   DBIA  2848  $$GETALL^SCAPMCA
"RTN","ORCXPIN2",18,0)
 ;   DBIA 10061  IN5^VADPT
"RTN","ORCXPIN2",19,0)
 ;   DBIA 10061  INP^VADPT
"RTN","ORCXPIN2",20,0)
 ;   DBIA 10103  $$FMTE^XLFDT
"RTN","ORCXPIN2",21,0)
 ;   DBIA 10104  $$UP^XLFSTR
"RTN","ORCXPIN2",22,0)
 Q
"RTN","ORCXPIN2",23,0)
OE ; Other Eligibilities
"RTN","ORCXPIN2",24,0)
 N OR1,OR2,ORI,ORC S ORC=0,OR1=$G(VAEL(1)) Q:+OR1'>0
"RTN","ORCXPIN2",25,0)
 W !,"Other Eligibilities: " I +($O(VAEL(1,0)))=0 W ?21,ORU Q
"RTN","ORCXPIN2",26,0)
 S ORI=0 F  S ORI=$O(VAEL(1,ORI)) Q:+ORI=0  D
"RTN","ORCXPIN2",27,0)
 . S OR2=$G(VAEL(1,ORI)) Q:+OR2=+OR1
"RTN","ORCXPIN2",28,0)
 . S ORC=ORC+1 W:ORC>1 ! W ?21,$P(OR2,"^",2)
"RTN","ORCXPIN2",29,0)
 I ORC=0 W ?21,ORU
"RTN","ORCXPIN2",30,0)
 Q
"RTN","ORCXPIN2",31,0)
CD ; Catastrophic Disabity Review Date
"RTN","ORCXPIN2",32,0)
 N ORD S ORD=$$GET1^DIQ(2,(+DFN_","),.394,"I")
"RTN","ORCXPIN2",33,0)
 I +ORD S ORD=$$ED^ORCXPINQ(ORD) W !!,"Catastrophically Disabled Review Date: ",ORD
"RTN","ORCXPIN2",34,0)
 Q
"RTN","ORCXPIN2",35,0)
MT ; Means Test
"RTN","ORCXPIN2",36,0)
 Q:+($$DOM^ORCXPINQ)>0  D DIS^DGMTU(DFN)
"RTN","ORCXPIN2",37,0)
 Q
"RTN","ORCXPIN2",38,0)
CP ; Copayment Exemptions
"RTN","ORCXPIN2",39,0)
 Q:+($$DOM^ORCXPINQ)>0  N VAIN,VAIP,VAERR D IN5^VADPT Q:$G(VAIP(1))'=""  D DISP^IBARXEU(DFN,DT,3,1)
"RTN","ORCXPIN2",40,0)
 Q
"RTN","ORCXPIN2",41,0)
PCMM ; Primary Care
"RTN","ORCXPIN2",42,0)
 K ^TMP("ORPLIST",$J)
"RTN","ORCXPIN2",43,0)
 N OROK,ORI,ORN,ORP,ORG,ORS,ORDATE,ORLIST,SDLN S ORDATE="ORDATE",ORLIST="^TMP(""ORPLIST"",$J)",SDLN=2
"RTN","ORCXPIN2",44,0)
 S OROK=0,ORI=$$GETALL^SCAPMCA(DFN,.ORDATE,ORLIST)
"RTN","ORCXPIN2",45,0)
 S ORI=0 F  S ORI=$O(^TMP("ORPLIST",$J,DFN,"PCTM",ORI)) Q:'ORI  D  Q:+($G(OROK))>0
"RTN","ORCXPIN2",46,0)
 . S ORN=$G(^TMP("ORPLIST",$J,DFN,"PCTM",ORI)) Q:'$L(ORN)
"RTN","ORCXPIN2",47,0)
 . S ORP=$$GET1^DIQ(404.51,(+ORN_","),.02),ORN=$P(ORN,"^",2)
"RTN","ORCXPIN2",48,0)
 . W:$L(ORN)!($L(ORP)) !!,?1,"Primary Care Team: ",$G(ORN),?52,"Phone: ",$G(ORP)
"RTN","ORCXPIN2",49,0)
 . S:$L(ORN)!($L(ORP)) OROK=1
"RTN","ORCXPIN2",50,0)
 Q:+($G(OROK))'>0
"RTN","ORCXPIN2",51,0)
 S ORI=0 F  S ORI=$O(^TMP("ORPLIST",$J,DFN,"PCPR",ORI)) Q:'ORI  D
"RTN","ORCXPIN2",52,0)
 . S PROV=$G(^TMP("ORPLIST",$J,DFN,"PCPR",ORI)) Q:'$L(PROV)
"RTN","ORCXPIN2",53,0)
 . S ORP=$$PH^ORCXPINQ(+PROV),ORG=$$PG^ORCXPINQ(+PROV),ORS=$P(PROV,U,4),PROV=$P(PROV,U,2)
"RTN","ORCXPIN2",54,0)
 . W !,?7,"PC Provider: ",$E(PROV,1,28),?49,"Position: ",$E(ORS,1,18)
"RTN","ORCXPIN2",55,0)
 . W !,?13,"Pager: ",ORG,?52,"Phone: ",$G(ORP)
"RTN","ORCXPIN2",56,0)
 S ORI=0 F  S ORI=$O(^TMP("ORPLIST",$J,DFN,"PCAP",ORI)) Q:'ORI  D
"RTN","ORCXPIN2",57,0)
 . S PROV=$G(^TMP("ORPLIST",$J,DFN,"PCAP",ORI)) Q:'$L(PROV)
"RTN","ORCXPIN2",58,0)
 . S ORP=$$PH^ORCXPINQ(+PROV),ORG=$$PG^ORCXPINQ(+PROV),ORS=$P(PROV,U,4),PROV=$P(PROV,U,2)
"RTN","ORCXPIN2",59,0)
 . W !,"Associate Provider: ",$E(PROV,1,28),?49,"Position: ",$E(ORS,1,18)
"RTN","ORCXPIN2",60,0)
 . W !,?13,"Pager: ",ORG,?52,"Phone: ",$G(ORP)
"RTN","ORCXPIN2",61,0)
 K ^TMP("ORPLIST",$J)
"RTN","ORCXPIN2",62,0)
 Q
"RTN","ORCXPIN2",63,0)
CSTAT ;Current Status
"RTN","ORCXPIN2",64,0)
 N DGPMDCD,DGPMIFN,DGPMT,ORACT,ORMV,ORM,ORTYPE,VAERR,VAIP,VAIN,VAHOW,VAROOT,VAINDT,X
"RTN","ORCXPIN2",65,0)
 D INP^VADPT S VAIP("D")="LAST" D IN5^VADPT
"RTN","ORCXPIN2",66,0)
 S ORMV=$S($L($G(VAIP(1))):1,1:0)
"RTN","ORCXPIN2",67,0)
 S ORM(1)=$G(VAIP(1)),ORM(2)=$P($G(VAIP(2)),"^",1)
"RTN","ORCXPIN2",68,0)
 S ORM(3)=$G(VAIP(3)),ORM(3,"I")=(9999999.999999-(+($G(VAIP(3)))))_"9"
"RTN","ORCXPIN2",69,0)
 S ORM(4)=$P($G(VAIP(4)),"^",1),ORM(5)=$G(VAIP(5))
"RTN","ORCXPIN2",70,0)
 S ORM(6)=$P($G(VAIP(6)),"^",1)_"^"_$P($G(VAIP(6)),"^",2)
"RTN","ORCXPIN2",71,0)
 S ORM(7)=$G(VAIP(7)),ORM(8)=$G(VAIP(8)),ORM(13)=$G(VAIP(13))
"RTN","ORCXPIN2",72,0)
 S ORM(13,1)=$G(VAIP(13,1)),ORM(17)=$G(VAIP(17)),ORM(18)=$G(VAIP(18))
"RTN","ORCXPIN2",73,0)
 S DGPMT=0,X=1
"RTN","ORCXPIN2",74,0)
 I 'ORMV D  Q
"RTN","ORCXPIN2",75,0)
 . W !!,"Status      : PATIENT HAS NO INPATIENT OR LODGER ACTIVITY IN THE COMPUTER",*7
"RTN","ORCXPIN2",76,0)
 S ORACT=$S("^3^5^"[("^"_+ORM(2)_"^"):0,1:+ORM(2))
"RTN","ORCXPIN2",77,0)
 W !!,"Status      : ",$S('ORACT:"IN",1:""),"ACTIVE ",$S("^4^5^"[("^"_+ORM(2)_"^"):"LODGER",1:"INPATIENT")
"RTN","ORCXPIN2",78,0)
 I 'ORACT D MOV Q
"RTN","ORCXPIN2",79,0)
 W "-" S ORTYPE=+ORM(4) I ORTYPE=1 W "on PASS" D MOV Q
"RTN","ORCXPIN2",80,0)
 I "^2^3^25^26^"[("^"_ORTYPE_"^") D  D MOV Q
"RTN","ORCXPIN2",81,0)
 . W "on ",$S("^2^26^"[ORTYPE:"A",1:"U"),"A"
"RTN","ORCXPIN2",82,0)
 I "^13^43^44^45^"[("^"_ORTYPE_"^") W "ASIH" D MOV Q
"RTN","ORCXPIN2",83,0)
 I ORTYPE=6 W "OTHER FAC" D MOV Q
"RTN","ORCXPIN2",84,0)
 W "on WARD" D MOV
"RTN","ORCXPIN2",85,0)
 Q
"RTN","ORCXPIN2",86,0)
MOV ; Movement
"RTN","ORCXPIN2",87,0)
 I +ORM(2)=3,+ORM(17)>0 D
"RTN","ORCXPIN2",88,0)
 . N ORMTN S ORMTN=$$GET1^DIQ(405,(+ORM(17)_","),.04) S:'$L(ORMTN) ORMTN="UNKNOWN"
"RTN","ORCXPIN2",89,0)
 . W ?39,"Discharge Type : ",ORMTN
"RTN","ORCXPIN2",90,0)
 I "^3^4^5^"'[("^"_+ORM(2)_"^"),$D(^DPT(DFN,"DAC")) D
"RTN","ORCXPIN2",91,0)
 . W:$$GET1^DIQ(2,(DFN_","),401.3,"I")="S" "  (Seriously ill)"
"RTN","ORCXPIN2",92,0)
 W !!,$S("^4^5^"'[("^"_+ORM(2)_"^"):"Admitted    ",1:"Checked-in  ")
"RTN","ORCXPIN2",93,0)
 W ": "_$P(ORM(13,1),"^",2)
"RTN","ORCXPIN2",94,0)
 W ?39,$S("^4^5^"[("^"_+ORM(2)_"^"):"Checked-out",+ORM(2)=3:"Discharged ",1:"Transferred")
"RTN","ORCXPIN2",95,0)
 W "    : ",$S("^1^4^"'[("^"_+ORM(2)_"^"):$P(ORM(3),"^",2),$P(ORM(3),"^",2)'=$P(ORM(13,1),"^",2):$P(ORM(3),"^",2),1:"")
"RTN","ORCXPIN2",96,0)
 W !,"Ward        : ",$E($P(ORM(5),"^",2),1,24)
"RTN","ORCXPIN2",97,0)
 W ?39,"Room-Bed       : ",$E($P(ORM(6),"^",2),1,21) I "^4^5^"'[("^"_+ORM(2)_"^") W !,"Provider    : ",$E($P(ORM(7),"^",2),1,26),?39,"Specialty      : ",$E($P(ORM(8),"^",2),1,21)
"RTN","ORCXPIN2",98,0)
 W !,"Attending   : ",$E($P(ORM(18),"^",2),1,26)
"RTN","ORCXPIN2",99,0)
 I +ORM(2)'=4&(+ORM(2)'=5) D
"RTN","ORCXPIN2",100,0)
 . N DGPMIFN S DGPMIFN=ORM(13) D ^DGPMLOS
"RTN","ORCXPIN2",101,0)
 . W !!,"Admission LOS: ",+$P(X,"^",5),"  Absence days: ",+$P(X,"^",2)
"RTN","ORCXPIN2",102,0)
 . W "  Pass Days: ",+$P(X,"^",3),"  ASIH days: ",+$P(X,"^",4)
"RTN","ORCXPIN2",103,0)
 Q
"RTN","ORCXPIN2",104,0)
SA ; Scheduled/Admit
"RTN","ORCXPIN2",105,0)
 N ORI S ORI=0 F  S ORI=$O(^DGS(41.1,"B",DFN,ORI)) Q:+ORI=0  D
"RTN","ORCXPIN2",106,0)
 . N ORND S ORND=^DGS(41.1,ORI,0)
"RTN","ORCXPIN2",107,0)
 . I $P(ORND,"^",2)>(DT-1),$P(ORND,"^",13)']"",'$P(ORND,"^",17) D
"RTN","ORCXPIN2",108,0)
 . . N ORDT,ORWARD,ORTSPC S ORDT=$P(ORND,"^",2),ORWARD=$P($G(^DIC(42,+$P(ORND,U,8),0)),U,1),ORTSPC=$P($G(^DIC(45.7,+$P(ORND,U,9),0)),U,1)
"RTN","ORCXPIN2",109,0)
 . . W !!,?14,"Scheduled Admit" W:$L(ORWARD) " on ward "_ORWARD
"RTN","ORCXPIN2",110,0)
 . . W:$L(ORTSPC) " for treating specialty "_ORTSPC W " on "_$$FMTE^XLFDT(ORDT,"5DZ")
"RTN","ORCXPIN2",111,0)
 I +($O(^DPT(DFN,"DE",0)))>0 D
"RTN","ORCXPIN2",112,0)
 . N ORFIST,ORLAST,ORCT S ORFIST=+($O(^DPT(DFN,"DE",0))),ORLAST=+($O(^DPT(DFN,"DE"," "),-1))
"RTN","ORCXPIN2",113,0)
 . S ORCT=0,ORI=0 F  S ORI=$O(^DPT(DFN,"DE",ORI)) Q:+ORI=0  D
"RTN","ORCXPIN2",114,0)
 . . N ORSTAT,ORCLIN,ORADMT,ORNAME Q:'$D(^DPT(DFN,"DE",ORI,0))
"RTN","ORCXPIN2",115,0)
 . . S ORSTAT=$P(^DPT(DFN,"DE",ORI,0),"^",2),ORCLIN=+($P(^DPT(DFN,"DE",ORI,0),"^",1)),ORADMT=$P(^DPT(DFN,"DE",ORI,0),"^",17)
"RTN","ORCXPIN2",116,0)
 . . I ORSTAT'="I",+ORFIST>0 D
"RTN","ORCXPIN2",117,0)
 . . . S ORCT=ORCT+1 W:ORCT=1 !!,"Currently enrolled in " S ORNAME=$$UP^XLFSTR($P($G(^SC(+ORCLIN,0)),"^",1))
"RTN","ORCXPIN2",118,0)
 . . . W:$X>50 !,?22 W $S($L(ORNAME)&(+ORLAST'=ORI):ORNAME_",",$L(ORNAME)&(+ORLAST=ORI):ORNAME,1:"")
"RTN","ORCXPIN2",119,0)
 Q
"RTN","ORCXPIN2",120,0)
FA ; Future Appointments
"RTN","ORCXPIN2",121,0)
 N ORAPPT,ORDT,ORD,ORT,ORC,ORI,ORFA,ORND,ORCLIN,ORSTAT,ORMK
"RTN","ORCXPIN2",122,0)
 S ORC=0,ORMK=$P(^DPT(DFN,0),"^",10) S:ORMK["[" ORMK=$P(ORMK,"[",1)_" ["_$P(ORMK,"[",2,299) S:$E(ORMK,1)=" " ORMK=$E(ORMK,2,$L(ORMK))
"RTN","ORCXPIN2",123,0)
 W !!,"Future Appointments: " I $O(^DPT(DFN,"S",DT))'>0 W ?22,"NONE",!!,"Remarks: ",ORMK Q
"RTN","ORCXPIN2",124,0)
 W ?22,"Date",?33,"Time",?39,"Clinic",!,?22 F ORI=22:1:75 W "="
"RTN","ORCXPIN2",125,0)
 S ORFA=+($G(DT)) F  S ORFA=$O(^DPT(DFN,"S",ORFA)) Q:+ORFA=0  D  Q:ORC>4
"RTN","ORCXPIN2",126,0)
 . N ORA S ORA=ORFA,ORND=^DPT(DFN,"S",ORFA,0),ORCLIN=+ORND
"RTN","ORCXPIN2",127,0)
 . I $P(ORND,"^",2)'["C" D
"RTN","ORCXPIN2",128,0)
 . . S ORSTAT=$S($P(ORND,"^",7)=7:" (Collateral) ",1:"")
"RTN","ORCXPIN2",129,0)
 . . S ORSTAT=ORSTAT_$S($P(ORND,"^",2)["NT":" * NO ACTION TAKEN *",$P(ORND,"^",2)["N":" * NO-SHOW *",1:"")
"RTN","ORCXPIN2",130,0)
 . . S ORDT=$E(ORFA,1,12) Q:+ORDT<DT  S ORC=ORC+1,ORAPPT=$$FMTE^XLFDT(ORDT,"5Z")
"RTN","ORCXPIN2",131,0)
 . . W !,?22,$P(ORAPPT,"@"),?33,$P(ORAPPT,"@",2)
"RTN","ORCXPIN2",132,0)
 . . W ?39,$P($S($D(^SC(ORCLIN,0)):^SC(ORCLIN,0),1:""),"^")," ",ORSTAT
"RTN","ORCXPIN2",133,0)
 I $O(^DPT(DFN,"S",ORFA))>0 W !,?22,"See Scheduling options for additional appointments."
"RTN","ORCXPIN2",134,0)
 W !!,"Remarks: ",ORMK
"RTN","ORCXPIN2",135,0)
 Q
"RTN","ORCXPIN3")
0^2^B13318918
"RTN","ORCXPIN3",1,0)
ORCXPIN3 ; SLC/KER Patient Inquiry (cont)      ; 01/23/2003
"RTN","ORCXPIN3",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**159,171**;Dec 17, 1997
"RTN","ORCXPIN3",3,0)
 ;
"RTN","ORCXPIN3",4,0)
 ; External References
"RTN","ORCXPIN3",5,0)
 ;   DBIA 10035  ^DPT(  file #2
"RTN","ORCXPIN3",6,0)
 ;   DBIA   700  DIS^DGRPDB
"RTN","ORCXPIN3",7,0)
 ;   DBIA  2051  LIST^DIC
"RTN","ORCXPIN3",8,0)
 ;   DBIA  2056  $$GET1^DIQ  (file #2)
"RTN","ORCXPIN3",9,0)
 ;   DBIA 10146  DISP^IBCNS
"RTN","ORCXPIN3",10,0)
 ;   DBIA  1254  $$OUTPTPR^SDUTL3
"RTN","ORCXPIN3",11,0)
 ;   DBIA  1254  $$OUTPTTM^SDUTL3
"RTN","ORCXPIN3",12,0)
 ;   DBIA 10061  OAD^VADPT
"RTN","ORCXPIN3",13,0)
 ;   DBIA 10104  $$UP^XLFSTR
"RTN","ORCXPIN3",14,0)
 ;                  
"RTN","ORCXPIN3",15,0)
 Q
"RTN","ORCXPIN3",16,0)
PC ; Primary Care
"RTN","ORCXPIN3",17,0)
 N DIERR,DISYS,ORDOC,ORTEAM S ORDOC=$$OUTPTPR^SDUTL3(DFN),ORTEAM=$$OUTPTTM^SDUTL3(DFN)
"RTN","ORCXPIN3",18,0)
 I ORDOC!ORTEAM  D
"RTN","ORCXPIN3",19,0)
 . W !!,"Primary Care Information:"
"RTN","ORCXPIN3",20,0)
 . W:ORDOC !,"Primary Practitioner:  ",$P(ORDOC,"^",2)
"RTN","ORCXPIN3",21,0)
 . W:ORTEAM !,"Primary Care Team:     ",$P(ORTEAM,"^",2)
"RTN","ORCXPIN3",22,0)
 Q
"RTN","ORCXPIN3",23,0)
INS ; Insurance
"RTN","ORCXPIN3",24,0)
 W !!,"Health Insurance Information:"
"RTN","ORCXPIN3",25,0)
 D DISP^IBCNS
"RTN","ORCXPIN3",26,0)
 Q
"RTN","ORCXPIN3",27,0)
SVCD ; Service Connection/Disabilities
"RTN","ORCXPIN3",28,0)
 W !!,"Service Connection/Rated Disabilities:"
"RTN","ORCXPIN3",29,0)
 D DIS^DGRPDB
"RTN","ORCXPIN3",30,0)
 Q
"RTN","ORCXPIN3",31,0)
NOK ; Next of Kin
"RTN","ORCXPIN3",32,0)
 N %,%H,STR,STR1,STR2,LBL1,LBL2,NOKTYPE,NOKWP,ADR,VAERR,VAOA K VAOA("A") D OAD^VADPT I $L($G(VAOA(9))) D
"RTN","ORCXPIN3",33,0)
 . W !!,"Next of Kin Information:"
"RTN","ORCXPIN3",34,0)
 . S NOKTYPE="Primary",NOKWP=$$GET1^DIQ(2,(+($G(DFN))_","),.21011) D DNOK
"RTN","ORCXPIN3",35,0)
 . S VAOA("A")=3 D OAD^VADPT I $L($G(VAOA(9))) S NOKTYPE="Secondary",NOKWP=$$GET1^DIQ(2,(+($G(DFN))_","),.211011) D DNOK
"RTN","ORCXPIN3",36,0)
 Q
"RTN","ORCXPIN3",37,0)
DNOK ;   Display Next of Kin
"RTN","ORCXPIN3",38,0)
 W ! N I,COL1,COL2,C1,C2,STR1,STR2,BL,LBL1,LBL2 S I=1 S COL1(I)=NOKTYPE_" NOK"_"^"_$$UP^XLFSTR(VAOA(9))
"RTN","ORCXPIN3",39,0)
 S COL2(I)="Relation"_"^"_$S('$L(VAOA(10)):"<not given>",1:$$UP^XLFSTR(VAOA(10))),I=I+1
"RTN","ORCXPIN3",40,0)
 S ADR=$G(VAOA(1)) K VAOA(1) I '$L(ADR) S ADR=$G(VAOA(2)) K VAOA(2) I '$L(ADR) S ADR=$G(VAOA(3)) K VAOA(3)
"RTN","ORCXPIN3",41,0)
 S STR=$S('$L(ADR):"<street address not available>",1:$$UP^XLFSTR(ADR))
"RTN","ORCXPIN3",42,0)
 K:STR="<street address not available>" VAOA(1),VAOA(2),VAOA(3)
"RTN","ORCXPIN3",43,0)
 S COL1(I)="^"_STR S:$L(STR) COL2(I)="Phone"_"^"_VAOA(8),I=I+1 S:$L($G(NOKWP)) COL2(I)="Wk Phone"_"^"_$G(NOKWP)
"RTN","ORCXPIN3",44,0)
 S ADR=$G(VAOA(2)) K VAOA(2) I '$L(ADR) S ADR=$G(VAOA(3)) K VAOA(3)
"RTN","ORCXPIN3",45,0)
 S STR=$$UP^XLFSTR(ADR) S:$L(STR) COL1(I)="^"_STR,I=I+1 S ADR=$G(VAOA(3))
"RTN","ORCXPIN3",46,0)
 S STR=$$UP^XLFSTR(ADR) S:$L(STR) COL1(I)="^"_STR,I=I+1 I VAOA(4)'="" D
"RTN","ORCXPIN3",47,0)
 . S STR=$$UP^XLFSTR(VAOA(4)) S:VAOA(5) STR=STR_", "_$$UP^XLFSTR($P(VAOA(5),U,2))
"RTN","ORCXPIN3",48,0)
 . S:VAOA(6) STR=STR_"  "_$$UP^XLFSTR(VAOA(6)) S:$L(STR) COL1(I)="^"_STR
"RTN","ORCXPIN3",49,0)
 F I=1:1 Q:'$D(COL1(I))&('$D(COL2(I)))  D
"RTN","ORCXPIN3",50,0)
 . S BL="",LBL1=$P($G(COL1(I)),"^",1),STR1=$P($G(COL1(I)),"^",2),LBL2=$P($G(COL2(I)),"^",1),STR2=$P($G(COL2(I)),"^",2)
"RTN","ORCXPIN3",51,0)
 . S BL=$J("",(14-$L(LBL1))),LBL1=BL_LBL1_$S($L(LBL1)>0:": ",1:"  ")
"RTN","ORCXPIN3",52,0)
 . S BL=$J("",(((54-$L(LBL1))-$L(LBL2))-2)),STR1=$E(STR1,1,$L(BL)),C1=LBL1_STR1
"RTN","ORCXPIN3",53,0)
 . S BL=$J("",((54-$L(C1))-$L(LBL2))),LBL2=BL_LBL2_$S($L(LBL2)>0:":",1:"  ")
"RTN","ORCXPIN3",54,0)
 . S C2=LBL2_$E(STR2,1,17),STR=C1_C2 W $G(STR),!
"RTN","ORCXPIN3",55,0)
 Q
"RTN","ORCXPIN3",56,0)
ALIAS ;
"RTN","ORCXPIN3",57,0)
 N ORC,ORI,ORN,ORS,ORA,ORM S (ORA,ORM)="" K ^TMP("DILIST",$J)
"RTN","ORCXPIN3",58,0)
 D LIST^DIC(2.01,(","_DFN_","),".01E;1E",,"*",,,,,.ORA,.ORM)
"RTN","ORCXPIN3",59,0)
 I +($G(^TMP("DILIST",$J,0)))'>0 K ^TMP("DILIST",$J) Q
"RTN","ORCXPIN3",60,0)
 S (ORC,ORI)=0 F  S ORI=$O(^TMP("DILIST",$J,ORI)) Q:+ORI=0  D
"RTN","ORCXPIN3",61,0)
 . S ORN=$G(^TMP("DILIST",$J,"ID",ORI,.01)) Q:'$L(ORN)
"RTN","ORCXPIN3",62,0)
 . S ORS=$G(^TMP("DILIST",$J,"ID",ORI,1)) S:$L(ORS)=9 ORS=$E(ORS,1,3)_"-"_$E(ORS,4,5)_"-"_$E(ORS,6,9) S:$L(ORS)'=11 ORS=""
"RTN","ORCXPIN3",63,0)
 . S ORC=ORC+1 W:+ORC=1 !,"Patient also known as:"
"RTN","ORCXPIN3",64,0)
 . W !,?9,ORN,?46,$S($L(ORS):"SSN:  ",1:""),ORS
"RTN","ORCXPIN3",65,0)
 W:+ORC>0 ! K ^TMP("DILIST",$J)
"RTN","ORCXPIN3",66,0)
 Q
"VER")
8.0^22.0
**END**
**END**

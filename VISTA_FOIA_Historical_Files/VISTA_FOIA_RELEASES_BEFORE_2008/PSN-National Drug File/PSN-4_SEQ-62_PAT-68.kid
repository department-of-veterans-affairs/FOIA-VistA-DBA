Released PSN*4*68 SEQ #62
Extracted from mail message
**KIDS**:PSN*4.0*68^

**INSTALL NAME**
PSN*4.0*68
"BLD",3998,0)
PSN*4.0*68^NATIONAL DRUG FILE^0^3030210^y
"BLD",3998,1,0)
^^4^4^3030210^
"BLD",3998,1,1,0)
In support of the Outpatient Pharmacy V. 7.0 laser labels enhancement a 
"BLD",3998,1,2,0)
new Application Program Interface (API) was created. National Drug File 
"BLD",3998,1,3,0)
V. 4.0 will supply the Patient Medication Information (PMI) data in ^TMP 
"BLD",3998,1,4,0)
for use in printing on laser labels. This patch supplies this API.
"BLD",3998,4,0)
^9.64PA^^
"BLD",3998,"ABPKG")
n
"BLD",3998,"KRN",0)
^9.67PA^8989.52^19
"BLD",3998,"KRN",.4,0)
.4
"BLD",3998,"KRN",.401,0)
.401
"BLD",3998,"KRN",.402,0)
.402
"BLD",3998,"KRN",.403,0)
.403
"BLD",3998,"KRN",.5,0)
.5
"BLD",3998,"KRN",.84,0)
.84
"BLD",3998,"KRN",3.6,0)
3.6
"BLD",3998,"KRN",3.8,0)
3.8
"BLD",3998,"KRN",9.2,0)
9.2
"BLD",3998,"KRN",9.8,0)
9.8
"BLD",3998,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",3998,"KRN",9.8,"NM",1,0)
PSNPPIO^^0^B5196411
"BLD",3998,"KRN",9.8,"NM","B","PSNPPIO",1)

"BLD",3998,"KRN",19,0)
19
"BLD",3998,"KRN",19.1,0)
19.1
"BLD",3998,"KRN",101,0)
101
"BLD",3998,"KRN",409.61,0)
409.61
"BLD",3998,"KRN",771,0)
771
"BLD",3998,"KRN",870,0)
870
"BLD",3998,"KRN",8989.51,0)
8989.51
"BLD",3998,"KRN",8989.52,0)
8989.52
"BLD",3998,"KRN",8994,0)
8994
"BLD",3998,"KRN","B",.4,.4)

"BLD",3998,"KRN","B",.401,.401)

"BLD",3998,"KRN","B",.402,.402)

"BLD",3998,"KRN","B",.403,.403)

"BLD",3998,"KRN","B",.5,.5)

"BLD",3998,"KRN","B",.84,.84)

"BLD",3998,"KRN","B",3.6,3.6)

"BLD",3998,"KRN","B",3.8,3.8)

"BLD",3998,"KRN","B",9.2,9.2)

"BLD",3998,"KRN","B",9.8,9.8)

"BLD",3998,"KRN","B",19,19)

"BLD",3998,"KRN","B",19.1,19.1)

"BLD",3998,"KRN","B",101,101)

"BLD",3998,"KRN","B",409.61,409.61)

"BLD",3998,"KRN","B",771,771)

"BLD",3998,"KRN","B",870,870)

"BLD",3998,"KRN","B",8989.51,8989.51)

"BLD",3998,"KRN","B",8989.52,8989.52)

"BLD",3998,"KRN","B",8994,8994)

"BLD",3998,"QUES",0)
^9.62^^
"BLD",3998,"REQB",0)
^9.611^2^2
"BLD",3998,"REQB",1,0)
PSN*4.0*62^2
"BLD",3998,"REQB",2,0)
PSS*1.0*67^2
"BLD",3998,"REQB","B","PSN*4.0*62",1)

"BLD",3998,"REQB","B","PSS*1.0*67",2)

"MBREQ")
0
"PKG",136,-1)
1^1
"PKG",136,0)
NATIONAL DRUG FILE^PSN^This is the National Drug File Package V 3.14
"PKG",136,20,0)
^9.402P^^
"PKG",136,22,0)
^9.49I^1^1
"PKG",136,22,1,0)
4.0^2981030^2981223^11595
"PKG",136,22,1,"PAH",1,0)
68^3030210^11881
"PKG",136,22,1,"PAH",1,1,0)
^^4^4^3030210
"PKG",136,22,1,"PAH",1,1,1,0)
In support of the Outpatient Pharmacy V. 7.0 laser labels enhancement a 
"PKG",136,22,1,"PAH",1,1,2,0)
new Application Program Interface (API) was created. National Drug File 
"PKG",136,22,1,"PAH",1,1,3,0)
V. 4.0 will supply the Patient Medication Information (PMI) data in ^TMP 
"PKG",136,22,1,"PAH",1,1,4,0)
for use in printing on laser labels. This patch supplies this API.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSNPPIO")
0^1^B5196411
"RTN","PSNPPIO",1,0)
PSNPPIO ;BIR/JLC - return PMI in TMP ;12/13/2002
"RTN","PSNPPIO",2,0)
 ;;4.0; NATIONAL DRUG FILE;**68**; 30 Oct 98
"RTN","PSNPPIO",3,0)
 ;
"RTN","PSNPPIO",4,0)
 ; Reference to ^PS(59.7 supported by IA #2613
"RTN","PSNPPIO",5,0)
 ; Reference to ^PSDRUG supported by IA #221
"RTN","PSNPPIO",6,0)
 ;
"RTN","PSNPPIO",7,0)
EN(PSNDRUG,PSNMSG) ;
"RTN","PSNPPIO",8,0)
 ;
"RTN","PSNPPIO",9,0)
 ; entry point from Outpatient Pharmacy Labels
"RTN","PSNPPIO",10,0)
 ; Calling method: S PSNFLAG=$$EN^PSNPPIO(PSNDRUG)
"RTN","PSNPPIO",11,0)
 ;
"RTN","PSNPPIO",12,0)
 ; Input: PSNDRUG = IFN from the DRUG file (50)  ** REQUIRED **
"RTN","PSNPPIO",13,0)
 ;
"RTN","PSNPPIO",14,0)
 ; Output: PSNFLAG = 0 if no PMI returned
"RTN","PSNPPIO",15,0)
 ;                   1 if PMI returned in ^TMP($J,"PSNPMI"
"RTN","PSNPPIO",16,0)
 ;         MSG = message text for no PMI information
"RTN","PSNPPIO",17,0)
 ;
"RTN","PSNPPIO",18,0)
 N PSNFLAG,PSNPN,PSNGCN,A1,PSNFILE1,PSNFILE2,PSNEMAP,PMID,PSNPL,I
"RTN","PSNPPIO",19,0)
 K ^TMP($J,"PSNPMI")
"RTN","PSNPPIO",20,0)
 S PSNFLAG=1,PSNPN=$P($G(^PSDRUG(PSNDRUG,"ND")),"^",3)
"RTN","PSNPPIO",21,0)
 I 'PSNPN S PSNMSG="This drug is not matched to the National Drug File; therefore, a Medication Information Sheet cannot be printed." Q 0
"RTN","PSNPPIO",22,0)
 S PSNGCN=$P($G(^PSNDF(50.68,PSNPN,1)),"^",5)
"RTN","PSNPPIO",23,0)
 I 'PSNGCN S PSNMSG="This drug is not linked to a Medication Information Sheet." Q 0
"RTN","PSNPPIO",24,0)
 S A1=$G(^PS(59.7,1,10)),PSNPL=$P(A1,"^",7),PSNFILE1=$S(PSNPL=2:50.624,1:50.623),PSNFILE2=$S(PSNPL=2:50.622,1:50.621)
"RTN","PSNPPIO",25,0)
 S PSNEMAP=$O(^PS(PSNFILE1,"B",PSNGCN,0)) I 'PSNEMAP S PSNMSG="This drug is not linked to a Medication Information Sheet." Q 0
"RTN","PSNPPIO",26,0)
 S PSNGCN=+$P($G(^PS(PSNFILE1,PSNEMAP,0)),"^",2) I '$D(^PS(PSNFILE2,PSNGCN)) S PSNMSG="This drug is not linked to a Medication Information Sheet." Q 0
"RTN","PSNPPIO",27,0)
 M ^TMP($J,"PSNPMI")=^PS(PSNFILE2,PSNGCN)
"RTN","PSNPPIO",28,0)
 S PMID=$P(A1,"^",8) F I=1:1:$L(PMID,",") K ^TMP($J,"PSNPMI",$P(PMID,",",I))
"RTN","PSNPPIO",29,0)
 Q 1
"VER")
8.0^22.0
**END**
**END**

Released SR*3*152 SEQ #147
Extracted from mail message
**KIDS**:SR*3.0*152^

**INSTALL NAME**
SR*3.0*152
"BLD",5643,0)
SR*3.0*152^SURGERY^0^3060418^y
"BLD",5643,1,0)
^^19^19^3060414^
"BLD",5643,1,1,0)
Project 112/SHAD (Shipboard Hazard and Defense) is a new environmental 
"BLD",5643,1,2,0)
indicator added to VistA as part of the Enrollment System Redesign (ESR) 
"BLD",5643,1,3,0)
project.
"BLD",5643,1,4,0)
 
"BLD",5643,1,5,0)
1. This patch provides the ability to enter and edit Project 112/SHAD
"BLD",5643,1,6,0)
   Environmental Indicator information in the Surgery package. The 
"BLD",5643,1,7,0)
   patient's Project 112/SHAD enrollment status is displayed when creating
"BLD",5643,1,8,0)
   or editing a surgical case, and the user will be prompted to answer the
"BLD",5643,1,9,0)
   Project 112/SHAD questions with "yes" or "no".
"BLD",5643,1,10,0)
 
"BLD",5643,1,11,0)
   The Project 112/SHAD information will be forwarded to Patient Care 
"BLD",5643,1,12,0)
   Encounter (PCE) as part of the normal case coding activities.
"BLD",5643,1,13,0)
 
"BLD",5643,1,14,0)
2. This patch will prevent the PRIN PRE-OP ICD DIAGNOSIS CODE field
"BLD",5643,1,15,0)
   (#32.5) of the SURGERY file (#130) from being sent to PCE.
"BLD",5643,1,16,0)
   
"BLD",5643,1,17,0)
3. This patch adds the Alert Coder Regarding Coding Issues [SROA CODE 
"BLD",5643,1,18,0)
   ISSUE] option to the Surgery Risk Assessment Menu [SROA RISK 
"BLD",5643,1,19,0)
   ASSESSMENT] option.
"BLD",5643,4,0)
^9.64PA^133.8^3
"BLD",5643,4,130,0)
130
"BLD",5643,4,130,2,0)
^9.641^130.18^2
"BLD",5643,4,130,2,130,0)
SURGERY  (File-top level)
"BLD",5643,4,130,2,130,1,0)
^9.6411^.026^1
"BLD",5643,4,130,2,130,1,.026,0)
PROJ 112/SHAD
"BLD",5643,4,130,2,130.18,0)
OTHER POSTOP DIAGS  (sub-file)
"BLD",5643,4,130,2,130.18,1,0)
^9.6411^11^2
"BLD",5643,4,130,2,130.18,1,.01,0)
OTHER POSTOP DIAGS
"BLD",5643,4,130,2,130.18,1,11,0)
PROJ 112/SHAD
"BLD",5643,4,130,222)
y^n^p^^^^n^^n
"BLD",5643,4,130,224)

"BLD",5643,4,133.8,0)
133.8
"BLD",5643,4,133.8,2,0)
^9.641^133.801^1
"BLD",5643,4,133.8,2,133.801,0)
PATIENT  (sub-file)
"BLD",5643,4,133.8,2,133.801,1,0)
^9.6411^24^1
"BLD",5643,4,133.8,2,133.801,1,24,0)
PROJ 112/SHAD
"BLD",5643,4,133.8,222)
y^n^p^^^^n^^n
"BLD",5643,4,133.8,224)

"BLD",5643,4,136,0)
136
"BLD",5643,4,136,2,0)
^9.641^136.04^2
"BLD",5643,4,136,2,136,0)
SURGERY PROCEDURE/DIAGNOSIS CODES  (File-top level)
"BLD",5643,4,136,2,136,1,0)
^9.6411^.11^1
"BLD",5643,4,136,2,136,1,.11,0)
PROJ 112/SHAD (PRIN)
"BLD",5643,4,136,2,136.04,0)
OTHER POSTOP DIAGNOSIS CODES  (sub-file)
"BLD",5643,4,136,2,136.04,1,0)
^9.6411^.09^2
"BLD",5643,4,136,2,136.04,1,.01,0)
OTHER POSTOP DIAGNOSIS CODE
"BLD",5643,4,136,2,136.04,1,.09,0)
PROJ 112/SHAD
"BLD",5643,4,136,222)
y^n^p^^^^n^^n
"BLD",5643,4,136,224)

"BLD",5643,4,"APDD",130,130)

"BLD",5643,4,"APDD",130,130,.026)

"BLD",5643,4,"APDD",130,130.18)

"BLD",5643,4,"APDD",130,130.18,.01)

"BLD",5643,4,"APDD",130,130.18,11)

"BLD",5643,4,"APDD",133.8,133.801)

"BLD",5643,4,"APDD",133.8,133.801,24)

"BLD",5643,4,"APDD",136,136)

"BLD",5643,4,"APDD",136,136,.11)

"BLD",5643,4,"APDD",136,136.04)

"BLD",5643,4,"APDD",136,136.04,.01)

"BLD",5643,4,"APDD",136,136.04,.09)

"BLD",5643,4,"B",130,130)

"BLD",5643,4,"B",133.8,133.8)

"BLD",5643,4,"B",136,136)

"BLD",5643,6)
9^
"BLD",5643,"ABPKG")
n
"BLD",5643,"KRN",0)
^9.67PA^8989.52^19
"BLD",5643,"KRN",.4,0)
.4
"BLD",5643,"KRN",.401,0)
.401
"BLD",5643,"KRN",.402,0)
.402
"BLD",5643,"KRN",.403,0)
.403
"BLD",5643,"KRN",.5,0)
.5
"BLD",5643,"KRN",.84,0)
.84
"BLD",5643,"KRN",3.6,0)
3.6
"BLD",5643,"KRN",3.8,0)
3.8
"BLD",5643,"KRN",9.2,0)
9.2
"BLD",5643,"KRN",9.8,0)
9.8
"BLD",5643,"KRN",9.8,"NM",0)
^9.68A^9^9
"BLD",5643,"KRN",9.8,"NM",1,0)
SROPCE1^^0^B43635791
"BLD",5643,"KRN",9.8,"NM",2,0)
SROCD^^0^B20439291
"BLD",5643,"KRN",9.8,"NM",3,0)
SROCD0^^0^B60958065
"BLD",5643,"KRN",9.8,"NM",4,0)
SROCD1^^0^B22252247
"BLD",5643,"KRN",9.8,"NM",5,0)
SROCD3^^0^B25952719
"BLD",5643,"KRN",9.8,"NM",6,0)
SROVER3^^0^B35709215
"BLD",5643,"KRN",9.8,"NM",7,0)
SROPCEP^^0^B73728943
"BLD",5643,"KRN",9.8,"NM",8,0)
SROACOD^^0^B16578804
"BLD",5643,"KRN",9.8,"NM",9,0)
SROANEST^^0^B54722958
"BLD",5643,"KRN",9.8,"NM","B","SROACOD",8)

"BLD",5643,"KRN",9.8,"NM","B","SROANEST",9)

"BLD",5643,"KRN",9.8,"NM","B","SROCD",2)

"BLD",5643,"KRN",9.8,"NM","B","SROCD0",3)

"BLD",5643,"KRN",9.8,"NM","B","SROCD1",4)

"BLD",5643,"KRN",9.8,"NM","B","SROCD3",5)

"BLD",5643,"KRN",9.8,"NM","B","SROPCE1",1)

"BLD",5643,"KRN",9.8,"NM","B","SROPCEP",7)

"BLD",5643,"KRN",9.8,"NM","B","SROVER3",6)

"BLD",5643,"KRN",19,0)
19
"BLD",5643,"KRN",19,"NM",0)
^9.68A^2^2
"BLD",5643,"KRN",19,"NM",1,0)
SROA RISK ASSESSMENT^^2
"BLD",5643,"KRN",19,"NM",2,0)
SROA CODE ISSUE^^0
"BLD",5643,"KRN",19,"NM","B","SROA CODE ISSUE",2)

"BLD",5643,"KRN",19,"NM","B","SROA RISK ASSESSMENT",1)

"BLD",5643,"KRN",19.1,0)
19.1
"BLD",5643,"KRN",101,0)
101
"BLD",5643,"KRN",409.61,0)
409.61
"BLD",5643,"KRN",771,0)
771
"BLD",5643,"KRN",870,0)
870
"BLD",5643,"KRN",8989.51,0)
8989.51
"BLD",5643,"KRN",8989.52,0)
8989.52
"BLD",5643,"KRN",8994,0)
8994
"BLD",5643,"KRN","B",.4,.4)

"BLD",5643,"KRN","B",.401,.401)

"BLD",5643,"KRN","B",.402,.402)

"BLD",5643,"KRN","B",.403,.403)

"BLD",5643,"KRN","B",.5,.5)

"BLD",5643,"KRN","B",.84,.84)

"BLD",5643,"KRN","B",3.6,3.6)

"BLD",5643,"KRN","B",3.8,3.8)

"BLD",5643,"KRN","B",9.2,9.2)

"BLD",5643,"KRN","B",9.8,9.8)

"BLD",5643,"KRN","B",19,19)

"BLD",5643,"KRN","B",19.1,19.1)

"BLD",5643,"KRN","B",101,101)

"BLD",5643,"KRN","B",409.61,409.61)

"BLD",5643,"KRN","B",771,771)

"BLD",5643,"KRN","B",870,870)

"BLD",5643,"KRN","B",8989.51,8989.51)

"BLD",5643,"KRN","B",8989.52,8989.52)

"BLD",5643,"KRN","B",8994,8994)

"BLD",5643,"QUES",0)
^9.62^^
"BLD",5643,"REQB",0)
^9.611^2^1
"BLD",5643,"REQB",2,0)
SR*3.0*146^2
"BLD",5643,"REQB","B","SR*3.0*146",2)

"FIA",130)
SURGERY
"FIA",130,0)
^SRF(
"FIA",130,0,0)
130IP
"FIA",130,0,1)
y^n^p^^^^n^^n
"FIA",130,0,10)

"FIA",130,0,11)

"FIA",130,0,"RLRO")

"FIA",130,0,"VR")
3.0^SR
"FIA",130,130)
1
"FIA",130,130,.026)

"FIA",130,130,.74)

"FIA",130,130.18)
1
"FIA",130,130.18,.01)

"FIA",130,130.18,11)

"FIA",133.8)
SURGERY WAITING LIST
"FIA",133.8,0)
^SRO(133.8,
"FIA",133.8,0,0)
133.8IP
"FIA",133.8,0,1)
y^n^p^^^^n^^n
"FIA",133.8,0,10)

"FIA",133.8,0,11)

"FIA",133.8,0,"RLRO")

"FIA",133.8,0,"VR")
3.0^SR
"FIA",133.8,133.8)
1
"FIA",133.8,133.801)
1
"FIA",133.8,133.801,24)

"FIA",136)
SURGERY PROCEDURE/DIAGNOSIS CODES
"FIA",136,0)
^SRO(136,
"FIA",136,0,0)
136P
"FIA",136,0,1)
y^n^p^^^^n^^n
"FIA",136,0,10)

"FIA",136,0,11)

"FIA",136,0,"RLRO")

"FIA",136,0,"VR")
3.0^SR
"FIA",136,136)
1
"FIA",136,136,.11)

"FIA",136,136,4)

"FIA",136,136.04)
1
"FIA",136,136.04,.01)

"FIA",136,136.04,.09)

"KRN",19,7296,-1)
2^1
"KRN",19,7296,0)
SROA RISK ASSESSMENT^Surgery Risk Assessment Menu^^M^517^SR RISK ASSESSMENT^^^^^^167^y^1^1^^1
"KRN",19,7296,10,0)
^19.01IP^14^14
"KRN",19,7296,10,14,0)
13003^CODE^13
"KRN",19,7296,10,14,"^")
SROA CODE ISSUE
"KRN",19,7296,"U")
SURGERY RISK ASSESSMENT MENU
"KRN",19,13003,-1)
0^2
"KRN",19,13003,0)
SROA CODE ISSUE^Alert Coder Regarding Coding Issues^^R^^^^^^^^^^1^1
"KRN",19,13003,1,0)
^19.06^4^4^3060404^^
"KRN",19,13003,1,1,0)
This option is used to provide the Risk Assessment Nurse Reviewers an
"KRN",19,13003,1,2,0)
electronic method to notify coders of potential coding issues or concerns.
"KRN",19,13003,1,3,0)
The message sent will include the basic Surgery case information and
"KRN",19,13003,1,4,0)
comments specifically added by the Nurse Reviewer.
"KRN",19,13003,15)
D EXIT^SROVAR
"KRN",19,13003,20)
D ^SROVAR
"KRN",19,13003,22)
Q
"KRN",19,13003,25)
SROACOD
"KRN",19,13003,"U")
ALERT CODER REGARDING CODING I
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",167,-1)
1^1
"PKG",167,0)
SURGERY^SR^SURGICAL DATA COLLECTION AND OPERATIONS SCHEDULING
"PKG",167,20,0)
^9.402P^^
"PKG",167,22,0)
^9.49I^1^1
"PKG",167,22,1,0)
3.0^2930624^2930811
"PKG",167,22,1,"PAH",1,0)
152^3060418^517
"PKG",167,22,1,"PAH",1,1,0)
^^19^19^3060418
"PKG",167,22,1,"PAH",1,1,1,0)
Project 112/SHAD (Shipboard Hazard and Defense) is a new environmental 
"PKG",167,22,1,"PAH",1,1,2,0)
indicator added to VistA as part of the Enrollment System Redesign (ESR) 
"PKG",167,22,1,"PAH",1,1,3,0)
project.
"PKG",167,22,1,"PAH",1,1,4,0)
 
"PKG",167,22,1,"PAH",1,1,5,0)
1. This patch provides the ability to enter and edit Project 112/SHAD
"PKG",167,22,1,"PAH",1,1,6,0)
   Environmental Indicator information in the Surgery package. The 
"PKG",167,22,1,"PAH",1,1,7,0)
   patient's Project 112/SHAD enrollment status is displayed when creating
"PKG",167,22,1,"PAH",1,1,8,0)
   or editing a surgical case, and the user will be prompted to answer the
"PKG",167,22,1,"PAH",1,1,9,0)
   Project 112/SHAD questions with "yes" or "no".
"PKG",167,22,1,"PAH",1,1,10,0)
 
"PKG",167,22,1,"PAH",1,1,11,0)
   The Project 112/SHAD information will be forwarded to Patient Care 
"PKG",167,22,1,"PAH",1,1,12,0)
   Encounter (PCE) as part of the normal case coding activities.
"PKG",167,22,1,"PAH",1,1,13,0)
 
"PKG",167,22,1,"PAH",1,1,14,0)
2. This patch will prevent the PRIN PRE-OP ICD DIAGNOSIS CODE field
"PKG",167,22,1,"PAH",1,1,15,0)
   (#32.5) of the SURGERY file (#130) from being sent to PCE.
"PKG",167,22,1,"PAH",1,1,16,0)
   
"PKG",167,22,1,"PAH",1,1,17,0)
3. This patch adds the Alert Coder Regarding Coding Issues [SROA CODE 
"PKG",167,22,1,"PAH",1,1,18,0)
   ISSUE] option to the Surgery Risk Assessment Menu [SROA RISK 
"PKG",167,22,1,"PAH",1,1,19,0)
   ASSESSMENT] option.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
9
"RTN","SROACOD")
0^8^B16578804^B17209875
"RTN","SROACOD",1,0)
SROACOD ;BIR/SJA - ALERT CODERS OF POTENTIAL CODING ISSUES ;04/18/06
"RTN","SROACOD",2,0)
 ;;3.0; Surgery ;**146,152**;24 Jun 93
"RTN","SROACOD",3,0)
 I '$D(SRTN) K SRNEWOP D ^SROPS G:'$D(SRTN) END S SRTN("KILL")=1
"RTN","SROACOD",4,0)
 N I,J,SRCPTP,SRLN,SRNODE0,SRPOST,SRTXT,SRSOUT,SRSUPCPT,X,XX,Y
"RTN","SROACOD",5,0)
 S SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACOD",6,0)
START G:SRSOUT END K SRAOTH
"RTN","SROACOD",7,0)
 D HDR^SROAUTL
"RTN","SROACOD",8,0)
 W !,"The following ""final"" codes have been entered for the case.",!!
"RTN","SROACOD",9,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$P($$CPT^ICPTCOD(X),"^",2) D SSPRIN^SROCPT0 S X=Y
"RTN","SROACOD",10,0)
 W "Principal CPT Code: ",$S($L(X):X,1:"NOT ENTERED") S SRCPTP=X
"RTN","SROACOD",11,0)
 N SRPROC,K,SRL
"RTN","SROACOD",12,0)
 S SRPROC(1)="",SRL=60,K=1 D OTH^SROUTLN W !,"Other CPT Codes: "_$S(SRPROC(1)="":"   NOT ENTERED",1:"")
"RTN","SROACOD",13,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?20,$P(SRPROC(I),", ",2,99),! W:I'=1 ?20,SRPROC(I),!
"RTN","SROACOD",14,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",3) S:X X=$$ICDDX^ICDCODE(X,$P($G(^SRF(SRTN,0)),"^",9)),X=$P(X,"^",2)_"   "_$P(X,"^",4)
"RTN","SROACOD",15,0)
 W "Postop Diagnosis Code (ICD9): ",$S(X'="":X,1:"NOT ENTERED"),! S SRPOST=X
"RTN","SROACOD",16,0)
 W !!,"If you believe that the information coded is not correct and would like to",!,"alert the coders of the potential issue, enter a brief description of your",!,"concern below.",!
"RTN","SROACOD",17,0)
 D ASK G:SRSOUT END
"RTN","SROACOD",18,0)
 K ^TMP($J,"SRC")
"RTN","SROACOD",19,0)
ED W ! S DIC="^TMP($J,""SRC"",",DIWESUB="Coding Discrepancy Comments" D EN^DIWE
"RTN","SROACOD",20,0)
 I '$D(^TMP($J,"SRC")) W !,"NOTE:   You have exited the field without entering comments. ",!
"RTN","SROACOD",21,0)
 W ! K DIR S DIR("A",1)="1. Transmit Message",DIR("A",2)="2. Edit Text",DIR("A",3)="",DIR("A")="Select Number: "
"RTN","SROACOD",22,0)
 S DIR(0)="NA^1:2",DIR("B")=1,DIR("?",1)="Enter <RET> or '1' to Transmit Message,"
"RTN","SROACOD",23,0)
 S DIR("?")="enter '2' to Edit the text or enter '^' to exit." D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) G END
"RTN","SROACOD",24,0)
 I Y=2 G ED
"RTN","SROACOD",25,0)
MSG I '$P($G(^SRO(136,SRTN,10)),"^")&('$P($G(^SRO(133,SRSITE,7)),"^",2)) D ERR G END
"RTN","SROACOD",26,0)
 K SR,XMY S SRNODE0=$G(^SRF(SRTN,0))
"RTN","SROACOD",27,0)
 S SR(1)="Patient: "_$E(VADM(1),1,20)_$J("",30-$L(VADM(1)))_" Case #: "_SRTN
"RTN","SROACOD",28,0)
 S Y=$P(SRNODE0,"^",9) D DD^%DT S SR(2)="Operation Date: "_Y
"RTN","SROACOD",29,0)
 S SR(3)=""
"RTN","SROACOD",30,0)
 S SR(4)="The following ""final"" codes have been entered for the case."
"RTN","SROACOD",31,0)
 S DFN=$P(SRNODE0,"^") D DEM^VADPT
"RTN","SROACOD",32,0)
 S SR(5)=""
"RTN","SROACOD",33,0)
 S SR(6)="  Principal CPT Code: "_SRCPTP
"RTN","SROACOD",34,0)
 S SRLN=6 F I=1:1 Q:'$D(SRPROC(I))  S SRLN=SRLN+1 S:I=1 SR(SRLN)="  Other CPT Codes: "_$P(SRPROC(I),", ",2,99) S:I>1 SR(SRLN)=$J(SRPROC(I),$L(SRPROC(I))+19)
"RTN","SROACOD",35,0)
 S SRLN=SRLN+1,SR(SRLN)="  Postop Diagnosis Code (ICD9): "_SRPOST
"RTN","SROACOD",36,0)
 S SRLN=SRLN+1,SR(SRLN)="",SRLN=SRLN+1
"RTN","SROACOD",37,0)
 S I=0 F  S I=$O(^TMP($J,"SRC",I)) Q:'I  S SR(SRLN)=$G(^(I,0)),SRLN=SRLN+1
"RTN","SROACOD",38,0)
 S I=0 F  S I=$O(^SRO(136,SRTN,11,I)) Q:'I  S XX=$G(^(I,0)) I $P(XX,"^") S XMY($P(XX,"^"))=""
"RTN","SROACOD",39,0)
 S XMY(DUZ)=""
"RTN","SROACOD",40,0)
 S X=$P($G(^SRO(133,SRSITE,7)),"^",2) I X S X=$$GET1^DIQ(3.8,X,.01) S:X]"" XMY("G."_X)=""
"RTN","SROACOD",41,0)
 S XMSUB="Surgery Coding Issues" D NOW^%DTC S Y=% X ^DD("DD")
"RTN","SROACOD",42,0)
 S XMTEXT="SR(" D ^XMD K XMTEXT,XMY,XMSUB,^TMP($J,"SRC")
"RTN","SROACOD",43,0)
 W !!,"Transmitting message..."
"RTN","SROACOD",44,0)
END W @IOF D ^SRSKILL I $D(SRTN("KILL")) K SRTN
"RTN","SROACOD",45,0)
 Q
"RTN","SROACOD",46,0)
ASK K DIR S DIR(0)="Y",DIR("A")="Do you want to alert the coders (Y/N)",DIR("B")="YES" D ^DIR S:'Y SRSOUT=1
"RTN","SROACOD",47,0)
 Q
"RTN","SROACOD",48,0)
ERR ;The Coding Issue Alert cannot be created at this time
"RTN","SROACOD",49,0)
 D EN^DDIOL("The information needed to send a code issue mail message is",,"!!")
"RTN","SROACOD",50,0)
 D EN^DDIOL("not entered.  Because the coding is not completed, no coder",,"!")
"RTN","SROACOD",51,0)
 D EN^DDIOL("is identified. Also, there is no mail group identified in the",,"!")
"RTN","SROACOD",52,0)
 D EN^DDIOL("CODE ISSUE MAIL GROUP site parameter.",,"!")
"RTN","SROACOD",53,0)
 D EN^DDIOL("To send a coding issue message the case must have either the",,"!!")
"RTN","SROACOD",54,0)
 D EN^DDIOL("coder or mail group identified.",,"!")
"RTN","SROACOD",55,0)
 W ! K DIR S DIR(0)="FOA",DIR("A")="Press RETURN to continue  " D ^DIR K DIR
"RTN","SROACOD",56,0)
 Q
"RTN","SROANEST")
0^9^B54722958^B53321835
"RTN","SROANEST",1,0)
SROANEST ;BIR/TJH - ANESTHESIA ENTRY ;01 Jun 2003
"RTN","SROANEST",2,0)
 ;;3.0;Surgery;**119,150,152**;24 Jun 93
"RTN","SROANEST",3,0)
SINPUT ;
"RTN","SROANEST",4,0)
 N SRSTART
"RTN","SROANEST",5,0)
 S Z=$E($P(^SRF($S($D(SRTN):SRTN,1:DA(1)),0),"^",9),1,7),X=$S(X?1.4N.A!(X?1.2N1":"2N.A):Z_"@"_X,1:X) K %DT,Z S %DT="RTX" D ^%DT S X=Y K:Y<1 X
"RTN","SROANEST",6,0)
 I '$D(X),$G(SRFLAG)=1 D  K SRFLAG Q
"RTN","SROANEST",7,0)
 .W !!,"Check date format.",!,"     Examples of Valid Dates:",!,"       JAN 20 1957 or 20 JAN 57 or 1/20/57 or 012057",!,"       T   (for TODAY),  T+1 (for TOMORROW),  T+2,  T+7,  etc."
"RTN","SROANEST",8,0)
 .W !,"       T-1 (for YESTERDAY),  T-3W (for 3 WEEKS AGO), etc.",!,"     If the year is omitted, the computer uses CURRENT YEAR.  Two digit year"
"RTN","SROANEST",9,0)
 .W !,"       assumes no more than 20 years in the future, or 80 years in the past.",!,"     If only the time is entered, the current date is assumed."
"RTN","SROANEST",10,0)
 .W !,"     Follow the date with a time, such as JAN 20@10, T@10AM, 10:30, etc.",!,"     You may enter a time, such as NOON, MIDNIGHT or NOW."
"RTN","SROANEST",11,0)
 .W !,"     You may enter   NOW+3'  (for current date and time Plus 3 minutes",!,"       *Note--the Apostrophe following the number of minutes)"
"RTN","SROANEST",12,0)
 .W !,"     Time is REQUIRED in this response.",!,"     Enter the time a member of the Anesthesia staff begins preparing the",!,"     patient for surgery in the O.R. suite or if the care is interrupted, the"
"RTN","SROANEST",13,0)
 .W !,"     time the care resumes."
"RTN","SROANEST",14,0)
 Q:'$D(X)
"RTN","SROANEST",15,0)
 S SRSTART=$P($G(^SRF($S($D(SRTN):SRTN,1:DA(1)),.2)),"^",15)
"RTN","SROANEST",16,0)
 I SRSTART="" K SRFLAG Q
"RTN","SROANEST",17,0)
 I X<SRSTART W !!,"The time entered is before the 'TIME PAT IN HOLD AREA'.  Please check the",!,"DATE/TIME entered for this field." H 2
"RTN","SROANEST",18,0)
 K SRFLAG
"RTN","SROANEST",19,0)
 Q
"RTN","SROANEST",20,0)
STIME ;
"RTN","SROANEST",21,0)
 I '$D(X) Q
"RTN","SROANEST",22,0)
 N SRSPREC,SRPET,SRTIME,SRCRET
"RTN","SROANEST",23,0)
 S SRCRET=$$GET1^DIQ(130.213,DA(2)_","_DA(1)_",",1,"I")
"RTN","SROANEST",24,0)
 I SRCRET,(X>SRCRET) W !!,"Start time is after current end time. Please correct." K X Q
"RTN","SROANEST",25,0)
 S SRSPREC=$O(^SRF(DA(1),50,DA(2)),-1)
"RTN","SROANEST",26,0)
 I SRSPREC'=0 D
"RTN","SROANEST",27,0)
 .S SRPET=$$GET1^DIQ(130.213,SRSPREC_","_DA(1)_",",1,"I")
"RTN","SROANEST",28,0)
 .I SRPET="" W !!,"New start time entry not permitted until previous end time is entered." K X Q
"RTN","SROANEST",29,0)
 .I SRPET>X W !!,"Start time is prior to previous end time. Please correct." K X
"RTN","SROANEST",30,0)
 I $D(X),(DA(2)=1) S SRTIME(130,DA(1)_",",.21)=X D FILE^DIE("","SRTIME","^TMP(""SR"",$J)")
"RTN","SROANEST",31,0)
 Q
"RTN","SROANEST",32,0)
FINALT  ;
"RTN","SROANEST",33,0)
 N SRCST,SRLET,SRYN,SRSNREC,SRFDA,SRTIME,SRLREC,SRCON
"RTN","SROANEST",34,0)
 I $D(^SRF(DA(1),"CON")),$P(^("CON"),"^") S SRCON=$P(^SRF(DA(1),"CON"),"^")
"RTN","SROANEST",35,0)
 S SRCST=$$GET1^DIQ(130.213,DA(2)_","_DA(1)_",",.01,"I")
"RTN","SROANEST",36,0)
 I X<SRCST W !!,"End time prior to start time.  Please correct." K X Q
"RTN","SROANEST",37,0)
 S SRSNREC=$O(^SRF(DA(1),50,DA(2)))
"RTN","SROANEST",38,0)
 I SRSNREC'="B" Q
"RTN","SROANEST",39,0)
ASK W !!,"Does this entry complete all start and end times for this case?  (Y/N)//  " R SRYN:DTIME I '$T!(SRYN["^") S SRYN="N" Q
"RTN","SROANEST",40,0)
 S SRYN=$E(SRYN) I "YyNn?"'[SRYN W !,"Invalid response, please enter Yes or No. Use ? for help." G ASK
"RTN","SROANEST",41,0)
 I "?"[SRYN D HELP G ASK
"RTN","SROANEST",42,0)
 I ("Nn"[SRYN) S SRFDA(130,DA(1)_",",.214)="@" D FILE^DIE("","SRFDA","^TMP(""SR"",$J)") K SRFDA Q
"RTN","SROANEST",43,0)
 D CHKTIME
"RTN","SROANEST",44,0)
 I SRAFLAG=1 K SRAFLAG Q
"RTN","SROANEST",45,0)
 S SRLREC=$O(^SRF(DA(1),50,"B"),-1)
"RTN","SROANEST",46,0)
 I SRLREC'=DA(2) S SRLET=$$GET1^DIQ(130.213,SRLREC_","_DA(1)_",",1,"I")
"RTN","SROANEST",47,0)
 I SRLREC=DA(2) S SRLET=X
"RTN","SROANEST",48,0)
 S SRTIME(130,DA(1)_",",.24)=SRLET,SRTIME(130,DA(1)_",",.214)="1" D FILE^DIE("","SRTIME","^TMP(""SR"",$J)")
"RTN","SROANEST",49,0)
 K SRAFLAG
"RTN","SROANEST",50,0)
 Q:'$D(SRCON)
"RTN","SROANEST",51,0)
ASK2 ;
"RTN","SROANEST",52,0)
 W !,"Does this entry complete all start and end times for the concurrent",!,"case? (Y/N)//  " R SRYN:DTIME I '$T!(SRYN["^") S SRYN="N" Q
"RTN","SROANEST",53,0)
 I "?"[SRYN D HELP^SROCON D HELP G ASK2
"RTN","SROANEST",54,0)
 S SRYN=$E(SRYN) I "YyNn"'[SRYN W !,"Invalid response, please enter Yes or No. Use ? for help." G ASK2
"RTN","SROANEST",55,0)
 I ("Nn"[SRYN),(($P(^SRF(SRCON,.2),"^",17)=1)) S SRFDA(130,SRCON_",",.214)="@" D FILE^DIE("","SRFDA","^TMP(""SR"",$J)") K SRFDA Q
"RTN","SROANEST",56,0)
 S SRTIME(130,SRCON_",",.214)="1" D FILE^DIE("","SRTIME","^TMP(""SR"",$J)")
"RTN","SROANEST",57,0)
 Q
"RTN","SROANEST",58,0)
CHKTIME ;  verify blocks of time are valid
"RTN","SROANEST",59,0)
 N SRSREC,SRCST,SRCET,SRAFLAG1,SRSNREC,SRNST,SRLREC
"RTN","SROANEST",60,0)
 S SRAFLAG=0,SRSREC=0,SRAFLAG1=0
"RTN","SROANEST",61,0)
 F  S SRSREC=$O(^SRF(DA(1),50,SRSREC)) Q:'SRSREC!(SRAFLAG1=1)  D 
"RTN","SROANEST",62,0)
 .S SRCST=$$GET1^DIQ(130.213,SRSREC_","_DA(1)_",",.01,"I"),SRCET=$$GET1^DIQ(130.213,SRSREC_","_DA(1)_",",1,"I")
"RTN","SROANEST",63,0)
 .S SRLREC=$O(^SRF(DA(1),50,"B"),-1)
"RTN","SROANEST",64,0)
 .I (SRCET=""),(SRSREC'=SRLREC) W !!,"One or more time entries missing end time.  Please correct." S SRAFLAG=1,SRAFLAG1=1 Q
"RTN","SROANEST",65,0)
 .S SRSNREC=$O(^SRF(DA(1),50,SRSREC))
"RTN","SROANEST",66,0)
 .I SRSNREC="B" S SRAFLAG1=1 Q
"RTN","SROANEST",67,0)
 .S SRNST=$$GET1^DIQ(130.213,SRSNREC_","_DA(1)_",",.01,"I")
"RTN","SROANEST",68,0)
 .I SRNST<SRCET W !!,"Some time entries overlap.  Please correct." S SRAFLAG=1,SRAFLAG1=1 Q
"RTN","SROANEST",69,0)
 Q
"RTN","SROANEST",70,0)
CSET ;  caled by set xref of mult anes start and end times used for concurrent case anes field stuffing
"RTN","SROANEST",71,0)
 N SRSREC,SRCST,SRCET,SRTIME
"RTN","SROANEST",72,0)
 I $$GET1^DIQ(130,DA(1),.214,"I")'=1 Q
"RTN","SROANEST",73,0)
 S SRSREC=0
"RTN","SROANEST",74,0)
 F  S SRSREC=$O(^SRF(DA(1),50,SRSREC)) Q:'SRSREC  D
"RTN","SROANEST",75,0)
 .S:'$D(SRCST) SRCST=$$GET1^DIQ(130.213,SRSREC_","_DA(1)_",",.01,"I")
"RTN","SROANEST",76,0)
 .S SRCET=$$GET1^DIQ(130.213,SRSREC_","_DA(1)_",",1,"I")
"RTN","SROANEST",77,0)
 S SRTIME(130,DA(1)_",",.24)=SRCET,SRTIME(130,DA(1)_",",.21)=SRCST D FILE^DIE("","SRTIME","^TMP(""SR"",$J)")
"RTN","SROANEST",78,0)
 Q
"RTN","SROANEST",79,0)
DEL ; called by kill xref of mult anes start and end times
"RTN","SROANEST",80,0)
 I '$D(DA(2)) Q
"RTN","SROANEST",81,0)
 I (DA(2)=1),(D=.01) S SRFDA(130,DA(1)_",",.21)="@" D FILE^DIE("","SRFDA","^TMP(""SR"",$J)") K SRFDA
"RTN","SROANEST",82,0)
 I ($O(^SRF(DA(1),50,DA(2)))="B"),(D=1) S SRFDA(130,DA(1)_",",.24)="@",SRFDA(130,DA(1)_",",.214)="@" D FILE^DIE("","SRFDA","^TMP(""SR"",$J)") K SRFDA
"RTN","SROANEST",83,0)
 Q
"RTN","SROANEST",84,0)
HELP ;
"RTN","SROANEST",85,0)
 W !,"Enter ""Y"" only if the block of time entered is the final block of time for"
"RTN","SROANEST",86,0)
 W !,"this case.  If the block of time is not the final block, enter ""N""."
"RTN","SROANEST",87,0)
 Q
"RTN","SROANEST",88,0)
BILLTIME() ;  calculate total minutes for mult anes start and end times
"RTN","SROANEST",89,0)
 N SRSREC,SRCST,SRCET,SRTTIME
"RTN","SROANEST",90,0)
 S SRSREC=0,SRTTIME=0
"RTN","SROANEST",91,0)
 I $$GET1^DIQ(130,D0,.214,"I")'=1 Q SRTTIME
"RTN","SROANEST",92,0)
 I '$D(^SRF(D0,50)) Q SRTTIME
"RTN","SROANEST",93,0)
 F  S SRSREC=$O(^SRF(D0,50,SRSREC)) Q:'SRSREC  D
"RTN","SROANEST",94,0)
 .S SRCST=$$GET1^DIQ(130.213,SRSREC_","_D0_",",.01,"I"),SRCET=$$GET1^DIQ(130.213,SRSREC_","_D0_",",1,"I")
"RTN","SROANEST",95,0)
 .D CALC
"RTN","SROANEST",96,0)
 Q SRTTIME
"RTN","SROANEST",97,0)
CALC ; calculate minutes between start and end times
"RTN","SROANEST",98,0)
 N SRETH,SRDHRS,SRSHR,SREHR,SRSMN,SREMN,SRSTH,X1,X2,Y,%H
"RTN","SROANEST",99,0)
 S X1=SRCST,X2=0 D C^%DTC S SRSTH=%H
"RTN","SROANEST",100,0)
 S X1=SRCET,X2=0 D C^%DTC S SRETH=%H
"RTN","SROANEST",101,0)
 S SRDHRS=(SRETH-SRSTH)*24
"RTN","SROANEST",102,0)
 S SRSHR=$E(($P(SRCST_"0",".",2)),1,2)
"RTN","SROANEST",103,0)
 S SREHR=$E(($P(SRCET_"0",".",2)),1,2)
"RTN","SROANEST",104,0)
 I SREHR<SRSHR S SREHR=SREHR+24,SRDHRS=SRDHRS-24
"RTN","SROANEST",105,0)
 S SRSMN=$E(($P(SRCST_"00",".",2)),3,4)
"RTN","SROANEST",106,0)
 S SREMN=$E(($P(SRCET_"00",".",2)),3,4)
"RTN","SROANEST",107,0)
 I SREMN<SRSMN S SREMN=SREMN+60,SREHR=SREHR-1
"RTN","SROANEST",108,0)
 S Y=(SRDHRS*60)+((SREHR-SRSHR)*60)+(SREMN-SRSMN)
"RTN","SROANEST",109,0)
 S SRTTIME=SRTTIME+Y
"RTN","SROANEST",110,0)
 Q
"RTN","SROANEST",111,0)
ANESTIME(SRDFN,SRFDATE,SRTDATE) ; API to return multiple anesthesia records and times
"RTN","SROANEST",112,0)
 N SRCASE,SRREC,SRCNT,SRNON,SRX,SRDATE,SRRES,SRSC,SRCV,SRQO,SRIR,SREC,SRMST,SRHNC,SRAO,SRSREC,SRCST,SRCET,SRTTIME,SR,SRDIAG,SRSHAD
"RTN","SROANEST",113,0)
 S (SRREC,SRCNT,SRRES)=0
"RTN","SROANEST",114,0)
 I '$D(SRDFN)!'$D(SRFDATE) Q -1
"RTN","SROANEST",115,0)
 I '$D(SRTDATE) S SRTDATE=SRFDATE
"RTN","SROANEST",116,0)
 I '$D(^SRF("B",SRDFN)) Q 0
"RTN","SROANEST",117,0)
 S SRFDATE=$P(SRFDATE,"."),SRTDATE=$P(SRTDATE,".")
"RTN","SROANEST",118,0)
 F  S SRREC=$O(^SRF("B",SRDFN,SRREC)) Q:'SRREC  S SRCNT=SRCNT+1,SRCASE(SRCNT)=SRREC
"RTN","SROANEST",119,0)
 S SRREC=0
"RTN","SROANEST",120,0)
 F  S SRREC=$O(SRCASE(SRREC)) Q:'SRREC  D
"RTN","SROANEST",121,0)
 .S SRCASE=SRCASE(SRREC)
"RTN","SROANEST",122,0)
 .S SRNON=$S($P($G(^SRF(SRCASE,"NON")),"^")="Y":1,1:0)
"RTN","SROANEST",123,0)
 .I 'SRNON S SRX=$G(^SRF(SRCASE,.2)),SRDATE=$P(SRX,"^",10)
"RTN","SROANEST",124,0)
 .I SRNON S SRX=$G(^SRF(SRCASE,"NON")),SRDATE=$P(SRX,"^",4)
"RTN","SROANEST",125,0)
 .S SRDATE=$P(SRDATE,".")
"RTN","SROANEST",126,0)
 .I (SRDATE<SRFDATE)!(SRDATE>SRTDATE) K SRCASE(SRREC) Q
"RTN","SROANEST",127,0)
 S SRREC=0
"RTN","SROANEST",128,0)
 F  S SRREC=$O(SRCASE(SRREC)) Q:'SRREC  D
"RTN","SROANEST",129,0)
 .S SRCASE=SRCASE(SRREC)
"RTN","SROANEST",130,0)
 .I $$GET1^DIQ(130,SRCASE,.214,"I")'=1 S SRRES=-2 Q
"RTN","SROANEST",131,0)
 .S SRDIAG=$P($G(^SRO(136,SRCASE,0)),"^",3)
"RTN","SROANEST",132,0)
 .I 'SRDIAG S SRDIAG=$P($G(^SRF(SRCASE,34)),"^",2)
"RTN","SROANEST",133,0)
 .S (SRAO,SREC,SRHNC,SRIR,SRMST,SRSHAD)=0
"RTN","SROANEST",134,0)
 .S SR(0)=$G(^SRF(SRCASE,0))
"RTN","SROANEST",135,0)
 .S SRSC=$P(SR(0),"^",16),SRAO=$P(SR(0),"^",17),SRIR=$P(SR(0),"^",18),SREC=$P(SR(0),"^",19),SRMST=$P(SR(0),"^",22),SRHNC=$P(SR(0),"^",23),SRCV=$P(SR(0),"^",24),SRSHAD=$P(SR(0),"^",25)
"RTN","SROANEST",136,0)
 .I '$D(^SRF(SRCASE,50)) S:SRRES'=1 SRRES=-2 Q
"RTN","SROANEST",137,0)
 .S SRRES=1,SRREC=0
"RTN","SROANEST",138,0)
 .F  S SRREC=$O(^SRF(SRCASE,50,SRREC)) Q:(SRREC="B")!(SRREC="")  D
"RTN","SROANEST",139,0)
 ..S SRCST=$$GET1^DIQ(130.213,SRREC_","_SRCASE_",",.01,"I"),SRCET=$$GET1^DIQ(130.213,SRREC_","_SRCASE_",",1,"I")
"RTN","SROANEST",140,0)
 ..I 'SRCET K ^TMP("SRANES",$J,SRCASE) S SRRES=-2,SRREC="" Q
"RTN","SROANEST",141,0)
 ..S SRTTIME=0 D CALC
"RTN","SROANEST",142,0)
 ..S ^TMP("SRANES",$J,SRCASE,SRCST,SRCET)=SRDFN_"^"_SRTTIME_"^"_SRDIAG_"^"_SRSC_"^"_SRCV_"^"_SRAO_"^"_SRIR_"^"_SREC_"^"_SRMST_"^"_SRHNC_"^"_SRSHAD
"RTN","SROANEST",143,0)
 Q SRRES
"RTN","SROCD")
0^2^B20439291^B18456751
"RTN","SROCD",1,0)
SROCD ;BIR/ADM - CASE CODING IN SURGERY PROCEDURE/DIAGNOSIS CODES FILE ;10/20/05
"RTN","SROCD",2,0)
 ;;3.0; Surgery ;**142,152**;24 Jun 93
"RTN","SROCD",3,0)
 I '$D(SRSITE) D ^SROVAR I '$D(SRSITE) S XQUIT="" Q
"RTN","SROCD",4,0)
 I '$G(SRTN) D ^SROPS1 I '$D(SRTN) S XQUIT="" Q
"RTN","SROCD",5,0)
BEG N S,SR2,SRCMOD,SRDES,SRDX,SREDIT,SRHDR,SRMOD,SRNM,SRPROC,SRS,SRSEL,SRTXT
"RTN","SROCD",6,0)
 S (SREDIT,SRMOD,SRSOUT,SRS,SR2)=0 I $P($G(^SRF(SRTN,.2)),"^",3) S SRS=1
"RTN","SROCD",7,0)
 S S(0)=^SRF(SRTN,0),Y=$P(S(0),"^",9),SRDATE=Y D D^DIQ S SRSDATE=Y,DFN=$P(S(0),"^") D DEM^VADPT S SRNM=VADM(1)_"  ("_VA("PID")_")"
"RTN","SROCD",8,0)
 S SRNON=$S($P($G(^SRF(SRTN,"NON")),"^")="Y":1,1:0)
"RTN","SROCD",9,0)
 I '$D(^SRO(136,SRTN)) D ^SROCD1
"RTN","SROCD",10,0)
 I $P($G(^SRO(136,SRTN,10)),"^") D SURE I 'SREDIT Q
"RTN","SROCD",11,0)
EDIT D ^SROCD2 I SRSOUT!SREDIT G END
"RTN","SROCD",12,0)
 D EDIT
"RTN","SROCD",13,0)
 Q
"RTN","SROCD",14,0)
SURE D HDR K DIR
"RTN","SROCD",15,0)
 S DIR("A",1)="Coding for this case has been completed "_$S($P(^SRF(SRTN,0),"^",15):"and",1:"but not")_" sent to PCE."
"RTN","SROCD",16,0)
 S DIR("A",2)="",DIR("A")="Are you sure you want to edit this case",DIR(0)="Y",DIR("B")="NO" D ^DIR K DIR
"RTN","SROCD",17,0)
 I Y S SREDIT=1 M ^TMP("SRED1",$J,SRTN)=^SRO(136,SRTN) Q
"RTN","SROCD",18,0)
END S SROERR=SRTN D ^SROERR0,^SRSKILL
"RTN","SROCD",19,0)
 K ADCNT,SRCOMMA,SRDXCNT,SROCNTR,SROCPT2,SROERR,SROFLG,SRTMP,SRICD9,SRDIAGS,SRASDX,SRMSG,SRADX,SRPADX,SRODIR,REC,SRDIRX,SRADIAG,SRDX,SRDX1,SRDX2,SROICD,SUB4
"RTN","SROCD",20,0)
 W @IOF K ^TMP("SRED1",$J)
"RTN","SROCD",21,0)
 Q
"RTN","SROCD",22,0)
HDR W @IOF,!,SRNM_"        Case #"_SRTN,!
"RTN","SROCD",23,0)
 S SRPROC=$P(^SRF(SRTN,"OP"),"^") D BRK W $P(SRSDATE,"@")_"   "_SRHDR(1)
"RTN","SROCD",24,0)
 I $D(SRHDR(2)) W !,?15,SRHDR(2) I $D(SRHDR(3)) W !,?15,SRHDR(3)
"RTN","SROCD",25,0)
 W ! F I=1:1:80 W "-"
"RTN","SROCD",26,0)
 Q
"RTN","SROCD",27,0)
BRK ; break procedure if greater than 65 characters
"RTN","SROCD",28,0)
 I $L(SRPROC)<66 S SRHDR(1)=SRPROC Q
"RTN","SROCD",29,0)
 S X=SRPROC,K=1 F  D  I $L(X)<66 S SRHDR(K)=X Q
"RTN","SROCD",30,0)
 .F I=0:1:64 S J=65-I,Y=$E(X,J) I Y=" " S SRHDR(K)=$E(X,1,J-1),X=$E(X,J+1,$L(X)) S K=K+1 Q
"RTN","SROCD",31,0)
 Q
"RTN","SROCD",32,0)
OSCEI ; update SC/EI info on other diagnosis
"RTN","SROCD",33,0)
 K DA,DIE,DR,DIR W !!,"Please supply the following required information related to this diagnosis:",!
"RTN","SROCD",34,0)
 S SRDR="",SRQ=0 S DA=$P(SRSEL(SRDA),U),DA(1)=SRTN D  I SRQ Q
"RTN","SROCD",35,0)
 .I $D(SRCL(3)) D SC I SRQ Q
"RTN","SROCD",36,0)
 .I $D(SRCL(7)) D CV I SRQ Q
"RTN","SROCD",37,0)
 .I $D(SRCL(1)) D AO I SRQ Q
"RTN","SROCD",38,0)
 .I $D(SRCL(2)) D IR I SRQ Q
"RTN","SROCD",39,0)
 .I $D(SRCL(4)) D EC I SRQ Q
"RTN","SROCD",40,0)
 .I $D(SRCL(8)) D PRJ I SRQ Q
"RTN","SROCD",41,0)
 .I $D(SRCL(5)) D MST I SRQ Q
"RTN","SROCD",42,0)
 .I $D(SRCL(6)) D HNC
"RTN","SROCD",43,0)
 K DIR S DA=$P(SRSEL(SRDA),U),DA(1)=SRTN,DIE="^SRO(136,SRTN,4,",DR=SRDR D ^DIE K DA,DIE,DR,SRDR
"RTN","SROCD",44,0)
 Q
"RTN","SROCD",45,0)
SC S DIR("A")="Treatment related to Service Connected condition (Y/N)",DIR(0)="136.04,.02" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",46,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G SC
"RTN","SROCD",47,0)
 S SRCL(3)=Y,SRDR=$G(SRDR)_".02////"_SRCL(3)_";"
"RTN","SROCD",48,0)
 Q
"RTN","SROCD",49,0)
CV S DIR("A")="Treatment related to Combat (Y/N)",DIR(0)="136.04,.08" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",50,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G CV
"RTN","SROCD",51,0)
 S SRCL(7)=Y,SRDR=SRDR_".08////"_SRCL(7)_";"
"RTN","SROCD",52,0)
 Q
"RTN","SROCD",53,0)
AO S DIR("A")="Treatment related to Agent Orange Exposure (Y/N)",DIR(0)="136.04,.03" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",54,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G AO
"RTN","SROCD",55,0)
 S SRCL(1)=Y,SRDR=SRDR_".03////"_SRCL(1)_";"
"RTN","SROCD",56,0)
 Q
"RTN","SROCD",57,0)
IR S DIR("A")="Treatment related to Ionizing Radiation Exposure (Y/N)",DIR(0)="136.04,.04" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",58,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G IR
"RTN","SROCD",59,0)
 S SRCL(2)=Y,SRDR=SRDR_".04////"_SRCL(2)_";"
"RTN","SROCD",60,0)
 Q
"RTN","SROCD",61,0)
EC S DIR("A")="Treatment related to Environmental Contaminant Exposure (Y/N)",DIR(0)="136.04,.07" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",62,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G EC
"RTN","SROCD",63,0)
 S SRCL(4)=Y,SRDR=SRDR_".07////"_SRCL(4)_";"
"RTN","SROCD",64,0)
 Q
"RTN","SROCD",65,0)
PRJ S DIR("A")="Treatment related to PROJ 112/SHAD (Y/N)",DIR(0)="136.04,.09" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",66,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G PRJ
"RTN","SROCD",67,0)
 S SRCL(8)=Y,SRDR=SRDR_".09////"_SRCL(8)_";"
"RTN","SROCD",68,0)
 Q
"RTN","SROCD",69,0)
MST S DIR("A")="Treatment related to Military Sexual Trauma (Y/N)",DIR(0)="136.04,.05" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",70,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G MST
"RTN","SROCD",71,0)
 S SRCL(5)=Y,SRDR=SRDR_".05////"_SRCL(5)_";"
"RTN","SROCD",72,0)
 Q
"RTN","SROCD",73,0)
HNC S DIR("A")="Treatment related to Head and/or Neck Cancer (Y/N)",DIR(0)="136.04,.06" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",74,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G HNC
"RTN","SROCD",75,0)
 S SRCL(6)=Y,SRDR=SRDR_".06////"_SRCL(6)_";"
"RTN","SROCD",76,0)
 Q
"RTN","SROCD0")
0^3^B60958065^B58953825
"RTN","SROCD0",1,0)
SROCD0 ;BIR/ADM - CASE CODING INPUT/EDIT ;08/01/05
"RTN","SROCD0",2,0)
 ;;3.0; Surgery ;**142,152**;24 Jun 93
"RTN","SROCD0",3,0)
 ;;
"RTN","SROCD0",4,0)
 ; Reference to CL^SDCO21 supported by DBIA #406
"RTN","SROCD0",5,0)
 ;;
"RTN","SROCD0",6,0)
PRDX ; edit Principal Postop Diagnosis
"RTN","SROCD0",7,0)
 N SRDUP,SRDXY,SRI,SROLD,ENVARR,SCEC,SRNEW,SRNUM S SCEC=$$SCEC()
"RTN","SROCD0",8,0)
 S (SROLD,X)=$P(^SRO(136,SRTN,0),"^",3),SRDIAG="NOT ENTERED" I 'X D PDXEN Q
"RTN","SROCD0",9,0)
 I X S Y=$$ICDDX^ICDCODE(X,$P($G(^SRF(SRTN,0)),"^",9)),SRNUM=$P(Y,U,2),SRDES=$P(Y,U,4),SRDIAG=SRNUM_"  "_SRDES
"RTN","SROCD0",10,0)
 W !,"Principal Postop Diagnosis:",!!,?5,"ICD9 Code: "_SRDIAG D:SCEC
"RTN","SROCD0",11,0)
 .D GETS^DIQ(136,SRTN_",",".04:.11","E","ENVARR")
"RTN","SROCD0",12,0)
 .I $D(ENVARR(136,SRTN_",",.04,"E")) D
"RTN","SROCD0",13,0)
 ..N SRCOLSPN S SRCOLSPN=13 W !
"RTN","SROCD0",14,0)
 ..I $D(SRCL(3)) W ?SRCOLSPN,"SC:",$E(ENVARR(136,SRTN_",",.04,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",15,0)
 ..I $D(SRCL(7)) W ?SRCOLSPN,"CV:",$E(ENVARR(136,SRTN_",",.1,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",16,0)
 ..I $D(SRCL(1)) W ?SRCOLSPN,"AO:",$E(ENVARR(136,SRTN_",",.05,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",17,0)
 ..I $D(SRCL(2)) W ?SRCOLSPN,"IR:",$E(ENVARR(136,SRTN_",",.06,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",18,0)
 ..I $D(SRCL(4)) W ?SRCOLSPN,"EC:",$E(ENVARR(136,SRTN_",",.07,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",19,0)
 ..I $D(SRCL(8)) W ?SRCOLSPN,"SHAD:",$E(ENVARR(136,SRTN_",",.11,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",20,0)
 ..I $D(SRCL(5)) W ?SRCOLSPN,"MST:",$E(ENVARR(136,SRTN_",",.08,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",21,0)
 ..I $D(SRCL(6)) W ?SRCOLSPN,"H&N:",$E(ENVARR(136,SRTN_",",.09,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",22,0)
 K DIR S DIR(0)="SO^1:Update Principal Postop Diagnosis Code;2:Update Service Connected/Environmental Indicators only"
"RTN","SROCD0",23,0)
 S DIR("A")="Enter selection (1 or 2)",DIR("B")=1 D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROCD0",24,0)
 S SRDXY=Y I SRDXY=1 D PDXEN Q
"RTN","SROCD0",25,0)
 I SRDXY=2 D PSCEI
"RTN","SROCD0",26,0)
 Q
"RTN","SROCD0",27,0)
PRESS W ! K DIR S DIR("A")="Press Enter/Return key to continue ",DIR(0)="FOA" D ^DIR K DIR
"RTN","SROCD0",28,0)
 Q
"RTN","SROCD0",29,0)
PDXEN W ! K DA,DIR S DIR("A")="Principal Postop Diagnosis Code",DIR(0)="136,.03",DIR("B")=$G(SRNUM) D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) Q
"RTN","SROCD0",30,0)
 S SRNEW=+Y I X="@" W !!," Deletion of the Principal Postop Diagnosis Code is not allowed! ??" G PDXEN
"RTN","SROCD0",31,0)
 I X="" W !,"This is a required entry." G PDXEN
"RTN","SROCD0",32,0)
 S (SRDUP,SRI)=0 I SRNEW=SROLD Q
"RTN","SROCD0",33,0)
 I SRNEW,SRNEW'=SROLD F  S SRI=$O(SRADIAG(SRI)) Q:'SRI  I SRADIAG(SRI)=SRNEW S SRDUP=1 Q
"RTN","SROCD0",34,0)
 I SRDUP D DUP,HDR^SROCD G PDXEN
"RTN","SROCD0",35,0)
 K DR,DIE,DA S DIE=136,DA=SRTN,DR=".03////"_SRNEW D ^DIE K DR,DIE I $D(Y) Q
"RTN","SROCD0",36,0)
 I SRNEW'=SROLD S X=SROLD D PRINASOD^SROCDX2
"RTN","SROCD0",37,0)
 D REMIND
"RTN","SROCD0",38,0)
PSCEI I $P(^SRO(136,SRTN,0),"^",3) D
"RTN","SROCD0",39,0)
 .I SCEC D SCEI^SROCD3 K SRCL Q
"RTN","SROCD0",40,0)
 .W !!,"  >>>  No SC/EI information required for this patient.  <<<" D PRESS
"RTN","SROCD0",41,0)
 Q
"RTN","SROCD0",42,0)
POTH W !,"Other Procedures:",!
"RTN","SROCD0",43,0)
 N SRSHT,SRNEW,SROLD,SRPOTH,CNT,OTHER,SROPY K SRSEL S CNT=1,OTH=0 F  S OTH=$O(^SRO(136,SRTN,3,OTH)) Q:'OTH!(SRSOUT)  D
"RTN","SROCD0",44,0)
 .S X=$P($G(^SRO(136,SRTN,3,OTH,0)),U),CPT1=""
"RTN","SROCD0",45,0)
 .I X S CPT1=X,Y=$$CPT^ICPTCOD(X,$P($G(^SRF(SRTN,0)),"^",9)),SRCPT=$P(Y,U,2),SRSHT=$P(Y,U,3),Y=SRCPT,SRDA=OTH D SSOTH^SROCPT0 S SRCPT=Y,CPT=SRCPT_"  "_SRSHT
"RTN","SROCD0",46,0)
 .W !,CNT_". CPT Code: "_CPT
"RTN","SROCD0",47,0)
 .S SRSEL(CNT)=OTH_"^CPT Code: "_CPT_"^"_CPT1_"^"_SRCPT
"RTN","SROCD0",48,0)
 .D OTHADXD^SROCDX1
"RTN","SROCD0",49,0)
 .S CNT=CNT+1
"RTN","SROCD0",50,0)
 W !,CNT_". Enter NEW Other Procedure Code",! K DIR S DIR("A")="Enter selection",DIR(0)="NO^1:"_CNT D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROCD0",51,0)
 I 'Y,$$ADCHK D DELWRN^SROCDX2,PRESS Q
"RTN","SROCD0",52,0)
 Q:'Y  S (OTHCNT,SRDA)=Y W !! I SRDA<CNT D  G PH
"RTN","SROCD0",53,0)
 .D HDR^SROCD,OTHCPTD^SROCDX,OTHADX^SROCDX1
"RTN","SROCD0",54,0)
 .K DIR S DIR(0)="SO^1:Update Other Procedure CPT Code;2:Update Associated Diagnoses"
"RTN","SROCD0",55,0)
 .S DIR("A")="Enter selection (1 or 2)",DIR("B")=1 D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROCD0",56,0)
 .S SROPY=Y I SROPY=1 D OPEN Q
"RTN","SROCD0",57,0)
 .I SROPY=2 D OASS
"RTN","SROCD0",58,0)
 S SRDUP=0 K DIR S DIR("A")="Enter new OTHER PROCEDURE CPT code",DIR(0)="136.03,.01" D ^DIR K DIR S SRNEW=+Y I $D(DTOUT)!$D(DUOUT)!(Y="") G PH
"RTN","SROCD0",59,0)
 S SRX=0 F  S SRX=$O(^SRO(136,SRTN,3,SRX)) Q:'SRX  I $P($G(^SRO(136,SRTN,3,SRX,0)),U)=SRNEW S SRDUP=1 Q
"RTN","SROCD0",60,0)
 K DD,DO S SRDICN=1,DIC="^SRO(136,SRTN,3,",X=SRNEW,DIC(0)="L" D FILE^DICN K DIC,DD,DO,SRDICN I +Y<0 Q
"RTN","SROCD0",61,0)
 K DA S (SRPOTH,DA)=+Y,DA(1)=SRTN D OPROC^SROMOD0 K DA
"RTN","SROCD0",62,0)
 S SRDA=CNT,OTHER=SRNEW D COTHADX^SROCDX
"RTN","SROCD0",63,0)
PH D HDR^SROCD D POTH
"RTN","SROCD0",64,0)
 Q
"RTN","SROCD0",65,0)
OPEN N SRDIRED W ! S SROLD=$P(SRSEL(SRDA),U,3),SRDIE=1,SRDIRED=0 K DA,DIE,DIR,DR
"RTN","SROCD0",66,0)
 S DA=$P(SRSEL(SRDA),U),DA(1)=SRTN,DIE="^SRO(136,SRTN,3,",DR=".01T" D ^DIE K DIE,DR,SRDIE Q:$D(Y)
"RTN","SROCD0",67,0)
 I 'SRDIRED K DA Q
"RTN","SROCD0",68,0)
 D OPROC^SROMOD0
"RTN","SROCD0",69,0)
 S X=$P($G(^SRO(136,SRTN,3,$P(SRSEL(SRDA),U),0)),"^") I SROLD'=X D SADXO^SROCDX2 K DA
"RTN","SROCD0",70,0)
OASS S SRPOTH=$P(SRSEL(SRDA),U) D COTHADX^SROCDX
"RTN","SROCD0",71,0)
 Q
"RTN","SROCD0",72,0)
DUP K DIR S DIR("A",1)="",DIR("A",2)="This code has already been selected. Please try again.",DIR("A",3)="",DIR("A")="Press the ENTER key to continue",DIR(0)="FO" D ^DIR K DIR
"RTN","SROCD0",73,0)
 Q
"RTN","SROCD0",74,0)
DOTH W !,"Other Postop Diagnosis:",!
"RTN","SROCD0",75,0)
 N CNT,SRDUP,SRI,SRJ,SRNEW,SRX,SCEC,ENVARR,SRNUM S SCEC=$$SCEC()
"RTN","SROCD0",76,0)
 K SRSEL S CNT=1,OTH=0 F  S OTH=$O(^SRO(136,SRTN,4,OTH)) Q:'OTH!(SRSOUT)  D
"RTN","SROCD0",77,0)
 .S (SRX,X)=$P(^SRO(136,SRTN,4,OTH,0),U),SRDIAG="NOT ENTERED"
"RTN","SROCD0",78,0)
 .I X S Y=$$ICDDX^ICDCODE(X,$P($G(^SRF(SRTN,0)),"^",9)),SRNUM=$P(Y,U,2),SRDES=$P(Y,U,4),SRDIAG=SRNUM_"  "_SRDES
"RTN","SROCD0",79,0)
 .W !,CNT_". ICD9 Code: "_SRDIAG S SRSEL(CNT)=OTH_"^ICD9 Code: "_SRDIAG_"^"_SRNUM_"^"_SRX
"RTN","SROCD0",80,0)
 .D:SCEC OIND
"RTN","SROCD0",81,0)
 .S CNT=CNT+1 I 'SCEC W !
"RTN","SROCD0",82,0)
 W !,CNT_". Enter NEW Other Postop Diagnosis Code",! K DIR S DIR("A")="Enter selection",DIR(0)="NO^1:"_CNT D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROCD0",83,0)
 Q:'Y  S SRDA=Y W !! I SRDA<CNT D  G DH
"RTN","SROCD0",84,0)
 .D HDR^SROCD W !,"Other Postop Diagnosis:",!!,SRDA_". "_$P(SRSEL(SRDA),U,2) I SCEC S OTH=$P(SRSEL(SRDA),"^") D OIND
"RTN","SROCD0",85,0)
 .K DIR S DIR(0)="SO^1:Update Other Postop Diagnosis Code;2:Update Service Connected/Environmental Indicators only"
"RTN","SROCD0",86,0)
 .S DIR("A")="Enter selection (1 or 2)",DIR("B")=1 D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROCD0",87,0)
 .S SRDXY=Y D:SRDXY=1 ODXEN D:SRDXY=2 OSCEI Q
"RTN","SROCD0",88,0)
 K DIR,SRCL S DIR("A")="Enter new OTHER POSTOP DIAGNOSIS Code",DIR(0)="136.04,.01" D ^DIR K DIR S SRNEW=+Y I $D(DTOUT)!$D(DUOUT)!(Y="") G DH
"RTN","SROCD0",89,0)
 S (SRDUP,SRI)=0 F  S SRI=$O(SRADIAG(SRI)) Q:'SRI  I SRADIAG(SRI)=SRNEW S SRDUP=1 Q
"RTN","SROCD0",90,0)
 I SRDUP D DUP G DH
"RTN","SROCD0",91,0)
 S:'$D(DA(1)) DA(1)=SRTN
"RTN","SROCD0",92,0)
 K DD,DO S DIC="^SRO(136,SRTN,4,",X=SRNEW,DIC(0)="L" D FILE^DICN K DA,DD,DIC,DO,DR
"RTN","SROCD0",93,0)
 D REMIND
"RTN","SROCD0",94,0)
DH D PASSDIAG^SROCDX1,ASSDIAG^SROCDX1,HDR^SROCD,DOTH
"RTN","SROCD0",95,0)
 Q
"RTN","SROCD0",96,0)
ODXEN W ! K DIR S SROLD=$P(SRSEL(SRDA),U,4),DIR(0)="136.04,.01",DIR("B")=$P(SRSEL(SRDA),U,3),DIR("A")="Other Postop Diagnosis Code"
"RTN","SROCD0",97,0)
 D ^DIR K DIR S SRNEW=+Y I $D(DTOUT)!$D(DUOUT) Q
"RTN","SROCD0",98,0)
 I X="@" S SRSOUT=0 D  I SRSOUT S SRSOUT=0 Q
"RTN","SROCD0",99,0)
 .K DIR S DIR("A")="SURE YOU WANT TO DELETE THE ENTIRE OTHER POSTOP DIAGNOSIS CODE",DIR(0)="YO",DIR("B")="NO"
"RTN","SROCD0",100,0)
 .D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 Q
"RTN","SROCD0",101,0)
 .K DA,DIE,DR S DA=$P(SRSEL(SRDA),U),DA(1)=SRTN,DIE="^SRO(136,SRTN,4,",DR=".01///@" D ^DIE
"RTN","SROCD0",102,0)
 .S X=$P(SRSEL(SRDA),U,4) D DELASOC^SROCDX2 K DA,DIE,DR,SRSEL(SRDA)
"RTN","SROCD0",103,0)
 .D REMIND S SRSOUT=1
"RTN","SROCD0",104,0)
 S (SRDUP,SRI)=0 F  S SRI=$O(SRADIAG(SRI)) Q:'SRI  I SRADIAG(SRI)=SRNEW,SROLD'=SRNEW S SRDUP=1 Q
"RTN","SROCD0",105,0)
 I SRDUP D DUP Q
"RTN","SROCD0",106,0)
 I SRNEW=SROLD Q
"RTN","SROCD0",107,0)
 I SRNEW,SRNEW'=SROLD K DA,DIE,DIR S DA=$P(SRSEL(SRDA),U),DA(1)=SRTN,DIE="^SRO(136,SRTN,4,",DR=".01////"_SRNEW D ^DIE
"RTN","SROCD0",108,0)
 S X=$P(SRSEL(SRDA),U,4) D DELASOC^SROCDX2 K DA,DIE,DR
"RTN","SROCD0",109,0)
 D REMIND
"RTN","SROCD0",110,0)
OSCEI I '$D(SRCL) W !!,"  >>>  No SC/EI information required for this patient.  <<<" D PRESS Q
"RTN","SROCD0",111,0)
 D OSCEI^SROCD
"RTN","SROCD0",112,0)
 Q
"RTN","SROCD0",113,0)
SCEC() N SRSDATE,DFN,SCEC S SRSDATE=$S($D(SRTN):$P(^SRF(SRTN,0),U,9),1:DT)
"RTN","SROCD0",114,0)
 S DFN=$P(^SRF(SRTN,0),U) D CL^SDCO21(DFN,SRSDATE,,.SRCL)
"RTN","SROCD0",115,0)
 S SCEC=$S($D(SRCL):1,1:0)
"RTN","SROCD0",116,0)
 Q SCEC
"RTN","SROCD0",117,0)
ADCHK() ; check for other procedures with no associated diagnosis
"RTN","SROCD0",118,0)
 N SRADX,SROTH,SRQ S (SRADX,SROTH,SRQ)=0
"RTN","SROCD0",119,0)
 F  S SROTH=$O(^SRO(136,SRTN,3,SROTH)) Q:'SROTH  I '$O(^SRO(136,SRTN,3,SROTH,2,0)) S SRADX=1 Q
"RTN","SROCD0",120,0)
 Q SRADX
"RTN","SROCD0",121,0)
REMIND ; display reminder to update procedure/diagnosis associations
"RTN","SROCD0",122,0)
 K DIR W ! S DIR("A",1)="Please review and update procedure associations for this diagnosis."
"RTN","SROCD0",123,0)
 S DIR("A",2)="",DIR("A")="Press Enter/Return key to continue ",DIR(0)="FOA" D ^DIR K DIR
"RTN","SROCD0",124,0)
 Q
"RTN","SROCD0",125,0)
OIND D GETS^DIQ(136.04,OTH_","_SRTN_",",".02:.09","E","ENVARR")
"RTN","SROCD0",126,0)
 I $D(ENVARR(136.04,OTH_","_SRTN_",",.02,"E")) D
"RTN","SROCD0",127,0)
 .N SRCOLSPN S SRCOLSPN=13 W !
"RTN","SROCD0",128,0)
 .I $D(SRCL(3)) W ?SRCOLSPN,"SC:",$E(ENVARR(136.04,OTH_","_SRTN_",",.02,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",129,0)
 .I $D(SRCL(7)) W ?SRCOLSPN,"CV:",$E(ENVARR(136.04,OTH_","_SRTN_",",.08,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",130,0)
 .I $D(SRCL(1)) W ?SRCOLSPN,"AO:",$E(ENVARR(136.04,OTH_","_SRTN_",",.03,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",131,0)
 .I $D(SRCL(2)) W ?SRCOLSPN,"IR:",$E(ENVARR(136.04,OTH_","_SRTN_",",.04,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",132,0)
 .I $D(SRCL(4)) W ?SRCOLSPN,"EC:",$E(ENVARR(136.04,OTH_","_SRTN_",",.07,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",133,0)
 .I $D(SRCL(8)) W ?SRCOLSPN,"SHAD:",$E(ENVARR(136.04,OTH_","_SRTN_",",.09,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",134,0)
 .I $D(SRCL(5)) W ?SRCOLSPN,"MST:",$E(ENVARR(136.04,OTH_","_SRTN_",",.05,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",135,0)
 .I $D(SRCL(6)) W ?SRCOLSPN,"H&N:",$E(ENVARR(136.04,OTH_","_SRTN_",",.06,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",136,0)
 Q
"RTN","SROCD1")
0^4^B22252247^B21644302
"RTN","SROCD1",1,0)
SROCD1 ;BIR/ADM - CREATE CODING RECORD ;05/16/05
"RTN","SROCD1",2,0)
 ;;3.0; Surgery ;**142,152**;24 Jun 93
"RTN","SROCD1",3,0)
 N SR,SRD,SRDX,SRDICN,SRIEN,SRM,SRMOD,SRN,SRO,SROTH,SRP,SRPD,SRX,SRY,X,Y
"RTN","SROCD1",4,0)
 I $P($G(^SRO(136,SRTN,0)),"^")'=SRTN D NEW
"RTN","SROCD1",5,0)
 S SR(0)=$G(^SRF(SRTN,0))
"RTN","SROCD1",6,0)
 S $P(^SRO(136,SRTN,0),"^",2)=$P($G(^SRF(SRTN,"OP")),"^",2)
"RTN","SROCD1",7,0)
 S $P(^SRO(136,SRTN,0),"^",3)=$P($G(^SRF(SRTN,34)),"^",2)
"RTN","SROCD1",8,0)
SC S $P(^SRO(136,SRTN,0),"^",4)=$P(SR(0),"^",16)
"RTN","SROCD1",9,0)
AO S $P(^SRO(136,SRTN,0),"^",5)=$P(SR(0),"^",17)
"RTN","SROCD1",10,0)
IR S $P(^SRO(136,SRTN,0),"^",6)=$P(SR(0),"^",18)
"RTN","SROCD1",11,0)
EC S $P(^SRO(136,SRTN,0),"^",7)=$P(SR(0),"^",19)
"RTN","SROCD1",12,0)
MST S $P(^SRO(136,SRTN,0),"^",8)=$P(SR(0),"^",22)
"RTN","SROCD1",13,0)
HNC S $P(^SRO(136,SRTN,0),"^",9)=$P(SR(0),"^",23)
"RTN","SROCD1",14,0)
CV S $P(^SRO(136,SRTN,0),"^",10)=$P(SR(0),"^",24)
"RTN","SROCD1",15,0)
PRJ S $P(^SRO(136,SRTN,0),"^",11)=$P(SR(0),"^",25)
"RTN","SROCD1",16,0)
PMOD S SRM=0 F  S SRM=$O(^SRF(SRTN,"OPMOD",SRM)) Q:'SRM  D
"RTN","SROCD1",17,0)
 .S SRMOD=$P(^SRF(SRTN,"OPMOD",SRM,0),"^")
"RTN","SROCD1",18,0)
 .S SRY(136.01,"+1,"_SRTN_",",.01)=SRMOD D UPDATE^DIE("","SRY") K SRY
"RTN","SROCD1",19,0)
PDX S SRD=0 F  S SRD=$O(^SRF(SRTN,"PADX",SRD)) Q:'SRD  D
"RTN","SROCD1",20,0)
 .S SRX=$P(^SRF(SRTN,"PADX",SRD,0),"^")
"RTN","SROCD1",21,0)
 .I SRX=0 S SRDX=$P($G(^SRF(SRTN,34)),"^",2)
"RTN","SROCD1",22,0)
 .E  S SRDX=$P($G(^SRF(SRTN,15,SRX,0)),"^",3)
"RTN","SROCD1",23,0)
 .I SRDX S SRY(136.02,"+1,"_SRTN_",",.01)=SRDX D UPDATE^DIE("","SRY") K SRY
"RTN","SROCD1",24,0)
POTH S SRO=0 F  S SRO=$O(^SRF(SRTN,13,SRO)) Q:'SRO  D
"RTN","SROCD1",25,0)
 .S SROTH=$P($G(^SRF(SRTN,13,SRO,2)),"^") Q:'SROTH  S SRDICN=1
"RTN","SROCD1",26,0)
 .K DD,DO,DIC S DIC="^SRO(136,SRTN,3,",DIC(0)="L",X=SROTH D FILE^DICN K DA,DD,DIC,DO,DR S SRIEN=+Y I SRIEN'>0 Q
"RTN","SROCD1",27,0)
 .S SRM=0 F  S SRM=$O(^SRF(SRTN,13,SRO,"MOD",SRM)) Q:'SRM  D
"RTN","SROCD1",28,0)
 ..S SRMOD=$P(^SRF(SRTN,13,SRO,"MOD",SRM,0),"^")
"RTN","SROCD1",29,0)
 ..S SRY(136.31,"+1,"_SRIEN_","_SRTN_",",.01)=SRMOD D UPDATE^DIE("","SRY") K SRY
"RTN","SROCD1",30,0)
 .S SRD=0 F  S SRD=$O(^SRF(SRTN,13,SRO,"OADX",SRD)) Q:'SRD  D
"RTN","SROCD1",31,0)
 ..S SRX=$P(^SRF(SRTN,13,SRO,"OADX",SRD,0),"^")
"RTN","SROCD1",32,0)
 ..I SRX=0 S SRDX=$P($G(^SRF(SRTN,34)),"^",2)
"RTN","SROCD1",33,0)
 ..E  S SRDX=$P($G(^SRF(SRTN,15,SRX,0)),"^",3)
"RTN","SROCD1",34,0)
 ..I SRDX S SRY(136.32,"+1,"_SRIEN_","_SRTN_",",.01)=SRDX D UPDATE^DIE("","SRY") K SRY
"RTN","SROCD1",35,0)
 ; other diagnoses
"RTN","SROCD1",36,0)
 S SRP=0 F  S SRP=$O(^SRF(SRTN,15,SRP)) Q:'SRP  D
"RTN","SROCD1",37,0)
 .S SRPD=$P(^SRF(SRTN,15,SRP,0),"^",3) Q:'SRPD  S SRIS=$G(^SRF(SRTN,15,SRP,2))
"RTN","SROCD1",38,0)
 .S SRY(136.04,"+1,"_SRTN_",",.01)=SRPD,SRY(136.04,"+1,"_SRTN_",",.02)=$P(SRIS,"^")
"RTN","SROCD1",39,0)
 .S SRY(136.04,"+1,"_SRTN_",",.03)=$P(SRIS,"^",2),SRY(136.04,"+1,"_SRTN_",",.04)=$P(SRIS,"^",3)
"RTN","SROCD1",40,0)
 .S SRY(136.04,"+1,"_SRTN_",",.05)=$P(SRIS,"^",4),SRY(136.04,"+1,"_SRTN_",",.06)=$P(SRIS,"^",5)
"RTN","SROCD1",41,0)
 .S SRY(136.04,"+1,"_SRTN_",",.07)=$P(SRIS,"^",6),SRY(136.04,"+1,"_SRTN_",",.08)=$P(SRIS,"^",7)
"RTN","SROCD1",42,0)
 .S SRY(136.04,"+1,"_SRTN_",",.09)=$P(SRIS,"^",8)
"RTN","SROCD1",43,0)
 .D UPDATE^DIE("","SRY") K SRIS,SRY
"RTN","SROCD1",44,0)
 Q
"RTN","SROCD1",45,0)
NEW K DA,DIC,DD,DO,DINUM S (DINUM,X)=SRTN,DIC="^SRO(136,",DIC(0)="L" D FILE^DICN K DD,DO,DIC,DINUM
"RTN","SROCD1",46,0)
 Q
"RTN","SROCD1",47,0)
CHNG() ; check for changes to data
"RTN","SROCD1",48,0)
 N SRI,SRJ,SRK,SRS,SRCHNG S SRCHNG=0
"RTN","SROCD1",49,0)
 M ^TMP("SRED2",$J,SRTN)=^SRO(136,SRTN)
"RTN","SROCD1",50,0)
 I $G(^TMP("SRED1",$J,SRTN,0))'=$G(^TMP("SRED2",$J,SRTN,0)) Q 1
"RTN","SROCD1",51,0)
 D COMP
"RTN","SROCD1",52,0)
 Q SRCHNG
"RTN","SROCD1",53,0)
COMP S SRI=0 F  S SRI=$O(^TMP("SRED1",$J,SRTN,1,SRI)) Q:'SRI!SRCHNG  I $G(^TMP("SRED1",$J,SRTN,1,SRI,0))'=$G(^TMP("SRED2",$J,SRTN,1,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",54,0)
 S SRI=0 F  S SRI=$O(^TMP("SRED1",$J,SRTN,2,SRI)) Q:'SRI!SRCHNG  I $G(^TMP("SRED1",$J,SRTN,2,SRI,0))'=$G(^TMP("SRED2",$J,SRTN,2,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",55,0)
 S SRI=0 F  S SRI=$O(^TMP("SRED1",$J,SRTN,3,SRI)) Q:'SRI!SRCHNG  D  Q:SRCHNG
"RTN","SROCD1",56,0)
 .I $G(^TMP("SRED1",$J,SRTN,3,SRI,0))'=$G(^TMP("SRED2",$J,SRTN,3,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",57,0)
 .F SRS=1,2 S SRK=0 F  S SRK=$O(^TMP("SRED1",$J,SRTN,3,SRI,SRS,SRK)) Q:'SRK!SRCHNG  I $G(^TMP("SRED1",$J,SRTN,3,SRI,SRS,SRK,0))'=$G(^TMP("SRED2",$J,SRTN,3,SRI,SRS,SRK,0)) S SRCHNG=1 Q
"RTN","SROCD1",58,0)
 S SRI=0 F  S SRI=$O(^TMP("SRED1",$J,SRTN,4,SRI)) Q:'SRI!SRCHNG  I $G(^TMP("SRED1",$J,SRTN,4,SRI,0))'=$G(^TMP("SRED2",$J,SRTN,4,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",59,0)
 S SRI=0 F  S SRI=$O(^TMP("SRED2",$J,SRTN,1,SRI)) Q:'SRI!SRCHNG  I $G(^TMP("SRED2",$J,SRTN,1,SRI,0))'=$G(^TMP("SRED1",$J,SRTN,1,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",60,0)
 S SRI=0 F  S SRI=$O(^TMP("SRED2",$J,SRTN,2,SRI)) Q:'SRI!SRCHNG  I $G(^TMP("SRED2",$J,SRTN,2,SRI,0))'=$G(^TMP("SRED1",$J,SRTN,2,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",61,0)
 S SRI=0 F  S SRI=$O(^TMP("SRED2",$J,SRTN,3,SRI)) Q:'SRI!SRCHNG  D  Q:SRCHNG
"RTN","SROCD1",62,0)
 .I $G(^TMP("SRED2",$J,SRTN,3,SRI,0))'=$G(^TMP("SRED1",$J,SRTN,3,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",63,0)
 .F SRS=1,2 S SRK=0 F  S SRK=$O(^TMP("SRED2",$J,SRTN,3,SRI,SRS,SRK)) Q:'SRK!SRCHNG  I $G(^TMP("SRED2",$J,SRTN,3,SRI,SRS,SRK,0))'=$G(^TMP("SRED1",$J,SRTN,3,SRI,SRS,SRK,0)) S SRCHNG=1 Q
"RTN","SROCD1",64,0)
 S SRI=0 F  S SRI=$O(^TMP("SRED2",$J,SRTN,4,SRI)) Q:'SRI!SRCHNG  I $G(^TMP("SRED2",$J,SRTN,4,SRI,0))'=$G(^TMP("SRED1",$J,SRTN,4,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",65,0)
 K ^TMP("SRED1",$J),^TMP("SRED2",$J)
"RTN","SROCD1",66,0)
 Q
"RTN","SROCD3")
0^5^B25952719^B22787848
"RTN","SROCD3",1,0)
SROCD3 ;BIR/ADM - ASK SC/EI QUESTIONS FOR CODING ;10/17/05
"RTN","SROCD3",2,0)
 ;;3.0; Surgery ;**142,152**;24 Jun 93
"RTN","SROCD3",3,0)
 ;
"RTN","SROCD3",4,0)
 ; Reference to DIS^DGRPDB supported by DBIA #700
"RTN","SROCD3",5,0)
 ; Reference to Field #.322013 in File #2 supported by DBIA #3475
"RTN","SROCD3",6,0)
 ;
"RTN","SROCD3",7,0)
ASK W ! K DIR S DIR("A")="Do you want to update classification information (Y/N)? ",DIR("B")="NO",DIR(0)="YA" D ^DIR K DIR I 'Y!$D(DTOUT)!$D(DUOUT) Q
"RTN","SROCD3",8,0)
SCEI ; output of SC/EI conditions
"RTN","SROCD3",9,0)
 N SRAO,SRCV,SRDR,SREC,SRELIG,SRHNC,SRIR,SRMST,SRPERC,SRQ,SREEQ,SRSC,SRPRJ,VADM,VAEL,VASV,SRY
"RTN","SROCD3",10,0)
 D DEM^VADPT,ELIG^VADPT,SVC^VADPT
"RTN","SROCD3",11,0)
 S SRELIG=$P(VAEL(1),"^",2),SRSC=$P(VAEL(3),"^"),SRSC=$S(SRSC:"YES",SRSC=0:"NO",1:""),SRPERC=$P(VAEL(3),"^",2)
"RTN","SROCD3",12,0)
 S SRAO=$S(VASV(2):"YES",1:"NO"),SRIR=$S(VASV(3):"YES",1:"NO"),SRCV=$S(VASV(10):"YES",1:"NO"),SRPRJ=$S($G(VASV(11)):"YES",1:"NO")
"RTN","SROCD3",13,0)
 S SRMST=$S($D(SRCL(5)):"YES",1:"NO"),SRHNC=$S($D(SRCL(6)):"YES",1:"NO")
"RTN","SROCD3",14,0)
 S DIC=2,DA=DFN,DR=".322013",DIQ="SRY",DIQ(0)="I" D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROCD3",15,0)
 S SREC=SRY(2,DFN,.322013,"I"),SREC=$S(SREC="Y":"YES",1:"NO")
"RTN","SROCD3",16,0)
 W @IOF,!,VADM(1)_"  ("_VA("PID")_")       ",$P(VAEL(6),"^",2),!!,"   * * * Eligibility Information and Service Connected Conditions * * *"
"RTN","SROCD3",17,0)
 W !!,?5,"Primary Eligibility: "_SRELIG,!,?5,"Combat Vet: "_SRCV,?22,"A/O Exp.: "_SRAO,?39,"M/S Trauma: "_SRMST
"RTN","SROCD3",18,0)
 W !,?5,"ION Rad.: "_SRIR,?22,"Env Contam: "_SREC,?39,"H/N Cancer: "_SRHNC
"RTN","SROCD3",19,0)
 W !,?5,"PROJ 112/SHAD: "_SRPRJ
"RTN","SROCD3",20,0)
 D DIS^DGRPDB
"RTN","SROCD3",21,0)
 W ! F I=1:1:79 W "-"
"RTN","SROCD3",22,0)
SUP S SRY="operation" I $D(SRTN),$P($G(^SRF(SRTN,"NON")),"^")="Y" S SRY="procedure"
"RTN","SROCD3",23,0)
 K DIR W !!,"Please supply the following required information about this "_SRY_":",! S:$D(SRTN) DA=SRTN S SRDR="" S:'$D(SRQ) SRQ=0 D  I SRQ G END
"RTN","SROCD3",24,0)
 .I $D(SRCL(3)) D SC I SRQ Q
"RTN","SROCD3",25,0)
 .I $D(SRCL(7)) D CV I SRQ Q
"RTN","SROCD3",26,0)
 .I $D(SRCL(1)) D AO I SRQ Q
"RTN","SROCD3",27,0)
 .I $D(SRCL(2)) D IR I SRQ Q
"RTN","SROCD3",28,0)
 .I $D(SRCL(4)) D EC I SRQ Q
"RTN","SROCD3",29,0)
 .I $D(SRCL(8)) D PRJ I SRQ Q
"RTN","SROCD3",30,0)
 .I $D(SRCL(5)) D MST I SRQ Q
"RTN","SROCD3",31,0)
 .I $D(SRCL(6)) D HNC
"RTN","SROCD3",32,0)
 K DA,DIE,DR S:$D(SRTN) DA=SRTN,DIE=136,DR=SRDR D ^DIE
"RTN","SROCD3",33,0)
UPDX I $O(^SRO(136,SRTN,4,0)) D
"RTN","SROCD3",34,0)
 .W ! K DIR S DIR("A",1)="Update all 'OTHER POSTOP DIAGNOSIS' Eligibility and Service Connected",DIR("A")="Conditions with these values (Y/N)"
"RTN","SROCD3",35,0)
 .S DIR("B")="NO",DIR(0)="Y" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) Q
"RTN","SROCD3",36,0)
 .I Y D UPDSC
"RTN","SROCD3",37,0)
END K DA,DIE,DR,SRZ,X,Y
"RTN","SROCD3",38,0)
 Q
"RTN","SROCD3",39,0)
SC S DIR("A")="Treatment related to Service Connected condition (Y/N)",DIR(0)="136,.04" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",40,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G SC
"RTN","SROCD3",41,0)
 S SRCL(3)=Y,SRDR=$G(SRDR)_".04////"_SRCL(3)_";"
"RTN","SROCD3",42,0)
 S SRCL(3,"UPDATE")=1
"RTN","SROCD3",43,0)
 Q
"RTN","SROCD3",44,0)
CV S DIR("A")="Treatment related to Combat (Y/N)",DIR(0)="136,.1" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",45,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G CV
"RTN","SROCD3",46,0)
 S SRCL(7)=Y,SRDR=SRDR_".1////"_SRCL(7)_";"
"RTN","SROCD3",47,0)
 S SRCL(7,"UPDATE")=1
"RTN","SROCD3",48,0)
 Q
"RTN","SROCD3",49,0)
AO S DIR("A")="Treatment related to Agent Orange Exposure (Y/N)",DIR(0)="136,.05" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",50,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G AO
"RTN","SROCD3",51,0)
 S SRCL(1)=Y,SRDR=SRDR_".05////"_SRCL(1)_";"
"RTN","SROCD3",52,0)
 S SRCL(1,"UPDATE")=1
"RTN","SROCD3",53,0)
 Q
"RTN","SROCD3",54,0)
IR S DIR("A")="Treatment related to Ionizing Radiation Exposure (Y/N)",DIR(0)="136,.06" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",55,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G IR
"RTN","SROCD3",56,0)
 S SRCL(2)=Y,SRDR=SRDR_".06////"_SRCL(2)_";"
"RTN","SROCD3",57,0)
 S SRCL(2,"UPDATE")=1
"RTN","SROCD3",58,0)
 Q
"RTN","SROCD3",59,0)
EC S DIR("A")="Treatment related to Environmental Contaminant Exposure (Y/N)",DIR(0)="136,.07" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",60,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G EC
"RTN","SROCD3",61,0)
 S SRCL(4)=Y,SRDR=SRDR_".07////"_SRCL(4)_";"
"RTN","SROCD3",62,0)
 S SRCL(4,"UPDATE")=1
"RTN","SROCD3",63,0)
 Q
"RTN","SROCD3",64,0)
PRJ S DIR("A")="Treatment related to PROJ 112/SHAD (Y/N)",DIR(0)="136,.11" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",65,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G PRJ
"RTN","SROCD3",66,0)
 S SRCL(8)=Y,SRDR=SRDR_".11////"_SRCL(8)_";"
"RTN","SROCD3",67,0)
 S SRCL(8,"UPDATE")=1
"RTN","SROCD3",68,0)
 Q
"RTN","SROCD3",69,0)
MST S DIR("A")="Treatment related to Military Sexual Trauma (Y/N)",DIR(0)="136,.08" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",70,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G MST
"RTN","SROCD3",71,0)
 S SRCL(5)=Y,SRDR=SRDR_".08////"_SRCL(5)_";"
"RTN","SROCD3",72,0)
 S SRCL(5,"UPDATE")=1
"RTN","SROCD3",73,0)
 Q
"RTN","SROCD3",74,0)
HNC S DIR("A")="Treatment related to Head and/or Neck Cancer (Y/N)",DIR(0)="136,.09" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",75,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G HNC
"RTN","SROCD3",76,0)
 S SRCL(6)=Y,SRDR=SRDR_".09////"_SRCL(6)_";"
"RTN","SROCD3",77,0)
 S SRCL(6,"UPDATE")=1
"RTN","SROCD3",78,0)
 Q
"RTN","SROCD3",79,0)
PRESS W ! K DIR S DIR("A")="Press RETURN to continue  ",DIR(0)="FOA" D ^DIR K DIR W @IOF
"RTN","SROCD3",80,0)
 Q
"RTN","SROCD3",81,0)
UPDSC ;Update existing DX to Service Connected/Environmental Indicators associations.
"RTN","SROCD3",82,0)
 K DA,DIE,DR
"RTN","SROCD3",83,0)
 S (DA,I)=0,DA(1)=SRTN,DIE="^SRO(136,"_SRTN_",4,"
"RTN","SROCD3",84,0)
 D:$D(SRCL(1,"UPDATE")) BLDDR(.03,SRCL(1))
"RTN","SROCD3",85,0)
 D:$D(SRCL(2,"UPDATE")) BLDDR(.04,SRCL(2))
"RTN","SROCD3",86,0)
 D:$D(SRCL(3,"UPDATE")) BLDDR(.02,SRCL(3))
"RTN","SROCD3",87,0)
 D:$D(SRCL(4,"UPDATE")) BLDDR(.07,SRCL(4))
"RTN","SROCD3",88,0)
 D:$D(SRCL(5,"UPDATE")) BLDDR(.05,SRCL(5))
"RTN","SROCD3",89,0)
 D:$D(SRCL(6,"UPDATE")) BLDDR(.06,SRCL(6))
"RTN","SROCD3",90,0)
 D:$D(SRCL(7,"UPDATE")) BLDDR(.08,SRCL(7))
"RTN","SROCD3",91,0)
 D:$D(SRCL(8,"UPDATE")) BLDDR(.09,SRCL(8))
"RTN","SROCD3",92,0)
 F I=1:1 S DA=$O(^SRO(136,SRTN,4,DA)) Q:DA=""  D ^DIE
"RTN","SROCD3",93,0)
 Q
"RTN","SROCD3",94,0)
BLDDR(DXPIECE,NEWSC) ;Build the DR string for updating DX/Service Indicators associations
"RTN","SROCD3",95,0)
 S:$D(DR) DR=DR_";"
"RTN","SROCD3",96,0)
 S:'$D(DR) DR=""
"RTN","SROCD3",97,0)
 S DR=DR_DXPIECE_"///"_NEWSC
"RTN","SROCD3",98,0)
 K DXPIECE,NEWSC
"RTN","SROCD3",99,0)
 Q
"RTN","SROPCE1")
0^1^B43635791^B39384156
"RTN","SROPCE1",1,0)
SROPCE1 ;BIR/ADM - ASK SC/EI QUESTIONS FOR PCE AND CROSS REFERENCE LOGIC ;09/12/05 12:01pm
"RTN","SROPCE1",2,0)
 ;;3.0; Surgery ;**58,105,119,150,152**;24 Jun 93
"RTN","SROPCE1",3,0)
 ;
"RTN","SROPCE1",4,0)
 ; Reference to CL^SDCO21 supported by DBIA #406
"RTN","SROPCE1",5,0)
 ; Reference to DIS^DGRPDB supported by DBIA #700
"RTN","SROPCE1",6,0)
 ; Reference to Field #.322013 in File #2 supported by DBIA #3475
"RTN","SROPCE1",7,0)
 ;
"RTN","SROPCE1",8,0)
EN1 I '$P(^SRO(133,SRSITE,0),"^",16) Q
"RTN","SROPCE1",9,0)
 N SRPDATE,SRSDATE S SRPDATE=$P(^SRO(133,SRSITE,0),"^",17),SRSDATE=$S($D(SRTN):$P(^SRF(SRTN,0),"^",9),$D(SRWLST):$P(^SRO(133.8,SRSS,1,SROFN,0),"^",5),1:DT) I SRPDATE,SRSDATE<SRPDATE Q
"RTN","SROPCE1",10,0)
 N SRAO,SRDR,SREC,SRELIG,SRIR,SRPERC,SRQ,SRSC,SRCL,SRX,VAEL,VASV,SRCV,SRMST,SRHNC,SRPRJ
"RTN","SROPCE1",11,0)
 S SRQ=0 D  I SRQ=1 Q
"RTN","SROPCE1",12,0)
 .I '$D(SRWLST) Q
"RTN","SROPCE1",13,0)
 .I $D(SRWLST),'$P(^SRO(133.8,SRSS,1,SROFN,0),"^",4) Q
"RTN","SROPCE1",14,0)
 .S SRQ=1
"RTN","SROPCE1",15,0)
CLASS ; build classification array
"RTN","SROPCE1",16,0)
 S:$D(SRTN) DFN=$P(^SRF(SRTN,0),"^") D CL^SDCO21(DFN,SRSDATE,,.SRCL)
"RTN","SROPCE1",17,0)
 I '$D(SRCL) W !!,"No classification information is required for this patient.",! K DA,DIE,DR S:$D(SRTN) DA=SRTN,DIE=130,DR=".0155////1" S:$D(SRWLST) DA(1)=SRSS,DA=SROFN,DIE="^SRO(133.8,"_DA(1)_",1,",DR="20////1" D ^DIE G END
"RTN","SROPCE1",18,0)
 I $D(SRTN),'$P(^SRF(SRTN,0),"^",20) G ELIG
"RTN","SROPCE1",19,0)
 I $D(SRWLST),'$P(^SRO(133.8,SRSS,1,SROFN,0),"^",20) G ELIG
"RTN","SROPCE1",20,0)
ASK W ! K DIR S DIR("A")="Do you want to update classification information (Y/N)? ",DIR("B")="NO",DIR(0)="YA" D ^DIR K DIR I 'Y!$D(DTOUT)!$D(DUOUT) W:'$D(SRWLST) @IOF Q
"RTN","SROPCE1",21,0)
ELIG ; output of eligibility and service connected conditions
"RTN","SROPCE1",22,0)
 N SRY D DEM^VADPT,ELIG^VADPT,SVC^VADPT
"RTN","SROPCE1",23,0)
 S SRELIG=$P(VAEL(1),"^",2),SRSC=$P(VAEL(3),"^"),SRSC=$S(SRSC:"YES",SRSC=0:"NO",1:""),SRPERC=$P(VAEL(3),"^",2)
"RTN","SROPCE1",24,0)
 S SRAO=$S(VASV(2):"YES",1:"NO"),SRIR=$S(VASV(3):"YES",1:"NO"),SRCV=$S(VASV(10):"YES",1:"NO"),SRPRJ=$S($G(VASV(11)):"YES",1:"NO")
"RTN","SROPCE1",25,0)
 S SRMST=$S($D(SRCL(5)):"YES",1:"NO"),SRHNC=$S($D(SRCL(6)):"YES",1:"NO")
"RTN","SROPCE1",26,0)
 S DIC=2,DA=DFN,DR=".322013",DIQ="SRY",DIQ(0)="I" D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROPCE1",27,0)
 S SREC=SRY(2,DFN,.322013,"I"),SREC=$S(SREC="Y":"YES",1:"NO")
"RTN","SROPCE1",28,0)
 W @IOF,!,VADM(1)_"  ("_VA("PID")_")       ",$P(VAEL(6),"^",2),!!,"   * * * Eligibility Information and Service Connected Conditions * * *"
"RTN","SROPCE1",29,0)
 W !!,?5,"Primary Eligibility: "_SRELIG,!,?5,"Combat Vet: "_SRCV,?22,"A/O Exp.: "_SRAO,?39,"M/S Trauma: "_SRMST
"RTN","SROPCE1",30,0)
 W !,?5,"ION Rad.: "_SRIR,?22,"Env Contam: "_SREC,?39,"H/N Cancer: "_SRHNC
"RTN","SROPCE1",31,0)
 W !,?5,"PROJ 112/SHAD: "_SRPRJ
"RTN","SROPCE1",32,0)
 D DIS^DGRPDB
"RTN","SROPCE1",33,0)
 W ! F I=1:1:79 W "-"
"RTN","SROPCE1",34,0)
SUP S SRY="operation" I $D(SRTN),$P($G(^SRF(SRTN,"NON")),"^")="Y" S SRY="procedure"
"RTN","SROPCE1",35,0)
 K DIR W !!,"Please supply the following required information about this "_SRY_":",! S:$D(SRWLST) DA(1)=SRSS,DA=SROFN S:$D(SRTN) DA=SRTN S SRDR="" S:'$D(SRQ) SRQ=0 D  I SRQ S:$D(SRWLST) SRSOUT=1 G END
"RTN","SROPCE1",36,0)
 .I $D(SRCL(3)) D SC I SRQ Q
"RTN","SROPCE1",37,0)
 .I $D(SRCL(7)) D CV I SRQ Q
"RTN","SROPCE1",38,0)
 .I $D(SRCL(1)) D AO I SRQ Q
"RTN","SROPCE1",39,0)
 .I $D(SRCL(2)) D IR I SRQ Q
"RTN","SROPCE1",40,0)
 .I $D(SRCL(4)) D EC I SRQ Q
"RTN","SROPCE1",41,0)
 .I $D(SRCL(8)) D PRJ I SRQ Q
"RTN","SROPCE1",42,0)
 .I $D(SRCL(5)) D MST I SRQ Q
"RTN","SROPCE1",43,0)
 .I $D(SRCL(6)) D HNC
"RTN","SROPCE1",44,0)
 K DA,DIE,DR S:$D(SRTN) DA=SRTN,DIE=130,DR=SRDR_".0155////1" S:$D(SRWLST) DA(1)=SRSS,DA=SROFN,DIE="^SRO(133.8,"_DA(1)_",1,",DR=SRDR_"20////1"
"RTN","SROPCE1",45,0)
 D ^DIE
"RTN","SROPCE1",46,0)
UPDX I $D(SRTN),X,$D(^SRF(SRTN,15)) D
"RTN","SROPCE1",47,0)
 .R !!,"Update all 'OTHER POSTOP DIAGNOSIS' Eligibility and",!,"Service Connected Conditions with these values?  Enter YES or NO. <NO>",Z:DTIME S:'$T Z=""
"RTN","SROPCE1",48,0)
 .D:(Z["Y")!(Z["y") UPDSC
"RTN","SROPCE1",49,0)
 .I Z["?" D  G UPDX
"RTN","SROPCE1",50,0)
 ..W !!,"Associate all of the existing OTHER POSTOP DIAGNOSIS for this surgical case with the new Eligibility and Service Connected Conditions?"
"RTN","SROPCE1",51,0)
 ..W !,"To edit diagnoses classification status individually, please use the Physician's Verification or the CPT/ICD9 Coding screens"
"RTN","SROPCE1",52,0)
END K DA,DIE,DR,SRZ,X,Y I 'SRQ,'$D(SRREQ),'$D(SRWLST) D PRESS
"RTN","SROPCE1",53,0)
 Q
"RTN","SROPCE1",54,0)
SC S DIR("A")="Treatment related to Service Connected condition (Y/N)",DIR(0)=$S($D(SRWLST):"133.801,16",1:"130,.016") D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROPCE1",55,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G SC
"RTN","SROPCE1",56,0)
 S SRCL(3)=Y,SRDR=$G(SRDR)_$S($D(SRWLST):"16",1:".016")_"////"_SRCL(3)_";"
"RTN","SROPCE1",57,0)
 S SRCL(3,"UPDATE")=1
"RTN","SROPCE1",58,0)
 Q
"RTN","SROPCE1",59,0)
CV S DIR("A")="Treatment related to Combat (Y/N)",DIR(0)=$S($D(SRWLST):"133.801,23",1:"130,.024") D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROPCE1",60,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G CV
"RTN","SROPCE1",61,0)
 S SRCL(7)=Y,SRDR=SRDR_$S($D(SRWLST):"23",1:".024")_"////"_SRCL(7)_";"
"RTN","SROPCE1",62,0)
 S SRCL(7,"UPDATE")=1
"RTN","SROPCE1",63,0)
 Q
"RTN","SROPCE1",64,0)
AO S DIR("A")="Treatment related to Agent Orange Exposure (Y/N)",DIR(0)=$S($D(SRWLST):"133.801,17",1:"130,.017") D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROPCE1",65,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G AO
"RTN","SROPCE1",66,0)
 S SRCL(1)=Y,SRDR=SRDR_$S($D(SRWLST):"17",1:".017")_"////"_SRCL(1)_";"
"RTN","SROPCE1",67,0)
 S SRCL(1,"UPDATE")=1
"RTN","SROPCE1",68,0)
 Q
"RTN","SROPCE1",69,0)
IR S DIR("A")="Treatment related to Ionizing Radiation Exposure (Y/N)",DIR(0)=$S($D(SRWLST):"133.801,18",1:"130,.018") D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROPCE1",70,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G IR
"RTN","SROPCE1",71,0)
 S SRCL(2)=Y,SRDR=SRDR_$S($D(SRWLST):"18",1:".018")_"////"_SRCL(2)_";"
"RTN","SROPCE1",72,0)
 S SRCL(2,"UPDATE")=1
"RTN","SROPCE1",73,0)
 Q
"RTN","SROPCE1",74,0)
EC S DIR("A")="Treatment related to Environmental Contaminant Exposure (Y/N)",DIR(0)=$S($D(SRWLST):"133.801,19",1:"130,.019") D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROPCE1",75,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G EC
"RTN","SROPCE1",76,0)
 S SRCL(4)=Y,SRDR=SRDR_$S($D(SRWLST):"19",1:".019")_"////"_SRCL(4)_";"
"RTN","SROPCE1",77,0)
 S SRCL(4,"UPDATE")=1
"RTN","SROPCE1",78,0)
 Q
"RTN","SROPCE1",79,0)
PRJ S DIR("A")="Treatment related to PROJ 112/SHAD (Y/N)",DIR(0)=$S($D(SRWLST):"133.801,24",1:"130,.026") D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROPCE1",80,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G PRJ
"RTN","SROPCE1",81,0)
 S SRCL(8)=Y,SRDR=SRDR_$S($D(SRWLST):"24",1:".026")_"////"_SRCL(8)_";"
"RTN","SROPCE1",82,0)
 S SRCL(8,"UPDATE")=1
"RTN","SROPCE1",83,0)
 Q
"RTN","SROPCE1",84,0)
MST S DIR("A")="Treatment related to Military Sexual Trauma (Y/N)",DIR(0)=$S($D(SRWLST):"133.801,21",1:"130,.022") D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROPCE1",85,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G MST
"RTN","SROPCE1",86,0)
 S SRCL(5)=Y,SRDR=SRDR_$S($D(SRWLST):"21",1:".022")_"////"_SRCL(5)_";"
"RTN","SROPCE1",87,0)
 S SRCL(5,"UPDATE")=1
"RTN","SROPCE1",88,0)
 Q
"RTN","SROPCE1",89,0)
HNC S DIR("A")="Treatment related to Head and/or Neck Cancer (Y/N)",DIR(0)=$S($D(SRWLST):"133.801,22",1:"130,.023") D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROPCE1",90,0)
 I X=""!(X="@") W !,$C(7),?15,"Enter YES or NO." G HNC
"RTN","SROPCE1",91,0)
 S SRCL(6)=Y,SRDR=SRDR_$S($D(SRWLST):"22",1:".023")_"////"_SRCL(6)_";"
"RTN","SROPCE1",92,0)
 S SRCL(6,"UPDATE")=1
"RTN","SROPCE1",93,0)
 Q
"RTN","SROPCE1",94,0)
WL ; entry from waiting list
"RTN","SROPCE1",95,0)
 N SRWLST S SRWLST=1 G EN1
"RTN","SROPCE1",96,0)
 Q
"RTN","SROPCE1",97,0)
REQ ; entry from new request entry
"RTN","SROPCE1",98,0)
 N SRREQ S SRREQ=1 G EN1
"RTN","SROPCE1",99,0)
PRESS W ! K DIR S DIR("A")="Press RETURN to continue  ",DIR(0)="FOA" D ^DIR K DIR W @IOF
"RTN","SROPCE1",100,0)
 Q
"RTN","SROPCE1",101,0)
UPDSC ;Update existing DX to Service Connected/Environmental Indicators associations.
"RTN","SROPCE1",102,0)
 K DA,DIE
"RTN","SROPCE1",103,0)
 S (DA,I)=0,DA(1)=SRTN,DIE="^SRF("_SRTN_",15,"
"RTN","SROPCE1",104,0)
 K DR
"RTN","SROPCE1",105,0)
 D:$D(SRCL(1,"UPDATE")) BLDDR(5,SRCL(1))
"RTN","SROPCE1",106,0)
 D:$D(SRCL(2,"UPDATE")) BLDDR(6,SRCL(2))
"RTN","SROPCE1",107,0)
 D:$D(SRCL(3,"UPDATE")) BLDDR(4,SRCL(3))
"RTN","SROPCE1",108,0)
 D:$D(SRCL(4,"UPDATE")) BLDDR(9,SRCL(4))
"RTN","SROPCE1",109,0)
 D:$D(SRCL(5,"UPDATE")) BLDDR(7,SRCL(5))
"RTN","SROPCE1",110,0)
 D:$D(SRCL(6,"UPDATE")) BLDDR(8,SRCL(6))
"RTN","SROPCE1",111,0)
 D:$D(SRCL(7,"UPDATE")) BLDDR(10,SRCL(7))
"RTN","SROPCE1",112,0)
 D:$D(SRCL(8,"UPDATE")) BLDDR(11,SRCL(8))
"RTN","SROPCE1",113,0)
 F I=1:1 S DA=$O(^SRF(SRTN,15,DA)) Q:DA=""  D ^DIE
"RTN","SROPCE1",114,0)
 Q
"RTN","SROPCE1",115,0)
BLDDR(DXPIECE,NEWSC) ;Build the DR string for updating DX/Service Indicators associations
"RTN","SROPCE1",116,0)
 S:$D(DR) DR=DR_";"
"RTN","SROPCE1",117,0)
 S:'$D(DR) DR=""
"RTN","SROPCE1",118,0)
 S DR=DR_DXPIECE_"///"_NEWSC
"RTN","SROPCE1",119,0)
 K DXPIECE,NEWSC
"RTN","SROPCE1",120,0)
 Q
"RTN","SROPCEP")
0^7^B73728943^B74884918
"RTN","SROPCEP",1,0)
SROPCEP ;BIR/TJH - PCE UPDATES ;04/26/05  9:28 AM
"RTN","SROPCEP",2,0)
 ;;3.0; Surgery ;**142,152**;24 Jun 93
"RTN","SROPCEP",3,0)
 ;
"RTN","SROPCEP",4,0)
 ; Reference to $$DATA2PCE^PXAPI supported by DBIA #1889
"RTN","SROPCEP",5,0)
 ; Reference to $$DELVFILE^PXAPI supported by DBIA #1890
"RTN","SROPCEP",6,0)
 ;
"RTN","SROPCEP",7,0)
 Q
"RTN","SROPCEP",8,0)
START ; entry for update to PCE with surgery & non-OR procedure data
"RTN","SROPCEP",9,0)
 I '$D(SRTN) S SRTN=$G(DA)
"RTN","SROPCEP",10,0)
 I SRTN="" Q
"RTN","SROPCEP",11,0)
 N DFN,SR,SRAO,SRATT,SRCHK,SRCPT,SRDATE,SRDIAG,SREC,SRHNC,SRIR,SRCV,SRPRJ,SRK,SRLOC,SRMST,SRNON,SROTH,SRPKG,SRPROV,SRS,SRSC,SRV,SRVSIT,SRX,SRX2
"RTN","SROPCEP",12,0)
 N SRPLSC,SRPLAO,SRPLIR,SRPLEC,SRPLMST,SRPLHNC,SRPLCV,SRPLPRJ,SRADX,SRCNT,SRD,SRDX,SRRPROV,SRUP,SRINOUT,SRO
"RTN","SROPCEP",13,0)
 N SRDP,SRDC,SRDI,SRDL,SRDIE,SRDG,SRDM,SRDR,SRDH,SRDK,SRDA,SRD0,SRDDER,SRDG,SRDIC,SRDIC1,SRDICRRE,SRDIEDA,SRDIG,SRDIH,SRDIIENS,SRDISL,SRDISYS,SRDIU,SRDIV,SRDIWT,SRDN,SRDQ,SRDX,SRDY
"RTN","SROPCEP",14,0)
 D FM1 K DIC S DIC=9.4,DIC(0)="XM",X="SURGERY" D ^DIC K DIC D FM2 Q:Y=-1  S SRPKG=+Y
"RTN","SROPCEP",15,0)
 S SRS="SURGERY DATA" K ^TMP("SRPXAPI",$J)
"RTN","SROPCEP",16,0)
 D UTIL I 'SRK D PCE
"RTN","SROPCEP",17,0)
 Q
"RTN","SROPCEP",18,0)
DEL ; delete data from the Visit file and V files
"RTN","SROPCEP",19,0)
 D FM1 K DA,DIE,DR S DA=SRTN,DIE=130,DR=".015///@" D ^DIE K DA,DIE,DR D FM2
"RTN","SROPCEP",20,0)
 D FM1 S SRV=$$DELVFILE^PXAPI("ALL",SRVSIT) K SRVSIT D FM2
"RTN","SROPCEP",21,0)
 Q
"RTN","SROPCEP",22,0)
UTIL ; set procedure variables
"RTN","SROPCEP",23,0)
 N SRDIV,SRSITE,SRSR
"RTN","SROPCEP",24,0)
 S SRSR="",SRK=0,SRDIV=$P($G(^SRF(SRTN,8)),"^") I SRDIV S SRSITE=$O(^SRO(133,"B",SRDIV,0)),X=^SRO(133,SRSITE,0),SRUP=$P(X,"^",15),SRSR=$P(X,"^",19) I SRUP=""!(SRUP="N") S SRK=1 Q
"RTN","SROPCEP",25,0)
 S SRX=$P($G(^SRF(SRTN,0)),"^",15) I SRX S SRVSIT=SRX D DEL I '$D(^SRF(SRTN,0)) S SRK=1 Q
"RTN","SROPCEP",26,0)
 S SR(0)=$G(^SRF(SRTN,0)) I SR(0)=""!$P($G(^SRF(SRTN,30)),"^") S SRK=1 Q
"RTN","SROPCEP",27,0)
 S DFN=$P(SR(0),"^")
"RTN","SROPCEP",28,0)
 S SRNON=$S($P($G(^SRF(SRTN,"NON")),"^")="Y":1,1:0),SRCPT=$P($G(^SRO(136,SRTN,0)),"^",2) I 'SRCPT S SRK=1 Q
"RTN","SROPCEP",29,0)
 Q:SRK  S SRDIAG=$P($G(^SRO(136,SRTN,0)),"^",3) I 'SRDIAG S SRK=1 Q
"RTN","SROPCEP",30,0)
 I 'SRNON D  I SRK Q
"RTN","SROPCEP",31,0)
 .S SRX=$P(SR(0),"^",21) I SRX S SRLOC=SRX
"RTN","SROPCEP",32,0)
 .I 'SRX S SRX=$P(^SRO(137.45,$P(SR(0),"^",4),0),"^",5) I SRX S SRLOC=SRX
"RTN","SROPCEP",33,0)
 .I 'SRX S SRX=$P(SR(0),"^",2) S:SRX SRLOC=$P(^SRS(SRX,0),"^") I 'SRX S SRK=1 Q
"RTN","SROPCEP",34,0)
 .S SRX=$G(^SRF(SRTN,.2)),SRCHK=$P(SRX,"^",12) I 'SRCHK S SRK=1 Q
"RTN","SROPCEP",35,0)
 .S SRDATE=$P(SRX,"^",10) I 'SRDATE S SRK=1 Q
"RTN","SROPCEP",36,0)
 .S SRX=$G(^SRF(SRTN,.1)),SRPROV=$P(SRX,"^",4),SRATT=$P(SRX,"^",13) I 'SRPROV S SRK=1 Q
"RTN","SROPCEP",37,0)
 .I SRSR'=0,'SRATT S SRK=1 Q
"RTN","SROPCEP",38,0)
 I SRNON D  I SRK Q
"RTN","SROPCEP",39,0)
 .S SRLOC=$P(SR(0),"^",21)
"RTN","SROPCEP",40,0)
 .S SRX=^SRF(SRTN,"NON"),SRCHK=$P(SRX,"^",5) I 'SRCHK S SRK=1 Q
"RTN","SROPCEP",41,0)
 .S SRDATE=$P(SRX,"^",4) I 'SRDATE S SRK=1 Q
"RTN","SROPCEP",42,0)
 .I 'SRLOC S SRLOC=$P(SRX,"^",2) I 'SRLOC S SRK=1 Q
"RTN","SROPCEP",43,0)
 .S SRPROV=$P(SRX,"^",6),SRATT=$P(SRX,"^",7) I 'SRPROV S SRK=1
"RTN","SROPCEP",44,0)
 .I SRSR'=0,'SRATT S SRK=1
"RTN","SROPCEP",45,0)
 S VAINDT=SRDATE
"RTN","SROPCEP",46,0)
 D INP^VADPT
"RTN","SROPCEP",47,0)
 I VAIN(1) S SRINOUT="I"
"RTN","SROPCEP",48,0)
 I 'VAIN(1) S SRINOUT="O"
"RTN","SROPCEP",49,0)
 K VAINDT,VAIN
"RTN","SROPCEP",50,0)
 I '$$CLINIC^SROUTL(SRLOC,SRTN) S SRK=1 Q
"RTN","SROPCEP",51,0)
 S SRX=0,SRX=$O(^SRO(136,SRTN,2,SRX)) I SRX="" S SRK=1 Q
"RTN","SROPCEP",52,0)
 S SRX=0 F  S SRX=$O(^SRO(136,SRTN,3,SRX)) Q:'SRX  S SRX2=0,SRX2=$O(^SRO(136,SRTN,3,SRX,2,SRX2)) I $D(^SRO(136,SRTN,3,SRX,0)),(SRX2="") S SRK=1  Q:SRK
"RTN","SROPCEP",53,0)
 S SRRPROV="" I $D(^SRF(SRTN,18)) S SRX=0,SRX=$O(^SRF(SRTN,18,SRX)) I SRX S SRRPROV=$P($G(^SRF(SRTN,18,SRX,0)),"^",7)
"RTN","SROPCEP",54,0)
 S SRO(0)=$G(^SRO(136,SRTN,0))
"RTN","SROPCEP",55,0)
 S (SRSC,SRAO,SREC,SRHNC,SRIR,SRMST,SRCV,SRPRJ)=0,SRSC=$P(SRO(0),"^",4),SRAO=$P(SRO(0),"^",5),SRIR=$P(SRO(0),"^",6),SREC=$P(SRO(0),"^",7),SRMST=$P(SRO(0),"^",8),SRHNC=$P(SRO(0),"^",9),SRCV=$P(SRO(0),"^",10),SRPRJ=$P(SRO(0),"^",11)
"RTN","SROPCEP",56,0)
 Q
"RTN","SROPCEP",57,0)
PCE ;
"RTN","SROPCEP",58,0)
 N SRI,SRJ,SRCODE,SROTH D TMP
"RTN","SROPCEP",59,0)
D2PCE ;
"RTN","SROPCEP",60,0)
 D FM1 S SRV=$$DATA2PCE^PXAPI("^TMP(""SRPXAPI"",$J)",SRPKG,SRS,.SRVSIT) D FM2
"RTN","SROPCEP",61,0)
 I SRVSIT D FM1 K DA,DIE,DR S DA=SRTN,DIE=130,DR=".015////"_SRVSIT D ^DIE K DA,DIE,DR D FM2
"RTN","SROPCEP",62,0)
 K ^TMP("SRPXAPI",$J),SRVSIT
"RTN","SROPCEP",63,0)
 Q
"RTN","SROPCEP",64,0)
TMP ;
"RTN","SROPCEP",65,0)
ENC S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"ENC D/T")=SRDATE
"RTN","SROPCEP",66,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"PATIENT")=DFN
"RTN","SROPCEP",67,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"HOS LOC")=SRLOC
"RTN","SROPCEP",68,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"CHECKOUT D/T")=SRCHK
"RTN","SROPCEP",69,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"SERVICE CATEGORY")="S"
"RTN","SROPCEP",70,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"ENCOUNTER TYPE")="P"
"RTN","SROPCEP",71,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"APPT")=9
"RTN","SROPCEP",72,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"SC")=SRSC
"RTN","SROPCEP",73,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"AO")=SRAO
"RTN","SROPCEP",74,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"IR")=SRIR
"RTN","SROPCEP",75,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"EC")=SREC
"RTN","SROPCEP",76,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"MST")=SRMST
"RTN","SROPCEP",77,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"HNC")=SRHNC
"RTN","SROPCEP",78,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"CV")=SRCV
"RTN","SROPCEP",79,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"SHAD")=SRPRJ
"RTN","SROPCEP",80,0)
PROC S SRI=1,SRCODE=SRCPT D PMOD,CPT
"RTN","SROPCEP",81,0)
 S SROTH=0 F  S SROTH=$O(^SRO(136,SRTN,3,SROTH)) Q:'SROTH  S SRCODE=$P($G(^SRO(136,SRTN,3,SROTH,0)),"^") I SRCODE S SRI=SRI+1 D OMOD,CPT
"RTN","SROPCEP",82,0)
PROV S ^TMP("SRPXAPI",$J,"PROVIDER",1,"NAME")=SRPROV
"RTN","SROPCEP",83,0)
 S ^TMP("SRPXAPI",$J,"PROVIDER",1,"PRIMARY")=1
"RTN","SROPCEP",84,0)
 I 'SRNON S ^TMP("SRPXAPI",$J,"PROVIDER",1,"COMMENT")="Surgeon"
"RTN","SROPCEP",85,0)
 I SRPROV=SRATT!'SRATT S ^TMP("SRPXAPI",$J,"PROVIDER",1,"ATTENDING")=1 G DIAG
"RTN","SROPCEP",86,0)
 I 'SRATT G DIAG
"RTN","SROPCEP",87,0)
 S ^TMP("SRPXAPI",$J,"PROVIDER",2,"NAME")=SRATT
"RTN","SROPCEP",88,0)
 S ^TMP("SRPXAPI",$J,"PROVIDER",2,"ATTENDING")=1
"RTN","SROPCEP",89,0)
 S ^TMP("SRPXAPI",$J,"PROVIDER",2,"PRIMARY")=0
"RTN","SROPCEP",90,0)
 I 'SRNON S ^TMP("SRPXAPI",$J,"PROVIDER",2,"COMMENT")="Attending Surgeon"
"RTN","SROPCEP",91,0)
DIAG S SRI=1,SRDX=SRDIAG D DX
"RTN","SROPCEP",92,0)
 S SRD=0 F  S SRD=$O(^SRO(136,SRTN,4,SRD)) Q:'SRD  S SRDX=$P(^SRO(136,SRTN,4,SRD,0),"^") I SRDX D DX
"RTN","SROPCEP",93,0)
 Q
"RTN","SROPCEP",94,0)
DX S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"DIAGNOSIS")=SRDX
"RTN","SROPCEP",95,0)
 I SRI=1 D
"RTN","SROPCEP",96,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PRIMARY")=1
"RTN","SROPCEP",97,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"ORD/RES")="R"
"RTN","SROPCEP",98,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL SC")=SRSC
"RTN","SROPCEP",99,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL AO")=SRAO
"RTN","SROPCEP",100,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL IR")=SRIR
"RTN","SROPCEP",101,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL EC")=SREC
"RTN","SROPCEP",102,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL MST")=SRMST
"RTN","SROPCEP",103,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL HNC")=SRHNC
"RTN","SROPCEP",104,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL CV")=SRCV
"RTN","SROPCEP",105,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL SHAD")=SRPRJ
"RTN","SROPCEP",106,0)
 I SRI'=1 D
"RTN","SROPCEP",107,0)
 .S SR(4)=$G(^SRO(136,SRTN,4,SRD,0))
"RTN","SROPCEP",108,0)
 .S (SRPLSC,SRPLAO,SRPLIR,SRPLEC,SRPLMST,SRPLHNC,SRPLCV,SRPLPRJ)=0,SRPLSC=$P(SR(4),"^",2),SRPLAO=$P(SR(4),"^",3)
"RTN","SROPCEP",109,0)
 .S SRPLIR=$P(SR(4),"^",4),SRPLMST=$P(SR(4),"^",5),SRPLHNC=$P(SR(4),"^",6),SRPLEC=$P(SR(4),"^",7),SRPLCV=$P(SR(4),"^",8),SRPLPRJ=$P(SR(4),"^",9)
"RTN","SROPCEP",110,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"ORD/RES")="R"
"RTN","SROPCEP",111,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL SC")=SRPLSC
"RTN","SROPCEP",112,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL AO")=SRPLAO
"RTN","SROPCEP",113,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL IR")=SRPLIR
"RTN","SROPCEP",114,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL EC")=SRPLEC
"RTN","SROPCEP",115,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL MST")=SRPLMST
"RTN","SROPCEP",116,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL HNC")=SRPLHNC
"RTN","SROPCEP",117,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL CV")=SRPLCV
"RTN","SROPCEP",118,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL SHAD")=SRPLPRJ
"RTN","SROPCEP",119,0)
 S SRI=SRI+1
"RTN","SROPCEP",120,0)
 Q
"RTN","SROPCEP",121,0)
CPT S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"ENC PROVIDER")=SRPROV
"RTN","SROPCEP",122,0)
 S:SRRPROV'="" ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"ORD PROVIDER")=SRRPROV
"RTN","SROPCEP",123,0)
 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"EVENT D/T")=SRDATE
"RTN","SROPCEP",124,0)
 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"PROCEDURE")=SRCODE
"RTN","SROPCEP",125,0)
 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"QTY")=1
"RTN","SROPCEP",126,0)
 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"COMMENT")=$S(SRI=1:"Principal Procedure",1:"Other Procedure")
"RTN","SROPCEP",127,0)
 I SRI=1 D
"RTN","SROPCEP",128,0)
 .S SRCNT=1,SRX=0 F  S SRX=$O(^SRO(136,SRTN,2,SRX)) Q:'SRX  D
"RTN","SROPCEP",129,0)
 ..S SRADX=$P(^SRO(136,SRTN,2,SRX,0),"^")
"RTN","SROPCEP",130,0)
 ..I SRCNT=1 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS")=SRADX
"RTN","SROPCEP",131,0)
 ..I SRCNT=2 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS 2")=SRADX
"RTN","SROPCEP",132,0)
 ..I SRCNT=3 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS 3")=SRADX
"RTN","SROPCEP",133,0)
 ..I SRCNT=4 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS 4")=SRADX
"RTN","SROPCEP",134,0)
 ..I SRCNT=5 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS 5")=SRADX
"RTN","SROPCEP",135,0)
 ..I SRCNT=6 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS 6")=SRADX
"RTN","SROPCEP",136,0)
 ..I SRCNT=7 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS 7")=SRADX
"RTN","SROPCEP",137,0)
 ..I SRCNT=8 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS 8")=SRADX
"RTN","SROPCEP",138,0)
 ..S SRCNT=SRCNT+1
"RTN","SROPCEP",139,0)
 I SRI'=1 D
"RTN","SROPCEP",140,0)
 .S SRCNT=1,SRX=0 F  S SRX=$O(^SRO(136,SRTN,3,SROTH,2,SRX)) Q:'SRX  D
"RTN","SROPCEP",141,0)
 ..S SRADX=$P(^SRO(136,SRTN,3,SROTH,2,SRX,0),"^")
"RTN","SROPCEP",142,0)
 ..I SRCNT=1 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS")=SRADX
"RTN","SROPCEP",143,0)
 ..I SRCNT=2 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS 2")=SRADX
"RTN","SROPCEP",144,0)
 ..I SRCNT=3 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS 3")=SRADX
"RTN","SROPCEP",145,0)
 ..I SRCNT=4 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS 4")=SRADX
"RTN","SROPCEP",146,0)
 ..I SRCNT=5 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS 5")=SRADX
"RTN","SROPCEP",147,0)
 ..I SRCNT=6 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS 6")=SRADX
"RTN","SROPCEP",148,0)
 ..I SRCNT=7 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS 7")=SRADX
"RTN","SROPCEP",149,0)
 ..I SRCNT=8 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS 8")=SRADX
"RTN","SROPCEP",150,0)
 ..S SRCNT=SRCNT+1
"RTN","SROPCEP",151,0)
 Q
"RTN","SROPCEP",152,0)
PMOD ;
"RTN","SROPCEP",153,0)
 N SRM,SRMOD,X
"RTN","SROPCEP",154,0)
 S SRM=0 F  S SRM=$O(^SRO(136,SRTN,1,SRM)) Q:'SRM  S X=$P(^SRO(136,SRTN,1,SRM,0),"^"),SRMOD=$P($$MOD^ICPTMOD(X,"I"),"^",2),^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"MODIFIERS",SRMOD)=""
"RTN","SROPCEP",155,0)
 Q
"RTN","SROPCEP",156,0)
OMOD ;
"RTN","SROPCEP",157,0)
 N SRM,SRMOD,X
"RTN","SROPCEP",158,0)
 S SRM=0 F  S SRM=$O(^SRO(136,SRTN,3,SROTH,1,SRM)) Q:'SRM  S X=$P(^SRO(136,SRTN,3,SROTH,1,SRM,0),"^"),SRMOD=$P($$MOD^ICPTMOD(X,"I"),"^",2),^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"MODIFIERS",SRMOD)=""
"RTN","SROPCEP",159,0)
 Q
"RTN","SROPCEP",160,0)
FM1 M SRDA=DA,SRDP=DP,SRDC=DC,SRDI=DI,SRDL=DL,SRDIE=DIE,SRDG=DG,SRDM=DM,SRDR=DR,SRDH=DH,SRDK=DK,SRD0=D0,SRDDER=DDER,SRDG=DG,SRDIC=DIC,SRDIC1=DIC1,SRDICRRE=DICRREC
"RTN","SROPCEP",161,0)
 M SRDIEDA=DIEDA,SRDIG=DIG,SRDIH=DIH,SRDIIENS=DIIENS,SRDISL=DISL,SRDISYS=DISYS,SRDIU=DIU,SRDIV=DIV,SRDIWT=DIWT,SRDN=DN,SRDQ=DQ,SRDX=DX,SRDY=DY
"RTN","SROPCEP",162,0)
FM2 M DA=SRDA,DP=SRDP,DC=SRDC,DI=SRDI,DL=SRDL,DIE=SRDIE,DG=SRDG,DM=SRDM,DR=SRDR,DH=SRDH,DK=SRDK,D0=SRD0,DDER=SRDDER,DG=SRDG,DIC=SRDIC,DIC1=SRDIC1,DICRREC=SRDICRRE
"RTN","SROPCEP",163,0)
 M DIEDA=SRDIEDA,DIG=SRDIG,DIH=SRDIH,DIIENS=SRDIIENS,DISL=SRDISL,DISYS=SRDISYS,DIU=SRDIU,DIV=SRDIV,DIWT=SRDIWT,DN=SRDN,DQ=SRDQ,DX=SRDX,DY=SRDY
"RTN","SROVER3")
0^6^B35709215^B34463738
"RTN","SROVER3",1,0)
SROVER3 ;BIR/ADM - Case Coding and Verification ; 8/17/04 4:09pm
"RTN","SROVER3",2,0)
 ;;3.0;Surgery;**86,88,127,119,152**;24 Jun 93
"RTN","SROVER3",3,0)
 ;;
"RTN","SROVER3",4,0)
 ; Reference to CL^SDCO21 supported by DBIA #406
"RTN","SROVER3",5,0)
 ;;
"RTN","SROVER3",6,0)
 S SROVER=1,SRAO(1)=26,SRAO(2)=27,SRAO(3)="",SRAO(4)=$S(SRNON:33,1:34),SRAO(5)=66,SRAO(6)="",SRAO(7)=32,SRAO(8)=32.5,SRMSG="NO Assoc. DX ENTERED"
"RTN","SROVER3",7,0)
ASK W ! K DIR S DIR("A")="Select Information to Edit: ",DIR(0)="FOA",DIR("?",1)="Enter the number corresponding to the information you want to update.  You may"
"RTN","SROVER3",8,0)
 S DIR("?",2)="enter 'ALL' to update all the information displayed on this screen, or a",DIR("?")="range of numbers separated by a ':' to update more than one item." D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROVER3",9,0)
 I X="" S SREDIT=1 Q
"RTN","SROVER3",10,0)
 S:$E(X)="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),($E(X)'="A") D HELP Q:SRSOUT  G ASK
"RTN","SROVER3",11,0)
 I $E(X)="A" S X="1:8"
"RTN","SROVER3",12,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>8)!(Y>Z) D HELP Q:SRSOUT  G ASK
"RTN","SROVER3",13,0)
 D HDR^SROVER2 I X?.N1":".N D RANGE Q
"RTN","SROVER3",14,0)
 S EMILY=X D ONE Q
"RTN","SROVER3",15,0)
 Q
"RTN","SROVER3",16,0)
HELP W !!,"Enter the number corresponding to the information you want to update.  You may",!,"enter 'ALL' to update all the information displayed on this screen, or a"
"RTN","SROVER3",17,0)
 W !,"range of numbers separated by a ':' to update more than one item."
"RTN","SROVER3",18,0)
 Q
"RTN","SROVER3",19,0)
PRESS W ! K DIR S DIR("A")="Press RETURN to continue ",DIR(0)="FOA" D ^DIR K DIR
"RTN","SROVER3",20,0)
 Q
"RTN","SROVER3",21,0)
RANGE ; range of numbers
"RTN","SROVER3",22,0)
 S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  W ! D ONE
"RTN","SROVER3",23,0)
 Q
"RTN","SROVER3",24,0)
ONE ; edit one item
"RTN","SROVER3",25,0)
 I EMILY=3 D POTH Q
"RTN","SROVER3",26,0)
 I EMILY=6 D DOTH Q
"RTN","SROVER3",27,0)
 W ! K DR,DIE,DA S DIE=130,DA=SRTN,DR=SRAO(EMILY)_"T" D ^DIE K DR,DIE I $D(Y) S SRSOUT=1
"RTN","SROVER3",28,0)
 I EMILY=4&($$SCEC()) D ASK^SROPCE1 K SRCL
"RTN","SROVER3",29,0)
 I EMILY=2 D CASDX^SROADX
"RTN","SROVER3",30,0)
 Q
"RTN","SROVER3",31,0)
POTH W !,"Other Procedures:",!
"RTN","SROVER3",32,0)
 N SRSHT K SRSEL S CNT=1,OTH=0 F  S OTH=$O(^SRF(SRTN,13,OTH)) Q:'OTH!(SRSOUT)  D
"RTN","SROVER3",33,0)
 .S OTHER=$P(^SRF(SRTN,13,OTH,0),U),X=$P($G(^SRF(SRTN,13,OTH,2)),U),CPT="NOT ENTERED",CPT1=""
"RTN","SROVER3",34,0)
 .I X S CPT1=X,Y=$$CPT^ICPTCOD(X,$P($G(^SRF(SRTN,0)),"^",9)),SRCPT=$P(Y,U,2),SRSHT=$P(Y,U,3),Y=SRCPT,SRDA=OTH D SSOTH^SROCPT S SRCPT=Y,CPT=SRCPT_"  "_SRSHT
"RTN","SROVER3",35,0)
 .W !,CNT_". "_OTHER
"RTN","SROVER3",36,0)
 .W !,?5,"CPT Code: "_CPT
"RTN","SROVER3",37,0)
 .S SRSEL(CNT)=OTH_"^"_OTHER_"^CPT Code: "_CPT_"^"_CPT1
"RTN","SROVER3",38,0)
 .D OTHADXD^SROADX1
"RTN","SROVER3",39,0)
 .S CNT=CNT+1
"RTN","SROVER3",40,0)
 W !,CNT_". Enter NEW Other Procedure",! K DIR S DIR("A")="Enter selection",DIR(0)="NO^1:"_CNT D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROVER3",41,0)
 Q:'Y  S SRDA=Y W !! I SRDA<CNT D  G PH
"RTN","SROVER3",42,0)
 .D HDR^SROVER2
"RTN","SROVER3",43,0)
 .W !,"Other Procedures:",!
"RTN","SROVER3",44,0)
 .W !,SRDA,"."
"RTN","SROVER3",45,0)
 .W ?3,$P(SRSEL(SRDA),U,2),!,?5,$P(SRSEL(SRDA),U,3)
"RTN","SROVER3",46,0)
 .S OTH=$P(SRSEL(SRDA),U) K SRDES S CPT1=$P(SRSEL(SRDA),U,4),X=$$CPTD^ICPTCOD(CPT1,"SRDES",,$P($G(^SRF(SRTN,0)),"^",9)) I $O(SRDES(0)) F I=1:1:X W !,?5,SRDES(I)
"RTN","SROVER3",47,0)
 .K DA,DIE,DIR,DR W ! S DA=$P(SRSEL(SRDA),U),DA(1)=SRTN,DIE="^SRF(SRTN,13,",DR=".01;3" D ^DIE D:$D(DA) COTHADX^SROADX K DA,DIE,DR Q:$D(Y)  D PRESS
"RTN","SROVER3",48,0)
 K DIR S DIR("A")="Enter new OTHER PROCEDURE",DIR(0)="130.16,.01" D ^DIR K DIR S SRNEW=Y I $D(DTOUT)!$D(DUOUT)!(Y="") G PH
"RTN","SROVER3",49,0)
 K DD,DO S DIC="^SRF(SRTN,13,",X=SRNEW,DIC(0)="L",DIC("P")=$P(^DD(130,.42,0),U,2) D FILE^DICN K DIC,DD,DO I +Y<0 Q
"RTN","SROVER3",50,0)
 K DA,DIE,DIR,DR S DA=+Y,DA(1)=SRTN,DIE="^SRF(SRTN,13,",DR="3" D ^DIE K DA,DIE,DR Q:$D(Y)  S SRDA=CNT,OTHER=SRNEW D COTHADX^SROADX D PRESS
"RTN","SROVER3",51,0)
PH D HDR^SROVER2 D POTH
"RTN","SROVER3",52,0)
 Q
"RTN","SROVER3",53,0)
DOTH W !,"Other Postop Diagnosis:",!
"RTN","SROVER3",54,0)
 N SCEC,ENVARR S SCEC=$$SCEC()
"RTN","SROVER3",55,0)
 K SRSEL S CNT=1,OTH=0 F  S OTH=$O(^SRF(SRTN,15,OTH)) Q:'OTH!(SRSOUT)  D
"RTN","SROVER3",56,0)
 .S OTHER=$P(^SRF(SRTN,15,OTH,0),U),X=$P($G(^SRF(SRTN,15,OTH,0)),U,3),SRDIAG="NOT ENTERED"
"RTN","SROVER3",57,0)
 .I X S Y=$$ICDDX^ICDCODE(X,$P($G(^SRF(SRTN,9)),"^",9)),SRNUM=$P(Y,U,2),SRDES=$P(Y,U,4),SRDIAG=SRNUM_"  "_SRDES
"RTN","SROVER3",58,0)
 .W !,CNT_". "_OTHER,!,?5,"ICD9 Code: "_SRDIAG S SRSEL(CNT)=OTH_"^"_OTHER_"^ICD9 Code: "_SRDIAG
"RTN","SROVER3",59,0)
 .D:SCEC
"RTN","SROVER3",60,0)
 ..D GETS^DIQ(130.18,OTH_","_SRTN_",","4:11","E","ENVARR")
"RTN","SROVER3",61,0)
 ..I $D(ENVARR(130.18,OTH_","_SRTN_",",4,"E")) D
"RTN","SROVER3",62,0)
 ...N SRCOLSPN S SRCOLSPN=13 W !
"RTN","SROVER3",63,0)
 ...I $D(SRCL(3)) W ?SRCOLSPN,"SC:",$E(ENVARR(130.18,OTH_","_SRTN_",",4,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROVER3",64,0)
 ...I $D(SRCL(7)) W ?SRCOLSPN,"CV:",$E(ENVARR(130.18,OTH_","_SRTN_",",10,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROVER3",65,0)
 ...I $D(SRCL(1)) W ?SRCOLSPN,"AO:",$E(ENVARR(130.18,OTH_","_SRTN_",",5,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROVER3",66,0)
 ...I $D(SRCL(2)) W ?SRCOLSPN,"IR:",$E(ENVARR(130.18,OTH_","_SRTN_",",6,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROVER3",67,0)
 ...I $D(SRCL(4)) W ?SRCOLSPN,"EC:",$E(ENVARR(130.18,OTH_","_SRTN_",",9,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROVER3",68,0)
 ...I $D(SRCL(8)) W ?SRCOLSPN,"SHAD:",$E(ENVARR(130.18,OTH_","_SRTN_",",11,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROVER3",69,0)
 ...I $D(SRCL(5)) W ?SRCOLSPN,"MST:",$E(ENVARR(130.18,OTH_","_SRTN_",",7,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROVER3",70,0)
 ...I $D(SRCL(6)) W ?SRCOLSPN,"H&N:",$E(ENVARR(130.18,OTH_","_SRTN_",",8,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROVER3",71,0)
 .S CNT=CNT+1
"RTN","SROVER3",72,0)
 W !,CNT_". Enter NEW Other Postop Diagnosis",! K DIR S DIR("A")="Enter selection",DIR(0)="NO^1:"_CNT D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROVER3",73,0)
 Q:'Y  S SRDA=Y W !! I SRDA<CNT D  G DH
"RTN","SROVER3",74,0)
 .W ?3,$P(SRSEL(SRDA),U,2),!,?5,$P(SRSEL(SRDA),U,3)
"RTN","SROVER3",75,0)
 .K DA,DIE,DIR S DA=$P(SRSEL(SRDA),U),DA(1)=SRTN,DIE="^SRF(SRTN,15,",DR=".01;3;"
"RTN","SROVER3",76,0)
 .S:$D(SRCL(3)) DR=DR_"4;" S:$D(SRCL(7)) DR=DR_"10;" S:$D(SRCL(1)) DR=DR_"5;" S:$D(SRCL(2)) DR=DR_"6;" S:$D(SRCL(4)) DR=DR_"9;" S:$D(SRCL(5)) DR=DR_"7;" S:$D(SRCL(6)) DR=DR_"8;" S:$D(SRCL(8)) DR=DR_"11;"
"RTN","SROVER3",77,0)
 .D ^DIE K DA,DIE,DIR,DR
"RTN","SROVER3",78,0)
 K DIR,SRCL S DIR("A")="Enter new OTHER POSTOP DIAGNOSIS",DIR(0)="130.18,.01" D ^DIR K DIR S SRNEW=Y I $D(DTOUT)!$D(DUOUT)!(Y="") G DH
"RTN","SROVER3",79,0)
 S DIR(0)="130.18,3" D ^DIR K DIR S SRCODE=$P(Y,U) I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROVER3",80,0)
 S:'$D(DA(1)) DA(1)=SRTN
"RTN","SROVER3",81,0)
 S SRCODE=Y K DD,DO S DIC="^SRF(SRTN,15,",X=SRNEW,DIC(0)="L",DIC("DR")="3////"_$P(SRCODE,U),DIC("P")=$P(^DD(130,.74,0),U,2) D FILE^DICN K DA,DD,DIC,DO,DR
"RTN","SROVER3",82,0)
DH D HDR^SROVER2 D DOTH
"RTN","SROVER3",83,0)
 Q
"RTN","SROVER3",84,0)
SCEC() N SRSDATE,DFN,SCEC S SRSDATE=$S($D(SRTN):$P(^SRF(SRTN,0),U,9),1:DT)
"RTN","SROVER3",85,0)
 S DFN=$P(^SRF(SRTN,0),U) D CL^SDCO21(DFN,SRSDATE,,.SRCL)
"RTN","SROVER3",86,0)
 S SCEC=$S($D(SRCL):1,1:0)
"RTN","SROVER3",87,0)
 Q SCEC
"UP",130,130.18,-1)
130^15
"UP",130,130.18,0)
130.18
"UP",133.8,133.801,-1)
133.8^1
"UP",133.8,133.801,0)
133.801
"UP",136,136.04,-1)
136^4
"UP",136,136.04,0)
136.04
"VER")
8.0^22.0
"^DD",130,130,.026,0)
PROJ 112/SHAD^S^1:YES;0:NO;^0;25^Q
"^DD",130,130,.026,1,0)
^.1
"^DD",130,130,.026,1,1,0)
130^APCE28^MUMPS
"^DD",130,130,.026,1,1,1)
D APCE^SROPCEX
"^DD",130,130,.026,1,1,2)
Q
"^DD",130,130,.026,1,1,"%D",0)
^^1^1^3051117^
"^DD",130,130,.026,1,1,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.026,1,1,"DT")
3051117
"^DD",130,130,.026,3)
If this case is treating a problem related to PROJ 112/SHAD, enter YES.
"^DD",130,130,.026,21,0)
^.001^4^4^3051213^^^^
"^DD",130,130,.026,21,1,0)
This field will be used to indicate if this surgery or non-OR procedure 
"^DD",130,130,.026,21,2,0)
is treating a VA patient for a problem that is related to PROJ 112/SHAD.  
"^DD",130,130,.026,21,3,0)
This information may be passed to the VISIT file (#9000010) for use by 
"^DD",130,130,.026,21,4,0)
PCE.
"^DD",130,130,.026,"DT")
3051117
"^DD",130,130,.74,0)
OTHER POSTOP DIAGS^130.18A^^15;0
"^DD",130,130,.74,.1)
Other Postoperative Diagnosis
"^DD",130,130,.74,21,0)
^.001^3^3^3051117^^^^
"^DD",130,130,.74,21,1,0)
This is information related to any postoperative diagnosis in addition
"^DD",130,130,.74,21,2,0)
to the principal postoperative diagnosis.
"^DD",130,130,.74,21,3,0)
 
"^DD",130,130,.74,"DT")
2921026
"^DD",130,130.18,0)
OTHER POSTOP DIAGS SUB-FIELD^NL^11^12
"^DD",130,130.18,0,"NM","OTHER POSTOP DIAGS")

"^DD",130,130.18,.01,0)
OTHER POSTOP DIAGS^MFX^^0;1^K:$L(X)>40!($L(X)<1) X D:$D(X) DIAG^SROUTL,PDXCHK^SROADX2(0) K:$G(X)="" X
"^DD",130,130.18,.01,.1)
Other Postoperative Diagnosis
"^DD",130,130.18,.01,1,0)
^.1
"^DD",130,130.18,.01,1,1,0)
^^TRIGGER^130.18^4
"^DD",130,130.18,.01,1,1,1)
X ^DD(130.18,.01,1,1,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,1),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,16) X ^DD(130.18,.01,1,1,1.4)
"^DD",130,130.18,.01,1,1,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,4,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,1)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,1,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,1)=DIV,DIH=130.18,DIG=4 D ^DICR
"^DD",130,130.18,.01,1,1,2)
Q
"^DD",130,130.18,.01,1,1,"CREATE CONDITION")
SERVICE CONNECTED=""
"^DD",130,130.18,.01,1,1,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,16)
"^DD",130,130.18,.01,1,1,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,1,"DT")
3030707
"^DD",130,130.18,.01,1,1,"FIELD")
SERVICE CONNECTED
"^DD",130,130.18,.01,1,2,0)
^^TRIGGER^130.18^10
"^DD",130,130.18,.01,1,2,1)
X ^DD(130.18,.01,1,2,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,7),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,24) X ^DD(130.18,.01,1,2,1.4)
"^DD",130,130.18,.01,1,2,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,10,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,7)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,2,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,7)=DIV,DIH=130.18,DIG=10 D ^DICR
"^DD",130,130.18,.01,1,2,2)
Q
"^DD",130,130.18,.01,1,2,"CREATE CONDITION")
COMBAT VET=""
"^DD",130,130.18,.01,1,2,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,24)
"^DD",130,130.18,.01,1,2,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,2,"DT")
3040318
"^DD",130,130.18,.01,1,2,"FIELD")
COMBAT VET
"^DD",130,130.18,.01,1,3,0)
^^TRIGGER^130.18^5
"^DD",130,130.18,.01,1,3,1)
X ^DD(130.18,.01,1,3,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,17) X ^DD(130.18,.01,1,3,1.4)
"^DD",130,130.18,.01,1,3,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,5,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,2)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,3,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,2)=DIV,DIH=130.18,DIG=5 D ^DICR
"^DD",130,130.18,.01,1,3,2)
Q
"^DD",130,130.18,.01,1,3,"CREATE CONDITION")
AGENT ORANGE=""
"^DD",130,130.18,.01,1,3,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,17)
"^DD",130,130.18,.01,1,3,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,3,"DT")
3051117
"^DD",130,130.18,.01,1,3,"FIELD")
AGENT
"^DD",130,130.18,.01,1,4,0)
^^TRIGGER^130.18^6
"^DD",130,130.18,.01,1,4,1)
X ^DD(130.18,.01,1,4,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,3),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,18) X ^DD(130.18,.01,1,4,1.4)
"^DD",130,130.18,.01,1,4,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,6,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,3)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,4,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,3)=DIV,DIH=130.18,DIG=6 D ^DICR
"^DD",130,130.18,.01,1,4,2)
Q
"^DD",130,130.18,.01,1,4,"CREATE CONDITION")
IONIZING RADIATION EXPOSURE=""
"^DD",130,130.18,.01,1,4,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,18)
"^DD",130,130.18,.01,1,4,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,4,"DT")
3051117
"^DD",130,130.18,.01,1,4,"FIELD")
IONIZI
"^DD",130,130.18,.01,1,5,0)
^^TRIGGER^130.18^9
"^DD",130,130.18,.01,1,5,1)
X ^DD(130.18,.01,1,5,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,6),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,19) X ^DD(130.18,.01,1,5,1.4)
"^DD",130,130.18,.01,1,5,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,9,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,6)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,5,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,6)=DIV,DIH=130.18,DIG=9 D ^DICR
"^DD",130,130.18,.01,1,5,2)
Q
"^DD",130,130.18,.01,1,5,"CREATE CONDITION")
ENVIRONMENTAL CONTAMINANTS=""
"^DD",130,130.18,.01,1,5,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,19)
"^DD",130,130.18,.01,1,5,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,5,"DT")
3051117
"^DD",130,130.18,.01,1,5,"FIELD")
ENVI
"^DD",130,130.18,.01,1,6,0)
^^TRIGGER^130.18^7
"^DD",130,130.18,.01,1,6,1)
X ^DD(130.18,.01,1,6,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,4),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,22) X ^DD(130.18,.01,1,6,1.4)
"^DD",130,130.18,.01,1,6,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,7,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,4)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,6,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,4)=DIV,DIH=130.18,DIG=7 D ^DICR
"^DD",130,130.18,.01,1,6,2)
Q
"^DD",130,130.18,.01,1,6,"CREATE CONDITION")
MILITARY SEXUAL TRAUMA=""
"^DD",130,130.18,.01,1,6,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,22)
"^DD",130,130.18,.01,1,6,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,6,"DT")
3051117
"^DD",130,130.18,.01,1,6,"FIELD")
MILITARY
"^DD",130,130.18,.01,1,7,0)
^^TRIGGER^130.18^8
"^DD",130,130.18,.01,1,7,1)
X ^DD(130.18,.01,1,7,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,5),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,23) X ^DD(130.18,.01,1,7,1.4)
"^DD",130,130.18,.01,1,7,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,8,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,5)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,7,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,5)=DIV,DIH=130.18,DIG=8 D ^DICR
"^DD",130,130.18,.01,1,7,2)
Q
"^DD",130,130.18,.01,1,7,"CREATE CONDITION")
HEAD AND/OR NECK CANCER=""
"^DD",130,130.18,.01,1,7,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,23)
"^DD",130,130.18,.01,1,7,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,7,"DT")
3051117
"^DD",130,130.18,.01,1,7,"FIELD")
HEAD
"^DD",130,130.18,.01,1,8,0)
^^TRIGGER^130.18^11
"^DD",130,130.18,.01,1,8,1)
X ^DD(130.18,.01,1,8,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,8),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,25) X ^DD(130.18,.01,1,8,1.4)
"^DD",130,130.18,.01,1,8,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,11,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,8)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,8,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,8)=DIV,DIH=130.18,DIG=11 D ^DICR
"^DD",130,130.18,.01,1,8,2)
Q
"^DD",130,130.18,.01,1,8,"CREATE CONDITION")
PROJ 112=""
"^DD",130,130.18,.01,1,8,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,25)
"^DD",130,130.18,.01,1,8,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,8,"DT")
3051117
"^DD",130,130.18,.01,1,8,"FIELD")
PRO
"^DD",130,130.18,.01,1,9,0)
130.18^DADX1^MUMPS
"^DD",130,130.18,.01,1,9,1)
Q
"^DD",130,130.18,.01,1,9,2)
D DELASOC^SROADX2
"^DD",130,130.18,.01,1,9,"%D",0)
^^2^2^3051117^
"^DD",130,130.18,.01,1,9,"%D",1,0)
This MUMPS cross reference removes associations to procedures upon edits 
"^DD",130,130.18,.01,1,9,"%D",2,0)
or deletes of the diagnosis.
"^DD",130,130.18,.01,1,9,"DT")
3051117
"^DD",130,130.18,.01,3)
Your answer must be 1 to 40 characters in length.
"^DD",130,130.18,.01,21,0)
^.001^3^3^3051117^^^^
"^DD",130,130.18,.01,21,1,0)
This is the name of a postoperative diagnosis other than the principal
"^DD",130,130.18,.01,21,2,0)
postoperative diagnosis.
"^DD",130,130.18,.01,21,3,0)
 
"^DD",130,130.18,.01,"DT")
3051117
"^DD",130,130.18,11,0)
PROJ 112/SHAD^RS^0:NO;1:YES;^2;8^Q
"^DD",130,130.18,11,.1)
Treatment related to PROJ 112/SHAD (Y/N)
"^DD",130,130.18,11,3)
If this case is treating a problem related to PROJ 112/SHAD, enter YES.
"^DD",130,130.18,11,5,1,0)
130.18^.01^8
"^DD",130,130.18,11,21,0)
^.001^4^4^3051117^^^^
"^DD",130,130.18,11,21,1,0)
This field will be used to indicate if this surgery or non-OR procedure 
"^DD",130,130.18,11,21,2,0)
is treating a VA patient for a problem that is related to PROJ 112/SHAD.  
"^DD",130,130.18,11,21,3,0)
This information may be passed to the VISIT file (#9000010) for use by 
"^DD",130,130.18,11,21,4,0)
PCE.
"^DD",130,130.18,11,"DT")
3051117
"^DD",133.8,133.801,24,0)
PROJ 112/SHAD^S^1:YES;0:NO;^0;24^Q
"^DD",133.8,133.801,24,.1)
Treatment related to PROJECT 112/SHAD? (Y/N)
"^DD",133.8,133.801,24,3)
If this case is treating a problem related to PROJECT 112/SHAD, enter YES.
"^DD",133.8,133.801,24,21,0)
^.001^4^4^3051117^^
"^DD",133.8,133.801,24,21,1,0)
This field will be used to indicate if this surgery or non-OR procedure 
"^DD",133.8,133.801,24,21,2,0)
is treating a VA patient for a problem that is related to PROJECT 
"^DD",133.8,133.801,24,21,3,0)
112/SHAD.  This information may be passed to the VISIT file (#9000010) 
"^DD",133.8,133.801,24,21,4,0)
for use by PCE.
"^DD",133.8,133.801,24,"DT")
3051117
"^DD",136,136,.11,0)
PROJ 112/SHAD (PRIN)^S^1:YES;0:NO;^0;11^Q
"^DD",136,136,.11,.1)
Treatment related to PROJ 112/SHAD (Y/N)
"^DD",136,136,.11,3)
If the principal diagnosis is a problem related to PROJ 112/SHAD, enter YES.
"^DD",136,136,.11,21,0)
^.001^3^3^3051117^^
"^DD",136,136,.11,21,1,0)
This field indicates if the principal diagnosis is a PROJ 112/SHAD 
"^DD",136,136,.11,21,2,0)
related problem. This information may be passed to the VISIT file 
"^DD",136,136,.11,21,3,0)
(#9000010) for use by PCE.
"^DD",136,136,.11,"DT")
3051117
"^DD",136,136,4,0)
OTHER POSTOP DIAGNOSIS CODES^136.04P^^4;0
"^DD",136,136,4,"DT")
3050112
"^DD",136,136.04,0)
OTHER POSTOP DIAGNOSIS CODES SUB-FIELD^^.09^9
"^DD",136,136.04,0,"NM","OTHER POSTOP DIAGNOSIS CODES")

"^DD",136,136.04,.01,0)
OTHER POSTOP DIAGNOSIS CODE^M*P80'^ICD9(^0;1^S DIC("S")="I $$ACTIV^SROICD($S($D(SRTN):SRTN,$D(DA(1)):DA(1),1:""""),+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",136,136.04,.01,.1)
Other Postop Diagnosis Code
"^DD",136,136.04,.01,1,0)
^.1
"^DD",136,136.04,.01,1,1,0)
^^TRIGGER^136.04^.02
"^DD",136,136.04,.01,1,1,1)
X ^DD(136.04,.01,1,1,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,4) X ^DD(136.04,.01,1,1,1.4)
"^DD",136,136.04,.01,1,1,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.02,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,2)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,1,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,2)=DIV,DIH=136.04,DIG=.02 D ^DICR
"^DD",136,136.04,.01,1,1,2)
Q
"^DD",136,136.04,.01,1,1,"CREATE CONDITION")
SERVICE CONNECTED=""
"^DD",136,136.04,.01,1,1,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,4)
"^DD",136,136.04,.01,1,1,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,1,"DT")
3050112
"^DD",136,136.04,.01,1,1,"FIELD")
SERVICE CONNECTED
"^DD",136,136.04,.01,1,2,0)
^^TRIGGER^136.04^.03
"^DD",136,136.04,.01,1,2,1)
X ^DD(136.04,.01,1,2,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,3),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,5) X ^DD(136.04,.01,1,2,1.4)
"^DD",136,136.04,.01,1,2,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.03,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,3)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,2,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,3)=DIV,DIH=136.04,DIG=.03 D ^DICR
"^DD",136,136.04,.01,1,2,2)
Q
"^DD",136,136.04,.01,1,2,"CREATE CONDITION")
AGENT ORANGE EXPOSURE=""
"^DD",136,136.04,.01,1,2,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,5)
"^DD",136,136.04,.01,1,2,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,2,"DT")
3050112
"^DD",136,136.04,.01,1,2,"FIELD")
AGENT ORANGE EXPOSURE
"^DD",136,136.04,.01,1,3,0)
^^TRIGGER^136.04^.04
"^DD",136,136.04,.01,1,3,1)
X ^DD(136.04,.01,1,3,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,4),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,6) X ^DD(136.04,.01,1,3,1.4)
"^DD",136,136.04,.01,1,3,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.04,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,4)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,3,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,4)=DIV,DIH=136.04,DIG=.04 D ^DICR
"^DD",136,136.04,.01,1,3,2)
Q
"^DD",136,136.04,.01,1,3,"CREATE CONDITION")
IONIZING RADIATION EXPOSURE=""
"^DD",136,136.04,.01,1,3,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,6)
"^DD",136,136.04,.01,1,3,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,3,"DT")
3050112
"^DD",136,136.04,.01,1,3,"FIELD")
IONIZING RADIATION EXPOSURE
"^DD",136,136.04,.01,1,4,0)
^^TRIGGER^136.04^.05
"^DD",136,136.04,.01,1,4,1)
X ^DD(136.04,.01,1,4,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,5),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,8) X ^DD(136.04,.01,1,4,1.4)
"^DD",136,136.04,.01,1,4,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.05,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,5)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,4,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,5)=DIV,DIH=136.04,DIG=.05 D ^DICR
"^DD",136,136.04,.01,1,4,2)
Q
"^DD",136,136.04,.01,1,4,"CREATE CONDITION")
MILITARY SEXUAL TRAUMA=""
"^DD",136,136.04,.01,1,4,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,8)
"^DD",136,136.04,.01,1,4,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,4,"DT")
3050112
"^DD",136,136.04,.01,1,4,"FIELD")
MILITARY SEXUAL TRAUMA
"^DD",136,136.04,.01,1,5,0)
^^TRIGGER^136.04^.06
"^DD",136,136.04,.01,1,5,1)
X ^DD(136.04,.01,1,5,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,6),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,9) X ^DD(136.04,.01,1,5,1.4)
"^DD",136,136.04,.01,1,5,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.06,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,6)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,5,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,6)=DIV,DIH=136.04,DIG=.06 D ^DICR
"^DD",136,136.04,.01,1,5,2)
Q
"^DD",136,136.04,.01,1,5,"CREATE CONDITION")
HEAD AND/OR NECK CANCER=""
"^DD",136,136.04,.01,1,5,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,9)
"^DD",136,136.04,.01,1,5,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,5,"DT")
3050112
"^DD",136,136.04,.01,1,5,"FIELD")
HEAD AND/OR NECK CANCER
"^DD",136,136.04,.01,1,6,0)
^^TRIGGER^136.04^.07
"^DD",136,136.04,.01,1,6,1)
X ^DD(136.04,.01,1,6,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,7),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,7) X ^DD(136.04,.01,1,6,1.4)
"^DD",136,136.04,.01,1,6,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.07,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,7)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,6,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,7)=DIV,DIH=136.04,DIG=.07 D ^DICR
"^DD",136,136.04,.01,1,6,2)
Q
"^DD",136,136.04,.01,1,6,"CREATE CONDITION")
ENVIRONMENTAL CONTAMINANTS=""
"^DD",136,136.04,.01,1,6,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,7)
"^DD",136,136.04,.01,1,6,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,6,"DT")
3050112
"^DD",136,136.04,.01,1,6,"FIELD")
ENVIRONMENTAL CONTAMINANTS
"^DD",136,136.04,.01,1,7,0)
^^TRIGGER^136.04^.08
"^DD",136,136.04,.01,1,7,1)
X ^DD(136.04,.01,1,7,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,8),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,10) X ^DD(136.04,.01,1,7,1.4)
"^DD",136,136.04,.01,1,7,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.08,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,8)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,7,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,8)=DIV,DIH=136.04,DIG=.08 D ^DICR
"^DD",136,136.04,.01,1,7,2)
Q
"^DD",136,136.04,.01,1,7,"CREATE CONDITION")
COMBAT VET=""
"^DD",136,136.04,.01,1,7,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,10)
"^DD",136,136.04,.01,1,7,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,7,"DT")
3050112
"^DD",136,136.04,.01,1,7,"FIELD")
COMBAT VET
"^DD",136,136.04,.01,1,8,0)
^^TRIGGER^136.04^.09
"^DD",136,136.04,.01,1,8,1)
X ^DD(136.04,.01,1,8,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,9),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,11) X ^DD(136.04,.01,1,8,1.4)
"^DD",136,136.04,.01,1,8,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.09,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,9)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,8,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,9)=DIV,DIH=136.04,DIG=.09 D ^DICR
"^DD",136,136.04,.01,1,8,2)
Q
"^DD",136,136.04,.01,1,8,"CREATE CONDITION")
PROJ 112/SHAD=""
"^DD",136,136.04,.01,1,8,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,11)
"^DD",136,136.04,.01,1,8,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,8,"DT")
3051117
"^DD",136,136.04,.01,1,8,"FIELD")
PROJ
"^DD",136,136.04,.01,3)
Enter the ICD Diagnosis Code that corresponds to this diagnosis.
"^DD",136,136.04,.01,12)
Screen prevents selection of inactive diagnosis.
"^DD",136,136.04,.01,12.1)
S DIC("S")="I $$ACTIV^SROICD($S($D(SRTN):SRTN,$D(DA(1)):DA(1),1:""""),+Y)"
"^DD",136,136.04,.01,21,0)
^^2^2^3050112^
"^DD",136,136.04,.01,21,1,0)
This is the ICD-9-CM code corresponding with this postoperative
"^DD",136,136.04,.01,21,2,0)
diagnosis.
"^DD",136,136.04,.01,"DT")
3051117
"^DD",136,136.04,.09,0)
PROJ 112/SHAD^S^1:YES;0:NO;^0;9^Q
"^DD",136,136.04,.09,.1)
Treatment related to PROJ 112/SHAD (Y/N)
"^DD",136,136.04,.09,3)
If this diagnosis is related to PROJ 112/SHAD, enter YES.
"^DD",136,136.04,.09,5,1,0)
136.04^.01^8
"^DD",136,136.04,.09,21,0)
^.001^3^3^3051117^^
"^DD",136,136.04,.09,21,1,0)
This field indicates if this diagnosis is a PROJ 112/SHAD related 
"^DD",136,136.04,.09,21,2,0)
problem.  This information may be passed to the VISIT file (#9000010) for 
"^DD",136,136.04,.09,21,3,0)
use by PCE.
"^DD",136,136.04,.09,"DT")
3051117
"BLD",5643,6)
^147
**END**
**END**

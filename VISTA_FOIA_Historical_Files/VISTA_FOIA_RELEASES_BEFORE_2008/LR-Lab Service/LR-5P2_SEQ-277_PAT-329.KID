Released LR*5.2*329 SEQ #277
Extracted from mail message
**KIDS**:LR*5.2*329^

**INSTALL NAME**
LR*5.2*329
"BLD",6303,0)
LR*5.2*329^LAB SERVICE^0^3060717^y
"BLD",6303,1,0)
295
"BLD",6303,1,1,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*329 does
"BLD",6303,1,2,0)
not contain any changes to the VISTA BLOOD BANK Software as defined
"BLD",6303,1,3,0)
by VHA DIRECTIVE 2004-058 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
"BLD",6303,1,4,0)
 
"BLD",6303,1,5,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*329 does
"BLD",6303,1,6,0)
not alter or modify any software design safeguards or safety critical
"BLD",6303,1,7,0)
elements functions.
"BLD",6303,1,8,0)
 
"BLD",6303,1,9,0)
RISK ANALYSIS: Changes made by patch LR*5.2*329 have no effect on Blood
"BLD",6303,1,10,0)
Bank software functionality, therefore RISK is none.
"BLD",6303,1,11,0)
 
"BLD",6303,1,12,0)
 
"BLD",6303,1,13,0)
1. Remedy ticket HD0000000088913 reported the Laboratory software was
"BLD",6303,1,14,0)
creating Laboratory Unique Identifiers (UID) which used the prefix '00'
"BLD",6303,1,15,0)
instead of the site's two character identifier assigned to each accession
"BLD",6303,1,16,0)
area. This situation exists when the UIDs from old previously purged
"BLD",6303,1,17,0)
accessions are still in the "C" cross-reference of the ACCESSION file
"BLD",6303,1,18,0)
(#68), many from when the UID was first implemented in 1995.
"BLD",6303,1,19,0)
 
"BLD",6303,1,20,0)
One of the checks performed during UID creation is to check if the UID
"BLD",6303,1,21,0)
being generated exists in the "C" cross-reference. If it does and it is not
"BLD",6303,1,22,0)
for the accession being created then the software replaces the accession
"BLD",6303,1,23,0)
area identifier the site has specified for the accession area and uses "00"
"BLD",6303,1,24,0)
in its place to insure creation of a unique identifier.
"BLD",6303,1,25,0)
 
"BLD",6303,1,26,0)
Example: LRO(68,"C",1550180008,25,2950118,8)
"BLD",6303,1,27,0)
Where: LRO = LRO global
"BLD",6303,1,28,0)
        68 = ACCESSION file (#68)
"BLD",6303,1,29,0)
       "C" = cross reference
"BLD",6303,1,30,0)
 155018008 = UID
"BLD",6303,1,31,0)
        25 = accession area
"BLD",6303,1,32,0)
   2950118 = accession date (Jan 18 1995)
"BLD",6303,1,33,0)
         8 = accession number portion
"BLD",6303,1,34,0)

"BLD",6303,1,35,0)
If the software wanted to assign the normally generated accession UID
"BLD",6303,1,36,0)
1550180008 to accession area 25, accession date of Jan 18 2005, accession
"BLD",6303,1,37,0)
number of 18 but found the UID already exist for 1995 accession for the
"BLD",6303,1,38,0)
same day and number then UID generating software would replace 15 with 00
"BLD",6303,1,39,0)
to create a UID 0050180008 to allow accessioning to continue. 
"BLD",6303,1,40,0)

"BLD",6303,1,41,0)
Note: The UID generating software will always produce an unique number.
"BLD",6303,1,42,0)
No two accessions will ever have the same UID based on the "C" cross reference.
"BLD",6303,1,43,0)
 
"BLD",6303,1,44,0)
The routine LROC is modified to check for purged accessions and remove
"BLD",6303,1,45,0)
purged accession's UID from the "C" and "D" cross reference of the
"BLD",6303,1,46,0)
ACCESSION (#68) file. This will correct the problem of 10 year
"BLD",6303,1,47,0)
overlapping accession UID. This routine is invoked by Purge old orders
"BLD",6303,1,48,0)
& accessions option [LROC].
"BLD",6303,1,49,0)
 
"BLD",6303,1,50,0)
Note: After installation of this patch the Laboratory software will
"BLD",6303,1,51,0)
continue to create UIDs using the "00" prefix when an existing accession
"BLD",6303,1,52,0)
is still currently on the system and using the UID. This is to assure that
"BLD",6303,1,53,0)
the UID assigned to an accession is unique. The Laboratory software is
"BLD",6303,1,54,0)
capable of handling UIDs correctly when the UID has a "00" prefix. There
"BLD",6303,1,55,0)
is no inherent requirement that a specific UID conform exactly to its
"BLD",6303,1,56,0)
related accession.
"BLD",6303,1,57,0)
 
"BLD",6303,1,58,0)
2. The check and purge of these cross-references will be tasked by the
"BLD",6303,1,59,0)
post-install of this patch to cleanup any existing entries in file #68.
"BLD",6303,1,60,0)
The post-install of this patch tasks a back-ground job to cleanup any
"BLD",6303,1,61,0)
existing entries in file #68 that have been previously purged. After
"BLD",6303,1,62,0)
this back-ground job has run to completion, the "C" and "D" should not
"BLD",6303,1,63,0)
contain any UIDs related to purged accessions.
"BLD",6303,1,64,0)
 
"BLD",6303,1,65,0)
3. As part of developer review, the Purge old orders & accessions option
"BLD",6303,1,66,0)
[LROC] has been made 'TaskMan aware'. Stopping of this tasked process can
"BLD",6303,1,67,0)
be accomplished using standard TaskMan utilities.
"BLD",6303,1,68,0)
 
"BLD",6303,1,69,0)
 
"BLD",6303,1,70,0)
 ASSOCIATED E3R
"BLD",6303,1,71,0)
 --------------
"BLD",6303,1,72,0)
 None
"BLD",6303,1,73,0)
 
"BLD",6303,1,74,0)
 ASSOCIATED REMEDY
"BLD",6303,1,75,0)
 ---------------
"BLD",6303,1,76,0)
 HD0000000088913
"BLD",6303,1,77,0)
  Duplicates:
"BLD",6303,1,78,0)
  HD0000000096348
"BLD",6303,1,79,0)
  HD0000000141232
"BLD",6303,1,80,0)
  HD0000000141237
"BLD",6303,1,81,0)
  HD0000000141258
"BLD",6303,1,82,0)
  HD0000000141298
"BLD",6303,1,83,0)
  HD0000000141977
"BLD",6303,1,84,0)
  HD0000000142004
"BLD",6303,1,85,0)
  HD0000000142663
"BLD",6303,1,86,0)
  HD0000000143065
"BLD",6303,1,87,0)
  HD0000000144052
"BLD",6303,1,88,0)
  HD0000000145774
"BLD",6303,1,89,0)
  HD0000000146357
"BLD",6303,1,90,0)
  HD0000000147586
"BLD",6303,1,91,0)
  HD0000000147794
"BLD",6303,1,92,0)
  HD0000000148645
"BLD",6303,1,93,0)
 
"BLD",6303,1,94,0)

"BLD",6303,1,95,0)
 TEST SITES
"BLD",6303,1,96,0)
 ----------
"BLD",6303,1,97,0)
 
"BLD",6303,1,98,0)
 ALEXANDRIA, LA
"BLD",6303,1,99,0)
 ALTOONA, PA    
"BLD",6303,1,100,0)
 ANN ARBOR, MI  
"BLD",6303,1,101,0)
 BAY PINES, FL  
"BLD",6303,1,102,0)
 BLACK HILLS HCS
"BLD",6303,1,103,0)
 BOSTON HCS     
"BLD",6303,1,104,0)
 BRONX, NY      
"BLD",6303,1,105,0)
 CENTRAL PLAINS HCS 
"BLD",6303,1,106,0)
 CENTRAL TEXAS HCS  
"BLD",6303,1,107,0)
 CLEVELAND, OH
"BLD",6303,1,108,0)
 DAYTON, OH   
"BLD",6303,1,109,0)
 DETROIT, MI  
"BLD",6303,1,110,0)
 DUBLIN, GA   
"BLD",6303,1,111,0)
 DURHAM, NC   
"BLD",6303,1,112,0)
 FARGO, ND    
"BLD",6303,1,113,0)
 FRESNO, CA   
"BLD",6303,1,114,0)
 HAMPTON, VA  
"BLD",6303,1,115,0)
 HINES, IL    
"BLD",6303,1,116,0)
 HOUSTON, TX  
"BLD",6303,1,117,0)
 LEXINGTON, KY
"BLD",6303,1,118,0)
 LOMA LINDA, CA
"BLD",6303,1,119,0)
 LONG BEACH, CA
"BLD",6303,1,120,0)
 MADISON, WI   
"BLD",6303,1,121,0)
 MANCHESTER, NH
"BLD",6303,1,122,0)
 MARYLAND HCS  
"BLD",6303,1,123,0)
 MILWAUKEE, WI 
"BLD",6303,1,124,0)
 MINNEAPOLIS, MN
"BLD",6303,1,125,0)
 MUSKOGEE, OK   
"BLD",6303,1,126,0)
 NEW YORK HCS   
"BLD",6303,1,127,0)
 NORTH CHICAGO, IL
"BLD",6303,1,128,0)
 NORTHPORT, NY    
"BLD",6303,1,129,0)
 OKLAHOMA CITY, OK
"BLD",6303,1,130,0)
 PHILADELPHIA, PA 
"BLD",6303,1,131,0)
 PROVIDENCE, RI   
"BLD",6303,1,132,0)
 RICHMOND, VA     
"BLD",6303,1,133,0)
 SAN FRANCISCO, CA
"BLD",6303,1,134,0)
 SAN JUAN, PR     
"BLD",6303,1,135,0)
 SHERIDAN, WY     
"BLD",6303,1,136,0)
 SHREVEPORT, LA   
"BLD",6303,1,137,0)
 SIOUX FALLS, SD  
"BLD",6303,1,138,0)
 ST CLOUD, MN     
"BLD",6303,1,139,0)
 TAMPA, FL        
"BLD",6303,1,140,0)
 TENNESSEE VALLEY HCS
"BLD",6303,1,141,0)
 UPSTATE NEW YORK HCS
"BLD",6303,1,142,0)
 WEST PALM BEACH, FL 
"BLD",6303,1,143,0)
 
"BLD",6303,1,144,0)

"BLD",6303,1,145,0)
 
"BLD",6303,1,146,0)
ROUTINE SUMMARY
"BLD",6303,1,147,0)
===============
"BLD",6303,1,148,0)
  The following routines are included in this patch.  The second line
"BLD",6303,1,149,0)
  of each of these routines now looks like:
"BLD",6303,1,150,0)
  <tab> ;;5.2;LAB SERVICE;<patchlist>;Sep 27, 1994
"BLD",6303,1,151,0)
 
"BLD",6303,1,152,0)
                    Checksum       Checksum
"BLD",6303,1,153,0)
   Routine Name     Before Patch   After Patch    Patch List
"BLD",6303,1,154,0)
   ------------     ------------   -----------    ------------
"BLD",6303,1,155,0)
   LR329            N/A            5595661        **329** (Deleted by KIDS)
"BLD",6303,1,156,0)
   LROC             9241387        7783203        **121,295,329**
"BLD",6303,1,157,0)
 
"BLD",6303,1,158,0)
 List of preceding patches: 295
"BLD",6303,1,159,0)
 Sites should use CHECK^XTSUMBLD to verify checksums.
"BLD",6303,1,160,0)
 
"BLD",6303,1,161,0)
 
"BLD",6303,1,162,0)
INSTALLATION INSTRUCTIONS
"BLD",6303,1,163,0)
-------------------------
"BLD",6303,1,164,0)
  The install time for this patch is less than 5 minute. This patch
"BLD",6303,1,165,0)
  can be installed when Laboratory users are on the system.
"BLD",6303,1,166,0)
  Suggested time to install: non-peak requirement hours.
"BLD",6303,1,167,0)
 
"BLD",6303,1,168,0)
 
"BLD",6303,1,169,0)
NOTE: Kernel patches must be current on the target system to avoid
"BLD",6303,1,170,0)
      problems loading and/or installing this patch.
"BLD",6303,1,171,0)
 
"BLD",6303,1,172,0)
      Patch installation needs to be coordinated with the Laboratory
"BLD",6303,1,173,0)
      Information Manager (LIM/ADPAC).
"BLD",6303,1,174,0)
 
"BLD",6303,1,175,0)
 
"BLD",6303,1,176,0)
  1.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
"BLD",6303,1,177,0)
        option will load the KIDS package onto your system.
"BLD",6303,1,178,0)
 
"BLD",6303,1,179,0)
  2.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
"BLD",6303,1,180,0)
      select the 'Installation' menu.
"BLD",6303,1,181,0)
 
"BLD",6303,1,182,0)
  3.  From this menu, you may then elect to use the following options
"BLD",6303,1,183,0)
      (when prompted for the INSTALL NAME, enter LR*5.2*329):
"BLD",6303,1,184,0)
        a. Print Transport Global
"BLD",6303,1,185,0)
        b. Backup a Transport Global
"BLD",6303,1,186,0)
        c. Compare Transport Global to Current System
"BLD",6303,1,187,0)
        d. Verify Checksums in Transport Global
"BLD",6303,1,188,0)
 
"BLD",6303,1,189,0)
      Use the 'Verify Checksum in Transport Global' option and verify that
"BLD",6303,1,190,0)
      all routines have the correct checksums.
"BLD",6303,1,191,0)
 
"BLD",6303,1,192,0)
  4.  Use the 'Install Package(s)' option under the 'Installation' menu
"BLD",6303,1,193,0)
      and select the package 'LR*5.2*329'.
"BLD",6303,1,194,0)

"BLD",6303,1,195,0)
      When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of 
"BLD",6303,1,196,0)
      Install? YES//' choose 'NO'. Responding 'Yes' to the prompt for 
"BLD",6303,1,197,0)
      rebuilding menu trees can significantly increase install time.
"BLD",6303,1,198,0)

"BLD",6303,1,199,0)
      When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//
"BLD",6303,1,200,0)
      choose 'NO'.
"BLD",6303,1,201,0)
 
"BLD",6303,1,202,0)
      When prompted 'Want to DISABLE Scheduled Options, Menu Options,
"BLD",6303,1,203,0)
      and Protocols? YES//', choose 'NO'.
"BLD",6303,1,204,0)
 
"BLD",6303,1,205,0)
      During install KIDS will place the Purge old orders & accessions
"BLD",6303,1,206,0)
      option [LROC] out of order.
"BLD",6303,1,207,0)
 
"BLD",6303,1,208,0)
 Note: Routine LR329 will be deleted after successful patch installation.
"BLD",6303,1,209,0)
 
"BLD",6303,1,210,0)
 
"BLD",6303,1,211,0)
INSTALLATION EXAMPLE
"BLD",6303,1,212,0)
====================
"BLD",6303,1,213,0)
 
"BLD",6303,1,214,0)
Select Installation Option:
"BLD",6303,1,215,0)
 
"BLD",6303,1,216,0)
Select Kernel Installation & Distribution System Option:  Installation
"BLD",6303,1,217,0)
 
"BLD",6303,1,218,0)
Select Installation Option: 6  Install Package(s)
"BLD",6303,1,219,0)
Select INSTALL NAME: LR*5.2*329  Loaded from Distribution  4/11/05@16:15:44
"BLD",6303,1,220,0)
     => LR*5.2*329
"BLD",6303,1,221,0)
 
"BLD",6303,1,222,0)
This Distribution was loaded on Apr 11, 2005@16:15:44 with header of
"BLD",6303,1,223,0)
   LR*5.2*329
"BLD",6303,1,224,0)
   It consisted of the following Install(s):
"BLD",6303,1,225,0)
     LR*5.2*329
"BLD",6303,1,226,0)
Checking Install for Package LR*5.2*329
"BLD",6303,1,227,0)
Will first run the Environment Check Routine, LR329
"BLD",6303,1,228,0)
 
"BLD",6303,1,229,0)
 
"BLD",6303,1,230,0)
               Sending install started alert to mail group G.LMI
"BLD",6303,1,231,0)
 
"BLD",6303,1,232,0)
                        --- Environment Check is Ok ---
"BLD",6303,1,233,0)
 
"BLD",6303,1,234,0)
Install Questions for LR*5.2*329
"BLD",6303,1,235,0)
 
"BLD",6303,1,236,0)
 
"BLD",6303,1,237,0)
Want KIDS to Rebuild Menu Trees Upon Completion of Install? YES// NO
"BLD",6303,1,238,0)
 
"BLD",6303,1,239,0)
 
"BLD",6303,1,240,0)
Want KIDS to INHIBIT LOGONs during the install? YES// NO
"BLD",6303,1,241,0)
Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
"BLD",6303,1,242,0)
 
"BLD",6303,1,243,0)
Enter the Device you want to print the Install messages.
"BLD",6303,1,244,0)
You can queue the install by enter a 'Q' at the device prompt.
"BLD",6303,1,245,0)
Enter a '^' to abort the install.
"BLD",6303,1,246,0)
 
"BLD",6303,1,247,0)
DEVICE: HOME// TELNET VIRTUAL
"BLD",6303,1,248,0)
 
"BLD",6303,1,249,0)
 
"BLD",6303,1,250,0)
 Install Started for LR*5.2*329 :
"BLD",6303,1,251,0)
               Apr 11, 2005@16:16:28
"BLD",6303,1,252,0)
 
"BLD",6303,1,253,0)
Build Distribution Date: Apr 11, 2005
"BLD",6303,1,254,0)
 
"BLD",6303,1,255,0)
 Installing Routines:...
"BLD",6303,1,256,0)
               Apr 11, 2005@16:16:28
"BLD",6303,1,257,0)
 
"BLD",6303,1,258,0)
 Running Pre-Install Routine: PRE^LR329.
"BLD",6303,1,259,0)
 
"BLD",6303,1,260,0)
                          *** Pre install started ***
"BLD",6303,1,261,0)
 
"BLD",6303,1,262,0)
                           *** No action required ***
"BLD",6303,1,263,0)
 
"BLD",6303,1,264,0)
                         *** Pre install completed ***
"BLD",6303,1,265,0)
 
"BLD",6303,1,266,0)
 Installing PACKAGE COMPONENTS:
"BLD",6303,1,267,0)
 
"BLD",6303,1,268,0)
 Installing OPTION..
"BLD",6303,1,269,0)
               Apr 11, 2005@16:16:28
"BLD",6303,1,270,0)
 
"BLD",6303,1,271,0)
 Running Post-Install Routine: POST^LR329.
"BLD",6303,1,272,0)
 
"BLD",6303,1,273,0)
                          *** Post install started ***
"BLD",6303,1,274,0)
 
"BLD",6303,1,275,0)
 *** Tasking check/cleanup "C" cross reference on ACCESSION file (#68) ***
"BLD",6303,1,276,0)
 
"BLD",6303,1,277,0)
                       *** Task #XXXX tasked to run ***
"BLD",6303,1,278,0)
 
"BLD",6303,1,279,0)
                         *** Post install completed ***
"BLD",6303,1,280,0)
 
"BLD",6303,1,281,0)
              Sending install completion alert to mail group G.LMI
"BLD",6303,1,282,0)
 
"BLD",6303,1,283,0)
 Updating Routine file......
"BLD",6303,1,284,0)
 
"BLD",6303,1,285,0)
 Updating KIDS files.......
"BLD",6303,1,286,0)
 
"BLD",6303,1,287,0)
 LR*5.2*329 Installed.
"BLD",6303,1,288,0)
               Apr 11, 2005@16:16:28
"BLD",6303,1,289,0)
 
"BLD",6303,1,290,0)
 Install Message sent #XXXX
"BLD",6303,1,291,0)

"BLD",6303,1,292,0)

"BLD",6303,1,293,0)

"BLD",6303,1,294,0)

"BLD",6303,1,295,0)

"BLD",6303,4,0)
^9.64PA^^
"BLD",6303,6.3)
2
"BLD",6303,"ABPKG")
n
"BLD",6303,"INI")
PRE^LR329
"BLD",6303,"INID")
y
"BLD",6303,"INIT")
POST^LR329
"BLD",6303,"KRN",0)
^9.67PA^8989.52^19
"BLD",6303,"KRN",.4,0)
.4
"BLD",6303,"KRN",.401,0)
.401
"BLD",6303,"KRN",.402,0)
.402
"BLD",6303,"KRN",.403,0)
.403
"BLD",6303,"KRN",.5,0)
.5
"BLD",6303,"KRN",.84,0)
.84
"BLD",6303,"KRN",3.6,0)
3.6
"BLD",6303,"KRN",3.8,0)
3.8
"BLD",6303,"KRN",9.2,0)
9.2
"BLD",6303,"KRN",9.8,0)
9.8
"BLD",6303,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6303,"KRN",9.8,"NM",1,0)
LROC^^0^B27696934
"BLD",6303,"KRN",9.8,"NM","B","LROC",1)

"BLD",6303,"KRN",19,0)
19
"BLD",6303,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",6303,"KRN",19,"NM",1,0)
LROC^^5^
"BLD",6303,"KRN",19,"NM","B","LROC",1)

"BLD",6303,"KRN",19.1,0)
19.1
"BLD",6303,"KRN",101,0)
101
"BLD",6303,"KRN",409.61,0)
409.61
"BLD",6303,"KRN",771,0)
771
"BLD",6303,"KRN",870,0)
870
"BLD",6303,"KRN",8989.51,0)
8989.51
"BLD",6303,"KRN",8989.52,0)
8989.52
"BLD",6303,"KRN",8994,0)
8994
"BLD",6303,"KRN","B",.4,.4)

"BLD",6303,"KRN","B",.401,.401)

"BLD",6303,"KRN","B",.402,.402)

"BLD",6303,"KRN","B",.403,.403)

"BLD",6303,"KRN","B",.5,.5)

"BLD",6303,"KRN","B",.84,.84)

"BLD",6303,"KRN","B",3.6,3.6)

"BLD",6303,"KRN","B",3.8,3.8)

"BLD",6303,"KRN","B",9.2,9.2)

"BLD",6303,"KRN","B",9.8,9.8)

"BLD",6303,"KRN","B",19,19)

"BLD",6303,"KRN","B",19.1,19.1)

"BLD",6303,"KRN","B",101,101)

"BLD",6303,"KRN","B",409.61,409.61)

"BLD",6303,"KRN","B",771,771)

"BLD",6303,"KRN","B",870,870)

"BLD",6303,"KRN","B",8989.51,8989.51)

"BLD",6303,"KRN","B",8989.52,8989.52)

"BLD",6303,"KRN","B",8994,8994)

"BLD",6303,"PRE")
LR329
"BLD",6303,"QUES",0)
^9.62^^
"BLD",6303,"REQB",0)
^9.611^1^1
"BLD",6303,"REQB",1,0)
LR*5.2*295^2
"BLD",6303,"REQB","B","LR*5.2*295",1)

"INI")
PRE^LR329
"INIT")
POST^LR329
"KRN",19,8335,-1)
5^1
"KRN",19,8335,0)
LROC
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2981028^66481
"PKG",26,22,1,"PAH",1,0)
329^3060717^235
"PKG",26,22,1,"PAH",1,1,0)
^^295^295^3060717
"PKG",26,22,1,"PAH",1,1,1,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*329 does
"PKG",26,22,1,"PAH",1,1,2,0)
not contain any changes to the VISTA BLOOD BANK Software as defined
"PKG",26,22,1,"PAH",1,1,3,0)
by VHA DIRECTIVE 2004-058 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
"PKG",26,22,1,"PAH",1,1,4,0)
 
"PKG",26,22,1,"PAH",1,1,5,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*329 does
"PKG",26,22,1,"PAH",1,1,6,0)
not alter or modify any software design safeguards or safety critical
"PKG",26,22,1,"PAH",1,1,7,0)
elements functions.
"PKG",26,22,1,"PAH",1,1,8,0)
 
"PKG",26,22,1,"PAH",1,1,9,0)
RISK ANALYSIS: Changes made by patch LR*5.2*329 have no effect on Blood
"PKG",26,22,1,"PAH",1,1,10,0)
Bank software functionality, therefore RISK is none.
"PKG",26,22,1,"PAH",1,1,11,0)
 
"PKG",26,22,1,"PAH",1,1,12,0)
 
"PKG",26,22,1,"PAH",1,1,13,0)
1. Remedy ticket HD0000000088913 reported the Laboratory software was
"PKG",26,22,1,"PAH",1,1,14,0)
creating Laboratory Unique Identifiers (UID) which used the prefix '00'
"PKG",26,22,1,"PAH",1,1,15,0)
instead of the site's two character identifier assigned to each accession
"PKG",26,22,1,"PAH",1,1,16,0)
area. This situation exists when the UIDs from old previously purged
"PKG",26,22,1,"PAH",1,1,17,0)
accessions are still in the "C" cross-reference of the ACCESSION file
"PKG",26,22,1,"PAH",1,1,18,0)
(#68), many from when the UID was first implemented in 1995.
"PKG",26,22,1,"PAH",1,1,19,0)
 
"PKG",26,22,1,"PAH",1,1,20,0)
One of the checks performed during UID creation is to check if the UID
"PKG",26,22,1,"PAH",1,1,21,0)
being generated exists in the "C" cross-reference. If it does and it is not
"PKG",26,22,1,"PAH",1,1,22,0)
for the accession being created then the software replaces the accession
"PKG",26,22,1,"PAH",1,1,23,0)
area identifier the site has specified for the accession area and uses "00"
"PKG",26,22,1,"PAH",1,1,24,0)
in its place to insure creation of a unique identifier.
"PKG",26,22,1,"PAH",1,1,25,0)
 
"PKG",26,22,1,"PAH",1,1,26,0)
Example: LRO(68,"C",1550180008,25,2950118,8)
"PKG",26,22,1,"PAH",1,1,27,0)
Where: LRO = LRO global
"PKG",26,22,1,"PAH",1,1,28,0)
        68 = ACCESSION file (#68)
"PKG",26,22,1,"PAH",1,1,29,0)
       "C" = cross reference
"PKG",26,22,1,"PAH",1,1,30,0)
 155018008 = UID
"PKG",26,22,1,"PAH",1,1,31,0)
        25 = accession area
"PKG",26,22,1,"PAH",1,1,32,0)
   2950118 = accession date (Jan 18 1995)
"PKG",26,22,1,"PAH",1,1,33,0)
         8 = accession number portion
"PKG",26,22,1,"PAH",1,1,34,0)

"PKG",26,22,1,"PAH",1,1,35,0)
If the software wanted to assign the normally generated accession UID
"PKG",26,22,1,"PAH",1,1,36,0)
1550180008 to accession area 25, accession date of Jan 18 2005, accession
"PKG",26,22,1,"PAH",1,1,37,0)
number of 18 but found the UID already exist for 1995 accession for the
"PKG",26,22,1,"PAH",1,1,38,0)
same day and number then UID generating software would replace 15 with 00
"PKG",26,22,1,"PAH",1,1,39,0)
to create a UID 0050180008 to allow accessioning to continue. 
"PKG",26,22,1,"PAH",1,1,40,0)

"PKG",26,22,1,"PAH",1,1,41,0)
Note: The UID generating software will always produce an unique number.
"PKG",26,22,1,"PAH",1,1,42,0)
No two accessions will ever have the same UID based on the "C" cross reference.
"PKG",26,22,1,"PAH",1,1,43,0)
 
"PKG",26,22,1,"PAH",1,1,44,0)
The routine LROC is modified to check for purged accessions and remove
"PKG",26,22,1,"PAH",1,1,45,0)
purged accession's UID from the "C" and "D" cross reference of the
"PKG",26,22,1,"PAH",1,1,46,0)
ACCESSION (#68) file. This will correct the problem of 10 year
"PKG",26,22,1,"PAH",1,1,47,0)
overlapping accession UID. This routine is invoked by Purge old orders
"PKG",26,22,1,"PAH",1,1,48,0)
& accessions option [LROC].
"PKG",26,22,1,"PAH",1,1,49,0)
 
"PKG",26,22,1,"PAH",1,1,50,0)
Note: After installation of this patch the Laboratory software will
"PKG",26,22,1,"PAH",1,1,51,0)
continue to create UIDs using the "00" prefix when an existing accession
"PKG",26,22,1,"PAH",1,1,52,0)
is still currently on the system and using the UID. This is to assure that
"PKG",26,22,1,"PAH",1,1,53,0)
the UID assigned to an accession is unique. The Laboratory software is
"PKG",26,22,1,"PAH",1,1,54,0)
capable of handling UIDs correctly when the UID has a "00" prefix. There
"PKG",26,22,1,"PAH",1,1,55,0)
is no inherent requirement that a specific UID conform exactly to its
"PKG",26,22,1,"PAH",1,1,56,0)
related accession.
"PKG",26,22,1,"PAH",1,1,57,0)
 
"PKG",26,22,1,"PAH",1,1,58,0)
2. The check and purge of these cross-references will be tasked by the
"PKG",26,22,1,"PAH",1,1,59,0)
post-install of this patch to cleanup any existing entries in file #68.
"PKG",26,22,1,"PAH",1,1,60,0)
The post-install of this patch tasks a back-ground job to cleanup any
"PKG",26,22,1,"PAH",1,1,61,0)
existing entries in file #68 that have been previously purged. After
"PKG",26,22,1,"PAH",1,1,62,0)
this back-ground job has run to completion, the "C" and "D" should not
"PKG",26,22,1,"PAH",1,1,63,0)
contain any UIDs related to purged accessions.
"PKG",26,22,1,"PAH",1,1,64,0)
 
"PKG",26,22,1,"PAH",1,1,65,0)
3. As part of developer review, the Purge old orders & accessions option
"PKG",26,22,1,"PAH",1,1,66,0)
[LROC] has been made 'TaskMan aware'. Stopping of this tasked process can
"PKG",26,22,1,"PAH",1,1,67,0)
be accomplished using standard TaskMan utilities.
"PKG",26,22,1,"PAH",1,1,68,0)
 
"PKG",26,22,1,"PAH",1,1,69,0)
 
"PKG",26,22,1,"PAH",1,1,70,0)
 ASSOCIATED E3R
"PKG",26,22,1,"PAH",1,1,71,0)
 --------------
"PKG",26,22,1,"PAH",1,1,72,0)
 None
"PKG",26,22,1,"PAH",1,1,73,0)
 
"PKG",26,22,1,"PAH",1,1,74,0)
 ASSOCIATED REMEDY
"PKG",26,22,1,"PAH",1,1,75,0)
 ---------------
"PKG",26,22,1,"PAH",1,1,76,0)
 HD0000000088913
"PKG",26,22,1,"PAH",1,1,77,0)
  Duplicates:
"PKG",26,22,1,"PAH",1,1,78,0)
  HD0000000096348
"PKG",26,22,1,"PAH",1,1,79,0)
  HD0000000141232
"PKG",26,22,1,"PAH",1,1,80,0)
  HD0000000141237
"PKG",26,22,1,"PAH",1,1,81,0)
  HD0000000141258
"PKG",26,22,1,"PAH",1,1,82,0)
  HD0000000141298
"PKG",26,22,1,"PAH",1,1,83,0)
  HD0000000141977
"PKG",26,22,1,"PAH",1,1,84,0)
  HD0000000142004
"PKG",26,22,1,"PAH",1,1,85,0)
  HD0000000142663
"PKG",26,22,1,"PAH",1,1,86,0)
  HD0000000143065
"PKG",26,22,1,"PAH",1,1,87,0)
  HD0000000144052
"PKG",26,22,1,"PAH",1,1,88,0)
  HD0000000145774
"PKG",26,22,1,"PAH",1,1,89,0)
  HD0000000146357
"PKG",26,22,1,"PAH",1,1,90,0)
  HD0000000147586
"PKG",26,22,1,"PAH",1,1,91,0)
  HD0000000147794
"PKG",26,22,1,"PAH",1,1,92,0)
  HD0000000148645
"PKG",26,22,1,"PAH",1,1,93,0)
 
"PKG",26,22,1,"PAH",1,1,94,0)

"PKG",26,22,1,"PAH",1,1,95,0)
 TEST SITES
"PKG",26,22,1,"PAH",1,1,96,0)
 ----------
"PKG",26,22,1,"PAH",1,1,97,0)
 
"PKG",26,22,1,"PAH",1,1,98,0)
 ALEXANDRIA, LA
"PKG",26,22,1,"PAH",1,1,99,0)
 ALTOONA, PA    
"PKG",26,22,1,"PAH",1,1,100,0)
 ANN ARBOR, MI  
"PKG",26,22,1,"PAH",1,1,101,0)
 BAY PINES, FL  
"PKG",26,22,1,"PAH",1,1,102,0)
 BLACK HILLS HCS
"PKG",26,22,1,"PAH",1,1,103,0)
 BOSTON HCS     
"PKG",26,22,1,"PAH",1,1,104,0)
 BRONX, NY      
"PKG",26,22,1,"PAH",1,1,105,0)
 CENTRAL PLAINS HCS 
"PKG",26,22,1,"PAH",1,1,106,0)
 CENTRAL TEXAS HCS  
"PKG",26,22,1,"PAH",1,1,107,0)
 CLEVELAND, OH
"PKG",26,22,1,"PAH",1,1,108,0)
 DAYTON, OH   
"PKG",26,22,1,"PAH",1,1,109,0)
 DETROIT, MI  
"PKG",26,22,1,"PAH",1,1,110,0)
 DUBLIN, GA   
"PKG",26,22,1,"PAH",1,1,111,0)
 DURHAM, NC   
"PKG",26,22,1,"PAH",1,1,112,0)
 FARGO, ND    
"PKG",26,22,1,"PAH",1,1,113,0)
 FRESNO, CA   
"PKG",26,22,1,"PAH",1,1,114,0)
 HAMPTON, VA  
"PKG",26,22,1,"PAH",1,1,115,0)
 HINES, IL    
"PKG",26,22,1,"PAH",1,1,116,0)
 HOUSTON, TX  
"PKG",26,22,1,"PAH",1,1,117,0)
 LEXINGTON, KY
"PKG",26,22,1,"PAH",1,1,118,0)
 LOMA LINDA, CA
"PKG",26,22,1,"PAH",1,1,119,0)
 LONG BEACH, CA
"PKG",26,22,1,"PAH",1,1,120,0)
 MADISON, WI   
"PKG",26,22,1,"PAH",1,1,121,0)
 MANCHESTER, NH
"PKG",26,22,1,"PAH",1,1,122,0)
 MARYLAND HCS  
"PKG",26,22,1,"PAH",1,1,123,0)
 MILWAUKEE, WI 
"PKG",26,22,1,"PAH",1,1,124,0)
 MINNEAPOLIS, MN
"PKG",26,22,1,"PAH",1,1,125,0)
 MUSKOGEE, OK   
"PKG",26,22,1,"PAH",1,1,126,0)
 NEW YORK HCS   
"PKG",26,22,1,"PAH",1,1,127,0)
 NORTH CHICAGO, IL
"PKG",26,22,1,"PAH",1,1,128,0)
 NORTHPORT, NY    
"PKG",26,22,1,"PAH",1,1,129,0)
 OKLAHOMA CITY, OK
"PKG",26,22,1,"PAH",1,1,130,0)
 PHILADELPHIA, PA 
"PKG",26,22,1,"PAH",1,1,131,0)
 PROVIDENCE, RI   
"PKG",26,22,1,"PAH",1,1,132,0)
 RICHMOND, VA     
"PKG",26,22,1,"PAH",1,1,133,0)
 SAN FRANCISCO, CA
"PKG",26,22,1,"PAH",1,1,134,0)
 SAN JUAN, PR     
"PKG",26,22,1,"PAH",1,1,135,0)
 SHERIDAN, WY     
"PKG",26,22,1,"PAH",1,1,136,0)
 SHREVEPORT, LA   
"PKG",26,22,1,"PAH",1,1,137,0)
 SIOUX FALLS, SD  
"PKG",26,22,1,"PAH",1,1,138,0)
 ST CLOUD, MN     
"PKG",26,22,1,"PAH",1,1,139,0)
 TAMPA, FL        
"PKG",26,22,1,"PAH",1,1,140,0)
 TENNESSEE VALLEY HCS
"PKG",26,22,1,"PAH",1,1,141,0)
 UPSTATE NEW YORK HCS
"PKG",26,22,1,"PAH",1,1,142,0)
 WEST PALM BEACH, FL 
"PKG",26,22,1,"PAH",1,1,143,0)
 
"PKG",26,22,1,"PAH",1,1,144,0)

"PKG",26,22,1,"PAH",1,1,145,0)
 
"PKG",26,22,1,"PAH",1,1,146,0)
ROUTINE SUMMARY
"PKG",26,22,1,"PAH",1,1,147,0)
===============
"PKG",26,22,1,"PAH",1,1,148,0)
  The following routines are included in this patch.  The second line
"PKG",26,22,1,"PAH",1,1,149,0)
  of each of these routines now looks like:
"PKG",26,22,1,"PAH",1,1,150,0)
  <tab> ;;5.2;LAB SERVICE;<patchlist>;Sep 27, 1994
"PKG",26,22,1,"PAH",1,1,151,0)
 
"PKG",26,22,1,"PAH",1,1,152,0)
                    Checksum       Checksum
"PKG",26,22,1,"PAH",1,1,153,0)
   Routine Name     Before Patch   After Patch    Patch List
"PKG",26,22,1,"PAH",1,1,154,0)
   ------------     ------------   -----------    ------------
"PKG",26,22,1,"PAH",1,1,155,0)
   LR329            N/A            5595661        **329** (Deleted by KIDS)
"PKG",26,22,1,"PAH",1,1,156,0)
   LROC             9241387        7783203        **121,295,329**
"PKG",26,22,1,"PAH",1,1,157,0)
 
"PKG",26,22,1,"PAH",1,1,158,0)
 List of preceding patches: 295
"PKG",26,22,1,"PAH",1,1,159,0)
 Sites should use CHECK^XTSUMBLD to verify checksums.
"PKG",26,22,1,"PAH",1,1,160,0)
 
"PKG",26,22,1,"PAH",1,1,161,0)
 
"PKG",26,22,1,"PAH",1,1,162,0)
INSTALLATION INSTRUCTIONS
"PKG",26,22,1,"PAH",1,1,163,0)
-------------------------
"PKG",26,22,1,"PAH",1,1,164,0)
  The install time for this patch is less than 5 minute. This patch
"PKG",26,22,1,"PAH",1,1,165,0)
  can be installed when Laboratory users are on the system.
"PKG",26,22,1,"PAH",1,1,166,0)
  Suggested time to install: non-peak requirement hours.
"PKG",26,22,1,"PAH",1,1,167,0)
 
"PKG",26,22,1,"PAH",1,1,168,0)
 
"PKG",26,22,1,"PAH",1,1,169,0)
NOTE: Kernel patches must be current on the target system to avoid
"PKG",26,22,1,"PAH",1,1,170,0)
      problems loading and/or installing this patch.
"PKG",26,22,1,"PAH",1,1,171,0)
 
"PKG",26,22,1,"PAH",1,1,172,0)
      Patch installation needs to be coordinated with the Laboratory
"PKG",26,22,1,"PAH",1,1,173,0)
      Information Manager (LIM/ADPAC).
"PKG",26,22,1,"PAH",1,1,174,0)
 
"PKG",26,22,1,"PAH",1,1,175,0)
 
"PKG",26,22,1,"PAH",1,1,176,0)
  1.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
"PKG",26,22,1,"PAH",1,1,177,0)
        option will load the KIDS package onto your system.
"PKG",26,22,1,"PAH",1,1,178,0)
 
"PKG",26,22,1,"PAH",1,1,179,0)
  2.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
"PKG",26,22,1,"PAH",1,1,180,0)
      select the 'Installation' menu.
"PKG",26,22,1,"PAH",1,1,181,0)
 
"PKG",26,22,1,"PAH",1,1,182,0)
  3.  From this menu, you may then elect to use the following options
"PKG",26,22,1,"PAH",1,1,183,0)
      (when prompted for the INSTALL NAME, enter LR*5.2*329):
"PKG",26,22,1,"PAH",1,1,184,0)
        a. Print Transport Global
"PKG",26,22,1,"PAH",1,1,185,0)
        b. Backup a Transport Global
"PKG",26,22,1,"PAH",1,1,186,0)
        c. Compare Transport Global to Current System
"PKG",26,22,1,"PAH",1,1,187,0)
        d. Verify Checksums in Transport Global
"PKG",26,22,1,"PAH",1,1,188,0)
 
"PKG",26,22,1,"PAH",1,1,189,0)
      Use the 'Verify Checksum in Transport Global' option and verify that
"PKG",26,22,1,"PAH",1,1,190,0)
      all routines have the correct checksums.
"PKG",26,22,1,"PAH",1,1,191,0)
 
"PKG",26,22,1,"PAH",1,1,192,0)
  4.  Use the 'Install Package(s)' option under the 'Installation' menu
"PKG",26,22,1,"PAH",1,1,193,0)
      and select the package 'LR*5.2*329'.
"PKG",26,22,1,"PAH",1,1,194,0)

"PKG",26,22,1,"PAH",1,1,195,0)
      When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of 
"PKG",26,22,1,"PAH",1,1,196,0)
      Install? YES//' choose 'NO'. Responding 'Yes' to the prompt for 
"PKG",26,22,1,"PAH",1,1,197,0)
      rebuilding menu trees can significantly increase install time.
"PKG",26,22,1,"PAH",1,1,198,0)

"PKG",26,22,1,"PAH",1,1,199,0)
      When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//
"PKG",26,22,1,"PAH",1,1,200,0)
      choose 'NO'.
"PKG",26,22,1,"PAH",1,1,201,0)
 
"PKG",26,22,1,"PAH",1,1,202,0)
      When prompted 'Want to DISABLE Scheduled Options, Menu Options,
"PKG",26,22,1,"PAH",1,1,203,0)
      and Protocols? YES//', choose 'NO'.
"PKG",26,22,1,"PAH",1,1,204,0)
 
"PKG",26,22,1,"PAH",1,1,205,0)
      During install KIDS will place the Purge old orders & accessions
"PKG",26,22,1,"PAH",1,1,206,0)
      option [LROC] out of order.
"PKG",26,22,1,"PAH",1,1,207,0)
 
"PKG",26,22,1,"PAH",1,1,208,0)
 Note: Routine LR329 will be deleted after successful patch installation.
"PKG",26,22,1,"PAH",1,1,209,0)
 
"PKG",26,22,1,"PAH",1,1,210,0)
 
"PKG",26,22,1,"PAH",1,1,211,0)
INSTALLATION EXAMPLE
"PKG",26,22,1,"PAH",1,1,212,0)
====================
"PKG",26,22,1,"PAH",1,1,213,0)
 
"PKG",26,22,1,"PAH",1,1,214,0)
Select Installation Option:
"PKG",26,22,1,"PAH",1,1,215,0)
 
"PKG",26,22,1,"PAH",1,1,216,0)
Select Kernel Installation & Distribution System Option:  Installation
"PKG",26,22,1,"PAH",1,1,217,0)
 
"PKG",26,22,1,"PAH",1,1,218,0)
Select Installation Option: 6  Install Package(s)
"PKG",26,22,1,"PAH",1,1,219,0)
Select INSTALL NAME: LR*5.2*329  Loaded from Distribution  4/11/05@16:15:44
"PKG",26,22,1,"PAH",1,1,220,0)
     => LR*5.2*329
"PKG",26,22,1,"PAH",1,1,221,0)
 
"PKG",26,22,1,"PAH",1,1,222,0)
This Distribution was loaded on Apr 11, 2005@16:15:44 with header of
"PKG",26,22,1,"PAH",1,1,223,0)
   LR*5.2*329
"PKG",26,22,1,"PAH",1,1,224,0)
   It consisted of the following Install(s):
"PKG",26,22,1,"PAH",1,1,225,0)
     LR*5.2*329
"PKG",26,22,1,"PAH",1,1,226,0)
Checking Install for Package LR*5.2*329
"PKG",26,22,1,"PAH",1,1,227,0)
Will first run the Environment Check Routine, LR329
"PKG",26,22,1,"PAH",1,1,228,0)
 
"PKG",26,22,1,"PAH",1,1,229,0)
 
"PKG",26,22,1,"PAH",1,1,230,0)
               Sending install started alert to mail group G.LMI
"PKG",26,22,1,"PAH",1,1,231,0)
 
"PKG",26,22,1,"PAH",1,1,232,0)
                        --- Environment Check is Ok ---
"PKG",26,22,1,"PAH",1,1,233,0)
 
"PKG",26,22,1,"PAH",1,1,234,0)
Install Questions for LR*5.2*329
"PKG",26,22,1,"PAH",1,1,235,0)
 
"PKG",26,22,1,"PAH",1,1,236,0)
 
"PKG",26,22,1,"PAH",1,1,237,0)
Want KIDS to Rebuild Menu Trees Upon Completion of Install? YES// NO
"PKG",26,22,1,"PAH",1,1,238,0)
 
"PKG",26,22,1,"PAH",1,1,239,0)
 
"PKG",26,22,1,"PAH",1,1,240,0)
Want KIDS to INHIBIT LOGONs during the install? YES// NO
"PKG",26,22,1,"PAH",1,1,241,0)
Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
"PKG",26,22,1,"PAH",1,1,242,0)
 
"PKG",26,22,1,"PAH",1,1,243,0)
Enter the Device you want to print the Install messages.
"PKG",26,22,1,"PAH",1,1,244,0)
You can queue the install by enter a 'Q' at the device prompt.
"PKG",26,22,1,"PAH",1,1,245,0)
Enter a '^' to abort the install.
"PKG",26,22,1,"PAH",1,1,246,0)
 
"PKG",26,22,1,"PAH",1,1,247,0)
DEVICE: HOME// TELNET VIRTUAL
"PKG",26,22,1,"PAH",1,1,248,0)
 
"PKG",26,22,1,"PAH",1,1,249,0)
 
"PKG",26,22,1,"PAH",1,1,250,0)
 Install Started for LR*5.2*329 :
"PKG",26,22,1,"PAH",1,1,251,0)
               Apr 11, 2005@16:16:28
"PKG",26,22,1,"PAH",1,1,252,0)
 
"PKG",26,22,1,"PAH",1,1,253,0)
Build Distribution Date: Apr 11, 2005
"PKG",26,22,1,"PAH",1,1,254,0)
 
"PKG",26,22,1,"PAH",1,1,255,0)
 Installing Routines:...
"PKG",26,22,1,"PAH",1,1,256,0)
               Apr 11, 2005@16:16:28
"PKG",26,22,1,"PAH",1,1,257,0)
 
"PKG",26,22,1,"PAH",1,1,258,0)
 Running Pre-Install Routine: PRE^LR329.
"PKG",26,22,1,"PAH",1,1,259,0)
 
"PKG",26,22,1,"PAH",1,1,260,0)
                          *** Pre install started ***
"PKG",26,22,1,"PAH",1,1,261,0)
 
"PKG",26,22,1,"PAH",1,1,262,0)
                           *** No action required ***
"PKG",26,22,1,"PAH",1,1,263,0)
 
"PKG",26,22,1,"PAH",1,1,264,0)
                         *** Pre install completed ***
"PKG",26,22,1,"PAH",1,1,265,0)
 
"PKG",26,22,1,"PAH",1,1,266,0)
 Installing PACKAGE COMPONENTS:
"PKG",26,22,1,"PAH",1,1,267,0)
 
"PKG",26,22,1,"PAH",1,1,268,0)
 Installing OPTION..
"PKG",26,22,1,"PAH",1,1,269,0)
               Apr 11, 2005@16:16:28
"PKG",26,22,1,"PAH",1,1,270,0)
 
"PKG",26,22,1,"PAH",1,1,271,0)
 Running Post-Install Routine: POST^LR329.
"PKG",26,22,1,"PAH",1,1,272,0)
 
"PKG",26,22,1,"PAH",1,1,273,0)
                          *** Post install started ***
"PKG",26,22,1,"PAH",1,1,274,0)
 
"PKG",26,22,1,"PAH",1,1,275,0)
 *** Tasking check/cleanup "C" cross reference on ACCESSION file (#68) ***
"PKG",26,22,1,"PAH",1,1,276,0)
 
"PKG",26,22,1,"PAH",1,1,277,0)
                       *** Task #XXXX tasked to run ***
"PKG",26,22,1,"PAH",1,1,278,0)
 
"PKG",26,22,1,"PAH",1,1,279,0)
                         *** Post install completed ***
"PKG",26,22,1,"PAH",1,1,280,0)
 
"PKG",26,22,1,"PAH",1,1,281,0)
              Sending install completion alert to mail group G.LMI
"PKG",26,22,1,"PAH",1,1,282,0)
 
"PKG",26,22,1,"PAH",1,1,283,0)
 Updating Routine file......
"PKG",26,22,1,"PAH",1,1,284,0)
 
"PKG",26,22,1,"PAH",1,1,285,0)
 Updating KIDS files.......
"PKG",26,22,1,"PAH",1,1,286,0)
 
"PKG",26,22,1,"PAH",1,1,287,0)
 LR*5.2*329 Installed.
"PKG",26,22,1,"PAH",1,1,288,0)
               Apr 11, 2005@16:16:28
"PKG",26,22,1,"PAH",1,1,289,0)
 
"PKG",26,22,1,"PAH",1,1,290,0)
 Install Message sent #XXXX
"PKG",26,22,1,"PAH",1,1,291,0)

"PKG",26,22,1,"PAH",1,1,292,0)

"PKG",26,22,1,"PAH",1,1,293,0)

"PKG",26,22,1,"PAH",1,1,294,0)

"PKG",26,22,1,"PAH",1,1,295,0)

"PRE")
LR329
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","LR329")
0^^B11411168^n/a
"RTN","LR329",1,0)
LR329 ;DALOI/JMC - LR*5.2*329 PATCH ENVIRONMENT CHECK ROUTINE ;24 Jan 2004
"RTN","LR329",2,0)
 ;;5.2;LAB SERVICE;**329**;Sep 27, 1994;Build 2
"RTN","LR329",3,0)
EN ; Does not prevent loading of the transport global.
"RTN","LR329",4,0)
 ; Environment check is done only during the install.
"RTN","LR329",5,0)
 ;
"RTN","LR329",6,0)
 N XQA,XQAMSG
"RTN","LR329",7,0)
 ;
"RTN","LR329",8,0)
 I '$G(XPDENV) D  Q
"RTN","LR329",9,0)
 . S XQAMSG="Transport global for patch "_$G(XPDNM,"Unknown patch")_" loaded on "_$$HTE^XLFDT($H)
"RTN","LR329",10,0)
 . S XQA("G.LMI")=""
"RTN","LR329",11,0)
 . D SETUP^XQALERT
"RTN","LR329",12,0)
 . D BMES^XPDUTL($$CJ^XLFSTR("Sending transport global loaded alert to mail group G.LMI",80))
"RTN","LR329",13,0)
 ;
"RTN","LR329",14,0)
 S XQAMSG="Installation of patch "_$G(XPDNM,"Unknown patch")_" started on "_$$HTE^XLFDT($H)
"RTN","LR329",15,0)
 S XQA("G.LMI")=""
"RTN","LR329",16,0)
 D SETUP^XQALERT
"RTN","LR329",17,0)
 D BMES^XPDUTL($$CJ^XLFSTR("Sending install started alert to mail group G.LMI",80))
"RTN","LR329",18,0)
 ;
"RTN","LR329",19,0)
 D CHECK
"RTN","LR329",20,0)
 D EXIT
"RTN","LR329",21,0)
 Q
"RTN","LR329",22,0)
 ;
"RTN","LR329",23,0)
CHECK ; Perform environment check
"RTN","LR329",24,0)
 I $S('$G(IOM):1,'$G(IOSL):1,$G(U)'="^":1,1:0) D  Q
"RTN","LR329",25,0)
 . D BMES^XPDUTL($$CJ^XLFSTR("Terminal Device is not defined",80))
"RTN","LR329",26,0)
 . S XPDQUIT=2
"RTN","LR329",27,0)
 I $S('$G(DUZ):1,$D(DUZ)[0:1,$D(DUZ(0))[0:1,1:0) D  Q
"RTN","LR329",28,0)
 . D BMES^XPDUTL($$CJ^XLFSTR("Please log in to set local DUZ... variables",80))
"RTN","LR329",29,0)
 . S XPDQUIT=2
"RTN","LR329",30,0)
 I $P($$ACTIVE^XUSER(DUZ),"^")'=1 D  Q
"RTN","LR329",31,0)
 . D BMES^XPDUTL($$CJ^XLFSTR("You are not a valid user on this system",80))
"RTN","LR329",32,0)
 . S XPDQUIT=2
"RTN","LR329",33,0)
 S XPDIQ("XPZ1","B")="NO"
"RTN","LR329",34,0)
 Q
"RTN","LR329",35,0)
 ;
"RTN","LR329",36,0)
EXIT ;
"RTN","LR329",37,0)
 I $G(XPDQUIT) D BMES^XPDUTL($$CJ^XLFSTR("--- Install Environment Check FAILED ---",80))
"RTN","LR329",38,0)
 I '$G(XPDQUIT) D BMES^XPDUTL($$CJ^XLFSTR("--- Environment Check is Ok ---",80))
"RTN","LR329",39,0)
 Q
"RTN","LR329",40,0)
 ;
"RTN","LR329",41,0)
PRE ; KIDS Pre install
"RTN","LR329",42,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Pre install started ***",80))
"RTN","LR329",43,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** No action required ***",80))
"RTN","LR329",44,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Pre install completed ***",80))
"RTN","LR329",45,0)
 Q
"RTN","LR329",46,0)
 ;
"RTN","LR329",47,0)
POST ; KIDS Post install
"RTN","LR329",48,0)
 N XQA,XQAMSG,ZTDTH,ZTSK,ZTRTN,ZTDESC,ZTIO,ZTSAVE
"RTN","LR329",49,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Post install started ***",80))
"RTN","LR329",50,0)
 ;
"RTN","LR329",51,0)
 ; Task job to cleanup LR(68,"C" x-ref now
"RTN","LR329",52,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Tasking check/cleanup ""C"" cross reference on ACCESSION file (#68) ***",80))
"RTN","LR329",53,0)
 S ZTRTN="CHKUID^LROC",ZTDESC="Check/cleanup file #68 'C' and 'D' x-ref"
"RTN","LR329",54,0)
 S ZTIO="",ZTDTH=$H
"RTN","LR329",55,0)
 D ^%ZTLOAD
"RTN","LR329",56,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Task #"_ZTSK_" tasked to run ***",80))
"RTN","LR329",57,0)
 ;
"RTN","LR329",58,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Post install completed ***",80))
"RTN","LR329",59,0)
 D BMES^XPDUTL($$CJ^XLFSTR("Sending install completion alert to mail group G.LMI",80))
"RTN","LR329",60,0)
 ;
"RTN","LR329",61,0)
 S XQAMSG="Installation of patch "_$G(XPDNM,"Unknown patch")_" completed on "_$$HTE^XLFDT($H)
"RTN","LR329",62,0)
 S XQA("G.LMI")=""
"RTN","LR329",63,0)
 D SETUP^XQALERT
"RTN","LR329",64,0)
 ;
"RTN","LR329",65,0)
 S XQAMSG="LIM: Review description for "_$G(XPDNM,"Unknown patch")_" use KIDS:Utilities:Build File Print"
"RTN","LR329",66,0)
 S XQA("G.LMI")=""
"RTN","LR329",67,0)
 D SETUP^XQALERT
"RTN","LR329",68,0)
 Q
"RTN","LROC")
0^1^B27696934^B15121360
"RTN","LROC",1,0)
LROC ;DALOI/CJS - ORDER LIST CLEAN-UP ; 20 Apr 2005
"RTN","LROC",2,0)
 ;;5.2;LAB SERVICE;**121,295,329**;Sep 27, 1994;Build 2
"RTN","LROC",3,0)
 ; Modified slc/jer to include set/kill for "D" cross-reference
"RTN","LROC",4,0)
 ;
"RTN","LROC",5,0)
 N DA,DIR,DIROUT,DTOUT,DUOUT,LRAA,LRSAVE,LRX,MSG,X,Y
"RTN","LROC",6,0)
 D ^LROCM
"RTN","LROC",7,0)
 ;
"RTN","LROC",8,0)
 S DIR(0)="Y"
"RTN","LROC",9,0)
 S DIR("A")="Do you wish to Purge old Orders and Accessions",DIR("B")="NO"
"RTN","LROC",10,0)
 D ^DIR
"RTN","LROC",11,0)
 I Y'=1 Q
"RTN","LROC",12,0)
 ;
"RTN","LROC",13,0)
 S LRX=+$P($G(^LAB(69.9,1,0)),U,9) S:'LRX LRX=7
"RTN","LROC",14,0)
 S LRSAVE=$$FMADD^XLFDT(DT,"-"_LRX)
"RTN","LROC",15,0)
 ;
"RTN","LROC",16,0)
L1 ; Purge the daily accession areas that meet cutoff
"RTN","LROC",17,0)
 S LRAA=0
"RTN","LROC",18,0)
 F  S LRAA=$O(^LRO(68,LRAA)) Q:LRAA<1  D
"RTN","LROC",19,0)
 . I $P(^LRO(68,LRAA,0),U,3)'="D" W !,"Use File Manager to clear ",$P(^(0),U)
"RTN","LROC",20,0)
 ;
"RTN","LROC",21,0)
 N ZTSK,ZTRTN,ZTDESC,ZTIO,ZTSAVE
"RTN","LROC",22,0)
 S ZTRTN="DQ^LROC",ZTDESC="Purge old orders and accessions"
"RTN","LROC",23,0)
 S ZTIO="",ZTSAVE("LR*")=""
"RTN","LROC",24,0)
 D ^%ZTLOAD
"RTN","LROC",25,0)
 S MSG=$S($G(ZTSK):"Task #"_ZTSK_" tasked to run",1:"Tasking failed")
"RTN","LROC",26,0)
 D EN^DDIOL(MSG,"","!?2")
"RTN","LROC",27,0)
 Q
"RTN","LROC",28,0)
 ;
"RTN","LROC",29,0)
 ;
"RTN","LROC",30,0)
DQ ; Tasked entry point to clean up file #69
"RTN","LROC",31,0)
 N DA,I,J,K,LRDA
"RTN","LROC",32,0)
 ;
"RTN","LROC",33,0)
 ; Purge the daily accession areas that meet cutoff
"RTN","LROC",34,0)
 S LRAA=0
"RTN","LROC",35,0)
 F  S LRAA=$O(^LRO(68,LRAA)) Q:LRAA<1  D  Q:$G(ZTSTOP)
"RTN","LROC",36,0)
 . I $P(^LRO(68,LRAA,0),U,3)'="D" Q
"RTN","LROC",37,0)
 . I $$S^%ZTLOAD("Processing accession area: "_LRAA) S ZTSTOP=1 Q
"RTN","LROC",38,0)
 . S DA=0
"RTN","LROC",39,0)
 . F  S DA=$O(^LRO(68,LRAA,1,DA)) Q:DA<1!(LRSAVE<DA)  K ^LRO(68,LRAA,1,DA)
"RTN","LROC",40,0)
 ;
"RTN","LROC",41,0)
 I $G(ZTSTOP) Q
"RTN","LROC",42,0)
 ;
"RTN","LROC",43,0)
 S I=0
"RTN","LROC",44,0)
 F  S I=$O(^LRO(69,"C",I)) Q:I<1  D  Q:$G(ZTSTOP)
"RTN","LROC",45,0)
 . I $$S^%ZTLOAD("Processing 'C' X-REF in file #69") S ZTSTOP=1 Q
"RTN","LROC",46,0)
 . S J=0
"RTN","LROC",47,0)
 . F  S J=$O(^LRO(69,"C",I,J)) Q:J>LRSAVE!(J<1)  K ^(J)
"RTN","LROC",48,0)
 I $G(ZTSTOP) Q
"RTN","LROC",49,0)
 ;
"RTN","LROC",50,0)
 S I=0
"RTN","LROC",51,0)
 F  S I=$O(^LRO(69,"D",I)) Q:I<1  D  Q:$G(ZTSTOP)
"RTN","LROC",52,0)
 . I $$S^%ZTLOAD("Processing 'D' X-REF in file #69") S ZTSTOP=1 Q
"RTN","LROC",53,0)
 . S J=0
"RTN","LROC",54,0)
 . F  S J=$O(^LRO(69,"D",I,J)) Q:J>LRSAVE!(J<1)  K ^(J)
"RTN","LROC",55,0)
 I $G(ZTSTOP) Q
"RTN","LROC",56,0)
 ;
"RTN","LROC",57,0)
 S LRDA=1
"RTN","LROC",58,0)
 F  S LRDA=$O(^LRO(69,LRDA)) D  Q:(LRSAVE<LRDA)!(LRDA<1)  Q:$G(ZTSTOP)
"RTN","LROC",59,0)
 . I LRDA["0000" Q
"RTN","LROC",60,0)
 . I $$S^%ZTLOAD("Processing orders in file #69 for "_$$FMTE^XLFDT(LRDA)) S ZTSTOP=1 Q
"RTN","LROC",61,0)
 . S ^LRO(69,0)=$P(^LRO(69,0),U,1,2)_U_LRDA_U_($P(^(0),U,4)-1)
"RTN","LROC",62,0)
 . N LRSN
"RTN","LROC",63,0)
 . S LRSN=0
"RTN","LROC",64,0)
 . F  S LRSN=$O(^LRO(69,LRDA,1,LRSN)) Q:LRSN<1  D NEW^LR7OB1(LRDA,LRSN,"Z@") ; Call OE/RR
"RTN","LROC",65,0)
 . K ^LRO(69,LRDA),^LRO(69,"B",LRDA,LRDA)
"RTN","LROC",66,0)
 ;
"RTN","LROC",67,0)
 I LRDA<1 S ^LRO(69,0)=$P(^(0),U,1,2)
"RTN","LROC",68,0)
 I $G(ZTSTOP) Q
"RTN","LROC",69,0)
 ;
"RTN","LROC",70,0)
 D CHKUID
"RTN","LROC",71,0)
 I $G(ZTSTOP) Q
"RTN","LROC",72,0)
 D ^LROC1
"RTN","LROC",73,0)
 K LRSAVE
"RTN","LROC",74,0)
 ;
"RTN","LROC",75,0)
 Q
"RTN","LROC",76,0)
 ;
"RTN","LROC",77,0)
 ;
"RTN","LROC",78,0)
CENDEL ;
"RTN","LROC",79,0)
 W !,"STARTING CENTRAL ENTRY #: " R LRSTA:DTIME S LRSTA=LRSTA-1
"RTN","LROC",80,0)
 S U="^" W !,"ENDING CENTRAL ENTRY #: " R LRFIN:DTIME
"RTN","LROC",81,0)
 W !,"ARE YOU SURE? N//" D % Q:%'["Y"
"RTN","LROC",82,0)
 S ZTRTN="REENTRY^LROC",ZTIO="",ZTSAVE("L*")=""
"RTN","LROC",83,0)
 D ^%ZTLOAD
"RTN","LROC",84,0)
 K IO("Q"),ZTSK,ZTRTN,ZTIO,ZTSAVE
"RTN","LROC",85,0)
 K %H,%ZA,%ZB,%ZC,DA,I,J,LRAA,LRAN,LRDFN,LRDTM,LRDTN,LRFIN,LRIDT,LRIOZERO,LRLOST,LROCN,LROID,LRORD,LROSN,LRSAVE,LRSN,LRSS,LRSTA,POP,Z
"RTN","LROC",86,0)
 Q
"RTN","LROC",87,0)
 ;
"RTN","LROC",88,0)
 ;
"RTN","LROC",89,0)
REENTRY ;
"RTN","LROC",90,0)
 S LRORD=LRSTA
"RTN","LROC",91,0)
 F  S LRORD=$O(^LRO(69,"C",LRORD)) Q:LRORD<1!(LRORD>LRFIN)  D FDAT
"RTN","LROC",92,0)
 Q
"RTN","LROC",93,0)
 ;
"RTN","LROC",94,0)
 ;
"RTN","LROC",95,0)
FDAT ;
"RTN","LROC",96,0)
 S LRDTN=0
"RTN","LROC",97,0)
 F  S LRDTN=$O(^LRO(69,"C",LRORD,LRDTN)) Q:LRDTN<1  D ZAP
"RTN","LROC",98,0)
 Q
"RTN","LROC",99,0)
 ;
"RTN","LROC",100,0)
 ;
"RTN","LROC",101,0)
ZAP ;
"RTN","LROC",102,0)
 S LRSN=0
"RTN","LROC",103,0)
 F  S LRSN=$O(^LRO(69,"C",+LRORD,LRDTN,LRSN)) Q:LRSN<1  D
"RTN","LROC",104,0)
 . D NEW^LR7OB1(LRDTN,LRSN,"Z@") ;Call OE/RR
"RTN","LROC",105,0)
 . K ^LRO(69,"C",+LRORD,LRDTN,LRSN) Q:'$D(^LRO(69,LRDTN,1,LRSN,0))  S LRDFN=+^(0)
"RTN","LROC",106,0)
 . K ^LRO(69,LRDTN,1,LRSN),^LRO(69,LRDTN,1,"AA",LRDFN,LRSN),^LRO(69,"D",LRDFN,LRDTN,LRSN)
"RTN","LROC",107,0)
 S LRAA=0
"RTN","LROC",108,0)
 F  S LRAA=$O(^LRO(68,LRAA)) Q:LRAA<1  D:$P(^(LRAA,0),U,10)="Y" LRORD
"RTN","LROC",109,0)
 Q
"RTN","LROC",110,0)
 ;
"RTN","LROC",111,0)
 ;
"RTN","LROC",112,0)
LRORD ;
"RTN","LROC",113,0)
 S LRAN=$O(^LRO(68,LRAA,1,LRDTN,1,"D",LRORD,0)) Q:LRAN<1
"RTN","LROC",114,0)
 Q:'$D(^LRO(68,LRAA,1,LRDTN,1,LRAN,0))
"RTN","LROC",115,0)
 S LRSS=$P(^LRO(68,LRAA,0),"^",2)
"RTN","LROC",116,0)
 S LRDFN=+^LRO(68,LRAA,1,LRDTN,1,LRAN,0) G:'$D(^(3)) SKPLR S LRDTM=+^LRO(68,LRAA,1,LRDTN,1,LRAN,3) G:'LRDTM SKPLR S LRIDT=9999999-LRDTM
"RTN","LROC",117,0)
 I $D(^LR(LRDFN,LRSS,LRIDT,0)),$P(^(0),U,3) Q
"RTN","LROC",118,0)
 K ^LR(LRDFN,LRSS,LRIDT)
"RTN","LROC",119,0)
 I LRSS="CH" D CHKILL^LRPX(LRDFN,LRIDT)
"RTN","LROC",120,0)
 ;
"RTN","LROC",121,0)
SKPLR S X=^LRO(68,LRAA,1,LRDTN,1,LRAN,0),LROSN=$P(X,U,5),LROID=$P(X,U,6),LROCN=$S($D(^(.1)):$P(^(.1),U),1:"")
"RTN","LROC",122,0)
 K:$L(LROID) ^LRO(68,LRAA,1,LRDTN,1,"C",LROID,LRAN)
"RTN","LROC",123,0)
 K:$L(LROCN) ^LRO(68,LRAA,1,LRDTN,1,"D",LROCN,LRAN)
"RTN","LROC",124,0)
 K ^LRO(68,LRAA,1,LRDTN,1,LRAN)
"RTN","LROC",125,0)
 W "."
"RTN","LROC",126,0)
 Q
"RTN","LROC",127,0)
 ;
"RTN","LROC",128,0)
 ;
"RTN","LROC",129,0)
% R %:DTIME Q:%=""!(%["N")!(%["Y")  W !,"Answer 'Y' or 'N': " G %
"RTN","LROC",130,0)
 Q
"RTN","LROC",131,0)
 ;
"RTN","LROC",132,0)
 ;
"RTN","LROC",133,0)
CHKUID ; Check UID's for purged accessions
"RTN","LROC",134,0)
 ;
"RTN","LROC",135,0)
 N LRAA,LRAD,LRAN,LRCNT,LRROOT
"RTN","LROC",136,0)
 ;
"RTN","LROC",137,0)
 ; Check "C" cross-reference
"RTN","LROC",138,0)
 S LRROOT="^LRO(68,""C"")",(LRAA,LRAD,LRAN,LRCNT)=0
"RTN","LROC",139,0)
 F  S LRROOT=$Q(@LRROOT) Q:LRROOT=""  Q:$QS(LRROOT,2)'="C"  D CHKACN Q:$G(ZTSTOP)
"RTN","LROC",140,0)
 ;
"RTN","LROC",141,0)
 ; Check "D" cross-reference
"RTN","LROC",142,0)
 S LRROOT="^LRO(68,""D"")",(LRAA,LRAD,LRAN,LRCNT)=0
"RTN","LROC",143,0)
 F  S LRROOT=$Q(@LRROOT) Q:LRROOT=""  Q:$QS(LRROOT,2)'="D"  D CHKACN Q:$G(ZTSTOP)
"RTN","LROC",144,0)
 Q
"RTN","LROC",145,0)
 ;
"RTN","LROC",146,0)
CHKACN ; Check for deleted corresponding accession.
"RTN","LROC",147,0)
 S LRAA=$QS(LRROOT,4),LRAD=$QS(LRROOT,5),LRAN=$QS(LRROOT,6)
"RTN","LROC",148,0)
 S LRCNT=LRCNT+1
"RTN","LROC",149,0)
 ; take a "rest" - allow OS to swap out process
"RTN","LROC",150,0)
 ; Check if task has been requested to stop
"RTN","LROC",151,0)
 I '(LRCNT#10000) D  Q:$G(ZTSTOP)
"RTN","LROC",152,0)
 . I $$S^%ZTLOAD("Processing UID: "_$QS(LRROOT,3)) S ZTSTOP=1 Q
"RTN","LROC",153,0)
 . H 2
"RTN","LROC",154,0)
 I $D(^LRO(68,LRAA,1,LRAD,1,LRAN,0)) Q
"RTN","LROC",155,0)
 K @LRROOT
"RTN","LROC",156,0)
 Q
"VER")
8.0^22.0
"BLD",6303,6)
^277
**END**
**END**

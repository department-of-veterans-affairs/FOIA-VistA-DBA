Released ECX*3*64 SEQ #60
Extracted from mail message
**KIDS**:ECX*3.0*64^

**INSTALL NAME**
ECX*3.0*64
"BLD",5221,0)
ECX*3.0*64^DSS EXTRACTS^0^3040107^y
"BLD",5221,1,0)
^^5^5^3031119^
"BLD",5221,1,1,0)
 
"BLD",5221,1,2,0)
The QUASAR Extract [ECXQSR] is incorrectly pulling invalid provider
"BLD",5221,1,3,0)
numbers from the QUASAR A&SP Visit File.  The extract is pulling the A&SP
"BLD",5221,1,4,0)
provider without using the A&SP provider pointer logic resulting in an
"BLD",5221,1,5,0)
invalid NEW PERSON file lookup.
"BLD",5221,4,0)
^9.64PA^^
"BLD",5221,"ABPKG")
n
"BLD",5221,"KRN",0)
^9.67PA^8989.52^19
"BLD",5221,"KRN",.4,0)
.4
"BLD",5221,"KRN",.401,0)
.401
"BLD",5221,"KRN",.402,0)
.402
"BLD",5221,"KRN",.403,0)
.403
"BLD",5221,"KRN",.5,0)
.5
"BLD",5221,"KRN",.84,0)
.84
"BLD",5221,"KRN",3.6,0)
3.6
"BLD",5221,"KRN",3.8,0)
3.8
"BLD",5221,"KRN",9.2,0)
9.2
"BLD",5221,"KRN",9.8,0)
9.8
"BLD",5221,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5221,"KRN",9.8,"NM",1,0)
ECXQSR^^0^B54693431
"BLD",5221,"KRN",9.8,"NM","B","ECXQSR",1)

"BLD",5221,"KRN",19,0)
19
"BLD",5221,"KRN",19,"NM",0)
^9.68A^^
"BLD",5221,"KRN",19.1,0)
19.1
"BLD",5221,"KRN",101,0)
101
"BLD",5221,"KRN",409.61,0)
409.61
"BLD",5221,"KRN",771,0)
771
"BLD",5221,"KRN",870,0)
870
"BLD",5221,"KRN",8989.51,0)
8989.51
"BLD",5221,"KRN",8989.52,0)
8989.52
"BLD",5221,"KRN",8994,0)
8994
"BLD",5221,"KRN","B",.4,.4)

"BLD",5221,"KRN","B",.401,.401)

"BLD",5221,"KRN","B",.402,.402)

"BLD",5221,"KRN","B",.403,.403)

"BLD",5221,"KRN","B",.5,.5)

"BLD",5221,"KRN","B",.84,.84)

"BLD",5221,"KRN","B",3.6,3.6)

"BLD",5221,"KRN","B",3.8,3.8)

"BLD",5221,"KRN","B",9.2,9.2)

"BLD",5221,"KRN","B",9.8,9.8)

"BLD",5221,"KRN","B",19,19)

"BLD",5221,"KRN","B",19.1,19.1)

"BLD",5221,"KRN","B",101,101)

"BLD",5221,"KRN","B",409.61,409.61)

"BLD",5221,"KRN","B",771,771)

"BLD",5221,"KRN","B",870,870)

"BLD",5221,"KRN","B",8989.51,8989.51)

"BLD",5221,"KRN","B",8989.52,8989.52)

"BLD",5221,"KRN","B",8994,8994)

"BLD",5221,"QUES",0)
^9.62^^
"BLD",5221,"REQB",0)
^9.611^1^1
"BLD",5221,"REQB",1,0)
ECX*3.0*49^2
"BLD",5221,"REQB","B","ECX*3.0*49",1)

"MBREQ")
0
"PKG",535,-1)
1^1
"PKG",535,0)
DSS EXTRACTS^ECX
"PKG",535,20,0)
^9.402P^^
"PKG",535,22,0)
^9.49I^1^1
"PKG",535,22,1,0)
3.0^2971222^3000224^66481
"PKG",535,22,1,"PAH",1,0)
64^3040107
"PKG",535,22,1,"PAH",1,1,0)
^^5^5^3040107
"PKG",535,22,1,"PAH",1,1,1,0)
 
"PKG",535,22,1,"PAH",1,1,2,0)
The QUASAR Extract [ECXQSR] is incorrectly pulling invalid provider
"PKG",535,22,1,"PAH",1,1,3,0)
numbers from the QUASAR A&SP Visit File.  The extract is pulling the A&SP
"PKG",535,22,1,"PAH",1,1,4,0)
provider without using the A&SP provider pointer logic resulting in an
"PKG",535,22,1,"PAH",1,1,5,0)
invalid NEW PERSON file lookup.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","ECXQSR")
0^1^B54693431
"RTN","ECXQSR",1,0)
ECXQSR ;ALB/JAP,BIR/PTD-DSS QUASAR Extract ; 8/28/02 1:13pm
"RTN","ECXQSR",2,0)
 ;;3.0;DSS EXTRACTS;**11,8,13,26,24,34,33,35,39,43,46,49,64**;Dec 22, 1997
"RTN","ECXQSR",3,0)
BEG ;entry point from option
"RTN","ECXQSR",4,0)
 I '$O(^ACK(509850.8,0)) W !,"You must be using the Quality Audiology & Speech Pathology",!,"Audit & Review (QUASAR) software to run this extract.",!! Q
"RTN","ECXQSR",5,0)
 I '$D(^ACK(509850.8,1,"DSS")) W !,"Linkage has not been established between QUASAR and the DSS UNIT file (#724).",!! Q
"RTN","ECXQSR",6,0)
 I '$O(^ACK(509850.6,0)) W !,"There is no data in the A&SP CLINIC VISIT file (#509850.6).",!! Q
"RTN","ECXQSR",7,0)
 D SETUP I ECFILE="" Q
"RTN","ECXQSR",8,0)
 D ^ECXTRAC,^ECXKILL
"RTN","ECXQSR",9,0)
 Q
"RTN","ECXQSR",10,0)
 ;
"RTN","ECXQSR",11,0)
START ;entry point from tasked job
"RTN","ECXQSR",12,0)
 N ERR,ECXQDT
"RTN","ECXQSR",13,0)
 S QFLG=0,ECED=ECED+.9,ECD=ECSD1,ECXQV=""
"RTN","ECXQSR",14,0)
 D QINST I $D(ERR) Q
"RTN","ECXQSR",15,0)
 S ECL=+^ACK(509850.8,1,0),ECLINK=^ACK(509850.8,1,"DSS")
"RTN","ECXQSR",16,0)
 F  S ECD=$O(^ACK(509850.6,"B",ECD)),ECDA=0 Q:(ECD>ECED)!('ECD)!(QFLG)  D
"RTN","ECXQSR",17,0)
 .I +ECXQV=3,ECD<ECXQDT S ECXQV=2.0
"RTN","ECXQSR",18,0)
 .F  S ECDA=$O(^ACK(509850.6,"B",ECD,ECDA)) Q:'ECDA  D UPDATE Q:QFLG
"RTN","ECXQSR",19,0)
 Q
"RTN","ECXQSR",20,0)
 ;
"RTN","ECXQSR",21,0)
QINST ;Get installed information for QUASAR
"RTN","ECXQSR",22,0)
 N ARR,IENS,QVIEN,INTIEN
"RTN","ECXQSR",23,0)
 S ECXQDT=""
"RTN","ECXQSR",24,0)
 D FILE^DID(509850.6,,"VERSION","ARR","ERR")
"RTN","ECXQSR",25,0)
 S ECXQV=$G(ARR("VERSION")) I +ECXQV=0 S ERR=1 Q
"RTN","ECXQSR",26,0)
 S QVIEN=$$FIND1^DIC(9.4,"","X","QUASAR") I +QVIEN<1 S ERR=1 Q
"RTN","ECXQSR",27,0)
 S IENS=","_QVIEN_","
"RTN","ECXQSR",28,0)
 S INTIEN=$$FIND1^DIC(9.49,IENS,"X",ECXQV) I +INTIEN<1 S ERR=1 Q
"RTN","ECXQSR",29,0)
 S IENS=INTIEN_","_QVIEN,ECXQDT=$$GET1^DIQ(9.49,IENS,2,"I")
"RTN","ECXQSR",30,0)
 Q
"RTN","ECXQSR",31,0)
 ;
"RTN","ECXQSR",32,0)
UPDATE ;create record for each unique CPT code for clinic visit 
"RTN","ECXQSR",33,0)
 N ARY,ECZNODE,CPT,LOC,MOD,STR,VOL,XX,ECTP,ECV
"RTN","ECXQSR",34,0)
 Q:'$D(^ACK(509850.6,ECDA,0))
"RTN","ECXQSR",35,0)
 S ECZNODE=^ACK(509850.6,ECDA,0),EC2NODE=$G(^ACK(509850.6,ECDA,2))
"RTN","ECXQSR",36,0)
 S ECDT=$P(ECZNODE,U),ECDAY=$$ECXDATE^ECXUTL(ECDT,ECXYM)
"RTN","ECXQSR",37,0)
 S ECTIME=$$ECXTIME^ECXUTL(ECDT) S:$P(ECDT,".",2)="" ECTIME="000000"
"RTN","ECXQSR",38,0)
 S ECXDFN=$P(ECZNODE,U,2)
"RTN","ECXQSR",39,0)
 Q:'$$PATDEM^ECXUTL2(ECXDFN,ECD,"1;3;5")
"RTN","ECXQSR",40,0)
 S ECHL=""
"RTN","ECXQSR",41,0)
 S ECXDIV=$P($G(^ACK(509850.6,ECDA,5)),U),ECSTOP=$P(EC2NODE,U)
"RTN","ECXQSR",42,0)
 S ECXPDIV=$$GETDIV^ECXDEPT(ECXDIV)  ; Get Production Division
"RTN","ECXQSR",43,0)
 Q:ECSTOP=""
"RTN","ECXQSR",44,0)
 S (ECHLS,ECHL2S)="000",ECAC=$P($G(ECZNODE),U,6)
"RTN","ECXQSR",45,0)
 I ECAC D
"RTN","ECXQSR",46,0)
 .S ECHL=+$P($G(^SC(ECAC,0)),U,7),ECHL2=+$P($G(^(0)),U,18) I ECHL D
"RTN","ECXQSR",47,0)
 ..S ECHLS=$P($G(^DIC(40.7,+ECHL,0)),U,2)
"RTN","ECXQSR",48,0)
 ..S ECHL2S=$P($G(^DIC(40.7,+ECHL2,0)),U,2)
"RTN","ECXQSR",49,0)
 ..S ECHLS=$$RJ^XLFSTR(ECHLS,3,0),ECHL2S=$$RJ^XLFSTR(ECHL2S,3,0)
"RTN","ECXQSR",50,0)
 S ECDSS=ECHLS_ECHL2S
"RTN","ECXQSR",51,0)
 I ECXLOGIC>2003 D
"RTN","ECXQSR",52,0)
 .I "^18^23^24^36^41^65^94^"[("^"_ECXTS_"^") S ECDSS=$$TSMAP^ECXUTL4(ECXTS)
"RTN","ECXQSR",53,0)
 S ECDU=$S(ECSTOP["A":$P(ECLINK,U),ECSTOP["S":$P(ECLINK,U,2),1:"")
"RTN","ECXQSR",54,0)
 Q:'ECDU
"RTN","ECXQSR",55,0)
 S ECDSSU=$G(^ECD(ECDU,0)),ECCS=+$P(ECDSSU,U,4),(ECO,ECM)=+$P(ECDSSU,U,3),ECXDSSD=$E($P(ECDSSU,U,5),1,10)
"RTN","ECXQSR",56,0)
 Q:'$O(^ACK(509850.6,ECDA,3,0))
"RTN","ECXQSR",57,0)
 ;Create local array of procedure codes and # of times each procedure
"RTN","ECXQSR",58,0)
 ; was performed.
"RTN","ECXQSR",59,0)
 F I=1:1:4 S @("ECXICD9"_I)=""
"RTN","ECXQSR",60,0)
 S (ECDIA,ECXMST,ECXPPC,ECXPRV1,ECXPRV2,ECXPRV3,ECUN1NPI)=""
"RTN","ECXQSR",61,0)
 ;if QUASAR v2
"RTN","ECXQSR",62,0)
 I +ECXQV=2 D
"RTN","ECXQSR",63,0)
 .S ECXPRV1=$P(EC2NODE,U,7),ECXPRV2=$P(EC2NODE,U,3)
"RTN","ECXQSR",64,0)
 .S ECXPRV3=$P(EC2NODE,U,5),ECPN=0
"RTN","ECXQSR",65,0)
 .F  S ECPN=$O(^ACK(509850.6,ECDA,3,ECPN)) Q:'ECPN  D
"RTN","ECXQSR",66,0)
 ..S XX=^ACK(509850.6,ECDA,3,ECPN,0),XX=$P(XX,U)
"RTN","ECXQSR",67,0)
 ..S XX=$P($G(^ACK(509850.4,XX,0)),U),ECXCPT=$E($$CPT^ECXUTL3(XX),1,5)
"RTN","ECXQSR",68,0)
 ..I ECXCPT]"" D
"RTN","ECXQSR",69,0)
 ...I '$D(LOC(ECXCPT)) S LOC(ECXCPT)=0_U_ECXPRV1
"RTN","ECXQSR",70,0)
 ...S $P(LOC(ECXCPT),U)=$P(LOC(ECXCPT),U)+1
"RTN","ECXQSR",71,0)
 .S ECIEN=$O(^ACK(509850.6,ECDA,1,0))
"RTN","ECXQSR",72,0)
 .S ECDIA=$P($G(^ICD9(+$G(^ACK(509850.6,ECDA,1,ECIEN,0)),0)),U)
"RTN","ECXQSR",73,0)
 .F I=1:1:4 S ECIEN=$O(^ACK(509850.6,ECDA,1,ECIEN)) Q:'+ECIEN  D
"RTN","ECXQSR",74,0)
 ..S @("ECXICD9"_I)=$P($G(^ICD9(+$P(^ACK(509850.6,ECDA,1,ECIEN,0),U),0)),U)
"RTN","ECXQSR",75,0)
 ;if QUASAR v3
"RTN","ECXQSR",76,0)
 I +ECXQV=3 D
"RTN","ECXQSR",77,0)
 .N CPT,DIA,I,J,MOD,MOD1,P,STR,VOL,ECTP,ARY,ECP,ECPN
"RTN","ECXQSR",78,0)
 .S ECXMST=$P(EC2NODE,U,9),ECXMST=$S(ECXMST=1:"Y",ECXMST=0:"N",1:"")
"RTN","ECXQSR",79,0)
 .S ECXPRV2=$G(^ACK(509850.6,ECDA,2.7,1,0))
"RTN","ECXQSR",80,0)
 .S ECXPRV3=$G(^ACK(509850.6,ECDA,2.7,2,0))
"RTN","ECXQSR",81,0)
 .S ECPN=0
"RTN","ECXQSR",82,0)
 .F  S ECPN=$O(^ACK(509850.6,ECDA,3,ECPN)) Q:'ECPN  D
"RTN","ECXQSR",83,0)
 ..S CPT=^ACK(509850.6,ECDA,3,ECPN,0)
"RTN","ECXQSR",84,0)
 ..S ECXCPT=$P(CPT,U),ECTP=+$P(CPT,U,5),ECV=1,ECP=""
"RTN","ECXQSR",85,0)
 ..Q:ECXCPT=""
"RTN","ECXQSR",86,0)
 ..I ECTP D
"RTN","ECXQSR",87,0)
 ...S CPT=$G(^ACK(509850.6,ECDA,7,ECTP,0)),ECP=$P(CPT,U)
"RTN","ECXQSR",88,0)
 ...S ECP=$S(ECP<90000:$P($G(^EC(725,+ECP,0)),U,2)_"N",1:$P($G(^EC(725,+ECP,0)),U,2)_"L")
"RTN","ECXQSR",89,0)
 ...S VOL=+$P(CPT,U,2),ECXPRV1=$P(CPT,U,3)
"RTN","ECXQSR",90,0)
 ..I 'ECTP D
"RTN","ECXQSR",91,0)
 ...S VOL=+$P(CPT,U,3),ECXPRV1=$P(CPT,U,4)
"RTN","ECXQSR",92,0)
 ..S ECXCPT=$E($$CPT^ECXUTL3(ECXCPT),1,5)
"RTN","ECXQSR",93,0)
 ..S ECXMOD="",MOD=0
"RTN","ECXQSR",94,0)
 ..F  S MOD=$O(^ACK(509850.6,ECDA,3,ECPN,1,MOD)) Q:'MOD  D
"RTN","ECXQSR",95,0)
 ...S MOD1=+^ACK(509850.6,ECDA,3,ECPN,1,MOD,0) D:MOD1
"RTN","ECXQSR",96,0)
 ....S ECXMOD=ECXMOD_MOD1_";"
"RTN","ECXQSR",97,0)
 ..F I=1:1:$L(ECXMOD,";") I $G(ARY(ECXCPT))'[$P(ECXMOD,";",I) D
"RTN","ECXQSR",98,0)
 ...S ARY(ECXCPT)=$G(ARY(ECXCPT))_$P(ECXMOD,";",I)_";"
"RTN","ECXQSR",99,0)
 ..S:VOL ECV=VOL
"RTN","ECXQSR",100,0)
 ..S ECV=ECV+$G(LOC(ECXCPT))
"RTN","ECXQSR",101,0)
 ..S LOC(ECXCPT)=ECV_U_ECXPRV1_U_ECP
"RTN","ECXQSR",102,0)
 .S ECIEN=0
"RTN","ECXQSR",103,0)
 .F  S ECIEN=$O(^ACK(509850.6,ECDA,1,ECIEN)) Q:'ECIEN  D
"RTN","ECXQSR",104,0)
 ..S DIA=^ACK(509850.6,ECDA,1,ECIEN,0)
"RTN","ECXQSR",105,0)
 ..S P=$P(DIA,U,2),P=$S(P=1:"P",1:"S"),CNT=$G(STR(P))+1
"RTN","ECXQSR",106,0)
 ..S STR(P,CNT)=$P($G(^ICD9(+DIA,0)),U),STR(P)=CNT
"RTN","ECXQSR",107,0)
 .S ECDIA=$G(STR("P",1))
"RTN","ECXQSR",108,0)
 .F I=1:1:4 Q:'$D(STR("P",I+1))  S @("ECXICD9"_I)=STR("P",I)
"RTN","ECXQSR",109,0)
 .S:ECDIA="" ECDIA=$G(STR("S",1)),I=2
"RTN","ECXQSR",110,0)
 .F J=I:1:4 Q:'$D(STR("S",J))  S @("ECXICD9"_J)=STR("S",J)
"RTN","ECXQSR",111,0)
 Q:('$D(LOC))!('$O(^ACK(509850.6,ECDA,1,0)))
"RTN","ECXQSR",112,0)
 ;
"RTN","ECXQSR",113,0)
 ;- Ord Div, Contrct St/End Dates, Contrct Type placeholders for FY2002
"RTN","ECXQSR",114,0)
 S (ECXODIV,ECXCSDT,ECXCEDT,ECXCTYP)=""
"RTN","ECXQSR",115,0)
 ;set up Provider Person class
"RTN","ECXQSR",116,0)
 S (ECXCPT,ECXPPC1,ECXPPC2,ECXPPC3)=""
"RTN","ECXQSR",117,0)
 S:ECXPRV2'="" ECXPPC2=$$PRVCLASS^ECXUTL(ECXPRV2,ECD)
"RTN","ECXQSR",118,0)
 S:ECXPRV3'="" ECXPPC3=$$PRVCLASS^ECXUTL(ECXPRV3,ECD)
"RTN","ECXQSR",119,0)
 N DA,DIC,DIK,DR,FILEN,DIQ,XVAR,II,DI
"RTN","ECXQSR",120,0)
 F II=2,3 S XVAR="ECXPRV"_II I @XVAR'="" D
"RTN","ECXQSR",121,0)
 .S DA=@XVAR,(DIC,FILEN)=509850.3,DR=".01",DIQ="ECXQSR",DIQ(0)="I" D EN^DIQ1
"RTN","ECXQSR",122,0)
 .S DA=ECXQSR(FILEN,DA,DR,"I"),(DIC,FILEN)=8930.3 D EN^DIQ1 S @XVAR=2_ECXQSR(FILEN,DA,DR,"I") K DA,DIC,DR,DIQ,ECXQSR
"RTN","ECXQSR",123,0)
 ;
"RTN","ECXQSR",124,0)
 ;- Observation Patient Indicator (yes/no)
"RTN","ECXQSR",125,0)
 S ECXOBS=$$OBSPAT^ECXUTL4(ECXA,ECXTS,ECDSS)
"RTN","ECXQSR",126,0)
 ;
"RTN","ECXQSR",127,0)
 ;- CNH status (YES/NO)
"RTN","ECXQSR",128,0)
 S ECXCNH=$$CNHSTAT^ECXUTL4(ECXDFN)
"RTN","ECXQSR",129,0)
 ;
"RTN","ECXQSR",130,0)
 ; - Head and Neck Cancer Indicator
"RTN","ECXQSR",131,0)
 S ECXHNCI=$$HNCI^ECXUTL4(ECXDFN)
"RTN","ECXQSR",132,0)
 ;
"RTN","ECXQSR",133,0)
 ;- If no encounter number don't file record
"RTN","ECXQSR",134,0)
 S ECXENC=$$ENCNUM^ECXUTL4(ECXA,ECXSSN,ECXADMDT,ECDT,ECXTS,ECXOBS,ECHEAD,ECDSS,)
"RTN","ECXQSR",135,0)
 Q:ECXENC=""
"RTN","ECXQSR",136,0)
 ;Loop through array of unique procedures. Create record in ECODE.
"RTN","ECXQSR",137,0)
 S CPT=""
"RTN","ECXQSR",138,0)
 F  S CPT=$O(LOC(CPT)) Q:CPT=""  D
"RTN","ECXQSR",139,0)
 .S ECV=+$P(LOC(CPT),U),ECXCPT=$$CPT^ECXUTL3(CPT,$G(ARY(CPT)),ECV)
"RTN","ECXQSR",140,0)
 .S ECXPRV1=$P(LOC(CPT),U,2)
"RTN","ECXQSR",141,0)
 .S:ECXPRV1'="" ECXPPC1=$$PRVCLASS^ECXUTL(ECXPRV1,ECD)
"RTN","ECXQSR",142,0)
 .S ECP=$P(LOC(CPT),U,3) I ECP="" S ECP=$$CPT^ECXUTL3(CPT,"",ECV)
"RTN","ECXQSR",143,0)
 .D FILE
"RTN","ECXQSR",144,0)
 K CPT,LOC
"RTN","ECXQSR",145,0)
 Q
"RTN","ECXQSR",146,0)
 ;
"RTN","ECXQSR",147,0)
FILE ;file record in #727.825
"RTN","ECXQSR",148,0)
 ;node0
"RTN","ECXQSR",149,0)
 ;inst^dfn ECXDFN^ssn ECXSSN^name ECXPNM^i/o status ECXA^
"RTN","ECXQSR",150,0)
 ;day ECDAY^DSS unit ECDU^^
"RTN","ECXQSR",151,0)
 ;category ECPTTM^procedure ECP^volume ECV^
"RTN","ECXQSR",152,0)
 ;cost center ^ordering sec ^section^
"RTN","ECXQSR",153,0)
 ;provider ECXPRV1^ECXPPC1^ECXPRV2^ECXPPC2^ECXPRV3^ECXPPC3^
"RTN","ECXQSR",154,0)
 ;mov # ECXMN^treat spec ECXTS^time ECTIME^
"RTN","ECXQSR",155,0)
 ;primary care team ECPTTM^
"RTN","ECXQSR",156,0)
 ;primary care provider ECPTPR^pce cpt code & modifers ECXCPT^
"RTN","ECXQSR",157,0)
 ;primary icd-9 code ECDIA^secondary icd-9 #1 ECXICD91^
"RTN","ECXQSR",158,0)
 ;secondary icd-9 #2 ECXICD92^secondary icd-9 #3 ECXICD93^
"RTN","ECXQSR",159,0)
 ;secondary icd-9 #4 ECXICD94^agent orange ECXAST^
"RTN","ECXQSR",160,0)
 ;radiation exposure ECRE^
"RTN","ECXQSR",161,0)
 ;environmental contaminants ECENV^
"RTN","ECXQSR",162,0)
 ;service connected ECSC^sent to pce^^dss identifier ECDSS^placeholder
"RTN","ECXQSR",163,0)
 ;node1
"RTN","ECXQSR",164,0)
 ;mpi ECXNPI^dss dept ECXDSSD^provider npi ECUN1NPI^^^
"RTN","ECXQSR",165,0)
 ;pc prov person class ECPTNPI^assoc pc provider ECASPR^
"RTN","ECXQSR",166,0)
 ;assoc pc prov person class ECCLAS2^assoc pc provider npi ECASNPI^
"RTN","ECXQSR",167,0)
 ;divison ECXDIV^dom ECXDOM^enrollment category ECXCAT^
"RTN","ECXQSR",168,0)
 ;enrollment status ECXSTAT^enrollment priority ECXPRIOR^
"RTN","ECXQSR",169,0)
 ;period of service ECXPOS^purple heart ECXPHI^observ pat ind ECXOBS^
"RTN","ECXQSR",170,0)
 ;encounter num ECXENC^ao loc ECXAOL^ord div ECXODIV^contr st dt ECXCSDT^
"RTN","ECXQSR",171,0)
 ;contr end dt ECXCEDT^contr typ ECXCTYP^CNH stat ECXCNH^
"RTN","ECXQSR",172,0)
 ;production division ECXPDIV^eligibility ECXELIG^ethnicity ECXETH^
"RTN","ECXQSR",173,0)
 ;race1 ECXRC1^enrollment location ECXENRL
"RTN","ECXQSR",174,0)
 N DA,DIC,DIK,FILEN,DR,DIQ,XVAR,II,DI
"RTN","ECXQSR",175,0)
 S XVAR="ECXPRV1" I @XVAR'="" D
"RTN","ECXQSR",176,0)
 .S DA=@XVAR,(DIC,FILEN)=509850.3,DR=".01",DIQ="ECXQSR",DIQ(0)="I" D EN^DIQ1
"RTN","ECXQSR",177,0)
 .S DA=ECXQSR(FILEN,DA,DR,"I"),(DIC,FILEN)=8930.3 D EN^DIQ1 S @XVAR=2_ECXQSR(FILEN,DA,DR,"I") K DA,DIC,DR,DIQ,ECXQSR
"RTN","ECXQSR",178,0)
 S EC7=$O(^ECX(ECFILE,999999999),-1),EC7=EC7+1
"RTN","ECXQSR",179,0)
 S ECODE=EC7_U_EC23_U
"RTN","ECXQSR",180,0)
 S ECODE=ECODE_ECL_U_ECXDFN_U_ECXSSN_U_ECXPNM_U_ECXA_U_ECDAY_U_ECDU_U_U
"RTN","ECXQSR",181,0)
 S ECODE=ECODE_ECP_U_ECV_U_ECCS_U_ECO_U_ECM_U_ECXPRV1_U_ECXPPC1_U
"RTN","ECXQSR",182,0)
 S ECODE=ECODE_ECXPRV2_U_ECXPPC2_U_ECXPRV3_U_ECXPPC3_U_U
"RTN","ECXQSR",183,0)
 S ECODE=ECODE_ECXMN_U_ECXTS_U_ECTIME_U_ECPTTM_U
"RTN","ECXQSR",184,0)
 S ECODE=ECODE_ECPTPR_U_ECXCPT_U_ECDIA_U_ECXICD91_U_ECXICD92_U
"RTN","ECXQSR",185,0)
 S ECODE=ECODE_ECXICD93_U_ECXICD94_U_ECXAST_U_ECXRST_U_ECXEST_U
"RTN","ECXQSR",186,0)
 S ECODE=ECODE_ECSC_U_"N"_U_U_ECDSS_U_U
"RTN","ECXQSR",187,0)
 S ECODE1=ECXMPI_U_ECXDSSD_U_ECUN1NPI_U_U_U_ECCLAS_U_ECPTNPI_U_ECASPR_U
"RTN","ECXQSR",188,0)
 S ECODE1=ECODE1_ECCLAS2_U_ECASNPI_U_ECXDIV_U_ECXMST_U_ECXDOM_U
"RTN","ECXQSR",189,0)
 S ECODE1=ECODE1_ECXDOB_U_ECXCAT_U_ECXSTAT_U_ECXPRIOR_U_ECXPOS_U_ECXPHI_U
"RTN","ECXQSR",190,0)
 S ECODE1=ECODE1_ECXOBS_U_ECXENC_U_ECXAOL_U_ECXODIV_U_ECXCSDT_U_ECXCEDT_U
"RTN","ECXQSR",191,0)
 S ECODE1=ECODE1_ECXCTYP_U_ECXCNH_U_ECXPDIV_U_ECXELIG_U_ECXHNCI_U_ECXETH_U
"RTN","ECXQSR",192,0)
 S ECODE1=ECODE1_ECXRC1
"RTN","ECXQSR",193,0)
 I ECXLOGIC>2003 S ECODE1=ECODE1_U_ECXENRL
"RTN","ECXQSR",194,0)
 S ^ECX(ECFILE,EC7,0)=ECODE,^ECX(ECFILE,EC7,1)=ECODE1,ECRN=ECRN+1
"RTN","ECXQSR",195,0)
 S DA=EC7,DIK="^ECX("_ECFILE_"," D IX1^DIK K DIK,DA
"RTN","ECXQSR",196,0)
 I $D(ZTQUEUED),$$S^%ZTLOAD
"RTN","ECXQSR",197,0)
 Q
"RTN","ECXQSR",198,0)
 ;
"RTN","ECXQSR",199,0)
SETUP ;Set required input for ECXTRAC
"RTN","ECXQSR",200,0)
 S ECHEAD="ECQ"
"RTN","ECXQSR",201,0)
 D ECXDEF^ECXUTL2(ECHEAD,.ECPACK,.ECGRP,.ECFILE,.ECRTN,.ECPIECE,.ECVER)
"RTN","ECXQSR",202,0)
 Q
"RTN","ECXQSR",203,0)
 ;
"RTN","ECXQSR",204,0)
QUE ;Entry point for the background requeuing handled by ECXTAUTO.
"RTN","ECXQSR",205,0)
 D SETUP,QUE^ECXTAUTO,^ECXKILL Q
"VER")
8.0^22
**END**
**END**

Released PX*1*178 SEQ #138
Extracted from mail message
**KIDS**:PX*1.0*178^

**INSTALL NAME**
PX*1.0*178
"BLD",6722,0)
PX*1.0*178^PCE PATIENT CARE ENCOUNTER^0^3060517^y
"BLD",6722,1,0)
^^1^1^3060516^^^^
"BLD",6722,1,1,0)
Allow entry of duplicate Health Factors per encounter.
"BLD",6722,4,0)
^9.64PA^^
"BLD",6722,"ABPKG")
n
"BLD",6722,"INID")
n^n^n
"BLD",6722,"KRN",0)
^9.67PA^8989.52^19
"BLD",6722,"KRN",.4,0)
.4
"BLD",6722,"KRN",.4,"NM",0)
^9.68A^^
"BLD",6722,"KRN",.401,0)
.401
"BLD",6722,"KRN",.401,"NM",0)
^9.68A^^
"BLD",6722,"KRN",.402,0)
.402
"BLD",6722,"KRN",.403,0)
.403
"BLD",6722,"KRN",.5,0)
.5
"BLD",6722,"KRN",.84,0)
.84
"BLD",6722,"KRN",3.6,0)
3.6
"BLD",6722,"KRN",3.8,0)
3.8
"BLD",6722,"KRN",9.2,0)
9.2
"BLD",6722,"KRN",9.8,0)
9.8
"BLD",6722,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6722,"KRN",9.8,"NM",1,0)
PXKMAIN1^^0^B37490228
"BLD",6722,"KRN",9.8,"NM","B","PXKMAIN1",1)

"BLD",6722,"KRN",19,0)
19
"BLD",6722,"KRN",19,"NM",0)
^9.68A^^
"BLD",6722,"KRN",19.1,0)
19.1
"BLD",6722,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",6722,"KRN",101,0)
101
"BLD",6722,"KRN",101,"NM",0)
^9.68A^^
"BLD",6722,"KRN",409.61,0)
409.61
"BLD",6722,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",6722,"KRN",771,0)
771
"BLD",6722,"KRN",771,"NM",0)
^9.68A^^
"BLD",6722,"KRN",870,0)
870
"BLD",6722,"KRN",870,"NM",0)
^9.68A^^
"BLD",6722,"KRN",8989.51,0)
8989.51
"BLD",6722,"KRN",8989.51,"NM",0)
^9.68A^^
"BLD",6722,"KRN",8989.52,0)
8989.52
"BLD",6722,"KRN",8989.52,"NM",0)
^9.68A^^
"BLD",6722,"KRN",8994,0)
8994
"BLD",6722,"KRN",8994,"NM",0)
^9.68A^^
"BLD",6722,"KRN","B",.4,.4)

"BLD",6722,"KRN","B",.401,.401)

"BLD",6722,"KRN","B",.402,.402)

"BLD",6722,"KRN","B",.403,.403)

"BLD",6722,"KRN","B",.5,.5)

"BLD",6722,"KRN","B",.84,.84)

"BLD",6722,"KRN","B",3.6,3.6)

"BLD",6722,"KRN","B",3.8,3.8)

"BLD",6722,"KRN","B",9.2,9.2)

"BLD",6722,"KRN","B",9.8,9.8)

"BLD",6722,"KRN","B",19,19)

"BLD",6722,"KRN","B",19.1,19.1)

"BLD",6722,"KRN","B",101,101)

"BLD",6722,"KRN","B",409.61,409.61)

"BLD",6722,"KRN","B",771,771)

"BLD",6722,"KRN","B",870,870)

"BLD",6722,"KRN","B",8989.51,8989.51)

"BLD",6722,"KRN","B",8989.52,8989.52)

"BLD",6722,"KRN","B",8994,8994)

"BLD",6722,"QUES",0)
^9.62^^
"BLD",6722,"REQB",0)
^9.611^1^1
"BLD",6722,"REQB",1,0)
PX*1.0*124^2
"BLD",6722,"REQB","B","PX*1.0*124",1)

"MBREQ")
0
"PKG",413,-1)
1^1
"PKG",413,0)
PCE PATIENT CARE ENCOUNTER^PX^Patient Care Encounter (VA Parent package)^
"PKG",413,20,0)
^9.402P^^
"PKG",413,22,0)
^9.49I^1^1
"PKG",413,22,1,0)
1.0^2960812^2960913^12537
"PKG",413,22,1,"PAH",1,0)
178^3060517
"PKG",413,22,1,"PAH",1,1,0)
^^1^1^3060517
"PKG",413,22,1,"PAH",1,1,1,0)
Allow entry of duplicate Health Factors per encounter.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PXKMAIN1")
0^1^B37490228^B37255334
"RTN","PXKMAIN1",1,0)
PXKMAIN1 ;ISL/JVS,ISA/Zoltan - Main Routine for Data Capture ;5/6/1999
"RTN","PXKMAIN1",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**22,73,124,178**;Aug 12, 1996
"RTN","PXKMAIN1",3,0)
 ;+This routine is responsible for:
"RTN","PXKMAIN1",4,0)
 ;+ - creating new entries in PCE files,
"RTN","PXKMAIN1",5,0)
 ;+ - processing modifications to existing entries,
"RTN","PXKMAIN1",6,0)
 ;+ - deleting entries,
"RTN","PXKMAIN1",7,0)
 ;+ - ensuring all required variables are present,
"RTN","PXKMAIN1",8,0)
 ;+ - setting both Audit fields (EDITED FLAG and AUDIT TRAIL),
"RTN","PXKMAIN1",9,0)
 ;+ - checking for duplicate entries,
"RTN","PXKMAIN1",10,0)
 ;+ - some error reporting.
"RTN","PXKMAIN1",11,0)
 ;+
"RTN","PXKMAIN1",12,0)
 ;+LOCAL VARIABLE LIST
"RTN","PXKMAIN1",13,0)
 ;+ MOST VARIABLES ARE DEFINED AT THE TOP OF  PXKMAIN
"RTN","PXKMAIN1",14,0)
 ;+ PXKSEQ   = Sequence number in PXK tmp global
"RTN","PXKMAIN1",15,0)
 ;+ PXKCAT   = Category of entry (CPT,MSR,VST...)
"RTN","PXKMAIN1",16,0)
 ;+ PXKREF   = Root of temp global
"RTN","PXKMAIN1",17,0)
 ;+ PXKPIEN  = IEN of v file
"RTN","PXKMAIN1",18,0)
 ;+ PXKAUDIT = data located in the audit field of the v file
"RTN","PXKMAIN1",19,0)
 ;+ PXKER    = field data use to build the dr string (eg .04///^S X=$G()
"RTN","PXKMAIN1",20,0)
 ;+ PXKFLD   = field number gleened from the file routines
"RTN","PXKMAIN1",21,0)
 ;+ PXKNOD   = same as the subscript in a global node
"RTN","PXKMAIN1",22,0)
 ;+ PXKPCE   = the piece where the data is found on that node
"RTN","PXKMAIN1",23,0)
 ;
"RTN","PXKMAIN1",24,0)
 ;
"RTN","PXKMAIN1",25,0)
 W !,"This is not an entry point" Q
"RTN","PXKMAIN1",26,0)
LOOP ;+Copy delimited strings into sub-arrays.
"RTN","PXKMAIN1",27,0)
 F PXKI=1:1:$L(PXKAFT(PXKSUB),"^") I $P(PXKAFT(PXKSUB),"^",PXKI)'="" S PXKAV(PXKSUB,PXKI)=$P(PXKAFT(PXKSUB),"^",PXKI)
"RTN","PXKMAIN1",28,0)
 F PXKI=1:1:$L(PXKBEF(PXKSUB),"^") I $P(PXKBEF(PXKSUB),"^",PXKI)'="" S PXKBV(PXKSUB,PXKI)=$P(PXKBEF(PXKSUB),"^",PXKI)
"RTN","PXKMAIN1",29,0)
 K PXKI,PXKJ ; Not sure if NEW would be OK.
"RTN","PXKMAIN1",30,0)
 I PXKCAT="CPT",PXKSUB=1 D LOOP^PXKMOD
"RTN","PXKMAIN1",31,0)
 Q
"RTN","PXKMAIN1",32,0)
 ;
"RTN","PXKMAIN1",33,0)
ERROR ;+Check for missing required fields
"RTN","PXKMAIN1",34,0)
 Q:$G(PXKAV(0,1))["@"!('$D(PXKAV(0,1)))
"RTN","PXKMAIN1",35,0)
 S PXKNOD=0,PXKPCE=0
"RTN","PXKMAIN1",36,0)
 D EN1^@PXKRTN
"RTN","PXKMAIN1",37,0)
 S PXKER=$P(PXKER," * ",1)
"RTN","PXKMAIN1",38,0)
 I PXKER="" Q
"RTN","PXKMAIN1",39,0)
 F PXJ=1:1:$L(PXKER,",") D
"RTN","PXKMAIN1",40,0)
 . S PXJJ=$P(PXKER,",",PXJ)
"RTN","PXKMAIN1",41,0)
 . I '$D(PXKAV(PXKNOD,PXJJ)) D
"RTN","PXKMAIN1",42,0)
 . . S PXKPCE=PXJJ
"RTN","PXKMAIN1",43,0)
 . . D EN2^@PXKRTN
"RTN","PXKMAIN1",44,0)
 . . S PXKFLD=$P(PXKFD,"/",1)
"RTN","PXKMAIN1",45,0)
 . . S:PXKFLD["*" PXKFLD=$P(PXKFLD," * ",2)
"RTN","PXKMAIN1",46,0)
 . . S PXKERROR(PXKCAT,PXKSEQ,0,PXKFLD)="Missing Required Fields"
"RTN","PXKMAIN1",47,0)
 K PXK,PXJJ,PXKFLD,PXKFD ; Not sure about use of NEW here.
"RTN","PXKMAIN1",48,0)
 Q
"RTN","PXKMAIN1",49,0)
 ;
"RTN","PXKMAIN1",50,0)
CLEAN ;--Clean out the PXKAV array
"RTN","PXKMAIN1",51,0)
 S PXKJ=""
"RTN","PXKMAIN1",52,0)
 F  S PXKJ=$O(PXKBV(PXKJ)) Q:PXKJ=""  D
"RTN","PXKMAIN1",53,0)
 . S PXKI=""
"RTN","PXKMAIN1",54,0)
 . F  S PXKI=$O(PXKBV(PXKJ,PXKI)) Q:PXKI=""  D
"RTN","PXKMAIN1",55,0)
 . . I $G(PXKBV(PXKJ,PXKI))=$G(PXKAV(PXKJ,PXKI)) K PXKAV(PXKJ,PXKI)
"RTN","PXKMAIN1",56,0)
 K PXKI,PXKJ ; Not sure about NEW here.
"RTN","PXKMAIN1",57,0)
 Q
"RTN","PXKMAIN1",58,0)
 ;
"RTN","PXKMAIN1",59,0)
FILE ;+Create a new entry in file and get IEN
"RTN","PXKMAIN1",60,0)
 ;+This is the code that adds new entries to V-files
"RTN","PXKMAIN1",61,0)
 ;+and to the Visit file.
"RTN","PXKMAIN1",62,0)
 K DD,DO
"RTN","PXKMAIN1",63,0)
 S DIC=$P($T(GLOBAL^@PXKRTN),";;",2)_"("
"RTN","PXKMAIN1",64,0)
 S DIC(0)=""
"RTN","PXKMAIN1",65,0)
 S X=$G(PXKAV(0,1))
"RTN","PXKMAIN1",66,0)
 D FILE^DICN
"RTN","PXKMAIN1",67,0)
 S (PXKPIEN,DA)=+Y
"RTN","PXKMAIN1",68,0)
 S DR=""
"RTN","PXKMAIN1",69,0)
 K DIC,Y,X
"RTN","PXKMAIN1",70,0)
 Q
"RTN","PXKMAIN1",71,0)
 ;
"RTN","PXKMAIN1",72,0)
AUD12 ;--Set both audit fields
"RTN","PXKMAIN1",73,0)
 S DR=""
"RTN","PXKMAIN1",74,0)
 S PXKAUDIT=$P($T(GLOBAL^@PXKRTN),";;",2)_"(DA,801)"
"RTN","PXKMAIN1",75,0)
 S PXKAUDIT=$P($G(@PXKAUDIT),"^",2)_PXKSORR_";"
"RTN","PXKMAIN1",76,0)
 I $L(PXKAUDIT,";")>5 S $P(PXKAUDIT,";",2,$L(PXKAUDIT,";"))="+;"_$P(PXKAUDIT,";",4,$L(PXKAUDIT,";")) ;PX*1*124   Change 8 to 5
"RTN","PXKMAIN1",77,0)
 S PXKNOD=801
"RTN","PXKMAIN1",78,0)
 S DR=""
"RTN","PXKMAIN1",79,0)
 F PXKPCE=1,2 D EN1^@PXKRTN S DR=DR_PXKER
"RTN","PXKMAIN1",80,0)
 S PXKFVDLM=""
"RTN","PXKMAIN1",81,0)
 Q
"RTN","PXKMAIN1",82,0)
 ;
"RTN","PXKMAIN1",83,0)
AUD2 ;--Set second audit fields
"RTN","PXKMAIN1",84,0)
 S DR=""
"RTN","PXKMAIN1",85,0)
 S PXKAUDIT=$P($T(GLOBAL^@PXKRTN),";;",2)_"(DA,801)"
"RTN","PXKMAIN1",86,0)
 S PXKAUDIT=$P($G(@PXKAUDIT),"^",2)_PXKSORR_";"
"RTN","PXKMAIN1",87,0)
 I $L(PXKAUDIT,";")>5 S $P(PXKAUDIT,";",2,$L(PXKAUDIT,";"))="+;"_$P(PXKAUDIT,";",4,$L(PXKAUDIT,";")) ;PX*1*124   Change 8 to 5
"RTN","PXKMAIN1",88,0)
 S PXKNOD=801
"RTN","PXKMAIN1",89,0)
 S DR=""
"RTN","PXKMAIN1",90,0)
 S PXKPCE=2
"RTN","PXKMAIN1",91,0)
 D EN1^@PXKRTN
"RTN","PXKMAIN1",92,0)
 S DR=DR_PXKER
"RTN","PXKMAIN1",93,0)
 S PXKFVDLM=""
"RTN","PXKMAIN1",94,0)
 Q
"RTN","PXKMAIN1",95,0)
 ;
"RTN","PXKMAIN1",96,0)
DRDIE ;--Set the DR string and DO DIE
"RTN","PXKMAIN1",97,0)
 I PXKCAT="VST" D UPD^PXKFVST Q
"RTN","PXKMAIN1",98,0)
 S DIE=$P($T(GLOBAL^@PXKRTN),";;",2)_"(" K PXKPTR
"RTN","PXKMAIN1",99,0)
 S PXKLR=$P($T(GLOBAL^@PXKRTN),";;",2)_"(DA)"
"RTN","PXKMAIN1",100,0)
 S PXKNOD=""
"RTN","PXKMAIN1",101,0)
 F  S PXKNOD=$O(PXKAV(PXKNOD)) Q:PXKNOD=""  D
"RTN","PXKMAIN1",102,0)
 . I PXKFGAD=1,PXKNOD=0 S PXKPCE=1 D
"RTN","PXKMAIN1",103,0)
 .. Q:PXKCAT'="CPT"
"RTN","PXKMAIN1",104,0)
 .. I $G(^TMP("PXK",$J,PXKCAT,PXKSEQ,"IEN"))=PXKPIEN S PXKPCE=3
"RTN","PXKMAIN1",105,0)
 . I PXKFGAD=1,PXKNOD'=0 S PXKPCE=0
"RTN","PXKMAIN1",106,0)
 . I PXKFGED=1 S PXKPCE=0
"RTN","PXKMAIN1",107,0)
 . I PXKCAT="CPT",PXKNOD=1 D  Q
"RTN","PXKMAIN1",108,0)
 .. D DIE
"RTN","PXKMAIN1",109,0)
 .. I $G(^TMP("PXK",$J,PXKCAT,PXKSEQ,"IEN"))]"" Q
"RTN","PXKMAIN1",110,0)
 .. D UPD^PXKMOD
"RTN","PXKMAIN1",111,0)
 . F  S PXKPCE=$O(PXKAV(PXKNOD,PXKPCE)) Q:PXKPCE=""  D
"RTN","PXKMAIN1",112,0)
 ..D EN1^@PXKRTN
"RTN","PXKMAIN1",113,0)
 ..I $G(PXKER)'="" D
"RTN","PXKMAIN1",114,0)
 ...I PXKER["~" D
"RTN","PXKMAIN1",115,0)
 ....I $P(PXKER,"~",2)["A",PXKFGAD=1 S PXKER=$P(PXKER,"~") Q
"RTN","PXKMAIN1",116,0)
 ....I $P(PXKER,"~",2)'["A",PXKFGAD=1 S PXKER="" Q
"RTN","PXKMAIN1",117,0)
 ....I $P(PXKER,"~",2)["E",PXKFGED=1 S PXKER=$P(PXKER,"~") Q
"RTN","PXKMAIN1",118,0)
 ....I $P(PXKER,"~",2)'["E",PXKFGED=1 S PXKER="" Q
"RTN","PXKMAIN1",119,0)
 ...I +PXKER=0 D
"RTN","PXKMAIN1",120,0)
 ....I PXKAV(PXKNOD,PXKPCE)=+PXKAV(PXKNOD,PXKPCE) S PXKER=$P(PXKER," * ",2)
"RTN","PXKMAIN1",121,0)
 ....I PXKAV(PXKNOD,PXKPCE)'=+PXKAV(PXKNOD,PXKPCE) S PXKER=$P(PXKER," * ",3),PXKPTR(PXKPIEN,PXKNOD,PXKPCE)=""
"RTN","PXKMAIN1",122,0)
 ..I $G(PXKER)'="" S DR=DR_PXKER_"PXKAV("_PXKNOD_","_PXKPCE_"));"
"RTN","PXKMAIN1",123,0)
 ..I $L(DR)>200 D DIE
"RTN","PXKMAIN1",124,0)
 D DIE
"RTN","PXKMAIN1",125,0)
 K DIE,PXKLR,DIC(0)
"RTN","PXKMAIN1",126,0)
 D ER
"RTN","PXKMAIN1",127,0)
 Q
"RTN","PXKMAIN1",128,0)
DIE ;+Lock global and invoke FM ^DIE call.
"RTN","PXKMAIN1",129,0)
 L +@PXKLR:10
"RTN","PXKMAIN1",130,0)
 D ^DIE
"RTN","PXKMAIN1",131,0)
 L -@PXKLR
"RTN","PXKMAIN1",132,0)
 K DR
"RTN","PXKMAIN1",133,0)
 S DR=""
"RTN","PXKMAIN1",134,0)
 Q
"RTN","PXKMAIN1",135,0)
 ;
"RTN","PXKMAIN1",136,0)
DELETE ;+Use FM ^DIK call to delete entry identified by PXKPIEN.
"RTN","PXKMAIN1",137,0)
 S DA=PXKPIEN
"RTN","PXKMAIN1",138,0)
 S DIK=$P($T(GLOBAL^@PXKRTN),";;",2)_"("
"RTN","PXKMAIN1",139,0)
 D ^DIK
"RTN","PXKMAIN1",140,0)
 K DIK
"RTN","PXKMAIN1",141,0)
 Q
"RTN","PXKMAIN1",142,0)
 ;
"RTN","PXKMAIN1",143,0)
DUP ;+Code to check for duplicates
"RTN","PXKMAIN1",144,0)
 I PXKCAT="VST" Q
"RTN","PXKMAIN1",145,0)
 I PXKCAT="CPT" Q
"RTN","PXKMAIN1",146,0)
 I PXKCAT="HF" Q
"RTN","PXKMAIN1",147,0)
 N PXKRTN
"RTN","PXKMAIN1",148,0)
 I '$D(PXKPIEN) N PXKPIEN S PXKPIEN=""
"RTN","PXKMAIN1",149,0)
 S PXKNOD=0
"RTN","PXKMAIN1",150,0)
 S PXKPCE=0
"RTN","PXKMAIN1",151,0)
 S PXKRTN="PXKF"_PXKVCAT
"RTN","PXKMAIN1",152,0)
 S PXKVRTN=$P($T(GLOBAL^@PXKRTN),";;",2)
"RTN","PXKMAIN1",153,0)
 S PXJJJ=0
"RTN","PXKMAIN1",154,0)
 D EN1^@PXKRTN
"RTN","PXKMAIN1",155,0)
 I $P(PXKER," * ",3)'=0 D
"RTN","PXKMAIN1",156,0)
 .S PXKER=$P(PXKER," * ",2)
"RTN","PXKMAIN1",157,0)
 .I PXKER="" Q
"RTN","PXKMAIN1",158,0)
 .S (PX,PXFG)=0
"RTN","PXKMAIN1",159,0)
 .F  S PX=$O(@PXKVRTN@("AD",PXKVST,PX)) Q:PX=""  D  Q:PXFG=1
"RTN","PXKMAIN1",160,0)
 ..S PXJJJ=0
"RTN","PXKMAIN1",161,0)
 ..F PXJ=1:1:$L(PXKER,",") S PXJJ=$P(PXKER,",",PXJ) D
"RTN","PXKMAIN1",162,0)
 ...I $P($G(@PXKVRTN@(PX,$P(PXJJ,"+",1))),"^",$P(PXJJ,"+",2))=$G(PXKAV($P(PXJJ,"+",1),$P(PXJJ,"+",2))),PX'=PXKPIEN S PXJJJ=PXJJJ+1
"RTN","PXKMAIN1",163,0)
 ..I $L(PXKER,",")=PXJJJ S PXFG=1
"RTN","PXKMAIN1",164,0)
 ;PXKHLR Is not killed because it is a flag comming from another routine
"RTN","PXKMAIN1",165,0)
 Q
"RTN","PXKMAIN1",166,0)
 ;
"RTN","PXKMAIN1",167,0)
ER ;--PXKERROR MAKING IF NOT POPULATED CORRECTLY
"RTN","PXKMAIN1",168,0)
 N PXKRT,PXKMOD,PXKSTR
"RTN","PXKMAIN1",169,0)
 S PXKMOD=PXKSEQ#1 I $G(PXKMOD) Q
"RTN","PXKMAIN1",170,0)
 S PXKN=""
"RTN","PXKMAIN1",171,0)
 F  S PXKN=$O(PXKAV(PXKN)) Q:PXKN=""  D
"RTN","PXKMAIN1",172,0)
 . S PXKP=""
"RTN","PXKMAIN1",173,0)
 . F  S PXKP=$O(PXKAV(PXKN,PXKP)) Q:PXKP=""  D
"RTN","PXKMAIN1",174,0)
 .. S PXKRRT=$P($T(GLOBAL^@PXKRTN),";;",2)_"("_DA_","
"RTN","PXKMAIN1",175,0)
 .. I PXKN=1,PXKCAT="CPT" S PXKRRT=PXKRRT_PXKN_","_PXKP_","_0_")"
"RTN","PXKMAIN1",176,0)
 .. E  S PXKRRT=PXKRRT_PXKN_")"
"RTN","PXKMAIN1",177,0)
 .. I PXKAV(PXKN,PXKP)'=$P($G(@PXKRRT),"^",$S(PXKN=1:1,1:PXKP)) D
"RTN","PXKMAIN1",178,0)
 ... Q:PXKAV(PXKN,PXKP)["@"
"RTN","PXKMAIN1",179,0)
 ... S PXKNOD=PXKN,PXKPCE=PXKP
"RTN","PXKMAIN1",180,0)
 ... I PXKNOD=1,PXKCAT="CPT" S PXKPCE=1
"RTN","PXKMAIN1",181,0)
 ... D EN2^@PXKRTN
"RTN","PXKMAIN1",182,0)
 ... S PXKFLD=$P(PXKFD,"/",1)
"RTN","PXKMAIN1",183,0)
 ... S:PXKFLD["*" PXKFLD=$P(PXKFLD," * ",2)
"RTN","PXKMAIN1",184,0)
 ... Q:PXKFLD=1101
"RTN","PXKMAIN1",185,0)
 ... S PXKSTR="Not Stored = "_PXKAV(PXKN,PXKP)
"RTN","PXKMAIN1",186,0)
 ... I $G(PXKERROR(PXKCAT,PXKSEQ,DA,PXKFLD))]"" D
"RTN","PXKMAIN1",187,0)
 .... S PXKSTR=PXKERROR(PXKCAT,PXKSEQ,DA,PXKFLD)_","_PXKAV(PXKN,PXKP)
"RTN","PXKMAIN1",188,0)
 ... S PXKERROR(PXKCAT,PXKSEQ,DA,PXKFLD)=PXKSTR
"RTN","PXKMAIN1",189,0)
 Q
"VER")
8.0^22.0
"BLD",6722,6)
^138
**END**
**END**

Released SD*5.3*322 SEQ #281
Extracted from mail message
**KIDS**:SD*5.3*322^

**INSTALL NAME**
SD*5.3*322
"BLD",4537,0)
SD*5.3*322^SCHEDULING^0^3031105^y
"BLD",4537,1,0)
^^6^6^3031105^
"BLD",4537,1,1,0)
This patch fixes a problem with one of the options distributed in patch
"BLD",4537,1,2,0)
SD*5.3*292. When users selected to run the [SCRPW PM DETAILED REPORT]
"BLD",4537,1,3,0)
PERFORMANCE MONITOR DETAILED REPORT and the users opted to run the
"BLD",4537,1,4,0)
report for individual providers, the report will fail to generate any
"BLD",4537,1,5,0)
information because of a bad reference to one of the arrays in routine 
"BLD",4537,1,6,0)
SDPMUT2.
"BLD",4537,4,0)
^9.64PA^^
"BLD",4537,"ABPKG")
n
"BLD",4537,"KRN",0)
^9.67PA^8989.52^19
"BLD",4537,"KRN",.4,0)
.4
"BLD",4537,"KRN",.401,0)
.401
"BLD",4537,"KRN",.402,0)
.402
"BLD",4537,"KRN",.403,0)
.403
"BLD",4537,"KRN",.5,0)
.5
"BLD",4537,"KRN",.84,0)
.84
"BLD",4537,"KRN",3.6,0)
3.6
"BLD",4537,"KRN",3.8,0)
3.8
"BLD",4537,"KRN",9.2,0)
9.2
"BLD",4537,"KRN",9.8,0)
9.8
"BLD",4537,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",4537,"KRN",9.8,"NM",1,0)
SDPMUT2^^0^B4210951
"BLD",4537,"KRN",9.8,"NM","B","SDPMUT2",1)
 
"BLD",4537,"KRN",19,0)
19
"BLD",4537,"KRN",19.1,0)
19.1
"BLD",4537,"KRN",101,0)
101
"BLD",4537,"KRN",409.61,0)
409.61
"BLD",4537,"KRN",771,0)
771
"BLD",4537,"KRN",870,0)
870
"BLD",4537,"KRN",8989.51,0)
8989.51
"BLD",4537,"KRN",8989.52,0)
8989.52
"BLD",4537,"KRN",8994,0)
8994
"BLD",4537,"KRN","B",.4,.4)
 
"BLD",4537,"KRN","B",.401,.401)
 
"BLD",4537,"KRN","B",.402,.402)
 
"BLD",4537,"KRN","B",.403,.403)
 
"BLD",4537,"KRN","B",.5,.5)
 
"BLD",4537,"KRN","B",.84,.84)
 
"BLD",4537,"KRN","B",3.6,3.6)
 
"BLD",4537,"KRN","B",3.8,3.8)
 
"BLD",4537,"KRN","B",9.2,9.2)
 
"BLD",4537,"KRN","B",9.8,9.8)
 
"BLD",4537,"KRN","B",19,19)
 
"BLD",4537,"KRN","B",19.1,19.1)
 
"BLD",4537,"KRN","B",101,101)
 
"BLD",4537,"KRN","B",409.61,409.61)
 
"BLD",4537,"KRN","B",771,771)
 
"BLD",4537,"KRN","B",870,870)
 
"BLD",4537,"KRN","B",8989.51,8989.51)
 
"BLD",4537,"KRN","B",8989.52,8989.52)
 
"BLD",4537,"KRN","B",8994,8994)
 
"BLD",4537,"QUES",0)
^9.62^^
"BLD",4537,"REQB",0)
^9.611^2^2
"BLD",4537,"REQB",1,0)
SD*5.3*292^1
"BLD",4537,"REQB",2,0)
TIU*1.0*168^1
"BLD",4537,"REQB","B","SD*5.3*292",1)
 
"BLD",4537,"REQB","B","TIU*1.0*168",2)
 
"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2941102
"PKG",16,22,1,"PAH",1,0)
322^3031105
"PKG",16,22,1,"PAH",1,1,0)
^^6^6^3031105
"PKG",16,22,1,"PAH",1,1,1,0)
This patch fixes a problem with one of the options distributed in patch
"PKG",16,22,1,"PAH",1,1,2,0)
SD*5.3*292. When users selected to run the [SCRPW PM DETAILED REPORT]
"PKG",16,22,1,"PAH",1,1,3,0)
PERFORMANCE MONITOR DETAILED REPORT and the users opted to run the
"PKG",16,22,1,"PAH",1,1,4,0)
report for individual providers, the report will fail to generate any
"PKG",16,22,1,"PAH",1,1,5,0)
information because of a bad reference to one of the arrays in routine 
"PKG",16,22,1,"PAH",1,1,6,0)
SDPMUT2.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")
 
"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","SDPMUT2")
0^1^B4210951
"RTN","SDPMUT2",1,0)
SDPMUT2 ;BPFO/JRC - Performance Monitors Utilities ; 11/3/03 3:24pm
"RTN","SDPMUT2",2,0)
 ;;5.3;SCHEDULING;**292,322**;AUGUST 13, 1993
"RTN","SDPMUT2",3,0)
 ;
"RTN","SDPMUT2",4,0)
SCREEN(PTRENC,SCRNARR) ;Screen Outpatient Encounter
"RTN","SDPMUT2",5,0)
 ;Input  : PTRENC - Outpatient Encounter IEN
"RTN","SDPMUT2",6,0)
 ;         SCRNARR - Screening array full global reference
"RTN","SDPMUT2",7,0)
 ;Output : 1 = Screen encounter out
"RTN","SDPMUT2",8,0)
 ;         0 = Keep encounter and process
"RTN","SDPMUT2",9,0)
 ;
"RTN","SDPMUT2",10,0)
 ;Declare variables
"RTN","SDPMUT2",11,0)
 N PCODE,SCODE,CLINIC,NODE,Y,I,CHLD,PROV,TYPE
"RTN","SDPMUT2",12,0)
 S NODE=$G(^SCE(PTRENC,0))
"RTN","SDPMUT2",13,0)
 ;Can not be test patient
"RTN","SDPMUT2",14,0)
 I $$TESTPAT^VADPT($P(NODE,U,2)) Q 1
"RTN","SDPMUT2",15,0)
 ;Encounter must be checked out
"RTN","SDPMUT2",16,0)
 I '$P(NODE,U,7) Q 1
"RTN","SDPMUT2",17,0)
 ;Can't be child encounter
"RTN","SDPMUT2",18,0)
 I +$P(NODE,U,6) Q 1
"RTN","SDPMUT2",19,0)
 ;Screen out non-count clinics
"RTN","SDPMUT2",20,0)
 S CLINIC=$P($G(NODE),U,4)
"RTN","SDPMUT2",21,0)
 I 'CLINIC Q 1
"RTN","SDPMUT2",22,0)
 I $P($G(^SC(CLINIC,0)),U,17)="Y" Q 1
"RTN","SDPMUT2",23,0)
 ;Appointment type must be regular
"RTN","SDPMUT2",24,0)
 I $P($G(NODE),U,10) S TYPE=$P($G(^SD(409.1,$P($G(NODE),U,10),0)),U,1)
"RTN","SDPMUT2",25,0)
 I '$D(TYPE) Q 1
"RTN","SDPMUT2",26,0)
 I TYPE'["REGULAR" Q 1
"RTN","SDPMUT2",27,0)
 ;Get primary & secondary stop codes
"RTN","SDPMUT2",28,0)
 S PCODE=+$P(NODE,U,3)
"RTN","SDPMUT2",29,0)
 S CHLD=+$O(^SCE("APAR",PTRENC,0))
"RTN","SDPMUT2",30,0)
 S SCODE=0
"RTN","SDPMUT2",31,0)
 I CHLD D
"RTN","SDPMUT2",32,0)
 .S SCODE=+$P($G(^SCE(CHLD,0)),U,3)
"RTN","SDPMUT2",33,0)
 ;Check stop codes (in inclusion list and/or not in exclusion list)
"RTN","SDPMUT2",34,0)
 S Y=$S($O(@SCRNARR@("DSS",0)):1,$O(@SCRNARR@("DSS-PAIR",0)):1,1:0)
"RTN","SDPMUT2",35,0)
 I 'PCODE Q 1
"RTN","SDPMUT2",36,0)
 I @SCRNARR@("DSS")=1 S Y=0
"RTN","SDPMUT2",37,0)
 I $D(@SCRNARR@("DSS",PCODE)) S Y=0
"RTN","SDPMUT2",38,0)
 I $D(@SCRNARR@("DSS-EXCLUDE",PCODE))!$D(@SCRNARR@("DSS-EXCLUDE",SCODE)) S Y=1
"RTN","SDPMUT2",39,0)
 I Y Q 1
"RTN","SDPMUT2",40,0)
 ;Check division (must be in list)
"RTN","SDPMUT2",41,0)
 S Y=1
"RTN","SDPMUT2",42,0)
 S DIV=$P(NODE,U,11)
"RTN","SDPMUT2",43,0)
 I 'DIV Q 1
"RTN","SDPMUT2",44,0)
 I @SCRNARR@("DIVISION")=1 S Y=0
"RTN","SDPMUT2",45,0)
 I $D(@SCRNARR@("DIVISION",DIV)) S Y=0
"RTN","SDPMUT2",46,0)
 I Y Q 1
"RTN","SDPMUT2",47,0)
 ;Get primary encounter provider
"RTN","SDPMUT2",48,0)
 S Y=1
"RTN","SDPMUT2",49,0)
 S PROV=$$ENCPROV(PTRENC)
"RTN","SDPMUT2",50,0)
 ;Check primary encounter provider (must be in list)
"RTN","SDPMUT2",51,0)
 I 'PROV Q 1
"RTN","SDPMUT2",52,0)
 I @SCRNARR@("PROVIDERS")=1 S Y=0
"RTN","SDPMUT2",53,0)
 I $D(@SCRNARR@("PROVIDERS",PROV)) S Y=0
"RTN","SDPMUT2",54,0)
 I Y Q 1
"RTN","SDPMUT2",55,0)
 ;Passed all screens
"RTN","SDPMUT2",56,0)
 Q 0
"RTN","SDPMUT2",57,0)
 ;
"RTN","SDPMUT2",58,0)
NOTEINF(PTRENC) ;Returns performance monitor information for a given encounter
"RTN","SDPMUT2",59,0)
 ;Input : PTRENC - Outpatient Encounter IEN
"RTN","SDPMUT2",60,0)
 ;Output: Results of calling $$PM^TIUPXPM
"RTN","SDPMUT2",61,0)
 ;        String with 6 fields ('^' delimiter)
"RTN","SDPMUT2",62,0)
 ;          1  VIEN
"RTN","SDPMUT2",63,0)
 ;          2  Note Category (A-E)
"RTN","SDPMUT2",64,0)
 ;          3  Signed By (pointer to File #200)
"RTN","SDPMUT2",65,0)
 ;          4  Signed Date.Time (FM format)
"RTN","SDPMUT2",66,0)
 ;          5  Co-signed By (pointer to File #200) - defined only if necessary
"RTN","SDPMUT2",67,0)
 ;          6  Co-signed Date.Time - defined only if necessary    
"RTN","SDPMUT2",68,0)
 ;
"RTN","SDPMUT2",69,0)
 N VIEN
"RTN","SDPMUT2",70,0)
 S VIEN=$P(^SCE(PTRENC,0),U,5)
"RTN","SDPMUT2",71,0)
 Q $$PM^TIUPXPM(VIEN)
"RTN","SDPMUT2",72,0)
 ;
"RTN","SDPMUT2",73,0)
ENCPROV(PTRENC) ;Return primary encounter provider
"RTN","SDPMUT2",74,0)
 ;Input  : ENCPTR - Pointer to Outpatient Encounter
"RTN","SDPMUT2",75,0)
 ;Output : Pointer to New Person File
"RTN","SDPMUT2",76,0)
 ;Note   : 0 returned if primary encounter provider not found
"RTN","SDPMUT2",77,0)
 N NODE,PROV,X
"RTN","SDPMUT2",78,0)
 D GETPRV^SDOE(PTRENC,"NODE")
"RTN","SDPMUT2",79,0)
 S PROV=0
"RTN","SDPMUT2",80,0)
 S X=0 F  S X=+$O(NODE(X)) Q:'X  D  Q:PROV
"RTN","SDPMUT2",81,0)
 .I $P(NODE(X),"^",4)="P" S PROV=+NODE(X)
"RTN","SDPMUT2",82,0)
 Q PROV
"VER")
8.0^22.0
**END**
**END**

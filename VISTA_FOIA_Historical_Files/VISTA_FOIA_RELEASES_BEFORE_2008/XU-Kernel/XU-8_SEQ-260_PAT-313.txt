$TXT Created by FORT,WALLY at NXT.KERNEL.FO-OAKLAND.MED.VA.GOV  (KIDS) on Tuesday, 07/15/03 at 13:04
=============================================================================
Run Date: AUG 06, 2003                     Designation: XU*8*313
Package : XU - KERNEL                         Priority: Mandatory
Version : 8       SEQ #260                       Status: Released
                  Compliance Date: SEP 06, 2003
=============================================================================

Associated patches: (v)XU*8*157    <<= must be installed BEFORE `XU*8*313'
                    (v)XU*8*274    <<= must be installed BEFORE `XU*8*313'

Subject: BCMA Contingency Support

Category: 
  - Routine

Description: 
============

 Patch Tracking #: 36633168
 Test Sites: VAMC Bay Pines, VAMC San Francisco, Hudson-Valley, Bronx,
             UPSTATE NEW YORK HCS  
 Blood Bank Clearance: 7/9/2003
 
 BCMA Contingence Support.  (Re-issue of XU*8*290)
 NOIS: BRX-0603-11451, WRJ-0603-11720, LOU-0603-41671
 Patch XU*8*290 sent the existing extended action Option XU USER TERMINATE 
 out in such a way that it removed existing actions that had been connected to 
 it. 
 The PRE-INIT will try and add the 5 known national options back onto the XU 
 USER TERMINATE extended action option.
 The POST-INIT for this patch will run the XU USER TERMINATE option for 
 terminated users after a date chosen by the installer. 
 
 This patch includes support for the BCMA Contingence plan by providing 
 protocol events for:
    User Add Event (XU USER ADD)
    User Change event (XU USER CHANGE)
    User Terminate event (XU USER TERMINATE).
 These are in the option file and can be linked to there. The user's IEN 
 will be in the variable XUIEN at the time of the call. Each protocol 
 will create an array XUSR that will hold a set of fields from the NPF.  
 
 The XU USER TERMINATE protocol is not new. Both the old variable XUIFN 
 and the new XUIEN will be defined.  The exact place in routine XUSTERM 
 that it is called from has changed.
 
 NOIS: BRX-0303-11117
 This patch fixes an error that has been reported in the NOIS
 BRX-0303-11117. The error occurs when we are using the option
 Reactivate a User [XUSERNEW], and place "^" at prompt of the
 question: "Do you wish to add this user to mail groups? NO//" 
 
 NOIS: LIT-0403-70367
 Site requested something to track when and who changed the access code, and 
 when and who changed the verify code.
 Fix: The data was being hard set into the access/verify code fields because 
 FM was not reentrant in the early days.  This code has been changed to use 
 a FileMan DBS call.  Now the access/verify code fields can be audited.
 
 Routine Summary
 The following routines are included in this patch.  The second line of each
 of these routines now looks like:
  ;;8.0;KERNEL;**[Patch List]**;Jul 10, 1995
 
                  Checksum
 Routine         Old       New      Patch List
 XUINP313          n/a   3884004    **313**
 XUS2         15802718  14988271    **59,180,313**
 XUS5         10302124   9743258    **313**
 XUSERNEW      8604946   7818960    **16,49,134,208,157,313**
 XUSERP            n/a   1804075    **313**
 XUSTERM      14576706   9547753    **36,73,135,148,169,222,313**
 XUSTERM1     11638886   9517903    **102,180,208,222,274,313**
 
 List of preceding patches: 157, 274
 Sites should use CHECK^XTSUMBLD to verify checksums.
 
 =========================================================================
 Installation:
 
 >>>Users may remain on the system.
 >>>Allow KIDS to inhibit new sign-ons.
 >>>TaskMan does *not* need to be stopped.
 
   1.  DSM sites - If any of these routines are mapped,
       you will need to disable mapping for the affected routines.
 
   2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.
 
   3.  The patch has now been loaded into a Transport global on your
       system. You now need to use KIDS to install the Transport global.
       On the KIDS menu, under the 'Installation' menu, use the following
       options:
 
          Verify Checksums in Transport Global
          Print Transport Global
          Compare Transport Global to Current System
          Backup a Transport Global
 
   4.  Users can remain on the system. 
       Do not queue or send to a printer.
       An Error could be generated by users that are editing the New Person 
       File at the time the patch is installed.
       TaskMan can remain running.
 
   5. Installation will take less than 2 minutes.
      On the KIDS menu, under the 'Installation' menu, use the following
      option:
         Install Package(s)  'XU*8.0*313'
                              ==========
 
      PRE-INIT question:
      Add national items to the XU USER TERMINATE option? YES// YES
       
      Want KIDS to Rebuild Menu Trees Upon Completion of Install? YES// NO
       
      POST-INIT questions.
 
      If you installed patch XU*8*290 you should answer "Yes" to this question.
      (If you installed XU*8*313 V3, this has already been done, answer "NO")
  
      A Yes answer will cause all users Terminated after the date you
      choose to have the XU USER TERMINATE protocol run on them. YES
      Run Terminate events? YES// YES
         
      Want KIDS to INHIBIT LOGONs during the install? YES// YES
       
      Want to disable scheduled options, menu options, and protocols? YES// NO
 
   6. DSM Sites, after patch has installed, rebuild your map set.
 
 =========================================================================
 
  

Routine Information:
====================

Routine Name:
  - XUINP313


Routine Checksum:

Routine Name:
  - XUS2


Routine Checksum:

Routine Name:
  - XUS5


Routine Checksum:

Routine Name:
  - XUSERNEW


Routine Checksum:

Routine Name:
  - XUSERP


Routine Checksum:

Routine Name:
  - XUSTERM


Routine Checksum:

Routine Name:
  - XUSTERM1


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : FORT,WALLY                     Date Entered : JUN 23, 2003
Completed By: SINGH,GURBIR                  Date Completed: JUL 24, 2003
Released By : TILLIS,LEWIS                  Date Released : AUG 06, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

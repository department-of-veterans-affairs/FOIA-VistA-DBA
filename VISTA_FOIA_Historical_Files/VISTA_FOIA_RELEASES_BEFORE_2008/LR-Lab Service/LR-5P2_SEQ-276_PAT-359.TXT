$TXT
=============================================================================
Run Date: AUG 21, 2006                     Designation: LR*5.2*359
Package : LR - LAB SERVICE                    Priority: Mandatory
Version : 5.2       SEQ #276                    Status: Released
                  Compliance Date: SEP 01, 2006
=============================================================================

Associated patches: (v)LR*5.2*291  <<= must be installed BEFORE `LR*5.2*359'

Subject: FIX REMEDY ISSUES FOR LR*5.2*291

Category: 
  - Routine

Description:
============

   DIRECTIVE 2004-058 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
  
   EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*359 does not 
   alter or modify any software design safeguards or safety critical 
   elements functions.
  
   RISK ANALYSIS: Changes made by patch LR*5.2*359 have no effect on Blood 
   Bank software functionality, therefore RISK is none.
  
   VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes 
   made, no specific validation requirements exist as a result of 
   installation of this patch.
   ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
   
   
   This patch corrects three issues discovered after release of LR*5.2*291.
   
   Remedy HD143118
   ---------------
   A new report made available in LR*5.2*291 is generated from the
   Lab Tests and CPT Report [LRBE PANEL CPT REPORT] option.
   
   The report displays data from records in the LABORATORY TEST file (#60)
   which have a SUBSCRIPT of CHEM, HEM, TOX, SER, RIA, ETC.  Normally, such
   Lab Tests should not have any data in the AP MULTIPLIER FACTOR field
   (#.02) of the LAB TEST INCLUDED IN PANEL multiple (#200).  But if data
   exists there, or if it previously existed and was deleted via FileMan,
   then the report will error with an <undefined> at LOOP+14^LRBEPRPT.
   
   Routine LRBEPRPT has been revised to prevent the undefined error.
   
   Remedy HD144033
   ---------------
   Local variable LRAA was not correctly used in screening Lab Tests out
   of the PCE Retransmit [LRCAPCEX] option.  
   
   Routine LRCAPPH1 has been revised to allow Lab Tests from all Accession
   Areas to be transmitted or retransmitted to PCE except those having the
   LR SUBSCRIPT of CHEM, HEM, TOX, RIA, SER, etc. (abbreviation "CH").
   
   Remedy HD144058
   ---------------
   Data from Lab Tests for Microbiology can only be directed to PCE via
   routine LRCAPPH1.  Once the issues related to HD144033 were resolved,
   data flow to PCE for Microbiology tests occurred but lacked the full
   complement of CIDC-related data (i.e., diagnosis with service-connected
   and environmental indicators).
   
   Routines LRCAPPH1, LRBEBA3, and LRORDST have been modified to allow
   procedure data for Lab Tests within the MICROBIOLOGY (abbreviation "MI")
   Accession Area to be sent to PCE, including CIDC-related data.
    
   Additional issues
   -----------------
   Resolution of three further issues found during testing are also
   included here.
   
   (1) If Diagnosis codes were not being captured by the LAB software for
       ordered Lab Tests due to the fact that the site had not fully
       implemented CIDC, then LAB CIDC software sent an inappropriate
       Diagnosis code of 0 (zero) to PCE for each Lab Test when it was
       resulted and verified.  
    
       When the Lab Encounter was viewed within the PCE application, the
       data display was similar to the following: 
    
       4 CPT Code:  81001     URINALYSIS, AUTO W/SCOPE
       Primary Diagnosis:  INVALID CODE
       5 CPT Code:  85025     COMPLETE CBC W/AUTO DIFF WBC
       Primary Diagnosis:  INVALID CODE
   
       To prevent the display of "INVALID CODE", routine LRBEBAO has been
       corrected and will no longer send a Diagnosis code of 0 to PCE.
   
   (2) It is possible to relate a Lab Test to an entry in the WKLD CODE
       file (#64).  If the CODE multiple (#18) had been setup to contain
       multiple, active entries for the same CPT Code, then the LAB CIDC 
       software sent these CPT Codes to PCE as separate, multiple 
       Procedures when the Lab Test was resulted and verified.  For each
       Procedure the Quantity parameter was set to 1.
   
       This has been corrected to send a single CPT Code (i.e.,Procedure)
       to PCE, but with a Quantity parameter set appropriately.  The
       Quantity is set to the count of the number times the CPT Code
       appears in the CODE multiple of the WKLD CODE entry as an active
       code.
     
       Routines LRBEBA2, LRBEBA21, LRBEBA4, and LRBEBAO have been modified
       to send the correct Quantity parameter to PCE.
   
   (3) The CPT Modifier was not being sent to PCE for Lab Tests within an
       Accession Area having EXTERNAL SERVICE AREA field (#12) set to
       "YES".  For these Lab Tests, PCE should receive a Modifier of 90
       which evaluates to REFERENCE (OUTSIDE) LABORATORY.
  
       However, if Modifier 90 cannot be validly associated with the
       Procedure code (i.e., CPT Code or HCPCS Code) assigned to the Lab
       Test, it will cause PCE to reject the Procedure and create an 'Action
       Required' Encounter.  To avoid this, LAB will not send Modifier 90 to
       PCE if it is incompatible with the Procedure code for the Lab Test.
   
       Routines LRBEBA2, LRBEBA21, LRBEBAO, and LRCAPPH1 have been corrected
       to include this Modifier when appropriate.
   
   
 ASSOCIATED REMEDY TICKETS:
 =========================
 HD143118 - undefined error after LR*291
 Duplicate:  HD143131 - Lab Tests and CPT Report erroring on panel tests.
 Duplicate:  HD143244 - Getting error <UNDEFINED>LOOP+14^LRBEPRPT
 Duplicate:  HD144106 - Errors after installation of patch in test account
 Duplicate:  HD144415 - $ZE=<UNDEFINED>LOOP+14^LRBEPRPT
 Duplicate:  HD144755 - $ZERROR Generated when running Lab Tests and CPT
                        Reports
    
 HD144033 - PCE Retransmit option made inoperable by LR*5.2*291
    
 HD144058 - CPT TO PCE NOT WORKING FOR PATCH 291 FOR MICROBIOLOGY &
            BLOOD BANK
   
   
 Test Sites:
 ==========
 Boston HCS, MA
 Central Texas VAMC, TX   
 Grand Junction VAMC, CO
 Montana HCS, MO
  
   
   
 INSTALLATION INSTRUCTIONS
 =========================
                            
  This patch should not be installed during normal business hours.               
                     
  Install Time - less than 2 minutes 
                
                   
    1.   LOAD TRANSPORT GLOBAL 
         ---------------------
         Choose the PackMan message containing this patch and invoke the 
         INSTALL/CHECK MESSAGE PackMan option.  
                   
    2.   START UP KIDS 
         -------------
         Start up the Kernel Installation and Distribution System Menu 
         [XPD MAIN]: 
                     
              Edits and Distribution ...  
              Utilities ...  
              Installation ...  
                      
         Select Kernel Installation & Distribution System Option: INStallation 
                                                                  ---
              Load a Distribution 
              Print Transport Global 
              Compare Transport Global to Current System 
              Verify Checksums in Transport Global 
              Install Package(s) 
              Restart Install of Package(s) 
              Unload a Distribution 
              Backup a Transport Global 
         
         Select Installation Option: 
        
    3.   Select Installation Option: 
         ---------------------------
         NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
                NAME, enter LR*5,2*359):
                     
         a.  Backup a Transport Global - This option will create a backup
             message of any routines exported with this patch. It will not
             backup any other changes such as DD's or templates.
         b.  Compare Transport Global to Current System - This option will
             allow you to view all changes that will be made when this patch
             is installed.  It compares all components of this patch
             (routines, DD's, templates, etc.).
         c.  Verify Checksums in Transport Global - This option will allow
             you to ensure the integrity of the routines that are in the
             transport global.
                      
    4.   Select Installation Option: Install Package(s) 
                                     ----------------
         **This is the step to start the installation of this KIDS patch: 
              
         a. Choose the Install Package(s) option to start the patch install.
         b. When prompted 'Want KIDS to INHIBIT LOGONs during the 
            install? YES//' answer NO.
         c. When prompted 'Want to DISABLE Scheduled Options, Menu 
            Options, and Protocols? YES//' answer NO.
                 
   
 ROUTINE SUMMARY 
 ===============
  
   The following routines are included in this patch.  
   
   The second line of each of these routines now looks like: 
   ;;5.2;LAB SERVICE;**[Patch List]**;Sep 27, 1994 
  
                      CHECK^XTSUMBLD results
    
   Routine    Before Patch    After Patch   Patch List
   -------    ------------    -----------   ----------------------------
   LRBEBA2        17646164       17571590   **291,359**
   LRBEBA21        9131499       10077971   **291,359**
   LRBEBA3         9047328       15277082   **291,359**  
   LRBEBA4        12064856       12848490   **291,359**
   LRBEBAO        10958610       11500120   **291,359**
   LRBEPRPT        7979192        7813727   **291,359**
   LRCAPPH1       12066626       13504461   **127,136,138,158,263,264,
                                              274,291,359**
   LRORDST        12904359       12811630   **100,107,121,153,202,290,
                                              291,359**
   
   Total number of routines:  8

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: LRBEBA2
    Before: B81298476  After: B78928949  **291,359**
Routine Name: LRBEBA21
    Before: B34208057  After: B40326837  **291,359**
Routine Name: LRBEBA3
    Before: B24961895  After: B62466006  **291,359**
Routine Name: LRBEBA4
    Before: B57653585  After: B61044712  **291,359**
Routine Name: LRBEBAO
    Before: B68648424  After: B71311928  **291,359**
Routine Name: LRBEPRPT
    Before: B37091351  After: B38192060  **291,359**
Routine Name: LRCAPPH1
    Before: B49109396  After: B56348077  **127,136,138,158,263,264,274,
                                          291,359**
Routine Name: LRORDST
    Before: B30093835  After: B30181718  **100,107,121,153,202,290,291,359**

=============================================================================
User Information:
Entered By  : PAJERSKI,JAN                  Date Entered  : MAY 18, 2006
Completed By: LYNCH,MARY F.                 Date Completed: AUG 16, 2006
Released By : BELSCHWINDER,MICHAEL          Date Released : AUG 21, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

Released XT*7.3*76 SEQ #60
Extracted from mail message
**KIDS**:XT*7.3*76^

**INSTALL NAME**
XT*7.3*76
"BLD",744,0)
XT*7.3*76^TOOLKIT^0^3030530^y
"BLD",744,1,0)
^^2^2^3030530^^^^
"BLD",744,1,1,0)
View complete information on patch XT*7.3*76 in the National Patch Module
"BLD",744,1,2,0)
on FORUM.
"BLD",744,4,0)
^9.64PA^^
"BLD",744,"ABPKG")
n
"BLD",744,"KRN",0)
^9.67PA^8989.52^19
"BLD",744,"KRN",.4,0)
.4
"BLD",744,"KRN",.401,0)
.401
"BLD",744,"KRN",.402,0)
.402
"BLD",744,"KRN",.403,0)
.403
"BLD",744,"KRN",.5,0)
.5
"BLD",744,"KRN",.84,0)
.84
"BLD",744,"KRN",3.6,0)
3.6
"BLD",744,"KRN",3.8,0)
3.8
"BLD",744,"KRN",9.2,0)
9.2
"BLD",744,"KRN",9.8,0)
9.8
"BLD",744,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",744,"KRN",9.8,"NM",1,0)
XTRUTL^^0^B19842806
"BLD",744,"KRN",9.8,"NM","B","XTRUTL",1)

"BLD",744,"KRN",19,0)
19
"BLD",744,"KRN",19.1,0)
19.1
"BLD",744,"KRN",101,0)
101
"BLD",744,"KRN",409.61,0)
409.61
"BLD",744,"KRN",771,0)
771
"BLD",744,"KRN",870,0)
870
"BLD",744,"KRN",8989.51,0)
8989.51
"BLD",744,"KRN",8989.52,0)
8989.52
"BLD",744,"KRN",8994,0)
8994
"BLD",744,"KRN","B",.4,.4)

"BLD",744,"KRN","B",.401,.401)

"BLD",744,"KRN","B",.402,.402)

"BLD",744,"KRN","B",.403,.403)

"BLD",744,"KRN","B",.5,.5)

"BLD",744,"KRN","B",.84,.84)

"BLD",744,"KRN","B",3.6,3.6)

"BLD",744,"KRN","B",3.8,3.8)

"BLD",744,"KRN","B",9.2,9.2)

"BLD",744,"KRN","B",9.8,9.8)

"BLD",744,"KRN","B",19,19)

"BLD",744,"KRN","B",19.1,19.1)

"BLD",744,"KRN","B",101,101)

"BLD",744,"KRN","B",409.61,409.61)

"BLD",744,"KRN","B",771,771)

"BLD",744,"KRN","B",870,870)

"BLD",744,"KRN","B",8989.51,8989.51)

"BLD",744,"KRN","B",8989.52,8989.52)

"BLD",744,"KRN","B",8994,8994)

"BLD",744,"QUES",0)
^9.62^^
"BLD",744,"REQB",0)
^9.611^1^1
"BLD",744,"REQB",1,0)
XT*7.3*66^1
"BLD",744,"REQB","B","XT*7.3*66",1)

"MBREQ")
0
"PKG",6,-1)
1^1
"PKG",6,0)
TOOLKIT^XT^PROGRAMMERS OPTIONS, MULTI. TERM LOOKUP^
"PKG",6,20,0)
^9.402P^^
"PKG",6,22,0)
^9.49I^1^1
"PKG",6,22,1,0)
7.3^2961029^2970513^2
"PKG",6,22,1,"PAH",1,0)
76^3030530
"PKG",6,22,1,"PAH",1,1,0)
^^2^2^3030530
"PKG",6,22,1,"PAH",1,1,1,0)
View complete information on patch XT*7.3*76 in the National Patch Module
"PKG",6,22,1,"PAH",1,1,2,0)
on FORUM.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","XTRUTL")
0^1^B19842806
"RTN","XTRUTL",1,0)
XTRUTL ;ISCSF/RWF - Developer Routine Utilities ;05/30/2003  10:18
"RTN","XTRUTL",2,0)
 ;;7.3;TOOLKIT;**20,39,59,66,76**;Apr 25, 1995
"RTN","XTRUTL",3,0)
 ;
"RTN","XTRUTL",4,0)
 Q  ;No entry from the top.
"RTN","XTRUTL",5,0)
BUILD ;
"RTN","XTRUTL",6,0)
 K ^UTILITY($J),^TMP($J) D HOME^%ZIS
"RTN","XTRUTL",7,0)
 N BLDA,DIC,IX,X,PATCH,RTN,RN,L2,OLDSUM
"RTN","XTRUTL",8,0)
 W !!,"This generates the Checksum/2nd line list for the routines from a BUILD file."
"RTN","XTRUTL",9,0)
 I '$D(^XPD(9.6,0)) W !,"No BUILD file to work from." Q
"RTN","XTRUTL",10,0)
 S Y=$$BUILD^XTRUTL1 G EXIT:Y'>0 S BLDA=+Y,PATCH=+$P(Y,"*",3)
"RTN","XTRUTL",11,0)
 D RTN^XTRUTL1(BLDA)
"RTN","XTRUTL",12,0)
 I '$D(^UTILITY($J)) W !,"No routines in this build." G EXIT
"RTN","XTRUTL",13,0)
 ;S X=$P(^DIC(9.4,+$P(Y(0),U,2),0),U,2)
"RTN","XTRUTL",14,0)
 S RN="" F  S RN=$O(^UTILITY($J,RN)) Q:RN=""  D  Q:$D(L2)
"RTN","XTRUTL",15,0)
 . S X=RN X ^%ZOSF("TEST") I '$T D  Q
"RTN","XTRUTL",16,0)
 . . W !,RN,?13,"Routine not in this UCI."
"RTN","XTRUTL",17,0)
 . . K ^UTILITY($J,RN)
"RTN","XTRUTL",18,0)
 . S L2=$T(+2^@RN)
"RTN","XTRUTL",19,0)
 I '$D(L2) W !,"No other routines in this build." G EXIT
"RTN","XTRUTL",20,0)
 S L2=$P(L2,";",1,4)_";**[Patch List]**;"_$P(L2,";",6,99)
"RTN","XTRUTL",21,0)
 W !!,"Routine Summary",!,"The following routines are included in this patch.  The second line of each",!,"of these routines now looks like:"
"RTN","XTRUTL",22,0)
 W !,L2
"RTN","XTRUTL",23,0)
 S RN="" U IO W !!,?17,"Checksum",!,"Routine",?16,"Old",?26,"New",?35,"Patch List"
"RTN","XTRUTL",24,0)
 F  S RN=$O(^UTILITY($J,RN)) Q:RN=""  D
"RTN","XTRUTL",25,0)
 . S RSUM=+$$NEWSUM(RN)
"RTN","XTRUTL",26,0)
 . S OLDSUM=$$OLDSUM(RN),OLDSUM=$P(OLDSUM,"/",1)
"RTN","XTRUTL",27,0)
 . S X=$G(RTN(2,0)) ;X has second line of routine
"RTN","XTRUTL",28,0)
 . S:(+OLDSUM=0) OLDSUM="n/a" S:(+RSUM=0) RSUM="n/a"
"RTN","XTRUTL",29,0)
 . W !,RN,?13,$J(OLDSUM,8),?23,$J(RSUM,8) D WRAP(35,$P(X,";",5))
"RTN","XTRUTL",30,0)
 . D PTLBLD($P(X,";",5))
"RTN","XTRUTL",31,0)
 . S Y=$P(X,"**",2),Z=$P(Y,",",$L(Y,","))
"RTN","XTRUTL",32,0)
 . I PATCH,Z'=PATCH W " <<<No "_PATCH
"RTN","XTRUTL",33,0)
 . Q
"RTN","XTRUTL",34,0)
 W ! D PTLDSP W !,"Sites should use CHECK^XTSUMBLD to verify checksums.",!
"RTN","XTRUTL",35,0)
EXIT K %
"RTN","XTRUTL",36,0)
 Q
"RTN","XTRUTL",37,0)
 ;
"RTN","XTRUTL",38,0)
WRAP(C,S) ;Wrap S starting at col C.
"RTN","XTRUTL",39,0)
 I $L(S)+C<80 W ?C,S Q
"RTN","XTRUTL",40,0)
 N I,T
"RTN","XTRUTL",41,0)
 S I=$F(S,",",70-C) W ?C,$E(S,1,I-1) S S=$E(S,I,999)
"RTN","XTRUTL",42,0)
 F  S I=$F(S,",",70-C),I=$S(I>0:I,1:$L(S)+2) W !,?C+2,$E(S,1,I-1) S S=$E(S,I,999) Q:'$L(S)
"RTN","XTRUTL",43,0)
 Q
"RTN","XTRUTL",44,0)
 ;
"RTN","XTRUTL",45,0)
RSUM() N Y,Y2,%,%1,%2,%3 S (Y,Y2)=0
"RTN","XTRUTL",46,0)
 F %=1,3:1:LC S %1=RTN(%,0),%3=$F(%1," "),%3=$S($E(%1,%3)'=";":$L(%1),$E(%1,%3+1)=";":$L(%1),1:%3-2) F %2=1:1:%3 S Y=$A(%1,%2)*%2+Y,Y2=$A(%1,%2)*(%2+%)+Y2
"RTN","XTRUTL",47,0)
 ;S RSUM=Y,RSUM2=Y2
"RTN","XTRUTL",48,0)
 Q Y_"/"_Y2
"RTN","XTRUTL",49,0)
 ;
"RTN","XTRUTL",50,0)
NEWSUM(X) ;Get the NEW Checksum
"RTN","XTRUTL",51,0)
 N XCNP,DIF K RTN I '$L($T(^@X)) Q 0
"RTN","XTRUTL",52,0)
 S XCNP=0,DIF="RTN(" K RTN X ^%ZOSF("LOAD") S LC=XCNP-1
"RTN","XTRUTL",53,0)
 Q $$RSUM
"RTN","XTRUTL",54,0)
 ;
"RTN","XTRUTL",55,0)
OLDSUM(X) ;Get the OLD Checksum
"RTN","XTRUTL",56,0)
 N Y S Y=$O(^DIC(9.8,"B",X,0)) Q:Y'>0 ""
"RTN","XTRUTL",57,0)
 S X=$G(^DIC(9.8,Y,4))
"RTN","XTRUTL",58,0)
 Q $P(X,"^",2)
"RTN","XTRUTL",59,0)
 ;
"RTN","XTRUTL",60,0)
PTLBLD(Z) ;Build in ^TMP the patches used
"RTN","XTRUTL",61,0)
 N I,J,K,P S Z=$P(Z,"**",2),K=""
"RTN","XTRUTL",62,0)
 F I=1:1 S J=$P(Z,",",I) Q:(J="")  I (J'=PATCH) S P=$G(^TMP($J,J)),^TMP($J,J)=P_K S K=K_J_","
"RTN","XTRUTL",63,0)
 Q
"RTN","XTRUTL",64,0)
PTLSRT ;Sort the list
"RTN","XTRUTL",65,0)
 N I,J,K,L S I=0
"RTN","XTRUTL",66,0)
 F I=0:0 S I=$O(^TMP($J,I)) Q:I'>0  S K=^(I) D
"RTN","XTRUTL",67,0)
 . F J=1:1 S L=$P(K,",",J) Q:L=""  K ^TMP($J,L)
"RTN","XTRUTL",68,0)
 . Q
"RTN","XTRUTL",69,0)
 Q
"RTN","XTRUTL",70,0)
 ;
"RTN","XTRUTL",71,0)
PTLDSP ;Display list of patches.
"RTN","XTRUTL",72,0)
 D PTLSRT
"RTN","XTRUTL",73,0)
 N I,J K ^TMP($J,PATCH)
"RTN","XTRUTL",74,0)
 Q:$O(^TMP($J,0))=""
"RTN","XTRUTL",75,0)
 W !,"List of preceding patches: "
"RTN","XTRUTL",76,0)
 S (I,J)="" F  S I=$O(^TMP($J,I)) Q:I=""  D
"RTN","XTRUTL",77,0)
 . I $X>70 W ! S J=""
"RTN","XTRUTL",78,0)
 . W J,I S J=", "
"RTN","XTRUTL",79,0)
 S:$L(J)>2 J=$E(J,1,$L(J)-2)
"RTN","XTRUTL",80,0)
 Q
"RTN","XTRUTL",81,0)
 ;
"RTN","XTRUTL",82,0)
UPDATE ;Update the ROUTINE file with current checksums
"RTN","XTRUTL",83,0)
 K ^UTILITY($J)
"RTN","XTRUTL",84,0)
 N BLDA,DIC,IX,X,NOW W !!,"This will update the ROUTINE file for the routines from a BUILD file."
"RTN","XTRUTL",85,0)
 I '$D(^XPD(9.6,0)) W !,"No BUILD file to work from." Q
"RTN","XTRUTL",86,0)
 S Y=$$BUILD^XTRUTL1 G EXIT:Y'>0 S BLDA=+Y
"RTN","XTRUTL",87,0)
 D RTN^XTRUTL1(BLDA)
"RTN","XTRUTL",88,0)
 S NOW=$$NOW^XLFDT()
"RTN","XTRUTL",89,0)
 G EXIT:$O(^UTILITY($J,""))=""
"RTN","XTRUTL",90,0)
 S RN=""
"RTN","XTRUTL",91,0)
 F  S RN=$O(^UTILITY($J,RN)) Q:RN=""  D UD1(RN)
"RTN","XTRUTL",92,0)
 W !,"Done"
"RTN","XTRUTL",93,0)
 Q
"RTN","XTRUTL",94,0)
 ;
"RTN","XTRUTL",95,0)
UD1(RN) ;
"RTN","XTRUTL",96,0)
 N X,XCNP,DIF,LC,RSUM,Y S:'$D(NOW) NOW=$$NOW^XLFDT
"RTN","XTRUTL",97,0)
 S U="^",RSUM=$$NEWSUM(RN) Q:RSUM=0
"RTN","XTRUTL",98,0)
 S X=RTN(2,0)
"RTN","XTRUTL",99,0)
 S Y=$$GETDA(RN) I Y'>0 W !,"  Routine ",RN," not found in the database." Q
"RTN","XTRUTL",100,0)
 S ^DIC(9.8,+Y,4)=NOW_U_RSUM_U_$P(X,";",5)
"RTN","XTRUTL",101,0)
 Q
"RTN","XTRUTL",102,0)
 ;
"RTN","XTRUTL",103,0)
SHOW(RN) ;Show current data
"RTN","XTRUTL",104,0)
 N Y,%0,%4,RTN,RSUM S %4="^n/a^n/a",U="^"
"RTN","XTRUTL",105,0)
 S Y=$$GETDA(RN) I Y>0  S %0=^DIC(9.8,Y,0),%4=$G(^(4))
"RTN","XTRUTL",106,0)
 S RSUM=$$NEWSUM(RN)
"RTN","XTRUTL",107,0)
 W !,"RTN",?10,"New ChkSum",?28,"Old ChkSum",?46,"Old Date"
"RTN","XTRUTL",108,0)
 W !,RN,?10,RSUM,?28,$P(%4,U,2),?46,$P(%4,U)
"RTN","XTRUTL",109,0)
 Q
"RTN","XTRUTL",110,0)
 ;
"RTN","XTRUTL",111,0)
GETDA(X) ;Find a DA in file
"RTN","XTRUTL",112,0)
 Q $O(^DIC(9.8,"B",X,0))
"RTN","XTRUTL",113,0)
 ;
"RTN","XTRUTL",114,0)
M ;Manual Update of the Routine file
"RTN","XTRUTL",115,0)
 N DIC,DIE,DA,DR
"RTN","XTRUTL",116,0)
 S DIC="^DIC(9.8,",DIC(0)="AEMQ" D ^DIC Q:Y'>0
"RTN","XTRUTL",117,0)
 S DA=+Y,DIE=DIC,DR=7.2 D ^DIE
"RTN","XTRUTL",118,0)
 Q
"RTN","XTRUTL",119,0)
 ;
"RTN","XTRUTL",120,0)
LIST ;List all routines that don't match the old checksum
"RTN","XTRUTL",121,0)
 N Y,X,RN,RSUM,DA
"RTN","XTRUTL",122,0)
 S RN="",U="^"
"RTN","XTRUTL",123,0)
 F  S RN=$O(^DIC(9.8,"B",RN)) Q:RN=""  D
"RTN","XTRUTL",124,0)
 . S DA=$O(^DIC(9.8,"B",RN,0)) Q:DA'>0
"RTN","XTRUTL",125,0)
 . S %4=$G(^DIC(9.8,DA,4)) Q:$P(%4,U,2)=""  S RSUM=$$NEWSUM(RN)
"RTN","XTRUTL",126,0)
 . I RSUM'=$P(%4,U,2) W !,RN,?10,"Checksum mismatch ",$P($T(+2^@RN),";",5)
"RTN","XTRUTL",127,0)
 . Q
"RTN","XTRUTL",128,0)
 Q
"VER")
8.0^22.0
**END**
**END**

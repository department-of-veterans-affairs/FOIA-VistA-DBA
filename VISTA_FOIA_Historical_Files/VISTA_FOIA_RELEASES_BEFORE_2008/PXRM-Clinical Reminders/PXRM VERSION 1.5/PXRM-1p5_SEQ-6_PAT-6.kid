Released PXRM*1.5*6 SEQ #6
Extracted from mail message
**KIDS**:PXRM*1.5*6^

**INSTALL NAME**
PXRM*1.5*6
"BLD",3099,0)
PXRM*1.5*6^CLINICAL REMINDERS^0^3020115^y
"BLD",3099,1,0)
^^1^1^3010627^
"BLD",3099,1,1,0)
This patch includes fixes and minor changes to the Reminders Due report.
"BLD",3099,4,0)
^9.64PA^800^4
"BLD",3099,4,800,0)
800
"BLD",3099,4,800,222)
y^n^f^^^^n
"BLD",3099,4,810.1,0)
810.1
"BLD",3099,4,810.1,222)
y^y^f^^^^n
"BLD",3099,4,811.2,0)
811.2
"BLD",3099,4,811.2,222)
n^n^f^^y^^y^r^n
"BLD",3099,4,811.2,224)
I Y=18
"BLD",3099,4,8989.51,0)
8989.51
"BLD",3099,4,8989.51,222)
n^n^f^^y^^y^r^n
"BLD",3099,4,8989.51,224)
I ^(0)["PXRM REPORT TEMPLATE (USER)"
"BLD",3099,4,"B",800,800)

"BLD",3099,4,"B",810.1,810.1)

"BLD",3099,4,"B",811.2,811.2)

"BLD",3099,4,"B",8989.51,8989.51)

"BLD",3099,"ABPKG")
n
"BLD",3099,"INI")
PRE^PXRMP6I
"BLD",3099,"INID")
^n
"BLD",3099,"INIT")
POST^PXRMP6I
"BLD",3099,"KRN",0)
^9.67PA^19^17
"BLD",3099,"KRN",.4,0)
.4
"BLD",3099,"KRN",.401,0)
.401
"BLD",3099,"KRN",.402,0)
.402
"BLD",3099,"KRN",.403,0)
.403
"BLD",3099,"KRN",.5,0)
.5
"BLD",3099,"KRN",.84,0)
.84
"BLD",3099,"KRN",3.6,0)
3.6
"BLD",3099,"KRN",3.8,0)
3.8
"BLD",3099,"KRN",9.2,0)
9.2
"BLD",3099,"KRN",9.8,0)
9.8
"BLD",3099,"KRN",9.8,"NM",0)
^9.68A^25^24
"BLD",3099,"KRN",9.8,"NM",1,0)
PXRMXAP^^0^B9535073
"BLD",3099,"KRN",9.8,"NM",2,0)
PXRMXBSY^^0^B409130
"BLD",3099,"KRN",9.8,"NM",3,0)
PXRMXD^^0^B78428331
"BLD",3099,"KRN",9.8,"NM",4,0)
PXRMXDUT^^0^B26957605
"BLD",3099,"KRN",9.8,"NM",5,0)
PXRMXGPR^^0^B82261237
"BLD",3099,"KRN",9.8,"NM",6,0)
PXRMXGUT^^0^B4000346
"BLD",3099,"KRN",9.8,"NM",7,0)
PXRMXPR^^0^B72167346
"BLD",3099,"KRN",9.8,"NM",8,0)
PXRMXQUE^^0^B628112
"BLD",3099,"KRN",9.8,"NM",9,0)
PXRMXS1^^0^B7929922
"BLD",3099,"KRN",9.8,"NM",10,0)
PXRMXSC^^0^B3705933
"BLD",3099,"KRN",9.8,"NM",11,0)
PXRMXSD^^0^B127335938
"BLD",3099,"KRN",9.8,"NM",12,0)
PXRMXSE^^0^B5995488
"BLD",3099,"KRN",9.8,"NM",13,0)
PXRMXSEL^^0^B48860752
"BLD",3099,"KRN",9.8,"NM",14,0)
PXRMXSEO^^0^B85514544
"BLD",3099,"KRN",9.8,"NM",15,0)
PXRMXSU^^0^B60434181
"BLD",3099,"KRN",9.8,"NM",16,0)
PXRMXT^^0^B35640921
"BLD",3099,"KRN",9.8,"NM",17,0)
PXRMXTA^^0^B43339024
"BLD",3099,"KRN",9.8,"NM",18,0)
PXRMXTB^^0^B35581468
"BLD",3099,"KRN",9.8,"NM",19,0)
PXRMXTD^^0^B10194912
"BLD",3099,"KRN",9.8,"NM",20,0)
PXRMXTF^^0^B18964952
"BLD",3099,"KRN",9.8,"NM",21,0)
PXRMXTU^^0^B27248824
"BLD",3099,"KRN",9.8,"NM",22,0)
PXRMDLG1^^0^B73439558
"BLD",3099,"KRN",9.8,"NM",24,0)
PXRMREV^^0^B10803491
"BLD",3099,"KRN",9.8,"NM",25,0)
PXRMP6I^^0^B1379185
"BLD",3099,"KRN",9.8,"NM","B","PXRMDLG1",22)

"BLD",3099,"KRN",9.8,"NM","B","PXRMP6I",25)

"BLD",3099,"KRN",9.8,"NM","B","PXRMREV",24)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXAP",1)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXBSY",2)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXD",3)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXDUT",4)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXGPR",5)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXGUT",6)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXPR",7)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXQUE",8)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXS1",9)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXSC",10)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXSD",11)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXSE",12)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXSEL",13)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXSEO",14)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXSU",15)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXT",16)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXTA",17)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXTB",18)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXTD",19)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXTF",20)

"BLD",3099,"KRN",9.8,"NM","B","PXRMXTU",21)

"BLD",3099,"KRN",19,0)
19
"BLD",3099,"KRN",19,"NM",0)
^9.68A^4^4
"BLD",3099,"KRN",19,"NM",1,0)
PXRM REMINDERS DUE (USER)^^0
"BLD",3099,"KRN",19,"NM",2,0)
PXRM REPORT TEMPLATE (USER)^^0
"BLD",3099,"KRN",19,"NM",3,0)
PXRM REVIEW DATES^^0
"BLD",3099,"KRN",19,"NM",4,0)
PXRM REMINDER REPORTS^^2
"BLD",3099,"KRN",19,"NM","B","PXRM REMINDER REPORTS",4)

"BLD",3099,"KRN",19,"NM","B","PXRM REMINDERS DUE (USER)",1)

"BLD",3099,"KRN",19,"NM","B","PXRM REPORT TEMPLATE (USER)",2)

"BLD",3099,"KRN",19,"NM","B","PXRM REVIEW DATES",3)

"BLD",3099,"KRN",19.1,0)
19.1
"BLD",3099,"KRN",101,0)
101
"BLD",3099,"KRN",409.61,0)
409.61
"BLD",3099,"KRN",771,0)
771
"BLD",3099,"KRN",870,0)
870
"BLD",3099,"KRN",8994,0)
8994
"BLD",3099,"KRN","B",.4,.4)

"BLD",3099,"KRN","B",.401,.401)

"BLD",3099,"KRN","B",.402,.402)

"BLD",3099,"KRN","B",.403,.403)

"BLD",3099,"KRN","B",.5,.5)

"BLD",3099,"KRN","B",.84,.84)

"BLD",3099,"KRN","B",3.6,3.6)

"BLD",3099,"KRN","B",3.8,3.8)

"BLD",3099,"KRN","B",9.2,9.2)

"BLD",3099,"KRN","B",9.8,9.8)

"BLD",3099,"KRN","B",19,19)

"BLD",3099,"KRN","B",19.1,19.1)

"BLD",3099,"KRN","B",101,101)

"BLD",3099,"KRN","B",409.61,409.61)

"BLD",3099,"KRN","B",771,771)

"BLD",3099,"KRN","B",870,870)

"BLD",3099,"KRN","B",8994,8994)

"BLD",3099,"QUES",0)
^9.62^^
"BLD",3099,"REQB",0)
^9.611^1^1
"BLD",3099,"REQB",1,0)
PXRM*1.5*5^2
"BLD",3099,"REQB","B","PXRM*1.5*5",1)

"DATA",811.2,18,0)
VA-BREAST TUMOR^+HX breast tumor ICD9 codes
"DATA",811.2,18,80,0)
^811.22102^16^16
"DATA",811.2,18,80,1,0)
174.0^174.9
"DATA",811.2,18,80,2,0)
198.81^198.81
"DATA",811.2,18,80,3,0)
238.3^238.3
"DATA",811.2,18,80,4,0)
239.3^239.3
"DATA",811.2,18,80,5,0)
233.0^233.0
"DATA",811.2,18,80,6,0)
217.^217.
"DATA",811.2,18,80,7,0)
610.0^610.9
"DATA",811.2,18,80,8,0)
611.0^611.0
"DATA",811.2,18,80,9,0)
611.5^611.5
"DATA",811.2,18,80,10,0)
611.71^611.72
"DATA",811.2,18,80,11,0)
611.9^611.9
"DATA",811.2,18,80,12,0)
675.10^675.14
"DATA",811.2,18,80,13,0)
757.6^757.6
"DATA",811.2,18,80,14,0)
922.0^922.0
"DATA",811.2,18,80,15,0)
793.8^793.8
"DATA",811.2,18,80,16,0)
V10.3^V10.3
"DATA",811.2,18,100)
N^
"DATA",811.2,18,110,0)
^811.21D^^0
"DATA",811.2,18,"SDX",0)
^811.23102IP^35^35
"DATA",811.2,18,"SDX",1,0)
8625
"DATA",811.2,18,"SDX",2,0)
335
"DATA",811.2,18,"SDX",3,0)
336
"DATA",811.2,18,"SDX",4,0)
337
"DATA",811.2,18,"SDX",5,0)
338
"DATA",811.2,18,"SDX",6,0)
339
"DATA",811.2,18,"SDX",7,0)
340
"DATA",811.2,18,"SDX",8,0)
341
"DATA",811.2,18,"SDX",9,0)
342
"DATA",811.2,18,"SDX",10,0)
444
"DATA",811.2,18,"SDX",11,0)
8681
"DATA",811.2,18,"SDX",12,0)
8697
"DATA",811.2,18,"SDX",13,0)
809
"DATA",811.2,18,"SDX",14,0)
818
"DATA",811.2,18,"SDX",15,0)
9271
"DATA",811.2,18,"SDX",16,0)
3222
"DATA",811.2,18,"SDX",17,0)
3223
"DATA",811.2,18,"SDX",18,0)
3224
"DATA",811.2,18,"SDX",19,0)
3225
"DATA",811.2,18,"SDX",20,0)
3226
"DATA",811.2,18,"SDX",21,0)
3227
"DATA",811.2,18,"SDX",22,0)
9272
"DATA",811.2,18,"SDX",23,0)
3232
"DATA",811.2,18,"SDX",24,0)
3234
"DATA",811.2,18,"SDX",25,0)
3235
"DATA",811.2,18,"SDX",26,0)
3238
"DATA",811.2,18,"SDX",27,0)
9555
"DATA",811.2,18,"SDX",28,0)
4022
"DATA",811.2,18,"SDX",29,0)
4023
"DATA",811.2,18,"SDX",30,0)
4024
"DATA",811.2,18,"SDX",31,0)
4025
"DATA",811.2,18,"SDX",32,0)
5239
"DATA",811.2,18,"SDX",33,0)
5528
"DATA",811.2,18,"SDX",34,0)
10052
"DATA",811.2,18,"SDX",35,0)
11300
"DATA",8989.51,4717,0)
PXRM REPORT TEMPLATE (USER)^Reminder Report Templates^1^Sequence^Reminder Report Template
"DATA",8989.51,4717,1)
P^810.1^Enter the Reminder Template available in Reminder Reports. 
"DATA",8989.51,4717,6)
N^^Enter a sequential number to identify the report template.
"DATA",8989.51,4717,20,0)
^^2^2^3010130^
"DATA",8989.51,4717,20,1,0)
Returns a list of Reminder Report Templates that are allowed for a
"DATA",8989.51,4717,20,2,0)
user.
"DATA",8989.51,4717,30,0)
^8989.513I^1^1
"DATA",8989.51,4717,30,1,0)
1^200
"FIA",800)
CLINICAL REMINDER PARAMETERS
"FIA",800,0)
^PXRM(800,
"FIA",800,0,0)
800O
"FIA",800,0,1)
y^n^f^^^^n
"FIA",800,0,10)

"FIA",800,0,11)

"FIA",800,0,"RLRO")

"FIA",800,0,"VR")
1.5^PXRM
"FIA",800,800)
0
"FIA",800,800.01)
0
"FIA",800,800.02)
0
"FIA",800,800.04)
0
"FIA",800,800.41)
0
"FIA",810.1)
REMINDER REPORT TEMPLATE
"FIA",810.1,0)
^PXRMPT(810.1,
"FIA",810.1,0,0)
810.1IO
"FIA",810.1,0,1)
y^y^f^^^^n
"FIA",810.1,0,10)

"FIA",810.1,0,11)

"FIA",810.1,0,"RLRO")

"FIA",810.1,0,"VR")
1.5^PXRM
"FIA",810.1,810.1)
0
"FIA",810.1,810.11)
0
"FIA",810.1,810.111)
0
"FIA",810.1,810.112)
0
"FIA",810.1,810.113)
0
"FIA",810.1,810.12)
0
"FIA",810.1,810.13)
0
"FIA",810.1,810.14)
0
"FIA",810.1,810.16)
0
"FIA",810.1,810.17)
0
"FIA",810.1,810.18)
0
"FIA",810.1,810.19)
0
"FIA",811.2)
REMINDER TAXONOMY
"FIA",811.2,0)
^PXD(811.2,
"FIA",811.2,0,0)
811.2IO
"FIA",811.2,0,1)
n^n^f^^y^^y^r^n
"FIA",811.2,0,10)

"FIA",811.2,0,11)
I Y=18
"FIA",811.2,0,"RLRO")

"FIA",811.2,0,"VR")
1.5^PXRM
"FIA",811.2,811.2)
0
"FIA",811.2,811.21)
0
"FIA",811.2,811.212)
0
"FIA",811.2,811.22102)
0
"FIA",811.2,811.22103)
0
"FIA",811.2,811.22104)
0
"FIA",811.2,811.23102)
0
"FIA",811.2,811.23104)
0
"FIA",8989.51)
PARAMETER DEFINITION
"FIA",8989.51,0)
^XTV(8989.51,
"FIA",8989.51,0,0)
8989.51I
"FIA",8989.51,0,1)
n^n^f^^y^^y^r^n
"FIA",8989.51,0,10)

"FIA",8989.51,0,11)
I ^(0)["PXRM REPORT TEMPLATE (USER)"
"FIA",8989.51,0,"RLRO")

"FIA",8989.51,0,"VR")
1.5^PXRM
"FIA",8989.51,8989.51)
0
"FIA",8989.51,8989.512)
0
"FIA",8989.51,8989.513)
0
"INI")
PRE^PXRMP6I
"INIT")
POST^PXRMP6I
"IX",811.2,811.2,"B",0)
811.2^B^New style B cross-reference^R^^F^IR^I^811.2^^^^^LS
"IX",811.2,811.2,"B",1)
S ^PXD(811.2,"B",$E(X,1,35),DA)=""
"IX",811.2,811.2,"B",2)
K ^PXD(811.2,"B",$E(X,1,35),DA)
"IX",811.2,811.2,"B",2.5)
K ^PXD(811.2,"B")
"IX",811.2,811.2,"B",11.1,0)
^.114IA^1^1
"IX",811.2,811.2,"B",11.1,1,0)
1^F^811.2^.01^35^1^F
"IX",811.2,811.2,"B",11.1,1,3)

"IX",811.2,811.22102,"AD",0)
811.22102^AD^Whenever ICD9 entries are edited rebuild expanded taxonomy^MU^^R^IR^I^811.22102^^^^^A
"IX",811.2,811.22102,"AD",1)
D TAXEDIT^PXRMTAX(DA(1),"")
"IX",811.2,811.22102,"AD",2)
D TAXEDIT^PXRMTAX(DA(1),DA)
"IX",811.2,811.22102,"AD",2.4)
S X=1 I $$EDITNXR^PXRMLOGX(.X1,.X2) S X=0
"IX",811.2,811.22102,"AD",2.5)
D TAXKILL^PXRMTAX(DA(1))
"IX",811.2,811.22102,"AD",11.1,0)
^.114IA^2^2
"IX",811.2,811.22102,"AD",11.1,1,0)
1^F^811.22102^.01^^^F
"IX",811.2,811.22102,"AD",11.1,2,0)
2^F^811.22102^1^^^F
"IX",811.2,811.22103,"AC",0)
811.22103^AC^Whenever ICD0 entries are changed rebuild the expanded taxonomy^MU^^R^IR^I^811.22103^^^^^A
"IX",811.2,811.22103,"AC",1)
D TAXEDIT^PXRMTAX(DA(1),"")
"IX",811.2,811.22103,"AC",2)
D TAXEDIT^PXRMTAX(DA(1),DA)
"IX",811.2,811.22103,"AC",2.4)
S X=1 I $$EDITNXR^PXRMLOGX(.X1,.X2) S X=0
"IX",811.2,811.22103,"AC",2.5)
D TAXKILL^PXRMTAX(DA(1))
"IX",811.2,811.22103,"AC",11.1,0)
^.114IA^2^2
"IX",811.2,811.22103,"AC",11.1,1,0)
1^F^811.22103^.01^^^F
"IX",811.2,811.22103,"AC",11.1,2,0)
2^F^811.22103^1^^^F
"IX",811.2,811.22104,"AE",0)
811.22104^AE^Whenever CPT entries are changed rebuild the expanded taxonomy^MU^^R^IR^I^811.22104^^^^^A
"IX",811.2,811.22104,"AE",1)
D TAXEDIT^PXRMTAX(DA(1),"")
"IX",811.2,811.22104,"AE",2)
D TAXEDIT^PXRMTAX(DA(1),DA)
"IX",811.2,811.22104,"AE",2.4)
S X=1 I $$EDITNXR^PXRMLOGX(.X1,.X2) S X=0
"IX",811.2,811.22104,"AE",2.5)
D TAXKILL^PXRMTAX(DA(1))
"IX",811.2,811.22104,"AE",11.1,0)
^.114IA^2^2
"IX",811.2,811.22104,"AE",11.1,1,0)
1^F^811.22104^.01^^^F
"IX",811.2,811.22104,"AE",11.1,2,0)
2^F^811.22104^1^^^F
"KEY",811.2,811.2,"A",0)
811.2^A^P^115
"KEY",811.2,811.2,"A",2,0)
^.312IA^1^1
"KEY",811.2,811.2,"A",2,1,0)
.01^811.2^1
"KEYPTR",811.2,811.2,"A")
811.2^B
"KRN",19,7710,-1)
2^4
"KRN",19,7710,0)
PXRM REMINDER REPORTS^Reminder Reports^^M^1342^^^^^^^364
"KRN",19,7710,10,0)
^19.01IP^6^6
"KRN",19,7710,10,4,0)
8609^V^20
"KRN",19,7710,10,4,"^")
PXRM REVIEW DATES
"KRN",19,7710,10,5,0)
8536^R^5
"KRN",19,7710,10,5,"^")
PXRM REMINDERS DUE (USER)
"KRN",19,7710,10,6,0)
8535^U^7
"KRN",19,7710,10,6,"^")
PXRM REPORT TEMPLATE (USER)
"KRN",19,7710,"U")
REMINDER REPORTS
"KRN",19,8535,-1)
0^2
"KRN",19,8535,0)
PXRM REPORT TEMPLATE (USER)^User Report Templates^^A^^^^^^^^CLINICAL REMINDERS^^1
"KRN",19,8535,1,0)
^^3^3^3010130^
"KRN",19,8535,1,1,0)
This option allows a user to modify the PXRM REPORT TEMPLATE (USER)
"KRN",19,8535,1,2,0)
parameter. This parameter defines which reminder report templates are
"KRN",19,8535,1,3,0)
available to a restricted user.
"KRN",19,8535,20)
D EDITPAR^XPAREDIT("PXRM REPORT TEMPLATE (USER)")
"KRN",19,8535,"U")
USER REPORT TEMPLATES
"KRN",19,8536,-1)
0^1
"KRN",19,8536,0)
PXRM REMINDERS DUE (USER)^Reminders Due Report (User)^^R^^^^^^^^CLINICAL REMINDERS
"KRN",19,8536,1,0)
^19.06^2^2^3010130^^^^
"KRN",19,8536,1,1,0)
Reminders Due Reports may be run from any report template allocated to
"KRN",19,8536,1,2,0)
this user.
"KRN",19,8536,25)
USER^PXRMXD
"KRN",19,8536,"U")
REMINDERS DUE REPORT (USER)
"KRN",19,8609,-1)
0^3
"KRN",19,8609,0)
PXRM REVIEW DATES^Review Date Report^^R^^^^^^^y^CLINICAL REMINDERS
"KRN",19,8609,1,0)
^19.06^9^9^3010618^^^
"KRN",19,8609,1,1,0)
The Review Date Report is may be run for the following files:
"KRN",19,8609,1,2,0)
 
"KRN",19,8609,1,3,0)
        Computed Findings
"KRN",19,8609,1,4,0)
        Reminder Definition
"KRN",19,8609,1,5,0)
        Reminder Dialogs
"KRN",19,8609,1,6,0)
        Reminder Taxonomies
"KRN",19,8609,1,7,0)
 
"KRN",19,8609,1,8,0)
A cuttoff date may be entered and all review dates prior or equal to that
"KRN",19,8609,1,9,0)
date in the file selected are reported.
"KRN",19,8609,25)
PXRMREV
"KRN",19,8609,99)
58608,54651
"KRN",19,8609,"U")
REVIEW DATE REPORT
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PGL",811.2,100,2,101)
SPONSOR^P811.6^PXRMD(811.6,^100;2^Q
"PGL",811.21,0,2,1)
EDIT BY^P200'^VA(200,^0;2^Q
"PKG",364,-1)
1^1
"PKG",364,0)
CLINICAL REMINDERS^PXRM^Clinical Reminders^^^3020109
"PKG",364,20,0)
^9.402P^^
"PKG",364,22,0)
^9.49I^1^1
"PKG",364,22,1,0)
1.5^3000619^3000622^1342
"PKG",364,22,1,"PAH",1,0)
6^3020115^1342
"PKG",364,22,1,"PAH",1,1,0)
^^1^1^3020115
"PKG",364,22,1,"PAH",1,1,1,0)
This patch includes fixes and minor changes to the Reminders Due report.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
24
"RTN","PXRMDLG1")
0^22^B73439558
"RTN","PXRMDLG1",1,0)
PXRMDLG1 ; SLC/PJH - Reminder Dialog Edit/Inquiry (overflow) ;07/09/2001
"RTN","PXRMDLG1",2,0)
 ;;1.5;CLINICAL REMINDERS;**2,5,6**;Jun 19, 2000
"RTN","PXRMDLG1",3,0)
 ;
"RTN","PXRMDLG1",4,0)
 ;Get selectable codes for a taxonomy
"RTN","PXRMDLG1",5,0)
 ;-----------------------------------
"RTN","PXRMDLG1",6,0)
CODES(FILE,TIEN) ;
"RTN","PXRMDLG1",7,0)
 N CODES,CODE,DESC,DTEXT,SUB,TAB,TEXT
"RTN","PXRMDLG1",8,0)
 ;Display text
"RTN","PXRMDLG1",9,0)
 S TEXT="Selectable codes: ",TAB=18
"RTN","PXRMDLG1",10,0)
 ;Get array
"RTN","PXRMDLG1",11,0)
 D CODES^PXRMDLLA(FILE,TIEN,.CODES)
"RTN","PXRMDLG1",12,0)
 ;Move results into workfile
"RTN","PXRMDLG1",13,0)
 S SUB=""
"RTN","PXRMDLG1",14,0)
 F  S SUB=$O(CODES(SUB)) Q:SUB=""  D
"RTN","PXRMDLG1",15,0)
 .S CODE=$P(CODES(SUB),U,2),DESC=$P(CODES(SUB),U,3)
"RTN","PXRMDLG1",16,0)
 .S DTEXT=CODE_$J("",7-$L(CODE))_DESC
"RTN","PXRMDLG1",17,0)
 .S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",18,0)
 .S ^TMP("PXRMDLG",$J,VALMCNT,0)=$J("",15)_$G(TEXT)_DTEXT
"RTN","PXRMDLG1",19,0)
 .S TEXT=$J("",TAB)
"RTN","PXRMDLG1",20,0)
 Q
"RTN","PXRMDLG1",21,0)
 ;
"RTN","PXRMDLG1",22,0)
 ;Either dialog text or P/N text
"RTN","PXRMDLG1",23,0)
 ;------------------------------
"RTN","PXRMDLG1",24,0)
TSUB(IEN,VIEW) ;
"RTN","PXRMDLG1",25,0)
 ;Dialog View uses Dialog text
"RTN","PXRMDLG1",26,0)
 I VIEW=1 Q 25
"RTN","PXRMDLG1",27,0)
 ;P/N View uses P/N TEXT if defined
"RTN","PXRMDLG1",28,0)
 I $D(^PXRMD(801.41,IEN,35)) Q 35
"RTN","PXRMDLG1",29,0)
 ;Otherwise Dialog Text
"RTN","PXRMDLG1",30,0)
 Q 25
"RTN","PXRMDLG1",31,0)
 ;
"RTN","PXRMDLG1",32,0)
 ;Progress note text (DP)
"RTN","PXRMDLG1",33,0)
 ;-----------------------
"RTN","PXRMDLG1",34,0)
VIEW(IEN,VIEW) ;
"RTN","PXRMDLG1",35,0)
 N DCAP,TSUB
"RTN","PXRMDLG1",36,0)
 ;Dialog Group process
"RTN","PXRMDLG1",37,0)
 I DGRP D  Q
"RTN","PXRMDLG1",38,0)
 .N DATA,DGBEG,DGIEN,DGSEQ,DGSUB
"RTN","PXRMDLG1",39,0)
 .;Update index
"RTN","PXRMDLG1",40,0)
 .S ^TMP("PXRMDLG",$J,"IDX",SEQ,IEN)=""
"RTN","PXRMDLG1",41,0)
 .;Get GROUP text
"RTN","PXRMDLG1",42,0)
 .S DGSUB=0,DGBEG=$J(SEQ,3),TSUB=$$TSUB(IEN,VIEW)
"RTN","PXRMDLG1",43,0)
 .F  S DGSUB=$O(^PXRMD(801.41,IEN,TSUB,DGSUB)) Q:'DGSUB  D
"RTN","PXRMDLG1",44,0)
 ..S DTXT=$G(^PXRMD(801.41,IEN,TSUB,DGSUB,0))
"RTN","PXRMDLG1",45,0)
 ..S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",46,0)
 ..S ^TMP("PXRMDLG",$J,VALMCNT,0)=DGBEG_$J("",12)_DTXT,DGBEG=$J("",3)
"RTN","PXRMDLG1",47,0)
 .;Get additional prompts
"RTN","PXRMDLG1",48,0)
 .D PROMPT(IEN,0,"","")
"RTN","PXRMDLG1",49,0)
 .;Group caption text
"RTN","PXRMDLG1",50,0)
 .S DTXT=$P($G(^PXRMD(801.41,IEN,0)),U,5),DCAP=" [group caption]"
"RTN","PXRMDLG1",51,0)
 .I DTXT="" S DCAP="[no caption for this group]"
"RTN","PXRMDLG1",52,0)
 .;Text of caption
"RTN","PXRMDLG1",53,0)
 .S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",54,0)
 .S ^TMP("PXRMDLG",$J,VALMCNT,0)=DGBEG_$J("",12)_DTXT_DCAP,DGBEG=$J("",3)
"RTN","PXRMDLG1",55,0)
 .;Get dialog group sub-elements
"RTN","PXRMDLG1",56,0)
 .S DGSEQ=0
"RTN","PXRMDLG1",57,0)
 .F  S DGSEQ=$O(^PXRMD(801.41,IEN,10,"B",DGSEQ)) Q:'DGSEQ  D
"RTN","PXRMDLG1",58,0)
 ..S SUB=$O(^PXRMD(801.41,IEN,10,"B",DGSEQ,"")) Q:'SUB
"RTN","PXRMDLG1",59,0)
 ..S DGIEN=$P($G(^PXRMD(801.41,IEN,10,SUB,0)),U,2) Q:'DGIEN
"RTN","PXRMDLG1",60,0)
 ..;Ignore forced values and prompts
"RTN","PXRMDLG1",61,0)
 ..Q:"PF"[$P($G(^PXRMD(801.41,DGIEN,0)),U,4)
"RTN","PXRMDLG1",62,0)
 ..S DGBEG=$J(SEQ,3)_"."_DGSEQ
"RTN","PXRMDLG1",63,0)
 ..;Get Resolution/Finding details
"RTN","PXRMDLG1",64,0)
 ..S FIEN=$P($G(^PXRMD(801.41,DGIEN,1)),U,5)
"RTN","PXRMDLG1",65,0)
 ..;If taxonomy generate 
"RTN","PXRMDLG1",66,0)
 ..I $P(FIEN,";",2)="PXD(811.2," D TAX(FIEN,DGBEG,DGIEN) Q
"RTN","PXRMDLG1",67,0)
 ..;Otherwise get text from dialog element
"RTN","PXRMDLG1",68,0)
 ..S DGSUB=0,TSUB=$$TSUB(DGIEN,VIEW)
"RTN","PXRMDLG1",69,0)
 ..F  S DGSUB=$O(^PXRMD(801.41,DGIEN,TSUB,DGSUB)) Q:'DGSUB  D
"RTN","PXRMDLG1",70,0)
 ...S DTXT=$G(^PXRMD(801.41,DGIEN,TSUB,DGSUB,0))
"RTN","PXRMDLG1",71,0)
 ...S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",72,0)
 ...S ^TMP("PXRMDLG",$J,VALMCNT,0)=DGBEG_$J("",10)_DTXT,DGBEG=$J("",5)
"RTN","PXRMDLG1",73,0)
 ...;Get additional prompts
"RTN","PXRMDLG1",74,0)
 ..D PROMPT(DGIEN,0,"","")
"RTN","PXRMDLG1",75,0)
 ..;Final linefeed
"RTN","PXRMDLG1",76,0)
 ..S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",77,0)
 ..S ^TMP("PXRMDLG",$J,VALMCNT,0)=$J("",79)
"RTN","PXRMDLG1",78,0)
 ;
"RTN","PXRMDLG1",79,0)
 N TAX,SUB
"RTN","PXRMDLG1",80,0)
 ;Get Resolution/Finding details
"RTN","PXRMDLG1",81,0)
 S DATA=$G(^PXRMD(801.41,IEN,1)),FIEN=$P(DATA,U,5),TAX=0
"RTN","PXRMDLG1",82,0)
 ;Mental Health
"RTN","PXRMDLG1",83,0)
 I $P(FIEN,";",2)="YTT(601," D MENTAL(FIEN) Q
"RTN","PXRMDLG1",84,0)
 ;Check if taxonomy
"RTN","PXRMDLG1",85,0)
 I $P(FIEN,";",2)="PXD(811.2," S TAX=1
"RTN","PXRMDLG1",86,0)
 ;If a taxonomy use the dialog text from taxonomy file
"RTN","PXRMDLG1",87,0)
 I TAX D TAX(FIEN,SEQ,IEN) Q
"RTN","PXRMDLG1",88,0)
 ;If not a taxonomy use dialog file
"RTN","PXRMDLG1",89,0)
 I 'TAX D  Q
"RTN","PXRMDLG1",90,0)
 .S TSUB=$$TSUB(IEN,VIEW)
"RTN","PXRMDLG1",91,0)
 .S DTXT=$G(^PXRMD(801.41,IEN,TSUB,1,0))
"RTN","PXRMDLG1",92,0)
 .;Text of the first prompt
"RTN","PXRMDLG1",93,0)
 .S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",94,0)
 .S ^TMP("PXRMDLG",$J,VALMCNT,0)=$J(SEQ,3)_$J("",12)_DTXT
"RTN","PXRMDLG1",95,0)
 .S ^TMP("PXRMDLG",$J,"IDX",SEQ,IEN)=""
"RTN","PXRMDLG1",96,0)
 .;Text or subsequent lines
"RTN","PXRMDLG1",97,0)
 .S SUB=1
"RTN","PXRMDLG1",98,0)
 .F  S SUB=$O(^PXRMD(801.41,IEN,TSUB,SUB)) Q:'SUB  D
"RTN","PXRMDLG1",99,0)
 ..S DTXT=$G(^PXRMD(801.41,IEN,TSUB,SUB,0))
"RTN","PXRMDLG1",100,0)
 ..S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",101,0)
 ..S ^TMP("PXRMDLG",$J,VALMCNT,0)=$J("",15)_DTXT
"RTN","PXRMDLG1",102,0)
 .;Get additional prompts
"RTN","PXRMDLG1",103,0)
 .D PROMPT(IEN,0,"","")
"RTN","PXRMDLG1",104,0)
 ;
"RTN","PXRMDLG1",105,0)
 Q
"RTN","PXRMDLG1",106,0)
 ;
"RTN","PXRMDLG1",107,0)
 ;additional prompts in 801.45
"RTN","PXRMDLG1",108,0)
 ;----------------------------
"RTN","PXRMDLG1",109,0)
FPROMPT(FNODE,RSUB,CNT,ARRAY) ;
"RTN","PXRMDLG1",110,0)
 ;Get all additional fields for this resolution type
"RTN","PXRMDLG1",111,0)
 S ASUB=0,ACNT=0
"RTN","PXRMDLG1",112,0)
 F  S ASUB=$O(^PXRMD(801.45,FNODE,1,RSUB,5,ASUB)) Q:'ASUB  D
"RTN","PXRMDLG1",113,0)
 .S DNODE=$G(^PXRMD(801.45,FNODE,1,RSUB,5,ASUB,0)) Q:DNODE=""
"RTN","PXRMDLG1",114,0)
 .;Ignore if disabled
"RTN","PXRMDLG1",115,0)
 .I $P(DNODE,U,3)=1 Q
"RTN","PXRMDLG1",116,0)
 .S DNODE=$P(DNODE,U) Q:DNODE=""
"RTN","PXRMDLG1",117,0)
 .S ATXT=$P($G(^PXRMD(801.41,DNODE,0)),U) Q:ATXT=""
"RTN","PXRMDLG1",118,0)
 .;S ATXT=$TR(ATXT,UPPER,LOWER)
"RTN","PXRMDLG1",119,0)
 .S ACNT=ACNT+1
"RTN","PXRMDLG1",120,0)
 .S ARRAY(CNT,ACNT)=DNODE
"RTN","PXRMDLG1",121,0)
 Q
"RTN","PXRMDLG1",122,0)
 ;
"RTN","PXRMDLG1",123,0)
 ;Group text and caption
"RTN","PXRMDLG1",124,0)
 ;----------------------
"RTN","PXRMDLG1",125,0)
GROUP(IEN,VIEW) ;
"RTN","PXRMDLG1",126,0)
 N DDATA,DGIEN,DGSUB,DTXT
"RTN","PXRMDLG1",127,0)
 ;Get GROUP text
"RTN","PXRMDLG1",128,0)
 S DGSUB=0,TSUB=$$TSUB(IEN,VIEW)
"RTN","PXRMDLG1",129,0)
 F  S DGSUB=$O(^PXRMD(801.41,IEN,TSUB,DGSUB)) Q:'DGSUB  D
"RTN","PXRMDLG1",130,0)
 .S DTXT=$G(^PXRMD(801.41,IEN,TSUB,DGSUB,0))
"RTN","PXRMDLG1",131,0)
 .S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",132,0)
 .S ^TMP("PXRMDLG",$J,VALMCNT,0)=$J("",12)_DTXT
"RTN","PXRMDLG1",133,0)
 ;Group caption text
"RTN","PXRMDLG1",134,0)
 S DDATA=$G(^PXRMD(801.41,IEN,0))
"RTN","PXRMDLG1",135,0)
 S DTXT=$P(DDATA,U,5),DCAP=" [group caption]"
"RTN","PXRMDLG1",136,0)
 I DTXT="" S DCAP="[no caption for this group]"
"RTN","PXRMDLG1",137,0)
 ;Text of caption
"RTN","PXRMDLG1",138,0)
 S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",139,0)
 S ^TMP("PXRMDLG",$J,VALMCNT,0)=$J("",12)_DTXT_DCAP
"RTN","PXRMDLG1",140,0)
 ;Get additional group prompts
"RTN","PXRMDLG1",141,0)
 D PROMPT(IEN,0,"","")
"RTN","PXRMDLG1",142,0)
 ;Other group fields
"RTN","PXRMDLG1",143,0)
 N DBOX,DSUPP,DSHOW,DMULT
"RTN","PXRMDLG1",144,0)
 S DBOX=$S($P(DDATA,U,6)="Y":"BOX",1:"NO BOX")
"RTN","PXRMDLG1",145,0)
 S DSUPP=$S($P(DDATA,U,11):"SUPPRESS",1:"NO SUPPRESS")
"RTN","PXRMDLG1",146,0)
 S DSHOW=$S($P(DDATA,U,10):"HIDE",1:"SHOW")
"RTN","PXRMDLG1",147,0)
 S DMULT=$P(DDATA,U,9)
"RTN","PXRMDLG1",148,0)
 S DMULT=$S(DMULT=1:"ONE ONLY",DMULT=2:"ONE OR MORE",DMULT=3:"NONE OR ONE",1:"NO SELECTION")
"RTN","PXRMDLG1",149,0)
 S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",150,0)
 S ^TMP("PXRMDLG",$J,VALMCNT,0)=$J("",12)_"["_DBOX_", "_DSUPP_", "_DSHOW_", "_DMULT_"]"
"RTN","PXRMDLG1",151,0)
 S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",152,0)
 S ^TMP("PXRMDLG",$J,VALMCNT,0)=$J("",79)
"RTN","PXRMDLG1",153,0)
 Q
"RTN","PXRMDLG1",154,0)
 ;
"RTN","PXRMDLG1",155,0)
 ;Mental Healt Instrument
"RTN","PXRMDLG1",156,0)
 ;-----------------------
"RTN","PXRMDLG1",157,0)
MENTAL(RESN) ;
"RTN","PXRMDLG1",158,0)
 N ARRAY,CNT,SUB,TXT,TYP,YT,YIEN,YNAM,YSEQ
"RTN","PXRMDLG1",159,0)
 S YIEN=$P(RESN,";") Q:'YIEN
"RTN","PXRMDLG1",160,0)
 S YNAM=$P($G(^YTT(601,YIEN,0)),U) Q:YNAM=""
"RTN","PXRMDLG1",161,0)
 S YT("CODE")=YNAM
"RTN","PXRMDLG1",162,0)
 ;Get test details
"RTN","PXRMDLG1",163,0)
 D SHOWALL^YTAPI3(.ARRAY,.YT)
"RTN","PXRMDLG1",164,0)
 ;Quit if invalid test
"RTN","PXRMDLG1",165,0)
 I ARRAY(1)["[ERROR]" Q
"RTN","PXRMDLG1",166,0)
 ;Get Name
"RTN","PXRMDLG1",167,0)
 S TXT=$G(ARRAY(2)),TXT=$P(TXT,U)_" : "_$P(TXT,U,2)
"RTN","PXRMDLG1",168,0)
 S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",169,0)
 S ^TMP("PXRMDLG",$J,VALMCNT,0)=$J(SEQ,3)_$J("",12)_TXT
"RTN","PXRMDLG1",170,0)
 S ^TMP("PXRMDLG",$J,"IDX",SEQ,IEN)=""
"RTN","PXRMDLG1",171,0)
 S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",172,0)
 S ^TMP("PXRMDLG",$J,VALMCNT,0)=$J("",79)
"RTN","PXRMDLG1",173,0)
 ;Get caption
"RTN","PXRMDLG1",174,0)
 S SUB=0
"RTN","PXRMDLG1",175,0)
 F  S SUB=$O(ARRAY(1,"I",SUB)) Q:'SUB  D
"RTN","PXRMDLG1",176,0)
 .S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",177,0)
 .S TXT=$J("",15)_ARRAY(1,"I",SUB)
"RTN","PXRMDLG1",178,0)
 .S ^TMP("PXRMDLG",$J,VALMCNT,0)=TXT
"RTN","PXRMDLG1",179,0)
 ;
"RTN","PXRMDLG1",180,0)
 S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",181,0)
 S ^TMP("PXRMDLG",$J,VALMCNT,0)=$J("",79)
"RTN","PXRMDLG1",182,0)
 S CNT=0
"RTN","PXRMDLG1",183,0)
 F  S CNT=$O(ARRAY(CNT)) Q:CNT=""  D
"RTN","PXRMDLG1",184,0)
 .S YSEQ=$J(SEQ,3)_"."_CNT,SUB=0
"RTN","PXRMDLG1",185,0)
 .;Get question
"RTN","PXRMDLG1",186,0)
 .F  S SUB=$O(ARRAY(CNT,"T",SUB)) Q:'SUB  D
"RTN","PXRMDLG1",187,0)
 ..S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",188,0)
 ..S TXT=YSEQ_$J("",15-$L(YSEQ))_ARRAY(CNT,"T",SUB),YSEQ=""
"RTN","PXRMDLG1",189,0)
 ..S ^TMP("PXRMDLG",$J,VALMCNT,0)=TXT
"RTN","PXRMDLG1",190,0)
 .S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",191,0)
 .S ^TMP("PXRMDLG",$J,VALMCNT,0)=$J("",79)
"RTN","PXRMDLG1",192,0)
 Q
"RTN","PXRMDLG1",193,0)
 ;
"RTN","PXRMDLG1",194,0)
 ;additional prompts in the dialog file
"RTN","PXRMDLG1",195,0)
 ;-------------------------------------
"RTN","PXRMDLG1",196,0)
PROMPT(IEN,TAB,TEXT,DGRP) ;
"RTN","PXRMDLG1",197,0)
 N DATA,DDIS,DGSEQ,DSUB,DTITLE,DTXT,DTYP,SEQ,SUB
"RTN","PXRMDLG1",198,0)
 S SEQ=0
"RTN","PXRMDLG1",199,0)
 F  S SEQ=$O(^PXRMD(801.41,IEN,10,"B",SEQ)) Q:'SEQ  D
"RTN","PXRMDLG1",200,0)
 .S SUB=$O(^PXRMD(801.41,IEN,10,"B",SEQ,"")) Q:'SUB
"RTN","PXRMDLG1",201,0)
 .S DSUB=$P($G(^PXRMD(801.41,IEN,10,SUB,0)),U,2) Q:'DSUB
"RTN","PXRMDLG1",202,0)
 .S DATA=$G(^PXRMD(801.41,DSUB,0)) Q:DATA=""
"RTN","PXRMDLG1",203,0)
 .S DNAME=$P(DATA,U),DDIS=$P(DATA,U,3),DTYP=$P(DATA,U,4)
"RTN","PXRMDLG1",204,0)
 .I VIEW,('DGRP),(DTYP'="P") Q
"RTN","PXRMDLG1",205,0)
 .I ('VIEW),('DGRP),("FP"'[DTYP) Q
"RTN","PXRMDLG1",206,0)
 .S:VIEW DDIS=""
"RTN","PXRMDLG1",207,0)
 .I DTYP="F" S DNAME=DNAME_" (forced value)"
"RTN","PXRMDLG1",208,0)
 .I DGRP D
"RTN","PXRMDLG1",209,0)
 ..S DGSEQ=$P($G(^PXRMD(801.41,IEN,10,SUB,0)),U)
"RTN","PXRMDLG1",210,0)
 ..S DNAME=DGSEQ_$J("",3-$L(DGSEQ))_DNAME
"RTN","PXRMDLG1",211,0)
 .I TAB=0,DTYP="P" D
"RTN","PXRMDLG1",212,0)
 ..;Override prompt caption
"RTN","PXRMDLG1",213,0)
 ..S DTITLE=$P($G(^PXRMD(801.41,IEN,10,SUB,0)),U,6)
"RTN","PXRMDLG1",214,0)
 ..I DTITLE="" S DTITLE=$P($G(^PXRMD(801.41,DSUB,2)),U,4)
"RTN","PXRMDLG1",215,0)
 ..S DNAME=$J("",3)_DTITLE
"RTN","PXRMDLG1",216,0)
 .I TAB=0,DTYP="F" S DNAME=$J("",3)_DNAME
"RTN","PXRMDLG1",217,0)
 .S DNAME=$J("",15)_$G(TEXT)_DNAME
"RTN","PXRMDLG1",218,0)
 .S:DDIS]"" DNAME=DNAME_$J("",72-$L(DNAME))_DDIS
"RTN","PXRMDLG1",219,0)
 .S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",220,0)
 .S ^TMP("PXRMDLG",$J,VALMCNT,0)=DNAME
"RTN","PXRMDLG1",221,0)
 .S TEXT=$J("",TAB)
"RTN","PXRMDLG1",222,0)
 Q
"RTN","PXRMDLG1",223,0)
 ;
"RTN","PXRMDLG1",224,0)
 ;
"RTN","PXRMDLG1",225,0)
 ;Taxonomy Questions
"RTN","PXRMDLG1",226,0)
 ;------------------
"RTN","PXRMDLG1",227,0)
TAX(FIEN,SEQ,DIEN) ;
"RTN","PXRMDLG1",228,0)
 N ARRAY,CNT,TIEN,TSEQ
"RTN","PXRMDLG1",229,0)
 S TIEN=$P(FIEN,";") Q:TIEN=""
"RTN","PXRMDLG1",230,0)
 ;Get associated codes
"RTN","PXRMDLG1",231,0)
 D TAX^PXRMDLL(TIEN,.ARRAY)
"RTN","PXRMDLG1",232,0)
 ;Taxonomy header
"RTN","PXRMDLG1",233,0)
 S TSEQ=SEQ I $L(SEQ)<3 S TSEQ=$J(SEQ,3)_"  "
"RTN","PXRMDLG1",234,0)
 S CNT=0,VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",235,0)
 S ^TMP("PXRMDLG",$J,VALMCNT,0)=TSEQ_$J("",15-$L(TSEQ))_ARRAY
"RTN","PXRMDLG1",236,0)
 S ^TMP("PXRMDLG",$J,"IDX",SEQ,DIEN)=""
"RTN","PXRMDLG1",237,0)
 ;Dialog and Procedure entries
"RTN","PXRMDLG1",238,0)
 F  S CNT=$O(ARRAY(CNT)) Q:CNT=""  D
"RTN","PXRMDLG1",239,0)
 .S TSEQ=$J(SEQ,3)_"."_CNT
"RTN","PXRMDLG1",240,0)
 .S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",241,0)
 .S ^TMP("PXRMDLG",$J,VALMCNT,0)=TSEQ_$J("",15-$L(TSEQ))_$P(ARRAY(CNT),U)
"RTN","PXRMDLG1",242,0)
 .D CODES($P(ARRAY(CNT),U,2),TIEN)
"RTN","PXRMDLG1",243,0)
 .;Get additional prompts (from finding parameter file)
"RTN","PXRMDLG1",244,0)
 .D TPROMPT(ARRAY(CNT),0,"")
"RTN","PXRMDLG1",245,0)
 .S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",246,0)
 .S ^TMP("PXRMDLG",$J,VALMCNT,0)=$J("",79)
"RTN","PXRMDLG1",247,0)
 Q
"RTN","PXRMDLG1",248,0)
 ;
"RTN","PXRMDLG1",249,0)
 ;additional prompts for a taxonomy
"RTN","PXRMDLG1",250,0)
 ;---------------------------------
"RTN","PXRMDLG1",251,0)
TPROMPT(DATA,TAB,TEXT) ;
"RTN","PXRMDLG1",252,0)
 N FNODE,FTYP,RSUB,SEQ,DSUB,DTXT,DTYP
"RTN","PXRMDLG1",253,0)
 ;Finding type
"RTN","PXRMDLG1",254,0)
 S FTYP=$P(DATA,U,4) Q:FTYP=""
"RTN","PXRMDLG1",255,0)
 ;Get parameter file node for this finding type
"RTN","PXRMDLG1",256,0)
 S FNODE=$O(^PXRMD(801.45,"B",FTYP,"")) Q:FNODE=""
"RTN","PXRMDLG1",257,0)
 ;Resolution type
"RTN","PXRMDLG1",258,0)
 S RSUB=$P(DATA,U,3) Q:'RSUB
"RTN","PXRMDLG1",259,0)
 ;Get details from  parameter file 
"RTN","PXRMDLG1",260,0)
 D FPROMPT(FNODE,RSUB,CNT,.ARRAY)
"RTN","PXRMDLG1",261,0)
 S SEQ=0
"RTN","PXRMDLG1",262,0)
 F  S SEQ=$O(ARRAY(CNT,SEQ)) Q:'SEQ  D
"RTN","PXRMDLG1",263,0)
 .S DSUB=ARRAY(CNT,SEQ) Q:'DSUB
"RTN","PXRMDLG1",264,0)
 .S DNAME=$P($G(^PXRMD(801.41,DSUB,0)),U)
"RTN","PXRMDLG1",265,0)
 .S DTYP=$P($G(^PXRMD(801.41,DSUB,0)),U,4)
"RTN","PXRMDLG1",266,0)
 .I DTYP="F" S DNAME=DNAME_" (forced value)"
"RTN","PXRMDLG1",267,0)
 .I TAB=0,DTYP="F" S DNAME=$J("",3)_DNAME
"RTN","PXRMDLG1",268,0)
 .I TAB=0,DTYP="P" S DNAME=$J("",3)_$P($G(^PXRMD(801.41,DSUB,2)),U,4)
"RTN","PXRMDLG1",269,0)
 .S VALMCNT=VALMCNT+1
"RTN","PXRMDLG1",270,0)
 .S ^TMP("PXRMDLG",$J,VALMCNT,0)=$J("",15)_$G(TEXT)_DNAME
"RTN","PXRMDLG1",271,0)
 .S TEXT=$J("",TAB)
"RTN","PXRMDLG1",272,0)
 Q
"RTN","PXRMP6I")
0^25^B1379185
"RTN","PXRMP6I",1,0)
PXRMP6I ; SLC/PJH - Inits for PXRM*1.5*6 ;11/29/2001
"RTN","PXRMP6I",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMP6I",3,0)
 ;
"RTN","PXRMP6I",4,0)
 Q
"RTN","PXRMP6I",5,0)
 ;===============================================================
"RTN","PXRMP6I",6,0)
DELEXTAX ;Delete the expanded taxonomy for VA-BREAST TUMOR
"RTN","PXRMP6I",7,0)
 N IEN,LUVALUE
"RTN","PXRMP6I",8,0)
 S LUVALUE(1)="VA-BREAST TUMOR"
"RTN","PXRMP6I",9,0)
 S IEN=+$$FIND1^DIC(811.2,"","KU",.LUVALUE)
"RTN","PXRMP6I",10,0)
 I IEN'=0 D
"RTN","PXRMP6I",11,0)
 . N DA,DIK
"RTN","PXRMP6I",12,0)
 . S DIK="^PXD(811.3,"
"RTN","PXRMP6I",13,0)
 . S DA=IEN
"RTN","PXRMP6I",14,0)
 . D ^DIK
"RTN","PXRMP6I",15,0)
 Q
"RTN","PXRMP6I",16,0)
 ;
"RTN","PXRMP6I",17,0)
 ;===============================================================
"RTN","PXRMP6I",18,0)
PRE ;These are the pre-installation actions
"RTN","PXRMP6I",19,0)
 ;Clear data from the GUI process file
"RTN","PXRMP6I",20,0)
 S PXRMINST=1
"RTN","PXRMP6I",21,0)
 D DELGUI
"RTN","PXRMP6I",22,0)
 Q
"RTN","PXRMP6I",23,0)
 ;
"RTN","PXRMP6I",24,0)
 ;======================================================================
"RTN","PXRMP6I",25,0)
POST ;These are the post-installation actions
"RTN","PXRMP6I",26,0)
 ;
"RTN","PXRMP6I",27,0)
 ;Reminders Due report defaults
"RTN","PXRMP6I",28,0)
 ;
"RTN","PXRMP6I",29,0)
 ;Truncated (4N) SSN
"RTN","PXRMP6I",30,0)
 S ^PXRM(800,1,"FULL SSN")="N"
"RTN","PXRMP6I",31,0)
 S ^PXRM(800,1,"TRUNCATE EMPLOYEE SSN")="Y"
"RTN","PXRMP6I",32,0)
 ;Clear pilot site error
"RTN","PXRMP6I",33,0)
 K ^PXRM(800,"FULL SSN")
"RTN","PXRMP6I",34,0)
 ;
"RTN","PXRMP6I",35,0)
 K PXRMINST
"RTN","PXRMP6I",36,0)
 ;Delete the expanded taxonomy for VA-BREAST TUMOR
"RTN","PXRMP6I",37,0)
 D DELEXTAX
"RTN","PXRMP6I",38,0)
 Q
"RTN","PXRMP6I",39,0)
 ;
"RTN","PXRMP6I",40,0)
 ;=======================================================================
"RTN","PXRMP6I",41,0)
DELGUI ;GUI process file
"RTN","PXRMP6I",42,0)
 N IEN
"RTN","PXRMP6I",43,0)
 S IEN=0
"RTN","PXRMP6I",44,0)
 F  S IEN=$O(^PXRMD(801.42,IEN)) Q:'IEN  D
"RTN","PXRMP6I",45,0)
 .;Clear associated reminder dialogs (no longer used)
"RTN","PXRMP6I",46,0)
 .K ^PXRMD(801.42,IEN,2)
"RTN","PXRMP6I",47,0)
 ;
"RTN","PXRMP6I",48,0)
 ;Clear index by dialog
"RTN","PXRMP6I",49,0)
 K ^PXRMD(801.43,"AB")
"RTN","PXRMP6I",50,0)
 Q
"RTN","PXRMREV")
0^24^B10803491
"RTN","PXRMREV",1,0)
PXRMREV ; SLC - Review Date routines. ;06/19/2001
"RTN","PXRMREV",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMREV",3,0)
 ;
"RTN","PXRMREV",4,0)
 ;Print review date reports
"RTN","PXRMREV",5,0)
 ;-------------------------
"RTN","PXRMREV",6,0)
START N DATE,DIROUT,DTOUT,DUOUT,FTYPE
"RTN","PXRMREV",7,0)
 F  D FILE(.FTYPE) Q:$D(DTOUT)!($D(DUOUT))  D  Q:$D(DTOUT)
"RTN","PXRMREV",8,0)
 .;
"RTN","PXRMREV",9,0)
 .D DATE(.DATE) I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMREV",10,0)
 .;
"RTN","PXRMREV",11,0)
 .N BY,DHD,FLDS,FR,L,NOW,TO
"RTN","PXRMREV",12,0)
 .S FR="01/01/2000"
"RTN","PXRMREV",13,0)
 .S TO=DATE
"RTN","PXRMREV",14,0)
 .S BY="REVIEW DATE"
"RTN","PXRMREV",15,0)
 .S FLDS=".01,REVIEW DATE;C60"
"RTN","PXRMREV",16,0)
 .S L=0
"RTN","PXRMREV",17,0)
 .;
"RTN","PXRMREV",18,0)
 .I FTYPE="R" S DIC="^PXD(811.9,",DHD="REMINDERS TO REVIEW"
"RTN","PXRMREV",19,0)
 .I FTYPE="T" S DIC="^PXD(811.2,",DHD="TAXONOMIES TO REVIEW"
"RTN","PXRMREV",20,0)
 .I FTYPE="C" S DIC="^PXRMD(811.4,",DHD="CF'S TO REVIEW"
"RTN","PXRMREV",21,0)
 .I FTYPE="D" S DIC="^PXRMD(801.41,",DHD="DIALOGS TO REVIEW"
"RTN","PXRMREV",22,0)
 .;
"RTN","PXRMREV",23,0)
 .S DHD=DHD_" (up to "_$$FMTE^XLFDT(DATE)_")"
"RTN","PXRMREV",24,0)
 .;Print
"RTN","PXRMREV",25,0)
 .D EN1^DIP
"RTN","PXRMREV",26,0)
 .S DTOUT=1
"RTN","PXRMREV",27,0)
 Q
"RTN","PXRMREV",28,0)
 ;
"RTN","PXRMREV",29,0)
 ;Select file for review
"RTN","PXRMREV",30,0)
 ;----------------------
"RTN","PXRMREV",31,0)
FILE(Y) N X,DIR
"RTN","PXRMREV",32,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMREV",33,0)
 S DIR(0)="S"_U_"C:Computed Finding;"
"RTN","PXRMREV",34,0)
 S DIR(0)=DIR(0)_"D:Reminder Dialog;"
"RTN","PXRMREV",35,0)
 S DIR(0)=DIR(0)_"R:Reminder Definition;"
"RTN","PXRMREV",36,0)
 S DIR(0)=DIR(0)_"T:Reminder Taxonomy;"
"RTN","PXRMREV",37,0)
 S DIR("A")="Select File to Review"
"RTN","PXRMREV",38,0)
 S DIR("B")="R"
"RTN","PXRMREV",39,0)
 S DIR("?")="Select from the codes displayed. For detailed help type ??"
"RTN","PXRMREV",40,0)
 S DIR("??")=U_"D HELP^PXRMREV(1)"
"RTN","PXRMREV",41,0)
 D ^DIR K DIR
"RTN","PXRMREV",42,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMREV",43,0)
 Q
"RTN","PXRMREV",44,0)
 ;
"RTN","PXRMREV",45,0)
 ;Select the review date
"RTN","PXRMREV",46,0)
 ;----------------------
"RTN","PXRMREV",47,0)
DATE(RDATE) ;
"RTN","PXRMREV",48,0)
 N X,Y,DONE,DIR
"RTN","PXRMREV",49,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMREV",50,0)
 S DONE=0
"RTN","PXRMREV",51,0)
 F  D  Q:$D(DTOUT)!($D(DUOUT))!DONE
"RTN","PXRMREV",52,0)
 .S DIR(0)="DA^"_DT_"::EFTX"
"RTN","PXRMREV",53,0)
 .S DIR("A")="Enter Review Cutoff Date: "
"RTN","PXRMREV",54,0)
 .S DIR("B")=$$FMTE^XLFDT($$DT^XLFDT,"D")
"RTN","PXRMREV",55,0)
 .S DIR("?")="This must be today or a future date. For detailed help type ??"
"RTN","PXRMREV",56,0)
 .S DIR("??")=U_"D HELP^PXRMREV(2)"
"RTN","PXRMREV",57,0)
 .W !
"RTN","PXRMREV",58,0)
 .D ^DIR K DIR
"RTN","PXRMREV",59,0)
 .I $D(DIROUT) S DTOUT=1
"RTN","PXRMREV",60,0)
 .I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMREV",61,0)
 .;I $E(Y,6,7)="00" W $C(7),"  ?? Enter exact date" Q
"RTN","PXRMREV",62,0)
 .S RDATE=Y,DONE=1
"RTN","PXRMREV",63,0)
 .K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMREV",64,0)
 Q
"RTN","PXRMREV",65,0)
 ;
"RTN","PXRMREV",66,0)
 ;General help text routine
"RTN","PXRMREV",67,0)
 ;-------------------------
"RTN","PXRMREV",68,0)
HELP(CALL) ;
"RTN","PXRMREV",69,0)
 N DIWF,DIWL,DIWR,HTEXT,IC
"RTN","PXRMREV",70,0)
 S DIWF="C70",DIWL=0,DIWR=70
"RTN","PXRMREV",71,0)
 ;
"RTN","PXRMREV",72,0)
 I CALL=1 D
"RTN","PXRMREV",73,0)
 .S HTEXT(1)="Select the file for which a Review Date report is required."
"RTN","PXRMREV",74,0)
 .S HTEXT(2)=" "
"RTN","PXRMREV",75,0)
 .S HTEXT(3)="The report lists in review date order all file entries which"
"RTN","PXRMREV",76,0)
 .S HTEXT(4)="have a review date prior to the cuttoff date."
"RTN","PXRMREV",77,0)
 I CALL=2 D
"RTN","PXRMREV",78,0)
 .S HTEXT(1)="Enter a future date or today. All review dates in the file"
"RTN","PXRMREV",79,0)
 .S HTEXT(2)="selected which are prior or equal to this date will be reported."
"RTN","PXRMREV",80,0)
 K ^UTILITY($J,"W")
"RTN","PXRMREV",81,0)
 S IC=""
"RTN","PXRMREV",82,0)
 F  S IC=$O(HTEXT(IC)) Q:IC=""  D
"RTN","PXRMREV",83,0)
 . S X=HTEXT(IC)
"RTN","PXRMREV",84,0)
 . D ^DIWP
"RTN","PXRMREV",85,0)
 W !
"RTN","PXRMREV",86,0)
 S IC=0
"RTN","PXRMREV",87,0)
 F  S IC=$O(^UTILITY($J,"W",0,IC)) Q:IC=""  D
"RTN","PXRMREV",88,0)
 . W !,^UTILITY($J,"W",0,IC,0)
"RTN","PXRMREV",89,0)
 K ^UTILITY($J,"W")
"RTN","PXRMREV",90,0)
 W !
"RTN","PXRMREV",91,0)
 Q
"RTN","PXRMXAP")
0^1^B9535073
"RTN","PXRMXAP",1,0)
PXRMXAP ; SLC/PJH - Reminder Reports APIs;01/12/2002
"RTN","PXRMXAP",2,0)
 ;;1.5;CLINICAL REMINDERS;**2,6**;Jun 19, 2000
"RTN","PXRMXAP",3,0)
 ;
"RTN","PXRMXAP",4,0)
 ; Called from PXRMSU
"RTN","PXRMXAP",5,0)
 ;
"RTN","PXRMXAP",6,0)
FACT ;Check PCMM Team ^SCTM(404.51 for facility ; DBIA 2795
"RTN","PXRMXAP",7,0)
 S DIC("S")=DIC("S")_",$D(PXRMFACN(+$P(^(0),U,7)))"
"RTN","PXRMXAP",8,0)
 Q
"RTN","PXRMXAP",9,0)
 ;
"RTN","PXRMXAP",10,0)
LOCN(ARRAY) ;Check for mixed inpatient/outpatient locations ; DBIA 10040
"RTN","PXRMXAP",11,0)
 N IC,IEN,MIXED,TYPE
"RTN","PXRMXAP",12,0)
 S IC=0,MIXED=0,TYPE=0
"RTN","PXRMXAP",13,0)
 F  S IC=$O(ARRAY(IC)) Q:IC=""  D  Q:MIXED
"RTN","PXRMXAP",14,0)
 .S IEN=$P(ARRAY(IC),U,2) Q:IEN=""
"RTN","PXRMXAP",15,0)
 .I TYPE=0,$D(^SC(IEN,42)) S TYPE="INPATIENT" Q
"RTN","PXRMXAP",16,0)
 .I TYPE=0,'$D(^SC(IEN,42)) S TYPE="OUTPATIENT" Q
"RTN","PXRMXAP",17,0)
 .I TYPE="INPATIENT",'$D(^SC(IEN,42)) S MIXED=1 Q
"RTN","PXRMXAP",18,0)
 .I TYPE="OUTPATIENT",$D(^SC(IEN,42)) S MIXED=1 Q
"RTN","PXRMXAP",19,0)
 Q MIXED
"RTN","PXRMXAP",20,0)
 ;
"RTN","PXRMXAP",21,0)
 ; Called from PXRMSEO
"RTN","PXRMXAP",22,0)
 ;
"RTN","PXRMXAP",23,0)
FAC(TIEN) ; Get Facility for the PCMM Team ; DBIA 2795
"RTN","PXRMXAP",24,0)
 Q $P($G(^SCTM(404.51,TIEN,0)),U,7)
"RTN","PXRMXAP",25,0)
 ;
"RTN","PXRMXAP",26,0)
PCASSIGN(DFN) ; Assigned to Provider as Primary Care ; DBIA 1916
"RTN","PXRMXAP",27,0)
 N PCVAR,PC S PC=0
"RTN","PXRMXAP",28,0)
 S PCVAR=$$OUTPTPR^SDUTL3(DFN)
"RTN","PXRMXAP",29,0)
 I PCVAR]"" S:$P(PCVAR,U)=PCM PC=1
"RTN","PXRMXAP",30,0)
 Q PC
"RTN","PXRMXAP",31,0)
 ; 
"RTN","PXRMXAP",32,0)
PTTM(TIEN,SCERR) ; Build list of Teams Patients ; DBIA 1916
"RTN","PXRMXAP",33,0)
 Q $$PTTM^SCAPMC(TIEN,"SCDT","^TMP($J,""PCM"")",.SCERR)
"RTN","PXRMXAP",34,0)
 ;
"RTN","PXRMXAP",35,0)
PTPR(PIEN,PXRMREP) ; Build list of practitioners patients ; DBIA 1916
"RTN","PXRMXAP",36,0)
 N SCERRD,OK
"RTN","PXRMXAP",37,0)
 S OK=$$PTPR^SCAPMC(PIEN,"SCDT","","","^TMP($J,""PCM"")",.SCERRD)
"RTN","PXRMXAP",38,0)
 ;
"RTN","PXRMXAP",39,0)
 ; Determine Associated Clinic from Team Position/Team Position Assign
"RTN","PXRMXAP",40,0)
 I PXRMREP="D" D
"RTN","PXRMXAP",41,0)
 .N SUB,SCTP,SCTPA,DCLN
"RTN","PXRMXAP",42,0)
 .S SUB=0
"RTN","PXRMXAP",43,0)
 .F  S SUB=$O(^TMP($J,"PCM",SUB)) Q:'SUB  D
"RTN","PXRMXAP",44,0)
 ..S SCTP=$P(^TMP($J,"PCM",SUB),U,3) Q:SCTP=""
"RTN","PXRMXAP",45,0)
 ..S SCTPA=$P($G(^SCPT(404.43,SCTP,0)),U,2) Q:SCTPA=""  ; DBIA 2811
"RTN","PXRMXAP",46,0)
 ..S DCLN=$P($G(^SCTM(404.57,SCTPA,0)),U,9) ; DBIA 2810
"RTN","PXRMXAP",47,0)
 ..S $P(^TMP($J,"PCM",SUB),U,7)=DCLN
"RTN","PXRMXAP",48,0)
 Q
"RTN","PXRMXAP",49,0)
 ;
"RTN","PXRMXAP",50,0)
 ; Called from PXRMXD/PXRMYD
"RTN","PXRMXAP",51,0)
 ;
"RTN","PXRMXAP",52,0)
INP(INP,PXRMLOCN) ;
"RTN","PXRMXAP",53,0)
 ;If selected locations check for wards ; DBIA 10040
"RTN","PXRMXAP",54,0)
 N LOC,WARD
"RTN","PXRMXAP",55,0)
 S LOC="",WARD=0
"RTN","PXRMXAP",56,0)
 ; All locations must be wards for the prompt to display
"RTN","PXRMXAP",57,0)
 F  S LOC=$O(PXRMLOCN(LOC)) Q:LOC=""  D  Q:'WARD
"RTN","PXRMXAP",58,0)
 .S WARD=0 I $D(^SC(LOC,42)) S WARD=1
"RTN","PXRMXAP",59,0)
 Q WARD
"RTN","PXRMXAP",60,0)
 ;
"RTN","PXRMXAP",61,0)
 ; Called from PXRMXSEL/PXRMYSEL
"RTN","PXRMXAP",62,0)
 ;
"RTN","PXRMXAP",63,0)
FACL(LOCIEN) ; Get locations facility ; DBIA 2804
"RTN","PXRMXAP",64,0)
 Q $P($G(^SC(LOCIEN,0)),U,4)
"RTN","PXRMXAP",65,0)
 ;
"RTN","PXRMXAP",66,0)
WARD(LOCIEN,ARRAY) ;Get list of patients if location is a ward ;DBIA 10035
"RTN","PXRMXAP",67,0)
 N WARDIEN,WARDNAM,DFN
"RTN","PXRMXAP",68,0)
 S WARDIEN=$G(^SC(LOCIEN,42)) Q:WARDIEN=""
"RTN","PXRMXAP",69,0)
 S WARDNAM=$P($G(^DIC(42,WARDIEN,0)),U) Q:WARDNAM=""
"RTN","PXRMXAP",70,0)
 S DFN=""
"RTN","PXRMXAP",71,0)
 F  S DFN=$O(^DPT("CN",WARDNAM,DFN)) Q:DFN=""  S ARRAY(DFN)=""
"RTN","PXRMXAP",72,0)
 Q
"RTN","PXRMXAP",73,0)
 ;
"RTN","PXRMXAP",74,0)
ADM(LOCIEN,ARRAY,BD,ED) ;Get list of admissions to ward ; DBIA 10040,1480
"RTN","PXRMXAP",75,0)
 N WARDIEN,DA,DATA,DFN
"RTN","PXRMXAP",76,0)
 S WARDIEN=$G(^SC(LOCIEN,42)) Q:WARDIEN=""
"RTN","PXRMXAP",77,0)
 F  S BD=$O(^DGPM("ATT1",BD)) Q:BD>ED  Q:BD=""  D
"RTN","PXRMXAP",78,0)
 .S DA=""
"RTN","PXRMXAP",79,0)
 .F  S DA=$O(^DGPM("ATT1",BD,DA)) Q:DA=""  D
"RTN","PXRMXAP",80,0)
 ..S DATA=$G(^DGPM(DA,0)) Q:DATA=""
"RTN","PXRMXAP",81,0)
 ..I $P(DATA,U,6)'=WARDIEN Q
"RTN","PXRMXAP",82,0)
 ..S DFN=$P(DATA,U,3) Q:DFN=""
"RTN","PXRMXAP",83,0)
 ..S ARRAY(DFN)=""
"RTN","PXRMXAP",84,0)
 Q
"RTN","PXRMXAP",85,0)
 ;
"RTN","PXRMXAP",86,0)
LCHL(INP,ARRAY) ;Get list of all inpatient or outpatient locations ; DBIA 10040
"RTN","PXRMXAP",87,0)
 N HLOCIEN,NAME,IC
"RTN","PXRMXAP",88,0)
 S HLOCIEN=0,IC=0
"RTN","PXRMXAP",89,0)
 F  S HLOCIEN=$O(^SC(HLOCIEN)) Q:'HLOCIEN  D
"RTN","PXRMXAP",90,0)
 .;Outpatient report ignores wards - HA
"RTN","PXRMXAP",91,0)
 .I INP=0,$D(^SC(HLOCIEN,42)) Q
"RTN","PXRMXAP",92,0)
 .;Inpatient report includes only wards - HAI
"RTN","PXRMXAP",93,0)
 .I INP=1,'$D(^SC(HLOCIEN,42)) Q
"RTN","PXRMXAP",94,0)
 .S NAME=$P($G(^SC(HLOCIEN,0)),U) I NAME="" Q
"RTN","PXRMXAP",95,0)
 .;Build array
"RTN","PXRMXAP",96,0)
 .S IC=IC+1,PXRMLCHL(IC)=NAME_U_HLOCIEN,PXRMLOCN(HLOCIEN)=IC
"RTN","PXRMXAP",97,0)
 Q
"RTN","PXRMXBSY")
0^2^B409130
"RTN","PXRMXBSY",1,0)
PXRMXBSY ; SLC/PJH - Let the user know the computer is busy. ;01/12/2002
"RTN","PXRMXBSY",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXBSY",3,0)
 ;
"RTN","PXRMXBSY",4,0)
 ;=======================================================================
"RTN","PXRMXBSY",5,0)
INIT(SPINCNT) ;Initialize the busy display components.
"RTN","PXRMXBSY",6,0)
 S SPINCNT=0
"RTN","PXRMXBSY",7,0)
 Q
"RTN","PXRMXBSY",8,0)
 ;
"RTN","PXRMXBSY",9,0)
 ;=======================================================================
"RTN","PXRMXBSY",10,0)
DONE(DTEXT) ;Write out the done message.
"RTN","PXRMXBSY",11,0)
 W @IOBS,DTEXT,!
"RTN","PXRMXBSY",12,0)
 Q
"RTN","PXRMXBSY",13,0)
 ;
"RTN","PXRMXBSY",14,0)
 ;=======================================================================
"RTN","PXRMXBSY",15,0)
SPIN(SPINTEXT,SPINCNT) ;Move the spinner.
"RTN","PXRMXBSY",16,0)
 N QUAD
"RTN","PXRMXBSY",17,0)
 I SPINCNT=0 W !!,SPINTEXT,"  "
"RTN","PXRMXBSY",18,0)
 S SPINCNT=SPINCNT+1
"RTN","PXRMXBSY",19,0)
 S QUAD=SPINCNT#8
"RTN","PXRMXBSY",20,0)
 I QUAD=1 W @IOBS,"|"
"RTN","PXRMXBSY",21,0)
 I QUAD=3 W @IOBS,"/"
"RTN","PXRMXBSY",22,0)
 I QUAD=5 W @IOBS,"-"
"RTN","PXRMXBSY",23,0)
 I QUAD=7 W @IOBS,"\"
"RTN","PXRMXBSY",24,0)
 Q
"RTN","PXRMXD")
0^3^B78428331
"RTN","PXRMXD",1,0)
PXRMXD ; SLC/PJH - Reminder Due reports DRIVER ;01/15/2002
"RTN","PXRMXD",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXD",3,0)
 ;
"RTN","PXRMXD",4,0)
START ; Arrays and strings
"RTN","PXRMXD",5,0)
 N PXRMIOD,PXRMXJB,PXRMXST,PXRMOPT,PXRMQUE,PXRMXTMP,PXRMSEL
"RTN","PXRMXD",6,0)
 N PXRMFAC,PXRMFACN,PXRMSCAT,PXRMSRT
"RTN","PXRMXD",7,0)
 N REMINDER,PXRMINP,PXRMFCMB,PXRMTOT
"RTN","PXRMXD",8,0)
 ; Addenda
"RTN","PXRMXD",9,0)
 N PXRMOTM,PXRMPAT,PXRMPCM,PXRMPRV,PXRMTMP,PXRMRCAT,PXRMREM
"RTN","PXRMXD",10,0)
 N PXRMCS,PXRMCSN,PXRMLOCN,PXRMLCHL,PXRMLCSC,PXRMCGRP,PXRMCGRN
"RTN","PXRMXD",11,0)
 ; Counters
"RTN","PXRMXD",12,0)
 N NCAT,NFAC,NLOC,NPAT,NPCM,NOTM,NPRV,NREM,NCS,NHL,NCGRP
"RTN","PXRMXD",13,0)
 ; Flags and Dates
"RTN","PXRMXD",14,0)
 N PXRMFD,PXRMSDT,PXRMBDT,PXRMEDT,PXRMREP,PXRMPRIM,PXRMFUT
"RTN","PXRMXD",15,0)
 N PXRMRT,PXRMSSN,PXRMTABC,PXRMTABS,PXRMTMP,TITLE
"RTN","PXRMXD",16,0)
 ;
"RTN","PXRMXD",17,0)
 S PXRMRT="PXRMX",PXRMTYP="X",PXRMFCMB="N",PXRMLCMB="N"
"RTN","PXRMXD",18,0)
 ;
"RTN","PXRMXD",19,0)
 I '$D(PXRMUSER) N PXRMUSER S PXRMUSER=0
"RTN","PXRMXD",20,0)
 ;
"RTN","PXRMXD",21,0)
 S PXRMXJB=$J
"RTN","PXRMXD",22,0)
 S PXRMXST=$$NOW^XLFDT
"RTN","PXRMXD",23,0)
 S PXRMXTMP=PXRMRT_PXRMXJB_PXRMXST
"RTN","PXRMXD",24,0)
 S ^XTMP(PXRMXTMP,0)=$$FMADD^XLFDT(DT,7)_U_DT_U_"PXRM Reminder Due Report"
"RTN","PXRMXD",25,0)
 ;
"RTN","PXRMXD",26,0)
 ;
"RTN","PXRMXD",27,0)
 ;Check for existing report templates
"RTN","PXRMXD",28,0)
REP D:PXRMUSER ^PXRMXTB D:'PXRMUSER ^PXRMXT I $D(DTOUT)!$D(DUOUT) G EXIT
"RTN","PXRMXD",29,0)
 ;Run report from template details
"RTN","PXRMXD",30,0)
 I PXRMTMP'="" D  G:$D(DUOUT)&'$D(DTOUT) REP Q
"RTN","PXRMXD",31,0)
 .D START^PXRMXTA("JOB^PXRMXD")
"RTN","PXRMXD",32,0)
 ;
"RTN","PXRMXD",33,0)
 ;Select sample criteria
"RTN","PXRMXD",34,0)
SEL D SELECT^PXRMXSD(.PXRMSEL) I $D(DTOUT) G EXIT
"RTN","PXRMXD",35,0)
 I $D(DUOUT) G:PXRMTMP="" EXIT G REP
"RTN","PXRMXD",36,0)
 ;
"RTN","PXRMXD",37,0)
FAC ;Get the facility list.
"RTN","PXRMXD",38,0)
 I "IPO"'[PXRMSEL D  G:$D(DTOUT) EXIT G:$D(DUOUT) SEL
"RTN","PXRMXD",39,0)
 .D FACILITY^PXRMXSU(.PXRMFAC) Q:$D(DTOUT)!$D(DUOUT)
"RTN","PXRMXD",40,0)
 ;
"RTN","PXRMXD",41,0)
 ;Check if combined facility report is required
"RTN","PXRMXD",42,0)
COMB I "IPO"'[PXRMSEL,NFAC>1 D  G:$D(DTOUT) EXIT G:$D(DUOUT) FAC
"RTN","PXRMXD",43,0)
 .D COMB^PXRMXSD(.PXRMFCMB,"Facilities","N")
"RTN","PXRMXD",44,0)
 ;
"RTN","PXRMXD",45,0)
OPT ;Variable prompts
"RTN","PXRMXD",46,0)
 ;
"RTN","PXRMXD",47,0)
 ;Get Patient list
"RTN","PXRMXD",48,0)
 I PXRMSEL="I" K PXRMPAT D PAT^PXRMXSU(.PXRMPAT)
"RTN","PXRMXD",49,0)
 ;Get OE/RRteam list
"RTN","PXRMXD",50,0)
 I PXRMSEL="O" K PXRMOTM D OERR^PXRMXSU(.PXRMOTM)
"RTN","PXRMXD",51,0)
 ;Get PCMM team
"RTN","PXRMXD",52,0)
 I PXRMSEL="T" K PXRMPCM D PCMM^PXRMXSU(.PXRMPCM)
"RTN","PXRMXD",53,0)
 ;Get provider list
"RTN","PXRMXD",54,0)
 I PXRMSEL="P" K PXRMPRV D PROV^PXRMXSU(.PXRMPRV)
"RTN","PXRMXD",55,0)
 ;Get the location list.
"RTN","PXRMXD",56,0)
 I PXRMSEL="L" K PXRMCS,PXRMCSN,PXRMLOCN,PXRMLCHL,PXRMCGRP,PXRMCGRN D
"RTN","PXRMXD",57,0)
 .D LOC^PXRMXSU("Determine encounter counts for","HS")
"RTN","PXRMXD",58,0)
 I $D(DTOUT) G EXIT
"RTN","PXRMXD",59,0)
 I $D(DUOUT) G:"IPO"[PXRMSEL SEL G:NFAC>1 COMB G FAC
"RTN","PXRMXD",60,0)
 ;
"RTN","PXRMXD",61,0)
 ;Check if inpatient location report
"RTN","PXRMXD",62,0)
 S PXRMINP=$$INP
"RTN","PXRMXD",63,0)
 ;
"RTN","PXRMXD",64,0)
 ; Primary Provider or All (PCMM Provider only)
"RTN","PXRMXD",65,0)
PRIME I PXRMSEL="P" D  G:$D(DTOUT) EXIT G:$D(DUOUT) OPT
"RTN","PXRMXD",66,0)
 .D PRIME^PXRMXSD(.PXRMPRIM)
"RTN","PXRMXD",67,0)
 ;
"RTN","PXRMXD",68,0)
DR ; Get the date range.
"RTN","PXRMXD",69,0)
 S PXRMFD="P"
"RTN","PXRMXD",70,0)
 ; No prompt if individual patients selected
"RTN","PXRMXD",71,0)
 ; Single dates only if PCMM teams/providers and OE/RR teams selected
"RTN","PXRMXD",72,0)
 ; Choice of previous/future date range if location selected
"RTN","PXRMXD",73,0)
 ;
"RTN","PXRMXD",74,0)
 ; Prior encounters/future appointments (location only)
"RTN","PXRMXD",75,0)
PREV I PXRMSEL="L" D PREV^PXRMXSD(.PXRMFD) G:$D(DTOUT) EXIT G:$D(DUOUT) OPT
"RTN","PXRMXD",76,0)
 ; Date range input (location only)
"RTN","PXRMXD",77,0)
 I PXRMSEL="L" D  G:$D(DTOUT) EXIT G:$D(DUOUT) PREV
"RTN","PXRMXD",78,0)
 .I PXRMFD="P" D PDR^PXRMXDUT(.PXRMBDT,.PXRMEDT,"ENCOUNTER")
"RTN","PXRMXD",79,0)
 .I PXRMFD="F" D FDR^PXRMXDUT(.PXRMBDT,.PXRMEDT,"APPOINTMENT")
"RTN","PXRMXD",80,0)
 .I PXRMFD="A" D PDR^PXRMXDUT(.PXRMBDT,.PXRMEDT,"ADMISSION")
"RTN","PXRMXD",81,0)
 .I PXRMFD="C" S PXRMBDT=DT,PXRMEDT=DT
"RTN","PXRMXD",82,0)
 ; Due Effective Date
"RTN","PXRMXD",83,0)
DUE D SDR^PXRMXDUT(.PXRMSDT) G:$D(DTOUT) EXIT
"RTN","PXRMXD",84,0)
 I $D(DUOUT) G:PXRMSEL="L" PREV G OPT
"RTN","PXRMXD",85,0)
 ;
"RTN","PXRMXD",86,0)
SCAT ;Get the service categories.
"RTN","PXRMXD",87,0)
 I PXRMSEL="L",PXRMFD="P" D
"RTN","PXRMXD",88,0)
 .D SCAT^PXRMXSC
"RTN","PXRMXD",89,0)
 .I $D(DTOUT)!$D(DUOUT) Q
"RTN","PXRMXD",90,0)
 I $D(DTOUT) G EXIT
"RTN","PXRMXD",91,0)
 I $D(DUOUT) G DUE
"RTN","PXRMXD",92,0)
 ;
"RTN","PXRMXD",93,0)
TYP ;Determine type of report (detail/summary)
"RTN","PXRMXD",94,0)
 S PXRMREP="S"
"RTN","PXRMXD",95,0)
 D REP^PXRMXSD(.PXRMREP) I $D(DTOUT) G EXIT
"RTN","PXRMXD",96,0)
 I $D(DUOUT) G SCAT
"RTN","PXRMXD",97,0)
 ;
"RTN","PXRMXD",98,0)
 ;
"RTN","PXRMXD",99,0)
 ;Check if combined location report is required
"RTN","PXRMXD",100,0)
LCOMB S NLOC=0
"RTN","PXRMXD",101,0)
 I PXRMREP="D",PXRMSEL="L" D  G:$D(DTOUT) EXIT G:$D(DUOUT) TYP
"RTN","PXRMXD",102,0)
 .N DEFAULT,TEXT
"RTN","PXRMXD",103,0)
 .D NLOC
"RTN","PXRMXD",104,0)
 .I NLOC>1 D COMB^PXRMXSD(.PXRMLCMB,TEXT,DEFAULT)
"RTN","PXRMXD",105,0)
 ;
"RTN","PXRMXD",106,0)
FUT ;For detailed report give option to display future appointments
"RTN","PXRMXD",107,0)
 S PXRMFUT="N"
"RTN","PXRMXD",108,0)
 I PXRMREP="D",'PXRMINP D  G:$D(DTOUT) EXIT I $D(DUOUT) G:(PXRMSEL="L")&(NLOC>1) LCOMB G TYP
"RTN","PXRMXD",109,0)
 .D FUTURE^PXRMXSD(.PXRMFUT)
"RTN","PXRMXD",110,0)
 ;
"RTN","PXRMXD",111,0)
SRT ;For detailed report give option to sort by appointment date
"RTN","PXRMXD",112,0)
 S PXRMSRT="N"
"RTN","PXRMXD",113,0)
 I PXRMREP="D",(PXRMSEL'="I") D  G:$D(DTOUT) EXIT I $D(DUOUT) G:(PXRMSEL="L")&(PXRMINP)&(NLOC>1) LCOMB G:PXRMINP TYP G FUT
"RTN","PXRMXD",114,0)
 .;Option to sort by Bed for inpatients
"RTN","PXRMXD",115,0)
 .I PXRMSEL="L",PXRMINP D BED^PXRMXSD(.PXRMSRT) Q
"RTN","PXRMXD",116,0)
 .;Otherwise option to sort by appt. date
"RTN","PXRMXD",117,0)
 .D SRT^PXRMXSD(.PXRMSRT)
"RTN","PXRMXD",118,0)
 ;
"RTN","PXRMXD",119,0)
 ;Option to print full SSN
"RTN","PXRMXD",120,0)
SSN I PXRMREP="D" D  G:$D(DTOUT) EXIT I $D(DUOUT) G:PXRMSEL="I" FUT G SRT
"RTN","PXRMXD",121,0)
 .D SSN^PXRMXSD(.PXRMSSN)
"RTN","PXRMXD",122,0)
 ;
"RTN","PXRMXD",123,0)
 ;Option to print without totals, with totals or totals only
"RTN","PXRMXD",124,0)
TOT I PXRMREP="S" D  G:$D(DTOUT) EXIT I $D(DUOUT) G TYP
"RTN","PXRMXD",125,0)
 .;Default is normal report
"RTN","PXRMXD",126,0)
 .S PXRMTOT="I"
"RTN","PXRMXD",127,0)
 .;Only prompt if more than one location, team or provider is selected
"RTN","PXRMXD",128,0)
 .I PXRMSEL="P",NPRV<2 Q
"RTN","PXRMXD",129,0)
 .I "OT"[PXRMSEL,NOTM<2 Q
"RTN","PXRMXD",130,0)
 .;Ignore reports for all locations
"RTN","PXRMXD",131,0)
 .I PXRMSEL="L",PXRMLCMB="Y" Q
"RTN","PXRMXD",132,0)
 .I PXRMSEL="L" N DEFAULT,TEXT D NLOC Q:NLOC<2
"RTN","PXRMXD",133,0)
 .;Prompt for options
"RTN","PXRMXD",134,0)
 .N LIT1,LIT2,LIT3
"RTN","PXRMXD",135,0)
 .D LIT,TOTALS^PXRMXSD(.PXRMTOT,LIT1,LIT2,LIT3)
"RTN","PXRMXD",136,0)
 ;
"RTN","PXRMXD",137,0)
 ;Reminder Category/Individual Reminder Selection
"RTN","PXRMXD",138,0)
RCAT D RCAT^PXRMXSU(.PXRMRCAT,.PXRMREM) I $D(DTOUT) G EXIT
"RTN","PXRMXD",139,0)
 I $D(DUOUT) G:PXRMREP="D" SSN G TOT
"RTN","PXRMXD",140,0)
 ;
"RTN","PXRMXD",141,0)
 ;Create combined reminder list
"RTN","PXRMXD",142,0)
 D MERGE^PXRMXS1
"RTN","PXRMXD",143,0)
 ;
"RTN","PXRMXD",144,0)
SAV ;Option to create a new report template
"RTN","PXRMXD",145,0)
 I PXRMTMP="" D ^PXRMXTU G:$D(DTOUT) EXIT I $D(DUOUT) G RCAT
"RTN","PXRMXD",146,0)
 ;
"RTN","PXRMXD",147,0)
 ;Option to print delimiter separated output
"RTN","PXRMXD",148,0)
TABS D  G:$D(DTOUT) EXIT I $D(DUOUT) G SAV
"RTN","PXRMXD",149,0)
 .D TABS^PXRMXSD(.PXRMTABS)
"RTN","PXRMXD",150,0)
 ;
"RTN","PXRMXD",151,0)
 ;Select chracter
"RTN","PXRMXD",152,0)
TCHAR I PXRMTABS="Y" D  G:$D(DTOUT) EXIT G:$D(DUOUT) TABS
"RTN","PXRMXD",153,0)
 .D TABSEL^PXRMXSD(.PXRMTABC)
"RTN","PXRMXD",154,0)
 ;
"RTN","PXRMXD",155,0)
 ;Determine whether the report should be queued.
"RTN","PXRMXD",156,0)
JOB N %ZIS S %ZIS="QM"
"RTN","PXRMXD",157,0)
 W !
"RTN","PXRMXD",158,0)
 D ^%ZIS
"RTN","PXRMXD",159,0)
 I POP G EXIT
"RTN","PXRMXD",160,0)
 S PXRMIOD=ION_";"_IOST_";"_IOM_";"_IOSL
"RTN","PXRMXD",161,0)
 S PXRMQUE=$G(IO("Q"))
"RTN","PXRMXD",162,0)
 ;
"RTN","PXRMXD",163,0)
 I PXRMQUE D  Q
"RTN","PXRMXD",164,0)
 . ;Queue the report.
"RTN","PXRMXD",165,0)
 . N DESC,IODEV,ROUTINE,ZTDTH
"RTN","PXRMXD",166,0)
 . S DESC="Reminder Due Report - sort"
"RTN","PXRMXD",167,0)
 . S IODEV=""
"RTN","PXRMXD",168,0)
 . S ROUTINE="^PXRMXSE"
"RTN","PXRMXD",169,0)
 . M ^TMP("PXRM-MESS",$J)=^TMP("XM-MESS",$J)
"RTN","PXRMXD",170,0)
 . S ^XTMP(PXRMXTMP,"SORTZTSK")=$$QUE^PXRMXQUE(DESC,IODEV,ROUTINE,"SAVE^PXRMXD")
"RTN","PXRMXD",171,0)
 . M ^TMP("XM-MESS",$J)=^TMP("PXRM-MESS",$J)
"RTN","PXRMXD",172,0)
 . K ^TMP("PXRM-MESS",$J)
"RTN","PXRMXD",173,0)
 .;
"RTN","PXRMXD",174,0)
 . S DESC="Reminder Due Report - print"
"RTN","PXRMXD",175,0)
 . S IODEV=PXRMIOD
"RTN","PXRMXD",176,0)
 . S ROUTINE="^PXRMXPR"
"RTN","PXRMXD",177,0)
 . S ZTDTH="@"
"RTN","PXRMXD",178,0)
 . S ^XTMP(PXRMXTMP,"PRZTSK")=$$QUE^PXRMXQUE(DESC,IODEV,ROUTINE,"SAVE^PXRMXD")
"RTN","PXRMXD",179,0)
 I 'PXRMQUE D ^PXRMXSE
"RTN","PXRMXD",180,0)
 Q
"RTN","PXRMXD",181,0)
 ;
"RTN","PXRMXD",182,0)
 ;Option PXRM REMINDERS DUE (USER)
"RTN","PXRMXD",183,0)
USER N PXRMUSER
"RTN","PXRMXD",184,0)
 S PXRMUSER=+$G(DUZ)
"RTN","PXRMXD",185,0)
 G START
"RTN","PXRMXD",186,0)
 ;
"RTN","PXRMXD",187,0)
 ;
"RTN","PXRMXD",188,0)
EXIT ;Clean things up.
"RTN","PXRMXD",189,0)
 D EXIT^PXRMXGUT
"RTN","PXRMXD",190,0)
 Q
"RTN","PXRMXD",191,0)
 ;
"RTN","PXRMXD",192,0)
 ;Check if inpatient report
"RTN","PXRMXD",193,0)
INP() ;Applies to location reports only
"RTN","PXRMXD",194,0)
 I PXRMSEL'="L" Q 0
"RTN","PXRMXD",195,0)
 ;For all inpatient locations default is automatic
"RTN","PXRMXD",196,0)
 I $P(PXRMLCSC,U)="HAI" Q 1
"RTN","PXRMXD",197,0)
 ;For selected locations check if all locations are wards
"RTN","PXRMXD",198,0)
 I $P(PXRMLCSC,U)="HS" Q $$INP^PXRMXAP(PXRMLCSC,.PXRMLOCN)
"RTN","PXRMXD",199,0)
 ;Otherwise
"RTN","PXRMXD",200,0)
 Q 0
"RTN","PXRMXD",201,0)
 ;
"RTN","PXRMXD",202,0)
 ;Prompt text
"RTN","PXRMXD",203,0)
LIT N LIT
"RTN","PXRMXD",204,0)
 S LIT=$S(PXRMSEL="P":"Provider","OT"[PXRMSEL:"Team",1:"Location")
"RTN","PXRMXD",205,0)
 I PXRMFCMB="N" D
"RTN","PXRMXD",206,0)
 .S LIT1="Individual "_LIT_"s only"
"RTN","PXRMXD",207,0)
 .S LIT2="Individual "_LIT_"s plus Totals by Facility"
"RTN","PXRMXD",208,0)
 .S LIT3="Totals by Facility only"
"RTN","PXRMXD",209,0)
 I PXRMFCMB="Y" D
"RTN","PXRMXD",210,0)
 .S LIT1="Individual "_LIT_"s only"
"RTN","PXRMXD",211,0)
 .S LIT2="Individual "_LIT_"s plus Overall Total"
"RTN","PXRMXD",212,0)
 .S LIT3="Overall Total only"
"RTN","PXRMXD",213,0)
 Q
"RTN","PXRMXD",214,0)
 ;
"RTN","PXRMXD",215,0)
 ;Check if multiple locations
"RTN","PXRMXD",216,0)
NLOC S DEFAULT="N",NLOC=1,TEXT="Locations"
"RTN","PXRMXD",217,0)
 I $P(PXRMLCSC,U)["HA" S DEFAULT="Y",NLOC=999
"RTN","PXRMXD",218,0)
 I $P(PXRMLCSC,U)="CA" S DEFAULT="Y",NCS=999
"RTN","PXRMXD",219,0)
 I $E(PXRMLCSC)="C" S TEXT="Clinic Stops",NLOC=NCS
"RTN","PXRMXD",220,0)
 I $E(PXRMLCSC)="G" S TEXT="Clinic Groups",NLOC=NCGRP
"RTN","PXRMXD",221,0)
 I $P(PXRMLCSC,U)="HS" S NLOC=NHL S:$$INP TEXT="Inpatient Locations"
"RTN","PXRMXD",222,0)
 ;Special coding if more than one facility and location
"RTN","PXRMXD",223,0)
 I $P(PXRMLCSC,U)="HS",NFAC>1,NLOC>1 D
"RTN","PXRMXD",224,0)
 .N FAC,HLOCIEN,HLNAME,IC,MULT
"RTN","PXRMXD",225,0)
 .S IC=0 S:PXRMFCMB="Y" FAC="COMBINED"
"RTN","PXRMXD",226,0)
 .;Build list of locations by facility
"RTN","PXRMXD",227,0)
 .F  S IC=$O(PXRMLCHL(IC)) Q:'IC  D
"RTN","PXRMXD",228,0)
 ..S HLOCIEN=$P(PXRMLCHL(IC),U,2),FAC=$$FACL^PXRMXAP(HLOCIEN) Q:'FAC
"RTN","PXRMXD",229,0)
 ..S HLNAME=$P(PXRMLCHL(IC),U) Q:HLNAME=""
"RTN","PXRMXD",230,0)
 ..S MULT(FAC,HLNAME)=""
"RTN","PXRMXD",231,0)
 .S MULT=0,FAC=0
"RTN","PXRMXD",232,0)
 .;Count locations in each facility
"RTN","PXRMXD",233,0)
 .F  S FAC=$O(MULT(FAC)) Q:'FAC  D  Q:MULT
"RTN","PXRMXD",234,0)
 ..S IC=0,HLNAME=""
"RTN","PXRMXD",235,0)
 ..F  S HLNAME=$O(MULT(FAC,HLNAME)) Q:HLNAME=""  S IC=IC+1
"RTN","PXRMXD",236,0)
 ..I IC>1 S MULT=1
"RTN","PXRMXD",237,0)
 .;If only one location per facility suppress combined location option
"RTN","PXRMXD",238,0)
 .I 'MULT S NLOC=1
"RTN","PXRMXD",239,0)
 Q
"RTN","PXRMXD",240,0)
 ;
"RTN","PXRMXD",241,0)
SAVE ;Save the variables for queing.
"RTN","PXRMXD",242,0)
 S ZTSAVE("PXRMBDT")="",ZTSAVE("PXRMEDT")="",ZTSAVE("PXRMSDT")=""
"RTN","PXRMXD",243,0)
 S ZTSAVE("PXRMCS(")="",ZTSAVE("NCS")=""
"RTN","PXRMXD",244,0)
 S ZTSAVE("PXRMCGRP(")="",ZTSAVE("NCGRP")=""
"RTN","PXRMXD",245,0)
 S ZTSAVE("PXRMFAC(")="",ZTSAVE("NFAC")=""
"RTN","PXRMXD",246,0)
 S ZTSAVE("PXRMFACN(")=""
"RTN","PXRMXD",247,0)
 S ZTSAVE("PXRMFCMB")=""
"RTN","PXRMXD",248,0)
 S ZTSAVE("PXRMFUT")=""
"RTN","PXRMXD",249,0)
 S ZTSAVE("PXRMFD")=""
"RTN","PXRMXD",250,0)
 S ZTSAVE("PXRMINP")=""
"RTN","PXRMXD",251,0)
 S ZTSAVE("PXRMIOD")=""
"RTN","PXRMXD",252,0)
 S ZTSAVE("PXRMLCHL(")="",ZTSAVE("NHL")=""
"RTN","PXRMXD",253,0)
 S ZTSAVE("PXRMLCMB")=""
"RTN","PXRMXD",254,0)
 S ZTSAVE("PXRMLCSC")=""
"RTN","PXRMXD",255,0)
 S ZTSAVE("PXRMPRIM")=""
"RTN","PXRMXD",256,0)
 S ZTSAVE("PXRMQUE")=""
"RTN","PXRMXD",257,0)
 S ZTSAVE("PXRMREP")=""
"RTN","PXRMXD",258,0)
 S ZTSAVE("PXRMRT")=""
"RTN","PXRMXD",259,0)
 S ZTSAVE("PXRMSCAT")=""
"RTN","PXRMXD",260,0)
 S ZTSAVE("PXRMSEL")=""
"RTN","PXRMXD",261,0)
 S ZTSAVE("PXRMSRT")=""
"RTN","PXRMXD",262,0)
 S ZTSAVE("PXRMSSN")=""
"RTN","PXRMXD",263,0)
 S ZTSAVE("PXRMTABC")=""
"RTN","PXRMXD",264,0)
 S ZTSAVE("PXRMTABS")=""
"RTN","PXRMXD",265,0)
 S ZTSAVE("PXRMTMP")=""
"RTN","PXRMXD",266,0)
 S ZTSAVE("PXRMTOT")=""
"RTN","PXRMXD",267,0)
 S ZTSAVE("PXRMXTMP")=""
"RTN","PXRMXD",268,0)
 ; Time initiated
"RTN","PXRMXD",269,0)
 S ZTSAVE("PXRMXST")=""
"RTN","PXRMXD",270,0)
 ; New selection criteria
"RTN","PXRMXD",271,0)
 S ZTSAVE("PXRMOTM(")="",ZTSAVE("NOTM")=""
"RTN","PXRMXD",272,0)
 S ZTSAVE("PXRMPRV(")="",ZTSAVE("NPRV")=""
"RTN","PXRMXD",273,0)
 S ZTSAVE("PXRMPAT(")="",ZTSAVE("NPAT")=""
"RTN","PXRMXD",274,0)
 S ZTSAVE("PXRMPCM(")="",ZTSAVE("NPCM")=""
"RTN","PXRMXD",275,0)
 S ZTSAVE("PXRMREM(")="",ZTSAVE("NREM")=""
"RTN","PXRMXD",276,0)
 S ZTSAVE("PXRMRCAT(")="",ZTSAVE("NCAT")=""
"RTN","PXRMXD",277,0)
 S ZTSAVE("PXRMUSER")=""
"RTN","PXRMXD",278,0)
 ;Reminder list
"RTN","PXRMXD",279,0)
 S ZTSAVE("REMINDER(")=""
"RTN","PXRMXD",280,0)
 ; Arrays by IEN
"RTN","PXRMXD",281,0)
 S ZTSAVE("PXRMLOCN(")=""
"RTN","PXRMXD",282,0)
 S ZTSAVE("PXRMCSN(")=""
"RTN","PXRMXD",283,0)
 S ZTSAVE("PXRMCGRN(")=""
"RTN","PXRMXD",284,0)
 Q
"RTN","PXRMXDUT")
0^4^B26957605
"RTN","PXRMXDUT",1,0)
PXRMXDUT ; SLC/PJH - Date utilities for reminder reports. ;01/12/2002
"RTN","PXRMXDUT",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXDUT",3,0)
 ;
"RTN","PXRMXDUT",4,0)
BDHELP(HTEXT,TYPE) ;Write the beginning date help.
"RTN","PXRMXDUT",5,0)
 I $D(HTEXT) D HELP(.HTEXT)
"RTN","PXRMXDUT",6,0)
 I '$D(HTEXT) D
"RTN","PXRMXDUT",7,0)
 . N BDHTEXT
"RTN","PXRMXDUT",8,0)
 . S BDHTEXT(1)="This is the beginning date for "_TYPE_" to be included in the creation of"
"RTN","PXRMXDUT",9,0)
 . S BDHTEXT(2)="this report."
"RTN","PXRMXDUT",10,0)
 . D HELP^PXRMXDUT(.BDHTEXT)
"RTN","PXRMXDUT",11,0)
 Q
"RTN","PXRMXDUT",12,0)
 ;
"RTN","PXRMXDUT",13,0)
EDHELP(HTEXT,TYPE) ;Write the ending date help.
"RTN","PXRMXDUT",14,0)
 I $D(HTEXT) D HELP(.HTEXT)
"RTN","PXRMXDUT",15,0)
 I '$D(HTEXT) D
"RTN","PXRMXDUT",16,0)
 . N EDHTEXT
"RTN","PXRMXDUT",17,0)
 . S EDHTEXT(1)="This is the ending date for "_TYPE_" to be included in the creation"
"RTN","PXRMXDUT",18,0)
 . S EDHTEXT(2)="of this report."
"RTN","PXRMXDUT",19,0)
 . D HELP^PXRMXDUT(.EDHTEXT)
"RTN","PXRMXDUT",20,0)
 Q
"RTN","PXRMXDUT",21,0)
 ;
"RTN","PXRMXDUT",22,0)
SDHELP(HTEXT) ;Write the single date help.
"RTN","PXRMXDUT",23,0)
 I $D(HTEXT) D HELP(.HTEXT)
"RTN","PXRMXDUT",24,0)
 I '$D(HTEXT) D
"RTN","PXRMXDUT",25,0)
 . N SDHTEXT
"RTN","PXRMXDUT",26,0)
 . S SDHTEXT(1)="This is the date for the report"
"RTN","PXRMXDUT",27,0)
 . D HELP^PXRMXDUT(.SDHTEXT)
"RTN","PXRMXDUT",28,0)
 Q
"RTN","PXRMXDUT",29,0)
 ;
"RTN","PXRMXDUT",30,0)
FDR(BDATE,EDATE,TYPE,BHTEXT,EHTEXT) ;Get a future date range.
"RTN","PXRMXDUT",31,0)
FBDATE ;Select the beginning date.
"RTN","PXRMXDUT",32,0)
 N X,Y,DIR
"RTN","PXRMXDUT",33,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXDUT",34,0)
 S DIR(0)="DA^"_DT_"::EFTX"
"RTN","PXRMXDUT",35,0)
 S DIR("A")="Enter "_TYPE_" BEGINNING DATE: "
"RTN","PXRMXDUT",36,0)
 S DIR("B")=$$FMTE^XLFDT($$DT^XLFDT,"D")
"RTN","PXRMXDUT",37,0)
 S DIR("?")="This must be a future date. For detailed help type ??"
"RTN","PXRMXDUT",38,0)
 S DIR("??")=U_"D BDHELP^PXRMXDUT(.BHTEXT,TYPE)"
"RTN","PXRMXDUT",39,0)
 W !
"RTN","PXRMXDUT",40,0)
 D ^DIR K DIR
"RTN","PXRMXDUT",41,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXDUT",42,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXDUT",43,0)
 S BDATE=Y
"RTN","PXRMXDUT",44,0)
 I $E(Y,6,7)="00" W $C(7),"  ?? Enter exact date" G FBDATE
"RTN","PXRMXDUT",45,0)
 ;
"RTN","PXRMXDUT",46,0)
FEDATE ;Select the ending date.
"RTN","PXRMXDUT",47,0)
 S DIR(0)="DA^"_BDATE_"::ETFX"
"RTN","PXRMXDUT",48,0)
 S DIR("A")="Enter "_TYPE_" ENDING DATE: "
"RTN","PXRMXDUT",49,0)
 S DIR("?")="This must be a future date and not before "_$$FMTE^XLFDT(BDATE,"D")_". For detailed help type ??"
"RTN","PXRMXDUT",50,0)
 S DIR("??")=U_"D EDHELP^PXRMXDUT(.EHTEXT,TYPE)"
"RTN","PXRMXDUT",51,0)
 D ^DIR K DIR
"RTN","PXRMXDUT",52,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXDUT",53,0)
 I $D(DTOUT) Q
"RTN","PXRMXDUT",54,0)
 I $D(DUOUT) G FBDATE
"RTN","PXRMXDUT",55,0)
 S EDATE=Y
"RTN","PXRMXDUT",56,0)
 I $E(Y,6,7)="00" W $C(7),"  ?? Enter exact date" G FEDATE
"RTN","PXRMXDUT",57,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXDUT",58,0)
 Q
"RTN","PXRMXDUT",59,0)
 ;
"RTN","PXRMXDUT",60,0)
GDR(BDATE,EDATE,TYPE,BHTEXT,EHTEXT) ;Get a general date range.
"RTN","PXRMXDUT",61,0)
GBDATE ;Select the beginning date.
"RTN","PXRMXDUT",62,0)
 N X,Y,DIR
"RTN","PXRMXDUT",63,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXDUT",64,0)
 S DIR(0)="DA^::ETX"
"RTN","PXRMXDUT",65,0)
 S DIR("A")="Enter "_TYPE_" BEGINNING DATE: "
"RTN","PXRMXDUT",66,0)
 S DIR("?")="This must be a date. For detailed help type ??"
"RTN","PXRMXDUT",67,0)
 S DIR("??")=U_"D BDHELP^PXRMXDUT(.BHTEXT,TYPE)"
"RTN","PXRMXDUT",68,0)
 W !
"RTN","PXRMXDUT",69,0)
 D ^DIR K DIR
"RTN","PXRMXDUT",70,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXDUT",71,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXDUT",72,0)
 S BDATE=Y
"RTN","PXRMXDUT",73,0)
 I $E(Y,6,7)="00" W $C(7),"  ?? Enter exact date" G GBDATE
"RTN","PXRMXDUT",74,0)
 ;
"RTN","PXRMXDUT",75,0)
GEDATE ;Select the ending date.
"RTN","PXRMXDUT",76,0)
 S DIR(0)="DA^"_BDATE_"::ETX"
"RTN","PXRMXDUT",77,0)
 S DIR("A")="Enter "_TYPE_" ENDING DATE: "
"RTN","PXRMXDUT",78,0)
 S DIR("?")="This must be a date and not before "_$$FMTE^XLFDT(BDATE,"D")_". For detailed help type ??"
"RTN","PXRMXDUT",79,0)
 S DIR("??")=U_"D EDHELP^PXRMXDUT(.EHTEXT,TYPE)"
"RTN","PXRMXDUT",80,0)
 D ^DIR K DIR
"RTN","PXRMXDUT",81,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXDUT",82,0)
 I $D(DTOUT) Q
"RTN","PXRMXDUT",83,0)
 I $D(DUOUT) G GBDATE
"RTN","PXRMXDUT",84,0)
 S EDATE=Y
"RTN","PXRMXDUT",85,0)
 I $E(Y,6,7)="00" W $C(7),"  ?? Enter exact date" G GEDATE
"RTN","PXRMXDUT",86,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXDUT",87,0)
 Q
"RTN","PXRMXDUT",88,0)
 ;
"RTN","PXRMXDUT",89,0)
HELP(HTEXT) ;General help text routine. Write out the text in the HTEXT
"RTN","PXRMXDUT",90,0)
 ;array.
"RTN","PXRMXDUT",91,0)
 N DIWF,DIWL,DIWR,IC
"RTN","PXRMXDUT",92,0)
 S DIWF="C70",DIWL=0,DIWR=70
"RTN","PXRMXDUT",93,0)
 K ^UTILITY($J,"W")
"RTN","PXRMXDUT",94,0)
 S IC=""
"RTN","PXRMXDUT",95,0)
 F  S IC=$O(HTEXT(IC)) Q:IC=""  D
"RTN","PXRMXDUT",96,0)
 . S X=HTEXT(IC)
"RTN","PXRMXDUT",97,0)
 . D ^DIWP
"RTN","PXRMXDUT",98,0)
 W !
"RTN","PXRMXDUT",99,0)
 S IC=0
"RTN","PXRMXDUT",100,0)
 F  S IC=$O(^UTILITY($J,"W",0,IC)) Q:IC=""  D
"RTN","PXRMXDUT",101,0)
 . W !,^UTILITY($J,"W",0,IC,0)
"RTN","PXRMXDUT",102,0)
 K ^UTILITY($J,"W")
"RTN","PXRMXDUT",103,0)
 W !
"RTN","PXRMXDUT",104,0)
 N %DT,MODE
"RTN","PXRMXDUT",105,0)
 S MODE=$G(TYPE),%DT="F",%DT(0)=DT
"RTN","PXRMXDUT",106,0)
 I (MODE="ADMISSION")!(MODE="ENCOUNTER") S %DT="P",%DT(0)=-DT
"RTN","PXRMXDUT",107,0)
 D HELP^%DTC
"RTN","PXRMXDUT",108,0)
 Q
"RTN","PXRMXDUT",109,0)
 ;
"RTN","PXRMXDUT",110,0)
PDR(BDATE,EDATE,TYPE,BHTEXT,EXTEXT) ;Get a past date range.
"RTN","PXRMXDUT",111,0)
PBDATE ;Select the beginning date.
"RTN","PXRMXDUT",112,0)
 N X,Y,DIR
"RTN","PXRMXDUT",113,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXDUT",114,0)
 S DIR(0)="D^:"_DT_":EPTX"
"RTN","PXRMXDUT",115,0)
 S DIR("A")="Enter "_TYPE_" BEGINNING DATE"
"RTN","PXRMXDUT",116,0)
 S DIR("?")="This must be a past date. For detailed help type ??"
"RTN","PXRMXDUT",117,0)
 S DIR("??")=U_"D BDHELP^PXRMXDUT(.BHTEXT,TYPE)"
"RTN","PXRMXDUT",118,0)
 W !
"RTN","PXRMXDUT",119,0)
 D ^DIR K DIR
"RTN","PXRMXDUT",120,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXDUT",121,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXDUT",122,0)
 S BDATE=Y
"RTN","PXRMXDUT",123,0)
 I $E(Y,6,7)="00" W $C(7),"  ?? Enter exact date" G PBDATE
"RTN","PXRMXDUT",124,0)
 ;
"RTN","PXRMXDUT",125,0)
PEDATE ;Select the ending date.
"RTN","PXRMXDUT",126,0)
 S DIR(0)="DA^"_BDATE_":"_DT_":EPTX"
"RTN","PXRMXDUT",127,0)
 S DIR("A")="Enter "_TYPE_" ENDING DATE: "
"RTN","PXRMXDUT",128,0)
 S DIR("?")="This must be a past date, but not before "_$$FMTE^XLFDT(BDATE,"D")_". For detailed help type ??"
"RTN","PXRMXDUT",129,0)
 S DIR("??")=U_"D EDHELP^PXRMXDUT(.EHTEXT,TYPE)"
"RTN","PXRMXDUT",130,0)
 D ^DIR K DIR
"RTN","PXRMXDUT",131,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXDUT",132,0)
 I $D(DTOUT) Q
"RTN","PXRMXDUT",133,0)
 I $D(DUOUT) G PBDATE
"RTN","PXRMXDUT",134,0)
 S EDATE=Y
"RTN","PXRMXDUT",135,0)
 I $E(Y,6,7)="00" W $C(7),"  ?? Enter exact date" G PEDATE
"RTN","PXRMXDUT",136,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXDUT",137,0)
 Q
"RTN","PXRMXDUT",138,0)
 ;
"RTN","PXRMXDUT",139,0)
SDR(SDATE,BHTEXT,EHTEXT) ;Get a date.
"RTN","PXRMXDUT",140,0)
SBDATE ;Select the date.
"RTN","PXRMXDUT",141,0)
 N X,Y,DIR
"RTN","PXRMXDUT",142,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXDUT",143,0)
 S DIR(0)="DA^"_DT_"::EFTX"
"RTN","PXRMXDUT",144,0)
 S DIR("A")="Enter EFFECTIVE DUE DATE: "
"RTN","PXRMXDUT",145,0)
 S DIR("B")=$$FMTE^XLFDT($$DT^XLFDT,"D")
"RTN","PXRMXDUT",146,0)
 S DIR("?")="This must be today or a future date. For detailed help type ??"
"RTN","PXRMXDUT",147,0)
 S DIR("??")=U_"D SDHELP^PXRMXDUT(.BHTEXT)"
"RTN","PXRMXDUT",148,0)
 W !
"RTN","PXRMXDUT",149,0)
 D ^DIR K DIR
"RTN","PXRMXDUT",150,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXDUT",151,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXDUT",152,0)
 I $E(Y,6,7)="00" W $C(7),"  ?? Enter exact date" G SBDATE
"RTN","PXRMXDUT",153,0)
 S SDATE=Y
"RTN","PXRMXDUT",154,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXDUT",155,0)
 Q
"RTN","PXRMXGPR")
0^5^B82261237
"RTN","PXRMXGPR",1,0)
PXRMXGPR ; SLC/PJH - Reminder Due print calls ;12/21/2001
"RTN","PXRMXGPR",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXGPR",3,0)
 ;
"RTN","PXRMXGPR",4,0)
 ;Called from PXRMXPR
"RTN","PXRMXGPR",5,0)
 ;
"RTN","PXRMXGPR",6,0)
 ;Print Selection criteria
"RTN","PXRMXGPR",7,0)
HEAD(PSTART) ;
"RTN","PXRMXGPR",8,0)
 I SUB="TOTAL" N NAM S NAM="TOTAL REPORT"
"RTN","PXRMXGPR",9,0)
 I PXRMTABS="Y" D  Q
"RTN","PXRMXGPR",10,0)
 .N FFAC,FNAM
"RTN","PXRMXGPR",11,0)
 .S FNAM=NAM
"RTN","PXRMXGPR",12,0)
 .I "CES"[PXRMTABC S FNAM=$TR(FNAM,SEP,"_")
"RTN","PXRMXGPR",13,0)
 .I PXRMFCMB="N","LT"[PXRMSEL D  Q
"RTN","PXRMXGPR",14,0)
 ..S FFAC=$TR(FACPNAME,SEP,"_")
"RTN","PXRMXGPR",15,0)
 ..W !,"0"_SEP_FFAC_"_"_FNAM_SEP_SEP
"RTN","PXRMXGPR",16,0)
 .I PXRMFCMB="N","LT"'[PXRMSEL W !,"0"_SEP_FNAM_SEP_SEP Q
"RTN","PXRMXGPR",17,0)
 .I PXRMFCMB="Y" W !,"0"_SEP_"COMBINED_REPORT_"_FNAM_SEP_SEP Q
"RTN","PXRMXGPR",18,0)
 I "LT"[PXRMSEL D
"RTN","PXRMXGPR",19,0)
 .I PXRMFCMB="N" W !,?PSTART,"Facility: ",FACPNAME Q
"RTN","PXRMXGPR",20,0)
 .W !,?PSTART,"Combined Report: "
"RTN","PXRMXGPR",21,0)
 .N FACN,LENGTH,TEXT
"RTN","PXRMXGPR",22,0)
 .S FACN=0,LENGTH=17+PSTART
"RTN","PXRMXGPR",23,0)
 .F  S FACN=$O(PXRMFACN(FACN)) Q:'FACN  D
"RTN","PXRMXGPR",24,0)
 ..S TEXT=$P(PXRMFACN(FACN),U)_" ("_FACN_")"
"RTN","PXRMXGPR",25,0)
 ..I $O(PXRMFACN(FACN)) S TEXT=TEXT_", "
"RTN","PXRMXGPR",26,0)
 ..I (LENGTH+$L(TEXT))>80 S LENGTH=17+PSTART W !,?(17+PSTART)
"RTN","PXRMXGPR",27,0)
 ..W TEXT S LENGTH=LENGTH+$L(TEXT)
"RTN","PXRMXGPR",28,0)
 I "PTO"[PXRMSEL D
"RTN","PXRMXGPR",29,0)
 .I SUB="TOTAL" W !,?PSTART,NAM Q
"RTN","PXRMXGPR",30,0)
 .W !,?PSTART,"Reminders "_PXRMTX_" for ",NAM
"RTN","PXRMXGPR",31,0)
 I PXRMSEL="L" W !,?PSTART,"Reminders "_PXRMTX_" "_SD_" - ",NAM
"RTN","PXRMXGPR",32,0)
 I PXRMSEL="L" D
"RTN","PXRMXGPR",33,0)
 .I "PF"[PXRMFD W " for ",BD," to ",ED
"RTN","PXRMXGPR",34,0)
 .I PXRMFD="A" W " admissions from ",BD," to ",ED
"RTN","PXRMXGPR",35,0)
 .I PXRMFD="C" W " for current inpatients"
"RTN","PXRMXGPR",36,0)
 I PXRMSEL'="L" W " for ",SD
"RTN","PXRMXGPR",37,0)
 W:PXRMSEL="I" !
"RTN","PXRMXGPR",38,0)
 ;
"RTN","PXRMXGPR",39,0)
 Q
"RTN","PXRMXGPR",40,0)
 ;
"RTN","PXRMXGPR",41,0)
 ;Set up literals for display
"RTN","PXRMXGPR",42,0)
LITS I PXRMSEL="I" S PXRMFLD="Individual Patients"
"RTN","PXRMXGPR",43,0)
 I PXRMSEL="P" S PXRMFLD="PCMM Provider"
"RTN","PXRMXGPR",44,0)
 I PXRMSEL="O" S PXRMFLD="OE/RR Team"
"RTN","PXRMXGPR",45,0)
 I PXRMSEL="T" S PXRMFLD="PCMM Team"
"RTN","PXRMXGPR",46,0)
 I PXRMSEL="L" D
"RTN","PXRMXGPR",47,0)
 .S PXRMFLD="Location"
"RTN","PXRMXGPR",48,0)
 .I $P(PXRMLCSC,U)="HS" S DES="Selected Hospital Locations"
"RTN","PXRMXGPR",49,0)
 .I $P(PXRMLCSC,U)="HA" S DES="All Outpatient Locations"
"RTN","PXRMXGPR",50,0)
 .I $P(PXRMLCSC,U)="HAI" S DES="All Inpatient Locations"
"RTN","PXRMXGPR",51,0)
 .I $P(PXRMLCSC,U)="CS" S DES="Selected Clinic Stops"
"RTN","PXRMXGPR",52,0)
 .I $P(PXRMLCSC,U)="CA" S DES="All Clinic Stops"
"RTN","PXRMXGPR",53,0)
 .I $P(PXRMLCSC,U)="GS" S DES="Selected Clinic Groups"
"RTN","PXRMXGPR",54,0)
 .I PXRMFD="P" S DES=DES_" (Prior Encounters)"
"RTN","PXRMXGPR",55,0)
 .I PXRMFD="F" S DES=DES_" (Future Appoints.)"
"RTN","PXRMXGPR",56,0)
 .I PXRMFD="A" S DES=DES_" (Admissions)"
"RTN","PXRMXGPR",57,0)
 .I PXRMFD="C" S DES=DES_" (Current Inpatients)"
"RTN","PXRMXGPR",58,0)
 I PXRMSEL="P" D
"RTN","PXRMXGPR",59,0)
 .I PXRMPRIM="A" S CDES="All patients on list"
"RTN","PXRMXGPR",60,0)
 .I PXRMPRIM="P" S CDES="Primary care assigned patients only"
"RTN","PXRMXGPR",61,0)
 Q
"RTN","PXRMXGPR",62,0)
 ;
"RTN","PXRMXGPR",63,0)
 ;Output the provider report criteria
"RTN","PXRMXGPR",64,0)
CRIT(PSTART) ;
"RTN","PXRMXGPR",65,0)
 N RCCNT,RCDES,RICNT,RIDES,UNDL
"RTN","PXRMXGPR",66,0)
 S UNDL=$TR($J("",79)," ","_") D LITS
"RTN","PXRMXGPR",67,0)
 W !?(PSTART-8),"Report Criteria:"
"RTN","PXRMXGPR",68,0)
 I PXRMTMP'="" W !?PSTART,"Report Title:",?32,$P(PXRMTMP,U,3)
"RTN","PXRMXGPR",69,0)
 W !?PSTART,"Patient Sample:",?32,PXRMFLD
"RTN","PXRMXGPR",70,0)
 I PXRMSEL'="L" W !,?PSTART,PXRMFLD,":" D DISP
"RTN","PXRMXGPR",71,0)
 I PXRMSEL="L" D
"RTN","PXRMXGPR",72,0)
 .W !?PSTART,PXRMFLD,":",?32,DES
"RTN","PXRMXGPR",73,0)
 .I $E(PXRMLCSC,2)'="A" W ! D DISP
"RTN","PXRMXGPR",74,0)
 I $D(PXRMRCAT) D
"RTN","PXRMXGPR",75,0)
 .S RCCNT=0
"RTN","PXRMXGPR",76,0)
 .F  S RCCNT=$O(PXRMRCAT(RCCNT)) Q:'RCCNT  D
"RTN","PXRMXGPR",77,0)
 ..S RCDES=$P(PXRMRCAT(RCCNT),U,2) D CHECK(6)
"RTN","PXRMXGPR",78,0)
 ..I RCCNT=1 W !?PSTART,"Reminder Category:",?32,RCDES
"RTN","PXRMXGPR",79,0)
 ..I RCCNT>1 W !?32,RCDES
"RTN","PXRMXGPR",80,0)
 .S RICNT=0
"RTN","PXRMXGPR",81,0)
 .F  S RICNT=$O(PXRMREM(RICNT)) Q:'RICNT  D
"RTN","PXRMXGPR",82,0)
 ..S RIDES=$P(PXRMREM(RICNT),U,2) D CHECK(6)
"RTN","PXRMXGPR",83,0)
 ..I RICNT=1 W !?PSTART,"Individual Reminder:",?32,RIDES
"RTN","PXRMXGPR",84,0)
 ..I RICNT>1 W !?32,RIDES
"RTN","PXRMXGPR",85,0)
 D CHECK(6)
"RTN","PXRMXGPR",86,0)
 I PXRMREP="D" D
"RTN","PXRMXGPR",87,0)
 .W !,?PSTART,"Reminder:",?32,RDES
"RTN","PXRMXGPR",88,0)
 .;Display future appointments for Reminder Due report only
"RTN","PXRMXGPR",89,0)
 .I PXRMRT="PXRMX" W !,?PSTART,"Appointments:" D
"RTN","PXRMXGPR",90,0)
 ..I PXRMFUT="Y" W ?32,"All Future Appointments"
"RTN","PXRMXGPR",91,0)
 ..I PXRMFUT="N" W ?32,"Next Appointment only"
"RTN","PXRMXGPR",92,0)
 I PXRMSEL="P" W !,?PSTART,"All/Primary:",?32,CDES
"RTN","PXRMXGPR",93,0)
 I PXRMSEL="L" D
"RTN","PXRMXGPR",94,0)
 .W !?PSTART,"Date Range:",?32
"RTN","PXRMXGPR",95,0)
 .I "PAF"[PXRMFD W BD," to ",ED Q
"RTN","PXRMXGPR",96,0)
 .I PXRMFD="C" W "not applicable" Q
"RTN","PXRMXGPR",97,0)
 W !?PSTART,"Effective Due Date:",?32,SD
"RTN","PXRMXGPR",98,0)
 W !?PSTART,"Date run:",?32,RD
"RTN","PXRMXGPR",99,0)
 I PXRMTMP'="" D 
"RTN","PXRMXGPR",100,0)
 .W !?PSTART,"Template Name:",?32,$P(PXRMTMP,U,2)
"RTN","PXRMXGPR",101,0)
 .I PXRMUSER D CHECK(3) W !?PSTART,"Requested by:",?32,$P(^VA(200,DUZ,0),U)
"RTN","PXRMXGPR",102,0)
 I (PXRMFCMB="Y")!(PXRMLCMB="Y") D
"RTN","PXRMXGPR",103,0)
 .N LIT
"RTN","PXRMXGPR",104,0)
 .S LIT=$S(PXRMSEL="P":"Providers","OT"[PXRMSEL:"Teams",1:"Locations")
"RTN","PXRMXGPR",105,0)
 .W !?PSTART,"Combined report:",?32
"RTN","PXRMXGPR",106,0)
 .I PXRMFCMB="Y",PXRMLCMB="Y" W "Combined Facility and Combined "_LIT
"RTN","PXRMXGPR",107,0)
 .I PXRMFCMB="Y",PXRMLCMB="N" W "Combined Facility by Individual "_LIT
"RTN","PXRMXGPR",108,0)
 .I PXRMLCMB="Y",PXRMFCMB="N" W "By Facility with Combined "_LIT
"RTN","PXRMXGPR",109,0)
 .D CHECK(3)
"RTN","PXRMXGPR",110,0)
 I PXRMREP="S","IRT"[PXRMTOT D
"RTN","PXRMXGPR",111,0)
 .N LIT1,LIT2,LIT3
"RTN","PXRMXGPR",112,0)
 .D LIT^PXRMXD
"RTN","PXRMXGPR",113,0)
 .W !?PSTART,"Summary report:",?32
"RTN","PXRMXGPR",114,0)
 .I PXRMTOT="I" W LIT1
"RTN","PXRMXGPR",115,0)
 .I PXRMTOT="R" W LIT2
"RTN","PXRMXGPR",116,0)
 .I PXRMTOT="T" W LIT3
"RTN","PXRMXGPR",117,0)
 .D CHECK(3)
"RTN","PXRMXGPR",118,0)
 I $D(PXRMSCAT),PXRMFD="P" D OSCAT(PXRMSCAT,PSTART)
"RTN","PXRMXGPR",119,0)
 W !,UNDL,!
"RTN","PXRMXGPR",120,0)
 Q
"RTN","PXRMXGPR",121,0)
 ;
"RTN","PXRMXGPR",122,0)
 ;Display selected teams/providers
"RTN","PXRMXGPR",123,0)
DISP N IC
"RTN","PXRMXGPR",124,0)
 S IC=""
"RTN","PXRMXGPR",125,0)
 I PXRMSEL="P" F  S IC=$O(PXRMPRV(IC)) Q:IC=""  D
"RTN","PXRMXGPR",126,0)
 .W:IC>1 ! W ?32,$P(PXRMPRV(IC),U,2)
"RTN","PXRMXGPR",127,0)
 .D CHECK(3)
"RTN","PXRMXGPR",128,0)
 I PXRMSEL="T" F  S IC=$O(PXRMPCM(IC)) Q:IC=""  D
"RTN","PXRMXGPR",129,0)
 .W:IC>1 ! W ?32,$P(PXRMPCM(IC),U,2)
"RTN","PXRMXGPR",130,0)
 .D CHECK(3)
"RTN","PXRMXGPR",131,0)
 I PXRMSEL="O" F  S IC=$O(PXRMOTM(IC)) Q:IC=""  D
"RTN","PXRMXGPR",132,0)
 .W:IC>1 ! W ?32,$P(PXRMOTM(IC),U,3)
"RTN","PXRMXGPR",133,0)
 .D CHECK(3)
"RTN","PXRMXGPR",134,0)
 I PXRMSEL="I" F  S IC=$O(PXRMPAT(IC)) Q:IC=""  D
"RTN","PXRMXGPR",135,0)
 .W:IC>1 ! W ?32,$P(PXRMPAT(IC),U,2)
"RTN","PXRMXGPR",136,0)
 .D CHECK(3)
"RTN","PXRMXGPR",137,0)
 I PXRMSEL="L" D
"RTN","PXRMXGPR",138,0)
 .I $E(PXRMLCSC)="H" F  S IC=$O(PXRMLCHL(IC)) Q:IC=""  D
"RTN","PXRMXGPR",139,0)
 ..W:IC>1 ! W ?32,$P(PXRMLCHL(IC),U)
"RTN","PXRMXGPR",140,0)
 ..D CHECK(3)
"RTN","PXRMXGPR",141,0)
 .I $E(PXRMLCSC)="C" F  S IC=$O(PXRMCS(IC)) Q:IC=""  D
"RTN","PXRMXGPR",142,0)
 ..W:IC>1 ! W ?32,$P(PXRMCS(IC),U)," ",$P(PXRMCS(IC),U,3)
"RTN","PXRMXGPR",143,0)
 ..D CHECK(3)
"RTN","PXRMXGPR",144,0)
 .I $E(PXRMLCSC)="G" F  S IC=$O(PXRMCGRP(IC)) Q:IC=""  D
"RTN","PXRMXGPR",145,0)
 ..W:IC>1 ! W ?32,$P(PXRMCGRP(IC),U)," ",$P(PXRMCGRP(IC),U,2)
"RTN","PXRMXGPR",146,0)
 ..D CHECK(3)
"RTN","PXRMXGPR",147,0)
 Q
"RTN","PXRMXGPR",148,0)
 ;
"RTN","PXRMXGPR",149,0)
 ;Build array of locations/providers/teams with no patients
"RTN","PXRMXGPR",150,0)
NOPATS N IC
"RTN","PXRMXGPR",151,0)
 S IC=""
"RTN","PXRMXGPR",152,0)
 I PXRMSEL="P" F  S IC=$O(PXRMPRV(IC)) Q:IC=""  D TEST(.PXRMPRV)
"RTN","PXRMXGPR",153,0)
 I PXRMSEL="T" F  S IC=$O(PXRMPCM(IC)) Q:IC=""  D TEST(.PXRMPCM)
"RTN","PXRMXGPR",154,0)
 I PXRMSEL="O" F  S IC=$O(PXRMOTM(IC)) Q:IC=""  D TEST(.PXRMOTM)
"RTN","PXRMXGPR",155,0)
 I PXRMSEL="L" D
"RTN","PXRMXGPR",156,0)
 .I $E(PXRMLCSC)="H" F  S IC=$O(PXRMLCHL(IC)) Q:IC=""  D TEST(.PXRMLCHL)
"RTN","PXRMXGPR",157,0)
 .I $E(PXRMLCSC)="C" F  S IC=$O(PXRMCS(IC)) Q:IC=""  D TEST(.PXRMCS)
"RTN","PXRMXGPR",158,0)
 .I $E(PXRMLCSC)="G" F  S IC=$O(PXRMCGRP(IC)) Q:IC=""  D TEST(.PXRMCGRP)
"RTN","PXRMXGPR",159,0)
 Q
"RTN","PXRMXGPR",160,0)
 ;
"RTN","PXRMXGPR",161,0)
 ;Output the service categories
"RTN","PXRMXGPR",162,0)
OSCAT(SCL,PSTART) ;
"RTN","PXRMXGPR",163,0)
 N IC,CSTART,EM,SC,SCTEXT
"RTN","PXRMXGPR",164,0)
 S CSTART=PSTART+3
"RTN","PXRMXGPR",165,0)
 W !,?PSTART,"Service categories:",?32,SCL
"RTN","PXRMXGPR",166,0)
 F IC=1:1:$L(SCL) D
"RTN","PXRMXGPR",167,0)
 .S SC=$E(SCL,IC,IC)
"RTN","PXRMXGPR",168,0)
 .S SCTEXT=$$EXTERNAL^DILFD(9000010,.07,"",SC,.EM)
"RTN","PXRMXGPR",169,0)
 .D CHECK(3)
"RTN","PXRMXGPR",170,0)
 .W !,?CSTART,SC," - ",SCTEXT
"RTN","PXRMXGPR",171,0)
 Q
"RTN","PXRMXGPR",172,0)
 ;
"RTN","PXRMXGPR",173,0)
 ;If necessary, write the header
"RTN","PXRMXGPR",174,0)
COL(NEWPAGE) ;
"RTN","PXRMXGPR",175,0)
 I NEWPAGE D  Q:DONE
"RTN","PXRMXGPR",176,0)
 .I PXRMTABS="N" D PAGE
"RTN","PXRMXGPR",177,0)
 .I PXRMTABS="Y" W !!
"RTN","PXRMXGPR",178,0)
 D CHECK(0) Q:DONE
"RTN","PXRMXGPR",179,0)
 D HEAD(0)
"RTN","PXRMXGPR",180,0)
 S HEAD=0
"RTN","PXRMXGPR",181,0)
 I PXRMTABS="Y" Q
"RTN","PXRMXGPR",182,0)
 I PXRMREP="D" D
"RTN","PXRMXGPR",183,0)
 .N PNAM
"RTN","PXRMXGPR",184,0)
 .S PNAM=$P(PXRMREM(1),U,4) I PNAM="" S PNAM=$P(PXRMREM(1),U,2)
"RTN","PXRMXGPR",185,0)
 .W !!,PNAM,":  ",COUNT
"RTN","PXRMXGPR",186,0)
 .W:COUNT>1 " patients have reminder "_PXRMTX
"RTN","PXRMXGPR",187,0)
 .W:COUNT=1 " patient has reminder "_PXRMTX
"RTN","PXRMXGPR",188,0)
 N IC F IC=0:1:2 W !,?PXRMT(IC),PXRMH(IC)
"RTN","PXRMXGPR",189,0)
 Q
"RTN","PXRMXGPR",190,0)
 ;
"RTN","PXRMXGPR",191,0)
 ;form feed to new page
"RTN","PXRMXGPR",192,0)
PAGE I ($E(IOST)="C")&(IO=IO(0))&(PAGE>0) D
"RTN","PXRMXGPR",193,0)
 .S DIR(0)="E"
"RTN","PXRMXGPR",194,0)
 .W !
"RTN","PXRMXGPR",195,0)
 .D ^DIR K DIR
"RTN","PXRMXGPR",196,0)
 I $D(DUOUT)!($D(DTOUT))!($D(DIROUT)) S DONE=1 Q
"RTN","PXRMXGPR",197,0)
 W:$D(IOF) @IOF
"RTN","PXRMXGPR",198,0)
 S PAGE=PAGE+1,FIRST=0
"RTN","PXRMXGPR",199,0)
 I $E(IOST)="C",IO=IO(0) W @IOF
"RTN","PXRMXGPR",200,0)
 E  W !
"RTN","PXRMXGPR",201,0)
 N TEMP,TEXTLEN
"RTN","PXRMXGPR",202,0)
 S TEMP=$$NOW^XLFDT,TEMP=$$FMTE^XLFDT(TEMP,"P")
"RTN","PXRMXGPR",203,0)
 S TEMP=TEMP_"  Page "_PAGE
"RTN","PXRMXGPR",204,0)
 S TEXTLEN=$L(TEMP)
"RTN","PXRMXGPR",205,0)
 W ?(IOM-TEXTLEN),TEMP
"RTN","PXRMXGPR",206,0)
 S TEXTLEN=$L(PXRMOPT)
"RTN","PXRMXGPR",207,0)
 I TEXTLEN>0 D
"RTN","PXRMXGPR",208,0)
 .W !!
"RTN","PXRMXGPR",209,0)
 .W ?((IOM-TEXTLEN)/2),PXRMOPT
"RTN","PXRMXGPR",210,0)
 Q
"RTN","PXRMXGPR",211,0)
 ;
"RTN","PXRMXGPR",212,0)
 ;count of patients in sample
"RTN","PXRMXGPR",213,0)
TOTAL N LIT
"RTN","PXRMXGPR",214,0)
 I PXRMTABS="Y" D  Q
"RTN","PXRMXGPR",215,0)
 .I PXRMREP="D" W !,"0"_SEP_"PATIENTS"_SEP_TOTAL_SEP_"APPLICABLE"_SEP_APPL Q
"RTN","PXRMXGPR",216,0)
 .I PXRMREP="S" W !,"0"_SEP_"PATIENTS"_SEP_TOTAL_SEP_SEP_$TR(SUB,SEP,"_") Q
"RTN","PXRMXGPR",217,0)
 I (PXRMRT="PXRMX")!(PXRMREP="S") W !
"RTN","PXRMXGPR",218,0)
 S LIT=" patient."
"RTN","PXRMXGPR",219,0)
 I TOTAL>1 S LIT=" patients."
"RTN","PXRMXGPR",220,0)
 W !,"Report run on "_TOTAL_LIT
"RTN","PXRMXGPR",221,0)
 I PXRMREP="D" D
"RTN","PXRMXGPR",222,0)
 .S LIT=" patient."
"RTN","PXRMXGPR",223,0)
 .I APPL>1 S LIT=" patients."
"RTN","PXRMXGPR",224,0)
 .W !,"Applicable to "_APPL_LIT
"RTN","PXRMXGPR",225,0)
 Q
"RTN","PXRMXGPR",226,0)
 ;
"RTN","PXRMXGPR",227,0)
 ;Null report prints if no patients found
"RTN","PXRMXGPR",228,0)
NULL I PXRMSEL="L" D
"RTN","PXRMXGPR",229,0)
 .I PXRMFD="P" W !!,"No patient visits found"
"RTN","PXRMXGPR",230,0)
 .I PXRMFD="A" W !!,"No patient admissions found"
"RTN","PXRMXGPR",231,0)
 .I PXRMFD="C" W !!,"No current inpatient found"
"RTN","PXRMXGPR",232,0)
 .I PXRMFD="F" W !!,"No patient appointments found"
"RTN","PXRMXGPR",233,0)
 I PXRMSEL="P" W !!,"No patients found for provider(s) selected"
"RTN","PXRMXGPR",234,0)
 I "OT"[PXRMSEL W !!,"No patients found for team(s) selected"
"RTN","PXRMXGPR",235,0)
 Q
"RTN","PXRMXGPR",236,0)
 ;
"RTN","PXRMXGPR",237,0)
 ;Null report if no patients due/satisfied - detailed report only
"RTN","PXRMXGPR",238,0)
NONE D PAGE
"RTN","PXRMXGPR",239,0)
 D HEAD(0)
"RTN","PXRMXGPR",240,0)
 W !!,"No patients with reminders "_PXRMTX
"RTN","PXRMXGPR",241,0)
 Q
"RTN","PXRMXGPR",242,0)
 ;
"RTN","PXRMXGPR",243,0)
 ;Report missed locations if report is partially successful
"RTN","PXRMXGPR",244,0)
MATCH(PSTART) ;
"RTN","PXRMXGPR",245,0)
 ;Delimited report from template
"RTN","PXRMXGPR",246,0)
 I PXRMTABS="Y",PXRMTMP'="" D  Q
"RTN","PXRMXGPR",247,0)
 .W !!?PSTART,"The following had no patients selected",!
"RTN","PXRMXGPR",248,0)
 .N SUB
"RTN","PXRMXGPR",249,0)
 .S SUB=""
"RTN","PXRMXGPR",250,0)
 .F  S SUB=$O(MISSED(SUB)) Q:SUB=""  D
"RTN","PXRMXGPR",251,0)
 ..W !?PSTART+10,SUB
"RTN","PXRMXGPR",252,0)
 ;Other reports
"RTN","PXRMXGPR",253,0)
 N LIT,SUB
"RTN","PXRMXGPR",254,0)
 D CHECK(5) Q:DONE
"RTN","PXRMXGPR",255,0)
 S LIT=PXRMFLD
"RTN","PXRMXGPR",256,0)
 I PXRMSEL="L",$E(PXRMLCSC)="G" S LIT="Clinic Group"
"RTN","PXRMXGPR",257,0)
 W !!?PSTART,"The following ",LIT,"(s) had no patients selected",!
"RTN","PXRMXGPR",258,0)
 S SUB=""
"RTN","PXRMXGPR",259,0)
 F  S SUB=$O(MISSED(SUB)) Q:SUB=""  D
"RTN","PXRMXGPR",260,0)
 .D CHECK(3) Q:DONE
"RTN","PXRMXGPR",261,0)
 .W !?PSTART+10,SUB
"RTN","PXRMXGPR",262,0)
 Q
"RTN","PXRMXGPR",263,0)
 ;
"RTN","PXRMXGPR",264,0)
 ;Check for match on location
"RTN","PXRMXGPR",265,0)
TEST(ARRAY) ;
"RTN","PXRMXGPR",266,0)
 N SUB
"RTN","PXRMXGPR",267,0)
 I $D(^XTMP(PXRMXTMP,"MARKED AS FOUND",IC)) Q
"RTN","PXRMXGPR",268,0)
 S MATCH=1
"RTN","PXRMXGPR",269,0)
 I PXRMSEL'="L" S SUB=$P(ARRAY(IC),U,2)
"RTN","PXRMXGPR",270,0)
 I PXRMSEL="L" S SUB=$P(ARRAY(IC),U,1)
"RTN","PXRMXGPR",271,0)
 I PXRMSEL="L",$E(PXRMLCSC)="H" D
"RTN","PXRMXGPR",272,0)
 .N HLOCIEN,FACNAM,FACNUM
"RTN","PXRMXGPR",273,0)
 .S HLOCIEN=$P(ARRAY(IC),U,2) Q:'HLOCIEN
"RTN","PXRMXGPR",274,0)
 .S FACNUM=$$FACL^PXRMXAP(HLOCIEN) Q:'FACNUM
"RTN","PXRMXGPR",275,0)
 .S FACNAM=$P($G(PXRMFACN(FACNUM)),U)
"RTN","PXRMXGPR",276,0)
 .I FACNAM'="" S SUB=SUB_" ("_FACNAM_")"
"RTN","PXRMXGPR",277,0)
 I PXRMSEL="L",$E(PXRMLCSC)="C" S SUB=SUB_" "_$P(ARRAY(IC),U,3)
"RTN","PXRMXGPR",278,0)
 I PXRMSEL="L",$E(PXRMLCSC)="G" S SUB=SUB_" "_$P(ARRAY(IC),U,2)
"RTN","PXRMXGPR",279,0)
 S MISSED(SUB)=""
"RTN","PXRMXGPR",280,0)
 Q
"RTN","PXRMXGPR",281,0)
 ;
"RTN","PXRMXGPR",282,0)
 ;Check for page throw
"RTN","PXRMXGPR",283,0)
CHECK(CNT) ;
"RTN","PXRMXGPR",284,0)
 I PXRMTABS="N",$Y>(IOSL-BMARG-CNT) D PAGE
"RTN","PXRMXGPR",285,0)
 Q
"RTN","PXRMXGUT")
0^6^B4000346
"RTN","PXRMXGUT",1,0)
PXRMXGUT ; SLC/PJH - General utilities for reminder reports;02/26/2001
"RTN","PXRMXGUT",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXGUT",3,0)
 ;
"RTN","PXRMXGUT",4,0)
 ;=======================================================================
"RTN","PXRMXGUT",5,0)
EOR ;End of report display.
"RTN","PXRMXGUT",6,0)
 I $E(IOST)="C",IO=IO(0) D
"RTN","PXRMXGUT",7,0)
 . S DIR(0)="EA"
"RTN","PXRMXGUT",8,0)
 . S DIR("A")="End of the report. Press ENTER/RETURN to continue..."
"RTN","PXRMXGUT",9,0)
 . W !
"RTN","PXRMXGUT",10,0)
 . D ^DIR K DIR
"RTN","PXRMXGUT",11,0)
 Q
"RTN","PXRMXGUT",12,0)
 ;
"RTN","PXRMXGUT",13,0)
 ;=======================================================================
"RTN","PXRMXGUT",14,0)
EXIT ;Clean things up.
"RTN","PXRMXGUT",15,0)
 D ^%ZISC
"RTN","PXRMXGUT",16,0)
 D HOME^%ZIS
"RTN","PXRMXGUT",17,0)
 K IO("Q")
"RTN","PXRMXGUT",18,0)
 K DIRUT,DTOUT,DUOUT,POP,ZTREQ
"RTN","PXRMXGUT",19,0)
 I $D(ZTSK) D KILL^%ZTLOAD
"RTN","PXRMXGUT",20,0)
 K ZTSK,ZTQUEUED
"RTN","PXRMXGUT",21,0)
 K ^TMP(PXRMXTMP)
"RTN","PXRMXGUT",22,0)
 K ^XTMP(PXRMXTMP)
"RTN","PXRMXGUT",23,0)
 K ^TMP($J)
"RTN","PXRMXGUT",24,0)
 K ^TMP("PXRMX",$J)
"RTN","PXRMXGUT",25,0)
 Q
"RTN","PXRMXGUT",26,0)
 ;
"RTN","PXRMXGUT",27,0)
 ;=======================================================================
"RTN","PXRMXGUT",28,0)
VLIST(SLIST,LIST,MESSAGE) ;Make sure all the elements of LIST are in
"RTN","PXRMXGUT",29,0)
 ;SLIST.  If they are, then LIST is valid.  The elements of LIST can be
"RTN","PXRMXGUT",30,0)
 ;separated by commas and spaces.
"RTN","PXRMXGUT",31,0)
 N IC,LE,LEN,VALID
"RTN","PXRMXGUT",32,0)
 S LIST=$TR(LIST,",","")
"RTN","PXRMXGUT",33,0)
 S LIST=$TR(LIST," ","")
"RTN","PXRMXGUT",34,0)
 ;Make the test case insensitive.
"RTN","PXRMXGUT",35,0)
 S SLIST=$$UP^XLFSTR(SLIST)
"RTN","PXRMXGUT",36,0)
 S LIST=$$UP^XLFSTR(LIST)
"RTN","PXRMXGUT",37,0)
 S VALID=1
"RTN","PXRMXGUT",38,0)
 S LEN=$L(LIST)
"RTN","PXRMXGUT",39,0)
 I LEN=0 D
"RTN","PXRMXGUT",40,0)
 . W !,"The list is empty!"
"RTN","PXRMXGUT",41,0)
 . S VALID=0
"RTN","PXRMXGUT",42,0)
 F IC=1:1:LEN D
"RTN","PXRMXGUT",43,0)
 . S LE=$E(LIST,IC,IC)
"RTN","PXRMXGUT",44,0)
 . I SLIST'[LE D
"RTN","PXRMXGUT",45,0)
 .. W !,LE,MESSAGE
"RTN","PXRMXGUT",46,0)
 .. S VALID=0
"RTN","PXRMXGUT",47,0)
 Q VALID
"RTN","PXRMXGUT",48,0)
 ;
"RTN","PXRMXGUT",49,0)
 ;=======================================================================
"RTN","PXRMXGUT",50,0)
USTRINS(STRING,CHAR) ;Given a string, which is assumed to be in alphabetical
"RTN","PXRMXGUT",51,0)
 ;order and a character which is not already in the string insert the
"RTN","PXRMXGUT",52,0)
 ;character into the string in alphabetical order. For example:
"RTN","PXRMXGUT",53,0)
 ;STRING CHAR RETURNS
"RTN","PXRMXGUT",54,0)
 ;CEQ     A    ACEQ
"RTN","PXRMXGUT",55,0)
 ;CEQ     E    CEQ
"RTN","PXRMXGUT",56,0)
 ;CEQ     F    CEFQ
"RTN","PXRMXGUT",57,0)
 ;CEQ     T    CEQT
"RTN","PXRMXGUT",58,0)
 ;
"RTN","PXRMXGUT",59,0)
 N CH1,CH2,DONE,IC,LEN,STR
"RTN","PXRMXGUT",60,0)
 S LEN=$L(STRING)
"RTN","PXRMXGUT",61,0)
 ;Special case of empty STRING.
"RTN","PXRMXGUT",62,0)
 I LEN=0 Q CHAR
"RTN","PXRMXGUT",63,0)
 ;
"RTN","PXRMXGUT",64,0)
 S DONE=0
"RTN","PXRMXGUT",65,0)
 S STR=""
"RTN","PXRMXGUT",66,0)
 S CH1=$E(STRING,1,1)
"RTN","PXRMXGUT",67,0)
 I (CH1]CHAR) S STR=STR_CHAR_CH1,DONE=1
"RTN","PXRMXGUT",68,0)
 E  S STR=STR_CH1
"RTN","PXRMXGUT",69,0)
 I CH1=CHAR S DONE=1
"RTN","PXRMXGUT",70,0)
 ;
"RTN","PXRMXGUT",71,0)
 ;Special case of STRING of length 1.
"RTN","PXRMXGUT",72,0)
 I (LEN=1)&('DONE) S STR=STR_CHAR,DONE=1
"RTN","PXRMXGUT",73,0)
 ;
"RTN","PXRMXGUT",74,0)
 F IC=2:1:LEN D
"RTN","PXRMXGUT",75,0)
 . S CH2=$E(STRING,IC,IC)
"RTN","PXRMXGUT",76,0)
 . I DONE S STR=STR_CH2
"RTN","PXRMXGUT",77,0)
 . E  D
"RTN","PXRMXGUT",78,0)
 .. I (CHAR]CH1)&(CH2]CHAR) S STR=STR_CHAR_CH2,DONE=1
"RTN","PXRMXGUT",79,0)
 .. E  S STR=STR_CH2
"RTN","PXRMXGUT",80,0)
 .. I CH2=CHAR S DONE=1
"RTN","PXRMXGUT",81,0)
 .. S CH1=CH2
"RTN","PXRMXGUT",82,0)
 ;
"RTN","PXRMXGUT",83,0)
 ;If we made it all the way through the loop and we are still not
"RTN","PXRMXGUT",84,0)
 ;done then append CHAR.
"RTN","PXRMXGUT",85,0)
 I ('DONE) S STR=STR_CHAR
"RTN","PXRMXGUT",86,0)
 Q STR
"RTN","PXRMXGUT",87,0)
 ;
"RTN","PXRMXPR")
0^7^B72167346
"RTN","PXRMXPR",1,0)
PXRMXPR ; SLC/PJH - Print Reminder Due report. ;01/09/2002
"RTN","PXRMXPR",2,0)
 ;;1.5;CLINICAL REMINDERS;**2,6**;Jun 19, 2000
"RTN","PXRMXPR",3,0)
 ;
"RTN","PXRMXPR",4,0)
 ; Called/Jobbed after PXRMXSE
"RTN","PXRMXPR",5,0)
 ;
"RTN","PXRMXPR",6,0)
START N BMARG,CRITERIA,C1S,C2S,C3S,C1HS,C2HS,C3HS,DONE,HEAD
"RTN","PXRMXPR",7,0)
 N INDENT,PAGE,MOD,DES,ADES,CDES,RDES,SDES,MATCH,MISSED,SEP
"RTN","PXRMXPR",8,0)
 ;
"RTN","PXRMXPR",9,0)
 N PXRMOPT,PXRMFLD,PXRMHDR,PXRMHDRS,PXRMT,PXRMH
"RTN","PXRMXPR",10,0)
 N BD,ED,SD,RD
"RTN","PXRMXPR",11,0)
 ;
"RTN","PXRMXPR",12,0)
 N PXRMTX
"RTN","PXRMXPR",13,0)
 S PXRMTX="due"
"RTN","PXRMXPR",14,0)
 ;
"RTN","PXRMXPR",15,0)
 I PXRMREP="D" D
"RTN","PXRMXPR",16,0)
 .S EMPCHK=$P($G(^PXRM(800,1,"TRUNCATE EMPLOYEE SSN")),U)
"RTN","PXRMXPR",17,0)
 .I EMPCHK="" S EMPCHK="Y"
"RTN","PXRMXPR",18,0)
 ;
"RTN","PXRMXPR",19,0)
 ; Format Date Range
"RTN","PXRMXPR",20,0)
 I PXRMSEL="L" D
"RTN","PXRMXPR",21,0)
 .S BD=$$FMTE^XLFDT(PXRMBDT,"5D")
"RTN","PXRMXPR",22,0)
 .S ED=$$FMTE^XLFDT(PXRMEDT,"5D")
"RTN","PXRMXPR",23,0)
 ; Format due effective date
"RTN","PXRMXPR",24,0)
 S SD=$$FMTE^XLFDT(PXRMSDT,"5D")
"RTN","PXRMXPR",25,0)
 ; Format run date
"RTN","PXRMXPR",26,0)
 S RD=$$FMTE^XLFDT(PXRMXST,"5P")
"RTN","PXRMXPR",27,0)
 ;
"RTN","PXRMXPR",28,0)
 U IO
"RTN","PXRMXPR",29,0)
 S DONE=0,MATCH=0,SEP=" "
"RTN","PXRMXPR",30,0)
 ;
"RTN","PXRMXPR",31,0)
 ;Condensed report
"RTN","PXRMXPR",32,0)
 I PXRMTABS="Y" D
"RTN","PXRMXPR",33,0)
 .I PXRMTABC="C" S SEP=","
"RTN","PXRMXPR",34,0)
 .I PXRMTABC="M" S SEP=";"
"RTN","PXRMXPR",35,0)
 .I PXRMTABC="S" S SEP=" "
"RTN","PXRMXPR",36,0)
 .I PXRMTABC="T" S SEP=$C(9)
"RTN","PXRMXPR",37,0)
 .I PXRMTABC="U" S SEP="^"
"RTN","PXRMXPR",38,0)
 ;
"RTN","PXRMXPR",39,0)
 ;Setup initial formatting parameters.
"RTN","PXRMXPR",40,0)
 S INDENT=3
"RTN","PXRMXPR",41,0)
 S BMARG=2,PAGE=0,HEAD=1
"RTN","PXRMXPR",42,0)
 ;
"RTN","PXRMXPR",43,0)
 ;
"RTN","PXRMXPR",44,0)
 I +$G(XQY)>0 N XQOPT D OP^XQCHK
"RTN","PXRMXPR",45,0)
 S PXRMOPT=$P($G(XQOPT),U,2)
"RTN","PXRMXPR",46,0)
 I ($L(PXRMOPT)>0)&(PXRMOPT'["Clinical") S PXRMOPT="Clinical "_PXRMOPT
"RTN","PXRMXPR",47,0)
 I PXRMREP="D" D
"RTN","PXRMXPR",48,0)
 .S RDES=$P(REMINDER(1),U,2)
"RTN","PXRMXPR",49,0)
 .S PXRMOPT=PXRMOPT_" - Detailed Report"
"RTN","PXRMXPR",50,0)
 .N IC F IC=0,3,4 S PXRMH(IC)="",PXRMT(IC)=0
"RTN","PXRMXPR",51,0)
 .S PXRMH(1)="Date Due    Last Done   Next Appt"
"RTN","PXRMXPR",52,0)
 .S PXRMH(2)="--------    ---------   ---------"
"RTN","PXRMXPR",53,0)
 .I $G(PXRMINP) D
"RTN","PXRMXPR",54,0)
 ..S PXRMH(1)="Date Due    Last Done   Ward/Bed"
"RTN","PXRMXPR",55,0)
 ..S PXRMH(2)="--------    ---------   --------"
"RTN","PXRMXPR",56,0)
 .F IC=1,2 S PXRMT(IC)=40
"RTN","PXRMXPR",57,0)
 .S ADES="Next Appointment only"
"RTN","PXRMXPR",58,0)
 .I PXRMFUT="Y" S ADES="All Future Appointments"
"RTN","PXRMXPR",59,0)
 .S SDES="Sorted by Patient Name"
"RTN","PXRMXPR",60,0)
 .I PXRMSRT="Y" S SDES="Sorted by Appointment Date"
"RTN","PXRMXPR",61,0)
 I PXRMREP="S" D
"RTN","PXRMXPR",62,0)
 .S PXRMOPT=PXRMOPT_" - Summary Report"
"RTN","PXRMXPR",63,0)
 .S PXRMH(0)="# Patients with Reminders",PXRMT(0)=50
"RTN","PXRMXPR",64,0)
 .S PXRMH(1)="Applicable           Due"
"RTN","PXRMXPR",65,0)
 .S PXRMH(2)="----------           ---"
"RTN","PXRMXPR",66,0)
 .N IC F IC=1,2 S PXRMT(IC)=50
"RTN","PXRMXPR",67,0)
 .S PXRMH(3)="Denominator"
"RTN","PXRMXPR",68,0)
 .S PXRMH(4)="-----------"
"RTN","PXRMXPR",69,0)
 .F IC=3,4 S PXRMT(IC)=0
"RTN","PXRMXPR",70,0)
 ;
"RTN","PXRMXPR",71,0)
 ;Print Criteria Page if normal report
"RTN","PXRMXPR",72,0)
 S CRITERIA=0 I PXRMTABS="N" S CRITERIA=1
"RTN","PXRMXPR",73,0)
 ;or delimited report with notemplate
"RTN","PXRMXPR",74,0)
 I PXRMTABS="Y",PXRMTMP="" S CRITERIA=1
"RTN","PXRMXPR",75,0)
 ;
"RTN","PXRMXPR",76,0)
 ;Build array of locations/providers with no patients selected
"RTN","PXRMXPR",77,0)
 D NOPATS^PXRMXGPR
"RTN","PXRMXPR",78,0)
 ;
"RTN","PXRMXPR",79,0)
 ;Print either criteria page or summary header
"RTN","PXRMXPR",80,0)
 I CRITERIA D  G:DONE EXIT
"RTN","PXRMXPR",81,0)
 .D PAGE^PXRMXGPR Q:DONE
"RTN","PXRMXPR",82,0)
 .D CRIT^PXRMXGPR(10) Q:DONE
"RTN","PXRMXPR",83,0)
 ;Header if delimited output from a template
"RTN","PXRMXPR",84,0)
 I 'CRITERIA D
"RTN","PXRMXPR",85,0)
 .N HDR1,HDR2,HDR3
"RTN","PXRMXPR",86,0)
 .S HDR1="",HDR2="",HDR3=""
"RTN","PXRMXPR",87,0)
 .I PXRMTMP]"" S HDR1="TITLE:"_$P(PXRMTMP,U,2)_U_"TEMPLATE:"_$P(PXRMTMP,U,3)
"RTN","PXRMXPR",88,0)
 .I PXRMTMP="" D
"RTN","PXRMXPR",89,0)
 ..N PXRMFLD,DES,CDES D LITS^PXRMXGPR S HDR1=PXRMFLD_U_$G(DES)_U_$G(CDES)
"RTN","PXRMXPR",90,0)
 .I PXRMSEL="L" S HDR2="START:"_BD_U_"END:"_ED
"RTN","PXRMXPR",91,0)
 .S HDR2=HDR2_U_"RUN:"_RD
"RTN","PXRMXPR",92,0)
 .I PXRMFCMB="Y" S HDR3="COMBINED FACILITY"
"RTN","PXRMXPR",93,0)
 .I PXRMLCMB="Y" S $P(HDR3,SEP,2)="COMBINED LOCATION"
"RTN","PXRMXPR",94,0)
 .I PXRMREP="S" D
"RTN","PXRMXPR",95,0)
 ..N LIT1,LIT2,LIT3
"RTN","PXRMXPR",96,0)
 ..D LIT^PXRMXD
"RTN","PXRMXPR",97,0)
 ..I PXRMTOT="I" S $P(HDR3,SEP,3)=$$UP^XLFSTR(LIT1)
"RTN","PXRMXPR",98,0)
 ..I PXRMTOT="R" S $P(HDR3,SEP,3)=$$UP^XLFSTR(LIT2)
"RTN","PXRMXPR",99,0)
 ..I PXRMTOT="T" S $P(HDR3,SEP,3)=$$UP^XLFSTR(LIT3)
"RTN","PXRMXPR",100,0)
 .W !,HDR1,!,HDR2,!,HDR3,!
"RTN","PXRMXPR",101,0)
 ;
"RTN","PXRMXPR",102,0)
 ;Kill items marked as found
"RTN","PXRMXPR",103,0)
 K ^XTMP(PXRMXTMP,"MARKED AS FOUND")
"RTN","PXRMXPR",104,0)
 ;
"RTN","PXRMXPR",105,0)
 ;Setup the final formatting parameters.
"RTN","PXRMXPR",106,0)
 S C1HS=INDENT+3
"RTN","PXRMXPR",107,0)
 S C1S=0
"RTN","PXRMXPR",108,0)
 S C2HS=C1S+2
"RTN","PXRMXPR",109,0)
 S C2S=C2HS
"RTN","PXRMXPR",110,0)
 S C3HS=C2HS+5
"RTN","PXRMXPR",111,0)
 S C3S=C3HS
"RTN","PXRMXPR",112,0)
 S HEAD=1
"RTN","PXRMXPR",113,0)
 S INDENT=10
"RTN","PXRMXPR",114,0)
 ;
"RTN","PXRMXPR",115,0)
 ; Update last run date 
"RTN","PXRMXPR",116,0)
 I $G(PXRMTMP)'="" D UPD^PXRMXTU
"RTN","PXRMXPR",117,0)
 ;
"RTN","PXRMXPR",118,0)
 ; Get report detail from ^XTMP
"RTN","PXRMXPR",119,0)
 N PNAM,SUB,DFN,BID,NAM,FAC,MOD,SRT,TOTAL,APPL,FACPNAME,PX
"RTN","PXRMXPR",120,0)
 ; Set subroutine label from report format
"RTN","PXRMXPR",121,0)
 S MOD="SUMARY" I PXRMREP="D" S MOD="DETAIL"
"RTN","PXRMXPR",122,0)
 ;
"RTN","PXRMXPR",123,0)
 S FAC=0,PX="PXRM"
"RTN","PXRMXPR",124,0)
 F  S FAC=$O(^XTMP(PXRMXTMP,PX,FAC)) Q:FAC=""  Q:DONE  D
"RTN","PXRMXPR",125,0)
 .;Get facility name for Location and PCMM team report
"RTN","PXRMXPR",126,0)
 .I "TL"[PXRMSEL,PXRMFCMB="N" D
"RTN","PXRMXPR",127,0)
 ..S FACPNAME=$P(PXRMFACN(FAC),U,1)_"  "_$P(PXRMFACN(FAC),U,2)
"RTN","PXRMXPR",128,0)
 .;Report from ^XTMP - label MOD is DETAIL/SUMARY
"RTN","PXRMXPR",129,0)
 .S (PNAM,SUB,NAM,SRT)=""
"RTN","PXRMXPR",130,0)
 .I PXRMSEL="I" S SUB="PATIENT" D @MOD Q:DONE
"RTN","PXRMXPR",131,0)
 .I PXRMSEL'="I" D
"RTN","PXRMXPR",132,0)
 ..;Sort internal IENs into alpha order
"RTN","PXRMXPR",133,0)
 ..D XSORT
"RTN","PXRMXPR",134,0)
 ..F  S SRT=$O(^TMP($J,"SORT",SRT)) Q:SRT=""  Q:DONE  D
"RTN","PXRMXPR",135,0)
 ...S SUB=$G(^TMP($J,"SORT",SRT)) D @MOD
"RTN","PXRMXPR",136,0)
 ..I MOD="SUMARY","RT"[PXRMTOT S SUB="TOTAL" D @MOD
"RTN","PXRMXPR",137,0)
 ;
"RTN","PXRMXPR",138,0)
 ; Null report if no patients selected
"RTN","PXRMXPR",139,0)
 I ('DONE),$O(^XTMP(PXRMXTMP,PX,""))="" D NULL^PXRMXGPR G EXIT
"RTN","PXRMXPR",140,0)
 ; Report selected patient sample with no patients
"RTN","PXRMXPR",141,0)
 I MATCH D MATCH^PXRMXGPR(0)
"RTN","PXRMXPR",142,0)
 ;
"RTN","PXRMXPR",143,0)
EXIT D EXIT^PXRMXGUT
"RTN","PXRMXPR",144,0)
 ;
"RTN","PXRMXPR",145,0)
 ;Allow the task to be cleaned up upon successful completion.
"RTN","PXRMXPR",146,0)
 S ZTREQ="@"
"RTN","PXRMXPR",147,0)
 ;
"RTN","PXRMXPR",148,0)
 D EOR^PXRMXGUT
"RTN","PXRMXPR",149,0)
 Q
"RTN","PXRMXPR",150,0)
 ;
"RTN","PXRMXPR",151,0)
 ;Report by Patient
"RTN","PXRMXPR",152,0)
DETAIL N JJ,VA,DATE,COUNT,DDAT,EMP
"RTN","PXRMXPR",153,0)
 ;
"RTN","PXRMXPR",154,0)
 N BED,DDUE,DDONE,DNEXT,FDAT1,FDAT2,FDAT3,FNAM,FTXT
"RTN","PXRMXPR",155,0)
 ;
"RTN","PXRMXPR",156,0)
 S NAM=$G(^XTMP(PXRMXTMP,PX,FAC,SUB)),HEAD=1
"RTN","PXRMXPR",157,0)
 S COUNT=$P(NAM,U,2),TOTAL=$P(NAM,U,3),APPL=$P(NAM,U,4),NAM=$P(NAM,U,1)
"RTN","PXRMXPR",158,0)
 S DDAT="",JJ=0
"RTN","PXRMXPR",159,0)
 ; Get list of patients for each appointment date
"RTN","PXRMXPR",160,0)
 F  S DDAT=$O(^XTMP(PXRMXTMP,PX,FAC,SUB,DDAT)) Q:DDAT=""  Q:DONE  D PAT
"RTN","PXRMXPR",161,0)
 ;
"RTN","PXRMXPR",162,0)
 ; No patients due
"RTN","PXRMXPR",163,0)
 I JJ=0 D:'DONE NONE^PXRMXGPR
"RTN","PXRMXPR",164,0)
 ; Total patients
"RTN","PXRMXPR",165,0)
 D:'DONE TOTAL^PXRMXGPR
"RTN","PXRMXPR",166,0)
 Q
"RTN","PXRMXPR",167,0)
 ;
"RTN","PXRMXPR",168,0)
 ;Extract and print patient detail
"RTN","PXRMXPR",169,0)
PAT F  S PNAM=$O(^XTMP(PXRMXTMP,PX,FAC,SUB,DDAT,PNAM)) Q:PNAM=""  Q:DONE  D
"RTN","PXRMXPR",170,0)
 .S JJ=JJ+1
"RTN","PXRMXPR",171,0)
 .;Format print line
"RTN","PXRMXPR",172,0)
 .S (BID,FDAT1,FDAT2,FDAT3)="" I PNAM'["No patients found" D 
"RTN","PXRMXPR",173,0)
 ..S FDAT2="N/A",FDAT3="None"
"RTN","PXRMXPR",174,0)
 ..S DFN=$G(^XTMP(PXRMXTMP,PX,FAC,SUB,DDAT,PNAM))
"RTN","PXRMXPR",175,0)
 ..S DDUE=$P(DFN,U,2),DDONE=$P(DFN,U,3),DNEXT=$P(DFN,U,4)
"RTN","PXRMXPR",176,0)
 ..I $G(PXRMINP) S BED=$P(DFN,U,5)
"RTN","PXRMXPR",177,0)
 ..S DFN=$P(DFN,U)
"RTN","PXRMXPR",178,0)
 ..S BID=$P($G(^XTMP("PXRMDFN"_DFN,"SSN")),U,2)
"RTN","PXRMXPR",179,0)
 ..I BID="" N VA,VAERR D PID^VADPT S BID=$G(VA("PID"))
"RTN","PXRMXPR",180,0)
 ..I PXRMSSN="N" S BID=$P(BID,"-",3)
"RTN","PXRMXPR",181,0)
 ..I PXRMSSN="Y",EMPCHK="Y" D EMP S:EMP BID=$P(BID,"-",3)
"RTN","PXRMXPR",182,0)
 ..S BID="("_BID_")"
"RTN","PXRMXPR",183,0)
 ..S FDAT1=$$FMTE^XLFDT(DDUE,"5D")
"RTN","PXRMXPR",184,0)
 ..I DDONE S FDAT2=$$FMTE^XLFDT(DDONE,"5D")
"RTN","PXRMXPR",185,0)
 ..I DNEXT S FDAT3=$$FMTE^XLFDT(DNEXT,"5D")
"RTN","PXRMXPR",186,0)
 .;Print
"RTN","PXRMXPR",187,0)
 .D CHECK Q:DONE
"RTN","PXRMXPR",188,0)
 .;Normal output
"RTN","PXRMXPR",189,0)
 .I PXRMTABS="N" D
"RTN","PXRMXPR",190,0)
 ..W !,JJ,?5,$E(PNAM,1,33-$L(BID))," ",BID,?40,FDAT1,?52,FDAT2
"RTN","PXRMXPR",191,0)
 ..I ('$G(PXRMINP)),PXRMFUT'="Y" W ?64,FDAT3
"RTN","PXRMXPR",192,0)
 ..I $G(PXRMINP) W ?64,BED
"RTN","PXRMXPR",193,0)
 .;Condensed report
"RTN","PXRMXPR",194,0)
 .I PXRMTABS="Y" D
"RTN","PXRMXPR",195,0)
 ..N FNAM
"RTN","PXRMXPR",196,0)
 ..S FNAM=PNAM
"RTN","PXRMXPR",197,0)
 ..I FNAM'["No patients found" S FNAM=$E(FNAM,1,33-$L(BID))_" "_BID
"RTN","PXRMXPR",198,0)
 ..I "CES"[PXRMTABC S FNAM=$TR(FNAM,SEP,"_"),FDAT1=$TR(FDAT1,SEP,"_")
"RTN","PXRMXPR",199,0)
 ..W !,JJ_SEP_FNAM_SEP_FDAT1_SEP_FDAT2 I $G(PXRMINP) W SEP_BED
"RTN","PXRMXPR",200,0)
 ..I ('$G(PXRMINP)),PXRMFUT'="Y" W SEP_FDAT3
"RTN","PXRMXPR",201,0)
 .;---
"RTN","PXRMXPR",202,0)
 .; Future Appointments
"RTN","PXRMXPR",203,0)
 .I PXRMFUT="Y" D
"RTN","PXRMXPR",204,0)
 ..D SDA^VADPT
"RTN","PXRMXPR",205,0)
 ..N SUB,ADAT,ALOC,ATYP,FIRST,NONE
"RTN","PXRMXPR",206,0)
 ..S SUB=0,NONE=1,FIRST=1
"RTN","PXRMXPR",207,0)
 ..F  S SUB=$O(^UTILITY("VASD",$J,SUB)) Q:SUB=""  D
"RTN","PXRMXPR",208,0)
 ...S ADAT=$P(^UTILITY("VASD",$J,SUB,"I"),U)
"RTN","PXRMXPR",209,0)
 ...S ALOC=$P(^UTILITY("VASD",$J,SUB,"E"),U,2)
"RTN","PXRMXPR",210,0)
 ...S ATYP=$P(^UTILITY("VASD",$J,SUB,"E"),U,3)
"RTN","PXRMXPR",211,0)
 ...S ADAT=$$FMTE^XLFDT(ADAT,"5")
"RTN","PXRMXPR",212,0)
 ...I FIRST,PXRMTABS="N" D  S FIRST=0,NONE=0
"RTN","PXRMXPR",213,0)
 ....I PXRMTABS="N" W ?64,"See Below"
"RTN","PXRMXPR",214,0)
 ....I PXRMTABS="Y",PXRMTABC="U" W SEP_"See Below"
"RTN","PXRMXPR",215,0)
 ....I PXRMTABS="Y","CES"[PXRMTABC W SEP_"See_Below"
"RTN","PXRMXPR",216,0)
 ...D CHECK
"RTN","PXRMXPR",217,0)
 ...I PXRMTABS="N" W !,ADAT,?18,$E(ALOC,1,25),?58,$E(ATYP,1,21)
"RTN","PXRMXPR",218,0)
 ...I PXRMTABS="Y" W !,ADAT_SEP_$E(ALOC,1,25)_SEP_$E(ATYP,1,21)
"RTN","PXRMXPR",219,0)
 ..I NONE,PXRMTABS="N" W ?64,FDAT3
"RTN","PXRMXPR",220,0)
 ..I NONE,PXRMTABS="Y" W SEP_FDAT3
"RTN","PXRMXPR",221,0)
 ..K ^UTILITY("VASD",$J)
"RTN","PXRMXPR",222,0)
 Q
"RTN","PXRMXPR",223,0)
 ;
"RTN","PXRMXPR",224,0)
 ;Summary by Reminder
"RTN","PXRMXPR",225,0)
SUMARY N JJ,EVAL,DUE,RNAM,RNUM,ITEM,COUNT,FTXT
"RTN","PXRMXPR",226,0)
 ;
"RTN","PXRMXPR",227,0)
 S NAM=$G(^XTMP(PXRMXTMP,PX,FAC,SUB)),HEAD=1
"RTN","PXRMXPR",228,0)
 S TOTAL=$P(NAM,U,3),COUNT=$P(NAM,U,2),NAM=$P(NAM,U,1)
"RTN","PXRMXPR",229,0)
 S RNUM=$O(REMINDER(""),-1)
"RTN","PXRMXPR",230,0)
 ;Get reminders in alpha order
"RTN","PXRMXPR",231,0)
 F JJ=1:1:RNUM D  Q:DONE
"RTN","PXRMXPR",232,0)
 .S ITEM=$P(REMINDER(JJ),U,1),RNAM=$P(REMINDER(JJ),U,4)
"RTN","PXRMXPR",233,0)
 .S:RNAM="" RNAM=$P(REMINDER(JJ),U,2)
"RTN","PXRMXPR",234,0)
 .; zero lines will be printed 
"RTN","PXRMXPR",235,0)
 .S DUE=$G(^XTMP(PXRMXTMP,PX,FAC,SUB,ITEM))
"RTN","PXRMXPR",236,0)
 .S EVAL=+$P(DUE,U,1),DUE=+$P(DUE,U,2)
"RTN","PXRMXPR",237,0)
 .;Print
"RTN","PXRMXPR",238,0)
 .D CHECK Q:DONE
"RTN","PXRMXPR",239,0)
 .;Normal Report
"RTN","PXRMXPR",240,0)
 .I PXRMTABS="N" W !,JJ,?5,RNAM,?48,$J(EVAL,10),?63,$J(DUE,10)
"RTN","PXRMXPR",241,0)
 .;Condensed Report
"RTN","PXRMXPR",242,0)
 .I PXRMTABS="Y" D
"RTN","PXRMXPR",243,0)
 ..I "CES"[PXRMTABC S RNAM=$TR(RNAM,SEP,"_")
"RTN","PXRMXPR",244,0)
 ..W !,JJ_SEP_RNAM_SEP_EVAL_SEP_DUE_SEP_$TR(SUB,SEP,"_")
"RTN","PXRMXPR",245,0)
 D:'DONE TOTAL^PXRMXGPR
"RTN","PXRMXPR",246,0)
 Q
"RTN","PXRMXPR",247,0)
 ;
"RTN","PXRMXPR",248,0)
 ;Check line count before writing line
"RTN","PXRMXPR",249,0)
CHECK I ((PXRMTABS="N")&($Y>(IOSL-BMARG-3)))!(HEAD=1) D COL^PXRMXGPR(1)
"RTN","PXRMXPR",250,0)
 Q
"RTN","PXRMXPR",251,0)
 ;
"RTN","PXRMXPR",252,0)
 ;Check if employee
"RTN","PXRMXPR",253,0)
EMP N VAEL
"RTN","PXRMXPR",254,0)
 D ELIG^VADPT
"RTN","PXRMXPR",255,0)
 ;Check TYPE (#391) field
"RTN","PXRMXPR",256,0)
 I $P($G(VAEL(6)),U,2)="EMPLOYEE" S EMP=1 Q
"RTN","PXRMXPR",257,0)
 ;Check PATIENT ELIGABILITY (#361) field
"RTN","PXRMXPR",258,0)
 N ELIG
"RTN","PXRMXPR",259,0)
 S ELIG=0,EMP=0
"RTN","PXRMXPR",260,0)
 F  S ELIG=$O(VAEL(1,ELIG)) Q:'ELIG  D  Q:EMP
"RTN","PXRMXPR",261,0)
 .I $P($G(VAEL(1,ELIG)),U,2)="EMPLOYEE" S EMP=1
"RTN","PXRMXPR",262,0)
 Q
"RTN","PXRMXPR",263,0)
 ;
"RTN","PXRMXPR",264,0)
 ;Sort internal numbers into Alpha order
"RTN","PXRMXPR",265,0)
XSORT N SUB,NAM
"RTN","PXRMXPR",266,0)
 K ^TMP($J,"SORT")
"RTN","PXRMXPR",267,0)
 S SUB=""
"RTN","PXRMXPR",268,0)
 F  S SUB=$O(^XTMP(PXRMXTMP,PX,FAC,SUB)) Q:SUB=""  D
"RTN","PXRMXPR",269,0)
 .Q:SUB="TOTAL"
"RTN","PXRMXPR",270,0)
 .S NAM=$P(^XTMP(PXRMXTMP,PX,FAC,SUB),U)
"RTN","PXRMXPR",271,0)
 .I NAM="" S NAM=SUB
"RTN","PXRMXPR",272,0)
 .S ^TMP($J,"SORT",NAM)=SUB
"RTN","PXRMXPR",273,0)
 Q
"RTN","PXRMXQUE")
0^8^B628112
"RTN","PXRMXQUE",1,0)
PXRMXQUE ; SLC/PJH - Reminder reports general queuing routine.;01/12/2002
"RTN","PXRMXQUE",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXQUE",3,0)
 ;
"RTN","PXRMXQUE",4,0)
QUE(DESC,IODEV,ROUTINE,SAVE) ;Queue a task.
"RTN","PXRMXQUE",5,0)
 ;
"RTN","PXRMXQUE",6,0)
 N ZTSAVE,ZTRTN,ZTIO,ZTDESC
"RTN","PXRMXQUE",7,0)
 D @SAVE
"RTN","PXRMXQUE",8,0)
 S ZTDESC=DESC
"RTN","PXRMXQUE",9,0)
 S ZTIO=IODEV
"RTN","PXRMXQUE",10,0)
 S ZTRTN=ROUTINE
"RTN","PXRMXQUE",11,0)
 D ^%ZTLOAD
"RTN","PXRMXQUE",12,0)
 I $D(ZTSK)=0 W !!,DESC," cancelled"
"RTN","PXRMXQUE",13,0)
 E  W !!,DESC," has been queued, task number ",ZTSK
"RTN","PXRMXQUE",14,0)
 Q $G(ZTSK)
"RTN","PXRMXQUE",15,0)
 ;
"RTN","PXRMXQUE",16,0)
 ;=======================================================================
"RTN","PXRMXQUE",17,0)
REQUE(DESC,ROUTINE,TASK) ;Reque a task.
"RTN","PXRMXQUE",18,0)
 N ZTSAVE,ZTRTN,ZTIO,ZTDESC
"RTN","PXRMXQUE",19,0)
 S ZTDESC=DESC
"RTN","PXRMXQUE",20,0)
 S ZTRTN=ROUTINE
"RTN","PXRMXQUE",21,0)
 S ZTSK=TASK
"RTN","PXRMXQUE",22,0)
 D REQ^%ZTLOAD
"RTN","PXRMXQUE",23,0)
 Q
"RTN","PXRMXS1")
0^9^B7929922
"RTN","PXRMXS1",1,0)
PXRMXS1 ; SLC/PJH - Reminder Reports DIC Prompts;10/11/2001
"RTN","PXRMXS1",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXS1",3,0)
 ;
"RTN","PXRMXS1",4,0)
 ;
"RTN","PXRMXS1",5,0)
 ;Check for category reminders
"RTN","PXRMXS1",6,0)
 ;----------------------------
"RTN","PXRMXS1",7,0)
FOUND(CIEN) ;
"RTN","PXRMXS1",8,0)
 N DATA,FOUND,RIEN,SUB
"RTN","PXRMXS1",9,0)
 S FOUND=0,SUB=0
"RTN","PXRMXS1",10,0)
 F  S SUB=$O(^PXRMD(811.7,CIEN,2,SUB)) Q:SUB=""  D  Q:FOUND
"RTN","PXRMXS1",11,0)
 .S DATA=$G(^PXRMD(811.7,CIEN,2,SUB,0)) Q:DATA=""
"RTN","PXRMXS1",12,0)
 .S RIEN=$P(DATA,U) Q:RIEN=""
"RTN","PXRMXS1",13,0)
 .;Ignore disabled reminders
"RTN","PXRMXS1",14,0)
 .I '$P($G(^PXD(811.9,RIEN,0)),U,6) S FOUND=1
"RTN","PXRMXS1",15,0)
 Q FOUND
"RTN","PXRMXS1",16,0)
 ;
"RTN","PXRMXS1",17,0)
 ;Add reminder category reminders to reminder array
"RTN","PXRMXS1",18,0)
 ;-------------------------------------------------
"RTN","PXRMXS1",19,0)
MERGE N RCIEN,RCNT,RCSUB,RIEN,RPNAM,RSUB,SUB
"RTN","PXRMXS1",20,0)
 K ^TMP("PXRMXS1",$J)
"RTN","PXRMXS1",21,0)
 ;Extract each category in turn
"RTN","PXRMXS1",22,0)
 S RCSUB=""
"RTN","PXRMXS1",23,0)
 F  S RCSUB=$O(PXRMRCAT(RCSUB)) Q:'RCSUB  D
"RTN","PXRMXS1",24,0)
 .S RCIEN=$P(PXRMRCAT(RCSUB),U) Q:'RCIEN
"RTN","PXRMXS1",25,0)
 .;Add category reminders to reminder array
"RTN","PXRMXS1",26,0)
 .D MREM(RCIEN,.REMINDER)
"RTN","PXRMXS1",27,0)
 ;
"RTN","PXRMXS1",28,0)
 ;Add individual reminders at the end
"RTN","PXRMXS1",29,0)
 S SUB="",RSUB=+$O(REMINDER(""),-1)
"RTN","PXRMXS1",30,0)
 F  S SUB=$O(PXRMREM(SUB)) Q:'SUB  D
"RTN","PXRMXS1",31,0)
 .;Ignore duplicates
"RTN","PXRMXS1",32,0)
 .S RIEN=$P(PXRMREM(SUB),U) Q:'RIEN  Q:$D(^TMP("PXRMXS1",$J,RIEN))
"RTN","PXRMXS1",33,0)
 .S RSUB=RSUB+1,REMINDER(RSUB)=PXRMREM(SUB),^TMP("PXRMXS1",$J,RIEN)=""
"RTN","PXRMXS1",34,0)
 ;
"RTN","PXRMXS1",35,0)
 K ^TMP("PXRMXS1",$J)
"RTN","PXRMXS1",36,0)
 Q
"RTN","PXRMXS1",37,0)
 ;
"RTN","PXRMXS1",38,0)
MREM(CIEN,REM) ;Add to output array
"RTN","PXRMXS1",39,0)
 N DATA,NAME,NREM,RIEN,PNAME,SEQ,SUB,TEMP
"RTN","PXRMXS1",40,0)
 ;Add to end of list
"RTN","PXRMXS1",41,0)
 S NREM=+$O(REM(""),-1)
"RTN","PXRMXS1",42,0)
 ;
"RTN","PXRMXS1",43,0)
 ;Sort Reminders from this category into display sequence
"RTN","PXRMXS1",44,0)
 S SUB=0 K TEMP
"RTN","PXRMXS1",45,0)
 F  S SUB=$O(^PXRMD(811.7,CIEN,2,SUB)) Q:SUB=""  D
"RTN","PXRMXS1",46,0)
 .S DATA=$G(^PXRMD(811.7,CIEN,2,SUB,0)) Q:DATA=""
"RTN","PXRMXS1",47,0)
 .;Ignore duplicates
"RTN","PXRMXS1",48,0)
 .S RIEN=$P(DATA,U) Q:RIEN=""  Q:$D(^TMP("PXRMXS1",$J,RIEN))
"RTN","PXRMXS1",49,0)
 .S SEQ=$P(DATA,U,2)_0
"RTN","PXRMXS1",50,0)
 .S DATA=$G(^PXD(811.9,RIEN,0))
"RTN","PXRMXS1",51,0)
 .S NAME=$P(DATA,U),PNAME=$P(DATA,U,3)
"RTN","PXRMXS1",52,0)
 .S TEMP(SEQ)=RIEN_U_NAME_U_NAME_U_PNAME
"RTN","PXRMXS1",53,0)
 .S ^TMP("PXRMXS1",$J,RIEN)=""
"RTN","PXRMXS1",54,0)
 ;
"RTN","PXRMXS1",55,0)
 ;Re-save reminders in output array for display
"RTN","PXRMXS1",56,0)
 ;unique number^type^name^parent^reminder ien
"RTN","PXRMXS1",57,0)
 ;
"RTN","PXRMXS1",58,0)
 S SEQ=""
"RTN","PXRMXS1",59,0)
 F  S SEQ=$O(TEMP(SEQ)) Q:SEQ=""  D
"RTN","PXRMXS1",60,0)
 .S NREM=NREM+1,REM(NREM)=TEMP(SEQ)
"RTN","PXRMXS1",61,0)
 ;
"RTN","PXRMXS1",62,0)
 ;Sort Sub-Categories for this category into display order
"RTN","PXRMXS1",63,0)
 S SUB=0 K TEMP
"RTN","PXRMXS1",64,0)
 F  S SUB=$O(^PXRMD(811.7,CIEN,10,SUB)) Q:SUB=""  D
"RTN","PXRMXS1",65,0)
 .S DATA=$G(^PXRMD(811.7,CIEN,10,SUB,0)) Q:DATA=""
"RTN","PXRMXS1",66,0)
 .S SEQ=$P(DATA,U,2),TEMP(SEQ)=SUB
"RTN","PXRMXS1",67,0)
 ;
"RTN","PXRMXS1",68,0)
 ;Process sub-sub categories in the same manner
"RTN","PXRMXS1",69,0)
 S SEQ=""
"RTN","PXRMXS1",70,0)
 F  S SEQ=$O(TEMP(SEQ)) Q:SEQ=""  D
"RTN","PXRMXS1",71,0)
 .N IEN
"RTN","PXRMXS1",72,0)
 .S SUB=TEMP(SEQ),IEN=$P($G(^PXRMD(811.7,CIEN,10,SUB,0)),U) Q:'IEN
"RTN","PXRMXS1",73,0)
 .D MREM(IEN,.REM)
"RTN","PXRMXS1",74,0)
 Q
"RTN","PXRMXS1",75,0)
 ;
"RTN","PXRMXS1",76,0)
 ;Check if a category has any sub-categories
"RTN","PXRMXS1",77,0)
 ;------------------------------------------
"RTN","PXRMXS1",78,0)
OK(CIEN) ;
"RTN","PXRMXS1",79,0)
 ;Check in reminder multiple
"RTN","PXRMXS1",80,0)
 I $$FOUND(CIEN) Q 1
"RTN","PXRMXS1",81,0)
 ;
"RTN","PXRMXS1",82,0)
 ;Otherwise check the sub-categories
"RTN","PXRMXS1",83,0)
 N DATA,FOUND,IEN,SUB
"RTN","PXRMXS1",84,0)
 S FOUND=0,SUB=0
"RTN","PXRMXS1",85,0)
 F  S SUB=$O(^PXRMD(811.7,CIEN,10,SUB)) Q:SUB=""  D  Q:FOUND
"RTN","PXRMXS1",86,0)
 .S DATA=$G(^PXRMD(811.7,CIEN,10,SUB,0)) Q:DATA=""
"RTN","PXRMXS1",87,0)
 .S IEN=$P(DATA,U) Q:'IEN
"RTN","PXRMXS1",88,0)
 .;Check for active reminders in reminder multiple
"RTN","PXRMXS1",89,0)
 .S FOUND=$$FOUND(IEN)
"RTN","PXRMXS1",90,0)
 Q FOUND
"RTN","PXRMXSC")
0^10^B3705933
"RTN","PXRMXSC",1,0)
PXRMXSC ; SLC/PJH - Reminder reports service category selection ;01/12/2002
"RTN","PXRMXSC",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXSC",3,0)
 ;
"RTN","PXRMXSC",4,0)
SCAT ;Get the list of service categories.
"RTN","PXRMXSC",5,0)
 N DIR,DIEA,IC,JC,NSC,PCESVC,SCA,VALID,X,Y
"RTN","PXRMXSC",6,0)
 K DIRUT,DTOUT,DUOUT
"RTN","PXRMXSC",7,0)
 ;Build a list of allowed service categories. PCE uses a subset of the
"RTN","PXRMXSC",8,0)
 ;categories in the file.  These are stored in PCESVC.
"RTN","PXRMXSC",9,0)
 S PCESVC="AHITSEDX"
"RTN","PXRMXSC",10,0)
 D HELP^DIE(9000010,"",.07,"S","SCA")
"RTN","PXRMXSC",11,0)
 S NSC=SCA("DIHELP")
"RTN","PXRMXSC",12,0)
 S DIR("?")=" "
"RTN","PXRMXSC",13,0)
 S DIR("?",1)="The possible service categories for the report are:"
"RTN","PXRMXSC",14,0)
 S JC=0
"RTN","PXRMXSC",15,0)
 F IC=2:1:NSC D
"RTN","PXRMXSC",16,0)
 . S X=$P(SCA("DIHELP",IC)," ",1)
"RTN","PXRMXSC",17,0)
 . I PCESVC[X D
"RTN","PXRMXSC",18,0)
 .. S JC=JC+1
"RTN","PXRMXSC",19,0)
 .. S DIR("?",JC)=SCA("DIHELP",IC)
"RTN","PXRMXSC",20,0)
 S NSC=JC
"RTN","PXRMXSC",21,0)
 S DIR("??")=U_"D SCATHELP^PXRMXSC"
"RTN","PXRMXSC",22,0)
SCATP ;
"RTN","PXRMXSC",23,0)
 S DIR(0)="FU"_U_"1:"_NSC
"RTN","PXRMXSC",24,0)
 S DIR("A")="Select SERVICE CATEGORIES"
"RTN","PXRMXSC",25,0)
 S DIR("B")="AI"
"RTN","PXRMXSC",26,0)
 W !
"RTN","PXRMXSC",27,0)
 D ^DIR K DIR
"RTN","PXRMXSC",28,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXSC",29,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSC",30,0)
 ;Make sure we have a valid list.
"RTN","PXRMXSC",31,0)
 S VALID=$$VLIST^PXRMXGUT(PCESVC,Y," is an invalid service category!")
"RTN","PXRMXSC",32,0)
 I 'VALID G SCATP
"RTN","PXRMXSC",33,0)
 S PXRMSCAT=$$UP^XLFSTR(Y)
"RTN","PXRMXSC",34,0)
 Q
"RTN","PXRMXSC",35,0)
 ;
"RTN","PXRMXSC",36,0)
SCATHELP ;?? help for service categories.
"RTN","PXRMXSC",37,0)
 W !!,"Enter the letter(s) corresponding to the desired service category or categories."
"RTN","PXRMXSC",38,0)
 W !,"For example AHTE would allow only encounters with service categories of"
"RTN","PXRMXSC",39,0)
 W !,"ambulatory, hospitalization, telecommunications, and event (historical) to be included."
"RTN","PXRMXSC",40,0)
 Q
"RTN","PXRMXSC",41,0)
 ;
"RTN","PXRMXSD")
0^11^B127335938
"RTN","PXRMXSD",1,0)
PXRMXSD ; SLC/PJH - Reminder Reports DIR Prompts;12/21/2001
"RTN","PXRMXSD",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXSD",3,0)
 ;
"RTN","PXRMXSD",4,0)
 ;Called by PXRMXD
"RTN","PXRMXSD",5,0)
 ;
"RTN","PXRMXSD",6,0)
BED(YESNO) ;Option to sort by inpatient location and bed
"RTN","PXRMXSD",7,0)
 N X,Y,TEXT,DIR
"RTN","PXRMXSD",8,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSD",9,0)
 S DIR(0)="YA0"
"RTN","PXRMXSD",10,0)
 S DIR("A")="Sort by Inpatient Location/Bed: "
"RTN","PXRMXSD",11,0)
 S DIR("B")="N"
"RTN","PXRMXSD",12,0)
 S DIR("?")="Enter Y or N. For detailed help type ??"
"RTN","PXRMXSD",13,0)
 S DIR("??")=U_"D HELP^PXRMXSD(11)"
"RTN","PXRMXSD",14,0)
 W !
"RTN","PXRMXSD",15,0)
 D ^DIR K DIR
"RTN","PXRMXSD",16,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXSD",17,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSD",18,0)
 S YESNO=$E(Y(0))
"RTN","PXRMXSD",19,0)
 I YESNO="Y" S YESNO="B"
"RTN","PXRMXSD",20,0)
 Q
"RTN","PXRMXSD",21,0)
 ;
"RTN","PXRMXSD",22,0)
COMB(YESNO,LIT,DEF) ;Option to combine report
"RTN","PXRMXSD",23,0)
 N X,Y,DIR,TEXT
"RTN","PXRMXSD",24,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSD",25,0)
 S DIR(0)="YA0"
"RTN","PXRMXSD",26,0)
 S DIR("A")="Combined report for all "_LIT_" : "
"RTN","PXRMXSD",27,0)
 S DIR("B")=DEF
"RTN","PXRMXSD",28,0)
 S DIR("?")="Enter Y or N. For detailed help type ??"
"RTN","PXRMXSD",29,0)
 S DIR("??")=U_"D HELP^PXRMXSD(9)"
"RTN","PXRMXSD",30,0)
 W !
"RTN","PXRMXSD",31,0)
 D ^DIR K DIR
"RTN","PXRMXSD",32,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXSD",33,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSD",34,0)
 S YESNO=$E(Y(0))
"RTN","PXRMXSD",35,0)
 Q
"RTN","PXRMXSD",36,0)
 ;
"RTN","PXRMXSD",37,0)
FUTURE(YESNO) ;Option to display all future appointments on detail report
"RTN","PXRMXSD",38,0)
 N X,Y,DIR,TEXT
"RTN","PXRMXSD",39,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSD",40,0)
 S DIR(0)="YA0"
"RTN","PXRMXSD",41,0)
 S DIR("A")="Display All Future Appointments: "
"RTN","PXRMXSD",42,0)
 S DIR("B")="N"
"RTN","PXRMXSD",43,0)
 S DIR("?")="Enter Y or N. For detailed help type ??"
"RTN","PXRMXSD",44,0)
 S DIR("??")=U_"D HELP^PXRMXSD(5)"
"RTN","PXRMXSD",45,0)
 W !
"RTN","PXRMXSD",46,0)
 D ^DIR K DIR
"RTN","PXRMXSD",47,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXSD",48,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSD",49,0)
 S YESNO=$E(Y(0))
"RTN","PXRMXSD",50,0)
 Q
"RTN","PXRMXSD",51,0)
 ;
"RTN","PXRMXSD",52,0)
PREV(TYPE) ;Future Appts/Prior Encounters selection
"RTN","PXRMXSD",53,0)
 N X,Y,DIR
"RTN","PXRMXSD",54,0)
 S NREM=0
"RTN","PXRMXSD",55,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSD",56,0)
 I 'PXRMINP D
"RTN","PXRMXSD",57,0)
 .S DIR(0)="S"_U_"P:Previous Encounters;"
"RTN","PXRMXSD",58,0)
 .S DIR(0)=DIR(0)_"F:Future Appointments;"
"RTN","PXRMXSD",59,0)
 .S DIR("A")="PREVIOUS ENCOUNTERS OR FUTURE APPOINTMENTS"
"RTN","PXRMXSD",60,0)
 .S DIR("B")="P"
"RTN","PXRMXSD",61,0)
 .S DIR("??")=U_"D HELP^PXRMXSD(3)"
"RTN","PXRMXSD",62,0)
 I PXRMINP D
"RTN","PXRMXSD",63,0)
 .S DIR(0)="S"_U_"A:Admissions to Location in date range;"
"RTN","PXRMXSD",64,0)
 .S DIR(0)=DIR(0)_"C:Current Inpatients;"
"RTN","PXRMXSD",65,0)
 .S DIR("A")="CURRENT INPATIENTS OR ADMISSIONS"
"RTN","PXRMXSD",66,0)
 .S DIR("B")="C"
"RTN","PXRMXSD",67,0)
 .S DIR("??")=U_"D HELP^PXRMXSD(7)"
"RTN","PXRMXSD",68,0)
 S DIR("?")="Select from the codes displayed. For detailed help type ??"
"RTN","PXRMXSD",69,0)
 D ^DIR K DIR
"RTN","PXRMXSD",70,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXSD",71,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSD",72,0)
 S TYPE=Y
"RTN","PXRMXSD",73,0)
 Q
"RTN","PXRMXSD",74,0)
 ;
"RTN","PXRMXSD",75,0)
PRIME(TYPE) ;Primary Provider patients only or All
"RTN","PXRMXSD",76,0)
 N X,Y,DIR
"RTN","PXRMXSD",77,0)
 S NREM=0
"RTN","PXRMXSD",78,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSD",79,0)
 S DIR(0)="S"_U_"P:Primary care assigned patients only;"
"RTN","PXRMXSD",80,0)
 S DIR(0)=DIR(0)_"A:All patients on list;"
"RTN","PXRMXSD",81,0)
 S DIR("A")="PRIMARY CARE ONLY OR ALL"
"RTN","PXRMXSD",82,0)
 S DIR("B")="P"
"RTN","PXRMXSD",83,0)
 S DIR("?")="Select from the codes displayed. For detailed help type ??"
"RTN","PXRMXSD",84,0)
 S DIR("??")=U_"D HELP^PXRMXSD(4)"
"RTN","PXRMXSD",85,0)
 D ^DIR K DIR
"RTN","PXRMXSD",86,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXSD",87,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSD",88,0)
 S TYPE=Y
"RTN","PXRMXSD",89,0)
 Q
"RTN","PXRMXSD",90,0)
 ;
"RTN","PXRMXSD",91,0)
REP(TYPE) ;Report type selection
"RTN","PXRMXSD",92,0)
 N X,Y,DIR
"RTN","PXRMXSD",93,0)
 S NREM=0
"RTN","PXRMXSD",94,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSD",95,0)
 S DIR(0)="S"_U_"D:Detailed;"
"RTN","PXRMXSD",96,0)
 S DIR(0)=DIR(0)_"S:Summary;"
"RTN","PXRMXSD",97,0)
 S DIR("A")="TYPE OF REPORT"
"RTN","PXRMXSD",98,0)
 S DIR("B")="S"
"RTN","PXRMXSD",99,0)
 I PXRMSEL="I" S DIR("B")="D"
"RTN","PXRMXSD",100,0)
 S DIR("?")="Select from the codes displayed. For detailed help type ??"
"RTN","PXRMXSD",101,0)
 S DIR("??")=U_"D HELP^PXRMXSD(2)"
"RTN","PXRMXSD",102,0)
 D ^DIR K DIR
"RTN","PXRMXSD",103,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXSD",104,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSD",105,0)
 S TYPE=Y
"RTN","PXRMXSD",106,0)
 Q
"RTN","PXRMXSD",107,0)
 ;
"RTN","PXRMXSD",108,0)
SELECT(TYPE) ;Patient Sample Selection
"RTN","PXRMXSD",109,0)
 N X,Y,DIR
"RTN","PXRMXSD",110,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSD",111,0)
 S DIR(0)="S"_U_"I:Individual Patient;"
"RTN","PXRMXSD",112,0)
 S DIR(0)=DIR(0)_"L:Location;"
"RTN","PXRMXSD",113,0)
 S DIR(0)=DIR(0)_"O:OE/RR Team;"
"RTN","PXRMXSD",114,0)
 S DIR(0)=DIR(0)_"P:PCMM Provider;"
"RTN","PXRMXSD",115,0)
 S DIR(0)=DIR(0)_"T:PCMM Team;"
"RTN","PXRMXSD",116,0)
 S DIR("A")="PATIENT SAMPLE"
"RTN","PXRMXSD",117,0)
 S DIR("B")="L"
"RTN","PXRMXSD",118,0)
 S DIR("?")="Select from the codes displayed. For detailed help type ??"
"RTN","PXRMXSD",119,0)
 S DIR("??")=U_"D HELP^PXRMXSD(1)"
"RTN","PXRMXSD",120,0)
 D ^DIR K DIR
"RTN","PXRMXSD",121,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXSD",122,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSD",123,0)
 S TYPE=Y
"RTN","PXRMXSD",124,0)
 Q
"RTN","PXRMXSD",125,0)
 ;
"RTN","PXRMXSD",126,0)
SRT(YESNO) ;Option to sort by next appointment date on detail report
"RTN","PXRMXSD",127,0)
 N X,Y,TEXT,DIR
"RTN","PXRMXSD",128,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSD",129,0)
 S DIR(0)="YA0"
"RTN","PXRMXSD",130,0)
 S DIR("A")="Sort by Next Appointment date: "
"RTN","PXRMXSD",131,0)
 S DIR("B")="N"
"RTN","PXRMXSD",132,0)
 S DIR("?")="Enter Y or N. For detailed help type ??"
"RTN","PXRMXSD",133,0)
 S DIR("??")=U_"D HELP^PXRMXSD(6)"
"RTN","PXRMXSD",134,0)
 W !
"RTN","PXRMXSD",135,0)
 D ^DIR K DIR
"RTN","PXRMXSD",136,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXSD",137,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSD",138,0)
 S YESNO=$E(Y(0))
"RTN","PXRMXSD",139,0)
 Q
"RTN","PXRMXSD",140,0)
 ;
"RTN","PXRMXSD",141,0)
SSN(YESNO) ;Option to combine multifacility report
"RTN","PXRMXSD",142,0)
 N X,Y,DIR,TEXT
"RTN","PXRMXSD",143,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSD",144,0)
 S DIR(0)="YA0"
"RTN","PXRMXSD",145,0)
 S DIR("A")="Print full SSN: "
"RTN","PXRMXSD",146,0)
 I $P($G(^PXRM(800,1,"FULL SSN")),U)="Y" S DIR("B")="Y"
"RTN","PXRMXSD",147,0)
 E  S DIR("B")="N"
"RTN","PXRMXSD",148,0)
 S DIR("?")="Enter Y or N. For detailed help type ??"
"RTN","PXRMXSD",149,0)
 S DIR("??")=U_"D HELP^PXRMXSD(12)"
"RTN","PXRMXSD",150,0)
 W !
"RTN","PXRMXSD",151,0)
 D ^DIR K DIR
"RTN","PXRMXSD",152,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXSD",153,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSD",154,0)
 S YESNO=$E(Y(0))
"RTN","PXRMXSD",155,0)
 Q
"RTN","PXRMXSD",156,0)
 ;
"RTN","PXRMXSD",157,0)
TABS(YESNO) ;Option print compressed report
"RTN","PXRMXSD",158,0)
 N X,Y,DIR,TEXT
"RTN","PXRMXSD",159,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSD",160,0)
 S DIR(0)="YA0"
"RTN","PXRMXSD",161,0)
 S DIR("A")="Print Delimiter Separated output only: "
"RTN","PXRMXSD",162,0)
 S DIR("B")="N"
"RTN","PXRMXSD",163,0)
 S DIR("?")="Enter Y or N. For detailed help type ??"
"RTN","PXRMXSD",164,0)
 S DIR("??")=U_"D HELP^PXRMXSD(13)"
"RTN","PXRMXSD",165,0)
 W !
"RTN","PXRMXSD",166,0)
 D ^DIR K DIR
"RTN","PXRMXSD",167,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXSD",168,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSD",169,0)
 S YESNO=$E(Y(0))
"RTN","PXRMXSD",170,0)
 Q
"RTN","PXRMXSD",171,0)
 ;
"RTN","PXRMXSD",172,0)
TABSEL(TYPE) ;Select DELIMITER CHARACTER
"RTN","PXRMXSD",173,0)
 N X,Y,DIR
"RTN","PXRMXSD",174,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSD",175,0)
 S DIR(0)="S"_U_"C:Comma;"
"RTN","PXRMXSD",176,0)
 S DIR(0)=DIR(0)_"M:Semicolon;"
"RTN","PXRMXSD",177,0)
 S DIR(0)=DIR(0)_"S:Space;"
"RTN","PXRMXSD",178,0)
 S DIR(0)=DIR(0)_"T:Tab;"
"RTN","PXRMXSD",179,0)
 S DIR(0)=DIR(0)_"U:Up arrow;"
"RTN","PXRMXSD",180,0)
 S DIR("A")="Specify REPORT DELIMITER CHARACTER"
"RTN","PXRMXSD",181,0)
 S DIR("B")="U"
"RTN","PXRMXSD",182,0)
 S DIR("?")="Select from the codes displayed. For detailed help type ??"
"RTN","PXRMXSD",183,0)
 S DIR("??")=U_"D HELP^PXRMXSD(14)"
"RTN","PXRMXSD",184,0)
 D ^DIR K DIR
"RTN","PXRMXSD",185,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXSD",186,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSD",187,0)
 S TYPE=Y
"RTN","PXRMXSD",188,0)
 Q
"RTN","PXRMXSD",189,0)
 ;
"RTN","PXRMXSD",190,0)
TOTALS(TYPE,LIT1,LIT2,LIT3) ;Totals Selection
"RTN","PXRMXSD",191,0)
 N X,Y,DIR
"RTN","PXRMXSD",192,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSD",193,0)
 S DIR(0)="S"_U_"I:"_LIT1_";"
"RTN","PXRMXSD",194,0)
 S DIR(0)=DIR(0)_"R:"_LIT2_";"
"RTN","PXRMXSD",195,0)
 S DIR(0)=DIR(0)_"T:"_LIT3_";"
"RTN","PXRMXSD",196,0)
 S DIR("A")="REPORT TOTALS"
"RTN","PXRMXSD",197,0)
 S DIR("B")="I"
"RTN","PXRMXSD",198,0)
 S DIR("?")="Select from the codes displayed. For detailed help type ??"
"RTN","PXRMXSD",199,0)
 S DIR("??")=U_"D HELP^PXRMXSD(10)"
"RTN","PXRMXSD",200,0)
 D ^DIR K DIR
"RTN","PXRMXSD",201,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXSD",202,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSD",203,0)
 S TYPE=Y
"RTN","PXRMXSD",204,0)
 Q
"RTN","PXRMXSD",205,0)
 ;
"RTN","PXRMXSD",206,0)
HELP(CALL) ;General help text routine
"RTN","PXRMXSD",207,0)
 N HTEXT
"RTN","PXRMXSD",208,0)
 N DIWF,DIWL,DIWR,IC
"RTN","PXRMXSD",209,0)
 S DIWF="C70",DIWL=0,DIWR=70
"RTN","PXRMXSD",210,0)
 ;
"RTN","PXRMXSD",211,0)
 I CALL=1 D
"RTN","PXRMXSD",212,0)
 .S HTEXT(1)="Summary reports total the number of reminders applicable "
"RTN","PXRMXSD",213,0)
 .S HTEXT(2)="and due for the above patient samples."
"RTN","PXRMXSD",214,0)
 .S HTEXT(3)="Detailed reports list patients with reminders due in "
"RTN","PXRMXSD",215,0)
 .S HTEXT(4)="name order or by appointment date."
"RTN","PXRMXSD",216,0)
 I CALL=2 D
"RTN","PXRMXSD",217,0)
 .S HTEXT(1)="DETAILED reports list in alpha order patients in the"
"RTN","PXRMXSD",218,0)
 .S HTEXT(2)="selected patient sample with reminders due."
"RTN","PXRMXSD",219,0)
 .S HTEXT(3)="SUMMARY reports give totals of reminders due for the"
"RTN","PXRMXSD",220,0)
 .S HTEXT(4)="selected patient sample."
"RTN","PXRMXSD",221,0)
 I CALL=3 D
"RTN","PXRMXSD",222,0)
 .S HTEXT(1)="PREVIOUS will report on patients who visited the selected"
"RTN","PXRMXSD",223,0)
 .S HTEXT(2)="locations in the date range specified"
"RTN","PXRMXSD",224,0)
 .S HTEXT(3)="FUTURE will report on patients who have appointments at"
"RTN","PXRMXSD",225,0)
 .S HTEXT(4)="selected locations in the date range specified."
"RTN","PXRMXSD",226,0)
 I CALL=4 D
"RTN","PXRMXSD",227,0)
 .S HTEXT(1)="PRIMARY CARE ONLY excludes patients who are not assigned"
"RTN","PXRMXSD",228,0)
 .S HTEXT(2)="to the PCMM team as primary care."
"RTN","PXRMXSD",229,0)
 I CALL=5 D
"RTN","PXRMXSD",230,0)
 .S HTEXT(1)="Selecting Y will display all future appointments for"
"RTN","PXRMXSD",231,0)
 .S HTEXT(2)="patients with reminders due. Selecting N will display"
"RTN","PXRMXSD",232,0)
 .S HTEXT(3)="for patients with due reminders only the next appointment"
"RTN","PXRMXSD",233,0)
 .I PXRMSEL="L" D
"RTN","PXRMXSD",234,0)
 ..S HTEXT(4)="AT THE SELECTED LOCATION"
"RTN","PXRMXSD",235,0)
 I CALL=6 D
"RTN","PXRMXSD",236,0)
 .S HTEXT(1)="Selecting Y will display patients with reminders in"
"RTN","PXRMXSD",237,0)
 .S HTEXT(2)="appointment date order. Selecting N will display patients"
"RTN","PXRMXSD",238,0)
 .S HTEXT(3)="with reminders in patient name order."
"RTN","PXRMXSD",239,0)
 I CALL=7 D
"RTN","PXRMXSD",240,0)
 .S HTEXT(1)="ADMISSIONS will report on inpatients admitted in the"
"RTN","PXRMXSD",241,0)
 .S HTEXT(2)="selected locations in the date range specified. "
"RTN","PXRMXSD",242,0)
 .S HTEXT(3)="CURRENT INPATIENTS will report on inpatients currently at"
"RTN","PXRMXSD",243,0)
 .S HTEXT(4)="selected locations."
"RTN","PXRMXSD",244,0)
 I CALL=8 D
"RTN","PXRMXSD",245,0)
 .S HTEXT(1)="Reports for ALL OUTPATIENT LOCATIONS, ALL INPATIENT LOCATIONS and ALL "
"RTN","PXRMXSD",246,0)
 .S HTEXT(2)="CLINIC STOPS produce a combined list of reminders due for"
"RTN","PXRMXSD",247,0)
 .S HTEXT(3)="for all locations in each facility selected."
"RTN","PXRMXSD",248,0)
 .S HTEXT(4)=""
"RTN","PXRMXSD",249,0)
 .S HTEXT(5)="Reports for SELECTED HOSPITAL LOCATIONS, SELECTED CLINIC STOPS and"
"RTN","PXRMXSD",250,0)
 .S HTEXT(6)="SELECTED CLINIC GROUPS list reminders due by location for "
"RTN","PXRMXSD",251,0)
 .S HTEXT(7)="each location selected."
"RTN","PXRMXSD",252,0)
 I CALL=9 D
"RTN","PXRMXSD",253,0)
 .I LIT="Facilities" D
"RTN","PXRMXSD",254,0)
 ..S HTEXT(1)="Selecting Y will display one report for all facilities combining"
"RTN","PXRMXSD",255,0)
 ..S HTEXT(2)="locations/teams with the same name. Selecting N will create a"
"RTN","PXRMXSD",256,0)
 ..S HTEXT(3)="separate report for each facility."
"RTN","PXRMXSD",257,0)
 .I LIT'="Facilities" D
"RTN","PXRMXSD",258,0)
 ..S HTEXT(1)="Selecting Y will display one report for all "_LIT_" selected."
"RTN","PXRMXSD",259,0)
 ..S HTEXT(2)="Selecting N will create a separate report for each "_LIT_"."
"RTN","PXRMXSD",260,0)
 I CALL=10 D
"RTN","PXRMXSD",261,0)
 .S HTEXT(1)="This option is only available if more than one location, team or provider is selected."
"RTN","PXRMXSD",262,0)
 .S HTEXT(2)="Selecting I prints only the individual reports. Selecting R prints"
"RTN","PXRMXSD",263,0)
 .S HTEXT(3)="the individual report plus overall totals for all locations, teams or providers."
"RTN","PXRMXSD",264,0)
 .S HTEXT(4)="Selecting T prints only the overall totals for all locations, teams or providers."
"RTN","PXRMXSD",265,0)
 I CALL=11 D
"RTN","PXRMXSD",266,0)
 .S HTEXT(1)="Selecting Y will display patients with reminders in ward/bed"
"RTN","PXRMXSD",267,0)
 .S HTEXT(2)="order. Selecting N will display patients with reminders in"
"RTN","PXRMXSD",268,0)
 .S HTEXT(3)="patient name order."
"RTN","PXRMXSD",269,0)
 I CALL=12 D
"RTN","PXRMXSD",270,0)
 .S HTEXT(1)="Selecting Y will display the full patient SSN. Selecting N"
"RTN","PXRMXSD",271,0)
 .S HTEXT(2)=" will display only the last 4 digits of the patient SSN."
"RTN","PXRMXSD",272,0)
 I CALL=13 D
"RTN","PXRMXSD",273,0)
 .S HTEXT(1)="Selecting Y will display the report as fields separated by"
"RTN","PXRMXSD",274,0)
 .S HTEXT(2)="a selected delimiter character. Headings are suppressed. This"
"RTN","PXRMXSD",275,0)
 .S HTEXT(3)="format of report is intended for import into PC spreadsheet (e.g. MS Excl)."
"RTN","PXRMXSD",276,0)
 .S HTEXT(4)="Selecting N will display the normal report with headings"
"RTN","PXRMXSD",277,0)
 I CALL=14 D
"RTN","PXRMXSD",278,0)
 .S HTEXT(1)="Select the character to be output as a delimiter in the report."
"RTN","PXRMXSD",279,0)
 K ^UTILITY($J,"W")
"RTN","PXRMXSD",280,0)
 S IC=""
"RTN","PXRMXSD",281,0)
 F  S IC=$O(HTEXT(IC)) Q:IC=""  D
"RTN","PXRMXSD",282,0)
 . S X=HTEXT(IC)
"RTN","PXRMXSD",283,0)
 . D ^DIWP
"RTN","PXRMXSD",284,0)
 W !
"RTN","PXRMXSD",285,0)
 S IC=0
"RTN","PXRMXSD",286,0)
 F  S IC=$O(^UTILITY($J,"W",0,IC)) Q:IC=""  D
"RTN","PXRMXSD",287,0)
 . W !,^UTILITY($J,"W",0,IC,0)
"RTN","PXRMXSD",288,0)
 K ^UTILITY($J,"W")
"RTN","PXRMXSD",289,0)
 W !
"RTN","PXRMXSD",290,0)
 Q
"RTN","PXRMXSE")
0^12^B5995488
"RTN","PXRMXSE",1,0)
PXRMXSE ; SLC/PJH - Build Patient lists for Reminder Due report;01/15/2002
"RTN","PXRMXSE",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXSE",3,0)
 ;
"RTN","PXRMXSE",4,0)
 ; Called/jobbed from PXRMXD
"RTN","PXRMXSE",5,0)
 ;
"RTN","PXRMXSE",6,0)
 ; Input - PXRMSEL,PXRMXTMP
"RTN","PXRMXSE",7,0)
 ;         PXRM*
"RTN","PXRMXSE",8,0)
 ; Output- ^XTMP(PXRMXTMP
"RTN","PXRMXSE",9,0)
 ;
"RTN","PXRMXSE",10,0)
 ;
"RTN","PXRMXSE",11,0)
START N ITEM,LIT,TOTAL,TODAY,ZTSTOP,BUSY
"RTN","PXRMXSE",12,0)
 S TOTAL=0,ZTSTOP="",TODAY=$$DT^XLFDT-.0001
"RTN","PXRMXSE",13,0)
 ;
"RTN","PXRMXSE",14,0)
 ; For the detail report there is only one reminder
"RTN","PXRMXSE",15,0)
 I PXRMREP="D" D
"RTN","PXRMXSE",16,0)
 .S ITEM=$P(REMINDER(1),U,1),LIT=$P(REMINDER(1),U,4)
"RTN","PXRMXSE",17,0)
 .I LIT="" S LIT=$P(REMINDER(1),U,2)
"RTN","PXRMXSE",18,0)
 ;
"RTN","PXRMXSE",19,0)
 K ^TMP($J),^TMP(PXRMRT,$J),^TMP("PXRMDUP",$J)
"RTN","PXRMXSE",20,0)
 K ^TMP("PXRMCMB",$J),^TMP("PXRMCMB1",$J),^TMP("PXRMCMB2",$J)
"RTN","PXRMXSE",21,0)
 ;
"RTN","PXRMXSE",22,0)
 I '(PXRMQUE!$D(IO("S"))) D INIT^PXRMXBSY(.BUSY)
"RTN","PXRMXSE",23,0)
 ;
"RTN","PXRMXSE",24,0)
 ;OE/RR team selected (PXRMOTM)
"RTN","PXRMXSE",25,0)
 I PXRMSEL="O" D OERR^PXRMXSEO
"RTN","PXRMXSE",26,0)
 ; 
"RTN","PXRMXSE",27,0)
 ;PCMM team selected (PXRMPCM)
"RTN","PXRMXSE",28,0)
 I PXRMSEL="T" D PCMMT^PXRMXSEO
"RTN","PXRMXSE",29,0)
 ;
"RTN","PXRMXSE",30,0)
 ;Location selected (PXRMLCHL,PXRMCGRP)
"RTN","PXRMXSE",31,0)
 I PXRMSEL="L" D  G:ZTSTOP=1 EXIT
"RTN","PXRMXSE",32,0)
 .;Prior Visits - build patient list in ^TMP
"RTN","PXRMXSE",33,0)
 .I PXRMFD="P" D VISITS^PXRMXSEL
"RTN","PXRMXSE",34,0)
 .;Current Inpatients
"RTN","PXRMXSE",35,0)
 .I PXRMFD="C" D INP^PXRMXSEL
"RTN","PXRMXSE",36,0)
 .;Inpatient Admissions
"RTN","PXRMXSE",37,0)
 .I PXRMFD="A" D ADM^PXRMXSEL
"RTN","PXRMXSE",38,0)
 .;Future Appointments - build patient list in ^TMP
"RTN","PXRMXSE",39,0)
 .I PXRMFD="F" D APPTS^PXRMXSEL
"RTN","PXRMXSE",40,0)
 .;End task requested
"RTN","PXRMXSE",41,0)
 .Q:ZTSTOP=1
"RTN","PXRMXSE",42,0)
 .;Update ^XTMP from ^TMP
"RTN","PXRMXSE",43,0)
 .I '(PXRMQUE!$D(IO("S"))) D INIT^PXRMXBSY(.BUSY)
"RTN","PXRMXSE",44,0)
 .D XTMP^PXRMXSEO
"RTN","PXRMXSE",45,0)
 ;
"RTN","PXRMXSE",46,0)
 ;PCMM provider selected (PXRMPRV)
"RTN","PXRMXSE",47,0)
 I PXRMSEL="P" D PCMMP^PXRMXSEO
"RTN","PXRMXSE",48,0)
 ;
"RTN","PXRMXSE",49,0)
 ;Individual Patients selected (PXRMPAT)
"RTN","PXRMXSE",50,0)
 I PXRMSEL="I" D IND^PXRMXSEO
"RTN","PXRMXSE",51,0)
 ;
"RTN","PXRMXSE",52,0)
 K ^TMP($J),^TMP(PXRMRT,$J),^TMP("PXRMDUP",$J)
"RTN","PXRMXSE",53,0)
 K ^TMP("PXRMCMB",$J),^TMP("PXRMCMB1",$J),^TMP("PXRMCMB2",$J)
"RTN","PXRMXSE",54,0)
 ;
"RTN","PXRMXSE",55,0)
DONE ;
"RTN","PXRMXSE",56,0)
 ;Sorting is done.
"RTN","PXRMXSE",57,0)
 I '(PXRMQUE!$D(IO("S"))!(PXRMTABS="Y")) D DONE^PXRMXBSY("done")
"RTN","PXRMXSE",58,0)
 ;
"RTN","PXRMXSE",59,0)
 ;
"RTN","PXRMXSE",60,0)
 ;Print the report information.
"RTN","PXRMXSE",61,0)
 I PXRMQUE D  Q
"RTN","PXRMXSE",62,0)
 .;Start the printing that was queued but not scheduled.
"RTN","PXRMXSE",63,0)
 .N DESC,ROUTINE,TASK,ZTDTH
"RTN","PXRMXSE",64,0)
 .S ROUTINE="^PXRMXPR"
"RTN","PXRMXSE",65,0)
 .S DESC="Reminder Due Report - print"
"RTN","PXRMXSE",66,0)
 .S ZTDTH=$$NOW^XLFDT
"RTN","PXRMXSE",67,0)
 .S TASK=$G(^XTMP(PXRMXTMP,"PRZTSK"))
"RTN","PXRMXSE",68,0)
 .I TASK D REQUE^PXRMXQUE(DESC,ROUTINE,TASK)
"RTN","PXRMXSE",69,0)
 I 'PXRMQUE D ^PXRMXPR
"RTN","PXRMXSE",70,0)
 Q
"RTN","PXRMXSE",71,0)
 ;
"RTN","PXRMXSE",72,0)
 ;End Task requested
"RTN","PXRMXSE",73,0)
EXIT D EXIT^PXRMXGUT
"RTN","PXRMXSE",74,0)
 Q
"RTN","PXRMXSEL")
0^13^B48860752
"RTN","PXRMXSEL",1,0)
PXRMXSEL ; SLC/PJH - Process Visits/Appts Reminder Due report;11/20/2001
"RTN","PXRMXSEL",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXSEL",3,0)
 ;
"RTN","PXRMXSEL",4,0)
 ; Called from PXRMXSE
"RTN","PXRMXSEL",5,0)
 ;
"RTN","PXRMXSEL",6,0)
TMP(INP) ;Update ^TMP("PXRMX"
"RTN","PXRMXSEL",7,0)
 I PXRMFCMB="Y" N FACILITY S FACILITY="COMBINED FACILITIES"
"RTN","PXRMXSEL",8,0)
 I PXRMLCMB="Y" N NAM S NAM="COMBINED LOCATIONS"
"RTN","PXRMXSEL",9,0)
 S ^TMP("PXRMX",$J,FACILITY,NAM,DFN)=INP
"RTN","PXRMXSEL",10,0)
 Q
"RTN","PXRMXSEL",11,0)
 ;
"RTN","PXRMXSEL",12,0)
 ;Mark location as found
"RTN","PXRMXSEL",13,0)
MARK S ^XTMP(PXRMXTMP,"MARKED AS FOUND",IC)=""
"RTN","PXRMXSEL",14,0)
 Q
"RTN","PXRMXSEL",15,0)
 ;
"RTN","PXRMXSEL",16,0)
 ;Build list of Current inpatients
"RTN","PXRMXSEL",17,0)
INP N FACILITY,HLOCIEN,IC,NAM,DFN,FOUND
"RTN","PXRMXSEL",18,0)
 ;Default for HA/HAI options
"RTN","PXRMXSEL",19,0)
 S NAM="All Locations"
"RTN","PXRMXSEL",20,0)
 ;For all wards build temporary array
"RTN","PXRMXSEL",21,0)
 I $E(PXRMLCSC,2)="A" N PXRMLCHL,PXRMLOCN D LCHL^PXRMXAP(1,.PXRMLCHL)
"RTN","PXRMXSEL",22,0)
 ;Get Current inpatients for each selected location
"RTN","PXRMXSEL",23,0)
 F IC=1:1 Q:'$D(PXRMLCHL(IC))  D
"RTN","PXRMXSEL",24,0)
 .S HLOCIEN=$P(PXRMLCHL(IC),U,2) Q:HLOCIEN=""
"RTN","PXRMXSEL",25,0)
 .S FACILITY=$$FACL^PXRMXAP(HLOCIEN) Q:FACILITY=""
"RTN","PXRMXSEL",26,0)
 .Q:'$D(PXRMFACN(FACILITY))
"RTN","PXRMXSEL",27,0)
 .;Get WARDIEN,WARDNAM and return DFN's in PATS
"RTN","PXRMXSEL",28,0)
 .N PATS D WARD^PXRMXAP(HLOCIEN,.PATS)
"RTN","PXRMXSEL",29,0)
 .;Split report by location
"RTN","PXRMXSEL",30,0)
 .I PXRMLCMB="N" S NAM=$P(PXRMLCHL(IC),U)
"RTN","PXRMXSEL",31,0)
 .;Build ^TMP for selected patients 
"RTN","PXRMXSEL",32,0)
 .S DFN="",FOUND=0
"RTN","PXRMXSEL",33,0)
 .F  S DFN=$O(PATS(DFN)) Q:DFN=""  D TMP(HLOCIEN) I 'FOUND S FOUND=1
"RTN","PXRMXSEL",34,0)
 .I FOUND D MARK
"RTN","PXRMXSEL",35,0)
 Q
"RTN","PXRMXSEL",36,0)
 ;
"RTN","PXRMXSEL",37,0)
 ;Build list of inpatients admissions
"RTN","PXRMXSEL",38,0)
ADM N FACILITY,HLOCIEN,IC,NAM,DFN,FOUND,BD,ED
"RTN","PXRMXSEL",39,0)
 ;Default for HA/HAI options
"RTN","PXRMXSEL",40,0)
 S NAM="All Locations"
"RTN","PXRMXSEL",41,0)
 ;For all wards build temporary array
"RTN","PXRMXSEL",42,0)
 I $E(PXRMLCSC,2)="A" N PXRMLCHL,PXRMLOCN D LCHL^PXRMXAP(1,.PXRMLCHL)
"RTN","PXRMXSEL",43,0)
 ;Get admissions for each selected location
"RTN","PXRMXSEL",44,0)
 F IC=1:1 Q:'$D(PXRMLCHL(IC))  D
"RTN","PXRMXSEL",45,0)
 .S HLOCIEN=$P(PXRMLCHL(IC),U,2) Q:HLOCIEN=""
"RTN","PXRMXSEL",46,0)
 .S FACILITY=$$FACL^PXRMXAP(HLOCIEN) Q:FACILITY=""
"RTN","PXRMXSEL",47,0)
 .Q:'$D(PXRMFACN(FACILITY))
"RTN","PXRMXSEL",48,0)
 .; Get admissions from patient movements and return DFN's in PATS
"RTN","PXRMXSEL",49,0)
 .S BD=PXRMBDT-.0001
"RTN","PXRMXSEL",50,0)
 .S ED=PXRMEDT+.2359
"RTN","PXRMXSEL",51,0)
 .N PATS D ADM^PXRMXAP(HLOCIEN,.PATS,BD,ED)
"RTN","PXRMXSEL",52,0)
 .;Split report by location
"RTN","PXRMXSEL",53,0)
 .I PXRMLCMB="N" S NAM=$P(PXRMLCHL(IC),U)
"RTN","PXRMXSEL",54,0)
 .;Build ^TMP for selected patients 
"RTN","PXRMXSEL",55,0)
 .S DFN="",FOUND=0
"RTN","PXRMXSEL",56,0)
 .F  S DFN=$O(PATS(DFN)) Q:DFN=""  D TMP(HLOCIEN) I 'FOUND S FOUND=1
"RTN","PXRMXSEL",57,0)
 .I FOUND D MARK
"RTN","PXRMXSEL",58,0)
 Q
"RTN","PXRMXSEL",59,0)
 ;
"RTN","PXRMXSEL",60,0)
 ;Scan visit file to build list of patients
"RTN","PXRMXSEL",61,0)
VISITS N BD,CLINIEN,ED,HLOCIEN,HLOCNAM,FOUND,FACILITY,CGRPIEN
"RTN","PXRMXSEL",62,0)
 N PRVCNT,PRVIEN,VIEN,VISIT,IC
"RTN","PXRMXSEL",63,0)
 N DFN,PNAM,NAM
"RTN","PXRMXSEL",64,0)
 S NAM="All Locations"
"RTN","PXRMXSEL",65,0)
 ;
"RTN","PXRMXSEL",66,0)
 S BD=PXRMBDT-.0001
"RTN","PXRMXSEL",67,0)
 S ED=PXRMEDT+.2359
"RTN","PXRMXSEL",68,0)
 ;Get Date ; DBIA 2028
"RTN","PXRMXSEL",69,0)
 F  S BD=$O(^AUPNVSIT("B",BD)) Q:BD>ED  Q:BD=""  Q:ZTSTOP=1  D
"RTN","PXRMXSEL",70,0)
 .;Display busy 
"RTN","PXRMXSEL",71,0)
 .I '(PXRMQUE!$D(IO("S"))!(PXRMTABS="Y")) D SPIN^PXRMXBSY("Sorting Encounters",.BUSY)
"RTN","PXRMXSEL",72,0)
 .S VIEN=0
"RTN","PXRMXSEL",73,0)
 .;Get individual visit
"RTN","PXRMXSEL",74,0)
 .F  S VIEN=$O(^AUPNVSIT("B",BD,VIEN)) Q:VIEN=""  Q:ZTSTOP=1  D
"RTN","PXRMXSEL",75,0)
 ..;Check if stop task requested
"RTN","PXRMXSEL",76,0)
 ..I $$S^%ZTLOAD S ZTSTOP=1 Q
"RTN","PXRMXSEL",77,0)
 ..D SCREEN
"RTN","PXRMXSEL",78,0)
 Q
"RTN","PXRMXSEL",79,0)
 ;
"RTN","PXRMXSEL",80,0)
 ;Screen Individual Visit
"RTN","PXRMXSEL",81,0)
SCREEN S VISIT=$G(^AUPNVSIT(VIEN,0)) Q:VISIT=""
"RTN","PXRMXSEL",82,0)
 ;Facility
"RTN","PXRMXSEL",83,0)
 S FACILITY=$P(VISIT,U,6) S:FACILITY="" FACILITY=+$P($$SITE^VASITE,U,3)
"RTN","PXRMXSEL",84,0)
 Q:FACILITY=""  Q:'$D(PXRMFACN(FACILITY))
"RTN","PXRMXSEL",85,0)
 ;
"RTN","PXRMXSEL",86,0)
 ;
"RTN","PXRMXSEL",87,0)
 ;Service categories (ex-PXRR)
"RTN","PXRMXSEL",88,0)
 I PXRMSCAT'[$P(VISIT,U,7) Q
"RTN","PXRMXSEL",89,0)
 ;
"RTN","PXRMXSEL",90,0)
 S FOUND=0
"RTN","PXRMXSEL",91,0)
 ;
"RTN","PXRMXSEL",92,0)
 ;Selected Clinic stops
"RTN","PXRMXSEL",93,0)
 I PXRMSEL="L",($E(PXRMLCSC)="C") D  Q:'FOUND
"RTN","PXRMXSEL",94,0)
 .S CLINIEN=$P(VISIT,U,8) Q:CLINIEN=""
"RTN","PXRMXSEL",95,0)
 .I $P(PXRMLCSC,U,1)="CS" D  Q:'FOUND
"RTN","PXRMXSEL",96,0)
 ..S IC=$G(PXRMCSN(CLINIEN)) Q:IC=""
"RTN","PXRMXSEL",97,0)
 ..;Mark the clinic as matched
"RTN","PXRMXSEL",98,0)
 ..S FOUND=1 D MARK
"RTN","PXRMXSEL",99,0)
 ..S HLOCNAM=$P(^DIC(40.7,CLINIEN,0),U,1)_U_CLINIEN ; DBIA 557
"RTN","PXRMXSEL",100,0)
 ..S NAM=$P(HLOCNAM,U,1)_" "_$P(PXRMCS(IC),U,3)
"RTN","PXRMXSEL",101,0)
 .S FOUND=1
"RTN","PXRMXSEL",102,0)
 ;
"RTN","PXRMXSEL",103,0)
 ;Selected Clinic Groups
"RTN","PXRMXSEL",104,0)
 I PXRMSEL="L",($E(PXRMLCSC)="G") D  Q:'FOUND
"RTN","PXRMXSEL",105,0)
 .S HLOCIEN=$P(VISIT,U,22) Q:HLOCIEN=""
"RTN","PXRMXSEL",106,0)
 .; Check if location is in clinic group ; DBIA 2804
"RTN","PXRMXSEL",107,0)
 .S CGRPIEN=$P($G(^SC(HLOCIEN,0)),U,31) Q:CGRPIEN=""
"RTN","PXRMXSEL",108,0)
 .I $P(PXRMLCSC,U,1)="GS" D  Q:'FOUND
"RTN","PXRMXSEL",109,0)
 ..S IC=$G(PXRMCGRN(CGRPIEN)) Q:IC=""
"RTN","PXRMXSEL",110,0)
 ..;Mark the clinic as matched
"RTN","PXRMXSEL",111,0)
 ..S FOUND=1 D MARK
"RTN","PXRMXSEL",112,0)
 ..S HLOCNAM=$P(^SC(HLOCIEN,0),U,1)_U_HLOCIEN
"RTN","PXRMXSEL",113,0)
 ..S NAM=$P(HLOCNAM,U,1)
"RTN","PXRMXSEL",114,0)
 .S FOUND=1
"RTN","PXRMXSEL",115,0)
 ;
"RTN","PXRMXSEL",116,0)
 ;Selected Locations
"RTN","PXRMXSEL",117,0)
 I PXRMSEL="L",($E(PXRMLCSC)="H") D  Q:'FOUND
"RTN","PXRMXSEL",118,0)
 .S HLOCIEN=$P(VISIT,U,22) Q:HLOCIEN=""
"RTN","PXRMXSEL",119,0)
 .;All inpatient locations - location must be a ward
"RTN","PXRMXSEL",120,0)
 .I $P(PXRMLCSC,U)="HAI" S:$D(^SC(HLOCIEN,42)) FOUND=1 Q
"RTN","PXRMXSEL",121,0)
 .;All outpatient locations - location cannot be a ward
"RTN","PXRMXSEL",122,0)
 .I $P(PXRMLCSC,U)="HA" D  Q
"RTN","PXRMXSEL",123,0)
 ..I '$D(^SC(HLOCIEN,42)) S FOUND=1,NAM=$P(^SC(HLOCIEN,0),U,1)
"RTN","PXRMXSEL",124,0)
 .;Selected locations
"RTN","PXRMXSEL",125,0)
 .I $P(PXRMLCSC,U,1)="HS" D  Q:'FOUND
"RTN","PXRMXSEL",126,0)
 ..S IC=$G(PXRMLOCN(HLOCIEN)) Q:IC=""
"RTN","PXRMXSEL",127,0)
 ..;Mark the location as matched
"RTN","PXRMXSEL",128,0)
 ..S FOUND=1 D MARK
"RTN","PXRMXSEL",129,0)
 ..S CLINIEN=$P(^SC(HLOCIEN,0),U,7)
"RTN","PXRMXSEL",130,0)
 ..S HLOCNAM=$P(^SC(HLOCIEN,0),U,1)_U_HLOCIEN
"RTN","PXRMXSEL",131,0)
 ..S NAM=$P(HLOCNAM,U,1)
"RTN","PXRMXSEL",132,0)
 .S FOUND=1
"RTN","PXRMXSEL",133,0)
 ;
"RTN","PXRMXSEL",134,0)
 S DFN=$P(VISIT,U,5)
"RTN","PXRMXSEL",135,0)
 ;Build patient list in ^TMP
"RTN","PXRMXSEL",136,0)
 I $E(PXRMLCSC)="C" D TMP(CLINIEN)
"RTN","PXRMXSEL",137,0)
 I $E(PXRMLCSC)="G" D TMP(CGRPIEN)
"RTN","PXRMXSEL",138,0)
 I $E(PXRMLCSC)="H" D TMP(HLOCIEN)
"RTN","PXRMXSEL",139,0)
 Q
"RTN","PXRMXSEL",140,0)
 ;
"RTN","PXRMXSEL",141,0)
 ;Scan Future Appointments
"RTN","PXRMXSEL",142,0)
APPTS N II,IC,HLOCIEN,CLINIEN,BD,ED,NAM,FACILITY,DFN,PNAM
"RTN","PXRMXSEL",143,0)
 S NAM="All Locations"
"RTN","PXRMXSEL",144,0)
 ;
"RTN","PXRMXSEL",145,0)
 ;If all locations/clinics selected
"RTN","PXRMXSEL",146,0)
 I $E(PXRMLCSC,2)="A" D
"RTN","PXRMXSEL",147,0)
 .S HLOCIEN=0
"RTN","PXRMXSEL",148,0)
 .F  S HLOCIEN=$O(^SC(HLOCIEN)) Q:'HLOCIEN  D  Q:ZTSTOP=1  ; DBIA 2804
"RTN","PXRMXSEL",149,0)
 ..I $E(PXRMLCSC)="C" D
"RTN","PXRMXSEL",150,0)
 ...S CLINIEN=$P(^SC(HLOCIEN,0),U,7)
"RTN","PXRMXSEL",151,0)
 ..D SC
"RTN","PXRMXSEL",152,0)
 ;If selected locations
"RTN","PXRMXSEL",153,0)
 I $P(PXRMLCSC,U,1)="HS" D  Q:ZTSTOP=1
"RTN","PXRMXSEL",154,0)
 .F IC=1:1:NHL D
"RTN","PXRMXSEL",155,0)
 ..S HLOCIEN=$P(PXRMLCHL(IC),U,2)
"RTN","PXRMXSEL",156,0)
 ..S NAM=$P(^SC(HLOCIEN,0),U,1)
"RTN","PXRMXSEL",157,0)
 ..D SC
"RTN","PXRMXSEL",158,0)
 ;If selected clinics
"RTN","PXRMXSEL",159,0)
 I $P(PXRMLCSC,U,1)="CS" D
"RTN","PXRMXSEL",160,0)
 .F IC=1:1:NCS D  Q:ZTSTOP=1
"RTN","PXRMXSEL",161,0)
 ..S CLINIEN=$P(PXRMCS(IC),U,2)
"RTN","PXRMXSEL",162,0)
 ..S NAM=$P(^DIC(40.7,CLINIEN,0),U)_" "_$P(PXRMCS(IC),U,3)
"RTN","PXRMXSEL",163,0)
 ..S HLOCIEN=0
"RTN","PXRMXSEL",164,0)
 ..;Get all Locations for this CLINIC STOP
"RTN","PXRMXSEL",165,0)
 ..F  S HLOCIEN=$O(^SC(HLOCIEN)) Q:'HLOCIEN  D
"RTN","PXRMXSEL",166,0)
 ...;Get appointments for the location
"RTN","PXRMXSEL",167,0)
 ...I $P(^SC(HLOCIEN,0),U,7)=CLINIEN D SC
"RTN","PXRMXSEL",168,0)
 ;If selected clinic groups
"RTN","PXRMXSEL",169,0)
 I $P(PXRMLCSC,U,1)="GS" D
"RTN","PXRMXSEL",170,0)
 .F IC=1:1:NCGRP D  Q:ZTSTOP=1
"RTN","PXRMXSEL",171,0)
 ..S CGRPIEN=$P(PXRMCGRP(IC),U)
"RTN","PXRMXSEL",172,0)
 ..S HLOCIEN=0
"RTN","PXRMXSEL",173,0)
 ..;Get all Locations for this CLINIC GROUP
"RTN","PXRMXSEL",174,0)
 ..F  S HLOCIEN=$O(^SC(HLOCIEN)) Q:'HLOCIEN  D
"RTN","PXRMXSEL",175,0)
 ...S NAM=$P(^SC(HLOCIEN,0),U,1)
"RTN","PXRMXSEL",176,0)
 ...;Get appointments for the location
"RTN","PXRMXSEL",177,0)
 ...I $P(^SC(HLOCIEN,0),U,31)=CGRPIEN D SC
"RTN","PXRMXSEL",178,0)
 Q
"RTN","PXRMXSEL",179,0)
 ;
"RTN","PXRMXSEL",180,0)
 ;Appointments for date amd location selected
"RTN","PXRMXSEL",181,0)
SC N FIRST
"RTN","PXRMXSEL",182,0)
 S BD=PXRMBDT-.0001,ED=PXRMEDT+.2359,FIRST=1
"RTN","PXRMXSEL",183,0)
 F  S BD=$O(^SC(HLOCIEN,"S",BD)) Q:(BD>ED)!(BD="")  D
"RTN","PXRMXSEL",184,0)
 .I '(PXRMQUE!$D(IO("S"))!(PXRMTABS="Y")) D SPIN^PXRMXBSY("Sorting appointments",.BUSY)
"RTN","PXRMXSEL",185,0)
 .S II=0
"RTN","PXRMXSEL",186,0)
 .F  S II=$O(^SC(HLOCIEN,"S",BD,1,II)) Q:+II=0  D  Q:ZTSTOP=1
"RTN","PXRMXSEL",187,0)
 ..;End task requested
"RTN","PXRMXSEL",188,0)
 ..I $$S^%ZTLOAD S ZTSTOP=1 Q
"RTN","PXRMXSEL",189,0)
 ..;Ignore cancelled/rescheduled appointments
"RTN","PXRMXSEL",190,0)
 ..I $P(^SC(HLOCIEN,"S",BD,1,II,0),U,9)="C" Q
"RTN","PXRMXSEL",191,0)
 ..S DFN=$P(^SC(HLOCIEN,"S",BD,1,II,0),U,1)
"RTN","PXRMXSEL",192,0)
 ..;Mark location/clinic stop as matched
"RTN","PXRMXSEL",193,0)
 ..I $E(PXRMLCSC,1,2)="HS" S $P(PXRMLCHL(IC),U,5)="M"
"RTN","PXRMXSEL",194,0)
 ..I $E(PXRMLCSC,1,2)="CS" S $P(PXRMCS(IC),U,5)="M"
"RTN","PXRMXSEL",195,0)
 ..I $E(PXRMLCSC,1,2)="GS" S $P(PXRMCGRP(IC),U,5)="M"
"RTN","PXRMXSEL",196,0)
 ..;Build patient list
"RTN","PXRMXSEL",197,0)
 ..S FACILITY=$P(^SC(HLOCIEN,0),U,4)
"RTN","PXRMXSEL",198,0)
 ..I FACILITY="" S FACILITY=+$P($$SITE^VASITE,U,3)
"RTN","PXRMXSEL",199,0)
 ..Q:FACILITY=""  Q:'$D(PXRMFACN(FACILITY))
"RTN","PXRMXSEL",200,0)
 ..I $E(PXRMLCSC,2)="S",FIRST D MARK S FIRST=0
"RTN","PXRMXSEL",201,0)
 ..I $E(PXRMLCSC)="C" D TMP(CLINIEN)
"RTN","PXRMXSEL",202,0)
 ..I $E(PXRMLCSC)="G" D TMP(CGRPIEN)
"RTN","PXRMXSEL",203,0)
 ..I $E(PXRMLCSC)="H" D TMP(HLOCIEN)
"RTN","PXRMXSEL",204,0)
 Q
"RTN","PXRMXSEO")
0^14^B85514544
"RTN","PXRMXSEO",1,0)
PXRMXSEO ; SLC/PJH - Build Patient list SUBROUTINES;01/15/2002
"RTN","PXRMXSEO",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXSEO",3,0)
 ;
"RTN","PXRMXSEO",4,0)
 ; Called by label from PXRMXSE
"RTN","PXRMXSEO",5,0)
 ;
"RTN","PXRMXSEO",6,0)
 ;OE/RR team selected (PXRMOTM)
"RTN","PXRMXSEO",7,0)
OERR N II,NAM,OTM
"RTN","PXRMXSEO",8,0)
 S II=""
"RTN","PXRMXSEO",9,0)
 ;Get patient list for each team
"RTN","PXRMXSEO",10,0)
 F  S II=$O(PXRMOTM(II)) Q:II=""  D
"RTN","PXRMXSEO",11,0)
 .S OTM=$P(PXRMOTM(II),U),NAM=$P(PXRMOTM(II),U,2)
"RTN","PXRMXSEO",12,0)
 .;Build list of patients for OE/RR team ; DBIA 2692
"RTN","PXRMXSEO",13,0)
 .D TEAMPTS^ORQPTQ1("^TMP($J,""OTM"",",OTM,1)
"RTN","PXRMXSEO",14,0)
 .I $G(^TMP($J,"OTM",1))["No patients found" Q
"RTN","PXRMXSEO",15,0)
 .D UPD("OTM","OTM")
"RTN","PXRMXSEO",16,0)
 .D MARK
"RTN","PXRMXSEO",17,0)
 Q
"RTN","PXRMXSEO",18,0)
 ; 
"RTN","PXRMXSEO",19,0)
 ;PCMM team selected (PXRMPCM)
"RTN","PXRMXSEO",20,0)
PCMMT N SCDT,LIST,SCERR,SCLIST,II,PCM,NAM,PNAM,OK
"RTN","PXRMXSEO",21,0)
 S SCDT("BEGIN")=PXRMSDT,SCDT("END")=PXRMSDT
"RTN","PXRMXSEO",22,0)
 ;Include patient if in team on any day in range
"RTN","PXRMXSEO",23,0)
 S SCDT("INCL")=0
"RTN","PXRMXSEO",24,0)
 S II=""
"RTN","PXRMXSEO",25,0)
 ;Get patient list for each team
"RTN","PXRMXSEO",26,0)
 F  S II=$O(PXRMPCM(II)) Q:II=""  D
"RTN","PXRMXSEO",27,0)
 .S PCM=$P(PXRMPCM(II),U),NAM=$P(PXRMPCM(II),U,2)
"RTN","PXRMXSEO",28,0)
 .S OK=$$PTTM^PXRMXAP(PCM,.SCERR) Q:'OK
"RTN","PXRMXSEO",29,0)
 .I $O(^TMP($J,"PCM",0))="" Q
"RTN","PXRMXSEO",30,0)
 .D DUP ; Remove duplicate entries
"RTN","PXRMXSEO",31,0)
 .D UPD("PCM","PCM")
"RTN","PXRMXSEO",32,0)
 .D MARK
"RTN","PXRMXSEO",33,0)
 Q
"RTN","PXRMXSEO",34,0)
 ;
"RTN","PXRMXSEO",35,0)
 ;PCMM provider selected (PXRMPRV)
"RTN","PXRMXSEO",36,0)
PCMMP N SCDT,LIST,SCERR,SCLIST,II,PCM,NAM,PNAM,OK
"RTN","PXRMXSEO",37,0)
 S SCDT("BEGIN")=PXRMSDT,SCDT("END")=PXRMSDT
"RTN","PXRMXSEO",38,0)
 ;Include patient if in team on any day in range
"RTN","PXRMXSEO",39,0)
 S SCDT("INCL")=0
"RTN","PXRMXSEO",40,0)
 S II=""
"RTN","PXRMXSEO",41,0)
 ;Get patient list for each PROVIDER
"RTN","PXRMXSEO",42,0)
 F  S II=$O(PXRMPRV(II)) Q:II=""  D
"RTN","PXRMXSEO",43,0)
 .S PCM=$P(PXRMPRV(II),U),NAM=$P(PXRMPRV(II),U,2)
"RTN","PXRMXSEO",44,0)
 .;Get patients for practs. roles - excluding assoc clinics
"RTN","PXRMXSEO",45,0)
 .N SCTEAM D PTPR^PXRMXAP(PCM,PXRMREP)
"RTN","PXRMXSEO",46,0)
 .I $O(^TMP($J,"PCM",0))="" Q
"RTN","PXRMXSEO",47,0)
 .D DUP ; Remove duplicate entries
"RTN","PXRMXSEO",48,0)
 .;Save in ^TMP in alpha order within team number (internal)
"RTN","PXRMXSEO",49,0)
 .D UPD("PCM","PCM")
"RTN","PXRMXSEO",50,0)
 .D MARK
"RTN","PXRMXSEO",51,0)
 Q
"RTN","PXRMXSEO",52,0)
 ;
"RTN","PXRMXSEO",53,0)
 ;Individual Patients selected (PXRMPAT)
"RTN","PXRMXSEO",54,0)
IND N DUMMY,LIST,NAM
"RTN","PXRMXSEO",55,0)
 S (DUMMY,NAM)="PATIENT"
"RTN","PXRMXSEO",56,0)
 M ^TMP($J,"PAT")=PXRMPAT
"RTN","PXRMXSEO",57,0)
 D UPD("DUMMY","PAT")
"RTN","PXRMXSEO",58,0)
 Q
"RTN","PXRMXSEO",59,0)
 ;
"RTN","PXRMXSEO",60,0)
 ;Process ^TMP patients for PXRMSEL="L"
"RTN","PXRMXSEO",61,0)
XTMP N SUB,TEMP,PX
"RTN","PXRMXSEO",62,0)
 S SUB="NAM",TEMP=0,PX="PXRM"
"RTN","PXRMXSEO",63,0)
 N DFN,PNAM,FACILITY,NAM,DDUE,DNEXT,DLAST,DDAT
"RTN","PXRMXSEO",64,0)
 S FACILITY="",DDAT="N/A"
"RTN","PXRMXSEO",65,0)
 F  S FACILITY=$O(^TMP(PXRMRT,$J,FACILITY)) Q:FACILITY=""  D
"RTN","PXRMXSEO",66,0)
 .S NAM=""
"RTN","PXRMXSEO",67,0)
 .F  S NAM=$O(^TMP(PXRMRT,$J,FACILITY,NAM)) Q:NAM=""  D
"RTN","PXRMXSEO",68,0)
 ..S DFN=""
"RTN","PXRMXSEO",69,0)
 ..F  S DFN=$O(^TMP(PXRMRT,$J,FACILITY,NAM,DFN)) Q:DFN=""  D
"RTN","PXRMXSEO",70,0)
 ...;Ignore test patients SSN=000-00-...
"RTN","PXRMXSEO",71,0)
 ...I $P($G(^XTMP("PXRMDFN"_DFN,"SSN")),"-",2,3)="000-00" Q
"RTN","PXRMXSEO",72,0)
 ...S TEMP=TEMP+1
"RTN","PXRMXSEO",73,0)
 ...I '(PXRMQUE!$D(IO("S"))!(PXRMTABS="Y")) D
"RTN","PXRMXSEO",74,0)
 ....D SPIN^PXRMXBSY("Evaluating Reminders",.BUSY)
"RTN","PXRMXSEO",75,0)
 ...I PXRMREP="D" D SDET
"RTN","PXRMXSEO",76,0)
 ...I PXRMREP="S" D SSUM
"RTN","PXRMXSEO",77,0)
 Q
"RTN","PXRMXSEO",78,0)
 ;
"RTN","PXRMXSEO",79,0)
 ;
"RTN","PXRMXSEO",80,0)
 ;Transfer patient lists in ^TMP into ^XTMP
"RTN","PXRMXSEO",81,0)
UPD(SUB,SUB1) ;
"RTN","PXRMXSEO",82,0)
 N JJ,DFN,PNAM,PAT,FACILITY,PX
"RTN","PXRMXSEO",83,0)
 N DDUE,DLAST,DNEXT,DDAT,DCLN
"RTN","PXRMXSEO",84,0)
 ;Ignore facilities
"RTN","PXRMXSEO",85,0)
 S FACILITY="FACILITY",DDAT="N/A"
"RTN","PXRMXSEO",86,0)
 ;Except for PCMM team report
"RTN","PXRMXSEO",87,0)
 I PXRMSEL="T" S FACILITY=$$FAC^PXRMXAP(@SUB1)
"RTN","PXRMXSEO",88,0)
 ;
"RTN","PXRMXSEO",89,0)
 S PAT="0",PX="PXRM"
"RTN","PXRMXSEO",90,0)
 F JJ=1:1 S PAT=$O(^TMP($J,SUB1,PAT)) Q:'PAT  D
"RTN","PXRMXSEO",91,0)
 .I '(PXRMQUE!$D(IO("S"))!(PXRMTABS="Y")) D
"RTN","PXRMXSEO",92,0)
 ..D SPIN^PXRMXBSY("Evaluating reminders",.BUSY)
"RTN","PXRMXSEO",93,0)
 .S DFN=$P(^TMP($J,SUB1,PAT),U),PNAM=$P(^TMP($J,SUB1,PAT),U,2)
"RTN","PXRMXSEO",94,0)
 .;Ignore test patients SSN=000-00-...
"RTN","PXRMXSEO",95,0)
 .I (PXRMSEL'="I"),$P($G(^XTMP("PXRMDFN"_DFN,"SSN")),"-",2,3)="000-00" Q
"RTN","PXRMXSEO",96,0)
 .;For provider reports check if assigned as primary
"RTN","PXRMXSEO",97,0)
 .I PXRMSEL="P",PXRMPRIM="P",($$PCASSIGN^PXRMXAP(DFN)'=1) Q
"RTN","PXRMXSEO",98,0)
 .;For detailed provider report get assoc clinic
"RTN","PXRMXSEO",99,0)
 .I PXRMSEL="P",PXRMREP="D" S DCLN=$P(^TMP($J,SUB1,PAT),U,7)
"RTN","PXRMXSEO",100,0)
 .D:PXRMREP="D" SDET
"RTN","PXRMXSEO",101,0)
 .D:PXRMREP="S" SSUM
"RTN","PXRMXSEO",102,0)
 K ^TMP($J,SUB1)
"RTN","PXRMXSEO",103,0)
 Q
"RTN","PXRMXSEO",104,0)
 ;
"RTN","PXRMXSEO",105,0)
 ;
"RTN","PXRMXSEO",106,0)
 ;Detailed report
"RTN","PXRMXSEO",107,0)
SDET I $G(^XTMP(PXRMXTMP,PX,FACILITY,@SUB))="" D
"RTN","PXRMXSEO",108,0)
 .S ^XTMP(PXRMXTMP,PX,FACILITY,@SUB)=NAM
"RTN","PXRMXSEO",109,0)
 ;Applicable
"RTN","PXRMXSEO",110,0)
 N APPL,STATUS S APPL=0,STATUS=""
"RTN","PXRMXSEO",111,0)
 ;Check if due and/or applicable (active reminder for live patient)
"RTN","PXRMXSEO",112,0)
 I $P($G(^PXD(811.9,ITEM,0)),U,6)'=1 D
"RTN","PXRMXSEO",113,0)
 .D DATE^PXRM(DFN,ITEM,5,1,PXRMSDT)
"RTN","PXRMXSEO",114,0)
 .;Quit if nothing returned
"RTN","PXRMXSEO",115,0)
 .S STATUS=$P($G(^TMP("PXRHM",$J,ITEM,LIT)),U) Q:STATUS=""
"RTN","PXRMXSEO",116,0)
 .;Exclude dead patients from applicable
"RTN","PXRMXSEO",117,0)
 .I $G(^XTMP("PXRMDFN"_DFN,"DOD"))'="" Q
"RTN","PXRMXSEO",118,0)
 .;Add any that aren't N/A, Ignore on N/A or NEVER to applicable total
"RTN","PXRMXSEO",119,0)
 .I (STATUS'=" ")&(STATUS'["NEVER")&(STATUS'["N/A")&(STATUS'="ERROR") S APPL=1
"RTN","PXRMXSEO",120,0)
 ;
"RTN","PXRMXSEO",121,0)
 ;If DUE NOW save details
"RTN","PXRMXSEO",122,0)
 I STATUS["DUE NOW" D
"RTN","PXRMXSEO",123,0)
 .S DDUE=$P($G(^TMP("PXRHM",$J,ITEM,LIT)),U,2)
"RTN","PXRMXSEO",124,0)
 .S DLAST=$P($G(^TMP("PXRHM",$J,ITEM,LIT)),U,3)
"RTN","PXRMXSEO",125,0)
 .;Next appointment for location or clinic
"RTN","PXRMXSEO",126,0)
 .I PXRMSEL="L" D
"RTN","PXRMXSEO",127,0)
 ..I $E(PXRMLCSC,2)'="A" D DNEXT($G(^TMP("PXRMX",$J,FACILITY,NAM,DFN)))
"RTN","PXRMXSEO",128,0)
 ..I $E(PXRMLCSC,2)="A" D DNEXT("")
"RTN","PXRMXSEO",129,0)
 ..S PNAM=$G(^XTMP("PXRMDFN"_DFN,"PATIENT"))
"RTN","PXRMXSEO",130,0)
 ..; Allow for cache being rebuilt for another user
"RTN","PXRMXSEO",131,0)
 ..I PNAM="" S PNAM=" "
"RTN","PXRMXSEO",132,0)
 .;Next appointment date at any location
"RTN","PXRMXSEO",133,0)
 .I PXRMSEL'="L" D
"RTN","PXRMXSEO",134,0)
 ..;For detailed provider report get next appoint. for assoc. clinic
"RTN","PXRMXSEO",135,0)
 ..I PXRMREP="D",PXRMSEL="P" S DNEXT="" D:DCLN'="" DNEXT(DCLN) Q
"RTN","PXRMXSEO",136,0)
 ..;Otherwise get next appointment for centre
"RTN","PXRMXSEO",137,0)
 ..D DNEXT("")
"RTN","PXRMXSEO",138,0)
 .;Sort by next appointment date
"RTN","PXRMXSEO",139,0)
 .I PXRMSRT="Y" S DDAT=$P(DNEXT,".") S:DDAT="" DDAT="NONE"
"RTN","PXRMXSEO",140,0)
 .;Patient ward/bed used only for inpatient reports
"RTN","PXRMXSEO",141,0)
 .N BED,TXT S BED=""
"RTN","PXRMXSEO",142,0)
 .S TXT=DFN_U_DDUE_U_DLAST_U_DNEXT
"RTN","PXRMXSEO",143,0)
 .I $G(PXRMINP) D
"RTN","PXRMXSEO",144,0)
 ..S BED=$G(^DPT(DFN,.101)) S:BED="" BED="NONE"
"RTN","PXRMXSEO",145,0)
 ..S TXT=TXT_U_BED
"RTN","PXRMXSEO",146,0)
 ..;Sort by bed
"RTN","PXRMXSEO",147,0)
 ..I PXRMSRT="B" S DDAT=BED
"RTN","PXRMXSEO",148,0)
 .;Duplicate check for combined report
"RTN","PXRMXSEO",149,0)
 .I PXRMFCMB="Y",'$$NEW(SUB,DDAT,PNAM) Q
"RTN","PXRMXSEO",150,0)
 .;Save entry in ^XTMP
"RTN","PXRMXSEO",151,0)
 .S ^XTMP(PXRMXTMP,PX,FACILITY,@SUB,DDAT,PNAM)=TXT
"RTN","PXRMXSEO",152,0)
 .;Total of reminders overdue
"RTN","PXRMXSEO",153,0)
 .N CNT
"RTN","PXRMXSEO",154,0)
 .S CNT=$P(^XTMP(PXRMXTMP,PX,FACILITY,@SUB),U,2)
"RTN","PXRMXSEO",155,0)
 .S $P(^XTMP(PXRMXTMP,PX,FACILITY,@SUB),U,2)=CNT+1
"RTN","PXRMXSEO",156,0)
 ;Total of patients checked/applicable
"RTN","PXRMXSEO",157,0)
 N CNT,NEW
"RTN","PXRMXSEO",158,0)
 S NEW=1 I PXRMFCMB="Y" S NEW=$$NEWP(SUB,DFN)
"RTN","PXRMXSEO",159,0)
 I NEW D
"RTN","PXRMXSEO",160,0)
 .S CNT=$P(^XTMP(PXRMXTMP,PX,FACILITY,@SUB),U,3)
"RTN","PXRMXSEO",161,0)
 .S $P(^XTMP(PXRMXTMP,PX,FACILITY,@SUB),U,3)=CNT+1
"RTN","PXRMXSEO",162,0)
 .S CNT=$P(^XTMP(PXRMXTMP,PX,FACILITY,@SUB),U,4)
"RTN","PXRMXSEO",163,0)
 .S $P(^XTMP(PXRMXTMP,PX,FACILITY,@SUB),U,4)=CNT+APPL
"RTN","PXRMXSEO",164,0)
 K ^TMP("PXRM",$J),^TMP("PXRHM",$J)
"RTN","PXRMXSEO",165,0)
 Q
"RTN","PXRMXSEO",166,0)
 ;
"RTN","PXRMXSEO",167,0)
 ;Find next appointment date
"RTN","PXRMXSEO",168,0)
DNEXT(IEN) ;
"RTN","PXRMXSEO",169,0)
 N FOUND
"RTN","PXRMXSEO",170,0)
 S DNEXT=TODAY,FOUND=0
"RTN","PXRMXSEO",171,0)
 F  S DNEXT=$O(^DPT(DFN,"S",DNEXT)) Q:DNEXT=""  D  Q:FOUND  ; DBIA 1301
"RTN","PXRMXSEO",172,0)
 .;Ignore cancelled appointments
"RTN","PXRMXSEO",173,0)
 .I $P($G(^DPT(DFN,"S",DNEXT,0)),U,2)["C" Q
"RTN","PXRMXSEO",174,0)
 .I (IEN>0),(+$P($G(^DPT(DFN,"S",DNEXT,0)),U)'=IEN) Q
"RTN","PXRMXSEO",175,0)
 .S FOUND=1
"RTN","PXRMXSEO",176,0)
 Q
"RTN","PXRMXSEO",177,0)
 ;
"RTN","PXRMXSEO",178,0)
 ;Summary report
"RTN","PXRMXSEO",179,0)
SSUM N CNT,INAM
"RTN","PXRMXSEO",180,0)
 S (ITEM,CNT)=""
"RTN","PXRMXSEO",181,0)
 ;Check each reminder in the list
"RTN","PXRMXSEO",182,0)
 F  S CNT=$O(REMINDER(CNT)) Q:CNT=""  D
"RTN","PXRMXSEO",183,0)
 .S ITEM=$P(REMINDER(CNT),U,1)
"RTN","PXRMXSEO",184,0)
 .S LIT=$P(REMINDER(CNT),U,4)
"RTN","PXRMXSEO",185,0)
 .S:LIT="" LIT=$P(REMINDER(CNT),U,2)
"RTN","PXRMXSEO",186,0)
 .D SSUMX
"RTN","PXRMXSEO",187,0)
 ;Total of patients
"RTN","PXRMXSEO",188,0)
 I "IR"[PXRMTOT D
"RTN","PXRMXSEO",189,0)
 .I $G(^XTMP(PXRMXTMP,PX,FACILITY,@SUB))="" D
"RTN","PXRMXSEO",190,0)
 ..S ^XTMP(PXRMXTMP,PX,FACILITY,@SUB)=NAM
"RTN","PXRMXSEO",191,0)
 .N CNT
"RTN","PXRMXSEO",192,0)
 .S CNT=$P($G(^XTMP(PXRMXTMP,PX,FACILITY,@SUB)),U,3)
"RTN","PXRMXSEO",193,0)
 .S $P(^XTMP(PXRMXTMP,PX,FACILITY,@SUB),U,3)=CNT+1
"RTN","PXRMXSEO",194,0)
 ;Total reports
"RTN","PXRMXSEO",195,0)
 I "TR"[PXRMTOT D
"RTN","PXRMXSEO",196,0)
 .I '$$NEWT(FACILITY,DFN) Q
"RTN","PXRMXSEO",197,0)
 .I $G(^XTMP(PXRMXTMP,PX,FACILITY,"TOTAL"))="" D
"RTN","PXRMXSEO",198,0)
 ..S ^XTMP(PXRMXTMP,PX,FACILITY,"TOTAL")=NAM
"RTN","PXRMXSEO",199,0)
 .N CNT
"RTN","PXRMXSEO",200,0)
 .S CNT=$P($G(^XTMP(PXRMXTMP,PX,FACILITY,"TOTAL")),U,3)
"RTN","PXRMXSEO",201,0)
 .S $P(^XTMP(PXRMXTMP,PX,FACILITY,"TOTAL"),U,3)=CNT+1
"RTN","PXRMXSEO",202,0)
 Q
"RTN","PXRMXSEO",203,0)
 ; 
"RTN","PXRMXSEO",204,0)
 ;Evaluate reminders for patient
"RTN","PXRMXSEO",205,0)
SSUMX N DUE,EVAL S DUE=0,EVAL=0
"RTN","PXRMXSEO",206,0)
 ;Check if due (active reminders only)
"RTN","PXRMXSEO",207,0)
 I $P($G(^PXD(811.9,ITEM,0)),U,6)'=1 D
"RTN","PXRMXSEO",208,0)
 .;Evaluate reminder
"RTN","PXRMXSEO",209,0)
 .D DATE^PXRM(DFN,ITEM,5,1,PXRMSDT)
"RTN","PXRMXSEO",210,0)
 .;Quit if nothing returned
"RTN","PXRMXSEO",211,0)
 .I $G(^TMP("PXRHM",$J,ITEM,LIT))="" Q
"RTN","PXRMXSEO",212,0)
 .;Exclude dead patients from applicable
"RTN","PXRMXSEO",213,0)
 .I $G(^XTMP("PXRMDFN"_DFN,"DOD"))'="" Q
"RTN","PXRMXSEO",214,0)
 .;Extract status
"RTN","PXRMXSEO",215,0)
 .N STATUS S STATUS=$P($G(^TMP("PXRHM",$J,ITEM,LIT)),U)
"RTN","PXRMXSEO",216,0)
 .;Add dues to totals of reminders due and reminders applicable
"RTN","PXRMXSEO",217,0)
 .I STATUS["DUE NOW" S DUE=1,EVAL=1 Q
"RTN","PXRMXSEO",218,0)
 .;Add any that aren't N/A, Ignore on N/A,ERROR or NEVER to applicable total
"RTN","PXRMXSEO",219,0)
 .I (STATUS'=" ")&(STATUS'["NEVER")&(STATUS'="N/A")&(STATUS'="ERROR") S EVAL=1
"RTN","PXRMXSEO",220,0)
 ;
"RTN","PXRMXSEO",221,0)
 ;Update XTMP - Total of reminders due
"RTN","PXRMXSEO",222,0)
 I "IR"[PXRMTOT D
"RTN","PXRMXSEO",223,0)
 .;Combined facility duplicate check
"RTN","PXRMXSEO",224,0)
 .I PXRMFCMB="Y",'$$NEW(SUB,DFN,ITEM) Q
"RTN","PXRMXSEO",225,0)
 .N CNT
"RTN","PXRMXSEO",226,0)
 .S CNT=$P($G(^XTMP(PXRMXTMP,PX,FACILITY,@SUB,ITEM)),U,1)
"RTN","PXRMXSEO",227,0)
 .S $P(^XTMP(PXRMXTMP,PX,FACILITY,@SUB,ITEM),U,1)=CNT+EVAL
"RTN","PXRMXSEO",228,0)
 .;Total of reminders evaluated
"RTN","PXRMXSEO",229,0)
 .S CNT=$P($G(^XTMP(PXRMXTMP,PX,FACILITY,@SUB,ITEM)),U,2)
"RTN","PXRMXSEO",230,0)
 .S $P(^XTMP(PXRMXTMP,PX,FACILITY,@SUB,ITEM),U,2)=CNT+DUE
"RTN","PXRMXSEO",231,0)
 ;
"RTN","PXRMXSEO",232,0)
 ;Totals
"RTN","PXRMXSEO",233,0)
 I "RT"[PXRMTOT D
"RTN","PXRMXSEO",234,0)
 .;Check for duplicate patient at FACILITY level
"RTN","PXRMXSEO",235,0)
 .I $D(^TMP("PXRMDUP",$J,FACILITY,DFN,ITEM)) Q
"RTN","PXRMXSEO",236,0)
 .;Set duplicate check
"RTN","PXRMXSEO",237,0)
 .S ^TMP("PXRMDUP",$J,FACILITY,DFN,ITEM)=""
"RTN","PXRMXSEO",238,0)
 .I $G(^XTMP(PXRMXTMP,PX,FACILITY,"TOTAL"))="" D
"RTN","PXRMXSEO",239,0)
 ..S ^XTMP(PXRMXTMP,PX,FACILITY,"TOTAL")=NAM
"RTN","PXRMXSEO",240,0)
 .N CNT
"RTN","PXRMXSEO",241,0)
 .S CNT=$P($G(^XTMP(PXRMXTMP,PX,FACILITY,"TOTAL",ITEM)),U,1)
"RTN","PXRMXSEO",242,0)
 .S $P(^XTMP(PXRMXTMP,PX,FACILITY,"TOTAL",ITEM),U,1)=CNT+EVAL
"RTN","PXRMXSEO",243,0)
 .S CNT=$P($G(^XTMP(PXRMXTMP,PX,FACILITY,"TOTAL",ITEM)),U,2)
"RTN","PXRMXSEO",244,0)
 .S $P(^XTMP(PXRMXTMP,PX,FACILITY,"TOTAL",ITEM),U,2)=CNT+DUE
"RTN","PXRMXSEO",245,0)
 ;
"RTN","PXRMXSEO",246,0)
 K ^TMP("PXRM",$J),^TMP("PXRHM",$J)
"RTN","PXRMXSEO",247,0)
 Q
"RTN","PXRMXSEO",248,0)
 ;
"RTN","PXRMXSEO",249,0)
 ;Remove duplicate patient entries
"RTN","PXRMXSEO",250,0)
DUP N CNT,DFN,SUB
"RTN","PXRMXSEO",251,0)
 S CNT=0,SUB="PXRMSEO"
"RTN","PXRMXSEO",252,0)
 K ^TMP($J,SUB)
"RTN","PXRMXSEO",253,0)
 F  S CNT=$O(^TMP($J,"PCM",CNT)) Q:'CNT  D
"RTN","PXRMXSEO",254,0)
 .S DFN=$P(^TMP($J,"PCM",CNT),U)
"RTN","PXRMXSEO",255,0)
 .I $D(^TMP($J,SUB,DFN)) K ^TMP($J,"PCM",CNT) Q
"RTN","PXRMXSEO",256,0)
 .S ^TMP($J,SUB,DFN)=""
"RTN","PXRMXSEO",257,0)
 Q
"RTN","PXRMXSEO",258,0)
 ;
"RTN","PXRMXSEO",259,0)
 ;Mark selected item as found
"RTN","PXRMXSEO",260,0)
MARK S ^XTMP(PXRMXTMP,"MARKED AS FOUND",II)=""
"RTN","PXRMXSEO",261,0)
 Q
"RTN","PXRMXSEO",262,0)
 ;
"RTN","PXRMXSEO",263,0)
 ;Combined report duplicate check (Summary report)
"RTN","PXRMXSEO",264,0)
NEW(SUB,SUB1,SUB2) ;
"RTN","PXRMXSEO",265,0)
 ;Existing entry
"RTN","PXRMXSEO",266,0)
 I $D(^TMP("PXRMCMB",$J,@SUB,SUB1,SUB2)) Q 0
"RTN","PXRMXSEO",267,0)
 ;New entry
"RTN","PXRMXSEO",268,0)
 S ^TMP("PXRMCMB",$J,@SUB,SUB1,SUB2)=""
"RTN","PXRMXSEO",269,0)
 Q 1
"RTN","PXRMXSEO",270,0)
 ;
"RTN","PXRMXSEO",271,0)
 ;Combined report duplicate check (Detail report)
"RTN","PXRMXSEO",272,0)
NEWP(SUB,DFN) ;
"RTN","PXRMXSEO",273,0)
 ;Existing entry
"RTN","PXRMXSEO",274,0)
 I $D(^TMP("PXRMCMB1",$J,@SUB,DFN)) Q 0
"RTN","PXRMXSEO",275,0)
 ;New entry
"RTN","PXRMXSEO",276,0)
 S ^TMP("PXRMCMB1",$J,@SUB,DFN)=""
"RTN","PXRMXSEO",277,0)
 Q 1
"RTN","PXRMXSEO",278,0)
 ;
"RTN","PXRMXSEO",279,0)
 ;Combined report duplicate check (Patient totals)
"RTN","PXRMXSEO",280,0)
NEWT(FACILITY,DFN) ;
"RTN","PXRMXSEO",281,0)
 ;Existing entry
"RTN","PXRMXSEO",282,0)
 I $D(^TMP("PXRMCMB2",$J,FACILITY,DFN)) Q 0
"RTN","PXRMXSEO",283,0)
 ;New entry
"RTN","PXRMXSEO",284,0)
 S ^TMP("PXRMCMB2",$J,FACILITY,DFN)=""
"RTN","PXRMXSEO",285,0)
 Q 1
"RTN","PXRMXSU")
0^15^B60434181
"RTN","PXRMXSU",1,0)
PXRMXSU ; SLC/PJH - Reminder Reports DIC Prompts;11/16/2001
"RTN","PXRMXSU",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXSU",3,0)
 ;
"RTN","PXRMXSU",4,0)
 ;Called by PXRMXD
"RTN","PXRMXSU",5,0)
 ;
"RTN","PXRMXSU",6,0)
 ;Exits from SEL subroutine
"RTN","PXRMXSU",7,0)
QUIT() I $D(DTOUT)!$D(DUOUT) Q 1
"RTN","PXRMXSU",8,0)
 ;Detail Report allow only one entry
"RTN","PXRMXSU",9,0)
 I RPT="D",(CNT>0) Q 1
"RTN","PXRMXSU",10,0)
 ;Mandatory entry
"RTN","PXRMXSU",11,0)
 I Y=-1,(CHECK=3)!(CNT>0) Q 1
"RTN","PXRMXSU",12,0)
 ;Categories may already contain reminders
"RTN","PXRMXSU",13,0)
 I Y=-1,CHECK=2,$D(REMCAT) Q 1
"RTN","PXRMXSU",14,0)
 ;Otherwise
"RTN","PXRMXSU",15,0)
 Q 0
"RTN","PXRMXSU",16,0)
 ;
"RTN","PXRMXSU",17,0)
 ;Repeated Prompt using DIC
"RTN","PXRMXSU",18,0)
 ;-------------------------
"RTN","PXRMXSU",19,0)
SEL(FILE,MODE,CNT,ARRAY,RPT,CHECK) ;
"RTN","PXRMXSU",20,0)
 ;
"RTN","PXRMXSU",21,0)
 ; RPT   = D - detailed report only allows one reminder
"RTN","PXRMXSU",22,0)
 ; CHECK = number or null - validation of facility
"RTN","PXRMXSU",23,0)
 ;
"RTN","PXRMXSU",24,0)
 N X,Y,ARRAYN
"RTN","PXRMXSU",25,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSU",26,0)
 W !
"RTN","PXRMXSU",27,0)
 F  D  Q:$$QUIT
"RTN","PXRMXSU",28,0)
 .S DIC=FILE,DIC(0)=MODE
"RTN","PXRMXSU",29,0)
 .; Set up ^DIC("S") for duplicate check
"RTN","PXRMXSU",30,0)
 .S DIC("S")="I '$D(ARRAYN(+Y))"
"RTN","PXRMXSU",31,0)
 .I CHECK=1 D FACT^PXRMXAP
"RTN","PXRMXSU",32,0)
 .I CHECK=2 S DIC("S")=DIC("S")_",'(+$P(^(0),U,6))"
"RTN","PXRMXSU",33,0)
 .I CHECK=3 S DIC("S")=DIC("S")_",$$OK^PXRMXS1(+Y)"
"RTN","PXRMXSU",34,0)
 .I CNT>0 S DIC("A")=LIT
"RTN","PXRMXSU",35,0)
 .D ^DIC
"RTN","PXRMXSU",36,0)
 .I X=(U_U) S DTOUT=1
"RTN","PXRMXSU",37,0)
 .I $D(DTOUT)!$D(DUOUT) Q
"RTN","PXRMXSU",38,0)
 .I +Y'=-1 D  Q
"RTN","PXRMXSU",39,0)
 ..I $D(ARRAYN(+Y)) W !,"Error - Duplicate entry" Q
"RTN","PXRMXSU",40,0)
 ..S CNT=CNT+1,ARRAY(CNT)=Y_U_Y(0,0)_U_$P(Y(0),U,3)
"RTN","PXRMXSU",41,0)
 ..S ARRAYN(+Y)=""
"RTN","PXRMXSU",42,0)
 .I CNT=0,'$$QUIT W !,LIT1
"RTN","PXRMXSU",43,0)
 .K DIC
"RTN","PXRMXSU",44,0)
 Q
"RTN","PXRMXSU",45,0)
 ;
"RTN","PXRMXSU",46,0)
 ;Establish the LOCATION criteria
"RTN","PXRMXSU",47,0)
LOC(ADEF,BDEF) ;
"RTN","PXRMXSU",48,0)
 N X,Y,DIR
"RTN","PXRMXSU",49,0)
LOC0 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSU",50,0)
 S DIR(0)="S"_U_"HA:All Outpatient Locations;"
"RTN","PXRMXSU",51,0)
 S DIR(0)=DIR(0)_"HAI:All Inpatient Locations;"
"RTN","PXRMXSU",52,0)
 S DIR(0)=DIR(0)_"HS:Selected Hospital Locations;"
"RTN","PXRMXSU",53,0)
 S DIR(0)=DIR(0)_"CA:All Clinic Stops(with encounters);"
"RTN","PXRMXSU",54,0)
 S DIR(0)=DIR(0)_"CS:Selected Clinic Stops;"
"RTN","PXRMXSU",55,0)
 S DIR(0)=DIR(0)_"GS:Selected Clinic Groups;"
"RTN","PXRMXSU",56,0)
 S DIR("A")=ADEF
"RTN","PXRMXSU",57,0)
 S DIR("B")=BDEF
"RTN","PXRMXSU",58,0)
 S DIR("?")="Select from the codes displayed. For detailed help type ??"
"RTN","PXRMXSU",59,0)
 S DIR("??")=U_"D HELP^PXRMXSD(8)"
"RTN","PXRMXSU",60,0)
 D ^DIR K DIR
"RTN","PXRMXSU",61,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXSU",62,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSU",63,0)
 S PXRMLCSC=Y_U_Y(0)
"RTN","PXRMXSU",64,0)
 ;If locations are to be selected individually get the list.
"RTN","PXRMXSU",65,0)
 I Y="HS" D HLOC Q:$D(DTOUT)  G:$D(DUOUT) LOC0
"RTN","PXRMXSU",66,0)
 I Y="CS" D CSTOP Q:$D(DTOUT)  G:$D(DUOUT) LOC0
"RTN","PXRMXSU",67,0)
 I Y="GS" D CGRP(.PXRMCGRP) Q:$D(DTOUT)  G:$D(DUOUT) LOC0
"RTN","PXRMXSU",68,0)
 Q
"RTN","PXRMXSU",69,0)
 ;
"RTN","PXRMXSU",70,0)
 ;Build a list of hospital locations
"RTN","PXRMXSU",71,0)
HLOC N IEN,SC,X,Y,CHECK
"RTN","PXRMXSU",72,0)
 K DTOUT,DUOUT
"RTN","PXRMXSU",73,0)
 S NHL=0
"RTN","PXRMXSU",74,0)
 S DIC("A")="LOCATION: "
"RTN","PXRMXSU",75,0)
 W !
"RTN","PXRMXSU",76,0)
 F  D  Q:$D(DTOUT)  Q:$D(DUOUT)  Q:(Y=-1)&(NHL>0)
"RTN","PXRMXSU",77,0)
 .S DIC="^SC("
"RTN","PXRMXSU",78,0)
 .S DIC(0)="AEQMZ"
"RTN","PXRMXSU",79,0)
 .I NHL>0 S DIC("A")="Select another LOCATION: "
"RTN","PXRMXSU",80,0)
 .D ^DIC
"RTN","PXRMXSU",81,0)
 .I X=(U_U) S DTOUT=1
"RTN","PXRMXSU",82,0)
 .I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSU",83,0)
 .I +Y'=-1 D
"RTN","PXRMXSU",84,0)
 ..S IEN=$P(Y,U,1)
"RTN","PXRMXSU",85,0)
 ..;Check Facility code
"RTN","PXRMXSU",86,0)
 ..N FACILITY S FACILITY=$$FACL^PXRMXAP(IEN)
"RTN","PXRMXSU",87,0)
 ..I FACILITY="" W !,"Location has no facility code" Q
"RTN","PXRMXSU",88,0)
 ..I '$D(PXRMFACN(FACILITY)) D  Q
"RTN","PXRMXSU",89,0)
 ...W !,"Location has a different facility code" Q
"RTN","PXRMXSU",90,0)
 ..;Check for duplicates
"RTN","PXRMXSU",91,0)
 ..I (NHL>0),$$DUP(IEN,.PXRMLCHL) W !,"Error - Duplicate entry" Q
"RTN","PXRMXSU",92,0)
 ..S NHL=NHL+1
"RTN","PXRMXSU",93,0)
 ..;Get the stop code.
"RTN","PXRMXSU",94,0)
 ..S X=$P(^SC(IEN,0),U,7)
"RTN","PXRMXSU",95,0)
 ..S SC="Unknown" I +X>0 S SC=$P(^DIC(40.7,X,0),U,2) ; DBIA 557
"RTN","PXRMXSU",96,0)
 ..I $L(SC)=0 S SC="Unknown"
"RTN","PXRMXSU",97,0)
 ..;Save the external form of the name, then IEN, and the stop code.
"RTN","PXRMXSU",98,0)
 ..S PXRMLCHL(NHL)=$P(Y(0,0),U,1)_U_IEN_U_SC
"RTN","PXRMXSU",99,0)
 ..;Check for mixed inpatient and outpatient locations
"RTN","PXRMXSU",100,0)
 ..I (NHL>1),$D(CHECK)=0 D
"RTN","PXRMXSU",101,0)
 ...Q:'$$LOCN^PXRMXAP(.PXRMLCHL)
"RTN","PXRMXSU",102,0)
 ...W !,"Inpatient and Outpatient locations have been selected"
"RTN","PXRMXSU",103,0)
 ...S CHECK="DONE"
"RTN","PXRMXSU",104,0)
 .K DIC
"RTN","PXRMXSU",105,0)
 .I (NHL=0)&(+Y=-1) W !,"You must select a hospital location!"
"RTN","PXRMXSU",106,0)
 ;
"RTN","PXRMXSU",107,0)
 I $D(DUOUT)!($D(DTOUT)) Q
"RTN","PXRMXSU",108,0)
 ;Sort the hospital location list into alphabetical order.
"RTN","PXRMXSU",109,0)
 S NHL=$$SORT(NHL,"PXRMLCHL",2)
"RTN","PXRMXSU",110,0)
 ;Build array by IEN
"RTN","PXRMXSU",111,0)
 S IC=""
"RTN","PXRMXSU",112,0)
 F  S IC=$O(PXRMLCHL(IC)) Q:IC=""  D
"RTN","PXRMXSU",113,0)
 .S PXRMLOCN($P(PXRMLCHL(IC),U,2))=IC
"RTN","PXRMXSU",114,0)
 Q
"RTN","PXRMXSU",115,0)
 ;---
"RTN","PXRMXSU",116,0)
FACILITY(SEL) ;Select facility (COPIED EX- PXRR)
"RTN","PXRMXSU",117,0)
 N IC,STATION,X,Y,DIC
"RTN","PXRMXSU",118,0)
 K DIRUT,DTOUT,DUOUT
"RTN","PXRMXSU",119,0)
 S NFAC=0
"RTN","PXRMXSU",120,0)
 S DIC("B")=+$P($$SITE^VASITE,U,3)
"RTN","PXRMXSU",121,0)
 S DIC("A")="Select FACILITY: "
"RTN","PXRMXSU",122,0)
 W !
"RTN","PXRMXSU",123,0)
 F  D  Q:$D(DTOUT)  Q:$D(DUOUT)  Q:(Y=-1)&(NFAC>0)
"RTN","PXRMXSU",124,0)
 .S DIC=4
"RTN","PXRMXSU",125,0)
 .S DIC(0)="AEMQZ"
"RTN","PXRMXSU",126,0)
 .I NFAC>0 S DIC("A")="Select another FACILITY: "
"RTN","PXRMXSU",127,0)
 .D ^DIC
"RTN","PXRMXSU",128,0)
 .I X=(U_U) S DTOUT=1
"RTN","PXRMXSU",129,0)
 .I '$D(DTOUT),('$D(DUOUT)),+Y'=-1 D
"RTN","PXRMXSU",130,0)
 ..;Check for duplicates
"RTN","PXRMXSU",131,0)
 ..I (NFAC>0),$$DUP($P(Y(0,0),U),.PXRMFAC) W !,"Error - Duplicate entry" Q
"RTN","PXRMXSU",132,0)
 ..S NFAC=NFAC+1,PXRMFAC(NFAC)=Y_U_Y(0,0)
"RTN","PXRMXSU",133,0)
 .K DIC
"RTN","PXRMXSU",134,0)
 ;
"RTN","PXRMXSU",135,0)
 I $D(DTOUT)!$D(DUOUT) Q
"RTN","PXRMXSU",136,0)
 ;;Save the facility names and station.
"RTN","PXRMXSU",137,0)
 F IC=1:1:NFAC D
"RTN","PXRMXSU",138,0)
 .S X=$P(PXRMFAC(IC),U,1)
"RTN","PXRMXSU",139,0)
 .S STATION=$P($G(^DIC(4,X,99)),U,1)
"RTN","PXRMXSU",140,0)
 .S PXRMFACN(X)=$P(PXRMFAC(IC),U,2)_U_STATION
"RTN","PXRMXSU",141,0)
 ;Sort the facility list into alphabetical order.
"RTN","PXRMXSU",142,0)
 S NFAC=$$SORT(NFAC,"PXRMFAC",2)
"RTN","PXRMXSU",143,0)
 Q
"RTN","PXRMXSU",144,0)
 ; ---
"RTN","PXRMXSU",145,0)
CGRP(TEMP) ; Clinic Group Selection
"RTN","PXRMXSU",146,0)
 N LIT,LIT1,DIC
"RTN","PXRMXSU",147,0)
 S DIC("A")="Select CLINIC GROUP: ",NOTM=0
"RTN","PXRMXSU",148,0)
 S LIT="Select another CLINIC GROUP: "
"RTN","PXRMXSU",149,0)
 S LIT1="You must select a clinic group!"
"RTN","PXRMXSU",150,0)
 D SEL(409.67,"AEQMZ",.NOTM,.TEMP,"","")
"RTN","PXRMXSU",151,0)
 ;Build array by IEN
"RTN","PXRMXSU",152,0)
 S NCGRP=0 N IC S IC=""
"RTN","PXRMXSU",153,0)
 F  S IC=$O(PXRMCGRP(IC)) Q:IC=""  D
"RTN","PXRMXSU",154,0)
 .S PXRMCGRN($P(PXRMCGRP(IC),U,1))=IC,NCGRP=IC
"RTN","PXRMXSU",155,0)
 Q
"RTN","PXRMXSU",156,0)
 ; ---
"RTN","PXRMXSU",157,0)
PCMM(TEMP) ; PCMM teams
"RTN","PXRMXSU",158,0)
 N LIT,LIT1,DIC
"RTN","PXRMXSU",159,0)
 S DIC("A")="Select PCMM TEAM: ",NOTM=0
"RTN","PXRMXSU",160,0)
 S LIT="Select another PCMM TEAM: ",LIT1="You must select a team!"
"RTN","PXRMXSU",161,0)
 D SEL(404.51,"AEQMZ",.NOTM,.TEMP,"",1)
"RTN","PXRMXSU",162,0)
 Q
"RTN","PXRMXSU",163,0)
 ; ---
"RTN","PXRMXSU",164,0)
OERR(TEAM) ; OE/RR teams
"RTN","PXRMXSU",165,0)
 N LIT,LIT1,DIC
"RTN","PXRMXSU",166,0)
 S DIC("A")="Select TEAM: ",NOTM=0
"RTN","PXRMXSU",167,0)
 S LIT="Select another TEAM: ",LIT1="You must select a team!"
"RTN","PXRMXSU",168,0)
 D SEL(100.21,"AEQMZ",.NOTM,.TEAM,"","")
"RTN","PXRMXSU",169,0)
 Q
"RTN","PXRMXSU",170,0)
 ; ---
"RTN","PXRMXSU",171,0)
RCAT(REMCAT,REM) ;Reminder Category/Reminder selection
"RTN","PXRMXSU",172,0)
 N CAT,DIC,LIT,LIT1,SEQ
"RTN","PXRMXSU",173,0)
 S NCAT=0 K REMCAT,REM
"RTN","PXRMXSU",174,0)
 ;Reminder Category
"RTN","PXRMXSU",175,0)
RCATS I PXRMREP="S" D  Q:$D(DUOUT)!$D(DTOUT)
"RTN","PXRMXSU",176,0)
 .K REMCAT S NCAT=0
"RTN","PXRMXSU",177,0)
 .S DIC("A")="Select a REMINDER CATEGORY: "
"RTN","PXRMXSU",178,0)
 .S LIT="Select another REMINDER CATEGORY: ",LIT1=""
"RTN","PXRMXSU",179,0)
 .D SEL(811.7,"AEQMZ",.NCAT,.REMCAT,PXRMREP,3)
"RTN","PXRMXSU",180,0)
 ;Individual Reminders
"RTN","PXRMXSU",181,0)
 D REM(.REM) Q:$D(DTOUT)
"RTN","PXRMXSU",182,0)
 I $D(DUOUT),PXRMREP="S" G RCATS
"RTN","PXRMXSU",183,0)
 Q
"RTN","PXRMXSU",184,0)
 ; ---
"RTN","PXRMXSU",185,0)
REM(REM) ;Reminders selection
"RTN","PXRMXSU",186,0)
 N LIT,LIT1,DIC
"RTN","PXRMXSU",187,0)
 K REM S NREM=0
"RTN","PXRMXSU",188,0)
 S DIC("A")="Select individual REMINDER: "
"RTN","PXRMXSU",189,0)
 S LIT="Select another REMINDER: ",LIT1="You must select a reminder!"
"RTN","PXRMXSU",190,0)
 D SEL(811.9,"AEQMZ",.NREM,.REM,PXRMREP,2)
"RTN","PXRMXSU",191,0)
 Q
"RTN","PXRMXSU",192,0)
 ; ---
"RTN","PXRMXSU",193,0)
PAT(VAR) ; Patient select
"RTN","PXRMXSU",194,0)
 N LIT,LIT1,DIC
"RTN","PXRMXSU",195,0)
 S DIC("A")="Select PATIENT: ",NPAT=0
"RTN","PXRMXSU",196,0)
 S LIT="Select another PATIENT: ",LIT1="You must select a patient!"
"RTN","PXRMXSU",197,0)
 D SEL(2,"AEQMZ",.NPAT,.VAR,"","")
"RTN","PXRMXSU",198,0)
 ;Sort the patient list into ascending order.
"RTN","PXRMXSU",199,0)
 S NPAT=$$SORT(NPAT,"VAR")
"RTN","PXRMXSU",200,0)
 Q
"RTN","PXRMXSU",201,0)
 ; ---
"RTN","PXRMXSU",202,0)
PROV(PRV) ;Build a list of selected providers.
"RTN","PXRMXSU",203,0)
 N LIT,LIT1,DIC
"RTN","PXRMXSU",204,0)
 S DIC("A")="Select PROVIDER: ",NPRV=0
"RTN","PXRMXSU",205,0)
 S LIT="Select another PROVIDER: ",LIT1="You must select a provider!"
"RTN","PXRMXSU",206,0)
 D SEL(200,"AEQMZ",.NPRV,.PRV,"","")
"RTN","PXRMXSU",207,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXSU",208,0)
 ;Sort the provider list into ascending order.
"RTN","PXRMXSU",209,0)
 S NPRV=$$SORT(NPRV,"PRV")
"RTN","PXRMXSU",210,0)
 Q
"RTN","PXRMXSU",211,0)
 ; ---
"RTN","PXRMXSU",212,0)
CSTOP ;Get a list of clinic stop codes.
"RTN","PXRMXSU",213,0)
 N LIT,LIT1,DIC,X,Y
"RTN","PXRMXSU",214,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXSU",215,0)
 S DIC("A")="Select CLINIC STOP: "
"RTN","PXRMXSU",216,0)
 S LIT="Select another CLINIC STOP: "
"RTN","PXRMXSU",217,0)
 S LIT1="You must select a clinic stop!"
"RTN","PXRMXSU",218,0)
 S NCS=0
"RTN","PXRMXSU",219,0)
 W !
"RTN","PXRMXSU",220,0)
 F  D  Q:$D(DTOUT)  Q:$D(DUOUT)  Q:(Y=-1)&(NCS>0)
"RTN","PXRMXSU",221,0)
 .S DIC=40.7,DIC(0)="AEMQZ"
"RTN","PXRMXSU",222,0)
 .I NCS>0 S DIC("A")=LIT
"RTN","PXRMXSU",223,0)
 .D ^DIC
"RTN","PXRMXSU",224,0)
 .I X=(U_U) S DTOUT=1
"RTN","PXRMXSU",225,0)
 .I '$D(DTOUT),('$D(DUOUT)) D
"RTN","PXRMXSU",226,0)
 ..I +Y'=-1 D  Q
"RTN","PXRMXSU",227,0)
 ...S NCS=NCS+1
"RTN","PXRMXSU",228,0)
 ...;Save the external form of the name, the IEN, and the stop code.
"RTN","PXRMXSU",229,0)
 ...S PXRMCS(NCS)=$P(Y(0,0),U,1)_U_$P(Y,U,1)_U_$P(Y(0),U,2)
"RTN","PXRMXSU",230,0)
 ..W:NCS=0 !,LIT1
"RTN","PXRMXSU",231,0)
 ;Sort the clinic stop list into alphabetical order.
"RTN","PXRMXSU",232,0)
 S NCS=$$SORT(NCS,"PXRMCS",2)
"RTN","PXRMXSU",233,0)
 ;Build array by IEN
"RTN","PXRMXSU",234,0)
 S IC=""
"RTN","PXRMXSU",235,0)
 F  S IC=$O(PXRMCS(IC)) Q:IC=""  D
"RTN","PXRMXSU",236,0)
 .S PXRMCSN($P(PXRMCS(IC),U,2))=IC
"RTN","PXRMXSU",237,0)
 Q
"RTN","PXRMXSU",238,0)
 ; ---
"RTN","PXRMXSU",239,0)
SORT(N,ARRAY,KEY)       ;Sort an ARRAY with N elements 
"RTN","PXRMXSU",240,0)
 ;return the number of unique elements.  KEY is the piece of ARRAY on
"RTN","PXRMXSU",241,0)
 ;which to base the sort.  The default is the first piece.
"RTN","PXRMXSU",242,0)
 ;
"RTN","PXRMXSU",243,0)
 I (N'>0)!(N=1) Q N
"RTN","PXRMXSU",244,0)
 N IC,IND
"RTN","PXRMXSU",245,0)
 I '$D(KEY) S KEY=1
"RTN","PXRMXSU",246,0)
 F IC=1:1:N S ^TMP($J,"SORT",$P(@ARRAY@(IC),U,KEY))=@ARRAY@(IC)
"RTN","PXRMXSU",247,0)
 S IND=""
"RTN","PXRMXSU",248,0)
 F IC=1:1 S IND=$O(^TMP($J,"SORT",IND)) Q:IND=""  D
"RTN","PXRMXSU",249,0)
 .S @ARRAY@(IC)=^TMP($J,"SORT",IND)
"RTN","PXRMXSU",250,0)
 K ^TMP($J,"SORT")
"RTN","PXRMXSU",251,0)
 Q IC-1
"RTN","PXRMXSU",252,0)
 ;
"RTN","PXRMXSU",253,0)
 ;Check for duplicate entries
"RTN","PXRMXSU",254,0)
DUP(VALUE,ARRAY) ;
"RTN","PXRMXSU",255,0)
 N IC,DUP
"RTN","PXRMXSU",256,0)
 S IC=0,DUP=0
"RTN","PXRMXSU",257,0)
 F  S IC=$O(ARRAY(IC)) Q:IC=""  D  Q:DUP
"RTN","PXRMXSU",258,0)
 .I $P(ARRAY(IC),U,2)=VALUE S DUP=1
"RTN","PXRMXSU",259,0)
 Q DUP
"RTN","PXRMXT")
0^16^B35640921
"RTN","PXRMXT",1,0)
PXRMXT ; SLC/PJH - Reminder Reports Template Load ;08/01/2001
"RTN","PXRMXT",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXT",3,0)
 ; 
"RTN","PXRMXT",4,0)
 ; Called from PXRMYD,PXRMXD
"RTN","PXRMXT",5,0)
 ;
"RTN","PXRMXT",6,0)
 ;Select Template
"RTN","PXRMXT",7,0)
 ;---------------
"RTN","PXRMXT",8,0)
START N X,Y,CNT,FOUND,PXRMFLD,DIC,MSG
"RTN","PXRMXT",9,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXT",10,0)
 S PXRMTMP="",FOUND=0
"RTN","PXRMXT",11,0)
 ;
"RTN","PXRMXT",12,0)
 ;Check if any templates exist for this report type
"RTN","PXRMXT",13,0)
 Q:'$$FIND(PXRMTYP)
"RTN","PXRMXT",14,0)
 ;
"RTN","PXRMXT",15,0)
 ;Select template required
"RTN","PXRMXT",16,0)
 W !
"RTN","PXRMXT",17,0)
 S CNT=0,DIC=810.1,DIC(0)="AEQMZ"
"RTN","PXRMXT",18,0)
 S DIC("A")="Select an existing REPORT TEMPLATE or return to continue:"
"RTN","PXRMXT",19,0)
 S DIC("S")="I $P(^PXRMPT(810.1,+Y,0),U,3)=PXRMTYP"
"RTN","PXRMXT",20,0)
 D ^DIC
"RTN","PXRMXT",21,0)
 I X=(U_U) S DTOUT=1
"RTN","PXRMXT",22,0)
 I '$D(DTOUT),('$D(DUOUT)) D
"RTN","PXRMXT",23,0)
 .I +Y'=-1 D  Q
"RTN","PXRMXT",24,0)
 ..S CNT=CNT+1,ARRAY(CNT)=Y_U_Y(0,0)_U_$P(Y(0),U,3)
"RTN","PXRMXT",25,0)
 K DIC
"RTN","PXRMXT",26,0)
 ;
"RTN","PXRMXT",27,0)
 ;Load template into local array
"RTN","PXRMXT",28,0)
 I (+Y'=-1)&('$D(DTOUT))&('$D(DUOUT)) D
"RTN","PXRMXT",29,0)
 .L +^PXRMPT(810.1,$P(Y,U)):0
"RTN","PXRMXT",30,0)
 .E  W !!?5,"Another user is editing this entry." S DUOUT=1 Q
"RTN","PXRMXT",31,0)
 .;Load template into an array
"RTN","PXRMXT",32,0)
 .S PXRMTMP=Y_U_$P(Y(0),U,2) D LOAD
"RTN","PXRMXT",33,0)
 .L -^PXRMPT(810.1,$P(PXRMTMP,U))
"RTN","PXRMXT",34,0)
 .;Exit if problem loading template
"RTN","PXRMXT",35,0)
 .I $D(MSG) S DTOUT=1 Q
"RTN","PXRMXT",36,0)
 .;Display Template information
"RTN","PXRMXT",37,0)
 .D:'$D(MSG) ^PXRMXTD
"RTN","PXRMXT",38,0)
 ;
"RTN","PXRMXT",39,0)
EXIT Q
"RTN","PXRMXT",40,0)
 ;
"RTN","PXRMXT",41,0)
 ;Check if any templates exist for this report type
"RTN","PXRMXT",42,0)
 ;-------------------------------------------------
"RTN","PXRMXT",43,0)
FIND(TYP) ;
"RTN","PXRMXT",44,0)
 N SUB,FOUND
"RTN","PXRMXT",45,0)
 S SUB=0,FOUND=0
"RTN","PXRMXT",46,0)
 F  S SUB=$O(^PXRMPT(810.1,SUB)) Q:'SUB  D  Q:FOUND
"RTN","PXRMXT",47,0)
 .I $P($G(^PXRMPT(810.1,SUB,0)),U,3)=TYP S FOUND=1
"RTN","PXRMXT",48,0)
 Q FOUND
"RTN","PXRMXT",49,0)
 ;
"RTN","PXRMXT",50,0)
 ;
"RTN","PXRMXT",51,0)
 ;Load variables from report template (both INT and EXT)
"RTN","PXRMXT",52,0)
 ;------------------------------------------------------
"RTN","PXRMXT",53,0)
LOAD N ARRAY
"RTN","PXRMXT",54,0)
 D GETS^DIQ(810.1,$P(PXRMTMP,U),"**","IER","ARRAY","MSG")
"RTN","PXRMXT",55,0)
 I $D(MSG) D  Q
"RTN","PXRMXT",56,0)
 .W !!,"File read failed, GETS^DIQ returned the following error message:"
"RTN","PXRMXT",57,0)
 .N IC S IC="MSG"
"RTN","PXRMXT",58,0)
 .F  S IC=$Q(@IC) Q:IC=""  W !,IC,"=",@IC
"RTN","PXRMXT",59,0)
 .W !,"Examine the above error message for the reason.",!
"RTN","PXRMXT",60,0)
 .H 2
"RTN","PXRMXT",61,0)
 ;
"RTN","PXRMXT",62,0)
 N SUB,SUB1,ORDER,ORDERC
"RTN","PXRMXT",63,0)
 ;
"RTN","PXRMXT",64,0)
 S SUB1=$O(ARRAY(810.1,""))
"RTN","PXRMXT",65,0)
 F SUB="PXRMTYP","PXRMSEL","PXRMREP","PXRMPRIM","PXRMFD","PXRMFUT" D
"RTN","PXRMXT",66,0)
 .S @SUB=$G(ARRAY(810.1,SUB1,SUB,"I"))
"RTN","PXRMXT",67,0)
 ;
"RTN","PXRMXT",68,0)
 ;Location Selection criteria
"RTN","PXRMXT",69,0)
 S PXRMLCSC=ARRAY(810.1,SUB1,"PXRMLCSC","I")
"RTN","PXRMXT",70,0)
 ;
"RTN","PXRMXT",71,0)
 ;Reminders Due fields only
"RTN","PXRMXT",72,0)
 F SUB="PXRMFD" D
"RTN","PXRMXT",73,0)
 .S @SUB=$G(ARRAY(810.1,SUB1,SUB,"I"))
"RTN","PXRMXT",74,0)
 ;
"RTN","PXRMXT",75,0)
 S PXRMFLD=$G(ARRAY(810.1,SUB1,"PXRMSEL","E"))
"RTN","PXRMXT",76,0)
 S RUN=$G(ARRAY(810.1,SUB1,"RUN","E"))
"RTN","PXRMXT",77,0)
 ;Update name if template has been renamed
"RTN","PXRMXT",78,0)
 S $P(PXRMTMP,U,2)=$G(ARRAY(810.1,SUB1,"NAME","E"))
"RTN","PXRMXT",79,0)
 S TITLE=$G(ARRAY(810.1,SUB1,"TITLE","E")),$P(PXRMTMP,U,3)=TITLE
"RTN","PXRMXT",80,0)
 ;
"RTN","PXRMXT",81,0)
 ;Clear multiple field arrays
"RTN","PXRMXT",82,0)
 K PXRMREM,PXRMPAT,PXRMPRV,PXRMOTM,PXRMFAC,PXRMLCHL,PXRMCS,PXRMCGRP
"RTN","PXRMXT",83,0)
 K PXRMFACN,PXRMCSN,PXRMCGRN,PXRMRCAT,REMINDER
"RTN","PXRMXT",84,0)
 ;
"RTN","PXRMXT",85,0)
 ;Load Multiple fields
"RTN","PXRMXT",86,0)
 D SUB(.PXRMREM,810.12,"REMINDER",1)
"RTN","PXRMXT",87,0)
 ;Load Patients
"RTN","PXRMXT",88,0)
 D SUB(.PXRMPAT,810.16,"PATIENT",1)
"RTN","PXRMXT",89,0)
 ;Load Providers
"RTN","PXRMXT",90,0)
 D SUB(.PXRMPRV,810.14,"PROVIDER",1)
"RTN","PXRMXT",91,0)
 ;Load OE/RR Teams
"RTN","PXRMXT",92,0)
 D SUB(.PXRMOTM,810.17,"OERR TEAM",1)
"RTN","PXRMXT",93,0)
 ;Load PCMM Teams
"RTN","PXRMXT",94,0)
 D SUB(.PXRMPCM,810.18,"PCMM TEAM",1)
"RTN","PXRMXT",95,0)
 ;Load Facility codes
"RTN","PXRMXT",96,0)
 D SUB(.PXRMFAC,810.13,"FACILITY",1)
"RTN","PXRMXT",97,0)
 ;Load Hospital Location codes
"RTN","PXRMXT",98,0)
 D SUB(.PXRMLCHL,810.11,"LOCATION",2)
"RTN","PXRMXT",99,0)
 ;Load Clinic Stop codes
"RTN","PXRMXT",100,0)
 D SUB(.PXRMCS,810.111,"STOP CODE",2)
"RTN","PXRMXT",101,0)
 ;Load Clinic Groups
"RTN","PXRMXT",102,0)
 D SUB(.PXRMCGRP,810.112,"CLINIC GROUP",1)
"RTN","PXRMXT",103,0)
 ;Load Reminder Categories
"RTN","PXRMXT",104,0)
 D SUB(.PXRMRCAT,810.113,"REMINDER CATEGORY",1)
"RTN","PXRMXT",105,0)
 ;
"RTN","PXRMXT",106,0)
 ;Build PXRMFACN/PXRMLOCN array IEN's and counters NHL/NFAC
"RTN","PXRMXT",107,0)
 D NUM
"RTN","PXRMXT",108,0)
 ;
"RTN","PXRMXT",109,0)
 ;Build Service Category string (held as array in PXRMPT to allow edit)
"RTN","PXRMXT",110,0)
 I PXRMSEL="L" S PXRMSCAT=$$STR(810.19,"SERVICE")
"RTN","PXRMXT",111,0)
 ;
"RTN","PXRMXT",112,0)
 ;Add Descriptions for Reminders
"RTN","PXRMXT",113,0)
 D DES(.PXRMREM,"^PXD(811.9",4)
"RTN","PXRMXT",114,0)
 ;Add Descriptions for Reminder Categories
"RTN","PXRMXT",115,0)
 D DES(.PXRMRCAT,"^PXRMD(811.7",4)
"RTN","PXRMXT",116,0)
 ;Add Descriptions for Teams
"RTN","PXRMXT",117,0)
 D DES(.PXRMOTM,"^OR(100.21",3)
"RTN","PXRMXT",118,0)
 ;Add Display Codes for Stops
"RTN","PXRMXT",119,0)
 D CODE(.PXRMCS,"^DIC(40.7",3)
"RTN","PXRMXT",120,0)
 ;
"RTN","PXRMXT",121,0)
 ;Sort Reminders into display order
"RTN","PXRMXT",122,0)
 D SORT(.PXRMREM,.ORDER)
"RTN","PXRMXT",123,0)
 ;Sort Reminders categories into display order
"RTN","PXRMXT",124,0)
 D SORT(.PXRMRCAT,.ORDERC)
"RTN","PXRMXT",125,0)
 ;
"RTN","PXRMXT",126,0)
 ;Combine individual reminders and category reminders
"RTN","PXRMXT",127,0)
 D MERGE^PXRMXS1
"RTN","PXRMXT",128,0)
 ;
"RTN","PXRMXT",129,0)
 Q
"RTN","PXRMXT",130,0)
 ;
"RTN","PXRMXT",131,0)
 ;
"RTN","PXRMXT",132,0)
 ;Extract INTernal and EXTernal format from ARRAY
"RTN","PXRMXT",133,0)
 ;-----------------------------------------------
"RTN","PXRMXT",134,0)
SUB(OUTPUT,SUB,VAR,ORD) ; 
"RTN","PXRMXT",135,0)
 K OUTPUT
"RTN","PXRMXT",136,0)
 N IC,INT,EXT,SUB1,DISP
"RTN","PXRMXT",137,0)
 S SUB1="",IC=0
"RTN","PXRMXT",138,0)
 F  S SUB1=$O(ARRAY(SUB,SUB1)) Q:SUB1=""  D
"RTN","PXRMXT",139,0)
 .S INT=$P($G(ARRAY(SUB,SUB1,VAR,"I")),";")
"RTN","PXRMXT",140,0)
 .S EXT=$G(ARRAY(SUB,SUB1,VAR,"E"))
"RTN","PXRMXT",141,0)
 .S IC=IC+1
"RTN","PXRMXT",142,0)
 .I ORD=1 S OUTPUT(IC)=INT_U_EXT
"RTN","PXRMXT",143,0)
 .I ORD'=1 S OUTPUT(IC)=EXT_U_INT
"RTN","PXRMXT",144,0)
 .I (VAR'="REMINDER")&(VAR'="REMINDER CATEGORY") Q
"RTN","PXRMXT",145,0)
 .;Get display order
"RTN","PXRMXT",146,0)
 .S DISP=$G(ARRAY(SUB,SUB1,"DISPLAY ORDER","I"))
"RTN","PXRMXT",147,0)
 .;Store in PXRMREM for display
"RTN","PXRMXT",148,0)
 .S OUTPUT(IC)=OUTPUT(IC)_U_DISP
"RTN","PXRMXT",149,0)
 .;Put reminders with no sequence number last
"RTN","PXRMXT",150,0)
 .I DISP="" S DISP=99
"RTN","PXRMXT",151,0)
 .;Create order array for sorting entries later
"RTN","PXRMXT",152,0)
 .I VAR="REMINDER" S ORDER(DISP,IC)=""
"RTN","PXRMXT",153,0)
 .I VAR="REMINDER CATEGORY" S ORDERC(DISP,IC)=""
"RTN","PXRMXT",154,0)
 Q
"RTN","PXRMXT",155,0)
 ;
"RTN","PXRMXT",156,0)
 ;Extract INTernal format from ARRAY and build string
"RTN","PXRMXT",157,0)
 ;---------------------------------------------------
"RTN","PXRMXT",158,0)
STR(SUB,VAR) ; 
"RTN","PXRMXT",159,0)
 N IC,INT,SUB1
"RTN","PXRMXT",160,0)
 S SUB1="",IC=0,@VAR=""
"RTN","PXRMXT",161,0)
 F  S SUB1=$O(ARRAY(SUB,SUB1)) Q:SUB1=""  D
"RTN","PXRMXT",162,0)
 .S INT=$P($G(ARRAY(SUB,SUB1,VAR,"I")),";")
"RTN","PXRMXT",163,0)
 .S @VAR=@VAR_INT
"RTN","PXRMXT",164,0)
 Q @VAR
"RTN","PXRMXT",165,0)
 ;
"RTN","PXRMXT",166,0)
 ;Build array PXRMFACN and NFAC
"RTN","PXRMXT",167,0)
 ;-----------------------------
"RTN","PXRMXT",168,0)
NUM N IC,FACN,FACNAM
"RTN","PXRMXT",169,0)
 K PXRMLOCN,PXRMCSN,PXRMCGRN,PXRMFACN
"RTN","PXRMXT",170,0)
 S IC=""
"RTN","PXRMXT",171,0)
 F  S IC=$O(PXRMFAC(IC)) Q:IC=""  D
"RTN","PXRMXT",172,0)
 .S FACN=$P(PXRMFAC(IC),U),FACNAM=$P(PXRMFAC(IC),U,2)
"RTN","PXRMXT",173,0)
 .S PXRMFACN(FACN)=FACNAM_U_FACN,NFAC=IC
"RTN","PXRMXT",174,0)
 ; Build Array PXRMLOCN and NHL
"RTN","PXRMXT",175,0)
 N LOCN
"RTN","PXRMXT",176,0)
 F  S IC=$O(PXRMLCHL(IC)) Q:IC=""  D
"RTN","PXRMXT",177,0)
 .S LOCN=$P(PXRMLCHL(IC),U,2)
"RTN","PXRMXT",178,0)
 .S PXRMLOCN(LOCN)=IC,NHL=IC
"RTN","PXRMXT",179,0)
 ; Build Array PXRMCSN and NCS
"RTN","PXRMXT",180,0)
 N CSN
"RTN","PXRMXT",181,0)
 F  S IC=$O(PXRMCS(IC)) Q:IC=""  D
"RTN","PXRMXT",182,0)
 .S CSN=$P(PXRMCS(IC),U,2)
"RTN","PXRMXT",183,0)
 .S PXRMCSN(CSN)=IC,NCS=IC
"RTN","PXRMXT",184,0)
 ; Build Array PXRMCGRN and NCGRP
"RTN","PXRMXT",185,0)
 N GRPN
"RTN","PXRMXT",186,0)
 F  S IC=$O(PXRMCGRP(IC)) Q:IC=""  D
"RTN","PXRMXT",187,0)
 .S GRPN=$P(PXRMCGRP(IC),U,1)
"RTN","PXRMXT",188,0)
 .S PXRMCGRN(GRPN)=IC,NCGRP=IC
"RTN","PXRMXT",189,0)
 Q
"RTN","PXRMXT",190,0)
 ;
"RTN","PXRMXT",191,0)
 ;Add print name to OUTPUT array
"RTN","PXRMXT",192,0)
 ;-------------------------------
"RTN","PXRMXT",193,0)
DES(OUTPUT,GLOB,POSN) ;
"RTN","PXRMXT",194,0)
 N IC,IEN,DES
"RTN","PXRMXT",195,0)
 S IC=""
"RTN","PXRMXT",196,0)
 F  S IC=$O(OUTPUT(IC)) Q:IC=""  D
"RTN","PXRMXT",197,0)
 .S IEN=$P(OUTPUT(IC),U,1)
"RTN","PXRMXT",198,0)
 .X "S DES=$P($G("_GLOB_",IEN,0)),U,3)"
"RTN","PXRMXT",199,0)
 .S $P(OUTPUT(IC),U,POSN)=DES
"RTN","PXRMXT",200,0)
 Q
"RTN","PXRMXT",201,0)
 ;
"RTN","PXRMXT",202,0)
 ;Add stop code to OUTPUT array
"RTN","PXRMXT",203,0)
 ;-------------------------------
"RTN","PXRMXT",204,0)
CODE(OUTPUT,GLOB,POSN) ;
"RTN","PXRMXT",205,0)
 N IC,IEN,CODE
"RTN","PXRMXT",206,0)
 S IC=""
"RTN","PXRMXT",207,0)
 F  S IC=$O(OUTPUT(IC)) Q:IC=""  D
"RTN","PXRMXT",208,0)
 .S IEN=$P(OUTPUT(IC),U,2)
"RTN","PXRMXT",209,0)
 .X "S CODE=$P($G("_GLOB_",IEN,0)),U,2)"
"RTN","PXRMXT",210,0)
 .S $P(OUTPUT(IC),U,POSN)=CODE
"RTN","PXRMXT",211,0)
 Q
"RTN","PXRMXT",212,0)
 ;
"RTN","PXRMXT",213,0)
 ;Sort reminders into display order (allow for duplicates)
"RTN","PXRMXT",214,0)
 ;--------------------------------------------------------
"RTN","PXRMXT",215,0)
SORT(INPUT,ORDER) ;
"RTN","PXRMXT",216,0)
 N IC,DISP,OUTPUT,IC1
"RTN","PXRMXT",217,0)
 S DISP="",IC1=0
"RTN","PXRMXT",218,0)
 F  S DISP=$O(ORDER(DISP)) Q:DISP=""  D
"RTN","PXRMXT",219,0)
 .S IC=""
"RTN","PXRMXT",220,0)
 .F  S IC=$O(ORDER(DISP,IC)) Q:IC=""  D
"RTN","PXRMXT",221,0)
 ..S IC1=IC1+1,OUTPUT(IC1)=INPUT(IC)
"RTN","PXRMXT",222,0)
 ; Move results back
"RTN","PXRMXT",223,0)
 K INPUT M INPUT=OUTPUT
"RTN","PXRMXT",224,0)
 Q
"RTN","PXRMXTA")
0^17^B43339024
"RTN","PXRMXTA",1,0)
PXRMXTA ; SLC/PJH - Reminder Reports Template Edit ;01/02/2002 
"RTN","PXRMXTA",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXTA",3,0)
 ; 
"RTN","PXRMXTA",4,0)
 ; Called from PXRMYD,PXRMXD
"RTN","PXRMXTA",5,0)
 ;
"RTN","PXRMXTA",6,0)
 ;Edit selected template or run report
"RTN","PXRMXTA",7,0)
 ;-------------------------------------
"RTN","PXRMXTA",8,0)
START(ROUTINE) ;
"RTN","PXRMXTA",9,0)
 N PXRMASK,PXRMEDIT,PXRMCOPY,MSG,DIC,NLOC
"RTN","PXRMXTA",10,0)
 S PXRMASK="N",PXRMCOPY="N",PXRMEDIT="N"
"RTN","PXRMXTA",11,0)
 ;Option to edit/copy template
"RTN","PXRMXTA",12,0)
USE I 'PXRMUSER D ASK(.PXRMASK) Q:$D(DUOUT)!$D(DTOUT)
"RTN","PXRMXTA",13,0)
 ;Option to edit template
"RTN","PXRMXTA",14,0)
 I PXRMASK="Y" D  Q:$D(DUOUT)!$D(DTOUT)
"RTN","PXRMXTA",15,0)
 .;Template edit and redisplay
"RTN","PXRMXTA",16,0)
 .D LOCK Q:$D(DUOUT)
"RTN","PXRMXTA",17,0)
 .D EDIT,UNLOCK
"RTN","PXRMXTA",18,0)
 .;Rollback changes on exit
"RTN","PXRMXTA",19,0)
 .I $D(DUOUT)!$D(DTOUT) D  Q
"RTN","PXRMXTA",20,0)
 ..D ROLL^PXRMXTF
"RTN","PXRMXTA",21,0)
 .;If all the templates have been deleted exit report
"RTN","PXRMXTA",22,0)
 .I '$$FIND^PXRMXT(PXRMTYP) S DTOUT=1 Q
"RTN","PXRMXTA",23,0)
 .;Check if template has been deleted 
"RTN","PXRMXTA",24,0)
 .I '$D(DA) S DUOUT=1 Q
"RTN","PXRMXTA",25,0)
 .;Sort out the filing
"RTN","PXRMXTA",26,0)
 .D ^PXRMXTF I $D(MSG) S DUOUT=1 Q
"RTN","PXRMXTA",27,0)
 ;
"RTN","PXRMXTA",28,0)
FAC ;Option to combine multifacility report
"RTN","PXRMXTA",29,0)
 I "IPO"'[PXRMSEL,NFAC>1 D  Q:$D(DTOUT)  I $D(DUOUT) Q:PXRMUSER  G USE
"RTN","PXRMXTA",30,0)
 .D COMB^PXRMXSD(.PXRMFCMB,"Facilities","N")
"RTN","PXRMXTA",31,0)
 ;
"RTN","PXRMXTA",32,0)
 ;Date range input (location only)
"RTN","PXRMXTA",33,0)
DAT I PXRMSEL="L" D  Q:$D(DTOUT)  I $D(DUOUT) Q:PXRMUSER  G USE
"RTN","PXRMXTA",34,0)
 .I PXRMFD="P" D PDR^PXRMXDUT(.PXRMBDT,.PXRMEDT,"ENCOUNTER")
"RTN","PXRMXTA",35,0)
 .I PXRMFD="F" D FDR^PXRMXDUT(.PXRMBDT,.PXRMEDT,"APPOINTMENT")
"RTN","PXRMXTA",36,0)
 .I PXRMFD="A" D PDR^PXRMXDUT(.PXRMBDT,.PXRMEDT,"ADMISSION")
"RTN","PXRMXTA",37,0)
 .I PXRMFD="C" S PXRMBDT=DT,PXRMEDT=DT
"RTN","PXRMXTA",38,0)
 ;Due Effective Date
"RTN","PXRMXTA",39,0)
EFF D SDR^PXRMXDUT(.PXRMSDT) Q:$D(DTOUT)
"RTN","PXRMXTA",40,0)
 I $D(DUOUT) G:PXRMSEL="L" DAT Q:PXRMUSER  G USE
"RTN","PXRMXTA",41,0)
 ;
"RTN","PXRMXTA",42,0)
 ;Check if combined location report is required
"RTN","PXRMXTA",43,0)
LCOMB S NLOC=0
"RTN","PXRMXTA",44,0)
 I PXRMREP="D",PXRMSEL="L" D  G:$D(DTOUT) EXIT G:$D(DUOUT) EFF
"RTN","PXRMXTA",45,0)
 .N DEFAULT,TEXT
"RTN","PXRMXTA",46,0)
 .D NLOC^PXRMXD
"RTN","PXRMXTA",47,0)
 .I NLOC>1 D COMB^PXRMXSD(.PXRMLCMB,TEXT,DEFAULT)
"RTN","PXRMXTA",48,0)
 ;
"RTN","PXRMXTA",49,0)
 ;Reminders Due sort and appointment date options
"RTN","PXRMXTA",50,0)
APPT I PXRMREP="D" D FUT Q:$D(DTOUT)  I $D(DUOUT) G:(PXRMSEL="L")&(NLOC>1) LCOMB G EFF
"RTN","PXRMXTA",51,0)
 ;
"RTN","PXRMXTA",52,0)
 ;
"RTN","PXRMXTA",53,0)
 ;Option to print full SSN
"RTN","PXRMXTA",54,0)
SSN I PXRMREP="D" D  G:$D(DTOUT) EXIT G:$D(DUOUT) APPT
"RTN","PXRMXTA",55,0)
 .D SSN^PXRMXSD(.PXRMSSN)
"RTN","PXRMXTA",56,0)
 ;
"RTN","PXRMXTA",57,0)
 ;Option to print without totals, with totals or totals only
"RTN","PXRMXTA",58,0)
TOT I PXRMREP="S" D  Q:$D(DTOUT)  I $D(DUOUT) G EFF
"RTN","PXRMXTA",59,0)
 .;Default is normal report
"RTN","PXRMXTA",60,0)
 .S PXRMTOT="I"
"RTN","PXRMXTA",61,0)
 .;Only prompt if more than one location, team or provider is selected
"RTN","PXRMXTA",62,0)
 .I PXRMSEL="P",'$O(PXRMPRV(1)) Q
"RTN","PXRMXTA",63,0)
 .I PXRMSEL="O",'$O(PXRMOTM(1)) Q
"RTN","PXRMXTA",64,0)
 .I PXRMSEL="T",'$O(PXRMPCM(1)) Q
"RTN","PXRMXTA",65,0)
 .;Ignore reports for all locations
"RTN","PXRMXTA",66,0)
 .I PXRMSEL="L",PXRMLCMB="Y" Q
"RTN","PXRMXTA",67,0)
 .I PXRMSEL="L" N DEFAULT,TEXT D NLOC^PXRMXD Q:NLOC<2
"RTN","PXRMXTA",68,0)
 .;Prompt for options
"RTN","PXRMXTA",69,0)
 .N LIT1,LIT2,LIT3
"RTN","PXRMXTA",70,0)
 .D LIT^PXRMXD,TOTALS^PXRMXSD(.PXRMTOT,LIT1,LIT2,LIT3)
"RTN","PXRMXTA",71,0)
 ;
"RTN","PXRMXTA",72,0)
 ;Option to print delimiter separated output
"RTN","PXRMXTA",73,0)
TABS D  G:$D(DTOUT) EXIT I $D(DUOUT) G:PXRMREP="D" SSN G TOT
"RTN","PXRMXTA",74,0)
 .D TABS^PXRMXSD(.PXRMTABS)
"RTN","PXRMXTA",75,0)
 ;
"RTN","PXRMXTA",76,0)
 ;Select chracter
"RTN","PXRMXTA",77,0)
TCHAR I PXRMTABS="Y" D  G:$D(DTOUT) EXIT G:$D(DUOUT) TABS
"RTN","PXRMXTA",78,0)
 .D TABSEL^PXRMXSD(.PXRMTABC)
"RTN","PXRMXTA",79,0)
 ;
"RTN","PXRMXTA",80,0)
 ;Initiate report
"RTN","PXRMXTA",81,0)
 D @ROUTINE
"RTN","PXRMXTA",82,0)
EXIT Q
"RTN","PXRMXTA",83,0)
 ;
"RTN","PXRMXTA",84,0)
 ;File locking
"RTN","PXRMXTA",85,0)
 ;------------
"RTN","PXRMXTA",86,0)
UNLOCK L -^PXRMPT(810.1,$P(PXRMTMP,U)) Q
"RTN","PXRMXTA",87,0)
LOCK L +^PXRMPT(810.1,$P(PXRMTMP,U)):0
"RTN","PXRMXTA",88,0)
 E  W !!?5,"Another user is editing this entry" S DUOUT=1
"RTN","PXRMXTA",89,0)
 Q
"RTN","PXRMXTA",90,0)
 ;
"RTN","PXRMXTA",91,0)
 ;Option to Edit
"RTN","PXRMXTA",92,0)
 ;--------------
"RTN","PXRMXTA",93,0)
EDIT N DIDEL,DIE,DR K DTOUT,DUOUT
"RTN","PXRMXTA",94,0)
 ;Edit report name, title and PXRMSEL (patient sample)
"RTN","PXRMXTA",95,0)
 S DIE=810.1,DA=$P(PXRMTMP,U),DR=".01T;1.9T;1.2T",DIDEL=810.1
"RTN","PXRMXTA",96,0)
 D ^DIE I $D(Y) S DUOUT=1 Q
"RTN","PXRMXTA",97,0)
 ;Check if template has been deleted
"RTN","PXRMXTA",98,0)
 I '$D(DA) Q
"RTN","PXRMXTA",99,0)
 ;Get updated value of PXRMXSEL
"RTN","PXRMXTA",100,0)
 N PXRMSEL S PXRMSEL=X
"RTN","PXRMXTA",101,0)
 ;Needed for 1.6T validation - Prior/Future or Current/Admissions
"RTN","PXRMXTA",102,0)
 N PXRMINP
"RTN","PXRMXTA",103,0)
 ;Further fields depend on value in PXRMXSEL
"RTN","PXRMXTA",104,0)
 I PXRMSEL="I" S DR="6T",PXRMINP=0
"RTN","PXRMXTA",105,0)
 I PXRMSEL="L" D  Q:$D(DUOUT)
"RTN","PXRMXTA",106,0)
 .;Get location report type 
"RTN","PXRMXTA",107,0)
 .S DR="3T;1.5T" D ^DIE I $D(Y) S DUOUT=1 Q
"RTN","PXRMXTA",108,0)
 .N PXRMLCSC S PXRMLCSC=X,DR=""
"RTN","PXRMXTA",109,0)
 .;All location reports - prompt for prior/future/current/admissions
"RTN","PXRMXTA",110,0)
 .I PXRMLCSC="HAI" S PXRMINP=1,DR="1.6T" Q
"RTN","PXRMXTA",111,0)
 .I PXRMLCSC="HA" S PXRMINP=0,DR="1.6T"
"RTN","PXRMXTA",112,0)
 .I PXRMLCSC="CA" S PXRMINP=0,DR="1.6T"
"RTN","PXRMXTA",113,0)
 .;Selected Location/Stop Code/Clinic Group fields 
"RTN","PXRMXTA",114,0)
 .I PXRMLCSC="HS" D  Q:$D(DUOUT)
"RTN","PXRMXTA",115,0)
 ..S DR="10T"
"RTN","PXRMXTA",116,0)
 ..D ^DIE I $D(Y) S DUOUT=1 Q
"RTN","PXRMXTA",117,0)
 ..;Determine if locations input are all wards
"RTN","PXRMXTA",118,0)
 ..S PXRMINP=$$INP^PXRMXAP(PXRMLCSC,.PXRMLOCN)
"RTN","PXRMXTA",119,0)
 ..;Select Prior/Future or Current Inpatient/Admissions
"RTN","PXRMXTA",120,0)
 ..S DR="1.6T"
"RTN","PXRMXTA",121,0)
 .;Clinic Stop input and prior/future
"RTN","PXRMXTA",122,0)
 .I PXRMLCSC="CS" S PXRMINP=0,DR="11T;1.6T"
"RTN","PXRMXTA",123,0)
 .;Clinic Group input and prior/future
"RTN","PXRMXTA",124,0)
 .I PXRMLCSC="GS" S PXRMINP=0,DR="12T;1.6T"
"RTN","PXRMXTA",125,0)
 .;Service categories (except for inpatient reports)
"RTN","PXRMXTA",126,0)
 .I PXRMINP=0 S DR=DR_";9T"
"RTN","PXRMXTA",127,0)
 ;OE/RR teams
"RTN","PXRMXTA",128,0)
 I PXRMSEL="O" S DR="7T"
"RTN","PXRMXTA",129,0)
 ;PCMM Provider and Primary care/All
"RTN","PXRMXTA",130,0)
 I PXRMSEL="P" S DR="4T;1.3T"
"RTN","PXRMXTA",131,0)
 ;PCMM teams
"RTN","PXRMXTA",132,0)
 I PXRMSEL="T" S DR="3T;8T"
"RTN","PXRMXTA",133,0)
 ;Report type (detail or summary)
"RTN","PXRMXTA",134,0)
 S DR=DR_";1.4T"
"RTN","PXRMXTA",135,0)
 ;Reminder Categories
"RTN","PXRMXTA",136,0)
 S DR=DR_";13T"
"RTN","PXRMXTA",137,0)
 ;Reminders
"RTN","PXRMXTA",138,0)
 S DR=DR_";2T"
"RTN","PXRMXTA",139,0)
 ;
"RTN","PXRMXTA",140,0)
 ;Strip of any leading semi-colons
"RTN","PXRMXTA",141,0)
 I $E(DR)=";" S DR=$P(DR,";",2,99)
"RTN","PXRMXTA",142,0)
 ;
"RTN","PXRMXTA",143,0)
 D ^DIE I $D(Y) S DUOUT=1 Q
"RTN","PXRMXTA",144,0)
 ;
"RTN","PXRMXTA",145,0)
 ;If all reminders have been deleted from the template disallow save
"RTN","PXRMXTA",146,0)
 I +$P($G(^PXRMPT(810.1,DA(1),1,0)),U,4)=0 D  S DUOUT=1 Q
"RTN","PXRMXTA",147,0)
 .W !,"This template is incomplete - no reminders defined"
"RTN","PXRMXTA",148,0)
 Q
"RTN","PXRMXTA",149,0)
 ;
"RTN","PXRMXTA",150,0)
 ;Option to use report template
"RTN","PXRMXTA",151,0)
 ;-----------------------------
"RTN","PXRMXTA",152,0)
ASK(YESNO) ;
"RTN","PXRMXTA",153,0)
 N X,Y,TEXT
"RTN","PXRMXTA",154,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXTA",155,0)
 S DIR(0)="YA0"
"RTN","PXRMXTA",156,0)
 S DIR("A")="WANT TO EDIT '"_$P(PXRMTMP,U,2)_"' TEMPLATE: "
"RTN","PXRMXTA",157,0)
 S DIR("B")="N"
"RTN","PXRMXTA",158,0)
 S DIR("?")="Enter Y or N. For detailed help type ??"
"RTN","PXRMXTA",159,0)
 S DIR("??")=U_"D HELP^PXRMXTA(1)"
"RTN","PXRMXTA",160,0)
 W !
"RTN","PXRMXTA",161,0)
 D ^DIR K DIR
"RTN","PXRMXTA",162,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXTA",163,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXTA",164,0)
 S YESNO=$E(Y(0))
"RTN","PXRMXTA",165,0)
 Q
"RTN","PXRMXTA",166,0)
 ;
"RTN","PXRMXTA",167,0)
 ;General help text routine. Write out the text in the HTEXT array
"RTN","PXRMXTA",168,0)
 ;----------------------------------------------------------------
"RTN","PXRMXTA",169,0)
HELP(CALL) ;
"RTN","PXRMXTA",170,0)
 N HTEXT
"RTN","PXRMXTA",171,0)
 N DIWF,DIWL,DIWR,IC
"RTN","PXRMXTA",172,0)
 S DIWF="C70",DIWL=0,DIWR=70
"RTN","PXRMXTA",173,0)
 ;
"RTN","PXRMXTA",174,0)
 I CALL=1 D
"RTN","PXRMXTA",175,0)
 .S HTEXT(1)="Enter 'N' to run the report using the parameters from "
"RTN","PXRMXTA",176,0)
 .S HTEXT(2)="the existing template. Enter 'Y' to copy/edit the "
"RTN","PXRMXTA",177,0)
 .S HTEXT(3)="template."
"RTN","PXRMXTA",178,0)
 ;
"RTN","PXRMXTA",179,0)
 K ^UTILITY($J,"W")
"RTN","PXRMXTA",180,0)
 S IC=""
"RTN","PXRMXTA",181,0)
 F  S IC=$O(HTEXT(IC)) Q:IC=""  D
"RTN","PXRMXTA",182,0)
 . S X=HTEXT(IC)
"RTN","PXRMXTA",183,0)
 . D ^DIWP
"RTN","PXRMXTA",184,0)
 W !
"RTN","PXRMXTA",185,0)
 S IC=0
"RTN","PXRMXTA",186,0)
 F  S IC=$O(^UTILITY($J,"W",0,IC)) Q:IC=""  D
"RTN","PXRMXTA",187,0)
 . W !,^UTILITY($J,"W",0,IC,0)
"RTN","PXRMXTA",188,0)
 K ^UTILITY($J,"W")
"RTN","PXRMXTA",189,0)
 W !
"RTN","PXRMXTA",190,0)
 Q
"RTN","PXRMXTA",191,0)
 ;
"RTN","PXRMXTA",192,0)
 ;Reminders Due specific prompts
"RTN","PXRMXTA",193,0)
 ;------------------------------
"RTN","PXRMXTA",194,0)
FUT ;For detailed report give option to display future appointments
"RTN","PXRMXTA",195,0)
 S PXRMFUT="N"
"RTN","PXRMXTA",196,0)
 I PXRMREP="D" D  Q:$D(DTOUT)!$D(DUOUT)
"RTN","PXRMXTA",197,0)
 .D FUTURE^PXRMXSD(.PXRMFUT)
"RTN","PXRMXTA",198,0)
 ;
"RTN","PXRMXTA",199,0)
SRT ;For detailed report give option to sort by appointment date
"RTN","PXRMXTA",200,0)
 S PXRMSRT="N"
"RTN","PXRMXTA",201,0)
 I PXRMREP="D",(PXRMSEL'="I") D  G:$D(DUOUT) FUT
"RTN","PXRMXTA",202,0)
 .;Inpatient report
"RTN","PXRMXTA",203,0)
 .S PXRMINP=$$INP^PXRMXD
"RTN","PXRMXTA",204,0)
 .;Option to sort by bed
"RTN","PXRMXTA",205,0)
 .I PXRMINP D BED^PXRMXSD(.PXRMSRT) Q
"RTN","PXRMXTA",206,0)
 .;Option to sort by appt date
"RTN","PXRMXTA",207,0)
 .D SRT^PXRMXSD(.PXRMSRT)
"RTN","PXRMXTA",208,0)
 ;
"RTN","PXRMXTA",209,0)
 Q
"RTN","PXRMXTA",210,0)
 ;
"RTN","PXRMXTA",211,0)
 ;Input validation for file #810.1
"RTN","PXRMXTA",212,0)
 ;
"RTN","PXRMXTA",213,0)
 ;If detail report allow only one reminder
"RTN","PXRMXTA",214,0)
PXRMREM I $P(^PXRMPT(810.1,DA(1),0),U,6)'="D" Q
"RTN","PXRMXTA",215,0)
 ;If template has no reminders ignore
"RTN","PXRMXTA",216,0)
 I +$P($G(^PXRMPT(810.1,DA(1),1,0)),U,4)=0 Q
"RTN","PXRMXTA",217,0)
 ;If this a new entry
"RTN","PXRMXTA",218,0)
 I $G(Y)=-1 K X W !,"Only one reminder allowed for detailed report."
"RTN","PXRMXTA",219,0)
 Q
"RTN","PXRMXTA",220,0)
 ;
"RTN","PXRMXTA",221,0)
 ;If changing from Summary to Detail report
"RTN","PXRMXTA",222,0)
PXRMREP Q:$G(X)'="D"
"RTN","PXRMXTA",223,0)
 Q:$P($G(^PXRMPT(810.1,DA,0)),U,6)'="S"
"RTN","PXRMXTA",224,0)
 Q:+$G(NREM)<2
"RTN","PXRMXTA",225,0)
 W !,"Only the first reminder on this template will be evaluated"
"RTN","PXRMXTA",226,0)
 Q
"RTN","PXRMXTB")
0^18^B35581468
"RTN","PXRMXTB",1,0)
PXRMXTB ; SLC/PJH - Reminder Reports Template Load ;08/01/2001
"RTN","PXRMXTB",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXTB",3,0)
 ; 
"RTN","PXRMXTB",4,0)
 ; Called from PXRMXD
"RTN","PXRMXTB",5,0)
 ;
"RTN","PXRMXTB",6,0)
 ;Select Template
"RTN","PXRMXTB",7,0)
 ;---------------
"RTN","PXRMXTB",8,0)
START N X,Y,CNT,FOUND,PXRMFLD,DIC,MSG
"RTN","PXRMXTB",9,0)
 N ERR,SEQ,TMPLST,LIST
"RTN","PXRMXTB",10,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXTB",11,0)
 S PXRMTMP="",FOUND=0
"RTN","PXRMXTB",12,0)
 ;
"RTN","PXRMXTB",13,0)
 ;Check if any templates exist for the user
"RTN","PXRMXTB",14,0)
 D GETLST^XPAR(.TMPLST,"USR","PXRM REPORT TEMPLATE (USER)","Q",.ERR)
"RTN","PXRMXTB",15,0)
 I ERR>0 W !!,?5,"Error: "_$P(ERR,U,2) S DUOUT=1 H 2 Q
"RTN","PXRMXTB",16,0)
 I 'TMPLST W !!,?5,"No report Templates for this user" S DUOUT=1 H 2 Q
"RTN","PXRMXTB",17,0)
 ;Build list of templates
"RTN","PXRMXTB",18,0)
 S SEQ=0
"RTN","PXRMXTB",19,0)
 F  S SEQ=$O(TMPLST(SEQ)) Q:'SEQ  D
"RTN","PXRMXTB",20,0)
 .S Y=$P(TMPLST(SEQ),U,2) Q:'Y
"RTN","PXRMXTB",21,0)
 .S LIST(Y)=""
"RTN","PXRMXTB",22,0)
 ;
"RTN","PXRMXTB",23,0)
 ;Select template required
"RTN","PXRMXTB",24,0)
 W !
"RTN","PXRMXTB",25,0)
 S CNT=0,DIC=810.1,DIC(0)="AEQMZ"
"RTN","PXRMXTB",26,0)
 S DIC("A")="Select REPORT TEMPLATE:"
"RTN","PXRMXTB",27,0)
 S DIC("S")="I $D(LIST(+Y)),$P(^PXRMPT(810.1,+Y,0),U,3)=PXRMTYP"
"RTN","PXRMXTB",28,0)
 D ^DIC
"RTN","PXRMXTB",29,0)
 I X="" S DUOUT=1
"RTN","PXRMXTB",30,0)
 I X=(U_U) S DTOUT=1
"RTN","PXRMXTB",31,0)
 I '$D(DTOUT),('$D(DUOUT)) D
"RTN","PXRMXTB",32,0)
 .I +Y'=-1 D  Q
"RTN","PXRMXTB",33,0)
 ..S CNT=CNT+1,ARRAY(CNT)=Y_U_Y(0,0)_U_$P(Y(0),U,3)
"RTN","PXRMXTB",34,0)
 K DIC
"RTN","PXRMXTB",35,0)
 ;
"RTN","PXRMXTB",36,0)
 ;Load template into local array
"RTN","PXRMXTB",37,0)
 I (+Y'=-1)&('$D(DTOUT))&('$D(DUOUT)) D
"RTN","PXRMXTB",38,0)
 .L +^PXRMPT(810.1,$P(Y,U)):0
"RTN","PXRMXTB",39,0)
 .E  W !!?5,"Another user is editing this entry." S DUOUT=1 Q
"RTN","PXRMXTB",40,0)
 .;Load template into an array
"RTN","PXRMXTB",41,0)
 .S PXRMTMP=Y_U_$P(Y(0),U,2) D LOAD
"RTN","PXRMXTB",42,0)
 .L -^PXRMPT(810.1,$P(PXRMTMP,U))
"RTN","PXRMXTB",43,0)
 .;Exit if problem loading template
"RTN","PXRMXTB",44,0)
 .I $D(MSG) S DTOUT=1 Q
"RTN","PXRMXTB",45,0)
 .;Display Template information
"RTN","PXRMXTB",46,0)
 .D:'$D(MSG) ^PXRMXTD
"RTN","PXRMXTB",47,0)
 ;
"RTN","PXRMXTB",48,0)
EXIT Q
"RTN","PXRMXTB",49,0)
 ;
"RTN","PXRMXTB",50,0)
 ;Load variables from report template (both INT and EXT)
"RTN","PXRMXTB",51,0)
 ;------------------------------------------------------
"RTN","PXRMXTB",52,0)
LOAD N ARRAY
"RTN","PXRMXTB",53,0)
 D GETS^DIQ(810.1,$P(PXRMTMP,U),"**","IER","ARRAY","MSG")
"RTN","PXRMXTB",54,0)
 I $D(MSG) D  Q
"RTN","PXRMXTB",55,0)
 .W !!,"File read failed, GETS^DIQ returned the following error message:"
"RTN","PXRMXTB",56,0)
 .N IC S IC="MSG"
"RTN","PXRMXTB",57,0)
 .F  S IC=$Q(@IC) Q:IC=""  W !,IC,"=",@IC
"RTN","PXRMXTB",58,0)
 .W !,"Examine the above error message for the reason.",!
"RTN","PXRMXTB",59,0)
 .H 2
"RTN","PXRMXTB",60,0)
 ;
"RTN","PXRMXTB",61,0)
 N SUB,SUB1,ORDER,ORDERC
"RTN","PXRMXTB",62,0)
 ;
"RTN","PXRMXTB",63,0)
 S SUB1=$O(ARRAY(810.1,""))
"RTN","PXRMXTB",64,0)
 F SUB="PXRMTYP","PXRMSEL","PXRMREP","PXRMPRIM","PXRMFD","PXRMFUT" D
"RTN","PXRMXTB",65,0)
 .S @SUB=$G(ARRAY(810.1,SUB1,SUB,"I"))
"RTN","PXRMXTB",66,0)
 ;
"RTN","PXRMXTB",67,0)
 ;Location Selection criteria
"RTN","PXRMXTB",68,0)
 S PXRMLCSC=ARRAY(810.1,SUB1,"PXRMLCSC","I")
"RTN","PXRMXTB",69,0)
 ;
"RTN","PXRMXTB",70,0)
 ;Reminders Due fields only
"RTN","PXRMXTB",71,0)
 F SUB="PXRMFD" D
"RTN","PXRMXTB",72,0)
 .S @SUB=$G(ARRAY(810.1,SUB1,SUB,"I"))
"RTN","PXRMXTB",73,0)
 ;
"RTN","PXRMXTB",74,0)
 S PXRMFLD=$G(ARRAY(810.1,SUB1,"PXRMSEL","E"))
"RTN","PXRMXTB",75,0)
 S RUN=$G(ARRAY(810.1,SUB1,"RUN","E"))
"RTN","PXRMXTB",76,0)
 ;Update name if template has been renamed
"RTN","PXRMXTB",77,0)
 S $P(PXRMTMP,U,2)=$G(ARRAY(810.1,SUB1,"NAME","E"))
"RTN","PXRMXTB",78,0)
 S TITLE=$G(ARRAY(810.1,SUB1,"TITLE","E")),$P(PXRMTMP,U,3)=TITLE
"RTN","PXRMXTB",79,0)
 ;
"RTN","PXRMXTB",80,0)
 ;Clear multiple field arrays
"RTN","PXRMXTB",81,0)
 K PXRMREM,PXRMPAT,PXRMPRV,PXRMOTM,PXRMFAC,PXRMLCHL,PXRMCS,PXRMCGRP
"RTN","PXRMXTB",82,0)
 K PXRMFACN,PXRMCSN,PXRMCGRN,PXRMRCAT
"RTN","PXRMXTB",83,0)
 ;
"RTN","PXRMXTB",84,0)
 ;Load Multiple fields
"RTN","PXRMXTB",85,0)
 D SUB(.PXRMREM,810.12,"REMINDER",1)
"RTN","PXRMXTB",86,0)
 ;Load Patients
"RTN","PXRMXTB",87,0)
 D SUB(.PXRMPAT,810.16,"PATIENT",1)
"RTN","PXRMXTB",88,0)
 ;Load Providers
"RTN","PXRMXTB",89,0)
 D SUB(.PXRMPRV,810.14,"PROVIDER",1)
"RTN","PXRMXTB",90,0)
 ;Load OE/RR Teams
"RTN","PXRMXTB",91,0)
 D SUB(.PXRMOTM,810.17,"OERR TEAM",1)
"RTN","PXRMXTB",92,0)
 ;Load PCMM Teams
"RTN","PXRMXTB",93,0)
 D SUB(.PXRMPCM,810.18,"PCMM TEAM",1)
"RTN","PXRMXTB",94,0)
 ;Load Facility codes
"RTN","PXRMXTB",95,0)
 D SUB(.PXRMFAC,810.13,"FACILITY",1)
"RTN","PXRMXTB",96,0)
 ;Load Hospital Location codes
"RTN","PXRMXTB",97,0)
 D SUB(.PXRMLCHL,810.11,"LOCATION",2)
"RTN","PXRMXTB",98,0)
 ;Load Clinic Stop codes
"RTN","PXRMXTB",99,0)
 D SUB(.PXRMCS,810.111,"STOP CODE",2)
"RTN","PXRMXTB",100,0)
 ;Load Clinic Groups
"RTN","PXRMXTB",101,0)
 D SUB(.PXRMCGRP,810.112,"CLINIC GROUP",1)
"RTN","PXRMXTB",102,0)
 ;Load Reminder Categories
"RTN","PXRMXTB",103,0)
 D SUB(.PXRMRCAT,810.113,"REMINDER CATEGORY",1)
"RTN","PXRMXTB",104,0)
 ;
"RTN","PXRMXTB",105,0)
 ;Build PXRMFACN/PXRMLOCN array IEN's and counters NHL/NFAC
"RTN","PXRMXTB",106,0)
 D NUM
"RTN","PXRMXTB",107,0)
 ;
"RTN","PXRMXTB",108,0)
 ;Build Service Category string (held as array in PXRMPT to allow edit)
"RTN","PXRMXTB",109,0)
 I PXRMSEL="L" S PXRMSCAT=$$STR(810.19,"SERVICE")
"RTN","PXRMXTB",110,0)
 ;
"RTN","PXRMXTB",111,0)
 ;Add Descriptions for Reminders
"RTN","PXRMXTB",112,0)
 D DES(.PXRMREM,"^PXD(811.9",4)
"RTN","PXRMXTB",113,0)
 ;Add Descriptions for Teams
"RTN","PXRMXTB",114,0)
 D DES(.PXRMOTM,"^OR(100.21",3)
"RTN","PXRMXTB",115,0)
 ;Add Display Codes for Stops
"RTN","PXRMXTB",116,0)
 D CODE(.PXRMCS,"^DIC(40.7",3)
"RTN","PXRMXTB",117,0)
 ;
"RTN","PXRMXTB",118,0)
 ;Sort Reminders into display order
"RTN","PXRMXTB",119,0)
 D SORT(.PXRMREM,.ORDER)
"RTN","PXRMXTB",120,0)
 ;Sort Reminder Categories into display order
"RTN","PXRMXTB",121,0)
 D SORT(.PXRMRCAT,.ORDERC)
"RTN","PXRMXTB",122,0)
 ;
"RTN","PXRMXTB",123,0)
 ;Combine individual reminders and category reminders
"RTN","PXRMXTB",124,0)
 D MERGE^PXRMXS1
"RTN","PXRMXTB",125,0)
 Q
"RTN","PXRMXTB",126,0)
 ;
"RTN","PXRMXTB",127,0)
 ;
"RTN","PXRMXTB",128,0)
 ;Extract INTernal and EXTernal format from ARRAY
"RTN","PXRMXTB",129,0)
 ;-----------------------------------------------
"RTN","PXRMXTB",130,0)
SUB(OUTPUT,SUB,VAR,ORD) ; 
"RTN","PXRMXTB",131,0)
 K OUTPUT
"RTN","PXRMXTB",132,0)
 N IC,INT,EXT,SUB1,DISP
"RTN","PXRMXTB",133,0)
 S SUB1="",IC=0
"RTN","PXRMXTB",134,0)
 F  S SUB1=$O(ARRAY(SUB,SUB1)) Q:SUB1=""  D
"RTN","PXRMXTB",135,0)
 .S INT=$P($G(ARRAY(SUB,SUB1,VAR,"I")),";")
"RTN","PXRMXTB",136,0)
 .S EXT=$G(ARRAY(SUB,SUB1,VAR,"E"))
"RTN","PXRMXTB",137,0)
 .S IC=IC+1
"RTN","PXRMXTB",138,0)
 .I ORD=1 S OUTPUT(IC)=INT_U_EXT
"RTN","PXRMXTB",139,0)
 .I ORD'=1 S OUTPUT(IC)=EXT_U_INT
"RTN","PXRMXTB",140,0)
 .I (VAR'="REMINDER"),(VAR'="REMINDER CATEGORY") Q
"RTN","PXRMXTB",141,0)
 .;Get display order
"RTN","PXRMXTB",142,0)
 .S DISP=$G(ARRAY(SUB,SUB1,"DISPLAY ORDER","I"))
"RTN","PXRMXTB",143,0)
 .;Store in PXRMREM for display
"RTN","PXRMXTB",144,0)
 .S OUTPUT(IC)=OUTPUT(IC)_U_DISP
"RTN","PXRMXTB",145,0)
 .;Put reminders with no sequence number last
"RTN","PXRMXTB",146,0)
 .I DISP="" S DISP=99
"RTN","PXRMXTB",147,0)
 .;Create order array for sorting entries later
"RTN","PXRMXTB",148,0)
 .I VAR="REMINDER" S ORDER(DISP,IC)=""
"RTN","PXRMXTB",149,0)
 .I VAR="REMINDER CATEGORY" S ORDERC(DISP,IC)=""
"RTN","PXRMXTB",150,0)
 ; Update counter and save display order
"RTN","PXRMXTB",151,0)
 I VAR="REMINDER" S NREM=IC
"RTN","PXRMXTB",152,0)
 Q
"RTN","PXRMXTB",153,0)
 ;
"RTN","PXRMXTB",154,0)
 ;Extract INTernal format from ARRAY and build string
"RTN","PXRMXTB",155,0)
 ;---------------------------------------------------
"RTN","PXRMXTB",156,0)
STR(SUB,VAR) ; 
"RTN","PXRMXTB",157,0)
 N IC,INT,SUB1
"RTN","PXRMXTB",158,0)
 S SUB1="",IC=0,@VAR=""
"RTN","PXRMXTB",159,0)
 F  S SUB1=$O(ARRAY(SUB,SUB1)) Q:SUB1=""  D
"RTN","PXRMXTB",160,0)
 .S INT=$P($G(ARRAY(SUB,SUB1,VAR,"I")),";")
"RTN","PXRMXTB",161,0)
 .S @VAR=@VAR_INT
"RTN","PXRMXTB",162,0)
 Q @VAR
"RTN","PXRMXTB",163,0)
 ;
"RTN","PXRMXTB",164,0)
 ;Build array PXRMFACN and NFAC
"RTN","PXRMXTB",165,0)
 ;-----------------------------
"RTN","PXRMXTB",166,0)
NUM N IC,FACN,FACNAM
"RTN","PXRMXTB",167,0)
 K PXRMLOCN,PXRMCSN,PXRMCGRN,PXRMFACN
"RTN","PXRMXTB",168,0)
 S IC=""
"RTN","PXRMXTB",169,0)
 F  S IC=$O(PXRMFAC(IC)) Q:IC=""  D
"RTN","PXRMXTB",170,0)
 .S FACN=$P(PXRMFAC(IC),U),FACNAM=$P(PXRMFAC(IC),U,2)
"RTN","PXRMXTB",171,0)
 .S PXRMFACN(FACN)=FACNAM_U_FACN,NFAC=IC
"RTN","PXRMXTB",172,0)
 ; Build Array PXRMLOCN and NHL
"RTN","PXRMXTB",173,0)
 N LOCN
"RTN","PXRMXTB",174,0)
 F  S IC=$O(PXRMLCHL(IC)) Q:IC=""  D
"RTN","PXRMXTB",175,0)
 .S LOCN=$P(PXRMLCHL(IC),U,2)
"RTN","PXRMXTB",176,0)
 .S PXRMLOCN(LOCN)=IC,NHL=IC
"RTN","PXRMXTB",177,0)
 ; Build Array PXRMCSN and NCS
"RTN","PXRMXTB",178,0)
 N CSN
"RTN","PXRMXTB",179,0)
 F  S IC=$O(PXRMCS(IC)) Q:IC=""  D
"RTN","PXRMXTB",180,0)
 .S CSN=$P(PXRMCS(IC),U,2)
"RTN","PXRMXTB",181,0)
 .S PXRMCSN(CSN)=IC,NCS=IC
"RTN","PXRMXTB",182,0)
 ; Build Array PXRMCGRN and NCGRP
"RTN","PXRMXTB",183,0)
 N GRPN
"RTN","PXRMXTB",184,0)
 F  S IC=$O(PXRMCGRP(IC)) Q:IC=""  D
"RTN","PXRMXTB",185,0)
 .S GRPN=$P(PXRMCGRP(IC),U,1)
"RTN","PXRMXTB",186,0)
 .S PXRMCGRN(GRPN)=IC,NCGRP=IC
"RTN","PXRMXTB",187,0)
 Q
"RTN","PXRMXTB",188,0)
 ;
"RTN","PXRMXTB",189,0)
 ;Add print name to OUTPUT array
"RTN","PXRMXTB",190,0)
 ;-------------------------------
"RTN","PXRMXTB",191,0)
DES(OUTPUT,GLOB,POSN) ;
"RTN","PXRMXTB",192,0)
 N IC,IEN,DES
"RTN","PXRMXTB",193,0)
 S IC=""
"RTN","PXRMXTB",194,0)
 F  S IC=$O(OUTPUT(IC)) Q:IC=""  D
"RTN","PXRMXTB",195,0)
 .S IEN=$P(OUTPUT(IC),U,1)
"RTN","PXRMXTB",196,0)
 .X "S DES=$P($G("_GLOB_",IEN,0)),U,3)"
"RTN","PXRMXTB",197,0)
 .S $P(OUTPUT(IC),U,POSN)=DES
"RTN","PXRMXTB",198,0)
 Q
"RTN","PXRMXTB",199,0)
 ;
"RTN","PXRMXTB",200,0)
 ;Add stop code to OUTPUT array
"RTN","PXRMXTB",201,0)
 ;-------------------------------
"RTN","PXRMXTB",202,0)
CODE(OUTPUT,GLOB,POSN) ;
"RTN","PXRMXTB",203,0)
 N IC,IEN,CODE
"RTN","PXRMXTB",204,0)
 S IC=""
"RTN","PXRMXTB",205,0)
 F  S IC=$O(OUTPUT(IC)) Q:IC=""  D
"RTN","PXRMXTB",206,0)
 .S IEN=$P(OUTPUT(IC),U,2)
"RTN","PXRMXTB",207,0)
 .X "S CODE=$P($G("_GLOB_",IEN,0)),U,2)"
"RTN","PXRMXTB",208,0)
 .S $P(OUTPUT(IC),U,POSN)=CODE
"RTN","PXRMXTB",209,0)
 Q
"RTN","PXRMXTB",210,0)
 ;
"RTN","PXRMXTB",211,0)
 ;Sort reminders into display order (allow for duplicates)
"RTN","PXRMXTB",212,0)
 ;--------------------------------------------------------
"RTN","PXRMXTB",213,0)
SORT(INPUT,ORDER) ;
"RTN","PXRMXTB",214,0)
 N IC,DISP,OUTPUT,IC1
"RTN","PXRMXTB",215,0)
 S DISP="",IC1=0
"RTN","PXRMXTB",216,0)
 F  S DISP=$O(ORDER(DISP)) Q:DISP=""  D
"RTN","PXRMXTB",217,0)
 .S IC=""
"RTN","PXRMXTB",218,0)
 .F  S IC=$O(ORDER(DISP,IC)) Q:IC=""  D
"RTN","PXRMXTB",219,0)
 ..S IC1=IC1+1,OUTPUT(IC1)=INPUT(IC)
"RTN","PXRMXTB",220,0)
 ; Move results back
"RTN","PXRMXTB",221,0)
 K INPUT M INPUT=OUTPUT
"RTN","PXRMXTB",222,0)
 Q
"RTN","PXRMXTD")
0^19^B10194912
"RTN","PXRMXTD",1,0)
PXRMXTD ; SLC/PJH - Reminder Reports Template Display ;04/20/2001
"RTN","PXRMXTD",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXTD",3,0)
 ; 
"RTN","PXRMXTD",4,0)
 ; Called from PXRMXT/PXRMXTF
"RTN","PXRMXTD",5,0)
 ;
"RTN","PXRMXTD",6,0)
 ;
"RTN","PXRMXTD",7,0)
 ;Display Template information
"RTN","PXRMXTD",8,0)
START ;----------------------------
"RTN","PXRMXTD",9,0)
 N PAGE,BMARG,DONE,SD,ED,DES,RDES,CDES,PSTART,PXRMOPT,IC,CNT
"RTN","PXRMXTD",10,0)
 S PAGE=1,BMARG=0,DONE=0,SD="",ED="",PSTART=10,CNT=0
"RTN","PXRMXTD",11,0)
 ;
"RTN","PXRMXTD",12,0)
 D LITS^PXRMXGPR
"RTN","PXRMXTD",13,0)
 ;
"RTN","PXRMXTD",14,0)
 I PXRMREP="D" S PXRMOPT="Detailed Report"
"RTN","PXRMXTD",15,0)
 I PXRMREP="S" S PXRMOPT="Summary Report"
"RTN","PXRMXTD",16,0)
 W !!?(PSTART),"Report Title:",?32,$P(PXRMTMP,U,3)
"RTN","PXRMXTD",17,0)
 W !?PSTART,"Report Type:",?32,PXRMOPT
"RTN","PXRMXTD",18,0)
 W !?PSTART,"Patient Sample:",?32,PXRMFLD
"RTN","PXRMXTD",19,0)
 I "LT"[PXRMSEL D
"RTN","PXRMXTD",20,0)
 .W !,?PSTART,"Facility:" D FAC
"RTN","PXRMXTD",21,0)
 I PXRMSEL'="L" W !,?PSTART,PXRMFLD,":" D ARRS
"RTN","PXRMXTD",22,0)
 I PXRMSEL="L" D
"RTN","PXRMXTD",23,0)
 .W !?PSTART,PXRMFLD,":",?32,DES
"RTN","PXRMXTD",24,0)
 .I $E(PXRMLCSC,2)'="A" W ! D ARRS
"RTN","PXRMXTD",25,0)
 I DONE Q
"RTN","PXRMXTD",26,0)
 S IC="" F  S IC=$O(PXRMRCAT(IC)) Q:IC=""  D  Q:DONE
"RTN","PXRMXTD",27,0)
 .W !,?PSTART W:IC=1 "Category:"
"RTN","PXRMXTD",28,0)
 .W ?32,$P(PXRMRCAT(IC),U,3),?35,$P(PXRMRCAT(IC),U,2) D CHECK(1)
"RTN","PXRMXTD",29,0)
 I DONE Q
"RTN","PXRMXTD",30,0)
 S IC="" F  S IC=$O(PXRMREM(IC)) Q:IC=""  D  Q:DONE
"RTN","PXRMXTD",31,0)
 .W !,?PSTART W:IC=1 "Reminder:"
"RTN","PXRMXTD",32,0)
 .W ?32,$P(PXRMREM(IC),U,3),?35,$P(PXRMREM(IC),U,2) D CHECK(1)
"RTN","PXRMXTD",33,0)
 I DONE Q
"RTN","PXRMXTD",34,0)
 I PXRMSEL="P" W !,?PSTART,"All/Primary:",?32,CDES
"RTN","PXRMXTD",35,0)
 W !?(PSTART),"Template Name:",?32,$P(PXRMTMP,U,2)
"RTN","PXRMXTD",36,0)
 W !?PSTART,"Date last run:",?32,$S(RUN]"":RUN,1:"n/a")
"RTN","PXRMXTD",37,0)
 I $D(PXRMSCAT),PXRMFD="P" D OSCAT(PXRMSCAT,PSTART)
"RTN","PXRMXTD",38,0)
EXIT Q
"RTN","PXRMXTD",39,0)
 ;
"RTN","PXRMXTD",40,0)
 ;Display selected teams/providers
"RTN","PXRMXTD",41,0)
 ;--------------------------------
"RTN","PXRMXTD",42,0)
ARRS N IC
"RTN","PXRMXTD",43,0)
 S IC=""
"RTN","PXRMXTD",44,0)
 I PXRMSEL="P" F  S IC=$O(PXRMPRV(IC)) Q:IC=""  D  Q:DONE
"RTN","PXRMXTD",45,0)
 .W:IC>1 ! W ?32,$P(PXRMPRV(IC),U,2) D CHECK(1)
"RTN","PXRMXTD",46,0)
 I PXRMSEL="T" F  S IC=$O(PXRMPCM(IC)) Q:IC=""  D  Q:DONE
"RTN","PXRMXTD",47,0)
 .W:IC>1 ! W ?32,$P(PXRMPCM(IC),U,2) D CHECK(1)
"RTN","PXRMXTD",48,0)
 I PXRMSEL="O" F  S IC=$O(PXRMOTM(IC)) Q:IC=""  D  Q:DONE
"RTN","PXRMXTD",49,0)
 .W:IC>1 ! W ?32,$P(PXRMOTM(IC),U,2) D CHECK(1)
"RTN","PXRMXTD",50,0)
 I PXRMSEL="I" F  S IC=$O(PXRMPAT(IC)) Q:IC=""  D  Q:DONE
"RTN","PXRMXTD",51,0)
 .W:IC>1 ! W ?32,$P(PXRMPAT(IC),U,2) D CHECK(1)
"RTN","PXRMXTD",52,0)
 I PXRMSEL="L" D
"RTN","PXRMXTD",53,0)
 .I $E(PXRMLCSC)="H" F  S IC=$O(PXRMLCHL(IC)) Q:IC=""  D
"RTN","PXRMXTD",54,0)
 ..W:IC>1 ! W ?32,$P(PXRMLCHL(IC),U) D CHECK(1)
"RTN","PXRMXTD",55,0)
 .I $E(PXRMLCSC)="C" F  S IC=$O(PXRMCS(IC)) Q:IC=""  D
"RTN","PXRMXTD",56,0)
 ..W:IC>1 ! W ?32,$P(PXRMCS(IC),U)," ",$P(PXRMCS(IC),U,3)
"RTN","PXRMXTD",57,0)
 ..D CHECK(1)
"RTN","PXRMXTD",58,0)
 .I $E(PXRMLCSC)="G" F  S IC=$O(PXRMCGRP(IC)) Q:IC=""  D
"RTN","PXRMXTD",59,0)
 ..W:IC>1 ! W ?32,$P(PXRMCGRP(IC),U)," ",$P(PXRMCGRP(IC),U,2)
"RTN","PXRMXTD",60,0)
 ..D CHECK(1)
"RTN","PXRMXTD",61,0)
 Q
"RTN","PXRMXTD",62,0)
 ;
"RTN","PXRMXTD",63,0)
 ;Display selected Facilities
"RTN","PXRMXTD",64,0)
 ;---------------------------
"RTN","PXRMXTD",65,0)
FAC N IC
"RTN","PXRMXTD",66,0)
 S IC=""
"RTN","PXRMXTD",67,0)
 F  S IC=$O(PXRMFAC(IC)) Q:IC=""  D  Q:DONE
"RTN","PXRMXTD",68,0)
 .W:IC>1 ! W ?32,$P(PXRMFAC(IC),U,2) D CHECK(1)
"RTN","PXRMXTD",69,0)
 Q
"RTN","PXRMXTD",70,0)
 ;
"RTN","PXRMXTD",71,0)
 ;
"RTN","PXRMXTD",72,0)
 ;Output the service categeories
"RTN","PXRMXTD",73,0)
 ;------------------------------
"RTN","PXRMXTD",74,0)
OSCAT(SCL,PSTART) ;
"RTN","PXRMXTD",75,0)
 N IC,CSTART,EM,SC,SCTEXT
"RTN","PXRMXTD",76,0)
 S CSTART=PSTART+3
"RTN","PXRMXTD",77,0)
 W !,?PSTART,"Service categories:",?32,SCL
"RTN","PXRMXTD",78,0)
 F IC=1:1:$L(SCL) D
"RTN","PXRMXTD",79,0)
 .S SC=$E(SCL,IC,IC)
"RTN","PXRMXTD",80,0)
 .S SCTEXT=$$EXTERNAL^DILFD(9000010,.07,"",SC,.EM)
"RTN","PXRMXTD",81,0)
 .W !,?CSTART,SC," - ",SCTEXT
"RTN","PXRMXTD",82,0)
 .D CHECK(1)
"RTN","PXRMXTD",83,0)
 Q
"RTN","PXRMXTD",84,0)
 ;
"RTN","PXRMXTD",85,0)
 ;Check for page throw
"RTN","PXRMXTD",86,0)
 ;--------------------
"RTN","PXRMXTD",87,0)
CHECK(LEAVE) ;
"RTN","PXRMXTD",88,0)
 S CNT=CNT+1
"RTN","PXRMXTD",89,0)
 I CNT>(IOSL-BMARG-LEAVE) D PAGE S CNT=0
"RTN","PXRMXTD",90,0)
 Q
"RTN","PXRMXTD",91,0)
 ;
"RTN","PXRMXTD",92,0)
 ;form feed to new page
"RTN","PXRMXTD",93,0)
 ;---------------------
"RTN","PXRMXTD",94,0)
PAGE I ($E(IOST)="C")&(IO=IO(0))&(PAGE>0) D
"RTN","PXRMXTD",95,0)
 .S DIR(0)="E"
"RTN","PXRMXTD",96,0)
 .W !
"RTN","PXRMXTD",97,0)
 .D ^DIR K DIR
"RTN","PXRMXTD",98,0)
 I $D(DUOUT)!($D(DTOUT))!($D(DIROUT)) S DONE=1 Q
"RTN","PXRMXTD",99,0)
 W !
"RTN","PXRMXTD",100,0)
 Q
"RTN","PXRMXTF")
0^20^B18964952
"RTN","PXRMXTF",1,0)
PXRMXTF ; SLC/PJH - Reminder Reports Template Filing ;01/12/2002
"RTN","PXRMXTF",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXTF",3,0)
 ; 
"RTN","PXRMXTF",4,0)
 ; Called from PXRMXTA
"RTN","PXRMXTF",5,0)
 ;
"RTN","PXRMXTF",6,0)
 ;Select template name and file
"RTN","PXRMXTF",7,0)
 ;-----------------------------
"RTN","PXRMXTF",8,0)
START N NEWIEN,NEWTEMP,OLDTEMP
"RTN","PXRMXTF",9,0)
 ;Save original name
"RTN","PXRMXTF",10,0)
 S OLDTEMP=$P(PXRMTMP,U,2)
"RTN","PXRMXTF",11,0)
 ;Reset PXRMTMP in case the template name field has been edited
"RTN","PXRMXTF",12,0)
 S $P(PXRMTMP,U,2)=$P($G(^PXRMPT(810.1,$P(PXRMTMP,U,1),0)),U)
"RTN","PXRMXTF",13,0)
 ;Redisplay changes made
"RTN","PXRMXTF",14,0)
 D REDISP
"RTN","PXRMXTF",15,0)
 ;Prompt template name
"RTN","PXRMXTF",16,0)
 D NAME
"RTN","PXRMXTF",17,0)
 ;Rollback ^DIE changes if edit is abandoned
"RTN","PXRMXTF",18,0)
 I $D(DTOUT)!$D(DUOUT) D ROLL Q
"RTN","PXRMXTF",19,0)
 ;
"RTN","PXRMXTF",20,0)
 I NEWTEMP=$P(PXRMTMP,U,2),NEWTEMP=OLDTEMP D MESS(1,NEWTEMP)
"RTN","PXRMXTF",21,0)
 I NEWTEMP=$P(PXRMTMP,U,2),NEWTEMP'=OLDTEMP D MESS(3,OLDTEMP,NEWTEMP)
"RTN","PXRMXTF",22,0)
 ;
"RTN","PXRMXTF",23,0)
 ;If a new template ID is selected then create a new template
"RTN","PXRMXTF",24,0)
 I NEWTEMP'=$P(PXRMTMP,U,2) D  I $D(MSG) S DTOUT=1 Q
"RTN","PXRMXTF",25,0)
 .;Create template header
"RTN","PXRMXTF",26,0)
 .D HEADER
"RTN","PXRMXTF",27,0)
 .;Save edited template detail to new template name
"RTN","PXRMXTF",28,0)
 .D REFILE Q:$D(MSG)
"RTN","PXRMXTF",29,0)
 .;Save Message
"RTN","PXRMXTF",30,0)
 .D MESS(2,NEWTEMP)
"RTN","PXRMXTF",31,0)
 .;File original arrays to old template (rollback ^DIE changes)
"RTN","PXRMXTF",32,0)
 .D FILE^PXRMXTU(PXRMTMP,1,1)
"RTN","PXRMXTF",33,0)
 .;Set selected template ID
"RTN","PXRMXTF",34,0)
 .S PXRMTMP=NEWIEN
"RTN","PXRMXTF",35,0)
 ;
"RTN","PXRMXTF",36,0)
 ;Reload arrays
"RTN","PXRMXTF",37,0)
 D LOAD^PXRMXT I $D(MSG) S DTOUT=1 Q
"RTN","PXRMXTF",38,0)
EXIT Q
"RTN","PXRMXTF",39,0)
 ;
"RTN","PXRMXTF",40,0)
 ;Rename edited template
"RTN","PXRMXTF",41,0)
 ;----------------------
"RTN","PXRMXTF",42,0)
NAME N X,Y,TEXT,DIR
"RTN","PXRMXTF",43,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXTF",44,0)
 S DIR(0)="FAU"_U_"3:30"_U_"K:'$$OK^PXRMXTF(X) X"
"RTN","PXRMXTF",45,0)
 S DIR("A")="STORE REPORT LOGIC IN TEMPLATE NAME: "
"RTN","PXRMXTF",46,0)
 S DIR("B")=$P(PXRMTMP,U,2)
"RTN","PXRMXTF",47,0)
 S DIR("?")="Enter template name. For detailed help type ??"
"RTN","PXRMXTF",48,0)
 S DIR("??")=U_"D HELP^PXRMXTF(1)"
"RTN","PXRMXTF",49,0)
 W !
"RTN","PXRMXTF",50,0)
 D ^DIR K DIR
"RTN","PXRMXTF",51,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXTF",52,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXTF",53,0)
 S NEWTEMP=Y
"RTN","PXRMXTF",54,0)
 Q
"RTN","PXRMXTF",55,0)
 ;
"RTN","PXRMXTF",56,0)
 ;Check if the template name is in use
"RTN","PXRMXTF",57,0)
 ;------------------------------------
"RTN","PXRMXTF",58,0)
OK(NAME) ;
"RTN","PXRMXTF",59,0)
 ;Original template name may be used
"RTN","PXRMXTF",60,0)
 I X=DIR("B") Q 1
"RTN","PXRMXTF",61,0)
 I $E(DIR("B"),1,$L(X))=X Q 0
"RTN","PXRMXTF",62,0)
 ;Else check if template name defined
"RTN","PXRMXTF",63,0)
 I '$D(^PXRMPT(810.1,"B",NAME)) Q 1
"RTN","PXRMXTF",64,0)
 Q 0
"RTN","PXRMXTF",65,0)
 ;
"RTN","PXRMXTF",66,0)
 ;Create Template header and get IEN
"RTN","PXRMXTF",67,0)
 ;----------------------------------
"RTN","PXRMXTF",68,0)
HEADER N DATA,IEN,NUM
"RTN","PXRMXTF",69,0)
 ;Otherwise create a new entry
"RTN","PXRMXTF",70,0)
 S DATA=$G(^PXRMPT(810.1,0)),IEN=$P(DATA,U,3),NUM=$P(DATA,U,4)
"RTN","PXRMXTF",71,0)
 F  S IEN=IEN+1 Q:'$D(^PXRMPT(IEN,0))
"RTN","PXRMXTF",72,0)
 S ^PXRMPT(810.1,IEN,0)=NEWTEMP
"RTN","PXRMXTF",73,0)
 S ^PXRMPT(810.1,"B",NEWTEMP,IEN)=""
"RTN","PXRMXTF",74,0)
 S $P(^PXRMPT(810.1,0),U,3)=IEN,$P(^PXRMPT(810.1,0),U,4)=NUM+1
"RTN","PXRMXTF",75,0)
 S NEWIEN=IEN_U_NEWTEMP
"RTN","PXRMXTF",76,0)
 Q
"RTN","PXRMXTF",77,0)
 ;
"RTN","PXRMXTF",78,0)
 ;Redisplay edited template details
"RTN","PXRMXTF",79,0)
 ;---------------------------------------------
"RTN","PXRMXTF",80,0)
REDISP N PXRMLCSC,PXRMPRIM,PXRMREP,PXRMSEL,PXRMTYP,PXRMFD,RUN,PXRMCS
"RTN","PXRMXTF",81,0)
 N PXRMREM,PXRMFAC,PXRMPRV,PXRMPAT,PXRMOTM,PXRMSCAT,PXRMLCHL,PXRMCS
"RTN","PXRMXTF",82,0)
 N TITLE
"RTN","PXRMXTF",83,0)
 ;
"RTN","PXRMXTF",84,0)
 ;Load temporary arrays from edited template PXRMTMP
"RTN","PXRMXTF",85,0)
 D LOAD^PXRMXT I $D(MSG) Q
"RTN","PXRMXTF",86,0)
 ;Clear last run date
"RTN","PXRMXTF",87,0)
 S RUN=""
"RTN","PXRMXTF",88,0)
 ;Display
"RTN","PXRMXTF",89,0)
 D ^PXRMXTD
"RTN","PXRMXTF",90,0)
 ;
"RTN","PXRMXTF",91,0)
 Q
"RTN","PXRMXTF",92,0)
 ;
"RTN","PXRMXTF",93,0)
 ;Copy edited template details to new template
"RTN","PXRMXTF",94,0)
 ;---------------------------------------------
"RTN","PXRMXTF",95,0)
REFILE N PXRMLCSC,PXRMPRIM,PXRMREP,PXRMSEL,PXRMTYP,PXRMFD,RUN,PXRMCS
"RTN","PXRMXTF",96,0)
 N PXRMREM,PXRMFAC,PXRMPRV,PXRMPAT,PXRMOTM,PXRMSCAT,PXRMLCHL,PXRMCS
"RTN","PXRMXTF",97,0)
 N TITLE
"RTN","PXRMXTF",98,0)
 ;
"RTN","PXRMXTF",99,0)
 ;Load temporary arrays from edited template PXRMTMP
"RTN","PXRMXTF",100,0)
 D LOAD^PXRMXT I $D(MSG) Q
"RTN","PXRMXTF",101,0)
 ;Clear last run date
"RTN","PXRMXTF",102,0)
 S RUN=""
"RTN","PXRMXTF",103,0)
 ;Save arrays to new ID
"RTN","PXRMXTF",104,0)
 D FILE^PXRMXTU(NEWIEN,1,0) Q:$D(MSG)
"RTN","PXRMXTF",105,0)
 Q
"RTN","PXRMXTF",106,0)
 ;
"RTN","PXRMXTF",107,0)
 ;Rollback changes (also called from PXRMXTA)
"RTN","PXRMXTF",108,0)
 ;----------------
"RTN","PXRMXTF",109,0)
ROLL D FILE^PXRMXTU(PXRMTMP,1,1)
"RTN","PXRMXTF",110,0)
 I $D(MSG) S DTOUT=1 Q
"RTN","PXRMXTF",111,0)
 ;Changes not saved message
"RTN","PXRMXTF",112,0)
 D MESS(0,$P(PXRMTMP,U,2))
"RTN","PXRMXTF",113,0)
 Q
"RTN","PXRMXTF",114,0)
 ;
"RTN","PXRMXTF",115,0)
 ;Filing messages
"RTN","PXRMXTF",116,0)
 ;---------------
"RTN","PXRMXTF",117,0)
MESS(MODE,INP,INP1) ;
"RTN","PXRMXTF",118,0)
 I MODE=0 W !,"Changes to template '"_INP_"' have not been saved" Q
"RTN","PXRMXTF",119,0)
 I MODE=1 W !,"Changes to template '"_INP_"' have been saved"
"RTN","PXRMXTF",120,0)
 I MODE=2 W !,"A new template '"_INP_"' has been created"
"RTN","PXRMXTF",121,0)
 I MODE=3 W !,"Template '"_INP_"' renamed as '"_INP1_"'"
"RTN","PXRMXTF",122,0)
 I MODE=4 W !,"Template '"_INP_"' not saved"
"RTN","PXRMXTF",123,0)
 Q
"RTN","PXRMXTF",124,0)
 ;
"RTN","PXRMXTF",125,0)
 ;General help text routine. Write out the text in the HTEXT array
"RTN","PXRMXTF",126,0)
 ;----------------------------------------------------------------
"RTN","PXRMXTF",127,0)
HELP(CALL) ;
"RTN","PXRMXTF",128,0)
 N HTEXT
"RTN","PXRMXTF",129,0)
 N DIWF,DIWL,DIWR,IC
"RTN","PXRMXTF",130,0)
 S DIWF="C70",DIWL=0,DIWR=70
"RTN","PXRMXTF",131,0)
 ;
"RTN","PXRMXTF",132,0)
 I CALL=1 D
"RTN","PXRMXTF",133,0)
 .S HTEXT(1)="To save or rename the existing template use the default"
"RTN","PXRMXTF",134,0)
 .S HTEXT(2)="name. To create a new template and leave the original "
"RTN","PXRMXTF",135,0)
 .S HTEXT(3)="unchanged enter a different template name "
"RTN","PXRMXTF",136,0)
 .S HTEXT(4)="that is not in use."
"RTN","PXRMXTF",137,0)
 ;
"RTN","PXRMXTF",138,0)
 K ^UTILITY($J,"W")
"RTN","PXRMXTF",139,0)
 S IC=""
"RTN","PXRMXTF",140,0)
 F  S IC=$O(HTEXT(IC)) Q:IC=""  D
"RTN","PXRMXTF",141,0)
 . S X=HTEXT(IC)
"RTN","PXRMXTF",142,0)
 . D ^DIWP
"RTN","PXRMXTF",143,0)
 W !
"RTN","PXRMXTF",144,0)
 S IC=0
"RTN","PXRMXTF",145,0)
 F  S IC=$O(^UTILITY($J,"W",0,IC)) Q:IC=""  D
"RTN","PXRMXTF",146,0)
 . W !,^UTILITY($J,"W",0,IC,0)
"RTN","PXRMXTF",147,0)
 K ^UTILITY($J,"W")
"RTN","PXRMXTF",148,0)
 W !
"RTN","PXRMXTF",149,0)
 Q
"RTN","PXRMXTU")
0^21^B27248824
"RTN","PXRMXTU",1,0)
PXRMXTU ; SLC/PJH - Reminder Reports Template Update ;04/20/2001
"RTN","PXRMXTU",2,0)
 ;;1.5;CLINICAL REMINDERS;**6**;Jun 19, 2000
"RTN","PXRMXTU",3,0)
 ; 
"RTN","PXRMXTU",4,0)
 ; Called from PXRMYD,PXRMXD (also at UPD from PXRMXPR/PXRMYPR)
"RTN","PXRMXTU",5,0)
 ;
"RTN","PXRMXTU",6,0)
 ;Option to create a new template
"RTN","PXRMXTU",7,0)
 ;-------------------------------
"RTN","PXRMXTU",8,0)
START N PXRMASK,MSG D ASK(.PXRMASK)
"RTN","PXRMXTU",9,0)
 I $G(PXRMASK)="Y" D SAVE
"RTN","PXRMXTU",10,0)
EXIT Q
"RTN","PXRMXTU",11,0)
 ;
"RTN","PXRMXTU",12,0)
 ;Ask name for new template
"RTN","PXRMXTU",13,0)
 ;-------------------------
"RTN","PXRMXTU",14,0)
SAVE N X,Y,DIC,DLAYGO
"RTN","PXRMXTU",15,0)
SAV1 S DIC=810.1,DLAYGO=DIC,DIC(0)="QAELX"
"RTN","PXRMXTU",16,0)
 S DIC("A")="STORE REPORT LOGIC IN TEMPLATE NAME: "
"RTN","PXRMXTU",17,0)
 W !
"RTN","PXRMXTU",18,0)
 D ^DIC
"RTN","PXRMXTU",19,0)
 I X="" W !,"A template name must be entered" G SAV1
"RTN","PXRMXTU",20,0)
 I X=(U_U) S DTOUT=1
"RTN","PXRMXTU",21,0)
 I Y=-1 S DUOUT=1 W !,"Details not saved" Q
"RTN","PXRMXTU",22,0)
 I $D(DTOUT)!$D(DUOUT) Q
"RTN","PXRMXTU",23,0)
 ;Check
"RTN","PXRMXTU",24,0)
 I ($P(Y,U,3)'=1) W !,"This template name already exists" G SAV1
"RTN","PXRMXTU",25,0)
 ;Get template name and title
"RTN","PXRMXTU",26,0)
 S PXRMTMP=Y,TITLE=$P($G(^PXRMPT(810.1,$P(Y,U),0)),U,2)
"RTN","PXRMXTU",27,0)
 S $P(PXRMTMP,U,3)=TITLE
"RTN","PXRMXTU",28,0)
 ;File details
"RTN","PXRMXTU",29,0)
 D FILE(Y,1,0)
"RTN","PXRMXTU",30,0)
 ;File not saved message
"RTN","PXRMXTU",31,0)
 I $D(MSG) D  Q
"RTN","PXRMXTU",32,0)
 .N DA,DIK
"RTN","PXRMXTU",33,0)
 .S DA=$P(Y,U),DIK="^PXRMPT(810.1," D ^DIK
"RTN","PXRMXTU",34,0)
 .D MESS^PXRMXTF(4,$P(PXRMTMP,U,2))
"RTN","PXRMXTU",35,0)
 ;File saved message
"RTN","PXRMXTU",36,0)
 D MESS^PXRMXTF(1,$P(PXRMTMP,U,2))
"RTN","PXRMXTU",37,0)
 Q
"RTN","PXRMXTU",38,0)
 ;
"RTN","PXRMXTU",39,0)
 ;File template detail
"RTN","PXRMXTU",40,0)
 ;--------------------
"RTN","PXRMXTU",41,0)
FILE(INP,UPD,CLR) ;
"RTN","PXRMXTU",42,0)
 N CNT,FDA,FDAIEN,FNO,IC,INT,MODE,NAME,X
"RTN","PXRMXTU",43,0)
 S FDAIEN(1)=$P(INP,U),NAME=$P(INP,U,2)
"RTN","PXRMXTU",44,0)
 ;Save exit flags - needed for rollback
"RTN","PXRMXTU",45,0)
 N DUOUT,DTOUT
"RTN","PXRMXTU",46,0)
 ;
"RTN","PXRMXTU",47,0)
 ;Update or Add
"RTN","PXRMXTU",48,0)
 S MODE=$S(UPD:(FDAIEN(1)_","),1:"+1,")
"RTN","PXRMXTU",49,0)
 ;Delete entries from existing template
"RTN","PXRMXTU",50,0)
 I CLR D
"RTN","PXRMXTU",51,0)
 .N DA S DA=0
"RTN","PXRMXTU",52,0)
 .F  S DA=$O(^PXRMPT(810.1,FDAIEN(1),DA)) Q:'DA  D
"RTN","PXRMXTU",53,0)
 ..K ^PXRMPT(810.1,FDAIEN(1),DA)
"RTN","PXRMXTU",54,0)
 ;
"RTN","PXRMXTU",55,0)
 I PXRMSEL="L" S X=PXRMLCSC,PXRMLCSC=$P(PXRMLCSC,U)
"RTN","PXRMXTU",56,0)
 ;
"RTN","PXRMXTU",57,0)
 ;Save single fields into FDA
"RTN","PXRMXTU",58,0)
 F IC="NAME","PXRMLCSC","PXRMPRIM","PXRMREP","PXRMSEL","PXRMTYP" D
"RTN","PXRMXTU",59,0)
 .S FDA(810.1,MODE,$$FLDNUM^DILFD(810.1,IC))=$G(@IC)
"RTN","PXRMXTU",60,0)
 F IC="PXRMFD","RUN","TITLE" D
"RTN","PXRMXTU",61,0)
 .S FDA(810.1,MODE,$$FLDNUM^DILFD(810.1,IC))=$G(@IC)
"RTN","PXRMXTU",62,0)
 ;
"RTN","PXRMXTU",63,0)
 I PXRMSEL="L" S PXRMLCSC=X
"RTN","PXRMXTU",64,0)
 ;
"RTN","PXRMXTU",65,0)
 ;Save Arrays into FDA
"RTN","PXRMXTU",66,0)
 ;
"RTN","PXRMXTU",67,0)
 ;Reminder Items
"RTN","PXRMXTU",68,0)
 S CNT=1
"RTN","PXRMXTU",69,0)
 D SUB1(.PXRMREM,"810.12",1)
"RTN","PXRMXTU",70,0)
 ;Save Facility codes
"RTN","PXRMXTU",71,0)
 D SUB1(.PXRMFAC,"810.13",1)
"RTN","PXRMXTU",72,0)
 ;Save Provider codes
"RTN","PXRMXTU",73,0)
 D SUB1(.PXRMPRV,"810.14",1)
"RTN","PXRMXTU",74,0)
 ;Save Patient codes
"RTN","PXRMXTU",75,0)
 D SUB1(.PXRMPAT,"810.16",1)
"RTN","PXRMXTU",76,0)
 ;Save OE/RR Team codes
"RTN","PXRMXTU",77,0)
 D SUB1(.PXRMOTM,"810.17",1)
"RTN","PXRMXTU",78,0)
 ;Save PCMM Team codes
"RTN","PXRMXTU",79,0)
 D SUB1(.PXRMPCM,"810.18",1)
"RTN","PXRMXTU",80,0)
 ;Save Service Category codes
"RTN","PXRMXTU",81,0)
 I $G(PXRMSCAT)'="" D SUB2("PXRMSCAT","810.19")
"RTN","PXRMXTU",82,0)
 ;Save Hospital Location codes
"RTN","PXRMXTU",83,0)
 D SUB1(.PXRMLCHL,"810.11",2)
"RTN","PXRMXTU",84,0)
 ;Save Clinic Stop codes
"RTN","PXRMXTU",85,0)
 D SUB1(.PXRMCS,"810.111",2)
"RTN","PXRMXTU",86,0)
 ;Save Clinic groups
"RTN","PXRMXTU",87,0)
 D SUB1(.PXRMCGRP,"810.112",1)
"RTN","PXRMXTU",88,0)
 ;Save Reminder Categories
"RTN","PXRMXTU",89,0)
 D SUB1(.PXRMRCAT,"810.113",1)
"RTN","PXRMXTU",90,0)
 ;
"RTN","PXRMXTU",91,0)
 ;Update template file
"RTN","PXRMXTU",92,0)
 D UPDATE^DIE("S","FDA","FDAIEN","MSG")
"RTN","PXRMXTU",93,0)
 ;
"RTN","PXRMXTU",94,0)
 I $D(MSG) D
"RTN","PXRMXTU",95,0)
 .W !!,"Update failed, UPDATE^DIE returned the following error message:"
"RTN","PXRMXTU",96,0)
 .S IC="MSG"
"RTN","PXRMXTU",97,0)
 .F  S IC=$Q(@IC) Q:IC=""  W !,IC,"=",@IC
"RTN","PXRMXTU",98,0)
 .W !,"Examine the above error message for the reason.",!
"RTN","PXRMXTU",99,0)
 .H 2
"RTN","PXRMXTU",100,0)
 Q
"RTN","PXRMXTU",101,0)
 ;
"RTN","PXRMXTU",102,0)
 ;Save arrays into FDA
"RTN","PXRMXTU",103,0)
 ;--------------------
"RTN","PXRMXTU",104,0)
SUB1(OUTPUT,VAR,PIECE) ;
"RTN","PXRMXTU",105,0)
 S IC=""
"RTN","PXRMXTU",106,0)
 F  S IC=$O(OUTPUT(IC)) Q:IC=""  D
"RTN","PXRMXTU",107,0)
 .S INT=$P(OUTPUT(IC),U,PIECE),CNT=CNT+1
"RTN","PXRMXTU",108,0)
 .S FDA(VAR,"+"_CNT_","_MODE,.01)=INT
"RTN","PXRMXTU",109,0)
 .;Save Display order for reminders and categories
"RTN","PXRMXTU",110,0)
 .I (VAR=810.12)!(VAR=810.113) S FDA(VAR,"+"_CNT_","_MODE,.02)=IC
"RTN","PXRMXTU",111,0)
 Q
"RTN","PXRMXTU",112,0)
 ;
"RTN","PXRMXTU",113,0)
 ;Save Service Categories into FDA
"RTN","PXRMXTU",114,0)
 ;--------------------------------
"RTN","PXRMXTU",115,0)
SUB2(FLD,VAR) ;
"RTN","PXRMXTU",116,0)
 F IC=1:1 S INT=$E(@FLD,IC) Q:INT=""  D
"RTN","PXRMXTU",117,0)
 .S CNT=CNT+1,FDA(VAR,"+"_CNT_","_MODE,.01)=INT
"RTN","PXRMXTU",118,0)
 Q
"RTN","PXRMXTU",119,0)
 ;
"RTN","PXRMXTU",120,0)
 ;
"RTN","PXRMXTU",121,0)
 ;Option to save a new template
"RTN","PXRMXTU",122,0)
 ;-----------------------------
"RTN","PXRMXTU",123,0)
ASK(YESNO) ;
"RTN","PXRMXTU",124,0)
 N X,Y,TEXT
"RTN","PXRMXTU",125,0)
 K DIROUT,DIRUT,DTOUT,DUOUT
"RTN","PXRMXTU",126,0)
 S DIR(0)="YA0"
"RTN","PXRMXTU",127,0)
 S DIR("A")="Create a new report template: "
"RTN","PXRMXTU",128,0)
 S DIR("B")="N"
"RTN","PXRMXTU",129,0)
 S DIR("?")="Enter Y or N. For detailed help type ??"
"RTN","PXRMXTU",130,0)
 S DIR("??")=U_"D HELP^PXRMXTU(1)"
"RTN","PXRMXTU",131,0)
 W !
"RTN","PXRMXTU",132,0)
 D ^DIR K DIR
"RTN","PXRMXTU",133,0)
 I $D(DIROUT) S DTOUT=1
"RTN","PXRMXTU",134,0)
 I $D(DTOUT)!($D(DUOUT)) Q
"RTN","PXRMXTU",135,0)
 S YESNO=$E(Y(0))
"RTN","PXRMXTU",136,0)
 Q
"RTN","PXRMXTU",137,0)
 ;
"RTN","PXRMXTU",138,0)
 ;General help text routine. Write out the text in the HTEXT array
"RTN","PXRMXTU",139,0)
 ;----------------------------------------------------------------
"RTN","PXRMXTU",140,0)
HELP(CALL) ;
"RTN","PXRMXTU",141,0)
 N HTEXT
"RTN","PXRMXTU",142,0)
 N DIWF,DIWL,DIWR,IC
"RTN","PXRMXTU",143,0)
 S DIWF="C70",DIWL=0,DIWR=70
"RTN","PXRMXTU",144,0)
 ;
"RTN","PXRMXTU",145,0)
 I CALL=1 D
"RTN","PXRMXTU",146,0)
 .S HTEXT(1)="Enter 'Y' to save the reporting parameters as a report"
"RTN","PXRMXTU",147,0)
 .S HTEXT(2)="template from which the report may be re-run in future."
"RTN","PXRMXTU",148,0)
 ;
"RTN","PXRMXTU",149,0)
 K ^UTILITY($J,"W")
"RTN","PXRMXTU",150,0)
 S IC=""
"RTN","PXRMXTU",151,0)
 F  S IC=$O(HTEXT(IC)) Q:IC=""  D
"RTN","PXRMXTU",152,0)
 . S X=HTEXT(IC)
"RTN","PXRMXTU",153,0)
 . D ^DIWP
"RTN","PXRMXTU",154,0)
 W !
"RTN","PXRMXTU",155,0)
 S IC=0
"RTN","PXRMXTU",156,0)
 F  S IC=$O(^UTILITY($J,"W",0,IC)) Q:IC=""  D
"RTN","PXRMXTU",157,0)
 . W !,^UTILITY($J,"W",0,IC,0)
"RTN","PXRMXTU",158,0)
 K ^UTILITY($J,"W")
"RTN","PXRMXTU",159,0)
 W !
"RTN","PXRMXTU",160,0)
 Q
"RTN","PXRMXTU",161,0)
 ;
"RTN","PXRMXTU",162,0)
 ;Save template info to new name
"RTN","PXRMXTU",163,0)
 ;------------------------------
"RTN","PXRMXTU",164,0)
COPY N PXRMLCSC,PXRMPRIM,PRRMREP,PXRMSEL,PXRMTYP,PXRMFD,RUN,PXRMCS
"RTN","PXRMXTU",165,0)
 N PXRMREM,PXRMFAC,PXRMPRV,PXRMPAT,PXRMOTM,PXRMSCAT,PXRMLCHL,PXRMCS
"RTN","PXRMXTU",166,0)
 ;Load arrays from original template PXRMTMP
"RTN","PXRMXTU",167,0)
 D LOAD^PXRMXT I $D(MSG) Q
"RTN","PXRMXTU",168,0)
 ;Clear last run date
"RTN","PXRMXTU",169,0)
 S RUN=""
"RTN","PXRMXTU",170,0)
 ;Save arrays to new ID
"RTN","PXRMXTU",171,0)
 D FILE(NEWTEMP,0)
"RTN","PXRMXTU",172,0)
 Q
"RTN","PXRMXTU",173,0)
 ;
"RTN","PXRMXTU",174,0)
 ;Update print template last run date (called from PXRMYPR/PXRMXPR)
"RTN","PXRMXTU",175,0)
 ;-----------------------------------------------------------------
"RTN","PXRMXTU",176,0)
UPD S ^PXRMPT(810.1,$P(PXRMTMP,U),7)=PXRMXST
"RTN","PXRMXTU",177,0)
 Q
"RTN","PXRMXTU",178,0)
 ;
"RTN","PXRMXTU",179,0)
 ;Called as an input transform for 810.1/NAME
"RTN","PXRMXTU",180,0)
 ;-------------------------------------------
"RTN","PXRMXTU",181,0)
NAME Q:'$D(X)  Q:X=""  Q:$G(PXRMTYP)=""
"RTN","PXRMXTU",182,0)
 ;Disallow duplicate template names
"RTN","PXRMXTU",183,0)
 Q:'$D(^PXRMPT(810.1,"B",X))
"RTN","PXRMXTU",184,0)
 W !,"This template name already exists" K X
"RTN","PXRMXTU",185,0)
 Q
"RTN","PXRMXTU",186,0)
 ;
"RTN","PXRMXTU",187,0)
 ;Called as an input transform for 810.1/PXRMFD
"RTN","PXRMXTU",188,0)
 ;---------------------------------------------
"RTN","PXRMXTU",189,0)
INP Q:'$D(X)  Q:X=""
"RTN","PXRMXTU",190,0)
 ;If inpatient wards prompt only for Admissions/Current Patients
"RTN","PXRMXTU",191,0)
 I $G(PXRMINP),"FP"[X D
"RTN","PXRMXTU",192,0)
 .W !,"Select either Inpatient Admissions or Current Inpatients" K X
"RTN","PXRMXTU",193,0)
 ;If other locations prompt only for Prior visits/Future Appts
"RTN","PXRMXTU",194,0)
 I '$G(PXRMINP),"AC"[X D
"RTN","PXRMXTU",195,0)
 .W !,"Select either Future Appointments or Prior Visits" K X
"RTN","PXRMXTU",196,0)
 Q
"SEC","^DIC",810.1,810.1,0,"AUDIT")
@
"SEC","^DIC",810.1,810.1,0,"DD")
@
"SEC","^DIC",810.1,810.1,0,"DEL")
@
"SEC","^DIC",810.1,810.1,0,"LAYGO")
@
"SEC","^DIC",810.1,810.1,0,"RD")

"SEC","^DIC",810.1,810.1,0,"WR")
@
"VER")
8.0^22.0
"^DD",800,800,0)
FIELD^^14^15
"^DD",800,800,0,"DDA")
N
"^DD",800,800,0,"DT")
3011218
"^DD",800,800,0,"IX","B",800,.01)

"^DD",800,800,0,"NM","CLINICAL REMINDER PARAMETERS")

"^DD",800,800,0,"VRPK")
PXRM
"^DD",800,800,.01,0)
ONE^RNJ1,0^^0;1^K:+X'=X!(X>1)!(X<1)!(X?.E1"."1N.N) X
"^DD",800,800,.01,1,0)
^.1
"^DD",800,800,.01,1,1,0)
800^B
"^DD",800,800,.01,1,1,1)
S ^PXRM(800,"B",$E(X,1,30),DA)=""
"^DD",800,800,.01,1,1,2)
K ^PXRM(800,"B",$E(X,1,30),DA)
"^DD",800,800,.01,3)
Type a Number between 1 and 1, 0 Decimal Digits
"^DD",800,800,.01,21,0)
^.001^2^2^3000508^^^^
"^DD",800,800,.01,21,1,0)
This file contains parameters used by the Clinical Reminders. There is
"^DD",800,800,.01,21,2,0)
only one entry.
"^DD",800,800,.01,23,0)
^.001^1^1^3000508^^^^
"^DD",800,800,.01,23,1,0)
There is one entry in this file.
"^DD",800,800,.01,"DT")
2990209
"^DD",800,800,1,0)
DEFAULT REMINDER DISCLAIMER^800.01^^DISC1;0
"^DD",800,800,1,21,0)
^.001^2^2^3010904^^^^
"^DD",800,800,1,21,1,0)
This is the default reminder disclaimer that is distributed with the
"^DD",800,800,1,21,2,0)
package.
"^DD",800,800,2,0)
SITE REMINDER DISCLAIMER^800.02^^DISC2;0
"^DD",800,800,2,21,0)
^^3^3^3000508^
"^DD",800,800,2,21,1,0)
This is the site defined reminder disclaimer. If there is an entry in
"^DD",800,800,2,21,2,0)
this field then the site defined disclaimer will override the default
"^DD",800,800,2,21,3,0)
disclaimer.
"^DD",800,800,3,0)
MAIL GROUP FOR ERRORS^P3.8^XMB(3.8,^MGFE;1^Q
"^DD",800,800,3,3)
Enter the name of the MailMan group that will receive reminder evaluation error messages.
"^DD",800,800,3,21,0)
^.001^4^4^3000508^^^^
"^DD",800,800,3,21,1,0)
When there is an error during reminder evaluation members of this
"^DD",800,800,3,21,2,0)
MailMan mail group will be sent a message notifying them of the error.
"^DD",800,800,3,21,3,0)
If there is no entry in this field then the error message will go to
"^DD",800,800,3,21,4,0)
the user.
"^DD",800,800,3,"DT")
2990209
"^DD",800,800,4,0)
WEB SITES^800.04^^1;0
"^DD",800,800,4,21,0)
^.001^1^1^3000508^^^^
"^DD",800,800,4,21,1,0)
This is a list of web sites for general reminder information.
"^DD",800,800,4,"DT")
2991129
"^DD",800,800,5,0)
VERSION^F^^VERSION;1^K:$L(X)>20!($L(X)<3) X
"^DD",800,800,5,3)
Answer must be 3-20 characters in length.
"^DD",800,800,5,21,0)
^^1^1^3000706^
"^DD",800,800,5,21,1,0)
This is the current version of the Clinical Reminders package.
"^DD",800,800,5,"DT")
3000706
"^DD",800,800,6,0)
FULL SSN^S^Y:YES;N:NO;^FULL SSN;1^Q
"^DD",800,800,6,21,0)
^^5^5^3011031^
"^DD",800,800,6,21,1,0)
This field is the default for the Reminders Due report but may be modified
"^DD",800,800,6,21,2,0)
at run time. If the FULL SSN field equals Y then the full SSN is printed.
"^DD",800,800,6,21,3,0)
Otherwise only the first four digits of the SSN are printed.
"^DD",800,800,6,21,4,0)
 
"^DD",800,800,6,21,5,0)
The standard setting for this field is Y. 
"^DD",800,800,6,"DT")
3010802
"^DD",800,800,7,0)
INITIAL MST SYNCH COMP DATE^D^^MST;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",800,800,7,21,0)
^.001^1^1^3010904^^
"^DD",800,800,7,21,1,0)
This is the date and time the initial MST synchronization was completed.
"^DD",800,800,7,"DT")
3010904
"^DD",800,800,8,0)
INITIAL MST SYNCH UPDATE COUNT^NJ7,0^^MST;2^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",800,800,8,3)
Type a Number between 0 and 9999999, 0 Decimal Digits
"^DD",800,800,8,21,0)
^^2^2^3010828^
"^DD",800,800,8,21,1,0)
This is the number of updates that were made during the initial
"^DD",800,800,8,21,2,0)
synchronization.
"^DD",800,800,8,"DT")
3010904
"^DD",800,800,9,0)
DAILY MST SYNC COMP DATE^D^^MST;3^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",800,800,9,21,0)
^^1^1^3010828^
"^DD",800,800,9,21,1,0)
This is the date and time the last daily MST synchronization was completed.
"^DD",800,800,9,"DT")
3010904
"^DD",800,800,10,0)
DAILY MST SYNCH UPDATE COUNT^NJ7,0^^MST;4^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",800,800,10,3)
Type a Number between 0 and 9999999, 0 Decimal Digits
"^DD",800,800,10,21,0)
^.001^1^1^3010904^^
"^DD",800,800,10,21,1,0)
This is the number of updates made during the last daily MST synchronization.
"^DD",800,800,10,"DT")
3010904
"^DD",800,800,11,0)
INITIAL MST SYNCH START DATE^D^^MST;5^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",800,800,11,21,0)
^.001^2^2^3011031^^
"^DD",800,800,11,21,1,0)
This is the date and time the initial Clinical Reminders MST
"^DD",800,800,11,21,2,0)
synchronization was set to run.
"^DD",800,800,11,"DT")
3010904
"^DD",800,800,12,0)
DAILY MST SYNCH START DATE^D^^MST;6^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",800,800,12,21,0)
^^2^2^3010904^
"^DD",800,800,12,21,1,0)
This is the date and time the last daily Clinical Reminders MST
"^DD",800,800,12,21,2,0)
synchronization was set to start.
"^DD",800,800,12,"DT")
3010904
"^DD",800,800,13,0)
TRUNCATE EMPLOYEE SSN^S^Y:YES;N:NO;^TRUNCATE EMPLOYEE SSN;1^Q
"^DD",800,800,13,3)
Enter 'N' only if full employee SSN is required on reports.
"^DD",800,800,13,21,0)
^^10^10^3011205^
"^DD",800,800,13,21,1,0)
The detailed reminders due report has the option to print the full SSN for
"^DD",800,800,13,21,2,0)
the patients selected (see FULL SSN field). However, if a patient is an
"^DD",800,800,13,21,3,0)
employee (fields 361 and 391 in PATIENT file) the SSN will be truncated.
"^DD",800,800,13,21,4,0)
 
"^DD",800,800,13,21,5,0)
If a site, for their own reasons, requires the full SSN for employees to
"^DD",800,800,13,21,6,0)
be printed on their reports then this may be done by setting the TRUNCATE
"^DD",800,800,13,21,7,0)
EMPLOYEE SSN field to 'No'.
"^DD",800,800,13,21,8,0)
 
"^DD",800,800,13,21,9,0)
The default value installed for this field is 'Yes'. This ensures that 
"^DD",800,800,13,21,10,0)
full employee SSN's are not printed on the report. 
"^DD",800,800,13,"DT")
3011205
"^DD",800,800,14,0)
EDIT HISTORY COUNT^NJ3,0^^EDIT HISTORY COUNT;1^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X
"^DD",800,800,14,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",800,800,14,21,0)
^^2^2^3020115^
"^DD",800,800,14,21,1,0)
This field is used by reminder inquiry to determine how many occurrences 
"^DD",800,800,14,21,2,0)
of the edit history to display. The default is the last two occurrences.
"^DD",800,800,14,"DT")
3011218
"^DD",800,800.01,0)
DEFAULT REMINDER DISCLAIMER SUB-FIELD^^.01^1
"^DD",800,800.01,0,"DT")
2990209
"^DD",800,800.01,0,"NM","DEFAULT REMINDER DISCLAIMER")

"^DD",800,800.01,0,"UP")
800
"^DD",800,800.01,.01,0)
DEFAULT REMINDER DISCLAIMER^W^^0;1^Q
"^DD",800,800.01,.01,3)
Do not edit the default disclaimer.
"^DD",800,800.01,.01,"DT")
2990209
"^DD",800,800.02,0)
SITE REMINDER DISCLAIMER SUB-FIELD^^.01^1
"^DD",800,800.02,0,"DT")
2990209
"^DD",800,800.02,0,"NM","SITE REMINDER DISCLAIMER")

"^DD",800,800.02,0,"UP")
800
"^DD",800,800.02,.01,0)
SITE REMINDER DISCLAIMER^W^^0;1^Q
"^DD",800,800.02,.01,3)
Enter the site defined reminder disclaimer.
"^DD",800,800.02,.01,21,0)
^.001^1^1^3000508^^
"^DD",800,800.02,.01,21,1,0)
This is the site defined reminder disclaimer.
"^DD",800,800.02,.01,"DT")
2990209
"^DD",800,800.04,0)
WEB SITES SUB-FIELD^^1^3
"^DD",800,800.04,0,"DT")
2991130
"^DD",800,800.04,0,"IX","B",800.04,.01)

"^DD",800,800.04,0,"NM","WEB SITES")

"^DD",800,800.04,0,"UP")
800
"^DD",800,800.04,.01,0)
URL^MF^^0;1^K:$L(X)>128!($L(X)<1) X
"^DD",800,800.04,.01,1,0)
^.1
"^DD",800,800.04,.01,1,1,0)
800.04^B
"^DD",800,800.04,.01,1,1,1)
S ^PXRM(800,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",800,800.04,.01,1,1,2)
K ^PXRM(800,DA(1),1,"B",$E(X,1,30),DA)
"^DD",800,800.04,.01,3)
Enter the URL for the web site.
"^DD",800,800.04,.01,21,0)
^.001^1^1^3000508^^^^
"^DD",800,800.04,.01,21,1,0)
This is the URL for the web site.
"^DD",800,800.04,.01,"DT")
2991129
"^DD",800,800.04,.02,0)
WEB SITE TITLE^F^^0;2^K:$L(X)>60!($L(X)<1) X
"^DD",800,800.04,.02,3)
Enter the web site title, up to 60 characters.
"^DD",800,800.04,.02,21,0)
^.001^1^1^3000508^^
"^DD",800,800.04,.02,21,1,0)
This is the web site title.
"^DD",800,800.04,.02,"DT")
2991130
"^DD",800,800.04,1,0)
WEB SITE DESCRIPTION^800.41^^1;0
"^DD",800,800.04,1,21,0)
^^1^1^3000508^
"^DD",800,800.04,1,21,1,0)
This is a description of the web site.
"^DD",800,800.41,0)
WEB SITE DESCRIPTION SUB-FIELD^^.01^1
"^DD",800,800.41,0,"DT")
2991130
"^DD",800,800.41,0,"NM","WEB SITE DESCRIPTION")

"^DD",800,800.41,0,"UP")
800.04
"^DD",800,800.41,.01,0)
WEB SITE DESCRIPTION^W^^0;1^Q
"^DD",800,800.41,.01,3)
Enter the web site description.
"^DD",800,800.41,.01,21,0)
^.001^2^2^3000508^^
"^DD",800,800.41,.01,21,1,0)
This is the web site description. It is used to give more information
"^DD",800,800.41,.01,21,2,0)
about why this web site is relevant for clinical reminders.
"^DD",800,800.41,.01,"DT")
2991130
"^DD",810.1,810.1,0)
FIELD^^13^20
"^DD",810.1,810.1,0,"DDA")
N
"^DD",810.1,810.1,0,"DT")
3010727
"^DD",810.1,810.1,0,"ID",1.9)
W "   ",$P(^(0),U,2)
"^DD",810.1,810.1,0,"IX","B",810.1,.01)

"^DD",810.1,810.1,0,"NM","REMINDER REPORT TEMPLATE")

"^DD",810.1,810.1,0,"VRPK")
PXRM
"^DD",810.1,810.1,.01,0)
NAME^RFX^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X D NAME^PXRMXTU
"^DD",810.1,810.1,.01,.1)
TEMPLATE NAME
"^DD",810.1,810.1,.01,1,0)
^.1
"^DD",810.1,810.1,.01,1,1,0)
810.1^B
"^DD",810.1,810.1,.01,1,1,1)
S ^PXRMPT(810.1,"B",$E(X,1,30),DA)=""
"^DD",810.1,810.1,.01,1,1,2)
K ^PXRMPT(810.1,"B",$E(X,1,30),DA)
"^DD",810.1,810.1,.01,3)
Answer must be 3-30 characters in length.
"^DD",810.1,810.1,.01,21,0)
^.001^8^8^3000505^^^^
"^DD",810.1,810.1,.01,21,1,0)
The template name is displayed on the report criteria page of the
"^DD",810.1,810.1,.01,21,2,0)
reminder report and is used when selecting templates.
"^DD",810.1,810.1,.01,21,3,0)

"^DD",810.1,810.1,.01,21,4,0)
When editing an existing template, this field should ONLY be amended if you
"^DD",810.1,810.1,.01,21,5,0)
wish to RENAME the template. To make a COPY of a template under a new name
"^DD",810.1,810.1,.01,21,6,0)
(leaving the original intact), leave this field unchanged and enter a
"^DD",810.1,810.1,.01,21,7,0)
new name at the prompt 'STORE REPORT LOGIC IN TEMPLATE NAME:'. To DELETE a
"^DD",810.1,810.1,.01,21,8,0)
template, enter @ at template name.
"^DD",810.1,810.1,.01,23,0)
^.001^1^1^3000505^^^^
"^DD",810.1,810.1,.01,23,1,0)
Used as an identifier to select templates.
"^DD",810.1,810.1,.01,"DT")
2990420
"^DD",810.1,810.1,1.1,0)
PXRMTYP^RSI^Y:Reminders Satisfied PXRMY;X:Reminders Due PXRMX;^0;3^Q
"^DD",810.1,810.1,1.1,.1)
Reminder Report Type
"^DD",810.1,810.1,1.1,21,0)
^^3^3^2990609^
"^DD",810.1,810.1,1.1,21,1,0)
Templates are specific to the type of reminder report being run and are
"^DD",810.1,810.1,1.1,21,2,0)
not interchangeable since the parameter set required for different reports
"^DD",810.1,810.1,1.1,21,3,0)
varies. 
"^DD",810.1,810.1,1.1,23,0)
^^6^6^2990609^^
"^DD",810.1,810.1,1.1,23,1,0)
Report types are :
"^DD",810.1,810.1,1.1,23,2,0)
 
"^DD",810.1,810.1,1.1,23,3,0)
       X - used by PXRMX* routines for Reminders Due
"^DD",810.1,810.1,1.1,23,4,0)
       Y - used by PXRMY* routines for Reminders Satisfied
"^DD",810.1,810.1,1.1,23,5,0)
 
"^DD",810.1,810.1,1.1,23,6,0)
This field is maintained by the report program and may not be edited.
"^DD",810.1,810.1,1.1,"DT")
2990319
"^DD",810.1,810.1,1.2,0)
PXRMSEL^RS^L:Location;O:OE/RR team;P:Provider;T:PCMM team;I:Individual Patient;^0;4^Q
"^DD",810.1,810.1,1.2,.1)
PATIENT SAMPLE
"^DD",810.1,810.1,1.2,21,0)
^.001^14^14^3000505^^^
"^DD",810.1,810.1,1.2,21,1,0)
The patient sample defines the patient cohort. Listed below are the
"^DD",810.1,810.1,1.2,21,2,0)
parameters relevant to each sample type.
"^DD",810.1,810.1,1.2,21,3,0)
 
"^DD",810.1,810.1,1.2,21,4,0)
(I)ndividual Patients - A list of patients may be entered.
"^DD",810.1,810.1,1.2,21,5,0)
(L)ocations - Hospital Locations, Clinic Stops or Clinic Groups may be
"^DD",810.1,810.1,1.2,21,6,0)
              entered. Patients with encounters or appointments at these
"^DD",810.1,810.1,1.2,21,7,0)
              locations are selected for reporting.
"^DD",810.1,810.1,1.2,21,8,0)
(P)roviders - PCMM providers may be entered. Patients for these providers
"^DD",810.1,810.1,1.2,21,9,0)
              are selected for reporting. Either Primary/Care or All
"^DD",810.1,810.1,1.2,21,10,0)
              patients for the providers may be reported.
"^DD",810.1,810.1,1.2,21,11,0)
(T)eams     - PCMM teams may be entered. Patients allocated to these teams
"^DD",810.1,810.1,1.2,21,12,0)
              are selected for reporting
"^DD",810.1,810.1,1.2,21,13,0)
(O)E/RR     - OE/RR teams may be entered. Patients allocated to these
"^DD",810.1,810.1,1.2,21,14,0)
              teams are selected for reporting.
"^DD",810.1,810.1,1.2,23,0)
^^14^14^3000505^
"^DD",810.1,810.1,1.2,23,1,0)
Routine PXRMXT loads templates into local array for use by the report
"^DD",810.1,810.1,1.2,23,2,0)
routines. Each patient sample has only one associated array. The field
"^DD",810.1,810.1,1.2,23,3,0)
PXRMSEL decides which array is loaded. The local arrays correspond to the
"^DD",810.1,810.1,1.2,23,4,0)
field names in the template file.
"^DD",810.1,810.1,1.2,23,5,0)
 
"^DD",810.1,810.1,1.2,23,6,0)
e.g. 
"^DD",810.1,810.1,1.2,23,7,0)
PXRMSEL="I" patient entries in field PXRMPAT are loaded into array PXRMPAT
"^DD",810.1,810.1,1.2,23,8,0)
PXRMSEL="T" team entries in field PXRMPCM are loaded into array PXRMPCM
"^DD",810.1,810.1,1.2,23,9,0)
PXRMSEL="P" providers in field PXRMPRV are loaded into array PXRMPRV
"^DD",810.1,810.1,1.2,23,10,0)
PXRMSEL="O" team entries in PXRMOTM are loaded into array PXRMOTM
"^DD",810.1,810.1,1.2,23,11,0)
 
"^DD",810.1,810.1,1.2,23,12,0)
Note that except for the individual patient sample (PXRMSEL="I") the
"^DD",810.1,810.1,1.2,23,13,0)
template file does not hold patient identifiers. Lists of patients are
"^DD",810.1,810.1,1.2,23,14,0)
assembled by the report routines.
"^DD",810.1,810.1,1.2,"DT")
2990318
"^DD",810.1,810.1,1.3,0)
PXRMPRIM^S^P:Primary care patients only;A:All patients;^0;5^Q
"^DD",810.1,810.1,1.3,.1)
PRIMARY CARE ONLY OR ALL
"^DD",810.1,810.1,1.3,"DT")
2990316
"^DD",810.1,810.1,1.4,0)
PXRMREP^RSX^D:Detailed Report;S:Summary Report;^0;6^D PXRMREP^PXRMXTA
"^DD",810.1,810.1,1.4,.1)
REPORT TYPE
"^DD",810.1,810.1,1.4,21,0)
^^4^4^2990414^
"^DD",810.1,810.1,1.4,21,1,0)
The summary report displays the TOTAL number of patients with reminders
"^DD",810.1,810.1,1.4,21,2,0)
APPLICABLE or DUE from the patient sample selected.
"^DD",810.1,810.1,1.4,21,3,0)
 
"^DD",810.1,810.1,1.4,21,4,0)
The detailed report lists DUE patients by name and SSN.
"^DD",810.1,810.1,1.4,"DT")
2990607
"^DD",810.1,810.1,1.5,0)
PXRMLCSC^S^HA:All Outpatient Locations;HAI:All Inpatient Locations;HS:Selected Hospital Locations;CA:All Clinic Stops;CS:Selected Clinic Stops;GS:Selected Clinic Groups;^0;7^Q
"^DD",810.1,810.1,1.5,.1)
LOCATION TYPE
"^DD",810.1,810.1,1.5,"DT")
2990426
"^DD",810.1,810.1,1.6,0)
PXRMFD^SX^F:Future Appointments;P:Prior Visits;A:Admissions;C:Current Inpatients;^0;8^D INP^PXRMXTU
"^DD",810.1,810.1,1.6,.1)
TYPE OF ENCOUNTER
"^DD",810.1,810.1,1.6,"DT")
2990324
"^DD",810.1,810.1,1.9,0)
TITLE^RF^^0;2^K:$L(X)>40!($L(X)<5) X
"^DD",810.1,810.1,1.9,.1)
TITLE
"^DD",810.1,810.1,1.9,3)
Answer must be 5-40 characters in length.
"^DD",810.1,810.1,1.9,21,0)
^.001^3^3^3000505^^
"^DD",810.1,810.1,1.9,21,1,0)
A detailed report title may be defined when a template is created. This
"^DD",810.1,810.1,1.9,21,2,0)
should be a detailed description of the report and is displayed both on
"^DD",810.1,810.1,1.9,21,3,0)
the report criteria page and at template selection.
"^DD",810.1,810.1,1.9,23,0)
^.001^2^2^3000505^^
"^DD",810.1,810.1,1.9,23,1,0)
Detailed description of template. Used as an identifier when selecting
"^DD",810.1,810.1,1.9,23,2,0)
templates.
"^DD",810.1,810.1,1.9,"DT")
2990318
"^DD",810.1,810.1,2,0)
PXRMREM^810.12PA^^1;0
"^DD",810.1,810.1,2,"DT")
2990315
"^DD",810.1,810.1,3,0)
PXRMFAC^810.13PA^^6;0
"^DD",810.1,810.1,4,0)
PXRMPRV^810.14PA^^3;0
"^DD",810.1,810.1,4,"DT")
2990316
"^DD",810.1,810.1,5,0)
RUN^D^^7;1^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",810.1,810.1,5,"DT")
2990201
"^DD",810.1,810.1,6,0)
PXRMPAT^810.16PA^^2;0
"^DD",810.1,810.1,7,0)
PXRMOTM^810.17PA^^4;0
"^DD",810.1,810.1,8,0)
PXRMPCM^810.18PA^^5;0
"^DD",810.1,810.1,9,0)
PXRMSCAT^810.19SA^^8;0
"^DD",810.1,810.1,10,0)
PXRMLCHL^810.11PA^^9;0
"^DD",810.1,810.1,11,0)
PXRMCS^810.111PA^^10;0
"^DD",810.1,810.1,12,0)
PXRMCGRP^810.112PA^^11;0
"^DD",810.1,810.1,13,0)
PXRMRCAT^810.113P^^12;0
"^DD",810.1,810.11,0)
PXRMLCHL SUB-FIELD^^.01^1
"^DD",810.1,810.11,0,"DT")
2990316
"^DD",810.1,810.11,0,"IX","B",810.11,.01)

"^DD",810.1,810.11,0,"NM","PXRMLCHL")

"^DD",810.1,810.11,0,"UP")
810.1
"^DD",810.1,810.11,.01,0)
LOCATION^MRP44'^SC(^0;1^Q
"^DD",810.1,810.11,.01,.1)
Hospital Location
"^DD",810.1,810.11,.01,1,0)
^.1
"^DD",810.1,810.11,.01,1,1,0)
810.11^B
"^DD",810.1,810.11,.01,1,1,1)
S ^PXRMPT(810.1,DA(1),9,"B",$E(X,1,30),DA)=""
"^DD",810.1,810.11,.01,1,1,2)
K ^PXRMPT(810.1,DA(1),9,"B",$E(X,1,30),DA)
"^DD",810.1,810.11,.01,"DT")
2990316
"^DD",810.1,810.111,0)
PXRMCS SUB-FIELD^^.01^1
"^DD",810.1,810.111,0,"DT")
2990316
"^DD",810.1,810.111,0,"IX","B",810.111,.01)

"^DD",810.1,810.111,0,"NM","PXRMCS")

"^DD",810.1,810.111,0,"UP")
810.1
"^DD",810.1,810.111,.01,0)
STOP CODE^MRP40.7'^DIC(40.7,^0;1^Q
"^DD",810.1,810.111,.01,.1)
Clinic Stop Code
"^DD",810.1,810.111,.01,1,0)
^.1
"^DD",810.1,810.111,.01,1,1,0)
810.111^B
"^DD",810.1,810.111,.01,1,1,1)
S ^PXRMPT(810.1,DA(1),10,"B",$E(X,1,30),DA)=""
"^DD",810.1,810.111,.01,1,1,2)
K ^PXRMPT(810.1,DA(1),10,"B",$E(X,1,30),DA)
"^DD",810.1,810.111,.01,"DT")
2990316
"^DD",810.1,810.112,0)
PXRMCGRP SUB-FIELD^^.01^1
"^DD",810.1,810.112,0,"DT")
2990316
"^DD",810.1,810.112,0,"IX","B",810.112,.01)

"^DD",810.1,810.112,0,"NM","PXRMCGRP")

"^DD",810.1,810.112,0,"UP")
810.1
"^DD",810.1,810.112,.01,0)
CLINIC GROUP^MRP409.67'^SD(409.67,^0;1^Q
"^DD",810.1,810.112,.01,.1)
Clinic Group Code
"^DD",810.1,810.112,.01,1,0)
^.1
"^DD",810.1,810.112,.01,1,1,0)
810.112^B
"^DD",810.1,810.112,.01,1,1,1)
S ^PXRMPT(810.1,DA(1),11,"B",$E(X,1,30),DA)=""
"^DD",810.1,810.112,.01,1,1,2)
K ^PXRMPT(810.1,DA(1),11,"B",$E(X,1,30),DA)
"^DD",810.1,810.112,.01,"DT")
2990316
"^DD",810.1,810.113,0)
PXRMRCAT SUB-FIELD^^.02^2
"^DD",810.1,810.113,0,"DT")
3010622
"^DD",810.1,810.113,0,"IX","B",810.113,.01)

"^DD",810.1,810.113,0,"NM","PXRMRCAT")

"^DD",810.1,810.113,0,"UP")
810.1
"^DD",810.1,810.113,.01,0)
REMINDER CATEGORY^MP811.7'^PXRMD(811.7,^0;1^Q
"^DD",810.1,810.113,.01,.1)
Reminder Category
"^DD",810.1,810.113,.01,1,0)
^.1
"^DD",810.1,810.113,.01,1,1,0)
810.113^B
"^DD",810.1,810.113,.01,1,1,1)
S ^PXRMPT(810.1,DA(1),12,"B",$E(X,1,30),DA)=""
"^DD",810.1,810.113,.01,1,1,2)
K ^PXRMPT(810.1,DA(1),12,"B",$E(X,1,30),DA)
"^DD",810.1,810.113,.01,"DT")
3010622
"^DD",810.1,810.113,.02,0)
DISPLAY ORDER^RNJ2,0^^0;2^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",810.1,810.113,.02,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",810.1,810.113,.02,21,0)
^^1^1^3010622^
"^DD",810.1,810.113,.02,21,1,0)
Enter the order in which reminder categories should appear on the report.
"^DD",810.1,810.113,.02,"DT")
3010622
"^DD",810.1,810.12,0)
PXRMREM SUB-FIELD^^.02^2
"^DD",810.1,810.12,0,"DT")
3010727
"^DD",810.1,810.12,0,"IX","B",810.12,.01)

"^DD",810.1,810.12,0,"NM","PXRMREM")

"^DD",810.1,810.12,0,"UP")
810.1
"^DD",810.1,810.12,.01,0)
REMINDER^MP811.9'X^PXD(811.9,^0;1^D PXRMREM^PXRMXTA
"^DD",810.1,810.12,.01,.1)
Reminder
"^DD",810.1,810.12,.01,1,0)
^.1
"^DD",810.1,810.12,.01,1,1,0)
810.12^B
"^DD",810.1,810.12,.01,1,1,1)
S ^PXRMPT(810.1,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",810.1,810.12,.01,1,1,2)
K ^PXRMPT(810.1,DA(1),1,"B",$E(X,1,30),DA)
"^DD",810.1,810.12,.01,21,0)
^.001^2^2^3010727^^^
"^DD",810.1,810.12,.01,21,1,0)
Enter the reminders to be evaluated in the order to be printed. If the
"^DD",810.1,810.12,.01,21,2,0)
report type is 'Detailed' only the first reminder will be used.
"^DD",810.1,810.12,.01,23,0)
^.001^1^1^3010727^^^^
"^DD",810.1,810.12,.01,23,1,0)
Reminder Definition file #811.9
"^DD",810.1,810.12,.01,"DT")
3010727
"^DD",810.1,810.12,.02,0)
DISPLAY ORDER^RNJ2,0^^0;2^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",810.1,810.12,.02,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",810.1,810.12,.02,21,0)
^^1^1^2990415^
"^DD",810.1,810.12,.02,21,1,0)
Enter the order in which the reminders should appear on the report.
"^DD",810.1,810.12,.02,"DT")
2990415
"^DD",810.1,810.13,0)
PXRMFAC SUB-FIELD^^.01^1
"^DD",810.1,810.13,0,"IX","B",810.13,.01)

"^DD",810.1,810.13,0,"NM","PXRMFAC")

"^DD",810.1,810.13,0,"UP")
810.1
"^DD",810.1,810.13,.01,0)
FACILITY^MP4'^DIC(4,^0;1^Q
"^DD",810.1,810.13,.01,.1)
Facility Code
"^DD",810.1,810.13,.01,1,0)
^.1
"^DD",810.1,810.13,.01,1,1,0)
810.13^B
"^DD",810.1,810.13,.01,1,1,1)
S ^PXRMPT(810.1,DA(1),6,"B",$E(X,1,30),DA)=""
"^DD",810.1,810.13,.01,1,1,2)
K ^PXRMPT(810.1,DA(1),6,"B",$E(X,1,30),DA)
"^DD",810.1,810.13,.01,"DT")
2990316
"^DD",810.1,810.14,0)
PXRMPRV SUB-FIELD^^.01^1
"^DD",810.1,810.14,0,"DT")
2990316
"^DD",810.1,810.14,0,"IX","B",810.14,.01)

"^DD",810.1,810.14,0,"NM","PXRMPRV")

"^DD",810.1,810.14,0,"UP")
810.1
"^DD",810.1,810.14,.01,0)
PROVIDER^MRP200'^VA(200,^0;1^Q
"^DD",810.1,810.14,.01,1,0)
^.1
"^DD",810.1,810.14,.01,1,1,0)
810.14^B
"^DD",810.1,810.14,.01,1,1,1)
S ^PXRMPT(810.1,DA(1),3,"B",$E(X,1,30),DA)=""
"^DD",810.1,810.14,.01,1,1,2)
K ^PXRMPT(810.1,DA(1),3,"B",$E(X,1,30),DA)
"^DD",810.1,810.14,.01,1,1,3)
Required Index for Variable Pointer
"^DD",810.1,810.14,.01,3)

"^DD",810.1,810.14,.01,"DT")
2990316
"^DD",810.1,810.14,.01,"V",0)
^.12P^1^1
"^DD",810.1,810.14,.01,"V",1,0)
200^PROVIDER^1^P^^n
"^DD",810.1,810.16,0)
PXRMPAT SUB-FIELD^^.01^1
"^DD",810.1,810.16,0,"DT")
2990316
"^DD",810.1,810.16,0,"IX","B",810.16,.01)

"^DD",810.1,810.16,0,"NM","PXRMPAT")

"^DD",810.1,810.16,0,"UP")
810.1
"^DD",810.1,810.16,.01,0)
PATIENT^MRP2'^DPT(^0;1^Q
"^DD",810.1,810.16,.01,.1)
Patient
"^DD",810.1,810.16,.01,1,0)
^.1
"^DD",810.1,810.16,.01,1,1,0)
810.16^B
"^DD",810.1,810.16,.01,1,1,1)
S ^PXRMPT(810.1,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",810.1,810.16,.01,1,1,2)
K ^PXRMPT(810.1,DA(1),2,"B",$E(X,1,30),DA)
"^DD",810.1,810.16,.01,"DT")
2990316
"^DD",810.1,810.17,0)
PXRMOTM SUB-FIELD^^.01^1
"^DD",810.1,810.17,0,"DT")
2990316
"^DD",810.1,810.17,0,"IX","B",810.17,.01)

"^DD",810.1,810.17,0,"NM","PXRMOTM")

"^DD",810.1,810.17,0,"UP")
810.1
"^DD",810.1,810.17,.01,0)
OERR TEAM^MRP100.21'^OR(100.21,^0;1^Q
"^DD",810.1,810.17,.01,.1)
OE/RR Team
"^DD",810.1,810.17,.01,1,0)
^.1
"^DD",810.1,810.17,.01,1,1,0)
810.17^B
"^DD",810.1,810.17,.01,1,1,1)
S ^PXRMPT(810.1,DA(1),4,"B",$E(X,1,30),DA)=""
"^DD",810.1,810.17,.01,1,1,2)
K ^PXRMPT(810.1,DA(1),4,"B",$E(X,1,30),DA)
"^DD",810.1,810.17,.01,"DT")
2990316
"^DD",810.1,810.18,0)
PXRMPCM SUB-FIELD^^.01^1
"^DD",810.1,810.18,0,"DT")
2990316
"^DD",810.1,810.18,0,"IX","B",810.18,.01)

"^DD",810.1,810.18,0,"NM","PXRMPCM")

"^DD",810.1,810.18,0,"UP")
810.1
"^DD",810.1,810.18,.01,0)
PCMM TEAM^MRP404.51'^SCTM(404.51,^0;1^Q
"^DD",810.1,810.18,.01,.1)
PCMM Team
"^DD",810.1,810.18,.01,1,0)
^.1
"^DD",810.1,810.18,.01,1,1,0)
810.18^B
"^DD",810.1,810.18,.01,1,1,1)
S ^PXRMPT(810.1,DA(1),5,"B",$E(X,1,30),DA)=""
"^DD",810.1,810.18,.01,1,1,2)
K ^PXRMPT(810.1,DA(1),5,"B",$E(X,1,30),DA)
"^DD",810.1,810.18,.01,"DT")
2990316
"^DD",810.1,810.19,0)
PXRMSCAT SUB-FIELD^^.01^1
"^DD",810.1,810.19,0,"DT")
2990816
"^DD",810.1,810.19,0,"IX","B",810.19,.01)

"^DD",810.1,810.19,0,"NM","PXRMSCAT")

"^DD",810.1,810.19,0,"UP")
810.1
"^DD",810.1,810.19,.01,0)
SERVICE^MRS^A:AMBULATORY;H:HOSPITALIZATION;I:IN HOSPITAL;C:CHART REVIEW;T:TELECOMMUNICATIONS;N:NOT FOUND;S:DAY SURGERY;O:OBSERVATION;E:EVENT (HISTORICAL);R:NURSING HOME;D:DAILY HOSPITALIZATION DATA;X:ANCILLARY PACKAGE DAILY DATA;^0;1^Q
"^DD",810.1,810.19,.01,.1)
Service Code
"^DD",810.1,810.19,.01,1,0)
^.1
"^DD",810.1,810.19,.01,1,1,0)
810.19^B
"^DD",810.1,810.19,.01,1,1,1)
S ^PXRMPT(810.1,DA(1),8,"B",$E(X,1,30),DA)=""
"^DD",810.1,810.19,.01,1,1,2)
K ^PXRMPT(810.1,DA(1),8,"B",$E(X,1,30),DA)
"^DD",810.1,810.19,.01,"DT")
2990816
"^DD",811.2,811.2,0)
FIELD^^3112^21
"^DD",811.2,811.2,0,"DDA")
N
"^DD",811.2,811.2,0,"DT")
3010518
"^DD",811.2,811.2,0,"ID",.02)
W "   ",$P(^(0),U,2)
"^DD",811.2,811.2,0,"ID",100)
W:$D(^(100)) "   ",@("$P($P($C(59)_$S($D(^DD(811.2,100,0)):$P(^(0),U,3),1:0)_$E("_DIC_"Y,0),0),$C(59)_$P(^(100),U,1)_"":"",2),$C(59),1)")
"^DD",811.2,811.2,0,"NM","REMINDER TAXONOMY")

"^DD",811.2,811.2,0,"PT",801.41,15)

"^DD",811.2,811.2,0,"PT",810.31,.04)

"^DD",811.2,811.2,0,"PT",810.32,.01)

"^DD",811.2,811.2,0,"PT",811.3,.01)

"^DD",811.2,811.2,0,"PT",811.52,.01)

"^DD",811.2,811.2,0,"PT",811.902,.01)

"^DD",811.2,811.2,0,"VRPK")
PXRM
"^DD",811.2,811.2,.01,0)
NAME^RFX^^0;1^K:$L(X)>35!($L(X)<3)!'(X'?1P.E)!('$$VNAME^PXRMINTR(X,811.2)) X
"^DD",811.2,811.2,.01,1,0)
^.1^^0
"^DD",811.2,811.2,.01,3)
Answer must be 3-35 characters in length.
"^DD",811.2,811.2,.01,21,0)
^.001^1^1^3000505^^^^
"^DD",811.2,811.2,.01,21,1,0)
This is the name of the taxonomy. It must be unique.
"^DD",811.2,811.2,.01,"DT")
3000601
"^DD",811.2,811.2,.02,0)
BRIEF DESCRIPTION^F^^0;2^K:$L(X)>80!($L(X)<3) X
"^DD",811.2,811.2,.02,3)
Answer must be 3-80 characters in length.
"^DD",811.2,811.2,.02,21,0)
^.001^2^2^3000505^^^^
"^DD",811.2,811.2,.02,21,1,0)
This is a brief description of what the taxonomy represents. This may be
"^DD",811.2,811.2,.02,21,2,0)
used to further define the intended use of this taxonomy.
"^DD",811.2,811.2,.02,"DT")
3000502
"^DD",811.2,811.2,.03,0)
DIALOG HEADER TEXT^F^^0;3^K:$L(X)>80!($L(X)<3) X
"^DD",811.2,811.2,.03,3)
Answer must be 3-80 characters in length.
"^DD",811.2,811.2,.03,21,0)
^.001^2^2^3000502^^^
"^DD",811.2,811.2,.03,21,1,0)
This text will be displayed as a checkbox in the reminder dialog for this
"^DD",811.2,811.2,.03,21,2,0)
taxonomy.
"^DD",811.2,811.2,.03,"DT")
2991025
"^DD",811.2,811.2,1.6,0)
INACTIVE FLAG^S^1:INACTIVE;^0;6^Q
"^DD",811.2,811.2,1.6,3)
Enter a 1 to inactivate this taxonomy.
"^DD",811.2,811.2,1.6,21,0)
^.001^6^6^3000502^^
"^DD",811.2,811.2,1.6,21,1,0)
Enter "1" to inactivate the taxonomy.  This flag is set to ACTIVE in
"^DD",811.2,811.2,1.6,21,2,0)
the distribution. As part of the installation, each site should review
"^DD",811.2,811.2,1.6,21,3,0)
the taxonomy definitions and inactivate those that do not meet the
"^DD",811.2,811.2,1.6,21,4,0)
site's needs. If desired, a site can copy a distributed taxonomy, using
"^DD",811.2,811.2,1.6,21,5,0)
the taxomony copy option, to a local version and edit it to meet the
"^DD",811.2,811.2,1.6,21,6,0)
site's needs.
"^DD",811.2,811.2,1.6,23,0)
^.001^2^2^3000502^^
"^DD",811.2,811.2,1.6,23,1,0)
This flag controls whether or not taxonomies may be selected as a
"^DD",811.2,811.2,1.6,23,2,0)
Clinical Reminder finding.
"^DD",811.2,811.2,1.6,"DT")
2960730
"^DD",811.2,811.2,4,0)
PATIENT DATA SOURCE^FX^^0;4^K:$L(X)>40!($L(X)<1) X D VPDS^PXRMTAX
"^DD",811.2,811.2,4,3)
Answer must be 1-40 characters in length.
"^DD",811.2,811.2,4,4)
D PDSXHELP^PXRMTAX
"^DD",811.2,811.2,4,21,0)
^.001^2^2^3000502^^^^
"^DD",811.2,811.2,4,21,1,0)
PATIENT DATA SOURCE specifies where to search for patient data. It is a
"^DD",811.2,811.2,4,21,2,0)
string of comma-separated key words.
"^DD",811.2,811.2,4,"DT")
3000403
"^DD",811.2,811.2,10,0)
USE INACTIVE PROBLEMS^S^1:YES;^0;9^Q
"^DD",811.2,811.2,10,3)
Enter YES if you want to use both active and inactive problems.
"^DD",811.2,811.2,10,21,0)
^.001^6^6^3000505^^^^
"^DD",811.2,811.2,10,21,1,0)
USE INACTIVE PROBLEMS applies only to searches in Problem List. Normally
"^DD",811.2,811.2,10,21,2,0)
inactive problems are not used. However, when this field is set to YES
"^DD",811.2,811.2,10,21,3,0)
then both active and inactive problems are used. This field works just
"^DD",811.2,811.2,10,21,4,0)
like the field with the same name that can be specified for a reminder
"^DD",811.2,811.2,10,21,5,0)
definition finding or a reminder term finding. The order of precedence
"^DD",811.2,811.2,10,21,6,0)
is taxonomy > term > definition.
"^DD",811.2,811.2,10,"DT")
3000403
"^DD",811.2,811.2,100,0)
CLASS^RSX^N:NATIONAL;V:VISN;L:LOCAL;^100;1^K:'$$VCLASS^PXRMINTR(X) X
"^DD",811.2,811.2,100,3)
Enter the class.
"^DD",811.2,811.2,100,21,0)
^.001^1^1^3010518^^^
"^DD",811.2,811.2,100,21,1,0)
This is the class of definition. National taxonomies cannot be edited.
"^DD",811.2,811.2,100,"DT")
3010518
"^DD",811.2,811.2,101,0)
SPONSOR^P811.6^PXRMD(811.6,^100;2^Q
"^DD",811.2,811.2,101,3)
Enter the sponsor.
"^DD",811.2,811.2,101,21,0)
^^1^1^3010501^
"^DD",811.2,811.2,101,21,1,0)
This is the organization or group that sponsors this taxonomy.
"^DD",811.2,811.2,101,"DT")
3010419
"^DD",811.2,811.2,102,0)
REVIEW DATE^D^^100;3^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",811.2,811.2,102,3)
Enter the review date.
"^DD",811.2,811.2,102,21,0)
^^3^3^3010501^
"^DD",811.2,811.2,102,21,1,0)
The REVIEW DATE is used to determine when the taxonomy should be
"^DD",811.2,811.2,102,21,2,0)
reviewed to verify that it is current with the latest standards and
"^DD",811.2,811.2,102,21,3,0)
guidelines.
"^DD",811.2,811.2,102,"DT")
3010419
"^DD",811.2,811.2,110,0)
EDIT HISTORY^811.21D^^110;0
"^DD",811.2,811.2,110,21,0)
^.001^2^2^3010502^^
"^DD",811.2,811.2,110,21,1,0)
This multiple is used to record a history of changes made to the
"^DD",811.2,811.2,110,21,2,0)
taxonomy.
"^DD",811.2,811.2,2102,0)
ICD9 RANGE OF CODED VALUES^811.22102^^80;0
"^DD",811.2,811.2,2102,21,0)
^.001^5^5^3000502^^^^
"^DD",811.2,811.2,2102,21,1,0)
This multiple is used to define ranges of ICD9 coded values which
"^DD",811.2,811.2,2102,21,2,0)
constitute taxonomy entries. A range is defined by a low and high
"^DD",811.2,811.2,2102,21,3,0)
value which are inclusive. The low and high value are actual codes
"^DD",811.2,811.2,2102,21,4,0)
from the source file, not internal entry numbers.
"^DD",811.2,811.2,2102,21,5,0)

"^DD",811.2,811.2,2102,"DT")
2980803
"^DD",811.2,811.2,2103,0)
ICD0 RANGE OF CODED VALUES^811.22103^^80.1;0
"^DD",811.2,811.2,2103,21,0)
^.001^4^4^3000502^^^^
"^DD",811.2,811.2,2103,21,1,0)
This multiple is used to define ranges of ICD0 coded values which
"^DD",811.2,811.2,2103,21,2,0)
constitute taxonomy entries. A range is defined by a low and high
"^DD",811.2,811.2,2103,21,3,0)
value which are inclusive. The low and high value are actual codes
"^DD",811.2,811.2,2103,21,4,0)
from the source file, not internal entry numbers.
"^DD",811.2,811.2,2103,"DT")
2980803
"^DD",811.2,811.2,2104,0)
CPT RANGE OF CODED VALUES^811.22104^^81;0
"^DD",811.2,811.2,2104,21,0)
^.001^5^5^3000502^^^^
"^DD",811.2,811.2,2104,21,1,0)
This multiple is used to define ranges of CPT coded values which
"^DD",811.2,811.2,2104,21,2,0)
constitute taxonomy entries. A range is defined by a low and high
"^DD",811.2,811.2,2104,21,3,0)
value which are inclusive. The low and high value are actual codes
"^DD",811.2,811.2,2104,21,4,0)
from the source file, not internal entry numbers.
"^DD",811.2,811.2,2104,21,5,0)

"^DD",811.2,811.2,2104,"DT")
2980803
"^DD",811.2,811.2,3102,0)
SELECTABLE DIAGNOSIS^811.23102IP^^SDX;0
"^DD",811.2,811.2,3102,21,0)
^.001^4^4^3000505^^
"^DD",811.2,811.2,3102,21,1,0)
These are the diagnosis codes that may be selected when processing a
"^DD",811.2,811.2,3102,21,2,0)
taxonomy dialog within CPRS. The list of codes is built from the code
"^DD",811.2,811.2,3102,21,3,0)
ranges within the taxonomy when the Clinical Reminders package is
"^DD",811.2,811.2,3102,21,4,0)
installed and includes only active codes.
"^DD",811.2,811.2,3104,0)
SELECTABLE PROCEDURE^811.23104IP^^SPR;0
"^DD",811.2,811.2,3104,21,0)
^.001^4^4^3000505^^
"^DD",811.2,811.2,3104,21,1,0)
These are the procedure codes that may be selected when processing a
"^DD",811.2,811.2,3104,21,2,0)
taxonomy dialog within CPRS. The list of codes is built from the code
"^DD",811.2,811.2,3104,21,3,0)
ranges within the taxonomy when the Clinical Reminders package is
"^DD",811.2,811.2,3104,21,4,0)
installed and includes only active codes.
"^DD",811.2,811.2,3106,0)
GENERATE DIALOG DX PARAMETER^S^1:INDIVIDUAL DIALOG FOR EACH DIAGNOSIS CODE;^SDZ;1^Q
"^DD",811.2,811.2,3106,3)
Enter 1 if each selectable diagnosis should be a separate prompt.
"^DD",811.2,811.2,3106,21,0)
^^6^6^3000505^
"^DD",811.2,811.2,3106,21,1,0)
If this parameter is set then each active code in the selectable diagnosis
"^DD",811.2,811.2,3106,21,2,0)
list will be presented as a separate question in CPRS with text generated
"^DD",811.2,811.2,3106,21,3,0)
from the finding parameter file.
"^DD",811.2,811.2,3106,21,4,0)
 
"^DD",811.2,811.2,3106,21,5,0)
Otherwise the active selectable diagnoses will be displayed as a checkbox
"^DD",811.2,811.2,3106,21,6,0)
with the dialog header text for diagnoses. This is the default option.
"^DD",811.2,811.2,3106,"DT")
2990908
"^DD",811.2,811.2,3107,0)
CURRENT VISIT DX DIALOG HDR^F^^SDZ;2^K:$L(X)>80!($L(X)<1) X
"^DD",811.2,811.2,3107,.1)

"^DD",811.2,811.2,3107,3)
Enter 1-80 character header text for current visit diagnosis selection.
"^DD",811.2,811.2,3107,21,0)
^.001^6^6^3000503^^^
"^DD",811.2,811.2,3107,21,1,0)
This is the diagnosis dialog sub-header text that will be selectable for
"^DD",811.2,811.2,3107,21,2,0)
CPRS users to document a diagnosis from the taxonomy as treated at the
"^DD",811.2,811.2,3107,21,3,0)
current visit. The header text will display with a check box which CPRS
"^DD",811.2,811.2,3107,21,4,0)
users can select to see the selectable diagnoses list. 
"^DD",811.2,811.2,3107,21,5,0)
 
"^DD",811.2,811.2,3107,21,6,0)
If this field is not present the taxonomy name will be used.
"^DD",811.2,811.2,3107,"DT")
3000503
"^DD",811.2,811.2,3108,0)
HISTORICAL VISIT DX DIALOG HDR^F^^SDZ;3^K:$L(X)>80!($L(X)<1) X
"^DD",811.2,811.2,3108,3)
Enter 1-80 character header text for historical visit diagnosis selection.
"^DD",811.2,811.2,3108,21,0)
^^7^7^3000503^
"^DD",811.2,811.2,3108,21,1,0)
This is the diagnosis dialog sub-header text that will be selectable for
"^DD",811.2,811.2,3108,21,2,0)
CPRS users to document a diagnosis from the taxonomy as a historical
"^DD",811.2,811.2,3108,21,3,0)
diagnosis. The header text will display with a check box which CPRS users
"^DD",811.2,811.2,3108,21,4,0)
can select to see the selectable diagnoses list.  Historical diagnoses
"^DD",811.2,811.2,3108,21,5,0)
selected will require the CPRS user to enter a visit date.
"^DD",811.2,811.2,3108,21,6,0)
 
"^DD",811.2,811.2,3108,21,7,0)
If this field is not present the taxonomy name will be used.
"^DD",811.2,811.2,3108,"DT")
3000503
"^DD",811.2,811.2,3110,0)
GENERATE DIALOG PR PARAMETER^S^1:INDIVIDUAL DIALOG FOR EACH PROCEDURE;^SPZ;1^Q
"^DD",811.2,811.2,3110,3)
Enter 1 if each selectable procedure should be a separate prompt.
"^DD",811.2,811.2,3110,21,0)
^^6^6^3000505^
"^DD",811.2,811.2,3110,21,1,0)
If this parameter is set then each active code in the selectable procedure
"^DD",811.2,811.2,3110,21,2,0)
list will be presented as a separate question in CPRS with text generated
"^DD",811.2,811.2,3110,21,3,0)
from the finding parameter file.
"^DD",811.2,811.2,3110,21,4,0)
                                  
"^DD",811.2,811.2,3110,21,5,0)
Otherwise the active selectable procedures will be displayed as a checkbox
"^DD",811.2,811.2,3110,21,6,0)
with the dialog header text for procedures. This is the default option.
"^DD",811.2,811.2,3110,"DT")
2990909
"^DD",811.2,811.2,3111,0)
CURRENT VISIT PR DIALOG HDR^F^^SPZ;2^K:$L(X)>80!($L(X)<1) X
"^DD",811.2,811.2,3111,3)
Enter 1-80 character header text for current visit procedure selection.
"^DD",811.2,811.2,3111,21,0)
^.001^6^6^3000503^^
"^DD",811.2,811.2,3111,21,1,0)
This is the procedure dialog sub-header text that will be selectable for
"^DD",811.2,811.2,3111,21,2,0)
CPRS users to document a procedure from the taxonomy as done at the
"^DD",811.2,811.2,3111,21,3,0)
current visit. The header text will display with a check box which CPRS
"^DD",811.2,811.2,3111,21,4,0)
users can select to see the selectable procedure list. 
"^DD",811.2,811.2,3111,21,5,0)
 
"^DD",811.2,811.2,3111,21,6,0)
If this field is not present the taxonomy name will be used.
"^DD",811.2,811.2,3111,"DT")
3000503
"^DD",811.2,811.2,3112,0)
HISTORICAL VISIT PR DIALOG HDR^F^^SPZ;3^K:$L(X)>80!($L(X)<1) X
"^DD",811.2,811.2,3112,3)
Enter 1-80 character header text for historical visit procedure selection.
"^DD",811.2,811.2,3112,21,0)
^.001^7^7^3000503^^
"^DD",811.2,811.2,3112,21,1,0)
This is the procedure dialog sub-header text that will be selectable for
"^DD",811.2,811.2,3112,21,2,0)
CPRS users to document a procedure from the taxonomy as a historical
"^DD",811.2,811.2,3112,21,3,0)
procedure. The header text will display with a check box which CPRS users
"^DD",811.2,811.2,3112,21,4,0)
can select to see the selectable procedure list.  Historical procedures
"^DD",811.2,811.2,3112,21,5,0)
selected will require the CPRS user to enter a visit date.
"^DD",811.2,811.2,3112,21,6,0)
 
"^DD",811.2,811.2,3112,21,7,0)
If this field is not present the taxonomy name will be used.
"^DD",811.2,811.2,3112,"DT")
3000503
"^DD",811.2,811.21,0)
EDIT HISTORY SUB-FIELD^^2^3
"^DD",811.2,811.21,0,"DT")
3010419
"^DD",811.2,811.21,0,"IX","B",811.21,.01)

"^DD",811.2,811.21,0,"NM","EDIT HISTORY")

"^DD",811.2,811.21,0,"UP")
811.2
"^DD",811.2,811.21,.01,0)
EDIT DATE^D^^0;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",811.2,811.21,.01,1,0)
^.1
"^DD",811.2,811.21,.01,1,1,0)
811.21^B
"^DD",811.2,811.21,.01,1,1,1)
S ^PXD(811.2,DA(1),110,"B",$E(X,1,30),DA)=""
"^DD",811.2,811.21,.01,1,1,2)
K ^PXD(811.2,DA(1),110,"B",$E(X,1,30),DA)
"^DD",811.2,811.21,.01,21,0)
^^2^2^3010501^
"^DD",811.2,811.21,.01,21,1,0)
This is the date and time when the editing was done. This field is set
"^DD",811.2,811.21,.01,21,2,0)
automatically and should not be changed by the user.
"^DD",811.2,811.21,.01,"DT")
3010419
"^DD",811.2,811.21,1,0)
EDIT BY^P200'^VA(200,^0;2^Q
"^DD",811.2,811.21,1,21,0)
^^2^2^3010501^
"^DD",811.2,811.21,1,21,1,0)
This is the person who did the editing. This field is set automatically
"^DD",811.2,811.21,1,21,2,0)
and should not be changed by the user.
"^DD",811.2,811.21,1,"DT")
3010419
"^DD",811.2,811.21,2,0)
EDIT COMMENTS^811.212^^1;0
"^DD",811.2,811.21,2,21,0)
^.001^2^2^3010502^^
"^DD",811.2,811.21,2,21,1,0)
This word-processing field can be used to the record the changes made
"^DD",811.2,811.21,2,21,2,0)
during the editing session.
"^DD",811.2,811.21,2,"DT")
3010425
"^DD",811.2,811.212,0)
EDIT COMMENTS SUB-FIELD^^.01^1
"^DD",811.2,811.212,0,"DT")
3010419
"^DD",811.2,811.212,0,"NM","EDIT COMMENTS")

"^DD",811.2,811.212,0,"UP")
811.21
"^DD",811.2,811.212,.01,0)
EDIT COMMENTS^W^^0;1^Q
"^DD",811.2,811.212,.01,3)
Enter your edit comments.
"^DD",811.2,811.212,.01,"DT")
3010425
"^DD",811.2,811.22102,0)
ICD9 RANGE OF CODED VALUES SUB-FIELD^^1^2
"^DD",811.2,811.22102,0,"DT")
2980817
"^DD",811.2,811.22102,0,"IX","AC",811.22102,.01)

"^DD",811.2,811.22102,0,"IX","B",811.22102,.01)

"^DD",811.2,811.22102,0,"NM","ICD9 RANGE OF CODED VALUES")

"^DD",811.2,811.22102,0,"UP")
811.2
"^DD",811.2,811.22102,.01,0)
ICD9 LOW CODED VALUE^MFX^^0;1^K:$L(X)>7!($L(X)<3) X D VCICD9^PXRMCODE
"^DD",811.2,811.22102,.01,1,0)
^.1^^-1
"^DD",811.2,811.22102,.01,1,1,0)
811.22102^B
"^DD",811.2,811.22102,.01,1,1,1)
S ^PXD(811.2,DA(1),80,"B",$E(X,1,30),DA)=""
"^DD",811.2,811.22102,.01,1,1,2)
K ^PXD(811.2,DA(1),80,"B",$E(X,1,30),DA)
"^DD",811.2,811.22102,.01,3)
Answer must be 3-7 characters in length.
"^DD",811.2,811.22102,.01,21,0)
^^4^4^3000502^
"^DD",811.2,811.22102,.01,21,1,0)
This multiple is used to define ranges of ICD9 coded values which
"^DD",811.2,811.22102,.01,21,2,0)
constitute taxonomy entries. A range is defined by a low and high
"^DD",811.2,811.22102,.01,21,3,0)
value which are inclusive. The low and high value are actual codes
"^DD",811.2,811.22102,.01,21,4,0)
from the source file, not internal entry numbers.
"^DD",811.2,811.22102,.01,"DT")
3000328
"^DD",811.2,811.22102,1,0)
ICD9 HIGH CODED VALUE^FX^^0;2^K:$L(X)>7!($L(X)<3) X D VCICD9^PXRMCODE
"^DD",811.2,811.22102,1,1,0)
^.1^^0
"^DD",811.2,811.22102,1,3)
Answer must be 3-7 characters in length.
"^DD",811.2,811.22102,1,21,0)
^^4^4^3000502^
"^DD",811.2,811.22102,1,21,1,0)
This multiple is used to define ranges of ICD9 coded values which
"^DD",811.2,811.22102,1,21,2,0)
constitute taxonomy entries. A range is defined by a low and high
"^DD",811.2,811.22102,1,21,3,0)
value which are inclusive. The low and high value are actual codes
"^DD",811.2,811.22102,1,21,4,0)
from the source file, not internal entry numbers.
"^DD",811.2,811.22102,1,"DT")
3000328
"^DD",811.2,811.22103,0)
ICD0 RANGE OF CODED VALUES SUB-FIELD^^1^2
"^DD",811.2,811.22103,0,"DT")
2980817
"^DD",811.2,811.22103,0,"IX","B",811.22103,.01)

"^DD",811.2,811.22103,0,"NM","ICD0 RANGE OF CODED VALUES")

"^DD",811.2,811.22103,0,"UP")
811.2
"^DD",811.2,811.22103,.01,0)
ICD0 LOW CODED VALUE^MFX^^0;1^K:$L(X)>7!($L(X)<3) X D VCICD0^PXRMCODE
"^DD",811.2,811.22103,.01,1,0)
^.1^^-1
"^DD",811.2,811.22103,.01,1,1,0)
811.22103^B
"^DD",811.2,811.22103,.01,1,1,1)
S ^PXD(811.2,DA(1),80.1,"B",$E(X,1,30),DA)=""
"^DD",811.2,811.22103,.01,1,1,2)
K ^PXD(811.2,DA(1),80.1,"B",$E(X,1,30),DA)
"^DD",811.2,811.22103,.01,3)
Answer must be 3-7 characters in length.
"^DD",811.2,811.22103,.01,21,0)
^^4^4^3000502^
"^DD",811.2,811.22103,.01,21,1,0)
This multiple is used to define ranges of ICD0 coded values which
"^DD",811.2,811.22103,.01,21,2,0)
constitute taxonomy entries. A range is defined by a low and high
"^DD",811.2,811.22103,.01,21,3,0)
value which are inclusive. The low and high value are actual codes
"^DD",811.2,811.22103,.01,21,4,0)
from the source file, not internal entry numbers.
"^DD",811.2,811.22103,.01,"DT")
3000328
"^DD",811.2,811.22103,1,0)
ICD0 HIGH CODED VALUE^FX^^0;2^K:$L(X)>7!($L(X)<3) X D VCICD0^PXRMCODE
"^DD",811.2,811.22103,1,1,0)
^.1^^0
"^DD",811.2,811.22103,1,3)
Answer must be 3-7 characters in length.
"^DD",811.2,811.22103,1,21,0)
^^4^4^3000502^
"^DD",811.2,811.22103,1,21,1,0)
This multiple is used to define ranges of ICD0 coded values which
"^DD",811.2,811.22103,1,21,2,0)
constitute taxonomy entries. A range is defined by a low and high
"^DD",811.2,811.22103,1,21,3,0)
value which are inclusive. The low and high value are actual codes
"^DD",811.2,811.22103,1,21,4,0)
from the source file, not internal entry numbers.
"^DD",811.2,811.22103,1,"DT")
3000328
"^DD",811.2,811.22104,0)
CPT RANGE OF CODED VALUES SUB-FIELD^^1^2
"^DD",811.2,811.22104,0,"DT")
2980817
"^DD",811.2,811.22104,0,"IX","B",811.22104,.01)

"^DD",811.2,811.22104,0,"NM","CPT RANGE OF CODED VALUES")

"^DD",811.2,811.22104,0,"UP")
811.2
"^DD",811.2,811.22104,.01,0)
CPT LOW CODED VALUE^MFX^^0;1^K:$L(X)>7!($L(X)<3) X D VCICPT^PXRMCODE
"^DD",811.2,811.22104,.01,1,0)
^.1^^-1
"^DD",811.2,811.22104,.01,1,1,0)
811.22104^B
"^DD",811.2,811.22104,.01,1,1,1)
S ^PXD(811.2,DA(1),81,"B",$E(X,1,30),DA)=""
"^DD",811.2,811.22104,.01,1,1,2)
K ^PXD(811.2,DA(1),81,"B",$E(X,1,30),DA)
"^DD",811.2,811.22104,.01,3)
Answer must be 3-7 characters in length.
"^DD",811.2,811.22104,.01,21,0)
^^4^4^3000502^
"^DD",811.2,811.22104,.01,21,1,0)
This multiple is used to define ranges of CPT coded values which
"^DD",811.2,811.22104,.01,21,2,0)
constitute taxonomy entries. A range is defined by a low and high
"^DD",811.2,811.22104,.01,21,3,0)
value which are inclusive. The low and high value are actual codes
"^DD",811.2,811.22104,.01,21,4,0)
from the source file, not internal entry numbers.
"^DD",811.2,811.22104,.01,"DT")
3000328
"^DD",811.2,811.22104,1,0)
CPT HIGH CODED VALUE^FX^^0;2^K:$L(X)>7!($L(X)<3) X D VCICPT^PXRMCODE
"^DD",811.2,811.22104,1,1,0)
^.1^^0
"^DD",811.2,811.22104,1,3)
Answer must be 3-7 characters in length.
"^DD",811.2,811.22104,1,21,0)
^^4^4^3000502^
"^DD",811.2,811.22104,1,21,1,0)
This multiple is used to define ranges of CPT coded values which
"^DD",811.2,811.22104,1,21,2,0)
constitute taxonomy entries. A range is defined by a low and high
"^DD",811.2,811.22104,1,21,3,0)
value which are inclusive. The low and high value are actual codes
"^DD",811.2,811.22104,1,21,4,0)
from the source file, not internal entry numbers.
"^DD",811.2,811.22104,1,"DT")
3000328
"^DD",811.2,811.23102,0)
SELECTABLE DIAGNOSIS SUB-FIELD^^2^3
"^DD",811.2,811.23102,0,"DT")
2991025
"^DD",811.2,811.23102,0,"ID",1)
W "   ",$P(^(0),U,2)
"^DD",811.2,811.23102,0,"IX","B",811.23102,.01)

"^DD",811.2,811.23102,0,"NM","SELECTABLE DIAGNOSIS")

"^DD",811.2,811.23102,0,"UP")
811.2
"^DD",811.2,811.23102,.01,0)
SELECTABLE DIAGNOSIS^MP80'^ICD9(^0;1^Q
"^DD",811.2,811.23102,.01,1,0)
^.1
"^DD",811.2,811.23102,.01,1,1,0)
811.23102^B
"^DD",811.2,811.23102,.01,1,1,1)
S ^PXD(811.2,DA(1),"SDX","B",$E(X,1,30),DA)=""
"^DD",811.2,811.23102,.01,1,1,2)
K ^PXD(811.2,DA(1),"SDX","B",$E(X,1,30),DA)
"^DD",811.2,811.23102,.01,3)
Enter a ICD9 code that can be entered in CPRS to satisfy a reminder.
"^DD",811.2,811.23102,.01,21,0)
^.001^2^2^3000503^^
"^DD",811.2,811.23102,.01,21,1,0)
This is the selectable diagnosis code that will appear in the taxonomy
"^DD",811.2,811.23102,.01,21,2,0)
dialog. Only active codes may be selected.
"^DD",811.2,811.23102,.01,"DT")
2991025
"^DD",811.2,811.23102,1,0)
DISPLAY TEXT^F^^0;2^K:$L(X)>40!($L(X)<1) X
"^DD",811.2,811.23102,1,3)
Answer must be 1-40 characters in length.
"^DD",811.2,811.23102,1,21,0)
^.001^3^3^3000502^^
"^DD",811.2,811.23102,1,21,1,0)
This is the description of the diagnosis code that will appear in the
"^DD",811.2,811.23102,1,21,2,0)
taxonomy dialog in CPRS. The field is optional - the standard diagnosis
"^DD",811.2,811.23102,1,21,3,0)
code name is the default.
"^DD",811.2,811.23102,1,"DT")
2991025
"^DD",811.2,811.23102,2,0)
DISABLED^S^1:DISABLED;^0;3^Q
"^DD",811.2,811.23102,2,21,0)
^^2^2^3000502^
"^DD",811.2,811.23102,2,21,1,0)
This field should be input if a selectable code is to be excluded
"^DD",811.2,811.23102,2,21,2,0)
temporarily from the taxonomy dialog in CPRS.
"^DD",811.2,811.23102,2,"DT")
2991025
"^DD",811.2,811.23104,0)
SELECTABLE PROCEDURE SUB-FIELD^^2^3
"^DD",811.2,811.23104,0,"DT")
2991025
"^DD",811.2,811.23104,0,"ID",1)
W "   ",$P(^(0),U,2)
"^DD",811.2,811.23104,0,"IX","B",811.23104,.01)

"^DD",811.2,811.23104,0,"NM","SELECTABLE PROCEDURE")

"^DD",811.2,811.23104,0,"UP")
811.2
"^DD",811.2,811.23104,.01,0)
SELECTABLE PROCEDURE^MP81'^ICPT(^0;1^Q
"^DD",811.2,811.23104,.01,1,0)
^.1
"^DD",811.2,811.23104,.01,1,1,0)
811.23104^B
"^DD",811.2,811.23104,.01,1,1,1)
S ^PXD(811.2,DA(1),"SPR","B",$E(X,1,30),DA)=""
"^DD",811.2,811.23104,.01,1,1,2)
K ^PXD(811.2,DA(1),"SPR","B",$E(X,1,30),DA)
"^DD",811.2,811.23104,.01,3)
Enter a CPT code that can be entered in CPRS to satisfy a reminder
"^DD",811.2,811.23104,.01,21,0)
^^2^2^3000502^
"^DD",811.2,811.23104,.01,21,1,0)
This is the selectable procedure code that will appear in the taxonomy
"^DD",811.2,811.23104,.01,21,2,0)
dialog. Only active codes may be selected.
"^DD",811.2,811.23104,.01,"DT")
2991025
"^DD",811.2,811.23104,1,0)
DISPLAY TEXT^F^^0;2^K:$L(X)>40!($L(X)<1) X
"^DD",811.2,811.23104,1,3)
Answer must be 1-40 characters in length.
"^DD",811.2,811.23104,1,21,0)
^^3^3^3000502^
"^DD",811.2,811.23104,1,21,1,0)
This is the description of the procedure code that will appear in the
"^DD",811.2,811.23104,1,21,2,0)
taxonomy dialog in CPRS. The field is optional - the standard standard
"^DD",811.2,811.23104,1,21,3,0)
code name is the default.
"^DD",811.2,811.23104,1,"DT")
2991025
"^DD",811.2,811.23104,2,0)
DISABLED^S^1:DISABLED;^0;3^Q
"^DD",811.2,811.23104,2,21,0)
^^2^2^3000502^
"^DD",811.2,811.23104,2,21,1,0)
This field should be input if a selectable code is to be excluded
"^DD",811.2,811.23104,2,21,2,0)
temporarily from the taxonomy dialog in CPRS.
"^DD",811.2,811.23104,2,"DT")
2991025
"^DD",8989.51,8989.51,0)
FIELD^^30^18
"^DD",8989.51,8989.51,0,"DDA")
N
"^DD",8989.51,8989.51,0,"DT")
2970621
"^DD",8989.51,8989.51,0,"ID","WRITE")
N X S X=^(0) D EN^DDIOL($P(X,U,2),"","?36")
"^DD",8989.51,8989.51,0,"IX","AG",8989.513,.02)

"^DD",8989.51,8989.51,0,"IX","B",8989.51,.01)

"^DD",8989.51,8989.51,0,"IX","C",8989.51,.02)

"^DD",8989.51,8989.51,0,"IX","D",8989.51,.01)

"^DD",8989.51,8989.51,0,"NM","PARAMETER DEFINITION")

"^DD",8989.51,8989.51,0,"PT",8989.5,.02)

"^DD",8989.51,8989.51,0,"PT",8989.52,.04)

"^DD",8989.51,8989.51,0,"PT",8989.521,.02)

"^DD",8989.51,8989.51,0,"VRPK")
CLINICAL PROCEDURES
"^DD",8989.51,8989.51,.01,0)
NAME^RFX^^0;1^D VALID01^XPARDD1
"^DD",8989.51,8989.51,.01,1,0)
^.1
"^DD",8989.51,8989.51,.01,1,1,0)
8989.51^B
"^DD",8989.51,8989.51,.01,1,1,1)
S ^XTV(8989.51,"B",$E(X,1,30),DA)=""
"^DD",8989.51,8989.51,.01,1,1,2)
K ^XTV(8989.51,"B",$E(X,1,30),DA)
"^DD",8989.51,8989.51,.01,1,2,0)
8989.51^D^KWIC
"^DD",8989.51,8989.51,.01,1,2,1)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2,^DD("KWIC")'[I S ^XTV(8989.51,"D",I,DA)=""
"^DD",8989.51,8989.51,.01,1,2,2)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2 K ^XTV(8989.51,"D",I,DA)
"^DD",8989.51,8989.51,.01,1,2,"DT")
3000225
"^DD",8989.51,8989.51,.01,3)
Answer must be 3-30 characters in length.  Name must be unique.
"^DD",8989.51,8989.51,.01,21,0)
^^2^2^2960207^
"^DD",8989.51,8989.51,.01,21,1,0)
This is the name of the parameter.  It should be namespaced according to the 
"^DD",8989.51,8989.51,.01,21,2,0)
package from which the parameter originated.
"^DD",8989.51,8989.51,.01,"DT")
2960207
"^DD",8989.51,8989.51,.02,0)
DISPLAY TEXT^F^^0;2^K:$L(X)>40!($L(X)<1) X
"^DD",8989.51,8989.51,.02,1,0)
^.1
"^DD",8989.51,8989.51,.02,1,1,0)
8989.51^C^MUMPS
"^DD",8989.51,8989.51,.02,1,1,1)
S ^XTV(8989.51,"C",$$UPPER^XPARDD1(X),DA)=""
"^DD",8989.51,8989.51,.02,1,1,2)
K ^XTV(8989.51,"C",$$UPPER^XPARDD1(X),DA)
"^DD",8989.51,8989.51,.02,1,1,"%D",0)
^^2^2^2970606^
"^DD",8989.51,8989.51,.02,1,1,"%D",1,0)
Cross references display text for lookup.  Display text is put in upper
"^DD",8989.51,8989.51,.02,1,1,"%D",2,0)
case so lookup will be case insensitive.
"^DD",8989.51,8989.51,.02,1,1,"DT")
2960409
"^DD",8989.51,8989.51,.02,3)
Answer must be 1-40 characters in length.
"^DD",8989.51,8989.51,.02,21,0)
^^2^2^2960207^
"^DD",8989.51,8989.51,.02,21,1,0)
This is the displayable name for the parameter (allows mixed case, 
"^DD",8989.51,8989.51,.02,21,2,0)
non-namespaced names).
"^DD",8989.51,8989.51,.02,"DT")
2960409
"^DD",8989.51,8989.51,.03,0)
MULTIPLE VALUED^S^1:Yes;0:No;^0;3^Q
"^DD",8989.51,8989.51,.03,3)
Enter 'Yes' if multiple instances of the parameter are allowed for any single entity.
"^DD",8989.51,8989.51,.03,21,0)
^^3^3^2980705^
"^DD",8989.51,8989.51,.03,21,1,0)
If this field is set to 'Yes', multiple instances of the parameter will be 
"^DD",8989.51,8989.51,.03,21,2,0)
allowed for a single entity.  Otherwise, the value of the instance field
"^DD",8989.51,8989.51,.03,21,3,0)
for a given Entity-Parameter combination will always be '1'.
"^DD",8989.51,8989.51,.03,"DT")
2960207
"^DD",8989.51,8989.51,.04,0)
INSTANCE TERM^F^^0;4^K:$L(X)>40!($L(X)<1) X
"^DD",8989.51,8989.51,.04,3)
Answer must be 1-40 characters in length.
"^DD",8989.51,8989.51,.04,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,.04,21,1,0)
This is a free text term that can be used when prompting for a new instance of 
"^DD",8989.51,8989.51,.04,21,2,0)
the parameter (in the case where the parameter in multiple valued).  If not 
"^DD",8989.51,8989.51,.04,21,3,0)
entered, the word "Instance" will be used.
"^DD",8989.51,8989.51,.04,"DT")
2960207
"^DD",8989.51,8989.51,.05,0)
VALUE TERM^F^^0;5^K:$L(X)>40!($L(X)<1) X
"^DD",8989.51,8989.51,.05,3)
Answer must be 1-40 characters in length.
"^DD",8989.51,8989.51,.05,21,0)
^^2^2^2970626^
"^DD",8989.51,8989.51,.05,21,1,0)
This contains text that is issued as a prompt for the value.  If nothing
"^DD",8989.51,8989.51,.05,21,2,0)
is here, the prompt will be the word 'Value:'.
"^DD",8989.51,8989.51,.05,"DT")
2960612
"^DD",8989.51,8989.51,.06,0)
PROHIBIT EDITING^S^1:Yes;0:No;^0;6^Q
"^DD",8989.51,8989.51,.06,3)
Choose 'Disallow Editing' if editing of this field should not be allowed.
"^DD",8989.51,8989.51,.06,21,0)
^^2^2^2970306^
"^DD",8989.51,8989.51,.06,21,1,0)
This field prevents the parameter value from being edited with Fileman or
"^DD",8989.51,8989.51,.06,21,2,0)
any Parameters tools.
"^DD",8989.51,8989.51,.06,"DT")
2970317
"^DD",8989.51,8989.51,1.1,0)
VALUE DATA TYPE^S^D:date/time;F:free text;N:numeric;S:set of codes;Y:yes/no;P:pointer;W:word processing;M:M code;C:constant;^1;1^Q
"^DD",8989.51,8989.51,1.1,3)
Enter the type of data this parameter will contain.
"^DD",8989.51,8989.51,1.1,21,0)
^^2^2^2960207^
"^DD",8989.51,8989.51,1.1,21,1,0)
This is the type of data this parameter will contain.  This field is used to 
"^DD",8989.51,8989.51,1.1,21,2,0)
define a call to the reader (^DIR) in most cases.
"^DD",8989.51,8989.51,1.1,"DT")
2960528
"^DD",8989.51,8989.51,1.2,0)
VALUE DOMAIN^F^^1;2^K:$L(X)>100!($L(X)<1) X
"^DD",8989.51,8989.51,1.2,3)
Enter up to 100 characters to further define the data type (used by ^DIR).
"^DD",8989.51,8989.51,1.2,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,1.2,21,1,0)
This is a string that may be used to further specify the data type.  The 
"^DD",8989.51,8989.51,1.2,21,2,0)
string stored here should be appropriate for the second ^-piece of DIR(0) 
"^DD",8989.51,8989.51,1.2,21,3,0)
when used with the data type field.
"^DD",8989.51,8989.51,1.2,"DT")
2960207
"^DD",8989.51,8989.51,1.3,0)
VALUE HELP^F^^1;3^K:$L(X)>80!($L(X)<1) X
"^DD",8989.51,8989.51,1.3,3)
Enter a line of help text to be displayed when entering a parameter value.
"^DD",8989.51,8989.51,1.3,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,1.3,21,1,0)
This field contains a line of help text that is displayed when the user 
"^DD",8989.51,8989.51,1.3,21,2,0)
requests help or encounters an error while entering the VALUE field in the 
"^DD",8989.51,8989.51,1.3,21,3,0)
PARAMETERS file.
"^DD",8989.51,8989.51,1.3,"DT")
2960207
"^DD",8989.51,8989.51,2,0)
VALUE VALIDATION CODE^K^^2;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8989.51,8989.51,2,3)
This is M code used by DIR (3rd piece of DIR(0)).
"^DD",8989.51,8989.51,2,9)
@
"^DD",8989.51,8989.51,2,21,0)
^^2^2^2980705^
"^DD",8989.51,8989.51,2,21,1,0)
This field contains the M code that is placed in the third piece of DIR(0)
"^DD",8989.51,8989.51,2,21,2,0)
when validating a value in the PARAMETERS file.
"^DD",8989.51,8989.51,2,"DT")
2960207
"^DD",8989.51,8989.51,3,0)
VALUE SCREEN CODE^K^^3;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8989.51,8989.51,3,3)
This is M code placed in DIR("S").
"^DD",8989.51,8989.51,3,9)
@
"^DD",8989.51,8989.51,3,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,3,21,1,0)
This field contains M code that is used to screen allowable entries for the 
"^DD",8989.51,8989.51,3,21,2,0)
VALUE field in the PARAMETERS file.  The code is placed in DIR("S") when 
"^DD",8989.51,8989.51,3,21,3,0)
validating the entry.
"^DD",8989.51,8989.51,3,"DT")
2960207
"^DD",8989.51,8989.51,6.1,0)
INSTANCE DATA TYPE^S^D:date/time;F:free text;N:numeric;S:set of codes;Y:yes/no;P:pointer;^6;1^Q
"^DD",8989.51,8989.51,6.1,3)
Enter the type of data allowed for the INSTANCE field of the parameter.
"^DD",8989.51,8989.51,6.1,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,6.1,21,1,0)
This is the type of data that is contained in the INSTANCE field of the 
"^DD",8989.51,8989.51,6.1,21,2,0)
PARAMETERS file, if multiple parameter instances per entity are allowed.  
"^DD",8989.51,8989.51,6.1,21,3,0)
This field is used to define a call to the reader.
"^DD",8989.51,8989.51,6.1,"DT")
2960207
"^DD",8989.51,8989.51,6.2,0)
INSTANCE DOMAIN^F^^6;2^K:$L(X)>100!($L(X)<1) X
"^DD",8989.51,8989.51,6.2,3)
Enter up to 100 characters to further define the data type (used by ^DIR).
"^DD",8989.51,8989.51,6.2,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,6.2,21,1,0)
This may be used to further define the data type for the INSTANCE field of 
"^DD",8989.51,8989.51,6.2,21,2,0)
the parameter.  The string stored here should be appropriate for the second 
"^DD",8989.51,8989.51,6.2,21,3,0)
^-piece of DIR(0) when used with the data type field.
"^DD",8989.51,8989.51,6.2,"DT")
2960207
"^DD",8989.51,8989.51,6.3,0)
INSTANCE HELP^F^^6;3^K:$L(X)>80!($L(X)<1) X
"^DD",8989.51,8989.51,6.3,3)
Enter a line of help text to be displayed when entering the parameter instance.
"^DD",8989.51,8989.51,6.3,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,6.3,21,1,0)
This field contains a line of help text that is displayed when the user 
"^DD",8989.51,8989.51,6.3,21,2,0)
requests help or encounters an error while entering the INSTANCE field of 
"^DD",8989.51,8989.51,6.3,21,3,0)
the PARAMETERS file.
"^DD",8989.51,8989.51,6.3,"DT")
2960207
"^DD",8989.51,8989.51,7,0)
INSTANCE VALIDATION CODE^K^^7;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8989.51,8989.51,7,3)
This is M code used by DIR (3rd piece of DIR(0)).
"^DD",8989.51,8989.51,7,9)
@
"^DD",8989.51,8989.51,7,21,0)
^^2^2^2960207^
"^DD",8989.51,8989.51,7,21,1,0)
This field contains M code that is placed in the third piece of DIR(0) when 
"^DD",8989.51,8989.51,7,21,2,0)
validating the INSTANCE field in the PARAMETERS file.
"^DD",8989.51,8989.51,7,"DT")
2960207
"^DD",8989.51,8989.51,8,0)
INSTANCE SCREEN CODE^K^^8;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8989.51,8989.51,8,3)
This is M code placed in DIR("S").
"^DD",8989.51,8989.51,8,9)
@
"^DD",8989.51,8989.51,8,21,0)
^^3^3^2960207^
"^DD",8989.51,8989.51,8,21,1,0)
This field contains M code that is used to screen allowable entries for the 
"^DD",8989.51,8989.51,8,21,2,0)
INSTANCE field in the PARAMETERS file.  The code is placed in DIR("S") when 
"^DD",8989.51,8989.51,8,21,3,0)
validating the entry.
"^DD",8989.51,8989.51,8,"DT")
2960207
"^DD",8989.51,8989.51,20,0)
DESCRIPTION^8989.512^^20;0
"^DD",8989.51,8989.51,20,21,0)
^^1^1^2970626^
"^DD",8989.51,8989.51,20,21,1,0)
A description of the parameter may be entered here.
"^DD",8989.51,8989.51,30,0)
ALLOWABLE ENTITIES^8989.513I^^30;0
"^DD",8989.51,8989.51,30,21,0)
^^2^2^2960213^^
"^DD",8989.51,8989.51,30,21,1,0)
This multiple contains a list of entities (pointers to files) for which the 
"^DD",8989.51,8989.51,30,21,2,0)
parameter may be validly set.
"^DD",8989.51,8989.512,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",8989.51,8989.512,0,"DT")
2960207
"^DD",8989.51,8989.512,0,"NM","DESCRIPTION")

"^DD",8989.51,8989.512,0,"UP")
8989.51
"^DD",8989.51,8989.512,.01,0)
DESCRIPTION^WL^^0;1^Q
"^DD",8989.51,8989.512,.01,3)
Enter a description of the parameter and how it is used.
"^DD",8989.51,8989.512,.01,21,0)
^^1^1^2960207^
"^DD",8989.51,8989.512,.01,21,1,0)
This is text that describes the purpose and use of the parameter.
"^DD",8989.51,8989.512,.01,"DT")
2960207
"^DD",8989.51,8989.513,0)
ALLOWABLE ENTITIES SUB-FIELD^^.02^2
"^DD",8989.51,8989.513,0,"DT")
2970621
"^DD",8989.51,8989.513,0,"ID",.02)
S %I=Y,Y=$S('$D(^(0)):"",$D(^DIC(+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(1,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",8989.51,8989.513,0,"IX","B",8989.513,.01)

"^DD",8989.51,8989.513,0,"NM","ALLOWABLE ENTITIES")

"^DD",8989.51,8989.513,0,"UP")
8989.51
"^DD",8989.51,8989.513,.01,0)
PRECEDENCE^MRNJ6,2^^0;1^K:+X'=X!(X>999.99)!(X<0)!(X?.E1"."3N.N) X
"^DD",8989.51,8989.513,.01,1,0)
^.1
"^DD",8989.51,8989.513,.01,1,1,0)
8989.513^B
"^DD",8989.51,8989.513,.01,1,1,1)
S ^XTV(8989.51,DA(1),30,"B",$E(X,1,30),DA)=""
"^DD",8989.51,8989.513,.01,1,1,2)
K ^XTV(8989.51,DA(1),30,"B",$E(X,1,30),DA)
"^DD",8989.51,8989.513,.01,3)
Type a Number between 0 and 999.99, 2 Decimal Digits
"^DD",8989.51,8989.513,.01,21,0)
^^6^6^2960213^^^
"^DD",8989.51,8989.513,.01,21,1,0)
A single parameter may be set for several different types of entities.  This 
"^DD",8989.51,8989.513,.01,21,2,0)
lists the order in which entities are searched for a defined value.  For 
"^DD",8989.51,8989.513,.01,21,3,0)
example, if a parameter may be set for a package, a location, and a user, 
"^DD",8989.51,8989.513,.01,21,4,0)
and the respective precedents are 3, 2, 1, the value of the user parameter 
"^DD",8989.51,8989.513,.01,21,5,0)
would be returned.  If it did not exist, the value of the location 
"^DD",8989.51,8989.513,.01,21,6,0)
parameter.  If that did not exist, then the value of the package parameter.
"^DD",8989.51,8989.513,.01,"DT")
2960213
"^DD",8989.51,8989.513,.02,0)
ENTITY FILE^RP8989.518'^XTV(8989.518,^0;2^Q
"^DD",8989.51,8989.513,.02,1,0)
^.1
"^DD",8989.51,8989.513,.02,1,1,0)
8989.51^AG^MUMPS
"^DD",8989.51,8989.513,.02,1,1,1)
D AGS^XPARDD1
"^DD",8989.51,8989.513,.02,1,1,2)
D AGK^XPARDD1
"^DD",8989.51,8989.513,.02,1,1,"%D",0)
^^5^5^2980422^
"^DD",8989.51,8989.513,.02,1,1,"%D",1,0)
The AG x-ref has the format ^XTV(8989.51,PARAM,30,"AG",GLOBAL REF,DA)="".
"^DD",8989.51,8989.513,.02,1,1,"%D",2,0)
 
"^DD",8989.51,8989.513,.02,1,1,"%D",3,0)
It is used to screen the parameters that may be selected for a given entity 
"^DD",8989.51,8989.513,.02,1,1,"%D",4,0)
in the PARAMETERS file.  The global root is used because the entity is a 
"^DD",8989.51,8989.513,.02,1,1,"%D",5,0)
variable pointer.
"^DD",8989.51,8989.513,.02,1,1,"DT")
2960207
"^DD",8989.51,8989.513,.02,3)
Choose a file from which entities for this parameter are identified.
"^DD",8989.51,8989.513,.02,21,0)
^^3^3^2980422^
"^DD",8989.51,8989.513,.02,21,1,0)
This identifies an entity for which the parameter can be legally entered.  
"^DD",8989.51,8989.513,.02,21,2,0)
Entities are simply variable pointers.  The files which are eligible to be
"^DD",8989.51,8989.513,.02,21,3,0)
entities are listed in the PARAMETER ENTITY file.
"^DD",8989.51,8989.513,.02,"DT")
2970621
"^DIC",800,800,0)
CLINICAL REMINDER PARAMETERS^800
"^DIC",800,800,0,"GL")
^PXRM(800,
"^DIC",800,800,"%",0)
^1.005^^0
"^DIC",800,800,"%D",0)
^^2^2^3000608^
"^DIC",800,800,"%D",1,0)
This file has one entry that contains parameters used by Clinical
"^DIC",800,800,"%D",2,0)
Reminders.
"^DIC",800,"B","CLINICAL REMINDER PARAMETERS",800)

"^DIC",810.1,810.1,0)
REMINDER REPORT TEMPLATE^810.1
"^DIC",810.1,810.1,0,"GL")
^PXRMPT(810.1,
"^DIC",810.1,810.1,"%",0)
^1.005^^0
"^DIC",810.1,810.1,"%D",0)
^^13^13^3000207^
"^DIC",810.1,810.1,"%D",1,0)
This file is used by the reminder reports options only. For each type of
"^DIC",810.1,810.1,"%D",2,0)
report (e.g. Reminders Due) selection parameters used in a report may be
"^DIC",810.1,810.1,"%D",3,0)
saved as a template when the report is being run. When running reports the
"^DIC",810.1,810.1,"%D",4,0)
user may opt to retrieve parameters from an existing template as the basis
"^DIC",810.1,810.1,"%D",5,0)
of a new report. Templates may be modified, renamed, copied or deleted
"^DIC",810.1,810.1,"%D",6,0)
from the reminder report options.
"^DIC",810.1,810.1,"%D",7,0)
 
"^DIC",810.1,810.1,"%D",8,0)
The parameters for the reminder reports consist of a patient sample (e.g.
"^DIC",810.1,810.1,"%D",9,0)
PCMM team) from which a patient list is built and also a list of reminders
"^DIC",810.1,810.1,"%D",10,0)
to be evaluated for each selected patient.
"^DIC",810.1,810.1,"%D",11,0)
 
"^DIC",810.1,810.1,"%D",12,0)
The field names in the template file correspond to the local variable and
"^DIC",810.1,810.1,"%D",13,0)
array names used in the print routines.
"^DIC",810.1,"B","REMINDER REPORT TEMPLATE",810.1)

"^DIC",811.2,811.2,0)
REMINDER TAXONOMY^811.2I
"^DIC",811.2,811.2,0,"GL")
^PXD(811.2,
"^DIC",811.2,811.2,"%",0)
^1.005^^0
"^DIC",811.2,811.2,"%D",0)
^^8^8^3000609^^^^
"^DIC",811.2,811.2,"%D",1,0)
This file stores the Clinical Reminder taxonomies. A taxonomy is just a
"^DIC",811.2,811.2,"%D",2,0)
way to give a name to a set of codes. These codes can be ICD Diagnosis,
"^DIC",811.2,811.2,"%D",3,0)
ICD Operation/Procedure or CPT.
"^DIC",811.2,811.2,"%D",4,0)

"^DIC",811.2,811.2,"%D",5,0)
This file contains a combination of nationally distributed and local
"^DIC",811.2,811.2,"%D",6,0)
entries. Any local entries are assigned an internal entry number
"^DIC",811.2,811.2,"%D",7,0)
prefixed with your site number. Nationally distributed entries have
"^DIC",811.2,811.2,"%D",8,0)
their name prefixed with VA-. Local entry names cannot start with VA-.
"^DIC",811.2,"B","REMINDER TAXONOMY",811.2)

"^DIC",8989.51,8989.51,0)
PARAMETER DEFINITION^8989.51
"^DIC",8989.51,8989.51,0,"GL")
^XTV(8989.51,
"^DIC",8989.51,8989.51,"%D",0)
^^3^3^2980920^
"^DIC",8989.51,8989.51,"%D",1,0)
This file contains the characteristics of parameters.  Entries in this
"^DIC",8989.51,8989.51,"%D",2,0)
file must be namespaced and they are exported by the package which owns
"^DIC",8989.51,8989.51,"%D",3,0)
them.
"^DIC",8989.51,"B","PARAMETER DEFINITION",8989.51)

**END**
**END**

Released PX*1*173 SEQ #128
Extracted from mail message
**KIDS**:PX*1.0*173^

**INSTALL NAME**
PX*1.0*173
"BLD",6288,0)
PX*1.0*173^PCE PATIENT CARE ENCOUNTER^0^3051018^y
"BLD",6288,1,0)
^9.61A^1^1^3051018^^
"BLD",6288,1,1,0)
Unable to complete check out. IHS file index problem.
"BLD",6288,4,0)
^9.64PA^^
"BLD",6288,"KRN",0)
^9.67PA^8989.52^19
"BLD",6288,"KRN",.4,0)
.4
"BLD",6288,"KRN",.401,0)
.401
"BLD",6288,"KRN",.402,0)
.402
"BLD",6288,"KRN",.403,0)
.403
"BLD",6288,"KRN",.5,0)
.5
"BLD",6288,"KRN",.84,0)
.84
"BLD",6288,"KRN",3.6,0)
3.6
"BLD",6288,"KRN",3.8,0)
3.8
"BLD",6288,"KRN",9.2,0)
9.2
"BLD",6288,"KRN",9.8,0)
9.8
"BLD",6288,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6288,"KRN",9.8,"NM",1,0)
PXBAPI^^0^B38957311
"BLD",6288,"KRN",9.8,"NM","B","PXBAPI",1)

"BLD",6288,"KRN",19,0)
19
"BLD",6288,"KRN",19.1,0)
19.1
"BLD",6288,"KRN",101,0)
101
"BLD",6288,"KRN",409.61,0)
409.61
"BLD",6288,"KRN",771,0)
771
"BLD",6288,"KRN",870,0)
870
"BLD",6288,"KRN",8989.51,0)
8989.51
"BLD",6288,"KRN",8989.52,0)
8989.52
"BLD",6288,"KRN",8994,0)
8994
"BLD",6288,"KRN","B",.4,.4)

"BLD",6288,"KRN","B",.401,.401)

"BLD",6288,"KRN","B",.402,.402)

"BLD",6288,"KRN","B",.403,.403)

"BLD",6288,"KRN","B",.5,.5)

"BLD",6288,"KRN","B",.84,.84)

"BLD",6288,"KRN","B",3.6,3.6)

"BLD",6288,"KRN","B",3.8,3.8)

"BLD",6288,"KRN","B",9.2,9.2)

"BLD",6288,"KRN","B",9.8,9.8)

"BLD",6288,"KRN","B",19,19)

"BLD",6288,"KRN","B",19.1,19.1)

"BLD",6288,"KRN","B",101,101)

"BLD",6288,"KRN","B",409.61,409.61)

"BLD",6288,"KRN","B",771,771)

"BLD",6288,"KRN","B",870,870)

"BLD",6288,"KRN","B",8989.51,8989.51)

"BLD",6288,"KRN","B",8989.52,8989.52)

"BLD",6288,"KRN","B",8994,8994)

"BLD",6288,"QUES",0)
^9.62^^
"BLD",6288,"REQB",0)
^9.611^1^1
"BLD",6288,"REQB",1,0)
PX*1.0*67^2
"BLD",6288,"REQB","B","PX*1.0*67",1)

"MBREQ")
0
"PKG",413,-1)
1^1
"PKG",413,0)
PCE PATIENT CARE ENCOUNTER^PX^Patient Care Encounter (VA Parent package)^
"PKG",413,20,0)
^9.402P^^
"PKG",413,22,0)
^9.49I^1^1
"PKG",413,22,1,0)
1.0^2960812^2960913^12537
"PKG",413,22,1,"PAH",1,0)
173^3051018
"PKG",413,22,1,"PAH",1,1,0)
^^1^1^3051018
"PKG",413,22,1,"PAH",1,1,1,0)
Unable to complete check out. IHS file index problem.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PXBAPI")
0^1^B38957311
"RTN","PXBAPI",1,0)
PXBAPI ;ISL/JVS,ISA/KWP - PCE's API interview questions - encounter ;04/26/99
"RTN","PXBAPI",2,0)
 ;;1.0;PCE PATIENT CARE ENCOUNTER;**19,67,173**;Aug 12, 1996
"RTN","PXBAPI",3,0)
 Q
"RTN","PXBAPI",4,0)
 ;
"RTN","PXBAPI",5,0)
INTV(WHAT,PACKAGE,SOURCE,PXBVST,PXBHLOC,PXBPAT,PXBAPPT,PXLIMDT,PXALHLOC) ;
"RTN","PXBAPI",6,0)
 ;+This api will prompt the user for Visit and related V-file data used to document an encounter.
"RTN","PXBAPI",7,0)
 ;+Interview Questions
"RTN","PXBAPI",8,0)
 ;+Parameters
"RTN","PXBAPI",9,0)
 ;+  WHAT  Required, defines the series of prompts. Valid values are:
"RTN","PXBAPI",10,0)
 ;+    "INTV" all of the prompts in the checkout interview.
"RTN","PXBAPI",11,0)
 ;+    "ADQ"  all of the administrative prompts related to the interview.
"RTN","PXBAPI",12,0)
 ;+    "CODT" prompts for the Check Out Date/Time.
"RTN","PXBAPI",13,0)
 ;+    "SCC"  prompts for the service connected conditions.
"RTN","PXBAPI",14,0)
 ;+    "PRV"  prompts for the providers
"RTN","PXBAPI",15,0)
 ;+    "CPT"  prompts for the provider and then the procedures that 
"RTN","PXBAPI",16,0)
 ;+           the provider did.
"RTN","PXBAPI",17,0)
 ;+    "POV"  prompts for the diagnoses
"RTN","PXBAPI",18,0)
 ;+    "STP"  prompts for the stop codes
"RTN","PXBAPI",19,0)
 ;+----------
"RTN","PXBAPI",20,0)
 ;+  PACKAGE  Required, text string of the package name space
"RTN","PXBAPI",21,0)
 ;+             or a pointer to the Package file (#9.4)
"RTN","PXBAPI",22,0)
 ;+  SOURCE   Required, text string that discribes the source of the data.
"RTN","PXBAPI",23,0)
 ;+             This will be added to the PCE Data Source file (#839.7) if
"RTN","PXBAPI",24,0)
 ;+             it is not already in the file.
"RTN","PXBAPI",25,0)
 ;+  PXBVST   Required except for on "INTV" and "ADQ".
"RTN","PXBAPI",26,0)
 ;+             This is a pointer to the Visit file (#9000010)
"RTN","PXBAPI",27,0)
 ;+  PXBHLOC  Optional (passed if known) pointer to the Hospital
"RTN","PXBAPI",28,0)
 ;+             Location file (#44)
"RTN","PXBAPI",29,0)
 ;+  PXBPAT   Pointer to the Patient file (#2)
"RTN","PXBAPI",30,0)
 ;+             Required if there is no PXBVST and there is a PXBAPPT
"RTN","PXBAPI",31,0)
 ;+             otherwise it is Optional (passed if known) 
"RTN","PXBAPI",32,0)
 ;+  PXBAPPT  Optional (passed if known) pointer to the Apointment 
"RTN","PXBAPI",33,0)
 ;+             subfile (#2.98) of the Patient file (#2)
"RTN","PXBAPI",34,0)
 ;+  PXLIMDT  Optional if passed then user can not create an encounter
"RTN","PXBAPI",35,0)
 ;+             (Visit file entry) before this date.
"RTN","PXBAPI",36,0)
 ;+  PXALHLOC  Optional if is not passed, 0, or null then only clinics
"RTN","PXBAPI",37,0)
 ;+             can be entered for hospital locations otherwise
"RTN","PXBAPI",38,0)
 ;+             any non disposition hospital location can be entered.
"RTN","PXBAPI",39,0)
 ;+
"RTN","PXBAPI",40,0)
 ;+ Returns:
"RTN","PXBAPI",41,0)
 ;+  1   if no errors and process completely
"RTN","PXBAPI",42,0)
 ;+  0   if user up arrows out may have did part of the processing
"RTN","PXBAPI",43,0)
 ;+        but at least have a visit
"RTN","PXBAPI",44,0)
 ;+  -1  if user up arrows out or errors out and did not do anything
"RTN","PXBAPI",45,0)
 ;+  -2  if could not get a visit
"RTN","PXBAPI",46,0)
 ;+  -3  if called incorrectly
"RTN","PXBAPI",47,0)
 ;
"RTN","PXBAPI",48,0)
 ;---------------NEW CURSOR CONTROL VARIABLE-----------------------
"RTN","PXBAPI",49,0)
 N IOARM0,IOARM1,IOAWM0,IOAWM1,IOBOFF,IOBON,IOCOMMA,IOCUB,IOCUD,IOCUF
"RTN","PXBAPI",50,0)
 N IOCUON,IOCUOFF,IOCUU,IODCH,IODHLB,IODHLT,IODL,IODWL,IOECH,IOEDALL
"RTN","PXBAPI",51,0)
 N IOEDBOP,IOEDEOP,IOEFLD,IOELALL,IOELBOL,IOELEOL,IOENTER,IOFIND
"RTN","PXBAPI",52,0)
 N IOHDWN,IOHOME,IOHTS,IOHUP,IOICH,IOIL,IOIND,IOINHI,IOINLOW,IOINORM
"RTN","PXBAPI",53,0)
 N IOINSERT,IOKP0,IOKP1,IOKP2,IOKP3,IOKP4,IOKP5,IOKP6,IOKP7,IOKP8,IOKP9
"RTN","PXBAPI",54,0)
 N IOIRM0,IOIRM1,IOKPAM,IOKPNM,IOMC,IOMINUS,IONEL,IONEXTSC,IOPERIOD
"RTN","PXBAPI",55,0)
 N IOPF1,IOPF2,IOPF3,IOPF4,IOPREVSC,IOPROB,IOPTCH10,IOPTCH12,IOPTCH16
"RTN","PXBAPI",56,0)
 N IORC,IOREMOVE,IORESET,IORI,IORVOFF,IORVON,IOSC,IOSGR0,IOSELECT
"RTN","PXBAPI",57,0)
 N IOSTBM,IOSWL,IOTBC,IOTBCALL,IOUOFF,IOUON,IOIS
"RTN","PXBAPI",58,0)
 ;
"RTN","PXBAPI",59,0)
 ;------------------------*******----------------------------------
"RTN","PXBAPI",60,0)
 ; Fix IHS Patient files.
"RTN","PXBAPI",61,0)
 N PX,DA
"RTN","PXBAPI",62,0)
 S DA=DFN D
"RTN","PXBAPI",63,0)
 .D CHECK^PXXDPT Q:'$T
"RTN","PXBAPI",64,0)
 .S PX=$P($G(^DPT(DA,0)),U,9)
"RTN","PXBAPI",65,0)
 .D EN^PXXDPT
"RTN","PXBAPI",66,0)
 .K DR,DIE,DA,PXDA,PX
"RTN","PXBAPI",67,0)
 ;
"RTN","PXBAPI",68,0)
 D FIX1^PXBCC
"RTN","PXBAPI",69,0)
 N DIQ,TANA
"RTN","PXBAPI",70,0)
 N PXBPXXX S PXBPXXX="1^1" ;--PROMPTING CONTROL VARIABLE
"RTN","PXBAPI",71,0)
 ;
"RTN","PXBAPI",72,0)
 N PXBSOURC,PXBEXIT,PXBVSTDT,PXELAP,PXBCODT,PXB800,PXBPRBON,DFN
"RTN","PXBAPI",73,0)
 N PXBEXIT,PAT,ITEM,NF,POP,PXBCNTPL,Q,TEST,UID,PXBPKG
"RTN","PXBAPI",74,0)
 N VAL,VAR,PXBNCPTF,DXX,DYY
"RTN","PXBAPI",75,0)
 S PXBEXIT=1
"RTN","PXBAPI",76,0)
 ;
"RTN","PXBAPI",77,0)
 I $G(WHAT)']"" W !,"Procedure ""INTV^PXAPI"" was called incorrectly without a ""WHAT"", contact IRM." Q -3
"RTN","PXBAPI",78,0)
 I $G(PACKAGE)']"" W !,"Procedure ""INTV^PXAPI"" was called incorrectly without a ""PACKAGE"", contact IRM." Q -3
"RTN","PXBAPI",79,0)
 I $G(SOURCE)']"" W !,"Procedure ""INTV^PXAPI"" was called incorrectly without a ""SOURCE"", contact IRM." Q -3
"RTN","PXBAPI",80,0)
 ;Get package pointer
"RTN","PXBAPI",81,0)
 I PACKAGE=+PACKAGE S PXBPKG=PACKAGE
"RTN","PXBAPI",82,0)
 E  S PXBPKG=$$PKG2IEN^VSIT(PACKAGE)
"RTN","PXBAPI",83,0)
 I '($D(^DIC(9.4,PXBPKG,0))#2) W !,"Procedure ""INTV^PXAPI"" was called incorrectly without a valid ""PACKAGE"", contact IRM." Q -3
"RTN","PXBAPI",84,0)
 ;
"RTN","PXBAPI",85,0)
 ;Lookup source in PCE DATA SOURCE file (#839.7) with LAYGO
"RTN","PXBAPI",86,0)
 I SOURCE=+SOURCE S PXBSOURC=SOURCE
"RTN","PXBAPI",87,0)
 E  S PXBSOURC=$$SOURCE^PXAPIUTL(SOURCE)
"RTN","PXBAPI",88,0)
 ;
"RTN","PXBAPI",89,0)
 I PXBVST'>0,WHAT'="INTV"&(WHAT'="ADQ")&(WHAT'="ADDEDIT") W !,"Procedure ""INTV^PXAPI"" was called incorrectly without a ""VISIT"", contact IRM." Q -3
"RTN","PXBAPI",90,0)
 I PXBVST>0 D  Q:PXBEXIT<1 PXBEXIT
"RTN","PXBAPI",91,0)
 . S PXBVSTDT=$P(^AUPNVSIT(PXBVST,0),"^",1)
"RTN","PXBAPI",92,0)
 . I PXBPAT'>0 S PXBPAT=$P(^AUPNVSIT(PXBVST,0),"^",5)
"RTN","PXBAPI",93,0)
 . E  I PXBPAT'=$P(^AUPNVSIT(PXBVST,0),"^",5) W !,"Procedure ""INTV^PXAPI"" was called incorrectly with the Visit for a different Patient, contact IRM." S PXBEXIT=-3 Q
"RTN","PXBAPI",94,0)
 . I PXBHLOC'>0 S PXBHLOC=$P(^AUPNVSIT(PXBVST,0),"^",22)
"RTN","PXBAPI",95,0)
 . E  I PXBHLOC'=$P(^AUPNVSIT(PXBVST,0),"^",22) W !,"Procedure ""INTV^PXAPI"" was called incorrectly with the Visit for a different Hospital Locations, contact IRM." S PXBEXIT=-3 Q
"RTN","PXBAPI",96,0)
 . I PXBAPPT'>0 D
"RTN","PXBAPI",97,0)
 .. I $D(^DPT(PXBPAT,"S",PXBVSTDT,0))#2,PXBHLOC'>0!(PXBHLOC=+^DPT(PXBPAT,"S",PXBVSTDT,0)) S PXBAPPT=PXBVSTDT S:PXBHLOC'>0 PXBHLOC=+^DPT(PXBPAT,"S",PXBVSTDT,0)
"RTN","PXBAPI",98,0)
 . E  I '$D(^DPT(PXBPAT,"S",PXBVSTDT,0))#2!(PXBVSTDT'=PXBAPPT) W !,"Procedure ""INTV^PXAPI"" was called incorrectly with the Visit and Appointment of different times, contact IRM." S PXBEXIT=-3 Q
"RTN","PXBAPI",99,0)
 E  I PXBAPPT>0 D  Q:PXBEXIT<1 PXBEXIT
"RTN","PXBAPI",100,0)
 . I PXBPAT'>0 W !,"Procedure ""INTV^PXAPI"" was called incorrectly without a ""PATIENT"", contact IRM." S PXBEXIT=-3 Q
"RTN","PXBAPI",101,0)
 . S PXBVSTDT=PXBAPPT
"RTN","PXBAPI",102,0)
 . I PXBHLOC'>0,+$G(^DPT(PXBPAT,"S",PXBAPPT,0)) S PXBHLOC=+^DPT(PXBPAT,"S",PXBAPPT,0)
"RTN","PXBAPI",103,0)
 S DFN=PXBPAT
"RTN","PXBAPI",104,0)
 S PXBPRBON=$L($T(^GMPLUTL)) ;see if Problem List exists
"RTN","PXBAPI",105,0)
 ;+ If visit has been passed lock ^PXLCKUSR(VISIEN)
"RTN","PXBAPI",106,0)
 ;+ and create XTMP("PXLCKUSR",VISIEN)=DUZ
"RTN","PXBAPI",107,0)
 N PXRESVAL,PXVISIEN
"RTN","PXBAPI",108,0)
 I PXBVST>0 S PXVISIEN=PXBVST D  I 'PXRESVAL Q -2
"RTN","PXBAPI",109,0)
 .N PXMSG,PXUSR
"RTN","PXBAPI",110,0)
 .S PXMSG=""
"RTN","PXBAPI",111,0)
 .I $D(^XTMP("PXLCKUSR",PXVISIEN)) S PXUSR=$G(^VA(200,^XTMP("PXLCKUSR",PXVISIEN),0)),PXUSR=$S(PXUSR="":"Unknown",1:$P(PXUSR,"^")),PXMSG="Encounter Locked by "_PXUSR
"RTN","PXBAPI",112,0)
 .S PXRESVAL=$$LOCK^PXUALOCK("^PXLCKUSR("_PXVISIEN_")",5,0,PXMSG,0)
"RTN","PXBAPI",113,0)
 .I 'PXRESVAL Q
"RTN","PXBAPI",114,0)
 .S PXRESVAL=$$CREATE^PXUAXTMP("PXLCKUSR",PXVISIEN,365,"PCE Encounter Lock",DUZ) I 'PXRESVAL D UNLOCK^PXUALOCK("^PXLCKUSR("_PXVISIEN_")")
"RTN","PXBAPI",115,0)
 D PROCESS^PXBAPI1(.PXBEXIT)
"RTN","PXBAPI",116,0)
 W !,"  - - - - S o r r y   A b o u t   T h e   W a i t - - - -"
"RTN","PXBAPI",117,0)
 W !,"This information is being stored or monitored by Scheduling"
"RTN","PXBAPI",118,0)
 W !,"Integrated Billing, Order Entry, Registration, Prosthetics"
"RTN","PXBAPI",119,0)
 W !,"PCE/Visit Tracking and Automated Med Information Exchange."
"RTN","PXBAPI",120,0)
 D EVENT^PXKMAIN
"RTN","PXBAPI",121,0)
 K PXVDR
"RTN","PXBAPI",122,0)
 I $G(PXVISIEN)>0 D UNLOCK^PXUALOCK("^PXLCKUSR("_PXVISIEN_")"),DELETE^PXUAXTMP("PXLCKUSR",PXVISIEN)
"RTN","PXBAPI",123,0)
 Q PXBEXIT
"RTN","PXBAPI",124,0)
 ;
"VER")
8.0^22.0
"BLD",6288,6)
^SEQ #128
**END**
**END**

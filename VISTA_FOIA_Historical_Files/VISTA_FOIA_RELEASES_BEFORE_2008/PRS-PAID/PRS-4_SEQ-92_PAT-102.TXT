$TXT Created by DILL,MATT at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Thursday, 02/09/06 at 18:03
Run Date: MAR 30, 2006                     Designation: PRS*4*102
Package : PRS - PAID                          Priority: EMERGENCY
Version : 4        SEQ #92                      Status: Released
                  Compliance Date: MAR 31, 2006
=============================================================================

Associated patches: (v)PRS*4*52    <<= must be installed BEFORE `PRS*4*102'
                    (v)PRS*4*54    <<= must be installed BEFORE `PRS*4*102'
                    (v)PRS*4*69    <<= must be installed BEFORE `PRS*4*102'
                    (v)PRS*4*92    <<= must be installed BEFORE `PRS*4*102'
                    (v)PRS*4*96    <<= must be installed BEFORE `PRS*4*102'

Subject: CONVERSION TO DFAS RELEASE #1

Category: 
  - Routine
  - Enhancement ()

Description:
============

 This patch provides updates to the VistA PAID Enhanced Time and Attendance
 (ETA) software to implement three New Service Requests (NSR) and to fix
 three software defects that were discovered while working on the NSR(s).
 The faults and the NSR(s) are briefly described below, along with
 implementation details for each.
  
  
 1. Software Defect: Without Pay Affects Overtime in 8B String
  
 The option, Pay Period Certification, processes an employee timecard to 
 produce the 8B string to send to Austin through a process called 
 decomposition.  When a timecard has both Overtime (OT) and Leave Without
 Pay (WP), the decomposition processor has logic in place to reduce
 overtime if policy dictates that the WP negates the OT.  There are special
 cases when a timecard contains both Leave Without Pay (WP) and Overtime
 (OT) where the decomposition process will not reduce the OT.  These
 special cases arise when the WP is posted to a timecard day that is more
 than one day after a posting that is either posted as OT or posted as time
 that is eligible for OT.
  
 Per policy, when non-pay is encountered by the decomposition process, it 
 converts the earlier count of eligible OT back to Unscheduled Regular 
 time by an amount commensurate to the amount of WP.  When the OT is also 
 a special type of Overtime, such as Shift 2 (Overtime Total Hours-2), 
 then the Overtime was not correctly reduced.  This problem has been fixed.
  
 2. Software Defect: Calendar Year Adjustments are incorrect when the 
 last pay period of the year encompasses both December 31 and January 1, 
 and WP is posted for both dates.
  
 When an employee's timecard for the last pay period of the year is posted 
 with WP on both 12/31 and 1/1, the WP that occurred on 12/31 will be 
 inappropriately included in the calendar year adjustment totals.  These 
 totals can be seen in the option, Pay Period Certification [PRSA SUP REV],
 only when certifying the last pay period of the year, when these 
 adjustments actually occur.  They can also be seen at any time using the 
 standalone option, Decompose Time [PRSA PAY DECOMP], by selecting an 
 employee's timecard in the last pay period of a year in which the 
 timecard data is posted in the configuration, as stated above.
  
 3. Software Fault: Calendar Year Adjustments off when WP posted in 
 last pay period across years for tours with meals.
  
 The timecard decomposition software could underreport the calendar 
 year adjustment for Without Pay (8B string code CA) value by incorrectly
 reducing the value when another type of time is posted along with the
 Without Pay on a tour with a meal.  For example, if the beginning of the
 new year had a posting that contained annual leave and without pay on the
 same tour and the meal was covered by the annual leave, the software would
 incorrectly reduce the CA by the amount of meal time.  As with number two
 above, this problem is verifiable in the last pay period of the calendar
 year by using either option: Pay Period Certification [PRSA SUP REV] or
 the standalone option, Decompose Time [PRSA PAY DECOMP].
  
 4. SR 02-422 CT for firefighters
  
 When the Federal Firefighters Overtime Reform Act of 1998 was released
 (PRS*4.0*45), there was a missing software requirement related to CT
 earned after the 53 hour in the week barrier was exceeded.  This CT is
 currently being converted into OT for Code R and Code C firefighters.  The
 software is updated so that CT posted in excess of the 53 hour/week
 barrier remains as CT for Code R and Code C firefighters.  Modifications
 to the timecard decomposition software were necessary to address this
 issue.  That process is used by two PAID ETA options: Pay Period
 Certification [PRSA SUP REV] and Decompose Time [PRSA PAY DECOMP].
  
 This problem was first reported on NOIS BAC-0803-40298 and later detailed 
 in Service Request SR 02-422.
  
 5. SR 02-423 LWOP Surrounding Holidays
  
 The software has been enhanced to help prevent credit for Holiday Excused
 when an employee is in a non-pay status for the 15 minutes of their 
 scheduled tour, both immediately prior to and immediately after a
 holiday.  When this situation occurs, the Holiday Excused should be
 reported as non-pay and the software will automatically update the Holiday
 Excused posting(s) to the appropriate non-pay status, when the holiday and
 its surrounding non-pay duty days occur in the current pay period.
  
 If the holiday and its preceding duty day are in the prior pay period, 
 then the software examines the status of the timecard for the Holiday 
 Excused posting(s) that should be changed.  If the timecard has a status 
 of timekeeper, the software automatically posts the Holiday Excused 
 posting(s) with the appropriate form of non-pay.
  
 If the timecard does not have a status of timekeeper, the software
 notifies the timekeeper of the issue, without modifying the posting.
  
 The rules governing non-pay surrounding Holidays are as follows:
  
  -If the holiday is surrounded by LWOP, charge the holiday as LWOP
  
  -If the holiday is surrounded by NP, charge the holiday as NP
  
  -If the holiday is surrounded by LWOP and NP, the holiday should be 
   charged as NP.
  
  -If the employee works during an on-call period outside of their tour 
   posted as Holiday Excused and the time worked is adjacent to the
   start/stop time of the scheduled tour, the Holiday Excused is
   appropriate.
  
  -A Holiday Excused posting shall not be considered as encapsulated by 
   non-pay, if any portion of the holiday tour was posted as Holiday
   Worked.
  
 Adding a second tour of duty to a holiday automatically removes any 
 Holiday Excused posting(s).  For these situations the timekeeper will be 
 responsible for applying the rules and posting the holiday.
  
 The holiday encapsulation check is also performed when the supervisors 
 certify the timecards using the Pay Period Certification [PRSA SUP REV] 
 option.  If holiday encapsulation is found during this process, the 
 software will not attempt to change the Holiday Excused posting(s) but 
 will instead log an exception into the PRIOR PP EXCEPTIONS (#458.5) 
 file.  This exception will then be processed in the normal fashion.
  
 The following options are updated to report an exception when a Holiday
 Excused posting is considered to be encapsulated by a period of non pay.
  
   1.  Pay Period Certification         [PRSA SUP REV]
   2.  List Daily Exceptions            [PRSA TPE ONE-SUP]
   3.  List Daily Exceptions            [PRSA TPE ONE]
   4.  Display Pay Period Exceptions    [PRSA TPE ALL-SUP]
   5.  Display Pay Period Exceptions    [PRSA TPE ALL]
   6.  List Prior Pay Period Exceptions [PRSA SUP PPE]
   7.  Display Employee Pay Period      [PRSA TPD PP]
   8.  Display Employee Pay Period      [PRSA PE DISP]
   9.  Display Employee Pay Period      [PRSA TPD PP-SUP]
  
 An example of the new exception message follows:
  
 HX was encapsulated by non-pay
  
 6. SR 05-866 OT for PT Employees
  
 This patch modifies the software to appropriately calculate overtime for
 part-time employees per the clarified business rules.  The major changes
 are:
  
 a. Revision of rules that determine how time posted on a timecard as
 Unscheduled Regular (RG), Comp Time earned (CT), and Overtime (OT) is
 decomposed and reported on the 8B string that is sent to Austin.  The
 rules apply to both compressed and non compressed tours.  Note that for a
 part-time employee, if the time is both greater than 8 in a day and also
 greater than 40 in a week (or 80 in a pay period), it will now be reported
 on the 8B as Regular OT (OA/OE) instead of being reported as Hours Excess 
 8 Day (DA/DE).
  
 Here is a chart of how the ETA decomposition software will treat hours
 worked in excess of the basic work requirement for part-time employees.
 (Note that the chart does not cover all possible results such as holiday
 OT).
  
  
  work performed in excess of     8B     Description
  basic work requirement is       CODES
  ------------------------------  -----  -------------------
  <8/day and <40/week and <80/pp  UN/US  Unscheduled Regular
  >8/day and <40/week and <80/pp  DA/DE  Hours Excess 8
  >40/week or >80/pp              OA/OE  Regular OT
  
 Hours in a day are counted from midnight to midnight.
  
 Basic work requirement hours (tour) posted as non pay (NP or WP) are
 included when checking for 8 hours in a day, but they are not included
 when checking for 40 hours in a week or 80 hours in a pay period.
  
 Work performed in excess of the basic work requirement (RG, OT, CT) that
 exceeds 8 hours in a day is not included when checking for 40 hours in a
 week or 80 hours in a pay period.
  
 Comp Time earned that is posted on a timecard will be retained if it is
 eligible to be overtime (DA/DE or OA/OE).  If the comp time earned is
 not eligible to be overtime, then it will be converted to Unscheduled
 Regular.
  
 b. Regular Hours @ Overtime Rate shall only be eligible for reporting on
 the 8B string for firefighters.  All employees other than firefighters who
 used to be entitled to Regular Hours @ Overtime Rate (RA/RE) shall now be 
 entitled to Hours Excess 8 Day (DA/DE).
  
 In addition, for full-time employees who are eligible for both DA/DE and 
 OA/OE, overtime that is both greater than 8/day and greater than 40/week 
 is preferentially reported using Hours Excess 8 (DA/DE).
  
 The edit checks have been updated to address the new business rules
 and entitlement table changes.  These checks are accessible under the 8B 
 Edit Checks [PRSA EDIT] option on the Payroll Supervisor menu.
  
  
 This patch addresses the following New Service Request(s) NSR(s):
 -----------------------------------------------------------------
 1.     SR 02-422  CT for Firefighters
 2.     SR 02-423  LWOP on Holidays
 3.     SR 05-866  PT Emp Entitlements when Working over Sch Tour
  
  
 This patch addresses the following Remedy Ticket(s):
 ----------------------------------------------------
 HD0000000055410 Problem with Fire fighter's time cards
  
  
 Components Sent With Patch
 --------------------------
  
   The following is a list of the routines included in this patch:
   ---------------------------------------------------------------
   The second line of each of these routines now looks like:
  
       ;;4.0;PAID;**[patch list]**;Sep 21, 1995
  
                         CHECK^XTSUMBLD results
  
    Routine name    Before Patch    After Patch    Patch List
    ------------    ------------    -----------    ----------
    PRS8HR          6724241         6946829        2,22,29,42,52,102
    PRS8HROT        4897381         1578802        29,42,52,102
    PRS8HRSV        9210558         7764848        29,52,102
    PRS8MT          10599406        10609375       2,40,69,102
    PRS8OTFF        2633120         2853258        45,54,102
    PRS8ST          8792564         9113099        45,92,102
    PRSACED3        4256741         4132299        35,45,75,92,96,102
    PRSACED5        3607550         3557358        102
    PRSATP          10847378        11006699       22,57,69,92,102
    PRSATP3           n/a           4527159        102
    PRSATP4           n/a           829188         102
    PRSATP5           n/a           6679319        102
    PRSATP6           n/a           1913596        102
    PRSATP7           n/a           1889390        102
    PRSATP8           n/a           5514084        102
    PRSATPE         7470608         7732057        26,34,69,102
  
  
                    Total number of routines: 16
                          Modified  routines: 10
                                New Routines:  6 
  
  
  
                         CHECK1^XTSUMBLD results
  
    Routine name    Before Patch    After Patch    Patch List
    ------------    ------------    -----------    ----------
    PRS8HR          42037579        41812105       2,22,29,42,52,102
    PRS8HROT        14293499        3467629        29,42,52,102
    PRS8HRSV        41325666        37540189       29,52,102
    PRS8MT          24808382        24828322       2,40,69,102
    PRS8OTFF        11924315        12536879       45,54,102
    PRS8ST          23489648        26297736       45,92,102
    PRSACED3        13311294        12520973       35,45,75,92,96,102
    PRSACED5        6236995         6094695        102
    PRSATP          18733186        19887527       22,57,69,92,102
    PRSATP3           n/a           18838641       102
    PRSATP4           n/a           2434017        102
    PRSATP5           n/a           28158534       102
    PRSATP6           n/a           5009394        102
    PRSATP7           n/a           4880229        102
    PRSATP8           n/a           23114322       102
    PRSATPE         21699129        24687644       26,34,69,102
  
  
                    Total number of routines: 16
                          Modified  routines: 10
                                New Routines:  6 
  
 The following is a list of files included in this patch:
  
                                     UP    SEND  DATA                USER
                                     DATE  SEC.  COMES  SITE   RSLV  OVER
 FILE #   NAME                       DD    CODE  W/FILE DATA   PTS   RIDE
 ------------------------------------------------------------------------
 457.5    PAY ENTITLEMENT            NO    NO    YES    OVER   NO    NO
 455.1       8B ERROR MESSAGE        NO    NO    YES    REPL   NO    NO
   DD SCREEN  :
   DATA SCREEN: I $P($G(^PRST(455.1,Y,0)),"^",1)=143
  
  
  
 Test Sites:
 -----------
 Black Hills HCS
 San Francisco
 VISN2
  
  
  
  
 ==================== INSTALLATION INSTRUCTIONS ======================
  
 If installed during the normal workday, it is recommended that the
 following selection(s) in the OPTION (#19) file, and all of their
 descendants be disabled to prevent possible conflicts while running the
 KIDS Install. Other VISTA users will not be affected.
  
   Open Next Pay Period                   [PRSA PP OPEN]
   Pay Period Certification               [PRSA SUP REV]
   Enter/Edit Employee Tour of Duty       [PRSA TK TOUR-EDIT]
   Create Employee Record for Pay Period  [PRSA PP EMP]
   List Daily Exceptions                  [PRSA TPE ONE]
   List Daily Exceptions                  [PRSA TPE ONE-SUP]
   Display Pay Period Exceptions          [PRSA TPE ALL]
   Display Pay Period Exceptions          [PRSA TPE ALL-SUP]
   List Prior Pay Period Exceptions       [PRSA SUP PPE]
   8B Edit Checks                         [PRSA EDIT]
  
 Install Time - Less than 5 minutes.
  
 1.  LOAD TRANSPORT GLOBAL
     ---------------------
     Choose the PackMan message containing this patch and invoke the
     INSTALL/CHECK MESSAGE PackMan option.
  
 2.  START UP KIDS
     -------------
     Start up the Kernel Installation and Distribution System Menu
     [XPD MAIN]:
  
          Edits and Distribution ...
          Utilities ...
          Installation ...
  
     Select Kernel Installation & Distribution System Option: INStallation
                                                              ---
          Load a Distribution
          Print Transport Global
          Compare Transport Global to Current System
          Verify Checksums in Transport Global
          Install Package(s)
          Restart Install of Package(s)
          Unload a Distribution
          Backup a Transport Global
  
 3.  Select Installation Option:
     ---------------------------
     NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
            NAME, enter PRS*4.0*102):
  
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with this patch. It will not
         backup any other changes such as DD's or templates.
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when this patch
         is installed.  It compares all components of this patch
     c.  Verify Checksums in Transport Global - This option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
  
 4.  Select Installation Option: Install Package(s)
                                 ------------------
     **This is the step to start the installation of this KIDS patch:
  
     a.  Choose the Install Package(s) option to start the patch install.
     b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
         YES//' answer NO.
     c.  When prompted 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols? YES//' answer YES.
     d.  When prompted 'Enter options you wish to mark as 'Out Of Order':'
         Enter the following options:
  
            Open Next Pay Period                   [PRSA PP OPEN]
            Pay Period Certification               [PRSA SUP REV]
            Enter/Edit Employee Tour of Duty       [PRSA TK TOUR-EDIT]
            Create Employee Record for Pay Period  [PRSA PP EMP]
            List Daily Exceptions                  [PRSA TPE ONE]
            List Daily Exceptions                  [PRSA TPE ONE-SUP]
            Display Pay Period Exceptions          [PRSA TPE ALL]
            Display Pay Period Exceptions          [PRSA TPE ALL-SUP]
            List Prior Pay Period Exceptions       [PRSA SUP PPE]
            8B Edit Checks                         [PRSA EDIT]
  
     e.  When prompted 'Enter protocols you wish to mark as 'Out Of
         Order':' press <return>.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PRS8HR
    Before: B42037579  After: B41812105  **2,22,29,42,52,102**
 Description of Changes:
  VA Policy has determined that non-pay occurring on a day with a scheduled 
  tour of duty should not be considered in whether the employee has reached 
  the 8 hour/day limit.  The existing code that prevented non-pay from 
  being added to the hours worked in the day count has been removed.
   
  The rules governing when an employee qualifies for Overtime have been 
  standardized and will now be the same regardless of whether the employee 
  works a compressed scheduled or not.  The software has been updated to 
  apply the 8 hrs/day 40 hrs/wk and 80 hrs/pp rules to all employees.

Routine Name: PRS8HROT
    Before: B14293499  After:  B3467629  **29,42,52,102**
 Description of Changes:
  The code that reduced OA/OE when "Wn" was encountered became obsolete and 
  was removed.  TH and TH() will already reflect any without pay and non pay
  when business rules are applied for overtime so there is no need to
  attempt an adjustment when "W" or "n" is encountered.

Routine Name: PRS8HRSV
    Before: B41325666  After: B37540189  **29,52,102**
 Description of Changes:
  The rules governing when an employee qualifies for Overtime have been 
  standardized and will now be the same regardless of whether the employee 
  works a compressed scheduled or not.  The software has been updated to 
  apply the 8 hrs/day 40 hrs/wk and 80 hrs/pp rules to all employees.
   
  OT hours greater than 8/day but less than 40/wk and 80/pp will no longer 
  be counted in TH and TH(W).

Routine Name: PRS8MT
    Before: B24808382  After: B24828322  **2,40,69,102**
 Description of Changes:
  WPCYA and CYA2806 calculations were moved from the 1st day loop to the 
  2nd day loop.  This made the code in routine PRS8MT that adjusted these 
  counts when meal time was placed obsolete and they were removed.  This 
  change fixed an existing fault with the logic in PRS8MT because it 
  inappropriately reduces the count of WPCYA when some other times besides 
  "W" were replaced by a meal.

Routine Name: PRS8OTFF
    Before: B11924315  After: B12536879  **45,54,102**
 Description of Changes:
  This routine was updated so that hours posted as CT after the 53 
  hour/week barrier remain as CT and are not converted into OT.

Routine Name: PRS8ST
    Before: B23489648  After: B26297736  **45,92,102**
 Description of Changes:
  A second day loop was established and some functions were moved into the
  new loop.  The primary purpose was to have TH, and TH() reflect any
  without pay and non pay during the entire pay period (adjusted during 1st
  day loop) before the premium pay is determined (call to PRS8PP now in
  second day loop) so the business rules for overtime can be applied.

Routine Name: PRSACED3
    Before: B13311294  After: B12520973  **35,45,75,92,96,102**
 Description of Changes:
  Pay Plan K and M were added to edit check 143.
   
  Errors 144, 146 and 148 were removed as FLSA Exempt employees are now 
  eligible to receive the various forms of Hours Excess 8 Day overtime 
  (DA/DE, DB/DF, DC/DG).

Routine Name: PRSACED5
    Before:  B6236995  After:  B6094695  **102**
 Description of Changes:
  Error message 170 was removed.

Routine Name: PRSATP
    Before: B18733186  After: B19887527  **22,57,69,92,102**
 Description of Changes:
  This routine was updated to call PRSATP3 to perform the necessary checks 
  for holiday encapsulation.

Routine Name: PRSATP3
    Before:            After: B18838641  **102**
 Description of Changes:
  A new routine that contains all of the necessary checks for holiday 
  encapsulation and will update the HX postings to the appropriate form of 
  non-pay when possible.  If the HX postings can't be updated due to the 
  timecard being in a status other than timekeeper, an appropriate message 
  will be displayed to the user.  This routine is called from the 
  Timekeeper's Post Employee Time option.

Routine Name: PRSATP4
    Before:            After:  B2434017  **102**
 Description of Changes:
  A new routine that is called from the Supervisor's Pay Period 
  Certification option that contains all of the necessary checks for 
  holiday encapsulation.  If a holiday is found to be encapsulated by 
  non-pay an appropriate message will be displayed and an entry with the 
  appropriate information will be added to the PRIOR PP EXCEPTIONS (#458.5) 
  file.

Routine Name: PRSATP5
    Before:            After: B28158534  **102**
 Description of Changes:
  A new routine that contains utilities used by PRSATP3 and PRSATP4.

Routine Name: PRSATP6
    Before:            After:  B5009394  **102**
 Description of Changes:
  A new routine that contains utilities used by PRSATP3 and PRSATP4.

Routine Name: PRSATP7
    Before:            After:  B4880229  **102**
 Description of Changes:
  A new routine that contains utilities used by PRSATP3 and PRSATP4.

Routine Name: PRSATP8
    Before:            After: B23114322  **102**
 Description of Changes:
  A new routine that contains utilities used by PRSATP3 and PRSATP4.

Routine Name: PRSATPE
    Before: B21699129  After: B24687644  **26,34,69,102**
 Description of Changes:
  This routine was updated to include the necessary checks and information 
  to add an entry into the PRIOR PP EXCEPTIONS (#458.5) file when a holiday 
  encapsulated by non-pay was found during the pay period certification 
  process.


=============================================================================
User Information:
Entered By  : DILL,MATT                     Date Entered  : AUG 31, 2005
Completed By: ROBBINS,BRADLEY               Date Completed: MAR 30, 2006
Released By : MCCLARAN,PAM                  Date Released : MAR 30, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

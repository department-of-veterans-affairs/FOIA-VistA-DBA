Released GMRV*4*11 SEQ #11
Extracted from mail message
**KIDS**:GMRV*4.0*11^

**INSTALL NAME**
GMRV*4.0*11
"BLD",1801,0)
GMRV*4.0*11^GEN. MED. REC. - VITALS^0^2990627^y
"BLD",1801,1,0)
^^1^1^2990503^
"BLD",1801,1,1,0)
Refer to the patch description.
"BLD",1801,4,0)
^9.64PA^120.51^1
"BLD",1801,4,120.51,0)
120.51
"BLD",1801,4,120.51,222)
y^n^f^^n^^y^o^n
"BLD",1801,4,"B",120.51,120.51)

"BLD",1801,"INIT")
GMRVPS11
"BLD",1801,"KRN",0)
^9.67PA^19^18
"BLD",1801,"KRN",.4,0)
.4
"BLD",1801,"KRN",.401,0)
.401
"BLD",1801,"KRN",.402,0)
.402
"BLD",1801,"KRN",.403,0)
.403
"BLD",1801,"KRN",.5,0)
.5
"BLD",1801,"KRN",.84,0)
.84
"BLD",1801,"KRN",3.6,0)
3.6
"BLD",1801,"KRN",3.8,0)
3.8
"BLD",1801,"KRN",9.2,0)
9.2
"BLD",1801,"KRN",9.8,0)
9.8
"BLD",1801,"KRN",9.8,"NM",0)
^9.68A^31^29
"BLD",1801,"KRN",9.8,"NM",1,0)
GMRVBP0^^0^B12550476
"BLD",1801,"KRN",9.8,"NM",2,0)
GMRVDS0^^0^B20474644
"BLD",1801,"KRN",9.8,"NM",3,0)
GMRVDS2^^0^B5343669
"BLD",1801,"KRN",9.8,"NM",4,0)
GMRVED1^^0^B31601118
"BLD",1801,"KRN",9.8,"NM",5,0)
GMRVED3^^0^B35885901
"BLD",1801,"KRN",9.8,"NM",6,0)
GMRVED4^^0^B27265623
"BLD",1801,"KRN",9.8,"NM",7,0)
GMRVEE0^^0^B30629717
"BLD",1801,"KRN",9.8,"NM",8,0)
GMRVER1^^0^B29426521
"BLD",1801,"KRN",9.8,"NM",9,0)
GMRVGR0^^0^B15526665
"BLD",1801,"KRN",9.8,"NM",10,0)
GMRVGR1^^0^B34450574
"BLD",1801,"KRN",9.8,"NM",13,0)
GMRVHG0^^0^B14700905
"BLD",1801,"KRN",9.8,"NM",14,0)
GMRVHG4^^0^B18783049
"BLD",1801,"KRN",9.8,"NM",15,0)
GMRVHPO0^^0^B13954180
"BLD",1801,"KRN",9.8,"NM",16,0)
GMRVHPO3^^0^B8461376
"BLD",1801,"KRN",9.8,"NM",17,0)
GMRVKPO0^^0^B14836490
"BLD",1801,"KRN",9.8,"NM",18,0)
GMRVQUAL^^0^B29724422
"BLD",1801,"KRN",9.8,"NM",19,0)
GMRVSC0^^0^B24203413
"BLD",1801,"KRN",9.8,"NM",20,0)
GMRVSC2^^0^B15770268
"BLD",1801,"KRN",9.8,"NM",21,0)
GMRVUT1^^0^B22116684
"BLD",1801,"KRN",9.8,"NM",22,0)
GMRVLPO0^^0^B15990265
"BLD",1801,"KRN",9.8,"NM",23,0)
GMRVSR0^^0^B34252648
"BLD",1801,"KRN",9.8,"NM",24,0)
GMRVVS4^^0^B6150163
"BLD",1801,"KRN",9.8,"NM",25,0)
GMRVEE2^^0^B26733608
"BLD",1801,"KRN",9.8,"NM",26,0)
GMRVUT3^^0^B14442010
"BLD",1801,"KRN",9.8,"NM",27,0)
GMRVPS11^^0^B2929382
"BLD",1801,"KRN",9.8,"NM",28,0)
GMRVVS1^^0^B25918331
"BLD",1801,"KRN",9.8,"NM",29,0)
GMRVSAS0^^0^B3926198
"BLD",1801,"KRN",9.8,"NM",30,0)
GMRVLPO2^^0^B8108643
"BLD",1801,"KRN",9.8,"NM",31,0)
GMRVKPO1^^0^B7375012
"BLD",1801,"KRN",9.8,"NM","B","GMRVBP0",1)

"BLD",1801,"KRN",9.8,"NM","B","GMRVDS0",2)

"BLD",1801,"KRN",9.8,"NM","B","GMRVDS2",3)

"BLD",1801,"KRN",9.8,"NM","B","GMRVED1",4)

"BLD",1801,"KRN",9.8,"NM","B","GMRVED3",5)

"BLD",1801,"KRN",9.8,"NM","B","GMRVED4",6)

"BLD",1801,"KRN",9.8,"NM","B","GMRVEE0",7)

"BLD",1801,"KRN",9.8,"NM","B","GMRVEE2",25)

"BLD",1801,"KRN",9.8,"NM","B","GMRVER1",8)

"BLD",1801,"KRN",9.8,"NM","B","GMRVGR0",9)

"BLD",1801,"KRN",9.8,"NM","B","GMRVGR1",10)

"BLD",1801,"KRN",9.8,"NM","B","GMRVHG0",13)

"BLD",1801,"KRN",9.8,"NM","B","GMRVHG4",14)

"BLD",1801,"KRN",9.8,"NM","B","GMRVHPO0",15)

"BLD",1801,"KRN",9.8,"NM","B","GMRVHPO3",16)

"BLD",1801,"KRN",9.8,"NM","B","GMRVKPO0",17)

"BLD",1801,"KRN",9.8,"NM","B","GMRVKPO1",31)

"BLD",1801,"KRN",9.8,"NM","B","GMRVLPO0",22)

"BLD",1801,"KRN",9.8,"NM","B","GMRVLPO2",30)

"BLD",1801,"KRN",9.8,"NM","B","GMRVPS11",27)

"BLD",1801,"KRN",9.8,"NM","B","GMRVQUAL",18)

"BLD",1801,"KRN",9.8,"NM","B","GMRVSAS0",29)

"BLD",1801,"KRN",9.8,"NM","B","GMRVSC0",19)

"BLD",1801,"KRN",9.8,"NM","B","GMRVSC2",20)

"BLD",1801,"KRN",9.8,"NM","B","GMRVSR0",23)

"BLD",1801,"KRN",9.8,"NM","B","GMRVUT1",21)

"BLD",1801,"KRN",9.8,"NM","B","GMRVUT3",26)

"BLD",1801,"KRN",9.8,"NM","B","GMRVVS1",28)

"BLD",1801,"KRN",9.8,"NM","B","GMRVVS4",24)

"BLD",1801,"KRN",19,0)
19
"BLD",1801,"KRN",19.1,0)
19.1
"BLD",1801,"KRN",101,0)
101
"BLD",1801,"KRN",409.61,0)
409.61
"BLD",1801,"KRN",771,0)
771
"BLD",1801,"KRN",869.2,0)
869.2
"BLD",1801,"KRN",870,0)
870
"BLD",1801,"KRN",8994,0)
8994
"BLD",1801,"KRN","B",.4,.4)

"BLD",1801,"KRN","B",.401,.401)

"BLD",1801,"KRN","B",.402,.402)

"BLD",1801,"KRN","B",.403,.403)

"BLD",1801,"KRN","B",.5,.5)

"BLD",1801,"KRN","B",.84,.84)

"BLD",1801,"KRN","B",3.6,3.6)

"BLD",1801,"KRN","B",3.8,3.8)

"BLD",1801,"KRN","B",9.2,9.2)

"BLD",1801,"KRN","B",9.8,9.8)

"BLD",1801,"KRN","B",19,19)

"BLD",1801,"KRN","B",19.1,19.1)

"BLD",1801,"KRN","B",101,101)

"BLD",1801,"KRN","B",409.61,409.61)

"BLD",1801,"KRN","B",771,771)

"BLD",1801,"KRN","B",869.2,869.2)

"BLD",1801,"KRN","B",870,870)

"BLD",1801,"KRN","B",8994,8994)

"BLD",1801,"QUES",0)
^9.62^^
"BLD",1801,"REQB",0)
^9.611^1^1
"BLD",1801,"REQB",1,0)
GMRV*4.0*9^2
"BLD",1801,"REQB","B","GMRV*4.0*9",1)

"DATA",120.51,1,0)
BLOOD PRESSURE^BP^0^1^1^GMRV-BLOOD PRESSURE RATE HELP^BP
"DATA",120.51,1,1)
I '("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) K:X'?2.3N0.1"/"0.3N0.1"/"0.3N&(X'?2.3N0.1"/"0.3N) X I $D(X),X>0 K:$P(X,"/",1)>300!($P(X,"/",2)>300)!(+$P(X,"/",3)>300) X I $D(X),$P(X,"/")'>$P(X,"/",$L(X,"/")) K X
"DATA",120.51,2,0)
TEMPERATURE^T^1^1^0^GMRV-TEMPERATURE RATE HELP^TMP
"DATA",120.51,2,1)
K:(+X'=X!(X>120)!(X<0)!(X?.E1"."3N.N))&'("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) X I $D(X),X>0 S:X<45 X=$J(+X*(9/5)+32,0,1)
"DATA",120.51,3,0)
RESPIRATION^R^0^1^0^GMRV-RESPIRATION RATE HELP^RS
"DATA",120.51,3,1)
K:(+X'=X!(X>100)!(X<0)!(X?.E1"."1N.N))&'("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) X
"DATA",120.51,5,0)
PULSE^P^1^1^0^GMRV-PULSE RATE HELP^PU
"DATA",120.51,5,1)
K:(+X'=X!(X>300)!(X<0)!(X?.E1"."1N.N))&'("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) X
"DATA",120.51,8,0)
HEIGHT^HT^0^1^0^GMRV-HEIGHT RATE HELP^HT
"DATA",120.51,8,1)
D EN3^GMRVUT0 K:X=0!(X>100)!(X<1) X
"DATA",120.51,9,0)
WEIGHT^WT^0^1^0^GMRV-WEIGHT RATE HELP^WT
"DATA",120.51,9,1)
I '("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) S GMR=$E($P(X,+X,2)) S X=$S(GMR="":0,"Kk"[GMR:+$J(2.2*(+X),0,2),"Ll"[GMR:+X,1:0) K:X>1500!(X=0)!(X<0) X K GMR
"DATA",120.51,10,0)
ABDOMINAL GIRTH^AG^0^1^0^^AG
"DATA",120.51,10,1)
K:'$$VALID^GMRVPCE3("AG",X) X
"DATA",120.51,11,0)
AUDIOMETRY^AUD^0^1^0^^AUD
"DATA",120.51,11,1)
K:'$$VALID^GMRVPCE3("AUD",X) X
"DATA",120.51,12,0)
FUNDAL HEIGHT^FH^0^1^0^^FH
"DATA",120.51,12,1)
K:'$$VALID^GMRVPCE3("FH",X) X
"DATA",120.51,13,0)
FETAL HEART TONES^FT^0^1^0^^FT
"DATA",120.51,13,1)
K:'$$VALID^GMRVPCE3("FT",X) X
"DATA",120.51,14,0)
HEAD CIRCUMFERENCE^HC^0^1^0^^HC
"DATA",120.51,14,1)
K:'$$VALID^GMRVPCE3("HC",X) X
"DATA",120.51,15,0)
HEARING^HE^0^1^0^^HE
"DATA",120.51,15,1)
K:'$$VALID^GMRVPCE3("HE",X) X
"DATA",120.51,16,0)
TONOMETRY^TON^0^1^0^^TON
"DATA",120.51,16,1)
K:'$$VALID^GMRVPCE3("TON",X) X
"DATA",120.51,17,0)
VISION CORRECTED^VC^0^1^0^^VC
"DATA",120.51,17,1)
K:'$$VALID^GMRVPCE3("VC",X) X
"DATA",120.51,18,0)
VISION UNCORRECTED^VU^0^1^0^^VU
"DATA",120.51,18,1)
K:'$$VALID^GMRVPCE3("VU",X) X
"DATA",120.51,19,0)
CENTRAL VENOUS PRESSURE^CVP^^1^^GMRV-CVP RATE HELP
"DATA",120.51,19,1)
D CVP^GMRVUT3
"DATA",120.51,20,0)
CIRCUMFERENCE/GIRTH^CG^^1^^GMRV-CIRCUM/GIRTH RATE HELP
"DATA",120.51,20,1)
D GIRTH^GMRVUT3
"DATA",120.51,21,0)
PULSE OXIMETRY^PO2^^1^^GMRV-PO2 RATE HELP
"DATA",120.51,21,1)
K:(X<0!(X>100))!(X=0&'("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X))) X
"DATA",120.51,22,0)
PAIN^PN^^1^^GMRV-PAIN RATE HELP^PN
"DATA",120.51,22,1)
I '("UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)) K:(+X'=X!(X>10&(X'=99))!(X<0)) X
"FIA",120.51)
GMRV VITAL TYPE
"FIA",120.51,0)
^GMRD(120.51,
"FIA",120.51,0,0)
120.51I
"FIA",120.51,0,1)
y^n^f^^n^^y^o^n
"FIA",120.51,0,10)

"FIA",120.51,0,11)

"FIA",120.51,0,"RLRO")

"FIA",120.51,0,"VR")
4.0^GMRV
"FIA",120.51,120.51)
0
"INIT")
GMRVPS11
"MBREQ")
0
"PKG",44,-1)
1^1
"PKG",44,0)
GEN. MED. REC. - VITALS^GMRV^Vitals/Measurements Module of General Medical Record.
"PKG",44,20,0)
^9.402P^^
"PKG",44,22,0)
^9.49I^1^1
"PKG",44,22,1,0)
4.0^2970425^2970702^64
"PKG",44,22,1,"PAH",1,0)
11^2990627
"PKG",44,22,1,"PAH",1,1,0)
^^1^1^2990627
"PKG",44,22,1,"PAH",1,1,1,0)
Refer to the patch description.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
29
"RTN","GMRVBP0")
0^1^B12550476
"RTN","GMRVBP0",1,0)
GMRVBP0 ;HIRMFO/YH-KYOCERA B/P GRAPH - STORE DATA IN ^TMP($J) ;5/24/99  12:40
"RTN","GMRVBP0",2,0)
 ;;4.0;Vitals/Measurements;**1,11**;Apr 25, 1997
"RTN","GMRVBP0",3,0)
EN1 ;
"RTN","GMRVBP0",4,0)
 N GAPICAL,GRADIAL,GBRACHI S GAPICAL=$O(^GMRD(120.52,"B","APICAL",0)),GRADIAL=$O(^GMRD(120.52,"B","RADIAL",0)),GBRACHI=$O(^GMRD(120.52,"B","BRACHIAL",0))
"RTN","GMRVBP0",5,0)
 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMRVBP0",6,0)
 S GMROUT=0,(^TMP($J,"GMRK","G82M"),^TMP($J,"GMRK","G210M"),^TMP($J,"GMRK","G226M"))=0.6
"RTN","GMRVBP0",7,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMRVBP0",8,0)
 F GTYPE="B","P" D SETT
"RTN","GMRVBP0",9,0)
 U IO D ^GMRVBP1
"RTN","GMRVBP0",10,0)
Q1 D Q1^GMRVGR0
"RTN","GMRVBP0",11,0)
 Q
"RTN","GMRVBP0",12,0)
SETT ;
"RTN","GMRVBP0",13,0)
 S GTYPE(1)=$S(GTYPE="B":"BLOOD PRESSURE",GTYPE="P":"PULSE",1:"") Q:GTYPE(1)
"RTN","GMRVBP0",14,0)
 S GTYP=$O(^GMRD(120.51,"B",GTYPE(1),0)) Q:GTYP'>0
"RTN","GMRVBP0",15,0)
 F GX=GSTART1:0 S GX=$O(^GMR(120.5,"AA",DFN,GTYP,GX)) Q:GX>GEND1!(GX'>0)  F GEN=0:0 S GEN=$O(^GMR(120.5,"AA",DFN,GTYP,GX,GEN)) Q:GEN'>0  I '$D(^GMR(120.5,GEN,2)) D BLDARR
"RTN","GMRVBP0",16,0)
 Q
"RTN","GMRVBP0",17,0)
BLDARR S GDATA=$G(^GMR(120.5,GEN,0)) Q:GDATA=""
"RTN","GMRVBP0",18,0)
 S GMRVX=GTYPE,GMRVX(0)=$P(GDATA,"^",8),GMRVX(1)=0 D:GMRVX(0)>0!(GMRVX(0)="0") EN1^GMRVSAS0
"RTN","GMRVBP0",19,0)
 K GMRVARY S GMRVARY="" I $P($G(^GMR(120.5,GEN,5,0)),"^",4)>0 D CHAR^GMRVCHAR(GEN,.GMRVARY,GTYP)
"RTN","GMRVBP0",20,0)
 K GG S GG="" I $O(GMRVARY(0)) D
"RTN","GMRVBP0",21,0)
 . S GG(1)=0 F  S GG(1)=$O(GMRVARY(GG(1))) Q:GG(1)'>0  S GG(2)=0 F  S GG(2)=$O(GMRVARY(GG(1),GG(2))) Q:GG(2)'>0  S GG(3)="" F  S GG(3)=$O(GMRVARY(GG(1),GG(2),GG(3))) Q:GG(3)=""  S GG=GG_$S(GG="":"",1:";")_GG(3)
"RTN","GMRVBP0",22,0)
 S GDATA(1)=GG_"^"_$S($G(GMRVX(1))>0:1,1:"")_"^"
"RTN","GMRVBP0",23,0)
 I GTYPE="P" D  Q
"RTN","GMRVBP0",24,0)
 . I '$D(^GMR(120.5,GEN,5,"B")) S ^TMP($J,"GMRVG",GTYPE,9999999-GX,GMRVX(0))=GDATA(1) Q
"RTN","GMRVBP0",25,0)
 . I $D(^GMR(120.5,GEN,5,"B",GBRACHI)) S ^TMP($J,"GMRVG",GTYPE,9999999-GX,GMRVX(0))=GDATA(1) Q
"RTN","GMRVBP0",26,0)
 . I $D(^GMR(120.5,GEN,5,"B",GAPICAL)) S ^TMP($J,"GMRVG",GTYPE,9999999-GX,GMRVX(0))=GDATA(1) Q
"RTN","GMRVBP0",27,0)
 . I $D(^GMR(120.5,GEN,5,"B",GRADIAL)) S ^TMP($J,"GMRVG",GTYPE,9999999-GX,GMRVX(0))=GDATA(1) Q
"RTN","GMRVBP0",28,0)
 I GMRVX(0)>0 S ^TMP($J,"GMRVG","S",9999999-GX,$P(GMRVX(0),"/"))=$S($P(GMRVX(0),"/")<$P(^GMRD(120.57,1,1),"^",7)&($P(GMRVX(0),"/")>$P(^(1),"^",9)):"",1:"^1^")
"RTN","GMRVBP0",29,0)
 I $P($G(GMRVX(0)),"/",3)'="" D
"RTN","GMRVBP0",30,0)
 . S ^TMP($J,"GMRVG","B",9999999-GX,$P(GMRVX(0),"/",1,2))=GDATA(1) S ^TMP($J,"GMRVG","C",9999999-GX,"/"_$P(GMRVX(0),"/",3))=GDATA(1)
"RTN","GMRVBP0",31,0)
 . S ^TMP($J,"GMRVG","D",9999999-GX,$P(GMRVX(0),"/",3))=$S($P(GMRVX(0),"/",3)<$P(^GMRD(120.57,1,1),"^",8)&($P(GMRVX(0),"/",3)>$P(^(1),"^",10)):"",1:"^1^")
"RTN","GMRVBP0",32,0)
 I $P($G(GMRVX(0)),"/",3)="" D
"RTN","GMRVBP0",33,0)
 . S ^TMP($J,"GMRVG",GTYPE,9999999-GX,GMRVX(0))=GDATA(1)
"RTN","GMRVBP0",34,0)
 . S:$P(GMRVX(0),"/",2)>0 ^TMP($J,"GMRVG","D",9999999-GX,$P(GMRVX(0),"/",2))=$S($P(GMRVX(0),"/",2)<$P(^GMRD(120.57,1,1),"^",8)&($P(GMRVX(0),"/",2)>$P(^(1),"^",10)):"",1:"^1^")
"RTN","GMRVBP0",35,0)
 S GDIAS=$S($D(^TMP($J,"GMRVG","D",9999999-GX)):$O(^TMP($J,"GMRVG","D",9999999-GX,0)),1:0)
"RTN","GMRVBP0",36,0)
 S GSYS=$S($D(^TMP($J,"GMRVG","S",9999999-GX)):$O(^TMP($J,"GMRVG","S",9999999-GX,0)),1:0)
"RTN","GMRVBP0",37,0)
 I GDIAS,GSYS S GMAP=$J(GDIAS+((GSYS-GDIAS)/3),0,0),^TMP($J,"GMRVG","M",9999999-GX,GMAP)=""
"RTN","GMRVBP0",38,0)
 K GSYS,GDIAS Q 
"RTN","GMRVDS0")
0^2^B20474644
"RTN","GMRVDS0",1,0)
GMRVDS0 ;HIRMFO/YH-DISPLAY LATEST VITALS/MEASUREMENTS ;3/9/99
"RTN","GMRVDS0",2,0)
 ;;4.0;Vitals/Measurements;**1,7,11**;Apr 25, 1997
"RTN","GMRVDS0",3,0)
EN2 ;ENTRY TO DISPLAY THE LATEST VITALS/MEASUREMENTS IF DFN IS UNKNOWN
"RTN","GMRVDS0",4,0)
 S DIC(0)="AEM",DIC="^DPT(" D ^DIC K DIC Q:+Y'>0  S DFN=+Y
"RTN","GMRVDS0",5,0)
EN3 ; ENTRY TO DISPLAY THE LATEST VITALS/MEASUREMENTS IF DFN IS KNOWN
"RTN","GMRVDS0",6,0)
 Q:'$D(DFN)
"RTN","GMRVDS0",7,0)
 S GMREDB="P" D PAT^GMRVDS1 D Q
"RTN","GMRVDS0",8,0)
 Q
"RTN","GMRVDS0",9,0)
EN1 ; ENTRY TO DISPLAY VITALS
"RTN","GMRVDS0",10,0)
 N GAPICAL,GRADIAL,GBRACHI,OK
"RTN","GMRVDS0",11,0)
 S GAPICAL=$O(^GMRD(120.52,"B","APICAL",0)),GRADIAL=$O(^GMRD(120.52,"B","RADIAL",0)),GBRACHI=$O(^GMRD(120.52,"B","BRACHIAL",0))
"RTN","GMRVDS0",12,0)
 F GMRX=1:1:$L(GMRSTR,";") S X=$P(GMRSTR,";",GMRX) Q:'$D(^GMRD(120.51,"C",X))  S GMR(X)=$O(^GMRD(120.51,"C",X,"")),Y=$P($G(^GMRD(120.51,GMR(X),0)),"^") Q:Y=""
"RTN","GMRVDS0",13,0)
 K GMRDT,GMRVWT,GMRVHT S X="" F  S X=$O(GMR(X)) Q:X=""  S GMRDATS="" I GMR(X)'="" F GMRDAT=0:0 S GMRDAT=$O(^GMR(120.5,"AA",DFN,+GMR(X),GMRDAT)) Q:$S(GMRDAT'>0:1,GMRDATS>0:1,1:0)  D SETDATAR
"RTN","GMRVDS0",14,0)
 I '($D(GMRDATA)\10) W !,"There are no results to report " G Q
"RTN","GMRVDS0",15,0)
 F X="T","P","R","PO2","BP","HT","WT","CVP","CG","PN" I $D(GMRDATA(X)) S GMRVDT="",(GMRVDT(1),GMVD)=0 F  S GMVD=$O(GMRDATA(X,GMVD)) Q:GMVD'>0  D WRTDT S GMVD(1)=0 F  S GMVD(1)=$O(GMRDATA(X,GMVD,GMVD(1))) Q:GMVD(1)'>0  D
"RTN","GMRVDS0",16,0)
 . S GMRVX(0)=GMRDATA(X,GMVD,GMVD(1)) S GMRVX=X D EN1^GMRVSAS0
"RTN","GMRVDS0",17,0)
  . W ! W:GMRVDT(1)=0 $S(X="BP":"B/P",X="P":"Pulse",X="R":"Resp.",X="T":"Temp.",X="HT":"Ht.",X="CG":"Circ/Girth",X="WT":"Wt.",X="PO2":"Pulse Ox",X="PN":"Pain",1:X)_": "
"RTN","GMRVDS0",18,0)
 . I GMRVDT(1)=0 W ?12,"("_GMRVDT_") " S GMRVDT(1)=1
"RTN","GMRVDS0",19,0)
 . I X="T" W ?29,GMRVX(0)_" F  ("_$J(+GMRVX(0)-32*5/9,0,1)_" C)"
"RTN","GMRVDS0",20,0)
 . I X="WT" W ?29,GMRVX(0)_" lb  ("_$J(GMRVX(0)/2.2,0,2)_" kg)" S GMRVWT=GMRVX(0)/2.2
"RTN","GMRVDS0",21,0)
 . I X="HT" W ?29,$S(GMRVX(0)\12:GMRVX(0)\12_" ft ",1:"")_$S(GMRVX(0)#12:GMRVX(0)#12_" in",1:"")_" ("_$J(GMRVX(0)*2.54,0,2)_" cm)" S GMRVHT=(GMRVX(0)*2.54)/100
"RTN","GMRVDS0",22,0)
 . I X="CG" W ?29,GMRVX(0)_" in ("_$J(+GMRVX(0)/.3937,0,2)_" cm)"
"RTN","GMRVDS0",23,0)
 . I X="CVP" W ?29,GMRVX(0)_" cmH2O ("_$J(GMRVX(0)/1.36,0,1)_" mmHg)"
"RTN","GMRVDS0",24,0)
 . I X="PO2" W ?29,GMRVX(0)_"% "
"RTN","GMRVDS0",25,0)
 . I X="P"!(X="R")!(X="BP") W ?29,GMRVX(0)
"RTN","GMRVDS0",26,0)
 . I X="PN" D
"RTN","GMRVDS0",27,0)
 . . I "UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(GMRVX(0)) W ?9,GMRVX(0) Q
"RTN","GMRVDS0",28,0)
 . . I GMRVX(0)=0 W ?29,"No pain " Q
"RTN","GMRVDS0",29,0)
 . . I GMRVX(0)=99 W ?29,"Unable to respond " Q
"RTN","GMRVDS0",30,0)
 . . I GMRVX(0)=10 W ?29,GMRVX(0)_" - Worst imaginable pain " Q
"RTN","GMRVDS0",31,0)
 . . W ?29,GMRVX(0) Q
"RTN","GMRVDS0",32,0)
 . W $S('$D(GMRVX(1)):"",'GMRVX(1):"",1:"*") K GMRVX
"RTN","GMRVDS0",33,0)
 . D CHAR
"RTN","GMRVDS0",34,0)
 . I X="WT",$G(GMRVWT)>0,$G(GMRVHT)>0 W !,"BMI: " S GMRVHT(1)=$J(GMRVWT/(GMRVHT*GMRVHT),0,0) W ?29,GMRVHT(1)_$S(GMRVHT(1)>27:"*",1:"")
"RTN","GMRVDS0",35,0)
 . Q
"RTN","GMRVDS0",36,0)
Q W ! K GMRVWT,GMRVHT,GMR,GMVD,GBP,GMRVARY,GMRVDA,GMRDATA,GMVDM,GLIN,GMRZZ Q:$D(GLOC)
"RTN","GMRVDS0",37,0)
 K GMRVDT,GMROUT,DFN,%Y,GMRL,GMRDT,DIC,GMRDAT,GMRDATS,GMRSTR,GMRX,GMRVX,POP D KVAR^VADPT K VA
"RTN","GMRVDS0",38,0)
 Q
"RTN","GMRVDS0",39,0)
SETDATAR ;
"RTN","GMRVDS0",40,0)
 S Y=0 F  S Y=$O(^GMR(120.5,"AA",DFN,GMR(X),GMRDAT,Y)) Q:Y'>0!GMRDATS  I '$D(^GMR(120.5,Y,2)),$P(^GMR(120.5,Y,0),"^",8)'="" D SETNODE
"RTN","GMRVDS0",41,0)
 D:X="BP"!(X="P") SETBP^GMRVDS2 Q
"RTN","GMRVDS0",42,0)
SETNODE ;
"RTN","GMRVDS0",43,0)
 N G S GMRL=$S($D(^GMR(120.5,Y,0)):^(0),1:"")
"RTN","GMRVDS0",44,0)
 ;N G S G=$P(GMRL,"^",8) Q:'(G>0!(G<0)!($E(G)="0"))
"RTN","GMRVDS0",45,0)
 I X'="P" S G=$P(GMRL,"^",8) Q:"REFUSEDPASSUNAVAILABLE"[$$UP^XLFSTR(G)
"RTN","GMRVDS0",46,0)
 I X="P" S OK=0,G=$P(GMRL,"^",8) D  Q:'OK
"RTN","GMRVDS0",47,0)
 . I "REFUSEDPASSUNAVAILABLE"[$$UP^XLFSTR(G) Q
"RTN","GMRVDS0",48,0)
 . I '$D(^GMR(120.5,Y,5,"B")) S OK=1 Q
"RTN","GMRVDS0",49,0)
 . I $D(^GMR(120.5,Y,5,"B",GAPICAL)) S OK=1 Q
"RTN","GMRVDS0",50,0)
 . I $D(^GMR(120.5,Y,5,"B",GBRACHI)) S OK=1 Q
"RTN","GMRVDS0",51,0)
 . I $D(^GMR(120.5,Y,5,"B",GRADIAL)) S OK=1
"RTN","GMRVDS0",52,0)
 S GMRL1=$P(GMRL,"^") ;adding trailing zeros to time if necessary
"RTN","GMRVDS0",53,0)
 S $P(GMRL1,".",2)=$P(GMRL1,".",2)_"0000"
"RTN","GMRVDS0",54,0)
 S $P(GMRL1,".",2)=$E($P(GMRL1,".",2),1,4)
"RTN","GMRVDS0",55,0)
 S $P(GMRL,"^")=GMRL1
"RTN","GMRVDS0",56,0)
 K GMRL1
"RTN","GMRVDS0",57,0)
 I GMRL'="" S GMRDATA(X,$P(GMRL,"^"),Y)=$P(GMRL,"^",8),GMRDATS=1 I $P($G(^GMR(120.5,Y,5,0)),"^",4)>0 D CHAR^GMRVCHAR(Y,.GMRVARY,GMR(X))
"RTN","GMRVDS0",58,0)
 Q
"RTN","GMRVDS0",59,0)
WRTDT ;
"RTN","GMRVDS0",60,0)
 S GMRVDT=$E(GMVD,4,5)_"/"_$E(GMVD,6,7)_"/"_$E(GMVD,2,3)_"@"_$E($P(GMVD,".",2),1,2)_$S($E($P(GMVD,".",2),3,4)'="":":"_$E($P(GMVD,".",2),3,4),1:"")
"RTN","GMRVDS0",61,0)
 Q
"RTN","GMRVDS0",62,0)
CHAR ;
"RTN","GMRVDS0",63,0)
 S GMRZZ=$$WRITECH^GMRVCHAR(GMVD(1),.GMRVARY,5) S:GMRZZ'=""&(X'="PO2") GMRZZ="("_GMRZZ_")"
"RTN","GMRVDS0",64,0)
 I X="PO2",$P(^GMR(120.5,GMVD(1),0),"^",10)'="" S GMRVPO=$P(^(0),"^",10) W "with supplemental O2 "_$S(GMRVPO["l/min":$P(GMRVPO," l/min")_"L/min",1:"")_$S(GMRVPO["l/min":$P(GMRVPO," l/min",2),1:GMRVPO)_" " W:GMRZZ'="" !,?29,"- ",GMRZZ K GMRZZ Q
"RTN","GMRVDS0",65,0)
 W:GMRZZ'="" GMRZZ K GMRZZ
"RTN","GMRVDS0",66,0)
 Q
"RTN","GMRVDS2")
0^3^B5343669
"RTN","GMRVDS2",1,0)
GMRVDS2 ;HIRMFO/RM,YH-VITAL SIGNS DISPLAY ;3/9/99
"RTN","GMRVDS2",2,0)
 ;;4.0;Vitals/Measurements;**11**;Apr 25, 1997
"RTN","GMRVDS2",3,0)
PRNT ;
"RTN","GMRVDS2",4,0)
 S GMRI=0 F  S GMRI=$O(GMRLIN(GMRI)) Q:GMRI'>0  D WRT2^GMRVDS1:$D(GLOC)&(IOSL<($Y+6)) W ! F GMRJ=1:1:5 S GMRSP=$S(GMRJ'=1:7+((GMRJ-2)*16),1:0) D
"RTN","GMRVDS2",5,0)
 .I GMRI=1 W ?GMRSP,$P(GMRLIN(GMRI),"^",GMRJ)
"RTN","GMRVDS2",6,0)
 .E  D
"RTN","GMRVDS2",7,0)
 ..I GMRJ=1 W:'$D(GLIN($P(GMRLIN(GMRI),"^"))) ?GMRSP,$P(GMRLIN(GMRI),"^") S:'$D(GLIN($P(GMRLIN(GMRI),"^"))) GLIN($P(GMRLIN(GMRI),"^"))=""
"RTN","GMRVDS2",8,0)
 ..E  W ?GMRSP,$P(GMRLIN(GMRI),"^",GMRJ)
"RTN","GMRVDS2",9,0)
 Q
"RTN","GMRVDS2",10,0)
SETBP ;
"RTN","GMRVDS2",11,0)
 S GDT=GMRDAT,GDATE=GMRDAT+.00000014
"RTN","GMRVDS2",12,0)
 F  S GMRDAT=$O(^GMR(120.5,"AA",DFN,GMR(X),GMRDAT)) Q:GMRDAT'>0!(GMRDAT>GDATE)  S Y=0 F  S Y=$O(^GMR(120.5,"AA",DFN,GMR(X),GMRDAT,Y)) Q:Y'>0  I '$D(^GMR(120.5,+Y,2)) D:X="BP" SETNODE^GMRVDS0 D:X="P" SETP
"RTN","GMRVDS2",13,0)
 S GMRDAT=GDT K GDT,GDATE Q
"RTN","GMRVDS2",14,0)
STOP ;
"RTN","GMRVDS2",15,0)
 W !,"Return to continue " K X R X:DTIME I '$T!(X["^") S GMROUT=1
"RTN","GMRVDS2",16,0)
 W @IOF Q
"RTN","GMRVDS2",17,0)
SETP ;dISPLAY MULTIPLE PULSE
"RTN","GMRVDS2",18,0)
 S GMRL=$S($D(^GMR(120.5,Y,0)):^(0),1:"")
"RTN","GMRVDS2",19,0)
 N GG S GG=$P(GMRL,"^",8),OK=0 D  Q:'OK
"RTN","GMRVDS2",20,0)
 . I "REFUSEDPASSUNAVAILABLE"[$$UP^XLFSTR(GG) Q
"RTN","GMRVDS2",21,0)
 . I '$D(^GMR(120.5,Y,5,"B")) S OK=1 Q
"RTN","GMRVDS2",22,0)
 . I $D(^GMR(120.5,Y,5,"B",GAPICAL)) S OK=1 Q
"RTN","GMRVDS2",23,0)
 . I $D(^GMR(120.5,Y,5,"B",GBRACHI)) S OK=1 Q
"RTN","GMRVDS2",24,0)
 . I $D(^GMR(120.5,Y,5,"B",GRADIAL)) S OK=1
"RTN","GMRVDS2",25,0)
 S GMRL1=$P(GMRL,"^") ;adding trailing zeros to time if necessary
"RTN","GMRVDS2",26,0)
 S $P(GMRL1,".",2)=$P(GMRL1,".",2)_"0000"
"RTN","GMRVDS2",27,0)
 S $P(GMRL1,".",2)=$E($P(GMRL1,".",2),1,4)
"RTN","GMRVDS2",28,0)
 S $P(GMRL,"^")=GMRL1
"RTN","GMRVDS2",29,0)
 K GMRL1
"RTN","GMRVDS2",30,0)
 I GMRL'="" S GMRDATA(X,$P(GMRL,"^"),Y)=$P(GMRL,"^",8),GMRDATS=1 I $P($G(^GMR(120.5,Y,5,0)),"^",4)>0 D CHAR^GMRVCHAR(Y,.GMRVARY,GMR(X))
"RTN","GMRVDS2",31,0)
 Q
"RTN","GMRVED1")
0^4^B31601118
"RTN","GMRVED1",1,0)
GMRVED1 ;HIRMFO/RM,YH-VITAL SIGNS EDIT SHORT FORM (cont.) ;3/14/99  15:11
"RTN","GMRVED1",2,0)
 ;;4.0;Vitals/Measurements;**1,6,7,11**;Apr 25, 1997
"RTN","GMRVED1",3,0)
EN2 ; ENTRY FROM GMRVED0 TO ENTER THE DATA FOR A PATIENT DEFINED BY DFN
"RTN","GMRVED1",4,0)
 D DSPOV^GMRVED4 I GMRSTR(0)=";" W:GMRENTY<5 !,$C(7) Q
"RTN","GMRVED1",5,0)
CHANGE S (GMRHELP,GMRPRMT,GMRHELP(1),GREASON)="" F GMRX=2:1:$L(GMRSTR(0),";")-1 D SETPRMT^GMRVED2
"RTN","GMRVED1",6,0)
 S GMRPRMT=GMRPRMT_": ",GMRSTAR=0
"RTN","GMRVED1",7,0)
ASK ;
"RTN","GMRVED1",8,0)
 Q:GMROUT  S GLINE=0 W:$L(GMRSTR,";")>2 !,"To omit entering a vital/measurement reading:",!,"Enter 'N' or 'n' for the value when NOT documenting a reason for omission." S GLINE=$G(GLINE)+1 D CHECK^GMRVUT1
"RTN","GMRVED1",9,0)
 W !,"Enter an * for the specific value when documenting the reason for omission.",! S GLINE=GLINE+1 D CHECK^GMRVUT1
"RTN","GMRVED1",10,0)
 W "Enter a single * to document that all measurements were omitted and the",!,"reason for omission." S GLINE=GLINE+2 D CHECK^GMRVUT1 W !!,GMRPRMT  S GLINE=GLINE+1 R GMRDAT:DTIME
"RTN","GMRVED1",11,0)
 S:'$T GMRTO=1 I GMRDAT="^"!'$T S GMROUT=1 Q
"RTN","GMRVED1",12,0)
 K GMRSITE
"RTN","GMRVED1",13,0)
 I GMRDAT="" W !!,$C(7),"NO DATA ENTERED",! S GMROUT=1 Q
"RTN","GMRVED1",14,0)
 I GMRDAT["*" S GREASON=$$EN2^GMRVED6(GREASON)
"RTN","GMRVED1",15,0)
 Q:GMROUT  I GMRDAT="*" G STAR
"RTN","GMRVED1",16,0)
 I GMRENTY'=21,($E(GMRDAT,1)["-")!(GMRDAT?.E1"--") W !!,$C(7),"ERRONEOUS ENTRY",! G ASK
"RTN","GMRVED1",17,0)
 F GMRX=2:1:$L(GMRSTR(0),";")-1 D CHKSTR Q:GMROUT
"RTN","GMRVED1",18,0)
 I GMROUT S GMROUT=0 G ASK
"RTN","GMRVED1",19,0)
 F GMRX=2:1:$L(GMRSTR(0),";")-1 D CHKDAT Q:GMROUT
"RTN","GMRVED1",20,0)
STAR Q:GMROUT!(+$G(GMROUT(1)))
"RTN","GMRVED1",21,0)
 W ! S GMRDAT(0)=0 F GMRY=2:1:$L(GMRSTR(0),";")-1 S GMRX=$P(GMRSTR(0),";",GMRY) D
"RTN","GMRVED1",22,0)
 . I GMRDAT="*" S GMRDAT(GMRX)=GREASON
"RTN","GMRVED1",23,0)
 . I $D(GMRDAT(GMRX)),GMRDAT(GMRX)'="" S GMRDAT(0)=1 D WOK
"RTN","GMRVED1",24,0)
ASK1 ;
"RTN","GMRVED1",25,0)
 I 'GMRDAT(0) W !,$C(7),"NO DATA ENTERED",! S GMROUT=1 Q
"RTN","GMRVED1",26,0)
 W !,"Is this correct? YES// " R GMRX:DTIME
"RTN","GMRVED1",27,0)
 S:'$T GMRTO=1 I GMRX="^"!'$T S GMROUT=1 W !,$C(7),"DATA DELETED",! Q
"RTN","GMRVED1",28,0)
 I GMRX?1"N".E!(GMRX?1"n".E) K:$D(GMRSITE("BP"))&($D(GMRQUAL("BP"))) GBP(GMRSITE("BP")_"/"_GMRQUAL("BP")) W ! G ASK
"RTN","GMRVED1",29,0)
 I GMRX=""!(GMRX?1"Y".E)!(GMRX?1"y".E) G AR1
"RTN","GMRVED1",30,0)
 W !,"ANSWER YES OR NO",*7 G ASK1
"RTN","GMRVED1",31,0)
AR1 W !
"RTN","GMRVED1",32,0)
 Q
"RTN","GMRVED1",33,0)
CHKSTR ; CHECK THE INPUT STRING TO SEE IF IT IS VALID
"RTN","GMRVED1",34,0)
 S GMRY=$P(GMRSTR(0),";",GMRX)
"RTN","GMRVED1",35,0)
 S GMRY(1)=$S(GMRY="T":1,GMRY="P"!(GMRY="R"):2,GMRY="BP":3,GMRY="HT":4,GMRY="WT":5,GMRY="CG":6,GMRY="CVP":7,GMRY="PO2":8,GMRY="PN":9,1:0) Q:GMRY(1)'>0
"RTN","GMRVED1",36,0)
 I GMRENTY=21,GMRDAT="*" S GMRDAT=GREASON Q
"RTN","GMRVED1",37,0)
 I $P(GMRDAT,"-",GMRX-1)="*" S $P(GMRDAT,"-",GMRX-1)=GREASON Q
"RTN","GMRVED1",38,0)
 I GMRENTY=21,GMRDAT="" Q
"RTN","GMRVED1",39,0)
 I $P(GMRDAT,"-",GMRX-1)="" Q
"RTN","GMRVED1",40,0)
 S GMRSCR=$S(GMRENTY=21:"GMRDAT'?",1:"$P(GMRDAT,""-"",GMRX-1)'?")
"RTN","GMRVED1",41,0)
 N GMRVOK S GMRVOK=$S(GMRENTY=21:$E(GMRDAT,1),1:$E($P(GMRDAT,"-",GMRX-1),1)) I GMRVOK'="N",(GMRVOK'="n"),(GMRVOK'?1N),(GMRVOK'="?"),(GMRVOK'="*") D WRT S GMROUT=1 Q
"RTN","GMRVED1",42,0)
 I GMRY="PN" D  Q
"RTN","GMRVED1",43,0)
 . S GMRSCR=GMRSCR_"0.2N0.1A!(GMRDAT?1""?"".E)"
"RTN","GMRVED1",44,0)
 . I @GMRSCR D WRT S GMROUT=1
"RTN","GMRVED1",45,0)
 S GMRSCR=GMRSCR_$P("0.3N0.1"".""0.2N0.NA^0.3N0.NA^0.3N0.1""/""0.3N0.1""/""0.3N0.1A^0.3N0.3AP0.3N0.1"".""0.2N0.3AP0.1"";""0.NA^0.3N0.1"".""0.2N1.NA^0.3N0.1"".""0.2N0.1A^0.1""-""0.3N0.1"".""0.1N0.1A^0.3N0.1A","^",GMRY(1))_"!(GMRDAT?1""?"".E)"
"RTN","GMRVED1",46,0)
 I @GMRSCR D WRT S GMROUT=1 Q
"RTN","GMRVED1",47,0)
 Q
"RTN","GMRVED1",48,0)
WRT ;
"RTN","GMRVED1",49,0)
 W @IOF D @GMRHELP(1) W !,$C(7),$S(GMRDAT'?1"?".E:"Invalid data format, t",1:"T")_"he entry should be in the following format:",!,?5,GMRHELP
"RTN","GMRVED1",50,0)
 Q
"RTN","GMRVED1",51,0)
WOK ;
"RTN","GMRVED1",52,0)
 I (GMRX'="CVP"&(GMRX'="PN")&(GMRDAT(GMRX)'>0)) D  Q
"RTN","GMRVED1",53,0)
 . W !,?2,$S(GMRX="BP":"B/P",GMRX="P":"Pulse",GMRX="R":"Resp.",GMRX="T":"Temp.",GMRX="HT":"Ht.",GMRX="CG":"Circumference/Girth",GMRX="WT":"Wt.",GMRX="PO2":"Pulse Ox.",GMRX="PN":"Pain",1:GMRX)_": "_GMRDAT(GMRX)
"RTN","GMRVED1",54,0)
 . I $G(GMRSITE(GMRX))["DORSALIS PEDIS",(GMRDAT(GMRX)'>0) W "*"
"RTN","GMRVED1",55,0)
 . W $S($G(GMRSITE(GMRX))'="":" "_$P($G(GMRSITE(GMRX)),"^"),1:"")
"RTN","GMRVED1",56,0)
 . I $D(GMRINF(GMRX)) S I=0 F  S I=$O(GMRINF(GMRX,I)) Q:I'>0  S I(1)="" F  S I(1)=$O(GMRINF(GMRX,I,I(1))) Q:I(1)=""  W "  "_I(1)
"RTN","GMRVED1",57,0)
 . Q
"RTN","GMRVED1",58,0)
 I GMRX="CVP",'(GMRDAT(GMRX)>0!(GMRDAT(GMRX)<0)!($E(GMRDAT(GMRX))="0")) W !,?2,GMRX_": "_GMRDAT(GMRX) Q
"RTN","GMRVED1",59,0)
 S GMRVX=GMRX S GMRVX(0)=$S(GMRX="B"!(GMRX="BP"):$P(GMRDAT(GMRX),"^"),1:+$P(GMRDAT(GMRX),"^")) D EN1^GMRVSAS0
"RTN","GMRVED1",60,0)
 I GMRX="P",$G(GMRSITE(GMRX))["DORSALIS PEDIS",GMRDAT(GMRX)=1 S GMRVX(1)=""
"RTN","GMRVED1",61,0)
 W !,?2,$S(GMRX="BP":"B/P",GMRX="P":"Pulse",GMRX="R":"Resp.",GMRX="T":"Temp.",GMRX="HT":"Ht.",GMRX="CG":"Circumference/Girth",GMRX="WT":"Wt.",GMRX="PO2":"Pulse Ox.",GMRX="PN":"Pain",1:GMRX)_": "
"RTN","GMRVED1",62,0)
 W $S(GMRX="BP"!(GMRX="P")!(GMRX="R"):GMRDAT(GMRX),1:"")
"RTN","GMRVED1",63,0)
 I GMRX="PN" D
"RTN","GMRVED1",64,0)
 . I "UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(GMRDAT(GMRX)) W GMRDAT(GMRX) Q
"RTN","GMRVED1",65,0)
 . I GMRDAT(GMRX)=0 W GMRDAT(GMRX)_" No pain" Q
"RTN","GMRVED1",66,0)
 . I GMRDAT(GMRX)=99 W GMRDAT(GMRX)_" Unable to respond" Q
"RTN","GMRVED1",67,0)
 . I GMRDAT(GMRX)=10 W GMRDAT(GMRX)_" - Worst imaginable pain" Q
"RTN","GMRVED1",68,0)
 . W GMRDAT(GMRX) Q
"RTN","GMRVED1",69,0)
 I GMRX="T" W GMRVX(0)_" F  ("_$J(+GMRVX(0)-32*5/9,0,1)_" C)"
"RTN","GMRVED1",70,0)
 I GMRX="WT" W GMRVX(0)_" LB  ("_$J(GMRVX(0)/2.2,0,2)_" KG)"
"RTN","GMRVED1",71,0)
 I GMRX="HT" W $S(GMRVX(0)\12:GMRVX(0)\12_" FT ",1:"")_$S(GMRVX(0)#12:GMRVX(0)#12_" IN",1:"")_" ("_$J(GMRVX(0)*2.54,0,2)_" CM)"
"RTN","GMRVED1",72,0)
 I GMRX="CG" W GMRVX(0)_" IN ("_$J(+GMRVX(0)/.3937,0,2)_" CM)"
"RTN","GMRVED1",73,0)
 I GMRX="CVP" W GMRVX(0)_" cmH2O ("_$J(GMRVX(0)/1.36,0,1)_" mmHg)"
"RTN","GMRVED1",74,0)
 I GMRX="PO2" W GMRVX(0)_"%"_$S(GMRO2(GMRX)'="":" with supplemental O2 "_$S(GMRO2(GMRX)["l/min":$P(GMRO2(GMRX)," l/min")_"L/min",1:"")_$S(GMRO2(GMRX)["l/min":$P(GMRO2(GMRX)," l/min",2),1:GMRO2(GMRX)),1:"")
"RTN","GMRVED1",75,0)
 W $S('$D(GMRVX(1)):"",'GMRVX(1):"",1:"*") K GMRVX S GTXT=""
"RTN","GMRVED1",76,0)
 W:$G(GMRSITE(GMRX))'=""&(GMRX="PO2") !,?20," via" W " "_$P($G(GMRSITE(GMRX)),"^")
"RTN","GMRVED1",77,0)
 I $D(GMRINF(GMRX)) S I=0 F  S I=$O(GMRINF(GMRX,I)) Q:I'>0  S I(1)="" F  S I(1)=$O(GMRINF(GMRX,I,I(1))) Q:I(1)=""  W "  "_I(1)
"RTN","GMRVED1",78,0)
 Q
"RTN","GMRVED1",79,0)
CHKDAT ;
"RTN","GMRVED1",80,0)
 D CHKDAT^GMRVED3
"RTN","GMRVED1",81,0)
 Q
"RTN","GMRVED3")
0^5^B35885901
"RTN","GMRVED3",1,0)
GMRVED3 ;HIRMFO/YH-VITAL SIGNS EDIT SHORT FORM (cont.) ;4/28/99  08:58
"RTN","GMRVED3",2,0)
 ;;4.0;Vitals/Measurements;**1,5,6,7,11**;Apr 25, 1997
"RTN","GMRVED3",3,0)
EN2 ;VITAL ENTRY FOR A PATIENT
"RTN","GMRVED3",4,0)
 D EN2^GMRVED1 G:GMROUT NEXT D EN4^GMRVED2 S GMROK=0
"RTN","GMRVED3",5,0)
NEXT I '(GMRENTY=5!(GMRENTY=6)!(GMRENTY=9))!GMROUT S GMRVIDT=GMRDT0 Q
"RTN","GMRVED3",6,0)
 I $G(GMROUT(1))=1 S GMROUT(1)=0 S GMRVIDT=GMRDT0 Q
"RTN","GMRVED3",7,0)
 I GMRSTR'["BP" S GMRVIDT=GMRDT0 Q
"RTN","GMRVED3",8,0)
 S:'$D(GPRMT)&($D(GMRPRMT)) GPRMT="("_$P(GMRPRMT,":")_" continued )" S GPRMT(1)=GMRSTR
"RTN","GMRVED3",9,0)
 I '$D(^GMR(120.5,"AA",DFN,1,9999999-GMRVIDT)) S:GMRENTY=5 GMRSTR="T;P;R;BP;" S:GMRENTY=6 GMRSTR="BP;P;" S:GMRENTY=10 GMRSTR="T;P;R;BP;HT;WT;" S GMRVIDT=GMRDT0 S:GMRENTY=9 GMRSTR=GPRMT(1) K GPRMT,GBP Q
"RTN","GMRVED3",10,0)
ASK I '$D(GMRSITE("BP"))&'$D(GMRINF("BP")) S:GMRENTY=9 GMRSTR=GPRMT(1) K GPRMT Q
"RTN","GMRVED3",11,0)
  W !,"Enter another B/P? NO// " R GMRX:DTIME S:'$T GMRTO=1 I '$T!(GMRX="^") S GMROUT=1,GMRVIDT=GMRDT0 S:GMRENTY=9 GMRSTR=GPRMT(1) K GBP,GPRMT Q
"RTN","GMRVED3",12,0)
 I GMRX=""!("Nn"[GMRX) S GMRVIDT=GDT S:GMRENTY=5 GMRSTR="T;P;R;BP;" S:GMRENTY=10 GMRSTR="T;P;R;BP;HT;WT;" S GMRVIDT=GMRDT0 S:GMRENTY=9 GMRSTR=GPRMT(1) K GPRMT Q
"RTN","GMRVED3",13,0)
 I GMRX["Y"!(GMRX["y") S GMRSTR=$S(GMRENTY=5!(GMRENTY=6):"BP;P;",1:"BP;"),GMRVIDT=GMRDT0 W @IOF,GPRMT D DSPOV^GMRVED4 D SETBP S GLAST=GLAST+.00000001,GMRVIDT=GLAST G EN2
"RTN","GMRVED3",14,0)
 W !,"ANSWER YES OR NO, maximum 6 B/Ps ",*7 G ASK
"RTN","GMRVED3",15,0)
SETBP ;
"RTN","GMRVED3",16,0)
 N I S I=0 F  S I=$O(GMROV("BP",I)) Q:I'>0  I $P(GMROV("BP",I),"^",2)'="" S GBP($P(GMROV("BP",I),"^",2))=""
"RTN","GMRVED3",17,0)
 Q
"RTN","GMRVED3",18,0)
CHKDAT ;CHECK V/M ENTRY DATA
"RTN","GMRVED3",19,0)
 S GMRVITY=$P(GMRSTR(0),";",GMRX),GMRVIT=+$O(^GMRD(120.51,"C",GMRVITY,"")),GMRVIT(1)=$S($D(^GMRD(120.51,GMRVIT,0)):$P(^(0),"^"),1:""),GMRO2(GMRVITY)=""
"RTN","GMRVED3",20,0)
 F GMRY=0:0 S GMRY=$O(^GMR(120.5,"AA",DFN,GMRVIT,9999999-GMRVIDT,GMRY)) Q:GMRY'>0  I $S('$D(^GMR(120.5,GMRY,2)):1,$P(^(2),"^"):0,1:1) D
"RTN","GMRVED3",21,0)
 . I GMRENTY=21,"Nn"'[GMRDAT D WDUP S GMRDAT="" Q
"RTN","GMRVED3",22,0)
 . D:"Nn"'[$P(GMRDAT,"-",GMRX-1) WDUP S $P(GMRDAT,"-",GMRX-1)="" Q
"RTN","GMRVED3",23,0)
 S GMRINPTR=$S($D(^GMRD(120.51,GMRVIT,1)):^(1),1:"K:X'?.NP X")
"RTN","GMRVED3",24,0)
INPTR ;
"RTN","GMRVED3",25,0)
 Q:GMROUT  S X=$S(GMRENTY=21:GMRDAT,1:$P(GMRDAT,"-",GMRX-1))
"RTN","GMRVED3",26,0)
 I X="n"!(X="N")!(X="") S (GMRDAT(GMRVITY),GMRSITE(GMRVITY),GMRINF(GMRVITY))="" Q
"RTN","GMRVED3",27,0)
 I "UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X) S GMRSITE(GMRVITY)="",GMRINF(GMRVITY)="",GMRDAT(GMRVITY)=X Q
"RTN","GMRVED3",28,0)
INPTR1 ;
"RTN","GMRVED3",29,0)
 I GMRVITY="PO2" D O2^GMRVUT3
"RTN","GMRVED3",30,0)
 I GMRVITY="HT" S X=$$UP^XLFSTR(X),GMRSITE=$P(X,",",2),X=$P(X,",") D
"RTN","GMRVED3",31,0)
 .I GMRSITE="" S:X["E" GMRSITE=$E(X,$F(X,"E")-1),X=$P(X,"E") S:X["A" GMRSITE=$E(X,$F(X,"A")-1),X=$P(X,"A")
"RTN","GMRVED3",32,0)
 .S:GMRSITE="" GMRSITE="A"
"RTN","GMRVED3",33,0)
 .D TPSITE^GMRVUT1
"RTN","GMRVED3",34,0)
 .Q
"RTN","GMRVED3",35,0)
 I GMRVITY="PN" S GMRDAT("PN")=+X,GMRSITE("PN")=""
"RTN","GMRVED3",36,0)
 I GMRVITY="WT" S GMRSITE=$P(X,+X,2) G:GMRSITE=""!("LlKk"'[$E(GMRSITE)) A K GMRSITE(GMRVITY),GMRINF(GMRVITY) D WTYPE^GMRVUT1
"RTN","GMRVED3",37,0)
 I GMRVITY="CG" K GMRSITE(GMRVITY),GMRINF(GMRVITY) S GLVL=8 D LISTQ^GMRVQUAL,OTHERQ^GMRVQUAL,CLEAR^GMRVQUAL
"RTN","GMRVED3",38,0)
 I GMRVITY="BP",GMRENTY<5,$L(X,"/")=1 G A
"RTN","GMRVED3",39,0)
 I GMRVITY="BP" N GMRDP D
"RTN","GMRVED3",40,0)
 .S X=$$UP^XLFSTR(X)
"RTN","GMRVED3",41,0)
 .Q:X'["/"
"RTN","GMRVED3",42,0)
 .S:$P(X,"/",2)="" GMRSITE="PA",GMRDP=1
"RTN","GMRVED3",43,0)
 .S:$P(X,"/",2)="D" GMRSITE="D",X=$P(X,"/")_"/",GMRDP=1
"RTN","GMRVED3",44,0)
 .S:$P(X,"/",2)="P" GMRSITE="PA",X=$P(X,"/")_"/",GMRDP=1
"RTN","GMRVED3",45,0)
 .D:$D(GMRDP)&(GMRENTY<5) TPSITE^GMRVUT1
"RTN","GMRVED3",46,0)
 .Q
"RTN","GMRVED3",47,0)
 I GMRVITY="T"!(GMRVITY="P")!(GMRVITY="BP"&(GMRENTY>4))!(GMRVITY="R")!(GMRVITY="PO2") D SITE I '$D(X) G A
"RTN","GMRVED3",48,0)
 X GMRINPTR I $D(X)#2 S GMRDAT(GMRVITY)=X Q
"RTN","GMRVED3",49,0)
A W !,?5,$C(7),"Invalid ",GMRVIT(1)," entry"
"RTN","GMRVED3",50,0)
A1 W !,GMRVIT(1)_": " R GMRRET:DTIME
"RTN","GMRVED3",51,0)
 S:'$T GMRTO=1 I GMRRET="^"!'$T S GMROUT=1 G INPTR
"RTN","GMRVED3",52,0)
 I GMRRET="N"!(GMRRET="n") S (X,GMRRET)="" Q
"RTN","GMRVED3",53,0)
 I GMRRET'["?" S X=GMRRET G INPTR1
"RTN","GMRVED3",54,0)
 I GMRRET?1"?".E S XQH="GMRV-"_$S(GMRVITY="CG":"CIRCUM/GIRTH",GMRVITY="PO2":"PO2",GMRVITY="CVP":"CVP",1:GMRVIT(1))_" RATE HELP" D EN^XQH K XQH
"RTN","GMRVED3",55,0)
 G A1
"RTN","GMRVED3",56,0)
WDUP ;
"RTN","GMRVED3",57,0)
 W $C(7),!,?4,GMRVIT(1)_" data already exists for this patient on this date/time.",!,?4,"To change this data use the enter a vital/measurement in error option.",!
"RTN","GMRVED3",58,0)
 Q
"RTN","GMRVED3",59,0)
SITE ;
"RTN","GMRVED3",60,0)
 I GMRVITY'="BP" S GMRSITE=$P(X,+X,2),X=+X S GMRSITE=$$UP^XLFSTR(GMRSITE) I GMRVITY="T"!(GMRVITY="P")!(GMRVITY="R") D TPSITE^GMRVUT1 Q
"RTN","GMRVED3",61,0)
 Q:GMRVITY'="BP"
"RTN","GMRVED3",62,0)
 I GMRVITY="BP" S GLVL=8 D LISTQ^GMRVQUAL N GMRIN D:$D(GMRDP) CHKBP D OTHERQ^GMRVQUAL,CLEAR^GMRVQUAL
"RTN","GMRVED3",63,0)
 I $L(X,"/")=1!($L(X,"/")=2&($P(X,"/",2)="")) D
"RTN","GMRVED3",64,0)
 . I '$D(GMRINF("BP")) W !,"Missing diastolic data!",! K X D BP^GMRVUT1 W ! Q
"RTN","GMRVED3",65,0)
 . N II S (II,II(0))=0 F  S II=$O(GMRINF("BP",II)) Q:II'>0  D
"RTN","GMRVED3",66,0)
 . . I $D(GMRINF("BP",II,"PALPATED")) S II(0)=1 Q
"RTN","GMRVED3",67,0)
 . . I $D(GMRINF("BP",II,"DOPPLER")) S II(0)=1
"RTN","GMRVED3",68,0)
 . I II(0)=0 W !,"Missing diastolic data!",! K X D BP^GMRVUT1 W !
"RTN","GMRVED3",69,0)
 Q
"RTN","GMRVED3",70,0)
CHKBP ; Check for Method of BP for Systolic Value only
"RTN","GMRVED3",71,0)
 N GMRVOK S (GMRVODR,GMRVOK)=0 F  S GMRVODR=$O(GCOUNT(GMRVODR)) Q:GMRVODR<1  D  Q:GMRVOK
"RTN","GMRVED3",72,0)
 .S GCAT="" F  S GCAT=$O(GCOUNT(GMRVODR,GCAT)) Q:GCAT=""  D  Q:GMRVOK
"RTN","GMRVED3",73,0)
 ..I GCAT["METHOD" S GMRVOK=1 Q
"RTN","GMRVED3",74,0)
 ..Q
"RTN","GMRVED3",75,0)
 .Q
"RTN","GMRVED3",76,0)
 Q:'GMRVOK
"RTN","GMRVED3",77,0)
 Q:'GMRVODR
"RTN","GMRVED3",78,0)
 K GCOUNT(GMRVODR),GQUAL(GMRVODR),GMRLAST(GMRVODR),GORDER(GMRVODR)
"RTN","GMRVED3",79,0)
 N GMRCI,GMRCJ,GMRCX
"RTN","GMRVED3",80,0)
 S GMRCX=$S(GMRSITE="D":"DOPPLER",1:"PALPATED")
"RTN","GMRVED3",81,0)
 F GMRCI=0:0 S GMRCI=$O(GCHART(GMRCI)) Q:GMRCI<1  I $P(GCHART(GMRCI),"^")=GMRCX S GMRCJ=$P(GCHART(GMRCI),"^",2,3) Q
"RTN","GMRVED3",82,0)
 S:$G(GMRCJ)'="" GMRIN(GMRVODR,GMRCX)=GMRCJ
"RTN","GMRVED3",83,0)
 D RESET(GMRVODR,0,.GCOUNT)
"RTN","GMRVED3",84,0)
 D RESET(GMRVODR,0,.GQUAL)
"RTN","GMRVED3",85,0)
 D RESET(GMRVODR,0,.GMRLAST)
"RTN","GMRVED3",86,0)
 D RESET(GMRVODR,0,.GORDER)
"RTN","GMRVED3",87,0)
 D RESET(GMRVODR,1,.GCHART)
"RTN","GMRVED3",88,0)
 D RESET(GMRVODR,1,.GCHART1)
"RTN","GMRVED3",89,0)
 S (GMRCI,GMRCJ,GMRCX)=0 F  S GMRCI=$O(GCHART(GMRCI)) Q:GMRCI<1  D
"RTN","GMRVED3",90,0)
 .S:GMRCX=0 GMRCX=$P(GCHART(GMRCI),"^",3)
"RTN","GMRVED3",91,0)
 .I GMRCX=$P(GCHART(GMRCI),"^",3) S GMRCJ=GMRCJ+1 Q
"RTN","GMRVED3",92,0)
 .I GMRCX'=$P(GCHART(GMRCI),"^",3) D
"RTN","GMRVED3",93,0)
 ..S GCAT=$O(GMRLAST(GMRCX,"")),GMRLAST(GMRCX,GCAT)=GMRCJ
"RTN","GMRVED3",94,0)
 ..S GMRCX=$P(GCHART(GMRCI),"^",3),GMRCJ=GMRCJ+1 Q
"RTN","GMRVED3",95,0)
 .Q
"RTN","GMRVED3",96,0)
 I GMRCX S GCAT=$O(GMRLAST(GMRCX,"")),GMRLAST(GMRCX,GCAT)=GMRCJ
"RTN","GMRVED3",97,0)
 Q
"RTN","GMRVED3",98,0)
RESET(GMRVOD,GMRVFLG,GMY) ; Reset GMY after removal of METHOD
"RTN","GMRVED3",99,0)
 N GMRCI,GMRCJ,GMY1,GMRCX
"RTN","GMRVED3",100,0)
 I GMRVFLG D  Q
"RTN","GMRVED3",101,0)
 .S GMRCJ=0
"RTN","GMRVED3",102,0)
 .F GMRCI=0:0 S GMRCI=$O(GMY(GMRCI)) Q:GMRCI<1  S GMRCX=$G(GMY(GMRCI)) I $P(GMRCX,"^",3)'=GMRVOD S GMRCJ=GMRCJ+1,GMY1(GMRCJ)=GMRCX S:$P(GMRCX,"^",3)>GMRVOD $P(GMY1(GMRCJ),"^",3)=$P(GMY1(GMRCJ),"^",3)-1
"RTN","GMRVED3",103,0)
 .K GMY F GMRCI=0:0 S GMRCI=$O(GMY1(GMRCI)) Q:GMRCI<1  S GMRCX=$G(GMY1(GMRCI)),GMY(GMRCI)=GMRCX
"RTN","GMRVED3",104,0)
 .Q
"RTN","GMRVED3",105,0)
 F GMRVOD=GMRVOD:0 S GMRVOD=$O(GMY(GMRVOD)) Q:GMRVOD<1  D
"RTN","GMRVED3",106,0)
 .S GMRCI=$O(GMY(GMRVOD,"")) I GMRCI="" S GMY(GMRVOD-1)=$G(GMY(GMRVOD)) K GMY(GMRVOD) Q
"RTN","GMRVED3",107,0)
 .S GCAT="" F  S GCAT=$O(GMY(GMRVOD,GCAT)) Q:GCAT=""  D
"RTN","GMRVED3",108,0)
 ..S GMY(GMRVOD-1,GCAT)=$G(GMY(GMRVOD,GCAT))
"RTN","GMRVED3",109,0)
 ..K GMY(GMRVOD,GCAT)
"RTN","GMRVED3",110,0)
 ..Q
"RTN","GMRVED3",111,0)
 .Q
"RTN","GMRVED3",112,0)
 Q
"RTN","GMRVED4")
0^6^B27265623
"RTN","GMRVED4",1,0)
GMRVED4 ;HIRMFO/RM,YH-VITAL SIGNS SHORT FORM ;3/15/99  14:24
"RTN","GMRVED4",2,0)
 ;;4.0;Vitals/Measurements;**1,7,11**;Apr 25, 1997
"RTN","GMRVED4",3,0)
DSPOV ; DISPLAY OLD VITALS ALREADY ENTERED FOR PATIENT AND SET GMRSTR(0)
"RTN","GMRVED4",4,0)
 ; TO THE SUBSET OF GMRSTR THAT HASN'T BEEN ENTERED.
"RTN","GMRVED4",5,0)
 K GMROV S (GLAST,GLAST(1))=0,GDT=GMRVIDT,GMRSTR(0)=";"_GMRSTR I $E(GMRSTR(0),$L(GMRSTR(0)))'=";" S GMRSTR(0)=GMRSTR(0)_";"
"RTN","GMRVED4",6,0)
 S Y=0 F  S Y=$O(^GMR(120.5,"AA",DFN,Y)) Q:Y'>0  I $D(^GMR(120.5,"AA",DFN,Y,9999999-GDT)) S X=0 F  S X=$O(^GMR(120.5,"AA",DFN,Y,9999999-GDT,X)) Q:X'>0  I $S('$D(^GMR(120.5,X,2)):1,'$P(^(2),"^"):1,1:0) S GCT=0 D STOV
"RTN","GMRVED4",7,0)
 I GMRSTR["BP",'$D(GMROV("BP")) S GTYPE="BP",GCT=0 D MULTIBP S:$D(GMROV(GTYPE)) GMRP=";"_GTYPE_";",GMRSTR(0)=$P(GMRSTR(0),GMRP)_";"_$P(GMRSTR(0),GMRP,2)
"RTN","GMRVED4",8,0)
 I GMRSTR["P",'$D(GMROV("P")),GMRENTY=6 S GTYPE="P",GCT=0,GMRTYPE=$O(^GMRD(120.51,"C",GTYPE,0)) D MULTIBP S:$D(GMROV(GTYPE)) GMRP=";"_GTYPE_";",GMRSTR(0)=$P(GMRSTR(0),GMRP)_";"_$P(GMRSTR(0),GMRP,2)
"RTN","GMRVED4",9,0)
 G:$O(GMROV(""))="" Q
"RTN","GMRVED4",10,0)
 W !!,"The patient has data for this date/time for the following vital/measurements.",!,"To change this data, please use the Entered in Error Module.",!!
"RTN","GMRVED4",11,0)
 F GMRX=1:1:$L(GMRSTR,";") S X=$P(GMRSTR,";",GMRX) Q:X=""  I $D(GMROV(X)) S X(1)=0 F Y=0:0 S X(1)=$O(GMROV(X,X(1))) Q:X(1)'>0  D PROV
"RTN","GMRVED4",12,0)
Q S GMRVIDT=GDT W ! K X Q
"RTN","GMRVED4",13,0)
STOV ; STORE OLD VITALS FOR A PATIENT
"RTN","GMRVED4",14,0)
 S GFLAG=0,GMROV=$S($D(^GMR(120.5,X,0)):^(0),1:""),GMRTYPE=+$P(GMROV,"^",3) I $D(^GMRD(120.51,GMRTYPE,0)) S GTYPE=$P(^(0),"^",2),GMRP=";"_GTYPE_";"
"RTN","GMRVED4",15,0)
 I $S('$D(^GMRD(120.51,GMRTYPE,0)):0,";"_GMRSTR[GMRP:1,1:0) S GCT=GCT+1,GFLAG=1 S:GCT=1 GMRSTR(0)=$P(GMRSTR(0),GMRP)_";"_$P(GMRSTR(0),GMRP,2) D
"RTN","GMRVED4",16,0)
 . K GMRVARY S GMRVARY="" D CHAR^GMRVCHAR(X,.GMRVARY,GMRTYPE) S GMRINF=$$WRITECH^GMRVCHAR(X,.GMRVARY,9) Q
"RTN","GMRVED4",17,0)
 I GFLAG S GMROV(GTYPE,GCT)=$P(GMROV,"^",8) D
"RTN","GMRVED4",18,0)
 .S GMROV(GTYPE,GCT)=GMROV(GTYPE,GCT)_"^"_$S(GMRINF'="":" "_GMRINF,1:"")_"^"_GMRVIDT
"RTN","GMRVED4",19,0)
 .S:GTYPE="BP"!(GTYPE="P") GLAST(1)=1,GLAST=GMRVIDT D:GTYPE="BP"!(GTYPE="P") MULTIBP S GMRVIDT=GDT
"RTN","GMRVED4",20,0)
 S GCT=0 K GFLAG Q
"RTN","GMRVED4",21,0)
PROV ; PRINT OUT OLD VITAL
"RTN","GMRVED4",22,0)
 K GDATA S GMRVX=X,GMRVX(0)=$P(GMROV(X,X(1)),"^") G:GMRVX(0)'>0 PRT
"RTN","GMRVED4",23,0)
 I GMRVX(0)>0 D EN1^GMRVSAS0 S X(2)=GMRVX(0)
"RTN","GMRVED4",24,0)
 I X="T" S GMRVX(0)=GMRVX(0)_$S(GMRVX(0)>0:"F"_" ("_$J(X(2)-32*5/9,0,1)_"C)",1:"")
"RTN","GMRVED4",25,0)
 I X="PN" D
"RTN","GMRVED4",26,0)
 . I "UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(GMRVX(0)) Q
"RTN","GMRVED4",27,0)
 . I GMRVX(0)=0 S GMRVX(0)="No pain " Q
"RTN","GMRVED4",28,0)
 . I GMRVX(0)=99 S GMRVX(0)="Unable to respond "
"RTN","GMRVED4",29,0)
 . I GMRVX(0)=10 S GMRVX(0)=GMRVX(0)_" - Worst imaginable pain " Q
"RTN","GMRVED4",30,0)
 . Q
"RTN","GMRVED4",31,0)
 I X="WT" S GMRVX(0)=GMRVX(0)_$S(GMRVX(0)>0:" lb"_" ("_$J(X(2)/2.2,0,2)_" kg)",1:"")
"RTN","GMRVED4",32,0)
 I X="HT" S GMRVX(0)=(GMRVX(0)\12)_$S(GMRVX(0)>0:" ft "_$S(X(2)#12:X(2)#12_" in",1:"")_" ("_$J(X(2)*2.54,0,2)_" cm)",1:"")
"RTN","GMRVED4",33,0)
 I X="CG" S GMRVX(0)=GMRVX(0)_$S(GMRVX(0)>0:" in ("_$J(X(2)/.3937,0,2)_" cm)",1:"")
"RTN","GMRVED4",34,0)
 I X="CVP" S GMRVX(0)=GMRVX(0)_$S(GMRVX(0)>0:" cmH2O ("_$J(X(2)/1.36,0,0)_" mmHg)",1:"")
"RTN","GMRVED4",35,0)
 I X="PO2" D
"RTN","GMRVED4",36,0)
 .N GMRVPO S GMRVPO=$P(GMROV,"^",10)
"RTN","GMRVED4",37,0)
 .S GMRVX(0)=$S(GMRVX(0)>0:"O2 sat. via oximetry "_GMRVX(0)_"%",1:"")_$S(GMRVPO'="":" with O2 "_$S(GMRVPO["l/min":$P(GMRVPO," l/min")_"L/min",1:"")_$S(GMRVPO["l/min":$P(GMRVPO," l/min",2),1:GMRVPO),1:"")_$S(GMRINF'="":" via",1:"")
"RTN","GMRVED4",38,0)
 .Q
"RTN","GMRVED4",39,0)
PRT W:X(1)=1 !,?$X+2,$S(X="T":"Temp.",X="P":"Pulse",X="R":"Resp.",X="BP":"B/P",X="HT":"Ht.",X="WT":"Wt.",X="CG":"Circumference/Girth",X="PO2":"Pulse Oximetry",X="PN":"Pain",1:X),": "
"RTN","GMRVED4",40,0)
 W:X(1)>1 !
"RTN","GMRVED4",41,0)
 I X="P" D
"RTN","GMRVED4",42,0)
 . I GMRINF'="",GMRVX(0)=1 S:$F(GMRINF,"DORSALIS PEDIS")>0 GMRVX(1)=""
"RTN","GMRVED4",43,0)
 . I GMRINF'="",GMRVX(0)=0 S:$F(GMRINF,"DORSALIS PEDIS")>0 GMRVX(1)=1
"RTN","GMRVED4",44,0)
 . Q
"RTN","GMRVED4",45,0)
 S GDATA(1)=$P(GMROV(X,X(1)),"^",2),GDATA(2)=$P(GMROV(X,X(1)),"^",3)
"RTN","GMRVED4",46,0)
 W:X="BP" ?8," " W:X="P" ?8,$S(X(1)>1:" ",1:"") W GMRVX(0),$S('$D(GMRVX(1)):"",'GMRVX(1):"",1:"*"),GDATA(1)
"RTN","GMRVED4",47,0)
 K GDATA,GMRVX Q
"RTN","GMRVED4",48,0)
EXITACT ; VITAL OPTIONS EXIT ACTION
"RTN","GMRVED4",49,0)
 K:'$L(GMRVFLAG) GMRVFLAG,GMRVDBA
"RTN","GMRVED4",50,0)
 K G,GBLNK,GCAT,GCHA,GCHART,GCOL,GCOUNT,GCT,GDA,GDT,GENTR,GLAST,GLN,GMAX,GMRDAT,GMRENTR,GMRHELP,GMRINF,GMRINPTR,GMRLAST,GMRO2,GMRPRMT,GMRRET,GMRSCR,GMRSITE,GMRSTAR,GMRSTR
"RTN","GMRVED4",51,0)
 K GMRV,GMRVDFLT,GMRVHLOC,GMRVIDT,GMRVIT,GMRVITY,GMRVLST,GMRVODR,GMRVWLOC,GMRW,GMRWARD,GMRX,GMRY,GORDER,GQUAL,GREASON,GSIDE,GTXT,GTYPE
"RTN","GMRVED4",52,0)
 Q
"RTN","GMRVED4",53,0)
ENTACT ; NURSING VITAL OPTIONS ENTRY ACTION
"RTN","GMRVED4",54,0)
 S:'$D(GMRVFLAG) GMRVFLAG=2 I GMRVFLAG S GMRVFLAG=$S(GMRVFLAG=1:0,1:""),GMROUT=0 D DATE^GMRVED0 S:'GMROUT GMRVDBA=GMROUT_"^"_GMRVIDT S:GMROUT XQUIT=1 K GMROUT,GMRVIDT
"RTN","GMRVED4",55,0)
 Q
"RTN","GMRVED4",56,0)
MULTIBP ;DISPLAY MULTIPLE B/P
"RTN","GMRVED4",57,0)
 Q:'$D(GMRTYPE)  S GDATE=GDT S:'$D(GLAST) GLAST=0 S GDT(3)=9999999-(GDT+.00000001),GDT(2)=9999999-(GDT+.00000014) K GDATE
"RTN","GMRVED4",58,0)
 F  S GDT(2)=$O(^GMR(120.5,"AA",DFN,GMRTYPE,GDT(2))) Q:GDT(2)>GDT(3)!(GDT(2)="")  S GDA=0 F  S GDA=$O(^GMR(120.5,"AA",DFN,GMRTYPE,GDT(2),GDA)) Q:GDA'>0  I $D(^GMR(120.5,GDA,0)),'$D(^GMR(120.5,GDA,2)) S GMRVIDT=9999999-GDT(2) D
"RTN","GMRVED4",59,0)
 .S GDATA=^GMR(120.5,GDA,0),(GLAST(1),GCT)=GCT+1
"RTN","GMRVED4",60,0)
 .K GMRVARY S GMRVARY="" D CHAR^GMRVCHAR(GDA,.GMRVARY,GMRTYPE) S GMRINF=$$WRITECH^GMRVCHAR(GDA,.GMRVARY,9)
"RTN","GMRVED4",61,0)
 .S GMROV(GTYPE,GCT)=$P(GDATA,"^",8)_"^"_$S(GMRINF'="":" "_GMRINF,1:"")_"^"_GMRVIDT
"RTN","GMRVED4",62,0)
 .S:GMRVIDT>GLAST GLAST=GMRVIDT
"RTN","GMRVED4",63,0)
 Q
"RTN","GMRVEE0")
0^7^B30629717
"RTN","GMRVEE0",1,0)
GMRVEE0 ;HIRMFO/RM,YH-ENTERED IN ERROR EDIT ;3/15/99  15:04
"RTN","GMRVEE0",2,0)
 ;;4.0;Vitals/Measurements;**1,7,11**;Apr 25, 1997
"RTN","GMRVEE0",3,0)
EN1 ; ENTRY FROM OPTION GMRV ERROR EDIT
"RTN","GMRVEE0",4,0)
 S GMROUT=0 W ! S DIC="^DPT(",DIC(0)="AEMQ" D ^DIC K DIC S:+Y'>0 GMROUT=1 G Q:+Y'>0 S DFN=+Y
"RTN","GMRVEE0",5,0)
EN2 ; ENTRY TO VITALS ENTERED IN ERROR IF DFN IS KNOWN.
"RTN","GMRVEE0",6,0)
 Q:'$D(DFN)  S GMROUT=0 K ^TMP($J)
"RTN","GMRVEE0",7,0)
DATE S %DT(0)="-NOW",%DT("A")="Select DATE (TIME optional) of this error: ",%DT="AXET" D ^%DT K %DT I +Y'>0 S GMROUT=1 G Q
"RTN","GMRVEE0",8,0)
 S GMRVDATE=+Y D DATACK I GMROUT W !,$C(7),"No data for this date" S GMROUT=0 G DATE
"RTN","GMRVEE0",9,0)
EN3 ;ENTRY TO ERROR EDIT PROVIDED DFN AND DATE/TIME ARE GIVEN
"RTN","GMRVEE0",10,0)
 S GMRX=$O(GMRARTY("D",0)) I GMRX>0 D CHSDT G:GMROUT Q D EN1^GMRVEE1
"RTN","GMRVEE0",11,0)
 I GMRARTY W ! S DIC=120.51,DIC(0)="AQEM",DIC("A")="Select a VITAL type record, or press return to correct DATE/TIME, PATIENT  or set INVALID for the record: ",DIC("S")="I $D(GMRARTY(+Y))" D ^DIC K DIC
"RTN","GMRVEE0",12,0)
 S:$D(DUOUT)!$D(DTOUT) GMROUT=1 G:GMROUT Q
"RTN","GMRVEE0",13,0)
 S GMRVITY=$S(+Y>0:+Y,1:"A")
"RTN","GMRVEE0",14,0)
 I 'GMRARTY S GMRVITY=$O(GMRARTY(0))
"RTN","GMRVEE0",15,0)
 D:GMRVITY'="A" WHTL
"RTN","GMRVEE0",16,0)
 I '($D(GMRARTY)\10) W !?3,$C(7),"There is no data for this patient for this date/time" G Q
"RTN","GMRVEE0",17,0)
 S GMRVDT=$O(GMRARTY("D",0)) S:GMRVITY="A"&'$O(GMRARTY(+$O(GMRARTY("")))) GMRVITY=$O(GMRARTY(""))
"RTN","GMRVEE0",18,0)
 D RESLS^GMRVEE1
"RTN","GMRVEE0",19,0)
Q K ^TMP($J),GMRAINP,GMRDA,GMRDAT,GMREDB,GMRFDT,GMRNM,GMRSDT,GMRTY,GMRVDATE,GMRVITY,GMRX,GMRDATE,GMRI,GMRSITE,GMRVIDT,GMRSTR,GMRVCH,GMRVIT,GMRVX,DR,DA,DIE,DFN,DIC,GMRARTY,GMRCHC,GMRDFN,GMRVDT,GMRVHLOC,GMRY,GMRZ,POP,GDATE,GSAVE,GDFN,GMRCNT
"RTN","GMRVEE0",20,0)
 D KVAR^VADPT K GMRINF,GMRDATA,%T,%Y,D0,DI,DQ,VAERR,VAIP,GMRQUAL,GMRENTY,GFLAG,GMRZZ,GMRVARY
"RTN","GMRVEE0",21,0)
 K GMROK,GDT I GMROUT K GMROUT Q
"RTN","GMRVEE0",22,0)
 G EN1
"RTN","GMRVEE0",23,0)
WHTL ; ELIMINATE ALL NON GMRVITY CHILDREN FROM GMRARTY
"RTN","GMRVEE0",24,0)
 F GMRX=0:0 S GMRX=$O(GMRARTY(GMRX)) Q:GMRX'>0  I GMRX'=GMRVITY K GMRARTY(GMRX)
"RTN","GMRVEE0",25,0)
 F GMRX=0:0 S GMRX=$O(GMRARTY("D",GMRX)) Q:GMRX'>0  I '$D(GMRARTY(GMRVITY,GMRX)) K GMRARTY("D",GMRX)
"RTN","GMRVEE0",26,0)
 Q
"RTN","GMRVEE0",27,0)
CHSDT ; CHOOSE A DATE FOR ALL VITAL TYPES, OR DROP THRU FROM SINGLE VITAL TYPE
"RTN","GMRVEE0",28,0)
 S (GMRCNT,GMRNM)=0 K ^TMP($J,"GMRC") W !,"CHOOSE FROM: ",!
"RTN","GMRVEE0",29,0)
 S GFLAG="" F GMRX=0:0 S GMRX=$O(GMRARTY("D",GMRX)) Q:GMRX'>0!GMROUT!(GFLAG["^")  S GMRNM=GMRNM+1,^TMP($J,"GMRC",GMRNM)=GMRX,GMRCNT=GMRCNT+1 W !,?2,GMRNM_"  " S Y=GMRX D DT^DIQ D PRTCHS I GMRCNT=3 D
"RTN","GMRVEE0",30,0)
 . W !,"  Return to continue or enter ^ to stop listing: " R GFLAG:DTIME S:'$T GMROUT=1 S GMRCNT=0
"RTN","GMRVEE0",31,0)
 . Q
"RTN","GMRVEE0",32,0)
CHNUM Q:GMROUT  W !!,"Select VITAL/MEASUREMENT from the above list: " R GMRX:DTIME I '$T!(GMRX="^") S GMROUT=1 Q
"RTN","GMRVEE0",33,0)
 I GMRX="" S GMROUT=1 Q
"RTN","GMRVEE0",34,0)
 I '$D(^TMP($J,"GMRC",GMRX)) W !,$C(7),?3,"ANSWER WITH "_$S(GMRNM>0:"A NUMBER BETWEEN 1 AND "_GMRNM,1:"THE NUMBER 1") G CHNUM:GMRX'?1"?".E,CHSDT
"RTN","GMRVEE0",35,0)
SDA S GMRVDT=^TMP($J,"GMRC",GMRX) F GMRX=0:0 S GMRX=$O(GMRARTY(GMRX)) Q:GMRX'>0  F GMRY=0:0 S GMRY=$O(GMRARTY(GMRX,GMRY)) Q:GMRY'>0  I GMRY'=GMRVDT K GMRARTY(GMRX,GMRY),GMRARTY("D",GMRY)
"RTN","GMRVEE0",36,0)
 Q
"RTN","GMRVEE0",37,0)
PRTCHS ; PRINT CHOICES FOR DATE/TIME DEFINED BY GMRX
"RTN","GMRVEE0",38,0)
 F GMRY=0:0 S GMRY=$O(GMRARTY(GMRY)) Q:GMRY'>0  I $D(GMRARTY(GMRY,GMRX)) S GMRDA=GMRARTY(GMRY,GMRX) D PRTLN
"RTN","GMRVEE0",39,0)
 Q
"RTN","GMRVEE0",40,0)
PRTLN ; PRINT DATA FOR VITAL RECORD DEFINED BY GMRDA
"RTN","GMRVEE0",41,0)
 S GMRDAT=$S($D(^GMR(120.5,GMRDA,0)):^(0),1:"") Q:GMRDAT=""
"RTN","GMRVEE0",42,0)
 K GMRVX S GMRVX=$S($D(^GMRD(120.51,GMRY,0)):$P(^(0),"^",2),1:""),GMRVX(0)=$P(GMRDAT,"^",8) D:GMRVX(0)>0 EN1^GMRVSAS0
"RTN","GMRVEE0",43,0)
 S GMRZZ="",GMRZZ(1)="" I $P($G(^GMR(120.5,GMRDA,5,0)),"^",4)>0 K GMRVARY S GMRVARY="" D CHAR^GMRVCHAR(GMRDA,.GMRVARY,GMRY) S GMRZZ=$$WRITECH^GMRVCHAR(GMRDA,.GMRVARY,9) S:GMRZZ'=""&(GMRVX'="PO2") GMRZZ=" ("_GMRZZ_")"
"RTN","GMRVEE0",44,0)
 I GMRVX="T",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" F ("_$J(GMRVX(0)-32*5/9,0,1)_" C)"
"RTN","GMRVEE0",45,0)
 I GMRVX="HT",GMRVX(0)>0 S GMRVX(0)=$S(GMRVX(0)\12:GMRVX(0)\12_" ft ",1:"")_$S(GMRVX(0)#12:GMRVX(0)#12_" in",1:"")_" ("_$J(GMRVX(0)*2.54,0,2)_" cm)"
"RTN","GMRVEE0",46,0)
 I GMRVX="WT",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" lb ("_$J(GMRVX(0)/2.2,0,2)_" kg)"
"RTN","GMRVEE0",47,0)
 I GMRVX="PN" D
"RTN","GMRVEE0",48,0)
 . I GMRVX(0)=0 S GMRVX(0)=GMRVX(0)_" No pain" Q
"RTN","GMRVEE0",49,0)
 . I GMRVX(0)=99 S GMRVX(0)=GMRVX(0)_" Unable to respond" Q
"RTN","GMRVEE0",50,0)
 . I GMRVX(0)=10 S GMRVX(0)=GMRVX(0)_" Worst imaginable pain" Q
"RTN","GMRVEE0",51,0)
 I GMRVX="CG",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" in ("_$J(+GMRVX(0)/.3937,0,2)_" cm)"
"RTN","GMRVEE0",52,0)
 I GMRVX="CVP",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" cmH2O ("_$J(GMRVX(0)/1.36,0,1)_" mmHg)"
"RTN","GMRVEE0",53,0)
 I GMRVX="PO2",GMRVX(0)>0 D
"RTN","GMRVEE0",54,0)
 .N GMRVPO S GMRVPO=$P(GMRDAT,"^",10)
"RTN","GMRVEE0",55,0)
 .S GMRVX(0)="Pulse oximetry "_GMRVX(0)_"%"_$S(GMRVPO'="":" with supplemental O2 "_$S(GMRVPO["l/min":$P(GMRVPO," l/min")_"L/min",1:"")_$S(GMRVPO["l/min":$P(GMRVPO," l/min",2),1:GMRVPO),1:"")
"RTN","GMRVEE0",56,0)
 .Q
"RTN","GMRVEE0",57,0)
 I GMRVX="P" D
"RTN","GMRVEE0",58,0)
 . I GMRZZ'="",GMRVX(0)=1 S:$F(GMRZZ,"DORSALIS PEDIS")>0 GMRVX(1)=""
"RTN","GMRVEE0",59,0)
 . I GMRZZ'="",GMRVX(0)=0 S:$F(GMRZZ,"DORSALIS PEDIS")>0 GMRVX(1)=1
"RTN","GMRVEE0",60,0)
 . Q
"RTN","GMRVEE0",61,0)
 W !,?5,$S(GMRVX="PN":"Pain",1:GMRVX),": ",GMRVX(0),$S('$D(GMRVX(1)):" ",'GMRVX(1):" ",1:"*")
"RTN","GMRVEE0",62,0)
 W:GMRVX="PO2" !,?10,"via " W GMRZZ
"RTN","GMRVEE0",63,0)
 Q
"RTN","GMRVEE0",64,0)
DATACK ; CHECK TO SEE IF DATA FOR THIS PATIENT FOR THIS DATE.  IF THERE IS
"RTN","GMRVEE0",65,0)
 ; SET UP AN ARRAY GMRARTY WITH GMRARTY=$S(0:ONE TYPE ONLY,1:MORE
"RTN","GMRVEE0",66,0)
 ; THAN ONE TYPE) AND GMRARTY(TYPE IEN)=120.5 ENTRY
"RTN","GMRVEE0",67,0)
 K GMRARTY S X1=GMRVDATE,X2=1 D C^%DTC S GMRVDT(0)=$P(X,".",1)
"RTN","GMRVEE0",68,0)
 F GMRVITY=0:0 S GMRVITY=$O(^GMR(120.5,"AA",DFN,GMRVITY)) Q:GMRVITY'>0  D CNLP
"RTN","GMRVEE0",69,0)
 I '$D(GMRARTY) S GMROUT=1
"RTN","GMRVEE0",70,0)
 Q
"RTN","GMRVEE0",71,0)
CNLP ;
"RTN","GMRVEE0",72,0)
 F GMRVDT=(9999999-GMRVDT(0)):0 S GMRVDT=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRVDT)) Q:$P(9999999-GMRVDT,".")'[$P(GMRVDATE,".")!(GMRVDT'>0)  D:$S('$P(GMRVDATE,".",2):1,1:GMRVDATE=(9999999-GMRVDT)) STARTY
"RTN","GMRVEE0",73,0)
 Q
"RTN","GMRVEE0",74,0)
STARTY ; SET GMRARTY ARRAY
"RTN","GMRVEE0",75,0)
 F GMRDA=0:0 S GMRDA=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRVDT,GMRDA)) Q:GMRDA'>0  I '$D(^GMR(120.5,GMRDA,2)) S GMRARTY=$S($D(GMRARTY):1,1:0),GMRARTY(GMRVITY,9999999-GMRVDT)=GMRDA,GMRARTY("D",9999999-GMRVDT)="" Q
"RTN","GMRVEE0",76,0)
 Q
"RTN","GMRVEE2")
0^25^B26733608
"RTN","GMRVEE2",1,0)
GMRVEE2 ;HIRMFO/YH-ENTERED IN ERROR EDIT (cont.) ;2/6/99
"RTN","GMRVEE2",2,0)
 ;;4.0;Vitals/Measurements;**1,7,11**;Apr 25, 1997
"RTN","GMRVEE2",3,0)
EN1 ; ENTER NEW DATE/TIME VITALS TAKEN
"RTN","GMRVEE2",4,0)
 S %DT(0)="-NOW",%DT("A")="Enter new date/time vitals were taken: ",%DT="AETRS" D ^%DT K %DT S:X?1"^".E!(+Y'>0) GMROUT=1 Q:GMROUT  S GMRCHC(1)=+Y
"RTN","GMRVEE2",5,0)
 Q
"RTN","GMRVEE2",6,0)
EN2 ; ENTER NEW READING
"RTN","GMRVEE2",7,0)
 S GMRENTY=8,GLVL=8,GMRVIT=GMRX,(GMRVITY,GMRTY)=$S($D(^GMRD(120.51,GMRX,0)):$P(^(0),"^",2),1:""),GMRVIT(1)=$P(^(0),"^"),GMRAINP=$S($D(^(1)):^(1),1:""),GSAVE=GMRVITY,GMRO2(GMRVITY)=""
"RTN","GMRVEE2",8,0)
 S GDT=GMRVIDT D EN1^GMRVADM G:GMROUT Q
"RTN","GMRVEE2",9,0)
ERRAT W !!,"NEW "_$S($P(GMRVIT(1),"^")'="":$P(GMRVIT(1),"^"),1:"VALUE")_": " R X:DTIME S:'$T X="^^" W ! I "^^"[X!(X="") W !,$C(7),?3,"NO UPDATING HAS OCCURRED!!" S GMROUT=1 G Q
"RTN","GMRVEE2",10,0)
 I X?1"?".E S GOPT=GMRTY_"^GMRVUT1" D @GOPT K GOPT G ERRAT
"RTN","GMRVEE2",11,0)
 I GMRTY="T"!(GMRTY="P")!(GMRTY="R") S X=$$RDSITE(X),GMRSITE=$P(X,U,2),X=$P(X,U) S GMRSITE=$$UP^XLFSTR(GMRSITE) D TPSITE^GMRVUT1
"RTN","GMRVEE2",12,0)
 I GMRTY="T"!(GMRTY="P")!(GMRTY="R") S:'$D(GMRSITE(GMRVITY)) GMROUT=1 S:GMROUT=0 GMRSITE=GMRSITE(GMRVITY) I GMROUT W !,"NO UPDATING HAS OCCURRED",!
"RTN","GMRVEE2",13,0)
 I GMRTY="CG" D  G:$G(X)="" ERRAT
"RTN","GMRVEE2",14,0)
 . X GMRAINP I $G(X)="" W !,?3,$C(7),"INVALID ENTRY??" Q
"RTN","GMRVEE2",15,0)
 . K GMRSITE(GMRVITY),GMRINF(GMRVITY) D LISTQ^GMRVQUAL,OTHERQ^GMRVQUAL
"RTN","GMRVEE2",16,0)
 G:GMROUT Q
"RTN","GMRVEE2",17,0)
 I GMRTY="PO2" X GMRAINP W:'$D(X) !,?3,$C(7),"INVALID ENTRY??" G:'$D(X) ERRAT S (GMRSITE(GMRVITY),GMRINF("GMRVITY"))="" D O2^GMRVUT3 G Q:GMROUT,Q1
"RTN","GMRVEE2",18,0)
 I GMRTY="PN" X GMRAINP W:'$D(X) !,?3,$C(7),"INVALID ENTRY??" G:'$D(X) ERRAT S (GMRSITE(GMRVITY),GMRINF("GMRVITY"))="" G Q:GMROUT,Q1
"RTN","GMRVEE2",19,0)
 I GMRTY="BP" X GMRAINP W:'$D(X) !,?3,$C(7),"INVALID ENTRY??" G:'$D(X) ERRAT D LISTQ^GMRVQUAL,OTHERQ^GMRVQUAL,CLEAR^GMRVQUAL G Q:GMROUT,Q1
"RTN","GMRVEE2",20,0)
 I GMRTY="WT" S GMRSITE=$P(X,+X,2) G:GMRSITE=""!("LlLk"'[$E(GMRSITE)) ERRAT D WTYPE^GMRVUT1 S:'$D(GMRSITE(GMRVITY)) GMROUT=1 S:GMROUT=0 GMRSITE=GMRSITE(GMRVITY) I GMROUT W !,"NO UPDATING HAS OCCURRED",!
"RTN","GMRVEE2",21,0)
 I GMRVITY="HT" S GMRSITE=$P(X,",",2),X=$P(X,",") S:GMRSITE="" GMRSITE="A" X GMRAINP W:'$D(X) !,?3,$C(7),"INVALID ENTRY??" G:'$D(X) ERRAT D TPSITE^GMRVUT1 G Q:GMROUT,Q1
"RTN","GMRVEE2",22,0)
 G:GMROUT Q X GMRAINP I '$D(X) W !,?3,$C(7),"INVALID ENTRY??" G ERRAT
"RTN","GMRVEE2",23,0)
Q1 G:GMROUT Q S GMRCHC(2)=X
"RTN","GMRVEE2",24,0)
Q S GMRVITY=GSAVE K GSAVE D CLEAR^GMRVQUAL Q
"RTN","GMRVEE2",25,0)
EN3 ; SELECT NEW PATIENT FOR VITALS
"RTN","GMRVEE2",26,0)
 S DIC("A")="Select the NEW Patient's name: ",DIC(0)="AEQM",DIC="^DPT(" D ^DIC K DIC S:$D(DTOUT)!$D(DUOUT)!(+Y'>0) GMROUT=1 Q:GMROUT  S GMRCHC(3)=+Y
"RTN","GMRVEE2",27,0)
 Q
"RTN","GMRVEE2",28,0)
DUPREC ;PRINT WARNING MESSAGE IF THE DATE/TIME CHANGE WILL CAUSE DUPLICATE RECORD
"RTN","GMRVEE2",29,0)
 W ! S GVIT=0 F GII=0:0 S GVIT=$O(GMRARTY(GVIT)) Q:GVIT'>0  I $D(^GMR(120.5,"AA",DFN,GVIT,GDATE)) D CHKER
"RTN","GMRVEE2",30,0)
 K GDA,GVIT,GII Q
"RTN","GMRVEE2",31,0)
CHKER ;
"RTN","GMRVEE2",32,0)
 S GDA=0 F GDA=0:0 S GDA=$O(^GMR(120.5,"AA",DFN,GVIT,GDATE,GDA)) Q:GDA'>0  I '$D(^GMR(120.5,GDA,2)) S GMROUT=1 W !,$P($S($D(^GMRD(120.51,GVIT,0)):^(0),1:0),"^"),"  already exists on ",Y,"   reading - ",$P(^GMR(120.5,GDA,0),"^",8)
"RTN","GMRVEE2",33,0)
 Q
"RTN","GMRVEE2",34,0)
DUPDT ;SET EXISTING OLD VITAL AS ERROR RECORD
"RTN","GMRVEE2",35,0)
 S GMRDA=0 F GMRDA=0:0 S GMRDA=$O(^GMR(120.5,"AA",DFN,GMRY,GDATE,GMRDA)) Q:GMRDA'>0  I '$D(^GMR(120.5,GMRDA,2)) D ERREN^GMRVEE1 Q
"RTN","GMRVEE2",36,0)
 Q
"RTN","GMRVEE2",37,0)
PRTEED ; PRINT ERROR RECORD
"RTN","GMRVEE2",38,0)
 S GMRDAT=^GMR(120.5,GMRDA,0)
"RTN","GMRVEE2",39,0)
 S GMRTY=$S($D(^GMRD(120.51,GMRX,0)):^(0),1:""),GMRAINP=$S($D(^GMRD(120.51,$P(GMRDAT,"^",3),1))#2:^(1),1:""),GMRVX=$P(GMRTY,"^",2),GMRVX(0)=$P(GMRDAT,U,8),GMRVX(1)=0 D:GMRVX(0)>0 EN1^GMRVSAS0 S GMRVX(1)=$S(GMRVX(1)>0:" *",1:"")
"RTN","GMRVEE2",40,0)
 S GMRZZ="",GMRZZ(1)="" I $P($G(^GMR(120.5,GMRDA,5,0)),"^",4)>0 K GMRVARY S GMRVARY="" D CHAR^GMRVCHAR(GMRDA,.GMRVARY,GMRX) S GMRZZ=$$WRITECH^GMRVCHAR(GMRDA,.GMRVARY,9) S:GMRZZ'="" GMRZZ(1)=" ("_GMRZZ_")"
"RTN","GMRVEE2",41,0)
 I GMRVX="T",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" F ("_$J(GMRVX(0)-32*5/9,0,1)_" C)"
"RTN","GMRVEE2",42,0)
 I GMRVX="WT",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" lb ("_$J(GMRVX(0)/2.2,0,2)_" kg)"
"RTN","GMRVEE2",43,0)
 I GMRVX="HT",GMRVX(0)>0 S GMRVX(0)=$S(GMRVX(0)\12:GMRVX(0)\12_" ft ",1:"")_$S(GMRVX(0)#12:GMRVX(0)#12_" in",1:"")_" ("_$J(GMRVX(0)*2.54,0,2)_" cm)"
"RTN","GMRVEE2",44,0)
 I GMRVX="CG",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" in ("_$J(+GMRVX(0)/.3937,0,2)_" cm)"
"RTN","GMRVEE2",45,0)
 I GMRVX="CVP",GMRVX(0)>0 S GMRVX(0)=GMRVX(0)_" cmH2O ("_$J(GMRVX(0)/1.36,0,1)_" mmHg)"
"RTN","GMRVEE2",46,0)
 I GMRVX="PO2",GMRVX(0)>0 D
"RTN","GMRVEE2",47,0)
 .N GMRVPO S GMRVPO=$P(GMRDAT,"^",10)
"RTN","GMRVEE2",48,0)
 .S GMRVX(0)="Pulse oximetry "_GMRVX(0)_"%"_$S(GMRVPO'="":" with supplemental O2 "_$S(GMRVPO["l/min":$P(GMRVPO," l/min")_"L/min",1:"")_$S(GMRVPO["l/min":$P(GMRVPO," l/min",2),1:GMRVPO),1:"")
"RTN","GMRVEE2",49,0)
 .Q
"RTN","GMRVEE2",50,0)
 I GMRX=$O(GMRARTY(0)) S Y=$P(GMRDAT,"^") W ! D DT^DIQ
"RTN","GMRVEE2",51,0)
 W !,?2,$S($P(GMRTY,"^",2)="PN":"PN (pain)",1:$P(GMRTY,"^",2)),":  ",$S($P(GMRDAT,U,8)'="":GMRVX(0)_GMRVX(1),1:"")
"RTN","GMRVEE2",52,0)
 I GMRTY="PN" D
"RTN","GMRVEE2",53,0)
 . I GMRVX(0)=0 W " No pain" Q
"RTN","GMRVEE2",54,0)
 . I GMRVX(0)=99 W " Unable to respond" Q
"RTN","GMRVEE2",55,0)
 . I GMRVX(0)=10 W " Worst imaginable to respond" Q
"RTN","GMRVEE2",56,0)
 W:GMRVX="PO2"&(GMRZZ'="") !,?8,"via " W " ",GMRZZ
"RTN","GMRVEE2",57,0)
 Q
"RTN","GMRVEE2",58,0)
RDSITE(X) ; THIS FUNCTION CONVERTS A VITAL DATA ENTRY IN X TO A SITE AND
"RTN","GMRVEE2",59,0)
 ; A READING.  IT RETURNS SITE^READING.
"RTN","GMRVEE2",60,0)
 N Y,Z,I,READ,SITE
"RTN","GMRVEE2",61,0)
 S Y=$TR(X,"0123456789.","99999999999")
"RTN","GMRVEE2",62,0)
 S Z=$L(X)+1,I=0 F  S I=$F(Y,"9",I) Q:I'>0  S Z=I
"RTN","GMRVEE2",63,0)
 S READ=$E(X,1,Z-1),SITE=$E(X,Z,$L(X))
"RTN","GMRVEE2",64,0)
 Q READ_"^"_SITE
"RTN","GMRVER1")
0^8^B29426521
"RTN","GMRVER1",1,0)
GMRVER1 ;HIRMFO/RM,YH-REPORT OF VITALS ENTERED IN ERROR FOR A PATIENT ;5/26/99  08:57
"RTN","GMRVER1",2,0)
 ;;4.0;Vitals/Measurements;**1,7,11**;Apr 25, 1997
"RTN","GMRVER1",3,0)
EN1 ; ENTRY TO REPORT FROM TASKMAN
"RTN","GMRVER1",4,0)
 D DEM^VADPT D NOW^%DTC S Y=% X ^DD("DD") S GMRPDT=$P(Y,"@")_" ("_$P($P(Y,"@",2),":",1,2)_")",(GMROUT,GMRPG)=0,GMR1ST=1,$P(GMRDSH,"-",81)=""
"RTN","GMRVER1",5,0)
 F GMRVITY=0:0 S GMRVITY=$O(^GMR(120.5,"AA",DFN,GMRVITY)) Q:GMRVITY'>0  F GMRVDT=0:0 S GMRVDT=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRVDT)) Q:GMRVDT'>0  S GMRVDATE=9999999-GMRVDT I GMRVDATE'<GMRVSDT,GMRVDATE'>GMRVFDT D SORT
"RTN","GMRVER1",6,0)
 U IO D HDR I $O(^TMP($J,0))'>0 W !,"THERE IS NO DATA FOR THIS REPORT" G QT
"RTN","GMRVER1",7,0)
 F GMRDATE=0:0 S GMRDATE=$O(^TMP($J,GMRDATE)) Q:GMRDATE'>0!GMROUT  F GMRVITY=0:0 S GMRVITY=$O(^TMP($J,GMRDATE,GMRVITY)) Q:GMRVITY'>0!GMROUT  F GMRVDA=0:0 S GMRVDA=$O(^TMP($J,GMRDATE,GMRVITY,GMRVDA)) Q:GMRVDA'>0  D WRT Q:GMROUT
"RTN","GMRVER1",8,0)
QT ;
"RTN","GMRVER1",9,0)
 I IOSL'<($Y+8) F X=1:1 W ! Q:IOSL<($Y+8)
"RTN","GMRVER1",10,0)
 I 'GMROUT,$E(IOST)'="P" W !!,"Press return to continue ""^"" to escape " R X:DTIME
"RTN","GMRVER1",11,0)
Q ; KILL VARIBLES
"RTN","GMRVER1",12,0)
 S:$D(ZTQUEUED) ZTREQ="@" K ^TMP($J),DFN,GMR1ST,GMRDAT,GMRDATE,GMRDSH,GMROUT,GMRPDT,GMRPG,GMRPR,GMRSITE,GMRVDA,GMRVDATE,GMRVDT,GMRVERR,GMRVFDT,GMRVITY,GMRVSDT,GMRVX,POP,DIPGM,GMRP,GMRTYPE,GMROV,DIPGM,%T D KVAR^VADPT K VA W:$E(IOST)'="C" @IOF
"RTN","GMRVER1",13,0)
 K GREASON,GMRZZ,GMRVARY,GX,GMRQUAL,GMRVPO D ^%ZISC Q
"RTN","GMRVER1",14,0)
SORT ;
"RTN","GMRVER1",15,0)
 F GMRVERR=0:0 S GMRVERR=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRVDT,GMRVERR)) Q:GMRVERR'>0  I '$D(^GMR(120.5,GMRVERR,2)) Q
"RTN","GMRVER1",16,0)
 F GMRVDA=0:0 S GMRVDA=$O(^GMR(120.5,"AA",DFN,GMRVITY,GMRVDT,GMRVDA)) Q:GMRVDA'>0  I $D(^GMR(120.5,GMRVDA,2)) S ^TMP($J,GMRVDATE,GMRVITY,GMRVDA)=GMRVERR
"RTN","GMRVER1",17,0)
 Q
"RTN","GMRVER1",18,0)
WRT ;
"RTN","GMRVER1",19,0)
 D:IOSL<($Y+8) HDR Q:GMROUT  K GMRPR
"RTN","GMRVER1",20,0)
 S GMRVERR=^TMP($J,GMRDATE,GMRVITY,GMRVDA),GMRDAT("GOOD")=$S($D(^GMR(120.5,+GMRVERR,0)):^(0),1:"")
"RTN","GMRVER1",21,0)
 I $D(^GMR(120.5,+GMRVERR,0)) D
"RTN","GMRVER1",22,0)
 . K GMRVX S GMRVX=$P(^GMRD(120.51,GMRVITY,0),"^",2),GMRVX(0)=$P(GMRDAT("GOOD"),"^",8) D:GMRVX(0)>0!(GMRVX(0)=0) EN1^GMRVSAS0 S GMRVX(1)=$S('$D(GMRVX(1)):"",'GMRVX(1):"",1:"*")
"RTN","GMRVER1",23,0)
 . S GMRVX(0)=$$WRTDAT^GMRVER0(GMRVX,GMRVX(0))
"RTN","GMRVER1",24,0)
 . S GMRZZ="" I $P($G(^GMR(120.5,GMRVERR,5,0)),"^",4)>0 K GMRVARY S GMRVARY="" D CHAR^GMRVCHAR(GMRVERR,.GMRVARY,GMRVITY) S GMRZZ=$$WRITECH^GMRVCHAR(GMRVERR,.GMRVARY,9) S:GMRZZ'=""&(GMRVX'="PO2") GMRZZ=" ("_GMRZZ_")"
"RTN","GMRVER1",25,0)
 . I GMRVX="P" D
"RTN","GMRVER1",26,0)
 .. I GMRZZ'="",GMRVX(0)=1 S:$F(GMRZZ,"DORSALIS PEDIS")>0 GMRVX(1)=""
"RTN","GMRVER1",27,0)
 .. I GMRZZ'="",GMRVX(0)=0 S:$F(GMRZZ,"DORSALIS PEDIS")>0 GMRVX(1)="*"
"RTN","GMRVER1",28,0)
 .. Q
"RTN","GMRVER1",29,0)
 . S GMRVPO=$P(^GMR(120.5,GMRVERR,0),"^",10)
"RTN","GMRVER1",30,0)
 . S $P(GMRDAT("GOOD"),"^",8)=GMRVX(0)_GMRVX(1)_$S(GMRVPO'="":" with supplemental O2 "_$S(GMRVPO["l/min":$P(GMRVPO," l/min")_"L/min",1:"")_$S(GMRVPO["l/min":$P(GMRVPO," l/min",2),1:GMRVPO),1:"")_$S(GMRZZ'=""&(GMRVX="PO2"):" via ",1:"")_GMRZZ
"RTN","GMRVER1",31,0)
 . Q
"RTN","GMRVER1",32,0)
 I $D(^GMR(120.5,+GMRVDA,0)) D
"RTN","GMRVER1",33,0)
 . S GMRDAT("BAD")=$S($D(^GMR(120.5,+GMRVDA,0)):^(0),1:"")
"RTN","GMRVER1",34,0)
 . K GMRVX,GMRVX(0),GMRVX(1) S GMRVX=$P(^GMRD(120.51,GMRVITY,0),"^",2),GMRVX(0)=$P(GMRDAT("BAD"),"^",8) D:GMRVX(0)>0 EN1^GMRVSAS0 S GMRVX(1)=$S('$D(GMRVX(1)):"",'GMRVX(1):"",1:"*")
"RTN","GMRVER1",35,0)
 . S GMRVX(0)=$$WRTDAT^GMRVER0(GMRVX,GMRVX(0))
"RTN","GMRVER1",36,0)
 . S GMRZZ="" I $P($G(^GMR(120.5,GMRVDA,5,0)),"^",4)>0 K GMRVARY S GMRVARY="" D CHAR^GMRVCHAR(GMRVDA,.GMRVARY,GMRVITY) S GMRZZ=$$WRITECH^GMRVCHAR(GMRVDA,.GMRVARY,9) S:GMRZZ'=""&(GMRVX'="PO2") GMRZZ=" ("_GMRZZ_")"
"RTN","GMRVER1",37,0)
 . I GMRVX="P" D
"RTN","GMRVER1",38,0)
 .. I GMRZZ'="",GMRVX(0)=1 S:$F(GMRZZ,"DORSALIS PEDIS")>0 GMRVX(1)=""
"RTN","GMRVER1",39,0)
 .. I GMRZZ'="",GMRVX(0)=0 S:$F(GMRZZ,"DORSALIS PEDIS")>0 GMRVX(1)="*"
"RTN","GMRVER1",40,0)
 .. Q
"RTN","GMRVER1",41,0)
 . S GMRVPO=$P(^GMR(120.5,GMRVDA,0),"^",10)
"RTN","GMRVER1",42,0)
 . S $P(GMRDAT("BAD"),"^",8)=GMRVX(0)_GMRVX(1)_$S(GMRVPO'="":" with supplemental O2 "_$S(GMRVPO["l/min":$P(GMRVPO," l/min")_"L/min",1:"")_$S(GMRVPO["l/min":$P(GMRVPO," l/min",2),1:GMRVPO),1:"")_$S(GMRZZ'=""&(GMRVX="PO2"):" via ",1:"")_GMRZZ
"RTN","GMRVER1",43,0)
 . S GREASON="" D ERREASON^GMRVER0
"RTN","GMRVER1",44,0)
 S Y=GMRDATE D D^DIQ S GMRPR("VSDT")=Y
"RTN","GMRVER1",45,0)
 S GMRPR("ENUS")=$S($P(GMRDAT("BAD"),"^",6)="":"",$D(^VA(200,$P(GMRDAT("BAD"),"^",6),0)):$E($P(^(0),"^"),1,21),1:"")
"RTN","GMRVER1",46,0)
 S GMRPR("TYPE")=$S(GMRVITY="":"",$D(^GMRD(120.51,GMRVITY,0)):$P(^(0),"^"),1:"")
"RTN","GMRVER1",47,0)
 W !,GMRPR("VSDT"),?21,GMRPR("TYPE"),?58,GMRPR("ENUS"),!,?3,"Reason: ",GREASON
"RTN","GMRVER1",48,0)
 I $G(GMRVERR)>0 W !,?3,"(Revised)  ",$P(GMRDAT("GOOD"),"^",8)
"RTN","GMRVER1",49,0)
 I GMRVX="PN" D
"RTN","GMRVER1",50,0)
 . I $P(GMRDAT("GOOD"),"^",8)=0 W " No pain" Q
"RTN","GMRVER1",51,0)
 . I $P(GMRDAT("GOOD"),"^",8)=99 W " Unable to respond" Q
"RTN","GMRVER1",52,0)
 . I $P(GMRDAT("GOOD"),"^",8)=10 W " Worst imaginable pain" Q
"RTN","GMRVER1",53,0)
 I GMRVDA>0 W !,?3,"(Bad data)  ",$P(GMRDAT("BAD"),"^",8)
"RTN","GMRVER1",54,0)
 I GMRVX="PN" D
"RTN","GMRVER1",55,0)
 . I $P(GMRDAT("BAD"),"^",8)=0 W " No pain" Q
"RTN","GMRVER1",56,0)
 . I $P(GMRDAT("BAD"),"^",8)=99 W " Unable to respond" Q
"RTN","GMRVER1",57,0)
 . I $P(GMRDAT("BAD"),"^",8)=10 W " Worst imaginable pain" Q
"RTN","GMRVER1",58,0)
 W ! Q
"RTN","GMRVER1",59,0)
HDR ;
"RTN","GMRVER1",60,0)
 I $E(IOST)'="P",'GMR1ST W !,"Press return to continue ""^"" to escape " R X:DTIME I X="^"!'$T S GMROUT=1 Q
"RTN","GMRVER1",61,0)
 W:'($E(IOST)'="C"&'GMRPG) @IOF S GMR1ST=0,GMRPG=GMRPG+1
"RTN","GMRVER1",62,0)
 W !,GMRPDT,?22,"ENTERED IN ERROR VITAL/MEASUREMENT REPORT",?70,"PAGE ",GMRPG
"RTN","GMRVER1",63,0)
 W !,"Patient: ",VADM(1),?$X+5,$P(VADM(2),"^",2),!!,"Date Vit./Meas. taken",?58,"User who made error",!,GMRDSH,!
"RTN","GMRVER1",64,0)
 Q
"RTN","GMRVGR0")
0^9^B15526665
"RTN","GMRVGR0",1,0)
GMRVGR0 ;HIRMFO/MH,YH-VITALS GRAPH (PART 1) ;3/10/99
"RTN","GMRVGR0",2,0)
 ;;4.0;Vitals/Measurements;**1,7,11**;Apr 25, 1997
"RTN","GMRVGR0",3,0)
EN1 ;ENTRY POINT FROM GMRVSR0 TO PRINT SF-511 GRAPH FOR KYOCERA
"RTN","GMRVGR0",4,0)
 S GMRHT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMRVGR0",5,0)
 S (GMROUT,GHT)="",^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMRVGR0",6,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMRVGR0",7,0)
 F GTYPE="B","H","P","R","T","W","PO2","CVP","CG","PN" D SETT
"RTN","GMRVGR0",8,0)
 S GRPT=5 D SETIO U IO D ^GMRVGR1
"RTN","GMRVGR0",9,0)
Q1 K GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMRVGR0",10,0)
 W:$E(IOST)="P"!$D(IO("S")) !
"RTN","GMRVGR0",11,0)
 D QIO^GMRVGR5 K GRPT,GMROUT,GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GHT,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMRVGR0",12,0)
 K GLINE,GMRQUAL,^TMP($J,"GTNM") Q
"RTN","GMRVGR0",13,0)
SETT ;SET GMRT
"RTN","GMRVGR0",14,0)
 S GTYP(1)=$S(GTYPE="B":"BLOOD PRESSURE",GTYPE="P":"PULSE",GTYPE="R":"RESPIRATION",GTYPE="T":"TEMPERATURE",GTYPE="H":"HEIGHT",GTYPE="W":"WEIGHT",GTYPE="CG":"CIRCUMFERENCE/GIRTH",GTYPE="PO2":"PULSE OXIMETRY",1:"")
"RTN","GMRVGR0",15,0)
 I GTYP(1)="" S GTYP(1)=$S(GTYPE="CVP":"CENTRAL VENOUS PRESSURE",GTYPE="PN":"PAIN",1:"")
"RTN","GMRVGR0",16,0)
 Q:GTYP(1)=""
"RTN","GMRVGR0",17,0)
 S GTYP=$O(^GMRD(120.51,"B",GTYP(1),""))
"RTN","GMRVGR0",18,0)
 I GTYP>0 F GX=GSTART1:0 S GX=$O(^GMR(120.5,"AA",DFN,GTYP,GX)) Q:GX>GEND1!(GX'>0)  F GEN=0:0 S GEN=$O(^GMR(120.5,"AA",DFN,GTYP,GX,GEN)) Q:GEN'>0  I '$D(^GMR(120.5,GEN,2)) D BLDARR
"RTN","GMRVGR0",19,0)
 Q
"RTN","GMRVGR0",20,0)
BLDARR S GDATA=$S($D(^GMR(120.5,GEN,0)):^(0),1:"")
"RTN","GMRVGR0",21,0)
 S GMRVX=GTYPE,GMRVX(0)=$P(GDATA,"^",8),GMRVX(1)=0  D:GMRVX(0)>0!(GMRVX(0)<0)!($E(GMRVX(0))="0") EN1^GMRVSAS0
"RTN","GMRVGR0",22,0)
 K GMRVARY S GMRVARY="" I $P($G(^GMR(120.5,GEN,5,0)),"^",4)>0 D CHAR^GMRVCHAR(GEN,.GMRVARY,GTYP)
"RTN","GMRVGR0",23,0)
 K GG S GG="" I $O(GMRVARY(0)) D
"RTN","GMRVGR0",24,0)
 . S GG(1)=0 F  S GG(1)=$O(GMRVARY(GG(1))) Q:GG(1)'>0  S GG(2)=0 F  S GG(2)=$O(GMRVARY(GG(1),GG(2))) Q:GG(2)'>0  S GG(3)="" F  S GG(3)=$O(GMRVARY(GG(1),GG(2),GG(3))) Q:GG(3)=""  S GG=GG_$S(GG="":"",1:";")_GG(3)
"RTN","GMRVGR0",25,0)
 S ^TMP($J,"GMRVG",GTYPE,9999999-GX,$P(GDATA,"^",8))=GG_"^"_$S($G(GMRVX(1))>0:1,1:"")_"^^"_$P(GDATA,"^",10)
"RTN","GMRVGR0",26,0)
 I GTYPE="P",GG["DORSALIS PEDIS",$P(GDATA,"^",8)=1 S $P(^TMP($J,"GMRVG",GTYPE,9999999-GX,$P(GDATA,"^",8)),"^",2)=0
"RTN","GMRVGR0",27,0)
 S:$D(^TMP($J,"GMRVG","H",9999999-GX,$P(GDATA,"^",8))) GHT=$P(GDATA,"^",8)
"RTN","GMRVGR0",28,0)
 I GTYPE="B",$P(GDATA,"^",8)'>0 S ^TMP($J,"GMRVG","B",9999999-GX,$P(GDATA,"^",8))="^^"
"RTN","GMRVGR0",29,0)
 I GTYPE="B",$L($P(GDATA,"^",8))>7,+$P(GDATA,"^",8)>0 D
"RTN","GMRVGR0",30,0)
 . S ^TMP($J,"GMRVG","B",9999999-GX,$P($P(GDATA,"^",8),"/",1,2))=^TMP($J,"GMRVG","B",9999999-GX,$P(GDATA,"^",8)) K ^($P(GDATA,"^",8)) S ^TMP($J,"GMRVG","C",9999999-GX,"/"_$P($P(GDATA,"^",8),"/",3))=GG
"RTN","GMRVGR0",31,0)
 K GG Q 
"RTN","GMRVGR0",32,0)
SETIO ;
"RTN","GMRVGR0",33,0)
 S X="GMRYRP0" X ^%ZOSF("TEST") Q:'$T
"RTN","GMRVGR0",34,0)
 D IO^GMRVGR5
"RTN","GMRVGR0",35,0)
 D SETIOAR
"RTN","GMRVGR0",36,0)
 Q
"RTN","GMRVGR0",37,0)
SETIOAR F GTYPE1="XI"_($P(^GMRD(126.56,0),"^",4)+4),"XO"_($P(^GMRD(126.58,0),"^",4)+1) F GDT=0:0 S GDT=$O(^TMP($J,"GMR",GTYPE1,GDT)) Q:GDT'>0  F GDTA=0:0 S GDTA=$O(^TMP($J,"GMR",GTYPE1,GDT,GDTA)) Q:GDTA=""  D SETIOAR1
"RTN","GMRVGR0",38,0)
 Q
"RTN","GMRVGR0",39,0)
SETIOAR1 S:GTYPE1["XI" ^TMP($J,"GMRVG","I",GDT,GDTA)="^" S:GTYPE1["XO" ^TMP($J,"GMRVG","O",GDT,GDTA)="^"
"RTN","GMRVGR0",40,0)
 Q
"RTN","GMRVGR1")
0^10^B34450574
"RTN","GMRVGR1",1,0)
GMRVGR1 ;HIRMFO/YH-SET ^TMP($J) GLOBAL ;5/5/99  11:33
"RTN","GMRVGR1",2,0)
 ;;4.0;Vitals/Measurements;**1,9,11**;Apr 25, 1997
"RTN","GMRVGR1",3,0)
 ;CONTINUTATION OF GMRVGR0
"RTN","GMRVGR1",4,0)
GRAPH S (GCNT,GCNTD,GPG)=0 D DEM^VADPT,INP^VADPT,SETV
"RTN","GMRVGR1",5,0)
 F GK="H","W","T","P","R","B","I","O","PO2","CVP","CG","PN" D
"RTN","GMRVGR1",6,0)
 . S ^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMRVGR1",7,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMRVGR1",8,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMRVGR1",9,0)
 F GPGS=1:1:GPG D
"RTN","GMRVGR1",10,0)
 . F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMRVGR1",11,0)
 . K GMRQUAL S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE S ^TMP($J,"GMRK","G200")=GMRRMBD
"RTN","GMRVGR1",12,0)
 . D PAGE,EN1^GMRVGR2,EN2^GMRVGR3,EN3^GMRVGR4,EN4^GMRVGR6 S ^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMRVGR1",13,0)
 D KVAR^VADPT K VA Q
"RTN","GMRVGR1",14,0)
PAGE ;Set temp. and pulse starting point in the graph
"RTN","GMRVGR1",15,0)
 D SETV
"RTN","GMRVGR1",16,0)
 I ^TMP($J,"GMRK","G50")="" F GI=51:1:59 S ^TMP($J,"GMRK","G50")=^TMP($J,"GMRK","G"_GI),^TMP($J,"GMRK","G50M")=0.2+(1.6*(GI-50)) Q:^TMP($J,"GMRK","G50")'=""
"RTN","GMRVGR1",17,0)
 I ^TMP($J,"GMRK","G82")="" F GI=83:1:91 S ^TMP($J,"GMRK","G82")=^TMP($J,"GMRK","G"_GI),^TMP($J,"GMRK","G82M")=0.6+(1.6*(GI-82)) Q:^TMP($J,"GMRK","G82")'=""
"RTN","GMRVGR1",18,0)
 I $D(GMRQUAL) D LEGEND^GMRVLGQU
"RTN","GMRVGR1",19,0)
 K GG,GI,GMRVJ,GSYNO Q
"RTN","GMRVGR1",20,0)
SETV ;Set patient data in ^TMP($J,"GMRK" global
"RTN","GMRVGR1",21,0)
 S ^TMP($J,"GMRK","G194")=$S(VADM(1)'="":VADM(1),1:"         ")_"  "_$S(VADM(2)'="":$P(VADM(2),"^",2),1:" "),GDOB=$S($D(VADM(3)):$P(VADM(3),"^",2),1:" "),GAGE=$S($D(VADM(4)):VADM(4),1:" ")
"RTN","GMRVGR1",22,0)
 S ^TMP($J,"GMRK","G197")=$S($D(VADM(5)):$P(VADM(5),"^",2),1:" "),^TMP($J,"GMRK","G198")=$S($D(GMRWARD(1)):"Unit: "_GMRWARD(1),1:"Unit:  ")
"RTN","GMRVGR1",23,0)
 S GMRRMBD=$S('(VAIN(5)=""):"Room: "_$P(VAIN(5),"-",1,2),1:"Room:  "),^TMP($J,"GMRK","G196")=$S($D(GDOB)&($D(GAGE)):GDOB_" ("_GAGE_")",1:" ")
"RTN","GMRVGR1",24,0)
 I '$D(GMRVHLOC) S GMRVHLOC=$P($G(^DIC(42,+$G(VAIN(4)),44)),"^")
"RTN","GMRVGR1",25,0)
 S GMRDIV="Division: "_$S(GMRVHLOC>0:$$GET1^DIQ(4,+$$GET1^DIQ(44,+GMRVHLOC,3,"I"),.01,"I"),1:"")
"RTN","GMRVGR1",26,0)
 Q
"RTN","GMRVGR1",27,0)
DATE F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMRVGR1",28,0)
 Q
"RTN","GMRVGR1",29,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMRVGR1",30,0)
 Q
"RTN","GMRVGR1",31,0)
SETD F GI="H","W","T","P","R","B","I","O","C","PN" S GJ=$F("WTXPXRBIOCH",GI),GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA
"RTN","GMRVGR1",32,0)
 F GI="PO2","CVP","CG" S GJ=0,GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA
"RTN","GMRVGR1",33,0)
 Q
"RTN","GMRVGR1",34,0)
SETA ;Store measurements in ^TMP($J,"GMRK" global
"RTN","GMRVGR1",35,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMRVGR1",36,0)
 I GI="PN" S ^TMP($J,"GMRK","G"_(1660+GCNTD))=GK Q
"RTN","GMRVGR1",37,0)
 S (GMRSITE,GMRSITE(1),GMRINF,GMRVJ)=""
"RTN","GMRVGR1",38,0)
 I GK'="" D
"RTN","GMRVGR1",39,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GI,GDT1,GK)),"^"),GMRVJ=$P($G(^(GK)),"^",2),GMRINF=$P($G(^(GK)),"^",4)
"RTN","GMRVGR1",40,0)
 . I GMRSITE(1)'="" D SYNOARY^GMRVLGQU
"RTN","GMRVGR1",41,0)
 I GI="H" D  Q
"RTN","GMRVGR1",42,0)
 . S ^TMP($J,"GMRK","G"_(270+GCNTD))=GK_" "_GMRSITE,^TMP($J,"GMRK","G"_(290+GCNTD))=$S(GK>0:$J(GK*2.54,0,2),1:"") S:GK>0 GMRHT=(GK*2.54)/100
"RTN","GMRVGR1",43,0)
 I GI="C" S ^TMP($J,"GMRK","G"_(1640+GCNTD))=GK_"  "_^TMP($J,"GMRK","G"_(1640+GCNTD)) Q
"RTN","GMRVGR1",44,0)
 I GI="PO2"!(GI="CVP")!(GI="CG") D  Q
"RTN","GMRVGR1",45,0)
 . I GI="PO2" D
"RTN","GMRVGR1",46,0)
 . . S (GMRINF(1),GMRINF(2))="" I GMRINF'="" D PO2^GMRVLGQU(.GMRINF)
"RTN","GMRVGR1",47,0)
 . . S ^TMP($J,"GMRK","G"_(1100+GCNTD))=GK_$S(GMRVJ=1:"*",1:" ")
"RTN","GMRVGR1",48,0)
 . . S ^TMP($J,"GMRK","G"_(1130+GCNTD))=GMRINF(1)
"RTN","GMRVGR1",49,0)
 . . S ^TMP($J,"GMRK","G"_(1150+GCNTD))=GMRINF(2)
"RTN","GMRVGR1",50,0)
 . . S ^TMP($J,"GMRK","G"_(1170+GCNTD))=GMRSITE
"RTN","GMRVGR1",51,0)
 . . Q
"RTN","GMRVGR1",52,0)
 . I GI="CVP" D
"RTN","GMRVGR1",53,0)
 . . S ^TMP($J,"GMRK","G"_(1200+GCNTD))=$S(GK>0!(GK<0):$J(GK,0,1),1:GK)_$S(GMRVJ=1:"*",1:" ")
"RTN","GMRVGR1",54,0)
 . . S ^TMP($J,"GMRK","G"_(1230+GCNTD))=$S(GK>0!(GK<0)!($E(GK)="0"):$J(GK/1.36,0,1),1:"")_$S(GMRVJ=1:"*",1:" ")
"RTN","GMRVGR1",55,0)
 . . Q
"RTN","GMRVGR1",56,0)
 . I GI="CG" D
"RTN","GMRVGR1",57,0)
 . . S ^TMP($J,"GMRK","G"_(1250+GCNTD))=GK_" "_GMRSITE,^TMP($J,"GMRK","G"_(1320+GCNTD))=$S(GK>0:$J(GK/.3937,0,2),1:"")
"RTN","GMRVGR1",58,0)
 . . Q
"RTN","GMRVGR1",59,0)
 I GI="B",GK'="" S ^TMP($J,"GMRK","G"_(250+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE) S:$L(GMRSITE," ")>3 ^TMP($J,"GMRK","G"_(1640+GCNTD))=$P(GMRSITE," ")
"RTN","GMRVGR1",60,0)
 I '(GI="T"!(GI="P")) D  Q
"RTN","GMRVGR1",61,0)
 . I GI="C" S GMRSITE=$S($L(GMRSITE," ")>3:"  "_$P(GMRSITE," "),1:"")
"RTN","GMRVGR1",62,0)
 . S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=GK_$S(GMRVJ=1&(GI'="C"):"*",1:" ")_$S(GI="B":"",1:GMRSITE) S:GI="W" ^TMP($J,"GMRK","G"_(310+GCNTD))=$S(GK>0:$J(GK/2.2,0,2),1:"")
"RTN","GMRVGR1",63,0)
 . I GK>0,GI="W" D
"RTN","GMRVGR1",64,0)
 . . S GMRBMI="",GMRBMI(1)=GDT1,GMRBMI(2)=GK D CALBMI^GMRVBMI(.GMRBMI)
"RTN","GMRVGR1",65,0)
 . . S ^TMP($J,"GMRK","G"_(330+GCNTD))=GMRBMI K GMRBMI
"RTN","GMRVGR1",66,0)
 I GI="T",GK>0 S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=106-GK
"RTN","GMRVGR1",67,0)
 I GK'="",GI="P","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) D
"RTN","GMRVGR1",68,0)
 . I GMRSITE(1)["RADIAL"!(GMRSITE(1)["APICAL")!(GMRSITE(1)["BRACHIAL") D
"RTN","GMRVGR1",69,0)
 . . S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=170-GK/10
"RTN","GMRVGR1",70,0)
 S ^TMP($J,"GMRK","G"_(GJ+1*16+GCNTD+1))=GK_$S(GMRVJ=1:"*",1:" ")_$S(GI="T":GMRSITE,GI="P"&($L(GMRSITE," ")>3):"  "_$P(GMRSITE," "),1:"")
"RTN","GMRVGR1",71,0)
 I GI="T",GK>0 S ^TMP($J,"GMRK","G"_(210+GCNTD))=$S(GMRVJ=1:"T*",1:"T")
"RTN","GMRVGR1",72,0)
 I GI="P",GK'="","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) D
"RTN","GMRVGR1",73,0)
 . I GMRSITE(1)["RADIAL"!(GMRSITE(1)["APICAL")!(GMRSITE(1)["BRACHIAL") S ^TMP($J,"GMRK","G"_(230+GCNTD))=$S(GMRVJ=1:"P*",1:"P")
"RTN","GMRVGR1",74,0)
 . S ^TMP($J,"GMRK","G"_(1300+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)
"RTN","GMRVGR1",75,0)
 I GK>0,GI="T" S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<1.5:1.5,^("G"_(GJ*16+GCNTD+1))>12.7:12.7,1:^("G"_(GJ*16+GCNTD+1))) S:^("G"_(GJ*16+GCNTD+1))<1.6!(^("G"_(GJ*16+GCNTD+1))>12.6) ^TMP($J,"GMRK","G"_(210+GCNTD))="T**"
"RTN","GMRVGR1",76,0)
 I GK'="",GI="P","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) D
"RTN","GMRVGR1",77,0)
 . I GMRSITE(1)["RADIAL"!(GMRSITE(1)["APICAL")!(GMRSITE(1)["BRACHIAL") D
"RTN","GMRVGR1",78,0)
 . . S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<1.5:1.5,^("G"_(GJ*16+GCNTD+1))>12.7:12.7,1:^("G"_(GJ*16+GCNTD+1)))
"RTN","GMRVGR1",79,0)
 . . S:^("G"_(GJ*16+GCNTD+1))<1.6!(^("G"_(GJ*16+GCNTD+1))>12.6) ^TMP($J,"GMRK","G"_(230+GCNTD))="P**"
"RTN","GMRVGR1",80,0)
 Q
"RTN","GMRVGR1",81,0)
SETP ;INITIALIZE ^TMP FOR HEIGHT, WEIGHT AND V/M QUALIFIERS
"RTN","GMRVGR1",82,0)
 ;250+I: BP QUALIFIER  270+I: HEIGHT IN INCH  290+I: HEIGHT IN CM
"RTN","GMRVGR1",83,0)
 ;310+I:WEIGHT IN KG  330+I: BMI
"RTN","GMRVGR1",84,0)
 ;1100+I: PULSE OXIMETRY DATA  1130+I: PULSE OX. L/MIN
"RTN","GMRVGR1",85,0)
 ;1150+I: PULSE OX. %  1170+I: PULSE OX. METHOD
"RTN","GMRVGR1",86,0)
 ;1200+I: CVP DATA IN CM H2O  1230+I: CVP DATA IN MMHG
"RTN","GMRVGR1",87,0)
 ;1250+I: C/G DATA IN INCH  1270+I: C/G QUALIFIER  1300+I: PULSE QUALIFIER
"RTN","GMRVGR1",88,0)
 ;1320+I: C/G DATA IN CM 1640+I: THIRD PIECE OF BP 1660+I: PAIN
"RTN","GMRVGR1",89,0)
 F I=1:1:10 D
"RTN","GMRVGR1",90,0)
 . S (^TMP($J,"GMRK","G"_(210+I)),^("G"_(230+I)),^("G"_(250+I)),^("G"_(270+I)),^("G"_(290+I)),^("G"_(310+I)),^("G"_(330+I)),^("G"_(1300+I)))=""
"RTN","GMRVGR1",91,0)
 . S (^TMP($J,"GMRK","G"_(1100+I)),^("G"_(1130+I)),^("G"_(1150+I)),^("G"_(1170+I)),^("G"_(1200+I)),^("G"_(1230+I)),^("G"_(1250+I)),^("G"_(1270+I)))=""
"RTN","GMRVGR1",92,0)
 . S (^TMP($J,"GMRK","G"_(1320+I)),^("G"_(1640+I)),^("G"_(1660+I)))=""
"RTN","GMRVGR1",93,0)
 Q
"RTN","GMRVHG0")
0^13^B14700905
"RTN","GMRVHG0",1,0)
GMRVHG0 ;HIRMFO/YH-HP LASER SF 511 GRAPH - DATA ARRAY ;3/15/99
"RTN","GMRVHG0",2,0)
 ;;4.0;Vitals/Measurements;**1,7,11**;Apr 25, 1997
"RTN","GMRVHG0",3,0)
EN1 ;ENTRY POINT FROM GMRVSR0 TO PRINT SF-511 GRAPH FOR HP-3/4
"RTN","GMRVHG0",4,0)
 S GMRHT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMRVHG0",5,0)
 S (GMROUT,GHT)="",^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMRVHG0",6,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMRVHG0",7,0)
 F GTYPE="B","H","P","R","T","W","PO2","CVP","CG","PN" D SETT^GMRVGR0
"RTN","GMRVHG0",8,0)
 S GRPT=5 D SETIO^GMRVGR0 U IO D GRAPH
"RTN","GMRVHG0",9,0)
Q1 K GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMRVHG0",10,0)
 D QIO^GMRVGR5 K GRPT,GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GHT,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMRVHG0",11,0)
 K GLINE,GMRQUAL,^TMP($J,"GTNM") Q
"RTN","GMRVHG0",12,0)
GRAPH D DEM^VADPT,INP^VADPT,SETV^GMRVGR1
"RTN","GMRVHG0",13,0)
 F GK="H","W","T","P","R","B","I","O","PO2","CVP","CG","PN" D
"RTN","GMRVHG0",14,0)
 . S ^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMRVHG0",15,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMRVHG0",16,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMRVHG0",17,0)
 F GPGS=1:1:GPG D
"RTN","GMRVHG0",18,0)
 . F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMRVHG0",19,0)
 . S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE S ^TMP($J,"GMRK","G200")=GMRRMBD D PAGE D ^GMRVHG1 D
"RTN","GMRVHG0",20,0)
 . . S ^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6,^TMP($J,"GMRK","G210M")=0.2,^TMP($J,"GMRK","G226M")=0.2
"RTN","GMRVHG0",21,0)
 D KVAR^VADPT K VA,GRAPHT,GRAPHP,GRAPHS,GRAPHD,GPA Q
"RTN","GMRVHG0",22,0)
PAGE ;SET GRAPH DATA
"RTN","GMRVHG0",23,0)
 ;DATA FOR T GRAPH
"RTN","GMRVHG0",24,0)
 D SETV^GMRVGR1
"RTN","GMRVHG0",25,0)
 K GRAPHT S GRAPHT=0,I=1,J=411,GPA=0 F GI=50:1:59 S GRAPHT=0.4+((I-1)*1.6) D:^TMP($J,"GMRK","G"_GI)'=""  S I=I+1,J=J+1
"RTN","GMRVHG0",26,0)
 .S GRAPHT(I)=$S(GPA=0:"PA",1:"PD")_GRAPHT_","_^TMP($J,"GMRK","G"_GI)_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMRVHG0",27,0)
 ;DATA FOR P GRAPH
"RTN","GMRVHG0",28,0)
 K GRAPHP S GRAPHP=0,I=1,J=431,GPA=0 F GI=82:1:92 S GRAPHP=0.6+((I-1)*1.6) D:^TMP($J,"GMRK","G"_GI)'=""  S I=I+1,J=J+1
"RTN","GMRVHG0",29,0)
 .S GRAPHP(I)=$S(GPA=0:"PA",1:"PD")_GRAPHP_","_^TMP($J,"GMRK","G"_GI)_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMRVHG0",30,0)
 I $D(GMRQUAL) D LEGEND^GMRVLGQU
"RTN","GMRVHG0",31,0)
 K GMRQUAL,GG,GI,GMRVJ,GSYNO,GHOLD Q
"RTN","GMRVHG0",32,0)
DATE S GHOLD="" F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMRVHG0",33,0)
 Q
"RTN","GMRVHG0",34,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMRVHG0",35,0)
 Q
"RTN","GMRVHG0",36,0)
SETD F GI="H","W","T","P","R","B","I","O","C" S GJ=$F("WTXPXRBIOCHDS",GI),GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMRVHG4
"RTN","GMRVHG0",37,0)
 F GI="PO2","CVP","CG","PN" S GJ=0,GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMRVHG4
"RTN","GMRVHG0",38,0)
 Q
"RTN","GMRVHG0",39,0)
SETP ;INITIALIZE ^TMP FOR HEIGHT AND V/M QUALIFIERS
"RTN","GMRVHG0",40,0)
 ;470 - STORE HEIGHT IN INCH  1100 - STORE HEIGHT IN CM
"RTN","GMRVHG0",41,0)
 ;1200 - STORE WEIGHT IN KG    1300 - STORE BODY MASS INDEX
"RTN","GMRVHG0",42,0)
 ; 410 - STORE T*   430 - STORE P*   450 - STORE BP QUALIFIER
"RTN","GMRVHG0",43,0)
 ;1400+I - PULSE OXIMETRY DATA  1430+I - PULSE OX. L/MIN
"RTN","GMRVHG0",44,0)
 ;1450+I - PULSE OX. %  1470+I - PULSE OX. METHOD
"RTN","GMRVHG0",45,0)
 ;1500+I - CVP DATA IN CM H2O  1530+I - CVP DATA IN MMHG
"RTN","GMRVHG0",46,0)
 ;1550+I - C/G DATA IN INCH  1570+I - C/G QUALIFIER  1600+I - PULSE QUALIFIER
"RTN","GMRVHG0",47,0)
 ;1620+I - C/G DATA IN CM  1640+I - THE THIRD PIECE OF BP
"RTN","GMRVHG0",48,0)
 ;1660+I - PAIN
"RTN","GMRVHG0",49,0)
 F I=1:1:10 D
"RTN","GMRVHG0",50,0)
 . S (^TMP($J,"GMRK","G"_(410+I)),^("G"_(430+I)),^("G"_(450+I)),^("G"_(470+I)),^("G"_(1100+I)),^("G"_(1200+I)),^("G"_(1300+I)),^("G"_(1640+I)))=""
"RTN","GMRVHG0",51,0)
 . S (^TMP($J,"GMRK","G"_(1400+I)),^("G"_(1430+I)),^("G"_(1450+I)),^("G"_(1470+I)),^("G"_(1500+I)),^("G"_(1530+I)),^("G"_(1550+I)),^("G"_(1570+I)))=""
"RTN","GMRVHG0",52,0)
 . S (^TMP($J,"GMRK","G"_(1600+I)),^("G"_(1620+I)),^("G"_(1660+I)))=""
"RTN","GMRVHG0",53,0)
 Q
"RTN","GMRVHG4")
0^14^B18783049
"RTN","GMRVHG4",1,0)
GMRVHG4 ;HIRMFO/YH-HP LASER SF 511 GRAPH - ^TMP DATA ;3/12/99
"RTN","GMRVHG4",2,0)
 ;;4.0;Vitals/Measurements;**1,7,11**;Apr 25, 1997
"RTN","GMRVHG4",3,0)
SETA ;
"RTN","GMRVHG4",4,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMRVHG4",5,0)
 S (GMRSITE,GMRSITE(1),GMRSITE(2),GMRINF,GMRVJ)=""
"RTN","GMRVHG4",6,0)
 I GK'="" D
"RTN","GMRVHG4",7,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GI,GDT1,GK)),"^"),GMRVJ=$P($G(^(GK)),"^",2),GMRINF=$P($G(^(GK)),"^",4)
"RTN","GMRVHG4",8,0)
 . I GMRSITE(1)'="" D SYNOARY^GMRVLGQU
"RTN","GMRVHG4",9,0)
 I GI="H" S ^TMP($J,"GMRK","G"_(470+GCNTD))=GK_" "_GMRSITE,^TMP($J,"GMRK","G"_(1100+GCNTD))=$S(GK>0:$J(GK*2.54,0,2),1:"") S:GK>0 GMRHT=GK*2.54/100 Q
"RTN","GMRVHG4",10,0)
 I GI="PN" S ^TMP($J,"GMRK","G"_(1660+GCNTD))=GK
"RTN","GMRVHG4",11,0)
 I GI="C" S ^TMP($J,"GMRK","G"_(1640+GCNTD))=GK_"  "_^TMP($J,"GMRK","G"_(1640+GCNTD)) Q
"RTN","GMRVHG4",12,0)
 I GI="PO2"!(GI="CVP")!(GI="CG") D  Q
"RTN","GMRVHG4",13,0)
 . I GI="PO2" D
"RTN","GMRVHG4",14,0)
 . . S (GMRINF(1),GMRINF(2))="" I GMRINF'="" D PO2^GMRVLGQU(.GMRINF)
"RTN","GMRVHG4",15,0)
 . . S ^TMP($J,"GMRK","G"_(1400+GCNTD))=GK_$S(GMRVJ=1:"*",1:"")
"RTN","GMRVHG4",16,0)
 . . S ^TMP($J,"GMRK","G"_(1430+GCNTD))=GMRINF(1)
"RTN","GMRVHG4",17,0)
 . . S ^TMP($J,"GMRK","G"_(1450+GCNTD))=GMRINF(2)
"RTN","GMRVHG4",18,0)
 . . S ^TMP($J,"GMRK","G"_(1470+GCNTD))=GMRSITE
"RTN","GMRVHG4",19,0)
 . . Q
"RTN","GMRVHG4",20,0)
 . I GI="CVP" D
"RTN","GMRVHG4",21,0)
 . . S ^TMP($J,"GMRK","G"_(1500+GCNTD))=$S(GK>0!(GK<0):$J(GK,0,1),1:GK)_$S(GMRVJ=1:"*",1:"")
"RTN","GMRVHG4",22,0)
 . . S ^TMP($J,"GMRK","G"_(1530+GCNTD))=$S(GK>0!(GK<0)!($E(GK)="0"):$J(GK/1.36,0,1),1:"")_$S(GMRVJ=1:"*",1:"")
"RTN","GMRVHG4",23,0)
 . . Q
"RTN","GMRVHG4",24,0)
 . I GI="CG" D
"RTN","GMRVHG4",25,0)
 . . S ^TMP($J,"GMRK","G"_(1550+GCNTD))=GK_GMRSITE,^TMP($J,"GMRK","G"_(1620+GCNTD))=$S(GK>0:$J(GK/.3937,0,2),1:"")
"RTN","GMRVHG4",26,0)
 . . Q
"RTN","GMRVHG4",27,0)
 I GI="B",GK'="" S ^TMP($J,"GMRK","G"_(450+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE) S:$L(GMRSITE," ")>3 ^TMP($J,"GMRK","G"_(1640+GCNTD))=$P(GMRSITE," ")
"RTN","GMRVHG4",28,0)
 I '(GI="T"!(GI="P")) D  Q
"RTN","GMRVHG4",29,0)
 . S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=GK_$S(GMRVJ=1:"*",1:"")_$S(GI="B":"",1:GMRSITE) S:GI="W" ^TMP($J,"GMRK","G"_(1200+GCNTD))=$S(GK>0:$J(GK/2.2,0,2),1:"")
"RTN","GMRVHG4",30,0)
 . I GI="W",GK>0 D
"RTN","GMRVHG4",31,0)
 . . S GMRBMI="",GMRBMI(1)=GDT1,GMRBMI(2)=GK D CALBMI^GMRVBMI(.GMRBMI)
"RTN","GMRVHG4",32,0)
 . . S ^TMP($J,"GMRK","G"_(1300+GCNTD))=GMRBMI K GMRBMI
"RTN","GMRVHG4",33,0)
 I GI="T",GK>0 S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=GK-93
"RTN","GMRVHG4",34,0)
 I GK'="",GI="P","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) D
"RTN","GMRVHG4",35,0)
 . I GMRSITE(1)["RADIAL"!(GMRSITE(1)["APICAL")!(GMRSITE(1)["BRACHIAL") D
"RTN","GMRVHG4",36,0)
 . . S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=GK-40/10
"RTN","GMRVHG4",37,0)
 S ^TMP($J,"GMRK","G"_(GJ+1*16+GCNTD+1))=GK_$S(GMRVJ=1:"*",1:"")_$S(GI="T":GMRSITE,GI="P"&($L(GMRSITE," ")>3):"  "_$P(GMRSITE," "),1:" ")
"RTN","GMRVHG4",38,0)
 I GI="T",GK>0 S ^TMP($J,"GMRK","G"_(410+GCNTD))=$S(GMRVJ=1:"T*",1:"T")
"RTN","GMRVHG4",39,0)
 I GK'="",GI="P","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) D
"RTN","GMRVHG4",40,0)
 . I GMRSITE(1)["RADIAL"!(GMRSITE(1)["APICAL")!(GMRSITE(1)["BRACHIAL") S ^TMP($J,"GMRK","G"_(430+GCNTD))=$S(GMRVJ=1:"P*",1:"P")
"RTN","GMRVHG4",41,0)
 . S ^TMP($J,"GMRK","G"_(1600+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)
"RTN","GMRVHG4",42,0)
 I GK>0,GI="T" S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<0.3:0.3,^("G"_(GJ*16+GCNTD+1))>11.6:11.6,1:^("G"_(GJ*16+GCNTD+1))) S:^("G"_(GJ*16+GCNTD+1))<0.4!(^("G"_(GJ*16+GCNTD+1))>11.5) ^TMP($J,"GMRK","G"_(410+GCNTD))="T**"
"RTN","GMRVHG4",43,0)
 I GK'="",GI="P","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) D
"RTN","GMRVHG4",44,0)
 . I GMRSITE(1)["RADIAL"!(GMRSITE(1)["APICAL")!(GMRSITE(1)["BRACHIAL") D
"RTN","GMRVHG4",45,0)
 . . S ^TMP($J,"GMRK","G"_(GJ*16+GCNTD+1))=$S(^("G"_(GJ*16+GCNTD+1))<0.3:0.3,^("G"_(GJ*16+GCNTD+1))>11.6:11.6,1:^("G"_(GJ*16+GCNTD+1))) S:^("G"_(GJ*16+GCNTD+1))<0.4!(^("G"_(GJ*16+GCNTD+1))>11.5) ^TMP($J,"GMRK","G"_(430+GCNTD))="P**"
"RTN","GMRVHG4",46,0)
 Q
"RTN","GMRVHG4",47,0)
OUTP ;PRINT OUTPUT
"RTN","GMRVHG4",48,0)
 S J=-8.7,J(1)=162 D WRTLN^GMRVHG3
"RTN","GMRVHG4",49,0)
PAIN ;PRINT PAIN
"RTN","GMRVHG4",50,0)
 S J=-9.1,J(1)=1661 D
"RTN","GMRVHG4",51,0)
 . S I(1)="" F I=1:1:5 S I(2)=I-1,I(1)=I(1)_"PA"_(1.6*I(2)+0.2)_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMRVHG4",52,0)
 . W !,I(1) S I(1)="" F I=6:1:10 S I(2)=I-1,I(1)=I(1)_"PA"_(1.6*I(2)+0.2)_","_J_";LB"_^TMP($J,"GMRK","G"_(J(1)+I(2)))_"#;"
"RTN","GMRVHG4",53,0)
 . W !,I(1) Q
"RTN","GMRVHG4",54,0)
PTID ;PRINT PATIENT ID
"RTN","GMRVHG4",55,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA-1,-11.3;LB"_^TMP($J,"GMRK","G194")_"#;PA-1,-11.6;LB"_^("G196")_"   "_^("G197")_"#;"
"RTN","GMRVHG4",56,0)
 W !,"PA-1,-11.9;LB"_^TMP($J,"GMRK","G198")_"#;PA7,-11.9;LB"_^("G200")_"#;PA-1,-12.2;LB"_GMRDIV_"#;PA7,-12.2;LB"_^("G199")_"#;"
"RTN","GMRVHG4",57,0)
 W !,"PA-1,-12.5;LB"_GSTRFIN_"#;" Q
"RTN","GMRVHPO0")
0^15^B13954180
"RTN","GMRVHPO0",1,0)
GMRVHPO0 ;HIRMFO/YH-HP LASER PULSE OXIMETRY/RESP. GRAPH - DATA ARRAY ;3/16/99
"RTN","GMRVHPO0",2,0)
 ;;4.0;Vitals/Measurements;**1,11**;Apr 25, 1997
"RTN","GMRVHPO0",3,0)
EN1 ;ENTRY POINT FROM GMRVSR0 TO PRINT PO2/RESP. GRAPH FOR HP LASER PRINTER
"RTN","GMRVHPO0",4,0)
 S GMROUT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMRVHPO0",5,0)
 S GMROUT=0,^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMRVHPO0",6,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMRVHPO0",7,0)
 F GTYPE="PO2","R" D SETT
"RTN","GMRVHPO0",8,0)
 S GTYPE="P" D SETT^GMRVBP0
"RTN","GMRVHPO0",9,0)
 U IO D GRAPH
"RTN","GMRVHPO0",10,0)
Q1 K GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMRVHPO0",11,0)
 K GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMRVHPO0",12,0)
 K GMRQUAL,GLINE,^TMP($J,"GTNM") Q
"RTN","GMRVHPO0",13,0)
GRAPH D DEM^VADPT,INP^VADPT,SETV^GMRVGR1
"RTN","GMRVHPO0",14,0)
 F GK="PO2","R","P" S ^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMRVHPO0",15,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMRVHPO0",16,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMRVHPO0",17,0)
 F GPGS=1:1:GPG D
"RTN","GMRVHPO0",18,0)
 . K GMRQUAL
"RTN","GMRVHPO0",19,0)
 . S ^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE S ^TMP($J,"GMRK","G200")=GMRRMBD D PAGE D ^GMRVHPO1 D
"RTN","GMRVHPO0",20,0)
 . . S ^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMRVHPO0",21,0)
 D KVAR^VADPT K VA,GRAPHR,GRAPHP,GRAPHS,GRAPHD,GPA Q
"RTN","GMRVHPO0",22,0)
PAGE ;SET GRAPH DATA
"RTN","GMRVHPO0",23,0)
 ;DATA FOR RESPIRATION GRAPH
"RTN","GMRVHPO0",24,0)
 K GRAPHR S GRAPHR=0,I=1,J=411,GPA=0 F GI=312:1:321 S GRAPHR=0.4+(1.6*(I-1)) D:^TMP($J,"GMRK","G"_GI)'=""  S I=I+1,J=J+1
"RTN","GMRVHPO0",25,0)
 .S GRAPHR(I)=$S(GPA=0:"PA",1:"PD")_GRAPHR_","_^TMP($J,"GMRK","G"_GI)_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMRVHPO0",26,0)
 ;DATA FOR PULSE OXIMETRY GRAPH
"RTN","GMRVHPO0",27,0)
 K GRAPHP S GRAPHP=0,I=1,J=431,GPA=0 F GI=362:1:371 S GRAPHP=0.9+(1.6*(I-1)) D:^TMP($J,"GMRK","G"_GI)'=""  S I=I+1,J=J+1
"RTN","GMRVHPO0",28,0)
 .S GRAPHP(I)=$S(GPA=0:"PA",1:"PD")_GRAPHP_","_^TMP($J,"GMRK","G"_GI)_";LB"_^TMP($J,"GMRK","G"_J)_"#;",GPA=1
"RTN","GMRVHPO0",29,0)
 I $D(GMRQUAL) D LEGEND^GMRVLGQU
"RTN","GMRVHPO0",30,0)
 K GG,GI,GMRVJ,GSYNO Q
"RTN","GMRVHPO0",31,0)
DATE F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMRVHPO0",32,0)
 Q
"RTN","GMRVHPO0",33,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMRVHPO0",34,0)
 Q
"RTN","GMRVHPO0",35,0)
SETD F GI="R","PO2","P" S GJ=$S(GI="R":310,GI="PO2":360,GI="P":1,1:0) Q:GJ=0  S GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMRVHPO3
"RTN","GMRVHPO0",36,0)
 Q
"RTN","GMRVHPO0",37,0)
SETP ;INITIALIZE ^TMP FOR QUALIFIERS
"RTN","GMRVHPO0",38,0)
 ; 410 - STORE R*   430 - STORE P*   510 - STORE PULSE   530 - STORE QUALIFIER
"RTN","GMRVHPO0",39,0)
 ; 1430+I - PULSE OX. L/MIN
"RTN","GMRVHPO0",40,0)
 ; 1450+I - PULSE OX. %  1470+I - PULSE OX. METHOD
"RTN","GMRVHPO0",41,0)
 F I=1:1:10 S (^TMP($J,"GMRK","G"_(410+I)),^("G"_(430+I)),^("G"_(1430+I)),^("G"_(1450+I)),^("G"_(1470+I)),^("G"_(510+I)),^("G"_(530+I)))=""
"RTN","GMRVHPO0",42,0)
 Q
"RTN","GMRVHPO0",43,0)
SETT S GTYP=$O(^GMRD(120.51,"B",$S(GTYPE="R":"RESPIRATION",GTYPE="PO2":"PULSE OXIMETRY",GTYPE="P":"PULSE",1:""),""))
"RTN","GMRVHPO0",44,0)
 I GTYP>0 F GX=GSTART1:0 S GX=$O(^GMR(120.5,"AA",DFN,GTYP,GX)) Q:GX>GEND1!(GX'>0)  F GEN=0:0 S GEN=$O(^GMR(120.5,"AA",DFN,GTYP,GX,GEN)) Q:GEN'>0  I '$D(^GMR(120.5,GEN,2)) D BLDARR^GMRVGR0
"RTN","GMRVHPO0",45,0)
 Q
"RTN","GMRVHPO3")
0^16^B8461376
"RTN","GMRVHPO3",1,0)
GMRVHPO3 ;HIRMFO/YH-HP LASER PULSE OXIMETRY/RESP. GRAPH - ^TMP DATA ;3/3/99
"RTN","GMRVHPO3",2,0)
 ;;4.0;Vitals/Measurements;**1,11**;Apr 25, 1997
"RTN","GMRVHPO3",3,0)
SETA ;
"RTN","GMRVHPO3",4,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMRVHPO3",5,0)
 S (GMRSITE,GMRSITE(1),GMRSITE(2),GMRINF,GMRVJ)=""
"RTN","GMRVHPO3",6,0)
 I GK'="" D
"RTN","GMRVHPO3",7,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GI,GDT1,GK)),"^"),GMRVJ=$P($G(^(GK)),"^",2),GMRINF=$P($G(^(GK)),"^",4)
"RTN","GMRVHPO3",8,0)
 . I GMRSITE(1)'="" D SYNOARY^GMRVLGQU
"RTN","GMRVHPO3",9,0)
 I GK'="","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) S GK=GK_$S(GMRVJ=1:"*",1:" ")
"RTN","GMRVHPO3",10,0)
 I GI="P" S ^TMP($J,"GMRK","G"_(510+GCNTD))=GK_$S($L(GMRSITE," ")>3:$P(GMRSITE," "),1:""),^("G"_(530+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE) Q
"RTN","GMRVHPO3",11,0)
 I GI="PO2" D
"RTN","GMRVHPO3",12,0)
 . S (GMRINF(1),GMRINF(2))="" I GMRINF'="" D PO2^GMRVLGQU(.GMRINF)
"RTN","GMRVHPO3",13,0)
 . S ^TMP($J,"GMRK","G"_(1430+GCNTD))=GMRINF(1)
"RTN","GMRVHPO3",14,0)
 . S ^TMP($J,"GMRK","G"_(1450+GCNTD))=GMRINF(2)
"RTN","GMRVHPO3",15,0)
 . S ^TMP($J,"GMRK","G"_(1470+GCNTD))=GMRSITE
"RTN","GMRVHPO3",16,0)
 S ^TMP($J,"GMRK","G"_(GJ+GCNTD+1))=$S(GK>0:$S(GI="R":GK-4/2,GI="PO2":GK-64/2,1:""),1:"") S ^TMP($J,"GMRK","G"_(GJ+20+GCNTD+1))=$S(+GK=0.1:"0*",1:GK)_$S(GI="R":GMRSITE,1:"")
"RTN","GMRVHPO3",17,0)
 I GI="R",GK>0 S ^TMP($J,"GMRK","G"_(410+GCNTD))=$S(GK["*":"R*",1:"R")
"RTN","GMRVHPO3",18,0)
 I GI="PO2",GK>0 S ^TMP($J,"GMRK","G"_(430+GCNTD))=$S(GK["*":"POx*",1:"POx")
"RTN","GMRVHPO3",19,0)
 I GK>0,GI="R" S ^TMP($J,"GMRK","G"_(GJ+GCNTD+1))=$S(^("G"_(GJ+GCNTD+1))<0.5:0.5,^("G"_(GJ+GCNTD+1))>18.7:18.7,1:^("G"_(GJ+GCNTD+1))) S:^("G"_(GJ+GCNTD+1))<0.6!(^("G"_(GJ+GCNTD+1))>18.6) ^TMP($J,"GMRK","G"_(410+GCNTD))="R**"
"RTN","GMRVHPO3",20,0)
 I GK>0,GI="PO2" S ^TMP($J,"GMRK","G"_(GJ+GCNTD+1))=$S(^("G"_(GJ+GCNTD+1))<0.5:0.5,^("G"_(GJ+GCNTD+1))>18.7:18.7,1:^("G"_(GJ+GCNTD+1))) S:^("G"_(GJ+GCNTD+1))<0.6!(^("G"_(GJ+GCNTD+1))>18.6) ^TMP($J,"GMRK","G"_(430+GCNTD))="POx**"
"RTN","GMRVHPO3",21,0)
 Q
"RTN","GMRVHPO3",22,0)
PTID ;PRINT PATIENT ID
"RTN","GMRVHPO3",23,0)
 W !,"SD1,277,2,1,4,9,5,1,6,5,7,4;SS;PA-2,-4.5;LB"_^TMP($J,"GMRK","G194")_"#;PA-2,-4.8;LB"_^("G196")_"   "_^("G197")_"#;"
"RTN","GMRVHPO3",24,0)
 W !,"PA-2,-5.1;LB"_^TMP($J,"GMRK","G198")_"#;PA6,-5.1;LB"_^("G200")_"#;PA6,-5.4;LB"_^("G199")_"#;PA-2,-5.4;LB"_GMRDIV_"#;"
"RTN","GMRVHPO3",25,0)
 W !,"PA-2,-5.7;LB"_GSTRFIN_"#;" Q
"RTN","GMRVKPO0")
0^17^B14836490
"RTN","GMRVKPO0",1,0)
GMRVKPO0 ;HIRMFO/YH-KYOCERA PULSE OXIMETRY/RESP. GRAPH - DATA ARRAY ;3/16/99
"RTN","GMRVKPO0",2,0)
 ;;4.0;Vitals/Measurements;**1,11**;Apr 25, 1997
"RTN","GMRVKPO0",3,0)
EN1 ;ENTRY POINT FROM GMRVSR0 TO PRINT PO2/RESP. GRAPH
"RTN","GMRVKPO0",4,0)
 N GAPICAL,GRADIAL,GBRACHI S GAPICAL=$O(^GMRD(120.52,"B","APICAL",0)),GRADIAL=$O(^GMRD(120.52,"B","RADIAL",0)),GBRACHI=$O(^GMRD(120.52,"B","BRACHIAL",0))
"RTN","GMRVKPO0",5,0)
 S GMROUT=0 K ^TMP($J,"GMR"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GMRVG"),^TMP($J,"GTNM") F GI=1:1:200 S ^TMP($J,"GMRK","G"_GI)=""
"RTN","GMRVKPO0",6,0)
 S GMROUT=0,^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMRVKPO0",7,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMRVKPO0",8,0)
 F GTYPE="PO2","R" D SETT^GMRVHPO0
"RTN","GMRVKPO0",9,0)
 S GTYPE="P" D SETT^GMRVBP0
"RTN","GMRVKPO0",10,0)
 U IO D GRAPH
"RTN","GMRVKPO0",11,0)
Q1 K GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I D KVAR^VADPT K VA,VAROOT
"RTN","GMRVKPO0",12,0)
 K GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMRVKPO0",13,0)
 K GMRQUAL,GLINE,^TMP($J,"GTNM") Q
"RTN","GMRVKPO0",14,0)
GRAPH D DEM^VADPT,INP^VADPT,SETV^GMRVGR1
"RTN","GMRVKPO0",15,0)
 F GK="PO2","R","P" S ^TMP($J,"GTNM",GK)=0 F GI=0:0 S GI=$O(^TMP($J,"GMRVG",GK,GI)) Q:GI'>0  S GJ="" F X=0:0 S GJ=$O(^TMP($J,"GMRVG",GK,GI,GJ)) Q:GJ=""  S ^TMP($J,"GTNM",GK)=^TMP($J,"GTNM",GK)+1,^TMP($J,"GDT",GI)=""
"RTN","GMRVKPO0",16,0)
 S GTNM=0 F X=0:0 S X=$O(^TMP($J,"GDT",X)) Q:X'>0  S GTNM=GTNM+1
"RTN","GMRVKPO0",17,0)
 S GPG=$S(GTNM=0:1,1:GTNM\10+''(GTNM#10)),GDT1=0
"RTN","GMRVKPO0",18,0)
 F GPGS=1:1:GPG K GMRQUAL,GLINE S (GLINE(1),GLINE(2),GLINE(3))="",^TMP($J,"GMRK","G199")="Page "_GPGS D SETP,DATE S ^TMP($J,"GMRK","G200")=GMRRMBD D PAGE D ^GMRVKPO2,^GMRVKPO3,^GMRVKPO4 D
"RTN","GMRVKPO0",19,0)
 .S ^TMP($J,"GMRK","G50M")=0.2,^TMP($J,"GMRK","G82M")=0.6
"RTN","GMRVKPO0",20,0)
 D KVAR^VADPT K VA,GRAPHR,GRAPHP,GRAPHS,GRAPHD,GPA Q
"RTN","GMRVKPO0",21,0)
PAGE ;SET GRAPH DATA
"RTN","GMRVKPO0",22,0)
 ;DATA FOR RESPIRATION GRAPH
"RTN","GMRVKPO0",23,0)
 I ^TMP($J,"GMRK","G50")="" F GI=51:1:59 S ^TMP($J,"GMRK","G50")=^TMP($J,"GMRK","G"_GI),^TMP($J,"GMRK","G50M")=0.2+(1.6*(GI-50)) Q:^TMP($J,"GMRK","G50")'=""
"RTN","GMRVKPO0",24,0)
 I ^TMP($J,"GMRK","G82")="" F GI=83:1:91 S ^TMP($J,"GMRK","G82")=^TMP($J,"GMRK","G"_GI),^TMP($J,"GMRK","G82M")=0.6+(1.6*(GI-82)) Q:^TMP($J,"GMRK","G82")'=""
"RTN","GMRVKPO0",25,0)
 I $D(GMRQUAL) D LEGEND^GMRVLGQU
"RTN","GMRVKPO0",26,0)
 Q
"RTN","GMRVKPO0",27,0)
DATE F GCNTD=1:1:10 S:$L(GDT1) GDT1=$O(^TMP($J,"GDT",GDT1)) S ^TMP($J,"GMRK","G"_GCNTD)=$S($L(GDT1):$E(GDT1,4,5)_"-"_$E(GDT1,6,7)_"-"_$E(GDT1,2,3),1:"") D DATE1
"RTN","GMRVKPO0",28,0)
 Q
"RTN","GMRVKPO0",29,0)
DATE1 S Y=$E($P(GDT1,".",2)_"0000",1,4),^TMP($J,"GMRK","G"_(GCNTD+16))=$S($L(GDT1):$E(Y,1,2)_":"_$E(Y,3,4),1:"") D SETD
"RTN","GMRVKPO0",30,0)
 Q
"RTN","GMRVKPO0",31,0)
SETD F GI="R","PO2","P" S GJ=$S(GI="R":48,GI="PO2":80,GI="P":310,1:0) Q:GJ=0  S GK=$S($L(GDT1):$O(^TMP($J,"GMRVG",GI,GDT1,"")),1:"") D SETA^GMRVKPO1
"RTN","GMRVKPO0",32,0)
 Q
"RTN","GMRVKPO0",33,0)
SETP ;INITIALIZE ^TMP FOR QUALIFIERS
"RTN","GMRVKPO0",34,0)
 ; 410 - STORE R*   430 - STORE P*   310 - STORE PULSE  330 - STORE PULSE QUALIFIER
"RTN","GMRVKPO0",35,0)
 ; 1430+I - PULSE OX. L/MIN
"RTN","GMRVKPO0",36,0)
 ; 1450+I - PULSE OX. %  1470+I - PULSE OX. METHOD
"RTN","GMRVKPO0",37,0)
 F I=1:1:10 S (^TMP($J,"GMRK","G"_(410+I)),^("G"_(430+I)),^("G"_(1430+I)),^("G"_(1450+I)),^("G"_(1470+I)),^("G"_(310+I)),^("G"_(330+I)))=""
"RTN","GMRVKPO0",38,0)
 Q
"RTN","GMRVKPO0",39,0)
SETT S GTYP=$O(^GMRD(120.51,"B",$S(GTYPE="R":"RESPIRATION",GTYPE="PO2":"PULSE OXIMETRY",GTYPE="P":"PULSE",1:""),""))
"RTN","GMRVKPO0",40,0)
 I GTYP>0 F GX=GSTART1:0 S GX=$O(^GMR(120.5,"AA",DFN,GTYP,GX)) Q:GX>GEND1!(GX'>0)  F GEN=0:0 S GEN=$O(^GMR(120.5,"AA",DFN,GTYP,GX,GEN)) Q:GEN'>0  I '$D(^GMR(120.5,GEN,2)) D BLDARR^GMRVGR0
"RTN","GMRVKPO0",41,0)
 Q
"RTN","GMRVKPO1")
0^31^B7375012
"RTN","GMRVKPO1",1,0)
GMRVKPO1 ;HIRMFO/YH-KYOCERA PULSE OXIMETRY/RESP. GRAPH - GRAPH DATA ;3/3/99
"RTN","GMRVKPO1",2,0)
 ;;4.0;Vitals/Measurements;**1,11**;Apr 25, 1997
"RTN","GMRVKPO1",3,0)
SETA ;
"RTN","GMRVKPO1",4,0)
 I GK="Unavailable" S GK="Unavail"
"RTN","GMRVKPO1",5,0)
 S (GMRSITE,GMRSITE(1),GMRSITE(2),GMRINF,GMRVJ)=""
"RTN","GMRVKPO1",6,0)
 I GK'="" D
"RTN","GMRVKPO1",7,0)
 . S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GI,GDT1,GK)),"^"),GMRVJ=$P($G(^(GK)),"^",2),GMRINF=$P($G(^(GK)),"^",4)
"RTN","GMRVKPO1",8,0)
 . I GMRSITE(1)'="" D SYNOARY^GMRVLGQU
"RTN","GMRVKPO1",9,0)
 I GK'="","UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GK) S GK=GK_$S(GMRVJ=1:"*",1:" ")
"RTN","GMRVKPO1",10,0)
 I GI="P" S ^TMP($J,"GMRK","G"_(310+GCNTD))=GK_$S($L(GMRSITE," ")>3:$P(GMRSITE," "),1:""),^TMP($J,"GMRK","G"_(330+GCNTD))=$S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE) Q
"RTN","GMRVKPO1",11,0)
 I GI="PO2" D
"RTN","GMRVKPO1",12,0)
 . S (GMRINF(1),GMRINF(2))="" I GMRINF'="" D PO2^GMRVLGQU(.GMRINF)
"RTN","GMRVKPO1",13,0)
 . S ^TMP($J,"GMRK","G"_(1430+GCNTD))=GMRINF(1)
"RTN","GMRVKPO1",14,0)
 . S ^TMP($J,"GMRK","G"_(1450+GCNTD))=GMRINF(2)
"RTN","GMRVKPO1",15,0)
 . S ^TMP($J,"GMRK","G"_(1470+GCNTD))=GMRSITE
"RTN","GMRVKPO1",16,0)
 S ^TMP($J,"GMRK","G"_(GJ+GCNTD+1))=$S(GK>0:$S(GI="R":44-GK/2,GI="PO2":104-GK/2,1:""),1:"") S ^TMP($J,"GMRK","G"_(GJ+200+GCNTD+1))=$S(+GK=0.1:"0*",1:GK)_$S(GI="R":GMRSITE,1:"")
"RTN","GMRVKPO1",17,0)
 I GI="R",GK>0 S ^TMP($J,"GMRK","G"_(410+GCNTD))=$S(GK["*":"R*",1:"R")
"RTN","GMRVKPO1",18,0)
 I GI="PO2",GK>0 S ^TMP($J,"GMRK","G"_(430+GCNTD))=$S(GK["*":"POx*",1:"POx")
"RTN","GMRVKPO1",19,0)
 I GK>0,GI="R" S ^TMP($J,"GMRK","G"_(GJ+GCNTD+1))=$S(^("G"_(GJ+GCNTD+1))<1.5:1.5,^("G"_(GJ+GCNTD+1))>19.7:19.7,1:^("G"_(GJ+GCNTD+1))) S:^("G"_(GJ+GCNTD+1))<1.6!(^("G"_(GJ+GCNTD+1))>19.6) ^TMP($J,"GMRK","G"_(410+GCNTD))="R**"
"RTN","GMRVKPO1",20,0)
 I GK>0,GI="PO2" S ^TMP($J,"GMRK","G"_(GJ+GCNTD+1))=$S(^("G"_(GJ+GCNTD+1))<1.5:1.5,^("G"_(GJ+GCNTD+1))>19.7:19.7,1:^("G"_(GJ+GCNTD+1))) S:^("G"_(GJ+GCNTD+1))<1.6!(^("G"_(GJ+GCNTD+1))>19.6) ^TMP($J,"GMRK","G"_(430+GCNTD))="POx**"
"RTN","GMRVKPO1",21,0)
 Q
"RTN","GMRVLPO0")
0^22^B15990265
"RTN","GMRVLPO0",1,0)
GMRVLPO0 ;HIRMFO/YH-DOT MATRIX OXIMETRY/RESP. GRAPH - DATA ARRAY ;5/25/99  10:58
"RTN","GMRVLPO0",2,0)
 ;;4.0;Vitals/Measurements;**1,11**;Apr 25, 1997
"RTN","GMRVLPO0",3,0)
EN1 ;ENTRY POINT FROM GMRVSR0 TO PRINT PO2/RESP. GRAPH FOR LINE PRINTER
"RTN","GMRVLPO0",4,0)
 S GMROUT=0 K ^TMP($J,"GMRVG"),^TMP($J,"GMRK"),^TMP($J,"GDT"),^TMP($J,"GTNM")
"RTN","GMRVLPO0",5,0)
 D DEM^VADPT,INP^VADPT S GMRBTH=$P(VADM(3),"^",2),GMRNAM=VADM(1)
"RTN","GMRVLPO0",6,0)
 S GSTART1=(9999999-GMRFIN)-.0001,GEND1=9999999-GMRSTRT
"RTN","GMRVLPO0",7,0)
 F GTYPE="PO2","R","P" D SETT^GMRVHPO0
"RTN","GMRVLPO0",8,0)
 F GMRK="PO2","R","P" D GMRDT
"RTN","GMRVLPO0",9,0)
 K GMRVD F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  D PULSE
"RTN","GMRVLPO0",10,0)
 F GMRDT=0:0 S GMRDT=$O(GMRVD(GMRDT)) Q:GMRDT'>0  K ^TMP($J,"GMRDT",GMRDT)
"RTN","GMRVLPO0",11,0)
 S (GMRTNM,GMRI)=0 I $D(^TMP($J,"GMRDT")) F  S GMRI=$O(^TMP($J,"GMRDT",GMRI)) Q:GMRI'>0  S GMRTNM=GMRTNM+1
"RTN","GMRVLPO0",12,0)
 U IO D GRAPH
"RTN","GMRVLPO0",13,0)
Q1 K Z,GSOL,GIVDT,GMRHLOC,GMRVJ,GDATA,GDT,GEN,GEND1,GI,GJ,GK,GMRVX,GSTART1,GTNM,GTYP,GTYPE,GX,I,GMRVD D KVAR^VADPT K VA,VAROOT
"RTN","GMRVLPO0",14,0)
 K GMRRMBD,GAGE,GCNT,GDOB,GCNTB,GCNTD,GCNTP,GCNTR,GCNTT,GCNTT1,GCNTI,GCNTO,GDT1,GCNTPD,GCNTTD,GCNTW,GPG,GPGS,GTYPE1,GCNTB3,GDTA,XDT,XIO,XX,^TMP($J,"GMRK"),^TMP($J,"GMR"),^TMP($J,"GDT"),^TMP($J,"GMRVG")
"RTN","GMRVLPO0",15,0)
 K GLPRNTR,GMRESP,GMRPO2,GMRR,GMRRHI,GMRRLO,GMRROFF,GMRY,GP,GR,GMRQUAL,GLINE,^TMP($J,"GTNM") Q
"RTN","GMRVLPO0",16,0)
GRAPH ;
"RTN","GMRVLPO0",17,0)
 S:'$D(GFLAG) GFLAG=0 S GMRPGC=0,GMRX1="" F X=1:1:10 S GMRX1=GMRX1_"          "_"|"
"RTN","GMRVLPO0",18,0)
 S (GMRX,GMRX2)=GMRX1 F X=1:1:10 S $P(GMRX,"|",X)="__________",$P(GMRX2,"|",X)="----------"
"RTN","GMRVLPO0",19,0)
 S GMRPG=$S(GMRTNM=0:1,1:GMRTNM\10+$S(GMRTNM#10>0:1,1:0)) F GMRPGS=1:1:GMRPG S GMRPO2=105.666,GMRPO2(1)=100,GMRESP=45.666,GMRESP(1)=40,GMRY=9 D PAGE Q:GMROUT  ;PO2 AND RESPIRATION VALUES WHEN $Y=1
"RTN","GMRVLPO0",20,0)
 Q
"RTN","GMRVLPO0",21,0)
PAGE ;
"RTN","GMRVLPO0",22,0)
 K GMRQUAL W:'($E(IOST)'="C"&'GFLAG) @IOF S GFLAG=1,GMRPGC=GMRPGC+1 W !
"RTN","GMRVLPO0",23,0)
 I '$D(^TMP($J,"GMRVG")) W !!!!!!!!,?5,"THERE  IS  NO  DATA  FOR  THIS  REPORT" X "F Y=$Y:1:(IOSL-6) W !" D FOOTER^GMRVLPO2 Q
"RTN","GMRVLPO0",24,0)
 W ! D DATES^GMRVVS2 W !," Pulse Ox. Resp.",?17,"|",?18,GMRX
"RTN","GMRVLPO0",25,0)
 F GMRI=0:0 Q:$Y>61  W ! D SETHD^GMRVLPO1 W ?8,GMRHDR10,?16,$S(GMR3:"-",1:" "),?17,"|" D DATAPRT^GMRVLPO1
"RTN","GMRVLPO0",26,0)
 W !,?17,"|",GMRX2 F GMRI="R","PO2","OX1","OX2","OX3","P","P1" S GMRLINE(GMRI)=GMRX1
"RTN","GMRVLPO0",27,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>10  F GMRI="PO2","R","P" D:$D(^TMP($J,"GMRVG",GMRI,GMRDT)) STLNP^GMRVLPO2
"RTN","GMRVLPO0",28,0)
 F GMRI="R","PO2","OX1","OX2","OX3","P","P1" D
"RTN","GMRVLPO0",29,0)
 .S G=$S(GMRI="R":"Respiration",GMRI="PO2":"Pulse Ox.",GMRI="OX1":"  L/Min",GMRI="OX2":"  %",GMRI="OX3":"  Method",GMRI="P":"Pulse",1:"")
"RTN","GMRVLPO0",30,0)
 . W !,G,?17,"|",GMRLINE(GMRI)
"RTN","GMRVLPO0",31,0)
 I 'GMROUT W !,?17,$$REPEAT^XLFSTR("-",111)
"RTN","GMRVLPO0",32,0)
 W !,"R: Respiration     POx: Pulse Oximetry     * - Abnormal value     ** - Abnormal value off of graph"
"RTN","GMRVLPO0",33,0)
 W ! I $D(GMRQUAL) S GLPRNTR=1 D LEGEND^GMRVLGQU F I=1:1:5 W !,GLINE(I)
"RTN","GMRVLPO0",34,0)
 I IOSL'<($Y+10) F X=1:1 W ! Q:IOSL<($Y+10)
"RTN","GMRVLPO0",35,0)
 D FOOTER^GMRVLPO2 S GMRDT="" F GMRNM=1:1:10 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  K ^TMP($J,"GMRDT",GMRDT)
"RTN","GMRVLPO0",36,0)
 K GG,GI,GMRVJ,GSYNO Q
"RTN","GMRVLPO0",37,0)
GMRDT S GMRTNM(GMRK)=0 F GMRI=0:0 S GMRI=$O(^TMP($J,"GMRVG",GMRK,GMRI)) Q:GMRI'>0  S GMRJ="" F X=0:0 S GMRJ=$O(^TMP($J,"GMRVG",GMRK,GMRI,GMRJ)) Q:GMRJ=""  S GMRTNM(GMRK)=GMRTNM(GMRK)+1 S:GMRK'="XI1" ^TMP($J,"GMRDT",GMRI)=""
"RTN","GMRVLPO0",38,0)
 Q
"RTN","GMRVLPO0",39,0)
PULSE ; Process Apical, Brachial, and Radial Pulses
"RTN","GMRVLPO0",40,0)
 N GMRP,GMRVPS,GMRVPO,GMRVR
"RTN","GMRVLPO0",41,0)
 S GMRP=$O(^TMP($J,"GMRVG","P",GMRDT,"")) Q:GMRP=""
"RTN","GMRVLPO0",42,0)
 S GMRVPS=$P($G(^TMP($J,"GMRVG","P",GMRDT,GMRP)),"^",1)
"RTN","GMRVLPO0",43,0)
 I GMRVPS'["APICAL",(GMRVPS'["RADIAL"),(GMRVPS'["BRACHIAL") S GMRVD(GMRDT)=""
"RTN","GMRVLPO0",44,0)
 S GMRVPO=$O(^TMP($J,"GMRVG","PO2",GMRDT,""))
"RTN","GMRVLPO0",45,0)
 S GMRVR=$O(^TMP($J,"GMRVG","R",GMRDT,""))
"RTN","GMRVLPO0",46,0)
 I GMRVPO="",(GMRVR="") Q
"RTN","GMRVLPO0",47,0)
 K GMRVD(GMRDT)
"RTN","GMRVLPO0",48,0)
 Q
"RTN","GMRVLPO2")
0^30^B8108643
"RTN","GMRVLPO2",1,0)
GMRVLPO2 ;DOT MATRIX HIRMFO/YH-PULSE OX. AND RESPIRATION DATA ;7/15/97
"RTN","GMRVLPO2",2,0)
 ;;4.0;Vitals/Measurements;**1,11**;Apr 25, 1997
"RTN","GMRVLPO2",3,0)
FOOTER ;PRINT FOOTER
"RTN","GMRVLPO2",4,0)
 W ! W:GMRNAM'="" ?$X-3,$E(GMRNAM,1,35) W "   "_$P($G(VADM(2)),"^",2)_"   "_$P($G(VADM(3)),"^",2)_"   "_$P($G(VADM(4)),"^")_" YRS   "_$P($G(VADM),"^",2)
"RTN","GMRVLPO2",5,0)
 W ?95,"MEDICAL RECORD" W !,"Unit: "_$S(GMRWARD(1)'="":GMRWARD(1),1:"     "),"   "_"Room: "_$S($P(VAIN(5),"^")'="":$P($P(VAIN(5),"^"),"-",1,2),1:"    "),?95,"Pulse Oximetry/Respiration Graph"
"RTN","GMRVLPO2",6,0)
 D INP^VADPT S GMRVHLOC=$P($G(^DIC(42,+$G(VAIN(4)),44)),"^")
"RTN","GMRVLPO2",7,0)
 W !,"Division: "_$S(GMRVHLOC>0:$$GET1^DIQ(4,+$$GET1^DIQ(44,+GMRVHLOC,3,"I"),.01,"I"),1:""),?55,"Page "_GMRPGC,?95,"SF 512",!
"RTN","GMRVLPO2",8,0)
 W GSTRFIN Q
"RTN","GMRVLPO2",9,0)
STLNP ;
"RTN","GMRVLPO2",10,0)
 S GMR(GMRI)=$O(^TMP($J,"GMRVG",GMRI,GMRDT,"")) Q:GMR(GMRI)=""
"RTN","GMRVLPO2",11,0)
 N GMRVOK S (GMRSITE,GMRSITE(1),GMRINF,GMRVJ)="",GMRVOK=0
"RTN","GMRVLPO2",12,0)
 S GMRSITE(1)=$P($G(^TMP($J,"GMRVG",GMRI,GMRDT,GMR(GMRI))),"^"),GMRSITE(2)=$P($G(^(GMR(GMRI))),"^",3),GMRINF=$P($G(^(GMR(GMRI))),"^",4)
"RTN","GMRVLPO2",13,0)
 I GMRSITE(1)'="" D  Q:GMRVOK
"RTN","GMRVLPO2",14,0)
 .I GMRI="P",(GMRSITE(1)'["RADIAL"),(GMRSITE(1)'["APICAL"),(GMRSITE(1)'["BRACHIAL") S GMRVOK=1 Q
"RTN","GMRVLPO2",15,0)
 .S GI=GMRI D SYNOARY^GMRVLGQU
"RTN","GMRVLPO2",16,0)
 .Q
"RTN","GMRVLPO2",17,0)
 S GI=$S(GMR(GMRI)>0&(GMRI="PO2"):$J(GMR(GMRI),0,1),1:GMR(GMRI))
"RTN","GMRVLPO2",18,0)
 I "UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GMR(GMRI)) S GI=GI_$S($P(^TMP($J,"GMRVG",GMRI,GMRDT,GMR(GMRI)),"^",2)'=1:" ",1:"*")
"RTN","GMRVLPO2",19,0)
 S $P(GMRLINE(GMRI),"|",GMRNM)=$E(GI_$S(GMRI="R":GMRSITE,GMRI="P"&($L(GMRSITE," ")>3):$P(GMRSITE," "),1:"")_"          ",1,10)
"RTN","GMRVLPO2",20,0)
 I GMRI="P" S $P(GMRLINE("P1"),"|",GMRNM)=$E($S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)_"          ",1,10)
"RTN","GMRVLPO2",21,0)
 D SETLN
"RTN","GMRVLPO2",22,0)
 I GMRI="PO2",$D(GMRLINE("OX1")) D
"RTN","GMRVLPO2",23,0)
 . S $P(GMRLINE("OX3"),"|",GMRNM)=$E(GMRSITE_"          ",1,10)
"RTN","GMRVLPO2",24,0)
 . S GMRINF=$P(^TMP($J,"GMRVG",GMRI,GMRDT,GMR(GMRI)),"^",4),(GMRINF(1),GMRINF(2))="" D
"RTN","GMRVLPO2",25,0)
 . . I GMRINF="" S $P(GMRLINE("OX1"),"|",GMRNM)="          ",$P(GMRLINE("OX2"),"|",GMRNM)="          "
"RTN","GMRVLPO2",26,0)
 . . E  D PO2^GMRVLGQU(.GMRINF) S $P(GMRLINE("OX1"),"|",GMRNM)=$E(GMRINF(1)_"          ",1,10),$P(GMRLINE("OX2"),"|",GMRNM)=$E(GMRINF(2)_"          ",1,10)
"RTN","GMRVLPO2",27,0)
 K GI Q
"RTN","GMRVLPO2",28,0)
SETLN ;
"RTN","GMRVLPO2",29,0)
 S GVAR(GMRI)=""
"RTN","GMRVLPO2",30,0)
 I GMRI="PO2" S (GVAR("PO2"),GVAR("OX1"),GVAR("OX2"),GVAR("OX3"))="" Q
"RTN","GMRVLPO2",31,0)
 Q
"RTN","GMRVPS11")
0^27^B2929382
"RTN","GMRVPS11",1,0)
GMRVPS11 ;HIRMFO/NCA - Convert Oximetry Supplemental Data ;7/18/96
"RTN","GMRVPS11",2,0)
 ;;4.0;Vitals/Measurements;**11**;Apr 25, 1997
"RTN","GMRVPS11",3,0)
EN1 ; Convert if data is stored #% # l/min
"RTN","GMRVPS11",4,0)
 Q:$$PATCH^XPDUTL("GMRV*4.0*11*")
"RTN","GMRVPS11",5,0)
 N GMRVL,GMRX,GMRX1,GMRX2,GMRX3,GMRVOK,GMRVPO S GMRVOK=0
"RTN","GMRVPS11",6,0)
 F GMRVL=0:0 S GMRVL=$O(^GMR(120.5,GMRVL)) Q:GMRVL<1  S GMRVPO=$P($G(^(GMRVL,0)),"^",10) D CONV S:GMRVOK $P(^GMR(120.5,GMRVL,0),"^",10)=GMRVPO
"RTN","GMRVPS11",7,0)
 Q
"RTN","GMRVPS11",8,0)
CONV ; Process Data Convert
"RTN","GMRVPS11",9,0)
 S GMRVOK=0
"RTN","GMRVPS11",10,0)
 Q:GMRVPO=""
"RTN","GMRVPS11",11,0)
 I GMRVPO'["l/min" D  Q
"RTN","GMRVPS11",12,0)
 .I GMRVPO["%" S GMRX=+GMRVPO,GMRX1=$P(GMRVPO,GMRX,2) S:$E(GMRX1,1)=" " GMRX1=$TR(GMRX1," ",""),GMRVPO=GMRX_GMRX1,GMRVOK=1
"RTN","GMRVPS11",13,0)
 .Q
"RTN","GMRVPS11",14,0)
 I GMRVPO["l/min" D
"RTN","GMRVPS11",15,0)
 .S GMRX=$F(GMRVPO,"%") I 'GMRX S:$E(GMRVPO,$L(GMRVPO))=" " GMRVOK=1,GMRVPO=$E(GMRVPO,1,$L(GMRVPO)-1) Q
"RTN","GMRVPS11",16,0)
 .S GMRX1=$F(GMRVPO,"l/min") Q:'GMRX1
"RTN","GMRVPS11",17,0)
 .I GMRX<GMRX1 D
"RTN","GMRVPS11",18,0)
 ..S GMRVOK=1
"RTN","GMRVPS11",19,0)
 ..S GMRX2=$E(GMRVPO,1,GMRX-1),GMRX3=$E(GMRVPO,GMRX+1,GMRX1-1)
"RTN","GMRVPS11",20,0)
 ..S:GMRX2[" " GMRX2=$TR(GMRX2," ","")
"RTN","GMRVPS11",21,0)
 ..S GMRVPO=GMRX3_" "_GMRX2
"RTN","GMRVPS11",22,0)
 ..Q
"RTN","GMRVPS11",23,0)
 .I GMRX>GMRX1 D
"RTN","GMRVPS11",24,0)
 ..S GMRX2=$P(GMRVPO,"l/min ",2) Q:'GMRX2
"RTN","GMRVPS11",25,0)
 ..I GMRX2[" " S GMRVOK=1,GMRX2=$TR(GMRX2," ",""),$P(GMRVPO,"l/min ",2)=GMRX2
"RTN","GMRVPS11",26,0)
 ..Q
"RTN","GMRVPS11",27,0)
 .Q
"RTN","GMRVPS11",28,0)
 Q
"RTN","GMRVQUAL")
0^18^B29724422
"RTN","GMRVQUAL",1,0)
GMRVQUAL ;HIRMFO/YH-VITAL QUALIFIERS ;4/28/99  11:28
"RTN","GMRVQUAL",2,0)
 ;;4.0;Vitals/Measurements;**1,11**;Apr 25, 1997
"RTN","GMRVQUAL",3,0)
LISTQ ;
"RTN","GMRVQUAL",4,0)
 S (I,GMAX,J)=0 K GCHART,GCHART1,GMRW,GCOUNT,GMRENTR,GQUAL,GENTR
"RTN","GMRVQUAL",5,0)
 S GCAT(1)=0 F  S GCAT(1)=$O(^GMRD(120.52,"AA",GMRVIT,GCAT(1))) Q:GCAT(1)'>0  D CATLG S GCHA="" F  S GCHA=$O(^GMRD(120.52,"AA",GMRVIT,GCAT(1),GCHA)) Q:GCHA=""  S GDA=$O(^GMRD(120.52,"AA",GMRVIT,GCAT(1),GCHA,0)) Q:GDA'>0  D
"RTN","GMRVQUAL",6,0)
 . S GCHA=$P($G(^GMRD(120.52,GDA,0)),"^") Q:GCHA=""
"RTN","GMRVQUAL",7,0)
 . S GQUAL(GMRVODR,GCHA)=GDA
"RTN","GMRVQUAL",8,0)
 . Q
"RTN","GMRVQUAL",9,0)
 S (I,J,GMRVODR)=0 F  S GMRVODR=$O(GQUAL(GMRVODR)) Q:GMRVODR'>0  S GCHA="" F  S GCHA=$O(GQUAL(GMRVODR,GCHA)) Q:GCHA=""  D
"RTN","GMRVQUAL",10,0)
 . I GMRVITY="BP"!(GMRVITY="CG") S I=I+1,GCHART(I)=GCHA_"^"_GQUAL(GMRVODR,GCHA)_"^"_GMRVODR,GMRLAST(GMRVODR,GORDER(GMRVODR))=I
"RTN","GMRVQUAL",11,0)
 . I GMRVODR>1,GMRVITY'="BP",GMRVITY'="CG" S I=I+1,GCHART(I)=GCHA_"^"_GQUAL(GMRVODR,GCHA)_"^"_GMRVODR,GMRLAST(GMRVODR,GORDER(GMRVODR))=I
"RTN","GMRVQUAL",12,0)
 . I GMRVODR=1,GMRVITY'="BP",GMRVITY'="CG" S J=J+1,GCHART1(J)=GCHA_"^"_GQUAL(GMRVODR,GCHA)_"^"_GMRVODR,GMRLAST(GMRVODR,GORDER(GMRVODR))=J
"RTN","GMRVQUAL",13,0)
 . I $D(GMRDP),GMRVITY="BP" S J=J+1,GCHART1(J)=GCHA_"^"_GQUAL(GMRVODR,GCHA)_"^"_GMRVODR,GMRLAST(GMRVODR,GORDER(GMRVODR))=J
"RTN","GMRVQUAL",14,0)
 .S GCOUNT(GMRVODR,GORDER(GMRVODR))=$G(GCOUNT(GMRVODR,GORDER(GMRVODR)))+1
"RTN","GMRVQUAL",15,0)
 .I GMRVITY="BP"!(GMRVITY="CG"),$G(GCOUNT(GMRVODR,GORDER(GMRVODR)))>GMAX S GMAX=$G(GCOUNT(GMRVODR,GORDER(GMRVODR)))
"RTN","GMRVQUAL",16,0)
 .I GMRVITY'="CG",GMRVITY'="BP",GMRVODR'=1,$G(GCOUNT(GMRVODR,GORDER(GMRVODR)))>GMAX S GMAX=$G(GCOUNT(GMRVODR,GORDER(GMRVODR)))
"RTN","GMRVQUAL",17,0)
 .Q
"RTN","GMRVQUAL",18,0)
 Q:GLVL=8  I GLVL=9 D  Q
"RTN","GMRVQUAL",19,0)
 . S I=0 F  S I=$O(GCHART1(I)) Q:I'>0  S GMRW($P(GCHART1(I),"^"))=$P(GCHART1(I),"^",2)
"RTN","GMRVQUAL",20,0)
 . Q
"RTN","GMRVQUAL",21,0)
 W !,?3,$S($G(GMRVDFLT(1))'="":"Default: "_$P(GMRVDFLT(1),"^"),1:"Qualifiers: ") S GTXT="" D  Q
"RTN","GMRVQUAL",22,0)
 . S I=0 F  S I=$O(GCHART1(I)) Q:I'>0  S GCHA=$P(GCHART1(I),"^") Q:GCHA=""  S GTXT=GTXT_$S(GTXT="":"",1:", ")_GCHA
"RTN","GMRVQUAL",23,0)
 . I GTXT'="" D WRITE
"RTN","GMRVQUAL",24,0)
 . Q
"RTN","GMRVQUAL",25,0)
 Q
"RTN","GMRVQUAL",26,0)
OTHERQ ;
"RTN","GMRVQUAL",27,0)
 Q:'$D(GCHART)  S GCOL=1,GFLAG=0,$P(GLABEL," ",80)="",$P(GBLNK," ",80)=""
"RTN","GMRVQUAL",28,0)
 Q:+$G(GMAX)=0  F I=1:1:GMAX S $P(GTXT(I)," ",80)=""
"RTN","GMRVQUAL",29,0)
 S GMRVODR=$S(GMRVITY="BP"!(GMRVITY="CG"):0,1:1) F  S GMRVODR=$O(GCOUNT(GMRVODR)) Q:GMRVODR'>0  D
"RTN","GMRVQUAL",30,0)
 . I GMRVITY'="BP",GMRVITY'="CG" S GCOL=$S(GMRVODR=2:1,GMRVODR=3:18,GMRVODR=4:37,1:58)
"RTN","GMRVQUAL",31,0)
 . E  S GCOL=$S(GMRVODR=1:1,GMRVODR=2:18,GMRVODR=3:37,GMRVODR=4:58,1:70)
"RTN","GMRVQUAL",32,0)
 . S I=0,GCAT="" F  S GCAT=$O(GCOUNT(GMRVODR,GCAT)) Q:GCAT=""  D
"RTN","GMRVQUAL",33,0)
 . . S GLABEL=$S(GMRVODR=1:$E(GCAT_GBLNK,1,80),1:$E($E(GLABEL,1,GCOL)_GCAT_GBLNK,1,80))
"RTN","GMRVQUAL",34,0)
 . . S GMIN=GMRLAST(GMRVODR,GORDER(GMRVODR))-GCOUNT(GMRVODR,GCAT)+1
"RTN","GMRVQUAL",35,0)
 . . F J=GMIN:1:GMRLAST(GMRVODR,GORDER(GMRVODR)) S I=I+1,GTXT(I)=$S(GMRVODR=1:$E(J_" "_$E($P(GCHART(J),"^"),1,16)_GBLNK,1,80),1:$E($E(GTXT(I),1,GCOL)_J_" "_$E($P(GCHART(J),"^"),1,16)_GBLNK,1,80))
"RTN","GMRVQUAL",36,0)
 . . Q
"RTN","GMRVQUAL",37,0)
 . Q
"RTN","GMRVQUAL",38,0)
 D:$D(GLABEL) SELECT Q
"RTN","GMRVQUAL",39,0)
 ;
"RTN","GMRVQUAL",40,0)
SELECT ;OTHER QUALIFIERS
"RTN","GMRVQUAL",41,0)
 S (GTYPE,GSIDE)=0 W !!,"Qualifiers for "_GMRVIT(1)_": ",!!,GLABEL,!
"RTN","GMRVQUAL",42,0)
 F I=1:1:GMAX W !,GTXT(I)
"RTN","GMRVQUAL",43,0)
 I GMRVITY'="CG" W !!,"Select a number under each category (optional).",!,"Separate the numbers with ',': "
"RTN","GMRVQUAL",44,0)
 E  W !!,"Enter a number under each category, separate numbers with a ',' ",!,"DO NOT select SITE if this is a HEAD/ABDOMINAL girth measurement: "
"RTN","GMRVQUAL",45,0)
 K GMRINF(GMRVITY) S GMRINF="" R GMRINF:DTIME I '$T!(GMRINF["^") S GMROUT=1 Q
"RTN","GMRVQUAL",46,0)
 I $L(GMRINF)>10 W !,"ERROR ENTRY!!!" G SELECT
"RTN","GMRVQUAL",47,0)
STRIP ; strip off trailing commas
"RTN","GMRVQUAL",48,0)
 S GMRVCOMA=$L(GMRINF)
"RTN","GMRVQUAL",49,0)
 I GMRVCOMA I $E(GMRINF,GMRVCOMA)="," S GMRINF=$E(GMRINF,1,GMRVCOMA-1) G STRIP
"RTN","GMRVQUAL",50,0)
 K GMRVCOMA
"RTN","GMRVQUAL",51,0)
 G:GMRVITY="CG"&(GMRINF="") SELECT
"RTN","GMRVQUAL",52,0)
 I GMRINF="" D BP Q
"RTN","GMRVQUAL",53,0)
 I GMRVITY="CG" S GTYPE=0 F I=1:1:$L(GMRINF,",") S J=+$P(GMRINF,",",I) I $D(GCHART(J)) S:"HEADABDOMINAL"[$P(GCHART(J),"^") GTYPE=1
"RTN","GMRVQUAL",54,0)
 I GMRVITY="P",$P(GMRSITE,"^")="APICAL" S GTYPE=1
"RTN","GMRVQUAL",55,0)
 S GMROUT(1)=0 F I=1:1:$L(GMRINF,",") Q:GMROUT(1)  S J=+$P(GMRINF,",",I) D  Q:GMROUT(1)
"RTN","GMRVQUAL",56,0)
 . I '$D(GCHART(J)) S GMROUT(1)=1 Q
"RTN","GMRVQUAL",57,0)
 . I GTYPE=1,"LEFTRIGHT"[$P(GCHART(J),"^") Q
"RTN","GMRVQUAL",58,0)
 . S GMRVODR=+$P(GCHART(J),"^",3)
"RTN","GMRVQUAL",59,0)
 . S GMRENTR(GMRVODR)=GMRENTR(GMRVODR)-1,GMRINF(GMRVITY,GMRVODR,$P(GCHART(J),"^"))=$P(GCHART(J),"^",2,3)
"RTN","GMRVQUAL",60,0)
 . I $G(GMRENTR(GMRVODR))<0 W !!,"More than maximum qualifier allowed for a category were selected!",! S GMROUT(1)=1 Q
"RTN","GMRVQUAL",61,0)
 . Q
"RTN","GMRVQUAL",62,0)
 I GMROUT(1) W !,"ERROR ENTRY!!!",! D RESET G SELECT
"RTN","GMRVQUAL",63,0)
 D BP Q:'$D(GMRINF(GMRVITY))
"RTN","GMRVQUAL",64,0)
 W ! S I=0 F  S I=$O(GMRINF(GMRVITY,I)) Q:I'>0  S I(1)="" F  S I(1)=$O(GMRINF(GMRVITY,I,I(1))) Q:I(1)=""  W "  "_I(1)
"RTN","GMRVQUAL",65,0)
RESET ;
"RTN","GMRVQUAL",66,0)
 S I=0 F  S I=$O(GMRENTR(I)) Q:I'>0  S GMRENTR(I)=GENTR(I)
"RTN","GMRVQUAL",67,0)
 Q
"RTN","GMRVQUAL",68,0)
WRITE   ;
"RTN","GMRVQUAL",69,0)
 N X S DIWR=75,DIWF="",DIWL=0,X=GTXT K ^UTILITY($J) D ^DIWP
"RTN","GMRVQUAL",70,0)
        S I=0 F  S I=$O(^UTILITY($J,"W",0,I)) Q:I'>0  W !,?3,^UTILITY($J,"W",0,I,0)
"RTN","GMRVQUAL",71,0)
 K ^UTILITY($J) Q
"RTN","GMRVQUAL",72,0)
CATLG ;
"RTN","GMRVQUAL",73,0)
 S GDA(1)=$O(^GMRD(120.53,GCAT(1),1,"B",GMRVIT,0)) Q:GDA(1)'>0
"RTN","GMRVQUAL",74,0)
 S GLN=$G(^GMRD(120.53,GCAT(1),1,GDA(1),0)) Q:GLN=""
"RTN","GMRVQUAL",75,0)
 S GCAT=$G(^GMRD(120.53,GCAT(1),0)) Q:GCAT=""
"RTN","GMRVQUAL",76,0)
 S GMRVODR=+$P(GLN,"^",6),GMRVDFLT=$S($D(^GMRD(120.52,+$P(GLN,"^",7),0)):$P(^(0),"^"),1:"") S:GMRVODR=0 GMRVODR=1
"RTN","GMRVQUAL",77,0)
 S GMRVDFLT(GMRVODR)=GMRVDFLT I GMRVDFLT'="",$D(^GMRD(120.52,"B",GMRVDFLT)) S GMRVDFLT(GMRVODR)=GMRVDFLT(GMRVODR)_"^"_$O(^GMRD(120.52,"B",GMRVDFLT,0))
"RTN","GMRVQUAL",78,0)
 S GCOUNT(GMRVODR,GCAT)=0
"RTN","GMRVQUAL",79,0)
 S GORDER(GMRVODR)=GCAT,(GENTR(GMRVODR),GMRENTR(GMRVODR))=+$P(GLN,"^",3) S:GMRENTR(GMRVODR)=0 GMRENTR(GMRVODR)=1
"RTN","GMRVQUAL",80,0)
 Q
"RTN","GMRVQUAL",81,0)
CLEAR ;
"RTN","GMRVQUAL",82,0)
 K GMRENTR,GDA,I,J,GCH,GCAT,GCHART,GCHART1,GMRW,GMRVODR,GCOUNT,GMRLAST,GMIN,GMAX,GLABEL,GTXT,GMRVDFLT Q
"RTN","GMRVQUAL",83,0)
BP ; Blood Pressure Check
"RTN","GMRVQUAL",84,0)
 I GMRVITY="BP",($D(GMRIN)) D
"RTN","GMRVQUAL",85,0)
 .F GMRVODR=0:0 S GMRVODR=$O(GMRIN(GMRVODR)) Q:GMRVODR<1  D
"RTN","GMRVQUAL",86,0)
 ..S GCAT=$O(GMRIN(GMRVODR,""))
"RTN","GMRVQUAL",87,0)
 ..S GMRINF(GMRVITY,GMRVODR,GCAT)=$G(GMRIN(GMRVODR,GCAT))
"RTN","GMRVQUAL",88,0)
 ..Q
"RTN","GMRVQUAL",89,0)
 .Q
"RTN","GMRVQUAL",90,0)
 Q
"RTN","GMRVSAS0")
0^29^B3926198
"RTN","GMRVSAS0",1,0)
GMRVSAS0 ;HIRMFO/RM,YH-CALCULATE ABNORMAL V/S ;09/11/96
"RTN","GMRVSAS0",2,0)
 ;;4.0;Vitals/Measurements;**11**;Apr 25, 1997
"RTN","GMRVSAS0",3,0)
EN1 ; SENT GMRVX = "T","P","R","BP","CG","PO2" AS VITAL TYPE CODE, GMRVX(0) AS VITAL
"RTN","GMRVSAS0",4,0)
 ; DATA.  RETURN GMRVX(1)=0 IF WITHING NORMAL RANGE, 1 IF ABNORMAL
"RTN","GMRVSAS0",5,0)
 N GMRVSBSH,GMRVSBSL,GMRVHI,GMRVLO,GMRVADAT,GMRVBP2
"RTN","GMRVSAS0",6,0)
 S GMRVX(1)=0 Q:'$D(GMRVX)#2  Q:'$D(GMRVX)\2  Q:GMRVX(0)=""  Q:'$D(^GMRD(120.57,1,1))
"RTN","GMRVSAS0",7,0)
 I "TPRBPCGPO2"']GMRVX Q
"RTN","GMRVSAS0",8,0)
 S GMRVSBSH=$S(GMRVX="T":1,GMRVX="P":3,GMRVX="R":5,GMRVX="CVP":11,GMRVX="B"!(GMRVX="BP"):7,1:0) Q:GMRVX'="PO2"&(GMRVSBSH'>0)
"RTN","GMRVSAS0",9,0)
 S GMRVSBSL=$S(GMRVX="T":2,GMRVX="P":4,GMRVX="R":6,GMRVX="CVP":12,GMRVX="PO2":13,GMRVX="B"!(GMRVX="BP"):9,1:0) Q:GMRVSBSL'>0
"RTN","GMRVSAS0",10,0)
 I GMRVX="BP"!(GMRVX="B") S GMRVSBSH(0)=8,GMRVSBSL(0)=10
"RTN","GMRVSAS0",11,0)
 S GMRVADAT=^GMRD(120.57,1,1)
"RTN","GMRVSAS0",12,0)
 S GMRVHI=$S(GMRVSBSH>0:$P(GMRVADAT,"^",GMRVSBSH),1:0),GMRVLO=$S(GMRVSBSL>0:$P(GMRVADAT,"^",GMRVSBSL),1:0)
"RTN","GMRVSAS0",13,0)
 I GMRVX="PO2" S:GMRVX(0)'>GMRVLO GMRVX(1)=1 Q
"RTN","GMRVSAS0",14,0)
 I GMRVX="BP"!(GMRVX="B") S GMRVHI(0)=$P(GMRVADAT,"^",GMRVSBSH(0)),GMRVLO(0)=$P(GMRVADAT,"^",GMRVSBSL(0)),GMRVBP2=$S($P(GMRVX(0),"/",3)="":$P(GMRVX(0),"/",2),1:$P(GMRVX(0),"/",3))
"RTN","GMRVSAS0",15,0)
 S GMRVX(1)=0
"RTN","GMRVSAS0",16,0)
 I $P(GMRVX(0),"/")'<GMRVHI!($P(GMRVX(0),"/")'>GMRVLO) S GMRVX(1)=1
"RTN","GMRVSAS0",17,0)
 Q:(GMRVX="BP"!(GMRVX="B"))&($G(GMRVBP2)="")
"RTN","GMRVSAS0",18,0)
 I (GMRVX="BP"!(GMRVX="B")),(GMRVBP2'<GMRVHI(0)!(GMRVBP2'>GMRVLO(0))) S GMRVX(1)=1
"RTN","GMRVSAS0",19,0)
 Q
"RTN","GMRVSC0")
0^19^B24203413
"RTN","GMRVSC0",1,0)
GMRVSC0 ;HIRMFO/MD,YH-CUMULATIVE VITALS/MEASUREMENTS FOR PATIENT OVER GIVEN DATE RANGE ;3/14/99
"RTN","GMRVSC0",2,0)
 ;;4.0;Vitals/Measurements;**1,7,11**;Apr 25, 1997
"RTN","GMRVSC0",3,0)
EN1 ; ENTRY FROM OPTION GMRV CUMULATIVE V/M
"RTN","GMRVSC0",4,0)
 K ^TMP($J) S DIC="^DPT(",DIC(0)="AEQM" D ^DIC K DIC Q:+Y'>0  S DFN=+Y
"RTN","GMRVSC0",5,0)
EN2 ; ENTRY IF DFN IS KNOWN TO PRINT CUMULATIVE VITALS
"RTN","GMRVSC0",6,0)
 S GMROUT=0 D DEM^VADPT,INP^VADPT S GMRRMBD=$S(VAIN(5)'="":VAIN(5),1:"  BLANK"),GMRNAM=$S(VADM(1)'="":VADM(1),1:"  BLANK"),^TMP($J,GMRRMBD,GMRNAM,DFN)=""
"RTN","GMRVSC0",7,0)
 S GMRX=$S(VAIN(7)'="":$P(VAIN(7),"^",2),1:"")
"RTN","GMRVSC0",8,0)
EN2A ; ENTRY FROM PRINT CUMULATIVE REPORT BY WARD
"RTN","GMRVSC0",9,0)
 D DATE G:GMROUT Q
"RTN","GMRVSC0",10,0)
DEV S %ZIS="Q",%ZIS("B")="" D ^%ZIS K %ZIS G:POP Q I $E(IOST)="P",'$D(IO("Q")),'$D(IO("S")) D ^%ZISC W !,?3,"PRINTED REPORTS MUST BE QUEUED!!",$C(7) G DEV
"RTN","GMRVSC0",11,0)
 I $D(IO("Q")) S (ZTSAVE("^TMP($J,"),ZTSAVE("GMRVSDT"),ZTSAVE("GMRVFDT"))="",ZTIO=ION,ZTDESC="Cumulative vital/measurement report",ZTRTN="START^GMRVSC0" D ^%ZTLOAD K IO("Q"),ZTSK,ZTIO G Q
"RTN","GMRVSC0",12,0)
START ;
"RTN","GMRVSC0",13,0)
 S (GMROUT,GMRPG)=0 D NOW^%DTC S Y=% D D^DIQ S GMRPDT=$P(Y,"@")_" ("_$P($P(Y,"@",2),":",1,2)_")",$P(GMRDSH,"-",80)="" U IO S GMRRMBD=""
"RTN","GMRVSC0",14,0)
 N GPEDIS S GPEDIS=$O(^GMRD(120.52,"B","DORSALIS PEDIS",0)) Q:GPEDIS'>0
"RTN","GMRVSC0",15,0)
 F  S GMRRMBD=$O(^TMP($J,GMRRMBD)) Q:GMRRMBD=""!GMROUT  S GMRNAM="" F  S GMRNAM=$O(^TMP($J,GMRRMBD,GMRNAM)) Q:GMRNAM=""!GMROUT  S DFN=0 F  S DFN=$O(^TMP($J,GMRRMBD,GMRNAM,DFN)) Q:DFN'>0!GMROUT  S GMRPG=0 D WRT Q:GMROUT  D EN1^GMRVSC1
"RTN","GMRVSC0",16,0)
Q W:$E(IOST)'="C" @IOF D Q^GMRVSC1 K GMRBMI,GMRVHT,^TMP($J),GMRINF,GMRPG,GMREDB,GMRNAM,GMRRMBD,GMRVWLOC,GMRWARD,GMRMSL,GMRROOM,GMRRMST,GMRVHLOC,GMRLEN,GMRI,GMROUT,GMRVSDT,GMRVFDT,GPRT Q
"RTN","GMRVSC0",17,0)
DATE S %DT="AET",%DT("B")=$S(GMRX'="":$P(GMRX,"@"),1:"T-7"),%DT("A")="Start with DATE (TIME optional): " D ^%DT K %DT I +Y'>0 S GMROUT=1 Q
"RTN","GMRVSC0",18,0)
 S GMRVSDT=+Y
"RTN","GMRVSC0",19,0)
 S %DT="AET",%DT("A")="go to DATE (TIME optional): ",%DT("B")="NOW" D ^%DT K %DT I X="^" S GMROUT=1 Q
"RTN","GMRVSC0",20,0)
 I +Y'>0!($P(Y,".",2)'>0&(DT=Y)) D NOW^%DTC S Y=%
"RTN","GMRVSC0",21,0)
 I $P(Y,".",2)'>0 S Y=Y_$S(Y[".":"2400",1:".2400")
"RTN","GMRVSC0",22,0)
 I GMRVSDT>+Y W !,?3,$C(7),"THE START DATE MUST BE BEFORE THE END DATE OF THIS REPORT" G DATE
"RTN","GMRVSC0",23,0)
 S GMRVFDT=+Y
"RTN","GMRVSC0",24,0)
 Q
"RTN","GMRVSC0",25,0)
FOOTER ;REPORT FOOTER SUBROUTINE
"RTN","GMRVSC0",26,0)
 W !!,"*** (E) - Error entry",!! W:VADM(1)'="" ?$X-3,$E(VADM(1),1,15) W:VADM(2)'="" ?17,$P(VADM(2),"^",2) W:VADM(3)'="" ?30,$P(VADM(3),"^",2) W:VADM(4)'="" ?43,$P(VADM(4),"^")_" YRS"
"RTN","GMRVSC0",27,0)
 W:VADM(5)'="" ?51,$P(VADM(5),"^",2)
"RTN","GMRVSC0",28,0)
 W ?65,"VAF 10-7987j" W !,"Unit: "_$S($P(VAIN(4),"^",2)'="":$P(VAIN(4),"^",2),1:"     "),?32,"Room: "_$S($P(VAIN(5),"^")'="":$P(VAIN(5),"^"),1:"   "),!
"RTN","GMRVSC0",29,0)
 I '$D(GMRVHLOC) S GMRVHLOC=$P($G(^DIC(42,+$G(VAIN(4)),44)),"^")
"RTN","GMRVSC0",30,0)
 W "Division: "_$S(GMRVHLOC>0:$$GET1^DIQ(4,+$$GET1^DIQ(44,+GMRVHLOC,3,"I"),.01,"I"),1:""),!
"RTN","GMRVSC0",31,0)
 Q
"RTN","GMRVSC0",32,0)
WRT ;
"RTN","GMRVSC0",33,0)
 S GMR1ST=1 K GMRSITE D DEM^VADPT,INP^VADPT S GWARD=$S($P(VAIN(4),"^",2)'="":$P(VAIN(4),"^",2),1:"   "),GBED=$S(VAIN(5)'="":$P(VAIN(5),"^"),1:"   ") D HDR^GMRVSC2
"RTN","GMRVSC0",34,0)
 Q
"RTN","GMRVSC0",35,0)
EN3(DFN,GMRVSDT,GMRVFDT) ; APPLICATION PROGRAM INTERFACE FOR PATIENT CUMULATIVE VITALS REPORT
"RTN","GMRVSC0",36,0)
 ; INPUT VARIABLES:    DFN=PATIENT NUMBER
"RTN","GMRVSC0",37,0)
 ;                     GMRVSDT=START DATE
"RTN","GMRVSC0",38,0)
 ;                     GMNRVFDT=FINISH DATE OF REPORT
"RTN","GMRVSC0",39,0)
 S GMRVOR=1
"RTN","GMRVSC0",40,0)
EN5 S (GMROUT,GMRPG)=0 D DEM^VADPT,INP^VADPT S GBED=$S(VAIN(5)'="":VAIN(5),1:"   "),GWARD=$S($P(VAIN(4),"^",2)="":"   ",1:$P(VAIN(4),"^",2))
"RTN","GMRVSC0",41,0)
 S GMR1ST=1,GMRDATE(0)=0 D NOW^%DTC S Y=% D D^DIQ S GMRPDT=$P(Y,"@")_" ("_$P($P(Y,"@",2),":",1,2)_")",$P(GMRDSH,"-",81)=""
"RTN","GMRVSC0",42,0)
 N GPEDIS S GPEDIS=$O(^GMRD(120.52,"B","DORSALIS PEDIS",0)) Q:GPEDIS'>0
"RTN","GMRVSC0",43,0)
 K ^TMP($J,"GMRV") F GMRVTY="T","P","R","BP","HT","WT","CVP","CG","PO2","PN" D
"RTN","GMRVSC0",44,0)
 . S GMRVITY=$O(^GMRD(120.51,"C",GMRVTY,0)) I GMRVITY>0 D SETAR^GMRVSC1
"RTN","GMRVSC0",45,0)
 U IO D HDR^GMRVSC2
"RTN","GMRVSC0",46,0)
 I $O(^TMP($J,"GMRV",0))'>0 W !!,"No cumulative vitals data for "_$S($D(OPSPNM):ORSPNM,1:"this patient"),! S:$D(ORSPNM) GMROUT=1 G Q3
"RTN","GMRVSC0",47,0)
 F GMRDATE=0:0 S GMRDATE=$O(GMRVDT(GMRDATE)) Q:GMRDATE'>0!GMROUT  I $D(^TMP($J,"GMRV",GMRDATE)) D PRT^GMRVSC1
"RTN","GMRVSC0",48,0)
Q3 I IOSL'<($Y+10) F X=1:1 W ! Q:IOSL<($Y+10)
"RTN","GMRVSC0",49,0)
 I 'GMROUT W ! D FOOTER^GMRVSC0 I '$D(GMRVOR),$E(IOST)'="P",'GMROUT W !,"Press return to continue or ""^"" to exit " R X:DTIME S:'$T!(X["^") GMROUT=1
"RTN","GMRVSC0",50,0)
 D KVAR^VADPT K GMRVOR,VA,GBED,GWARD,^TMP($J,"GMRV"),GMR1ST,GMRVTY,GMRVITY,GMRVDATE,GMRSITE,GMRDSH,GMRQUAL,GMRVX,GMRX,GX,GMRDAT,GMRLN,GMRPDT,GMRSP,GMRVDA,GMRY
"RTN","GMRVSC0",51,0)
 I $D(ORSPNM) K GMRPG,GMRVSDT,GMRVFDT S:$D(ZTQUEUED) ZTREQ="@" D ^%ZISC
"RTN","GMRVSC0",52,0)
 Q
"RTN","GMRVSC0",53,0)
EN4 ;V/M CUMULATIVE REPORTS BY WARD/ROOM/PT
"RTN","GMRVSC0",54,0)
 S (GMRVWLOC,GMROUT)=0 D WARDPAT^GMRVED0 G:GMROUT Q2
"RTN","GMRVSC0",55,0)
 I "Pp"[GMREDB D DEM^VADPT,INP^VADPT S GMRRMBD=$S(VAIN(5)'="":VAIN(5),1:"  BLANK"),GMRNAM=$S(VADM(1)'="":VADM(1),1:"  BLANK"),^TMP($J,GMRRMBD,GMRNAM,DFN)="" S GMRX=$S(VAIN(7)'="":$P(VAIN(7),"^",2),1:"")
"RTN","GMRVSC0",56,0)
 I "Aa"[GMREDB D EN1^GMRVED2 S GMRX=""
"RTN","GMRVSC0",57,0)
 I "Ss"[GMREDB D EN3^GMRVED6 D:'GMROUT EN1^GMRVED2 S GMRX=""
"RTN","GMRVSC0",58,0)
 G:GMROUT Q2 D EN2A
"RTN","GMRVSC0",59,0)
Q2 K GMROUT,GMRVWLOC,GMRMSL,GMREDB,I,DFN Q
"RTN","GMRVSC2")
0^20^B15770268
"RTN","GMRVSC2",1,0)
GMRVSC2 ;HIRMFO/YH-CUMULATIVE V/M - CONTINUED ;3/14/99
"RTN","GMRVSC2",2,0)
 ;;4.0;Vitals/Measurements;**1,7,11**;Apr 25, 1997
"RTN","GMRVSC2",3,0)
SETLN ;
"RTN","GMRVSC2",4,0)
 S GMRVER=^TMP($J,"GMRV",GMRDATE,GMRVTY,GMRVDA) N GMRVPO
"RTN","GMRVSC2",5,0)
 D:IOSL<($Y+9) HDR Q:GMROUT  W ! W:GMRVER "(E)"
"RTN","GMRVSC2",6,0)
 I GPRT(GMRVTY)=0 D
"RTN","GMRVSC2",7,0)
 . W ?4,$S(GMRVTY="T":"T: ",GMRVTY="P":"P: ",GMRVTY="R":"R: ",GMRVTY="BP":"B/P: ",GMRVTY="WT":"Wt: ",GMRVTY="HT":"Ht: ",GMRVTY="CG":"Circumference/Girth: ",GMRVTY="CVP":"Central Venous Pressure: ",GMRVTY="PO2":"Pulse Oximetry: ",1:"")
"RTN","GMRVSC2",8,0)
 . I GMRVTY="PN" W ?4,"Pain: "
"RTN","GMRVSC2",9,0)
 S GPRT(GMRVTY)=1
"RTN","GMRVSC2",10,0)
 S GMRDAT=$G(^GMR(120.5,GMRVDA,0))
"RTN","GMRVSC2",11,0)
 I "PRBPCVPCGPO2PN"[GMRVTY S GMRVX=GMRVTY,GMRVX(0)=$P(GMRDAT,"^",8) D
"RTN","GMRVSC2",12,0)
 .  I "UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(GMRVX(0)) W ?9,GMRVX(0) Q
"RTN","GMRVSC2",13,0)
 . I GMRVTY="PN" D
"RTN","GMRVSC2",14,0)
 . . I GMRVX(0)=0 W ?9,"No pain" Q
"RTN","GMRVSC2",15,0)
 . . I GMRVX(0)=99 W ?9,"Unable to respond" Q
"RTN","GMRVSC2",16,0)
 . . I GMRVX(0)=10 W ?9,GMRVX(0)_" - Worst imaginable pain" Q
"RTN","GMRVSC2",17,0)
 . . W ?9,GMRVX(0) Q
"RTN","GMRVSC2",18,0)
 . ;I GMRVTY'="PN" W ?9,GMRVX(0)
"RTN","GMRVSC2",19,0)
 . D EN1^GMRVSAS0
"RTN","GMRVSC2",20,0)
 . I GMRVTY="P",$D(^GMR(120.5,GMRVDA,5,"B",GPEDIS)),$P(GMRDAT,"^",8)=1 S GMRVX(1)=""
"RTN","GMRVSC2",21,0)
 . S Z=$S(GMRVTY="CG":$J($P(GMRDAT,"^",8),0,2),GMRVTY="CVP":$J($P(GMRDAT,"^",8),0,1),GMRVTY'="BP":$J($P(GMRDAT,"^",8),3,0),1:$P(GMRDAT,"^",8)) D:GMRVTY'="BP" BLNK W:GMRVTY'="PN" ?9,Z_$S('$D(GMRVX(1)):" ",'GMRVX(1):"",1:"*")
"RTN","GMRVSC2",22,0)
 . I GMRVTY="CG" W " in ("_$J(Z/.3937,0,2)_" cm)"
"RTN","GMRVSC2",23,0)
 . I GMRVTY="CVP" W " cmH2O ("_$J(Z/1.36,0,1)_" mmHg)"
"RTN","GMRVSC2",24,0)
 . I GMRVTY="PO2" S GMRVPO=$P(GMRDAT,"^",10) W "%"_$S(GMRVPO'="":" with supplemental O2 "_$S(GMRVPO["l/min":$P(GMRVPO," l/min")_"L/min",1:"")_$S(GMRVPO["l/min":$P(GMRVPO," l/min",2),1:GMRVPO),1:"")
"RTN","GMRVSC2",25,0)
 I GMRVTY="T" S X=$P(GMRDAT,"^",8) D
"RTN","GMRVSC2",26,0)
 . I X'>0 W ?9,X Q
"RTN","GMRVSC2",27,0)
 . S GMRVX=GMRVTY,GMRVX(0)=X D EN1^GMRVSAS0
"RTN","GMRVSC2",28,0)
 . D EN1^GMRVUTL S:'Y Y="" S Z=$J(X,5,1) D BLNK W ?9,Z_" F " S Z=$J(Y,4,1) D BLNK W "("_Z_" C)"_$S('$D(GMRVX(1)):" ",'GMRVX(1):"",1:"*")
"RTN","GMRVSC2",29,0)
 I GMRVTY="HT" S X=$P(GMRDAT,"^",8) D
"RTN","GMRVSC2",30,0)
 . I X'>0 W ?9,X Q
"RTN","GMRVSC2",31,0)
 . D EN2^GMRVUTL S:'Y Y="" S Z=$J(X,5,2) D BLNK W ?9,Z_" in " S Z=$J(Y,5,2) D BLNK W "("_Z_" cm)" I 'GMRVER S GMRVHT=Z/100
"RTN","GMRVSC2",32,0)
 I GMRVTY="WT" S X=$P(GMRDAT,"^",8) D
"RTN","GMRVSC2",33,0)
 . I X'>0 W ?9,X Q
"RTN","GMRVSC2",34,0)
 . D EN3^GMRVUTL S:'Y Y="" S Z=$J(X,7,2) D BLNK W ?9,Z_" lb " S Z=$J(Y,6,2) D BLNK W "("_Z_" kg)"
"RTN","GMRVSC2",35,0)
 Q:+$P(GMRDAT,"^",8)'>0&(+$P($G(^GMR(120.5,GMRVDA,5,0)),"^",4)'>0)  S GMRVITY=+$P(GMRDAT,"^",3)
"RTN","GMRVSC2",36,0)
 K GMRVARY S (GMRZZ,GMRVARY)="" I $P($G(^GMR(120.5,GMRVDA,5,0)),"^",4)>0 D
"RTN","GMRVSC2",37,0)
 . D CHAR^GMRVCHAR(GMRVDA,.GMRVARY,GMRVITY) S GMRZZ=$$WRITECH^GMRVCHAR(GMRVDA,.GMRVARY,9) S:GMRZZ'=""&(GMRVTY'="PO2") GMRZZ=" ("_GMRZZ_")"
"RTN","GMRVSC2",38,0)
 . W:GMRVTY="PO2" !,?8," via " W GMRZZ
"RTN","GMRVSC2",39,0)
 I GMRVTY="WT",'GMRVER S GMRBMI="",GMRBMI(1)=$P(GMRDAT,"^"),GMRBMI(2)=+$P(GMRDAT,"^",8) D CALBMI^GMRVBMI(.GMRBMI) W:GMRBMI>0 !,?4,"Body Mass Index: "_GMRBMI
"RTN","GMRVSC2",40,0)
 K Z Q
"RTN","GMRVSC2",41,0)
HDR ;
"RTN","GMRVSC2",42,0)
 I 'GMR1ST D FOOTER^GMRVSC0
"RTN","GMRVSC2",43,0)
 I $E(IOST)'="P",'GMR1ST W "Press return to continue ""^"" to escape " R X:DTIME I X="^"!'$T S GMROUT=1 Q
"RTN","GMRVSC2",44,0)
 W:'($E(IOST)'="C"&'$D(GFLAG)) @IOF S GMRPG=GMRPG+1,GFLAG=1
"RTN","GMRVSC2",45,0)
 W !,GMRPDT,?25,"Cumulative Vitals/Measurements Report",?70,"Page ",GMRPG,!!,$E(GMRDSH,1,78)
"RTN","GMRVSC2",46,0)
 I 'GMR1ST,$P(GMRDATE,".")=GMRDATE(0) W !,$E(GMRDATE(0),4,5)_"/"_$E(GMRDATE(0),6,7)_"/"_$E(GMRDATE,2,3)_" (continued)",!
"RTN","GMRVSC2",47,0)
 S GMR1ST=0
"RTN","GMRVSC2",48,0)
 Q
"RTN","GMRVSC2",49,0)
BLNK ;
"RTN","GMRVSC2",50,0)
 F I=1:1:$L(Z) Q:$E(Z,I)'=" "
"RTN","GMRVSC2",51,0)
 S Z=$E(Z,I,$L(Z))
"RTN","GMRVSC2",52,0)
 Q
"RTN","GMRVSR0")
0^23^B34252648
"RTN","GMRVSR0",1,0)
GMRVSR0 ;HIRMFO/RM,YH-VITAL SIGNS RECORD SF 511 ;2/12/99  12:25
"RTN","GMRVSR0",2,0)
 ;;4.0;Vitals/Measurements;**1,3,7,9,11**;Apr 25, 1997
"RTN","GMRVSR0",3,0)
EN1 ; ENTRY POINT FROM OPTION GMRV SF511, SELECT TYPE OF GRAPH FOR THE REPORT
"RTN","GMRVSR0",4,0)
 S (GMRVWLOC,GMROUT,GFLAG,GRAPH)=0 D SELECT^GMRVSR1(.GRAPH) I GRAPH'>0 K GFLAG,GMROUT,GRAPH,GMRVWLOC Q
"RTN","GMRVSR0",5,0)
 D WARDPAT^GMRVED0 I GMROUT D Q1 K GFLAG,GMREDB,GMROUT,GMRWARD,DFN,GRAPH Q
"RTN","GMRVSR0",6,0)
PAT I "Pp"[GMREDB D DEM^VADPT S GMRNAM=$P(VADM(1),"^"),SSN=$P(VADM(2),"^",2)
"RTN","GMRVSR0",7,0)
 I "Ss"[GMREDB D EN3^GMRVED6
"RTN","GMRVSR0",8,0)
 I GMROUT D Q1 K GMREDB,GFLAG,GMROUT,GMRWARD,GRAPH Q
"RTN","GMRVSR0",9,0)
DATE S %DT("A")="Start DATE (TIME optional): ",%DT("B")="T-7",%DT="AETX" D ^%DT K %DT G:+Y'>0 Q1 S GMRSTRT=+Y
"RTN","GMRVSR0",10,0)
 S %DT("A")="go to DATE (TIME optional): ",%DT="AETX",%DT("B")="NOW" D ^%DT K %DT G:+Y'>0 Q1 I $P(Y,".",2)'>0,Y=DT D NOW^%DTC S Y=%
"RTN","GMRVSR0",11,0)
 I $P(Y,".",2)'>0 S Y=Y_$S(Y[".":"2400",1:".2400")
"RTN","GMRVSR0",12,0)
 S (X1,GMRFIN)=+Y,X2=GMRSTRT D ^%DTC
"RTN","GMRVSR0",13,0)
 I X<0!(X=0&(((+("."_$P(GMRFIN,".",2))*10000)-((+("."_$P(GMRSTRT,".",2))*10000)))'>0)) W !?5,"Ending date of range needs to be greater that starting date.",!?5,$C(7),"PLEASE REENTER!!" G DATE
"RTN","GMRVSR0",14,0)
 D DATELN
"RTN","GMRVSR0",15,0)
DEV S %ZIS="NQ",%ZIS("B")=""
"RTN","GMRVSR0",16,0)
 W ! D ^%ZIS G:POP Q1
"RTN","GMRVSR0",17,0)
 N GMRVDEV S GMRVDEV=ION_";"_IOST_";"_IOM_";"_IOSL
"RTN","GMRVSR0",18,0)
 I IOM'>131 W !!,"Sorry, you must select a DEVICE that can print 132 columns. Try again." G DEV ;device must be 132 columns
"RTN","GMRVSR0",19,0)
 I '$D(IO("Q")) S IOP=GMRVDEV K %ZIS D ^%ZIS G Q1:POP,EN2:"Pp"[GMREDB,EN3
"RTN","GMRVSR0",20,0)
 I $D(IO("Q")) S ZTDESC="V/M GRAPHIC REPORTS",ZTIO=GMRVDEV,ZTRTN=$S("Pp"[GMREDB:"EN2^GMRVSR0",1:"EN3^GMRVSR0") F G="GRAPH","GMROUT","DFN","GMRROOM(","GMREDB","GMRNAM","SSN","GMRWARD","GMRSTRT","GMRFIN","GMRWARD(","GFLAG","GSTRFIN" S ZTSAVE(G)=""
"RTN","GMRVSR0",21,0)
 I $D(IO("Q")) D ^%ZTLOAD,HOME^%ZIS K ZTSK,ZTIO,DFN,GMRLEN,GMRRMST,GMRIFN,GMROUT,GMRSTRT,GMRVLOC,GMRWARD D Q1,Q2 Q
"RTN","GMRVSR0",22,0)
 G:'("Pp"[GMREDB) EN3
"RTN","GMRVSR0",23,0)
EN2 ; ENTRY TO PRINT THIS REPORT AFTER IT HAS BEEN QUEUED
"RTN","GMRVSR0",24,0)
 ;  NOTE:  THIS REPORT MUST BE QUEUED TO A PRINTER.
"RTN","GMRVSR0",25,0)
 N GAPICAL,GRADIAL,GBRACHI S GAPICAL=$O(^GMRD(120.52,"B","APICAL",0)),GRADIAL=$O(^GMRD(120.52,"B","RADIAL",0)),GBRACHI=$O(^GMRD(120.52,"B","BRACHIAL",0))
"RTN","GMRVSR0",26,0)
 I IOST["KYOCERA"!(IOST["Kyocera") S GROUTN=$S(GRAPH=1:"EN1^GMRVGR0",GRAPH=2:"EN1^GMRVBP0",GRAPH=3:"EN1^GMRVWT0",GRAPH=4:"EN1^GMRVKPO0",GRAPH=5:"^GMRVKPN0",1:"") D:GROUTN'="" @GROUTN G:"Pp"[GMREDB Q1 Q
"RTN","GMRVSR0",27,0)
 I $$UP^XLFSTR(IOST)["HPLASER" S GROUTN=$S(GRAPH=1:"EN1^GMRVHG0",GRAPH=2:"EN1^GMRVHB0",GRAPH=3:"EN1^GMRVHW0",GRAPH=4:"EN1^GMRVHPO0",GRAPH=5:"EN1^GMRVHPN0",1:"") D:GROUTN'="" @GROUTN G:"Pp"[GMREDB Q1 Q
"RTN","GMRVSR0",28,0)
 I GRAPH=2 D ^GMRVLBP0 G:"Pp"[GMREDB Q1 Q
"RTN","GMRVSR0",29,0)
 I GRAPH=3 D ^GMRVLWT0 G:"Pp"[GMREDB Q1 Q
"RTN","GMRVSR0",30,0)
 I GRAPH=4 D ^GMRVLPO0 G:"Pp"[GMREDB Q1 Q
"RTN","GMRVSR0",31,0)
 I GRAPH=5 W !!,"Sorry, you must select a Kyocera or HP Laser printer for the Pain Chart." S:'$G(GMRPERR) GMRPERR=1 G:"Pp"[GMREDB Q1 Q
"RTN","GMRVSR0",32,0)
 S GMRS=(9999999-GMRFIN)-.0001,GMRQ=9999999-GMRSTRT
"RTN","GMRVSR0",33,0)
 F GMRTY="B","P","R","T","H","W","PO2","CVP","CG","PN" D SETT^GMRVSR1
"RTN","GMRVSR0",34,0)
 U IO D SF511^GMRVSR1
"RTN","GMRVSR0",35,0)
Q1 K J,G,GMR,GMR3,GMRDAT,GMRDT,GMREN,GMRHDR1,GMRHDR10,GMRHDR11,GMRHDR2,GMRHT,GMRI,GMRJ,GMRK,GMRLINE,GMRMSL,GMRNM,GMROLD,GMRP,GMRPDIF,GMRT,GMRX,GMRTY,GMRPG,GMRPGC,GMRPGS,GMRPHI,GMRPLO,GMRTDIF,GMRTHI,GMRTLO,GMRTNM,GMRX1,GMRX2 D KVAR^VADPT K VA,%T
"RTN","GMRVSR0",36,0)
 K GVAR,GMRDIV,GMRHT,GMRQUAL,GMRS,GMRQ,GMRPOFF,GMRTOFF,GMRVWLOC,GMRVX,DIK,%ZIS,%DT,DIPGM,GMRLEN,GMRRMST,GMRVHLOC,GDA,GMRINF,GLINE,GMRVARY,GMRPERR,GMRVPS
"RTN","GMRVSR0",37,0)
 W:$E(IOST)="P"!$D(IO("S"))&($$UP^XLFSTR(IOST)'["HPLASER") ! Q:'("Pp"[GMREDB)
"RTN","GMRVSR0",38,0)
Q2 S:$D(ZTQUEUED) ZTREQ="@" K ^TMP($J),GMRII,GMRQUAL,GMREDB,GMROUT,GMRROOM,GMRSTRT,GMRFIN,GMRNAM,GMRRMBD,GMRSITE,GMRVHLOC,GMRWARD,POP,SSN,DFN,ZTIO,ZTSK,GDT,GDTA,GFOUND,GMRAGE,GMRBED,GMRBTH,GMRCOL,GMRHLOC,GMROP,GMRSEX,GMRVADM,GRPT,GSUB,GTYPE1
"RTN","GMRVSR0",39,0)
 K GSTRFIN,GMRVFLAG,SNN,GMVRMBD,GMVWRD,GRAPH,GROUTN,GIVDT,GSTAR,GSOL,GN,GNDATE,GNSHFT,GFLAG,ZTSAVE,ZTRTN W:$E(IOST)'="C"&(IOST'["KYOC"!(IOST'["Kyoc")!(IOST'["kyoc")!($$UP^XLFSTR(IOST)'["HPLASER")) @IOF D ^%ZISC Q
"RTN","GMRVSR0",40,0)
EN3 ; ENTRY TO PRINT REPORT FOR ALL OR SELECTED GROUP OF PATIENTS, FOR WARD STORED IN GMRWARD
"RTN","GMRVSR0",41,0)
 S GMRPERR=0
"RTN","GMRVSR0",42,0)
 D EN1^GMRVED2 S GMRROOM="" F GMRII=0:0 S GMRROOM=$O(^TMP($J,GMRROOM)) Q:GMRROOM=""  S GMRNAM="" F GMRII=0:0 S GMRNAM=$O(^TMP($J,GMRROOM,GMRNAM)) Q:GMRNAM=""  F DFN=0:0 S DFN=$O(^TMP($J,GMRROOM,GMRNAM,DFN)) Q:DFN'>0  D:DFN>0 PRT
"RTN","GMRVSR0",43,0)
 D Q1 G Q2
"RTN","GMRVSR0",44,0)
PRT ;
"RTN","GMRVSR0",45,0)
 D DEM^VADPT S SSN=$P(VADM(2),"^",2) Q:$G(GMRPERR)&('$D(IO("Q")))  D EN2
"RTN","GMRVSR0",46,0)
 Q
"RTN","GMRVSR0",47,0)
EN4 ; ENTRY POINT IF DFN IS KNOWN TO PRINT THIS REPORT
"RTN","GMRVSR0",48,0)
 Q:'$D(DFN)  S GRAPH=1,GMREDB="P",GMROUT=0,GMRVHLOC=+ORL D INP^VADPT S GMRWARD(1)=$P(VAIN(4),"^",2),GMRWARD=$P(VAIN(4),"^") G PAT
"RTN","GMRVSR0",49,0)
 Q
"RTN","GMRVSR0",50,0)
EN5 ; ENTRY POINT FOR APPLICATION TO GET REPORT. INPUT VARIABLES:
"RTN","GMRVSR0",51,0)
 ;    DFN=PATIENT NUMBER
"RTN","GMRVSR0",52,0)
 ;    GMRDATE=START DATE^FINISH DATE OF REPORT^TYPE OF GRAPH
"RTN","GMRVSR0",53,0)
 ;    (OPTIONAL) GMRVWLO=LOCATION GROUPING OF PATIENT IF DIFFERENT HAN 42 FILE
"RTN","GMRVSR0",54,0)
 Q:'$D(DFN)!'$D(GMRDATE)!(DFN'>0)  Q:'$P(GMRDATE,"^")!'$P(GMRDATE,"^",2)  S GMREDB="A",GMROUT=0,GMRSTRT=$P(GMRDATE,"^"),GMRFIN=$P(GMRDATE,"^",2) D INP^VADPT S GMRWARD(1)=$S($D(GMRVWLO):GMRVWLO,1:$P(VAIN(4),"^",2)),GMRWARD=$P(VAIN(4),"^")
"RTN","GMRVSR0",55,0)
 D DATELN S GRAPH=$S($P(GMRDATE,"^",3)>0:+$P(GMRDATE,"^",3),1:1) D EN2 Q
"RTN","GMRVSR0",56,0)
EN6(DFN,GMRDATE) ; APPLICATION PROGRAM INTERFACE FOR SINGLE PATIENT REPORT. INPUT VARIABLES:    DFN=PATIENT NUMBER
"RTN","GMRVSR0",57,0)
 ;               GMRDATE=START DATE^FINISH DATE OF REPORT
"RTN","GMRVSR0",58,0)
 Q:'$D(DFN)!'$D(GMRDATE)  Q:'$P(GMRDATE,U)!'$P(GMRDATE,U,2)  S GMREDB="P",GMROUT=0,GMRSTRT=$P(GMRDATE,U),GMRFIN=$P(GMRDATE,U,2) D DEM^VADPT,INP^VADPT S SSN=VA("PID"),GMRWARD=$P(VAIN(4),U),GMRWARD(1)=$P(VAIN(4),U,2)
"RTN","GMRVSR0",59,0)
 I IOM'>130 D  Q
"RTN","GMRVSR0",60,0)
 .S GMRVDVIC=$E(IOST) ;device type chosen by user (e.g., 'C')
"RTN","GMRVSR0",61,0)
 .D ^%ZISC
"RTN","GMRVSR0",62,0)
 .W !,"THIS REPORT NEEDS 132 COLUMNS",!
"RTN","GMRVSR0",63,0)
 .I GMRVDVIC'="C" H 3 ;if device is not a terminal hang 3 seconds
"RTN","GMRVSR0",64,0)
 .K GMRVDVIC
"RTN","GMRVSR0",65,0)
 .Q
"RTN","GMRVSR0",66,0)
 D DATELN S GRAPH=$S($P(GMRDATE,"^",3)>0:+$P(GMRDATE,"^",3),1:1) D EN2 Q
"RTN","GMRVSR0",67,0)
DATELN ;
"RTN","GMRVSR0",68,0)
 S Y=GMRSTRT X ^DD("DD") S GSTRFIN=Y S Y=GMRFIN X ^DD("DD") S GSTRFIN=GSTRFIN_" - "_Y Q
"RTN","GMRVUT1")
0^21^B22116684
"RTN","GMRVUT1",1,0)
GMRVUT1 ;HIRMFO/YH-VITAL SIGNS INFORMATION ;2/5/99
"RTN","GMRVUT1",2,0)
 ;;4.0;Vitals/Measurements;**6,7,11**;Apr 25, 1997
"RTN","GMRVUT1",3,0)
T ;HELP INFORMATION FOR TEMPERATURE
"RTN","GMRVUT1",4,0)
 S GMRVITY="T",GMRVIT=$O(^GMRD(120.51,"C",GMRVITY,0)) Q:GMRVIT'>0  S GMRVIT(1)=$P($G(^GMRD(120.51,GMRVIT,0)),"^")
"RTN","GMRVUT1",5,0)
 W !,"** Temperature:  a number + a location qualifier(optional), e.g., 99.6A",!,?3,"or 99.6AX (F AXILLARY) or 37R (C RECTAL)." S GLVL="" D LISTQ^GMRVQUAL S GLINE=$G(GLINE)+4 D CHECK Q
"RTN","GMRVUT1",6,0)
P ;HELP INFORMATION FOR PULSE
"RTN","GMRVUT1",7,0)
 S GMRVITY="P",GMRVIT=$O(^GMRD(120.51,"C",GMRVITY,0)) Q:GMRVIT'>0  S GMRVIT(1)=$P($G(^GMRD(120.51,GMRVIT,0)),"^")
"RTN","GMRVUT1",8,0)
 W !,"** Pulse:  a number + a location qualifier(optional), e.g., 70A or 70AP",!,?3,"(70 APICAL).  " S GLVL="" D LISTQ^GMRVQUAL S GLINE=$G(GLINE)+5 D CHECK Q
"RTN","GMRVUT1",9,0)
R ;HELP INFORMATION FOR RESPIRATORY
"RTN","GMRVUT1",10,0)
 S GMRVITY="R",GMRVIT=$O(^GMRD(120.51,"C",GMRVITY,0)) Q:GMRVIT'>0  S GMRVIT(1)=$P($G(^GMRD(120.51,GMRVIT,0)),"^")
"RTN","GMRVUT1",11,0)
 W !,"** Respiration:  a number(0-99 with no decimal places) + method qualifier" S GLINE=$G(GLINE)+1 D CHECK W !,?3,"(optional) e.g., 40C or 40c." S GLVL="" D LISTQ^GMRVQUAL S GLINE=$G(GLINE)+1 D CHECK Q
"RTN","GMRVUT1",12,0)
BP ;HELP INFORMATION FOR BLOOD PRESSURE
"RTN","GMRVUT1",13,0)
 W !,"** B/P:  systolic/intermediate/diastolic" S GLINE=$G(GLINE)+1 D CHECK W !,?3,"intermediate pressure is optional, e.g., 98/64 or 120/100/80"
"RTN","GMRVUT1",14,0)
 S GLINE=$G(GLINE)+1 D CHECK W !,?3,"Null diastolic only be allowed for taken either by Doppler or Palpated." S GLINE=$G(GLINE)+1 D CHECK
"RTN","GMRVUT1",15,0)
 W !,?3,"The Default method is Palpated if no diastolic is entered."
"RTN","GMRVUT1",16,0)
 S GLINE=$G(GLINE)+1 D CHECK
"RTN","GMRVUT1",17,0)
 W !,?3,"Otherwise, enter D for Doppler, (e.g., 120/ or 120/D or 120/P)."
"RTN","GMRVUT1",18,0)
 S GLINE=$G(GLINE)+1 D CHECK Q
"RTN","GMRVUT1",19,0)
HT ;HELP INFORMATION FOR HEIGHT
"RTN","GMRVUT1",20,0)
 W !,"** Height:  a number + ',' (optional) + qualifier (2 decimals allowed)" S GLINE=$G(GLINE)+1 D CHECK
"RTN","GMRVUT1",21,0)
 S GMRVITY="HT",GMRVIT=$O(^GMRD(120.51,"C",GMRVITY,0)) Q:GMRVIT'>0  S GMRVIT(1)=$P($G(^GMRD(120.51,GMRVIT,0)),"^")
"RTN","GMRVUT1",22,0)
 W !,?3,"72I (inches)   147C (centimeters)" S GLINE=$G(GLINE)+1 D CHECK W !,?3,"5F10IE or 5'10""E (for 5 feet 10 inches ESTIMATED)" S GLINE=$G(GLINE)+1 D CHECK
"RTN","GMRVUT1",23,0)
 S GLVL="" D LISTQ^GMRVQUAL S GLINE=$G(GLINE)+2 D CHECK Q
"RTN","GMRVUT1",24,0)
CG ;HELP INFORMATION FOR CIRCUMFERENCE/GIRTH
"RTN","GMRVUT1",25,0)
 D CG^GMRVUTL1  S GLINE=$G(GLINE)+3 D CHECK Q
"RTN","GMRVUT1",26,0)
CVP ;
"RTN","GMRVUT1",27,0)
 D CVP^GMRVUTL1 Q
"RTN","GMRVUT1",28,0)
PO2 ;
"RTN","GMRVUT1",29,0)
 D PO2^GMRVUTL1 S GLINE=$G(GLINE)+2 D CHECK Q
"RTN","GMRVUT1",30,0)
PN ;HELP INFORMATION
"RTN","GMRVUT1",31,0)
 D PAIN^GMRVUTL1 S GLINE=$G(GLINE)+4 D CHECK Q
"RTN","GMRVUT1",32,0)
WT ;HELP INFORMATION FOR WEIGHT
"RTN","GMRVUT1",33,0)
 S GMRVITY="WT",GMRVIT=$O(^GMRD(120.51,"C",GMRVITY,0)) Q:GMRVIT'>0  S GMRVIT(1)=$P($G(^GMRD(120.51,GMRVIT,0)),"^")
"RTN","GMRVUT1",34,0)
 W !,"** Weight: a number+L(l) or a number+K(k) + 2nd quality (optional) 2 decimals" S GLINE=$G(GLINE)+1 D CHECK W !,?3,"allowed, e.g., 120.25L or 120l (pounds),   45.25K or 45k (kilograms)." S GLINE=$G(GLINE)+1
"RTN","GMRVUT1",35,0)
 D CHECK W !,?3,"120L, 120LA, or 120K for actual weight." S GLVL="" D LISTQ^GMRVQUAL S GLINE=$G(GLINE)+2 D CHECK Q
"RTN","GMRVUT1",36,0)
WTYPE ;ENTRY POIT FOR TYPE OF WEIGHT - ACTUAL/ESTIMATED/DRY
"RTN","GMRVUT1",37,0)
 K GMRW S (GMRVDFLT,GMRW)="",GLVL=9 D LISTQ^GMRVQUAL Q:'$D(GMRW)
"RTN","GMRVUT1",38,0)
 S GMRSITE=$P(X,+X,2) I $L(GMRSITE)=1,"LlKk"[GMRSITE S GMRSITE(GMRVITY)=$G(GMRVDFLT(1)) W ! G OTHERQ
"RTN","GMRVUT1",39,0)
 I $L(GMRSITE)=1,"LlKk"'[GMRSITE Q
"RTN","GMRVUT1",40,0)
 S:$L(GMRSITE)>1 GMRSITE=$$UP^XLFSTR($E(GMRSITE,2,30))
"RTN","GMRVUT1",41,0)
ASK3 K GMRV S GMRV=0 D SETSITE^GMRVUT3 I GMRV>0!GMROUT G OTHERQ
"RTN","GMRVUT1",42,0)
 G ASK
"RTN","GMRVUT1",43,0)
 ;
"RTN","GMRVUT1",44,0)
TPSITE ;SITE FOR TEMP., PULSE, B/P, RESPIRATION AND HEIGHT
"RTN","GMRVUT1",45,0)
 K GMRW S (GMRVDFLT,GMRW)="",GLVL=9 D LISTQ^GMRVQUAL Q:'$D(GMRW)
"RTN","GMRVUT1",46,0)
ASK2 ;
"RTN","GMRVUT1",47,0)
 I GMRVITY="T"!(GMRVITY="R")!(GMRVITY="P"),GMRSITE="" S GMRSITE(GMRVITY)=$G(GMRVDFLT(1)) G OTHERQ
"RTN","GMRVUT1",48,0)
 I GMRVITY="HT",GMRSITE="" S GMRSITE(GMRVITY)="" G OTHERQ
"RTN","GMRVUT1",49,0)
ASK1 K GMRV S GMRV=0 D SETSITE^GMRVUT3 I GMROUT!(GMRV>0) G OTHERQ
"RTN","GMRVUT1",50,0)
 ;
"RTN","GMRVUT1",51,0)
ASK W !!,"Select one of the following qualifiers for "_GMRVIT(1)_" or <RET> for default" D LIST W !!,"Please enter "_$S(GMRVITY="T"!(GMRVITY="BP")!(GMRVITY="P"):"location: ",GMRVITY="R":"method: ",GMRVITY="WT":"quality: ",1:"")
"RTN","GMRVUT1",52,0)
 W $P($G(GMRVDFLT(1)),"^")_"// "
"RTN","GMRVUT1",53,0)
 S GMRSITE="" R GMRSITE:DTIME S:'$T!(GMRSITE["^") GMROUT=1 I GMROUT W ! G OTHERQ
"RTN","GMRVUT1",54,0)
 S GMRSITE=$$UP^XLFSTR(GMRSITE) I GMRSITE="" S (GMRSITE,GMRSITE(GMRVITY))=$G(GMRVDFLT(1)) G OTHERQ
"RTN","GMRVUT1",55,0)
 G ASK3:GMRVITY="WT",ASK1
"RTN","GMRVUT1",56,0)
OTHERQ ;
"RTN","GMRVUT1",57,0)
 Q:GMROUT!(GMRENTY<5)  D OTHERQ^GMRVQUAL
"RTN","GMRVUT1",58,0)
 Q
"RTN","GMRVUT1",59,0)
CHECK ;
"RTN","GMRVUT1",60,0)
 I GLINE>14 D
"RTN","GMRVUT1",61,0)
 . W !,"<Ret> to continue " S J="" R J:DTIME S GLINE=0
"RTN","GMRVUT1",62,0)
 Q
"RTN","GMRVUT1",63,0)
LIST ;LIST SITES FOR THE SELECTED VM TYPE
"RTN","GMRVUT1",64,0)
 Q:'$D(GMRW)  S GMRZ="" F  S GMRZ=$O(GMRW(GMRZ)) Q:GMRZ=""  W !,?4,GMRZ
"RTN","GMRVUT1",65,0)
 Q
"RTN","GMRVUT3")
0^26^B14442010
"RTN","GMRVUT3",1,0)
GMRVUT3 ;HIRMFO/YH-VITAL MEASUREMENT SITE/QUALIFIER SELECTIO ;4/16/97
"RTN","GMRVUT3",2,0)
 ;;4.0;Vitals/Measurements;**1,11**;Apr 25, 1997
"RTN","GMRVUT3",3,0)
SETSITE ;SET THE V/M SITE FOR THE VARIAVLE GMRSITE
"RTN","GMRVUT3",4,0)
 ;GMRV WAS SET BY THE CALLING ROUTINE
"RTN","GMRVUT3",5,0)
 N G S G="" F  S G=$O(GMRW(G)) Q:G=""  I $E(G,1,$L(GMRSITE))=GMRSITE S GMRV=GMRV+1,GMRV(GMRV)=G
"RTN","GMRVUT3",6,0)
 Q:GMRV=0  I GMRV=1 S (GMRSITE(GMRVITY),GMRSITE)=GMRV(GMRV)_"^"_$G(GMRW(GMRV(GMRV))) Q
"RTN","GMRVUT3",7,0)
ASK W !!,GMRVIT(1)_":",! S G=0 F  S G=$O(GMRV(G)) Q:G'>0  W !,?5,G_".  "_GMRV(+G)
"RTN","GMRVUT3",8,0)
 W !!,"Select a number between 1 and "_GMRV_":  " S G(1)=0 R G(1):DTIME I '$T!(G(1)["^") S GMROUT=1 Q
"RTN","GMRVUT3",9,0)
 I $L(G(1))>3 G ASK
"RTN","GMRVUT3",10,0)
 I '$D(GMRV(+G(1))) G ASK
"RTN","GMRVUT3",11,0)
 S (GMRSITE,GMRSITE(GMRVITY))=GMRV(+G(1))_"^"_$G(GMRW(GMRV(+G(1))))
"RTN","GMRVUT3",12,0)
 Q
"RTN","GMRVUT3",13,0)
ROOMSEL ;
"RTN","GMRVUT3",14,0)
 W ! W:$G(GMRMSL($G(I(1))))'="" I(1),". ",?6,$G(GMRMSL(I(1))) W:$G(GMRMSL($G(I(2))))'="" ?16,I(2),".  ",$G(GMRMSL(I(2))) W:$G(GMRMSL($G(I(3))))'="" ?33,I(3),".  ",$G(GMRMSL(I(3)))
"RTN","GMRVUT3",15,0)
 W:$G(GMRMSL($G(I(4))))'="" ?49,I(4),".  ",$G(GMRMSL(I(4))) W:$G(GMRMSL($G(I(5))))'="" ?65,I(5),".  ",$G(GMRMSL(I(5)))
"RTN","GMRVUT3",16,0)
 S I(1)=(I(1)+1),I(2)=(I(2)+1),I(3)=(I(3)+1),I(4)=(I(4)+1),I(5)=(I(5)+1)
"RTN","GMRVUT3",17,0)
 Q
"RTN","GMRVUT3",18,0)
GIRTH ;INPUT TRANSFORM FOR CIRCUMFERENCE/GIRTH
"RTN","GMRVUT3",19,0)
 Q:"UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)  N UNIT S UNIT=$$UP^XLFSTR($P(X,+X,2)),X=+X I UNIT="" S UNIT="I" Q
"RTN","GMRVUT3",20,0)
 I UNIT="C" S X=$J(.3937*X,0,2),UNIT="I"
"RTN","GMRVUT3",21,0)
 I UNIT'="I" K X Q
"RTN","GMRVUT3",22,0)
 K:+X'=X!(X>200)!(X<0) X
"RTN","GMRVUT3",23,0)
 Q
"RTN","GMRVUT3",24,0)
CVP ;INPUT TRANSFORM FOR CVP
"RTN","GMRVUT3",25,0)
 Q:"UNAVAILABLEPASSREFUSED"[$$UP^XLFSTR(X)  N UNIT S UNIT=$$UP^XLFSTR($P(X,+X,2)) I $L(UNIT)>1!($L(UNIT)=1&($E(UNIT)'="G")) K X Q
"RTN","GMRVUT3",26,0)
 I UNIT'="" S X=X*1.36
"RTN","GMRVUT3",27,0)
 K:X<-13.6!(X>136) X
"RTN","GMRVUT3",28,0)
 Q
"RTN","GMRVUT3",29,0)
O2 ;SUPPLEMENTAL O2 FOR PULSE OXIMETRY
"RTN","GMRVUT3",30,0)
 N %,GMRV,GMRZ,GMRX,GMRY S (GMRSITE(GMRVITY),GMRINF(GMRVITY),GMRO2(GMRVITY))=""
"RTN","GMRVUT3",31,0)
ASKO2 S %=1 W !,"Is the patient on supplemental oxygen" D YN^DICN I %<0 S GMROUT=1 Q
"RTN","GMRVUT3",32,0)
 I %=0 G ASKO2
"RTN","GMRVUT3",33,0)
 Q:%=2
"RTN","GMRVUT3",34,0)
ASKINF W !!,"Enter the numeric value(s) for amount of supplemental oxygen provided",!,"(Separate values with a ',') : "
"RTN","GMRVUT3",35,0)
 S GMRV="" R GMRV:DTIME I '$T!(GMRV["^") S GMROUT=1 Q
"RTN","GMRVUT3",36,0)
 I $L(GMRV)>15 G ASKINF
"RTN","GMRVUT3",37,0)
 I GMRV["?" W !!,"Enter a number between 0.5-20 for liters/minute,   and/or ",!,?23,"21-100 for percent of oxygen concentration.",!,"If you wish to enter both rates, separate the values with a ','.",! G ASKINF
"RTN","GMRVUT3",38,0)
 Q:GMRV=""
"RTN","GMRVUT3",39,0)
 S GMRZ=0 D CHECK I GMRZ W !!,"ERROR ENTRY!",! G ASKINF
"RTN","GMRVUT3",40,0)
 I (GMRX["l/min"&(GMRY["l/min"))!(GMRX["%"&(GMRY["%")) W !!,"ERROR ENTRY!" G ASKINF
"RTN","GMRVUT3",41,0)
 I GMRY'="" D
"RTN","GMRVUT3",42,0)
 .N GMRVPO
"RTN","GMRVUT3",43,0)
 .I GMRX'["l/min",(GMRY["l/min") S:GMRX["%" GMRVPO=GMRY,GMRY=GMRX,GMRX=GMRVPO
"RTN","GMRVUT3",44,0)
 .Q
"RTN","GMRVUT3",45,0)
 S GMRO2(GMRVITY)=GMRX S:GMRY'="" GMRO2(GMRVITY)=GMRO2(GMRVITY)_$S(GMRO2(GMRVITY)="":"",1:" ")_GMRY S:GMRO2(GMRVITY)'="" GMRO2(GMRVITY)=GMRO2(GMRVITY)
"RTN","GMRVUT3",46,0)
 S GLVL=8 D LISTQ^GMRVQUAL
"RTN","GMRVUT3",47,0)
 Q:'$D(GCHART1)
"RTN","GMRVUT3",48,0)
ASKM S GMRV=$O(GCOUNT(1,GMRV)) W !,"Oxygen is supplied by",!
"RTN","GMRVUT3",49,0)
 F I=1:1:GCOUNT(1,GMRV) W !,?5,I_" "_$P(GCHART1(I),"^")
"RTN","GMRVUT3",50,0)
 W !,"Enter a number: " S GMRV="" R GMRV:DTIME I '$T!(GMRV["^") S GMROUT=1 Q
"RTN","GMRVUT3",51,0)
 I $L(GMRV)>3 G ASKM
"RTN","GMRVUT3",52,0)
 I $D(GCHART1(+GMRV)) S GMRSITE(GMRVITY)=GCHART1(+GMRV) Q
"RTN","GMRVUT3",53,0)
 I '$D(GCHART1(+GMRV)) G ASKM
"RTN","GMRVUT3",54,0)
 I GMRV["?" G ASKM
"RTN","GMRVUT3",55,0)
 Q
"RTN","GMRVUT3",56,0)
CHECK ;
"RTN","GMRVUT3",57,0)
 S GMRY=$P($G(GMRV),","),GMRX=$P($G(GMRV),",",2)
"RTN","GMRVUT3",58,0)
 I GMRX'="" D O2DATA(.GMRX,.GMRZ) Q:GMRZ
"RTN","GMRVUT3",59,0)
 I GMRY'="" D O2DATA(.GMRY,.GMRZ)
"RTN","GMRVUT3",60,0)
 Q
"RTN","GMRVUT3",61,0)
O2DATA(I,J) ;
"RTN","GMRVUT3",62,0)
 I '(I>0&(I<100.001)) S J=1 Q
"RTN","GMRVUT3",63,0)
 I I<20.01,I?0.3N0.1"."0.1N S I=I_" l/min" Q
"RTN","GMRVUT3",64,0)
 I I>20&(I<100.001),I?1.3N S I=I_"%" Q
"RTN","GMRVUT3",65,0)
 S J=1
"RTN","GMRVUT3",66,0)
 Q
"RTN","GMRVVS1")
0^28^B25918331
"RTN","GMRVVS1",1,0)
GMRVVS1 ;HIRMFO/YH-PATIENT VITAL SIGNS-I/O SF 511 GRAPH - 1 ;3/17/97
"RTN","GMRVVS1",2,0)
 ;;4.0;Vitals/Measurements;**1,9,11**;Apr 25, 1997
"RTN","GMRVVS1",3,0)
GRAPH ;
"RTN","GMRVVS1",4,0)
 S GMRPGC=0,GMRX1="" F X=1:1:111 S GMRX1=GMRX1_$S(X#11:" ",1:"|")
"RTN","GMRVVS1",5,0)
 S (GMRX,GMRX2)=GMRX1 F X=1:1:10 S $P(GMRX,"|",X)="__________",$P(GMRX2,"|",X)="----------"
"RTN","GMRVVS1",6,0)
 S GMRPG=GMRTNM\10+$S(GMRTNM#10>0:1,1:0) I GMRPG=0 D HEADER^GMRVVS2 W !,"THERE IS NO DATA FOR THIS REPORT" X "F Y=$Y:1:(IOSL-6) W !" D FOOTER^GMRVVS2 Q
"RTN","GMRVVS1",7,0)
 F GMRPGS=1:1:GMRPG S GMRTLO=105.8335,GMRPLO=198.335 D PAGE Q:GMROUT
"RTN","GMRVVS1",8,0)
 Q
"RTN","GMRVVS1",9,0)
PAGE ;
"RTN","GMRVVS1",10,0)
 K GMRQUAL,GLINE,GVAR D HEADER^GMRVVS2 W "T: Temperature   P: Pulse   BMI: Body Mass Index   C/G: Circumference/Girth   * - Abnormal value   ** - Abnormal value off of graph",! D DATES^GMRVVS2 W !,?10,"|",?11,GMRX
"RTN","GMRVVS1",11,0)
 F GMRI=0:0 Q:$Y>51  W ! D SETHD^GMRVVS4 W GMRHDR1,?9,$S(GMR3!($Y=28):"-",1:""),?10,"|" D DATAPRT^GMRVVS4 W $S(GMR3!($Y=28):"-",1:""),?106,GMRHDR2
"RTN","GMRVVS1",12,0)
 W !,?10,"|",GMRX2 F GMRI="T","P","R","B","B1","B2","W","H","P1","BMI" S GMRLINE(GMRI)=GMRX1,GVAR(GMRI)=""
"RTN","GMRVVS1",13,0)
 F GMRI="PO2","OX1","OX2","OX3","CVP","CVP1","CG","CG1","CG2" K GVAR(GMRI)
"RTN","GMRVVS1",14,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>12  F GMRI="T","P","R","H","W" D STLNP
"RTN","GMRVVS1",15,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  S GMRNM=GMRNM+1 Q:GMRNM>12  D BP^GMRVVS2
"RTN","GMRVVS1",16,0)
 F GMRI="T","P","P1","R","B","B1","B2","W","BMI","H" I $D(GVAR(GMRI)) D
"RTN","GMRVVS1",17,0)
 .I IOSL<($Y+6) S GMRI(1)=GMRI D FOOTER^GMRVVS2,HEADER^GMRVVS2,DATES^GMRVVS2 S GMRI=GMRI(1) W !,?10,"|",?11,GMRX
"RTN","GMRVVS1",18,0)
 . S G=$S(GMRI="T":"TEMP.",GMRI="P":"PULSE",GMRI="R":"RESP.",GMRI="W":"WEIGHT(LB)",GMRI="H":"HEIGHT(IN)",GMRI="B":"BLOOD",GMRI="B1":"  PRESSURE",GMRI="BMI":"BMI",1:"")
"RTN","GMRVVS1",19,0)
 . I G="" S G=$S(GMRI="PO2":"PULSE OX.",GMRI="OX1":"  L/MIN",GMRI="OX2":"  %",GMRI="OX3":"  METHOD",GMRI="CG":"C/G (IN)",GMRI="CVP":"CVP cm H2O",GMRI="CVP1":"    mmHg",GMRI="CG1":"          ",GMRI="CG2":"    (CM)",1:"")
"RTN","GMRVVS1",20,0)
 . W !,G,?10,"|",GMRLINE(GMRI)
"RTN","GMRVVS1",21,0)
 D IO^GMRVVS2 I 'GMROUT W !,?10,"|",GMRX,!
"RTN","GMRVVS1",22,0)
 I IOSL<($Y+6) D FOOTER^GMRVVS2,HEADER^GMRVVS2
"RTN","GMRVVS1",23,0)
 I $D(GMRQUAL),'GMROUT W ! S GLINE="Qualifier: " S G="" F  S G=$O(GMRQUAL(G)) Q:G=""  D LEGEND^GMRVLGQU
"RTN","GMRVVS1",24,0)
 I 'GMROUT W GLINE F X=0:0 W ! Q:IOSL<($Y+6)
"RTN","GMRVVS1",25,0)
 D FOOTER^GMRVVS2 S GMRDT="" F GMRNM=1:1:12 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  K ^TMP($J,"GMRDT",GMRDT)
"RTN","GMRVVS1",26,0)
 Q
"RTN","GMRVVS1",27,0)
STLNP ;
"RTN","GMRVVS1",28,0)
 S GMR(GMRI)=$O(^TMP($J,"GMR",GMRI,GMRDT,"")) Q:GMR(GMRI)=""
"RTN","GMRVVS1",29,0)
 S (GMRSITE,GMRSITE(1),GMRINF,GMRVJ)=""
"RTN","GMRVVS1",30,0)
 S GMRSITE(1)=$P($G(^TMP($J,"GMR",GMRI,GMRDT,GMR(GMRI))),"^"),GMRSITE(2)=$P($G(^(GMR(GMRI))),"^",3),GMRINF=$P($G(^(GMR(GMRI))),"^",4) I GMRSITE(1)'="" S GI=GMRI D SYNOARY^GMRVLGQU
"RTN","GMRVVS1",31,0)
 I GMRI'="CVP" S GI=$S(GMR(GMRI)>0:$J(GMR(GMRI),0,$S(GMRI="W"!(GMRI="H")!(GMRI="CG"):2,GMRI'="T":0,1:1)),1:GMR(GMRI))
"RTN","GMRVVS1",32,0)
 E  S GI=$S(GMR(GMRI)>0!(GMR(GMRI)<0)!($E(GMR(GMRI))="0"):$J(GMR(GMRI),0,1),1:GMR(GMRI))
"RTN","GMRVVS1",33,0)
 I "UNAVAILABLEPASSREFUSED"'[$$UP^XLFSTR(GI) S GI=GI_$S($P(^TMP($J,"GMR",GMRI,GMRDT,GMR(GMRI)),"^",2)'=1:" ",1:"*")
"RTN","GMRVVS1",34,0)
 I GMRI="P",($P(^TMP($J,"GMR",GMRI,GMRDT,GMR(GMRI)),"^",1)["DORSALIS PEDIS"),(+GI=1) S:$E(GI,$L(GI))="*" GI=$E(GI,1,$L(GI)-1)
"RTN","GMRVVS1",35,0)
 S $P(GMRLINE(GMRI),"|",GMRNM)=GI_$S(GMRI="P"&($L(GMRSITE," ")>3):""_$P(GMRSITE," "),GMRI="R"!(GMRI="T")!(GMRI="H")!(GMRI="W")!(GMRI="CG"):""_GMRSITE,1:"")
"RTN","GMRVVS1",36,0)
 S $P(GMRLINE(GMRI),"|",GMRNM)=$E($P(GMRLINE(GMRI),"|",GMRNM)_"          ",1,10)
"RTN","GMRVVS1",37,0)
 D SETLN
"RTN","GMRVVS1",38,0)
 I GMRI="CG",$D(GMRLINE("CG2")) S $P(GMRLINE("CG2"),"|",GMRNM)=$E($S(GMR(GMRI)>0:$J(GMR(GMRI)/.3937,0,2),1:"")_"          ",1,10)
"RTN","GMRVVS1",39,0)
 I GMRI="P" S $P(GMRLINE("P1"),"|",GMRNM)=$E($S($L(GMRSITE," ")>3:$P(GMRSITE," ",2,4),1:GMRSITE)_"          ",1,10)
"RTN","GMRVVS1",40,0)
 I GMRI="H",$D(GMRLINE("H1")) S:GMR(GMRI)>0 $P(GMRLINE("H1"),"|",GMRNM)=$E($S(GMR(GMRI)>0:$J(GMR(GMRI)*2.54,0,2),1:GMR(GMRI))_"          ",1,10)
"RTN","GMRVVS1",41,0)
 I GMRI="W",$D(GMRLINE("W1")) S:GMR(GMRI)>0 $P(GMRLINE("W1"),"|",GMRNM)=$E($S(GMR(GMRI)>0:$J(GMR(GMRI)/2.2,0,2),1:GMR(GMRI))_"          ",1,10)
"RTN","GMRVVS1",42,0)
 I GMRI="W",$D(GMRLINE("BMI")),GMR(GMRI)>0 D
"RTN","GMRVVS1",43,0)
 . S GMRBMI="",GMRBMI(1)=GMRDT,GMRBMI(2)=GMR(GMRI) D CALBMI^GMRVBMI(.GMRBMI)
"RTN","GMRVVS1",44,0)
 . S $P(GMRLINE("BMI"),"|",GMRNM)=$E(GMRBMI_"          ",1,10) K GMRBMI
"RTN","GMRVVS1",45,0)
 I GMRI="PO2",$D(GMRLINE("OX1")) D
"RTN","GMRVVS1",46,0)
 . S $P(GMRLINE("OX3"),"|",GMRNM)=$E(GMRSITE_"          ",1,10)
"RTN","GMRVVS1",47,0)
 . S GMRINF=$P(^TMP($J,"GMR",GMRI,GMRDT,GMR(GMRI)),"^",4),(GMRINF(1),GMRINF(2))="" D
"RTN","GMRVVS1",48,0)
 . . I GMRINF="" S $P(GMRLINE("OX1"),"|",GMRNM)="          ",$P(GMRLINE("OX2"),"|",GMRNM)="          "
"RTN","GMRVVS1",49,0)
 . . E  D PO2^GMRVLGQU(.GMRINF) S $P(GMRLINE("OX1"),"|",GMRNM)=$E(GMRINF(1)_"          ",1,10),$P(GMRLINE("OX2"),"|",GMRNM)=$E(GMRINF(2)_"          ",1,10)
"RTN","GMRVVS1",50,0)
 I GMRI="CVP",$D(GMRLINE("CVP1")) S $P(GMRLINE("CVP1"),"|",GMRNM)=$E($S(GMR(GMRI)>0!(GMR(GMRI)<0)!($E(GMR(GMRI))="0"):$J(GMR(GMRI)/1.36,0,1),1:"")_$S(GI["*":"*",1:"")_"          ",1,10)
"RTN","GMRVVS1",51,0)
 I GMRI="PN",$D(GMRLINE("PN")) S $P(GMRLINE("PN"),"|",GMRNM)=$E($S(GMR(GMRI)?1.2N&(GMR(GMRI)'>10):GMR(GMRI),GMR(GMRI)=99:GMR(GMRI),1:"")_"          ",1,10)
"RTN","GMRVVS1",52,0)
 K GI Q
"RTN","GMRVVS1",53,0)
SETLN ;
"RTN","GMRVVS1",54,0)
 S GVAR(GMRI)=""
"RTN","GMRVVS1",55,0)
 I GMRI="PO2" S (GVAR("PO2"),GVAR("OX1"),GVAR("OX2"),GVAR("OX3"))="" Q
"RTN","GMRVVS1",56,0)
 I GMRI="CVP" S (GVAR("CVP"),GVAR("CVP1"))="" Q
"RTN","GMRVVS1",57,0)
 I GMRI="CG" S (GVAR("CG"),GVAR("CG2"))="" Q
"RTN","GMRVVS1",58,0)
 Q
"RTN","GMRVVS4")
0^24^B6150163
"RTN","GMRVVS4",1,0)
GMRVVS4 ;HIRMFO/YH-PATIENT VITAL SIGNS-GRAPH ;5/8/97
"RTN","GMRVVS4",2,0)
 ;;4.0;Vitals/Measurements;**1,11**;Apr 25, 1997
"RTN","GMRVVS4",3,0)
SETHD ;
"RTN","GMRVVS4",4,0)
 S GMR3=(($Y/3)=($Y\3)),GMRPHI=GMRPLO,GMRPLO=$Y*(-10)/3+188.335,GMRTHI=GMRTLO,GMRTLO=-$Y/3+107.8335,GMRTDIF=GMRTHI-GMRTLO,GMRPDIF=GMRPHI-GMRPLO
"RTN","GMRVVS4",5,0)
 S GMRHDR10=$S($Y>8&GMR3&($Y<44):GMRPLO+1.665,1:""),GMRHDR10=$E("    ",$L(GMRHDR10)+1,4)_GMRHDR10
"RTN","GMRVVS4",6,0)
 S GMRHDR11=$S($Y>8&GMR3&($Y<44):GMRTLO+.1665,$Y=28:98.6,1:""),GMRHDR11=$E("    ",$L(GMRHDR11)+1,4)_GMRHDR11
"RTN","GMRVVS4",7,0)
 S GMRHDR1=$S($Y'=7:GMRHDR10_" "_GMRHDR11,1:"")
"RTN","GMRVVS4",8,0)
 S GMRHDR2=$S($Y'=7&GMR3&($Y<44):$J(($Y*(-5)/27+(380/9)),4,1),$Y=28:"37.0",1:"")
"RTN","GMRVVS4",9,0)
 I GMRHDR1'="",GMRHDR2'="" S GMRHDR1=GMRHDR1_"/"_GMRHDR2
"RTN","GMRVVS4",10,0)
 Q
"RTN","GMRVVS4",11,0)
DATAPRT ;
"RTN","GMRVVS4",12,0)
 S GMRLINE=$S($Y=28:GMRX2,1:GMRX1)
"RTN","GMRVVS4",13,0)
 S GMRNM=0 F GMRDT=0:0 S GMRDT=$O(^TMP($J,"GMRDT",GMRDT)) Q:GMRDT'>0  D SETLINE Q:GMRNM=10
"RTN","GMRVVS4",14,0)
 W GMRLINE
"RTN","GMRVVS4",15,0)
 Q
"RTN","GMRVVS4",16,0)
SETLINE ;
"RTN","GMRVVS4",17,0)
 N GMRVOK S GMRVOK=0
"RTN","GMRVVS4",18,0)
 S GMRNM=GMRNM+1,GMROLD=$P(GMRLINE,"|",GMRNM),GMRP=$O(^TMP($J,"GMR","P",GMRDT,""))
"RTN","GMRVVS4",19,0)
 S GMRT=$O(^TMP($J,"GMR","T",GMRDT,""))
"RTN","GMRVVS4",20,0)
 S GMRPOFF=($Y=7&(+GMRP>166))!($Y=44&(+GMRP<47)),GMRTOFF=($Y=7&(+GMRT>105.6))!($Y=43&(+GMRT<93.8))
"RTN","GMRVVS4",21,0)
 S GMROLD=$S(+GMRT>0&(+GMRT'<GMRTLO&(+GMRT'>GMRTHI)!GMRTOFF):"T"_$S('$P(^TMP($J,"GMR","T",GMRDT,GMRT),"^",2):" ",1:"*")_$S('GMRTOFF:" ",1:"*")_$E(GMROLD,4,10),1:GMROLD)
"RTN","GMRVVS4",22,0)
 S GMRVPS=$S(+GMRP:$P($G(^TMP($J,"GMR","P",GMRDT,GMRP)),"^",1),1:"")
"RTN","GMRVVS4",23,0)
 I GMRVPS'="" D
"RTN","GMRVVS4",24,0)
 .I GMRVPS'["APICAL",(GMRVPS'["RADIAL"),(GMRVPS'["BRACHIAL") S GMRVOK=1
"RTN","GMRVVS4",25,0)
 .Q
"RTN","GMRVVS4",26,0)
 S GMROLD=$E(GMROLD,1,5)_$S(GMRP>0&(+GMRP'<GMRPLO&(+GMRP'>GMRPHI)!GMRPOFF):"P"_$S('$P(^TMP($J,"GMR","P",GMRDT,GMRP),"^",2):" ",1:"*")_$S('GMRPOFF:" ",1:"*")_$E(GMROLD,9,10),1:$E(GMROLD,6,10))
"RTN","GMRVVS4",27,0)
 Q:GMRVOK  S $P(GMRLINE,"|",GMRNM)=GMROLD
"RTN","GMRVVS4",28,0)
 Q
"VER")
8.0^21.0
"^DD",120.51,120.51,0)
FIELD^^7^8
"^DD",120.51,120.51,0,"DDA")
N
"^DD",120.51,120.51,0,"DT")
2960723
"^DD",120.51,120.51,0,"ID",1)
W "   ",$P(^(0),U,2)
"^DD",120.51,120.51,0,"IX","APCE",120.51,7)

"^DD",120.51,120.51,0,"IX","B",120.51,.01)

"^DD",120.51,120.51,0,"IX","C",120.51,1)

"^DD",120.51,120.51,0,"NM","GMRV VITAL TYPE")

"^DD",120.51,120.51,0,"PT",120.5,.03)

"^DD",120.51,120.51,0,"PT",120.521,.01)

"^DD",120.51,120.51,0,"PT",120.531,.01)

"^DD",120.51,120.51,0,"PT",142.14,.01)

"^DD",120.51,120.51,0,"PT",811.944,.01)

"^DD",120.51,120.51,0,"VRPK")
GEN. MED. REC. - VITALS
"^DD",120.51,120.51,.01,0)
NAME^RF^^0;1^K:$L(X)>50!($L(X)<2)!'(X'?1P.E) X
"^DD",120.51,120.51,.01,1,0)
^.1
"^DD",120.51,120.51,.01,1,1,0)
120.51^B
"^DD",120.51,120.51,.01,1,1,1)
S ^GMRD(120.51,"B",$E(X,1,30),DA)=""
"^DD",120.51,120.51,.01,1,1,2)
K ^GMRD(120.51,"B",$E(X,1,30),DA)
"^DD",120.51,120.51,.01,1,1,"%D",0)
^^1^1^2950926^^^
"^DD",120.51,120.51,.01,1,1,"%D",1,0)
This cross-reference is automatically created on .01 field.
"^DD",120.51,120.51,.01,3)
ANSWER MUST BE 2-50 CHARACTERS IN LENGTH
"^DD",120.51,120.51,.01,21,0)
^^1^1^2931222^^^^
"^DD",120.51,120.51,.01,21,1,0)
This field reflects a list of vital signs/physical measurement types.
"^DD",120.51,120.51,1,0)
ABBREVIATION^RFI^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>5!($L(X)<1)!'(X'?1P.E&(X'[";")) X
"^DD",120.51,120.51,1,1,0)
^.1
"^DD",120.51,120.51,1,1,1,0)
120.51^C
"^DD",120.51,120.51,1,1,1,1)
S ^GMRD(120.51,"C",$E(X,1,30),DA)=""
"^DD",120.51,120.51,1,1,1,2)
K ^GMRD(120.51,"C",$E(X,1,30),DA)
"^DD",120.51,120.51,1,1,1,"%D",0)
^^2^2^2950926^^^
"^DD",120.51,120.51,1,1,1,"%D",1,0)
This regular cross-reference is created to sort the file by the
"^DD",120.51,120.51,1,1,1,"%D",2,0)
ABBREVIATION and the associated NAME (.01).
"^DD",120.51,120.51,1,3)
Answer must be 1-5 characters in length.
"^DD",120.51,120.51,1,21,0)
^^1^1^2970108^^^^
"^DD",120.51,120.51,1,21,1,0)
This field contains an abbreviation for this vital type.
"^DD",120.51,120.51,1,"DT")
2970108
"^DD",120.51,120.51,2,0)
*SITE^S^0:NO;1:YES;^0;3^Q
"^DD",120.51,120.51,2,.1)
SITE
"^DD",120.51,120.51,2,21,0)
^^4^4^2960718^^^^
"^DD",120.51,120.51,2,21,1,0)
This field specifies whether or not the vital measurement record with 
"^DD",120.51,120.51,2,21,2,0)
this vital type has a site associated with it.
"^DD",120.51,120.51,2,21,3,0)
 
"^DD",120.51,120.51,2,21,4,0)
This field will be deleted in the next version of Vitals/Measurements.
"^DD",120.51,120.51,2,"DT")
2960718
"^DD",120.51,120.51,3,0)
RATE^S^0:NO;1:YES;^0;4^Q
"^DD",120.51,120.51,3,21,0)
^^2^2^2940105^^^^
"^DD",120.51,120.51,3,21,1,0)
This field specifies whether or not the vital measurement record with
"^DD",120.51,120.51,3,21,2,0)
this vital type has a rate associated with it.
"^DD",120.51,120.51,4,0)
RATE INPUT TRANSFORM^K^^1;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",120.51,120.51,4,3)
This is Standard MUMPS code.
"^DD",120.51,120.51,4,9)
@
"^DD",120.51,120.51,4,21,0)
^^3^3^2960723^
"^DD",120.51,120.51,4,21,1,0)
If a rate is specified for a vital measurement record, this field checks
"^DD",120.51,120.51,4,21,2,0)
the data validity.  The code stored in this field should only be updated
"^DD",120.51,120.51,4,21,3,0)
by someone with programmer's access to the FileMan.
"^DD",120.51,120.51,4,"DT")
2960723
"^DD",120.51,120.51,5,0)
RATE HELP^F^^0;6^K:$L(X)>30!($L(X)<3)!'(X'?1P.E&(X?.ANP)) X
"^DD",120.51,120.51,5,3)
Answer must be 3-30 characters in length.
"^DD",120.51,120.51,5,21,0)
^^2^2^2960910^^^^
"^DD",120.51,120.51,5,21,1,0)
This field contains the name of the Help Frame associated with this
"^DD",120.51,120.51,5,21,2,0)
Vital Type.
"^DD",120.51,120.51,5,"DT")
2960718
"^DD",120.51,120.51,6,0)
*QUALITY^S^0:NO;1:YES;^0;5^Q
"^DD",120.51,120.51,6,.1)
QUALITY
"^DD",120.51,120.51,6,21,0)
^^4^4^2960718^^^^
"^DD",120.51,120.51,6,21,1,0)
This field specifies whether or not a vital measurement record with this 
"^DD",120.51,120.51,6,21,2,0)
vital type has a quality associated with it.
"^DD",120.51,120.51,6,21,3,0)
 
"^DD",120.51,120.51,6,21,4,0)
This field will be deleted in the next version of Vitals/Measurements.
"^DD",120.51,120.51,6,"DT")
2960718
"^DD",120.51,120.51,7,0)
PCE ABBREVIATION^F^^0;7^K:$L(X)>10!($L(X)<1) X
"^DD",120.51,120.51,7,1,0)
^.1
"^DD",120.51,120.51,7,1,1,0)
120.51^APCE
"^DD",120.51,120.51,7,1,1,1)
S ^GMRD(120.51,"APCE",$E(X,1,30),DA)=""
"^DD",120.51,120.51,7,1,1,2)
K ^GMRD(120.51,"APCE",$E(X,1,30),DA)
"^DD",120.51,120.51,7,1,1,"%D",0)
^^1^1^2970203^^
"^DD",120.51,120.51,7,1,1,"%D",1,0)
This is a regular cross-reference on the PCE Abbreviation field.
"^DD",120.51,120.51,7,1,1,"DT")
2960710
"^DD",120.51,120.51,7,3)
Answer must be 1-10 characters in length.
"^DD",120.51,120.51,7,21,0)
^^1^1^2960710^
"^DD",120.51,120.51,7,21,1,0)
This field contains the PCE Abbreviation for this Vital Type.
"^DD",120.51,120.51,7,"DT")
2960710
"^DIC",120.51,120.51,0)
GMRV VITAL TYPE^120.51I
"^DIC",120.51,120.51,0,"GL")
^GMRD(120.51,
"^DIC",120.51,120.51,"%",0)
^1.005^2^2
"^DIC",120.51,120.51,"%",1,0)
GMTS
"^DIC",120.51,120.51,"%",2,0)
PXRM
"^DIC",120.51,120.51,"%","B","GMTS",1)

"^DIC",120.51,120.51,"%","B","PXRM",2)

"^DIC",120.51,120.51,"%D",0)
^^2^2^2990331^^^^
"^DIC",120.51,120.51,"%D",1,0)
This file contains a list of vital sign types, and various parameters
"^DIC",120.51,120.51,"%D",2,0)
which mold the data entry.
"^DIC",120.51,"B","GMRV VITAL TYPE",120.51)

**END**
**END**

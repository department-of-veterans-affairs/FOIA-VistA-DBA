Released FB*3.5*81 SEQ #77
Extracted from mail message
**KIDS**:FB*3.5*81^

**INSTALL NAME**
FB*3.5*81
"BLD",5688,0)
FB*3.5*81^FEE BASIS^0^3040921^y
"BLD",5688,1,0)
^^3^3^3040804^
"BLD",5688,1,1,0)
This patch addresses two issues; one involving the assigning of  FEE 
"BLD",5688,1,2,0)
BASIS BATCH numbers and the second involving the assignment of FB INVOICE 
"BLD",5688,1,3,0)
numbers.
"BLD",5688,4,0)
^9.64PA^162^1
"BLD",5688,4,162,0)
162
"BLD",5688,4,162,2,0)
^9.641^162.03^1
"BLD",5688,4,162,2,162.03,0)
SERVICE PROVIDED  (sub-file)
"BLD",5688,4,162,2,162.03,1,0)
^9.6411^14^1
"BLD",5688,4,162,2,162.03,1,14,0)
INVOICE NUMBER
"BLD",5688,4,162,222)
y^n^p^^^^n^^n
"BLD",5688,4,162,224)

"BLD",5688,4,"APDD",162,162.03)

"BLD",5688,4,"APDD",162,162.03,14)

"BLD",5688,4,"B",162,162)

"BLD",5688,"INID")
y
"BLD",5688,"KRN",0)
^9.67PA^8989.52^19
"BLD",5688,"KRN",.4,0)
.4
"BLD",5688,"KRN",.401,0)
.401
"BLD",5688,"KRN",.402,0)
.402
"BLD",5688,"KRN",.403,0)
.403
"BLD",5688,"KRN",.5,0)
.5
"BLD",5688,"KRN",.84,0)
.84
"BLD",5688,"KRN",3.6,0)
3.6
"BLD",5688,"KRN",3.8,0)
3.8
"BLD",5688,"KRN",9.2,0)
9.2
"BLD",5688,"KRN",9.8,0)
9.8
"BLD",5688,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5688,"KRN",9.8,"NM",1,0)
FBAAUTL4^^0^B19952985
"BLD",5688,"KRN",9.8,"NM","B","FBAAUTL4",1)

"BLD",5688,"KRN",19,0)
19
"BLD",5688,"KRN",19.1,0)
19.1
"BLD",5688,"KRN",101,0)
101
"BLD",5688,"KRN",409.61,0)
409.61
"BLD",5688,"KRN",771,0)
771
"BLD",5688,"KRN",870,0)
870
"BLD",5688,"KRN",8989.51,0)
8989.51
"BLD",5688,"KRN",8989.52,0)
8989.52
"BLD",5688,"KRN",8994,0)
8994
"BLD",5688,"KRN","B",.4,.4)

"BLD",5688,"KRN","B",.401,.401)

"BLD",5688,"KRN","B",.402,.402)

"BLD",5688,"KRN","B",.403,.403)

"BLD",5688,"KRN","B",.5,.5)

"BLD",5688,"KRN","B",.84,.84)

"BLD",5688,"KRN","B",3.6,3.6)

"BLD",5688,"KRN","B",3.8,3.8)

"BLD",5688,"KRN","B",9.2,9.2)

"BLD",5688,"KRN","B",9.8,9.8)

"BLD",5688,"KRN","B",19,19)

"BLD",5688,"KRN","B",19.1,19.1)

"BLD",5688,"KRN","B",101,101)

"BLD",5688,"KRN","B",409.61,409.61)

"BLD",5688,"KRN","B",771,771)

"BLD",5688,"KRN","B",870,870)

"BLD",5688,"KRN","B",8989.51,8989.51)

"BLD",5688,"KRN","B",8989.52,8989.52)

"BLD",5688,"KRN","B",8994,8994)

"BLD",5688,"PRE")
FBXIP81E
"BLD",5688,"QUES",0)
^9.62^^
"BLD",5688,"REQB",0)
^9.611^1^1
"BLD",5688,"REQB",1,0)
FB*3.5*77^2
"BLD",5688,"REQB","B","FB*3.5*77",1)

"FIA",162)
FEE BASIS PAYMENT
"FIA",162,0)
^FBAAC(
"FIA",162,0,0)
162P
"FIA",162,0,1)
y^n^p^^^^n^^n
"FIA",162,0,10)

"FIA",162,0,11)

"FIA",162,0,"RLRO")

"FIA",162,0,"VR")
3.5^FB
"FIA",162,162)
1
"FIA",162,162.03)
1
"FIA",162,162.03,14)

"MBREQ")
0
"PKG",60,-1)
1^1
"PKG",60,0)
FEE BASIS^FB^Used to pay private vendors
"PKG",60,20,0)
^9.402P^1^1
"PKG",60,20,1,0)
2^^FBPMRG
"PKG",60,20,1,1)

"PKG",60,20,"B",2,1)

"PKG",60,22,0)
^9.49I^1^1
"PKG",60,22,1,0)
3.5^2950130^2950313
"PKG",60,22,1,"PAH",1,0)
81^3040921
"PKG",60,22,1,"PAH",1,1,0)
^^3^3^3040921
"PKG",60,22,1,"PAH",1,1,1,0)
This patch addresses two issues; one involving the assigning of  FEE 
"PKG",60,22,1,"PAH",1,1,2,0)
BASIS BATCH numbers and the second involving the assignment of FB INVOICE 
"PKG",60,22,1,"PAH",1,1,3,0)
numbers.
"PRE")
FBXIP81E
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","FBAAUTL4")
0^1^B19952985
"RTN","FBAAUTL4",1,0)
FBAAUTL4 ;AISC/CMR,dmk,WCIOFO/SAB-UTILITY ROUTINE ;7/11/2001
"RTN","FBAAUTL4",2,0)
 ;;3.5;FEE BASIS;**4,32,77,81**;JAN 30, 1995
"RTN","FBAAUTL4",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","FBAAUTL4",4,0)
 ;
"RTN","FBAAUTL4",5,0)
CPT(X,Y,FBSRVDT) ;return external format of CPT code
"RTN","FBAAUTL4",6,0)
 ;INPUT   X = ien of CPT
"RTN","FBAAUTL4",7,0)
 ;optional Y I Y return description, I 'Y return external format of CPT
"RTN","FBAAUTL4",8,0)
 ;optional FBSRVDT - date of service
"RTN","FBAAUTL4",9,0)
 ;OUTPUT  external format of CPT code or description of CPT code
"RTN","FBAAUTL4",10,0)
 I '$G(X) Q ""
"RTN","FBAAUTL4",11,0)
 N Z
"RTN","FBAAUTL4",12,0)
 S Z=$$CPT^ICPTCOD(X,$S($G(FBSRVDT)>0:+$G(FBSRVDT),1:""),1)
"RTN","FBAAUTL4",13,0)
 Q $S('$G(Y):$P(Z,U,2),1:$P(Z,U,3))
"RTN","FBAAUTL4",14,0)
 ;
"RTN","FBAAUTL4",15,0)
MOD(X,Y,FBSRVDT) ;return external format of modifier
"RTN","FBAAUTL4",16,0)
 ;INPUT   X = ien of modifier
"RTN","FBAAUTL4",17,0)
 ;optional Y I Y return description, I 'Y return external format of mod
"RTN","FBAAUTL4",18,0)
 ;optional FBSRVDT - date of service
"RTN","FBAAUTL4",19,0)
 ;OUTPUT  external format of modifier or description of CPT code
"RTN","FBAAUTL4",20,0)
 I '$G(X) Q ""
"RTN","FBAAUTL4",21,0)
 N Z
"RTN","FBAAUTL4",22,0)
 S Z=$$MOD^ICPTMOD(X,"I",$S($G(FBSRVDT)>0:+$G(FBSRVDT),1:""),1)
"RTN","FBAAUTL4",23,0)
 Q $S('$G(Y):$P(Z,U,2),1:$P(Z,U,3))
"RTN","FBAAUTL4",24,0)
 ;
"RTN","FBAAUTL4",25,0)
CPTDATA(W,X,Y,Z) ;get internal value of CPT
"RTN","FBAAUTL4",26,0)
 ; input
"RTN","FBAAUTL4",27,0)
 ;   W = IEN of PATIENT in file 162
"RTN","FBAAUTL4",28,0)
 ;   X = IEN of VENDOR multiple in file 162
"RTN","FBAAUTL4",29,0)
 ;   Y = IEN of INITIAL TREATMENT DATE multiple in file 162
"RTN","FBAAUTL4",30,0)
 ;   Z = IEN of SERVICE PROVIDED multiple in file 162
"RTN","FBAAUTL4",31,0)
 ; returns
"RTN","FBAAUTL4",32,0)
 ;   value of SERVICE PROVIDED (internal)
"RTN","FBAAUTL4",33,0)
 ;
"RTN","FBAAUTL4",34,0)
 I '$G(W)!('$G(X))!('$G(Y))!('$G(Z)) Q ""
"RTN","FBAAUTL4",35,0)
 Q $P($G(^FBAAC(W,1,X,1,Y,1,Z,0)),U)
"RTN","FBAAUTL4",36,0)
 ;
"RTN","FBAAUTL4",37,0)
MODDATA(W,X,Y,Z) ;get internal values of CPT Modifier
"RTN","FBAAUTL4",38,0)
 ; input
"RTN","FBAAUTL4",39,0)
 ;   W = IEN of PATIENT in file 162
"RTN","FBAAUTL4",40,0)
 ;   X = IEN of VENDOR multiple in file 162
"RTN","FBAAUTL4",41,0)
 ;   Y = IEN of INITIAL TREATMENT DATE multiple in file 162
"RTN","FBAAUTL4",42,0)
 ;   Z = IEN of SERVICE PROVIDED multiple in file 162
"RTN","FBAAUTL4",43,0)
 ; output
"RTN","FBAAUTL4",44,0)
 ;   FBMODA( array of CPT MODIFIERs
"RTN","FBAAUTL4",45,0)
 ;     FBMODA(#)=CPT MODIFIER (internal value)
"RTN","FBAAUTL4",46,0)
 ;     where # is the IEN for an entry in the CPT MODIFIER multiple
"RTN","FBAAUTL4",47,0)
 K FBMODA
"RTN","FBAAUTL4",48,0)
 I '$G(W)!('$G(X))!('$G(Y))!('$G(Z)) Q
"RTN","FBAAUTL4",49,0)
 N FBI,FBMOD
"RTN","FBAAUTL4",50,0)
 S FBI=0 F  S FBI=$O(^FBAAC(W,1,X,1,Y,1,Z,"M",FBI)) Q:'FBI  D
"RTN","FBAAUTL4",51,0)
 . S FBMOD=$P($G(^FBAAC(W,1,X,1,Y,1,Z,"M",FBI,0)),U)
"RTN","FBAAUTL4",52,0)
 . Q:FBMOD=""
"RTN","FBAAUTL4",53,0)
 . S FBMODA(FBI)=FBMOD
"RTN","FBAAUTL4",54,0)
 Q
"RTN","FBAAUTL4",55,0)
 ;
"RTN","FBAAUTL4",56,0)
APS(FBJ,FBK,FBL,FBM) ; amount paid symbol
"RTN","FBAAUTL4",57,0)
 ; input
"RTN","FBAAUTL4",58,0)
 ;   FBJ = IEN of PATIENT in file 162
"RTN","FBAAUTL4",59,0)
 ;   FBK = IEN of VENDOR multiple in file 162
"RTN","FBAAUTL4",60,0)
 ;   FBL = IEN of INITIAL TREATMENT DATE multiple in file 162
"RTN","FBAAUTL4",61,0)
 ;   FBM = IEN of SERVICE PROVIDED multiple in file 162
"RTN","FBAAUTL4",62,0)
 ; returns symbol
"RTN","FBAAUTL4",63,0)
 ;   where value is M (Mill Bill emergency care - 38 U.S.C. 1725)
"RTN","FBAAUTL4",64,0)
 ;                  R (RBRVS fee schedule amount)
"RTN","FBAAUTL4",65,0)
 ;                  F (VA fee schedule amount)
"RTN","FBAAUTL4",66,0)
 ;                  C (contracted service amount)
"RTN","FBAAUTL4",67,0)
 ;                  U (usual & customary - claimed)
"RTN","FBAAUTL4",68,0)
 ;                  null if no amount paid
"RTN","FBAAUTL4",69,0)
 N FBAP,FBRET,FBY0,FBY2
"RTN","FBAAUTL4",70,0)
 S FBRET=""
"RTN","FBAAUTL4",71,0)
 S FBY0=$G(^FBAAC(FBJ,1,FBK,1,FBL,1,FBM,0))
"RTN","FBAAUTL4",72,0)
 S FBY2=$G(^FBAAC(FBJ,1,FBK,1,FBL,1,FBM,2))
"RTN","FBAAUTL4",73,0)
 S FBAP=$P(FBY0,U,3)
"RTN","FBAAUTL4",74,0)
 I FBAP>0 D
"RTN","FBAAUTL4",75,0)
 . ; use fee schedule info for payment (if any)
"RTN","FBAAUTL4",76,0)
 . I +FBAP=+$P(FBY2,U,12) S FBRET=$P(FBY2,U,13) Q:FBRET]""
"RTN","FBAAUTL4",77,0)
 . ; if no fee schedule info then calc 75th percentile and check
"RTN","FBAAUTL4",78,0)
 . I $P(FBY2,U,12)="" D  Q:FBRET]""
"RTN","FBAAUTL4",79,0)
 . . S FBCPT=$$CPT($P(FBY0,U))
"RTN","FBAAUTL4",80,0)
 . . S FBMODL=$$MODL("^FBAAC("_FBJ_",1,"_FBK_",1,"_FBL_",1,"_FBM_",""M"")","E")
"RTN","FBAAUTL4",81,0)
 . . S FBDOS=$P($G(^FBAAC(FBJ,1,FBK,1,FBL,0)),U)
"RTN","FBAAUTL4",82,0)
 . . I +FBAP=+$$PRCTL^FBAAFSF(FBCPT,FBMODL,FBDOS) S FBRET="F"
"RTN","FBAAUTL4",83,0)
 . ; since not paid by a fee schedule, check prompt pay type
"RTN","FBAAUTL4",84,0)
 . I $P(FBY2,U,2) S FBRET="C" Q
"RTN","FBAAUTL4",85,0)
 . ; since not fee schedule or contract check POV code to identify
"RTN","FBAAUTL4",86,0)
 . ;   Mill Bill payments
"RTN","FBAAUTL4",87,0)
 . S:"^39^52^"[(U_$P($G(^FBAA(161.82,+$P(FBY0,U,18),0)),U,3)_U) FBRET="M"
"RTN","FBAAUTL4",88,0)
 . Q:FBRET]""
"RTN","FBAAUTL4",89,0)
 . ; all other payments considered u&c
"RTN","FBAAUTL4",90,0)
 . S FBRET="U"
"RTN","FBAAUTL4",91,0)
 Q FBRET
"RTN","FBAAUTL4",92,0)
 ;
"RTN","FBAAUTL4",93,0)
CHKBI(X,Y) ;called to determine if batch number or invoice number
"RTN","FBAAUTL4",94,0)
 ;already exists
"RTN","FBAAUTL4",95,0)
 ;X= next batch/invoice number
"RTN","FBAAUTL4",96,0)
 ;Y=1 if Batch
"RTN","FBAAUTL4",97,0)
 ;Y undefined if invoice number passed
"RTN","FBAAUTL4",98,0)
 ;returns a truth if X is ok for next batch/invoice #
"RTN","FBAAUTL4",99,0)
 ;
"RTN","FBAAUTL4",100,0)
 I 'X Q ""
"RTN","FBAAUTL4",101,0)
 I $G(Y) Q $S($D(^FBAA(161.7,"B",X)):"",1:1)
"RTN","FBAAUTL4",102,0)
 I '$G(Y) Q $S($D(^FBAA(162.1,"B",X)):"",$D(^FBAAI("B",X)):"",$D(^FBAAC("C",X)):"",1:1)
"RTN","FBAAUTL4",103,0)
 ;
"RTN","FBAAUTL4",104,0)
MODL(FBAN,FBFLAG) ;return sorted list given array of modifiers
"RTN","FBAAUTL4",105,0)
 ; Input
"RTN","FBAAUTL4",106,0)
 ;   FBAN - closed root of array containing modifiers
"RTN","FBAAUTL4",107,0)
 ;          the data must be in nodes descendent from this root.
"RTN","FBAAUTL4",108,0)
 ;          The subscripts of the nodes below FBAN must be
"RTN","FBAAUTL4",109,0)
 ;          positive numbers. The CPT MODIFIER internal value
"RTN","FBAAUTL4",110,0)
 ;          must be the first piece in these nodes or in the
"RTN","FBAAUTL4",111,0)
 ;          0-node descendent from these nodes.
"RTN","FBAAUTL4",112,0)
 ;          i.e.
"RTN","FBAAUTL4",113,0)
 ;            ARRAY(number)=CPT MODIFIER (internal value)
"RTN","FBAAUTL4",114,0)
 ;                  OR
"RTN","FBAAUTL4",115,0)
 ;            ARRAY(number,0)=CPT MODIFIER (internal value)
"RTN","FBAAUTL4",116,0)
 ;   FBFLAG - (optional) flag, E or I, default I
"RTN","FBAAUTL4",117,0)
 ;          I to return internal values of modifiers
"RTN","FBAAUTL4",118,0)
 ;          E to return external values of modifiers
"RTN","FBAAUTL4",119,0)
 ; Returns string of sorted modifiers (e.g. "1,3,7") 
"RTN","FBAAUTL4",120,0)
 ;
"RTN","FBAAUTL4",121,0)
 N FBI,FBRET,FBSORT,FBX,FBZERO
"RTN","FBAAUTL4",122,0)
 S FBRET=""
"RTN","FBAAUTL4",123,0)
 S FBFLAG=$G(FBFLAG,"I")
"RTN","FBAAUTL4",124,0)
 ;
"RTN","FBAAUTL4",125,0)
 ; if any descendent data then determine if it is 0-node descendent
"RTN","FBAAUTL4",126,0)
 S FBZERO=0 I $O(@FBAN@(0)),$D(@FBAN@($O(@FBAN@(0)),0))#2 S FBZERO=1
"RTN","FBAAUTL4",127,0)
 ;
"RTN","FBAAUTL4",128,0)
 ; loop thru input array and place modifiers in a sort array
"RTN","FBAAUTL4",129,0)
 S FBI=0 F  S FBI=$O(@FBAN@(FBI)) Q:'FBI  D
"RTN","FBAAUTL4",130,0)
 . ; get the cpt modifier
"RTN","FBAAUTL4",131,0)
 . I FBZERO S FBX=$P(@FBAN@(FBI,0),U)
"RTN","FBAAUTL4",132,0)
 . E  S FBX=$P(@FBAN@(FBI),U)
"RTN","FBAAUTL4",133,0)
 . I FBFLAG="E" D
"RTN","FBAAUTL4",134,0)
 . . ; convert to external value
"RTN","FBAAUTL4",135,0)
 . . S FBX=$$MOD^ICPTMOD(FBX,"I")
"RTN","FBAAUTL4",136,0)
 . . I FBX>0 S FBX=$P(FBX,U,2)
"RTN","FBAAUTL4",137,0)
 . . E  S FBX=""
"RTN","FBAAUTL4",138,0)
 . I FBX]"" S FBSORT(FBX)=""
"RTN","FBAAUTL4",139,0)
 ;
"RTN","FBAAUTL4",140,0)
 ; loop thru sorted array and add the modifiers to return value
"RTN","FBAAUTL4",141,0)
 S FBX="" F  S FBX=$O(FBSORT(FBX)) Q:FBX=""  S FBRET=FBRET_","_FBX
"RTN","FBAAUTL4",142,0)
 ;
"RTN","FBAAUTL4",143,0)
 ; strip leading comma (if any)
"RTN","FBAAUTL4",144,0)
 I $E(FBRET)="," S FBRET=$E(FBRET,2,999)
"RTN","FBAAUTL4",145,0)
 ;
"RTN","FBAAUTL4",146,0)
 ; return value
"RTN","FBAAUTL4",147,0)
 Q FBRET
"RTN","FBAAUTL4",148,0)
 ;
"RTN","FBAAUTL4",149,0)
REPMOD(FBJ,FBK,FBL,FBM) ; Replace CPT Modifier(s) in payment
"RTN","FBAAUTL4",150,0)
 ; input
"RTN","FBAAUTL4",151,0)
 ;   FBJ = IEN of PATIENT in file 162
"RTN","FBAAUTL4",152,0)
 ;   FBK = IEN of VENDOR multiple in file 162
"RTN","FBAAUTL4",153,0)
 ;   FBL = IEN of INITIAL TREATMENT DATE multiple in file 162
"RTN","FBAAUTL4",154,0)
 ;   FBM = IEN of SERVICE PROVIDED multiple in file 162
"RTN","FBAAUTL4",155,0)
 ;   FBMODA( array of modifiers
"RTN","FBAAUTL4",156,0)
 ;      where FBMODA(number)=CPT Modifier (internal)
"RTN","FBAAUTL4",157,0)
 ;
"RTN","FBAAUTL4",158,0)
 N FBI,FBIENS,FBFDA
"RTN","FBAAUTL4",159,0)
 S FBIENS=FBM_","_FBL_","_FBK_","_FBJ_","
"RTN","FBAAUTL4",160,0)
 ;
"RTN","FBAAUTL4",161,0)
 ; delete any existing CPT MODIFIER entries from global
"RTN","FBAAUTL4",162,0)
 I $O(^FBAAC(FBJ,1,FBK,1,FBL,1,FBM,"M",0)) D
"RTN","FBAAUTL4",163,0)
 . K FBFDA S FBI=0
"RTN","FBAAUTL4",164,0)
 . F  S FBI=$O(^FBAAC(FBJ,1,FBK,1,FBL,1,FBM,"M",FBI)) Q:'FBI  D
"RTN","FBAAUTL4",165,0)
 . . S FBFDA(162.06,FBI_","_FBIENS,.01)="@"
"RTN","FBAAUTL4",166,0)
 . D FILE^DIE("","FBFDA") D MSG^DIALOG()
"RTN","FBAAUTL4",167,0)
 ;
"RTN","FBAAUTL4",168,0)
 ; create CPT MODIFIER entries from data in array FBMODA
"RTN","FBAAUTL4",169,0)
 I $O(FBMODA(0)) D
"RTN","FBAAUTL4",170,0)
 . K FBFDA S FBI=0 F  S FBI=$O(FBMODA(FBI)) Q:'FBI  D
"RTN","FBAAUTL4",171,0)
 . . S FBFDA(162.06,"+"_FBI_","_FBIENS,.01)=FBMODA(FBI)
"RTN","FBAAUTL4",172,0)
 . D UPDATE^DIE("","FBFDA") D MSG^DIALOG()
"RTN","FBAAUTL4",173,0)
 ;
"RTN","FBAAUTL4",174,0)
 Q
"RTN","FBAAUTL4",175,0)
 ;
"RTN","FBAAUTL4",176,0)
 ;FBAAUTL4
"RTN","FBXIP81E")
0^^B3841093
"RTN","FBXIP81E",1,0)
FBXIP81E ;AISC/JEH - PATCH FB*3.5*79 ENVIRONMENT CHECK
"RTN","FBXIP81E",2,0)
 ;;3.5;Fee Basis;**81*;JAN 30, 1995
"RTN","FBXIP81E",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","FBXIP81E",4,0)
ENV ;
"RTN","FBXIP81E",5,0)
 ;this is the environment check pre-init routine
"RTN","FBXIP81E",6,0)
 I $$PATCH^XPDUTL("FB*3.5*42") D
"RTN","FBXIP81E",7,0)
 .W !,"You are a test site for a CoreFLS version (patch FB*3.5*42) of Fee Basis"
"RTN","FBXIP81E",8,0)
 .W !,"This patch has a conflict with the FB-CoreFLS test software."
"RTN","FBXIP81E",9,0)
 .W !,"It must NOT be installed unless an accompanying update is made to the"
"RTN","FBXIP81E",10,0)
 .W !,"FB-CoreFLS software immediately after installation of this patch."
"RTN","FBXIP81E",11,0)
 .W !
"RTN","FBXIP81E",12,0)
 .K DIR S DIR(0)="YA"
"RTN","FBXIP81E",13,0)
 .S DIR("A")="Do you have the corresponding update to the FB-CoreFLS software that is associated with this patch? (Note: Entering ""No"" here will stop the installation of this patch) Y/N//"
"RTN","FBXIP81E",14,0)
 .D ^DIR K DIR
"RTN","FBXIP81E",15,0)
 .I $D(DTOUT)!$D(DUOUT)!(Y'=1) W !,"Installation of this patch has been stopped!" S XPDQUIT=2 Q
"RTN","FBXIP81E",16,0)
 .W !,"OK to install!"
"RTN","FBXIP81E",17,0)
 Q
"UP",162,162.03,-3)
162^1
"UP",162,162.03,-2)
162.01^1
"UP",162,162.03,-1)
162.02^1
"UP",162,162.03,0)
162.03
"VER")
8.0^22
"^DD",162,162.03,14,0)
INVOICE NUMBER^NJ9,0X^^0;16^K:+X'=X!(X>999999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",162,162.03,14,1,0)
^.1
"^DD",162,162.03,14,1,1,0)
162^C
"^DD",162,162.03,14,1,1,1)
S ^FBAAC("C",$E(X,1,30),DA(3),DA(2),DA(1),DA)=""
"^DD",162,162.03,14,1,1,2)
K ^FBAAC("C",$E(X,1,30),DA(3),DA(2),DA(1),DA)
"^DD",162,162.03,14,1,2,0)
162^AJ^MUMPS
"^DD",162,162.03,14,1,2,1)
I +$P(^FBAAC(DA(3),1,DA(2),1,DA(1),1,DA,0),U,8) S ^FBAAC("AJ",$P(^FBAAC(DA(3),1,DA(2),1,DA(1),1,DA,0),U,8),$E(X,1,30),DA(3),DA(2),DA(1),DA)=""
"^DD",162,162.03,14,1,2,2)
I +$P(^FBAAC(DA(3),1,DA(2),1,DA(1),1,DA,0),U,8) K ^FBAAC("AJ",$P(^FBAAC(DA(3),1,DA(2),1,DA(1),1,DA,0),U,8),$E(X,1,30),DA(3),DA(2),DA(1),DA)
"^DD",162,162.03,14,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 999999999
"^DD",162,162.03,14,21,0)
^^1^1^2880617^^^
"^DD",162,162.03,14,21,1,0)
An automatically generated number associated with a vendor's bill.
"^DD",162,162.03,14,"DT")
3040913
**END**
**END**

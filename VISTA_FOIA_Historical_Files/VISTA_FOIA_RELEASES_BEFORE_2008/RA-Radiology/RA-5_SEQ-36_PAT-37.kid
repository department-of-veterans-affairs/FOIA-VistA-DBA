Released RA*5*37 SEQ #36
Extracted from mail message
**KIDS**:RA*5.0*37^

**INSTALL NAME**
RA*5.0*37
"BLD",4320,0)
RA*5.0*37^RADIOLOGY/NUCLEAR MEDICINE^0^3030610^y
"BLD",4320,1,0)
^^1^1^3030411^^^^
"BLD",4320,1,1,0)
Please see patch description for this patch.
"BLD",4320,4,0)
^9.64PA^79^1
"BLD",4320,4,79,0)
79
"BLD",4320,4,79,2,0)
^9.641^79.0175^1
"BLD",4320,4,79,2,79.0175,0)
PERFORM INDICATOR MAIL ADDRESS  (sub-file)
"BLD",4320,4,79,2,79.0175,1,0)
^9.6411^^
"BLD",4320,4,79,222)
y^n^p^^^^n^^n
"BLD",4320,4,79,224)

"BLD",4320,4,"APDD",79,79.0175)

"BLD",4320,4,"B",79,79)

"BLD",4320,"KRN",0)
^9.67PA^8989.52^19
"BLD",4320,"KRN",.4,0)
.4
"BLD",4320,"KRN",.401,0)
.401
"BLD",4320,"KRN",.402,0)
.402
"BLD",4320,"KRN",.403,0)
.403
"BLD",4320,"KRN",.5,0)
.5
"BLD",4320,"KRN",.84,0)
.84
"BLD",4320,"KRN",3.6,0)
3.6
"BLD",4320,"KRN",3.8,0)
3.8
"BLD",4320,"KRN",3.8,"NM",0)
^9.68A^1^1
"BLD",4320,"KRN",3.8,"NM",1,0)
RAD PERFORMANCE INDICATOR^^0
"BLD",4320,"KRN",3.8,"NM","B","RAD PERFORMANCE INDICATOR",1)

"BLD",4320,"KRN",9.2,0)
9.2
"BLD",4320,"KRN",9.8,0)
9.8
"BLD",4320,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",4320,"KRN",9.8,"NM",1,0)
RAPM^^0^B56471709
"BLD",4320,"KRN",9.8,"NM",2,0)
RAPM1^^0^B68646559
"BLD",4320,"KRN",9.8,"NM",3,0)
RAPM2^^0^B59738205
"BLD",4320,"KRN",9.8,"NM",4,0)
RAPM3^^0^B1270921
"BLD",4320,"KRN",9.8,"NM","B","RAPM",1)

"BLD",4320,"KRN",9.8,"NM","B","RAPM1",2)

"BLD",4320,"KRN",9.8,"NM","B","RAPM2",3)

"BLD",4320,"KRN",9.8,"NM","B","RAPM3",4)

"BLD",4320,"KRN",19,0)
19
"BLD",4320,"KRN",19,"NM",0)
^9.68A^4^4
"BLD",4320,"KRN",19,"NM",1,0)
RA PERFORMIN MAIL GROUP ENTRY^^0
"BLD",4320,"KRN",19,"NM",2,0)
RA PERFORMIN RPTS^^0
"BLD",4320,"KRN",19,"NM",3,0)
RA PERFORMIN MENU^^0
"BLD",4320,"KRN",19,"NM",4,0)
RA MGTRPTS^^2
"BLD",4320,"KRN",19,"NM","B","RA MGTRPTS",4)

"BLD",4320,"KRN",19,"NM","B","RA PERFORMIN MAIL GROUP ENTRY",1)

"BLD",4320,"KRN",19,"NM","B","RA PERFORMIN MENU",3)

"BLD",4320,"KRN",19,"NM","B","RA PERFORMIN RPTS",2)

"BLD",4320,"KRN",19.1,0)
19.1
"BLD",4320,"KRN",101,0)
101
"BLD",4320,"KRN",409.61,0)
409.61
"BLD",4320,"KRN",771,0)
771
"BLD",4320,"KRN",870,0)
870
"BLD",4320,"KRN",8989.51,0)
8989.51
"BLD",4320,"KRN",8989.52,0)
8989.52
"BLD",4320,"KRN",8994,0)
8994
"BLD",4320,"KRN","B",.4,.4)

"BLD",4320,"KRN","B",.401,.401)

"BLD",4320,"KRN","B",.402,.402)

"BLD",4320,"KRN","B",.403,.403)

"BLD",4320,"KRN","B",.5,.5)

"BLD",4320,"KRN","B",.84,.84)

"BLD",4320,"KRN","B",3.6,3.6)

"BLD",4320,"KRN","B",3.8,3.8)

"BLD",4320,"KRN","B",9.2,9.2)

"BLD",4320,"KRN","B",9.8,9.8)

"BLD",4320,"KRN","B",19,19)

"BLD",4320,"KRN","B",19.1,19.1)

"BLD",4320,"KRN","B",101,101)

"BLD",4320,"KRN","B",409.61,409.61)

"BLD",4320,"KRN","B",771,771)

"BLD",4320,"KRN","B",870,870)

"BLD",4320,"KRN","B",8989.51,8989.51)

"BLD",4320,"KRN","B",8989.52,8989.52)

"BLD",4320,"KRN","B",8994,8994)

"BLD",4320,"QUES",0)
^9.62^^
"BLD",4320,"REQB",0)
^9.611^^
"FIA",79)
RAD/NUC MED DIVISION
"FIA",79,0)
^RA(79,
"FIA",79,0,0)
79P
"FIA",79,0,1)
y^n^p^^^^n^^n
"FIA",79,0,10)

"FIA",79,0,11)

"FIA",79,0,"RLRO")

"FIA",79,0,"VR")
5.0^RA
"FIA",79,79)
1
"FIA",79,79,175)

"FIA",79,79.0175)
0
"KRN",3.8,261,-1)
0^1
"KRN",3.8,261,0)
RAD PERFORMANCE INDICATOR^PU^y^^^^
"KRN",3.8,261,2,0)
^3.801^1^1^3030411^^^^
"KRN",3.8,261,2,1,0)
This mail group is for the Radiology Performance Indicator Summary report.
"KRN",3.8,261,3)

"KRN",19,1752,-1)
2^4
"KRN",19,1752,0)
RA MGTRPTS^Management Reports Menu^^M^50^^^^^^^
"KRN",19,1752,10,0)
^19.01IP^5^5
"KRN",19,1752,10,5,0)
11742
"KRN",19,1752,10,5,"^")
RA PERFORMIN MENU
"KRN",19,1752,"U")
MANAGEMENT REPORTS MENU
"KRN",19,11734,-1)
0^2
"KRN",19,11734,0)
RA PERFORMIN RPTS^Summary/Detail report^^R^^^^^^^^RADIOLOGY/NUCLEAR MEDICINE
"KRN",19,11734,1,0)
^19.06^19^19^3030408^^^
"KRN",19,11734,1,1,0)
This option allows the supervisor to generate a report of performance 
"KRN",19,11734,1,2,0)
indicators for a user specified date range.  The indicators are hours from
"KRN",19,11734,1,3,0)
EXAM DATE to DATE REPORT ENTERED and hours from EXAM DATE to VERIFIED
"KRN",19,11734,1,4,0)
DATE.  The summary report will group the hours within the date range
"KRN",19,11734,1,5,0)
into 24 hour increments. The detail report will list each exam within the
"KRN",19,11734,1,6,0)
date range.
"KRN",19,11734,1,7,0)
 
"KRN",19,11734,1,8,0)
Here are all the prompts  for this option:
"KRN",19,11734,1,9,0)
   1.  Report Type: Summary, Detail, Both
"KRN",19,11734,1,10,0)
   2.  Start Date (earliest Exam Date to include)
"KRN",19,11734,1,11,0)
   3.  End Date (last Exam Date to include)
"KRN",19,11734,1,12,0)
         for Summary report, this must be 90 days or less from Start Date
"KRN",19,11734,1,13,0)
         for Detail report, this must be 30 days or lss from Start Date
"KRN",19,11734,1,14,0)
   4.  Division:
"KRN",19,11734,1,15,0)
   5.  Imaging Type:
"KRN",19,11734,1,16,0)
   6.  Sort by:
"KRN",19,11734,1,17,0)
         this is asked only if 'Detail' or 'Both' were selected
"KRN",19,11734,1,18,0)
   7.  Sent to Mail Group? :
"KRN",19,11734,1,19,0)
         this is asked only if 'Summary' was selected
"KRN",19,11734,25)
RAPM
"KRN",19,11734,"U")
SUMMARY/DETAIL REPORT
"KRN",19,11742,-1)
0^3
"KRN",19,11742,0)
RA PERFORMIN MENU^Performance Indicator^^M^^^^^^^^RADIOLOGY/NUCLEAR MEDICINE
"KRN",19,11742,1,0)
^19.06^1^1^3030408^^
"KRN",19,11742,1,1,0)
This menu includes input and output options for Performance Indicators.
"KRN",19,11742,10,0)
^19.01IP^2^2
"KRN",19,11742,10,1,0)
11743
"KRN",19,11742,10,1,"^")
RA PERFORMIN MAIL GROUP ENTRY
"KRN",19,11742,10,2,0)
11734
"KRN",19,11742,10,2,"^")
RA PERFORMIN RPTS
"KRN",19,11742,99)
59267,49509
"KRN",19,11742,"U")
PERFORMANCE INDICATOR
"KRN",19,11743,-1)
0^1
"KRN",19,11743,0)
RA PERFORMIN MAIL GROUP ENTRY^Enter/Edit OUTLOOK mail group^^R^^^^^^^^RADIOLOGY/NUCLEAR MEDICINE
"KRN",19,11743,1,0)
^^4^4^3030408^
"KRN",19,11743,1,1,0)
This option must be used to enter, delete, or add OUTLOOK mail groups
"KRN",19,11743,1,2,0)
that will receive the Summary Report for Performance Indicator.  If no
"KRN",19,11743,1,3,0)
mail group is entered, then the Summary Report will not be sent to anyone
"KRN",19,11743,1,4,0)
in OUTLOOK.
"KRN",19,11743,25)
EN1^RAPM3
"KRN",19,11743,"U")
ENTER/EDIT OUTLOOK MAIL GROUP
"MBREQ")
0
"ORD",11,3.8)
3.8;11;;;MAILG^XPDTA1;MAILGF1^XPDIA1;MAILGE1^XPDIA1;MAILGF2^XPDIA1;;MAILGDEL^XPDIA1(%)
"ORD",11,3.8,0)
MAIL GROUP
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",18,-1)
1^1
"PKG",18,0)
RADIOLOGY/NUCLEAR MEDICINE^RA^REGISTERS PATIENTS,RECORDS EXAMS,PROFILES,AMIS REPORTS
"PKG",18,20,0)
^9.402P^^
"PKG",18,22,0)
^9.49I^1^1
"PKG",18,22,1,0)
5.0^3011017^2980407^50
"PKG",18,22,1,"PAH",1,0)
37^3030610
"PKG",18,22,1,"PAH",1,1,0)
^^1^1^3030610
"PKG",18,22,1,"PAH",1,1,1,0)
Please see patch description for this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","RAPM")
0^1^B56471709
"RTN","RAPM",1,0)
RAPM ;HOIFO/TH-Radiology Performance Monitors/Indicator; ;6/9/03  12:49
"RTN","RAPM",2,0)
 ;;5.0;Radiology/Nuclear Medicine;**37**;Mar 16, 1998
"RTN","RAPM",3,0)
 ;
"RTN","RAPM",4,0)
 ; *** Application variables: ***
"RTN","RAPM",5,0)
 ;
"RTN","RAPM",6,0)
 ; Exam Date - RADTE (Regular Fileman format)
"RTN","RAPM",7,0)
 ;             RADTI (Inverse Fileman format)
"RTN","RAPM",8,0)
 ; Case Number - RACN               Exam Status - RAEXST
"RTN","RAPM",9,0)
 ; Category of Exam - RACAT         Primary Interpreting Staff - RAPRIM
"RTN","RAPM",10,0)
 ; Date Report Entered - RARPTDT    Verified Date - RAVERDT
"RTN","RAPM",11,0)
 ; Report Status - RARPTST          Page Number - RAPG
"RTN","RAPM",12,0)
 ; Type of Report - RARPT
"RTN","RAPM",13,0)
 ; Internal number of an entry in the Patient file (#2) - RADFN
"RTN","RAPM",14,0)
 ;
"RTN","RAPM",15,0)
INIT ; Check for the existence of RACESS. Pass in user's DUZ!
"RTN","RAPM",16,0)
 I $D(DUZ),($O(RACCESS(DUZ,""))']"") D CHECK^RADLQ3(DUZ)
"RTN","RAPM",17,0)
 ;
"RTN","RAPM",18,0)
 N DIR,DIRUT,BDATE,EDATE,RARPT,DTDIFF,BEGDT,ENDDT
"RTN","RAPM",19,0)
 S (BDATE,EDATE,RAANS,RAANS2,RANODIV,RASINCE)=""
"RTN","RAPM",20,0)
 ; RANODIV=1 if one or more exams are missing DIVISION
"RTN","RAPM",21,0)
PROMPT ; 
"RTN","RAPM",22,0)
 W @IOF
"RTN","RAPM",23,0)
 W !!,"Radiology Performance Indicator Report",!!
"RTN","RAPM",24,0)
 ; Prompt for Report Type. Quit if no report type selected
"RTN","RAPM",25,0)
 D GETRPT K DIR Q:$D(DIRUT)
"RTN","RAPM",26,0)
 ; Prompt for Date Range - Quit if no dates selected
"RTN","RAPM",27,0)
 W !! D GETDATE K DIR Q:$D(DIRUT)
"RTN","RAPM",28,0)
 ; Prompt for Division and Imaging Types
"RTN","RAPM",29,0)
 S X=$$DIVLOC^RAUTL7() I X G EXIT
"RTN","RAPM",30,0)
 I $D(^TMP($J,"RA I-TYPE","VASCULAR LAB")) D
"RTN","RAPM",31,0)
 . K ^TMP($J,"RA I-TYPE","VASCULAR LAB")
"RTN","RAPM",32,0)
 . W !!?5,"*** Imaging type 'Vascular Lab' will not be included in this report ***"
"RTN","RAPM",33,0)
 ; Prompt for sort option if Detail
"RTN","RAPM",34,0)
 D SORT K DIR Q:$D(DIRUT)
"RTN","RAPM",35,0)
 I RARPT'="D" D EMAIL^RAPM2 K DIR Q:$D(DIRUT)
"RTN","RAPM",36,0)
 I RARPT="D"!(RARPT="B") D
"RTN","RAPM",37,0)
 . S RATXT="*** The detail report requires a 132 column output device ***"
"RTN","RAPM",38,0)
 . S RALINE="",$P(RALINE,"*",$L(RATXT))=""
"RTN","RAPM",39,0)
 . W !!?(80-$L(RATXT)\2),RALINE,!?(80-$L(RATXT)\2),RATXT,!?(80-$L(RATXT)\2),RALINE,!
"RTN","RAPM",40,0)
 .Q
"RTN","RAPM",41,0)
 D DEV
"RTN","RAPM",42,0)
 I RAPOP D  G EXIT
"RTN","RAPM",43,0)
 . I RAANS!(RAANS2) W !?5,"** No mail will be sent **",$C(7)
"RTN","RAPM",44,0)
 . Q
"RTN","RAPM",45,0)
START ; Get data and print the report
"RTN","RAPM",46,0)
 S:$D(ZTQUEUED) ZTREQ="@"
"RTN","RAPM",47,0)
 D GETDATA
"RTN","RAPM",48,0)
 I RARPT="S"!(RARPT="B") S RAPG=0 D ^RAPM1
"RTN","RAPM",49,0)
 I RARPT="D"!(RARPT="B") S RAPG=0 D ^RAPM2
"RTN","RAPM",50,0)
 ; see if need send email
"RTN","RAPM",51,0)
 D SEND^RAPM2
"RTN","RAPM",52,0)
 D EXIT
"RTN","RAPM",53,0)
 Q
"RTN","RAPM",54,0)
 ;
"RTN","RAPM",55,0)
GETRPT ; Prompt for Summary or Detail or Both reports; Default = Summary Report
"RTN","RAPM",56,0)
 W !,"Enter Report Type"
"RTN","RAPM",57,0)
 S DIR(0)="S^S:Summary;D:Detail;B:Both"
"RTN","RAPM",58,0)
 S DIR("A")="Select Report Type",DIR("B")="S"
"RTN","RAPM",59,0)
 S DIR("?")="Enter Summary report OR Detail report OR Both reports"
"RTN","RAPM",60,0)
 D ^DIR
"RTN","RAPM",61,0)
 Q:$D(DIRUT) 
"RTN","RAPM",62,0)
 S RARPT=Y
"RTN","RAPM",63,0)
 Q
"RTN","RAPM",64,0)
GETDATE ; Prompt for start and end dates
"RTN","RAPM",65,0)
 S DIR(0)="D^:"_DT_":AE"
"RTN","RAPM",66,0)
 S DIR("A")="Enter starting date"
"RTN","RAPM",67,0)
 S DIR("?")="Enter date to begin searching from"
"RTN","RAPM",68,0)
 D ^DIR
"RTN","RAPM",69,0)
 Q:$D(DIRUT)
"RTN","RAPM",70,0)
 S BDATE=Y
"RTN","RAPM",71,0)
 ;
"RTN","RAPM",72,0)
 S RADD=$S(RARPT="S":91,1:31),X1=BDATE,X2=RADD D C^%DTC S RAMAXDT=X
"RTN","RAPM",73,0)
 ; put 10 day block for summary report or Both
"RTN","RAPM",74,0)
 I RARPT'="D" D
"RTN","RAPM",75,0)
 . W !!?4,"The ending date for Summary and Both must be at least 10 days before today.",!
"RTN","RAPM",76,0)
 . S X1=DT,X2=-10 D C^%DTC S:X<RAMAXDT RAMAXDT=X
"RTN","RAPM",77,0)
 S:RAMAXDT>DT RAMAXDT=DT
"RTN","RAPM",78,0)
 S DIR(0)="D^"_BDATE_":"_RAMAXDT_":AE"
"RTN","RAPM",79,0)
 S DIR("A")="Enter ending date:  "
"RTN","RAPM",80,0)
 S DIR("?",1)="     +91 days max. for Summary, +31 days max. for Detail."
"RTN","RAPM",81,0)
 S DIR("?",2)="     And the ending date for the Summary and Both"
"RTN","RAPM",82,0)
 S DIR("?")="     must be at least 10 days before today."
"RTN","RAPM",83,0)
 D ^DIR
"RTN","RAPM",84,0)
 Q:$D(DIRUT)
"RTN","RAPM",85,0)
 ;
"RTN","RAPM",86,0)
 ; Set end date to end of day
"RTN","RAPM",87,0)
 ; BDATE and EDATE are original values
"RTN","RAPM",88,0)
 ; BEGDT and ENDDT are used in GETDATA 
"RTN","RAPM",89,0)
 S EDATE=Y,ENDDT=EDATE_.9999
"RTN","RAPM",90,0)
 ; Set start date back to include current day
"RTN","RAPM",91,0)
 S BEGDT=(BDATE-1)_.9999
"RTN","RAPM",92,0)
 Q
"RTN","RAPM",93,0)
SORT ; Prompt for Sorted by
"RTN","RAPM",94,0)
 Q:RARPT="S"
"RTN","RAPM",95,0)
 W !!,"Sort report by"
"RTN","RAPM",96,0)
 S DIR(0)="S^C:Case Number;E:Cateory of Exam;I:Imaging Type;P:Patient Name;R:Radiologist;T:Hrs to Transcrip.;V:Hrs to Verif."
"RTN","RAPM",97,0)
 S DIR("A")="Select Sorted by",DIR("B")="C"
"RTN","RAPM",98,0)
 D ^DIR
"RTN","RAPM",99,0)
 Q:$D(DIRUT)
"RTN","RAPM",100,0)
 S RASORT=Y
"RTN","RAPM",101,0)
 S DIR(0)="N^0:240"
"RTN","RAPM",102,0)
 S DIR("A")="Print PENDING and "_$S(RASORT="V":"Verif.",1:"Transrip.")_" hours greater than or equal to"
"RTN","RAPM",103,0)
 S DIR("B")="72"
"RTN","RAPM",104,0)
 S DIR("?")="Enter minimum number of hours elapsed since registration."
"RTN","RAPM",105,0)
 D ^DIR Q:$D(DIRUT)  S RASINCE=Y
"RTN","RAPM",106,0)
 Q
"RTN","RAPM",107,0)
DEV ; Device
"RTN","RAPM",108,0)
 I $D(DIRUT) D EXIT Q
"RTN","RAPM",109,0)
 W:RARPT="B" !!,"Specify device for both summary and detail reports."
"RTN","RAPM",110,0)
 S ZTRTN="START^RAPM"
"RTN","RAPM",111,0)
 S ZTSAVE("RA*")="",ZTSAVE("BEGDT")="",ZTSAVE("ENDDT")="",ZTSAVE("RAANS")=""
"RTN","RAPM",112,0)
 S ZTSAVE("^TMP($J,""RA D-TYPE"",")="",ZTSAVE("BDATE")=""
"RTN","RAPM",113,0)
 S ZTSAVE("^TMP($J,""RA I-TYPE"",")="",ZTSAVE("EDATE")=""
"RTN","RAPM",114,0)
 S ZTSAVE("^TMP($J,""RAPM"",")="",ZTSAVE("^TMP($J,""RAPM2"",")=""
"RTN","RAPM",115,0)
 S ZTDESC="Radiology Performance Indicator Report"
"RTN","RAPM",116,0)
 D ZIS^RAUTL
"RTN","RAPM",117,0)
 Q
"RTN","RAPM",118,0)
 ;
"RTN","RAPM",119,0)
GETDATA ; Get all the data
"RTN","RAPM",120,0)
 ; Order thru Exam Date (RADTE)
"RTN","RAPM",121,0)
 S RADTE=BEGDT F  S RADTE=$O(^RADPT("AR",RADTE)) Q:'RADTE  Q:(RADTE>ENDDT)  D
"RTN","RAPM",122,0)
 . S RADFN="" F  S RADFN=$O(^RADPT("AR",RADTE,RADFN)) Q:'RADFN  D
"RTN","RAPM",123,0)
 . . ; Get patient name
"RTN","RAPM",124,0)
 . . S RAPATNM=$$GET1^DIQ(2,RADFN,.01) S:RAPATNM="" RAPATNM=" "
"RTN","RAPM",125,0)
 . . ; Order thru inverse Exam Date (RADTI)
"RTN","RAPM",126,0)
 . . S RADTI="" F  S RADTI=$O(^RADPT("AR",RADTE,RADFN,RADTI)) Q:'RADTI  D CHECK
"RTN","RAPM",127,0)
 . . Q
"RTN","RAPM",128,0)
 . Q
"RTN","RAPM",129,0)
 Q
"RTN","RAPM",130,0)
CHECK ; Check type of image
"RTN","RAPM",131,0)
 Q:'$D(^RADPT(RADFN,"DT",RADTI))  ;no exam data at all
"RTN","RAPM",132,0)
 S RAITYP=$P($G(^RADPT(RADFN,"DT",RADTI,0)),U,2)
"RTN","RAPM",133,0)
 S RAIMGTYP=$P($G(^RA(79.2,+RAITYP,0)),U,1)
"RTN","RAPM",134,0)
 ; quit if img typ is known AND does not match selection
"RTN","RAPM",135,0)
 I RAIMGTYP'="",'$D(^TMP($J,"RA I-TYPE",RAIMGTYP)) Q
"RTN","RAPM",136,0)
 I RAIMGTYP="" S RAIMGTYP="(unknown)"
"RTN","RAPM",137,0)
 ;
"RTN","RAPM",138,0)
 ; Check division - Quit if no division selected
"RTN","RAPM",139,0)
 S RASELDIV=$P($G(^RADPT(RADFN,"DT",RADTI,0)),U,3)
"RTN","RAPM",140,0)
 S RACHKDIV=$P($G(^DIC(4,+RASELDIV,0)),U,1)
"RTN","RAPM",141,0)
 ; quit if div is known AND does not match selection 
"RTN","RAPM",142,0)
 I RACHKDIV'="",'$D(^TMP($J,"RA D-TYPE",RACHKDIV)) Q
"RTN","RAPM",143,0)
 S:RACHKDIV="" RANODIV=1
"RTN","RAPM",144,0)
 ;
"RTN","RAPM",145,0)
 ; Get exam related data
"RTN","RAPM",146,0)
 S RACNI=0 F  S RACNI=$O(^RADPT(RADFN,"DT",RADTI,"P",RACNI)) Q:'RACNI  D
"RTN","RAPM",147,0)
 . S (RACN0,RAEXST,RANUM,RACN,RAPRIM,RAPRIMNM,RACAT,RARPTTXT)=""
"RTN","RAPM",148,0)
 . S (RARPTDT,RAVERDT,RARPTST,RADHT,RADHV,RATDFHR,RAVDFHR)=""
"RTN","RAPM",149,0)
 . ; Get 0 node (RACN0) of ^RADPT(RADFN,"DT",RADTI,"P",RACNI,0)
"RTN","RAPM",150,0)
 . S RACN0=$G(^RADPT(RADFN,"DT",RADTI,"P",RACNI,0))
"RTN","RAPM",151,0)
 . Q:RACN0=""  ; no exam data
"RTN","RAPM",152,0)
 . ; Get Case number: Exam Date - Case Number
"RTN","RAPM",153,0)
 . S RACN=$E(RADTE,4,7)_$E(RADTE,2,3)_"-"_$P(RACN0,U,1)
"RTN","RAPM",154,0)
 . ; Get exam status
"RTN","RAPM",155,0)
 . S RAEXST=$P(RACN0,U,3)
"RTN","RAPM",156,0)
 . Q:RAEXST=""  ; no exam status
"RTN","RAPM",157,0)
 . ; Quit if exam status is "Cancelled"
"RTN","RAPM",158,0)
 . I $P(^RA(72,RAEXST,0),U,3)=0 Q
"RTN","RAPM",159,0)
 . ; Get number of set - '1' separate; '2' for combined report.
"RTN","RAPM",160,0)
 . S RANUM=$P(RACN0,U,25)
"RTN","RAPM",161,0)
 . ; if member of set > 1 then set RACNI to 99999 to skip remaining cases
"RTN","RAPM",162,0)
 . I RANUM>1 S RACNI=99999
"RTN","RAPM",163,0)
 . ; Get Radiologist (Primary Interpreting Staff) internal # and name. 
"RTN","RAPM",164,0)
 . S RAPRIM=$P(RACN0,U,15)
"RTN","RAPM",165,0)
 . S RAPRIMNM=$$GET1^DIQ(200,RAPRIM,.01) S:RAPRIMNM="" RAPRIMNM=" "
"RTN","RAPM",166,0)
 . ; Get Category of Exam
"RTN","RAPM",167,0)
 . S RACAT=$P(RACN0,U,4)
"RTN","RAPM",168,0)
 . ; Get IEN of imaging report
"RTN","RAPM",169,0)
 . S RARPTTXT=$P(RACN0,U,17)
"RTN","RAPM",170,0)
 . ; Pending if no imaging report OR report doesn't exist in the Report
"RTN","RAPM",171,0)
 . ; file (#74) OR Stub report
"RTN","RAPM",172,0)
 . S RAHASR=0 ;=1 has real report
"RTN","RAPM",173,0)
 . I $D(^RARPT(+RARPTTXT,0)),'$$STUB^RAEDCN1(+RARPTTXT) S RAHASR=1
"RTN","RAPM",174,0)
 . I 'RAHASR D
"RTN","RAPM",175,0)
 . . S ^TMP($J,"RAPM","TR",0)=$G(^TMP($J,"RAPM","TR",0))+1
"RTN","RAPM",176,0)
 . . S ^TMP($J,"RAPM","VR",0)=$G(^TMP($J,"RAPM","VR",0))+1
"RTN","RAPM",177,0)
 . ; Get report info. if real report exists.
"RTN","RAPM",178,0)
 . I RAHASR D RPTINFO^RAPM1
"RTN","RAPM",179,0)
 . D STORE^RAPM2
"RTN","RAPM",180,0)
 . ; Calculate the total number of reports
"RTN","RAPM",181,0)
 . S ^TMP($J,"RAPM","TOTAL")=$G(^TMP($J,"RAPM","TOTAL"))+1
"RTN","RAPM",182,0)
 Q
"RTN","RAPM",183,0)
EXIT ; Exit
"RTN","RAPM",184,0)
 ; Close device
"RTN","RAPM",185,0)
 D CLOSE^RAUTL
"RTN","RAPM",186,0)
 K RACN0,RAEXST,RANUM,RACN,RAPRIM,RAPRIMNM,RACAT,RARPTTXT,RAANS,RATXT
"RTN","RAPM",187,0)
 K DIR,DIRUT,BDATE,EDATE,RARPT,DTDIFF,BEGDT,ENDDT,RAITYP,RAIMGTYP,RATYP
"RTN","RAPM",188,0)
 K ZTRTN,ZTSAVE,ZTDESC,RAPG,RASELDIV,RACHKDIV,RACNO,RAVHRS
"RTN","RAPM",189,0)
 K RADIV,RAN,RAIMG,RAREC1,RATOTCNT,RACNI,RADFN,RADTE,RADTI,RAHD,RAPATNM
"RTN","RAPM",190,0)
 K RAPOP,RAPSTX,RAQUIT,RAREC,RARPTDT,RARPTST,RASORT,RASRT,RATDFHR,RAHASR
"RTN","RAPM",191,0)
 K RATDFSEC,RATHRS,RAVDFHR,RAVDFSEC,RAVERDT,RAMES,RALINE,RAMAXDT,RADD
"RTN","RAPM",192,0)
 K RAANS2,RAIOM,RAHDR,RANODIV,RASINCE,RADHT,RADHV,RAVAL
"RTN","RAPM",193,0)
 K ^TMP($J)
"RTN","RAPM",194,0)
 Q
"RTN","RAPM1")
0^2^B68646559
"RTN","RAPM1",1,0)
RAPM1 ;HOIFO/TH-Radiology Performance Monitors/Indicator; ;6/9/03  12:49
"RTN","RAPM1",2,0)
 ;;5.0;Radiology/Nuclear Medicine;**37**;Mar 16, 1998
"RTN","RAPM1",3,0)
 ;
"RTN","RAPM1",4,0)
 D HDR^RAPM2("S")
"RTN","RAPM1",5,0)
 ; Print total reports
"RTN","RAPM1",6,0)
 W !,"Total number of reports expected for procedures performed during "
"RTN","RAPM1",7,0)
 W "specified",!,"date range: "
"RTN","RAPM1",8,0)
 S RATOTCNT=+$G(^TMP($J,"RAPM","TOTAL"))
"RTN","RAPM1",9,0)
 W $J(+RATOTCNT,$L(+RATOTCNT))
"RTN","RAPM1",10,0)
 S RAN=RAN+1,^TMP($J,"RAPM",RAN)="",RAN=RAN+1
"RTN","RAPM1",11,0)
 S ^TMP($J,"RAPM",RAN)="Total number of reports expected for procedures performed during specified",RAN=RAN+1
"RTN","RAPM1",12,0)
 S ^TMP($J,"RAPM",RAN)="date range: "_$J(+RATOTCNT,$L(+RATOTCNT)),RAN=RAN+1,^TMP($J,"RAPM",RAN)="",RAN=RAN+1
"RTN","RAPM1",13,0)
 D SHDR,SRPT,FOOTER
"RTN","RAPM1",14,0)
 Q
"RTN","RAPM1",15,0)
SHDR ; Print header of summary report
"RTN","RAPM1",16,0)
 I ($Y+5)>IOSL,IO=IO(0) D  Q
"RTN","RAPM1",17,0)
 . I $E(IOST,1,2)="C-" R !,"Press RETURN to continue.",X:DTIME
"RTN","RAPM1",18,0)
 . S RAPG=RAPG+1,RAHDR="Summary Performance Indicator Report"
"RTN","RAPM1",19,0)
 . W @IOF,!?(RAIOM-$L(RAHDR)\2),RAHDR,?(RAIOM-10),"Page: ",$G(RAPG)
"RTN","RAPM1",20,0)
 W !!,"Hrs ",?8,">0",?14,">24",?21,">48",?27,">72",?33,">96"
"RTN","RAPM1",21,0)
 W ?38,">120",?44,">144",?50,">168",?56,">192",?62,">216",?68,">240"
"RTN","RAPM1",22,0)
 W ?73,"PENDING"
"RTN","RAPM1",23,0)
 S ^TMP($J,"RAPM",RAN)="Hrs    >0    >24    >48   >72   >96  >120  >144  >168  >192  >216  >240 PENDING",RAN=RAN+1
"RTN","RAPM1",24,0)
 W !,"From",?7,"-24",?14,"-48",?21,"-72",?27,"-96",?32,"-120",?38,"-144"
"RTN","RAPM1",25,0)
 W ?44,"-168",?50,"-192",?56,"-216",?62,"-240",?68,"Hrs"
"RTN","RAPM1",26,0)
 S ^TMP($J,"RAPM",RAN)="From  -24    -48    -72   -96  -120  -144  -168  -192  -216  -240  Hrs",RAN=RAN+1
"RTN","RAPM1",27,0)
 W !,"Ex Dt",?7,"Hrs",?14,"Hrs",?21,"Hrs",?27,"Hrs",?33,"Hrs",?39,"Hrs",?45,"Hrs",?51,"Hrs",?57,"Hrs",?63,"Hrs",!
"RTN","RAPM1",28,0)
 S ^TMP($J,"RAPM",RAN)="Ex Dt Hrs    Hrs    Hrs   Hrs   Hrs   Hrs   Hrs   Hrs   Hrs   Hrs",RAN=RAN+1
"RTN","RAPM1",29,0)
 S ^TMP($J,"RAPM",RAN)="",RAN=RAN+1
"RTN","RAPM1",30,0)
 Q
"RTN","RAPM1",31,0)
SRPT ; Print summary report
"RTN","RAPM1",32,0)
 I ($Y+5)>IOSL,IO=IO(0) D SHDR
"RTN","RAPM1",33,0)
 I RATOTCNT=0 W !,?4,"No data to print..." Q
"RTN","RAPM1",34,0)
 ;
"RTN","RAPM1",35,0)
 W !,"#Tr",?4,$J(+$G(^TMP($J,"RAPM","TR",1)),6),?11,$J(+$G(^(2)),6),?18,$J(+$G(^(3)),6),?25,$J(+$G(^(4)),5)
"RTN","RAPM1",36,0)
 W ?31,$J(+$G(^TMP($J,"RAPM","TR",5)),5),?37,$J(+$G(^(6)),5),?43,$J(+$G(^(7)),5),?49,$J(+$G(^(8)),5),?55,$J(+$G(^(9)),5)
"RTN","RAPM1",37,0)
 W ?61,$J(+$G(^TMP($J,"RAPM","TR",10)),5),?67,$J(+$G(^(11)),5),?73,$J(+$G(^(0)),7)
"RTN","RAPM1",38,0)
 ;
"RTN","RAPM1",39,0)
 S ^TMP($J,"RAPM",RAN)="#Tr"_$J(+$G(^TMP($J,"RAPM","TR",1)),6)_" "_$J(+$G(^(2)),6)_" "_$J(+$G(^(3)),6)_" "_$J(+$G(^(4)),5)_" "_$J(+$G(^(5)),5)
"RTN","RAPM1",40,0)
 S ^TMP($J,"RAPM",RAN)=^TMP($J,"RAPM",RAN)_" "_$J(+$G(^TMP($J,"RAPM","TR",6)),5)_" "_$J(+$G(^(7)),5)_" "_$J(+$G(^(8)),5)_" "_$J(+$G(^(9)),5)_" "_$J(+$G(^(10)),5)
"RTN","RAPM1",41,0)
 S ^TMP($J,"RAPM",RAN)=^TMP($J,"RAPM",RAN)_" "_$J(+$G(^TMP($J,"RAPM","TR",11)),5)_" "_$J(+$G(^(0)),7) S RAN=RAN+1
"RTN","RAPM1",42,0)
 ;
"RTN","RAPM1",43,0)
 W !,"%Tr",?4,$J((+$G(^TMP($J,"RAPM","TR",1))/RATOTCNT)*100,6,1)
"RTN","RAPM1",44,0)
 W ?11,$J((+$G(^TMP($J,"RAPM","TR",2))/RATOTCNT)*100,6,1),?18,$J((+$G(^(3))/RATOTCNT)*100,6,1),?25,$J((+$G(^(4))/RATOTCNT)*100,5,1)
"RTN","RAPM1",45,0)
 W ?31,$J((+$G(^TMP($J,"RAPM","TR",5))/RATOTCNT)*100,5,1),?37,$J((+$G(^(6))/RATOTCNT)*100,5,1),?43,$J((+$G(^(7))/RATOTCNT)*100,5,1),?49,$J((+$G(^(8))/RATOTCNT)*100,5,1)
"RTN","RAPM1",46,0)
 W ?55,$J((+$G(^TMP($J,"RAPM","TR",9))/RATOTCNT)*100,5,1),?61,$J((+$G(^(10))/RATOTCNT)*100,5,1),?67,$J((+$G(^(11))/RATOTCNT)*100,5,1),?73,$J((+$G(^(0))/RATOTCNT)*100,7,1),!
"RTN","RAPM1",47,0)
 ;
"RTN","RAPM1",48,0)
 S ^TMP($J,"RAPM",RAN)="%Tr"_$J((+$G(^TMP($J,"RAPM","TR",1))/RATOTCNT)*100,6,1)_" "_$J((+$G(^(2))/RATOTCNT)*100,6,1)_" "_$J((+$G(^(3))/RATOTCNT)*100,6,1)_" "_$J((+$G(^(4))/RATOTCNT)*100,5,1)
"RTN","RAPM1",49,0)
 S ^TMP($J,"RAPM",RAN)=$G(^TMP($J,"RAPM",RAN))_" "_$J((+$G(^TMP($J,"RAPM","TR",5))/RATOTCNT)*100,5,1)_" "_$J((+$G(^(6))/RATOTCNT)*100,5,1)_" "_$J((+$G(^(7))/RATOTCNT)*100,5,1)
"RTN","RAPM1",50,0)
 S ^TMP($J,"RAPM",RAN)=$G(^TMP($J,"RAPM",RAN))_" "_$J((+$G(^TMP($J,"RAPM","TR",8))/RATOTCNT)*100,5,1)_" "_$J((+$G(^(9))/RATOTCNT)*100,5,1)_" "_$J((+$G(^(10))/RATOTCNT)*100,5,1)
"RTN","RAPM1",51,0)
 S ^TMP($J,"RAPM",RAN)=$G(^TMP($J,"RAPM",RAN))_" "_$J((+$G(^TMP($J,"RAPM","TR",11))/RATOTCNT)*100,5,1)_" "_$J((+$G(^(0))/RATOTCNT)*100,7,1)
"RTN","RAPM1",52,0)
 S RAN=RAN+1,^TMP($J,"RAPM",RAN)=""
"RTN","RAPM1",53,0)
 ;
"RTN","RAPM1",54,0)
 W !,"#Vr",?4,$J(+$G(^TMP($J,"RAPM","VR",1)),6),?11,$J(+$G(^(2)),6),?18,$J(+$G(^(3)),6),?25,$J(+$G(^(4)),5),?31,$J(+$G(^(5)),5)
"RTN","RAPM1",55,0)
 W ?37,$J(+$G(^TMP($J,"RAPM","VR",6)),5),?43,$J(+$G(^(7)),5),?49,$J(+$G(^(8)),5),?55,$J(+$G(^(9)),5),?61,$J(+$G(^(10)),5)
"RTN","RAPM1",56,0)
 W ?67,$J(+$G(^TMP($J,"RAPM","VR",11)),5),?73,$J(+$G(^(0)),7)
"RTN","RAPM1",57,0)
 ;
"RTN","RAPM1",58,0)
 S ^TMP($J,"RAPM",RAN)="#Vr"_$J(+$G(^TMP($J,"RAPM","VR",1)),6)_" "_$J(+$G(^(2)),6)_" "_$J(+$G(^(3)),6)_" "_$J(+$G(^(4)),5)_" "_$J(+$G(^(5)),5)
"RTN","RAPM1",59,0)
 S ^TMP($J,"RAPM",RAN)=$G(^TMP($J,"RAPM",RAN))_" "_$J(+$G(^TMP($J,"RAPM","VR",6)),5)_" "_$J(+$G(^(7)),5)_" "_$J(+$G(^(8)),5)_" "_$J(+$G(^(9)),5)_" "_$J(+$G(^(10)),5)
"RTN","RAPM1",60,0)
 S ^TMP($J,"RAPM",RAN)=$G(^TMP($J,"RAPM",RAN))_" "_$J(+$G(^TMP($J,"RAPM","VR",11)),5)_" "_$J(+$G(^(0)),7) S RAN=RAN+1
"RTN","RAPM1",61,0)
 ;
"RTN","RAPM1",62,0)
 W !,"%Vr",?4,$J((+$G(^TMP($J,"RAPM","VR",1))/RATOTCNT)*100,6,1),?11,$J((+$G(^(2))/RATOTCNT)*100,6,1),?18,$J((+$G(^(3))/RATOTCNT)*100,6,1)
"RTN","RAPM1",63,0)
 W ?25,$J((+$G(^TMP($J,"RAPM","VR",4))/RATOTCNT)*100,5,1),?31,$J((+$G(^(5))/RATOTCNT)*100,5,1),?37,$J((+$G(^(6))/RATOTCNT)*100,5,1),?43,$J((+$G(^(7))/RATOTCNT)*100,5,1)
"RTN","RAPM1",64,0)
 W ?49,$J((+$G(^TMP($J,"RAPM","VR",8))/RATOTCNT)*100,5,1),?55,$J((+$G(^(9))/RATOTCNT)*100,5,1),?61,$J((+$G(^(10))/RATOTCNT)*100,5,1),?67,$J((+$G(^(11))/RATOTCNT)*100,5,1)
"RTN","RAPM1",65,0)
 W ?73,$J((+$G(^TMP($J,"RAPM","VR",0))/RATOTCNT)*100,7,1),!
"RTN","RAPM1",66,0)
 ;
"RTN","RAPM1",67,0)
 S ^TMP($J,"RAPM",RAN)="%Vr"_$J((+$G(^TMP($J,"RAPM","VR",1))/RATOTCNT)*100,6,1)_" "_$J((+$G(^(2))/RATOTCNT)*100,6,1)_" "_$J((+$G(^(3))/RATOTCNT)*100,6,1)_" "_$J((+$G(^(4))/RATOTCNT)*100,5,1)
"RTN","RAPM1",68,0)
 S ^TMP($J,"RAPM",RAN)=$G(^TMP($J,"RAPM",RAN))_" "_$J((+$G(^TMP($J,"RAPM","VR",5))/RATOTCNT)*100,5,1)_" "_$J((+$G(^(6))/RATOTCNT)*100,5,1)_" "_$J((+$G(^(7))/RATOTCNT)*100,5,1)
"RTN","RAPM1",69,0)
 S ^TMP($J,"RAPM",RAN)=$G(^TMP($J,"RAPM",RAN))_" "_$J((+$G(^TMP($J,"RAPM","VR",8))/RATOTCNT)*100,5,1)_" "_$J((+$G(^(9))/RATOTCNT)*100,5,1)_" "_$J((+$G(^(10))/RATOTCNT)*100,5,1)
"RTN","RAPM1",70,0)
 S ^TMP($J,"RAPM",RAN)=$G(^TMP($J,"RAPM",RAN))_" "_$J((+$G(^TMP($J,"RAPM","VR",11))/RATOTCNT)*100,5,1)_" "_$J((+$G(^(0))/RATOTCNT)*100,7,1) S RAN=RAN+1
"RTN","RAPM1",71,0)
 Q
"RTN","RAPM1",72,0)
FOOTER ; Footer
"RTN","RAPM1",73,0)
 S (^TMP($J,"RAPM",RAN),^TMP($J,"RAPM",RAN+1))="",RAN=RAN+1
"RTN","RAPM1",74,0)
 I ($Y+5)>IOSL,IO=IO(0) D SHDR
"RTN","RAPM1",75,0)
 W !!?5,"* Columns represent # of hours elapsed from exam date/time through",!?7,"date/time report entered or date/time report was verified."
"RTN","RAPM1",76,0)
 W !?7,"e.g. "">0-24 Hrs"" column represents those exams that had a report"
"RTN","RAPM1",77,0)
 W !?7,"transcribed and/or verified within 0-24 hours from the exam date/time."
"RTN","RAPM1",78,0)
 W !!?5,"* Columns following the initial elapsed time column "">0-24 Hrs"" begin"
"RTN","RAPM1",79,0)
 W !?7,"at .0001 after the starting hour (e.g. "">24-48 Hrs"" = starts at 24.001",!?7,"through the 48th hour.)",!
"RTN","RAPM1",80,0)
 W !?5,"* PENDING means there's no data for DATE REPORT ENTERED or VERIFIED DATE."
"RTN","RAPM1",81,0)
 W !?7,"So, if the expected report is missing one of these fields, or is missing"
"RTN","RAPM1",82,0)
 W !?7,"data for fields .01 through 17 from file #74, RAD/NUC MED REPORTS, or"
"RTN","RAPM1",83,0)
 W !?7,"is a Stub Report that was entered by the Imaging package when images"
"RTN","RAPM1",84,0)
 W !?7,"were captured before a report was entered, then the expected report"
"RTN","RAPM1",85,0)
 W !?7,"would be counted in the PENDING column."
"RTN","RAPM1",86,0)
 ;
"RTN","RAPM1",87,0)
 S ^TMP($J,"RAPM",RAN)="    * Columns represent # of hours elapsed from exam date/time through",RAN=RAN+1
"RTN","RAPM1",88,0)
 S ^TMP($J,"RAPM",RAN)="      date/time report entered or date/time report was verified.",RAN=RAN+1
"RTN","RAPM1",89,0)
 S ^TMP($J,"RAPM",RAN)="      e.g. "">0-24 Hrs"" column represents those exams that had a report",RAN=RAN+1
"RTN","RAPM1",90,0)
 S ^TMP($J,"RAPM",RAN)="      transcribed and/or verified within 0-24 hours from the exam date/time.",RAN=RAN+1
"RTN","RAPM1",91,0)
 S ^TMP($J,"RAPM",RAN)="",RAN=RAN+1
"RTN","RAPM1",92,0)
 S ^TMP($J,"RAPM",RAN)="    * Columns following the initial elapsed time column (0-24 Hrs) begin",RAN=RAN+1
"RTN","RAPM1",93,0)
 S ^TMP($J,"RAPM",RAN)="      at .0001 after the starting hour (e.g. "">24-48 Hrs"" = starts at 24.001",RAN=RAN+1
"RTN","RAPM1",94,0)
 S ^TMP($J,"RAPM",RAN)="      through the 48th hour.)",RAN=RAN+1
"RTN","RAPM1",95,0)
 S ^TMP($J,"RAPM",RAN)="",RAN=RAN+1
"RTN","RAPM1",96,0)
 S ^TMP($J,"RAPM",RAN)="    * PENDING means there's no data for DATE REPORT ENTERED or VERIFIED DATE.",RAN=RAN+1
"RTN","RAPM1",97,0)
 S ^TMP($J,"RAPM",RAN)="      So, if the expected report is missing one of these fields, or is missing",RAN=RAN+1
"RTN","RAPM1",98,0)
 S ^TMP($J,"RAPM",RAN)="      data for fields .01 through 17 from file #74, RAD/NUC MED REPORTS, or",RAN=RAN+1
"RTN","RAPM1",99,0)
 S ^TMP($J,"RAPM",RAN)="      is a Stub Report that was entered by the Imaging package when images",RAN=RAN+1
"RTN","RAPM1",100,0)
 S ^TMP($J,"RAPM",RAN)="      were captured before a report was entered, then the expected report",RAN=RAN+1
"RTN","RAPM1",101,0)
 S ^TMP($J,"RAPM",RAN)="      would be counted in the PENDING column."
"RTN","RAPM1",102,0)
 Q
"RTN","RAPM1",103,0)
RPTINFO ; Other report info.
"RTN","RAPM1",104,0)
 ; Get Date/Time Report Entered, replace prev RACN with data from Report
"RTN","RAPM1",105,0)
 S RARPTDT=$P(^RARPT(RARPTTXT,0),U,6),RACN=$P(^(0),U)
"RTN","RAPM1",106,0)
 ; Get Verified Date/Time
"RTN","RAPM1",107,0)
 S RAVERDT=$P(^RARPT(RARPTTXT,0),U,7)
"RTN","RAPM1",108,0)
 I RARPTDT="" S ^TMP($J,"RAPM","TR",0)=$G(^TMP($J,"RAPM","TR",0))+1
"RTN","RAPM1",109,0)
 I RAVERDT="" S ^TMP($J,"RAPM","VR",0)=$G(^TMP($J,"RAPM","VR",0))+1
"RTN","RAPM1",110,0)
 ; Get Report Status
"RTN","RAPM1",111,0)
 S RARPTST=$P(^RARPT(RARPTTXT,0),U,5)
"RTN","RAPM1",112,0)
 ;
"RTN","RAPM1",113,0)
CAL ; Calculation: Null report pointer, no report, no report date, no 
"RTN","RAPM1",114,0)
 ; verfied date are counted as diff=0
"RTN","RAPM1",115,0)
 ; # of Transcribed = Total # of transcribed exams not cancelled.
"RTN","RAPM1",116,0)
 ; # of hrs from exam registration = Date/Time transcribed 
"RTN","RAPM1",117,0)
 ;      (Date Report Entered) - Exam Date/time
"RTN","RAPM1",118,0)
 I RARPTDT D
"RTN","RAPM1",119,0)
 . S RATDFSEC=$$FMDIFF^XLFDT(RARPTDT,RADTE,2)
"RTN","RAPM1",120,0)
 . S RATDFHR=RATDFSEC/3600
"RTN","RAPM1",121,0)
 . S RATHRS=$S(RATDFHR=0:0,RATDFHR'>24:1,RATDFHR'>48:2,RATDFHR'>72:3,RATDFHR'>96:4,RATDFHR'>120:5,RATDFHR'>144:6,RATDFHR'>168:7,RATDFHR'>192:8,RATDFHR'>216:9,RATDFHR'>240:10,1:11)
"RTN","RAPM1",122,0)
 . S ^(RATHRS)=$G(^TMP($J,"RAPM","TR",RATHRS))+1
"RTN","RAPM1",123,0)
 ;
"RTN","RAPM1",124,0)
 I RAVERDT D
"RTN","RAPM1",125,0)
 . S RAVDFSEC=$$FMDIFF^XLFDT(RAVERDT,RADTE,2)
"RTN","RAPM1",126,0)
 . S RAVDFHR=RAVDFSEC/3600
"RTN","RAPM1",127,0)
 . S RAVHRS=$S(RAVDFHR=0:0,RAVDFHR'>24:1,RAVDFHR'>48:2,RAVDFHR'>72:3,RAVDFHR'>96:4,RAVDFHR'>120:5,RAVDFHR'>144:6,RAVDFHR'>168:7,RAVDFHR'>192:8,RAVDFHR'>216:9,RAVDFHR'>240:10,1:11)
"RTN","RAPM1",128,0)
 . S ^(RAVHRS)=$G(^TMP($J,"RAPM","VR",RAVHRS))+1
"RTN","RAPM1",129,0)
 Q
"RTN","RAPM2")
0^3^B59738205
"RTN","RAPM2",1,0)
RAPM2 ;HOIFO/TH-Radiology Performance Monitors/Indicator; ;6/9/03  12:49
"RTN","RAPM2",2,0)
 ;;5.0;Radiology/Nuclear Medicine;**37**;Mar 16, 1998
"RTN","RAPM2",3,0)
 ;
"RTN","RAPM2",4,0)
DETAIL ; Print Detail report
"RTN","RAPM2",5,0)
 I ($Y+5)>IOSL!(RARPT="B") D
"RTN","RAPM2",6,0)
 . I IO=IO(0),($E(IOST,1,2)="C-") D
"RTN","RAPM2",7,0)
 . . R !,"Press RETURN to continue. ",X:DTIME
"RTN","RAPM2",8,0)
 D HDR("D")
"RTN","RAPM2",9,0)
 D PRTTOT
"RTN","RAPM2",10,0)
 D DHDR
"RTN","RAPM2",11,0)
 D DRPT
"RTN","RAPM2",12,0)
 D DFOOTER
"RTN","RAPM2",13,0)
 Q
"RTN","RAPM2",14,0)
 ;
"RTN","RAPM2",15,0)
PRTTOT ; Print total number of reports
"RTN","RAPM2",16,0)
 S RATOTCNT=+$G(^TMP($J,"RAPM","TOTAL"))
"RTN","RAPM2",17,0)
 W !,"Total number of reports expected for procedures performed during specified date range: ",$J(RATOTCNT,$L(RATOTCNT))
"RTN","RAPM2",18,0)
 Q
"RTN","RAPM2",19,0)
 ;
"RTN","RAPM2",20,0)
DHDR ; Header
"RTN","RAPM2",21,0)
 I ($Y+5)>IOSL D
"RTN","RAPM2",22,0)
 . S RAPG=RAPG+1,RAHD(0)="Detail Performance Indicator Report"
"RTN","RAPM2",23,0)
 . W @IOF,!?(RAIOM-$L(RAHD(0))\2),RAHD(0),?(RAIOM-10),"Page: ",$G(RAPG)
"RTN","RAPM2",24,0)
 W !!,?32,"Date/Time",?48,"Date/Time",?64,"Date/Time",?105,"Cat"
"RTN","RAPM2",25,0)
 W ?109,"Rpt",?116,"Imaging"
"RTN","RAPM2",26,0)
 W !,"Patient Name",?18,"Case #",?32,"Registered",?48,"Transcribed",?63,"Hrs"
"RTN","RAPM2",27,0)
 W ?68,"Verified",?83,"Hrs",?90,"Radiologist",?105,"Exm",?109,"Sts"
"RTN","RAPM2",28,0)
 W ?116,"Type",!
"RTN","RAPM2",29,0)
 Q
"RTN","RAPM2",30,0)
 ;
"RTN","RAPM2",31,0)
DRPT ; Read records
"RTN","RAPM2",32,0)
 I '$D(^TMP($J,"RAPM2")) W !!?30,"No data to print...",!!!!! Q
"RTN","RAPM2",33,0)
 S D1="" F  S D1=$O(^TMP($J,"RAPM2",D1)) Q:D1=""  D
"RTN","RAPM2",34,0)
 . S D2="" F  S D2=$O(^TMP($J,"RAPM2",D1,D2)) Q:D2=""  D
"RTN","RAPM2",35,0)
 . . S D3="" F  S D3=$O(^TMP($J,"RAPM2",D1,D2,D3)) Q:D3=""  D
"RTN","RAPM2",36,0)
 . . . D SRT
"RTN","RAPM2",37,0)
 Q
"RTN","RAPM2",38,0)
 ;
"RTN","RAPM2",39,0)
SRT ; Read records
"RTN","RAPM2",40,0)
 I RASORT="C"!(RASORT="P") S RAREC=$G(^TMP($J,"RAPM2",D1,D2,D3)) D DET Q
"RTN","RAPM2",41,0)
 S D4="" F  S D4=$O(^TMP($J,"RAPM2",D1,D2,D3,D4)) Q:D4=""  D
"RTN","RAPM2",42,0)
 . S RAREC=$G(^TMP($J,"RAPM2",D1,D2,D3,D4)) D DET
"RTN","RAPM2",43,0)
 Q
"RTN","RAPM2",44,0)
 ;
"RTN","RAPM2",45,0)
DET ; Print detail records
"RTN","RAPM2",46,0)
 ; use Transcription elasped hr for all sorts, except if sort by Verif.
"RTN","RAPM2",47,0)
 S RAVAL=$S(RASORT="V":$P(RAREC,U,13),1:$P(RAREC,U,12))
"RTN","RAPM2",48,0)
 ; remove symbols before comparison
"RTN","RAPM2",49,0)
 S:$E(RAVAL)="<" RAVAL=.5 S:$E(RAVAL)=">" RAVAL=999
"RTN","RAPM2",50,0)
 ; include PENDING and those with hours > RASINCE
"RTN","RAPM2",51,0)
 I RAVAL'="",RAVAL<RASINCE Q
"RTN","RAPM2",52,0)
 I ($Y+5)>IOSL D
"RTN","RAPM2",53,0)
 . I IO=IO(0) D
"RTN","RAPM2",54,0)
 . . I $E(IOST,1,2)="C-" R !,"Press RETURN to continue. ",X:DTIME
"RTN","RAPM2",55,0)
 . D DHDR
"RTN","RAPM2",56,0)
 W !,$E($P(RAREC,U,2),1,15)
"RTN","RAPM2",57,0)
 W ?18,$P(RAREC,U,1)
"RTN","RAPM2",58,0)
 W ?32,$P($$FMTE^XLFDT($P(RAREC,U,3),"2S"),":",1,2)
"RTN","RAPM2",59,0)
 W ?48,$P($$FMTE^XLFDT($P(RAREC,U,4),"2S"),":",1,2),?63,$J($P(RAREC,U,12),4)
"RTN","RAPM2",60,0)
 W ?68,$P($$FMTE^XLFDT($P(RAREC,U,5),"2S"),":",1,2),?83,$J($P(RAREC,U,13),4)
"RTN","RAPM2",61,0)
 I $P(RAREC,U,6)'="" W ?88,$E($P(RAREC,U,6),1,16)
"RTN","RAPM2",62,0)
 W ?106,$P(RAREC,U,7),?110,$P(RAREC,U,8)
"RTN","RAPM2",63,0)
 W:$P(RAREC,U,11)="" ?113,"*D"
"RTN","RAPM2",64,0)
 W ?116,$E($P(RAREC,U,9),1,16)
"RTN","RAPM2",65,0)
 Q
"RTN","RAPM2",66,0)
 ;
"RTN","RAPM2",67,0)
DFOOTER ; Footer
"RTN","RAPM2",68,0)
 I ($Y+5)>IOSL D
"RTN","RAPM2",69,0)
 . I IO=IO(0) D
"RTN","RAPM2",70,0)
 . . I $E(IOST,1,2)="C-" R !,"Press RETURN to continue. ",X:DTIME
"RTN","RAPM2",71,0)
 . D DHDR
"RTN","RAPM2",72,0)
 W !!,"Note: Category of Exam: 'I' for Inpatient; 'O' for Outpatient; "
"RTN","RAPM2",73,0)
 W "'C' for Contract; 'S' for Sharing; 'E' for Employee; 'R' for Research"
"RTN","RAPM2",74,0)
 W !,"      Report Status:    'V' for Verififed; 'R' for Released/Not "
"RTN","RAPM2",75,0)
 W "Verified; 'PD' for Problem Draft; 'D' for Draft"
"RTN","RAPM2",76,0)
 W:RANODIV !," *D = Division is missing"
"RTN","RAPM2",77,0)
 Q
"RTN","RAPM2",78,0)
 ;
"RTN","RAPM2",79,0)
STORE ; Store detail information
"RTN","RAPM2",80,0)
 Q:RARPT="S"
"RTN","RAPM2",81,0)
 ; for storage subscript: if no rpt dt, set to neg
"RTN","RAPM2",82,0)
 S RADHT=$S(RARPTDT="":-1,1:RATDFHR)
"RTN","RAPM2",83,0)
 S RADHV=$S(RAVERDT="":-1,1:RAVDFHR)
"RTN","RAPM2",84,0)
 ; for display: ronnd off and remove decimal portion of hours
"RTN","RAPM2",85,0)
 S:RATDFHR'="" RATDFHR=(RATDFHR+.5)\1
"RTN","RAPM2",86,0)
 S:RAVDFHR'="" RAVDFHR=(RAVDFHR+.5)\1
"RTN","RAPM2",87,0)
 S RATDFHR=$S(RATDFHR="":"",RATDFHR<1:"<1",RATDFHR>999:">999",1:RATDFHR)
"RTN","RAPM2",88,0)
 S RAVDFHR=$S(RAVDFHR="":"",RAVDFHR<1:"<1",RAVDFHR>999:">999",1:RAVDFHR)
"RTN","RAPM2",89,0)
 S RAREC1=RACN_U_RAPATNM
"RTN","RAPM2",90,0)
 S RAREC1=RAREC1_U_RADTE_U_RARPTDT_U_RAVERDT_U_RAPRIMNM_U_RACAT_U
"RTN","RAPM2",91,0)
 S RAREC1=RAREC1_RARPTST_U_RAIMGTYP_U_RADFN_U_RACHKDIV_U_RATDFHR_U_RAVDFHR
"RTN","RAPM2",92,0)
 I RASORT="C" S ^TMP($J,"RAPM2",$P(RADTE,"."),RACN,RAPATNM)=RAREC1
"RTN","RAPM2",93,0)
 I RASORT="P" S ^TMP($J,"RAPM2",RAPATNM,$P(RADTE,"."),RACN)=RAREC1
"RTN","RAPM2",94,0)
 I RASORT="I" S ^TMP($J,"RAPM2",RAIMGTYP,$P(RADTE,"."),RACN,RAPATNM)=RAREC1
"RTN","RAPM2",95,0)
 I RASORT="E" S ^TMP($J,"RAPM2",RACAT,$P(RADTE,"."),RACN,RAPATNM)=RAREC1
"RTN","RAPM2",96,0)
 I RASORT="R" S ^TMP($J,"RAPM2",RAPRIMNM,$P(RADTE,"."),RACN,RAPATNM)=RAREC1
"RTN","RAPM2",97,0)
 I RASORT="T" S ^TMP($J,"RAPM2",RADHT,RADTE,RACN,RAPATNM)=RAREC1
"RTN","RAPM2",98,0)
 I RASORT="V" S ^TMP($J,"RAPM2",RADHV,RADTE,RACN,RAPATNM)=RAREC1
"RTN","RAPM2",99,0)
 Q
"RTN","RAPM2",100,0)
EMAIL ; Ask if ready to email the summary report
"RTN","RAPM2",101,0)
 N RA1
"RTN","RAPM2",102,0)
 W ! S DIR(0)="Y"
"RTN","RAPM2",103,0)
 S DIR("A")="Send summary report to local mail group ""G.RAD PERFORMANCE INDICATOR"""
"RTN","RAPM2",104,0)
 S DIR("B")="Yes"
"RTN","RAPM2",105,0)
 D ^DIR
"RTN","RAPM2",106,0)
 Q:$D(DIRUT)
"RTN","RAPM2",107,0)
 S RAANS=Y
"RTN","RAPM2",108,0)
 S RA1=$O(^RA(79,0)) Q:'RA1
"RTN","RAPM2",109,0)
 I '$O(^RA(79,RA1,1,0)) D  Q
"RTN","RAPM2",110,0)
 . W !!,?5,"No OUTLOOK mail group(s) have been entered yet."
"RTN","RAPM2",111,0)
 . Q
"RTN","RAPM2",112,0)
 W ! S DIR(0)="Y"
"RTN","RAPM2",113,0)
 S DIR("A")="Send summary report to OUTLOOK mail group(s)"
"RTN","RAPM2",114,0)
 S DIR("B")="Yes"
"RTN","RAPM2",115,0)
 D ^DIR
"RTN","RAPM2",116,0)
 S RAANS2=Y
"RTN","RAPM2",117,0)
 Q
"RTN","RAPM2",118,0)
SEND ; Send summary report to mail group
"RTN","RAPM2",119,0)
 I RAANS=0,RAANS2=0 Q
"RTN","RAPM2",120,0)
 N RA1,RA2,RASVSUB,RASVTEXT
"RTN","RAPM2",121,0)
 S XMSUB="Radiology Summary Performance Indicator"
"RTN","RAPM2",122,0)
 S XMDUZ=DUZ
"RTN","RAPM2",123,0)
 S XMTEXT="^TMP($J,""RAPM"","
"RTN","RAPM2",124,0)
 S RASVSUB=XMSUB,RASVTEXT=XMTEXT
"RTN","RAPM2",125,0)
 I RAANS=1 D
"RTN","RAPM2",126,0)
 . S XMY("G.RAD PERFORMANCE INDICATOR")=""
"RTN","RAPM2",127,0)
 . D ^XMD
"RTN","RAPM2",128,0)
 . K XMY
"RTN","RAPM2",129,0)
 . Q
"RTN","RAPM2",130,0)
 I RAANS2=1 D
"RTN","RAPM2",131,0)
 . S RA1=$O(^RA(79,0)) Q:'RA1
"RTN","RAPM2",132,0)
 . S XMSUB=RASVSUB,XMTEXT=RASVTEXT
"RTN","RAPM2",133,0)
 . S RA2=0
"RTN","RAPM2",134,0)
 . F  S RA2=$O(^RA(79,RA1,1,RA2)) Q:'RA2  S XMY($P(^(RA2,0),U))=""
"RTN","RAPM2",135,0)
 . D ^XMD
"RTN","RAPM2",136,0)
 . K XMY
"RTN","RAPM2",137,0)
 . Q
"RTN","RAPM2",138,0)
 K XMDUZ
"RTN","RAPM2",139,0)
 Q
"RTN","RAPM2",140,0)
HDR(RATYP) ; Print appropriate header
"RTN","RAPM2",141,0)
 U IO S RAPG=$G(RAPG)+1
"RTN","RAPM2",142,0)
 I $G(RAPG)!($E(IOST,1,2)="C-") W @IOF
"RTN","RAPM2",143,0)
 I $E(IOST,1,2)="P-",(RAPG>1) W @IOF
"RTN","RAPM2",144,0)
 S RAHD(0)=$S(RATYP="S":"Summary",RATYP="D":"Detail",1:"")
"RTN","RAPM2",145,0)
 S RAHD(0)=RAHD(0)_" Performance Indicator Report"
"RTN","RAPM2",146,0)
 S RAIOM=$S(RATYP="S":80,1:IOM)
"RTN","RAPM2",147,0)
 W !?(RAIOM-$L(RAHD(0))\2),RAHD(0),?(RAIOM-10),"Page: ",$G(RAPG),!
"RTN","RAPM2",148,0)
 I RATYP="S" S RAN=1 D
"RTN","RAPM2",149,0)
 . S ^TMP($J,"RAPM",RAN)="                     Summary Performance Indicator Report          Page: "_$G(RAPG) S RAN=RAN+1
"RTN","RAPM2",150,0)
 . S ^TMP($J,"RAPM",RAN)="",RAN=RAN+1
"RTN","RAPM2",151,0)
 W !,"Facility: ",$$NAME^XUAF4(DUZ(2))
"RTN","RAPM2",152,0)
 I RATYP="S" S ^TMP($J,"RAPM",RAN)="Facility: "_$$NAME^XUAF4(DUZ(2)) S RAN=RAN+1
"RTN","RAPM2",153,0)
 W !,"Division: "
"RTN","RAPM2",154,0)
 I RATYP="S" S ^TMP($J,"RAPM",RAN)="Division: "
"RTN","RAPM2",155,0)
 D DIV
"RTN","RAPM2",156,0)
 S:(RATYP="S") RAN=RAN+1
"RTN","RAPM2",157,0)
 ;
"RTN","RAPM2",158,0)
 W !,"Exam Date Range: "
"RTN","RAPM2",159,0)
 W $$FMTE^XLFDT(BDATE,"2D")," - ",$$FMTE^XLFDT(EDATE,"2D")
"RTN","RAPM2",160,0)
 I RATYP="S" S ^TMP($J,"RAPM",RAN)="Exam Date Range: "_$$FMTE^XLFDT(BDATE,"2D")_" - "_$$FMTE^XLFDT(EDATE,"2D") S RAN=RAN+1
"RTN","RAPM2",161,0)
 ;
"RTN","RAPM2",162,0)
 W !,"Imaging Type(s): "
"RTN","RAPM2",163,0)
 I RATYP="S" S ^TMP($J,"RAPM",RAN)="Imaging Type(s): "
"RTN","RAPM2",164,0)
 D IMG
"RTN","RAPM2",165,0)
 S:RATYP="S" RAN=RAN+1
"RTN","RAPM2",166,0)
 ;
"RTN","RAPM2",167,0)
 ; Run date and time
"RTN","RAPM2",168,0)
 S NOW=$$NOW^XLFDT,NOW=$P(NOW,".",1)_"."_$E($P(NOW,".",2),1,4)
"RTN","RAPM2",169,0)
 W !,"Run Date/Time: ",$$FMTE^XLFDT(NOW,"2P"),!
"RTN","RAPM2",170,0)
 I RATYP="S" S ^TMP($J,"RAPM",RAN)="Run Date/Time: "_$$FMTE^XLFDT(NOW,"2P")
"RTN","RAPM2",171,0)
 I (RARPT="D"!(RARPT="B")),(RATYP'="S") D
"RTN","RAPM2",172,0)
 . S RASRT=$S(RASORT="C":"Case Number",RASORT="E":"Cateory of Exam",RASORT="I":"Imaging Type",RASORT="P":"Patient Name",RASORT="R":"Radiologist",RASORT="T":"Hrs to Transcription",RASORT="V":"Hrs to Verification",1:"")
"RTN","RAPM2",173,0)
 . W !,"Sorted by: ",RASRT,?45,"Min. hours elasped to "_$S(RASORT="V":"Verification",1:"Transcription")_": "_RASINCE
"RTN","RAPM2",174,0)
 Q
"RTN","RAPM2",175,0)
DIV ; List selected Division
"RTN","RAPM2",176,0)
 Q:'$D(^TMP($J,"RA D-TYPE"))
"RTN","RAPM2",177,0)
 S RADIV="" F I=1:1 S RADIV=$O(^TMP($J,"RA D-TYPE",RADIV)) Q:RADIV=""  D
"RTN","RAPM2",178,0)
 . I $X'>(RAIOM-$L("Division(s): ")) D
"RTN","RAPM2",179,0)
 . . W RADIV_$S($O(^TMP($J,"RA D-TYPE",RADIV))]"":", ",1:"")
"RTN","RAPM2",180,0)
 . . I RATYP="S" S ^TMP($J,"RAPM",RAN)=^TMP($J,"RAPM",RAN)_RADIV_$S($O(^TMP($J,"RA D-TYPE",RADIV))]"":", ",1:"")
"RTN","RAPM2",181,0)
 . I $X>(RAIOM-$L("Division(s): ")) D
"RTN","RAPM2",182,0)
 . . W !?($X+$L("Division(s): "))
"RTN","RAPM2",183,0)
 . . I RATYP="S" S RAN=RAN+1,^TMP($J,"RAPM",RAN)="         "
"RTN","RAPM2",184,0)
 Q
"RTN","RAPM2",185,0)
IMG ; List selected Imaging Type(s)
"RTN","RAPM2",186,0)
 Q:'$D(^TMP($J,"RA I-TYPE"))
"RTN","RAPM2",187,0)
 S RAIMG="" F J=1:1 S RAIMG=$O(^TMP($J,"RA I-TYPE",RAIMG)) Q:RAIMG=""  D
"RTN","RAPM2",188,0)
 . I $X'>(RAIOM-$L("Imaging Type(s): ")) D
"RTN","RAPM2",189,0)
 . . W RAIMG_$S($O(^TMP($J,"RA I-TYPE",RAIMG))]"":", ",1:"")
"RTN","RAPM2",190,0)
 . . I RATYP="S" S ^TMP($J,"RAPM",RAN)=^TMP($J,"RAPM",RAN)_RAIMG_$S($O(^TMP($J,"RA I-TYPE",RAIMG))]"":", ",1:"")
"RTN","RAPM2",191,0)
 . I $X>(RAIOM-$L("Imaging Type(s): ")) D
"RTN","RAPM2",192,0)
 . . W !?($X+$L("Imaging Type(s): "))
"RTN","RAPM2",193,0)
 . . I RATYP="S" S RAN=RAN+1,^TMP($J,"RAPM",RAN)="                 "
"RTN","RAPM2",194,0)
 Q
"RTN","RAPM3")
0^4^B1270921
"RTN","RAPM3",1,0)
RAPM3 ;HOIFO/SM-Radiology Performance Monitors/Indicator ;5/28/03  10:37
"RTN","RAPM3",2,0)
 ;;5.0;Radiology/Nuclear Medicine;**37**;Mar 16, 1998
"RTN","RAPM3",3,0)
 Q
"RTN","RAPM3",4,0)
EN1 ;entry/edit OUTLOOK mail groups
"RTN","RAPM3",5,0)
 N RA1,RA2
"RTN","RAPM3",6,0)
 S RA1=$O(^RA(79,0)) Q:'RA1
"RTN","RAPM3",7,0)
 I $O(^RA(79,RA1,1,0)) D
"RTN","RAPM3",8,0)
 . W !?5,"OUTLOOK mail groups previously entered:",!
"RTN","RAPM3",9,0)
 . S RA2=0
"RTN","RAPM3",10,0)
 . F  S RA2=$O(^RA(79,RA1,1,RA2)) Q:'RA2  W !?8,^(RA2,0)
"RTN","RAPM3",11,0)
 . Q
"RTN","RAPM3",12,0)
 W !!?5,"You may add another mail group."
"RTN","RAPM3",13,0)
 W !,?5,"To edit or replace a mail group, you must delete the old one first.",!
"RTN","RAPM3",14,0)
 L +^RA(79,RA1,1):1 I '$T W !,$C(7),"Can't lock ^RA,",RA1,",1) now, try again later." Q
"RTN","RAPM3",15,0)
 S DIE="^RA(79,",DA=RA1,DR="175"
"RTN","RAPM3",16,0)
 D ^DIE
"RTN","RAPM3",17,0)
 L -^RA(79,RA1,1)
"RTN","RAPM3",18,0)
 Q
"UP",79,79.0175,-1)
79^1
"UP",79,79.0175,0)
79.0175
"VER")
8.0^22
"^DD",79,79,175,0)
PERFORM INDICATOR MAIL ADDRESS^79.0175^^1;0
"^DD",79,79.0175,0)
PERFORM INDICATOR MAIL ADDRESS SUB-FIELD^^.01^1
"^DD",79,79.0175,0,"DT")
3030404
"^DD",79,79.0175,0,"IX","B",79.0175,.01)

"^DD",79,79.0175,0,"NM","PERFORM INDICATOR MAIL ADDRESS")

"^DD",79,79.0175,0,"UP")
79
"^DD",79,79.0175,.01,0)
PERFORM INDICATOR MAIL ADDRESS^MF^^0;1^K:$L(X)>45!($L(X)<12) X
"^DD",79,79.0175,.01,1,0)
^.1
"^DD",79,79.0175,.01,1,1,0)
79.0175^B
"^DD",79,79.0175,.01,1,1,1)
S ^RA(79,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",79,79.0175,.01,1,1,2)
K ^RA(79,DA(1),1,"B",$E(X,1,30),DA)
"^DD",79,79.0175,.01,3)
Answer must be 12-45 characters in length.
"^DD",79,79.0175,.01,21,0)
^^2^2^3030410^
"^DD",79,79.0175,.01,21,1,0)
This is the OUTLOOK mail address for the person or group who should 
"^DD",79,79.0175,.01,21,2,0)
receive the Radiology Performance Indicator Summary report.
"^DD",79,79.0175,.01,"DT")
3030404
**END**
**END**

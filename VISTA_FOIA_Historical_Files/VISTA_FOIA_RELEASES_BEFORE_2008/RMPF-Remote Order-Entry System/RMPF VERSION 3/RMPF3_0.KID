KIDS Distribution saved on Sep 26, 2003@08:14:42
ROES 3.0 KIDS build
**KIDS**:ROES 3.0^

**INSTALL NAME**
ROES 3.0
"BLD",1281,0)
ROES 3.0^REMOTE ORDER/ENTRY SYSTEM^0^3030926^y
"BLD",1281,1,0)
^^169^169^3030926^^^^
"BLD",1281,1,1,0)
 
"BLD",1281,1,2,0)
The Remote Order Entry System (ROES) version 3.0 was developed
"BLD",1281,1,3,0)
at the VA Denver Distribution Center(DDC).  It is a changeover to
"BLD",1281,1,4,0)
a GUI(windows) based product that allows ordering of goods and
"BLD",1281,1,5,0)
services over the internet and greatly reduces the amount of 
"BLD",1281,1,6,0)
maintenance and support at the local sites.  All of the product
"BLD",1281,1,7,0)
and service information will be kept and maintained at the
"BLD",1281,1,8,0)
DDC, with real-time information on orders and inventory.
"BLD",1281,1,9,0)
  
"BLD",1281,1,10,0)
There are 2 new GUI applications: ROES3.exe and ROES3DeskTop.exe.
"BLD",1281,1,11,0)
  
"BLD",1281,1,12,0)
*****Please refer to the INSTALLATION GUIDE and TECHNICAL MANUAL
"BLD",1281,1,13,0)
for installation and setup directions *****
"BLD",1281,1,14,0)
  
"BLD",1281,1,15,0)
(1) ROES3.exe is designed to be attached to the CPRS Tools Menu. This
"BLD",1281,1,16,0)
application uses the currently selected patient, looks up the current
"BLD",1281,1,17,0)
eligibility information and connects to the DDC ROES 3 web site.  If an
"BLD",1281,1,18,0)
accepted eligibility is not found, the user selects a proposed eligibility
"BLD",1281,1,19,0)
and triggers the sending of the request to PSAS for approval.
"BLD",1281,1,20,0)
  
"BLD",1281,1,21,0)
(2) ROES3DeskTop.exe is designed to be referenced from the user's 
"BLD",1281,1,22,0)
desktop, as it is not tied to a particular patient.  It is used for
"BLD",1281,1,23,0)
station orders, parameter setting, and certain updates to already
"BLD",1281,1,24,0)
existing patient orders.
"BLD",1281,1,25,0)
  
"BLD",1281,1,26,0)
NOIS references addressed in this patch
"BLD",1281,1,27,0)
=======================================
"BLD",1281,1,28,0)
There are no NOIS or E3R references
"BLD",1281,1,29,0)
  
"BLD",1281,1,30,0)
Test Sites
"BLD",1281,1,31,0)
==========
"BLD",1281,1,32,0)
Denver
"BLD",1281,1,33,0)
New York
"BLD",1281,1,34,0)
Columbia
"BLD",1281,1,35,0)
Mountain Home
"BLD",1281,1,36,0)
Atlanta
"BLD",1281,1,37,0)
Nashville
"BLD",1281,1,38,0)
Washington DC
"BLD",1281,1,39,0)
  
"BLD",1281,1,40,0)
FTP Software and Documentation
"BLD",1281,1,41,0)
==============================
"BLD",1281,1,42,0)
  
"BLD",1281,1,43,0)
  
"BLD",1281,1,44,0)
This patch contains the following enhancements:
"BLD",1281,1,45,0)
===============================================
"BLD",1281,1,46,0)
 
"BLD",1281,1,47,0)
 
"BLD",1281,1,48,0)
 
"BLD",1281,1,49,0)
 ROUTINE SUMMARY
"BLD",1281,1,50,0)
================
"BLD",1281,1,51,0)
The second line of all listed routines will look like:
"BLD",1281,1,52,0)
 <tab> ;;3.0;REMOTE ORDER ENTRY SYSTEM;;
"BLD",1281,1,53,0)
  
"BLD",1281,1,54,0)
CHECK^XTSUMBLD results:
"BLD",1281,1,55,0)
  
"BLD",1281,1,56,0)
RMPFRPC0     checksum = 14317184
"BLD",1281,1,57,0)
RMPFRPC1     checksum = 4846679
"BLD",1281,1,58,0)
RMPFRPC3     checksum = 2795744
"BLD",1281,1,59,0)
RMPFDE2      checksum = 4775274
"BLD",1281,1,60,0)
RMPFDE3      checksum = 6656730
"BLD",1281,1,61,0)
RMPFDE4      checksum = 1968602
"BLD",1281,1,62,0)
  
"BLD",1281,1,63,0)
Technical Description
"BLD",1281,1,64,0)
=====================
"BLD",1281,1,65,0)
  
"BLD",1281,1,66,0)
1. New file introduced with this patch:
"BLD",1281,1,67,0)
  
"BLD",1281,1,68,0)
  The ROES ELIGIBILITY CONFIRMATION file (#791814) is introduced to
"BLD",1281,1,69,0)
  store the eligibility request information.
"BLD",1281,1,70,0)
  
"BLD",1281,1,71,0)
2. New VistA Options introduced with this patch:
"BLD",1281,1,72,0)
 
"BLD",1281,1,73,0)
   a) RMPF ROES3 is used to establish a context and allow access to
"BLD",1281,1,74,0)
     the 2 new executables.  It must be assigned to all users of 
"BLD",1281,1,75,0)
     the CPRS Tools or DeskTop applications.
"BLD",1281,1,76,0)
 
"BLD",1281,1,77,0)
   b) RMPFDE2 is used by PSAS to accept/edit/reject eligibility for
"BLD",1281,1,78,0)
     ROES3 orders.  This is a standard VistA option and must be
"BLD",1281,1,79,0)
     placed on a user's menu.
"BLD",1281,1,80,0)
 
"BLD",1281,1,81,0)
   c) RMPFDE4 is the option to be scheduled to remind all PSAS users
"BLD",1281,1,82,0)
     in the RMPF ROES UPDATES (PSAS) mail group that requests for
"BLD",1281,1,83,0)
     eligibility approval are waiting for approval.
"BLD",1281,1,84,0)
 
"BLD",1281,1,85,0)
3. New VistA Remote Procedures introduced with this patch:
"BLD",1281,1,86,0)
 
"BLD",1281,1,87,0)
   a) RMPFDEMOG collects demographic data for transmission to the DDC
"BLD",1281,1,88,0)
     for the site, user and patient.
"BLD",1281,1,89,0)
 
"BLD",1281,1,90,0)
   b) RMPFELIG calculates the approved ROES 3 eligibility.
"BLD",1281,1,91,0)
 
"BLD",1281,1,92,0)
   c) RMPF ELIG MSG sends the suggested eligibility to PSAS for approval.
"BLD",1281,1,93,0)
 
"BLD",1281,1,94,0)
4. Mail groups in ROES 3
"BLD",1281,1,95,0)
 
"BLD",1281,1,96,0)
   a) The ROES 2 mail group RMPF ROES UPDATES (ASPS) continues to be
"BLD",1281,1,97,0)
      used, only this time it is to alert audiologists when a request
"BLD",1281,1,98,0)
      for eligibility approval has been acted upon.
"BLD",1281,1,99,0)
 
"BLD",1281,1,100,0)
   b) The ROES 2 mail group RMPF ROES UPDATES (PSAS) continues to be
"BLD",1281,1,101,0)
      used in ROES 3 to receive notification that a request for eligibility
"BLD",1281,1,102,0)
      is waiting to be processed.
"BLD",1281,1,103,0)
 
"BLD",1281,1,104,0)
Installation Instructions:
"BLD",1281,1,105,0)
==========================
"BLD",1281,1,106,0)
  
"BLD",1281,1,107,0)
This patch was created with Kernel V8 KIDS.
"BLD",1281,1,108,0)
***Please refer to the complete instructions in the Installation Guide***
"BLD",1281,1,109,0)
  
"BLD",1281,1,110,0)
1. This is a completely new installation, so it will not affect any
"BLD",1281,1,111,0)
current ROES 2 users or others on the system. It can be run parallel
"BLD",1281,1,112,0)
to the existing ROES 2 system, until ROES 2 is no longer supported.
"BLD",1281,1,113,0)
You do not need to restrict users from signing on or to lock any
"BLD",1281,1,114,0)
options.
"BLD",1281,1,115,0)
  
"BLD",1281,1,116,0)
2. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu.
"BLD",1281,1,117,0)
This option will load the KIDS package onto your system.
"BLD",1281,1,118,0)
                           
"BLD",1281,1,119,0)
3. You DO NOT need to stop Taskman or the background filers. None
"BLD",1281,1,120,0)
of the routines require mapping, so mapping does not need to be
"BLD",1281,1,121,0)
disabled.
"BLD",1281,1,122,0)
 
"BLD",1281,1,123,0)
4. Using the Kernel Installation and Distribution System menu
"BLD",1281,1,124,0)
(KIDS), you may choose the following options prior to installing
"BLD",1281,1,125,0)
this patch:
"BLD",1281,1,126,0)
 
"BLD",1281,1,127,0)
  a) All routines are new, so there should be no need to Backup
"BLD",1281,1,128,0)
     the Transport Global.
"BLD",1281,1,129,0)
 
"BLD",1281,1,130,0)
  b) Again, this is an all new module, so there should be no
"BLD",1281,1,131,0)
     need to Compare the Transport Global to the Current System.
"BLD",1281,1,132,0)
 
"BLD",1281,1,133,0)
  c) Verify Checksums in the Transport Global.  This option will
"BLD",1281,1,134,0)
     allow you to ensure the integrity of the routines that are
"BLD",1281,1,135,0)
     in the Transport Global.
"BLD",1281,1,136,0)
 
"BLD",1281,1,137,0)
5. Use the 'Install Package(s)' option under the 'Installation'
"BLD",1281,1,138,0)
   menu.
"BLD",1281,1,139,0)
  
"BLD",1281,1,140,0)
   a) Select INSTALL NAME: ROES 3.0
"BLD",1281,1,141,0)
 
"BLD",1281,1,142,0)
   b) When prompted 'Want KIDS to Rebuild Menu Trees Upon
"BLD",1281,1,143,0)
      completion of install?' YES// respond "NO"
"BLD",1281,1,144,0)
 
"BLD",1281,1,145,0)
   c) When prompted 'Want KIDS to INHIBIT LOGONs during the
"BLD",1281,1,146,0)
      install?' YES// respond "NO"
"BLD",1281,1,147,0)
 
"BLD",1281,1,148,0)
   d) When prompted 'Want to DISABLE Scheduled Options, Menu
"BLD",1281,1,149,0)
      Options and Protocols?' NO// respond "NO"
"BLD",1281,1,150,0)
 
"BLD",1281,1,151,0)
   e) When prompted 'Want to MOVE routines to other CPUs?' YES//
"BLD",1281,1,152,0)
      respond "NO"
"BLD",1281,1,153,0)
  
"BLD",1281,1,154,0)
6. Confirm the presence of the two mail groups described under 'Technical
"BLD",1281,1,155,0)
   Description' and enter the names of the respective mail group
"BLD",1281,1,156,0)
   coordinators if necessary.
"BLD",1281,1,157,0)
 
"BLD",1281,1,158,0)
7. Unzip the ROES3.ZIP file containing the 2 new executables: 
"BLD",1281,1,159,0)
   ROES3.exe and ROES3DeskTop.exe
"BLD",1281,1,160,0)
   They can be placed on the network according to local policy,
"BLD",1281,1,161,0)
   in a place where they can be referenced from CPRS Tools and
"BLD",1281,1,162,0)
   from the user's workstation.
"BLD",1281,1,163,0)
  
"BLD",1281,1,164,0)
8. Assign the Broker option RMPF ROES3 to users of either application.
"BLD",1281,1,165,0)
 
"BLD",1281,1,166,0)
9. Add the application ROES3.exe to the CPRS Tools menu.
"BLD",1281,1,167,0)
 
"BLD",1281,1,168,0)
10. Add a link to the ROES3DeskTop application on the selected user's
"BLD",1281,1,169,0)
   workstation desktop.
"BLD",1281,4,0)
^9.64PA^791814^1
"BLD",1281,4,791814,0)
791814
"BLD",1281,4,"B",791814,791814)

"BLD",1281,"ABPKG")
n
"BLD",1281,"INID")
^^
"BLD",1281,"INIT")

"BLD",1281,"KRN",0)
^9.67PA^8989.52^19
"BLD",1281,"KRN",.4,0)
.4
"BLD",1281,"KRN",.4,"NM",0)
^9.68A^^0
"BLD",1281,"KRN",.401,0)
.401
"BLD",1281,"KRN",.401,"NM",0)
^9.68A^^0
"BLD",1281,"KRN",.402,0)
.402
"BLD",1281,"KRN",.402,"NM",0)
^9.68A^^0
"BLD",1281,"KRN",.403,0)
.403
"BLD",1281,"KRN",.5,0)
.5
"BLD",1281,"KRN",.84,0)
.84
"BLD",1281,"KRN",3.6,0)
3.6
"BLD",1281,"KRN",3.6,"NM",0)
^9.68A^^0
"BLD",1281,"KRN",3.8,0)
3.8
"BLD",1281,"KRN",3.8,"NM",0)
^9.68A^2^2
"BLD",1281,"KRN",3.8,"NM",1,0)
RMPF ROES UPDATES (ASPS)^^0
"BLD",1281,"KRN",3.8,"NM",2,0)
RMPF ROES UPDATES (PSAS)^^0
"BLD",1281,"KRN",3.8,"NM","B","RMPF ROES UPDATES (ASPS)",1)

"BLD",1281,"KRN",3.8,"NM","B","RMPF ROES UPDATES (PSAS)",2)

"BLD",1281,"KRN",9.2,0)
9.2
"BLD",1281,"KRN",9.8,0)
9.8
"BLD",1281,"KRN",9.8,"NM",0)
^9.68A^38^6
"BLD",1281,"KRN",9.8,"NM",27,0)
RMPFRPC3^^0^B4440690
"BLD",1281,"KRN",9.8,"NM",32,0)
RMPFRPC0^^0^B48637788
"BLD",1281,"KRN",9.8,"NM",35,0)
RMPFDE4^^0^B3265627
"BLD",1281,"KRN",9.8,"NM",36,0)
RMPFDE2^^0^B16366501
"BLD",1281,"KRN",9.8,"NM",37,0)
RMPFDE3^^0^B19705008
"BLD",1281,"KRN",9.8,"NM",38,0)
RMPFRPC1^^0^B13808474
"BLD",1281,"KRN",9.8,"NM","B","RMPFDE2",36)

"BLD",1281,"KRN",9.8,"NM","B","RMPFDE3",37)

"BLD",1281,"KRN",9.8,"NM","B","RMPFDE4",35)

"BLD",1281,"KRN",9.8,"NM","B","RMPFRPC0",32)

"BLD",1281,"KRN",9.8,"NM","B","RMPFRPC1",38)

"BLD",1281,"KRN",9.8,"NM","B","RMPFRPC3",27)

"BLD",1281,"KRN",19,0)
19
"BLD",1281,"KRN",19,"NM",0)
^9.68A^20^3
"BLD",1281,"KRN",19,"NM",11,0)
RMPF ROES3^^0
"BLD",1281,"KRN",19,"NM",19,0)
RMPFDE2^^0
"BLD",1281,"KRN",19,"NM",20,0)
RMPFDE4^^0
"BLD",1281,"KRN",19,"NM","B","RMPF ROES3",11)

"BLD",1281,"KRN",19,"NM","B","RMPFDE2",19)

"BLD",1281,"KRN",19,"NM","B","RMPFDE4",20)

"BLD",1281,"KRN",19.1,0)
19.1
"BLD",1281,"KRN",19.1,"NM",0)
^9.68A^^0
"BLD",1281,"KRN",101,0)
101
"BLD",1281,"KRN",101,"NM",0)
^9.68A^^0
"BLD",1281,"KRN",409.61,0)
409.61
"BLD",1281,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",1281,"KRN",771,0)
771
"BLD",1281,"KRN",870,0)
870
"BLD",1281,"KRN",8989.51,0)
8989.51
"BLD",1281,"KRN",8989.52,0)
8989.52
"BLD",1281,"KRN",8994,0)
8994
"BLD",1281,"KRN",8994,"NM",0)
^9.68A^4^3
"BLD",1281,"KRN",8994,"NM",1,0)
RMPF ELIG MSG^^0
"BLD",1281,"KRN",8994,"NM",3,0)
RMPFDEMOG^^0
"BLD",1281,"KRN",8994,"NM",4,0)
RMPFELIG^^0
"BLD",1281,"KRN",8994,"NM","B","RMPF ELIG MSG",1)

"BLD",1281,"KRN",8994,"NM","B","RMPFDEMOG",3)

"BLD",1281,"KRN",8994,"NM","B","RMPFELIG",4)

"BLD",1281,"KRN","B",.4,.4)

"BLD",1281,"KRN","B",.401,.401)

"BLD",1281,"KRN","B",.402,.402)

"BLD",1281,"KRN","B",.403,.403)

"BLD",1281,"KRN","B",.5,.5)

"BLD",1281,"KRN","B",.84,.84)

"BLD",1281,"KRN","B",3.6,3.6)

"BLD",1281,"KRN","B",3.8,3.8)

"BLD",1281,"KRN","B",9.2,9.2)

"BLD",1281,"KRN","B",9.8,9.8)

"BLD",1281,"KRN","B",19,19)

"BLD",1281,"KRN","B",19.1,19.1)

"BLD",1281,"KRN","B",101,101)

"BLD",1281,"KRN","B",409.61,409.61)

"BLD",1281,"KRN","B",771,771)

"BLD",1281,"KRN","B",870,870)

"BLD",1281,"KRN","B",8989.51,8989.51)

"BLD",1281,"KRN","B",8989.52,8989.52)

"BLD",1281,"KRN","B",8994,8994)

"BLD",1281,"PRET")

"BLD",1281,"QUES",0)
^9.62^^
"BLD",1281,"REQB",0)
^9.611^^
"FIA",791814)
ROES ELIGIBILITY CONFIRMATION
"FIA",791814,0)
^RMPF(791814,
"FIA",791814,0,0)
791814P
"FIA",791814,0,1)
^^f
"FIA",791814,0,10)

"FIA",791814,0,11)

"FIA",791814,0,"RLRO")

"FIA",791814,0,"VR")
3.0^ROES
"FIA",791814,791814)
0
"IX",791814,791814,"E",0)
791814^E^NEW CROSS REF ON DFN, DATE^R^^R^IR^I^791814^^^^^LS
"IX",791814,791814,"E",1)
S ^RMPF(791814,"E",$E(X(1),1,15),$E(X(2),1,20),DA)=""
"IX",791814,791814,"E",1.4)

"IX",791814,791814,"E",2)
K ^RMPF(791814,"E",$E(X(1),1,15),$E(X(2),1,20),DA)
"IX",791814,791814,"E",2.4)

"IX",791814,791814,"E",2.5)
K ^RMPF(791814,"E")
"IX",791814,791814,"E",11.1,0)
^.114IA^2^2
"IX",791814,791814,"E",11.1,1,0)
1^F^791814^.01^15^1^F
"IX",791814,791814,"E",11.1,2,0)
2^F^791814^.02^20^2^F
"KRN",3.8,55,-1)
0^1
"KRN",3.8,55,0)
RMPF ROES UPDATES (ASPS)^PU^n^^^^
"KRN",3.8,55,3)

"KRN",3.8,98,-1)
0^2
"KRN",3.8,98,0)
RMPF ROES UPDATES (PSAS)^PU^^^^^
"KRN",3.8,98,2,0)
^^1^1^3020826^
"KRN",3.8,98,2,1,0)
PSAS GROUP TO RECEIVE ELIGIBILITY REQUEST MESSAGES
"KRN",3.8,98,3)

"KRN",19,5448,-1)
0^11
"KRN",19,5448,0)
RMPF ROES3^ROES3 OPTION ACCESS^^B^^^^^^^^REMOTE ORDER/ENTRY SYSTEM
"KRN",19,5448,1,0)
^19.06^2^2^3020816^^^
"KRN",19,5448,1,1,0)
This is the option that allows user's to access the Delphi Executable that
"KRN",19,5448,1,2,0)
connects the user to the DDC web site from the desktop or CPRS Tools menu.
"KRN",19,5448,99.1)
59084,32701
"KRN",19,5448,"RPC",0)
^19.05P^15^15
"KRN",19,5448,"RPC",1,0)
XUS AV CODE
"KRN",19,5448,"RPC",2,0)
XUS SIGNON SETUP
"KRN",19,5448,"RPC",3,0)
XWB CREATE CONTEXT
"KRN",19,5448,"RPC",4,0)
XWB GET VARIABLE VALUE
"KRN",19,5448,"RPC",5,0)
DDR GETS ENTRY DATA
"KRN",19,5448,"RPC",6,0)
DDR LISTER
"KRN",19,5448,"RPC",7,0)
DDR FINDER
"KRN",19,5448,"RPC",8,0)
DDR KEY VALIDATOR
"KRN",19,5448,"RPC",9,0)
DDR GET DD HELP
"KRN",19,5448,"RPC",10,0)
DDR VALIDATOR
"KRN",19,5448,"RPC",11,0)
XUS AV HELP
"KRN",19,5448,"RPC",12,0)
XUS GET USER INFO
"KRN",19,5448,"RPC",13,0)
RMPFDEMOG
"KRN",19,5448,"RPC",14,0)
RMPFELIG
"KRN",19,5448,"RPC",15,0)
RMPF ELIG MSG
"KRN",19,5448,"U")
ROES3 OPTION ACCESS
"KRN",19,5456,-1)
0^19
"KRN",19,5456,0)
RMPFDE2^Display ROES3 Eligibility Requests^^R^^^^^^^^REMOTE ORDER/ENTRY SYSTEM
"KRN",19,5456,1,0)
^19.06^2^2^3030205^^^
"KRN",19,5456,1,1,0)
This option allows the processing of requests for
"KRN",19,5456,1,2,0)
eligibility determination from PSAS
"KRN",19,5456,25)
LIST^RMPFDE2(.ARRAY)
"KRN",19,5456,99.1)
59084,32701
"KRN",19,5456,"U")
DISPLAY ROES3 ELIGIBILITY REQU
"KRN",19,5458,-1)
0^20
"KRN",19,5458,0)
RMPFDE4^Auto Que of Eligibility Request Alerts^^R^^^^^^^^REMOTE ORDER/ENTRY SYSTEM
"KRN",19,5458,1,0)
^19.06^5^5^3020912^^^
"KRN",19,5458,1,1,0)
This is a ROES3 option that loops through the requests for eligibility 
"KRN",19,5458,1,2,0)
determinations from ASPS.  The alerts are sent to the requesting user
"KRN",19,5458,1,3,0)
and the RMPF ROES UPDATES (PSAS) mail group.  The alerts start after
"KRN",19,5458,1,4,0)
the request has been entered and not acted on within 7 days.  They are
"KRN",19,5458,1,5,0)
sent daily until acted upon by PSAS with an Edit, Reject, or Acceptance.
"KRN",19,5458,25)
START^RMPFDE4
"KRN",19,5458,"U")
AUTO QUE OF ELIGIBILITY REQUES
"KRN",8994,83,-1)
0^3
"KRN",8994,83,0)
RMPFDEMOG^START^RMPFRPC1^2^R^^^1
"KRN",8994,83,1,0)
^8994.01^2^2^3030905^^^
"KRN",8994,83,1,1,0)
Accepts the return array name containing predefined elements.
"KRN",8994,83,1,2,0)
These contain the address and other demographic information
"KRN",8994,83,2,0)
^8994.02A^1^1
"KRN",8994,83,2,1,0)
DFN^1^^1^1
"KRN",8994,83,2,1,1,0)
^8994.021^1^1^3030905^^^^
"KRN",8994,83,2,1,1,1,0)
DFN from local DPT file
"KRN",8994,83,2,"B","DFN",1)

"KRN",8994,83,2,"PARAMSEQ",1,1)

"KRN",8994,83,3,0)
^8994.03^21^21^3030905^^^
"KRN",8994,83,3,1,0)
Subscripted list of demographic variables
"KRN",8994,83,3,2,0)
0=DOD numeric and text
"KRN",8994,83,3,3,0)
1=name text
"KRN",8994,83,3,4,0)
2=SSN
"KRN",8994,83,3,5,0)
3=DOB numeric and text
"KRN",8994,83,3,6,0)
4=current address line 1
"KRN",8994,83,3,7,0)
5=current address line 2
"KRN",8994,83,3,8,0)
6=current address line 3
"KRN",8994,83,3,9,0)
7=current city
"KRN",8994,83,3,10,0)
8=current numeric and abbrev of state
"KRN",8994,83,3,11,0)
9=current zip
"KRN",8994,83,3,12,0)
10=temp start date numeric and text
"KRN",8994,83,3,13,0)
11=temp end dat4e numeric and text
"KRN",8994,83,3,14,0)
12=current phone
"KRN",8994,83,3,15,0)
13=eligibility status date numeric and text
"KRN",8994,83,3,16,0)
14=calculated eligibility
"KRN",8994,83,3,17,0)
15=eligibility status(V^Verified)
"KRN",8994,83,3,18,0)
16=sensitive record(1 or "")
"KRN",8994,83,3,19,0)
17=error message
"KRN",8994,83,3,20,0)
18=primary eligibility
"KRN",8994,83,3,21,0)
19=priority group
"KRN",8994,84,-1)
0^4
"KRN",8994,84,0)
RMPFELIG^START^RMPFRPC0^2^R^^^1
"KRN",8994,84,1,0)
^^1^1^3020717^
"KRN",8994,84,1,1,0)
Accepts the return array name containing pre-defined elements
"KRN",8994,84,2,0)
^8994.02A^1^1
"KRN",8994,84,2,1,0)
DFN^1^^1^1
"KRN",8994,84,2,1,1,0)
^^1^1^3020717^
"KRN",8994,84,2,1,1,1,0)
DFN from local DPT file
"KRN",8994,84,2,"B","DFN",1)

"KRN",8994,84,2,"PARAMSEQ",1,1)

"KRN",8994,84,3,0)
^^8^8^3020717^
"KRN",8994,84,3,1,0)
ARRAY(0)=DOD numeric and text
"KRN",8994,84,3,2,0)
ARRAY(1)=eligibility status date (fm) and text
"KRN",8994,84,3,3,0)
ARRAY(2)=calculated ROES3 eligibility
"KRN",8994,84,3,4,0)
ARRAY(3)=eligibility status(V^Verified)
"KRN",8994,84,3,5,0)
ARRAY(4)=sensitive record(1 or "")
"KRN",8994,84,3,6,0)
ARRAY(5)=error msg
"KRN",8994,84,3,7,0)
ARRAY(6)=primary eligibility
"KRN",8994,84,3,8,0)
ARRAY(7)=priority group number
"KRN",8994,85,-1)
0^1
"KRN",8994,85,0)
RMPF ELIG MSG^START^RMPFRPC3^1^R^^^0
"KRN",8994,85,1,0)
^8994.01^2^2^3020826^^
"KRN",8994,85,1,1,0)
This is the utility to send the request for eligibility
"KRN",8994,85,1,2,0)
confirmation from PSAS
"KRN",8994,85,2,0)
^8994.02A^5^4
"KRN",8994,85,2,1,0)
DUZ^1^10^1^1
"KRN",8994,85,2,1,1,0)
^8994.021^1^1^3020826^^
"KRN",8994,85,2,1,1,1,0)
DUZ of the user sending the message
"KRN",8994,85,2,3,0)
GRP^1^30^1^2
"KRN",8994,85,2,3,1,0)
^^1^1^3020826^
"KRN",8994,85,2,3,1,1,0)
Mail group to send to
"KRN",8994,85,2,4,0)
SUBJ^1^30^1^3
"KRN",8994,85,2,4,1,0)
^^1^1^3020826^
"KRN",8994,85,2,4,1,1,0)
Subject for message
"KRN",8994,85,2,5,0)
RMPFARR^2^500^^4
"KRN",8994,85,2,5,1,0)
^^1^1^3020826^
"KRN",8994,85,2,5,1,1,0)
This is the message text
"KRN",8994,85,2,"B","DUZ",1)

"KRN",8994,85,2,"B","GRP",3)

"KRN",8994,85,2,"B","RMPFARR",5)

"KRN",8994,85,2,"B","SUBJ",4)

"KRN",8994,85,2,"PARAMSEQ",1,1)

"KRN",8994,85,2,"PARAMSEQ",2,3)

"KRN",8994,85,2,"PARAMSEQ",3,4)

"KRN",8994,85,2,"PARAMSEQ",4,5)

"KRN",8994,85,3,0)
^8994.03^1^1^3020826^^
"KRN",8994,85,3,1,0)
It returns the mail message number or an error.
"MBREQ")
0
"ORD",11,3.8)
3.8;11;;;MAILG^XPDTA1;MAILGF1^XPDIA1;MAILGE1^XPDIA1;MAILGF2^XPDIA1;;MAILGDEL^XPDIA1(%)
"ORD",11,3.8,0)
MAIL GROUP
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",145,-1)
1^1
"PKG",145,0)
REMOTE ORDER/ENTRY SYSTEM^RMPF^Remote Order/Entry System
"PKG",145,1,0)
3^^3^3^2950527^^^^
"PKG",145,1,1,0)
This system allows users of VA Medical Facilities to electronically
"PKG",145,1,2,0)
order products and services from the Denver Distribution Center
"PKG",145,1,3,0)
in Denver, Colorado.
"PKG",145,5)
SALT LAKE CITY
"PKG",145,7)
^^I
"PKG",145,20,0)
^9.402P^^
"PKG",145,22,0)
^9.49I^1^1
"PKG",145,22,1,0)
3.0^3030926
"PKG",145,22,1,1,0)
^^169^169^3030926
"PKG",145,22,1,1,1,0)
 
"PKG",145,22,1,1,2,0)
The Remote Order Entry System (ROES) version 3.0 was developed
"PKG",145,22,1,1,3,0)
at the VA Denver Distribution Center(DDC).  It is a changeover to
"PKG",145,22,1,1,4,0)
a GUI(windows) based product that allows ordering of goods and
"PKG",145,22,1,1,5,0)
services over the internet and greatly reduces the amount of 
"PKG",145,22,1,1,6,0)
maintenance and support at the local sites.  All of the product
"PKG",145,22,1,1,7,0)
and service information will be kept and maintained at the
"PKG",145,22,1,1,8,0)
DDC, with real-time information on orders and inventory.
"PKG",145,22,1,1,9,0)
  
"PKG",145,22,1,1,10,0)
There are 2 new GUI applications: ROES3.exe and ROES3DeskTop.exe.
"PKG",145,22,1,1,11,0)
  
"PKG",145,22,1,1,12,0)
*****Please refer to the INSTALLATION GUIDE and TECHNICAL MANUAL
"PKG",145,22,1,1,13,0)
for installation and setup directions *****
"PKG",145,22,1,1,14,0)
  
"PKG",145,22,1,1,15,0)
(1) ROES3.exe is designed to be attached to the CPRS Tools Menu. This
"PKG",145,22,1,1,16,0)
application uses the currently selected patient, looks up the current
"PKG",145,22,1,1,17,0)
eligibility information and connects to the DDC ROES 3 web site.  If an
"PKG",145,22,1,1,18,0)
accepted eligibility is not found, the user selects a proposed eligibility
"PKG",145,22,1,1,19,0)
and triggers the sending of the request to PSAS for approval.
"PKG",145,22,1,1,20,0)
  
"PKG",145,22,1,1,21,0)
(2) ROES3DeskTop.exe is designed to be referenced from the user's 
"PKG",145,22,1,1,22,0)
desktop, as it is not tied to a particular patient.  It is used for
"PKG",145,22,1,1,23,0)
station orders, parameter setting, and certain updates to already
"PKG",145,22,1,1,24,0)
existing patient orders.
"PKG",145,22,1,1,25,0)
  
"PKG",145,22,1,1,26,0)
NOIS references addressed in this patch
"PKG",145,22,1,1,27,0)
=======================================
"PKG",145,22,1,1,28,0)
There are no NOIS or E3R references
"PKG",145,22,1,1,29,0)
  
"PKG",145,22,1,1,30,0)
Test Sites
"PKG",145,22,1,1,31,0)
==========
"PKG",145,22,1,1,32,0)
Denver
"PKG",145,22,1,1,33,0)
New York
"PKG",145,22,1,1,34,0)
Columbia
"PKG",145,22,1,1,35,0)
Mountain Home
"PKG",145,22,1,1,36,0)
Atlanta
"PKG",145,22,1,1,37,0)
Nashville
"PKG",145,22,1,1,38,0)
Washington DC
"PKG",145,22,1,1,39,0)
  
"PKG",145,22,1,1,40,0)
FTP Software and Documentation
"PKG",145,22,1,1,41,0)
==============================
"PKG",145,22,1,1,42,0)
  
"PKG",145,22,1,1,43,0)
  
"PKG",145,22,1,1,44,0)
This patch contains the following enhancements:
"PKG",145,22,1,1,45,0)
===============================================
"PKG",145,22,1,1,46,0)
 
"PKG",145,22,1,1,47,0)
 
"PKG",145,22,1,1,48,0)
 
"PKG",145,22,1,1,49,0)
 ROUTINE SUMMARY
"PKG",145,22,1,1,50,0)
================
"PKG",145,22,1,1,51,0)
The second line of all listed routines will look like:
"PKG",145,22,1,1,52,0)
 <tab> ;;3.0;REMOTE ORDER ENTRY SYSTEM;;
"PKG",145,22,1,1,53,0)
  
"PKG",145,22,1,1,54,0)
CHECK^XTSUMBLD results:
"PKG",145,22,1,1,55,0)
  
"PKG",145,22,1,1,56,0)
RMPFRPC0     checksum = 14317184
"PKG",145,22,1,1,57,0)
RMPFRPC1     checksum = 4846679
"PKG",145,22,1,1,58,0)
RMPFRPC3     checksum = 2795744
"PKG",145,22,1,1,59,0)
RMPFDE2      checksum = 4775274
"PKG",145,22,1,1,60,0)
RMPFDE3      checksum = 6656730
"PKG",145,22,1,1,61,0)
RMPFDE4      checksum = 1968602
"PKG",145,22,1,1,62,0)
  
"PKG",145,22,1,1,63,0)
Technical Description
"PKG",145,22,1,1,64,0)
=====================
"PKG",145,22,1,1,65,0)
  
"PKG",145,22,1,1,66,0)
1. New file introduced with this patch:
"PKG",145,22,1,1,67,0)
  
"PKG",145,22,1,1,68,0)
  The ROES ELIGIBILITY CONFIRMATION file (#791814) is introduced to
"PKG",145,22,1,1,69,0)
  store the eligibility request information.
"PKG",145,22,1,1,70,0)
  
"PKG",145,22,1,1,71,0)
2. New VistA Options introduced with this patch:
"PKG",145,22,1,1,72,0)
 
"PKG",145,22,1,1,73,0)
   a) RMPF ROES3 is used to establish a context and allow access to
"PKG",145,22,1,1,74,0)
     the 2 new executables.  It must be assigned to all users of 
"PKG",145,22,1,1,75,0)
     the CPRS Tools or DeskTop applications.
"PKG",145,22,1,1,76,0)
 
"PKG",145,22,1,1,77,0)
   b) RMPFDE2 is used by PSAS to accept/edit/reject eligibility for
"PKG",145,22,1,1,78,0)
     ROES3 orders.  This is a standard VistA option and must be
"PKG",145,22,1,1,79,0)
     placed on a user's menu.
"PKG",145,22,1,1,80,0)
 
"PKG",145,22,1,1,81,0)
   c) RMPFDE4 is the option to be scheduled to remind all PSAS users
"PKG",145,22,1,1,82,0)
     in the RMPF ROES UPDATES (PSAS) mail group that requests for
"PKG",145,22,1,1,83,0)
     eligibility approval are waiting for approval.
"PKG",145,22,1,1,84,0)
 
"PKG",145,22,1,1,85,0)
3. New VistA Remote Procedures introduced with this patch:
"PKG",145,22,1,1,86,0)
 
"PKG",145,22,1,1,87,0)
   a) RMPFDEMOG collects demographic data for transmission to the DDC
"PKG",145,22,1,1,88,0)
     for the site, user and patient.
"PKG",145,22,1,1,89,0)
 
"PKG",145,22,1,1,90,0)
   b) RMPFELIG calculates the approved ROES 3 eligibility.
"PKG",145,22,1,1,91,0)
 
"PKG",145,22,1,1,92,0)
   c) RMPF ELIG MSG sends the suggested eligibility to PSAS for approval.
"PKG",145,22,1,1,93,0)
 
"PKG",145,22,1,1,94,0)
4. Mail groups in ROES 3
"PKG",145,22,1,1,95,0)
 
"PKG",145,22,1,1,96,0)
   a) The ROES 2 mail group RMPF ROES UPDATES (ASPS) continues to be
"PKG",145,22,1,1,97,0)
      used, only this time it is to alert audiologists when a request
"PKG",145,22,1,1,98,0)
      for eligibility approval has been acted upon.
"PKG",145,22,1,1,99,0)
 
"PKG",145,22,1,1,100,0)
   b) The ROES 2 mail group RMPF ROES UPDATES (PSAS) continues to be
"PKG",145,22,1,1,101,0)
      used in ROES 3 to receive notification that a request for eligibility
"PKG",145,22,1,1,102,0)
      is waiting to be processed.
"PKG",145,22,1,1,103,0)
 
"PKG",145,22,1,1,104,0)
Installation Instructions:
"PKG",145,22,1,1,105,0)
==========================
"PKG",145,22,1,1,106,0)
  
"PKG",145,22,1,1,107,0)
This patch was created with Kernel V8 KIDS.
"PKG",145,22,1,1,108,0)
***Please refer to the complete instructions in the Installation Guide***
"PKG",145,22,1,1,109,0)
  
"PKG",145,22,1,1,110,0)
1. This is a completely new installation, so it will not affect any
"PKG",145,22,1,1,111,0)
current ROES 2 users or others on the system. It can be run parallel
"PKG",145,22,1,1,112,0)
to the existing ROES 2 system, until ROES 2 is no longer supported.
"PKG",145,22,1,1,113,0)
You do not need to restrict users from signing on or to lock any
"PKG",145,22,1,1,114,0)
options.
"PKG",145,22,1,1,115,0)
  
"PKG",145,22,1,1,116,0)
2. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu.
"PKG",145,22,1,1,117,0)
This option will load the KIDS package onto your system.
"PKG",145,22,1,1,118,0)
                           
"PKG",145,22,1,1,119,0)
3. You DO NOT need to stop Taskman or the background filers. None
"PKG",145,22,1,1,120,0)
of the routines require mapping, so mapping does not need to be
"PKG",145,22,1,1,121,0)
disabled.
"PKG",145,22,1,1,122,0)
 
"PKG",145,22,1,1,123,0)
4. Using the Kernel Installation and Distribution System menu
"PKG",145,22,1,1,124,0)
(KIDS), you may choose the following options prior to installing
"PKG",145,22,1,1,125,0)
this patch:
"PKG",145,22,1,1,126,0)
 
"PKG",145,22,1,1,127,0)
  a) All routines are new, so there should be no need to Backup
"PKG",145,22,1,1,128,0)
     the Transport Global.
"PKG",145,22,1,1,129,0)
 
"PKG",145,22,1,1,130,0)
  b) Again, this is an all new module, so there should be no
"PKG",145,22,1,1,131,0)
     need to Compare the Transport Global to the Current System.
"PKG",145,22,1,1,132,0)
 
"PKG",145,22,1,1,133,0)
  c) Verify Checksums in the Transport Global.  This option will
"PKG",145,22,1,1,134,0)
     allow you to ensure the integrity of the routines that are
"PKG",145,22,1,1,135,0)
     in the Transport Global.
"PKG",145,22,1,1,136,0)
 
"PKG",145,22,1,1,137,0)
5. Use the 'Install Package(s)' option under the 'Installation'
"PKG",145,22,1,1,138,0)
   menu.
"PKG",145,22,1,1,139,0)
  
"PKG",145,22,1,1,140,0)
   a) Select INSTALL NAME: ROES 3.0
"PKG",145,22,1,1,141,0)
 
"PKG",145,22,1,1,142,0)
   b) When prompted 'Want KIDS to Rebuild Menu Trees Upon
"PKG",145,22,1,1,143,0)
      completion of install?' YES// respond "NO"
"PKG",145,22,1,1,144,0)
 
"PKG",145,22,1,1,145,0)
   c) When prompted 'Want KIDS to INHIBIT LOGONs during the
"PKG",145,22,1,1,146,0)
      install?' YES// respond "NO"
"PKG",145,22,1,1,147,0)
 
"PKG",145,22,1,1,148,0)
   d) When prompted 'Want to DISABLE Scheduled Options, Menu
"PKG",145,22,1,1,149,0)
      Options and Protocols?' NO// respond "NO"
"PKG",145,22,1,1,150,0)
 
"PKG",145,22,1,1,151,0)
   e) When prompted 'Want to MOVE routines to other CPUs?' YES//
"PKG",145,22,1,1,152,0)
      respond "NO"
"PKG",145,22,1,1,153,0)
  
"PKG",145,22,1,1,154,0)
6. Confirm the presence of the two mail groups described under 'Technical
"PKG",145,22,1,1,155,0)
   Description' and enter the names of the respective mail group
"PKG",145,22,1,1,156,0)
   coordinators if necessary.
"PKG",145,22,1,1,157,0)
 
"PKG",145,22,1,1,158,0)
7. Unzip the ROES3.ZIP file containing the 2 new executables: 
"PKG",145,22,1,1,159,0)
   ROES3.exe and ROES3DeskTop.exe
"PKG",145,22,1,1,160,0)
   They can be placed on the network according to local policy,
"PKG",145,22,1,1,161,0)
   in a place where they can be referenced from CPRS Tools and
"PKG",145,22,1,1,162,0)
   from the user's workstation.
"PKG",145,22,1,1,163,0)
  
"PKG",145,22,1,1,164,0)
8. Assign the Broker option RMPF ROES3 to users of either application.
"PKG",145,22,1,1,165,0)
 
"PKG",145,22,1,1,166,0)
9. Add the application ROES3.exe to the CPRS Tools menu.
"PKG",145,22,1,1,167,0)
 
"PKG",145,22,1,1,168,0)
10. Add a link to the ROES3DeskTop application on the selected user's
"PKG",145,22,1,1,169,0)
   workstation desktop.
"PKG",145,22,1,"PAH",0)
^9.4901^1^1
"PKG",145,22,1,"PAH",1,0)
1^3030923^988
"PKG",145,22,1,"PAH",1,1,0)
^^169^169^3030923
"PKG",145,22,1,"PAH",1,1,1,0)
 
"PKG",145,22,1,"PAH",1,1,2,0)
The Remote Order Entry System (ROES) version 3.0 was developed
"PKG",145,22,1,"PAH",1,1,3,0)
at the VA Denver Distribution Center(DDC).  It is a changeover to
"PKG",145,22,1,"PAH",1,1,4,0)
a GUI(windows) based product that allows ordering of goods and
"PKG",145,22,1,"PAH",1,1,5,0)
services over the internet and greatly reduces the amount of 
"PKG",145,22,1,"PAH",1,1,6,0)
maintenance and support at the local sites.  All of the product
"PKG",145,22,1,"PAH",1,1,7,0)
and service information will be kept and maintained at the
"PKG",145,22,1,"PAH",1,1,8,0)
DDC, with real-time information on orders and inventory.
"PKG",145,22,1,"PAH",1,1,9,0)
  
"PKG",145,22,1,"PAH",1,1,10,0)
There are 2 new GUI applications: ROES3.exe and ROES3DeskTop.exe.
"PKG",145,22,1,"PAH",1,1,11,0)
  
"PKG",145,22,1,"PAH",1,1,12,0)
*****Please refer to the INSTALLATION GUIDE and TECHNICAL MANUAL
"PKG",145,22,1,"PAH",1,1,13,0)
for installation and setup directions *****
"PKG",145,22,1,"PAH",1,1,14,0)
  
"PKG",145,22,1,"PAH",1,1,15,0)
(1) ROES3.EXE is designed to be attached to the CPRS Tools Menu. This
"PKG",145,22,1,"PAH",1,1,16,0)
application uses the currently selected patient, looks up the current
"PKG",145,22,1,"PAH",1,1,17,0)
eligibility information and connects to the DDC ROES 3 web site.  If an
"PKG",145,22,1,"PAH",1,1,18,0)
accepted eligibility is not found, the user selects a proposed eligibility
"PKG",145,22,1,"PAH",1,1,19,0)
and triggers the sending of the request to PSAS for approval.
"PKG",145,22,1,"PAH",1,1,20,0)
  
"PKG",145,22,1,"PAH",1,1,21,0)
(2) ROES3DeskTop.exe is designed to be referenced from the user's 
"PKG",145,22,1,"PAH",1,1,22,0)
desktop, as it is not tied to a particular patient.  It is used for
"PKG",145,22,1,"PAH",1,1,23,0)
station orders, parameter setting, and certain updates to already
"PKG",145,22,1,"PAH",1,1,24,0)
existing patient orders.
"PKG",145,22,1,"PAH",1,1,25,0)
  
"PKG",145,22,1,"PAH",1,1,26,0)
NOIS references addressed in this patch
"PKG",145,22,1,"PAH",1,1,27,0)
=======================================
"PKG",145,22,1,"PAH",1,1,28,0)
There are no NOIS or E3R references
"PKG",145,22,1,"PAH",1,1,29,0)
  
"PKG",145,22,1,"PAH",1,1,30,0)
Test Sites
"PKG",145,22,1,"PAH",1,1,31,0)
==========
"PKG",145,22,1,"PAH",1,1,32,0)
Denver
"PKG",145,22,1,"PAH",1,1,33,0)
New York
"PKG",145,22,1,"PAH",1,1,34,0)
Columbia
"PKG",145,22,1,"PAH",1,1,35,0)
Mountain Home
"PKG",145,22,1,"PAH",1,1,36,0)
Atlanta
"PKG",145,22,1,"PAH",1,1,37,0)
Nashville
"PKG",145,22,1,"PAH",1,1,38,0)
Washington DC
"PKG",145,22,1,"PAH",1,1,39,0)
  
"PKG",145,22,1,"PAH",1,1,40,0)
FTP Software and Documentation
"PKG",145,22,1,"PAH",1,1,41,0)
==============================
"PKG",145,22,1,"PAH",1,1,42,0)
  
"PKG",145,22,1,"PAH",1,1,43,0)
  
"PKG",145,22,1,"PAH",1,1,44,0)
This patch contains the following enhancements:
"PKG",145,22,1,"PAH",1,1,45,0)
===============================================
"PKG",145,22,1,"PAH",1,1,46,0)
 
"PKG",145,22,1,"PAH",1,1,47,0)
 
"PKG",145,22,1,"PAH",1,1,48,0)
 
"PKG",145,22,1,"PAH",1,1,49,0)
 ROUTINE SUMMARY
"PKG",145,22,1,"PAH",1,1,50,0)
================
"PKG",145,22,1,"PAH",1,1,51,0)
The second line of all listed routines will look like:
"PKG",145,22,1,"PAH",1,1,52,0)
 <tab> ;;3.0;REMOTE ORDER ENTRY SYSTEM;**1**;
"PKG",145,22,1,"PAH",1,1,53,0)
  
"PKG",145,22,1,"PAH",1,1,54,0)
CHECK^XTSUMBLD results:
"PKG",145,22,1,"PAH",1,1,55,0)
  
"PKG",145,22,1,"PAH",1,1,56,0)
RMPFRPC0
"PKG",145,22,1,"PAH",1,1,57,0)
RMPFRPC1
"PKG",145,22,1,"PAH",1,1,58,0)
RMPFRPC3
"PKG",145,22,1,"PAH",1,1,59,0)
RMPFDE2
"PKG",145,22,1,"PAH",1,1,60,0)
RMPFDE3
"PKG",145,22,1,"PAH",1,1,61,0)
RMPFDE4
"PKG",145,22,1,"PAH",1,1,62,0)
  
"PKG",145,22,1,"PAH",1,1,63,0)
Technical Description
"PKG",145,22,1,"PAH",1,1,64,0)
=====================
"PKG",145,22,1,"PAH",1,1,65,0)
  
"PKG",145,22,1,"PAH",1,1,66,0)
1. New file introduced with this patch:
"PKG",145,22,1,"PAH",1,1,67,0)
  
"PKG",145,22,1,"PAH",1,1,68,0)
  The ROES ELIGIBILITY CONFIRMATION file (#791814) is introduced to
"PKG",145,22,1,"PAH",1,1,69,0)
  store the eligibility request information. (During beta testing, this
"PKG",145,22,1,"PAH",1,1,70,0)
  was initially stored in the ^XTMP("RMPF"_ssn, global, but was not
"PKG",145,22,1,"PAH",1,1,71,0)
  approved for the length of elegibility retention that was needed.  The
"PKG",145,22,1,"PAH",1,1,72,0)
  post install routine RMPFPOST moves all currently stored data from the
"PKG",145,22,1,"PAH",1,1,73,0)
  XTMP global to this new global location.)
"PKG",145,22,1,"PAH",1,1,74,0)
  
"PKG",145,22,1,"PAH",1,1,75,0)
2. New VistA Options introduced with this patch:
"PKG",145,22,1,"PAH",1,1,76,0)
 
"PKG",145,22,1,"PAH",1,1,77,0)
   a) RMPF ROES3 is used to establish a context and allow access to
"PKG",145,22,1,"PAH",1,1,78,0)
     the 2 new executables.  It must be assigned to all users of 
"PKG",145,22,1,"PAH",1,1,79,0)
     the CPRS Tools or DeskTop applications.
"PKG",145,22,1,"PAH",1,1,80,0)
 
"PKG",145,22,1,"PAH",1,1,81,0)
   b) RMPFDE2 is used by PSAS to accept/edit/reject eligibility for
"PKG",145,22,1,"PAH",1,1,82,0)
     ROES3 orders.  This is a standard VistA option and must be
"PKG",145,22,1,"PAH",1,1,83,0)
     placed on a user's menu.
"PKG",145,22,1,"PAH",1,1,84,0)
 
"PKG",145,22,1,"PAH",1,1,85,0)
   c) RMPFDE4 is the option to be scheduled to remind all PSAS users
"PKG",145,22,1,"PAH",1,1,86,0)
     in the RMPF ROES UPDATES (PSAS) mail group that requests for
"PKG",145,22,1,"PAH",1,1,87,0)
     eligibility approval are waiting for approval.
"PKG",145,22,1,"PAH",1,1,88,0)
 
"PKG",145,22,1,"PAH",1,1,89,0)
3. New VistA Remote Procedures introduced with this patch:
"PKG",145,22,1,"PAH",1,1,90,0)
 
"PKG",145,22,1,"PAH",1,1,91,0)
   a) RMPFDEMOG collects demographic data for transmission to the DDC
"PKG",145,22,1,"PAH",1,1,92,0)
     for the site for the site, user and patient.
"PKG",145,22,1,"PAH",1,1,93,0)
 
"PKG",145,22,1,"PAH",1,1,94,0)
   b) RMPFELIG calculates the approved ROES 3 eligibility.
"PKG",145,22,1,"PAH",1,1,95,0)
 
"PKG",145,22,1,"PAH",1,1,96,0)
   c) RMPF ELIG MSG sends the suggested eligibility to PSAS for approval.
"PKG",145,22,1,"PAH",1,1,97,0)
 
"PKG",145,22,1,"PAH",1,1,98,0)
4. Mail groups in ROES 3
"PKG",145,22,1,"PAH",1,1,99,0)
 
"PKG",145,22,1,"PAH",1,1,100,0)
   a) The ROES 2 mail group RMPF ROES UPDATES (ASPS) continues to be
"PKG",145,22,1,"PAH",1,1,101,0)
      used, only this time it is to alert audiologists when a request
"PKG",145,22,1,"PAH",1,1,102,0)
      for eligibility approval has been acted upon.
"PKG",145,22,1,"PAH",1,1,103,0)
 
"PKG",145,22,1,"PAH",1,1,104,0)
   b) The ROES 2 mail group RMPF ROES UPDATES (PSAS) continues to be
"PKG",145,22,1,"PAH",1,1,105,0)
      used in ROES 3 to receive notification that a requst for eiligibility
"PKG",145,22,1,"PAH",1,1,106,0)
      is waiting to be processed.
"PKG",145,22,1,"PAH",1,1,107,0)
 
"PKG",145,22,1,"PAH",1,1,108,0)
Installation Instructions:
"PKG",145,22,1,"PAH",1,1,109,0)
==========================
"PKG",145,22,1,"PAH",1,1,110,0)
  
"PKG",145,22,1,"PAH",1,1,111,0)
This patch was created with Kernel V8 KIDS.
"PKG",145,22,1,"PAH",1,1,112,0)
***Please refer to the complete instructions in the Installation Guide***
"PKG",145,22,1,"PAH",1,1,113,0)
  
"PKG",145,22,1,"PAH",1,1,114,0)
1. This is a completely new installation, so it will not affect any
"PKG",145,22,1,"PAH",1,1,115,0)
current ROES 2 users or others on the system. It can be run parallel
"PKG",145,22,1,"PAH",1,1,116,0)
to the existing ROES 2 system, until ROES 2 is no longer supported.
"PKG",145,22,1,"PAH",1,1,117,0)
You do not need to restrict users from signing on or to lock any
"PKG",145,22,1,"PAH",1,1,118,0)
options.
"PKG",145,22,1,"PAH",1,1,119,0)
  
"PKG",145,22,1,"PAH",1,1,120,0)
2. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu.
"PKG",145,22,1,"PAH",1,1,121,0)
This option will load the KIDS package onto your system.
"PKG",145,22,1,"PAH",1,1,122,0)
                           
"PKG",145,22,1,"PAH",1,1,123,0)
3. You DO NOT need to stop Taskman or the background filers. None
"PKG",145,22,1,"PAH",1,1,124,0)
of the routines require mapping, so mapping does not need to be
"PKG",145,22,1,"PAH",1,1,125,0)
disabled.
"PKG",145,22,1,"PAH",1,1,126,0)
 
"PKG",145,22,1,"PAH",1,1,127,0)
4. Using the Kernel Installation and Distribution System menu
"PKG",145,22,1,"PAH",1,1,128,0)
(KIDS), you may choose the following options prior to installing
"PKG",145,22,1,"PAH",1,1,129,0)
this patch:
"PKG",145,22,1,"PAH",1,1,130,0)
 
"PKG",145,22,1,"PAH",1,1,131,0)
  a) All routines are new, so there should be no need to Backup
"PKG",145,22,1,"PAH",1,1,132,0)
     the Transport Global.
"PKG",145,22,1,"PAH",1,1,133,0)
 
"PKG",145,22,1,"PAH",1,1,134,0)
  b) Again, this is an all new module, so there should be no
"PKG",145,22,1,"PAH",1,1,135,0)
     need to Compare the Transport Global to the Current System.
"PKG",145,22,1,"PAH",1,1,136,0)
 
"PKG",145,22,1,"PAH",1,1,137,0)
  c) Verify Checksums in the Transport Global.  This option will
"PKG",145,22,1,"PAH",1,1,138,0)
     allow you to ensure the integrity of the routines that are
"PKG",145,22,1,"PAH",1,1,139,0)
     in the Transport Global.
"PKG",145,22,1,"PAH",1,1,140,0)
 
"PKG",145,22,1,"PAH",1,1,141,0)
5. Use the 'Install Package(s)' option under the 'Installation'
"PKG",145,22,1,"PAH",1,1,142,0)
   menu.
"PKG",145,22,1,"PAH",1,1,143,0)
  
"PKG",145,22,1,"PAH",1,1,144,0)
   a) Select INSTALL NAME: RMPF*3.0*1
"PKG",145,22,1,"PAH",1,1,145,0)
 
"PKG",145,22,1,"PAH",1,1,146,0)
   b) When prompted 'Want KIDS to Rebuild Menu Trees Upon
"PKG",145,22,1,"PAH",1,1,147,0)
      completion of install?' YES// respond "NO"
"PKG",145,22,1,"PAH",1,1,148,0)
 
"PKG",145,22,1,"PAH",1,1,149,0)
   c) When prompted 'Want KIDS to INHIBIT LOGONs during the
"PKG",145,22,1,"PAH",1,1,150,0)
      install?' YES// respond "NO"
"PKG",145,22,1,"PAH",1,1,151,0)
 
"PKG",145,22,1,"PAH",1,1,152,0)
   d) When prompted 'Want to DISABLE Scheduled Options, Menu
"PKG",145,22,1,"PAH",1,1,153,0)
      Options and Protocols?' NO// respond "NO"
"PKG",145,22,1,"PAH",1,1,154,0)
 
"PKG",145,22,1,"PAH",1,1,155,0)
   e) When prompted 'Want to MOVE routines to other CPUs?' YES//
"PKG",145,22,1,"PAH",1,1,156,0)
      respond "NO"
"PKG",145,22,1,"PAH",1,1,157,0)
  
"PKG",145,22,1,"PAH",1,1,158,0)
6. Unzip the ROES3.zip file containing the 2 new executables: 
"PKG",145,22,1,"PAH",1,1,159,0)
   ROES3.EXE and ROES3DeskTop.exe
"PKG",145,22,1,"PAH",1,1,160,0)
   They can be placed on the network according to local policy,
"PKG",145,22,1,"PAH",1,1,161,0)
   in a place where they can be referenced from CPRS Tools and
"PKG",145,22,1,"PAH",1,1,162,0)
   from the user's workstation.
"PKG",145,22,1,"PAH",1,1,163,0)
  
"PKG",145,22,1,"PAH",1,1,164,0)
7. Assign the Broker option RMPF ROES3 to users of either application.
"PKG",145,22,1,"PAH",1,1,165,0)
 
"PKG",145,22,1,"PAH",1,1,166,0)
8. Add the application ROES3.exe to the CPRS Tools menu.
"PKG",145,22,1,"PAH",1,1,167,0)
 
"PKG",145,22,1,"PAH",1,1,168,0)
9. Add a link to the ROES3DeskTop application on the selected user's
"PKG",145,22,1,"PAH",1,1,169,0)
   workstation desktop.
"PKG",145,22,1,"PAH","B",1,1)

"PKG",145,"DEV")
KIMBERLY A. WHORTON - DDC
"PKG",145,"VERSION")
3.0
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
6
"RTN","RMPFDE2")
0^36^B16366501
"RTN","RMPFDE2",1,0)
RMPFDE2 ;DDC/PJU - R3 DISPLAY ELIG REQUESTS ;2/14/03
"RTN","RMPFDE2",2,0)
 ;;3.0;REMOTE ORDER/EDTRY SYSTEM;;3/01/03
"RTN","RMPFDE2",3,0)
 ;SETUP OPTION RMPFDE2 IN THE OPTION FILE TO ACCESS THIS ROUTINE.
"RTN","RMPFDE2",4,0)
LIST(RMLIST)       ;FUNCTION RETURNING LIST OF ELIG AWAITING APPROVAL IN RMLIST
"RTN","RMPFDE2",5,0)
 ;TAKE FROM ^RMPF(791814,"C",2,DA)
"RTN","RMPFDE2",6,0)
 ;RMPFVFLG = 1 to see CONT/Actions,, 0 to list w/o interaction
"RTN","RMPFDE2",7,0)
 ;ND=node,TT=line num, CT=counter,NM=DFN name,EL=sugg elig, RD=request date
"RTN","RMPFDE2",8,0)
 ;RQ=REQUESTER DUZ, RN=REQUESTER NAME, RMPFX is selected node for action
"RTN","RMPFDE2",9,0)
 N CT,DFN,EL,EXIT,I,IEN,NM,RD,RN,RMMSG,RMPFX,RQ,S0,S1,S2,SSN,TT,Y
"RTN","RMPFDE2",10,0)
REPT K RMLIST,RMPFS1 S RMPFVFLG=1,EXIT=0
"RTN","RMPFDE2",11,0)
 D GETLIST
"RTN","RMPFDE2",12,0)
 D SORT
"RTN","RMPFDE2",13,0)
 G:'$G(TT) END ;no entries left
"RTN","RMPFDE2",14,0)
 G END:EXIT=1 ;chose quit
"RTN","RMPFDE2",15,0)
 G REPT
"RTN","RMPFDE2",16,0)
END K RMLIST,RMPFS1,RMPFVFLG,VADM,VAERR Q
"RTN","RMPFDE2",17,0)
 ;
"RTN","RMPFDE2",18,0)
GETLIST ;
"RTN","RMPFDE2",19,0)
 S (CT,IEN,TT)=0,RMPFS1(0)=""
"RTN","RMPFDE2",20,0)
L1 S IEN=$O(^RMPF(791814,"C",2,IEN))
"RTN","RMPFDE2",21,0)
 Q:'IEN
"RTN","RMPFDE2",22,0)
 I '$D(^RMPF(791814,IEN)) D  G L1 ;BAD ENTRY IN XREF
"RTN","RMPFDE2",23,0)
 .K ^RMPF(791814,"C",2,IEN)
"RTN","RMPFDE2",24,0)
 S S0=$G(^RMPF(791814,IEN,0))
"RTN","RMPFDE2",25,0)
 S S1=$G(^RMPF(791814,IEN,1))
"RTN","RMPFDE2",26,0)
 S S2=$G(^RMPF(791814,IEN,2))
"RTN","RMPFDE2",27,0)
 S DFN=$P(S0,U,1)
"RTN","RMPFDE2",28,0)
 D DEM^VADPT
"RTN","RMPFDE2",29,0)
 G:$G(VAERR) L1 ;error
"RTN","RMPFDE2",30,0)
 S NM=VADM(1)
"RTN","RMPFDE2",31,0)
 S SSN=$P(VADM(2),U,1)
"RTN","RMPFDE2",32,0)
 S EL=$P(S1,U,1) ;suggested eligibility
"RTN","RMPFDE2",33,0)
 S RMMSG=$P(S1,U,2) ;msg #
"RTN","RMPFDE2",34,0)
 S RD=$P(S0,U,2) ;REQUEST date
"RTN","RMPFDE2",35,0)
 S RQ=$P(S0,U,3) ;requestor DUZ
"RTN","RMPFDE2",36,0)
 S CT=CT+1
"RTN","RMPFDE2",37,0)
 S RMPFS1(RD,CT)=NM_U_SSN_U_EL_U_DFN_U_RQ_U_RMMSG_U_IEN ;keep in chron order, use TT to sort
"RTN","RMPFDE2",38,0)
 K VADM G L1
"RTN","RMPFDE2",39,0)
SORT ;create a sorted list by entry date with a ctr subscript (may be mult on date)
"RTN","RMPFDE2",40,0)
 S (RD,CT)=0 F  D  Q:'RD
"RTN","RMPFDE2",41,0)
 .S RD=$O(RMPFS1(RD)) Q:'RD  S CT=0 D
"RTN","RMPFDE2",42,0)
 ..F  S CT=$O(RMPFS1(RD,CT)) Q:'CT  D
"RTN","RMPFDE2",43,0)
 ...S TT=TT+1 S RMLIST(TT)=RD_U_RMPFS1(RD,CT)
"RTN","RMPFDE2",44,0)
 ..;RMLIST(TT)=req dt^pat name^pat SSN^sug el^dfn^req DUZ^MSG#^IEN
"RTN","RMPFDE2",45,0)
 ;
"RTN","RMPFDE2",46,0)
PRT D HEAD1 ;now print list
"RTN","RMPFDE2",47,0)
 I 'TT W !!,"NO REQUESTS TO REPORT" Q
"RTN","RMPFDE2",48,0)
 S CT=0
"RTN","RMPFDE2",49,0)
 F  S CT=$O(RMLIST(CT)) Q:'CT  D  Q:$G(EXIT)=1
"RTN","RMPFDE2",50,0)
 .W !,CT,?4,$$FMTE^XLFDT($P(RMLIST(CT),U,1)),?24,$P(RMLIST(CT),U,2)
"RTN","RMPFDE2",51,0)
 .S SSN=$P(RMLIST(CT),U,3)
"RTN","RMPFDE2",52,0)
 .W ?43,$E(SSN,1,3),"-",$E(SSN,4,5),"-",$E(SSN,6,9),?56,$P(RMLIST(CT),U,4)
"RTN","RMPFDE2",53,0)
 .I $G(RMPFVFLG)=1,CT#15=0 D CONT Q:$G(EXIT)=1  ;repeat command line if list long
"RTN","RMPFDE2",54,0)
 ;
"RTN","RMPFDE2",55,0)
LISTOT Q:$G(EXIT)=1
"RTN","RMPFDE2",56,0)
 W !!,"Total Orders:  ",TT
"RTN","RMPFDE2",57,0)
 D:$G(RMPFVFLG)=1 CONT
"RTN","RMPFDE2",58,0)
 D KILL^XM
"RTN","RMPFDE2",59,0)
 Q
"RTN","RMPFDE2",60,0)
HEAD1 W @IOF,!?17,"ROES REQUESTS FOR ELIGIBILITY DETERMINATION"
"RTN","RMPFDE2",61,0)
 W:$G(RMPFVFLG)'=1 !,?68,$$FMTE^XLFDT(DT)
"RTN","RMPFDE2",62,0)
 W ! F I=1:1:80 W "-"
"RTN","RMPFDE2",63,0)
 W !?1,"#",?7,"Request Date",?26,"Patient Name"
"RTN","RMPFDE2",64,0)
 W ?47,"SSN",?58,"Proposed Eligibility"
"RTN","RMPFDE2",65,0)
 W !,"--",?4,"------------------",?24,"-----------------"
"RTN","RMPFDE2",66,0)
 W ?43,"-----------",?56,"------------------------"
"RTN","RMPFDE2",67,0)
 Q
"RTN","RMPFDE2",68,0)
CONT ;EOL actions
"RTN","RMPFDE2",69,0)
 Q:$G(RMPFVFLG)=0  ;printing
"RTN","RMPFDE2",70,0)
 F I=1:1 Q:$Y>19  W !
"RTN","RMPFDE2",71,0)
CONT1 W !!,"Type the NUMBER of the request, <P>rint "
"RTN","RMPFDE2",72,0)
 W:CT<15 "or " W:CT>14 ","
"RTN","RMPFDE2",73,0)
 W "<Q>uit the option"
"RTN","RMPFDE2",74,0)
 I CT>14 W " or <RETURN> to continue: "
"RTN","RMPFDE2",75,0)
 E  W ": "
"RTN","RMPFDE2",76,0)
 D READ
"RTN","RMPFDE2",77,0)
 Q:$D(RMPFOUT)
"RTN","RMPFDE2",78,0)
 I $D(RMPFQUT) D  G CONT1
"RTN","RMPFDE2",79,0)
 .W !!,"Enter the number to the left of the request to select it for processing"
"RTN","RMPFDE2",80,0)
 .W !?9,"a <P> to print the list, <Q> to quit the list, or"
"RTN","RMPFDE2",81,0)
 .W !?11,"<RETURN> to continue in list."
"RTN","RMPFDE2",82,0)
 I Y="" D HEAD1 G CONTE
"RTN","RMPFDE2",83,0)
 I "Pp"[$E(Y,1) D QUE G CONTE
"RTN","RMPFDE2",84,0)
 I "Qq"[$E(Y,1) S EXIT=1 G CONTE
"RTN","RMPFDE2",85,0)
 I $D(RMLIST(Y)) S RMPFX=RMLIST(Y) D
"RTN","RMPFDE2",86,0)
 .D DISPLINE^RMPFDE3 ;display inf
"RTN","RMPFDE2",87,0)
CONTE Q
"RTN","RMPFDE2",88,0)
QUE W ! S %ZIS="NPQ" D ^%ZIS G QUEE:POP
"RTN","RMPFDE2",89,0)
 I IO=IO(0),'$D(IO("S")) S RMPFVFLG=1 G QUEE
"RTN","RMPFDE2",90,0)
 I $D(IO("S")) S %ZIS="",IOP=ION D ^%ZIS D  G QUEE ;SLAVE PRINT
"RTN","RMPFDE2",91,0)
 .S RMPFVFLG=0
"RTN","RMPFDE2",92,0)
 .D HEAD1,LIST,LISTOT
"RTN","RMPFDE2",93,0)
 .D ^%ZISC
"RTN","RMPFDE2",94,0)
 .S RMPFVFLG=1
"RTN","RMPFDE2",95,0)
 S RMPFVFLG=0 ;NON-SLAVE PRINT
"RTN","RMPFDE2",96,0)
 S ZTDTH=$H,ZTRTN="PRT^RMPFDE2",ZTSAVE("TT")=""
"RTN","RMPFDE2",97,0)
 S ZTSAVE("RM*")=""
"RTN","RMPFDE2",98,0)
 S ZTIO=ION D ^%ZTLOAD
"RTN","RMPFDE2",99,0)
 D HOME^%ZIS S RMPFVFLG=1
"RTN","RMPFDE2",100,0)
 W:$D(ZTSK) !!,"*** Request Queued ***" H 2
"RTN","RMPFDE2",101,0)
 ;
"RTN","RMPFDE2",102,0)
QUEE K %T,%ZIS,POP,ZTRTN,ZTSAVE,ZTIO,ZTSK
"RTN","RMPFDE2",103,0)
 Q
"RTN","RMPFDE2",104,0)
READ K RMPFOUT,RMPFQUT
"RTN","RMPFDE2",105,0)
 R Y:DTIME I '$T W $C(7) R Y:5 G READ:Y="." S:'$T Y=U
"RTN","RMPFDE2",106,0)
 I Y?1"^".E S (RMPFOUT,Y)="" Q
"RTN","RMPFDE2",107,0)
 S:Y?1"?".E (RMPFQUT,Y)=""
"RTN","RMPFDE2",108,0)
 Q
"RTN","RMPFDE2",109,0)
PRINT D HEAD1,LIST,LISTOT Q
"RTN","RMPFDE3")
0^37^B19705008
"RTN","RMPFDE3",1,0)
RMPFDE3 ;DDC/PJU - RE ELIGIBILITY APPROVAL PROCESS ;11/01/02
"RTN","RMPFDE3",2,0)
 ;;3.0;REMOTE ORDER ENTRY SYSTEM;;11/01/02
"RTN","RMPFDE3",3,0)
 ;CALLED DURING OPTION RMPFDE2 TO PROCESS PENDING ELIGIBILITIES
"RTN","RMPFDE3",4,0)
DISPLINE        ;
"RTN","RMPFDE3",5,0)
 ;RMPFX=req dt^pat name^pat SSN^sug el^dfn^req DUZ^MSG #
"RTN","RMPFDE3",6,0)
 N EL,I,IEN,NM,RD,RMMSG,RMPFOUT,RMPFQUT,RMPFSEL,RO,RQ,SSN,X,Y
"RTN","RMPFDE3",7,0)
 S RD=$P(RMPFX,U,1),NM=$P(RMPFX,U,2),SSN=$P(RMPFX,U,3)
"RTN","RMPFDE3",8,0)
 S EL=$P(RMPFX,U,4),RQ=$P(RMPFX,U,6),RMMSG=$P(RMPFX,U,7)
"RTN","RMPFDE3",9,0)
 S IEN=$P(RMPFX,U,8),RO=0
"RTN","RMPFDE3",10,0)
 W !!!,?4,$$FMTE^XLFDT(RD),?24,NM
"RTN","RMPFDE3",11,0)
 W ?43,$E(SSN,1,3),"-",$E(SSN,4,5),"-",$E(SSN,6,$L(SSN)),?56,EL
"RTN","RMPFDE3",12,0)
 W ! F I=1:1:80 W "-"
"RTN","RMPFDE3",13,0)
 W !?13,"Proposed Eligibility: ",EL
"RTN","RMPFDE3",14,0)
 W !?23,"Entered By: ",$S(RQ:$P($G(^VA(200,RQ,0)),U,1),1:"UNKNOWN")
"RTN","RMPFDE3",15,0)
 I RMMSG,$D(^XMB(3.9,RMMSG,2))>9 D
"RTN","RMPFDE3",16,0)
 .W !?4,"Comments: " S I=6 F  S I=$O(^XMB(3.9,RMMSG,2,I)) Q:'I  D
"RTN","RMPFDE3",17,0)
 ..W !,^XMB(3.9,RMMSG,2,I,0)
"RTN","RMPFDE3",18,0)
A0 W !!,"<A>ccept, <E>dit, <R>eject or <RETURN> to listing: "
"RTN","RMPFDE3",19,0)
 D:$G(RMPFVFLG)=1 READ^RMPFDE2 G END:$D(RMPFOUT)
"RTN","RMPFDE3",20,0)
A1 I $D(RMPFQUT) D  G A0
"RTN","RMPFDE3",21,0)
 .W !!,"Enter an <A> to accept the proposed eligibility"
"RTN","RMPFDE3",22,0)
 .W !?6,"an <E> to change to an acceptable eligibility"
"RTN","RMPFDE3",23,0)
 .W !?6,"an <R> to reject the request back to ASPS or"
"RTN","RMPFDE3",24,0)
 .W !?7,"a <RETURN> to exit back to the list."
"RTN","RMPFDE3",25,0)
 G END:Y=""
"RTN","RMPFDE3",26,0)
 S RMPFSEL=$E(Y,1),RMPFSEL=$$UP^XLFSTR(RMPFSEL)
"RTN","RMPFDE3",27,0)
 S EL=$TR(EL," ","")
"RTN","RMPFDE3",28,0)
 I "AER"'[RMPFSEL S RMPFQUT="" G A1
"RTN","RMPFDE3",29,0)
 S DIE="^RMPF(791814,",DA=IEN K DR
"RTN","RMPFDE3",30,0)
 I "AR"[RMPFSEL D  D:'RO MAIL D:RO MSG G END
"RTN","RMPFDE3",31,0)
 .I EL="",RMPFSEL="A" S RO=1 Q
"RTN","RMPFDE3",32,0)
 .S DR=".04///"_$$FMADD^XLFDT(DT,730) ; 730 days to expire (2 yrs)
"RTN","RMPFDE3",33,0)
 .S DR=DR_";2.01////"_EL_";2.03////"_DUZ_";2.04////"_DT
"RTN","RMPFDE3",34,0)
 .I RMPFSEL="A" S DR=DR_";2.02////1"
"RTN","RMPFDE3",35,0)
 .E  S DR=DR_";2.02////0" ;reject
"RTN","RMPFDE3",36,0)
 .D ^DIE
"RTN","RMPFDE3",37,0)
 I "Ee"[RMPFSEL D  G:$D(RMPFOUT) END D:'RO MAIL D:RO MSG G END
"RTN","RMPFDE3",38,0)
 .W !
"RTN","RMPFDE3",39,0)
 .F X=1:1:17 W !,X,?4,$P($T(@X),";;",2),?15,$P($T(@X),";;",3) ;list eligibilities
"RTN","RMPFDE3",40,0)
A2 .S Y=""
"RTN","RMPFDE3",41,0)
 .W !!,"Enter the line number of the preferred eligibility: "
"RTN","RMPFDE3",42,0)
 .D:$G(RMPFVFLG)=1 READ^RMPFDE2
"RTN","RMPFDE3",43,0)
 .G:$D(RMPFQUT) A2 Q:$D(RMPFOUT)
"RTN","RMPFDE3",44,0)
 .I (Y<1)!(Y>17) S RO=1 Q
"RTN","RMPFDE3",45,0)
 .S EL=$P($T(@Y),";;",2) I EL="" S RO=1 Q
"RTN","RMPFDE3",46,0)
 .S DR=".04///"_$$FMADD^XLFDT(DT,730) ;730 days to expire (2 yrs)
"RTN","RMPFDE3",47,0)
 .S DR=DR_";2.01////"_EL_";2.03////"_DUZ_";2.04////"_DT
"RTN","RMPFDE3",48,0)
 .S DR=DR_";2.02////1" ;accept selected elig
"RTN","RMPFDE3",49,0)
 .D ^DIE K DR
"RTN","RMPFDE3",50,0)
END K DIE,DR,DA Q
"RTN","RMPFDE3",51,0)
 ;
"RTN","RMPFDE3",52,0)
MSG W !!,"*** No eligibility was selected. ***" R X:5 Q
"RTN","RMPFDE3",53,0)
 ;
"RTN","RMPFDE3",54,0)
MAIL ;;Send message to ASPS mail group
"RTN","RMPFDE3",55,0)
 ;; input: EL,NM,SSN
"RTN","RMPFDE3",56,0)
 ;;output: XMZ
"RTN","RMPFDE3",57,0)
 S XMZ=""
"RTN","RMPFDE3",58,0)
 S MG=$O(^XMB(3.8,"B","RMPF ROES UPDATES (ASPS)",0))
"RTN","RMPFDE3",59,0)
 I 'MG D  G MAILE
"RTN","RMPFDE3",60,0)
 .W $C(7),!!,"*** MAIL GROUP - RMPF ROES UPDATES (ASPS) - NOT ESTABLISHED - NO MESSAGE SENT ***"
"RTN","RMPFDE3",61,0)
 S XMY("G."_$P($G(^XMB(3.8,MG,0)),U,1))=""
"RTN","RMPFDE3",62,0)
 S MG=$O(^XMB(3.8,"B","RMPF ROES UPDATES (PSAS)",0))
"RTN","RMPFDE3",63,0)
 I 'MG W $C(7),!!,"*** MAIL GROUP - RMPF ROES UPDATES (PSAS) - NOT ESTABLISHED ***"
"RTN","RMPFDE3",64,0)
 E  S XMY("G."_$P($G(^XMB(3.8,MG,0)),U,1))=""
"RTN","RMPFDE3",65,0)
 S XMY(DUZ)=""
"RTN","RMPFDE3",66,0)
 S XMSUB="ROES PATIENT ELIGIBILITY UPDATE"
"RTN","RMPFDE3",67,0)
 S XMDUZ=DUZ
"RTN","RMPFDE3",68,0)
 D XMZ^XMA2 I XMZ<1 D  G MAILE
"RTN","RMPFDE3",69,0)
 .W !!,"*** MAIL Msg not created! Eligibility not updated! ***"
"RTN","RMPFDE3",70,0)
 S XMTEXT(1)="ROES Patient Eligibility has been updated for the following patient:"
"RTN","RMPFDE3",71,0)
 S XMTEXT(2)=" "
"RTN","RMPFDE3",72,0)
 S XMTEXT(3)=NM_"          "_SSN
"RTN","RMPFDE3",73,0)
 S XMTEXT(4)=" "
"RTN","RMPFDE3",74,0)
 S XMTEXT(5)=EL
"RTN","RMPFDE3",75,0)
 S XMTEXT(6)=" "
"RTN","RMPFDE3",76,0)
 S X="" S:$D(^RMPF(791814,IEN,2)) X=$P(^(2),U,2) S X=$S(X=1:"Accepted",X=0:"Rejected",1:"Waiting")
"RTN","RMPFDE3",77,0)
 S XMTEXT(7)="Comment: "_X
"RTN","RMPFDE3",78,0)
 S XMTEXT="XMTEXT("
"RTN","RMPFDE3",79,0)
 D ^XMD W !!,"*** Message sent to user and Mail Group ***" H 2
"RTN","RMPFDE3",80,0)
MAILE K MG,XMTEXT,XMDUZ,XMSUB,XMY
"RTN","RMPFDE3",81,0)
 Q
"RTN","RMPFDE3",82,0)
ELGLIST ;;LIST THE POSSIBILE ELIGIBILITIES
"RTN","RMPFDE3",83,0)
1 ;;SC;;Service Connected for Hearing Loss
"RTN","RMPFDE3",84,0)
2 ;;COM;;10 to 100 PerCent Service Connected Disability
"RTN","RMPFDE3",85,0)
3 ;;EP3;;Enrollment Priority Group 3 (PH, etc.)
"RTN","RMPFDE3",86,0)
4 ;;POW;;Prisoner of War
"RTN","RMPFDE3",87,0)
5 ;;AAA;;Aid and Attendance
"RTN","RMPFDE3",88,0)
6 ;;HB;;Housebound
"RTN","RMPFDE3",89,0)
7 ;;0CA;;0 PerCent SC and Priority Groups 5 or 7a
"RTN","RMPFDE3",90,0)
8 ;;NCA;;NSC_Pension or (NSC and Prioity Groups 5)
"RTN","RMPFDE3",91,0)
9 ;;SCV;;Special Category Veterans in Priority Group 6
"RTN","RMPFDE3",92,0)
10 ;;CAN;;Canadian Vet
"RTN","RMPFDE3",93,0)
11 ;;BRI;;Great Britain Vet
"RTN","RMPFDE3",94,0)
12 ;;WWI;;World War I or Mexican Border War
"RTN","RMPFDE3",95,0)
13 ;;NSC;;NSC and Priority Group 7c
"RTN","RMPFDE3",96,0)
14 ;;BLR;;Blind Rehab
"RTN","RMPFDE3",97,0)
15 ;;VOC;;Vocational Rehab
"RTN","RMPFDE3",98,0)
16 ;;OGA;;Other Approved Federal Agencies
"RTN","RMPFDE3",99,0)
17 ;;PG8;;Priority Group 8 (pays co-pay)
"RTN","RMPFDE4")
0^35^B3265627
"RTN","RMPFDE4",1,0)
RMPFDE4 ;DDC/PJU - SENDS ALERTS WHEN ELIG REQESTS NOT ACTED ON ;11/01/02
"RTN","RMPFDE4",2,0)
 ;;3.0;REMOTE ORDER ENTRY SYSTEM;;02/18/03
"RTN","RMPFDE4",3,0)
 ;SET RMPFDE4 IN OPTION FILE & REPETITIVE QUE WITH A PARAM OF X DAYS
"RTN","RMPFDE4",4,0)
START ;;RMPFDY ;time frame
"RTN","RMPFDE4",5,0)
 Q:'$D(^RMPF(791814,"C",2))
"RTN","RMPFDE4",6,0)
 N IEN,RMPFST,RMPFDIFF ;START DATE
"RTN","RMPFDE4",7,0)
 S IEN=0 S:'$G(RMPFDY) RMPFDY=7 ;Defaults to 7 if RMPFDY not set in Rep QUE
"RTN","RMPFDE4",8,0)
LOOP S IEN=$O(^RMPF(791814,"C",2,IEN)) G:'IEN EXIT ;records in wait status
"RTN","RMPFDE4",9,0)
 ;LOOK FOR END OF GLOBAL RECORDS
"RTN","RMPFDE4",10,0)
 S S0=$G(^RMPF(791814,IEN,0)),S1=$G(^(1)),S2=$G(^(2))
"RTN","RMPFDE4",11,0)
 G:$P(S2,U,2)'=2 LOOP ;acted on already
"RTN","RMPFDE4",12,0)
 G:$P(S0,U,4)>DT LOOP ;expired
"RTN","RMPFDE4",13,0)
 S RMPFST=$P(S0,U,2) ;date input
"RTN","RMPFDE4",14,0)
 G:'RMPFST LOOP ;missing input date
"RTN","RMPFDE4",15,0)
 S RMPFDIFF=$$FMDIFF^XLFDT(DT,RMPFST) ;days since input
"RTN","RMPFDE4",16,0)
 I RMPFDIFF>RMPFDY D SEND(IEN,RMPFDIFF) ;SEND ALERT IF NEC
"RTN","RMPFDE4",17,0)
 G LOOP
"RTN","RMPFDE4",18,0)
EXIT K RMPFDY D KILL^XM Q
"RTN","RMPFDE4",19,0)
 ;
"RTN","RMPFDE4",20,0)
SEND(ENT,RMPFDIFF)      ;
"RTN","RMPFDE4",21,0)
 ;INPUT ENTRY IN FORM IEN, DIFFERENCE IN DAYS SINCE ENTERED
"RTN","RMPFDE4",22,0)
 N SSN,DFN,NM,MS,RMPFTXT,RMUSER
"RTN","RMPFDE4",23,0)
 S DFN=$P(S0,U,1)
"RTN","RMPFDE4",24,0)
 Q:'DFN  D DEM^VADPT Q:VAERR
"RTN","RMPFDE4",25,0)
 S NM=VADM(1) Q:NM=""
"RTN","RMPFDE4",26,0)
 S SSN=$P(VADM(2),U,1)
"RTN","RMPFDE4",27,0)
 S MS=$P(S1,U,2),RMUSER=$P(S0,U,3) ;email# & requesting user
"RTN","RMPFDE4",28,0)
 ;SETUP ALERT
"RTN","RMPFDE4",29,0)
 S RMPFTXT="Action req'd on Elig Req [msg #"_MS_"] for: "_$P(NM,",",1)_"-"_$E(SSN,6,10)_" from "_RMPFDIFF_" days ago."
"RTN","RMPFDE4",30,0)
 S XQA("G.RMPF ROES UPDATES (PSAS)")=""
"RTN","RMPFDE4",31,0)
 S:$L(RMUSER) XQA(RMUSER)=""
"RTN","RMPFDE4",32,0)
 S XQAMSG=RMPFTXT
"RTN","RMPFDE4",33,0)
 S XQAID="RMPF_ELIG_ALERT"
"RTN","RMPFDE4",34,0)
 D SETUP^XQALERT ;SEND
"RTN","RMPFDE4",35,0)
END Q
"RTN","RMPFDE4",36,0)
 ;sample entry in file after completed
"RTN","RMPFDE4",37,0)
 ;^RMPF(791814,1,0)=733928^3030212^988^3050212
"RTN","RMPFDE4",38,0)
 ;^(1)=NSC^2673145
"RTN","RMPFDE4",39,0)
 ;^(2)=NSC^NSC^1^988^3030218
"RTN","RMPFRPC0")
0^32^B48637788
"RTN","RMPFRPC0",1,0)
RMPFRPC0        ;DDC/PJU - Module to establish DDC elig for ROES3 ;11/01/02
"RTN","RMPFRPC0",2,0)
 ;;3.0;REMOTE ORDER ENTRY SYSTEM;;3/01/03
"RTN","RMPFRPC0",3,0)
START(AR,DFN,SHW)       ;see description at end of program
"RTN","RMPFRPC0",4,0)
 ;;input: array name by ref, DFN, SHW=1(opt) if prompts can be shown
"RTN","RMPFRPC0",5,0)
 ;;will return to the Delphi app as 0-7 subscripts in same order
"RTN","RMPFRPC0",6,0)
 ;created during calculation in the AR array (passed by reference)
"RTN","RMPFRPC0",7,0)
 ;PD = AR(0)=date of death msg or ""
"RTN","RMPFRPC0",8,0)
 ;ED = AR(1)=eligibility status date FM
"RTN","RMPFRPC0",9,0)
 ;EL = AR(2)=calculated eligibility code
"RTN","RMPFRPC0",10,0)
 ;ES = AR(3)=eligibility status
"RTN","RMPFRPC0",11,0)
 ;SR = AR(4)=sensitive record
"RTN","RMPFRPC0",12,0)
 ;ER = AR(5) is for error msg's
"RTN","RMPFRPC0",13,0)
 ;PE = AR(6)=primary eligibility
"RTN","RMPFRPC0",14,0)
 ;PG = AR(7)=priority group
"RTN","RMPFRPC0",15,0)
 ;RA = AR(8)=elig ^APPROVED(1) or DISAPPROVED(0) or submitted(3) ^ PSAS user ^ ASPS user
"RTN","RMPFRPC0",16,0)
 ;PS = enrollment group sub
"RTN","RMPFRPC0",17,0)
 ;R3 = array of auto accepted R3 elig's
"RTN","RMPFRPC0",18,0)
 K AR ;in case came in with data (is called by ref)
"RTN","RMPFRPC0",19,0)
 N ROES ;array of eligibilities to submitted to PSAS
"RTN","RMPFRPC0",20,0)
N N ED,EL,ES,FL,ER,PD,PE,PG,PS,R3,RA,SR,SSN,VS,VT,IEN
"RTN","RMPFRPC0",21,0)
 S (ED,EL,ES,FL,ER,PD,PE,PG,PS,R3,RA,SR,SSN,VS,IEN)=""
"RTN","RMPFRPC0",22,0)
 F X=0:1:8 S AR(X)="" ;re-establish AR
"RTN","RMPFRPC0",23,0)
 F X="SC","COM","EP3","POW","AAA","HB","SCV","CAN","BRI","WWI" S R3(X)="" ;no PSAS ap needed
"RTN","RMPFRPC0",24,0)
D K VADM,VAEL,VAMB,VAPA,VASV
"RTN","RMPFRPC0",25,0)
 D DEM^VADPT ;sets up VADM() - demographic variables *** ck for errors
"RTN","RMPFRPC0",26,0)
 I $G(VAERR) S ER="**ERROR** Problem in retrieving Demographic values" G END
"RTN","RMPFRPC0",27,0)
 I $G(VADM(6)) D
"RTN","RMPFRPC0",28,0)
 .S (PD,AR(0))=VADM(6) ;fm^external date of death
"RTN","RMPFRPC0",29,0)
 S SSN=$P($G(VADM(2)),U,1)
"RTN","RMPFRPC0",30,0)
 ;*** ADDED TO Integration agreement 767 NAME: DBIA268-C SEN REC ***
"RTN","RMPFRPC0",31,0)
 I $P($G(^DGSL(38.1,DFN,0)),U,2) S AR(4)=1 ;ck for sensitive record
"RTN","RMPFRPC0",32,0)
 S VAPA("P")="" D ADD^VADPT ;get permanent address
"RTN","RMPFRPC0",33,0)
 I $G(VAERR) S ER="**ERROR** Problem in retrieving Permanent Address" G END
"RTN","RMPFRPC0",34,0)
E D ELIG^VADPT ;sets up VAEL() - eligibility variables & ck for errors
"RTN","RMPFRPC0",35,0)
 S (PE,AR(6))=$P($G(VAEL(1)),U,2) ;; external form of PRIMARY ELIG
"RTN","RMPFRPC0",36,0)
 I $L(ER) G END
"RTN","RMPFRPC0",37,0)
 I $G(VAERR) D  G END
"RTN","RMPFRPC0",38,0)
 .S ER="**ERROR** Problem in retrieving Eligibility from ELIG^VADPT"
"RTN","RMPFRPC0",39,0)
 S ES=$P($G(VAEL(8)),U,1) ;elig status
"RTN","RMPFRPC0",40,0)
 I ES="V" D
"RTN","RMPFRPC0",41,0)
 .K RM S DIC=2,DA=DFN,DIQ="RM",DR=".3612" D EN^DIQ1
"RTN","RMPFRPC0",42,0)
 .S ED=RM(2,DFN,.3612) ;elig date text
"RTN","RMPFRPC0",43,0)
 .S %DT="X",X=ED D ^%DT S:+Y>1 ED=+Y_U_ED ;fmdate ^ text date
"RTN","RMPFRPC0",44,0)
 .K RM,DIC,DA,DIQ,DR,%DT
"RTN","RMPFRPC0",45,0)
 S VT=$S($G(VAEL(4)):"Y",1:"N") ;VET Y/N
"RTN","RMPFRPC0",46,0)
 I VT="Y" D  G:$L(EL) END
"RTN","RMPFRPC0",47,0)
 .D ELIGBL Q:$L(EL)  ; checks for SC for condition                       SC
"RTN","RMPFRPC0",48,0)
 .S VS=$G(VAEL(3)) I $P(VS,U,1) D  Q:$L(EL)  ;VAEL(3)=0/1 for SC ^ %
"RTN","RMPFRPC0",49,0)
 ..I $P(VS,U,2)'<10  S EL="COM" ;SC 10% or greater                       COM
"RTN","RMPFRPC0",50,0)
 K RM S DIC=2,DA=DFN,DIQ="RM",DR="27.01",DIQ(0)="I" D EN^DIQ1
"RTN","RMPFRPC0",51,0)
 S DA=$G(RM(2,DFN,27.01,"I")) ;CURRENT ENROLLMENT entry in patient file
"RTN","RMPFRPC0",52,0)
 I DA D
"RTN","RMPFRPC0",53,0)
 .K RM2 S DIC=27.11,DIQ="RM2",DR=".07;.12",DIQ(0)="I" D EN^DIQ1
"RTN","RMPFRPC0",54,0)
 .S (PG,AR(7))=$G(RM2(27.11,DA,.07,"I")) ;Priority Group
"RTN","RMPFRPC0",55,0)
 .S PS1=$G(RM2(27.11,DA,.12,"I"))
"RTN","RMPFRPC0",56,0)
 .S PS=$S(PS1=1:"A",PS1=2:"B",PS1=3:"C",PS1=4:"D",1:"") ;Priority Subgroup
"RTN","RMPFRPC0",57,0)
 K RM,RM2,DIC,DA,DIQ,DR,PS1
"RTN","RMPFRPC0",58,0)
 I VT="Y",PG=3 D  G:$L(EL) END
"RTN","RMPFRPC0",59,0)
 .S EL="EP3" ;                                                           EP3
"RTN","RMPFRPC0",60,0)
 D SVC^VADPT I $G(VAERR) D  G END
"RTN","RMPFRPC0",61,0)
 .S ER="**ERROR** Problem in retrieving Service Information(SVC^VADPT)"
"RTN","RMPFRPC0",62,0)
 I ($G(VASV(4))=1)!($P(VAEL(1),U,2)="PRISONER OF WAR") D  G:$L(EL) END
"RTN","RMPFRPC0",63,0)
 .S EL="POW" ;                                                           POW
"RTN","RMPFRPC0",64,0)
 D MB^VADPT I $G(VAERR) D  G END
"RTN","RMPFRPC0",65,0)
 .S ER="**ERROR** Problem in retrieving Benefit information(MB^VADPT)"
"RTN","RMPFRPC0",66,0)
 ; VAEL(1)=#^PRIMARY ELIG
"RTN","RMPFRPC0",67,0)
 I VT="Y" D  G:$L(EL) END
"RTN","RMPFRPC0",68,0)
 .I $G(VAMB(1))!($P(VAEL(1),U,2)="AID & ATTENDANCE") S EL="AAA" Q  ;     AAA **PRI ELIG
"RTN","RMPFRPC0",69,0)
 .I $G(VAMB(2))!($P(VAEL(1),U,2)="HOUSEBOUND") S EL="HB" Q  ;            HB **
"RTN","RMPFRPC0",70,0)
 .I $G(VAEL(3)),$P($G(VAEL(3)),U,2)=0 D  Q:$L(EL)  ;                     0CA
"RTN","RMPFRPC0",71,0)
 ..I PG=5 S EL="0CA" Q
"RTN","RMPFRPC0",72,0)
 ..I PG=7,PS="A" S EL="0CA"
"RTN","RMPFRPC0",73,0)
 .I PG=5 D  Q:$L(EL)  ;                                                  NCA**
"RTN","RMPFRPC0",74,0)
 ..I $P($G(VAEL(1)),U,2)="NSC, VA PENSION" S EL="NCA" Q  ;PG5 NSC, VA PENSION primary eligibility
"RTN","RMPFRPC0",75,0)
 ..I $P($G(VAEL(6)),U,2)="NSC VETERAN" S EL="NCA" Q  ;PG 5 NSC Veteran
"RTN","RMPFRPC0",76,0)
 .I PG=6 S EL="SCV" Q  ;Special category veterans                        SCV
"RTN","RMPFRPC0",77,0)
 .I ($P($G(VAEL(2)),U,2)="WORLD WAR I")!($P($G(VAEL(2)),U,2)="MEXICAN BORDER WAR") D
"RTN","RMPFRPC0",78,0)
 ..S EL="WWI" ;                                                          WWI
"RTN","RMPFRPC0",79,0)
 G:$L(EL) END
"RTN","RMPFRPC0",80,0)
 D ALLIED(DFN) G:$L(EL) END ;                                            CAN or BRI
"RTN","RMPFRPC0",81,0)
 S X=0 D:($D(VAEL(1))>9)  G:$L(EL) END ;                                 OGA
"RTN","RMPFRPC0",82,0)
 .F  S X=$O(VAEL(1,X)) Q:'X  D  Q:$L(EL)
"RTN","RMPFRPC0",83,0)
 ..I $P(VAEL(1,X),U,2)="OTHER FEDERAL AGENCY" S EL="OGA"
"RTN","RMPFRPC0",84,0)
 I VT="Y",'$G(VAEL(3)) D  G:$L(EL) END ;                                 NSC
"RTN","RMPFRPC0",85,0)
 .I (PG=7)&(PS="C") S EL="NSC"
"RTN","RMPFRPC0",86,0)
 I VT="Y",PG=8 S EL="PG8" ;                                              PG8
"RTN","RMPFRPC0",87,0)
END I $L($G(ER)) S AR(5)=ER
"RTN","RMPFRPC0",88,0)
 S:$L(ED) AR(1)=ED ;                                                     ELIG DATE
"RTN","RMPFRPC0",89,0)
 S:$L(EL) AR(2)=EL ;                                                     calc elig CODE
"RTN","RMPFRPC0",90,0)
 S:$L($G(ES)) AR(3)=ES
"RTN","RMPFRPC0",91,0)
 S IEN="" I $D(^RMPF(791814,"B",DFN)) D
"RTN","RMPFRPC0",92,0)
 .S IEN=$O(^RMPF(791814,"B",DFN," "),-1) ;                                ELIG STAT
"RTN","RMPFRPC0",93,0)
  ;CK FOR ACCEPTANCE OR REJECTION
"RTN","RMPFRPC0",94,0)
 I (EL="")!(EL="NSC")!(EL="BLR")!(EL="VOC")!(EL="OGA")!(EL="PG8")!(EL="NCA")!(EL="0CA") D
"RTN","RMPFRPC0",95,0)
 .I $D(^RMPF(791814,"B",DFN)) D
"RTN","RMPFRPC0",96,0)
 ..S RA=$P($G(^RMPF(791814,IEN,2)),U,2) ;0 or 1 or 2
"RTN","RMPFRPC0",97,0)
 ..S:RA="" RA=2 ;submitted, but not acted on
"RTN","RMPFRPC0",98,0)
 ..S EL=$S(RA=1:$P($G(^RMPF(791814,IEN,2)),U,1),1:EL),AR(2)=EL ;approved eligibility code or CALC
"RTN","RMPFRPC0",99,0)
 ..S X=$P($G(^RMPF(791814,IEN,2)),U,3),Y="Unknown" ;PSAS user DUZ
"RTN","RMPFRPC0",100,0)
 ..I X>0 S DIC=200,DIC(0)="N" D ^DIC D
"RTN","RMPFRPC0",101,0)
 ...S Y=$S(+Y>0:$P(Y,U,2),1:"Unknown") K DIC
"RTN","RMPFRPC0",102,0)
 ...S $P(RA,U,2)=Y ;name of PSAS user
"RTN","RMPFRPC0",103,0)
 ..S X=$P($G(^RMPF(791814,IEN,0)),U,3),Y="Unknown" ;ASPS user DUZ
"RTN","RMPFRPC0",104,0)
 ..I X>0 S DIC=200,DIC(0)="N" D ^DIC D
"RTN","RMPFRPC0",105,0)
 ...S Y=$S(+Y>0:$P(Y,U,2),1:"Unknown") K DIC
"RTN","RMPFRPC0",106,0)
 ...S $P(RA,U,3)=Y ;name of ASPS user
"RTN","RMPFRPC0",107,0)
 ..S:$L(RA) AR(8)=EL_U_RA ;elg^0 or 1 by PSAS or 2 if not acted on^PSAS user name^ASPS user name^date^sugg
"RTN","RMPFRPC0",108,0)
 .I $L(IEN),$D(^RMPF(791814,IEN,1)),$D(^RMPF(791814,IEN,2)),$P(^(2),U,2)=2 D
"RTN","RMPFRPC0",109,0)
 ..S RA=2 ;submitted, but not acted on
"RTN","RMPFRPC0",110,0)
 ..S X=$P($G(^RMPF(791814,IEN,0)),U,3),Y="Unknown" ;ASPS user DUZ
"RTN","RMPFRPC0",111,0)
 ..I X>0 S DIC=200,DIC(0)="N" D ^DIC D
"RTN","RMPFRPC0",112,0)
 ...S Y=$S(+Y>0:$P(Y,U,2),1:"Unknown") K DIC
"RTN","RMPFRPC0",113,0)
 ...S $P(RA,U,3)=Y ;name of ASPS user
"RTN","RMPFRPC0",114,0)
 ...S Y=$P(^RMPF(791814,IEN,0),U,2) D DD^%DT S $P(RA,U,4)=Y ;printable date request started
"RTN","RMPFRPC0",115,0)
 ..S AR(8)=EL_U_RA ;elg ^2 if not acted on ^ ^ ASPS user name^ date request entered
"RTN","RMPFRPC0",116,0)
 ..S $P(AR(8),U,6)=$P(^RMPF(791814,IEN,1),U,1) ;suggested elig
"RTN","RMPFRPC0",117,0)
 D:$G(SHW) SHOW ; show calc'd values for testing
"RTN","RMPFRPC0",118,0)
 D KVAR^VADPT K %DT,LD,S0,S1,S2,S6,YY,POP
"RTN","RMPFRPC0",119,0)
 Q
"RTN","RMPFRPC0",120,0)
 ;
"RTN","RMPFRPC0",121,0)
ELIGBL ;ELIGIBILITY FOR DISABILITY CONDITION
"RTN","RMPFRPC0",122,0)
 ;contains DFN,.372,X,0)=31 ptr^disabil %^SC 0/1
"RTN","RMPFRPC0",123,0)
 ;DIC(31,i,0)= disab txt^abbrev^dx code
"RTN","RMPFRPC0",124,0)
 N LD,S,RD,P,AX S AX=0
"RTN","RMPFRPC0",125,0)
E1 ;*** added to IA #174 for rated disabilities multiple node direct read
"RTN","RMPFRPC0",126,0)
 S AX=$O(^DPT(DFN,.372,AX)) G E1END:'AX
"RTN","RMPFRPC0",127,0)
 I $D(^DPT(DFN,.372,AX,0)) D  G:$L(EL) E1END
"RTN","RMPFRPC0",128,0)
 .S S=^DPT(DFN,.372,AX,0) I $P(S,U,3) D  ;service connected
"RTN","RMPFRPC0",129,0)
 ..S RD=$P(S,U,1) D:RD  ;disibility file ptr
"RTN","RMPFRPC0",130,0)
 ...S X=RD,DIC=31,DIC(0)="NZ" D ^DIC
"RTN","RMPFRPC0",131,0)
 ...S LD=$S(+Y>0:$P(Y(0),U,3),1:"Unknown") K DIC,Y
"RTN","RMPFRPC0",132,0)
 ...Q:+LD<5000  Q:+LD>6300  S LD=+LD ;ck for hearing loss DX codes ***ck on codes 6259 and 6298
"RTN","RMPFRPC0",133,0)
 ...I (LD=6016)!((LD>6099)&(LD<6111)) S EL="SC" Q
"RTN","RMPFRPC0",134,0)
 ...I ((LD>6198)&(LD<6212))!((LD>6249)&(LD<6264)) S EL="SC" Q
"RTN","RMPFRPC0",135,0)
 ...I ((LD>6276)&(LD<6300)) S EL="SC"
"RTN","RMPFRPC0",136,0)
 G E1 ;dis
"RTN","RMPFRPC0",137,0)
E1END Q  ; SC for condition
"RTN","RMPFRPC0",138,0)
 ;
"RTN","RMPFRPC0",139,0)
SHOW ;all visible prompts if needed FOR TESTING ONLY
"RTN","RMPFRPC0",140,0)
 ;ZW AR ; for testing
"RTN","RMPFRPC0",141,0)
 W !!,"Patient: " I $G(DFN) W $S($D(^DPT(DFN,0)):$P(^(0),U,1),1:DFN)
"RTN","RMPFRPC0",142,0)
 I $L(EL) D
"RTN","RMPFRPC0",143,0)
 .W !,"Calculated R3 elig = ",EL
"RTN","RMPFRPC0",144,0)
 .I '$D(R3(EL)) D
"RTN","RMPFRPC0",145,0)
 ..W !," ***** ","ROES3 ELIGIBILITY MUST BE APPROVED BY PSAS *****"
"RTN","RMPFRPC0",146,0)
 I '$L(EL) D
"RTN","RMPFRPC0",147,0)
 .W !," ***** ","ROES3 ELIGIBILITY NOT DETERMINED, ORDER MUST BE APPROVED BY PSAS *****"
"RTN","RMPFRPC0",148,0)
 W !,"VA Elig status: "
"RTN","RMPFRPC0",149,0)
 I $L(ES) W ES
"RTN","RMPFRPC0",150,0)
 E  W !," ***** ","NO ELIG STATUS - MUST BE APPROVED BY PSAS *****"
"RTN","RMPFRPC0",151,0)
 W !,"Elig status date: " I $L(ED) W ED
"RTN","RMPFRPC0",152,0)
ENDS Q
"RTN","RMPFRPC0",153,0)
 ;
"RTN","RMPFRPC0",154,0)
ALLIED(DFN)  ;;input: DFN
"RTN","RMPFRPC0",155,0)
 ;;output: EL= CAN or BRI if true
"RTN","RMPFRPC0",156,0)
 I $P(VAEL(3),U,1)=1 D  ;sc
"RTN","RMPFRPC0",157,0)
 .N DIC,DA,DIQ,DR,RM
"RTN","RMPFRPC0",158,0)
 .S DIC=2,DA=DFN,DIQ="RM",DR=".309" D EN^DIQ1
"RTN","RMPFRPC0",159,0)
 .S:(RM(2,DFN,.309)="CANADA") EL="CAN"
"RTN","RMPFRPC0",160,0)
 .S:(RM(2,DFN,.309)["BRITAIN") EL="BRI"
"RTN","RMPFRPC0",161,0)
 Q
"RTN","RMPFRPC0",162,0)
 ;
"RTN","RMPFRPC0",163,0)
 ;return array in calling application - (sorts numerically by orig subscript)
"RTN","RMPFRPC0",164,0)
 ;AR(0)= 2 piece DOD numeric and text
"RTN","RMPFRPC0",165,0)
 ;AR(1)= 2 piced elig status date  numeric
"RTN","RMPFRPC0",166,0)
 ;AR(2)= calculated R3 elig code
"RTN","RMPFRPC0",167,0)
 ;AR(3)= elig status V, P OR R
"RTN","RMPFRPC0",168,0)
 ;AR(4)= sensitive record (1 or '')
"RTN","RMPFRPC0",169,0)
 ;AR(5)= ERROR msg
"RTN","RMPFRPC0",170,0)
 ;AR(6)= primary eligibility
"RTN","RMPFRPC0",171,0)
 ;AR(7)= Priority Group
"RTN","RMPFRPC0",172,0)
 ;AR(8)= ROES3 ELIGIBILITY^0/1/2^PSAS user^ASPS user^date entered
"RTN","RMPFRPC0",173,0)
 ;
"RTN","RMPFRPC0",174,0)
 ;COMMENTS:
"RTN","RMPFRPC0",175,0)
 ;A RPCBroker lookup is done to retrieve the patient. A call is then made to this
"RTN","RMPFRPC0",176,0)
 ;procedure call. From the PATIENT file, we get the name, SSN, date of birth,
"RTN","RMPFRPC0",177,0)
 ;current address, claim number, temporary address parameters and, if deceased,
"RTN","RMPFRPC0",178,0)
 ;the date of death. If the patient is a Veteran, the disabilities in the patient's
"RTN","RMPFRPC0",179,0)
 ;record are compared to the DX codes listed in the routine.
"RTN","RMPFRPC1")
0^38^B13808474
"RTN","RMPFRPC1",1,0)
RMPFRPC1        ;DDC/PJU - Module to get demographics from patient files ;11/01/02
"RTN","RMPFRPC1",2,0)
 ;;3.0;REMOTE ORDER ENTRY SYSTEM;;11/01/02
"RTN","RMPFRPC1",3,0)
 ;;Called from RMPFDEMOG
"RTN","RMPFRPC1",4,0)
START(RE,DFN)       ;see description at end of program
"RTN","RMPFRPC1",5,0)
 ;;input: array name by ref, DFN
"RTN","RMPFRPC1",6,0)
 ;;output: 2 char term used in name-value pairs for URL
"RTN","RMPFRPC1",7,0)
 ;;will return to the Delphi app as 0-24 subscripts in same order
"RTN","RMPFRPC1",8,0)
 ;created during calculation in the RE array (passed by reference)
"RTN","RMPFRPC1",9,0)
 ;PD = RE(0)=date of death msg or ""
"RTN","RMPFRPC1",10,0)
 ;NM = RE(11)=name
"RTN","RMPFRPC1",11,0)
 ;SS = RE(12)=SSN
"RTN","RMPFRPC1",12,0)
 ;BD = RE(13)=DOB
"RTN","RMPFRPC1",13,0)
 ;L1 = RE(14)=current ad1
"RTN","RMPFRPC1",14,0)
 ;L2 = RE(15)=current ad2
"RTN","RMPFRPC1",15,0)
 ;L3 = RE(16)=current ad3
"RTN","RMPFRPC1",16,0)
 ;CI = RE(17)=current city
"RTN","RMPFRPC1",17,0)
 ;ST = RE(18)=current st
"RTN","RMPFRPC1",18,0)
 ;ZP = RE(19)=current zip
"RTN","RMPFRPC1",19,0)
 ;TD = RE(20)=t start date
"RTN","RMPFRPC1",20,0)
 ;TE = RE(21)=t end date
"RTN","RMPFRPC1",21,0)
 ;PN = RE(22)=current phone
"RTN","RMPFRPC1",22,0)
 ;ED = RE(23)=eligibility status date FM
"RTN","RMPFRPC1",23,0)
 ;EL = RE(24)=R3 eligibility code
"RTN","RMPFRPC1",24,0)
 ;ES = RE(25)=eligibility status
"RTN","RMPFRPC1",25,0)
 ;SR = RE(26)=sensitive record
"RTN","RMPFRPC1",26,0)
 ;ER = RE(27)=error msg
"RTN","RMPFRPC1",27,0)
 ;PR = RE(28)=primary elig
"RTN","RMPFRPC1",28,0)
 ;GP = RE(29)=priority group
"RTN","RMPFRPC1",29,0)
 ;ICN= RE(30)=Integration Control Number for MPI
"RTN","RMPFRPC1",30,0)
 I '$G(DFN) D  G END
"RTN","RMPFRPC1",31,0)
 .S ER="**ERROR** Must have a DFN to run routine RMPFRPC "
"RTN","RMPFRPC1",32,0)
 K RE ;can set param to clear between calls
"RTN","RMPFRPC1",33,0)
N N ARR,BD,CL,CI,ED,EL,ER,ES,GP,ICN,L1,L2,L3
"RTN","RMPFRPC1",34,0)
 N NM,PD,PN,PR,SR,SS,ST,TE,TD,VT,ZP
"RTN","RMPFRPC1",35,0)
 S (BD,CL,CI,ED,EL,ER,ES,GP,ICN,L1,L2,L3)=""
"RTN","RMPFRPC1",36,0)
 S (NM,PD,PN,PR,SR,SS,ST,TE,TD,VT,ZP)=""
"RTN","RMPFRPC1",37,0)
D D DEM^VADPT ;sets up VADM() - demographic variables *** ck for errors
"RTN","RMPFRPC1",38,0)
 I $G(VAERR) D  G END
"RTN","RMPFRPC1",39,0)
 .S ER="**ERROR** Problem in retrieving Demographic values"
"RTN","RMPFRPC1",40,0)
 S RE(0)=""
"RTN","RMPFRPC1",41,0)
 F X=11:1:30 S RE(X)=""
"RTN","RMPFRPC1",42,0)
 S SR="" I $D(^DGSL(38.1,"B",DFN)) D  ;ck for sensitive record
"RTN","RMPFRPC1",43,0)
 .S SR=$O(^DGSL(38.1,"B",DFN,0)) ;IA#767 after approval from Mary Marks/Cameron Schlehuber
"RTN","RMPFRPC1",44,0)
 .I SR,$P($G(^DGSL(38.1,SR,0)),U,2) S RE(26)=1
"RTN","RMPFRPC1",45,0)
 S NM=$G(VADM(1)),RE(11)=NM ;name
"RTN","RMPFRPC1",46,0)
 S SS=$P($G(VADM(2)),U,1),RE(12)=SS ;ssn
"RTN","RMPFRPC1",47,0)
 S BD=$G(VADM(3)),RE(13)=BD ;DOB
"RTN","RMPFRPC1",48,0)
 D ADD^VADPT ;sets up VAPA() *** get current addr and ck errors
"RTN","RMPFRPC1",49,0)
 I $G(VAERR) D  G END
"RTN","RMPFRPC1",50,0)
 .S ER="**ERROR** Problem in retrieving Address values"
"RTN","RMPFRPC1",51,0)
 S L1=$G(VAPA(1)),RE(14)=L1
"RTN","RMPFRPC1",52,0)
 S L2=$G(VAPA(2)),RE(15)=L2
"RTN","RMPFRPC1",53,0)
 S L3=$G(VAPA(3)),RE(16)=L3
"RTN","RMPFRPC1",54,0)
 S CI=$G(VAPA(4)),RE(17)=CI
"RTN","RMPFRPC1",55,0)
 S ST=$P($G(VAPA(5)),U,1) ;State file pointer
"RTN","RMPFRPC1",56,0)
 I 'ST D  G END
"RTN","RMPFRPC1",57,0)
 .S ER="**ERROR** Invalid State entry in Patient file"
"RTN","RMPFRPC1",58,0)
 S X=ST,DIC="5",DIC(0)="NZ" D ^DIC K DIC
"RTN","RMPFRPC1",59,0)
 I +Y<1 K Y D  G END
"RTN","RMPFRPC1",60,0)
 .S ER="**ERROR** Patient State not in the State file"
"RTN","RMPFRPC1",61,0)
 S ST=$P(Y(0),U,2) K Y ;State abbreviation
"RTN","RMPFRPC1",62,0)
 S RE(18)=$P($G(VAPA(5)),U,1)_U_ST
"RTN","RMPFRPC1",63,0)
 S ZP=$S($G(VAPA(11)):VAPA(11),1:VAPA(6)),RE(19)=$P(ZP,U,1)
"RTN","RMPFRPC1",64,0)
 S TD=$G(VAPA(9)),RE(20)=TD
"RTN","RMPFRPC1",65,0)
 S TE=$G(VAPA(10)),RE(21)=TE
"RTN","RMPFRPC1",66,0)
 S PN=$G(VAPA(8))
"RTN","RMPFRPC1",67,0)
 I $E(PN,$L(PN))=" " F  Q:$E(PN,$L(PN))'=" "  S PN=$E(PN,1,$L(PN)-1)
"RTN","RMPFRPC1",68,0)
 S RE(22)=PN ;OK to here
"RTN","RMPFRPC1",69,0)
E D START^RMPFRPC0(.ARR,DFN) ;eligibility variables
"RTN","RMPFRPC1",70,0)
 ;ARR is killed and re-set in RMPFRPC0
"RTN","RMPFRPC1",71,0)
 I $L($G(ARR(5))) S ER=ARR(5)
"RTN","RMPFRPC1",72,0)
END I $L($G(ER)) S RE(27)=ER G EXIT
"RTN","RMPFRPC1",73,0)
 S RE(0)=$G(ARR(0)) ;FM DOD ^ external
"RTN","RMPFRPC1",74,0)
 S RE(23)=$G(ARR(1)) ;eligibility FM status date
"RTN","RMPFRPC1",75,0)
 S RE(24)=$G(ARR(2)) ;R3 calculated eligibility code
"RTN","RMPFRPC1",76,0)
 S:$L($G(ARR(8))) RE(24)=$G(ARR(8)) ;code^approval/disapproval^PSAS USER NAME
"RTN","RMPFRPC1",77,0)
 S RE(25)=$P($G(ARR(3)),U,1) ;eligibility status
"RTN","RMPFRPC1",78,0)
 S RE(26)=$G(ARR(4)) ;0 OR 1 FOR sensitive record
"RTN","RMPFRPC1",79,0)
 S RE(27)=$G(ARR(5)) ;error msg
"RTN","RMPFRPC1",80,0)
 S RE(28)=$G(ARR(6)) ;prim elig
"RTN","RMPFRPC1",81,0)
 S RE(29)=$G(ARR(7)) ;priority group
"RTN","RMPFRPC1",82,0)
 S X="MPIF001" X ^%ZOSF("TEST")
"RTN","RMPFRPC1",83,0)
 I $T S ICN=$$GETICN^MPIF001(DFN)
"RTN","RMPFRPC1",84,0)
 S:(ICN<1) ICN="" ;"***ICN NOT FOUND***"
"RTN","RMPFRPC1",85,0)
 S RE(30)=ICN
"RTN","RMPFRPC1",86,0)
EXIT K %DT,S0,S1,S2,S6,YY,POP
"RTN","RMPFRPC1",87,0)
 D KVAR^VADPT ;kill VADPT variables
"RTN","RMPFRPC1",88,0)
 Q
"RTN","RMPFRPC1",89,0)
 ;
"RTN","RMPFRPC1",90,0)
EXAMP ;return array to calling application
"RTN","RMPFRPC1",91,0)
 ;sorts numerically by orig subscript
"RTN","RMPFRPC1",92,0)
 ;RE(0)= DOD numeric and text
"RTN","RMPFRPC1",93,0)
 ;RE(1)= name text
"RTN","RMPFRPC1",94,0)
 ;RE(2)= SSN
"RTN","RMPFRPC1",95,0)
 ;RE(3)= DOB numeric and text
"RTN","RMPFRPC1",96,0)
 ;RE(4)= current address line 1
"RTN","RMPFRPC1",97,0)
 ;RE(5)= "" line 2
"RTN","RMPFRPC1",98,0)
 ;RE(6)= "" line 3
"RTN","RMPFRPC1",99,0)
 ;RE(7)= "" city
"RTN","RMPFRPC1",100,0)
 ;RE(8)= "" numeric and abbrev state
"RTN","RMPFRPC1",101,0)
 ;RE(9)= "" zip
"RTN","RMPFRPC1",102,0)
 ;RE(10)= temp start date numeric ^ text
"RTN","RMPFRPC1",103,0)
 ;RE(11)= temp end date numeric ^ text
"RTN","RMPFRPC1",104,0)
 ;RE(12)= current phone
"RTN","RMPFRPC1",105,0)
 ;RE(13)= elig status date  numeric ^ text
"RTN","RMPFRPC1",106,0)
 ;RE(14)= elig
"RTN","RMPFRPC1",107,0)
 ;RE(15)= elig status (V^VERIVIED)
"RTN","RMPFRPC1",108,0)
 ;RE(16)= sensitive record (1 or '')
"RTN","RMPFRPC1",109,0)
 ;RE(17)=error msg
"RTN","RMPFRPC1",110,0)
 ;RE(18)=primary elig
"RTN","RMPFRPC1",111,0)
 ;RE(19)=priority group
"RTN","RMPFRPC1",112,0)
 ;RE(20)=integration control number ICN
"RTN","RMPFRPC1",113,0)
 ;
"RTN","RMPFRPC1",114,0)
 ;RPCBroker lookup is done to retrieve the patient DFN.
"RTN","RMPFRPC1",115,0)
 ;A call is then made to this routine through the RMPFDEMOG RPC.
"RTN","RMPFRPC1",116,0)
 ;From the PATIENT file, we get the name, SSN, date of birth,
"RTN","RMPFRPC1",117,0)
 ;current address, and temporary address parameters.
"RTN","RMPFRPC3")
0^27^B4440690
"RTN","RMPFRPC3",1,0)
RMPFRPC3        ;DDC/PJU - ROES3 ELIGIBILITY MESSAGES ;11/01/02
"RTN","RMPFRPC3",2,0)
 ;;3.0;REMOTE ORDER ENTRY SYSTEM;;11/01/02
"RTN","RMPFRPC3",3,0)
START(RE,DUZ,GRP,SUBJ,RMPFARR)    ;ELIG MSGS;
"RTN","RMPFRPC3",4,0)
 ;RE WILL RETURN 1 if OK, 0 if error and XMZ if mail msg sent
"RTN","RMPFRPC3",5,0)
 ;DUZ OF USER
"RTN","RMPFRPC3",6,0)
 ;MAIL GROUP RECEIVING
"RTN","RMPFRPC3",7,0)
 ;SUBJECT LINE
"RTN","RMPFRPC3",8,0)
 ;ARRAY OF TEXT LINES FOR MSG
"RTN","RMPFRPC3",9,0)
 N CT,XMZ,EL,AP,SSN,SG,DFN S RE=1,(AP,EL,SG,SSN,DFN)=""
"RTN","RMPFRPC3",10,0)
SEND D KILL^XM
"RTN","RMPFRPC3",11,0)
 S CT=0 F  S CT=$O(RMPFARR(CT)) Q:'CT  D
"RTN","RMPFRPC3",12,0)
 .S:$P(RMPFARR(CT)," ",1)="Eligibility:" EL=$P(RMPFARR(CT),":",2),EL=$$TRIM^XLFSTR(EL)
"RTN","RMPFRPC3",13,0)
 .S:$P(RMPFARR(CT)," ",1)="SSN:" SSN=$P(RMPFARR(CT),":",2),SSN=$$TRIM^XLFSTR(SSN)
"RTN","RMPFRPC3",14,0)
 .S:$P(RMPFARR(CT),":",1)="Suggested Eligibility" SG=$P($G(RMPFARR(CT)),":",2),SG=$$TRIM^XLFSTR(SG)
"RTN","RMPFRPC3",15,0)
 .S:$P(RMPFARR(CT)," ",1)="Request:" AP=$P(RMPFARR(CT),":",2),AP=$$TRIM^XLFSTR(AP) ;approved/disapproved
"RTN","RMPFRPC3",16,0)
 S XMSUB=SUBJ
"RTN","RMPFRPC3",17,0)
 S XMDUZ=DUZ
"RTN","RMPFRPC3",18,0)
 D XMZ^XMA2
"RTN","RMPFRPC3",19,0)
 I XMZ<0 S RE=0 G END
"RTN","RMPFRPC3",20,0)
 S RE=XMZ
"RTN","RMPFRPC3",21,0)
 S DIE=3.9,DA=XMZ,DR="1.7////P" D ^DIE K DIE,DA,DR ;send priority
"RTN","RMPFRPC3",22,0)
 S XMY(DUZ)=""
"RTN","RMPFRPC3",23,0)
 S XMY(GRP)=""
"RTN","RMPFRPC3",24,0)
 S XMTEXT="RMPFARR("
"RTN","RMPFRPC3",25,0)
 S XMDUZ=DUZ
"RTN","RMPFRPC3",26,0)
 D EN1^XMD ;SEND MSG
"RTN","RMPFRPC3",27,0)
 S:$G(XMERR) RE=0 ;error occurred
"RTN","RMPFRPC3",28,0)
END ;
"RTN","RMPFRPC3",29,0)
 I XMZ>0 D
"RTN","RMPFRPC3",30,0)
 .I SUBJ="ROES Eligibility Request" D  ;setup node after msg from asps to psas
"RTN","RMPFRPC3",31,0)
 ..S DFN=$O(^DPT("SSN",SSN,0)) Q:'DFN
"RTN","RMPFRPC3",32,0)
 ..S DIC="^RMPF(791814,",DIC(0)="FZ",X=DFN,DLAYGO=791814
"RTN","RMPFRPC3",33,0)
 ..K DD,D0 D FILE^DICN Q:Y<1  S DIE=DIC,DA=+Y
"RTN","RMPFRPC3",34,0)
 ..S DR=".02////"_DT_";.03////"_DUZ_";.04///"_$$FMADD^XLFDT(DT,60) D ^DIE ;60 DAYS FOR PSAS TO ACT
"RTN","RMPFRPC3",35,0)
 ..S DR="1.01////"_SG_";1.02////"_XMZ_";2.02////2" D ^DIE K DIE,DA,DR
"RTN","RMPFRPC3",36,0)
 D KILL^XM
"RTN","RMPFRPC3",37,0)
 Q
"VER")
8.0^22.0
"^DD",791814,791814,0)
FIELD^^2.04^10
"^DD",791814,791814,0,"DDA")
N
"^DD",791814,791814,0,"DT")
3030212
"^DD",791814,791814,0,"IX","B",791814,.01)

"^DD",791814,791814,0,"IX","C",791814,2.02)

"^DD",791814,791814,0,"IX","D",791814,.04)

"^DD",791814,791814,0,"NM","ROES ELIGIBILITY CONFIRMATION")

"^DD",791814,791814,.01,0)
PATIENT^RP2'^DPT(^0;1^Q
"^DD",791814,791814,.01,.1)
PATIENT NAME
"^DD",791814,791814,.01,1,0)
^.1
"^DD",791814,791814,.01,1,1,0)
791814^B
"^DD",791814,791814,.01,1,1,1)
S ^RMPF(791814,"B",$E(X,1,30),DA)=""
"^DD",791814,791814,.01,1,1,2)
K ^RMPF(791814,"B",$E(X,1,30),DA)
"^DD",791814,791814,.01,3)

"^DD",791814,791814,.01,21,0)
^.001^1^1^3030212^^
"^DD",791814,791814,.01,21,1,0)
Pointer to the PATIENT file at the facility where file kept.
"^DD",791814,791814,.01,23,0)
^.001^1^1^3030212^^
"^DD",791814,791814,.01,23,1,0)
Maintains the pointer to the record in the PATIENT (#2) FILE.
"^DD",791814,791814,.01,"DT")
3030729
"^DD",791814,791814,.02,0)
DATE REQUEST ENTERED^D^^0;2^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",791814,791814,.02,21,0)
^.001^3^3^3030212^^^
"^DD",791814,791814,.02,21,1,0)
This is the date the request is entered.  It is to
"^DD",791814,791814,.02,21,2,0)
be filled in automatically by the program entering the
"^DD",791814,791814,.02,21,3,0)
request.
"^DD",791814,791814,.02,"DT")
3030729
"^DD",791814,791814,.03,0)
ENTERING USER (ASPS)^P200'^VA(200,^0;3^Q
"^DD",791814,791814,.03,3)

"^DD",791814,791814,.03,21,0)
^.001^2^2^3030212^^^^
"^DD",791814,791814,.03,21,1,0)
This is the person entering the request for the eligibility confirmation.
"^DD",791814,791814,.03,21,2,0)
Usually this person will be an Audiologist.
"^DD",791814,791814,.03,23,0)
^.001^6^6^3030212^^^^
"^DD",791814,791814,.03,23,1,0)
This field is filled in automatically by the ROES3 program when
"^DD",791814,791814,.03,23,2,0)
a user accesses CPRS Tools to connect to the DDC for a patient
"^DD",791814,791814,.03,23,3,0)
order, and the system cannot determine an acceptable eligibility,
"^DD",791814,791814,.03,23,4,0)
or one that PSAS requires to be approved by them.
"^DD",791814,791814,.03,23,5,0)
It is used in the GUI application and in the messages sent
"^DD",791814,791814,.03,23,6,0)
to PSAS and ASPS about the request.
"^DD",791814,791814,.03,"DT")
3030212
"^DD",791814,791814,.04,0)
EXPIRATION DATE^D^^0;4^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",791814,791814,.04,1,0)
^.1
"^DD",791814,791814,.04,1,1,0)
791814^D
"^DD",791814,791814,.04,1,1,1)
S ^RMPF(791814,"D",$E(X,1,30),DA)=""
"^DD",791814,791814,.04,1,1,2)
K ^RMPF(791814,"D",$E(X,1,30),DA)
"^DD",791814,791814,.04,1,1,"%D",0)
^^1^1^3030212^
"^DD",791814,791814,.04,1,1,"%D",1,0)
Keeps a sorted list of expiration dates for facilitation of purging.
"^DD",791814,791814,.04,1,1,"DT")
3030212
"^DD",791814,791814,.04,3)

"^DD",791814,791814,.04,21,0)
^.001^1^1^3030212^^^
"^DD",791814,791814,.04,21,1,0)
This is the date that the request or approval will expire.
"^DD",791814,791814,.04,"DT")
3030212
"^DD",791814,791814,1.01,0)
SUGGESTED ELIGIBILITY^F^^1;1^K:$L(X)>3!($L(X)<2) X
"^DD",791814,791814,1.01,3)

"^DD",791814,791814,1.01,21,0)
^.001^3^3^3030212^^
"^DD",791814,791814,1.01,21,1,0)
This is the eligibility code that the entering user suggests.
"^DD",791814,791814,1.01,21,2,0)
It will be seen by the PSAS user from the menu option RMPFDE2
"^DD",791814,791814,1.01,21,3,0)
that displays eligibilities waiting for approval.
"^DD",791814,791814,1.01,"DT")
3030212
"^DD",791814,791814,1.02,0)
EMAIL MSG NUMBER^P3.9'^XMB(3.9,^1;2^Q
"^DD",791814,791814,1.02,3)

"^DD",791814,791814,1.02,21,0)
^.001^1^1^3030212^^^^
"^DD",791814,791814,1.02,21,1,0)
This is the internal number of the message sent to PSAS
"^DD",791814,791814,1.02,23,0)
^.001^4^4^3030212^^^
"^DD",791814,791814,1.02,23,1,0)
Pointer to the MESSAGE file (#3.9)
"^DD",791814,791814,1.02,23,2,0)
It is used by option RMPFDE2 to get and display the additional
"^DD",791814,791814,1.02,23,3,0)
text that ASPS entered to assist in making the eligibility
"^DD",791814,791814,1.02,23,4,0)
determination.
"^DD",791814,791814,1.02,"DT")
3030212
"^DD",791814,791814,2.01,0)
PSAS ELIGIBILITY^F^^2;1^K:$L(X)>3!($L(X)<2) X
"^DD",791814,791814,2.01,3)

"^DD",791814,791814,2.01,21,0)
^.001^2^2^3030212^^^
"^DD",791814,791814,2.01,21,1,0)
THIS IS THE ELIGIBILITY CODE THAT PSAS SELECTS TO APPROVE
"^DD",791814,791814,2.01,21,2,0)
IT MAY OR MAY NOT BE THE SAME AS THE ONE SUGGESTED BY ASPS
"^DD",791814,791814,2.01,23,0)
^.001^4^4^3030212^^
"^DD",791814,791814,2.01,23,1,0)
This is the eligibility code approved or chosen by PSAS
"^DD",791814,791814,2.01,23,2,0)
from the menu option RMPFDE2.  It may or may not be the
"^DD",791814,791814,2.01,23,3,0)
same as the one suggested by ASPS. It may also be blank
"^DD",791814,791814,2.01,23,4,0)
in the cases of eligibility denial.
"^DD",791814,791814,2.01,"DT")
3030212
"^DD",791814,791814,2.02,0)
APPROVE/REJECT^S^0:REJECTED;1:APPROVED;2:WAITING;^2;2^Q
"^DD",791814,791814,2.02,.1)
ACCEPT/DENY
"^DD",791814,791814,2.02,1,0)
^.1
"^DD",791814,791814,2.02,1,1,0)
791814^C
"^DD",791814,791814,2.02,1,1,1)
S ^RMPF(791814,"C",$E(X,1,30),DA)=""
"^DD",791814,791814,2.02,1,1,2)
K ^RMPF(791814,"C",$E(X,1,30),DA)
"^DD",791814,791814,2.02,1,1,"%D",0)
^.101^2^2^3030212^^
"^DD",791814,791814,2.02,1,1,"%D",1,0)
This cross-reference is set to facilitate the VistA menu option: RMPFDE2
"^DD",791814,791814,2.02,1,1,"%D",2,0)
used for PSAS to loop through the 2's to evaluate the eligibility request.
"^DD",791814,791814,2.02,1,1,"DT")
3030212
"^DD",791814,791814,2.02,21,0)
^.001^3^3^3030212^^^^
"^DD",791814,791814,2.02,21,1,0)
"0" SHOWS THE REQUEST IS REJECTED
"^DD",791814,791814,2.02,21,2,0)
"1" SHOWS THE REQUEST IS APPROVED
"^DD",791814,791814,2.02,21,3,0)
"2" SHOWS WAITING FOR ACTION
"^DD",791814,791814,2.02,23,0)
^.001^5^5^3030212^^^^
"^DD",791814,791814,2.02,23,1,0)
Program RMPFDE2 puts in 1 if the request is approved
"^DD",791814,791814,2.02,23,2,0)
or if PSAS selects another eligibility to approve.
"^DD",791814,791814,2.02,23,3,0)
The program puts in a 0 if the request is rejected.
"^DD",791814,791814,2.02,23,4,0)
Having a 2 indicates that the request has not
"^DD",791814,791814,2.02,23,5,0)
been acted on yet.
"^DD",791814,791814,2.02,"DT")
3030212
"^DD",791814,791814,2.03,0)
USER (PSAS)^P200'^VA(200,^2;3^Q
"^DD",791814,791814,2.03,3)

"^DD",791814,791814,2.03,21,0)
^.001^2^2^3030212^^^
"^DD",791814,791814,2.03,21,1,0)
THIS IS THE NAME OF THE PERSON ACTING ON THE REQUEST.
"^DD",791814,791814,2.03,21,2,0)
USUALLY A PERSON FROM PSAS, IN AN OFFICIAL STATUS.
"^DD",791814,791814,2.03,"DT")
3030212
"^DD",791814,791814,2.04,0)
ACTION DATE^D^^2;4^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",791814,791814,2.04,3)

"^DD",791814,791814,2.04,21,0)
^.001^1^1^3030212^^^^
"^DD",791814,791814,2.04,21,1,0)
This is the date that the PSAS official acted on the request
"^DD",791814,791814,2.04,23,0)
^.001^4^4^3030212^^^
"^DD",791814,791814,2.04,23,1,0)
This field is used in messages that display when a request
"^DD",791814,791814,2.04,23,2,0)
was acted on. It is also referenced in the GUI application
"^DD",791814,791814,2.04,23,3,0)
ROES3.EXE to display the status of a prior request for approval
"^DD",791814,791814,2.04,23,4,0)
of a patient's eligibility.
"^DD",791814,791814,2.04,"DT")
3030212
"^DIC",791814,791814,0)
ROES ELIGIBILITY CONFIRMATION^791814
"^DIC",791814,791814,0,"GL")
^RMPF(791814,
"^DIC",791814,791814,"%",0)
^1.005^^
"^DIC",791814,791814,"%D",0)
^^15^15^3030212^^
"^DIC",791814,791814,"%D",1,0)
This file is used to facilitate the approval of ROES eligibilities
"^DIC",791814,791814,"%D",2,0)
that are entered by ASPS (Audiology and Speech Pathology Service)
"^DIC",791814,791814,"%D",3,0)
and are required to be approved by PSAS (Prosthetics and Sensory Aids
"^DIC",791814,791814,"%D",4,0)
Service). All of the fields are populated by data from the ROES3.exe
"^DIC",791814,791814,"%D",5,0)
and the Vista RMPFDE2 option.  No direct editing should be necessary.
"^DIC",791814,791814,"%D",6,0)
ROES3 is a GUI application that is accessed from the CPRS Tools menu.
"^DIC",791814,791814,"%D",7,0)
Through ROES 3, ASPS connects to the DDC web site to order supplies
"^DIC",791814,791814,"%D",8,0)
for patients.  If the patient does not have pre-appoved eligibility
"^DIC",791814,791814,"%D",9,0)
for ROES orders, it must be sent to PSAS for approval, before the
"^DIC",791814,791814,"%D",10,0)
order can be placed. A message is sent to the RMPF ROES UPDATES (PSAS)
"^DIC",791814,791814,"%D",11,0)
mail group that a request was entered.  PSAS uses the RMPFDE2 option
"^DIC",791814,791814,"%D",12,0)
to evaluate the request and a message back to the RMPF ROES UPDATES (ASPS)
"^DIC",791814,791814,"%D",13,0)
mail group is sent. From that time, when the ROES application is
"^DIC",791814,791814,"%D",14,0)
accessed for the patient, the action by PSAS will be noted and the
"^DIC",791814,791814,"%D",15,0)
connection will be made if the eligibility was approved.
"^DIC",791814,"B","ROES ELIGIBILITY CONFIRMATION",791814)

**END**
**END**

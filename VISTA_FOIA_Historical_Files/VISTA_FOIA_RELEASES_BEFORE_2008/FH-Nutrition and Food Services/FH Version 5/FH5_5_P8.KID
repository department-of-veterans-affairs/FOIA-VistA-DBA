KIDS Distribution saved on Aug 22, 2007@08:41:34
FH*5.5*8
**KIDS**:FH*5.5*8^

**INSTALL NAME**
FH*5.5*8
"BLD",6471,0)
FH*5.5*8^DIETETICS^0^3070822^y
"BLD",6471,4,0)
^9.64PA^114^6
"BLD",6471,4,111,0)
111
"BLD",6471,4,111,2,0)
^9.641^111^1
"BLD",6471,4,111,2,111,0)
DIETS  (File-top level)
"BLD",6471,4,111,2,111,1,0)
^9.6411^5^1
"BLD",6471,4,111,2,111,1,5,0)
BULLETIN CLINICIAN?
"BLD",6471,4,111,222)
y^y^p^^^^n^^n
"BLD",6471,4,111,224)

"BLD",6471,4,114,0)
114
"BLD",6471,4,114,222)
y^y^f^^^^n
"BLD",6471,4,115,0)
115
"BLD",6471,4,115,2,0)
^9.641^115.031^4
"BLD",6471,4,115,2,115,0)
NUTRITION PERSON  (File-top level)
"BLD",6471,4,115,2,115,1,0)
^9.6411^^
"BLD",6471,4,115,2,115.011,0)
NUTRITION ASSESSMENT  (sub-file)
"BLD",6471,4,115,2,115.011,1,0)
^9.6411^87^28
"BLD",6471,4,115,2,115.011,1,50,0)
WCCM
"BLD",6471,4,115,2,115.011,1,51,0)
CIBW
"BLD",6471,4,115,2,115.011,1,52,0)
CERBO
"BLD",6471,4,115,2,115.011,1,53,0)
CENB
"BLD",6471,4,115,2,115.011,1,54,0)
PCTB
"BLD",6471,4,115,2,115.011,1,55,0)
SEF
"BLD",6471,4,115,2,115.011,1,56,0)
CFRB
"BLD",6471,4,115,2,115.011,1,57,0)
CFRBO
"BLD",6471,4,115,2,115.011,1,58,0)
CPRBO
"BLD",6471,4,115,2,115.011,1,60,0)
DIAGNOSIS FROM PROBLEM LIST
"BLD",6471,4,115,2,115.011,1,61,0)
DATE ENTERED IN PROBLEM LIST
"BLD",6471,4,115,2,115.011,1,62,0)
DIAGNOSIS ENTERED BY NFS
"BLD",6471,4,115,2,115.011,1,63,0)
NFS DIAGNOSIS DATE
"BLD",6471,4,115,2,115.011,1,64,0)
ASSESSMENT FOLLOW-UP DATE
"BLD",6471,4,115,2,115.011,1,65,0)
ASSESSMENT STATUS
"BLD",6471,4,115,2,115.011,1,66,0)
ASSESSMENT DIET
"BLD",6471,4,115,2,115.011,1,67,0)
ASSESSMENT TF DATE
"BLD",6471,4,115,2,115.011,1,67.2,0)
ASSESSMENT TF COMMENT
"BLD",6471,4,115,2,115.011,1,67.3,0)
ASSESSMENT TF TOTAL ML'S
"BLD",6471,4,115,2,115.011,1,67.4,0)
ASSESSMENT TF TOTAL KCALS/DAY
"BLD",6471,4,115,2,115.011,1,80,0)
PT CONFINED IN BED
"BLD",6471,4,115,2,115.011,1,81,0)
NEW WEIGHT
"BLD",6471,4,115,2,115.011,1,82,0)
DATE NEW WEIGHT TAKEN
"BLD",6471,4,115,2,115.011,1,83,0)
NFS PROBLEM
"BLD",6471,4,115,2,115.011,1,84,0)
FOOD/DRUG INTERACTION
"BLD",6471,4,115,2,115.011,1,85,0)
FOOD/DRUG COMMENT
"BLD",6471,4,115,2,115.011,1,86,0)
PROTEIN LEVEL
"BLD",6471,4,115,2,115.011,1,87,0)
SPINAL CORD
"BLD",6471,4,115,2,115.031,0)
ASSESSMENT TF PRODUCT  (sub-file)
"BLD",6471,4,115,2,115.031,1,0)
^9.6411^2^3
"BLD",6471,4,115,2,115.031,1,.01,0)
ASSESSMENT TF PRODUCT
"BLD",6471,4,115,2,115.031,1,1,0)
ASSESSMENT TF STRENGTH
"BLD",6471,4,115,2,115.031,1,2,0)
ASSESSMENT TF QUANTITY
"BLD",6471,4,115,2,115.12,0)
ALERT  (sub-file)
"BLD",6471,4,115,2,115.12,1,0)
^9.6411^3^4
"BLD",6471,4,115,2,115.12,1,.01,0)
DATE ALERT CREATED
"BLD",6471,4,115,2,115.12,1,1,0)
TYPE OF ALERT
"BLD",6471,4,115,2,115.12,1,2,0)
PATIENT LOCATION
"BLD",6471,4,115,2,115.12,1,3,0)
DRUG NAME
"BLD",6471,4,115,222)
y^y^p^^^^n^^n
"BLD",6471,4,115,224)

"BLD",6471,4,115.2,0)
115.2
"BLD",6471,4,115.2,222)
y^y^f^^^^n
"BLD",6471,4,119.6,0)
119.6
"BLD",6471,4,119.6,222)
y^y^f^^^^n
"BLD",6471,4,119.9,0)
119.9
"BLD",6471,4,119.9,2,0)
^9.641^119.985^1
"BLD",6471,4,119.9,2,119.985,0)
DRUG CLASSIFICATIONS  (sub-file)
"BLD",6471,4,119.9,2,119.985,1,0)
^9.6411^6^4
"BLD",6471,4,119.9,2,119.985,1,3,0)
PRINT ON ASSESSMENT
"BLD",6471,4,119.9,2,119.985,1,4,0)
PRINT ON SCREENING
"BLD",6471,4,119.9,2,119.985,1,5,0)
PRINT ORDER
"BLD",6471,4,119.9,2,119.985,1,6,0)
CREATE ALERT
"BLD",6471,4,119.9,222)
y^y^p^^^^n^^n
"BLD",6471,4,119.9,224)

"BLD",6471,4,"APDD",111,111)

"BLD",6471,4,"APDD",111,111,5)

"BLD",6471,4,"APDD",115,115)

"BLD",6471,4,"APDD",115,115.011)

"BLD",6471,4,"APDD",115,115.011,50)

"BLD",6471,4,"APDD",115,115.011,51)

"BLD",6471,4,"APDD",115,115.011,52)

"BLD",6471,4,"APDD",115,115.011,53)

"BLD",6471,4,"APDD",115,115.011,54)

"BLD",6471,4,"APDD",115,115.011,55)

"BLD",6471,4,"APDD",115,115.011,56)

"BLD",6471,4,"APDD",115,115.011,57)

"BLD",6471,4,"APDD",115,115.011,58)

"BLD",6471,4,"APDD",115,115.011,60)

"BLD",6471,4,"APDD",115,115.011,61)

"BLD",6471,4,"APDD",115,115.011,62)

"BLD",6471,4,"APDD",115,115.011,63)

"BLD",6471,4,"APDD",115,115.011,64)

"BLD",6471,4,"APDD",115,115.011,65)

"BLD",6471,4,"APDD",115,115.011,66)

"BLD",6471,4,"APDD",115,115.011,67)

"BLD",6471,4,"APDD",115,115.011,67.2)

"BLD",6471,4,"APDD",115,115.011,67.3)

"BLD",6471,4,"APDD",115,115.011,67.4)

"BLD",6471,4,"APDD",115,115.011,80)

"BLD",6471,4,"APDD",115,115.011,81)

"BLD",6471,4,"APDD",115,115.011,82)

"BLD",6471,4,"APDD",115,115.011,83)

"BLD",6471,4,"APDD",115,115.011,84)

"BLD",6471,4,"APDD",115,115.011,85)

"BLD",6471,4,"APDD",115,115.011,86)

"BLD",6471,4,"APDD",115,115.011,87)

"BLD",6471,4,"APDD",115,115.031)

"BLD",6471,4,"APDD",115,115.031,.01)

"BLD",6471,4,"APDD",115,115.031,1)

"BLD",6471,4,"APDD",115,115.031,2)

"BLD",6471,4,"APDD",115,115.12)

"BLD",6471,4,"APDD",115,115.12,.01)

"BLD",6471,4,"APDD",115,115.12,1)

"BLD",6471,4,"APDD",115,115.12,2)

"BLD",6471,4,"APDD",115,115.12,3)

"BLD",6471,4,"APDD",119.9,119.985)

"BLD",6471,4,"APDD",119.9,119.985,3)

"BLD",6471,4,"APDD",119.9,119.985,4)

"BLD",6471,4,"APDD",119.9,119.985,5)

"BLD",6471,4,"APDD",119.9,119.985,6)

"BLD",6471,4,"B",111,111)

"BLD",6471,4,"B",114,114)

"BLD",6471,4,"B",115,115)

"BLD",6471,4,"B",115.2,115.2)

"BLD",6471,4,"B",119.6,119.6)

"BLD",6471,4,"B",119.9,119.9)

"BLD",6471,6.3)
28
"BLD",6471,"ABPKG")
n
"BLD",6471,"INID")
^y
"BLD",6471,"INIT")
FH55P8
"BLD",6471,"KRN",0)
^9.67PA^8989.52^19
"BLD",6471,"KRN",.4,0)
.4
"BLD",6471,"KRN",.4,"NM",0)
^9.68A^2^2
"BLD",6471,"KRN",.4,"NM",1,0)
FHSYP2    FILE #119.9^119.9^0
"BLD",6471,"KRN",.4,"NM",2,0)
FHSELST2    FILE #115.2^115.2^0
"BLD",6471,"KRN",.4,"NM","B","FHSELST2    FILE #115.2",2)

"BLD",6471,"KRN",.4,"NM","B","FHSYP2    FILE #119.9",1)

"BLD",6471,"KRN",.401,0)
.401
"BLD",6471,"KRN",.402,0)
.402
"BLD",6471,"KRN",.402,"NM",0)
^9.68A^1^1
"BLD",6471,"KRN",.402,"NM",1,0)
FHSITEC1    FILE #119.9^119.9^0
"BLD",6471,"KRN",.402,"NM","B","FHSITEC1    FILE #119.9",1)

"BLD",6471,"KRN",.403,0)
.403
"BLD",6471,"KRN",.403,"NM",0)
^9.68A^^
"BLD",6471,"KRN",.5,0)
.5
"BLD",6471,"KRN",.84,0)
.84
"BLD",6471,"KRN",3.6,0)
3.6
"BLD",6471,"KRN",3.8,0)
3.8
"BLD",6471,"KRN",9.2,0)
9.2
"BLD",6471,"KRN",9.8,0)
9.8
"BLD",6471,"KRN",9.8,"NM",0)
^9.68A^56^49
"BLD",6471,"KRN",9.8,"NM",1,0)
FHORC^^0^B6083686
"BLD",6471,"KRN",9.8,"NM",2,0)
FHORD7^^0^B15930347
"BLD",6471,"KRN",9.8,"NM",3,0)
FHORT3^^0^B5304161
"BLD",6471,"KRN",9.8,"NM",5,0)
FHASM1^^0^B65471080
"BLD",6471,"KRN",9.8,"NM",6,0)
FHASM2^^0^B36109288
"BLD",6471,"KRN",9.8,"NM",7,0)
FHASM3^^0^B17595871
"BLD",6471,"KRN",9.8,"NM",8,0)
FHASM3A^^0^B14361776
"BLD",6471,"KRN",9.8,"NM",9,0)
FHASM5^^0^B24965508
"BLD",6471,"KRN",9.8,"NM",10,0)
FHASM6^^0^B24772464
"BLD",6471,"KRN",9.8,"NM",11,0)
FHASM7^^0^B65406983
"BLD",6471,"KRN",9.8,"NM",14,0)
FHOMRC1^^0^B12945292
"BLD",6471,"KRN",9.8,"NM",15,0)
FH55P8^^0^B3618153
"BLD",6471,"KRN",9.8,"NM",16,0)
FHASMR^^0^B4709674
"BLD",6471,"KRN",9.8,"NM",17,0)
FHASMR1^^0^B40014572
"BLD",6471,"KRN",9.8,"NM",18,0)
FHASM2A^^0^B17396578
"BLD",6471,"KRN",9.8,"NM",19,0)
FHASM2D^^0^B3712344
"BLD",6471,"KRN",9.8,"NM",20,0)
FHASM2B^^0^B5467504
"BLD",6471,"KRN",9.8,"NM",21,0)
FHASM2C^^0^B14314553
"BLD",6471,"KRN",9.8,"NM",22,0)
FHCTF5^^0^B27613235
"BLD",6471,"KRN",9.8,"NM",23,0)
FHSEL1^^0^B22413340
"BLD",6471,"KRN",9.8,"NM",24,0)
FHSELA1^^0^B45773612
"BLD",6471,"KRN",9.8,"NM",25,0)
FHSELA2^^0^B97907668
"BLD",6471,"KRN",9.8,"NM",26,0)
FHWGMR^^0^B8808627
"BLD",6471,"KRN",9.8,"NM",27,0)
FHASM4^^0^B16463510
"BLD",6471,"KRN",9.8,"NM",28,0)
FHASP^^0^B22615206
"BLD",6471,"KRN",9.8,"NM",29,0)
FHWHEA^^0^B27347368
"BLD",6471,"KRN",9.8,"NM",30,0)
FHREC4^^0^B5747106
"BLD",6471,"KRN",9.8,"NM",31,0)
FHASMR2^^0^B66960757
"BLD",6471,"KRN",9.8,"NM",34,0)
FHORX1^^0^B36979468
"BLD",6471,"KRN",9.8,"NM",35,0)
FHORX1A^^0^B16289786
"BLD",6471,"KRN",9.8,"NM",36,0)
FHORX1B^^0^B12528647
"BLD",6471,"KRN",9.8,"NM",37,0)
FHORE1^^0^B17533631
"BLD",6471,"KRN",9.8,"NM",38,0)
FHORE21^^0^B31608695
"BLD",6471,"KRN",9.8,"NM",39,0)
FHNO21^^0^B16043749
"BLD",6471,"KRN",9.8,"NM",40,0)
FHNO31^^0^B29617742
"BLD",6471,"KRN",9.8,"NM",41,0)
FHNO7^^0^B44064186
"BLD",6471,"KRN",9.8,"NM",42,0)
FHSP^^0^B75939691
"BLD",6471,"KRN",9.8,"NM",43,0)
FHSPED^^0^B71023432
"BLD",6471,"KRN",9.8,"NM",44,0)
FHORD13^^0^B53521157
"BLD",6471,"KRN",9.8,"NM",45,0)
FHORD1^^0^B21560497
"BLD",6471,"KRN",9.8,"NM",46,0)
FHCLN^^0^B1290608
"BLD",6471,"KRN",9.8,"NM",48,0)
FHMTK1B^^0^B27056788
"BLD",6471,"KRN",9.8,"NM",50,0)
FHOMTK2^^0^B28087170
"BLD",6471,"KRN",9.8,"NM",51,0)
FHASXR1^^0^B27507511
"BLD",6471,"KRN",9.8,"NM",52,0)
FHSP11^^0^B6692534
"BLD",6471,"KRN",9.8,"NM",53,0)
FHWORA^^0^B19919064
"BLD",6471,"KRN",9.8,"NM",54,0)
FHASP1^^0^B16943415
"BLD",6471,"KRN",9.8,"NM",55,0)
FHASXR^^0^B9601519
"BLD",6471,"KRN",9.8,"NM",56,0)
FHWADM^^0^B26287048
"BLD",6471,"KRN",9.8,"NM","B","FH55P8",15)

"BLD",6471,"KRN",9.8,"NM","B","FHASM1",5)

"BLD",6471,"KRN",9.8,"NM","B","FHASM2",6)

"BLD",6471,"KRN",9.8,"NM","B","FHASM2A",18)

"BLD",6471,"KRN",9.8,"NM","B","FHASM2B",20)

"BLD",6471,"KRN",9.8,"NM","B","FHASM2C",21)

"BLD",6471,"KRN",9.8,"NM","B","FHASM2D",19)

"BLD",6471,"KRN",9.8,"NM","B","FHASM3",7)

"BLD",6471,"KRN",9.8,"NM","B","FHASM3A",8)

"BLD",6471,"KRN",9.8,"NM","B","FHASM4",27)

"BLD",6471,"KRN",9.8,"NM","B","FHASM5",9)

"BLD",6471,"KRN",9.8,"NM","B","FHASM6",10)

"BLD",6471,"KRN",9.8,"NM","B","FHASM7",11)

"BLD",6471,"KRN",9.8,"NM","B","FHASMR",16)

"BLD",6471,"KRN",9.8,"NM","B","FHASMR1",17)

"BLD",6471,"KRN",9.8,"NM","B","FHASMR2",31)

"BLD",6471,"KRN",9.8,"NM","B","FHASP",28)

"BLD",6471,"KRN",9.8,"NM","B","FHASP1",54)

"BLD",6471,"KRN",9.8,"NM","B","FHASXR",55)

"BLD",6471,"KRN",9.8,"NM","B","FHASXR1",51)

"BLD",6471,"KRN",9.8,"NM","B","FHCLN",46)

"BLD",6471,"KRN",9.8,"NM","B","FHCTF5",22)

"BLD",6471,"KRN",9.8,"NM","B","FHMTK1B",48)

"BLD",6471,"KRN",9.8,"NM","B","FHNO21",39)

"BLD",6471,"KRN",9.8,"NM","B","FHNO31",40)

"BLD",6471,"KRN",9.8,"NM","B","FHNO7",41)

"BLD",6471,"KRN",9.8,"NM","B","FHOMRC1",14)

"BLD",6471,"KRN",9.8,"NM","B","FHOMTK2",50)

"BLD",6471,"KRN",9.8,"NM","B","FHORC",1)

"BLD",6471,"KRN",9.8,"NM","B","FHORD1",45)

"BLD",6471,"KRN",9.8,"NM","B","FHORD13",44)

"BLD",6471,"KRN",9.8,"NM","B","FHORD7",2)

"BLD",6471,"KRN",9.8,"NM","B","FHORE1",37)

"BLD",6471,"KRN",9.8,"NM","B","FHORE21",38)

"BLD",6471,"KRN",9.8,"NM","B","FHORT3",3)

"BLD",6471,"KRN",9.8,"NM","B","FHORX1",34)

"BLD",6471,"KRN",9.8,"NM","B","FHORX1A",35)

"BLD",6471,"KRN",9.8,"NM","B","FHORX1B",36)

"BLD",6471,"KRN",9.8,"NM","B","FHREC4",30)

"BLD",6471,"KRN",9.8,"NM","B","FHSEL1",23)

"BLD",6471,"KRN",9.8,"NM","B","FHSELA1",24)

"BLD",6471,"KRN",9.8,"NM","B","FHSELA2",25)

"BLD",6471,"KRN",9.8,"NM","B","FHSP",42)

"BLD",6471,"KRN",9.8,"NM","B","FHSP11",52)

"BLD",6471,"KRN",9.8,"NM","B","FHSPED",43)

"BLD",6471,"KRN",9.8,"NM","B","FHWADM",56)

"BLD",6471,"KRN",9.8,"NM","B","FHWGMR",26)

"BLD",6471,"KRN",9.8,"NM","B","FHWHEA",29)

"BLD",6471,"KRN",9.8,"NM","B","FHWORA",53)

"BLD",6471,"KRN",19,0)
19
"BLD",6471,"KRN",19,"NM",0)
^9.68A^7^6
"BLD",6471,"KRN",19,"NM",1,0)
FHASCM^^2
"BLD",6471,"KRN",19,"NM",2,0)
FHASM1^^0
"BLD",6471,"KRN",19,"NM",3,0)
FHSELX^^2
"BLD",6471,"KRN",19,"NM",4,0)
FHSELA^^0
"BLD",6471,"KRN",19,"NM",6,0)
FHSELU^^0
"BLD",6471,"KRN",19,"NM",7,0)
FHSELF^^0
"BLD",6471,"KRN",19,"NM","B","FHASCM",1)

"BLD",6471,"KRN",19,"NM","B","FHASM1",2)

"BLD",6471,"KRN",19,"NM","B","FHSELA",4)

"BLD",6471,"KRN",19,"NM","B","FHSELF",7)

"BLD",6471,"KRN",19,"NM","B","FHSELU",6)

"BLD",6471,"KRN",19,"NM","B","FHSELX",3)

"BLD",6471,"KRN",19.1,0)
19.1
"BLD",6471,"KRN",101,0)
101
"BLD",6471,"KRN",409.61,0)
409.61
"BLD",6471,"KRN",771,0)
771
"BLD",6471,"KRN",870,0)
870
"BLD",6471,"KRN",8989.51,0)
8989.51
"BLD",6471,"KRN",8989.52,0)
8989.52
"BLD",6471,"KRN",8994,0)
8994
"BLD",6471,"KRN","B",.4,.4)

"BLD",6471,"KRN","B",.401,.401)

"BLD",6471,"KRN","B",.402,.402)

"BLD",6471,"KRN","B",.403,.403)

"BLD",6471,"KRN","B",.5,.5)

"BLD",6471,"KRN","B",.84,.84)

"BLD",6471,"KRN","B",3.6,3.6)

"BLD",6471,"KRN","B",3.8,3.8)

"BLD",6471,"KRN","B",9.2,9.2)

"BLD",6471,"KRN","B",9.8,9.8)

"BLD",6471,"KRN","B",19,19)

"BLD",6471,"KRN","B",19.1,19.1)

"BLD",6471,"KRN","B",101,101)

"BLD",6471,"KRN","B",409.61,409.61)

"BLD",6471,"KRN","B",771,771)

"BLD",6471,"KRN","B",870,870)

"BLD",6471,"KRN","B",8989.51,8989.51)

"BLD",6471,"KRN","B",8989.52,8989.52)

"BLD",6471,"KRN","B",8994,8994)

"BLD",6471,"QUES",0)
^9.62^^
"BLD",6471,"REQB",0)
^9.611^^
"FIA",111)
DIETS
"FIA",111,0)
^FH(111,
"FIA",111,0,0)
111sI
"FIA",111,0,1)
y^y^p^^^^n^^n
"FIA",111,0,10)

"FIA",111,0,11)

"FIA",111,0,"RLRO")

"FIA",111,0,"VR")
5.5^FH
"FIA",111,111)
1
"FIA",111,111,5)

"FIA",114)
RECIPE
"FIA",114,0)
^FH(114,
"FIA",114,0,0)
114sI
"FIA",114,0,1)
y^y^f^^^^n
"FIA",114,0,10)

"FIA",114,0,11)

"FIA",114,0,"RLRO")

"FIA",114,0,"VR")
5.5^FH
"FIA",114,114)
0
"FIA",114,114.01)
0
"FIA",114,114.0103)
0
"FIA",114,114.02)
0
"FIA",114,114.03)
0
"FIA",114,114.05)
0
"FIA",115)
NUTRITION PERSON
"FIA",115,0)
^FHPT(
"FIA",115,0,0)
115
"FIA",115,0,1)
y^y^f^^^^n^^n
"FIA",115,0,10)

"FIA",115,0,11)

"FIA",115,0,"RLRO")

"FIA",115,0,"VR")
5.5^FH
"FIA",115,115)
0
"FIA",115,115.01)
0
"FIA",115,115.011)
0
"FIA",115,115.011,50)

"FIA",115,115.011,51)

"FIA",115,115.011,52)

"FIA",115,115.011,53)

"FIA",115,115.011,54)

"FIA",115,115.011,55)

"FIA",115,115.011,56)

"FIA",115,115.011,57)

"FIA",115,115.011,58)

"FIA",115,115.011,60)

"FIA",115,115.011,61)

"FIA",115,115.011,62)

"FIA",115,115.011,63)

"FIA",115,115.011,64)

"FIA",115,115.011,65)

"FIA",115,115.011,66)

"FIA",115,115.011,67)

"FIA",115,115.011,67.2)

"FIA",115,115.011,67.3)

"FIA",115,115.011,67.4)

"FIA",115,115.011,80)

"FIA",115,115.011,81)

"FIA",115,115.011,82)

"FIA",115,115.011,83)

"FIA",115,115.011,84)

"FIA",115,115.011,85)

"FIA",115,115.011,86)

"FIA",115,115.011,87)

"FIA",115,115.012)
0
"FIA",115,115.016)
0
"FIA",115,115.017)
0
"FIA",115,115.018)
0
"FIA",115,115.02)
0
"FIA",115,115.021)
0
"FIA",115,115.03)
0
"FIA",115,115.031)
0
"FIA",115,115.031,.01)

"FIA",115,115.031,1)

"FIA",115,115.031,2)

"FIA",115,115.04)
0
"FIA",115,115.05)
0
"FIA",115,115.06)
0
"FIA",115,115.07)
0
"FIA",115,115.08)
0
"FIA",115,115.09)
0
"FIA",115,115.1)
0
"FIA",115,115.11)
0
"FIA",115,115.1171)
0
"FIA",115,115.12)
0
"FIA",115,115.12,.01)

"FIA",115,115.12,1)

"FIA",115,115.12,2)

"FIA",115,115.12,3)

"FIA",115,115.14)
0
"FIA",115,115.1619)
0
"FIA",115,115.1626)
0
"FIA",115,115.1627)
0
"FIA",115.2)
FOOD PREFERENCES
"FIA",115.2,0)
^FH(115.2,
"FIA",115.2,0,0)
115.2sI
"FIA",115.2,0,1)
y^y^f^^^^n
"FIA",115.2,0,10)

"FIA",115.2,0,11)

"FIA",115.2,0,"RLRO")

"FIA",115.2,0,"VR")
5.5^FH
"FIA",115.2,115.2)
0
"FIA",115.2,115.21)
0
"FIA",115.2,115.225)
0
"FIA",119.6)
NUTRITION LOCATION
"FIA",119.6,0)
^FH(119.6,
"FIA",119.6,0,0)
119.6sI
"FIA",119.6,0,1)
y^y^f^^^^n
"FIA",119.6,0,10)

"FIA",119.6,0,11)

"FIA",119.6,0,"RLRO")

"FIA",119.6,0,"VR")
5.5^FH
"FIA",119.6,119.6)
0
"FIA",119.6,119.61)
0
"FIA",119.6,119.62)
0
"FIA",119.6,119.63)
0
"FIA",119.6,119.64)
0
"FIA",119.6,119.66)
0
"FIA",119.9)
FH SITE PARAMETERS
"FIA",119.9,0)
^FH(119.9,
"FIA",119.9,0,0)
119.9
"FIA",119.9,0,1)
y^y^p^^^^n^^n
"FIA",119.9,0,10)

"FIA",119.9,0,11)

"FIA",119.9,0,"RLRO")

"FIA",119.9,0,"VR")
5.5^FH
"FIA",119.9,119.9)
1
"FIA",119.9,119.985)
1
"FIA",119.9,119.985,3)

"FIA",119.9,119.985,4)

"FIA",119.9,119.985,5)

"FIA",119.9,119.985,6)

"INIT")
FH55P8
"IX",115,115,"ASPO",0)
115^ASPO^Creates an "ASPO" index for NFS outpatient standing order.^MU^^R^IR^W^115.1626^^^^^A
"IX",115,115,"ASPO",.1,0)
^^2^2^3060927^
"IX",115,115,"ASPO",.1,1,0)
This creates an "ASPO" index for NFS outpatient active standing orders 
"IX",115,115,"ASPO",.1,2,0)
(SO). It is killed when the order is cancelled.
"IX",115,115,"ASPO",1)
I X2(1),X2(2)="" S ^FHPT("ASPO",DA(2),DA(1),DA)=""
"IX",115,115,"ASPO",1.4)

"IX",115,115,"ASPO",2)
I X2(2) K ^FHPT("ASPO",DA(2),DA(1),DA)
"IX",115,115,"ASPO",2.5)
K ^FHPT("ASPO")
"IX",115,115,"ASPO",11.1,0)
^.114IA^2^2
"IX",115,115,"ASPO",11.1,1,0)
1^F^115.1626^1^^^F
"IX",115,115,"ASPO",11.1,2,0)
2^F^115.1626^5^^^F
"KRN",.4,505,-1)
0^1
"KRN",.4,505,0)
FHSYP2^3070719.1335^^119.9^^^3070725
"KRN",.4,505,"%D",0)
^^2^2^2900317^
"KRN",.4,505,"%D",1,0)
This template is used to list the drugs contained in a set of
"KRN",.4,505,"%D",2,0)
drug classifications selected as those of interest to dietetics.
"KRN",.4,505,"DXS",1,9.2)
S I(1,0)=$G(D1),I(0,0)=$G(D0),DIP(1)=$S($D(^FH(119.9,D0,"P",D1,0)):^(0),1:""),D0=$P(DIP(1),U,1) S:'D0!'$D(^PS(50.605,+D0,0)) D0=-1 S DIP(101)=$S($D(^PS(50.605,D0,0)):^(0),1:"")
"KRN",.4,505,"F",1)
85,.01;"DRUG CLASS"~85,X DXS(1,9.2) S X=$P(DIP(101),U,2) S D0=I(0,0) S D1=I(1,0) W X K DIP;C9;"TITLE";Z;"DRUG CLASSIFICATIONS:CLASSIFICATION"~85,5;C51~
"KRN",.4,505,"F",2)
85,3;C58;"PRINT ON ASSESS"~85,4;C66;"PRINT ON SCREEN PROFILE"~85,6;C75;"ALERT?"~
"KRN",.4,505,"H")
FH SITE PARAMETERS LIST
"KRN",.4,2554,-1)
0^2
"KRN",.4,2554,0)
FHSELST2^3070725.1428^@^115.2^^@^3070727
"KRN",.4,2554,"F",2)
.01;C1~1;"TYPE";L4;C32~20;"DEF";L3;C40~21;L5;C50~99;L10;C60~
"KRN",.4,2554,"H")
FOOD PREFERENCES LIST
"KRN",.402,1656,-1)
0^1
"KRN",.402,1656,0)
FHSITEC1^2910820.1214^^119.9^^^3070723^
"KRN",.402,1656,"%D",0)
^.4021^2^2^3070322^^^^
"KRN",.402,1656,"%D",1,0)
This template is used to enter the clinical site parameters for the
"KRN",.402,1656,"%D",2,0)
Dietetic System.
"KRN",.402,1656,"DIAB",1,1,119.9001,0)
ALL
"KRN",.402,1656,"DIAB",1,1,119.985,0)
ALL
"KRN",.402,1656,"DR",1,119.9)
W !!,"--- Clinical Site Parameters";W !!,"The assessment default units are used for determining";W !,"the units for inputs when units are not specified";W !,"and for determining which units are used for output";
"KRN",.402,1656,"DR",1,119.9,1)
W !,"on the assessment and screening forms. Either English";W !,"or metric may be selected.";W !;70;W !!,"The Screening form makes provision for a";W !,"site-selectable line being added to the form as the";
"KRN",.402,1656,"DR",1,119.9,2)
W !,"last line under the S: (or subjective) section.";W !,"If an entry is made, the user should consider the";W !,"indenting and column usage of the existing lines in";W !,"determining the line to be entered. Just press RETURN";
"KRN",.402,1656,"DR",1,119.9,3)
W !,"to bypass having this extra line.";W !;75;W !!,"A Nutrition Profile may optionally be printed following each";W !,"Screening form. Answer YES if you wish the profile printed,";
"KRN",.402,1656,"DR",1,119.9,4)
W !,"NO if you do not. Answer A (for Ask user) if you wish the user to be";W !,"prompted as to whether a profile will be printed.";W !;74;W !!,"In selecting laboratory results to be displayed, the";
"KRN",.402,1656,"DR",1,119.9,5)
W !,"program allows for the selection of the number of days";W !,"in the past for which data will be searched. Thus,";W !,"selecting 30 as a value will result in the most recent";
"KRN",.402,1656,"DR",1,119.9,6)
W !,"lab test results obtained in the last 30 days being displayed.";W !;71;W !!,"You should select only those laboratory tests in which";W !,"the clinical staff is typically interested. You will also";
"KRN",.402,1656,"DR",1,119.9,7)
W !,"be prompted as to whether you wish those results to be";W !,"printed on the Assessment report and the Screening form.";W !;80;W !!,"You should select only those drug classifications in";
"KRN",.402,1656,"DR",1,119.9,8)
W !,"which the clinical staff is typically interested.";W !,"In displaying prescribed drugs, the actual drug name";W !,"will appear, but the selection of drugs to be displayed";
"KRN",.402,1656,"DR",1,119.9,9)
W !,"will be controlled by the drug classifications selected.";W !;85;
"KRN",.402,1656,"DR",2,119.9001)
.01:5
"KRN",.402,1656,"DR",2,119.985)
.01:6
"KRN",19,2249,-1)
2^3
"KRN",19,2249,0)
FHSELX^Food Preference Management^^M^.5^^^^^^^
"KRN",19,2249,10,0)
^19.01IP^6^5
"KRN",19,2249,10,3,0)
12663^CP^4
"KRN",19,2249,10,3,"^")
FHSELA
"KRN",19,2249,10,5,0)
12667^MP^3
"KRN",19,2249,10,5,"^")
FHSELF
"KRN",19,2249,10,6,0)
12710^UP^5
"KRN",19,2249,10,6,"^")
FHSELU
"KRN",19,2249,"U")
FOOD PREFERENCE MANAGEMENT
"KRN",19,3487,-1)
0^2
"KRN",19,3487,0)
FHASM1^Enter/Edit Assessment^^R^^^^^^^^DIETETICS
"KRN",19,3487,1,0)
^19.06^2^2^3070215^^^^
"KRN",19,3487,1,1,0)
This option is used to perform a nutrition assessment. The results
"KRN",19,3487,1,2,0)
may optionally be saved.
"KRN",19,3487,25)
FHASM1
"KRN",19,3487,99)
55608,47967
"KRN",19,3487,"U")
ENTER/EDIT ASSESSMENT
"KRN",19,3498,-1)
2^1
"KRN",19,3498,0)
FHASCM^Nutrition Patient Management^^M^.5^^^^^^^
"KRN",19,3498,10,0)
^19.01PI^10^10
"KRN",19,3498,10,2,0)
3487^EA
"KRN",19,3498,10,2,"^")
FHASM1
"KRN",19,3498,"U")
NUTRITION PATIENT MANAGEMENT
"KRN",19,12663,-1)
0^4
"KRN",19,12663,0)
FHSELA^Create/Map Food Preferences to Allergies^^R^^^^^^^^
"KRN",19,12663,1,0)
^^2^2^3070326^
"KRN",19,12663,1,1,0)
This option will allow the user to create Allergy-type Food Preferences
"KRN",19,12663,1,2,0)
and map them to corresponding standardized GMR Allergies.
"KRN",19,12663,25)
CREATE^FHSELA1
"KRN",19,12663,"U")
CREATE/MAP FOOD PREFERENCES TO
"KRN",19,12667,-1)
0^7
"KRN",19,12667,0)
FHSELF^Allergy/Food Preference Map^^R^^^^^^^^
"KRN",19,12667,1,0)
^19.06^3^3^3070717^^
"KRN",19,12667,1,1,0)
This option will list the "Food"-type GMR Allergy (#120.82) file entries
"KRN",19,12667,1,2,0)
and the Allergy-type Food Preference (#115.2) file entry that each will
"KRN",19,12667,1,3,0)
correspond to.
"KRN",19,12667,25)
DISPMAP^FHSELA1
"KRN",19,12667,"U")
ALLERGY/FOOD PREFERENCE MAP
"KRN",19,12710,-1)
0^6
"KRN",19,12710,0)
FHSELU^Update All Patients Allergy/Food Prefs^^R^^^^^^^^
"KRN",19,12710,1,0)
^19.06^5^5^3070820^^
"KRN",19,12710,1,1,0)
Running this option will go thru all inpatients and check if each patient
"KRN",19,12710,1,2,0)
has any existing GMRA Allergies without the corresponding Food Preference.
"KRN",19,12710,1,3,0)
If there are any missing and the link between the GMRA Allergy and the
"KRN",19,12710,1,4,0)
Food Preference exists, this option will add the necessary Food 
"KRN",19,12710,1,5,0)
Preferences.
"KRN",19,12710,25)
UPDATE^FHSELA1
"KRN",19,12710,"U")
UPDATE ALL PATIENTS ALLERGY/FO
"MBREQ")
0
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",29,-1)
1^1
"PKG",29,0)
DIETETICS^FH^Dietetics/Nutrition & Food Service System
"PKG",29,20,0)
^9.402P^^
"PKG",29,22,0)
^9.49I^1^1
"PKG",29,22,1,0)
5.5^3050202^3040621^4572
"PKG",29,22,1,"PAH",1,0)
8^3070822
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
49
"RTN","FH55P8")
0^15^B3618153
"RTN","FH55P8",1,0)
FH55P8 ;Hines OIFO/RTK - POST-INIT FOR PATCH FH*5.5*8 ;1/18/2007
"RTN","FH55P8",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FH55P8",3,0)
 ;
"RTN","FH55P8",4,0)
ITEM1 ;Convert existing CLINICIAN field entries into new multiple field
"RTN","FH55P8",5,0)
 D BMES^XPDUTL("Expand CLINICIAN field of NUTRITION LOCATION (#119.6)")
"RTN","FH55P8",6,0)
 D MES^XPDUTL(" file to a multiple and convert existing data...")
"RTN","FH55P8",7,0)
 F FHLIEN=0:0 S FHLIEN=$O(^FH(119.6,FHLIEN)) Q:FHLIEN'>0  D
"RTN","FH55P8",8,0)
 .S FHCFLG=0,FHLCLN=$P($G(^FH(119.6,FHLIEN,0)),U,2)
"RTN","FH55P8",9,0)
 .I FHLCLN="" Q
"RTN","FH55P8",10,0)
 .F FHCMIEN=0:0 S FHCMIEN=$O(^FH(119.6,FHLIEN,2,FHCMIEN)) Q:FHCMIEN'>0  D
"RTN","FH55P8",11,0)
 ..S FHCMLT=$P($G(^FH(119.6,FHLIEN,2,FHCMIEN,0)),U,1)
"RTN","FH55P8",12,0)
 ..I FHCMLT=FHLCLN S FHCFLG=1
"RTN","FH55P8",13,0)
 .I FHCFLG=1 Q  ;already in CLINICIAN(S) multiple, don't add
"RTN","FH55P8",14,0)
 .S X=+FHLCLN K DIC,DO S DA(1)=FHLIEN,DIC="^FH(119.6,"_DA(1)_",2,"
"RTN","FH55P8",15,0)
 .S DIC(0)="L" D FILE^DICN I Y=-1 Q
"RTN","FH55P8",16,0)
ITEM2 ;Set Allergy-type Food Preferences pointers to corresponding Allergy
"RTN","FH55P8",17,0)
 D BMES^XPDUTL("Map ALLERGY - TYPE entries in Food Preferences (#115.2)")
"RTN","FH55P8",18,0)
 D MES^XPDUTL(" file to corresponding GMR Allergies entries...")
"RTN","FH55P8",19,0)
 D MAP^FHSELA1
"RTN","FH55P8",20,0)
ITEM3 ;Update Patient FP's based on any pre-existing Patient Food-type Allergies
"RTN","FH55P8",21,0)
 D BMES^XPDUTL("Updating Patient Food Preferences based on pre-existing")
"RTN","FH55P8",22,0)
 D MES^XPDUTL(" Allergy data...")
"RTN","FH55P8",23,0)
 S FHPST8=1 D UPDATE^FHSELA1
"RTN","FH55P8",24,0)
ITEM4 ;
"RTN","FH55P8",25,0)
 K ^FH(114,"D")
"RTN","FH55P8",26,0)
 ;Set new AB cross-reference on Recipe (#114) file, Embedded Recipe mult
"RTN","FH55P8",27,0)
 F FHINIEN=0:0 S FHINIEN=$O(^FH(114,FHINIEN)) Q:FHINIEN'>0  D
"RTN","FH55P8",28,0)
 .I $O(^FH(114,FHINIEN,"R",0)) S DIK="^FH(114,FHINIEN,""R"",",DIK(1)=".01^AB",DA(1)=FHINIEN D ENALL^DIK
"RTN","FH55P8",29,0)
 K DA,X,Y,FHCFLG,FHLCLN,FHLIEN,FHCMIEN,FHCMLT,FHINIEN Q
"RTN","FHASM1")
0^5^B65471080
"RTN","FHASM1",1,0)
FHASM1 ; HISC/REL - Nutrition Assessment ;1/25/00  12:08
"RTN","FHASM1",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASM1",3,0)
 W @IOF,!!?20,"N U T R I T I O N   A S S E S S M E N T",!! S X="T",%DT="X" D ^%DT S DT=+Y
"RTN","FHASM1",4,0)
F1 ; Select Patient
"RTN","FHASM1",5,0)
 S FHALL=1 D ^FHOMDPA G KILL^XUSCLEAN:'FHDFN
"RTN","FHASM1",6,0)
 S:DFN'>0 DFN=""
"RTN","FHASM1",7,0)
 I $G(DFN),$P($G(^DPT(DFN,.35)),"^",1) W *7,!!?5,"  [ Patient has expired. ]" G KILL^XUSCLEAN
"RTN","FHASM1",8,0)
 S (ADM,ASN,FHASK,KNEE,EXT,DTP,FHCAS,FHCASD,FHASS,FHFFC,FHFEC,FHFPC,FHCFRBO,FHCM,FHEF,FHKCAL,FHLOC)="",(FHHWF,FHQUIT)=0
"RTN","FHASM1",9,0)
 S (ADT,SEX,AGE,HGT,HGP,WGT,WGP,DWGT,UWGT,IBW,FRM,AMP,KCAL,PRO,FLD,RC,XD,BMI,BMIP,FHCLI,FHPLXSV)=""
"RTN","FHASM1",10,0)
 S (NOW,NB,TSF,TSFP,SCA,SCAP,ACIR,ACIRP,CCIR,CCIRP,BFAMA,BFAMAP,FHAPP,FHEDU,DEWGT,WARD,FHSPC)=""
"RTN","FHASM1",11,0)
 S (FHDIPL,FHDIPLD,FHAST,FHDINF,FHDINFD,FHFUD,FHDIST,FHDIDI,FHDITF,FHDIDI,FHDITF,FHDITFDT,FHDITFCM,FHDITFML,FHDITFKC,FHVHGT,FHDVHGT)=""
"RTN","FHASM1",12,0)
 S (TSF,TSFP,SCA,SCAP,ACIR,ACIRP,CCIR,CCIRP,BFAMA,BFAMAP,BMI,BMIP,X1,X2,FHFUDS,EKKG,FHFDC,FHFDCSV)=""
"RTN","FHASM1",13,0)
 S (WCCM,CIBW,CERBO,CENB,PCTB,SEF,CFRB,CFRBO,CPRBO,NWGT,DNWGT,FHYN,FHDINA,FHVWGT,FHDVWGT,FHPL)=""
"RTN","FHASM1",14,0)
 S FHCLI=DUZ
"RTN","FHASM1",15,0)
 K ^TMP("FH",$J) S FHQTALL=0
"RTN","FHASM1",16,0)
 ;get current diet and tf
"RTN","FHASM1",17,0)
 S Y=""
"RTN","FHASM1",18,0)
 I DFN D
"RTN","FHASM1",19,0)
 .F I=0:0 S I=$O(^FHPT("AW",I)) Q:I'>0  I $D(^FHPT("AW",I,FHDFN)) S FHLOC=I Q
"RTN","FHASM1",20,0)
 .I $G(FHLOC),$D(^FH(119.6,FHLOC,0)) S FHCLI=$P($G(^FH(119.6,FHLOC,0)),U,2)
"RTN","FHASM1",21,0)
 .S WARD=$G(^DPT(DFN,.1)) I WARD'="" S ADM=$G(^DPT("CN",WARD,DFN))
"RTN","FHASM1",22,0)
 .D:ADM CUR^FHORD7
"RTN","FHASM1",23,0)
 .S FHDIDI=$S(Y'="":Y,1:"No Order")
"RTN","FHASM1",24,0)
 .W !,"Current Diet: ",FHDIDI
"RTN","FHASM1",25,0)
 .Q:'ADM
"RTN","FHASM1",26,0)
 .S TF=$P(^FHPT(FHDFN,"A",ADM,0),"^",4)
"RTN","FHASM1",27,0)
 .Q:'TF
"RTN","FHASM1",28,0)
 .S FHDITFDT=$P($G(^FHPT(FHDFN,"A",ADM,"TF",TF,0)),U,1)
"RTN","FHASM1",29,0)
 .S FHDITFCM=$P($G(^FHPT(FHDFN,"A",ADM,"TF",TF,0)),U,5)
"RTN","FHASM1",30,0)
 .S FHDITFML=$P($G(^FHPT(FHDFN,"A",ADM,"TF",TF,0)),U,6)
"RTN","FHASM1",31,0)
 .S FHDITFKC=$P($G(^FHPT(FHDFN,"A",ADM,"TF",TF,0)),U,7)
"RTN","FHASM1",32,0)
 .F TF2=0:0 S TF2=$O(^FHPT(FHDFN,"A",ADM,"TF",TF,"P",TF2)) Q:TF2<1  D
"RTN","FHASM1",33,0)
 ..S Y=^(TF2,0),TUN=$P(Y,"^",1)
"RTN","FHASM1",34,0)
 ..I TUN,$D(^FH(118.2,TUN,0)) S FHDITFPR(TUN)=Y
"RTN","FHASM1",35,0)
 .W ?30,"Tubefeeding: " I $D(FHDITFPR) F FHTUN=0:0 S FHTUN=$O(FHDITFPR(FHTUN)) Q:FHTUN'>0  W $P($G(^FH(118.2,FHTUN,0)),"^",1) I $O(FHDITFPR(FHTUN))'="" W ", "
"RTN","FHASM1",36,0)
 K Y
"RTN","FHASM1",37,0)
STA ;if pt has Work in Progress assessment, ask user to Edit or Create or Delete Assessment.
"RTN","FHASM1",38,0)
 D PATNAME^FHOMUTL
"RTN","FHASM1",39,0)
 S AGE=FHAGE
"RTN","FHASM1",40,0)
 I $D(^FHPT(FHDFN,"N",0)) D
"RTN","FHASM1",41,0)
 .S FHCAS=$P(^FHPT(FHDFN,"N",0),U,3)
"RTN","FHASM1",42,0)
 .Q:'FHCAS
"RTN","FHASM1",43,0)
 .S FHCASD=$P(^FHPT(FHDFN,"N",FHCAS,0),U,1)
"RTN","FHASM1",44,0)
 .I $D(^FHPT(FHDFN,"N",FHCAS,"DI")) S FHASS=$P($G(^FHPT(FHDFN,"N",FHCAS,"DI")),U,6)
"RTN","FHASM1",45,0)
 .S FHAST=0
"RTN","FHASM1",46,0)
 .F FHA=0:0 S FHA=$O(^FHPT(FHDFN,"N",FHA)) Q:'FHA  D
"RTN","FHASM1",47,0)
 ..S FHASSD=$P($G(^FHPT(FHDFN,"N",FHA,"DI")),U,6)
"RTN","FHASM1",48,0)
 ..I (FHASSD="W")!(FHASS="") S FHAST=1
"RTN","FHASM1",49,0)
 ..I $D(^FHPT(FHDFN,"N",FHA,0)),'$D(^FHPT(FHDFN,"N",FHA,"DI")) S FHAST=1
"RTN","FHASM1",50,0)
 I 'FHCAS!(FHAST=0) G CRE
"RTN","FHASM1",51,0)
 D ASK^FHASM2 G:FHQUIT KILL^XUSCLEAN
"RTN","FHASM1",52,0)
 I FHASK="D" S DIK="^FHPT("_FHDFN_",""N"",",DA(1)=FHDFN,DA=FHCAS D ^DIK W ?65,"Deleted..." G F1
"RTN","FHASM1",53,0)
 I FHASK="E" S ADT=FHCAS D SVAR G:SEX=""!(AGE="") P1 G F3A
"RTN","FHASM1",54,0)
CRE ;create new assessment
"RTN","FHASM1",55,0)
 ;D:FHCAS PRTA^FHASM2
"RTN","FHASM1",56,0)
 S FHASK="C"
"RTN","FHASM1",57,0)
 W !!,"Creating new Assessment...",!
"RTN","FHASM1",58,0)
 I (FHSEX="")!(FHAGE="") G P1
"RTN","FHASM1",59,0)
 E  S NAM=FHPTNM,SEX=FHSEX,AGE=FHAGE
"RTN","FHASM1",60,0)
 S X="NOW",%DT="XT" D ^%DT S ADT=Y
"RTN","FHASM1",61,0)
 I SEX=""!(AGE="") G P1
"RTN","FHASM1",62,0)
F2 S X="NOW",%DT="XT" D ^%DT S ADT=Y
"RTN","FHASM1",63,0)
F3 I DFN,$D(^FHPT(FHDFN,"N",9999999-ADT)) S ADT=$$FMADD^XLFDT(ADT,,,1) G F3
"RTN","FHASM1",64,0)
F3A ;start here if edit
"RTN","FHASM1",65,0)
 S FHAP=$G(^FH(119.9,1,3)),FHU=$P(FHAP,"^",1),NAM=FHPTNM
"RTN","FHASM1",66,0)
 G:'FHDFN F4 S XX=$O(^FHPT(FHDFN,"N",0)) G:XX="" F4 S XX=$G(^(XX,0)),HGT=$P(XX,"^",4),HGP=$P(XX,"^",5)
"RTN","FHASM1",67,0)
 I HGP'="S" S X1=$S(HGT\12:HGT\12_"'",1:"")_$S(HGT#12:" "_(HGT#12)_"""",1:""),X2=+$J(HGT*2.54,0,0)_"CM",X1=$S(FHU'="M":X1,1:X2)
"RTN","FHASM1",68,0)
F4 ; If Multidivisional site Select Communications Office
"RTN","FHASM1",69,0)
 S FHCOMM="" I $P($G(^FH(119.9,1,0)),U,20)'="N" D  I FHCOMM="" Q
"RTN","FHASM1",70,0)
 .K DIC S DIC="^FH(119.73," S DIC(0)="AEMQ" D ^DIC
"RTN","FHASM1",71,0)
 .I Y=-1 Q
"RTN","FHASM1",72,0)
 .S FHCOMM=+Y
"RTN","FHASM1",73,0)
 ;get ht and wt from vitals.
"RTN","FHASM1",74,0)
 I DFN S GMRVSTR="WT" D EN6^GMRVUTL S FHDVWGT=$P(X,"^",1),FHVWGT=$P(X,"^",8),GMRVSTR="HT" D EN6^GMRVUTL S FHVHGT=$P(X,"^",8)
"RTN","FHASM1",75,0)
 I X1="" S (X1,HGT)=FHVHGT
"RTN","FHASM1",76,0)
F4A W !!,"Height: " W:X1'="" X1,"// " R X:DTIME G:'$T!(X["^") KIL I X="",X1'="" S Y0=$J(HGT,0,0),H1=Y0 G F5
"RTN","FHASM1",77,0)
 D TR,HGT I Y<1 D HGP G F4A
"RTN","FHASM1",78,0)
 S:X1'=Y FHHWF=1
"RTN","FHASM1",79,0)
 S HGT=Y,H1=Y0,HGP=Y1
"RTN","FHASM1",80,0)
F5 I FHVWGT'="" S WGT=FHVWGT
"RTN","FHASM1",81,0)
 W !!,"Weight: " W:WGT'="" WGT_" lbs","// " R X:DTIME G:'$T!(X["^") KIL I X="",WGT S X=WGT_"#"
"RTN","FHASM1",82,0)
 S:X="a" X="A"
"RTN","FHASM1",83,0)
 I X="A",AGE>39 D A^FHASM2D G:Y<1 F5 S:WGT'=Y FHHWF=1 S WGT=Y,WGP="A" G F6
"RTN","FHASM1",84,0)
 D WGT I Y<1 D WGP W:AGE>39 !,"You may enter an A to calculate weight anthropometrically." G F5
"RTN","FHASM1",85,0)
 S:WGT'=Y FHHWF=1
"RTN","FHASM1",86,0)
 S WGT=Y,WGP=Y1,DWGT=$P(FHDVWGT,".",1)
"RTN","FHASM1",87,0)
F6 G:'FHHWF F7
"RTN","FHASM1",88,0)
 S %DT="AEP",%DT("A")="Date Weight Taken: "
"RTN","FHASM1",89,0)
 I 'DWGT,FHDVWGT S DTP=$E(FHDVWGT,4,5)_"/"_$E(FHDVWGT,6,7)_"/"_$E(FHDVWGT,2,3)
"RTN","FHASM1",90,0)
 I DWGT S DTP=$E(DWGT,4,5)_"/"_$E(DWGT,6,7)_"/"_$E(DWGT,2,3)
"RTN","FHASM1",91,0)
 S:DTP'="" %DT("B")=DTP S:DTP="" %DT("B")="TODAY"
"RTN","FHASM1",92,0)
 S %DT(0)="-T" W ! D ^%DT K %DT G KIL:X["^"!$D(DTOUT),F6:Y<1
"RTN","FHASM1",93,0)
 S DWGT=Y
"RTN","FHASM1",94,0)
 ;
"RTN","FHASM1",95,0)
F7 S:UWGT X=UWGT W !!,"Usual Weight: " W:UWGT'="" UWGT_" lbs","// " R X:DTIME G:'$T!(X["^") KIL I X="" G F8
"RTN","FHASM1",96,0)
 D WGT I Y<1 D WGP G F7
"RTN","FHASM1",97,0)
 S UWGT=Y
"RTN","FHASM1",98,0)
F8 K %DT,A1,K,X,Y G ^FHASM2
"RTN","FHASM1",99,0)
HGT ; Convert Height to inches
"RTN","FHASM1",100,0)
 S A1=+X I 'A1 S Y=-1 Q
"RTN","FHASM1",101,0)
 S X=$P(X,A1,2,99) S:$E(X,1)=" " X=$E(X,2,99) I "SMK"[$E(X,1) S Y=A1 S:FHU="M" Y=Y/2.54 G H1
"RTN","FHASM1",102,0)
 I """I"[$E(X,1) S Y=A1 G H1
"RTN","FHASM1",103,0)
 I $E(X,1)="C" S Y=A1/2.54 G H1
"RTN","FHASM1",104,0)
 I "'F"'[$E(X,1) S Y=-1 G H2
"RTN","FHASM1",105,0)
 S Y=A1*12 F K=1:1 Q:$E(X,K)?.N
"RTN","FHASM1",106,0)
 I $E(X,K,99)="" G H1
"RTN","FHASM1",107,0)
 S A1=+$E(X,K,99),X=$P(X,A1,2,99) S:$E(X,1)=" " X=$E(X,2,99)
"RTN","FHASM1",108,0)
 I """I"'[$E(X,1) S Y=-1 G H2
"RTN","FHASM1",109,0)
 S Y=Y+A1
"RTN","FHASM1",110,0)
H1 I X["K" D K^FHASM2D
"RTN","FHASM1",111,0)
H2 I Y<12!(Y>96) S Y=-1
"RTN","FHASM1",112,0)
 S:Y>0 Y0=+$J(Y,0,0),Y=+$J(Y,0,1) S Y1=$S(X["K":"K",X["S":"S",1:"") Q
"RTN","FHASM1",113,0)
HGP ; Height Help
"RTN","FHASM1",114,0)
 W !!,"Enter height as: 6' 2"" or 74"" or 74IN or 6FT 2 IN or 30CM"
"RTN","FHASM1",115,0)
 W !,"Add an S if height is stated rather than measured."
"RTN","FHASM1",116,0)
 W !,"Add a K if value is a Knee Height measurement."
"RTN","FHASM1",117,0)
 W !,"Height should be between 12"" and 96"" (8')." Q
"RTN","FHASM1",118,0)
WGT ; Convert Weight to lbs.
"RTN","FHASM1",119,0)
 D TR S A1=+X I 'A1 S Y=-1 Q
"RTN","FHASM1",120,0)
 S X=$P(X,A1,2,99) S:$E(X,1)=" " X=$E(X,2,99) I "SM"[$E(X,1) S Y=A1 S:FHU="M" Y=Y*2.2 G W1
"RTN","FHASM1",121,0)
 I $E(X,1)="O" S Y=A1/16 G W1
"RTN","FHASM1",122,0)
 I $E(X,1)="G" S Y=A1/1000*2.2 G W1
"RTN","FHASM1",123,0)
 I $E(X,1)="K" S Y=A1*2.2 G W1
"RTN","FHASM1",124,0)
 I "L#"'[$E(X,1) S Y=-1 G W1
"RTN","FHASM1",125,0)
 S Y=A1 F K=1:1 Q:$E(X,K)?.N
"RTN","FHASM1",126,0)
 I $E(X,K,99)="" G W1
"RTN","FHASM1",127,0)
 S A1=+$E(X,K,99),X=$P(X,A1,2,99) S:$E(X,1)=" " X=$E(X,2,99)
"RTN","FHASM1",128,0)
 I $E(X,1)'="O" S Y=-1 G W1
"RTN","FHASM1",129,0)
 S Y=A1/16+Y
"RTN","FHASM1",130,0)
W1 I Y<0!(Y>750) S Y=-1
"RTN","FHASM1",131,0)
 S:Y>0 Y0=+$J(Y,0,0),Y=+$J(Y,0,1) S Y1="" S:X["S" Y1="S" Q
"RTN","FHASM1",132,0)
WGP ; Weight help
"RTN","FHASM1",133,0)
 W !!,"Enter Weight as 150# or 150# 6OZ or 800G or 70KG"
"RTN","FHASM1",134,0)
 W !,"Add an S if weight is stated rather than measured."
"RTN","FHASM1",135,0)
 W !,"Enter an A to determine weight anthropometrically."
"RTN","FHASM1",136,0)
 W !,"Weight should be between 0 Lbs and 750 Lbs." Q
"RTN","FHASM1",137,0)
TR ; Translate Lower to Upper Case
"RTN","FHASM1",138,0)
 D TR^FH
"RTN","FHASM1",139,0)
 Q
"RTN","FHASM1",140,0)
KIL ; Final variable kill
"RTN","FHASM1",141,0)
 ;if X not equal ^, update or create nutrition assessment
"RTN","FHASM1",142,0)
 G:$G(FHQUIT) ASKUS
"RTN","FHASM1",143,0)
 I $D(X),X=U G ASKUS
"RTN","FHASM1",144,0)
 D SDAT^FHASM7
"RTN","FHASM1",145,0)
 ;
"RTN","FHASM1",146,0)
 G KILL^XUSCLEAN
"RTN","FHASM1",147,0)
PAT S (FHDFN,DFN,SEX,AGE,PID)="" R !!,"Enter Patient's Name: ",NAM:DTIME G:'$T!(NAM["^") KILL^XUSCLEAN
"RTN","FHASM1",148,0)
 I NAM["?"!(NAM'?.ANP)!(NAM="") W *7,!?5,"Enter Patient's Name to be printed on the report." G PAT
"RTN","FHASM1",149,0)
P1 I SEX="" R !,"Sex: ",SEX:DTIME S:SEX="" SEX="?" G:'$T!(SEX["^") KILL^XUSCLEAN S X=SEX D TR S SEX=X I $P("FEMALE",SEX,1)'="",$P("MALE",SEX,1)'="" W *7,"  Enter M or F" S SEX="" G P1
"RTN","FHASM1",150,0)
 S SEX=$E(SEX,1)
"RTN","FHASM1",151,0)
P2 I AGE="" R !,"Age: ",AGE:DTIME S:AGE="" AGE="?" G:'$T!(AGE["^") KILL^XUSCLEAN S X=AGE D TR S AGE=X
"RTN","FHASM1",152,0)
 S:AGE["M" AGE=+$J($P(AGE,"M",1)/12,0,2) I AGE'>0!(AGE>124) W !?5,"Enter Age Less Than 124 in Years or Months (followed by M) but Not Both" S AGE="" G P2
"RTN","FHASM1",153,0)
 G F2
"RTN","FHASM1",154,0)
SVAR ;set variables of incomplete assessment.
"RTN","FHASM1",155,0)
 Q:'$D(^FHPT(FHDFN,"N",0))
"RTN","FHASM1",156,0)
 S FHA0=$G(^FHPT(FHDFN,"N",FHCAS,0))
"RTN","FHASM1",157,0)
 S ADT=$P(FHA0,U,1),SEX=$P(FHA0,U,2),AGE=$P(FHA0,U,3),HGT=$P(FHA0,U,4)
"RTN","FHASM1",158,0)
 S HGP=$P(FHA0,U,5),WGT=$P(FHA0,U,6),WGP=$P(FHA0,U,7),DWGT=$P(FHA0,U,8)
"RTN","FHASM1",159,0)
 S UWGT=$P(FHA0,U,9),IBW=$P(FHA0,U,10),FRM=$P(FHA0,U,11),AMP=$P(FHA0,U,12)
"RTN","FHASM1",160,0)
 S KCAL=$P(FHA0,U,16),PRO=$P(FHA0,U,17),FLD=$P(FHA0,U,18),RC=$P(FHA0,U,19)
"RTN","FHASM1",161,0)
 S XD=$P(FHA0,U,20),BMI=$P(FHA0,U,21),BMIP=$P(FHA0,U,22)
"RTN","FHASM1",162,0)
 S NOW=$P(FHA0,U,24),NB=$P(FHA0,U,25)
"RTN","FHASM1",163,0)
 S FHA1=$G(^FHPT(FHDFN,"N",FHCAS,1))
"RTN","FHASM1",164,0)
 S TSF=$P(FHA1,U,1),TSFP=$P(FHA1,U,2),SCA=$P(FHA1,U,3),SCAP=$P(FHA1,U,4),ACIR=$P(FHA1,U,5)
"RTN","FHASM1",165,0)
 S ACIRP=$P(FHA1,U,6),CCIR=$P(FHA1,U,7),CCIRP=$P(FHA1,U,8),BFAMA=$P(FHA1,U,9),BFAMAP=$P(FHA1,U,10)
"RTN","FHASM1",166,0)
 S WCCM=$P(FHA1,U,11),CIBW=$P(FHA1,U,12),CERBO=$P(FHA1,U,13),CENB=$P(FHA1,U,14),PCTB=$P(FHA1,U,15)
"RTN","FHASM1",167,0)
 S SEF=$P(FHA1,U,16),CFRB=$P(FHA1,U,17),CFRBO=$P(FHA1,U,18),CPRBO=$P(FHA1,U,19),EKKG=$P(FHA1,U,20)
"RTN","FHASM1",168,0)
 S FHAPP=$G(^FHPT(FHDFN,"N",FHCAS,2))
"RTN","FHASM1",169,0)
 S FHA3=$G(^FHPT(FHDFN,"N",FHCAS,3))
"RTN","FHASM1",170,0)
 S FHYN=$P(FHA3,U,1),FHFEC=$P(FHA3,U,2),FHFPC=$P(FHA3,U,3),FHDINA=$P(FHA3,U,4),FHEDU=$P(FHA3,U,5)
"RTN","FHASM1",171,0)
 S FHFDCSV=$P(FHA3,U,6),FHPL=$P(FHA3,U,7),FHSPC=$P(FHA3,U,8)
"RTN","FHASM1",172,0)
 S FHADI=$G(^FHPT(FHDFN,"N",FHCAS,"DI"))
"RTN","FHASM1",173,0)
 S FHDIPL=$P(FHADI,U,1),FHDIPLD=$P(FHADI,U,2),FHDINF=$P(FHADI,U,3),FHDINFD=$P(FHADI,U,4)
"RTN","FHASM1",174,0)
 S (FHFUD,FHFUDS)=$P(FHADI,U,5),FHDIST=$P(FHADI,U,6),FHDIDI=$P(FHADI,U,7),FHDITF=$P(FHADI,U,8)
"RTN","FHASM1",175,0)
 Q
"RTN","FHASM1",176,0)
ASKUS R !!,"Do you wish to SAVE this Assessment Y// ",X:DTIME G:'$T!(X["^") KILL^XUSCLEAN
"RTN","FHASM1",177,0)
 S:X="" X="Y" D TR I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,!,"  Answer YES or NO" G ASKUS
"RTN","FHASM1",178,0)
 I X'?1"Y".E G KILL^XUSCLEAN
"RTN","FHASM1",179,0)
 D SDAT^FHASM7 G KILL^XUSCLEAN
"RTN","FHASM2")
0^6^B36109288
"RTN","FHASM2",1,0)
FHASM2 ; HISC/REL - Assessment (cont) ;5/14/93  10:03
"RTN","FHASM2",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASM2",3,0)
FRM ; Calculate Frame Size
"RTN","FHASM2",4,0)
 W !!,"Wrist Circumference: " W:WCCM WCCM_" cm// " R X:DTIME G KIL^FHASM1:'$T!(X["^")
"RTN","FHASM2",5,0)
 I X="",$G(WCCM) S X=WCCM
"RTN","FHASM2",6,0)
 S WCCM=X
"RTN","FHASM2",7,0)
 G F1:X=""
"RTN","FHASM2",8,0)
 I X'?1.2N.1".".N!(X<2)!(X>50) W *7,!,"Value should be between 2 and 50cm.; press RETURN to bypass." G FRM
"RTN","FHASM2",9,0)
 S WCIR=+X,RAT=HGT*2.54/WCIR
"RTN","FHASM2",10,0)
 I SEX="F" S FRM=$S(RAT>11.0:"S",RAT<10.1:"L",1:"M")
"RTN","FHASM2",11,0)
 I SEX="M" S FRM=$S(RAT>10.4:"S",RAT<9.6:"L",1:"M")
"RTN","FHASM2",12,0)
 W "   ",$S(FRM="S":"Small",FRM="M":"Medium",1:"Large")," Frame" G IBW
"RTN","FHASM2",13,0)
F1 I FRM="" S FRM="M"
"RTN","FHASM2",14,0)
 S X="" W !!,"Frame Size (SMALL,MEDIUM,LARGE) "_FRM R "// ",X:DTIME
"RTN","FHASM2",15,0)
 I '$T!(X["^") S FHQUIT=1 G KIL^FHASM1
"RTN","FHASM2",16,0)
 S:X="" X=FRM D TR^FHASM1
"RTN","FHASM2",17,0)
 I $P("SMALL",X,1)'="",$P("MEDIUM",X,1)'="",$P("LARGE",X,1)'="" W *7,"  Enter S, M or L" G F1
"RTN","FHASM2",18,0)
 S FRM=$E(X,1)
"RTN","FHASM2",19,0)
IBW ; Target Body Weight
"RTN","FHASM2",20,0)
 W !!,"Calculation of Target Body Weight",! S METH=""
"RTN","FHASM2",21,0)
 I H1'<60 W !?10,"H   Hamwi" S METH=METH_"H"
"RTN","FHASM2",22,0)
 I SEX="M",(H1<76),(H1>60),(AGE'<19) W !?10,"M   Metropolitan 83" W !?10,"S   Spinal Cord Injury" S METH=METH_"MS"
"RTN","FHASM2",23,0)
 I SEX="F",(H1<73),(H1>57),(AGE'<19) W !?10,"M   Metropolitan 83" W !?10,"S   Spinal Cord Injury" S METH=METH_"MS"
"RTN","FHASM2",24,0)
 I SEX="M",(H1<74),(H1>60),(AGE>64) W !?10,"G   Geriatric" S METH=METH_"G"
"RTN","FHASM2",25,0)
 I SEX="F",(H1<70),(H1>57),(AGE>64) W !?10,"G   Geriatric" S METH=METH_"G"
"RTN","FHASM2",26,0)
 I AGE<10 W !?10,"P   Pediatric" S METH=METH_"P"
"RTN","FHASM2",27,0)
 W !?10,"E   Enter Manually" S METH=METH_"E"
"RTN","FHASM2",28,0)
SEL W !!,"Method: " W:CIBW'="" CIBW_" // " R X:DTIME I '$T!(X["^") G KIL^FHASM1
"RTN","FHASM2",29,0)
 I X="",CIBW'="" S X=CIBW
"RTN","FHASM2",30,0)
 D TR^FHASM1
"RTN","FHASM2",31,0)
 I METH'[$E(X,1)!(X="") W *7,!,"   You Must Choose from the List Above" G SEL
"RTN","FHASM2",32,0)
 S CIBW=X
"RTN","FHASM2",33,0)
 S METH=$E(X,1) D E:METH="E",H^FHASM2D:METH="H",^FHASM2A:METH="M",^FHASM2A:METH="S",^FHASM2B:METH="G",^FHASM2C:METH="P" G:FHQUIT KIL^FHASM1 I IBW'>0 G KIL^FHASM1:IBW="^",IBW
"RTN","FHASM2",34,0)
AMP S FHAMP="NO" I AMP'="" S FHAMP="YES"
"RTN","FHASM2",35,0)
 G:FHQUIT KIL^FHASM1
"RTN","FHASM2",36,0)
 S X="" W !!,"Does Patient have an Amputation? "_FHAMP R "// ",X:DTIME
"RTN","FHASM2",37,0)
 I X="^" S FHQUIT=1 G:'$T!(X["^") KIL^FHASM1
"RTN","FHASM2",38,0)
 S:X="" X=FHAMP D TR^FHASM1
"RTN","FHASM2",39,0)
 S FHAMP=X
"RTN","FHASM2",40,0)
 I $P("YES",FHAMP,1)'="",$P("NO",FHAMP,1)'="" W *7," Answer YES or NO" G AMP
"RTN","FHASM2",41,0)
 ;S FHAMP=$E(FHAMP,1),FHAMP=FHAMP="Y" G:'FHAMP A5
"RTN","FHASM2",42,0)
 I $E(FHAMP,1)="N" S AMP="" G A5
"RTN","FHASM2",43,0)
A1 W !!,"Amputee Types: (may be multiple, e.g: 2,2,5)"
"RTN","FHASM2",44,0)
 W !!?5,"1 Hand              (0.7%)",?36,"2 Total Leg        (16.1%)",!?5,"3 Total Arm         (4.9%)",?36,"4 Foot              (1.5%)"
"RTN","FHASM2",45,0)
 W !?5,"5 Forearm and Hand  (2.3%)",?36,"6 Calf and Foot     (5.8%)"
"RTN","FHASM2",46,0)
A2 I AMP'="" W !!,"Total Amputee %: ",AMP K DIR S DIR(0)="SAO^Y:Yes;N:No",DIR("A")="Do you wish to change this? ",DIR("B")="N" D ^DIR G:$D(DIRUT) KIL^FHASM1 I Y="N" G A5
"RTN","FHASM2",47,0)
 S AMP=0 R !!?2,"Amputee Types: ",X:DTIME G:'$T!(X["^") KIL^FHASM1
"RTN","FHASM2",48,0)
 F K=1:1 S Y=$P(X,",",K) Q:Y=""  G:Y'?1N!(Y<1)!(Y>6) A6 S AMP=AMP+$P(".7,16.1,4.9,1.5,2.3,5.8",",",Y)
"RTN","FHASM2",49,0)
A3 W !!,"Total Amputee %: ",AMP," // " R X:DTIME S:X="" X=AMP G:'$T!(X["^") KIL^FHASM1
"RTN","FHASM2",50,0)
 I X<.5!(X>50) W *7,!,"Total % of amputations should be .5% to 50%" G A3
"RTN","FHASM2",51,0)
 S AMP=+$J(X,0,1),IBW=100-AMP*IBW/100,IBW=+$J(IBW,0,0)
"RTN","FHASM2",52,0)
A4 S X1=$S(FHU'="M":IBW_"#",1:+$J(IBW/2.2,0,1)_"kg")
"RTN","FHASM2",53,0)
 W !!,"Select TBW after Amputee Correction: ",X1,"// " R X:DTIME I '$T!(X["^") G KIL^FHASM1
"RTN","FHASM2",54,0)
 I X=""!(X=+X1) G A5
"RTN","FHASM2",55,0)
 D WGT^FHASM1 I Y<1 D WGP^FHASM1 G A4
"RTN","FHASM2",56,0)
 S IBW=+Y
"RTN","FHASM2",57,0)
A5 S IBW=+$J(IBW,0,0) G ^FHASM3
"RTN","FHASM2",58,0)
A6 W *7,!!?5,"Enter a string of types (e.g: 1,1,4); no digit can exceed 6." G A2
"RTN","FHASM2",59,0)
E ; Manual Entry of Target Weight
"RTN","FHASM2",60,0)
 W !!,"Enter Target Body Weight: " W:IBW'="" IBW_"lbs// " R X:DTIME I '$T!(X["^") S FHQUIT=1 Q
"RTN","FHASM2",61,0)
 I X="",IBW'="" S X=IBW
"RTN","FHASM2",62,0)
 D WGT^FHASM1 I Y<1 D WGP^FHASM1 G E
"RTN","FHASM2",63,0)
 S IBW=+Y Q
"RTN","FHASM2",64,0)
 ;
"RTN","FHASM2",65,0)
ASK ;ask user to edit or create assessment.
"RTN","FHASM2",66,0)
 D PRTA
"RTN","FHASM2",67,0)
 I 'FHDIC S FHASK="C" Q
"RTN","FHASM2",68,0)
 R !!,"Do you want to Edit or Create or Delete Assessment? E// ",FHASK:DTIME I '$T!(FHASK["^") S FHQUIT=1 Q
"RTN","FHASM2",69,0)
 S:FHASK="" FHASK="E" S X=FHASK D TR^FH S FHASK=X
"RTN","FHASM2",70,0)
 S FHASK=$E(FHASK)
"RTN","FHASM2",71,0)
 I (FHASK'="E"),(FHASK'="C"),(FHASK'="D") W *7,!?5,"Enter 'E' to Edit work in progress assessment or 'C' to Create new assessment or 'D' to Delete assessment!!" G ASK
"RTN","FHASM2",72,0)
 I (FHASK="E")!(FHASK="D") D AAS
"RTN","FHASM2",73,0)
 Q
"RTN","FHASM2",74,0)
AAS ;ask user which assesment to edit or delete.
"RTN","FHASM2",75,0)
 W !
"RTN","FHASM2",76,0)
 K DIC S DIC="^FHPT(FHDFN,""N"",",DIC(0)="Q",DA=FHDFN,X="??"
"RTN","FHASM2",77,0)
 S DIC("S")="D DCS^FHASM2 I FHDIC"
"RTN","FHASM2",78,0)
 S DIC("W")="S FHASS=$P($D(^FHPT(FHDFN,""N"",+Y,""DI"")),U,6) W ""  "",$S(FHASS=""C"":""Complete"",FHASS=""S"":""Signed"",1:""Work in Progress"")"
"RTN","FHASM2",79,0)
 D ^DIC S DIC="^FHPT(FHDFN,""N"",",DIC(0)="AEQM"
"RTN","FHASM2",80,0)
 S DIC("A")="SELECT Assessment Date: "
"RTN","FHASM2",81,0)
 W !,"You can only access your own Work in Progress Assessment, unless you have an FHMGR key.",!
"RTN","FHASM2",82,0)
 S DIC("W")="S FHASS=$P($D(^FHPT(FHDFN,""N"",+Y,""DI"")),U,6) W ""  "",$S(FHASS=""C"":""Complete"",FHASS=""S"":""Signed"",1:""Work in Progress"")"
"RTN","FHASM2",83,0)
 D ^DIC I "^"[X!$D(DTOUT) S FHQUIT=1 Q
"RTN","FHASM2",84,0)
 G:Y<1 AAS
"RTN","FHASM2",85,0)
 S FHCAS=+Y
"RTN","FHASM2",86,0)
 K DIC
"RTN","FHASM2",87,0)
 Q
"RTN","FHASM2",88,0)
DCS S FHDIC=0 I '$D(^FHPT(FHDFN,"N",Y,"DI")),$D(^XUSEC("FHMGR",DUZ)) S FHDIC=1
"RTN","FHASM2",89,0)
 I '$D(^FHPT(FHDFN,"N",Y,"DI")),$D(^FHPT(FHDFN,"N",Y,0)),($P(^(0),U,23)=DUZ) S FHDIC=1
"RTN","FHASM2",90,0)
 I $D(^FHPT(FHDFN,"N",Y,0)),($P(^(0),U,23)=DUZ),($D(^FHPT(FHDFN,"N",Y,"DI"))&(($P($G(^FHPT(FHDFN,"N",+Y,"DI")),U,6)="W"))) S FHDIC=1
"RTN","FHASM2",91,0)
 I $D(^FHPT(FHDFN,"N",Y,"DI")) I ($P($G(^FHPT(FHDFN,"N",+Y,"DI")),U,6)="W"),$D(^XUSEC("FHMGR",DUZ)) S FHDIC=1
"RTN","FHASM2",92,0)
 Q
"RTN","FHASM2",93,0)
 ;
"RTN","FHASM2",94,0)
DCS1 S FHDIC=0
"RTN","FHASM2",95,0)
 F FHI9=0:0 S FHI9=$O(^FHPT(FHDFN,"N",FHI9)) Q:FHI9'>0  D
"RTN","FHASM2",96,0)
 .I '$D(^FHPT(FHDFN,"N",FHI9,"DI")),$D(^XUSEC("FHMGR",DUZ)) S FHDIC=1
"RTN","FHASM2",97,0)
 .I '$D(^FHPT(FHDFN,"N",FHI9,"DI")),$D(^FHPT(FHDFN,"N",FHI9,0)),($P(^(0),U,23)=DUZ) S FHDIC=1
"RTN","FHASM2",98,0)
 .I $D(^FHPT(FHDFN,"N",FHI9,0)),($P(^(0),U,23)=DUZ),($D(^FHPT(FHDFN,"N",FHI9,"DI"))&(($P($G(^FHPT(FHDFN,"N",+FHI9,"DI")),U,6)="W")!($P($G(^FHPT(FHDFN,"N",FHI9,"DI")),U,6)=""))) S FHDIC=1
"RTN","FHASM2",99,0)
 .I $D(^FHPT(FHDFN,"N",FHI9,"DI")) I ($P(^FHPT(FHDFN,"N",+FHI9,"DI"),U,6)="W")!($P(^FHPT(FHDFN,"N",FHI9,"DI"),U,6)=""),$D(^XUSEC("FHMGR",DUZ)) S FHDIC=1
"RTN","FHASM2",100,0)
 Q
"RTN","FHASM2",101,0)
PRTA ;print if there is a current assessment.
"RTN","FHASM2",102,0)
 S DTP=FHCASD D DTP^FH W !!,"Last Assessment on File: ",$S($G(FHCASD):$E(DTP,1,9),1:"No Assessment") S DTP=""
"RTN","FHASM2",103,0)
 W:FHCAS ?40,"Status: ",$S(FHASS="C":"Completed",FHASS="S":"Signed",FHASS="W":"Work in Progress",1:"")
"RTN","FHASM2",104,0)
 D DCS1
"RTN","FHASM2",105,0)
 Q
"RTN","FHASM2A")
0^18^B17396578
"RTN","FHASM2A",1,0)
FHASM2A ; HISC/REL - Target Weight - Metropolitan 83 ;5/14/93  08:59
"RTN","FHASM2A",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASM2A",3,0)
M ; Metropolitan Height & Weight tables
"RTN","FHASM2A",4,0)
 ; 1983 Metropolitan Life Insurance Company Height & Weight Tables
"RTN","FHASM2A",5,0)
 ; as measured with 1" heels and clothes weighing 5# for men and 3# for women.
"RTN","FHASM2A",6,0)
M1 S OFF=$S(SEX="M":H1-61,1:H1-43),A1=$P($T(MM1+OFF),";",$F("SML",FRM)+2)
"RTN","FHASM2A",7,0)
 S W1=$P(A1,"-",1),W2=$P(A1,"-",2) G:METH="M" M3
"RTN","FHASM2A",8,0)
 ; Target Weight for Spinal Cord Patients
"RTN","FHASM2A",9,0)
 ; Nutrition Assessment of the Spinal Cord Injured Patient by
"RTN","FHASM2A",10,0)
 ; Suzanne C Peiffer, R.D., Patricia Blust, R.D., and Jose Florante J Leyson
"RTN","FHASM2A",11,0)
M2 W !!,"Extent of Injury:",!!?7,"P   Paraplegic",!?7,"Q   Quadriplegic"
"RTN","FHASM2A",12,0)
 W !!,"Select: ",FHSPC,"//" R SP:DTIME I '$T!(SP["^") S FHQUIT=1 Q
"RTN","FHASM2A",13,0)
 I SP="",FHSPC'="" S SP=FHSPC
"RTN","FHASM2A",14,0)
 S X=SP D TR^FHASM1 S SP=X
"RTN","FHASM2A",15,0)
 I SP'="P",SP'="Q" W !?3,*7,"Only P or Q are Valid Choices" G M2
"RTN","FHASM2A",16,0)
 S FHSPC=SP
"RTN","FHASM2A",17,0)
 S W1=W1-$S(SP="P":15,1:20),W2=W2-$S(SP="P":20,1:25)
"RTN","FHASM2A",18,0)
M3 S W3=+$J(W1+W2/2,0,0),X1=$S(FHU'="M":W1,1:+$J(W1/2.2,0,1)),X2=$S(FHU'="M":W2,1:+$J(W2/2.2,0,1)),X3=$S(FHU'="M":W3,1:+$J(W3/2.2,0,1))
"RTN","FHASM2A",19,0)
M4 W !!,"Select Target Weight (",X1,"-",X2,") ",X3,$S(FHU'="M":" lb",1:" kg"),"// " R X:DTIME I '$T!(X["^") S FHQUIT=1 Q
"RTN","FHASM2A",20,0)
 I X="" S IBW=W3 Q
"RTN","FHASM2A",21,0)
 D WGT^FHASM1 I Y<1 D WGP^FHASM1 G M4
"RTN","FHASM2A",22,0)
 S IBW=+Y I IBW<W1!(IBW>W2) S METH="E"
"RTN","FHASM2A",23,0)
 Q
"RTN","FHASM2A",24,0)
 ;
"RTN","FHASM2A",25,0)
ALRT ;process nutrition assessment alert.
"RTN","FHASM2A",26,0)
 Q:'DFN    ;only inpt will have the alert
"RTN","FHASM2A",27,0)
 Q:'$G(WRD)
"RTN","FHASM2A",28,0)
 S WARD=$G(^DPT(DFN,.1)) Q:WARD=""
"RTN","FHASM2A",29,0)
 S ADM=$P($G(^FHPT(FHDFN,"A",0)),U,3)
"RTN","FHASM2A",30,0)
 S:'$G(FHDUZ) FHDUZ=""
"RTN","FHASM2A",31,0)
 I $G(DT) S DTE=DT
"RTN","FHASM2A",32,0)
 S FHSDT=DTE
"RTN","FHASM2A",33,0)
 F FHPDT=FHSDT:0 S FHPDT=$O(^FHPT("E",FHPDT)) Q:FHPDT'>0  I $D(^FHPT("E",FHPDT,FHDFN)) D
"RTN","FHASM2A",34,0)
 .S FHNAS=$O(^FHPT("E",FHPDT,FHDFN,0))
"RTN","FHASM2A",35,0)
 .I $P($G(^FHPT(FHDFN,"N",FHNAS,"DI")),U,9)'=""!($P($G(^FHPT(FHDFN,"N",FHNAS,"DI")),U,5)<DTE) Q
"RTN","FHASM2A",36,0)
 .Q:$P($G(^FHPT(FHDFN,"N",FHNAS,"DI")),U,6)'="C"
"RTN","FHASM2A",37,0)
 .K XQA,XQAMSG,XQAOPT,XQAROU
"RTN","FHASM2A",38,0)
 .S XQAID="FH,"_$J_","_$H
"RTN","FHASM2A",39,0)
 .S XQAMSG=$E(FHPTNM,1,9)_" ("_$E(FHPTNM,1,1)_$P(FHSSN,"-",3)_"): "
"RTN","FHASM2A",40,0)
 .S XQAMSG=XQAMSG_" has Assessment Follow-up Date on "_$E(FHPDT,4,5)_"/"_$E(FHPDT,6,7)_"/"_$E(FHPDT,2,3)
"RTN","FHASM2A",41,0)
 .F A=0:0 S A=$O(^FH(119.6,WRD,2,A)) Q:A'>0  S TK=$P($G(^FH(119.6,WRD,2,A,0)),U,1),XQA(TK)=""
"RTN","FHASM2A",42,0)
 .S:'$D(XQA(FHDUZ)) XQA(FHDUZ)=""
"RTN","FHASM2A",43,0)
 .D SETUP^XQALERT
"RTN","FHASM2A",44,0)
 .S $P(^FHPT(FHDFN,"N",FHNAS,"DI"),U,9)=FHSDT
"RTN","FHASM2A",45,0)
 K XQA,XQAMSG,XQAOPT,XQAROU,TK,FHSDT,FHPDT,FHNAS,FHNAA
"RTN","FHASM2A",46,0)
 ;
"RTN","FHASM2A",47,0)
PHA ;process food/drug classification alert
"RTN","FHASM2A",48,0)
 I $G(DT) S DTE=DT
"RTN","FHASM2A",49,0)
 ;call Pharmacy API
"RTN","FHASM2A",50,0)
 S PX=1 D DRUG^FHASM4
"RTN","FHASM2A",51,0)
 S FHI9=""
"RTN","FHASM2A",52,0)
 F  S FHI9=$O(PCLS(FHI9)) Q:FHI9=""  S FHP605=PCLS(FHI9) D
"RTN","FHASM2A",53,0)
 .D AL1
"RTN","FHASM2A",54,0)
 .Q:$G(FHALFLG)
"RTN","FHASM2A",55,0)
 .K XQA,XQAMSG,XQAOPT,XQAROU
"RTN","FHASM2A",56,0)
 .S XQAID="FH,"_$J_","_$H
"RTN","FHASM2A",57,0)
 .S XQAMSG=$E(FHPTNM,1,9)_" ("_$E(FHPTNM,1,1)_$P(FHSSN,"-",3)_"): "
"RTN","FHASM2A",58,0)
 .S XQAMSG=XQAMSG_"Food/drug interaction w/ "_FHI9
"RTN","FHASM2A",59,0)
 .F A=0:0 S A=$O(^FH(119.6,WRD,2,A)) Q:A'>0  D
"RTN","FHASM2A",60,0)
 ..S TK=$P($G(^FH(119.6,WRD,2,A,0)),U,1),XQA(TK)=""
"RTN","FHASM2A",61,0)
 ..S:'$D(XQA(FHDUZ)) XQA(FHDUZ)=""
"RTN","FHASM2A",62,0)
 .D SETUP^XQALERT
"RTN","FHASM2A",63,0)
 .S DIC="^FHPT("_FHDFN_",""D"",",DIC(0)="L",X=DT,DA(1)=FHDFN
"RTN","FHASM2A",64,0)
 .K DD,DO D FILE^DICN I +Y<0 Q
"RTN","FHASM2A",65,0)
 .S $P(^FHPT(FHDFN,"D",+Y,0),U,2)="S"
"RTN","FHASM2A",66,0)
 .S $P(^FHPT(FHDFN,"D",+Y,0),U,3)=WRD
"RTN","FHASM2A",67,0)
 .S $P(^FHPT(FHDFN,"D",+Y,0),U,4)=FHI9
"RTN","FHASM2A",68,0)
 .K DIC
"RTN","FHASM2A",69,0)
 K POP,PORD,PSCL605,PSNIEN,PSSTMP2,RMSDF,SCR,PCA,PCAL,PCNS,PCORD
"RTN","FHASM2A",70,0)
 K FHAL,FHALDAT,FHALFLG,FHALWRD,FHDOB,FHFDNM,FHGMDT,FHI9,FHP605,FHPAL,FHPPA
"RTN","FHASM2A",71,0)
 K XQA,XQAMSG,XQAOPT,XQAROU,TK,FHSDT,FHPDT,FHNAS,FHNAA,FHPPOR,FHPPNS
"RTN","FHASM2A",72,0)
 Q
"RTN","FHASM2A",73,0)
 ;
"RTN","FHASM2A",74,0)
AL1 S FHALFLG=0
"RTN","FHASM2A",75,0)
 F FHAL=0:0 S FHAL=$O(^FHPT(FHDFN,"D",FHAL)) Q:FHAL'>0  D
"RTN","FHASM2A",76,0)
 .S FHALDAT=$G(^FHPT(FHDFN,"D",FHAL,0))
"RTN","FHASM2A",77,0)
 .S FHFDNM=$P(FHALDAT,U,4),FHALWRD=$P(FHALDAT,U,3)
"RTN","FHASM2A",78,0)
 .I FHALWRD=WRD,FHFDNM=FHI9 S FHALFLG=1
"RTN","FHASM2A",79,0)
 Q
"RTN","FHASM2A",80,0)
MM1 ;;62;128-134;131-141;138-150
"RTN","FHASM2A",81,0)
 ;;63;130-136;133-143;140-153
"RTN","FHASM2A",82,0)
 ;;64;132-138;135-145;142-156
"RTN","FHASM2A",83,0)
 ;;65;134-140;137-148;144-160
"RTN","FHASM2A",84,0)
 ;;66;136-142;139-151;146-164
"RTN","FHASM2A",85,0)
 ;;67;138-145;142-154;149-168
"RTN","FHASM2A",86,0)
 ;;68;140-148;145-157;152-172
"RTN","FHASM2A",87,0)
 ;;69;142-151;148-160;155-176
"RTN","FHASM2A",88,0)
 ;;70;144-154;151-163;158-180
"RTN","FHASM2A",89,0)
 ;;71;146-157;154-166;161-184
"RTN","FHASM2A",90,0)
 ;;72;149-160;157-170;164-188
"RTN","FHASM2A",91,0)
 ;;73;152-164;160-174;168-192
"RTN","FHASM2A",92,0)
 ;;74;155-168;164-178;172-197
"RTN","FHASM2A",93,0)
 ;;75;158-172;167-182;176-202
"RTN","FHASM2A",94,0)
 ;;76;162-176;171-187;181-207
"RTN","FHASM2A",95,0)
MW1 ;;58;102-111;109-121;118-131
"RTN","FHASM2A",96,0)
 ;;59;103-113;111-123;120-134
"RTN","FHASM2A",97,0)
 ;;60;104-115;113-126;122-137
"RTN","FHASM2A",98,0)
 ;;61;106-118;115-129;125-140
"RTN","FHASM2A",99,0)
 ;;62;108-121;118-132;128-143
"RTN","FHASM2A",100,0)
 ;;63;111-124;121-135;131-147
"RTN","FHASM2A",101,0)
 ;;64;114-127;124-138;134-151
"RTN","FHASM2A",102,0)
 ;;65;117-130;127-141;137-155
"RTN","FHASM2A",103,0)
 ;;66;120-133;130-144;140-159
"RTN","FHASM2A",104,0)
 ;;67;123-136;133-147;143-163
"RTN","FHASM2A",105,0)
 ;;68;126-139;136-150;146-167
"RTN","FHASM2A",106,0)
 ;;69;129-142;139-153;149-170
"RTN","FHASM2A",107,0)
 ;;70;132-145;142-156;152-173
"RTN","FHASM2A",108,0)
 ;;71;135-148;145-159;155-176
"RTN","FHASM2A",109,0)
 ;;72;138-151;148-162;158-179
"RTN","FHASM2B")
0^20^B5467504
"RTN","FHASM2B",1,0)
FHASM2B ; HISC/REL - Target Weight - Geriatric ;6/1/89  16:17
"RTN","FHASM2B",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASM2B",3,0)
 ; Target Weight for Geriatrics
"RTN","FHASM2B",4,0)
 ; Journal of Amer. Medical Assn., Vol. 172, p. 658, by
"RTN","FHASM2B",5,0)
 ; Master & Lasser. Used for people ages 65 to 94.
"RTN","FHASM2B",6,0)
G1 S OFF=$S(SEX="M":H1-61,1:H1-45),A1=$P($T(GM1+OFF),";",$S(AGE<70:4,AGE<75:5,AGE<80:6,AGE<85:7,AGE<90:8,1:9))
"RTN","FHASM2B",7,0)
 G:A1'["*" G2 S A2=+A1,A1=$P($T(GM1+OFF),";",A2)
"RTN","FHASM2B",8,0)
 W *7,!!,"No data for your Age Group, the ",$S(A2=1:"65-69",A2=2:"70-74",A2=3:"75-79",A2=4:"80-84",1:"85-89")," Group was used."
"RTN","FHASM2B",9,0)
G2 S W1=$P(A1,"-",1),W2=+$P(A1,"-",2),W3=+$J(W1+W2/2,0,0)
"RTN","FHASM2B",10,0)
 S X1=$S(FHU'="M":W1,1:+$J(W1/2.2,0,1)),X2=$S(FHU'="M":W2,1:+$J(W2/2.2,0,1)),X3=$S(FHU'="M":W3,1:+$J(W3/2.2,0,1))
"RTN","FHASM2B",11,0)
G3 W !!,"Select Target Weight (",X1,"-",X2,") ",X3,$S(FHU'="M":" lb",1:" kg"),"// " R X:DTIME I '$T!(X["^") S IBW="^" Q
"RTN","FHASM2B",12,0)
 I X="" S IBW=W3 Q
"RTN","FHASM2B",13,0)
 D WGT^FHASM1 I Y<1 D WGP^FHASM1 G G3
"RTN","FHASM2B",14,0)
 S IBW=+Y I IBW<W1!(IBW>W2) S METH="E"
"RTN","FHASM2B",15,0)
 Q
"RTN","FHASM2B",16,0)
GM1 ;;61;128-156;125-153;123-151;3*;3*;3*
"RTN","FHASM2B",17,0)
 ;;62;130-158;127-155;125-153;122-148;4*;4*
"RTN","FHASM2B",18,0)
 ;;63;131-161;129-157;127-155;122-150;120-146;5*
"RTN","FHASM2B",19,0)
 ;;64;134-164;131-161;129-157;124-152;122-148;5*
"RTN","FHASM2B",20,0)
 ;;65;136-166;134-164;130-160;127-155;125-153;117-143
"RTN","FHASM2B",21,0)
 ;;66;139-169;137-167;133-163;130-158;128-156;120-146
"RTN","FHASM2B",22,0)
 ;;67;140-172;140-170;136-166;132-162;130-160;122-150
"RTN","FHASM2B",23,0)
 ;;68;143-175;142-174;139-169;135-165;133-163;126-154
"RTN","FHASM2B",24,0)
 ;;69;147-179;146-178;142-174;139-169;137-167;130-153
"RTN","FHASM2B",25,0)
 ;;70;150-184;148-182;146-178;143-175;140-172;134-164
"RTN","FHASM2B",26,0)
 ;;71;155-189;152-186;149-183;148-180;144-176;139-169
"RTN","FHASM2B",27,0)
 ;;72;159-195;156-190;154-188;153-187;148-182;5*
"RTN","FHASM2B",28,0)
 ;;73;164-200;160-196;158-192;3*;3*;3*
"RTN","FHASM2B",29,0)
GW1 ;;58;120-146;112-138;111-135;3*;3*;3*
"RTN","FHASM2B",30,0)
 ;;59;121-147;114-140;112-136;100-122;99-121;5*
"RTN","FHASM2B",31,0)
 ;;60;122-148;116-142;113-139;106-130;102-124;5*
"RTN","FHASM2B",32,0)
 ;;61;123-151;118-144;115-141;109-133;104-128;5*
"RTN","FHASM2B",33,0)
 ;;62;125-153;121-147;118-144;112-136;108-132;107-131
"RTN","FHASM2B",34,0)
 ;;63;127-155;123-151;121-147;115-141;112-136;107-131
"RTN","FHASM2B",35,0)
 ;;64;130-158;126-154;123-151;119-145;115-141;109-132
"RTN","FHASM2B",36,0)
 ;;65;132-162;130-158;126-154;122-150;120-146;112-136
"RTN","FHASM2B",37,0)
 ;;66;136-166;132-162;128-157;126-154;124-152;116-142
"RTN","FHASM2B",38,0)
 ;;67;140-170;136-166;131-161;130-158;128-156;5*
"RTN","FHASM2B",39,0)
 ;;68;143-175;140-170;2*;2*;2*;2*
"RTN","FHASM2B",40,0)
 ;;69;148-180;144-176;2*;2*;2*;2*
"RTN","FHASM2C")
0^21^B14314553
"RTN","FHASM2C",1,0)
FHASM2C ; HISC/REL - Target Weight - Pediatric ;6/2/89  15:15
"RTN","FHASM2C",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASM2C",3,0)
 ;;Normalized NCHS/CDC Anthropometric Reference
"RTN","FHASM2C",4,0)
 S X1=+$J(AGE*12,0,0) I X1'>0!(X1>119) S IBW="" Q
"RTN","FHASM2C",5,0)
P1 S X=$P($T(WT+X1),";;",2) S:SEX="F" X=$P(X," ",4,6) S X3=$P(X," ",1),A1=$P(X," ",2),A2=$P(X," ",3)
"RTN","FHASM2C",6,0)
 S X1=+$J(-.524*A1+X3,0,1),X2=+$J(.524*A2+X3,0,1)
"RTN","FHASM2C",7,0)
 S W1=+$J(X1*2.2,0,0),W2=+$J(X2*2.2,0,0),W3=+$J(X3*2.2,0,0)
"RTN","FHASM2C",8,0)
 I FHU'="M" S X1=W1,X2=W2,X3=W3
"RTN","FHASM2C",9,0)
P3 W !!,"Select Target Weight (",X1,"-",X2,") ",X3,$S(FHU'="M":" lb",1:" kg"),"// " R X:DTIME I '$T!(X["^") S IBW="^" Q
"RTN","FHASM2C",10,0)
 I X="" S IBW=W3 Q
"RTN","FHASM2C",11,0)
 D WGT^FHASM1 I Y<1 D WGP^FHASM1 G P3
"RTN","FHASM2C",12,0)
 S IBW=+Y I IBW<W1!(IBW>W2) S METH="E"
"RTN","FHASM2C",13,0)
 Q
"RTN","FHASM2C",14,0)
WT ;;3.3 .4 .5 3.2 .5 .4
"RTN","FHASM2C",15,0)
 ;;4.3 .7 .7 4 .6 .5
"RTN","FHASM2C",16,0)
 ;;5.2 .9 .8 4.7 .7 .7
"RTN","FHASM2C",17,0)
 ;;6 1 .9 5.4 .7 .8
"RTN","FHASM2C",18,0)
 ;;6.7 1 .9 6 .8 .8
"RTN","FHASM2C",19,0)
 ;;7.3 1 .9 6.7 .8 .9
"RTN","FHASM2C",20,0)
 ;;7.8 1 1 7.2 .9 .9
"RTN","FHASM2C",21,0)
 ;;8.3 1 1 7.7 .9 .9
"RTN","FHASM2C",22,0)
 ;;8.8 1 1 8.2 .9 1
"RTN","FHASM2C",23,0)
 ;;9.2 1 1 8.6 1 1
"RTN","FHASM2C",24,0)
 ;;9.5 1 1.1 8.9 1 1
"RTN","FHASM2C",25,0)
 ;;9.9 1 1.1 9.2 1 1
"RTN","FHASM2C",26,0)
 ;;10.2 1 1.1 9.5 1 1
"RTN","FHASM2C",27,0)
 ;;10.4 1 1.1 9.8 1.1 1.1
"RTN","FHASM2C",28,0)
 ;;10.7 1.1 1.2 10 1.1 1.1
"RTN","FHASM2C",29,0)
 ;;10.9 1.1 1.2 10.2 1.1 1.1
"RTN","FHASM2C",30,0)
 ;;11.1 1.1 1.2 10.4 1.1 1.1
"RTN","FHASM2C",31,0)
 ;;11.3 1.1 1.2 10.6 1.2 1.1
"RTN","FHASM2C",32,0)
 ;;11.5 1.2 1.2 10.8 1.2 1.1
"RTN","FHASM2C",33,0)
 ;;11.7 1.2 1.2 11 1.2 1.2
"RTN","FHASM2C",34,0)
 ;;11.8 1.2 1.3 11.2 1.2 1.2
"RTN","FHASM2C",35,0)
 ;;12 1.3 1.3 11.4 1.2 1.2
"RTN","FHASM2C",36,0)
 ;;12.2 1.3 1.3 11.5 1.2 1.2
"RTN","FHASM2C",37,0)
 ;;12.4 1.3 1.3 11.7 1.2 1.3
"RTN","FHASM2C",38,0)
 ;;12.3 1.1 1.7 11.8 1.2 1.4
"RTN","FHASM2C",39,0)
 ;;12.5 1.2 1.7 12 1.2 1.5
"RTN","FHASM2C",40,0)
 ;;12.7 1.2 1.7 12.2 1.2 1.5
"RTN","FHASM2C",41,0)
 ;;12.9 1.3 1.7 12.4 1.3 1.6
"RTN","FHASM2C",42,0)
 ;;13.1 1.3 1.7 12.6 1.3 1.6
"RTN","FHASM2C",43,0)
 ;;13.3 1.3 1.7 12.8 1.3 1.7
"RTN","FHASM2C",44,0)
 ;;13.5 1.4 1.7 13 1.3 1.7
"RTN","FHASM2C",45,0)
 ;;13.7 1.4 1.7 13.2 1.4 1.7
"RTN","FHASM2C",46,0)
 ;;13.9 1.5 1.8 13.4 1.4 1.8
"RTN","FHASM2C",47,0)
 ;;14.1 1.5 1.8 13.6 1.4 1.8
"RTN","FHASM2C",48,0)
 ;;14.3 1.5 1.8 13.8 1.4 1.9
"RTN","FHASM2C",49,0)
 ;;14.4 1.6 1.8 13.9 1.5 1.9
"RTN","FHASM2C",50,0)
 ;;14.6 1.6 1.8 14.1 1.5 2
"RTN","FHASM2C",51,0)
 ;;14.8 1.6 1.8 14.3 1.5 2
"RTN","FHASM2C",52,0)
 ;;15 1.7 1.8 14.4 1.5 2
"RTN","FHASM2C",53,0)
 ;;15.2 1.7 1.9 14.6 1.5 2.1
"RTN","FHASM2C",54,0)
 ;;15.3 1.7 1.9 14.8 1.6 2.1
"RTN","FHASM2C",55,0)
 ;;15.5 1.7 1.9 14.9 1.6 2.1
"RTN","FHASM2C",56,0)
 ;;15.7 1.8 1.9 15.1 1.6 2.2
"RTN","FHASM2C",57,0)
 ;;15.8 1.8 1.9 15.2 1.6 2.2
"RTN","FHASM2C",58,0)
 ;;16 1.8 2 15.4 1.6 2.2
"RTN","FHASM2C",59,0)
 ;;16.2 1.8 2 15.5 1.6 2.3
"RTN","FHASM2C",60,0)
 ;;16.4 1.9 2 15.7 1.7 2.3
"RTN","FHASM2C",61,0)
 ;;16.5 1.9 2 15.8 1.7 2.3
"RTN","FHASM2C",62,0)
 ;;16.7 1.9 2 16 1.7 2.4
"RTN","FHASM2C",63,0)
 ;;16.9 1.9 2.1 16.1 1.7 2.4
"RTN","FHASM2C",64,0)
 ;;17 1.9 2.1 16.2 1.7 2.4
"RTN","FHASM2C",65,0)
 ;;17.2 2 2.1 16.4 1.8 2.5
"RTN","FHASM2C",66,0)
 ;;17.4 2 2.2 16.5 1.8 2.5
"RTN","FHASM2C",67,0)
 ;;17.5 2 2.2 16.7 1.8 2.5
"RTN","FHASM2C",68,0)
 ;;17.7 2 2.2 16.8 1.8 2.6
"RTN","FHASM2C",69,0)
 ;;17.9 2 2.2 17 1.8 2.6
"RTN","FHASM2C",70,0)
 ;;18 2 2.3 17.1 1.8 2.6
"RTN","FHASM2C",71,0)
 ;;18.2 2.1 2.3 17.2 1.9 2.7
"RTN","FHASM2C",72,0)
 ;;18.3 2.1 2.3 17.4 1.9 2.7
"RTN","FHASM2C",73,0)
 ;;18.5 2.1 2.4 17.5 1.9 2.7
"RTN","FHASM2C",74,0)
 ;;18.7 2.1 2.4 17.7 1.9 2.8
"RTN","FHASM2C",75,0)
 ;;18.8 2.1 2.4 17.8 2 2.8
"RTN","FHASM2C",76,0)
 ;;19 2.1 2.5 18 2 2.9
"RTN","FHASM2C",77,0)
 ;;19.2 2.2 2.5 18.1 2 2.9
"RTN","FHASM2C",78,0)
 ;;19.3 2.2 2.6 18.3 2 2.9
"RTN","FHASM2C",79,0)
 ;;19.5 2.2 2.6 18.4 2.1 3
"RTN","FHASM2C",80,0)
 ;;19.7 2.2 2.6 18.6 2.1 3
"RTN","FHASM2C",81,0)
 ;;19.8 2.2 2.7 18.7 2.1 3.1
"RTN","FHASM2C",82,0)
 ;;20 2.3 2.7 18.9 2.1 3.1
"RTN","FHASM2C",83,0)
 ;;20.2 2.3 2.8 19 2.2 3.2
"RTN","FHASM2C",84,0)
 ;;20.3 2.3 2.8 19.2 2.2 3.2
"RTN","FHASM2C",85,0)
 ;;20.5 2.3 2.9 19.4 2.2 3.3
"RTN","FHASM2C",86,0)
 ;;20.7 2.3 2.9 19.5 2.3 3.3
"RTN","FHASM2C",87,0)
 ;;20.9 2.4 3 19.7 2.3 3.4
"RTN","FHASM2C",88,0)
 ;;21 2.4 3 19.9 2.3 3.5
"RTN","FHASM2C",89,0)
 ;;21.2 2.4 3.1 20 2.4 3.5
"RTN","FHASM2C",90,0)
 ;;21.4 2.4 3.2 20.2 2.4 3.6
"RTN","FHASM2C",91,0)
 ;;21.6 2.4 3.2 20.4 2.4 3.6
"RTN","FHASM2C",92,0)
 ;;21.7 2.5 3.3 20.6 2.5 3.7
"RTN","FHASM2C",93,0)
 ;;21.9 2.5 3.3 20.8 2.5 3.8
"RTN","FHASM2C",94,0)
 ;;22.1 2.5 3.4 21 2.6 3.9
"RTN","FHASM2C",95,0)
 ;;22.3 2.5 3.5 21.2 2.6 3.9
"RTN","FHASM2C",96,0)
 ;;22.5 2.6 3.5 21.4 2.7 4
"RTN","FHASM2C",97,0)
 ;;22.7 2.6 3.6 21.6 2.7 4.1
"RTN","FHASM2C",98,0)
 ;;22.9 2.6 3.7 21.8 2.8 4.2
"RTN","FHASM2C",99,0)
 ;;23 2.7 3.7 22.1 2.8 4.3
"RTN","FHASM2C",100,0)
 ;;23.2 2.7 3.8 22.3 2.9 4.4
"RTN","FHASM2C",101,0)
 ;;23.4 2.7 3.9 22.5 2.9 4.4
"RTN","FHASM2C",102,0)
 ;;23.6 2.8 4 22.8 3 4.5
"RTN","FHASM2C",103,0)
 ;;23.8 2.8 4 23 3 4.6
"RTN","FHASM2C",104,0)
 ;;24 2.8 4.1 23.3 3.1 4.7
"RTN","FHASM2C",105,0)
 ;;24.2 2.9 4.2 23.5 3.2 4.8
"RTN","FHASM2C",106,0)
 ;;24.4 2.9 4.3 23.8 3.2 4.9
"RTN","FHASM2C",107,0)
 ;;24.7 3 4.4 24 3.3 5
"RTN","FHASM2C",108,0)
 ;;24.9 3 4.5 24.3 3.3 5.2
"RTN","FHASM2C",109,0)
 ;;25.1 3.1 4.6 24.6 3.4 5.3
"RTN","FHASM2C",110,0)
 ;;25.3 3.1 4.7 24.8 3.5 5.4
"RTN","FHASM2C",111,0)
 ;;25.5 3.1 4.7 25.1 3.5 5.5
"RTN","FHASM2C",112,0)
 ;;25.7 3.2 4.8 25.4 3.6 5.6
"RTN","FHASM2C",113,0)
 ;;26 3.3 4.9 25.7 3.7 5.7
"RTN","FHASM2C",114,0)
 ;;26.2 3.3 5 26 3.8 5.8
"RTN","FHASM2C",115,0)
 ;;26.4 3.4 5.1 26.3 3.8 6
"RTN","FHASM2C",116,0)
 ;;26.7 3.4 5.2 26.6 3.9 6.1
"RTN","FHASM2C",117,0)
 ;;26.9 3.5 5.4 26.9 4 6.2
"RTN","FHASM2C",118,0)
 ;;27.1 3.5 5.5 27.2 4.1 6.3
"RTN","FHASM2C",119,0)
 ;;27.4 3.6 5.6 27.5 4.1 6.4
"RTN","FHASM2C",120,0)
 ;;27.6 3.7 5.7 27.8 4.2 6.6
"RTN","FHASM2C",121,0)
 ;;27.9 3.7 5.8 28.1 4.3 6.7
"RTN","FHASM2C",122,0)
 ;;28.1 3.8 5.9 28.5 4.4 6.8
"RTN","FHASM2C",123,0)
 ;;28.4 3.9 6 28.8 4.4 6.9
"RTN","FHASM2C",124,0)
 ;;28.6 3.9 6.1 29.1 4.5 7.1
"RTN","FHASM2C",125,0)
 ;;28.9 4 6.2 29.4 4.6 7.2
"RTN","FHASM2C",126,0)
 ;;29.2 4.1 6.3 29.8 4.7 7.3
"RTN","FHASM2C",127,0)
 ;;29.5 4.1 6.5 30.1 4.8 7.4
"RTN","FHASM2C",128,0)
 ;;29.7 4.2 6.6 30.5 4.8 7.6
"RTN","FHASM2C",129,0)
 ;;30 4.3 6.7 30.8 4.9 7.7
"RTN","FHASM2C",130,0)
 ;;30.3 4.4 6.8 31.1 5 7.8
"RTN","FHASM2C",131,0)
 ;;30.6 4.4 6.9 31.5 5.1 7.9
"RTN","FHASM2C",132,0)
 ;;30.9 4.5 7.1 31.8 5.2 8.1
"RTN","FHASM2C",133,0)
 ;;31.1 4.6 7.2 32.2 5.2 8.2
"RTN","FHASM2D")
0^19^B3712344
"RTN","FHASM2D",1,0)
FHASM2D ; HISC/REL - Target Weight - Anthropometric/Hamwi ;4/10/90  08:16
"RTN","FHASM2D",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASM2D",3,0)
A ; Anthropometric Weight Calculation (Chumlea, 1988)
"RTN","FHASM2D",4,0)
 S EXT="Y" D ANT^FHASM3
"RTN","FHASM2D",5,0)
 S Y="" I ACIR=""!(CCIR="") W *7,!!,"Need Arm & Calf Circumference, at a minimum, to compute weight." Q
"RTN","FHASM2D",6,0)
 G A1:SCA="",A2:KNEE="",A3
"RTN","FHASM2D",7,0)
A1 I SEX="M" S Y=2.31*ACIR+(1.5*CCIR)-50.1 G A4
"RTN","FHASM2D",8,0)
 S Y=1.63*ACIR+(1.43*CCIR)-37.46 G A4
"RTN","FHASM2D",9,0)
A2 I SEX="M" S Y=1.92*ACIR+(1.44*CCIR)+(.26*SCA)-39.97 G A4
"RTN","FHASM2D",10,0)
 S Y=.92*ACIR+(1.5*CCIR)+(.42*SCA)-26.19 G A4
"RTN","FHASM2D",11,0)
A3 I SEX="M" S Y=1.73*ACIR+(.98*CCIR)+(.37*SCA)+(1.16*KNEE)-81.69 G A4
"RTN","FHASM2D",12,0)
 S Y=.98*ACIR+(1.27*CCIR)+(.4*SCA)+(.87*KNEE)-62.35 G A4
"RTN","FHASM2D",13,0)
A4 S Y0=+$J(Y*2.2,0,0),Y=+$J(Y*2.2,0,1)
"RTN","FHASM2D",14,0)
 W !!,"Calculated Weight: ",$S(FHU="M":+$J(Y/2.2,0,0)_"kg",1:Y0_"#") Q
"RTN","FHASM2D",15,0)
K ;Estimating Stature from Knee Height for Persons 60 to 90
"RTN","FHASM2D",16,0)
 ;Years of Age by William Cameron Chumlea, PhD
"RTN","FHASM2D",17,0)
 S KNEE=+$J(Y*2.54,0,1)
"RTN","FHASM2D",18,0)
 I AGE<60 W !,*7,"Can only calculate knee height for persons aged 60 or older" S Y=-1 Q
"RTN","FHASM2D",19,0)
 S A1=Y*2.54
"RTN","FHASM2D",20,0)
 I SEX="M" S A1=60.65+(2.04*A1)
"RTN","FHASM2D",21,0)
 I SEX="F" S A1=84.88+(1.83*A1)-(.24*AGE)
"RTN","FHASM2D",22,0)
 S Y=$J(A1/2.54,0,0)
"RTN","FHASM2D",23,0)
 S X1=$S(Y\12:Y\12_"'",1:"")_$S(Y#12:" "_(Y#12)_"""",1:""),X2=+$J(Y*2.54,0,0)_" cm"
"RTN","FHASM2D",24,0)
 W "  (",$S(FHU'="M":X1,1:X2),")" Q
"RTN","FHASM2D",25,0)
H ; Hamwi tARGET Weight
"RTN","FHASM2D",26,0)
 ; Hamwi,George J. Therapy: Changing Dietary Concepts in Diabetes Mellitus:
"RTN","FHASM2D",27,0)
 ; Diagnosis and Treatment, Vol. 1, Edited by T.S. Danowski.
"RTN","FHASM2D",28,0)
 ; Amer. Diabetes Assn., 500 5th Ave, NYC, NY 10020, 1964, 73-78.
"RTN","FHASM2D",29,0)
 S A1=$S(FRM="S":0.9,FRM="L":1.1,1:1)
"RTN","FHASM2D",30,0)
 I SEX="M" S IBW=HGT-60*6+106*A1
"RTN","FHASM2D",31,0)
 I SEX="F" S IBW=HGT-60*5+100*A1
"RTN","FHASM2D",32,0)
 G ED
"RTN","FHASM2D",33,0)
ED S X1=$S(FHU'="M":+$J(IBW,0,0)_" lb",1:+$J(IBW/2.2,0,1)_" kg")
"RTN","FHASM2D",34,0)
E1 W !!,"Select Target Body Weight: ",X1,"// " R X:DTIME I '$T!(X["^") S IBW="",FHQUIT=1 Q
"RTN","FHASM2D",35,0)
 Q:X=""  D WGT^FHASM1 I Y<1 D WGP^FHASM1 G E1
"RTN","FHASM2D",36,0)
 S:IBW'=+Y IBW=+Y,METH="E" Q
"RTN","FHASM3")
0^7^B17595871
"RTN","FHASM3",1,0)
FHASM3 ; HISC/REL - Antropometrics and TIU Notes ;5/14/93  09:17
"RTN","FHASM3",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASM3",3,0)
 I EXT="Y" G NEXT
"RTN","FHASM3",4,0)
EXT R !!,"Do you wish Anthropometric Assessment? NO// ",EXT:DTIME S:EXT=U FHQUIT=1 G:'$T!(EXT["^") KIL^FHASM1
"RTN","FHASM3",5,0)
 S:EXT="" EXT="N"
"RTN","FHASM3",6,0)
 S X=EXT D TR^FHASM1 S EXT=X
"RTN","FHASM3",7,0)
 I $P("YES",EXT,1)'="",$P("NO",EXT,1)'="" W *7,!," Enter YES if you have Anthropometric measurements; Otherwise NO" G EXT
"RTN","FHASM3",8,0)
 S EXT=$E(EXT,1) I EXT="Y" D ANT G:EXT="" KIL^FHASM1
"RTN","FHASM3",9,0)
NEXT ; Calculate BMI
"RTN","FHASM3",10,0)
 S A2=HGT*.0254,BMI=+$J(WGT/2.2/(A2*A2),0,1)
"RTN","FHASM3",11,0)
 ;update nutrition assessment data in #115.
"RTN","FHASM3",12,0)
 ;
"RTN","FHASM3",13,0)
 ;
"RTN","FHASM3",14,0)
 D ^FHASM3A G ^FHASM4
"RTN","FHASM3",15,0)
ANT ; Anthropometric measurements
"RTN","FHASM3",16,0)
 W !!,"Triceps Skin Fold (mm): " W:$D(TSF) TSF_"// " R X:DTIME G QT:'$T!(X["^")
"RTN","FHASM3",17,0)
 S:X'="" TSF=X
"RTN","FHASM3",18,0)
 S:TSF="" TSF=X
"RTN","FHASM3",19,0)
 G A1:TSF=""
"RTN","FHASM3",20,0)
 I TSF'?.N.1".".N!(TSF<1)!(TSF>100) W !?5,"Enter value between 1 and 100; outside values should be assessed manually" G ANT
"RTN","FHASM3",21,0)
A1 W !,"Subscapular Skinfold (mm): " W:$D(SCA) SCA_"// " R X:DTIME G QT:'$T!(X["^")
"RTN","FHASM3",22,0)
 S:X'="" SCA=X
"RTN","FHASM3",23,0)
 S:SCA="" SCA=X
"RTN","FHASM3",24,0)
 G A2:SCA=""
"RTN","FHASM3",25,0)
 I SCA'?.N.1".".N!(SCA<1)!(SCA>100) W !?5,"Enter value between 1 and 100; outside values should be assessed manually" G A1
"RTN","FHASM3",26,0)
A2 W !,"Arm Circumference (cm): " W:$G(ACIR) ACIR_"// " R X:DTIME G QT:'$T!(X["^")
"RTN","FHASM3",27,0)
 S:X'="" ACIR=X
"RTN","FHASM3",28,0)
 S:SCA="" ACIR=X
"RTN","FHASM3",29,0)
 G A3:ACIR=""
"RTN","FHASM3",30,0)
 I ACIR'?.N.1".".N!(ACIR<5)!(ACIR>100) W !?5,"Enter number between 5 and 100; outside values should be assessed manually" G A2
"RTN","FHASM3",31,0)
A3 W !,"Calf Circumference (cm): " W:$G(CCIR) CCIR_"// " R X:DTIME G QT:'$T!(X["^")
"RTN","FHASM3",32,0)
 S:X'="" CCIR=X
"RTN","FHASM3",33,0)
 S:CCIR="" CCIR=X
"RTN","FHASM3",34,0)
 G A4:CCIR=""
"RTN","FHASM3",35,0)
 I CCIR'?.N.1".".N!(CCIR<10)!(CCIR>250) W !?5,"Enter value between 10 and 250; outside values should be assessed manually" G A3
"RTN","FHASM3",36,0)
A4 I ACIR,TSF S X1=ACIR-(TSF/10*3.1416),BFAMA=X1*X1/12.5664-$S(AGE<18:0,SEX="M":10,1:6.5),BFAMA=$J(BFAMA,0,1)
"RTN","FHASM3",37,0)
 Q
"RTN","FHASM3",38,0)
QT S EXT="" Q
"RTN","FHASM3",39,0)
 ;
"RTN","FHASM3",40,0)
REC ;recalculate calorie, protien and fluid requirements.
"RTN","FHASM3",41,0)
 I '$G(IBW)!'$G(WGT)!'$G(HGT)!'$G(AGE) Q
"RTN","FHASM3",42,0)
 I $D(CFRBO) S CB=CFRBO,W2=$S(CB=2:IBW,CB=3:WGT-IBW*.25+IBW,1:WGT)/2.2
"RTN","FHASM3",43,0)
 Q:'$G(W2)
"RTN","FHASM3",44,0)
 ;calorie
"RTN","FHASM3",45,0)
 I $D(CENB),CENB=3 D
"RTN","FHASM3",46,0)
 .I SEX="M" S KCAL=(10*W2)+(6.25*2.54*HGT)-(5*AGE)+5
"RTN","FHASM3",47,0)
 .I SEX="F" S KCAL=(10*W2)+(6.25*2.54*HGT)-(5*AGE)-161
"RTN","FHASM3",48,0)
 .S KCAL=$J(KCAL,0,0)
"RTN","FHASM3",49,0)
 I $D(CENB),CENB=1 D
"RTN","FHASM3",50,0)
 .I SEX="F" S KCAL=(655.10+(9.56*W2)+(1.85*HGT*2.54)-(4.68*AGE))
"RTN","FHASM3",51,0)
 .I SEX="M" S KCAL=(66.47+(13.75*W2)+(5.0*HGT*2.54)-(6.67*AGE))
"RTN","FHASM3",52,0)
 .I $D(SEF),$G(AF) S KCAL=+$J(KCAL*AF*SEF,0,0)
"RTN","FHASM3",53,0)
 .S KCAL=$J(KCAL,0,0)
"RTN","FHASM3",54,0)
 I $D(CENB),(CENB=2),$G(EKKG) S KCAL=+$J(EKKG*W2,0,0)
"RTN","FHASM3",55,0)
 ;fluid
"RTN","FHASM3",56,0)
 I $G(CFRB),CFRB=1 D
"RTN","FHASM3",57,0)
 .S:AGE>17 FLD=35
"RTN","FHASM3",58,0)
 .S:AGE>64 FLD=30
"RTN","FHASM3",59,0)
 .S FLD=W2*FLD
"RTN","FHASM3",60,0)
 I $D(CFRB),CFRB=2 S W1=W2,FLD=$S(W1<10:W1*100,W1<20:W1-10*50+1000,1:W1-20*25+1500)
"RTN","FHASM3",61,0)
 I $D(CFRB),CFRB=3 S FLD=KCAL
"RTN","FHASM3",62,0)
 I $D(CFRB),CFRB=4 S FLD=.5*KCAL
"RTN","FHASM3",63,0)
 I $D(CFRB),CFRB=5 S X=W2,X1=.425 D PWR^FHASM6 S FLD=Y,X=HGT*2.54,X1=.725 D PWR^FHASM6 S FLD=FLD*Y*.007184*1500
"RTN","FHASM3",64,0)
 S FLD=+$J(FLD,0,0)
"RTN","FHASM3",65,0)
 I FLD'?1N.N!(FLD<0)!(FLD>10000) W *7,!,"Fluid level must be between 0-10000 ml/day" S FHQTALL=1 Q
"RTN","FHASM3",66,0)
 S FLD=+$J(FLD,0,0)
"RTN","FHASM3",67,0)
 ;protien
"RTN","FHASM3",68,0)
 S P1=$S(AGE>18:.8,AGE>14:.84,AGE>10:1,AGE>6:1.2,AGE>3:1.5,AGE>1:1.8,AGE>.5:2,1:2.2)
"RTN","FHASM3",69,0)
 S PRO=+$J(P1*W2,0,0)
"RTN","FHASM3",70,0)
 I PRO'="",(PRO'>0!(PRO>400)) W *7," Protien level is greater than 0 but not more than 400." S FHQTALL=1
"RTN","FHASM3",71,0)
 ;FOLLOW-UP DATE.
"RTN","FHASM3",72,0)
 S (FHDD,DTP)=""
"RTN","FHASM3",73,0)
 I $G(RC),FHFUD<DT D
"RTN","FHASM3",74,0)
 .S X=$P($G(^FH(115.4,RC,0)),U,2) D TR^FH
"RTN","FHASM3",75,0)
 .I X["NORMAL" D
"RTN","FHASM3",76,0)
 ..S:FHLOC FHDD=$P($G(^FH(119.6,FHLOC,0)),U,20)
"RTN","FHASM3",77,0)
 ..S:FHDD DTP="T+"_FHDD
"RTN","FHASM3",78,0)
 ..S:'FHDD DTP="T+11"
"RTN","FHASM3",79,0)
 .I X["MILD" D
"RTN","FHASM3",80,0)
 ..S:FHLOC FHDD=$P($G(^FH(119.6,FHLOC,0)),U,21)
"RTN","FHASM3",81,0)
 ..S:FHDD DTP="T+"_FHDD
"RTN","FHASM3",82,0)
 ..S:'FHDD DTP="T+9"
"RTN","FHASM3",83,0)
 .I X["MODERATE" D
"RTN","FHASM3",84,0)
 ..S:FHLOC FHDD=$P($G(^FH(119.6,FHLOC,0)),U,22)
"RTN","FHASM3",85,0)
 ..S:FHDD DTP="T+"_FHDD
"RTN","FHASM3",86,0)
 ..S:'FHDD DTP="T+7"
"RTN","FHASM3",87,0)
 .I X["SEVERE" D
"RTN","FHASM3",88,0)
 ..S:FHLOC FHDD=$P($G(^FH(119.6,FHLOC,0)),U,23)
"RTN","FHASM3",89,0)
 ..S:FHDD DTP="T+"_FHDD
"RTN","FHASM3",90,0)
 ..S:'FHDD DTP="T+5"
"RTN","FHASM3",91,0)
 .S X=DTP,%DT="X",%DT(0)=DT D ^%DT S FHFUD=Y
"RTN","FHASM3",92,0)
 .W ! K %DT
"RTN","FHASM3",93,0)
 .S FHFUD=Y
"RTN","FHASM3",94,0)
 I 'RC,FHFUD<DT S X="NOW",%DT="X" D ^%DT S FHFUD=Y
"RTN","FHASM3",95,0)
 ;
"RTN","FHASM3",96,0)
 Q
"RTN","FHASM3A")
0^8^B14361776
"RTN","FHASM3A",1,0)
FHASM3A ; HISC/REL - Frisancho Standards ;4/5/90  08:09
"RTN","FHASM3A",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASM3A",3,0)
 S A=AGE\1 G:A<1 KIL I A<18 S O1=A
"RTN","FHASM3A",4,0)
 E  S O1=$S(A<25:18,A<30:19,A<35:20,A<40:21,A<45:22,A<50:23,A<55:24,A<60:25,A<65:26,A<70:27,1:28)
"RTN","FHASM3A",5,0)
 S O2=$S(SEX="F":3,1:1)
"RTN","FHASM3A",6,0)
 F M="BMI","TSF","SCA","ACIR" S X=@M I X'="" D GET S @(M_"P")=Z
"RTN","FHASM3A",7,0)
 G:BFAMA="" KIL S X=BFAMA I A<18!(FRM="") S M="AMA" D GET S BFAMAP=Z G KIL
"RTN","FHASM3A",8,0)
 S O1=O1-17,O2=$S(SEX="F":7,1:1),O2=O2+$S(FRM="S":0,FRM="L":4,1:2)
"RTN","FHASM3A",9,0)
 S M="BFAMA" D GET S BFAMAP=Z G KIL
"RTN","FHASM3A",10,0)
GET S B=$P($T(@M+O2),";;",2),B=$P(B," ",O1)
"RTN","FHASM3A",11,0)
 S S=$P($T(@M+O2+1),";;",2),S=$P(S," ",O1)
"RTN","FHASM3A",12,0)
 S (Z,ZA)=X-B/S S:Z<0 ZA=-Z
"RTN","FHASM3A",13,0)
 S ZA=$S(ZA<.063:0,ZA<.189:1,ZA<.319:2,ZA<.454:3,ZA<.598:4,ZA<.755:5,ZA<.935:6,ZA<1.15:7,ZA<1.44:8,ZA<1.96:9,1:9.8)*5
"RTN","FHASM3A",14,0)
 S Z=50+$S(Z'<0:ZA,1:-ZA) Q
"RTN","FHASM3A",15,0)
KIL ;before killing variables, set partial nutrition assessment.
"RTN","FHASM3A",16,0)
 K A,B,M,O1,O2,S,X,Z,ZA Q
"RTN","FHASM3A",17,0)
BMI ;;
"RTN","FHASM3A",18,0)
 ;;17.3 16.2 16 15.7 15.6 15.8 16.0 16.3 16.9 17.7 18.4 18.9 19.5 20.3 20.8 21.9 21.8 23.6 24.9 25.7 25.9 26.2 26.3 26.1 26.2 25.8 25.5 25.3
"RTN","FHASM3A",19,0)
 ;;2.4 1.3 1.4 1.3 1.5 1.9 1.8 2.2 2.4 2.8 3.6 3.5 3.5 3.3 3.1 3.3 3.5 3.8 4.3 4.2 4 4 4.2 4.2 4.3 3.8 4 4
"RTN","FHASM3A",20,0)
 ;;16.7 16 15.7 15.5 15.5 15.5 15.9 16.5 17.3 17.7 18.9 19.6 20.4 21.1 21.1 22.1 22.5 22.9 23.7 24.8 25.3 25.7 26 26.3 26.9 26.7 26.8 26.6
"RTN","FHASM3A",21,0)
 ;;1.5 1.5 1.4 1.4 1.7 1.7 1.9 2.7 3.1 3.1 3.8 3.7 4.1 3.9 3.8 4 4.7 4.6 5.2 5.9 5.8 5.9 6.2 5.5 6.1 5.5 5.5 5.3
"RTN","FHASM3A",22,0)
TSF ;;
"RTN","FHASM3A",23,0)
 ;;10.4 10 9.9 9.2 8.9 8.9 9 9.6 10.2 11.5 12.5 12.2 11 10.4 9.8 10 9.1 11.3 12.2 13.1 12.9 13 12.9 12.6 12.4 12.5 12.1 12
"RTN","FHASM3A",24,0)
 ;;2.9 2.9 2.7 2.7 3.1 3.8 4 4.4 5.1 5.7 7 6.8 6.7 6.5 6.5 5.9 5.3 6.4 6.7 6.7 6.2 6.6 6.4 6.1 6 6 5.9 5.8
"RTN","FHASM3A",25,0)
 ;;10.4 10.5 10.4 10.3 10.4 10.4 11.1 12.1 13.4 13.9 15 15.1 16.4 17.1 17.3 19.2 19.1 20 21.7 23.7 24.7 25.1 26.1 26.5 26.6 26.6 25.1 24
"RTN","FHASM3A",26,0)
 ;;3.1 2.9 2.9 3 3.5 3.7 4.2 5.4 5.9 6.1 6.8 6.3 7.4 7.3 7.4 7.0 8.0 8.2 8.8 9.2 9.3 9 9.3 9 9.4 8.8 8.5 8.5
"RTN","FHASM3A",27,0)
SCA ;;
"RTN","FHASM3A",28,0)
 ;;6.3 5.9 5.5 5.3 5.2 5.5 5.7 6 6.8 7.6 9.0 8.9 8.8 9.0 9.4 10.1 10.1 13.4 15.5 17.3 17.6 17.4 18.2 17.7 17.6 18.1 16.8 16.3
"RTN","FHASM3A",29,0)
 ;;1.9 2 1.8 1.8 2.4 3.3 3.3 3.8 4.8 5.5 7.6 7.1 7 6.5 6.8 6.2 6 7.6 8.2 8.5 8.3 8.2 8.6 8.4 8.1 8.4 8.2 7.8
"RTN","FHASM3A",30,0)
 ;;6.5 6.4 6.1 6 6.2 6.3 6.7 7.8 9 9.7 10.7 11.5 12.3 13 13 14.7 15.4 16.1 17.5 19.7 20.6 20.9 21.8 23 23.2 22.8 21.4 20.5
"RTN","FHASM3A",31,0)
 ;;2 2.3 2.2 2.3 3 3.4 3.5 5.8 6.5 6.5 7.6 7.7 7.8 7.7 7.5 8.7 8.9 9.4 10.4 11.7 11.6 11.4 11.4 11.4 11.7 11.3 10.6 10.1
"RTN","FHASM3A",32,0)
ACIR ;;
"RTN","FHASM3A",33,0)
 ;;16.1 16.4 16.9 17.2 17.7 18.3 19 19.6 20.7 21.8 22.8 23.8 24.8 26.2 27.3 28.7 29 31 32.1 32.7 32.9 32.9 32.7 32.4 32.3 31.9 31.1 30.6
"RTN","FHASM3A",34,0)
 ;;1.2 1.4 1.4 1.4 1.8 2.1 2.1 2.3 2.7 3 3.4 3.5 3.3 3.5 3.2 3.2 3.4 3.5 3.5 3.4 3.3 3.2 3.4 3.4 3.3 3.4 3.4 3.4
"RTN","FHASM3A",35,0)
 ;;15.7 16.2 16.6 17.1 17.7 18.2 19 20 21.1 21.8 23.2 24 25 25.9 25.9 26.8 27.3 27.5 28.5 29.6 30.2 30.6 30.9 31.2 31.6 31.4 30.9 30.5
"RTN","FHASM3A",36,0)
 ;;1.3 1.3 1.4 1.5 1.8 2 2.2 2.6 2.8 3.1 3.6 3.4 3.7 3.6 3.5 3.5 4.1 4 4.3 4.7 4.8 4.8 5 4.5 5.1 4.6 4.4 4.3
"RTN","FHASM3A",37,0)
AMA ;;
"RTN","FHASM3A",38,0)
 ;;13.2 14.1 15.2 16.3 17.8 19.3 21 22.1 24.5 26.7 28.8 31.9 36.8 42.4 46.8 52.6 54.7 50.5 54.1 55.6 56.5 56.6 55.9 55 54.7 52.8 49.8 47.8
"RTN","FHASM3A",39,0)
 ;;2.3 3.2 3.1 2.7 3.7 4 4.5 4.2 5.1 5.9 6.7 7.4 9 9.1 9.6 10 10.5 11.6 11.9 12.1 12.4 11.7 12.3 12.5 11.8 11.7 11.6 11.5
"RTN","FHASM3A",40,0)
 ;;12.3 13.3 14.3 15.4 16.7 18 19.3 21.1 22.9 24.3 27.6 29.7 31.9 33.9 33.8 34.8 36.1 29.8 31.1 32.8 34.2 35.2 34.9 35.6 37.1 36.3 36.3 36
"RTN","FHASM3A",41,0)
 ;;2.3 2.3 2.4 2.8 3.1 3.9 4 4.7 4.6 5.5 6.7 6.5 7.4 7.7 7 8 8.8 8.4 9.1 10.4 11.5 13.3 11.8 11 13.3 11.3 11.3 10.8
"RTN","FHASM3A",42,0)
BFAMA ;;
"RTN","FHASM3A",43,0)
 ;;45.6 48.2 49.6 51.2 51.5 49.7 49.1 47.9 48.7 45.1 43.5
"RTN","FHASM3A",44,0)
 ;;10.6 9.8 10.2 10.4 10.1 10.8 11.2 10.1 11.2 10.7 10.3
"RTN","FHASM3A",45,0)
 ;;50.5 54 55 56.7 56.7 56.6 55.3 55.4 52.3 49.8 47.8
"RTN","FHASM3A",46,0)
 ;;10.5 11.3 10.4 11.7 11 11.2 11.7 10.8 10.8 10.5 10.8
"RTN","FHASM3A",47,0)
 ;;55.7 60.3 62.8 61.6 61.8 61.1 60.5 60.2 57.9 54.5 52
"RTN","FHASM3A",48,0)
 ;;12.2 12 13.4 13.3 12.3 13 12.8 12 12.1 12.7 12.4
"RTN","FHASM3A",49,0)
 ;;26.2 27.8 28.6 29.8 29.8 29.2 30.3 30.9 31.9 31.3 32
"RTN","FHASM3A",50,0)
 ;;6 7.4 7.8 10.1 6.6 7.4 7.3 7.6 8.7 8.1 9.9
"RTN","FHASM3A",51,0)
 ;;29.3 30 32 32.7 33.7 33.8 35 36.3 35.1 35.7 35.3
"RTN","FHASM3A",52,0)
 ;;7 7.2 9.1 8.4 12.1 8.8 9.7 11.5 9.1 10 9.7
"RTN","FHASM3A",53,0)
 ;;34.4 36.7 38.8 41.6 43.5 43 42.4 45.2 43.1 42.5 41.5
"RTN","FHASM3A",54,0)
 ;;10.7 11.5 12.3 14.4 16.6 15.8 13.1 16.9 14.2 13.4 11.6
"RTN","FHASM4")
0^27^B16463510
"RTN","FHASM4",1,0)
FHASM4 ; HISC/REL/JH - Laboratory/Drug Data ;4/3/01  14:12
"RTN","FHASM4",2,0)
 ;;5.5;DIETETICS;**4,8**;Jan 28, 2005;Build 28
"RTN","FHASM4",3,0)
 S PX=3 D LAB G ^FHASM5
"RTN","FHASM4",4,0)
LAB ; Collect lab results
"RTN","FHASM4",5,0)
 K LRTST,^TMP($J,"LRTST") Q:'DFN
"RTN","FHASM4",6,0)
 S LRDFN=$P($G(^DPT(DFN,"LR")),"^",1) G:'LRDFN LKIL
"RTN","FHASM4",7,0)
 W:PX=3 !!,"Collecting laboratory data ... " D GET
"RTN","FHASM4",8,0)
 S X2=-$S($D(^FH(119.9,1,3)):$P(^(3),"^",2),1:90)
"RTN","FHASM4",9,0)
 S %DT="X",X="T" D ^%DT S DT=+Y,X1=DT D C^%DTC S A1=9999999-X
"RTN","FHASM4",10,0)
 F K=0:0 S K=$O(^LR(LRDFN,"CH",K)) Q:K<1!(K>A1)  F L=0:0 S L=$O(^LR(LRDFN,"CH",K,L)) Q:L'>0  I $D(LRTST(L)) S X=^(L) D STR
"RTN","FHASM4",11,0)
 S %=100 F L=0:0 S L=$O(LRTST(L)) Q:L'>0  F SP=0:0 S SP=$O(LRTST(L,SP)) Q:SP'>0  D
"RTN","FHASM4",12,0)
 .I $P(LRTST(L,SP),"^",6)="" K LRTST(L,SP) Q
"RTN","FHASM4",13,0)
 .S %=%+1,^TMP($J,"LRTST",$S($P(LRTST(L,SP),"^",8)'="":$P(LRTST(L,SP),"^",8),1:%))=LRTST(L,SP) Q
"RTN","FHASM4",14,0)
 K LRTST F L=0:0 S L=$O(^TMP($J,"LRTST",L)) Q:L<1  S LRTST(L)=^(L)
"RTN","FHASM4",15,0)
LKIL K %,%H,%I,%T,%DT,A1,FLG,GRP,HI,K,L,LO,LRCW,LRDFN,P60,PC,SP,THER,TNAM,TST,X,X0,X1,X2,Y Q
"RTN","FHASM4",16,0)
STR ;
"RTN","FHASM4",17,0)
 S SP=$P($G(^LR(LRDFN,"CH",K,0)),"^",5) Q:'SP
"RTN","FHASM4",18,0)
 I '$D(LRTST(L,SP)) Q
"RTN","FHASM4",19,0)
 I $P(LRTST(L,SP),"^",6)'="" Q
"RTN","FHASM4",20,0)
 S FHLR=$$TSTRES^LRRPU(LRDFN,"CH",K,L),FHLO=$P(FHLR,U,3),FHI=$P(FHLR,U,4)
"RTN","FHASM4",21,0)
 S $P(LRTST(L,SP),U,5)=$J(FHLO,4)_$S($L(FHI):" - "_$J(FHI,4),1:"")
"RTN","FHASM4",22,0)
 S P60=$P(LRTST(L,SP),"^",2),SP=$P(LRTST(L,SP),"^",3),GRP=$P(LRTST(L,SP),"^",8)
"RTN","FHASM4",23,0)
 S FLG=$P(X,"^",2),X=$P(X,"^",1) Q:X=""  S PC=$P($G(^LAB(60,P60,.1)),"^",3)
"RTN","FHASM4",24,0)
 S LRCW=8 I PC="" S X=$J(X,LRCW)
"RTN","FHASM4",25,0)
 E  S @("X="_PC)
"RTN","FHASM4",26,0)
 S:FLG'="" X=X_" "_FLG
"RTN","FHASM4",27,0)
 S $P(LRTST(L,SP),"^",6,7)=X_"^"_(9999999-K)
"RTN","FHASM4",28,0)
 I GRP F %=0:0 S %=$O(LRTST(%)) Q:%=""  F P60=0:0 S P60=$O(LRTST(%,P60)) Q:P60=""  I $P(LRTST(%,P60),"^",8)=GRP,'(%=L&(P60=SP)) D
"RTN","FHASM4",29,0)
 .I $P(LRTST(L,SP),"^",7)>$P(LRTST(%,P60),"^",7) K LRTST(%,P60) Q
"RTN","FHASM4",30,0)
 .K LRTST(L,SP) Q
"RTN","FHASM4",31,0)
 Q
"RTN","FHASM4",32,0)
GET ; Get Lab Tests of interest from Site Parameter file
"RTN","FHASM4",33,0)
 F K=0:0 S K=$O(^FH(119.9,1,"L",K)) Q:K'>0  S X=^(K,0) I 'PX!($P(X,"^",PX)="Y") D G1
"RTN","FHASM4",34,0)
 Q
"RTN","FHASM4",35,0)
G1 S P60=+$P(X,"^",1),SP=$P(X,"^",2),GRP=$P(X,"^",5) Q:'SP  S X0=$G(^LAB(60,P60,0)) Q:X0=""
"RTN","FHASM4",36,0)
 S X1=$G(^LAB(60,P60,.1)),TST=$P($P(X0,"^",5),";",2) Q:'TST
"RTN","FHASM4",37,0)
 S TNAM=$P(X0,"^",1) I $L(TNAM)>20 S TNAM=$P(X1,"^",1)
"RTN","FHASM4",38,0)
 S X=$G(^LAB(60,P60,1,SP,0)) Q:'$L(X)  S THER=$S($L($P(X,U,11,12))>1:1,1:0) S LO=$S(THER:$P(X,U,11),1:$P(X,U,2)),HI=$S(THER:$P(X,U,12),1:$P(X,U,3))
"RTN","FHASM4",39,0)
 S LRTST(TST,SP)=TNAM_"^"_P60_"^"_SP_"^"_$P(X,"^",7)_"^"_$J(LO,4)_$S($L(HI):" - "_$J(HI,4),1:"")_"^^^"_GRP Q
"RTN","FHASM4",40,0)
 S @("LO="_$S($L(LO):LO,1:"""""")),@("HI="_$S($L(HI):HI,1:""""""))
"RTN","FHASM4",41,0)
DRUG ; Collect requested drugs 0=Outpatient 1=Inpatient
"RTN","FHASM4",42,0)
 K ^TMP($J,"FHCLASS"),^TMP($J,"FHPSORD"),^TMP($J,"FHPSO"),^TMP($J,"FHDRUG"),^TMP($J,"FHPSS")
"RTN","FHASM4",43,0)
 K PC,PSD,PSCNS,PSCA,PDC,FHPH1,PCLS S PORD=99
"RTN","FHASM4",44,0)
 F K=0:0 S K=$O(^FH(119.9,1,"P",K)) Q:K'>0  D
"RTN","FHASM4",45,0)
 .S FHPH1=^(K,0),(X,PSNIEN)=$P(FHPH1,U,1)
"RTN","FHASM4",46,0)
 .S FHPPA=$P(FHPH1,U,3)
"RTN","FHASM4",47,0)
 .S FHPPNS=$P(FHPH1,U,4)
"RTN","FHASM4",48,0)
 .S FHPPOR=$P(FHPH1,U,5)
"RTN","FHASM4",49,0)
 .S FHPAL=$P(FHPH1,U,6)
"RTN","FHASM4",50,0)
 .S:FHPPA="Y" PCA(X)=K
"RTN","FHASM4",51,0)
 .S:FHPPNS="Y" PCNS(X)=K
"RTN","FHASM4",52,0)
 .S:FHPAL="Y" PCAL(X)=K
"RTN","FHASM4",53,0)
 .I FHPPOR S PCORD(X)=FHPPOR
"RTN","FHASM4",54,0)
 .E  S PCORD(X)=PORD
"RTN","FHASM4",55,0)
 .D IEN^PSN50P65(PSNIEN,,"FHCLASS") S CLS=$E(^TMP($J,"FHCLASS",PSNIEN,.01),1,3)
"RTN","FHASM4",56,0)
 .I CLS'="" S:$E(CLS,3)="0" CLS=$E(CLS,1,2) S PC(CLS)=""
"RTN","FHASM4",57,0)
 G:'$D(PC) PKIL D NOW^%DTC S STRT=(%\1)-1 I 'PX D OUTP G PKIL
"RTN","FHASM4",58,0)
 D PSS432^PSS55(DFN,,"FHPSORD") F PSORD=0:0 S PSORD=$O(^TMP($J,"FHPSORD","B",PSORD)) Q:'PSORD  D D1
"RTN","FHASM4",59,0)
PKIL K %,%H,%I,CLS,DRG,K,PC,PSORD,STRT,X,FHPH1 Q
"RTN","FHASM4",60,0)
OUTP ;
"RTN","FHASM4",61,0)
 D PROF^PSO52API(DFN,"FHPSO",STRT)
"RTN","FHASM4",62,0)
 F JX=0:0 S JX=$O(^TMP($J,"FHPSO",DFN,JX)) Q:JX'>0  D
"RTN","FHASM4",63,0)
 . S X=JX D EN^PSOORDER(DFN,X)
"RTN","FHASM4",64,0)
 . S CLS=$P($P($G(^TMP("PSOR",$J,JX,0)),"^",4),";",1) I CLS'="A",CLS'="H",CLS'="S" Q
"RTN","FHASM4",65,0)
 . S DRG=$P($P($G(^TMP("PSOR",$J,JX,"DRUG",0)),U),";") D:DRG D2
"RTN","FHASM4",66,0)
 . Q
"RTN","FHASM4",67,0)
 Q
"RTN","FHASM4",68,0)
D1 D PSS431^PSS55(DFN,PSORD,,,"FHDRUG")
"RTN","FHASM4",69,0)
 S DRG=$P($G(^TMP($J,"FHDRUG",PSORD,"DDRUG",1,.01)),"^",1)
"RTN","FHASM4",70,0)
 ;
"RTN","FHASM4",71,0)
D2 D DATA^PSS50(DRG,,,,,"FHPSS") I $P(^TMP($J,"FHPSS",0),"^",1)=-1 Q 
"RTN","FHASM4",72,0)
 S CLS=^TMP($J,"FHPSS",DRG,2) Q:CLS=""  I '$D(PC($E(CLS,1,2))),'$D(PC($E(CLS,1,3))) Q
"RTN","FHASM4",73,0)
 S PSD(DRG)=^TMP($J,"FHPSS",DRG,.01)
"RTN","FHASM4",74,0)
 S PSCL605=$P($G(^TMP($J,"FHPSS",DRG,25)),U,1)
"RTN","FHASM4",75,0)
 I $D(PCAL(PSCL605)),$D(PCORD(PSCL605)) S PCLS(PSD(DRG))=PSCL605
"RTN","FHASM4",76,0)
 I $D(PCA(PSCL605)),$D(PCORD(PSCL605)) S PSCA(PCORD(PSCL605),PSD(DRG))=""
"RTN","FHASM4",77,0)
 I $D(PCNS(PSCL605)),$D(PCORD(PSCL605)) S PSCNS(PCORD(PSCL605),PSD(DRG))=""
"RTN","FHASM4",78,0)
 Q
"RTN","FHASM5")
0^9^B24965508
"RTN","FHASM5",1,0)
FHASM5 ; HISC/REL - Energy/Calorie Factors ;3/20/95  08:18
"RTN","FHASM5",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASM5",3,0)
 I AGE<19 G PED
"RTN","FHASM5",4,0)
 S CB="Energy" D GETW G HARRIS:CB=3,KIL^FHASM1:CB=0 W !!,"Calculate Energy Needs by:  "
"RTN","FHASM5",5,0)
 W !!?6,"1  Harris-Benedict",!?6,"2  Kcal/Kg",!?6,"3  Mifflin-St Jeor"
"RTN","FHASM5",6,0)
 W !,?6,"4  Enter Manually"
"RTN","FHASM5",7,0)
E2 W !!,"Choose:  " W:CENB CENB_"// " R CM:DTIME S:CM=U FHQUIT=1 G:'$T!(CM["^") KIL^FHASM1
"RTN","FHASM5",8,0)
 I CM="",CENB S CM=CENB
"RTN","FHASM5",9,0)
 I "1234"'[CM!(CM'?1N) W !,*7,"Choose Either 1, 2, 3 or 4" G E2
"RTN","FHASM5",10,0)
 S CENB=CM
"RTN","FHASM5",11,0)
 S:CM=1 FHCM="Harris-Benedict"
"RTN","FHASM5",12,0)
 S:CM=2 FHCM="Kcal/Kg"
"RTN","FHASM5",13,0)
 S:CM=3 FHCM="Mifflin-St Jeor"
"RTN","FHASM5",14,0)
 S:CM=4 FHCM="Enter Manually"
"RTN","FHASM5",15,0)
 G HARRIS:CM=1,KCAL:CM=2,MIF:CM=3,MAN
"RTN","FHASM5",16,0)
MAN ; Manual Entry
"RTN","FHASM5",17,0)
M1 W !!,"Enter Energy Requirements (Kcal/day):  " W:KCAL'="" KCAL_"// " R X:DTIME G:'$T!(X["^") KIL^FHASM1
"RTN","FHASM5",18,0)
 I (X'=""),(KCAL'=X) S KCAL=X
"RTN","FHASM5",19,0)
 S KCAL=+$J(KCAL,0,0) I KCAL'>0 W *7,!,"KCAL must be greater than 0" G M1
"RTN","FHASM5",20,0)
 G P5
"RTN","FHASM5",21,0)
MIF ;Mifflin - St. Jeor entry; adding this new calculation for cal needs.
"RTN","FHASM5",22,0)
 I SEX="M" S KCAL=10*(W2)+(6.25*(2.5*HGT))-(5*AGE)+5
"RTN","FHASM5",23,0)
 I SEX="F" S KCAL=10*(W2)+(6.25*(2.5*HGT))-(5*AGE)-161
"RTN","FHASM5",24,0)
 S KCAL=$J(KCAL,0,0)
"RTN","FHASM5",25,0)
 G P5
"RTN","FHASM5",26,0)
SUR ;add for s/p bariatic surgery
"RTN","FHASM5",27,0)
 ;S KCAL=20*W2
"RTN","FHASM5",28,0)
 ;S KCAL=KCAL+20,KCAL=$J(KCAL,0,0)
"RTN","FHASM5",29,0)
 ;G P5
"RTN","FHASM5",30,0)
PED ; Pediatric
"RTN","FHASM5",31,0)
 S FHCM=" Pediatric"
"RTN","FHASM5",32,0)
 I AGE<11 S KCAL=$S(AGE<.6:115,AGE<1:105,AGE<4:100,AGE<7:85,1:86) G P1
"RTN","FHASM5",33,0)
 I SEX="M" S KCAL=$S(AGE<15:60,1:42) G P1
"RTN","FHASM5",34,0)
 S KCAL=$S(AGE<15:48,1:38)
"RTN","FHASM5",35,0)
P1 S KCAL=+$J(KCAL*WGT/2.2,0,0) G P5
"RTN","FHASM5",36,0)
HARRIS ; Harris Method
"RTN","FHASM5",37,0)
 I SEX="F" S KCAL=(655.10+(9.56*W2)+(1.85*HGT*2.54)-(4.68*AGE))
"RTN","FHASM5",38,0)
 I SEX="M" S KCAL=(66.47+(13.75*W2)+(5.0*HGT*2.54)-(6.67*AGE))
"RTN","FHASM5",39,0)
 S KCAL=$J(KCAL,0,0)
"RTN","FHASM5",40,0)
H1 W !!,"Is patient confined to bed (Y/N): " W:FHYN'="" FHYN_"//" W:FHYN="" "N //" R AF:DTIME
"RTN","FHASM5",41,0)
 I '$T!(AF["^") S FHQUIT=1 G KIL^FHASM1
"RTN","FHASM5",42,0)
 I AF="",FHYN'="" S AF=FHYN
"RTN","FHASM5",43,0)
 I AF="",FHYN="" S AF="N"
"RTN","FHASM5",44,0)
 S X=AF D TR^FHASM1 S AF=X
"RTN","FHASM5",45,0)
 I $P("YES",AF,1)'="",$P("NO",AF,1)'="" W *7,!,"  Answer YES or NO" G H1
"RTN","FHASM5",46,0)
 S FHYN=AF
"RTN","FHASM5",47,0)
 S AF=$S(AF?1"Y".E:1.2,1:1.3) W "  (Activity Factor = ",AF,")"
"RTN","FHASM5",48,0)
 W !!?27,"Injury/Stress Factors",!
"RTN","FHASM5",49,0)
 W !,"Surgery",?25,"1.1 - 1.3",?40,"Skeletal Trauma",?65,"1.35",!,"Major Sepsis",?25,"1.6",?40,"Severe Burn",?65,"2.1"
"RTN","FHASM5",50,0)
 W !,"Blunt Trauma",?25,"1.35",?40,"Trauma w/ Steroid",?65,"1.68",!,"Starvation",?25,".7",?40,"Trauma on Ventilator",?65,"1.6"
"RTN","FHASM5",51,0)
 W !,"Mild Infection",?25,"1.2",?40,"0-20% BSA Burn",?65,"1.25",!,"Moderate Infection",?25,"1.4",?40,"20-40% BSA Burn",?65,"1.5"
"RTN","FHASM5",52,0)
 W !,"Long Bone Fracture",?25,"1.6",?40,">40% BSA Burn",?65,"1.85",!,"Peritonitis",?25,"1.15"
"RTN","FHASM5",53,0)
 W !,"Stress - Low",?25,"1.3",?40,"Anabolism",?65,"1.5-1.75"
"RTN","FHASM5",54,0)
 W !,"       - Moderate",?25,"1.5",?40,"Cancer",?65,"1.6"
"RTN","FHASM5",55,0)
 W !,"       - Severe",?25,"2.0"
"RTN","FHASM5",56,0)
 W !!,"BEE = ",KCAL," Kcal/day"
"RTN","FHASM5",57,0)
H2 W !!,"Select Energy Factor:  " W:SEF SEF_"// " R EF:DTIME S:EF=U FHQUIT=1 G:'$T!(EF["^") KIL^FHASM1
"RTN","FHASM5",58,0)
 I EF="",SEF S EF=SEF
"RTN","FHASM5",59,0)
 I EF<.7!(EF>2.5) W !,*7,"Energy Factor must be Between .7 and 2.5" G H2
"RTN","FHASM5",60,0)
 S:EF<1 EF=0_EF
"RTN","FHASM5",61,0)
 S SEF=EF
"RTN","FHASM5",62,0)
 S FHEF="Energy Factor of "_EF
"RTN","FHASM5",63,0)
 S KCAL=+$J(KCAL*AF*EF,0,0) G P5
"RTN","FHASM5",64,0)
KCAL ; KCAL Method
"RTN","FHASM5",65,0)
 W !!?35,"Caloric Factors"
"RTN","FHASM5",66,0)
 W !!,"Basal Energy",?30,"25",!,"Ambulatory w/ Weight Maint.",?30,"30"
"RTN","FHASM5",67,0)
 W !,"Malnutrition w/ Mild Sepsis",?30,"40",!,"Injuries/ Sepsis - Severe",?30,"50"
"RTN","FHASM5",68,0)
 W !,"Burn - Extensive",?30,"80",!,"Non-Dialysis Renal Failure",?30,"35"
"RTN","FHASM5",69,0)
 W !,"Dialysis",?30,"40",!,"Dialysis w/ Diabetes",?30,"30",!,"Anabolism",?30,"35-45"
"RTN","FHASM5",70,0)
 W !,"Conservative Mgnt Pre-Dialysis:"
"RTN","FHASM5",71,0)
 W !,"    (<60 years old)",?30,"35"
"RTN","FHASM5",72,0)
 W !,"    (>60 years old)",?30,"30-35"
"RTN","FHASM5",73,0)
 S FHECAL=""
"RTN","FHASM5",74,0)
P4 W !!,"Enter Kcal/Kg (10-100): " W:EKKG'="" EKKG_"// " R FHECAL:DTIME I '$T!(FHECAL["^") S FHQUIT=1 G KIL^FHASM1
"RTN","FHASM5",75,0)
 I FHECAL="",EKKG'="" S FHECAL=EKKG
"RTN","FHASM5",76,0)
 I FHECAL'?1.3N!(FHECAL<10)!(FHECAL>100) W !,*7,"Kcal/Kg Must be Between 10 and 100" G P4
"RTN","FHASM5",77,0)
 I FHECAL'="" S (EKKG,KCAL)=FHECAL
"RTN","FHASM5",78,0)
 S FHKCAL="Caloric Factor of "_KCAL
"RTN","FHASM5",79,0)
 S KCAL=+$J(KCAL*W2,0,0)
"RTN","FHASM5",80,0)
P5 ;
"RTN","FHASM5",81,0)
 S FHFEC=""
"RTN","FHASM5",82,0)
 S:FHEF'="" FHFEC=FHFEC_FHEF_", "
"RTN","FHASM5",83,0)
 S:FHCM'="" FHFEC=FHFEC_FHCM_", "
"RTN","FHASM5",84,0)
 S:FHKCAL'="" FHFEC=FHFEC_FHKCAL
"RTN","FHASM5",85,0)
 S:FHCFRBO'="" FHFEC=FHFEC_" and "_FHCFRBO
"RTN","FHASM5",86,0)
 W !!,"Enter Caloric Requirements (Kcal/day): ",KCAL,"// " R X:DTIME I '$T!(X["^") G KIL^FHASM1
"RTN","FHASM5",87,0)
 I X="",KCAL S X=KCAL
"RTN","FHASM5",88,0)
 I X'="",X'?.N.1".".N!(X<1)!(X>10000) W *7,!?5,"Enter a value between 1-10000" G P5
"RTN","FHASM5",89,0)
 I X'="",X'=KCAL S KCAL=+$J(X,0,0) S FHFEC="User sets the Calorie data"
"RTN","FHASM5",90,0)
NEXT G ^FHASM6
"RTN","FHASM5",91,0)
GETW W !!,"Calculate ",CB," Requirements Based On:" S CM="12"
"RTN","FHASM5",92,0)
 W !!?2,"1  Actual Body Weight",!?2,"2  Target Body Weight"
"RTN","FHASM5",93,0)
 I WGT/IBW'<1.2 W !?2,"3  Obese Calculation" S CM="123"
"RTN","FHASM5",94,0)
E1 W !!,"Choose:  " W:CFRBO CFRBO_"// " R CB:DTIME I '$T!(CB["^") S CB=0,FHQUIT=1 Q
"RTN","FHASM5",95,0)
 I CB="",CFRBO S CB=CFRBO
"RTN","FHASM5",96,0)
 I CM'[CB!(CB'?1N) W !,*7,"Choose either 1 or 2" W:CM["3" " or 3" G E1
"RTN","FHASM5",97,0)
 S CFRBO=CB
"RTN","FHASM5",98,0)
 S W2=$S(CB=2:IBW,CB=3:WGT-IBW*.25+IBW,1:WGT)/2.2 S:CB=3 CM=1
"RTN","FHASM5",99,0)
 S FHCFRBO=$S(CB=1:"Actual Body Wt",CB=2:"Target Body Wt",CB=3:"Obese Calculation",1:"")
"RTN","FHASM5",100,0)
 Q
"RTN","FHASM6")
0^10^B24772464
"RTN","FHASM6",1,0)
FHASM6 ; HISC/REL - Protein/Fluid Requirements ;10/30/90  13:42
"RTN","FHASM6",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASM6",3,0)
H2O W !!,"Calculate Fluid Requirements By:"
"RTN","FHASM6",4,0)
 W !!?5,"1)  Adult (35 ml/kg/day)",!?9,"Elderly Calculation  (30 ml/kg/day)",!?9,"Adolescent (40-60 ml/kg/day)",!?9,"Children (70-110 ml/kg/day)",!?9,"Infant (100-150 ml/kg/day)"
"RTN","FHASM6",5,0)
 W !?5,"2)  100 ml/kg first 10 kg +",!?9,"50 ml/kg second 10 kg +",!?9,"25 ml/kg remaining kg"
"RTN","FHASM6",6,0)
 W !?5,"3)  1 ml/Kcal",!?5,"4)  0.5 ml/Kcal  (Fluid Overload)"
"RTN","FHASM6",7,0)
 W !?5,"5)  1500 ml/sq meter"
"RTN","FHASM6",8,0)
 W !?5,"6)  Set Your Own Fluid Level",!?5,"7)  Omit Calculation"
"RTN","FHASM6",9,0)
H0 W !!,"Choose: " W:CFRB CFRB_"// " R H2O:DTIME S:H2O=U FHQUIT=1 G:'$T!(H2O["^") KIL^FHASM1
"RTN","FHASM6",10,0)
 I H2O="",CFRB S H2O=CFRB
"RTN","FHASM6",11,0)
 I "1234567"'[H2O!(H2O'?1N) W !,"Choose 1 - 7 Only" G H0
"RTN","FHASM6",12,0)
 S CFRB=H2O
"RTN","FHASM6",13,0)
 I "125"[H2O S CB="Fluid" D GETW^FHASM5 G:CB=0 KIL^FHASM1
"RTN","FHASM6",14,0)
 G H1:H2O=1,H2:H2O=2,H3:H2O=3,H4:H2O=4,H5:H2O=5,H6:H2O=6 S:'$D(FLD) FLD="" G PRO
"RTN","FHASM6",15,0)
H1 ;add elderly calculation here
"RTN","FHASM6",16,0)
 I AGE>64 S FLD=30 G H12
"RTN","FHASM6",17,0)
 I AGE>17 S FLD=35 G H12
"RTN","FHASM6",18,0)
 I AGE>10 S A1=40,A2=60 G H11
"RTN","FHASM6",19,0)
 I AGE'<1 S A1=70,A2=110 G H11
"RTN","FHASM6",20,0)
 S A1=100,A2=150
"RTN","FHASM6",21,0)
H11 W !!,"Select Level Between ",A1," and ",A2," ml/kg/day: " W:FLD'="" FLD_"// "
"RTN","FHASM6",22,0)
 R FLD:DTIME S:FLD=U FHQUIT=1 G:'$T!(FLD["^") KIL^FHASM1
"RTN","FHASM6",23,0)
 I FLD<A1!(FLD>A2) W *7,!,"Fluid Level is not within range." G H11
"RTN","FHASM6",24,0)
H12 S FLD=W2*FLD G H7
"RTN","FHASM6",25,0)
H2 S W1=W2,FLD=$S(W1<10:W1*100,W1<20:W1-10*50+1000,1:W1-20*25+1500) G H7
"RTN","FHASM6",26,0)
H3 S FLD=KCAL G H7
"RTN","FHASM6",27,0)
H4 S FLD=.5*KCAL G H7
"RTN","FHASM6",28,0)
H5 S X=W2,X1=.425 D PWR S FLD=Y,X=HGT*2.54,X1=.725 D PWR S FLD=FLD*Y*.007184*1500 G H7
"RTN","FHASM6",29,0)
H6 W !!,"Enter Fluid Requirements (ml/day): ",FLD,"// " R FLD:DTIME S:FLD=U FHQUIT=1 G:'$T!(FLD["^") KIL^FHASM1
"RTN","FHASM6",30,0)
 I FLD'?1N.N!(FLD<0)!(FLD>10000) W *7,!,"Level must be between 0-10000 ml/day" G H6
"RTN","FHASM6",31,0)
 S FLD=+$J(FLD,0,0) G PRO
"RTN","FHASM6",32,0)
H7 S FLD=+$J(FLD,0,0)
"RTN","FHASM6",33,0)
H8 W !!,"Select Fluid Requirements (ml/day): ",FLD,"// " R X:DTIME I '$T!(X["^") G KIL^FHASM1
"RTN","FHASM6",34,0)
 I X'="",X'?1N.N!(X<0)!(X>10000) W *7,!,"Level must be between 0-10000 ml/day" G H8
"RTN","FHASM6",35,0)
 I X'="",X'=FLD S FLD=+$J(X,0,0),H2O=6
"RTN","FHASM6",36,0)
PRO ;protein calculation.  Before setting protein, set the formula used in Fluid calculation.
"RTN","FHASM6",37,0)
 S (FHH2O,FHH2O)=""
"RTN","FHASM6",38,0)
 I H2O=1 D
"RTN","FHASM6",39,0)
 .I AGE>64 S FHH2O="Elderly Calculation (30 ml/kg/day)" Q
"RTN","FHASM6",40,0)
 .I AGE>17 S FHH2O="Adult (35 ml/kg/day)" Q
"RTN","FHASM6",41,0)
 .I AGE>10 S FHH2O="Adolescent (40-60 ml/kg/day)" Q
"RTN","FHASM6",42,0)
 .I AGE'<1 S FHH2O="Children (70-110 ml/kg/day)" Q
"RTN","FHASM6",43,0)
 .S FHH2O="Infant (100-150 ml/kg/day)" Q
"RTN","FHASM6",44,0)
 I H2O=2 D
"RTN","FHASM6",45,0)
 .I W1<10 S FHH2O="100 ml/kg first 10 kg" Q
"RTN","FHASM6",46,0)
 .I W1<20 S FHH2O="50N ml/kg 10 kg" Q
"RTN","FHASM6",47,0)
 .S FHH2O="25 ml/kg remaining kg"
"RTN","FHASM6",48,0)
 S:H2O=3 FHH2O="1 ml/kcal"
"RTN","FHASM6",49,0)
 S:H2O=4 FHH2O="0.5 ml/kcal (Fluid Overload"
"RTN","FHASM6",50,0)
 S:H2O=5 FHH2O="1500 ml/sq meter"
"RTN","FHASM6",51,0)
 S:H2O=6 FHH2O="Set Your Own Fluid Level"
"RTN","FHASM6",52,0)
 S:H2O=7 FHH2O="Omit Calculation"
"RTN","FHASM6",53,0)
 S FHFFC=FHH2O_" and "_FHCFRBO
"RTN","FHASM6",54,0)
 S CB="Protein" D GETW^FHASM5 G:CB=0 KIL^FHASM1 W !!?11,"Protein Requirements (g/kg)",!?16,"(Examples)"
"RTN","FHASM6",55,0)
 W !,"Acute Burn, Injury,  Trauma",?48,"2-4"
"RTN","FHASM6",56,0)
 W !,"Acute Encephalopathy",?48,"0.6-0.8"
"RTN","FHASM6",57,0)
 W !,"Acute Hepatitis",?48,"1.2-1.5"
"RTN","FHASM6",58,0)
 W !,"Anabolism",?48,"1.2-1.5"
"RTN","FHASM6",59,0)
 W !,"Burn",?48,"1.4"
"RTN","FHASM6",60,0)
 W !,"Chronic Encephalopathy",?48,"1.2"
"RTN","FHASM6",61,0)
 W !,"Chronic Hepatitis (no cirrhosis)",?48,"1.2-1.5"
"RTN","FHASM6",62,0)
 W !,"Chronic Liver Disease",?48,"1-1.5"
"RTN","FHASM6",63,0)
 W !,"Chronic Renal Failure",?48,"0.6"
"RTN","FHASM6",64,0)
 W !,"Conservative Mgt Pre-Dialysis",?48,"0.6-0.75"
"RTN","FHASM6",65,0)
 W !,"Convalescent Burn, Injury Trauma",?48,"2"
"RTN","FHASM6",66,0)
 W !,"ESRD Hemodialysis",?48,"1.2-1.3"
"RTN","FHASM6",67,0)
 W !,"ESRD Peritoneal Dialysis",?48,"1.2-1.3"
"RTN","FHASM6",68,0)
 W !,"Ileocolostomy",?48,"1-1.4"
"RTN","FHASM6",69,0)
 W !,"Liver transplant (pre-transplant/stable)",?48,"1.2-1.5"
"RTN","FHASM6",70,0)
 W !,"Malabsorption Syndrome",?48,"1"
"RTN","FHASM6",71,0)
 W !,"Nephrotic Syndrome",?48,"1-1.4"
"RTN","FHASM6",72,0)
 W !,"Post-liver transplant - short term(1-2 months)",?48,"1.2-2"
"RTN","FHASM6",73,0)
 W !,"                        long term",?48,"0.8-1.0"
"RTN","FHASM6",74,0)
 W !,"Pressure Ulcers",?48,"1.2-1.5"
"RTN","FHASM6",75,0)
 W !,"Protein-Sparing",?48,"1.5"
"RTN","FHASM6",76,0)
 W !,"Ulcerative Colitis",?48,"1-1.4"
"RTN","FHASM6",77,0)
 S P1=$S(AGE>18:0.8,AGE>14:0.84,AGE>10:1,AGE>6:1.2,AGE>3:1.5,AGE>1:1.8,AGE>.5:2,1:2.2)
"RTN","FHASM6",78,0)
P6 S FHPLX=$S($G(FHPL):FHPL,1:P1) I FHPLX<1,$E(FHPLX,1)'="0" S FHPLX="0"_FHPLX
"RTN","FHASM6",79,0)
 S X="" W !!,"Enter Protein Level (g/kg) ",FHPLX," // " R X:DTIME S:X="^" FHQUIT=1 I '$T!(X["^")!FHQUIT G KIL^FHASM1
"RTN","FHASM6",80,0)
 I FHPLX,X="" S X=FHPLX
"RTN","FHASM6",81,0)
 I X'?.1N.1".".2N!(X<.4)!(X>4) W *7,"  Level must be 0.4 to 4.0" G P6
"RTN","FHASM6",82,0)
 I X<1,$E(X,1)'="0" S X="0"_X
"RTN","FHASM6",83,0)
 S (PRO,FHPL)=X
"RTN","FHASM6",84,0)
 S PRO=+$J(PRO*W2,0,0)
"RTN","FHASM6",85,0)
 S FHFPC=FHCFRBO_" and protein level of "_X
"RTN","FHASM6",86,0)
P7 W !!,"Enter Protein Requirements (gm/day): ",PRO,"// " R X:DTIME I '$T!(X["^") G KIL^FHASM1
"RTN","FHASM6",87,0)
 I X'="",X'>0!(X>400) W *7," Enter a value greater than 0 but not more than 400." G P7
"RTN","FHASM6",88,0)
 I X'="",X'=PRO S PRO=+$J(X,0,0),FHFPC="User sets the Protein Level"
"RTN","FHASM6",89,0)
 I KCAL W "  ",$J(PRO*400/KCAL,0,0)," % of KCAL"
"RTN","FHASM6",90,0)
 ;
"RTN","FHASM6",91,0)
NEXT G ^FHASM7
"RTN","FHASM6",92,0)
 ;
"RTN","FHASM6",93,0)
PWR ; Raise X to X1 power - Output in Y
"RTN","FHASM6",94,0)
 I X'>0 S Y=0 Q
"RTN","FHASM6",95,0)
 S X2=1 I X>0 F X3=0:1 Q:(X/X2)<10  S X2=X2*10
"RTN","FHASM6",96,0)
 I X<1 F X3=0:-1 Q:(X/X2)>.1  S X2=X2*.1
"RTN","FHASM6",97,0)
 S X=X/X2
"RTN","FHASM6",98,0)
 S X=(X-1)/(X+1),(Y,X5)=X F X4=3:2 S X5=X5*X*X,X2=X5/X4,Y=X2+Y S:X2<0 X2=-X2 Q:X2<.000001
"RTN","FHASM6",99,0)
 S Y=Y*2+(X3*2.302585),X=Y*X1
"RTN","FHASM6",100,0)
 S (Y,X5)=X,Y=Y+1 F X4=2:1 S X5=X5*X/X4,Y=Y+X5 Q:X5<.000001
"RTN","FHASM6",101,0)
 S Y=+$J(Y,0,5) K X2,X3,X4,X5 Q
"RTN","FHASM7")
0^11^B65406983
"RTN","FHASM7",1,0)
FHASM7 ; HISC/REL - KCAL Distribution ;8/18/93  11:05
"RTN","FHASM7",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASM7",3,0)
 S PRT=0,(ASN,NB)=""
"RTN","FHASM7",4,0)
E31 S FH7FLG=1 D ^FHASMR1 K FH7FLG
"RTN","FHASM7",5,0)
 R !!,"Do you want to do a NITROGEN BALANCE? NO// ",X:DTIME G:'$T!(X["^") KIL^FHASM1 S:X="" X="N" D TR^FHASM1 I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7," Answer YES or NO" G E31
"RTN","FHASM7",6,0)
 I $E(X,1)="N" G KIL:'FHDFN,EDU
"RTN","FHASM7",7,0)
E32 R !!,"Enter Protein Intake (gm/24hr): ",X1:DTIME S:X1=U FHQUIT=1 G KIL^FHASM1:'$T!(X1["^"),E35:X1=""
"RTN","FHASM7",8,0)
 I X1'?.N.1".".N!(X1<0)!(X1>200) W !?5,"Enter 0-200 grams of protein intake" G E32
"RTN","FHASM7",9,0)
E33 R !,"Enter Urinary Nitrogen Output (gm/24hr): ",X2:DTIME S:X2=U FHQUIT=1 G KIL^FHASM1:'$T!(X2["^"),E35:X2=""
"RTN","FHASM7",10,0)
 I X2'?.N.1".".N!(X2<0)!(X2>30) W !?5,"Enter 0-30 gms of Urinary Nitrogen output (24 hr UUN)" G E33
"RTN","FHASM7",11,0)
E34 R !,"Enter Insensible Nitrogen Output (gm/24hr): 4// ",X3:DTIME S:X3="" X3=4 S:X3=U FHQUIT=1 G:'$T!(X3["^") KIL^FHASM1
"RTN","FHASM7",12,0)
 I X3'?.N.1".".N!(X3<0)!(X3>10) W !?5,"Insensible Nitrogen output should be between 0-10 grams" G E34
"RTN","FHASM7",13,0)
 S NB=X1/6.25-(X2+X3),NB=$J(NB,0,0) W !,"Nitrogen Balance: ",NB
"RTN","FHASM7",14,0)
E35 G:'FHDFN KIL
"RTN","FHASM7",15,0)
EDU ;
"RTN","FHASM7",16,0)
 W !!,"Did you educate patient on Food/Drug Interactions (Y/N): " W:FHEDU'="" FHEDU_"//" W:FHEDU="" "N//" R X:DTIME
"RTN","FHASM7",17,0)
 G KIL^FHASM1:'$T!(X["^")
"RTN","FHASM7",18,0)
 I X="",FHEDU="" S X="N"
"RTN","FHASM7",19,0)
 I X="",FHEDU'="" S X=FHEDU
"RTN","FHASM7",20,0)
 D TR^FH
"RTN","FHASM7",21,0)
 I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,!,"Enter 'Y' for yes or 'N' for no." G EDU
"RTN","FHASM7",22,0)
 S FHEDU=$E(X,1)
"RTN","FHASM7",23,0)
EDC ;food/drug comment.
"RTN","FHASM7",24,0)
 S FHFDC=FHFDCSV
"RTN","FHASM7",25,0)
 W !!,"Food/Drug Comment: ",FHFDCSV,"// " R FHFDC:DTIME I '$T!(FHFDC["^") S FHQUIT=1 G KIL^FHASM1
"RTN","FHASM7",26,0)
 I FHFDC="@" S FHFDCSV="" W "  deleted..." G DPL
"RTN","FHASM7",27,0)
 I (FHFDC=""),(FHFDCSV'="") S FHFDC=FHFDCSV
"RTN","FHASM7",28,0)
 I FHFDC["?"!($L(FHFDC)>30) W *7,!,"Enter Food/Drug Comment or Hit Return to Accept or @ to Delete and cannot exceed 30 characters!!" G EDC
"RTN","FHASM7",29,0)
 S FHFDCSV=FHFDC
"RTN","FHASM7",30,0)
 ;adding diagnosis, follow-up date
"RTN","FHASM7",31,0)
DPL ;get diagnosis from Problem List package.
"RTN","FHASM7",32,0)
 D:DFN LIST^GMPLUTL2(.FHPLIST,DFN,"A","")
"RTN","FHASM7",33,0)
 S FHDIACT=0
"RTN","FHASM7",34,0)
 I $D(FHPLIST(0)) S FHDIACT=FHPLIST(0)
"RTN","FHASM7",35,0)
DP1 I FHDIACT D
"RTN","FHASM7",36,0)
 .S FHDCH=""
"RTN","FHASM7",37,0)
 .W !!,"Patient's Diagnosis from Problem List:",!
"RTN","FHASM7",38,0)
 .F FHDLI=0:0 S FHDLI=$O(FHPLIST(FHDLI)) Q:'FHDLI  D
"RTN","FHASM7",39,0)
 ..S DTP=$P(FHPLIST(FHDLI),U,6) D DTP^FH
"RTN","FHASM7",40,0)
 ..W !,?6,FHDLI_"  ",$P(FHPLIST(FHDLI),U,3)," - Date entered: ",DTP
"RTN","FHASM7",41,0)
 G:'FHDIACT ANF
"RTN","FHASM7",42,0)
 W !!,"Diagnosis: " W:FHDIPL'="" FHDIPL W "// " R FHDCH:DTIME S:FHDCH=U FHQUIT=1 G:'$T!(FHDCH["^") KIL^FHASM1
"RTN","FHASM7",43,0)
 G:FHDCH="" ANF
"RTN","FHASM7",44,0)
 I FHDCH="@" S (FHDIPL,FHDIPLD)="" G ANF
"RTN","FHASM7",45,0)
 I '$D(FHPLIST(FHDCH)) W !!,*7,"Choose a number from the list or Hit Return to accept default!!",! G DP1
"RTN","FHASM7",46,0)
 S FHDIPL=$P(FHPLIST(FHDCH),U,3),FHDIPLD=$P(FHPLIST(FHDCH),U,6)
"RTN","FHASM7",47,0)
ANF ;problem through NFS.
"RTN","FHASM7",48,0)
 S AFDIA=FHDINA
"RTN","FHASM7",49,0)
 W !!,"Problem: ",FHDINA,"// " R AFDIA:DTIME I '$T!(AFDIA["^") S FHQUIT=1 G KIL^FHASM1
"RTN","FHASM7",50,0)
 I AFDIA="@" S FHDINA="" W "  deleted..." G DNF
"RTN","FHASM7",51,0)
 I (AFDIA=""),(FHDINA'="") S AFDIA=FHDINA
"RTN","FHASM7",52,0)
 I AFDIA["?"!($L(AFDIA)>30) W *7,!,"Enter patient's Problem or Hit Return to Accept or @ to Delete and cannot exceed 30 characters!!" G ANF
"RTN","FHASM7",53,0)
 S FHDINA=AFDIA
"RTN","FHASM7",54,0)
 ;
"RTN","FHASM7",55,0)
DNF ;aditional problem through NFS.
"RTN","FHASM7",56,0)
 S NFDIA=FHDINF
"RTN","FHASM7",57,0)
 W !!,"Additional Problem: ",FHDINF,"// " R NFDIA:DTIME I '$T!(NFDIA["^") S FHQUIT=1 G KIL^FHASM1
"RTN","FHASM7",58,0)
 I NFDIA="@" S FHDINF="" W "  deleted..." G E4
"RTN","FHASM7",59,0)
 I (NFDIA=""),(FHDINF'="") S NFDIA=FHDINF
"RTN","FHASM7",60,0)
 I NFDIA["?"!($L(NFDIA)>30) W *7,!,"Enter Additional Problem of a patient or Hit Return to Accept or @ to Delete and cannot exceed 30 characters!!" G DNF
"RTN","FHASM7",61,0)
 S FHDINF=NFDIA
"RTN","FHASM7",62,0)
 ;
"RTN","FHASM7",63,0)
E4 ;
"RTN","FHASM7",64,0)
 S APP=FHAPP
"RTN","FHASM7",65,0)
 W !!,"Appearance: ",FHAPP,"// " R APP:DTIME I '$T!(APP["^") S FHQUIT=1 G KIL^FHASM1
"RTN","FHASM7",66,0)
 I APP="@" S FHAPP="" W "  deleted..." G EC1
"RTN","FHASM7",67,0)
 I (APP=""),(FHAPP'="") S APP=FHAPP
"RTN","FHASM7",68,0)
 I APP["?"!(APP'?.ANP)!($L(APP)>60) W *7,!,"Enter Physical Appearance of patient or Hit Return to Accept or @ to Delete and cannot exceed 60 characters." G E4
"RTN","FHASM7",69,0)
 S FHAPP=APP
"RTN","FHASM7",70,0)
EC1 W ! S DIC="^FH(115.3,",DIC(0)="AEQMZ",DIC("B")=XD D ^DIC K DIC G KIL^FHASM1:X["^"!$D(DTOUT) S XD=$S(Y>0:+Y,1:"")
"RTN","FHASM7",71,0)
E5 W ! S DIC="^FH(115.4,",DIC(0)="AEQMZ",DIC("B")=RC,DIC("S")="I $P(^(0),U,2)'=""""" D ^DIC K DIC G KIL^FHASM1:X["^"!$D(DTOUT) S RC=$S(Y>0:+Y,1:"")
"RTN","FHASM7",72,0)
 W !!,"Comments:" K ^TMP("FH",$J) S DIC="^TMP(""FH"",$J,",DWPK=1
"RTN","FHASM7",73,0)
 I FHASK="E",$D(^FHPT(FHDFN,"N",FHCAS,"X")) M ^TMP("FH",$J)=^FHPT(FHDFN,"N",FHCAS,"X") D EN^DIWE G FDT
"RTN","FHASM7",74,0)
 D EN^DIWE
"RTN","FHASM7",75,0)
FDT ;enter follow-up date.
"RTN","FHASM7",76,0)
 S (FHDD,DTP)=""
"RTN","FHASM7",77,0)
 I $G(RC) D
"RTN","FHASM7",78,0)
 .S X=$P($G(^FH(115.4,RC,0)),U,2) D TR^FH
"RTN","FHASM7",79,0)
 .I X["NORMAL" D
"RTN","FHASM7",80,0)
 ..S:FHLOC FHDD=$P($G(^FH(119.6,FHLOC,0)),U,20)
"RTN","FHASM7",81,0)
 ..S:FHDD DTP="T+"_FHDD
"RTN","FHASM7",82,0)
 ..S:'FHDD DTP="T+11"
"RTN","FHASM7",83,0)
 .I X["MILD" D
"RTN","FHASM7",84,0)
 ..S:FHLOC FHDD=$P($G(^FH(119.6,FHLOC,0)),U,21)
"RTN","FHASM7",85,0)
 ..S:FHDD DTP="T+"_FHDD
"RTN","FHASM7",86,0)
 ..S:'FHDD DTP="T+9"
"RTN","FHASM7",87,0)
 .I X["MODERATE" D
"RTN","FHASM7",88,0)
 ..S:FHLOC FHDD=$P($G(^FH(119.6,FHLOC,0)),U,22)
"RTN","FHASM7",89,0)
 ..S:FHDD DTP="T+"_FHDD
"RTN","FHASM7",90,0)
 ..S:'FHDD DTP="T+7"
"RTN","FHASM7",91,0)
 .I X["SEVERE" D
"RTN","FHASM7",92,0)
 ..S:FHLOC FHDD=$P($G(^FH(119.6,FHLOC,0)),U,23)
"RTN","FHASM7",93,0)
 ..S:FHDD DTP="T+"_FHDD
"RTN","FHASM7",94,0)
 ..S:'FHDD DTP="T+5"
"RTN","FHASM7",95,0)
 K %DT S %DT="AEF",%DT("A")="Enter Follow-up Assessment Date: "
"RTN","FHASM7",96,0)
 I FHFUD'="",FHFUD>DT S DTP=$E(FHFUD,4,5)_"/"_$E(FHFUD,6,7)_"/"_$E(FHFUD,2,3)
"RTN","FHASM7",97,0)
 S:DTP'="" %DT("B")=DTP S:DTP="" %DT("B")="TODAY"
"RTN","FHASM7",98,0)
 S %DT(0)=DT
"RTN","FHASM7",99,0)
 W ! D ^%DT K %DT G KIL^FHASM1:X["^"!$D(DTOUT),FDT:Y<1
"RTN","FHASM7",100,0)
 S FHFUD=Y
"RTN","FHASM7",101,0)
SDAT ;create or update nutrition assessment and file to Progress Notes.
"RTN","FHASM7",102,0)
 G:'$D(FHASK) KILL^XUSCLEAN
"RTN","FHASM7",103,0)
 I '$D(^FHPT(FHDFN,0)) S ^(0)=FHDFN
"RTN","FHASM7",104,0)
 I '$D(^FHPT(FHDFN,"N",0)) S ^FHPT(FHDFN,"N",0)="^115.011D^^"
"RTN","FHASM7",105,0)
 K DIC,DD,DO S DIC="^FHPT(FHDFN,""N"",",DIC(0)="L",DLAYGO=115,DA(1)=FHDFN
"RTN","FHASM7",106,0)
 I FHASK="E" S ASN=FHCAS D REC^FHASM3  ;re-calculate calorie, protien and fluid requirement.
"RTN","FHASM7",107,0)
 I FHASK="C" S X=ADT,DINUM=9999999-ADT D FILE^DICN S ASN=+Y  ;if not an update, create.
"RTN","FHASM7",108,0)
 D NOW^%DTC S NOW=%
"RTN","FHASM7",109,0)
 S A2=HGT*.0254,BMI=+$J(WGT/2.2/(A2*A2),0,1)
"RTN","FHASM7",110,0)
 S Y=ADT_"^"_SEX_"^"_AGE_"^"_HGT_"^"_HGP_"^"_WGT_"^"_WGP_"^"_DWGT_"^"_UWGT_"^"_IBW_"^"_FRM_"^"_AMP_"^^^^"_KCAL_"^"_PRO_"^"_FLD_"^"_RC_"^"_XD_"^"_BMI_"^"_BMIP_"^"_DUZ_"^"_NOW_"^"_NB
"RTN","FHASM7",111,0)
 S ^FHPT(FHDFN,"N",ASN,0)=Y
"RTN","FHASM7",112,0)
 S:'FHFUD FHFUD=DT
"RTN","FHASM7",113,0)
 S FHASN1=TSF_U_TSFP_U_SCA_U_SCAP_U_ACIR_U_ACIRP_U_CCIR_U_CCIRP_U_BFAMA_U_BFAMAP_U_WCCM_U_CIBW_U_CERBO_U_CENB_U_PCTB_U_SEF_U_CFRB_U_CFRBO_U_CPRBO_U_EKKG
"RTN","FHASM7",114,0)
 S ^FHPT(FHDFN,"N",ASN,1)=FHASN1
"RTN","FHASM7",115,0)
 S ^FHPT(FHDFN,"N",ASN,2)=FHAPP
"RTN","FHASM7",116,0)
 S ^FHPT(FHDFN,"N",ASN,3)=FHYN_U_FHFEC_U_FHFPC_U_FHDINA_U_FHEDU_U_FHFDCSV_U_FHPL_U_FHSPC
"RTN","FHASM7",117,0)
 S ^FHPT(FHDFN,"N",ASN,"DI")=FHDIPL_U_FHDIPLD_U_FHDINF_U_FHDINFD_U_FHFUD_U_FHDIST_U_FHDIDI_U_FHDITFDT
"RTN","FHASM7",118,0)
 S $P(^FHPT(FHDFN,"N",ASN,"DI"),U,10)=FHDITFML
"RTN","FHASM7",119,0)
 S $P(^FHPT(FHDFN,"N",ASN,"DI"),U,11)=FHDITFKC
"RTN","FHASM7",120,0)
 S $P(^FHPT(FHDFN,"N",ASN,4),U,1)=FHDITFCM
"RTN","FHASM7",121,0)
 I $D(FHDITFPR),'$D(^FHPT(FHDFN,"N",ASN,"TF")) F FHTUN=0:0 S FHTUN=$O(FHDITFPR(FHTUN)) Q:FHTUN'>0  D
"RTN","FHASM7",122,0)
 .S Y=FHTUN K DIC,DO S DA(2)=FHDFN,DA(1)=ASN
"RTN","FHASM7",123,0)
 .S DIC="^FHPT("_DA(2)_",""N"","_DA(1)_",""TF"","
"RTN","FHASM7",124,0)
 .S DIC(0)="L",DIC("P")=$P(^DD(115.011,67.1,0),U,2),X=+Y
"RTN","FHASM7",125,0)
 .D FILE^DICN I Y=-1 Q
"RTN","FHASM7",126,0)
 .K DIE S DA(2)=FHDFN,DA(1)=ASN,DA=+Y
"RTN","FHASM7",127,0)
 .S FH1=$P(FHDITFPR(FHTUN),U,2),FH2=$P(FHDITFPR(FHTUN),U,3)
"RTN","FHASM7",128,0)
 .S DIE="^FHPT("_DA(2)_",""N"","_DA(1)_",""TF"","
"RTN","FHASM7",129,0)
 .S DR="1////^S X=FH1;2////^S X=FH2" D ^DIE
"RTN","FHASM7",130,0)
 I FHFUDS,(FHFUDS'=FHFUD) K ^FHPT("E",FHFUDS,FHDFN,ASN)
"RTN","FHASM7",131,0)
 I FHFUD S DA(1)=FHDFN,DA=ASN,DIK="^FHPT(DA(1)"_",""N"",",DIK(1)="64^E" D IX^DIK
"RTN","FHASM7",132,0)
 G:'$D(LRTST) E7
"RTN","FHASM7",133,0)
 S N1=0 F K=0:0 S K=$O(LRTST(K)) Q:K=""  S ^FHPT(FHDFN,"N",ASN,"L",K,0)=LRTST(K),N1=N1+1
"RTN","FHASM7",134,0)
 I N1,'$D(^FHPT(FHDFN,"N",ASN,"L",0)) S ^(0)="^115.021^^"
"RTN","FHASM7",135,0)
E7 G:'$D(^TMP("FH",$J)) E8
"RTN","FHASM7",136,0)
 S ^FHPT(FHDFN,"N",ASN,"X",0)=^TMP("FH",$J,0)
"RTN","FHASM7",137,0)
 S N1=0 F K=0:0 S K=$O(^TMP("FH",$J,K)) Q:K'>0  S N1=N1+1,^FHPT(FHDFN,"N",ASN,"X",N1,0)=^TMP("FH",$J,K,0)
"RTN","FHASM7",138,0)
E8 S DTE=ADT,S1=1,S2="I",S3=$S('RC:"",1:"Nutrition Status: "_$P(^FH(115.4,RC,0),"^",2))
"RTN","FHASM7",139,0)
 I $G(DFN) D FIL^FHASE3 I 'RC G E9
"RTN","FHASM7",140,0)
 I '$D(^FHPT(FHDFN,"S",0)) S ^(0)="^115.012D^^"
"RTN","FHASM7",141,0)
 K DIC,DD,DO S DIC="^FHPT(FHDFN,""S"",",DIC(0)="L",DLAYGO=115,DA(1)=FHDFN,X=ADT,DINUM=9999999-ADT D FILE^DICN S ASE=+Y
"RTN","FHASM7",142,0)
 I $G(DFN) D DID^FHDPA S $P(^FHPT(FHDFN,"S",ASE,0),"^",2,3)=RC_"^"_DUZ S:FHWRD $P(^(0),"^",6)=FHWRD
"RTN","FHASM7",143,0)
E9 ;D P0^FHASMR
"RTN","FHASM7",144,0)
E6 R !!,"Save as Work in Progress or Complete or Delete this assessment: W// ",X:DTIME G:'$T!(X["^") KILL^XUSCLEAN
"RTN","FHASM7",145,0)
 S:X="" X="W" D TR^FHASM1
"RTN","FHASM7",146,0)
 I ($E(X)'="W"),($E(X)'="C"),($E(X)'="D") W *7,!,"  Answer 'W' to file as Work in progress or 'C' to Complete and send to TIU or 'D' to Delete" G E6
"RTN","FHASM7",147,0)
 I $E(X)="D" S DA(1)=FHDFN,DIK="^FHPT(FHDFN,""N"",",DA=ASN D ^DIK W !!,"Deleted...",! G KILL^XUSCLEAN
"RTN","FHASM7",148,0)
 I $E(X)="W" S $P(^FHPT(FHDFN,"N",ASN,"DI"),U,6)="W" W !!,"This Assessment has been saved as Work in Progress...",!
"RTN","FHASM7",149,0)
 I $E(X)="C" D
"RTN","FHASM7",150,0)
 .;send assessment to TIU if pt has entry in #2.
"RTN","FHASM7",151,0)
 .I $G(DFN) D ^FHASMR2 K ^TMP($J) I $G(FHOUT) D  Q
"RTN","FHASM7",152,0)
 ..W !!,"TIU Progress Note was NOT created!!"
"RTN","FHASM7",153,0)
 ..S $P(^FHPT(FHDFN,"N",ASN,"DI"),U,6)="W"
"RTN","FHASM7",154,0)
 .S $P(^FHPT(FHDFN,"N",ASN,"DI"),U,6)="C"
"RTN","FHASM7",155,0)
 .W !!,"Assessment is completed" W:$G(DFN) " and forwarded to TIU" W "...",!
"RTN","FHASM7",156,0)
KIL G KILL^XUSCLEAN
"RTN","FHASMR")
0^16^B4709674
"RTN","FHASMR",1,0)
FHASMR ; HISC/REL/NCA - Assessment Report ;4/25/93  18:46
"RTN","FHASMR",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASMR",3,0)
 S FHALL=1 D ^FHOMDPA G:'FHDFN KIL
"RTN","FHASMR",4,0)
 I '$D(^FHPT(FHDFN,"N",0)) W !!,"No Nutrition Assessments on file" G KIL
"RTN","FHASMR",5,0)
 ;K DIC S DIC="^FHPT(FHDFN,""N"",",DIC(0)="Q",DA=FHDFN,X="??" D ^DIC
"RTN","FHASMR",6,0)
 W ! F FHNIEN=0:0 S FHNIEN=$O(^FHPT(FHDFN,"N","B",FHNIEN)) Q:FHNIEN'>0  D
"RTN","FHASMR",7,0)
 .S FHNRV=$O(^FHPT(FHDFN,"N","B",FHNIEN,"")) Q:FHNRV'>0
"RTN","FHASMR",8,0)
 .S Y=$P($G(^FHPT(FHDFN,"N",FHNRV,0)),U,1) D DD^%DT W !?3,Y
"RTN","FHASMR",9,0)
 .S FHNASS=$P($G(^FHPT(FHDFN,"N",FHNRV,"DI")),U,6)
"RTN","FHASMR",10,0)
 .W ?25,$S(FHNASS="C":"Completed",FHNASS="S":"Signed",FHNASS="W":"Work in Progress",1:"")
"RTN","FHASMR",11,0)
A0 S DIC="^FHPT(FHDFN,""N"",",DIC(0)="AEQM",DIC("A")="SELECT Assessment Date: " W ! D ^DIC G KIL:"^"[X!$D(DTOUT),A0:Y<1 S ASN=+Y
"RTN","FHASMR",12,0)
P0 ; Select Device
"RTN","FHASMR",13,0)
 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHASMR",14,0)
 I $D(IO("Q")) S FHPGM="Q1^FHASMR",FHLST="FHDFN^DFN^PID^ASN" D EN2^FH G KIL
"RTN","FHASMR",15,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHASMR",16,0)
Q1 ; Process Printing Assessment
"RTN","FHASMR",17,0)
 D PATNAME^FHOMUTL
"RTN","FHASMR",18,0)
 S NAM=FHPTNM
"RTN","FHASMR",19,0)
 S %DT="XT",X="NOW" D ^%DT S DT=Y\1,DTP=+Y D DTP^FH S NOW=DTP
"RTN","FHASMR",20,0)
 ;S NAM=$P(^DPT(DFN,0),"^",1)
"RTN","FHASMR",21,0)
 S FHAP=$G(^FH(119.9,1,3)),FHU=$P(FHAP,"^",1)
"RTN","FHASMR",22,0)
 S Y=^FHPT(FHDFN,"N",ASN,0)
"RTN","FHASMR",23,0)
 F K=1:1:22 S @$P("ADT SEX AGE HGT HGP WGT WGP DWGT UWGT RIBW FRM AMP X X X KCAL PRO FLD RC XD BMI BMIP"," ",K)=$P(Y,"^",K)
"RTN","FHASMR",24,0)
 S NB=$P(Y,"^",25)
"RTN","FHASMR",25,0)
 S EXT="" I $D(^FHPT(FHDFN,"N",ASN,1)) S Y=^(1) F K=1:1:10 S @$P("TSF TSFP SCA SCAP ACIR ACIRP CCIR CCIRP BFAMA BFAMAP"," ",K)=$P(Y,"^",K)
"RTN","FHASMR",26,0)
 S APP=$G(^FHPT(FHDFN,"N",ASN,2))
"RTN","FHASMR",27,0)
 K LRTST F K=0:0 S K=$O(^FHPT(FHDFN,"N",ASN,"L",K)) Q:K<1  S LRTST(K)=^(K,0)
"RTN","FHASMR",28,0)
 S PRT=1 G ^FHASMR1
"RTN","FHASMR",29,0)
KIL ; Final variable kill
"RTN","FHASMR",30,0)
 ;quit if calls from enter/edit assessment
"RTN","FHASMR",31,0)
 Q:$D(FHASK)
"RTN","FHASMR",32,0)
 G KILL^XUSCLEAN
"RTN","FHASMR1")
0^17^B40014572
"RTN","FHASMR1",1,0)
FHASMR1 ; HISC/REL/NCA/JH - Assessment Report (cont) ;5/17/96  12:48
"RTN","FHASMR1",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASMR1",3,0)
EN ; Print Report
"RTN","FHASMR1",4,0)
 D NOW^%DTC S NOW=% K % S ANS=""
"RTN","FHASMR1",5,0)
 I '$G(ASN),$G(FHCAS) S ASN=FHCAS
"RTN","FHASMR1",6,0)
 S LN="",$P(LN,"-",80)="",PG=0,S1=$S(IOST?1"C".E:IOSL-2,1:IOSL-6) D HEAD
"RTN","FHASMR1",7,0)
 W !!,NAM,?40,$S(SEX="M":"Male",1:"Female"),?60,"Age ",AGE
"RTN","FHASMR1",8,0)
 S DTP=ADT D DTP^FH W !?25,"Date of Assessment: ",$E(DTP,1,9)
"RTN","FHASMR1",9,0)
 S (FHRDIPLD,FHRDIST,FHRDIPL,FHRDINFD,FHRDINA,FHRDINFD,FHRDINF,FHREDU,FHRDIDI,FHRDITF,FHRDITFD,FHRDITFM,FHRDITFK,FHRDITFC,FHRNWGT,FHRDNWGT,FHRFUD,FHRFEC,FHRFPC,FHRFDC)="" D DIA
"RTN","FHASMR1",10,0)
EN1 S DTP="" I FHRDIPLD S DTP=FHRDIPLD D DTP^FH
"RTN","FHASMR1",11,0)
 I $G(FH7FLG)=1 G FLG7
"RTN","FHASMR1",12,0)
 W !,"Diagnosis: ",$E(FHRDIPL,1,30)
"RTN","FHASMR1",13,0)
 S DTP="" I FHRDINFD S DTP=FHRDINFD D DTP^FH
"RTN","FHASMR1",14,0)
 W !,"Problem: ",$E(FHRDINA,1,30)
"RTN","FHASMR1",15,0)
 S DTP="" I FHRDINFD S DTP=FHRDINFD D DTP^FH
"RTN","FHASMR1",16,0)
 W !,"Additional Problem: ",$E(FHRDINF,1,30)
"RTN","FHASMR1",17,0)
 W !!,"Current Diet: ",$E(FHRDIDI,1,33)
"RTN","FHASMR1",18,0)
 I FHRDITFD'="" D
"RTN","FHASMR1",19,0)
 .W !,"Tubefeed Ordered: " S DTP=FHRDITFD D DTP^FH W DTP
"RTN","FHASMR1",20,0)
 .I ASN I $D(^FHPT(FHDFN,"N",ASN,"TF")) F FHTUN=0:0 S FHTUN=$O(^FHPT(FHDFN,"N",ASN,"TF",FHTUN)) Q:FHTUN'>0  D
"RTN","FHASMR1",21,0)
 ..S FHASTFZN=$G(^FHPT(FHDFN,"N",ASN,"TF",FHTUN,0))
"RTN","FHASMR1",22,0)
 ..S TNM=$P(FHASTFZN,U,1),STR=$P(FHASTFZN,U,2),QUA=$P(FHASTFZN,U,3)
"RTN","FHASMR1",23,0)
 ..W !?3,$P($G(^FH(118.2,TNM,0)),"^",1),", ",$S(STR=4:"Full",STR=1:"1/4",STR=2:"1/2",1:"3/4")," Str., ",QUA Q
"RTN","FHASMR1",24,0)
 .W !,"Total Quantity: ",FHRDITFM," ml",?42,"Total KCAL: ",FHRDITFK
"RTN","FHASMR1",25,0)
 .W !,"Tubefeed Comment: ",FHRDITFC
"RTN","FHASMR1",26,0)
 K FHASTFZN,FHRDIPL,FHRDIPLD,FHRDINF,FHRDINFD,FHRDIDI,FHRDITF,DTP,FHRDITFD,FHRDITFM,FHRDITFK,FHRDITFC
"RTN","FHASMR1",27,0)
FLG7 S X1=$S(HGT\12:HGT\12_"'",1:"")_$S(HGT#12:" "_(HGT#12)_"""",1:""),X2=+$J(HGT*2.54,0,0)_" cm"
"RTN","FHASMR1",28,0)
 W !!,"Height:        ",$S(FHU'="M":X1,1:X2)," (",$S(FHU'="M":X2,1:X1),")" W:HGP'="" " ",$S(HGP="K":"knee hgt",HGP="S":"stated",1:"")
"RTN","FHASMR1",29,0)
 S X1=WGT_" lbs",X2=+$J(WGT/2.2,0,1)_" kg"
"RTN","FHASMR1",30,0)
 W !,"Weight:        ",$S(FHU'="M":X1,1:X2)," (",$S(FHU'="M":X2,1:X1),")" W:WGP'="" " ",$S(WGP="A":"anthro",WGP="S":"stated",1:"")
"RTN","FHASMR1",31,0)
 S DTP="" I DWGT S DTP=DWGT D DTP^FH
"RTN","FHASMR1",32,0)
 W ?50,"Weight Taken:     ",DTP
"RTN","FHASMR1",33,0)
 S X1=FHRNWGT_" lbs",X2=+$J(FHRNWGT/2.2,0,1)_" kg"
"RTN","FHASMR1",34,0)
 ;W !,"New Weight:   ",$S(FHU'="M":X1,1:X2)," (",$S(FHU'="M":X2,1:X1),")" W:WGP'="" " ",$S(WGP="A":"anthro",WGP="S":"stated",1:"") S DTP=FHRDNWGT D DTP^FH W ?50,"New Weight Taken: ",DTP
"RTN","FHASMR1",35,0)
 K FHRNWGT,FHRDNWGT
"RTN","FHASMR1",36,0)
 I UWGT S X1=UWGT_" lbs",X2=+$J(UWGT/2.2,0,1)_" kg"
"RTN","FHASMR1",37,0)
 W !,"Usual Weight:  " W:UWGT $S(FHU'="M":X1,1:X2)," (",$S(FHU'="M":X2,1:X1),")" W ?50,"% Usual Wt:       " W:UWGT $J(WGT/UWGT*100,3,0),"%"
"RTN","FHASMR1",38,0)
 I '$D(IBW) S IBW=RIBW
"RTN","FHASMR1",39,0)
 S X1=IBW_" lbs",X2=+$J(IBW/2.2,0,1)_" kg"
"RTN","FHASMR1",40,0)
 W !,"Target Weight: ",$S(FHU'="M":X1,1:X2)," (",$S(FHU'="M":X2,1:X1),")" W ?50,"% Target Wt:      " W:IBW $J(WGT/IBW*100,3,0),"%"
"RTN","FHASMR1",41,0)
 I AMP W !?6,"Target weight adjusted for amputation"
"RTN","FHASMR1",42,0)
 W !,"Frame Size:    ",$S(FRM="S":"Small",FRM="M":"Medium",FRM="L":"Large",1:"")
"RTN","FHASMR1",43,0)
 W ?50,"Body Mass Index:  ",BMI
"RTN","FHASMR1",44,0)
 ;W:BMIP'="" " (",BMIP,"% )"
"RTN","FHASMR1",45,0)
 I $G(TSF)!$G(SCA)!$G(ACIR)!$G(CCIR) S EXT="Y"
"RTN","FHASMR1",46,0)
 D:$Y'<(S1-3) HF Q:ANS="^"  G:EXT'="Y" Q4 W !!?26,"Anthropometric Measurements",!?35,"%ile",?71,"%ile",!
"RTN","FHASMR1",47,0)
 W !?4,"Triceps Skinfold (mm)" I TSF W ?31,$J(+TSF,3,0),?36,$J(TSFP,3)
"RTN","FHASMR1",48,0)
 W ?43,"Arm Circumference (cm)" I ACIR W ?67,$J(+ACIR,3,0),?72,$J(ACIRP,3)
"RTN","FHASMR1",49,0)
 W !?4,"Subscapular Skinfold (mm)" I SCA W ?31,$J(+SCA,3,0),?36,$J(SCAP,3)
"RTN","FHASMR1",50,0)
 W ?43,"Bone-free AMA (cm2)" I BFAMA W ?67,$J(+BFAMA,3,0),?72,$J(BFAMAP,3)
"RTN","FHASMR1",51,0)
 W !?4,"Calf Circumference (cm)" I CCIR W ?31,$J(+CCIR,3,0),?36,$J(CCIRP,3)
"RTN","FHASMR1",52,0)
Q4 I $Y'<(S1-4) D HF Q:ANS="^"
"RTN","FHASMR1",53,0)
 W !!?32,"Laboratory Data",!?5,"Test",?30,"Result    units",?51,"Ref.   range",?67,"Date"
"RTN","FHASMR1",54,0)
 S N1=0 F K=0:0 S K=$O(LRTST(K)) Q:K=""  D LAB
"RTN","FHASMR1",55,0)
 I 'N1 W !!?3,"No laboratory data available last ",$S($D(^FH(119.9,1,3)):$P(^(3),"^",2),1:90)," days"
"RTN","FHASMR1",56,0)
 S N=PRO/6.25 I $Y'<(S1-4) D HF Q:ANS="^"
"RTN","FHASMR1",57,0)
DRU ;pharmacy data.
"RTN","FHASMR1",58,0)
 W !!?3,"Medications"
"RTN","FHASMR1",59,0)
 S PX=1 D DRUG^FHASM4
"RTN","FHASMR1",60,0)
 I $D(PSCA) D
"RTN","FHASMR1",61,0)
 .W !
"RTN","FHASMR1",62,0)
 .F FHI=0:0 S FHI=$O(PSCA(FHI)) Q:FHI'>0  S FHJ="" F  S FHJ=$O(PSCA(FHI,FHJ)) Q:FHJ=""  D
"RTN","FHASMR1",63,0)
 ..W !?3,FHJ
"RTN","FHASMR1",64,0)
 W !!,"Educated on Food/Drug Interactions: ",$S(FHREDU="Y":"Yes",1:"No") K FHREDU
"RTN","FHASMR1",65,0)
 W !,"FOOD/DRUG COMMENT: ",FHRFDC
"RTN","FHASMR1",66,0)
 K FHI,FHJ,PSD,PSCA,FHRFDC
"RTN","FHASMR1",67,0)
 I $D(FHFEC),(FHFEC'="") S FHRFEC=FHFEC
"RTN","FHASMR1",68,0)
 W !!,"Energy Requirements:  ",KCAL," Kcal/day" W:N ?50,"Kcal:N  ",$J(KCAL/N,0,0),":1" W:NB'="" ?67,"N-Bal: ",NB
"RTN","FHASMR1",69,0)
 W:FHRFEC'="" !?3,"Energy calculation is based on: ",FHRFEC
"RTN","FHASMR1",70,0)
 I $D(FHFPC),(FHFPC'="") S FHRFPC=FHFPC
"RTN","FHASMR1",71,0)
 W !,"Protein Requirements: ",PRO," gm/day" W:N ?50,"NPC:N   ",$J(KCAL-(PRO*4)/N,0,0),":1"
"RTN","FHASMR1",72,0)
 W:FHRFPC'="" !?3,"Protein calculation is based on: ",FHRFPC
"RTN","FHASMR1",73,0)
 K FHRFEC,FHRFPC
"RTN","FHASMR1",74,0)
 I FLD'="" W !,"Fluid Requirements:   ",FLD," ml/day"
"RTN","FHASMR1",75,0)
 G:'PRT Q6
"RTN","FHASMR1",76,0)
 D:$Y'<(S1-4) HF Q:ANS="^"  W:APP'="" !!,"Appearance: ",?20,APP
"RTN","FHASMR1",77,0)
 I XD W !,"Nutrition Class: " W ?20,$P($G(^FH(115.3,XD,0)),"^",1)
"RTN","FHASMR1",78,0)
 I RC W !,"Nutrition Status: " W ?20,$P($G(^FH(115.4,RC,0)),"^",2)
"RTN","FHASMR1",79,0)
 D DCOM
"RTN","FHASMR1",80,0)
 Q
"RTN","FHASMR1",81,0)
 ;D:$Y'<(S1-4) HF Q:ANS="^"  W !!,"Comments",!
"RTN","FHASMR1",82,0)
DIA ;patch #8: adding diagnosis, follow-up date and status data.
"RTN","FHASMR1",83,0)
 ;get data from DI node.
"RTN","FHASMR1",84,0)
 ;
"RTN","FHASMR1",85,0)
 I ASN S FHDIA=$G(^FHPT(FHDFN,"N",ASN,"DI")) Q:FHDIA=""  D
"RTN","FHASMR1",86,0)
 .S FHRDIPL=$P(FHDIA,U,1)
"RTN","FHASMR1",87,0)
 .S FHRDIPLD=$P(FHDIA,U,2)
"RTN","FHASMR1",88,0)
 .S FHRDINF=$P(FHDIA,U,3)
"RTN","FHASMR1",89,0)
 .S FHRDINFD=$P(FHDIA,U,4)
"RTN","FHASMR1",90,0)
 .S FHRFUD=$P(FHDIA,U,5)
"RTN","FHASMR1",91,0)
 .S FHRDIST=$P(FHDIA,U,6)
"RTN","FHASMR1",92,0)
 .S FHRDIDI=$P(FHDIA,U,7)
"RTN","FHASMR1",93,0)
 .S FHRDITFD=$P(FHDIA,U,8)
"RTN","FHASMR1",94,0)
 .S FHRDITFM=$P(FHDIA,U,10)
"RTN","FHASMR1",95,0)
 .S FHRDITFK=$P(FHDIA,U,11)
"RTN","FHASMR1",96,0)
 .S FHRDITFC=$P($G(^FHPT(FHDFN,"N",ASN,4)),U,1)
"RTN","FHASMR1",97,0)
 .S FHRFEC=$P($G(^FHPT(FHDFN,"N",ASN,3)),U,2)
"RTN","FHASMR1",98,0)
 .S FHRFPC=$P($G(^FHPT(FHDFN,"N",ASN,3)),U,3)
"RTN","FHASMR1",99,0)
 .S FHRDINA=$P($G(^FHPT(FHDFN,"N",ASN,3)),U,4)
"RTN","FHASMR1",100,0)
 .S FHREDU=$P($G(^FHPT(FHDFN,"N",ASN,3)),U,5)
"RTN","FHASMR1",101,0)
 .S FHRFDC=$P($G(^FHPT(FHDFN,"N",ASN,3)),U,6)
"RTN","FHASMR1",102,0)
 Q
"RTN","FHASMR1",103,0)
DCOM ;print follow up date and status and comments
"RTN","FHASMR1",104,0)
 S DTP="" I FHRFUD S DTP=FHRFUD D DTP^FH
"RTN","FHASMR1",105,0)
 W !!,"Follow-up Date: ",DTP
"RTN","FHASMR1",106,0)
 W ?40,"Assessment Status: ",$S(FHRDIST="C":"Completed",FHRDIST="S":"Signed",FHRDIST="W":"Work in Progress",1:"")
"RTN","FHASMR1",107,0)
 K FHRFUD,FHRDIST
"RTN","FHASMR1",108,0)
 W !!,"Comments:"
"RTN","FHASMR1",109,0)
 I ASN F K=0:0 S K=$O(^FHPT(FHDFN,"N",ASN,"X",K)) Q:K<1  D:$Y'<S1 HF Q:ANS="^"  W !,^FHPT(FHDFN,"N",ASN,"X",K,0)
"RTN","FHASMR1",110,0)
 S SIGN=$P(^FHPT(FHDFN,"N",ASN,0),U,23) W:SIGN'="" !!,"Entered by: ",$P($P(^VA(200,SIGN,0),U),",",2)," ",$P($P(^VA(200,SIGN,0),U),",")
"RTN","FHASMR1",111,0)
 G:$E(IOST)="C" Q6 F KK=1:1:IOSL-$Y-7 W !
"RTN","FHASMR1",112,0)
 S $P(UL,"-",39)="" W !?38,UL W !?38,"Signature",?68,"Date"
"RTN","FHASMR1",113,0)
Q6 D FOOT Q
"RTN","FHASMR1",114,0)
LAB S X1=$P(LRTST(K),"^",7) Q:X1=""  S DTP=X1\1 D DTP^FH S N1=N1+1
"RTN","FHASMR1",115,0)
 I $Y'<S1 D HF Q:ANS="^"
"RTN","FHASMR1",116,0)
 W !?5,$P(LRTST(K),"^",1),?27,$P(LRTST(K),"^",6),?40,$P(LRTST(K),"^",4),?51,$P(LRTST(K),"^",5),?65,DTP Q
"RTN","FHASMR1",117,0)
HF ; Do Header and Footer
"RTN","FHASMR1",118,0)
 D FOOT Q:ANS="^"  D HEAD
"RTN","FHASMR1",119,0)
 Q
"RTN","FHASMR1",120,0)
HEAD ; Page Header
"RTN","FHASMR1",121,0)
 I IOST?1"C".E W @IOF Q
"RTN","FHASMR1",122,0)
 W:PG @IOF S PG=PG+1,DTP=DT D DTP^FH
"RTN","FHASMR1",123,0)
 W !,LN,!,DTP,?29,"NUTRITION ASSESSMENT",?73,"Page ",PG,!,LN Q
"RTN","FHASMR1",124,0)
FOOT ; Page Footer
"RTN","FHASMR1",125,0)
 D PAUSE Q:IOST?1"C-".E
"RTN","FHASMR1",126,0)
 F KK=1:1:IOSL-$Y-5 W !
"RTN","FHASMR1",127,0)
 D SITE^FH W !,LN,!,NAM W ?(80-$L(SITE)\2),SITE,?67,"VAF 10-9034"
"RTN","FHASMR1",128,0)
 W ! W:PID'="" PID
"RTN","FHASMR1",129,0)
 I $G(DFN) S W1=$G(^DPT(DFN,.1)) S:$D(^DPT(DFN,.101)) W1=W1_"/"_^DPT(DFN,.101) W:W1'="" ?(80-$L(W1)\2),W1,?66,"(Vice SF 509)"
"RTN","FHASMR1",130,0)
 I 'DFN S W1="Outpatient Assesment" W ?(80-$L(W1)\2),W1,?66,"(Vice SF 509)"
"RTN","FHASMR1",131,0)
 W !,LN,! Q
"RTN","FHASMR1",132,0)
PAUSE ; Pause to Scroll
"RTN","FHASMR1",133,0)
 I IOST?1"C".E R !!,"Press RETURN to continue. ",YN:DTIME S:'$T!(YN["^") ANS="^" Q:ANS="^"  I "^"'[YN W !,"Enter a RETURN to Continue." G PAUSE
"RTN","FHASMR1",134,0)
 Q
"RTN","FHASMR2")
0^31^B66960757
"RTN","FHASMR2",1,0)
FHASMR2 ;HISC/RVD - Progress Notes To TIU ;04/27/07  06:59
"RTN","FHASMR2",2,0)
 ;;5.5;DIETETICS;**8**;Apr 27, 2007;Build 28
"RTN","FHASMR2",3,0)
 ;input var: fhdfn,na ien (var ASN),dfn
"RTN","FHASMR2",4,0)
 ;only process inpatient assessment.
"RTN","FHASMR2",5,0)
 ;uses DBIA #1911
"RTN","FHASMR2",6,0)
EN ; save note to a temp global
"RTN","FHASMR2",7,0)
 K ^TMP("TIUP",$J)
"RTN","FHASMR2",8,0)
 D NOW^%DTC S NOW=% K % S FHN=1
"RTN","FHASMR2",9,0)
 S ($P(LN5," ",5),$P(LN10," ",10),$P(LN20," ",20),$P(LN25," ",25),$P(LN30," ",30))=""
"RTN","FHASMR2",10,0)
 S ($P(LN35," ",35),$P(LN40," ",40),$P(LN45," ",45),$P(LN50," ",45),$P(LN55," ",55),$P(LN60," ",60))=""
"RTN","FHASMR2",11,0)
 S ($P(LN65," ",65))=""
"RTN","FHASMR2",12,0)
 S ^TMP("TIUP",$J,FHN,0)=NAM_LN10_$S(SEX="M":"Male",1:"Female")_LN10_"Age: "_AGE
"RTN","FHASMR2",13,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",14,0)
 S DTP=ADT D DTP^FH S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN25_"Date of Assessment: "_$E(DTP,1,9)
"RTN","FHASMR2",15,0)
 S (FHRDIPLD,FHRDIST,FHRDIPL,FHRDINFD,FHRDINA,FHRDINFD,FHRDINF,FHREDU,FHRDIDI,FHRDITF,FHRDITFM,FHRDITFK,FHRDITFC,FHRNWGT,FHRDNWGT,FHRFUD,FHRFEC,FHRFPC,FHRFDC)="" D DIA
"RTN","FHASMR2",16,0)
EN1 S DTP="" I FHRDIPLD S DTP=FHRDIPLD D DTP^FH
"RTN","FHASMR2",17,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Diagnosis: "_$E(FHRDIPL,1,30)
"RTN","FHASMR2",18,0)
 S DTP="" I FHRDINFD S DTP=FHRDINFD D DTP^FH
"RTN","FHASMR2",19,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Problem: "_$E(FHRDINA,1,30)
"RTN","FHASMR2",20,0)
 S DTP="" I FHRDINFD S DTP=FHRDINFD D DTP^FH
"RTN","FHASMR2",21,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Additional Problem: "_$E(FHRDINF,1,30)
"RTN","FHASMR2",22,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",23,0)
 S FHN=FHN+1
"RTN","FHASMR2",24,0)
 S ^TMP("TIUP",$J,FHN,0)="Current Diet: "_$E(FHRDIDI,1,53)
"RTN","FHASMR2",25,0)
 I FHRDITF'="" D
"RTN","FHASMR2",26,0)
 .S DTP=FHRDITF D DTP^FH
"RTN","FHASMR2",27,0)
 .S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Tubefeed Ordered: "_DTP
"RTN","FHASMR2",28,0)
 .I ASN I $D(^FHPT(FHDFN,"N",ASN,"TF")) F FHTUN=0:0 S FHTUN=$O(^FHPT(FHDFN,"N",ASN,"TF",FHTUN)) Q:FHTUN'>0  D
"RTN","FHASMR2",29,0)
 ..S FHASTFZN=$G(^FHPT(FHDFN,"N",ASN,"TF",FHTUN,0))
"RTN","FHASMR2",30,0)
 ..S TNM=$P(FHASTFZN,U,1),STR=$P(FHASTFZN,U,2),QUA=$P(FHASTFZN,U,3)
"RTN","FHASMR2",31,0)
 ..S FHTFPROD=$P($G(^FH(118.2,TNM,0)),"^",1)_", "_$S(STR=4:"Full",STR=1:"1/4",STR=2:"1/2",1:"3/4")_" Str., "_QUA
"RTN","FHASMR2",32,0)
 ..S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="  "_FHTFPROD
"RTN","FHASMR2",33,0)
 .S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Total Quantity: "_FHRDITFM_"ml"_LN5_"Total KCAL: "_FHRDITFK
"RTN","FHASMR2",34,0)
 .S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Tubefeed Comment: "_FHRDITFC
"RTN","FHASMR2",35,0)
 K FHRDIPL,FHRDIPLD,FHRDINF,FHRDINFD,FHRDIDI,FHTFPROD,FHRDITF,FHRDITFM,FHRDITFK,FHRDITFC,DTP
"RTN","FHASMR2",36,0)
 S X1=$S(HGT\12:HGT\12_"'",1:"")_$S(HGT#12:" "_(HGT#12)_"""",1:""),X2=+$J(HGT*2.54,0,0)_" cm"
"RTN","FHASMR2",37,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="",FHN=FHN+1
"RTN","FHASMR2",38,0)
 S ^TMP("TIUP",$J,FHN,0)="Height:        "_$S(FHU'="M":X1,1:X2)_" ("_$S(FHU'="M":X2,1:X1)_")" I HGP'="" S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_" "_$S(HGP="K":"knee hgt",HGP="S":"stated",1:"")
"RTN","FHASMR2",39,0)
 S X1=WGT_" lbs",X2=+$J(WGT/2.2,0,1)_" kg"
"RTN","FHASMR2",40,0)
 S FHN=FHN+1
"RTN","FHASMR2",41,0)
 S ^TMP("TIUP",$J,FHN,0)="Weight:        "_$S(FHU'="M":X1,1:X2)_" ("_$S(FHU'="M":X2,1:X1)_")" I WGP'="" S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_" "_$S(WGP="A":"anthro",WGP="S":"stated",1:"")
"RTN","FHASMR2",42,0)
 S DTP=DWGT D DTP^FH
"RTN","FHASMR2",43,0)
 S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_LN5_"  Weight Taken: "_DTP
"RTN","FHASMR2",44,0)
 S X1=FHRNWGT_" lbs",X2=+$J(FHRNWGT/2.2,0,1)_" kg"
"RTN","FHASMR2",45,0)
 K FHRNWGT,FHRDNWGT
"RTN","FHASMR2",46,0)
 I UWGT S X1=UWGT_" lbs",X2=+$J(UWGT/2.2,0,1)_" kg"
"RTN","FHASMR2",47,0)
 S FHN=FHN+1
"RTN","FHASMR2",48,0)
 S ^TMP("TIUP",$J,FHN,0)="Usual Weight:  "
"RTN","FHASMR2",49,0)
 I UWGT S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_$S(FHU'="M":X1,1:X2)_" ("_$S(FHU'="M":X2,1:X1)_")"
"RTN","FHASMR2",50,0)
 S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_LN5_"% Usual Wt: "
"RTN","FHASMR2",51,0)
 I UWGT S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_$J(WGT/UWGT*100,3,0)_"%"
"RTN","FHASMR2",52,0)
 S X1=IBW_" lbs",X2=+$J(IBW/2.2,0,1)_" kg"
"RTN","FHASMR2",53,0)
 S FHN=FHN+1
"RTN","FHASMR2",54,0)
 S ^TMP("TIUP",$J,FHN,0)="Target Weight: "_$S(FHU'="M":X1,1:X2)_" ("_$S(FHU'="M":X2,1:X1)_")    % Target Wt: "
"RTN","FHASMR2",55,0)
 I IBW S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_$J(WGT/IBW*100,3,0)_"%"
"RTN","FHASMR2",56,0)
 I AMP S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN5_"Target weight adjusted for amputation"
"RTN","FHASMR2",57,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Frame Size:    "_$S(FRM="S":"Small",FRM="M":"Medium",FRM="L":"Large",1:"")
"RTN","FHASMR2",58,0)
 S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_LN10_"       Body Mass Index:  "_BMI
"RTN","FHASMR2",59,0)
 S EXT="" I $G(TSF)!$G(SCA)!$G(ACIR)!$G(CCIR) S EXT="Y"
"RTN","FHASMR2",60,0)
 G:EXT'="Y" EN2  ;there is no antthropometric measurement.
"RTN","FHASMR2",61,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="",FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",62,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN25_"Anthropometric Measurements"
"RTN","FHASMR2",63,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN35_"%ile                              %ile"
"RTN","FHASMR2",64,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN5_"Triceps Skinfold (mm)     "_$J(+TSF,3,0)_" "_$J(TSFP,3)_LN5_"Arm Circumference (cm) "
"RTN","FHASMR2",65,0)
 S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_$J(+ACIR,3,0)_" "_$J(ACIRP,3)
"RTN","FHASMR2",66,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN5_"Subscapular Skinfold (mm) "
"RTN","FHASMR2",67,0)
 S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_$J(+SCA,3,0)_" "_$J(SCAP,3)_"    Bone-free AMA (cm2)    "
"RTN","FHASMR2",68,0)
 S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_$J(+BFAMA,3,0)_" "_$J(BFAMAP,3)
"RTN","FHASMR2",69,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN5_"Calf Circumference (cm)   "
"RTN","FHASMR2",70,0)
 S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_$J(+CCIR,3,0)_" "_$J(CCIRP,3)
"RTN","FHASMR2",71,0)
EN2 ;skip here if there is no anthropometric measurement. 
"RTN","FHASMR2",72,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",73,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN30_"Laboratory Data"
"RTN","FHASMR2",74,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN5_"Test"_LN20_"Result    units"_LN10_"Ref.   range"_LN10_"Date"
"RTN","FHASMR2",75,0)
 S N1=0 F K=0:0 S K=$O(LRTST(K)) Q:K=""  D LAB
"RTN","FHASMR2",76,0)
 I 'N1 D
"RTN","FHASMR2",77,0)
 .S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",78,0)
 .S FHN=FHN+1,^TMP("TIYP",$J,FHN,0)=LN5_"No laboratory data available last "_$S($D(^FH(119.9,1,3)):$P(^(3),"^",2),1:90)_" days"
"RTN","FHASMR2",79,0)
 S N=PRO/6.25
"RTN","FHASMR2",80,0)
DRU ;pharmacy data.
"RTN","FHASMR2",81,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",82,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",83,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN5_"Medications"
"RTN","FHASMR2",84,0)
 S PX=1 D DRUG^FHASM4
"RTN","FHASMR2",85,0)
 I $D(PSCA) D
"RTN","FHASMR2",86,0)
 .F FHI=0:0 S FHI=$O(PSCA(FHI)) Q:FHI'>0  S FHJ="" F  S FHJ=$O(PSCA(FHI,FHJ)) Q:FHJ=""  D
"RTN","FHASMR2",87,0)
 ..S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",88,0)
 ..S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN5_FHJ
"RTN","FHASMR2",89,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",90,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Educated on Food/Drug Interactions: "_$S(FHREDU="Y":"Yes",1:"No") K FHREDU
"RTN","FHASMR2",91,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="FOOD/DRUG COMMENT: "_FHRFDC
"RTN","FHASMR2",92,0)
 K FHI,FHJ,PSD,PSCA
"RTN","FHASMR2",93,0)
 ;
"RTN","FHASMR2",94,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",95,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Energy Requirements:  "_KCAL_" Kcal/day"
"RTN","FHASMR2",96,0)
 I N S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_"       Kcal:N  "_$J(KCAL/N,0,0)_":1"
"RTN","FHASMR2",97,0)
 I NB'="" S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_"     N-Bal: "_NB
"RTN","FHASMR2",98,0)
 I FHRFEC'="" D
"RTN","FHASMR2",99,0)
 .S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN5_"Energy calculation is based on: "_FHRFEC
"RTN","FHASMR2",100,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Protein Requirements: "_PRO_" gm/day"
"RTN","FHASMR2",101,0)
 I N S ^TMP("TIUP",$J,FHN,0)=^TMP("TIUP",$J,FHN,0)_"           NPC:N   "_$J(KCAL-(PRO*4)/N,0,0)_":1"
"RTN","FHASMR2",102,0)
 I FHRFPC'="" D
"RTN","FHASMR2",103,0)
 .S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN5_"Protein calculation is based on: "_FHRFPC
"RTN","FHASMR2",104,0)
 K FHRFEC,FHRFPC
"RTN","FHASMR2",105,0)
 I FLD'="" D
"RTN","FHASMR2",106,0)
 .S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Fluid Requirements:   "_FLD_" ml/day"
"RTN","FHASMR2",107,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",108,0)
 I FHAPP'="" D
"RTN","FHASMR2",109,0)
 .S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Appearance:       "_FHAPP
"RTN","FHASMR2",110,0)
 I XD D
"RTN","FHASMR2",111,0)
 .S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Nutrition Class:  "_$P($G(^FH(115.3,XD,0)),"^",1)
"RTN","FHASMR2",112,0)
 I RC D
"RTN","FHASMR2",113,0)
 .S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Nutrition Status: "_$P($G(^FH(115.4,RC,0)),"^",2)
"RTN","FHASMR2",114,0)
 D DCOM
"RTN","FHASMR2",115,0)
 Q
"RTN","FHASMR2",116,0)
DIA ;get data from DI node.
"RTN","FHASMR2",117,0)
 I ASN S FHDIA=$G(^FHPT(FHDFN,"N",ASN,"DI")) Q:FHDIA=""  D
"RTN","FHASMR2",118,0)
 .S FHRDIPL=$P(FHDIA,U,1)
"RTN","FHASMR2",119,0)
 .S FHRDIPLD=$P(FHDIA,U,2)
"RTN","FHASMR2",120,0)
 .S FHRDINF=$P(FHDIA,U,3)
"RTN","FHASMR2",121,0)
 .S FHRDINFD=$P(FHDIA,U,4)
"RTN","FHASMR2",122,0)
 .S FHRFUD=$P(FHDIA,U,5)
"RTN","FHASMR2",123,0)
 .S FHRDIST=$P(FHDIA,U,6)
"RTN","FHASMR2",124,0)
 .S FHRDIDI=$P(FHDIA,U,7)
"RTN","FHASMR2",125,0)
 .S FHRDITF=$P(FHDIA,U,8)
"RTN","FHASMR2",126,0)
 .S FHRDITFM=$P(FHDIA,U,10)
"RTN","FHASMR2",127,0)
 .S FHRDITFK=$P(FHDIA,U,11)
"RTN","FHASMR2",128,0)
 .S FHRDITFC=$P($G(^FHPT(FHDFN,"N",ASN,4)),U,1)
"RTN","FHASMR2",129,0)
 .S FHRFEC=$P($G(^FHPT(FHDFN,"N",ASN,3)),U,2)
"RTN","FHASMR2",130,0)
 .S FHRFPC=$P($G(^FHPT(FHDFN,"N",ASN,3)),U,3)
"RTN","FHASMR2",131,0)
 .S FHRDINA=$P($G(^FHPT(FHDFN,"N",ASN,3)),U,4)
"RTN","FHASMR2",132,0)
 .S FHREDU=$P($G(^FHPT(FHDFN,"N",ASN,3)),U,5)
"RTN","FHASMR2",133,0)
 .S FHRFDC=$P($G(^FHPT(FHDFN,"N",ASN,3)),U,6)
"RTN","FHASMR2",134,0)
 Q
"RTN","FHASMR2",135,0)
DCOM ;print follow up date and status and comments
"RTN","FHASMR2",136,0)
 S DTP="" I FHRFUD S DTP=FHRFUD D DTP^FH
"RTN","FHASMR2",137,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",138,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Follow-up Date: "_DTP
"RTN","FHASMR2",139,0)
 K FHRFUD,FHRDIST
"RTN","FHASMR2",140,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",141,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="Comments:"
"RTN","FHASMR2",142,0)
 I ASN F K=0:0 S K=$O(^FHPT(FHDFN,"N",ASN,"X",K)) Q:K<1  D
"RTN","FHASMR2",143,0)
 .S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=^FHPT(FHDFN,"N",ASN,"X",K,0)
"RTN","FHASMR2",144,0)
 S SIGN=$P(^FHPT(FHDFN,"N",ASN,0),U,23)
"RTN","FHASMR2",145,0)
 S FHRDT=DT,FHIFN="",FHESBY=FHCLI
"RTN","FHASMR2",146,0)
 ;Use data from user selection from file 8925.1
"RTN","FHASMR2",147,0)
 K DIC,DA W !!,"Enter a Progress Note Title for this Assessment!!",!
"RTN","FHASMR2",148,0)
 S DIC=8925.1,DIC(0)="AEQMZ",DIC("S")="I ($P($G(^TIU(8925.1,+Y,0)),U,7)'=13),($P(^(0),U,1)[""NUTRITION""),($P(^(0),U,4)=""DOC"")" D ^DIC
"RTN","FHASMR2",149,0)
 K DIC I X["^"!$D(DTOUT)!(Y<1) S FHOUT=1 Q
"RTN","FHASMR2",150,0)
 S FHIEN1=+Y
"RTN","FHASMR2",151,0)
 ;call TIU to create a progress notes; DBIA #1911
"RTN","FHASMR2",152,0)
 ;D NEW^TIUPNAPI(.FHIFN,DFN,DUZ,FHRDT,FHIEN1,"","","",FHESBY,"","")
"RTN","FHASMR2",153,0)
 D NEW^TIUPNAPI(.FHIFN,DFN,DUZ,FHRDT,FHIEN1,"","","","","","")
"RTN","FHASMR2",154,0)
 I $P(FHIFN,U,1)'>0 S FHOUT=1
"RTN","FHASMR2",155,0)
 K FHIFN,FHRDT,FHTITLE,FHESBY,FHTIUST,FH251,FHIEN1
"RTN","FHASMR2",156,0)
 ;done
"RTN","FHASMR2",157,0)
 Q
"RTN","FHASMR2",158,0)
Q6 D FOOT Q
"RTN","FHASMR2",159,0)
LAB S X1=$P(LRTST(K),"^",7) Q:X1=""  S DTP=X1\1 D DTP^FH
"RTN","FHASMR2",160,0)
 I 'N1 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)="" S N1=N1+1
"RTN","FHASMR2",161,0)
 S FHLABTE=$P(LRTST(K),U,1)_"                    "
"RTN","FHASMR2",162,0)
 S FHLABRE=$P(LRTST(K),U,6)_"                    "
"RTN","FHASMR2",163,0)
 S FHLABUN=$P(LRTST(K),U,4)_"                    "
"RTN","FHASMR2",164,0)
 S FHLABRR=$P(LRTST(K),U,5)_"                    "
"RTN","FHASMR2",165,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=$E(FHLABTE,1,20)_" "_$E(FHLABRE,1,9)_" "_$E(FHLABUN,1,14)_" "_$E(FHLABRR,1,21)_" "_DTP
"RTN","FHASMR2",166,0)
 Q
"RTN","FHASMR2",167,0)
HEAD ; Page Header
"RTN","FHASMR2",168,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN
"RTN","FHASMR2",169,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=DTP_LN30_"NUTRITION ASSESSMENT"
"RTN","FHASMR2",170,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN
"RTN","FHASMR2",171,0)
 Q
"RTN","FHASMR2",172,0)
FOOT ; Page Footer
"RTN","FHASMR2",173,0)
 D SITE^FH
"RTN","FHASMR2",174,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",175,0)
 I $G(DFN) S W1=$G(^DPT(DFN,.1)) S:$D(^DPT(DFN,.101)) W1=W1_"/"_^DPT(DFN,.101) I W1'="" D
"RTN","FHASMR2",176,0)
 .S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",177,0)
 .S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN30_W1_LN5_"(Vice SF 509)"
"RTN","FHASMR2",178,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",179,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=LN
"RTN","FHASMR2",180,0)
 S FHN=FHN+1,^TMP("TIUP",$J,FHN,0)=""
"RTN","FHASMR2",181,0)
 Q
"RTN","FHASP")
0^28^B22615206
"RTN","FHASP",1,0)
FHASP ; HISC/REL - Nutrition Profile ;11/16/94  16:55
"RTN","FHASP",2,0)
 ;;5.5;DIETETICS;**5,8**;Jan 28, 2005;Build 28
"RTN","FHASP",3,0)
 ;RVD patch #8 - added drug screening and print order of a drug based on the site parameter.
"RTN","FHASP",4,0)
 ;               replaced Ideal to Target and added BMI.
"RTN","FHASP",5,0)
P0 S ALL=1 D ^FHDPA G:'DFN KIL S:WARD="" ADM=""
"RTN","FHASP",6,0)
 ;ask user for how far to print encounter, 1 yr back as default.
"RTN","FHASP",7,0)
 W ! S %DT="AEP",%DT("A")="Print Dietetics Encounter since Date: "
"RTN","FHASP",8,0)
 S %DT("B")="T-365",%DT(0)="-T" D ^%DT K %DT Q:X["^"!$D(DTOUT)
"RTN","FHASP",9,0)
 S FHET=Y
"RTN","FHASP",10,0)
 D MONUM^FHOMUTL I FHNUM="" Q
"RTN","FHASP",11,0)
 ;
"RTN","FHASP",12,0)
L0 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHASP",13,0)
 I $D(IO("Q")) S FHPGM="Q0^FHASP",FHLST="FHDFN^DFN^PID^ADM^WARD^FHNUM" D EN2^FH D KILL^XUSCLEAN G P0
"RTN","FHASP",14,0)
 U IO D Q0 D ^%ZISC K %ZIS,IOP G FHASP
"RTN","FHASP",15,0)
Q0 ; Print Profile
"RTN","FHASP",16,0)
 D NOW^%DTC S NOW=%,DT=NOW\1 S FHU=$S($D(^FH(119.9,1,3)):$P(^(3),"^",1),1:"E")
"RTN","FHASP",17,0)
 S Y=^DPT(DFN,0),NAM=$P(Y,"^",1),SEX=$P(Y,"^",2),DOB=$P(Y,"^",3)
"RTN","FHASP",18,0)
 S AGE="" I DOB'="" S AGE=$E(NOW,1,3)-$E(DOB,1,3)-($E(NOW,4,7)<$E(DOB,4,7))
"RTN","FHASP",19,0)
 S LN="",$P(LN,"-",80)="",ANS="",PG=0,S1=$S(IOST?1"C".E:IOSL-2,1:IOSL-7) D HEAD
"RTN","FHASP",20,0)
 W !!,"Status: " I WARD="" W "Outpatient"
"RTN","FHASP",21,0)
 E  S DTP=$P(^DGPM(ADM,0),"^",1) D DTP^FH W "Inpatient admitted ",DTP D ^FHASP2
"RTN","FHASP",22,0)
 S RC="",ASE=$O(^FHPT(FHDFN,"S",0)) I ASE S Y=^(ASE,0),RC=$P(Y,"^",2),DTP=$P(Y,"^",1)
"RTN","FHASP",23,0)
 ;get problem and additional problem for the last assessment on file.
"RTN","FHASP",24,0)
 S (FHADPROB,FHPROB)=""
"RTN","FHASP",25,0)
 S ASN=$O(^FHPT(FHDFN,"N",0)) I ASN D
"RTN","FHASP",26,0)
 .S (FHADPROB,FHPROB)=""
"RTN","FHASP",27,0)
 .I $D(^FHPT(FHDFN,"N",ASN,3)) S FHPROB=$P(^(3),U,4)
"RTN","FHASP",28,0)
 .I $D(^FHPT(FHDFN,"N",ASN,"DI")) S FHADPROB=$P(^("DI"),U,3)
"RTN","FHASP",29,0)
 W !!,"Problem: ",FHPROB,!,"Additional Problem: ",FHADPROB
"RTN","FHASP",30,0)
 W !!,"Nutrition Status: " I RC W ?20,$P($G(^FH(115.4,RC,0)),"^",2) D DTP^FH W "  (",$E(DTP,1,9),")"
"RTN","FHASP",31,0)
 D ALG^FHCLN W !!,"Allergies: " S ALG=$S(ALG="":"None on file",1:ALG) D LNE^FHDMP
"RTN","FHASP",32,0)
 W !!?29,"Nutrition Assessments"
"RTN","FHASP",33,0)
 I ASN'>0 W !!?5,"No assessments on file." G Q1
"RTN","FHASP",34,0)
 W !!,"Recent Assessments:"
"RTN","FHASP",35,0)
 S N1=0 F K=0:0 S K=$O(^FHPT(FHDFN,"N",K)) Q:K<1  S DTP=$P(^(K,0),"^",1) D DTP^FH W "  ",$E(DTP,1,9) S N1=N1+1 Q:N1=3
"RTN","FHASP",36,0)
 S Y=^FHPT(FHDFN,"N",ASN,0)
"RTN","FHASP",37,0)
 S N1=0 F K=1,4:1:11,21 S N1=N1+1,@$P("ADT HGT HGP WGT WGP DWGT UWGT IBW XD BMI"," ",N1)=$P(Y,"^",K)
"RTN","FHASP",38,0)
 S X1=$S(HGT\12:HGT\12_"'",1:"")_$S(HGT#12:" "_(HGT#12)_"""",1:""),X2=+$J(HGT*2.54,0,0)_" cm"
"RTN","FHASP",39,0)
 ;
"RTN","FHASP",40,0)
 S (FHHT,FHWWT,FHX1,FHX2,FHDVT)=""
"RTN","FHASP",41,0)
 I DFN S GMRVSTR="WT" D EN6^GMRVUTL S FHDVT=$P(X,"^",1),FHWWT=$P(X,"^",8),GMRVSTR="HT" D EN6^GMRVUTL S FHHT=$P(X,"^",8)
"RTN","FHASP",42,0)
 S:'FHDVT FHDVT=$P(X,"^",1)
"RTN","FHASP",43,0)
 I FHHT'="" S FHX1=$S(FHHT\12:FHHT\12_"'",1:"")_$S(FHHT#12:" "_(FHHT#12)_"""",1:""),FHX2=+$J(FHHT*2.54,0,0)_" cm"
"RTN","FHASP",44,0)
 W !!,"Vitals Height: " W:FHX2'="" FHX2 W:FHX1'="" " (",FHX1,")"
"RTN","FHASP",45,0)
 K FHX2,FHX1
"RTN","FHASP",46,0)
 S (FHX1,FHX2)=""
"RTN","FHASP",47,0)
 I FHWWT'="" S FHX1=FHWWT_" lbs",FHX2=+$J(FHWWT/2.2,0,1)_" kg"
"RTN","FHASP",48,0)
 W ?40,"Vitals Wt: " W:FHWWT'="" FHX2," (",FHX1,")"
"RTN","FHASP",49,0)
 I WGT S X1=WGT_" lbs",X2=+$J(WGT/2.2,0,1)_" kg"
"RTN","FHASP",50,0)
 W !,"Last Wt: " W:WGT X2," (",X1,")"
"RTN","FHASP",51,0)
 I UWGT S X1=UWGT_" lbs",X2=+$J(UWGT/2.2,0,1)_" kg"
"RTN","FHASP",52,0)
 W !,"Usual Wt: " W:UWGT X2," (",X1,")" W ?40,"Last Wt/Usual Wt: " W:UWGT $J(WGT/UWGT*100,3,0),"%"
"RTN","FHASP",53,0)
 S X1=IBW_" lbs",X2=+$J(IBW/2.2,0,1)_" kg"
"RTN","FHASP",54,0)
 W !,"Target Wt: " W:IBW X2," (",X1,")" W ?40,"Last Wt/TBW:      " W:IBW $J(WGT/IBW*100,3,0),"%"
"RTN","FHASP",55,0)
 S BMI=""
"RTN","FHASP",56,0)
 I FHWWT,FHHT S A2=FHHT*.0254,BMI=+$J(FHWWT/2.2/(A2*A2),0,1)
"RTN","FHASP",57,0)
 W !,"Body Mass Index: ",BMI
"RTN","FHASP",58,0)
 S DTP=FHDVT D:DTP'="" DTP^FH W ?40,"Date Taken:   ",DTP
"RTN","FHASP",59,0)
 I XD W !!?5,"Nutrition Class: " W ?20,$P($G(^FH(115.3,XD,0)),"^",1)
"RTN","FHASP",60,0)
Q1 S PX=0 D LAB^FHASM4 S PX=$S(WARD="":0,1:1) D DRUG^FHASM4
"RTN","FHASP",61,0)
 W !!?34,"Medications" S N1=0
"RTN","FHASP",62,0)
 F N2=0:0 S N2=$O(PSCNS(N2)) Q:N2=""  S FHCN3="" F  S FHCN3=$O(PSCNS(N2,FHCN3)) Q:FHCN3=""  D
"RTN","FHASP",63,0)
 .D:$Y'<S1 HF Q:ANS="^"  W:'N1 ! W !?5,FHCN3 S N1=N1+1
"RTN","FHASP",64,0)
 Q:ANS="^"
"RTN","FHASP",65,0)
 I 'N1 W !!?5,"No current medications in selected drug classes."
"RTN","FHASP",66,0)
 W !!?32,"Laboratory Data"
"RTN","FHASP",67,0)
 S N1=0 F K=0:0 S K=$O(LRTST(K)) Q:K=""  D:$Y'<S1 HF Q:ANS="^"  D LAB
"RTN","FHASP",68,0)
 Q:ANS="^"
"RTN","FHASP",69,0)
 I 'N1 W !!?5,"No selected laboratory data available last ",$S($D(^FH(119.9,1,3)):$P(^(3),"^",2),1:90)," days."
"RTN","FHASP",70,0)
 G ^FHASP1
"RTN","FHASP",71,0)
LAB S X1=$P(LRTST(K),"^",7) Q:X1=""  S DTP=X1\1 D DTP^FH
"RTN","FHASP",72,0)
 I 'N1 W !?5,"Test",?30,"Result    units",?51,"Ref.   range",?67,"Date",!
"RTN","FHASP",73,0)
 S N1=N1+1
"RTN","FHASP",74,0)
 W !?5,$P(LRTST(K),"^",1),?27,$P(LRTST(K),"^",6),?40,$P(LRTST(K),"^",4),?51,$P(LRTST(K),"^",5),?65,DTP Q
"RTN","FHASP",75,0)
HF ; Do Header and Footer
"RTN","FHASP",76,0)
 D FOOT Q:ANS="^"  D HEAD
"RTN","FHASP",77,0)
 Q
"RTN","FHASP",78,0)
HEAD ; Page Header
"RTN","FHASP",79,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1,DTP=DT D DTP^FH
"RTN","FHASP",80,0)
 W !,LN,!,DTP,?31,"NUTRITION PROFILE",?73,"Page ",PG,!,LN
"RTN","FHASP",81,0)
 W !,NAM,?40,$S(SEX="M":"Male",SEX="F":"Female",1:""),?73,"Age ",AGE,! Q
"RTN","FHASP",82,0)
FOOT ; Page Footer
"RTN","FHASP",83,0)
 D PAUSE Q:IOST?1"C".E
"RTN","FHASP",84,0)
 F KK=1:1:IOSL-$Y-6 W !
"RTN","FHASP",85,0)
 D SITE^FH W !,LN,!,NAM W ?(80-$L(SITE)\2),SITE,?67,"VAF 10-9034"
"RTN","FHASP",86,0)
 W ! W:PID'="" PID
"RTN","FHASP",87,0)
 S W1=$G(^DPT(DFN,.1)) S:$D(^DPT(DFN,.101)) W1=W1_"/"_^DPT(DFN,.101) W:W1'="" ?(80-$L(W1)\2),W1 W ?66,"(Vice SF 509)"
"RTN","FHASP",88,0)
 W !,LN,! Q
"RTN","FHASP",89,0)
PAUSE ; Pause For Scroll
"RTN","FHASP",90,0)
 I IOST?1"C".E R !!,"Press RETURN to continue. ",X:DTIME S:'$T!(X["^") ANS="^" Q:ANS="^"  I "^"'[X W !,"Enter a RETURN to Continue." G PAUSE
"RTN","FHASP",91,0)
 Q
"RTN","FHASP",92,0)
KIL ; Final variable kill
"RTN","FHASP",93,0)
 G KILL^XUSCLEAN
"RTN","FHASP1")
0^54^B16943415
"RTN","FHASP1",1,0)
FHASP1 ; HISC/REL/JH - Nutrition Profile (cont) ;5/2/01  10:14
"RTN","FHASP1",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASP1",3,0)
 ;
"RTN","FHASP1",4,0)
 I '$G(FHET) S X="T-365",%DT="XT" D ^%DT S FHET=Y K %DT
"RTN","FHASP1",5,0)
 S DTP=FHET D DTP^FH S FHENDATE=DTP
"RTN","FHASP1",6,0)
 S N1=0
"RTN","FHASP1",7,0)
 W !!?22,"Dietetic Encounters since ",FHENDATE
"RTN","FHASP1",8,0)
 F FHET=FHET:0 S FHET=$O(^FHEN("AP",DFN,FHET)) Q:FHET<1!(ANS="^")  F ASN=0:0 S ASN=$O(^FHEN("AP",DFN,FHET,ASN)) Q:ASN<1  D:$Y'<S1 HF^FHASP Q:ANS="^"  D LST
"RTN","FHASP1",9,0)
 Q:ANS="^"
"RTN","FHASP1",10,0)
 I 'N1 W !!?5,"No Encounters recorded since ",FHENDATE
"RTN","FHASP1",11,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHASP1",12,0)
 S FADM=$O(^FHPT(FHDFN,"A",""),-1) S FADM=$S($G(ADM):$G(ADM),FADM:FADM,1:"") G:FADM="" F1
"RTN","FHASP1",13,0)
 D:$Y'<(S1-6) HF^FHASP Q:ANS="^"  W !!?28,$S($G(ADM):"Current",1:"Last")," Admission Monitors" S N1=0
"RTN","FHASP1",14,0)
 ; F NDT=0:0 S NDT=$O(^FHPT(FHDFN,"A",FADM,"MO","AC",NDT)) Q:NDT<1  F K=0:0 S K=$O(^FHPT(FHDFN,"A",FADM,"MO","AC",NDT,K)) Q:K<1  D MO
"RTN","FHASP1",15,0)
 S FHTTLM="",FHTTLM=$P($G(^FHPT(FHDFN,"A",FADM,"MO",0)),U,3)
"RTN","FHASP1",16,0)
 I FHTTLM="" W !,"No Monitors on file." G F1
"RTN","FHASP1",17,0)
 S FHMONS=$S(FHTTLM-FHNUM<0:0,1:FHTTLM-FHNUM)
"RTN","FHASP1",18,0)
 F NDT=FHMONS:0 S NDT=$O(^FHPT(FHDFN,"A",FADM,"MO",NDT)) Q:NDT<1!(ANS="^")  S K=NDT D MO
"RTN","FHASP1",19,0)
 Q:ANS="^"  I 'N1 W !,"No Monitors on file."
"RTN","FHASP1",20,0)
F1 D:$Y'<(S1-6) HF^FHASP Q:ANS="^"  W !!?32,"Food Preferences" D DISP
"RTN","FHASP1",21,0)
 W !!?27,"Future Clinic Appointments" S N1=0
"RTN","FHASP1",22,0)
 ;
"RTN","FHASP1",23,0)
 ;patch #41
"RTN","FHASP1",24,0)
 ;F NDT=NOW:0 S NDT=$O(^DPT(DFN,"S",NDT)) Q:NDT'>0  S Z=^(NDT,0) I "I"[$P(Z,"^",2) D CLIN Q:ANS="^"
"RTN","FHASP1",25,0)
 K ^TMP($J)
"RTN","FHASP1",26,0)
 S FHCNT=""
"RTN","FHASP1",27,0)
 D GETAPPT^SDAMA201(DFN,"1;2;12","R",DT,,.FHCNT,"")
"RTN","FHASP1",28,0)
 G:'$D(^TMP($J,"SDAMA201","GETAPPT")) NOAPP
"RTN","FHASP1",29,0)
 I $D(^TMP($J,"SDAMA201","GETAPPT")) S FHTMP=$NA(^TMP($J,"SDAMA201","GETAPPT"))
"RTN","FHASP1",30,0)
 I $D(@FHTMP@("ERROR")) D PRERR
"RTN","FHASP1",31,0)
 I $G(FHCNT) F FHI=0:0 S FHI=$O(@FHTMP@(FHI)) Q:FHI'>0  D CLIN I ANS="^" K ^TMP($J) Q
"RTN","FHASP1",32,0)
 K ^TMP($J)
"RTN","FHASP1",33,0)
 ;end changes in patch #41
"RTN","FHASP1",34,0)
 Q:ANS="^"
"RTN","FHASP1",35,0)
NOAPP I 'N1 W !!?5,"No scheduled appointments."
"RTN","FHASP1",36,0)
 D FOOT^FHASP Q
"RTN","FHASP1",37,0)
LST S X0=$G(^FHEN(ASN,0)) Q:$P(X0,"^",4)<3
"RTN","FHASP1",38,0)
 S X1=$G(^FHEN(ASN,"P",DFN,0))
"RTN","FHASP1",39,0)
 W:'N1 ! S N1=N1+1,DTP=$P(X0,"^",2) D DTP^FH W !?5,$E(DTP,1,9),"  " S Y=$P(X0,"^",4),Y=$P($G(^FH(115.6,+Y,0)),"^",1) W Y I $P(X0,"^",7)="F" W " (FU)"
"RTN","FHASP1",40,0)
 S Y=$P(X0,"^",9) W ", ",$S(Y="G":"Group",1:"Individual")
"RTN","FHASP1",41,0)
 S Y=$P(X0,"^",11) W:Y'="" !?10,Y S Y=$P(X1,"^",4) W:Y'="" !?10,Y Q
"RTN","FHASP1",42,0)
 ;patch #41
"RTN","FHASP1",43,0)
CLIN ;S SC=+$P(Z,"^",1),Y=$P($G(^SC(SC,0)),"^",1) Q:Y=""
"RTN","FHASP1",44,0)
 S NDT=@FHTMP@(FHI,1)
"RTN","FHASP1",45,0)
 S SC=$P(@FHTMP@(FHI,2),U,1)
"RTN","FHASP1",46,0)
 S Y=$P(@FHTMP@(FHI,2),U,2) Q:Y=""
"RTN","FHASP1",47,0)
 D:$Y'<S1 HF^FHASP Q:ANS="^"  W:'N1 ! S N1=N1+1,DTP=NDT D DTP^FH W !?5,DTP,?25,Y Q
"RTN","FHASP1",48,0)
 ;D:$Y'<S1 HF^FHASP Q:ANS="^"  W:'N1 ! S N1=N1+1,DTP=NDT D DTP^FH W !?5,DTP,?25,Y W:$P(Z,"^",11) " (Collateral)" Q
"RTN","FHASP1",49,0)
 ;end changes in patch #41
"RTN","FHASP1",50,0)
DISP ; Display Food Preferences
"RTN","FHASP1",51,0)
 W !?26,"Likes",?58,"DisLikes",!
"RTN","FHASP1",52,0)
 K P S P1=1 F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0) D SP
"RTN","FHASP1",53,0)
 W ! S (M,MM)="" F  S M=$O(P(M)) Q:M=""  I $D(P(M)) W $P(M,"~",2) D  S MM=M
"RTN","FHASP1",54,0)
 .  S (P1,P2)=0 F  S:P1'="" P1=$O(P(M,"L",P1)) S X1=$S(P1>0:P(M,"L",P1),1:"") S:P2'="" P2=$O(P(M,"D",P2)) S X2=$S(P2>0:P(M,"D",P2),1:"") Q:P1=""&(P2="")  D P0 Q:ANS="^"  W:MM'=M !
"RTN","FHASP1",55,0)
 .  Q
"RTN","FHASP1",56,0)
 Q:ANS="^"
"RTN","FHASP1",57,0)
 I $O(P(""))="" W !,"No Food Preferences on file",!
"RTN","FHASP1",58,0)
 Q
"RTN","FHASP1",59,0)
P0 I X1'="" W ?12 S X=X1 D P1 S X1=X
"RTN","FHASP1",60,0)
 I X2'="" W ?46 S X=X2 D P1 S X2=X
"RTN","FHASP1",61,0)
 Q:X1=""&(X2="")  D:$Y'<S1 HF^FHASP Q:ANS="^"  W ! G P0
"RTN","FHASP1",62,0)
P1 I $L(X)<34 W X S X="" Q
"RTN","FHASP1",63,0)
 F KK=35:-1:1 Q:$E(X,KK-1,KK)=", "
"RTN","FHASP1",64,0)
 W $E(X,1,KK-2) S X=$E(X,KK+1,999) Q
"RTN","FHASP1",65,0)
SP Q:'$P(X,U)  S M1=$P(X,"^",2) S:M1="A" M1="BNE" S Z=$G(^FH(115.2,+X,0)) Q:$P(Z,U)=""!($P(Z,U,2)="")  S L1=$P(Z,"^",1),KK=$P(Z,"^",2),M="",DAS=$P(X,"^",4)
"RTN","FHASP1",66,0)
 I KK="L" S Q=$P(X,"^",3),L1=$S(Q:Q,1:1)_" "_L1
"RTN","FHASP1",67,0)
 I M1="BNE" S M="1~All Meals" G SP1
"RTN","FHASP1",68,0)
 S Z1=$E(M1,1) I Z1'="" S M=$S(Z1="B":"2~Break",Z1="N":"3~Noon",1:"4~Even")
"RTN","FHASP1",69,0)
 S Z1=$E(M1,2) I Z1'="" S M=M_","_$S(Z1="B":"Break",Z1="N":"Noon",1:"Even")
"RTN","FHASP1",70,0)
SP1 S:'$D(P(M,KK,P1)) P(M,KK,P1)="" I $L(P(M,KK,P1))+$L(L1)<255 S P(M,KK,P1)=P(M,KK,P1)_$S(P(M,KK,P1)="":"",1:", ")_L1_$S(DAS="Y":" (D)",1:"")
"RTN","FHASP1",71,0)
 E  S:'$D(P(M,KK,K)) P(M,KK,K)="" S P(M,KK,K)=L1_$S(DAS="Y":" (D)",1:"") S P1=K
"RTN","FHASP1",72,0)
 Q
"RTN","FHASP1",73,0)
MO ; Display Monitors
"RTN","FHASP1",74,0)
 S Y=$G(^FHPT(FHDFN,"A",FADM,"MO",K,0)) Q:Y=""  S N1=N1+1
"RTN","FHASP1",75,0)
 D:$Y'<S1 HF^FHASP Q:ANS="^"
"RTN","FHASP1",76,0)
 W !,$P(Y,"^",1) S DTP=$P(Y,"^",2) D DTP^FH W ", ",DTP
"RTN","FHASP1",77,0)
 S COM=$P(Y,"^",3) W:COM'="" !?5,"Action: ",COM Q
"RTN","FHASP1",78,0)
PRERR ;if Scheduling API returns an error, print error in the report.
"RTN","FHASP1",79,0)
 S FHER=$O(@FHTMP@("ERROR",0))
"RTN","FHASP1",80,0)
 W !!,"*** ERROR in Scheduling API ***"
"RTN","FHASP1",81,0)
 W !,"***",@FHTMP@("ERROR",FHER)," !!!",!
"RTN","FHASP1",82,0)
 Q
"RTN","FHASXR")
0^55^B9601519
"RTN","FHASXR",1,0)
FHASXR ; HISC/REL - Print Screening ;5/10/93  15:10
"RTN","FHASXR",2,0)
 ;;5.5;DIETETICS;**5,8**;Jan 28, 2005;Build 28
"RTN","FHASXR",3,0)
F0 R !!,"Print by PATIENT or COMMUNICATION OFFICE or ALL or WARD? WARD// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="W" D TR^FH
"RTN","FHASXR",4,0)
 I $P("PATIENT",X,1)'="",$P("WARD",X,1)'="",$P("COMMUNICATION OFFICE",X,1)'="",$P("ALL",X,1)'="" W *7,"  Answer with P or C or A or W" G F0
"RTN","FHASXR",5,0)
 G P0:X?1"P".E,W0:X?1"W".E I X?1"A".E S (DFN,ADM,WARD)="" G W1
"RTN","FHASXR",6,0)
D0 K DIC S DIC="^FH(119.73,",DIC("A")="Select COMMUNICATION OFFICE: ",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),D0:Y<1 S WARD=-Y,(DFN,ADM)="" G W1
"RTN","FHASXR",7,0)
W0 K DIC S DIC("A")="Select DIETETIC WARD: ",DIC="^FH(119.6,",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),W0:Y<1 S WARD=+Y,(DFN,ADM)=""
"RTN","FHASXR",8,0)
W1 R !!,"Admissions since Date/Time: ",X:DTIME G:'$T!("^"[X) KIL S %DT="EXTS",%DT(0)="-NOW" D ^%DT K %DT G:Y<1 W1 S TIM=Y
"RTN","FHASXR",9,0)
 D NOW^%DTC S X1=%\1,X2=-5 D C^%DTC I TIM<X W "  [ DATE CANNOT BE MORE THAN 5 DAYS IN PAST ]" G W1
"RTN","FHASXR",10,0)
 G P1
"RTN","FHASXR",11,0)
P0 S ALL=1 D ^FHDPA G:'DFN KIL S TIM=""
"RTN","FHASXR",12,0)
 I $P($G(^DPT(DFN,.35)),"^",1) W *7,!!?5,"  [ Patient has expired. ]" G KIL
"RTN","FHASXR",13,0)
P1 S NP=$P($G(^FH(119.9,1,3)),"^",3) I NP'="A" G P3
"RTN","FHASXR",14,0)
P2 R !!,"Include Nutrition Profiles? (Y/N): ",NP:DTIME G:'$T!(NP["^") KIL S:NP="" NP="^" S X=NP D TR^FH S NP=X I $P("YES",NP,1)'="",$P("NO",NP,1)'="" W *7,!,"  Answer YES or NO" G P2
"RTN","FHASXR",15,0)
P3 S NP=$S(NP?1"Y".E:1,1:0)
"RTN","FHASXR",16,0)
 I NP=0 S FHNUM=9999 G L0
"RTN","FHASXR",17,0)
P4 ;ask user for how far to print encounter, 1 yr back as default.
"RTN","FHASXR",18,0)
 W ! S %DT="AEP",%DT("A")="Print Dietetics Encounter since Date: "
"RTN","FHASXR",19,0)
 S %DT("B")="T-365",%DT(0)="-T" D ^%DT K %DT Q:X["^"!$D(DTOUT)
"RTN","FHASXR",20,0)
 S FHET=Y
"RTN","FHASXR",21,0)
 D MONUM^FHOMUTL I FHNUM="" Q
"RTN","FHASXR",22,0)
L0 K IOP S %ZIS="MQ",%ZIS("B")="HOME" W ! D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHASXR",23,0)
 I $D(IO("Q")) S FHPGM="Q0^FHASXR",FHLST="DFN^ADM^WARD^TIM^NP^FHNUM" D EN2^FH G KIL
"RTN","FHASXR",24,0)
 U IO D Q0 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHASXR",25,0)
Q0 ; Process Screening
"RTN","FHASXR",26,0)
 I DFN S FHZ115="P"_DFN D CHECK^FHOMDPA Q:FHDFN=""  D ^FHASXR1 Q
"RTN","FHASXR",27,0)
 G Q2:WARD<0,Q3:WARD=""
"RTN","FHASXR",28,0)
Q1 F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",WARD,FHDFN)) Q:FHDFN=""  S ADM=$G(^FHPT("AW",WARD,FHDFN)),X=$P($G(^DGPM(+ADM,0)),"^",1) I X'<TIM D PATNAME^FHOMUTL,^FHASXR1 W:$E(IOST,1,2)'="C-" @IOF Q:ANS="^"
"RTN","FHASXR",29,0)
 Q
"RTN","FHASXR",30,0)
Q2 S CF=-WARD,WRD=""
"RTN","FHASXR",31,0)
 F NN=0:0 S WRD=$O(^FH(119.6,"B",WRD)) Q:WRD=""  S WARD=$O(^FH(119.6,"B",WRD,0)) I $P($G(^FH(119.6,+WARD,0)),"^",8)=CF D Q1
"RTN","FHASXR",32,0)
 Q
"RTN","FHASXR",33,0)
Q3 S WRD="" F NN=0:0 S WRD=$O(^FH(119.6,"B",WRD)) Q:WRD=""  S WARD=$O(^(WRD,0)) Q:'WARD  D Q1
"RTN","FHASXR",34,0)
 Q
"RTN","FHASXR",35,0)
KIL G KILL^XUSCLEAN
"RTN","FHASXR1")
0^51^B27507511
"RTN","FHASXR1",1,0)
FHASXR1 ; HISC/REL - Print Screening (cont) ;4/20/95  08:53
"RTN","FHASXR1",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHASXR1",3,0)
Q1 ; Print assessment
"RTN","FHASXR1",4,0)
 I $G(DFN)="" Q
"RTN","FHASXR1",5,0)
 S X="T",%DT="X" D ^%DT S DT=Y,Y=^DPT(DFN,0),NAM=$P(Y,"^",1),SEX=$P(Y,"^",2),DOB=$P(Y,"^",3)
"RTN","FHASXR1",6,0)
 S AGE=$E(DT,1,3)-$E(DOB,1,3)-($E(DT,4,7)<$E(DOB,4,7)) D PID^FHDPA
"RTN","FHASXR1",7,0)
 S FHAP=$G(^FH(119.9,1,3)),FHU=$P(FHAP,"^",1)
"RTN","FHASXR1",8,0)
 S LN="",$P(LN,"-",80)="",PG=0,S1=$S(IOST?1"C".E:IOSL-2,1:IOSL-6) D HEAD
"RTN","FHASXR1",9,0)
 S UL="",$P(UL,"_",80)="",ANS=""
"RTN","FHASXR1",10,0)
 W !!,"S:  Chewing Problems: Y N",?41,"Pre-Admission Diet: ",$E(UL,1,18)
"RTN","FHASXR1",11,0)
 W !?4,"Dysphagia: Y N",?41,"Wt. + - ____ # in last ___ months"
"RTN","FHASXR1",12,0)
 W !?4,"Appetite: + -",?41,"Nausea: Y N",?58,"Vomiting: Y N"
"RTN","FHASXR1",13,0)
 W !?4,"Feeding Assistance Required: Y N",?41,"Diarrhea: Y N",?58,"Constipation: Y N"
"RTN","FHASXR1",14,0)
 D ALG^FHCLN W !?4,"Food Allergies: " S ALG=$S(ALG="":"None on file",1:ALG) D LNE
"RTN","FHASXR1",15,0)
 I $P(FHAP,"^",5)'="" W !?4,$P(FHAP,"^",5)
"RTN","FHASXR1",16,0)
Q2 W !!,"O:  Current Diet: " G:WARD="" Q21 I $D(^FHPT(FHDFN,"A",ADM,0)) D CUR^FHORD7 W Y
"RTN","FHASXR1",17,0)
 S X(0)=$G(^FHPT(FHDFN,"A",ADM,0))
"RTN","FHASXR1",18,0)
 I Y'="",FHORD>0 I $D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,1)) S COM=^(1) W:COM'="" !?4,"Comment: ",COM
"RTN","FHASXR1",19,0)
 S TYP=$P(X,"^",8) I TYP'="" W !?4,"Service: ",$S(TYP="T":"Tray",TYP="D":"Dining Room",1:"Cafeteria")
"RTN","FHASXR1",20,0)
 S DTP=$P(X(0),"^",3) I DTP D DTP^FH W !?4,"Expires: ",DTP
"RTN","FHASXR1",21,0)
 S TF=$P(X(0),"^",4) G:TF<1 F2
"RTN","FHASXR1",22,0)
 S Y=^FHPT(FHDFN,"A",ADM,"TF",TF,0)
"RTN","FHASXR1",23,0)
 S DTP=$P(Y,"^",1),COM=$P(Y,"^",5),TQU=$P(Y,"^",6),CAL=$P(Y,"^",7)
"RTN","FHASXR1",24,0)
 D DTP^FH W !?4,"Tubefeed Ordered: ",DTP
"RTN","FHASXR1",25,0)
 F TF2=0:0 S TF2=$O(^FHPT(FHDFN,"A",ADM,"TF",TF,"P",TF2)) Q:TF2<1  S XY=^(TF2,0) D LP
"RTN","FHASXR1",26,0)
 W !?4,"Total Quantity: ",TQU," ml",?42,"Total KCAL: ",CAL
"RTN","FHASXR1",27,0)
 W:COM'="" !?4,"Comment: ",COM
"RTN","FHASXR1",28,0)
F2 S X=$P($G(^DGPM(ADM,0)),"^",10) W !?4,"Adm. Dx: ",$E(X,1,27)
"RTN","FHASXR1",29,0)
 S DTP=$P($G(^DGPM(ADM,0)),"^",1) D DTP^FH W ?41,"Adm. Date:   ",?59,DTP
"RTN","FHASXR1",30,0)
Q21 W !?4,"Age: ",AGE,?18,"Sex: ",SEX,?41,"Prior Assessment:" S ASN=$O(^FHPT(FHDFN,"N",0)) I ASN>0 S DTP=9999999-ASN D DTP^FH W ?59,DTP
"RTN","FHASXR1",31,0)
 S Y=$S(ASN>0:^FHPT(FHDFN,"N",ASN,0),1:"")
"RTN","FHASXR1",32,0)
 S HGT=$P(Y,"^",4),WGT=$P(Y,"^",6),DWGT=$P(Y,"^",8),UWGT=$P(Y,"^",9),IBW=$P(Y,"^",10),FRM=$P(Y,"^",11),AMP=$P(Y,"^",12),HGP=$P(Y,"^",5),WGP=$P(Y,"^",7)
"RTN","FHASXR1",33,0)
 I HGT'="" S X1=$S(HGT\12:HGT\12_"'",1:"")_$S(HGT#12:" "_(HGT#12)_"""",1:""),X2=+$J(HGT*2.54,0,0)_" cm"
"RTN","FHASXR1",34,0)
 S (FHHT,FHWWT,FHDWT,FHX1,FHX2)=""
"RTN","FHASXR1",35,0)
 I DFN S GMRVSTR="WT" D EN6^GMRVUTL S FHDWT=$P(X,"^",1),FHWWT=$P(X,"^",8),GMRVSTR="HT" D EN6^GMRVUTL S FHHT=$P(X,"^",8)
"RTN","FHASXR1",36,0)
 I FHHT'="" S FHX1=$S(FHHT\12:FHHT\12_"'",1:"")_$S(FHHT#12:" "_(FHHT#12)_"""",1:""),FHX2=+$J(FHHT*2.54,0,0)_" cm"
"RTN","FHASXR1",37,0)
 W !?4,"Vitals Height:",?18 W:FHX2'="" FHX2
"RTN","FHASXR1",38,0)
 W:FHX1'="" " (",FHX1,")"
"RTN","FHASXR1",39,0)
 S (FHX1,FHX2)=""
"RTN","FHASXR1",40,0)
 W ?41,"Frame Size:",?59,$S(FRM="S":"Small",FRM="M":"Medium",FRM="L":"Large",1:"")
"RTN","FHASXR1",41,0)
 I FHWWT'="" S FHX1=FHWWT_" lbs",FHX2=+$J(FHWWT/2.2,0,1)_" kg"
"RTN","FHASXR1",42,0)
 W !?4,"Vitals Weight:" W:FHX2'="" ?18,FHX2 W:FHX1'="" " (",FHX1,")"
"RTN","FHASXR1",43,0)
 W ?41,"Weight Taken:"
"RTN","FHASXR1",44,0)
 S DTP=""
"RTN","FHASXR1",45,0)
 I FHDWT'="" S DTP=FHDWT D DTP^FH
"RTN","FHASXR1",46,0)
 W ?59,DTP
"RTN","FHASXR1",47,0)
 S DTP=DWGT D:DTP'="" DTP^FH
"RTN","FHASXR1",48,0)
 ;W ?41,"Amputation %:",?59,AMP
"RTN","FHASXR1",49,0)
 S (X1,X2)=""
"RTN","FHASXR1",50,0)
 I WGT'="" S X1=WGT_" lbs",X2=+$J(WGT/2.2,0,1)_" kg"
"RTN","FHASXR1",51,0)
 W !?4,"Last Weight:" I WGT'="" W ?18,X2 W:WGP'="" " ",WGP W " (",X1,")"
"RTN","FHASXR1",52,0)
 W ?41,"Weight Taken:"
"RTN","FHASXR1",53,0)
 S DTP=DWGT D DTP^FH W:WGT'="" ?59,DTP
"RTN","FHASXR1",54,0)
 I UWGT'="" S X1=UWGT_" lbs",X2=+$J(UWGT/2.2,0,1)_" kg"
"RTN","FHASXR1",55,0)
 W !?4,"Usual Weight:" I UWGT'="" W ?18,X2," (",X1,")"
"RTN","FHASXR1",56,0)
 W ?41,"Last Weight/Usual Wt: " W:UWGT ?59,$J(WGT/UWGT*100,3,0),"%"
"RTN","FHASXR1",57,0)
 I IBW'="" S X1=IBW_" lbs",X2=+$J(IBW/2.2,0,1)_" kg"
"RTN","FHASXR1",58,0)
 W !?4,"Target Weight:" I IBW'="" W ?18,X2," (",X1,")"
"RTN","FHASXR1",59,0)
 W ?41,"Last Weight/TBW:" W:IBW ?59,$J(WGT/IBW*100,3,0),"%"
"RTN","FHASXR1",60,0)
 S BMI=""
"RTN","FHASXR1",61,0)
 I FHWWT,FHHT S A2=FHHT*.0254,BMI=+$J(FHWWT/2.2/(A2*A2),0,1)
"RTN","FHASXR1",62,0)
 W !?4,"Body Mass Index: ",BMI,?41,"Amputation %:",?59,AMP
"RTN","FHASXR1",63,0)
Q3 S PX=4 D LAB^FHASM4
"RTN","FHASXR1",64,0)
 W !!?32,"Laboratory Data",!?5,"Test",?30,"Result    units",?51,"Ref.   range",?67,"Date",!
"RTN","FHASXR1",65,0)
 S N1=0 F K=0:0 S K=$O(LRTST(K)) Q:K=""  D LAB
"RTN","FHASXR1",66,0)
 I 'N1 W !?5,"No laboratory data available last ",$S($D(^FH(119.9,1,3)):$P(^(3),"^",2),1:90)," days"
"RTN","FHASXR1",67,0)
Q6 W !!?4,"Appearance: "
"RTN","FHASXR1",68,0)
 W !!,"A:  Nutrition Status",?48,"Nutrition Education",!
"RTN","FHASXR1",69,0)
 S E(1)="Further Education Required: Y N",E(2)=$E(UL,1,31)
"RTN","FHASXR1",70,0)
 S N=0 F KK=0:0 S KK=$O(^FH(115.4,KK)) Q:KK<1&(N>1)  S N=N+1 W !?4 W:$P($G(^FH(115.4,+KK,0)),"^",2)'="" "___ ",$P(^(0),"^",2) W:N<3 ?48,E(N)
"RTN","FHASXR1",71,0)
 W !?4,"Comments:"
"RTN","FHASXR1",72,0)
 W !!,"P:  Nutrition Plan",!
"RTN","FHASXR1",73,0)
 F KK=0:0 S KK=$O(^FH(115.5,KK)) Q:KK<1  W !?4,"___ ",$P(^(KK,0),"^",1)
"RTN","FHASXR1",74,0)
 W !?4,"Recommendations:" F KK=1:1:IOSL-$Y-7 W !
"RTN","FHASXR1",75,0)
 W !?41,$E(UL,1,38)
"RTN","FHASXR1",76,0)
 W !?41,"Signature",?68,"Date"
"RTN","FHASXR1",77,0)
 D FOOT Q:'NP!(ANS="^")  W:$E(IOST,1,2)'="C-" @IOF D Q0^FHASP Q
"RTN","FHASXR1",78,0)
LAB S X1=$P(LRTST(K),"^",7) Q:X1=""  S DTP=X1\1 D DTP^FH S N1=N1+1
"RTN","FHASXR1",79,0)
 W !?5,$P(LRTST(K),"^",1),?27,$P(LRTST(K),"^",6),?40,$P(LRTST(K),"^",4),?51,$P(LRTST(K),"^",5),?65,DTP Q
"RTN","FHASXR1",80,0)
LNE ; Break Line if longer than 56 chars
"RTN","FHASXR1",81,0)
 I $L(ALG)<57 W ALG Q
"RTN","FHASXR1",82,0)
 F L=58:-1:1 Q:$E(ALG,L-1,L)=", "
"RTN","FHASXR1",83,0)
 W $E(ALG,1,L-2)
"RTN","FHASXR1",84,0)
 S ALG=$E(ALG,L+1,999)
"RTN","FHASXR1",85,0)
 Q:ALG=""  W !?20
"RTN","FHASXR1",86,0)
 G LNE
"RTN","FHASXR1",87,0)
HEAD ; Page Header
"RTN","FHASXR1",88,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1,DTP=DT D DTP^FH
"RTN","FHASXR1",89,0)
 W !,LN,!,DTP,?30,"NUTRITION SCREENING",?73,"Page ",PG,!,LN Q
"RTN","FHASXR1",90,0)
FOOT ; Page Footer
"RTN","FHASXR1",91,0)
 D PAUSE Q:IOST?1"C".E
"RTN","FHASXR1",92,0)
 F KK=1:1:IOSL-$Y-5 W !
"RTN","FHASXR1",93,0)
 D SITE^FH W !,LN,!,NAM W ?(80-$L(SITE)\2),SITE,?67,"VAF 10-9034"
"RTN","FHASXR1",94,0)
 W ! W:PID'="" PID
"RTN","FHASXR1",95,0)
 S W1=$G(^DPT(DFN,.1)) S:$D(^DPT(DFN,.101)) W1=W1_"/"_^DPT(DFN,.101) W:W1'="" ?(80-$L(W1)\2),W1,?66,"(Vice SF 509)"
"RTN","FHASXR1",96,0)
 W !,LN,! Q
"RTN","FHASXR1",97,0)
PAUSE ; Pause to Scroll
"RTN","FHASXR1",98,0)
 I IOST?1"C".E R !!,"Press RETURN to continue." R X:DTIME S:'$T!(X["^") ANS="^" Q:ANS="^"  I "^"'[X W !,"Enter a RETURN to Continue." G PAUSE
"RTN","FHASXR1",99,0)
 Q
"RTN","FHASXR1",100,0)
LP S TUN=$P(XY,"^",1),STR=$P(XY,"^",2),QUA=$P(XY,"^",3)
"RTN","FHASXR1",101,0)
 W !?7,$P($G(^FH(118.2,TUN,0)),"^",1),", ",$S(STR=4:"Full",STR=1:"1/4",STR=2:"1/2",1:"3/4")," Str., ",QUA Q
"RTN","FHCLN")
0^46^B1290608
"RTN","FHCLN",1,0)
FHCLN ; HISC/REL - Clinical Dietetics ;2/13/95  14:20 
"RTN","FHCLN",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHCLN",3,0)
ALG ; Get Allergies
"RTN","FHCLN",4,0)
 K ^TMP($J,"FHGMRAL") I $G(DFN)="" S ALG="" Q
"RTN","FHCLN",5,0)
 S ALG="",GMRA="1^0^010" D ^GMRADPT
"RTN","FHCLN",6,0)
 G:$O(GMRAL(0))<1 A1 F DA=0:0 S DA=$O(GMRAL(DA)) Q:DA<1  D A3 S:ALG'="" ALG=ALG_", " S GMRA=$P(GMRAL(DA),"^",2) G:$L(ALG)+$L(GMRA)>250 A2 S ALG=ALG_GMRA
"RTN","FHCLN",7,0)
A1 K GMRA,GMRAL,FHGMNUM,FHGMIEN Q
"RTN","FHCLN",8,0)
A2 S:$L(ALG)<246 ALG=ALG_"OTHERS" G A1
"RTN","FHCLN",9,0)
A3 S FHGMNUM=$P(GMRAL(DA),"^",9) I $P(FHGMNUM,";",2)'="GMRD(120.82," Q
"RTN","FHCLN",10,0)
 S FHGMIEN=$P(FHGMNUM,";",1),^TMP($J,"FHGMRAL",FHGMIEN)=""
"RTN","FHCTF5")
0^22^B27613235
"RTN","FHCTF5",1,0)
FHCTF5 ; HIOFO/REL/FAI - Check Inpatients for Monitors ;08/29/06  14:43
"RTN","FHCTF5",2,0)
 ;;5.5;Dietetics;**4,8**;Jan 28, 2005;Build 28
"RTN","FHCTF5",3,0)
 ;3/14/07 - patch 8 adds the nutrition assessment alert.
"RTN","FHCTF5",4,0)
 D NOW^%DTC S NOW=% D CLR
"RTN","FHCTF5",5,0)
 S FHEDT=$P(NOW,".")
"RTN","FHCTF5",6,0)
 F WRD=0:0 S WRD=$O(^FH(119.6,WRD)) Q:WRD<1  S FHDUZ=$P($G(^(WRD,0)),"^",2) F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",WRD,FHDFN)) Q:FHDFN'>0  S ADM=$G(^FHPT("AW",WRD,FHDFN)) D PAT
"RTN","FHCTF5",7,0)
 D P5
"RTN","FHCTF5",8,0)
 K %,A1,A2,ADM,BMI,CLR,DA,DD,DFN,DIC,DTE,FHDUZ,FHOR,FHORD,FHTF
"RTN","FHCTF5",9,0)
 K GMRVSTR,HT,L,LST,MONIFN,MONTX,N,NOW,PX,STOP,TF,WRD,WT,X,X0,Y
"RTN","FHCTF5",10,0)
 K I,FHTMO,FHTFLG,FHEDT,FHTICK,FHTDFN,FHTDT1,FHWTDT,FHHTDT,WARD,FHGMDT
"RTN","FHCTF5",11,0)
 K A,A0,AGE,BID,DEAD,FDA,FHAGE,FHBID,FHCLIN,FHDFN,FHI,FHI115,FHJ,FHJDAT,FHDFN
"RTN","FHCTF5",12,0)
 K FHPTNM,FHPCZN,FHSEX,FHSSN,FHHDAT,FILE,HTM,IEN,IEN200,NAM,PID,SEX
"RTN","FHCTF5",13,0)
 Q
"RTN","FHCTF5",14,0)
PAT ;; Check a patient
"RTN","FHCTF5",15,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHCTF5",16,0)
 S Y=^DPT(DFN,0),NAM=$P(Y,"^",1),SEX=$P(Y,"^",2),DOB=$P(Y,"^",3)
"RTN","FHCTF5",17,0)
 S AGE="" I DOB'="" S AGE=$E(NOW,1,3)-$E(DOB,1,3)-($E(NOW,4,7)<$E(DOB,4,7))
"RTN","FHCTF5",18,0)
 S DEAD=$P($G(^DPT(DFN,.35)),"^",1) Q:DEAD'=""
"RTN","FHCTF5",19,0)
 D ALRT^FHASM2A    ;creates alert for nutrition assessment(follow-up dt & food/drug interaction.
"RTN","FHCTF5",20,0)
 ;
"RTN","FHCTF5",21,0)
P0 ; Calculate BMI
"RTN","FHCTF5",22,0)
 S GMRVSTR="WT" D EN6^GMRVUTL S WT=$P(X,"^",8),FHWTDT=$P(X,"^",1)
"RTN","FHCTF5",23,0)
 S GMRVSTR="HT" D EN6^GMRVUTL S HT=$P(X,"^",8),FHHTDT=$P(X,"^",1)
"RTN","FHCTF5",24,0)
 S FHGMDT=$S(FHWTDT>FHHTDT:FHWTDT,FHHTDT>FHWTDT:FHHTDT,1:FHWTDT)
"RTN","FHCTF5",25,0)
 S BMI="" I WT,HT S A2=HT*.0254,BMI=+$J(WT/2.2/(A2*A2),0,1)
"RTN","FHCTF5",26,0)
 I $G(BMI)=""!($G(BMI)'<18.5) G P1
"RTN","FHCTF5",27,0)
 S MONTX="Monitor: BMI < 18.5",DTE=NOW
"RTN","FHCTF5",28,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1) I 'N,(FHGMDT>(FHEDT-7)) D FIL G P1
"RTN","FHCTF5",29,0)
 I 'N G P1
"RTN","FHCTF5",30,0)
 ; Check if been 30 days
"RTN","FHCTF5",31,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2)
"RTN","FHCTF5",32,0)
 S X=$$FMDIFF^XLFDT(DTE,LST) I (X>30) D FIL
"RTN","FHCTF5",33,0)
P1 ; Check for current Tubefeeding
"RTN","FHCTF5",34,0)
 S TF=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",4) I 'TF G P2
"RTN","FHCTF5",35,0)
 S MONTX="Monitor: On Tubefeeding",DTE=NOW
"RTN","FHCTF5",36,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1) I 'N D FIL G P2
"RTN","FHCTF5",37,0)
 ; Check if been 7 days
"RTN","FHCTF5",38,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2)
"RTN","FHCTF5",39,0)
 S X=$$FMDIFF^XLFDT(DTE,LST) I X>7 D FIL
"RTN","FHCTF5",40,0)
P2 ; Check for Hyperals
"RTN","FHCTF5",41,0)
 S MONTX="",DTE=NOW
"RTN","FHCTF5",42,0)
 D PSS435^PSS55(DFN,,"FHIV") F DA=0:0 S DA=$O(^TMP($J,"FHIV",DA)) Q:DA<1  D
"RTN","FHCTF5",43,0)
 .S (X0,HTM)=$P($G(^TMP($J,"FHIV",DA,.02)),"^",2) I X0>NOW Q
"RTN","FHCTF5",44,0)
 .S MONTX="Monitor: On Hyperals" D FIL Q
"RTN","FHCTF5",45,0)
 ;
"RTN","FHCTF5",46,0)
P3 ; Check for Serum Albumin
"RTN","FHCTF5",47,0)
 S MONTX="",PX=6 D LAB^FHASM4 I $D(^TMP($J,"LRTST")) D
"RTN","FHCTF5",48,0)
 .F L=0:0 S L=$O(^TMP($J,"LRTST",L)) Q:L<1  S Y=$TR($P(^(L),"^",6)," ","") I Y'?1A.E,Y<2.8 S MONTX="Monitor: Albumin < 2.8",DTE=$P(^(L),"^",7)
"RTN","FHCTF5",49,0)
 I MONTX="" G P4
"RTN","FHCTF5",50,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1)
"RTN","FHCTF5",51,0)
 ;process new Albumin if old test date is within 7 days.
"RTN","FHCTF5",52,0)
 I 'N S X=$$FMDIFF^XLFDT(NOW,DTE) I X<8 D FIL G P4
"RTN","FHCTF5",53,0)
 I 'N G P4
"RTN","FHCTF5",54,0)
 ; Check if same test
"RTN","FHCTF5",55,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2) I DTE>LST D FIL
"RTN","FHCTF5",56,0)
 ;
"RTN","FHCTF5",57,0)
P4 ; Check for NPO+Clr Liq > 3 days
"RTN","FHCTF5",58,0)
 S A1=NOW,DTE=NOW
"RTN","FHCTF5",59,0)
 F  D  Q:'A1
"RTN","FHCTF5",60,0)
 .S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1),-1) Q:'A1
"RTN","FHCTF5",61,0)
 .S FHORD=$P($G(^FHPT(FHDFN,"A",ADM,"AC",A1,0)),"^",2) I 'FHORD S A1="" Q
"RTN","FHCTF5",62,0)
 .S FHOR=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))
"RTN","FHCTF5",63,0)
 .I $P(FHOR,"^",7)="N" S DTE=A1 Q
"RTN","FHCTF5",64,0)
 .I $P(FHOR,"^",2)=CLR S DTE=A1 Q
"RTN","FHCTF5",65,0)
 .S A1="" Q
"RTN","FHCTF5",66,0)
 I DTE'<NOW Q
"RTN","FHCTF5",67,0)
 S X=$$FMDIFF^XLFDT(NOW,DTE) Q:X<3
"RTN","FHCTF5",68,0)
 S MONTX="Monitor: NPO+Clr Liq > 3 days",DTE=NOW
"RTN","FHCTF5",69,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1) I 'N D FIL Q
"RTN","FHCTF5",70,0)
 ; Check if been 3 days
"RTN","FHCTF5",71,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2)
"RTN","FHCTF5",72,0)
 S X=$$FMDIFF^XLFDT(NOW,LST) I X>3 D FIL
"RTN","FHCTF5",73,0)
 Q
"RTN","FHCTF5",74,0)
P5 ;clear personalized tickler and quit
"RTN","FHCTF5",75,0)
 F FHI=0:0 S FHI=$O(^FH(119,FHI)) Q:FHI'>0  F FHJ=0:0 S FHJ=$O(^FH(119,FHI,"I",FHJ)) Q:FHJ'>0  D
"RTN","FHCTF5",76,0)
 .S FHJDAT=$G(^FH(119,FHI,"I",FHJ,0))
"RTN","FHCTF5",77,0)
 .Q:$P(FHJDAT,U,2)'="X"
"RTN","FHCTF5",78,0)
 .I $P(FHJDAT,U,1)<NOW K ^FH(119,FHI,"I",FHJ)
"RTN","FHCTF5",79,0)
 Q
"RTN","FHCTF5",80,0)
CLR ; Find Clear Liquid
"RTN","FHCTF5",81,0)
 S CLR=$O(^FH(111,"B","CLEAR LIQUID",0)) Q:CLR
"RTN","FHCTF5",82,0)
 S CLR=$O(^FH(111,"C","CLEAR LIQUID",0)) Q:CLR
"RTN","FHCTF5",83,0)
 S CLR=$O(^FH(111,"C","CLR LIQ",0)) Q:CLR
"RTN","FHCTF5",84,0)
 S CLR=$O(^FH(111,"C","CL",0)) Q:CLR
"RTN","FHCTF5",85,0)
 Q
"RTN","FHCTF5",86,0)
FIL ; File Monitor
"RTN","FHCTF5",87,0)
 S FHCLIN=""
"RTN","FHCTF5",88,0)
 K XQA S:FHDUZ FHCLIN=$P($G(^VA(200,FHDUZ,0)),U,1)
"RTN","FHCTF5",89,0)
 D PATNAME^FHOMUTL
"RTN","FHCTF5",90,0)
 I (MONTX["BMI"),($P($G(^FH(119.6,WRD,1)),"^",5)'="Y") G TFIL
"RTN","FHCTF5",91,0)
 I (MONTX["Tubefeed"),($P($G(^FH(119.6,WRD,1)),"^",6)'="Y") G TFIL
"RTN","FHCTF5",92,0)
 I (MONTX["Hyperals"),($P($G(^FH(119.6,WRD,1)),"^",7)'="Y") G TFIL
"RTN","FHCTF5",93,0)
 I (MONTX["Albumin"),($P($G(^FH(119.6,WRD,1)),"^",8)'="Y") G TFIL
"RTN","FHCTF5",94,0)
 I (MONTX["NPO+Clr"),($P($G(^FH(119.6,WRD,1)),"^",9)'="Y") G TFIL
"RTN","FHCTF5",95,0)
 K XQA,XQAMSG,XQAOPT,XQAROU
"RTN","FHCTF5",96,0)
 S XQAID="FH,"_$J_","_$H
"RTN","FHCTF5",97,0)
 S XQAMSG=$E(FHPTNM,1,9)_" ("_$E(FHPTNM,1,1)_$P(FHSSN,"-",3)_"): "
"RTN","FHCTF5",98,0)
 S XQAOPT="FHCTF2",XQAMSG=XQAMSG_"  "_MONTX_" "_$E(DTE,4,5)_"/"_$E(DTE,6,7)_"/"_$E(DTE,2,3)_"    Clinician: "_$G(FHCLIN)
"RTN","FHCTF5",99,0)
 F A=0:0 S A=$O(^FH(119.6,WRD,2,A)) Q:A'>0  S TK=$P($G(^FH(119.6,WRD,2,A,0)),U,1),XQA(TK)=""
"RTN","FHCTF5",100,0)
 I '$D(XQA(FHDUZ)) S XQA(FHDUZ)=""
"RTN","FHCTF5",101,0)
 D SETUP^XQALERT
"RTN","FHCTF5",102,0)
 ;
"RTN","FHCTF5",103,0)
TFIL ;
"RTN","FHCTF5",104,0)
 Q:$G(MONTX)=""
"RTN","FHCTF5",105,0)
 S FHTFLG=0
"RTN","FHCTF5",106,0)
 F I=0:0 S I=$O(^FH(119,FHDUZ,"I",I)) Q:I'>0  D
"RTN","FHCTF5",107,0)
 .S FHTDT1=$P(I,".",1)
"RTN","FHCTF5",108,0)
 .S FHTICK=^FH(119,FHDUZ,"I",I,0),FHTMO=$P(FHTICK,"^",3),FHTDFN=$P(FHTICK,"^",4)
"RTN","FHCTF5",109,0)
 .I (FHTMO=MONTX),(FHTDFN=DFN),(FHTDT1=FHEDT) S FHTFLG=1
"RTN","FHCTF5",110,0)
 Q:FHTFLG  ;only one monitor for the same day, same clinician and same pt.
"RTN","FHCTF5",111,0)
 L +^FHPT(FHDFN,"A",ADM,"MO",0)
"RTN","FHCTF5",112,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"MO",0)) S ^FHPT(FHDFN,"A",ADM,"MO",0)="^115.11^^"
"RTN","FHCTF5",113,0)
 L -^FHPT(FHDFN,"A",ADM,"MO",0)
"RTN","FHCTF5",114,0)
 K DIC,DD,DO,DINUM S DIC="^FHPT(FHDFN,""A"",ADM,""MO"",",DIC(0)="L",DA(1)=ADM,DA(2)=FHDFN,DLAYGO=115,X=MONTX D FILE^DICN K DIC,DLAYGO
"RTN","FHCTF5",115,0)
 Q:Y<1  S MONIFN=+Y
"RTN","FHCTF5",116,0)
 S $P(^FHPT(FHDFN,"A",ADM,"MO",MONIFN,0),"^",2)=DTE,^FHPT(FHDFN,"A",ADM,"MO","AC",DTE,MONIFN)=""
"RTN","FHCTF5",117,0)
CRT ;create tickler
"RTN","FHCTF5",118,0)
 S FHTF=DTE_"^M^"_MONTX_"^"_DFN_"^"_ADM_"^"_MONIFN
"RTN","FHCTF5",119,0)
 D:FHDUZ FILE^FHCTF2
"RTN","FHCTF5",120,0)
 Q
"RTN","FHMTK1B")
0^48^B27056788
"RTN","FHMTK1B",1,0)
FHMTK1B ; HISC/NCA - Tray Ticket Utilities ;2/23/00  09:53
"RTN","FHMTK1B",2,0)
 ;;5.5;DIETETICS;**5,8**;Jan 28, 2005;Build 28
"RTN","FHMTK1B",3,0)
 ;patch #5 - added outpatient SO.
"RTN","FHMTK1B",4,0)
Q1 ; Store Service Point, Bread/Beverage default, Food Preference,
"RTN","FHMTK1B",5,0)
 ; and Recipes of meal
"RTN","FHMTK1B",6,0)
 S LN=$S(IOST?1"C".E:IOSL-2,1:IOSL-6),SL=40 F SP=0:0 S SP=$O(^FH(119.72,SP)) Q:SP<1  S Z=$G(^(SP,0)),^TMP($J,"SRP",SP)=$P(Z,"^",1,4)
"RTN","FHMTK1B",7,0)
 I MEAL'="A" S M1=MEAL D GET Q
"RTN","FHMTK1B",8,0)
 F M1="B","N","E" S FHX1=$P(FHDA,"^",$F("BNE",M1)) D GET
"RTN","FHMTK1B",9,0)
 Q
"RTN","FHMTK1B",10,0)
GET S LS(M1)=40 F LL=0:0 S LL=$O(^FH(115.2,LL)) Q:LL<1  S L2=$G(^(LL,0)) D
"RTN","FHMTK1B",11,0)
 .I $P(L2,"^",2)="D" D  Q
"RTN","FHMTK1B",12,0)
 ..F KK=0:0 S KK=$O(^FH(115.2,LL,"X",KK)) Q:KK<1  S REC=$P($G(^(KK,0)),"^",1),^TMP($J,"X",M1,LL,KK)=+REC,KKNUM=KK D
"RTN","FHMTK1B",13,0)
 ...I $P($G(^FH(115.2,LL,0)),U,7)'="Y" Q  ;must be set to excl emb recps
"RTN","FHMTK1B",14,0)
 ...I REC'="" F FHKK=0:0 S FHKK=$O(^FH(114,"AB",REC,FHKK)) Q:FHKK'>0  S FHEMB(FHKK)=FHKK
"RTN","FHMTK1B",15,0)
 ..F FHKK=0:0 S FHKK=$O(FHEMB(FHKK)) Q:FHKK'>0  S KKNUM=KKNUM+1,^TMP($J,"X",M1,LL,KKNUM)=FHKK  ;exclude EMBEDDED RECIPES
"RTN","FHMTK1B",16,0)
 ..K FHEMB Q
"RTN","FHMTK1B",17,0)
 .S REC=$P(L2,"^",4) Q:'REC  S Y=$G(^FH(114,+REC,0)),NAM=$P(Y,"^",1),K3=$P(Y,"^",7) I $P(L2,"^",5),$P(L2,"^",6)[M1 D
"RTN","FHMTK1B",18,0)
 ..S:'$D(^TMP($J,"FHDEF",M1,+REC)) ^TMP($J,"FHDEF",M1,+REC)=K3_"^"_+REC_"^"_NAM
"RTN","FHMTK1B",19,0)
 ..Q
"RTN","FHMTK1B",20,0)
 .Q
"RTN","FHMTK1B",21,0)
 F LL=0:0 S LL=$O(^TMP($J,"X",M1,LL)) Q:LL<1  F KK=0:0 S KK=$O(^TMP($J,"X",M1,LL,KK)) Q:KK<1  S X1=+$G(^(KK)),X2=$O(^FH(116.1,FHX1,"RE","B",X1,0)) I X2<1 K ^TMP($J,"X",M1,LL,KK)
"RTN","FHMTK1B",22,0)
 F P1=0:0 S P1=$O(^FH(116.1,FHX1,"RE",P1)) Q:P1<1  S L1=$G(^(P1,0)),Y=$G(^FH(114,+L1,0)),NAM=$P(Y,"^",1) D
"RTN","FHMTK1B",23,0)
 .F CAT=0:0 S CAT=$O(^FH(116.1,FHX1,"RE",P1,"R",CAT)) Q:CAT<1  S MCA=$G(^(CAT,0)) D
"RTN","FHMTK1B",24,0)
 ..S FHPD=$P(MCA,"^",2),K3=+MCA S:'K3 K3=$P(Y,"^",7)
"RTN","FHMTK1B",25,0)
 ..S CODE=$P($G(^FH(114.1,+K3,0)),"^",2),ZZ1=CODE
"RTN","FHMTK1B",26,0)
 ..I $E(CODE,$L(CODE))="X" S K3=$O(^FH(114.1,"C",$E(CODE,1,$L(CODE)-1),0)) S:'K3 K3=$P(Y,"^",7)
"RTN","FHMTK1B",27,0)
 ..S K4=$P($G(^FH(114.1,+K3,0)),"^",3),K4=$S('K4:99,K4<10:"0"_K4,1:K4)
"RTN","FHMTK1B",28,0)
 ..F P2=1:1 S FHX2=$P(FHPD," ",P2) Q:FHX2=""  S PD=$P(FHX2,";",1),P4="~" I PD'="" D
"RTN","FHMTK1B",29,0)
 ...F SP=0:0 S SP=$O(^TMP($J,"SRP",SP)) Q:SP<1  S SRP=$G(^TMP($J,"SRP",SP)),Z1=$G(^FH(116.1,FHX1,"RE",P1,"D",SP,0)),Z1=$P(Z1,"^",2),Z1=$S(Z1="":1,1:Z1) D SRP^FHDCR1B
"RTN","FHMTK1B",30,0)
 ...D STOR Q
"RTN","FHMTK1B",31,0)
 ..Q
"RTN","FHMTK1B",32,0)
 .Q
"RTN","FHMTK1B",33,0)
 Q
"RTN","FHMTK1B",34,0)
STOR ; Store Alternate recipes and default recipes
"RTN","FHMTK1B",35,0)
 N CODE S DBX="",CODE=ZZ1 I $E(CODE,$L(CODE))?1"X" D
"RTN","FHMTK1B",36,0)
 .S CODE=$E(CODE,1,$L(CODE)-1),DBX="*** Omit ",LC=0
"RTN","FHMTK1B",37,0)
 .F NX=0:0 S NX=$O(^FH(114,+L1,"DBX",NX)) Q:NX<1  S Z3=^(NX,0),QTY=$S($P(Z3,"^",2):$P(Z3,"^",2),1:1),ZZ=QTY_" "_$P($G(^FH(114.1,+Z3,0)),"^",1)_", " D:$L(DBX)+$L(ZZ)>28 SET S DBX=DBX_ZZ
"RTN","FHMTK1B",38,0)
 .D SET Q
"RTN","FHMTK1B",39,0)
 I $E(CODE,$L(CODE))?1N,$E(CODE,$L(CODE))>1 S ^TMP($J,"ALT",M1,PD,CODE,+L1)=K4_"~"_K3_"~"_NAM_P4
"RTN","FHMTK1B",40,0)
 S ^TMP($J,M1,PD,K4_"~"_K3_"~"_NAM)=+L1_"^"_CODE_"^"_P4
"RTN","FHMTK1B",41,0)
 S:'$D(^TMP($J,"FHPO",NAM)) ^TMP($J,"FHPO",NAM)=K4_"~"_K3_"~"_NAM
"RTN","FHMTK1B",42,0)
 I $D(^TMP($J,"FHDEF",M1,+L1)) S ^TMP($J,"DEF",M1,PD,K3_"~"_NAM)=+L1_"~"_K3_"~"_NAM Q
"RTN","FHMTK1B",43,0)
 Q
"RTN","FHMTK1B",44,0)
SET I $L(DBX)>9 S LC=LC+1,^TMP($J,"DBX",M1,PD,+L1,LC)=$E(DBX,1,$L(DBX)-2),DBX="*** Omit "
"RTN","FHMTK1B",45,0)
 Q
"RTN","FHMTK1B",46,0)
ALT ; Exchange dislike recipe with an alternate recipe
"RTN","FHMTK1B",47,0)
 S R1=$P($G(^TMP($J,MEAL,PD,X8)),"^",2),R2=R1 Q:R1=""
"RTN","FHMTK1B",48,0)
 F  S R2=$O(^TMP($J,"ALT",MEAL,PD,R2)) Q:R2=""!($E(R1,1,$L(R1)-1)'=$E(R2,1,$L(R2)-1))  D A1 Q:X6
"RTN","FHMTK1B",49,0)
 I 'X6 D
"RTN","FHMTK1B",50,0)
 .I $E(R1,1,$L(R1)-1)="E" S MSG="  ** NO ENTREE **",EVT="M^O^^No Entree" D ^FHORX Q
"RTN","FHMTK1B",51,0)
 .S MSG="  ** NO "_$P($G(^FH(114.1,Z1,0)),"^",1)_" - FP" Q
"RTN","FHMTK1B",52,0)
 Q
"RTN","FHMTK1B",53,0)
A1 S R3=0
"RTN","FHMTK1B",54,0)
A2 S R3=$O(^TMP($J,"ALT",MEAL,PD,R2,R3)) Q:R3<1
"RTN","FHMTK1B",55,0)
 S Z=$G(^TMP($J,"ALT",MEAL,PD,R2,R3)),P4="~"_$P(Z,"~",4,$L(Z,"~")) I $F(P4,"~"_SP_"~"),'$D(FP(R3)) S X6=R3 Q
"RTN","FHMTK1B",56,0)
 G A2
"RTN","FHMTK1B",57,0)
DECOD ; Decode code string
"RTN","FHMTK1B",58,0)
 S M1=$S(MEAL="B":1,MEAL="N":2,1:3),STR=$P(STR,";",M1)
"RTN","FHMTK1B",59,0)
 F X4=1:1 Q:$P(STR," ",X4,99)=""  D
"RTN","FHMTK1B",60,0)
 .S X1=$P(STR," ",X4),NAM=$P($G(^FH(114.1,+X1,0)),"^",1),$P(X1,",",2)=$S($P(X1,",",2)'="":$P(X1,",",2),1:1)
"RTN","FHMTK1B",61,0)
 .S MP(+X1)=$P(X1,",",2) Q
"RTN","FHMTK1B",62,0)
 Q
"RTN","FHMTK1B",63,0)
CHK ; Check for Patient dislike on meal
"RTN","FHMTK1B",64,0)
 F LL=0:0 S LL=$O(^TMP($J,"X",MEAL,LL)) Q:LL<1  F KK=0:0 S KK=$O(^TMP($J,"X",MEAL,LL,KK)) Q:KK<1  S X1=+$G(^TMP($J,"X",MEAL,LL,KK)) D
"RTN","FHMTK1B",65,0)
 .S X6=$O(^FHPT(FHDFN,"P","B",LL,0)) Q:X6<1
"RTN","FHMTK1B",66,0)
 .S X2=$G(^FHPT(FHDFN,"P",X6,0)) Q:$P(X2,"^",2)'[MEAL
"RTN","FHMTK1B",67,0)
 .S FP(X1)=""
"RTN","FHMTK1B",68,0)
 .Q
"RTN","FHMTK1B",69,0)
 Q
"RTN","FHMTK1B",70,0)
SO ; Store Standing Orders
"RTN","FHMTK1B",71,0)
 K ALPHA,SONAME S INDX=1 F K=0:0 S K=$O(^FHPT("ASP",FHDFN,ADM,K)) Q:K<1  D
"RTN","FHMTK1B",72,0)
 .S X=$G(^FHPT(FHDFN,"A",ADM,"SP",K,0)),Z=$P(X,"^",2)
"RTN","FHMTK1B",73,0)
 .S SONAME=$P($G(^FH(118.3,+Z,0)),U,1) I SONAME="" Q
"RTN","FHMTK1B",74,0)
 .I $D(ALPHA(SONAME)) S SONAME=SONAME_INDX,INDX=INDX+1
"RTN","FHMTK1B",75,0)
 .S ALPHA(SONAME)=K_"^"_Z
"RTN","FHMTK1B",76,0)
 .Q
"RTN","FHMTK1B",77,0)
 S SONAME="" F  S SONAME=$O(ALPHA(SONAME)) Q:SONAME=""  D
"RTN","FHMTK1B",78,0)
 .S K=$P(ALPHA(SONAME),U,1)
"RTN","FHMTK1B",79,0)
 .S X=$G(^FHPT(FHDFN,"A",ADM,"SP",K,0)),Z=$P(X,U,2),M=$P(X,U,3) Q:'Z
"RTN","FHMTK1B",80,0)
 .I M[MEAL S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=$S($P(X,"^",8):$P(X,"^",8),1:1)_"    "_$P(^FH(118.3,+Z,0),"^",1) Q
"RTN","FHMTK1B",81,0)
 Q
"RTN","FHMTK1B",82,0)
 ;
"RTN","FHMTK1B",83,0)
SOUT ; Store Outpatient Standing Orders.
"RTN","FHMTK1B",84,0)
 Q:'$G(ADM)
"RTN","FHMTK1B",85,0)
 S FHOPDAT0=$G(^FHPT(FHDFN,"OP",ADM,0)) Q:$P(FHOPDAT0,U,15)="C"
"RTN","FHMTK1B",86,0)
 K ALPHA,SONAME S INDX=1 F K=0:0 S K=$O(^FHPT("ASPO",FHDFN,ADM,K)) Q:K<1  D
"RTN","FHMTK1B",87,0)
 .S X=$G(^FHPT(FHDFN,"OP",ADM,"SP",K,0)),Z=$P(X,"^",2)
"RTN","FHMTK1B",88,0)
 .S SONAME=$P($G(^FH(118.3,+Z,0)),U,1) I SONAME="" Q
"RTN","FHMTK1B",89,0)
 .I $D(ALPHA(SONAME)) S SONAME=SONAME_INDX,INDX=INDX+1
"RTN","FHMTK1B",90,0)
 .S ALPHA(SONAME)=K_"^"_Z
"RTN","FHMTK1B",91,0)
 .Q
"RTN","FHMTK1B",92,0)
 S SONAME="" F  S SONAME=$O(ALPHA(SONAME)) Q:SONAME=""  D
"RTN","FHMTK1B",93,0)
 .S K=$P(ALPHA(SONAME),U,1)
"RTN","FHMTK1B",94,0)
 .S X=$G(^FHPT(FHDFN,"OP",ADM,"SP",K,0)),Z=$P(X,U,2),M=$P(X,U,3) Q:'Z
"RTN","FHMTK1B",95,0)
 .I M[MEAL S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=$S($P(X,"^",8):$P(X,"^",8),1:1)_"    "_$P(^FH(118.3,+Z,0),"^",1) Q
"RTN","FHMTK1B",96,0)
 Q
"RTN","FHMTK1B",97,0)
 ;
"RTN","FHMTK1B",98,0)
BRK ; Break the line if allergies' length > 35 chars
"RTN","FHMTK1B",99,0)
 I J>2 S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=$S($L(ALG)<36:ALG,1:$J("",8)_"OTHERS") Q
"RTN","FHMTK1B",100,0)
 I $L(ALG)<36 S S(NBR)=S(NBR)+1,J=J+1,MM(S(NBR),NBR)=ALG Q
"RTN","FHMTK1B",101,0)
 F L=37:-1:8 Q:$E(ALG,L-1,L)=", "
"RTN","FHMTK1B",102,0)
 I L=8 S L=35 S S(NBR)=S(NBR)+1,J=J+1,MM(S(NBR),NBR)=$E(ALG,1,35)
"RTN","FHMTK1B",103,0)
 E  S S(NBR)=S(NBR)+1,J=J+1,MM(S(NBR),NBR)=$E(ALG,1,L-1)
"RTN","FHMTK1B",104,0)
 S ALG=$J("",8)_$E(ALG,L+1,999)
"RTN","FHMTK1B",105,0)
 G BRK
"RTN","FHNO21")
0^39^B16043749
"RTN","FHNO21",1,0)
FHNO21 ; HISC/REL/NCA - Print Feeding Labels ;8/26/94  12:01 
"RTN","FHNO21",2,0)
 ;;5.5;DIETETICS;**5,8**;Jan 28, 2005;Build 28
"RTN","FHNO21",3,0)
 S DTP=DT\1 D DTP^FH S DTE=DTP_" "_TIM_$S(TIM=10:"AM",1:"PM")
"RTN","FHNO21",4,0)
 S S1=$S(LAB=1:6,1:9),S2=LAB=2*5+33
"RTN","FHNO21",5,0)
 K N F L=0:0 S L=$O(^FH(118,L)) Q:L<1  S Y=^(L,0),N1=$P(Y,"^",1),^TMP($J,"I",$E(N1,1,26)_","_L)=L I '$D(^FH(118,L,"I")) S N(L)=$P(Y,"^",1,2)
"RTN","FHNO21",6,0)
 S LNOD="" F  S LNOD=$O(^TMP($J,"L",LNOD)) Q:LNOD=""  D P2
"RTN","FHNO21",7,0)
 Q
"RTN","FHNO21",8,0)
P2 S PNOD="",N1=0 K C F  S PNOD=$O(^TMP($J,"L",LNOD,PNOD)) Q:PNOD=""  S Y2=^(PNOD) D P3
"RTN","FHNO21",9,0)
 ;I LAB<3 D P5 Q
"RTN","FHNO21",10,0)
 Q
"RTN","FHNO21",11,0)
P3 S N1=N1+1
"RTN","FHNO21",12,0)
 S FHDFN=$P(PNOD,"~",3),WRD=$P(Y2,"^",10)
"RTN","FHNO21",13,0)
 D PATNAME^FHOMUTL I FHPTNM="" Q
"RTN","FHNO21",14,0)
 S ALG="" D ALG^FHCLN
"RTN","FHNO21",15,0)
 S NAM=FHPTNM,IS=$P(Y2,"^",9)
"RTN","FHNO21",16,0)
 ;S NAM=$P(^DPT(DFN,0),"^",1),IS=$P(Y2,"^",9) D PID^FHDPA
"RTN","FHNO21",17,0)
 I LAB>2 D LL Q
"RTN","FHNO21",18,0)
 I $P(FHPAR,"^",4)="Y" G P4
"RTN","FHNO21",19,0)
 W !,$E(NAM,1,S2-$L(WRD)),?(S2+2-$L(WRD)),$E(WRD,3,99),!?$S(LAB=1:3,1:0),FHBID,$S(ALG="":"",1:" *ALG") W:IS'="" ?(S2-22),"*NURSE" W ?(S2-15),DTE S LN=2 I LAB=2 W !! S LN=4
"RTN","FHNO21",20,0)
 F L=1:2:7 S Z=$P(Y2,"^",L) I Z'="" D
"RTN","FHNO21",21,0)
 .S Q=$P(Y2,"^",L+1) S:'Q Q=1
"RTN","FHNO21",22,0)
 .W !,$J(Q,2)," "
"RTN","FHNO21",23,0)
 .W $S($D(N(Z)):$P(N(Z),"^",1),$D(^FH(118,+Z,0)):$P(^(0),"^",1),1:"")
"RTN","FHNO21",24,0)
 .S LN=LN+1 S:'$D(C(Z)) C(Z)=0 S C(Z)=C(Z)+Q
"RTN","FHNO21",25,0)
 .Q
"RTN","FHNO21",26,0)
 I LN<S1 F L=LN+1:1:S1 W !
"RTN","FHNO21",27,0)
 Q
"RTN","FHNO21",28,0)
P4 S ALG="" D ALG^FHCLN
"RTN","FHNO21",29,0)
 F L=1:2:7 S Z=$P(Y2,"^",L) I Z'="",$S($D(N(Z)):$P(N(Z),"^",2),$D(^FH(118,+Z,0)):$P(^(0),"^",2),1:"")'="N" D
"RTN","FHNO21",30,0)
 .S Q=$P(Y2,"^",L+1) S:'Q Q=1
"RTN","FHNO21",31,0)
 .W !,$E(NAM,1,S2-$L(WRD)),?(S2+2-$L(WRD)),$E(WRD,3,99),!,FHBID,$S(ALG="":"",1:" *ALG")
"RTN","FHNO21",32,0)
 .W:IS'="" ?11,"*NURSE"
"RTN","FHNO21",33,0)
 .W ?(S2-15),DTE,!!,$J(Q,2)," "
"RTN","FHNO21",34,0)
 .W $S($D(N(Z)):$P(N(Z),"^",1),$D(^FH(118,+Z,0)):$P(^(0),"^",1),1:""),!!
"RTN","FHNO21",35,0)
 .W:LAB=2 !!!
"RTN","FHNO21",36,0)
 .S:'$D(C(Z)) C(Z)=0 S C(Z)=C(Z)+Q
"RTN","FHNO21",37,0)
 .Q
"RTN","FHNO21",38,0)
 Q
"RTN","FHNO21",39,0)
P5 S Y=$S(XX="S":$P($G(^FH(119.74,D1,0)),"^",1),1:$P($G(^FH(119.6,W1,0)),"^",1))
"RTN","FHNO21",40,0)
 W !?3,"**** INGREDIENTS LIST ****",!!?(33-$L(Y)\2),Y,!?9,DTE,!! S LN=6
"RTN","FHNO21",41,0)
 S A1="" F K=0:0 S A1=$O(^TMP($J,"I",A1)) Q:A1=""  S L=^(A1) I $D(C(L)),C(L) W !,$S($D(N(L)):$P(N(L),"^",1),$D(^FH(118,+L,0)):$P(^(0),"^",1),1:""),?28,$J(C(L),5,0) S LN=LN+1
"RTN","FHNO21",42,0)
P6 W !!?4,"**** PATIENTS = ",N1," ****",! S LN=LN+3
"RTN","FHNO21",43,0)
 S LN=LN#S1 I LN F L=LN+1:1:S1 W !
"RTN","FHNO21",44,0)
 Q
"RTN","FHNO21",45,0)
LL ;
"RTN","FHNO21",46,0)
 D ALG^FHCLN
"RTN","FHNO21",47,0)
 S FHCOL=$S(LAB=3:3,1:2)
"RTN","FHNO21",48,0)
 I LABSTART>1 F FHLABST=1:1:(LABSTART-1)*FHCOL D  S LABSTART=1
"RTN","FHNO21",49,0)
 .I LAB=3 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6)="" D LL3^FHLABEL
"RTN","FHNO21",50,0)
 .I LAB=4 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6,PCL7,PCL8)="" D LL4^FHLABEL
"RTN","FHNO21",51,0)
 .Q
"RTN","FHNO21",52,0)
 S FHTAB=$S(LAB=3:24,1:37)
"RTN","FHNO21",53,0)
 S WRD1=$E(WRD,3,99)
"RTN","FHNO21",54,0)
 S NAM=$E(NAM,1,FHTAB-$L(WRD1)),BIDIS=BID_$S(ALG="":"",1:" *ALG")
"RTN","FHNO21",55,0)
 I IS="N" S BIDIS=BIDIS_" *NURSE"
"RTN","FHNO21",56,0)
 S LNA=NAM_$J(WRD1,FHTAB+1-$L(NAM)),LNB=BIDIS_$J(DTE,FHTAB+1-$L(BIDIS))
"RTN","FHNO21",57,0)
 I $P(FHPAR,"^",4)="Y" D LL2 Q
"RTN","FHNO21",58,0)
 S NUM=0 F XSF=1:2:7 I $P(Y2,U,XSF)'="" S NUM=NUM+1
"RTN","FHNO21",59,0)
 S INDX=0 F XSF=1:2:7 D
"RTN","FHNO21",60,0)
 .S SFPTR=$P(Y2,U,XSF) I SFPTR="" Q
"RTN","FHNO21",61,0)
 .S QTY=$P(Y2,U,XSF+1),SFNM=$P($G(^FH(118,SFPTR,0)),U,1)
"RTN","FHNO21",62,0)
 .S INDX=INDX+1,ZF(INDX)=$J(QTY,2)_" "_SFNM
"RTN","FHNO21",63,0)
 .Q
"RTN","FHNO21",64,0)
 I LAB=3 D
"RTN","FHNO21",65,0)
 .I NUM=1 S (PCL1,PCL2,PCL6)="",PCL3=LNA,PCL4=LNB,PCL5=ZF(1)
"RTN","FHNO21",66,0)
 .I NUM=2 S (PCL1,PCL6)="",PCL2=LNA,PCL3=LNB,PCL4=ZF(1),PCL5=ZF(2)
"RTN","FHNO21",67,0)
 .I NUM=3 S PCL1="",PCL2=LNA,PCL3=LNB,PCL4=ZF(1),PCL5=ZF(2),PCL6=ZF(3)
"RTN","FHNO21",68,0)
 .I NUM=4 S PCL1=LNA,PCL2=LNB,PCL3=ZF(1),PCL4=ZF(2),PCL5=ZF(3),PCL6=ZF(4)
"RTN","FHNO21",69,0)
 .D LL3^FHLABEL
"RTN","FHNO21",70,0)
 I LAB=4 D
"RTN","FHNO21",71,0)
 .I NUM=1 S (PCL1,PCL2,PCL3,PCL7,PCL8)="",PCL4=LNA,PCL5=LNB,PCL6=ZF(1)
"RTN","FHNO21",72,0)
 .I NUM=2 S (PCL1,PCL2,PCL7,PCL8)="",PCL3=LNA,PCL4=LNB,PCL5=ZF(1),PCL6=ZF(2)
"RTN","FHNO21",73,0)
 .I NUM=3 S (PCL1,PCL2,PCL8)="",PCL3=LNA,PCL4=LNB,PCL5=ZF(1),PCL6=ZF(2),PCL7=ZF(3)
"RTN","FHNO21",74,0)
 .I NUM=4 S (PCL1,PCL8)="",PCL2=LNA,PCL3=LNB,PCL4=ZF(1),PCL5=ZF(2),PCL6=ZF(3),PCL7=ZF(4)
"RTN","FHNO21",75,0)
 .D LL4^FHLABEL
"RTN","FHNO21",76,0)
 Q
"RTN","FHNO21",77,0)
LL2 ;
"RTN","FHNO21",78,0)
 F XSF=1:2:7 D
"RTN","FHNO21",79,0)
 .S SFPTR=$P(Y2,U,XSF) I SFPTR="" Q
"RTN","FHNO21",80,0)
 .S QTY=$P(Y2,U,XSF+1),SFNM=$P($G(^FH(118,SFPTR,0)),U,1)
"RTN","FHNO21",81,0)
 .S LNC=$J(QTY,2)_" "_SFNM
"RTN","FHNO21",82,0)
 .I LAB=3 S (PCL1,PCL4,PCL6)="",PCL2=LNA,PCL3=LNB,PCL5=LNC D LL3^FHLABEL
"RTN","FHNO21",83,0)
 .I LAB=4 S (PCL1,PCL2,PCL5,PCL7,PCL8)="",PCL3=LNA,PCL4=LNB,PCL6=LNC D LL4^FHLABEL
"RTN","FHNO21",84,0)
 Q
"RTN","FHNO31")
0^40^B29617742
"RTN","FHNO31",1,0)
FHNO31 ; HISC/REL - Supplemental Feeding Lists (cont) ;4/27/93  11:26 
"RTN","FHNO31",2,0)
 ;;5.5;DIETETICS;**5,8**;Jan 28, 2005;Build 28
"RTN","FHNO31",3,0)
 K C F L=0:0 S L=$O(^FH(118,L)) Q:L<1  I '$D(^FH(118,L,"I")) S C(L)=$P(^(0),"^",1)
"RTN","FHNO31",4,0)
 D NOW^%DTC S (NOW,DTP)=%,DT=%\1 D DTP^FH S X1=DT,X2=-14 D C^%DTC S OLD=+X
"RTN","FHNO31",5,0)
 K ^TMP("FH",$J) S PG=0
"RTN","FHNO31",6,0)
 F KK=0:0 S KK=$O(^FH(119.6,KK)) Q:KK<1  S X=^(KK,0) D F0
"RTN","FHNO31",7,0)
 S NXW="" F KK=0:0 S NXW=$O(^TMP("FH",$J,NXW)) Q:NXW=""  F WRD=0:0 S WRD=$O(^TMP("FH",$J,NXW,WRD)) Q:WRD<1  D F2
"RTN","FHNO31",8,0)
 Q
"RTN","FHNO31",9,0)
 ;
"RTN","FHNO31",10,0)
F0 I XX="S" S K1=$P(X,"^",9) I WRDS,K1'=WRDS Q
"RTN","FHNO31",11,0)
 I XX="W",WRDS,KK'=WRDS Q
"RTN","FHNO31",12,0)
 S K1=$S(XX="W":"",K1<1:99,K1<10:"0"_K1,1:K1),P0=$P(X,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHNO31",13,0)
 S WRDN=$P(^FH(119.6,KK,0),"^",1),^TMP("FH",$J,K1_P0_$E(WRDN,1,26),KK)="" Q
"RTN","FHNO31",14,0)
 ;
"RTN","FHNO31",15,0)
F2 S WRDN=$P(^FH(119.6,WRD,0),"^",1)
"RTN","FHNO31",16,0)
 ;I $O(^FHPT("AW",WRD,0))<1 Q
"RTN","FHNO31",17,0)
 K ^TMP($J) F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",WRD,FHDFN)) Q:FHDFN<1  S ADM=$G(^FHPT("AW",WRD,FHDFN)) D RM
"RTN","FHNO31",18,0)
 ;PROCESS outpatient SF.
"RTN","FHNO31",19,0)
 I '$D(^TMP($J)) D OSF I $D(^TMP($J)) D HDR D OSF1 Q
"RTN","FHNO31",20,0)
 ;
"RTN","FHNO31",21,0)
 Q:'$D(^TMP($J))  D HDR
"RTN","FHNO31",22,0)
 S (NR,RM)="",FHPAR=0 I XX="S",WRDS S FHPAR=$P($G(^FH(119.74,WRDS,0)),"^",5)="Y"
"RTN","FHNO31",23,0)
L2 S NR=$O(^TMP($J,"P",NR)) I NR="" W ! D:FHPAR ING Q
"RTN","FHNO31",24,0)
 S FHDFN=""
"RTN","FHNO31",25,0)
L3 S FHDFN=$O(^TMP($J,"P",NR,FHDFN)) G:FHDFN="" L2 S ADM=$G(^TMP($J,"P",NR,FHDFN)) G:ADM<1 L3 D PATNAME^FHOMUTL G:DFN="" L2 S Y(0)=^DPT(DFN,0) D PID^FHDPA
"RTN","FHNO31",26,0)
 S RM=$S(PRN="R":NR,$D(^DPT(DFN,.101)):^(.101),1:"")
"RTN","FHNO31",27,0)
 S (NO,Y)="" I $D(^FHPT(FHDFN,"A",ADM,0)) S NO=$P(^(0),"^",7),IS=$P(^(0),"^",10)
"RTN","FHNO31",28,0)
 G:'NO L3 S Y=^FHPT(FHDFN,"A",ADM,"SF",NO,0),NM=$P(Y,"^",4),LST=$P(Y,"^",30)\1
"RTN","FHNO31",29,0)
 I IS S IS=$P($G(^FH(119.4,IS,0)),"^",3) S:IS'="N" IS=""
"RTN","FHNO31",30,0)
 I NM S NM=$P(^FH(118.1,NM,0),"^",2) I NM="" S NM=$P(^(0),"^",1)
"RTN","FHNO31",31,0)
 D:$Y>(IOSL-8) HDR W !!,RM,?13,$E($P(Y(0),"^",1),1,24),?38,BID
"RTN","FHNO31",32,0)
 W ?47,$E(NM,1,10) W:IS'="" ?60,"*NURSE" W ?69,$E(LST,4,5),"-",$E(LST,6,7) W:LST<OLD "*"
"RTN","FHNO31",33,0)
 D ALG^FHCLN W !,"ALLERGIES: ",$S(ALG="":"NONE ON FILE",1:ALG)
"RTN","FHNO31",34,0)
 S L=4 F K1=1:1:3 S K=0,N(K1)="" F K2=1:1:4 S Z=$P(Y,U,L+1),Q=$P(Y,U,L+2),L=L+2 I Z'="" S:'Q Q=1 S:N(K1)'="" N(K1)=N(K1)_"; " S N(K1)=N(K1)_Q_" "_$S($D(C(Z)):C(Z),$D(^FH(118,+Z,0)):$P(^(0),"^",1),1:"") I FHPAR D L4
"RTN","FHNO31",35,0)
 F K1=1:1:3 I N(K1)'="" W !?8,$P("10AM; 2PM; 8PM",";",K1),?14,N(K1)
"RTN","FHNO31",36,0)
 G L3
"RTN","FHNO31",37,0)
 ;
"RTN","FHNO31",38,0)
L4 S:'$D(^TMP($J,"I",K1,Z)) ^TMP($J,"I",K1,Z)=0 S ^(Z)=^(Z)+Q Q
"RTN","FHNO31",39,0)
ING Q:'$D(^TMP($J,"I"))  S DTP=DT D DTP^FH W @IOF,!,WRDN," INGREDIENT LIST FOR ",DTP
"RTN","FHNO31",40,0)
 W !!,"--- 10 AM ---",?26,"--- 2 PM ---",?52,"--- 8 PM ---",! S (N(1),N(2),N(3))=.5
"RTN","FHNO31",41,0)
 F L=0:0 Q:(N(1)+N(2)+N(3))=0  W ! F K=1:1:3 S:N(K)>0 N(K)=$O(^TMP($J,"I",K,N(K))) I N(K)>0 S Z=N(K) W ?(K-1*26),$J(^(Z),4,0)," ",$S($D(C(Z)):C(Z),$D(^FH(118,+Z,0)):$P(^(0),"^",1),1:"")
"RTN","FHNO31",42,0)
 W ! Q
"RTN","FHNO31",43,0)
RM ;
"RTN","FHNO31",44,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHNO31",45,0)
 Q:'$D(^DPT(DFN,0))  Q:ADM<1
"RTN","FHNO31",46,0)
 Q:'$D(^FHPT(FHDFN,"A",ADM,0))  S X1=^(0),NO=$P(X1,"^",7) Q:'NO
"RTN","FHNO31",47,0)
 D CHK Q:'NO
"RTN","FHNO31",48,0)
 I PRN="R" S RM=$G(^DPT(DFN,.101))
"RTN","FHNO31",49,0)
 E  S RM=$P($G(^DPT(DFN,0)),"^",1)
"RTN","FHNO31",50,0)
 S:RM="" RM=" "
"RTN","FHNO31",51,0)
 S ^TMP($J,"P",RM,FHDFN)=ADM Q
"RTN","FHNO31",52,0)
 ;
"RTN","FHNO31",53,0)
CHK S FHORD=$P(X1,"^",2),X1=$P(X1,"^",3) G:FHORD<1 C1
"RTN","FHNO31",54,0)
 I X1>1,X1'>NOW G C2
"RTN","FHNO31",55,0)
C0 I '$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)) G C2
"RTN","FHNO31",56,0)
 S X1=$P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",7) I X1'="",X1'="X" S NO=""
"RTN","FHNO31",57,0)
C1 K FHORD,A1,K,X1 Q
"RTN","FHNO31",58,0)
C2 S A1=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"AC",K)) Q:K<1!(K>NOW)  S A1=K
"RTN","FHNO31",59,0)
 G:'A1 C1 S FHORD=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2) G:FHORD'<1 C0
"RTN","FHNO31",60,0)
 K ^FHPT(FHDFN,"A",ADM,"AC",A1) G C2
"RTN","FHNO31",61,0)
 ;
"RTN","FHNO31",62,0)
HDR ; Print Header
"RTN","FHNO31",63,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHNO31",64,0)
 W !?10,"W A R D   S U P P L E M E N T A L   F E E D I N G   L I S T",?72,"Page ",PG
"RTN","FHNO31",65,0)
 W !!,"Ward: ",WRDN,?61,DTP
"RTN","FHNO31",66,0)
 W !!,"ROOM",?13,"PATIENT",?39,"ID#     SUPP MENU",?60,"ISOLAT",?69,"REVIEW" Q
"RTN","FHNO31",67,0)
 ;
"RTN","FHNO31",68,0)
OSF ;outpatient SFs
"RTN","FHNO31",69,0)
 F FHDFN=0:0 S FHDFN=$O(^FHPT("RM",DT,FHDFN)) Q:FHDFN'>0  F ADM=0:0 S ADM=$O(^FHPT("RM",DT,FHDFN,ADM)) Q:ADM'>0  D
"RTN","FHNO31",70,0)
 .S X1=$G(^FHPT(FHDFN,"OP",ADM,0)),FHNO=$P($G(^FHPT(FHDFN,"OP",ADM,"SF",0)),U,3) Q:'$G(FHNO)
"RTN","FHNO31",71,0)
 .S FHMEAL=$P(X1,U,4),FHOWARD=$P(X1,U,3)
"RTN","FHNO31",72,0)
 .I (WRD'=FHOWARD)!(FHMEAL="") Q
"RTN","FHNO31",73,0)
 .S FHSFDAT=""
"RTN","FHNO31",74,0)
 .I $D(^FHPT(FHDFN,"OP",ADM,"SF",FHNO,0)) S FHSFDAT=^(0)
"RTN","FHNO31",75,0)
 .Q:$P(FHSFDAT,U,32)
"RTN","FHNO31",76,0)
 .S RM=$S(FHMEAL="N":2,FHMEAL="E":3,1:1)
"RTN","FHNO31",77,0)
 .I $G(FHOWARD),($G(^FH(119.6,FHOWARD,0))) S WRDN=$P($G(^FH(119.6,FHOWARD,0)),U,1)
"RTN","FHNO31",78,0)
 .S P1=$S(FHMEAL="N":13,FHMEAL="E":21,1:5)
"RTN","FHNO31",79,0)
 .D PATNAME^FHOMUTL
"RTN","FHNO31",80,0)
 .S RM="",RMIEN=$P(X1,U,18) I $G(RMIEN),$D(^DG(405.4,RMIEN,0)) S RM=$E($P(^DG(405.4,RMIEN,0),U,1),1,10)
"RTN","FHNO31",81,0)
 .S:RM="" RM=" "
"RTN","FHNO31",82,0)
 .I PRN="A" S ^TMP($J,"P",FHPTNM,RM,ADM)=FHDFN
"RTN","FHNO31",83,0)
 .I PRN="R" S ^TMP($J,"P",RM,FHPTNM,ADM)=FHDFN
"RTN","FHNO31",84,0)
 .;S ^TMP($J,"P",FHPTNM,RM,ADM)=FHDFN
"RTN","FHNO31",85,0)
 Q
"RTN","FHNO31",86,0)
 ;
"RTN","FHNO31",87,0)
OSF1 S FHPTN="",FHPAR=0 I XX="S",WRDS S FHPAR=$P($G(^FH(119.74,WRDS,0)),"^",5)="Y"
"RTN","FHNO31",88,0)
OL2 S FHPTN=$O(^TMP($J,"P",FHPTN)) I FHPTN="" W ! D:FHPAR ING Q
"RTN","FHNO31",89,0)
 S NR="",ADM=0
"RTN","FHNO31",90,0)
 ;
"RTN","FHNO31",91,0)
OL3 S NR=$O(^TMP($J,"P",FHPTN,NR)) G:NR="" OL2
"RTN","FHNO31",92,0)
 S RM=$S(PRN="R":FHPTN,1:NR)
"RTN","FHNO31",93,0)
OL4 S ADM=$O(^TMP($J,"P",FHPTN,NR,ADM)) G:ADM<1 OL3 S FHDFN=^TMP($J,"P",FHPTN,NR,ADM) D PATNAME^FHOMUTL
"RTN","FHNO31",94,0)
 S (NO,Y,IS)="" I $D(^FHPT(FHDFN,"OP",ADM,0)) S NO=$P(^FHPT(FHDFN,"OP",ADM,"SF",0),"^",3),IS=$P(^FHPT(FHDFN,0),"^",5)
"RTN","FHNO31",95,0)
 G:'NO OL4 S Y=^FHPT(FHDFN,"OP",ADM,"SF",NO,0),NM=$P(Y,"^",4),LST=$P(Y,"^",30)\1
"RTN","FHNO31",96,0)
 I IS S IS=$P($G(^FH(119.4,IS,0)),"^",3) S:IS'="N" IS=""
"RTN","FHNO31",97,0)
 I NM S NM=$P(^FH(118.1,NM,0),"^",2) I NM="" S NM=$P(^(0),"^",1)
"RTN","FHNO31",98,0)
 D:$Y>(IOSL-8) HDR I $D(FHPTSAV),FHPTSAV'=FHPTN W !
"RTN","FHNO31",99,0)
 W !,RM,?13,$E(FHPTNM,1,24),?38,FHBID
"RTN","FHNO31",100,0)
 W ?47,$E(NM,1,10) W:IS'="" ?60,"*NURSE" W ?69,$E(LST,4,5),"-",$E(LST,6,7) W:LST<OLD "*"
"RTN","FHNO31",101,0)
 D ALG^FHCLN W !,"ALLERGIES: ",$S(ALG="":"NONE ON FILE",1:ALG)
"RTN","FHNO31",102,0)
 S L=4 F K1=1:1:3 S K=0,N(K1)="" F K2=1:1:4 S Z=$P(Y,U,L+1),Q=$P(Y,U,L+2),L=L+2 I Z'="" S:'Q Q=1 S:N(K1)'="" N(K1)=N(K1)_"; " S N(K1)=N(K1)_Q_" "_$S($D(C(Z)):C(Z),$D(^FH(118,+Z,0)):$P(^(0),"^",1),1:"") I FHPAR D L4
"RTN","FHNO31",103,0)
 F K1=1:1:3 I N(K1)'="" W !?8,$P("10AM; 2PM; 8PM",";",K1),?14,N(K1)
"RTN","FHNO31",104,0)
 S FHPTSAV=FHPTN
"RTN","FHNO31",105,0)
 G OL4
"RTN","FHNO7")
0^41^B44064186
"RTN","FHNO7",1,0)
FHNO7 ; HISC/REL - List Supplemental Fdgs. ;12/15/94  09:14 
"RTN","FHNO7",2,0)
 ;;5.5;DIETETICS;**5,8**;Jan 28, 2005;Build 28
"RTN","FHNO7",3,0)
 ;patch #5 - add outpatient SF. ;patch #8 - add allergy display
"RTN","FHNO7",4,0)
LIS ; Display Feeding
"RTN","FHNO7",5,0)
 S (FHLOCN,Y)=""
"RTN","FHNO7",6,0)
 I WARD'="" S NAM=$P($G(^DPT(DFN,0)),"^",1) D CUR^FHORD7
"RTN","FHNO7",7,0)
 I WARD="",'$G(ADM) Q
"RTN","FHNO7",8,0)
 I WARD="" D PATNAME^FHOMUTL S NAM=FHPTNM,FHDIET=$P($G(^FHPT(FHDFN,"OP",ADM,0)),U,2) D
"RTN","FHNO7",9,0)
 .S:FHDIET Y=$P($G(^FH(111,FHDIET,0)),U,7) I 'FHDIET S FHRNUM=ADM D DIETPAT^FHOMRR1 S Y=FHDIETP
"RTN","FHNO7",10,0)
 .S FHLOC=$P($G(^FHPT(FHDFN,"OP",ADM,0)),U,3) S:$G(FHLOC) FHLOCN=$P($G(^FH(119.6,FHLOC,0)),U,1)
"RTN","FHNO7",11,0)
 W:$E(IOST,1,2)="C-" @IOF W !!,NAM,"  " W:WARD'="" "( ",WARD," )" W:FHLOCN'="" "( ",FHLOCN," )"
"RTN","FHNO7",12,0)
 I WARD="",$D(^FHPT(FHDFN,"OP",ADM,0)) S DTP=$P(^FHPT(FHDFN,"OP",ADM,0),U,1) D DTP^FH W ?50,"Outpatient Date: ",DTP
"RTN","FHNO7",13,0)
 W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order")
"RTN","FHNO7",14,0)
 D ALG^FHCLN W !,"   Allergies: ",$S(ALG="":"None on file",1:ALG)
"RTN","FHNO7",15,0)
 I WARD'="" S NO=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",7),Y=$S('NO:"",1:$G(^FHPT(FHDFN,"A",ADM,"SF",NO,0)))
"RTN","FHNO7",16,0)
 I WARD=""  S NO=$P($G(^FHPT(FHDFN,"OP",ADM,"SF",0)),"^",3),Y=$S('NO:"",1:$G(^FHPT(FHDFN,"OP",ADM,"SF",NO,0))) I $P(Y,"^",32)'="" S (NO,Y)=""
"RTN","FHNO7",17,0)
 I WARD="" W:$D(FHMEAL) ?50,"MEAL: ",$S(FHMEAL="B":"Breakfast",FHMEAL="N":"Noon",1:"Evening")
"RTN","FHNO7",18,0)
L1 ; Display SF Order
"RTN","FHNO7",19,0)
 I '$D(WARD) S WARD=""
"RTN","FHNO7",20,0)
 S NM=$P(Y,"^",4) W !,"Feeding Menu: ",$S('NM:"None",1:$P(^FH(118.1,NM,0),"^",1)) Q:'NO  S DTP=$P(Y,"^",30) D DTP^FH W ?50,"Reviewed: ",DTP
"RTN","FHNO7",21,0)
 I WARD'="" W !!,"10AM",?26,"2PM",?52,"8PM",!,"-----------------------   -----------------------   -----------------------"
"RTN","FHNO7",22,0)
 I WARD="",$D(FHMEAL),FHMEAL="B" W !!,"10AM",!,"----------------------------------------------------------------------------"
"RTN","FHNO7",23,0)
 I WARD="",$D(FHMEAL),FHMEAL="N" W !!,"2PM",!,"-----------------------------------------------------------------------------"
"RTN","FHNO7",24,0)
 I WARD="",$D(FHMEAL),FHMEAL="E" W !!,"8PM",!,"-----------------------------------------------------------------------------"
"RTN","FHNO7",25,0)
 K N F K1=1:1:3 F K2=1:1:4 S N(K1,K2)=""
"RTN","FHNO7",26,0)
 S L=4 F K1=1:1:3 S K=0 F K2=1:1:4 S Z=$P(Y,"^",L+1),Q=$P(Y,"^",L+2),L=L+2 I Z'="" S:'Q Q=1 S K=K+1,N(K1,K)=$J(Q,2)_" "_$P($G(^FH(118,Z,0)),"^",1)
"RTN","FHNO7",27,0)
 I WARD'="" F K2=1:1:4 W !,N(1,K2),?26,N(2,K2),?52,N(3,K2)
"RTN","FHNO7",28,0)
 I WARD="",$D(FHMEAL) F K2=1:1:4 W !,$S(FHMEAL="B":N(1,K2),FHMEAL="N":N(2,K2),1:N(3,K2))
"RTN","FHNO7",29,0)
 W:$P(Y,"^",34)'="" !!,"Diet Pattern Associated: ",$S($P(Y,"^",34)="Y":"YES",1:"NO")
"RTN","FHNO7",30,0)
 Q
"RTN","FHNO7",31,0)
EN2 ; Supplemental Feeding Inquiry
"RTN","FHNO7",32,0)
 K FHSFLG,FHDFN,FHPTNM,FHMEAL,ADM,NO,Y,X
"RTN","FHNO7",33,0)
 S FHALL=1 D ^FHOMDPA G:'FHDFN KIL
"RTN","FHNO7",34,0)
 S WARD="" I $G(DFN)'="" S WARD=$G(^DPT(DFN,.1)) I WARD'="" D LIS G EN2
"RTN","FHNO7",35,0)
 I WARD="" D SF
"RTN","FHNO7",36,0)
 I '$G(FHSFLG) W !,"NO OUTPATIENT DATA ON FILE for today's date and the future!!" G EN2
"RTN","FHNO7",37,0)
 D SF0
"RTN","FHNO7",38,0)
 D:$G(ADM) LIS G EN2
"RTN","FHNO7",39,0)
 ;
"RTN","FHNO7",40,0)
SF ;LIST outpatient SF
"RTN","FHNO7",41,0)
 W @IOF,!,"Outpatient Recurring Meals... "
"RTN","FHNO7",42,0)
 S FHQ=0
"RTN","FHNO7",43,0)
 F FHI=DT-1:0 S FHI=$O(^FHPT("RM",FHI)) Q:FHI'>0!FHQ  F FHJ=0:0 S FHJ=$O(^FHPT("RM",FHI,FHDFN,FHJ)) Q:FHJ'>0!FHQ  I ($P($G(^FHPT(FHDFN,"OP",FHJ,0)),U,15)'="C") D
"RTN","FHNO7",44,0)
 .S FHDA15=$G(^FHPT(FHDFN,"OP",FHJ,0))
"RTN","FHNO7",45,0)
 .S FHMEAL=$P(FHDA15,U,4),FHLOC=$P(FHDA15,U,3),FHLOCN=$P($G(^FH(119.6,FHLOC,0)),U,1),FHMEAL=$S(FHMEAL="B":"Break",FHMEAL="N":"Noon",1:"Even"),FH11=FHMEAL_"  "_FHLOCN
"RTN","FHNO7",46,0)
 .S Y=$P(FHDA15,U,1) X ^DD("DD") S DTP=Y
"RTN","FHNO7",47,0)
 .S (FHCOFLG,FHDATL,FHSF)=0
"RTN","FHNO7",48,0)
 .I $Y>(IOSL-5) K DIR S DIR(0)="E",DIR("A")="Enter RETURN to Continue or '^' to Quit Listing"  D ^DIR W:Y @IOF I 'Y S FHQ=1 Q
"RTN","FHNO7",49,0)
 .S FHSFLG=1
"RTN","FHNO7",50,0)
 .W !,DTP,?12,FH11
"RTN","FHNO7",51,0)
 .S FHDATL=$L(DTP)+13+$L(FH11)
"RTN","FHNO7",52,0)
 .S:$D(^FHPT(FHDFN,"OP",FHJ,"SF",0)) FHSF=$P(^FHPT(FHDFN,"OP",FHJ,"SF",0),U,3)
"RTN","FHNO7",53,0)
 .Q:'$G(FHSF)
"RTN","FHNO7",54,0)
 .S FHDA15SF=$G(^FHPT(FHDFN,"OP",FHJ,"SF",FHSF,0))
"RTN","FHNO7",55,0)
 .Q:$P(FHDA15SF,U,32)
"RTN","FHNO7",56,0)
 .S FHDASFNM=$P($G(^FH(118.1,$P(FHDA15SF,U,4),0)),U,1)
"RTN","FHNO7",57,0)
 .W ?40," (",FHDASFNM,")"
"RTN","FHNO7",58,0)
 W !
"RTN","FHNO7",59,0)
 Q
"RTN","FHNO7",60,0)
 ;
"RTN","FHNO7",61,0)
 ;K DIC
"RTN","FHNO7",62,0)
 ;S DIC("S")="I $P(^FHPT(FHDFN,""OP"",+Y,0),U,1)>(DT-1),($P(^(0),U,15)'=""C"")"
"RTN","FHNO7",63,0)
 ;S DIC("W")="S FHMEAL=$P(^(0),U,4),FHLOC=$P(^(0),U,3),FHLOCN=$P($G(^FH(119.6,FHLOC,0)),U,1),FHMEAL=$S(FHMEAL=""B"":""Break"",FHMEAL=""N"":""Noon"",1:""Even""),FH11=FHMEAL_""  ""_FHLOCN D EN^DDIOL(FH11,"""",""?3"")"
"RTN","FHNO7",64,0)
 ;S DIC="^FHPT(FHDFN,""OP"",",DIC(0)="Q",DA=FHDFN,X="??" D ^DIC
"RTN","FHNO7",65,0)
SF0 ;ask for outpatient SF.
"RTN","FHNO7",66,0)
 K DIC S DIC(0)="AEQM"
"RTN","FHNO7",67,0)
 S DIC("W")="S FHMEAL=$P(^(0),U,4),FHLOC=$P(^(0),U,3),FHLOCN=$P($G(^FH(119.6,FHLOC,0)),U,1),FHMEAL=$S(FHMEAL=""B"":""Break"",FHMEAL=""N"":""Noon"",1:""Even""),FH11=FHMEAL_""  ""_FHLOCN D EN^DDIOL(FH11,"""",""?3"")"
"RTN","FHNO7",68,0)
 S DIC("S")="I $P(^FHPT(FHDFN,""OP"",+Y,0),U,1)>(DT-1),($P(^(0),U,15)'=""C"")"
"RTN","FHNO7",69,0)
 S DIC="^FHPT(FHDFN,""OP"","
"RTN","FHNO7",70,0)
 S DIC("?")="Select a Date, '^' to exit"
"RTN","FHNO7",71,0)
 S DIC("A")="Select the Outpatient Date :" D ^DIC K DIC Q:(Y'>0)!$D(DTOUT)
"RTN","FHNO7",72,0)
 S ADM=+Y
"RTN","FHNO7",73,0)
 S FHMEAL=$P($G(^FHPT(FHDFN,"OP",ADM,0)),U,4)
"RTN","FHNO7",74,0)
 Q
"RTN","FHNO7",75,0)
 ;
"RTN","FHNO7",76,0)
OIS ;Outpatient Individualized SF
"RTN","FHNO7",77,0)
 Q:'NM
"RTN","FHNO7",78,0)
 I '$D(FHX) S FHX="ALL"
"RTN","FHNO7",79,0)
 I (FHX="ALL")!($L(FHX)=3) S FHIDI="BNE"
"RTN","FHNO7",80,0)
 I $L(FHX)=2 S FHIDI=$S(FHX="NB":"BN",FHX="EB":"BE",FHX="EN":"NE",1:FHX)
"RTN","FHNO7",81,0)
 I $L(FHX)=1 S FHIDI=FHX
"RTN","FHNO7",82,0)
 F FHII=1,2,3 S FHMEAL=$E(FHIDI,FHII) Q:FHII'>0!(FHMEAL="")  D G0
"RTN","FHNO7",83,0)
 D G6
"RTN","FHNO7",84,0)
 Q
"RTN","FHNO7",85,0)
G0 ;process each meals for individualized SF.
"RTN","FHNO7",86,0)
 S T1=$S(FHMEAL="B":"10am",FHMEAL="N":"2pm",1:"8pm")
"RTN","FHNO7",87,0)
 S KK=$S(FHMEAL="B":1,FHMEAL="N":5,1:9)
"RTN","FHNO7",88,0)
 ;I NM'=1 D CAN^FHNO5,ADD^FHNO5
"RTN","FHNO7",89,0)
 S DIC="^FH(118,",DIC(0)="EQM",DIC("S")="I $P(^(0),U,3)'=""Y"""
"RTN","FHNO7",90,0)
 ;
"RTN","FHNO7",91,0)
G1 G:KK>12 G5
"RTN","FHNO7",92,0)
 I ((WARD="")&(FHMEAL="B")&(KK>4))!((WARD="")&(FHMEAL="N")&(KK>8)) G G5
"RTN","FHNO7",93,0)
 ;I WARD'="" S T1=$P("10am^2pm^8pm","^",KK-1\4+1)
"RTN","FHNO7",94,0)
 S T2="#"_(KK-1#4+1),P1=KK*2+3
"RTN","FHNO7",95,0)
 S DIC("A")=T1_" Feeding "_T2_": "
"RTN","FHNO7",96,0)
 S OLD=$P(PNN,"^",P1) I OLD S DIC("A")=DIC("A")_$P(^FH(118,+OLD,0),"^",1)_"// "
"RTN","FHNO7",97,0)
 ;
"RTN","FHNO7",98,0)
G2 W !!,DIC("A") R X:DTIME G:'$T!(X["^") G5
"RTN","FHNO7",99,0)
 I X="" G:OLD G3 S KK=$S(KK<5:5,KK<9:9,1:13) G G1
"RTN","FHNO7",100,0)
 I OLD,X="@" S $P(PNN,"^",P1)="",$P(PNN,"^",P1+1)="" S KK=KK+1 G G1
"RTN","FHNO7",101,0)
 D ^DIC G:Y<1 G2 S Y=+Y,K1=$S(KK<5:1,KK<9:5,1:9)
"RTN","FHNO7",102,0)
 F L=K1:1:K1+3 I L'=KK,$P(PNN,"^",L*2+3)=Y W *7," .. DUPLICATE OF EXISTING ITEM!" G G2
"RTN","FHNO7",103,0)
 S:OLD'=Y $P(PNN,"^",P1)=Y
"RTN","FHNO7",104,0)
 ;
"RTN","FHNO7",105,0)
G3 S OLD=$P(PNN,"^",P1+1)
"RTN","FHNO7",106,0)
 ;
"RTN","FHNO7",107,0)
G4 W !,T1," ",T2," Qty: ",$S(OLD="":1,1:OLD),"// " R X:DTIME G:'$T!(X["^") G5
"RTN","FHNO7",108,0)
 S:X="@" X=0 I X="" S:OLD="" $P(PNN,"^",P1+1)=1 S KK=KK+1 G G1
"RTN","FHNO7",109,0)
 I X'?1N.N!(X>20) W *7," ??" S X="?"
"RTN","FHNO7",110,0)
 I X["?" W !?5,"Enter a whole number between 1 and 20" G G4
"RTN","FHNO7",111,0)
 I 'X S $P(PNN,"^",P1)="",$P(PNN,"^",P1+1)="" S KK=KK+1 G G1
"RTN","FHNO7",112,0)
 S $P(PNN,"^",P1+1)=X,KK=KK+1 G G1
"RTN","FHNO7",113,0)
 ;
"RTN","FHNO7",114,0)
G5 S KK=3,X="" F T1=0:1:2 S P1=T1*8-1 F T2=1:1:4 S KK=KK+2 I $P(PNN,"^",KK) S P1=P1+2,$P(X,"^",P1,P1+1)=$P(PNN,"^",KK,KK+1)
"RTN","FHNO7",115,0)
 ;I X="" D CAN^FHNO5 Q
"RTN","FHNO7",116,0)
 Q
"RTN","FHNO7",117,0)
 ;
"RTN","FHNO7",118,0)
G6 S P1=$P(PNN,"^",29) S:P1="" P1="D" W !!,"Dietary or Therapeutic? ",P1,"// " R Y:DTIME S:'$T!("^"[Y) Y=P1
"RTN","FHNO7",119,0)
 S:$P("dietary",Y,1)="" Y="D" S:$P("therapeutic",Y,1)="" Y="T"
"RTN","FHNO7",120,0)
 I $P("DIETARY",Y,1)'="",$P("THERAPEUTIC",Y,1)'="" W *7,!?5," Answer D for Dietary use or T for Therapeutic use" G G6
"RTN","FHNO7",121,0)
 S $P(X,"^",25)=$E(Y,1),PNN=$P(PNN,"^",1,4)_"^"_X
"RTN","FHNO7",122,0)
 ;G:$P(PNO,"^",5,29)=X UPD^FHNO5 D CAN^FHNO5
"RTN","FHNO7",123,0)
 S FHPNNSV=PNN
"RTN","FHNO7",124,0)
 S FHIDFLG=1
"RTN","FHNO7",125,0)
 Q
"RTN","FHNO7",126,0)
 ;
"RTN","FHNO7",127,0)
CPRSF ;check previous SF
"RTN","FHNO7",128,0)
 K PNN
"RTN","FHNO7",129,0)
 S (FHDAT,FHSF)=""
"RTN","FHNO7",130,0)
CPRS1 I FHSF="" S FHSF=$O(^FHPT(FHDFN,"OP",999999999),-1)
"RTN","FHNO7",131,0)
 E  S FHSF=$O(^FHPT(FHDFN,"OP",FHSF),-1)
"RTN","FHNO7",132,0)
 Q:'$G(FHSF)
"RTN","FHNO7",133,0)
 S FHDAT=$G(^FHPT(FHDFN,"OP",FHSF,0)),FHPRML=$P(FHDAT,U,4),FHPRCN=$P(FHDAT,U,15),FHLOCN=$P(FHDAT,U,3)
"RTN","FHNO7",134,0)
 I (FHPRML'=FHMEAL)!(FHPRCN="C")!'$D(^FHPT(FHDFN,"OP",FHSF,"SF",0)) G CPRS1
"RTN","FHNO7",135,0)
 S FHI=$P($G(^FHPT(FHDFN,"OP",FHSF,"SF",0)),U,3) Q:FHI'>0
"RTN","FHNO7",136,0)
 S PNN=$G(^FHPT(FHDFN,"OP",FHSF,"SF",FHI,0)),FHSFCX=$P(PNN,U,32)
"RTN","FHNO7",137,0)
 I $G(FHSFCX) K PNN G CPRS1
"RTN","FHNO7",138,0)
 I $P(PNN,U,34)="Y" K PNN Q
"RTN","FHNO7",139,0)
 S $P(PNN,U,3)=DUZ,FHNMSAV=$P(PNN,U,4)
"RTN","FHNO7",140,0)
 Q
"RTN","FHNO7",141,0)
PPRSF ;PROCESS previous SF
"RTN","FHNO7",142,0)
 Q:'$D(PNN)
"RTN","FHNO7",143,0)
 D NOW^%DTC S NOW=%
"RTN","FHNO7",144,0)
 D ADDOUT^FHNO5
"RTN","FHNO7",145,0)
 Q
"RTN","FHNO7",146,0)
SFEVNT ;
"RTN","FHNO7",147,0)
 S FHDTC=0
"RTN","FHNO7",148,0)
 S FHLOCN="" I $D(FHLOC),$G(FHLOC),$D(^FH(119.6,FHLOC,0)) S FHLOCN=$P(^(0),U,1)
"RTN","FHNO7",149,0)
 S FHDTC=FHDTC+1,DTP=FHOSTDT D DTP^FH S:FHDTC=1 FHDTP=DTP
"RTN","FHNO7",150,0)
 S DTP=$P(ENDT,".",1)  D DTP^FH
"RTN","FHNO7",151,0)
 I DTP'=FHDTP S FHDTP=FHDTP_" to "_DTP
"RTN","FHNO7",152,0)
 I FHADSFF=1 S FHACT="O",FHTXT="Outpatient Supplemental Feeding: "_FHSFMEN_" ("_FHMEAL_") , "_FHLOCN_", "_FHDTP D OPFILE^FHORX
"RTN","FHNO7",153,0)
 Q
"RTN","FHNO7",154,0)
 ;
"RTN","FHNO7",155,0)
KIL G KILL^XUSCLEAN
"RTN","FHOMRC1")
0^14^B12945292
"RTN","FHOMRC1",1,0)
FHOMRC1 ;Hines OIFO/RTK RECURRING MEALS CANCEL MEAL  ;2/10/03  15:05
"RTN","FHOMRC1",2,0)
 ;;5.5;DIETETICS;**2,8**;Jan 28, 2005;Build 28
"RTN","FHOMRC1",3,0)
 ;
"RTN","FHOMRC1",4,0)
CRM ; Cancel entire recurring meal
"RTN","FHOMRC1",5,0)
 D GETRM Q:FHFIND=0  Q:$G(NUM)<1
"RTN","FHOMRC1",6,0)
CRM1 W ! K DIR S DIR("A")="Cancel which order (or ALL)?",DIR(0)="FO^1:80"
"RTN","FHOMRC1",7,0)
 D ^DIR
"RTN","FHOMRC1",8,0)
 Q:$D(DIRUT)  S FHNUM=Y D RANGE^FHOMUTL I FHCLST="" D CRM1 Q
"RTN","FHOMRC1",9,0)
 W ! K DIR S DIR("A")="Are you sure? ",DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHOMRC1",10,0)
 I Y=0!($D(DIRUT)) D END Q
"RTN","FHOMRC1",11,0)
 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHRNUM=$P(FHLIST(FHC),U,1) D CANRM,CNRM100^FHOMRC2
"RTN","FHOMRC1",12,0)
 W "  ... done" D END Q
"RTN","FHOMRC1",13,0)
CANRM ;
"RTN","FHOMRC1",14,0)
 I $P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,15)="C" Q
"RTN","FHOMRC1",15,0)
 I $G(FHORN)="" S FHORN=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,12)
"RTN","FHOMRC1",16,0)
 K DIE S FHSTAT="C",DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""OP"",",DA=FHRNUM
"RTN","FHOMRC1",17,0)
 S DR="24////^S X=FHSTAT;.05////^S X=FHORN" D ^DIE
"RTN","FHOMRC1",18,0)
 S FHACT="C",FHOPTY="R" D SETAET^FHOMRO2
"RTN","FHOMRC1",19,0)
 Q
"RTN","FHOMRC1",20,0)
CA ; Cancel Additional Order
"RTN","FHOMRC1",21,0)
 D GETRM Q:FHFIND=0  Q:$G(NUM)<1
"RTN","FHOMRC1",22,0)
CA1 W ! K DIR S DIR("A")="Cancel which Additional Order (or ALL)?"
"RTN","FHOMRC1",23,0)
 S DIR(0)="FO^1:80" D ^DIR
"RTN","FHOMRC1",24,0)
 Q:$D(DIRUT)  S FHNUM=Y D RANGE^FHOMUTL I FHCLST="" D CA1 Q
"RTN","FHOMRC1",25,0)
 W ! K DIR S DIR("A")="Are you sure? ",DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHOMRC1",26,0)
 I Y=0!($D(DIRUT)) D END Q
"RTN","FHOMRC1",27,0)
 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHRNUM=$P(FHLIST(FHC),U,1) D CANAO,CNAO100^FHOMRC2
"RTN","FHOMRC1",28,0)
 W "  ... done" D END Q
"RTN","FHOMRC1",29,0)
CANAO ;
"RTN","FHOMRC1",30,0)
 I '$D(^FHPT(FHDFN,"OP",FHRNUM,1)) Q
"RTN","FHOMRC1",31,0)
 I $P($G(^FHPT(FHDFN,"OP",FHRNUM,1)),U,5)="C" Q
"RTN","FHOMRC1",32,0)
 I $G(FHORN)="" S FHORN=$P($G(^FHPT(FHDFN,"OP",FHRNUM,1)),U,4)
"RTN","FHOMRC1",33,0)
 K DIE S FHSTAT="C",DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""OP"",",DA=FHRNUM
"RTN","FHOMRC1",34,0)
 S DR="13.6////^S X=FHSTAT;13.5////^S X=FHORN" D ^DIE
"RTN","FHOMRC1",35,0)
 S FHACT="C",FHOPTY="A" D SETAET^FHOMRO2 S FHORN=""
"RTN","FHOMRC1",36,0)
 Q
"RTN","FHOMRC1",37,0)
CE ; Cancel Early/Late Tray
"RTN","FHOMRC1",38,0)
 D GETRM Q:FHFIND=0  Q:$G(NUM)<1
"RTN","FHOMRC1",39,0)
CE1 W ! K DIR S DIR("A")="Cancel which Early/Late Tray (or ALL)?"
"RTN","FHOMRC1",40,0)
 S DIR(0)="FO^1:80" D ^DIR
"RTN","FHOMRC1",41,0)
 Q:$D(DIRUT)  S FHNUM=Y D RANGE^FHOMUTL I FHCLST="" D CE1 Q
"RTN","FHOMRC1",42,0)
 W ! K DIR S DIR("A")="Are you sure? ",DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHOMRC1",43,0)
 I Y=0!($D(DIRUT)) D END Q
"RTN","FHOMRC1",44,0)
 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHRNUM=$P(FHLIST(FHC),U,1) D CANEL,CNEL100^FHOMRC2
"RTN","FHOMRC1",45,0)
 W "  ... done" D END Q
"RTN","FHOMRC1",46,0)
CANEL ;
"RTN","FHOMRC1",47,0)
 I '$D(^FHPT(FHDFN,"OP",FHRNUM,2)) Q
"RTN","FHOMRC1",48,0)
 I $P($G(^FHPT(FHDFN,"OP",FHRNUM,2)),U,6)="C" Q
"RTN","FHOMRC1",49,0)
 I $G(FHORN)="" S FHORN=$P($G(^FHPT(FHDFN,"OP",FHRNUM,2)),U,5)
"RTN","FHOMRC1",50,0)
 K DIE S FHSTAT="C",DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""OP"",",DA=FHRNUM
"RTN","FHOMRC1",51,0)
 S DR="17.6////^S X=FHSTAT;17.5////^S X=FHORN" D ^DIE
"RTN","FHOMRC1",52,0)
 S FHACT="C",FHOPTY="E" D SETAET^FHOMRO2 S FHORN=""
"RTN","FHOMRC1",53,0)
 Q
"RTN","FHOMRC1",54,0)
CT ; Cancel Tubefeeding
"RTN","FHOMRC1",55,0)
 D GETRM Q:FHFIND=0  Q:$G(NUM)<1
"RTN","FHOMRC1",56,0)
CT1 W ! K DIR S DIR("A")="Cancel which Tubefeeding (or ALL)?"
"RTN","FHOMRC1",57,0)
 S DIR(0)="FO^1:80" D ^DIR
"RTN","FHOMRC1",58,0)
 Q:$D(DIRUT)  S FHNUM=Y D RANGE^FHOMUTL I FHCLST="" D CT1 Q
"RTN","FHOMRC1",59,0)
 W ! K DIR S DIR("A")="Are you sure? ",DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHOMRC1",60,0)
 I Y=0!($D(DIRUT)) D END Q
"RTN","FHOMRC1",61,0)
 F A=1:1:NUM S FHC=$P(FHCLST,",",A) Q:FHC=""  S FHRNUM=$P(FHLIST(FHC),U,1) D CANTF,CNTF100^FHOMRC2
"RTN","FHOMRC1",62,0)
 W "  ... done" D END Q
"RTN","FHOMRC1",63,0)
CANTF ;
"RTN","FHOMRC1",64,0)
 I '$D(^FHPT(FHDFN,"OP",FHRNUM,3)) Q
"RTN","FHOMRC1",65,0)
 I $P($G(^FHPT(FHDFN,"OP",FHRNUM,3)),U,5)="C" Q
"RTN","FHOMRC1",66,0)
 I $G(FHORN)="" S FHORN=$P($G(^FHPT(FHDFN,"OP",FHRNUM,3)),U,4)
"RTN","FHOMRC1",67,0)
 K DIE S FHSTAT="C",DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""OP"",",DA=FHRNUM
"RTN","FHOMRC1",68,0)
 S DR="21.6////^S X=FHSTAT;21.5////^S X=FHORN" D ^DIE
"RTN","FHOMRC1",69,0)
 S FHACT="C",FHOPTY="T" D SETAET^FHOMRO2 S FHORN=""
"RTN","FHOMRC1",70,0)
 Q
"RTN","FHOMRC1",71,0)
GETRM ; Select patient and get recurring meals
"RTN","FHOMRC1",72,0)
 S FHORN="",FHPSDT="N" D GETOPT^FHOMUTL I FHFIND=0 Q
"RTN","FHOMRC1",73,0)
 K NUM D DISP^FHOMRR1 I $G(NUM)="" Q
"RTN","FHOMRC1",74,0)
 K FHPSDT Q
"RTN","FHOMRC1",75,0)
END ;
"RTN","FHOMRC1",76,0)
 K A,FHFIND,FHCLST,FHC,FHCDT,FHPSDT,NUM
"RTN","FHOMRC1",77,0)
 Q
"RTN","FHOMTK2")
0^50^B28087170
"RTN","FHOMTK2",1,0)
FHOMTK2 ;Hines OIFO/RTK OUTPATIENT MEALS BUILD TRAY TICKETS  ;2/11/04  13:45
"RTN","FHOMTK2",2,0)
 ;;5.5;DIETETICS;**5,8**;Jan 28, 2005;Build 28
"RTN","FHOMTK2",3,0)
BLD ; Build Tray Ticket list for a patient
"RTN","FHOMTK2",4,0)
 D GETOPV  ; GET OUTPATIENT VARIABLES - FHDIET, FHLOC, FHLOCNM
"RTN","FHOMTK2",5,0)
 I FHDIET=""!(FHLOC="") W !!,"NO DIET OR NO NUTRITION LOCATION!" Q
"RTN","FHOMTK2",6,0)
 S FHOR=FHDIET F ZZZ=1:1:4 I $L(FHOR,"^")<5 S FHOR=FHOR_"^"
"RTN","FHOMTK2",7,0)
 I FHMEAL'=MEAL Q
"RTN","FHOMTK2",8,0)
 ;  SVC (SERVICE), IS (ISOLATION/PRE), FHD (D/T TICKET LAST PRINTED),
"RTN","FHOMTK2",9,0)
 ;  PD (PRODUCTION DIET), SP (TRAY SERVICE PT), SP1 (CAF SERVICE PT)
"RTN","FHOMTK2",10,0)
 S SVC="T",SX=$E($P($G(^FH(119.6,FHLOC,0)),U,10),1) I "TCD"[SX S SVC=SX
"RTN","FHOMTK2",11,0)
 S SP=$P($G(^FH(119.6,FHLOC,0)),U,5),SP1=$P($G(^FH(119.6,FHLOC,0)),U,6)
"RTN","FHOMTK2",12,0)
 S FHPAR=$P($G(^FH(119.6,FHLOC,0)),U,24)
"RTN","FHOMTK2",13,0)
 S IS=$P($G(^FHPT(FHDFN,0)),U,5)
"RTN","FHOMTK2",14,0)
 I FHPAR'="Y" Q:SVC="C"
"RTN","FHOMTK2",15,0)
 I SVC="C" S:SP'=SP1 SP=SP1 Q:'SP
"RTN","FHOMTK2",16,0)
 I IS S IS=$G(^FH(119.4,+IS,0)) S:IS'="" SVC=SVC_"-"_$P(IS,"^",2)_$P(IS,"^",3)
"RTN","FHOMTK2",17,0)
 I FHOMTYP="R" D
"RTN","FHOMTK2",18,0)
 .S SF=""
"RTN","FHOMTK2",19,0)
 .I $D(^FHPT(FHDFN,"OP",FHRNUM,"SF",0)) S SF=$P(^(0),U,3)
"RTN","FHOMTK2",20,0)
 .I SF,$D(^FHPT(FHDFN,"OP",FHRNUM,"SF",SF,0)),'$P(^(0),U,32) S SVC=SVC_"  "_"SF"_"("_$S($P($G(^FHPT(FHDFN,"OP",FHRNUM,"SF",SF,0)),"^",34)="Y":"M",1:"I")_")"
"RTN","FHOMTK2",21,0)
 K FP,MP,N2,NN,P4,PS
"RTN","FHOMTK2",22,0)
 S DPAT=$O(^FH(111.1,"AB",FHOR,0)) I DPAT="" S FHPDT1=$P(FHDIET,U,1),PD=$P($G(^FH(111,FHPDT1,0)),U,5)  ;set Prod Diet so no INV DIET PATTERN for OP's
"RTN","FHOMTK2",23,0)
 I DPAT S PD=$P($G(^FH(111.1,DPAT,0)),"^",7) I $O(MP(""))="" F X8=0:0 S X8=$O(^FH(111.1,DPAT,MEAL,X8)) Q:X8<1  S Z1=$G(^(X8,0)),MP(+Z1)=$P(Z1,"^",2)
"RTN","FHOMTK2",24,0)
 Q:PD=""  S PD=$P($G(^FH(116.2,PD,0)),"^",2) Q:PD=""  D CHK^FHMTK1B
"RTN","FHOMTK2",25,0)
 I $G(NBR)=3 D PRT^FHMTK1C K MM,PP,S S NBR=0
"RTN","FHOMTK2",26,0)
 S NBR=$G(NBR)+1 ;D PID^FHDPA
"RTN","FHOMTK2",27,0)
 F X6=0:0 S X6=$O(^FHPT(FHDFN,"P","B",X6)) Q:X6<1  F X7=0:0 S X7=$O(^FHPT(FHDFN,"P","B",X6,X7)) Q:X7<1  S PS=$P($G(^FH(115.2,+X6,0)),"^",4) I PS S P4=$G(^FH(114,+PS,0)),P1=$P(P4,"^",7)_"^"_+PS_"^"_$P(P4,"^",1) I +P1 D
"RTN","FHOMTK2",28,0)
 .S CHK="" F  S CHK=$O(^TMP($J,"DEF",MEAL,PD,CHK)) Q:CHK=""  S C1=$G(^(CHK)) I $D(^TMP($J,"FHDEF",MEAL,+C1)),+^TMP($J,"FHDEF",MEAL,+C1)=+P1 D  Q
"RTN","FHOMTK2",29,0)
 ..S C2=$G(^FHPT(FHDFN,"P",+X7,0)) Q:$P(C2,"^",2)'[MEAL
"RTN","FHOMTK2",30,0)
 ..S P2=+CHK,P3=$P(P1,"^",3) S:'$D(N2(P2,+C1,P3)) N2(P2,+C1,P3)=+$P(P1,"^",2)_"^"_P3 Q
"RTN","FHOMTK2",31,0)
 .Q
"RTN","FHOMTK2",32,0)
 S Y0=FHPTNM_" ("_FHBID_")"_"  "_SVC,S(NBR)=0,N1=0
"RTN","FHOMTK2",33,0)
 S N1=N1+1 I $L(Y)<40 S PP(N1,NBR)=Y
"RTN","FHOMTK2",34,0)
 E  S L=$S($L($P(Y,",",1,3))<40:3,1:2) S PP(N1,NBR)=$P(Y,",",1,L),N1=N1+1,PP(N1,NBR)=$E($P(Y,",",L+1,5),2,99)
"RTN","FHOMTK2",35,0)
 S MM(0,NBR)=Y0_"^"_FHLOCNM_"^"_FHRMBNM_"^^^^"_FHMEAL
"RTN","FHOMTK2",36,0)
 D ALG^FHCLN S ALG="ALLGS.: "_$S(ALG="":"NONE ON FILE",1:ALG) S J=0 D BRK^FHMTK1B
"RTN","FHOMTK2",37,0)
 S X8="" F  S X8=$O(^TMP($J,MEAL,PD,X8)) Q:X8=""  S (P4,X1)=^(X8),X1=+X1,P4=$P(P4,"^",3) D
"RTN","FHOMTK2",38,0)
 .S Z1=+$P(X8,"~",2) Q:'$F(P4,"~"_SP_"~")
"RTN","FHOMTK2",39,0)
 .S (MSG,X6)="",CTR=1
"RTN","FHOMTK2",40,0)
 .S QTY="" Q:'$D(MP(Z1))  Q:MP(Z1)=0  S PAD=$E("    ",1,5-$L(MP(Z1))),QTY=MP(Z1)_PAD,CTR=$J(MP(Z1),0,2)
"RTN","FHOMTK2",41,0)
 .S:$G(^TMP($J,"FHPO",$P(X8,"~",3)))="" ^TMP($J,"FHPO",$P(X8,"~",3))=X8 S C2=$G(^TMP($J,"FHPO",$P(X8,"~",3)))
"RTN","FHOMTK2",42,0)
 .I $D(N2(Z1,X1)) D BRD Q
"RTN","FHOMTK2",43,0)
 .I $D(FP(+X1)) D SUB Q
"RTN","FHOMTK2",44,0)
 .S NN(X8)=QTY_$P(X8,"~",3) D CNT
"RTN","FHOMTK2",45,0)
 .I $D(^TMP($J,"DBX",MEAL,PD,+X1)) F LL=0:0 S LL=$O(^TMP($J,"DBX",MEAL,PD,+X1,LL)) Q:LL<1  S NN(X8_" "_LL)=$G(^(LL))
"RTN","FHOMTK2",46,0)
 .Q
"RTN","FHOMTK2",47,0)
 S X8="" F  S X8=$O(NN(X8)) Q:X8=""  D
"RTN","FHOMTK2",48,0)
 .S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=$G(NN(X8)) Q
"RTN","FHOMTK2",49,0)
 S S(NBR)=S(NBR)+1,MM(S(NBR),NBR)=""
"RTN","FHOMTK2",50,0)
 S ADM="" I $G(FHRNUM)'="" S ADM=FHRNUM D SOUT^FHMTK1B ; get op stnd ords
"RTN","FHOMTK2",51,0)
 D NOW^%DTC S (DTP,TIM)=% D DTP^FH S HD=DTP
"RTN","FHOMTK2",52,0)
 S DTP=D1 D DTP^FH S MDT=DTP
"RTN","FHOMTK2",53,0)
 I FHOMTYP="G" Q   ;if not GM set D/T ticket last printed
"RTN","FHOMTK2",54,0)
 I FHOMTYP="R" D NOW^%DTC S $P(^FHPT(FHDFN,"OP",FHRNUM,0),U,13)=%
"RTN","FHOMTK2",55,0)
 I FHOMTYP="S" D NOW^%DTC S $P(^FHPT(FHDFN,"SM",FHOMDT,0),U,10)=%
"RTN","FHOMTK2",56,0)
 Q
"RTN","FHOMTK2",57,0)
SUB ; Get Substitutes
"RTN","FHOMTK2",58,0)
 D ALT^FHMTK1B S:MSG'="" NN(X8)=MSG Q:'X6
"RTN","FHOMTK2",59,0)
 S X1=+X6,XX=Z,Z1=$P(XX,"~",2) I $D(N2(Z1,X1)) D BRD Q
"RTN","FHOMTK2",60,0)
 S:$D(^TMP($J,"FHPO",$P(XX,"~",3))) XX=$G(^TMP($J,"FHPO",$P(XX,"~",3)))
"RTN","FHOMTK2",61,0)
 S NN(XX)=QTY_$P(XX,"~",3)
"RTN","FHOMTK2",62,0)
 S CT=$G(^TMP($J,"CTR",MEAL,XX,SP))
"RTN","FHOMTK2",63,0)
 S CT=CT+CTR,^TMP($J,"CTR",MEAL,XX,SP)=CT D C1
"RTN","FHOMTK2",64,0)
 I SUM S TOT=$G(^TMP($J,"TOT",XX,SP)),TOT=TOT+CTR,^TMP($J,"TOT",XX,SP)=TOT
"RTN","FHOMTK2",65,0)
 I $D(^TMP($J,"DBX",MEAL,PD,+X1)) F LL=0:0 S LL=$O(^TMP($J,"DBX",MEAL,PD,+X1,LL)) Q:LL<1  S NN(XX_" "_LL)=$G(^(LL))
"RTN","FHOMTK2",66,0)
 Q
"RTN","FHOMTK2",67,0)
BRD ; Get Bread/Beverage
"RTN","FHOMTK2",68,0)
 S (X7,XX)="" F  S X7=$O(N2(Z1,X1,X7)) Q:X7=""  D
"RTN","FHOMTK2",69,0)
 .S L1=+N2(Z1,X1,X7),XX=$P(X8,"~",1,2)_"~"_X7
"RTN","FHOMTK2",70,0)
 .I '$D(NN(XX)) S NN(XX)=QTY_X7 S CT=$G(^TMP($J,"CTR",MEAL,XX,SP)),CT=CT+CTR,^TMP($J,"CTR",MEAL,XX,SP)=CT D C1 I SUM S TOT=$G(^TMP($J,"TOT",XX,SP)),TOT=TOT+CTR,^TMP($J,"TOT",XX,SP)=TOT
"RTN","FHOMTK2",71,0)
 .Q
"RTN","FHOMTK2",72,0)
 Q
"RTN","FHOMTK2",73,0)
CNT ; Count Recipe items for Service Points
"RTN","FHOMTK2",74,0)
 S CT=$G(^TMP($J,"CTR",MEAL,C2,SP)),CT=CT+CTR,^TMP($J,"CTR",MEAL,C2,SP)=CT
"RTN","FHOMTK2",75,0)
 I SUM S TOT=$G(^TMP($J,"TOT",C2,SP)),TOT=TOT+CTR,^TMP($J,"TOT",C2,SP)=TOT
"RTN","FHOMTK2",76,0)
C1 ; Setup Service Points Array
"RTN","FHOMTK2",77,0)
 S M1=$G(^TMP($J,"SRP",SP)),M2=$P(M1,"^",1),M3=$P(M1,"^",4)
"RTN","FHOMTK2",78,0)
 S:M3="" M3=$E(M2,1,8) I '$D(DP(MEAL,M3,SP)) S DP(MEAL,M3,SP)=$J(M3,10),LS(MEAL)=LS(MEAL)+10,P(MEAL,M3,SP)=""
"RTN","FHOMTK2",79,0)
 I SUM,'$D(TP(M3,SP)) S TP(M3,SP)=$J(M3,10),SL=SL+10,T1(M3,SP)=""
"RTN","FHOMTK2",80,0)
 Q
"RTN","FHOMTK2",81,0)
GETOPV ; Get outpatient variables
"RTN","FHOMTK2",82,0)
 I FHOMTYP="R" D
"RTN","FHOMTK2",83,0)
 .S FHDIET=$P(FHZN,U,2),FHRMBD=$P(FHZN,U,18)
"RTN","FHOMTK2",84,0)
 .I $P($G(^FH(119.6,FHLOC,1)),U,4)="Y" S FHDIET=$P(FHZN,U,7,11)
"RTN","FHOMTK2",85,0)
 .S FHLOC=$P(FHZN,U,3),FHMEAL=$P(FHZN,U,4),FHD=$P(FHZN,U,13)
"RTN","FHOMTK2",86,0)
 I FHOMTYP="S" D
"RTN","FHOMTK2",87,0)
 .S FHDIET=$P(FHZN,U,4),FHRMBD=$P(FHZN,U,13)
"RTN","FHOMTK2",88,0)
 .S FHLOC=$P(FHZN,U,3),FHMEAL=$P(FHZN,U,9),FHD=$P(FHZN,U,10)
"RTN","FHOMTK2",89,0)
 I FHOMTYP="G" D
"RTN","FHOMTK2",90,0)
 .S FHDIET=$P(FHZN,U,6),FHRMBD=$P(FHZN,U,11)
"RTN","FHOMTK2",91,0)
 .S FHLOC=$P(FHZN,U,5),FHMEAL=$P(FHZN,U,3),FHD=$P(FHZN,U,7)
"RTN","FHOMTK2",92,0)
 I FHDIET=""!(FHLOC="") Q
"RTN","FHOMTK2",93,0)
 S FHLD="" ;no WITHHOLD for outpatients
"RTN","FHOMTK2",94,0)
 S Y="" F A1=1:1:5 S D3=$P(FHDIET,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7) ;set Y = diet text
"RTN","FHOMTK2",95,0)
 D PATNAME^FHOMUTL
"RTN","FHOMTK2",96,0)
 S FHLOCNM=$P($G(^FH(119.6,FHLOC,0)),U,1) ;set location name
"RTN","FHOMTK2",97,0)
 S FHRMBNM=""
"RTN","FHOMTK2",98,0)
 I FHRMBD'="" S FHRMBNM=$P($G(^DG(405.4,FHRMBD,0)),U,1) ;set room-bed nm
"RTN","FHOMTK2",99,0)
 Q
"RTN","FHORC")
0^1^B6083686
"RTN","FHORC",1,0)
FHORC ; HISC/REL - Dietetic Consults ;9/4/96  09:22 ;
"RTN","FHORC",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHORC",3,0)
EN1 ; Order Consult
"RTN","FHORC",4,0)
 S ALL=0 D ^FHDPA G:'DFN KIL G:'FHDFN KIL D ORD G:'$D(DFN) KIL D FIL G KIL
"RTN","FHORC",5,0)
ORD ; Get Order
"RTN","FHORC",6,0)
 W ! F K=0:0 S K=$O(^FH(119.5,K)) Q:K<1  W:'$D(^FH(119.5,K,"I")) !,$P(^(0),"^",1)
"RTN","FHORC",7,0)
R1 W ! K DIC S DIC="^FH(119.5,",DIC(0)="AEQZM" D ^DIC G AB:U[X!$D(DTOUT),R1:Y<1 S REQ=+Y
"RTN","FHORC",8,0)
R2 R !,"Comment: ",COM:DTIME G:'$T!(COM["^") AB I COM'?.ANP W *7," ??" G R2
"RTN","FHORC",9,0)
 I $L(COM)>80!(COM?1"?".E) W *7,!,"Enter 1-80 character comment" G R2
"RTN","FHORC",10,0)
R4 R !,"Ok to Enter Request? Y// ",YN:DTIME G AB:'$T!(YN["^") S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G R4
"RTN","FHORC",11,0)
 G:YN'?1"Y".E AB Q
"RTN","FHORC",12,0)
FIL ; File Order
"RTN","FHORC",13,0)
 L +^FHPT(FHDFN,"A",ADM,"DR",0) S:'$D(^FHPT(FHDFN,"A",ADM,"DR",0)) ^FHPT(FHDFN,"A",ADM,"DR",0)="^115.03^^"
"RTN","FHORC",14,0)
 S DR=$P(^FHPT(FHDFN,"A",ADM,"DR",0),"^",3)+1,$P(^(0),"^",3,4)=DR_"^"_DR L -^FHPT(FHDFN,"A",ADM,"DR",0)
"RTN","FHORC",15,0)
 D NOW^%DTC S NOW=% D CHK
"RTN","FHORC",16,0)
 S ^FHPT(FHDFN,"A",ADM,"DR",DR,0)=NOW_"^"_REQ_"^"_COM_"^^"_XMKK_"^^"_DUZ_"^A"
"RTN","FHORC",17,0)
 S ^FHPT("ADR",NOW,FHDFN,ADM,DR)="",^FHPT("ADRU",XMKK,FHDFN,ADM,DR)=""
"RTN","FHORC",18,0)
 D POST Q
"RTN","FHORC",19,0)
CHK ; Get Clinician
"RTN","FHORC",20,0)
 S WRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8) G:WRD<1 RNO
"RTN","FHORC",21,0)
 G:'$D(^FH(119.6,WRD)) RNO
"RTN","FHORC",22,0)
 S XMKK=$P($G(^FH(119.5,+REQ,0)),"^",6)
"RTN","FHORC",23,0)
 F FHXMKK=0:0 S FHXMKK=$O(^FH(119.6,WRD,2,"B",FHXMKK)) Q:FHXMKK'>0  D
"RTN","FHORC",24,0)
 .S XMY(FHXMKK)=""
"RTN","FHORC",25,0)
 I XMKK<1 S XMKK=$O(XMY("")) G:XMKK<1 RNO
"RTN","FHORC",26,0)
 Q
"RTN","FHORC",27,0)
RNO S XMKK=$O(^XUSEC("FHMGR",0)) S:XMKK<1 XMKK=.5 Q
"RTN","FHORC",28,0)
AB W *7,!!,"Consult entry is TERMINATED - No request entered!"
"RTN","FHORC",29,0)
KIL K %,%H,%I,A,G,I,XMKK,WARD,WRD,ADM,ALL,COM,DA,FHDFN,FHXMKK,DFN,DIC,DR,FHPV,K,NOW,REQ,X,Y,YN Q
"RTN","FHORC",30,0)
POST ; Generate Bulletin
"RTN","FHORC",31,0)
 S XMB="FHDIREQ" I '$D(XMY(XMKK)) S XMY(XMKK)=""
"RTN","FHORC",32,0)
 S XMB(1)=$P(^FH(119.5,REQ,0),"^",1),XMB(2)=$S($D(^DPT(DFN,.101)):^(.101),1:"unknown")
"RTN","FHORC",33,0)
 S XMB(3)=$P(^DPT(DFN,0),"^",1),XMB(4)=WARD,XMB(5)=COM D ^XMB K XMB,XMY,XMM,XMDT Q
"RTN","FHORD1")
0^45^B21560497
"RTN","FHORD1",1,0)
FHORD1 ; HISC/REL/NCA - Diet Order ;3/28/01  10:28
"RTN","FHORD1",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHORD1",3,0)
F0 S ALL=1 D ^FHDPA G:'DFN KIL G:'FHDFN KIL
"RTN","FHORD1",4,0)
 I $G(ADM)="" W *7,!!," NOT CURRENTLY AN INPATIENT" D KIL Q
"RTN","FHORD1",5,0)
 D D0 G:'DFN KIL G:'FHDFN KIL D PROC
"RTN","FHORD1",6,0)
 S DTE="" D ^FHORD1A I FHWF,DTE S (SDT,EDT)=DTE,WKD="",SERV="L" D EL^FHWOR3 D:$D(MSG) MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHORD1",7,0)
 S TF=$P(^FHPT(FHDFN,"A",ADM,0),"^",4) I TF W !!,"An ACTIVE Tubefeeding Order Exists!" S FHD="Y" D DIS^FHORT2,ASK^FHORT2 D:FHD="Y" CAN^FHORT2
"RTN","FHORD1",8,0)
 G F0
"RTN","FHORD1",9,0)
D0 ; Process Diet Order
"RTN","FHORD1",10,0)
 D CUR^FHORD7 W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order")
"RTN","FHORD1",11,0)
 D ALG^FHCLN W !!,"Allergies: ",$S(ALG="":"None on file",1:ALG)
"RTN","FHORD1",12,0)
 I FHORD S COM=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,1)) I COM'="" W !,"Comment: ",COM
"RTN","FHORD1",13,0)
 D NOW^%DTC S NOW=% K %,%H,%I D FUT
"RTN","FHORD1",14,0)
C0 I CT W *7 R !!,"A new order with no expiration date will CANCEL these diets.",!!,"Do you wish to CONTINUE? (Y/N): ",X:DTIME G:'$T!(X="^") AB S:X="" X="^" D TR^FH G:$P("NO",X,1)="" AB I $P("YES",X,1)'="" W *7,"  Answer YES or NO" G C0
"RTN","FHORD1",15,0)
F7 S WRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8),SVC="" I WRD>0 S SVC=$P($G(^FH(119.6,WRD,0)),"^",10)
"RTN","FHORD1",16,0)
 S:SVC="" SVC="T" I $L(SVC)=1 S TYP=SVC G F8
"RTN","FHORD1",17,0)
 S N1=$P(^FHPT(FHDFN,"A",ADM,0),"^",5) S:SVC'[N1 N1=""
"RTN","FHORD1",18,0)
 S X="Tray^Cafeteria^Dining Room" W !!,$P(X,"^",$F("TCD",$E(SVC,1))-1),$S($L(SVC)=2:" or ",1:", "),$P(X,"^",$F("TCD",$E(SVC,2))-1)
"RTN","FHORD1",19,0)
 W:$L(SVC)=3 " or ",$P(X,"^",$F("TCD",$E(SVC,3))-1) W ": ",$S(N1="":$E(SVC,1),1:N1),"// "
"RTN","FHORD1",20,0)
 R X:DTIME G:'$T!(X="^") AB S:X="" X=$S(N1="":$E(SVC,1),1:N1) S X=$E(X,1) D TR^FH
"RTN","FHORD1",21,0)
 I SVC'[X W *7,!,"Enter one of the given type of services." G F7
"RTN","FHORD1",22,0)
 S TYP=X
"RTN","FHORD1",23,0)
 I 'FHORD!(N1="")!(N1=TYP) G F8
"RTN","FHORD1",24,0)
 S N1=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0) I "^^^^"[$P(N1,"^",2,6) G F8
"RTN","FHORD1",25,0)
R1 R !!,"Retain Current Diet? N// ",Y:DTIME G:'$T!(Y="^") AB S:Y="" Y="N" S X=Y D TR^FH S Y=X I $P("YES",Y,1)'="",$P("NO",Y,1)'="" W *7,"  Answer YES or NO" G R1
"RTN","FHORD1",26,0)
 G:Y?1"N".E F8 S FHOR=$P(N1,"^",2,6),(D3,D4)=0,D2=$P(N1,"^",10)
"RTN","FHORD1",27,0)
 S D1=NOW G F10
"RTN","FHORD1",28,0)
F8 K DI S N1=0 G:FHWF=2 F1 R !!,"Order a REGULAR Diet? (Y/N) ",Y:DTIME G:'$T!(Y="^") AB S:Y="" Y="^" S X=Y D TR^FH S Y=X I $P("YES",Y,1)'="",$P("NO",Y,1)'="" W *7,"  Answer YES or NO" G F8
"RTN","FHORD1",29,0)
 G:Y'?1"Y".E F1 S Y(0)=^FH(111,1,0),PREC=$P(Y(0),U,4),DI(PREC)="1^"_Y(0),N1=1 G F5
"RTN","FHORD1",30,0)
F1 W ! K DIC S DIC="^FH(111,",DIC(0)="AEQMZ" S DIC("S")="I '$D(^(""I""))&(Y>1)" D ^DIC K DIC G AB:X[U!$D(DTOUT),F5:X="",F1:Y<1
"RTN","FHORD1",31,0)
 S PREC=$P(Y(0),U,4) I PREC,$D(DI(PREC)) W *7,!!,"This conflicts with ",$P(DI(PREC),"^",2),! G F1
"RTN","FHORD1",32,0)
 S N1=N1+1,DI(PREC)=+Y_"^"_Y(0) G F5:+Y=1,F1:N1<5 W *7,!!,"You have now selected the maximum of 5 Diet Modifications!"
"RTN","FHORD1",33,0)
F5 G:'N1 AB W !!,"You have selected the following Diet:",!
"RTN","FHORD1",34,0)
 S (D3,D4)=0 F D0=0:0 S D0=$O(DI(D0)) Q:D0=""  W !?5,$P(DI(D0),U,2) S:$P(DI(D0),U,4)="Y" D3=1 S:$P(DI(D0),U,7)="Y" D4=1
"RTN","FHORD1",35,0)
F9 G:FHWF=2 F6 R !!,"Is this Correct? Y// ",Y:DTIME G:'$T!(Y="^") AB S:Y="" Y="Y" S X=Y D TR^FH S Y=X
"RTN","FHORD1",36,0)
 I $P("YES",Y,1)'="",$P("NO",Y,1)'="" W *7,!,"  Answer YES to accept diet list; NO to select diets again" G F9
"RTN","FHORD1",37,0)
 I Y'?1"Y".E K DI S N1=0 W !!,"Select new diets ..." G F1
"RTN","FHORD1",38,0)
F6 S COM="" ;R !!,"Comment: ",COM:DTIME G:'$T!(COM["^") AB I COM'?.ANP W *7," ??" G F6
"RTN","FHORD1",39,0)
 I $L(COM)>80!(COM?1"?".E) W *7,!,"Enter any special instructions of up to 80 characters!" G F6
"RTN","FHORD1",40,0)
 D GETD^FHORD71 G:'D1 AB
"RTN","FHORD1",41,0)
 S FHOR="^^^^",FHEVTX="",N1=0 F D0=0:0 S D0=$O(DI(D0)) Q:D0=""  S N1=N1+1,$P(FHOR,U,N1)=+DI(D0),FHEVTX=FHEVTX_", "_$P(DI(D0),U,8)
"RTN","FHORD1",42,0)
 ; [SEE NOIS SDC-0402-62498] S FHDPATT=$O(^FH(111.1,"AB",FHOR,0)) I FHDPATT'="" I $G(^FH(111.1,FHDPATT,"I"))="Y" W !!,"  ** INACTIVE DIET PATTERN! **" G AB
"RTN","FHORD1",43,0)
 I '$O(^FH(111.1,"AB",FHOR,0)),$P($G(^FH(119.9,1,4)),"^",2)="Y" S EVT="M^O^^No Diet Pattern ("_$E(FHEVTX,3,999)_")" D ^FHORX
"RTN","FHORD1",44,0)
F10 S FHLD="" W:FHWF'=2 !!,"... Diet Order Accepted"
"RTN","FHORD1",45,0)
 Q
"RTN","FHORD1",46,0)
PROC ; Process & file order
"RTN","FHORD1",47,0)
 D STR^FHORD7,^FHORDR D:D4 POST^FHORD7 Q
"RTN","FHORD1",48,0)
AB W *7,!!,"Diet Order for this Patient is UNCHANGED -- No order entered!",! S (DFN,FHDFN)="" Q
"RTN","FHORD1",49,0)
KIL ; Final variable kill
"RTN","FHORD1",50,0)
 K %,%H,%I,%T,%DT,A1,A2,ADM,ALL,C,COM,CORD,CT,D0,D1,D2,D3,D4,DA,FHDFN,DFN,DTP,DI,DIC,FHDU,FHD,FHLD,FHOR,FHPAR,FHWF,FHPV,FLG,I,J,K,KK,N1,NOW,FHORD,FHSAV,FHSAV1,FHDAY
"RTN","FHORD1",51,0)
 K FHK,FHK1,FHOE,FHOLD,FHMSG,FHNEW,K1,K2,KK1,LC,M,PREC,SVC,TYP,X,X1,X2,Y,WRD,WARD,TF,QUA,STR,TUN,XMKK,Z Q
"RTN","FHORD1",52,0)
FUT ; List future diets
"RTN","FHORD1",53,0)
 S CT=0,CORD=FHORD F KK=NOW:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1  S FHORD=$P(^(KK,0),"^",2) D T1
"RTN","FHORD1",54,0)
 S FHORD=CORD Q
"RTN","FHORD1",55,0)
T1 Q:'$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))  S DTP=KK D DTP^FH,C2^FHORD7
"RTN","FHORD1",56,0)
 I 'CT W !!,"Future Diet Orders:",!
"RTN","FHORD1",57,0)
 S CT=CT+1 W !?5,DTP,?25,Y Q
"RTN","FHORD13")
0^44^B53521157
"RTN","FHORD13",1,0)
FHORD13 ; HISC/REL/NCA/RVD - Reprint Diet Label ;2/26/96  11:57
"RTN","FHORD13",2,0)
 ;;5.5;DIETETICS;**1,5,8**;Jan 28, 2005;Build 28
"RTN","FHORD13",3,0)
 W @IOF,!!?21,"R E P R I N T   D I E T   L A B E L S"
"RTN","FHORD13",4,0)
F0 R !!,"Reprint by COMMUNICATION OFFICE, PATIENT, LOCATION or ALL? PATIENT// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="P" D TR^FH
"RTN","FHORD13",5,0)
 I $P("COMMUNICATION OFFICE",X,1)'="",$P("PATIENT",X,1)'="",$P("LOCATION",X,1)'="",$P("ALL",X,1)'="" W *7,!!,"  Answer with C, L, P or A" G F0
"RTN","FHORD13",6,0)
 S FHPR=$E(X,1),ALL=0,(FHX1,FHX2)="" G P0:FHPR?1"P",D2:FHPR?1"C",P1:FHPR?1"A"
"RTN","FHORD13",7,0)
W0 K DIC S DIC("A")="Select LOCATION: ",DIC="^FH(119.6,",DIC(0)="AEQM" W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),W0:Y<1 S FHX1=-Y G P1
"RTN","FHORD13",8,0)
D2 K DIC S DIC("A")="Select COMMUNICATION OFFICE: ",DIC="^FH(119.73,",DIC(0)="AEMQ" W ! D ^DIC G KIL:"^"[X!$D(DTOUT),D2:Y<1 S FHX1=-Y G P1
"RTN","FHORD13",9,0)
P0 S FHALL=1 D ^FHOMDPA I '$G(FHDFN),FHX1'="" G P1
"RTN","FHORD13",10,0)
 Q:'FHDFN
"RTN","FHORD13",11,0)
 S ADM="*"
"RTN","FHORD13",12,0)
 I 'DFN,$G(FHDFN) G PPT
"RTN","FHORD13",13,0)
 I $D(^DPT(DFN,.1)) S WARD=$G(^DPT(DFN,.1)) D
"RTN","FHORD13",14,0)
 .I $G(^DPT("CN",WARD,DFN)) S ADM=$G(^DPT("CN",WARD,DFN))
"RTN","FHORD13",15,0)
PPT S FHX1=$G(FHX1)_FHDFN_"^",FHX2=$G(FHX2)_ADM_"^" I $L(FHX1)<231,$L(FHX2)<231 G P0
"RTN","FHORD13",16,0)
 G:FHX1="" KIL
"RTN","FHORD13",17,0)
P1 ;
"RTN","FHORD13",18,0)
 W ! K DIR,LABSTART S DIR(0)="NA^1:10",DIR("A")="If using laser label sheets, what row do you want to begin printing at? ",DIR("B")=1 D ^DIR
"RTN","FHORD13",19,0)
 Q:$D(DIRUT)  S LABSTART=Y
"RTN","FHORD13",20,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LABEL Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORD13",21,0)
 I $D(IO("Q")) S FHPGM="Q1^FHORD13",FHLST="FHX1^FHX2^FHPR^LABSTART" D EN2^FH G KIL
"RTN","FHORD13",22,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHORD13",23,0)
Q1 ; Reprint the Diet Labels
"RTN","FHORD13",24,0)
 S LAB=$P($G(^FH(119.9,1,"D",IOS,0)),"^",2) S:'LAB LAB=1 S S2=LAB=2*5+36 D NOW^%DTC S NOW=%
"RTN","FHORD13",25,0)
 S COUNT=0,LINE=1
"RTN","FHORD13",26,0)
 S DTP=NOW D DTP^FH,^FHDEV G:FHX1>0 Q2
"RTN","FHORD13",27,0)
 S WRD=-FHX1 K ^TMP($J)
"RTN","FHORD13",28,0)
 F K1=0:0 S K1=$O(^FH(119.6,K1)) Q:K1<1  S X=^(K1,0) D F1
"RTN","FHORD13",29,0)
 S RM="" F  S RM=$O(^TMP($J,"DL",RM)) Q:RM=""  F DFN=0:0 S DFN=$O(^TMP($J,"DL",RM,DFN)) Q:DFN<1  S ADM=^(DFN) S FHZ115="P"_DFN D CHECK^FHOMDPA Q:FHDFN=""  D:ADM LST
"RTN","FHORD13",30,0)
 ;process outpatient
"RTN","FHORD13",31,0)
 D OUTP
"RTN","FHORD13",32,0)
 D PROUT
"RTN","FHORD13",33,0)
 I LAB>2 D DPLL^FHLABEL G KIL
"RTN","FHORD13",34,0)
 I LAB<3 F K7=1:1:18 W !
"RTN","FHORD13",35,0)
 G KIL
"RTN","FHORD13",36,0)
 ;
"RTN","FHORD13",37,0)
F1 I FHPR="C" S KK=$P(X,"^",8) I WRD,KK'=WRD Q
"RTN","FHORD13",38,0)
 I FHPR="L" S KK=$P(X,"^",1) I WRD,K1'=WRD Q
"RTN","FHORD13",39,0)
 S P0=$P(X,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHORD13",40,0)
 F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",K1,FHDFN)) Q:FHDFN<1  D
"RTN","FHORD13",41,0)
 .D PATNAME^FHOMUTL Q:DFN=""
"RTN","FHORD13",42,0)
 .S ADM=$G(^FHPT("AW",K1,FHDFN))
"RTN","FHORD13",43,0)
 .S RM=$G(^DPT(DFN,.101))
"RTN","FHORD13",44,0)
 .S:RM="" RM="***"
"RTN","FHORD13",45,0)
 .S RI=$G(^DPT(DFN,.108)) S RE=$S(RI:$O(^FH(119.6,"AR",+RI,K1,0)),1:"")
"RTN","FHORD13",46,0)
 .S R0=$S(RE:$P($G(^FH(119.6,K1,"R",+RE,0)),"^",2),1:"")
"RTN","FHORD13",47,0)
 .S R0=$S(R0<1:99,R0<10:"0"_R0,1:R0)
"RTN","FHORD13",48,0)
 .S ^TMP($J,"DL",P0_"~"_R0_"~"_RM,DFN)=ADM Q
"RTN","FHORD13",49,0)
 Q
"RTN","FHORD13",50,0)
 ;
"RTN","FHORD13",51,0)
Q2 F K7=1:1 S FHDFN=$P(FHX1,"^",K7) Q:FHDFN<1  D PATNAME^FHOMUTL S ADM=$P(FHX2,"^",K7) D:$G(ADM) LST I '$G(ADM) S FHDFNSAV(FHDFN)=FHDFN
"RTN","FHORD13",52,0)
 ;process outpatient
"RTN","FHORD13",53,0)
 D OUTP
"RTN","FHORD13",54,0)
 D PROUT
"RTN","FHORD13",55,0)
 I LAB>2 D DPLL^FHLABEL G KIL
"RTN","FHORD13",56,0)
Q3 I LAB<3 F K7=1:1:18 W !
"RTN","FHORD13",57,0)
 G KIL
"RTN","FHORD13",58,0)
 ;
"RTN","FHORD13",59,0)
LST ;
"RTN","FHORD13",60,0)
 Q:'$D(^FHPT(FHDFN,"A",ADM,0))  S X0=^(0)
"RTN","FHORD13",61,0)
 S FHORD=$P(X0,"^",2),X1=$P(X0,"^",5) Q:FHORD<1
"RTN","FHORD13",62,0)
 S W1=$P(X0,"^",8),W1=$P($G(^FH(119.6,+W1,0)),"^",1),R1=$G(^DPT(DFN,.101))
"RTN","FHORD13",63,0)
 Q:'$D(^DPT(DFN,0))  S Y0=^(0) D PID^FHDPA
"RTN","FHORD13",64,0)
 S W1=$E(W1,1,15),N1=$E($P(Y0,"^",1),1,22)
"RTN","FHORD13",65,0)
 S X=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))
"RTN","FHORD13",66,0)
 S (Y,X1)="" G:X="" L1 S FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7)
"RTN","FHORD13",67,0)
 I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") G:%<1 L1 S Y=$P($E(FHDU,%,999),";",1) G L1
"RTN","FHORD13",68,0)
 F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHORD13",69,0)
 S IS=$P(X0,"^",10),X1=$P(X,"^",8) I IS S IS=^FH(119.4,IS,0),X1=X1_"-"_$P(IS,"^",2)_$P(IS,"^",3)
"RTN","FHORD13",70,0)
 ;
"RTN","FHORD13",71,0)
L1 S ALG="" D ALG^FHCLN
"RTN","FHORD13",72,0)
 I LAB>2 D LL Q
"RTN","FHORD13",73,0)
 W !,$E(N1,1,S2-5-$L(W1)),?(S2-3-$L(W1)),W1,!,BID W @FHIO("EON") W ?(S2-3\2),X1 W @FHIO("EOF") W ?(S2-3-$L(R1)),R1 W @FHIO("EON") I $L(Y)<S2 W:LAB=2 ! W !,$S(ALG="":"",1:"*ALG"),!,Y,!!
"RTN","FHORD13",74,0)
 E  S L=$S($L($P(Y,",",1,3))<S2:3,1:2) W !!,$P(Y,",",1,L) W:LAB=2 ! W !,$E($P(Y,",",L+1,5),2,99),!
"RTN","FHORD13",75,0)
 W @FHIO("EOF") W:LAB=2 ?(S2-20),DTP,!! Q
"RTN","FHORD13",76,0)
 ;
"RTN","FHORD13",77,0)
OUTP ;process outpatient dat
"RTN","FHORD13",78,0)
 S (R1,FHW1SAV,FHFHPSAV)=""
"RTN","FHORD13",79,0)
 I FHPR="L" S FHW1SAV=-FHX1
"RTN","FHORD13",80,0)
 I FHPR="C" S FHFHPSAV=-FHX1
"RTN","FHORD13",81,0)
 S FHD1=DT-.00001,FHD2=DT+.99999
"RTN","FHORD13",82,0)
 ;next recurring
"RTN","FHORD13",83,0)
 F FHK1=FHD1:0 S FHK1=$O(^FHPT("RM",FHK1)) Q:(FHK1'>0)!(FHK1>FHD2)  D
"RTN","FHORD13",84,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("RM",FHK1,FHDFN)) Q:FHDFN'>0  D
"RTN","FHORD13",85,0)
 ..F FHKD=0:0 S FHKD=$O(^FHPT("RM",FHK1,FHDFN,FHKD)) Q:FHKD'>0  D
"RTN","FHORD13",86,0)
 ...S FHKDAT=^FHPT(FHDFN,"OP",FHKD,0)
"RTN","FHORD13",87,0)
 ...S (W1,FHW1)=$P(FHKDAT,U,3)
"RTN","FHORD13",88,0)
 ...S FHDIET=$P(FHKDAT,U,2),FHMEAL=$P(FHKDAT,U,4),FHSTAT=$P(FHKDAT,U,15)
"RTN","FHORD13",89,0)
 ...I FHSTAT="C" Q
"RTN","FHORD13",90,0)
 ...S FHDIET1=$P(FHKDAT,U,7)
"RTN","FHORD13",91,0)
 ...S FHDIET2=$P(FHKDAT,U,8)
"RTN","FHORD13",92,0)
 ...S FHDIET3=$P(FHKDAT,U,9)
"RTN","FHORD13",93,0)
 ...S FHDIET4=$P(FHKDAT,U,10)
"RTN","FHORD13",94,0)
 ...S FHDIET5=$P(FHKDAT,U,11)
"RTN","FHORD13",95,0)
 ...I FHPR="P",'$D(FHDFNSAV(FHDFN)) Q
"RTN","FHORD13",96,0)
 ...I $G(FHW1SAV),(FHW1'=FHW1SAV) Q
"RTN","FHORD13",97,0)
 ...I $D(FHDFNSAV(FHDFN)),(FHDFN'=FHDFNSAV(FHDFN)) Q
"RTN","FHORD13",98,0)
 ...S FHLOC="",FHRGS="OP"
"RTN","FHORD13",99,0)
 ...S:$D(^FH(119.6,FHW1,0)) FHLOC=$P(^FH(119.6,FHW1,0),U,8)
"RTN","FHORD13",100,0)
 ...I $G(FHFHPSAV),$G(FHLOC),(FHFHPSAV'=FHLOC) Q
"RTN","FHORD13",101,0)
 ...S FHDFN1=$P(^FHPT(FHDFN,0),U,1)
"RTN","FHORD13",102,0)
 ...S FHRMB=$P(FHKDAT,U,18)
"RTN","FHORD13",103,0)
 ...D OUTW
"RTN","FHORD13",104,0)
 ;next guest
"RTN","FHORD13",105,0)
 K FHDIET1,FHDIET2,FHDIET3,FHDIET4,FHDIET5
"RTN","FHORD13",106,0)
 F FHKD=FHD1:0 S FHKD=$O(^FHPT("GM",FHKD)) Q:(FHKD'>0)!(FHKD>FHD2)  D
"RTN","FHORD13",107,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("GM",FHKD,FHDFN)) Q:FHDFN'>0  D
"RTN","FHORD13",108,0)
 ..I FHPR="P",'$D(FHDFNSAV(FHDFN)) Q
"RTN","FHORD13",109,0)
 ..S FHKDAT=^FHPT(FHDFN,"GM",FHKD,0)
"RTN","FHORD13",110,0)
 ..I $P(FHKDAT,U,9)="C" Q
"RTN","FHORD13",111,0)
 ..S (W1,FHW1)=$P(FHKDAT,U,5)
"RTN","FHORD13",112,0)
 ..S FHDIET=$P(FHKDAT,U,6),FHMEAL=$P(FHKDAT,U,3)
"RTN","FHORD13",113,0)
 ..I $G(FHW1SAV),(FHW1'=FHW1SAV) Q
"RTN","FHORD13",114,0)
 ..I $D(FHDFNSAV(FHDFN)),(FHDFN'=FHDFNSAV(FHDFN)) Q
"RTN","FHORD13",115,0)
 ..S FHLOC=""
"RTN","FHORD13",116,0)
 ..S:$D(^FH(119.6,FHW1,0)) FHLOC=$P(^FH(119.6,FHW1,0),U,8)
"RTN","FHORD13",117,0)
 ..I $G(FHFHPSAV),$G(FHLOC),(FHFHPSAV'=FHLOC) Q
"RTN","FHORD13",118,0)
 ..S FHDFN1=$P(^FHPT(FHDFN,0),U,1)
"RTN","FHORD13",119,0)
 ..S FHRMB=$P(FHKDAT,U,11)
"RTN","FHORD13",120,0)
 ..D OUTW
"RTN","FHORD13",121,0)
 ;next SPECIAL
"RTN","FHORD13",122,0)
 F FHKD=FHD1:0 S FHKD=$O(^FHPT("SM",FHKD)) Q:(FHKD'>0)!(FHKD>FHD2)  D
"RTN","FHORD13",123,0)
 .F FHDFN=0:0 S FHDFN=$O(^FHPT("SM",FHKD,FHDFN)) Q:FHDFN'>0  D
"RTN","FHORD13",124,0)
 ..I FHPR="P",'$D(FHDFNSAV(FHDFN)) Q
"RTN","FHORD13",125,0)
 ..S FHKDAT=^FHPT(FHDFN,"SM",FHKD,0)
"RTN","FHORD13",126,0)
 ..S (W1,FHW1)=$P(FHKDAT,U,3)
"RTN","FHORD13",127,0)
 ..S FHDFN1=$P(^FHPT(FHDFN,0),U,1)
"RTN","FHORD13",128,0)
 ..S FHDIET=$P(FHKDAT,U,4),FHMEAL=$P(FHKDAT,U,9),FHSTAT=$P(FHKDAT,U,2)
"RTN","FHORD13",129,0)
 ..I (FHSTAT="C")!(FHSTAT="D") Q
"RTN","FHORD13",130,0)
 ..I $G(FHW1SAV),(FHW1'=FHW1SAV) Q
"RTN","FHORD13",131,0)
 ..I $D(FHDFNSAV(FHDFN)),(FHDFN'=FHDFNSAV(FHDFN)) Q
"RTN","FHORD13",132,0)
 ..S FHLOC=""
"RTN","FHORD13",133,0)
 ..S:$D(^FH(119.6,FHW1,0)) FHLOC=$P(^FH(119.6,FHW1,0),U,8)
"RTN","FHORD13",134,0)
 ..I $G(FHFHPSAV),$G(FHLOC),(FHFHPSAV'=FHLOC) Q
"RTN","FHORD13",135,0)
 ..S FHDFN1=$P(^FHPT(FHDFN,0),U,1)
"RTN","FHORD13",136,0)
 ..S FHRMB=$P(FHKDAT,U,13)
"RTN","FHORD13",137,0)
 ..D OUTW
"RTN","FHORD13",138,0)
 Q
"RTN","FHORD13",139,0)
 ;
"RTN","FHORD13",140,0)
OUTW ;set all outpt data for printing
"RTN","FHORD13",141,0)
 D PATNAME^FHOMUTL
"RTN","FHORD13",142,0)
 S FHTC=""
"RTN","FHORD13",143,0)
 Q:'$D(^FH(119.6,FHW1,0))
"RTN","FHORD13",144,0)
 S P0=$P(^FH(119.6,FHW1,0),U,4)
"RTN","FHORD13",145,0)
 S P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHORD13",146,0)
 S FHW1N=$P(^FH(119.6,FHW1,0),U,1)
"RTN","FHORD13",147,0)
 S FHTC5=$P(^FH(119.6,FHW1,0),U,5)
"RTN","FHORD13",148,0)
 S FHTC6=$P(^FH(119.6,FHW1,0),U,6)
"RTN","FHORD13",149,0)
 I $G(FHTC5),$D(^FH(119.72,FHTC5,0)) S FHTC=FHTC_$P(^FH(119.72,FHTC5,0),U,2)
"RTN","FHORD13",150,0)
 I $G(FHTC6),$D(^FH(119.72,FHTC6,0)) S FHTC=FHTC_$P(^FH(119.72,FHTC6,0),U,2)
"RTN","FHORD13",151,0)
 S:$G(FHDIET) FHDIET=$P(^FH(111,FHDIET,0),U,7)
"RTN","FHORD13",152,0)
 I $G(FHDIET1) S FHDIET1=$P(^FH(111,FHDIET1,0),U,7) D
"RTN","FHORD13",153,0)
 .I FHDIET="" S FHDIET=FHDIET_FHDIET1 Q
"RTN","FHORD13",154,0)
 .I FHDIET'="" S FHDIET=FHDIET_", "_FHDIET1
"RTN","FHORD13",155,0)
 I $G(FHDIET2) S FHDIET2=$P(^FH(111,FHDIET2,0),U,7) D
"RTN","FHORD13",156,0)
 .I FHDIET="" S FHDIET=FHDIET_FHDIET2 Q
"RTN","FHORD13",157,0)
 .I FHDIET'="" S FHDIET=FHDIET_", "_FHDIET2
"RTN","FHORD13",158,0)
 I $G(FHDIET3) S FHDIET3=$P(^FH(111,FHDIET3,0),U,7) D
"RTN","FHORD13",159,0)
 .I FHDIET="" S FHDIET=FHDIET_FHDIET3 Q
"RTN","FHORD13",160,0)
 .I FHDIET'="" S FHDIET=FHDIET_", "_FHDIET3
"RTN","FHORD13",161,0)
 I $G(FHDIET4) S FHDIET4=$P(^FH(111,FHDIET4,0),U,7) D
"RTN","FHORD13",162,0)
 .I FHDIET="" S FHDIET=FHDIET_FHDIET4 Q
"RTN","FHORD13",163,0)
 .I FHDIET'="" S FHDIET=FHDIET_", "_FHDIET4
"RTN","FHORD13",164,0)
 I $G(FHDIET5) S FHDIET5=$P(^FH(111,FHDIET5,0),U,7) D
"RTN","FHORD13",165,0)
 .I FHDIET="" S FHDIET=FHDIET_FHDIET5 Q
"RTN","FHORD13",166,0)
 .I FHDIET'="" S FHDIET=FHDIET_", "_FHDIET5
"RTN","FHORD13",167,0)
 S FHRM=""
"RTN","FHORD13",168,0)
 I $G(FHRMB),$D(^DG(405.4,FHRMB,0)) S FHRM=$P(^DG(405.4,FHRMB,0),U,1)
"RTN","FHORD13",169,0)
 S:FHRM'="" FHRM=$E(FHRM,1,12)
"RTN","FHORD13",170,0)
 S ^TMP($J,"OUT",P0_"~"_$E(FHW1N,1,20)_"~"_$E(FHPTNM,1,26),FHDFN)=FHPTNM_"^"_FHW1N_"^"_FHBID_"^"_FHDIET_"^"_FHTC_"^"_FHRM
"RTN","FHORD13",171,0)
 Q
"RTN","FHORD13",172,0)
 ;
"RTN","FHORD13",173,0)
PROUT ;print outptlabels
"RTN","FHORD13",174,0)
 S (X1,RM)=""
"RTN","FHORD13",175,0)
 F  S RM=$O(^TMP($J,"OUT",RM)) Q:RM=""  D
"RTN","FHORD13",176,0)
 .F FHDFN=0:0 S FHDFN=$O(^TMP($J,"OUT",RM,FHDFN)) Q:FHDFN'>0  D
"RTN","FHORD13",177,0)
 ..S FHOU=^TMP($J,"OUT",RM,FHDFN)
"RTN","FHORD13",178,0)
 ..S N1=$P(FHOU,U,1)
"RTN","FHORD13",179,0)
 ..S W1=$E($P(FHOU,U,2),1,12)
"RTN","FHORD13",180,0)
 ..S BID=$P(FHOU,U,3)
"RTN","FHORD13",181,0)
 ..S (Y,FHDIET)=$P(FHOU,U,4)
"RTN","FHORD13",182,0)
 ..S X1=$P(FHOU,U,5)
"RTN","FHORD13",183,0)
 ..S R1=$P(FHOU,U,6)
"RTN","FHORD13",184,0)
 ..D L1
"RTN","FHORD13",185,0)
 Q
"RTN","FHORD13",186,0)
 ;
"RTN","FHORD13",187,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHORD13",188,0)
 Q
"RTN","FHORD13",189,0)
LL D LAB^FHLABEL Q
"RTN","FHORD7")
0^2^B15930347
"RTN","FHORD7",1,0)
FHORD7 ; HISC/REL/NCA/JH - Diet Order Utilities ;4/5/96  11:27
"RTN","FHORD7",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHORD7",3,0)
CUR ; Get Diet
"RTN","FHORD7",4,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHORD7",5,0)
 S X1=$G(^FHPT(FHDFN,"A",ADM,0)),FHORD=$P(X1,"^",2),X1=$P(X1,"^",3),(FHLD,FHOR,X,Y)=""
"RTN","FHORD7",6,0)
 Q:'FHORD  Q:'$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))
"RTN","FHORD7",7,0)
C2 ; Set FHOR & FHLD variables & Y = diet text
"RTN","FHORD7",8,0)
 S X=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7),Y=""
"RTN","FHORD7",9,0)
 I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") S:%>0 Y=$P($E(FHDU,%,999),";",1) K % Q
"RTN","FHORD7",10,0)
C3 S Y="" F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHORD7",11,0)
 Q
"RTN","FHORD7",12,0)
NOW D NOW^%DTC S NOW=% Q
"RTN","FHORD7",13,0)
POST ; Generate bulletin
"RTN","FHORD7",14,0)
 S WRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8) Q:WRD<1
"RTN","FHORD7",15,0)
 F FHXMKK=0:0 S FHXMKK=$O(^FH(119.6,WRD,2,"B",FHXMKK)) Q:FHXMKK'>0  D
"RTN","FHORD7",16,0)
 .S XMY(FHXMKK)=""
"RTN","FHORD7",17,0)
 Q:'$D(XMY)  S XMB="FHDIORD"
"RTN","FHORD7",18,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORD7",19,0)
 S XMB(1)=$P(^DPT(DFN,0),"^",1),XMB(2)=$P(^FH(119.6,WRD,0),"^",1) D C3 S XMB(3)=Y
"RTN","FHORD7",20,0)
 S XMB(5)=$S($D(^DPT(DFN,.101)):^(.101),1:"unknown")
"RTN","FHORD7",21,0)
 S DTP=D1 D DTP^FH S XMB(4)=DTP D ^XMB K XMB,XMY,XMM,XMDT,FHXMKK Q
"RTN","FHORD7",22,0)
STR ; Store new diet order
"RTN","FHORD7",23,0)
 D ORD,NOW
"RTN","FHORD7",24,0)
 S X=FHORD_"^"_FHOR_"^"_FHLD_"^"_TYP_"^"_D1_"^"_$S(D2:D2,1:"")_"^"_DUZ_"^"_NOW,FHNOW=NOW
"RTN","FHORD7",25,0)
 S ^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)=X S:COM'="" ^(1)=COM I FHWF D OE^FHORD71 S NOW=FHNOW
"RTN","FHORD7",26,0)
S0 G:'D2 S1 S X2=D2+.000001
"RTN","FHORD7",27,0)
S01 S A2=0 F A1=0:0 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) Q:A1<1!(A1'<X2)  S A2=A1
"RTN","FHORD7",28,0)
 I A2 S X2=A2,A2=$P(^FHPT(FHDFN,"A",ADM,"AC",A2,0),"^",2),X1=$P(^FHPT(FHDFN,"A",ADM,"DI",A2,0),"^",10) I X1'="",X1'>D2 G S01
"RTN","FHORD7",29,0)
 F A1=D1:0 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) Q:A1<1!(A1'<D2)  D SK
"RTN","FHORD7",30,0)
 S Z6=D1_"^"_FHORD D ACR^FHORD71
"RTN","FHORD7",31,0)
 I 'A2 D ORD S A2=FHORD,^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)=FHORD_"^^^^^^X^^"_D2_"^^"_DUZ_"^"_NOW
"RTN","FHORD7",32,0)
 E  D OE3
"RTN","FHORD7",33,0)
 S Z6=D2_"^"_A2 D ACR^FHORD71 G S2
"RTN","FHORD7",34,0)
S1 I FHLD'="P" F A1=D1:0 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) Q:A1=""  D SK
"RTN","FHORD7",35,0)
 S Z6=D1_"^"_FHORD D ACR^FHORD71
"RTN","FHORD7",36,0)
S2 S X1="",A1=0 G S4
"RTN","FHORD7",37,0)
S3 S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) G:A1="" S4 S X2=$P(^(A1,0),"^",2)
"RTN","FHORD7",38,0)
 I X2<1 D SK G S3
"RTN","FHORD7",39,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"DI",X2,0)) D SK G S3
"RTN","FHORD7",40,0)
 S X2=^FHPT(FHDFN,"A",ADM,"DI",X2,0) I $P(X2,"^",2,8)'=$P(X1,"^",2,8) S X1=X2 G S3
"RTN","FHORD7",41,0)
 I $P(X1,"^",10)="" D SK G S3
"RTN","FHORD7",42,0)
 I $P(X2,"^",10),$P(X2,"^",10)'>$P(X1,"^",10) D SK G S3
"RTN","FHORD7",43,0)
 S X1=X2 G S3
"RTN","FHORD7",44,0)
S4 D OEU^FHORD71 S NOW=FHNOW K FHNOW G U1
"RTN","FHORD7",45,0)
UPD ; Get time & update diet
"RTN","FHORD7",46,0)
 D NOW I $D(ZTQUEUED),$D(Z6) I NOW<Z6 S NOW=Z6+.0002
"RTN","FHORD7",47,0)
U1 ; Update diet
"RTN","FHORD7",48,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" W "Could not find patient" Q
"RTN","FHORD7",49,0)
 S A1=0 F K=0:0 S K=$O(^FHPT(FHDFN,"A",ADM,"AC",K)) Q:K<1!(K>NOW)  S A1=K
"RTN","FHORD7",50,0)
 G:'A1 U3 S X1=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2) G S2:X1<1,S2:'$D(^FHPT(FHDFN,"A",ADM,"DI",X1,0))
"RTN","FHORD7",51,0)
 S X2=$O(^FHPT(FHDFN,"A",ADM,"AC",A1)) S:X2<1 X2=""
"RTN","FHORD7",52,0)
U2 I $P(^FHPT(FHDFN,"A",ADM,0),"^",2,3)=X1_"^"_X2 Q
"RTN","FHORD7",53,0)
 S FHYES=0 I $P(^FHPT(FHDFN,"A",ADM,0),"^",2)=X1 S FHYES=1
"RTN","FHORD7",54,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",2,3)=X1_"^"_X2,X9="" I X1 S X9=$P(^FHPT(FHDFN,"A",ADM,"DI",X1,0),"^",8) I 'FHYES S EVT="D^O^"_X1 D ^FHORX
"RTN","FHORD7",55,0)
 I X9'="",X9'=$P(^FHPT(FHDFN,"A",ADM,0),"^",5) S $P(^(0),"^",5)=X9
"RTN","FHORD7",56,0)
 K X9 D ^FHORD72 K FHYES Q
"RTN","FHORD7",57,0)
U3 S (X1,X2)="" G U2
"RTN","FHORD7",58,0)
SK K ^FHPT(FHDFN,"A",ADM,"AC",A1) S Z6=-1 G ACR^FHORD71
"RTN","FHORD7",59,0)
ORD ; Get next order #
"RTN","FHORD7",60,0)
 L +^FHPT(FHDFN,"A",ADM,"DI",0)
"RTN","FHORD7",61,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"DI",0)) S ^FHPT(FHDFN,"A",ADM,"DI",0)="^115.02A^^"
"RTN","FHORD7",62,0)
 S X=^FHPT(FHDFN,"A",ADM,"DI",0),FHORD=$P(X,"^",3)+1,^(0)=$P(X,"^",1,2)_"^"_FHORD_"^"_($P(X,"^",4)+1)
"RTN","FHORD7",63,0)
 L -^FHPT(FHDFN,"A",ADM,"DI",0) Q:'$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD))  G ORD
"RTN","FHORD7",64,0)
OE3 ; Enter New Re-enstated Order
"RTN","FHORD7",65,0)
 Q:$$VERSION^XPDUTL("OR")=2.5
"RTN","FHORD7",66,0)
 D ORD^FHORR S FHNO1=$G(^FHPT(FHDFN,"A",ADM,"DI",A2,0)),FHNO2=$G(^(1)),FHNO3=$G(^(2))
"RTN","FHORD7",67,0)
 S ^FHPT(FHDFN,"A",ADM,"DI",FHORD1,0)=FHORD1_"^"_$P(FHNO1,"^",2,8)_"^"_D2_"^"_$P(FHNO1,"^",10)_"^"_DUZ_"^"_NOW_"^"_$P(FHNO1,"^",13) S:FHNO2'="" ^(1)=FHNO2
"RTN","FHORD7",68,0)
 S:FHNO3 ^(2)=FHNO3,^(3)=DUZ_"^"_NOW S A2=FHORD1 I FHWF D OE^FHORR S NOW=FHNOW
"RTN","FHORD7",69,0)
 K FHNO1,FHNO2,FHNO3,FHORD1 Q
"RTN","FHORE1")
0^37^B17533631
"RTN","FHORE1",1,0)
FHORE1 ; HISC/REL - Early/Late Trays ;8/8/96  13:57 ;
"RTN","FHORE1",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHORE1",3,0)
 S ALL=0 D ^FHDPA G:'DFN KIL G:'FHDFN KIL D F1 G:'$D(DFN) KIL G:'$D(FHDFN) KIL I 'FHWF S FHORN="" D ^FHORE1A G KIL
"RTN","FHORE1",4,0)
 ; Set HL7
"RTN","FHORE1",5,0)
 S FHORN="" D ^FHORE1A I FHDAY D EL^FHWOR3 D KIL I $D(MSG) D MSG^XQOR("FH EVSEND OR",.MSG) K MSG
"RTN","FHORE1",6,0)
 Q
"RTN","FHORE1",7,0)
F1 ; Process order
"RTN","FHORE1",8,0)
 D NOW^%DTC S NOW=%,DT=NOW\1 K %
"RTN","FHORE1",9,0)
 S X1=DT,X2=31 D C^%DTC S X31=X
"RTN","FHORE1",10,0)
F2 W ! D ALG^FHCLN W !,"Allergies: ",$S(ALG="":"None on file",1:ALG)
"RTN","FHORE1",11,0)
 S %DT="AEX",%DT("A")="Select Start Date: " D ^%DT K %DT G AB:U[X!$D(DTOUT),F2:Y<1 S SDT=+Y\1 I SDT<DT G F15
"RTN","FHORE1",12,0)
 I SDT>X31 W *7,!,"  [ Cannot schedule more than 31 days in the future ]" G F2
"RTN","FHORE1",13,0)
F3 S DTP=SDT D DTP^FH
"RTN","FHORE1",14,0)
 S %DT="AEX",%DT("A")="Select End Date: "_DTP_"// " D ^%DT K %DT G AB:X["^"!$D(DTOUT) S:X="" Y=SDT G F3:Y<1 S EDT=+Y\1
"RTN","FHORE1",15,0)
 S WKD="" G:SDT=EDT F6 I EDT<SDT W *7,"  [ End before Start? ] " G F2
"RTN","FHORE1",16,0)
 I EDT>X31 W *7,!,"  [ Cannot schedule for more than 31 days in the future ]" G F3
"RTN","FHORE1",17,0)
OK W !!?10,"Mon  Tues  Wed  Thur  Fri  Sat  Sun"
"RTN","FHORE1",18,0)
 W !?10," M     T    W     R    F    S    X"
"RTN","FHORE1",19,0)
 W !!,"Enter string of characters for desired days of week: e.g., MWF",!
"RTN","FHORE1",20,0)
F4 R !,"Days of Week: ",WKD:DTIME G:'$T!("^"[WKD) AB S X=WKD D TR^FH S WKD=X
"RTN","FHORE1",21,0)
 S X1="" F K=1:1 S Z=$E(WKD,K) Q:Z=""  G:X1[Z F16 S X1=X1_Z I "MTWRFSX"'[Z W !,"Please enter the desired days of the week." G OK
"RTN","FHORE1",22,0)
F6 R !,"Select Meal (B,N,E): ",MEAL:DTIME G:'$T!("^"[MEAL) AB S X=MEAL D TR^FH S MEAL=X
"RTN","FHORE1",23,0)
 I "BNE"'[MEAL!(MEAL'?1U) W *7,!,"Enter B for Breakfast, N for Noon , or E for Evening" G F6
"RTN","FHORE1",24,0)
 G:SDT'=EDT F7 F K=SDT:0 S K=$O(^FHPT(FHDFN,"A",ADM,"EL",K)) Q:K<1!(K\1'=SDT)  I $P(^(K,0),"^",2)=MEAL W *7,!!,"Early/Late Meal Already Ordered for this Date!" G AB
"RTN","FHORE1",25,0)
F7 R !,"Early or Late (E or L): ",X1:DTIME G AB:'$T!("^"[X1)
"RTN","FHORE1",26,0)
 I "el"[X1 S X=X1 D TR^FH S X1=X
"RTN","FHORE1",27,0)
 I X1'="E",X1'="L" W *7,!,"Enter E for early tray, L for late tray" G F7
"RTN","FHORE1",28,0)
 S SERV=X1 D DP S K=$S(MEAL="B":0,MEAL="N":6,1:12)+(X1="L"*3)
"RTN","FHORE1",29,0)
 K N S K2=0 F K1=K+1:1:K+3 S X2=$P(Y,"^",K1) I X2'="" S K2=K2+1,N(K2)=X2
"RTN","FHORE1",30,0)
 I 'K2 W *7,!!,"No Early/Late Delivery Times -- Notify Dietetics" G AB
"RTN","FHORE1",31,0)
 I K2=1 S K1=1 G F9
"RTN","FHORE1",32,0)
F8 W !,"Select Time: ( " F K1=1:1:K2 W K1,"=",N(K1)," "
"RTN","FHORE1",33,0)
 R ") ",K1:DTIME G AB:'$T!("^"[K1) I K1<1!(K1>K2)!(K1'?1N) W *7,!,"Enter the number of the desired time" G F8
"RTN","FHORE1",34,0)
F9 S TIM=N(K1),X=SDT_"@"_TIM,%DT="XT",NUM=K1 D ^%DT S (SDT,DTE)=Y,EDT=EDT+(SDT#1) G F10:SDT'=EDT,F15:DTE<NOW
"RTN","FHORE1",35,0)
 D CUR I FHLD'="" W *7,!!,"Patient is on a WITHHOLD ORDER at that time!" G AB
"RTN","FHORE1",36,0)
 I "^^^^"[FHOR W *7,!!,"Patient has NO DIET ORDER at that time!" G AB
"RTN","FHORE1",37,0)
F10 S BAG="N" I $P(FHPAR,"^",10)'="N" R !,"Bagged Meal: NO// ",BAG:DTIME G:'$T!(BAG=U) AB S:BAG="" BAG="N" S X=BAG D TR^FH S BAG=X I $P("YES",BAG,1)'="",$P("NO",BAG,1)'="" W *7," Enter Y or N" G F10
"RTN","FHORE1",38,0)
 S BAG=$E(BAG,1) W !?5 Q
"RTN","FHORE1",39,0)
DP S Y="" S W1=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8),DP=$P($G(^FH(119.6,+W1,0)),"^",8)
"RTN","FHORE1",40,0)
 S Y=$G(^FH(119.73,+DP,1)),FHPAR=$G(^FH(119.73,+DP,2)) Q
"RTN","FHORE1",41,0)
F15 W *7,!!,"Cannot Order a Meal for a Date/Time before now!" G AB
"RTN","FHORE1",42,0)
F16 W *7,!,"  Error - Illegal character or repeated day" G F4
"RTN","FHORE1",43,0)
DTP ; Printable Date
"RTN","FHORE1",44,0)
 Q:Y<1  S Y=$J(+$E(Y,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(Y,4,5))_"-"_$E(Y,2,3) Q
"RTN","FHORE1",45,0)
CUR S A1=0,(FHOR,FHLD)="" F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1!(KK>DTE)  S A1=KK
"RTN","FHORE1",46,0)
 Q:'A1  S FHORD=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2),X=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7) Q
"RTN","FHORE1",47,0)
AB W *7,!!,"Early/Late Tray operation TERMINATED - No change!"
"RTN","FHORE1",48,0)
KIL K %,%H,%I,%T,%DT,A1,ADM,ALL,BAG,C,DA,FHDFN,DFN,DP,DTE,DTP,EDT,FHDAY,FHLD,FHOR,FHPAR,FHWF,FHPV,I,K,K1,K2,KK,MEAL,N,NUM,NOW,FHORN,FHORD,SDT,SERV,TIM,WARD,WKD,X,X1,X2,X31,Y,Z Q
"RTN","FHORE21")
0^38^B31608695
"RTN","FHORE21",1,0)
FHORE21 ; HISC/REL/NCA - List Early/Late Trays (cont) ;11/9/94  13:33 
"RTN","FHORE21",2,0)
 ;;5.5;DIETETICS;**5,8**;Jan 28, 2005;Build 28
"RTN","FHORE21",3,0)
 ;patch #5 - added outpt room-bed.
"RTN","FHORE21",4,0)
 S D1=DTE,COUNT=0,LINE=1 K ^TMP($J) S ANS=""
"RTN","FHORE21",5,0)
F2 S D1=$O(^FHPT("ADLT",D1)) G:D1<1!(D1\1'=DTE) P0 S FHDFN=0
"RTN","FHORE21",6,0)
F3 S FHDFN=$O(^FHPT("ADLT",D1,FHDFN)) G:FHDFN<1 F2 S ADM=0
"RTN","FHORE21",7,0)
F4 S ADM=$O(^FHPT("ADLT",D1,FHDFN,ADM)) G:ADM<1 F3
"RTN","FHORE21",8,0)
 I $S($D(^DGPM(ADM,0)):$P(^(0),"^",17),1:1) G F7
"RTN","FHORE21",9,0)
 S Y(0)=$G(^FHPT(FHDFN,"A",ADM,"EL",D1,0)) G:Y(0)="" F7
"RTN","FHORE21",10,0)
 S X=$G(^FHPT(FHDFN,"A",ADM,0)),OLW=$P(X,"^",11),IS=$P(X,"^",10)
"RTN","FHORE21",11,0)
 S W1=$P(X,"^",8),X2=$G(^FH(119.6,+W1,0)),WARD=$P(X2,"^",1)
"RTN","FHORE21",12,0)
 G:WARD="" F4 S P0=$P(X2,"^",8) I FHP,P0'=FHP G F4
"RTN","FHORE21",13,0)
 S M1=$P(Y(0),"^",2) I MEAL'="A",M1'=MEAL G F4
"RTN","FHORE21",14,0)
 D CUR G:FHLD'="" F4 S O1=Y
"RTN","FHORE21",15,0)
 S ^TMP($J,"EL",D1_"-"_$P(Y(0),"^",6),FHDFN_"-"_ADM)=WARD_"^"_P0_"^"_OLW_"^"_IS_"^"_O1_"^"_$P(Y(0),"^",2,4) G F4
"RTN","FHORE21",16,0)
P0 D NOW^%DTC S DTP=% D DTP^FH S H1=DTP,DTP=DTE\1 D DTP^FH S L1=DTP
"RTN","FHORE21",17,0)
 I LAB S LAB=$P($G(^FH(119.9,1,"D",IOS,0)),"^",2) S:'LAB LAB=1
"RTN","FHORE21",18,0)
 S S1=LAB=2*5+36
"RTN","FHORE21",19,0)
P1 S M2="Z",PG=0 D:'LAB HDR
"RTN","FHORE21",20,0)
 S N1="" F  S N1=$O(^TMP($J,"EL",N1)) Q:N1=""!(ANS="^")  S N2="" F  S N2=$O(^TMP($J,"EL",N1,N2)) Q:N2=""  S Y=^(N2) D P2 Q:ANS="^"
"RTN","FHORE21",21,0)
 ;
"RTN","FHORE21",22,0)
 D ^FHOMELT  ;List Outpatient (Recurring Meals) Late Trays
"RTN","FHORE21",23,0)
 I LAB<1 W !!
"RTN","FHORE21",24,0)
 S FHPREV="" D:'LAB OPHDR
"RTN","FHORE21",25,0)
 F N1="B","N","E"  D
"RTN","FHORE21",26,0)
 .I '$D(^TMP($J,N1)) Q
"RTN","FHORE21",27,0)
 .S N2="" F  S N2=$O(^TMP($J,N1,N2)) Q:N2=""!(ANS="^")  D
"RTN","FHORE21",28,0)
 ..S FHDATA=$G(^TMP($J,N1,N2)),FHLOC=$P(FHDATA,U,1),FHDFN=$P(FHDATA,U,2)
"RTN","FHORE21",29,0)
 ..S FHBAG=$P(FHDATA,U,3),(O1,FHDIET)=$P(FHDATA,U,4),RM=$P(FHDATA,U,5) D PATNAME^FHOMUTL
"RTN","FHORE21",30,0)
 ..S (WARD,FHLOCNM)=$E($P($G(^FH(119.6,FHLOC,0)),U,1),1,10)
"RTN","FHORE21",31,0)
 ..S FHIP=$P($G(^FHPT(FHDFN,0)),U,5),FHIPD=""
"RTN","FHORE21",32,0)
 ..I FHIP'="" S (IS,FHIPD)=$P($G(^FH(119.4,FHIP,0)),U,2)_$P($G(^FH(119.4,FHIP,0)),U,3)
"RTN","FHORE21",33,0)
 ..S P1=FHPTNM,BID=FHBID,TIM=$P(N2,"~",1),M1=N1
"RTN","FHORE21",34,0)
 ..I LAB<1 D OUTP
"RTN","FHORE21",35,0)
 ..I LAB>0,LAB<3 D P3
"RTN","FHORE21",36,0)
 ..I LAB>2 D LL Q
"RTN","FHORE21",37,0)
 I LAB>2 D DPLL^FHLABEL K ^TMP($J) Q
"RTN","FHORE21",38,0)
 I LAB<3 F K=1:1:$S('LAB:1,1:18) W !
"RTN","FHORE21",39,0)
 Q
"RTN","FHORE21",40,0)
P2 S FHDFN=+N2,WARD=$P(Y,"^",1),P0=$P(Y,"^",2),OLW=$P(Y,"^",3),IS=$P(Y,"^",4),O1=$P(Y,"^",5),M1=$P(Y,"^",6),TIM=$P(Y,"^",7),BAG=$P(Y,"^",8)
"RTN","FHORE21",41,0)
 I IS S IS=^FH(119.4,IS,0),IS=$P(IS,"^",2)_$P(IS,"^",3)
"RTN","FHORE21",42,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORE21",43,0)
 S Y=^DPT(DFN,0),P1=$P(Y,"^",1) D PID^FHDPA
"RTN","FHORE21",44,0)
 S RM=$G(^DPT(DFN,.101)) I LAB>2 D LL Q
"RTN","FHORE21",45,0)
 G:LAB P3
"RTN","FHORE21",46,0)
 I $Y>(IOSL-10) D HDR Q:ANS="^"  W !!?56,$S(M1="B":"Breakfast ",M1="N":"   Noon ",1:" Evening "),$J(TIM,6),! S M2=M1_TIM
"RTN","FHORE21",47,0)
 S X=M1_TIM I X'=M2 W !!?56,$S(M1="B":"Breakfast ",M1="N":"   Noon ",1:" Evening "),$J(TIM,6),! S M2=X
"RTN","FHORE21",48,0)
 W !,$S(WARD'="":$E(WARD,1,10),1:"")_$S(RM'="":"/"_$E(RM,1,10),1:""),?24,$E(P1,1,22),?50,BID,?61,$S(IS'="":IS,1:""),?67,$S(BAG="Y":"YES",1:""),?73,O1
"RTN","FHORE21",49,0)
 D ALG^FHCLN W !,"Allergies: ",$S(ALG="":"None on file",1:ALG)
"RTN","FHORE21",50,0)
 Q
"RTN","FHORE21",51,0)
P3 S P1=$E(P1,1,22),WARD=$E(WARD,1,15),RM=$E(RM,1,10)
"RTN","FHORE21",52,0)
 D ALG^FHCLN
"RTN","FHORE21",53,0)
 W !,$S(M1="B":"Breakfast",M1="N":"  Noon ",1:" Evening"),?10,TIM,?(S1-12),L1 W:LAB=2 !
"RTN","FHORE21",54,0)
 W !,$E(P1,1,S1-5-$L(WARD)),?(S1-3-$L(WARD)),WARD
"RTN","FHORE21",55,0)
 W !,BID W:IS'="" ?(S1-3\2),IS W ?(S1-3-$L(RM)),RM W:LAB=2 !
"RTN","FHORE21",56,0)
 I $L(O1)<S1 W !,O1,$S(ALG="":"",1:" *ALG"),!!
"RTN","FHORE21",57,0)
 E  S L=$S($L($P(O1,",",1,3))<S1:3,1:2) W !,$P(O1,",",1,L),!,$E($P(O1,",",L+1,5),2,99),$S(ALG="":"",1:"*ALG"),!
"RTN","FHORE21",58,0)
 W:LAB=2 ! Q
"RTN","FHORE21",59,0)
OUTP ;
"RTN","FHORE21",60,0)
 I $Y>(IOSL-10) D OPHDR Q:ANS="^"
"RTN","FHORE21",61,0)
 S NEW=N1_$P(N2,"~",1) I FHPREV'=NEW W !!?56,$S(N1="B":"Breakfast ",N1="N":"   Noon ",1:" Evening "),$J($P(N2,"~",1),6),!
"RTN","FHORE21",62,0)
 W !,FHLOCNM
"RTN","FHORE21",63,0)
 D PATNAME^FHOMUTL W "/"_RM,?24,FHPTNM,?50,FHBID
"RTN","FHORE21",64,0)
 W ?61,FHIPD,?67,$S(FHBAG="Y":"YES",1:"")
"RTN","FHORE21",65,0)
 W ?73,FHDIET
"RTN","FHORE21",66,0)
 D ALG^FHCLN W !,"Allergies: ",$S(ALG="":"None on file",1:ALG)
"RTN","FHORE21",67,0)
 S FHPREV=N1_$P(N2,"~",1)
"RTN","FHORE21",68,0)
 Q
"RTN","FHORE21",69,0)
F7 K ^FHPT("ADLT",D1,FHDFN,ADM) G F4
"RTN","FHORE21",70,0)
CUR S A1=0,(Y,FHLD,FHOR)="" F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1!(KK>D1)  S A1=KK
"RTN","FHORE21",71,0)
 Q:'A1  S FHORD=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2),X=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7)
"RTN","FHORE21",72,0)
 I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") Q:%<1  S Y=$P($E(FHDU,%,999),";",1) Q
"RTN","FHORE21",73,0)
 S Y="" F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHORE21",74,0)
 Q
"RTN","FHORE21",75,0)
DP K N S Y=$G(^FH(119.73,+P0,1))
"RTN","FHORE21",76,0)
 F KK=1,2,3,7,8,9,13,14,15 S X=$P(Y,"^",KK) I X'="" S N($S(KK<7:"B",KK<13:"N",1:"E"),X)=""
"RTN","FHORE21",77,0)
 Q
"RTN","FHORE21",78,0)
HDR ; Print Header (INPATIENT)
"RTN","FHORE21",79,0)
 I PG,IOST?1"C-".E R !!,"Press RETURN to continue or ""^"" to exit. ",ANS:DTIME S:'$T!(ANS["^") ANS="^" Q:ANS="^"  I "^"'[ANS W !,"Enter Return or ""^""." G HDR
"RTN","FHORE21",80,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1
"RTN","FHORE21",81,0)
 W !?32,"I N P A T I E N T   E A R L Y / L A T E   T R A Y S",?110,H1
"RTN","FHORE21",82,0)
 W !,$S('FHP:"Consolidated",1:$P(^FH(119.73,FHP,0),"^",1)),?61,L1,?121,"Page ",PG
"RTN","FHORE21",83,0)
 W !!,"Ward/Room",?24,"Patient",?50,"ID#",?61,"Iso   Bag   Current-Diet",! Q
"RTN","FHORE21",84,0)
OPHDR ; Print Header (OUTPATIENT)
"RTN","FHORE21",85,0)
 I PG,IOST?1"C-".E R !!,"Press RETURN to continue or ""^"" to exit. ",ANS:DTIME S:'$T!(ANS["^") ANS="^" Q:ANS="^"  I "^"'[ANS W !,"Enter Return or ""^""." G OPHDR
"RTN","FHORE21",86,0)
 W:$E(IOST,1,2)="C-" @IOF S PG=PG+1
"RTN","FHORE21",87,0)
 W !?32,"O U T P A T I E N T   E A R L Y / L A T E   T R A Y S",?110,H1
"RTN","FHORE21",88,0)
 W !,$S('FHP:"Consolidated",1:$P(^FH(119.73,FHP,0),"^",1)),?61,L1,?121,"Page ",PG
"RTN","FHORE21",89,0)
 W !!,"Ward/Room",?24,"Patient",?50,"ID#",?61,"Iso   Bag   Current-Diet",! Q
"RTN","FHORE21",90,0)
LL ;
"RTN","FHORE21",91,0)
 D ALG^FHCLN
"RTN","FHORE21",92,0)
 S FHCOL=$S(LAB=3:3,1:2)
"RTN","FHORE21",93,0)
 I LABSTART>1 F FHLABST=1:1:(LABSTART-1)*FHCOL D  S LABSTART=1
"RTN","FHORE21",94,0)
 .I LAB=3 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6)="" D LL3^FHLABEL
"RTN","FHORE21",95,0)
 .I LAB=4 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6,PCL7,PCL8)="" D LL4^FHLABEL
"RTN","FHORE21",96,0)
 .Q
"RTN","FHORE21",97,0)
 S SL1=$S(LAB=3:25,1:38)
"RTN","FHORE21",98,0)
 S MEALTM=$S(M1="B":"Breakfast",M1="N":"Noon",1:"Evening")_"  "_TIM
"RTN","FHORE21",99,0)
 S BID=BID_$S(ALG="":"",1:" *ALG")
"RTN","FHORE21",100,0)
 S BIDIS=BID_$E("        ",1,12-$L(BID))_IS
"RTN","FHORE21",101,0)
 S WARD=$E(WARD,1,15),WLN=$L(WARD),RM=$E(RM,1,10)
"RTN","FHORE21",102,0)
 I LAB=3 D
"RTN","FHORE21",103,0)
 .S P1=$E(P1,1,24-WLN)
"RTN","FHORE21",104,0)
 .S (PCL1,PCL6)="",PCL2=MEALTM_$J(L1,25-$L(MEALTM))
"RTN","FHORE21",105,0)
 .S PCL3=P1_$J(WARD,25-$L(P1)),PCL4=BIDIS_$J(RM,25-$L(BIDIS))
"RTN","FHORE21",106,0)
 .S PCL5=$E(O1,1,29) D LL3^FHLABEL
"RTN","FHORE21",107,0)
 I LAB=4 D
"RTN","FHORE21",108,0)
 .S P1=$E(P1,1,37-WLN)
"RTN","FHORE21",109,0)
 .S (PCL1,PCL2,PCL7,PCL8)="",PCL3=MEALTM_$J(L1,38-$L(MEALTM))
"RTN","FHORE21",110,0)
 .S PCL4=P1_$J(WARD,38-$L(P1)),PCL5=BIDIS_$J(RM,38-$L(BIDIS))
"RTN","FHORE21",111,0)
 .S PCL6=$E(O1,1,42) D LL4^FHLABEL
"RTN","FHORE21",112,0)
 Q
"RTN","FHORT3")
0^3^B5304161
"RTN","FHORT3",1,0)
FHORT3 ; HISC/REL/NCA - Tubefeeding Utilities ;8/9/96  11:41 ;
"RTN","FHORT3",2,0)
 ;;5.5;DIETETICS;**5,8**;Jan 28, 2005;Build 28
"RTN","FHORT3",3,0)
EN1 ; Edit Tubefeeding Products
"RTN","FHORT3",4,0)
 S CHK=0,TYP="T",EVENT="UPD",REC=1,(NOD1,NOD3)="" K ^TMP($J,"FHNOD2")
"RTN","FHORT3",5,0)
 W ! S (DIC,DIE)="^FH(118.2,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=118.2 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN1:Y<1
"RTN","FHORT3",6,0)
 S DA=+Y,IEN=Y,NOD1=$P($G(^FH(118.2,+IEN,0)),"^",1),NOD3=$G(^FH(118.2,+IEN,"I"))
"RTN","FHORT3",7,0)
 F IEN1=0:0 S IEN1=$O(^FH(118.2,+IEN,1,IEN1)) Q:IEN1<1  S:'$D(^TMP($J,"FHNOD2",IEN1)) ^TMP($J,"FHNOD2",IEN1)=$G(^FH(118.2,+IEN,1,IEN1,0))
"RTN","FHORT3",8,0)
 ;DR STRING MODIFIED TO ONLY EDIT INACTIVE STATUS IF TF PRODUCT INACTIVE
"RTN","FHORT3",9,0)
 S DR="I $G(^FH(118.2,+IEN,""I""))=""Y"" S Y=99;.01;1;2;S:X[""G"" Y=""@1"";3;@1;10:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=118.2 D ^DIE K DA,DIE,DIDEL,DR I $D(^ORD(101.43)) D UPDATE^FHWOR6
"RTN","FHORT3",10,0)
 G EN1
"RTN","FHORT3",11,0)
EN2 ; List Tubefeeding Products
"RTN","FHORT3",12,0)
 W !!,"The list requires a 132 column printer.",!
"RTN","FHORT3",13,0)
 W ! S L=0,DIC="^FH(118.2,",FLDS="[FHTFLST]",BY="NAME"
"RTN","FHORT3",14,0)
 S FR="",TO="",DHD="TUBEFEEDING PRODUCTS" D EN1^DIP,RSET Q
"RTN","FHORT3",15,0)
RSET K %ZIS S IOP="" D ^%ZIS K %ZIS,IOP,BY,DA,DHD,DIC,DIE,DR,FLDS,FR,L,TO,X,Y Q
"RTN","FHORT3",16,0)
KIL K ^TMP($J),CHK,DIC,DIE,DTOUT,EVENT,IEN,IEN1,NOD1,NOD3,REC,TYP,X,Y Q
"RTN","FHORT3",17,0)
POST ; Generate bulletin [NEW PATCH 8]
"RTN","FHORT3",18,0)
 S WRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8)
"RTN","FHORT3",19,0)
 Q:'$D(^FH(119.6,+WRD,0))
"RTN","FHORT3",20,0)
 K XMY,XMB S XMB(1)=$P(^DPT(DFN,0),"^",1),XMB(2)=BID
"RTN","FHORT3",21,0)
 F FHXMKK=0:0 S FHXMKK=$O(^FH(119.6,WRD,2,"B",FHXMKK)) Q:FHXMKK'>0  D
"RTN","FHORT3",22,0)
 .S XMY(FHXMKK)=""
"RTN","FHORT3",23,0)
 Q:'$D(XMY)  S XMB(4)=$S($D(^DPT(DFN,.101)):^(.101),1:"unknown")
"RTN","FHORT3",24,0)
 S XMB(5)="" I CAN S XMB(5)="Diet Orders"_$S(CAN=2:" and Supplemental Feedings",1:"")_" have been cancelled."
"RTN","FHORT3",25,0)
 S XMB(3)=$P(^FH(119.6,WRD,0),"^",1),XMB="FHDITF" D ^XMB
"RTN","FHORT3",26,0)
 K XMY,XMB,XMM,XMDT,FHXMKK Q
"RTN","FHORX1")
0^34^B36979468
"RTN","FHORX1",1,0)
FHORX1 ; HISC/REL/RVD - Diet Activity Report ;9/10/98  15:31
"RTN","FHORX1",2,0)
 ;;5.5;DIETETICS;**1,8**;Jan 28, 2005;Build 28
"RTN","FHORX1",3,0)
 ;RVD patch #1 - get outpatient info from Nutrition Events file.
"RTN","FHORX1",4,0)
 ;
"RTN","FHORX1",5,0)
 D NOW^%DTC S NOW=%,TIM=""
"RTN","FHORX1",6,0)
R0 D DIV^FHOMUTL G:'$D(FHSITE) KIL
"RTN","FHORX1",7,0)
 S FHP=FHSITE
"RTN","FHORX1",8,0)
R1 R !!,"Do you want labels? N// ",X:DTIME G:'$T!(X["^") KIL S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,"  Enter YES or NO" G R1
"RTN","FHORX1",9,0)
 S LAB=X?1"Y".E
"RTN","FHORX1",10,0)
 S:$G(FHP) TIM=$P($G(^FH(119.73,FHP,0)),"^",$S(LAB:3,1:2))
"RTN","FHORX1",11,0)
 I 'TIM S TIM=DT
"RTN","FHORX1",12,0)
 S FHLBFLG=1 I LAB D  I FHLBFLG=0 Q
"RTN","FHORX1",13,0)
 .W ! K DIR,LABSTART S DIR(0)="NA^1:10",DIR("A")="If using laser label sheets, what row do you want to begin printing at? ",DIR("B")=1 D ^DIR
"RTN","FHORX1",14,0)
 .I $D(DIRUT) S FHLBFLG=0 Q
"RTN","FHORX1",15,0)
 .S LABSTART=Y Q
"RTN","FHORX1",16,0)
 S DTP=TIM D DTP^FH
"RTN","FHORX1",17,0)
R3 W !!,"Changes since Date/Time: ",DTP," // " R X:DTIME G:'$T!(X["^") KIL I X'="" S %DT="EXTS" D ^%DT K %DT G:Y<1 R3 S TIM=Y
"RTN","FHORX1",18,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select "_$S(LAB:"LABEL",1:"LIST")_" Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHORX1",19,0)
 I $D(IO("Q")) S FHPGM="Q1^FHORX1",FHLST="TIM^LAB^FHP^LABSTART^FHSITE^FHSITENM" D EN2^FH G KIL
"RTN","FHORX1",20,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHORX1",21,0)
Q1 ; Print the Diet Activity Report
"RTN","FHORX1",22,0)
 S FHTIM=TIM    ;save date/time for recurring meal data.
"RTN","FHORX1",23,0)
 K ^TMP($J) D NOW^%DTC S NOW=%,DTP=TIM,TIM=TIM-.000001 D DTP^FH S H1=DTP_" - " S DTP=NOW D DTP^FH S H1=H1_DTP D ^FHDEV
"RTN","FHORX1",24,0)
 F W1=0:0 S W1=$O(^FH(119.6,W1)) Q:W1<1  D WRD
"RTN","FHORX1",25,0)
 I LAB S LAB=$P($G(^FH(119.9,1,"D",IOS,0)),"^",2) S:'LAB LAB=1
"RTN","FHORX1",26,0)
 F LLL=TIM:0 S LLL=$O(^FH(119.8,"AD",LLL)) Q:LLL<1  F DA=0:0 S DA=$O(^FH(119.8,"AD",LLL,DA)) Q:DA<1  D Q3
"RTN","FHORX1",27,0)
 ;
"RTN","FHORX1",28,0)
OUTP ;get outpatient data
"RTN","FHORX1",29,0)
 F LLL=TIM:0 S LLL=$O(^FH(119.8,"AD",LLL)) Q:LLL<1  F DA=0:0 S DA=$O(^FH(119.8,"AD",LLL,DA)) Q:DA<1  D
"RTN","FHORX1",30,0)
 .S FHPROR=99,(FHTC,FHCOMO)=""
"RTN","FHORX1",31,0)
 .S Z=$G(^FH(119.8,DA,0)) Q:Z=""
"RTN","FHORX1",32,0)
 .S FHDTIM=$P(Z,"^",2),FHDFN=$P(Z,"^",3),FHOUTP=$P(Z,"^",5)
"RTN","FHORX1",33,0)
 .Q:FHOUTP'="Z"
"RTN","FHORX1",34,0)
 .S FHACTI=$P(Z,"^",6)
"RTN","FHORX1",35,0)
 .S FHDESC=$P(Z,"^",8),FHLOCN=$P(FHDESC,",",2)
"RTN","FHORX1",36,0)
 .S FHLOCN=$E(FHLOCN,2,$L(FHLOCN))
"RTN","FHORX1",37,0)
 .S:FHLOCN'="" FHLIEN=$O(^FH(119.6,"B",FHLOCN,0))
"RTN","FHORX1",38,0)
 .I $G(FHLIEN) D
"RTN","FHORX1",39,0)
 ..S FHPROR=$P($G(^FH(119.6,FHLIEN,0)),U,4)
"RTN","FHORX1",40,0)
 ..S FHSERV1=$P($G(^FH(119.6,FHLIEN,0)),U,5)
"RTN","FHORX1",41,0)
 ..I $G(FHSERV1),$D(^FH(119.72,FHSERV1,0)) S FHTC=FHTC_$P(^(0),U,2)
"RTN","FHORX1",42,0)
 ..S FHSERV2=$P($G(^FH(119.6,FHLIEN,0)),U,6)
"RTN","FHORX1",43,0)
 ..I $G(FHSERV2),$D(^FH(119.72,FHSERV2,0)) S FHTC=FHTC_$P(^(0),U,2)
"RTN","FHORX1",44,0)
 ..S FHSERV3=$P($G(^FH(119.6,FHLIEN,0)),U,7)
"RTN","FHORX1",45,0)
 ..I $G(FHSERV3) S FHTC=FHTC_"D"
"RTN","FHORX1",46,0)
 ..S FHCOMO=$P($G(^FH(119.6,FHLIEN,0)),U,8)
"RTN","FHORX1",47,0)
 .I $G(FHSITE),FHCOMO'=FHSITE Q
"RTN","FHORX1",48,0)
 .S FHCLER=$P(Z,"^",9)
"RTN","FHORX1",49,0)
 .S FHPTNM="***"
"RTN","FHORX1",50,0)
 .S:FHLOCN="" FHLOCN="***"
"RTN","FHORX1",51,0)
 .D PATNAME^FHOMUTL
"RTN","FHORX1",52,0)
 .S FHLPAT=FHPROR_"~"_FHLOCN_"~~"_DFN_"~"_FHPTNM
"RTN","FHORX1",53,0)
 .S DTP=FHDTIM D DTP^FH
"RTN","FHORX1",54,0)
 .S ^TMP($J,"O",FHLPAT,DA)=FHACTI_"^"_DTP_"^"_FHBID_"^"_FHDESC_"^"_FHTC
"RTN","FHORX1",55,0)
 ;
"RTN","FHORX1",56,0)
 ;D PROSG   ;print outpatient data
"RTN","FHORX1",57,0)
 ;go to routines for printing report
"RTN","FHORX1",58,0)
 G ^FHORX1A:'LAB,^FHORX1B
"RTN","FHORX1",59,0)
WRD S P0=$G(^FH(119.6,W1,0)),WRDN=$P(P0,"^",1),D2=$P(P0,"^",8),P0=$P(P0,"^",4),P0=$S(P0<1:99,P0<10:"0"_P0,1:P0)
"RTN","FHORX1",60,0)
 I $G(FHP),D2=FHP S ^TMP($J,"W",W1)=P0_"~"_WRDN
"RTN","FHORX1",61,0)
 I '$G(FHP) S ^TMP($J,"W",W1)=P0_"~"_WRDN
"RTN","FHORX1",62,0)
 Q
"RTN","FHORX1",63,0)
Q3 S Z=$G(^FH(119.8,DA,0)) Q:Z=""  S TM1=($P(Z,"^",2)\1),FHDFN=$P(Z,"^",3),ADM=$P(Z,"^",4) Q:'$G(ADM)  Q:'$D(^FHPT(FHDFN,"A",ADM,0))
"RTN","FHORX1",64,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORX1",65,0)
 S WARD=$G(^DPT(DFN,.1)) G:WARD="" Q5 ; Not an inpatient
"RTN","FHORX1",66,0)
 I $G(^DPT("CN",WARD,DFN))'=ADM Q  ; Not current admission
"RTN","FHORX1",67,0)
 S X0=^FHPT(FHDFN,"A",ADM,0),W1=+$P(X0,"^",8) I '$D(^TMP($J,"W",W1)) Q  ; Not in this Comm Office
"RTN","FHORX1",68,0)
 S R1=$G(^DPT(DFN,.101))
"RTN","FHORX1",69,0)
 S RI=$G(^DPT(DFN,.108)) S RE=$S(RI:$O(^FH(119.6,"AR",+RI,W1,0)),1:"")
"RTN","FHORX1",70,0)
 S R0=$S(RE:$P($G(^FH(119.6,W1,"R",+RE,0)),"^",2),1:"")
"RTN","FHORX1",71,0)
 S R0=$S(R0<1:99,R0<10:"0"_R0,1:R0)
"RTN","FHORX1",72,0)
 S ^TMP($J,"I",^TMP($J,"W",W1)_"~"_R0_"~"_R1_"~"_FHDFN,DA)=$P(Z,"^",4,9) Q
"RTN","FHORX1",73,0)
Q5 ; process discharges
"RTN","FHORX1",74,0)
 S W1=+$P(Z,"^",8) Q:'W1  Q:'$D(^TMP($J,"W",W1))
"RTN","FHORX1",75,0)
 S ^TMP($J,"I",^TMP($J,"W",W1)_"~~***~"_FHDFN,DA)=$P(Z,"^",4,9)
"RTN","FHORX1",76,0)
 Q
"RTN","FHORX1",77,0)
 ;
"RTN","FHORX1",78,0)
PROSG ;process recurring, special and guest meals.
"RTN","FHORX1",79,0)
 S FHPLNM=""
"RTN","FHORX1",80,0)
 S:$G(FHP) FHPLNM=$P($G(^FH(119.73,FHP,0)),U,1)
"RTN","FHORX1",81,0)
REC ;for recurring meals
"RTN","FHORX1",82,0)
 ;S FHTMPS=$NA(^TMP($J,"OP","R",FHPLNM))
"RTN","FHORX1",83,0)
 S FHTMPS="^TMP($J,""OP"",""R"")"
"RTN","FHORX1",84,0)
 S FHN="" F  S FHN=$O(@FHTMPS@(FHN)) Q:FHN=""  S FHI="" F  S FHI=$O(@FHTMPS@(FHN,FHI)) Q:FHI=""  S FHJ="" F  S FHJ=$O(@FHTMPS@(FHN,FHI,FHJ)) Q:FHJ=""  D
"RTN","FHORX1",85,0)
 .I (FHPLNM'=""),(FHN'=FHPLNM) Q
"RTN","FHORX1",86,0)
 .S FHPROR="01",FHLOC=""
"RTN","FHORX1",87,0)
 .S:$D(^FH(119.6,"B",FHI)) FHLOC=$O(^FH(119.6,"B",FHI,0))
"RTN","FHORX1",88,0)
 .S:$G(FHLOC) FHPROR=$P($G(^FH(119.6,FHLOC,0)),U,4)
"RTN","FHORX1",89,0)
 .F FHK=0:0 S FHK=$O(@FHTMPS@(FHN,FHI,FHJ,FHK)) Q:(FHK'>0)!(FHK>NOW)  D
"RTN","FHORX1",90,0)
 ..S (FHRDAT,FHIJKDAT)=@FHTMPS@(FHN,FHI,FHJ,FHK)
"RTN","FHORX1",91,0)
 ..S $P(FHRDAT,U,3)=$P(FHIJKDAT,U,18)
"RTN","FHORX1",92,0)
 ..S $P(FHRDAT,U,4)=$P(FHIJKDAT,U,3)
"RTN","FHORX1",93,0)
 ..S $P(FHRDAT,U,9)=$P(FHIJKDAT,U,4)
"RTN","FHORX1",94,0)
 ..S $P(FHRDAT,U,5)=$P(FHIJKDAT,U,8)
"RTN","FHORX1",95,0)
 ..S $P(FHRDAT,U,8)=$P(FHIJKDAT,U,7)
"RTN","FHORX1",96,0)
 ..S $P(FHRDAT,U,13)=$P(FHIJKDAT,U,17)
"RTN","FHORX1",97,0)
 ..S FHLPAT=FHPROR_"~"_FHI_"~~~"_$P(FHIJKDAT,U,1)
"RTN","FHORX1",98,0)
 ..S ^TMP($J,"O",FHLPAT,FHK)="RECURRING"_"^"_FHJ_"^"_FHRDAT
"RTN","FHORX1",99,0)
SPEC ;for special meals
"RTN","FHORX1",100,0)
 ;S FHPLNM=$P($G(^FH(119.73,FHP,0)),U,1) Q:FHPLNM=""    ;quit if no comm
"RTN","FHORX1",101,0)
 ;S FHTMPS=$NA(^TMP($J,"OP","S"))
"RTN","FHORX1",102,0)
 S FHTMPS="^TMP($J,""OP"",""S"")"
"RTN","FHORX1",103,0)
 S FHN="" F  S FHN=$O(@FHTMPS@(FHN)) Q:FHN=""  S FHI="" F  S FHI=$O(@FHTMPS@(FHN,FHI)) Q:FHI=""  S FHJ="" F  S FHJ=$O(@FHTMPS@(FHN,FHI,FHJ)) Q:FHJ=""  D
"RTN","FHORX1",104,0)
 .I (FHPLNM'=""),(FHN'=FHPLNM) Q
"RTN","FHORX1",105,0)
 .S FHPROR="01",FHLOC=""
"RTN","FHORX1",106,0)
 .S:$D(^FH(119.6,"B",FHI)) FHLOC=$O(^FH(119.6,"B",FHI,0))
"RTN","FHORX1",107,0)
 .S:$G(FHLOC) FHPROR=$P($G(^FH(119.6,FHLOC,0)),U,4)
"RTN","FHORX1",108,0)
 .F FHK=0:0 S FHK=$O(@FHTMPS@(FHN,FHI,FHJ,FHK)) Q:(FHK'>0)!(FHK>NOW)  D
"RTN","FHORX1",109,0)
 ..S FHIJKDAT=@FHTMPS@(FHN,FHI,FHJ,FHK)
"RTN","FHORX1",110,0)
 ..S FHLPAT=FHPROR_"~"_FHI_"~~~"_$P(FHIJKDAT,U,1)
"RTN","FHORX1",111,0)
 ..S ^TMP($J,"O",FHLPAT,FHK)="SPECIAL"_"^"_FHJ_"^"_FHIJKDAT
"RTN","FHORX1",112,0)
 ;for guest meals
"RTN","FHORX1",113,0)
GUEST ;S FHTMPS=$NA(^TMP($J,"OP","G",FHPLNM))
"RTN","FHORX1",114,0)
 S FHTMPS="^TMP($J,""OP"",""G"")"
"RTN","FHORX1",115,0)
 S FHN="" F  S FHN=$O(@FHTMPS@(FHN)) Q:FHN=""  S FHI="" F  S FHI=$O(@FHTMPS@(FHN,FHI)) Q:FHI=""  S FHJ="" F  S FHJ=$O(@FHTMPS@(FHN,FHI,FHJ)) Q:FHJ=""  D
"RTN","FHORX1",116,0)
 .I (FHPLNM'=""),(FHN'=FHPLNM) Q
"RTN","FHORX1",117,0)
 .S FHPROR="01",FHLOC=""
"RTN","FHORX1",118,0)
 .S:$D(^FH(119.6,"B",FHI)) FHLOC=$O(^FH(119.6,"B",FHI,0))
"RTN","FHORX1",119,0)
 .S:$G(FHLOC) FHPROR=$P($G(^FH(119.6,FHLOC,0)),U,4)
"RTN","FHORX1",120,0)
 .F FHK=0:0 S FHK=$O(@FHTMPS@(FHN,FHI,FHJ,FHK)) Q:(FHK'>0)!(FHK>NOW)  D
"RTN","FHORX1",121,0)
 ..S FHIJKDAT=@FHTMPS@(FHN,FHI,FHJ,FHK)
"RTN","FHORX1",122,0)
 ..S FHGDIET=$P($G(^FH(119.9,1,0)),U,2)
"RTN","FHORX1",123,0)
 ..S $P(FHIJKDAT,U,9)=$P(FHIJKDAT,U,3)
"RTN","FHORX1",124,0)
 ..S $P(FHIJKDAT,U,14)=$P(FHIJKDAT,U,4)
"RTN","FHORX1",125,0)
 ..S $P(FHIJKDAT,U,15)=$P(FHIJKDAT,U,5)
"RTN","FHORX1",126,0)
 ..S FHGDIETN=$P(FHIJKDAT,U,6)
"RTN","FHORX1",127,0)
 ..I $G(FHGDIETN),$D(^FH(111,FHGDIETN,0)) D
"RTN","FHORX1",128,0)
 ...S FHGDTNM=$P(^FH(111,FHGDIETN,0),U,1)
"RTN","FHORX1",129,0)
 ..E  S:$G(FHGDIET) FHGDTNM=$P($G(^FH(111,FHGDIET,0)),U,1)
"RTN","FHORX1",130,0)
 ..S $P(FHIJKDAT,U,4)=FHGDTNM
"RTN","FHORX1",131,0)
 ..I $G(FHGDIET),$D(^FH(111,FHGDIET,0)) D
"RTN","FHORX1",132,0)
 ...S $P(FHIJKDAT,U,4)=$P(^FH(111,FHGDIET,0),U,1)
"RTN","FHORX1",133,0)
 ..S FHLPAT=FHPROR_"~"_FHI_"~~~"_$P(FHIJKDAT,U,1)
"RTN","FHORX1",134,0)
 ..S ^TMP($J,"O",FHLPAT,FHK)="GUEST"_"^"_FHJ_"^"_FHIJKDAT
"RTN","FHORX1",135,0)
 Q
"RTN","FHORX1",136,0)
 ;
"RTN","FHORX1",137,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHORX1A")
0^35^B16289786
"RTN","FHORX1A",1,0)
FHORX1A ; HISC/REL/NCA/RVD - Diet Activity Report (cont) ;3/17/95  10:06
"RTN","FHORX1A",2,0)
 ;;5.5;DIETETICS;**1,5,8**;Jan 28, 2005;Build 28
"RTN","FHORX1A",3,0)
 ;
"RTN","FHORX1A",4,0)
 ;process inpatient data.
"RTN","FHORX1A",5,0)
 S PG=0 S FHPIO="** INPATIENT **" D HDR
"RTN","FHORX1A",6,0)
 S P0="",NN=0 F  S P0=$O(^TMP($J,"I",P0)) Q:P0=""  D LST
"RTN","FHORX1A",7,0)
 ;
"RTN","FHORX1A",8,0)
 ;process outpatient data.
"RTN","FHORX1A",9,0)
 S FHPIO="** OUTPATIENT **" D HDR
"RTN","FHORX1A",10,0)
 S (FHUSERNM,P0)="",(FHNMSV,NN)=0 F  S P0=$O(^TMP($J,"O",P0)) Q:P0=""  S (FHBRK,FHNON,FHEVE)=0 D LST1
"RTN","FHORX1A",11,0)
 S:$G(FHP) $P(^FH(119.73,FHP,0),"^",2)=NOW
"RTN","FHORX1A",12,0)
 I '$G(FHP) F FHII=0:0 S FHII=$O(^FH(119.73,FHII)) Q:FHII'>0  S $P(^FH(119.73,FHII,0),"^",2)=NOW
"RTN","FHORX1A",13,0)
 Q
"RTN","FHORX1A",14,0)
 ;
"RTN","FHORX1A",15,0)
LST K PP S NP=0 F DA=0:0 S DA=$O(^TMP($J,"I",P0,DA)) Q:DA<1  S Z=^(DA) D L1
"RTN","FHORX1A",16,0)
 D L2 Q
"RTN","FHORX1A",17,0)
 ;
"RTN","FHORX1A",18,0)
LST1 K PP S NP=0 F DA=0:0 S DA=$O(^TMP($J,"O",P0,DA)) Q:DA'>0  D T1
"RTN","FHORX1A",19,0)
 Q
"RTN","FHORX1A",20,0)
 ;
"RTN","FHORX1A",21,0)
L1 ; Process event
"RTN","FHORX1A",22,0)
 S ADM=$P(Z,"^",1),TYP=$P(Z,"^",2),ACT=$P(Z,"^",3),FHORD=$P(Z,"^",4),TXT=$P(Z,"^",5),CLK=$P(Z,"^",6)
"RTN","FHORX1A",23,0)
 I 'FHORD S NN=NN+1,FHORD=NN
"RTN","FHORX1A",24,0)
 I "DIT"[TYP D
"RTN","FHORX1A",25,0)
 .I TYP="D",FHORD=1 S NP=1
"RTN","FHORX1A",26,0)
 .I $D(PP(TYP,ADM_"~"_FHORD)),ACT="C" K PP(TYP,ADM_"~"_FHORD) Q
"RTN","FHORX1A",27,0)
 .K PP(TYP) S PP(TYP,ADM_"~"_FHORD)=ACT_"^"_TXT_"^"_CLK Q
"RTN","FHORX1A",28,0)
 I "OPSF"[TYP D
"RTN","FHORX1A",29,0)
 .I $D(PP(TYP,ADM_"~"_FHORD)),ACT="C" K PP(TYP,ADM_"~"_FHORD) Q
"RTN","FHORX1A",30,0)
 .S PP(TYP,ADM_"~"_FHORD)=ACT_"^"_TXT_"^"_CLK Q
"RTN","FHORX1A",31,0)
 I "LM"[TYP S PP(TYP,ADM_"~"_FHORD)=ACT_"^"_TXT_"^"_CLK
"RTN","FHORX1A",32,0)
 Q
"RTN","FHORX1A",33,0)
 ;
"RTN","FHORX1A",34,0)
L2 S W1=$P(P0,"~",2),R1=$P(P0,"~",4),FHDFN=$P(P0,"~",5)
"RTN","FHORX1A",35,0)
 D PATNAME^FHOMUTL Q:'$G(DFN)
"RTN","FHORX1A",36,0)
 S Y0=$G(^DPT(DFN,0))
"RTN","FHORX1A",37,0)
 S N1=$P(Y0,"^",1)
"RTN","FHORX1A",38,0)
 ;D PID^FHDPA
"RTN","FHORX1A",39,0)
 S TC=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",5),SF=$P($G(^(0)),"^",7),SO=$D(^FHPT("ASP",FHDFN,ADM))
"RTN","FHORX1A",40,0)
 D:$Y>(IOSL-6) HDR W !!,$E(W1_" "_R1,1,20),?22,N1,?50,BID,?63,$S(SF:"SF",1:""),?66,$S(SO:"SO",1:""),?73,TC
"RTN","FHORX1A",41,0)
 D ALG^FHCLN W !,"Allergies: ",$S(ALG="":"None on file",1:ALG),!
"RTN","FHORX1A",42,0)
 D ^FHORX1C D:NP NEWP Q
"RTN","FHORX1A",43,0)
 ;
"RTN","FHORX1A",44,0)
T1 ; Process outpatient event
"RTN","FHORX1A",45,0)
 S FHTDAT=$G(^TMP($J,"O",P0,DA)),DFN=$P(P0,"~",4)
"RTN","FHORX1A",46,0)
 S FHACTI=$P(FHTDAT,"^",1)
"RTN","FHORX1A",47,0)
 S DTP=$P(FHTDAT,"^",2)
"RTN","FHORX1A",48,0)
 S BID=$P(FHTDAT,"^",3)
"RTN","FHORX1A",49,0)
 S FHDESC=$P(FHTDAT,"^",4)
"RTN","FHORX1A",50,0)
 S FHTC=$P(FHTDAT,"^",5)
"RTN","FHORX1A",51,0)
 ;I FHBRK=1,(FHDESC["Recurring Meal cancelled"),(FHDESC["Break") Q
"RTN","FHORX1A",52,0)
 ;I FHNON=1,(FHDESC["Recurring Meal cancelled"),(FHDESC["Noon") Q
"RTN","FHORX1A",53,0)
 ;I FHEVE=1,(FHDESC["Recurring Meal cancelled"),(FHDESC["Eve") Q
"RTN","FHORX1A",54,0)
 ;I (FHDESC["Recurring Meal cancelled"),(FHDESC["Break") S FHBRK=1
"RTN","FHORX1A",55,0)
 ;I (FHDESC["Recurring Meal cancelled"),(FHDESC["Noon") S FHNON=1
"RTN","FHORX1A",56,0)
 ;I (FHDESC["Recurring Meal cancelled"),(FHDESC["Eve") S FHEVE=1
"RTN","FHORX1A",57,0)
 S FHDES1=$P(FHDESC,",",1)
"RTN","FHORX1A",58,0)
 S FHDIET=$P(FHDES1,":",2),FHDIET=$E(FHDIET,2,$L(FHDIET))
"RTN","FHORX1A",59,0)
 I FHDIET'="",$D(^FH(111,"B",FHDIET)) S FHDIDA=$O(^FH(111,"B",FHDIET,0))
"RTN","FHORX1A",60,0)
 I $G(FHDIDA),$D(^FH(111,FHDIDA,0)) S FHDIET=$P(^FH(111,FHDIDA,0),U,7)
"RTN","FHORX1A",61,0)
 S:FHDIET="" FHDIET="NO ORDER"
"RTN","FHORX1A",62,0)
 S Y=FHDIET
"RTN","FHORX1A",63,0)
 S W1=$P(P0,"~",2),R1=$P(P0,"~",4),(N1,FHDPTN)=$P(P0,"~",5)
"RTN","FHORX1A",64,0)
 ;T2
"RTN","FHORX1A",65,0)
 I $D(^FH(119.8,DA,0)) S FHUSER=$P(^(0),U,9) S:$G(FHUSER) FHUSERN=$P(^VA(200,FHUSER,0),U,1)
"RTN","FHORX1A",66,0)
 ;S EVT=FHDESC_" by "_FHUSERN
"RTN","FHORX1A",67,0)
 I FHDESC["Standing" S FHSO1=$P(FHDESC,":",1),FHDESC="Outpatient SO"_$E(FHDESC,$L(FHSO1)+1,$L(FHDESC))
"RTN","FHORX1A",68,0)
 I FHDESC["Supplemental" S FHSF1=$P(FHDESC,":",1),FHDESC="Outpatient SF"_$E(FHDESC,$L(FHSF1)+1,$L(FHDESC))
"RTN","FHORX1A",69,0)
 S EVT=FHDESC
"RTN","FHORX1A",70,0)
 I $Y>(IOSL-6) D HDR
"RTN","FHORX1A",71,0)
 I (FHNMSV=0)!(FHNMSV'=P0) W !!,$E(W1,1,20),?22,FHDPTN,?50,BID,?73,FHTC D ALG^FHCLN W !,"Allergies: ",$S(ALG="":"None on file",1:ALG),!
"RTN","FHORX1A",72,0)
 S FHNMSV=P0
"RTN","FHORX1A",73,0)
 D LNE
"RTN","FHORX1A",74,0)
 Q
"RTN","FHORX1A",75,0)
 ;
"RTN","FHORX1A",76,0)
HDR ;W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !?20,"D I E T   A C T I V I T Y   R E P O R T",?72,"Page ",PG
"RTN","FHORX1A",77,0)
 W @IOF S PG=PG+1 W !?20,"D I E T   A C T I V I T Y   R E P O R T",?72,"Page ",PG
"RTN","FHORX1A",78,0)
 W !!?(80-$L(H1)\2),H1
"RTN","FHORX1A",79,0)
 W !,?30,FHPIO
"RTN","FHORX1A",80,0)
 W !!,"Location",?22,"Patient",?50,"ID#",?62,"Sup/Std  Service"
"RTN","FHORX1A",81,0)
 Q
"RTN","FHORX1A",82,0)
 ;
"RTN","FHORX1A",83,0)
NEWP K ALG I $G(DFN) D ALG^FHCLN I ALG'="" S EVT="Allergies: "_ALG,TYP="A" D LNE^FHORX1C
"RTN","FHORX1A",84,0)
 Q:'$D(^FHPT(FHDFN,"P"))
"RTN","FHORX1A",85,0)
 S X1="Pref:" F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0) D N1
"RTN","FHORX1A",86,0)
 W:$L(X1)>6 !?12,X1 Q
"RTN","FHORX1A",87,0)
 ;
"RTN","FHORX1A",88,0)
N1 S Y=$G(^FH(115.2,+X,0)) Q:$P(Y,"^",2)'="D"
"RTN","FHORX1A",89,0)
 S Y=" "_$P(Y,"^",1)_" ("_$P(X,"^",2)_")"_$S($P(X,"^",4)="Y":" (D)",1:"") I $L(X1)+$L(Y)>48 W !?12,X1 S X1="Pref:"
"RTN","FHORX1A",90,0)
 S X1=X1_Y Q
"RTN","FHORX1A",91,0)
 ;
"RTN","FHORX1A",92,0)
LNE ; Break line if longer than 58 chars
"RTN","FHORX1A",93,0)
 I $Y>(IOSL-6) D HDR^FHORX1A W !
"RTN","FHORX1A",94,0)
 I $L(EVT)<59 G EX
"RTN","FHORX1A",95,0)
 F KK=59:-1:4 Q:$E(EVT,KK)?1P
"RTN","FHORX1A",96,0)
 I KK=4 S KK=45 W !?5,$E(EVT,1,58)
"RTN","FHORX1A",97,0)
 E  W !?5,$E(EVT,1,KK-1)
"RTN","FHORX1A",98,0)
 S EVT="    "_$E(EVT,KK+1,999) G LNE
"RTN","FHORX1A",99,0)
EX W !?5,EVT Q
"RTN","FHORX1B")
0^36^B12528647
"RTN","FHORX1B",1,0)
FHORX1B ; HISC/REL/RVD - Diet Activity Labels ;8/26/94  12:10
"RTN","FHORX1B",2,0)
 ;;5.5;DIETETICS;**1,8**;Jan 28, 2005;Build 28
"RTN","FHORX1B",3,0)
 ;
"RTN","FHORX1B",4,0)
 ;^tmp($J,"I" - for inpatient data.
"RTN","FHORX1B",5,0)
 ;^tmp($J,"O" - for outpatient data;
"RTN","FHORX1B",6,0)
 ;
"RTN","FHORX1B",7,0)
 ;S FHPIO="** INPATIENT **"
"RTN","FHORX1B",8,0)
 S S2=LAB=2*5+36 I LAB<3 D LHD
"RTN","FHORX1B",9,0)
 S COUNT=0,LINE=1
"RTN","FHORX1B",10,0)
 S P0="",NN=0 F  S P0=$O(^TMP($J,"I",P0)) Q:P0=""  D LST
"RTN","FHORX1B",11,0)
 ;S FHPIO="** OUTPATIENT **"
"RTN","FHORX1B",12,0)
 D LST1    ;go process event for outpatient
"RTN","FHORX1B",13,0)
 S:$G(FHP) $P(^FH(119.73,FHP,0),"^",3)=NOW
"RTN","FHORX1B",14,0)
 I '$G(FHP) F FHII=0:0 S FHII=$O(^FH(119.73,FHII)) Q:FHII'>0  S $P(^FH(119.73,FHII,0),"^",3)=NOW
"RTN","FHORX1B",15,0)
 I LAB>2 D DPLL^FHLABEL
"RTN","FHORX1B",16,0)
 I LAB<3 F L=1:1:18 W !
"RTN","FHORX1B",17,0)
 K ^TMP($J) D KILL^XUSCLEAN
"RTN","FHORX1B",18,0)
 Q
"RTN","FHORX1B",19,0)
LST K PP S NP=0,LOC=0 F DA=0:0 S DA=$O(^TMP($J,"I",P0,DA)) Q:DA<1  S Z=^(DA) D L1
"RTN","FHORX1B",20,0)
 Q:LOC
"RTN","FHORX1B",21,0)
 I $D(PP) D L2 D:$G(FHORD) WRT
"RTN","FHORX1B",22,0)
 Q
"RTN","FHORX1B",23,0)
 ;
"RTN","FHORX1B",24,0)
LST1 ;process outpatient
"RTN","FHORX1B",25,0)
 K PP S NP=0,LOC=0,P0="" F  S P0=$O(^TMP($J,"O",P0)) Q:P0=""  D T2
"RTN","FHORX1B",26,0)
 Q
"RTN","FHORX1B",27,0)
 ;
"RTN","FHORX1B",28,0)
L1 ; Process event for inpatient
"RTN","FHORX1B",29,0)
 S ADM=$P(Z,"^",1),TYP=$P(Z,"^",2),ACT=$P(Z,"^",3),FHORD=$P(Z,"^",4),TXT=$P(Z,"^",5)
"RTN","FHORX1B",30,0)
 Q:"DIL"'[TYP  I 'FHORD S NN=NN+1,FHORD=NN
"RTN","FHORX1B",31,0)
 I "DI"[TYP D
"RTN","FHORX1B",32,0)
 .I $D(PP(TYP,ADM_"~"_FHORD)),ACT="C" K PP(TYP,ADM_"~"_FHORD) Q
"RTN","FHORX1B",33,0)
 .K PP(TYP) S PP(TYP,ADM_"~"_FHORD)=ACT_"^"_TXT Q
"RTN","FHORX1B",34,0)
 I TYP="L" D
"RTN","FHORX1B",35,0)
 .I ACT="D" S LOC=1 Q
"RTN","FHORX1B",36,0)
 .S PP(TYP,ADM_"~"_FHORD)=ACT_"^"_TXT S:ACT="A" NP=1 Q
"RTN","FHORX1B",37,0)
 Q
"RTN","FHORX1B",38,0)
 ;
"RTN","FHORX1B",39,0)
L2 S W1=$P(P0,"~",2),R1=$P(P0,"~",4),FHDFN=$P(P0,"~",5)
"RTN","FHORX1B",40,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHORX1B",41,0)
 S Y0=$G(^DPT(DFN,0))
"RTN","FHORX1B",42,0)
 S N1=$P(Y0,"^",1) D PID^FHDPA
"RTN","FHORX1B",43,0)
 S TC=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",5),IS=$P($G(^(0)),"^",10),FHORD=+$P($G(^(0)),"^",2)
"RTN","FHORX1B",44,0)
 Q:'FHORD
"RTN","FHORX1B",45,0)
 I IS S IS=$G(^FH(119.4,IS,0)) I IS'="" S TC=TC_"-"_$P(IS,"^",2)_$P(IS,"^",3)
"RTN","FHORX1B",46,0)
 S X=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0)) D CUR
"RTN","FHORX1B",47,0)
 Q
"RTN","FHORX1B",48,0)
 ;
"RTN","FHORX1B",49,0)
T2 ;get the last outpatient entry.
"RTN","FHORX1B",50,0)
 K PP S NP=0,LOC=0 F FH8=0:0 S FH8=$O(^TMP($J,"O",P0,FH8)) Q:FH8'>0  D
"RTN","FHORX1B",51,0)
 .S FHTDAT=$G(^TMP($J,"O",P0,FH8))
"RTN","FHORX1B",52,0)
 .S FHACTI=$P(FHTDAT,"^",1)
"RTN","FHORX1B",53,0)
 .Q:FHACTI'="O"
"RTN","FHORX1B",54,0)
 .S BID=$P(FHTDAT,"^",3)
"RTN","FHORX1B",55,0)
 .S FHDESC=$P(FHTDAT,"^",4)
"RTN","FHORX1B",56,0)
 .S TC=$P(FHTDAT,"^",5)
"RTN","FHORX1B",57,0)
 .S FHDES1=$P(FHDESC,",",1)
"RTN","FHORX1B",58,0)
 .S FHDIET=$P(FHDES1,":",2),FHDIET=$E(FHDIET,2,$L(FHDIET))
"RTN","FHORX1B",59,0)
 .I FHDIET'="",$D(^FH(111,"B",FHDIET)) S FHDIDA=$O(^FH(111,"B",FHDIET,0))
"RTN","FHORX1B",60,0)
 .Q:'$G(FHDIDA)
"RTN","FHORX1B",61,0)
 .I $G(FHDIDA),$D(^FH(111,FHDIDA,0)) S FHDIET=$P(^FH(111,FHDIDA,0),U,7)
"RTN","FHORX1B",62,0)
 .;S:FHDIET="" FHDIET="NO ORDER"
"RTN","FHORX1B",63,0)
 .S Y=FHDIET
"RTN","FHORX1B",64,0)
 .S W1=$P(P0,"~",2),R1="",N1=$P(P0,"~",5)
"RTN","FHORX1B",65,0)
 .D WRT
"RTN","FHORX1B",66,0)
 Q
"RTN","FHORX1B",67,0)
 ;
"RTN","FHORX1B",68,0)
WRT S ALG="" D ALG^FHCLN
"RTN","FHORX1B",69,0)
 I LAB>2 D LL Q
"RTN","FHORX1B",70,0)
 W !,$E(N1,1,S2-5-$L(W1)),?(S2-3-$L(W1)),W1,!,BID W:NP " *"
"RTN","FHORX1B",71,0)
 W @FHIO("EON") W ?(S2-3\2),TC W @FHIO("EOF") W ?(S2-3-$L(R1)),R1 W @FHIO("EON") I $L(Y)<S2 W:LAB=2 ! W !,$S(ALG="":"",1:"*ALG"),!,Y,!!
"RTN","FHORX1B",72,0)
 E  S L=$S($L($P(Y,",",1,3))<S2:3,1:2) W !!,$P(Y,",",1,L) W:LAB=2 ! W !,$E($P(Y,",",L+1,5),2,99),!
"RTN","FHORX1B",73,0)
 W @FHIO("EOF") W:LAB=2 ?(S2-20),$P(H1," - ",2),!! Q
"RTN","FHORX1B",74,0)
 ;
"RTN","FHORX1B",75,0)
LHD S A1=S2-30\2 W:LAB=2 ! W !?A1,"***************************",!?A1,"*",?(A1+26),"*",!?A1,"*",?(A1+5),$P(H1," - ",2),?(A1+26),"*"
"RTN","FHORX1B",76,0)
 W !?A1,"*",?(A1+26),"*",!?A1,"***************************",! W:LAB=2 !! Q
"RTN","FHORX1B",77,0)
CUR S Y="" Q:X=""  S FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7)
"RTN","FHORX1B",78,0)
 I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") Q:%<1  S Y=$P($E(FHDU,%,999),";",1) Q
"RTN","FHORX1B",79,0)
 F A1=1:1:5 S D3=$P(FHOR,"^",A1) I D3 S:Y'="" Y=Y_", " S Y=Y_$P(^FH(111,D3,0),"^",7)
"RTN","FHORX1B",80,0)
 Q
"RTN","FHORX1B",81,0)
LL ;
"RTN","FHORX1B",82,0)
 S X1=TC S:NP BID=BID_" *"
"RTN","FHORX1B",83,0)
 D LAB^FHLABEL Q
"RTN","FHREC4")
0^30^B5747106
"RTN","FHREC4",1,0)
FHREC4 ; HISC/REL - Recipe List ;3/6/95  15:50
"RTN","FHREC4",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHREC4",3,0)
 W !!,"The list requires a 132 column printer.",!
"RTN","FHREC4",4,0)
 W ! K IOP,%ZIS S %ZIS("A")="Select LIST Printer: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHREC4",5,0)
 I $D(IO("Q")) S FHPGM="Q1^FHREC4",FHLST="" D EN2^FH G KIL
"RTN","FHREC4",6,0)
 U IO D Q1 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHREC4",7,0)
Q1 ; Print Recipe List
"RTN","FHREC4",8,0)
 D NOW^%DTC S DTP=% D DTP^FH
"RTN","FHREC4",9,0)
 K ^TMP($J) F D0=0:0 S D0=$O(^FH(114,D0)) Q:D0<1  S X=^(D0,0) D SET
"RTN","FHREC4",10,0)
 S PG=0 D HDR S CAT=";M:MIX;D:DEHYDRATED;F:FROZEN;C:CANNED;X:CONCENTRATED;S:SCRATCH;I:IND/R-T-S;P:PARTIALLY PREP;R:R-T-S;"
"RTN","FHREC4",11,0)
 S N2="" F K=0:0 S N2=$O(^TMP($J,N2)) Q:N2=""  S N1="" F L=0:0 S N1=$O(^TMP($J,N2,N1)) Q:N1=""  F D0=0:0 S D0=$O(^TMP($J,N2,N1,D0)) Q:D0<1  D LST
"RTN","FHREC4",12,0)
 W ! Q
"RTN","FHREC4",13,0)
LST D:$Y>(IOSL-8) HDR S X=$G(^FH(114,D0,0))
"RTN","FHREC4",14,0)
 W !,$P(X,"^",1),?31,$P(X,"^",9) W:N2'="*****" ?58,N2
"RTN","FHREC4",15,0)
 S Y=$P(X,"^",11) I Y'="" S %=$F(CAT,";"_Y_":") S:%>0 Y=$P($E(CAT,%,999),";",1)
"RTN","FHREC4",16,0)
 W ?74,Y,?93,$P(X,"^",10),?101,$S($P(X,"^",8)="N":"NO",1:"")
"RTN","FHREC4",17,0)
 S Y=$P(X,"^",13) W:Y ?107,$J(Y,6,3)
"RTN","FHREC4",18,0)
 I $O(^FH(114,D0,"R",0)) S FHLN="" W ?115,"   YES",!?5,"EMBEDDED RECIPES: " F FHEM=0:0 S FHEM=$O(^FH(114,D0,"R",FHEM)) Q:FHEM'>0  D
"RTN","FHREC4",19,0)
 .S FHEMZ=$P($G(^FH(114,D0,"R",FHEM,0)),U,1)
"RTN","FHREC4",20,0)
 .I FHLN=1 W !
"RTN","FHREC4",21,0)
 .W ?23,$E($P($G(^FH(114,FHEMZ,0)),U,1),1,31) S FHLN=1
"RTN","FHREC4",22,0)
 Q
"RTN","FHREC4",23,0)
SET S N1=$P(X,"^",1),N2=$P(X,"^",7) I N2 S N2=$P($G(^FH(114.1,N2,0)),"^",1)
"RTN","FHREC4",24,0)
 S:N2="" N2="*****" S ^TMP($J,N2,N1,D0)="" Q
"RTN","FHREC4",25,0)
HDR W:'($E(IOST,1,2)'="C-"&'PG) @IOF S PG=PG+1 W !,DTP,?54,"R E C I P E   L I S T",?124,"Page ",PG
"RTN","FHREC4",26,0)
 W !!,"NAME",?31,"SYNONYM",?58,"CATEGORY",?74,"PRE-PREP STATE",?91,"E-PREP",?100,"PRINT    COST",?115,"RECIPES EMBEDDED?"
"RTN","FHREC4",27,0)
 W !,"------------------------------------------------------------------------------------------------------------------------------------",! Q
"RTN","FHREC4",28,0)
KIL K ^TMP($J) G KILL^XUSCLEAN
"RTN","FHSEL1")
0^23^B22413340
"RTN","FHSEL1",1,0)
FHSEL1 ; HISC/REL/NCA/JH/RTK/FAI - Patient Preferences ;10/20/04  10:19
"RTN","FHSEL1",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHSEL1",3,0)
EN1 ; Enter/Edit Preference File entries
"RTN","FHSEL1",4,0)
 I $G(FHALGMZ)=1 QUIT
"RTN","FHSEL1",5,0)
 W ! S (DIC,DIE)="^FH(115.2,",DIC(0)="AEQLM",DIC("DR")=".01;1",DLAYGO=115.2 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN1:Y<1
"RTN","FHSEL1",6,0)
 S (FHDA,DA)=+Y,DR=".01;26;1;S:X=""D"" Y=0;3;20;S:'X Y=99;21;27;99" D ^DIE K DA,DIE,DR
"RTN","FHSEL1",7,0)
 I $P($G(^FH(115.2,FHDA,0)),"^",2)'="D"!($D(Y)) G EN1
"RTN","FHSEL1",8,0)
TRAN R !!,"Do you want to import Recipes from another Food Preference? N // ",X:DTIME
"RTN","FHSEL1",9,0)
 G:'$T!(X["^") EN1
"RTN","FHSEL1",10,0)
 S:X="" X="N" D TR^FH I $P("YES",X,1)'="",$P("NO",X,1)'="" W *7,!,"  Answer YES or NO" G TRAN
"RTN","FHSEL1",11,0)
 S ANS=X?1"Y".E G:'ANS DIS
"RTN","FHSEL1",12,0)
T1 W ! K DIC S DIC="^FH(115.2,",DIC(0)="AEMQ",DIC("S")="I $P(^(0),U,2)=""D""" D ^DIC K DIC
"RTN","FHSEL1",13,0)
 G KIL:"^"[X!($D(DTOUT)),T1:Y<1 S FHD=+Y
"RTN","FHSEL1",14,0)
 S:'$D(^FH(115.2,FHDA,"X",0)) ^(0)="^115.21P^^"
"RTN","FHSEL1",15,0)
 F DIS=0:0 S DIS=$O(^FH(115.2,FHD,"X",DIS)) Q:DIS<1  S L1=$G(^(DIS,0)) D ADD
"RTN","FHSEL1",16,0)
DIS S DA=FHDA,DIE="^FH(115.2,",DR="10;27;99" D ^DIE K DA,DIE,DR G EN1
"RTN","FHSEL1",17,0)
ADD ; Add dislikes recipes from another food preference
"RTN","FHSEL1",18,0)
 I $D(^FH(115.2,FHDA,"X","B",+L1)) Q
"RTN","FHSEL1",19,0)
A L +^FH(115.2,FHDA,"X",0)
"RTN","FHSEL1",20,0)
 S FHX1=$G(^FH(115.2,FHDA,"X",0)),FHX2=$P(FHX1,"^",3)+1
"RTN","FHSEL1",21,0)
 S $P(^FH(115.2,FHDA,"X",0),"^",3)=FHX2
"RTN","FHSEL1",22,0)
 L -^FH(115.2,FHDA,"X",0) I $D(^FH(115.2,FHDA,"X",FHX2,0)) G A
"RTN","FHSEL1",23,0)
 S $P(^FH(115.2,FHDA,"X",0),"^",4)=($P(FHX1,"^",4)+1)
"RTN","FHSEL1",24,0)
 S ^FH(115.2,FHDA,"X",FHX2,0)=+L1
"RTN","FHSEL1",25,0)
 S ^FH(115.2,FHDA,"X","B",+L1,FHX2)=""
"RTN","FHSEL1",26,0)
 Q
"RTN","FHSEL1",27,0)
EN2 ; List Preference File
"RTN","FHSEL1",28,0)
 W ! K DIR S DIR("A")="Do you want to print recipes?: "
"RTN","FHSEL1",29,0)
 S DIR(0)="YA",DIR("B")="Y" D ^DIR
"RTN","FHSEL1",30,0)
 I $D(DIRUT) K %ZIS S IOP="" D ^%ZIS G KIL
"RTN","FHSEL1",31,0)
 S FHALRC=Y I FHALRC=1 D EN2OLD Q
"RTN","FHSEL1",32,0)
 I FHALRC=0 D EN2NEW Q
"RTN","FHSEL1",33,0)
 Q
"RTN","FHSEL1",34,0)
EN2OLD W ! S L=0,DIC="^FH(115.2,",FLDS="[FHSELIST]",BY="LIKE OR DISLIKE,NAME"
"RTN","FHSEL1",35,0)
 S FR="@",TO="",DHD="PATIENT PREFERENCES" D EN1^DIP
"RTN","FHSEL1",36,0)
 K %ZIS S IOP="" D ^%ZIS G KIL
"RTN","FHSEL1",37,0)
EN2NEW W ! S L=0,DIC="^FH(115.2,",FLDS="[FHSELST2]",BY="LIKE OR DISLIKE,NAME"
"RTN","FHSEL1",38,0)
 S FR="@",TO="",DHD="PATIENT PREFERENCES" D EN1^DIP
"RTN","FHSEL1",39,0)
 K %ZIS S IOP="" D ^%ZIS G KIL
"RTN","FHSEL1",40,0)
EN3 ; Enter/Edit Patient Preferences
"RTN","FHSEL1",41,0)
 S FHALL=1 D ^FHOMDPA G:'FHDFN KIL D DISP S DA=FHDFN W !
"RTN","FHSEL1",42,0)
 K PP F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0),PP(+X)=$P(X,"^",2,3)
"RTN","FHSEL1",43,0)
 S DIE="^FHPT(",DR="[FHSEL]",DIE("NO^")="" D ^DIE K DIE S FLG=0
"RTN","FHSEL1",44,0)
 S:$D(Y) FLG=1
"RTN","FHSEL1",45,0)
 S STR="" F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0) S:$P(X,"^",2)="" STR=STR_K_"," S:$P(X,"^",2)'="" $P(PP(+X),"^",3,4)=$P(X,"^",2)_"^"_$P(X,"^",3)
"RTN","FHSEL1",46,0)
 D N31 K PP
"RTN","FHSEL1",47,0)
 I FLG,STR'="" D
"RTN","FHSEL1",48,0)
 .S DA(1)=FHDFN F K=1:1 Q:'$P(STR,",",K)  S DA=$P(STR,",",K) D
"RTN","FHSEL1",49,0)
 ..S DIK="^FHPT("_DA(1)_",""P""," D ^DIK
"RTN","FHSEL1",50,0)
 ..Q
"RTN","FHSEL1",51,0)
 .W *7,!,"<Preference deleted>" K DIK,DA Q
"RTN","FHSEL1",52,0)
 G EN3
"RTN","FHSEL1",53,0)
N31 F K=0:0 S K=$O(PP(K)) Q:K<1  D N33
"RTN","FHSEL1",54,0)
 S KK=0,COM=""
"RTN","FHSEL1",55,0)
N32 S KK=$O(PP(KK)) I KK<1 Q:COM=""  S EVT="P^O^^"_$E(COM,2,999) D ^FHORX Q
"RTN","FHSEL1",56,0)
 I $L(COM)+$L(PP(KK))>120 S EVT="P^O^^"_$E(COM,2,999) D ^FHORX S COM=""
"RTN","FHSEL1",57,0)
 S COM=COM_" "_PP(KK) G N32
"RTN","FHSEL1",58,0)
N33 S X1=$P(PP(K),"^",1,2),X2=$P(PP(K),"^",3,4) I X1=X2 K PP(K) Q
"RTN","FHSEL1",59,0)
 S X1=$S(X1="^":"Add",X2="":"Del",1:"Mod"),Q=$P(X2,"^",2)
"RTN","FHSEL1",60,0)
 I X1["Mod" D
"RTN","FHSEL1",61,0)
 .S NOD=$O(^FHPT(FHDFN,"P","B",K,0)) Q:NOD<1
"RTN","FHSEL1",62,0)
 .S:$P($G(^FHPT(FHDFN,"P",NOD,0)),"^",4)="Y" $P(^FHPT(FHDFN,"P",NOD,0),"^",4)=""
"RTN","FHSEL1",63,0)
 .Q
"RTN","FHSEL1",64,0)
 S PP(K)=X1_" "_$S(X2="":"",Q:Q_" ",1:"1 ")_$P(^FH(115.2,K,0),"^",1) S:X2'="" PP(K)=PP(K)_" ("_$P(X2,"^",1)_")" Q
"RTN","FHSEL1",65,0)
EN4 ; Display Patient Preferences
"RTN","FHSEL1",66,0)
 S FHALL=1 D ^FHOMDPA G:'DFN KIL G:'FHDFN KIL D E41 G EN4
"RTN","FHSEL1",67,0)
E41 ; Display Patient Header and Food Preferences
"RTN","FHSEL1",68,0)
 D NOW^%DTC S NOW=%,DT=NOW\1
"RTN","FHSEL1",69,0)
 S Y(0)=^DPT(DFN,0),SEX=$P(Y(0),"^",2),DOB=$P(Y(0),"^",3) D PID^FHDPA
"RTN","FHSEL1",70,0)
 S AGE=$E(NOW,1,3)-$E(DOB,1,3)-($E(NOW,4,7)<$E(DOB,4,7))
"RTN","FHSEL1",71,0)
 W @IOF,!,PID,?17,$P(Y(0),"^",1),?49,$S(SEX="M":"Male",SEX="F":"Female",1:""),?55,"Age ",AGE
"RTN","FHSEL1",72,0)
DISP ; Display Food Preferences
"RTN","FHSEL1",73,0)
 W !!?21,"Likes",?54,"DisLikes",!
"RTN","FHSEL1",74,0)
 K P S P1=1 F K=0:0 S K=$O(^FHPT(FHDFN,"P",K)) Q:K<1  S X=^(K,0) D SP
"RTN","FHSEL1",75,0)
 W ! S (M,MM)="" F  S M=$O(P(M)) Q:M=""  I $D(P(M)) W $P(M,"~",2) D  S MM=M
"RTN","FHSEL1",76,0)
 .  S (P1,P2)=0 F  S:P1'="" P1=$O(P(M,"L",P1)) S X1=$S(P1>0:P(M,"L",P1),1:"") S:P2'="" P2=$O(P(M,"D",P2)) S X2=$S(P2>0:P(M,"D",P2),1:"") Q:P1=""&(P2="")  D P0  W:MM'=M !
"RTN","FHSEL1",77,0)
 .  Q
"RTN","FHSEL1",78,0)
 I $O(P(""))="" W !,"No Food Preferences on file",!
"RTN","FHSEL1",79,0)
 Q
"RTN","FHSEL1",80,0)
P0 I X1'="" W ?12 S X=X1 D P1 S X1=X
"RTN","FHSEL1",81,0)
 I X2'="" W ?46 S X=X2 D P1 S X2=X
"RTN","FHSEL1",82,0)
 Q:X1=""&(X2="")  W ! G P0
"RTN","FHSEL1",83,0)
P1 I $L(X)<34 W X S X="" Q
"RTN","FHSEL1",84,0)
 F KK=35:-1:1 Q:$E(X,KK-1,KK)=", "
"RTN","FHSEL1",85,0)
 W $E(X,1,KK-2) S X=$E(X,KK+1,999) Q
"RTN","FHSEL1",86,0)
SP Q:+X<1  S M1=$P(X,"^",2) Q:M1=""  S:M1="A" M1="BNE" S Z=$G(^FH(115.2,+X,0)) Q:$P(Z,U)=""!$P(Z,U,2)=""  S L1=$P(Z,"^",1),KK=$P(Z,"^",2),M="",DAS=$P(X,"^",4)
"RTN","FHSEL1",87,0)
 I KK="L" S Q=$P(X,"^",3),L1=$S(Q:Q,1:1)_" "_L1
"RTN","FHSEL1",88,0)
 I M1="BNE" S M="1~All Meals" G SP1
"RTN","FHSEL1",89,0)
 S Z1=$E(M1,1) I Z1'="" S M=$S(Z1="B":"2~Break",Z1="N":"3~Noon",1:"4~Even")
"RTN","FHSEL1",90,0)
 S Z1=$E(M1,2) I Z1'="" S M=M_","_$S(Z1="B":"Break",Z1="N":"Noon",1:"Even")
"RTN","FHSEL1",91,0)
SP1 S:'$D(P(M,KK,P1)) P(M,KK,P1)="" I $L(P(M,KK,P1))+$L(L1)<255 S P(M,KK,P1)=P(M,KK,P1)_$S(P(M,KK,P1)="":"",1:", ")_L1_$S(DAS="Y":" (D)",1:"")
"RTN","FHSEL1",92,0)
 E  S:'$D(P(M,KK,K)) P(M,KK,K)="" S P(M,KK,K)=L1_$S(DAS="Y":" (D)",1:"") S P1=K
"RTN","FHSEL1",93,0)
 Q
"RTN","FHSEL1",94,0)
KIL G KILL^XUSCLEAN
"RTN","FHSELA1")
0^24^B45773612
"RTN","FHSELA1",1,0)
FHSELA1 ;Hines OIFO/RTK - Map GMR Allergy file to Food Prefs ;3/07/2007
"RTN","FHSELA1",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHSELA1",3,0)
 ;
"RTN","FHSELA1",4,0)
CREATE ; Check for any missing Allergy-type FP's or one's not renamed in 115.2
"RTN","FHSELA1",5,0)
 ; and allow user to create the FP on the fly
"RTN","FHSELA1",6,0)
 D ^FHSELA2 S NUM=0,FHQUIT=0
"RTN","FHSELA1",7,0)
 W !!!,"The following Allergy Food Preference titles are not on file."
"RTN","FHSELA1",8,0)
 W !,"You may use this option to create these Food Preference entries:"
"RTN","FHSELA1",9,0)
 D CRLIST I NUM=0 W !,"No Food Preferences need to be mapped." D EXIT Q
"RTN","FHSELA1",10,0)
 I FHQUIT=1 D EXIT Q
"RTN","FHSELA1",11,0)
 I FHRESP=""!(FHRESP="M") D EXIT Q
"RTN","FHSELA1",12,0)
 S FHAFPNM=$P(FHLIST(FHRESP),"^",1)
"RTN","FHSELA1",13,0)
 W !,FHAFPNM," "
"RTN","FHSELA1",14,0)
 K DIR S DIR("A")="Add to Food Preference file",DIR(0)="Y" D ^DIR
"RTN","FHSELA1",15,0)
 I $D(DIRUT) D EXIT Q
"RTN","FHSELA1",16,0)
 I Y'=1 D CREATE Q
"RTN","FHSELA1",17,0)
 D ADD
"RTN","FHSELA1",18,0)
 W !!,"  ...done.  ",FHAFPNM," Food Preference has been added!" H 1
"RTN","FHSELA1",19,0)
 D CREATE Q
"RTN","FHSELA1",20,0)
 D EXIT Q
"RTN","FHSELA1",21,0)
CRLIST ;
"RTN","FHSELA1",22,0)
 W !!?5,"MISSING FOOD PREFERENCE LIST"
"RTN","FHSELA1",23,0)
 W !?5,"============================"
"RTN","FHSELA1",24,0)
 S FHSEL=0,FHK=""
"RTN","FHSELA1",25,0)
 F  S FHK=$O(^TMP($J,"FHALG",FHK)) Q:FHK=""!(FHQUIT=1)!(FHSEL=1)  D
"RTN","FHSELA1",26,0)
 .S FHFPS=$P(^TMP($J,"FHALG",FHK),";",1,99)
"RTN","FHSELA1",27,0)
 .S FHZ1="ALLERGY - "_$P(FHFPS,";",1)
"RTN","FHSELA1",28,0)
 .I $D(^FH(115.2,"B",FHZ1)) Q
"RTN","FHSELA1",29,0)
 .S NUM=NUM+1,PAD=$S($L(NUM)=1:" ",1:"") W !,PAD,NUM
"RTN","FHSELA1",30,0)
 .W ?8,FHZ1
"RTN","FHSELA1",31,0)
 .S FHLIST(NUM)=FHZ1_"^"_FHFPS
"RTN","FHSELA1",32,0)
 .I NUM#5=0!($O(^TMP($J,"FHALG",FHK))="") D PG Q
"RTN","FHSELA1",33,0)
 .Q
"RTN","FHSELA1",34,0)
 I FHQUIT=0,FHSEL=0,NUM#5'=0 D PG Q
"RTN","FHSELA1",35,0)
 Q
"RTN","FHSELA1",36,0)
ADD ;
"RTN","FHSELA1",37,0)
 S FHALGMZ=1
"RTN","FHSELA1",38,0)
 S X=FHAFPNM K DIC,DO
"RTN","FHSELA1",39,0)
 S (DIC,DIE)="^FH(115.2,",DIC(0)="L" D FILE^DICN
"RTN","FHSELA1",40,0)
 S (FHDA,DA)=+Y,DR=".01;26;1//DISLIKE;S:X=""D"" Y=0;3;20;S:'X Y=99;21;99"
"RTN","FHSELA1",41,0)
 D ^DIE K DA,DIE,DR
"RTN","FHSELA1",42,0)
 D TRAN^FHSEL1
"RTN","FHSELA1",43,0)
 Q
"RTN","FHSELA1",44,0)
PG ;
"RTN","FHSELA1",45,0)
 S FHRESP="" W ! K DIR
"RTN","FHSELA1",46,0)
 S DIR("A")="Select Food Preference or 'M' to see more ('^' to EXIT)"
"RTN","FHSELA1",47,0)
 S DIR(0)="F",DIR("B")="M" D ^DIR I $D(DIRUT) S FHQUIT=1 Q
"RTN","FHSELA1",48,0)
 S FHRESP=Y
"RTN","FHSELA1",49,0)
 I FHRESP?1"M" Q
"RTN","FHSELA1",50,0)
 I FHRESP?1.3N,FHRESP>0,FHRESP<(NUM+1) S FHSEL=1 Q
"RTN","FHSELA1",51,0)
 W !!,"Select from 1 to ",NUM D PG Q
"RTN","FHSELA1",52,0)
 Q
"RTN","FHSELA1",53,0)
MAP ; Map allergies by setting pointers in 115.2 to correct entries in 120.82
"RTN","FHSELA1",54,0)
 D ^FHSELA2
"RTN","FHSELA1",55,0)
 S FHK=""
"RTN","FHSELA1",56,0)
 F  S FHK=$O(^TMP($J,"FHALG",FHK)) Q:FHK=""  D
"RTN","FHSELA1",57,0)
 .S FHFPS=$P(^TMP($J,"FHALG",FHK),";",1,99)
"RTN","FHSELA1",58,0)
 .S FHZ1="ALLERGY - "_$P(FHFPS,";",1)
"RTN","FHSELA1",59,0)
 .I '$D(^FH(115.2,"B",FHZ1)) Q  ;not set-up in 115.2, can't map
"RTN","FHSELA1",60,0)
 .S FHFPIEN=$O(^FH(115.2,"B",FHZ1,""))
"RTN","FHSELA1",61,0)
 .S FHALMP=$P(FHFPS,";",2,99) I FHALMP="" Q  ;no allergies to map
"RTN","FHSELA1",62,0)
 .S FHZ=0 F  S FHZ=FHZ+1 S FHANAM=$P(FHALMP,";",FHZ) Q:FHANAM=""  D
"RTN","FHSELA1",63,0)
 ..D LOOKUP
"RTN","FHSELA1",64,0)
 Q
"RTN","FHSELA1",65,0)
LOOKUP ; Look-up the Allergy in 120.82 and set the pointer
"RTN","FHSELA1",66,0)
 S FHX=FHANAM
"RTN","FHSELA1",67,0)
 F FHVAL=0:0 S FHVAL=$O(^GMRD(120.82,"B",FHX,FHVAL)) Q:FHVAL'>0  D
"RTN","FHSELA1",68,0)
 .I $D(^FH(115.2,FHFPIEN,"ALG","B",FHVAL)) Q  ;pointer already exists
"RTN","FHSELA1",69,0)
 .S Y=FHVAL K DIC,DO S DA(1)=FHFPIEN,DIC="^FH(115.2,"_DA(1)_",""ALG"","
"RTN","FHSELA1",70,0)
 .S DIC(0)="L",DIC("P")=$P(^DD(115.2,25,0),U,2),X=+Y
"RTN","FHSELA1",71,0)
 .D FILE^DICN
"RTN","FHSELA1",72,0)
 Q
"RTN","FHSELA1",73,0)
DISPMAP ;
"RTN","FHSELA1",74,0)
 W !!,"This option can be used to display the Standard GMR Allergy"
"RTN","FHSELA1",75,0)
 W !,"entries and the Food Preferences they map to.",!! K DIR
"RTN","FHSELA1",76,0)
 S DIR("A")="Display Map by Allergies or by Food Preferences (A/F): "
"RTN","FHSELA1",77,0)
 S DIR(0)="SA^A:Allergies;F:Food Preferences" D ^DIR
"RTN","FHSELA1",78,0)
 I $D(DIRUT) D EXIT Q
"RTN","FHSELA1",79,0)
 S FHSEL=Y
"RTN","FHSELA1",80,0)
 D DEV
"RTN","FHSELA1",81,0)
 Q
"RTN","FHSELA1",82,0)
DEV ;get device and set up queue
"RTN","FHSELA1",83,0)
 W ! K %ZIS,IOP S %ZIS="Q" D ^%ZIS Q:POP
"RTN","FHSELA1",84,0)
 I '$D(IO("Q")) U IO D LISTMAP,^%ZISC,EXIT Q
"RTN","FHSELA1",85,0)
 S ZTRTN="LISTMAP^FHSELA1",ZTSAVE("FHSEL")=""
"RTN","FHSELA1",86,0)
 S ZTDESC="GMR Allergy/Food Preference Map Display" D ^%ZTLOAD
"RTN","FHSELA1",87,0)
 D ^%ZISC K %ZIS,IOP
"RTN","FHSELA1",88,0)
 D EXIT
"RTN","FHSELA1",89,0)
 Q
"RTN","FHSELA1",90,0)
LISTMAP ; List Map by Allergies or by Food Preferences
"RTN","FHSELA1",91,0)
 I FHSEL="A" D LISTAL Q
"RTN","FHSELA1",92,0)
 I FHSEL="F" D LISTFP Q
"RTN","FHSELA1",93,0)
 Q
"RTN","FHSELA1",94,0)
LISTFP ; List all the Allergy-type Food Pref's and corresponding GMR Allergies
"RTN","FHSELA1",95,0)
 D ^FHSELA2
"RTN","FHSELA1",96,0)
 S FHK="" W !!,"ALLERGY TYPE FOOD PREFERENCE MAP"
"RTN","FHSELA1",97,0)
 W !!,"NFS Food Preference Title",?40,"GMR Standard Allergy(s)"
"RTN","FHSELA1",98,0)
 W !,"==================================="
"RTN","FHSELA1",99,0)
 W ?40,"==================================="
"RTN","FHSELA1",100,0)
 F  S FHK=$O(^TMP($J,"FHALG",FHK)) Q:FHK=""  D
"RTN","FHSELA1",101,0)
 .S FHFPS=$P(^TMP($J,"FHALG",FHK),";",1,99),FHZ1=$P(FHFPS,";",1)
"RTN","FHSELA1",102,0)
 .W !,"ALLERGY - ",FHZ1
"RTN","FHSELA1",103,0)
 .S FHALMP=$P(FHFPS,";",2,99) I FHALMP="" W ?40,"** NONE **" Q
"RTN","FHSELA1",104,0)
 .S FHZ=0,N=0 F  S FHZ=FHZ+1,FHANAM=$P(FHALMP,";",FHZ) Q:FHANAM=""  D
"RTN","FHSELA1",105,0)
 ..W ?40,$S(FHZ>1:",",1:"") S N=N+$L(FHANAM)+1 W:N>40 !?40 S:N>40 N=0 W FHANAM I N=0 S N=N+$L(FHANAM)+1
"RTN","FHSELA1",106,0)
 D EXIT Q
"RTN","FHSELA1",107,0)
LISTAL ; List all the GMR Allergies and the Food Pref to map to
"RTN","FHSELA1",108,0)
 D ^FHSELA2
"RTN","FHSELA1",109,0)
 S FHK="" W !!,"GMR STANDARD FOOD ALLERGY MAP"
"RTN","FHSELA1",110,0)
 W !!,"GMR Allergy Name",?25,"Corresponding NFS Food Preference"
"RTN","FHSELA1",111,0)
 W !,"=======================",?25,"===================================="
"RTN","FHSELA1",112,0)
 F  S FHK=$O(^TMP($J,"FHALG",FHK)) Q:FHK=""  D
"RTN","FHSELA1",113,0)
 .S FHFPS=$P(^TMP($J,"FHALG",FHK),";",1,99),FHZ1=$P(FHFPS,";",1)
"RTN","FHSELA1",114,0)
 .S FHALMP=$P(FHFPS,";",2,99) I FHALMP="" Q
"RTN","FHSELA1",115,0)
 .S FHZ=0,N=0 F  S FHZ=FHZ+1,FHANAM=$P(FHALMP,";",FHZ) Q:FHANAM=""  D
"RTN","FHSELA1",116,0)
 ..S ^TMP($J,"FHAL",FHANAM)="ALLERGY - "_FHZ1
"RTN","FHSELA1",117,0)
 S FHANAMZ=""
"RTN","FHSELA1",118,0)
 F  S FHANAMZ=$O(^TMP($J,"FHAL",FHANAMZ)) Q:FHANAMZ=""  D
"RTN","FHSELA1",119,0)
 .W !,FHANAMZ,?25,"...maps to: ",^TMP($J,"FHAL",FHANAMZ)
"RTN","FHSELA1",120,0)
 D EXIT Q
"RTN","FHSELA1",121,0)
MISSING ; List all Food Pref's with no pointers to 120.82
"RTN","FHSELA1",122,0)
 D ^FHSELA2
"RTN","FHSELA1",123,0)
 S FHK=""
"RTN","FHSELA1",124,0)
 F  S FHK=$O(^TMP($J,"FHALG",FHK)) Q:FHK=""  D
"RTN","FHSELA1",125,0)
 .S FHFPS=$P(^TMP($J,"FHALG",FHK),";",1,99),FHZ1=$P(FHFPS,";",1)
"RTN","FHSELA1",126,0)
 .I $P(FHFPS,";",2)'="" Q
"RTN","FHSELA1",127,0)
 .W !?5,"ALLERGY - ",FHZ1," does not have corresponding 120.82 entries"
"RTN","FHSELA1",128,0)
 D EXIT Q
"RTN","FHSELA1",129,0)
CHECK ; Check for any missing Allergy-type FP's or one's not renamed in 115.2
"RTN","FHSELA1",130,0)
 D ^FHSELA2
"RTN","FHSELA1",131,0)
 S FHK="",FLG=0
"RTN","FHSELA1",132,0)
 W !,"The following Food Preferences titles were not found in file #115.2:"
"RTN","FHSELA1",133,0)
 F  S FHK=$O(^TMP($J,"FHALG",FHK)) Q:FHK=""  D
"RTN","FHSELA1",134,0)
 .S FHFPS=$P(^TMP($J,"FHALG",FHK),";",1,99)
"RTN","FHSELA1",135,0)
 .S FHZ1="ALLERGY - "_$P(FHFPS,";",1)
"RTN","FHSELA1",136,0)
 .I '$D(^FH(115.2,"B",FHZ1)) W !,FHZ1 S FLG=1
"RTN","FHSELA1",137,0)
 I FLG=0 W !,"ALL FOOD PREFERENCES HAVE BEEN RENAMED!"
"RTN","FHSELA1",138,0)
 D EXIT Q
"RTN","FHSELA1",139,0)
 ;
"RTN","FHSELA1",140,0)
UPDATE ;Update Food Preferences for all Patient's based on Allergies
"RTN","FHSELA1",141,0)
 D ^FHSELA2 S FHCOUNT=0,FHQT=0
"RTN","FHSELA1",142,0)
 W !!,"...Updating Patient Food Preferences based on Food-Type Allergies"
"RTN","FHSELA1",143,0)
 W "..." K FHMISS F FHDFN=0:0 S FHDFN=$O(^FHPT(FHDFN)) Q:FHDFN'>0  D
"RTN","FHSELA1",144,0)
 .S FHCOUNT=FHCOUNT+1 I FHCOUNT#100=0 W "."
"RTN","FHSELA1",145,0)
 .D GETZN^FHOMUTL I FILE'="P" Q
"RTN","FHSELA1",146,0)
 .S DFN=IEN D ALG^FHCLN I '$O(^TMP($J,"FHGMRAL","")) Q
"RTN","FHSELA1",147,0)
 .F FHGMRN=0:0 S FHGMRN=$O(^TMP($J,"FHGMRAL",FHGMRN)) Q:FHGMRN=""  D UPDFP1^FHWGMR
"RTN","FHSELA1",148,0)
 I $G(FHPST8)=1 K ^TMP($J,"FHGMRAL"),^TMP($J,"FHMISS"),FHGMRN,FHMSAL,FHMSFP,FHMSPT,FHPST8,FHCOUNT Q
"RTN","FHSELA1",149,0)
 D LIST
"RTN","FHSELA1",150,0)
 K ^TMP($J,"FHGMRAL"),^TMP($J,"FHMISS"),FHGMRN,FHMSAL,FHMSFP,FHMSPT,FHPST8,FHCOUNT,FHQT
"RTN","FHSELA1",151,0)
 Q
"RTN","FHSELA1",152,0)
LIST ;
"RTN","FHSELA1",153,0)
 I '$D(^TMP($J,"FHMISS")) Q
"RTN","FHSELA1",154,0)
 W !!,"The following entries need to be mapped in order to automatically"
"RTN","FHSELA1",155,0)
 W !,"update the Patient Food Preferences:",! S FHCOUNT=0,FHQT=0
"RTN","FHSELA1",156,0)
 S FHMSFP="" F  S FHMSFP=$O(^TMP($J,"FHMISS",FHMSFP)) Q:FHMSFP=""!(FHQT=1)  D
"RTN","FHSELA1",157,0)
 .W !,"'ALLERGY - ",FHMSFP,"'" S FHCOUNT=FHCOUNT+1
"RTN","FHSELA1",158,0)
 .S FHMSPT="" F  S FHMSPT=$O(^TMP($J,"FHMISS",FHMSFP,FHMSPT)) Q:FHMSPT=""  D
"RTN","FHSELA1",159,0)
 ..S FHMSAL=$P($G(^TMP($J,"FHMISS",FHMSFP,FHMSPT)),U,1)
"RTN","FHSELA1",160,0)
 ..W !?3,"Patient: ",$E(FHMSPT,1,30),?43,"Allergy: ",FHMSAL
"RTN","FHSELA1",161,0)
 ..S FHCOUNT=FHCOUNT+1
"RTN","FHSELA1",162,0)
 ..I FHCOUNT>14 S FHCOUNT=0 W ! K DIR S DIR(0)="E" D ^DIR W ! I X="^" S FHQT=1
"RTN","FHSELA1",163,0)
 Q
"RTN","FHSELA1",164,0)
EXIT ;
"RTN","FHSELA1",165,0)
 D MAP
"RTN","FHSELA1",166,0)
 K ^TMP($J,"FHALG"),^TMP($J,"FHAL")
"RTN","FHSELA1",167,0)
 K FHFPIEN,FHK,FHX,FHZ,FHFPS,FHZ1,FHVAL,N,FHANAM,FHANAMZ
"RTN","FHSELA1",168,0)
 K FHQUIT,NUM,FHRESP,FHAFPNM,FHSEL,PAD,FHLIST,FHALGMZ,FHALMP
"RTN","FHSELA2")
0^25^B97907668
"RTN","FHSELA2",1,0)
FHSELA2 ;Hines OIFO/RTK - Map GMR Allergy file to Food Prefs ;3/07/2007
"RTN","FHSELA2",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHSELA2",3,0)
 ;
"RTN","FHSELA2",4,0)
TMPGL ; Create ^TMP Global
"RTN","FHSELA2",5,0)
 K ^TMP($J,"FHALG") S FHK=0
"RTN","FHSELA2",6,0)
 F  S FHK=FHK+1,FHFPS=$T(FPS+FHK),FHZ1=$P(FHFPS,";",3) Q:FHZ1=""  D
"RTN","FHSELA2",7,0)
 .S ^TMP($J,"FHALG",FHZ1)=$P(FHFPS,";",3,99)
"RTN","FHSELA2",8,0)
EXIT K FHK,FHFPS,FHZ1
"RTN","FHSELA2",9,0)
 Q
"RTN","FHSELA2",10,0)
FPS ;;
"RTN","FHSELA2",11,0)
 ;;ALCOHOL;ALCOHOL
"RTN","FHSELA2",12,0)
 ;;ALCOHOL, BEER;HOPS
"RTN","FHSELA2",13,0)
 ;;ALCOHOL, GIN;GIN
"RTN","FHSELA2",14,0)
 ;;ALCOHOL, RUM;RUM
"RTN","FHSELA2",15,0)
 ;;ALCOHOL, SCOTCH;SCOTCH
"RTN","FHSELA2",16,0)
 ;;ALCOHOL, TEQUILA;TEQUILA
"RTN","FHSELA2",17,0)
 ;;ALCOHOL, VODKA;VODKA
"RTN","FHSELA2",18,0)
 ;;ALCOHOL, WINE;WINE
"RTN","FHSELA2",19,0)
 ;;ALCOHOL, WINE, WHITE;WHITE WINE
"RTN","FHSELA2",20,0)
 ;;ALFALFA SPROUTS;ALFALFA SPROUTS
"RTN","FHSELA2",21,0)
 ;;ALMONDS;ALMONDS
"RTN","FHSELA2",22,0)
 ;;ANISE OIL;ANISE OIL
"RTN","FHSELA2",23,0)
 ;;APPLES;APPLE JUICE;APPLES
"RTN","FHSELA2",24,0)
 ;;APRICOTS;APRICOTS
"RTN","FHSELA2",25,0)
 ;;ARTICHOKES;ARTICHOKES
"RTN","FHSELA2",26,0)
 ;;ARTIFICIAL COLORS;ARTIFICIAL COLORS;BLACK DYES;BLUE DYES;FD&C BLUE DYE #2;FD&C GREEN DYE #6;GREEN DYES;PINK DYES;PURPLE DYES
"RTN","FHSELA2",27,0)
 ;;ASPARAGUS;ASPARAGUS
"RTN","FHSELA2",28,0)
 ;;AVOCADOS;AVOCADOS
"RTN","FHSELA2",29,0)
 ;;BACON;BACON
"RTN","FHSELA2",30,0)
 ;;BANANAS;BANANAS
"RTN","FHSELA2",31,0)
 ;;BARBEQUE SAUCE;BARBEQUE SAUCE
"RTN","FHSELA2",32,0)
 ;;BARLEY;BARLEY;MALT BARLEY
"RTN","FHSELA2",33,0)
 ;;BASIL;BASIL
"RTN","FHSELA2",34,0)
 ;;BEANS;BEANS;LEGUMES
"RTN","FHSELA2",35,0)
 ;;BEANS, BAKED;BAKED BEANS
"RTN","FHSELA2",36,0)
 ;;BEANS, FAVA;FAVA BEANS (BROAD BEANS)
"RTN","FHSELA2",37,0)
 ;;BEANS, GREEN;GREEN BEANS
"RTN","FHSELA2",38,0)
 ;;BEANS, LENTILS;LENTILS
"RTN","FHSELA2",39,0)
 ;;BEANS, LIMA;LIMA BEANS
"RTN","FHSELA2",40,0)
 ;;BEANS, PINTO;PINTO BEANS
"RTN","FHSELA2",41,0)
 ;;BEANS, SOY;SOYBEANS
"RTN","FHSELA2",42,0)
 ;;BEANS, STRING;STRING BEANS
"RTN","FHSELA2",43,0)
 ;;BEANS, WHITE;WHITE BEANS
"RTN","FHSELA2",44,0)
 ;;BEEF;BEEF;BEEF PRODUCTS
"RTN","FHSELA2",45,0)
 ;;BEEF, CORNED;CORNED BEEF
"RTN","FHSELA2",46,0)
 ;;BEETS;BEETS
"RTN","FHSELA2",47,0)
 ;;BEETS, PICKLES;PICKLED BEETS
"RTN","FHSELA2",48,0)
 ;;BERRIES;BERRIES
"RTN","FHSELA2",49,0)
 ;;BLACKBERRIES;BLACKBERRIES
"RTN","FHSELA2",50,0)
 ;;BLUEBERRIES;BLUEBERRIES
"RTN","FHSELA2",51,0)
 ;;BROCCOLI;BROCCOLI
"RTN","FHSELA2",52,0)
 ;;BRUSSELS SPROUTS;BRUSSELS SPROUTS
"RTN","FHSELA2",53,0)
 ;;BUCKWHEAT;BUCKWHEAT
"RTN","FHSELA2",54,0)
 ;;BUTTER;BUTTER
"RTN","FHSELA2",55,0)
 ;;CABBAGE;CABBAGE
"RTN","FHSELA2",56,0)
 ;;CAFFEINE;CAFFEINE;COFFEE;COFFEE BEANS
"RTN","FHSELA2",57,0)
 ;;CAFFEINE, COLAS;COLA DRINKS
"RTN","FHSELA2",58,0)
 ;;CANTALOUPE;CANTALOUPE
"RTN","FHSELA2",59,0)
 ;;CARBONATED BEVERAGES;CARBONATED BEVERAGES;SOFT DRINKS
"RTN","FHSELA2",60,0)
 ;;CARROTS;CARROTS
"RTN","FHSELA2",61,0)
 ;;CATSUP;CATSUP
"RTN","FHSELA2",62,0)
 ;;CAULIFLOWER;CAULIFLOWER
"RTN","FHSELA2",63,0)
 ;;CAVIAR;CAVIAR
"RTN","FHSELA2",64,0)
 ;;CELERY;CELERY
"RTN","FHSELA2",65,0)
 ;;CEREAL;CEREALS
"RTN","FHSELA2",66,0)
 ;;CEREAL, CORNFLAKES;CORNFLAKES
"RTN","FHSELA2",67,0)
 ;;CEREAL, CRM OF WHEAT;CREAM OF WHEAT
"RTN","FHSELA2",68,0)
 ;;CEREAL, GRITS;GRITS
"RTN","FHSELA2",69,0)
 ;;CEREAL, OATMEAL;OATMEAL
"RTN","FHSELA2",70,0)
 ;;CHEESE;CHEESE
"RTN","FHSELA2",71,0)
 ;;CHEESE, BLUE;BLUE CHEESE
"RTN","FHSELA2",72,0)
 ;;CHEESE, CHEDDAR;CHEDDAR CHEESE
"RTN","FHSELA2",73,0)
 ;;CHEESE, COTTAGE;COTTAGE CHEESE
"RTN","FHSELA2",74,0)
 ;;CHEESE, FETA;FETA CHEESE
"RTN","FHSELA2",75,0)
 ;;CHEESE, GOAT;GOAT CHEESE
"RTN","FHSELA2",76,0)
 ;;CHEESE, PARMESAN;PARMESAN CHEESE
"RTN","FHSELA2",77,0)
 ;;CHEESE, RICOTTA;RICOTTA CHEESE
"RTN","FHSELA2",78,0)
 ;;CHEESE, SWISS;SWISS CHEESE
"RTN","FHSELA2",79,0)
 ;;CHERRIES;CHERRIES;CHERRY JUICE
"RTN","FHSELA2",80,0)
 ;;CHICKEN;CHICKEN
"RTN","FHSELA2",81,0)
 ;;CHICKPEAS;CHICKPEAS
"RTN","FHSELA2",82,0)
 ;;CHICORY;CHICORY
"RTN","FHSELA2",83,0)
 ;;CHILI;CHILI
"RTN","FHSELA2",84,0)
 ;;CHIVES;CHIVES
"RTN","FHSELA2",85,0)
 ;;CHOCOLATE;CHOCOLATE;COCOA
"RTN","FHSELA2",86,0)
 ;;CILANTRO;CILANTRO;CUMIN
"RTN","FHSELA2",87,0)
 ;;CINNAMON;CINNAMON;CINNAMON OIL
"RTN","FHSELA2",88,0)
 ;;CITRUS;CITRUS;CITRUS FRUIT;CITRUS JUICE
"RTN","FHSELA2",89,0)
 ;;CLOVES;CLOVES
"RTN","FHSELA2",90,0)
 ;;COCONUT;COCONUTS
"RTN","FHSELA2",91,0)
 ;;COLA;COLA DRINKS
"RTN","FHSELA2",92,0)
 ;;CORN;CORN
"RTN","FHSELA2",93,0)
 ;;CRACKERS;CRACKERS
"RTN","FHSELA2",94,0)
 ;;CRACKERS, GRAHAM;GRAHAM CRACKERS
"RTN","FHSELA2",95,0)
 ;;CRANBERRIES;CRANBERRIES
"RTN","FHSELA2",96,0)
 ;;CREAM, SOUR;SOUR CREAM
"RTN","FHSELA2",97,0)
 ;;CREAMER, NON-DAIRY;NON-DAIRY CREAMER
"RTN","FHSELA2",98,0)
 ;;CREAMER, POWDER;POWDERED CREAMER
"RTN","FHSELA2",99,0)
 ;;CUCUMBERS;CUCUMBERS
"RTN","FHSELA2",100,0)
 ;;DAIRY PRODUCTS;DAIRY PRODUCTS
"RTN","FHSELA2",101,0)
 ;;DATES;DATES
"RTN","FHSELA2",102,0)
 ;;DILL;DILL
"RTN","FHSELA2",103,0)
 ;;DUCK;DUCK;WATERFOWL
"RTN","FHSELA2",104,0)
 ;;DYES, VEGETABLES;VEGETABLE DYES
"RTN","FHSELA2",105,0)
 ;;EGGNOG;EGGNOG
"RTN","FHSELA2",106,0)
 ;;EGGPLANT;EGGPLANT
"RTN","FHSELA2",107,0)
 ;;EGGS;EGGS;EGG PRODUCTS;EGG WHITES;EGG YOLKS
"RTN","FHSELA2",108,0)
 ;;EGGS, SUBSTITUTES;EGG, SUBSTITUTES
"RTN","FHSELA2",109,0)
 ;;FAT EMULSIONS;FAT EMULSIONS
"RTN","FHSELA2",110,0)
 ;;FIGS;FIGS
"RTN","FHSELA2",111,0)
 ;;FISH;FISH
"RTN","FHSELA2",112,0)
 ;;FISH, ABALONE;ABALONE
"RTN","FHSELA2",113,0)
 ;;FISH, ANCHOVIES;ANCHOVIES
"RTN","FHSELA2",114,0)
 ;;FISH, CATFISH;CATFISH
"RTN","FHSELA2",115,0)
 ;;FISH, COD;CODFISH
"RTN","FHSELA2",116,0)
 ;;FISH, FLOUNDER;FLOUNDER
"RTN","FHSELA2",117,0)
 ;;FISH, HERRING;HERRING
"RTN","FHSELA2",118,0)
 ;;FISH, MACKEREL;MACKEREL
"RTN","FHSELA2",119,0)
 ;;FISH, PERCH;PERCH
"RTN","FHSELA2",120,0)
 ;;FISH, RED SNAPPER;RED SNAPPER
"RTN","FHSELA2",121,0)
 ;;FISH, SALMON;SALMON
"RTN","FHSELA2",122,0)
 ;;FISH, SARDINES;SARDINES
"RTN","FHSELA2",123,0)
 ;;FISH, SHARK;SHARK
"RTN","FHSELA2",124,0)
 ;;FISH, SWORDFISH;SWORDFISH
"RTN","FHSELA2",125,0)
 ;;FISH, TROUT;TROUT
"RTN","FHSELA2",126,0)
 ;;FISH, TUNA;TUNA
"RTN","FHSELA2",127,0)
 ;;FISH, WHITE;WHITE FISH
"RTN","FHSELA2",128,0)
 ;;FLAVORING, HICKORY;HICKORY
"RTN","FHSELA2",129,0)
 ;;FLAVORING, LICORICE;LICORICE
"RTN","FHSELA2",130,0)
 ;;FLAVORING, VANILLA;VANILLA
"RTN","FHSELA2",131,0)
 ;;FOOD PRESERVATIVES;FOOD PRESERVATIVES
"RTN","FHSELA2",132,0)
 ;;FRUIT, FRESH;FRESH FRUIT
"RTN","FHSELA2",133,0)
 ;;FROG;FROG LEGS;FROGS
"RTN","FHSELA2",134,0)
 ;;FRUIT;FRUIT
"RTN","FHSELA2",135,0)
 ;;FRUIT JUICE;FRUIT JUICE
"RTN","FHSELA2",136,0)
 ;;FRUITCAKES;FRUITCAKES
"RTN","FHSELA2",137,0)
 ;;GARLIC;GARLIC
"RTN","FHSELA2",138,0)
 ;;GELATIN;GELATIN
"RTN","FHSELA2",139,0)
 ;;GINGER;GINGER
"RTN","FHSELA2",140,0)
 ;;GLUTEN;GLUTENS
"RTN","FHSELA2",141,0)
 ;;GRAINS;GRAINS
"RTN","FHSELA2",142,0)
 ;;GRAPEFRUIT;GRAPEFRUIT
"RTN","FHSELA2",143,0)
 ;;GRAPES;GRAPES
"RTN","FHSELA2",144,0)
 ;;GRAVY;GRAVY
"RTN","FHSELA2",145,0)
 ;;GREENS, COLLARD;COLLARD GREENS
"RTN","FHSELA2",146,0)
 ;;GREENS, MUSTARD;MUSTARD GREENS
"RTN","FHSELA2",147,0)
 ;;GREENS, TURNIP;TURNIP GREENS
"RTN","FHSELA2",148,0)
 ;;GREEN LEAFY VEGETABLES;GREEN LEAFY VEGETABLES
"RTN","FHSELA2",149,0)
 ;;GUAVA;GUAVA
"RTN","FHSELA2",150,0)
 ;;HOMINY;HOMINY
"RTN","FHSELA2",151,0)
 ;;HONEY;HONEY
"RTN","FHSELA2",152,0)
 ;;HONEYDEW;HONEYDEW
"RTN","FHSELA2",153,0)
 ;;HORSERADISH;HORSERADISH
"RTN","FHSELA2",154,0)
 ;;IODINE;IODIZED SALT
"RTN","FHSELA2",155,0)
 ;;JUICE;JUICE
"RTN","FHSELA2",156,0)
 ;;KIWI;KIWI FRUIT
"RTN","FHSELA2",157,0)
 ;;LACTOSE;LACTOSE
"RTN","FHSELA2",158,0)
 ;;LEEKS;LEEKS
"RTN","FHSELA2",159,0)
 ;;LEMON;LEMON JUICE;LEMONS
"RTN","FHSELA2",160,0)
 ;;LETTUCE;LETTUCE
"RTN","FHSELA2",161,0)
 ;;LIMES;LIMES
"RTN","FHSELA2",162,0)
 ;;LYCHEE NUTS;LYCHEES
"RTN","FHSELA2",163,0)
 ;;MALTOSE;MALTOSE
"RTN","FHSELA2",164,0)
 ;;MANGOS;MANGOS
"RTN","FHSELA2",165,0)
 ;;MARSHMALLOWS;MARSHMALLOWS
"RTN","FHSELA2",166,0)
 ;;MAYONNAISE;MAYONNAISE
"RTN","FHSELA2",167,0)
 ;;MEAT;MEAT
"RTN","FHSELA2",168,0)
 ;;MEAT, LAMB;LAMB
"RTN","FHSELA2",169,0)
 ;;MEAT, LIVER;LIVER
"RTN","FHSELA2",170,0)
 ;;MEAT, PROCESSED;PROCESSED MEATS
"RTN","FHSELA2",171,0)
 ;;MEAT, RED;RED MEAT
"RTN","FHSELA2",172,0)
 ;;MEAT, VENISON;VENISON
"RTN","FHSELA2",173,0)
 ;;MELONS;MELONS
"RTN","FHSELA2",174,0)
 ;;MELONS, MUSK;MUSK MELONS
"RTN","FHSELA2",175,0)
 ;;MELONS, WATER;WATERMELONS
"RTN","FHSELA2",176,0)
 ;;MILK;MILK;DAIRY PRODUCTS
"RTN","FHSELA2",177,0)
 ;;MILK, BUTTER;BUTTERMILK
"RTN","FHSELA2",178,0)
 ;;MILK, GOAT;GOAT MILK
"RTN","FHSELA2",179,0)
 ;;MILK, YOGURT;YOGURT
"RTN","FHSELA2",180,0)
 ;;MINT;MINT
"RTN","FHSELA2",181,0)
 ;;MODIFIED FOOD STARCH;MODIFIED FOOD STARCH;FOOD STARCH, MODIFIED
"RTN","FHSELA2",182,0)
 ;;MSG;MONOSODIUM GLUTAMATE
"RTN","FHSELA2",183,0)
 ;;MUSHROOMS;MUSHROOMS
"RTN","FHSELA2",184,0)
 ;;MUSTARD;MUSTARD
"RTN","FHSELA2",185,0)
 ;;MUTTON/LAMB;MUTTON
"RTN","FHSELA2",186,0)
 ;;NECTARINES;NECTARINES
"RTN","FHSELA2",187,0)
 ;;NITRITES;NITRITES
"RTN","FHSELA2",188,0)
 ;;NON-FOOD RELATED;EGGSHELLS
"RTN","FHSELA2",189,0)
 ;;NUTMEG;NUTMEG
"RTN","FHSELA2",190,0)
 ;;NUTS;BRAZIL NUTS;CASHEWS;CHESTNUTS;HAZELNUTS;MACADAMIA NUTS;NUTS;PECANS
"RTN","FHSELA2",191,0)
 ;;NUTS, PEANUT;PEANUT BUTTER;PEANUT OIL;PEANUTS
"RTN","FHSELA2",192,0)
 ;;NUTS, PINE;PINE NUTS
"RTN","FHSELA2",193,0)
 ;;NUTS, PISTACHIOS;PISTACHIOS
"RTN","FHSELA2",194,0)
 ;;NUTS, TREE;PECANS;TREE NUTS
"RTN","FHSELA2",195,0)
 ;;NUTS, WALNUT;WALNUTS
"RTN","FHSELA2",196,0)
 ;;OATS;OATS
"RTN","FHSELA2",197,0)
 ;;OIL, COCONUT;COCONUT OIL
"RTN","FHSELA2",198,0)
 ;;OIL, COTTONSEED;COTTONSEED OIL
"RTN","FHSELA2",199,0)
 ;;OIL, PALM;PALM OIL
"RTN","FHSELA2",200,0)
 ;;OIL, SAFFLOWER;SAFFLOWER OIL
"RTN","FHSELA2",201,0)
 ;;OIL, SOY;SOYBEAN OIL
"RTN","FHSELA2",202,0)
 ;;OIL, SUNFLOWER;SUNFLOWER OIL
"RTN","FHSELA2",203,0)
 ;;OKRA;OKRA
"RTN","FHSELA2",204,0)
 ;;OLIVES;BLACK OLIVES;OLIVES
"RTN","FHSELA2",205,0)
 ;;ONIONS;ONIONS
"RTN","FHSELA2",206,0)
 ;;ONIONS, RED;RED ONIONS
"RTN","FHSELA2",207,0)
 ;;ORANGE;ORANGE;ORANGES;ORANGE JUICE;ORANGE OIL
"RTN","FHSELA2",208,0)
 ;;OREGANO;OREGANO
"RTN","FHSELA2",209,0)
 ;;OYSTERS;OYSTERS
"RTN","FHSELA2",210,0)
 ;;PAPAYAS;PAPAYAS
"RTN","FHSELA2",211,0)
 ;;PAPRIKA;PAPRIKA
"RTN","FHSELA2",212,0)
 ;;PARSLEY;PARSLEY
"RTN","FHSELA2",213,0)
 ;;PARSNIP;PARSNIP
"RTN","FHSELA2",214,0)
 ;;PASSION FRUIT;PASSION FRUIT
"RTN","FHSELA2",215,0)
 ;;PEACHES;PEACHES
"RTN","FHSELA2",216,0)
 ;;PEARS;PEARS
"RTN","FHSELA2",217,0)
 ;;PEAS;PEAS
"RTN","FHSELA2",218,0)
 ;;PEAS, BLACK-EYED;BLACK-EYED PEAS
"RTN","FHSELA2",219,0)
 ;;PEAS, ENGLISH;ENGLISH PEAS
"RTN","FHSELA2",220,0)
 ;;PEAS, SNOW;SNOW PEAS
"RTN","FHSELA2",221,0)
 ;;PEPPER;PEPPER;WHITE PEPPER
"RTN","FHSELA2",222,0)
 ;;PEPPER, BLACK;BLACK PEPPER;PEPPER
"RTN","FHSELA2",223,0)
 ;;PEPPERMINT;PEPPERMINT
"RTN","FHSELA2",224,0)
 ;;PEPPERONI;PEPPERONI
"RTN","FHSELA2",225,0)
 ;;PEPPERS;BELL PEPPERS;PEPPERS
"RTN","FHSELA2",226,0)
 ;;PEPPERS, CHILI;CHILI PEPPER;CHILI PEPPERS
"RTN","FHSELA2",227,0)
 ;;PEPPERS, GREEN;GREEN BELL PEPPERS;PEPPERS
"RTN","FHSELA2",228,0)
 ;;PEPPERS, HOT;CAPSAICIN;CAYENNE PEPPER;HOT PEPPER;HOT PEPPERS;JALAPENO PEPPERS
"RTN","FHSELA2",229,0)
 ;;PEPPERS, RED;RED BELL PEPPERS
"RTN","FHSELA2",230,0)
 ;;PERSIMMONS;PERSIMMONS
"RTN","FHSELA2",231,0)
 ;;PHEASANT;PHEASANT
"RTN","FHSELA2",232,0)
 ;;PICKLES;PICKLES
"RTN","FHSELA2",233,0)
 ;;PIMENTOS;PIMENTOS
"RTN","FHSELA2",234,0)
 ;;PINEAPPLE;PINEAPPLES
"RTN","FHSELA2",235,0)
 ;;PIZZA;PIZZA
"RTN","FHSELA2",236,0)
 ;;PLUMS;PLUMS
"RTN","FHSELA2",237,0)
 ;;POPCORN;POPCORN
"RTN","FHSELA2",238,0)
 ;;POPPY SEEDS;POPPY SEEDS
"RTN","FHSELA2",239,0)
 ;;PORK;PORK;PORK PRODUCTS;HAM
"RTN","FHSELA2",240,0)
 ;;PORK, HAM;HAM
"RTN","FHSELA2",241,0)
 ;;POTATOES;POTATOES
"RTN","FHSELA2",242,0)
 ;;POTATOES, SALAD;POTATO SALAD
"RTN","FHSELA2",243,0)
 ;;POTATOES, SWEET/YAMS;SWEET POTATOES;YAMS
"RTN","FHSELA2",244,0)
 ;;POULTRY;FOWL;POULTRY
"RTN","FHSELA2",245,0)
 ;;PRUNES;PRUNES
"RTN","FHSELA2",246,0)
 ;;PUDDING, TAPIOCA;TAPIOCA PUDDING
"RTN","FHSELA2",247,0)
 ;;PUMPKIN;PUMPKINS
"RTN","FHSELA2",248,0)
 ;;RABBIT;RABBIT
"RTN","FHSELA2",249,0)
 ;;RADISH;RADISHES
"RTN","FHSELA2",250,0)
 ;;RAISINS;RAISINS
"RTN","FHSELA2",251,0)
 ;;RASPBERRIES;RASPBERRIES
"RTN","FHSELA2",252,0)
 ;;RED DYES;FD&C RED DYE #1;FD&C RED DYE #2;FD&C RED DYE #3;FD&C RED DYE #40;FD&C RED DYE #40 LAKE;FD&C RED DYE #5;RED DYES
"RTN","FHSELA2",253,0)
 ;;RHUBARB;RHUBARB
"RTN","FHSELA2",254,0)
 ;;RICE;RICE;WHITE RICE
"RTN","FHSELA2",255,0)
 ;;ROSEMARY;ROSEMARY
"RTN","FHSELA2",256,0)
 ;;RUTABAGAS;RUTABAGAS
"RTN","FHSELA2",257,0)
 ;;RYE;RYE
"RTN","FHSELA2",258,0)
 ;;SALAD DRESSING, ITAL;ITALIAN DRESSING
"RTN","FHSELA2",259,0)
 ;;SALT;NON-IODIZED SALT;SALT
"RTN","FHSELA2",260,0)
 ;;SALT, SUBSTITUTES;SALT SUBSTITUTES
"RTN","FHSELA2",261,0)
 ;;SAUERKRAUT;SAUERKRAUT
"RTN","FHSELA2",262,0)
 ;;SAUSAGES;SAUSAGES
"RTN","FHSELA2",263,0)
 ;;SEAFOOD;SEAFOOD
"RTN","FHSELA2",264,0)
 ;;SEEDS;SEEDS
"RTN","FHSELA2",265,0)
 ;;SEEDS, SUNFLOWER;SUNFLOWER SEEDS
"RTN","FHSELA2",266,0)
 ;;SESAME;SESAME;SESAME OIL;SESAME SEEDS
"RTN","FHSELA2",267,0)
 ;;SHELLFISH;CLAMS;CRAB;CRAWFISH;CRUSTACEANS;LOBSTER;MUSSELS;SCALLOPS;SHELL FISH;SHELLFISH
"RTN","FHSELA2",268,0)
 ;;SHERBET;SHERBET
"RTN","FHSELA2",269,0)
 ;;SHRIMP;SHRIMP
"RTN","FHSELA2",270,0)
 ;;SNAILS;SNAILS
"RTN","FHSELA2",271,0)
 ;;SOUR CREAM;SOUR CREAM
"RTN","FHSELA2",272,0)
 ;;SOY;SOY;SOY MILK;SOY PRODUCTS;SOY SAUCE;SOYBEANS;TOFU
"RTN","FHSELA2",273,0)
 ;;SOY SAUCE;SOY SAUCE
"RTN","FHSELA2",274,0)
 ;;SPAGHETTI;SPAGHETTI
"RTN","FHSELA2",275,0)
 ;;SPAM;SPAM
"RTN","FHSELA2",276,0)
 ;;SPICES;CONDIMENTS;SPICES
"RTN","FHSELA2",277,0)
 ;;SPINACH;SPINACH
"RTN","FHSELA2",278,0)
 ;;SQUASH;SQUASH
"RTN","FHSELA2",279,0)
 ;;SQUID;SQUID
"RTN","FHSELA2",280,0)
 ;;STARCHY FOODS;STARCHES
"RTN","FHSELA2",281,0)
 ;;STRAWBERRIES;STRAWBERRIES;STRAWBERRIES PLUS
"RTN","FHSELA2",282,0)
 ;;SUCRALOSE;SUCRALOSE
"RTN","FHSELA2",283,0)
 ;;SUGAR;SUGAR;SUGAR BEETS;WHITE SUGAR
"RTN","FHSELA2",284,0)
 ;;SUGAR SUB;ARTIFICIAL SWEETENERS
"RTN","FHSELA2",285,0)
 ;;SUGAR SUB, ASPARTAME;ASPARTAME
"RTN","FHSELA2",286,0)
 ;;SUGAR SUB, SACCHARIN;SACCHARIN;SWEET'N LOW
"RTN","FHSELA2",287,0)
 ;;SUGAR, BROWN;BROWN SUGAR
"RTN","FHSELA2",288,0)
 ;;SULFITES;SULFITES
"RTN","FHSELA2",289,0)
 ;;SYRUP, MAPLE;MAPLE SYRUP
"RTN","FHSELA2",290,0)
 ;;TANGERINES;TANGERINES
"RTN","FHSELA2",291,0)
 ;;TARRAGON;TARRAGON
"RTN","FHSELA2",292,0)
 ;;TEA;TEA
"RTN","FHSELA2",293,0)
 ;;TOFFEE;TOFFEE
"RTN","FHSELA2",294,0)
 ;;TOMATO;TOMATO;TOMATO JUICE;TOMATO PRODUCTS;TOMATO SAUCE;TOMATOES
"RTN","FHSELA2",295,0)
 ;;TOMATOES, FRESH;FRESH TOMATOES
"RTN","FHSELA2",296,0)
 ;;TUMERIC;TUMERIC
"RTN","FHSELA2",297,0)
 ;;TURKEY;TURKEY
"RTN","FHSELA2",298,0)
 ;;TURNIPS;TURNIPS
"RTN","FHSELA2",299,0)
 ;;VEAL;VEAL
"RTN","FHSELA2",300,0)
 ;;VEGETABLES;VEGETABLES
"RTN","FHSELA2",301,0)
 ;;VEGETABLES, GREEN;GREEN VEGETABLES
"RTN","FHSELA2",302,0)
 ;;VINEGAR;VINEGAR
"RTN","FHSELA2",303,0)
 ;;WATERFOWL;WATERFOWL
"RTN","FHSELA2",304,0)
 ;;WHEAT;FLOUR;WHEAT
"RTN","FHSELA2",305,0)
 ;;WHEY;WHEY
"RTN","FHSELA2",306,0)
 ;;WINE, RED;RED WINE
"RTN","FHSELA2",307,0)
 ;;YEAST;YEAST
"RTN","FHSELA2",308,0)
 ;;YELLOW DYES;FD&C YELLOW DYE #10;FD&C YELLOW DYE #2;FD&C YELLOW DYE #5;FD&C YELLOW DYE #6;FD&C YELLOW DYE #6 LAKE;TARTRAZINE;YELLOW DYES
"RTN","FHSELA2",309,0)
 ;;ZUCCHINI;ZUCCHINI
"RTN","FHSP")
0^42^B75939691
"RTN","FHSP",1,0)
FHSP ; HISC/REL/NCA - Standing Orders ;2/13/95  14:30 
"RTN","FHSP",2,0)
 ;;5.5;DIETETICS;**5,8**;Jan 28, 2005;Build 28
"RTN","FHSP",3,0)
EN1 ; Enter/Edit Standing Orders
"RTN","FHSP",4,0)
 K DIC W ! S (DIC,DIE)="^FH(118.3,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=118.3 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN1:Y<1
"RTN","FHSP",5,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=118.3 D ^DIE K DA,DIE,DIDEL,DR G EN1
"RTN","FHSP",6,0)
EN2 ; List Standing Orders
"RTN","FHSP",7,0)
 W ! S L=0,DIC="^FH(118.3,",FLDS=".01,99,1",BY="NAME"
"RTN","FHSP",8,0)
 S FR="",TO="",DHD="STANDING ORDERS" D EN1^DIP
"RTN","FHSP",9,0)
 K %ZIS S IOP="" D ^%ZIS G KIL
"RTN","FHSP",10,0)
SO ;OutPT SO
"RTN","FHSP",11,0)
 S FHSOOP=$O(^FHPT(FHDFN,"OP","B",DT-1))
"RTN","FHSP",12,0)
 I '$D(^FHPT(FHDFN,"OP"))!'$G(FHSOOP) W !!,"** NO OUTPATIENT DATA ON FILE!  Please enter outpatient meals from Recurring Meals Menu [FHOMRMGR]." Q
"RTN","FHSP",13,0)
 W @IOF,!,"Outpatient Recurring Meals... "
"RTN","FHSP",14,0)
A0 ;Rec Meal entry.
"RTN","FHSP",15,0)
 K FHDM14,FHEDI,FHEDIF,FHIEN,FHMIEN,FHFLG,FHCK
"RTN","FHSP",16,0)
 S FHQ=0
"RTN","FHSP",17,0)
 S (FHTOTML("B"),FHTOTML("N"),FHTOTML("E"),FHTOTML("A"))=0
"RTN","FHSP",18,0)
 F FHI=DT-1:0 S FHI=$O(^FHPT("RM",FHI)) Q:FHI'>0!FHQ  F FHJ=0:0 S FHJ=$O(^FHPT("RM",FHI,FHDFN,FHJ)) Q:FHJ'>0!FHQ  I ($P($G(^FHPT(FHDFN,"OP",FHJ,0)),U,15)'="C") D
"RTN","FHSP",19,0)
 .S FHDA15=$G(^FHPT(FHDFN,"OP",FHJ,0))
"RTN","FHSP",20,0)
 .S FHDM14(FHI,$P(FHDA15,U,4))=FHI_U_FHJ
"RTN","FHSP",21,0)
 .S FHMEAL=$P(FHDA15,U,4),FHLOC=$P(FHDA15,U,3),FHLOCN=$P($G(^FH(119.6,FHLOC,0)),U,1),FHMEAL=$S(FHMEAL="B":"Break",FHMEAL="N":"Noon",1:"Even"),FH11=FHMEAL_"  "_FHLOCN
"RTN","FHSP",22,0)
 .S Y=$P(FHDA15,U,1) X ^DD("DD") S DTP=Y
"RTN","FHSP",23,0)
 .S (FHCOFLG,FHDATL)=0
"RTN","FHSP",24,0)
 .I $Y>(IOSL-5) K DIR S DIR(0)="E",DIR("A")="Enter RETURN to Continue or '^' to Quit Listing"  D ^DIR W:Y @IOF I 'Y S FHQ=1 Q
"RTN","FHSP",25,0)
 .W !,DTP,?12,FH11,":"
"RTN","FHSP",26,0)
 .S FHDATL=$L(DTP)+13+$L(FH11)
"RTN","FHSP",27,0)
 .F FHSF=0:0 S FHSF=$O(^FHPT(FHDFN,"OP",FHJ,"SP",FHSF)) Q:FHSF'>0  D
"RTN","FHSP",28,0)
 ..S FHDA15SF=$G(^FHPT(FHDFN,"OP",FHJ,"SP",FHSF,0))
"RTN","FHSP",29,0)
 ..Q:$P(FHDA15SF,U,6)
"RTN","FHSP",30,0)
 ..S FHDASFNM=$P($G(^FH(118.3,$P(FHDA15SF,U,2),0)),U,1),FHDASFQT=$P(FHDA15SF,U,8)
"RTN","FHSP",31,0)
 ..I (FHDATL+$L(FHDASFNM)+3+$L(FHDASFQT))>79 W !,?19 S FHDATL=19
"RTN","FHSP",32,0)
 ..I (FHDATL>19),(FHCOFLG=1) W ","
"RTN","FHSP",33,0)
 ..S FHDATL=FHDATL+4+$L(FHDASFNM)+3+$L(FHDASFQT)
"RTN","FHSP",34,0)
 ..W " ",FHDASFNM," = ",FHDASFQT
"RTN","FHSP",35,0)
 ..S FHCOFLG=1
"RTN","FHSP",36,0)
 F FHI=0:0 S FHI=$O(FHDM14(FHI)) Q:FHI'>0  D
"RTN","FHSP",37,0)
 .F FHJ="B","N","E" Q:FHJ=""  D
"RTN","FHSP",38,0)
 ..I (FHJ="B")&$D(FHDM14(FHI,FHJ)) S FHTOTML("B")=FHTOTML("B")+1,FHIEN(FHJ)=FHDM14(FHI,FHJ)
"RTN","FHSP",39,0)
 ..I (FHJ="N")&$D(FHDM14(FHI,FHJ)) S FHTOTML("N")=FHTOTML("N")+1,FHIEN(FHJ)=FHDM14(FHI,FHJ)
"RTN","FHSP",40,0)
 ..I (FHJ="E")&$D(FHDM14(FHI,FHJ)) S FHTOTML("E")=FHTOTML("E")+1,FHIEN(FHJ)=FHDM14(FHI,FHJ)
"RTN","FHSP",41,0)
 I '$D(FHDM14) W !!,"NO OUTPATIENT DATA ON FILE for today's date and the future!!",! Q
"RTN","FHSP",42,0)
 ;
"RTN","FHSP",43,0)
R1 S (FHCNSOF,FH1,FHQ)=0,(FHDTML,FHX,FHALML)="" R !!,"Enter a Meal (B,N,E or ALL): ALL// ",FHDTML:DTIME
"RTN","FHSP",44,0)
 Q:'$T!(FHDTML["^")
"RTN","FHSP",45,0)
 S:FHDTML="" FHDTML="ALL"
"RTN","FHSP",46,0)
 I FHDTML["?" S FHQ=1 G MS1
"RTN","FHSP",47,0)
 S X=FHDTML D TR^FH S (FHX,FHDTML)=X
"RTN","FHSP",48,0)
 I FHDTML="A" S FHQ=1 G MS1
"RTN","FHSP",49,0)
 S FHALML=FHX
"RTN","FHSP",50,0)
 I FHDTML="ALL" S FHDTML=$E(FHDTML,1),FHALML="BNE"
"RTN","FHSP",51,0)
 I $L(FHDTML)=3 S:("BNE")'[$E(FHDTML,1) FHQ=1 S:("BNE")'[$E(FHDTML,2) FHQ=1 S:("BNE")'[$E(FHDTML,3) FHQ=1 S FHCK($E(FHDTML,1))="",FHCK($E(FHDTML,2))="",FHCK($E(FHDTML,3))=""
"RTN","FHSP",52,0)
 I $L(FHDTML)=2 S:("BNE")'[$E(FHDTML,1) FHQ=1 S:("BNE")'[$E(FHDTML,2) FHQ=1 S FHCK($E(FHDTML,1))="",FHCK($E(FHDTML,2))=""
"RTN","FHSP",53,0)
 I $L(FHDTML)=1 S:("ABNE")'[$E(FHDTML,1) FHQ=1 S FHCK(FHDTML)=""
"RTN","FHSP",54,0)
 I FHDTML="A" S (FHCK("B"),FHCK("N"),FHCK("E"))=""
"RTN","FHSP",55,0)
 S:$L(FHDTML)>3 FHQ=1
"RTN","FHSP",56,0)
 G:FHQ MS1
"RTN","FHSP",57,0)
 I $L(FHDTML)=3 S:'$G(FHTOTML($E(FHDTML,1))) FH1=1 S:'$G(FHTOTML($E(FHDTML,2))) FH1=1 S:'$G(FHTOTML($E(FHDTML,3))) FH1=1 I FH1 W !!,"There is no outpatient data for this Meal!!" G R1
"RTN","FHSP",58,0)
 I $L(FHDTML)=2 S:'$G(FHTOTML($E(FHDTML,1))) FH1=1 S:'$G(FHTOTML($E(FHDTML,2))) FH1=1 I FH1 W !!,"There is no outpatient data for this Meal!!" G R1
"RTN","FHSP",59,0)
MS1 I FHQ W *7,!,"Select B for Breakfast, N for Noon, E for Evening or ALL for all meals",!,"Answer may be multiple meals, e.g., BN or NE" G R1
"RTN","FHSP",60,0)
 S:$L(FHDTML)>1 FHDTML="A"
"RTN","FHSP",61,0)
 S FHLIS=0
"RTN","FHSP",62,0)
 I (FHDTML'="A"),(FHTOTML(FHDTML)'>0) W !!,"There is no outpatient data for this Meal!!" G R1
"RTN","FHSP",63,0)
 I FHDTML'="A",(FHTOTML(FHDTML)=1) S FHEDI($P(FHIEN(FHDTML),U,2))="" G E0
"RTN","FHSP",64,0)
 I FHDTML="A" G ALL
"RTN","FHSP",65,0)
 I FHDTML'="A",(FHTOTML(FHDTML)>1) D CHK^FHSPED Q:'$G(FHFLG)   ;quit dates are not entered for range.
"RTN","FHSP",66,0)
 I $G(FHFLG) F FHI=FHDT1-1:0 S FHI=$O(FHDM14(FHI)) Q:(FHI'>0)!(FHI>FHDT2)  S:$D(FHDM14(FHI,FHDTML)) FHEDI($P(FHDM14(FHI,FHDTML),U,2))=""
"RTN","FHSP",67,0)
 G E0
"RTN","FHSP",68,0)
ALL S FHCT=0,(FHDT1,FHDT2,FHDTSV)=DT F FHI=DT-1:0 S FHI=$O(FHDM14(FHI)) S:'FHI FHDT2=FHDTSV Q:FHI'>0  S FHCT=FHCT+1,FHDTSV=FHI S:FHCT=1 FHDT1=FHI S FHJ="" F  S FHJ=$O(FHDM14(FHI,FHJ)) Q:FHJ=""  S FHEDI($P(FHDM14(FHI,FHJ),U,2))=""
"RTN","FHSP",69,0)
E0 S ADM=0
"RTN","FHSP",70,0)
E1 W ! S FHLOCN="",ADM=$O(FHEDI(ADM)) Q:'ADM  S NO=1,MEAL=$P($G(^FHPT(FHDFN,"OP",ADM,0)),U,4),FHLOC=$P($G(^(0)),U,3)
"RTN","FHSP",71,0)
 I FHX'="ALL",FHX'[MEAL G E1
"RTN","FHSP",72,0)
 I $G(FHLOC) S FHLOCN=$P($G(^FH(119.6,FHLOC,0)),U,1)
"RTN","FHSP",73,0)
 D LIS G:'LN N1
"RTN","FHSP",74,0)
 K DIR W ! S DIR(0)="YA",DIR("A")="Edit a Standing Order? ",DIR("B")="YES" D ^DIR K DIR Q:$D(DIRUT)!$D(DIROUT)  G N1:Y<1
"RTN","FHSP",75,0)
N0 R !!,"Edit which Order #? ",X:DTIME Q:'$T!("^"[X)  I X'?1N.N!(X<1)!(X>LN) W *7," Enter # of Order to Edit" G N0
"RTN","FHSP",76,0)
 S SP=$P(LS,",",+X),SP=$P($G(^FHPT(FHDFN,"OP",ADM,"SP",+SP,0)),"^",2) I $D(P(+X,SP)) S LN=+X  G N1A
"RTN","FHSP",77,0)
 W !!,"Standing Order ",$P($G(^FH(118.3,+SP,0)),"^",1)," added" S LN=LN+1,P(LN,SP)="" G N1A
"RTN","FHSP",78,0)
N1 K DIC W ! S DIC="^FH(118.3,",DIC("A")="Enter Standing Order: ",DIC(0)="AEQM"
"RTN","FHSP",79,0)
 D ^DIC K DIC,DLAYGO Q:"^"[X!$D(DTOUT)  G SO:Y<1 S SP=+Y
"RTN","FHSP",80,0)
 W !!,"Standing Order ",$P($G(^FH(118.3,+SP,0)),"^",1)," added"
"RTN","FHSP",81,0)
 S LN=LN+1,P(LN,SP)=""
"RTN","FHSP",82,0)
N1A W !,"Standing Order: ",$P($G(^FH(118.3,+SP,0)),"^",1)_" // " R X:DTIME G KIL:'$T
"RTN","FHSP",83,0)
 I X="^" G E0
"RTN","FHSP",84,0)
 I X="@" D SO3 W "  .. Done" G E0
"RTN","FHSP",85,0)
 I X'="" W *7,!,"Press Return to take Default or ""@"" to Delete" G N1A
"RTN","FHSP",86,0)
 S $P(P(LN,SP),"^",5)=SP
"RTN","FHSP",87,0)
N2 ;
"RTN","FHSP",88,0)
 S $P(P(LN,SP),"^",6)=MEAL
"RTN","FHSP",89,0)
N2A W !,"Quantity:  ",$S($P(P(LN,SP),"^",4):$P(P(LN,SP),"^",4)_"// ",1:"1// ") R NUM:DTIME S:NUM="" NUM=$S($P(P(LN,SP),"^",4):$P(P(LN,SP),"^",4),1:1) G:'$T!(NUM="^") KIL
"RTN","FHSP",90,0)
 I NUM="@" S $P(P(LN,SP),"^",4)="" G N2A
"RTN","FHSP",91,0)
 I NUM'?1N!(NUM<1) W !,*7,"Enter a number from 1-9." G N2A
"RTN","FHSP",92,0)
 S $P(P(LN,SP),"^",7)=NUM
"RTN","FHSP",93,0)
 S C1=$P(P(LN,SP),"^",2,4),C2=$P(P(LN,SP),"^",5,7)
"RTN","FHSP",94,0)
 Q:C1=C2
"RTN","FHSP",95,0)
N3 W !!,"ADD this Order? Y// " R YN:DTIME G:'$T!(YN="^") KIL S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7,"  Answer YES or NO" G N3
"RTN","FHSP",96,0)
 Q:YN?1"N".E
"RTN","FHSP",97,0)
 I C1'="^^" S OLD=$P(P(LN,SP),"^",1),$P(^FHPT(FHDFN,"OP",ADM,"SP",OLD,0),"^",6,7)=NOW_"^"_DUZ K ^FHPT("ASPO",FHDFN,ADM,OLD) D
"RTN","FHSP",98,0)
 .S DTP=$P($G(^FHPT(FHDFN,"OP",ADM,0)),U,1) D DTP^FH
"RTN","FHSP",99,0)
 .S FHACT="O",FHTXT="Outpatient Standing Order: "_NUM_" "_$P($G(^FH(118.3,SP,0)),U,1)_" ("_MEAL_"), "_FHLOCN_", "_DTP D OPFILE^FHORX Q
"RTN","FHSP",100,0)
 S $P(P(LN,SP),"^",2,4)="^^",$P(P(LN,SP),"^",2,4)=$P(P(LN,SP),"^",5,7),$P(P(LN,SP),"^",5,7)="^^"
"RTN","FHSP",101,0)
ADD ; Add SO
"RTN","FHSP",102,0)
 F FHI=0:0 S FHI=$O(FHEDI(FHI)) Q:FHI'>0  S ADM=FHI D AD1
"RTN","FHSP",103,0)
 D EVNT^FHSP1
"RTN","FHSP",104,0)
 G E0
"RTN","FHSP",105,0)
AD1 L +^FHPT(FHDFN,"OP",ADM,"SP",0)
"RTN","FHSP",106,0)
 S FHLOCN="" S:'$D(FHCNSOF) FHCNSOF=0
"RTN","FHSP",107,0)
 S MEAL=$P($G(^FHPT(FHDFN,"OP",ADM,0)),U,4) Q:'$D(FHCK(MEAL))
"RTN","FHSP",108,0)
 S FHLOC=$P($G(^(0)),U,3) I $G(FHLOC) S FHLOCN=$P($G(^FH(119.6,FHLOC,0)),U,1)
"RTN","FHSP",109,0)
 I '$D(^FHPT(FHDFN,"OP",ADM,"SP",0)) S ^FHPT(FHDFN,"OP",ADM,"SP",0)="^115.1626^^"
"RTN","FHSP",110,0)
 S X=^FHPT(FHDFN,"OP",ADM,"SP",0),NO=$P(X,"^",3)+1,^(0)=$P(X,"^",1,2)_"^"_NO_"^"_($P(X,"^",4)+1)
"RTN","FHSP",111,0)
 L -^FHPT(FHDFN,"OP",ADM,"SP",0) I $D(^FHPT(FHDFN,"OP",ADM,"SP",NO)) G AD1
"RTN","FHSP",112,0)
 S ^FHPT(FHDFN,"OP",ADM,"SP",NO,0)=NO_"^"_SP_"^"_MEAL_"^"_NOW_"^"_DUZ_"^^^"_NUM,^FHPT("ASPO",FHDFN,ADM,NO)="",LS=LS_NO_","
"RTN","FHSP",113,0)
 S $P(P(LN,SP),"^",1)=NO
"RTN","FHSP",114,0)
 S DTP=$P($G(^FHPT(FHDFN,"OP",ADM,0)),U,1) D DTP^FH S FHCNSOF=FHCNSOF+1 S:FHCNSOF=1 FHDTP=DTP
"RTN","FHSP",115,0)
 Q
"RTN","FHSP",116,0)
SO2 ; SO Inquiry
"RTN","FHSP",117,0)
 Q:'$G(ADM)
"RTN","FHSP",118,0)
 S ALL=1 D ^FHOMDPA G:'FHDFN KIL S NO=0 D LIS G SO2
"RTN","FHSP",119,0)
SO3 ; Cancel SO
"RTN","FHSP",120,0)
 S (FHLOCN,FHDTP)="" S:'$D(FHCNSOF) FHCNSOF=0
"RTN","FHSP",121,0)
 F FHI=0:0 S FHI=$O(FHEDI(FHI)) Q:FHI'>0  S ADM=FHI D
"RTN","FHSP",122,0)
 .S MEAL=$P($G(^FHPT(FHDFN,"OP",ADM,0)),U,4) Q:'$D(FHCK(MEAL))
"RTN","FHSP",123,0)
 .S FHLOCN=""
"RTN","FHSP",124,0)
 .S FHLOC=$P($G(^FHPT(FHDFN,"OP",ADM,0)),U,3) I $G(FHLOC) S FHLOCN=$P($G(^FH(119.6,FHLOC,0)),U,1)
"RTN","FHSP",125,0)
 .F FHJ=0:0 S FHJ=$O(^FHPT(FHDFN,"OP",ADM,"SP",FHJ)) Q:FHJ'>0  D
"RTN","FHSP",126,0)
 ..S SPD=$P($G(^FHPT(FHDFN,"OP",ADM,"SP",FHJ,0)),U,2)
"RTN","FHSP",127,0)
 ..S NO=""
"RTN","FHSP",128,0)
 ..I SP=SPD,$P($G(^FHPT(FHDFN,"OP",ADM,"SP",FHJ,0)),U,6)="" S NO=FHJ
"RTN","FHSP",129,0)
 ..Q:'NO
"RTN","FHSP",130,0)
 ..S $P(^FHPT(FHDFN,"OP",ADM,"SP",NO,0),"^",6,7)=NOW_"^"_DUZ
"RTN","FHSP",131,0)
 ..S X=^FHPT(FHDFN,"OP",ADM,"SP",NO,0),SP=$P(X,"^",2),MEAL=$P(X,"^",3),NUM=$P(X,"^",8)
"RTN","FHSP",132,0)
 ..K ^FHPT("ASPO",FHDFN,ADM,NO),P(LN,SP)
"RTN","FHSP",133,0)
 ..S DTP=$P($G(^FHPT(FHDFN,"OP",ADM,0)),U,1) D DTP^FH S FHDTP=DTP
"RTN","FHSP",134,0)
 S:'$D(FHDTP) FHDTP=DT
"RTN","FHSP",135,0)
 I $D(FHDT1) S DTP=FHDT1 D DTP^FH S FHDTP=DTP
"RTN","FHSP",136,0)
 I $D(FHDT2) S DTP=FHDT2 D DTP^FH S:FHDTP'=DTP FHDTP=FHDTP_" to "_DTP
"RTN","FHSP",137,0)
 S FHACT="C",FHTXT="Outpatient Standing Order:  "_$P($G(^FH(118.3,SP,0)),U,1)_" ("_FHALML_"), "_FHLOCN_", Cancelled "_FHDTP D OPFILE^FHORX
"RTN","FHSP",138,0)
 Q
"RTN","FHSP",139,0)
LIS ;list outpt SO
"RTN","FHSP",140,0)
 Q:'$G(ADM)
"RTN","FHSP",141,0)
 D PATNAME^FHOMUTL
"RTN","FHSP",142,0)
 S FHDATA0=$G(^FHPT(FHDFN,"OP",ADM,0))
"RTN","FHSP",143,0)
 S DTP=$P(FHDATA0,U,1) D DTP^FH S FHDTST=DTP
"RTN","FHSP",144,0)
 S NAM=FHPTNM,Y="",(FHDIETP,FHDIET,WARD)=""
"RTN","FHSP",145,0)
 S FHDIET=$P(FHDATA0,U,2) I $D(^FH(119.6,$P(FHDATA0,U,3),0)) S WARD=$P(^FH(119.6,$P(FHDATA0,U,3),0),U,1)
"RTN","FHSP",146,0)
 I $G(FHDIET) S Y=$P(^FH(111,FHDIET,0),U,1)
"RTN","FHSP",147,0)
 I FHDIET="" S FHRNUM=ADM D DIETPAT^FHOMRR1 S:$D(FHDIETP) Y=FHDIETP
"RTN","FHSP",148,0)
 W !!,NAM,"  " W:WARD'="" "( ",WARD," )" W:$D(FHDTST) ?40,"Date: ",FHDTST
"RTN","FHSP",149,0)
 W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order")
"RTN","FHSP",150,0)
 D ALG^FHCLN W !,"   Allergies: ",$S(ALG="":"None on file",1:ALG)
"RTN","FHSP",151,0)
 K N,P S CTR=0
"RTN","FHSP",152,0)
 F K=0:0 S K=$O(^FHPT("ASPO",FHDFN,ADM,K)) Q:K<1  S X=^FHPT(FHDFN,"OP",ADM,"SP",K,0),M=$P(X,"^",3),M=$S(M="BNE":"A",1:$E(M,1)),N(M,K)=$P(X,"^",2,3)_"^"_$P(X,"^",8,9)
"RTN","FHSP",153,0)
 S FHSOFG=1
"RTN","FHSP",154,0)
 S LN=0,LS="" I $O(N(""))="" W !!,"No Active Outpatient Standing Orders." Q
"RTN","FHSP",155,0)
 W !!,"Active Outpatient Standing Orders: ",!
"RTN","FHSP",156,0)
 F M="A","B","N","E" D
"RTN","FHSP",157,0)
 .F K=0:0 S K=$O(N(M,K)) Q:K<1  S Z=+N(M,K) I Z D
"RTN","FHSP",158,0)
 ..S LN=LN+1,LS=LS_K_"," D L1 W ! W:NO $J(LN,2)
"RTN","FHSP",159,0)
 ..S NUM=$P(N(M,K),"^",3)
"RTN","FHSP",160,0)
 ..W ?5,M2,?18,$S(NUM:NUM,1:1)," ",$P(^FH(118.3,Z,0),"^",1)_$S($P(N(M,K),"^",4)'="Y":" (I)",1:"") I $G(^FH(118.3,Z,"I"))="Y" W "     (** INACTIVE **)"
"RTN","FHSP",161,0)
 ..S P(LN,+Z)=K_"^"_$P(N(M,K),"^",1,3) Q
"RTN","FHSP",162,0)
 Q
"RTN","FHSP",163,0)
L1 ; Store SO
"RTN","FHSP",164,0)
 S M1=$P(N(M,K),"^",2) I M1="BNE" S M2="All Meals" Q
"RTN","FHSP",165,0)
 S L=$E(M1,1),M2=$S(L="B":"Break",L="N":"Noon",1:"Even")
"RTN","FHSP",166,0)
 S L=$E(M1,2) Q:L=""  S M2=M2_","_$S(L="B":"Break",L="N":"Noon",1:"Even") Q
"RTN","FHSP",167,0)
 Q
"RTN","FHSP",168,0)
KIL G KILL^XUSCLEAN
"RTN","FHSP11")
0^52^B6692534
"RTN","FHSP11",1,0)
FHSP11 ; HISC/NCA,RTK - Print Standing Orders Labels ;2/26/96  09:59
"RTN","FHSP11",2,0)
 ;;5.5;DIETETICS;**5,8**;Jan 28, 2005;Build 28
"RTN","FHSP11",3,0)
 ;patch #5 - added outpatient SOs.
"RTN","FHSP11",4,0)
 K ^TMP($J,"NAME") F NX=0:0 S NX=$O(^FH(118.3,NX)) Q:NX<1  S Y=^(NX,0),N1=$P(Y,"^",1) I '$D(^FH(118.3,NX,"I")) S ^TMP($J,"NAME",NX)=$P(Y,"^",1)
"RTN","FHSP11",5,0)
 D P1
"RTN","FHSP11",6,0)
 Q
"RTN","FHSP11",7,0)
P1 S DTP=DT D DTP^FH S DTE=DTP_" "_$S(MEAL="B":"BREAK",MEAL="N":"NOON",1:"EVEN"),S1=$S(LAB=1:6,1:9),S2=LAB=2*5+33
"RTN","FHSP11",8,0)
 F SP=0:0 S SP=$O(^TMP($J,"SOL",SP)) Q:SP<1  D P2
"RTN","FHSP11",9,0)
 Q
"RTN","FHSP11",10,0)
P2 S WRD="" F  S WRD=$O(^TMP($J,"SOL",SP,WRD)) Q:WRD=""  D P3
"RTN","FHSP11",11,0)
 Q
"RTN","FHSP11",12,0)
P3 F FHDFN=0:0 S FHDFN=$O(^TMP($J,"SOL",SP,WRD,FHDFN)) Q:FHDFN<1  D PID^FHDPA,P4
"RTN","FHSP11",13,0)
 Q
"RTN","FHSP11",14,0)
P4 F FHL=0:0 S FHL=$O(^TMP($J,"SOL",SP,WRD,FHDFN,FHL)) Q:FHL<1  D P5
"RTN","FHSP11",15,0)
 Q
"RTN","FHSP11",16,0)
P5 S Y=^(FHL)
"RTN","FHSP11",17,0)
 S IS=$P(Y,"^",4),FHORD=$P(Y,"^",1) Q:'FHORD  S M1=$P(Y,"^",2) Q:M1'[MEAL  S Q=$P(Y,"^",3) S:'Q Q=1
"RTN","FHSP11",18,0)
 D PATNAME^FHOMUTL I FHPTNM="" Q
"RTN","FHSP11",19,0)
 S ALG="" D ALG^FHCLN
"RTN","FHSP11",20,0)
 Q:$P($G(^FH(118.3,+FHORD,0)),"^",2)'="Y"
"RTN","FHSP11",21,0)
 S NAM=FHPTNM
"RTN","FHSP11",22,0)
 I LAB>2 D LL Q
"RTN","FHSP11",23,0)
 W !,$E(NAM,1,S2-$L(WRD)),?(S2+2-$L(WRD)),$E(WRD,3,99),!?$S(LAB=1:3,1:0),FHBID,$S(ALG="":"",1:" *ALG") W:IS'="" ?(S2-22),"*NURSE" W ?(S2-15),DTE S LN=2 I LAB=2 W !! S LN=4
"RTN","FHSP11",24,0)
 W !,$J(Q,2)," ",$S($D(^TMP($J,"NAME",FHORD)):$P(^TMP($J,"NAME",FHORD),"^",1),$D(^FH(118.3,+FHORD,0)):$P(^(0),"^",1),1:"") S LN=LN+1
"RTN","FHSP11",25,0)
 I LN<S1 F L=LN+1:1:S1 W !
"RTN","FHSP11",26,0)
 Q
"RTN","FHSP11",27,0)
LL ;
"RTN","FHSP11",28,0)
 S FHCOL=$S(LAB=3:3,1:2)
"RTN","FHSP11",29,0)
 I LABSTART>1 F FHLABST=1:1:(LABSTART-1)*FHCOL D  S LABSTART=1
"RTN","FHSP11",30,0)
 .I LAB=3 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6)="" D LL3^FHLABEL
"RTN","FHSP11",31,0)
 .I LAB=4 S (PCL1,PCL2,PCL3,PCL4,PCL5,PCL6,PCL7,PCL8)="" D LL4^FHLABEL
"RTN","FHSP11",32,0)
 .Q
"RTN","FHSP11",33,0)
 S FHTAB=$S(LAB=3:24,1:37)
"RTN","FHSP11",34,0)
 S WRD1=$E(WRD,3,99)
"RTN","FHSP11",35,0)
 S NAM=$E(NAM,1,FHTAB-$L(WRD1)),BIDIS=BID_$S(ALG="":"",1:" *ALG")
"RTN","FHSP11",36,0)
 I IS="N" S BIDIS=BIDIS_" *NURSE"
"RTN","FHSP11",37,0)
 S LNA=NAM_$J(WRD1,FHTAB+1-$L(NAM)),LNB=BIDIS_$J(DTE,FHTAB+1-$L(BIDIS))
"RTN","FHSP11",38,0)
 S LNC=$J(Q,2)_" "_$P($G(^FH(118.3,+FHORD,0)),U,1)
"RTN","FHSP11",39,0)
 I LAB=3 S (PCL1,PCL4,PCL6)="",PCL2=LNA,PCL3=LNB,PCL5=LNC
"RTN","FHSP11",40,0)
 I LAB=4 S (PCL1,PCL2,PCL5,PCL7,PCL8)="",PCL3=LNA,PCL4=LNB,PCL6=LNC
"RTN","FHSP11",41,0)
 D:LAB=3 LL3^FHLABEL D:LAB=4 LL4^FHLABEL
"RTN","FHSP11",42,0)
 Q
"RTN","FHSPED")
0^43^B71023432
"RTN","FHSPED",1,0)
FHSPED ; HISC/REL/NCA - Enter/Cancel Standing Orders ;7/22/94  13:59
"RTN","FHSPED",2,0)
 ;;5.5;DIETETICS;**5,8**;Jan 28, 2005;Build 28
"RTN","FHSPED",3,0)
EN1 ; Enter Standing Orders for Patient
"RTN","FHSPED",4,0)
 D NOW^%DTC S NOW=%
"RTN","FHSPED",5,0)
ASK K DIC,X,DFN,FHDFN,FHPTNM,Y S ADM="",FHALL=1 D ^FHOMDPA
"RTN","FHSPED",6,0)
 G:'FHDFN KIL
"RTN","FHSPED",7,0)
 S WARD="" I $G(DFN)'="" S WARD=$G(^DPT(DFN,.1))
"RTN","FHSPED",8,0)
 I WARD="" W !!,"** NO CURRENT ADMISSION ON FILE!  If this is an Inpatient, please admit the patient first.",! D SO^FHSP G ASK
"RTN","FHSPED",9,0)
 K ADM
"RTN","FHSPED",10,0)
A0 W !!,"Return for OUTPATIENT or 'C' for CURRENT Admission: " R X:DTIME G:X["^" KIL D:X="c" TR^FH
"RTN","FHSPED",11,0)
 I (X="")&'($D(^FHPT(FHDFN,"OP"))) W !!,"** NO OUTPATIENT DATA ON FILE!  Please enter outpatient meals from Recurring Meals Menu [FHOMRMGR]!!" G ASK
"RTN","FHSPED",12,0)
 I (X="") D SO^FHSP G ASK
"RTN","FHSPED",13,0)
 I WARD'="",X="C" S ADM=$G(^DPT("CN",WARD,DFN)) G CAD:ADM
"RTN","FHSPED",14,0)
 S DIC="^FHPT(FHDFN,""A"",",DIC(0)="EQM" D ^DIC G:Y<1 A0 S ADM=+Y
"RTN","FHSPED",15,0)
CAD I ADM,$G(^FHPT(FHDFN,"A",ADM,0)) S (SDT,STDT)=$P(^FHPT(FHDFN,"A",ADM,0),U,1),ENDT=DT G E1:SDT
"RTN","FHSPED",16,0)
 ;
"RTN","FHSPED",17,0)
E1 W ! S NO=1 D LIS G:'$G(LN) N1
"RTN","FHSPED",18,0)
 K DIR W ! S DIR(0)="YA",DIR("A")="Edit a Standing Order? ",DIR("B")="YES" D ^DIR K DIR G:$D(DIRUT)!$D(DIROUT) EN1 G:Y<1 N1
"RTN","FHSPED",19,0)
N0 R !!,"Edit which Order #? ",X:DTIME G:'$T!("^"[X) EN1 I X'?1N.N!(X<1)!(X>LN) W *7," Enter # of Order to Edit" G N0
"RTN","FHSPED",20,0)
 S SP=$P(LS,",",+X),SP=$P($G(^FHPT(FHDFN,"A",ADM,"SP",+SP,0)),"^",2) I $D(P(+X,SP)) S LN=+X  G N1A
"RTN","FHSPED",21,0)
 W !!,"Standing Order ",$P($G(^FH(118.3,+SP,0)),"^",1)," added" S LN=LN+1,P(LN,SP)="" G N1A
"RTN","FHSPED",22,0)
N1 K DIC W ! S DIC="^FH(118.3,",DIC("A")="Enter Standing Order: ",DIC(0)="AEQM"
"RTN","FHSPED",23,0)
 D ^DIC K DIC,DLAYGO G EN1:"^"[X!$D(DTOUT),N1:Y<1 S SP=+Y
"RTN","FHSPED",24,0)
 W !!,"Standing Order ",$P($G(^FH(118.3,+SP,0)),"^",1)," added"
"RTN","FHSPED",25,0)
 S LN=LN+1,P(LN,SP)=""
"RTN","FHSPED",26,0)
N1A W !,"Standing Order: ",$P($G(^FH(118.3,+SP,0)),"^",1)_" // " R X:DTIME G KIL:'$T,FHSPED:X="^"
"RTN","FHSPED",27,0)
 I X="@" D EN3 W "  .. Done" G E1
"RTN","FHSPED",28,0)
 I X'="" W *7,!,"Press Return to take Default or ""@"" to Delete" G N1A
"RTN","FHSPED",29,0)
 S $P(P(LN,SP),"^",5)=SP
"RTN","FHSPED",30,0)
N2 W !,"Select Meal (B,N,E or ALL): ",$S($P(P(LN,SP),"^",3)'="":$P(P(LN,SP),"^",3)_" // ",1:"") R MEAL:DTIME G:'$T!(MEAL="^") KIL
"RTN","FHSPED",31,0)
 I MEAL="" G:$P(P(LN,SP),"^",3)="" KIL S MEAL=$P(P(LN,SP),"^",3),$P(P(LN,SP),"^",6)=MEAL G N2A
"RTN","FHSPED",32,0)
 I MEAL="@" S $P(P(LN,SP),"^",3)="" G N2
"RTN","FHSPED",33,0)
 S X=MEAL D TR^FH S MEAL=X S:$P("ALL",MEAL,1)="" MEAL="BNE" S X=MEAL,MEAL="" S:X["B" MEAL="B" S:X["N" MEAL=MEAL_"N" S:X["E" MEAL=MEAL_"E"
"RTN","FHSPED",34,0)
 I $L(X)'=$L(MEAL) W *7,!,"Select B for Breakfast, N for Noon, E for Evening or ALL for all meals",!,"Answer may be multiple meals, e.g., BN or NE" G N2
"RTN","FHSPED",35,0)
 S $P(P(LN,SP),"^",6)=MEAL
"RTN","FHSPED",36,0)
N2A W !,"Quantity:  ",$S($P(P(LN,SP),"^",4):$P(P(LN,SP),"^",4)_"// ",1:"1// ") R NUM:DTIME S:NUM="" NUM=$S($P(P(LN,SP),"^",4):$P(P(LN,SP),"^",4),1:1) G:'$T!(NUM="^") KIL
"RTN","FHSPED",37,0)
 I NUM="@" S $P(P(LN,SP),"^",4)="" G N2A
"RTN","FHSPED",38,0)
 I NUM'?1N!(NUM<1) W !,*7,"Enter a number from 1-9." G N2A
"RTN","FHSPED",39,0)
 S $P(P(LN,SP),"^",7)=NUM
"RTN","FHSPED",40,0)
 S C1=$P(P(LN,SP),"^",2,4),C2=$P(P(LN,SP),"^",5,7) G:C1=C2 E1
"RTN","FHSPED",41,0)
N3 W !!,"ADD this Order? Y// " R YN:DTIME G:'$T!(YN="^") KIL S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7,"  Answer YES or NO" G N3
"RTN","FHSPED",42,0)
 G:YN?1"N".E E1
"RTN","FHSPED",43,0)
 I C1'="^^" S OLD=$P(P(LN,SP),"^",1),$P(^FHPT(FHDFN,"A",ADM,"SP",OLD,0),"^",6,7)=NOW_"^"_DUZ K ^FHPT("ASP",FHDFN,ADM,OLD) S EVT="S^C^"_OLD D ^FHORX
"RTN","FHSPED",44,0)
 S $P(P(LN,SP),"^",2,4)="^^",$P(P(LN,SP),"^",2,4)=$P(P(LN,SP),"^",5,7),$P(P(LN,SP),"^",5,7)="^^"
"RTN","FHSPED",45,0)
ADD ; Add Standing Order
"RTN","FHSPED",46,0)
 L +^FHPT(FHDFN,"A",ADM,"SP",0)
"RTN","FHSPED",47,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"SP",0)) S ^FHPT(FHDFN,"A",ADM,"SP",0)="^115.08^^"
"RTN","FHSPED",48,0)
 S X=^FHPT(FHDFN,"A",ADM,"SP",0),NO=$P(X,"^",3)+1,^(0)=$P(X,"^",1,2)_"^"_NO_"^"_($P(X,"^",4)+1)
"RTN","FHSPED",49,0)
 L -^FHPT(FHDFN,"A",ADM,"SP",0) I $D(^FHPT(FHDFN,"A",ADM,"SP",NO)) G ADD
"RTN","FHSPED",50,0)
 S ^FHPT(FHDFN,"A",ADM,"SP",NO,0)=NO_"^"_SP_"^"_MEAL_"^"_NOW_"^"_DUZ_"^^^"_NUM,^FHPT("ASP",FHDFN,ADM,NO)="",LS=LS_NO_","
"RTN","FHSPED",51,0)
 S $P(P(LN,SP),"^",1)=NO,EVT="S^O^"_NO D ^FHORX W "  .. done" G E1
"RTN","FHSPED",52,0)
EN2 ; Standing Order Inquiry
"RTN","FHSPED",53,0)
 K DIC,X,DFN,FHDFN,FHPTNM S ADM="",FHALL=1 D ^FHOMDPA
"RTN","FHSPED",54,0)
 ;S ALL=0 D ^FHDPA G:'DFN KIL G:'FHDFN KIL S NO=0 D LIS G EN2
"RTN","FHSPED",55,0)
 S (FHSOFG,WARD)="" I $G(DFN)'="" S WARD=$G(^DPT(DFN,.1))
"RTN","FHSPED",56,0)
 G:'FHDFN KIL S NO=0 D:$G(DFN) LIS
"RTN","FHSPED",57,0)
 I $D(^FHPT("ASPO",FHDFN)) D OUT,LIS^FHSP
"RTN","FHSPED",58,0)
 G EN2
"RTN","FHSPED",59,0)
EN3 ; Cancel Standing Order
"RTN","FHSPED",60,0)
 S NO=$P($G(P(LN,SP)),"^",1) Q:'NO
"RTN","FHSPED",61,0)
 S $P(^FHPT(FHDFN,"A",ADM,"SP",NO,0),"^",6,7)=NOW_"^"_DUZ
"RTN","FHSPED",62,0)
 S X=^FHPT(FHDFN,"A",ADM,"SP",NO,0),SP=$P(X,"^",2),MEAL=$P(X,"^",3),NUM=""
"RTN","FHSPED",63,0)
 K ^FHPT("ASP",FHDFN,ADM,NO),P(LN,SP) S EVT="S^C^"_NO D ^FHORX Q
"RTN","FHSPED",64,0)
LIS ;list SO
"RTN","FHSPED",65,0)
 Q:WARD=""
"RTN","FHSPED",66,0)
 S NAM=$P(^DPT(DFN,0),"^",1) D CUR^FHORD7
"RTN","FHSPED",67,0)
 W !!,NAM,"  " W:WARD'="" "( ",WARD," )"
"RTN","FHSPED",68,0)
 W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order")
"RTN","FHSPED",69,0)
 D ALG^FHCLN W !,"   Allergies: ",$S(ALG="":"None on file",1:ALG)
"RTN","FHSPED",70,0)
 K N,P S CTR=0
"RTN","FHSPED",71,0)
 F K=0:0 S K=$O(^FHPT("ASP",FHDFN,ADM,K)) Q:K<1  S X=^FHPT(FHDFN,"A",ADM,"SP",K,0),M=$P(X,"^",3),M=$S(M="BNE":"A",1:$E(M,1)),N(M,K)=$P(X,"^",2,3)_"^"_$P(X,"^",8,9)
"RTN","FHSPED",72,0)
 S FHSOFG=1
"RTN","FHSPED",73,0)
 S LN=0,LS="" I $O(N(""))="" W !!,"No Active Inpatient Standing Orders." Q
"RTN","FHSPED",74,0)
 W !!,"Active Inpatient Standing Orders: ",!
"RTN","FHSPED",75,0)
 F M="A","B","N","E" D
"RTN","FHSPED",76,0)
 .F K=0:0 S K=$O(N(M,K)) Q:K<1  S Z=+N(M,K) I Z D
"RTN","FHSPED",77,0)
 ..S LN=LN+1,LS=LS_K_"," D L1 W ! W:NO $J(LN,2)
"RTN","FHSPED",78,0)
 ..S NUM=$P(N(M,K),"^",3)
"RTN","FHSPED",79,0)
 ..W ?5,M2,?18,$S(NUM:NUM,1:1)," ",$P(^FH(118.3,Z,0),"^",1)_$S($P(N(M,K),"^",4)'="Y":" (I)",1:"") I $G(^FH(118.3,Z,"I"))="Y" W "     (** INACTIVE **)"
"RTN","FHSPED",80,0)
 ..S P(LN,+Z)=K_"^"_$P(N(M,K),"^",1,3) Q
"RTN","FHSPED",81,0)
 .Q
"RTN","FHSPED",82,0)
 Q
"RTN","FHSPED",83,0)
L1 ; Store Standing Order By Meal
"RTN","FHSPED",84,0)
 S M1=$P(N(M,K),"^",2) I M1="BNE" S M2="All Meals" Q
"RTN","FHSPED",85,0)
 S L=$E(M1,1),M2=$S(L="B":"Break",L="N":"Noon",1:"Even")
"RTN","FHSPED",86,0)
 S L=$E(M1,2) Q:L=""  S M2=M2_","_$S(L="B":"Break",L="N":"Noon",1:"Even") Q
"RTN","FHSPED",87,0)
OUT ;ask for Recurring Meal Entry
"RTN","FHSPED",88,0)
 W @IOF
"RTN","FHSPED",89,0)
 W "Outpatient Recurring Meals..."
"RTN","FHSPED",90,0)
 K FHDM14,FHEDI,FHEDIF,FHIEN,FHMIEN,FHFLG
"RTN","FHSPED",91,0)
 S FHQ=0
"RTN","FHSPED",92,0)
 S (FHTOTML("B"),FHTOTML("N"),FHTOTML("E"),FHTOTML("A"))=0
"RTN","FHSPED",93,0)
 F FHI=DT-1:0 S FHI=$O(^FHPT("RM",FHI)) Q:FHI'>0!FHQ  F FHJ=0:0 S FHJ=$O(^FHPT("RM",FHI,FHDFN,FHJ)) Q:FHJ'>0!FHQ  I ($P($G(^FHPT(FHDFN,"OP",FHJ,0)),U,15)'="C") D
"RTN","FHSPED",94,0)
 .S FHDA15=$G(^FHPT(FHDFN,"OP",FHJ,0))
"RTN","FHSPED",95,0)
 .S FHDM14(FHI,$P(FHDA15,U,4))=FHI_U_FHJ
"RTN","FHSPED",96,0)
 .;
"RTN","FHSPED",97,0)
 .S FHMEAL=$P(FHDA15,U,4),FHLOC=$P(FHDA15,U,3),FHLOCN=$P($G(^FH(119.6,FHLOC,0)),U,1),FHMEAL=$S(FHMEAL="B":"Break",FHMEAL="N":"Noon",1:"Even"),FH11=FHMEAL_"  "_FHLOCN
"RTN","FHSPED",98,0)
 .S Y=$P(FHDA15,U,1) X ^DD("DD") S DTP=Y
"RTN","FHSPED",99,0)
 .S (FHCOFLG,FHDATL)=0
"RTN","FHSPED",100,0)
 .I $Y>(IOSL-5) K DIR S DIR(0)="E",DIR("A")="Enter RETURN to Continue or '^' to Quit Listing"  D ^DIR W:Y @IOF I 'Y S FHQ=1 Q
"RTN","FHSPED",101,0)
 .W !,DTP,?12,FH11,":"
"RTN","FHSPED",102,0)
 .S FHDATL=$L(DTP)+13+$L(FH11)
"RTN","FHSPED",103,0)
 .F FHSF=0:0 S FHSF=$O(^FHPT(FHDFN,"OP",FHJ,"SP",FHSF)) Q:FHSF'>0  D
"RTN","FHSPED",104,0)
 ..S FHDA15SF=$G(^FHPT(FHDFN,"OP",FHJ,"SP",FHSF,0))
"RTN","FHSPED",105,0)
 ..Q:$P(FHDA15SF,U,6)
"RTN","FHSPED",106,0)
 ..S FHDASFNM=$P($G(^FH(118.3,$P(FHDA15SF,U,2),0)),U,1),FHDASFQT=$P(FHDA15SF,U,8)
"RTN","FHSPED",107,0)
 ..I (FHDATL+$L(FHDASFNM)+3+$L(FHDASFQT))>79 W !,?19 S FHDATL=19
"RTN","FHSPED",108,0)
 ..I (FHDATL>19),(FHCOFLG=1) W ","
"RTN","FHSPED",109,0)
 ..S FHDATL=FHDATL+4+$L(FHDASFNM)+3+$L(FHDASFQT)
"RTN","FHSPED",110,0)
 ..W " ",FHDASFNM," = ",FHDASFQT
"RTN","FHSPED",111,0)
 I '$D(FHDM14) W !!,"NO OUTPATIENT DATA ON FILE for today's date and the future!!",! Q
"RTN","FHSPED",112,0)
 W !
"RTN","FHSPED",113,0)
 ;
"RTN","FHSPED",114,0)
 K DIC S DIC(0)="AEQM"
"RTN","FHSPED",115,0)
 S DIC("W")="S FHMEAL=$P(^(0),U,4),FHLOC=$P(^(0),U,3),FHLOCN=$P($G(^FH(119.6,FHLOC,0)),U,1),FHMEAL=$S(FHMEAL=""B"":""Break"",FHMEAL=""N"":""Noon"",1:""Even""),FH11=FHMEAL_""  ""_FHLOCN D EN^DDIOL(FH11,"""",""?3"")"
"RTN","FHSPED",116,0)
 S DIC("S")="I $P(^FHPT(FHDFN,""OP"",+Y,0),U,1)>(DT-1),($P(^(0),U,15)'=""C"")"
"RTN","FHSPED",117,0)
 S DIC="^FHPT(FHDFN,""OP"","
"RTN","FHSPED",118,0)
 S DIC("?")="Select a Date, '^' to exit"
"RTN","FHSPED",119,0)
 S DIC("A")="Select the Outpatient Date :" D ^DIC K DIC Q:(Y'>0)!$D(DTOUT)
"RTN","FHSPED",120,0)
 S ADM=+Y
"RTN","FHSPED",121,0)
 Q
"RTN","FHSPED",122,0)
CHK ;ENTER DATES.
"RTN","FHSPED",123,0)
 K FHDT1,FHDT2
"RTN","FHSPED",124,0)
 S FHFLG=0
"RTN","FHSPED",125,0)
F1 ;START DATE
"RTN","FHSPED",126,0)
 K DIC S DIC(0)="AEQM"
"RTN","FHSPED",127,0)
 W !
"RTN","FHSPED",128,0)
 S DIC("W")="S FHML=$P(^(0),U,4),FHLOC=$P(^(0),U,3),FHLOCN=$P($G(^FH(119.6,FHLOC,0)),U,1),FHMEAL=$S(FHML=""B"":""Break"",FHML=""N"":""Noon"",1:""Even""),FH11=FHMEAL_""  ""_FHLOCN D EN^DDIOL(FH11,"""",""?3"")"
"RTN","FHSPED",129,0)
 S DIC("S")="S FHML=$P(^(0),U,4),FHDT1=$P(^(0),U,1) I $P(^(0),U,1)>(DT-1),($P(^(0),U,15)'=""C""),FHML=FHDTML"
"RTN","FHSPED",130,0)
 S DIC="^FHPT(FHDFN,""OP"","
"RTN","FHSPED",131,0)
 S DIC("?")="Enter a Date, '^' to exit"
"RTN","FHSPED",132,0)
 S DIC("A")="Enter a Start Date :" D ^DIC K DIC Q:(Y'>0)!$D(DTOUT)
"RTN","FHSPED",133,0)
 S FHDT1=$P(^FHPT(FHDFN,"OP",+Y,0),U,1)
"RTN","FHSPED",134,0)
F2 ;END DATE
"RTN","FHSPED",135,0)
 K DIC S DIC(0)="AEQM"
"RTN","FHSPED",136,0)
 W !
"RTN","FHSPED",137,0)
 S DIC("W")="S FHML=$P(^(0),U,4),FHLOC=$P(^(0),U,3),FHLOCN=$P($G(^FH(119.6,FHLOC,0)),U,1),FHMEAL=$S(FHML=""B"":""Break"",FHML=""N"":""Noon"",1:""Even""),FH11=FHMEAL_""  ""_FHLOCN D EN^DDIOL(FH11,"""",""?3"")"
"RTN","FHSPED",138,0)
 S DIC("S")="S FHML=$P(^(0),U,4),FHDT2=$P(^(0),U,1) I $P(^(0),U,1)>(FHDT1-1),($P(^(0),U,15)'=""C""),FHML=FHDTML"
"RTN","FHSPED",139,0)
 S DIC="^FHPT(FHDFN,""OP"","
"RTN","FHSPED",140,0)
 S DIC("?")="Enter a Date, '^' to exit"
"RTN","FHSPED",141,0)
 S DIC("A")="Enter an End Date :" D ^DIC K DIC Q:(Y'>0)!$D(DTOUT)
"RTN","FHSPED",142,0)
 S FHDT2=$P(^FHPT(FHDFN,"OP",+Y,0),U,1)
"RTN","FHSPED",143,0)
 I FHDT2<FHDT1 W !!,"***End Date must be on or after Start Date!!!" G F2
"RTN","FHSPED",144,0)
 S FHFLG=1
"RTN","FHSPED",145,0)
 Q
"RTN","FHSPED",146,0)
CPRSO ;check previous SO
"RTN","FHSPED",147,0)
 K FHSOO,FHCK
"RTN","FHSPED",148,0)
 S (FHDAT,FHSO)=""
"RTN","FHSPED",149,0)
CPRS1 I FHSO="" S FHSO=$O(^FHPT("ASPO",FHDFN,""),-1)
"RTN","FHSPED",150,0)
 E  S FHSO=$O(^FHPT("ASPO",FHDFN,FHSO),-1)
"RTN","FHSPED",151,0)
 Q:'$G(FHSO)
"RTN","FHSPED",152,0)
 S FHDAT=$G(^FHPT(FHDFN,"OP",FHSO,0)),FHPRML=$P(FHDAT,U,4),FHPRCN=$P(FHDAT,U,15)
"RTN","FHSPED",153,0)
 I (FHPRML'=FHMEAL)!(FHPRCN="C") G CPRS1
"RTN","FHSPED",154,0)
 S FHCK(FHPRML)=""
"RTN","FHSPED",155,0)
 F FHI=0:0 S FHI=$O(^FHPT(FHDFN,"OP",FHSO,"SP",FHI)) Q:FHI'>0  D
"RTN","FHSPED",156,0)
 .S FHSODAT=$G(^FHPT(FHDFN,"OP",FHSO,"SP",FHI,0)),FHSOI=$P(FHSODAT,U,2),FHSOCN=$P(FHSODAT,U,6),FHSOQ=$P(FHSODAT,U,8)
"RTN","FHSPED",157,0)
 .Q:$P(FHSODAT,U,9)="Y"
"RTN","FHSPED",158,0)
 .I '$G(FHSOI)!$G(FHSOCN) Q
"RTN","FHSPED",159,0)
 .S FHSOO(FHI,FHSOI)=FHSOQ,P(1,FHSOI)=""
"RTN","FHSPED",160,0)
 Q
"RTN","FHSPED",161,0)
PPRSO ;PROCESS previous SO
"RTN","FHSPED",162,0)
 Q:'$D(FHSOO)
"RTN","FHSPED",163,0)
 S (LS,LN)=1
"RTN","FHSPED",164,0)
 D NOW^%DTC S NOW=%
"RTN","FHSPED",165,0)
 F FHI=0:0 S FHI=$O(FHSOO(FHI)) Q:FHI'>0  F FHJ=0:0 S FHJ=$O(FHSOO(FHI,FHJ)) Q:FHJ'>0  S NUM=FHSOO(FHI,FHJ),SP=FHJ D AD1^FHSP
"RTN","FHSPED",166,0)
 Q
"RTN","FHSPED",167,0)
SOEVNT S FHDTC=0
"RTN","FHSPED",168,0)
 S FHLOCN="" I $D(FHLOC),$G(FHLOC),$D(^FH(119.6,FHLOC,0)) S FHLOCN=$P(^(0),U,1)
"RTN","FHSPED",169,0)
 S FHDTC=FHDTC+1,DTP=FHOSTDT D DTP^FH S:FHDTC=1 FHDTP=DTP
"RTN","FHSPED",170,0)
 S DTP=$P(ENDT,".",1)  D DTP^FH
"RTN","FHSPED",171,0)
 I DTP'=FHDTP S FHDTP=FHDTP_" to "_DTP
"RTN","FHSPED",172,0)
 S FHALML=FHMEAL
"RTN","FHSPED",173,0)
 F FHI=0:0 S FHI=$O(FHSOO(FHI)) Q:FHI'>0  F FHJ=0:0 S FHJ=$O(FHSOO(FHI,FHJ)) Q:FHJ'>0  S NUM=FHSOO(FHI,FHJ),SP=FHJ D EVNT^FHSP1
"RTN","FHSPED",174,0)
 Q
"RTN","FHSPED",175,0)
KIL G KILL^XUSCLEAN
"RTN","FHWADM")
0^56^B26287048
"RTN","FHWADM",1,0)
FHWADM ; HISC/REL - Set up admission ;12/4/00  10:35
"RTN","FHWADM",2,0)
 ;;5.5;DIETETICS;**5,8**;Jan 28, 2005;Build 28
"RTN","FHWADM",3,0)
 ; Changes necessary for new file #115 design:
"RTN","FHWADM",4,0)
 ; The .01 (1 piece of 0 node) for inpatients is now "P"_DFN (ie P7623)
"RTN","FHWADM",5,0)
 ; Therefore this file is no longer DINUMed to file #2.
"RTN","FHWADM",6,0)
 N FHWF S FHWF=$S($D(^ORD(101)):1,1:0)
"RTN","FHWADM",7,0)
 S FHZ115="P"_DFN D ADD^FHOMDPA
"RTN","FHWADM",8,0)
 I '$D(^FHPT(FHDFN,"A",0)) S ^FHPT(FHDFN,"A",0)="^115.01^^"
"RTN","FHWADM",9,0)
 D UPALFP  ;update food pref's based on allergy data
"RTN","FHWADM",10,0)
 D OPM  ;cancel any existing outpatient meals
"RTN","FHWADM",11,0)
 D NOW^%DTC S (FHNOW,FHX3,X)=$S($D(^DGPM(ADM,0)):$P(^(0),"^",1),1:%)
"RTN","FHWADM",12,0)
 I $D(^FHPT(FHDFN,"A",ADM)) S $P(^(ADM,0),"^",1)=X G:$G(^DPT(DFN,.105))'=ADM KIL G UPD
"RTN","FHWADM",13,0)
 S $P(^FHPT(FHDFN,"A",0),"^",3)=ADM,$P(^(0),"^",4)=$P(^(0),"^",4)+1
"RTN","FHWADM",14,0)
 S ^FHPT(FHDFN,"A",ADM,0)=X_"^^^^^^^^"
"RTN","FHWADM",15,0)
 S FHX1=$G(^DPT(DFN,.108)),FHX2=""
"RTN","FHWADM",16,0)
 I FHX1 S FHX1=$O(^FH(119.6,"AR",FHX1,0))
"RTN","FHWADM",17,0)
 E  S FHX1=$G(^DPT(DFN,.1)) I FHX1'="" S FHX1=$O(^DIC(42,"B",FHX1,0)) S:FHX1 FHX1=$O(^FH(119.6,"AW",FHX1,0))
"RTN","FHWADM",18,0)
 S FHX1=$G(^FH(119.6,+FHX1,0))
"RTN","FHWADM",19,0)
 S FHX2=$P(FHX1,"^",16),FHX1=$P(FHX1,"^",15) I 'FHX1,FHX2'="Y" G UPD
"RTN","FHWADM",20,0)
 S X=$S(FHX3>%:FHX3,1:%)
"RTN","FHWADM",21,0)
 S ^FHPT(FHDFN,"A",ADM,"AC",X,0)=X_"^1",^FHPT(FHDFN,"A",ADM,"AC",0)="^115.14^"_X_"^1",^FHPT(FHDFN,"A",ADM,"DI",0)="^115.02A^1^1"
"RTN","FHWADM",22,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",2)=1
"RTN","FHWADM",23,0)
 I 'FHX1 S ^FHPT(FHDFN,"A",ADM,"DI",1,0)="1^^^^^^X^^"_X_"^^"_DUZ_"^"_% S EVT="D^O^1" D ^FHORX G UPD
"RTN","FHWADM",24,0)
 S FHX2=$P($G(^FH(111,FHX1,0)),"^",5)
"RTN","FHWADM",25,0)
 S ^FHPT(FHDFN,"A",ADM,"DI",1,0)="1^"_FHX1_"^^^^^^T^"_X_"^^"_DUZ_"^"_%_"^"_FHX2
"RTN","FHWADM",26,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",5)="T" S EVT="D^O^1" D ^FHORX
"RTN","FHWADM",27,0)
 I 'FHWF S FHOR=FHX1_"^^^^" D ADD K FHOR G UPD
"RTN","FHWADM",28,0)
 S FHNEW="D;"_ADM_";"_1_";"_X_";;;;T;;"_FHX1_";;;;",D1=X,D2="" D NOW^%DTC S NOW=%,FHPV=DUZ,FHOR=FHX1_"^^^^" D DO^FHWOR2
"RTN","FHWADM",29,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",14)="" D WRD D MSG^XQOR("FH EVSEND OR",.MSG) K D1,D2,FHPV,FHNEW,MSG,NOW S $P(^FHPT(FHDFN,"A",ADM,"DI",1,0),"^",15)=6 D ADD K FHOR G KIL
"RTN","FHWADM",30,0)
UPD S $P(^FHPT(FHDFN,"A",ADM,0),"^",14)="" D WRD G KIL
"RTN","FHWADM",31,0)
WRD ; Update Room/Bed & Ward for current admission
"RTN","FHWADM",32,0)
 N FHWRD,FHRMB,WARD D DID^FHDPA Q:WARD=""  S ADM=$G(^DPT("CN",WARD,DFN)) Q:'ADM
"RTN","FHWADM",33,0)
 I '$D(^FHPT(FHDFN,"A",ADM,0)) Q
"RTN","FHWADM",34,0)
 S WARD=$P(^FHPT(FHDFN,"A",ADM,0),"^",8),EVT="L^"_$S(WARD:"T",1:"A")_"^^"_WARD_"~"_$P(^(0),"^",9) I WARD'=FHWRD G NEW
"RTN","FHWADM",35,0)
 I $P(^FHPT(FHDFN,"A",ADM,0),"^",9)'=FHRMB S $P(^(0),"^",9)=FHRMB S EVT=EVT_"~"_FHWRD_"~"_FHRMB D ^FHORX
"RTN","FHWADM",36,0)
 Q
"RTN","FHWADM",37,0)
NEW ; New Ward
"RTN","FHWADM",38,0)
 S $P(^FHPT(FHDFN,"A",ADM,0),"^",8,9)=FHWRD_"^"_FHRMB
"RTN","FHWADM",39,0)
 K:WARD ^FHPT("AW",WARD,FHDFN) I FHWRD S ^FHPT("AW",FHWRD,FHDFN)=ADM S EVT=EVT_"~"_FHWRD_"~"_FHRMB D ^FHORX
"RTN","FHWADM",40,0)
 ; Update Type of Service
"RTN","FHWADM",41,0)
 S FHX3=$P($G(^FH(119.6,+FHWRD,0)),"^",10) S:FHX3="" FHX3="TCD" I FHX3[$P(^FHPT(FHDFN,"A",ADM,0),"^",5) Q
"RTN","FHWADM",42,0)
 S FHX3=$S($L(FHX3)=1:FHX3,FHX3["D":"D",1:"C"),$P(^FHPT(FHDFN,"A",ADM,0),"^",5)=FHX3
"RTN","FHWADM",43,0)
 S FHX2=$P(^FHPT(FHDFN,"A",ADM,0),"^",2) I FHX2,$P($G(^FHPT(FHDFN,"A",ADM,"DI",+FHX2,0)),"^",8)'="" S $P(^(0),"^",8)=FHX3
"RTN","FHWADM",44,0)
 Q
"RTN","FHWADM",45,0)
ADD ; Add diet associated Diet Restriction
"RTN","FHWADM",46,0)
 D NOW^%DTC S NOW=%
"RTN","FHWADM",47,0)
 S DPAT=$O(^FH(111.1,"AB",FHOR,0))
"RTN","FHWADM",48,0)
 D UPD^FHMTK7
"RTN","FHWADM",49,0)
 K COM,DPAT,EVT,FP,L,LN,LP,LS,M,M1,M2,MEAL,N,NM,NO,NUM,NX,OPAT,P,PP,PNN,PNO,R1,SF,SP,X3,^TMP($J),Z
"RTN","FHWADM",50,0)
 Q
"RTN","FHWADM",51,0)
UPALFP ;Update Food Preferences for all Patient's based on Allergies
"RTN","FHWADM",52,0)
 I FHDFN="" Q
"RTN","FHWADM",53,0)
 K FHMISS D ALG^FHCLN I '$O(^TMP($J,"FHGMRAL","")) Q
"RTN","FHWADM",54,0)
 F FHGMRN=0:0 S FHGMRN=$O(^TMP($J,"FHGMRAL",FHGMRN)) Q:FHGMRN=""  D UPDFP^FHWGMR
"RTN","FHWADM",55,0)
 K ^TMP($J,"FHGMRAL"),^TMP($J,"FHMISS"),FHGMRN,FHMSAL,FHMSFP,FHMSPT
"RTN","FHWADM",56,0)
 Q
"RTN","FHWADM",57,0)
OPM ; Delete any future outpatient meals orders upon patient admission
"RTN","FHWADM",58,0)
 I '$D(^FHPT(FHDFN,"OP")),'$D(^FHPT(FHDFN,"SM")),'$D(^FHPT(FHDFN,"GM")) Q
"RTN","FHWADM",59,0)
 S X1=DT,X2=-1 D C^%DTC S FHDT=X_.999
"RTN","FHWADM",60,0)
 F FHRMDT=FHDT:0 S FHRMDT=$O(^FHPT(FHDFN,"OP","B",FHRMDT)) Q:FHRMDT'>0  F FHRNUM=0:0 S FHRNUM=$O(^FHPT(FHDFN,"OP","B",FHRMDT,FHRNUM)) Q:FHRNUM'>0  D CANRM
"RTN","FHWADM",61,0)
 F FHSM=FHDT:0 S FHSM=$O(^FHPT(FHDFN,"SM",FHSM)) Q:FHSM'>0  D CANSM
"RTN","FHWADM",62,0)
 F FHGM=FHDT:0 S FHGM=$O(^FHPT(FHDFN,"GM",FHGM)) Q:FHGM'>0  D CANGM
"RTN","FHWADM",63,0)
 Q
"RTN","FHWADM",64,0)
CANRM ;
"RTN","FHWADM",65,0)
 D CANRM^FHOMRC1
"RTN","FHWADM",66,0)
 S FHORN=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,12)
"RTN","FHWADM",67,0)
 S FHMPNUM=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,6)
"RTN","FHWADM",68,0)
 S FHDT2=$P($G(^FHPT(FHDFN,"OP",FHRNUM,0)),U,1)
"RTN","FHWADM",69,0)
 S FILL="R;"_FHMPNUM_";"_FHDT2_";"_FHDT2_";;"
"RTN","FHWADM",70,0)
 D CAN
"RTN","FHWADM",71,0)
 I $D(^FHPT(FHDFN,"OP",FHRNUM,1)) D CNAO100,CANAO^FHOMRC1
"RTN","FHWADM",72,0)
 I $D(^FHPT(FHDFN,"OP",FHRNUM,2)) D CNEL100,CANEL^FHOMRC1
"RTN","FHWADM",73,0)
 I $D(^FHPT(FHDFN,"OP",FHRNUM,3)) D CNTF100,CANTF^FHOMRC1
"RTN","FHWADM",74,0)
 Q
"RTN","FHWADM",75,0)
CNAO100 ;Backdoor message to update file #100 with AO cancel order
"RTN","FHWADM",76,0)
 S FHORN=$P($G(^FHPT(FHDFN,"OP",FHRNUM,1)),U,4),FILL="A;"_FHRNUM D CAN Q
"RTN","FHWADM",77,0)
CNEL100 ;Backdoor message to update file #100 with EL cancel order
"RTN","FHWADM",78,0)
 S FHORN=$P($G(^FHPT(FHDFN,"OP",FHRNUM,2)),U,5),FILL="E;"_FHRNUM D CAN Q
"RTN","FHWADM",79,0)
CNTF100 ;Backdoor message to update file #100 with TF cancel order
"RTN","FHWADM",80,0)
 S FHORN=$P($G(^FHPT(FHDFN,"OP",FHRNUM,3)),U,4),FILL="T;"_FHRNUM D CAN Q
"RTN","FHWADM",81,0)
 ;
"RTN","FHWADM",82,0)
CANSM ;
"RTN","FHWADM",83,0)
 S FHSTAT="C",(DA,FHDA)=FHSM,DA(1)=FHDFN
"RTN","FHWADM",84,0)
 I $G(FHORN)="" S FHORN=$P($G(^FHPT(FHDFN,"SM",FHDA,0)),U,12)
"RTN","FHWADM",85,0)
 I '$D(^FHPT(DA(1),"SM",DA,0)) Q
"RTN","FHWADM",86,0)
 S DIE="^FHPT("_DA(1)_",""SM"","
"RTN","FHWADM",87,0)
 S DR="1////^S X=FHSTAT;14////^S X=FHORN;11.5////^S X=FHSTAT" D ^DIE
"RTN","FHWADM",88,0)
 S FHZN=$G(^FHPT(FHDFN,"SM",FHDA,0))
"RTN","FHWADM",89,0)
 S FHACT="C",FHOPTY="S",FHOPDT=FHDA D SETSM^FHOMRO2
"RTN","FHWADM",90,0)
CNSM100 ;Backdoor message to update file #100 with SM cancel order
"RTN","FHWADM",91,0)
 S FHORN=$P($G(^FHPT(FHDFN,"SM",FHDA,0)),U,12),FILL="S;"_FHDA D CAN
"RTN","FHWADM",92,0)
 ;if an SM E/L Tray exists cancel that too:
"RTN","FHWADM",93,0)
CNSMEL S FHORN=$P($G(^FHPT(FHDFN,"SM",FHDA,1)),U,4) I FHORN="" Q
"RTN","FHWADM",94,0)
 S FILL="G;"_FHDA D CAN Q
"RTN","FHWADM",95,0)
 ;
"RTN","FHWADM",96,0)
CANGM ;
"RTN","FHWADM",97,0)
 S FHSTAT="C",(DA,FHDA)=FHGM,DA(1)=FHDFN
"RTN","FHWADM",98,0)
 S DIE="^FHPT("_DA(1)_",""GM"","
"RTN","FHWADM",99,0)
 S DR="8////^S X=FHSTAT;9////^S X=DUZ" D ^DIE
"RTN","FHWADM",100,0)
 S FHZN=$G(^FHPT(FHDFN,"GM",FHDA,0))
"RTN","FHWADM",101,0)
 S FHACT="C",FHOPTY="G",FHOPDT=FHDA D SETGM^FHOMRO2 ;set event
"RTN","FHWADM",102,0)
 Q
"RTN","FHWADM",103,0)
CAN ;
"RTN","FHWADM",104,0)
 Q:'$$PATCH^XPDUTL("OR*3.0*215")  ;must have CPRSv26 for O.M. backdoor
"RTN","FHWADM",105,0)
 D MSHCA^FHOMUTL,EVSEND^FHWOR
"RTN","FHWADM",106,0)
 Q
"RTN","FHWADM",107,0)
KIL ;
"RTN","FHWADM",108,0)
 K %,%H,%I,DIC,DIE,DIR,FHDT,FHDT2,FHRMDT,FHRNUM,FHNOW,FHX1,FHX2,FHX3
"RTN","FHWADM",109,0)
 K FHRMB,FHWRD,X Q
"RTN","FHWGMR")
0^26^B8808627
"RTN","FHWGMR",1,0)
FHWGMR ; HISC/NCA - Signed Reaction Event Filer ;2/16/96  11:37
"RTN","FHWGMR",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHWGMR",3,0)
EN1 ; File Entered Signed Reaction
"RTN","FHWGMR",4,0)
 Q:+$$VERSION^XPDUTL("GMRA")'=4
"RTN","FHWGMR",5,0)
 S FLG=1 D CHK G:'FLG KIL
"RTN","FHWGMR",6,0)
 S EVT="M^O^^"_"Allergy - "_ALG D FIL
"RTN","FHWGMR",7,0)
 I FHGMRN'="" D UPDFP
"RTN","FHWGMR",8,0)
 G KIL
"RTN","FHWGMR",9,0)
CAN ; File Cancelled/Entered in Error Allergy
"RTN","FHWGMR",10,0)
 S FLG=1 D CHK G:'FLG KIL
"RTN","FHWGMR",11,0)
 S EVT="M^O^^"_"Allergy - "_ALG_" Cancelled" D FIL
"RTN","FHWGMR",12,0)
 I FHGMRN'="" D CANFP
"RTN","FHWGMR",13,0)
 G KIL
"RTN","FHWGMR",14,0)
FIL ; File Event
"RTN","FHWGMR",15,0)
 D ^FHORX
"RTN","FHWGMR",16,0)
 Q
"RTN","FHWGMR",17,0)
KIL K %,%H,%I,ADM,ALG,COM,DFN,FHSTR,FHTYP,FHWRD,FLG,FHALGN,FHGMRN,FHFPN,FHFPIEN,X Q
"RTN","FHWGMR",18,0)
CHK ; Check Validity of Data Passed
"RTN","FHWGMR",19,0)
 I 'GMRAPA!($G(GMRAPA(0))="") G ERR
"RTN","FHWGMR",20,0)
 S FHSTR=$G(GMRAPA(0)),DFN=+FHSTR G:'DFN ERR
"RTN","FHWGMR",21,0)
 S FHALGN=$P(FHSTR,U,3)
"RTN","FHWGMR",22,0)
 S FHGMRN="" I $P(FHALGN,";",2)="GMRD(120.82," S FHGMRN=$P(FHALGN,";",1)
"RTN","FHWGMR",23,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" G ERR
"RTN","FHWGMR",24,0)
 S ALG=$P(FHSTR,"^",2) G:ALG="" ERR
"RTN","FHWGMR",25,0)
 G:'$D(^FHPT(FHDFN)) ERR S FHWRD=$G(^DPT(DFN,.1)) ;G:FHWRD="" ERR
"RTN","FHWGMR",26,0)
 S ADM="" I FHWRD'="" S ADM=$G(^DPT("CN",FHWRD,DFN)) ;G:ADM<1 ERR
"RTN","FHWGMR",27,0)
 G:'$P(FHSTR,"^",12) ERR
"RTN","FHWGMR",28,0)
 S FHTYP=$P(FHSTR,"^",20) G:FHTYP'["F" ERR
"RTN","FHWGMR",29,0)
 Q
"RTN","FHWGMR",30,0)
UPDFP ;Automatically add FP's corresponding to the Allergy
"RTN","FHWGMR",31,0)
 D ^FHSELA2
"RTN","FHWGMR",32,0)
UPDFP1 I $O(^FH(115.2,"C",FHGMRN,""))="" D MISSFP Q  ;No Corr FP for FHGMRN
"RTN","FHWGMR",33,0)
 F FHFPN=0:0 S FHFPN=$O(^FH(115.2,"C",FHGMRN,FHFPN)) Q:FHFPN'>0  D ADD
"RTN","FHWGMR",34,0)
 Q
"RTN","FHWGMR",35,0)
ADD ;Add the FP(s) to the patient record
"RTN","FHWGMR",36,0)
 I $O(^FHPT(FHDFN,"P","B",FHFPN,"")) Q  ;pt already has the FP
"RTN","FHWGMR",37,0)
 I $G(^FH(115.2,FHFPN,"I"))="Y" Q  ;don't assign INACTIVE FP's
"RTN","FHWGMR",38,0)
 S Y=FHFPN K DIC,DO S DA(1)=FHDFN,DIC="^FHPT("_DA(1)_",""P"","
"RTN","FHWGMR",39,0)
 S DIC(0)="L",DIC("P")=$P(^DD(115,10,0),U,2),X=+Y
"RTN","FHWGMR",40,0)
 D FILE^DICN I Y=-1 Q
"RTN","FHWGMR",41,0)
 K DIE S DA=+Y,DA(1)=FHDFN,DIE="^FHPT("_DA(1)_",""P"","
"RTN","FHWGMR",42,0)
 S DR="1////^S X=""BNE""" D ^DIE
"RTN","FHWGMR",43,0)
 S COM="Add "_$P($G(^FH(115.2,FHFPN,0)),U,1)_" (BNE) (D)"
"RTN","FHWGMR",44,0)
 S EVT="P^O^^"_COM D ^FHORX
"RTN","FHWGMR",45,0)
 Q
"RTN","FHWGMR",46,0)
MISSFP ;
"RTN","FHWGMR",47,0)
 I '$D(^GMRD(120.82,FHGMRN,0)) Q  ;bad pointer/entry
"RTN","FHWGMR",48,0)
 S FHANAME=$P($G(^GMRD(120.82,FHGMRN,0)),U,1)
"RTN","FHWGMR",49,0)
 S FHPTNM=$P($G(^DPT(DFN,0)),U,1)
"RTN","FHWGMR",50,0)
 S FHRR="" F  S FHRR=$O(^TMP($J,"FHALG",FHRR)) Q:FHRR=""  S FHRRNM=$P(^TMP($J,"FHALG",FHRR),";",2,99) D
"RTN","FHWGMR",51,0)
 .S FHZ=0 F  S FHZ=FHZ+1,FHANMZZ=$P(FHRRNM,";",FHZ) Q:FHANMZZ=""  D
"RTN","FHWGMR",52,0)
 ..I FHANMZZ=FHANAME S ^TMP($J,"FHMISS",FHRR,FHPTNM)=FHANAME
"RTN","FHWGMR",53,0)
 Q
"RTN","FHWGMR",54,0)
CANFP ;Automatically cancel FP's corresponding to Allergy Entered in Error
"RTN","FHWGMR",55,0)
 I $O(^FH(115.2,"C",FHGMRN,""))="" Q  ;No Corr FP for this GMRA Allergy
"RTN","FHWGMR",56,0)
 F FHFPN=0:0 S FHFPN=$O(^FH(115.2,"C",FHGMRN,FHFPN)) Q:FHFPN'>0  D REM
"RTN","FHWGMR",57,0)
 Q
"RTN","FHWGMR",58,0)
REM ;Remove the FP(s) from the patient record
"RTN","FHWGMR",59,0)
 I '$O(^FHPT(FHDFN,"P","B",FHFPN,"")) Q  ;pt does not have the FP
"RTN","FHWGMR",60,0)
 S FHFPIEN=$O(^FHPT(FHDFN,"P","B",FHFPN,""))
"RTN","FHWGMR",61,0)
 S DA(1)=FHDFN,DA=FHFPIEN,DIK="^FHPT("_DA(1)_",""P""," D ^DIK
"RTN","FHWGMR",62,0)
 S COM="Del "_$P($G(^FH(115.2,FHFPN,0)),U,1)_" (BNE) (D)"
"RTN","FHWGMR",63,0)
 S EVT="P^O^^"_COM D ^FHORX
"RTN","FHWGMR",64,0)
 Q
"RTN","FHWGMR",65,0)
ERR S FLG=0 Q
"RTN","FHWHEA")
0^29^B27347368
"RTN","FHWHEA",1,0)
FHWHEA ; HISC/REL - Health Summary ;7/16/96  15:47
"RTN","FHWHEA",2,0)
 ;;5.5;DIETETICS;**1,8**;Jan 28, 2005;Build 28
"RTN","FHWHEA",3,0)
 ;patch #8 - adding Nutrition Assessment (follow-up date and comment) in the "NA" node.
"RTN","FHWHEA",4,0)
 S FH9=9999999,FHS1=$S(GMTS2<1:1,1:FH9-GMTS2),FHS2=$S(GMTS1<1:FH9,1:FH9-GMTS1)
"RTN","FHWHEA",5,0)
 K ^UTILITY($J) S (FHN1,FHN2,FHN3,FHN4)=0
"RTN","FHWHEA",6,0)
 ; Nutrition Status in inverse order
"RTN","FHWHEA",7,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHWHEA",8,0)
 S FHL=0 F FHX1=GMTS1:0 S FHX1=$O(^FHPT(FHDFN,"S",FHX1)) Q:FHX1'>0!(FHX1>GMTS2)  I $D(^(FHX1,0)) S FHX2=^(0) D NS S ^UTILITY($J,"NS",FHX1,0)=$P(FHX2,"^",1)_"^"_FHY,FHL=FHL+1 I GMTSNDM=FHL Q
"RTN","FHWHEA",9,0)
 ; Dietetic Encounters
"RTN","FHWHEA",10,0)
 F FHX1=FHS1:0 S FHX1=$O(^FHEN("AP",DFN,FHX1)) Q:FHX1=""!(FHX1>FHS2)  F FHI=0:0 S FHI=$O(^FHEN("AP",DFN,FHX1,FHI)) Q:FHI<1  D EN
"RTN","FHWHEA",11,0)
 F FHADM=0:0 S FHADM=$O(^FHPT(FHDFN,"A",FHADM)) Q:FHADM'>0  D CHK
"RTN","FHWHEA",12,0)
 ;add nutrition assessment (Follow-up date & comments.
"RTN","FHWHEA",13,0)
 ; where ^utility($j,"NA",date,1)=follow-up date
"RTN","FHWHEA",14,0)
 ;                        date,2)=pt's allergy
"RTN","FHWHEA",15,0)
 ;                        date,3)=1nd line comment
"RTN","FHWHEA",16,0)
 ;                        date,4)=2rd line comment and so on... 
"RTN","FHWHEA",17,0)
 F FHI=0:0 S FHI=$O(^FHPT(FHDFN,"N",FHI)) Q:FHI'>0  I $D(^(FHI,"DI")) D NAD
"RTN","FHWHEA",18,0)
 I GMTSNDM'>0 G KIL
"RTN","FHWHEA",19,0)
 I FHN1>GMTSNDM S FHL=0 F FHI=0:0 S FHI=$O(^UTILITY($J,"DI",FHI)) Q:FHI=""  S FHL=FHL+1 I FHL>GMTSNDM K ^UTILITY($J,"DI",FHI)
"RTN","FHWHEA",20,0)
 I FHN2>GMTSNDM S FHL=0 F FHI=0:0 S FHI=$O(^UTILITY($J,"TF",FHI)) Q:FHI=""  S FHL=FHL+1 I FHL>GMTSNDM K ^UTILITY($J,"TF",FHI)
"RTN","FHWHEA",21,0)
 I FHN3>GMTSNDM S FHL=0 F FHI=0:0 S FHI=$O(^UTILITY($J,"SF",FHI)) Q:FHI=""  S FHL=FHL+1 I FHL>GMTSNDM K ^UTILITY($J,"SF",FHI)
"RTN","FHWHEA",22,0)
 I FHN4>GMTSNDM S FHL=0 F FHI=0:0 S FHI=$O(^UTILITY($J,"EN",FHI)) Q:FHI=""  S FHL=FHL+1 I FHL>GMTSNDM K ^UTILITY($J,"EN",FHI)
"RTN","FHWHEA",23,0)
 G KIL
"RTN","FHWHEA",24,0)
CHK ;
"RTN","FHWHEA",25,0)
 S FHY=$P($G(^DGPM(FHADM,0)),"^",17) S:FHY>0 FHY=$P($G(^DGPM(+FHY,0)),"^",1)
"RTN","FHWHEA",26,0)
 I FHY,FHY<FHS1 Q
"RTN","FHWHEA",27,0)
 ; Diet Order in inverse order
"RTN","FHWHEA",28,0)
 S FHP="" F FHI=FHS1:0 S FHI=$O(^FHPT(FHDFN,"A",FHADM,"AC",FHI)) Q:FHI=""!(FHI>FHS2)  I $D(^(FHI,0)) S FHX=^(0) D DI S ^UTILITY($J,"DI",(FH9-FHI),0)=FHX,FHN1=FHN1+1 S:FHP $P(^UTILITY($J,"DI",FHP,0),"^",2)=FHI S FHP=FH9-FHI
"RTN","FHWHEA",29,0)
 ; Tubefeeding in inverse order
"RTN","FHWHEA",30,0)
 F FHI=0:0 S FHI=$O(^FHPT(FHDFN,"A",FHADM,"TF",FHI)) Q:FHI=""  I $D(^(FHI,0)) S FHX=^(0) D TF I FHX S ^UTILITY($J,"TF",(FH9-FHX1),0)=FHX,FHN2=FHN2+1
"RTN","FHWHEA",31,0)
 ; Supplemental feeding in inverse order
"RTN","FHWHEA",32,0)
 F FHI=0:0 S FHI=$O(^FHPT(FHDFN,"A",FHADM,"SF",FHI)) Q:FHI=""  I $D(^(FHI,0)) S FHX=^(0) D SF I FHX S ^UTILITY($J,"SF",FH9-FHX1,0)=FHX,FHN3=FHN3+1
"RTN","FHWHEA",33,0)
 Q
"RTN","FHWHEA",34,0)
DI ; Decode Diet Order
"RTN","FHWHEA",35,0)
 S FHX=^FHPT(FHDFN,"A",FHADM,"DI",$P(FHX,"^",2),0),FHX2=$G(^(1)),FHX3=""
"RTN","FHWHEA",36,0)
 S FHOR=$P(FHX,"^",2,6),FHLD=$P(FHX,"^",7),FHY=""
"RTN","FHWHEA",37,0)
 I FHLD'="" S FHDU=";"_$P(^DD(115.02,6,0),"^",3),%=$F(FHDU,";"_FHLD_":") S:%>0 FHY=$P($E(FHDU,%,999),";",1) K % G D1
"RTN","FHWHEA",38,0)
 S FHY="" F FHK1=1:1:5 S FHL=$P(FHOR,"^",FHK1) I FHL S:FHY'="" FHY=FHY_", " S FHY=FHY_$P($G(^FH(111,FHL,0)),"^",7)
"RTN","FHWHEA",39,0)
 S FHX3=$P(FHX,"^",8) S:FHX3'="" FHX3=$S(FHX3="T":"Tray",FHX3="D":"Dining Room",1:"Cafeteria")
"RTN","FHWHEA",40,0)
D1 S FHX=FHI_"^"_$P(FHX,"^",10)_"^"_FHY_"^"_FHX2_"^"_FHX3 Q
"RTN","FHWHEA",41,0)
SF ; Decode Supp. Fdg.
"RTN","FHWHEA",42,0)
 S FHX1=$P(FHX,"^",2) I FHX1<FHS1!(FHX1>FHS2) S FHX="" Q
"RTN","FHWHEA",43,0)
 S FHL=4 F FHK1=1:1:3 S FHN(FHK1)="" F FHK2=1:1:4 S FHX2=$P(FHX,"^",FHL+1),FHX3=$P(FHX,"^",FHL+2),FHL=FHL+2 I FHX2 S:FHN(FHK1)'="" FHN(FHK1)=FHN(FHK1)_"; " S FHN(FHK1)=FHN(FHK1)_$S(FHX3:FHX3,1:1)_" "_$P($G(^FH(118,FHX2,0)),"^",1)
"RTN","FHWHEA",44,0)
 I $L(FHX1_"^"_$P(FHX,"^",32)_"^"_FHN(1)_"^"_FHN(2)_"^"_FHN(3))>240 D BRK
"RTN","FHWHEA",45,0)
 S FHX=(FHX1\1)_"^"_$P(FHX,"^",32)_"^"_FHN(1)_"^"_FHN(2)_"^"_FHN(3)
"RTN","FHWHEA",46,0)
 Q
"RTN","FHWHEA",47,0)
NS ; Decode Nut Status
"RTN","FHWHEA",48,0)
 S FHY=$P($G(^FH(115.4,+$P(FHX2,"^",2),0)),"^",2) Q
"RTN","FHWHEA",49,0)
TF ; Decode Tubefeeding
"RTN","FHWHEA",50,0)
 S FHX1=$P(FHX,"^",1) I FHX1<FHS1!(FHX1>FHS2) S FHX="" Q
"RTN","FHWHEA",51,0)
 S %=$O(^FHPT(FHDFN,"A",FHADM,"TF",FHI,"P",0)) S:% %=^(%,0)
"RTN","FHWHEA",52,0)
 S FHX2=$P(%,"^",1),FHX3=$P(%,"^",2),FHX4=$P(%,"^",3)
"RTN","FHWHEA",53,0)
 I FHX4["CC" S QUAFI=$P(FHX4,"CC",1),QUASE=$P(FHX4,"CC",2),FHX4=QUAFI_"ML"_QUASE
"RTN","FHWHEA",54,0)
 S:FHX2 FHX2=$S($D(^FH(118.2,FHX2,0)):$P(^(0),"^",1),1:" ")
"RTN","FHWHEA",55,0)
 S:FHX3 FHX3=$S(FHX3=4:"Full",FHX3=1:"1/4",FHX3=2:"1/2",1:"3/4")
"RTN","FHWHEA",56,0)
 S FHX=FHX1_"^"_$P(FHX,"^",11)_"^"_FHX2_"^"_FHX3_"^"_FHX4_"^"_$P(FHX,"^",6)_"^"_$P(FHX,"^",7)_"^"_$P(FHX,"^",5) Q
"RTN","FHWHEA",57,0)
EN ; Decode Dietetic Encounter
"RTN","FHWHEA",58,0)
 S FHX2=$G(^FHEN(FHI,0)),FHX3=$P(FHX2,"^",4) Q:'FHX3  S FHX3=$P($G(^FH(115.6,+FHX3,0)),"^",1)
"RTN","FHWHEA",59,0)
 S FHX=FHX1_"^"_FHX3_"^"_$P(FHX2,"^",11)_"^"_$P($G(^FHEN(FHI,"P",DFN,0)),"^",4)
"RTN","FHWHEA",60,0)
 S ^UTILITY($J,"EN",(FH9-FHX1),0)=FHX,FHN4=FHN4+1 Q
"RTN","FHWHEA",61,0)
 Q
"RTN","FHWHEA",62,0)
 ;
"RTN","FHWHEA",63,0)
NAD ;Nutrition Assessment.
"RTN","FHWHEA",64,0)
 S FHX=$G(^FHPT(FHDFN,"N",FHI,0))
"RTN","FHWHEA",65,0)
 S FHDI=$G(^FHPT(FHDFN,"N",FHI,"DI"))
"RTN","FHWHEA",66,0)
 S FHX1=$P(FHX,U,1)
"RTN","FHWHEA",67,0)
 S FHFUD=$P(FHDI,U,5),FHNAST=$P(FHDI,U,6)
"RTN","FHWHEA",68,0)
 S DTP=FHFUD D DTP^FH S FHFUD=$E(DTP,1,9)
"RTN","FHWHEA",69,0)
 I (FHNAST="")!(FHNAST="W") Q
"RTN","FHWHEA",70,0)
 I (FHX1<FHS1)!(FHX1>FHS2) Q
"RTN","FHWHEA",71,0)
 S FHNA=1
"RTN","FHWHEA",72,0)
 S ^UTILITY($J,"NA",(FH9-FHX1),FHNA)="Follow-up Date: "_FHFUD
"RTN","FHWHEA",73,0)
 D ALG^FHCLN
"RTN","FHWHEA",74,0)
 S FHNA=FHNA+1 S ^UTILITY($J,"NA",(FH9-FHX1),FHNA)="Patient's Allergy: "_ALG
"RTN","FHWHEA",75,0)
 I $D(^FHPT(FHDFN,"N",FHI,"X")) S FHNA=FHNA+1 S ^UTILITY($J,"NA",(FH9-FHX1),FHNA)="Comment: "
"RTN","FHWHEA",76,0)
 F FHI1=0:0 S FHI1=$O(^FHPT(FHDFN,"N",FHI,"X",FHI1)) Q:FHI1'>0  D
"RTN","FHWHEA",77,0)
 .S FHNA=FHNA+1
"RTN","FHWHEA",78,0)
 .S ^UTILITY($J,"NA",(FH9-FHX1),FHNA)=$G(^FHPT(FHDFN,"N",FHI,"X",FHI1,0))
"RTN","FHWHEA",79,0)
 Q
"RTN","FHWHEA",80,0)
BRK ; Break Supplemental Feeding
"RTN","FHWHEA",81,0)
 S FHVAL=""
"RTN","FHWHEA",82,0)
 D STP(FHN(1),.FHVAL) S FHN(1)=FHVAL
"RTN","FHWHEA",83,0)
 D STP(FHN(2),.FHVAL) S FHN(2)=FHVAL
"RTN","FHWHEA",84,0)
 D STP(FHN(3),.FHVAL) S FHN(3)=FHVAL
"RTN","FHWHEA",85,0)
 Q
"RTN","FHWHEA",86,0)
STP(FHVAL1,FHVAL2) ; Strip Excess Spaces and truncate SF from 20 to 16 char
"RTN","FHWHEA",87,0)
 S FHVAL2=""
"RTN","FHWHEA",88,0)
 F FHK2=1:1:4 S FHP1=$P(FHVAL1,";",FHK2) I FHP1'="" S:$E(FHP1,1)=" " FHP1=$E(FHP1,2,$L(FHP1)) S:FHVAL2'="" FHVAL2=FHVAL2_";" S FHVAL2=FHVAL2_$E(FHP1,1,16)
"RTN","FHWHEA",89,0)
 Q
"RTN","FHWHEA",90,0)
KIL K %,FHADM,FHDU,FHI,FHK1,FHK2,FHL,FHLD,FHN,FHN1,FHN2,FHN3,FHN4,FHOR,FHP,FHP1,FHX,FHX1,FHX2,FHX3,FHX4,FHS1,FHS2,FH9,FHFHY,FHVAL,FHVAL1,FHVAL2
"RTN","FHWHEA",91,0)
 K FHI1,FHNA,FHFUD,FHNAST,FHDI,FHDFN,FHY,FHZ115,FLAG
"RTN","FHWHEA",92,0)
 Q
"RTN","FHWORA")
0^53^B19919064
"RTN","FHWORA",1,0)
FHWORA ; HISC/GJC - OE/RR Procedure Call (Assessments) ;11/6/97  15:35
"RTN","FHWORA",2,0)
 ;;5.5;DIETETICS;**8**;Jan 28, 2005;Build 28
"RTN","FHWORA",3,0)
FHWORADT(DFN) ; Pass back the Assessment Dates for a particular patient.
"RTN","FHWORA",4,0)
 ;----------------------------------------------------------------------
"RTN","FHWORA",5,0)
 ; Input : DFN -> the ien of the patient
"RTN","FHWORA",6,0)
 ; Output: -1^error text -> no assessments passed back with reason being
"RTN","FHWORA",7,0)
 ;                          error text
"RTN","FHWORA",8,0)
 ;         1 -> Assessments for our patient have been found.  Data will
"RTN","FHWORA",9,0)
 ;              stored in:
"RTN","FHWORA",10,0)
 ;              ^TMP($J,"FHADT",DFN,inv internal dt/time)=ext dt/time
"RTN","FHWORA",11,0)
 ;----------------------------------------------------------------------
"RTN","FHWORA",12,0)
 Q:'$L(DFN) "-1^patient data missing"
"RTN","FHWORA",13,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q "-1^patient data missing"
"RTN","FHWORA",14,0)
 Q:'$D(^FHPT(FHDFN,0)) "-1^invalid patient (not in Dietetics Patient file)"
"RTN","FHWORA",15,0)
 Q:'+$O(^FHPT(FHDFN,"N",0)) "-1^No assessments on file"
"RTN","FHWORA",16,0)
 ;K ^TMP($J,"FHADT",DFN) N FH115A,I S I=6929298 ;7/1/2007
"RTN","FHWORA",17,0)
 ;K ^TMP($J,"FHADT",DFN) N FH115A,I S I=6929398 ;6/1/2007
"RTN","FHWORA",18,0)
 K ^TMP($J,"FHADT",DFN) N FH115A,I S I=6928998 ;10/1/2007
"RTN","FHWORA",19,0)
 F  S I=$O(^FHPT(FHDFN,"N",I)) Q:I'>0  D
"RTN","FHWORA",20,0)
 . S FH115A=$G(^FHPT(FHDFN,"N",I,0))
"RTN","FHWORA",21,0)
 . S ^TMP($J,"FHADT",DFN,I)=$$FMTE^XLFDT($P(FH115A,"^"),1)
"RTN","FHWORA",22,0)
 . Q
"RTN","FHWORA",23,0)
 Q $S($D(^TMP($J,"FHADT",DFN)):1,1:"-1^No assessments prior to 10/1/2007 on file")
"RTN","FHWORA",24,0)
 ;
"RTN","FHWORA",25,0)
FHWORASM(DFN,FHADTX) ; Store Assessment data so it can be displayed
"RTN","FHWORA",26,0)
 ;----------------------------------------------------------------------
"RTN","FHWORA",27,0)
 ; Input : DFN    -> ien of the patient
"RTN","FHWORA",28,0)
 ;         FHADTX -> Assessment Date (external format)
"RTN","FHWORA",29,0)
 ; Output: -1^error text, error text will be failure reason
"RTN","FHWORA",30,0)
 ;         1, no error data to be stored in:
"RTN","FHWORA",31,0)
 ;         ^TMP($J,"FHASM",DFN,seq #)="lines of text"
"RTN","FHWORA",32,0)
 ;----------------------------------------------------------------------
"RTN","FHWORA",33,0)
 Q:'$L(DFN) "-1^patient data missing"
"RTN","FHWORA",34,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q "-1^patient data missing"
"RTN","FHWORA",35,0)
 Q:'$L(FHADTX) "-1^patient assessment date missing"
"RTN","FHWORA",36,0)
 Q:+FHADTX=FHADTX "-1^expecting the external format for a date/time"
"RTN","FHWORA",37,0)
 Q:'$D(^FHPT(FHDFN,0)) "-1^invalid patient (not in Dietetics Patient file)"
"RTN","FHWORA",38,0)
 N FHADTI,FHADTINV D DT^DILF("T",FHADTX,.FHADTI)
"RTN","FHWORA",39,0)
 Q:FHADTI=-1 "-1^invalid assessment date"
"RTN","FHWORA",40,0)
 S FHADTINV=(9999999-FHADTI)
"RTN","FHWORA",41,0)
 Q:'$D(^FHPT(FHDFN,"N",FHADTINV,0)) "-1^No assessments on file for this date/time"
"RTN","FHWORA",42,0)
 K ^TMP($J,"FHASM",DFN)
"RTN","FHWORA",43,0)
 N ACIR,ACIRP,ADT,AGE,AMP,BFAMA,BFAMAP,BMI,BMIP,CCIR,CCIRP,CNT,DTP,DWGT
"RTN","FHWORA",44,0)
 N FHAPPER,FHASMNT,FHLAB,FHUNIT,FLD,FRM,HGP,HGT,I,IBW,KCAL,N,NAM,NB,PRO
"RTN","FHWORA",45,0)
 N RC,SCA,SCAP,SEX,STR,STR1,TAB,TSF,TSFP,UWGT,WGP,WGT,X,X1,X2,X3,XD,Y,Z
"RTN","FHWORA",46,0)
 S CNT=0
"RTN","FHWORA",47,0)
 ; Note: '^FH(119.9,1' is the Dietetics Site Parameter file!
"RTN","FHWORA",48,0)
 S FHUNIT=$P($G(^FH(119.9,1,3)),"^") ; Eng. or Metric units of measure
"RTN","FHWORA",49,0)
 S FHASMNT(0)=$G(^FHPT(FHDFN,"N",FHADTINV,0))
"RTN","FHWORA",50,0)
 F I=1:1:22 S @$P("ADT SEX AGE HGT HGP WGT WGP DWGT UWGT IBW FRM AMP X X X KCAL PRO FLD RC XD BMI BMIP"," ",I)=$P(FHASMNT(0),"^",I)
"RTN","FHWORA",51,0)
 S SIGN=$P(FHASMNT(0),U,23) S:SIGN'="" SIGN1="Entered by: "_$P($P(^VA(200,SIGN,0),U),",",2)_" "_$P($P(^VA(200,SIGN,0),U),",") K SIGN
"RTN","FHWORA",52,0)
 S NAM=$P(^DPT(DFN,0),"^"),NB=$P(FHASMNT(0),"^",25)
"RTN","FHWORA",53,0)
 S SEX=$S(SEX="M":"Male",SEX="F":"Female",1:"")
"RTN","FHWORA",54,0)
 S FHASMNT(1)=$G(^FHPT(FHDFN,"N",FHADTINV,1))
"RTN","FHWORA",55,0)
 F I=1:1:10 S @$P("TSF TSFP SCA SCAP ACIR ACIRP CCIR CCIRP BFAMA BFAMAP"," ",I)=$P(FHASMNT(1),"^",I)
"RTN","FHWORA",56,0)
 S FHAPPER=$G(^FHPT(FHDFN,"N",FHADTINV,2)),I=0
"RTN","FHWORA",57,0)
 F  S I=$O(^FHPT(FHDFN,"N",FHADTINV,"L",I)) Q:I'>0  S FHLAB(I)=$G(^(I,0))
"RTN","FHWORA",58,0)
 D SETUP^FHWORA1
"RTN","FHWORA",59,0)
 Q $S($D(^TMP($J,"FHASM",DFN)):1,1:"-1^No assessments on file for this date/time")
"RTN","FHWORA",60,0)
 ;
"RTN","FHWORA",61,0)
CNT(X) ; Increment our subscript
"RTN","FHWORA",62,0)
 S X=X+1 S CNT=X
"RTN","FHWORA",63,0)
 Q CNT
"RTN","FHWORA",64,0)
 ;
"RTN","FHWORA",65,0)
COMMENT ; Display the Nutritional Assessment comments.
"RTN","FHWORA",66,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=" "
"RTN","FHWORA",67,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))="Comments"
"RTN","FHWORA",68,0)
 S ^TMP($J,"FHASM",DFN,$$CNT^FHWORA(CNT))=" "
"RTN","FHWORA",69,0)
 Q:'+$O(^FHPT(FHDFN,"N",FHADTINV,"X",0))  ; quit if no comments
"RTN","FHWORA",70,0)
 N DIW,DIWF,DIWI,DIWL,DIWR,DIWT,DIWTC,DIWX,FHI,X
"RTN","FHWORA",71,0)
 S DIWF="",DIWL=1,DIWR=79 K ^UTILITY($J,"W",DIWL) S FHI=0
"RTN","FHWORA",72,0)
 F  S FHI=$O(^FHPT(FHDFN,"N",FHADTINV,"X",FHI)) Q:FHI'>0  D
"RTN","FHWORA",73,0)
 . S X=$G(^FHPT(FHDFN,"N",FHADTINV,"X",FHI,0)) D ^DIWP
"RTN","FHWORA",74,0)
 . Q
"RTN","FHWORA",75,0)
 S I=0 F  S I=$O(^UTILITY($J,"W",DIWL,I)) Q:I'>0  D
"RTN","FHWORA",76,0)
 . S ^TMP($J,"FHASM",DFN,$$CNT(CNT))=$G(^UTILITY($J,"W",DIWL,I,0))
"RTN","FHWORA",77,0)
 . Q
"RTN","FHWORA",78,0)
 K ^UTILITY($J,"W",DIWL)
"RTN","FHWORA",79,0)
 Q
"RTN","FHWORA",80,0)
 ;
"RTN","FHWORA",81,0)
LAB(I) ; Display lab data for our patient.
"RTN","FHWORA",82,0)
 S X1=$P(FHLAB(I),"^",7) Q:X1=""  S DTP=X1\1 D DTP^FH
"RTN","FHWORA",83,0)
 S:'X3 ^TMP($J,"FHASM",DFN,$$CNT(CNT))=" " ; initial linefeed
"RTN","FHWORA",84,0)
 S X3=X3+1 ; lab data found? $S(X3>0:"Yes",1:"No")
"RTN","FHWORA",85,0)
 K STR S $P(STR," ",81)="",TAB=5
"RTN","FHWORA",86,0)
 S $E(STR,(TAB+1),(TAB+$L($P(FHLAB(I),"^"))))=$P(FHLAB(I),"^")
"RTN","FHWORA",87,0)
 S TAB=27
"RTN","FHWORA",88,0)
 S $E(STR,(TAB+1),(TAB+$L($P(FHLAB(I),"^",6))))=$P(FHLAB(I),"^",6)
"RTN","FHWORA",89,0)
 S TAB=40
"RTN","FHWORA",90,0)
 S $E(STR,(TAB+1),(TAB+$L($P(FHLAB(I),"^",4))))=$P(FHLAB(I),"^",4)
"RTN","FHWORA",91,0)
 S TAB=51
"RTN","FHWORA",92,0)
 S $E(STR,(TAB+1),(TAB+$L($P(FHLAB(I),"^",5))))=$P(FHLAB(I),"^",5)
"RTN","FHWORA",93,0)
 S TAB=65,$E(STR,(TAB+1),(TAB+$L(DTP)))=DTP
"RTN","FHWORA",94,0)
 S ^TMP($J,"FHASM",DFN,$$CNT(CNT))=STR
"RTN","FHWORA",95,0)
 Q
"RTN","FHWORA",96,0)
 ;
"RTN","FHWORA",97,0)
TRUNC(I) ; Set each node to no more than eighty (80) chars in length.
"RTN","FHWORA",98,0)
 N A,B,C S A=$L(I(0)),B=A\80
"RTN","FHWORA",99,0)
 F C=1:1:B S ^TMP($J,"FHASM",DFN,$$CNT(CNT))=$E(I(0),$S(C=1:1,1:((C-1)*80)),((C*80)-1))
"RTN","FHWORA",100,0)
 S ^TMP($J,"FHASM",DFN,$$CNT(CNT))=$E(I(0),(((80*B)+1)-1),A)
"RTN","FHWORA",101,0)
 Q
"SEC","^DIC",114,114,0,"DD")
#
"SEC","^DIC",114,114,0,"DEL")
#f
"SEC","^DIC",114,114,0,"LAYGO")
#f
"SEC","^DIC",114,114,0,"RD")
#F
"SEC","^DIC",114,114,0,"WR")
#f
"SEC","^DIC",115,115,0,"DD")
#
"SEC","^DIC",115,115,0,"DEL")
#F
"SEC","^DIC",115,115,0,"LAYGO")
#F
"SEC","^DIC",115,115,0,"RD")
#F
"SEC","^DIC",115,115,0,"WR")
#F
"SEC","^DIC",115.2,115.2,0,"DD")
#
"SEC","^DIC",115.2,115.2,0,"DEL")
#f
"SEC","^DIC",115.2,115.2,0,"LAYGO")
#f
"SEC","^DIC",115.2,115.2,0,"RD")
#F
"SEC","^DIC",115.2,115.2,0,"WR")
#f
"SEC","^DIC",119.6,119.6,0,"DD")
#
"SEC","^DIC",119.6,119.6,0,"DEL")
#f
"SEC","^DIC",119.6,119.6,0,"LAYGO")
#f
"SEC","^DIC",119.6,119.6,0,"RD")
#F
"SEC","^DIC",119.6,119.6,0,"WR")
#f
"UP",119.9,119.985,-1)
119.9^P
"UP",119.9,119.985,0)
119.985
"VER")
8.0^22.0
"^DD",111,111,5,0)
BULLETIN CLINICIAN?^S^Y:YES;N:NO;^0;6^Q
"^DD",111,111,5,21,0)
^^3^3^3070130^
"^DD",111,111,5,21,1,0)
This field, if answered YES, will result in a bulletin being
"^DD",111,111,5,21,2,0)
sent to the clinician(s) responsible for the ward on which the
"^DD",111,111,5,21,3,0)
patient resides any time this diet modification is ordered.
"^DD",111,111,5,"DT")
2850608
"^DD",114,114,0)
FIELD^^103^19
"^DD",114,114,0,"DT")
2950428
"^DD",114,114,0,"ID","WRITE")
I $D(^("Z")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",114,114,0,"IX","AB",114.03,.01)

"^DD",114,114,0,"IX","AC",114,99)

"^DD",114,114,0,"IX","B",114,.01)

"^DD",114,114,0,"IX","C",114,8)

"^DD",114,114,0,"NM","RECIPE")

"^DD",114,114,0,"PT",112.64,.01)

"^DD",114,114,0,"PT",114.03,.01)

"^DD",114,114,0,"PT",115.2,3)

"^DD",114,114,0,"PT",115.21,.01)

"^DD",114,114,0,"PT",116.11,.01)

"^DD",114,114,0,"PT",118,11)

"^DD",114,114,0,"PT",118.2,11)

"^DD",114,114,0,"SCR")
I '$D(^FH(114,+Y,"Z"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",114,114,0,"VRPK")
FH
"^DD",114,114,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",114,114,.01,1,0)
^.1
"^DD",114,114,.01,1,1,0)
114^B
"^DD",114,114,.01,1,1,1)
S ^FH(114,"B",$E(X,1,30),DA)=""
"^DD",114,114,.01,1,1,2)
K ^FH(114,"B",$E(X,1,30),DA)
"^DD",114,114,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",114,114,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",114,114,.01,3)
ANSWER MUST BE 3-30 CHARACTERS IN LENGTH
"^DD",114,114,.01,21,0)
^^3^3^2940701^^
"^DD",114,114,.01,21,1,0)
This is the name of the recipe. A recipe is anything served and
"^DD",114,114,.01,21,2,0)
may consist of a single ingredient which requires no
"^DD",114,114,.01,21,3,0)
preparation.
"^DD",114,114,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",114,114,.01,"DT")
2860102
"^DD",114,114,1,0)
INGREDIENT^114.01PA^^I;0
"^DD",114,114,1,21,0)
^^1^1^2880717^
"^DD",114,114,1,21,1,0)
This multiple contains the ingredients used in the recipe.
"^DD",114,114,1.5,0)
EMBEDDED RECIPE^114.03PA^^R;0
"^DD",114,114,1.5,21,0)
^^4^4^2881117^^^^
"^DD",114,114,1.5,21,1,0)
This field contains recipes which are 'embedded' in this recipe.
"^DD",114,114,1.5,21,2,0)
For example, a hot roast beef sandwich might contain bread
"^DD",114,114,1.5,21,3,0)
as an ingredient but roast beef as an embedded recipe and
"^DD",114,114,1.5,21,4,0)
perhaps even brown gravy as another embedded recipe.
"^DD",114,114,2,0)
NUMBER OF PORTIONS^RNJ4,0^^0;2^K:+X'=X!(X>1000)!(X<1)!(X?.E1"."1N.N) X
"^DD",114,114,2,3)
Type a Number between 1 and 1000, 0 Decimal Digits
"^DD",114,114,2,21,0)
^^3^3^2881117^^^
"^DD",114,114,2,21,1,0)
This is the yield, in terms of number of portions, of the
"^DD",114,114,2,21,2,0)
recipe. It should be within a factor of 10 of the normal quantity
"^DD",114,114,2,21,3,0)
needed and need not be 100.
"^DD",114,114,2,"DT")
2881117
"^DD",114,114,3,0)
PORTION SIZE^RFX^^0;3^K:$L(X)>8!($L(X)<1) X I $D(X) D EN3^FHREC1
"^DD",114,114,3,3)
ANSWER MUST BE A NUMBER FOLLOWED BY OZ, FLOZ OR EACH
"^DD",114,114,3,21,0)
^^2^2^2930916^^^^
"^DD",114,114,3,21,1,0)
This is a short description of the portion size, e.g., 3-oz. or
"^DD",114,114,3,21,2,0)
1 each. Size must be a number followed by OZ, EACH or FLOZ.
"^DD",114,114,3,"DT")
2880918
"^DD",114,114,4,0)
PREPARATION TIME^F^^0;4^K:$L(X)>10!($L(X)<1) X
"^DD",114,114,4,3)
ANSWER MUST BE 1-10 CHARACTERS IN LENGTH
"^DD",114,114,4,21,0)
^^2^2^2880717^
"^DD",114,114,4,21,1,0)
This field indicates the amount of preparation time this
"^DD",114,114,4,21,2,0)
recipe will require.
"^DD",114,114,5,0)
EQUIPMENT^114.05P^^E;0
"^DD",114,114,5,3)

"^DD",114,114,5,21,0)
^^2^2^2880919^
"^DD",114,114,5,21,1,0)
This multiple is used to indicate the various types of equipment
"^DD",114,114,5,21,2,0)
necessary to produce this recipe.
"^DD",114,114,5,"DT")
2871114
"^DD",114,114,6,0)
SERVING UTENSIL^P114.3'^FH(114.3,^0;6^Q
"^DD",114,114,6,3)

"^DD",114,114,6,21,0)
^^2^2^2930127^^
"^DD",114,114,6,21,1,0)
This field indicates the primary serving utensil which will be
"^DD",114,114,6,21,2,0)
required by tray line personnel or cafeteria line personnel.
"^DD",114,114,6,"DT")
2871114
"^DD",114,114,7,0)
DEFAULT CATEGORY^RP114.1'^FH(114.1,^0;7^Q
"^DD",114,114,7,3)

"^DD",114,114,7,21,0)
^^4^4^2880717^
"^DD",114,114,7,21,1,0)
This is the primary category of the recipe. Selection does not
"^DD",114,114,7,21,2,0)
prohibit the use of the recipe in other ways (e.g., a 'salad'
"^DD",114,114,7,21,3,0)
being used for dessert) but does influence the printing order
"^DD",114,114,7,21,4,0)
of the recipe in various lists.
"^DD",114,114,7,"DT")
2940120
"^DD",114,114,8,0)
SYNONYM^F^^0;9^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>25!($L(X)<3) X
"^DD",114,114,8,1,0)
^.1
"^DD",114,114,8,1,1,0)
114^C
"^DD",114,114,8,1,1,1)
S ^FH(114,"C",$E(X,1,30),DA)=""
"^DD",114,114,8,1,1,2)
K ^FH(114,"C",$E(X,1,30),DA)
"^DD",114,114,8,3)
ANSWER MUST BE 3-25 CHARACTERS IN LENGTH
"^DD",114,114,8,21,0)
^^2^2^2880717^
"^DD",114,114,8,21,1,0)
This field may contain a synonym, or alternate name, for the
"^DD",114,114,8,21,2,0)
recipe.
"^DD",114,114,8,"DT")
2861024
"^DD",114,114,9,0)
# DAYS PRE-PREP^NJ1,0^^0;10^K:+X'=X!(X>3)!(X<0)!(X?.E1"."1N.N) X
"^DD",114,114,9,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 3
"^DD",114,114,9,21,0)
^^3^3^2880717^
"^DD",114,114,9,21,1,0)
This field contains the number of days in advance that the recipe
"^DD",114,114,9,21,2,0)
must be prepared. It need be answered only when non-zero, that is,
"^DD",114,114,9,21,3,0)
when the recipe is prepared in advance of the serving day.
"^DD",114,114,9,"DT")
2861208
"^DD",114,114,10,0)
PRINT RECIPE^SO^Y:YES;N:NO;^0;8^Q
"^DD",114,114,10,2)
S Y(0)=Y S:Y="" Y="Y"
"^DD",114,114,10,2.1)
S:Y="" Y="Y"
"^DD",114,114,10,21,0)
^^5^5^2910506^^
"^DD",114,114,10,21,1,0)
This field, when answered NO, will inhibit the printing of the
"^DD",114,114,10,21,2,0)
recipe even when such printing is requested as part of the
"^DD",114,114,10,21,3,0)
production summary. It is generally used to inhibit printing
"^DD",114,114,10,21,4,0)
of one-ingredient recipes or those which require no
"^DD",114,114,10,21,5,0)
preparation.
"^DD",114,114,10,"DT")
2861024
"^DD",114,114,11,0)
PRE-PREP STATE^S^M:MIX;D:DEHYDRATED;F:FROZEN;C:CANNED;X:CONCENTRATED;S:SCRATCH;I:IND/R-T-S;P:PARTIALLY PREP;R:R-T-S;^0;11^Q
"^DD",114,114,11,21,0)
^^3^3^2880913^^
"^DD",114,114,11,21,1,0)
This field indicates the state of the recipe, i.e., whether
"^DD",114,114,11,21,2,0)
a canned item, dehydrated, partially prepared, ready-to-serve,
"^DD",114,114,11,21,3,0)
etc.
"^DD",114,114,11,"DT")
2880913
"^DD",114,114,12,0)
PREPARATION AREA^P114.2'^FH(114.2,^0;12^Q
"^DD",114,114,12,21,0)
^^2^2^2880717^
"^DD",114,114,12,21,1,0)
This field indicates the preparation area of the kitchen where
"^DD",114,114,12,21,2,0)
the recipe would normally be prepared.
"^DD",114,114,12,"DT")
2871017
"^DD",114,114,20,0)
DIRECTIONS^114.02^^X;0
"^DD",114,114,20,3)
ANSWER MUST BE 1-80 CHARACTERS IN LENGTH
"^DD",114,114,20,21,0)
^^7^7^2880717^^
"^DD",114,114,20,21,1,0)
This field contains the directions for the preparation of
"^DD",114,114,20,21,2,0)
the recipe. References to absolute quantities of an
"^DD",114,114,20,21,3,0)
ingredient should not be made since the recipe will normally
"^DD",114,114,20,21,4,0)
be printed in an 'adjusted' form -- that is, the number of
"^DD",114,114,20,21,5,0)
portions will be adjusted and hence the individual ingredient
"^DD",114,114,20,21,6,0)
amounts will vary from those entered for the yield of the
"^DD",114,114,20,21,7,0)
recipe.
"^DD",114,114,99,0)
INACTIVE?^S^Y:YES;N:NO;^Z;1^Q
"^DD",114,114,99,1,0)
^.1
"^DD",114,114,99,1,1,0)
114^AC^MUMPS
"^DD",114,114,99,1,1,1)
K:X'="Y" ^FH(114,DA,"Z")
"^DD",114,114,99,1,1,2)
K ^FH(114,DA,"Z")
"^DD",114,114,99,1,1,"%D",0)
^^2^2^3000202
"^DD",114,114,99,1,1,"%D",1,0)
This cross-reference is used to create an 'Z' node for
"^DD",114,114,99,1,1,"%D",2,0)
inactive entries.
"^DD",114,114,99,21,0)
^.001^2^2^3000414^
"^DD",114,114,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",114,114,99,21,2,0)
further selection of this entry.
"^DD",114,114,99,"DT")
3000223
"^DD",114,114,101,0)
COST/PORTION^NJ6,3^^0;13^K:+X'=X!(X>30)!(X<.001)!(X?.E1"."4N.N) X
"^DD",114,114,101,3)
Type a Number between .001 and 30, 3 Decimal Digits
"^DD",114,114,101,21,0)
^^2^2^2910506^^^^
"^DD",114,114,101,21,1,0)
This field contains the cost per portion of the recipe based upon
"^DD",114,114,101,21,2,0)
the current prices shown in the Ingredient file (113).
"^DD",114,114,101,"DT")
2871018
"^DD",114,114,102,0)
ASSOCIATED NUTRIENT ANALYSIS^P112'^FHNU(^0;14^Q
"^DD",114,114,102,21,0)
^^2^2^2930423^
"^DD",114,114,102,21,1,0)
This is a pointer to the Nutrient file (112) and contains the
"^DD",114,114,102,21,2,0)
nutrient analysis of this recipe.
"^DD",114,114,102,"DT")
2921111
"^DD",114,114,103,0)
DIABETIC EXCHANGE^114.0103P^^DBX;0
"^DD",114,114,103,21,0)
^^2^2^2950501^^^^
"^DD",114,114,103,21,1,0)
This multiple contains the Diabetic exchanges associated with this
"^DD",114,114,103,21,2,0)
recipe.  It is use to handle the Diabetic calculated diets.
"^DD",114,114.01,0)
INGREDIENT SUB-FIELD^NL^3^4
"^DD",114,114.01,0,"DT")
2921111
"^DD",114,114.01,0,"NM","INGREDIENT")

"^DD",114,114.01,0,"UP")
114
"^DD",114,114.01,.01,0)
INGREDIENT^MP113'X^FHING(^0;1^K:$D(^FHING(X,"I")) X Q
"^DD",114,114.01,.01,21,0)
^^2^2^2880717^
"^DD",114,114.01,.01,21,1,0)
This field contains the name of an ingredient used in the
"^DD",114,114.01,.01,21,2,0)
recipe.
"^DD",114,114.01,.01,"DT")
3010926
"^DD",114,114.01,1,0)
QUANTITY^RNJ7,2XO^^0;2^S I9=+^FH(114,D0,"I",D1,0),UNT=$P(^FHING(I9,0),U,16) D EN1^FHREC1 I $D(X) K:X<.00001!(X>5000) X
"^DD",114,114.01,1,2)
S Y(0)=Y S I9=+^FH(114,D0,"I",D1,0),UNT=$P(^FHING(I9,0),U,16) D:Y'="" EN2^FHREC1
"^DD",114,114.01,1,2.1)
S I9=+^FH(114,D0,"I",D1,0),UNT=$P(^FHING(I9,0),U,16) D:Y'="" EN2^FHREC1
"^DD",114,114.01,1,3)
Enter Quantity in proper units
"^DD",114,114.01,1,21,0)
^^3^3^2920113^^^^
"^DD",114,114.01,1,21,1,0)
This field contains the quantity of the ingredient required. The
"^DD",114,114.01,1,21,2,0)
units are the 'Recipe Unit' as contained in the Ingredient file
"^DD",114,114.01,1,21,3,0)
for this ingredient.
"^DD",114,114.01,1,"DT")
2860812
"^DD",114,114.01,2,0)
ASSOCIATED NUTRIENT^P112'^FHNU(^0;3^Q
"^DD",114,114.01,2,21,0)
^^3^3^2930423^
"^DD",114,114.01,2,21,1,0)
This field is a pointer to the Nutrient file (112) and indicates
"^DD",114,114.01,2,21,2,0)
the nutrient most closely associated with this ingredient after
"^DD",114,114.01,2,21,3,0)
preparation.
"^DD",114,114.01,2,"DT")
2921111
"^DD",114,114.01,3,0)
NUTRIENT AMOUNT IN LBS.^NJ10,5^^0;4^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."6N.N) X
"^DD",114,114.01,3,3)
Type a Number between 0 and 9999, 5 Decimal Digits
"^DD",114,114.01,3,21,0)
^^4^4^2930423^
"^DD",114,114.01,3,21,1,0)
This value is the amount of the ingredient, in pounds, for
"^DD",114,114.01,3,21,2,0)
Nutrient Analysis purposes after taking into account removal
"^DD",114,114.01,3,21,3,0)
of non-edible amounts of the ingredient and any expansion or
"^DD",114,114.01,3,21,4,0)
shrinkage due to preparation.
"^DD",114,114.01,3,"DT")
2921111
"^DD",114,114.0103,0)
DIABETIC EXCHANGE SUB-FIELD^^1^2
"^DD",114,114.0103,0,"DT")
2950428
"^DD",114,114.0103,0,"IX","B",114.0103,.01)

"^DD",114,114.0103,0,"NM","DIABETIC EXCHANGE")

"^DD",114,114.0103,0,"UP")
114
"^DD",114,114.0103,.01,0)
DIABETIC EXCHANGE^MP114.1'^FH(114.1,^0;1^Q
"^DD",114,114.0103,.01,1,0)
^.1
"^DD",114,114.0103,.01,1,1,0)
114.0103^B
"^DD",114,114.0103,.01,1,1,1)
S ^FH(114,DA(1),"DBX","B",$E(X,1,30),DA)=""
"^DD",114,114.0103,.01,1,1,2)
K ^FH(114,DA(1),"DBX","B",$E(X,1,30),DA)
"^DD",114,114.0103,.01,21,0)
^^2^2^2950428^^^^
"^DD",114,114.0103,.01,21,1,0)
This multiple contains the Diabetic exchanges associated with
"^DD",114,114.0103,.01,21,2,0)
this recipe.
"^DD",114,114.0103,.01,"DT")
2950428
"^DD",114,114.0103,1,0)
QUANTITY^RNJ1,0^^0;2^K:+X'=X!(X>5)!(X<1)!(X?.E1"."1N.N) X
"^DD",114,114.0103,1,3)
Type a Number between 1 and 5, 0 Decimal Digits
"^DD",114,114.0103,1,21,0)
^^3^3^2950501^^^^
"^DD",114,114.0103,1,21,1,0)
This is the quantity of the Diabetic exchange that needs to be
"^DD",114,114.0103,1,21,2,0)
omitted when the recipe is used in a meal for the Diabetic
"^DD",114,114.0103,1,21,3,0)
calculated diets.
"^DD",114,114.0103,1,"DT")
2950428
"^DD",114,114.02,0)
DIRECTIONS SUB-FIELD^NL^.01^1
"^DD",114,114.02,0,"NM","DIRECTIONS")

"^DD",114,114.02,0,"UP")
114
"^DD",114,114.02,.01,0)
DIRECTIONS^W^^0;1^Q
"^DD",114,114.02,.01,21,0)
^^2^2^2880717^
"^DD",114,114.02,.01,21,1,0)
This field contains the text of the recipe preparation
"^DD",114,114.02,.01,21,2,0)
instructions.
"^DD",114,114.02,.01,"DT")
2840822
"^DD",114,114.03,0)
EMBEDDED RECIPE SUB-FIELD^NL^1^2
"^DD",114,114.03,0,"NM","EMBEDDED RECIPE")

"^DD",114,114.03,0,"UP")
114
"^DD",114,114.03,.01,0)
EMBEDDED RECIPE^M*P114'X^FH(114,^0;1^S DIC("S")="I +Y'=D0" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",114,114.03,.01,1,0)
^.1
"^DD",114,114.03,.01,1,1,0)
114^AB
"^DD",114,114.03,.01,1,1,1)
S ^FH(114,"AB",$E(X,1,30),DA(1),DA)=""
"^DD",114,114.03,.01,1,1,2)
K ^FH(114,"AB",$E(X,1,30),DA(1),DA)
"^DD",114,114.03,.01,1,1,"%D",0)
^^3^3^3070816^
"^DD",114,114.03,.01,1,1,"%D",1,0)
Cross-reference the file by embedded recipes so that embedded recipes
"^DD",114,114.03,.01,1,1,"%D",2,0)
can be excluded from patient trays that may have an allergy or food 
"^DD",114,114.03,.01,1,1,"%D",3,0)
preference to a recipe.
"^DD",114,114.03,.01,1,1,"DT")
3070816
"^DD",114,114.03,.01,12)
Don't allow selection of current recipe
"^DD",114,114.03,.01,12.1)
S DIC("S")="I +Y'=D0"
"^DD",114,114.03,.01,21,0)
^^3^3^2880914^^
"^DD",114,114.03,.01,21,1,0)
This field contains the name of a recipe which is to be
"^DD",114,114.03,.01,21,2,0)
embedded in the present one. The embedded recipe cannot be
"^DD",114,114.03,.01,21,3,0)
the same as the present recipe.
"^DD",114,114.03,.01,"DT")
3070816
"^DD",114,114.03,1,0)
NO. OF PORTIONS^RNJ7,2^^0;2^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."3N.N) X
"^DD",114,114.03,1,3)
TYPE A NUMBER BETWEEN 0 AND 9999
"^DD",114,114.03,1,21,0)
^^2^2^2881117^^
"^DD",114,114.03,1,21,1,0)
This is the number of portions of the embedded recipe required
"^DD",114,114.03,1,21,2,0)
in the present recipe.
"^DD",114,114.03,1,"DT")
2851222
"^DD",114,114.05,0)
EQUIPMENT SUB-FIELD^^.01^1
"^DD",114,114.05,0,"IX","B",114.05,.01)

"^DD",114,114.05,0,"NM","EQUIPMENT")

"^DD",114,114.05,0,"UP")
114
"^DD",114,114.05,.01,0)
EQUIPMENT^MP114.4^FH(114.4,^0;1^Q
"^DD",114,114.05,.01,1,0)
^.1
"^DD",114,114.05,.01,1,1,0)
114.05^B
"^DD",114,114.05,.01,1,1,1)
S ^FH(114,DA(1),"E","B",$E(X,1,30),DA)=""
"^DD",114,114.05,.01,1,1,2)
K ^FH(114,DA(1),"E","B",$E(X,1,30),DA)
"^DD",114,114.05,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",114,114.05,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the EQUIPMENT field.
"^DD",114,114.05,.01,21,0)
^^3^3^2880919^
"^DD",114,114.05,.01,21,1,0)
This field contains a pointer to the Equipment file (114.4) and
"^DD",114,114.05,.01,21,2,0)
indicates an item of equipment used in the production of this
"^DD",114,114.05,.01,21,3,0)
recipe.
"^DD",114,114.05,.01,"DT")
2880914
"^DD",115,115,0)
FIELD^^21^13
"^DD",115,115,0,"DDA")
N
"^DD",115,115,0,"DT")
3070808
"^DD",115,115,0,"IX","ADLT",115.05,.01)

"^DD",115,115,0,"IX","ADR",115.03,.01)

"^DD",115,115,0,"IX","ADRU",115.03,4)

"^DD",115,115,0,"IX","ADRV",115.03,7)

"^DD",115,115,0,"IX","ADTF",115.01,1.3)

"^DD",115,115,0,"IX","AIS",115.01,9)

"^DD",115,115,0,"IX","AOO",115.06,4)

"^DD",115,115,0,"IX","ASP",115.08,1)

"^DD",115,115,0,"IX","ASP1",115.08,5)

"^DD",115,115,0,"IX","AW",115.01,13)

"^DD",115,115,0,"IX","B",115,.01)

"^DD",115,115,0,"IX","C",115.016,2)

"^DD",115,115,0,"IX","D",115,19)

"^DD",115,115,0,"IX","E",115.011,64)

"^DD",115,115,0,"IX","GM",115.018,.01)

"^DD",115,115,0,"IX","IP",115,19)

"^DD",115,115,0,"IX","OP",115.016,.01)

"^DD",115,115,0,"IX","RM",115.016,.01)

"^DD",115,115,0,"IX","SM",115.017,.01)

"^DD",115,115,0,"NM","NUTRITION PERSON")

"^DD",115,115,0,"PT",119.8,2)

"^DD",115,115,0,"VRPK")
FH
"^DD",115,115,.01,0)
NAME^RF^^0;1^K:$L(X)>15!($L(X)<2)!'(X?1"P"1.11N!(X?1"N"1.11N)) X
"^DD",115,115,.01,1,0)
^.1
"^DD",115,115,.01,1,1,0)
115^B
"^DD",115,115,.01,1,1,1)
S ^FHPT("B",$E(X,1,30),DA)=""
"^DD",115,115,.01,1,1,2)
K ^FHPT("B",$E(X,1,30),DA)
"^DD",115,115,.01,1,1,"%D",0)
^^2^2^3030219^
"^DD",115,115,.01,1,1,"%D",1,0)
A standard "B" cross-reference on the .01 field for file 115.
"^DD",115,115,.01,1,1,"%D",2,0)
Added 2/19/2003.
"^DD",115,115,.01,1,1,"DT")
3030219
"^DD",115,115,.01,3)
Answer must be 2-15 characters in length.
"^DD",115,115,.01,21,0)
^.001^14^14^3060412^^^^
"^DD",115,115,.01,21,1,0)
Beginning with the Outpatient Meals release this field will simply be a
"^DD",115,115,.01,21,2,0)
free text field.  This file will need to point to either File #2 or File #200
"^DD",115,115,.01,21,3,0)
and those pointer values will be stored in fields #14 & #15 respectively.
"^DD",115,115,.01,21,4,0)
Those 2 fields will be mutually exclusive, ie, each entry in this file must
"^DD",115,115,.01,21,5,0)
have a pointer value in EITHER field #14 OR field #15, BUT NOT BOTH.
"^DD",115,115,.01,21,6,0)

"^DD",115,115,.01,21,7,0)
Previously, this field was a pointer to the main ^DPT file and had the same
"^DD",115,115,.01,21,8,0)
internal number as that file. Thus, the patient's name was the ^DPT name.
"^DD",115,115,.01,21,9,0)
This was no longer feasible since it was necessary to point to file #200 also.
"^DD",115,115,.01,21,10,0)

"^DD",115,115,.01,21,11,0)
This field will now store either "P" followed by a pointer value to file #2
"^DD",115,115,.01,21,12,0)
or an "N" followed by a pointer value to #200.  For example, this field
"^DD",115,115,.01,21,13,0)
might store P27 for IEN #27 in file #2.  Or this field might store N1866 for
"^DD",115,115,.01,21,14,0)
IEN #1866 in file #200.
"^DD",115,115,.01,"DT")
3060412
"^DD",115,115,1,0)
ADMISSION^115.01D^^A;0
"^DD",115,115,1,21,0)
^.001^2^2^3070712^^^^
"^DD",115,115,1,21,1,0)
This multiple contains all dietetic information pertaining
"^DD",115,115,1,21,2,0)
to this particular admission.
"^DD",115,115,1,"DT")
2920103
"^DD",115,115,10,0)
FOOD PREFERENCES^115.09PA^^P;0
"^DD",115,115,10,21,0)
^.001^1^1^3030623^^^
"^DD",115,115,10,21,1,0)
This multiple contains the food preferences selected by the patient.
"^DD",115,115,11,0)
NUTRITION ASSESSMENT^115.011DI^^N;0
"^DD",115,115,11,21,0)
^.001^2^2^3070808^^^^
"^DD",115,115,11,21,1,0)
This field contains Nutrition Assessments performed
"^DD",115,115,11,21,2,0)
for this patient.
"^DD",115,115,12,0)
NUTRITION STATUS^115.012D^^S;0
"^DD",115,115,12,21,0)
^.001^2^2^3031014^^^^
"^DD",115,115,12,21,1,0)
This multiple contains the nutrition assessment
"^DD",115,115,12,21,2,0)
statuses that have been entered for this patient.
"^DD",115,115,14,0)
PATIENT^P2'^DPT(^0;3^Q
"^DD",115,115,14,21,0)
^.001^4^4^3030416^^
"^DD",115,115,14,21,1,0)
This field, if populated, will contain a pointer to the Patient (#2) file,
"^DD",115,115,14,21,2,0)
if the Nutrition Person is a patient.  This field and field #15 are mutually
"^DD",115,115,14,21,3,0)
exclusive, in other words each entry in this file should have a value in
"^DD",115,115,14,21,4,0)
either this field or field #15.
"^DD",115,115,14,"DT")
3030210
"^DD",115,115,15,0)
NEW PERSON^P200'^VA(200,^0;4^Q
"^DD",115,115,15,21,0)
^.001^4^4^3030416^^
"^DD",115,115,15,21,1,0)
This field, if populated, will contain a pointer to the New Person (#200)
"^DD",115,115,15,21,2,0)
file, if the Nutrition Person is a NOT a patient.  This field and field #14
"^DD",115,115,15,21,3,0)
are mutually exclusive, in other words each entry in this file should have
"^DD",115,115,15,21,4,0)
a value in either this field or field #14.
"^DD",115,115,15,"DT")
3030210
"^DD",115,115,16,0)
RECURRING MEALS^115.016D^^OP;0
"^DD",115,115,16,21,0)
^.001^1^1^3060926^^^^
"^DD",115,115,16,21,1,0)
This multiple stores the recurring meals data.
"^DD",115,115,16,"DT")
3030417
"^DD",115,115,17,0)
SPECIAL MEALS^115.017D^^SM;0
"^DD",115,115,17,21,0)
^.001^1^1^3060720^^^^
"^DD",115,115,17,21,1,0)
This multiple stores special meals data.
"^DD",115,115,18,0)
GUEST MEALS^115.018D^^GM;0
"^DD",115,115,18,21,0)
^.001^1^1^3060720^^^^
"^DD",115,115,18,21,1,0)
This multiple stores the guest meals data.
"^DD",115,115,19,0)
ISOLATION/PRECAUTION (OUTPT)^P119.4'^FH(119.4,^0;5^Q
"^DD",115,115,19,1,0)
^.1
"^DD",115,115,19,1,1,0)
115^IP^MUMPS
"^DD",115,115,19,1,1,1)
S ^FHPT("IP",DA)=""
"^DD",115,115,19,1,1,2)
K ^FHPT("IP",DA)
"^DD",115,115,19,1,1,"%D",0)
^^1^1^3030923^
"^DD",115,115,19,1,1,"%D",1,0)
Cross reference for outpatient isolations/precautions.
"^DD",115,115,19,1,1,"DT")
3030923
"^DD",115,115,19,1,2,0)
115^D^MUMPS
"^DD",115,115,19,1,2,1)
Q
"^DD",115,115,19,1,2,2)
D CNIP100^FHOMRC2
"^DD",115,115,19,1,2,"%D",0)
^^2^2^3050505^
"^DD",115,115,19,1,2,"%D",1,0)
If OUTPATIENT ISOLATION/PRECAUTION is canceled/deleted send an
"^DD",115,115,19,1,2,"%D",2,0)
update/backdoor message to OERR/CPRS.
"^DD",115,115,19,1,2,"DT")
3050505
"^DD",115,115,19,21,0)
^^4^4^3030918^
"^DD",115,115,19,21,1,0)
This field, if present, indicates that the outpatient is presently
"^DD",115,115,19,21,2,0)
on isolation or special precautions.  Note: this field is for outpatients
"^DD",115,115,19,21,3,0)
and is different from the isolation/precautions field for inpatients which
"^DD",115,115,19,21,4,0)
is associated with a specific admission.
"^DD",115,115,19,"DT")
3050505
"^DD",115,115,20,0)
IP OE/RR ORDER (OUTPT)^P100'^OR(100,^0;6^Q
"^DD",115,115,20,21,0)
^^1^1^3040122^
"^DD",115,115,20,21,1,0)
Pointer to File #100 for I/P's entered thru OE/RR.
"^DD",115,115,20,"DT")
3040122
"^DD",115,115,21,0)
ALERT^115.12D^^D;0
"^DD",115,115,21,21,0)
^^1^1^3070516^
"^DD",115,115,21,21,1,0)
This is a multiple for food/drug alert for a patient.
"^DD",115,115.01,0)
ADMISSION SUB-FIELD^NL^90^24
"^DD",115,115.01,0,"DT")
3060711
"^DD",115,115.01,0,"NM","ADMISSION")

"^DD",115,115.01,0,"UP")
115
"^DD",115,115.01,.01,0)
ADMISSION^D^^0;1^S %DT="ETS" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.01,.01,21,0)
^^3^3^2911204^^^^
"^DD",115,115.01,.01,21,1,0)
This is the date/time of admission. The admission has the same
"^DD",115,115.01,.01,21,2,0)
date/time and internal number as the corresponding MAS
"^DD",115,115.01,.01,21,3,0)
admission stored in ^DPT.
"^DD",115,115.01,1.1,0)
CURRENT DIET ORDER^NJ5,0I^^0;2^K:+X'=X!(X>99999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.01,1.1,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99999
"^DD",115,115.01,1.1,9)
^
"^DD",115,115.01,1.1,21,0)
^^2^2^2950613^^^^
"^DD",115,115.01,1.1,21,1,0)
This field is actually a pointer to the current diet order
"^DD",115,115.01,1.1,21,2,0)
stored in Field 3.
"^DD",115,115.01,1.1,"DT")
2880515
"^DD",115,115.01,1.2,0)
DIET ORDER EXPIRATION^DI^^0;3^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.01,1.2,9)
^
"^DD",115,115.01,1.2,21,0)
^^3^3^2950613^^^^
"^DD",115,115.01,1.2,21,1,0)
This field contains the date/time of expiration of the current
"^DD",115,115.01,1.2,21,2,0)
diet pointed to by Field 1.1. If null, the current diet has
"^DD",115,115.01,1.2,21,3,0)
no expiration date/time.
"^DD",115,115.01,1.2,"DT")
2880515
"^DD",115,115.01,1.3,0)
CURRENT TF ORDER^NJ5,0I^^0;4^K:+X'=X!(X>99999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.01,1.3,1,0)
^.1
"^DD",115,115.01,1.3,1,1,0)
115^ADTF^MUMPS
"^DD",115,115.01,1.3,1,1,1)
S ^FHPT("ADTF",DA(1),DA)=""
"^DD",115,115.01,1.3,1,1,2)
K ^FHPT("ADTF",DA(1),DA)
"^DD",115,115.01,1.3,1,1,"%D",0)
^^2^2^2940824^
"^DD",115,115.01,1.3,1,1,"%D",1,0)
This is a list of Patients by Admission who have a current
"^DD",115,115.01,1.3,1,1,"%D",2,0)
Tubefeeding Order.
"^DD",115,115.01,1.3,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99999
"^DD",115,115.01,1.3,9)
^
"^DD",115,115.01,1.3,21,0)
3^^3^3^2950613^^^
"^DD",115,115.01,1.3,21,1,0)
This field is actually a pointer to the current Tubefeeding Order
"^DD",115,115.01,1.3,21,2,0)
stored in Field 40. If null, no current tubefeeding order
"^DD",115,115.01,1.3,21,3,0)
exists.
"^DD",115,115.01,1.3,"DT")
2850718
"^DD",115,115.01,2.1,0)
CURRENT SERVICE^SI^C:CAFETERIA;T:TRAY;D:DINING ROOM;^0;5^Q
"^DD",115,115.01,2.1,21,0)
^^3^3^2920512^^^^
"^DD",115,115.01,2.1,21,1,0)
This field contains the most recent type of service (tray,
"^DD",115,115.01,2.1,21,2,0)
cafeteria or dining room) selected for the patient. It is
"^DD",115,115.01,2.1,21,3,0)
used as a default for future orders.
"^DD",115,115.01,2.1,"DT")
2880515
"^DD",115,115.01,3,0)
DIET^115.02A^^DI;0
"^DD",115,115.01,3,21,0)
^.001^2^2^3060329^^^^
"^DD",115,115.01,3,21,1,0)
This multiple contains the individual diet orders which have
"^DD",115,115.01,3,21,2,0)
been entered during this admission.
"^DD",115,115.01,4,0)
DIET SEQUENCE^115.14DA^^AC;0
"^DD",115,115.01,4,21,0)
^^5^5^2911223^^^
"^DD",115,115.01,4,21,1,0)
This multiple indicates the sequence in which the diet orders
"^DD",115,115.01,4,21,2,0)
actually become effective. Since orders entered later supercede
"^DD",115,115.01,4,21,3,0)
earlier orders, the sequence times may not be the same as those
"^DD",115,115.01,4,21,4,0)
of the original order. This multiple is the outcome of a
"^DD",115,115.01,4,21,5,0)
recursive templating schemata.
"^DD",115,115.01,6,0)
CURRENT SF ORDER^NJ4,0I^^0;7^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.01,6,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",115,115.01,6,21,0)
^^4^4^2880710^
"^DD",115,115.01,6,21,1,0)
This field is actually a pointer to the Supplemental Feeding
"^DD",115,115.01,6,21,2,0)
multiple (Field 20) and, if present, indicates which order
"^DD",115,115.01,6,21,3,0)
is presently in effect. It is updated any time any diet
"^DD",115,115.01,6,21,4,0)
activity involving supplemental feedings takes place.
"^DD",115,115.01,6,"DT")
2880515
"^DD",115,115.01,9,0)
ISOLATION/PRECAUTION^P119.4'^FH(119.4,^0;10^Q
"^DD",115,115.01,9,1,0)
^.1
"^DD",115,115.01,9,1,1,0)
115^AIS^MUMPS
"^DD",115,115.01,9,1,1,1)
S ^FHPT("AIS",DA(1),DA)=""
"^DD",115,115.01,9,1,1,2)
K ^FHPT("AIS",DA(1),DA)
"^DD",115,115.01,9,1,1,"%D",0)
^^1^1^2940824^
"^DD",115,115.01,9,1,1,"%D",1,0)
This cross-reference is a list of patients on isolation/precautions.
"^DD",115,115.01,9,3)

"^DD",115,115.01,9,21,0)
^.001^2^2^3030918^^
"^DD",115,115.01,9,21,1,0)
This field, if present, indicates that the patient is presently
"^DD",115,115.01,9,21,2,0)
on isolation or special precautions.
"^DD",115,115.01,9,"DT")
2871010
"^DD",115,115.01,10,0)
OE/RR ISOLATION ORDER^P100^OR(100,^0;13^Q
"^DD",115,115.01,10,21,0)
^^2^2^2890919^
"^DD",115,115.01,10,21,1,0)
This field contains the OE/RR file order pointer corresponding
"^DD",115,115.01,10,21,2,0)
to the current Isolation/Precautions.
"^DD",115,115.01,10,"DT")
2890919
"^DD",115,115.01,11,0)
LAST LABEL WARD^P119.6'I^FH(119.6,^0;11^Q
"^DD",115,115.01,11,3)

"^DD",115,115.01,11,21,0)
^^4^4^2930121^^
"^DD",115,115.01,11,21,1,0)
This field contains the internal number of the ward (from File 42)
"^DD",115,115.01,11,21,2,0)
for which the last diet card label was prepared. Whenever a
"^DD",115,115.01,11,21,3,0)
label run is made, this field is compared with the current ward
"^DD",115,115.01,11,21,4,0)
and, if different, a new label is prepared.
"^DD",115,115.01,11,"DT")
2860702
"^DD",115,115.01,12,0)
LAST LABEL ROOM^FI^^0;12^K:$L(X)>10!($L(X)<1) X
"^DD",115,115.01,12,3)
ANSWER MUST BE 1-10 CHARACTERS IN LENGTH
"^DD",115,115.01,12,21,0)
^^4^4^2880710^
"^DD",115,115.01,12,21,1,0)
This field contains the room-bed for which the last diet card
"^DD",115,115.01,12,21,2,0)
label was prepared. Whenever a label run is made, this field
"^DD",115,115.01,12,21,3,0)
is compared with the current room-bed and, if different, a new
"^DD",115,115.01,12,21,4,0)
label is prepared.
"^DD",115,115.01,12,"DT")
2850826
"^DD",115,115.01,13,0)
DIETETIC WARD^P119.6'^FH(119.6,^0;8^Q
"^DD",115,115.01,13,1,0)
^.1
"^DD",115,115.01,13,1,1,0)
115^AW^MUMPS
"^DD",115,115.01,13,1,1,1)
S ^FHPT("AW",X,DA(1))=DA
"^DD",115,115.01,13,1,1,2)
K ^FHPT("AW",X,DA(1))
"^DD",115,115.01,13,1,1,"%D",0)
^^2^2^2940824^
"^DD",115,115.01,13,1,1,"%D",1,0)
This is a cross-reference of Dietetic Ward by Patient. The
"^DD",115,115.01,13,1,1,"%D",2,0)
cross-reference is set to the admission number.
"^DD",115,115.01,13,1,1,"DT")
2930408
"^DD",115,115.01,13,21,0)
^^2^2^2911204^
"^DD",115,115.01,13,21,1,0)
This field indicates the Dietetic Ward on which the patient is currently
"^DD",115,115.01,13,21,2,0)
residing.
"^DD",115,115.01,13,"DT")
2930408
"^DD",115,115.01,14,0)
ROOM-BED^P405.4'^DG(405.4,^0;9^Q
"^DD",115,115.01,14,21,0)
^^2^2^2911204^
"^DD",115,115.01,14,21,1,0)
This field contains the free-text room-bed in which the patient is
"^DD",115,115.01,14,21,2,0)
currently residing.
"^DD",115,115.01,14,"DT")
2911023
"^DD",115,115.01,18,0)
DISCHARGE DATE/TIME^D^^0;14^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.01,18,21,0)
^^3^3^2911223^^
"^DD",115,115.01,18,21,1,0)
This is the date/time a discharge was processed. It may differ from the
"^DD",115,115.01,18,21,2,0)
date/time selected by the MAS clerk. It is used if the discharge is
"^DD",115,115.01,18,21,3,0)
deleted.
"^DD",115,115.01,18,"DT")
2911129
"^DD",115,115.01,20,0)
SUPPLEMENTAL FEEDING^115.07^^SF;0
"^DD",115,115.01,20,12)
Cannot select bulk nourishments
"^DD",115,115.01,20,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.01,20,21,0)
^^2^2^2910708^^^^
"^DD",115,115.01,20,21,1,0)
This multiple contains the various supplemental feeding orders
"^DD",115,115.01,20,21,2,0)
which have been entered for the patient.
"^DD",115,115.01,20,"DT")
2850604
"^DD",115,115.01,30,0)
STANDING ORDERS^115.08^^SP;0
"^DD",115,115.01,30,12)
Cannot select bulk nourishments
"^DD",115,115.01,30,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.01,30,21,0)
^.001^2^2^3051102^^^^
"^DD",115,115.01,30,21,1,0)
This field contains standing orders entered for the patient
"^DD",115,115.01,30,21,2,0)
during this admission.
"^DD",115,115.01,40,0)
TUBEFEEDING^115.04D^^TF;0
"^DD",115,115.01,40,21,0)
^.001^2^2^3070712^^^^
"^DD",115,115.01,40,21,1,0)
This multiple contains all tubefeeding orders entered during
"^DD",115,115.01,40,21,2,0)
this admission.
"^DD",115,115.01,50,0)
EARLY/LATE TRAY^115.05D^^EL;0
"^DD",115,115.01,50,21,0)
^.001^2^2^3030204^^^^
"^DD",115,115.01,50,21,1,0)
This multiple contains all early/late tray requests ordered
"^DD",115,115.01,50,21,2,0)
for this patient.
"^DD",115,115.01,80,0)
CONSULTATION^115.03IDA^^DR;0
"^DD",115,115.01,80,21,0)
^^2^2^2880909^^^
"^DD",115,115.01,80,21,1,0)
This multiple contains all of the dietetic consults ordered
"^DD",115,115.01,80,21,2,0)
during this admission.
"^DD",115,115.01,85,0)
ADDITIONAL ORDERS^115.06A^^OO;0
"^DD",115,115.01,85,21,0)
^.001^1^1^3021030^^^^
"^DD",115,115.01,85,21,1,0)
This multiple contains all Additional Orders entered during this admission.
"^DD",115,115.01,85,21,2,0)
admission.
"^DD",115,115.01,90,0)
Monitors^115.11^^MO;0
"^DD",115,115.01,99,0)
DATE/TIME TICKET LAST PRINTED^D^^0;15^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.01,99,21,0)
^^5^5^2950420^^^^
"^DD",115,115.01,99,21,1,0)
This is the date/time of the last Tray Ticket generated for this
"^DD",115,115.01,99,21,2,0)
patient.  It is used, when the user only want to print the ticket
"^DD",115,115.01,99,21,3,0)
for the patient when there is a diet order, supplemental feeding,
"^DD",115,115.01,99,21,4,0)
food preference, isolation, standing order, or location change after
"^DD",115,115.01,99,21,5,0)
this date/time.
"^DD",115,115.01,99,"DT")
2940926
"^DD",115,115.01,100,0)
DATE/TIME CARD LAST PRINTED^D^^0;16^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.01,100,21,0)
^^5^5^2950420^^^^
"^DD",115,115.01,100,21,1,0)
This is the date/time of the last diet card generated for this
"^DD",115,115.01,100,21,2,0)
patient.  It is used, when the user only want to print the card
"^DD",115,115.01,100,21,3,0)
for the patient when there is a diet order, supplemental feeding,
"^DD",115,115.01,100,21,4,0)
food preference, isolation, standing order, or location change after
"^DD",115,115.01,100,21,5,0)
this date/time.
"^DD",115,115.01,100,"DT")
2940926
"^DD",115,115.011,0)
NUTRITION ASSESSMENT SUB-FIELD^^87^66
"^DD",115,115.011,0,"DT")
3070808
"^DD",115,115.011,0,"ID",65)
W:$D(^("DI")) "   ",@("$P($P($C(59)_$S($D(^DD(115.011,65,0)):$P(^(0),U,3),1:0)_$E("_DIC_"Y,0),0),$C(59)_$P(^(""DI""),U,6)_"":"",2),$C(59),1)")
"^DD",115,115.011,0,"IX","B",115.011,.01)

"^DD",115,115.011,0,"NM","NUTRITION ASSESSMENT")

"^DD",115,115.011,0,"UP")
115
"^DD",115,115.011,.01,0)
NUTRITION ASSESSMENT^D^^0;1^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.011,.01,1,0)
^.1
"^DD",115,115.011,.01,1,1,0)
115.011^B
"^DD",115,115.011,.01,1,1,1)
S ^FHPT(DA(1),"N","B",$E(X,1,30),DA)=""
"^DD",115,115.011,.01,1,1,2)
K ^FHPT(DA(1),"N","B",$E(X,1,30),DA)
"^DD",115,115.011,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115,115.011,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NUTRITION ASSESSMENT field.
"^DD",115,115.011,.01,21,0)
^^2^2^2891107^^^
"^DD",115,115.011,.01,21,1,0)
This field contains the date the nutrition assessment was
"^DD",115,115.011,.01,21,2,0)
performed.
"^DD",115,115.011,.01,"DT")
2891107
"^DD",115,115.011,1,0)
SEX^RS^M:MALE;F:FEMALE;^0;2^Q
"^DD",115,115.011,1,21,0)
^^2^2^2891121^
"^DD",115,115.011,1,21,1,0)
This field contains a M or F corresponding to the sex of
"^DD",115,115.011,1,21,2,0)
the subject.
"^DD",115,115.011,1,"DT")
2890702
"^DD",115,115.011,2,0)
AGE^RNJ6,2^^0;3^K:+X'=X!(X>140)!(X<0)!(X?.E1"."3N.N) X
"^DD",115,115.011,2,3)
Type a Number between 0 and 140, 2 Decimal Digits
"^DD",115,115.011,2,21,0)
^^2^2^2891121^
"^DD",115,115.011,2,21,1,0)
This field contains the age, in years, of the subject at the
"^DD",115,115.011,2,21,2,0)
time of the assessment.
"^DD",115,115.011,2,"DT")
2890702
"^DD",115,115.011,3,0)
HEIGHT^NJ4,1^^0;4^K:+X'=X!(X>96)!(X<12)!(X?.E1"."2N.N) X
"^DD",115,115.011,3,3)
Type a Number between 12 and 96, 1 Decimal Digit
"^DD",115,115.011,3,21,0)
^^1^1^2920521^^^
"^DD",115,115.011,3,21,1,0)
This field contains the height, in inches, of the subject.
"^DD",115,115.011,3,"DT")
2890705
"^DD",115,115.011,4,0)
HEIGHT PARAMETERS^S^S:STATED;K:KNEE HEIGHT;^0;5^Q
"^DD",115,115.011,4,3)
Answer must be 1-2 characters in length.
"^DD",115,115.011,4,9)
@
"^DD",115,115.011,4,21,0)
^^2^2^2920520^^^
"^DD",115,115.011,4,21,1,0)
This field contains parameters relating to height; in particular,
"^DD",115,115.011,4,21,2,0)
an S would mean stated rather than measured.
"^DD",115,115.011,4,"DT")
2900411
"^DD",115,115.011,5,0)
WEIGHT^NJ3,0^^0;6^K:+X'=X!(X>750)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.011,5,3)
Type a Number between 0 and 750, 0 Decimal Digits
"^DD",115,115.011,5,21,0)
^^1^1^2900411^^
"^DD",115,115.011,5,21,1,0)
This field contains the weight, in pounds, of the subject.
"^DD",115,115.011,5,"DT")
2900411
"^DD",115,115.011,6,0)
WEIGHT PARAMETERS^S^A:ANTHROPOMETRIC;S:STATED;^0;7^Q
"^DD",115,115.011,6,3)
Answer must be 1 character in length.
"^DD",115,115.011,6,21,0)
^^2^2^2900411^^
"^DD",115,115.011,6,21,1,0)
This field contains parameters relating to weight; in particular,
"^DD",115,115.011,6,21,2,0)
an S would mean stated rather than measured.
"^DD",115,115.011,6,"DT")
2900411
"^DD",115,115.011,7,0)
DATE WEIGHT TAKEN^D^^0;8^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.011,7,21,0)
^^1^1^2891121^
"^DD",115,115.011,7,21,1,0)
This is the date the weight was determined.
"^DD",115,115.011,7,"DT")
2890705
"^DD",115,115.011,8,0)
USUAL WEIGHT^NJ3,0^^0;9^K:+X'=X!(X>750)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.011,8,3)
Type a Number between 0 and 750, 0 Decimal Digits
"^DD",115,115.011,8,21,0)
^^1^1^2900411^^
"^DD",115,115.011,8,21,1,0)
This is the usual weight, in pounds, of the subject.
"^DD",115,115.011,8,"DT")
2900411
"^DD",115,115.011,9,0)
IDEAL BODY WEIGHT^NJ3,0^^0;10^K:+X'=X!(X>750)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.011,9,3)
Type a Number between 0 and 750, 0 Decimal Digits
"^DD",115,115.011,9,21,0)
^^1^1^2900411^^
"^DD",115,115.011,9,21,1,0)
This is the ideal body weight, in pounds, of the subject.
"^DD",115,115.011,9,"DT")
2900411
"^DD",115,115.011,10,0)
FRAME SIZE^S^S:SMALL;M:MEDIUM;L:LARGE;^0;11^Q
"^DD",115,115.011,10,21,0)
^^2^2^2891121^
"^DD",115,115.011,10,21,1,0)
This is the frame size of the individual, expressed as Small,
"^DD",115,115.011,10,21,2,0)
Medium or Large.
"^DD",115,115.011,10,"DT")
2890705
"^DD",115,115.011,11,0)
AMPUTATION %^NJ4,1^^0;12^K:+X'=X!(X>50)!(X<0)!(X?.E1"."2N.N) X
"^DD",115,115.011,11,3)
Type a Number between 0 and 50, 1 Decimal Digit
"^DD",115,115.011,11,21,0)
^^2^2^2891121^
"^DD",115,115.011,11,21,1,0)
This is the percentage of total body weight missing due to
"^DD",115,115.011,11,21,2,0)
amputations.
"^DD",115,115.011,11,"DT")
2890705
"^DD",115,115.011,15,0)
KCAL REQUIRED^NJ5,0^^0;16^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.011,15,3)
Type a Number between 0 and 10000, 0 Decimal Digits
"^DD",115,115.011,15,21,0)
^^2^2^2891121^
"^DD",115,115.011,15,21,1,0)
This is the total energy needs of the patient expressed in
"^DD",115,115.011,15,21,2,0)
calories.
"^DD",115,115.011,15,"DT")
2890705
"^DD",115,115.011,16,0)
PROTEIN (GM) REQUIRED^NJ3,0^^0;17^K:+X'=X!(X>400)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.011,16,3)
Type a Number between 0 and 400, 0 Decimal Digits
"^DD",115,115.011,16,21,0)
^^1^1^2891121^
"^DD",115,115.011,16,21,1,0)
This is the protein requirements of the person.
"^DD",115,115.011,16,"DT")
2890705
"^DD",115,115.011,17,0)
FLUID (ML/DAY) REQUIRED^NJ5,0^^0;18^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.011,17,3)
Type a Number between 0 and 10000, 0 Decimal Digits
"^DD",115,115.011,17,21,0)
^^1^1^2891121^^
"^DD",115,115.011,17,21,1,0)
This is the fluid requirements, in ml/day, of the person.
"^DD",115,115.011,17,"DT")
2890705
"^DD",115,115.011,18,0)
RISK CATEGORY^P115.4'^FH(115.4,^0;19^Q
"^DD",115,115.011,18,21,0)
^^2^2^2891121^
"^DD",115,115.011,18,21,1,0)
This is a pointer to the Nutrition Status file (115.4) indicating
"^DD",115,115.011,18,21,2,0)
the current status of the patient for this assessment.
"^DD",115,115.011,18,"DT")
2890705
"^DD",115,115.011,19,0)
NUTRITION PROBLEM^P115.3'^FH(115.3,^0;20^Q
"^DD",115,115.011,19,21,0)
^^3^3^2891121^
"^DD",115,115.011,19,21,1,0)
This is a pointer to the Nutrition Classification file (115.3)
"^DD",115,115.011,19,21,2,0)
indicating the current classification of the patient for
"^DD",115,115.011,19,21,3,0)
this assessment.
"^DD",115,115.011,19,"DT")
2890705
"^DD",115,115.011,20,0)
APPEARANCE^F^^2;1^K:$L(X)>60!($L(X)<1) X
"^DD",115,115.011,20,3)
Answer must be 1-60 characters in length.
"^DD",115,115.011,20,21,0)
^^3^3^2900411^^
"^DD",115,115.011,20,21,1,0)
This field is used to store the a free-text description of the
"^DD",115,115.011,20,21,2,0)
appearance of the patient when such notation may be of importance
"^DD",115,115.011,20,21,3,0)
in understanding or treating the patient.
"^DD",115,115.011,20,"DT")
2900411
"^DD",115,115.011,21,0)
BODY MASS INDEX^NJ4,1^^0;21^K:+X'=X!(X>50)!(X<10)!(X?.E1"."2N.N) X
"^DD",115,115.011,21,3)
Type a Number between 10 and 50, 1 Decimal Digit
"^DD",115,115.011,21,21,0)
^^2^2^2900404^
"^DD",115,115.011,21,21,1,0)
This field contains the Body Mass Index calculated from the
"^DD",115,115.011,21,21,2,0)
height and weight.
"^DD",115,115.011,21,"DT")
2900404
"^DD",115,115.011,22,0)
BODY MASS INDEX %^NJ2,0^^0;22^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,22,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",115,115.011,22,21,0)
^^2^2^2910506^^
"^DD",115,115.011,22,21,1,0)
This field contains the percentile rank of the Body Mass Index
"^DD",115,115.011,22,21,2,0)
value.
"^DD",115,115.011,22,"DT")
2900404
"^DD",115,115.011,23,0)
NITROGEN BALANCE^NJ2,0^^0;25^K:+X'=X!(X>99)!(X<-99)!(X?.E1"."1N.N) X
"^DD",115,115.011,23,3)
Type a Number between -99 and 99, 0 Decimal Digits
"^DD",115,115.011,23,21,0)
^^2^2^2900625^
"^DD",115,115.011,23,21,1,0)
This field contains the value of the Nitrogen Balance calculated
"^DD",115,115.011,23,21,2,0)
during the assessment.
"^DD",115,115.011,23,"DT")
2900622
"^DD",115,115.011,40,0)
TRICEPS SKIN FOLD (MM)^NJ3,0^^1;1^K:+X'=X!(X>100)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,40,3)
Type a Number between 1 and 100, 0 Decimal Digits
"^DD",115,115.011,40,21,0)
^^1^1^2900411^^^
"^DD",115,115.011,40,21,1,0)
This is the triceps skin fold measurement in mm.
"^DD",115,115.011,40,"DT")
2900411
"^DD",115,115.011,41,0)
TRICEPS %^NJ2,0^^1;2^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,41,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",115,115.011,41,21,0)
^^1^1^2900411^^^
"^DD",115,115.011,41,21,1,0)
This is the percentile rank of the triceps skin fold measurement.
"^DD",115,115.011,41,"DT")
2900411
"^DD",115,115.011,42,0)
SUBSCAPULAR SKINFOLD (MM)^NJ3,0^^1;3^K:+X'=X!(X>100)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,42,3)
Type a Number between 1 and 100, 0 Decimal Digits
"^DD",115,115.011,42,21,0)
1^^1^1^2900411^
"^DD",115,115.011,42,21,1,0)
This is the subscapular skin fold measurement in mm.
"^DD",115,115.011,42,"DT")
2900411
"^DD",115,115.011,43,0)
SUBSCAPULAR %^NJ2,0^^1;4^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,43,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",115,115.011,43,21,0)
^^1^1^2900411^^
"^DD",115,115.011,43,21,1,0)
This is the percentile rank of the subscapular skin fold measurement.
"^DD",115,115.011,43,"DT")
2900411
"^DD",115,115.011,44,0)
ARM CIRCUMFERENCE (CM)^NJ5,1^^1;5^K:+X'=X!(X>100)!(X<5)!(X?.E1"."2N.N) X
"^DD",115,115.011,44,3)
Type a Number between 5 and 100, 1 Decimal Digit
"^DD",115,115.011,44,21,0)
^^1^1^2891121^
"^DD",115,115.011,44,21,1,0)
This is the arm circumference in cm.
"^DD",115,115.011,44,"DT")
2891107
"^DD",115,115.011,45,0)
ARM CIRCUMFERENCE %^NJ2,0^^1;6^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,45,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",115,115.011,45,21,0)
^^1^1^2900411^^
"^DD",115,115.011,45,21,1,0)
This is the percentile rank of the arm circumference.
"^DD",115,115.011,45,"DT")
2900411
"^DD",115,115.011,46,0)
CALF CIRCUMFERENCE (CM)^NJ5,1^^1;7^K:+X'=X!(X>250)!(X<10)!(X?.E1"."2N.N) X
"^DD",115,115.011,46,3)
Type a Number between 10 and 250, 1 Decimal Digit
"^DD",115,115.011,46,21,0)
^^1^1^2891121^
"^DD",115,115.011,46,21,1,0)
This is the calf circumference in cm.
"^DD",115,115.011,46,"DT")
2891107
"^DD",115,115.011,47,0)
CALF CIRCUMFERENCE %^NJ2,0^^1;8^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,47,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",115,115.011,47,21,0)
^^1^1^2900411^^
"^DD",115,115.011,47,21,1,0)
This is the percentile rank of the calf circumference.
"^DD",115,115.011,47,"DT")
2900411
"^DD",115,115.011,48,0)
BONE-FREE AMA  (CM2)^NJ5,1^^1;9^K:+X'=X!(X>100)!(X<5)!(X?.E1"."2N.N) X
"^DD",115,115.011,48,3)
Type a Number between 5 and 100, 1 Decimal Digit
"^DD",115,115.011,48,21,0)
^^1^1^2900411^^
"^DD",115,115.011,48,21,1,0)
This is the calculated bone-free arm muscle area in sq. cm.
"^DD",115,115.011,48,"DT")
2900411
"^DD",115,115.011,49,0)
BONE-FREE AMA %^NJ2,0^^1;10^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.011,49,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",115,115.011,49,21,0)
^^1^1^2900411^^
"^DD",115,115.011,49,21,1,0)
This is the percentile rank of the bone-free AMA.
"^DD",115,115.011,49,"DT")
2900411
"^DD",115,115.011,50,0)
WCCM^NJ3,0^^1;11^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1.N) X
"^DD",115,115.011,50,3)
Type a number between 0 and 999, 0 Decimal Digits
"^DD",115,115.011,50,"DT")
3070215
"^DD",115,115.011,51,0)
CIBW^F^^1;12^K:$L(X)>1!($L(X)<1) X
"^DD",115,115.011,51,3)
Answer must be 1 character in length
"^DD",115,115.011,51,"DT")
3070215
"^DD",115,115.011,52,0)
CERBO^NJ1,0^^1;13^K:+X'=X!(X>2)!(X<0)!(X?.E1"."1.N) X
"^DD",115,115.011,52,3)
Type a number between 0 and 2, 0 Decimal Digits
"^DD",115,115.011,52,"DT")
3070215
"^DD",115,115.011,53,0)
CENB^NJ1,0^^1;14^K:+X'=X!(X>2)!(X<0)!(X?.E1"."1.N) X
"^DD",115,115.011,53,3)
Type a number between 0 and 2, 0 Decimal Digits
"^DD",115,115.011,53,"DT")
3070215
"^DD",115,115.011,54,0)
PCTB^NJ1,0^^1;15^K:+X'=X!(X>3)!(X<0)!(X?.E1"."1.N) X
"^DD",115,115.011,54,3)
Type a number between 0 and 3, 0 Decimal Digits
"^DD",115,115.011,54,"DT")
3070215
"^DD",115,115.011,55,0)
SEF^NJ4,2^^1;16^K:+X'=X!(X>2.5)!(X<.7)!(X?.E1"."3.N) X
"^DD",115,115.011,55,3)
Type a number between .7 and 2.5, 2 Decimal Digits
"^DD",115,115.011,55,"DT")
3070215
"^DD",115,115.011,56,0)
CFRB^NJ1,0^^1;17^K:+X'=X!(X>7)!(X<0)!(X?.E1"."1.N) X
"^DD",115,115.011,56,3)
Type a number between 0 and 7, 0 Decimal Digits
"^DD",115,115.011,56,"DT")
3070215
"^DD",115,115.011,57,0)
CFRBO^NJ1,0^^1;18^K:+X'=X!(X>2)!(X<0)!(X?.E1"."1.N) X
"^DD",115,115.011,57,3)
Type a number between 0 and 2, 0 Decimal Digits
"^DD",115,115.011,57,"DT")
3070215
"^DD",115,115.011,58,0)
CPRBO^NJ1,0^^1;19^K:+X'=X!(X>2)!(X<0)!(X?.E1"."1.N) X
"^DD",115,115.011,58,3)
Type a number between 0 and 2, 0 Decimal Digits
"^DD",115,115.011,58,"DT")
3070215
"^DD",115,115.011,59,0)
EKKG^NJ3,0^^1;20^K:+X'=X!(X>110)!(X<10)!(X?.E1"."1.N) X
"^DD",115,115.011,59,3)
Type a number between 10 and 110, 0 Decimal Digits
"^DD",115,115.011,59,"DT")
3070320
"^DD",115,115.011,60,0)
DIAGNOSIS FROM PROBLEM LIST^F^^DI;1^K:$L(X)>45!($L(X)<3) X
"^DD",115,115.011,60,3)
Answer must be 3-45 characters in length
"^DD",115,115.011,60,21,0)
^^1^1^3070110^
"^DD",115,115.011,60,21,1,0)
This is a diagnosis selected from the Problem List package for a patient.
"^DD",115,115.011,60,"DT")
3070110
"^DD",115,115.011,61,0)
DATE ENTERED IN PROBLEM LIST^D^^DI;2^S %DT="E" D ^%DT S X=Y K:X<1 X
"^DD",115,115.011,61,3)
(No range limit on date)
"^DD",115,115.011,61,21,0)
^^1^1^3070116^
"^DD",115,115.011,61,21,1,0)
This is the date when a diagnosis from Problem List was entered.
"^DD",115,115.011,61,"DT")
3070116
"^DD",115,115.011,62,0)
DIAGNOSIS ENTERED BY NFS^F^^DI;3^K:$L(X)>45!($L(X)<3) X
"^DD",115,115.011,62,3)
Answer must be 3-45 characters in length
"^DD",115,115.011,62,21,0)
^^1^1^3070110^
"^DD",115,115.011,62,21,1,0)
This is a diagnosis entered by NFS personnel.
"^DD",115,115.011,62,"DT")
3070110
"^DD",115,115.011,63,0)
NFS DIAGNOSIS DATE^D^^DI;4^S %DT="E" D ^%DT S X=Y K:X<1 X
"^DD",115,115.011,63,3)
(No range limit on date)
"^DD",115,115.011,63,21,0)
^^1^1^3070110^
"^DD",115,115.011,63,21,1,0)
This is the date when a NFS diagnosis was entered by NFS personnel.
"^DD",115,115.011,63,"DT")
3070110
"^DD",115,115.011,64,0)
ASSESSMENT FOLLOW-UP DATE^D^^DI;5^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.011,64,1,0)
^.1
"^DD",115,115.011,64,1,1,0)
115^E
"^DD",115,115.011,64,1,1,1)
S ^FHPT("E",$E(X,1,30),DA(1),DA)=""
"^DD",115,115.011,64,1,1,2)
K ^FHPT("E",$E(X,1,30),DA(1),DA)
"^DD",115,115.011,64,1,1,"%D",0)
^^2^2^3070301^
"^DD",115,115.011,64,1,1,"%D",1,0)
This cross-reference is being used in the processing of an Assessment 
"^DD",115,115.011,64,1,1,"%D",2,0)
Alert for clinicians in a particular Nutrition Location.
"^DD",115,115.011,64,1,1,"DT")
3070301
"^DD",115,115.011,64,3)
(No range limit on date)
"^DD",115,115.011,64,21,0)
^^2^2^3070808^
"^DD",115,115.011,64,21,1,0)
This is a date that a patient's assessment needs to be checked by a 
"^DD",115,115.011,64,21,2,0)
dietitian or other provider.
"^DD",115,115.011,64,"DT")
3070808
"^DD",115,115.011,65,0)
ASSESSMENT STATUS^S^C:COMPLETED;S:SIGNED;W:WORK IN PROGRESS;^DI;6^Q
"^DD",115,115.011,65,21,0)
^^4^4^3070116^
"^DD",115,115.011,65,21,1,0)
This is a status field for nutrition assessment.  When the status is 
"^DD",115,115.011,65,21,2,0)
completed, a progress note will be created in TIU and eventually visible 
"^DD",115,115.011,65,21,3,0)
in CPRS. Once it is signed in CPRS, the assessment status will be updated 
"^DD",115,115.011,65,21,4,0)
to SIGNED.
"^DD",115,115.011,65,"DT")
3070216
"^DD",115,115.011,66,0)
ASSESSMENT DIET^F^^DI;7^K:$L(X)>15!($L(X)<1) X
"^DD",115,115.011,66,3)
Answer must be 1-15 characters in length
"^DD",115,115.011,66,21,0)
^^1^1^3070208^
"^DD",115,115.011,66,21,1,0)
Patient diet at the time the Nutrition Assessment was created.
"^DD",115,115.011,66,"DT")
3070208
"^DD",115,115.011,67,0)
ASSESSMENT TF DATE^D^^DI;8^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.011,67,3)

"^DD",115,115.011,67,21,0)
^^2^2^3070712^
"^DD",115,115.011,67,21,1,0)
Patient's Tubefeeding Order Date/Time at
"^DD",115,115.011,67,21,2,0)
the time the Nutrition Assessment was created.
"^DD",115,115.011,67,"DT")
3070712
"^DD",115,115.011,67.1,0)
ASSESSMENT TF PRODUCT^115.031P^^TF;0
"^DD",115,115.011,67.2,0)
ASSESSMENT TF COMMENT^F^^4;1^K:$L(X)>160!($L(X)<1) X
"^DD",115,115.011,67.2,3)
Answer must be 1-160 characters in length.
"^DD",115,115.011,67.2,21,0)
^^2^2^3070712^
"^DD",115,115.011,67.2,21,1,0)
Patient's Tubefeeding Comment at the time the Nutrition Assessment was 
"^DD",115,115.011,67.2,21,2,0)
created.
"^DD",115,115.011,67.2,"DT")
3070712
"^DD",115,115.011,67.3,0)
ASSESSMENT TF TOTAL ML'S^NJ5,0^^DI;10^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.011,67.3,3)
Type a Number between 0 and 10000, 0 Decimal Digits
"^DD",115,115.011,67.3,21,0)
^^2^2^3070712^
"^DD",115,115.011,67.3,21,1,0)
Patient's Tubefeeding Total ML's at the time the Nutrition Assessment
"^DD",115,115.011,67.3,21,2,0)
was created.
"^DD",115,115.011,67.3,"DT")
3070712
"^DD",115,115.011,67.4,0)
ASSESSMENT TF TOTAL KCALS/DAY^NJ5,0^^DI;11^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.011,67.4,3)
Type a Number between 0 and 10000, 0 Decimal Digits
"^DD",115,115.011,67.4,21,0)
^^2^2^3070712^
"^DD",115,115.011,67.4,21,1,0)
Patient's Tubefeeding Total KCALS/Day at the time the
"^DD",115,115.011,67.4,21,2,0)
Nutrition Assessment was created.
"^DD",115,115.011,67.4,"DT")
3070712
"^DD",115,115.011,68,0)
ALERT DATE^D^^DI;9^S %DT="E" D ^%DT S X=Y K:X<1 X
"^DD",115,115.011,68,3)
(No range limit on date)
"^DD",115,115.011,68,21,0)
^^1^1^3070314^
"^DD",115,115.011,68,21,1,0)
This is the last date an assessment alert was created.
"^DD",115,115.011,68,"DT")
3070314
"^DD",115,115.011,70,0)
LAB DATA^115.021^^L;0
"^DD",115,115.011,70,21,0)
^^2^2^2891121^
"^DD",115,115.011,70,21,1,0)
This multiple contains laboratory data available for the
"^DD",115,115.011,70,21,2,0)
nutrition assessment.
"^DD",115,115.011,71,0)
COMMENTS^115.1171^^X;0
"^DD",115,115.011,71,21,0)
^^1^1^3070116^
"^DD",115,115.011,71,21,1,0)
This multiple contains comments relating to the assessment.
"^DD",115,115.011,80,0)
PT CONFINED IN BED^S^Y:YES;N:NO;^3;1^Q
"^DD",115,115.011,80,"DT")
3070216
"^DD",115,115.011,81,0)
ENERGY CAL^F^^3;2^K:$L(X)>30!($L(X)<1) X
"^DD",115,115.011,81,3)
Answer must be 1-30 characters in length
"^DD",115,115.011,81,"DT")
3070227
"^DD",115,115.011,82,0)
PROTEIN CAL^F^^3;3^K:$L(X)>30!($L(X)<1) X
"^DD",115,115.011,82,3)
Answer must be 1-30 characters in length
"^DD",115,115.011,82,"DT")
3070227
"^DD",115,115.011,83,0)
NFS PROBLEM^F^^3;4^K:$L(X)>30!($L(X)<1) X
"^DD",115,115.011,83,3)
Answer must be 1-30 characters in length
"^DD",115,115.011,83,"DT")
3070216
"^DD",115,115.011,84,0)
FOOD/DRUG INTERACTION^S^Y:YES;N:NO;^3;5^Q
"^DD",115,115.011,84,"DT")
3070216
"^DD",115,115.011,85,0)
FOOD/DRUG COMMENT^F^^3;6^K:$L(X)>40!($L(X)<3) X
"^DD",115,115.011,85,3)
Answer must be 3-40 characters in length
"^DD",115,115.011,85,"DT")
3070726
"^DD",115,115.011,86,0)
PROTEIN LEVEL^NJ4,2^^3;7^K:+X'=X!(X>4)!(X<0)!(X?.E1"."3.N) X
"^DD",115,115.011,86,3)
Type a number between 0 and 4, 2 Decimal Digits
"^DD",115,115.011,86,21,0)
^^1^1^3070726^
"^DD",115,115.011,86,21,1,0)
This is a protein level used in calculation of protein requirements.
"^DD",115,115.011,86,"DT")
3070726
"^DD",115,115.011,87,0)
SPINAL CORD^S^P:Paraplegic;Q:Quadriplegic;^3;8^Q
"^DD",115,115.011,87,21,0)
^^1^1^3070726^
"^DD",115,115.011,87,21,1,0)
This is a spinal cord code for Paraplegic and Quadriplegic.
"^DD",115,115.011,87,"DT")
3070726
"^DD",115,115.011,101,0)
ENTERING CLINICIAN^RP200'^VA(200,^0;23^Q
"^DD",115,115.011,101,21,0)
^^2^2^2891121^
"^DD",115,115.011,101,21,1,0)
This field points to the person entering the nutrition
"^DD",115,115.011,101,21,2,0)
assessment.
"^DD",115,115.011,101,"DT")
2891108
"^DD",115,115.011,102,0)
DATE/TIME ENTERED^RD^^0;24^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.011,102,21,0)
^^2^2^2891121^
"^DD",115,115.011,102,21,1,0)
This field contains the date/time the assessment was actually
"^DD",115,115.011,102,21,2,0)
entered.
"^DD",115,115.011,102,"DT")
2891108
"^DD",115,115.012,0)
NUTRITION STATUS SUB-FIELD^^5^6
"^DD",115,115.012,0,"DT")
3031014
"^DD",115,115.012,0,"IX","B",115.012,.01)

"^DD",115,115.012,0,"NM","NUTRITION STATUS")

"^DD",115,115.012,0,"UP")
115
"^DD",115,115.012,.01,0)
STATUS DATE/TIME^DX^^0;1^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X I $D(X) S DINUM=9999999-X
"^DD",115,115.012,.01,1,0)
^.1
"^DD",115,115.012,.01,1,1,0)
115.012^B
"^DD",115,115.012,.01,1,1,1)
S ^FHPT(DA(1),"S","B",$E(X,1,30),DA)=""
"^DD",115,115.012,.01,1,1,2)
K ^FHPT(DA(1),"S","B",$E(X,1,30),DA)
"^DD",115,115.012,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115,115.012,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the STATUS DATE/TIME field.
"^DD",115,115.012,.01,21,0)
^^2^2^2891113^
"^DD",115,115.012,.01,21,1,0)
This field contains the date/time that a nutrition status
"^DD",115,115.012,.01,21,2,0)
assessment was entered.
"^DD",115,115.012,.01,"DT")
2891113
"^DD",115,115.012,1,0)
STATUS^RP115.4'^FH(115.4,^0;2^Q
"^DD",115,115.012,1,21,0)
^^2^2^2891121^^
"^DD",115,115.012,1,21,1,0)
This is a pointer to the Nutrition Status file (115.4) indicating
"^DD",115,115.012,1,21,2,0)
the current status of this patient.
"^DD",115,115.012,1,"DT")
2891113
"^DD",115,115.012,2,0)
ENTRY CLERK^RP200'^VA(200,^0;3^Q
"^DD",115,115.012,2,21,0)
^^2^2^2891121^^
"^DD",115,115.012,2,21,1,0)
This is a pointer indicating the person actually making the entry
"^DD",115,115.012,2,21,2,0)
of the status.
"^DD",115,115.012,2,"DT")
2891113
"^DD",115,115.012,3,0)
LAST REVIEW DATE/TIME^D^^0;4^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.012,3,21,0)
^^2^2^2911204^
"^DD",115,115.012,3,21,1,0)
This is the date/time that this Nutrition Status was last reviewed.
"^DD",115,115.012,3,21,2,0)
Further reviews are based upon this last review date/time.
"^DD",115,115.012,3,"DT")
2910430
"^DD",115,115.012,4,0)
REVIEW CLERK^P200'^VA(200,^0;5^Q
"^DD",115,115.012,4,21,0)
^^1^1^2911204^
"^DD",115,115.012,4,21,1,0)
This is a pointer to File 200 of the person entering the review.
"^DD",115,115.012,4,"DT")
2910430
"^DD",115,115.012,5,0)
DIETETIC WARD^P119.6'^FH(119.6,^0;6^Q
"^DD",115,115.012,5,21,0)
^^2^2^2921107^
"^DD",115,115.012,5,21,1,0)
This field is a pointer to the Dietetic Ward on which the patient
"^DD",115,115.012,5,21,2,0)
resided when the Nutrition Status was entered.
"^DD",115,115.012,5,"DT")
2920826
"^DD",115,115.016,0)
RECURRING MEALS SUB-FIELD^^2.5^38
"^DD",115,115.016,0,"DT")
3060720
"^DD",115,115.016,0,"IX","B",115.016,.01)

"^DD",115,115.016,0,"IX","C",115.016,5)

"^DD",115,115.016,0,"NM","RECURRING MEALS")

"^DD",115,115.016,0,"UP")
115
"^DD",115,115.016,.01,0)
RECURRING MEAL DATE/TIME^MDX^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.016,.01,1,0)
^.1
"^DD",115,115.016,.01,1,1,0)
115.016^B
"^DD",115,115.016,.01,1,1,1)
S ^FHPT(DA(1),"OP","B",$E(X,1,30),DA)=""
"^DD",115,115.016,.01,1,1,2)
K ^FHPT(DA(1),"OP","B",$E(X,1,30),DA)
"^DD",115,115.016,.01,1,2,0)
115^OP^MUMPS
"^DD",115,115.016,.01,1,2,1)
S ^FHPT("OP",DA(1),DA)=""
"^DD",115,115.016,.01,1,2,2)
K ^FHPT("OP",DA(1),DA)
"^DD",115,115.016,.01,1,2,"DT")
3030228
"^DD",115,115.016,.01,1,3,0)
115^RM
"^DD",115,115.016,.01,1,3,1)
S ^FHPT("RM",$E(X,1,30),DA(1),DA)=""
"^DD",115,115.016,.01,1,3,2)
K ^FHPT("RM",$E(X,1,30),DA(1),DA)
"^DD",115,115.016,.01,1,3,"%D",0)
^.101^1^1^3041215^^
"^DD",115,115.016,.01,1,3,"%D",1,0)
Cross reference the whole file by recurring meals date.
"^DD",115,115.016,.01,1,3,"DT")
3030702
"^DD",115,115.016,.01,21,0)
^.001^1^1^3040429^^^^
"^DD",115,115.016,.01,21,1,0)
This field will contain the date of the recurring meal.
"^DD",115,115.016,.01,"DT")
3040429
"^DD",115,115.016,.05,0)
RECURRING OE/RR ORDER^P100'^OR(100,^0;12^Q
"^DD",115,115.016,.05,21,0)
^^2^2^3031202^
"^DD",115,115.016,.05,21,1,0)
This field contains a pointer to the OE/RR file order corresponding to this
"^DD",115,115.016,.05,21,2,0)
order.
"^DD",115,115.016,.05,"DT")
3031202
"^DD",115,115.016,1,0)
DIET^P111'X^FH(111,^0;2^Q
"^DD",115,115.016,1,21,0)
^.001^3^3^3030403^^^^
"^DD",115,115.016,1,21,1,0)
This is the DIET ordered for this meal plan.  It contains a pointer to the
"^DD",115,115.016,1,21,2,0)
DIETS (#111) file.  It may contain any one of the 5 diets selected in the
"^DD",115,115.016,1,21,3,0)
Recurring Meals Diet Selection (1-5) site parameter.
"^DD",115,115.016,1,"DT")
3030224
"^DD",115,115.016,2,0)
OUTPATIENT LOCATION^P119.6'^FH(119.6,^0;3^Q
"^DD",115,115.016,2,1,0)
^.1
"^DD",115,115.016,2,1,1,0)
115^C
"^DD",115,115.016,2,1,1,1)
S ^FHPT("C",$E(X,1,30),DA(1),DA)=""
"^DD",115,115.016,2,1,1,2)
K ^FHPT("C",$E(X,1,30),DA(1),DA)
"^DD",115,115.016,2,1,1,"DT")
3030327
"^DD",115,115.016,2,21,0)
^.001^1^1^3030225^^^
"^DD",115,115.016,2,21,1,0)
Pointer to file #119.6 to store the location for this meal.
"^DD",115,115.016,2,"DT")
3030327
"^DD",115,115.016,2.5,0)
ROOM-BED^P405.4'^DG(405.4,^0;18^Q
"^DD",115,115.016,2.5,21,0)
^^2^2^3060720^
"^DD",115,115.016,2.5,21,1,0)
This field will store the ROOM and BED # for the outpatient recurring meal
"^DD",115,115.016,2.5,21,2,0)
being ordered.
"^DD",115,115.016,2.5,"DT")
3060720
"^DD",115,115.016,3,0)
MEAL^S^B:Breakfast;N:Noon;E:Evening;^0;4^Q
"^DD",115,115.016,3,21,0)
^.001^1^1^3030527^^^^
"^DD",115,115.016,3,21,1,0)
This field indicated which meal(s) the recurring meal is ordered for.
"^DD",115,115.016,3,"DT")
3030527
"^DD",115,115.016,4,0)
ZZZDELETE -> BAGGED MEAL^S^Y:Yes;N:No;^0;5^Q
"^DD",115,115.016,4,21,0)
^.001^1^1^3050407^^
"^DD",115,115.016,4,21,1,0)
This field indicates whether or not a bagged meal is desired.
"^DD",115,115.016,4,"DT")
3050407
"^DD",115,115.016,5,0)
MEAL PLAN ORDER NUMBER^NJ3,0^^0;6^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.016,5,1,0)
^.1
"^DD",115,115.016,5,1,1,0)
115.016^C
"^DD",115,115.016,5,1,1,1)
S ^FHPT(DA(1),"OP","C",$E(X,1,30),DA)=""
"^DD",115,115.016,5,1,1,2)
K ^FHPT(DA(1),"OP","C",$E(X,1,30),DA)
"^DD",115,115.016,5,1,1,"%D",0)
^^2^2^3030325^
"^DD",115,115.016,5,1,1,"%D",1,0)
This cross-reference will group together the meal plan dates for each
"^DD",115,115.016,5,1,1,"%D",2,0)
meal plan order if the patient has more than one meal plan.
"^DD",115,115.016,5,1,1,"DT")
3030325
"^DD",115,115.016,5,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",115,115.016,5,21,0)
^.001^2^2^3030416^^
"^DD",115,115.016,5,21,1,0)
This field will be used to tie a meal plan together and distinguish it from
"^DD",115,115.016,5,21,2,0)
other meal plans the person may have.
"^DD",115,115.016,5,"DT")
3030416
"^DD",115,115.016,6,0)
DIET1^P111'^FH(111,^0;7^Q
"^DD",115,115.016,6,21,0)
^.001^2^2^3030324^^
"^DD",115,115.016,6,21,1,0)
This field will store the first of the diet selections for outpatients
"^DD",115,115.016,6,21,2,0)
who are allowed to have up to 5 diets.
"^DD",115,115.016,6,"DT")
3030324
"^DD",115,115.016,7,0)
DIET2^P111'^FH(111,^0;8^Q
"^DD",115,115.016,7,21,0)
^^2^2^3030220^
"^DD",115,115.016,7,21,1,0)
This field will store the second of the diet selections for outpatients
"^DD",115,115.016,7,21,2,0)
who are allowed to have up to 5 diets.
"^DD",115,115.016,7,"DT")
3030324
"^DD",115,115.016,8,0)
DIET3^P111'^FH(111,^0;9^Q
"^DD",115,115.016,8,21,0)
^^2^2^3030220^
"^DD",115,115.016,8,21,1,0)
This field will store the third of the diet selections for outpatients
"^DD",115,115.016,8,21,2,0)
who are allowed to have up to 5 diets.
"^DD",115,115.016,8,"DT")
3030324
"^DD",115,115.016,9,0)
DIET4^P111'^FH(111,^0;10^Q
"^DD",115,115.016,9,21,0)
^^2^2^3030220^
"^DD",115,115.016,9,21,1,0)
This field will store the fourth of the diet selections for outpatients
"^DD",115,115.016,9,21,2,0)
who are allowed to have up to 5 diets.
"^DD",115,115.016,9,"DT")
3030324
"^DD",115,115.016,10,0)
DIET5^P111'^FH(111,^0;11^Q
"^DD",115,115.016,10,21,0)
^^2^2^3030220^
"^DD",115,115.016,10,21,1,0)
This field will store the fifth of the diet selections for outpatients
"^DD",115,115.016,10,21,2,0)
who are allowed to have up to 5 diets.
"^DD",115,115.016,10,"DT")
3030324
"^DD",115,115.016,11,0)
ADDITIONAL ORDERS TEXT^F^^1;1^K:$L(X)>160!($L(X)<1) X
"^DD",115,115.016,11,3)
Answer must be 1-160 characters in length.
"^DD",115,115.016,11,21,0)
^^1^1^3030520^
"^DD",115,115.016,11,21,1,0)
This field stores the text of the additional order.
"^DD",115,115.016,11,"DT")
3030520
"^DD",115,115.016,12,0)
ADDITIONAL ORDERS CLERK^P200'^VA(200,^1;2^Q
"^DD",115,115.016,12,21,0)
^.001^1^1^3050630^^
"^DD",115,115.016,12,21,1,0)
This field stores the clerk who entered the additional order.
"^DD",115,115.016,12,"DT")
3030520
"^DD",115,115.016,13,0)
ADDITIONAL ORDERS DATE/TIME^D^^1;3^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.016,13,21,0)
^^1^1^3030520^
"^DD",115,115.016,13,21,1,0)
This field stores the date/time the additional order was entered.
"^DD",115,115.016,13,"DT")
3030520
"^DD",115,115.016,13.5,0)
ADDITIONAL ORDERS OE/RR ORDER^P100'^OR(100,^1;4^Q
"^DD",115,115.016,13.5,21,0)
^^2^2^3031202^
"^DD",115,115.016,13.5,21,1,0)
This field contains a pointer to the OE/RR file order corresponding to this
"^DD",115,115.016,13.5,21,2,0)
order.
"^DD",115,115.016,13.5,"DT")
3031202
"^DD",115,115.016,13.6,0)
ADDITIONAL ORDERS STATUS^S^C:Cancelled;O:Ordered;^1;5^Q
"^DD",115,115.016,13.6,21,0)
^.001^2^2^3040429^^
"^DD",115,115.016,13.6,21,1,0)
Additional orders which are cancelled will be flagged by setting this
"^DD",115,115.016,13.6,21,2,0)
field to C rather than deleting entries from the file.
"^DD",115,115.016,13.6,"DT")
3040429
"^DD",115,115.016,14,0)
EARLY/LATE TRAY TIME^F^^2;1^K:$L(X)>10!($L(X)<1) X
"^DD",115,115.016,14,3)
Answer must be 1-10 characters in length.
"^DD",115,115.016,14,21,0)
^^1^1^3030522^
"^DD",115,115.016,14,21,1,0)
This field will store the time for the early/late tray.
"^DD",115,115.016,14,"DT")
3030522
"^DD",115,115.016,15,0)
EARLY/LATE TRAY BAGGED MEAL^S^N:NO;Y:YES;^2;2^Q
"^DD",115,115.016,15,21,0)
^^1^1^3030522^
"^DD",115,115.016,15,21,1,0)
This field will store whether or not the early/late tray is a bagged meal.
"^DD",115,115.016,15,"DT")
3030522
"^DD",115,115.016,16,0)
EARLY/LATE TRAY CLERK^P200'^VA(200,^2;3^Q
"^DD",115,115.016,16,21,0)
^^1^1^3030522^
"^DD",115,115.016,16,21,1,0)
This field will store the person who entered the early/late tray.
"^DD",115,115.016,16,"DT")
3030522
"^DD",115,115.016,17,0)
EARLY/LATE TRAY ENTRY DATE^D^^2;4^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.016,17,21,0)
^.001^1^1^3060720^^
"^DD",115,115.016,17,21,1,0)
This field will store the date/time the early/late tray was entered.
"^DD",115,115.016,17,"DT")
3030522
"^DD",115,115.016,17.5,0)
EARLY/LATE TRAY OE/RR ORDER^P100'^OR(100,^2;5^Q
"^DD",115,115.016,17.5,21,0)
^^2^2^3031202^
"^DD",115,115.016,17.5,21,1,0)
This field contains a pointer to the OE/RR file order corresponding to this
"^DD",115,115.016,17.5,21,2,0)
order.
"^DD",115,115.016,17.5,"DT")
3031202
"^DD",115,115.016,17.6,0)
EARLY/LATE TRAY STATUS^S^C:Cancelled;O:Ordered;^2;6^Q
"^DD",115,115.016,17.6,21,0)
^^2^2^3040429^
"^DD",115,115.016,17.6,21,1,0)
Early/Late trays which are cancelled will be flagged by setting this
"^DD",115,115.016,17.6,21,2,0)
field to C rather than deleting entries from the file.
"^DD",115,115.016,17.6,"DT")
3040429
"^DD",115,115.016,18,0)
TUBEFEEDING COMMENT^F^^3;1^K:$L(X)>160!($L(X)<1) X
"^DD",115,115.016,18,3)
Answer must be 1-160 characters in length.
"^DD",115,115.016,18,21,0)
^^1^1^3030606^
"^DD",115,115.016,18,21,1,0)
This field stores the tubefeeding comment(s) for the recurring meal.
"^DD",115,115.016,18,"DT")
3030606
"^DD",115,115.016,19,0)
TUBEFEEDING PRODUCT^115.1619P^^TF;0
"^DD",115,115.016,19,21,0)
^.001^1^1^3051102^^^
"^DD",115,115.016,19,21,1,0)
This multiple stores the tubefeeding product data for the recurring meal.
"^DD",115,115.016,20,0)
TUBEFEEDING TOTAL ML'S^NJ4,0^^3;2^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.016,20,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.016,20,21,0)
^^2^2^3050422^
"^DD",115,115.016,20,21,1,0)
This field stores the total ml's of the tubefeeding for the recurring 
"^DD",115,115.016,20,21,2,0)
meal.
"^DD",115,115.016,20,"DT")
3050422
"^DD",115,115.016,21,0)
TUBEFEEDING TOTAL KCALS/DAY^NJ4,0^^3;3^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.016,21,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.016,21,21,0)
^^1^1^3030606^
"^DD",115,115.016,21,21,1,0)
This field stores the total kcals/day of the tubefeeding for the recurring meal.
"^DD",115,115.016,21,"DT")
3030606
"^DD",115,115.016,21.5,0)
TUBEFEEDING OE/RR ORDER^P100'^OR(100,^3;4^Q
"^DD",115,115.016,21.5,21,0)
^^2^2^3031202^
"^DD",115,115.016,21.5,21,1,0)
This field contains a pointer to the OE/RR file order corresponding to this
"^DD",115,115.016,21.5,21,2,0)
order.
"^DD",115,115.016,21.5,"DT")
3031202
"^DD",115,115.016,21.6,0)
TUBEFEEDING STATUS^S^C:Cancelled;O:Ordered;^3;5^Q
"^DD",115,115.016,21.6,21,0)
^^2^2^3040429^
"^DD",115,115.016,21.6,21,1,0)
Tubefeedings which are cancelled will be flagged by setting this
"^DD",115,115.016,21.6,21,2,0)
field to C rather than deleting entries from the file.
"^DD",115,115.016,21.6,"DT")
3040429
"^DD",115,115.016,21.7,0)
TUBEFEEDING CLERK^P200'^VA(200,^3;6^Q
"^DD",115,115.016,21.7,21,0)
^^1^1^3050630^
"^DD",115,115.016,21.7,21,1,0)
This field stores the clerk who entered the tubefeeding order.
"^DD",115,115.016,21.7,"DT")
3050630
"^DD",115,115.016,22,0)
DATE/TIME TICKET LAST PRINTED^D^^0;13^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.016,22,21,0)
^^2^2^3040224^
"^DD",115,115.016,22,21,1,0)
Stores the last date and time a tray ticket was printed for this
"^DD",115,115.016,22,21,2,0)
outpatient meal.
"^DD",115,115.016,22,"DT")
3040224
"^DD",115,115.016,23,0)
DATE/TIME CARD LAST PRINTED^D^^0;14^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.016,23,21,0)
^^2^2^3040224^
"^DD",115,115.016,23,21,1,0)
Stores the last date and time a diet card was printed for this
"^DD",115,115.016,23,21,2,0)
outpatient meal.
"^DD",115,115.016,23,"DT")
3040224
"^DD",115,115.016,24,0)
RECURRING MEAL STATUS^S^C:Cancelled;O:Ordered;^0;15^Q
"^DD",115,115.016,24,21,0)
^.001^2^2^3050630^^
"^DD",115,115.016,24,21,1,0)
Recurring meals which are cancelled will be flagged by setting this
"^DD",115,115.016,24,21,2,0)
field to C rather than deleting entries from the file.
"^DD",115,115.016,24,"DT")
3050630
"^DD",115,115.016,24.5,0)
RECURRING MEAL CLERK^P200'^VA(200,^0;17^Q
"^DD",115,115.016,24.5,21,0)
^^1^1^3050630^
"^DD",115,115.016,24.5,21,1,0)
This field stores the clerk who entered the recurring meal order.
"^DD",115,115.016,24.5,"DT")
3050630
"^DD",115,115.016,25,0)
DATE/TIME RM LAST EDITED^D^^0;16^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.016,25,21,0)
^^2^2^3041206^
"^DD",115,115.016,25,21,1,0)
This field stores the last date/time the recurring meal was edited for
"^DD",115,115.016,25,21,2,0)
use with printing the tray tickets.
"^DD",115,115.016,25,"DT")
3041206
"^DD",115,115.016,26,0)
STANDING ORDERS^115.1626^^SP;0
"^DD",115,115.016,26,"DT")
3051108
"^DD",115,115.016,27,0)
SUPPLEMENTAL FEEDING^115.1627^^SF;0
"^DD",115,115.017,0)
SPECIAL MEALS SUB-FIELD^^2.5^18
"^DD",115,115.017,0,"DT")
3060720
"^DD",115,115.017,0,"IX","B",115.017,.01)

"^DD",115,115.017,0,"NM","SPECIAL MEALS")

"^DD",115,115.017,0,"UP")
115
"^DD",115,115.017,.01,0)
SPECIAL MEAL DATE/TIME^MDX^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X I D(X) S DINUM=X
"^DD",115,115.017,.01,1,0)
^.1
"^DD",115,115.017,.01,1,1,0)
115.017^B
"^DD",115,115.017,.01,1,1,1)
S ^FHPT(DA(1),"SM","B",$E(X,1,30),DA)=""
"^DD",115,115.017,.01,1,1,2)
K ^FHPT(DA(1),"SM","B",$E(X,1,30),DA)
"^DD",115,115.017,.01,1,2,0)
115^SM
"^DD",115,115.017,.01,1,2,1)
S ^FHPT("SM",$E(X,1,30),DA(1),DA)=""
"^DD",115,115.017,.01,1,2,2)
K ^FHPT("SM",$E(X,1,30),DA(1),DA)
"^DD",115,115.017,.01,1,2,"%D",0)
^.101^1^1^3030630^^
"^DD",115,115.017,.01,1,2,"%D",1,0)
Cross reference the whole file by special meals.
"^DD",115,115.017,.01,1,2,"DT")
3030421
"^DD",115,115.017,.01,3)

"^DD",115,115.017,.01,21,0)
^.001^1^1^3030429^^^^
"^DD",115,115.017,.01,21,1,0)
This field will contain the date/time of the special meal.
"^DD",115,115.017,.01,"DT")
3030514
"^DD",115,115.017,1,0)
STATUS^S^P:PENDING;C:CANCELLED;A:AUTHORIZED;D:DENIED;^0;2^Q
"^DD",115,115.017,1,1,0)
^.1^^0
"^DD",115,115.017,1,3)

"^DD",115,115.017,1,21,0)
^.001^2^2^3030417^^^^
"^DD",115,115.017,1,21,1,0)
This field will store the status of the special meal request.
"^DD",115,115.017,1,21,2,0)
The allowable statuses are PENDING, CANCELLED, AUTHORIZED or DENIED.
"^DD",115,115.017,1,"DT")
3030429
"^DD",115,115.017,2,0)
LOCATION^P119.6'^FH(119.6,^0;3^Q
"^DD",115,115.017,2,1,0)
^.1^^0
"^DD",115,115.017,2,3)

"^DD",115,115.017,2,21,0)
^.001^2^2^3030408^^^^
"^DD",115,115.017,2,21,1,0)
This field will store the location for a patient who has requested
"^DD",115,115.017,2,21,2,0)
a special "one-time" meal.
"^DD",115,115.017,2,"DT")
3030429
"^DD",115,115.017,2.5,0)
ROOM-BED^P405.4'^DG(405.4,^0;13^Q
"^DD",115,115.017,2.5,21,0)
^^2^2^3060720^
"^DD",115,115.017,2.5,21,1,0)
This field will store the ROOM and BED # for the outpatient special meal
"^DD",115,115.017,2.5,21,2,0)
being ordered.
"^DD",115,115.017,2.5,"DT")
3060720
"^DD",115,115.017,3,0)
DIET^P111'^FH(111,^0;4^Q
"^DD",115,115.017,3,21,0)
^^2^2^3030408^
"^DD",115,115.017,3,21,1,0)
This field will store the diet entered for a patient who has requested
"^DD",115,115.017,3,21,2,0)
a special "one-time" meal.
"^DD",115,115.017,3,"DT")
3030429
"^DD",115,115.017,3.5,0)
MEAL^S^B:Breakfast;N:Noon;E:Evening;^0;9^Q
"^DD",115,115.017,3.5,21,0)
^^1^1^3030827^
"^DD",115,115.017,3.5,21,1,0)
This field will store the meal (breakfast/noon/evening) for the special meal.
"^DD",115,115.017,3.5,"DT")
3030827
"^DD",115,115.017,4,0)
REQUESTOR^P200'^VA(200,^0;5^Q
"^DD",115,115.017,4,3)

"^DD",115,115.017,4,21,0)
^.001^2^2^3030417^^^
"^DD",115,115.017,4,21,1,0)
This field will store the name of the person who has requested the
"^DD",115,115.017,4,21,2,0)
special meal.  This field is a pointer to the NEW PERSON (#200) file.
"^DD",115,115.017,4,"DT")
3030429
"^DD",115,115.017,5,0)
AUTHORIZOR^P200'^VA(200,^0;6^Q
"^DD",115,115.017,5,21,0)
^.001^2^2^3030417^^^
"^DD",115,115.017,5,21,1,0)
This field will store the name of the person who has authorized the
"^DD",115,115.017,5,21,2,0)
special meal.  This field is a pointer to the NEW PERSON (#200) file.
"^DD",115,115.017,5,"DT")
3030429
"^DD",115,115.017,6,0)
AUTHORIZE/DENY DATE/TIME^D^^0;7^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.017,6,21,0)
^.001^1^1^3030429^^
"^DD",115,115.017,6,21,1,0)
This field stores the date/time that the special meal was authorized or denied.
"^DD",115,115.017,6,"DT")
3030429
"^DD",115,115.017,7,0)
COMMENT^F^^0;8^K:$L(X)>80!($L(X)<1) X
"^DD",115,115.017,7,3)
Answer must be 1-80 characters in length.
"^DD",115,115.017,7,21,0)
^^2^2^3030508^
"^DD",115,115.017,7,21,1,0)
If the special meal request is denied the authorizor may enter the reason
"^DD",115,115.017,7,21,2,0)
why it was denied in this comment field.
"^DD",115,115.017,7,"DT")
3030508
"^DD",115,115.017,8,0)
EARLY/LATE TRAY TIME^F^^1;1^K:$L(X)>10!($L(X)<1) X
"^DD",115,115.017,8,3)
Answer must be 1-10 characters in length.
"^DD",115,115.017,8,21,0)
^^1^1^3030915^
"^DD",115,115.017,8,21,1,0)
This field will store the time for the early/late tray.
"^DD",115,115.017,8,"DT")
3030915
"^DD",115,115.017,9,0)
EARLY/LATE TRAY BAGGED MEAL^S^Y:YES;N:NO;^1;2^Q
"^DD",115,115.017,9,21,0)
^^1^1^3030915^
"^DD",115,115.017,9,21,1,0)
This field will store whether or not the early/late tray is a bagged meal.
"^DD",115,115.017,9,"DT")
3030915
"^DD",115,115.017,10,0)
EARLY/LATE TRAY CLERK^P200'^VA(200,^1;3^Q
"^DD",115,115.017,10,21,0)
^^1^1^3030915^
"^DD",115,115.017,10,21,1,0)
This field will store the person who entered the early/late tray.
"^DD",115,115.017,10,"DT")
3030915
"^DD",115,115.017,11,0)
EARLY/LATE TRAY OE/RR ORDER^P100'^OR(100,^1;4^Q
"^DD",115,115.017,11,21,0)
^^2^2^3050822^
"^DD",115,115.017,11,21,1,0)
This field is a pointer to the corresponding entry in the ORDERS (#100) 
"^DD",115,115.017,11,21,2,0)
file.
"^DD",115,115.017,11,"DT")
3050822
"^DD",115,115.017,11.5,0)
EARLY/LATE TRAY STATUS^S^A:ACTIVE;C:CANCELLED;^1;5^Q
"^DD",115,115.017,11.5,21,0)
^^1^1^3050822^
"^DD",115,115.017,11.5,21,1,0)
This field will be "A" for Active or "C" for cancelled.
"^DD",115,115.017,11.5,"DT")
3050822
"^DD",115,115.017,12,0)
DATE/TIME TICKET LAST PRINTED^D^^0;10^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.017,12,21,0)
^^2^2^3040224^
"^DD",115,115.017,12,21,1,0)
Stores the last date and time a tray ticket was printed for this
"^DD",115,115.017,12,21,2,0)
outpatient meal.
"^DD",115,115.017,12,"DT")
3040224
"^DD",115,115.017,13,0)
DATE/TIME CARD LAST PRINTED^D^^0;11^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.017,13,21,0)
^^2^2^3040224^
"^DD",115,115.017,13,21,1,0)
Stores the last date and time a diet card was printed for this
"^DD",115,115.017,13,21,2,0)
outpatient meal.
"^DD",115,115.017,13,"DT")
3040224
"^DD",115,115.017,14,0)
SPECIAL OE/RR ORDER^P100'^OR(100,^0;12^Q
"^DD",115,115.017,14,21,0)
^^1^1^3040608^
"^DD",115,115.017,14,21,1,0)
Pointer to File #100 for Special Meals entered via OE/RR.
"^DD",115,115.017,14,"DT")
3040608
"^DD",115,115.018,0)
GUEST MEALS SUB-FIELD^^4.5^11
"^DD",115,115.018,0,"DT")
3060720
"^DD",115,115.018,0,"IX","B",115.018,.01)

"^DD",115,115.018,0,"NM","GUEST MEALS")

"^DD",115,115.018,0,"UP")
115
"^DD",115,115.018,.01,0)
GUEST MEAL DATE/TIME^MDX^^0;1^S %DT="ETX" D ^%DT S X=Y K:Y<1 X I D(X) S DINUM=X
"^DD",115,115.018,.01,1,0)
^.1
"^DD",115,115.018,.01,1,1,0)
115.018^B
"^DD",115,115.018,.01,1,1,1)
S ^FHPT(DA(1),"GM","B",$E(X,1,30),DA)=""
"^DD",115,115.018,.01,1,1,2)
K ^FHPT(DA(1),"GM","B",$E(X,1,30),DA)
"^DD",115,115.018,.01,1,2,0)
115^GM
"^DD",115,115.018,.01,1,2,1)
S ^FHPT("GM",$E(X,1,30),DA(1),DA)=""
"^DD",115,115.018,.01,1,2,2)
K ^FHPT("GM",$E(X,1,30),DA(1),DA)
"^DD",115,115.018,.01,1,2,"%D",0)
^.101^1^1^3030702^^^
"^DD",115,115.018,.01,1,2,"%D",1,0)
Cross reference the whole file by the guest meals date
"^DD",115,115.018,.01,1,2,"DT")
3030701
"^DD",115,115.018,.01,21,0)
^.001^1^1^3030417^^
"^DD",115,115.018,.01,21,1,0)
This field will contain the date/time of the guest meal.
"^DD",115,115.018,.01,"DT")
3030701
"^DD",115,115.018,1,0)
CLASSIFICATION^S^E:EMPLOYEE;G:GRATUITOUS;O:OOD;P:PAID;V:VOLUNTEER;^0;2^Q
"^DD",115,115.018,1,21,0)
^^1^1^3030417^
"^DD",115,115.018,1,21,1,0)
This field will contain the classification type for the guest meal.
"^DD",115,115.018,1,"DT")
3030417
"^DD",115,115.018,2,0)
MEAL^S^B:Breakfast;N:Noon;E:Evening;^0;3^Q
"^DD",115,115.018,2,21,0)
^.001^1^1^3030827^^
"^DD",115,115.018,2,21,1,0)
This field will store the meal (breakfast/noon/evening) for the guest meal.
"^DD",115,115.018,2,"DT")
3030827
"^DD",115,115.018,3,0)
CHARGE^NJ6,2^^0;4^S:X["$" X=$P(X,"$",2) K:X'?.N.1".".2N!(X>100)!(X<0) X
"^DD",115,115.018,3,3)
Type a Dollar Amount between 0 and 100, 2 Decimal Digits
"^DD",115,115.018,3,21,0)
^^1^1^3030630^
"^DD",115,115.018,3,21,1,0)
This field stores the charge amount for the guest meal.
"^DD",115,115.018,3,"DT")
3030630
"^DD",115,115.018,4,0)
LOCATION^P119.6'^FH(119.6,^0;5^Q
"^DD",115,115.018,4,21,0)
^.001^1^1^3040218^^
"^DD",115,115.018,4,21,1,0)
This field indicates the location for this guest meal request.
"^DD",115,115.018,4,"DT")
3040218
"^DD",115,115.018,4.5,0)
ROOM-BED^P405.4'^DG(405.4,^0;11^Q
"^DD",115,115.018,4.5,21,0)
^^2^2^3060720^
"^DD",115,115.018,4.5,21,1,0)
This field will store the ROOM and BED # for the outpatient recurring meal
"^DD",115,115.018,4.5,21,2,0)
being ordered.
"^DD",115,115.018,4.5,"DT")
3060720
"^DD",115,115.018,5,0)
DIET^P111'^FH(111,^0;6^Q
"^DD",115,115.018,5,21,0)
^^2^2^3040219^
"^DD",115,115.018,5,21,1,0)
This is the Diet for the guest meal.  The diet will be stuffed from the
"^DD",115,115.018,5,21,2,0)
value set in the OUTPATIENT DIET1 site parameter in file #119.9.
"^DD",115,115.018,5,"DT")
3040219
"^DD",115,115.018,6,0)
DATE/TIME TICKET LAST PRINTED^D^^0;7^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.018,6,21,0)
^^2^2^3040224^
"^DD",115,115.018,6,21,1,0)
Stores the last date and time a diet card was printed for this
"^DD",115,115.018,6,21,2,0)
outpatient meal.
"^DD",115,115.018,6,"DT")
3040224
"^DD",115,115.018,7,0)
DATE/TIME CARD LAST PRINTED^D^^0;8^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.018,7,21,0)
^^2^2^3040224^
"^DD",115,115.018,7,21,1,0)
Stores the last date and time a diet card was printed for this
"^DD",115,115.018,7,21,2,0)
outpatient meal.
"^DD",115,115.018,7,"DT")
3040224
"^DD",115,115.018,8,0)
STATUS^S^C:CANCELLED;O:ORDERED;^0;9^Q
"^DD",115,115.018,8,21,0)
^^2^2^3051121^
"^DD",115,115.018,8,21,1,0)
This field stores the status of the guest meal, which is either "ordered"
"^DD",115,115.018,8,21,2,0)
or "cancelled".
"^DD",115,115.018,8,"DT")
3051121
"^DD",115,115.018,9,0)
GUEST MEAL CLERK^P200'^VA(200,^0;10^Q
"^DD",115,115.018,9,21,0)
^^1^1^3051121^
"^DD",115,115.018,9,21,1,0)
This field stores the person who has entered the guest meal.
"^DD",115,115.018,9,"DT")
3051121
"^DD",115,115.02,0)
DIET SUB-FIELD^NL^21^23
"^DD",115,115.02,0,"DT")
3060329
"^DD",115,115.02,0,"NM","DIET")

"^DD",115,115.02,0,"UP")
115.01
"^DD",115,115.02,.01,0)
ORDER NUMBER^NJ5,0XI^^0;1^K:X'?1N.N X I $D(X) S DINUM=X
"^DD",115,115.02,.01,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99999
"^DD",115,115.02,.01,21,0)
^^2^2^2880710^
"^DD",115,115.02,.01,21,1,0)
This field is merely the sequence order in which the diets
"^DD",115,115.02,.01,21,2,0)
were ordered and has no further meaning.
"^DD",115,115.02,.01,"DT")
2880515
"^DD",115,115.02,1,0)
DIET1^P111'I^FH(111,^0;2^Q
"^DD",115,115.02,1,21,0)
^^2^2^2940526^^
"^DD",115,115.02,1,21,1,0)
This is the first diet modification selected from the Diets (111)
"^DD",115,115.02,1,21,2,0)
file.
"^DD",115,115.02,1,"DT")
2880514
"^DD",115,115.02,2,0)
DIET2^P111'I^FH(111,^0;3^Q
"^DD",115,115.02,2,21,0)
^^2^2^2880710^
"^DD",115,115.02,2,21,1,0)
This is the second diet modification selected from the Diets (111)
"^DD",115,115.02,2,21,2,0)
file.
"^DD",115,115.02,2,"DT")
2880514
"^DD",115,115.02,3,0)
DIET3^P111'I^FH(111,^0;4^Q
"^DD",115,115.02,3,21,0)
^^2^2^2880710^
"^DD",115,115.02,3,21,1,0)
This is the third diet modification selected from the Diets (111)
"^DD",115,115.02,3,21,2,0)
file.
"^DD",115,115.02,3,"DT")
2880514
"^DD",115,115.02,4,0)
DIET4^P111'I^FH(111,^0;5^Q
"^DD",115,115.02,4,21,0)
^^2^2^2880710^
"^DD",115,115.02,4,21,1,0)
This is the fourth diet modification selected from the Diets (111)
"^DD",115,115.02,4,21,2,0)
file.
"^DD",115,115.02,4,"DT")
2880514
"^DD",115,115.02,5,0)
DIET5^P111'I^FH(111,^0;6^Q
"^DD",115,115.02,5,21,0)
^^2^2^2880710^
"^DD",115,115.02,5,21,1,0)
This is the fifth diet modification selected from the Diets (111)
"^DD",115,115.02,5,21,2,0)
file.
"^DD",115,115.02,5,"DT")
2880514
"^DD",115,115.02,6,0)
WITHHOLD^SI^N:NPO;X:NO ORDER;P:PASS;^0;7^Q
"^DD",115,115.02,6,1,0)
^.1^^0
"^DD",115,115.02,6,21,0)
^^2^2^2880710^
"^DD",115,115.02,6,21,1,0)
This field, if not null, indicates that an NPO type of order
"^DD",115,115.02,6,21,2,0)
was entered.
"^DD",115,115.02,6,"DT")
2880514
"^DD",115,115.02,7,0)
TYPE OF SERVICE^SI^T:TRAY;C:CAFETERIA;D:DINING ROOM;^0;8^Q
"^DD",115,115.02,7,21,0)
^^4^4^2880710^
"^DD",115,115.02,7,21,1,0)
This field indicates the type of service requested for this diet
"^DD",115,115.02,7,21,2,0)
order. It is not present for NPO orders. When this order becomes
"^DD",115,115.02,7,21,3,0)
effective, this type of service will become the current type of
"^DD",115,115.02,7,21,4,0)
service and will be the default for future orders.
"^DD",115,115.02,7,"DT")
2880514
"^DD",115,115.02,8,0)
DATE/TIME EFFECTIVE^DI^^0;9^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.02,8,21,0)
^^1^1^2880710^
"^DD",115,115.02,8,21,1,0)
This is the date/time when this diet order takes effect.
"^DD",115,115.02,8,"DT")
2880514
"^DD",115,115.02,9,0)
DATE/TIME EXPIRES^DI^^0;10^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.02,9,21,0)
^^3^3^2880710^
"^DD",115,115.02,9,21,1,0)
This field indicates the date/time when this order is to expire.
"^DD",115,115.02,9,21,2,0)
If null, the order is 'open-ended' and will not expire until
"^DD",115,115.02,9,21,3,0)
superceded by another order.
"^DD",115,115.02,9,"DT")
2880514
"^DD",115,115.02,10,0)
CLERK^P200'^VA(200,^0;11^Q
"^DD",115,115.02,10,21,0)
^^1^1^2880718^^
"^DD",115,115.02,10,21,1,0)
This field is the person actually entering the order.
"^DD",115,115.02,10.5,0)
DATE/TIME ORDERED^D^^0;12^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.02,10.5,21,0)
^^3^3^2880710^
"^DD",115,115.02,10.5,21,1,0)
This is the date/time the order was actually entered and may bear
"^DD",115,115.02,10.5,21,2,0)
little relationship the effective and/or expiration date/times
"^DD",115,115.02,10.5,21,3,0)
of the actual order.
"^DD",115,115.02,11,0)
COMMENT^F^^1;1^K:$L(X)>80!($L(X)<1) X
"^DD",115,115.02,11,3)
Answer must be 1-80 characters in length.
"^DD",115,115.02,11,21,0)
^^2^2^2960628^^^
"^DD",115,115.02,11,21,1,0)
This is a comment field for any specialized comments concerning
"^DD",115,115.02,11,21,2,0)
this diet order.
"^DD",115,115.02,11,"DT")
2960628
"^DD",115,115.02,12,0)
PRODUCTION DIET^RP116.2'^FH(116.2,^0;13^Q
"^DD",115,115.02,12,21,0)
^^4^4^2880710^
"^DD",115,115.02,12,21,1,0)
This is a pointer to the Production Diet (116.2) file and is
"^DD",115,115.02,12,21,2,0)
the outcome of the 'diet recoding' algorithm which is based
"^DD",115,115.02,12,21,3,0)
upon the diet modifications selected. It is not present for
"^DD",115,115.02,12,21,4,0)
NPO types of orders.
"^DD",115,115.02,12,"DT")
2870713
"^DD",115,115.02,13,0)
OE/RR ORDER^P100^OR(100,^0;14^Q
"^DD",115,115.02,13,21,0)
^^2^2^2890918^
"^DD",115,115.02,13,21,1,0)
This field contains a pointer the the OE/RR file order corresponding
"^DD",115,115.02,13,21,2,0)
to this order.
"^DD",115,115.02,13,"DT")
2890918
"^DD",115,115.02,14,0)
CURRENT OE/RR STATUS^*P100.01'^ORD(100.01,^0;15^S DIC("S")="I '$$SCREEN^XTID(100.01,,Y_"","")" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.02,14,12)
Data Standardization of Order Status file #100.01
"^DD",115,115.02,14,12.1)
S DIC("S")="I '$$SCREEN^XTID(100.01,,Y_"","")"
"^DD",115,115.02,14,21,0)
^.001^2^2^3060329^^^^
"^DD",115,115.02,14,21,1,0)
This field contains the current OE/RR status as passed to OE/RR.
"^DD",115,115.02,14,21,2,0)
It is a pointer to the OE/RR Status file (100.01).
"^DD",115,115.02,14,"DT")
3060329
"^DD",115,115.02,15,0)
LAST REVIEW DATE/TIME^D^^0;16^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.02,15,21,0)
^^3^3^2911204^
"^DD",115,115.02,15,21,1,0)
This is the date/time that the diet order was last reviewed if necessary.
"^DD",115,115.02,15,21,2,0)
(Reviews are based upon the coded Production Diet). Further reviews are
"^DD",115,115.02,15,21,3,0)
based upon this last review date/time.
"^DD",115,115.02,15,"DT")
2910430
"^DD",115,115.02,16,0)
REVIEW CLERK^P200'^VA(200,^0;17^Q
"^DD",115,115.02,16,21,0)
^^1^1^2941110^^
"^DD",115,115.02,16,21,1,0)
This is a pointer to File 200 of the person entering the review.
"^DD",115,115.02,16,"DT")
2910430
"^DD",115,115.02,17,0)
CANCELLED DATE/TIME^D^^0;18^S %DT="ET" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.02,17,21,0)
^^1^1^2941110^^^
"^DD",115,115.02,17,21,1,0)
This field contains the Date/Time when the NPO was cancelled.
"^DD",115,115.02,17,"DT")
2920318
"^DD",115,115.02,18,0)
CANCELLING CLERK^P200'^VA(200,^0;19^Q
"^DD",115,115.02,18,21,0)
^^2^2^2920318^^
"^DD",115,115.02,18,21,1,0)
This field contains the user who cancelled the NPO and is
"^DD",115,115.02,18,21,2,0)
captured automatically at the time of cancellation.
"^DD",115,115.02,18,"DT")
2920318
"^DD",115,115.02,19,0)
INDIVIDUAL PATTERN^FI^^2;1^K:$L(X)>200!($L(X)<2) X
"^DD",115,115.02,19,3)
Answer must be 2-200 characters in length.
"^DD",115,115.02,19,21,0)
^^6^6^2940526^^^
"^DD",115,115.02,19,21,1,0)
This field is the individual meal pattern for the patient which
"^DD",115,115.02,19,21,2,0)
contains three strings of codes, each code separated by a space contains
"^DD",115,115.02,19,21,3,0)
the internal number of the recipe category and the quantity separated
"^DD",115,115.02,19,21,4,0)
by a comma for the three meals, breakfast, noon, and evening, each
"^DD",115,115.02,19,21,5,0)
separated by a semicolon.  The meal pattern will take precedence over
"^DD",115,115.02,19,21,6,0)
the diet pattern entered in the Diet Pattern file (111.1).
"^DD",115,115.02,19,"DT")
2941110
"^DD",115,115.02,20,0)
PATTERN CLERK^P200'^VA(200,^3;1^Q
"^DD",115,115.02,20,21,0)
^^2^2^2941110^
"^DD",115,115.02,20,21,1,0)
This is a pointer to File 200 of the person entering the patient's
"^DD",115,115.02,20,21,2,0)
individual Diet Pattern.
"^DD",115,115.02,20,"DT")
2941110
"^DD",115,115.02,21,0)
DATE/TIME PATTERN ENTERED^D^^3;2^S %DT="ET" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.02,21,21,0)
^^2^2^2941110^
"^DD",115,115.02,21,21,1,0)
This field contains the Date/Time when the Diet Pattern was
"^DD",115,115.02,21,21,2,0)
entered.
"^DD",115,115.02,21,"DT")
2941110
"^DD",115,115.021,0)
LAB DATA SUB-FIELD^^6^7
"^DD",115,115.021,0,"IX","B",115.021,.01)

"^DD",115,115.021,0,"NM","LAB DATA")

"^DD",115,115.021,0,"UP")
115.011
"^DD",115,115.021,.01,0)
TEST NAME^MF^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",115,115.021,.01,1,0)
^.1
"^DD",115,115.021,.01,1,1,0)
115.021^B
"^DD",115,115.021,.01,1,1,1)
S ^FHPT(DA(2),"N",DA(1),"L","B",$E(X,1,30),DA)=""
"^DD",115,115.021,.01,1,1,2)
K ^FHPT(DA(2),"N",DA(1),"L","B",$E(X,1,30),DA)
"^DD",115,115.021,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115,115.021,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the TEST NAME field.
"^DD",115,115.021,.01,3)
Answer must be 1-30 characters in length.
"^DD",115,115.021,.01,21,0)
^^1^1^2891121^
"^DD",115,115.021,.01,21,1,0)
This field contains the name of the lab test.
"^DD",115,115.021,.01,"DT")
2890705
"^DD",115,115.021,1,0)
LAB TEST^P60'^LAB(60,^0;2^Q
"^DD",115,115.021,1,21,0)
^^2^2^2910813^^^^
"^DD",115,115.021,1,21,1,0)
This field contains a pointer to the Lab Test file (60)
"^DD",115,115.021,1,21,2,0)
corresponding to this lab test.
"^DD",115,115.021,1,"DT")
2890705
"^DD",115,115.021,2,0)
SPECIMEN^NJ4,0^^0;3^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.021,2,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.021,2,21,0)
2
"^DD",115,115.021,2,21,1,0)
This field contains a pointer to the specimen type used
"^DD",115,115.021,2,21,2,0)
for the lab test.
"^DD",115,115.021,2,"DT")
2890705
"^DD",115,115.021,3,0)
UNITS^F^^0;4^K:$L(X)>10!($L(X)<1) X
"^DD",115,115.021,3,3)
Answer must be 1-10 characters in length.
"^DD",115,115.021,3,21,0)
1^^1^1^2901217^
"^DD",115,115.021,3,21,1,0)
This field indicates the units in which the result is expressed.
"^DD",115,115.021,3,"DT")
2890705
"^DD",115,115.021,4,0)
REF. RANGE^F^^0;5^K:$L(X)>11!($L(X)<4) X
"^DD",115,115.021,4,3)
Answer must be 4-11 characters in length.
"^DD",115,115.021,4,21,0)
^^2^2^2940616^
"^DD",115,115.021,4,21,1,0)
This field provides the low-high reference (or normal) range
"^DD",115,115.021,4,21,2,0)
for the lab test.
"^DD",115,115.021,4,"DT")
2890705
"^DD",115,115.021,5,0)
RESULT^F^^0;6^K:$L(X)>10!($L(X)<1) X
"^DD",115,115.021,5,3)
Answer must be 1-10 characters in length.
"^DD",115,115.021,5,21,0)
^^1^1^2891121^
"^DD",115,115.021,5,21,1,0)
This field contains the lab test result.
"^DD",115,115.021,5,"DT")
2890705
"^DD",115,115.021,6,0)
DATE PERFORMED^D^^0;7^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.021,6,21,0)
^^1^1^2891121^
"^DD",115,115.021,6,21,1,0)
This field contains the date the lab test was performed.
"^DD",115,115.021,6,"DT")
2890705
"^DD",115,115.03,0)
CONSULTATION SUB-FIELD^NL^12^11
"^DD",115,115.03,0,"ID",1)
W:$D(^(0)) "   ",$S($D(^FH(119.5,+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),@("$E("_DIC_"Y,0),0)")
"^DD",115,115.03,0,"NM","CONSULTATION")

"^DD",115,115.03,0,"UP")
115.01
"^DD",115,115.03,.01,0)
DATE/TIME ENTERED^RD^^0;1^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.03,.01,1,0)
^.1
"^DD",115,115.03,.01,1,1,0)
115^ADR
"^DD",115,115.03,.01,1,1,1)
S ^FHPT("ADR",$E(X,1,30),DA(2),DA(1),DA)=""
"^DD",115,115.03,.01,1,1,2)
K ^FHPT("ADR",$E(X,1,30),DA(2),DA(1),DA)
"^DD",115,115.03,.01,3)

"^DD",115,115.03,.01,21,0)
^^2^2^2880710^
"^DD",115,115.03,.01,21,1,0)
This field contains the date/time the consult request was
"^DD",115,115.03,.01,21,2,0)
entered.
"^DD",115,115.03,.01,"DT")
2850512
"^DD",115,115.03,1,0)
CONSULT REQUEST^RP119.5'^FH(119.5,^0;2^Q
"^DD",115,115.03,1,21,0)
^^2^2^2880710^
"^DD",115,115.03,1,21,1,0)
This field contains the specific consult request drawn from
"^DD",115,115.03,1,21,2,0)
the Dietetic Consults file (119.5).
"^DD",115,115.03,1,"DT")
2850512
"^DD",115,115.03,2,0)
COMMENT^F^^0;3^K:$L(X)>80!($L(X)<1) X
"^DD",115,115.03,2,3)
ANSWER MUST BE 1-80 CHARACTERS IN LENGTH
"^DD",115,115.03,2,21,0)
^^1^1^2880718^^
"^DD",115,115.03,2,21,1,0)
This field allows the user to enter a comment as to the consult.
"^DD",115,115.03,2,"DT")
2850418
"^DD",115,115.03,4,0)
CLINICIAN^RP200'^VA(200,^0;5^Q
"^DD",115,115.03,4,1,0)
^.1
"^DD",115,115.03,4,1,1,0)
115^ADRU^MUMPS
"^DD",115,115.03,4,1,1,1)
S X9=$P(^FHPT(DA(2),"A",DA(1),"DR",DA,0),U,8) K:X9'="A" ^FHPT("ADRU",X,DA(2),DA(1),DA) S:X9="A" ^FHPT("ADRU",X,DA(2),DA(1),DA)=""
"^DD",115,115.03,4,1,1,2)
K:X ^FHPT("ADRU",X,DA(2),DA(1),DA)
"^DD",115,115.03,4,1,1,"%D",0)
^^2^2^2940824^
"^DD",115,115.03,4,1,1,"%D",1,0)
This is a cross-reference by Clinician of all consultations with
"^DD",115,115.03,4,1,1,"%D",2,0)
an Active status.
"^DD",115,115.03,4,21,0)
^^4^4^2880710^
"^DD",115,115.03,4,21,1,0)
This field indicates the clinician currently assigned to the
"^DD",115,115.03,4,21,2,0)
consult. Initially, it will contain the clinician assigned
"^DD",115,115.03,4,21,3,0)
to the consult type, if one has been specified, otherwise, the
"^DD",115,115.03,4,21,4,0)
clinician assigned to the ward on which the patient resides.
"^DD",115,115.03,4,"DT")
2850506
"^DD",115,115.03,6,0)
CLERK^RP200'^VA(200,^0;7^Q
"^DD",115,115.03,6,21,0)
^^2^2^2880710^
"^DD",115,115.03,6,21,1,0)
This field contains the user entering the request and is
"^DD",115,115.03,6,21,2,0)
automatically captured at time of entry.
"^DD",115,115.03,6,"DT")
2850418
"^DD",115,115.03,7,0)
STATUS^RS^A:ACTIVE;C:COMPLETE;X:CANCELLED;^0;8^Q
"^DD",115,115.03,7,1,0)
^.1
"^DD",115,115.03,7,1,1,0)
115^ADRV^MUMPS
"^DD",115,115.03,7,1,1,1)
S X9=$P(^FHPT(DA(2),"A",DA(1),"DR",DA,0),U,5) S:X9&(X="A") ^FHPT("ADRU",X9,DA(2),DA(1),DA)="" K:X9&(X'="A") ^FHPT("ADRU",X9,DA(2),DA(1),DA)
"^DD",115,115.03,7,1,1,2)
S X9=$P(^FHPT(DA(2),"A",DA(1),"DR",DA,0),U,5) K:X9 ^FHPT("ADRU",X9,DA(2),DA(1),DA)
"^DD",115,115.03,7,1,1,"%D",0)
^^2^2^2940824^^
"^DD",115,115.03,7,1,1,"%D",1,0)
This is a cross-reference by Clinician (Field 4) of all consults
"^DD",115,115.03,7,1,1,"%D",2,0)
with an Active status.
"^DD",115,115.03,7,21,0)
^^1^1^2920611^^
"^DD",115,115.03,7,21,1,0)
This is the current status of the request.
"^DD",115,115.03,7,"DT")
2850506
"^DD",115,115.03,8,0)
DATE/TIME CLEARED^D^^0;9^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.03,8,21,0)
^^2^2^2880710^
"^DD",115,115.03,8,21,1,0)
This is the date/time the consult was cleared, either by
"^DD",115,115.03,8,21,2,0)
completion or cancellation.
"^DD",115,115.03,8,"DT")
2850506
"^DD",115,115.03,9,0)
CLERK CLEARING^P200'^VA(200,^0;10^Q
"^DD",115,115.03,9,21,0)
^^2^2^2880710^
"^DD",115,115.03,9,21,1,0)
This is the dietetic person who indicated that the consult
"^DD",115,115.03,9,21,2,0)
had been cleared.
"^DD",115,115.03,9,"DT")
2850506
"^DD",115,115.03,10,0)
INITIAL/FOLLOW-UP^S^I:INITIAL;F:FOLLOW-UP;^0;11^Q
"^DD",115,115.03,10,21,0)
^^3^3^2880710^
"^DD",115,115.03,10,21,1,0)
If follow-ups are associated with this consult type, then
"^DD",115,115.03,10,21,2,0)
this field will indicate whether the consult was an
"^DD",115,115.03,10,21,3,0)
initial one or a follow-up to a prior consult.
"^DD",115,115.03,10,"DT")
2850606
"^DD",115,115.03,11,0)
OE/RR ORDER^P100^OR(100,^0;13^Q
"^DD",115,115.03,11,21,0)
^^2^2^2890918^
"^DD",115,115.03,11,21,1,0)
This field contains a pointer to the OE/RR file order corresponding
"^DD",115,115.03,11,21,2,0)
to this order.
"^DD",115,115.03,11,"DT")
2890918
"^DD",115,115.03,12,0)
OE/RR ENTRY^P100'^OR(100,^0;13^Q
"^DD",115,115.03,12,"DT")
2880325
"^DD",115,115.031,0)
ASSESSMENT TF PRODUCT SUB-FIELD^^2^3
"^DD",115,115.031,0,"DT")
3070712
"^DD",115,115.031,0,"IX","B",115.031,.01)

"^DD",115,115.031,0,"NM","ASSESSMENT TF PRODUCT")

"^DD",115,115.031,0,"UP")
115.011
"^DD",115,115.031,.01,0)
ASSESSMENT TF PRODUCT^P118.2'^FH(118.2,^0;1^Q
"^DD",115,115.031,.01,1,0)
^.1
"^DD",115,115.031,.01,1,1,0)
115.031^B
"^DD",115,115.031,.01,1,1,1)
S ^FHPT(DA(2),"N",DA(1),"TF","B",$E(X,1,30),DA)=""
"^DD",115,115.031,.01,1,1,2)
K ^FHPT(DA(2),"N",DA(1),"TF","B",$E(X,1,30),DA)
"^DD",115,115.031,.01,21,0)
^.001^2^2^3070712^^^
"^DD",115,115.031,.01,21,1,0)
Patient's Tubefeeding Product(s) at the time the
"^DD",115,115.031,.01,21,2,0)
Nutrition Assessment was created.
"^DD",115,115.031,.01,"DT")
3070712
"^DD",115,115.031,1,0)
ASSESSMENT TF STRENGTH^RS^1:1/4;2:1/2;3:3/4;4:FULL;^0;2^Q
"^DD",115,115.031,1,21,0)
^^2^2^3070712^
"^DD",115,115.031,1,21,1,0)
Patient's Tubefeeding Product Strength at the time the
"^DD",115,115.031,1,21,2,0)
Nutrition Assessment was created.
"^DD",115,115.031,1,"DT")
3070712
"^DD",115,115.031,2,0)
ASSESSMENT TF QUANTITY^RF^^0;3^K:$L(X)>50!($L(X)<3) X
"^DD",115,115.031,2,3)
Answer must be 3-50 characters in length.
"^DD",115,115.031,2,21,0)
^^2^2^3070712^
"^DD",115,115.031,2,21,1,0)
Patient's Tubefeeding Product Quantity at the time the
"^DD",115,115.031,2,21,2,0)
Nutrition Assessment was created.
"^DD",115,115.031,2,"DT")
3070712
"^DD",115,115.04,0)
TUBEFEEDING SUB-FIELD^NL^15^11
"^DD",115,115.04,0,"DT")
3021029
"^DD",115,115.04,0,"NM","TUBEFEEDING")

"^DD",115,115.04,0,"UP")
115.01
"^DD",115,115.04,.01,0)
TUBEFEEDING^D^^0;1^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.04,.01,21,0)
^^2^2^2910219^^^^
"^DD",115,115.04,.01,21,1,0)
This field contains the date/time the tubefeeding was ordered
"^DD",115,115.04,.01,21,2,0)
and will be effective.
"^DD",115,115.04,.01,"DT")
2850517
"^DD",115,115.04,3,0)
TF PRODUCT^115.1P^^P;0
"^DD",115,115.04,3,3)
ANSWER MUST BE 3-15 CHARACTERS IN LENGTH
"^DD",115,115.04,3,21,0)
^.001^1^1^3070712^^^^
"^DD",115,115.04,3,21,1,0)
This multiple contains the tubefeeding products selected.
"^DD",115,115.04,3,"DT")
2850714
"^DD",115,115.04,4,0)
COMMENT^F^^0;5^K:$L(X)>160!($L(X)<1) X
"^DD",115,115.04,4,3)
Answer must be 1-160 characters in length.
"^DD",115,115.04,4,21,0)
^.001^2^2^3021030^^^^
"^DD",115,115.04,4,21,1,0)
This field contains any free-text comment entered at time
"^DD",115,115.04,4,21,2,0)
of order entry.
"^DD",115,115.04,4,"DT")
3021029
"^DD",115,115.04,6,0)
TOTAL ML'S^NJ5,0^^0;6^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.04,6,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 10000
"^DD",115,115.04,6,21,0)
^.001^2^2^3070712^^
"^DD",115,115.04,6,21,1,0)
This field contains the total daily ml's administered of
"^DD",115,115.04,6,21,2,0)
the prepared (diluted) product.
"^DD",115,115.04,6,"DT")
3050422
"^DD",115,115.04,7,0)
TOTAL KCALS/DAY^NJ5,0^^0;7^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.04,7,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 10000
"^DD",115,115.04,7,21,0)
^.001^2^2^3070712^^
"^DD",115,115.04,7,21,1,0)
This field contains the total Kilocalories per day provided
"^DD",115,115.04,7,21,2,0)
by the tubefeeding.
"^DD",115,115.04,7,"DT")
2850714
"^DD",115,115.04,10,0)
ENTERING CLERK^RP200'^VA(200,^0;10^Q
"^DD",115,115.04,10,21,0)
^^2^2^2880715^
"^DD",115,115.04,10,21,1,0)
This field contains the user entering the tubefeeding order
"^DD",115,115.04,10,21,2,0)
and is automatically captured at time of entry.
"^DD",115,115.04,10,"DT")
2850714
"^DD",115,115.04,11,0)
CANCELLATION DATE/TIME^D^^0;11^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.04,11,21,0)
^^2^2^2920318^^
"^DD",115,115.04,11,21,1,0)
This field contains the date/time the tubefeeding order
"^DD",115,115.04,11,21,2,0)
was cancelled.
"^DD",115,115.04,11,"DT")
2850714
"^DD",115,115.04,12,0)
CANCELLING CLERK^P200'^VA(200,^0;12^Q
"^DD",115,115.04,12,21,0)
^^2^2^2920318^^
"^DD",115,115.04,12,21,1,0)
This field contains the user who cancelled the order and is
"^DD",115,115.04,12,21,2,0)
captured automatically at time of cancellation.
"^DD",115,115.04,12,"DT")
2850714
"^DD",115,115.04,13,0)
OE/RR ORDER^P100^OR(100,^0;14^Q
"^DD",115,115.04,13,21,0)
^^2^2^2890918^
"^DD",115,115.04,13,21,1,0)
This field contains a pointer to the OE/RR file order corresponding
"^DD",115,115.04,13,21,2,0)
to this order.
"^DD",115,115.04,13,"DT")
2890918
"^DD",115,115.04,14,0)
LAST REVIEW DATE/TIME^D^^0;15^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.04,14,21,0)
^^2^2^2911204^
"^DD",115,115.04,14,21,1,0)
This is the date/time that the Tubefeeding order was last reviewed.
"^DD",115,115.04,14,21,2,0)
Further reviews are based upon this last review date/time.
"^DD",115,115.04,14,"DT")
2910430
"^DD",115,115.04,15,0)
REVIEW CLERK^P200'^VA(200,^0;16^Q
"^DD",115,115.04,15,21,0)
^^1^1^2911204^
"^DD",115,115.04,15,21,1,0)
This is a pointer to File 200 of the person entering the review.
"^DD",115,115.04,15,"DT")
2910430
"^DD",115,115.05,0)
EARLY/LATE TRAY SUB-FIELD^NL^6^7
"^DD",115,115.05,0,"NM","EARLY/LATE TRAY")

"^DD",115,115.05,0,"UP")
115.01
"^DD",115,115.05,.01,0)
EARLY/LATE TRAY^DX^^0;1^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X I $D(X) S DINUM=X
"^DD",115,115.05,.01,1,0)
^.1
"^DD",115,115.05,.01,1,1,0)
115^ADLT
"^DD",115,115.05,.01,1,1,1)
S ^FHPT("ADLT",$E(X,1,30),DA(2),DA(1),DA)=""
"^DD",115,115.05,.01,1,1,2)
K ^FHPT("ADLT",$E(X,1,30),DA(2),DA(1),DA)
"^DD",115,115.05,.01,21,0)
^.001^2^2^3030204^^^
"^DD",115,115.05,.01,21,1,0)
This field contains the date/time at which the early/late
"^DD",115,115.05,.01,21,2,0)
tray is to be delivered.
"^DD",115,115.05,.01,"DT")
2850525
"^DD",115,115.05,1,0)
MEAL^RS^B:BREAKFAST;N:NOON;E:EVENING;^0;2^Q
"^DD",115,115.05,1,21,0)
^^1^1^2880718^^
"^DD",115,115.05,1,21,1,0)
This field indicates for which meal the early or late tray is ordered.
"^DD",115,115.05,1,"DT")
2850608
"^DD",115,115.05,2,0)
TIME^F^^0;3^K:$L(X)>10!($L(X)<1) X
"^DD",115,115.05,2,3)
ANSWER MUST BE 1-10 CHARACTERS IN LENGTH
"^DD",115,115.05,2,21,0)
^^2^2^2930428^^^^
"^DD",115,115.05,2,21,1,0)
This field contains a printable time for which the meal is to
"^DD",115,115.05,2,21,2,0)
delivered.
"^DD",115,115.05,2,"DT")
2850525
"^DD",115,115.05,3,0)
BAGGED MEAL?^S^Y:YES;N:NO;^0;4^Q
"^DD",115,115.05,3,21,0)
^^1^1^2880710^
"^DD",115,115.05,3,21,1,0)
If answered YES, this field indicates that a bagged meal is desired.
"^DD",115,115.05,3,"DT")
2850526
"^DD",115,115.05,4,0)
CLERK^RP200'^VA(200,^0;5^Q
"^DD",115,115.05,4,21,0)
^^2^2^2880710^
"^DD",115,115.05,4,21,1,0)
This field is automatically updated with the user entering
"^DD",115,115.05,4,21,2,0)
the order.
"^DD",115,115.05,4,"DT")
2850526
"^DD",115,115.05,5,0)
ENTRY DATE/TIME^RD^^0;6^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.05,5,21,0)
^^2^2^2910506^^
"^DD",115,115.05,5,21,1,0)
This field contains the date/time the order was actually
"^DD",115,115.05,5,21,2,0)
entered.
"^DD",115,115.05,5,"DT")
2850526
"^DD",115,115.05,6,0)
OE/RR ORDER^P100^OR(100,^0;7^Q
"^DD",115,115.05,6,21,0)
^^2^2^2890918^
"^DD",115,115.05,6,21,1,0)
This field contains a pointer to the OE/RR file order corresponding
"^DD",115,115.05,6,21,2,0)
to this order.
"^DD",115,115.05,6,"DT")
2890918
"^DD",115,115.06,0)
ADDITIONAL ORDERS SUB-FIELD^NL^7^8
"^DD",115,115.06,0,"DT")
3021030
"^DD",115,115.06,0,"NM","ADDITIONAL ORDERS")

"^DD",115,115.06,0,"UP")
115.01
"^DD",115,115.06,.01,0)
ORDER NUMBER^RNJ5,0X^^0;1^K:'X!(X'?1N.N) X I $D(X) S DINUM=X
"^DD",115,115.06,.01,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99999
"^DD",115,115.06,.01,21,0)
^^2^2^2880710^
"^DD",115,115.06,.01,21,1,0)
This field is merely the sequence number of the Additional
"^DD",115,115.06,.01,21,2,0)
Orders entered and has no meaning beyond that.
"^DD",115,115.06,.01,"DT")
2851126
"^DD",115,115.06,1,0)
DATE/TIME ENTERED^RD^^0;2^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.06,1,1,0)
^.1^^0
"^DD",115,115.06,1,21,0)
^^1^1^2880710^
"^DD",115,115.06,1,21,1,0)
This is the date/time the Additional Order was entered.
"^DD",115,115.06,1,"DT")
2851126
"^DD",115,115.06,2,0)
ORDER^F^^0;3^K:$L(X)>160!($L(X)<1) X
"^DD",115,115.06,2,3)
Answer must be 1-160 characters in length.
"^DD",115,115.06,2,21,0)
^.001^1^1^3021030^^^
"^DD",115,115.06,2,21,1,0)
This is the text of the order.
"^DD",115,115.06,2,"DT")
3021030
"^DD",115,115.06,3,0)
CLERK^RP200'^VA(200,^0;4^Q
"^DD",115,115.06,3,21,0)
^^2^2^2880710^
"^DD",115,115.06,3,21,1,0)
This is the clerk entering the order and is automatically
"^DD",115,115.06,3,21,2,0)
captured at time of entry.
"^DD",115,115.06,3,"DT")
2851126
"^DD",115,115.06,4,0)
STATUS^RS^A:ACTIVE;C:COMPLETE;S:SAVED;X:CANCELLED;^0;5^Q
"^DD",115,115.06,4,1,0)
^.1
"^DD",115,115.06,4,1,1,0)
115^AOO^MUMPS
"^DD",115,115.06,4,1,1,1)
S:X="A" ^FHPT("AOO",DA(2),DA(1),DA)="" K:X'="A" ^FHPT("AOO",DA(2),DA(1),DA)
"^DD",115,115.06,4,1,1,2)
K ^FHPT("AOO",DA(2),DA(1),DA)
"^DD",115,115.06,4,1,1,"%D",0)
^^1^1^2940824^
"^DD",115,115.06,4,1,1,"%D",1,0)
This cross-reference is a list of active orders only.
"^DD",115,115.06,4,21,0)
^^3^3^2920319^^^^
"^DD",115,115.06,4,21,1,0)
This is the status of the order. A saved order is one that has
"^DD",115,115.06,4,21,2,0)
been responded to but continues to display as it may require
"^DD",115,115.06,4,21,3,0)
further or on-going action.
"^DD",115,115.06,4,"DT")
2890514
"^DD",115,115.06,5,0)
DATE/TIME CLEARED^D^^0;6^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.06,5,21,0)
^^1^1^2880718^^
"^DD",115,115.06,5,21,1,0)
This is the date/time that the order was completed or saved.
"^DD",115,115.06,5,"DT")
2851126
"^DD",115,115.06,6,0)
CLERK CLEARING^P200'^VA(200,^0;7^Q
"^DD",115,115.06,6,21,0)
^^2^2^2880710^
"^DD",115,115.06,6,21,1,0)
This is the dietetic person clearing the order and is
"^DD",115,115.06,6,21,2,0)
automatically captured at time of entry.
"^DD",115,115.06,6,"DT")
2851126
"^DD",115,115.06,7,0)
OE/RR ORDER^P100^OR(100,^0;8^Q
"^DD",115,115.06,7,21,0)
^^2^2^2890918^
"^DD",115,115.06,7,21,1,0)
This field contains a pointer to the OE/RR file order corresponding
"^DD",115,115.06,7,21,2,0)
to this order.
"^DD",115,115.06,7,"DT")
2890918
"^DD",115,115.07,0)
SUPPLEMENTAL FEEDING SUB-FIELD^^44^34
"^DD",115,115.07,0,"DT")
2940722
"^DD",115,115.07,0,"NM","SUPPLEMENTAL FEEDING")

"^DD",115,115.07,0,"UP")
115.01
"^DD",115,115.07,.01,0)
SUPPLEMENTAL FEEDING^NJ4,0^^0;1^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.07,.01,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",115,115.07,.01,21,0)
^^2^2^2910708^^
"^DD",115,115.07,.01,21,1,0)
This field is merely the sequence in which the various orders
"^DD",115,115.07,.01,21,2,0)
were entered and has no meaning beyond that.
"^DD",115,115.07,.01,"DT")
2871018
"^DD",115,115.07,1,0)
DATE/TIME ORDERED^RD^^0;2^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.07,1,21,0)
^^2^2^2910612^^^
"^DD",115,115.07,1,21,1,0)
This is the date/time at which the order was entered and is
"^DD",115,115.07,1,21,2,0)
captured automatically.
"^DD",115,115.07,1,"DT")
2871018
"^DD",115,115.07,2,0)
ENTERING CLERK^RP200'^VA(200,^0;3^Q
"^DD",115,115.07,2,21,0)
^^2^2^2880710^
"^DD",115,115.07,2,21,1,0)
This is the person actually entering the order and is captured
"^DD",115,115.07,2,21,2,0)
automatically at time of entry.
"^DD",115,115.07,2,"DT")
2871018
"^DD",115,115.07,3,0)
SF MENU^RP118.1'^FH(118.1,^0;4^Q
"^DD",115,115.07,3,21,0)
^^4^4^2880718^^
"^DD",115,115.07,3,21,1,0)
This is the supplemental feeding menu of the
"^DD",115,115.07,3,21,2,0)
Supplemental Feeding Menu file (118.1) that was selected. If
"^DD",115,115.07,3,21,3,0)
other than 'Individualized', the items from the selected
"^DD",115,115.07,3,21,4,0)
menu were moved into this order.
"^DD",115,115.07,3,"DT")
2871018
"^DD",115,115.07,10,0)
10AM FEEDING #1^*P118'^FH(118,^0;5^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,10,12)
Cannot select bulk nourishments
"^DD",115,115.07,10,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,10,21,0)
^^2^2^2880710^
"^DD",115,115.07,10,21,1,0)
This is the first supplemental feeding ordered for the 10am
"^DD",115,115.07,10,21,2,0)
feeding.
"^DD",115,115.07,10,"DT")
2871018
"^DD",115,115.07,11,0)
10AM #1 QTY^NJ2,0^^0;6^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,11,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",115,115.07,11,21,0)
^^1^1^2880710^^^
"^DD",115,115.07,11,21,1,0)
This is the ordered quantity of the first 10am feeding.
"^DD",115,115.07,11,"DT")
2871018
"^DD",115,115.07,12,0)
10AM FEEDING #2^*P118'^FH(118,^0;7^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,12,12)
Cannot select bulk nourishments
"^DD",115,115.07,12,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,12,21,0)
^^2^2^2880710^
"^DD",115,115.07,12,21,1,0)
This is the second supplemental feeding ordered for the 10am
"^DD",115,115.07,12,21,2,0)
feeding.
"^DD",115,115.07,13,0)
10AM #2 QTY^NJ2,0^^0;8^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,13,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,13,21,0)
^^1^1^2880710^^
"^DD",115,115.07,13,21,1,0)
This is the ordered quantity for the second 10am feeding.
"^DD",115,115.07,14,0)
10AM FEEDING #3^*P118'^FH(118,^0;9^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,14,12)
Cannot select bulk nourishments
"^DD",115,115.07,14,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,14,21,0)
^^2^2^2880710^
"^DD",115,115.07,14,21,1,0)
This is the third supplemental feeding ordered for the 10am
"^DD",115,115.07,14,21,2,0)
feeding.
"^DD",115,115.07,15,0)
10AM #3 QTY^NJ2,0^^0;10^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,15,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,15,21,0)
^^1^1^2880710^^
"^DD",115,115.07,15,21,1,0)
This is the ordered quantity for the third 10am feeding.
"^DD",115,115.07,16,0)
10AM FEEDING #4^*P118'^FH(118,^0;11^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,16,12)
Cannot select bulk nourishments
"^DD",115,115.07,16,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,16,21,0)
^^2^2^2880710^
"^DD",115,115.07,16,21,1,0)
This is the fourth supplemental feeding ordered for the 10am
"^DD",115,115.07,16,21,2,0)
feeding.
"^DD",115,115.07,17,0)
10AM #4 QTY^NJ2,0^^0;12^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,17,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,17,21,0)
^^1^1^2880710^
"^DD",115,115.07,17,21,1,0)
This is the ordered quantity of the fourth 10am feeding.
"^DD",115,115.07,18,0)
2PM FEEDING #1^*P118'^FH(118,^0;13^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,18,12)
Cannot select bulk nourishments
"^DD",115,115.07,18,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,18,21,0)
^^2^2^2880710^
"^DD",115,115.07,18,21,1,0)
This is the first supplemental feeding ordered for the 2pm
"^DD",115,115.07,18,21,2,0)
feeding.
"^DD",115,115.07,19,0)
2PM #1 QTY^NJ2,0^^0;14^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,19,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,19,21,0)
^^1^1^2880710^
"^DD",115,115.07,19,21,1,0)
This is the ordered quantity of the first 2pm feeding.
"^DD",115,115.07,20,0)
2PM FEEDING #2^*P118'^FH(118,^0;15^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,20,12)
Cannot select bulk nourishments
"^DD",115,115.07,20,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,20,21,0)
^^2^2^2880710^
"^DD",115,115.07,20,21,1,0)
This is the second supplemental feeding ordered for the 2pm
"^DD",115,115.07,20,21,2,0)
feeding.
"^DD",115,115.07,21,0)
2PM #2 QTY^NJ2,0^^0;16^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,21,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,21,21,0)
^^1^1^2880710^
"^DD",115,115.07,21,21,1,0)
This is the ordered quantity of the second 2pm feeding.
"^DD",115,115.07,22,0)
2PM FEEDING #3^*P118'^FH(118,^0;17^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,22,12)
Cannot select bulk nourishments
"^DD",115,115.07,22,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,22,21,0)
^^2^2^2880710^
"^DD",115,115.07,22,21,1,0)
This is the third supplemental feeding ordered for the 2pm
"^DD",115,115.07,22,21,2,0)
feeding.
"^DD",115,115.07,23,0)
2PM #3 QTY^NJ2,0^^0;18^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,23,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,23,21,0)
^^1^1^2880710^
"^DD",115,115.07,23,21,1,0)
This is the ordered quantity of the third 2pm feeding.
"^DD",115,115.07,24,0)
2PM FEEDING #4^*P118'^FH(118,^0;19^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,24,12)
Cannot select bulk nourishments
"^DD",115,115.07,24,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,24,21,0)
^^2^2^2880710^
"^DD",115,115.07,24,21,1,0)
This is the fourth supplemental feeding ordered for the 2pm
"^DD",115,115.07,24,21,2,0)
feeding.
"^DD",115,115.07,25,0)
2PM #4 QTY^NJ2,0^^0;20^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,25,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,25,21,0)
^^1^1^2880710^
"^DD",115,115.07,25,21,1,0)
This is the ordered quantity of the fourth 2pm feeding.
"^DD",115,115.07,26,0)
8PM FEEDING #1^*P118'^FH(118,^0;21^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,26,12)
Cannot select bulk nourishments
"^DD",115,115.07,26,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,26,21,0)
^^2^2^2880710^
"^DD",115,115.07,26,21,1,0)
This is the first supplemental feeding ordered for the 8pm
"^DD",115,115.07,26,21,2,0)
feeding.
"^DD",115,115.07,27,0)
8PM #1 QTY^NJ2,0^^0;22^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,27,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,27,21,0)
^^1^1^2880710^
"^DD",115,115.07,27,21,1,0)
This is the ordered quantity of the first 8pm feeding.
"^DD",115,115.07,28,0)
8PM FEEDING #2^*P118'^FH(118,^0;23^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,28,12)
Cannot select bulk nourishments
"^DD",115,115.07,28,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,28,21,0)
^^2^2^2880710^
"^DD",115,115.07,28,21,1,0)
This is the second supplemental feeding ordered for the 8pm
"^DD",115,115.07,28,21,2,0)
feeding.
"^DD",115,115.07,29,0)
8PM #2 QTY^NJ2,0^^0;24^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,29,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,29,21,0)
^^1^1^2880710^
"^DD",115,115.07,29,21,1,0)
This is the ordered quantity of the second 8pm feeding.
"^DD",115,115.07,30,0)
8PM FEEDING #3^*P118'^FH(118,^0;25^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,30,12)
Cannot select bulk nourishments
"^DD",115,115.07,30,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,30,21,0)
^^2^2^2880710^
"^DD",115,115.07,30,21,1,0)
This is the third supplemental feeding ordered for the 8pm
"^DD",115,115.07,30,21,2,0)
feeding.
"^DD",115,115.07,31,0)
8PM #3 QTY^NJ2,0^^0;26^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,31,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,31,21,0)
^^1^1^2880710^
"^DD",115,115.07,31,21,1,0)
This is the ordered quantity of the third 8pm feeding.
"^DD",115,115.07,32,0)
8PM FEEDING #4^*P118'^FH(118,^0;27^S DIC("S")="I $P(^(0),U,3)'=""Y""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115,115.07,32,12)
Cannot select bulk nourishments
"^DD",115,115.07,32,12.1)
S DIC("S")="I $P(^(0),U,3)'=""Y"""
"^DD",115,115.07,32,21,0)
^^2^2^2880710^
"^DD",115,115.07,32,21,1,0)
This is the fourth supplemental feeding ordered for the 8pm
"^DD",115,115.07,32,21,2,0)
feeding.
"^DD",115,115.07,33,0)
8PM #4 QTY^NJ2,0^^0;28^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.07,33,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 20
"^DD",115,115.07,33,21,0)
^^1^1^2880710^
"^DD",115,115.07,33,21,1,0)
This is the ordered quantity of the fourth 8pm feeding.
"^DD",115,115.07,34,0)
DIETARY OR THERAPEUTIC^RS^D:DIETARY;T:THERAPEUTIC;^0;29^Q
"^DD",115,115.07,34,21,0)
^^2^2^2880710^
"^DD",115,115.07,34,21,1,0)
This field indicates whether the supplemental feeding was
"^DD",115,115.07,34,21,2,0)
ordered for dietary or therapeutic reasons.
"^DD",115,115.07,34,"DT")
2850928
"^DD",115,115.07,40,0)
DATE/TIME LAST REVIEW^D^^0;30^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.07,40,21,0)
^^2^2^2880710^
"^DD",115,115.07,40,21,1,0)
This is the date/time this supplemental feeding order was
"^DD",115,115.07,40,21,2,0)
last reviewed for appropriateness.
"^DD",115,115.07,40,"DT")
2871018
"^DD",115,115.07,41,0)
REVIEW CLERK^P200'^VA(200,^0;31^Q
"^DD",115,115.07,41,21,0)
^^2^2^2880710^
"^DD",115,115.07,41,21,1,0)
This is the person conducting the last review and is captured
"^DD",115,115.07,41,21,2,0)
automatically at time of review.
"^DD",115,115.07,41,"DT")
2871018
"^DD",115,115.07,42,0)
DATE/TIME CANCELLED^D^^0;32^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.07,42,21,0)
^^1^1^2880710^
"^DD",115,115.07,42,21,1,0)
This is the date/time this order was cancelled.
"^DD",115,115.07,42,"DT")
2871018
"^DD",115,115.07,43,0)
CANCELLING CLERK^P200'^VA(200,^0;33^Q
"^DD",115,115.07,43,21,0)
^^2^2^2880710^
"^DD",115,115.07,43,21,1,0)
This is the person cancelling the order and is captured
"^DD",115,115.07,43,21,2,0)
automatically at time of cancellation.
"^DD",115,115.07,43,"DT")
2871018
"^DD",115,115.07,44,0)
DIET ASSOCIATED?^S^Y:YES;N:NO;^0;34^Q
"^DD",115,115.07,44,21,0)
^^2^2^2940722^
"^DD",115,115.07,44,21,1,0)
This field, if answered Yes, means this Supplemental Feeding Menu
"^DD",115,115.07,44,21,2,0)
is associated with a diet order else if answered No, means it is not.
"^DD",115,115.07,44,"DT")
2940722
"^DD",115,115.08,0)
STANDING ORDERS SUB-FIELD^^8^9
"^DD",115,115.08,0,"DT")
2940722
"^DD",115,115.08,0,"NM","STANDING ORDERS")

"^DD",115,115.08,0,"UP")
115.01
"^DD",115,115.08,.01,0)
STANDING ORDERS^NJ4,0^^0;1^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.08,.01,1,0)
^.1^^0
"^DD",115,115.08,.01,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.08,.01,21,0)
^.001^2^2^3051102^^^
"^DD",115,115.08,.01,21,1,0)
This field contains the sequence number of the standing order
"^DD",115,115.08,.01,21,2,0)
and has no meaning beyond that.
"^DD",115,115.08,.01,"DT")
2871108
"^DD",115,115.08,1,0)
ORDER^RP118.3'^FH(118.3,^0;2^Q
"^DD",115,115.08,1,1,0)
^.1
"^DD",115,115.08,1,1,1,0)
115^ASP^MUMPS
"^DD",115,115.08,1,1,1,1)
S ^FHPT("ASP",DA(2),DA(1),DA)=""
"^DD",115,115.08,1,1,1,2)
K ^FHPT("ASP",DA(2),DA(1),DA)
"^DD",115,115.08,1,1,1,"%D",0)
^^2^2^2940824^
"^DD",115,115.08,1,1,1,"%D",1,0)
This creates an "ASP" cross-reference for active orders. It
"^DD",115,115.08,1,1,1,"%D",2,0)
is killed when the order is cancelled.
"^DD",115,115.08,1,21,0)
^^2^2^2920103^^^
"^DD",115,115.08,1,21,1,0)
This field contains the standing order (from the Standing Orders
"^DD",115,115.08,1,21,2,0)
file, 118.3).
"^DD",115,115.08,1,"DT")
2871111
"^DD",115,115.08,2,0)
MEALS^RFX^^0;3^S:$P("ALL",X,1)="" X="BNE" S %=X,X="" S:%["B" X="B" S:%["N" X=X_"N" S:%["E" X=X_"E" K:$L(%)'=$L(X) X K %
"^DD",115,115.08,2,3)
Answer should be a string of meals (e.g., B  or BN or BNE) or A for all meals
"^DD",115,115.08,2,21,0)
^^2^2^2880901^^
"^DD",115,115.08,2,21,1,0)
This field contains the meals to which this standing order
"^DD",115,115.08,2,21,2,0)
is applicable.
"^DD",115,115.08,2,"DT")
2880901
"^DD",115,115.08,3,0)
DATE/TIME ORDERED^RD^^0;4^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.08,3,21,0)
^^2^2^2880714^
"^DD",115,115.08,3,21,1,0)
This field contains the date/time at which the standing
"^DD",115,115.08,3,21,2,0)
order was entered.
"^DD",115,115.08,3,"DT")
2871111
"^DD",115,115.08,4,0)
ENTERING CLERK^RP200'^VA(200,^0;5^Q
"^DD",115,115.08,4,21,0)
^^2^2^2950317^^
"^DD",115,115.08,4,21,1,0)
This field contains the user who entered the order and is
"^DD",115,115.08,4,21,2,0)
automatically captured at the time of entry.
"^DD",115,115.08,4,"DT")
2871111
"^DD",115,115.08,5,0)
DATE/TIME CANCELLED^D^^0;6^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.08,5,1,0)
^.1
"^DD",115,115.08,5,1,1,0)
115^ASP1^MUMPS
"^DD",115,115.08,5,1,1,1)
K ^FHPT("ASP",DA(2),DA(1),DA)
"^DD",115,115.08,5,1,1,2)
S ^FHPT("ASP",DA(2),DA(1),DA)=""
"^DD",115,115.08,5,1,1,"%D",0)
^^2^2^2940824^
"^DD",115,115.08,5,1,1,"%D",1,0)
This cross-reference will delete the "ASP" standing order
"^DD",115,115.08,5,1,1,"%D",2,0)
entry if the order is cancelled.
"^DD",115,115.08,5,21,0)
^^3^3^2911223^^
"^DD",115,115.08,5,21,1,0)
This field contains the date/time the standing order was
"^DD",115,115.08,5,21,2,0)
cancelled and is automatically captured at time of
"^DD",115,115.08,5,21,3,0)
cancellation.
"^DD",115,115.08,5,"DT")
2871111
"^DD",115,115.08,6,0)
CANCELLING CLERK^P200'^VA(200,^0;7^Q
"^DD",115,115.08,6,21,0)
^^2^2^2920320^^^
"^DD",115,115.08,6,21,1,0)
This field contains the user who entered the cancellation
"^DD",115,115.08,6,21,2,0)
and is automatically captured at time of cancellation.
"^DD",115,115.08,6,"DT")
2871111
"^DD",115,115.08,7,0)
QUANTITY^NJ1,0^^0;8^K:+X'=X!(X>9)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.08,7,3)
Type a Number between 1 and 9, 0 Decimal Digits
"^DD",115,115.08,7,21,0)
^^1^1^2920220^
"^DD",115,115.08,7,21,1,0)
This is the quantity of the Standing Order.
"^DD",115,115.08,7,"DT")
2920103
"^DD",115,115.08,8,0)
DIET ASSOCIATED?^S^Y:YES;N:NO;^0;9^Q
"^DD",115,115.08,8,21,0)
^^2^2^2940722^
"^DD",115,115.08,8,21,1,0)
This field, if answered Yes, means this Standing Order is associated
"^DD",115,115.08,8,21,2,0)
with a diet order else if answered No, means it is not.
"^DD",115,115.08,8,"DT")
2940722
"^DD",115,115.09,0)
FOOD PREFERENCES SUB-FIELD^^3^4
"^DD",115,115.09,0,"DT")
2950407
"^DD",115,115.09,0,"IX","B",115.09,.01)

"^DD",115,115.09,0,"IX","C",115.09,1)

"^DD",115,115.09,0,"NM","FOOD PREFERENCES")

"^DD",115,115.09,0,"UP")
115
"^DD",115,115.09,.01,0)
FOOD PREFERENCES^MP115.2'^FH(115.2,^0;1^Q
"^DD",115,115.09,.01,1,0)
^.1
"^DD",115,115.09,.01,1,1,0)
115.09^B
"^DD",115,115.09,.01,1,1,1)
S ^FHPT(DA(1),"P","B",$E(X,1,30),DA)=""
"^DD",115,115.09,.01,1,1,2)
K ^FHPT(DA(1),"P","B",$E(X,1,30),DA)
"^DD",115,115.09,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115,115.09,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the FOOD PREFERENCES field.
"^DD",115,115.09,.01,21,0)
^^2^2^2881201^^
"^DD",115,115.09,.01,21,1,0)
This field contains the food preference selected from the
"^DD",115,115.09,.01,21,2,0)
Food Preferences file (115.2).
"^DD",115,115.09,.01,"DT")
2880831
"^DD",115,115.09,1,0)
MEALS^RFX^^0;2^S:$P("ALL",X,1)="" X="BNE" S %=X,X="" S:%["B" X="B" S:%["N" X=X_"N" S:%["E" X=X_"E" K:$L(%)'=$L(X) X K %
"^DD",115,115.09,1,1,0)
^.1
"^DD",115,115.09,1,1,1,0)
115.09^C
"^DD",115,115.09,1,1,1,1)
S ^FHPT(DA(1),"P","C",$E(X,1,30),DA)=""
"^DD",115,115.09,1,1,1,2)
K ^FHPT(DA(1),"P","C",$E(X,1,30),DA)
"^DD",115,115.09,1,1,1,"%D",0)
^^1^1^3030623^
"^DD",115,115.09,1,1,1,"%D",1,0)
Cross reference by meals so that they can be displayed by meal.
"^DD",115,115.09,1,1,1,"DT")
3030623
"^DD",115,115.09,1,3)
Answer should be a string of meals (e.g., B  or BN or BNE) or A for all meals
"^DD",115,115.09,1,21,0)
^^2^2^2950418^^^^
"^DD",115,115.09,1,21,1,0)
This field contains the meals (B N and E) for which this food
"^DD",115,115.09,1,21,2,0)
preference is applicable.
"^DD",115,115.09,1,22)

"^DD",115,115.09,1,"DT")
3030623
"^DD",115,115.09,2,0)
QUANTITY^NJ1,0^^0;3^K:+X'=X!(X>9)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.09,2,3)
Type a Number between 1 and 9, 0 Decimal Digits
"^DD",115,115.09,2,21,0)
^^2^2^2920220^
"^DD",115,115.09,2,21,1,0)
This is the quantity of the Food Preference applicable to this
"^DD",115,115.09,2,21,2,0)
patient.
"^DD",115,115.09,2,"DT")
2920103
"^DD",115,115.09,3,0)
DIET ASSOCIATED?^S^Y:YES;N:NO;^0;4^Q
"^DD",115,115.09,3,21,0)
^^3^3^2950407^
"^DD",115,115.09,3,21,1,0)
This field, if answered Yes, means this Food Preference is a Diet
"^DD",115,115.09,3,21,2,0)
restriction that is associated with a diet order else if answered No,
"^DD",115,115.09,3,21,3,0)
means it is not.
"^DD",115,115.09,3,"DT")
2950407
"^DD",115,115.1,0)
TF PRODUCT SUB-FIELD^^5^6
"^DD",115,115.1,0,"DT")
2950926
"^DD",115,115.1,0,"IX","B",115.1,.01)

"^DD",115,115.1,0,"NM","TF PRODUCT")

"^DD",115,115.1,0,"UP")
115.04
"^DD",115,115.1,.01,0)
TF PRODUCT^MRP118.2'^FH(118.2,^0;1^Q
"^DD",115,115.1,.01,1,0)
^.1
"^DD",115,115.1,.01,1,1,0)
115.1^B
"^DD",115,115.1,.01,1,1,1)
S ^FHPT(DA(3),"A",DA(2),"TF",DA(1),"P","B",$E(X,1,30),DA)=""
"^DD",115,115.1,.01,1,1,2)
K ^FHPT(DA(3),"A",DA(2),"TF",DA(1),"P","B",$E(X,1,30),DA)
"^DD",115,115.1,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115,115.1,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the TF PRODUCT field.
"^DD",115,115.1,.01,1,1,"DT")
2910307
"^DD",115,115.1,.01,3)

"^DD",115,115.1,.01,21,0)
^^1^1^2920312^^^^
"^DD",115,115.1,.01,21,1,0)
This field contains the tubefeeding product to be administered.
"^DD",115,115.1,.01,"DT")
2910307
"^DD",115,115.1,1,0)
STRENGTH^RS^1:1/4;2:1/2;3:3/4;4:FULL;^0;2^Q
"^DD",115,115.1,1,3)

"^DD",115,115.1,1,21,0)
^.001^3^3^3070712^^
"^DD",115,115.1,1,21,1,0)
This field contains the quantity of the tubefeeding and may
"^DD",115,115.1,1,21,2,0)
be expressed in Kilocalories per day, ml's per hour, or
"^DD",115,115.1,1,21,3,0)
similar rates.
"^DD",115,115.1,1,"DT")
3050422
"^DD",115,115.1,2,0)
QUANTITY^RF^^0;3^K:$L(X)>50!($L(X)<3) X
"^DD",115,115.1,2,3)
Answer must be 3-50 characters in length.
"^DD",115,115.1,2,21,0)
^.001^2^2^3070712^^^^
"^DD",115,115.1,2,21,1,0)
This field contains the strength of the tubefeeding product
"^DD",115,115.1,2,21,2,0)
and the degree, if any, of dilution.
"^DD",115,115.1,2,"DT")
2950926
"^DD",115,115.1,3,0)
PRODUCT ML'S/DAY^NJ5,0^^0;4^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.1,3,3)
Type a Number between 0 and 10000, 0 Decimal Digits
"^DD",115,115.1,3,21,0)
^^2^2^3050422^
"^DD",115,115.1,3,21,1,0)
This is the number of ml's of the TF product which are contained in
"^DD",115,115.1,3,21,2,0)
the order for a day (or less than a day if so indicated).
"^DD",115,115.1,3,"DT")
3050422
"^DD",115,115.1,4,0)
WATER ML'S/DAY^NJ5,0^^0;5^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.1,4,3)
Type a Number between 0 and 10000, 0 Decimal Digits
"^DD",115,115.1,4,21,0)
^^2^2^3050422^
"^DD",115,115.1,4,21,1,0)
This is the number of ml's of water to be used to dilute the TF product
"^DD",115,115.1,4,21,2,0)
if indicated.
"^DD",115,115.1,4,"DT")
3050422
"^DD",115,115.1,5,0)
KCALS/DAY^NJ5,0^^0;6^K:+X'=X!(X>10000)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.1,5,3)
Type a Number between 0 and 10000, 0 Decimal Digits
"^DD",115,115.1,5,21,0)
^^1^1^2911204^
"^DD",115,115.1,5,21,1,0)
This is the number of Kcal's contained in this TF product as prepared.
"^DD",115,115.1,5,"DT")
2910401
"^DD",115,115.11,0)
Monitors SUB-FIELD^^6^6
"^DD",115,115.11,0,"DT")
3060711
"^DD",115,115.11,0,"IX","AC",115.11,1)

"^DD",115,115.11,0,"IX","B",115.11,.01)

"^DD",115,115.11,0,"NM","Monitors")

"^DD",115,115.11,0,"UP")
115.01
"^DD",115,115.11,.01,0)
Monitors^F^^0;1^K:$L(X)>60!($L(X)<3) X
"^DD",115,115.11,.01,1,0)
^.1
"^DD",115,115.11,.01,1,1,0)
115.11^B
"^DD",115,115.11,.01,1,1,1)
S ^FHPT(DA(2),"A",DA(1),"MO","B",$E(X,1,30),DA)=""
"^DD",115,115.11,.01,1,1,2)
K ^FHPT(DA(2),"A",DA(1),"MO","B",$E(X,1,30),DA)
"^DD",115,115.11,.01,3)
Answer must be 3-60 characters in length.
"^DD",115,115.11,.01,21,0)
^^2^2^3010119^
"^DD",115,115.11,.01,21,1,0)
This field contains Performance Monitors occurring during
"^DD",115,115.11,.01,21,2,0)
this admission.
"^DD",115,115.11,.01,"DT")
3010119
"^DD",115,115.11,1,0)
DATE/TIME^RD^^0;2^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.11,1,1,0)
^.1
"^DD",115,115.11,1,1,1,0)
115.11^AC
"^DD",115,115.11,1,1,1,1)
S ^FHPT(DA(2),"A",DA(1),"MO","AC",$E(X,1,30),DA)=""
"^DD",115,115.11,1,1,1,2)
K ^FHPT(DA(2),"A",DA(1),"MO","AC",$E(X,1,30),DA)
"^DD",115,115.11,1,1,1,"%D",0)
^^1^1^3010313^
"^DD",115,115.11,1,1,1,"%D",1,0)
This cross-reference allows monitors to be retrieved in date/time order.
"^DD",115,115.11,1,1,1,"DT")
3010313
"^DD",115,115.11,1,21,0)
^^1^1^3010119^
"^DD",115,115.11,1,21,1,0)
|TAB|This is the date/time the monitor was entered.
"^DD",115,115.11,1,"DT")
3010313
"^DD",115,115.11,2,0)
COMMENT^F^^0;3^K:$L(X)>60!($L(X)<3) X
"^DD",115,115.11,2,3)
Answer must be 3-60 characters in length.
"^DD",115,115.11,2,21,0)
^^2^2^3010119^
"^DD",115,115.11,2,21,1,0)
This is a comment entered by the person clearing the monitor.
"^DD",115,115.11,2,21,2,0)
It should reflect the action taken.
"^DD",115,115.11,2,"DT")
3010119
"^DD",115,115.11,3,0)
CLEARED BY^P200'^VA(200,^0;4^Q
"^DD",115,115.11,3,21,0)
^^1^1^3010119^
"^DD",115,115.11,3,21,1,0)
This is a pointer to the person clearing the monitor.
"^DD",115,115.11,3,"DT")
3010119
"^DD",115,115.11,5,0)
DATE/TIME CLEARED^D^^0;5^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.11,5,21,0)
^^1^1^3010119^
"^DD",115,115.11,5,21,1,0)
This is the date/time the monitor was cleared.
"^DD",115,115.11,5,"DT")
3010119
"^DD",115,115.11,6,0)
MONITOR VALUE^NJ9,3^^0;6^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."4.N) X
"^DD",115,115.11,6,3)
Type a number between 0 and 99999, 3 Decimal Digits
"^DD",115,115.11,6,21,0)
^^1^1^3060711^
"^DD",115,115.11,6,21,1,0)
This is a value of a specific monitor.
"^DD",115,115.11,6,"DT")
3060711
"^DD",115,115.1171,0)
COMMENTS SUB-FIELD^^.01^1
"^DD",115,115.1171,0,"NM","COMMENTS")

"^DD",115,115.1171,0,"UP")
115.011
"^DD",115,115.1171,.01,0)
COMMENTS^W^^0;1^Q
"^DD",115,115.1171,.01,21,0)
^^2^2^2891121^
"^DD",115,115.1171,.01,21,1,0)
This is the text of the comments relating to the
"^DD",115,115.1171,.01,21,2,0)
nutrition assessment.
"^DD",115,115.1171,.01,"DT")
2890616
"^DD",115,115.12,0)
ALERT SUB-FIELD^^3^4
"^DD",115,115.12,0,"DT")
3070416
"^DD",115,115.12,0,"IX","B",115.12,.01)

"^DD",115,115.12,0,"NM","ALERT")

"^DD",115,115.12,0,"UP")
115
"^DD",115,115.12,.01,0)
DATE ALERT CREATED^D^^0;1^S %DT="E" D ^%DT S X=Y K:X<1 X
"^DD",115,115.12,.01,1,0)
^.1
"^DD",115,115.12,.01,1,1,0)
115.12^B
"^DD",115,115.12,.01,1,1,1)
S ^FHPT(DA(1),"D","B",$E(X,1,30),DA)=""
"^DD",115,115.12,.01,1,1,2)
K ^FHPT(DA(1),"D","B",$E(X,1,30),DA)
"^DD",115,115.12,.01,3)
(No range limit on date)
"^DD",115,115.12,.01,21,0)
^^1^1^3070416^
"^DD",115,115.12,.01,21,1,0)
This is the date when this alert was created.
"^DD",115,115.12,.01,"DT")
3070416
"^DD",115,115.12,1,0)
TYPE OF ALERT^S^D:DRUG;^0;2^Q
"^DD",115,115.12,1,21,0)
^^2^2^3070416^
"^DD",115,115.12,1,21,1,0)
This is a type of alert. For now, it is only available for Food/Drug 
"^DD",115,115.12,1,21,2,0)
Classification.
"^DD",115,115.12,1,"DT")
3070416
"^DD",115,115.12,2,0)
PATIENT LOCATION^P119.6'^FH(119.6,^0;3^Q
"^DD",115,115.12,2,21,0)
^^1^1^3070416^
"^DD",115,115.12,2,21,1,0)
This is the location where a patient belong when the alert was created.
"^DD",115,115.12,2,"DT")
3070416
"^DD",115,115.12,3,0)
DRUG NAME^F^^0;4^K:$L(X)>40!($L(X)<1) X
"^DD",115,115.12,3,3)
Answer must be 1-40 characters in length
"^DD",115,115.12,3,21,0)
^^1^1^3070416^
"^DD",115,115.12,3,21,1,0)
This is a drug name in file #50.
"^DD",115,115.12,3,"DT")
3070416
"^DD",115,115.14,0)
DIET SEQUENCE SUB-FIELD^^1^2
"^DD",115,115.14,0,"NM","DIET SEQUENCE")

"^DD",115,115.14,0,"UP")
115.01
"^DD",115,115.14,.01,0)
DIET SEQUENCE DATE/TIME^DIX^^0;1^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X I $D(X) S DINUM=X
"^DD",115,115.14,.01,3)

"^DD",115,115.14,.01,21,0)
^^3^3^2880710^
"^DD",115,115.14,.01,21,1,0)
This field is the date/time that a diet order is to take effect;
"^DD",115,115.14,.01,21,2,0)
the order will remain in effect until the following date/time
"^DD",115,115.14,.01,21,3,0)
sequence entry.
"^DD",115,115.14,.01,"DT")
2880521
"^DD",115,115.14,1,0)
DIET ORDER #^RNJ5,0I^^0;2^K:+X'=X!(X>99999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.14,1,3)
Type a Number between 1 and 99999, 0 Decimal Digits
"^DD",115,115.14,1,21,0)
^^2^2^2880710^
"^DD",115,115.14,1,21,1,0)
This is the order number, in Field 3, of the diet order that is
"^DD",115,115.14,1,21,2,0)
to become effective at the indicated date/time.
"^DD",115,115.14,1,"DT")
2880521
"^DD",115,115.1619,0)
TUBEFEEDING PRODUCT SUB-FIELD^^5^6
"^DD",115,115.1619,0,"DT")
3030606
"^DD",115,115.1619,0,"IX","B",115.1619,.01)

"^DD",115,115.1619,0,"NM","TUBEFEEDING PRODUCT")

"^DD",115,115.1619,0,"UP")
115.016
"^DD",115,115.1619,.01,0)
TUBEFEEDING PRODUCT^MP118.2'^FH(118.2,^0;1^Q
"^DD",115,115.1619,.01,1,0)
^.1
"^DD",115,115.1619,.01,1,1,0)
115.1619^B
"^DD",115,115.1619,.01,1,1,1)
S ^FHPT(DA(2),"OP",DA(1),"TF","B",$E(X,1,30),DA)=""
"^DD",115,115.1619,.01,1,1,2)
K ^FHPT(DA(2),"OP",DA(1),"TF","B",$E(X,1,30),DA)
"^DD",115,115.1619,.01,21,0)
^.001^1^1^3030606^^^
"^DD",115,115.1619,.01,21,1,0)
This multiple stores the tubefeeding product(s) for the recurring meal.
"^DD",115,115.1619,.01,"DT")
3030606
"^DD",115,115.1619,1,0)
STRENGTH^S^1:1/4;2:1/2;3:3/4;4:FULL;^0;2^Q
"^DD",115,115.1619,1,21,0)
^.001^1^1^3030606^^
"^DD",115,115.1619,1,21,1,0)
This field stores the strength of the tubefeeding for the recurring meal.
"^DD",115,115.1619,1,"DT")
3030606
"^DD",115,115.1619,2,0)
QUANTITY^F^^0;3^K:$L(X)>20!($L(X)<3) X
"^DD",115,115.1619,2,3)
Answer must be 3-20 characters in length.
"^DD",115,115.1619,2,21,0)
^^1^1^3030606^
"^DD",115,115.1619,2,21,1,0)
This field stores the quantity of the tubefeeding for the recurring meal.
"^DD",115,115.1619,2,"DT")
3030606
"^DD",115,115.1619,3,0)
PRODUCT ML'S/DAY^NJ4,0^^0;4^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1619,3,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.1619,3,21,0)
^^2^2^3050422^
"^DD",115,115.1619,3,21,1,0)
This field stores the product ml's per day of this tubefeeding product
"^DD",115,115.1619,3,21,2,0)
for the recurring meal.
"^DD",115,115.1619,3,"DT")
3050422
"^DD",115,115.1619,4,0)
WATER ML'S/DAY^NJ4,0^^0;5^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1619,4,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.1619,4,21,0)
^^2^2^3050422^
"^DD",115,115.1619,4,21,1,0)
This field stores the water ml's per day of this tubefeeding product
"^DD",115,115.1619,4,21,2,0)
for the recurring meal.
"^DD",115,115.1619,4,"DT")
3050422
"^DD",115,115.1619,5,0)
KCALS/DAY^NJ4,0^^0;6^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1619,5,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.1619,5,21,0)
^.001^2^2^3030606^^
"^DD",115,115.1619,5,21,1,0)
This field stores the kcals per day of this tubefeeding product
"^DD",115,115.1619,5,21,2,0)
for the recurring meal.
"^DD",115,115.1619,5,"DT")
3030606
"^DD",115,115.1626,0)
STANDING ORDERS SUB-FIELD^^8^9
"^DD",115,115.1626,0,"DT")
3051103
"^DD",115,115.1626,0,"NM","STANDING ORDERS")

"^DD",115,115.1626,0,"UP")
115.016
"^DD",115,115.1626,.01,0)
STANDING ORDERS^NJ4,0^^0;1^K:+X'=X!(X>9999)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1626,.01,1,0)
^.1^^0
"^DD",115,115.1626,.01,3)
Type a Number between 1 and 9999, 0 Decimal Digits
"^DD",115,115.1626,.01,21,0)
^^2^2^3051103^
"^DD",115,115.1626,.01,21,1,0)
This field contains the sequence number of the outpatient standing order
"^DD",115,115.1626,.01,21,2,0)
and has no meaning beyond that.  
"^DD",115,115.1626,.01,"DT")
3051103
"^DD",115,115.1626,1,0)
ORDER^RP118.3'^FH(118.3,^0;2^Q
"^DD",115,115.1626,1,21,0)
^^2^2^3051103^
"^DD",115,115.1626,1,21,1,0)
This field contains the outpatient standing order from Standing Orders
"^DD",115,115.1626,1,21,2,0)
file (#118.3).
"^DD",115,115.1626,1,"DT")
3060927
"^DD",115,115.1626,2,0)
MEALS^RFX^^0;3^S:$P("ALL",X,1)="" X="BNE" S %=X,X="" S:%["B" X="B" S:%["N" X=X_"N" S:%["E" X=X_"E" K:$L(%)'=$L(X) X K %
"^DD",115,115.1626,2,3)
Answer should be a string of meals (e.g., B  or BN or BNE) or A for all meals
"^DD",115,115.1626,2,21,0)
^^2^2^3051103^
"^DD",115,115.1626,2,21,1,0)
This field contains the meals to which this outpatient standing
"^DD",115,115.1626,2,21,2,0)
order is applicable.
"^DD",115,115.1626,2,"DT")
3051103
"^DD",115,115.1626,3,0)
DATE/TIME ORDERED^RD^^0;4^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.1626,3,21,0)
^^2^2^3051103^
"^DD",115,115.1626,3,21,1,0)
This field contains the date/time at which the outpatient standing
"^DD",115,115.1626,3,21,2,0)
order was entered.  
"^DD",115,115.1626,3,"DT")
3051103
"^DD",115,115.1626,4,0)
ENTERING CLERK^RP200'^VA(200,^0;5^Q
"^DD",115,115.1626,4,21,0)
^^2^2^3051103^
"^DD",115,115.1626,4,21,1,0)
This field contains the user who entered the outpatient
"^DD",115,115.1626,4,21,2,0)
standing order and is automatically captured at the time of entry.
"^DD",115,115.1626,4,"DT")
3051103
"^DD",115,115.1626,5,0)
DATE/TIME CANCELLED^D^^0;6^S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.1626,5,21,0)
^^3^3^3051103^
"^DD",115,115.1626,5,21,1,0)
This field contains the date/time the outpatient standing order
"^DD",115,115.1626,5,21,2,0)
was cancelled and is automatically captured at time of
"^DD",115,115.1626,5,21,3,0)
cancellation.
"^DD",115,115.1626,5,"DT")
3060927
"^DD",115,115.1626,6,0)
CANCELLING CLERK^P200'^VA(200,^0;7^Q
"^DD",115,115.1626,6,21,0)
^^2^2^3051103^
"^DD",115,115.1626,6,21,1,0)
This field contains the user who entered the cancellation
"^DD",115,115.1626,6,21,2,0)
and is automatically captured at time of cancellation.  
"^DD",115,115.1626,6,"DT")
3051103
"^DD",115,115.1626,7,0)
QUANTITY^NJ1,0^^0;8^K:+X'=X!(X>9)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1626,7,3)
Type a Number between 1 and 9, 0 Decimal Digits
"^DD",115,115.1626,7,21,0)
^^1^1^3051103^
"^DD",115,115.1626,7,21,1,0)
This is the quantity of the outpatient Standing Order.
"^DD",115,115.1626,7,"DT")
3051103
"^DD",115,115.1626,8,0)
DIET ASSOCIATED?^S^Y:YES;N:NO;^0;9^Q
"^DD",115,115.1626,8,21,0)
^^2^2^3051103^
"^DD",115,115.1626,8,21,1,0)
This field, if answered Yes, means this Standing Order is associated
"^DD",115,115.1626,8,21,2,0)
with a diet order else if answered No, means it is not.  
"^DD",115,115.1626,8,"DT")
3051103
"^DD",115,115.1627,0)
SUPPLEMENTAL FEEDING SUB-FIELD^^33^34
"^DD",115,115.1627,0,"DT")
3051109
"^DD",115,115.1627,0,"NM","SUPPLEMENTAL FEEDING")

"^DD",115,115.1627,0,"UP")
115.016
"^DD",115,115.1627,.01,0)
SUPPLEMENTAL FEEDING^MNJ4,0^^0;1^K:+X'=X!(X>9999)!(X<0)!(X?.E1"."1N.N) X
"^DD",115,115.1627,.01,3)
Type a Number between 0 and 9999, 0 Decimal Digits
"^DD",115,115.1627,.01,21,0)
^^2^2^3060926^
"^DD",115,115.1627,.01,21,1,0)
This field is merely the sequence in which various orders for
"^DD",115,115.1627,.01,21,2,0)
outpatient SFs were entered and has no meaning beyond that.
"^DD",115,115.1627,.01,"DT")
3060315
"^DD",115,115.1627,1,0)
DATE/TIME ORDERED^D^^0;2^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.1627,1,21,0)
^^2^2^3060306^
"^DD",115,115.1627,1,21,1,0)
This is the date/time at which the order was entered and is
"^DD",115,115.1627,1,21,2,0)
captured automatically.
"^DD",115,115.1627,1,"DT")
3060306
"^DD",115,115.1627,2,0)
ENTERING CLERK^P200'^VA(200,^0;3^Q
"^DD",115,115.1627,2,21,0)
^^2^2^3060306^
"^DD",115,115.1627,2,21,1,0)
This is the person actually entering the order and is captured
"^DD",115,115.1627,2,21,2,0)
automatically at time of entry.
"^DD",115,115.1627,2,"DT")
3060306
"^DD",115,115.1627,3,0)
SF MENU^P118.1'^FH(118.1,^0;4^Q
"^DD",115,115.1627,3,21,0)
^^3^3^3060306^
"^DD",115,115.1627,3,21,1,0)
This is the supplemental feeding menu of the Supplemental Feeding
"^DD",115,115.1627,3,21,2,0)
Menu file (118.1) that was selected.  If other than "Individualized', 
"^DD",115,115.1627,3,21,3,0)
the items from the selected menu were moved into this order.
"^DD",115,115.1627,3,"DT")
3060306
"^DD",115,115.1627,4,0)
10AM FEEDING #1^P118'^FH(118,^0;5^Q
"^DD",115,115.1627,4,21,0)
^^2^2^3060306^
"^DD",115,115.1627,4,21,1,0)
This is the first supplemental feeding ordered for the 10am
"^DD",115,115.1627,4,21,2,0)
feeding time.
"^DD",115,115.1627,4,"DT")
3060306
"^DD",115,115.1627,5,0)
10AM #1 QTY^NJ2,0^^0;6^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1627,5,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",115,115.1627,5,21,0)
^^1^1^2880710^^^
"^DD",115,115.1627,5,21,1,0)
This is the ordered quantity of the first 10am feeding.
"^DD",115,115.1627,5,"DT")
3051109
"^DD",115,115.1627,6,0)
10AM FEEDING #2^P118'^FH(118,^0;7^Q
"^DD",115,115.1627,6,21,0)
^^2^2^2880710^
"^DD",115,115.1627,6,21,1,0)
This is the second supplemental feeding ordered for the 10am
"^DD",115,115.1627,6,21,2,0)
feeding.
"^DD",115,115.1627,6,"DT")
3051109
"^DD",115,115.1627,7,0)
10AM #2 QTY^NJ2,0^^0;8^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1627,7,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",115,115.1627,7,21,0)
^^2^2^3060306^
"^DD",115,115.1627,7,21,1,0)
This is the outpatient Supplemental Feeding ordered
"^DD",115,115.1627,7,21,2,0)
quantity for the second 10am feeding.
"^DD",115,115.1627,7,"DT")
3060306
"^DD",115,115.1627,8,0)
10AM FEEDING #3^P118'^FH(118,^0;9^Q
"^DD",115,115.1627,8,21,0)
^^2^2^3060306^
"^DD",115,115.1627,8,21,1,0)
This is the third supplemental feeding ordered for the 10am
"^DD",115,115.1627,8,21,2,0)
feeding. 
"^DD",115,115.1627,8,"DT")
3060306
"^DD",115,115.1627,9,0)
10AM #3 QTY^NJ2,0^^0;10^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1627,9,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",115,115.1627,9,21,0)
^^1^1^3060306^
"^DD",115,115.1627,9,21,1,0)
This is the ordered quantity for the third 10am feeding. 
"^DD",115,115.1627,9,"DT")
3060306
"^DD",115,115.1627,10,0)
10AM FEEDING #4^P118'^FH(118,^0;11^Q
"^DD",115,115.1627,10,21,0)
^^2^2^3060306^
"^DD",115,115.1627,10,21,1,0)
This is the fourth supplemental feeding ordered for the 10am
"^DD",115,115.1627,10,21,2,0)
feeding. 
"^DD",115,115.1627,10,"DT")
3060306
"^DD",115,115.1627,11,0)
10AM #4 QTY^NJ2,0^^0;12^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1627,11,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",115,115.1627,11,21,0)
^^1^1^3060306^
"^DD",115,115.1627,11,21,1,0)
This is the ordered quantity of the fourth 10am feeding. 
"^DD",115,115.1627,11,"DT")
3060306
"^DD",115,115.1627,12,0)
2PM FEEDING #1^P118'^FH(118,^0;13^Q
"^DD",115,115.1627,12,21,0)
^^2^2^2880710^
"^DD",115,115.1627,12,21,1,0)
This is the first supplemental feeding ordered for the 2pm
"^DD",115,115.1627,12,21,2,0)
feeding.
"^DD",115,115.1627,12,"DT")
3051109
"^DD",115,115.1627,13,0)
2PM #1 QTY^NJ2,0^^0;14^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1627,13,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",115,115.1627,13,21,0)
^^1^1^2880710^
"^DD",115,115.1627,13,21,1,0)
This is the ordered quantity of the first 2pm feeding.
"^DD",115,115.1627,13,"DT")
3051109
"^DD",115,115.1627,14,0)
2PM FEEDING #2^P118'^FH(118,^0;15^Q
"^DD",115,115.1627,14,21,0)
^^2^2^2880710^
"^DD",115,115.1627,14,21,1,0)
This is the second supplemental feeding ordered for the 2pm
"^DD",115,115.1627,14,21,2,0)
feeding.
"^DD",115,115.1627,14,"DT")
3051109
"^DD",115,115.1627,15,0)
2PM #2 QTY^NJ2,0^^0;16^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1627,15,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",115,115.1627,15,21,0)
^^1^1^2880710^
"^DD",115,115.1627,15,21,1,0)
This is the ordered quantity of the second 2pm feeding.
"^DD",115,115.1627,15,"DT")
3051109
"^DD",115,115.1627,16,0)
2PM FEEDING #3^P118'^FH(118,^0;17^Q
"^DD",115,115.1627,16,21,0)
^^2^2^2880710^
"^DD",115,115.1627,16,21,1,0)
This is the third supplemental feeding ordered for the 2pm
"^DD",115,115.1627,16,21,2,0)
feeding.
"^DD",115,115.1627,16,"DT")
3051109
"^DD",115,115.1627,17,0)
2PM #3 QTY^NJ2,0^^0;18^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1627,17,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",115,115.1627,17,21,0)
^^1^1^2880710^
"^DD",115,115.1627,17,21,1,0)
This is the ordered quantity of the third 2pm feeding.
"^DD",115,115.1627,17,"DT")
3051109
"^DD",115,115.1627,18,0)
2PM FEEDING #4^P118'^FH(118,^0;19^Q
"^DD",115,115.1627,18,21,0)
^^2^2^2880710^
"^DD",115,115.1627,18,21,1,0)
This is the fourth supplemental feeding ordered for the 2pm
"^DD",115,115.1627,18,21,2,0)
feeding.
"^DD",115,115.1627,18,"DT")
3051109
"^DD",115,115.1627,19,0)
2PM #4 QTY^NJ2,0^^0;20^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1627,19,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",115,115.1627,19,21,0)
^^1^1^2880710^
"^DD",115,115.1627,19,21,1,0)
This is the ordered quantity of the fourth 2pm feeding.
"^DD",115,115.1627,19,"DT")
3051109
"^DD",115,115.1627,20,0)
8PM FEEDING #1^P118'^FH(118,^0;21^Q
"^DD",115,115.1627,20,21,0)
^^2^2^2880710^
"^DD",115,115.1627,20,21,1,0)
This is the first supplemental feeding ordered for the 8pm
"^DD",115,115.1627,20,21,2,0)
feeding.
"^DD",115,115.1627,20,"DT")
3051109
"^DD",115,115.1627,21,0)
8PM #1 QTY^NJ2,0^^0;22^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1627,21,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",115,115.1627,21,21,0)
^^1^1^2880710^
"^DD",115,115.1627,21,21,1,0)
This is the ordered quantity of the first 8pm feeding.
"^DD",115,115.1627,21,"DT")
3051109
"^DD",115,115.1627,22,0)
8PM FEEDING #2^P118'^FH(118,^0;23^Q
"^DD",115,115.1627,22,21,0)
^^2^2^2880710^
"^DD",115,115.1627,22,21,1,0)
This is the second supplemental feeding ordered for the 8pm
"^DD",115,115.1627,22,21,2,0)
feeding.
"^DD",115,115.1627,22,"DT")
3051109
"^DD",115,115.1627,23,0)
8PM #2 QTY^NJ2,0^^0;24^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1627,23,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",115,115.1627,23,21,0)
^^1^1^2880710^
"^DD",115,115.1627,23,21,1,0)
This is the ordered quantity of the second 8pm feeding.
"^DD",115,115.1627,23,"DT")
3051109
"^DD",115,115.1627,24,0)
8PM FEEDING #3^P118'^FH(118,^0;25^Q
"^DD",115,115.1627,24,21,0)
^^2^2^2880710^
"^DD",115,115.1627,24,21,1,0)
This is the third supplemental feeding ordered for the 8pm
"^DD",115,115.1627,24,21,2,0)
feeding.
"^DD",115,115.1627,24,"DT")
3051109
"^DD",115,115.1627,25,0)
8PM #3 QTY^NJ2,0^^0;26^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1627,25,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",115,115.1627,25,21,0)
^^1^1^2880710^
"^DD",115,115.1627,25,21,1,0)
This is the ordered quantity of the third 8pm feeding.
"^DD",115,115.1627,25,"DT")
3051109
"^DD",115,115.1627,26,0)
8PM FEEDING #4^P118'^FH(118,^0;27^Q
"^DD",115,115.1627,26,21,0)
^^2^2^2880710^
"^DD",115,115.1627,26,21,1,0)
This is the fourth supplemental feeding ordered for the 8pm
"^DD",115,115.1627,26,21,2,0)
feeding.
"^DD",115,115.1627,26,"DT")
3051109
"^DD",115,115.1627,27,0)
8PM #4 QTY^NJ2,0^^0;28^K:+X'=X!(X>20)!(X<1)!(X?.E1"."1N.N) X
"^DD",115,115.1627,27,3)
Type a Number between 1 and 20, 0 Decimal Digits
"^DD",115,115.1627,27,21,0)
^^1^1^2880710^
"^DD",115,115.1627,27,21,1,0)
This is the ordered quantity of the fourth 8pm feeding.
"^DD",115,115.1627,27,"DT")
3051109
"^DD",115,115.1627,28,0)
DIETARY OR THERAPEUTIC^S^D:DIETARY;T:THERAPEUTIC;^0;29^Q
"^DD",115,115.1627,28,21,0)
^^2^2^2880710^
"^DD",115,115.1627,28,21,1,0)
This field indicates whether the supplemental feeding was
"^DD",115,115.1627,28,21,2,0)
ordered for dietary or therapeutic reasons.
"^DD",115,115.1627,28,"DT")
3051109
"^DD",115,115.1627,29,0)
DATE/TIME LAST REVIEW^D^^0;30^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.1627,29,21,0)
^^2^2^2880710^
"^DD",115,115.1627,29,21,1,0)
This is the date/time this supplemental feeding order was
"^DD",115,115.1627,29,21,2,0)
last reviewed for appropriateness.
"^DD",115,115.1627,29,"DT")
3051109
"^DD",115,115.1627,30,0)
REVIEW CLERK^P200'^VA(200,^0;31^Q
"^DD",115,115.1627,30,21,0)
^^2^2^2880710^
"^DD",115,115.1627,30,21,1,0)
This is the person conducting the last review and is captured
"^DD",115,115.1627,30,21,2,0)
automatically at time of review.
"^DD",115,115.1627,30,"DT")
3051109
"^DD",115,115.1627,31,0)
DATE/TIME CANCELLED^D^^0;32^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",115,115.1627,31,21,0)
^^1^1^2880710^
"^DD",115,115.1627,31,21,1,0)
This is the date/time this order was cancelled.
"^DD",115,115.1627,31,"DT")
3051109
"^DD",115,115.1627,32,0)
CANCELLING CLERK^P200'^VA(200,^0;33^Q
"^DD",115,115.1627,32,21,0)
^^2^2^2880710^
"^DD",115,115.1627,32,21,1,0)
This is the person cancelling the order and is captured
"^DD",115,115.1627,32,21,2,0)
automatically at time of cancellation.
"^DD",115,115.1627,32,"DT")
3051109
"^DD",115,115.1627,33,0)
DIET ASSOCIATED?^S^Y:YES;N:NO;^0;34^Q
"^DD",115,115.1627,33,21,0)
^^2^2^2940722^
"^DD",115,115.1627,33,21,1,0)
This field, if answered Yes, means this Supplemental Feeding Menu
"^DD",115,115.1627,33,21,2,0)
is associated with a diet order else if answered No, means it is not.
"^DD",115,115.1627,33,"DT")
3051109
"^DD",115.2,115.2,0)
FIELD^^27^10
"^DD",115.2,115.2,0,"DT")
3070712
"^DD",115.2,115.2,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",115.2,115.2,0,"IX","AC",115.2,99)

"^DD",115.2,115.2,0,"IX","AD",115.2,1)

"^DD",115.2,115.2,0,"IX","B",115.2,.01)

"^DD",115.2,115.2,0,"IX","C",115.225,.01)

"^DD",115.2,115.2,0,"IX","D",115.2,26)

"^DD",115.2,115.2,0,"NM","FOOD PREFERENCES")

"^DD",115.2,115.2,0,"PT",111.119,.01)

"^DD",115.2,115.2,0,"PT",115.09,.01)

"^DD",115.2,115.2,0,"SCR")
I '$D(^FH(115.2,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",115.2,115.2,0,"VRPK")
FH
"^DD",115.2,115.2,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",115.2,115.2,.01,1,0)
^.1
"^DD",115.2,115.2,.01,1,1,0)
115.2^B
"^DD",115.2,115.2,.01,1,1,1)
S ^FH(115.2,"B",$E(X,1,30),DA)=""
"^DD",115.2,115.2,.01,1,1,2)
K ^FH(115.2,"B",$E(X,1,30),DA)
"^DD",115.2,115.2,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115.2,115.2,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",115.2,115.2,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",115.2,115.2,.01,21,0)
^^2^2^2880901^
"^DD",115.2,115.2,.01,21,1,0)
This field contains the name of a selectable food preference, such
"^DD",115.2,115.2,.01,21,2,0)
as coffee or tea, or a generic preference, such as 'no liver'.
"^DD",115.2,115.2,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",115.2,115.2,1,0)
LIKE OR DISLIKE^RS^L:LIKE;D:DISLIKE;^0;2^Q
"^DD",115.2,115.2,1,1,0)
^.1
"^DD",115.2,115.2,1,1,1,0)
115.2^AD^MUMPS
"^DD",115.2,115.2,1,1,1,1)
K:X="L" ^FH(115.2,DA,"X") S:X="D" $P(^FH(115.2,DA,0),"^",4,6)="^^"
"^DD",115.2,115.2,1,1,1,2)
Q
"^DD",115.2,115.2,1,1,1,"DT")
3000914
"^DD",115.2,115.2,1,21,0)
^^2^2^2880913^^
"^DD",115.2,115.2,1,21,1,0)
This field indicates whether the item is a selectable item or
"^DD",115.2,115.2,1,21,2,0)
a food preference.
"^DD",115.2,115.2,1,"DT")
2880913
"^DD",115.2,115.2,3,0)
RECIPE^P114'^FH(114,^0;4^Q
"^DD",115.2,115.2,3,21,0)
^^2^2^2910506^^
"^DD",115.2,115.2,3,21,1,0)
In the case of a selectable item, this field points to the selection
"^DD",115.2,115.2,3,21,2,0)
in the Recipe file (114).
"^DD",115.2,115.2,10,0)
EXCLUDED RECIPES^115.21P^^X;0
"^DD",115.2,115.2,10,21,0)
^^3^3^2910506^^
"^DD",115.2,115.2,10,21,1,0)
In the case of a food preference, this multiple is the list of
"^DD",115.2,115.2,10,21,2,0)
excluded recipes contained in the Recipe file (114) which should
"^DD",115.2,115.2,10,21,3,0)
NOT be served to the patient.
"^DD",115.2,115.2,20,0)
BREAD/BEVERAGE DEFAULT?^S^1:YES;0:NO;^0;5^Q
"^DD",115.2,115.2,20,21,0)
^^3^3^2940419^^^^
"^DD",115.2,115.2,20,21,1,0)
This field, if answered Yes, means this food preference is the standard
"^DD",115.2,115.2,20,21,2,0)
default bread/beverage for the patients on the tray tickets else if
"^DD",115.2,115.2,20,21,3,0)
answered No, means it is not.
"^DD",115.2,115.2,20,"DT")
2940419
"^DD",115.2,115.2,21,0)
MEALS^FX^^0;6^S:$P("ALL",X,1)="" X="BNE" S %=X,X="" S:%["B" X="B" S:%["N" X=X_"N" S:%["E" X=X_"E" K:$L(%)'=$L(X) X K %
"^DD",115.2,115.2,21,3)
Answer should be a string of meals (e.g., B or BN or BNE) or A for all meals.
"^DD",115.2,115.2,21,21,0)
^^2^2^2940225^
"^DD",115.2,115.2,21,21,1,0)
This field contains the meals (B N and E) for which this standard
"^DD",115.2,115.2,21,21,2,0)
default food preference is applicable.
"^DD",115.2,115.2,21,"DT")
2940225
"^DD",115.2,115.2,25,0)
GMR ALLERGIES^115.225P^^ALG;0
"^DD",115.2,115.2,26,0)
SYNONYM^F^^0;3^K:$L(X)>25!($L(X)<1) X
"^DD",115.2,115.2,26,1,0)
^.1
"^DD",115.2,115.2,26,1,1,0)
115.2^D
"^DD",115.2,115.2,26,1,1,1)
S ^FH(115.2,"D",$E(X,1,30),DA)=""
"^DD",115.2,115.2,26,1,1,2)
K ^FH(115.2,"D",$E(X,1,30),DA)
"^DD",115.2,115.2,26,1,1,"%D",0)
^^1^1^3070405^
"^DD",115.2,115.2,26,1,1,"%D",1,0)
Cross reference to look-up food preferences by SYNONYM field.
"^DD",115.2,115.2,26,1,1,"DT")
3070405
"^DD",115.2,115.2,26,3)
Answer must be 1-25 characters in length.
"^DD",115.2,115.2,26,21,0)
^^3^3^3070808^
"^DD",115.2,115.2,26,21,1,0)
This field may contain a synonym for the food preference name.
"^DD",115.2,115.2,26,21,2,0)
The synonym is generally terminology known and used by ward/medical 
"^DD",115.2,115.2,26,21,3,0)
personnel.
"^DD",115.2,115.2,26,"DT")
3070405
"^DD",115.2,115.2,27,0)
EXCLUDE EMBEDDED RECIPES?^S^Y:YES;N:NO;^0;7^Q
"^DD",115.2,115.2,27,21,0)
^^2^2^3070712^
"^DD",115.2,115.2,27,21,1,0)
Set this field to YES if recipes embedded in the excluded recipes for 
"^DD",115.2,115.2,27,21,2,0)
this food preference should be removed from tray tickets.
"^DD",115.2,115.2,27,"DT")
3070712
"^DD",115.2,115.2,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",115.2,115.2,99,1,0)
^.1
"^DD",115.2,115.2,99,1,1,0)
115.2^AC^MUMPS
"^DD",115.2,115.2,99,1,1,1)
K:X'="Y" ^FH(115.2,DA,"I")
"^DD",115.2,115.2,99,1,1,2)
K ^FH(115.2,DA,"I")
"^DD",115.2,115.2,99,1,1,"%D",0)
^^2^2^2940818^
"^DD",115.2,115.2,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",115.2,115.2,99,1,1,"%D",2,0)
inactive entries.
"^DD",115.2,115.2,99,21,0)
^^2^2^2940225^^
"^DD",115.2,115.2,99,21,1,0)
This field, if answered YES, will prohibit further selection
"^DD",115.2,115.2,99,21,2,0)
of this preference unless the FHMGR key is held.
"^DD",115.2,115.2,99,"DT")
2900918
"^DD",115.2,115.21,0)
EXCLUDED RECIPES SUB-FIELD^^.01^1
"^DD",115.2,115.21,0,"IX","B",115.21,.01)

"^DD",115.2,115.21,0,"NM","EXCLUDED RECIPES")

"^DD",115.2,115.21,0,"UP")
115.2
"^DD",115.2,115.21,.01,0)
EXCLUDED RECIPES^MP114'^FH(114,^0;1^Q
"^DD",115.2,115.21,.01,1,0)
^.1
"^DD",115.2,115.21,.01,1,1,0)
115.21^B
"^DD",115.2,115.21,.01,1,1,1)
S ^FH(115.2,DA(1),"X","B",$E(X,1,30),DA)=""
"^DD",115.2,115.21,.01,1,1,2)
K ^FH(115.2,DA(1),"X","B",$E(X,1,30),DA)
"^DD",115.2,115.21,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",115.2,115.21,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the EXCLUDED RECIPES field.
"^DD",115.2,115.21,.01,21,0)
^^3^3^2880901^
"^DD",115.2,115.21,.01,21,1,0)
This field is a pointer to the Recipe file (114) and is a recipe
"^DD",115.2,115.21,.01,21,2,0)
which should NOT be served to patients expressing this food
"^DD",115.2,115.21,.01,21,3,0)
preference.
"^DD",115.2,115.225,0)
GMR ALLERGIES SUB-FIELD^^.01^1
"^DD",115.2,115.225,0,"DT")
3070215
"^DD",115.2,115.225,0,"IX","B",115.225,.01)

"^DD",115.2,115.225,0,"NM","GMR ALLERGIES")

"^DD",115.2,115.225,0,"UP")
115.2
"^DD",115.2,115.225,.01,0)
GMR ALLERGIES^M*P120.82'^GMRD(120.82,^0;1^S DIC("S")="I $P(^(0),U,2)[""F""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",115.2,115.225,.01,1,0)
^.1
"^DD",115.2,115.225,.01,1,1,0)
115.225^B
"^DD",115.2,115.225,.01,1,1,1)
S ^FH(115.2,DA(1),"ALG","B",$E(X,1,30),DA)=""
"^DD",115.2,115.225,.01,1,1,2)
K ^FH(115.2,DA(1),"ALG","B",$E(X,1,30),DA)
"^DD",115.2,115.225,.01,1,2,0)
115.2^C
"^DD",115.2,115.225,.01,1,2,1)
S ^FH(115.2,"C",$E(X,1,30),DA(1),DA)=""
"^DD",115.2,115.225,.01,1,2,2)
K ^FH(115.2,"C",$E(X,1,30),DA(1),DA)
"^DD",115.2,115.225,.01,1,2,"%D",0)
^.101^1^1^3070405^^
"^DD",115.2,115.225,.01,1,2,"%D",1,0)
Cross reference the entire file by the GMR Allergies multiple.
"^DD",115.2,115.225,.01,1,2,"DT")
3070221
"^DD",115.2,115.225,.01,12)
FOOD TYPE ALLERGIES ONLY
"^DD",115.2,115.225,.01,12.1)
S DIC("S")="I $P(^(0),U,2)[""F"""
"^DD",115.2,115.225,.01,21,0)
^.001^2^2^3070215^^^^
"^DD",115.2,115.225,.01,21,1,0)
This field stores the pointer to the applicable GMRA ALLERGIES entry
"^DD",115.2,115.225,.01,21,2,0)
for Food Preferences that are based on actual ALLERGIES.
"^DD",115.2,115.225,.01,"DT")
3070221
"^DD",119.6,119.6,0)
FIELD^^112^39
"^DD",119.6,119.6,0,"DDA")
N
"^DD",119.6,119.6,0,"DT")
3070226
"^DD",119.6,119.6,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",119.6,119.6,0,"IX","AC",119.6,99)

"^DD",119.6,119.6,0,"IX","AL",119.64,.01)

"^DD",119.6,119.6,0,"IX","AP",119.6,11)

"^DD",119.6,119.6,0,"IX","AR",119.62,.01)

"^DD",119.6,119.6,0,"IX","AS1",119.6,3)

"^DD",119.6,119.6,0,"IX","AS2",119.6,4)

"^DD",119.6,119.6,0,"IX","AS3",119.6,5)

"^DD",119.6,119.6,0,"IX","AW",119.63,.01)

"^DD",119.6,119.6,0,"IX","B",119.6,.01)

"^DD",119.6,119.6,0,"IX","C",119.6,102)

"^DD",119.6,119.6,0,"IX","CO",119.6,6)

"^DD",119.6,119.6,0,"NM","NUTRITION LOCATION")

"^DD",119.6,119.6,0,"PT",115.01,11)

"^DD",119.6,119.6,0,"PT",115.01,13)

"^DD",119.6,119.6,0,"PT",115.012,5)

"^DD",119.6,119.6,0,"PT",115.016,2)

"^DD",119.6,119.6,0,"PT",115.017,2)

"^DD",119.6,119.6,0,"PT",115.018,4)

"^DD",119.6,119.6,0,"PT",115.12,2)

"^DD",119.6,119.6,0,"PT",14100045.01,2)

"^DD",119.6,119.6,0,"PT",14100047,.01)

"^DD",119.6,119.6,0,"PT",14100049.01,3)

"^DD",119.6,119.6,0,"SCR")
I '$D(^FH(119.6,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",119.6,119.6,0,"VRPK")
FH
"^DD",119.6,119.6,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",119.6,119.6,.01,1,0)
^.1
"^DD",119.6,119.6,.01,1,1,0)
119.6^B
"^DD",119.6,119.6,.01,1,1,1)
S ^FH(119.6,"B",$E(X,1,30),DA)=""
"^DD",119.6,119.6,.01,1,1,2)
K ^FH(119.6,"B",$E(X,1,30),DA)
"^DD",119.6,119.6,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.6,119.6,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",119.6,119.6,.01,3)
Answer must be 1-30 characters in length.
"^DD",119.6,119.6,.01,21,0)
^^1^1^2920507^^^^
"^DD",119.6,119.6,.01,21,1,0)
This is the name of a ward on which dietetic activity occurs.
"^DD",119.6,119.6,.01,21,2,0)
It is selected from a list of MAS wards.
"^DD",119.6,119.6,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",119.6,119.6,.01,"DT")
2911015
"^DD",119.6,119.6,1,0)
CLINICIAN^RP200'^VA(200,^0;2^Q
"^DD",119.6,119.6,1,21,0)
^.001^3^3^3070129^^^
"^DD",119.6,119.6,1,21,1,0)
This field contains the clinician(s) assigned to the ward and the
"^DD",119.6,119.6,1,21,2,0)
one(s) to whom dietetic consults will be routed and notification
"^DD",119.6,119.6,1,21,3,0)
made of special diet orders and tubefeedings.
"^DD",119.6,119.6,2,0)
ROOM-BED^119.62P^^R;0
"^DD",119.6,119.6,2,21,0)
^.001^2^2^3020930^^^^
"^DD",119.6,119.6,2,21,1,0)
This is a pointer to File 405.4 and indicates that that room-bed
"^DD",119.6,119.6,2,21,2,0)
is to be considered part of this Dietetic Ward.
"^DD",119.6,119.6,2.5,0)
ASSOCIATED MAS WARD^119.63P^^W;0
"^DD",119.6,119.6,2.5,21,0)
^.001^3^3^3040902^^^^
"^DD",119.6,119.6,2.5,21,1,0)
This is a list of MAS wards which are to be used as defaults to this
"^DD",119.6,119.6,2.5,21,2,0)
Dietetic ward for purposes of patient location when the room-bed is
"^DD",119.6,119.6,2.5,21,3,0)
unknown and for purposes of forecasting.
"^DD",119.6,119.6,2.6,0)
ASSOCIATED HOSPITAL LOCATION^119.64P^^L;0
"^DD",119.6,119.6,2.6,21,0)
^.001^2^2^3060814^^^^
"^DD",119.6,119.6,2.6,21,1,0)
This multiple contains the hospital location(s)/clinic(s) associated with
"^DD",119.6,119.6,2.6,21,2,0)
this outpatient nutrition location.
"^DD",119.6,119.6,3,0)
TRAY SERVICE POINT^*P119.72'^FH(119.72,^0;5^S DIC("S")="I $P(^(0),U,2)=""T""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",119.6,119.6,3,1,0)
^.1
"^DD",119.6,119.6,3,1,1,0)
119.6^AS1^MUMPS
"^DD",119.6,119.6,3,1,1,1)
S Y="" S:$P(^FH(119.6,DA,0),"^",5) Y=Y_"T" S:$P(^(0),"^",6) Y=Y_"C" S:$P(^(0),"^",7) Y=Y_"D" S $P(^(0),"^",10)=Y
"^DD",119.6,119.6,3,1,1,2)
D SPKS^FH
"^DD",119.6,119.6,3,1,1,"%D",0)
^.101^3^3^3020514^^^^
"^DD",119.6,119.6,3,1,1,"%D",1,0)
This cross-reference, along with that on Fields 4 and 5, is used to
"^DD",119.6,119.6,3,1,1,"%D",2,0)
set the Services Field. It is a string containing C, T, and/or D
"^DD",119.6,119.6,3,1,1,"%D",3,0)
indicating which services are available for this ward.
"^DD",119.6,119.6,3,1,1,"DT")
3020514
"^DD",119.6,119.6,3,12)
Allows selection only of tray lines
"^DD",119.6,119.6,3,12.1)
S DIC("S")="I $P(^(0),U,2)=""T"""
"^DD",119.6,119.6,3,21,0)
^.001^7^7^3040902^^^^
"^DD",119.6,119.6,3,21,1,0)
This field, if used, indicates that tray service is available to this
"^DD",119.6,119.6,3,21,2,0)
ward and is provided by the indicated Service Point. Note: if a Dining
"^DD",119.6,119.6,3,21,3,0)
Room is also available, then a Tray Service Point must be specified
"^DD",119.6,119.6,3,21,4,0)
as Dining Room trays are prepared there.
"^DD",119.6,119.6,3,21,5,0)

"^DD",119.6,119.6,3,21,6,0)
For outpatient nutrition locations this field indicates the tray Service
"^DD",119.6,119.6,3,21,7,0)
Point available for the location.
"^DD",119.6,119.6,3,"DT")
3020514
"^DD",119.6,119.6,3.5,0)
TRAY FORECAST %^NJ3,0^^0;17^K:+X'=X!(X>120)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,3.5,3)
Type a Number between 0 and 120, 0 Decimal Digits
"^DD",119.6,119.6,3.5,21,0)
^.001^1^1^3020930^^
"^DD",119.6,119.6,3.5,21,1,0)
This is the % of patients on the ward typically receiving tray service.
"^DD",119.6,119.6,3.5,"DT")
2911120
"^DD",119.6,119.6,4,0)
CAFETERIA SERVICE POINT^*P119.72'^FH(119.72,^0;6^S DIC("S")="I $P(^(0),U,2)=""C""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",119.6,119.6,4,1,0)
^.1
"^DD",119.6,119.6,4,1,1,0)
119.6^AS2^MUMPS
"^DD",119.6,119.6,4,1,1,1)
S Y="" S:$P(^FH(119.6,DA,0),"^",5) Y=Y_"T" S:$P(^(0),"^",6) Y=Y_"C" S:$P(^(0),"^",7) Y=Y_"D" S $P(^(0),"^",10)=Y
"^DD",119.6,119.6,4,1,1,2)
D SPKS^FH
"^DD",119.6,119.6,4,1,1,"%D",0)
^.101^3^3^3020514^^^
"^DD",119.6,119.6,4,1,1,"%D",1,0)
This cross-reference, along with that on Fields 3 and 5, is used to
"^DD",119.6,119.6,4,1,1,"%D",2,0)
set the Services Field. It is a string containing C, T, and/or D
"^DD",119.6,119.6,4,1,1,"%D",3,0)
indicating which services are available for this ward.
"^DD",119.6,119.6,4,1,1,"DT")
3020514
"^DD",119.6,119.6,4,12)
Allows selction only of cafeterias
"^DD",119.6,119.6,4,12.1)
S DIC("S")="I $P(^(0),U,2)=""C"""
"^DD",119.6,119.6,4,21,0)
^.001^5^5^3040902^^^^
"^DD",119.6,119.6,4,21,1,0)
This field, if used, indicates that cafeteria service is available
"^DD",119.6,119.6,4,21,2,0)
to this ward and is provided by the indicated Service Point.
"^DD",119.6,119.6,4,21,3,0)

"^DD",119.6,119.6,4,21,4,0)
For outpatient nutrition locations this field indicates the cafeteria
"^DD",119.6,119.6,4,21,5,0)
Service Point available for the location.
"^DD",119.6,119.6,4,"DT")
3020514
"^DD",119.6,119.6,4.5,0)
CAFETERIA FORECAST %^NJ3,0^^0;18^K:+X'=X!(X>120)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,4.5,3)
Type a Number between 0 and 120, 0 Decimal Digits
"^DD",119.6,119.6,4.5,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.6,4.5,21,1,0)
This is the % of patients on the ward typically receiving cafeteria
"^DD",119.6,119.6,4.5,21,2,0)
service.
"^DD",119.6,119.6,4.5,"DT")
2911120
"^DD",119.6,119.6,5,0)
DINING ROOM TRAY SERVICE?^S^1:YES;0:NO;^0;7^Q
"^DD",119.6,119.6,5,1,0)
^.1
"^DD",119.6,119.6,5,1,1,0)
119.6^AS3^MUMPS
"^DD",119.6,119.6,5,1,1,1)
S Y="" S:$P(^FH(119.6,DA,0),"^",5) Y=Y_"T" S:$P(^(0),"^",6) Y=Y_"C" S:$P(^(0),"^",7) Y=Y_"D" S $P(^(0),"^",10)=Y
"^DD",119.6,119.6,5,1,1,2)
D SPKS^FH
"^DD",119.6,119.6,5,1,1,"%D",0)
^.101^3^3^3020514^^^
"^DD",119.6,119.6,5,1,1,"%D",1,0)
This cross-reference, along with that on Fields 3 and 4, is used to
"^DD",119.6,119.6,5,1,1,"%D",2,0)
set the Services Field. It is a string containing C, T, and/or D
"^DD",119.6,119.6,5,1,1,"%D",3,0)
indicating which services are available for this ward.
"^DD",119.6,119.6,5,1,1,"DT")
3020514
"^DD",119.6,119.6,5,3)

"^DD",119.6,119.6,5,21,0)
^.001^4^4^3040902^^^^
"^DD",119.6,119.6,5,21,1,0)
A YES means that Dining Room tray service is available to this ward.
"^DD",119.6,119.6,5,21,2,0)

"^DD",119.6,119.6,5,21,3,0)
For outpatient nutrition locations a YES in this field indicates that
"^DD",119.6,119.6,5,21,4,0)
Dining Room tray service is available for this location.
"^DD",119.6,119.6,5,"DT")
3020514
"^DD",119.6,119.6,5.5,0)
DINING ROOM FORECAST %^NJ3,0^^0;19^K:+X'=X!(X>120)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,5.5,3)
Type a Number between 0 and 120, 0 Decimal Digits
"^DD",119.6,119.6,5.5,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.6,5.5,21,1,0)
This is the % of patients on the ward typically receiving dining room
"^DD",119.6,119.6,5.5,21,2,0)
service.
"^DD",119.6,119.6,5.5,"DT")
2911204
"^DD",119.6,119.6,6,0)
COMMUNICATION OFFICE^RP119.73'^FH(119.73,^0;8^Q
"^DD",119.6,119.6,6,1,0)
^.1
"^DD",119.6,119.6,6,1,1,0)
119.6^CO
"^DD",119.6,119.6,6,1,1,1)
S ^FH(119.6,"CO",$E(X,1,30),DA)=""
"^DD",119.6,119.6,6,1,1,2)
K ^FH(119.6,"CO",$E(X,1,30),DA)
"^DD",119.6,119.6,6,1,1,"%D",0)
^^1^1^3040420^
"^DD",119.6,119.6,6,1,1,"%D",1,0)
Cross reference locations by Communication Office.
"^DD",119.6,119.6,6,1,1,"DT")
3040420
"^DD",119.6,119.6,6,21,0)
^.001^2^2^3040902^^^^
"^DD",119.6,119.6,6,21,1,0)
This field indicates which Communication Office is responsible for
"^DD",119.6,119.6,6,21,2,0)
processing diet requests from this ward or outpatient location.
"^DD",119.6,119.6,6,"DT")
3040420
"^DD",119.6,119.6,7,0)
SUPP. FDG. SITE^P119.74'^FH(119.74,^0;9^Q
"^DD",119.6,119.6,7,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.6,7,21,1,0)
This field indicates which Supplemental Feeding Site is responsible for
"^DD",119.6,119.6,7,21,2,0)
preparing Supplemental Feedings and Bulk Nourishments for this ward.
"^DD",119.6,119.6,7,"DT")
2911204
"^DD",119.6,119.6,11,0)
PRINT ORDER^RNJ2,0^^0;4^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,11,1,0)
^.1
"^DD",119.6,119.6,11,1,1,0)
119.6^AP
"^DD",119.6,119.6,11,1,1,1)
S ^FH(119.6,"AP",$E(X,1,30),DA)=""
"^DD",119.6,119.6,11,1,1,2)
K ^FH(119.6,"AP",$E(X,1,30),DA)
"^DD",119.6,119.6,11,1,1,3)
This field is required
"^DD",119.6,119.6,11,1,1,"DT")
2911029
"^DD",119.6,119.6,11,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99
"^DD",119.6,119.6,11,21,0)
^.001^3^3^3020930^^^^
"^DD",119.6,119.6,11,21,1,0)
This field represents the print order of this ward. It is used
"^DD",119.6,119.6,11,21,2,0)
to sort the wards for delivery purposes which are then printed
"^DD",119.6,119.6,11,21,3,0)
from low print order to high print order.
"^DD",119.6,119.6,11,"DT")
2911029
"^DD",119.6,119.6,15,0)
DEFAULT ADMISSION DIET^P111'^FH(111,^0;15^Q
"^DD",119.6,119.6,15,21,0)
^.001^3^3^3020930^^^^
"^DD",119.6,119.6,15,21,1,0)
This field is optional. It may contain a diet from the Diets
"^DD",119.6,119.6,15,21,2,0)
file (111) and, if so, the diet will automatically be ordered
"^DD",119.6,119.6,15,21,3,0)
for each patient at the time of admission.
"^DD",119.6,119.6,15,"DT")
2850629
"^DD",119.6,119.6,16,0)
'NO ORDER' DIET ON ADMISSION^S^Y:YES;N:NO;^0;16^Q
"^DD",119.6,119.6,16,21,0)
^.001^3^3^3020930^^^^
"^DD",119.6,119.6,16,21,1,0)
This field is used to indicate whether a 'No Order' Diet
"^DD",119.6,119.6,16,21,2,0)
order should be generated upon admission; this field is
"^DD",119.6,119.6,16,21,3,0)
applicable only if no default admission diet is specified.
"^DD",119.6,119.6,16,"DT")
2880904
"^DD",119.6,119.6,20,0)
BULK NOURISHMENTS^119.61P^^BN;0
"^DD",119.6,119.6,20,21,0)
^.001^2^2^3020930^^^
"^DD",119.6,119.6,20,21,1,0)
This multiple represents bulk nourishments (supplemental feedings)
"^DD",119.6,119.6,20,21,2,0)
delivered to this ward.
"^DD",119.6,119.6,21,0)
# DAYS TO REVIEW NPO^NJ1,0^^0;11^K:+X'=X!(X>7)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,21,3)
Type a Number between 1 and 7, 0 Decimal Digits
"^DD",119.6,119.6,21,21,0)
^^2^2^2911204^
"^DD",119.6,119.6,21,21,1,0)
This field indicates the number of days following an NPO order after
"^DD",119.6,119.6,21,21,2,0)
which the patient should be reviewed.
"^DD",119.6,119.6,21,"DT")
2910430
"^DD",119.6,119.6,22,0)
# DAYS TO REVIEW TF^NJ2,0^^0;12^K:+X'=X!(X>30)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,22,3)
Type a Number between 1 and 30, 0 Decimal Digits
"^DD",119.6,119.6,22,21,0)
^^2^2^2911204^
"^DD",119.6,119.6,22,21,1,0)
This field indicates the number of days following a Tubefeeding order
"^DD",119.6,119.6,22,21,2,0)
after which the patient should be reviewed.
"^DD",119.6,119.6,22,"DT")
2910430
"^DD",119.6,119.6,23,0)
# DAYS TO REVIEW SF^NJ2,0^^0;13^K:+X'=X!(X>30)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,23,3)
Type a Number between 1 and 30, 0 Decimal Digits
"^DD",119.6,119.6,23,21,0)
^^2^2^2911204^
"^DD",119.6,119.6,23,21,1,0)
This field indicates the number of days following a Supplemental Feeding
"^DD",119.6,119.6,23,21,2,0)
order after which the patient should be reviewed.
"^DD",119.6,119.6,23,"DT")
2910430
"^DD",119.6,119.6,24,0)
# DAYS FOR STATUS AFTER ADMIT^NJ2,0^^0;14^K:+X'=X!(X>30)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,24,3)
Type a Number between 1 and 30, 0 Decimal Digits
"^DD",119.6,119.6,24,21,0)
^^2^2^2911204^
"^DD",119.6,119.6,24,21,1,0)
This field indicates the number of days following admission after which
"^DD",119.6,119.6,24,21,2,0)
a Nutrition Status evaluation should have been performed.
"^DD",119.6,119.6,24,"DT")
2910517
"^DD",119.6,119.6,25,0)
# DAYS TO REVIEW STATUS I^NJ3,0^^0;20^K:+X'=X!(X>120)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,25,3)
Type a Number between 1 and 120, 0 Decimal Digits
"^DD",119.6,119.6,25,21,0)
^^2^2^2920106^^
"^DD",119.6,119.6,25,21,1,0)
This is the number of days after which a patient in this Nutrition
"^DD",119.6,119.6,25,21,2,0)
Status category should be reviewed.
"^DD",119.6,119.6,25,"DT")
2930222
"^DD",119.6,119.6,26,0)
# DAYS TO REVIEW STATUS II^NJ3,0^^0;21^K:+X'=X!(X>120)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,26,3)
Type a Number between 1 and 120, 0 Decimal Digits
"^DD",119.6,119.6,26,21,0)
^^2^2^2920106^^
"^DD",119.6,119.6,26,21,1,0)
This is the number of days after which a patient in this Nutrition
"^DD",119.6,119.6,26,21,2,0)
Status category should be reviewed.
"^DD",119.6,119.6,26,"DT")
2930222
"^DD",119.6,119.6,27,0)
# DAYS TO REVIEW STATUS III^NJ3,0^^0;22^K:+X'=X!(X>120)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,27,3)
Type a Number between 1 and 120, 0 Decimal Digits
"^DD",119.6,119.6,27,21,0)
^^2^2^2920106^^
"^DD",119.6,119.6,27,21,1,0)
This is the number of days after which a patient in this Nutrition
"^DD",119.6,119.6,27,21,2,0)
Status category should be reviewed.
"^DD",119.6,119.6,27,"DT")
2930222
"^DD",119.6,119.6,28,0)
# DAYS TO REVIEW STATUS IV^NJ3,0^^0;23^K:+X'=X!(X>120)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,28,3)
Type a Number between 1 and 120, 0 Decimal Digits
"^DD",119.6,119.6,28,21,0)
^^2^2^2920106^^
"^DD",119.6,119.6,28,21,1,0)
This is the number of days after which a patient in this Nutrition
"^DD",119.6,119.6,28,21,2,0)
Status category should be reviewed.
"^DD",119.6,119.6,28,"DT")
2930222
"^DD",119.6,119.6,29,0)
CAFETERIA ON TRAY TICKET^S^Y:YES;N:NO;^0;24^Q
"^DD",119.6,119.6,29,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.6,29,21,1,0)
This field is optional and it is used to indicate whether patients
"^DD",119.6,119.6,29,21,2,0)
that go to the cafeteria should be included on the tray ticket.
"^DD",119.6,119.6,29,"DT")
2940413
"^DD",119.6,119.6,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",119.6,119.6,99,1,0)
^.1
"^DD",119.6,119.6,99,1,1,0)
119.6^AC^MUMPS
"^DD",119.6,119.6,99,1,1,1)
K:X'="Y" ^FH(119.6,DA,"I")
"^DD",119.6,119.6,99,1,1,2)
K ^FH(119.6,DA,"I")
"^DD",119.6,119.6,99,1,1,"%D",0)
^^2^2^3000202
"^DD",119.6,119.6,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",119.6,119.6,99,1,1,"%D",2,0)
inactive entries.
"^DD",119.6,119.6,99,21,0)
^.001^2^2^3020930^
"^DD",119.6,119.6,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",119.6,119.6,99,21,2,0)
further selection of this entry.
"^DD",119.6,119.6,99,"DT")
3000223
"^DD",119.6,119.6,101,0)
SERVICES^F^^0;10^K:$L(X)>3!($L(X)<1) X
"^DD",119.6,119.6,101,3)
Answer must be 1-3 characters in length.
"^DD",119.6,119.6,101,21,0)
^.001^2^2^3020930^^^
"^DD",119.6,119.6,101,21,1,0)
This field contains one or more of the characters T, C or D indicating
"^DD",119.6,119.6,101,21,2,0)
tray service, cafeteria service, and/or dining room service is available.
"^DD",119.6,119.6,101,"DT")
2911031
"^DD",119.6,119.6,102,0)
OUTPATIENT LOCATION^V^^1;1^Q
"^DD",119.6,119.6,102,1,0)
^.1
"^DD",119.6,119.6,102,1,1,0)
119.6^C
"^DD",119.6,119.6,102,1,1,1)
S ^FH(119.6,"C",$E(X,1,30),DA)=""
"^DD",119.6,119.6,102,1,1,2)
K ^FH(119.6,"C",$E(X,1,30),DA)
"^DD",119.6,119.6,102,1,1,"DT")
3060404
"^DD",119.6,119.6,102,21,0)
^.001^3^3^3060404^^
"^DD",119.6,119.6,102,21,1,0)
This field is a variable pointer to either the Ward Location (#42) file
"^DD",119.6,119.6,102,21,2,0)
or the Hospital Location (#44) file.  This will be used for outpatient
"^DD",119.6,119.6,102,21,3,0)
locations.
"^DD",119.6,119.6,102,"DT")
3060404
"^DD",119.6,119.6,102,"V",0)
^.12P^2^2
"^DD",119.6,119.6,102,"V",1,0)
44^HOSPITAL LOCATION^1^HL^n^n
"^DD",119.6,119.6,102,"V",2,0)
42^WARD LOCATION^2^WL^n^n
"^DD",119.6,119.6,103,0)
MAX # OF DAYS^NJ3,0^^1;2^K:+X'=X!(X>365)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,103,3)
Type a Number between 1 and 365, 0 Decimal Digits
"^DD",119.6,119.6,103,21,0)
^.001^6^6^3040902^^^
"^DD",119.6,119.6,103,21,1,0)
This field is optional.  If used it will be set to the maximum number of
"^DD",119.6,119.6,103,21,2,0)
days ahead a recurring meal plan can be ordered, ie, if this field is set to
"^DD",119.6,119.6,103,21,3,0)
365 then when ordering a recurring meal it cannot be ordered past one year
"^DD",119.6,119.6,103,21,4,0)
from the ordering date.  If the field is left NULL then a default of 999
"^DD",119.6,119.6,103,21,5,0)
days is assumed.  This field will be checked upon entering the FROM/TO dates
"^DD",119.6,119.6,103,21,6,0)
in the Order/Edit Outpatient Meals option.
"^DD",119.6,119.6,103,"DT")
3030313
"^DD",119.6,119.6,104,0)
NUMBER OF DAYS FOR REVIEW^RNJ2,0^^1;3^K:+X'=X!(X>30)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,104,3)
Type a Number between 1 and 30, 0 Decimal Digits
"^DD",119.6,119.6,104,21,0)
^.001^5^5^3041109^^^^
"^DD",119.6,119.6,104,21,1,0)
This field will be used for the Outpatient Meals Print Meal Plan Expiration
"^DD",119.6,119.6,104,21,2,0)
List option.  It may be set to a number of days which will be used for
"^DD",119.6,119.6,104,21,3,0)
review by the above option, ie, if this field is set to 7 then when the
"^DD",119.6,119.6,104,21,4,0)
Print Meal Plan Expiration List option is run it will check for recurring
"^DD",119.6,119.6,104,21,5,0)
meal plans that will be expiring within the next 7 days.
"^DD",119.6,119.6,104,"DT")
3041109
"^DD",119.6,119.6,105,0)
NON-VA FACILITY?^S^Y:Yes;N:No;^1;4^Q
"^DD",119.6,119.6,105,21,0)
^.001^6^6^3040902^^^
"^DD",119.6,119.6,105,21,1,0)
This will be an optional YES/NO field that may be set when setting up
"^DD",119.6,119.6,105,21,2,0)
new outpatient locations.  If the field is set to YES the Order/Edit
"^DD",119.6,119.6,105,21,3,0)
Recurring Meal option will use this flag to allow selection of up to 5
"^DD",119.6,119.6,105,21,4,0)
diets from any diet in the Diets (#111) file.  If the field is blank or
"^DD",119.6,119.6,105,21,5,0)
set to NO then the Order/Edit option will only allow selection of 1 diet
"^DD",119.6,119.6,105,21,6,0)
from the 5 allowable diets set up in the site parameters.
"^DD",119.6,119.6,105,"DT")
3030324
"^DD",119.6,119.6,106,0)
INPATIENT/OUTPATIENT^RS^I:Inpatient;O:Outpatient;^0;3^Q
"^DD",119.6,119.6,106,21,0)
^.001^6^6^3040902^^^
"^DD",119.6,119.6,106,21,1,0)
This field will serve as a flag to determine whether the location is an
"^DD",119.6,119.6,106,21,2,0)
inpatient or an outpatient location.  This will be required with the
"^DD",119.6,119.6,106,21,3,0)
Outpatient Meals functionality, since it will be necessary to store 
"^DD",119.6,119.6,106,21,4,0)
inpatient and outpatient locations in this file.
"^DD",119.6,119.6,106,21,5,0)

"^DD",119.6,119.6,106,21,6,0)
For all outpatient locations this field should be set to OUTPATIENT.
"^DD",119.6,119.6,106,"DT")
3030421
"^DD",119.6,119.6,107,0)
ALERT BMI^S^Y:YES;N:NO;^1;5^Q
"^DD",119.6,119.6,107,3)
Do you want to be alerted for BMI value for this location?
"^DD",119.6,119.6,107,21,0)
^^2^2^3060925^
"^DD",119.6,119.6,107,21,1,0)
This field, if set to YES, indicates that a clinicians will be alerted if 
"^DD",119.6,119.6,107,21,2,0)
the Body Mass Index (BMI) is below its level.
"^DD",119.6,119.6,107,"DT")
3060925
"^DD",119.6,119.6,108,0)
ALERT TUBEFEEDING^S^Y:YES;N:NO;^1;6^Q
"^DD",119.6,119.6,108,3)
Do you want to be alerted for Tubefeeding value for this location?
"^DD",119.6,119.6,108,21,0)
^^2^2^3060925^
"^DD",119.6,119.6,108,21,1,0)
This field, if set to YES, indicates that a clinician will be alerted if 
"^DD",119.6,119.6,108,21,2,0)
tubefeeding needs to be reviewed.
"^DD",119.6,119.6,108,"DT")
3060925
"^DD",119.6,119.6,109,0)
ALERT HYPERALS^S^Y:YES;N:NO;^1;7^Q
"^DD",119.6,119.6,109,3)
Do you want to be alerted for Hyperals value for this location?
"^DD",119.6,119.6,109,21,0)
^^2^2^3060925^
"^DD",119.6,119.6,109,21,1,0)
This field, if set to YES, indicates that a clinician will be alerted if 
"^DD",119.6,119.6,109,21,2,0)
certain patient is in hyperals.
"^DD",119.6,119.6,109,"DT")
3060925
"^DD",119.6,119.6,110,0)
ALERT ALBUMIN^S^Y:YES;N:NO;^1;8^Q
"^DD",119.6,119.6,110,3)
Do you want to be alerted for Albumin value for this location?
"^DD",119.6,119.6,110,21,0)
^^2^2^3060925^
"^DD",119.6,119.6,110,21,1,0)
This field, if set to YES, indicates that a clinician will be alerted if 
"^DD",119.6,119.6,110,21,2,0)
the albumin value is below the designated level.
"^DD",119.6,119.6,110,"DT")
3060925
"^DD",119.6,119.6,111,0)
ALERT NPO+CLRLIQ^S^Y:YES;N:NO;^1;9^Q
"^DD",119.6,119.6,111,3)
Do you want to be alerted for NPO+CLRLIQ value for this location?
"^DD",119.6,119.6,111,21,0)
^^3^3^3060925^
"^DD",119.6,119.6,111,21,1,0)
This field, if set to YES, indicates that a clinician will be 
"^DD",119.6,119.6,111,21,2,0)
alerted if certain patient with Nothing by Mouth (NPO) + Clear Liquid
"^DD",119.6,119.6,111,21,3,0)
(CLRLIQ) diet needs to be reviewed.
"^DD",119.6,119.6,111,"DT")
3060925
"^DD",119.6,119.6,112,0)
CLINICIAN(S)^119.66P^^2;0
"^DD",119.6,119.6,112,"DT")
3070129
"^DD",119.6,119.61,0)
BULK NOURISHMENTS SUB-FIELD^NL^1^2
"^DD",119.6,119.61,0,"NM","BULK NOURISHMENTS")

"^DD",119.6,119.61,0,"UP")
119.6
"^DD",119.6,119.61,.01,0)
BULK NOURISHMENTS^MP118'^FH(118,^0;1^Q
"^DD",119.6,119.61,.01,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.61,.01,21,1,0)
This field contains the name of the bulk nourishment (supplemental
"^DD",119.6,119.61,.01,21,2,0)
feeding) item to be delivered to the ward.
"^DD",119.6,119.61,.01,"DT")
2850604
"^DD",119.6,119.61,1,0)
QUANTITY^RNJ2,0^^0;2^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.6,119.61,1,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 99
"^DD",119.6,119.61,1,21,0)
^^2^2^2880717^
"^DD",119.6,119.61,1,21,1,0)
This field represents the quantity of the bulk nourishment
"^DD",119.6,119.61,1,21,2,0)
item to be delivered.
"^DD",119.6,119.61,1,"DT")
2850604
"^DD",119.6,119.62,0)
ROOM-BED SUB-FIELD^^1^2
"^DD",119.6,119.62,0,"DT")
2940127
"^DD",119.6,119.62,0,"IX","B",119.62,.01)

"^DD",119.6,119.62,0,"NM","ROOM-BED")

"^DD",119.6,119.62,0,"UP")
119.6
"^DD",119.6,119.62,.01,0)
ROOM-BED^MP405.4'X^DG(405.4,^0;1^I $D(X) S Y=$O(^FH(119.6,"AR",X,0)) I Y>0,Y-DA(1) W *7,"  Room already assigned to ",$P($G(^FH(119.6,+Y,0)),"^",1) K X
"^DD",119.6,119.62,.01,1,0)
^.1
"^DD",119.6,119.62,.01,1,1,0)
119.62^B
"^DD",119.6,119.62,.01,1,1,1)
S ^FH(119.6,DA(1),"R","B",$E(X,1,30),DA)=""
"^DD",119.6,119.62,.01,1,1,2)
K ^FH(119.6,DA(1),"R","B",$E(X,1,30),DA)
"^DD",119.6,119.62,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.6,119.62,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the ROOM-BED field.
"^DD",119.6,119.62,.01,1,2,0)
119.6^AR
"^DD",119.6,119.62,.01,1,2,1)
S ^FH(119.6,"AR",$E(X,1,30),DA(1),DA)=""
"^DD",119.6,119.62,.01,1,2,2)
K ^FH(119.6,"AR",$E(X,1,30),DA(1),DA)
"^DD",119.6,119.62,.01,1,2,"DT")
2911015
"^DD",119.6,119.62,.01,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.62,.01,21,1,0)
This field is a pointer to File 405.4 and indicates that this room-bed
"^DD",119.6,119.62,.01,21,2,0)
is to be considered part of this Dietetic Ward.
"^DD",119.6,119.62,.01,"DT")
2911030
"^DD",119.6,119.62,1,0)
DELIVERY ORDER^NJ2,0^^0;2^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.62,1,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",119.6,119.62,1,21,0)
^^3^3^2940127^
"^DD",119.6,119.62,1,21,1,0)
This value will be used to determine the order of printing labels
"^DD",119.6,119.62,1,21,2,0)
or tickets for items to be delivered.  Thus, the value represents
"^DD",119.6,119.62,1,21,3,0)
the order of delivery for beds on the ward.
"^DD",119.6,119.62,1,"DT")
2940127
"^DD",119.6,119.63,0)
ASSOCIATED MAS WARD SUB-FIELD^^.01^1
"^DD",119.6,119.63,0,"DT")
2911018
"^DD",119.6,119.63,0,"IX","B",119.63,.01)

"^DD",119.6,119.63,0,"NM","ASSOCIATED MAS WARD")

"^DD",119.6,119.63,0,"UP")
119.6
"^DD",119.6,119.63,.01,0)
ASSOCIATED MAS WARD^MP42'X^DIC(42,^0;1^I $D(X) S Y=$O(^FH(119.6,"AW",X,0)) I Y>0,Y-DA(1) W *7,"  Ward already assigned to ",$P($G(^FH(119.6,+Y,0)),"^",1) K X
"^DD",119.6,119.63,.01,1,0)
^.1
"^DD",119.6,119.63,.01,1,1,0)
119.63^B
"^DD",119.6,119.63,.01,1,1,1)
S ^FH(119.6,DA(1),"W","B",$E(X,1,30),DA)=""
"^DD",119.6,119.63,.01,1,1,2)
K ^FH(119.6,DA(1),"W","B",$E(X,1,30),DA)
"^DD",119.6,119.63,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.6,119.63,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the ASSOCIATED MAS WARD field.
"^DD",119.6,119.63,.01,1,2,0)
119.6^AW
"^DD",119.6,119.63,.01,1,2,1)
S ^FH(119.6,"AW",$E(X,1,30),DA(1),DA)=""
"^DD",119.6,119.63,.01,1,2,2)
K ^FH(119.6,"AW",$E(X,1,30),DA(1),DA)
"^DD",119.6,119.63,.01,1,2,"DT")
2911018
"^DD",119.6,119.63,.01,21,0)
^.001^5^5^3030903^^^
"^DD",119.6,119.63,.01,21,1,0)
This field indicates that (a) on admission, a patient with no room-bed,
"^DD",119.6,119.63,.01,21,2,0)
but assigned to this MAS ward, will be considered to be on this Dietetic
"^DD",119.6,119.63,.01,21,3,0)
Ward.
"^DD",119.6,119.63,.01,21,4,0)
(b) For forecasting purposes, the census of this MAS ward will be used
"^DD",119.6,119.63,.01,21,5,0)
in calculating the forecasted census for this Dietetic ward.
"^DD",119.6,119.63,.01,"DT")
2911030
"^DD",119.6,119.64,0)
ASSOCIATED HOSPITAL LOCATION SUB-FIELD^^.01^1
"^DD",119.6,119.64,0,"DT")
3060814
"^DD",119.6,119.64,0,"IX","B",119.64,.01)

"^DD",119.6,119.64,0,"NM","ASSOCIATED HOSPITAL LOCATION")

"^DD",119.6,119.64,0,"UP")
119.6
"^DD",119.6,119.64,.01,0)
ASSOCIATED HOSPITAL LOCATION^MRP44'X^SC(^0;1^I $D(X) S Y=$O(^FH(119.6,"AL",X,0)) I Y>0,Y-DA(1) W "  Hospital location already assigned to ",$P($G(^FH(119.6,+Y,0)),"^",1) K X
"^DD",119.6,119.64,.01,1,0)
^.1
"^DD",119.6,119.64,.01,1,1,0)
119.64^B
"^DD",119.6,119.64,.01,1,1,1)
S ^FH(119.6,DA(1),"L","B",$E(X,1,30),DA)=""
"^DD",119.6,119.64,.01,1,1,2)
K ^FH(119.6,DA(1),"L","B",$E(X,1,30),DA)
"^DD",119.6,119.64,.01,1,2,0)
119.6^AL
"^DD",119.6,119.64,.01,1,2,1)
S ^FH(119.6,"AL",$E(X,1,30),DA(1),DA)=""
"^DD",119.6,119.64,.01,1,2,2)
K ^FH(119.6,"AL",$E(X,1,30),DA(1),DA)
"^DD",119.6,119.64,.01,1,2,"%D",0)
^^1^1^3030903^
"^DD",119.6,119.64,.01,1,2,"%D",1,0)
Cross reference the whole file by field #2.6.
"^DD",119.6,119.64,.01,1,2,"DT")
3030903
"^DD",119.6,119.64,.01,21,0)
^^3^3^3060814^
"^DD",119.6,119.64,.01,21,1,0)
This is a pointer to the Hospital Location file to store the hospital
"^DD",119.6,119.64,.01,21,2,0)
location(s) associated with this Nutrition Location.  Outpatient
"^DD",119.6,119.64,.01,21,3,0)
Locations MUST have an Associated Hospital Location set up.
"^DD",119.6,119.64,.01,"DT")
3060814
"^DD",119.6,119.66,0)
CLINICIAN(S) SUB-FIELD^^.01^1
"^DD",119.6,119.66,0,"DT")
3070226
"^DD",119.6,119.66,0,"IX","B",119.66,.01)

"^DD",119.6,119.66,0,"NM","CLINICIAN(S)")

"^DD",119.6,119.66,0,"UP")
119.6
"^DD",119.6,119.66,.01,0)
CLINICIAN(S)^MP200'^VA(200,^0;1^Q
"^DD",119.6,119.66,.01,1,0)
^.1
"^DD",119.6,119.66,.01,1,1,0)
119.66^B
"^DD",119.6,119.66,.01,1,1,1)
S ^FH(119.6,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",119.6,119.66,.01,1,1,2)
K ^FH(119.6,DA(1),2,"B",$E(X,1,30),DA)
"^DD",119.6,119.66,.01,3)
This field may be used to add multiple clinicians who will receive alerts/bulletins for this ward/outpatient location.
"^DD",119.6,119.66,.01,21,0)
^.001^9^9^3070226^^^
"^DD",119.6,119.66,.01,21,1,0)
This field allows entry of multiple clinicians for each ward or 
"^DD",119.6,119.66,.01,21,2,0)
outpatient location.
"^DD",119.6,119.66,.01,21,3,0)
 
"^DD",119.6,119.66,.01,21,4,0)
This field contains the clinician(s) assigned to the ward or 
"^DD",119.6,119.66,.01,21,5,0)
outpatient location and the one(s) to whom dietetic consults will be 
"^DD",119.6,119.66,.01,21,6,0)
routed and notification made of special diet orders and tubefeedings.
"^DD",119.6,119.66,.01,21,7,0)
 
"^DD",119.6,119.66,.01,21,8,0)
The monitor alerts will also automatically go to the clinicians set up 
"^DD",119.6,119.66,.01,21,9,0)
in this field for the ward or outpatient location.
"^DD",119.6,119.66,.01,"DT")
3070226
"^DD",119.9,119.985,3,0)
PRINT ON ASSESSMENT^S^Y:YES;N:NO;^0;3^Q
"^DD",119.9,119.985,3,21,0)
^^2^2^3070321^
"^DD",119.9,119.985,3,21,1,0)
If answer Yes and patient has a drug under this classification, 
"^DD",119.9,119.985,3,21,2,0)
information will be printed in the Nutrition report.
"^DD",119.9,119.985,3,"DT")
3070321
"^DD",119.9,119.985,4,0)
PRINT ON SCREENING/PROFILE^S^Y:YES;N:NO;^0;4^Q
"^DD",119.9,119.985,4,21,0)
^^2^2^3070321^
"^DD",119.9,119.985,4,21,1,0)
If set to YES and patient is taking this type of drug, it will be printed 
"^DD",119.9,119.985,4,21,2,0)
in Print Screening report.
"^DD",119.9,119.985,4,"DT")
3070419
"^DD",119.9,119.985,5,0)
PRINT ORDER^NJ3,0^^0;5^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1.N) X
"^DD",119.9,119.985,5,3)
Type a number between 1 and 999, 0 Decimal Digits
"^DD",119.9,119.985,5,21,0)
^^1^1^3070321^
"^DD",119.9,119.985,5,21,1,0)
This is a print order of a specific Drug Classification.
"^DD",119.9,119.985,5,"DT")
3070321
"^DD",119.9,119.985,6,0)
CREATE ALERT^S^Y:YES;N:NO;^0;6^Q
"^DD",119.9,119.985,6,21,0)
^^2^2^3070321^
"^DD",119.9,119.985,6,21,1,0)
If set to YES, alert will be created for patient that is taking 
"^DD",119.9,119.985,6,21,2,0)
medication with this type of Drug.
"^DD",119.9,119.985,6,"DT")
3070321
"^DIC",114,114,0)
RECIPE^114
"^DIC",114,114,0,"GL")
^FH(114,
"^DIC",114,114,"%D",0)
^^3^3^2950221^^
"^DIC",114,114,"%D",1,0)
This file contains all recipes necessary to build meals. Each
"^DIC",114,114,"%D",2,0)
recipe consists of basic data concerning the recipe, various
"^DIC",114,114,"%D",3,0)
ingredients, and may also contain 'embedded' recipes.
"^DIC",114,"B","RECIPE",114)

"^DIC",115,115,0)
NUTRITION PERSON^115
"^DIC",115,115,0,"GL")
^FHPT(
"^DIC",115,115,"%",0)
^1.005^^
"^DIC",115,115,"%D",0)
^1.001^7^7^3070628^^^^
"^DIC",115,115,"%D",1,0)
This file contains all dietetic orders for each admission of a
"^DIC",115,115,"%D",2,0)
patient. It includes diet orders, consult requests, supplemental
"^DIC",115,115,"%D",3,0)
feedings, early/late tray requests, and tubefeedings. It also
"^DIC",115,115,"%D",4,0)
contains any food allergies entered for the patient.
"^DIC",115,115,"%D",5,0)

"^DIC",115,115,"%D",6,0)
This file will also be used to store outpatient data for individuals
"^DIC",115,115,"%D",7,0)
served in the outpatient meals functionality.
"^DIC",115,"B","NUTRITION PERSON",115)

"^DIC",115.2,115.2,0)
FOOD PREFERENCES^115.2
"^DIC",115.2,115.2,0,"GL")
^FH(115.2,
"^DIC",115.2,115.2,"%D",0)
^^5^5^2950221^^^^
"^DIC",115.2,115.2,"%D",1,0)
This file contains the items which can be selected as patient
"^DIC",115.2,115.2,"%D",2,0)
preference items. It contains both items which can be selected,
"^DIC",115.2,115.2,"%D",3,0)
such as coffee or tea, as well as food preferences (such as 
"^DIC",115.2,115.2,"%D",4,0)
no liver) which will result in certain recipes being excluded
"^DIC",115.2,115.2,"%D",5,0)
for the patient.
"^DIC",115.2,"B","FOOD PREFERENCES",115.2)

"^DIC",119.6,119.6,0)
NUTRITION LOCATION^119.6P
"^DIC",119.6,119.6,0,"GL")
^FH(119.6,
"^DIC",119.6,119.6,"%",0)
^1.005^^0
"^DIC",119.6,119.6,"%D",0)
^1.001^8^8^3060925^^^^
"^DIC",119.6,119.6,"%D",1,0)
This file is a list of wards in the hospital and associated room-beds
"^DIC",119.6,119.6,"%D",2,0)
and contains various dietetic specific information such
"^DIC",119.6,119.6,"%D",3,0)
as the assigned clinician, bulk nourishments for the ward, and
"^DIC",119.6,119.6,"%D",4,0)
which Service Point, Communication Office, and Supplemental Feeding
"^DIC",119.6,119.6,"%D",5,0)
Site is assigned responsibility for the ward.
"^DIC",119.6,119.6,"%D",6,0)

"^DIC",119.6,119.6,"%D",7,0)
This file will also be used to store outpatient locations necessary
"^DIC",119.6,119.6,"%D",8,0)
for the outpatient meals enhancement.
"^DIC",119.6,"B","NUTRITION LOCATION",119.6)

**END**
**END**

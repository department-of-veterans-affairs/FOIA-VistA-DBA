Released HL*1.6*14 SEQ #33
Extracted from mail message
**KIDS**:HL*1.6*14^

**INSTALL NAME**
HL*1.6*14
"BLD",133,0)
HL*1.6*14^HEALTH LEVEL SEVEN^0^2980923^y
"BLD",133,1,0)
^^13^13^2980923^^^
"BLD",133,1,1,0)
 
"BLD",133,1,2,0)
HL*1.6*14 introduces the following new features as part of the CIRN
"BLD",133,1,3,0)
project and addresses a number of NOIS related issues:
"BLD",133,1,4,0)
 
"BLD",133,1,5,0)
1.  Dynamic addressing of messages
"BLD",133,1,6,0)
2.  Subscription registry (new file and APIs)
"BLD",133,1,7,0)
3.  Auto-restart of logical links
"BLD",133,1,8,0)
4.  Mapping of logical links to institutions (and related api's)
"BLD",133,1,9,0)
5.  A new option to shut down all logical links
"BLD",133,1,10,0)
6.  HL7 reference file updates to support draft 2 of HEALTH LEVEL SEVEN, 
"BLD",133,1,11,0)
    Version 2.3
"BLD",133,1,12,0)
 
"BLD",133,1,13,0)
Please see the patch module on Forum for details.
"BLD",133,4,0)
^9.64PA^869.2^7
"BLD",133,4,101,0)
101
"BLD",133,4,101,2,0)
^9.641^101^1
"BLD",133,4,101,2,101,0)
PROTOCOL  (File-top level)
"BLD",133,4,101,2,101,1,0)
^9.6411^774^1
"BLD",133,4,101,2,101,1,774,0)
ROUTING LOGIC
"BLD",133,4,101,222)
y^y^p^^^^n
"BLD",133,4,771.2,0)
771.2
"BLD",133,4,771.2,222)
y^y^f^^y^^y^o^n
"BLD",133,4,771.5,0)
771.5
"BLD",133,4,771.5,222)
y^y^f^^y^^y^o^n
"BLD",133,4,774,0)
774
"BLD",133,4,774,222)
y^y^f^^^^n
"BLD",133,4,779.001,0)
779.001
"BLD",133,4,779.001,222)
y^y^f^^y^^y^o^n
"BLD",133,4,869.2,0)
869.2
"BLD",133,4,869.2,2,0)
^9.641^869.2^1
"BLD",133,4,869.2,2,869.2,0)
HL LOWER LEVEL PROTOCOL PARAMETER  (File-top level)
"BLD",133,4,869.2,2,869.2,1,0)
^9.6411^400.06^5
"BLD",133,4,869.2,2,869.2,1,400.01,0)
TCP/IP ADDRESS
"BLD",133,4,869.2,2,869.2,1,400.02,0)
TCP/IP PORT
"BLD",133,4,869.2,2,869.2,1,400.03,0)
CLIENT/SERVER
"BLD",133,4,869.2,2,869.2,1,400.04,0)
PERMANENT
"BLD",133,4,869.2,2,869.2,1,400.06,0)
STARTUP NODE
"BLD",133,4,869.2,222)
y^y^p^^^^n
"BLD",133,4,870,0)
870
"BLD",133,4,870,2,0)
^9.641^870^1
"BLD",133,4,870,2,870,0)
HL LOGICAL LINK  (File-top level)
"BLD",133,4,870,2,870,1,0)
^9.6411^.03^3
"BLD",133,4,870,2,870,1,.02,0)
INSTITUTION
"BLD",133,4,870,2,870,1,.03,0)
DOMAIN
"BLD",133,4,870,2,870,1,4.5,0)
AUTOSTART
"BLD",133,4,870,222)
y^y^p^^^^n
"BLD",133,4,"APDD",101,101)

"BLD",133,4,"APDD",101,101,774)

"BLD",133,4,"APDD",869.2,869.2)

"BLD",133,4,"APDD",869.2,869.2,400.01)

"BLD",133,4,"APDD",869.2,869.2,400.02)

"BLD",133,4,"APDD",869.2,869.2,400.03)

"BLD",133,4,"APDD",869.2,869.2,400.04)

"BLD",133,4,"APDD",869.2,869.2,400.06)

"BLD",133,4,"APDD",870,870)

"BLD",133,4,"APDD",870,870,.02)

"BLD",133,4,"APDD",870,870,.03)

"BLD",133,4,"APDD",870,870,4.5)

"BLD",133,4,"B",101,101)

"BLD",133,4,"B",771.2,771.2)

"BLD",133,4,"B",771.5,771.5)

"BLD",133,4,"B",774,774)

"BLD",133,4,"B",779.001,779.001)

"BLD",133,4,"B",869.2,869.2)

"BLD",133,4,"B",870,870)

"BLD",133,"ABPKG")
n
"BLD",133,"INI")
PRE^HLP14PRE
"BLD",133,"INIT")
POST^HLP14PRE
"BLD",133,"KRN",0)
^9.67PA^19^19
"BLD",133,"KRN",.4,0)
.4
"BLD",133,"KRN",.4,"NM",0)
^9.68A^^
"BLD",133,"KRN",.401,0)
.401
"BLD",133,"KRN",.402,0)
.402
"BLD",133,"KRN",.403,0)
.403
"BLD",133,"KRN",.5,0)
.5
"BLD",133,"KRN",.84,0)
.84
"BLD",133,"KRN",3.6,0)
3.6
"BLD",133,"KRN",3.8,0)
3.8
"BLD",133,"KRN",9.2,0)
9.2
"BLD",133,"KRN",9.8,0)
9.8
"BLD",133,"KRN",9.8,"NM",0)
^9.68A^18^15
"BLD",133,"KRN",9.8,"NM",1,0)
HLTP^^0^B10188010
"BLD",133,"KRN",9.8,"NM",5,0)
HLCS^^0^B29038065
"BLD",133,"KRN",9.8,"NM",6,0)
HLCS2^^0^B7539750
"BLD",133,"KRN",9.8,"NM",7,0)
HLSUB^^0^B12315657
"BLD",133,"KRN",9.8,"NM",8,0)
HLCSDR^^0^B9316177
"BLD",133,"KRN",9.8,"NM",9,0)
HLCSIN^^0^B4444760
"BLD",133,"KRN",9.8,"NM",10,0)
HLCSQUE^^0^B13836921
"BLD",133,"KRN",9.8,"NM",11,0)
HLCSQUE1^^0^B2819370
"BLD",133,"KRN",9.8,"NM",12,0)
HLDTIW02^^0^B9038702
"BLD",133,"KRN",9.8,"NM",13,0)
HLDTIW04^^0^B47899067
"BLD",133,"KRN",9.8,"NM",14,0)
HLDTIW2A^^0^B24659714
"BLD",133,"KRN",9.8,"NM",15,0)
HLDTIW2B^^0^B27233060
"BLD",133,"KRN",9.8,"NM",16,0)
HLDTIW2C^^0^B29909204
"BLD",133,"KRN",9.8,"NM",17,0)
HLDTIWP1^^0^B36478370
"BLD",133,"KRN",9.8,"NM",18,0)
HLDTIWP3^^0^B34093171
"BLD",133,"KRN",9.8,"NM","B","HLCS",5)

"BLD",133,"KRN",9.8,"NM","B","HLCS2",6)

"BLD",133,"KRN",9.8,"NM","B","HLCSDR",8)

"BLD",133,"KRN",9.8,"NM","B","HLCSIN",9)

"BLD",133,"KRN",9.8,"NM","B","HLCSQUE",10)

"BLD",133,"KRN",9.8,"NM","B","HLCSQUE1",11)

"BLD",133,"KRN",9.8,"NM","B","HLDTIW02",12)

"BLD",133,"KRN",9.8,"NM","B","HLDTIW04",13)

"BLD",133,"KRN",9.8,"NM","B","HLDTIW2A",14)

"BLD",133,"KRN",9.8,"NM","B","HLDTIW2B",15)

"BLD",133,"KRN",9.8,"NM","B","HLDTIW2C",16)

"BLD",133,"KRN",9.8,"NM","B","HLDTIWP1",17)

"BLD",133,"KRN",9.8,"NM","B","HLDTIWP3",18)

"BLD",133,"KRN",9.8,"NM","B","HLSUB",7)

"BLD",133,"KRN",9.8,"NM","B","HLTP",1)

"BLD",133,"KRN",19,0)
19
"BLD",133,"KRN",19,"NM",0)
^9.68A^22^22
"BLD",133,"KRN",19,"NM",1,0)
HL COMMUNICATIONS SERVER^^3
"BLD",133,"KRN",19,"NM",2,0)
HL EDIT COMM SERVER PARAMETERS^^0
"BLD",133,"KRN",19,"NM",3,0)
HL MANAGE FILERS^^3
"BLD",133,"KRN",19,"NM",4,0)
HL FILER MONITOR^^0
"BLD",133,"KRN",19,"NM",5,0)
HL START^^0
"BLD",133,"KRN",19,"NM",6,0)
HL STOP^^0
"BLD",133,"KRN",19,"NM",7,0)
HL MESSAGE MONITOR^^0
"BLD",133,"KRN",19,"NM",8,0)
HL QUEUE MANAGEMENT^^3
"BLD",133,"KRN",19,"NM",9,0)
HL CUSTOM REPORT^^0
"BLD",133,"KRN",19,"NM",10,0)
HL TASK RESTART^^0
"BLD",133,"KRN",19,"NM",11,0)
HL STOP ALL LINKS^^0
"BLD",133,"KRN",19,"NM",12,0)
HL SHOW COMMUNICATIONS ERROR^^0
"BLD",133,"KRN",19,"NM",13,0)
HL CLEAR COMMUNICATIONS ERROR^^0
"BLD",133,"KRN",19,"NM",14,0)
HL CRE/ED QUEUE TEST ENTRY^^0
"BLD",133,"KRN",19,"NM",15,0)
HL COPY QUEUE ENTRY^^0
"BLD",133,"KRN",19,"NM",16,0)
HL CLEAR QUEUE^^0
"BLD",133,"KRN",19,"NM",17,0)
HL START DEFAULT FILERS^^0
"BLD",133,"KRN",19,"NM",18,0)
HL START ONE INCOMING FILER^^0
"BLD",133,"KRN",19,"NM",19,0)
HL START ONE OUTGOING FILER^^0
"BLD",133,"KRN",19,"NM",20,0)
HL STOP ALL INCOMING FILERS^^0
"BLD",133,"KRN",19,"NM",21,0)
HL STOP ONE INCOMING FILER^^0
"BLD",133,"KRN",19,"NM",22,0)
HL STOP ONE OUTGOING FILER^^0
"BLD",133,"KRN",19,"NM","B","HL CLEAR COMMUNICATIONS ERROR",13)

"BLD",133,"KRN",19,"NM","B","HL CLEAR QUEUE",16)

"BLD",133,"KRN",19,"NM","B","HL COMMUNICATIONS SERVER",1)

"BLD",133,"KRN",19,"NM","B","HL COPY QUEUE ENTRY",15)

"BLD",133,"KRN",19,"NM","B","HL CRE/ED QUEUE TEST ENTRY",14)

"BLD",133,"KRN",19,"NM","B","HL CUSTOM REPORT",9)

"BLD",133,"KRN",19,"NM","B","HL EDIT COMM SERVER PARAMETERS",2)

"BLD",133,"KRN",19,"NM","B","HL FILER MONITOR",4)

"BLD",133,"KRN",19,"NM","B","HL MANAGE FILERS",3)

"BLD",133,"KRN",19,"NM","B","HL MESSAGE MONITOR",7)

"BLD",133,"KRN",19,"NM","B","HL QUEUE MANAGEMENT",8)

"BLD",133,"KRN",19,"NM","B","HL SHOW COMMUNICATIONS ERROR",12)

"BLD",133,"KRN",19,"NM","B","HL START",5)

"BLD",133,"KRN",19,"NM","B","HL START DEFAULT FILERS",17)

"BLD",133,"KRN",19,"NM","B","HL START ONE INCOMING FILER",18)

"BLD",133,"KRN",19,"NM","B","HL START ONE OUTGOING FILER",19)

"BLD",133,"KRN",19,"NM","B","HL STOP",6)

"BLD",133,"KRN",19,"NM","B","HL STOP ALL INCOMING FILERS",20)

"BLD",133,"KRN",19,"NM","B","HL STOP ALL LINKS",11)

"BLD",133,"KRN",19,"NM","B","HL STOP ONE INCOMING FILER",21)

"BLD",133,"KRN",19,"NM","B","HL STOP ONE OUTGOING FILER",22)

"BLD",133,"KRN",19,"NM","B","HL TASK RESTART",10)

"BLD",133,"KRN",19.1,0)
19.1
"BLD",133,"KRN",101,0)
101
"BLD",133,"KRN",409.61,0)
409.61
"BLD",133,"KRN",771,0)
771
"BLD",133,"KRN",869.2,0)
869.2
"BLD",133,"KRN",870,0)
870
"BLD",133,"KRN",8994,0)
8994
"BLD",133,"KRN",8995,0)
8995
"BLD",133,"KRN","B",.4,.4)

"BLD",133,"KRN","B",.401,.401)

"BLD",133,"KRN","B",.402,.402)

"BLD",133,"KRN","B",.403,.403)

"BLD",133,"KRN","B",.5,.5)

"BLD",133,"KRN","B",.84,.84)

"BLD",133,"KRN","B",3.6,3.6)

"BLD",133,"KRN","B",3.8,3.8)

"BLD",133,"KRN","B",9.2,9.2)

"BLD",133,"KRN","B",9.8,9.8)

"BLD",133,"KRN","B",19,19)

"BLD",133,"KRN","B",19.1,19.1)

"BLD",133,"KRN","B",101,101)

"BLD",133,"KRN","B",409.61,409.61)

"BLD",133,"KRN","B",771,771)

"BLD",133,"KRN","B",869.2,869.2)

"BLD",133,"KRN","B",870,870)

"BLD",133,"KRN","B",8994,8994)

"BLD",133,"KRN","B",8995,8995)

"BLD",133,"PRE")

"BLD",133,"QUES",0)
^9.62^^
"BLD",133,"REQB",0)
^9.611^^
"DATA",771.2,1,0)
ACK^General Acknowledgement Message
"DATA",771.2,1,"V",0)
^771.23P^3^3
"DATA",771.2,1,"V",1,0)
1
"DATA",771.2,1,"V",2,0)
2
"DATA",771.2,1,"V",3,0)
3
"DATA",771.2,2,0)
ORF^Observational Result/Record Response
"DATA",771.2,2,"V",0)
^771.23P^3^3
"DATA",771.2,2,"V",1,0)
1
"DATA",771.2,2,"V",2,0)
2
"DATA",771.2,2,"V",3,0)
3
"DATA",771.2,3,0)
ORU^Observational result/unsolicited
"DATA",771.2,3,"V",0)
^771.23P^3^3
"DATA",771.2,3,"V",1,0)
1
"DATA",771.2,3,"V",2,0)
2
"DATA",771.2,3,"V",3,0)
3
"DATA",771.2,4,0)
QRY^Query, original Mode
"DATA",771.2,4,"V",0)
^771.23P^3^3
"DATA",771.2,4,"V",1,0)
1
"DATA",771.2,4,"V",2,0)
2
"DATA",771.2,4,"V",3,0)
3
"DATA",771.2,5,0)
ORM^Order message
"DATA",771.2,5,"V",0)
^771.23P^3^3
"DATA",771.2,5,"V",1,0)
1
"DATA",771.2,5,"V",2,0)
2
"DATA",771.2,5,"V",3,0)
3
"DATA",771.2,6,0)
ADT^ADT Message
"DATA",771.2,6,"V",0)
^771.23P^3^3
"DATA",771.2,6,"V",1,0)
1
"DATA",771.2,6,"V",2,0)
2
"DATA",771.2,6,"V",3,0)
3
"DATA",771.2,7,0)
ARD^Ancillary Report (Display)
"DATA",771.2,7,"V",0)
^771.23P^3^3
"DATA",771.2,7,"V",1,0)
1
"DATA",771.2,7,"V",2,0)
2
"DATA",771.2,7,"V",3,0)
3
"DATA",771.2,8,0)
BAR^Add/Change Billing Account
"DATA",771.2,8,"V",0)
^771.23P^3^3
"DATA",771.2,8,"V",1,0)
1
"DATA",771.2,8,"V",2,0)
2
"DATA",771.2,8,"V",3,0)
3
"DATA",771.2,9,0)
DFT^Detail Financial Transaction
"DATA",771.2,9,"V",0)
^771.23P^3^3
"DATA",771.2,9,"V",1,0)
1
"DATA",771.2,9,"V",2,0)
2
"DATA",771.2,9,"V",3,0)
3
"DATA",771.2,10,0)
DSR^Display Response
"DATA",771.2,10,"V",0)
^771.23P^3^3
"DATA",771.2,10,"V",1,0)
1
"DATA",771.2,10,"V",2,0)
2
"DATA",771.2,10,"V",3,0)
3
"DATA",771.2,11,0)
MCF^Delayed Acknowledgement
"DATA",771.2,11,"V",0)
^771.23P^3^3
"DATA",771.2,11,"V",1,0)
1
"DATA",771.2,11,"V",2,0)
2
"DATA",771.2,11,"V",3,0)
3
"DATA",771.2,12,0)
OCF^Order Confirmation
"DATA",771.2,12,"V",0)
^771.23P^1^1
"DATA",771.2,12,"V",1,0)
1
"DATA",771.2,13,0)
ORR^Order Acknowledgment Message
"DATA",771.2,13,"V",0)
^771.23P^3^3
"DATA",771.2,13,"V",1,0)
1
"DATA",771.2,13,"V",2,0)
2
"DATA",771.2,13,"V",3,0)
3
"DATA",771.2,14,0)
OSQ^Order Status Query
"DATA",771.2,14,"V",0)
^771.23P^3^3
"DATA",771.2,14,"V",1,0)
1
"DATA",771.2,14,"V",2,0)
2
"DATA",771.2,14,"V",3,0)
3
"DATA",771.2,15,0)
UDM^Unsolicited display message
"DATA",771.2,15,"V",0)
^771.23P^3^3
"DATA",771.2,15,"V",1,0)
1
"DATA",771.2,15,"V",2,0)
2
"DATA",771.2,15,"V",3,0)
3
"DATA",771.2,16,0)
ADR^ADT Response
"DATA",771.2,16,"V",0)
^771.23P^2^2
"DATA",771.2,16,"V",1,0)
2
"DATA",771.2,16,"V",2,0)
3
"DATA",771.2,18,0)
RAR^Pharmacy administration information
"DATA",771.2,18,"V",0)
^771.23P^2^2
"DATA",771.2,18,"V",1,0)
2
"DATA",771.2,18,"V",2,0)
3
"DATA",771.2,19,0)
RAS^Pharmacy administration message
"DATA",771.2,19,"V",0)
^771.23P^2^2
"DATA",771.2,19,"V",1,0)
2
"DATA",771.2,19,"V",2,0)
3
"DATA",771.2,20,0)
RDE^Pharmacy encoded order message
"DATA",771.2,20,"V",0)
^771.23P^2^2
"DATA",771.2,20,"V",1,0)
2
"DATA",771.2,20,"V",2,0)
3
"DATA",771.2,21,0)
RDR^Pharmacy dispense information
"DATA",771.2,21,"V",0)
^771.23P^2^2
"DATA",771.2,21,"V",1,0)
2
"DATA",771.2,21,"V",2,0)
3
"DATA",771.2,22,0)
RDS^Pharmacy dispense message
"DATA",771.2,22,"V",0)
^771.23P^2^2
"DATA",771.2,22,"V",1,0)
2
"DATA",771.2,22,"V",2,0)
3
"DATA",771.2,23,0)
RGV^Pharmacy give message
"DATA",771.2,23,"V",0)
^771.23P^2^2
"DATA",771.2,23,"V",1,0)
2
"DATA",771.2,23,"V",2,0)
3
"DATA",771.2,24,0)
RGR^Pharmacy dose information
"DATA",771.2,24,"V",0)
^771.23P^2^2
"DATA",771.2,24,"V",1,0)
2
"DATA",771.2,24,"V",2,0)
3
"DATA",771.2,25,0)
RER^Pharmacy encoded order information
"DATA",771.2,25,"V",0)
^771.23P^2^2
"DATA",771.2,25,"V",1,0)
2
"DATA",771.2,25,"V",2,0)
3
"DATA",771.2,26,0)
ROR^Pharmacy prescription order response
"DATA",771.2,26,"V",0)
^771.23P^2^2
"DATA",771.2,26,"V",1,0)
2
"DATA",771.2,26,"V",2,0)
3
"DATA",771.2,27,0)
RRA^Pharmacy administration acknowledgement
"DATA",771.2,27,"V",0)
^771.23P^2^2
"DATA",771.2,27,"V",1,0)
2
"DATA",771.2,27,"V",2,0)
3
"DATA",771.2,28,0)
RRD^Pharmacy dispense acknowledgement
"DATA",771.2,28,"V",0)
^771.23P^2^2
"DATA",771.2,28,"V",1,0)
2
"DATA",771.2,28,"V",2,0)
3
"DATA",771.2,29,0)
RRE^Pharmacy encoded order acknowledgement
"DATA",771.2,29,"V",0)
^771.23P^2^2
"DATA",771.2,29,"V",1,0)
2
"DATA",771.2,29,"V",2,0)
3
"DATA",771.2,30,0)
RRG^Pharmacy give acknowledgement
"DATA",771.2,30,"V",0)
^771.23P^2^2
"DATA",771.2,30,"V",1,0)
2
"DATA",771.2,30,"V",2,0)
3
"DATA",771.2,31,0)
CNQ^Cancel query
"DATA",771.2,31,"V",0)
^771.23P^1^1
"DATA",771.2,31,"V",1,0)
3
"DATA",771.2,32,0)
CSU^Unsolicited clinical study data
"DATA",771.2,32,"V",0)
^771.23P^1^1
"DATA",771.2,32,"V",1,0)
3
"DATA",771.2,33,0)
EDR^Enhanced display response
"DATA",771.2,33,"V",0)
^771.23P^1^1
"DATA",771.2,33,"V",1,0)
3
"DATA",771.2,34,0)
ERP^Event replay response
"DATA",771.2,34,"V",0)
^771.23P^1^1
"DATA",771.2,34,"V",1,0)
3
"DATA",771.2,35,0)
ERQ^Event replay query
"DATA",771.2,35,"V",0)
^771.23P^1^1
"DATA",771.2,35,"V",1,0)
3
"DATA",771.2,36,0)
EQQ^Embedded query language query
"DATA",771.2,36,"V",0)
^771.23P^1^1
"DATA",771.2,36,"V",1,0)
3
"DATA",771.2,37,0)
MDM^Documentation message
"DATA",771.2,37,"V",0)
^771.23P^1^1
"DATA",771.2,37,"V",1,0)
3
"DATA",771.2,38,0)
MFN^Master files notification
"DATA",771.2,38,"V",0)
^771.23P^2^2
"DATA",771.2,38,"V",1,0)
2
"DATA",771.2,38,"V",2,0)
3
"DATA",771.2,39,0)
MFK^Master files application ack
"DATA",771.2,39,"V",0)
^771.23P^1^1
"DATA",771.2,39,"V",1,0)
3
"DATA",771.2,40,0)
MFD^Master files delayed application ack
"DATA",771.2,40,"V",0)
^771.23P^1^1
"DATA",771.2,40,"V",1,0)
3
"DATA",771.2,41,0)
MFQ^Master files query
"DATA",771.2,41,"V",0)
^771.23P^1^1
"DATA",771.2,41,"V",1,0)
3
"DATA",771.2,42,0)
MFR^Master files query response
"DATA",771.2,42,"V",0)
^771.23P^1^1
"DATA",771.2,42,"V",1,0)
3
"DATA",771.2,43,0)
OSR^Order status response
"DATA",771.2,43,"V",0)
^771.23P^1^1
"DATA",771.2,43,"V",1,0)
3
"DATA",771.2,44,0)
PEX^Product experience
"DATA",771.2,44,"V",0)
^771.23P^1^1
"DATA",771.2,44,"V",1,0)
3
"DATA",771.2,45,0)
PGL^Patient goal
"DATA",771.2,45,"V",0)
^771.23P^1^1
"DATA",771.2,45,"V",1,0)
3
"DATA",771.2,46,0)
PIN^Patient information
"DATA",771.2,46,"V",0)
^771.23P^1^1
"DATA",771.2,46,"V",1,0)
3
"DATA",771.2,47,0)
PPR^Patient problem
"DATA",771.2,47,"V",0)
^771.23P^1^1
"DATA",771.2,47,"V",1,0)
3
"DATA",771.2,48,0)
RCI^Return clinical information
"DATA",771.2,48,"V",0)
^771.23P^1^1
"DATA",771.2,48,"V",1,0)
3
"DATA",771.2,49,0)
RCL^Return clinical list
"DATA",771.2,49,"V",0)
^771.23P^1^1
"DATA",771.2,49,"V",1,0)
3
"DATA",771.2,50,0)
REF^Patient referral
"DATA",771.2,50,"V",0)
^771.23P^1^1
"DATA",771.2,50,"V",1,0)
3
"DATA",771.2,51,0)
RQC^Request clinical information
"DATA",771.2,51,"V",0)
^771.23P^1^1
"DATA",771.2,51,"V",1,0)
3
"DATA",771.2,52,0)
ROD^Request patient demographics
"DATA",771.2,52,"V",0)
^771.23P^1^1
"DATA",771.2,52,"V",1,0)
3
"DATA",771.2,53,0)
RPA^Return patient authorization
"DATA",771.2,53,"V",0)
^771.23P^1^1
"DATA",771.2,53,"V",1,0)
3
"DATA",771.2,54,0)
RPI^Return patient information
"DATA",771.2,54,"V",0)
^771.23P^1^1
"DATA",771.2,54,"V",1,0)
3
"DATA",771.2,55,0)
RPL^Return patient display list
"DATA",771.2,55,"V",0)
^771.23P^1^1
"DATA",771.2,55,"V",1,0)
3
"DATA",771.2,56,0)
RPR^Return patient list
"DATA",771.2,56,"V",0)
^771.23P^1^1
"DATA",771.2,56,"V",1,0)
3
"DATA",771.2,57,0)
RQA^Request patient authorization
"DATA",771.2,57,"V",0)
^771.23P^1^1
"DATA",771.2,57,"V",1,0)
3
"DATA",771.2,58,0)
RQI^Request patient information
"DATA",771.2,58,"V",0)
^771.23P^1^1
"DATA",771.2,58,"V",1,0)
3
"DATA",771.2,59,0)
RRI^Return patient referral
"DATA",771.2,59,"V",0)
^771.23P^1^1
"DATA",771.2,59,"V",1,0)
3
"DATA",771.2,60,0)
SIU^Schedule information unsolicited
"DATA",771.2,60,"V",0)
^771.23P^1^1
"DATA",771.2,60,"V",1,0)
3
"DATA",771.2,61,0)
SPQ^Stored procedure request
"DATA",771.2,61,"V",0)
^771.23P^1^1
"DATA",771.2,61,"V",1,0)
3
"DATA",771.2,62,0)
SQM^Schedule query
"DATA",771.2,62,"V",0)
^771.23P^1^1
"DATA",771.2,62,"V",1,0)
3
"DATA",771.2,63,0)
SQR^Schedule query response
"DATA",771.2,63,"V",0)
^771.23P^1^1
"DATA",771.2,63,"V",1,0)
3
"DATA",771.2,64,0)
SRM^Schedule request
"DATA",771.2,64,"V",0)
^771.23P^1^1
"DATA",771.2,64,"V",1,0)
3
"DATA",771.2,65,0)
SRR^Scheduled request response
"DATA",771.2,65,"V",0)
^771.23P^1^1
"DATA",771.2,65,"V",1,0)
3
"DATA",771.2,66,0)
TBR^Tabular response
"DATA",771.2,66,"V",0)
^771.23P^1^1
"DATA",771.2,66,"V",1,0)
3
"DATA",771.2,67,0)
VTQ^Virtual table query
"DATA",771.2,67,"V",0)
^771.23P^1^1
"DATA",771.2,67,"V",1,0)
3
"DATA",771.2,68,0)
VXQ^Query for vaccination record
"DATA",771.2,68,"V",0)
^771.23P^1^1
"DATA",771.2,68,"V",1,0)
3
"DATA",771.2,69,0)
VXX^Vaccination query response/multiple PID
"DATA",771.2,69,"V",0)
^771.23P^1^1
"DATA",771.2,69,"V",1,0)
3
"DATA",771.2,70,0)
VXR^Vaccination query record response
"DATA",771.2,70,"V",0)
^771.23P^1^1
"DATA",771.2,70,"V",1,0)
3
"DATA",771.2,71,0)
VXU^Unsolicited vaccinnation record update
"DATA",771.2,71,"V",0)
^771.23P^1^1
"DATA",771.2,71,"V",1,0)
3
"DATA",771.2,72,0)
Z00^Ambulatory Care Reporting Project
"DATA",771.2,72,"V",0)
^771.23P^3^3
"DATA",771.2,72,"V",1,0)
1
"DATA",771.2,72,"V",2,0)
2
"DATA",771.2,72,"V",3,0)
3
"DATA",771.2,73,0)
ZIU^Schedule Information Unsolicited
"DATA",771.2,73,"V",0)
^771.23P^3^3
"DATA",771.2,73,"V",1,0)
1
"DATA",771.2,73,"V",2,0)
2
"DATA",771.2,73,"V",3,0)
3
"DATA",771.2,74,0)
ZSQ^Scheduled Activity Transaction
"DATA",771.2,74,"V",0)
^771.23P^3^3
"DATA",771.2,74,"V",1,0)
1
"DATA",771.2,74,"V",2,0)
2
"DATA",771.2,74,"V",3,0)
3
"DATA",771.2,75,0)
ZSC^<RESERVED>
"DATA",771.2,75,"V",0)
^771.23P^1^1
"DATA",771.2,75,"V",1,0)
3
"DATA",771.2,76,0)
PPG^Patient pathway (goal-oriented) message
"DATA",771.2,76,"V",0)
^771.23P^1^1
"DATA",771.2,76,"V",1,0)
3
"DATA",771.2,77,0)
PPP^Patient pathway (problem-oriented)
"DATA",771.2,77,"V",0)
^771.23P^1^1
"DATA",771.2,77,"V",1,0)
3
"DATA",771.2,78,0)
PPT^Patient pathway (goal oriented) response
"DATA",771.2,78,"V",0)
^771.23P^1^1
"DATA",771.2,78,"V",1,0)
3
"DATA",771.2,79,0)
PPV^Patient goal response
"DATA",771.2,79,"V",0)
^771.23P^1^1
"DATA",771.2,79,"V",1,0)
3
"DATA",771.2,80,0)
PRR^Patient problem response
"DATA",771.2,80,"V",0)
^771.23P^1^1
"DATA",771.2,80,"V",1,0)
3
"DATA",771.2,81,0)
PTR^Patient pathway (prob orient) response
"DATA",771.2,81,"V",0)
^771.23P^1^1
"DATA",771.2,81,"V",1,0)
3
"DATA",771.2,82,0)
SUR^Summary product experience report
"DATA",771.2,82,"V",0)
^771.23P^1^1
"DATA",771.2,82,"V",1,0)
3
"DATA",771.2,83,0)
VQQ^Virtual table query
"DATA",771.2,83,"V",0)
^771.23P^1^1
"DATA",771.2,83,"V",1,0)
3
"DATA",771.5,1,0)
2.1^1
"DATA",771.5,2,0)
2.2^1
"DATA",771.5,3,0)
2.3^1
"DATA",779.001,1,0)
A01^ADT/ACK-Admit a patient
"DATA",779.001,1,1,0)
^779.0101P^3^3
"DATA",779.001,1,1,1,0)
1
"DATA",779.001,1,1,2,0)
2
"DATA",779.001,1,1,3,0)
3
"DATA",779.001,2,0)
A02^ADT/ACK-Transfer a patient
"DATA",779.001,2,1,0)
^779.0101P^3^3
"DATA",779.001,2,1,1,0)
1
"DATA",779.001,2,1,2,0)
2
"DATA",779.001,2,1,3,0)
3
"DATA",779.001,3,0)
A03^ADT/ACK-Discharge a patient
"DATA",779.001,3,1,0)
^779.0101P^3^3
"DATA",779.001,3,1,1,0)
1
"DATA",779.001,3,1,2,0)
2
"DATA",779.001,3,1,3,0)
3
"DATA",779.001,4,0)
A04^ADT/ACK-Register a patient
"DATA",779.001,4,1,0)
^779.0101P^3^3
"DATA",779.001,4,1,1,0)
1
"DATA",779.001,4,1,2,0)
2
"DATA",779.001,4,1,3,0)
3
"DATA",779.001,5,0)
A05^ADT/ACK-Preadmit a patient
"DATA",779.001,5,1,0)
^779.0101P^3^3
"DATA",779.001,5,1,1,0)
1
"DATA",779.001,5,1,2,0)
2
"DATA",779.001,5,1,3,0)
3
"DATA",779.001,6,0)
A06^ADT/ACK-Transfer an outpatient to inpatient
"DATA",779.001,6,1,0)
^779.0101P^3^3
"DATA",779.001,6,1,1,0)
1
"DATA",779.001,6,1,2,0)
2
"DATA",779.001,6,1,3,0)
3
"DATA",779.001,7,0)
A07^ADT/ACK-Transfer an inpatient to outpatient
"DATA",779.001,7,1,0)
^779.0101P^3^3
"DATA",779.001,7,1,1,0)
1
"DATA",779.001,7,1,2,0)
2
"DATA",779.001,7,1,3,0)
3
"DATA",779.001,8,0)
A08^ADT/ACK-Update patient information
"DATA",779.001,8,1,0)
^779.0101P^3^3
"DATA",779.001,8,1,1,0)
1
"DATA",779.001,8,1,2,0)
2
"DATA",779.001,8,1,3,0)
3
"DATA",779.001,9,0)
A09^ADT/ACK-Patient departing
"DATA",779.001,9,1,0)
^779.0101P^3^3
"DATA",779.001,9,1,1,0)
1
"DATA",779.001,9,1,2,0)
2
"DATA",779.001,9,1,3,0)
3
"DATA",779.001,10,0)
A10^ADT/ACK-Patient arriving
"DATA",779.001,10,1,0)
^779.0101P^3^3
"DATA",779.001,10,1,1,0)
1
"DATA",779.001,10,1,2,0)
2
"DATA",779.001,10,1,3,0)
3
"DATA",779.001,11,0)
A11^ADT/ACK-Cancel admit
"DATA",779.001,11,1,0)
^779.0101P^3^3
"DATA",779.001,11,1,1,0)
1
"DATA",779.001,11,1,2,0)
2
"DATA",779.001,11,1,3,0)
3
"DATA",779.001,12,0)
A12^ADT/ACK-Cancel transfer
"DATA",779.001,12,1,0)
^779.0101P^3^3
"DATA",779.001,12,1,1,0)
1
"DATA",779.001,12,1,2,0)
2
"DATA",779.001,12,1,3,0)
3
"DATA",779.001,13,0)
A13^ADT/ACK-Cancel discharge
"DATA",779.001,13,1,0)
^779.0101P^3^3
"DATA",779.001,13,1,1,0)
1
"DATA",779.001,13,1,2,0)
2
"DATA",779.001,13,1,3,0)
3
"DATA",779.001,14,0)
A14^ADT/ACK-Pending admit
"DATA",779.001,14,1,0)
^779.0101P^3^3
"DATA",779.001,14,1,1,0)
1
"DATA",779.001,14,1,2,0)
2
"DATA",779.001,14,1,3,0)
3
"DATA",779.001,15,0)
A15^ADT/ACK-Pending transfer
"DATA",779.001,15,1,0)
^779.0101P^3^3
"DATA",779.001,15,1,1,0)
1
"DATA",779.001,15,1,2,0)
2
"DATA",779.001,15,1,3,0)
3
"DATA",779.001,16,0)
A16^ADT/ACK-Pending discharge
"DATA",779.001,16,1,0)
^779.0101P^3^3
"DATA",779.001,16,1,1,0)
1
"DATA",779.001,16,1,2,0)
2
"DATA",779.001,16,1,3,0)
3
"DATA",779.001,17,0)
A17^ADT/ACK-Swap patients
"DATA",779.001,17,1,0)
^779.0101P^3^3
"DATA",779.001,17,1,1,0)
1
"DATA",779.001,17,1,2,0)
2
"DATA",779.001,17,1,3,0)
3
"DATA",779.001,18,0)
A18^ADT/ACK-Merge patient information
"DATA",779.001,18,1,0)
^779.0101P^3^3
"DATA",779.001,18,1,1,0)
1
"DATA",779.001,18,1,2,0)
2
"DATA",779.001,18,1,3,0)
3
"DATA",779.001,19,0)
A19^QRY/ACK-Patient query
"DATA",779.001,19,1,0)
^779.0101P^3^3
"DATA",779.001,19,1,1,0)
1
"DATA",779.001,19,1,2,0)
2
"DATA",779.001,19,1,3,0)
3
"DATA",779.001,20,0)
A20^ADT/ACK-Nursing/Census application updates
"DATA",779.001,20,1,0)
^779.0101P^3^3
"DATA",779.001,20,1,1,0)
1
"DATA",779.001,20,1,2,0)
2
"DATA",779.001,20,1,3,0)
3
"DATA",779.001,21,0)
A21^ADT/ACK-Leave of absence - out (leaving)
"DATA",779.001,21,1,0)
^779.0101P^3^3
"DATA",779.001,21,1,1,0)
1
"DATA",779.001,21,1,2,0)
2
"DATA",779.001,21,1,3,0)
3
"DATA",779.001,22,0)
A22^ADT/ACK-Leave of absence - in (returning)
"DATA",779.001,22,1,0)
^779.0101P^3^3
"DATA",779.001,22,1,1,0)
1
"DATA",779.001,22,1,2,0)
2
"DATA",779.001,22,1,3,0)
3
"DATA",779.001,23,0)
A23^ADT/ACK-Delete a patient record
"DATA",779.001,23,1,0)
^779.0101P^3^3
"DATA",779.001,23,1,1,0)
1
"DATA",779.001,23,1,2,0)
2
"DATA",779.001,23,1,3,0)
3
"DATA",779.001,24,0)
A24^ADT/ACK-Link patient information
"DATA",779.001,24,1,0)
^779.0101P^3^3
"DATA",779.001,24,1,1,0)
1
"DATA",779.001,24,1,2,0)
2
"DATA",779.001,24,1,3,0)
3
"DATA",779.001,25,0)
A25^ADT/ACK-Cancel pending discharge
"DATA",779.001,25,1,0)
^779.0101P^2^2
"DATA",779.001,25,1,1,0)
2
"DATA",779.001,25,1,2,0)
3
"DATA",779.001,26,0)
A26^ADT/ACK-Cancel pending transfer
"DATA",779.001,26,1,0)
^779.0101P^2^2
"DATA",779.001,26,1,1,0)
2
"DATA",779.001,26,1,2,0)
3
"DATA",779.001,27,0)
A27^ADT/ACK-Cancel pending admit
"DATA",779.001,27,1,0)
^779.0101P^2^2
"DATA",779.001,27,1,1,0)
2
"DATA",779.001,27,1,2,0)
3
"DATA",779.001,28,0)
A28^ADT/ACK-Add person information
"DATA",779.001,28,1,0)
^779.0101P^2^2
"DATA",779.001,28,1,1,0)
2
"DATA",779.001,28,1,2,0)
3
"DATA",779.001,29,0)
A29^ADT/ACK-Delete person information
"DATA",779.001,29,1,0)
^779.0101P^2^2
"DATA",779.001,29,1,1,0)
2
"DATA",779.001,29,1,2,0)
3
"DATA",779.001,30,0)
A30^ADT/ACK-Merge person information
"DATA",779.001,30,1,0)
^779.0101P^2^2
"DATA",779.001,30,1,1,0)
2
"DATA",779.001,30,1,2,0)
3
"DATA",779.001,31,0)
A31^ADT/ACK-Update person information
"DATA",779.001,31,1,0)
^779.0101P^2^2
"DATA",779.001,31,1,1,0)
2
"DATA",779.001,31,1,2,0)
3
"DATA",779.001,32,0)
A32^ADT/ACK-Cancel patient arriving
"DATA",779.001,32,1,0)
^779.0101P^2^2
"DATA",779.001,32,1,1,0)
2
"DATA",779.001,32,1,2,0)
3
"DATA",779.001,33,0)
A33^ADT/ACK-Cancel patient departing
"DATA",779.001,33,1,0)
^779.0101P^2^2
"DATA",779.001,33,1,1,0)
2
"DATA",779.001,33,1,2,0)
3
"DATA",779.001,34,0)
A34^ADT/ACK-Merge patient information - patient ID only
"DATA",779.001,34,1,0)
^779.0101P^2^2
"DATA",779.001,34,1,1,0)
2
"DATA",779.001,34,1,2,0)
3
"DATA",779.001,35,0)
A35^ADT/ACK-Merge patient information - account number only
"DATA",779.001,35,1,0)
^779.0101P^2^2
"DATA",779.001,35,1,1,0)
2
"DATA",779.001,35,1,2,0)
3
"DATA",779.001,36,0)
A36^ADT/ACK-Merge patient information - patient ID/acct. number
"DATA",779.001,36,1,0)
^779.0101P^2^2
"DATA",779.001,36,1,1,0)
2
"DATA",779.001,36,1,2,0)
3
"DATA",779.001,37,0)
A37^ADT/ACK-Unlink patient information
"DATA",779.001,37,1,0)
^779.0101P^2^2
"DATA",779.001,37,1,1,0)
2
"DATA",779.001,37,1,2,0)
3
"DATA",779.001,38,0)
O01^ORM-Order message (also RDE,RDS,RGV,RAS)
"DATA",779.001,38,1,0)
^779.0101P^3^3
"DATA",779.001,38,1,1,0)
1
"DATA",779.001,38,1,2,0)
2
"DATA",779.001,38,1,3,0)
3
"DATA",779.001,39,0)
O02^ORR-Order response (also RRE,RRD,RRG,RRA)
"DATA",779.001,39,1,0)
^779.0101P^3^3
"DATA",779.001,39,1,1,0)
1
"DATA",779.001,39,1,2,0)
2
"DATA",779.001,39,1,3,0)
3
"DATA",779.001,40,0)
P01^BAR/ACK-Add and update patient account
"DATA",779.001,40,1,0)
^779.0101P^3^3
"DATA",779.001,40,1,1,0)
1
"DATA",779.001,40,1,2,0)
2
"DATA",779.001,40,1,3,0)
3
"DATA",779.001,41,0)
P02^BAR/ACK-Purge patient account
"DATA",779.001,41,1,0)
^779.0101P^3^3
"DATA",779.001,41,1,1,0)
1
"DATA",779.001,41,1,2,0)
2
"DATA",779.001,41,1,3,0)
3
"DATA",779.001,42,0)
P03^DFT/ACK-Post detail financial transaction
"DATA",779.001,42,1,0)
^779.0101P^3^3
"DATA",779.001,42,1,1,0)
1
"DATA",779.001,42,1,2,0)
2
"DATA",779.001,42,1,3,0)
3
"DATA",779.001,43,0)
P04^QRY/DSR-Generate bill and A/R statements
"DATA",779.001,43,1,0)
^779.0101P^3^3
"DATA",779.001,43,1,1,0)
1
"DATA",779.001,43,1,2,0)
2
"DATA",779.001,43,1,3,0)
3
"DATA",779.001,44,0)
Q01^QRY/DSR-Query sent for immediate response
"DATA",779.001,44,1,0)
^779.0101P^3^3
"DATA",779.001,44,1,1,0)
1
"DATA",779.001,44,1,2,0)
2
"DATA",779.001,44,1,3,0)
3
"DATA",779.001,45,0)
Q02^QRY/ACK-Query sent for deferred response
"DATA",779.001,45,1,0)
^779.0101P^3^3
"DATA",779.001,45,1,1,0)
1
"DATA",779.001,45,1,2,0)
2
"DATA",779.001,45,1,3,0)
3
"DATA",779.001,46,0)
R01^ORU/ACK-Unsolicited transmission of observation
"DATA",779.001,46,1,0)
^779.0101P^3^3
"DATA",779.001,46,1,1,0)
1
"DATA",779.001,46,1,2,0)
2
"DATA",779.001,46,1,3,0)
3
"DATA",779.001,47,0)
R02^QRY-Query for results of observation
"DATA",779.001,47,1,0)
^779.0101P^3^3
"DATA",779.001,47,1,1,0)
1
"DATA",779.001,47,1,2,0)
2
"DATA",779.001,47,1,3,0)
3
"DATA",779.001,48,0)
R03^Display-oriented results, query/unsolicited update
"DATA",779.001,48,1,0)
^779.0101P^3^3
"DATA",779.001,48,1,1,0)
1
"DATA",779.001,48,1,2,0)
2
"DATA",779.001,48,1,3,0)
3
"DATA",779.001,49,0)
Z01^IVM initial transmission
"DATA",779.001,49,1,0)
^779.0101P^1^1
"DATA",779.001,49,1,1,0)
2
"DATA",779.001,50,0)
Z02^IVM full transmission
"DATA",779.001,50,1,0)
^779.0101P^1^1
"DATA",779.001,50,1,1,0)
2
"DATA",779.001,51,0)
Z03^IVM SSN transmission
"DATA",779.001,51,1,0)
^779.0101P^1^1
"DATA",779.001,51,1,1,0)
2
"DATA",779.001,52,0)
Z04^IVM insurance transmission
"DATA",779.001,52,1,0)
^779.0101P^1^1
"DATA",779.001,52,1,1,0)
2
"DATA",779.001,53,0)
Z05^IVM demographic transmission
"DATA",779.001,53,1,0)
^779.0101P^1^1
"DATA",779.001,53,1,1,0)
2
"DATA",779.001,54,0)
Z06^IVM means test transmission
"DATA",779.001,54,1,0)
^779.0101P^1^1
"DATA",779.001,54,1,1,0)
2
"DATA",779.001,55,0)
Z07^IVM demographic/means test transmission
"DATA",779.001,55,1,0)
^779.0101P^1^1
"DATA",779.001,55,1,1,0)
2
"DATA",779.001,56,0)
Z08^IVM case status transmission
"DATA",779.001,56,1,0)
^779.0101P^1^1
"DATA",779.001,56,1,1,0)
2
"DATA",779.001,57,0)
Z09^IVM billing/collection transmission
"DATA",779.001,57,1,0)
^779.0101P^1^1
"DATA",779.001,57,1,1,0)
2
"DATA",779.001,58,0)
Z00^Ambulatory Care Reporting Project
"DATA",779.001,58,1,0)
^779.0101P^1^1
"DATA",779.001,58,1,1,0)
2
"DATA",779.001,59,0)
A38^ADT/ACK-Cancel pre-admit
"DATA",779.001,59,1,0)
^779.0101P^1^1
"DATA",779.001,59,1,1,0)
3
"DATA",779.001,60,0)
B01^PPR/ACK-Patient problem
"DATA",779.001,60,1,0)
^779.0101P^1^1
"DATA",779.001,60,1,1,0)
3
"DATA",779.001,61,0)
C01^CRM-Register a patient on a clinical trial
"DATA",779.001,61,1,0)
^779.0101P^1^1
"DATA",779.001,61,1,1,0)
3
"DATA",779.001,62,0)
C02^CRM-Cancel a patient registration on clinical trial (for clerical mistakes only)
"DATA",779.001,62,1,0)
^779.0101P^1^1
"DATA",779.001,62,1,1,0)
3
"DATA",779.001,63,0)
C03^SRM-Correct/update registration information
"DATA",779.001,63,1,0)
^779.0101P^1^1
"DATA",779.001,63,1,1,0)
3
"DATA",779.001,64,0)
C04^CRM-Patient has gone off a clinical trial
"DATA",779.001,64,1,0)
^779.0101P^1^1
"DATA",779.001,64,1,1,0)
3
"DATA",779.001,65,0)
C05^CRM-Patient enters phase of clinical trial
"DATA",779.001,65,1,0)
^779.0101P^1^1
"DATA",779.001,65,1,1,0)
3
"DATA",779.001,66,0)
C06^CRM-Cancel patient entering a phase (clerical mistake)
"DATA",779.001,66,1,0)
^779.0101P^1^1
"DATA",779.001,66,1,1,0)
3
"DATA",779.001,67,0)
C07^CRM-Correct/update phase information
"DATA",779.001,67,1,0)
^779.0101P^1^1
"DATA",779.001,67,1,1,0)
3
"DATA",779.001,68,0)
C08^CRM-Patient has gone off phase of clinical trial
"DATA",779.001,68,1,0)
^779.0101P^1^1
"DATA",779.001,68,1,1,0)
3
"DATA",779.001,69,0)
C09^CSU-Automated time intervals for reporting, like monthly
"DATA",779.001,69,1,0)
^779.0101P^1^1
"DATA",779.001,69,1,1,0)
3
"DATA",779.001,70,0)
C10^CSU-Patient completes the clinical trial
"DATA",779.001,70,1,0)
^779.0101P^1^1
"DATA",779.001,70,1,1,0)
3
"DATA",779.001,71,0)
C11^CSU-Patient completes a phase of the clinical trial
"DATA",779.001,71,1,0)
^779.0101P^1^1
"DATA",779.001,71,1,1,0)
3
"DATA",779.001,72,0)
C12^CSU-Update/correction of patient order/result information
"DATA",779.001,72,1,0)
^779.0101P^1^1
"DATA",779.001,72,1,1,0)
3
"DATA",779.001,73,0)
G01^PGL/ACK-Patient goal
"DATA",779.001,73,1,0)
^779.0101P^1^1
"DATA",779.001,73,1,1,0)
3
"DATA",779.001,74,0)
I01^RQI/RPI-Request for insurance information
"DATA",779.001,74,1,0)
^779.0101P^1^1
"DATA",779.001,74,1,1,0)
3
"DATA",779.001,75,0)
I02^RQI/RPL-Request/receipt of patient selection display list
"DATA",779.001,75,1,0)
^779.0101P^1^1
"DATA",779.001,75,1,1,0)
3
"DATA",779.001,76,0)
I03^RQI/RPR-Request/receipt of patient selection list
"DATA",779.001,76,1,0)
^779.0101P^1^1
"DATA",779.001,76,1,1,0)
3
"DATA",779.001,77,0)
I04^RQD/RPI-Request for patient demographic data
"DATA",779.001,77,1,0)
^779.0101P^1^1
"DATA",779.001,77,1,1,0)
3
"DATA",779.001,78,0)
I05^RQC/RCI-Request for patient clinical information
"DATA",779.001,78,1,0)
^779.0101P^1^1
"DATA",779.001,78,1,1,0)
3
"DATA",779.001,79,0)
I06^RQC/RCL-Request/receipt of clinical data listing
"DATA",779.001,79,1,0)
^779.0101P^1^1
"DATA",779.001,79,1,1,0)
3
"DATA",779.001,80,0)
I07^PIN/ACK-Unsolicited insurance information
"DATA",779.001,80,1,0)
^779.0101P^1^1
"DATA",779.001,80,1,1,0)
3
"DATA",779.001,81,0)
I08^RQA/RPA-Request for treatment authorization information
"DATA",779.001,81,1,0)
^779.0101P^1^1
"DATA",779.001,81,1,1,0)
3
"DATA",779.001,82,0)
I09^RQA/RPA-Request for modification to an authorization
"DATA",779.001,82,1,0)
^779.0101P^1^1
"DATA",779.001,82,1,1,0)
3
"DATA",779.001,83,0)
I10^RQA/RPA-Request for resubmission of an authorization
"DATA",779.001,83,1,0)
^779.0101P^1^1
"DATA",779.001,83,1,1,0)
3
"DATA",779.001,84,0)
I11^RQA/RPA-Request for cancellation of an authorization
"DATA",779.001,84,1,0)
^779.0101P^1^1
"DATA",779.001,84,1,1,0)
3
"DATA",779.001,85,0)
I12^REF/RRI-Patient referral
"DATA",779.001,85,1,0)
^779.0101P^1^1
"DATA",779.001,85,1,1,0)
3
"DATA",779.001,86,0)
I13^REF/RRI-Modify patient referral
"DATA",779.001,86,1,0)
^779.0101P^1^1
"DATA",779.001,86,1,1,0)
3
"DATA",779.001,87,0)
I14^REF/RRI-Cancel patient referral
"DATA",779.001,87,1,0)
^779.0101P^1^1
"DATA",779.001,87,1,1,0)
3
"DATA",779.001,88,0)
I15^REF/RRI-Request patient referral status
"DATA",779.001,88,1,0)
^779.0101P^1^1
"DATA",779.001,88,1,1,0)
3
"DATA",779.001,89,0)
M01^MFN/MFK-Master file not otherwise specified (for backward compatibility only)
"DATA",779.001,89,1,0)
^779.0101P^3^3
"DATA",779.001,89,1,1,0)
3
"DATA",779.001,89,1,2,0)
1
"DATA",779.001,89,1,3,0)
2
"DATA",779.001,90,0)
M02^MFN/MFK-Master file-Staff Practitioner
"DATA",779.001,90,1,0)
^779.0101P^1^1
"DATA",779.001,90,1,1,0)
3
"DATA",779.001,91,0)
M03^MFN/MFK-Master file-Test/Observation
"DATA",779.001,91,1,0)
^779.0101P^1^1
"DATA",779.001,91,1,1,0)
3
"DATA",779.001,92,0)
M04^MFD/ACK-Master files delayed application acknowledgement
"DATA",779.001,92,1,0)
^779.0101P^1^1
"DATA",779.001,92,1,1,0)
3
"DATA",779.001,93,0)
M05^MFN/MFK-Patient location master file
"DATA",779.001,93,1,0)
^779.0101P^1^1
"DATA",779.001,93,1,1,0)
3
"DATA",779.001,94,0)
M06^MFN/MFK-Charge description master file
"DATA",779.001,94,1,0)
^779.0101P^1^1
"DATA",779.001,94,1,1,0)
3
"DATA",779.001,95,0)
M07^MFN/MFK-Clinical study with phases and schedules master file
"DATA",779.001,95,1,0)
^779.0101P^1^1
"DATA",779.001,95,1,1,0)
3
"DATA",779.001,96,0)
M08^MFN/MFK-Clinical study without phases but with schedules master file
"DATA",779.001,96,1,0)
^779.0101P^1^1
"DATA",779.001,96,1,1,0)
3
"DATA",779.001,97,0)
RAR^RAR-Pharmacy administration information query response
"DATA",779.001,97,1,0)
^779.0101P^1^1
"DATA",779.001,97,1,1,0)
3
"DATA",779.001,98,0)
RDR^RDR-Pharmacy dispense information query response
"DATA",779.001,98,1,0)
^779.0101P^1^1
"DATA",779.001,98,1,1,0)
3
"DATA",779.001,99,0)
RER^RER-Pharmacy encoded order infomration query response
"DATA",779.001,99,1,0)
^779.0101P^1^1
"DATA",779.001,99,1,1,0)
3
"DATA",779.001,100,0)
RGR^RGR-Pharmacy dose information query response
"DATA",779.001,100,1,0)
^779.0101P^1^1
"DATA",779.001,100,1,1,0)
3
"DATA",779.001,101,0)
ROR^ROR-Pharmacy prescription order query response
"DATA",779.001,101,1,0)
^779.0101P^1^1
"DATA",779.001,101,1,1,0)
3
"DATA",779.001,102,0)
P05^BAR/ACK-Update account
"DATA",779.001,102,1,0)
^779.0101P^1^1
"DATA",779.001,102,1,1,0)
3
"DATA",779.001,103,0)
P06^BAR/ACK-End account
"DATA",779.001,103,1,0)
^779.0101P^1^1
"DATA",779.001,103,1,1,0)
3
"DATA",779.001,104,0)
Q03^DSR/ACK-Deferred response to a query
"DATA",779.001,104,1,0)
^779.0101P^1^1
"DATA",779.001,104,1,1,0)
3
"DATA",779.001,105,0)
Q05^UDM/ACK-Unsolicited display update
"DATA",779.001,105,1,0)
^779.0101P^1^1
"DATA",779.001,105,1,1,0)
3
"DATA",779.001,106,0)
R04^ORF-Response to query; transmission of requested observation
"DATA",779.001,106,1,0)
^779.0101P^1^1
"DATA",779.001,106,1,1,0)
3
"DATA",779.001,107,0)
S01^SRM/SRR-Request new appointment booking
"DATA",779.001,107,1,0)
^779.0101P^1^1
"DATA",779.001,107,1,1,0)
3
"DATA",779.001,108,0)
S02^SRM/SRR-Request appointment rescheduling
"DATA",779.001,108,1,0)
^779.0101P^1^1
"DATA",779.001,108,1,1,0)
3
"DATA",779.001,109,0)
S03^SRM/SRR-Request appointment modification
"DATA",779.001,109,1,0)
^779.0101P^1^1
"DATA",779.001,109,1,1,0)
3
"DATA",779.001,110,0)
S04^SRM/SRR-Request appointment cancellation
"DATA",779.001,110,1,0)
^779.0101P^1^1
"DATA",779.001,110,1,1,0)
3
"DATA",779.001,111,0)
S05^SRM/SRR-Request appointment discontinuation
"DATA",779.001,111,1,0)
^779.0101P^1^1
"DATA",779.001,111,1,1,0)
3
"DATA",779.001,112,0)
S06^SRM/SRR-Request appointment deletion
"DATA",779.001,112,1,0)
^779.0101P^1^1
"DATA",779.001,112,1,1,0)
3
"DATA",779.001,113,0)
S07^SRM/SRR-Request addition of service/resource on appointment
"DATA",779.001,113,1,0)
^779.0101P^1^1
"DATA",779.001,113,1,1,0)
3
"DATA",779.001,114,0)
S08^SRM/SRR-Request modification of service/resource on appointment
"DATA",779.001,114,1,0)
^779.0101P^1^1
"DATA",779.001,114,1,1,0)
3
"DATA",779.001,115,0)
S09^SRM/SRR-Request ccancellation of service/resource on appointment
"DATA",779.001,115,1,0)
^779.0101P^1^1
"DATA",779.001,115,1,1,0)
3
"DATA",779.001,116,0)
S10^SRM/SRR-Request discontinuation of service/resource on appointment
"DATA",779.001,116,1,0)
^779.0101P^1^1
"DATA",779.001,116,1,1,0)
3
"DATA",779.001,117,0)
S11^SRM/SRR-Request deletion of service/resource on appointment
"DATA",779.001,117,1,0)
^779.0101P^1^1
"DATA",779.001,117,1,1,0)
3
"DATA",779.001,118,0)
S12^SIU/ACK-Notification of new appointment booking
"DATA",779.001,118,1,0)
^779.0101P^1^1
"DATA",779.001,118,1,1,0)
3
"DATA",779.001,119,0)
S13^SIU/ACK-Notification of appointment rescheduling
"DATA",779.001,119,1,0)
^779.0101P^1^1
"DATA",779.001,119,1,1,0)
3
"DATA",779.001,120,0)
S14^SIU/ACK-Notification of appointment modification
"DATA",779.001,120,1,0)
^779.0101P^1^1
"DATA",779.001,120,1,1,0)
3
"DATA",779.001,121,0)
S15^SIU/ACK-Notification of appointment cancellation
"DATA",779.001,121,1,0)
^779.0101P^1^1
"DATA",779.001,121,1,1,0)
3
"DATA",779.001,122,0)
S16^SIU/ACK-Notification of appointment discontinuation
"DATA",779.001,122,1,0)
^779.0101P^1^1
"DATA",779.001,122,1,1,0)
3
"DATA",779.001,123,0)
S17^SIU/ACK-Notification of appointment deletion
"DATA",779.001,123,1,0)
^779.0101P^1^1
"DATA",779.001,123,1,1,0)
3
"DATA",779.001,124,0)
S18^SIU/ACK-Notification of addition of service/resource on appointment
"DATA",779.001,124,1,0)
^779.0101P^1^1
"DATA",779.001,124,1,1,0)
3
"DATA",779.001,125,0)
S19^SIU/ACK-Notification of modification of service/resource on appointment
"DATA",779.001,125,1,0)
^779.0101P^1^1
"DATA",779.001,125,1,1,0)
3
"DATA",779.001,126,0)
S20^SIU/ACK-Notification of cancellation of service/resource on appointment
"DATA",779.001,126,1,0)
^779.0101P^1^1
"DATA",779.001,126,1,1,0)
3
"DATA",779.001,127,0)
S21^SIU/ACK-Notification of discontinuation of service/resource on appointment
"DATA",779.001,127,1,0)
^779.0101P^1^1
"DATA",779.001,127,1,1,0)
3
"DATA",779.001,128,0)
S22^SIU/ACK-Notification of deletion of service/resource on appointment
"DATA",779.001,128,1,0)
^779.0101P^1^1
"DATA",779.001,128,1,1,0)
3
"DATA",779.001,129,0)
S23^SIU/ACK-Notification of blocked schedule time slot(s)
"DATA",779.001,129,1,0)
^779.0101P^1^1
"DATA",779.001,129,1,1,0)
3
"DATA",779.001,130,0)
S24^SIU/ACK-Notificatino of open ("unblocked") schedule time slot(s)
"DATA",779.001,130,1,0)
^779.0101P^1^1
"DATA",779.001,130,1,1,0)
3
"DATA",779.001,131,0)
S25^SQM/SQR-Query schedule information
"DATA",779.001,131,1,0)
^779.0101P^1^1
"DATA",779.001,131,1,1,0)
3
"DATA",779.001,132,0)
T01^MDM/ACK-Original document notification
"DATA",779.001,132,1,0)
^779.0101P^1^1
"DATA",779.001,132,1,1,0)
3
"DATA",779.001,133,0)
T02^MDM/ACK-Original document notification and content
"DATA",779.001,133,1,0)
^779.0101P^1^1
"DATA",779.001,133,1,1,0)
3
"DATA",779.001,134,0)
T03^MDM/ACK-Document status change notification
"DATA",779.001,134,1,0)
^779.0101P^1^1
"DATA",779.001,134,1,1,0)
3
"DATA",779.001,135,0)
T04^MDM/ACK-Document status change notification and content
"DATA",779.001,135,1,0)
^779.0101P^1^1
"DATA",779.001,135,1,1,0)
3
"DATA",779.001,136,0)
T05^MDM/ACK-Document addendum notification
"DATA",779.001,136,1,0)
^779.0101P^1^1
"DATA",779.001,136,1,1,0)
3
"DATA",779.001,137,0)
T06^MDM/ACK-Document addendum notification and content
"DATA",779.001,137,1,0)
^779.0101P^1^1
"DATA",779.001,137,1,1,0)
3
"DATA",779.001,138,0)
T07^MDM/ACK-Document replace notification
"DATA",779.001,138,1,0)
^779.0101P^1^1
"DATA",779.001,138,1,1,0)
3
"DATA",779.001,139,0)
T08^MDM/ACK-Document replace notification and content
"DATA",779.001,139,1,0)
^779.0101P^1^1
"DATA",779.001,139,1,1,0)
3
"DATA",779.001,140,0)
T09^MDM/ACK-Document cancel notification
"DATA",779.001,140,1,0)
^779.0101P^1^1
"DATA",779.001,140,1,1,0)
3
"DATA",779.001,141,0)
V01^VXQ-Query for vaccination record
"DATA",779.001,141,1,0)
^779.0101P^1^1
"DATA",779.001,141,1,1,0)
3
"DATA",779.001,142,0)
V02^VXX-Response to vaccination query returning multiple PID matches
"DATA",779.001,142,1,0)
^779.0101P^1^1
"DATA",779.001,142,1,1,0)
3
"DATA",779.001,143,0)
V03^VXR-Vaccination record response
"DATA",779.001,143,1,0)
^779.0101P^1^1
"DATA",779.001,143,1,1,0)
3
"DATA",779.001,144,0)
V04^VXU-Unsolicited vaccination record update
"DATA",779.001,144,1,0)
^779.0101P^1^1
"DATA",779.001,144,1,1,0)
3
"DATA",779.001,145,0)
W01^ORU-Waveform result, unsolicited transmission of requested information
"DATA",779.001,145,1,0)
^779.0101P^1^1
"DATA",779.001,145,1,1,0)
3
"DATA",779.001,146,0)
W02^QRF-Waveform result, response to query
"DATA",779.001,146,1,0)
^779.0101P^1^1
"DATA",779.001,146,1,1,0)
3
"DATA",779.001,147,0)
X01^PEX-Product experience
"DATA",779.001,147,1,0)
^779.0101P^1^1
"DATA",779.001,147,1,1,0)
3
"DATA",779.001,148,0)
Z10^6.10 Income Test Data Transmission
"DATA",779.001,148,1,0)
^779.0101P^1^1
"DATA",779.001,148,1,1,0)
3
"DATA",779.001,149,0)
Z11^6.14 Enrollment/Eligibility Data Transmission
"DATA",779.001,149,1,0)
^779.0101P^3^3
"DATA",779.001,149,1,1,0)
1
"DATA",779.001,149,1,2,0)
2
"DATA",779.001,149,1,3,0)
3
"DATA",779.001,150,0)
Z12^Sensitivity Update
"DATA",779.001,150,1,0)
^779.0101P^1^1
"DATA",779.001,150,1,1,0)
3
"DATA",779.001,151,0)
Z15^CIRN Subscription Master File Update
"DATA",779.001,151,1,0)
^779.0101P^1^1
"DATA",779.001,151,1,1,0)
3
"DATA",779.001,152,0)
Z13^CIRN Dictionary Updates
"DATA",779.001,152,1,0)
^779.0101P^2^2
"DATA",779.001,152,1,1,0)
3
"DATA",779.001,152,1,2,0)
2
"DATA",779.001,153,0)
A39^ADT/ACK-Merge person-external ID
"DATA",779.001,153,1,0)
^779.0101P^1^1
"DATA",779.001,153,1,1,0)
3
"DATA",779.001,154,0)
A40^ADT/ACK-Merge person-internal ID
"DATA",779.001,154,1,0)
^779.0101P^1^1
"DATA",779.001,154,1,1,0)
3
"DATA",779.001,155,0)
A41^ADT/ACK-Merge account-patient account number
"DATA",779.001,155,1,0)
^779.0101P^1^1
"DATA",779.001,155,1,1,0)
3
"DATA",779.001,156,0)
A42^ADT/ACK-Merge visit-visit number
"DATA",779.001,156,1,0)
^779.0101P^1^1
"DATA",779.001,156,1,1,0)
3
"DATA",779.001,157,0)
A43^ADT/ACK-Move patient information-internal ID
"DATA",779.001,157,1,0)
^779.0101P^1^1
"DATA",779.001,157,1,1,0)
3
"DATA",779.001,158,0)
A44^ADT/ACK-Move account information-patient account number
"DATA",779.001,158,1,0)
^779.0101P^1^1
"DATA",779.001,158,1,1,0)
3
"DATA",779.001,159,0)
A45^Move visit information-visit number
"DATA",779.001,159,1,0)
^779.0101P^1^1
"DATA",779.001,159,1,1,0)
3
"DATA",779.001,160,0)
A46^ADT/ACK-Change external ID
"DATA",779.001,160,1,0)
^779.0101P^1^1
"DATA",779.001,160,1,1,0)
3
"DATA",779.001,161,0)
A47^ADT/ACK-Change internal ID
"DATA",779.001,161,1,0)
^779.0101P^1^1
"DATA",779.001,161,1,1,0)
3
"DATA",779.001,162,0)
A48^ADT/ACK-Change alternate patient ID
"DATA",779.001,162,1,0)
^779.0101P^1^1
"DATA",779.001,162,1,1,0)
3
"DATA",779.001,163,0)
A49^ADT/ACK-Change patient account number
"DATA",779.001,163,1,0)
^779.0101P^1^1
"DATA",779.001,163,1,1,0)
3
"DATA",779.001,164,0)
A50^ADT/ACK-Change visit number
"DATA",779.001,164,1,0)
^779.0101P^1^1
"DATA",779.001,164,1,1,0)
3
"DATA",779.001,165,0)
A51^ADT/ACK-Change alternate visit ID
"DATA",779.001,165,1,0)
^779.0101P^1^1
"DATA",779.001,165,1,1,0)
3
"DATA",779.001,166,0)
CNQ^QRY/EQQ/VQQ/RQQ-Cancel query
"DATA",779.001,166,1,0)
^779.0101P^1^1
"DATA",779.001,166,1,1,0)
3
"DATA",779.001,167,0)
M09^MFN/MFK-Test/Observation (categorical) master file
"DATA",779.001,167,1,0)
^779.0101P^1^1
"DATA",779.001,167,1,1,0)
3
"DATA",779.001,168,0)
M10^MFN/MFK-Test/Observation batteries master file
"DATA",779.001,168,1,0)
^779.0101P^1^1
"DATA",779.001,168,1,1,0)
3
"DATA",779.001,169,0)
M11^MFN/MFK-Test/Calculated observations master file
"DATA",779.001,169,1,0)
^779.0101P^1^1
"DATA",779.001,169,1,1,0)
3
"DATA",779.001,170,0)
R05^QRY/DSR-Query for display results
"DATA",779.001,170,1,0)
^779.0101P^1^1
"DATA",779.001,170,1,1,0)
3
"DATA",779.001,171,0)
R06^UDM-unsolicited update/display results
"DATA",779.001,171,1,0)
^779.0101P^1^1
"DATA",779.001,171,1,1,0)
3
"DATA",779.001,172,0)
Q06^OSQ/OSR-query for order status
"DATA",779.001,172,1,0)
^779.0101P^1^1
"DATA",779.001,172,1,1,0)
3
"DATA",779.001,173,0)
S26^Notification that patient did not show up for scheduled appointment
"DATA",779.001,173,1,0)
^779.0101P^1^1
"DATA",779.001,173,1,1,0)
3
"FIA",101)
PROTOCOL
"FIA",101,0)
^ORD(101,
"FIA",101,0,0)
101I
"FIA",101,0,1)
y^y^p^^^^n
"FIA",101,0,10)

"FIA",101,0,11)

"FIA",101,0,"RLRO")

"FIA",101,0,"VR")
1.6^HL
"FIA",101,101)
1
"FIA",101,101,774)

"FIA",771.2)
HL7 MESSAGE TYPE
"FIA",771.2,0)
^HL(771.2,
"FIA",771.2,0,0)
771.2I
"FIA",771.2,0,1)
y^y^f^^y^^y^o^n
"FIA",771.2,0,10)

"FIA",771.2,0,11)

"FIA",771.2,0,"RLRO")

"FIA",771.2,0,"VR")
1.6^HL
"FIA",771.2,771.2)
0
"FIA",771.2,771.23)
0
"FIA",771.5)
HL7 VERSION
"FIA",771.5,0)
^HL(771.5,
"FIA",771.5,0,0)
771.5I
"FIA",771.5,0,1)
y^y^f^^y^^y^o^n
"FIA",771.5,0,10)

"FIA",771.5,0,11)

"FIA",771.5,0,"RLRO")

"FIA",771.5,0,"VR")
1.6^HL
"FIA",771.5,771.5)
0
"FIA",774)
SUBSCRIPTION CONTROL
"FIA",774,0)
^HLS(774,
"FIA",774,0,0)
774
"FIA",774,0,1)
y^y^f^^^^n
"FIA",774,0,10)

"FIA",774,0,11)

"FIA",774,0,"RLRO")

"FIA",774,0,"VR")
1.6^HL
"FIA",774,774)
0
"FIA",774,774.01)
0
"FIA",774,774.18)
0
"FIA",779.001)
HL7 EVENT TYPE CODE
"FIA",779.001,0)
^HL(779.001,
"FIA",779.001,0,0)
779.001I
"FIA",779.001,0,1)
y^y^f^^y^^y^o^n
"FIA",779.001,0,10)

"FIA",779.001,0,11)

"FIA",779.001,0,"RLRO")

"FIA",779.001,0,"VR")
1.6^HL
"FIA",779.001,779.001)
0
"FIA",779.001,779.0101)
0
"FIA",869.2)
HL LOWER LEVEL PROTOCOL PARAMETER
"FIA",869.2,0)
^HLCS(869.2,
"FIA",869.2,0,0)
869.2
"FIA",869.2,0,1)
y^y^p^^^^n
"FIA",869.2,0,10)

"FIA",869.2,0,11)

"FIA",869.2,0,"RLRO")

"FIA",869.2,0,"VR")
1.6^HL
"FIA",869.2,869.2)
1
"FIA",869.2,869.2,400.01)

"FIA",869.2,869.2,400.02)

"FIA",869.2,869.2,400.03)

"FIA",869.2,869.2,400.04)

"FIA",869.2,869.2,400.06)

"FIA",870)
HL LOGICAL LINK
"FIA",870,0)
^HLCS(870,
"FIA",870,0,0)
870
"FIA",870,0,1)
y^y^p^^^^n
"FIA",870,0,10)

"FIA",870,0,11)

"FIA",870,0,"RLRO")

"FIA",870,0,"VR")
1.6^HL
"FIA",870,870)
1
"FIA",870,870,.02)

"FIA",870,870,.03)

"FIA",870,870,4.5)

"INI")
PRE^HLP14PRE
"INIT")
POST^HLP14PRE
"KRN",19,1325,-1)
0^5
"KRN",19,1325,0)
HL START^Start LLP^^R^^^^^^^^HEALTH LEVEL SEVEN^^^^^
"KRN",19,1325,1,0)
^^1^1^2950711^
"KRN",19,1325,1,1,0)
This option allows the user to start a specified LLP.
"KRN",19,1325,20)

"KRN",19,1325,25)
START^HLCSLNCH
"KRN",19,1325,26)

"KRN",19,1325,99)
56145,53330
"KRN",19,1325,99.1)
56810,53143
"KRN",19,1325,"U")
START LLP
"KRN",19,1326,-1)
0^6
"KRN",19,1326,0)
HL STOP^Stop LLP^^R^^^^^^^^HEALTH LEVEL SEVEN^^
"KRN",19,1326,1,0)
^^1^1^2950711^
"KRN",19,1326,1,1,0)
This option allows the user to stop a specified LLP.
"KRN",19,1326,20)

"KRN",19,1326,25)
STOP^HLCSLNCH
"KRN",19,1326,99)
56145,53353
"KRN",19,1326,"U")
STOP LLP
"KRN",19,1327,-1)
3^1
"KRN",19,1327,0)
HL COMMUNICATIONS SERVER^Communications Server^^M^^^^^^^y^HEALTH LEVEL SEVEN
"KRN",19,1327,1,0)
^^1^1^2950522^^^^
"KRN",19,1327,1,1,0)
COMMUNICATIONS SERVER MENU
"KRN",19,1327,10,0)
^19.01PI^23^23
"KRN",19,1327,10,14,0)
1326^5^5
"KRN",19,1327,10,14,"^")
HL STOP
"KRN",19,1327,10,15,0)
1325^4^4
"KRN",19,1327,10,15,"^")
HL START
"KRN",19,1327,10,16,0)
1330^6^6
"KRN",19,1327,10,16,"^")
HL MESSAGE MONITOR
"KRN",19,1327,10,17,0)
1334^7^7
"KRN",19,1327,10,17,"^")
HL QUEUE MANAGEMENT
"KRN",19,1327,10,18,0)
1335^8^8
"KRN",19,1327,10,18,"^")
HL CUSTOM REPORT
"KRN",19,1327,10,19,0)
1340^2^2
"KRN",19,1327,10,19,"^")
HL MANAGE FILERS
"KRN",19,1327,10,20,0)
1348^1^1
"KRN",19,1327,10,20,"^")
HL EDIT COMM SERVER PARAMETERS
"KRN",19,1327,10,21,0)
1349^3^3
"KRN",19,1327,10,21,"^")
HL FILER MONITOR
"KRN",19,1327,10,22,0)
1421
"KRN",19,1327,10,22,"^")
HL TASK RESTART
"KRN",19,1327,10,23,0)
1422
"KRN",19,1327,10,23,"^")
HL STOP ALL LINKS
"KRN",19,1327,10.1)
Communications Server
"KRN",19,1327,99)
57324,40164
"KRN",19,1327,"U")
COMMUNICATIONS SERVER
"KRN",19,1328,-1)
0^12
"KRN",19,1328,0)
HL SHOW COMMUNICATIONS ERROR^Show Communications Error^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1328,1,0)
^^4^4^2941213^^^
"KRN",19,1328,1,1,0)
WHEN THE LINK-NAME FLASHES IN THE MESSAGING MONITIOR OPTION
"KRN",19,1328,1,2,0)
IT MEANS THAT AN LLP ERROR HAS OCCURED.
"KRN",19,1328,1,3,0)
THIS OPTION DISPLAYS THE MOST RECENT LLP ERROR FOR A PARTICULAR
"KRN",19,1328,1,4,0)
LINK.
"KRN",19,1328,10.1)
Show Communications Error
"KRN",19,1328,25)
SHGLLP^HLUTIL2
"KRN",19,1328,"U")
SHOW COMMUNICATIONS ERROR
"KRN",19,1329,-1)
0^13
"KRN",19,1329,0)
HL CLEAR COMMUNICATIONS ERROR^Clear Communications Error^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1329,1,0)
^^3^3^2941213^^^^
"KRN",19,1329,1,1,0)
WHEN THE LINK-NAME FLASHES IN THE MESSAGING MONITIOR OPTION
"KRN",19,1329,1,2,0)
IT MEANS THAT AN LLP ERROR HAS OCCURED.
"KRN",19,1329,1,3,0)
THIS OPTION CLEARS THE LLP ERROR FOR A PARTICULAR LINK.
"KRN",19,1329,10.1)
Clear Communications Error
"KRN",19,1329,25)
CLGLLP^HLUTIL2
"KRN",19,1329,"U")
CLEAR COMMUNICATIONS ERROR
"KRN",19,1330,-1)
0^7
"KRN",19,1330,0)
HL MESSAGE MONITOR^Systems Link Monitor^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1330,1,0)
^^1^1^2941102^^^
"KRN",19,1330,1,1,0)
This Monitor Displays real-time information on Serial Links.
"KRN",19,1330,10.1)
Systems Link Monitor
"KRN",19,1330,25)
INIT^HLCSMON
"KRN",19,1330,"U")
SYSTEMS LINK MONITOR
"KRN",19,1331,-1)
0^16
"KRN",19,1331,0)
HL CLEAR QUEUE^Clear a Queue of all Entries^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1331,1,0)
^^1^1^2941102^
"KRN",19,1331,1,1,0)
This option allows the user to re-initialize a queue to zero entries
"KRN",19,1331,10.1)
Clear Queue of All Entries
"KRN",19,1331,25)
CLRQUE^HLUTIL2
"KRN",19,1331,"U")
CLEAR A QUEUE OF ALL ENTRIES
"KRN",19,1332,-1)
0^14
"KRN",19,1332,0)
HL CRE/ED QUEUE TEST ENTRY^Create/Edit a Queue Test Entry^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1332,1,0)
^^4^4^2950314^^^^
"KRN",19,1332,1,1,0)
This option allows a user to create a "test" message in a queue
"KRN",19,1332,1,2,0)
and send it to a non-DHCP system, or a DHCP application. 
"KRN",19,1332,1,3,0)
This allows testing of an interface with "test" messages that have
"KRN",19,1332,1,4,0)
been entered into a word-processing field.
"KRN",19,1332,10.1)
Create/Edit Test Entry
"KRN",19,1332,25)
EDITQ^HLCSQUED
"KRN",19,1332,"U")
CREATE/EDIT A QUEUE TEST ENTRY
"KRN",19,1333,-1)
0^15
"KRN",19,1333,0)
HL COPY QUEUE ENTRY^Copy a Queue Entry^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1333,1,0)
^^3^3^2941116^^
"KRN",19,1333,1,1,0)
This option allows a user to copy a message into a queue multiple
"KRN",19,1333,1,2,0)
times. This option can be used to "test" interfaces by allowing
"KRN",19,1333,1,3,0)
a message to be re-sent multiple times.
"KRN",19,1333,10.1)
Copy a Queue Entry
"KRN",19,1333,25)
REPMSG^HLCSREP
"KRN",19,1333,"U")
COPY A QUEUE ENTRY
"KRN",19,1334,-1)
3^8
"KRN",19,1334,0)
HL QUEUE MANAGEMENT^Logical Link Queue Management^^M^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1334,1,0)
^^2^2^2941118^^^
"KRN",19,1334,1,1,0)
This menu contains options to manage the Logical Link Queues and
"KRN",19,1334,1,2,0)
to setup test entries in those queues.
"KRN",19,1334,10,0)
^19.01PI^5^5
"KRN",19,1334,10,1,0)
1331^5^5
"KRN",19,1334,10,1,"^")
HL CLEAR QUEUE
"KRN",19,1334,10,2,0)
1333^4^4
"KRN",19,1334,10,2,"^")
HL COPY QUEUE ENTRY
"KRN",19,1334,10,3,0)
1332^3^3
"KRN",19,1334,10,3,"^")
HL CRE/ED QUEUE TEST ENTRY
"KRN",19,1334,10,4,0)
1328^1^1
"KRN",19,1334,10,4,"^")
HL SHOW COMMUNICATIONS ERROR
"KRN",19,1334,10,5,0)
1329^2^2
"KRN",19,1334,10,5,"^")
HL CLEAR COMMUNICATIONS ERROR
"KRN",19,1334,10.1)
Queue Management
"KRN",19,1334,99)
57324,40164
"KRN",19,1334,"U")
LOGICAL LINK QUEUE MANAGEMENT
"KRN",19,1335,-1)
0^9
"KRN",19,1335,0)
HL CUSTOM REPORT^Report^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1335,1,0)
^^2^2^2950711^
"KRN",19,1335,1,1,0)
This option allows the user to print customized reports about entries in
"KRN",19,1335,1,2,0)
the Logical Link file.
"KRN",19,1335,25)
HLCSORAT
"KRN",19,1335,"U")
REPORT
"KRN",19,1340,-1)
3^3
"KRN",19,1340,0)
HL MANAGE FILERS^Manage incoming & outgoing filers^^M^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1340,1,0)
^^1^1^2950711^
"KRN",19,1340,1,1,0)
This menu contains options to manage the Incoming and Outgoing filers.
"KRN",19,1340,10,0)
^19.01PI^7^7
"KRN",19,1340,10,1,0)
1343^1^1
"KRN",19,1340,10,1,"^")
HL START DEFAULT FILERS
"KRN",19,1340,10,2,0)
1341^2^2
"KRN",19,1340,10,2,"^")
HL START ONE INCOMING FILER
"KRN",19,1340,10,3,0)
1342^3^3
"KRN",19,1340,10,3,"^")
HL START ONE OUTGOING FILER
"KRN",19,1340,10,4,0)
1346^4^4
"KRN",19,1340,10,4,"^")
HL STOP ALL INCOMING FILERS
"KRN",19,1340,10,6,0)
1344^6^6
"KRN",19,1340,10,6,"^")
HL STOP ONE INCOMING FILER
"KRN",19,1340,10,7,0)
1345^7^7
"KRN",19,1340,10,7,"^")
HL STOP ONE OUTGOING FILER
"KRN",19,1340,99)
57324,40164
"KRN",19,1340,"U")
MANAGE INCOMING & OUTGOING FIL
"KRN",19,1341,-1)
0^18
"KRN",19,1341,0)
HL START ONE INCOMING FILER^Start an incoming filer^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1341,1,0)
^^1^1^2950711^
"KRN",19,1341,1,1,0)
This option will start one Incoming Filer.
"KRN",19,1341,25)
STARTIN^HLCS1
"KRN",19,1341,"U")
START AN INCOMING FILER
"KRN",19,1342,-1)
0^19
"KRN",19,1342,0)
HL START ONE OUTGOING FILER^Start an outgoing filer^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1342,1,0)
^^1^1^2950711^
"KRN",19,1342,1,1,0)
This option will start one Outgoing Filer.
"KRN",19,1342,25)
STARTOUT^HLCS1
"KRN",19,1342,"U")
START AN OUTGOING FILER
"KRN",19,1343,-1)
0^17
"KRN",19,1343,0)
HL START DEFAULT FILERS^Start default number of incoming & outgoing filers^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1343,1,0)
^^1^1^2950711^
"KRN",19,1343,1,1,0)
This option will start the default number of Incoming Filers.
"KRN",19,1343,25)
STARTDEF^HLCS1
"KRN",19,1343,"U")
START DEFAULT NUMBER OF INCOMI
"KRN",19,1344,-1)
0^21
"KRN",19,1344,0)
HL STOP ONE INCOMING FILER^Stop an incoming filer^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1344,1,0)
^^1^1^2950711^
"KRN",19,1344,1,1,0)
This option will stop one Incoming Filer.
"KRN",19,1344,25)
STOPIN^HLCS1
"KRN",19,1344,"U")
STOP AN INCOMING FILER
"KRN",19,1345,-1)
0^22
"KRN",19,1345,0)
HL STOP ONE OUTGOING FILER^Stop an outgoing filer^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1345,1,0)
^^1^1^2950711^
"KRN",19,1345,1,1,0)
This option will stop one Outgoing Filer.
"KRN",19,1345,25)
STOPOUT^HLCS1
"KRN",19,1345,99.1)
56810,53143
"KRN",19,1345,"U")
STOP AN OUTGOING FILER
"KRN",19,1346,-1)
0^20
"KRN",19,1346,0)
HL STOP ALL INCOMING FILERS^Stop all incoming filers^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1346,1,0)
^^1^1^2950711^
"KRN",19,1346,1,1,0)
This option will stop all Incoming Filers that are currently running.
"KRN",19,1346,25)
STOPAIN^HLCS1
"KRN",19,1346,"U")
STOP ALL INCOMING FILERS
"KRN",19,1348,-1)
0^2
"KRN",19,1348,0)
HL EDIT COMM SERVER PARAMETERS^Edit Communication Server parameters^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1348,1,0)
^^1^1^2980610^^
"KRN",19,1348,1,1,0)
Option used to edit the HL COMMUNICATION SERVER PARAMETER file (#869.3)
"KRN",19,1348,25)
SITEP^HLCS2
"KRN",19,1348,"U")
EDIT COMMUNICATION SERVER PARA
"KRN",19,1349,-1)
0^4
"KRN",19,1349,0)
HL FILER MONITOR^Monitor incoming & outgoing filers^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1349,1,0)
^^1^1^2950522^
"KRN",19,1349,1,1,0)
OPTION used to monitor incoming and outgoing filers
"KRN",19,1349,25)
MONITOR^HLCSFMN
"KRN",19,1349,"U")
MONITOR INCOMING & OUTGOING FI
"KRN",19,1421,-1)
0^10
"KRN",19,1421,0)
HL TASK RESTART^Restart All Links and Filers^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1421,1,0)
^^3^3^2960924^
"KRN",19,1421,1,1,0)
This is a Taskman "startup" option used to restart all HL7 Logical Links
"KRN",19,1421,1,2,0)
and the default number of inbound and outbound filers after a system
"KRN",19,1421,1,3,0)
reboot (or whenever Taskman is restarted).
"KRN",19,1421,25)
QUE^HLCS2
"KRN",19,1421,200.9)
s
"KRN",19,1421,"U")
RESTART ALL LINKS AND FILERS
"KRN",19,1422,-1)
0^11
"KRN",19,1422,0)
HL STOP ALL LINKS^Shut Down All Logical Links^^R^^^^^^^^HEALTH LEVEL SEVEN
"KRN",19,1422,1,0)
^^1^1^2960924^
"KRN",19,1422,1,1,0)
This option will request a shutdown of all Logical Links.
"KRN",19,1422,25)
LLP^HLCS2
"KRN",19,1422,"U")
SHUT DOWN ALL LOGICAL LINKS
"OER",284,0)
284^HL
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",284,-1)
1^1
"PKG",284,0)
HEALTH LEVEL SEVEN^HL^DHCP IMPLEMENTATION OF HEALTH LEVEL SEVEN
"PKG",284,22,0)
^9.49I^1^1
"PKG",284,22,1,0)
1.6^2980318^2960209
"PKG",284,22,1,"PAH",1,0)
14^2980923^1000008
"PKG",284,22,1,"PAH",1,1,0)
^^13^13^2980923
"PKG",284,22,1,"PAH",1,1,1,0)
 
"PKG",284,22,1,"PAH",1,1,2,0)
HL*1.6*14 introduces the following new features as part of the CIRN
"PKG",284,22,1,"PAH",1,1,3,0)
project and addresses a number of NOIS related issues:
"PKG",284,22,1,"PAH",1,1,4,0)
 
"PKG",284,22,1,"PAH",1,1,5,0)
1.  Dynamic addressing of messages
"PKG",284,22,1,"PAH",1,1,6,0)
2.  Subscription registry (new file and APIs)
"PKG",284,22,1,"PAH",1,1,7,0)
3.  Auto-restart of logical links
"PKG",284,22,1,"PAH",1,1,8,0)
4.  Mapping of logical links to institutions (and related api's)
"PKG",284,22,1,"PAH",1,1,9,0)
5.  A new option to shut down all logical links
"PKG",284,22,1,"PAH",1,1,10,0)
6.  HL7 reference file updates to support draft 2 of HEALTH LEVEL SEVEN, 
"PKG",284,22,1,"PAH",1,1,11,0)
    Version 2.3
"PKG",284,22,1,"PAH",1,1,12,0)
 
"PKG",284,22,1,"PAH",1,1,13,0)
Please see the patch module on Forum for details.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
16
"RTN","HLCS")
0^5^B29038065
"RTN","HLCS",1,0)
HLCS ;ALB/RJS,MTC,JRP - COMMUNICATIONS SERVER - ;09/16/98  09:58
"RTN","HLCS",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**2,9,14**;Oct 13, 1995
"RTN","HLCS",3,0)
 ;
"RTN","HLCS",4,0)
 ;The SEND function is invoked by the transaction processor.
"RTN","HLCS",5,0)
 ;It's function is to $O through the ITEM multiple of the Event Driver
"RTN","HLCS",6,0)
 ;Protocol and create child entries in the Message Text file (#772)
"RTN","HLCS",7,0)
 ;for the message at HLMTIEN.  These child messages point back
"RTN","HLCS",8,0)
 ;to the parent message so that message text does not need to
"RTN","HLCS",9,0)
 ;be duplicated when a message is sent to multiple applications.
"RTN","HLCS",10,0)
 ;
"RTN","HLCS",11,0)
 ;The SENDACK function is also invoked by the transaction processor.
"RTN","HLCS",12,0)
 ;It's function is to create a child entry in the Message Text file
"RTN","HLCS",13,0)
 ;for the message at HLMTIENA and deliver the message to the
"RTN","HLCS",14,0)
 ;application the requested/sent information.
"RTN","HLCS",15,0)
 ;
"RTN","HLCS",16,0)
 ;For DHCP to DHCP messaging (i.e. internal to internal), an incoming
"RTN","HLCS",17,0)
 ;message is created in the Message Text file which is a duplication
"RTN","HLCS",18,0)
 ;of the outgoing message.  The incoming message is then processed by
"RTN","HLCS",19,0)
 ;calling the transaction processor.
"RTN","HLCS",20,0)
 ;
"RTN","HLCS",21,0)
 ;For DHCP to COTS messaging (i.e. internal to external), the message
"RTN","HLCS",22,0)
 ;is filed in the Message Text file with the Logical Link defined and
"RTN","HLCS",23,0)
 ;a status of PENDING TRANSMISSION.  These entries are picked up by
"RTN","HLCS",24,0)
 ;the background filer and transmitted to the appropriate COTS system.
"RTN","HLCS",25,0)
 ;
"RTN","HLCS",26,0)
 ;
"RTN","HLCS",27,0)
TASK ;Entry point for tasked sending of outgoing message
"RTN","HLCS",28,0)
 Q:(('$D(HLMTIEN))!('$D(HLEID)))
"RTN","HLCS",29,0)
 N TMPRSLT
"RTN","HLCS",30,0)
 D SEND(HLMTIEN,HLEID,"TMPRSLT")
"RTN","HLCS",31,0)
 Q
"RTN","HLCS",32,0)
SEND(HLMTIEN,HLEID,HLRESULT) ;Send an HL7 message
"RTN","HLCS",33,0)
 ;HLMTIEN=The IEN of the parent message in file # 772
"RTN","HLCS",34,0)
 ;HLEID=The IEN of the Event Driver protocol in file #101
"RTN","HLCS",35,0)
 ;HLRESULT=Variable for any error text (pass by reference)
"RTN","HLCS",36,0)
 ;
"RTN","HLCS",37,0)
 ;Declare variables
"RTN","HLCS",38,0)
 N HLARY,HLERROR,HLEIDS,HLCLIENT,HLOGLINK,HLMTIENS,HLMSGPTR
"RTN","HLCS",39,0)
 S HLERROR=""
"RTN","HLCS",40,0)
 ;Get all subscribers to the message
"RTN","HLCS",41,0)
 D ITEM^HLUTIL2(HLEID,"PTR")
"RTN","HLCS",42,0)
 ;Quit if no subscribers (considered successful delivery)
"RTN","HLCS",43,0)
 G:($G(HLARY(0))'>0) EXIT
"RTN","HLCS",44,0)
 ;Deliver message to each subscriber
"RTN","HLCS",45,0)
 S HLEIDS=0
"RTN","HLCS",46,0)
 F  S HLEIDS=$O(HLARY(HLEIDS)) Q:(HLEIDS'>0)  D
"RTN","HLCS",47,0)
 .;Get pointer to receiving application
"RTN","HLCS",48,0)
 .S HLCLIENT=+HLARY(HLEIDS),HL("EIDS")=HLEIDS,HLERROR=""
"RTN","HLCS",49,0)
 .Q:(HLCLIENT'>0)
"RTN","HLCS",50,0)
 .;Check and execute ROUTING LOGIC **CIRN**
"RTN","HLCS",51,0)
 .S HLX=$G(^ORD(101,HLEIDS,774))
"RTN","HLCS",52,0)
 .I HLX]"" D  Q
"RTN","HLCS",53,0)
 ..N HLQUIT,HLNODE,HLNEXT
"RTN","HLCS",54,0)
 ..S HLQUIT=0,HLNODE="",HLNEXT="D HLNEXT^HLCSUTL"
"RTN","HLCS",55,0)
 ..X HLX I $D(HLL("LINKS")) D FWD^HLCS2 K HLL ;**CIRN**
"RTN","HLCS",56,0)
 .;Get pointer to logical link
"RTN","HLCS",57,0)
 .S HLOGLINK=$P(HLARY(HLEIDS),"^",2)
"RTN","HLCS",58,0)
 .;Determine if receiving application is internal or external
"RTN","HLCS",59,0)
 .;  Logical link has a value for external applications
"RTN","HLCS",60,0)
 .;  Logical link is NULL for internal applications
"RTN","HLCS",61,0)
 .I (HLOGLINK) D COTS Q
"RTN","HLCS",62,0)
 .;Create 'incoming' message based on 'outgoing' message (internal)
"RTN","HLCS",63,0)
 .D DHCP(HLMTIEN,HLEIDS,HLCLIENT)
"RTN","HLCS",64,0)
 .Q:(HLERROR)
"RTN","HLCS",65,0)
 .;Process the 'incoming' message
"RTN","HLCS",66,0)
 .S HLERROR=""
"RTN","HLCS",67,0)
 .D PROCESS^HLTP0(HLMSGPTR,"DHCP","",.HLERROR)
"RTN","HLCS",68,0)
 .;Update Status of 'incoming' message to SUCCESSFULLY COMPLETED
"RTN","HLCS",69,0)
 .; or ERROR DURING TRANSMISSION
"RTN","HLCS",70,0)
 .D STATUS^HLTF0(HLMSGPTR,$S(HLERROR:4,1:3),$S(HLERROR:+HLERROR,1:""),$S(HLERROR:$P(HLERROR,"^",2),1:""))
"RTN","HLCS",71,0)
 .I $D(HLL("LINKS")) D FWD^HLCS2 K HLL ;**CIRN**
"RTN","HLCS",72,0)
 D ADD^HLCS2 ;**CIRN**
"RTN","HLCS",73,0)
EXIT S HLRESULT=HLERROR
"RTN","HLCS",74,0)
 Q
"RTN","HLCS",75,0)
COTS ;Internal to external communication
"RTN","HLCS",76,0)
 ;Create child entry in Message Text file
"RTN","HLCS",77,0)
 D SEND^HLMA2(HLEIDS,HLMTIEN,HLCLIENT,"I",.HLMTIENS,HLOGLINK)
"RTN","HLCS",78,0)
 I ((+HLMTIENS)'>0) S HLERROR=HLMTIENS Q
"RTN","HLCS",79,0)
 ;'Pass' message to background filer by setting status of child
"RTN","HLCS",80,0)
 ;  to PENDING TRANSMISSION
"RTN","HLCS",81,0)
 D STATUS^HLTF0(HLMTIENS,1)
"RTN","HLCS",82,0)
 Q
"RTN","HLCS",83,0)
DHCP(HLMTIEN,HLEIDS,HLCLIENT) ;Internal to internal communication
"RTN","HLCS",84,0)
 ;
"RTN","HLCS",85,0)
 ;Input  : HLMTIEN - Pointer to parent outgoing message (file #772)
"RTN","HLCS",86,0)
 ;         HLEIDS - Pointer to subscribing protocol (file #101)
"RTN","HLCS",87,0)
 ;         HLCLIENT - Pointer to receiving application (file # 771)
"RTN","HLCS",88,0)
 ;
"RTN","HLCS",89,0)
 ;Output : HLMTIENS - Pointer to child outgoing message (file #772)
"RTN","HLCS",90,0)
 ;         HLMSGPTR - Pointer to [parent] incoming message (file #772)
"RTN","HLCS",91,0)
 ;         HLERROR - ErrorCode ^ ErrorText
"RTN","HLCS",92,0)
 ;
"RTN","HLCS",93,0)
 ;Notes  : This module only copies the outgoing message into an incoming
"RTN","HLCS",94,0)
 ;         message.  Delivery of the message (i.e. processing of it)
"RTN","HLCS",95,0)
 ;         must be done by the calling application.
"RTN","HLCS",96,0)
 ;       : Message/batch header (MSH/BSH) is built and placed in the
"RTN","HLCS",97,0)
 ;         incoming message
"RTN","HLCS",98,0)
 ;       : HLMTIENS, HLMSGPTR, and HLERROR will be initialized
"RTN","HLCS",99,0)
 ;       : Existance and validity of input is assumed
"RTN","HLCS",100,0)
 ;
"RTN","HLCS",101,0)
 ;Declare variables
"RTN","HLCS",102,0)
 N MSGID,MSGDT,MSGDTH,HDR2BLD,TMP,HLHDR,BHSHDR
"RTN","HLCS",103,0)
 S HLERROR=""
"RTN","HLCS",104,0)
 S HLMTIENS=0
"RTN","HLCS",105,0)
 S HLMSGPTR=0
"RTN","HLCS",106,0)
 ;Create child entry in Message Text file
"RTN","HLCS",107,0)
 D SEND^HLMA2(HLEIDS,HLMTIEN,HLCLIENT,"I",.HLMTIENS)
"RTN","HLCS",108,0)
 I ((+HLMTIENS)'>0) S HLERROR=HLMTIENS Q
"RTN","HLCS",109,0)
 ;'Receive' message by making an incoming message
"RTN","HLCS",110,0)
 ;Determine type of header to build
"RTN","HLCS",111,0)
 S TMP=$G(^HL(772,HLMTIEN,0))
"RTN","HLCS",112,0)
 S HDR2BLD=$P(TMP,"^",14)
"RTN","HLCS",113,0)
 ;Build message header (MSH)
"RTN","HLCS",114,0)
 I (HDR2BLD="M") D  Q:(HLERROR)
"RTN","HLCS",115,0)
 .S TMP=""
"RTN","HLCS",116,0)
 .D HEADER^HLCSHDR(HLMTIENS,.TMP)
"RTN","HLCS",117,0)
 .Q:(TMP="")
"RTN","HLCS",118,0)
 .;Error building header
"RTN","HLCS",119,0)
 .S HLERROR="4^Unable to build message header => "_TMP
"RTN","HLCS",120,0)
 .D STATUS^HLTF0(HLMTIENS,4,0,$P(HLERROR,"^",2))
"RTN","HLCS",121,0)
 ;Build batch header (BHS or FHS)
"RTN","HLCS",122,0)
 I (HDR2BLD'="M") D  Q:(HLERROR)
"RTN","HLCS",123,0)
 .S TMP=""
"RTN","HLCS",124,0)
 .D BHSHDR^HLCSHDR(HLMTIENS)
"RTN","HLCS",125,0)
 .S:($E(BHSHDR(1),1)="-") TMP=$P(BHSHDR(1),"^",2)
"RTN","HLCS",126,0)
 .Q:(TMP="")
"RTN","HLCS",127,0)
 .;Error building header
"RTN","HLCS",128,0)
 .S HLERROR="4^Unable to build batch header => "_TMP
"RTN","HLCS",129,0)
 .D STATUS^HLTF0(HLMTIENS,4,0,$P(HLERROR,"^",2))
"RTN","HLCS",130,0)
 ;Create entry for 'incoming' message
"RTN","HLCS",131,0)
 D CREATE^HLTF(.MSGID,.HLMSGPTR,.MSGDT,.MSGDTH)
"RTN","HLCS",132,0)
 ;Move header and rest of message into 'incoming' message
"RTN","HLCS",133,0)
 I (HDR2BLD="M") D
"RTN","HLCS",134,0)
 .;Use MSH as header
"RTN","HLCS",135,0)
 .D MRGINT^HLTF1(HLMTIEN,HLMSGPTR,"HLHDR")
"RTN","HLCS",136,0)
 I (HDR2BLD'="M") D
"RTN","HLCS",137,0)
 .;Use BHS or FHS as header
"RTN","HLCS",138,0)
 .D MRGINT^HLTF1(HLMTIEN,HLMSGPTR,"BHSHDR")
"RTN","HLCS",139,0)
 ;Set status of outgoing message to AWAITING ACKNOWLEDGEMENT
"RTN","HLCS",140,0)
 D STATUS^HLTF0(HLMTIENS,$S($P(^HL(772,HLMTIEN,0),U,7):3,1:2))
"RTN","HLCS",141,0)
 ;Set status of 'incoming' message to AWAITING PROCESSING
"RTN","HLCS",142,0)
 D STATUS^HLTF0(HLMSGPTR,9)
"RTN","HLCS",143,0)
 Q
"RTN","HLCS",144,0)
SENDACK(HLMTIENA,HLEID,HLEIDS,HLRESULT) ;Send an HL7 acknowledgement/response
"RTN","HLCS",145,0)
 ;HLMTIENA=The IEN of the parent acknowledgment/response message in
"RTN","HLCS",146,0)
 ;         file # 772
"RTN","HLCS",147,0)
 ;HLEIDS=The IEN of the Subscribing protocol in file # 101
"RTN","HLCS",148,0)
 ;HLEID=The IEN of the Event Driver protocol in file #101
"RTN","HLCS",149,0)
 ;HLRESULT=Variable for any error text (pass by reference)
"RTN","HLCS",150,0)
 ;
"RTN","HLCS",151,0)
 N HLERROR,HLOGLINK,HLCLIENT,HLMTIENS,HLMSGPTR,HLCLNODE
"RTN","HLCS",152,0)
 I $G(HLMTIENA)=""!($G(HLEID)="")!($G(HLEIDS)="") S HLERROR="0^7^"_$G(^HL(771.7,7,0))_"at SENDACK^HLCS entry point" G EXIT2
"RTN","HLCS",153,0)
 S HLCLNODE=$G(^ORD(101,HLEID,770))
"RTN","HLCS",154,0)
 ;Get pointers to Logical Link & receiving application
"RTN","HLCS",155,0)
 S HLOGLINK=$P($G(^ORD(101,HLEIDS,770)),U,7)
"RTN","HLCS",156,0)
 ;Application needed to dynamically address the ACK (tcp/ip)
"RTN","HLCS",157,0)
 ;(set HLL("LINKS") array before calling GENACK)
"RTN","HLCS",158,0)
 I $D(HLL("LINKS")) D
"RTN","HLCS",159,0)
 .S HLOGLINK=$P(HLL("LINKS",1),"^",2)
"RTN","HLCS",160,0)
 .I +HLOGLINK<1 S HLOGLINK=$O(^HLCS(870,"B",HLOGLINK,0))
"RTN","HLCS",161,0)
 S HLCLIENT=$P(HLCLNODE,U,1)
"RTN","HLCS",162,0)
 Q:('HLCLIENT)
"RTN","HLCS",163,0)
 ;Determine if receiving application is internal or external
"RTN","HLCS",164,0)
 ;  Logical link has a value for external applications
"RTN","HLCS",165,0)
 ;  Logical link is NULL for internal applications
"RTN","HLCS",166,0)
 I (HLOGLINK) D COTSACK Q
"RTN","HLCS",167,0)
 ;Create 'incoming' message based on 'outgoing' message (internal)
"RTN","HLCS",168,0)
 D DHCP(HLMTIENA,HLEID,HLCLIENT)
"RTN","HLCS",169,0)
 ;Process the 'incoming' message
"RTN","HLCS",170,0)
 I (HLMSGPTR) D
"RTN","HLCS",171,0)
 .S HLERROR=""
"RTN","HLCS",172,0)
 .D PROCESS^HLTP0(HLMSGPTR,"DHCP","",.HLERROR)
"RTN","HLCS",173,0)
 ;Update Status of 'incoming' message to SUCCESSFULLY COMPLETED
"RTN","HLCS",174,0)
 ; or ERROR DURING TRANSMISSION
"RTN","HLCS",175,0)
 D STATUS^HLTF0(HLMSGPTR,$S(HLERROR:4,1:3),$S(HLERROR:+HLERROR,1:""),$S(HLERROR:$P(HLERROR,"^",2),1:""))
"RTN","HLCS",176,0)
EXIT2 ;
"RTN","HLCS",177,0)
 S HLRESULT=$G(HLERROR)
"RTN","HLCS",178,0)
 Q
"RTN","HLCS",179,0)
COTSACK ;Internal to external communication of acknowledgements/responses
"RTN","HLCS",180,0)
 ;Create child entry in Message Text file
"RTN","HLCS",181,0)
 D SEND^HLMA2(HLEID,HLMTIENA,HLCLIENT,"I",.HLMTIENS,HLOGLINK)
"RTN","HLCS",182,0)
 ;'Pass' message to background filer by setting status of child
"RTN","HLCS",183,0)
 ;  to PENDING TRANSMISSION
"RTN","HLCS",184,0)
 D STATUS^HLTF0(HLMTIENS,1)
"RTN","HLCS",185,0)
 Q
"RTN","HLCS2")
0^6^B7539750
"RTN","HLCS2",1,0)
HLCS2 ;SF/JC - More Communication Server utils ;06/11/98  08:34
"RTN","HLCS2",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14**;29-Jan-97 14:25
"RTN","HLCS2",3,0)
FWD ; Add supplemental clients from HLL("LINKS") to HLSUP array
"RTN","HLCS2",4,0)
 ;This enhancement also supports distribution of a message to
"RTN","HLCS2",5,0)
 ;the same client over multiple logical links.
"RTN","HLCS2",6,0)
 Q:'$D(HLL("LINKS"))
"RTN","HLCS2",7,0)
 N CNT,LNK,CLIAP
"RTN","HLCS2",8,0)
 S CNT=0,ROUTINE=1 F  S CNT=$O(HLL("LINKS",CNT)) Q:CNT<1  D
"RTN","HLCS2",9,0)
 . S PTR=$P(HLL("LINKS",CNT),"^"),LNK=$P(HLL("LINKS",CNT),"^",2)
"RTN","HLCS2",10,0)
 . Q:PTR=""  I +PTR<1 S PTR=$O(^ORD(101,"B",PTR,0)) Q:PTR<1
"RTN","HLCS2",11,0)
 . Q:LNK=""  I +LNK<1 S LNK=$O(^HLCS(870,"B",LNK,0)) Q:LNK<1
"RTN","HLCS2",12,0)
 . Q:'$D(^HLCS(870,LNK))
"RTN","HLCS2",13,0)
 . S CLIAP=$$PTR^HLUTIL2(PTR)
"RTN","HLCS2",14,0)
 . S HLSUP("S",PTR,+LNK)=CLIAP
"RTN","HLCS2",15,0)
 Q
"RTN","HLCS2",16,0)
ADD ;Deliver message to supplemental client list.
"RTN","HLCS2",17,0)
 ;Invoked by HLTP before and after processing normal clients
"RTN","HLCS2",18,0)
 ;Only processes remote links. Local clients must be subscribing
"RTN","HLCS2",19,0)
 ;protocols.
"RTN","HLCS2",20,0)
 Q:'$D(HLSUP("S"))
"RTN","HLCS2",21,0)
 N ZHLEIDS,ZLCLIENT,ZLOGLINK,ZMTIENS
"RTN","HLCS2",22,0)
 S ZHLEIDS=0 F  S ZHLEIDS=$O(HLSUP("S",ZHLEIDS)) Q:ZHLEIDS<1  D
"RTN","HLCS2",23,0)
 .S ZLOGLINK=0 F  S ZLOGLINK=$O(HLSUP("S",ZHLEIDS,ZLOGLINK)) Q:ZLOGLINK<1  D
"RTN","HLCS2",24,0)
 ..S ZLCLIENT=+HLSUP("S",ZHLEIDS,ZLOGLINK) Q:ZLCLIENT<1
"RTN","HLCS2",25,0)
 ..S HLOGLINK=ZLOGLINK D SEND^HLMA2(ZHLEIDS,HLMTIEN,ZLCLIENT,"I",.ZMTIENS,ZLOGLINK),STATUS^HLTF0(+ZMTIENS,1)
"RTN","HLCS2",26,0)
 K HLL("LINKS"),HLSUP
"RTN","HLCS2",27,0)
 Q
"RTN","HLCS2",28,0)
QUE ;Restart default number IN/OUT Filers and Logical Links after system re-boot
"RTN","HLCS2",29,0)
 ;Get Defaults
"RTN","HLCS2",30,0)
 N TMP,PTR,DEFCNT,DA,I
"RTN","HLCS2",31,0)
 S PTR=$O(^HLCS(869.3,0)) Q:'PTR
"RTN","HLCS2",32,0)
 S DEFCNT=+$P(^HLCS(869.3,PTR,1),"^")
"RTN","HLCS2",33,0)
 I 'DEFCNT S DEFCNT=1
"RTN","HLCS2",34,0)
 ;Reset state of 869.3
"RTN","HLCS2",35,0)
 S DA(1)=1,DA=0,DIK="^HLCS(869.3,1,2,"
"RTN","HLCS2",36,0)
 F  S DA=$O(^HLCS(869.3,DA(1),2,DA)) Q:DA<1  D ^DIK
"RTN","HLCS2",37,0)
 S DA=0,DIK="^HLCS(869.3,1,3,"
"RTN","HLCS2",38,0)
 F  S DA=$O(^HLCS(869.3,DA(1),3,DA)) Q:DA<1  D ^DIK
"RTN","HLCS2",39,0)
 ;Start filers
"RTN","HLCS2",40,0)
 F I=1:1:DEFCNT S TMP=$$TASKFLR^HLCS1("IN"),TMP=$$TASKFLR^HLCS1("OUT")
"RTN","HLCS2",41,0)
 D LLP,STRT
"RTN","HLCS2",42,0)
 Q
"RTN","HLCS2",43,0)
LLP ;Restart Logical Links
"RTN","HLCS2",44,0)
 ;First make sure they don't 'appear' to still be running
"RTN","HLCS2",45,0)
 N HLDP,DIE,DA,DR S HLDP=0
"RTN","HLCS2",46,0)
 F  S HLDP=$O(^HLCS(870,HLDP)) Q:HLDP<1  D
"RTN","HLCS2",47,0)
 .S $P(^HLCS(870,HLDP,0),"^",15)=1
"RTN","HLCS2",48,0)
 .D MONITOR^HLCSDR2("SHUTDOWN",5,HLDP) S OFF="SHUTDOWN"
"RTN","HLCS2",49,0)
 .D NOW^%DTC S DIE="^HLCS(870,",DA=HLDP,DR="3///N;4///^S X=OFF;9///@;10////^S X=%;11///@" D ^DIE
"RTN","HLCS2",50,0)
 Q
"RTN","HLCS2",51,0)
STRT ;Start Links
"RTN","HLCS2",52,0)
 S HLDP=0 N HLDP0,HLDAPP,HLTYPTR,HLBGR,HLENV
"RTN","HLCS2",53,0)
 F  S HLDP=$O(^HLCS(870,HLDP)) Q:HLDP<1  D
"RTN","HLCS2",54,0)
 .S HLDP0=$G(^HLCS(870,HLDP,0)),HLPARM=$G(^HLCS(869.2,+$P(HLDP0,U,3),0))
"RTN","HLCS2",55,0)
 .Q:'$P(HLDP0,U,6)
"RTN","HLCS2",56,0)
 .S HLDAPP=$P(HLDP0,U)
"RTN","HLCS2",57,0)
 .S HLTYPTR=$P(HLPARM,U,2)
"RTN","HLCS2",58,0)
 .S HLBGR=$G(^HLCS(869.1,HLTYPTR,100))
"RTN","HLCS2",59,0)
 .S HLENV=$G(^HLCS(869.1,HLTYPTR,200))
"RTN","HLCS2",60,0)
 .I HLENV'="" K HLQUIT X HLENV Q:$D(HLQUIT)
"RTN","HLCS2",61,0)
 .S ZTRTN=$P(HLBGR," ",2),HLTRACE=""
"RTN","HLCS2",62,0)
 .S ZTDESC=HLDAPP_" Low Level Protocol",ZTSAVE("HLDP")=""
"RTN","HLCS2",63,0)
 .S ZTIO="",ZTDTH=$H D ^%ZTLOAD
"RTN","HLCS2",64,0)
 Q
"RTN","HLCS2",65,0)
SITEP ;Edit Site Parameters
"RTN","HLCS2",66,0)
 S DDSFILE=869.3,DA=1,DR="[HL SITE PARAMETERS]" D ^DDS
"RTN","HLCS2",67,0)
 Q
"RTN","HLCSDR")
0^8^B9316177
"RTN","HLCSDR",1,0)
HLCSDR ;ALB/RJS - INITIALIZE VARIABLES AND OPEN DEVICE FOR RECEIVER ;04/14/98  15:41
"RTN","HLCSDR",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**2,14**;Oct 13, 1995
"RTN","HLCSDR",3,0)
 ;
"RTN","HLCSDR",4,0)
INIT ;
"RTN","HLCSDR",5,0)
 S HLZER=0
"RTN","HLCSDR",6,0)
 I '$D(HLDP)&($G(%)'="") S HLDP=% ;LAUNCHED FROM VMS
"RTN","HLCSDR",7,0)
 I '$D(HLDP) Q
"RTN","HLCSDR",8,0)
 D DT^DICRW
"RTN","HLCSDR",9,0)
 I HLDP'>0 S HLDP=$O(^HLCS(870,"B",HLDP,""))
"RTN","HLCSDR",10,0)
 I HLDP'>0 G EXIT
"RTN","HLCSDR",11,0)
 ;HLDP IEN of LOGICAL LINK file #870
"RTN","HLCSDR",12,0)
 S HLDNODE=$G(^HLCS(870,HLDP,0))
"RTN","HLCSDR",13,0)
 ;-- get parameters from 869.2
"RTN","HLCSDR",14,0)
 S HLPARM=$G(^HLCS(869.2,+$P(HLDNODE,U,3),200))
"RTN","HLCSDR",15,0)
 ;pointer to DEVICE file
"RTN","HLCSDR",16,0)
 S HLDEVPTR=$P(HLPARM,U)
"RTN","HLCSDR",17,0)
 G EXIT:HLDEVPTR'>0
"RTN","HLCSDR",18,0)
 S HLDEVICE=$P($G(^%ZIS(1,HLDEVPTR,0)),"^",1)
"RTN","HLCSDR",19,0)
 G EXIT:HLDEVICE=""
"RTN","HLCSDR",20,0)
 D FILE
"RTN","HLCSDR",21,0)
INIT1 ;
"RTN","HLCSDR",22,0)
 G END:'HLZER
"RTN","HLCSDR",23,0)
 S HLZER=0
"RTN","HLCSDR",24,0)
 D OPEN G INIT1
"RTN","HLCSDR",25,0)
FILE ;
"RTN","HLCSDR",26,0)
 D NOW^%DTC
"RTN","HLCSDR",27,0)
 L +^HLCS(870,HLDP,0):DTIME I '$T G FILE
"RTN","HLCSDR",28,0)
 ;9=Time Started, 10=Time Stopped, 11=Task Number 
"RTN","HLCSDR",29,0)
 ;14=Shutdown LLP, 3=Shutdown LLP, 18=Gross Errors
"RTN","HLCSDR",30,0)
 I '$D(ZTSK) S ZTSK=""
"RTN","HLCSDR",31,0)
 S DIE="^HLCS(870,",DA=HLDP,DR="9////^S X=%;10////@;11////^S X=ZTSK;14////0;3////Y;18////@" D ^DIE K DIE,DA,DR
"RTN","HLCSDR",32,0)
 L -^HLCS(870,HLDP,0)
"RTN","HLCSDR",33,0)
OPEN ;
"RTN","HLCSDR",34,0)
 I $$NEWERR^%ZTER N $ETRAP,$ESTACK S $ETRAP="D ERROR^HLCSDR"
"RTN","HLCSDR",35,0)
 E  S X="ERROR^HLCSDR",@^%ZOSF("TRAP")
"RTN","HLCSDR",36,0)
 I $P($G(^HLCS(870,HLDP,0)),U,15) G END
"RTN","HLCSDR",37,0)
 S HLST="OPEN" D STATUS(HLST,HLDP)
"RTN","HLCSDR",38,0)
 S IOP=HLDEVICE,%ZIS=0 D ^%ZIS
"RTN","HLCSDR",39,0)
 I POP S HLST="OPENFAIL" D STATUS(HLST,HLDP) H 5 G OPEN
"RTN","HLCSDR",40,0)
INIT2 ;
"RTN","HLCSDR",41,0)
 ;Re-transmission attempts, Node, Hang Time, Start character,
"RTN","HLCSDR",42,0)
 ;End character, LLP Version Number
"RTN","HLCSDR",43,0)
 S HLDAPP=$P(HLDNODE,U,1)
"RTN","HLCSDR",44,0)
 S HLRETPRM=$P(HLPARM,U,2),HLDBSIZE=$P(HLPARM,U,3),HLDREAD=$P(HLPARM,U,4),HLDWRITE=$P(HLPARM,U,5),HLDSTRT=$P(HLPARM,U,6),HLDEND=$P(HLPARM,U,7),HLDVER=$P(HLPARM,U,8)
"RTN","HLCSDR",45,0)
 ;Defaults
"RTN","HLCSDR",46,0)
 I HLRETPRM="" S HLRETPRM=5
"RTN","HLCSDR",47,0)
 I HLDREAD="" S HLDREAD=10
"RTN","HLCSDR",48,0)
 I HLDWRITE="" S HLDWRITE=2
"RTN","HLCSDR",49,0)
 I HLDSTRT="" S HLDSTRT=11
"RTN","HLCSDR",50,0)
 I HLDEND="" S HLDEND=28
"RTN","HLCSDR",51,0)
 I HLDVER="" S HLDVER=21
"RTN","HLCSDR",52,0)
 I HLDBSIZE'>1 S HLDBSIZE=245
"RTN","HLCSDR",53,0)
 ;Set up Device Params
"RTN","HLCSDR",54,0)
 S X=255 U IO X ^%ZOSF("EOFF"),^%ZOSF("RM"),^%ZOSF("TRMON")
"RTN","HLCSDR",55,0)
START ;
"RTN","HLCSDR",56,0)
 D START^HLCSDR1(HLDP,HLRETPRM,HLDREAD,HLDWRITE,HLDSTRT,HLDEND,HLDVER,HLDBSIZE)
"RTN","HLCSDR",57,0)
END ;
"RTN","HLCSDR",58,0)
 I '$G(HLDP) G EXIT
"RTN","HLCSDR",59,0)
 D NOW^%DTC
"RTN","HLCSDR",60,0)
 L +^HLCS(870,HLDP,0):DTIME I '$T G END
"RTN","HLCSDR",61,0)
 ;10=Time Stopped,9=Time Started,11=Task Number , 3=Online ?
"RTN","HLCSDR",62,0)
 S DIE="^HLCS(870,",DA=HLDP,DR="10////^S X=%;9////@;11////@;3////N" D ^DIE K DIE,DA,DR
"RTN","HLCSDR",63,0)
 L -^HLCS(870,HLDP,0)
"RTN","HLCSDR",64,0)
EXIT ;
"RTN","HLCSDR",65,0)
 D ^%ZISC
"RTN","HLCSDR",66,0)
 K HLDNODE,HLDEVPTR,HLDEVICE,HLRETPRM,HLDAPP,X,HLDEND,HLDSTRT,HLDVER,HLDREAD,HLDWRITE,HLTRACE,ZTSK,HLDBSIZE,HLPARM
"RTN","HLCSDR",67,0)
 Q
"RTN","HLCSDR",68,0)
STATUS(HLST,HLDP) ;Update field 4
"RTN","HLCSDR",69,0)
 ;HLST=Current Status
"RTN","HLCSDR",70,0)
 ;HLDP=IEN of Logical Link
"RTN","HLCSDR",71,0)
 S DIE="^HLCS(870,",DA=HLDP,DR="4///^S X=HLST" D ^DIE K DIE,DA,DR
"RTN","HLCSDR",72,0)
 Q
"RTN","HLCSDR",73,0)
ERROR ;Trap disconnect & read errors
"RTN","HLCSDR",74,0)
 I $$EC^%ZOSV["DSCON"!($$EC^%ZOSV["data set hang-up") S HLST="DSCONECT" D STATUS(HLST,HLDP) H 3 S HLZER=1 I 1
"RTN","HLCSDR",75,0)
 E  D ^%ZTER
"RTN","HLCSDR",76,0)
 S IO("C")=1 D ^%ZISC
"RTN","HLCSDR",77,0)
 G UNWIND^%ZTER
"RTN","HLCSDR",78,0)
 Q
"RTN","HLCSIN")
0^9^B4444760
"RTN","HLCSIN",1,0)
HLCSIN ;ALB/JRP - INCOMING FILER;01-MAY-95 ;05/07/98  15:20
"RTN","HLCSIN",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**2,30,14**;Oct 13, 1995
"RTN","HLCSIN",3,0)
STARTIN ;Main entry point for incoming background filer
"RTN","HLCSIN",4,0)
 ;Create/find entry denoting this filer in the INCOMING FILER TASK
"RTN","HLCSIN",5,0)
 ; NUMBER multiple (field #20) of the HL COMMUNICATION SERVER PARAMETER
"RTN","HLCSIN",6,0)
 ; file (#869.3)
"RTN","HLCSIN",7,0)
 S HLPTRFLR=+$$CRTFLR^HLCSUTL1(ZTSK,"IN")
"RTN","HLCSIN",8,0)
 ;Loop through Logical Links and check for incoming messages
"RTN","HLCSIN",9,0)
 N HLXX,HLCSLOOP,HLFLG
"RTN","HLCSIN",10,0)
 S (HLFLG,HLCSLOOP,HLXX)=0
"RTN","HLCSIN",11,0)
 F  S HLXX=+$O(^HLCS(870,HLXX)) D  Q:(+$$CHK4STOP^HLCSUTL2(HLPTRFLR,"IN"))
"RTN","HLCSIN",12,0)
 .;Update LAST KNOWN $H (field #.03) for filer every 200th iteration
"RTN","HLCSIN",13,0)
 .D:('(HLCSLOOP#200)) SETFLRDH^HLCSUTL1(HLPTRFLR,"IN")
"RTN","HLCSIN",14,0)
 .;Increment loop counter (reset to 0 when greater than 1000)
"RTN","HLCSIN",15,0)
 .S HLCSLOOP=HLCSLOOP+1
"RTN","HLCSIN",16,0)
 .S:(HLCSLOOP>1000) HLCSLOOP=0
"RTN","HLCSIN",17,0)
 .;Went past last Logical Link
"RTN","HLCSIN",18,0)
 .;IF NO ACTIVITY ON ANY LINK-HANG TO RELEASE CPU
"RTN","HLCSIN",19,0)
 .I 'HLXX,'HLFLG H 5 Q
"RTN","HLCSIN",20,0)
 .;DID SOME WORK. RESET FLAG,START OVER
"RTN","HLCSIN",21,0)
 .I 'HLXX,HLFLG=1 S HLFLG=0 Q
"RTN","HLCSIN",22,0)
 .;does another filer have this one?
"RTN","HLCSIN",23,0)
 .L +^HLCS(870,HLXX,"INFILER"):1 Q:'$T
"RTN","HLCSIN",24,0)
 .;Check Logical Link's IN-queue for received message
"RTN","HLCSIN",25,0)
 .F  S HLD0=$$DEQUEUE^HLCSQUE(HLXX,"IN") D  Q:+HLD0<0
"RTN","HLCSIN",26,0)
 ..I ((+HLD0)<0) L -^HLCS(870,HLXX,"INFILER") Q
"RTN","HLCSIN",27,0)
 ..;Make sure message is ready to be received
"RTN","HLCSIN",28,0)
 ..S HLFLG=1
"RTN","HLCSIN",29,0)
 ..S HLD1=$P(HLD0,"^",2)
"RTN","HLCSIN",30,0)
 ..S HLD0=+HLD0
"RTN","HLCSIN",31,0)
 ..I ($P($G(^HLCS(870,HLD0,1,HLD1,0)),"^",3)'="A") D  Q
"RTN","HLCSIN",32,0)
 ...;Set status to DONE
"RTN","HLCSIN",33,0)
 ...D MONITOR^HLCSDR2("D",2,HLD0,HLD1,"IN")
"RTN","HLCSIN",34,0)
 ..;Process received message
"RTN","HLCSIN",35,0)
 ..D RECEIVE^HLMA0(HLD0,HLD1)
"RTN","HLCSIN",36,0)
 ..;Set status to DONE
"RTN","HLCSIN",37,0)
 ..D MONITOR^HLCSDR2("D",2,HLD0,HLD1,"IN")
"RTN","HLCSIN",38,0)
 ..;Update LAST KNOWN $H (field #.03) for filer
"RTN","HLCSIN",39,0)
 ..D SETFLRDH^HLCSUTL1(HLPTRFLR,"IN")
"RTN","HLCSIN",40,0)
 ;Asked to stop
"RTN","HLCSIN",41,0)
 S ZTSTOP=1
"RTN","HLCSIN",42,0)
 ;Delete entry denoting this filer
"RTN","HLCSIN",43,0)
 D DELFLR^HLCSUTL1(HLPTRFLR,"IN")
"RTN","HLCSIN",44,0)
 ;Clean up and QUIT
"RTN","HLCSIN",45,0)
 K HLD0,HLD1,HLOGLINK,HLNODE,HLPARENT
"RTN","HLCSIN",46,0)
 K HLST1,HLXX,TMP,TMP1,HLPTRFLR,HLCSLOOP
"RTN","HLCSIN",47,0)
 S ZTREQ="@"
"RTN","HLCSIN",48,0)
 Q
"RTN","HLCSQUE")
0^10^B13836921
"RTN","HLCSQUE",1,0)
HLCSQUE ;ALB/MFK HL7 UTILITY FUNCTIONS - 10/4/94 11AM ;05/11/98  15:13
"RTN","HLCSQUE",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14**;Oct 13, 1995
"RTN","HLCSQUE",3,0)
ENQUEUE(IEN,HLDIR) ;Assign a message for queue entry
"RTN","HLCSQUE",4,0)
 ; INPUT: IEN  - Internal Entry Number for file 870 - HL7 QUEUE
"RTN","HLCSQUE",5,0)
 ;        HLDIR  - Direction of queue (IN/OUT)
"RTN","HLCSQUE",6,0)
 ; OUTPUT: BEG - Location in the queue to stuff the message
"RTN","HLCSQUE",7,0)
 ;        -1   - Error
"RTN","HLCSQUE",8,0)
 ; NOTE: All the locks have been commented out.
"RTN","HLCSQUE",9,0)
 N FRONT,BACK,DIC,DA,X,BP,FP,REC,DINUM,ENTRY,Y,RETURN,BPOINTER
"RTN","HLCSQUE",10,0)
 N FPOINTER
"RTN","HLCSQUE",11,0)
 ;  Make sure required variables were given
"RTN","HLCSQUE",12,0)
 S IEN=$G(IEN)
"RTN","HLCSQUE",13,0)
 Q:(IEN="") "-1^Queue not given"
"RTN","HLCSQUE",14,0)
 I +IEN<1 S IEN=$O(^HLCS(870,"B",IEN,""))
"RTN","HLCSQUE",15,0)
 Q:(IEN="") "-1^Invalid queue"
"RTN","HLCSQUE",16,0)
 S HLDIR=$G(HLDIR)
"RTN","HLCSQUE",17,0)
 S HLDIR=$S(HLDIR="1":"IN",HLDIR=2:"OUT",1:HLDIR)
"RTN","HLCSQUE",18,0)
 I HLDIR'="IN",(HLDIR'="OUT") Q "-1^Invalid Direction"
"RTN","HLCSQUE",19,0)
 I HLDIR="IN" S HLDIR=1,BPOINTER="IN QUEUE BACK POINTER",FPOINTER="IN QUEUE FRONT POINTER"
"RTN","HLCSQUE",20,0)
 I HLDIR="OUT" S HLDIR=2,BPOINTER="OUT QUEUE BACK POINTER",FPOINTER="OUT QUEUE FRONT POINTER"
"RTN","HLCSQUE",21,0)
 F  L +^HLCS(870,IEN,BPOINTER):1 Q:$T  H 1
"RTN","HLCSQUE",22,0)
 S FRONT=$G(^HLCS(870,IEN,FPOINTER))
"RTN","HLCSQUE",23,0)
 D DELETE^HLCSQUE1(IEN,HLDIR,FRONT)
"RTN","HLCSQUE",24,0)
 F  L +^HLCS(870,IEN,HLDIR):1 Q:$T  H 1
"RTN","HLCSQUE",25,0)
 S BACK=$G(^HLCS(870,IEN,BPOINTER))
"RTN","HLCSQUE",26,0)
 ; Set up DICN call
"RTN","HLCSQUE",27,0)
 S DIC="^HLCS(870,"_IEN_","_HLDIR_","
"RTN","HLCSQUE",28,0)
 S ENTRY=HLDIR+18
"RTN","HLCSQUE",29,0)
 S DIC(0)="LNX",DA(1)=IEN,DIC("P")=$P(^DD(870,ENTRY,0),"^",2)
"RTN","HLCSQUE",30,0)
 S (DINUM,X)=BACK+1
"RTN","HLCSQUE",31,0)
 ;  Create Record
"RTN","HLCSQUE",32,0)
 K DD,DO
"RTN","HLCSQUE",33,0)
 D FILE^DICN
"RTN","HLCSQUE",34,0)
 S REC=$P(Y,"^",1)
"RTN","HLCSQUE",35,0)
 I (REC<0) S RETURN="-1^DICN error" G EXIT1
"RTN","HLCSQUE",36,0)
 ;  Set the 'status' to 'S' for stub
"RTN","HLCSQUE",37,0)
 S $P(^HLCS(870,IEN,HLDIR,REC,0),"^",2)="S"
"RTN","HLCSQUE",38,0)
 S ^HLCS(870,IEN,BPOINTER)=BACK+1
"RTN","HLCSQUE",39,0)
 ;  Put queue pointers back
"RTN","HLCSQUE",40,0)
 S RETURN=IEN_"^"_REC
"RTN","HLCSQUE",41,0)
EXIT1 ;  Unlock and return results
"RTN","HLCSQUE",42,0)
 L -^HLCS(870,IEN,HLDIR)
"RTN","HLCSQUE",43,0)
 L -^HLCS(870,IEN,BPOINTER)
"RTN","HLCSQUE",44,0)
 K IEN,HLDIR
"RTN","HLCSQUE",45,0)
 Q RETURN
"RTN","HLCSQUE",46,0)
DEQUEUE(IEN,HLDIR) ;Release the next message from the queue
"RTN","HLCSQUE",47,0)
 N MSG,RETURN,FRONT,FP,BACK,POINTER
"RTN","HLCSQUE",48,0)
 S IEN=$G(IEN)
"RTN","HLCSQUE",49,0)
 Q:(IEN="") "-1^Queue not given"
"RTN","HLCSQUE",50,0)
 I +IEN<1 S IEN=$O(^HLCS(870,"B",IEN,""))
"RTN","HLCSQUE",51,0)
 Q:(IEN="") "-1^Invalid queue"
"RTN","HLCSQUE",52,0)
 S HLDIR=$G(HLDIR)
"RTN","HLCSQUE",53,0)
 S HLDIR=$S(HLDIR="1":"IN",HLDIR=2:"OUT",1:HLDIR)
"RTN","HLCSQUE",54,0)
 I HLDIR'="IN",(HLDIR'="OUT") Q "-1^Invalid Direction"
"RTN","HLCSQUE",55,0)
 I HLDIR="IN" S HLDIR=1,POINTER="IN QUEUE FRONT POINTER"
"RTN","HLCSQUE",56,0)
 I HLDIR="OUT" S HLDIR=2,POINTER="OUT QUEUE FRONT POINTER"
"RTN","HLCSQUE",57,0)
 L +^HLCS(870,IEN,POINTER)
"RTN","HLCSQUE",58,0)
 S FRONT=$G(^HLCS(870,IEN,POINTER))
"RTN","HLCSQUE",59,0)
 D DELETE^HLCSQUE1(IEN,HLDIR,FRONT)
"RTN","HLCSQUE",60,0)
 ;If queue empty or "Stub" record don't dequeue
"RTN","HLCSQUE",61,0)
 L +^HLCS(870,IEN,HLDIR,FRONT+1,0)
"RTN","HLCSQUE",62,0)
 I '$D(^HLCS(870,IEN,HLDIR,FRONT+1,0)) S RETURN="-1^NO NEXT RECORD" G EXIT2
"RTN","HLCSQUE",63,0)
 I ($P($G(^HLCS(870,IEN,HLDIR,FRONT+1,0)),"^",2)'="P") S RETURN="-1^STUB" G EXIT2
"RTN","HLCSQUE",64,0)
 S ^HLCS(870,IEN,POINTER)=FRONT+1
"RTN","HLCSQUE",65,0)
 S RETURN=IEN_"^"_(FRONT+1)
"RTN","HLCSQUE",66,0)
 ;  Return success
"RTN","HLCSQUE",67,0)
EXIT2 ;
"RTN","HLCSQUE",68,0)
 L -^HLCS(870,IEN,HLDIR,FRONT+1,0)
"RTN","HLCSQUE",69,0)
 L -^HLCS(870,IEN,POINTER)
"RTN","HLCSQUE",70,0)
 Q RETURN
"RTN","HLCSQUE",71,0)
CLEARQUE(IEN,HLDIR) ;Empty an entire queue
"RTN","HLCSQUE",72,0)
 ; IEN - Entry number for queue - can be name from "B" X-ref
"RTN","HLCSQUE",73,0)
 ; HLDIR - Can be "IN", "OUT", 1 or 2.
"RTN","HLCSQUE",74,0)
 ; output: 0 for success
"RTN","HLCSQUE",75,0)
 ;        -1^error for error
"RTN","HLCSQUE",76,0)
 N MSG,X,ERR,FP,BP
"RTN","HLCSQUE",77,0)
 ;NOTE: this is not needed to initialize a queue
"RTN","HLCSQUE",78,0)
 ; enqueue will set up (?) a new queue
"RTN","HLCSQUE",79,0)
 ;  Make sure that required variables exist
"RTN","HLCSQUE",80,0)
 S IEN=$G(IEN)
"RTN","HLCSQUE",81,0)
 Q:(IEN="") "-1^Internal Entry Number missing"
"RTN","HLCSQUE",82,0)
 I +IEN<1 S IEN=$O(^HLCS(870,"B",IEN,""))
"RTN","HLCSQUE",83,0)
 Q:(IEN="") "-1^Invalid IEN"
"RTN","HLCSQUE",84,0)
 ;  Convert direction to a number
"RTN","HLCSQUE",85,0)
 S HLDIR=$G(HLDIR)
"RTN","HLCSQUE",86,0)
 Q:(HLDIR'="IN")&(HLDIR'="OUT")&(HLDIR'=1)&(HLDIR'=2) "-1^Invalid direction"
"RTN","HLCSQUE",87,0)
 S HLDIR=$S(HLDIR="IN":1,HLDIR="OUT":2,HLDIR=2:2,1:1)
"RTN","HLCSQUE",88,0)
 ;  If in queue, set front pointer to 6, out pointer gets set to 8
"RTN","HLCSQUE",89,0)
 I HLDIR=1 S FP="IN QUEUE FRONT POINTER",BP="IN QUEUE BACK POINTER"
"RTN","HLCSQUE",90,0)
 I HLDIR=2 S FP="OUT QUEUE FRONT POINTER",BP="OUT QUEUE BACK POINTER"
"RTN","HLCSQUE",91,0)
 S MSG=0
"RTN","HLCSQUE",92,0)
 W !
"RTN","HLCSQUE",93,0)
 ;  Loop through and delete messages
"RTN","HLCSQUE",94,0)
 F  S MSG=$O(^HLCS(870,IEN,HLDIR,MSG)) Q:(MSG'>0)  D
"RTN","HLCSQUE",95,0)
 .S ERR=$$DELMSG^HLCSQUE1(IEN,HLDIR,MSG) W "."
"RTN","HLCSQUE",96,0)
 .I ERR W ERR,!
"RTN","HLCSQUE",97,0)
 ;  Clear front and back pointers
"RTN","HLCSQUE",98,0)
 S ^HLCS(870,IEN,FP)=0
"RTN","HLCSQUE",99,0)
 S ^HLCS(870,IEN,BP)=0
"RTN","HLCSQUE",100,0)
 ;K IEN,HLDIR
"RTN","HLCSQUE",101,0)
 Q 0
"RTN","HLCSQUE",102,0)
 ;
"RTN","HLCSQUE",103,0)
PUSH(HLDOUT0,HLDOUT1) ;-- Place message back on queue
"RTN","HLCSQUE",104,0)
 ;  INPUT - HLDOUT0 IEN of file 870
"RTN","HLCSQUE",105,0)
 ;          HLDOUT1 IEN of Out Multiple
"RTN","HLCSQUE",106,0)
 ;  OUTPUT- NONE
"RTN","HLCSQUE",107,0)
 ;
"RTN","HLCSQUE",108,0)
 ;-- exit if not vaild variables
"RTN","HLCSQUE",109,0)
 I 'HLDOUT0!'HLDOUT1 G PUSHQ
"RTN","HLCSQUE",110,0)
 ;-- exit if global does not already exist
"RTN","HLCSQUE",111,0)
 I '$D(^HLCS(870,HLDOUT0,"OUT QUEUE FRONT POINTER")) G PUSHQ
"RTN","HLCSQUE",112,0)
 S ^HLCS(870,HLDOUT0,"OUT QUEUE FRONT POINTER")=(HLDOUT1-1)
"RTN","HLCSQUE",113,0)
PUSHQ Q
"RTN","HLCSQUE",114,0)
 ;
"RTN","HLCSQUE1")
0^11^B2819370
"RTN","HLCSQUE1",1,0)
HLCSQUE1 ;ALB/MFK HL7 UTILITY FUNCTIONS - 10/4/94 11AM ;05/11/98  14:46
"RTN","HLCSQUE1",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14**;Oct 13, 1995
"RTN","HLCSQUE1",3,0)
 ;
"RTN","HLCSQUE1",4,0)
 ;Utilities used by HLCSQUE
"RTN","HLCSQUE1",5,0)
 ;
"RTN","HLCSQUE1",6,0)
DELMSG(IEN,HLDIR,MSG) ;DELETE A SINGLE MESSAGE FROM A QUEUE
"RTN","HLCSQUE1",7,0)
 ;INPUT: IEN - Internal Entry Number for queue
"RTN","HLCSQUE1",8,0)
 ;       HLDIR - Direction of queue
"RTN","HLCSQUE1",9,0)
 ;       MSG - Message number to remove
"RTN","HLCSQUE1",10,0)
 ;OUTPUT:  0 - Success
"RTN","HLCSQUE1",11,0)
 ;        -1 - Error
"RTN","HLCSQUE1",12,0)
 N DIK,DA
"RTN","HLCSQUE1",13,0)
 ;  Check for required variables
"RTN","HLCSQUE1",14,0)
 S IEN=$G(IEN)
"RTN","HLCSQUE1",15,0)
 Q:(IEN="") "-1^Internal Entry Number missing"
"RTN","HLCSQUE1",16,0)
 I +IEN<1 S IEN=$O(^HLCS(870,"B",IEN,""))
"RTN","HLCSQUE1",17,0)
 Q:(IEN="") "-1^Invalid IEN"
"RTN","HLCSQUE1",18,0)
 S HLDIR=$G(HLDIR)
"RTN","HLCSQUE1",19,0)
 S HLDIR=$S(HLDIR="IN":1,HLDIR="OUT":2,HLDIR=2:2,HLDIR=1:1,1:"")
"RTN","HLCSQUE1",20,0)
 Q:(HLDIR="") "-1^Invalid direction"
"RTN","HLCSQUE1",21,0)
 S MSG=$G(MSG)
"RTN","HLCSQUE1",22,0)
 Q:(MSG="") "-1^No message number"
"RTN","HLCSQUE1",23,0)
 L +^HLCS(870,IEN,HLDIR,MSG):1
"RTN","HLCSQUE1",24,0)
 ;If lock fails, another process is doing the work.
"RTN","HLCSQUE1",25,0)
 I '$T Q 1
"RTN","HLCSQUE1",26,0)
 S DIK="^HLCS(870,"_IEN_","_HLDIR_",",DA(1)=IEN,DA=MSG
"RTN","HLCSQUE1",27,0)
 D ^DIK
"RTN","HLCSQUE1",28,0)
 L -^HLCS(870,IEN,HLDIR,MSG)
"RTN","HLCSQUE1",29,0)
 K IEN,HLDIR,MSG
"RTN","HLCSQUE1",30,0)
 Q 0
"RTN","HLCSQUE1",31,0)
DELETE(IEN,HLDIR,FRONT) ;  Delete messages outside the 'queue size' window
"RTN","HLCSQUE1",32,0)
 N MSG,TMP,QSIZE,STOP
"RTN","HLCSQUE1",33,0)
 ;  Make sure required variables exist
"RTN","HLCSQUE1",34,0)
 S IEN=$G(IEN) Q:(IEN="")
"RTN","HLCSQUE1",35,0)
 S HLDIR=$G(HLDIR) Q:(HLDIR="")
"RTN","HLCSQUE1",36,0)
 S FRONT=$G(FRONT) Q:(FRONT="")
"RTN","HLCSQUE1",37,0)
 S TMP=^HLCS(870,IEN,0)
"RTN","HLCSQUE1",38,0)
 S QSIZE=$P(TMP,"^",21)
"RTN","HLCSQUE1",39,0)
 I FRONT'>0 Q
"RTN","HLCSQUE1",40,0)
 I QSIZE'>0 S QSIZE=100
"RTN","HLCSQUE1",41,0)
 S MSG=0,STOP=0
"RTN","HLCSQUE1",42,0)
 ;  For each message from the beginning of the queue to the front
"RTN","HLCSQUE1",43,0)
 ;  of the queue-queue size, delete that message if it's done
"RTN","HLCSQUE1",44,0)
 F  S MSG=$O(^HLCS(870,IEN,HLDIR,MSG)) Q:(MSG>(FRONT-QSIZE))!(STOP'=0)!(MSG'>0)  D
"RTN","HLCSQUE1",45,0)
 .I $P($G(^HLCS(870,IEN,HLDIR,MSG,0)),"^",2)'="D" S STOP=1
"RTN","HLCSQUE1",46,0)
 .E  S STOP=$$DELMSG(IEN,HLDIR,MSG)
"RTN","HLCSQUE1",47,0)
 K IEN,HLDIR,FRONT
"RTN","HLCSQUE1",48,0)
 Q
"RTN","HLDTIW02")
0^12^B9038702
"RTN","HLDTIW02",1,0)
HLDTIW02 ;ALB/JRP - INTERFACE WORKBENCH SCREEN # 2;03-MAR-95 ;06/30/98  15:22
"RTN","HLDTIW02",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14**;Oct 13, 1995
"RTN","HLDTIW02",3,0)
EN ;ENTRY POINT TO START LIST MANAGER
"RTN","HLDTIW02",4,0)
 ;CALL LIST MANAGER
"RTN","HLDTIW02",5,0)
 D EN^VALM("HL INTERFACE WORKBENCH - 2")
"RTN","HLDTIW02",6,0)
 Q
"RTN","HLDTIW02",7,0)
HEADER ;BUILD HEADER
"RTN","HLDTIW02",8,0)
 S VALMHDR(1)="Currently Defined"
"RTN","HLDTIW02",9,0)
 S VALMHDR(1)=$$CENTER^HLDTIWU0(VALMHDR(1),80)
"RTN","HLDTIW02",10,0)
 S VALMHDR(2)="Logical Links"
"RTN","HLDTIW02",11,0)
 S VALMHDR(2)=$$CENTER^HLDTIWU0(VALMHDR(2),80)
"RTN","HLDTIW02",12,0)
 Q
"RTN","HLDTIW02",13,0)
DISPLAY ;BUILD DISPLAY
"RTN","HLDTIW02",14,0)
 ;DECLARE VARIABLES
"RTN","HLDTIW02",15,0)
 N INDEXARR,DISPARR,TMP,LINE,MATCH,PTRLINK,ARR4DIQ1
"RTN","HLDTIW02",16,0)
 N DIC,DR,DA,DIQ,JUMPINDX,PTRLLP,PTRTYPE,LLPSYN
"RTN","HLDTIW02",17,0)
 S INDEXARR="^TMP(""HL"",""IW-IDX"","_$J_",""LINK"")"
"RTN","HLDTIW02",18,0)
 S DISPARR="^TMP(""HL"",""IW-SCRN2"","_$J_")"
"RTN","HLDTIW02",19,0)
 S JUMPINDX="^TMP(""HL"",""IW-SCRN2"",""JUMPINDX"","_$J_")"
"RTN","HLDTIW02",20,0)
 K @INDEXARR,@DISPARR,@JUMPINDX
"RTN","HLDTIW02",21,0)
 D KILL^VALM10()
"RTN","HLDTIW02",22,0)
 ;NO KNOWN LINKS
"RTN","HLDTIW02",23,0)
 I ('$O(^HLCS(870,0))) D  Q
"RTN","HLDTIW02",24,0)
 .W $C(7)
"RTN","HLDTIW02",25,0)
 .S VALMSG="No logical links have been defined"
"RTN","HLDTIW02",26,0)
 .S VALMCNT=0
"RTN","HLDTIW02",27,0)
 ;LOOP THROUGH LOGICAL LINK FILE
"RTN","HLDTIW02",28,0)
 S VALMCNT=1
"RTN","HLDTIW02",29,0)
 S PTRLINK=0
"RTN","HLDTIW02",30,0)
 F MATCH=1:1 S PTRLINK=+$O(^HLCS(870,PTRLINK)) Q:('PTRLINK)  D
"RTN","HLDTIW02",31,0)
 .W "."
"RTN","HLDTIW02",32,0)
 .;GET INFO FOR MATCH
"RTN","HLDTIW02",33,0)
 .K ARR4DIQ1
"RTN","HLDTIW02",34,0)
 .S TMP=$$LINKINFO^HLDTIW2A(PTRLINK,"ARR4DIQ1(")
"RTN","HLDTIW02",35,0)
 .S PTRLLP=+$P(TMP,"^",1)
"RTN","HLDTIW02",36,0)
 .S PTRTYPE=+$P(TMP,"^",2)
"RTN","HLDTIW02",37,0)
 .;SET INDEX ARRAY
"RTN","HLDTIW02",38,0)
 .S TMP=$G(ARR4DIQ1(870,PTRLINK,.01,"E"))_"^"
"RTN","HLDTIW02",39,0)
 .S TMP=TMP_$G(ARR4DIQ1(869.2,PTRLLP,.01,"E"))_"^"
"RTN","HLDTIW02",40,0)
 .S TMP=TMP_$G(ARR4DIQ1(869.1,PTRTYPE,.01,"E"))
"RTN","HLDTIW02",41,0)
 .S @INDEXARR@(MATCH,PTRLINK)=TMP
"RTN","HLDTIW02",42,0)
 .;WHITESPACE
"RTN","HLDTIW02",43,0)
 .I (VALMCNT>1) F TMP=1:1:2 D
"RTN","HLDTIW02",44,0)
 ..S @DISPARR@(VALMCNT,0)=""
"RTN","HLDTIW02",45,0)
 ..S VALMCNT=VALMCNT+1
"RTN","HLDTIW02",46,0)
 .;GET SYNONYM FOR TYPE OF LINK
"RTN","HLDTIW02",47,0)
 .S LLPSYN=$G(ARR4DIQ1(869.1,PTRTYPE,.03,"E"))
"RTN","HLDTIW02",48,0)
 .;MAILMAN LINK
"RTN","HLDTIW02",49,0)
 .I (LLPSYN="M") D  Q
"RTN","HLDTIW02",50,0)
 ..S TMP=$$DSPMAIL^HLDTIW2B(PTRLINK,PTRLLP,PTRTYPE,"ARR4DIQ1",DISPARR,JUMPINDX,MATCH,VALMCNT)
"RTN","HLDTIW02",51,0)
 ..S VALMCNT=VALMCNT+TMP
"RTN","HLDTIW02",52,0)
 .;HLLP LINK
"RTN","HLDTIW02",53,0)
 .I (LLPSYN="H") D  Q
"RTN","HLDTIW02",54,0)
 ..S TMP=$$DSPHLLP^HLDTIW2B(PTRLINK,PTRLLP,PTRTYPE,"ARR4DIQ1",DISPARR,JUMPINDX,MATCH,VALMCNT)
"RTN","HLDTIW02",55,0)
 ..S VALMCNT=VALMCNT+TMP
"RTN","HLDTIW02",56,0)
 .;X3.28 LINK
"RTN","HLDTIW02",57,0)
 .I (LLPSYN="X") D  Q
"RTN","HLDTIW02",58,0)
 ..S TMP=$$DSPX328^HLDTIW2C(PTRLINK,PTRLLP,PTRTYPE,"ARR4DIQ1",DISPARR,JUMPINDX,MATCH,VALMCNT)
"RTN","HLDTIW02",59,0)
 ..S VALMCNT=VALMCNT+TMP
"RTN","HLDTIW02",60,0)
 .;TCP/IP LINK
"RTN","HLDTIW02",61,0)
 .I (LLPSYN="T") D  Q
"RTN","HLDTIW02",62,0)
 ..S TMP=$$DSPTCP^HLDTIW2A(PTRLINK,PTRLLP,PTRTYPE,"ARR4DIQ1",DISPARR,JUMPINDX,MATCH,VALMCNT)
"RTN","HLDTIW02",63,0)
 ..S VALMCNT=VALMCNT+TMP
"RTN","HLDTIW02",64,0)
 .;LINK NOT SUPPORTED BY INTERFACE WORKBENCH
"RTN","HLDTIW02",65,0)
 .S TMP=$$DSPUNS^HLDTIW2A(PTRLINK,PTRLLP,PTRTYPE,"ARR4DIQ1",DISPARR,JUMPINDX,MATCH,VALMCNT)
"RTN","HLDTIW02",66,0)
 .S VALMCNT=VALMCNT+TMP
"RTN","HLDTIW02",67,0)
 S VALMCNT=VALMCNT-1
"RTN","HLDTIW02",68,0)
 Q
"RTN","HLDTIW02",69,0)
CLEANUP ;CLEAN UP
"RTN","HLDTIW02",70,0)
 K ^TMP("HL","IW-IDX",$J,"LINK")
"RTN","HLDTIW02",71,0)
 K ^TMP("HL","IW-SCRN2",$J)
"RTN","HLDTIW02",72,0)
 K ^TMP("HL","IW-SCRN2","JUMPINDX",$J)
"RTN","HLDTIW02",73,0)
 Q
"RTN","HLDTIW04")
0^13^B47899067
"RTN","HLDTIW04",1,0)
HLDTIW04 ;ALB/JRP - INTERFACE WORKBENCH SCREEN # 4;24-FEB-95 ;06/30/98  16:40
"RTN","HLDTIW04",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14**;Oct 13, 1995
"RTN","HLDTIW04",3,0)
EN(HLPTRAPP) ;ENTRY POINT TO START LIST MANAGER
"RTN","HLDTIW04",4,0)
 ;Input: HLPTRAPP will contain a pointer to the Client Application being
"RTN","HLDTIW04",5,0)
 ;       used (entry in HL APPLICATION PARAMETER file #771).  If not
"RTN","HLDTIW04",6,0)
 ;       present/valid, user will be prompted for the Client Application
"RTN","HLDTIW04",7,0)
 ;       to use.
"RTN","HLDTIW04",8,0)
 ;
"RTN","HLDTIW04",9,0)
 ;CHECK HLPTRAPP
"RTN","HLDTIW04",10,0)
 S HLPTRAPP=+$G(HLPTRAPP)
"RTN","HLDTIW04",11,0)
 I ('HLPTRAPP) D  Q:(HLPTRAPP<0)
"RTN","HLDTIW04",12,0)
 .;GET CLIENT APPLICATION FROM USER
"RTN","HLDTIW04",13,0)
 .W !!,"An application to work with must be choosen before continuing"
"RTN","HLDTIW04",14,0)
 .S HLPTRAPP=+$$APPLOOK^HLDTIWU3(0,"",0)
"RTN","HLDTIW04",15,0)
 .I (HLPTRAPP<0) D  Q
"RTN","HLDTIW04",16,0)
 ..;CLIENT APPLICATION NOT PICKED
"RTN","HLDTIW04",17,0)
 ..W $C(7)
"RTN","HLDTIW04",18,0)
 ..S VALMSG="Can not continue without choosing an application"
"RTN","HLDTIW04",19,0)
 ..S VALMQUIT=1
"RTN","HLDTIW04",20,0)
 ..S VALMBCK="R"
"RTN","HLDTIW04",21,0)
 ;CALL LIST MANAGER
"RTN","HLDTIW04",22,0)
 D EN^VALM("HL INTERFACE WORKBENCH - 4")
"RTN","HLDTIW04",23,0)
 Q
"RTN","HLDTIW04",24,0)
HEADER ;BUILD HEADER
"RTN","HLDTIW04",25,0)
 ; - HLPTRAPP will contain a pointer to the Client Application being
"RTN","HLDTIW04",26,0)
 ;   used (entry in HL APPLICATION PARAMETER file #771)
"RTN","HLDTIW04",27,0)
 ;
"RTN","HLDTIW04",28,0)
 ;DECLARE VARIABLES
"RTN","HLDTIW04",29,0)
 N APPNAME
"RTN","HLDTIW04",30,0)
 ;CHECK FOR HLPTRAPP
"RTN","HLDTIW04",31,0)
 I ('$G(HLPTRAPP)) D  Q
"RTN","HLDTIW04",32,0)
 .W $C(7)
"RTN","HLDTIW04",33,0)
 .S VALMSG="Unable to determine application being used"
"RTN","HLDTIW04",34,0)
 .S VALMQUIT=1
"RTN","HLDTIW04",35,0)
 .S VALMBCK="R"
"RTN","HLDTIW04",36,0)
 ;GET NAME OF APPLICATION
"RTN","HLDTIW04",37,0)
 S APPNAME=$P($G(^HL(771,HLPTRAPP,0)),"^",1)
"RTN","HLDTIW04",38,0)
 I (APPNAME="") D  Q
"RTN","HLDTIW04",39,0)
 .W $C(7)
"RTN","HLDTIW04",40,0)
 .S VALMSG="Unable to determine application being used"
"RTN","HLDTIW04",41,0)
 .S VALMQUIT=1
"RTN","HLDTIW04",42,0)
 .S VALMBCK="R"
"RTN","HLDTIW04",43,0)
 S VALMHDR(1)="Client Protocols For"
"RTN","HLDTIW04",44,0)
 S VALMHDR(1)=$$CENTER^HLDTIWU0(VALMHDR(1),80)
"RTN","HLDTIW04",45,0)
 S VALMHDR(2)=APPNAME
"RTN","HLDTIW04",46,0)
 S VALMHDR(2)=$$CENTER^HLDTIWU0(VALMHDR(2),80)
"RTN","HLDTIW04",47,0)
 Q
"RTN","HLDTIW04",48,0)
DISPLAY ;BUILD DISPLAY
"RTN","HLDTIW04",49,0)
 ; - HLPTRAPP will contain a pointer to the Client Application being
"RTN","HLDTIW04",50,0)
 ;   used (entry in HL APPLICATION PARAMETER file #771)
"RTN","HLDTIW04",51,0)
 ;
"RTN","HLDTIW04",52,0)
 ;DECLARE VARIABLES
"RTN","HLDTIW04",53,0)
 N CLNTINDX,DISPARR,TMP,LINE,MATCH,PTRCLNT,ARR4DIQ1
"RTN","HLDTIW04",54,0)
 N DIC,DR,DA,DIQ,JUMPINDX,TMPINDX,APPNAME,ROUTINE
"RTN","HLDTIW04",55,0)
 S CLNTINDX="^TMP(""HL"",""IW-IDX"","_$J_",""CLNT"")"
"RTN","HLDTIW04",56,0)
 S TMPINDX="^TMP(""HL"",""IW-IDX"","_$J_")"
"RTN","HLDTIW04",57,0)
 S DISPARR="^TMP(""HL"",""IW-SCRN4"","_$J_")"
"RTN","HLDTIW04",58,0)
 S JUMPINDX="^TMP(""HL"",""IW-SCRN4"",""JUMPINDX"","_$J_")"
"RTN","HLDTIW04",59,0)
 K @CLNTINDX,@DISPARR,@JUMPINDX
"RTN","HLDTIW04",60,0)
 D KILL^VALM10()
"RTN","HLDTIW04",61,0)
 ;CHECK FOR HLPTRAPP
"RTN","HLDTIW04",62,0)
 I ('$G(HLPTRAPP)) D  Q
"RTN","HLDTIW04",63,0)
 .W $C(7)
"RTN","HLDTIW04",64,0)
 .S VALMSG="Unable to determine application being used"
"RTN","HLDTIW04",65,0)
 .S VALMQUIT=1
"RTN","HLDTIW04",66,0)
 .S VALMBCK="R"
"RTN","HLDTIW04",67,0)
 ;GET NAME OF APPLICATION
"RTN","HLDTIW04",68,0)
 S APPNAME=$P(^HL(771,HLPTRAPP,0),"^",1)
"RTN","HLDTIW04",69,0)
 ;GET LIST OF CLIENTS FOR APPLICATION
"RTN","HLDTIW04",70,0)
 S TMP=$$PROT4APP^HLDTIWU1(HLPTRAPP,2,TMPINDX,1)
"RTN","HLDTIW04",71,0)
 ;NO KNOWN CLIENTS
"RTN","HLDTIW04",72,0)
 I ('TMP) D  Q
"RTN","HLDTIW04",73,0)
 .W $C(7)
"RTN","HLDTIW04",74,0)
 .S VALMSG="No client protocols defined for "_APPNAME
"RTN","HLDTIW04",75,0)
 .S VALMCNT=0
"RTN","HLDTIW04",76,0)
 ;LOOP THROUGH INDEX
"RTN","HLDTIW04",77,0)
 S VALMCNT=1
"RTN","HLDTIW04",78,0)
 S MATCH=0
"RTN","HLDTIW04",79,0)
 F  S MATCH=+$O(@CLNTINDX@(MATCH)) Q:('MATCH)  D
"RTN","HLDTIW04",80,0)
 .S PTRCLNT=0
"RTN","HLDTIW04",81,0)
 .F  S PTRCLNT=+$O(@CLNTINDX@(MATCH,PTRCLNT)) Q:('PTRCLNT)  D
"RTN","HLDTIW04",82,0)
 ..W "."
"RTN","HLDTIW04",83,0)
 ..;GET INFO FOR MATCH
"RTN","HLDTIW04",84,0)
 ..S DIC="^ORD(101,"
"RTN","HLDTIW04",85,0)
 ..S DA=PTRCLNT
"RTN","HLDTIW04",86,0)
 ..S DR=".01;1;12;15;20;770.3;770.4;770.5;770.6;770.7;770.95;770.11;771;773.1;773.2;773.3;773.4;774"
"RTN","HLDTIW04",87,0)
 ..S DIQ="ARR4DIQ1("
"RTN","HLDTIW04",88,0)
 ..S DIQ(0)="E"
"RTN","HLDTIW04",89,0)
 ..K ARR4DIQ1
"RTN","HLDTIW04",90,0)
 ..D EN^DIQ1
"RTN","HLDTIW04",91,0)
 ..;BUILD DISPLAY
"RTN","HLDTIW04",92,0)
 ..I (VALMCNT>1) F TMP=1:1:2 D
"RTN","HLDTIW04",93,0)
 ...S @DISPARR@(VALMCNT,0)=""
"RTN","HLDTIW04",94,0)
 ...S VALMCNT=VALMCNT+1
"RTN","HLDTIW04",95,0)
 ..S @JUMPINDX@("MTCH",MATCH)=VALMCNT
"RTN","HLDTIW04",96,0)
 ..S @JUMPINDX@("LINE",VALMCNT)=MATCH
"RTN","HLDTIW04",97,0)
 ..S LINE="("_MATCH_") "
"RTN","HLDTIW04",98,0)
 ..S LINE=LINE_$G(ARR4DIQ1(101,PTRCLNT,.01,"E"))
"RTN","HLDTIW04",99,0)
 ..S @DISPARR@(VALMCNT,0)=LINE
"RTN","HLDTIW04",100,0)
 ..S VALMCNT=VALMCNT+1
"RTN","HLDTIW04",101,0)
 ..S LINE=$$INSERT^HLDTIWU0("Text: ","",5)
"RTN","HLDTIW04",102,0)
 ..S LINE=LINE_$G(ARR4DIQ1(101,PTRCLNT,1,"E"))
"RTN","HLDTIW04",103,0)
 ..S @DISPARR@(VALMCNT,0)=LINE
"RTN","HLDTIW04",104,0)
 ..S VALMCNT=VALMCNT+1
"RTN","HLDTIW04",105,0)
 ..S LINE=$$INSERT^HLDTIWU0("Package: ","",2)
"RTN","HLDTIW04",106,0)
 ..S LINE=LINE_$G(ARR4DIQ1(101,PTRCLNT,12,"E"))
"RTN","HLDTIW04",107,0)
 ..S @DISPARR@(VALMCNT,0)=LINE
"RTN","HLDTIW04",108,0)
 ..S VALMCNT=VALMCNT+1
"RTN","HLDTIW04",109,0)
 ..S LINE=$$INSERT^HLDTIWU0("Message Type Rcvd: ","",5)
"RTN","HLDTIW04",110,0)
 ..S LINE=LINE_$G(ARR4DIQ1(101,PTRCLNT,770.3,"E"))
"RTN","HLDTIW04",111,0)
 ..S LINE=$$INSERT^HLDTIWU0("Sending Facility Required: ",LINE,44)
"RTN","HLDTIW04",112,0)
 ..S TMP=$G(ARR4DIQ1(101,PTRCLNT,773.1,"E"))
"RTN","HLDTIW04",113,0)
 ..S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW04",114,0)
 ..S LINE=LINE_TMP
"RTN","HLDTIW04",115,0)
 ..S @DISPARR@(VALMCNT,0)=LINE
"RTN","HLDTIW04",116,0)
 ..S VALMCNT=VALMCNT+1
"RTN","HLDTIW04",117,0)
 ..S LINE=$$INSERT^HLDTIWU0("Message Type Sent: ","",5)
"RTN","HLDTIW04",118,0)
 ..S LINE=LINE_$G(ARR4DIQ1(101,PTRCLNT,770.11,"E"))
"RTN","HLDTIW04",119,0)
 ..S LINE=$$INSERT^HLDTIWU0("Receiving Facility Required: ",LINE,42)
"RTN","HLDTIW04",120,0)
 ..S TMP=$G(ARR4DIQ1(101,PTRCLNT,773.2,"E"))
"RTN","HLDTIW04",121,0)
 ..S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW04",122,0)
 ..S LINE=LINE_TMP
"RTN","HLDTIW04",123,0)
 ..S @DISPARR@(VALMCNT,0)=LINE
"RTN","HLDTIW04",124,0)
 ..S VALMCNT=VALMCNT+1
"RTN","HLDTIW04",125,0)
 ..S LINE=$$INSERT^HLDTIWU0("Event Type Rcvd/Sent: ","",2)
"RTN","HLDTIW04",126,0)
 ..S LINE=LINE_$G(ARR4DIQ1(101,PTRCLNT,770.4,"E"))
"RTN","HLDTIW04",127,0)
 ..S LINE=$$INSERT^HLDTIWU0("Date/Time of Message Required: ",LINE,40)
"RTN","HLDTIW04",128,0)
 ..S TMP=$G(ARR4DIQ1(101,PTRCLNT,773.4,"E"))
"RTN","HLDTIW04",129,0)
 ..S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW04",130,0)
 ..S LINE=LINE_TMP
"RTN","HLDTIW04",131,0)
 ..S @DISPARR@(VALMCNT,0)=LINE
"RTN","HLDTIW04",132,0)
 ..S VALMCNT=VALMCNT+1
"RTN","HLDTIW04",133,0)
 ..S LINE=$$INSERT^HLDTIWU0("Priority: ","",14)
"RTN","HLDTIW04",134,0)
 ..S TMP=$G(ARR4DIQ1(101,PTRCLNT,770.5,"E"))
"RTN","HLDTIW04",135,0)
 ..S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW04",136,0)
 ..S LINE=LINE_TMP
"RTN","HLDTIW04",137,0)
 ..S LINE=$$INSERT^HLDTIWU0("Security Required: ",LINE,52)
"RTN","HLDTIW04",138,0)
 ..S TMP=$G(ARR4DIQ1(101,PTRCLNT,773.3,"E"))
"RTN","HLDTIW04",139,0)
 ..S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW04",140,0)
 ..S LINE=LINE_TMP
"RTN","HLDTIW04",141,0)
 ..S @DISPARR@(VALMCNT,0)=LINE
"RTN","HLDTIW04",142,0)
 ..S VALMCNT=VALMCNT+1
"RTN","HLDTIW04",143,0)
 ..S LINE=$$INSERT^HLDTIWU0("Processing ID: ","",9)
"RTN","HLDTIW04",144,0)
 ..S TMP=$G(ARR4DIQ1(101,PTRCLNT,770.6,"E"))
"RTN","HLDTIW04",145,0)
 ..S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW04",146,0)
 ..S LINE=LINE_TMP
"RTN","HLDTIW04",147,0)
 ..S LINE=$$INSERT^HLDTIWU0("Logical Link: ",LINE,57)
"RTN","HLDTIW04",148,0)
 ..S TMP=$G(ARR4DIQ1(101,PTRCLNT,770.7,"E"))
"RTN","HLDTIW04",149,0)
 ..S:(TMP="") TMP="<INTERNAL>"
"RTN","HLDTIW04",150,0)
 ..S LINE=LINE_TMP
"RTN","HLDTIW04",151,0)
 ..S @DISPARR@(VALMCNT,0)=LINE
"RTN","HLDTIW04",152,0)
 ..S VALMCNT=VALMCNT+1
"RTN","HLDTIW04",153,0)
 ..S LINE=$$INSERT^HLDTIWU0("Version ID: ","",12)
"RTN","HLDTIW04",154,0)
 ..S LINE=LINE_$G(ARR4DIQ1(101,PTRCLNT,770.95,"E"))
"RTN","HLDTIW04",155,0)
 ..S @DISPARR@(VALMCNT,0)=LINE
"RTN","HLDTIW04",156,0)
 ..S VALMCNT=VALMCNT+1
"RTN","HLDTIW04",157,0)
 ..S LINE=$$INSERT^HLDTIWU0("Routing Logic: ","",9)
"RTN","HLDTIW04",158,0)
 ..S ROUTINE=$G(ARR4DIQ1(101,PTRCLNT,774,"E"))
"RTN","HLDTIW04",159,0)
 ..S:(ROUTINE="") ROUTINE="<NONE>"
"RTN","HLDTIW04",160,0)
 ..F TMP=1:0 D  Q:(TMP>$L(ROUTINE))
"RTN","HLDTIW04",161,0)
 ...S LINE=$$INSERT^HLDTIWU0($E(ROUTINE,TMP,(TMP+56)),LINE,24)
"RTN","HLDTIW04",162,0)
 ...S @DISPARR@(VALMCNT,0)=LINE
"RTN","HLDTIW04",163,0)
 ...S VALMCNT=VALMCNT+1
"RTN","HLDTIW04",164,0)
 ...S LINE=""
"RTN","HLDTIW04",165,0)
 ...S TMP=TMP+57
"RTN","HLDTIW04",166,0)
 ..S LINE=$$INSERT^HLDTIWU0("Entry Action: ","",10)
"RTN","HLDTIW04",167,0)
 ..S ROUTINE=$G(ARR4DIQ1(101,PTRCLNT,20,"E"))
"RTN","HLDTIW04",168,0)
 ..S:(ROUTINE="") ROUTINE="<NONE>"
"RTN","HLDTIW04",169,0)
 ..F TMP=1:0 D  Q:(TMP>$L(ROUTINE))
"RTN","HLDTIW04",170,0)
 ...S LINE=$$INSERT^HLDTIWU0($E(ROUTINE,TMP,(TMP+63)),LINE,24)
"RTN","HLDTIW04",171,0)
 ...S @DISPARR@(VALMCNT,0)=LINE
"RTN","HLDTIW04",172,0)
 ...S VALMCNT=VALMCNT+1
"RTN","HLDTIW04",173,0)
 ...S LINE=""
"RTN","HLDTIW04",174,0)
 ...S TMP=TMP+64
"RTN","HLDTIW04",175,0)
 ..S LINE=$$INSERT^HLDTIWU0("Exit Action: ","",11)
"RTN","HLDTIW04",176,0)
 ..S ROUTINE=$G(ARR4DIQ1(101,PTRCLNT,15,"E"))
"RTN","HLDTIW04",177,0)
 ..S:(ROUTINE="") ROUTINE="<NONE>"
"RTN","HLDTIW04",178,0)
 ..F TMP=1:0 D  Q:(TMP>$L(ROUTINE))
"RTN","HLDTIW04",179,0)
 ...S LINE=$$INSERT^HLDTIWU0($E(ROUTINE,TMP,(TMP+63)),LINE,24)
"RTN","HLDTIW04",180,0)
 ...S @DISPARR@(VALMCNT,0)=LINE
"RTN","HLDTIW04",181,0)
 ...S VALMCNT=VALMCNT+1
"RTN","HLDTIW04",182,0)
 ...S LINE=""
"RTN","HLDTIW04",183,0)
 ...S TMP=TMP+64
"RTN","HLDTIW04",184,0)
 ..S LINE=$$INSERT^HLDTIWU0("Process Routine: ","",7)
"RTN","HLDTIW04",185,0)
 ..S ROUTINE=$G(ARR4DIQ1(101,PTRCLNT,771,"E"))
"RTN","HLDTIW04",186,0)
 ..F TMP=1:0 D  Q:(TMP>$L(ROUTINE))
"RTN","HLDTIW04",187,0)
 ...S LINE=$$INSERT^HLDTIWU0($E(ROUTINE,TMP,(TMP+61)),LINE,24)
"RTN","HLDTIW04",188,0)
 ...S @DISPARR@(VALMCNT,0)=LINE
"RTN","HLDTIW04",189,0)
 ...S VALMCNT=VALMCNT+1
"RTN","HLDTIW04",190,0)
 ...S LINE=""
"RTN","HLDTIW04",191,0)
 ...S TMP=TMP+62
"RTN","HLDTIW04",192,0)
 S VALMCNT=VALMCNT-1
"RTN","HLDTIW04",193,0)
 Q
"RTN","HLDTIW04",194,0)
CLEANUP ;CLEAN UP
"RTN","HLDTIW04",195,0)
 K ^TMP("HL","IW-IDX",$J,"CLNT")
"RTN","HLDTIW04",196,0)
 K ^TMP("HL","IW-SCRN4",$J)
"RTN","HLDTIW04",197,0)
 K ^TMP("HL","IW-SCRN4","JUMPINDX",$J)
"RTN","HLDTIW04",198,0)
 Q
"RTN","HLDTIW2A")
0^14^B24659714
"RTN","HLDTIW2A",1,0)
HLDTIW2A ;ALB/JRP - INTERFACE WORKBENCH SCREEN # 2 ROLLOVER;03-MAR-95 ;09/22/98  10:21
"RTN","HLDTIW2A",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14**;Oct 13, 1995
"RTN","HLDTIW2A",3,0)
LINKINFO(PTRLINK,OUTARR) ;GET LINK INFORMATION USING EN^DIQ1
"RTN","HLDTIW2A",4,0)
 ;INPUT  : PTRLINK - Pointer to HL LOGICAL LINK file (#870)
"RTN","HLDTIW2A",5,0)
 ;         OUTARR - Where to store output (FileMan notation for EN^DIQ1)
"RTN","HLDTIW2A",6,0)
 ;OUTPUT : Ptr_LLP_Params^Ptr_LLP_Type
"RTN","HLDTIW2A",7,0)
 ;           Ptr_LLP_Params -> Pointer to file # 869.2
"RTN","HLDTIW2A",8,0)
 ;           Ptr_LLP_Type -> Pointer to file # 869.1
"RTN","HLDTIW2A",9,0)
 ;         OUTARR() will be contain the following EN^DIQ1 output
"RTN","HLDTIW2A",10,0)
 ;           OUTARR(870,PTRLINK,field,"E") = External value
"RTN","HLDTIW2A",11,0)
 ;             fields -> .01 & 21
"RTN","HLDTIW2A",12,0)
 ;           OUTARR(869.1,Ptr_LLP_Params,field,"E") = External value
"RTN","HLDTIW2A",13,0)
 ;             fields -> .01 & 100.01 to 300.25
"RTN","HLDTIW2A",14,0)
 ;           OUTARR(869.2,Ptr_LLP_Type,field,"E") = External value
"RTN","HLDTIW2A",15,0)
 ;             fields -> .01 & .03
"RTN","HLDTIW2A",16,0)
 ;NOTES  : Input is not checked
"RTN","HLDTIW2A",17,0)
 ;       : Initialization of OUTARR() must be done by calling program
"RTN","HLDTIW2A",18,0)
 ;
"RTN","HLDTIW2A",19,0)
 ;DECLARE VARIABLES
"RTN","HLDTIW2A",20,0)
 N DIC,DR,DA,DIQ,PTRLLP,PTRTYPE,LLPSYN
"RTN","HLDTIW2A",21,0)
 S PTRTYPE=""
"RTN","HLDTIW2A",22,0)
 ;GET LINK INFO
"RTN","HLDTIW2A",23,0)
 S DIC="^HLCS(870,"
"RTN","HLDTIW2A",24,0)
 S DA=PTRLINK
"RTN","HLDTIW2A",25,0)
 S DR=".01;.02;.03;4.5;21"
"RTN","HLDTIW2A",26,0)
 S DIQ=OUTARR
"RTN","HLDTIW2A",27,0)
 S DIQ(0)="E"
"RTN","HLDTIW2A",28,0)
 D EN^DIQ1
"RTN","HLDTIW2A",29,0)
 ;GET LLP PARAMS
"RTN","HLDTIW2A",30,0)
 S PTRLLP=+$P($G(^HLCS(870,PTRLINK,0)),"^",3)
"RTN","HLDTIW2A",31,0)
 I (PTRLLP) D
"RTN","HLDTIW2A",32,0)
 .S DIC="^HLCS(869.2,"
"RTN","HLDTIW2A",33,0)
 .S DA=PTRLLP
"RTN","HLDTIW2A",34,0)
 .S DR=".01;.02;.03;4.5;100.01:"_$S($$TCPFLDS:"400.06",1:"300.25")
"RTN","HLDTIW2A",35,0)
 .S DIQ=OUTARR
"RTN","HLDTIW2A",36,0)
 .S DIQ(0)="E"
"RTN","HLDTIW2A",37,0)
 .D EN^DIQ1
"RTN","HLDTIW2A",38,0)
 .S PTRTYPE=+$P($G(^HLCS(869.2,PTRLLP,0)),"^",2)
"RTN","HLDTIW2A",39,0)
 .;GET LLP PARAM TYPE/SYNONYM
"RTN","HLDTIW2A",40,0)
 .I (PTRTYPE) D
"RTN","HLDTIW2A",41,0)
 ..S DIC="^HLCS(869.1,"
"RTN","HLDTIW2A",42,0)
 ..S DA=PTRTYPE
"RTN","HLDTIW2A",43,0)
 ..S DR=".01;.03"
"RTN","HLDTIW2A",44,0)
 ..S DIQ=OUTARR
"RTN","HLDTIW2A",45,0)
 ..S DIQ(0)="E"
"RTN","HLDTIW2A",46,0)
 ..D EN^DIQ1
"RTN","HLDTIW2A",47,0)
 ;DONE
"RTN","HLDTIW2A",48,0)
 Q PTRLLP_"^"_PTRTYPE
"RTN","HLDTIW2A",49,0)
TCPFLDS() ;new extrinsic function to return 1 if all fields exists.
"RTN","HLDTIW2A",50,0)
 N %,%1 S %=1
"RTN","HLDTIW2A",51,0)
 F %1=400.01,400.02,400.03,400.04,400.06 S %=%&$D(^DD(869.2,%1,0))
"RTN","HLDTIW2A",52,0)
 Q %
"RTN","HLDTIW2A",53,0)
DSPTCP(PTRLINK,PTRLLP,PTRTYPE,INFOARR,DISPARR,JUMPINDX,MATCH,OFFSET) ;BUILD LISTMAN DISPLAY FOR 'UNSUPPORTED' LINK
"RTN","HLDTIW2A",54,0)
 ;INPUT  : PTRLINK - Pointer to HL LOGICAL LINK file (#870)
"RTN","HLDTIW2A",55,0)
 ;         PTRLLP - Ptr HL LOWER LEVEL PROTOCOL PARAMETER file (#869.2)
"RTN","HLDTIW2A",56,0)
 ;         PTRTYPE - Ptr to HL LOWER LEVEL PROTOCOL TYPE file (#869.1)
"RTN","HLDTIW2A",57,0)
 ;         INFOARR - Where link data is (full global reference)
"RTN","HLDTIW2A",58,0)
 ;         DISPARR - Where to store display (full global reference)
"RTN","HLDTIW2A",59,0)
 ;         JUMPINDX - Where to store jumping index (full global ref)
"RTN","HLDTIW2A",60,0)
 ;         MATCH - Match number to use
"RTN","HLDTIW2A",61,0)
 ;         OFFSET - Beginning offset for display
"RTN","HLDTIW2A",62,0)
 ;OUTPUT : N - Number of lines added to DISPARR
"RTN","HLDTIW2A",63,0)
 ;NOTES  : 
"RTN","HLDTIW2A",64,0)
 ;       : INFOARR() is the output array of $$LINKINFO^HLDTIW2A()
"RTN","HLDTIW2A",65,0)
 ;       : Input is not checked
"RTN","HLDTIW2A",66,0)
 ;
"RTN","HLDTIW2A",67,0)
 ;DECLARE VARIABLES
"RTN","HLDTIW2A",68,0)
 N LINE,TMP,ORIGOFF
"RTN","HLDTIW2A",69,0)
 S ORIGOFF=OFFSET
"RTN","HLDTIW2A",70,0)
 ;BUILD DISPLAY (COMMON INFO)
"RTN","HLDTIW2A",71,0)
 S @JUMPINDX@("MTCH",MATCH)=OFFSET
"RTN","HLDTIW2A",72,0)
 S @JUMPINDX@("LINE",OFFSET)=MATCH
"RTN","HLDTIW2A",73,0)
 S LINE="("_MATCH_") "
"RTN","HLDTIW2A",74,0)
 S LINE=LINE_$G(@INFOARR@(870,PTRLINK,.01,"E"))
"RTN","HLDTIW2A",75,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2A",76,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2A",77,0)
 S LINE=$$INSERT^HLDTIWU0("LLP Parameter: ","",2)
"RTN","HLDTIW2A",78,0)
 S LINE=LINE_$G(@INFOARR@(869.2,PTRLLP,.01,"E"))
"RTN","HLDTIW2A",79,0)
 S LINE=$$INSERT^HLDTIWU0("TCP/IP Address: ",LINE,47)
"RTN","HLDTIW2A",80,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,400.01,"E"))
"RTN","HLDTIW2A",81,0)
 S:(TMP="") TMP="<NONE>"
"RTN","HLDTIW2A",82,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2A",83,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2A",84,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2A",85,0)
 S LINE=$$INSERT^HLDTIWU0("LLP Type: ","",7)
"RTN","HLDTIW2A",86,0)
 S LINE=LINE_$G(@INFOARR@(869.1,PTRTYPE,.01,"E"))
"RTN","HLDTIW2A",87,0)
 S TMP=$G(@INFOARR@(869.1,PTRTYPE,.03,"E"))
"RTN","HLDTIW2A",88,0)
 S:(TMP'="") LINE=LINE_"  ("_TMP_")"
"RTN","HLDTIW2A",89,0)
 S LINE=$$INSERT^HLDTIWU0("TCP/IP Port: ",LINE,50)
"RTN","HLDTIW2A",90,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,400.02,"E"))
"RTN","HLDTIW2A",91,0)
 S:(TMP="") TMP="<NONE>"
"RTN","HLDTIW2A",92,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2A",93,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2A",94,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2A",95,0)
 S LINE=$$INSERT^HLDTIWU0("Queue Size: ","",5)
"RTN","HLDTIW2A",96,0)
 S TMP=$G(@INFOARR@(870,PTRLINK,21,"E"))
"RTN","HLDTIW2A",97,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2A",98,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2A",99,0)
 S LINE=$$INSERT^HLDTIWU0("TCP/IP Service Type: ",LINE,42)
"RTN","HLDTIW2A",100,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,400.03,"E"))
"RTN","HLDTIW2A",101,0)
 S:(TMP="") TMP="<NONE>"
"RTN","HLDTIW2A",102,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2A",103,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2A",104,0)
 D DMNINSTA^HLDTIW2B
"RTN","HLDTIW2A",105,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2A",106,0)
 Q (OFFSET-ORIGOFF)
"RTN","HLDTIW2A",107,0)
DSPUNS(PTRLINK,PTRLLP,PTRTYPE,INFOARR,DISPARR,JUMPINDX,MATCH,OFFSET) ;BUILD LISTMAN DISPLAY FOR 'UNSUPPORTED' LINK
"RTN","HLDTIW2A",108,0)
 ;INPUT  : PTRLINK - Pointer to HL LOGICAL LINK file (#870)
"RTN","HLDTIW2A",109,0)
 ;         PTRLLP - Ptr HL LOWER LEVEL PROTOCOL PARAMETER file (#869.2)
"RTN","HLDTIW2A",110,0)
 ;         PTRTYPE - Ptr to HL LOWER LEVEL PROTOCOL TYPE file (#869.1)
"RTN","HLDTIW2A",111,0)
 ;         INFOARR - Where link data is (full global reference)
"RTN","HLDTIW2A",112,0)
 ;         DISPARR - Where to store display (full global reference)
"RTN","HLDTIW2A",113,0)
 ;         JUMPINDX - Where to store jumping index (full global ref)
"RTN","HLDTIW2A",114,0)
 ;         MATCH - Match number to use
"RTN","HLDTIW2A",115,0)
 ;         OFFSET - Beginning offset for display
"RTN","HLDTIW2A",116,0)
 ;OUTPUT : N - Number of lines added to DISPARR
"RTN","HLDTIW2A",117,0)
 ;NOTES  : An 'unsupported' link is one that the HL7 Interface Workbench
"RTN","HLDTIW2A",118,0)
 ;         does not know about.  It does not mean that the link is
"RTN","HLDTIW2A",119,0)
 ;         not supported by the HL7 package.  The LLP information
"RTN","HLDTIW2A",120,0)
 ;         must be established through FileMan.
"RTN","HLDTIW2A",121,0)
 ;       : INFOARR() is the output array of $$LINKINFO^HLDTIW2A()
"RTN","HLDTIW2A",122,0)
 ;       : Input is not checked
"RTN","HLDTIW2A",123,0)
 ;
"RTN","HLDTIW2A",124,0)
 ;DECLARE VARIABLES
"RTN","HLDTIW2A",125,0)
 N LINE,TMP,ORIGOFF
"RTN","HLDTIW2A",126,0)
 S ORIGOFF=OFFSET
"RTN","HLDTIW2A",127,0)
 ;BUILD DISPLAY (COMMON INFO)
"RTN","HLDTIW2A",128,0)
 S @JUMPINDX@("MTCH",MATCH)=OFFSET
"RTN","HLDTIW2A",129,0)
 S @JUMPINDX@("LINE",OFFSET)=MATCH
"RTN","HLDTIW2A",130,0)
 S LINE="("_MATCH_") "
"RTN","HLDTIW2A",131,0)
 S LINE=LINE_$G(@INFOARR@(870,PTRLINK,.01,"E"))
"RTN","HLDTIW2A",132,0)
 S LINE=$$INSERT^HLDTIWU0("LLP is not supported by",LINE,56)
"RTN","HLDTIW2A",133,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2A",134,0)
 D CNTRL^VALM10(OFFSET,55,25,IORVON,IORVOFF)
"RTN","HLDTIW2A",135,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2A",136,0)
 S LINE=$$INSERT^HLDTIWU0("LLP Parameter: ","",2)
"RTN","HLDTIW2A",137,0)
 S LINE=LINE_$G(@INFOARR@(869.2,PTRLLP,.01,"E"))
"RTN","HLDTIW2A",138,0)
 S LINE=$$INSERT^HLDTIWU0("the workbench.  FileMan",LINE,56)
"RTN","HLDTIW2A",139,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2A",140,0)
 D CNTRL^VALM10(OFFSET,55,25,IORVON,IORVOFF)
"RTN","HLDTIW2A",141,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2A",142,0)
 S LINE=$$INSERT^HLDTIWU0("LLP Type: ","",7)
"RTN","HLDTIW2A",143,0)
 S LINE=LINE_$G(@INFOARR@(869.1,PTRTYPE,.01,"E"))
"RTN","HLDTIW2A",144,0)
 S TMP=$G(@INFOARR@(869.1,PTRTYPE,.03,"E"))
"RTN","HLDTIW2A",145,0)
 S:(TMP'="") LINE=LINE_"  ("_TMP_")"
"RTN","HLDTIW2A",146,0)
 S LINE=$$INSERT^HLDTIWU0("must be used to fill in",LINE,56)
"RTN","HLDTIW2A",147,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2A",148,0)
 D CNTRL^VALM10(OFFSET,55,25,IORVON,IORVOFF)
"RTN","HLDTIW2A",149,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2A",150,0)
 S LINE=$$INSERT^HLDTIWU0("Queue Size: ","",5)
"RTN","HLDTIW2A",151,0)
 S TMP=$G(@INFOARR@(870,PTRLINK,21,"E"))
"RTN","HLDTIW2A",152,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2A",153,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2A",154,0)
 S LINE=$$INSERT^HLDTIWU0("the LLP specific info.",LINE,56)
"RTN","HLDTIW2A",155,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2A",156,0)
 D CNTRL^VALM10(OFFSET,55,25,IORVON,IORVOFF)
"RTN","HLDTIW2A",157,0)
 D DMNINSTA^HLDTIW2B
"RTN","HLDTIW2A",158,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2A",159,0)
 Q (OFFSET-ORIGOFF)
"RTN","HLDTIW2B")
0^15^B27233060
"RTN","HLDTIW2B",1,0)
HLDTIW2B ;ALB/JRP - INTERFACE WORKBENCH SCREEN # 2 ROLLOVER;03-MAR-95 ;09/17/98  09:37
"RTN","HLDTIW2B",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14**;Oct 13, 1995
"RTN","HLDTIW2B",3,0)
DSPMAIL(PTRLINK,PTRLLP,PTRTYPE,INFOARR,DISPARR,JUMPINDX,MATCH,OFFSET) ;BUILD LISTMAN DISPLAY FOR MAILMAN LINK
"RTN","HLDTIW2B",4,0)
 ;INPUT  : PTRLINK - Pointer to HL LOGICAL LINK file (#870)
"RTN","HLDTIW2B",5,0)
 ;         PTRLLP - Ptr HL LOWER LEVEL PROTOCOL PARAMETER file (#869.2)
"RTN","HLDTIW2B",6,0)
 ;         PTRTYPE - Ptr to HL LOWER LEVEL PROTOCOL TYPE file (#869.1)
"RTN","HLDTIW2B",7,0)
 ;         INFOARR - Where link data is (full global reference)
"RTN","HLDTIW2B",8,0)
 ;         DISPARR - Where to store display (full global reference)
"RTN","HLDTIW2B",9,0)
 ;         JUMPINDX - Where to store jumping index (full global ref)
"RTN","HLDTIW2B",10,0)
 ;         MATCH - Match number to use
"RTN","HLDTIW2B",11,0)
 ;         OFFSET - Beginning offset for display
"RTN","HLDTIW2B",12,0)
 ;OUTPUT : N - Number of lines added to DISPARR
"RTN","HLDTIW2B",13,0)
 ;NOTES  : INFOARR() is the output array of $$LINKINFO^HLDTIW2A()
"RTN","HLDTIW2B",14,0)
 ;       : Input is not checked
"RTN","HLDTIW2B",15,0)
 ;
"RTN","HLDTIW2B",16,0)
 ;DECLARE VARIABLES
"RTN","HLDTIW2B",17,0)
 N LINE,TMP,ORIGOFF
"RTN","HLDTIW2B",18,0)
 S ORIGOFF=OFFSET
"RTN","HLDTIW2B",19,0)
 ;BUILD DISPLAY (COMMON INFO)
"RTN","HLDTIW2B",20,0)
 S @JUMPINDX@("MTCH",MATCH)=OFFSET
"RTN","HLDTIW2B",21,0)
 S @JUMPINDX@("LINE",OFFSET)=MATCH
"RTN","HLDTIW2B",22,0)
 S LINE="("_MATCH_") "
"RTN","HLDTIW2B",23,0)
 S LINE=LINE_$G(@INFOARR@(870,PTRLINK,.01,"E"))
"RTN","HLDTIW2B",24,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2B",25,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",26,0)
 S LINE=$$INSERT^HLDTIWU0("LLP Parameter: ","",2)
"RTN","HLDTIW2B",27,0)
 S LINE=LINE_$G(@INFOARR@(869.2,PTRLLP,.01,"E"))
"RTN","HLDTIW2B",28,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2B",29,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",30,0)
 S LINE=$$INSERT^HLDTIWU0("LLP Type: ","",7)
"RTN","HLDTIW2B",31,0)
 S LINE=LINE_$G(@INFOARR@(869.1,PTRTYPE,.01,"E"))
"RTN","HLDTIW2B",32,0)
 S TMP=$G(@INFOARR@(869.1,PTRTYPE,.03,"E"))
"RTN","HLDTIW2B",33,0)
 S:(TMP'="") LINE=LINE_"  ("_TMP_")"
"RTN","HLDTIW2B",34,0)
 ;MAILMAN SPECIFIC INFO
"RTN","HLDTIW2B",35,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2B",36,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",37,0)
 S LINE=$$INSERT^HLDTIWU0("Mail Group: ","",5)
"RTN","HLDTIW2B",38,0)
 S LINE=LINE_$G(@INFOARR@(869.2,PTRLLP,100.01,"E"))
"RTN","HLDTIW2B",39,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2B",40,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",41,0)
 S LINE=$$INSERT^HLDTIWU0("Queue Size: ","",5)
"RTN","HLDTIW2B",42,0)
 S TMP=$G(@INFOARR@(870,PTRLINK,21,"E"))
"RTN","HLDTIW2B",43,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2B",44,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2B",45,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2B",46,0)
 D DMNINSTA
"RTN","HLDTIW2B",47,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",48,0)
 Q (OFFSET-ORIGOFF)
"RTN","HLDTIW2B",49,0)
DSPHLLP(PTRLINK,PTRLLP,PTRTYPE,INFOARR,DISPARR,JUMPINDX,MATCH,OFFSET) ;BUILD LISTMAN DISPLAY FOR HLLP LINK
"RTN","HLDTIW2B",50,0)
 ;INPUT  : PTRLINK - Pointer to HL LOGICAL LINK file (#870)
"RTN","HLDTIW2B",51,0)
 ;         PTRLLP - Ptr HL LOWER LEVEL PROTOCOL PARAMETER file (#869.2)
"RTN","HLDTIW2B",52,0)
 ;         PTRTYPE - Ptr to HL LOWER LEVEL PROTOCOL TYPE file (#869.1)
"RTN","HLDTIW2B",53,0)
 ;         INFOARR - Where link data is (full global reference)
"RTN","HLDTIW2B",54,0)
 ;         DISPARR - Where to store display (full global reference)
"RTN","HLDTIW2B",55,0)
 ;         JUMPINDX - Where to store jumping index (full global ref)
"RTN","HLDTIW2B",56,0)
 ;         MATCH - Match number to use
"RTN","HLDTIW2B",57,0)
 ;         OFFSET - Beginning offset for display
"RTN","HLDTIW2B",58,0)
 ;OUTPUT : N - Number of lines added to DISPARR
"RTN","HLDTIW2B",59,0)
 ;NOTES  : INFOARR() is the output array of $$LINKINFO^HLDTIW2A()
"RTN","HLDTIW2B",60,0)
 ;       : Input is not checked
"RTN","HLDTIW2B",61,0)
 ;
"RTN","HLDTIW2B",62,0)
 ;DECLARE VARIABLES
"RTN","HLDTIW2B",63,0)
 N LINE,TMP,ORIGOFF
"RTN","HLDTIW2B",64,0)
 S ORIGOFF=OFFSET
"RTN","HLDTIW2B",65,0)
 ;BUILD DISPLAY (COMMON INFO)
"RTN","HLDTIW2B",66,0)
 S @JUMPINDX@("MTCH",MATCH)=OFFSET
"RTN","HLDTIW2B",67,0)
 S @JUMPINDX@("LINE",OFFSET)=MATCH
"RTN","HLDTIW2B",68,0)
 S LINE="("_MATCH_") "
"RTN","HLDTIW2B",69,0)
 S LINE=LINE_$G(@INFOARR@(870,PTRLINK,.01,"E"))
"RTN","HLDTIW2B",70,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2B",71,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",72,0)
 S LINE=$$INSERT^HLDTIWU0("LLP Parameter: ","",2)
"RTN","HLDTIW2B",73,0)
 S LINE=LINE_$G(@INFOARR@(869.2,PTRLLP,.01,"E"))
"RTN","HLDTIW2B",74,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2B",75,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",76,0)
 S LINE=$$INSERT^HLDTIWU0("LLP Type: ","",7)
"RTN","HLDTIW2B",77,0)
 S LINE=LINE_$G(@INFOARR@(869.1,PTRTYPE,.01,"E"))
"RTN","HLDTIW2B",78,0)
 S TMP=$G(@INFOARR@(869.1,PTRTYPE,.03,"E"))
"RTN","HLDTIW2B",79,0)
 S:(TMP'="") LINE=LINE_"  ("_TMP_")"
"RTN","HLDTIW2B",80,0)
 ;HLLP SPECIFIC INFO
"RTN","HLDTIW2B",81,0)
 S LINE=$$INSERT^HLDTIWU0("Read Timeout: ",LINE,58)
"RTN","HLDTIW2B",82,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,200.04,"E"))
"RTN","HLDTIW2B",83,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2B",84,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2B",85,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2B",86,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",87,0)
 S LINE=$$INSERT^HLDTIWU0("Device: ","",9)
"RTN","HLDTIW2B",88,0)
 S LINE=LINE_$G(@INFOARR@(869.2,PTRLLP,200.01,"E"))
"RTN","HLDTIW2B",89,0)
 S LINE=$$INSERT^HLDTIWU0("ACK Timeout: ",LINE,59)
"RTN","HLDTIW2B",90,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,200.05,"E"))
"RTN","HLDTIW2B",91,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2B",92,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2B",93,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2B",94,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",95,0)
 S LINE=$$INSERT^HLDTIWU0("Version ID: ","",5)
"RTN","HLDTIW2B",96,0)
 S LINE=LINE_$G(@INFOARR@(869.2,PTRLLP,200.08,"E"))
"RTN","HLDTIW2B",97,0)
 S LINE=$$INSERT^HLDTIWU0("Re-transmission Attempts: ",LINE,46)
"RTN","HLDTIW2B",98,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,200.02,"E"))
"RTN","HLDTIW2B",99,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2B",100,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2B",101,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2B",102,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",103,0)
 S LINE=$$INSERT^HLDTIWU0("Block Size: ","",5)
"RTN","HLDTIW2B",104,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,200.03,"E"))
"RTN","HLDTIW2B",105,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2B",106,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2B",107,0)
 S LINE=$$INSERT^HLDTIWU0("Start Block Character: ",LINE,49)
"RTN","HLDTIW2B",108,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,200.06,"E"))
"RTN","HLDTIW2B",109,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2B",110,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2B",111,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2B",112,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",113,0)
 S LINE=$$INSERT^HLDTIWU0("Queue Size: ","",5)
"RTN","HLDTIW2B",114,0)
 S TMP=$G(@INFOARR@(870,PTRLINK,21,"E"))
"RTN","HLDTIW2B",115,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2B",116,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2B",117,0)
 S LINE=$$INSERT^HLDTIWU0("End Block Character: ",LINE,51)
"RTN","HLDTIW2B",118,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,200.07,"E"))
"RTN","HLDTIW2B",119,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2B",120,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2B",121,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2B",122,0)
 D DMNINSTA
"RTN","HLDTIW2B",123,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",124,0)
 Q (OFFSET-ORIGOFF)
"RTN","HLDTIW2B",125,0)
DMNINSTA ;Setup info for domain, institution and autostart
"RTN","HLDTIW2B",126,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",127,0)
 S LINE=$$INSERT^HLDTIWU0("Institution: ","",4)
"RTN","HLDTIW2B",128,0)
 S TMP=$G(@INFOARR@(870,PTRLINK,.02,"E"))
"RTN","HLDTIW2B",129,0)
 S:(TMP="") TMP="<NONE>"
"RTN","HLDTIW2B",130,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2B",131,0)
 I $G(@INFOARR@(869.1,PTRTYPE,.03,"E"))="T" D
"RTN","HLDTIW2B",132,0)
 .S LINE=$$INSERT^HLDTIWU0("Persistent: ",LINE,51)
"RTN","HLDTIW2B",133,0)
 .S TMP=$G(@INFOARR@(869,PTRLLP,400.04,"E"))
"RTN","HLDTIW2B",134,0)
 .S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2B",135,0)
 .S LINE=LINE_TMP
"RTN","HLDTIW2B",136,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2B",137,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",138,0)
 S LINE=$$INSERT^HLDTIWU0("Domain: ","",9)
"RTN","HLDTIW2B",139,0)
 S TMP=$G(@INFOARR@(870,PTRLINK,.03,"E"))
"RTN","HLDTIW2B",140,0)
 S:(TMP="") TMP="<NONE>"
"RTN","HLDTIW2B",141,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2B",142,0)
 I $G(@INFOARR@(869.1,PTRTYPE,.03,"E"))="T" D
"RTN","HLDTIW2B",143,0)
 .S LINE=$$INSERT^HLDTIWU0("Startup Node: ",LINE,49)
"RTN","HLDTIW2B",144,0)
 .S TMP=$G(@INFOARR@(869,PTRLLP,400.06,"E"))
"RTN","HLDTIW2B",145,0)
 .S:(TMP="") TMP="<NONE>"
"RTN","HLDTIW2B",146,0)
 .S LINE=LINE_TMP
"RTN","HLDTIW2B",147,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2B",148,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2B",149,0)
 S LINE=$$INSERT^HLDTIWU0("Autostart: ","",6)
"RTN","HLDTIW2B",150,0)
 S TMP=$G(@INFOARR@(870,PTRLINK,4.5,"E"))
"RTN","HLDTIW2B",151,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2B",152,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2B",153,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2C")
0^16^B29909204
"RTN","HLDTIW2C",1,0)
HLDTIW2C ;ALB/JRP - INTERFACE WORKBENCH SCREEN # 2 ROLLOVER;03-MAR-95 ;07/10/98  16:43
"RTN","HLDTIW2C",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14**;Oct 13, 1995
"RTN","HLDTIW2C",3,0)
DSPX328(PTRLINK,PTRLLP,PTRTYPE,INFOARR,DISPARR,JUMPINDX,MATCH,OFFSET) ;BUILD LISTMAN DISPLAY FOR X3.28 LINK
"RTN","HLDTIW2C",4,0)
 ;INPUT  : PTRLINK - Pointer to HL LOGICAL LINK file (#870)
"RTN","HLDTIW2C",5,0)
 ;         PTRLLP - Ptr HL LOWER LEVEL PROTOCOL PARAMETER file (#869.2)
"RTN","HLDTIW2C",6,0)
 ;         PTRTYPE - Ptr to HL LOWER LEVEL PROTOCOL TYPE file (#869.1)
"RTN","HLDTIW2C",7,0)
 ;         INFOARR - Where link data is (full global reference)
"RTN","HLDTIW2C",8,0)
 ;         DISPARR - Where to store display (full global reference)
"RTN","HLDTIW2C",9,0)
 ;         JUMPINDX - Where to store jumping index (full global ref)
"RTN","HLDTIW2C",10,0)
 ;         MATCH - Match number to use
"RTN","HLDTIW2C",11,0)
 ;         OFFSET - Beginning offset for display
"RTN","HLDTIW2C",12,0)
 ;OUTPUT : N - Number of lines added to DISPARR
"RTN","HLDTIW2C",13,0)
 ;NOTES  : INFOARR() is the output array of $$LINKINFO^HLDTIW2A()
"RTN","HLDTIW2C",14,0)
 ;       : Input is not checked
"RTN","HLDTIW2C",15,0)
 ;
"RTN","HLDTIW2C",16,0)
 ;DECLARE VARIABLES
"RTN","HLDTIW2C",17,0)
 N LINE,TMP,ORIGOFF
"RTN","HLDTIW2C",18,0)
 S ORIGOFF=OFFSET
"RTN","HLDTIW2C",19,0)
 ;BUILD DISPLAY (COMMON INFO)
"RTN","HLDTIW2C",20,0)
 S @JUMPINDX@("MTCH",MATCH)=OFFSET
"RTN","HLDTIW2C",21,0)
 S @JUMPINDX@("LINE",OFFSET)=MATCH
"RTN","HLDTIW2C",22,0)
 S LINE="("_MATCH_") "
"RTN","HLDTIW2C",23,0)
 S LINE=LINE_$G(@INFOARR@(870,PTRLINK,.01,"E"))
"RTN","HLDTIW2C",24,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2C",25,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2C",26,0)
 S LINE=$$INSERT^HLDTIWU0("LLP Parameter: ","",2)
"RTN","HLDTIW2C",27,0)
 S LINE=LINE_$G(@INFOARR@(869.2,PTRLLP,.01,"E"))
"RTN","HLDTIW2C",28,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2C",29,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2C",30,0)
 S LINE=$$INSERT^HLDTIWU0("LLP Type: ","",7)
"RTN","HLDTIW2C",31,0)
 S LINE=LINE_$G(@INFOARR@(869.1,PTRTYPE,.01,"E"))
"RTN","HLDTIW2C",32,0)
 S TMP=$G(@INFOARR@(869.1,PTRTYPE,.03,"E"))
"RTN","HLDTIW2C",33,0)
 S:(TMP'="") LINE=LINE_"  ("_TMP_")"
"RTN","HLDTIW2C",34,0)
 ;X3.28 SPECIFIC INFO
"RTN","HLDTIW2C",35,0)
 S LINE=$$INSERT^HLDTIWU0("TERM: ",LINE,66)
"RTN","HLDTIW2C",36,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.08,"E"))
"RTN","HLDTIW2C",37,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",38,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",39,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2C",40,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2C",41,0)
 S LINE=$$INSERT^HLDTIWU0("Device: ","",9)
"RTN","HLDTIW2C",42,0)
 S LINE=LINE_$G(@INFOARR@(869.2,PTRLLP,300.01,"E"))
"RTN","HLDTIW2C",43,0)
 S LINE=$$INSERT^HLDTIWU0("NAK: ",LINE,67)
"RTN","HLDTIW2C",44,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.17,"E"))
"RTN","HLDTIW2C",45,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",46,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",47,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2C",48,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2C",49,0)
 S LINE=$$INSERT^HLDTIWU0("Block Size: ","",5)
"RTN","HLDTIW2C",50,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.03,"E"))
"RTN","HLDTIW2C",51,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",52,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",53,0)
 S LINE=$$INSERT^HLDTIWU0("SOH: ",LINE,41)
"RTN","HLDTIW2C",54,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.09,"E"))
"RTN","HLDTIW2C",55,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",56,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",57,0)
 S LINE=$$INSERT^HLDTIWU0("ACK0: ",LINE,66)
"RTN","HLDTIW2C",58,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.18,"E"))
"RTN","HLDTIW2C",59,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",60,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",61,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2C",62,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2C",63,0)
 S LINE=$$INSERT^HLDTIWU0("Message Size: ","",3)
"RTN","HLDTIW2C",64,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.02,"E"))
"RTN","HLDTIW2C",65,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",66,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",67,0)
 S LINE=$$INSERT^HLDTIWU0("STX: ",LINE,41)
"RTN","HLDTIW2C",68,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.1,"E"))
"RTN","HLDTIW2C",69,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",70,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",71,0)
 S LINE=$$INSERT^HLDTIWU0("ACK1: ",LINE,66)
"RTN","HLDTIW2C",72,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.19,"E"))
"RTN","HLDTIW2C",73,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",74,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",75,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2C",76,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2C",77,0)
 S LINE=$$INSERT^HLDTIWU0("Queue Size: ","",5)
"RTN","HLDTIW2C",78,0)
 S TMP=$G(@INFOARR@(870,PTRLLP,21,"E"))
"RTN","HLDTIW2C",79,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",80,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",81,0)
 S LINE=$$INSERT^HLDTIWU0("ETB: ",LINE,41)
"RTN","HLDTIW2C",82,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.11,"E"))
"RTN","HLDTIW2C",83,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",84,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",85,0)
 S LINE=$$INSERT^HLDTIWU0("ACK2: ",LINE,66)
"RTN","HLDTIW2C",86,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.2,"E"))
"RTN","HLDTIW2C",87,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",88,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",89,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2C",90,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2C",91,0)
 S LINE=$$INSERT^HLDTIWU0("ETX: ","",41)
"RTN","HLDTIW2C",92,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.12,"E"))
"RTN","HLDTIW2C",93,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",94,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",95,0)
 S LINE=$$INSERT^HLDTIWU0("ACK3: ",LINE,66)
"RTN","HLDTIW2C",96,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.21,"E"))
"RTN","HLDTIW2C",97,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",98,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",99,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2C",100,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2C",101,0)
 S LINE=$$INSERT^HLDTIWU0("Response Timer: ","",5)
"RTN","HLDTIW2C",102,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.04,"E"))
"RTN","HLDTIW2C",103,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",104,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",105,0)
 S LINE=$$INSERT^HLDTIWU0("EOT: ",LINE,41)
"RTN","HLDTIW2C",106,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.13,"E"))
"RTN","HLDTIW2C",107,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",108,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",109,0)
 S LINE=$$INSERT^HLDTIWU0("ACK4: ",LINE,66)
"RTN","HLDTIW2C",110,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.22,"E"))
"RTN","HLDTIW2C",111,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",112,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",113,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2C",114,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2C",115,0)
 S LINE=$$INSERT^HLDTIWU0("Receive Timer: ","",6)
"RTN","HLDTIW2C",116,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.05,"E"))
"RTN","HLDTIW2C",117,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",118,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",119,0)
 S LINE=$$INSERT^HLDTIWU0("ENQ: ",LINE,41)
"RTN","HLDTIW2C",120,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.14,"E"))
"RTN","HLDTIW2C",121,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",122,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",123,0)
 S LINE=$$INSERT^HLDTIWU0("ACK5: ",LINE,66)
"RTN","HLDTIW2C",124,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.23,"E"))
"RTN","HLDTIW2C",125,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",126,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",127,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2C",128,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2C",129,0)
 S LINE=$$INSERT^HLDTIWU0("Inter-Block Timer: ","",2)
"RTN","HLDTIW2C",130,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.06,"E"))
"RTN","HLDTIW2C",131,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",132,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",133,0)
 S LINE=$$INSERT^HLDTIWU0("RINT: ",LINE,40)
"RTN","HLDTIW2C",134,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.15,"E"))
"RTN","HLDTIW2C",135,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",136,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",137,0)
 S LINE=$$INSERT^HLDTIWU0("ACK6: ",LINE,66)
"RTN","HLDTIW2C",138,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.24,"E"))
"RTN","HLDTIW2C",139,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",140,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",141,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2C",142,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2C",143,0)
 S LINE=$$INSERT^HLDTIWU0("Line Check Timer: ","",3)
"RTN","HLDTIW2C",144,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.07,"E"))
"RTN","HLDTIW2C",145,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",146,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",147,0)
 S LINE=$$INSERT^HLDTIWU0("DLE: ",LINE,41)
"RTN","HLDTIW2C",148,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.16,"E"))
"RTN","HLDTIW2C",149,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",150,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",151,0)
 S LINE=$$INSERT^HLDTIWU0("ACK7: ",LINE,66)
"RTN","HLDTIW2C",152,0)
 S TMP=$G(@INFOARR@(869.2,PTRLLP,300.25,"E"))
"RTN","HLDTIW2C",153,0)
 S:(TMP="") TMP="<DEFAULT>"
"RTN","HLDTIW2C",154,0)
 S LINE=LINE_TMP
"RTN","HLDTIW2C",155,0)
 S @DISPARR@(OFFSET,0)=LINE
"RTN","HLDTIW2C",156,0)
 D DMNINSTA^HLDTIW2B
"RTN","HLDTIW2C",157,0)
 S OFFSET=OFFSET+1
"RTN","HLDTIW2C",158,0)
 Q (OFFSET-ORIGOFF)
"RTN","HLDTIWP1")
0^17^B36478370
"RTN","HLDTIWP1",1,0)
HLDTIWP1 ;ALB/JRP - INTERFACE WORKBENCH PROTOCOLS;15-FEB-94 ;09/22/98  10:28
"RTN","HLDTIWP1",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14**;Oct 13, 1995
"RTN","HLDTIWP1",3,0)
NEWLINK ;CREATE LOGICAL LINK
"RTN","HLDTIWP1",4,0)
 ;DECLARE VARIABLES
"RTN","HLDTIWP1",5,0)
 N LINKINDX,HLDTIWXQ,DIC,X,Y,DLAYGO
"RTN","HLDTIWP1",6,0)
 N DTOUT,DUOUT,PTRLINK,NAME
"RTN","HLDTIWP1",7,0)
 S LINKINDX="^TMP(""HL"",""IW-IDX"","_$J_",""LINK"")"
"RTN","HLDTIWP1",8,0)
 ;SWITCH TO FULL SCREEN
"RTN","HLDTIWP1",9,0)
 D FULL^VALM1
"RTN","HLDTIWP1",10,0)
 ;CREATE STUB ENTRY USING DIC
"RTN","HLDTIWP1",11,0)
 S DIC="^HLCS(870,"
"RTN","HLDTIWP1",12,0)
 S DIC(0)="AELMQ"
"RTN","HLDTIWP1",13,0)
 S DLAYGO=870
"RTN","HLDTIWP1",14,0)
 D ^DIC
"RTN","HLDTIWP1",15,0)
 S PTRLINK=+Y
"RTN","HLDTIWP1",16,0)
 S NAME=$P(Y,"^",2)
"RTN","HLDTIWP1",17,0)
 I (($D(DTOUT))!($D(DUOUT))!(PTRLINK<0)) S XQORPOP=1,VALMBCK="R" Q
"RTN","HLDTIWP1",18,0)
 ;GET NEW/EXISTING ENTRY NUMBER IN INDEX
"RTN","HLDTIWP1",19,0)
 S (X,HLDTIWXQ)=""
"RTN","HLDTIWP1",20,0)
 F  S X=+$O(@LINKINDX@(X)) Q:('X)  S HLDTIWXQ=X Q:($D(@LINKINDX@(X,PTRLINK)))
"RTN","HLDTIWP1",21,0)
 S:('X) HLDTIWXQ=HLDTIWXQ+1
"RTN","HLDTIWP1",22,0)
 S @LINKINDX@(HLDTIWXQ,PTRLINK)=NAME_"^^"
"RTN","HLDTIWP1",23,0)
 S HLDTIWXQ="^^^="_HLDTIWXQ
"RTN","HLDTIWP1",24,0)
 ;EDIT (DROP THROUGH)
"RTN","HLDTIWP1",25,0)
EDITLINK ;EDIT LOGICAL LINK
"RTN","HLDTIWP1",26,0)
 ;DECLARE VARIABLES
"RTN","HLDTIWP1",27,0)
 N ENTRY,DIE,DA,DR,DTOUT,LINKINDX,PTRLINK,NODE
"RTN","HLDTIWP1",28,0)
 N NAME,PTRLLPP,PTRLLPT,NAMELLP,TYPELLP,Y
"RTN","HLDTIWP1",29,0)
 S LINKINDX="^TMP(""HL"",""IW-IDX"","_$J_",""LINK"")"
"RTN","HLDTIWP1",30,0)
 ;NOTHING TO SELECT FROM
"RTN","HLDTIWP1",31,0)
 I ('$O(@LINKINDX@(0))) D  Q
"RTN","HLDTIWP1",32,0)
 .W $C(7)
"RTN","HLDTIWP1",33,0)
 .D MSG^VALM10("No logical links have been defined")
"RTN","HLDTIWP1",34,0)
 .H 3
"RTN","HLDTIWP1",35,0)
 .S XQORPOP=1
"RTN","HLDTIWP1",36,0)
 .S VALMBCK="R"
"RTN","HLDTIWP1",37,0)
 ;CHECK XQORNOD(0) & HLDTIWXQ FOR PRE-SELECTION
"RTN","HLDTIWP1",38,0)
 S ENTRY=$P($P($G(XQORNOD(0)),"^",4),"=",2)
"RTN","HLDTIWP1",39,0)
 S:($G(XQORNOD(0))="") ENTRY=$P($P($G(HLDTIWXQ),"^",4),"=",2)
"RTN","HLDTIWP1",40,0)
 I (ENTRY'="") D
"RTN","HLDTIWP1",41,0)
 .I ((ENTRY[",")!(ENTRY["-")) W $C(7),!,"Only one logical link can be selected - will use first entry in list" S ENTRY=+ENTRY
"RTN","HLDTIWP1",42,0)
 .I (('ENTRY)!('$D(@LINKINDX@(ENTRY)))) W $C(7),!,ENTRY," is not a valid selection" S ENTRY=0
"RTN","HLDTIWP1",43,0)
 ;PROMPT FOR SELECTION
"RTN","HLDTIWP1",44,0)
 S:('ENTRY) ENTRY=$$SELECT^HLDTIWU0(LINKINDX,"Logical Link")
"RTN","HLDTIWP1",45,0)
 I (('ENTRY)!(ENTRY<0)) S XQORPOP=1,VALMBCK="R" Q
"RTN","HLDTIWP1",46,0)
 ;GET POINTER OUT OF INDEX ARRAY
"RTN","HLDTIWP1",47,0)
 S PTRLINK=+$O(@LINKINDX@(ENTRY,""))
"RTN","HLDTIWP1",48,0)
 I ('PTRLINK) D  Q
"RTN","HLDTIWP1",49,0)
 .W $C(7)
"RTN","HLDTIWP1",50,0)
 .D MSG^VALM10("Unable to determine logical link being edited")
"RTN","HLDTIWP1",51,0)
 .H 3
"RTN","HLDTIWP1",52,0)
 .S XQORPOP=1
"RTN","HLDTIWP1",53,0)
 .S VALMBCK="R"
"RTN","HLDTIWP1",54,0)
 ;LOCK LINK
"RTN","HLDTIWP1",55,0)
 L +^HLCS(870,PTRLINK):0 I ('$T) D  Q
"RTN","HLDTIWP1",56,0)
 .W $C(7)
"RTN","HLDTIWP1",57,0)
 .D MSG^VALM10("Logical link is currently locked by another user")
"RTN","HLDTIWP1",58,0)
 .L -^HLCS(870,PTRLINK)
"RTN","HLDTIWP1",59,0)
 .H 3
"RTN","HLDTIWP1",60,0)
 .S XQORPOP=1
"RTN","HLDTIWP1",61,0)
 .S VALMBCK="R"
"RTN","HLDTIWP1",62,0)
 ;SWITCH TO FULL SCREEN
"RTN","HLDTIWP1",63,0)
 D FULL^VALM1
"RTN","HLDTIWP1",64,0)
 ;EDIT LINK USING DIE
"RTN","HLDTIWP1",65,0)
 W !!,"Logical Link information"
"RTN","HLDTIWP1",66,0)
 W !,"------------------------"
"RTN","HLDTIWP1",67,0)
 S DIE="^HLCS(870,"
"RTN","HLDTIWP1",68,0)
 S DA=PTRLINK
"RTN","HLDTIWP1",69,0)
 S DR="21Queue Size;2LLP Parameter~R;.02Institution;.03Domain;4.5Auto Start"
"RTN","HLDTIWP1",70,0)
 D ^DIE
"RTN","HLDTIWP1",71,0)
 ;LINK WAS DELETED
"RTN","HLDTIWP1",72,0)
 I ('$D(DA)) D  Q
"RTN","HLDTIWP1",73,0)
 .K @LINKINDX@(ENTRY,PTRLINK)
"RTN","HLDTIWP1",74,0)
 .L -^HLCS(870,PTRLINK)
"RTN","HLDTIWP1",75,0)
 .S VALMBCK="R"
"RTN","HLDTIWP1",76,0)
 ;ABORT/TIMED OUT
"RTN","HLDTIWP1",77,0)
 I (($D(Y))!($D(DTOUT))) G SKIP
"RTN","HLDTIWP1",78,0)
 ;EDIT LLP PARAMETER USING DIE
"RTN","HLDTIWP1",79,0)
 S PTRLLPP=+$P($G(^HLCS(870,PTRLINK,0)),"^",3)
"RTN","HLDTIWP1",80,0)
 I (PTRLLPP) D
"RTN","HLDTIWP1",81,0)
 .;LOCK LLP PARAMETER
"RTN","HLDTIWP1",82,0)
 .L +^HLCS(869.2,PTRLLPP):0 I ('$T) D  Q
"RTN","HLDTIWP1",83,0)
 ..W $C(7),!!,"Lowel layer parameter is currently locked by another user",!
"RTN","HLDTIWP1",84,0)
 ..L -^HLCS(869.2,PTRLLPP)
"RTN","HLDTIWP1",85,0)
 ..H 3
"RTN","HLDTIWP1",86,0)
 .;EDIT COMMON INFO
"RTN","HLDTIWP1",87,0)
 .W !!,"LLP Parameters"
"RTN","HLDTIWP1",88,0)
 .W !,"--------------"
"RTN","HLDTIWP1",89,0)
 .S DIE="^HLCS(869.2,"
"RTN","HLDTIWP1",90,0)
 .S DA=PTRLLPP
"RTN","HLDTIWP1",91,0)
 .S DR=".02LLP Type~R"
"RTN","HLDTIWP1",92,0)
 .D ^DIE
"RTN","HLDTIWP1",93,0)
 .;ABORT/TIMED OUT
"RTN","HLDTIWP1",94,0)
 .I (($D(Y))!($D(DTOUT))) L -^HLCS(869.2,PTRLLPP) Q
"RTN","HLDTIWP1",95,0)
 .;EDIT LLP SPECIFIC INFO
"RTN","HLDTIWP1",96,0)
 .S PTRLLPT=+$P($G(^HLCS(869.2,PTRLLPP,0)),"^",2)
"RTN","HLDTIWP1",97,0)
 .S TYPELLP=$P($G(^HLCS(869.1,PTRLLPT,0)),"^",3)
"RTN","HLDTIWP1",98,0)
 .S DIE="^HLCS(869.2,"
"RTN","HLDTIWP1",99,0)
 .S DA=PTRLLPP
"RTN","HLDTIWP1",100,0)
 .S DR=""
"RTN","HLDTIWP1",101,0)
 .;MAILMAN INFO
"RTN","HLDTIWP1",102,0)
 .S:(TYPELLP="M") DR="100.01Mail Group~R"
"RTN","HLDTIWP1",103,0)
 .;TCP/IP INFO
"RTN","HLDTIWP1",104,0)
 .I (TYPELLP="T") D
"RTN","HLDTIWP1",105,0)
 ..S DR="400.01TCP/IP Adress;400.02TCP/IP Port~R"
"RTN","HLDTIWP1",106,0)
 ..S DR(1,869.2,1)="400.03TCP/IP Service Type~R;400.04Persistent;400.06Startup Node"
"RTN","HLDTIWP1",107,0)
 .;HLLP INFO
"RTN","HLDTIWP1",108,0)
 .I (TYPELLP="H") D
"RTN","HLDTIWP1",109,0)
 ..S DR="200.01Device~R;200.08Version ID~R;200.03Block Size"
"RTN","HLDTIWP1",110,0)
 ..S DR(1,869.2,1)="200.04Read Timeout;200.05ACK Timeout;200.02Re-transmission Attempts"
"RTN","HLDTIWP1",111,0)
 ..S DR(1,869.2,2)="200.06Start Block Character;200.07End Block Character"
"RTN","HLDTIWP1",112,0)
 .;X3.28 INFO
"RTN","HLDTIWP1",113,0)
 .I (TYPELLP="X") D
"RTN","HLDTIWP1",114,0)
 ..S DR="300.01Device~R;300.03Block Size;300.02Message Size"
"RTN","HLDTIWP1",115,0)
 ..S DR(1,869.2,1)="300.04Response Timer;300.05Receive Timer"
"RTN","HLDTIWP1",116,0)
 ..S DR(1,869.2,2)="300.06Inter-Block Timer;300.07Line Check Timer"
"RTN","HLDTIWP1",117,0)
 ..S DR(1,869.2,3)="300.09:300.16"
"RTN","HLDTIWP1",118,0)
 ..S DR(1,869.2,4)="300.08;300.17:300.25"
"RTN","HLDTIWP1",119,0)
 .D ^DIE
"RTN","HLDTIWP1",120,0)
 .;UNLOCK LLP PARAMETER
"RTN","HLDTIWP1",121,0)
 .L -^HLCS(869.2,PTRLLPP)
"RTN","HLDTIWP1",122,0)
SKIP ;UPDATE INDEX
"RTN","HLDTIWP1",123,0)
 S NODE=$G(^HLCS(870,PTRLINK,0))
"RTN","HLDTIWP1",124,0)
 S NAME=$P(NODE,"^",1)
"RTN","HLDTIWP1",125,0)
 S PTRLLPP=+$P(NODE,"^",3)
"RTN","HLDTIWP1",126,0)
 S NODE=$G(^HLCS(869.2,PTRLLPP,0))
"RTN","HLDTIWP1",127,0)
 S NAMELLP=$P(NODE,"^",1)
"RTN","HLDTIWP1",128,0)
 S PTRLLPT=+$P(NODE,"^",2)
"RTN","HLDTIWP1",129,0)
 S TYPELLP=$P($G(^HLCS(869.1,PTRLLPT,0)),"^",1)
"RTN","HLDTIWP1",130,0)
 S @LINKINDX@(ENTRY,PTRLINK)=NAME_"^"_NAMELLP_"^"_TYPELLP
"RTN","HLDTIWP1",131,0)
 S VALMBCK="R"
"RTN","HLDTIWP1",132,0)
 ;UNLOCK LINK AND QUIT
"RTN","HLDTIWP1",133,0)
 L -^HLCS(870,PTRLINK)
"RTN","HLDTIWP1",134,0)
 Q
"RTN","HLDTIWP1",135,0)
DELLINK ;DELETE LOGICAL LINK
"RTN","HLDTIWP1",136,0)
 ;DECLARE VARIABLES
"RTN","HLDTIWP1",137,0)
 N ENTRY,LINKINDX,PTRLINK,TMP
"RTN","HLDTIWP1",138,0)
 S LINKINDX="^TMP(""HL"",""IW-IDX"","_$J_",""LINK"")"
"RTN","HLDTIWP1",139,0)
 ;NOTHING TO SELECT FROM
"RTN","HLDTIWP1",140,0)
 I ('$O(@LINKINDX@(0))) D  Q
"RTN","HLDTIWP1",141,0)
 .W $C(7)
"RTN","HLDTIWP1",142,0)
 .D MSG^VALM10("No logical links have been defined")
"RTN","HLDTIWP1",143,0)
 .H 3
"RTN","HLDTIWP1",144,0)
 .S VALMBCK="R"
"RTN","HLDTIWP1",145,0)
 .S XQORPOP=1
"RTN","HLDTIWP1",146,0)
 ;CHECK XQORNOD(0) & HLDTIWXQ FOR PRE-SELECTION
"RTN","HLDTIWP1",147,0)
 S ENTRY=$P($P($G(XQORNOD(0)),"^",4),"=",2)
"RTN","HLDTIWP1",148,0)
 S:($G(XQORNOD(0))="") ENTRY=$P($P($G(HLDTIWXQ),"^",4),"=",2)
"RTN","HLDTIWP1",149,0)
 I (ENTRY'="") D
"RTN","HLDTIWP1",150,0)
 .I ((ENTRY[",")!(ENTRY["-")) W $C(7),!,"Only one logical link can be selected - will use first entry in list" S ENTRY=+ENTRY
"RTN","HLDTIWP1",151,0)
 .I (('ENTRY)!('$D(@LINKINDX@(ENTRY)))) W $C(7),!,ENTRY," is not a valid selection" S ENTRY=0
"RTN","HLDTIWP1",152,0)
 ;PROMPT FOR SELECTION
"RTN","HLDTIWP1",153,0)
 S:('ENTRY) ENTRY=$$SELECT^HLDTIWU0(LINKINDX,"Logical Link")
"RTN","HLDTIWP1",154,0)
 I (('ENTRY)!(ENTRY<0)) S VALMBCK="R",XQORPOP=1 Q
"RTN","HLDTIWP1",155,0)
 ;GET POINTER OUT OF INDEX ARRAY
"RTN","HLDTIWP1",156,0)
 S PTRLINK=+$O(@LINKINDX@(ENTRY,""))
"RTN","HLDTIWP1",157,0)
 I ('PTRLINK) D  Q
"RTN","HLDTIWP1",158,0)
 .W $C(7)
"RTN","HLDTIWP1",159,0)
 .D MSG^VALM10("Unable to determine logical link being deleted")
"RTN","HLDTIWP1",160,0)
 .H 3
"RTN","HLDTIWP1",161,0)
 .S VALMBCK="R"
"RTN","HLDTIWP1",162,0)
 .S XQORPOP=1
"RTN","HLDTIWP1",163,0)
 ;SWITCH TO FULL SCREEN
"RTN","HLDTIWP1",164,0)
 D FULL^VALM1
"RTN","HLDTIWP1",165,0)
 W !
"RTN","HLDTIWP1",166,0)
 ;VERIFY WITH USER
"RTN","HLDTIWP1",167,0)
 S TMP=$$AREUSURE^HLDTIWU5("delete","logical link")
"RTN","HLDTIWP1",168,0)
 I ((TMP=0)!(TMP<0)) S VALMBCK="R",XQORPOP=1 Q
"RTN","HLDTIWP1",169,0)
 ;DELETE LINK
"RTN","HLDTIWP1",170,0)
 S TMP=$$DELLINK^HLDTIWU4(PTRLINK,1)
"RTN","HLDTIWP1",171,0)
 ;ERROR DELETING
"RTN","HLDTIWP1",172,0)
 I (TMP<0) D  Q
"RTN","HLDTIWP1",173,0)
 .W $C(7)
"RTN","HLDTIWP1",174,0)
 .S VALMSG=$P(TMP,"^",2)
"RTN","HLDTIWP1",175,0)
 .S VALMBCK="R"
"RTN","HLDTIWP1",176,0)
 .S XQORPOP=1
"RTN","HLDTIWP1",177,0)
 ;SUCCESS - DONE
"RTN","HLDTIWP1",178,0)
 S VALMBCK="R"
"RTN","HLDTIWP1",179,0)
 Q
"RTN","HLDTIWP3")
0^18^B34093171
"RTN","HLDTIWP3",1,0)
HLDTIWP3 ;ALB/JRP - INTERFACE WORKBENCH PROTOCOLS;16-FEB-94 ;07/13/98  10:30
"RTN","HLDTIWP3",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14**;Oct 13, 1995
"RTN","HLDTIWP3",3,0)
NEWCLNT ;CREATE CLIENT PROTOCOL
"RTN","HLDTIWP3",4,0)
 ; - HLPTRAPP will contain a pointer to the Client Application being
"RTN","HLDTIWP3",5,0)
 ;   used (entry in HL APPLICATION PARAMETER file #771).  If not used,
"RTN","HLDTIWP3",6,0)
 ;   the application will not automatically be filled in (must be
"RTN","HLDTIWP3",7,0)
 ;   manually entered by user).
"RTN","HLDTIWP3",8,0)
 ;
"RTN","HLDTIWP3",9,0)
 ;DECLARE VARIABLES
"RTN","HLDTIWP3",10,0)
 N CLNTINDX,HLDTIWXQ,PTRCLNT,NAME,NEWCLNT
"RTN","HLDTIWP3",11,0)
 N Y,X,DIE,DA,DR,APPNAME,DIR,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","HLDTIWP3",12,0)
 S CLNTINDX="^TMP(""HL"",""IW-IDX"","_$J_",""CLNT"")"
"RTN","HLDTIWP3",13,0)
 ;SWITCH TO FULL SCREEN
"RTN","HLDTIWP3",14,0)
 D FULL^VALM1
"RTN","HLDTIWP3",15,0)
 ;CREATE STUB ENTRY USING DIC
"RTN","HLDTIWP3",16,0)
 S Y=$$PROTLOOK^HLDTIWU2(0,2,"",1)
"RTN","HLDTIWP3",17,0)
 S PTRCLNT=+Y
"RTN","HLDTIWP3",18,0)
 S NAME=$P(Y,"^",2)
"RTN","HLDTIWP3",19,0)
 S NEWCLNT=+$P(Y,"^",3)
"RTN","HLDTIWP3",20,0)
 I (PTRCLNT<0) S VALMBCK="R",XQORPOP=1 Q
"RTN","HLDTIWP3",21,0)
 ;CHECK IF HLPTRAPP IS USED
"RTN","HLDTIWP3",22,0)
 S APPNAME=""
"RTN","HLDTIWP3",23,0)
 S:($G(HLPTRAPP)) APPNAME=$P($G(^HL(771,HLPTRAPP,0)),"^",1)
"RTN","HLDTIWP3",24,0)
 ;NEW CLIENT - AUTOMATICALLY PUT IN NAME OF APPLICATION
"RTN","HLDTIWP3",25,0)
 I ((NEWCLNT)&(APPNAME'="")) D
"RTN","HLDTIWP3",26,0)
 .;PUT APPLICATION NAME INTO STUB
"RTN","HLDTIWP3",27,0)
 .S DIE="^ORD(101,"
"RTN","HLDTIWP3",28,0)
 .S DA=PTRCLNT
"RTN","HLDTIWP3",29,0)
 .S DR="770.2///"_APPNAME
"RTN","HLDTIWP3",30,0)
 .D ^DIE
"RTN","HLDTIWP3",31,0)
 ;EXISTING CLIENT - ASK USER ABOUT CHANGING APPLICATION OF PROTOCOL
"RTN","HLDTIWP3",32,0)
 I (('NEWCLNT)&(APPNAME'="")) D  Q:(HLDTIWXQ="")
"RTN","HLDTIWP3",33,0)
 .S HLDTIWXQ=0
"RTN","HLDTIWP3",34,0)
 .S DIR(0)="YA"
"RTN","HLDTIWP3",35,0)
 .S Y=+$P($G(^ORD(101,PTRCLNT,770)),"^",2)
"RTN","HLDTIWP3",36,0)
 .S X=$P($G(^HL(771,Y,0)),"^",1)
"RTN","HLDTIWP3",37,0)
 .S:(X="") X="<Undefined>"
"RTN","HLDTIWP3",38,0)
 .Q:(X=APPNAME)
"RTN","HLDTIWP3",39,0)
 .S DIR("A",1)=" "
"RTN","HLDTIWP3",40,0)
 .S DIR("A",2)="The client protocol's application is currently set to "_X
"RTN","HLDTIWP3",41,0)
 .S DIR("A",3)="and you are currently working with the application "_APPNAME_"."
"RTN","HLDTIWP3",42,0)
 .S DIR("A",4)=" "
"RTN","HLDTIWP3",43,0)
 .S DIR("A")="Do you want it changed ? "
"RTN","HLDTIWP3",44,0)
 .S DIR("B")="YES"
"RTN","HLDTIWP3",45,0)
 .D ^DIR
"RTN","HLDTIWP3",46,0)
 .I ($D(DIRUT)) S VALMBCK="R",HLDTIWXQ=1,XQORPOP=1 Q
"RTN","HLDTIWP3",47,0)
 .Q:('Y)
"RTN","HLDTIWP3",48,0)
 .;Change name of application
"RTN","HLDTIWP3",49,0)
 .S DIE="^ORD(101,"
"RTN","HLDTIWP3",50,0)
 .S DR="770.2///"_APPNAME
"RTN","HLDTIWP3",51,0)
 .S DA=PTRCLNT
"RTN","HLDTIWP3",52,0)
 .D ^DIE
"RTN","HLDTIWP3",53,0)
 ;GET NEW/EXISTING ENTRY NUMBER IN INDEX
"RTN","HLDTIWP3",54,0)
 S (X,HLDTIWXQ)=""
"RTN","HLDTIWP3",55,0)
 F  S X=+$O(@CLNTINDX@(X)) Q:('X)  S HLDTIWXQ=X Q:($D(@CLNTINDX@(X,PTRCLNT)))
"RTN","HLDTIWP3",56,0)
 S:('X) HLDTIWXQ=HLDTIWXQ+1
"RTN","HLDTIWP3",57,0)
 S @CLNTINDX@(HLDTIWXQ,PTRCLNT)=NAME_"^^"
"RTN","HLDTIWP3",58,0)
 S HLDTIWXQ="^^^="_HLDTIWXQ
"RTN","HLDTIWP3",59,0)
 ;EDIT (DROP THROUGH)
"RTN","HLDTIWP3",60,0)
EDITCLNT ;EDIT CLIENT PROTOCOL
"RTN","HLDTIWP3",61,0)
 ;DECLARE VARIABLES
"RTN","HLDTIWP3",62,0)
 N ENTRY,DIE,DA,DR,DTOUT,CLNTINDX,PTRCLNT
"RTN","HLDTIWP3",63,0)
 N NAME,NODE,PTRMSG,PTREVNT,MSGTYPE,EVNTTYPE
"RTN","HLDTIWP3",64,0)
 S CLNTINDX="^TMP(""HL"",""IW-IDX"","_$J_",""CLNT"")"
"RTN","HLDTIWP3",65,0)
 ;NOTHING TO SELECT FROM
"RTN","HLDTIWP3",66,0)
 I ('$O(@CLNTINDX@(0))) D  Q
"RTN","HLDTIWP3",67,0)
 .W $C(7)
"RTN","HLDTIWP3",68,0)
 .D MSG^VALM10("No client protocols have been defined")
"RTN","HLDTIWP3",69,0)
 .H 3
"RTN","HLDTIWP3",70,0)
 .S VALMBCK="R"
"RTN","HLDTIWP3",71,0)
 .S XQORPOP=1
"RTN","HLDTIWP3",72,0)
 ;CHECK XQORNOD(0) & HLDTIWXQ FOR PRE-SELECTION
"RTN","HLDTIWP3",73,0)
 S ENTRY=$P($P($G(XQORNOD(0)),"^",4),"=",2)
"RTN","HLDTIWP3",74,0)
 S:($G(XQORNOD(0))="") ENTRY=$P($P($G(HLDTIWXQ),"^",4),"=",2)
"RTN","HLDTIWP3",75,0)
 I (ENTRY'="") D
"RTN","HLDTIWP3",76,0)
 .I ((ENTRY[",")!(ENTRY["-")) W $C(7),!,"Only one client protocol can be selected - will use first entry in list" S ENTRY=+ENTRY
"RTN","HLDTIWP3",77,0)
 .I (('ENTRY)!('$D(@CLNTINDX@(ENTRY)))) W $C(7),!,ENTRY," is not a valid selection" S ENTRY=0
"RTN","HLDTIWP3",78,0)
 ;PROMPT FOR SELECTION
"RTN","HLDTIWP3",79,0)
 S:('ENTRY) ENTRY=$$SELECT^HLDTIWU0(CLNTINDX,"Client Protocol")
"RTN","HLDTIWP3",80,0)
 I (('ENTRY)!(ENTRY<0)) S VALMBCK="R",XQORPOP=1 Q
"RTN","HLDTIWP3",81,0)
 ;GET POINTER OUT OF INDEX ARRAY
"RTN","HLDTIWP3",82,0)
 S PTRCLNT=+$O(@CLNTINDX@(ENTRY,""))
"RTN","HLDTIWP3",83,0)
 I ('PTRCLNT) D  Q
"RTN","HLDTIWP3",84,0)
 .W $C(7)
"RTN","HLDTIWP3",85,0)
 .D MSG^VALM10("Unable to determine client protocol being edited")
"RTN","HLDTIWP3",86,0)
 .H 3
"RTN","HLDTIWP3",87,0)
 .S VALMBCK="R"
"RTN","HLDTIWP3",88,0)
 .S XQORPOP=1
"RTN","HLDTIWP3",89,0)
 ;LOCK ENTRY
"RTN","HLDTIWP3",90,0)
 L +^ORD(101,PTRCLNT):0 I ('$T) D  Q
"RTN","HLDTIWP3",91,0)
 .W $C(7)
"RTN","HLDTIWP3",92,0)
 .D MSG^VALM10("Client protocol currently locked by another user")
"RTN","HLDTIWP3",93,0)
 .L -^ORD(101,PTRCLNT)
"RTN","HLDTIWP3",94,0)
 .H 3
"RTN","HLDTIWP3",95,0)
 .S VALMBCK="R"
"RTN","HLDTIWP3",96,0)
 .S XQORPOP=1
"RTN","HLDTIWP3",97,0)
 ;SWITCH TO FULL SCREEN
"RTN","HLDTIWP3",98,0)
 D FULL^VALM1
"RTN","HLDTIWP3",99,0)
 ;EDIT USING DIE
"RTN","HLDTIWP3",100,0)
 S DIE="^ORD(101,"
"RTN","HLDTIWP3",101,0)
 S DA=PTRCLNT
"RTN","HLDTIWP3",102,0)
 S DR="1Text;12Package;770.2Application;3.5Description"
"RTN","HLDTIWP3",103,0)
 S DR(1,101,1)="770.3Message Type Received~R;770.11Message Type Sent~R;770.4Event Type Received & Sent~R;770.5Priority"
"RTN","HLDTIWP3",104,0)
 S DR(1,101,2)="770.6Processing ID;770.95Version ID~R;773.1Sending Facility Required"
"RTN","HLDTIWP3",105,0)
 S DR(1,101,3)="773.2Receiving Facility Required;773.4Date/Time of Message Required"
"RTN","HLDTIWP3",106,0)
 S DR(1,101,4)="773.3Security Required;770.7Logical Link;774Routing Logic"
"RTN","HLDTIWP3",107,0)
 S DR(1,101,5)="20Entry Action;15Exit Action;771Process Routine~R"
"RTN","HLDTIWP3",108,0)
 D ^DIE
"RTN","HLDTIWP3",109,0)
 ;UPDATE INDEX
"RTN","HLDTIWP3",110,0)
 S NAME=$P(^ORD(101,PTRCLNT,0),"^",1)
"RTN","HLDTIWP3",111,0)
 S NODE=$G(^ORD(101,PTRCLNT,770))
"RTN","HLDTIWP3",112,0)
 S PTRMSG=+$P(NODE,"^",3)
"RTN","HLDTIWP3",113,0)
 S PTREVNT=+$P(NODE,"^",4)
"RTN","HLDTIWP3",114,0)
 S MSGTYPE=$P($G(^HL(771.2,PTRMSG,0)),"^",1)
"RTN","HLDTIWP3",115,0)
 S EVNTTYPE=$P($G(^HL(779.001,PTREVNT,0)),"^",1)
"RTN","HLDTIWP3",116,0)
 S @CLNTINDX@(ENTRY,PTRCLNT)=NAME_"^"_MSGTYPE_"^"_EVNTTYPE
"RTN","HLDTIWP3",117,0)
 ;UNLOCK ENTRY AND QUIT
"RTN","HLDTIWP3",118,0)
 L -^ORD(101,PTRCLNT)
"RTN","HLDTIWP3",119,0)
 S VALMBCK="R"
"RTN","HLDTIWP3",120,0)
 Q
"RTN","HLDTIWP3",121,0)
DELCLNT ;DELETE CLIENT PROTOCOL
"RTN","HLDTIWP3",122,0)
 ;DECLARE VARIABLES
"RTN","HLDTIWP3",123,0)
 N ENTRY,CLNTINDX,PTRCLNT,TMP
"RTN","HLDTIWP3",124,0)
 S CLNTINDX="^TMP(""HL"",""IW-IDX"","_$J_",""CLNT"")"
"RTN","HLDTIWP3",125,0)
 ;NOTHING TO SELECT FROM
"RTN","HLDTIWP3",126,0)
 I ('$O(@CLNTINDX@(0))) D  Q
"RTN","HLDTIWP3",127,0)
 .W $C(7)
"RTN","HLDTIWP3",128,0)
 .D MSG^VALM10("No client protocols have been defined")
"RTN","HLDTIWP3",129,0)
 .H 3
"RTN","HLDTIWP3",130,0)
 .S VALMBCK="R"
"RTN","HLDTIWP3",131,0)
 .S XQORPOP=1
"RTN","HLDTIWP3",132,0)
 ;CHECK XQORNOD(0) & HLDTIWXQ FOR PRE-SELECTION
"RTN","HLDTIWP3",133,0)
 S ENTRY=$P($P($G(XQORNOD(0)),"^",4),"=",2)
"RTN","HLDTIWP3",134,0)
 S:($G(XQORNOD(0))="") ENTRY=$P($P($G(HLDTIWXQ),"^",4),"=",2)
"RTN","HLDTIWP3",135,0)
 I (ENTRY'="") D
"RTN","HLDTIWP3",136,0)
 .I ((ENTRY[",")!(ENTRY["-")) W $C(7),!,"Only one client protocol can be selected - will use first entry in list" S ENTRY=+ENTRY
"RTN","HLDTIWP3",137,0)
 .I (('ENTRY)!('$D(@CLNTINDX@(ENTRY)))) W $C(7),!,ENTRY," is not a valid selection" S ENTRY=0
"RTN","HLDTIWP3",138,0)
 ;PROMPT FOR SELECTION
"RTN","HLDTIWP3",139,0)
 S:('ENTRY) ENTRY=$$SELECT^HLDTIWU0(CLNTINDX,"Client Protocol")
"RTN","HLDTIWP3",140,0)
 I (('ENTRY)!(ENTRY<0)) S VALMBCK="R",XQORPOP=1 Q
"RTN","HLDTIWP3",141,0)
 ;GET POINTER OUT OF INDEX ARRAY
"RTN","HLDTIWP3",142,0)
 S PTRCLNT=+$O(@CLNTINDX@(ENTRY,""))
"RTN","HLDTIWP3",143,0)
 I ('PTRCLNT) D  Q
"RTN","HLDTIWP3",144,0)
 .W $C(7)
"RTN","HLDTIWP3",145,0)
 .D MSG^VALM10("Unable to determine client protocol being deleted")
"RTN","HLDTIWP3",146,0)
 .H 3
"RTN","HLDTIWP3",147,0)
 .S VALMBCK="R"
"RTN","HLDTIWP3",148,0)
 .S XQORPOP=1
"RTN","HLDTIWP3",149,0)
 ;SWITCH TO FULL SCREEN
"RTN","HLDTIWP3",150,0)
 D FULL^VALM1
"RTN","HLDTIWP3",151,0)
 W !
"RTN","HLDTIWP3",152,0)
 ;VERIFY WITH USER
"RTN","HLDTIWP3",153,0)
 S TMP=$$AREUSURE^HLDTIWU5("delete","client protocol")
"RTN","HLDTIWP3",154,0)
 I ((TMP=0)!(TMP<0)) S VALMBCK="R",XQORPOP=1 Q
"RTN","HLDTIWP3",155,0)
 ;DELETE PROTOCOL
"RTN","HLDTIWP3",156,0)
 S TMP=$$DELPROT^HLDTIWU4(PTRCLNT,1)
"RTN","HLDTIWP3",157,0)
 ;ERROR DELETING
"RTN","HLDTIWP3",158,0)
 I (TMP<0) D  Q
"RTN","HLDTIWP3",159,0)
 .W $C(7)
"RTN","HLDTIWP3",160,0)
 .S VALMSG=$P(TMP,"^",2)
"RTN","HLDTIWP3",161,0)
 .S VALMBCK="R"
"RTN","HLDTIWP3",162,0)
 .S XQORPOP=1
"RTN","HLDTIWP3",163,0)
 ;SUCCESS - DONE
"RTN","HLDTIWP3",164,0)
 S VALMBCK="R"
"RTN","HLDTIWP3",165,0)
 Q
"RTN","HLP14PRE")
0^^B274698
"RTN","HLP14PRE",1,0)
HLP14PRE ;SFIRMFO/JC - HL7 PATCH 14 PRE-INIT ;03/05/98  11:44
"RTN","HLP14PRE",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14**;Oct 13, 1995
"RTN","HLP14PRE",3,0)
PRE ;
"RTN","HLP14PRE",4,0)
 K ^DD(779.001,0,"ID")
"RTN","HLP14PRE",5,0)
 K ^DD(771.2,0,"ID")
"RTN","HLP14PRE",6,0)
 Q
"RTN","HLP14PRE",7,0)
POST ;
"RTN","HLP14PRE",8,0)
 S ^DD(779.001,0,"ID",2)="W "_""""_"   "_""""_",$P(^(0),U,2)"
"RTN","HLP14PRE",9,0)
 S ^DD(771.2,0,"ID",2)="W "_""""_"   "_""""_",$P(^(0),U,2)"
"RTN","HLP14PRE",10,0)
 Q
"RTN","HLSUB")
0^7^B12315657
"RTN","HLSUB",1,0)
HLSUB ;IRMFO-SF/JC - Subscription Registry ;02/12/98  15:31
"RTN","HLSUB",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14**;Jan 29, 1997
"RTN","HLSUB",3,0)
ACT() ;Activate a new subscription
"RTN","HLSUB",4,0)
 ;Returns new file 774 ien (Subscription Control number)
"RTN","HLSUB",5,0)
 ;Returns -1 if error
"RTN","HLSUB",6,0)
 S C=0,X=-1
"RTN","HLSUB",7,0)
LK ;
"RTN","HLSUB",8,0)
 I C>600 Q +X
"RTN","HLSUB",9,0)
 L +^HLS(774,0):1 I '$T S C=C+1 G LK
"RTN","HLSUB",10,0)
 S DLAYGO=774,X=1+$P(^HLS(774,0),U,3),DIC=774,DIC(0)="L" D ^DIC
"RTN","HLSUB",11,0)
 L -^HLS(774,0)
"RTN","HLSUB",12,0)
 Q +Y
"RTN","HLSUB",13,0)
UPD(HLSCN,HLNN,HLTP,HLAD,HLTD,HLRAP,HLER) ;Subscription update
"RTN","HLSUB",14,0)
 ;HLSCN - Subscription Control number, required
"RTN","HLSUB",15,0)
 ;HLNN - Network node (HL7 1.6 Logical Link NAME), required
"RTN","HLSUB",16,0)
 ;HLTP - Subscription type 
"RTN","HLSUB",17,0)
 ;	0 descriptive updates only
"RTN","HLSUB",18,0)
 ; 	1 activates clinical updates
"RTN","HLSUB",19,0)
 ;	2 other (locally defined)
"RTN","HLSUB",20,0)
 ;HLTD - Termination date/time, optional, 'null'=open-ended
"RTN","HLSUB",21,0)
 ;HLAD - Activation date; optional, default 'now'
"RTN","HLSUB",22,0)
 ;HLRAP - Receiving Application
"RTN","HLSUB",23,0)
 ;HLER - Error message array passed by reference
"RTN","HLSUB",24,0)
 ;modification of existing entry triggers archive of previous record
"RTN","HLSUB",25,0)
 ;dates must be external DHCP format
"RTN","HLSUB",26,0)
 K HLER
"RTN","HLSUB",27,0)
 I $G(HLSCN)="" S HLER(1)="Missing subscription control number"
"RTN","HLSUB",28,0)
 I $G(HLNN)="" S HLER(2)="Missing network address."
"RTN","HLSUB",29,0)
 ;I $G(HLRAP)="" S HLER(3)="Missing receiving application."
"RTN","HLSUB",30,0)
 Q:$D(HLER)
"RTN","HLSUB",31,0)
 S HLTP=+$G(HLTP)
"RTN","HLSUB",32,0)
 S HLCD=$$FMTE^XLFDT($$NOW^XLFDT) ;Creation date
"RTN","HLSUB",33,0)
 I $G(HLAD)="" S HLAD=HLCD ;Activation date
"RTN","HLSUB",34,0)
 I '$D(^HLS(774,HLSCN)) S HLER(4)="Invalid Subscription Control number"
"RTN","HLSUB",35,0)
 S DIC=870,DIC(0)="MOX",X=HLNN D ^DIC S:Y<1 HLER(5)="Invalid Logical Link"
"RTN","HLSUB",36,0)
 ;K DIC S DIC=771,DIC(0)="MOX",X=HLRAP D ^DIC S:Y<1 HLER(6)="Invalid receiving application."
"RTN","HLSUB",37,0)
 Q:$D(HLER)
"RTN","HLSUB",38,0)
 S C=0
"RTN","HLSUB",39,0)
ADD ;Lookup and add subscriber (logical link)
"RTN","HLSUB",40,0)
 L +^HLS(774,HLSCN):1 I '$T S C=C+1 Q:C>600  G ADD
"RTN","HLSUB",41,0)
 S DA(1)=HLSCN,DIC="^HLS(774,DA(1),"_"""TO"""_",",DIC("P")=$P(^DD(774,1,0),U,2),X=$G(HLRAP)_"@"_HLNN,DIC(0)="LMZ" D ^DIC
"RTN","HLSUB",42,0)
 I Y<1 L -^HLS(774,HLSCN) Q
"RTN","HLSUB",43,0)
 S HLINKIEN=+Y,HLINK0=Y(0)
"RTN","HLSUB",44,0)
 ;If Updating existing record-archive old record
"RTN","HLSUB",45,0)
 I $P(HLINK0,U)]"" D
"RTN","HLSUB",46,0)
 .K DD,DO
"RTN","HLSUB",47,0)
 .N CD,AD,TD S CD=$P(HLINK0,U,6),AD=$P(HLINK0,U,7),TD=$P(HLINK0,U,8)
"RTN","HLSUB",48,0)
 .S CD=$$FMTE^XLFDT(CD),AD=$$FMTE^XLFDT(AD) I TD]"" S TD=$$FMTE^XLFDT(TD)
"RTN","HLSUB",49,0)
 .S DA(2)=HLSCN,DA(1)=HLINKIEN,X=$$FMTE^XLFDT($$NOW^XLFDT)
"RTN","HLSUB",50,0)
 .S DIC="^HLS(774,DA(2),"_"""TO"""_",DA(1),"_"""HX"""_","
"RTN","HLSUB",51,0)
 .S DIC("DR")="1///^S X=CD;2///^S X=AD;4///^S X=$P(HLINK0,U,5)"
"RTN","HLSUB",52,0)
 .I TD]"" S DIC("DR")=DIC("DR")_";3///^S X=TD"
"RTN","HLSUB",53,0)
 .S DLAYGO=774,DIC(0)="L",DIC("P")=$P(^DD(774.01,8,0),U,2)
"RTN","HLSUB",54,0)
 .D ^DIC
"RTN","HLSUB",55,0)
 .K DIC,DA
"RTN","HLSUB",56,0)
A1 ;bring in update
"RTN","HLSUB",57,0)
 S DA(1)=HLSCN,DA=HLINKIEN,DIE="^HLS(774,DA(1),"_"""TO"""_",",DR="3///^S X=HLNN;4///^S X=HLTP;5///^S X=HLCD;6///^S X=HLAD"
"RTN","HLSUB",58,0)
 I $G(HLRAP)]"" S DR=DR_";1///^S X=HLRAP"
"RTN","HLSUB",59,0)
 I $G(HLTD)]"",HLTD'["@" S HLTD=HLTD_"@0001"
"RTN","HLSUB",60,0)
 I $G(HLTD)=$G(HL("Q")),$P(HLINK0,U,8)]"" S HLTD="@" ;remove termination date
"RTN","HLSUB",61,0)
 I $G(HLTD)]"" S DR=DR_";7///^S X=HLTD"
"RTN","HLSUB",62,0)
 D ^DIE
"RTN","HLSUB",63,0)
 K DIE,DA,DR
"RTN","HLSUB",64,0)
 L -^HLS(774,HLSCN)
"RTN","HLSUB",65,0)
 Q
"RTN","HLSUB",66,0)
GET(HLSCN,HLTP,HLCL,HLL) ;Return active subscribers
"RTN","HLSUB",67,0)
 ;Called by a HL7 ROUTING protocol to return array of subscribers
"RTN","HLSUB",68,0)
 ;Make separate call for each 'type' specified EXCEPT TYPE 0
"RTN","HLSUB",69,0)
 ;type 0 returns both '0' and '1' subscribers 
"RTN","HLSUB",70,0)
 ;HLSCN=SUBSCRIPTION CONTROL NUMBER
"RTN","HLSUB",71,0)
 ;HLTP=SUBSCRIBER TYPE (0,1,2)/Null=all
"RTN","HLSUB",72,0)
 ;HLCL=HL7 CLIENT PROTOCOL (required)
"RTN","HLSUB",73,0)
 ;HLL=HLL("LINKS",x)=CLIENT PROTOCOL^LOGICAL LINK (passed by reference)
"RTN","HLSUB",74,0)
 ;The HLL array is required by the HL7 package
"RTN","HLSUB",75,0)
 N X,I,J,HLINK,HLND Q:'$D(^HLS(774,HLSCN))
"RTN","HLSUB",76,0)
 Q:$G(^HLS(774,HLSCN,0))<1
"RTN","HLSUB",77,0)
 S HLCL=$G(HLCL)
"RTN","HLSUB",78,0)
 I HLCL]"" S DIC=101,DIC(0)="X",X=HLCL D ^DIC Q:+Y<1  K DIC
"RTN","HLSUB",79,0)
 S X="",HLTP=$G(HLTP)
"RTN","HLSUB",80,0)
 I $D(HLL("LINKS")) S X=$O(HLL("LINKS",X),-1)
"RTN","HLSUB",81,0)
 S HLDT=$$NOW^XLFDT
"RTN","HLSUB",82,0)
 S HLND=$NA(^HLS(774,HLSCN,"TO")),I=0 F  S I=$O(@HLND@(I)) Q:I<1  S J=$G(^(I,0)) D
"RTN","HLSUB",83,0)
 .I HLTP'=""&(HLTP'=0) Q:$P(J,U,5)'=HLTP  ;type specified
"RTN","HLSUB",84,0)
 .I HLTP=0 Q:$P(J,U,5)>1  ;return clinical and descriptive
"RTN","HLSUB",85,0)
 .Q:$P(J,U,7)>HLDT  ;Activation date is later
"RTN","HLSUB",86,0)
 .I $P(J,U,8)]"" Q:$P(J,U,8)<HLDT  ;Subscription terminated
"RTN","HLSUB",87,0)
 .S HLINK=$P(^HLCS(870,$P(J,U,4),0),U)
"RTN","HLSUB",88,0)
 .S X=X+1,HLL("LINKS",X)=HLCL_U_HLINK_U_$P(J,U,1,99)
"RTN","HLSUB",89,0)
 Q
"RTN","HLTP")
0^1^B10188010
"RTN","HLTP",1,0)
HLTP ;AISC/SAW-Transaction Processor Module ;04/11/98  15:32
"RTN","HLTP",2,0)
 ;;1.6;HEALTH LEVEL SEVEN;**14**;Oct 13, 1995
"RTN","HLTP",3,0)
GENERATE(HLMID,HLMTIEN,HLEID,HLARYTYP,HLFORMAT,HLRESLT,HLP) ;Generate an
"RTN","HLTP",4,0)
 ;outgoing message
"RTN","HLTP",5,0)
 ;
"RTN","HLTP",6,0)
 ;This is a subroutine call with parameter passing.  It returns a value
"RTN","HLTP",7,0)
 ;in the variable HLRESLT of null if no error occurs, or the following
"RTN","HLTP",8,0)
 ;two piece value if an error occurs:  error code^error description
"RTN","HLTP",9,0)
 ;
"RTN","HLTP",10,0)
 ;Required Input Parameters
"RTN","HLTP",11,0)
 ;     HLMID = Message ID of message being generated
"RTN","HLTP",12,0)
 ;   HLMTIEN = IEN in Message Text file where message being generated
"RTN","HLTP",13,0)
 ;               will be stored
"RTN","HLTP",14,0)
 ;     HLEID = IEN of event driver protocol in the Protocol file
"RTN","HLTP",15,0)
 ;  HLARYTYP = Array type.  One of the following codes:
"RTN","HLTP",16,0)
 ;               LM = local array containing a single message
"RTN","HLTP",17,0)
 ;               LB = local array containig a batch of messages
"RTN","HLTP",18,0)
 ;               GM = global array containing a single message
"RTN","HLTP",19,0)
 ;               GB = global array containing a batch of messages
"RTN","HLTP",20,0)
 ;  HLFORMAT = Format of array, 1 for pre-formatted in HL7 format,
"RTN","HLTP",21,0)
 ;               otherwise 0
"RTN","HLTP",22,0)
 ;NOTE:  The parameter HLRESLT must be passed by reference
"RTN","HLTP",23,0)
 ;   HLRESLT = The variable that will be returned to the calling
"RTN","HLTP",24,0)
 ;               application as descibed above
"RTN","HLTP",25,0)
 ;Optional Parameters
"RTN","HLTP",26,0)
 ;  HLP("PRIORITY") = I for immediate or D for deferred
"RTN","HLTP",27,0)
 ;  HLP("SECURITY") = A 1 to 40 character string
"RTN","HLTP",28,0)
 ;   HLP("CONTPTR") = Continuation pointer, a 1 to 180 character string
"RTN","HLTP",29,0)
 ;  HLP("GROUTINE") = The M code to execute to generate the HL7 message
"RTN","HLTP",30,0)
 ;
"RTN","HLTP",31,0)
 ;Check for required parameters
"RTN","HLTP",32,0)
 I '$G(HLMID)!('$G(HLMTIEN))!('$G(HLEID))!($G(HLARYTYP)']"")!($G(HLFORMAT)']"") S HLRESLT="7^"_$G(^HL(771.7,7,0))_" at GENERATE^HLTP entry point" G EXIT
"RTN","HLTP",33,0)
 ;Extract data from file 101 and store in separate variables
"RTN","HLTP",34,0)
 D EVENT^HLUTIL1(HLEID,770,.HLN) S HLSAN=$P($G(^HL(771,+$P(HLN(770),"^"),0)),"^"),HLQ=""""""
"RTN","HLTP",35,0)
 S:HLP("PRIORITY")']"" HLP("PRIORITY")=$S($P(HLN(770),"^",5)']"":"D",1:$TR($P(HLN(770),"^",5),"id","ID"))
"RTN","HLTP",36,0)
 S HLP("MSGTYPE")=$E(HLARYTYP,2)
"RTN","HLTP",37,0)
 ;Update zero node of Message Text file
"RTN","HLTP",38,0)
 D UPDATE^HLTF0(HLMTIEN,HLMTIEN,"O",HLEID,"",+$P(HLN(770),"^"),HLP("PRIORITY"),"","",.HLP)
"RTN","HLTP",39,0)
 ;Update status to Being Generated
"RTN","HLTP",40,0)
 D STATUS^HLTF0(HLMTIEN,8)
"RTN","HLTP",41,0)
 ;Check that local/global array exists and store in Message Text file
"RTN","HLTP",42,0)
 ; if pre-compiled
"RTN","HLTP",43,0)
 I HLFORMAT D  I $D(HLRESLT) G EXIT
"RTN","HLTP",44,0)
 .I $E(HLARYTYP)="G" D  I $D(HLRESLT) D STATUS^HLTF0(HLMTIEN,5,+HLRESLT) Q
"RTN","HLTP",45,0)
 ..I $O(^TMP("HLS",$J,0))']"" S HLRESLT="8^"_$G(^HL(771.7,8,0)) Q
"RTN","HLTP",46,0)
 ..D MERGE^HLTF1("G",HLMTIEN,"HLS")
"RTN","HLTP",47,0)
 .I $E(HLARYTYP)="L" D  I $D(HLRESLT) D STATUS^HLTF0(HLMTIEN,5,+HLRESLT) Q
"RTN","HLTP",48,0)
 ..I $O(HLA("HLS",0))']"" S HLRESLT="8^"_$G(^HL(771.7,8,0)) Q
"RTN","HLTP",49,0)
 ..D MERGE^HLTF1("L",HLMTIEN,"HLS")
"RTN","HLTP",50,0)
 ;If array is not pre-compiled, call message generation routine
"RTN","HLTP",51,0)
 I 'HLFORMAT N HLERR D  I $D(HLERR) S HLRESLT="9^"_HLERR D STATUS^HLTF0(HLMTIEN,5,9,HLERR) G EXIT
"RTN","HLTP",52,0)
 .S HLP("GROUTINE")=HLP("GROUTINE")_"("_HLMID_","_HLMTIEN_","_HLQ_HLARYTYP_HLQ_","_HLSAN_","_$P($G(^HL(771.2,$P(HLN(770),"^",3),0)),"^")_","_$P($G(^HL(779.001,$P(HLN(770),"^",4),0)),"^")_","_HLQ_$TR($P(HLN(770),"^",6),"id","ID")_HLQ_")"
"RTN","HLTP",53,0)
 .X HLP("GROUTINE")
"RTN","HLTP",54,0)
 ;**CIRN**
"RTN","HLTP",55,0)
 S ZMID=HLMID ; Save original parent message IEN
"RTN","HLTP",56,0)
 I $D(HLL("LINKS")) D FWD^HLCS2 K HLL
"RTN","HLTP",57,0)
 ;If priority is D for deferred, create background task
"RTN","HLTP",58,0)
 ;think again...
"RTN","HLTP",59,0)
 ;I HLP("PRIORITY")="D" D  G EXIT
"RTN","HLTP",60,0)
 .;N ZTRTN,ZTDTH,ZTIO,ZTSAVE
"RTN","HLTP",61,0)
 .;S HLRESLT="",ZTRTN="TASK^HLCS",ZTDTH=$H,ZTIO="",ZTDESC="Deliver deferred message from "_HLSAN,ZTSAVE("HLMTIEN")=HLMTIEN,ZTSAVE("HLEID")=HLEID,ZTSAVE("*")=""
"RTN","HLTP",62,0)
 .;D ^%ZTLOAD
"RTN","HLTP",63,0)
 ;Invoke communication server module to
"RTN","HLTP",64,0)
 ;send message to subscribers
"RTN","HLTP",65,0)
 ;K HLARYTYP,HLFORMAT,HLN,HLP,HLQ
"RTN","HLTP",66,0)
 D SEND^HLCS(HLMTIEN,HLEID,.HLRESLT)
"RTN","HLTP",67,0)
EXIT Q
"SEC","^DIC",774,774,0,"AUDIT")
@
"SEC","^DIC",774,774,0,"DD")
@
"SEC","^DIC",774,774,0,"DEL")
@
"SEC","^DIC",774,774,0,"LAYGO")
@
"SEC","^DIC",774,774,0,"RD")
@
"SEC","^DIC",774,774,0,"WR")
@
"VER")
8^21.0
"^DD",101,101,774,0)
ROUTING LOGIC^K^^774;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",101,101,774,3)
This is Standard MUMPS code.
"^DD",101,101,774,9)
@
"^DD",101,101,774,21,0)
^^9^9^2960924^
"^DD",101,101,774,21,1,0)
This field is similar to the GENERATE/PROCESS ROUTINE field for a given
"^DD",101,101,774,21,2,0)
CLIENT protocol, but is executed only when a message is in an OUTBOUND
"^DD",101,101,774,21,3,0)
state. Normally, HL7 'broadcasts' a message to all subscribers whenever a
"^DD",101,101,774,21,4,0)
message is generated. In some cases, a client may need to receive the
"^DD",101,101,774,21,5,0)
message only if it matches a particular condition. This field permits the
"^DD",101,101,774,21,6,0)
application to set up screening logic to interpret the message and
"^DD",101,101,774,21,7,0)
generate a supplemental list of 'recipients' known to be interested in the
"^DD",101,101,774,21,8,0)
data when it meets these conditions. The result of this routine should be
"^DD",101,101,774,21,9,0)
the creation of the HLL("LINKS") array.  
"^DD",101,101,774,"DT")
2960924
"^DD",771.2,771.2,0)
FIELD^^3^3
"^DD",771.2,771.2,0,"DDA")
N
"^DD",771.2,771.2,0,"DT")
2940727
"^DD",771.2,771.2,0,"IX","B",771.2,.01)

"^DD",771.2,771.2,0,"NM","HL7 MESSAGE TYPE")

"^DD",771.2,771.2,0,"PT",101,770.11)

"^DD",771.2,771.2,0,"PT",101,770.3)

"^DD",771.2,771.2,0,"PT",771.06,.01)

"^DD",771.2,771.2,0,"PT",775,10)

"^DD",771.2,771.2,0,"PT",775,19)

"^DD",771.2,771.2,0,"VRPK")
HL
"^DD",771.2,771.2,.01,0)
ABBREVIATED NAME^RF^^0;1^K:$L(X)>3!($L(X)<3)!'(X'?1P.E) X
"^DD",771.2,771.2,.01,1,0)
^.1
"^DD",771.2,771.2,.01,1,1,0)
771.2^B
"^DD",771.2,771.2,.01,1,1,1)
S ^HL(771.2,"B",$E(X,1,30),DA)=""
"^DD",771.2,771.2,.01,1,1,2)
K ^HL(771.2,"B",$E(X,1,30),DA)
"^DD",771.2,771.2,.01,1,1,"%D",0)
^^1^1^2910930^
"^DD",771.2,771.2,.01,1,1,"%D",1,0)
Regular 'B' cross reference.
"^DD",771.2,771.2,.01,3)
The three character HL7 message type abbreviation (e.g., MSH).  Answer must be 3 characters in length.
"^DD",771.2,771.2,.01,21,0)
^^1^1^2930505^
"^DD",771.2,771.2,.01,21,1,0)
The three character HL7 message type abbreviation (e.g., MSH).
"^DD",771.2,771.2,.01,"DT")
2910818
"^DD",771.2,771.2,2,0)
FULL NAME^RF^^0;2^K:$L(X)>40!($L(X)<3) X
"^DD",771.2,771.2,2,3)
The full name of the segment type.  Answer must be 3-40 characters in length.
"^DD",771.2,771.2,2,21,0)
^^1^1^2930505^
"^DD",771.2,771.2,2,21,1,0)
The full HL7 message type name (e.g., Message Header).
"^DD",771.2,771.2,2,"DT")
2940727
"^DD",771.2,771.2,3,0)
VERSION^771.23P^^V;0
"^DD",771.2,771.23,0)
VERSION SUB-FIELD^^.01^1
"^DD",771.2,771.23,0,"DT")
2940727
"^DD",771.2,771.23,0,"IX","B",771.23,.01)

"^DD",771.2,771.23,0,"NM","VERSION")

"^DD",771.2,771.23,0,"UP")
771.2
"^DD",771.2,771.23,.01,0)
VERSION^RP771.5'^HL(771.5,^0;1^Q
"^DD",771.2,771.23,.01,1,0)
^.1
"^DD",771.2,771.23,.01,1,1,0)
771.23^B
"^DD",771.2,771.23,.01,1,1,1)
S ^HL(771.2,DA(1),"V","B",$E(X,1,30),DA)=""
"^DD",771.2,771.23,.01,1,1,2)
K ^HL(771.2,DA(1),"V","B",$E(X,1,30),DA)
"^DD",771.2,771.23,.01,3)
The versions of the standard that support this message type.
"^DD",771.2,771.23,.01,"DT")
2940727
"^DD",771.5,771.5,0)
FIELD^^2^2
"^DD",771.5,771.5,0,"DDA")
N
"^DD",771.5,771.5,0,"DT")
2940928
"^DD",771.5,771.5,0,"ID",2)
S %I=Y,Y=$S('$D(^(0)):"",$D(^HL(771.8,+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(771.8,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",771.5,771.5,0,"IX","B",771.5,.01)

"^DD",771.5,771.5,0,"NM","HL7 VERSION")

"^DD",771.5,771.5,0,"PT",101,770.95)

"^DD",771.5,771.5,0,"PT",770,7)

"^DD",771.5,771.5,0,"PT",771.12,.01)

"^DD",771.5,771.5,0,"PT",771.23,.01)

"^DD",771.5,771.5,0,"PT",771.33,.01)

"^DD",771.5,771.5,0,"PT",771.43,.01)

"^DD",771.5,771.5,0,"PT",775,14)

"^DD",771.5,771.5,0,"PT",779.00201,.01)

"^DD",771.5,771.5,0,"PT",779.00301,.01)

"^DD",771.5,771.5,0,"PT",779.00401,.01)

"^DD",771.5,771.5,0,"PT",779.0101,.01)

"^DD",771.5,771.5,0,"VRPK")
HL
"^DD",771.5,771.5,.01,0)
VERSION^RF^^0;1^K:$L(X)>8!($L(X)<1) X
"^DD",771.5,771.5,.01,1,0)
^.1
"^DD",771.5,771.5,.01,1,1,0)
771.5^B
"^DD",771.5,771.5,.01,1,1,1)
S ^HL(771.5,"B",$E(X,1,30),DA)=""
"^DD",771.5,771.5,.01,1,1,2)
K ^HL(771.5,"B",$E(X,1,30),DA)
"^DD",771.5,771.5,.01,1,1,"%D",0)
^^1^1^2910930^
"^DD",771.5,771.5,.01,1,1,"%D",1,0)
Regular 'B' cross reference.
"^DD",771.5,771.5,.01,3)
Answer must be 1-8 characters in length.
"^DD",771.5,771.5,.01,21,0)
^^1^1^2940928^^^
"^DD",771.5,771.5,.01,21,1,0)
An HL7 version number (e.g., 2.1).
"^DD",771.5,771.5,.01,"DT")
2940928
"^DD",771.5,771.5,2,0)
STANDARD^RP771.8'^HL(771.8,^0;2^Q
"^DD",771.5,771.5,2,3)
The standard to which this version number refers.
"^DD",771.5,771.5,2,"DT")
2940706
"^DD",774,774,0)
FIELD^^1^2
"^DD",774,774,0,"DT")
2970430
"^DD",774,774,0,"IX","B",774,.01)

"^DD",774,774,0,"IX","C",774.01,3)

"^DD",774,774,0,"NM","SUBSCRIPTION CONTROL")

"^DD",774,774,0,"PT",775,4)

"^DD",774,774,0,"VRPK")
HL
"^DD",774,774,.01,0)
NUMBER^RNJ8,0X^^0;1^K:+X'=X!(X>99999999)!(X<1)!(X?.E1"."1N.N) X S:$D(X) DINUM=X
"^DD",774,774,.01,1,0)
^.1
"^DD",774,774,.01,1,1,0)
774^B
"^DD",774,774,.01,1,1,1)
S ^HLS(774,"B",$E(X,1,30),DA)=""
"^DD",774,774,.01,1,1,2)
K ^HLS(774,"B",$E(X,1,30),DA)
"^DD",774,774,.01,3)
Type a Number between 1 and 99999999, 0 Decimal Digits
"^DD",774,774,.01,21,0)
^^1^1^2971215^^
"^DD",774,774,.01,21,1,0)
A new entry in this file is created by making a call to $$ACT^HLSUB.
"^DD",774,774,.01,"DT")
2971215
"^DD",774,774,1,0)
DESTINATION^774.01^^TO;0
"^DD",774,774.01,0)
DESTINATION SUB-FIELD^^8^9
"^DD",774,774.01,0,"DT")
2970430
"^DD",774,774.01,0,"IX","B",774.01,.01)

"^DD",774,774.01,0,"NM","DESTINATION")

"^DD",774,774.01,0,"UP")
774
"^DD",774,774.01,.01,0)
DESTINATION^MF^^0;1^K:$L(X)>180!($L(X)<1) X
"^DD",774,774.01,.01,1,0)
^.1
"^DD",774,774.01,.01,1,1,0)
774.01^B
"^DD",774,774.01,.01,1,1,1)
S ^HLS(774,DA(1),"TO","B",$E(X,1,30),DA)=""
"^DD",774,774.01,.01,1,1,2)
K ^HLS(774,DA(1),"TO","B",$E(X,1,30),DA)
"^DD",774,774.01,.01,3)
Answer must be 1-180 characters in length.
"^DD",774,774.01,.01,21,0)
^^6^6^2970502^
"^DD",774,774.01,.01,21,1,0)
This is the full network path to the receiving application. It uses a
"^DD",774,774.01,.01,21,2,0)
format similar to a mail address:
"^DD",774,774.01,.01,21,3,0)
 
"^DD",774,774.01,.01,21,4,0)
RECEIVING APP@DOMAIN
"^DD",774,774.01,.01,21,5,0)
 (OR)
"^DD",774,774.01,.01,21,6,0)
RECEIVING APP@LOGICAL LINK
"^DD",774,774.01,.01,"DT")
2970428
"^DD",774,774.01,1,0)
RECEIVING APPLICATION^P771'^HL(771,^0;2^Q
"^DD",774,774.01,1,"DT")
2970428
"^DD",774,774.01,2,0)
DOMAIN^P4.2'^DIC(4.2,^0;3^Q
"^DD",774,774.01,2,21,0)
^^1^1^2970502^
"^DD",774,774.01,2,21,1,0)
This field is reserved for future use.
"^DD",774,774.01,2,"DT")
2970428
"^DD",774,774.01,3,0)
LOGICAL LINK^P870'^HLCS(870,^0;4^Q
"^DD",774,774.01,3,1,0)
^.1
"^DD",774,774.01,3,1,1,0)
774^C
"^DD",774,774.01,3,1,1,1)
S ^HLS(774,"C",$E(X,1,30),DA(1),DA)=""
"^DD",774,774.01,3,1,1,2)
K ^HLS(774,"C",$E(X,1,30),DA(1),DA)
"^DD",774,774.01,3,1,1,"DT")
2980429
"^DD",774,774.01,3,21,0)
^^1^1^2970502^
"^DD",774,774.01,3,21,1,0)
This contains the HL7 1.6 address of the receiving system.
"^DD",774,774.01,3,"DT")
2980429
"^DD",774,774.01,4,0)
TYPE^S^0:Patient Descriptive Only;1:Patient Clinical and Descriptive;2:Other;^0;5^Q
"^DD",774,774.01,4,"DT")
2970428
"^DD",774,774.01,5,0)
CREATION DATE/TIME^D^^0;6^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",774,774.01,5,"DT")
2970428
"^DD",774,774.01,6,0)
ACTIVATION DATE/TIME^D^^0;7^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",774,774.01,6,"DT")
2970428
"^DD",774,774.01,7,0)
TERMINATION DATE/TIME^D^^0;8^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",774,774.01,7,"DT")
2970428
"^DD",774,774.01,8,0)
MODIFICATION DATE/TIME^774.18DA^^HX;0
"^DD",774,774.18,0)
MODIFICATION DATE/TIME SUB-FIELD^^4^5
"^DD",774,774.18,0,"DT")
2970428
"^DD",774,774.18,0,"IX","B",774.18,.01)

"^DD",774,774.18,0,"NM","MODIFICATION DATE/TIME")

"^DD",774,774.18,0,"UP")
774.01
"^DD",774,774.18,.01,0)
MODIFICATION DATE/TIME^MD^^0;1^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",774,774.18,.01,1,0)
^.1
"^DD",774,774.18,.01,1,1,0)
774.18^B
"^DD",774,774.18,.01,1,1,1)
S ^HLS(774,DA(2),"TO",DA(1),"HX","B",$E(X,1,30),DA)=""
"^DD",774,774.18,.01,1,1,2)
K ^HLS(774,DA(2),"TO",DA(1),"HX","B",$E(X,1,30),DA)
"^DD",774,774.18,.01,"DT")
2970428
"^DD",774,774.18,1,0)
LAST CREATION DATE/TIME^D^^0;2^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",774,774.18,1,"DT")
2970428
"^DD",774,774.18,2,0)
LAST ACTIVATION DATE/TIME^D^^0;3^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",774,774.18,2,"DT")
2970428
"^DD",774,774.18,3,0)
LAST TERMINATION DATE/TIME^D^^0;4^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",774,774.18,3,"DT")
2970428
"^DD",774,774.18,4,0)
LAST SUBSCRIPTION TYPE^S^0:Patient Descriptive Only;1:Patient Clinical and Descriptive;2:Other;^0;5^Q
"^DD",774,774.18,4,"DT")
2970428
"^DD",779.001,779.001,0)
FIELD^^100^3
"^DD",779.001,779.001,0,"DDA")
N
"^DD",779.001,779.001,0,"DT")
2960925
"^DD",779.001,779.001,0,"IX","B",779.001,.01)

"^DD",779.001,779.001,0,"NM","HL7 EVENT TYPE CODE")

"^DD",779.001,779.001,0,"PT",101,770.12)

"^DD",779.001,779.001,0,"PT",101,770.4)

"^DD",779.001,779.001,0,"PT",775,11)

"^DD",779.001,779.001,0,"PT",775,20)

"^DD",779.001,779.001,0,"VRPK")
HL
"^DD",779.001,779.001,.01,0)
CODE^RF^^0;1^K:$L(X)>3!($L(X)<3)!'(X'?1P.E) X
"^DD",779.001,779.001,.01,1,0)
^.1
"^DD",779.001,779.001,.01,1,1,0)
779.001^B
"^DD",779.001,779.001,.01,1,1,1)
S ^HL(779.001,"B",$E(X,1,30),DA)=""
"^DD",779.001,779.001,.01,1,1,2)
K ^HL(779.001,"B",$E(X,1,30),DA)
"^DD",779.001,779.001,.01,3)
Enter the 3 character code for the event
"^DD",779.001,779.001,.01,"DT")
2940722
"^DD",779.001,779.001,2,0)
DESCRIPTION^RF^^0;2^K:$L(X)>80!($L(X)<3) X
"^DD",779.001,779.001,2,3)
Answer must be 3-80 characters in length.
"^DD",779.001,779.001,2,"DT")
2960925
"^DD",779.001,779.001,100,0)
VERSION^779.0101P^^1;0
"^DD",779.001,779.0101,0)
VERSION SUB-FIELD^^.01^1
"^DD",779.001,779.0101,0,"DT")
2940722
"^DD",779.001,779.0101,0,"IX","B",779.0101,.01)

"^DD",779.001,779.0101,0,"NM","VERSION")

"^DD",779.001,779.0101,0,"UP")
779.001
"^DD",779.001,779.0101,.01,0)
VERSION^RP771.5'^HL(771.5,^0;1^Q
"^DD",779.001,779.0101,.01,1,0)
^.1
"^DD",779.001,779.0101,.01,1,1,0)
779.0101^B
"^DD",779.001,779.0101,.01,1,1,1)
S ^HL(779.001,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",779.001,779.0101,.01,1,1,2)
K ^HL(779.001,DA(1),1,"B",$E(X,1,30),DA)
"^DD",779.001,779.0101,.01,3)
The version(s) of the standard in which this event type code is used.
"^DD",779.001,779.0101,.01,"DT")
2940722
"^DD",869.2,869.2,400.01,0)
TCP/IP ADDRESS^Fa^^400;1^K:$L(X)>40!($L(X)<7) X
"^DD",869.2,869.2,400.01,3)
Enter the TCP/IP address for the remote host
"^DD",869.2,869.2,400.01,"AUDIT")
y
"^DD",869.2,869.2,400.01,"DT")
2950720
"^DD",869.2,869.2,400.02,0)
TCP/IP PORT^NJ5,0a^^400;2^K:+X'=X!(X>65535)!(X<1)!(X?.E1"."1N.N) X
"^DD",869.2,869.2,400.02,3)
Enter the TCP/IP port
"^DD",869.2,869.2,400.02,"AUDIT")
y
"^DD",869.2,869.2,400.02,"DT")
2950720
"^DD",869.2,869.2,400.03,0)
TCP/IP SERVICE TYPE^S^C:CLIENT (SENDER);S:SINGLE LISTENER;M:MULTI LISTENER;^400;3^Q
"^DD",869.2,869.2,400.03,21,0)
^^13^13^2980922^
"^DD",869.2,869.2,400.03,21,1,0)
This field determines if the Logical Link is the client (sender) or
"^DD",869.2,869.2,400.03,21,2,0)
a listener (server) of a message.  Choose from:
"^DD",869.2,869.2,400.03,21,3,0)
 CLIENT (SENDER):
"^DD",869.2,869.2,400.03,21,4,0)
  Indicates that this Logical Link connects to a target system, with
"^DD",869.2,869.2,400.03,21,5,0)
  the current system acting as the sender.
"^DD",869.2,869.2,400.03,21,6,0)
 
"^DD",869.2,869.2,400.03,21,7,0)
 SINGLE LISTENER:
"^DD",869.2,869.2,400.03,21,8,0)
  Designates that the current system is a server (listener), using a
"^DD",869.2,869.2,400.03,21,9,0)
  single M process to do the listening.
"^DD",869.2,869.2,400.03,21,10,0)
 
"^DD",869.2,869.2,400.03,21,11,0)
 MULTI LISTENER:
"^DD",869.2,869.2,400.03,21,12,0)
  Designates that the current system is a server (listener), creating
"^DD",869.2,869.2,400.03,21,13,0)
  multiple background processes.
"^DD",869.2,869.2,400.03,"DT")
2980922
"^DD",869.2,869.2,400.04,0)
PERSISTENT^S^Y:YES;N:NO;^400;4^Q
"^DD",869.2,869.2,400.04,21,0)
^^3^3^2980922^^
"^DD",869.2,869.2,400.04,21,1,0)
Enter 'YES' if this connection needs to remain open even if there is
"^DD",869.2,869.2,400.04,21,2,0)
no messages to send.  The connection will remain open until it is
"^DD",869.2,869.2,400.04,21,3,0)
disconnected by either side via shutting-down the logical link.
"^DD",869.2,869.2,400.04,"DT")
2980917
"^DD",869.2,869.2,400.06,0)
STARTUP NODE^P14.7'^%ZIS(14.7,^400;6^Q
"^DD",869.2,869.2,400.06,3)
Enter the Taskman node to start this LLP on.
"^DD",869.2,869.2,400.06,21,0)
^^7^7^2980305^
"^DD",869.2,869.2,400.06,21,1,0)
This field is ONLY for VMS sites running Dual Taskman in DCL.
"^DD",869.2,869.2,400.06,21,2,0)
 
"^DD",869.2,869.2,400.06,21,3,0)
This field is used to specify what Taskman node you want to job
"^DD",869.2,869.2,400.06,21,4,0)
the Lower Level Protocol.  It should only be used if you have two
"^DD",869.2,869.2,400.06,21,5,0)
Taskmans running and only want the LLP to run on a particular node.
"^DD",869.2,869.2,400.06,21,6,0)
It will only work if you are running the dual Taskmans in DCL context
"^DD",869.2,869.2,400.06,21,7,0)
on a VMS system.
"^DD",869.2,869.2,400.06,"DT")
2980305
"^DD",870,870,.02,0)
INSTITUTION^P4'^DIC(4,^0;2^Q
"^DD",870,870,.02,1,0)
^.1
"^DD",870,870,.02,1,1,0)
870^C
"^DD",870,870,.02,1,1,1)
S ^HLCS(870,"C",$E(X,1,30),DA)=""
"^DD",870,870,.02,1,1,2)
K ^HLCS(870,"C",$E(X,1,30),DA)
"^DD",870,870,.02,1,1,"DT")
2970123
"^DD",870,870,.02,21,0)
^^7^7^2980810^^
"^DD",870,870,.02,21,1,0)
It may be necessary for an application to determine the appropriate link
"^DD",870,870,.02,21,2,0)
to use when the only information it has is the institution. This field is
"^DD",870,870,.02,21,3,0)
used to associate a link with that institution. More than one link can be
"^DD",870,870,.02,21,4,0)
associated with a single institution. However, if the institution is used
"^DD",870,870,.02,21,5,0)
to resolve related links, a message will be broadcast to all links
"^DD",870,870,.02,21,6,0)
returned. Generally, there should be a 1:1 correspondence between
"^DD",870,870,.02,21,7,0)
institution and logical link.
"^DD",870,870,.02,"DT")
2970123
"^DD",870,870,.03,0)
DOMAIN^P4.2'X^DIC(4.2,^0;7^K:$O(^HLCS(870,"D",X,0)) X
"^DD",870,870,.03,1,0)
^.1
"^DD",870,870,.03,1,1,0)
870^D
"^DD",870,870,.03,1,1,1)
S ^HLCS(870,"D",$E(X,1,30),DA)=""
"^DD",870,870,.03,1,1,2)
K ^HLCS(870,"D",$E(X,1,30),DA)
"^DD",870,870,.03,1,1,"DT")
2980321
"^DD",870,870,.03,3)
Enter the Mailman domain corresponding to this link.
"^DD",870,870,.03,21,0)
^^5^5^2980428^
"^DD",870,870,.03,21,1,0)
If this is a remote facility, enter the corresponding domain name. This
"^DD",870,870,.03,21,2,0)
usually would not apply to a local, departmental system. There is a
"^DD",870,870,.03,21,3,0)
one-to-one correspondence of Domain name to Logical Link. If the domain is
"^DD",870,870,.03,21,4,0)
already in use, review your current setup. Either change the original use
"^DD",870,870,.03,21,5,0)
of the domain or create a new domain to represent this link.
"^DD",870,870,.03,"DT")
2980428
"^DD",870,870,4.5,0)
AUTOSTART^S^0:Disabled;1:Enabled;^0;6^Q
"^DD",870,870,4.5,21,0)
^^2^2^2961120^
"^DD",870,870,4.5,21,1,0)
This field permits the link to be restarted by Taskman after a system
"^DD",870,870,4.5,21,2,0)
reboot. If disabled, the link will not be restarted.
"^DD",870,870,4.5,"DT")
2961120
"^DIC",771.2,771.2,0)
HL7 MESSAGE TYPE^771.2I
"^DIC",771.2,771.2,0,"GL")
^HL(771.2,
"^DIC",771.2,771.2,"%D",0)
^^1^1^2940930^^^^
"^DIC",771.2,771.2,"%D",1,0)
A list of message types supported by the system.
"^DIC",771.2,"B","HL7 MESSAGE TYPE",771.2)

"^DIC",771.5,771.5,0)
HL7 VERSION^771.5I
"^DIC",771.5,771.5,0,"GL")
^HL(771.5,
"^DIC",771.5,771.5,"%D",0)
^^1^1^2950222^^^^
"^DIC",771.5,771.5,"%D",1,0)
A list of versions of standard protocols supported by the system.
"^DIC",771.5,"B","HL7 VERSION",771.5)

"^DIC",774,774,0)
SUBSCRIPTION CONTROL^774
"^DIC",774,774,0,"GL")
^HLS(774,
"^DIC",774,774,"%D",0)
^^35^35^2970502^
"^DIC",774,774,"%D",1,0)
This file is used to control the flow of messages from one system to
"^DIC",774,774,"%D",2,0)
another. It is currently used by CIRN to permit sites to subscribe via HL7
"^DIC",774,774,"%D",3,0)
Master File updates to patient information. This subscription 'request'
"^DIC",774,774,"%D",4,0)
message contains the data necessary to update the Subscription Control
"^DIC",774,774,"%D",5,0)
file via the api:
"^DIC",774,774,"%D",6,0)
 
"^DIC",774,774,"%D",7,0)
UPD^HLSUB(HLSCN,HLNN,HLTP,HLAD,HLTD,HLRAP,.HLER)
"^DIC",774,774,"%D",8,0)
 
"^DIC",774,774,"%D",9,0)
HLSCN-subscription control number
"^DIC",774,774,"%D",10,0)
HLNN-Logical Link name
"^DIC",774,774,"%D",11,0)
HLTP-subscription type
"^DIC",774,774,"%D",12,0)
       0-patient descriptive only
"^DIC",774,774,"%D",13,0)
       1-patient clinical and descriptive
"^DIC",774,774,"%D",14,0)
       2-other (locally defined)
"^DIC",774,774,"%D",15,0)
HLAD-activation date
"^DIC",774,774,"%D",16,0)
HLTD-termination date (optional)
"^DIC",774,774,"%D",17,0)
HLRAP-HL7 receiving application
"^DIC",774,774,"%D",18,0)
HLER-error messages (pass by reference)
"^DIC",774,774,"%D",19,0)
 
"^DIC",774,774,"%D",20,0)
The patient file maintains a pointer to this file. When a clinical event
"^DIC",774,774,"%D",21,0)
takes place pertaining to a particular patient, the subscription control
"^DIC",774,774,"%D",22,0)
number is looked up in the patient file, then a call is made to return the
"^DIC",774,774,"%D",23,0)
current list of subscribers using:
"^DIC",774,774,"%D",24,0)
 
"^DIC",774,774,"%D",25,0)
GET^HLSUB(HLSCN,HLTP,HLCL,.HLL)
"^DIC",774,774,"%D",26,0)
 
"^DIC",774,774,"%D",27,0)
HLSCN-subscription control number
"^DIC",774,774,"%D",28,0)
HLTP-subscription type (null returns ALL)
"^DIC",774,774,"%D",29,0)
HLCL-HL7 1.6 client protocol (optional, returned in first piece of return
"^DIC",774,774,"%D",30,0)
     array.
"^DIC",774,774,"%D",31,0)
HLL-return array. Always in format HLL("LINKS",n)=CLIENT^LOGICAL
"^DIC",774,774,"%D",32,0)
     LINK^remainder of node data
"^DIC",774,774,"%D",33,0)
 
"^DIC",774,774,"%D",34,0)
HL7 1.6, Patch 14 provides additional documentation on the HLL array and
"^DIC",774,774,"%D",35,0)
dynamic addressing in general.
"^DIC",774,"B","SUBSCRIPTION CONTROL",774)

"^DIC",779.001,779.001,0)
HL7 EVENT TYPE CODE^779.001I
"^DIC",779.001,779.001,0,"GL")
^HL(779.001,
"^DIC",779.001,779.001,"%D",0)
^^4^4^2941116^
"^DIC",779.001,779.001,"%D",1,0)
This file is a table of event codes that are used by the Messaging
"^DIC",779.001,779.001,"%D",2,0)
System.
"^DIC",779.001,779.001,"%D",3,0)
 
"^DIC",779.001,779.001,"%D",4,0)
This file should not be modified locally.
"^DIC",779.001,"B","HL7 EVENT TYPE CODE",779.001)

**END**
**END**

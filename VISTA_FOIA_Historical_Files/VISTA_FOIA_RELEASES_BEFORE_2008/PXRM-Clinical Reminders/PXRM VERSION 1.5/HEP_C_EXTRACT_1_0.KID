KIDS Distribution saved on Aug 29, 2000@10:57:42
Hepatitis C Extract 1.0
**KIDS**:HEPATITIS C EXTRACT 1.0^PSO*7.0*45^PSJ*5.0*48^PXRM*1.5*1^LR*5.2*260^

**INSTALL NAME**
HEPATITIS C EXTRACT 1.0
"BLD",2472,0)
HEPATITIS C EXTRACT 1.0^^1^3000829^n
"BLD",2472,1,0)
^^46^46^3000829^
"BLD",2472,1,1,0)
This build includes the following patches:
"BLD",2472,1,2,0)
 
"BLD",2472,1,3,0)
   PSO*7*45
"BLD",2472,1,4,0)
   PSJ*5*48
"BLD",2472,1,5,0)
   PXRM*1.5*1
"BLD",2472,1,6,0)
   LR*5.2*260  
"BLD",2472,1,7,0)
 
"BLD",2472,1,8,0)
The patch to the Laboratory package does not contain any changes to the
"BLD",2472,1,9,0)
VISTA BLOOD BANK software as defined by VHA DIRECTIVE 99-053 titled VISTA
"BLD",2472,1,10,0)
BLOOD BANK SOFTWARE.
"BLD",2472,1,11,0)
 
"BLD",2472,1,12,0)
Integrated Build Description:
"BLD",2472,1,13,0)
============================
"BLD",2472,1,14,0)
 
"BLD",2472,1,15,0)
The Hepatitis C Extract project was created to meet Hepatitis C Initiative
"BLD",2472,1,16,0)
requirements. The House Veterans Affairs Committee requires periodic
"BLD",2472,1,17,0)
reporting by Veterans Health Administration (VHA) on progress toward
"BLD",2472,1,18,0)
screening all veterans for Hepatitis C Virus (HCV). The VHA Headquarters
"BLD",2472,1,19,0)
Infectious Disease Program Office will provide the periodic reports.
"BLD",2472,1,20,0)
These reports will be based on HCV information extracted from VHA
"BLD",2472,1,21,0)
facilities and stored in the Emerging Pathogens Initiative (EPI) database
"BLD",2472,1,22,0)
located at the Austin Automation Center (AAC). The HCV information
"BLD",2472,1,23,0)
includes Hepatitis C risk assessment, laboratory tests, and medications
"BLD",2472,1,24,0)
provided to the veteran population. Tracking this information will allow
"BLD",2472,1,25,0)
the Infectious Disease Program Office to respond to Congressional queries
"BLD",2472,1,26,0)
about HCV veteran care. 
"BLD",2472,1,27,0)
 
"BLD",2472,1,28,0)
This project consists of four patches that work together to accomplish EPI
"BLD",2472,1,29,0)
search, extraction, and reporting requirements for Hepatitis A, B, and C: 
"BLD",2472,1,30,0)
 
"BLD",2472,1,31,0)
        PXRM*1.5*1      Hepatitis C Extract
"BLD",2472,1,32,0)
        LR*5.2*260      Hepatitis C Extract
"BLD",2472,1,33,0)
        PSJ*5*48        Hepatitis C Extract
"BLD",2472,1,34,0)
        PSO*7*45        Hepatitis C Extract
"BLD",2472,1,35,0)
 
"BLD",2472,1,36,0)
These patches are combined into a single build for ease of installation at
"BLD",2472,1,37,0)
VHA facilities: HEP_C_EXTRACT_1_0.KID
"BLD",2472,1,38,0)
 
"BLD",2472,1,39,0)
Documentation is available in Portable Document Format (PDF):
"BLD",2472,1,40,0)
Hepatitis C Extract Installation and Setup Guide        PXRMP1.PDF
"BLD",2472,1,41,0)
Laboratory Search/Extract Technical and User Guide      LR_260TUG.PDF
"BLD",2472,1,42,0)
 
"BLD",2472,1,43,0)
The build and documentation are available at the following locations:
"BLD",2472,1,44,0)
Albany          152.127.1.5     anonymous.software
"BLD",2472,1,45,0)
Hines           152.129.1.110   anonymous.software
"BLD",2472,1,46,0)
Salt Lake City  152.131.2.1     anonymous.software
"BLD",2472,10,0)
^9.63^4^4
"BLD",2472,10,1,0)
PSO*7.0*45^1
"BLD",2472,10,2,0)
PSJ*5.0*48^1
"BLD",2472,10,3,0)
PXRM*1.5*1^1
"BLD",2472,10,4,0)
LR*5.2*260^1
"BLD",2472,10,"B","LR*5.2*260",4)

"BLD",2472,10,"B","PSJ*5.0*48",2)

"BLD",2472,10,"B","PSO*7.0*45",1)

"BLD",2472,10,"B","PXRM*1.5*1",3)

"BLD",2472,"KRN",0)
^9.67PA^19^17
"BLD",2472,"KRN",.4,0)
.4
"BLD",2472,"KRN",.401,0)
.401
"BLD",2472,"KRN",.402,0)
.402
"BLD",2472,"KRN",.403,0)
.403
"BLD",2472,"KRN",.5,0)
.5
"BLD",2472,"KRN",.84,0)
.84
"BLD",2472,"KRN",3.6,0)
3.6
"BLD",2472,"KRN",3.8,0)
3.8
"BLD",2472,"KRN",9.2,0)
9.2
"BLD",2472,"KRN",9.8,0)
9.8
"BLD",2472,"KRN",19,0)
19
"BLD",2472,"KRN",19.1,0)
19.1
"BLD",2472,"KRN",101,0)
101
"BLD",2472,"KRN",409.61,0)
409.61
"BLD",2472,"KRN",771,0)
771
"BLD",2472,"KRN",870,0)
870
"BLD",2472,"KRN",8994,0)
8994
"BLD",2472,"KRN","B",.4,.4)

"BLD",2472,"KRN","B",.401,.401)

"BLD",2472,"KRN","B",.402,.402)

"BLD",2472,"KRN","B",.403,.403)

"BLD",2472,"KRN","B",.5,.5)

"BLD",2472,"KRN","B",.84,.84)

"BLD",2472,"KRN","B",3.6,3.6)

"BLD",2472,"KRN","B",3.8,3.8)

"BLD",2472,"KRN","B",9.2,9.2)

"BLD",2472,"KRN","B",9.8,9.8)

"BLD",2472,"KRN","B",19,19)

"BLD",2472,"KRN","B",19.1,19.1)

"BLD",2472,"KRN","B",101,101)

"BLD",2472,"KRN","B",409.61,409.61)

"BLD",2472,"KRN","B",771,771)

"BLD",2472,"KRN","B",870,870)

"BLD",2472,"KRN","B",8994,8994)

"MBREQ")
0
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"VER")
8.0^22.0
**INSTALL NAME**
PSO*7.0*45
"BLD",1449,0)
PSO*7.0*45^OUTPATIENT PHARMACY^0^3000828^y
"BLD",1449,1,0)
^^7^7^3000828^
"BLD",1449,1,1,0)
PSO*7*45 provides an API for the Clinical Reminders package.  The API
"BLD",1449,1,2,0)
provides patient and prescription information, based on a specified date
"BLD",1449,1,3,0)
range and a specified list of medications, as it relates to the Hepatitis
"BLD",1449,1,4,0)
C Initiative. This patch will not affect users of the Outpatient Pharmacy
"BLD",1449,1,5,0)
package. The PSOORAPI routine in patch PSO*7*45 provides an entry point
"BLD",1449,1,6,0)
that returns patient and prescription information in a ^TMP global to the
"BLD",1449,1,7,0)
Clinical Reminders package, based on the criteria passed into the call. 
"BLD",1449,4,0)
^9.64PA^^
"BLD",1449,"KRN",0)
^9.67PA^19^17
"BLD",1449,"KRN",.4,0)
.4
"BLD",1449,"KRN",.4,"NM",0)
^9.68A^^0
"BLD",1449,"KRN",.401,0)
.401
"BLD",1449,"KRN",.401,"NM",0)
^9.68A^^0
"BLD",1449,"KRN",.402,0)
.402
"BLD",1449,"KRN",.402,"NM",0)
^9.68A^^0
"BLD",1449,"KRN",.403,0)
.403
"BLD",1449,"KRN",.5,0)
.5
"BLD",1449,"KRN",.5,"NM",0)
^9.68A^^0
"BLD",1449,"KRN",.84,0)
.84
"BLD",1449,"KRN",3.6,0)
3.6
"BLD",1449,"KRN",3.8,0)
3.8
"BLD",1449,"KRN",3.8,"NM",0)
^9.68A^^0
"BLD",1449,"KRN",9.2,0)
9.2
"BLD",1449,"KRN",9.2,"NM",0)
^9.68A^^0
"BLD",1449,"KRN",9.8,0)
9.8
"BLD",1449,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",1449,"KRN",9.8,"NM",1,0)
PSOORAPI^^0^B21614418
"BLD",1449,"KRN",9.8,"NM","B","PSOORAPI",1)

"BLD",1449,"KRN",19,0)
19
"BLD",1449,"KRN",19,"NM",0)
^9.68A^^0
"BLD",1449,"KRN",19.1,0)
19.1
"BLD",1449,"KRN",19.1,"NM",0)
^9.68A^^0
"BLD",1449,"KRN",101,0)
101
"BLD",1449,"KRN",101,"NM",0)
^9.68A^^0
"BLD",1449,"KRN",409.61,0)
409.61
"BLD",1449,"KRN",409.61,"NM",0)
^9.68A^^0
"BLD",1449,"KRN",771,0)
771
"BLD",1449,"KRN",771,"NM",0)
^9.68A^^0
"BLD",1449,"KRN",870,0)
870
"BLD",1449,"KRN",870,"NM",0)
^9.68A^^0
"BLD",1449,"KRN",8994,0)
8994
"BLD",1449,"KRN","B",.4,.4)

"BLD",1449,"KRN","B",.401,.401)

"BLD",1449,"KRN","B",.402,.402)

"BLD",1449,"KRN","B",.403,.403)

"BLD",1449,"KRN","B",.5,.5)

"BLD",1449,"KRN","B",.84,.84)

"BLD",1449,"KRN","B",3.6,3.6)

"BLD",1449,"KRN","B",3.8,3.8)

"BLD",1449,"KRN","B",9.2,9.2)

"BLD",1449,"KRN","B",9.8,9.8)

"BLD",1449,"KRN","B",19,19)

"BLD",1449,"KRN","B",19.1,19.1)

"BLD",1449,"KRN","B",101,101)

"BLD",1449,"KRN","B",409.61,409.61)

"BLD",1449,"KRN","B",771,771)

"BLD",1449,"KRN","B",870,870)

"BLD",1449,"KRN","B",8994,8994)

"BLD",1449,"QUES",0)
^9.62^^
"BLD",1449,"REQB",0)
^9.611^^
"MBREQ")
0
"PKG",120,-1)
1^1
"PKG",120,0)
OUTPATIENT PHARMACY^PSO^OUTPATIENT LABELS, PROFILE, INVENTORY, PRESCRIPTIONS
"PKG",120,20,0)
^9.402P^^
"PKG",120,22,0)
^9.49I^1^1
"PKG",120,22,1,0)
7.0^2971216^2980113^5
"PKG",120,22,1,"PAH",1,0)
45^3000828^1721
"PKG",120,22,1,"PAH",1,1,0)
^^7^7^3000828
"PKG",120,22,1,"PAH",1,1,1,0)
PSO*7*45 provides an API for the Clinical Reminders package.  The API
"PKG",120,22,1,"PAH",1,1,2,0)
provides patient and prescription information, based on a specified date
"PKG",120,22,1,"PAH",1,1,3,0)
range and a specified list of medications, as it relates to the Hepatitis
"PKG",120,22,1,"PAH",1,1,4,0)
C Initiative. This patch will not affect users of the Outpatient Pharmacy
"PKG",120,22,1,"PAH",1,1,5,0)
package. The PSOORAPI routine in patch PSO*7*45 provides an entry point
"PKG",120,22,1,"PAH",1,1,6,0)
that returns patient and prescription information in a ^TMP global to the
"PKG",120,22,1,"PAH",1,1,7,0)
Clinical Reminders package, based on the criteria passed into the call. 
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSOORAPI")
0^1^B21614418
"RTN","PSOORAPI",1,0)
PSOORAPI ;BIR/RTR-API utility routine ;7/8/00
"RTN","PSOORAPI",2,0)
 ;;7.0;OUTPATIENT PHARMACY;**45**;DEC 1997
"RTN","PSOORAPI",3,0)
 ;External reference to ^PSDRUG supported by DBIA 221
"RTN","PSOORAPI",4,0)
 ;
"RTN","PSOORAPI",5,0)
EN(PSOB,PSOE,PSOX,PSODT,PSON) ;
"RTN","PSOORAPI",6,0)
 ;PSOB - begin date
"RTN","PSOORAPI",7,0)
 ;PSOE - end date
"RTN","PSOORAPI",8,0)
 ;PSOX - medication array
"RTN","PSOORAPI",9,0)
 ;PSODT - fill or release date
"RTN","PSOORAPI",10,0)
 ;PSON - node subscript
"RTN","PSOORAPI",11,0)
 ;
"RTN","PSOORAPI",12,0)
 N PSORD,PSORX,PSOFILL,PSODRG,PSOND,PSOPDFN,PSOCX,PSOMED1,PSOMED2,PSODNM,PSOPRT,PSODAYS
"RTN","PSOORAPI",13,0)
 Q:'$G(PSOB)!('$G(PSOE))
"RTN","PSOORAPI",14,0)
 Q:$G(PSODT)'="F"&($G(PSODT)'="R")
"RTN","PSOORAPI",15,0)
 S PSOB=PSOB-.0001,PSOE=PSOE+.999999
"RTN","PSOORAPI",16,0)
 Q:$G(PSON)=""
"RTN","PSOORAPI",17,0)
 K ^TMP(PSON,$J),^TMP($J,"PSOCT")
"RTN","PSOORAPI",18,0)
 G:PSODT="F" FILL
"RTN","PSOORAPI",19,0)
REL ;Use release date
"RTN","PSOORAPI",20,0)
 K PSOPRT
"RTN","PSOORAPI",21,0)
 F PSORD=PSOB:0 S PSORD=$O(^PSRX("AL",PSORD)) Q:'PSORD!(PSORD>PSOE)  F PSORX=0:0 S PSORX=$O(^PSRX("AL",PSORD,PSORX)) Q:'PSORX  S PSOFILL="" F  S PSOFILL=$O(^PSRX("AL",PSORD,PSORX,PSOFILL)) Q:PSOFILL=""  D
"RTN","PSOORAPI",22,0)
 .D SET
"RTN","PSOORAPI",23,0)
 .Q:'$G(PSODRG)!('$G(PSOPDFN))
"RTN","PSOORAPI",24,0)
 .D MED
"RTN","PSOORAPI",25,0)
 ;Partial releases
"RTN","PSOORAPI",26,0)
 S PSOPRT=1
"RTN","PSOORAPI",27,0)
 F PSORD=PSOB:0 S PSORD=$O(^PSRX("AM",PSORD)) Q:'PSORD!(PSORD>PSOE)  F PSORX=0:0 S PSORX=$O(^PSRX("AM",PSORD,PSORX)) Q:'PSORX  S PSOFILL="" F  S PSOFILL=$O(^PSRX("AM",PSORD,PSORX,PSOFILL)) Q:PSOFILL=""  D
"RTN","PSOORAPI",28,0)
 .D SET
"RTN","PSOORAPI",29,0)
 .Q:'$G(PSODRG)!('$G(PSOPDFN))
"RTN","PSOORAPI",30,0)
 .D MED
"RTN","PSOORAPI",31,0)
 G END
"RTN","PSOORAPI",32,0)
FILL ;Use fill date
"RTN","PSOORAPI",33,0)
 K PSOPRT
"RTN","PSOORAPI",34,0)
 F PSORD=PSOB:0 S PSORD=$O(^PSRX("AD",PSORD)) Q:'PSORD!(PSORD>PSOE)  F PSORX=0:0 S PSORX=$O(^PSRX("AD",PSORD,PSORX)) Q:'PSORX  S PSOFILL="" F  S PSOFILL=$O(^PSRX("AD",PSORD,PSORX,PSOFILL)) Q:PSOFILL=""  D
"RTN","PSOORAPI",35,0)
 .D SET
"RTN","PSOORAPI",36,0)
 .Q:'$G(PSODRG)!('$G(PSOPDFN))
"RTN","PSOORAPI",37,0)
 .D MED
"RTN","PSOORAPI",38,0)
 ;Partial fills
"RTN","PSOORAPI",39,0)
 S PSOPRT=1
"RTN","PSOORAPI",40,0)
 F PSORD=PSOB:0 S PSORD=$O(^PSRX("ADP",PSORD)) Q:'PSORD!(PSORD>PSOE)  F PSORX=0:0 S PSORX=$O(^PSRX("ADP",PSORD,PSORX)) Q:'PSORX  S PSOFILL="" F  S PSOFILL=$O(^PSRX("ADP",PSORD,PSORX,PSOFILL)) Q:PSOFILL=""  D
"RTN","PSOORAPI",41,0)
 .D SET
"RTN","PSOORAPI",42,0)
 .Q:'$G(PSODRG)!('$G(PSOPDFN))
"RTN","PSOORAPI",43,0)
 .D MED
"RTN","PSOORAPI",44,0)
 G END
"RTN","PSOORAPI",45,0)
SET ;
"RTN","PSOORAPI",46,0)
 K PSOND,PSODNM,PSODAYS S PSODRG=+$P($G(^PSRX(PSORX,0)),"^",6),PSOPDFN=+$P($G(^(0)),"^",2) I PSODRG S PSOND=+$P($G(^PSDRUG(PSODRG,"ND")),"^"),PSODNM=$P($G(^(0)),"^")
"RTN","PSOORAPI",47,0)
 I $G(PSOPRT) S PSODAYS=$P($G(^PSRX(PSORX,"P",+$G(PSOFILL),0)),"^",10)
"RTN","PSOORAPI",48,0)
 I '$G(PSOPRT) S PSODAYS=$S($G(PSOFILL):$P($G(^PSRX(PSORX,1,+$G(PSOFILL),0)),"^",10),1:$P($G(^PSRX(PSORX,0)),"^",8))
"RTN","PSOORAPI",49,0)
 Q
"RTN","PSOORAPI",50,0)
MED ;Check medication array for matches
"RTN","PSOORAPI",51,0)
 K PSOMED1,PSOMED2,PSOMED3
"RTN","PSOORAPI",52,0)
 I $D(PSOX(PSODRG_";PSDRUG(")) S PSOMED1=1 D MEDS Q
"RTN","PSOORAPI",53,0)
 I $G(PSOND),$D(PSOX(PSOND_";PSNDF(50.6,")) S PSOMED2=1 D MEDS Q
"RTN","PSOORAPI",54,0)
 ;Here, add class check when ready, use PSOMED2 for NDF, default to 1 for VA Class in MEDS
"RTN","PSOORAPI",55,0)
 Q
"RTN","PSOORAPI",56,0)
MEDS I $D(^TMP($J,"PSOCT",PSOPDFN)) S (PSOCX,^TMP($J,"PSOCT",PSOPDFN))=^TMP($J,"PSOCT",PSOPDFN)+1
"RTN","PSOORAPI",57,0)
 I '$D(^TMP($J,"PSOCT",PSOPDFN)) S (PSOCX,^TMP($J,"PSOCT",PSOPDFN))=1
"RTN","PSOORAPI",58,0)
 S ^TMP(PSON,$J,PSOPDFN,PSOCX,0)=$S($G(PSOMED1):PSODRG_";PSDRUG(",1:$G(PSOND)_";PSNDF(50.6,")
"RTN","PSOORAPI",59,0)
 I $G(PSODT)="F" D  Q
"RTN","PSOORAPI",60,0)
 .I '$G(PSOPRT) S ^TMP(PSON,$J,PSOPDFN,PSOCX,1)=PSORD_"^"_$S('$G(PSOFILL)&($P($G(^PSRX(PSORX,2)),"^",13)):$E($P($G(^(2)),"^",13),1,7),$G(PSOFILL)&($P($G(^PSRX(PSORX,1,$G(PSOFILL),0)),"^",18)):$E($P($G(^(0)),"^",18),1,7),1:"")_"^"_$G(PSODNM)
"RTN","PSOORAPI",61,0)
 .I $G(PSOPRT) S ^TMP(PSON,$J,PSOPDFN,PSOCX,1)=PSORD_"^"_$S($G(PSOFILL)&($P($G(^PSRX(PSORX,"P",$G(PSOFILL),0)),"^",19)):$E($P($G(^(0)),"^",19),1,7),1:"")_"^"_$G(PSODNM)
"RTN","PSOORAPI",62,0)
 .S ^TMP(PSON,$J,PSOPDFN,PSOCX,1)=$G(^TMP(PSON,$J,PSOPDFN,PSOCX,1))_"^"_$G(PSODAYS)
"RTN","PSOORAPI",63,0)
 S ^TMP(PSON,$J,PSOPDFN,PSOCX,1)=$S('$G(PSOPRT)&('$G(PSOFILL)):$E($P($G(^PSRX(PSORX,2)),"^",2),1,7),'$G(PSOPRT)&($G(PSOFILL)):$E($P($G(^PSRX(PSORX,1,+$G(PSOFILL),0)),"^"),1,7),$G(PSOPRT):$E($P($G(^PSRX(PSORX,"P",+$G(PSOFILL),0)),"^"),1,7),1:"")
"RTN","PSOORAPI",64,0)
 S ^TMP(PSON,$J,PSOPDFN,PSOCX,1)=$G(^TMP(PSON,$J,PSOPDFN,PSOCX,1))_"^"_$E($G(PSORD),1,7)_"^"_$G(PSODNM)_"^"_$G(PSODAYS)
"RTN","PSOORAPI",65,0)
 Q
"RTN","PSOORAPI",66,0)
END ;
"RTN","PSOORAPI",67,0)
 K ^TMP($J,"PSOCT")
"RTN","PSOORAPI",68,0)
 Q
"VER")
8.0^22.0
**INSTALL NAME**
PSJ*5.0*48
"BLD",2553,0)
PSJ*5.0*48^INPATIENT MEDICATIONS^0^3000828^y
"BLD",2553,1,0)
^^7^7^3000828^
"BLD",2553,1,1,0)
PSJ*5*48 provides an API for the Clinical Reminders package.  The API
"BLD",2553,1,2,0)
provides patient and order information, based on a specified date range
"BLD",2553,1,3,0)
and a specified list of medications, as it relates to the Hepatitis C
"BLD",2553,1,4,0)
Initiative. This patch will not affect users of the Inpatient Medications
"BLD",2553,1,5,0)
package. The PSJORAPI routine in patch PSJ*5*48 provides an entry point
"BLD",2553,1,6,0)
that returns patient and order information in a ^TMP global to the
"BLD",2553,1,7,0)
Clinical Reminders package, based on the criteria passed into the call.
"BLD",2553,4,0)
^9.64PA^^
"BLD",2553,"ABPKG")
n
"BLD",2553,"KRN",0)
^9.67PA^19^18
"BLD",2553,"KRN",.4,0)
.4
"BLD",2553,"KRN",.4,"NM",0)
^9.68A^^
"BLD",2553,"KRN",.401,0)
.401
"BLD",2553,"KRN",.402,0)
.402
"BLD",2553,"KRN",.403,0)
.403
"BLD",2553,"KRN",.5,0)
.5
"BLD",2553,"KRN",.84,0)
.84
"BLD",2553,"KRN",3.6,0)
3.6
"BLD",2553,"KRN",3.8,0)
3.8
"BLD",2553,"KRN",9.2,0)
9.2
"BLD",2553,"KRN",9.8,0)
9.8
"BLD",2553,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",2553,"KRN",9.8,"NM",1,0)
PSJORAPI^^0^B10423348
"BLD",2553,"KRN",9.8,"NM","B","PSJORAPI",1)

"BLD",2553,"KRN",19,0)
19
"BLD",2553,"KRN",19,"NM",0)
^9.68A^^
"BLD",2553,"KRN",19.1,0)
19.1
"BLD",2553,"KRN",19.1,"NM",0)
^9.68A^^0
"BLD",2553,"KRN",101,0)
101
"BLD",2553,"KRN",101,"NM",0)
^9.68A^^0
"BLD",2553,"KRN",409.61,0)
409.61
"BLD",2553,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",2553,"KRN",771,0)
771
"BLD",2553,"KRN",869.2,0)
869.2
"BLD",2553,"KRN",870,0)
870
"BLD",2553,"KRN",8994,0)
8994
"BLD",2553,"KRN","B",.4,.4)

"BLD",2553,"KRN","B",.401,.401)

"BLD",2553,"KRN","B",.402,.402)

"BLD",2553,"KRN","B",.403,.403)

"BLD",2553,"KRN","B",.5,.5)

"BLD",2553,"KRN","B",.84,.84)

"BLD",2553,"KRN","B",3.6,3.6)

"BLD",2553,"KRN","B",3.8,3.8)

"BLD",2553,"KRN","B",9.2,9.2)

"BLD",2553,"KRN","B",9.8,9.8)

"BLD",2553,"KRN","B",19,19)

"BLD",2553,"KRN","B",19.1,19.1)

"BLD",2553,"KRN","B",101,101)

"BLD",2553,"KRN","B",409.61,409.61)

"BLD",2553,"KRN","B",771,771)

"BLD",2553,"KRN","B",869.2,869.2)

"BLD",2553,"KRN","B",870,870)

"BLD",2553,"KRN","B",8994,8994)

"BLD",2553,"QUES",0)
^9.62^^
"BLD",2553,"REQB",0)
^9.611^^0
"MBREQ")
0
"PKG",197,-1)
1^1
"PKG",197,0)
INPATIENT MEDICATIONS^PSJ^UNIT DOSE AND IVS
"PKG",197,20,0)
^9.402P^^
"PKG",197,22,0)
^9.49I^1^1
"PKG",197,22,1,0)
5.0^2971215^2980917^11712
"PKG",197,22,1,"PAH",1,0)
48^3000828^11881
"PKG",197,22,1,"PAH",1,1,0)
^^7^7^3000828
"PKG",197,22,1,"PAH",1,1,1,0)
PSJ*5*48 provides an API for the Clinical Reminders package.  The API
"PKG",197,22,1,"PAH",1,1,2,0)
provides patient and order information, based on a specified date range
"PKG",197,22,1,"PAH",1,1,3,0)
and a specified list of medications, as it relates to the Hepatitis C
"PKG",197,22,1,"PAH",1,1,4,0)
Initiative. This patch will not affect users of the Inpatient Medications
"PKG",197,22,1,"PAH",1,1,5,0)
package. The PSJORAPI routine in patch PSJ*5*48 provides an entry point
"PKG",197,22,1,"PAH",1,1,6,0)
that returns patient and order information in a ^TMP global to the
"PKG",197,22,1,"PAH",1,1,7,0)
Clinical Reminders package, based on the criteria passed into the call.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSJORAPI")
0^1^B10423348
"RTN","PSJORAPI",1,0)
PSJORAPI ;BIR/LDT-API utility routine ;7/8/00
"RTN","PSJORAPI",2,0)
 ;;5.0; INPATIENT MEDICATIONS ;**48**;16 DEC 1997
"RTN","PSJORAPI",3,0)
 ;
"RTN","PSJORAPI",4,0)
 ; Reference to ^PSDRUG is supported by DBIA 2192.
"RTN","PSJORAPI",5,0)
 ; Reference to ^PS(52.6 is supported by DBIA 1231.
"RTN","PSJORAPI",6,0)
 ; Reference to ^PS(52.7 is supported by DBIA 2173.
"RTN","PSJORAPI",7,0)
 ; Reference to ^PS(55 is supported by DBIA 2191.
"RTN","PSJORAPI",8,0)
 ;
"RTN","PSJORAPI",9,0)
EN(PSJB,PSJE,PSJX,PSJDT,PSJN)      ;
"RTN","PSJORAPI",10,0)
 ;PSJB - begin date
"RTN","PSJORAPI",11,0)
 ;PSJE - end date
"RTN","PSJORAPI",12,0)
 ;PSJX - medication array
"RTN","PSJORAPI",13,0)
 ;PSJDT - fill date (not used by Inaptient)
"RTN","PSJORAPI",14,0)
 ;PSJN - node subscript
"RTN","PSJORAPI",15,0)
 ;
"RTN","PSJORAPI",16,0)
 N PSJRD,PSJDRG,PSJND,PSJPDFN,PSJCX,PSJMED1,PSJMED2,PSJDNM,PSJBEG,PSJEND,PSJSTRT,PSJSTP
"RTN","PSJORAPI",17,0)
 Q:'$G(PSJB)!('$G(PSJE))
"RTN","PSJORAPI",18,0)
 Q:$G(PSJN)=""
"RTN","PSJORAPI",19,0)
 K ^TMP(PSJN,$J),^TMP($J,"PSJCT")
"RTN","PSJORAPI",20,0)
UD ;Check for Unit Dose orders
"RTN","PSJORAPI",21,0)
 N PSJND2,PSJORD,PSJDDRG
"RTN","PSJORAPI",22,0)
 S PSJBEG=PSJB-.0001,PSJEND=PSJE+.999999
"RTN","PSJORAPI",23,0)
 F  S PSJBEG=$O(^PS(55,"AUDS",PSJBEG)) Q:'PSJBEG!(PSJBEG>PSJEND)  S PSJPDFN=0 F  S PSJPDFN=$O(^PS(55,"AUDS",PSJBEG,PSJPDFN)) Q:'PSJPDFN  D
"RTN","PSJORAPI",24,0)
 . S PSJORD=0 F  S PSJORD=$O(^PS(55,"AUDS",PSJBEG,PSJPDFN,PSJORD)) Q:'PSJORD  D
"RTN","PSJORAPI",25,0)
 .. S PSJND2=$G(^PS(55,PSJPDFN,5,PSJORD,2)),PSJSTRT=$P(PSJND2,"^",2),PSJSTP=$P(PSJND2,"^",4)
"RTN","PSJORAPI",26,0)
 .. S PSJDDRG=0 F  S PSJDDRG=$O(^PS(55,PSJPDFN,5,PSJORD,1,PSJDDRG)) Q:'PSJDDRG  S PSJDRG=+$G(^PS(55,PSJPDFN,5,PSJORD,1,PSJDDRG,0)),PSJND=+$G(^PSDRUG(+PSJDRG,"ND")),PSJDNM=$P($G(^(0)),"^") D MED
"RTN","PSJORAPI",27,0)
IV ;Check for IV orders
"RTN","PSJORAPI",28,0)
 N PSJND0,PSJORD,PSJDDRG,FIL,DRG,DRGTYP
"RTN","PSJORAPI",29,0)
 S PSJBEG=PSJB-.0001,PSJEND=PSJE+.999999
"RTN","PSJORAPI",30,0)
 F  S PSJBEG=$O(^PS(55,"AIVS",PSJBEG)) Q:'PSJBEG!(PSJBEG>PSJEND)  S PSJPDFN=0 F  S PSJPDFN=$O(^PS(55,"AIVS",PSJBEG,PSJPDFN)) Q:'PSJPDFN  D
"RTN","PSJORAPI",31,0)
 . S PSJORD=0 F  S PSJORD=$O(^PS(55,"AIVS",PSJBEG,PSJPDFN,PSJORD)) Q:'PSJORD  D
"RTN","PSJORAPI",32,0)
 .. S PSJND0=$G(^PS(55,PSJPDFN,"IV",PSJORD,0)),PSJSTRT=$P(PSJND0,"^",2),PSJSTP=$P(PSJND0,"^",3)
"RTN","PSJORAPI",33,0)
 .. F DRGTYP="AD","SOL" F DRG=0:0 S DRG=$O(^PS(55,PSJPDFN,"IV",PSJORD,DRGTYP,DRG)) Q:'DRG  D
"RTN","PSJORAPI",34,0)
 ... S PSJDDRG=+$G(^PS(55,PSJPDFN,"IV",PSJORD,DRGTYP,DRG,0)),FIL=$S(DRGTYP="AD":52.6,1:52.7),PSJDRG=$P($G(^PS(FIL,+PSJDDRG,0)),"^",2),PSJND=+$G(^PSDRUG(+PSJDRG,"ND")),PSJDNM=$P($G(^(0)),"^") D MED
"RTN","PSJORAPI",35,0)
 G END
"RTN","PSJORAPI",36,0)
 Q
"RTN","PSJORAPI",37,0)
 ;
"RTN","PSJORAPI",38,0)
MED ;Check medication array for matches
"RTN","PSJORAPI",39,0)
 K PSJMED1,PSJMED2,PSJMED3
"RTN","PSJORAPI",40,0)
 I $D(PSJX(PSJDRG_";PSDRUG(")) S PSJMED1=1 D MEDS Q
"RTN","PSJORAPI",41,0)
 I $G(PSJND),$D(PSJX(PSJND_";PSNDF(50.6,")) S PSJMED2=1 D MEDS Q
"RTN","PSJORAPI",42,0)
 ;Here, add class check when ready, use PSJMED2 for NDF, default to 1 for VA Class in MEDS
"RTN","PSJORAPI",43,0)
 Q
"RTN","PSJORAPI",44,0)
MEDS I $D(^TMP($J,"PSJCT",PSJPDFN)) S (PSJCX,^TMP($J,"PSJCT",PSJPDFN))=^TMP($J,"PSJCT",PSJPDFN)+1
"RTN","PSJORAPI",45,0)
 I '$D(^TMP($J,"PSJCT",PSJPDFN)) S (PSJCX,^TMP($J,"PSJCT",PSJPDFN))=1
"RTN","PSJORAPI",46,0)
 S ^TMP(PSJN,$J,PSJPDFN,PSJCX,0)=$S($G(PSJMED1):PSJDRG_";PSDRUG(",1:$G(PSJND)_";PSNDF(50.6,")
"RTN","PSJORAPI",47,0)
 S ^TMP(PSJN,$J,PSJPDFN,PSJCX,1)=$G(PSJSTRT)_"^^"_$G(PSJDNM)_"^^"_$G(PSJSTP)
"RTN","PSJORAPI",48,0)
 Q
"RTN","PSJORAPI",49,0)
END ;
"RTN","PSJORAPI",50,0)
 K ^TMP($J,"PSJCT")
"RTN","PSJORAPI",51,0)
 Q
"VER")
8.0^22.0
**INSTALL NAME**
PXRM*1.5*1
"BLD",2393,0)
PXRM*1.5*1^CLINICAL REMINDERS^0^3000829^y
"BLD",2393,1,0)
^^256^256^3000829^
"BLD",2393,1,1,0)
  This patch adds:
"BLD",2393,1,2,0)
    * 2 new reminder definitions to the REMINDER DEFINITION file (811.9)
"BLD",2393,1,3,0)
    * 18 new national terms to the REMINDER TERM file (811.5)
"BLD",2393,1,4,0)
    * 1 new file, REMINDER EXTRACT SUMMARY (810.3), that temporarily
"BLD",2393,1,5,0)
      stores data extracted from reminder evaluation processing when
"BLD",2393,1,6,0)
      updating the EPI database. This temporary data can be used to
"BLD",2393,1,7,0)
      compare to data in HL7 messages sent to the EPI database, and
"BLD",2393,1,8,0)
      validate that the appropriate data is extracted.
"BLD",2393,1,9,0)
    * 2 new options added to the PXRM REMINDER REPORTS option menu to
"BLD",2393,1,10,0)
      print data from the REMINDER EXTRACT SUMMARY file (810.3)
"BLD",2393,1,11,0)
    * 2 new sort templates, one to identify terms to distribute and one
"BLD",2393,1,12,0)
      for the REMINDER EXTRACT SUMMARY file
"BLD",2393,1,13,0)
    * 3 new print templates, all related to reporting the EPI findings
"BLD",2393,1,14,0)
 
"BLD",2393,1,15,0)
  This patch modifies the:
"BLD",2393,1,16,0)
    * description in the VA-HEP C RISK ASSESSMENT reminder definition
"BLD",2393,1,17,0)
    * description for 3 previously distributed Reminder Terms
"BLD",2393,1,18,0)
    * name and description for the Reminder Term PREV POSITIVE TEST FOR
"BLD",2393,1,19,0)
      HEP C, which is renamed PREVIOUSLY ASSESSED HEP C RISK
"BLD",2393,1,20,0)
 
"BLD",2393,1,21,0)
  This patch will work with the LR*5.2*260 patch and two pharmacy
"BLD",2393,1,22,0)
  patches (PSO*7*45 and PSJ*5*48) to extract Hepatitis C risk
"BLD",2393,1,23,0)
  assessment, laboratory and medication data. The extracted data will be
"BLD",2393,1,24,0)
  used to update the EPI database at the AAC.
"BLD",2393,1,25,0)
 
"BLD",2393,1,26,0)
 General Overview:
"BLD",2393,1,27,0)
 =================
"BLD",2393,1,28,0)
  This patch is released in response to Congressional reporting
"BLD",2393,1,29,0)
  requirements and a policy letter distributed by the Under Secretary
"BLD",2393,1,30,0)
  of Health addressing treatment of Hepatitis patients.
"BLD",2393,1,31,0)
 
"BLD",2393,1,32,0)
  The data extracted for Risk Assessment is based on the VA-HEP C RISK
"BLD",2393,1,33,0)
  ASSESSMENT reminder definition.  The data extracted from laboratory is
"BLD",2393,1,34,0)
  based on the VA-NATIONAL EPI LAB EXTRACT reminder, previously
"BLD",2393,1,35,0)
  distributed as VA-NATIONAL EPI DB UPDATE.  Both of these reminders were
"BLD",2393,1,36,0)
  first released in the Clinical Reminders V.1.5 package. A new reminder
"BLD",2393,1,37,0)
  definition, VA-NATIONAL EPI RX EXTRACT, is distributed in this patch for
"BLD",2393,1,38,0)
  extracting medications. These three reminder definitions provide the
"BLD",2393,1,39,0)
  criteria for extracting the risk assessment, lab, and medication data.
"BLD",2393,1,40,0)
 
"BLD",2393,1,41,0)
  The reminder evaluation and update to the EPI database occurs on the
"BLD",2393,1,42,0)
  15th of the month following the reporting month. The option that manages
"BLD",2393,1,43,0)
  this update is the LREPI NIGHTLY TASK.  This task currently runs nightly
"BLD",2393,1,44,0)
  at each site. Note: The monthly task on the 15th occurs because the LAG
"BLD",2393,1,45,0)
  DAYS field in the LAB SEARCH/EXTRACT file (69.5) is set to "15" for each
"BLD",2393,1,46,0)
  pathogen. The LR*5.2*260 patch contains new processing logic that sends
"BLD",2393,1,47,0)
  data extracted from reminder extract results to the EPI database.
"BLD",2393,1,48,0)
 
"BLD",2393,1,49,0)
  This patch also fixes a problem where CUSTOMIZED PATIENT COHORT LOGIC
"BLD",2393,1,50,0)
was 
"BLD",2393,1,51,0)
  not being used in the reminder evaluation. (NOIS SLC-0600-52703).
"BLD",2393,1,52,0)
 
"BLD",2393,1,53,0)
 NOIS Messages:
"BLD",2393,1,54,0)
 ==============
"BLD",2393,1,55,0)
 SLC-0600-52703
"BLD",2393,1,56,0)
 MON-0800-50154
"BLD",2393,1,57,0)
 
"BLD",2393,1,58,0)
  
"BLD",2393,1,59,0)
 Build Components:
"BLD",2393,1,60,0)
 =================
"BLD",2393,1,61,0)
  Data Dictionary for three files:
"BLD",2393,1,62,0)
      REMINDER EXTRACT SUMMARY (810.3) (new) 
"BLD",2393,1,63,0)
      REMINDER DEFINITION (811.9)
"BLD",2393,1,64,0)
      REMINDER TERM (811.5)
"BLD",2393,1,65,0)
 
"BLD",2393,1,66,0)
  Option:
"BLD",2393,1,67,0)
      PXRM REMINDER REPORTS menu (description change; lists new options)
"BLD",2393,1,68,0)
      PXRM REMINDERS DUE (no change, just attach to menu)
"BLD",2393,1,69,0)
      PXRM EXTRACT EPI TOTALS (new)
"BLD",2393,1,70,0)
      PXRM EXTRACT EPI FINDING LIST (new)
"BLD",2393,1,71,0)
 
"BLD",2393,1,72,0)
  Print Templates to print data from the REMINDER EXTRACT SUMMARY:
"BLD",2393,1,73,0)
      PXRM EXTRACT EPI FINDING LIST (new)
"BLD",2393,1,74,0)
      PXRM EXTRACT EPI FINDING HDR (new)
"BLD",2393,1,75,0)
      PXRM EXTRACT EPI FINDING TOT (new) 
"BLD",2393,1,76,0)
 
"BLD",2393,1,77,0)
  Sort Templates:
"BLD",2393,1,78,0)
      PXRM EPI LAB AND MED TERMS (new)(identifies reminder terms to
"BLD",2393,1,79,0)
        include in this patch)
"BLD",2393,1,80,0)
      PXRM EXTRACT EPI BY FIND_PT (new)(sorts the extract data in the
"BLD",2393,1,81,0)
        REMINDER EXTRACT SUMMARY file)
"BLD",2393,1,82,0)
 
"BLD",2393,1,83,0)
  Routines:
"BLD",2393,1,84,0)
 
"BLD",2393,1,85,0)
   The second line of each routine looks like:
"BLD",2393,1,86,0)
 
"BLD",2393,1,87,0)
   <tab>;;1.5;CLINICAL REMINDERS;**1**;June 19, 2000
"BLD",2393,1,88,0)
 
"BLD",2393,1,89,0)
   Routine         Old Checksum    New Checksum    Patch List
"BLD",2393,1,90,0)
   =======         ============    ============    ==========
"BLD",2393,1,91,0)
   PXRMLOGX          3009219          3005995        **1**
"BLD",2393,1,92,0)
   PXRMP1I               n/a          2412825        **1** 
"BLD",2393,1,93,0)
   PXRMP1IE              n/a           349212        **1**
"BLD",2393,1,94,0)
   PXRMTERM          6249864          6249864        **1**
"BLD",2393,1,95,0)
   PXRMXX            2465756          9832947        **1**
"BLD",2393,1,96,0)
   PXRMXX1               n/a          8675493        **1**
"BLD",2393,1,97,0)
   PXRMXX2               n/a          8200381        **1**
"BLD",2393,1,98,0)
   PXRMXXT               n/a           573203        **1**
"BLD",2393,1,99,0)
 
"BLD",2393,1,100,0)
 REQUIRED BUILDS:
"BLD",2393,1,101,0)
 ================
"BLD",2393,1,102,0)
  CLINICAL REMINDERS 1.5
"BLD",2393,1,103,0)
 
"BLD",2393,1,104,0)
 INSTALLATION INSTRUCTIONS:
"BLD",2393,1,105,0)
 ==========================
"BLD",2393,1,106,0)
  
"BLD",2393,1,107,0)
 This patch should be loaded during non-peak hours to minimize disruption
"BLD",2393,1,108,0)
 to users.  Installation will take less than 15 minutes.
"BLD",2393,1,109,0)
  
"BLD",2393,1,110,0)
                           **Warning** 
"BLD",2393,1,111,0)
 When an option is included in the patch build, the question REBUILD MENUS
"BLD",2393,1,112,0)
 is asked as a PRE-INSTALL question.  If you choose to have KIDs rebuild
"BLD",2393,1,113,0)
 the menus it will happen at the end of the build installation and may
"BLD",2393,1,114,0)
 take several hours.
"BLD",2393,1,115,0)
  
"BLD",2393,1,116,0)
  1.  Download the KIDS file HEP_C_EXTRACT_1_0.KID via FTP from any
"BLD",2393,1,117,0)
      of the anonymous.software directories listed above.  Move the file
"BLD",2393,1,118,0)
      to the appropriate directory on your system.
"BLD",2393,1,119,0)
 
"BLD",2393,1,120,0)
  2.  Review your mapped set.  If any of the routines listed in the
"BLD",2393,1,121,0)
      Routines section are mapped, they should be removed from the mapped
"BLD",2393,1,122,0)
      set at this time. 
"BLD",2393,1,123,0)
 
"BLD",2393,1,124,0)
  3.  From the Kernel Installation and Distribution System (KIDS) menu,
"BLD",2393,1,125,0)
      select the Installation menu.
"BLD",2393,1,126,0)
 
"BLD",2393,1,127,0)
  4.  Use Load a Distribution option on the KIDS Installation menu, and
"BLD",2393,1,128,0)
      enter: HEP_C_EXTRACT_1_0.KID
"BLD",2393,1,129,0)
  
"BLD",2393,1,130,0)
  5.  From this menu, you may elect to use the following options
"BLD",2393,1,131,0)
      (when prompted for INSTALL NAME, enter HEPATITIS_C_EXTRACT).
"BLD",2393,1,132,0)
    
"BLD",2393,1,133,0)
      Note - Option (a.), Backup a Transport Global, can and must be
"BLD",2393,1,134,0)
      referenced exclusively by the primary build name of
"BLD",2393,1,135,0)
      HEPATITIS_C_EXTRACT. Option (b.) can be run by either using the
"BLD",2393,1,136,0)
      primary build name of HEPATITIS_C_EXTRACT or the individual patch
"BLD",2393,1,137,0)
      names (e.g., PXRM*1.5*1, etc.). Options (c.) and (d.) must be run
"BLD",2393,1,138,0)
      for each individual build (using the patch names) included in
"BLD",2393,1,139,0)
      this transport.
"BLD",2393,1,140,0)
  
"BLD",2393,1,141,0)
      a.  Backup a Transport Global - this option will create a backup
"BLD",2393,1,142,0)
          message of any routines exported with the patch.  It will NOT
"BLD",2393,1,143,0)
          backup any other changes such as DDs or templates.
"BLD",2393,1,144,0)
      b.  Compare Transport Global to Current System  - this option will
"BLD",2393,1,145,0)
          allow you to view all changes that will be made when the patch
"BLD",2393,1,146,0)
          is installed.  It compares all components of the patch
"BLD",2393,1,147,0)
          (routines, DDs, templates, etc.).
"BLD",2393,1,148,0)
      c.  Verify Checksums in Transport Global - this option will
"BLD",2393,1,149,0)
          allow you to ensure the integrity of the routines that are in
"BLD",2393,1,150,0)
          the transport global.
"BLD",2393,1,151,0)
      d.  Print Transport Global - this option will allow you to view the
"BLD",2393,1,152,0)
          components of the KIDS build.
"BLD",2393,1,153,0)
  
"BLD",2393,1,154,0)
  6.  Use the Install Package(s) option and select the package
"BLD",2393,1,155,0)
      HEPATITIS_C_EXTRACT.
"BLD",2393,1,156,0)
  
"BLD",2393,1,157,0)
  7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
"BLD",2393,1,158,0)
      Protocols? YES//', respond NO.
"BLD",2393,1,159,0)
  
"BLD",2393,1,160,0)
  8.  If routines were unmapped as part of step 2, they should be returned
"BLD",2393,1,161,0)
      to the mapped set once the installation has run to completion.
"BLD",2393,1,162,0)
 
"BLD",2393,1,163,0)
 POST INSTALLATION INSTRUCTIONS
"BLD",2393,1,164,0)
 ============================== 
"BLD",2393,1,165,0)
 The details of the setup to be completed is available in the
"BLD",2393,1,166,0)
 documentation. Generally, these steps need to be done by the REMINDERS
"BLD",2393,1,167,0)
 MANAGER or the CLINICAL REMINDERS APPLICATION COORDINATOR. The success of
"BLD",2393,1,168,0)
 the Hepatitis C updates to the EPI database will depend on a Hepatitis
"BLD",2393,1,169,0)
 Team at your site addressing all of the issues in the documentation.
"BLD",2393,1,170,0)
 
"BLD",2393,1,171,0)
  1. See the descriptions for the reminder definitions and 
"BLD",2393,1,172,0)
     the descriptions in the REMINDER TERMS file to determine what
"BLD",2393,1,173,0)
     additional setup is required for the terms. You will need to review
"BLD",2393,1,174,0)
     the reminder terms with laboratory and pharmacy coordinators.
"BLD",2393,1,175,0)
 
"BLD",2393,1,176,0)
  2. You can use the Detailed Reminders Due report to determine if all
"BLD",2393,1,177,0)
     the correct patients are being identified to send to the EPI
"BLD",2393,1,178,0)
     database.
"BLD",2393,1,179,0)
 
"BLD",2393,1,180,0)
  3. You may need to check that all dispensed drugs are mapped to the
"BLD",2393,1,181,0)
     national drug file entries represented by the Hepatitis C Medication
"BLD",2393,1,182,0)
     terms. If you have local dispensed drugs that cannot be mapped to the
"BLD",2393,1,183,0)
     national drug file (VA GENERIC, #50.6), you will need to enter the
"BLD",2393,1,184,0)
     dispensed drugs as findings for the appropriate national reminder
"BLD",2393,1,185,0)
     term.
"BLD",2393,1,186,0)
 
"BLD",2393,1,187,0)
  4. Add local laboratory tests with appropriate CONDITIONS in the
"BLD",2393,1,188,0)
     REMINDER TERM file for the laboratory terms.
"BLD",2393,1,189,0)
 
"BLD",2393,1,190,0)
  5. The VA-NATIONAL EPI LAB EXTRACT and VA-NATIONAL EPI RX EXTRACT
"BLD",2393,1,191,0)
     reminders should NOT be added to the "Clinical Reminders for Search"
"BLD",2393,1,192,0)
     parameter for clinicians.  The Reminders Manager may want to create a
"BLD",2393,1,193,0)
     National EPI Update reminder category and add these reminders to it,
"BLD",2393,1,194,0)
     along with the VA-HEP C RISK ASSESSMENT REMINDER. The category could
"BLD",2393,1,195,0)
     be added to the CPRS Reminder Categories parameter option for testing
"BLD",2393,1,196,0)
     the setup of the reminder terms and reviewing the results.
"BLD",2393,1,197,0)
 
"BLD",2393,1,198,0)
DETAILED DESCRIPTION:
"BLD",2393,1,199,0)
=====================
"BLD",2393,1,200,0)
Data Dictionary:
"BLD",2393,1,201,0)
 
"BLD",2393,1,202,0)
  1. REMINDER DEFINITION file (811.9)
"BLD",2393,1,203,0)
     The reminder for VA-NATIONAL EPI DB UPDATE may be used at sites to
"BLD",2393,1,204,0)
     determine whether a patient has data that is sent to the Austin
"BLD",2393,1,205,0)
     Automation Center to update the national EPI database.
"BLD",2393,1,206,0)
 
"BLD",2393,1,207,0)
  2. REMINDER TERM file (811.5)
"BLD",2393,1,208,0)
     There are twenty reminder terms used by the lab and pharmacy extract
"BLD",2393,1,209,0)
     reminders. Eighteen of these terms are newly distributed in this
"BLD",2393,1,210,0)
     file. These new terms represent Hepatitis A, Hepatitis B and
"BLD",2393,1,211,0)
     Hepatitis C lab and medication information. The reminder terms may be
"BLD",2393,1,212,0)
     used at sites in locally defined reminders for clinicians providing
"BLD",2393,1,213,0)
     clinical care for Hepatitis patients.
"BLD",2393,1,214,0)
 
"BLD",2393,1,215,0)
     Hepatitis A laboratory reminder terms:
"BLD",2393,1,216,0)
         HAV Ab positive         Hepatitis A virus antibody total positive
"BLD",2393,1,217,0)
         HAV IgM Ab positive     Hepatitis A virus antibody immunoglobulin
"BLD",2393,1,218,0)
                                         M positive 
"BLD",2393,1,219,0)
         HAV IgG positive        Hepatitis A virus antibody immunoglobulin
"BLD",2393,1,220,0)
                                         G positive
"BLD",2393,1,221,0)
         Bilirubin
"BLD",2393,1,222,0)
 
"BLD",2393,1,223,0)
     Hepatitis B laboratory reminder terms:
"BLD",2393,1,224,0)
         HBs Ag positive         Hepatitis B surface antigen positive 
"BLD",2393,1,225,0)
         HBc Ab IgM positive     Hepatitis B core antibody immunoglobulin
"BLD",2393,1,226,0)
                                         M positive 
"BLD",2393,1,227,0)
         HBs Ab positive         Hepatitis B surface antibody positive
"BLD",2393,1,228,0)
         HBe Ag positive         Hepatitis B e antigen positive 
"BLD",2393,1,229,0)
 
"BLD",2393,1,230,0)
     Hepatitis C laboratory reminder terms: 
"BLD",2393,1,231,0)
         HEP C VIRUS ANTIBODY NEGATIVE    
"BLD",2393,1,232,0)
         HEP C VIRUS ANTIBODY POSITIVE    
"BLD",2393,1,233,0)
         TRANSFERASE (AST) (SGOT)
"BLD",2393,1,234,0)
         ALANINE AMINO (ALT) (SGPT)
"BLD",2393,1,235,0)
 
"BLD",2393,1,236,0)
     Hepatitis Medications (based on VA GENERIC file): 
"BLD",2393,1,237,0)
         INTERFERON ALFA-2A 
"BLD",2393,1,238,0)
         INTERFERON ALFA-2B     
"BLD",2393,1,239,0)
         INTERFERON ALFA-2B/RIBAVIRIN 
"BLD",2393,1,240,0)
         INTERFERON ALFA-3N     
"BLD",2393,1,241,0)
         INTERFERON ALFACON-1 
"BLD",2393,1,242,0)
         INTERFERON BETA-1A 
"BLD",2393,1,243,0)
         INTERFERON BETA-1B 
"BLD",2393,1,244,0)
         RIBAVIRIN           
"BLD",2393,1,245,0)
 
"BLD",2393,1,246,0)
Sort Template:
"BLD",2393,1,247,0)
 
"BLD",2393,1,248,0)
   PXRM EPI LAB AND MED TERMS contains reminder term entries defined above
"BLD",2393,1,249,0)
   to distribute with the REMINDER TERM (811.5) data dictionary.
"BLD",2393,1,250,0)
 
"BLD",2393,1,251,0)
   PXRM EXTRACT EPI BY FIND_PT sorts an extract by Finding Item and SSN.
"BLD",2393,1,252,0)
   This sort template may be useful when looking up an SSN to compare
"BLD",2393,1,253,0)
   findings to an error message returned to the site from the AAC.  When
"BLD",2393,1,254,0)
   the AAC has problems processing a sites extracted data, the original
"BLD",2393,1,255,0)
   extract message and SSN are returned to the site in an error message
"BLD",2393,1,256,0)
   for review and correction.
"BLD",2393,4,0)
^9.64PA^810.3^3
"BLD",2393,4,810.3,0)
810.3
"BLD",2393,4,810.3,222)
y^y^f^^^^n
"BLD",2393,4,811.5,0)
811.5
"BLD",2393,4,811.5,222)
y^y^f^^y^PXRM EPI LAB AND MED TERMS^y^o^n
"BLD",2393,4,811.9,0)
811.9
"BLD",2393,4,811.9,222)
n^n^f^^y^^y^r^n
"BLD",2393,4,811.9,224)
I (Y=38)!(Y=39)!(Y=27)
"BLD",2393,4,"B",810.3,810.3)

"BLD",2393,4,"B",811.5,811.5)

"BLD",2393,4,"B",811.9,811.9)

"BLD",2393,"ABNS",0)
^9.66A^^0
"BLD",2393,"ABPKG")
n
"BLD",2393,"GLO",0)
^9.65
"BLD",2393,"INI")
PRE^PXRMP1I
"BLD",2393,"INIT")
POST^PXRMP1I
"BLD",2393,"KRN",0)
^9.67PA^19^17
"BLD",2393,"KRN",.4,0)
.4
"BLD",2393,"KRN",.4,"NM",0)
^9.68A^5^3
"BLD",2393,"KRN",.4,"NM",3,0)
PXRM EXTRACT EPI FINDING HDR    FILE #810.3^810.3^0
"BLD",2393,"KRN",.4,"NM",4,0)
PXRM EXTRACT EPI FINDING LIST    FILE #810.3^810.3^0
"BLD",2393,"KRN",.4,"NM",5,0)
PXRM EXTRACT EPI FINDING TOT    FILE #810.3^810.3^0
"BLD",2393,"KRN",.4,"NM","B","PXRM EXTRACT EPI FINDING HDR    FILE #810.3",3)

"BLD",2393,"KRN",.4,"NM","B","PXRM EXTRACT EPI FINDING LIST    FILE #810.3",4)

"BLD",2393,"KRN",.4,"NM","B","PXRM EXTRACT EPI FINDING TOT    FILE #810.3",5)

"BLD",2393,"KRN",.401,0)
.401
"BLD",2393,"KRN",.401,"NM",0)
^9.68A^2^2
"BLD",2393,"KRN",.401,"NM",1,0)
PXRM EXTRACT EPI BY FIND_PT    FILE #810.3^810.3^0
"BLD",2393,"KRN",.401,"NM",2,0)
PXRM EPI LAB AND MED TERMS    FILE #811.5^811.5^0
"BLD",2393,"KRN",.401,"NM","B","PXRM EPI LAB AND MED TERMS    FILE #811.5",2)

"BLD",2393,"KRN",.401,"NM","B","PXRM EXTRACT EPI BY FIND_PT    FILE #810.3",1)

"BLD",2393,"KRN",.402,0)
.402
"BLD",2393,"KRN",.403,0)
.403
"BLD",2393,"KRN",.5,0)
.5
"BLD",2393,"KRN",.84,0)
.84
"BLD",2393,"KRN",3.6,0)
3.6
"BLD",2393,"KRN",3.8,0)
3.8
"BLD",2393,"KRN",9.2,0)
9.2
"BLD",2393,"KRN",9.8,0)
9.8
"BLD",2393,"KRN",9.8,"NM",0)
^9.68A^11^8
"BLD",2393,"KRN",9.8,"NM",1,0)
PXRMLOGX^^0^B22137086
"BLD",2393,"KRN",9.8,"NM",2,0)
PXRMXX^^0^B76628600
"BLD",2393,"KRN",9.8,"NM",4,0)
PXRMXX1^^0^B35159345
"BLD",2393,"KRN",9.8,"NM",5,0)
PXRMXXT^^0^B1109797
"BLD",2393,"KRN",9.8,"NM",6,0)
PXRMXX2^^0^B34311808
"BLD",2393,"KRN",9.8,"NM",9,0)
PXRMTERM^^0^B13670091
"BLD",2393,"KRN",9.8,"NM",10,0)
PXRMP1I^^0^B10670461
"BLD",2393,"KRN",9.8,"NM",11,0)
PXRMP1IE^^0^B474357
"BLD",2393,"KRN",9.8,"NM","B","PXRMLOGX",1)

"BLD",2393,"KRN",9.8,"NM","B","PXRMP1I",10)

"BLD",2393,"KRN",9.8,"NM","B","PXRMP1IE",11)

"BLD",2393,"KRN",9.8,"NM","B","PXRMTERM",9)

"BLD",2393,"KRN",9.8,"NM","B","PXRMXX",2)

"BLD",2393,"KRN",9.8,"NM","B","PXRMXX1",4)

"BLD",2393,"KRN",9.8,"NM","B","PXRMXX2",6)

"BLD",2393,"KRN",9.8,"NM","B","PXRMXXT",5)

"BLD",2393,"KRN",19,0)
19
"BLD",2393,"KRN",19,"NM",0)
^9.68A^4^4
"BLD",2393,"KRN",19,"NM",1,0)
PXRM EXTRACT EPI FINDING LIST^^0
"BLD",2393,"KRN",19,"NM",2,0)
PXRM REMINDER REPORTS^^0
"BLD",2393,"KRN",19,"NM",3,0)
PXRM REMINDERS DUE^^4^
"BLD",2393,"KRN",19,"NM",4,0)
PXRM EXTRACT EPI TOTALS^^0
"BLD",2393,"KRN",19,"NM","B","PXRM EXTRACT EPI FINDING LIST",1)

"BLD",2393,"KRN",19,"NM","B","PXRM EXTRACT EPI TOTALS",4)

"BLD",2393,"KRN",19,"NM","B","PXRM REMINDER REPORTS",2)

"BLD",2393,"KRN",19,"NM","B","PXRM REMINDERS DUE",3)

"BLD",2393,"KRN",19.1,0)
19.1
"BLD",2393,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",2393,"KRN",101,0)
101
"BLD",2393,"KRN",409.61,0)
409.61
"BLD",2393,"KRN",771,0)
771
"BLD",2393,"KRN",870,0)
870
"BLD",2393,"KRN",8994,0)
8994
"BLD",2393,"KRN","B",.4,.4)

"BLD",2393,"KRN","B",.401,.401)

"BLD",2393,"KRN","B",.402,.402)

"BLD",2393,"KRN","B",.403,.403)

"BLD",2393,"KRN","B",.5,.5)

"BLD",2393,"KRN","B",.84,.84)

"BLD",2393,"KRN","B",3.6,3.6)

"BLD",2393,"KRN","B",3.8,3.8)

"BLD",2393,"KRN","B",9.2,9.2)

"BLD",2393,"KRN","B",9.8,9.8)

"BLD",2393,"KRN","B",19,19)

"BLD",2393,"KRN","B",19.1,19.1)

"BLD",2393,"KRN","B",101,101)

"BLD",2393,"KRN","B",409.61,409.61)

"BLD",2393,"KRN","B",771,771)

"BLD",2393,"KRN","B",870,870)

"BLD",2393,"KRN","B",8994,8994)

"BLD",2393,"PRE")
PXRMP1IE
"BLD",2393,"QUES",0)
^9.62^^
"BLD",2393,"REQB",0)
^9.611^1^1
"BLD",2393,"REQB",1,0)
CLINICAL REMINDERS 1.5^2
"BLD",2393,"REQB","B","CLINICAL REMINDERS 1.5",1)

"DATA",811.5,3,0)
PREVIOUSLY ASSESSED HEP C RISK^N^1^3000424^3000825
"DATA",811.5,3,1,0)
^811.51^17^17^3000815^^^^
"DATA",811.5,3,1,1,0)
This term is available for patients who have previously had an assessment
"DATA",811.5,3,1,2,0)
completed at an institution outside the VA system, at another VA site, or
"DATA",811.5,3,1,3,0)
from historic records on site that may be unavailable in the current
"DATA",811.5,3,1,4,0)
VistA/CPRS system (i.e. archived electronic information, or information
"DATA",811.5,3,1,5,0)
contained within a paper chart not in the computer system).  
"DATA",811.5,3,1,6,0)
 
"DATA",811.5,3,1,7,0)
This term is primarily used to resolve the National Hepatitis C Risk
"DATA",811.5,3,1,8,0)
Assessment Clinical Reminder.  However, if the patient has had a previous
"DATA",811.5,3,1,9,0)
positive test, previous positive diagnosis for hepatitis C disease that
"DATA",811.5,3,1,10,0)
has been verified, but that the computer algorithm did not capture, use
"DATA",811.5,3,1,11,0)
one of this terms findings (health factor, education topic,...) to resolve
"DATA",811.5,3,1,12,0)
the Clinical Reminder. Further, you will be given the opportunity to place
"DATA",811.5,3,1,13,0)
a Free text comment on where and when this previous assessment occurred
"DATA",811.5,3,1,14,0)
and what criteria (i.e. lab test, diagnosis) were used.  For example, if
"DATA",811.5,3,1,15,0)
you choose this option, you could then type into the free text section
"DATA",811.5,3,1,16,0)
("Previous positive Hepatitis C antibody test at St. X hospital in Local
"DATA",811.5,3,1,17,0)
City, State on March 2000").
"DATA",811.5,3,20,0)
^811.52V^^0
"DATA",811.5,5,0)
HEP C VIRUS ANTIBODY POSITIVE^N^1^3000504^3000807
"DATA",811.5,5,1,0)
^^4^4^3000814^
"DATA",811.5,5,1,1,0)
This term represents positive test results on laboratory tests for
"DATA",811.5,5,1,2,0)
Hepatitis C virus antibody. Add the local hepatitis C virus antibody
"DATA",811.5,5,1,3,0)
laboratory tests as findings for this term. Include the CONDITION field to
"DATA",811.5,5,1,4,0)
check for the positive result value.
"DATA",811.5,5,20,0)
^811.52V
"DATA",811.5,6,0)
HEP C VIRUS ANTIBODY NEGATIVE^N^1^3000504^3000822
"DATA",811.5,6,1,0)
^^4^4^3000510^
"DATA",811.5,6,1,1,0)
This term represents negative test results on laboratory tests for
"DATA",811.5,6,1,2,0)
Hepatitis C virus antibody.  Add the local hepatitis C virus antibody
"DATA",811.5,6,1,3,0)
laboratory tests as findings for this term. Include the CONDITION field to
"DATA",811.5,6,1,4,0)
check for the negative result value.
"DATA",811.5,6,20,0)
^811.52V
"DATA",811.5,7,0)
HEPATITIS C INFECTION^N^1^3000504^3000823
"DATA",811.5,7,1,0)
^811.51^1^1^3000511^^^^
"DATA",811.5,7,1,1,0)
This term represents patient diagnosed with Hepatitis C infection.
"DATA",811.5,7,20,0)
^811.52V^1^1
"DATA",811.5,7,20,1,0)
2;PXD(811.2,
"DATA",811.5,8,0)
TRANSFERASE (AST) (SGOT)^N^1^3000521
"DATA",811.5,8,1,0)
^811.51^17^17^3000522^^
"DATA",811.5,8,1,1,0)
This term represents serum glutamic-oxaloacetic transaminase or AST
"DATA",811.5,8,1,2,0)
laboratory procedures. Enter the finding items from the Laboratory Test
"DATA",811.5,8,1,3,0)
file (#60) that represent this procedure.
"DATA",811.5,8,1,4,0)
 
"DATA",811.5,8,1,5,0)
National terms related to this term.
"DATA",811.5,8,1,6,0)
  WKLD CODE file (#64): The national lab test term is Transferase
"DATA",811.5,8,1,7,0)
    Aspartate  SGOT
"DATA",811.5,8,1,8,0)
 
"DATA",811.5,8,1,9,0)
  CPT File (#81) procedure:
"DATA",811.5,8,1,10,0)
    CPT CODE: 84450               SHORT NAME: TRANSFERASE (AST) (SGOT)
"DATA",811.5,8,1,11,0)
    CPT CATEGORY: CHEMISTRY               SOURCE: CPT
"DATA",811.5,8,1,12,0)
    EFFECTIVE DATE: JUN 01, 1994            STATUS: ACTIVE
"DATA",811.5,8,1,13,0)
    DESCRIPTION: TRANSFERASE;
"DATA",811.5,8,1,14,0)
    DESCRIPTION: ASPARTATE AMINO (AST) (SGOT)
"DATA",811.5,8,1,15,0)
 
"DATA",811.5,8,1,16,0)
  Lexicon: The CPT code is in the Lexicon term as a Laboratory Procedure
"DATA",811.5,8,1,17,0)
    term.
"DATA",811.5,8,20,0)
^811.52V
"DATA",811.5,9,0)
ALANINE AMINO (ALT) (SGPT)^N^1^3000521
"DATA",811.5,9,1,0)
^811.51^17^17^3000522^^
"DATA",811.5,9,1,1,0)
This term represents serum glutamic-pyruvic transaminase or ALT
"DATA",811.5,9,1,2,0)
laboratory tests. Enter the finding items from the Laboratory Test file
"DATA",811.5,9,1,3,0)
(#60) that represent the SGPT test.
"DATA",811.5,9,1,4,0)
 
"DATA",811.5,9,1,5,0)
National terms related to this term.
"DATA",811.5,9,1,6,0)
  WKLD CODE file (#64): The national lab test term is Transferase Alanine
"DATA",811.5,9,1,7,0)
  Amino  SGPT.
"DATA",811.5,9,1,8,0)
 
"DATA",811.5,9,1,9,0)
  CPT File (#81) procedure:
"DATA",811.5,9,1,10,0)
    CPT code: 84460    SHORT NAME: ALANINE AMINO (ALT) (SGPT)
"DATA",811.5,9,1,11,0)
    CPT CATEGORY: CHEMISTRY               SOURCE: CPT
"DATA",811.5,9,1,12,0)
    EFFECTIVE DATE: JUN 01, 1994          STATUS: ACTIVE
"DATA",811.5,9,1,13,0)
    DESCRIPTION: TRANSFERASE;
"DATA",811.5,9,1,14,0)
    DESCRIPTION: ALANINE AMINO (ALT) (SGPT)
"DATA",811.5,9,1,15,0)
 
"DATA",811.5,9,1,16,0)
  Lexicon: The CPT code is in the Lexicon term as a Laboratory Procedure
"DATA",811.5,9,1,17,0)
    term.
"DATA",811.5,9,20,0)
^811.52V
"DATA",811.5,10,0)
INTERFERON ALFA-2A^N^1^3000521
"DATA",811.5,10,1,0)
^^12^12^3000607^
"DATA",811.5,10,1,1,0)
This term represents the generic class of medication for Interferon
"DATA",811.5,10,1,2,0)
alfa-2A, Recombinant.  The VA GENERIC drug is distributed as a finding
"DATA",811.5,10,1,3,0)
for this term
"DATA",811.5,10,1,4,0)
 
"DATA",811.5,10,1,5,0)
National terms related to this term.
"DATA",811.5,10,1,6,0)
  VA GENERIC file (#50.6): The national generic drug is INTERFERON
"DATA",811.5,10,1,7,0)
      ALFA-2A.
"DATA",811.5,10,1,8,0)
 
"DATA",811.5,10,1,9,0)
  Lexicon Concept:  Interferon Alfa-2A recombinant injection (3 million
"DATA",811.5,10,1,10,0)
      units)
"DATA",811.5,10,1,11,0)
      CLASS: Chemical and Drugs   TYPE: Pharmacologic Substance
"DATA",811.5,10,1,12,0)
      HCPCS CODE: J9213
"DATA",811.5,10,20,0)
^811.52V^1^1
"DATA",811.5,10,20,1,0)
183;PSNDF(50.6,^^^^^^^45D
"DATA",811.5,11,0)
INTERFERON ALFA-2B^N^1^3000521
"DATA",811.5,11,1,0)
^811.51^19^19^3000607^^
"DATA",811.5,11,1,1,0)
This term represents the generic class of medication for Interferon
"DATA",811.5,11,1,2,0)
alfa-2B, Recombinant.  The VA GENERIC drug is distributed as a finding
"DATA",811.5,11,1,3,0)
for this term.
"DATA",811.5,11,1,4,0)
 
"DATA",811.5,11,1,5,0)
Use of Term:  This term is distributed for national roll-up to the EPI
"DATA",811.5,11,1,6,0)
Registry.
"DATA",811.5,11,1,7,0)
 
"DATA",811.5,11,1,8,0)
National terms related to this term:
"DATA",811.5,11,1,9,0)
  VA GENERIC file (#50.6): The national generic drug is INTERFERON
"DATA",811.5,11,1,10,0)
      ALFA-2B.
"DATA",811.5,11,1,11,0)
 
"DATA",811.5,11,1,12,0)
  HCPCS CPT CODE: J9214    SHORT NAME: Interferon alfa-2b inj
"DATA",811.5,11,1,13,0)
      CPT CATEGORY: CHEMOTHERAPY DRUGS      SOURCE: HCPCS
"DATA",811.5,11,1,14,0)
      EFFECTIVE DATE: JUN 01, 1994            STATUS: ACTIVE
"DATA",811.5,11,1,15,0)
      DESCRIPTION: INTERFERON, ALFA-2B, RECOMBINANT, 1 MILLION UNITS 
"DATA",811.5,11,1,16,0)
 
"DATA",811.5,11,1,17,0)
  Lexicon Concept:  Interferon Alfa-2B recombinant injection (1 million
"DATA",811.5,11,1,18,0)
      units)
"DATA",811.5,11,1,19,0)
      CLASS: Chemical and Drugs   TYPE: Pharmacologic Substance
"DATA",811.5,11,20,0)
^811.52V^1^1
"DATA",811.5,11,20,1,0)
1139;PSNDF(50.6,^^^^^^^45D
"DATA",811.5,12,0)
INTERFERON ALFA-2B/RIBAVIRIN^N^1^3000531
"DATA",811.5,12,1,0)
^811.51^1^1^3000607^^^^
"DATA",811.5,12,1,1,0)
This medication is for combination therapy.  
"DATA",811.5,12,20,0)
^811.52V^1^1
"DATA",811.5,12,20,1,0)
3510;PSNDF(50.6,^^^^^^^45D
"DATA",811.5,13,0)
INTERFERON ALFA-3N^N^1^3000531
"DATA",811.5,13,1,0)
^811.51^7^7^3000607^^
"DATA",811.5,13,1,1,0)
This term represents the VA-Generic file drug INTERFERON ALFA-3N. This is
"DATA",811.5,13,1,2,0)
also referred to as Human Leukocyte Derived.  
"DATA",811.5,13,1,3,0)
 
"DATA",811.5,13,1,4,0)
This term is distributed with mapping to the VA-Generic finding for
"DATA",811.5,13,1,5,0)
INTERFERON ALFA-3N.  Local formulary drugs may be added if desired,
"DATA",811.5,13,1,6,0)
however if your site has mapped the formulary drugs to the VA-Generic
"DATA",811.5,13,1,7,0)
Drugs, the forumulary drugs will automatically be used.
"DATA",811.5,13,20,0)
^811.52V^1^1
"DATA",811.5,13,20,1,0)
2237;PSNDF(50.6,^^^^^^^45D
"DATA",811.5,14,0)
INTERFERON ALFACON-1^N^1^3000531
"DATA",811.5,14,1,0)
^811.51^6^6^3000607^^
"DATA",811.5,14,1,1,0)
This term represents the VA-Generic file drug INTERFERON ALFACON-1.
"DATA",811.5,14,1,2,0)
 
"DATA",811.5,14,1,3,0)
This term is distributed with mapping to the VA-Generic finding for
"DATA",811.5,14,1,4,0)
INTERFERON ALFACON-1.  Local formulary drugs may be added if desired,
"DATA",811.5,14,1,5,0)
however if your site has mapped the formulary drugs to the VA-Generic
"DATA",811.5,14,1,6,0)
Drugs, the forumulary drugs will automatically be used.
"DATA",811.5,14,20,0)
^811.52V^1^1
"DATA",811.5,14,20,1,0)
3454;PSNDF(50.6,^^^^^^^45D
"DATA",811.5,15,0)
INTERFERON BETA-1A^N^1^3000531
"DATA",811.5,15,1,0)
^811.51^6^6^3000607^^
"DATA",811.5,15,1,1,0)
This term represents the VA-Generic file drug INTERFERON BETA-1A.
"DATA",811.5,15,1,2,0)
 
"DATA",811.5,15,1,3,0)
This term is distributed with mapping to the VA-Generic finding for
"DATA",811.5,15,1,4,0)
INTERFERON BETA-1A.  Local formulary drugs may be added if desired,however if
"DATA",811.5,15,1,5,0)
your site has mapped the formulary drugs to the VA-Generic Drugs, the 
"DATA",811.5,15,1,6,0)
forumulary drugs will automatically be used.
"DATA",811.5,15,20,0)
^811.52V^1^1
"DATA",811.5,15,20,1,0)
3348;PSNDF(50.6,^^^^^^^45D
"DATA",811.5,16,0)
INTERFERON BETA-1B^N^1^3000531
"DATA",811.5,16,1,0)
^811.51^6^6^3000607^^^
"DATA",811.5,16,1,1,0)
This term represents the VA-Generic file drug INTERFERON BETA-1B.
"DATA",811.5,16,1,2,0)
 
"DATA",811.5,16,1,3,0)
This term is distributed with mapping to the VA-Generic finding for
"DATA",811.5,16,1,4,0)
INTERFERON BETA-1B.  Local formulary drugs may be added if desired,however
"DATA",811.5,16,1,5,0)
if your site has mapped the formulary drugs to the VA-Generic Drugs, the
"DATA",811.5,16,1,6,0)
forumulary drugs will automatically be used.
"DATA",811.5,16,20,0)
^811.52V^1^1
"DATA",811.5,16,20,1,0)
3172;PSNDF(50.6,^^^^^^^45D
"DATA",811.5,17,0)
RIBAVIRIN^N^1^3000531^3000602
"DATA",811.5,17,1,0)
^811.51^6^6^3000825^^
"DATA",811.5,17,1,1,0)
This term represents the VA GENERIC file drug RIBAVIRIN.
"DATA",811.5,17,1,2,0)
 
"DATA",811.5,17,1,3,0)
This term is distributed with mapping to the VA Generic finding for
"DATA",811.5,17,1,4,0)
RIBAVIRIN. Local formulary drugs may be added if desired.  However, if
"DATA",811.5,17,1,5,0)
your site has mapped the formulary drugs to the VA Generic Drugs, the
"DATA",811.5,17,1,6,0)
formulary drugs will automatically be used.
"DATA",811.5,17,20,0)
^811.52V^1^1
"DATA",811.5,17,20,1,0)
1909;PSNDF(50.6,^^^^^^^45D
"DATA",811.5,18,0)
HAV Ab positive^N^1^3000531
"DATA",811.5,18,1,0)
^^5^5^3000531^
"DATA",811.5,18,1,1,0)
This term represents Hepatitis A virus antibody total positive.
"DATA",811.5,18,1,2,0)
 
"DATA",811.5,18,1,3,0)
Enter findings for the laboratory tests that represent the this test. Use
"DATA",811.5,18,1,4,0)
the condition field to clearly identify the positive results. 
"DATA",811.5,18,1,5,0)
(e.g., I (V="positive")!(V="pos")!(V="+")
"DATA",811.5,19,0)
HAV IgM Ab positive^N^1^3000531
"DATA",811.5,19,1,0)
^^6^6^3000531^
"DATA",811.5,19,1,1,0)
This term represents laboratory tests for Hepatitis A virus antibody
"DATA",811.5,19,1,2,0)
immunoglobulin M positive.
"DATA",811.5,19,1,3,0)
 
"DATA",811.5,19,1,4,0)
Enter findings from the laboratory test file that are used locally to
"DATA",811.5,19,1,5,0)
represent this term. Use the condition field to clearly identify the
"DATA",811.5,19,1,6,0)
positive results. e.g., I (V="positive")!(V="Pos")!(V="+")
"DATA",811.5,20,0)
HAV IgG positive^N^1^3000531
"DATA",811.5,20,1,0)
^^6^6^3000531^
"DATA",811.5,20,1,1,0)
This term represents laboratory tests for Hepatitis A virus antibody
"DATA",811.5,20,1,2,0)
immunoglobulin G positive.
"DATA",811.5,20,1,3,0)
 
"DATA",811.5,20,1,4,0)
Enter findings from the laboratory test file that are used locally to
"DATA",811.5,20,1,5,0)
represent this term. Use the condition field to clearly identify the
"DATA",811.5,20,1,6,0)
positive results. e.g., I (V="positive")!(V="Pos")!(V="+")
"DATA",811.5,21,0)
BILIRUBIN^N^1^3000531^3000722
"DATA",811.5,21,1,0)
^^9^9^3000815^
"DATA",811.5,21,1,1,0)
This term represents laboratory tests for Bilirubin that update the EPI
"DATA",811.5,21,1,2,0)
database when a Hepatitis A, B, or C positive test or a Hepatitis C
"DATA",811.5,21,1,3,0)
negative test is found within the extract date range.
"DATA",811.5,21,1,4,0)
 
"DATA",811.5,21,1,5,0)
No Conditions need to be defined to restrict Bilirubins from being sent to
"DATA",811.5,21,1,6,0)
the EPI database. 
"DATA",811.5,21,1,7,0)
 
"DATA",811.5,21,1,8,0)
The reminder definition VA-NATIONAL EPI LAB EXTRACT will screen the
"DATA",811.5,21,1,9,0)
Bilirubins because they are information finding items.
"DATA",811.5,21,20,0)
^811.52V^^0
"DATA",811.5,22,0)
HBs Ag positive^N^1^3000531^3000724
"DATA",811.5,22,1,0)
^811.51^12^12^3000531^^
"DATA",811.5,22,1,1,0)
This term represents laboratory tests for HBs Ag positive.  Another name
"DATA",811.5,22,1,2,0)
for this is Hepatitis B surface antigen positive.
"DATA",811.5,22,1,3,0)
 
"DATA",811.5,22,1,4,0)
Enter findings from the laboratory test file that are used locally to
"DATA",811.5,22,1,5,0)
represent this term. Use the condition field to clearly identify the
"DATA",811.5,22,1,6,0)
positive results. e.g., I (V["positive")!(V="+")
"DATA",811.5,22,1,7,0)
 
"DATA",811.5,22,1,8,0)
In order for the VHA to do surveillance for Hepatitis B, the Infectious
"DATA",811.5,22,1,9,0)
Disease Program Office is looking for laboratory evidence of infection
"DATA",811.5,22,1,10,0)
with hepatitis B.  This laboratory evidence of infection includes the
"DATA",811.5,22,1,11,0)
standard serological marker of the presence of Hepatitis B surface
"DATA",811.5,22,1,12,0)
antigen.
"DATA",811.5,22,20,0)
^811.52V
"DATA",811.5,23,0)
HBc Ab IgM positive^N^1^3000531
"DATA",811.5,23,1,0)
^811.51^12^12^3000601^^^
"DATA",811.5,23,1,1,0)
This term represents laboratory tests for Hepatitis B core antibody
"DATA",811.5,23,1,2,0)
immunoglobulin M positive.
"DATA",811.5,23,1,3,0)
 
"DATA",811.5,23,1,4,0)
Enter findings from the laboratory test file that are used locally to
"DATA",811.5,23,1,5,0)
represent this term. Use the condition field to clearly identify the
"DATA",811.5,23,1,6,0)
positive results. e.g., I (V["positive")!(V="+")
"DATA",811.5,23,1,7,0)
 
"DATA",811.5,23,1,8,0)
In order for the VHA to do surveillance for Hepatitis B, the Infectious
"DATA",811.5,23,1,9,0)
Disease Program Office is looking for laboratory evidence of infection
"DATA",811.5,23,1,10,0)
with hepatitis B.  This laboratory evidence of infection includes the
"DATA",811.5,23,1,11,0)
standard serological marker of the presence of Hepatitis B core antibody
"DATA",811.5,23,1,12,0)
immunoglobulin M.
"DATA",811.5,24,0)
HBs Ab positive^N^1^3000531
"DATA",811.5,24,1,0)
^811.51^12^12^3000531^^
"DATA",811.5,24,1,1,0)
This term represents reminder tests for Hepatitis B surface antibody
"DATA",811.5,24,1,2,0)
positive.
"DATA",811.5,24,1,3,0)
 
"DATA",811.5,24,1,4,0)
Enter findings from the laboratory test file that are used locally to
"DATA",811.5,24,1,5,0)
represent this term. Use the condition field to clearly identify the
"DATA",811.5,24,1,6,0)
positive results. e.g., I (V["positive")!(V="+")
"DATA",811.5,24,1,7,0)
 
"DATA",811.5,24,1,8,0)
In order for the VHA to do surveillance for Hepatitis B, the Infectious
"DATA",811.5,24,1,9,0)
Disease Program Office is looking for laboratory evidence of infection
"DATA",811.5,24,1,10,0)
with hepatitis B.  This laboratory evidence of infection includes the
"DATA",811.5,24,1,11,0)
standard serological marker of the presence of Hepatitis B surface
"DATA",811.5,24,1,12,0)
antibody.
"DATA",811.5,24,20,0)
^811.52V
"DATA",811.5,25,0)
HBe Ag positive^N^1^3000531
"DATA",811.5,25,1,0)
^811.51^10^10^3000531^^
"DATA",811.5,25,1,1,0)
This term represents laboratory tests for Hepatitis B e antigen positive.
"DATA",811.5,25,1,2,0)
 
"DATA",811.5,25,1,3,0)
Enter findings from the laboratory test file that are used locally to
"DATA",811.5,25,1,4,0)
represent this term. Use the condition field to clearly identify the
"DATA",811.5,25,1,5,0)
positive results. e.g., I (V["positive")!(V="+")
"DATA",811.5,25,1,6,0)
 
"DATA",811.5,25,1,7,0)
In order for the VHA to do surveillance for Hepatitis B, the Infectious
"DATA",811.5,25,1,8,0)
Disease Program Office is looking for laboratory evidence of infection
"DATA",811.5,25,1,9,0)
with hepatitis B.  This laboratory evidence of infection includes the
"DATA",811.5,25,1,10,0)
standard serological marker of the presence of Hepatitis B e antigen.
"DATA",811.9,27,0)
VA-HEP C RISK ASSESSMENT^^Hepatitis C Risk Assessment^^^
"DATA",811.9,27,1,0)
^811.92^3^3^3000828^^^^
"DATA",811.9,27,1,1,0)
Assess all patients for hepatitis C risk factors once. Patients with a
"DATA",811.9,27,1,2,0)
previous laboratory test for hepatitis C or a previous diagnosis of
"DATA",811.9,27,1,3,0)
hepatitis C do not require further risk assessment.
"DATA",811.9,27,2,0)
^^79^79^3000828^
"DATA",811.9,27,2,1,0)
This reminder is based on a policy letter published by the Under Secretary
"DATA",811.9,27,2,2,0)
of Health (USH) in June 1998.  The USH directed that "all patients will be
"DATA",811.9,27,2,3,0)
evaluated with respect to risk factors" for HCV. Clinicians are required
"DATA",811.9,27,2,4,0)
to record this assessment in the patients' medical records.  Based on risk
"DATA",811.9,27,2,5,0)
factors, antibody testing should be used according to an algorithm
"DATA",811.9,27,2,6,0)
included in the policy letter. 
"DATA",811.9,27,2,7,0)
 
"DATA",811.9,27,2,8,0)
According to the VHA Chief Consultant for its Acute Care Strategic Health
"DATA",811.9,27,2,9,0)
Care Group, the USH intends that each patient seeking care in a VHA
"DATA",811.9,27,2,10,0)
facility will be screened for HCV risk factors.  VISN officials were
"DATA",811.9,27,2,11,0)
advised of this mandate.
"DATA",811.9,27,2,12,0)
 
"DATA",811.9,27,2,13,0)
BEFORE USING THIS REMINDER, sites need to use the Reminder Term
"DATA",811.9,27,2,14,0)
Management option to define the local findings that are used to
"DATA",811.9,27,2,15,0)
represent the national reminder terms:
"DATA",811.9,27,2,16,0)
 
"DATA",811.9,27,2,17,0)
   RISK FACTOR FOR HEPATITIS C
"DATA",811.9,27,2,18,0)
     This term is released with the health factor RISK FACTOR FOR
"DATA",811.9,27,2,19,0)
     HEPATITIS C.  Map any local findings that meet the intent of this
"DATA",811.9,27,2,20,0)
     term in the REMINDER TERM file (811.5).
"DATA",811.9,27,2,21,0)
 
"DATA",811.9,27,2,22,0)
   NO RISK FACTORS FOR HEP C
"DATA",811.9,27,2,23,0)
     This term is released with the health factor NO RISK FACTORS FOR HEP
"DATA",811.9,27,2,24,0)
     C.  Map any local findings that meet the intent of this term in the
"DATA",811.9,27,2,25,0)
     REMINDER TERM file (811.5).
"DATA",811.9,27,2,26,0)
 
"DATA",811.9,27,2,27,0)
   DECLINED HEP C RISK ASSESSMENT 
"DATA",811.9,27,2,28,0)
     This term is released with the health factor NO RISK FACTORS FOR HEP
"DATA",811.9,27,2,29,0)
     C.  Map any local findings that meet the intent of this term in the
"DATA",811.9,27,2,30,0)
     REMINDER TERM file (811.5).
"DATA",811.9,27,2,31,0)
 
"DATA",811.9,27,2,32,0)
   PREVIOUSLY ASSESSED HEP C RISK
"DATA",811.9,27,2,33,0)
     This term is released with the health factor PREV POSITIVE TEST FOR
"DATA",811.9,27,2,34,0)
     HEP C. Map any local findings that identify the patient as previously
"DATA",811.9,27,2,35,0)
     assessed for Hepatitis C risk factors in the REMINDER TERM file
"DATA",811.9,27,2,36,0)
     (811.5). This term was originally distributed as PREV POSITIVE TEST
"DATA",811.9,27,2,37,0)
     FOR HEP C, but was changed to provide sites with a way to identify a
"DATA",811.9,27,2,38,0)
     patient as previously assessed for Hepatitis C risk factors.
"DATA",811.9,27,2,39,0)
 
"DATA",811.9,27,2,40,0)
     This term will also be used to document historical positive
"DATA",811.9,27,2,41,0)
     tests completed outside the facility.
"DATA",811.9,27,2,42,0)
 
"DATA",811.9,27,2,43,0)
   HEP C VIRUS ANTIBODY POSITIVE
"DATA",811.9,27,2,44,0)
     Map local HCVAb lab tests with a condition in the REMINDER TERM file.
"DATA",811.9,27,2,45,0)
     An example of the condition field might be: I V="positive"
"DATA",811.9,27,2,46,0)
     or I (V["P")!(V["p"). The text used in the condition definition 
"DATA",811.9,27,2,47,0)
     (I V="text") should be based on the local LABORATORY TEST file (60)
"DATA",811.9,27,2,48,0)
     print codes when defined, rather than the result in the LAB DATA file
"DATA",811.9,27,2,49,0)
     (63).
"DATA",811.9,27,2,50,0)
 
"DATA",811.9,27,2,51,0)
   HEP C VIRUS ANTIBODY NEGATIVE
"DATA",811.9,27,2,52,0)
     Map local HCVAb lab tests with a condition in the REMINDER TERM file.
"DATA",811.9,27,2,53,0)
     An example of the condition field might be: I V="negative"
"DATA",811.9,27,2,54,0)
     or I (V["N")!(V["n"). The text used in the condition definition 
"DATA",811.9,27,2,55,0)
     (I V="text") should be based on the local LABORATORY TEST file (60)
"DATA",811.9,27,2,56,0)
     print codes when defined, rather than the result in the LAB DATA file
"DATA",811.9,27,2,57,0)
     (63).
"DATA",811.9,27,2,58,0)
 
"DATA",811.9,27,2,59,0)
   HEPATITIS C INFECTION
"DATA",811.9,27,2,60,0)
     This term is released with the reminder taxonomy VA-HEPATITIS C
"DATA",811.9,27,2,61,0)
     INFECTION.  Note:  This taxonomy can be copied. The copy can be
"DATA",811.9,27,2,62,0)
     modified for local changes. The changes should be limited to the data
"DATA",811.9,27,2,63,0)
     source, since the diagnoses are already defined. (e.g. To eliminate
"DATA",811.9,27,2,64,0)
     using problem list diagnosis from the findings, use the PATIENT DATA
"DATA",811.9,27,2,65,0)
     SOURCE field to control where to look for the HEPATITIS C INFECTION
"DATA",811.9,27,2,66,0)
     diagnosis.  Alternatively you can define an expiration period to
"DATA",811.9,27,2,67,0)
     consider the diagnosis valid.)
"DATA",811.9,27,2,68,0)
     Map any local findings that meet the intent of this term in the
"DATA",811.9,27,2,69,0)
     REMINDER TERM file (811.5).
"DATA",811.9,27,2,70,0)
 
"DATA",811.9,27,2,71,0)
Each reminder term is defined in the reminder definition with an
"DATA",811.9,27,2,72,0)
expiration period of 2Y, so that sites can follow-up on patient risk
"DATA",811.9,27,2,73,0)
assessment data that was entered prior to 10/1/98. All sites will send
"DATA",811.9,27,2,74,0)
risk assessment data entered from 10/1/98 through the present to the
"DATA",811.9,27,2,75,0)
Emerging Pathogen Initiative (EPI) database. If the most recent data for
"DATA",811.9,27,2,76,0)
risk assessment was prior to 10/1/98, this reminder will be due.  The data
"DATA",811.9,27,2,77,0)
found prior to 10/1/98 is displayed to help the clinician document an
"DATA",811.9,27,2,78,0)
entry for the current encounter to reflect the risk assessment information
"DATA",811.9,27,2,79,0)
for the patient.
"DATA",811.9,27,7,0)
^811.97^1^1
"DATA",811.9,27,7,1,0)
99Y
"DATA",811.9,27,20,0)
^811.902V^7^7
"DATA",811.9,27,20,1,0)
3;PXRMD(811.5,^^^^^!^^2Y
"DATA",811.9,27,20,2,0)
4;PXRMD(811.5,^^^^^!^^2Y
"DATA",811.9,27,20,3,0)
2;PXRMD(811.5,^^^^^!^^2Y
"DATA",811.9,27,20,4,0)
1;PXRMD(811.5,^^^^^!
"DATA",811.9,27,20,5,0)
5;PXRMD(811.5,^^^^^!^^2Y
"DATA",811.9,27,20,6,0)
6;PXRMD(811.5,^^^^^!^^2Y
"DATA",811.9,27,20,7,0)
7;PXRMD(811.5,^^^^^!^^2Y
"DATA",811.9,27,31)
(SEX)&(AGE)
"DATA",811.9,27,32)
0^
"DATA",811.9,27,35)
(0)!FI(1)!FI(2)!FI(3)!FI(4)!FI(5)!FI(6)!FI(7)
"DATA",811.9,27,36)
7^1;2;3;4;5;6;7
"DATA",811.9,27,40)
0^
"DATA",811.9,27,42)
0^
"DATA",811.9,27,51)

"DATA",811.9,27,66,0)
^811.966^17^17^3000826^^
"DATA",811.9,27,66,1,0)
Patients should be assessed once for any one of the following risk factors
"DATA",811.9,27,66,2,0)
in the past or present:
"DATA",811.9,27,66,3,0)
   1.  Blood/Blood product prior to 1992
"DATA",811.9,27,66,4,0)
   2.  Illicit injected drug use
"DATA",811.9,27,66,5,0)
   3.  Unequivocal blood exposure
"DATA",811.9,27,66,6,0)
   4.  Multiple sexual partners
"DATA",811.9,27,66,7,0)
   5.  Hemodialysis
"DATA",811.9,27,66,8,0)
   6.  Tattoo/repeated body piercing
"DATA",811.9,27,66,9,0)
   7.  Intranasal cocaine use
"DATA",811.9,27,66,10,0)
   8.  Unexplained liver disease
"DATA",811.9,27,66,11,0)
   9.  Unexplained abnormal ALT value
"DATA",811.9,27,66,12,0)
  10.  Intemperate alcohol use
"DATA",811.9,27,66,13,0)
 
"DATA",811.9,27,66,14,0)
Patients with risk assessment information entered once prior to 10/1/98
"DATA",811.9,27,66,15,0)
need to be reassessed as current month data in order to get credit for
"DATA",811.9,27,66,16,0)
the risk assessment in the national Emerging Pathogens Initiative (EPI)
"DATA",811.9,27,66,17,0)
database.
"DATA",811.9,38,0)
VA-NATIONAL EPI LAB EXTRACT^^National Hepatitis Lab Extract^^^
"DATA",811.9,38,1,0)
^^153^153^3000825^
"DATA",811.9,38,1,1,0)
This reminder is used to identify and extract data to send to the
"DATA",811.9,38,1,2,0)
national EPI database.  The data extracted includes Hepatitis A, B, and C
"DATA",811.9,38,1,3,0)
laboratory tests.  This reminder is not for daily clinical care.  It is
"DATA",811.9,38,1,4,0)
used by an EPI patch, LR*5.2*260, to identify new data to send to the AAC
"DATA",811.9,38,1,5,0)
EPI national database. Sites may use this reminder in the reminder reports
"DATA",811.9,38,1,6,0)
to get a list of patients with laboratory data that the EPI is interested
"DATA",811.9,38,1,7,0)
in.
"DATA",811.9,38,1,8,0)
 
"DATA",811.9,38,1,9,0)
What determines whether this reminder applies to a patient? 
"DATA",811.9,38,1,10,0)
The reminder will extract laboratory data for patients who have any of the
"DATA",811.9,38,1,11,0)
findings listed in the patient cohort logic.  There are 9 laboratory
"DATA",811.9,38,1,12,0)
reminder terms in the patient cohort logic:
"DATA",811.9,38,1,13,0)
     HEP C VIRUS ANTIBODY POSITIVE
"DATA",811.9,38,1,14,0)
     HEP C VIRUS ANTIBODY NEGATIVE
"DATA",811.9,38,1,15,0)
     HAV Ab positive
"DATA",811.9,38,1,16,0)
     HAV IgM Ab positive
"DATA",811.9,38,1,17,0)
     HAV IgG positive
"DATA",811.9,38,1,18,0)
     HBs Ag positive
"DATA",811.9,38,1,19,0)
     HBc Ab IgM positive
"DATA",811.9,38,1,20,0)
     HBs Ab positive
"DATA",811.9,38,1,21,0)
     HBe Ag positive
"DATA",811.9,38,1,22,0)
 
"DATA",811.9,38,1,23,0)
 
"DATA",811.9,38,1,24,0)
If the patient data had one of these lab tests in the extract month, the
"DATA",811.9,38,1,25,0)
lab test data will go to Austin. When one of the labs above is found, the
"DATA",811.9,38,1,26,0)
most recent test for the following lab tests will be sent to Austin:
"DATA",811.9,38,1,27,0)
         TRANSFERASE (AST) (SGOT)
"DATA",811.9,38,1,28,0)
         ALANINE AMINO (ALT) (SGPT)
"DATA",811.9,38,1,29,0)
         BILIRUBIN 
"DATA",811.9,38,1,30,0)
 
"DATA",811.9,38,1,31,0)
What resolves this reminder?
"DATA",811.9,38,1,32,0)
This reminder does not have any resolution findings so it will always be
"DATA",811.9,38,1,33,0)
due.  This allows sites to use the reminder to report on patients who
"DATA",811.9,38,1,34,0)
have data updating the EPI national database. 
"DATA",811.9,38,1,35,0)
 
"DATA",811.9,38,1,36,0)
--------------------------------------------------------------
"DATA",811.9,38,1,37,0)
Hepatitis A Laboratory Tests:
"DATA",811.9,38,1,38,0)
 
"DATA",811.9,38,1,39,0)
Data collected for Hepatitis A is based on the following national reminder
"DATA",811.9,38,1,40,0)
terms which are patient cohort findings in the reminder:
"DATA",811.9,38,1,41,0)
        HAV Ab positive         Hepatitis A virus antibody total positive
"DATA",811.9,38,1,42,0)
        HAV IgM Ab positive     Hepatitis A virus antibody immunoglobulin
"DATA",811.9,38,1,43,0)
                                        M positive
"DATA",811.9,38,1,44,0)
        HAV IgG positive        Hepatitis A virus antibody immunoglobulin
"DATA",811.9,38,1,45,0)
                                        G positive
"DATA",811.9,38,1,46,0)
 
"DATA",811.9,38,1,47,0)
Background:
"DATA",811.9,38,1,48,0)
One of the goals of the Healthy People 2000 and 2010 initiatives of the
"DATA",811.9,38,1,49,0)
Department of Health and Human Services is to decrease certain infectious
"DATA",811.9,38,1,50,0)
diseases, especially those that are vaccine preventable.  Acute infection
"DATA",811.9,38,1,51,0)
with Hepatitis A is one such disease that has specific objectives present
"DATA",811.9,38,1,52,0)
in the Healthy People objectives.
"DATA",811.9,38,1,53,0)
 
"DATA",811.9,38,1,54,0)
The purpose of surveillance for this disease is to record all cases as
"DATA",811.9,38,1,55,0)
diagnosed by the laboratory.  A positive laboratory test for the presence
"DATA",811.9,38,1,56,0)
of Hepatitis A virus is needed.  Usually this criterion is met by presence
"DATA",811.9,38,1,57,0)
of antibodies to the Hepatitis A virus.  In particular, the IgM antibody
"DATA",811.9,38,1,58,0)
against hepatitis A is the test most commonly used for determining acute
"DATA",811.9,38,1,59,0)
Hepatitis A infection.  There are other antibody tests available for
"DATA",811.9,38,1,60,0)
Hepatitis A.  These tests usually indicate past infection with hepatitis A
"DATA",811.9,38,1,61,0)
(or in some circumstances may indicate evidence of previous vaccination).
"DATA",811.9,38,1,62,0)
Usually the IgG antibody against Hepatitis A, OR the Total antibody
"DATA",811.9,38,1,63,0)
against Hepatitis A (a test that does not discriminate between IgM or IgG,
"DATA",811.9,38,1,64,0)
but can show evidence of exposure) are the tests done for this purpose.
"DATA",811.9,38,1,65,0)
 
"DATA",811.9,38,1,66,0)
The Infectious Disease Program Office, VAHQ, is looking for the presence
"DATA",811.9,38,1,67,0)
of any positive antibody to Hepatitis A, whether it be recorded as "weakly
"DATA",811.9,38,1,68,0)
positive," "strongly positive," "positive," or "present."  If other
"DATA",811.9,38,1,69,0)
phrases are used to describe a test result, you can differentiate
"DATA",811.9,38,1,70,0)
responses upon entry in the term findings via the CONDITION field. As an
"DATA",811.9,38,1,71,0)
example, the words "present" and "not present" might be used to designate
"DATA",811.9,38,1,72,0)
"positive" vs. "negative";  however, they would not allow retrieval of
"DATA",811.9,38,1,73,0)
only the positive cases as both phrases contain the word, "present." Also,
"DATA",811.9,38,1,74,0)
numerical values of results are not readily useable.  All of the lab tests
"DATA",811.9,38,1,75,0)
related to the Hepatitis A terms above need to be defined as findings for
"DATA",811.9,38,1,76,0)
the national reminder terms with the conditions that identify the positive
"DATA",811.9,38,1,77,0)
laboratory test results.
"DATA",811.9,38,1,78,0)
 
"DATA",811.9,38,1,79,0)
--------------------------------------------------------------------
"DATA",811.9,38,1,80,0)
Hepatitis B laboratory tests:
"DATA",811.9,38,1,81,0)
 
"DATA",811.9,38,1,82,0)
Data collected for Hepatitis B is based on the following national reminder
"DATA",811.9,38,1,83,0)
terms which define the patient cohort:
"DATA",811.9,38,1,84,0)
        HBs Ag positive         Hepatitis B surface antigen positive
"DATA",811.9,38,1,85,0)
        HBc Ab IgM positive     Hepatitis B core antibody immunoglobulin  
"DATA",811.9,38,1,86,0)
                                                M positive
"DATA",811.9,38,1,87,0)
        HBs Ab positive         Hepatitis B surface antibody positive
"DATA",811.9,38,1,88,0)
        HBe Ag positive         Hepatitis B e antigen positive 
"DATA",811.9,38,1,89,0)
 
"DATA",811.9,38,1,90,0)
Background:
"DATA",811.9,38,1,91,0)
One of the goals of the Healthy People 2000 and 2010 initiatives of the
"DATA",811.9,38,1,92,0)
Department of Health and Human Services is to decrease certain infectious
"DATA",811.9,38,1,93,0)
diseases, especially those that are vaccine preventable.  Acute and
"DATA",811.9,38,1,94,0)
chronic infection with Hepatitis B is one such disease that has specific
"DATA",811.9,38,1,95,0)
objectives present in the Healthy People objectives.
"DATA",811.9,38,1,96,0)
 
"DATA",811.9,38,1,97,0)
Both acute and chronic diseases have significant morbidity and can
"DATA",811.9,38,1,98,0)
contribute to mortality.  Further, infection with Hepatitis B can
"DATA",811.9,38,1,99,0)
complicate the medical course of people with other liver ailments.  As
"DATA",811.9,38,1,100,0)
such, surveillance for both acute and chronic diseases is important.  In
"DATA",811.9,38,1,101,0)
order for the VHA to do surveillance for these diseases, we are looking
"DATA",811.9,38,1,102,0)
for laboratory evidence of  infection with Hepatitis B.  This laboratory
"DATA",811.9,38,1,103,0)
evidence of infection includes the following standard serological markers:
"DATA",811.9,38,1,104,0)
        Presence of the Hepatitis B surface antigen
"DATA",811.9,38,1,105,0)
        Presence of antibodies against the Hepatitis B core antigen (in
"DATA",811.9,38,1,106,0)
           particular, the IgM antibody)
"DATA",811.9,38,1,107,0)
        Presence of antibodies against the Hepatitis B surface antigen
"DATA",811.9,38,1,108,0)
        Presence of the Hepatitis B e antigen.
"DATA",811.9,38,1,109,0)
 
"DATA",811.9,38,1,110,0)
These are not all of the tests that can be done for Hepatitis B, but they
"DATA",811.9,38,1,111,0)
are the ones likely to pick up acute cases (new) or those chronic cases
"DATA",811.9,38,1,112,0)
that are likely to be infectious to other persons.  Please list only those
"DATA",811.9,38,1,113,0)
tests at your facility that are in keeping with what addresses the EPI
"DATA",811.9,38,1,114,0)
Hepatitis B target data-acute cases, or those cases likely to be
"DATA",811.9,38,1,115,0)
infectious to others.  
"DATA",811.9,38,1,116,0)
 
"DATA",811.9,38,1,117,0)
Note:  There are advanced polymerase chain reaction (PCR) based tests that
"DATA",811.9,38,1,118,0)
can measure the amount of virus in the bloodstream.  These are not done at
"DATA",811.9,38,1,119,0)
all sites and have not yet been FDA approved.  As such, these PCR tests
"DATA",811.9,38,1,120,0)
will not be used for case determination.
"DATA",811.9,38,1,121,0)
 
"DATA",811.9,38,1,122,0)
------------------------------------------------------------
"DATA",811.9,38,1,123,0)
Hepatitis C laboratory tests:
"DATA",811.9,38,1,124,0)
 
"DATA",811.9,38,1,125,0)
Data collected for Hepatitis C is based on the following national reminder
"DATA",811.9,38,1,126,0)
terms:
"DATA",811.9,38,1,127,0)
         HEP C VIRUS ANTIBODY NEGATIVE    
"DATA",811.9,38,1,128,0)
         HEP C VIRUS ANTIBODY POSITIVE    
"DATA",811.9,38,1,129,0)
                
"DATA",811.9,38,1,130,0)
Background: 
"DATA",811.9,38,1,131,0)
It is important to identify what differences there are in those
"DATA",811.9,38,1,132,0)
people who are positive for Hepatitis C antibody as opposed to those who
"DATA",811.9,38,1,133,0)
do not have Hepatitis C antibody present.  Therefore, please review those
"DATA",811.9,38,1,134,0)
results that you have designated to be placed into the Hepatitis C
"DATA",811.9,38,1,135,0)
Antibody Positive portion of the EPI.  Be sure that they truly meet the
"DATA",811.9,38,1,136,0)
definition, as noted in this Reminder definition and the related Reminder
"DATA",811.9,38,1,137,0)
Term definitions.
"DATA",811.9,38,1,138,0)
 
"DATA",811.9,38,1,139,0)
All the results of Hepatitis C antibody testing that are not considered
"DATA",811.9,38,1,140,0)
"positive" need to be mapped as "negative". Therefore, all of the
"DATA",811.9,38,1,141,0)
Hepatitis C antibody results that your facility reports will be mapped to
"DATA",811.9,38,1,142,0)
either the HEP C VIRUS ANTIBODY POSITIVE reminder term or the HEP C VIRUS
"DATA",811.9,38,1,143,0)
ANTIBODY NEGATIVE reminder term. reminder term.  Not positive terms may
"DATA",811.9,38,1,144,0)
include "negative," "indeterminant," "indeterminate," "undetectable."  As
"DATA",811.9,38,1,145,0)
with the Hepatitis C Antibody Positive component, be sure phrases that
"DATA",811.9,38,1,146,0)
truly differentiate results are used (e.g. the results of "present" and
"DATA",811.9,38,1,147,0)
"not present" are not truly differentiated by computer retrieval as both
"DATA",811.9,38,1,148,0)
contain the word "present").
"DATA",811.9,38,1,149,0)
 
"DATA",811.9,38,1,150,0)
TIP on Positive and Negative Conditions to define for laboratory tests:
"DATA",811.9,38,1,151,0)
When defining the condition for the negative results, you could use the
"DATA",811.9,38,1,152,0)
same text that was used for the positive results, but add '= (not equal)
"DATA",811.9,38,1,153,0)
or '[ (not contain), instead of the = or [.
"DATA",811.9,38,7,0)
^811.97^1^1
"DATA",811.9,38,7,1,0)
1M
"DATA",811.9,38,20,0)
^811.902V^20^12
"DATA",811.9,38,20,1,0)
5;PXRMD(811.5,^^^^^^!
"DATA",811.9,38,20,2,0)
6;PXRMD(811.5,^^^^^^!
"DATA",811.9,38,20,3,0)
8;PXRMD(811.5,
"DATA",811.9,38,20,4,0)
9;PXRMD(811.5,
"DATA",811.9,38,20,13,0)
18;PXRMD(811.5,^^^^^^!
"DATA",811.9,38,20,14,0)
19;PXRMD(811.5,^^^^^^!
"DATA",811.9,38,20,15,0)
20;PXRMD(811.5,^^^^^^!
"DATA",811.9,38,20,16,0)
21;PXRMD(811.5,
"DATA",811.9,38,20,17,0)
24;PXRMD(811.5,^^^^^^!
"DATA",811.9,38,20,18,0)
22;PXRMD(811.5,^^^^^^!
"DATA",811.9,38,20,19,0)
23;PXRMD(811.5,^^^^^^!
"DATA",811.9,38,20,20,0)
25;PXRMD(811.5,^^^^^^!
"DATA",811.9,38,31)
(SEX)&(AGE)!FI(1)!FI(2)!FI(13)!FI(14)!FI(15)!FI(17)!FI(18)!FI(19)!FI(20)
"DATA",811.9,38,32)
9^1;2;13;14;15;17;18;19;20
"DATA",811.9,38,35)

"DATA",811.9,38,36)
0^
"DATA",811.9,38,40)
0^
"DATA",811.9,38,42)
3^3;4;16
"DATA",811.9,38,60,0)
^^2^2^3000713^
"DATA",811.9,38,60,1,0)
This patient has Hepatitis laboratory data that will be rolled up to the
"DATA",811.9,38,60,2,0)
national EPI data base.
"DATA",811.9,38,61,0)
^^2^2^3000713^
"DATA",811.9,38,61,1,0)
This patient has no Hepatitis laboratory data to send to the national EPI
"DATA",811.9,38,61,2,0)
data base.
"DATA",811.9,39,0)
VA-NATIONAL EPI RX EXTRACT^^National Hepatitis Med Extract
"DATA",811.9,39,1,0)
^811.92^53^53^3000713^^^
"DATA",811.9,39,1,1,0)
This reminder is used to identify and extract pharmacy data to send to the
"DATA",811.9,39,1,2,0)
national EPI database.  This reminder is not for daily clinical care.  It
"DATA",811.9,39,1,3,0)
is used by an EPI patch, LR*5.2*260, to identify inpatient and outpatient
"DATA",811.9,39,1,4,0)
medications given to patients within a specified date range. The data is 
"DATA",811.9,39,1,5,0)
sent to the Austin Automation Center EPI national database. Sites may use
"DATA",811.9,39,1,6,0)
this reminder in the reminder reports to get a list of patients with data
"DATA",811.9,39,1,7,0)
that the EPI is interested in.
"DATA",811.9,39,1,8,0)
 
"DATA",811.9,39,1,9,0)
What determines whether this reminder applies to a patient? 
"DATA",811.9,39,1,10,0)
The reminder will extract medication data for patients who have any of the
"DATA",811.9,39,1,11,0)
findings listed in the patient cohort logic.  There are 8 reminder terms
"DATA",811.9,39,1,12,0)
for medications in the patient cohort logic. If a patient has one of the
"DATA",811.9,39,1,13,0)
medications in the last 45 days, then the reminder applies to
"DATA",811.9,39,1,14,0)
the patient.
"DATA",811.9,39,1,15,0)
 
"DATA",811.9,39,1,16,0)
What resolves this reminder?
"DATA",811.9,39,1,17,0)
This reminder does not have any resolution findings so it will always be
"DATA",811.9,39,1,18,0)
due.  This allows sites to use the reminder to report on patients who
"DATA",811.9,39,1,19,0)
have medication data updating the EPI national database. 
"DATA",811.9,39,1,20,0)
 
"DATA",811.9,39,1,21,0)
-----------------------------------------------------------------
"DATA",811.9,39,1,22,0)
Hepatitis Medications:
"DATA",811.9,39,1,23,0)
 
"DATA",811.9,39,1,24,0)
All patients receiving one of the medications below will have medication
"DATA",811.9,39,1,25,0)
information sent to the EPI DB. The pharmacy release date is used to
"DATA",811.9,39,1,26,0)
determine if the patient received the medication. The reminder terms are
"DATA",811.9,39,1,27,0)
defined to look for medications that were active in the last 45 days.
"DATA",811.9,39,1,28,0)
This allows extracts run on the 15th of the month to have medication
"DATA",811.9,39,1,29,0)
information for the prior month.  The reminder terms are distributed with
"DATA",811.9,39,1,30,0)
mapping to VA GENERIC file #50.6 (aka: national drug file).  If any of
"DATA",811.9,39,1,31,0)
your dispensed drugs are not mapped to the national drug file entries,
"DATA",811.9,39,1,32,0)
you may either map the dispensed drug to the national drug file or add the
"DATA",811.9,39,1,33,0)
dispensed drug to the findings for the reminder term.
"DATA",811.9,39,1,34,0)
 
"DATA",811.9,39,1,35,0)
Data collected for Hepatitis treatment is based on the following national
"DATA",811.9,39,1,36,0)
reminder terms (source of terms is VA GENERIC file):
"DATA",811.9,39,1,37,0)
   INTERFERON ALFA-2A
"DATA",811.9,39,1,38,0)
   INTERFERON ALFA-2B
"DATA",811.9,39,1,39,0)
   INTERFERON ALFA-2B/RIBAVIRIN 
"DATA",811.9,39,1,40,0)
   INTERFERON ALFA-3N
"DATA",811.9,39,1,41,0)
   INTERFERON ALFACON-1
"DATA",811.9,39,1,42,0)
   INTERFERON BETA-1A
"DATA",811.9,39,1,43,0)
   INTERFERON BETA-1B
"DATA",811.9,39,1,44,0)
   RIBAVIRIN
"DATA",811.9,39,1,45,0)
 
"DATA",811.9,39,1,46,0)
Background:
"DATA",811.9,39,1,47,0)
One of the goals of the Healthy People 2000 and 2010 initiatives of the
"DATA",811.9,39,1,48,0)
Department of Health and Human Services is to decrease certain infectious
"DATA",811.9,39,1,49,0)
diseases, especially those that are vaccine preventable. Both acute and
"DATA",811.9,39,1,50,0)
chronic diseases have significant morbidity and can contribute to
"DATA",811.9,39,1,51,0)
mortality.  Further, infection with Hepatitis can complicate the medical
"DATA",811.9,39,1,52,0)
course of people with other liver ailments.  As such, surveillance for
"DATA",811.9,39,1,53,0)
both acute and chronic diseases is important. 
"DATA",811.9,39,7,0)
^811.97^1^1
"DATA",811.9,39,7,1,0)
45D
"DATA",811.9,39,20,0)
^811.902V^12^8
"DATA",811.9,39,20,5,0)
10;PXRMD(811.5,^^^^^^!
"DATA",811.9,39,20,6,0)
11;PXRMD(811.5,^^^^^^!
"DATA",811.9,39,20,7,0)
12;PXRMD(811.5,^^^^^^!
"DATA",811.9,39,20,8,0)
13;PXRMD(811.5,^^^^^^!
"DATA",811.9,39,20,9,0)
14;PXRMD(811.5,^^^^^^!
"DATA",811.9,39,20,10,0)
15;PXRMD(811.5,^^^^^^!
"DATA",811.9,39,20,11,0)
16;PXRMD(811.5,^^^^^^!
"DATA",811.9,39,20,12,0)
17;PXRMD(811.5,^^^^^^!
"DATA",811.9,39,31)
(SEX)&(AGE)!FI(5)!FI(6)!FI(7)!FI(8)!FI(9)!FI(10)!FI(11)!FI(12)
"DATA",811.9,39,32)
8^5;6;7;8;9;10;11;12
"DATA",811.9,39,35)

"DATA",811.9,39,36)
0^
"DATA",811.9,39,40)
0^
"DATA",811.9,39,42)
0^
"DATA",811.9,39,60,0)
^^2^2^3000713^
"DATA",811.9,39,60,1,0)
This patient has Hepatitis medication data that will be rolled up to the
"DATA",811.9,39,60,2,0)
national EPI data base.
"DATA",811.9,39,61,0)
^811.961^2^2^3000713^^^
"DATA",811.9,39,61,1,0)
This patient has no Hepatitis medication data to send to the national EPI
"DATA",811.9,39,61,2,0)
data base.
"FIA",810.3)
REMINDER EXTRACT SUMMARY
"FIA",810.3,0)
^PXRMXT(810.3,
"FIA",810.3,0,0)
810.3I
"FIA",810.3,0,1)
y^y^f^^^^n
"FIA",810.3,0,10)

"FIA",810.3,0,11)

"FIA",810.3,0,"RLRO")

"FIA",810.3,0,"VR")
1.5^PXRM
"FIA",810.3,810.3)
0
"FIA",810.3,810.31)
0
"FIA",810.3,810.32)
0
"FIA",811.5)
REMINDER TERM
"FIA",811.5,0)
^PXRMD(811.5,
"FIA",811.5,0,0)
811.5OI
"FIA",811.5,0,1)
y^y^f^^y^PXRM EPI LAB AND MED TERMS^y^o^n
"FIA",811.5,0,10)

"FIA",811.5,0,11)

"FIA",811.5,0,"RLRO")
^DIBT(473,1)
"FIA",811.5,0,"VR")
1.5^PXRM
"FIA",811.5,811.5)
0
"FIA",811.5,811.51)
0
"FIA",811.5,811.52)
0
"FIA",811.9)
REMINDER DEFINITION
"FIA",811.9,0)
^PXD(811.9,
"FIA",811.9,0,0)
811.9
"FIA",811.9,0,1)
n^n^f^^y^^y^r^n
"FIA",811.9,0,10)

"FIA",811.9,0,11)
I (Y=38)!(Y=39)!(Y=27)
"FIA",811.9,0,"RLRO")

"FIA",811.9,0,"VR")
1.5^PXRM
"FIA",811.9,811.9)
0
"FIA",811.9,811.9002)
0
"FIA",811.9,811.90021)
0
"FIA",811.9,811.9003)
0
"FIA",811.9,811.902)
0
"FIA",811.9,811.9024)
0
"FIA",811.9,811.9025)
0
"FIA",811.9,811.92)
0
"FIA",811.9,811.93)
0
"FIA",811.9,811.961)
0
"FIA",811.9,811.965)
0
"FIA",811.9,811.966)
0
"FIA",811.9,811.97)
0
"FIA",811.9,811.973)
0
"FIA",811.9,811.974)
0
"FRV1",811.5,"10,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"10,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"11,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"11,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"12,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"12,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"13,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"13,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"14,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"14,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"15,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"15,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"16,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"16,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"17,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"17,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"18,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"18,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"19,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"19,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"20,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"20,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"21,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"21,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"22,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"22,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"23,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"23,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"24,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"24,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"25,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"25,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"3,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"3,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"5,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"5,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"6,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"6,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"7,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"7,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"8,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"8,0",3,"F")
;PXRMD(811.6,
"FRV1",811.5,"9,0",3)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1",811.5,"9,0",3,"F")
;PXRMD(811.6,
"FRV1K",811.5,"10,0",3)
B
"FRV1K",811.5,"10,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"11,0",3)
B
"FRV1K",811.5,"11,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"12,0",3)
B
"FRV1K",811.5,"12,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"13,0",3)
B
"FRV1K",811.5,"13,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"14,0",3)
B
"FRV1K",811.5,"14,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"15,0",3)
B
"FRV1K",811.5,"15,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"16,0",3)
B
"FRV1K",811.5,"16,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"17,0",3)
B
"FRV1K",811.5,"17,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"18,0",3)
B
"FRV1K",811.5,"18,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"19,0",3)
B
"FRV1K",811.5,"19,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"20,0",3)
B
"FRV1K",811.5,"20,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"21,0",3)
B
"FRV1K",811.5,"21,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"22,0",3)
B
"FRV1K",811.5,"22,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"23,0",3)
B
"FRV1K",811.5,"23,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"24,0",3)
B
"FRV1K",811.5,"24,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"25,0",3)
B
"FRV1K",811.5,"25,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"3,0",3)
B
"FRV1K",811.5,"3,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"5,0",3)
B
"FRV1K",811.5,"5,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"6,0",3)
B
"FRV1K",811.5,"6,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"7,0",3)
B
"FRV1K",811.5,"7,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"8,0",3)
B
"FRV1K",811.5,"8,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"FRV1K",811.5,"9,0",3)
B
"FRV1K",811.5,"9,0",3,1)
INFECTIOUS DISEASES PROGRAM OFFICE, VAHQ
"INI")
PRE^PXRMP1I
"INIT")
POST^PXRMP1I
"IX",811.5,811.5,"B",0)
811.5^B^New style B cross-reference^R^^F^IR^I^811.5^^^^^LS
"IX",811.5,811.5,"B",1)
S ^PXRMD(811.5,"B",$E(X,1,64),DA)=""
"IX",811.5,811.5,"B",2)
K ^PXRMD(811.5,"B",$E(X,1,64),DA)
"IX",811.5,811.5,"B",2.5)
K ^PXRMD(811.5,"B")
"IX",811.5,811.5,"B",11.1,0)
^.114IA^1^1
"IX",811.5,811.5,"B",11.1,1,0)
1^F^811.5^.01^64^1^F
"IX",811.5,811.5,"B",11.1,1,3)

"IX",811.5,811.5,"D",0)
811.5^D^New look-up on term type.^R^^F^IR^I^811.5^^^^^LS
"IX",811.5,811.5,"D",1)
S ^PXRMD(811.5,"D",X,DA)=""
"IX",811.5,811.5,"D",2)
K ^PXRMD(811.5,"D",X,DA)
"IX",811.5,811.5,"D",2.5)
K ^PXRMD(811.5,"D")
"IX",811.5,811.5,"D",11.1,0)
^.114IA^1^1
"IX",811.5,811.5,"D",11.1,1,0)
1^F^811.5^.02^^1^F
"IX",811.5,811.5,"D",11.1,1,3)

"IX",811.9,811.9,"AE",0)
811.9^AE^Build the internal patient cohort logic^MU^^F^I^I^811.9^^^^^A
"IX",811.9,811.9,"AE",.1,0)
^^1^1^3000110^
"IX",811.9,811.9,"AE",.1,1,0)
This cross-reference builds the internal patient cohort logic.
"IX",811.9,811.9,"AE",1)
D CPPCLS^PXRMLOGX(DA,X),BLDINFL^PXRMLOGX(DA)
"IX",811.9,811.9,"AE",1.4)
S X=1 I X2="" S X=0
"IX",811.9,811.9,"AE",2)
D BLDPCLS^PXRMLOGX(DA),BLDINFL^PXRMLOGX(DA)
"IX",811.9,811.9,"AE",2.4)
S X=1 I $$EDITNXR^PXRMLOGX(.X1,.X2) S X=0
"IX",811.9,811.9,"AE",11.1,0)
^.114IA^1^1
"IX",811.9,811.9,"AE",11.1,1,0)
1^F^811.9^30^^^F
"IX",811.9,811.9,"AF",0)
811.9^AF^Cross-reference for building internal resolution logic^MU^^F^I^I^811.9^^^^^A
"IX",811.9,811.9,"AF",.1,0)
^^1^1^3000110^
"IX",811.9,811.9,"AF",.1,1,0)
This cross-reference builds the internal resolution logic.
"IX",811.9,811.9,"AF",1)
D CPRESLS^PXRMLOGX(DA,X),BLDINFL^PXRMLOGX(DA)
"IX",811.9,811.9,"AF",1.4)
S X=1 I X2="" S X=0
"IX",811.9,811.9,"AF",2)
D BLDRESLS^PXRMLOGX(DA),BLDINFL^PXRMLOGX(DA)
"IX",811.9,811.9,"AF",2.4)
S X=1 I $$EDITNXR^PXRMLOGX(.X1,.X2) S X=0
"IX",811.9,811.9,"AF",11.1,0)
^.114IA^1^1
"IX",811.9,811.9,"AF",11.1,1,0)
1^F^811.9^34^^^F
"IX",811.9,811.9,"B",0)
811.9^B^B cross-reference^R^^F^IR^I^811.9^^^^^LS
"IX",811.9,811.9,"B",.1,0)
^^1^1^3000222^
"IX",811.9,811.9,"B",.1,1,0)
This is the "B" cross-reference redone as a new style cross-reference.
"IX",811.9,811.9,"B",1)
S ^PXD(811.9,"B",$E(X,1,35),DA)=""
"IX",811.9,811.9,"B",2)
K ^PXD(811.9,"B",$E(X,1,35),DA)
"IX",811.9,811.9,"B",2.5)
K ^PXD(811.9,"B")
"IX",811.9,811.9,"B",11.1,0)
^.114IA^1^1
"IX",811.9,811.9,"B",11.1,1,0)
1^F^811.9^.01^35^1^F
"IX",811.9,811.9,"B",11.1,1,3)

"IX",811.9,811.9,"D",0)
811.9^D^Look up by Print Name^R^^F^IR^I^811.9^^^^^LS
"IX",811.9,811.9,"D",.1,0)
^^1^1^3000216^
"IX",811.9,811.9,"D",.1,1,0)
This cross-reference is used for look-up by the reminder's Print Name.
"IX",811.9,811.9,"D",1)
S ^PXD(811.9,"D",$E(X,1,35),DA)=""
"IX",811.9,811.9,"D",2)
K ^PXD(811.9,"D",$E(X,1,35),DA)
"IX",811.9,811.9,"D",2.5)
K ^PXD(811.9,"D")
"IX",811.9,811.9,"D",11.1,0)
^.114IA^1^1
"IX",811.9,811.9,"D",11.1,1,0)
1^F^811.9^1.2^35^1^F
"IX",811.9,811.902,"AE",0)
811.902^AE^Build all logic strings^MU^^R^IR^I^811.902^^^^^A
"IX",811.9,811.902,"AE",1)
D BLDALL^PXRMLOGX(DA(1),"")
"IX",811.9,811.902,"AE",2)
D BLDALL^PXRMLOGX(DA(1),DA)
"IX",811.9,811.902,"AE",2.4)
S X=1 I $$EDITNXR^PXRMLOGX(.X1,.X2) S X=0
"IX",811.9,811.902,"AE",11.1,0)
^.114IA^1^1
"IX",811.9,811.902,"AE",11.1,1,0)
1^F^811.902^.01^^1^F
"IX",811.9,811.902,"AE",11.1,1,3)

"IX",811.9,811.902,"AF",0)
811.902^AF^Check for rebuild of age findings list^MU^^R^I^I^811.902^^^^^A
"IX",811.9,811.902,"AF",.1,0)
^^2^2^2990924^
"IX",811.9,811.902,"AF",.1,1,0)
When MINIMUM AGE, MAXIMUM AGE, or REMINDER FREQUENCY are changed then
"IX",811.9,811.902,"AF",.1,2,0)
rebuild the age findings list.
"IX",811.9,811.902,"AF",1)
D BLDAFL^PXRMLOGX(DA(1),"")
"IX",811.9,811.902,"AF",1.4)
S X=1 I $$DELNXR^PXRMLOGX(.X2) S X=0
"IX",811.9,811.902,"AF",2)
D BLDAFL^PXRMLOGX(DA(1),DA)
"IX",811.9,811.902,"AF",2.4)
S X=1 I $$EDITNXR^PXRMLOGX(.X1,.X2) S X=0
"IX",811.9,811.902,"AF",11.1,0)
^.114IA^4^3
"IX",811.9,811.902,"AF",11.1,2,0)
1^F^811.902^1^^^F
"IX",811.9,811.902,"AF",11.1,3,0)
2^F^811.902^2^^^F
"IX",811.9,811.902,"AF",11.1,4,0)
3^F^811.902^3^^^F
"IX",811.9,811.902,"AG",0)
811.902^AG^Check for rebuild of resolution findings list^MU^^R^I^I^811.902^^^^^A
"IX",811.9,811.902,"AG",.1,0)
^^2^2^2990924^
"IX",811.9,811.902,"AG",.1,1,0)
When USE IN RESOLUTION LOGIC is changed then rebuild the resolution
"IX",811.9,811.902,"AG",.1,2,0)
findings list.
"IX",811.9,811.902,"AG",1)
D BLDRESLS^PXRMLOGX(DA(1),"")
"IX",811.9,811.902,"AG",1.4)
S X=1 I X2="" S X=0
"IX",811.9,811.902,"AG",2)
D BLDRESLS^PXRMLOGX(DA(1),DA)
"IX",811.9,811.902,"AG",2.4)
S X=1 I $$EDITNXR^PXRMLOGX(.X1,.X2) S X=0
"IX",811.9,811.902,"AG",11.1,0)
^.114IA^3^1
"IX",811.9,811.902,"AG",11.1,3,0)
1^F^811.902^7^^^F
"IX",811.9,811.902,"AH",0)
811.902^AH^Check for rebuild of patient cohort findings list^MU^^R^I^I^811.902^^^^^A
"IX",811.9,811.902,"AH",.1,0)
^^2^2^2990924^
"IX",811.9,811.902,"AH",.1,1,0)
Whenever USE IN PATIENT COHORT LOGIC is changed rebuild the patient cohort
"IX",811.9,811.902,"AH",.1,2,0)
logic list.
"IX",811.9,811.902,"AH",1)
D BLDPCLS^PXRMLOGX(DA(1),"")
"IX",811.9,811.902,"AH",1.4)
S X=1 I X2="" S X=0
"IX",811.9,811.902,"AH",2)
D BLDPCLS^PXRMLOGX(DA(1),DA)
"IX",811.9,811.902,"AH",2.4)
S X=1 I $$EDITNXR^PXRMLOGX(.X1,.X2) S X=0
"IX",811.9,811.902,"AH",11.1,0)
^.114IA^2^1
"IX",811.9,811.902,"AH",11.1,2,0)
1^F^811.902^8^^^F
"IX",811.9,811.902,"AI",0)
811.902^AI^Check for rebuild of information findings list^MU^^R^I^I^811.902^^^^^A
"IX",811.9,811.902,"AI",.1,0)
^^3^3^2990924^
"IX",811.9,811.902,"AI",.1,1,0)
Whenever any of the following changes rebuild the information findings list:
"IX",811.9,811.902,"AI",.1,2,0)
MINIMUM AGE, MAXIMUM AGE, REMINDER FREQUENCY, USE IN RESOLUTION LOGIC,
"IX",811.9,811.902,"AI",.1,3,0)
USE IN PATIENT COHORT LOGIC
"IX",811.9,811.902,"AI",1)
D BLDINFL^PXRMLOGX(DA(1),"")
"IX",811.9,811.902,"AI",1.4)
S X=1 I $$DELNXR^PXRMLOGX(.X2) S X=0
"IX",811.9,811.902,"AI",2)
D BLDINFL^PXRMLOGX(DA(1),DA)
"IX",811.9,811.902,"AI",2.4)
S X=1 I $$EDITNXR^PXRMLOGX(.X1,.X2) S X=0
"IX",811.9,811.902,"AI",11.1,0)
^.114IA^7^6
"IX",811.9,811.902,"AI",11.1,2,0)
1^F^811.902^1^^^F
"IX",811.9,811.902,"AI",11.1,3,0)
2^F^811.902^1^^^F
"IX",811.9,811.902,"AI",11.1,4,0)
3^F^811.902^2^^^F
"IX",811.9,811.902,"AI",11.1,5,0)
4^F^811.902^3^^^F
"IX",811.9,811.902,"AI",11.1,6,0)
5^F^811.902^7^^^F
"IX",811.9,811.902,"AI",11.1,7,0)
6^F^811.902^8^^^F
"KEY",811.5,811.5,"A",0)
811.5^A^P^29
"KEY",811.5,811.5,"A",2,0)
^.312IA^1^1
"KEY",811.5,811.5,"A",2,1,0)
.01^811.5^1
"KEY",811.9,811.9,"B",0)
811.9^B^P^43
"KEY",811.9,811.9,"B",2,0)
^.312IA^1^1
"KEY",811.9,811.9,"B",2,1,0)
.01^811.9^1
"KEYPTR",811.5,811.5,"A")
811.5^B
"KEYPTR",811.9,811.9,"B")
811.9^B
"KRN",.4,988,-1)
0^3
"KRN",.4,988,0)
PXRM EXTRACT EPI FINDING HDR^3000801.0148^@^810.3^^@^3000815
"KRN",.4,988,"%D",0)
^^20^20^3000829^
"KRN",.4,988,"%D",1,0)
This option is used to print a header describing the extract reporting
"KRN",.4,988,"%D",2,0)
date range, extract date, task and total patients who had reminders
"KRN",.4,988,"%D",3,0)
evaluated as well as total patients with findings.
"KRN",.4,988,"%D",4,0)
 
"KRN",.4,988,"%D",5,0)
The Extract findings are based on reminder terms in the 3 Hepatitis C
"KRN",.4,988,"%D",6,0)
national reminders. 
"KRN",.4,988,"%D",7,0)
 - The pharmacy medications mapped to reminder terms are used to get
"KRN",.4,988,"%D",8,0)
inpatient orders and renewals and outpatient fills, refills, and partial
"KRN",.4,988,"%D",9,0)
fills.
"KRN",.4,988,"%D",10,0)
 - The laboratory tests mapped to reminder terms are used to search the
"KRN",.4,988,"%D",11,0)
Lab results to identify target patients with data.
"KRN",.4,988,"%D",12,0)
 - The Health Factors mapped to reminder terms are used to identify target
"KRN",.4,988,"%D",13,0)
patients with data (V HEALTH FACTOR).
"KRN",.4,988,"%D",14,0)
 - The Education Topics mapped to reminder terms are used to identify
"KRN",.4,988,"%D",15,0)
target patients with data (V PATIENT ED).
"KRN",.4,988,"%D",16,0)
 - The Exams mapped to reminder terms are used to identify target
"KRN",.4,988,"%D",17,0)
patients with data (V EXAM).
"KRN",.4,988,"%D",18,0)
 - The diagnosis related to taxonomies mapped to reminder terms are
"KRN",.4,988,"%D",19,0)
used to identify target patients with encounters treating the diagnosis 
"KRN",.4,988,"%D",20,0)
(V POV).
"KRN",.4,988,"F",1)
.01;C1;L30;X~"Date Range: ";C34;X~.02;C46;X~"-";X~.03;X~"Extract Date: ";C32;X~.06;C46;L15;X~"Total Patients Evaluated:     ";C1;X~.07;R6;X~
"KRN",.4,988,"F",2)
"Total Patients with Findings: ";C1;X~.08;R6;X~"Finding      SSN        Patient            Enctr Type  Date";C1;X~
"KRN",.4,988,"F",3)
"-------------------------------------------------------------";C1;X~
"KRN",.4,988,"H")
@
"KRN",.4,988,"SUB")
1
"KRN",.4,989,-1)
0^4
"KRN",.4,989,0)
PXRM EXTRACT EPI FINDING LIST^3000801.0037^^810.3^^@^3000815
"KRN",.4,989,"%D",0)
^^3^3^3000825^
"KRN",.4,989,"%D",1,0)
This template is used to print reminder extract results from the LREPI
"KRN",.4,989,"%D",2,0)
ENHANCE MANUAL RUN and LREPI NIGHTLY TASK. The template lists finding
"KRN",.4,989,"%D",3,0)
items and SSNs.
"KRN",.4,989,"F",1)
10,.04;C1;L40;X;N~10," ";C9;X~10,D FORMATB^PXRMXXT;X;Z;"D FORMATB^PXRMXXT"~10,D PDEM^PXRMXXT;X;Z;"D PDEM^PXRMXXT"~10,.01;L15;C25;X~10," ";C42;X~
"KRN",.4,989,"F",2)
10,D PFIND^PXRMXXT;X;Z;"D PFIND^PXRMXXT"~10,D DELVAR^PXRMXXT;X;Z;"D DELVAR^PXRMXXT"~
"KRN",.4,989,"H")
[PXRM EXTRACT EPI FINDING HDR]
"KRN",.4,989,"SUB")
1
"KRN",.4,990,-1)
0^5
"KRN",.4,990,0)
PXRM EXTRACT EPI FINDING TOT^3000801.0252^@^810.3^^@^3000825
"KRN",.4,990,"%D",0)
^.4001^2^2^3000825^^^
"KRN",.4,990,"%D",1,0)
This print template is used to print totals for finding items found for an
"KRN",.4,990,"%D",2,0)
extract.
"KRN",.4,990,"F",1)
.01;C1;S1;L30;X~"Date Range: ";C34;X~.02;C46;X~"-";X~.03;X~"Extract Date: ";C32;X~.06;C46;L15;X~"Total Patients Evaluated:     ";C5;X~.07;R6;X~
"KRN",.4,990,"F",2)
"Total Patients with Findings: ";C5;X~.08;R6;X~"Totals by Finding Item               Finding  Unique Patient";C5;S1;X~
"KRN",.4,990,"F",3)
"                                       Count       Count";C5;X~20,.01;C10;X~20,.02;C43;R6;X~20,.03;C55;R6;X~
"KRN",.4,990,"H")
REMINDER EXTRACT TOTALS
"KRN",.401,471,-1)
0^1
"KRN",.401,471,0)
PXRM EXTRACT EPI BY FIND_PT^3000815.0255^^810.3^^@^3000815
"KRN",.401,471,2,0)
^.4014^3^3
"KRN",.401,471,2,1,0)
810.3^.01^NAME^^^^^^^4
"KRN",.401,471,2,1,"ASK")
1
"KRN",.401,471,2,1,"F")
LREPI 00/05 08140/z^LREPI 00/05 081400
"KRN",.401,471,2,1,"GET")
S DISX(1)=$P($G(^PXRMXT(810.3,D0,0)),U)
"KRN",.401,471,2,1,"IX")
^PXRMXT(810.3,"B",^PXRMXT(810.3,^2
"KRN",.401,471,2,1,"QCON")
I (DISX(1)]]"LREPI 00/05 08140/z")&(DISX(1)']]"LREPI 00/05/081500")
"KRN",.401,471,2,1,"SER")
28.0000^0.9655
"KRN",.401,471,2,1,"T")
LREPI 00/05/081500^LREPI 00/05/081500
"KRN",.401,471,2,1,"TXT")
NAME from LREPI 00/05 081400 to LREPI 00/05/081500
"KRN",.401,471,2,2,0)
810.31^^FINDING ITEM^".04^;S1^^^^^4
"KRN",.401,471,2,2,1,0)
^.40141^1^1
"KRN",.401,471,2,2,1,1,0)
810.3^1
"KRN",.401,471,2,2,1,"B",810.3,1)

"KRN",.401,471,2,2,3,0)
^.401419^1^1
"KRN",.401,471,2,2,3,1,0)
OVF1^9.2
"KRN",.401,471,2,2,3,1,"OVF0")
N C S C=$S(X="":-1,'$D(@(U_$P(X,";",2)_"0)")):-1,1:$P(^(0),U,2)),X=$S(X="":X,'$D(^(+X,0)):"",1:$P(^(0),U,1)),Y=X,C=$S($D(^DD(+C,.01,0)):$P(^(0),U,2),1:"D") D:X]"" Y^DIQ:C'["D" S X=Y
"KRN",.401,471,2,2,3,"B","OVF1",1)

"KRN",.401,471,2,2,"CM")
S Y(1)=$S($D(^PXRMXT(810.3,D0,1,D1,0)):^(0),1:"") S X=$P(Y(1),U,4) X DPP(2,"OVF1",9.2) I D1>0 S DISX(2)=X
"KRN",.401,471,2,2,"GET")
S Y(1)=$S($D(^PXRMXT(810.3,D0,1,D1,0)):^(0),1:"") S X=$P(Y(1),U,4) X DPP(2,"OVF1",9.2) I D1>0 S DISX(2)=X
"KRN",.401,471,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,471,2,2,"TXT")
FINDING ITEM not null
"KRN",.401,471,2,3,0)
810.31^^PATIENT:SSN^"^^^^^^4
"KRN",.401,471,2,3,1,0)
^.40141^1^1
"KRN",.401,471,2,3,1,1,0)
810.3^1
"KRN",.401,471,2,3,1,"B",810.3,1)

"KRN",.401,471,2,3,3,0)
^.401419^1^1
"KRN",.401,471,2,3,3,1,0)
OVF1^9.2
"KRN",.401,471,2,3,3,1,"OVF0")
S I(1,0)=$G(D1),I(0,0)=$G(D0),Y(1)=$S($D(^PXRMXT(810.3,D0,1,D1,0)):^(0),1:""),D0=$P(Y(1),U,1) S:'D0!'$D(^DPT(+D0,0)) D0=-1 S Y(101)=$S($D(^DPT(D0,0)):^(0),1:"")
"KRN",.401,471,2,3,3,"B","OVF1",1)

"KRN",.401,471,2,3,"CM")
X DPP(3,"OVF1",9.2) S X=$P(Y(101),U,9) S D0=I(0,0) S D1=I(1,0) I D1>0 S DISX(3)=X
"KRN",.401,471,2,3,"GET")
X DPP(3,"OVF1",9.2) S X=$P(Y(101),U,9) S D0=I(0,0) S D1=I(1,0) I D1>0 S DISX(3)=X
"KRN",.401,471,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,471,2,3,"TXT")
PATIENT:SSN not null
"KRN",.401,471,2,"B",810.3,1)

"KRN",.401,471,2,"B",810.31,2)

"KRN",.401,471,2,"B",810.31,3)

"KRN",.401,471,"%D",0)
^^6^6^3000825^
"KRN",.401,471,"%D",1,0)
This sort template sorts the reminder extract findings for an extract
"KRN",.401,471,"%D",2,0)
based on finding item and social security number.  The social security
"KRN",.401,471,"%D",3,0)
number is what the Austin Automation Center (AAC) returns in error
"KRN",.401,471,"%D",4,0)
messages if there are problems with the extract data. This report may be
"KRN",.401,471,"%D",5,0)
useful to help you find problem data based on the social security
"KRN",.401,471,"%D",6,0)
number in the AAC error messages.
"KRN",.401,473,-1)
0^2
"KRN",.401,473,0)
PXRM EPI LAB AND MED TERMS^3000815.0205^@^811.5^^@^3000815
"KRN",.401,473,"%D",0)
^^3^3^3000825^
"KRN",.401,473,"%D",1,0)
These are the reminder terms used for Hepatitis C extracts of lab and
"KRN",.401,473,"%D",2,0)
medication terms.  They include an updated description for the PREVIOUSLY
"KRN",.401,473,"%D",3,0)
ASSESSED HEP C RISK term (previously called PREV POSITIVE TEST FOR HEP C).
"KRN",.401,473,"DA")
DIS("C1",
"KRN",.401,473,"DA",1)
S X=$S('$D(D0):"",D0<0:"",1:D0)
"KRN",.401,473,"DA",2)
S X=$S('$D(D0):"",D0<0:"",1:D0)
"KRN",.401,473,"DA",3)
S X=$S('$D(D0):"",D0<0:"",1:D0)
"KRN",.401,473,"DC",1)
-1^=3
"KRN",.401,473,"DC",2)
-2^>4
"KRN",.401,473,"DC",3)
-3^<26
"KRN",.401,473,"DIS",1)
S X=$S('$D(D0):"",D0<0:"",1:D0) I X=3
"KRN",.401,473,"DIS",2)
S X=$S('$D(D0):"",D0<0:"",1:D0) I X>4 S X=$S('$D(D0):"",D0<0:"",1:D0) I X<26
"KRN",.401,473,"DL")
2
"KRN",.401,473,"DL",0)

"KRN",.401,473,"DL",1)
^1^
"KRN",.401,473,"DL",2)
^2^3^
"KRN",.401,473,"O",0)
^.4011^3^3^3000825^^
"KRN",.401,473,"O",1,0)
NUMBER EQUALS 3
"KRN",.401,473,"O",2,0)
 Or NUMBER GREATER THAN 4
"KRN",.401,473,"O",3,0)
   and NUMBER LESS THAN 26
"KRN",.401,473,"QR")
3000815.020744^22
"KRN",19,7709,-1)
4^3
"KRN",19,7709,0)
PXRM REMINDERS DUE
"KRN",19,7710,-1)
0^2
"KRN",19,7710,0)
PXRM REMINDER REPORTS^Reminder Reports^^M^^^^^^^^CLINICAL REMINDERS
"KRN",19,7710,1,0)
^^9^9^3000825^
"KRN",19,7710,1,1,0)
This is a menu of Clinical Reminder reports that clinicians can use for
"KRN",19,7710,1,2,0)
summary and detailed level information about patients' reminders due and 
"KRN",19,7710,1,3,0)
satisfied.  This option also contains reports that clinical coordinators
"KRN",19,7710,1,4,0)
can use to review data extracted based on reminder definitions. 
"KRN",19,7710,1,5,0)
 
"KRN",19,7710,1,6,0)
The EPI extract finding list and total options are specific to the
"KRN",19,7710,1,7,0)
Hepatitis C Extract project.  The extracted data is based on the following
"KRN",19,7710,1,8,0)
reminders: VA-HEP C RISK ASSESSMENT, VA-NATIONAL EPI LAB EXTRACT, and
"KRN",19,7710,1,9,0)
VA-NATIONAL EPI RX EXTRACT.
"KRN",19,7710,10,0)
^19.01IP^3^3
"KRN",19,7710,10,1,0)
7709^D^1
"KRN",19,7710,10,1,"^")
PXRM REMINDERS DUE
"KRN",19,7710,10,2,0)
8108^L^11
"KRN",19,7710,10,2,"^")
PXRM EXTRACT EPI FINDING LIST
"KRN",19,7710,10,3,0)
8109^T^10
"KRN",19,7710,10,3,"^")
PXRM EXTRACT EPI TOTALS
"KRN",19,7710,99)
58287,9403
"KRN",19,7710,"U")
REMINDER REPORTS
"KRN",19,8108,-1)
0^1
"KRN",19,8108,0)
PXRM EXTRACT EPI FINDING LIST^Extract EPI List by Finding and SSN^^P^^^^^^^y^CLINICAL REMINDERS
"KRN",19,8108,1,0)
^^30^30^3000825^
"KRN",19,8108,1,1,0)
This option allows printing extract results stored in the REMINDER
"KRN",19,8108,1,2,0)
EXTRACT SUMMARY file (810.3).  This option lists extracted data by
"KRN",19,8108,1,3,0)
finding item and social security number. The finding items are loaded into
"KRN",19,8108,1,4,0)
the REMINDER EXTRACT SUMMARY file when one of the following options is
"KRN",19,8108,1,5,0)
run:
"KRN",19,8108,1,6,0)
   LREPI ENHANCE MANUAL RUN    Lab Search/Extract Manual Run (Enhanced)
"KRN",19,8108,1,7,0)
   LREPI NIGHTLY TASK          Lab Search/Extract Nightly Task
"KRN",19,8108,1,8,0)
 
"KRN",19,8108,1,9,0)
The Lab EPI (Emerging Pathogens Initiative) extract name follows the
"KRN",19,8108,1,10,0)
convention: LREPI YY/MM MMDDYY, where the YY/MM is the year and month from
"KRN",19,8108,1,11,0)
the date range specified by the LREPI extract option that created the
"KRN",19,8108,1,12,0)
extract. MMDDYY is the month, day and year that the extract was run. The
"KRN",19,8108,1,13,0)
prefix of LREPI identifies the extract as the result of LREPI extract
"KRN",19,8108,1,14,0)
options (manual or automatic run for the LREPI Lab Search/Extract
"KRN",19,8108,1,15,0)
Protocol).
"KRN",19,8108,1,16,0)
 
"KRN",19,8108,1,17,0)
To print all extracts for the target reporting month,enter "LREPI YY/MM"
"KRN",19,8108,1,18,0)
at the FROM prompt, with the year and month's data to be reported.  At
"KRN",19,8108,1,19,0)
the TO prompt, you can limit the print to extracts for the reporting month
"KRN",19,8108,1,20,0)
by adding a suffix to the LREPI YY/MM, for example "LREPI YY/MM z" will
"KRN",19,8108,1,21,0)
get all extracts that were created for the target reporting month,
"KRN",19,8108,1,22,0)
regardless of when they were run.
"KRN",19,8108,1,23,0)
 
"KRN",19,8108,1,24,0)
If there have been multiple runs for the target month, you can further
"KRN",19,8108,1,25,0)
define the FROM and TO range by specifying LREPI YY/MM MMDDYY with the
"KRN",19,8108,1,26,0)
MMDDYY being the date the report was run. There will normally only be one
"KRN",19,8108,1,27,0)
extract per month.  More than one will exist if your site runs the LREPI
"KRN",19,8108,1,28,0)
ENHANCE MANUAL RUN to correct errors found by the Austin Automation
"KRN",19,8108,1,29,0)
Center on the monthly transmission of EPI data sent by the LREPI NIGHTLY
"KRN",19,8108,1,30,0)
TASK.
"KRN",19,8108,60)
PXRMXT(810.3,
"KRN",19,8108,63)
[PXRM EXTRACT EPI FINDING LIST]
"KRN",19,8108,64)
[PXRM EXTRACT EPI BY FIND_PT]
"KRN",19,8108,"U")
EXTRACT EPI LIST BY FINDING AN
"KRN",19,8109,-1)
0^4
"KRN",19,8109,0)
PXRM EXTRACT EPI TOTALS^Extract EPI Totals^^P^^^^^^^y^CLINICAL REMINDERS
"KRN",19,8109,1,0)
^^3^3^3000825^
"KRN",19,8109,1,1,0)
This option is used to summarize total counts for each type of finding
"KRN",19,8109,1,2,0)
item that was extracted for the target date range of the LREPI ENHANCE
"KRN",19,8109,1,3,0)
MANUAL RUN or the LREPI NIGHTLY TASK option run.
"KRN",19,8109,60)
PXRMXT(810.3,
"KRN",19,8109,62)

"KRN",19,8109,63)
[PXRM EXTRACT EPI FINDING TOT]
"KRN",19,8109,64)
NAME
"KRN",19,8109,66)

"KRN",19,8109,"U")
EXTRACT EPI TOTALS
"MBREQ")
0
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",6,.401)
.401;6;;;EDEOUT^DIFROMSO(.401,DA,"",XPDA);FPRE^DIFROMSI(.401,"",XPDA);EPRE^DIFROMSI(.401,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.401,DA,"",XPDA);DEL^DIFROMSK(.401,"",%)
"ORD",6,.401,0)
SORT TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PGL",811.5,0,3,.03)
SPONSOR^P811.6^PXRMD(811.6,^0;3^Q
"PGL",811.9,0,5,1.4)
RELATED REMINDER GUIDELINE^*P811.9^PXD(811.9,^0;5^S DIC("S")="I $E($P(^(0),U,1),1,4)=""VA-*""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"PGL",811.9,51,1,51)
LINKED REMINDER DIALOG^*P801.41'^PXRMD(801.41,^51;1^S DIC("S")="I $P(^(0),U,4)=""R""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"PKG",364,-1)
1^1
"PKG",364,0)
CLINICAL REMINDERS^PXRM^Clinical Reminders^^^3000614
"PKG",364,20,0)
^9.402P^^
"PKG",364,22,0)
^9.49I^1^1
"PKG",364,22,1,0)
1.5^3000619^3000622^1342
"PKG",364,22,1,"PAH",1,0)
1^3000829
"PKG",364,22,1,"PAH",1,1,0)
^^256^256^3000829
"PKG",364,22,1,"PAH",1,1,1,0)
  This patch adds:
"PKG",364,22,1,"PAH",1,1,2,0)
    * 2 new reminder definitions to the REMINDER DEFINITION file (811.9)
"PKG",364,22,1,"PAH",1,1,3,0)
    * 18 new national terms to the REMINDER TERM file (811.5)
"PKG",364,22,1,"PAH",1,1,4,0)
    * 1 new file, REMINDER EXTRACT SUMMARY (810.3), that temporarily
"PKG",364,22,1,"PAH",1,1,5,0)
      stores data extracted from reminder evaluation processing when
"PKG",364,22,1,"PAH",1,1,6,0)
      updating the EPI database. This temporary data can be used to
"PKG",364,22,1,"PAH",1,1,7,0)
      compare to data in HL7 messages sent to the EPI database, and
"PKG",364,22,1,"PAH",1,1,8,0)
      validate that the appropriate data is extracted.
"PKG",364,22,1,"PAH",1,1,9,0)
    * 2 new options added to the PXRM REMINDER REPORTS option menu to
"PKG",364,22,1,"PAH",1,1,10,0)
      print data from the REMINDER EXTRACT SUMMARY file (810.3)
"PKG",364,22,1,"PAH",1,1,11,0)
    * 2 new sort templates, one to identify terms to distribute and one
"PKG",364,22,1,"PAH",1,1,12,0)
      for the REMINDER EXTRACT SUMMARY file
"PKG",364,22,1,"PAH",1,1,13,0)
    * 3 new print templates, all related to reporting the EPI findings
"PKG",364,22,1,"PAH",1,1,14,0)
 
"PKG",364,22,1,"PAH",1,1,15,0)
  This patch modifies the:
"PKG",364,22,1,"PAH",1,1,16,0)
    * description in the VA-HEP C RISK ASSESSMENT reminder definition
"PKG",364,22,1,"PAH",1,1,17,0)
    * description for 3 previously distributed Reminder Terms
"PKG",364,22,1,"PAH",1,1,18,0)
    * name and description for the Reminder Term PREV POSITIVE TEST FOR
"PKG",364,22,1,"PAH",1,1,19,0)
      HEP C, which is renamed PREVIOUSLY ASSESSED HEP C RISK
"PKG",364,22,1,"PAH",1,1,20,0)
 
"PKG",364,22,1,"PAH",1,1,21,0)
  This patch will work with the LR*5.2*260 patch and two pharmacy
"PKG",364,22,1,"PAH",1,1,22,0)
  patches (PSO*7*45 and PSJ*5*48) to extract Hepatitis C risk
"PKG",364,22,1,"PAH",1,1,23,0)
  assessment, laboratory and medication data. The extracted data will be
"PKG",364,22,1,"PAH",1,1,24,0)
  used to update the EPI database at the AAC.
"PKG",364,22,1,"PAH",1,1,25,0)
 
"PKG",364,22,1,"PAH",1,1,26,0)
 General Overview:
"PKG",364,22,1,"PAH",1,1,27,0)
 =================
"PKG",364,22,1,"PAH",1,1,28,0)
  This patch is released in response to Congressional reporting
"PKG",364,22,1,"PAH",1,1,29,0)
  requirements and a policy letter distributed by the Under Secretary
"PKG",364,22,1,"PAH",1,1,30,0)
  of Health addressing treatment of Hepatitis patients.
"PKG",364,22,1,"PAH",1,1,31,0)
 
"PKG",364,22,1,"PAH",1,1,32,0)
  The data extracted for Risk Assessment is based on the VA-HEP C RISK
"PKG",364,22,1,"PAH",1,1,33,0)
  ASSESSMENT reminder definition.  The data extracted from laboratory is
"PKG",364,22,1,"PAH",1,1,34,0)
  based on the VA-NATIONAL EPI LAB EXTRACT reminder, previously
"PKG",364,22,1,"PAH",1,1,35,0)
  distributed as VA-NATIONAL EPI DB UPDATE.  Both of these reminders were
"PKG",364,22,1,"PAH",1,1,36,0)
  first released in the Clinical Reminders V.1.5 package. A new reminder
"PKG",364,22,1,"PAH",1,1,37,0)
  definition, VA-NATIONAL EPI RX EXTRACT, is distributed in this patch for
"PKG",364,22,1,"PAH",1,1,38,0)
  extracting medications. These three reminder definitions provide the
"PKG",364,22,1,"PAH",1,1,39,0)
  criteria for extracting the risk assessment, lab, and medication data.
"PKG",364,22,1,"PAH",1,1,40,0)
 
"PKG",364,22,1,"PAH",1,1,41,0)
  The reminder evaluation and update to the EPI database occurs on the
"PKG",364,22,1,"PAH",1,1,42,0)
  15th of the month following the reporting month. The option that manages
"PKG",364,22,1,"PAH",1,1,43,0)
  this update is the LREPI NIGHTLY TASK.  This task currently runs nightly
"PKG",364,22,1,"PAH",1,1,44,0)
  at each site. Note: The monthly task on the 15th occurs because the LAG
"PKG",364,22,1,"PAH",1,1,45,0)
  DAYS field in the LAB SEARCH/EXTRACT file (69.5) is set to "15" for each
"PKG",364,22,1,"PAH",1,1,46,0)
  pathogen. The LR*5.2*260 patch contains new processing logic that sends
"PKG",364,22,1,"PAH",1,1,47,0)
  data extracted from reminder extract results to the EPI database.
"PKG",364,22,1,"PAH",1,1,48,0)
 
"PKG",364,22,1,"PAH",1,1,49,0)
  This patch also fixes a problem where CUSTOMIZED PATIENT COHORT LOGIC
"PKG",364,22,1,"PAH",1,1,50,0)
was 
"PKG",364,22,1,"PAH",1,1,51,0)
  not being used in the reminder evaluation. (NOIS SLC-0600-52703).
"PKG",364,22,1,"PAH",1,1,52,0)
 
"PKG",364,22,1,"PAH",1,1,53,0)
 NOIS Messages:
"PKG",364,22,1,"PAH",1,1,54,0)
 ==============
"PKG",364,22,1,"PAH",1,1,55,0)
 SLC-0600-52703
"PKG",364,22,1,"PAH",1,1,56,0)
 MON-0800-50154
"PKG",364,22,1,"PAH",1,1,57,0)
 
"PKG",364,22,1,"PAH",1,1,58,0)
  
"PKG",364,22,1,"PAH",1,1,59,0)
 Build Components:
"PKG",364,22,1,"PAH",1,1,60,0)
 =================
"PKG",364,22,1,"PAH",1,1,61,0)
  Data Dictionary for three files:
"PKG",364,22,1,"PAH",1,1,62,0)
      REMINDER EXTRACT SUMMARY (810.3) (new) 
"PKG",364,22,1,"PAH",1,1,63,0)
      REMINDER DEFINITION (811.9)
"PKG",364,22,1,"PAH",1,1,64,0)
      REMINDER TERM (811.5)
"PKG",364,22,1,"PAH",1,1,65,0)
 
"PKG",364,22,1,"PAH",1,1,66,0)
  Option:
"PKG",364,22,1,"PAH",1,1,67,0)
      PXRM REMINDER REPORTS menu (description change; lists new options)
"PKG",364,22,1,"PAH",1,1,68,0)
      PXRM REMINDERS DUE (no change, just attach to menu)
"PKG",364,22,1,"PAH",1,1,69,0)
      PXRM EXTRACT EPI TOTALS (new)
"PKG",364,22,1,"PAH",1,1,70,0)
      PXRM EXTRACT EPI FINDING LIST (new)
"PKG",364,22,1,"PAH",1,1,71,0)
 
"PKG",364,22,1,"PAH",1,1,72,0)
  Print Templates to print data from the REMINDER EXTRACT SUMMARY:
"PKG",364,22,1,"PAH",1,1,73,0)
      PXRM EXTRACT EPI FINDING LIST (new)
"PKG",364,22,1,"PAH",1,1,74,0)
      PXRM EXTRACT EPI FINDING HDR (new)
"PKG",364,22,1,"PAH",1,1,75,0)
      PXRM EXTRACT EPI FINDING TOT (new) 
"PKG",364,22,1,"PAH",1,1,76,0)
 
"PKG",364,22,1,"PAH",1,1,77,0)
  Sort Templates:
"PKG",364,22,1,"PAH",1,1,78,0)
      PXRM EPI LAB AND MED TERMS (new)(identifies reminder terms to
"PKG",364,22,1,"PAH",1,1,79,0)
        include in this patch)
"PKG",364,22,1,"PAH",1,1,80,0)
      PXRM EXTRACT EPI BY FIND_PT (new)(sorts the extract data in the
"PKG",364,22,1,"PAH",1,1,81,0)
        REMINDER EXTRACT SUMMARY file)
"PKG",364,22,1,"PAH",1,1,82,0)
 
"PKG",364,22,1,"PAH",1,1,83,0)
  Routines:
"PKG",364,22,1,"PAH",1,1,84,0)
 
"PKG",364,22,1,"PAH",1,1,85,0)
   The second line of each routine looks like:
"PKG",364,22,1,"PAH",1,1,86,0)
 
"PKG",364,22,1,"PAH",1,1,87,0)
   <tab>;;1.5;CLINICAL REMINDERS;**1**;June 19, 2000
"PKG",364,22,1,"PAH",1,1,88,0)
 
"PKG",364,22,1,"PAH",1,1,89,0)
   Routine         Old Checksum    New Checksum    Patch List
"PKG",364,22,1,"PAH",1,1,90,0)
   =======         ============    ============    ==========
"PKG",364,22,1,"PAH",1,1,91,0)
   PXRMLOGX          3009219          3005995        **1**
"PKG",364,22,1,"PAH",1,1,92,0)
   PXRMP1I               n/a          2412825        **1** 
"PKG",364,22,1,"PAH",1,1,93,0)
   PXRMP1IE              n/a           349212        **1**
"PKG",364,22,1,"PAH",1,1,94,0)
   PXRMTERM          6249864          6249864        **1**
"PKG",364,22,1,"PAH",1,1,95,0)
   PXRMXX            2465756          9832947        **1**
"PKG",364,22,1,"PAH",1,1,96,0)
   PXRMXX1               n/a          8675493        **1**
"PKG",364,22,1,"PAH",1,1,97,0)
   PXRMXX2               n/a          8200381        **1**
"PKG",364,22,1,"PAH",1,1,98,0)
   PXRMXXT               n/a           573203        **1**
"PKG",364,22,1,"PAH",1,1,99,0)
 
"PKG",364,22,1,"PAH",1,1,100,0)
 REQUIRED BUILDS:
"PKG",364,22,1,"PAH",1,1,101,0)
 ================
"PKG",364,22,1,"PAH",1,1,102,0)
  CLINICAL REMINDERS 1.5
"PKG",364,22,1,"PAH",1,1,103,0)
 
"PKG",364,22,1,"PAH",1,1,104,0)
 INSTALLATION INSTRUCTIONS:
"PKG",364,22,1,"PAH",1,1,105,0)
 ==========================
"PKG",364,22,1,"PAH",1,1,106,0)
  
"PKG",364,22,1,"PAH",1,1,107,0)
 This patch should be loaded during non-peak hours to minimize disruption
"PKG",364,22,1,"PAH",1,1,108,0)
 to users.  Installation will take less than 15 minutes.
"PKG",364,22,1,"PAH",1,1,109,0)
  
"PKG",364,22,1,"PAH",1,1,110,0)
                           **Warning** 
"PKG",364,22,1,"PAH",1,1,111,0)
 When an option is included in the patch build, the question REBUILD MENUS
"PKG",364,22,1,"PAH",1,1,112,0)
 is asked as a PRE-INSTALL question.  If you choose to have KIDs rebuild
"PKG",364,22,1,"PAH",1,1,113,0)
 the menus it will happen at the end of the build installation and may
"PKG",364,22,1,"PAH",1,1,114,0)
 take several hours.
"PKG",364,22,1,"PAH",1,1,115,0)
  
"PKG",364,22,1,"PAH",1,1,116,0)
  1.  Download the KIDS file HEP_C_EXTRACT_1_0.KID via FTP from any
"PKG",364,22,1,"PAH",1,1,117,0)
      of the anonymous.software directories listed above.  Move the file
"PKG",364,22,1,"PAH",1,1,118,0)
      to the appropriate directory on your system.
"PKG",364,22,1,"PAH",1,1,119,0)
 
"PKG",364,22,1,"PAH",1,1,120,0)
  2.  Review your mapped set.  If any of the routines listed in the
"PKG",364,22,1,"PAH",1,1,121,0)
      Routines section are mapped, they should be removed from the mapped
"PKG",364,22,1,"PAH",1,1,122,0)
      set at this time. 
"PKG",364,22,1,"PAH",1,1,123,0)
 
"PKG",364,22,1,"PAH",1,1,124,0)
  3.  From the Kernel Installation and Distribution System (KIDS) menu,
"PKG",364,22,1,"PAH",1,1,125,0)
      select the Installation menu.
"PKG",364,22,1,"PAH",1,1,126,0)
 
"PKG",364,22,1,"PAH",1,1,127,0)
  4.  Use Load a Distribution option on the KIDS Installation menu, and
"PKG",364,22,1,"PAH",1,1,128,0)
      enter: HEP_C_EXTRACT_1_0.KID
"PKG",364,22,1,"PAH",1,1,129,0)
  
"PKG",364,22,1,"PAH",1,1,130,0)
  5.  From this menu, you may elect to use the following options
"PKG",364,22,1,"PAH",1,1,131,0)
      (when prompted for INSTALL NAME, enter HEPATITIS_C_EXTRACT).
"PKG",364,22,1,"PAH",1,1,132,0)
    
"PKG",364,22,1,"PAH",1,1,133,0)
      Note - Option (a.), Backup a Transport Global, can and must be
"PKG",364,22,1,"PAH",1,1,134,0)
      referenced exclusively by the primary build name of
"PKG",364,22,1,"PAH",1,1,135,0)
      HEPATITIS_C_EXTRACT. Option (b.) can be run by either using the
"PKG",364,22,1,"PAH",1,1,136,0)
      primary build name of HEPATITIS_C_EXTRACT or the individual patch
"PKG",364,22,1,"PAH",1,1,137,0)
      names (e.g., PXRM*1.5*1, etc.). Options (c.) and (d.) must be run
"PKG",364,22,1,"PAH",1,1,138,0)
      for each individual build (using the patch names) included in
"PKG",364,22,1,"PAH",1,1,139,0)
      this transport.
"PKG",364,22,1,"PAH",1,1,140,0)
  
"PKG",364,22,1,"PAH",1,1,141,0)
      a.  Backup a Transport Global - this option will create a backup
"PKG",364,22,1,"PAH",1,1,142,0)
          message of any routines exported with the patch.  It will NOT
"PKG",364,22,1,"PAH",1,1,143,0)
          backup any other changes such as DDs or templates.
"PKG",364,22,1,"PAH",1,1,144,0)
      b.  Compare Transport Global to Current System  - this option will
"PKG",364,22,1,"PAH",1,1,145,0)
          allow you to view all changes that will be made when the patch
"PKG",364,22,1,"PAH",1,1,146,0)
          is installed.  It compares all components of the patch
"PKG",364,22,1,"PAH",1,1,147,0)
          (routines, DDs, templates, etc.).
"PKG",364,22,1,"PAH",1,1,148,0)
      c.  Verify Checksums in Transport Global - this option will
"PKG",364,22,1,"PAH",1,1,149,0)
          allow you to ensure the integrity of the routines that are in
"PKG",364,22,1,"PAH",1,1,150,0)
          the transport global.
"PKG",364,22,1,"PAH",1,1,151,0)
      d.  Print Transport Global - this option will allow you to view the
"PKG",364,22,1,"PAH",1,1,152,0)
          components of the KIDS build.
"PKG",364,22,1,"PAH",1,1,153,0)
  
"PKG",364,22,1,"PAH",1,1,154,0)
  6.  Use the Install Package(s) option and select the package
"PKG",364,22,1,"PAH",1,1,155,0)
      HEPATITIS_C_EXTRACT.
"PKG",364,22,1,"PAH",1,1,156,0)
  
"PKG",364,22,1,"PAH",1,1,157,0)
  7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
"PKG",364,22,1,"PAH",1,1,158,0)
      Protocols? YES//', respond NO.
"PKG",364,22,1,"PAH",1,1,159,0)
  
"PKG",364,22,1,"PAH",1,1,160,0)
  8.  If routines were unmapped as part of step 2, they should be returned
"PKG",364,22,1,"PAH",1,1,161,0)
      to the mapped set once the installation has run to completion.
"PKG",364,22,1,"PAH",1,1,162,0)
 
"PKG",364,22,1,"PAH",1,1,163,0)
 POST INSTALLATION INSTRUCTIONS
"PKG",364,22,1,"PAH",1,1,164,0)
 ============================== 
"PKG",364,22,1,"PAH",1,1,165,0)
 The details of the setup to be completed is available in the
"PKG",364,22,1,"PAH",1,1,166,0)
 documentation. Generally, these steps need to be done by the REMINDERS
"PKG",364,22,1,"PAH",1,1,167,0)
 MANAGER or the CLINICAL REMINDERS APPLICATION COORDINATOR. The success of
"PKG",364,22,1,"PAH",1,1,168,0)
 the Hepatitis C updates to the EPI database will depend on a Hepatitis
"PKG",364,22,1,"PAH",1,1,169,0)
 Team at your site addressing all of the issues in the documentation.
"PKG",364,22,1,"PAH",1,1,170,0)
 
"PKG",364,22,1,"PAH",1,1,171,0)
  1. See the descriptions for the reminder definitions and 
"PKG",364,22,1,"PAH",1,1,172,0)
     the descriptions in the REMINDER TERMS file to determine what
"PKG",364,22,1,"PAH",1,1,173,0)
     additional setup is required for the terms. You will need to review
"PKG",364,22,1,"PAH",1,1,174,0)
     the reminder terms with laboratory and pharmacy coordinators.
"PKG",364,22,1,"PAH",1,1,175,0)
 
"PKG",364,22,1,"PAH",1,1,176,0)
  2. You can use the Detailed Reminders Due report to determine if all
"PKG",364,22,1,"PAH",1,1,177,0)
     the correct patients are being identified to send to the EPI
"PKG",364,22,1,"PAH",1,1,178,0)
     database.
"PKG",364,22,1,"PAH",1,1,179,0)
 
"PKG",364,22,1,"PAH",1,1,180,0)
  3. You may need to check that all dispensed drugs are mapped to the
"PKG",364,22,1,"PAH",1,1,181,0)
     national drug file entries represented by the Hepatitis C Medication
"PKG",364,22,1,"PAH",1,1,182,0)
     terms. If you have local dispensed drugs that cannot be mapped to the
"PKG",364,22,1,"PAH",1,1,183,0)
     national drug file (VA GENERIC, #50.6), you will need to enter the
"PKG",364,22,1,"PAH",1,1,184,0)
     dispensed drugs as findings for the appropriate national reminder
"PKG",364,22,1,"PAH",1,1,185,0)
     term.
"PKG",364,22,1,"PAH",1,1,186,0)
 
"PKG",364,22,1,"PAH",1,1,187,0)
  4. Add local laboratory tests with appropriate CONDITIONS in the
"PKG",364,22,1,"PAH",1,1,188,0)
     REMINDER TERM file for the laboratory terms.
"PKG",364,22,1,"PAH",1,1,189,0)
 
"PKG",364,22,1,"PAH",1,1,190,0)
  5. The VA-NATIONAL EPI LAB EXTRACT and VA-NATIONAL EPI RX EXTRACT
"PKG",364,22,1,"PAH",1,1,191,0)
     reminders should NOT be added to the "Clinical Reminders for Search"
"PKG",364,22,1,"PAH",1,1,192,0)
     parameter for clinicians.  The Reminders Manager may want to create a
"PKG",364,22,1,"PAH",1,1,193,0)
     National EPI Update reminder category and add these reminders to it,
"PKG",364,22,1,"PAH",1,1,194,0)
     along with the VA-HEP C RISK ASSESSMENT REMINDER. The category could
"PKG",364,22,1,"PAH",1,1,195,0)
     be added to the CPRS Reminder Categories parameter option for testing
"PKG",364,22,1,"PAH",1,1,196,0)
     the setup of the reminder terms and reviewing the results.
"PKG",364,22,1,"PAH",1,1,197,0)
 
"PKG",364,22,1,"PAH",1,1,198,0)
DETAILED DESCRIPTION:
"PKG",364,22,1,"PAH",1,1,199,0)
=====================
"PKG",364,22,1,"PAH",1,1,200,0)
Data Dictionary:
"PKG",364,22,1,"PAH",1,1,201,0)
 
"PKG",364,22,1,"PAH",1,1,202,0)
  1. REMINDER DEFINITION file (811.9)
"PKG",364,22,1,"PAH",1,1,203,0)
     The reminder for VA-NATIONAL EPI DB UPDATE may be used at sites to
"PKG",364,22,1,"PAH",1,1,204,0)
     determine whether a patient has data that is sent to the Austin
"PKG",364,22,1,"PAH",1,1,205,0)
     Automation Center to update the national EPI database.
"PKG",364,22,1,"PAH",1,1,206,0)
 
"PKG",364,22,1,"PAH",1,1,207,0)
  2. REMINDER TERM file (811.5)
"PKG",364,22,1,"PAH",1,1,208,0)
     There are twenty reminder terms used by the lab and pharmacy extract
"PKG",364,22,1,"PAH",1,1,209,0)
     reminders. Eighteen of these terms are newly distributed in this
"PKG",364,22,1,"PAH",1,1,210,0)
     file. These new terms represent Hepatitis A, Hepatitis B and
"PKG",364,22,1,"PAH",1,1,211,0)
     Hepatitis C lab and medication information. The reminder terms may be
"PKG",364,22,1,"PAH",1,1,212,0)
     used at sites in locally defined reminders for clinicians providing
"PKG",364,22,1,"PAH",1,1,213,0)
     clinical care for Hepatitis patients.
"PKG",364,22,1,"PAH",1,1,214,0)
 
"PKG",364,22,1,"PAH",1,1,215,0)
     Hepatitis A laboratory reminder terms:
"PKG",364,22,1,"PAH",1,1,216,0)
         HAV Ab positive         Hepatitis A virus antibody total positive
"PKG",364,22,1,"PAH",1,1,217,0)
         HAV IgM Ab positive     Hepatitis A virus antibody immunoglobulin
"PKG",364,22,1,"PAH",1,1,218,0)
                                         M positive 
"PKG",364,22,1,"PAH",1,1,219,0)
         HAV IgG positive        Hepatitis A virus antibody immunoglobulin
"PKG",364,22,1,"PAH",1,1,220,0)
                                         G positive
"PKG",364,22,1,"PAH",1,1,221,0)
         Bilirubin
"PKG",364,22,1,"PAH",1,1,222,0)
 
"PKG",364,22,1,"PAH",1,1,223,0)
     Hepatitis B laboratory reminder terms:
"PKG",364,22,1,"PAH",1,1,224,0)
         HBs Ag positive         Hepatitis B surface antigen positive 
"PKG",364,22,1,"PAH",1,1,225,0)
         HBc Ab IgM positive     Hepatitis B core antibody immunoglobulin
"PKG",364,22,1,"PAH",1,1,226,0)
                                         M positive 
"PKG",364,22,1,"PAH",1,1,227,0)
         HBs Ab positive         Hepatitis B surface antibody positive
"PKG",364,22,1,"PAH",1,1,228,0)
         HBe Ag positive         Hepatitis B e antigen positive 
"PKG",364,22,1,"PAH",1,1,229,0)
 
"PKG",364,22,1,"PAH",1,1,230,0)
     Hepatitis C laboratory reminder terms: 
"PKG",364,22,1,"PAH",1,1,231,0)
         HEP C VIRUS ANTIBODY NEGATIVE    
"PKG",364,22,1,"PAH",1,1,232,0)
         HEP C VIRUS ANTIBODY POSITIVE    
"PKG",364,22,1,"PAH",1,1,233,0)
         TRANSFERASE (AST) (SGOT)
"PKG",364,22,1,"PAH",1,1,234,0)
         ALANINE AMINO (ALT) (SGPT)
"PKG",364,22,1,"PAH",1,1,235,0)
 
"PKG",364,22,1,"PAH",1,1,236,0)
     Hepatitis Medications (based on VA GENERIC file): 
"PKG",364,22,1,"PAH",1,1,237,0)
         INTERFERON ALFA-2A 
"PKG",364,22,1,"PAH",1,1,238,0)
         INTERFERON ALFA-2B     
"PKG",364,22,1,"PAH",1,1,239,0)
         INTERFERON ALFA-2B/RIBAVIRIN 
"PKG",364,22,1,"PAH",1,1,240,0)
         INTERFERON ALFA-3N     
"PKG",364,22,1,"PAH",1,1,241,0)
         INTERFERON ALFACON-1 
"PKG",364,22,1,"PAH",1,1,242,0)
         INTERFERON BETA-1A 
"PKG",364,22,1,"PAH",1,1,243,0)
         INTERFERON BETA-1B 
"PKG",364,22,1,"PAH",1,1,244,0)
         RIBAVIRIN           
"PKG",364,22,1,"PAH",1,1,245,0)
 
"PKG",364,22,1,"PAH",1,1,246,0)
Sort Template:
"PKG",364,22,1,"PAH",1,1,247,0)
 
"PKG",364,22,1,"PAH",1,1,248,0)
   PXRM EPI LAB AND MED TERMS contains reminder term entries defined above
"PKG",364,22,1,"PAH",1,1,249,0)
   to distribute with the REMINDER TERM (811.5) data dictionary.
"PKG",364,22,1,"PAH",1,1,250,0)
 
"PKG",364,22,1,"PAH",1,1,251,0)
   PXRM EXTRACT EPI BY FIND_PT sorts an extract by Finding Item and SSN.
"PKG",364,22,1,"PAH",1,1,252,0)
   This sort template may be useful when looking up an SSN to compare
"PKG",364,22,1,"PAH",1,1,253,0)
   findings to an error message returned to the site from the AAC.  When
"PKG",364,22,1,"PAH",1,1,254,0)
   the AAC has problems processing a sites extracted data, the original
"PKG",364,22,1,"PAH",1,1,255,0)
   extract message and SSN are returned to the site in an error message
"PKG",364,22,1,"PAH",1,1,256,0)
   for review and correction.
"PRE")
PXRMP1IE
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
8
"RTN","PXRMLOGX")
0^1^B22137086
"RTN","PXRMLOGX",1,0)
PXRMLOGX ; SLC/PKR - Clinical Reminders cross-reference logic routines. ;06/28/2000
"RTN","PXRMLOGX",2,0)
 ;;1.5;CLINICAL REMINDERS;**1**;Jun 19, 2000
"RTN","PXRMLOGX",3,0)
 ;
"RTN","PXRMLOGX",4,0)
 ;=======================================================================
"RTN","PXRMLOGX",5,0)
BLDAFL(IEN,KI) ;Build a list of findings that can change the
"RTN","PXRMLOGX",6,0)
 ;frequency age range set. This is called by FileMan whenever the
"RTN","PXRMLOGX",7,0)
 ;minimum age, maximum age, or frequency fields of the findings
"RTN","PXRMLOGX",8,0)
 ;multiple are edited.
"RTN","PXRMLOGX",9,0)
 N FREQ,FLIST,IND,NUM
"RTN","PXRMLOGX",10,0)
 S FLIST=""
"RTN","PXRMLOGX",11,0)
 S (IND,NUM)=0
"RTN","PXRMLOGX",12,0)
 F  S IND=$O(^PXD(811.9,IEN,20,IND)) Q:+IND=0  D
"RTN","PXRMLOGX",13,0)
 .;If an entry is being deleted skip it.
"RTN","PXRMLOGX",14,0)
 . I IND=$G(KI) Q
"RTN","PXRMLOGX",15,0)
 . S FREQ=$P(^PXD(811.9,IEN,20,IND,0),U,4)
"RTN","PXRMLOGX",16,0)
 . I FREQ'="" D
"RTN","PXRMLOGX",17,0)
 .. S NUM=NUM+1
"RTN","PXRMLOGX",18,0)
 .. I NUM>1 S FLIST=FLIST_";"
"RTN","PXRMLOGX",19,0)
 .. S FLIST=FLIST_IND
"RTN","PXRMLOGX",20,0)
 S ^PXD(811.9,IEN,40)=NUM_U_FLIST
"RTN","PXRMLOGX",21,0)
 Q
"RTN","PXRMLOGX",22,0)
 ;
"RTN","PXRMLOGX",23,0)
 ;=======================================================================
"RTN","PXRMLOGX",24,0)
BLDALL(IEN,KI) ;Build all the findings lists.
"RTN","PXRMLOGX",25,0)
 I '$D(^PXD(811.9,IEN)) Q
"RTN","PXRMLOGX",26,0)
 D BLDPCLS^PXRMLOGX(IEN,KI)
"RTN","PXRMLOGX",27,0)
 D BLDRESLS^PXRMLOGX(IEN,KI)
"RTN","PXRMLOGX",28,0)
 D BLDAFL^PXRMLOGX(IEN,KI)
"RTN","PXRMLOGX",29,0)
 D BLDINFL^PXRMLOGX(IEN,KI)
"RTN","PXRMLOGX",30,0)
 Q
"RTN","PXRMLOGX",31,0)
 ;
"RTN","PXRMLOGX",32,0)
 ;=======================================================================
"RTN","PXRMLOGX",33,0)
BLDINFL(IEN,KI) ;Build the list of findings that are information only.
"RTN","PXRMLOGX",34,0)
 ;This is called by the routines that build the resolution findings
"RTN","PXRMLOGX",35,0)
 ;list, the patient cohort findings list, and the age finding list.
"RTN","PXRMLOGX",36,0)
 N FIA,FLIST,IND,NUM,TEMP
"RTN","PXRMLOGX",37,0)
 S IND=0
"RTN","PXRMLOGX",38,0)
 F  S IND=$O(^PXD(811.9,IEN,20,IND)) Q:+IND=0  D
"RTN","PXRMLOGX",39,0)
 .;If an entry is being deleted skip it.
"RTN","PXRMLOGX",40,0)
 . I IND=$G(KI) Q
"RTN","PXRMLOGX",41,0)
 . S FIA(IND)=""
"RTN","PXRMLOGX",42,0)
 ;Remove the patient cohort findings.
"RTN","PXRMLOGX",43,0)
 S TEMP=$G(^PXD(811.9,IEN,32))
"RTN","PXRMLOGX",44,0)
 S NUM=+$P(TEMP,U,1)
"RTN","PXRMLOGX",45,0)
 S FLIST=$P(TEMP,U,2)
"RTN","PXRMLOGX",46,0)
 F IND=1:1:NUM D
"RTN","PXRMLOGX",47,0)
 . S TEMP=$P(FLIST,";",IND)
"RTN","PXRMLOGX",48,0)
 . I $D(FIA(TEMP)) K FIA(TEMP)
"RTN","PXRMLOGX",49,0)
 ;Remove the resolution findings.
"RTN","PXRMLOGX",50,0)
 S TEMP=$G(^PXD(811.9,IEN,36))
"RTN","PXRMLOGX",51,0)
 S NUM=+$P(TEMP,U,1)
"RTN","PXRMLOGX",52,0)
 S FLIST=$P(TEMP,U,2)
"RTN","PXRMLOGX",53,0)
 F IND=1:1:NUM D
"RTN","PXRMLOGX",54,0)
 . S TEMP=$P(FLIST,";",IND)
"RTN","PXRMLOGX",55,0)
 . I $D(FIA(TEMP)) K FIA(TEMP)
"RTN","PXRMLOGX",56,0)
 ;Remove the age findings.
"RTN","PXRMLOGX",57,0)
 S TEMP=$G(^PXD(811.9,IEN,40))
"RTN","PXRMLOGX",58,0)
 S NUM=+$P(TEMP,U,1)
"RTN","PXRMLOGX",59,0)
 S FLIST=$P(TEMP,U,2)
"RTN","PXRMLOGX",60,0)
 F IND=1:1:NUM D
"RTN","PXRMLOGX",61,0)
 . S TEMP=$P(FLIST,";",IND)
"RTN","PXRMLOGX",62,0)
 . I $D(FIA(TEMP)) K FIA(TEMP)
"RTN","PXRMLOGX",63,0)
 ;What is left is the information findings.
"RTN","PXRMLOGX",64,0)
 S FLIST=""
"RTN","PXRMLOGX",65,0)
 S (IND,NUM)=0
"RTN","PXRMLOGX",66,0)
 F  S IND=$O(FIA(IND)) Q:IND=""  D
"RTN","PXRMLOGX",67,0)
 . S NUM=NUM+1
"RTN","PXRMLOGX",68,0)
 . I NUM>1 S FLIST=FLIST_";"
"RTN","PXRMLOGX",69,0)
 . S FLIST=FLIST_IND
"RTN","PXRMLOGX",70,0)
 S ^PXD(811.9,IEN,42)=NUM_U_FLIST
"RTN","PXRMLOGX",71,0)
 Q
"RTN","PXRMLOGX",72,0)
 ;
"RTN","PXRMLOGX",73,0)
 ;=======================================================================
"RTN","PXRMLOGX",74,0)
BLDPCLS(IEN,KI) ;Build the Internal Patient Cohort Logic string for a
"RTN","PXRMLOGX",75,0)
 ;reminder. This is called by FileMan whenever the USE IN PATIENT COHORT
"RTN","PXRMLOGX",76,0)
 ;LOGIC field is edited or the user defined Patient Cohort Logic is
"RTN","PXRMLOGX",77,0)
 ;killed. Also builds the patient cohort logic list.
"RTN","PXRMLOGX",78,0)
 ;If there is a user defined PATIENT COHORT LOGIC then don't do anything.
"RTN","PXRMLOGX",79,0)
 I $L($G(^PXD(811.9,IEN,30)))>0 Q
"RTN","PXRMLOGX",80,0)
 N FLIST,IND,NUM,PCLOG,TEMP,UPCLOG
"RTN","PXRMLOGX",81,0)
 S PCLOG="(SEX)&(AGE)"
"RTN","PXRMLOGX",82,0)
 S FLIST=""
"RTN","PXRMLOGX",83,0)
 S (IND,NUM)=0
"RTN","PXRMLOGX",84,0)
 F  S IND=$O(^PXD(811.9,IEN,20,IND)) Q:+IND=0  D
"RTN","PXRMLOGX",85,0)
 .;If an entry is being deleted skip it.
"RTN","PXRMLOGX",86,0)
 . I IND=$G(KI) Q
"RTN","PXRMLOGX",87,0)
 . S TEMP=^PXD(811.9,IEN,20,IND,0)
"RTN","PXRMLOGX",88,0)
 . S UPCLOG=$P(TEMP,U,7)
"RTN","PXRMLOGX",89,0)
 . I UPCLOG'="" D
"RTN","PXRMLOGX",90,0)
 .. S PCLOG=PCLOG_UPCLOG_"FI("_IND_")"
"RTN","PXRMLOGX",91,0)
 .. S NUM=NUM+1
"RTN","PXRMLOGX",92,0)
 .. I NUM>1 S FLIST=FLIST_";"
"RTN","PXRMLOGX",93,0)
 .. S FLIST=FLIST_IND
"RTN","PXRMLOGX",94,0)
 ;Save the internal string and the findings list.
"RTN","PXRMLOGX",95,0)
 S ^PXD(811.9,IEN,31)=PCLOG
"RTN","PXRMLOGX",96,0)
 S ^PXD(811.9,IEN,32)=NUM_U_FLIST
"RTN","PXRMLOGX",97,0)
 Q
"RTN","PXRMLOGX",98,0)
 ;
"RTN","PXRMLOGX",99,0)
 ;=======================================================================
"RTN","PXRMLOGX",100,0)
BLDRESLS(IEN,KI) ;Build the Internal Resolution Logic string for a
"RTN","PXRMLOGX",101,0)
 ;reminder. This is called by FileMan whenever the USE IN RESOLUTION
"RTN","PXRMLOGX",102,0)
 ;LOGIC field is edited or the user defined Resolution Logic is killed.
"RTN","PXRMLOGX",103,0)
 ;If there is a user defined RESOLUTION LOGIC then don't do
"RTN","PXRMLOGX",104,0)
 ;anything.
"RTN","PXRMLOGX",105,0)
 I $L($G(^PXD(811.9,IEN,34)))>0 Q
"RTN","PXRMLOGX",106,0)
 N FLIST,IND,NUM,RESLOG,TEMP,URESLOG
"RTN","PXRMLOGX",107,0)
 S (FLIST,RESLOG)=""
"RTN","PXRMLOGX",108,0)
 S (IND,NUM)=0
"RTN","PXRMLOGX",109,0)
 F  S IND=$O(^PXD(811.9,IEN,20,IND)) Q:+IND=0  D
"RTN","PXRMLOGX",110,0)
 .;If an entry is being deleted skip it.
"RTN","PXRMLOGX",111,0)
 . I IND=$G(KI) Q
"RTN","PXRMLOGX",112,0)
 . S TEMP=^PXD(811.9,IEN,20,IND,0)
"RTN","PXRMLOGX",113,0)
 . S URESLOG=$P(TEMP,U,6)
"RTN","PXRMLOGX",114,0)
 . I URESLOG'="" D
"RTN","PXRMLOGX",115,0)
 .. S RESLOG=RESLOG_URESLOG_"FI("_IND_")"
"RTN","PXRMLOGX",116,0)
 .. S NUM=NUM+1
"RTN","PXRMLOGX",117,0)
 .. I NUM>1 S FLIST=FLIST_";"
"RTN","PXRMLOGX",118,0)
 .. S FLIST=FLIST_IND
"RTN","PXRMLOGX",119,0)
 ;Save as the internal string and the findings list.
"RTN","PXRMLOGX",120,0)
 I RESLOG="" S ^PXD(811.9,IEN,35)=""
"RTN","PXRMLOGX",121,0)
 E  D
"RTN","PXRMLOGX",122,0)
 . S TEMP=$E(RESLOG,1,1)
"RTN","PXRMLOGX",123,0)
 . I TEMP="&" S ^PXD(811.9,IEN,35)="(1)"_RESLOG
"RTN","PXRMLOGX",124,0)
 . I TEMP="!" S ^PXD(811.9,IEN,35)="(0)"_RESLOG
"RTN","PXRMLOGX",125,0)
 S ^PXD(811.9,IEN,36)=NUM_U_FLIST
"RTN","PXRMLOGX",126,0)
 Q
"RTN","PXRMLOGX",127,0)
 ;
"RTN","PXRMLOGX",128,0)
 ;=======================================================================
"RTN","PXRMLOGX",129,0)
CPPCLS(IEN,X) ;Copy the user input Patient Cohort Logic string to the
"RTN","PXRMLOGX",130,0)
 ;Internal Patient Cohort Logic string.
"RTN","PXRMLOGX",131,0)
 S ^PXD(811.9,IEN,31)=X
"RTN","PXRMLOGX",132,0)
 ;Get the list of findings.
"RTN","PXRMLOGX",133,0)
 N FLIST,IND,NFI,NUM,T1,T2
"RTN","PXRMLOGX",134,0)
 S NFI=$L(X,"FI(")
"RTN","PXRMLOGX",135,0)
 S FLIST=""
"RTN","PXRMLOGX",136,0)
 S NUM=0
"RTN","PXRMLOGX",137,0)
 F IND=2:1:NFI D
"RTN","PXRMLOGX",138,0)
 . S T1=$P(X,"FI(",IND)
"RTN","PXRMLOGX",139,0)
 . S T2=$P(T1,")",1)
"RTN","PXRMLOGX",140,0)
 . S NUM=NUM+1
"RTN","PXRMLOGX",141,0)
 . I NUM>1 S FLIST=FLIST_";"
"RTN","PXRMLOGX",142,0)
 . S FLIST=FLIST_T2
"RTN","PXRMLOGX",143,0)
 S ^PXD(811.9,IEN,32)=NUM_U_FLIST
"RTN","PXRMLOGX",144,0)
 Q
"RTN","PXRMLOGX",145,0)
 ;
"RTN","PXRMLOGX",146,0)
 ;=======================================================================
"RTN","PXRMLOGX",147,0)
CPRESLS(IEN,X) ;Copy the user input Resolution Logic string to the
"RTN","PXRMLOGX",148,0)
 ;Internal Resolution Logic string.
"RTN","PXRMLOGX",149,0)
 S ^PXD(811.9,DA,35)=X
"RTN","PXRMLOGX",150,0)
 ;Build the list of findings
"RTN","PXRMLOGX",151,0)
 N NFI,NUM,FLIST,T1,T2
"RTN","PXRMLOGX",152,0)
 S NFI=$L(X,"FI(")
"RTN","PXRMLOGX",153,0)
 S FLIST=""
"RTN","PXRMLOGX",154,0)
 S NUM=0
"RTN","PXRMLOGX",155,0)
 F IND=2:1:NFI D
"RTN","PXRMLOGX",156,0)
 . S T1=$P(X,"FI(",IND)
"RTN","PXRMLOGX",157,0)
 . S T2=$P(T1,")",1)
"RTN","PXRMLOGX",158,0)
 . S NUM=NUM+1
"RTN","PXRMLOGX",159,0)
 . I NUM>1 S FLIST=FLIST_";"
"RTN","PXRMLOGX",160,0)
 . S FLIST=FLIST_T2
"RTN","PXRMLOGX",161,0)
 S ^PXD(811.9,IEN,36)=NUM_U_FLIST
"RTN","PXRMLOGX",162,0)
 Q
"RTN","PXRMLOGX",163,0)
 ;
"RTN","PXRMLOGX",164,0)
 ;=======================================================================
"RTN","PXRMLOGX",165,0)
DELNXR(X2) ;For a new style cross-reference check X2 to determine
"RTN","PXRMLOGX",166,0)
 ;if a delete is being done. If it is a delete all the X2 elements will
"RTN","PXRMLOGX",167,0)
 ;be null.
"RTN","PXRMLOGX",168,0)
 N IND,X2NULL
"RTN","PXRMLOGX",169,0)
 S X2NULL=1
"RTN","PXRMLOGX",170,0)
 S IND=0
"RTN","PXRMLOGX",171,0)
 F  S IND=$O(X2(IND)) Q:(+IND=0)!('X2NULL)  D
"RTN","PXRMLOGX",172,0)
 . I X2(IND)'="" S X2NULL=0
"RTN","PXRMLOGX",173,0)
 Q X2NULL
"RTN","PXRMLOGX",174,0)
 ;
"RTN","PXRMLOGX",175,0)
 ;=======================================================================
"RTN","PXRMLOGX",176,0)
EDITNXR(X1,X2) ;For a new style cross-reference check X1 and X2 to determine
"RTN","PXRMLOGX",177,0)
 ;if an edit is being done.
"RTN","PXRMLOGX",178,0)
 N ADD,AREDIFF,EDIT,IND,X1NULL,X2NULL
"RTN","PXRMLOGX",179,0)
 S AREDIFF=0
"RTN","PXRMLOGX",180,0)
 S (X1NULL,X2NULL)=1
"RTN","PXRMLOGX",181,0)
 S IND=0
"RTN","PXRMLOGX",182,0)
 F  S IND=$O(X1(IND)) Q:+IND=0  D
"RTN","PXRMLOGX",183,0)
 . I X1(IND)'="" S X1NULL=0
"RTN","PXRMLOGX",184,0)
 . I X2(IND)'="" S X2NULL=0
"RTN","PXRMLOGX",185,0)
 . I X1(IND)'=X2(IND) S AREDIFF=1
"RTN","PXRMLOGX",186,0)
 I X1NULL&'X2NULL S ADD=1
"RTN","PXRMLOGX",187,0)
 E  S ADD=0
"RTN","PXRMLOGX",188,0)
 I 'X1NULL&'X2NULL&AREDIFF S EDIT=1
"RTN","PXRMLOGX",189,0)
 E  S EDIT=0
"RTN","PXRMLOGX",190,0)
 Q (ADD!EDIT)
"RTN","PXRMLOGX",191,0)
 ;
"RTN","PXRMP1I")
0^10^B10670461
"RTN","PXRMP1I",1,0)
PXRMP1I ; SLC/DT/PJH - Inits for PXRM*1.5*1 ;08/25/2000
"RTN","PXRMP1I",2,0)
 ;;1.5;CLINICAL REMINDERS;**1**;Jun 19, 2000
"RTN","PXRMP1I",3,0)
 ;
"RTN","PXRMP1I",4,0)
 Q
"RTN","PXRMP1I",5,0)
 ;
"RTN","PXRMP1I",6,0)
 ;===============================================================
"RTN","PXRMP1I",7,0)
DELDD ;Delete data dictionaries
"RTN","PXRMP1I",8,0)
 N DIU
"RTN","PXRMP1I",9,0)
 S DIU(0)="DT"
"RTN","PXRMP1I",10,0)
 S DIU=810.2
"RTN","PXRMP1I",11,0)
 D EN^DIU2
"RTN","PXRMP1I",12,0)
 ;
"RTN","PXRMP1I",13,0)
 S DIU(0)="T"
"RTN","PXRMP1I",14,0)
 S DIU=810.3
"RTN","PXRMP1I",15,0)
 D EN^DIU2
"RTN","PXRMP1I",16,0)
 Q
"RTN","PXRMP1I",17,0)
 ;
"RTN","PXRMP1I",18,0)
 ;=======================================================================
"RTN","PXRMP1I",19,0)
CHGREM ;Rename previously distributed reminder name
"RTN","PXRMP1I",20,0)
 D CHGRNAM("VA-NATIONAL EPI DB UPDATE","VA-NATIONAL EPI LAB EXTRACT")
"RTN","PXRMP1I",21,0)
 Q
"RTN","PXRMP1I",22,0)
 ;
"RTN","PXRMP1I",23,0)
CHGRNAM(OLD,NEW) ;Rename
"RTN","PXRMP1I",24,0)
 N DA,DIE,DR,X
"RTN","PXRMP1I",25,0)
 S DA=$O(^PXD(811.9,"B",OLD,"")) Q:'DA
"RTN","PXRMP1I",26,0)
 S DIE="^PXD(811.9,",DR=".01///^S X=NEW"
"RTN","PXRMP1I",27,0)
 D ^DIE
"RTN","PXRMP1I",28,0)
 Q
"RTN","PXRMP1I",29,0)
 ;
"RTN","PXRMP1I",30,0)
 ;=======================================================================
"RTN","PXRMP1I",31,0)
CHGHFNM ;Rename previously distributed health factor
"RTN","PXRMP1I",32,0)
 I $D(^AUTTHF("B","PREV POS TEST FOR HEP C")) D
"RTN","PXRMP1I",33,0)
 . D CHGHFNAM("PREV POS TEST FOR HEP C","PREV POSITIVE TEST FOR HEP C")
"RTN","PXRMP1I",34,0)
 Q
"RTN","PXRMP1I",35,0)
 ;
"RTN","PXRMP1I",36,0)
CHGHFNAM(OLD,NEW) ;Change health factor name
"RTN","PXRMP1I",37,0)
 N DA,DIE,DR,X
"RTN","PXRMP1I",38,0)
 S DA=$O(^AUTTHF("B",OLD,"")) Q:'DA
"RTN","PXRMP1I",39,0)
 S DIE="^AUTTHF(",DR=".01///^S X=NEW"
"RTN","PXRMP1I",40,0)
 D ^DIE
"RTN","PXRMP1I",41,0)
 Q
"RTN","PXRMP1I",42,0)
 ;
"RTN","PXRMP1I",43,0)
 ;=======================================================================
"RTN","PXRMP1I",44,0)
CHGTRM ;Rename previously distributed reminder term
"RTN","PXRMP1I",45,0)
 I $D(^PXRMD(811.5,"B","HBs Ab")) D
"RTN","PXRMP1I",46,0)
 . D CHGTNAM("HBs Ab","HBs Ab positive")
"RTN","PXRMP1I",47,0)
 I $D(^PXRMD(811.5,"B","HBe Ag")) D
"RTN","PXRMP1I",48,0)
 . D CHGTNAM("HBe Ag","HBe Ag positive")
"RTN","PXRMP1I",49,0)
 I $D(^PXRMD(811.5,"B","PREV POSITIVE TEST FOR HEP C")) D
"RTN","PXRMP1I",50,0)
 . D CHGTNAM("PREV POSITIVE TEST FOR HEP C","PREVIOUSLY ASSESSED HEP C RISK")
"RTN","PXRMP1I",51,0)
 Q
"RTN","PXRMP1I",52,0)
 ;
"RTN","PXRMP1I",53,0)
 ;=======================================================================
"RTN","PXRMP1I",54,0)
CHGTNAM(OLD,NEW) ;Change term name
"RTN","PXRMP1I",55,0)
 N DA,DIE,DR,X
"RTN","PXRMP1I",56,0)
 S DA=$O(^PXRMD(811.5,"B",OLD,"")) Q:'DA
"RTN","PXRMP1I",57,0)
 S DIE="^PXRMD(811.5,",DR=".01///^S X=NEW"
"RTN","PXRMP1I",58,0)
 D ^DIE
"RTN","PXRMP1I",59,0)
 Q
"RTN","PXRMP1I",60,0)
 ;
"RTN","PXRMP1I",61,0)
 ;===============================================================
"RTN","PXRMP1I",62,0)
PRE ;These are the pre-installation actions
"RTN","PXRMP1I",63,0)
 ;Change national term and definition names related to EPI update
"RTN","PXRMP1I",64,0)
 S PXRMINST=1
"RTN","PXRMP1I",65,0)
 D CHGREM
"RTN","PXRMP1I",66,0)
 D CHGTRM
"RTN","PXRMP1I",67,0)
 D CHGHFNM
"RTN","PXRMP1I",68,0)
 D DELDD
"RTN","PXRMP1I",69,0)
 Q
"RTN","PXRMP1I",70,0)
 ;
"RTN","PXRMP1I",71,0)
 ;======================================================================
"RTN","PXRMP1I",72,0)
POST ;These are the post-installation actions
"RTN","PXRMP1I",73,0)
 D DDUP("PREV POSITIVE TEST FOR HEP C")
"RTN","PXRMP1I",74,0)
 D CTERMS
"RTN","PXRMP1I",75,0)
 K PXRMINST
"RTN","PXRMP1I",76,0)
 Q
"RTN","PXRMP1I",77,0)
 ;
"RTN","PXRMP1I",78,0)
 ;=======================================================================
"RTN","PXRMP1I",79,0)
CTERMS ;Connect the terms to findings.
"RTN","PXRMP1I",80,0)
 N REMIEN,TERMLIST
"RTN","PXRMP1I",81,0)
 S REMIEN=$O(^PXD(811.9,"B","VA-HEP C RISK ASSESSMENT",""))
"RTN","PXRMP1I",82,0)
 D TERMLIST(REMIEN,.TERMLIST)
"RTN","PXRMP1I",83,0)
 D HFTERMS(REMIEN,.TERMLIST)
"RTN","PXRMP1I",84,0)
 Q
"RTN","PXRMP1I",85,0)
 ;
"RTN","PXRMP1I",86,0)
 ;=======================================================================
"RTN","PXRMP1I",87,0)
DDUP(NAME) ;Delete duplicates
"RTN","PXRMP1I",88,0)
 N FIRST,SUB
"RTN","PXRMP1I",89,0)
 S SUB=0,FIRST=1
"RTN","PXRMP1I",90,0)
 F  S SUB=$O(^AUTTHF("B",NAME,SUB)) Q:'SUB  D
"RTN","PXRMP1I",91,0)
 .I FIRST S FIRST=0 Q
"RTN","PXRMP1I",92,0)
 .N DA,DIK,Y
"RTN","PXRMP1I",93,0)
 .S DA=SUB,DIK="^AUTTHF(" D ^DIK
"RTN","PXRMP1I",94,0)
 Q
"RTN","PXRMP1I",95,0)
 ;
"RTN","PXRMP1I",96,0)
 ;=======================================================================
"RTN","PXRMP1I",97,0)
HFTERMS(REMIEN,TERMLIST) ;Connect terms using health factors.
"RTN","PXRMP1I",98,0)
 N HFIEN
"RTN","PXRMP1I",99,0)
 S HFIEN=$O(^AUTTHF("B","PREV POSITIVE TEST FOR HEP C",""))
"RTN","PXRMP1I",100,0)
 K FDA,FDAIEN
"RTN","PXRMP1I",101,0)
 S FDAIEN(1)=TERMLIST("PREVIOUSLY ASSESSED HEP C RISK")
"RTN","PXRMP1I",102,0)
 S FDA(811.5,"?1,",.01)="PREVIOUSLY ASSESSED HEP C RISK"
"RTN","PXRMP1I",103,0)
 S FDA(811.5,"?1,",.02)="N"
"RTN","PXRMP1I",104,0)
 S FDA(811.52,"?+2,?1,",.01)=HFIEN_";AUTTHF("
"RTN","PXRMP1I",105,0)
 D UPDATE(.FDA,.FDAIEN)
"RTN","PXRMP1I",106,0)
 ;
"RTN","PXRMP1I",107,0)
 ;S HFIEN=$O(^AUTTHF("B","RISK FACTOR FOR HEPATITIS C",""))
"RTN","PXRMP1I",108,0)
 ;K FDA,FDAIEN
"RTN","PXRMP1I",109,0)
 ;S FDAIEN(1)=TERMLIST("RISK FACTOR FOR HEPATITIS C")
"RTN","PXRMP1I",110,0)
 ;S FDA(811.5,"?1,",.01)="RISK FACTOR FOR HEPATITIS C"
"RTN","PXRMP1I",111,0)
 ;S FDA(811.5,"?1,",.02)="N"
"RTN","PXRMP1I",112,0)
 ;S FDA(811.52,"?+2,?1,",.01)=HFIEN_";AUTTHF("
"RTN","PXRMP1I",113,0)
 ;D UPDATE(.FDA,.FDAIEN)
"RTN","PXRMP1I",114,0)
 Q
"RTN","PXRMP1I",115,0)
 ;
"RTN","PXRMP1I",116,0)
 ;=======================================================================
"RTN","PXRMP1I",117,0)
TERMLIST(REMIEN,TERMLIST) ;Build the list of terms in the reminder.
"RTN","PXRMP1I",118,0)
 N TERM,TERMNAME
"RTN","PXRMP1I",119,0)
 S TERM=""
"RTN","PXRMP1I",120,0)
 F  S TERM=$O(^PXD(811.9,REMIEN,20,"E","PXRMD(811.5,",TERM)) Q:+TERM=0  D
"RTN","PXRMP1I",121,0)
 . S TERMNAME=$P(^PXRMD(811.5,TERM,0),U,1)
"RTN","PXRMP1I",122,0)
 . S TERMLIST(TERMNAME)=TERM
"RTN","PXRMP1I",123,0)
 Q
"RTN","PXRMP1I",124,0)
 ;
"RTN","PXRMP1I",125,0)
 ;=======================================================================
"RTN","PXRMP1I",126,0)
UPDATE(FDA,FDAIEN) ;Do the update.
"RTN","PXRMP1I",127,0)
 N MSG
"RTN","PXRMP1I",128,0)
 D UPDATE^DIE("","FDA","FDAIEN","MSG")
"RTN","PXRMP1I",129,0)
 Q
"RTN","PXRMP1IE")
0^11^B474357
"RTN","PXRMP1IE",1,0)
PXRMP1IE ; SLC/DT/PJH - Inits for PXRM*1.5*1 ;08/25/2000
"RTN","PXRMP1IE",2,0)
 ;;1.5;CLINICAL REMINDERS;**1**;Jun 19, 2000
"RTN","PXRMP1IE",3,0)
 ;===============================================================
"RTN","PXRMP1IE",4,0)
ENV ;Environment check
"RTN","PXRMP1IE",5,0)
 ;
"RTN","PXRMP1IE",6,0)
 ;Make sure the user has programmer access
"RTN","PXRMP1IE",7,0)
 I $G(DUZ(0))'="@" D  Q
"RTN","PXRMP1IE",8,0)
 .D BMES^XPDUTL("Programmer access required") S XPDQUIT=2
"RTN","PXRMP1IE",9,0)
 ;Make sure the package version is 1.5 and not earlier
"RTN","PXRMP1IE",10,0)
 I $$VERSION^XPDUTL("PXRM")'=1.5 D  Q
"RTN","PXRMP1IE",11,0)
 .D BMES^XPDUTL("Reminder Package not installed") S XPDQUIT=2
"RTN","PXRMP1IE",12,0)
 Q
"RTN","PXRMTERM")
0^9^B13670091
"RTN","PXRMTERM",1,0)
PXRMTERM ; SLC/PKR - Handle reminder terms. ;06/16/2000
"RTN","PXRMTERM",2,0)
 ;;1.5;CLINICAL REMINDERS;**1**;Jun 19, 2000
"RTN","PXRMTERM",3,0)
 ;
"RTN","PXRMTERM",4,0)
 ;=======================================================================
"RTN","PXRMTERM",5,0)
EVALFI(DFN,FIEVAL) ;Evaluate reminder terms.
"RTN","PXRMTERM",6,0)
 N FINDING,EXP,IND,INVDATE,STATUS,TERMIEN,TFIEVAL,TSORT
"RTN","PXRMTERM",7,0)
 S TERMIEN=""
"RTN","PXRMTERM",8,0)
 F  S TERMIEN=$O(^PXD(811.9,PXRMITEM,20,"E","PXRMD(811.5,",TERMIEN)) Q:+TERMIEN=0  D
"RTN","PXRMTERM",9,0)
 . S FINDING=""
"RTN","PXRMTERM",10,0)
 . F  S FINDING=$O(^PXD(811.9,PXRMITEM,20,"E","PXRMD(811.5,",TERMIEN,FINDING)) Q:+FINDING=0  D
"RTN","PXRMTERM",11,0)
 .. S FIEVAL(FINDING)=0
"RTN","PXRMTERM",12,0)
 .. K TFIEVAL,TSORT
"RTN","PXRMTERM",13,0)
 .. D EVALTERM(DFN,FINDING,TERMIEN,.TFIEVAL)
"RTN","PXRMTERM",14,0)
 ..;Use the most recent of the true term findings as the value for the
"RTN","PXRMTERM",15,0)
 ..;finding. If there are no true ones use the most recent expired.
"RTN","PXRMTERM",16,0)
 .. S IND=0
"RTN","PXRMTERM",17,0)
 .. F  S IND=$O(TFIEVAL(IND)) Q:+IND=0  D
"RTN","PXRMTERM",18,0)
 ... S INVDATE=$$FMDFINVL^PXRMDATE(+$G(TFIEVAL(IND,"DATE")),1)
"RTN","PXRMTERM",19,0)
 ...;Set STATUS=0 for a true finding.
"RTN","PXRMTERM",20,0)
 ... I TFIEVAL(IND) S (STATUS,EXP)=0
"RTN","PXRMTERM",21,0)
 ... E  D
"RTN","PXRMTERM",22,0)
 .... S STATUS=1
"RTN","PXRMTERM",23,0)
 ....;Check for expired finding.
"RTN","PXRMTERM",24,0)
 .... I $D(TFIEVAL(IND,"EXPIRED")) S EXP=1
"RTN","PXRMTERM",25,0)
 .... E  S EXP=0
"RTN","PXRMTERM",26,0)
 ... S TSORT(STATUS,EXP,INVDATE,IND)=""
"RTN","PXRMTERM",27,0)
 .. ;First look for the most recent true finding.
"RTN","PXRMTERM",28,0)
 .. S INVDATE=+$O(TSORT(0,0,0))
"RTN","PXRMTERM",29,0)
 .. I INVDATE>0 S IND=$O(TSORT(0,0,INVDATE,""))
"RTN","PXRMTERM",30,0)
 ..;No true finding, look for the most recent expired finding.
"RTN","PXRMTERM",31,0)
 .. I IND="" D
"RTN","PXRMTERM",32,0)
 ... S INVDATE=+$O(TSORT(1,1,0))
"RTN","PXRMTERM",33,0)
 ... I INVDATE>0 S IND=$O(TSORT(1,1,INVDATE,""))
"RTN","PXRMTERM",34,0)
 .. I +IND>0 D
"RTN","PXRMTERM",35,0)
 ... M FIEVAL(FINDING)=TFIEVAL(IND)
"RTN","PXRMTERM",36,0)
 ... S FIEVAL(FINDING,"TERM")=^PXRMD(811.5,TERMIEN,0)
"RTN","PXRMTERM",37,0)
 Q
"RTN","PXRMTERM",38,0)
 ;
"RTN","PXRMTERM",39,0)
 ;=======================================================================
"RTN","PXRMTERM",40,0)
EVALTERM(DFN,FINDING,TERMIEN,TFIEVAL) ;Evaluate all the findings in a term.
"RTN","PXRMTERM",41,0)
 ;Use the "E" cross-reference just like the finding evaluation.
"RTN","PXRMTERM",42,0)
 I '$D(^PXRMD(811.5,TERMIEN,20,"E")) D  Q
"RTN","PXRMTERM",43,0)
 . S ^TMP(PXRMPID,$J,PXRMITEM,"WARNING","NOFI")="Warning no findings items in reminder term "_$P(^PXRMD(811.5,TERMIEN,0),U,1)
"RTN","PXRMTERM",44,0)
 N FTYPE
"RTN","PXRMTERM",45,0)
 S FTYPE=""
"RTN","PXRMTERM",46,0)
 F  S FTYPE=$O(^PXRMD(811.5,TERMIEN,20,"E",FTYPE)) Q:FTYPE=""  D
"RTN","PXRMTERM",47,0)
 . I FTYPE="AUTTEDT(" D EVALTERM^PXRMEDU(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",48,0)
 . I FTYPE="AUTTEXAM(" D EVALTERM^PXRMEXAM(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",49,0)
 . I FTYPE="AUTTHF(" D EVALTERM^PXRMHF(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",50,0)
 . I FTYPE="AUTTIMM(" D EVALTERM^PXRMIMM(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",51,0)
 . I FTYPE="AUTTSK(" D EVALTERM^PXRMSKIN(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",52,0)
 . I FTYPE="GMRD(120.51," D EVALTERM^PXRMMEAS(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",53,0)
 . I FTYPE="LAB(60," D EVALTERM^PXRMLAB(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",54,0)
 . I FTYPE="ORD(101.43," D EVALTERM^PXRMORDR(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",55,0)
 . I FTYPE="PXD(811.2," D EVALTERM^PXRMTAX(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",56,0)
 . I FTYPE="PXRMD(811.4," D EVALTERM^PXRMCF(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",57,0)
 . I FTYPE="PXRMD(811.5," D EVALTERM^PXRMTERM(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",58,0)
 . I FTYPE="PS(50.605," D EVALTERM^PXRMDRCL(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",59,0)
 . I FTYPE="PSDRUG(" D EVALTERM^PXRMDRUG(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",60,0)
 . I FTYPE="PSNDF(50.6," D EVALTERM^PXRMDGEN(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",61,0)
 . I FTYPE="RAMIS(71," D EVALTERM^PXRMRAD(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",62,0)
 . I FTYPE="YTT(601," D EVALTERM^PXRMMH(DFN,FINDING,TERMIEN,.TFIEVAL) Q
"RTN","PXRMTERM",63,0)
 Q
"RTN","PXRMTERM",64,0)
 ;
"RTN","PXRMTERM",65,0)
 ;=======================================================================
"RTN","PXRMTERM",66,0)
OUTPUT(NLINES,TEXT,FINDING,FIEVAL) ;Produce the clinical
"RTN","PXRMTERM",67,0)
 ;maintenance output.
"RTN","PXRMTERM",68,0)
 N TEMP
"RTN","PXRMTERM",69,0)
 S TEMP="Reminder Term: "_$P(FIEVAL(FINDING,"TERM"),U,1)
"RTN","PXRMTERM",70,0)
 S NLINES=NLINES+1
"RTN","PXRMTERM",71,0)
 S TEXT(NLINES)=TEMP
"RTN","PXRMTERM",72,0)
 Q
"RTN","PXRMTERM",73,0)
 ;
"RTN","PXRMXX")
0^2^B76628600
"RTN","PXRMXX",1,0)
PXRMXX ; SLC/PJH - Extract Patient sample;08/25/2000
"RTN","PXRMXX",2,0)
 ;;1.5;CLINICAL REMINDERS;**1**;June 19, 2000
"RTN","PXRMXX",3,0)
 ;
"RTN","PXRMXX",4,0)
 ;Update ^TMP - all patients with encounters
"RTN","PXRMXX",5,0)
 ;------------------------------------------
"RTN","PXRMXX",6,0)
TMP S ^TMP(NODE,$J,"TEMP",DFN)="" Q
"RTN","PXRMXX",7,0)
 ;
"RTN","PXRMXX",8,0)
 ;Save individual encounter into FIND1
"RTN","PXRMXX",9,0)
 ;------------------------------------
"RTN","PXRMXX",10,0)
SAV S FCNT=FCNT+1,FOUND=1 M FIND1(FCNT)=FIND(ENC) Q
"RTN","PXRMXX",11,0)
 ;
"RTN","PXRMXX",12,0)
 ;Check if finding is in date range
"RTN","PXRMXX",13,0)
 ;---------------------------------
"RTN","PXRMXX",14,0)
DCHK(DNODE) ;
"RTN","PXRMXX",15,0)
 N DATE,LTERM,LTRAN,TNAM,SNUM,TERMNAM,TERMNAT
"RTN","PXRMXX",16,0)
 S DATE=$G(FIND(ENC,DNODE)) Q:DATE=""
"RTN","PXRMXX",17,0)
 ;
"RTN","PXRMXX",18,0)
 I (DATE<BD)!(DATE>ED) Q
"RTN","PXRMXX",19,0)
 ;Lab transforms
"RTN","PXRMXX",20,0)
 I REM(PXRMITEM)="VA-NATIONAL EPI LAB EXTRACT" D  Q:LTRAN
"RTN","PXRMXX",21,0)
 .S LTRAN=0 D:$P(FIND(ENC,"FINDING"),";",2)="LAB(60," LTRAN
"RTN","PXRMXX",22,0)
 ;National DB term mapping
"RTN","PXRMXX",23,0)
 S TERMNAM=$P($G(FIND(ENC,"TERM")),U)
"RTN","PXRMXX",24,0)
 ;If term exists check if it needs re-mapping for this reminder
"RTN","PXRMXX",25,0)
 I TERMNAM]"" D
"RTN","PXRMXX",26,0)
 .;Get the alternate name from the REM array
"RTN","PXRMXX",27,0)
 .S TERMNAT=$G(REM(PXRMITEM,TERMNAM)) Q:TERMNAT=""
"RTN","PXRMXX",28,0)
 .;National database code
"RTN","PXRMXX",29,0)
 .S FIND(ENC,"ALTTRM")=TERMNAT
"RTN","PXRMXX",30,0)
 ;Set source number code
"RTN","PXRMXX",31,0)
 S SNUM=""
"RTN","PXRMXX",32,0)
 I $G(FIND(ENC,"SOURCE"))["AUPNPROB" S SNUM=1
"RTN","PXRMXX",33,0)
 I $G(FIND(ENC,"SOURCE"))["AUPNVPOV" S SNUM=2
"RTN","PXRMXX",34,0)
 I $G(FIND(ENC,"SOURCE"))["DGPT" S SNUM=3
"RTN","PXRMXX",35,0)
 S FIND(ENC,"S/N")=SNUM
"RTN","PXRMXX",36,0)
 ;
"RTN","PXRMXX",37,0)
 ;Save encounter
"RTN","PXRMXX",38,0)
 D SAV
"RTN","PXRMXX",39,0)
 Q
"RTN","PXRMXX",40,0)
 ;
"RTN","PXRMXX",41,0)
 ;Check for findings
"RTN","PXRMXX",42,0)
 ;------------------
"RTN","PXRMXX",43,0)
FCHEK(PXRMITEM) ;
"RTN","PXRMXX",44,0)
 N ECNT,EDATE,ENC,LDONE,FOUND
"RTN","PXRMXX",45,0)
 ;Get reminder name
"RTN","PXRMXX",46,0)
 S PXRMNAM=$P($G(^PXD(811.9,PXRMITEM,0)),U)
"RTN","PXRMXX",47,0)
 ;Check each encounter
"RTN","PXRMXX",48,0)
 S ENC=0,ECNT=0,FOUND=0,LDONE=0
"RTN","PXRMXX",49,0)
 F  S ENC=$O(FIND(ENC)) Q:'ENC  D
"RTN","PXRMXX",50,0)
 .;Ignore medications - these are loaded from pharmacy
"RTN","PXRMXX",51,0)
 .I $D(FIND(ENC,"DRUG")) Q
"RTN","PXRMXX",52,0)
 .;Check if finding is in date range
"RTN","PXRMXX",53,0)
 .I $D(FIND(ENC,"FINDING")) D DCHK("DATE")
"RTN","PXRMXX",54,0)
 ;
"RTN","PXRMXX",55,0)
 Q
"RTN","PXRMXX",56,0)
 ;
"RTN","PXRMXX",57,0)
 ;Update ^TMP - all patients with findings
"RTN","PXRMXX",58,0)
 ;----------------------------------------
"RTN","PXRMXX",59,0)
FSAVE N CNT,FIEN,FCNT,FUNIQ,FREC
"RTN","PXRMXX",60,0)
 N VDATA,VDATE,VFOUND,VLAST,VIEN,VLTYP,VOK,VSERV,VTYP
"RTN","PXRMXX",61,0)
 ;Extract the visit date and type from visit record
"RTN","PXRMXX",62,0)
 S CNT=0,FUNIQ=0,VLAST=0,VFOUND=0,VLTYP=""
"RTN","PXRMXX",63,0)
 F  S CNT=$O(FIND1(CNT)) Q:'CNT  D
"RTN","PXRMXX",64,0)
 .S VOK=0
"RTN","PXRMXX",65,0)
 .I $D(FIND1(CNT,"VIEN")) D
"RTN","PXRMXX",66,0)
 ..S VIEN=$G(FIND1(CNT,"VIEN")) Q:'VIEN
"RTN","PXRMXX",67,0)
 ..S VDATA=$G(^AUPNVSIT(VIEN,0)) Q:VDATA=""
"RTN","PXRMXX",68,0)
 ..;Get visit date and service from visit record
"RTN","PXRMXX",69,0)
 ..S VDATE=$P(VDATA,U),VSERV=$P(VDATA,U,7),VFOUND=1,VOK=1,VTYP="O"
"RTN","PXRMXX",70,0)
 ..;Calculate visit type from sevice
"RTN","PXRMXX",71,0)
 ..I (VSERV="D")!(VSERV="H")!(VSERV="I") S VTYP="I"
"RTN","PXRMXX",72,0)
 .;If no visit info default to finding date
"RTN","PXRMXX",73,0)
 .I 'VOK S VDATE=$G(FIND1(CNT,"DATE")),VTYP="O" D
"RTN","PXRMXX",74,0)
 ..N VAIN,VAINDT S VAINDT=VDATE D INP^VADPT
"RTN","PXRMXX",75,0)
 ..I $G(VAIN(7))'="" S VTYP="I"
"RTN","PXRMXX",76,0)
 .;Save encounter/finding date and type
"RTN","PXRMXX",77,0)
 .S FIND1(CNT)=VDATE_U_VTYP
"RTN","PXRMXX",78,0)
 .;Save count by finding for report
"RTN","PXRMXX",79,0)
 .S FIEN=$G(FIND1(CNT,"FINDING")) I FIEN="" S FIEN="NO FINDING"
"RTN","PXRMXX",80,0)
 .S FREC=$G(PXRMFIEN(FIEN)),FCNT=$P(FREC,U),FUNIQ=$P(FREC,U,2)
"RTN","PXRMXX",81,0)
 .S FCNT=FCNT+1 I '$G(FUNIQ(FIEN)) S FUNIQ=FUNIQ+1
"RTN","PXRMXX",82,0)
 .S PXRMFIEN(FIEN)=FCNT_U_FUNIQ,FUNIQ(FIEN)=1
"RTN","PXRMXX",83,0)
 .;Save most recent
"RTN","PXRMXX",84,0)
 .I VDATE>VLAST S VLAST=VDATE,VLTYP=VTYP
"RTN","PXRMXX",85,0)
 ;
"RTN","PXRMXX",86,0)
 ;Save patient
"RTN","PXRMXX",87,0)
 S ^TMP(NODE,$J,DFN)=VLAST_U_VLTYP
"RTN","PXRMXX",88,0)
 ;Save findings
"RTN","PXRMXX",89,0)
 M ^TMP(NODE,$J,DFN,"FIND")=FIND1
"RTN","PXRMXX",90,0)
 ;
"RTN","PXRMXX",91,0)
 Q
"RTN","PXRMXX",92,0)
 ;
"RTN","PXRMXX",93,0)
 ;Check each patient for findings
"RTN","PXRMXX",94,0)
 ;-------------------------------
"RTN","PXRMXX",95,0)
FIND N BD,DFN,ED,LAB,LABN,PXRMITEM,PXRMNAM,OR,REM,SAVE,SEARCH
"RTN","PXRMXX",96,0)
 ;
"RTN","PXRMXX",97,0)
 ;Build array of reminders and terms to be re-mapped
"RTN","PXRMXX",98,0)
 ;
"RTN","PXRMXX",99,0)
 ;This requires that LAB(69.51) is created to include a list of IEN's
"RTN","PXRMXX",100,0)
 ;
"RTN","PXRMXX",101,0)
 S PXRMITEM=0
"RTN","PXRMXX",102,0)
 F  S PXRMITEM=$O(^LAB(69.51,"B",PXRMITEM)) Q:'PXRMITEM  D
"RTN","PXRMXX",103,0)
 .S PXRMNAM=$P($G(^PXD(811.9,PXRMITEM,0)),U)
"RTN","PXRMXX",104,0)
 .I PXRMNAM'="VA-NATIONAL EPI RX EXTRACT" S REM(PXRMITEM)=PXRMNAM
"RTN","PXRMXX",105,0)
 .;Get finding list for these reminders and medication list
"RTN","PXRMXX",106,0)
 .D REM^PXRMXX1(PXRMITEM,.SEARCH,.LAB)
"RTN","PXRMXX",107,0)
 .;Hep A,B,C lab tests
"RTN","PXRMXX",108,0)
 .S LABN("HEP C VIRUS ANTIBODY POSITIVE")=""
"RTN","PXRMXX",109,0)
 .S LABN("HEP C VIRUS ANTIBODY NEGATIVE")=""
"RTN","PXRMXX",110,0)
 .S LABN("HAV Ab positive")=""
"RTN","PXRMXX",111,0)
 .S LABN("HAV IgM Ab positive")=""
"RTN","PXRMXX",112,0)
 .S LABN("HAV IgG positive")=""
"RTN","PXRMXX",113,0)
 .S LABN("HBs Ab positive")=""
"RTN","PXRMXX",114,0)
 .S LABN("HBs Ag positive")=""
"RTN","PXRMXX",115,0)
 .S LABN("HBc Ab IgM positive")=""
"RTN","PXRMXX",116,0)
 .S LABN("HBe Ag positive")=""
"RTN","PXRMXX",117,0)
 .;NDB Transformations
"RTN","PXRMXX",118,0)
 .I PXRMNAM="VA-HEP C RISK ASSESSMENT" D
"RTN","PXRMXX",119,0)
 ..S REM(PXRMITEM,"DECLINED HEP C RISK ASSESSMENT")=1
"RTN","PXRMXX",120,0)
 ..S REM(PXRMITEM,"NO RISK FACTORS FOR HEP C")=2
"RTN","PXRMXX",121,0)
 ..S REM(PXRMITEM,"PREVIOUSLY ASSESSED HEP C RISK")=3
"RTN","PXRMXX",122,0)
 ..S REM(PXRMITEM,"RISK FACTOR FOR HEPATITIS C")=4
"RTN","PXRMXX",123,0)
 ..S REM(PXRMITEM,"HEP C VIRUS ANTIBODY POSITIVE")=5
"RTN","PXRMXX",124,0)
 ..S REM(PXRMITEM,"HEP C VIRUS ANTIBODY NEGATIVE")=6
"RTN","PXRMXX",125,0)
 ..S REM(PXRMITEM,"HEPATITIS C INFECTION")=7
"RTN","PXRMXX",126,0)
 ;
"RTN","PXRMXX",127,0)
 ;Build pharmacy codes list
"RTN","PXRMXX",128,0)
 F FTYPE="PSNDF(50.6,","PSDRUG(","PS(50.605," D
"RTN","PXRMXX",129,0)
 .S FIEN=""
"RTN","PXRMXX",130,0)
 .F  S FIEN=$O(SEARCH(FTYPE,FIEN)) Q:'FIEN  D
"RTN","PXRMXX",131,0)
 ..S OR(FIEN_";"_FTYPE)=""
"RTN","PXRMXX",132,0)
 ;
"RTN","PXRMXX",133,0)
 ;Search for pharmacy outpatients
"RTN","PXRMXX",134,0)
 I $O(OR(""))]"" D EN^PSOORAPI(PXRMBDT,PXRMEDT,.OR,"F","PSO"_NODE)
"RTN","PXRMXX",135,0)
 ;
"RTN","PXRMXX",136,0)
 ;Search for pharmacy inpatients
"RTN","PXRMXX",137,0)
 I $O(OR(""))]"" D EN^PSJORAPI(PXRMBDT,PXRMEDT,.OR,"","PSI"_NODE)
"RTN","PXRMXX",138,0)
 ;
"RTN","PXRMXX",139,0)
 ;Build Lab codes list
"RTN","PXRMXX",140,0)
 S FTYPE="LAB(60,",FIEN="" K OR
"RTN","PXRMXX",141,0)
 F  S FIEN=$O(SEARCH(FTYPE,FIEN)) Q:'FIEN  D
"RTN","PXRMXX",142,0)
 .S OR(FIEN)=""
"RTN","PXRMXX",143,0)
 ;
"RTN","PXRMXX",144,0)
 ;Search for lab patients
"RTN","PXRMXX",145,0)
 I $O(OR(""))]"" D LAB^PXRMXX2(PXRMBDT,PXRMEDT,.OR,NODE)
"RTN","PXRMXX",146,0)
 ;
"RTN","PXRMXX",147,0)
 ;Build Health Factors list
"RTN","PXRMXX",148,0)
 S FTYPE="AUTTHF(",FIEN="" K OR
"RTN","PXRMXX",149,0)
 F  S FIEN=$O(SEARCH(FTYPE,FIEN)) Q:'FIEN  D
"RTN","PXRMXX",150,0)
 .S OR(FIEN)=""
"RTN","PXRMXX",151,0)
 ;
"RTN","PXRMXX",152,0)
 ;Search for HF patients
"RTN","PXRMXX",153,0)
 I $O(OR(""))]"" D HF^PXRMXX2(PXRMBDT,PXRMEDT,.OR,NODE)
"RTN","PXRMXX",154,0)
 ;
"RTN","PXRMXX",155,0)
 ;Build Patient Education list
"RTN","PXRMXX",156,0)
 S FTYPE="AUTTEDT(",FIEN="" K OR
"RTN","PXRMXX",157,0)
 F  S FIEN=$O(SEARCH(FTYPE,FIEN)) Q:'FIEN  D
"RTN","PXRMXX",158,0)
 .S OR(FIEN)=""
"RTN","PXRMXX",159,0)
 ;
"RTN","PXRMXX",160,0)
 ;Search for PED patients
"RTN","PXRMXX",161,0)
 I $O(OR(""))]"" D PED^PXRMXX2(PXRMBDT,PXRMEDT,.OR,NODE)
"RTN","PXRMXX",162,0)
 ;
"RTN","PXRMXX",163,0)
 ;Build Examination list
"RTN","PXRMXX",164,0)
 S FTYPE="AUTTEXAM(",FIEN="" K OR
"RTN","PXRMXX",165,0)
 F  S FIEN=$O(SEARCH(FTYPE,FIEN)) Q:'FIEN  D
"RTN","PXRMXX",166,0)
 .S OR(FIEN)=""
"RTN","PXRMXX",167,0)
 ;
"RTN","PXRMXX",168,0)
 ;Search for Exam patients
"RTN","PXRMXX",169,0)
 I $O(OR(""))]"" D EXAM^PXRMXX2(PXRMBDT,PXRMEDT,.OR,NODE)
"RTN","PXRMXX",170,0)
 ;
"RTN","PXRMXX",171,0)
 ;Build POV codes list
"RTN","PXRMXX",172,0)
 S FTYPE="ICD9(",FIEN="" K OR
"RTN","PXRMXX",173,0)
 F  S FIEN=$O(SEARCH(FTYPE,FIEN)) Q:'FIEN  D
"RTN","PXRMXX",174,0)
 .S OR(FIEN)="",^TMP("POV"_NODE,$J,FIEN)=""
"RTN","PXRMXX",175,0)
 ;
"RTN","PXRMXX",176,0)
 ;Search for POV patients
"RTN","PXRMXX",177,0)
 I $O(OR(""))]"" D POV^PXRMXX2(PXRMBDT,PXRMEDT,"POV"_NODE,NODE)
"RTN","PXRMXX",178,0)
 ;
"RTN","PXRMXX",179,0)
 S BD=PXRMBDT-.0001,ED=PXRMEDT+.2359,DFN=""
"RTN","PXRMXX",180,0)
 F  S DFN=$O(^TMP(NODE,$J,"TEMP",DFN)) Q:'DFN  Q:TSTOP=1  D
"RTN","PXRMXX",181,0)
 .;Check if stop task requested
"RTN","PXRMXX",182,0)
 .I $$S^%ZTLOAD S TSTOP=1 Q
"RTN","PXRMXX",183,0)
 .;Update total patient count for report
"RTN","PXRMXX",184,0)
 .S PXRMCNT=PXRMCNT+1
"RTN","PXRMXX",185,0)
 .N FIND1,FCNT
"RTN","PXRMXX",186,0)
 .;Process reminders
"RTN","PXRMXX",187,0)
 .S PXRMITEM=0,FCNT=0
"RTN","PXRMXX",188,0)
 .F  S PXRMITEM=$O(REM(PXRMITEM)) Q:'PXRMITEM  D
"RTN","PXRMXX",189,0)
 ..;Check reminder exists
"RTN","PXRMXX",190,0)
 ..Q:'$D(^PXD(811.9,PXRMITEM,0))
"RTN","PXRMXX",191,0)
 ..;Evaluate reminder to obtain list of findings
"RTN","PXRMXX",192,0)
 ..N FIND
"RTN","PXRMXX",193,0)
 ..D FIDATA^PXRM(DFN,PXRMITEM,.FIND)
"RTN","PXRMXX",194,0)
 ..;Check if findings exist for the date range
"RTN","PXRMXX",195,0)
 ..D FCHEK(PXRMITEM)
"RTN","PXRMXX",196,0)
 .;Save in ^TMP
"RTN","PXRMXX",197,0)
 .I FCNT D FSAVE K FIND1 S PXRMFCNT=PXRMFCNT+1
"RTN","PXRMXX",198,0)
 ;
"RTN","PXRMXX",199,0)
 ;Merge in patients from Outpatient Pharmacy
"RTN","PXRMXX",200,0)
 D PSMERG^PXRMXX1("PSO",NODE,.SEARCH)
"RTN","PXRMXX",201,0)
 ;Merge in patients from Inpatient Pharmacy
"RTN","PXRMXX",202,0)
 D PSMERG^PXRMXX1("PSI",NODE,.SEARCH)
"RTN","PXRMXX",203,0)
 ;
"RTN","PXRMXX",204,0)
 Q
"RTN","PXRMXX",205,0)
 ;
"RTN","PXRMXX",206,0)
 ;Complex logic to handle lab/reminder mismatches
"RTN","PXRMXX",207,0)
 ;-----------------------------------------------
"RTN","PXRMXX",208,0)
LTRAN S LTERM=$P($G(FIND(ENC,"TERM")),U) Q:LTERM=""
"RTN","PXRMXX",209,0)
 ;Skip terms not used in cohort logic
"RTN","PXRMXX",210,0)
 I $D(LAB(LTERM)) S LTRAN=1 Q
"RTN","PXRMXX",211,0)
 ;If one of selected list send the latest out of cohort entries instead
"RTN","PXRMXX",212,0)
 I $D(LABN(LTERM)) S LTRAN=1 Q:LDONE=1  D
"RTN","PXRMXX",213,0)
 .N ENC,TERM,DATE
"RTN","PXRMXX",214,0)
 .S ENC=0,LDONE=1
"RTN","PXRMXX",215,0)
 .F  S ENC=$O(FIND(ENC)) Q:'ENC  D
"RTN","PXRMXX",216,0)
 ..S TERM=$P($G(FIND(ENC,"TERM")),U) Q:TERM=""
"RTN","PXRMXX",217,0)
 ..;Check if the term is in the out of cohort list
"RTN","PXRMXX",218,0)
 ..I $D(LAB(TERM)) D
"RTN","PXRMXX",219,0)
 ...;Check if lab test is within date range or prior
"RTN","PXRMXX",220,0)
 ...S DATE=$G(FIND(ENC,"DATE")) Q:DATE=""  Q:DATE>ED
"RTN","PXRMXX",221,0)
 ...D SAV
"RTN","PXRMXX",222,0)
 ;
"RTN","PXRMXX",223,0)
 Q
"RTN","PXRMXX",224,0)
 ;
"RTN","PXRMXX",225,0)
 ;
"RTN","PXRMXX",226,0)
 ;Entry point for API
"RTN","PXRMXX",227,0)
 ;-------------------
"RTN","PXRMXX",228,0)
PATS(PXRMBDT,PXRMEDT,NODE) ;
"RTN","PXRMXX",229,0)
 ;
"RTN","PXRMXX",230,0)
 ; PXRMBDT - Start date in fileman format
"RTN","PXRMXX",231,0)
 ; PXRMEDT - End date in fileman format
"RTN","PXRMXX",232,0)
 ; NODE  - Target name for ^TMP(NODE,$J)
"RTN","PXRMXX",233,0)
 ;
"RTN","PXRMXX",234,0)
 ;Task stopped
"RTN","PXRMXX",235,0)
 N TSTOP S TSTOP=0
"RTN","PXRMXX",236,0)
 ;
"RTN","PXRMXX",237,0)
 ;
"RTN","PXRMXX",238,0)
 ;Build temporary array of all wards
"RTN","PXRMXX",239,0)
 ;N PXRMLCHL,PXRMLOCN D LCHL^PXRMXAP(1,.PXRMLCHL)
"RTN","PXRMXX",240,0)
 ;
"RTN","PXRMXX",241,0)
 ;Patients, patients with findings, finding and term counts
"RTN","PXRMXX",242,0)
 N PXRMCNT,PXRMFCNT,PXRMFIEN,PXRMTIEN S PXRMCNT=0,PXRMFCNT=0
"RTN","PXRMXX",243,0)
 ;
"RTN","PXRMXX",244,0)
 ;Clear ^TMP
"RTN","PXRMXX",245,0)
 K ^TMP(NODE,$J)
"RTN","PXRMXX",246,0)
 ;Current inpatients
"RTN","PXRMXX",247,0)
 ;D INP
"RTN","PXRMXX",248,0)
 ;Inpatient admissions
"RTN","PXRMXX",249,0)
 ;D ADM
"RTN","PXRMXX",250,0)
 ;Outpatient visits
"RTN","PXRMXX",251,0)
 ;D VISITS Q:TSTOP=1
"RTN","PXRMXX",252,0)
 ;
"RTN","PXRMXX",253,0)
 ;Check for findings in the selected patients
"RTN","PXRMXX",254,0)
 D FIND Q:TSTOP=1
"RTN","PXRMXX",255,0)
 ;
"RTN","PXRMXX",256,0)
 ;Save report
"RTN","PXRMXX",257,0)
 D REPORT^PXRMXX1(NODE)
"RTN","PXRMXX",258,0)
 ;
"RTN","PXRMXX",259,0)
 ;Remove list of all patients with encounters
"RTN","PXRMXX",260,0)
 K ^TMP(NODE,$J,"TEMP")
"RTN","PXRMXX",261,0)
 ;Remove pharmacy outpatient list
"RTN","PXRMXX",262,0)
 K ^TMP("PSO"_NODE,$J)
"RTN","PXRMXX",263,0)
 ;Remove pharmacy inpatient list
"RTN","PXRMXX",264,0)
 K ^TMP("PSI"_NODE,$J)
"RTN","PXRMXX",265,0)
 ;Remove icd9 list
"RTN","PXRMXX",266,0)
 K ^TMP("POV"_NODE,$J)
"RTN","PXRMXX",267,0)
 Q
"RTN","PXRMXX",268,0)
 ;
"RTN","PXRMXX",269,0)
 ;Build list of inpatients admissions
"RTN","PXRMXX",270,0)
 ;-----------------------------------
"RTN","PXRMXX",271,0)
ADM N HLOCIEN,IC,DFN,BD,ED
"RTN","PXRMXX",272,0)
 ;Get admissions for each selected location
"RTN","PXRMXX",273,0)
 F IC=1:1 Q:'$D(PXRMLCHL(IC))  D
"RTN","PXRMXX",274,0)
 .S HLOCIEN=$P(PXRMLCHL(IC),U,2) Q:HLOCIEN=""
"RTN","PXRMXX",275,0)
 .; Get admissions from patient movements and return DFN's in PATS
"RTN","PXRMXX",276,0)
 .S BD=PXRMBDT-.0001
"RTN","PXRMXX",277,0)
 .S ED=PXRMEDT+.2359
"RTN","PXRMXX",278,0)
 .N PATS D ADM^PXRMXAP(HLOCIEN,.PATS,BD,ED)
"RTN","PXRMXX",279,0)
 .;Build ^TMP for selected patients 
"RTN","PXRMXX",280,0)
 .S DFN=""
"RTN","PXRMXX",281,0)
 .F  S DFN=$O(PATS(DFN)) Q:DFN=""  D TMP
"RTN","PXRMXX",282,0)
 Q
"RTN","PXRMXX",283,0)
 ;
"RTN","PXRMXX",284,0)
 ;Build list of Current inpatients
"RTN","PXRMXX",285,0)
 ;--------------------------------
"RTN","PXRMXX",286,0)
INP N HLOCIEN,IC,DFN
"RTN","PXRMXX",287,0)
 ;Get Current inpatients for each location
"RTN","PXRMXX",288,0)
 F IC=1:1 Q:'$D(PXRMLCHL(IC))  D
"RTN","PXRMXX",289,0)
 .S HLOCIEN=$P(PXRMLCHL(IC),U,2) Q:HLOCIEN=""
"RTN","PXRMXX",290,0)
 .;Get WARDIEN,WARDNAM and return DFN's in PATS
"RTN","PXRMXX",291,0)
 .N PATS D WARD^PXRMXAP(HLOCIEN,.PATS)
"RTN","PXRMXX",292,0)
 .;Build ^TMP for selected patients 
"RTN","PXRMXX",293,0)
 .S DFN=""
"RTN","PXRMXX",294,0)
 .F  S DFN=$O(PATS(DFN)) Q:DFN=""  D TMP
"RTN","PXRMXX",295,0)
 Q
"RTN","PXRMXX",296,0)
 ;
"RTN","PXRMXX",297,0)
 ;Scan visit file to build list of patients
"RTN","PXRMXX",298,0)
 ;-----------------------------------------
"RTN","PXRMXX",299,0)
VISITS N BD,DFN,ED,HLOCIEN,IC,VIEN,VISIT
"RTN","PXRMXX",300,0)
 ;
"RTN","PXRMXX",301,0)
 S BD=PXRMBDT-.0001
"RTN","PXRMXX",302,0)
 S ED=PXRMEDT+.2359
"RTN","PXRMXX",303,0)
 ;Get Date ; DBIA 2028
"RTN","PXRMXX",304,0)
 F  S BD=$O(^AUPNVSIT("B",BD)) Q:BD>ED  Q:BD=""  Q:TSTOP=1  D
"RTN","PXRMXX",305,0)
 .S VIEN=0
"RTN","PXRMXX",306,0)
 .;Get individual visit
"RTN","PXRMXX",307,0)
 .F  S VIEN=$O(^AUPNVSIT("B",BD,VIEN)) Q:VIEN=""  Q:TSTOP=1  D
"RTN","PXRMXX",308,0)
 ..;Check if stop task requested
"RTN","PXRMXX",309,0)
 ..I $$S^%ZTLOAD S TSTOP=1 Q
"RTN","PXRMXX",310,0)
 ..;Screen Individual Visit
"RTN","PXRMXX",311,0)
 ..S VISIT=$G(^AUPNVSIT(VIEN,0)) Q:VISIT=""
"RTN","PXRMXX",312,0)
 ..;Patient IEN
"RTN","PXRMXX",313,0)
 ..S DFN=$P(VISIT,U,5) Q:'DFN
"RTN","PXRMXX",314,0)
 ..;Build patient list in ^TMP
"RTN","PXRMXX",315,0)
 ..D TMP
"RTN","PXRMXX",316,0)
 Q
"RTN","PXRMXX1")
0^4^B35159345
"RTN","PXRMXX1",1,0)
PXRMXX1 ; SLC/PJH - Build list of reminder findings;07/31/2000
"RTN","PXRMXX1",2,0)
 ;;1.5;CLINICAL REMINDERS;**1**;June 19, 2000
"RTN","PXRMXX1",3,0)
 ;
"RTN","PXRMXX1",4,0)
 ;Called at REM, REPORT and PSMERG from PXRMXX
"RTN","PXRMXX1",5,0)
 ;
"RTN","PXRMXX1",6,0)
 ;Merge the patients found by the pharmacy API
"RTN","PXRMXX1",7,0)
 ;--------------------------------------------
"RTN","PXRMXX1",8,0)
PSMERG(TYP,NODE,SEARCH) ;
"RTN","PXRMXX1",9,0)
 N DATA,DATE,DCNT,DFN,DRUG,DSUP,FCNT,FINDING,FIEN,FLD,FTYP,FREC,FUNIQ
"RTN","PXRMXX1",10,0)
 N LAST,LDATE,NEXT,RDATE,SDATE,TERM,TIEN,VTYP
"RTN","PXRMXX1",11,0)
 ;
"RTN","PXRMXX1",12,0)
 S DFN="",VTYP=$S(TYP="PSI":"I",1:"O")
"RTN","PXRMXX1",13,0)
 F  S DFN=$O(^TMP(TYP_NODE,$J,DFN)) Q:'DFN  D
"RTN","PXRMXX1",14,0)
 .;Get last entry for this patient created by reminder evaluation
"RTN","PXRMXX1",15,0)
 .S LAST=$O(^TMP(NODE,$J,DFN,"FIND",""),-1),NEXT=LAST+1,DCNT=0
"RTN","PXRMXX1",16,0)
 .;If this is a new patient update patient and finding count
"RTN","PXRMXX1",17,0)
 .I NEXT=1 S PXRMFCNT=PXRMFCNT+1,PXRMCNT=PXRMCNT+1
"RTN","PXRMXX1",18,0)
 .;Scan through medications found for this patient 
"RTN","PXRMXX1",19,0)
 .F  S DCNT=$O(^TMP(TYP_NODE,$J,DFN,DCNT)) Q:'DCNT  D
"RTN","PXRMXX1",20,0)
 ..;Move data fields into FIEVAL format
"RTN","PXRMXX1",21,0)
 ..S FINDING=$P($G(^TMP(TYP_NODE,$J,DFN,DCNT,0)),U) Q:FINDING=""
"RTN","PXRMXX1",22,0)
 ..S DATA=$G(^TMP(TYP_NODE,$J,DFN,DCNT,1)),DATE=$P(DATA,U)
"RTN","PXRMXX1",23,0)
 ..S RDATE=$P(DATA,U,2),DRUG=$P(DATA,U,3),DSUP=$P(DATA,U,4)
"RTN","PXRMXX1",24,0)
 ..;Stop date
"RTN","PXRMXX1",25,0)
 ..S STOPDATE=$P(DATA,U,5)
"RTN","PXRMXX1",26,0)
 ..I +STOPDATE S DSUP=$$FMDIFF^XLFDT(STOPDATE,DATE,"")
"RTN","PXRMXX1",27,0)
 ..;Determine finding item/type
"RTN","PXRMXX1",28,0)
 ..S FTYPE=$P(FINDING,";",2),FIEN=$P(FINDING,";") Q:FIEN=""  Q:FTYPE=""
"RTN","PXRMXX1",29,0)
 ..;Create file entry for each term
"RTN","PXRMXX1",30,0)
 ..S TIEN=""
"RTN","PXRMXX1",31,0)
 ..F  S TIEN=$O(SEARCH(FTYPE,FIEN,TIEN)) Q:TIEN=""  D
"RTN","PXRMXX1",32,0)
 ...F FLD="FINDING","DATE","RDATE","DRUG","DSUP","STOPDATE" D
"RTN","PXRMXX1",33,0)
 ....S ^TMP(NODE,$J,DFN,"FIND",NEXT,FLD)=@FLD
"RTN","PXRMXX1",34,0)
 ...;Get term name (no transforms)
"RTN","PXRMXX1",35,0)
 ...S ^TMP(NODE,$J,DFN,"FIND",NEXT,"TERM")=$P($G(^PXRMD(811.5,TIEN,0)),U)
"RTN","PXRMXX1",36,0)
 ...;Update header
"RTN","PXRMXX1",37,0)
 ...S ^TMP(NODE,$J,DFN,"FIND",NEXT)=DATE_U_VTYP
"RTN","PXRMXX1",38,0)
 ...;Update finding header
"RTN","PXRMXX1",39,0)
 ...S LDATE=$P($G(^TMP(NODE,$J,DFN)),U)
"RTN","PXRMXX1",40,0)
 ...I DATE>LDATE S ^TMP(NODE,$J,DFN)=DATE_U_VTYP
"RTN","PXRMXX1",41,0)
 ...;Save count by finding for report
"RTN","PXRMXX1",42,0)
 ...S FREC=$G(PXRMFIEN(FINDING)),FCNT=$P(FREC,U),FUNIQ=$P(FREC,U,2)
"RTN","PXRMXX1",43,0)
 ...S FCNT=FCNT+1 I '$G(FUNIQ(FIEN)) S FUNIQ=FUNIQ+1
"RTN","PXRMXX1",44,0)
 ...S PXRMFIEN(FINDING)=FCNT_U_FUNIQ,FUNIQ(FINDING)=1
"RTN","PXRMXX1",45,0)
 ...;Update count
"RTN","PXRMXX1",46,0)
 ...S NEXT=NEXT+1
"RTN","PXRMXX1",47,0)
 Q
"RTN","PXRMXX1",48,0)
 ;
"RTN","PXRMXX1",49,0)
 ;Build list of related findings
"RTN","PXRMXX1",50,0)
 ;------------------------------
"RTN","PXRMXX1",51,0)
REM(PXRMITEM,OUTPUT,LAB) ;
"RTN","PXRMXX1",52,0)
 N COHORT,FTYPE,FIEN,FNODE,TNAM,TIEN
"RTN","PXRMXX1",53,0)
 S FTYPE=""
"RTN","PXRMXX1",54,0)
 ;Check if terms findings exist on the reminder
"RTN","PXRMXX1",55,0)
 F  S FTYPE=$O(^PXD(811.9,PXRMITEM,20,"E",FTYPE)) Q:FTYPE=""  D
"RTN","PXRMXX1",56,0)
 .;Check terms ONLY
"RTN","PXRMXX1",57,0)
 .I FTYPE="PXRMD(811.5," D  Q
"RTN","PXRMXX1",58,0)
 ..N FTYPE S TIEN=""
"RTN","PXRMXX1",59,0)
 ..;Scan through terms in this reminder
"RTN","PXRMXX1",60,0)
 ..F  S TIEN=$O(^PXD(811.9,PXRMITEM,20,"E","PXRMD(811.5,",TIEN)) Q:'TIEN  D
"RTN","PXRMXX1",61,0)
 ...;Get the cohort flag
"RTN","PXRMXX1",62,0)
 ...S FNODE=$O(^PXD(811.9,PXRMITEM,20,"E","PXRMD(811.5,",TIEN,""))
"RTN","PXRMXX1",63,0)
 ...S COHORT="",FTYPE=""
"RTN","PXRMXX1",64,0)
 ...I FNODE S COHORT=$P($G(^PXD(811.9,PXRMITEM,20,FNODE,0)),U,7)
"RTN","PXRMXX1",65,0)
 ...;Scan through term looking for findings
"RTN","PXRMXX1",66,0)
 ...F  S FTYPE=$O(^PXRMD(811.5,TIEN,20,"E",FTYPE)) Q:FTYPE=""  D
"RTN","PXRMXX1",67,0)
 ....;Taxonomy findings
"RTN","PXRMXX1",68,0)
 ....I FTYPE="PXD(811.2," D RTAX Q
"RTN","PXRMXX1",69,0)
 ....;If Lab test and not in cohort ignore
"RTN","PXRMXX1",70,0)
 ....I FTYPE="LAB(60,",COHORT="" D  Q
"RTN","PXRMXX1",71,0)
 .....;Only applies to lab extract reminder 
"RTN","PXRMXX1",72,0)
 .....I $G(REM(PXRMITEM))'="VA-NATIONAL EPI LAB EXTRACT" Q
"RTN","PXRMXX1",73,0)
 .....;Get the term name for this lab test
"RTN","PXRMXX1",74,0)
 .....S TNAM=$P($G(^PXRMD(811.5,TIEN,0)),U) Q:TNAM=""
"RTN","PXRMXX1",75,0)
 .....S LAB(TNAM)=TIEN Q
"RTN","PXRMXX1",76,0)
 ....;Other findings
"RTN","PXRMXX1",77,0)
 ....D RSET
"RTN","PXRMXX1",78,0)
 Q
"RTN","PXRMXX1",79,0)
 ;
"RTN","PXRMXX1",80,0)
 ;Save report details
"RTN","PXRMXX1",81,0)
 ;-------------------
"RTN","PXRMXX1",82,0)
REPORT(NODE) ;
"RTN","PXRMXX1",83,0)
 N RDATE,CNT,CN1,COUNT,DATA,LAST,OLD,DESC
"RTN","PXRMXX1",84,0)
 ;format rundate as MMDDYY
"RTN","PXRMXX1",85,0)
 S RDATE=$$DT^XLFDT,RDATE=$E(RDATE,4,5)_$E(RDATE,6,7)_$E(RDATE,2,3)
"RTN","PXRMXX1",86,0)
 ;Task Name
"RTN","PXRMXX1",87,0)
 S DESC="LREPI "_$E(PXRMEDT,2,3)_"/"_$E(PXRMEDT,4,5)_" "_RDATE
"RTN","PXRMXX1",88,0)
 S DATA=$G(^PXRMXT(810.3,0))
"RTN","PXRMXX1",89,0)
 ;Find next entry in report file
"RTN","PXRMXX1",90,0)
 S LAST=$P(DATA,U,3),COUNT=$P(DATA,U,4)+1,CNT=LAST+1
"RTN","PXRMXX1",91,0)
 S $P(^PXRMXT(810.3,0),U,3)=CNT,$P(^PXRMXT(810.3,0),U,4)=COUNT
"RTN","PXRMXX1",92,0)
 ;Save Task and extract parameters
"RTN","PXRMXX1",93,0)
 S ^PXRMXT(810.3,CNT,0)=DESC_U_PXRMBDT_U_PXRMEDT_U_$G(ZTSK)_U_DUZ_U_$$NOW^XLFDT_U_PXRMCNT_U_PXRMFCNT
"RTN","PXRMXX1",94,0)
 ;Transfer findings into report file
"RTN","PXRMXX1",95,0)
 N DATE,DFN,DRUG,DSUP,ENC,EREC,ETYP,IC,FINDING,RESULT
"RTN","PXRMXX1",96,0)
 N TERM,ALTTRM,TIEN,TNDBID,VALUE,VIEN
"RTN","PXRMXX1",97,0)
 S DFN=0,CN1=0
"RTN","PXRMXX1",98,0)
 F  S DFN=$O(^TMP(NODE,$J,DFN)) Q:'DFN  Q:TSTOP=1  D
"RTN","PXRMXX1",99,0)
 .;Check if stop task requested
"RTN","PXRMXX1",100,0)
 .I $$S^%ZTLOAD S TSTOP=1 Q
"RTN","PXRMXX1",101,0)
 .S ENC=0
"RTN","PXRMXX1",102,0)
 .F  S ENC=$O(^TMP(NODE,$J,DFN,"FIND",ENC)) Q:'ENC  D
"RTN","PXRMXX1",103,0)
 ..;DINUM
"RTN","PXRMXX1",104,0)
 ..S CN1=CN1+1
"RTN","PXRMXX1",105,0)
 ..;Encounter type
"RTN","PXRMXX1",106,0)
 ..S ETYP=$P($G(^TMP(NODE,$J,DFN,"FIND",ENC)),U,2)
"RTN","PXRMXX1",107,0)
 ..;Finding details
"RTN","PXRMXX1",108,0)
 ..F IC="DATE","FINDING","RESULT","TERM","ALTTRM","VALUE","VIEN" D
"RTN","PXRMXX1",109,0)
 ...S @IC=$P($G(^TMP(NODE,$J,DFN,"FIND",ENC,IC)),U)
"RTN","PXRMXX1",110,0)
 ..;Drug details
"RTN","PXRMXX1",111,0)
 ..F IC="DRUG","DSUP" D
"RTN","PXRMXX1",112,0)
 ...S @IC=$P($G(^TMP(NODE,$J,DFN,"FIND",ENC,IC)),U)
"RTN","PXRMXX1",113,0)
 ..;Get the term ien for the original term if a mapping occurred
"RTN","PXRMXX1",114,0)
 ..S TIEN="",TNDBID=""
"RTN","PXRMXX1",115,0)
 ..I TERM]"" S TIEN=$O(^PXRMD(811.5,"B",TERM,"")),TNDBID=ALTTRM
"RTN","PXRMXX1",116,0)
 ..;Save value if the result is null
"RTN","PXRMXX1",117,0)
 ..I RESULT="" S RESULT=VALUE
"RTN","PXRMXX1",118,0)
 ..;Save data to file
"RTN","PXRMXX1",119,0)
 ..S EREC=DFN_U_U_TIEN_U_FINDING_U_TNDBID_U_DATE_U_VIEN_U_ETYP
"RTN","PXRMXX1",120,0)
 ..S ^PXRMXT(810.3,CNT,1,CN1,0)=EREC
"RTN","PXRMXX1",121,0)
 ..S EREC=RESULT_U_VALUE_U_DRUG_U_DSUP
"RTN","PXRMXX1",122,0)
 ..S ^PXRMXT(810.3,CNT,1,CN1,1)=EREC
"RTN","PXRMXX1",123,0)
 ;
"RTN","PXRMXX1",124,0)
 ;Set top node for ^DIK re-index
"RTN","PXRMXX1",125,0)
 S ^PXRMXT(810.3,CNT,1,0)="^810.31A^"_CN1_U_CN1
"RTN","PXRMXX1",126,0)
 ;
"RTN","PXRMXX1",127,0)
 ;Write finding totals to report file
"RTN","PXRMXX1",128,0)
 N FCNT,FUNIQ,FIEN,FFIEN
"RTN","PXRMXX1",129,0)
 S FIEN="",CN1=0
"RTN","PXRMXX1",130,0)
 F  S FIEN=$O(PXRMFIEN(FIEN)) Q:FIEN=""  D
"RTN","PXRMXX1",131,0)
 .S FCNT=+$P(PXRMFIEN(FIEN),U),FUNIQ=+$P(PXRMFIEN(FIEN),U,2)
"RTN","PXRMXX1",132,0)
 .S FFIEN=FIEN I FFIEN="NO FINDING" S FFIEN=""
"RTN","PXRMXX1",133,0)
 .S CN1=CN1+1,^PXRMXT(810.3,CNT,2,CN1,0)=FFIEN_U_FCNT_U_FUNIQ
"RTN","PXRMXX1",134,0)
 ;
"RTN","PXRMXX1",135,0)
 ;Set top node for ^DIK re-index
"RTN","PXRMXX1",136,0)
 S ^PXRMXT(810.3,CNT,2,0)="^810.32A^"_CN1_U_CN1
"RTN","PXRMXX1",137,0)
 ;
"RTN","PXRMXX1",138,0)
 ;Re-index the file for this batch
"RTN","PXRMXX1",139,0)
 N DIK,DA
"RTN","PXRMXX1",140,0)
 S DIK="^PXRMXT(810.3,",DA=CNT
"RTN","PXRMXX1",141,0)
 D IX1^DIK
"RTN","PXRMXX1",142,0)
 ;
"RTN","PXRMXX1",143,0)
 ;Purge entries
"RTN","PXRMXX1",144,0)
 S OLD=0
"RTN","PXRMXX1",145,0)
 F  S OLD=$O(^PXRMXT(810.3,OLD)) Q:'OLD  D
"RTN","PXRMXX1",146,0)
 .;Keep last 30 runs
"RTN","PXRMXX1",147,0)
 .I (OLD+30)>CNT Q
"RTN","PXRMXX1",148,0)
 .N DIK,DA
"RTN","PXRMXX1",149,0)
 .S DIK="^PXRMXT(810.3,",DA=OLD D ^DIK
"RTN","PXRMXX1",150,0)
 Q
"RTN","PXRMXX1",151,0)
 ;
"RTN","PXRMXX1",152,0)
 ;Store finding for term
"RTN","PXRMXX1",153,0)
 ;----------------------
"RTN","PXRMXX1",154,0)
RSET N FIEN
"RTN","PXRMXX1",155,0)
 S FIEN=""
"RTN","PXRMXX1",156,0)
 F  S FIEN=$O(^PXRMD(811.5,TIEN,20,"E",FTYPE,FIEN)) Q:'FIEN  D
"RTN","PXRMXX1",157,0)
 .S OUTPUT(FTYPE,FIEN,TIEN)=""
"RTN","PXRMXX1",158,0)
 Q
"RTN","PXRMXX1",159,0)
 ;
"RTN","PXRMXX1",160,0)
 ;Store the taxonomy ICD9 codes
"RTN","PXRMXX1",161,0)
 ;-----------------------------
"RTN","PXRMXX1",162,0)
RTAX N FIEN,ISUB,TXIEN
"RTN","PXRMXX1",163,0)
 S TXIEN=""
"RTN","PXRMXX1",164,0)
 ;Scan taxonomy section of the term
"RTN","PXRMXX1",165,0)
 F  S TXIEN=$O(^PXRMD(811.5,TIEN,20,"E",FTYPE,TXIEN)) Q:'TXIEN  D
"RTN","PXRMXX1",166,0)
 .S ISUB=""
"RTN","PXRMXX1",167,0)
 .;Extract ICD9 codes from expanded taxonomy file
"RTN","PXRMXX1",168,0)
 .F  S ISUB=$O(^PXD(811.3,TXIEN,80,ISUB)) Q:'ISUB  D
"RTN","PXRMXX1",169,0)
 ..S FIEN=$P($G(^PXD(811.3,TXIEN,80,ISUB,0)),U) Q:'FIEN
"RTN","PXRMXX1",170,0)
 ..S OUTPUT("ICD9(",FIEN,TIEN)=""
"RTN","PXRMXX1",171,0)
 Q
"RTN","PXRMXX2")
0^6^B34311808
"RTN","PXRMXX2",1,0)
PXRMXX2 ; SLC/PJH - Build list of reminder findings;08/25/2000
"RTN","PXRMXX2",2,0)
 ;;1.5;CLINICAL REMINDERS;**1**;June 19, 2000
"RTN","PXRMXX2",3,0)
 ;
"RTN","PXRMXX2",4,0)
 ;Called at HF, PED, LAB and POV from PXRMXX
"RTN","PXRMXX2",5,0)
 ;
"RTN","PXRMXX2",6,0)
HF(BEGIN,END,HFS,NMSPACE) ; return patients with health factors
"RTN","PXRMXX2",7,0)
 N DATA,DFN,ERR,HF,RBEGIN,REND,TEMP K DATA,ERR
"RTN","PXRMXX2",8,0)
 I '$O(HFS(0)) Q
"RTN","PXRMXX2",9,0)
 I BEGIN<END S TEMP=BEGIN,BEGIN=END,END=TEMP
"RTN","PXRMXX2",10,0)
 I BEGIN=+BEGIN S BEGIN=BEGIN+.24 ; if no time, get all results on start date
"RTN","PXRMXX2",11,0)
 D HFDATA(.HFS,.DATA,.ERR)
"RTN","PXRMXX2",12,0)
 S RBEGIN=9999999-BEGIN,REND=9999999-END
"RTN","PXRMXX2",13,0)
 S DFN=0 F  S DFN=$O(^AUPNVHF("AA",DFN)) Q:DFN<1  D
"RTN","PXRMXX2",14,0)
 .I $D(^TMP(NMSPACE,$J,DFN)) Q  ; skip patients already checked in same namespace
"RTN","PXRMXX2",15,0)
 .I $$HFCHECK(DFN,.DATA,RBEGIN,REND) D
"RTN","PXRMXX2",16,0)
 ..S ^TMP(NMSPACE,$J,"TEMP",DFN)=""
"RTN","PXRMXX2",17,0)
 Q
"RTN","PXRMXX2",18,0)
 ;
"RTN","PXRMXX2",19,0)
HFDATA(HFS,DATA,ERR) ;
"RTN","PXRMXX2",20,0)
 N HF,HFNAME,ZERO K ERR
"RTN","PXRMXX2",21,0)
 S HF=0 F  S HF=$O(HFS(HF)) Q:HF<1  D
"RTN","PXRMXX2",22,0)
 .S ZERO=$G(^AUTTHF(HF,0)) I '$L(ZERO) Q
"RTN","PXRMXX2",23,0)
 .S HFNAME=$P(ZERO,U)
"RTN","PXRMXX2",24,0)
 .S DATA(HF)=HFNAME
"RTN","PXRMXX2",25,0)
 Q
"RTN","PXRMXX2",26,0)
 ;
"RTN","PXRMXX2",27,0)
HFCHECK(DFN,DATA,RBEGIN,REND) ; $$ -> 1 if health factor else 0
"RTN","PXRMXX2",28,0)
 N HF,OK,TIME
"RTN","PXRMXX2",29,0)
 S OK=0
"RTN","PXRMXX2",30,0)
 S HF=0 F  S HF=$O(DATA(HF)) Q:HF<1  D
"RTN","PXRMXX2",31,0)
 .S TIME=RBEGIN F  S TIME=$O(^AUPNVHF("AA",DFN,HF,TIME)) Q:TIME>REND  Q:TIME<1  D  I OK Q
"RTN","PXRMXX2",32,0)
 ..S OK=1
"RTN","PXRMXX2",33,0)
 Q OK
"RTN","PXRMXX2",34,0)
 ;
"RTN","PXRMXX2",35,0)
PED(BEGIN,END,PEDS,NMSPACE) ; return patients with education
"RTN","PXRMXX2",36,0)
 N DATA,DFN,ERR,PED,RBEGIN,REND,TEMP K DATA,ERR
"RTN","PXRMXX2",37,0)
 I '$O(PEDS(0)) Q
"RTN","PXRMXX2",38,0)
 I BEGIN<END S TEMP=BEGIN,BEGIN=END,END=TEMP
"RTN","PXRMXX2",39,0)
 I BEGIN=+BEGIN S BEGIN=BEGIN+.24 ; if no time, get all results on start date
"RTN","PXRMXX2",40,0)
 D PEDDATA(.PEDS,.DATA,.ERR)
"RTN","PXRMXX2",41,0)
 S RBEGIN=9999999-BEGIN,REND=9999999-END
"RTN","PXRMXX2",42,0)
 S DFN=0 F  S DFN=$O(^AUPNVPED("AA",DFN)) Q:DFN<1  D
"RTN","PXRMXX2",43,0)
 .I $D(^TMP(NMSPACE,$J,DFN)) Q  ; skip patients already checked in same namespace
"RTN","PXRMXX2",44,0)
 .I $$PEDCHECK(DFN,.DATA,RBEGIN,REND) D
"RTN","PXRMXX2",45,0)
 ..S ^TMP(NMSPACE,$J,"TEMP",DFN)=""
"RTN","PXRMXX2",46,0)
 Q
"RTN","PXRMXX2",47,0)
 ;
"RTN","PXRMXX2",48,0)
PEDDATA(PEDS,DATA,ERR) ;
"RTN","PXRMXX2",49,0)
 N PED,PEDNAME,ZERO K ERR
"RTN","PXRMXX2",50,0)
 S PED=0 F  S PED=$O(PEDS(PED)) Q:PED<1  D
"RTN","PXRMXX2",51,0)
 .S ZERO=$G(^AUTTEDT(PED,0)) I '$L(ZERO) Q
"RTN","PXRMXX2",52,0)
 .S PEDNAME=$P(ZERO,U)
"RTN","PXRMXX2",53,0)
 .S DATA(PED)=PEDNAME
"RTN","PXRMXX2",54,0)
 Q
"RTN","PXRMXX2",55,0)
 ;
"RTN","PXRMXX2",56,0)
PEDCHECK(DFN,DATA,RBEGIN,REND) ; $$ -> 1 if education topic else 0
"RTN","PXRMXX2",57,0)
 N PED,OK,TIME
"RTN","PXRMXX2",58,0)
 S OK=0
"RTN","PXRMXX2",59,0)
 S PED=0 F  S PED=$O(DATA(PED)) Q:PED<1  D
"RTN","PXRMXX2",60,0)
 .S TIME=RBEGIN F  S TIME=$O(^AUPNVPED("AA",DFN,PED,TIME)) Q:TIME>REND  Q:TIME<1  D  I OK Q
"RTN","PXRMXX2",61,0)
 ..S OK=1
"RTN","PXRMXX2",62,0)
 Q OK
"RTN","PXRMXX2",63,0)
 ;
"RTN","PXRMXX2",64,0)
EXAM(BEGIN,END,XAMS,NMSPACE) ; return patients with education
"RTN","PXRMXX2",65,0)
 N DATA,DFN,ERR,RBEGIN,REND,TEMP,XAM K DATA,ERR
"RTN","PXRMXX2",66,0)
 I '$O(XAMS(0)) Q
"RTN","PXRMXX2",67,0)
 I BEGIN<END S TEMP=BEGIN,BEGIN=END,END=TEMP
"RTN","PXRMXX2",68,0)
 I BEGIN=+BEGIN S BEGIN=BEGIN+.24 ; if no time, get all results on start date
"RTN","PXRMXX2",69,0)
 D EXAMDATA(.XAMS,.DATA,.ERR)
"RTN","PXRMXX2",70,0)
 S RBEGIN=9999999-BEGIN,REND=9999999-END
"RTN","PXRMXX2",71,0)
 S DFN=0 F  S DFN=$O(^AUPNVXAM("AA",DFN)) Q:DFN<1  D
"RTN","PXRMXX2",72,0)
 .I $D(^TMP(NMSPACE,$J,DFN)) Q  ; skip patients already checked in same namespace
"RTN","PXRMXX2",73,0)
 .I $$EXAMCHEK(DFN,.DATA,RBEGIN,REND) D
"RTN","PXRMXX2",74,0)
 ..S ^TMP(NMSPACE,$J,"TEMP",DFN)=""
"RTN","PXRMXX2",75,0)
 Q
"RTN","PXRMXX2",76,0)
 ;
"RTN","PXRMXX2",77,0)
EXAMDATA(XAMS,DATA,ERR) ;
"RTN","PXRMXX2",78,0)
 N XAM,XAMNAME,ZERO K ERR
"RTN","PXRMXX2",79,0)
 S XAM=0 F  S XAM=$O(XAMS(XAM)) Q:XAM<1  D
"RTN","PXRMXX2",80,0)
 .S ZERO=$G(^AUTTEXAM(XAM,0)) I '$L(ZERO) Q
"RTN","PXRMXX2",81,0)
 .S XAMNAME=$P(ZERO,U)
"RTN","PXRMXX2",82,0)
 .S DATA(XAM)=XAMNAME
"RTN","PXRMXX2",83,0)
 Q
"RTN","PXRMXX2",84,0)
 ;
"RTN","PXRMXX2",85,0)
EXAMCHEK(DFN,DATA,RBEGIN,REND) ; $$ -> 1 if examination else 0
"RTN","PXRMXX2",86,0)
 N XAM,OK,TIME
"RTN","PXRMXX2",87,0)
 S OK=0
"RTN","PXRMXX2",88,0)
 S XAM=0 F  S XAM=$O(DATA(XAM)) Q:XAM<1  D
"RTN","PXRMXX2",89,0)
 .S TIME=RBEGIN F  S TIME=$O(^AUPNVXAM("AA",DFN,XAM,TIME)) Q:TIME>REND  Q:TIME<1  D  I OK Q
"RTN","PXRMXX2",90,0)
 ..S OK=1
"RTN","PXRMXX2",91,0)
 Q OK
"RTN","PXRMXX2",92,0)
 ;
"RTN","PXRMXX2",93,0)
 ;
"RTN","PXRMXX2",94,0)
LAB(BEGIN,END,TESTS,NMSPACE) ; return patients with lab results
"RTN","PXRMXX2",95,0)
 N DATA,DFN,ERR,RBEGIN,REND,TEMP,TEST K DATA,ERR
"RTN","PXRMXX2",96,0)
 S BEGIN=+$G(BEGIN),END=+$G(END)
"RTN","PXRMXX2",97,0)
 I BEGIN<END S TEMP=BEGIN,BEGIN=END,END=TEMP
"RTN","PXRMXX2",98,0)
 I BEGIN=+BEGIN S BEGIN=BEGIN+.24 ; if no time, get all results on start date
"RTN","PXRMXX2",99,0)
 D LABDATA(.TESTS,.DATA,.ERR)
"RTN","PXRMXX2",100,0)
 S RBEGIN=9999999-BEGIN,REND=9999999-END
"RTN","PXRMXX2",101,0)
 S DFN=0 F  S DFN=$O(^DPT(DFN)) Q:DFN<1  D
"RTN","PXRMXX2",102,0)
 .I $D(^TMP(NMSPACE,$J,DFN)) Q  ; skip patients already checked in same namespace
"RTN","PXRMXX2",103,0)
 .I $$LABCHECK(DFN,.DATA,RBEGIN,REND) D
"RTN","PXRMXX2",104,0)
 ..S ^TMP(NMSPACE,$J,"TEMP",DFN)="" ;***S CNT=CNT+1
"RTN","PXRMXX2",105,0)
 Q
"RTN","PXRMXX2",106,0)
 ;
"RTN","PXRMXX2",107,0)
LABDATA(TESTS,DATA,ERR) ;
"RTN","PXRMXX2",108,0)
 N DNODE,TEST,TESTNAME,ZERO K ERR
"RTN","PXRMXX2",109,0)
 S TEST=0 F  S TEST=$O(TESTS(TEST)) Q:TEST<1  D
"RTN","PXRMXX2",110,0)
 .S ZERO=$G(^LAB(60,TEST,0))
"RTN","PXRMXX2",111,0)
 .I '$L(ZERO) Q
"RTN","PXRMXX2",112,0)
 .S DNODE=+$P($P(ZERO,U,5),";",2)
"RTN","PXRMXX2",113,0)
 .S TESTNAME=$P(ZERO,U)
"RTN","PXRMXX2",114,0)
 .I 'DNODE Q
"RTN","PXRMXX2",115,0)
 .S DATA(DNODE)=TESTNAME
"RTN","PXRMXX2",116,0)
 Q
"RTN","PXRMXX2",117,0)
 ;
"RTN","PXRMXX2",118,0)
LABCHECK(DFN,DATA,RBEGIN,REND) ; $$ -> 1 if lab result else 0
"RTN","PXRMXX2",119,0)
 N DNODE,LRDFN,OK,TIME
"RTN","PXRMXX2",120,0)
 S OK=0
"RTN","PXRMXX2",121,0)
 S LRDFN=+$G(^DPT(DFN,"LR"))
"RTN","PXRMXX2",122,0)
 I 'LRDFN Q OK
"RTN","PXRMXX2",123,0)
 S TIME=RBEGIN F  S TIME=$O(^LR(LRDFN,"CH",TIME)) Q:TIME>REND  Q:TIME<1  D  I OK Q
"RTN","PXRMXX2",124,0)
 .S DNODE=0 F  S DNODE=$O(DATA(DNODE)) Q:DNODE<1  D  I OK Q
"RTN","PXRMXX2",125,0)
 ..I $D(^LR(LRDFN,"CH",TIME,DNODE)) D
"RTN","PXRMXX2",126,0)
 ...I '$P($G(^LR(LRDFN,"CH",TIME,0)),U,3) Q  ; test must be completed
"RTN","PXRMXX2",127,0)
 ...S OK=1
"RTN","PXRMXX2",128,0)
 Q OK
"RTN","PXRMXX2",129,0)
 ;
"RTN","PXRMXX2",130,0)
POV(BEGIN,END,INPUT,NMSPACE) ; return patients with diagnosis
"RTN","PXRMXX2",131,0)
 I INPUT=NMSPACE Q
"RTN","PXRMXX2",132,0)
 N DATA,DFN,ERR,POV,RBEGIN,REND,TEMP K DATA,ERR
"RTN","PXRMXX2",133,0)
 S BEGIN=+$G(BEGIN),END=+$G(END)
"RTN","PXRMXX2",134,0)
 I BEGIN<END S TEMP=BEGIN,BEGIN=END,END=TEMP
"RTN","PXRMXX2",135,0)
 I BEGIN=+BEGIN S BEGIN=BEGIN+.24 ; if no time, get all results on start date
"RTN","PXRMXX2",136,0)
 D POVDATA(.INPUT,.ERR)
"RTN","PXRMXX2",137,0)
 S RBEGIN=9999999-BEGIN,REND=9999999-END
"RTN","PXRMXX2",138,0)
 S DFN=0 F  S DFN=$O(^AUPNVPOV("AA",DFN)) Q:DFN<1  D
"RTN","PXRMXX2",139,0)
 .I $D(^TMP(NMSPACE,$J,DFN)) Q  ; skip patients already checked in same namespace
"RTN","PXRMXX2",140,0)
 .S:$$POVCHECK(DFN,INPUT,RBEGIN,REND) ^TMP(NMSPACE,$J,"TEMP",DFN)=""
"RTN","PXRMXX2",141,0)
 K ^TMP(INPUT,$J)
"RTN","PXRMXX2",142,0)
 Q
"RTN","PXRMXX2",143,0)
 ;
"RTN","PXRMXX2",144,0)
POVDATA(INPUT,ERR) ;
"RTN","PXRMXX2",145,0)
 N NEWINPUT,POV,POVNAME,ZERO K ERR
"RTN","PXRMXX2",146,0)
 S NEWINPUT=INPUT_"ZZ"
"RTN","PXRMXX2",147,0)
 K ^TMP(NEWINPUT,$J)
"RTN","PXRMXX2",148,0)
 S POV=0 F  S POV=$O(^TMP(INPUT,$J,POV)) Q:POV<1  D
"RTN","PXRMXX2",149,0)
 .S ZERO=$G(^ICD9(POV,0)) I '$L(ZERO) Q
"RTN","PXRMXX2",150,0)
 .S ^TMP(NEWINPUT,$J,POV)=$P(ZERO,U)
"RTN","PXRMXX2",151,0)
 K ^TMP(INPUT,$J)
"RTN","PXRMXX2",152,0)
 S INPUT=NEWINPUT
"RTN","PXRMXX2",153,0)
 Q
"RTN","PXRMXX2",154,0)
 ;
"RTN","PXRMXX2",155,0)
POVCHECK(DFN,INPUT,RBEGIN,REND) ; $$ -> 1 if problem else 0
"RTN","PXRMXX2",156,0)
 N POV,OK,TIME,IEN
"RTN","PXRMXX2",157,0)
 S OK=0
"RTN","PXRMXX2",158,0)
 S TIME=RBEGIN F  S TIME=$O(^AUPNVPOV("AA",DFN,TIME)) Q:TIME>REND  Q:TIME<1  D  I OK Q
"RTN","PXRMXX2",159,0)
 .S IEN=0 F  S IEN=$O(^AUPNVPOV("AA",DFN,TIME,IEN)) Q:IEN<1  D
"RTN","PXRMXX2",160,0)
 ..S POV=+$G(^AUPNVPOV(IEN,0)) I 'POV Q
"RTN","PXRMXX2",161,0)
 ..S:$D(^TMP(INPUT,$J,POV)) OK=1
"RTN","PXRMXX2",162,0)
 Q OK
"RTN","PXRMXXT")
0^5^B1109797
"RTN","PXRMXXT",1,0)
PXRMXXT ; SLC/DLT - Formatting for extract print templates ;8/14/00 18:30
"RTN","PXRMXXT",2,0)
 ;;1.5;CLINICAL REMINDERS;**1**;June 19, 2000
"RTN","PXRMXXT",3,0)
 ;
"RTN","PXRMXXT",4,0)
 ;======================================================================
"RTN","PXRMXXT",5,0)
FORMATB ;Format body of report that prints the findings
"RTN","PXRMXXT",6,0)
 ; Variables that need to be deleted from the template logic follow
"RTN","PXRMXXT",7,0)
 ;     PXRME,PXRMB,PXRMSEX,PXRMFD
"RTN","PXRMXXT",8,0)
 D DELVAR^PXRMXXT
"RTN","PXRMXXT",9,0)
 N DFN,VADM,VA
"RTN","PXRMXXT",10,0)
 S PXRME=^PXRMXT(810.3,D0,1,D1,0)
"RTN","PXRMXXT",11,0)
 S DFN=+$P(PXRME,"^",1)
"RTN","PXRMXXT",12,0)
 D DEM^VADPT
"RTN","PXRMXXT",13,0)
 S PXRMB=$$FMTE^XLFDT(+VADM(3),"2D")
"RTN","PXRMXXT",14,0)
 I '$L(PXRMB) S PXRMB="Missing DOB"
"RTN","PXRMXXT",15,0)
 S PXRMSSN=$P(VADM(2),"^",2)
"RTN","PXRMXXT",16,0)
 S PXRMSEX=$P(VADM(5),"^",1)
"RTN","PXRMXXT",17,0)
 S PXRMFD=$$FMTE^XLFDT($P(PXRME,"^",6),"2D")
"RTN","PXRMXXT",18,0)
 S PXRMENCT=$S($P(PXRME,"^",8)="I":"Inpatient ",1:"Outpatient")
"RTN","PXRMXXT",19,0)
 Q
"RTN","PXRMXXT",20,0)
 ;
"RTN","PXRMXXT",21,0)
PDEM ;Print SSN with dashes
"RTN","PXRMXXT",22,0)
 W PXRMSSN
"RTN","PXRMXXT",23,0)
 Q
"RTN","PXRMXXT",24,0)
 ;
"RTN","PXRMXXT",25,0)
PFIND ;Print findings data from the template
"RTN","PXRMXXT",26,0)
 W " "_PXRMENCT_" "_$E(PXRMFD,1,8)
"RTN","PXRMXXT",27,0)
 Q
"RTN","PXRMXXT",28,0)
 ;
"RTN","PXRMXXT",29,0)
DELVAR ;Delete variables used in the processing
"RTN","PXRMXXT",30,0)
 K PXRME,PXRMB,PXRMSEX,PXRMFD,PXRMSSN,PXRMFD,PXRMENCT
"RTN","PXRMXXT",31,0)
 Q
"RTN","PXRMXXT",32,0)
 ;
"SEC","^DIC",810.3,810.3,0,"AUDIT")
@
"SEC","^DIC",810.3,810.3,0,"DD")
@
"SEC","^DIC",810.3,810.3,0,"DEL")
@
"SEC","^DIC",810.3,810.3,0,"LAYGO")
@
"SEC","^DIC",810.3,810.3,0,"RD")

"SEC","^DIC",810.3,810.3,0,"WR")
@
"SEC","^DIC",811.5,811.5,0,"AUDIT")
@
"SEC","^DIC",811.5,811.5,0,"DD")
@
"SEC","^DIC",811.5,811.5,0,"DEL")
@
"SEC","^DIC",811.5,811.5,0,"LAYGO")
@
"SEC","^DIC",811.5,811.5,0,"RD")

"SEC","^DIC",811.5,811.5,0,"WR")
@
"VER")
8.0^22.0
"^DD",810.3,810.3,0)
FIELD^^.001^11
"^DD",810.3,810.3,0,"DDA")
N
"^DD",810.3,810.3,0,"DT")
3000829
"^DD",810.3,810.3,0,"ID",.06)
W "   ",$$FMTE^DILIBF($P(^(0),U,6),5)
"^DD",810.3,810.3,0,"IX","B",810.3,.01)

"^DD",810.3,810.3,0,"NM","REMINDER EXTRACT SUMMARY")

"^DD",810.3,810.3,.001,0)
NUMBER^NJ7,0^^ ^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",810.3,810.3,.001,3)
Type a Number between 0 and 9999999, 0 Decimal Digits
"^DD",810.3,810.3,.001,"DT")
3000717
"^DD",810.3,810.3,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",810.3,810.3,.01,1,0)
^.1
"^DD",810.3,810.3,.01,1,1,0)
810.3^B
"^DD",810.3,810.3,.01,1,1,1)
S ^PXRMXT(810.3,"B",$E(X,1,30),DA)=""
"^DD",810.3,810.3,.01,1,1,2)
K ^PXRMXT(810.3,"B",$E(X,1,30),DA)
"^DD",810.3,810.3,.01,3)
Enter the 3-30 character name to identify the extract.
"^DD",810.3,810.3,.01,21,0)
^^10^10^3000829^
"^DD",810.3,810.3,.01,21,1,0)
The NAME is the combination of a unique abbreviation for the type of
"^DD",810.3,810.3,.01,21,2,0)
extract (e.g., LREPI), the YY/MM representing the ending year and month of
"^DD",810.3,810.3,.01,21,3,0)
the extract date range, and the run date in the format YYMMDD. The date
"^DD",810.3,810.3,.01,21,4,0)
and time of the run is an identifier.  The following is an example of
"^DD",810.3,810.3,.01,21,5,0)
lookup information. 
"^DD",810.3,810.3,.01,21,6,0)
 160          LREPI 00/05 061500     Jun 15,2000@14:52:36
"^DD",810.3,810.3,.01,21,7,0)
 161          LREPI 00/06 073100     Jul 15,2000@14:55:40
"^DD",810.3,810.3,.01,21,8,0)
 162          LREPI 00/07 081500     Aug 15,2000@15:42:24
"^DD",810.3,810.3,.01,21,9,0)
 163          LREPI 00/05 082200     Aug 22,2000@02:44:54
"^DD",810.3,810.3,.01,21,10,0)
 164          LREPI 00/08 082500     Aug 25,2000@14:24:59
"^DD",810.3,810.3,.01,"DT")
3000708
"^DD",810.3,810.3,.02,0)
BEGINNING DATE^D^^0;2^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",810.3,810.3,.02,3)
Enter the extract beginning date range.
"^DD",810.3,810.3,.02,21,0)
^.001^1^1^3000829^^
"^DD",810.3,810.3,.02,21,1,0)
This is the starting date that was used for the extract.
"^DD",810.3,810.3,.02,"DT")
3000708
"^DD",810.3,810.3,.03,0)
ENDING DATE^D^^0;3^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",810.3,810.3,.03,3)
Enter the extract ending date range.
"^DD",810.3,810.3,.03,21,0)
^^1^1^3000829^
"^DD",810.3,810.3,.03,21,1,0)
This is the ending date that was used for the extract.
"^DD",810.3,810.3,.03,"DT")
3000708
"^DD",810.3,810.3,.04,0)
TASK #^F^^0;4^K:$L(X)>10!($L(X)<3) X
"^DD",810.3,810.3,.04,3)
Enter the task number of the job creating the extract.
"^DD",810.3,810.3,.04,21,0)
^^1^1^3000829^
"^DD",810.3,810.3,.04,21,1,0)
This field identifies the task that was run to create the extract.
"^DD",810.3,810.3,.04,"DT")
3000708
"^DD",810.3,810.3,.05,0)
EXTRACT OWNER^P200'^VA(200,^0;5^Q
"^DD",810.3,810.3,.05,3)
Enter the person who ran the extract.
"^DD",810.3,810.3,.05,21,0)
^.001^1^1^3000829^^
"^DD",810.3,810.3,.05,21,1,0)
This is the person who ran the extract job. 
"^DD",810.3,810.3,.05,"DT")
3000708
"^DD",810.3,810.3,.06,0)
EXTRACT DATE^D^^0;6^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",810.3,810.3,.06,3)
Enter the date/time the extract entry was created.
"^DD",810.3,810.3,.06,21,0)
^^1^1^3000829^
"^DD",810.3,810.3,.06,21,1,0)
This is the date/time that the extract entry was added to this file.
"^DD",810.3,810.3,.06,"DT")
3000708
"^DD",810.3,810.3,.07,0)
PATIENTS EVALUATED^NJ7,0^^0;7^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",810.3,810.3,.07,3)
Enter the total count of patients with findings.
"^DD",810.3,810.3,.07,21,0)
^^2^2^3000829^
"^DD",810.3,810.3,.07,21,1,0)
This is the total number of patients who had findings for the reminder and
"^DD",810.3,810.3,.07,21,2,0)
date range criteria selected.
"^DD",810.3,810.3,.07,"DT")
3000709
"^DD",810.3,810.3,.08,0)
PATIENTS WITH FINDINGS^NJ7,0^^0;8^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",810.3,810.3,.08,3)
Enter the number of findings extracted.
"^DD",810.3,810.3,.08,21,0)
^.001^2^2^3000829^^^
"^DD",810.3,810.3,.08,21,1,0)
This is the total count of findings that met the extract criteria in the
"^DD",810.3,810.3,.08,21,2,0)
reminders and date range.
"^DD",810.3,810.3,.08,"DT")
3000709
"^DD",810.3,810.3,10,0)
EXTRACT FINDINGS^810.31P^^1;0
"^DD",810.3,810.3,10,21,0)
^^3^3^3000829^
"^DD",810.3,810.3,10,21,1,0)
This is the patient findings found during reminder extract processing for
"^DD",810.3,810.3,10,21,2,0)
the specified date range.  Entries can be selected based on the NUMBER on
"^DD",810.3,810.3,10,21,3,0)
the Extract Findings multiple or the Patient.
"^DD",810.3,810.3,20,0)
FINDING TOTALS^810.32AV^^2;0
"^DD",810.3,810.3,20,21,0)
^.001^1^1^3000728^^^
"^DD",810.3,810.3,20,21,1,0)
This is the total count for each finding item extracted.
"^DD",810.3,810.31,0)
EXTRACT FINDINGS SUB-FIELD^^.001^12
"^DD",810.3,810.31,0,"DT")
3000829
"^DD",810.3,810.31,0,"IX","B",810.31,.01)

"^DD",810.3,810.31,0,"NM","EXTRACT FINDINGS")

"^DD",810.3,810.31,0,"UP")
810.3
"^DD",810.3,810.31,.001,0)
NUMBER^NJ9,0^^ ^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",810.3,810.31,.001,3)
Type a Number between 0 and 999999999, 0 Decimal Digits
"^DD",810.3,810.31,.001,21,0)
^^2^2^3000717^
"^DD",810.3,810.31,.001,21,1,0)
This is the sequence that the entries are added to the Reminder Extract
"^DD",810.3,810.31,.001,21,2,0)
file.
"^DD",810.3,810.31,.001,"DT")
3000717
"^DD",810.3,810.31,.01,0)
PATIENT^MRP2'^DPT(^0;1^Q
"^DD",810.3,810.31,.01,1,0)
^.1
"^DD",810.3,810.31,.01,1,1,0)
810.31^B
"^DD",810.3,810.31,.01,1,1,1)
S ^PXRMXT(810.3,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",810.3,810.31,.01,1,1,2)
K ^PXRMXT(810.3,DA(1),1,"B",$E(X,1,30),DA)
"^DD",810.3,810.31,.01,3)
Enter the patient who had the finding.
"^DD",810.3,810.31,.01,21,0)
^^1^1^3000829^
"^DD",810.3,810.31,.01,21,1,0)
This is the patient who had the extract finding.
"^DD",810.3,810.31,.01,"DT")
3000717
"^DD",810.3,810.31,.03,0)
TERM^P811.5'^PXRMD(811.5,^0;3^Q
"^DD",810.3,810.31,.03,3)
Enter the term that is related to the finding.
"^DD",810.3,810.31,.03,21,0)
^.001^2^2^3000829^^
"^DD",810.3,810.31,.03,21,1,0)
This is the reminder term related to the finding.  This field will only be
"^DD",810.3,810.31,.03,21,2,0)
defined if the reminder contained a reminder term.
"^DD",810.3,810.31,.03,"DT")
3000708
"^DD",810.3,810.31,.04,0)
FINDING ITEM^V^^0;4^Q
"^DD",810.3,810.31,.04,3)

"^DD",810.3,810.31,.04,21,0)
^.001^2^2^3000829^^^^
"^DD",810.3,810.31,.04,21,1,0)
This is a variable pointer that contains the possible findings from a
"^DD",810.3,810.31,.04,21,2,0)
reminder evaluation.
"^DD",810.3,810.31,.04,"DT")
3000709
"^DD",810.3,810.31,.04,"V",0)
^.12P^16^16
"^DD",810.3,810.31,.04,"V",1,0)
50^DRUG^5^DR^^n
"^DD",810.3,810.31,.04,"V",2,0)
9999999.09^EDUCATION TOPIC^10^ED^^n
"^DD",810.3,810.31,.04,"V",3,0)
9999999.15^EXAM^15^EX^^n
"^DD",810.3,810.31,.04,"V",4,0)
9999999.64^HEALTH FACTOR^20^HF^^n
"^DD",810.3,810.31,.04,"V",5,0)
9999999.14^IMMUNIZATION^25^IM^^n
"^DD",810.3,810.31,.04,"V",6,0)
60^LABORATORY TEST^30^LT^^n
"^DD",810.3,810.31,.04,"V",7,0)
601^MENTAL HEALTH INSTRUMENT^35^MH^^n
"^DD",810.3,810.31,.04,"V",8,0)
101.43^ORDERABLE ITEM^40^OI^^n
"^DD",810.3,810.31,.04,"V",9,0)
71^RADIOLOGY PROCEDURE^45^RP^^n
"^DD",810.3,810.31,.04,"V",10,0)
811.4^REMINDER COMPUTED FINDING^50^CF^^n
"^DD",810.3,810.31,.04,"V",11,0)
811.2^REMINDER TAXONOMY^55^TX^^n
"^DD",810.3,810.31,.04,"V",12,0)
811.5^REMINDER TERM^60^RT^^n
"^DD",810.3,810.31,.04,"V",13,0)
9999999.28^SKIN TEST^65^ST^^n
"^DD",810.3,810.31,.04,"V",14,0)
50.605^VA DRUG CLASS^70^DC^^n
"^DD",810.3,810.31,.04,"V",15,0)
50.6^VA GENERIC^75^DG^^n
"^DD",810.3,810.31,.04,"V",16,0)
120.51^VITAL MEASUREMENT^80^VM^^n
"^DD",810.3,810.31,.05,0)
ALTERNATE ID^F^^0;5^K:$L(X)>30!($L(X)<1) X
"^DD",810.3,810.31,.05,3)
Enter the alternate identifier related to the reminder term.
"^DD",810.3,810.31,.05,21,0)
^^4^4^3000829^
"^DD",810.3,810.31,.05,21,1,0)
This is an alternate identifier related to the finding's reminder term.
"^DD",810.3,810.31,.05,21,2,0)
The Alternate ID is used by the national database.  For example, all
"^DD",810.3,810.31,.05,21,3,0)
findings found for reminder terms related to risk assessment will have a
"^DD",810.3,810.31,.05,21,4,0)
number from 1-7 as its identifier. 
"^DD",810.3,810.31,.05,"DT")
3000708
"^DD",810.3,810.31,.06,0)
FINDING DATE^D^^0;6^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",810.3,810.31,.06,21,0)
^^5^5^3000829^
"^DD",810.3,810.31,.06,21,1,0)
This is the date related to the finding. For PCE data, this is the date
"^DD",810.3,810.31,.06,21,2,0)
and time of the visit. For laboratory data, this is the accession date.
"^DD",810.3,810.31,.06,21,3,0)
For Outpatient Pharmacy data, this is the fill date, refill date, or
"^DD",810.3,810.31,.06,21,4,0)
partial fill date.   For Inpatient Pharmacy, this is the order date, or
"^DD",810.3,810.31,.06,21,5,0)
renewal date.
"^DD",810.3,810.31,.06,"DT")
3000708
"^DD",810.3,810.31,.07,0)
VISIT^P9000010'^AUPNVSIT(^0;7^Q
"^DD",810.3,810.31,.07,3)
Enter the visit related to the finding (optional).
"^DD",810.3,810.31,.07,21,0)
^^2^2^3000829^
"^DD",810.3,810.31,.07,21,1,0)
This is the visit date from the Visit File that is related to the finding.
"^DD",810.3,810.31,.07,21,2,0)
This is only defined when the findings are from PCE.
"^DD",810.3,810.31,.07,"DT")
3000708
"^DD",810.3,810.31,.08,0)
ENCOUNTER TYPE^S^I:INPATIENT;O:OUTPATIENT;^0;8^Q
"^DD",810.3,810.31,.08,3)
Enter I for Inpatient or O for Outpatient encounter type.
"^DD",810.3,810.31,.08,21,0)
^^5^5^3000829^
"^DD",810.3,810.31,.08,21,1,0)
This is an encounter type that summarizes the clinical activity as
"^DD",810.3,810.31,.08,21,2,0)
Inpatient or Outpatient activity.  This encounter type is based on the
"^DD",810.3,810.31,.08,21,3,0)
Emerging Pathogens Initiative (EPI) definition of encounter types. The
"^DD",810.3,810.31,.08,21,4,0)
VADPT call to determine inpatient status on a date is used to determine
"^DD",810.3,810.31,.08,21,5,0)
the Inpatient or Outpatient status.
"^DD",810.3,810.31,.08,"DT")
3000829
"^DD",810.3,810.31,1,0)
RESULT^F^^1;1^K:$L(X)>60!($L(X)<1) X
"^DD",810.3,810.31,1,3)
Enter the RESULT for the finding from reminder evaluation.
"^DD",810.3,810.31,1,21,0)
^^5^5^3000829^
"^DD",810.3,810.31,1,21,1,0)
This is the result for a finding that is returned by the reminder
"^DD",810.3,810.31,1,21,2,0)
evaluation "RESULT" node.  See Clinical Reminder documentation for
"^DD",810.3,810.31,1,21,3,0)
explanations of the RESULT for each type of finding.  The result from the
"^DD",810.3,810.31,1,21,4,0)
clinical reminder evaluation is stored as freetext in this field. No input
"^DD",810.3,810.31,1,21,5,0)
and output transforms are used on this field.
"^DD",810.3,810.31,1,"DT")
3000709
"^DD",810.3,810.31,2,0)
VALUE^F^^1;2^K:$L(X)>60!($L(X)<1) X
"^DD",810.3,810.31,2,3)
Enter the finding's VALUE from reminder evaluation.
"^DD",810.3,810.31,2,21,0)
^^4^4^3000829^
"^DD",810.3,810.31,2,21,1,0)
This is the value for a finding that is returned in the reminder
"^DD",810.3,810.31,2,21,2,0)
evaluation "VALUE" node.  See Clinical Reminder documentation for
"^DD",810.3,810.31,2,21,3,0)
explanations of the VALUE for each type of finding.  This VALUE is stored
"^DD",810.3,810.31,2,21,4,0)
as freetext.  No input and output transforms are used on this field.
"^DD",810.3,810.31,2,"DT")
3000708
"^DD",810.3,810.31,3,0)
DRUG^F^^1;3^K:$L(X)>50!($L(X)<1) X
"^DD",810.3,810.31,3,3)
Enter the local formulary drug name.
"^DD",810.3,810.31,3,21,0)
^^2^2^3000829^
"^DD",810.3,810.31,3,21,1,0)
This is the freetext name from the local formulary file for a drug
"^DD",810.3,810.31,3,21,2,0)
finding.
"^DD",810.3,810.31,3,"DT")
3000708
"^DD",810.3,810.31,4,0)
DSUP^NJ3,0^^1;4^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",810.3,810.31,4,3)
Enter the days supply for pharmacy findings.
"^DD",810.3,810.31,4,21,0)
^^5^5^3000829^
"^DD",810.3,810.31,4,21,1,0)
This is the days supply that the medication covers if the finding is an
"^DD",810.3,810.31,4,21,2,0)
outpatient medication. Inpatient pharmacy medications do not normally have
"^DD",810.3,810.31,4,21,3,0)
a days supply, but since the EPI requires a value in this field, the days
"^DD",810.3,810.31,4,21,4,0)
supply is calculated by subtracting the start date from the stop date of
"^DD",810.3,810.31,4,21,5,0)
the order.
"^DD",810.3,810.31,4,"DT")
3000708
"^DD",810.3,810.32,0)
FINDING TOTALS SUB-FIELD^^.03^3
"^DD",810.3,810.32,0,"IX","B",810.32,.01)

"^DD",810.3,810.32,0,"NM","FINDING TOTALS")

"^DD",810.3,810.32,0,"UP")
810.3
"^DD",810.3,810.32,.01,0)
FINDING ITEM^V^^0;1^Q
"^DD",810.3,810.32,.01,1,0)
^.1
"^DD",810.3,810.32,.01,1,1,0)
810.32^B
"^DD",810.3,810.32,.01,1,1,1)
S ^PXRMXT(810.3,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",810.3,810.32,.01,1,1,2)
K ^PXRMXT(810.3,DA(1),2,"B",$E(X,1,30),DA)
"^DD",810.3,810.32,.01,1,1,3)
Required Index for Variable Pointer
"^DD",810.3,810.32,.01,21,0)
^^1^1^3000709^
"^DD",810.3,810.32,.01,21,1,0)
This is the finding item returned by reminder evaluation.
"^DD",810.3,810.32,.01,"DT")
3000709
"^DD",810.3,810.32,.01,"V",0)
^.12P^16^16
"^DD",810.3,810.32,.01,"V",1,0)
50^DRUG^5^DR^^n
"^DD",810.3,810.32,.01,"V",2,0)
9999999.09^EDUCATION TOPICS^10^ED^^n
"^DD",810.3,810.32,.01,"V",3,0)
9999999.15^EXAM^15^EX^^n
"^DD",810.3,810.32,.01,"V",4,0)
9999999.64^HEALTH FACTOR^20^HF^^n
"^DD",810.3,810.32,.01,"V",5,0)
9999999.14^IMMUNIZATION^25^IM^^n
"^DD",810.3,810.32,.01,"V",6,0)
60^LABORATORY TEST^30^LT^^n
"^DD",810.3,810.32,.01,"V",7,0)
601^MENTAL HEALTH INSTRUMENT^35^MH^^n
"^DD",810.3,810.32,.01,"V",8,0)
101.43^ORDERABLE ITEM^40^OI^^n
"^DD",810.3,810.32,.01,"V",9,0)
71^RADIOLOGY PROCEDURE^45^RP^^n
"^DD",810.3,810.32,.01,"V",10,0)
811.4^REMINDER COMPUTED FINDING^50^CF^^n
"^DD",810.3,810.32,.01,"V",11,0)
811.2^REMINDER TAXONOMY^55^TX^^n
"^DD",810.3,810.32,.01,"V",12,0)
811.5^REMINDER TERM^60^RT^^n
"^DD",810.3,810.32,.01,"V",13,0)
9999999.28^SKIN TEST^65^ST^^n
"^DD",810.3,810.32,.01,"V",14,0)
50.605^VA DRUG CLASS^70^DC^^n
"^DD",810.3,810.32,.01,"V",15,0)
50.6^VA GENERIC^75^DG^^n
"^DD",810.3,810.32,.01,"V",16,0)
120.51^VITAL MEASUREMENT^80^VM^^n
"^DD",810.3,810.32,.02,0)
FINDING COUNT^NJ7,0^^0;2^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",810.3,810.32,.02,3)
Type a Number between 0 and 9999999, 0 Decimal Digits
"^DD",810.3,810.32,.02,21,0)
^^2^2^3000709^
"^DD",810.3,810.32,.02,21,1,0)
This is the count of how many times this finding item occured in the
"^DD",810.3,810.32,.02,21,2,0)
extract.
"^DD",810.3,810.32,.02,"DT")
3000709
"^DD",810.3,810.32,.03,0)
UNIQUE PATIENT COUNT^NJ7,0^^0;3^K:+X'=X!(X>9999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",810.3,810.32,.03,3)
Type a Number between 0 and 9999999, 0 Decimal Digits
"^DD",810.3,810.32,.03,21,0)
^^3^3^3000801^
"^DD",810.3,810.32,.03,21,1,0)
This is the count of patients with unique findings in the extract.
"^DD",810.3,810.32,.03,21,2,0)
An example of duplicate findings for a patient is multiple fills for a
"^DD",810.3,810.32,.03,21,3,0)
particular medication.
"^DD",810.3,810.32,.03,"DT")
3000801
"^DD",811.5,811.5,0)
FIELD^^20^7
"^DD",811.5,811.5,0,"DDA")
N
"^DD",811.5,811.5,0,"DT")
3000609
"^DD",811.5,811.5,0,"ID",.02)
W ?40,@("$P($P($C(59)_$S($D(^DD(811.5,.02,0)):$P(^(0),U,3),1:0)_$E("_DIC_"Y,0),0),$C(59)_$P(^(0),U,2)_"":"",2),$C(59),1)")
"^DD",811.5,811.5,0,"NM","REMINDER TERM")

"^DD",811.5,811.5,0,"PT",810.31,.03)

"^DD",811.5,811.5,0,"PT",810.31,.04)

"^DD",811.5,811.5,0,"PT",810.32,.01)

"^DD",811.5,811.5,0,"PT",811.902,.01)

"^DD",811.5,811.5,0,"VRPK")
CLINICAL REMINDERS
"^DD",811.5,811.5,.01,0)
NAME^RF^^0;1^K:$L(X)>64!($L(X)<3)!'(X'?1P.E) X
"^DD",811.5,811.5,.01,1,0)
^.1^^0
"^DD",811.5,811.5,.01,3)
Enter the name of the term, up to 64 characters.
"^DD",811.5,811.5,.01,21,0)
^^1^1^3000505^
"^DD",811.5,811.5,.01,21,1,0)
This is the name of the term.
"^DD",811.5,811.5,.01,"DT")
3000601
"^DD",811.5,811.5,.02,0)
TERM TYPE^RS^N:NATIONAL;V:VISN;L:LOCAL;^0;2^Q
"^DD",811.5,811.5,.02,3)
Enter the term type.
"^DD",811.5,811.5,.02,21,0)
^.001^1^1^3000509^^^
"^DD",811.5,811.5,.02,21,1,0)
This is the term type.
"^DD",811.5,811.5,.02,"DT")
3000601
"^DD",811.5,811.5,.03,0)
SPONSOR^P811.6^PXRMD(811.6,^0;3^Q
"^DD",811.5,811.5,.03,3)
Enter the sponsor of this term.
"^DD",811.5,811.5,.03,21,0)
^.001^2^2^3000505^^^^
"^DD",811.5,811.5,.03,21,1,0)
This field identifies the sponsor of the reminder term. For nationally
"^DD",811.5,811.5,.03,21,2,0)
distributed reminders, this will be a nationally distributing sponsor.
"^DD",811.5,811.5,.03,"DT")
3000307
"^DD",811.5,811.5,.04,0)
DATE CREATED^RD^^0;4^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",811.5,811.5,.04,21,0)
^.001^1^1^3000508^^
"^DD",811.5,811.5,.04,21,1,0)
This is the date when the term was created.
"^DD",811.5,811.5,.04,"DT")
3000505
"^DD",811.5,811.5,.05,0)
DATE LAST MODIFIED^D^^0;5^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",811.5,811.5,.05,21,0)
^^1^1^3000505^
"^DD",811.5,811.5,.05,21,1,0)
This is the date the term was last modified.
"^DD",811.5,811.5,.05,"DT")
3000505
"^DD",811.5,811.5,1,0)
DESCRIPTION^811.51^^1;0
"^DD",811.5,811.5,1,21,0)
^^1^1^3000505^
"^DD",811.5,811.5,1,21,1,0)
This is a description of the term.
"^DD",811.5,811.5,20,0)
FINDINGS^811.52V^^20;0
"^DD",811.5,811.5,20,21,0)
^.001^4^4^3000609^^^^
"^DD",811.5,811.5,20,21,1,0)
This multiple identifies which finding items have been selected to
"^DD",811.5,811.5,20,21,2,0)
represent the term. If there is more than one finding item they will
"^DD",811.5,811.5,20,21,3,0)
all be evaluated and the most recent TRUE finding will represent the
"^DD",811.5,811.5,20,21,4,0)
term.
"^DD",811.5,811.5,20,"DT")
2990914
"^DD",811.5,811.51,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",811.5,811.51,0,"DT")
2990512
"^DD",811.5,811.51,0,"NM","DESCRIPTION")

"^DD",811.5,811.51,0,"UP")
811.5
"^DD",811.5,811.51,.01,0)
DESCRIPTION^W^^0;1^Q
"^DD",811.5,811.51,.01,3)
Enter the description of the term.
"^DD",811.5,811.51,.01,"DT")
2990512
"^DD",811.5,811.52,0)
FINDINGS SUB-FIELD^^13^6
"^DD",811.5,811.52,0,"DT")
3000609
"^DD",811.5,811.52,0,"IX","B",811.52,.01)

"^DD",811.5,811.52,0,"IX","E",811.52,.01)

"^DD",811.5,811.52,0,"NM","FINDINGS")

"^DD",811.5,811.52,0,"UP")
811.5
"^DD",811.5,811.52,.01,0)
FINDING ITEM^MVX^^0;1^K:'$$VFINDING^PXRMINTR(X) X
"^DD",811.5,811.52,.01,1,0)
^.1
"^DD",811.5,811.52,.01,1,1,0)
811.52^B
"^DD",811.5,811.52,.01,1,1,1)
S ^PXRMD(811.5,DA(1),20,"B",$E(X,1,30),DA)=""
"^DD",811.5,811.52,.01,1,1,2)
K ^PXRMD(811.5,DA(1),20,"B",$E(X,1,30),DA)
"^DD",811.5,811.52,.01,1,1,3)
Required Index for Variable Pointer
"^DD",811.5,811.52,.01,1,2,0)
811.52^E^MUMPS
"^DD",811.5,811.52,.01,1,2,1)
S ^PXRMD(811.5,DA(1),20,"E",$P(X,";",2),$P(X,";",1),DA)=""
"^DD",811.5,811.52,.01,1,2,2)
K ^PXRMD(811.5,DA(1),20,"E",$P(X,";",2),$P(X,";",1),DA)
"^DD",811.5,811.52,.01,1,2,"%D",0)
^^1^1^2990913^
"^DD",811.5,811.52,.01,1,2,"%D",1,0)
This cross-reference is used to group findings by type.
"^DD",811.5,811.52,.01,1,2,"DT")
2990913
"^DD",811.5,811.52,.01,3)
Enter a new finding item
"^DD",811.5,811.52,.01,"DT")
3000421
"^DD",811.5,811.52,.01,"V",0)
^.12P^15^15
"^DD",811.5,811.52,.01,"V",1,0)
50^DRUG^5^DR^n^n
"^DD",811.5,811.52,.01,"V",2,0)
9999999.09^EDUCATION TOPIC^10^ED^n^n
"^DD",811.5,811.52,.01,"V",3,0)
9999999.15^EXAM^15^EX^n^n
"^DD",811.5,811.52,.01,"V",4,0)
9999999.64^HEALTH FACTOR^20^HF^n^n
"^DD",811.5,811.52,.01,"V",5,0)
9999999.14^IMMUNIZATION^25^IM^n^n
"^DD",811.5,811.52,.01,"V",6,0)
60^LABORATORY TEST^30^LT^n^n
"^DD",811.5,811.52,.01,"V",7,0)
601^MENTAL HEALTH INSTRUMENT^35^MH^n^n
"^DD",811.5,811.52,.01,"V",8,0)
101.43^ORDERABLE ITEM^40^OI^n^n
"^DD",811.5,811.52,.01,"V",9,0)
71^RADIOLOGY PROCEDURE^45^RP^n^n
"^DD",811.5,811.52,.01,"V",10,0)
811.4^REMINDER COMPUTED FINDING^50^CF^n^n
"^DD",811.5,811.52,.01,"V",11,0)
811.2^REMINDER TAXONOMY^55^TX^n^n
"^DD",811.5,811.52,.01,"V",12,0)
9999999.28^SKIN TEST^65^ST^n^n
"^DD",811.5,811.52,.01,"V",13,0)
50.605^VA DRUG CLASS^70^DC^n^n
"^DD",811.5,811.52,.01,"V",14,0)
50.6^VA GENERIC^75^DG^n^n
"^DD",811.5,811.52,.01,"V",15,0)
120.51^VITAL MEASUREMENT^80^VM^n^n
"^DD",811.5,811.52,9,0)
EFFECTIVE PERIOD^FX^^0;8^K:'$$VTPER^PXRMINTR(.X) X
"^DD",811.5,811.52,9,3)
Enter a number followed by D, M, or Y for day, month, or year.
"^DD",811.5,811.52,9,21,0)
^^6^6^3000505^
"^DD",811.5,811.52,9,21,1,0)
This is the amount of time the finding will remain valid. For example,
"^DD",811.5,811.52,9,21,2,0)
if the EFFECTIVE PERIOD is 1Y and the date of the finding is less than
"^DD",811.5,811.52,9,21,3,0)
one year ago the finding will be true. If the date is more than a year
"^DD",811.5,811.52,9,21,4,0)
ago the finding will have expired and be false. If this field is left
"^DD",811.5,811.52,9,21,5,0)
empty then the finding never expires.
"^DD",811.5,811.52,9,21,6,0)

"^DD",811.5,811.52,9,"DT")
3000427
"^DD",811.5,811.52,10,0)
USE INACTIVE PROBLEMS^S^1:YES;0:NO;^0;9^Q
"^DD",811.5,811.52,10,3)
Enter a 1 or YES if you want inactive problems used.
"^DD",811.5,811.52,10,21,0)
^^5^5^3000505^
"^DD",811.5,811.52,10,21,1,0)
Normally only active problems from the Problem List will be used in the
"^DD",811.5,811.52,10,21,2,0)
reminder evaluation. If USE INACTIVE PROBLEMS is set to YES then both
"^DD",811.5,811.52,10,21,3,0)
active and inactive problems will be used. Note that this field applies
"^DD",811.5,811.52,10,21,4,0)
only to taxonomy findings.
"^DD",811.5,811.52,10,21,5,0)

"^DD",811.5,811.52,10,"DT")
3000314
"^DD",811.5,811.52,11,0)
WITHIN CATEGORY RANK^NJ3,0^^0;10^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",811.5,811.52,11,3)
Type a number between 0 and 999, 0 decimal digits.
"^DD",811.5,811.52,11,21,0)
^.001^17^17^3000508^^^^
"^DD",811.5,811.52,11,21,1,0)
This field applies only to health factors. In order to understand how
"^DD",811.5,811.52,11,21,2,0)
it works, you need to understand how health factors work in the
"^DD",811.5,811.52,11,21,3,0)
reminder evaluation process. If you are not clear about this, see the
"^DD",811.5,811.52,11,21,4,0)
health factor section of the Clinical Reminders Manager Manual.
"^DD",811.5,811.52,11,21,5,0)

"^DD",811.5,811.52,11,21,6,0)
The default behavior is to use only the most recent health factor
"^DD",811.5,811.52,11,21,7,0)
within a category. A problem can arise if there are two or more health
"^DD",811.5,811.52,11,21,8,0)
factors within a category and they both have the same date. (This can
"^DD",811.5,811.52,11,21,9,0)
happen if both health factors are given during the same encounter). 
"^DD",811.5,811.52,11,21,10,0)
When the dates are the same, the health factor with the highest WITHIN
"^DD",811.5,811.52,11,21,11,0)
CATEGORY RANK will be used. This is a numerical value like RANK
"^DD",811.5,811.52,11,21,12,0)
FREQUENCY with 1 being the highest rank.
"^DD",811.5,811.52,11,21,13,0)

"^DD",811.5,811.52,11,21,14,0)
If WITHIN CATEGORY RANK has the special value of 0 then the
"^DD",811.5,811.52,11,21,15,0)
categorization of health factors will be ignored and the health factor
"^DD",811.5,811.52,11,21,16,0)
will be treated as a distinct finding.
"^DD",811.5,811.52,11,21,17,0)

"^DD",811.5,811.52,11,"DT")
3000505
"^DD",811.5,811.52,12,0)
CONDITION^FXO^^0;11^K:($L(X)>52)!($L(X)<3) X D VCOND^PXRMINTR(.X)
"^DD",811.5,811.52,12,2)
S Y(0)=Y S Y=$TR(Y,"~"," ")
"^DD",811.5,811.52,12,2.1)
S Y=$TR(Y,"~"," ")
"^DD",811.5,811.52,12,3)
Answer must be 3-52 characters in length.
"^DD",811.5,811.52,12,21,0)
^.001^48^48^3000609^^^
"^DD",811.5,811.52,12,21,1,0)
The CONDITION must be written in M code based on the value returned from
"^DD",811.5,811.52,12,21,2,0)
the patient results for the finding. Each type of finding has a specific
"^DD",811.5,811.52,12,21,3,0)
field that provides the value available to use in the CONDITION logic.
"^DD",811.5,811.52,12,21,4,0)
If the finding value is text, enclose the condition value in quotes 
"^DD",811.5,811.52,12,21,5,0)
(e.g., "positive"). If the finding value is numeric, do not use quotes
"^DD",811.5,811.52,12,21,6,0)
(e.g., 3).
"^DD",811.5,811.52,12,21,7,0)
 
"^DD",811.5,811.52,12,21,8,0)
An IF statement is used to evaluate the value.  The value is always
"^DD",811.5,811.52,12,21,9,0)
identified as V in the statement regardless of the type of finding. If 
"^DD",811.5,811.52,12,21,10,0)
the condition logic statement evaluates to true, the finding is 
"^DD",811.5,811.52,12,21,11,0)
considered as found (true), otherwise the finding is considered as not
"^DD",811.5,811.52,12,21,12,0)
found (false).
"^DD",811.5,811.52,12,21,13,0)
 
"^DD",811.5,811.52,12,21,14,0)
Relational operators that may be used include: = equals, < less than, >
"^DD",811.5,811.52,12,21,15,0)
greater than, [ contains, ] follows and ? pattern matches. Logical
"^DD",811.5,811.52,12,21,16,0)
operators may be used to check multiple values: & And, ! Or, ' Not. 
"^DD",811.5,811.52,12,21,17,0)
 
"^DD",811.5,811.52,12,21,18,0)
Typical examples of M code are as follows:
"^DD",811.5,811.52,12,21,19,0)
    I V=3 for Education Topic's Level of Understanding = 3
"^DD",811.5,811.52,12,21,20,0)
    I V="H" for Health Factor's Level/Severity="H"
"^DD",811.5,811.52,12,21,21,0)
    I ($P(V,"/",1)>140)&($P(V,"/",2)>90) for elevated blood pressure
"^DD",811.5,811.52,12,21,22,0)
    I ($P(V,"/",1)>140)!($P(V,"/",2)>90) for elevated blood pressure
"^DD",811.5,811.52,12,21,23,0)
    systolic or diastolic values.
"^DD",811.5,811.52,12,21,24,0)
    I V["BLACK" for Race description which includes black.         
"^DD",811.5,811.52,12,21,25,0)
 
"^DD",811.5,811.52,12,21,26,0)
Below is a brief summary for each finding type, the related field to use
"^DD",811.5,811.52,12,21,27,0)
for the value and examples:
"^DD",811.5,811.52,12,21,28,0)
 
"^DD",811.5,811.52,12,21,29,0)
Finding type                Field Value Used        Example M Code
"^DD",811.5,811.52,12,21,30,0)
 
"^DD",811.5,811.52,12,21,31,0)
 Drug                       None
"^DD",811.5,811.52,12,21,32,0)
 Education Topic            Level of understanding  I V=3
"^DD",811.5,811.52,12,21,33,0)
 Exam                       Result                  I V="N"
"^DD",811.5,811.52,12,21,34,0)
 Health Factor              Level/severity          I V="H"
"^DD",811.5,811.52,12,21,35,0)
 Immunization               Series                  I V="P"
"^DD",811.5,811.52,12,21,36,0)
 Laboratory Test            Result Value            I V>130
"^DD",811.5,811.52,12,21,37,0)
 Mental Health Instrument   Raw score               I V=1
"^DD",811.5,811.52,12,21,38,0)
 Orderable Item             Status                  I V="complete"
"^DD",811.5,811.52,12,21,39,0)
 Radiology Procedure        None
"^DD",811.5,811.52,12,21,40,0)
 Reminder Computed Finding  Determined by programmer-See Manager Manual
"^DD",811.5,811.52,12,21,41,0)
 Reminder Taxonomy          None
"^DD",811.5,811.52,12,21,42,0)
 Skin Test                  Result                  I V="N"
"^DD",811.5,811.52,12,21,43,0)
 VA Drug Class              None
"^DD",811.5,811.52,12,21,44,0)
 VA Generic                 None
"^DD",811.5,811.52,12,21,45,0)
 Vital Measurement          Rate                    I V>27
"^DD",811.5,811.52,12,21,46,0)
 
"^DD",811.5,811.52,12,21,47,0)
For details about allowed CONDITIONS for each finding type see the
"^DD",811.5,811.52,12,21,48,0)
Clinical Reminders Manager Manual.
"^DD",811.5,811.52,12,"DT")
3000609
"^DD",811.5,811.52,13,0)
MH SCALE^FX^^0;12^K:$L(X)>79!($L(X)<1) X D VSCALET^PXRMMH
"^DD",811.5,811.52,13,3)
Enter the scale number or scale name.
"^DD",811.5,811.52,13,4)
D SCHELPT^PXRMMH
"^DD",811.5,811.52,13,21,0)
^^3^3^3000505^
"^DD",811.5,811.52,13,21,1,0)
This applies only to Mental Health Instrument findings. It specifies
"^DD",811.5,811.52,13,21,2,0)
which scale to use when scoring the test.
"^DD",811.5,811.52,13,21,3,0)

"^DD",811.5,811.52,13,"DT")
3000321
"^DD",811.9,811.9,0)
FIELD^^.01^31
"^DD",811.9,811.9,0,"DDA")
N
"^DD",811.9,811.9,0,"DT")
3000712
"^DD",811.9,811.9,0,"IX","AD",811.9,.01)

"^DD",811.9,811.9,0,"IX","AG",811.9,51)

"^DD",811.9,811.9,0,"IX","E",811.902,.01)

"^DD",811.9,811.9,0,"NM","REMINDER DEFINITION")

"^DD",811.9,811.9,0,"PT",142.14,.01)

"^DD",811.9,811.9,0,"PT",801.41,2)

"^DD",811.9,811.9,0,"PT",810.12,.01)

"^DD",811.9,811.9,0,"PT",811.72,.01)

"^DD",811.9,811.9,0,"PT",811.9,1.4)

"^DD",811.9,811.9,0,"VRPK")
CLINICAL REMINDERS
"^DD",811.9,811.9,.01,0)
NAME^RFX^^0;1^K:$L(X)>35!($L(X)<3)!'(X'?1P.E)!('$$VNAME^PXRMINTR(X,811.9)) X
"^DD",811.9,811.9,.01,1,0)
^.1^^-1
"^DD",811.9,811.9,.01,1,2,0)
811.9^AD^MUMPS
"^DD",811.9,811.9,.01,1,2,1)
Q
"^DD",811.9,811.9,.01,1,2,2)
D DELEXTL^PXRMBXTL(DA)
"^DD",811.9,811.9,.01,1,2,"DT")
2980619
"^DD",811.9,811.9,.01,3)
Enter the name of the clinical reminder.
"^DD",811.9,811.9,.01,21,0)
^.001^8^8^3000505^^^^
"^DD",811.9,811.9,.01,21,1,0)
This field is the name of a clinical reminder definition. Nationally
"^DD",811.9,811.9,.01,21,2,0)
distributed reminder definition names are prefixed with "VA-". The VA-
"^DD",811.9,811.9,.01,21,3,0)
prefixed reminder definitions cannot be altered by a site, but may be
"^DD",811.9,811.9,.01,21,4,0)
inactivated so they will not be selectable.
"^DD",811.9,811.9,.01,21,5,0)
 
"^DD",811.9,811.9,.01,21,6,0)
Local modifications can be made to any "VA-" reminder definition by
"^DD",811.9,811.9,.01,21,7,0)
copying the definition to a new one with a unique name and then making
"^DD",811.9,811.9,.01,21,8,0)
modifications to the new definition which meet local criteria.
"^DD",811.9,811.9,.01,23,0)
^.001^6^6^3000505^^^^
"^DD",811.9,811.9,.01,23,1,0)
Reminders created by a site are stored at internal entry numbers
"^DD",811.9,811.9,.01,23,2,0)
consisting of the primary facilities institution number concatenated
"^DD",811.9,811.9,.01,23,3,0)
with an incremented unique number beginning with "000".  
"^DD",811.9,811.9,.01,23,4,0)
 
"^DD",811.9,811.9,.01,23,5,0)
Any entries in the file preceding 100000 will not be alterable by a
"^DD",811.9,811.9,.01,23,6,0)
site. These are the nationally distributed reminders.
"^DD",811.9,811.9,.01,"DT")
3000601
"^DD",811.9,811.9,1.2,0)
PRINT NAME^F^^0;3^K:$L(X)>35!($L(X)<3) X
"^DD",811.9,811.9,1.2,1,0)
^.1^^0
"^DD",811.9,811.9,1.2,3)
Enter the print name.
"^DD",811.9,811.9,1.2,21,0)
^^2^2^3000426^
"^DD",811.9,811.9,1.2,21,1,0)
This is the name that is used when the results of a reminder evaluation
"^DD",811.9,811.9,1.2,21,2,0)
are displayed.
"^DD",811.9,811.9,1.2,"DT")
3000216
"^DD",811.9,811.9,1.3,0)
DO IN ADVANCE TIME FRAME^FX^^0;4^K:'$$VTPER^PXRMINTR(.X) X
"^DD",811.9,811.9,1.3,3)
Enter time period to mark the reminder due in advance (e.g., 6M,1Y).
"^DD",811.9,811.9,1.3,21,0)
^.001^6^6^3000503^^
"^DD",811.9,811.9,1.3,21,1,0)
This field is used to let a reminder become due earlier than the date
"^DD",811.9,811.9,1.3,21,2,0)
determined by adding the frequency to the date when the reminder was
"^DD",811.9,811.9,1.3,21,3,0)
last resolved. For example, if the frequency is 1Y (one year) and the
"^DD",811.9,811.9,1.3,21,4,0)
DO IN ADVANCE TIME FRAME is 1M (one month) the reminder would have a
"^DD",811.9,811.9,1.3,21,5,0)
status of "DUE SOON" 11 months after it was last resolved. After one
"^DD",811.9,811.9,1.3,21,6,0)
year has passed the STATUS would be "DUE."
"^DD",811.9,811.9,1.3,"DT")
3000427
"^DD",811.9,811.9,1.4,0)
RELATED REMINDER GUIDELINE^*P811.9^PXD(811.9,^0;5^S DIC("S")="I $E($P(^(0),U,1),1,4)=""VA-*""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",811.9,811.9,1.4,3)
Enter the related national standard reminder if this reminder replaces the standard.
"^DD",811.9,811.9,1.4,12)
Look-up on National standard reminders for Congressional reporting
"^DD",811.9,811.9,1.4,12.1)
S DIC("S")="I $E($P(^(0),U,1),1,4)=""VA-*"""
"^DD",811.9,811.9,1.4,21,0)
^.001^8^8^3000503^^^^
"^DD",811.9,811.9,1.4,21,1,0)
If this local reminder replaces an NCHP related reminder, then identify
"^DD",811.9,811.9,1.4,21,2,0)
the related NCHP reminder here.
"^DD",811.9,811.9,1.4,21,3,0)
 
"^DD",811.9,811.9,1.4,21,4,0)
The National Center for Health Promotion (NCHP) has identified reminders
"^DD",811.9,811.9,1.4,21,5,0)
which must be tracked at local facilities and reported on to Congress. The
"^DD",811.9,811.9,1.4,21,6,0)
reminders that address the NCHP reminders are prefixed with "VA-*".  These
"^DD",811.9,811.9,1.4,21,7,0)
reminders may be used in the Health Summary Components, or replaced by a
"^DD",811.9,811.9,1.4,21,8,0)
local reminder that also satisfies the NCHP guideline. 
"^DD",811.9,811.9,1.4,"DT")
2970509
"^DD",811.9,811.9,1.6,0)
INACTIVE FLAG^SX^1:INACTIVE;^0;6^Q
"^DD",811.9,811.9,1.6,1,0)
^.1
"^DD",811.9,811.9,1.6,1,1,0)
^^TRIGGER^811.9^1.7
"^DD",811.9,811.9,1.6,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^PXD(811.9,D0,0)):^(0),1:"") S X=$P(Y(1),U,7),X=X S DIU=X K Y X ^DD(811.9,1.6,1,1,1.1) X ^DD(811.9,1.6,1,1,1.4)
"^DD",811.9,811.9,1.6,1,1,1.1)
S X=DIV S %=$P($H,",",2),X=DT_(%\60#60/100+(%\3600)+(%#60/10000)/100)
"^DD",811.9,811.9,1.6,1,1,1.4)
S DIH=$S($D(^PXD(811.9,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,7)=DIV,DIH=811.9,DIG=1.7 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",811.9,811.9,1.6,1,1,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^PXD(811.9,D0,0)):^(0),1:"") S X=$P(Y(1),U,7),X=X S DIU=X K Y X ^DD(811.9,1.6,1,1,2.1) X ^DD(811.9,1.6,1,1,2.4)
"^DD",811.9,811.9,1.6,1,1,2.1)
S X=DIV S %=$P($H,",",2),X=DT_(%\60#60/100+(%\3600)+(%#60/10000)/100)
"^DD",811.9,811.9,1.6,1,1,2.4)
S DIH=$S($D(^PXD(811.9,DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,7)=DIV,DIH=811.9,DIG=1.7 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",811.9,811.9,1.6,1,1,"CREATE VALUE")
NOW
"^DD",811.9,811.9,1.6,1,1,"DELETE VALUE")
NOW
"^DD",811.9,811.9,1.6,1,1,"DT")
2971008
"^DD",811.9,811.9,1.6,1,1,"FIELD")
INACTIVE DATE
"^DD",811.9,811.9,1.6,3)
Enter "1" to inactivate the reminder.
"^DD",811.9,811.9,1.6,21,0)
^.001^6^6^3000503^^^^
"^DD",811.9,811.9,1.6,21,1,0)
Reminders that are inactive will not be evaluated. The Clinical
"^DD",811.9,811.9,1.6,21,2,0)
Maintenance component will return a message stating the reminder is
"^DD",811.9,811.9,1.6,21,3,0)
inactive and the date when it was made inactive.
"^DD",811.9,811.9,1.6,21,4,0)

"^DD",811.9,811.9,1.6,21,5,0)
Other applications that use reminders may use this flag to determine if
"^DD",811.9,811.9,1.6,21,6,0)
a reminder can be selected for inclusion.
"^DD",811.9,811.9,1.6,23,0)
^^7^7^3000503^
"^DD",811.9,811.9,1.6,23,1,0)
When a reminder is inactive the following will occur:
"^DD",811.9,811.9,1.6,23,2,0)
1. It cannot be selected for inclusion on a Health Summary. (Other
"^DD",811.9,811.9,1.6,23,3,0)
packages that use Reminders should follow this rule.)
"^DD",811.9,811.9,1.6,23,4,0)
2. In the Clinical Maintenance mode a message will be returned stating the
"^DD",811.9,811.9,1.6,23,5,0)
reminder is inactive along with the date and time when it was made
"^DD",811.9,811.9,1.6,23,6,0)
inactive.
"^DD",811.9,811.9,1.6,23,7,0)
3. In any other mode nothing will be returned.
"^DD",811.9,811.9,1.6,"DT")
2971008
"^DD",811.9,811.9,1.7,0)
INACTIVE CHANGE DATE^DX^^0;7^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",811.9,811.9,1.7,5,1,0)
811.9^1.6^1
"^DD",811.9,811.9,1.7,9)
^
"^DD",811.9,811.9,1.7,21,0)
^.001^2^2^3000428^^
"^DD",811.9,811.9,1.7,21,1,0)
This is the date and time when the INACTIVE FLAG was last changed. It
"^DD",811.9,811.9,1.7,21,2,0)
is set automatically. Users should never edit this field.
"^DD",811.9,811.9,1.7,23,0)
^.001^1^1^3000428^^
"^DD",811.9,811.9,1.7,23,1,0)
This field is set by a trigger on INACTIVE FLAG.
"^DD",811.9,811.9,1.7,"DT")
2971008
"^DD",811.9,811.9,1.8,0)
IGNORE ON N/A^FX^^0;8^S X=$$UP^XLFSTR(X) K:'$$VIGNAC^PXRMINTR(X) X
"^DD",811.9,811.9,1.8,3)
Input a string of N/A code(s)
"^DD",811.9,811.9,1.8,21,0)
^.001^10^10^3000428^^^^
"^DD",811.9,811.9,1.8,21,1,0)
This field allows the user to stop reminders from being printed in the
"^DD",811.9,811.9,1.8,21,2,0)
Clinical Maintenance component if the reminder is N/A. This is free
"^DD",811.9,811.9,1.8,21,3,0)
text field that can contain any combination of the following codes:
"^DD",811.9,811.9,1.8,21,4,0)
 
"^DD",811.9,811.9,1.8,21,5,0)
Code  Description
"^DD",811.9,811.9,1.8,21,6,0)
 A    N/A due to not meeting age criteria.
"^DD",811.9,811.9,1.8,21,7,0)
 I    N/A due to inactive reminder.
"^DD",811.9,811.9,1.8,21,8,0)
 R    N/A due to the wrong race.
"^DD",811.9,811.9,1.8,21,9,0)
 S    N/A due to the wrong sex.
"^DD",811.9,811.9,1.8,21,10,0)
 *    N/A for any reason.
"^DD",811.9,811.9,1.8,"DT")
2991103
"^DD",811.9,811.9,1.9,0)
SEX SPECIFIC^S^F:FEMALE;M:MALE;^0;9^Q
"^DD",811.9,811.9,1.9,3)
Enter M or F if this reminder is sex specific.
"^DD",811.9,811.9,1.9,21,0)
^.001^5^5^3000428^^^^
"^DD",811.9,811.9,1.9,21,1,0)
This field is used to make a reminder sex specific. If an "F" is
"^DD",811.9,811.9,1.9,21,2,0)
entered the reminder applies only to females. If an "M" is entered the
"^DD",811.9,811.9,1.9,21,3,0)
reminder applies only to males. If it is left blank then the reminder
"^DD",811.9,811.9,1.9,21,4,0)
is applicable to either sex.
"^DD",811.9,811.9,1.9,21,5,0)

"^DD",811.9,811.9,1.9,"DT")
2951109
"^DD",811.9,811.9,1.91,0)
PRIORITY^S^1:HIGH;2:MEDIUM;3:LOW;^0;10^Q
"^DD",811.9,811.9,1.91,3)
Enter the reminder priority.
"^DD",811.9,811.9,1.91,21,0)
^.001^1^1^3000428^^^^
"^DD",811.9,811.9,1.91,21,1,0)
The reminder priority is used by the CPRS GUI for sorting purposes.
"^DD",811.9,811.9,1.91,"DT")
2990716
"^DD",811.9,811.9,2,0)
REMINDER DESCRIPTION^811.92^^1;0
"^DD",811.9,811.9,2,21,0)
^.001^1^1^3000428^^^^
"^DD",811.9,811.9,2,21,1,0)
This field contains a clinical description of the clinical reminder.
"^DD",811.9,811.9,2,"DT")
2960131
"^DD",811.9,811.9,3,0)
TECHNICAL DESCRIPTION^811.93^^2;0
"^DD",811.9,811.9,3,21,0)
^.001^2^2^3000428^^^^
"^DD",811.9,811.9,3,21,1,0)
The technical description describes how a reminder is supposed to work and
"^DD",811.9,811.9,3,21,2,0)
why the definition is set up the way it is.
"^DD",811.9,811.9,3,"DT")
2960131
"^DD",811.9,811.9,7,0)
BASELINE AGE FINDINGS^811.97^^7;0
"^DD",811.9,811.9,7,21,0)
^.001^2^2^3000503^^^^
"^DD",811.9,811.9,7,21,1,0)
This allows the user to define reminder frequencies for age ranges. An
"^DD",811.9,811.9,7,21,2,0)
age range is defined by a minimum and maximum age (in years).
"^DD",811.9,811.9,7,"DT")
2970711
"^DD",811.9,811.9,20,0)
FINDINGS^811.902V^^20;0
"^DD",811.9,811.9,20,21,0)
^.001^17^17^3000821^^^^
"^DD",811.9,811.9,20,21,1,0)
This multiple identifies which finding items to use when evaluating the
"^DD",811.9,811.9,20,21,2,0)
reminder. Finding items may be categorized into 3 types of findings
"^DD",811.9,811.9,20,21,3,0)
(patient cohort, resolution, or informational). How patient findings will
"^DD",811.9,811.9,20,21,4,0)
be used depends on the additional fields defined, or not defined, for the
"^DD",811.9,811.9,20,21,5,0)
finding items:
"^DD",811.9,811.9,20,21,6,0)
 
"^DD",811.9,811.9,20,21,7,0)
1. To define a finding item to use in the patient cohort logic, add
"^DD",811.9,811.9,20,21,8,0)
the finding item and define its USE IN PATIENT COHORT LOGIC field.
"^DD",811.9,811.9,20,21,9,0)
 
"^DD",811.9,811.9,20,21,10,0)
2. To define a finding item to use in the resolution logic, add the
"^DD",811.9,811.9,20,21,11,0)
finding item and define its USE IN RESOLUTION LOGIC field.
"^DD",811.9,811.9,20,21,12,0)
 
"^DD",811.9,811.9,20,21,13,0)
3. To define a finding item to use for information only, leave the USE IN
"^DD",811.9,811.9,20,21,14,0)
PATIENT COHORT LOGIC and USE IN RESOLUTION LOGIC fields blank.
"^DD",811.9,811.9,20,21,15,0)
 
"^DD",811.9,811.9,20,21,16,0)
Any type of finding above can be used to override the baseline frequency
"^DD",811.9,811.9,20,21,17,0)
age range set.
"^DD",811.9,811.9,20,"DT")
2990702
"^DD",811.9,811.9,30,0)
CUSTOMIZED COHORT LOGIC^FX^^30;1^K:'$$VALID^PXRMLOG(X,3,245) X
"^DD",811.9,811.9,30,.1)
CUSTOMIZED PATIENT COHORT LOGIC (OPTIONAL)
"^DD",811.9,811.9,30,1,0)
^.1^^0
"^DD",811.9,811.9,30,3)
Enter a Boolean string from 3-245 characters that uses findings to define the patient cohort.
"^DD",811.9,811.9,30,21,0)
^^12^12^3000505^
"^DD",811.9,811.9,30,21,1,0)
This field may be optionally used to define a customized Boolean logic
"^DD",811.9,811.9,30,21,2,0)
string that defines what and how findings in a reminder should be used to
"^DD",811.9,811.9,30,21,3,0)
determine if the reminder applies to the patient. The INTERNAL PATIENT
"^DD",811.9,811.9,30,21,4,0)
COHORT LOGIC field is automatically defined for you based on the USE IN
"^DD",811.9,811.9,30,21,5,0)
PATIENT COHORT LOGIC fields on findings. The customized logic is used when
"^DD",811.9,811.9,30,21,6,0)
the USE IN PATIENT COHORT LOGIC fields associated with each finding do not
"^DD",811.9,811.9,30,21,7,0)
provide the ability to create the required logic string. (e.g., grouping
"^DD",811.9,811.9,30,21,8,0)
various findings within parenthesis)
"^DD",811.9,811.9,30,21,9,0)
 
"^DD",811.9,811.9,30,21,10,0)
Tip:  Before defining the Boolean string, review the default logic
"^DD",811.9,811.9,30,21,11,0)
defined in the INTERNAL PATIENT COHORT LOGIC field using the reminder
"^DD",811.9,811.9,30,21,12,0)
inquiry option.
"^DD",811.9,811.9,30,"DT")
3000504
"^DD",811.9,811.9,31,0)
INTERNAL PATIENT COHORT LOGIC^FX^^31;1^K:$L(X)>245!($L(X)<3) X
"^DD",811.9,811.9,31,3)
Do not edit this field.
"^DD",811.9,811.9,31,21,0)
^.001^2^2^3000503^^^
"^DD",811.9,811.9,31,21,1,0)
This filed is computed by the Clinical Reminders software and should
"^DD",811.9,811.9,31,21,2,0)
never be edited by hand.
"^DD",811.9,811.9,31,23,0)
^.001^4^4^3000503^^^
"^DD",811.9,811.9,31,23,1,0)
This field is computed by the Clinical Reminders software. If there is
"^DD",811.9,811.9,31,23,2,0)
a user input Patient Cohort Logic then it is copied into this field.
"^DD",811.9,811.9,31,23,3,0)
Otherwise this field is determined using the USE IN PATIENT COHORT
"^DD",811.9,811.9,31,23,4,0)
LOGIC fields for each finding in the reminder definition.
"^DD",811.9,811.9,31,"DT")
2990928
"^DD",811.9,811.9,32,0)
PATIENT COHORT FINDINGS COUNT^NJ2,0^^32;1^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",811.9,811.9,32,3)
Do not edit this field.
"^DD",811.9,811.9,32,21,0)
^.001^2^2^3000503^^^
"^DD",811.9,811.9,32,21,1,0)
This field is computed by the Clinical Reminders software and should
"^DD",811.9,811.9,32,21,2,0)
never be edited by hand.
"^DD",811.9,811.9,32,23,0)
^.001^3^3^3000503^^^
"^DD",811.9,811.9,32,23,1,0)
This field is computed by the Clinical Reminders software and contains
"^DD",811.9,811.9,32,23,2,0)
the number of findings that are in the INTERNAL PATIENT COHORT LOGIC
"^DD",811.9,811.9,32,23,3,0)
field.
"^DD",811.9,811.9,32,"DT")
2990421
"^DD",811.9,811.9,33,0)
PATIENT COHORT FINDINGS LIST^F^^32;2^K:$L(X)>243!($L(X)<1) X
"^DD",811.9,811.9,33,3)
Do not edit this field.
"^DD",811.9,811.9,33,21,0)
^.001^2^2^3000503^^
"^DD",811.9,811.9,33,21,1,0)
This field is computed by the Clinical Reminders software and should
"^DD",811.9,811.9,33,21,2,0)
never be edited by hand.
"^DD",811.9,811.9,33,23,0)
^.001^2^2^3000503^^
"^DD",811.9,811.9,33,23,1,0)
This field is computed by the Clinical Reminders software and contains
"^DD",811.9,811.9,33,23,2,0)
a list of the findings in the INTERNAL PATIENT COHORT LOGIC field.
"^DD",811.9,811.9,33,"DT")
3000301
"^DD",811.9,811.9,34,0)
CUSTOMIZED RESOLUTION LOGIC^FX^^34;1^K:'$$VALID^PXRMLOG(X,5,245) X
"^DD",811.9,811.9,34,.1)
CUSTOMIZED RESOLUTION LOGIC (OPTIONAL)
"^DD",811.9,811.9,34,1,0)
^.1^^0
"^DD",811.9,811.9,34,3)
Enter a Boolean string from 3-245 characters that includes findings that resolve the reminder.
"^DD",811.9,811.9,34,21,0)
^^11^11^3000505^
"^DD",811.9,811.9,34,21,1,0)
This field may be used to define a customized Boolean logic string that
"^DD",811.9,811.9,34,21,2,0)
defines what and how a reminders findings should be used to determine if
"^DD",811.9,811.9,34,21,3,0)
the reminder has been resolved. The INTERNAL RESOLUTION LOGIC field is
"^DD",811.9,811.9,34,21,4,0)
automatically defined for you based on the USE IN RESOLUTION LOGIC fields
"^DD",811.9,811.9,34,21,5,0)
on findings. The customized logic is used when the USE IN RESOLUTION LOGIC
"^DD",811.9,811.9,34,21,6,0)
fields associated with each finding do not provide the ability to create
"^DD",811.9,811.9,34,21,7,0)
the required logic string. (e.g., grouping various findings within
"^DD",811.9,811.9,34,21,8,0)
parenthesis)
"^DD",811.9,811.9,34,21,9,0)
 
"^DD",811.9,811.9,34,21,10,0)
Tip:  Before defining the Boolean string, review the default logic defined
"^DD",811.9,811.9,34,21,11,0)
in the INTERNAL RESOLUTION LOGIC field using the reminder inquiry option.
"^DD",811.9,811.9,34,"DT")
3000504
"^DD",811.9,811.9,35,0)
INTERNAL RESOLUTION LOGIC^F^^35;1^K:$L(X)>245!($L(X)<5) X
"^DD",811.9,811.9,35,3)
Do not edit this field.
"^DD",811.9,811.9,35,21,0)
^.001^2^2^3000503^^
"^DD",811.9,811.9,35,21,1,0)
This field is computed by the Clinical Reminders software and should
"^DD",811.9,811.9,35,21,2,0)
never be edited by hand.
"^DD",811.9,811.9,35,23,0)
^.001^4^4^3000503^^
"^DD",811.9,811.9,35,23,1,0)
This field is computed by the Clinical Reminders software. If there is
"^DD",811.9,811.9,35,23,2,0)
a user input Resolution Logic then it is copied into this field.
"^DD",811.9,811.9,35,23,3,0)
Otherwise this field is determined using the USE IN RESOLUTION
"^DD",811.9,811.9,35,23,4,0)
LOGIC fields for each finding in the reminder definition.
"^DD",811.9,811.9,35,"DT")
2990420
"^DD",811.9,811.9,36,0)
RESOLUTION FINDINGS COUNT^NJ2,0^^36;1^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",811.9,811.9,36,3)
Do not edit this field.
"^DD",811.9,811.9,36,21,0)
^.001^2^2^3000503^^
"^DD",811.9,811.9,36,21,1,0)
This field is computed by the Clinical Reminders software and should
"^DD",811.9,811.9,36,21,2,0)
never be edited by hand.
"^DD",811.9,811.9,36,23,0)
^.001^2^2^3000503^^
"^DD",811.9,811.9,36,23,1,0)
This field is computed by the Clinical Reminders software and contains
"^DD",811.9,811.9,36,23,2,0)
the number of findings in the INTERNAL RESOLUTION LOGIC field.
"^DD",811.9,811.9,36,"DT")
2990421
"^DD",811.9,811.9,37,0)
RESOLUTION FINDINGS LIST^F^^36;2^K:$L(X)>243!($L(X)<1) X
"^DD",811.9,811.9,37,3)
Do not edit this field.
"^DD",811.9,811.9,37,21,0)
^.001^2^2^3000503^^^
"^DD",811.9,811.9,37,21,1,0)
This field is computed by the Clinical Reminders software and should
"^DD",811.9,811.9,37,21,2,0)
never be edited by hand.
"^DD",811.9,811.9,37,23,0)
^.001^2^2^3000503^^
"^DD",811.9,811.9,37,23,1,0)
This field is computed by the Clinical Reminders software and contains
"^DD",811.9,811.9,37,23,2,0)
the list of findings in the INTERNAL RESOLUTION LOGIC field.
"^DD",811.9,811.9,37,"DT")
2990421
"^DD",811.9,811.9,40,0)
AGE FINDINGS COUNT^NJ2,0^^40;1^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",811.9,811.9,40,3)
Do not edit this field.
"^DD",811.9,811.9,40,21,0)
^^2^2^3000501^
"^DD",811.9,811.9,40,21,1,0)
This field is computed by the Clinical Reminders software and should
"^DD",811.9,811.9,40,21,2,0)
never be edited by hand.
"^DD",811.9,811.9,40,23,0)
^^3^3^3000501^
"^DD",811.9,811.9,40,23,1,0)
This field is computed by the Clinical Reminders software and contains
"^DD",811.9,811.9,40,23,2,0)
the number of findings that can override the baseline age range frequency
"^DD",811.9,811.9,40,23,3,0)
set. It should never be edited by hand.
"^DD",811.9,811.9,40,"DT")
2990421
"^DD",811.9,811.9,41,0)
AGE FINDINGS LIST^F^^40;2^K:$L(X)>243!($L(X)<1) X
"^DD",811.9,811.9,41,3)
Do not edit this field.
"^DD",811.9,811.9,41,21,0)
^^2^2^3000501^
"^DD",811.9,811.9,41,21,1,0)
This field is computed by the Clinical Reminders software and should
"^DD",811.9,811.9,41,21,2,0)
never be edited by hand.
"^DD",811.9,811.9,41,23,0)
^^3^3^3000501^
"^DD",811.9,811.9,41,23,1,0)
This field is computed by the Clinical Reminders software and contains
"^DD",811.9,811.9,41,23,2,0)
a list of the findings that can override the baseline age range frequency.
"^DD",811.9,811.9,41,23,3,0)
It should never be edited by hand.
"^DD",811.9,811.9,41,"DT")
2990415
"^DD",811.9,811.9,42,0)
INFORMATION FINDINGS COUNT^NJ2,0^^42;1^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",811.9,811.9,42,3)
Do not edit this field.
"^DD",811.9,811.9,42,21,0)
^.001^2^2^3000501^^
"^DD",811.9,811.9,42,21,1,0)
This field is computed by the Clinical Reminders software and should
"^DD",811.9,811.9,42,21,2,0)
never be edited by hand.
"^DD",811.9,811.9,42,23,0)
^.001^3^3^3000501^^
"^DD",811.9,811.9,42,23,1,0)
This field is computed by the Clinical Reminders software and contains
"^DD",811.9,811.9,42,23,2,0)
the number of findings that are information only. It should never be edited
"^DD",811.9,811.9,42,23,3,0)
by hand.
"^DD",811.9,811.9,42,"DT")
2990421
"^DD",811.9,811.9,43,0)
INFORMATION FINDINGS LIST^F^^42;2^K:$L(X)>243!($L(X)<1) X
"^DD",811.9,811.9,43,3)
Do not edit this field.
"^DD",811.9,811.9,43,21,0)
^.001^2^2^3000503^^^
"^DD",811.9,811.9,43,21,1,0)
This field is computed by the Clinical Reminders software and should
"^DD",811.9,811.9,43,21,2,0)
never be edited by hand.
"^DD",811.9,811.9,43,23,0)
^.001^2^2^3000503^^^
"^DD",811.9,811.9,43,23,1,0)
This field is computed by the Clinical Reminders software and contains
"^DD",811.9,811.9,43,23,2,0)
the number of findings. It should never be edited by hand.
"^DD",811.9,811.9,43,"DT")
2990421
"^DD",811.9,811.9,50,0)
WEB SITES^811.9002^^50;0
"^DD",811.9,811.9,50,21,0)
^.001^1^1^3000501^^^^
"^DD",811.9,811.9,50,21,1,0)
This multiple contains Web site(s) for information related to this reminder.
"^DD",811.9,811.9,50,"DT")
2991129
"^DD",811.9,811.9,51,0)
LINKED REMINDER DIALOG^*P801.41'^PXRMD(801.41,^51;1^S DIC("S")="I $P(^(0),U,4)=""R""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",811.9,811.9,51,1,0)
^.1
"^DD",811.9,811.9,51,1,1,0)
811.9^AG
"^DD",811.9,811.9,51,1,1,1)
S ^PXD(811.9,"AG",$E(X,1,30),DA)=""
"^DD",811.9,811.9,51,1,1,2)
K ^PXD(811.9,"AG",$E(X,1,30),DA)
"^DD",811.9,811.9,51,1,1,"DT")
2991005
"^DD",811.9,811.9,51,3)
Enter dialog to be used in CPRS to resolve this reminder. 
"^DD",811.9,811.9,51,12)
Reminders may only point to reminder dialog entries
"^DD",811.9,811.9,51,12.1)
S DIC("S")="I $P(^(0),U,4)=""R"""
"^DD",811.9,811.9,51,21,0)
^.001^2^2^3000505^^
"^DD",811.9,811.9,51,21,1,0)
This is the Reminder Dialog that will be used when the reminder is
"^DD",811.9,811.9,51,21,2,0)
processed in the CPRS GUI.
"^DD",811.9,811.9,51,"DT")
3000423
"^DD",811.9,811.9,60,0)
GENERAL COHORT FOUND TEXT^811.9003^^60;0
"^DD",811.9,811.9,60,21,0)
^^5^5^3000505^
"^DD",811.9,811.9,60,21,1,0)
This optional field defines text to display in the Clinical Maintenance
"^DD",811.9,811.9,60,21,2,0)
component when the patient's findings found during the reminder evaluation
"^DD",811.9,811.9,60,21,3,0)
made the Patient Cohort Logic true.  This is general text, not specific to
"^DD",811.9,811.9,60,21,4,0)
a finding, that will display when the patient is found to be in the
"^DD",811.9,811.9,60,21,5,0)
patient cohort.
"^DD",811.9,811.9,60,"DT")
3000504
"^DD",811.9,811.9,61,0)
GENERAL COHORT NOT FOUND TEXT^811.961^^61;0
"^DD",811.9,811.9,61,21,0)
^^5^5^3000505^
"^DD",811.9,811.9,61,21,1,0)
This optional field defines text to display in the Clinical Maintenance
"^DD",811.9,811.9,61,21,2,0)
component when the patient's findings during reminder evaluation made the
"^DD",811.9,811.9,61,21,3,0)
Patient Cohort Logic false. This is general text, not specific to a
"^DD",811.9,811.9,61,21,4,0)
finding, that will display when the patient is not found to be in the
"^DD",811.9,811.9,61,21,5,0)
patient cohort.
"^DD",811.9,811.9,61,"DT")
3000504
"^DD",811.9,811.9,65,0)
GENERAL RESOLUTION FOUND TEXT^811.965^^65;0
"^DD",811.9,811.9,65,21,0)
^^5^5^3000505^
"^DD",811.9,811.9,65,21,1,0)
This optional field defines text to display in the Clinical Maintenance
"^DD",811.9,811.9,65,21,2,0)
component when the patient's findings found during the reminder evaluation
"^DD",811.9,811.9,65,21,3,0)
made the Resolution Logic true.  This is general text, not specific to
"^DD",811.9,811.9,65,21,4,0)
a finding, that will display when the patient's findings resolve the
"^DD",811.9,811.9,65,21,5,0)
reminder.
"^DD",811.9,811.9,65,"DT")
3000504
"^DD",811.9,811.9,66,0)
GENERAL RESOL NOT FOUND TEXT^811.966^^66;0
"^DD",811.9,811.9,66,21,0)
^.001^4^4^3000505^^
"^DD",811.9,811.9,66,21,1,0)
This optional field defines text to display in the Clinical Maintenance
"^DD",811.9,811.9,66,21,2,0)
component when the patient's findings found during the reminder evaluation
"^DD",811.9,811.9,66,21,3,0)
made the Resolution Logic false.  This is general text, not specific to
"^DD",811.9,811.9,66,21,4,0)
a finding, that will display when the reminder has not been resolved.
"^DD",811.9,811.9,66,"DT")
3000504
"^DD",811.9,811.9002,0)
WEB SITES SUB-FIELD^^1^3
"^DD",811.9,811.9002,0,"DT")
2991130
"^DD",811.9,811.9002,0,"IX","B",811.9002,.01)

"^DD",811.9,811.9002,0,"NM","WEB SITES")

"^DD",811.9,811.9002,0,"UP")
811.9
"^DD",811.9,811.9002,.01,0)
URL^MF^^0;1^K:$L(X)>128!($L(X)<1) X
"^DD",811.9,811.9002,.01,1,0)
^.1
"^DD",811.9,811.9002,.01,1,1,0)
811.9002^B
"^DD",811.9,811.9002,.01,1,1,1)
S ^PXD(811.9,DA(1),50,"B",$E(X,1,30),DA)=""
"^DD",811.9,811.9002,.01,1,1,2)
K ^PXD(811.9,DA(1),50,"B",$E(X,1,30),DA)
"^DD",811.9,811.9002,.01,3)
Answer must be 1-128 characters in length.
"^DD",811.9,811.9002,.01,21,0)
^.001^1^1^3000501^^^^
"^DD",811.9,811.9002,.01,21,1,0)
This is the URL for the web site.
"^DD",811.9,811.9002,.01,"DT")
2991129
"^DD",811.9,811.9002,.02,0)
WEB SITE TITLE^F^^0;2^K:$L(X)>60!($L(X)<1) X
"^DD",811.9,811.9002,.02,3)
Answer must be 1-60 characters in length.
"^DD",811.9,811.9002,.02,21,0)
^.001^2^2^3000501^^
"^DD",811.9,811.9002,.02,21,1,0)
This is the web site title that is used by the CPRS GUI. It will appear
"^DD",811.9,811.9002,.02,21,2,0)
after a right click allowing the user to select the web site.
"^DD",811.9,811.9002,.02,"DT")
2991130
"^DD",811.9,811.9002,1,0)
WEB SITE DESCRIPTION^811.90021^^1;0
"^DD",811.9,811.9002,1,21,0)
^.001^1^1^3000501^^
"^DD",811.9,811.9002,1,21,1,0)
This field contains a description of the Web site.
"^DD",811.9,811.90021,0)
WEB SITE DESCRIPTION SUB-FIELD^^.01^1
"^DD",811.9,811.90021,0,"DT")
2991130
"^DD",811.9,811.90021,0,"NM","WEB SITE DESCRIPTION")

"^DD",811.9,811.90021,0,"UP")
811.9002
"^DD",811.9,811.90021,.01,0)
WEB SITE DESCRIPTION^W^^0;1^Q
"^DD",811.9,811.90021,.01,3)
Enter the Web site description.
"^DD",811.9,811.90021,.01,"DT")
2991130
"^DD",811.9,811.9003,0)
GENERAL COHORT FOUND TEXT SUB-FIELD^^.01^1
"^DD",811.9,811.9003,0,"DT")
3000110
"^DD",811.9,811.9003,0,"NM","GENERAL COHORT FOUND TEXT")

"^DD",811.9,811.9003,0,"UP")
811.9
"^DD",811.9,811.9003,.01,0)
GENERAL COHORT FOUND TEXT^W^^0;1^Q
"^DD",811.9,811.9003,.01,.1)
GENERAL PATIENT COHORT FOUND TEXT
"^DD",811.9,811.9003,.01,3)
Enter general text to display when the patient is found to be in the patient cohort.
"^DD",811.9,811.9003,.01,21,0)
^^5^5^3000505^
"^DD",811.9,811.9003,.01,21,1,0)
This optional field defines text to display in the Clinical Maintenance
"^DD",811.9,811.9003,.01,21,2,0)
component when the patient's findings found during the reminder evaluation
"^DD",811.9,811.9003,.01,21,3,0)
made the Patient Cohort Logic true.  This is general text, not specific to
"^DD",811.9,811.9003,.01,21,4,0)
a finding, that will display when the patient is found to be in the
"^DD",811.9,811.9003,.01,21,5,0)
patient cohort.
"^DD",811.9,811.9003,.01,"DT")
3000504
"^DD",811.9,811.902,0)
FINDINGS SUB-FIELD^^13^14
"^DD",811.9,811.902,0,"DT")
3000607
"^DD",811.9,811.902,0,"IX","B",811.902,.01)

"^DD",811.9,811.902,0,"NM","FINDINGS")

"^DD",811.9,811.902,0,"UP")
811.9
"^DD",811.9,811.902,.01,0)
FINDING ITEM^MVX^^0;1^K:'$$VFINDING^PXRMINTR(X) X
"^DD",811.9,811.902,.01,1,0)
^.1^^-1
"^DD",811.9,811.902,.01,1,1,0)
811.902^B
"^DD",811.9,811.902,.01,1,1,1)
S ^PXD(811.9,DA(1),20,"B",$E(X,1,30),DA)=""
"^DD",811.9,811.902,.01,1,1,2)
K ^PXD(811.9,DA(1),20,"B",$E(X,1,30),DA)
"^DD",811.9,811.902,.01,1,1,3)
Required Index for Variable Pointer
"^DD",811.9,811.902,.01,1,2,0)
811.9^E^MUMPS
"^DD",811.9,811.902,.01,1,2,1)
S ^PXD(811.9,DA(1),20,"E",$P(X,";",2),$P(X,";",1),DA)=""
"^DD",811.9,811.902,.01,1,2,2)
K ^PXD(811.9,DA(1),20,"E",$P(X,";",2),$P(X,";",1),DA)
"^DD",811.9,811.902,.01,1,2,"%D",0)
^^1^1^2990913^^^
"^DD",811.9,811.902,.01,1,2,"%D",1,0)
This cross-reference is used to group findings by type.
"^DD",811.9,811.902,.01,1,2,"DT")
2990401
"^DD",811.9,811.902,.01,3)
Enter a finding item in the format: Prefix.Name
"^DD",811.9,811.902,.01,21,0)
^.001^18^18^3000614^^
"^DD",811.9,811.902,.01,21,1,0)
This field identifies finding items to use in the reminder evaluation
"^DD",811.9,811.902,.01,21,2,0)
process. A finding item may be used to determine the patient cohort,
"^DD",811.9,811.902,.01,21,3,0)
resolve the reminder, or provide information to the provider.
"^DD",811.9,811.902,.01,21,4,0)
 
"^DD",811.9,811.902,.01,21,5,0)
How this finding item will be used depends on the additional fields
"^DD",811.9,811.902,.01,21,6,0)
defined, or not defined, for this finding item:
"^DD",811.9,811.902,.01,21,7,0)
 
"^DD",811.9,811.902,.01,21,8,0)
  1. To define a finding item to use in the patient cohort logic, add the
"^DD",811.9,811.902,.01,21,9,0)
finding item and define its USE IN PATIENT COHORT LOGIC field.
"^DD",811.9,811.902,.01,21,10,0)
 
"^DD",811.9,811.902,.01,21,11,0)
  2. To define a finding item to use in the resolution logic, add the
"^DD",811.9,811.902,.01,21,12,0)
finding item and define its USE IN RESOLUTION LOGIC field.
"^DD",811.9,811.902,.01,21,13,0)
 
"^DD",811.9,811.902,.01,21,14,0)
  3. To define a finding item to use for information only, leave the USE
"^DD",811.9,811.902,.01,21,15,0)
IN PATIENT COHORT LOGIC and USE IN RESOLUTION LOGIC fields blank.
"^DD",811.9,811.902,.01,21,16,0)
 
"^DD",811.9,811.902,.01,21,17,0)
This finding item can be used to override the baseline frequency
"^DD",811.9,811.902,.01,21,18,0)
age range set.
"^DD",811.9,811.902,.01,"DT")
3000503
"^DD",811.9,811.902,.01,"V",0)
^.12P^16^16
"^DD",811.9,811.902,.01,"V",1,0)
50^DRUG^5^DR^n^n
"^DD",811.9,811.902,.01,"V",2,0)
9999999.09^EDUCATION TOPIC^10^ED^n^n
"^DD",811.9,811.902,.01,"V",3,0)
9999999.15^EXAM^15^EX^n^n
"^DD",811.9,811.902,.01,"V",4,0)
9999999.64^HEALTH FACTOR^20^HF^n^n
"^DD",811.9,811.902,.01,"V",5,0)
9999999.14^IMMUNIZATION^25^IM^n^n
"^DD",811.9,811.902,.01,"V",6,0)
60^LABORATORY TEST^30^LT^n^n
"^DD",811.9,811.902,.01,"V",7,0)
601^MENTAL HEALTH INSTRUMENT^35^MH^n^n
"^DD",811.9,811.902,.01,"V",8,0)
101.43^ORDERABLE ITEM^40^OI^n^n
"^DD",811.9,811.902,.01,"V",9,0)
71^RADIOLOGY PROCEDURE^45^RP^n^n
"^DD",811.9,811.902,.01,"V",10,0)
811.4^REMINDER COMPUTED FINDING^50^CF^n^n
"^DD",811.9,811.902,.01,"V",11,0)
811.2^REMINDER TAXONOMY^55^TX^n^n
"^DD",811.9,811.902,.01,"V",12,0)
811.5^REMINDER TERM^60^RT^n^n
"^DD",811.9,811.902,.01,"V",13,0)
9999999.28^SKIN TEST^65^ST^n^n
"^DD",811.9,811.902,.01,"V",14,0)
50.605^VA DRUG CLASS^70^DC^n^n
"^DD",811.9,811.902,.01,"V",15,0)
50.6^VA GENERIC^75^DG^n^n
"^DD",811.9,811.902,.01,"V",16,0)
120.51^VITAL MEASUREMENT^80^VM^n^n
"^DD",811.9,811.902,1,0)
MINIMUM AGE^NJ3,0^^0;2^K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",811.9,811.902,1,1,0)
^.1^^0
"^DD",811.9,811.902,1,3)
Enter the minimum age for the frequency associated with this finding.
"^DD",811.9,811.902,1,21,0)
^^2^2^3000428^
"^DD",811.9,811.902,1,21,1,0)
This field specifies the minimum age for defining an age range
"^DD",811.9,811.902,1,21,2,0)
associated with a frequency. Leave it blank if there is no minimum age.
"^DD",811.9,811.902,1,"DT")
2991027
"^DD",811.9,811.902,2,0)
MAXIMUM AGE^NJ3,0^^0;3^K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",811.9,811.902,2,1,0)
^.1^^0
"^DD",811.9,811.902,2,3)
Enter the maximum age for the frequency associated with this finding.
"^DD",811.9,811.902,2,21,0)
^^2^2^3000428^
"^DD",811.9,811.902,2,21,1,0)
This field specifies the maximum age for defining an age range
"^DD",811.9,811.902,2,21,2,0)
associated with a frequency. Leave it blank if there is no maximum age.
"^DD",811.9,811.902,2,"DT")
2991027
"^DD",811.9,811.902,3,0)
REMINDER FREQUENCY^FX^^0;4^K:'$$VTPER^PXRMINTR(.X) X
"^DD",811.9,811.902,3,1,0)
^.1^^0
"^DD",811.9,811.902,3,3)
Enter a number followed by D, M, or Y for day, month, or year.
"^DD",811.9,811.902,3,21,0)
^.001^6^6^3000428^^
"^DD",811.9,811.902,3,21,1,0)
If this finding is true (found) then use this frequency and the age
"^DD",811.9,811.902,3,21,2,0)
range specified by the minimum and maximum ages to override the
"^DD",811.9,811.902,3,21,3,0)
baseline frequency age range set. The frequency is input as nD, nM, or
"^DD",811.9,811.902,3,21,4,0)
nY, where D stands for days, M for months, Y for years, and n is a
"^DD",811.9,811.902,3,21,5,0)
number. Thus, for a reminder that is to be given once a year, the
"^DD",811.9,811.902,3,21,6,0)
values 365D, 12M, or 1Y would all work.
"^DD",811.9,811.902,3,"DT")
3000427
"^DD",811.9,811.902,4,0)
FOUND TEXT^811.9024^^1;0
"^DD",811.9,811.902,4,21,0)
^.001^2^2^3000501^^
"^DD",811.9,811.902,4,21,1,0)
This is the text that will be displayed in the Clinical Maintenance
"^DD",811.9,811.902,4,21,2,0)
output if this finding is found (true).
"^DD",811.9,811.902,5,0)
NOT FOUND TEXT^811.9025^^2;0
"^DD",811.9,811.902,5,21,0)
^.001^2^2^3000501^^
"^DD",811.9,811.902,5,21,1,0)
This is the text that will be displayed in the Clinical Maintenance
"^DD",811.9,811.902,5,21,2,0)
output if the finding is not found (false).
"^DD",811.9,811.902,6,0)
RANK FREQUENCY^NJ3,0^^0;5^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X
"^DD",811.9,811.902,6,3)
Enter an optional rank from 1 to 999 or leave blank.
"^DD",811.9,811.902,6,21,0)
^.001^11^11^3000428^^^^
"^DD",811.9,811.902,6,21,1,0)
This field is used to rank the frequency and age range sets associated
"^DD",811.9,811.902,6,21,2,0)
with a finding. If there is more than one true finding that can
"^DD",811.9,811.902,6,21,3,0)
override the baseline frequency age range set then the determination of
"^DD",811.9,811.902,6,21,4,0)
which one to use is made based on the finding with the highest rank.
"^DD",811.9,811.902,6,21,5,0)
Ranks can range from 1 to 999 with 1 being the highest rank.
"^DD",811.9,811.902,6,21,6,0)
 
"^DD",811.9,811.902,6,21,7,0)
When the Rank field is blank (null) for all true findings that can
"^DD",811.9,811.902,6,21,8,0)
override the baseline frequency age range set then the frequency that
"^DD",811.9,811.902,6,21,9,0)
will cause the reminder to be given most often will be used. For
"^DD",811.9,811.902,6,21,10,0)
example, if finding 1 has a frequency of 6 months, and finding 2 has a
"^DD",811.9,811.902,6,21,11,0)
frequency of 1 year finding 1 will be used to override the baseline.
"^DD",811.9,811.902,6,"DT")
2990325
"^DD",811.9,811.902,7,0)
USE IN RESOLUTION LOGIC^S^&:AND;!:OR;&':AND NOT;!':OR NOT;^0;6^Q
"^DD",811.9,811.902,7,1,0)
^.1^^0
"^DD",811.9,811.902,7,3)
Enter the logic operator to be used in the default Internal Resolution Logic.
"^DD",811.9,811.902,7,21,0)
^^28^28^3000505^
"^DD",811.9,811.902,7,21,1,0)
This optional field is used to indicate that this finding item should be
"^DD",811.9,811.902,7,21,2,0)
included as part of the default INTERNAL RESOLUTION LOGIC field for this
"^DD",811.9,811.902,7,21,3,0)
reminder. The INTERNAL RESOLUTION LOGIC, or the CUSTOMIZED RESOLUTION
"^DD",811.9,811.902,7,21,4,0)
LOGIC if defined, is used in the reminder evaluation process to determine
"^DD",811.9,811.902,7,21,5,0)
whether or not a reminder is resolved (satisfied).
"^DD",811.9,811.902,7,21,6,0)
 
"^DD",811.9,811.902,7,21,7,0)
Valid entries for the USE IN RESOLUTION LOGIC field are:
"^DD",811.9,811.902,7,21,8,0)
 
"^DD",811.9,811.902,7,21,9,0)
                       EQUATES TO BOOLEAN
"^DD",811.9,811.902,7,21,10,0)
  OPERATOR   VALUE     OPERATOR LOGIC
"^DD",811.9,811.902,7,21,11,0)
  --------   -----     ------------------
"^DD",811.9,811.902,7,21,12,0)
             BLANK     not included in Resolution Logic
"^DD",811.9,811.902,7,21,13,0)
                       (Use @ to delete value)
"^DD",811.9,811.902,7,21,14,0)
   &         AND       &(Finding)
"^DD",811.9,811.902,7,21,15,0)
   !         OR        !(Finding)
"^DD",811.9,811.902,7,21,16,0)
   &'        AND NOT   &'(Finding)
"^DD",811.9,811.902,7,21,17,0)
   !'        OR NOT    !'(Finding)
"^DD",811.9,811.902,7,21,18,0)
 
"^DD",811.9,811.902,7,21,19,0)
The finding item and operator are used to automatically create the default
"^DD",811.9,811.902,7,21,20,0)
resolution Boolean logic string.
"^DD",811.9,811.902,7,21,21,0)
 
"^DD",811.9,811.902,7,21,22,0)
Each finding is used in the evaluation process to find the most recent
"^DD",811.9,811.902,7,21,23,0)
entry for the finding. After all findings are evaluated, the Resolution
"^DD",811.9,811.902,7,21,24,0)
Logic is evaluated by logically combining the true (found) and false (not
"^DD",811.9,811.902,7,21,25,0)
found) values of the findings. If the Resolution Logic evaluates to true
"^DD",811.9,811.902,7,21,26,0)
then the reminder is considered to be resolved.
"^DD",811.9,811.902,7,21,27,0)
 
"^DD",811.9,811.902,7,21,28,0)
To see the INTERNAL RESOLUTION LOGIC, use the reminder inquiry option.
"^DD",811.9,811.902,7,"DT")
2991027
"^DD",811.9,811.902,8,0)
USE IN PATIENT COHORT LOGIC^S^&:AND;!:OR;&':AND NOT;!':OR NOT;^0;7^Q
"^DD",811.9,811.902,8,1,0)
^.1^^0
"^DD",811.9,811.902,8,3)
Enter the logic operator to be used in the default Internal Patient Cohort Logic
"^DD",811.9,811.902,8,21,0)
^^35^35^3000505^
"^DD",811.9,811.902,8,21,1,0)
This optional field is used to indicate that this finding item should be
"^DD",811.9,811.902,8,21,2,0)
included as part of the default INTERNAL PATIENT COHORT LOGIC field for
"^DD",811.9,811.902,8,21,3,0)
this reminder. The INTERNAL PATIENT COHORT LOGIC, or the CUSTOMIZED COHORT
"^DD",811.9,811.902,8,21,4,0)
LOGIC if defined, is used in the reminder evaluation process to determine
"^DD",811.9,811.902,8,21,5,0)
whether or not a reminder is applicable to a patient.
"^DD",811.9,811.902,8,21,6,0)
 
"^DD",811.9,811.902,8,21,7,0)
Valid entries for the USE IN PATIENT COHORT LOGIC field are:
"^DD",811.9,811.902,8,21,8,0)
 
"^DD",811.9,811.902,8,21,9,0)
                     EQUATES TO BOOLEAN
"^DD",811.9,811.902,8,21,10,0)
  OPERATOR  VALUE     OPERATOR LOGIC
"^DD",811.9,811.902,8,21,11,0)
  --------  -----     ------------------
"^DD",811.9,811.902,8,21,12,0)
            BLANK     not included in Patient Cohort Logic
"^DD",811.9,811.902,8,21,13,0)
                      (Use @ to delete value)
"^DD",811.9,811.902,8,21,14,0)
   &        AND       &(Finding)
"^DD",811.9,811.902,8,21,15,0)
   !        OR        !(Finding)
"^DD",811.9,811.902,8,21,16,0)
   &'       AND NOT   &'(Finding)
"^DD",811.9,811.902,8,21,17,0)
   !'       OR NOT    !'(Finding)
"^DD",811.9,811.902,8,21,18,0)
 
"^DD",811.9,811.902,8,21,19,0)
The finding item and operator are used to automatically create the
"^DD",811.9,811.902,8,21,20,0)
default Boolean INTERNAL PATIENT COHORT LOGIC string. The default logic
"^DD",811.9,811.902,8,21,21,0)
string initially includes (SEX)&(AGE), regardless of whether the baseline
"^DD",811.9,811.902,8,21,22,0)
specifies SEX and AGE criteria. Each finding item with a value in the USE
"^DD",811.9,811.902,8,21,23,0)
IN PATIENT COHORT LOGIC field is appended to the string by using the
"^DD",811.9,811.902,8,21,24,0)
finding item and operator. For example if finding item 2 had an operator
"^DD",811.9,811.902,8,21,25,0)
for this field of "&" then the string would be (SEX)&(AGE)&FI(2).
"^DD",811.9,811.902,8,21,26,0)
 
"^DD",811.9,811.902,8,21,27,0)
Each finding item is used in the evaluation process to find the most
"^DD",811.9,811.902,8,21,28,0)
recent entry for the finding. After all findings are evaluated, the
"^DD",811.9,811.902,8,21,29,0)
Patient Cohort Logic is evaluated by logically combining the true (found)
"^DD",811.9,811.902,8,21,30,0)
and false (not found) values of the finding items. If the Patient Cohort
"^DD",811.9,811.902,8,21,31,0)
Logic evaluates to true then the patient is in the cohort and the reminder
"^DD",811.9,811.902,8,21,32,0)
is applicable to the patient.
"^DD",811.9,811.902,8,21,33,0)
      
"^DD",811.9,811.902,8,21,34,0)
To see the INTERNAL PATIENT COHORT LOGIC, use the reminder inquiry
"^DD",811.9,811.902,8,21,35,0)
option.
"^DD",811.9,811.902,8,"DT")
2991027
"^DD",811.9,811.902,9,0)
EFFECTIVE PERIOD^FX^^0;8^K:'$$VTPER^PXRMINTR(.X) X
"^DD",811.9,811.902,9,3)
Enter a number followed by D, M, or Y for day, month, or year.
"^DD",811.9,811.902,9,21,0)
^.001^5^5^3000821^^^^
"^DD",811.9,811.902,9,21,1,0)
This is the amount of time the finding will remain valid. For example,
"^DD",811.9,811.902,9,21,2,0)
if the EFFECTIVE PERIOD is 1Y and the date of the finding is less than
"^DD",811.9,811.902,9,21,3,0)
one year ago the finding will be true. If the date is more than a year
"^DD",811.9,811.902,9,21,4,0)
ago the finding will have expired and be false. If this field is left
"^DD",811.9,811.902,9,21,5,0)
empty then the finding never expires.
"^DD",811.9,811.902,9,"DT")
3000509
"^DD",811.9,811.902,10,0)
USE INACTIVE PROBLEMS^S^1:YES;0:N;^0;9^Q
"^DD",811.9,811.902,10,3)
Enter a 1 or YES if you want inactive problems used.
"^DD",811.9,811.902,10,21,0)
^.001^4^4^3000505^^^^
"^DD",811.9,811.902,10,21,1,0)
Normally only active problems from the Problem List will be used in the
"^DD",811.9,811.902,10,21,2,0)
reminder evaluation. If USE INACTIVE PROBLEMS is set to YES then both
"^DD",811.9,811.902,10,21,3,0)
active and inactive problems will be used. Note that this field applies
"^DD",811.9,811.902,10,21,4,0)
only to taxonomy findings.
"^DD",811.9,811.902,10,"DT")
2990325
"^DD",811.9,811.902,11,0)
WITHIN CATEGORY RANK^NJ3,0^^0;10^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",811.9,811.902,11,3)
Enter a number between 0 and 999.
"^DD",811.9,811.902,11,21,0)
^.001^16^16^3000505^^^
"^DD",811.9,811.902,11,21,1,0)
This field applies only to health factors. In order to understand how
"^DD",811.9,811.902,11,21,2,0)
it works, you need to understand how health factors work in the
"^DD",811.9,811.902,11,21,3,0)
reminder evaluation process. If you are not clear about this, see the
"^DD",811.9,811.902,11,21,4,0)
health factor section of the Clinical Reminder Manager Manual.
"^DD",811.9,811.902,11,21,5,0)

"^DD",811.9,811.902,11,21,6,0)
The default behavior is to use only the most recent health factor
"^DD",811.9,811.902,11,21,7,0)
within a category. A problem can arise if there are two or more health
"^DD",811.9,811.902,11,21,8,0)
factors within a category and they both have the same date. (This can
"^DD",811.9,811.902,11,21,9,0)
happen if both health factors are given during the same encounter). 
"^DD",811.9,811.902,11,21,10,0)
When the dates are the same, the health factor with the highest Within
"^DD",811.9,811.902,11,21,11,0)
Category Rank will be used. This is a numerical value like Rank
"^DD",811.9,811.902,11,21,12,0)
Frequency with 1 being the highest rank.
"^DD",811.9,811.902,11,21,13,0)

"^DD",811.9,811.902,11,21,14,0)
If WITHIN CATEGORY RANK has the special value of 0 then the
"^DD",811.9,811.902,11,21,15,0)
categorization of health factors will be ignored and the health factor
"^DD",811.9,811.902,11,21,16,0)
will be treated as a distinct finding.
"^DD",811.9,811.902,11,"DT")
3000501
"^DD",811.9,811.902,12,0)
CONDITION^FXO^^0;11^K:$L(X)>52!($L(X)<3) X D VCOND^PXRMINTR(.X)
"^DD",811.9,811.902,12,2)
S Y(0)=Y S Y=$TR(Y,"~"," ")
"^DD",811.9,811.902,12,2.1)
S Y=$TR(Y,"~"," ")
"^DD",811.9,811.902,12,3)
Enter logic to evaluate the findings value. Enter ?? for more information.
"^DD",811.9,811.902,12,21,0)
^^49^49^3000607^
"^DD",811.9,811.902,12,21,1,0)
The CONDITION must be written in M code based on the value returned from
"^DD",811.9,811.902,12,21,2,0)
the patient results for the finding. Each type of finding has a specific
"^DD",811.9,811.902,12,21,3,0)
field that provides the value available to use in the CONDITION logic.
"^DD",811.9,811.902,12,21,4,0)
If the finding value is text, enclose the condition value in quotes 
"^DD",811.9,811.902,12,21,5,0)
(e.g., "positive"). If the finding value is numeric, do not use quotes
"^DD",811.9,811.902,12,21,6,0)
(e.g., 3).
"^DD",811.9,811.902,12,21,7,0)
 
"^DD",811.9,811.902,12,21,8,0)
An IF statement is used to evaluate the value.  The value is always
"^DD",811.9,811.902,12,21,9,0)
identified as V in the statement regardless of the type of finding. If 
"^DD",811.9,811.902,12,21,10,0)
the condition logic statement evaluates to true, the finding is 
"^DD",811.9,811.902,12,21,11,0)
considered as found (true), otherwise the finding is considered as not
"^DD",811.9,811.902,12,21,12,0)
found (false).
"^DD",811.9,811.902,12,21,13,0)
 
"^DD",811.9,811.902,12,21,14,0)
Relational operators that may be used include: = equals, < less than, >
"^DD",811.9,811.902,12,21,15,0)
greater than, [ contains, ] follows and ? pattern matches. Logical
"^DD",811.9,811.902,12,21,16,0)
operators may be used to check multiple values: & And, ! Or, ' Not. 
"^DD",811.9,811.902,12,21,17,0)
         
"^DD",811.9,811.902,12,21,18,0)
Typical examples of M code are as follows:
"^DD",811.9,811.902,12,21,19,0)
    I V=3 for Education Topic's Level of Understanding = 3
"^DD",811.9,811.902,12,21,20,0)
    I V="H" for Health Factor's Level/Severity="H"
"^DD",811.9,811.902,12,21,21,0)
    I ($P(V,"/",1)>140)&($P(V,"/",2)>90) for elevated blood pressure
"^DD",811.9,811.902,12,21,22,0)
    systolic and diastolic values
"^DD",811.9,811.902,12,21,23,0)
    I ($P(V,"/",1)>140)!($P(V,"/",2)>90) for elevated blood pressure
"^DD",811.9,811.902,12,21,24,0)
    systolic or diastolic values
"^DD",811.9,811.902,12,21,25,0)
    I V["BLACK" for VA-RACE computed finding where race contains BLACK
"^DD",811.9,811.902,12,21,26,0)
 
"^DD",811.9,811.902,12,21,27,0)
Below is a brief summary for each finding type, the related field to use
"^DD",811.9,811.902,12,21,28,0)
for the value and examples:
"^DD",811.9,811.902,12,21,29,0)
 
"^DD",811.9,811.902,12,21,30,0)
Finding type                Field Value Used        Example M Code
"^DD",811.9,811.902,12,21,31,0)
 
"^DD",811.9,811.902,12,21,32,0)
 Drug                       None
"^DD",811.9,811.902,12,21,33,0)
 Education Topic            Level of understanding  I V=3
"^DD",811.9,811.902,12,21,34,0)
 Exam                       Result                  I V="N"
"^DD",811.9,811.902,12,21,35,0)
 Health Factor              Level/severity          I V="H"
"^DD",811.9,811.902,12,21,36,0)
 Immunization               Series                  I V="P"
"^DD",811.9,811.902,12,21,37,0)
 Laboratory Test            Result Value            I V>130
"^DD",811.9,811.902,12,21,38,0)
 Mental Health Instrument   Raw score               I V=1
"^DD",811.9,811.902,12,21,39,0)
 Orderable Item             Status                  I V="complete"
"^DD",811.9,811.902,12,21,40,0)
 Radiology Procedure        None
"^DD",811.9,811.902,12,21,41,0)
 Reminder Computed Finding  Determined by programmer-See Manager Manual
"^DD",811.9,811.902,12,21,42,0)
 Reminder Taxonomy          None
"^DD",811.9,811.902,12,21,43,0)
 Skin Test                  Result                  I V="N"
"^DD",811.9,811.902,12,21,44,0)
 VA Drug Class              None
"^DD",811.9,811.902,12,21,45,0)
 VA Generic                 None
"^DD",811.9,811.902,12,21,46,0)
 Vital Measurement          Rate                    I V>27
"^DD",811.9,811.902,12,21,47,0)
 
"^DD",811.9,811.902,12,21,48,0)
For details about allowed CONDITIONS for each finding type see the
"^DD",811.9,811.902,12,21,49,0)
Clinical Reminders Manager Manual.
"^DD",811.9,811.902,12,"DT")
3000609
"^DD",811.9,811.902,13,0)
MH SCALE^FX^^0;12^K:$L(X)>79!($L(X)<1) X D VSCALEF^PXRMMH
"^DD",811.9,811.902,13,3)
Enter the scale number or scale name.
"^DD",811.9,811.902,13,4)
D SCHELPF^PXRMMH
"^DD",811.9,811.902,13,21,0)
^.001^2^2^3000505^^
"^DD",811.9,811.902,13,21,1,0)
This applies only to Mental Health Instrument findings. It specifies
"^DD",811.9,811.902,13,21,2,0)
which scale to use when scoring the test.
"^DD",811.9,811.902,13,"DT")
3000321
"^DD",811.9,811.9024,0)
FOUND TEXT SUB-FIELD^^.01^1
"^DD",811.9,811.9024,0,"DT")
2990325
"^DD",811.9,811.9024,0,"NM","FOUND TEXT")

"^DD",811.9,811.9024,0,"UP")
811.902
"^DD",811.9,811.9024,.01,0)
FOUND TEXT^W^^0;1^Q
"^DD",811.9,811.9024,.01,3)
Enter the found text.
"^DD",811.9,811.9024,.01,"DT")
2990325
"^DD",811.9,811.9025,0)
NOT FOUND TEXT SUB-FIELD^^.01^1
"^DD",811.9,811.9025,0,"DT")
2990325
"^DD",811.9,811.9025,0,"NM","NOT FOUND TEXT")

"^DD",811.9,811.9025,0,"UP")
811.902
"^DD",811.9,811.9025,.01,0)
NOT FOUND TEXT^W^^0;1^Q
"^DD",811.9,811.9025,.01,3)
Enter the not found text.
"^DD",811.9,811.9025,.01,"DT")
2990325
"^DD",811.9,811.92,0)
REMINDER DESCRIPTION SUB-FIELD^^.01^1
"^DD",811.9,811.92,0,"NM","REMINDER DESCRIPTION")

"^DD",811.9,811.92,0,"UP")
811.9
"^DD",811.9,811.92,.01,0)
REMINDER DESCRIPTION^W^^0;1^Q
"^DD",811.9,811.92,.01,3)

"^DD",811.9,811.92,.01,"DT")
2960131
"^DD",811.9,811.93,0)
TECHNICAL DESCRIPTION SUB-FIELD^^.01^1
"^DD",811.9,811.93,0,"NM","TECHNICAL DESCRIPTION")

"^DD",811.9,811.93,0,"UP")
811.9
"^DD",811.9,811.93,.01,0)
TECHNICAL DESCRIPTION^W^^0;1^Q
"^DD",811.9,811.93,.01,.1)
 
"^DD",811.9,811.93,.01,"DT")
2960131
"^DD",811.9,811.961,0)
GENERAL COHORT NOT FOUND TEXT SUB-FIELD^^.01^1
"^DD",811.9,811.961,0,"DT")
3000110
"^DD",811.9,811.961,0,"NM","GENERAL COHORT NOT FOUND TEXT")

"^DD",811.9,811.961,0,"UP")
811.9
"^DD",811.9,811.961,.01,0)
GENERAL COHORT NOT FOUND TEXT^W^^0;1^Q
"^DD",811.9,811.961,.01,.1)
GENERAL PATIENT COHORT NOT FOUND TEXT
"^DD",811.9,811.961,.01,3)
Enter general text to display when the patient is not found to be in the patient cohort. 
"^DD",811.9,811.961,.01,21,0)
^^5^5^3000505^
"^DD",811.9,811.961,.01,21,1,0)
This optional field defines text to display in the Clinical Maintenance
"^DD",811.9,811.961,.01,21,2,0)
component when the patient's findings during reminder evaluation made the
"^DD",811.9,811.961,.01,21,3,0)
Patient Cohort Logic false. This is general text, not specific to a
"^DD",811.9,811.961,.01,21,4,0)
finding, that will display when the patient is not found to be in the
"^DD",811.9,811.961,.01,21,5,0)
patient cohort.
"^DD",811.9,811.961,.01,"DT")
3000504
"^DD",811.9,811.965,0)
GENERAL RESOLUTION FOUND TEXT SUB-FIELD^^.01^1
"^DD",811.9,811.965,0,"DT")
3000110
"^DD",811.9,811.965,0,"NM","GENERAL RESOLUTION FOUND TEXT")

"^DD",811.9,811.965,0,"UP")
811.9
"^DD",811.9,811.965,.01,0)
GENERAL RESOLUTION FOUND TEXT^W^^0;1^Q
"^DD",811.9,811.965,.01,.1)
GENERAL RESOLUTION FOUND TEXT
"^DD",811.9,811.965,.01,3)
Enter general text to display when the patient's findings resolve the reminder. 
"^DD",811.9,811.965,.01,21,0)
^^5^5^3000505^
"^DD",811.9,811.965,.01,21,1,0)
This optional field defines text to display in the Clinical Maintenance
"^DD",811.9,811.965,.01,21,2,0)
component when the patient's findings found during the reminder evaluation
"^DD",811.9,811.965,.01,21,3,0)
made the Resolution Logic true.  This is general text, not specific to
"^DD",811.9,811.965,.01,21,4,0)
a finding, that will display when the patient's findings resolve the
"^DD",811.9,811.965,.01,21,5,0)
reminder.
"^DD",811.9,811.965,.01,"DT")
3000504
"^DD",811.9,811.966,0)
GENERAL RESOL NOT FOUND TEXT SUB-FIELD^^.01^1
"^DD",811.9,811.966,0,"DT")
3000110
"^DD",811.9,811.966,0,"NM","GENERAL RESOL NOT FOUND TEXT")

"^DD",811.9,811.966,0,"UP")
811.9
"^DD",811.9,811.966,.01,0)
GENERAL RESOL NOT FOUND TEXT^W^^0;1^Q
"^DD",811.9,811.966,.01,.1)
GENERAL RESOLUTION NOT FOUND TEXT
"^DD",811.9,811.966,.01,3)
Enter general text to display when the patient's findings do not resolve the reminder.
"^DD",811.9,811.966,.01,21,0)
^^4^4^3000505^
"^DD",811.9,811.966,.01,21,1,0)
This optional field defines text to display in the Clinical Maintenance
"^DD",811.9,811.966,.01,21,2,0)
component when the patient's findings found during the reminder evaluation
"^DD",811.9,811.966,.01,21,3,0)
made the Resolution Logic false.  This is general text, not specific to
"^DD",811.9,811.966,.01,21,4,0)
a finding, that will display when the reminder has not been resolved.
"^DD",811.9,811.966,.01,"DT")
3000504
"^DD",811.9,811.97,0)
BASELINE AGE FINDINGS SUB-FIELD^^4^5
"^DD",811.9,811.97,0,"DT")
2960201
"^DD",811.9,811.97,0,"IX","B",811.97,.01)

"^DD",811.9,811.97,0,"NM","BASELINE AGE FINDINGS")

"^DD",811.9,811.97,0,"UP")
811.9
"^DD",811.9,811.97,.01,0)
REMINDER FREQUENCY^MFX^^0;1^S X=$$UP^XLFSTR(X) K:($L(X)>5)!($L(X)<2)!((X'?1N.N1"D")&(X'?1N.N1"M")&(X'?1N.N1"Y")) X
"^DD",811.9,811.97,.01,1,0)
^.1
"^DD",811.9,811.97,.01,1,1,0)
811.97^B
"^DD",811.9,811.97,.01,1,1,1)
S ^PXD(811.9,DA(1),7,"B",$E(X,1,30),DA)=""
"^DD",811.9,811.97,.01,1,1,2)
K ^PXD(811.9,DA(1),7,"B",$E(X,1,30),DA)
"^DD",811.9,811.97,.01,3)
Enter a number followed by D, M, or Y for day, month, or year.
"^DD",811.9,811.97,.01,21,0)
^.001^11^11^3000428^^^^
"^DD",811.9,811.97,.01,21,1,0)
This is the frequency to give the reminder. It is input as nD, nM, or
"^DD",811.9,811.97,.01,21,2,0)
nY, where D stands for days, M for months, Y for years, and n is a
"^DD",811.9,811.97,.01,21,3,0)
number. Thus, for a reminder that is to be given once a year, the
"^DD",811.9,811.97,.01,21,4,0)
values 365D, 12M, or 1Y would all work. There are two special reminder
"^DD",811.9,811.97,.01,21,5,0)
frequencies. The frequency 0Y means that the reminder is never to be
"^DD",811.9,811.97,.01,21,6,0)
given. This is used to create reminders that are given only to patients
"^DD",811.9,811.97,.01,21,7,0)
who have certain findings. For example the distributed VA-DIABETIC
"^DD",811.9,811.97,.01,21,8,0)
reminders are setup up so they are given only to patients who have the
"^DD",811.9,811.97,.01,21,9,0)
VA-DIABETIC taxonomy. This taxonomy can override the baseline frequency
"^DD",811.9,811.97,.01,21,10,0)
and change the reminder frequency to 1Y. The second special frequency is
"^DD",811.9,811.97,.01,21,11,0)
99Y. This is used for reminders that are to be given once in a lifetime.
"^DD",811.9,811.97,.01,"DT")
2970505
"^DD",811.9,811.97,1,0)
MINIMUM AGE^NJ3,0^^0;2^K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",811.9,811.97,1,3)
Enter the minimum age for this reminder frequency.
"^DD",811.9,811.97,1,21,0)
^.001^2^2^3000428^^^
"^DD",811.9,811.97,1,21,1,0)
This field specifies the minimum age for defining an age range
"^DD",811.9,811.97,1,21,2,0)
associated with a frequency. Leave it blank if there is no minimum age.
"^DD",811.9,811.97,1,"DT")
2960201
"^DD",811.9,811.97,2,0)
MAXIMUM AGE^NJ3,0^^0;3^K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",811.9,811.97,2,3)
Enter the maximum age for this reminder frequency.
"^DD",811.9,811.97,2,21,0)
^.001^2^2^3000428^^^
"^DD",811.9,811.97,2,21,1,0)
This field specifies the maximum age for defining an age range
"^DD",811.9,811.97,2,21,2,0)
associated with a frequency. Leave it blank if there is no maximum age.
"^DD",811.9,811.97,2,"DT")
2960201
"^DD",811.9,811.97,3,0)
AGE MATCH TEXT^811.973^^1;0
"^DD",811.9,811.97,3,21,0)
^^2^2^3000428^
"^DD",811.9,811.97,3,21,1,0)
This is the text that will be displayed in the Clinical Maintenance
"^DD",811.9,811.97,3,21,2,0)
component if the patient's age falls within the age range.
"^DD",811.9,811.97,4,0)
AGE NO MATCH TEXT^811.974^^2;0
"^DD",811.9,811.97,4,21,0)
^^2^2^3000428^
"^DD",811.9,811.97,4,21,1,0)
This is the text that will be displayed in the Clinical Maintenance
"^DD",811.9,811.97,4,21,2,0)
component if the patient's age does not fall in the age range.
"^DD",811.9,811.97,4,"DT")
2960201
"^DD",811.9,811.973,0)
AGE MATCH TEXT SUB-FIELD^^.01^1
"^DD",811.9,811.973,0,"DT")
2960201
"^DD",811.9,811.973,0,"NM","AGE MATCH TEXT")

"^DD",811.9,811.973,0,"UP")
811.97
"^DD",811.9,811.973,.01,0)
AGE MATCH TEXT^W^^0;1^Q
"^DD",811.9,811.973,.01,3)
Enter text to display for a match on age range.
"^DD",811.9,811.973,.01,"DT")
2960201
"^DD",811.9,811.974,0)
AGE NO MATCH TEXT SUB-FIELD^^.01^1
"^DD",811.9,811.974,0,"DT")
2960201
"^DD",811.9,811.974,0,"NM","AGE NO MATCH TEXT")

"^DD",811.9,811.974,0,"UP")
811.97
"^DD",811.9,811.974,.01,0)
AGE NO MATCH TEXT^W^^0;1^Q
"^DD",811.9,811.974,.01,3)
Enter the text to display for no match on age range.
"^DD",811.9,811.974,.01,"DT")
2960201
"^DIC",810.3,810.3,0)
REMINDER EXTRACT SUMMARY^810.3
"^DIC",810.3,810.3,0,"GL")
^PXRMXT(810.3,
"^DIC",810.3,810.3,"%",0)
^1.005^^
"^DIC",810.3,810.3,"%D",0)
^^85^85^3000829^
"^DIC",810.3,810.3,"%D",1,0)
This file stores findings found for a specific extract.  The extract
"^DIC",810.3,810.3,"%D",2,0)
entries are read only and may be selected by number or extract name. The
"^DIC",810.3,810.3,"%D",3,0)
extract entries are currently created when the LREPI ENHANCE MANUAL RUN
"^DIC",810.3,810.3,"%D",4,0)
option is run and when the automated LREPI NIGHTLY TASK option runs on the
"^DIC",810.3,810.3,"%D",5,0)
15th of each month.  Since this file may eventually be used for other
"^DIC",810.3,810.3,"%D",6,0)
extract processes, the REMINDER EXTRACT SUMMARY NAME is the combination of
"^DIC",810.3,810.3,"%D",7,0)
a unique abbreviation for the type of extract (e.g., LREPI), the YY/MM
"^DIC",810.3,810.3,"%D",8,0)
representing the ending year and month of the extract date range, and the
"^DIC",810.3,810.3,"%D",9,0)
run date in the format YYMMDD. The date and time of the run is an
"^DIC",810.3,810.3,"%D",10,0)
identifier.  The following is an example of lookup information.
"^DIC",810.3,810.3,"%D",11,0)
   160          LREPI 00/05 061500     Jun 15,2000@14:52:36
"^DIC",810.3,810.3,"%D",12,0)
   161          LREPI 00/06 073100     Jul 15,2000@14:55:40
"^DIC",810.3,810.3,"%D",13,0)
   162          LREPI 00/07 081500     Aug 15,2000@15:42:24
"^DIC",810.3,810.3,"%D",14,0)
   163          LREPI 00/05 082200     Aug 22,2000@02:44:54
"^DIC",810.3,810.3,"%D",15,0)
   164          LREPI 00/08 082500     Aug 25,2000@14:24:59
"^DIC",810.3,810.3,"%D",16,0)
 
"^DIC",810.3,810.3,"%D",17,0)
This file will maintain up to 36 extract entries.  After 36 entries, when
"^DIC",810.3,810.3,"%D",18,0)
a new entry is added, the oldest entry is deleted from the file.  Sites
"^DIC",810.3,810.3,"%D",19,0)
are asked to run the LREPI ENHANCE MANUAL RUN for months starting from
"^DIC",810.3,810.3,"%D",20,0)
10/01/98 through the 8/31/00. This will seed the Emerging Pathogens
"^DIC",810.3,810.3,"%D",21,0)
Initiative (EPI) database with risk assessment data.  Subsequent updates
"^DIC",810.3,810.3,"%D",22,0)
to the EPI database will automatically occur monthly via the LREPI NIGHTLY
"^DIC",810.3,810.3,"%D",23,0)
TASK option. Sites will have up to 36 months of extracts. This may be
"^DIC",810.3,810.3,"%D",24,0)
fewer than 36 months if the site runs extracts for the same month more
"^DIC",810.3,810.3,"%D",25,0)
than once.  Multiple extracts for the same month occur when the site runs
"^DIC",810.3,810.3,"%D",26,0)
the LREPI ENHANCE MANUAL RUN for a month to fix errors found by the
"^DIC",810.3,810.3,"%D",27,0)
receiving national database.  For LREPI runs, the receiving national
"^DIC",810.3,810.3,"%D",28,0)
database is the Emerging Pathogens Initiative (EPI) at the Austin
"^DIC",810.3,810.3,"%D",29,0)
Automation Center (AAC).  
"^DIC",810.3,810.3,"%D",30,0)
 
"^DIC",810.3,810.3,"%D",31,0)
An entry in the REMINDER EXTRACT SUMMARY file contains information that
"^DIC",810.3,810.3,"%D",32,0)
identifies the extract entry, the extract findings, and totals by finding
"^DIC",810.3,810.3,"%D",33,0)
item.  The extract entry information includes the number, extract name,
"^DIC",810.3,810.3,"%D",34,0)
beginning and ending extract dates, person who ran the extract option,
"^DIC",810.3,810.3,"%D",35,0)
task number, total patients evaluated and total patients with findings.
"^DIC",810.3,810.3,"%D",36,0)
The extract findings include a number (for ease of selecting a finding
"^DIC",810.3,810.3,"%D",37,0)
item), patient, reminder term, value, alternate id, finding date, related
"^DIC",810.3,810.3,"%D",38,0)
visit (if PCE data), encounter type (I/O), result, value, drug and DSUP
"^DIC",810.3,810.3,"%D",39,0)
(days supply).  These extract finding fields are returned by the reminder
"^DIC",810.3,810.3,"%D",40,0)
evaluation logic.  The result, value, and drug are all free text fields
"^DIC",810.3,810.3,"%D",41,0)
without specific input and output transforms because the data comes from
"^DIC",810.3,810.3,"%D",42,0)
the source VistA data it came from, with read only access on this file.
"^DIC",810.3,810.3,"%D",43,0)
The alternate id is specific to the LREPI extracts.  A number value in the
"^DIC",810.3,810.3,"%D",44,0)
alternate id field indicates that the finding is for Hepatitis C risk
"^DIC",810.3,810.3,"%D",45,0)
assessment.  The alternate id will be used for statistical purposes in the
"^DIC",810.3,810.3,"%D",46,0)
EPI database.     
"^DIC",810.3,810.3,"%D",47,0)
 
"^DIC",810.3,810.3,"%D",48,0)
The flow of LREPI processing is as follows:
"^DIC",810.3,810.3,"%D",49,0)
1) LREPI gathers Lab Search/Extract patients and findings
"^DIC",810.3,810.3,"%D",50,0)
2) LREPI gets all patients and findings from a reminder extract evaluation
"^DIC",810.3,810.3,"%D",51,0)
process given the extract date range and reminder list.  (The reminder
"^DIC",810.3,810.3,"%D",52,0)
list is from a new LREPI file 69.51).
"^DIC",810.3,810.3,"%D",53,0)
2.1) The reminder extract evaluation logi uses medications mapped to
"^DIC",810.3,810.3,"%D",54,0)
reminder terms in the VA-NATIONAL EPI RX EXTRACT reminder, and the extract
"^DIC",810.3,810.3,"%D",55,0)
date range, to call new inpatient pharmacy and outpatient pharmacy extract
"^DIC",810.3,810.3,"%D",56,0)
logic to get patient pharmacy findings.
"^DIC",810.3,810.3,"%D",57,0)
2.2) The reminder extract evaluation uses the remaining reminder criteria
"^DIC",810.3,810.3,"%D",58,0)
to build a list of patients with finding from the following files in the
"^DIC",810.3,810.3,"%D",59,0)
extract period:
"^DIC",810.3,810.3,"%D",60,0)
  LAB DATA           (#63)
"^DIC",810.3,810.3,"%D",61,0)
  V POV              (#9000010.07)
"^DIC",810.3,810.3,"%D",62,0)
  V HEALTH FACTORS   (#9000010.23)
"^DIC",810.3,810.3,"%D",63,0)
  V PATIENT ED       (#9000010.16)
"^DIC",810.3,810.3,"%D",64,0)
  V EXAM             (#9000010.13)
"^DIC",810.3,810.3,"%D",65,0)
2.3) The list of patients is used to evaluate the VA-HEP C RISK ASSESSMENT
"^DIC",810.3,810.3,"%D",66,0)
and VA-NATIONAL EPI LAB EXTRACT reminders.  The findings within the
"^DIC",810.3,810.3,"%D",67,0)
extract date range are added as Extract Findings in the REMINDER EXTRACT
"^DIC",810.3,810.3,"%D",68,0)
SUMMARY file and then returned to the Lab Search/Extract process.
"^DIC",810.3,810.3,"%D",69,0)
3) The Lab Search/Extract process uses the final list of patients and
"^DIC",810.3,810.3,"%D",70,0)
findings to create HL7 messages.  Each reminder finding for a patient is
"^DIC",810.3,810.3,"%D",71,0)
used to create a DSP segment.  Pharmacy findings contain both a DSP and
"^DIC",810.3,810.3,"%D",72,0)
ZXE segment.  
"^DIC",810.3,810.3,"%D",73,0)
4) When the AAC processes the messages, error messages are returned for
"^DIC",810.3,810.3,"%D",74,0)
each message with the SSN related to the erroneous data. Note: Messages
"^DIC",810.3,810.3,"%D",75,0)
with errors are not added to the EPI database.  When erroneous data is
"^DIC",810.3,810.3,"%D",76,0)
fixed at the site, the LREPI ENHANCE MANUAL RUN is run for the month with
"^DIC",810.3,810.3,"%D",77,0)
the error to transmit the entire months data again.  The new data for each
"^DIC",810.3,810.3,"%D",78,0)
patient and finding date replaces the old patient and finding dates data.
"^DIC",810.3,810.3,"%D",79,0)
5) Two new options are available on the REMINDER REPORTS menu that provide
"^DIC",810.3,810.3,"%D",80,0)
total counts by finding item, as well as a detailed list by finding item
"^DIC",810.3,810.3,"%D",81,0)
and SSN.
"^DIC",810.3,810.3,"%D",82,0)
6) Sites are encouraged to provide FileMan read-only access to the
"^DIC",810.3,810.3,"%D",83,0)
REMINDER EXTRACT SUMMARY file (810.3) for those who validate the extract
"^DIC",810.3,810.3,"%D",84,0)
data, the Hepatitis C implementation team, and Hepatitis C Coordinators
"^DIC",810.3,810.3,"%D",85,0)
responsible for monitoring Hepatitis C activities at each site.
"^DIC",810.3,"B","REMINDER EXTRACT SUMMARY",810.3)

"^DIC",811.5,811.5,0)
REMINDER TERM^811.5
"^DIC",811.5,811.5,0,"GL")
^PXRMD(811.5,
"^DIC",811.5,811.5,"%",0)
^1.005^^0
"^DIC",811.5,811.5,"%D",0)
^^18^18^3000609^
"^DIC",811.5,811.5,"%D",1,0)
This file defines terms that may be used within reminder definitions.
"^DIC",811.5,811.5,"%D",2,0)
Reminder terms are useful for national reminders involving findings that
"^DIC",811.5,811.5,"%D",3,0)
are based on local file definitions (e.g., laboratory test, drug file,
"^DIC",811.5,811.5,"%D",4,0)
radiology). National reminder terms have limited editing capabilities
"^DIC",811.5,811.5,"%D",5,0)
which allow sites to map their local finding items to a term. Sites may
"^DIC",811.5,811.5,"%D",6,0)
create local reminder terms, providing an easy way to group a variety of
"^DIC",811.5,811.5,"%D",7,0)
findings and treat them the same way in a reminder.
"^DIC",811.5,811.5,"%D",8,0)
 
"^DIC",811.5,811.5,"%D",9,0)
When a reminder with terms is evaluated, the finding items mapped to the
"^DIC",811.5,811.5,"%D",10,0)
term are used to find the patient data, but the patient data is reported
"^DIC",811.5,811.5,"%D",11,0)
based on the term the data is mapped to. The most recent true finding will
"^DIC",811.5,811.5,"%D",12,0)
be used to represent the term.
"^DIC",811.5,811.5,"%D",13,0)
 
"^DIC",811.5,811.5,"%D",14,0)
This file contains a combination of national, local, and VISN level terms.
"^DIC",811.5,811.5,"%D",15,0)
Any local terms are assigned an internal entry number prefixed with your
"^DIC",811.5,811.5,"%D",16,0)
site number.  Nationally distributed entries will have a Term Type of
"^DIC",811.5,811.5,"%D",17,0)
"National". Any terms created at your site should have a Term Type of
"^DIC",811.5,811.5,"%D",18,0)
"Local".  Terms created for VISN use will have a Term Type of "VISN"
"^DIC",811.5,"B","REMINDER TERM",811.5)

"^DIC",811.9,811.9,0)
REMINDER DEFINITION^811.9
"^DIC",811.9,811.9,0,"GL")
^PXD(811.9,
"^DIC",811.9,811.9,"%",0)
^1.005^1^1
"^DIC",811.9,811.9,"%",1,0)
GMTS
"^DIC",811.9,811.9,"%","B","GMTS",1)

"^DIC",811.9,811.9,"%D",0)
^^9^9^3000609^^^^
"^DIC",811.9,811.9,"%D",1,0)
This file contains Clinical Reminder definitions. For a detailed
"^DIC",811.9,811.9,"%D",2,0)
description of the contents of this file see the Clinical Reminders
"^DIC",811.9,811.9,"%D",3,0)
Manager Manual. Additional information may be found at the Clinical
"^DIC",811.9,811.9,"%D",4,0)
Reminders web site: http//vista.med.va.gov/reminders
"^DIC",811.9,811.9,"%D",5,0)

"^DIC",811.9,811.9,"%D",6,0)
This file contains a combination of nationally distributed and local
"^DIC",811.9,811.9,"%D",7,0)
entries. Any local entries are assigned an internal entry number
"^DIC",811.9,811.9,"%D",8,0)
prefixed with your site number. Nationally distributed entries have
"^DIC",811.9,811.9,"%D",9,0)
their name prefixed with VA-. Local entry names cannot start with VA-.
"^DIC",811.9,"B","REMINDER DEFINITION",811.9)

**INSTALL NAME**
LR*5.2*260
"BLD",2015,0)
LR*5.2*260^LAB SERVICE^0^3000828^y
"BLD",2015,1,0)
^^232^232^3000828^
"BLD",2015,1,1,0)
This patch adds two new segments to the HL7 transmissions generated by
"BLD",2015,1,2,0)
 the Emerging Pathogens Initiative (EPI) software, clears fifteen 
"BLD",2015,1,3,0)
 NOIS calls, and eliminates the National Center for Health Promotion
"BLD",2015,1,4,0)
 (NCH) data transmissions.
"BLD",2015,1,5,0)
 
"BLD",2015,1,6,0)
 The new segments are:
"BLD",2015,1,7,0)
 ABBREVIATED NAME: ZXE       FULL NAME: Pharmacy Prescription Order
"BLD",2015,1,8,0)
                   This segment will report Pharmacy data consisting of
"BLD",2015,1,9,0)
                   the Drug Name, NDC, and Days Supply.
"BLD",2015,1,10,0)
 ABBREVIATED NAME: DSP       FULL NAME: Display Data
"BLD",2015,1,11,0)
                   This segment will report Clinical Reminders Hepatitis
"BLD",2015,1,12,0)
                   C Risk Assessment Data.
"BLD",2015,1,13,0)
 
"BLD",2015,1,14,0)
This patch also includes the new LREPI REMINDER LINK file (#69.51).
"BLD",2015,1,15,0)
 This file points to the REMINDER DEFINITION (#811.9) used by the 
"BLD",2015,1,16,0)
 Emerging Pathogens Initiative (EPI). Entries in the new LREPI REMINDER
"BLD",2015,1,17,0)
 LINK file are used to determine which Clinical Reminders will be used to
"BLD",2015,1,18,0)
 generate data for the Hepatitis C database.
"BLD",2015,1,19,0)
 
"BLD",2015,1,20,0)
 The NOIS calls addressed are:
"BLD",2015,1,21,0)
        1. ALX-0400-71108
"BLD",2015,1,22,0)
           ALB-0100-52818
"BLD",2015,1,23,0)
           BHH-0999-40058
"BLD",2015,1,24,0)
           NCH-0599-42202
"BLD",2015,1,25,0)
           WAS-0499-21751
"BLD",2015,1,26,0)
           MRN-0299-40846
"BLD",2015,1,27,0)
           CIN-0199-42742
"BLD",2015,1,28,0)
           ALB-1198-50947
"BLD",2015,1,29,0)
           BRK-1198-10546
"BLD",2015,1,30,0)
           SUX-0599-40961
"BLD",2015,1,31,0)
           PUG-0399-52619
"BLD",2015,1,32,0)
           MEM-0199-72168
"BLD",2015,1,33,0)
                  Several sites have reported receiving a 
"BLD",2015,1,34,0)
                  SEARCH+3^LREPI4 error during the nightly runs.  This
"BLD",2015,1,35,0)
                  is due to an incomplete PTF record.  The software now
"BLD",2015,1,36,0)
                  checks the validity of the reference before attempting
"BLD",2015,1,37,0)
                  to access the record.
"BLD",2015,1,38,0)
        2. LAS-1199-61337
"BLD",2015,1,39,0)
           WPB-1298-30488
"BLD",2015,1,40,0)
                  These NOIS calls report an error in the way the site 
"BLD",2015,1,41,0)
                  number is obtained.  An older method of gathering the
"BLD",2015,1,42,0)
                  site number was used.  This has been replaced with a
"BLD",2015,1,43,0)
                  FileMan reference as allowed in DBIA #10090.
"BLD",2015,1,44,0)
        3. STC-1098-41570
"BLD",2015,1,45,0)
                  The NCH transmissions will be eliminated with the
"BLD",2015,1,46,0)
                  release of this patch.
"BLD",2015,1,47,0)
 
"BLD",2015,1,48,0)
  Requesting Site: Washington, DC
"BLD",2015,1,49,0)
                   Cincinnati, OH
"BLD",2015,1,50,0)
  
"BLD",2015,1,51,0)
     Test Site(s): Cincinnati, OH
"BLD",2015,1,52,0)
                   West Palm Beach, FL
"BLD",2015,1,53,0)
 
"BLD",2015,1,54,0)
   Reference NOIS: ALX-0400-71108
"BLD",2015,1,55,0)
                   ALB-0100-52818
"BLD",2015,1,56,0)
                   BHH-0999-40058
"BLD",2015,1,57,0)
                   NCH-0599-42202
"BLD",2015,1,58,0)
                   WAS-0499-21751
"BLD",2015,1,59,0)
                   MRN-0299-40846
"BLD",2015,1,60,0)
                   CIN-0199-42742
"BLD",2015,1,61,0)
                   ALB-1198-50947
"BLD",2015,1,62,0)
                   BRK-1198-10546
"BLD",2015,1,63,0)
                   SUX-0599-40961
"BLD",2015,1,64,0)
                   PUG-0399-52619
"BLD",2015,1,65,0)
                   MEM-0199-72168
"BLD",2015,1,66,0)
                   LAS-1199-61337
"BLD",2015,1,67,0)
                   WPB-1298-30488
"BLD",2015,1,68,0)
                   STC-1098-41570
"BLD",2015,1,69,0)
 
"BLD",2015,1,70,0)
The daily National Center for Health Promotion (NCH) data transmissions
"BLD",2015,1,71,0)
 are no longer necessary and the NCHP program office has requested that
"BLD",2015,1,72,0)
 we terminate the transmissions.  This will be done during the post-init
"BLD",2015,1,73,0)
 phase and does not require any user intervention.
"BLD",2015,1,74,0)
 
"BLD",2015,1,75,0)
 This patch to the Laboratory package does not contain any changes to the
"BLD",2015,1,76,0)
 VISTA BLOOD BANK Software as defined by VHA DIRECTIVE 99-053 titled VISTA
"BLD",2015,1,77,0)
 BLOOD BANK SOFTWARE.
"BLD",2015,1,78,0)
 
"BLD",2015,1,79,0)
 
"BLD",2015,1,80,0)
ROUTINE SUMMARY
"BLD",2015,1,81,0)
 ===============
"BLD",2015,1,82,0)
 The following is a list of routines included in this patch.  The second
"BLD",2015,1,83,0)
 line of each routine now looks like:
"BLD",2015,1,84,0)
  
"BLD",2015,1,85,0)
 <tab>;;5.2;LAB SERVICE;**[patch list]**;;Sep 27, 1994
"BLD",2015,1,86,0)
  
"BLD",2015,1,87,0)
         CHECK^XTSUMBLD Results
"BLD",2015,1,88,0)
  
"BLD",2015,1,89,0)
 Routine Name    Before Patch     After Patch   Patch List
"BLD",2015,1,90,0)
 ------------    ------------     -----------   ----------
"BLD",2015,1,91,0)
  
"BLD",2015,1,92,0)
LR260                NEW           10238627       260
"BLD",2015,1,93,0)
LREPI              11741568        14217525       132,175,260
"BLD",2015,1,94,0)
LREPI1             10215540        10654552       132,157,175,260
"BLD",2015,1,95,0)
LREPI1A            5536163         5834647        175,260
"BLD",2015,1,96,0)
LREPI2             5729687         7199135        132,157,175,242,260
"BLD",2015,1,97,0)
LREPI3             3617464         5462995        132,175,260
"BLD",2015,1,98,0)
LREPI4             1715994         1903453        132,175,260
"BLD",2015,1,99,0)
LREPIAK            2866307         3640656        175,260
"BLD",2015,1,100,0)
LREPIPH              NEW           5818757        260
"BLD",2015,1,101,0)
LREPIRP            6008472         5973015        132,157,175,260
"BLD",2015,1,102,0)
LREPISRV             NEW           12552990       260
"BLD",2015,1,103,0)
 
"BLD",2015,1,104,0)
  
"BLD",2015,1,105,0)
Installation Instructions:
"BLD",2015,1,106,0)
==========================
"BLD",2015,1,107,0)
  
"BLD",2015,1,108,0)
 
"BLD",2015,1,109,0)
   NOTE: This KIDS install does not place any options out of service
"BLD",2015,1,110,0)
         during the install and no user options are affected.
"BLD",2015,1,111,0)
         If KIDS prompts:
"BLD",2015,1,112,0)
   
"BLD",2015,1,113,0)
         "Want KIDS to Rebuild Menu Trees Upon Completion of
"BLD",2015,1,114,0)
          Install? YES// NO"
"BLD",2015,1,115,0)
         "Want KIDS to INHIBIT LOGONs during the install? YES// NO"
"BLD",2015,1,116,0)
         "Want to DISABLE Scheduled Options, Menu Options, and Protocols?
"BLD",2015,1,117,0)
          YES// NO"
"BLD",2015,1,118,0)
  
"BLD",2015,1,119,0)
         The site should answer "NO" to all three questions.
"BLD",2015,1,120,0)
             Note: You may not receive all three prompts at your site.  
"BLD",2015,1,121,0)
   
"BLD",2015,1,122,0)
          1. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu.
"BLD",2015,1,123,0)
             This option will load the KIDS package in this message onto
"BLD",2015,1,124,0)
             your system.
"BLD",2015,1,125,0)
  
"BLD",2015,1,126,0)
          2. Review your mapped set.  If the routines are mapped, they
"BLD",2015,1,127,0)
             should be removed from the mapped set at this time.
"BLD",2015,1,128,0)
  
"BLD",2015,1,129,0)
          3. The patch has now been loaded into a Transport global on
"BLD",2015,1,130,0)
             your system. You now need to use KIDS to install the
"BLD",2015,1,131,0)
             Transport global.
"BLD",2015,1,132,0)
  
"BLD",2015,1,133,0)
             On the KIDS menu, under the 'Installation' menu, use the 
"BLD",2015,1,134,0)
             following options:
"BLD",2015,1,135,0)
  
"BLD",2015,1,136,0)
                 Print Transport Global
"BLD",2015,1,137,0)
                 Compare Transport Global to Current System
"BLD",2015,1,138,0)
                 Verify Checksums in Transport Global
"BLD",2015,1,139,0)
                 Backup a Transport Global
"BLD",2015,1,140,0)
  
"BLD",2015,1,141,0)
          4. Users may remain on the system, installation may be done at
"BLD",2015,1,142,0)
             any time.
"BLD",2015,1,143,0)
  
"BLD",2015,1,144,0)
          5. No options need to be placed out of service.
"BLD",2015,1,145,0)
  
"BLD",2015,1,146,0)
          6. Installation time is less than 2 minutes during off peak
"BLD",2015,1,147,0)
             hours and less than 5 minutes during peak hours.
"BLD",2015,1,148,0)
  
"BLD",2015,1,149,0)
          7. Installation of this patch requires no additional memory
"BLD",2015,1,150,0)
             space.
"BLD",2015,1,151,0)
  
"BLD",2015,1,152,0)
          8. From the 'Installation Menu' of the KIDS menu, run the
"BLD",2015,1,153,0)
             option 'Install Package(s)' Select the package 'LR*5.2*260'
"BLD",2015,1,154,0)
             and proceed with the install.
"BLD",2015,1,155,0)
  
"BLD",2015,1,156,0)
          9. The post-init routine, LR260, will perform the three final
"BLD",2015,1,157,0)
             automated functions in the installation.  These steps are:
"BLD",2015,1,158,0)
 
"BLD",2015,1,159,0)
                   A. Three entries will be added to the LREPI REMINDER
"BLD",2015,1,160,0)
                      LINK (#69.51) file.  These are "VA-NATIONAL EPI DB
"BLD",2015,1,161,0)
                      UPDATE", "VA-HEP C RISK ASSESSMENT", and 
"BLD",2015,1,162,0)
                      "VA-NATIONAL EPI RX EXTRACT".
"BLD",2015,1,163,0)
                   B. Three entries will be added to the LAB 
"BLD",2015,1,164,0)
                      SEARCH/EXTRACT (#69.5) file.  These are "HEPATITIS C
"BLD",2015,1,165,0)
                      ANTIBODY NEG", "HEPATITIS A ANTIBODY POS", and
"BLD",2015,1,166,0)
                      "HEPATITIS B POS".  Please refer to the
"BLD",2015,1,167,0)
                      LR*5.2*260 TECHNICAL/USERS MANUAL for instructions
"BLD",2015,1,168,0)
                      on adding tests to these entries.
"BLD",2015,1,169,0)
                   C. The NCH CHOLESTEROL and NCH PAP SMEAR entries will
"BLD",2015,1,170,0)
                      be inactivated in the LAB SEARCH/EXTRACT (#69.5)
"BLD",2015,1,171,0)
                      file.
"BLD",2015,1,172,0)
 
"BLD",2015,1,173,0)
             You will be notified after each step if any problems were
"BLD",2015,1,174,0)
             encountered.
"BLD",2015,1,175,0)
 
"BLD",2015,1,176,0)
         10. The post-init routine, LR260, will be automatically deleted
"BLD",2015,1,177,0)
             when the installation has completed.
"BLD",2015,1,178,0)
 
"BLD",2015,1,179,0)
         12. If any routines were unmapped as part of step 2, they should
"BLD",2015,1,180,0)
             be returned to the mapped set once the installation has run
"BLD",2015,1,181,0)
             to completion.
"BLD",2015,1,182,0)
 
"BLD",2015,1,183,0)
         13. LABORATORY SEARCH/EXTRACT PATCH LR*5.2*260 HEPATITIS EMERGING
"BLD",2015,1,184,0)
             PATHOGENS INITIATIVE (EPI) TECHNICAL AND USER GUIDE in
"BLD",2015,1,185,0)
             Portable Document Format (LR_260TUG.PDF) is provided with
"BLD",2015,1,186,0)
             this patch. Please refer to this documentation for details
"BLD",2015,1,187,0)
             and specific instructions. The patch description does not
"BLD",2015,1,188,0)
             include ALL implementation considerations or complete setup
"BLD",2015,1,189,0)
             instructions.
"BLD",2015,1,190,0)
 
"BLD",2015,1,191,0)
This document is available on the following Office of Information Field
"BLD",2015,1,192,0)
             Offices' ANONYMOUS.SOFTWARE directories.
"BLD",2015,1,193,0)
 
"BLD",2015,1,194,0)
       OI Field Office             FTP Address        Directory
"BLD",2015,1,195,0)
       ================================================================
"BLD",2015,1,196,0)
       Albany                      152.127.1.5        ANONYMOUS.SOFTWARE
"BLD",2015,1,197,0)
       Hines                       152.129.1.110      ANONYMOUS.SOFTWARE
"BLD",2015,1,198,0)
       Salt Lake City              152.131.2.1        ANONYMOUS.SOFTWARE
"BLD",2015,1,199,0)
 
"BLD",2015,1,200,0)
 
"BLD",2015,1,201,0)
         14. Please do not do this until specifically requested to do so.
"BLD",2015,1,202,0)
             After the patch installation and set up has been completed,
"BLD",2015,1,203,0)
             the data for your site will be validated by the EPI program
"BLD",2015,1,204,0)
             office.  At this time you will be asked to add 
"BLD",2015,1,205,0)
             XXX@Q-EPI.VA.GOV to the MEMBERS - REMOTE field (#12) of the
"BLD",2015,1,206,0)
             MAIL GROUP file (#3.8) for the EPI mail group.
"BLD",2015,1,207,0)
 
"BLD",2015,1,208,0)
     VA FileMan 22.0
"BLD",2015,1,209,0)
  
"BLD",2015,1,210,0)
  
"BLD",2015,1,211,0)
     Select OPTION: 1  ENTER OR EDIT FILE ENTRIES
"BLD",2015,1,212,0)
  
"BLD",2015,1,213,0)
  
"BLD",2015,1,214,0)
  
"BLD",2015,1,215,0)
     INPUT TO WHAT FILE: MAIL GROUP// 
"BLD",2015,1,216,0)
     EDIT WHICH FIELD: ALL// MEMBERS - REMOTE    (multiple)
"BLD",2015,1,217,0)
        EDIT WHICH MEMBERS - REMOTE SUB-FIELD: ALL// 
"BLD",2015,1,218,0)
     THEN EDIT FIELD: 
"BLD",2015,1,219,0)
  
"BLD",2015,1,220,0)
  
"BLD",2015,1,221,0)
     Select MAIL GROUP NAME: EPI
"BLD",2015,1,222,0)
          1   EPI  
"BLD",2015,1,223,0)
          2   EPI-REPORT  
"BLD",2015,1,224,0)
     CHOOSE 1-2: 1  EPI
"BLD",2015,1,225,0)
     Select REMOTE MEMBER: S.HL V16 SERVER@DEV// XXX@Q-EPI.VA.GOV
"BLD",2015,1,226,0)
       Are you adding 'XXX@Q-EPI.VA.GOV' as a new REMOTE MEMBER (the
"BLD",2015,1,227,0)
     2ND for this MAIL GROUP)? No// Y
"BLD",2015,1,228,0)
       (Yes)
"BLD",2015,1,229,0)
     Select REMOTE MEMBER: 
"BLD",2015,1,230,0)
  
"BLD",2015,1,231,0)
  
"BLD",2015,1,232,0)
     Select MAIL GROUP NAME: 
"BLD",2015,4,0)
^9.64PA^69.51^1
"BLD",2015,4,69.51,0)
69.51
"BLD",2015,4,69.51,222)
y^y^f^^^^n
"BLD",2015,4,"B",69.51,69.51)

"BLD",2015,"INID")
^y
"BLD",2015,"INIT")
LR260
"BLD",2015,"KRN",0)
^9.67PA^19^17
"BLD",2015,"KRN",.4,0)
.4
"BLD",2015,"KRN",.401,0)
.401
"BLD",2015,"KRN",.402,0)
.402
"BLD",2015,"KRN",.403,0)
.403
"BLD",2015,"KRN",.5,0)
.5
"BLD",2015,"KRN",.84,0)
.84
"BLD",2015,"KRN",3.6,0)
3.6
"BLD",2015,"KRN",3.8,0)
3.8
"BLD",2015,"KRN",9.2,0)
9.2
"BLD",2015,"KRN",9.8,0)
9.8
"BLD",2015,"KRN",9.8,"NM",0)
^9.68A^11^11
"BLD",2015,"KRN",9.8,"NM",1,0)
LREPI^^0^B67781591
"BLD",2015,"KRN",9.8,"NM",2,0)
LREPI1^^0^B49465482
"BLD",2015,"KRN",9.8,"NM",3,0)
LREPI1A^^0^B18417132
"BLD",2015,"KRN",9.8,"NM",4,0)
LREPI2^^0^B24648813
"BLD",2015,"KRN",9.8,"NM",5,0)
LREPI3^^0^B13134340
"BLD",2015,"KRN",9.8,"NM",6,0)
LREPI4^^0^B3184026
"BLD",2015,"KRN",9.8,"NM",7,0)
LREPIAK^^0^B9171569
"BLD",2015,"KRN",9.8,"NM",8,0)
LREPIPH^^0^B9292693
"BLD",2015,"KRN",9.8,"NM",9,0)
LREPIRP^^0^B20241479
"BLD",2015,"KRN",9.8,"NM",10,0)
LREPISRV^^0^B20851844
"BLD",2015,"KRN",9.8,"NM",11,0)
LR260^^0^B18301352
"BLD",2015,"KRN",9.8,"NM","B","LR260",11)

"BLD",2015,"KRN",9.8,"NM","B","LREPI",1)

"BLD",2015,"KRN",9.8,"NM","B","LREPI1",2)

"BLD",2015,"KRN",9.8,"NM","B","LREPI1A",3)

"BLD",2015,"KRN",9.8,"NM","B","LREPI2",4)

"BLD",2015,"KRN",9.8,"NM","B","LREPI3",5)

"BLD",2015,"KRN",9.8,"NM","B","LREPI4",6)

"BLD",2015,"KRN",9.8,"NM","B","LREPIAK",7)

"BLD",2015,"KRN",9.8,"NM","B","LREPIPH",8)

"BLD",2015,"KRN",9.8,"NM","B","LREPIRP",9)

"BLD",2015,"KRN",9.8,"NM","B","LREPISRV",10)

"BLD",2015,"KRN",19,0)
19
"BLD",2015,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",2015,"KRN",19,"NM",1,0)
LREPISERVER^^0
"BLD",2015,"KRN",19,"NM","B","LREPISERVER",1)

"BLD",2015,"KRN",19.1,0)
19.1
"BLD",2015,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",2015,"KRN",101,0)
101
"BLD",2015,"KRN",409.61,0)
409.61
"BLD",2015,"KRN",771,0)
771
"BLD",2015,"KRN",870,0)
870
"BLD",2015,"KRN",8994,0)
8994
"BLD",2015,"KRN","B",.4,.4)

"BLD",2015,"KRN","B",.401,.401)

"BLD",2015,"KRN","B",.402,.402)

"BLD",2015,"KRN","B",.403,.403)

"BLD",2015,"KRN","B",.5,.5)

"BLD",2015,"KRN","B",.84,.84)

"BLD",2015,"KRN","B",3.6,3.6)

"BLD",2015,"KRN","B",3.8,3.8)

"BLD",2015,"KRN","B",9.2,9.2)

"BLD",2015,"KRN","B",9.8,9.8)

"BLD",2015,"KRN","B",19,19)

"BLD",2015,"KRN","B",19.1,19.1)

"BLD",2015,"KRN","B",101,101)

"BLD",2015,"KRN","B",409.61,409.61)

"BLD",2015,"KRN","B",771,771)

"BLD",2015,"KRN","B",870,870)

"BLD",2015,"KRN","B",8994,8994)

"BLD",2015,"QUES",0)
^9.62^^
"BLD",2015,"REQB",0)
^9.611^3^3
"BLD",2015,"REQB",1,0)
LR*5.2*175^2
"BLD",2015,"REQB",2,0)
LR*5.2*242^2
"BLD",2015,"REQB",3,0)
PXRM*1.5*1^2
"BLD",2015,"REQB","B","LR*5.2*175",1)

"BLD",2015,"REQB","B","LR*5.2*242",2)

"BLD",2015,"REQB","B","PXRM*1.5*1",3)

"FIA",69.51)
LREPI REMINDER LINK
"FIA",69.51,0)
^LAB(69.51,
"FIA",69.51,0,0)
69.51P
"FIA",69.51,0,1)
y^y^f^^^^n
"FIA",69.51,0,10)

"FIA",69.51,0,11)

"FIA",69.51,0,"RLRO")

"FIA",69.51,0,"VR")
5.2^LR
"FIA",69.51,69.51)
0
"INIT")
LR260
"KRN",19,11847,-1)
0^1
"KRN",19,11847,0)
LREPISERVER^LREPI Data Server^^S^^^^^^^^
"KRN",19,11847,25)
LREPISRV
"KRN",19,11847,220)
^R^^^^E
"KRN",19,11847,"U")
LREPI DATA SERVER
"MBREQ")
0
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",26,-1)
1^1
"PKG",26,0)
LAB SERVICE^LR^CORE LAB SYSTEM
"PKG",26,20,0)
^9.402P^1^1
"PKG",26,20,1,0)
2^^LRXDRPT
"PKG",26,20,1,1)

"PKG",26,20,"B",2,1)

"PKG",26,22,0)
^9.49I^1^1
"PKG",26,22,1,0)
5.2^2940927^2950528
"PKG",26,22,1,"PAH",1,0)
260^3000828
"PKG",26,22,1,"PAH",1,1,0)
^^232^232^3000828
"PKG",26,22,1,"PAH",1,1,1,0)
This patch adds two new segments to the HL7 transmissions generated by
"PKG",26,22,1,"PAH",1,1,2,0)
 the Emerging Pathogens Initiative (EPI) software, clears fifteen 
"PKG",26,22,1,"PAH",1,1,3,0)
 NOIS calls, and eliminates the National Center for Health Promotion
"PKG",26,22,1,"PAH",1,1,4,0)
 (NCH) data transmissions.
"PKG",26,22,1,"PAH",1,1,5,0)
 
"PKG",26,22,1,"PAH",1,1,6,0)
 The new segments are:
"PKG",26,22,1,"PAH",1,1,7,0)
 ABBREVIATED NAME: ZXE       FULL NAME: Pharmacy Prescription Order
"PKG",26,22,1,"PAH",1,1,8,0)
                   This segment will report Pharmacy data consisting of
"PKG",26,22,1,"PAH",1,1,9,0)
                   the Drug Name, NDC, and Days Supply.
"PKG",26,22,1,"PAH",1,1,10,0)
 ABBREVIATED NAME: DSP       FULL NAME: Display Data
"PKG",26,22,1,"PAH",1,1,11,0)
                   This segment will report Clinical Reminders Hepatitis
"PKG",26,22,1,"PAH",1,1,12,0)
                   C Risk Assessment Data.
"PKG",26,22,1,"PAH",1,1,13,0)
 
"PKG",26,22,1,"PAH",1,1,14,0)
This patch also includes the new LREPI REMINDER LINK file (#69.51).
"PKG",26,22,1,"PAH",1,1,15,0)
 This file points to the REMINDER DEFINITION (#811.9) used by the 
"PKG",26,22,1,"PAH",1,1,16,0)
 Emerging Pathogens Initiative (EPI). Entries in the new LREPI REMINDER
"PKG",26,22,1,"PAH",1,1,17,0)
 LINK file are used to determine which Clinical Reminders will be used to
"PKG",26,22,1,"PAH",1,1,18,0)
 generate data for the Hepatitis C database.
"PKG",26,22,1,"PAH",1,1,19,0)
 
"PKG",26,22,1,"PAH",1,1,20,0)
 The NOIS calls addressed are:
"PKG",26,22,1,"PAH",1,1,21,0)
        1. ALX-0400-71108
"PKG",26,22,1,"PAH",1,1,22,0)
           ALB-0100-52818
"PKG",26,22,1,"PAH",1,1,23,0)
           BHH-0999-40058
"PKG",26,22,1,"PAH",1,1,24,0)
           NCH-0599-42202
"PKG",26,22,1,"PAH",1,1,25,0)
           WAS-0499-21751
"PKG",26,22,1,"PAH",1,1,26,0)
           MRN-0299-40846
"PKG",26,22,1,"PAH",1,1,27,0)
           CIN-0199-42742
"PKG",26,22,1,"PAH",1,1,28,0)
           ALB-1198-50947
"PKG",26,22,1,"PAH",1,1,29,0)
           BRK-1198-10546
"PKG",26,22,1,"PAH",1,1,30,0)
           SUX-0599-40961
"PKG",26,22,1,"PAH",1,1,31,0)
           PUG-0399-52619
"PKG",26,22,1,"PAH",1,1,32,0)
           MEM-0199-72168
"PKG",26,22,1,"PAH",1,1,33,0)
                  Several sites have reported receiving a 
"PKG",26,22,1,"PAH",1,1,34,0)
                  SEARCH+3^LREPI4 error during the nightly runs.  This
"PKG",26,22,1,"PAH",1,1,35,0)
                  is due to an incomplete PTF record.  The software now
"PKG",26,22,1,"PAH",1,1,36,0)
                  checks the validity of the reference before attempting
"PKG",26,22,1,"PAH",1,1,37,0)
                  to access the record.
"PKG",26,22,1,"PAH",1,1,38,0)
        2. LAS-1199-61337
"PKG",26,22,1,"PAH",1,1,39,0)
           WPB-1298-30488
"PKG",26,22,1,"PAH",1,1,40,0)
                  These NOIS calls report an error in the way the site 
"PKG",26,22,1,"PAH",1,1,41,0)
                  number is obtained.  An older method of gathering the
"PKG",26,22,1,"PAH",1,1,42,0)
                  site number was used.  This has been replaced with a
"PKG",26,22,1,"PAH",1,1,43,0)
                  FileMan reference as allowed in DBIA #10090.
"PKG",26,22,1,"PAH",1,1,44,0)
        3. STC-1098-41570
"PKG",26,22,1,"PAH",1,1,45,0)
                  The NCH transmissions will be eliminated with the
"PKG",26,22,1,"PAH",1,1,46,0)
                  release of this patch.
"PKG",26,22,1,"PAH",1,1,47,0)
 
"PKG",26,22,1,"PAH",1,1,48,0)
  Requesting Site: Washington, DC
"PKG",26,22,1,"PAH",1,1,49,0)
                   Cincinnati, OH
"PKG",26,22,1,"PAH",1,1,50,0)
  
"PKG",26,22,1,"PAH",1,1,51,0)
     Test Site(s): Cincinnati, OH
"PKG",26,22,1,"PAH",1,1,52,0)
                   West Palm Beach, FL
"PKG",26,22,1,"PAH",1,1,53,0)
 
"PKG",26,22,1,"PAH",1,1,54,0)
   Reference NOIS: ALX-0400-71108
"PKG",26,22,1,"PAH",1,1,55,0)
                   ALB-0100-52818
"PKG",26,22,1,"PAH",1,1,56,0)
                   BHH-0999-40058
"PKG",26,22,1,"PAH",1,1,57,0)
                   NCH-0599-42202
"PKG",26,22,1,"PAH",1,1,58,0)
                   WAS-0499-21751
"PKG",26,22,1,"PAH",1,1,59,0)
                   MRN-0299-40846
"PKG",26,22,1,"PAH",1,1,60,0)
                   CIN-0199-42742
"PKG",26,22,1,"PAH",1,1,61,0)
                   ALB-1198-50947
"PKG",26,22,1,"PAH",1,1,62,0)
                   BRK-1198-10546
"PKG",26,22,1,"PAH",1,1,63,0)
                   SUX-0599-40961
"PKG",26,22,1,"PAH",1,1,64,0)
                   PUG-0399-52619
"PKG",26,22,1,"PAH",1,1,65,0)
                   MEM-0199-72168
"PKG",26,22,1,"PAH",1,1,66,0)
                   LAS-1199-61337
"PKG",26,22,1,"PAH",1,1,67,0)
                   WPB-1298-30488
"PKG",26,22,1,"PAH",1,1,68,0)
                   STC-1098-41570
"PKG",26,22,1,"PAH",1,1,69,0)
 
"PKG",26,22,1,"PAH",1,1,70,0)
The daily National Center for Health Promotion (NCH) data transmissions
"PKG",26,22,1,"PAH",1,1,71,0)
 are no longer necessary and the NCHP program office has requested that
"PKG",26,22,1,"PAH",1,1,72,0)
 we terminate the transmissions.  This will be done during the post-init
"PKG",26,22,1,"PAH",1,1,73,0)
 phase and does not require any user intervention.
"PKG",26,22,1,"PAH",1,1,74,0)
 
"PKG",26,22,1,"PAH",1,1,75,0)
 This patch to the Laboratory package does not contain any changes to the
"PKG",26,22,1,"PAH",1,1,76,0)
 VISTA BLOOD BANK Software as defined by VHA DIRECTIVE 99-053 titled VISTA
"PKG",26,22,1,"PAH",1,1,77,0)
 BLOOD BANK SOFTWARE.
"PKG",26,22,1,"PAH",1,1,78,0)
 
"PKG",26,22,1,"PAH",1,1,79,0)
 
"PKG",26,22,1,"PAH",1,1,80,0)
ROUTINE SUMMARY
"PKG",26,22,1,"PAH",1,1,81,0)
 ===============
"PKG",26,22,1,"PAH",1,1,82,0)
 The following is a list of routines included in this patch.  The second
"PKG",26,22,1,"PAH",1,1,83,0)
 line of each routine now looks like:
"PKG",26,22,1,"PAH",1,1,84,0)
  
"PKG",26,22,1,"PAH",1,1,85,0)
 <tab>;;5.2;LAB SERVICE;**[patch list]**;;Sep 27, 1994
"PKG",26,22,1,"PAH",1,1,86,0)
  
"PKG",26,22,1,"PAH",1,1,87,0)
         CHECK^XTSUMBLD Results
"PKG",26,22,1,"PAH",1,1,88,0)
  
"PKG",26,22,1,"PAH",1,1,89,0)
 Routine Name    Before Patch     After Patch   Patch List
"PKG",26,22,1,"PAH",1,1,90,0)
 ------------    ------------     -----------   ----------
"PKG",26,22,1,"PAH",1,1,91,0)
  
"PKG",26,22,1,"PAH",1,1,92,0)
LR260                NEW           10238627       260
"PKG",26,22,1,"PAH",1,1,93,0)
LREPI              11741568        14217525       132,175,260
"PKG",26,22,1,"PAH",1,1,94,0)
LREPI1             10215540        10654552       132,157,175,260
"PKG",26,22,1,"PAH",1,1,95,0)
LREPI1A            5536163         5834647        175,260
"PKG",26,22,1,"PAH",1,1,96,0)
LREPI2             5729687         7199135        132,157,175,242,260
"PKG",26,22,1,"PAH",1,1,97,0)
LREPI3             3617464         5462995        132,175,260
"PKG",26,22,1,"PAH",1,1,98,0)
LREPI4             1715994         1903453        132,175,260
"PKG",26,22,1,"PAH",1,1,99,0)
LREPIAK            2866307         3640656        175,260
"PKG",26,22,1,"PAH",1,1,100,0)
LREPIPH              NEW           5818757        260
"PKG",26,22,1,"PAH",1,1,101,0)
LREPIRP            6008472         5973015        132,157,175,260
"PKG",26,22,1,"PAH",1,1,102,0)
LREPISRV             NEW           12552990       260
"PKG",26,22,1,"PAH",1,1,103,0)
 
"PKG",26,22,1,"PAH",1,1,104,0)
  
"PKG",26,22,1,"PAH",1,1,105,0)
Installation Instructions:
"PKG",26,22,1,"PAH",1,1,106,0)
==========================
"PKG",26,22,1,"PAH",1,1,107,0)
  
"PKG",26,22,1,"PAH",1,1,108,0)
 
"PKG",26,22,1,"PAH",1,1,109,0)
   NOTE: This KIDS install does not place any options out of service
"PKG",26,22,1,"PAH",1,1,110,0)
         during the install and no user options are affected.
"PKG",26,22,1,"PAH",1,1,111,0)
         If KIDS prompts:
"PKG",26,22,1,"PAH",1,1,112,0)
   
"PKG",26,22,1,"PAH",1,1,113,0)
         "Want KIDS to Rebuild Menu Trees Upon Completion of
"PKG",26,22,1,"PAH",1,1,114,0)
          Install? YES// NO"
"PKG",26,22,1,"PAH",1,1,115,0)
         "Want KIDS to INHIBIT LOGONs during the install? YES// NO"
"PKG",26,22,1,"PAH",1,1,116,0)
         "Want to DISABLE Scheduled Options, Menu Options, and Protocols?
"PKG",26,22,1,"PAH",1,1,117,0)
          YES// NO"
"PKG",26,22,1,"PAH",1,1,118,0)
  
"PKG",26,22,1,"PAH",1,1,119,0)
         The site should answer "NO" to all three questions.
"PKG",26,22,1,"PAH",1,1,120,0)
             Note: You may not receive all three prompts at your site.  
"PKG",26,22,1,"PAH",1,1,121,0)
   
"PKG",26,22,1,"PAH",1,1,122,0)
          1. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu.
"PKG",26,22,1,"PAH",1,1,123,0)
             This option will load the KIDS package in this message onto
"PKG",26,22,1,"PAH",1,1,124,0)
             your system.
"PKG",26,22,1,"PAH",1,1,125,0)
  
"PKG",26,22,1,"PAH",1,1,126,0)
          2. Review your mapped set.  If the routines are mapped, they
"PKG",26,22,1,"PAH",1,1,127,0)
             should be removed from the mapped set at this time.
"PKG",26,22,1,"PAH",1,1,128,0)
  
"PKG",26,22,1,"PAH",1,1,129,0)
          3. The patch has now been loaded into a Transport global on
"PKG",26,22,1,"PAH",1,1,130,0)
             your system. You now need to use KIDS to install the
"PKG",26,22,1,"PAH",1,1,131,0)
             Transport global.
"PKG",26,22,1,"PAH",1,1,132,0)
  
"PKG",26,22,1,"PAH",1,1,133,0)
             On the KIDS menu, under the 'Installation' menu, use the 
"PKG",26,22,1,"PAH",1,1,134,0)
             following options:
"PKG",26,22,1,"PAH",1,1,135,0)
  
"PKG",26,22,1,"PAH",1,1,136,0)
                 Print Transport Global
"PKG",26,22,1,"PAH",1,1,137,0)
                 Compare Transport Global to Current System
"PKG",26,22,1,"PAH",1,1,138,0)
                 Verify Checksums in Transport Global
"PKG",26,22,1,"PAH",1,1,139,0)
                 Backup a Transport Global
"PKG",26,22,1,"PAH",1,1,140,0)
  
"PKG",26,22,1,"PAH",1,1,141,0)
          4. Users may remain on the system, installation may be done at
"PKG",26,22,1,"PAH",1,1,142,0)
             any time.
"PKG",26,22,1,"PAH",1,1,143,0)
  
"PKG",26,22,1,"PAH",1,1,144,0)
          5. No options need to be placed out of service.
"PKG",26,22,1,"PAH",1,1,145,0)
  
"PKG",26,22,1,"PAH",1,1,146,0)
          6. Installation time is less than 2 minutes during off peak
"PKG",26,22,1,"PAH",1,1,147,0)
             hours and less than 5 minutes during peak hours.
"PKG",26,22,1,"PAH",1,1,148,0)
  
"PKG",26,22,1,"PAH",1,1,149,0)
          7. Installation of this patch requires no additional memory
"PKG",26,22,1,"PAH",1,1,150,0)
             space.
"PKG",26,22,1,"PAH",1,1,151,0)
  
"PKG",26,22,1,"PAH",1,1,152,0)
          8. From the 'Installation Menu' of the KIDS menu, run the
"PKG",26,22,1,"PAH",1,1,153,0)
             option 'Install Package(s)' Select the package 'LR*5.2*260'
"PKG",26,22,1,"PAH",1,1,154,0)
             and proceed with the install.
"PKG",26,22,1,"PAH",1,1,155,0)
  
"PKG",26,22,1,"PAH",1,1,156,0)
          9. The post-init routine, LR260, will perform the three final
"PKG",26,22,1,"PAH",1,1,157,0)
             automated functions in the installation.  These steps are:
"PKG",26,22,1,"PAH",1,1,158,0)
 
"PKG",26,22,1,"PAH",1,1,159,0)
                   A. Three entries will be added to the LREPI REMINDER
"PKG",26,22,1,"PAH",1,1,160,0)
                      LINK (#69.51) file.  These are "VA-NATIONAL EPI DB
"PKG",26,22,1,"PAH",1,1,161,0)
                      UPDATE", "VA-HEP C RISK ASSESSMENT", and 
"PKG",26,22,1,"PAH",1,1,162,0)
                      "VA-NATIONAL EPI RX EXTRACT".
"PKG",26,22,1,"PAH",1,1,163,0)
                   B. Three entries will be added to the LAB 
"PKG",26,22,1,"PAH",1,1,164,0)
                      SEARCH/EXTRACT (#69.5) file.  These are "HEPATITIS C
"PKG",26,22,1,"PAH",1,1,165,0)
                      ANTIBODY NEG", "HEPATITIS A ANTIBODY POS", and
"PKG",26,22,1,"PAH",1,1,166,0)
                      "HEPATITIS B POS".  Please refer to the
"PKG",26,22,1,"PAH",1,1,167,0)
                      LR*5.2*260 TECHNICAL/USERS MANUAL for instructions
"PKG",26,22,1,"PAH",1,1,168,0)
                      on adding tests to these entries.
"PKG",26,22,1,"PAH",1,1,169,0)
                   C. The NCH CHOLESTEROL and NCH PAP SMEAR entries will
"PKG",26,22,1,"PAH",1,1,170,0)
                      be inactivated in the LAB SEARCH/EXTRACT (#69.5)
"PKG",26,22,1,"PAH",1,1,171,0)
                      file.
"PKG",26,22,1,"PAH",1,1,172,0)
 
"PKG",26,22,1,"PAH",1,1,173,0)
             You will be notified after each step if any problems were
"PKG",26,22,1,"PAH",1,1,174,0)
             encountered.
"PKG",26,22,1,"PAH",1,1,175,0)
 
"PKG",26,22,1,"PAH",1,1,176,0)
         10. The post-init routine, LR260, will be automatically deleted
"PKG",26,22,1,"PAH",1,1,177,0)
             when the installation has completed.
"PKG",26,22,1,"PAH",1,1,178,0)
 
"PKG",26,22,1,"PAH",1,1,179,0)
         12. If any routines were unmapped as part of step 2, they should
"PKG",26,22,1,"PAH",1,1,180,0)
             be returned to the mapped set once the installation has run
"PKG",26,22,1,"PAH",1,1,181,0)
             to completion.
"PKG",26,22,1,"PAH",1,1,182,0)
 
"PKG",26,22,1,"PAH",1,1,183,0)
         13. LABORATORY SEARCH/EXTRACT PATCH LR*5.2*260 HEPATITIS EMERGING
"PKG",26,22,1,"PAH",1,1,184,0)
             PATHOGENS INITIATIVE (EPI) TECHNICAL AND USER GUIDE in
"PKG",26,22,1,"PAH",1,1,185,0)
             Portable Document Format (LR_260TUG.PDF) is provided with
"PKG",26,22,1,"PAH",1,1,186,0)
             this patch. Please refer to this documentation for details
"PKG",26,22,1,"PAH",1,1,187,0)
             and specific instructions. The patch description does not
"PKG",26,22,1,"PAH",1,1,188,0)
             include ALL implementation considerations or complete setup
"PKG",26,22,1,"PAH",1,1,189,0)
             instructions.
"PKG",26,22,1,"PAH",1,1,190,0)
 
"PKG",26,22,1,"PAH",1,1,191,0)
This document is available on the following Office of Information Field
"PKG",26,22,1,"PAH",1,1,192,0)
             Offices' ANONYMOUS.SOFTWARE directories.
"PKG",26,22,1,"PAH",1,1,193,0)
 
"PKG",26,22,1,"PAH",1,1,194,0)
       OI Field Office             FTP Address        Directory
"PKG",26,22,1,"PAH",1,1,195,0)
       ================================================================
"PKG",26,22,1,"PAH",1,1,196,0)
       Albany                      152.127.1.5        ANONYMOUS.SOFTWARE
"PKG",26,22,1,"PAH",1,1,197,0)
       Hines                       152.129.1.110      ANONYMOUS.SOFTWARE
"PKG",26,22,1,"PAH",1,1,198,0)
       Salt Lake City              152.131.2.1        ANONYMOUS.SOFTWARE
"PKG",26,22,1,"PAH",1,1,199,0)
 
"PKG",26,22,1,"PAH",1,1,200,0)
 
"PKG",26,22,1,"PAH",1,1,201,0)
         14. Please do not do this until specifically requested to do so.
"PKG",26,22,1,"PAH",1,1,202,0)
             After the patch installation and set up has been completed,
"PKG",26,22,1,"PAH",1,1,203,0)
             the data for your site will be validated by the EPI program
"PKG",26,22,1,"PAH",1,1,204,0)
             office.  At this time you will be asked to add 
"PKG",26,22,1,"PAH",1,1,205,0)
             XXX@Q-EPI.VA.GOV to the MEMBERS - REMOTE field (#12) of the
"PKG",26,22,1,"PAH",1,1,206,0)
             MAIL GROUP file (#3.8) for the EPI mail group.
"PKG",26,22,1,"PAH",1,1,207,0)
 
"PKG",26,22,1,"PAH",1,1,208,0)
     VA FileMan 22.0
"PKG",26,22,1,"PAH",1,1,209,0)
  
"PKG",26,22,1,"PAH",1,1,210,0)
  
"PKG",26,22,1,"PAH",1,1,211,0)
     Select OPTION: 1  ENTER OR EDIT FILE ENTRIES
"PKG",26,22,1,"PAH",1,1,212,0)
  
"PKG",26,22,1,"PAH",1,1,213,0)
  
"PKG",26,22,1,"PAH",1,1,214,0)
  
"PKG",26,22,1,"PAH",1,1,215,0)
     INPUT TO WHAT FILE: MAIL GROUP// 
"PKG",26,22,1,"PAH",1,1,216,0)
     EDIT WHICH FIELD: ALL// MEMBERS - REMOTE    (multiple)
"PKG",26,22,1,"PAH",1,1,217,0)
        EDIT WHICH MEMBERS - REMOTE SUB-FIELD: ALL// 
"PKG",26,22,1,"PAH",1,1,218,0)
     THEN EDIT FIELD: 
"PKG",26,22,1,"PAH",1,1,219,0)
  
"PKG",26,22,1,"PAH",1,1,220,0)
  
"PKG",26,22,1,"PAH",1,1,221,0)
     Select MAIL GROUP NAME: EPI
"PKG",26,22,1,"PAH",1,1,222,0)
          1   EPI  
"PKG",26,22,1,"PAH",1,1,223,0)
          2   EPI-REPORT  
"PKG",26,22,1,"PAH",1,1,224,0)
     CHOOSE 1-2: 1  EPI
"PKG",26,22,1,"PAH",1,1,225,0)
     Select REMOTE MEMBER: S.HL V16 SERVER@DEV// XXX@Q-EPI.VA.GOV
"PKG",26,22,1,"PAH",1,1,226,0)
       Are you adding 'XXX@Q-EPI.VA.GOV' as a new REMOTE MEMBER (the
"PKG",26,22,1,"PAH",1,1,227,0)
     2ND for this MAIL GROUP)? No// Y
"PKG",26,22,1,"PAH",1,1,228,0)
       (Yes)
"PKG",26,22,1,"PAH",1,1,229,0)
     Select REMOTE MEMBER: 
"PKG",26,22,1,"PAH",1,1,230,0)
  
"PKG",26,22,1,"PAH",1,1,231,0)
  
"PKG",26,22,1,"PAH",1,1,232,0)
     Select MAIL GROUP NAME: 
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
11
"RTN","LR260")
0^11^B18301352
"RTN","LR260",1,0)
LR260 ;DALOI/RLM-PATCH 260 POST-INIT ROUTINE ;1/1/98
"RTN","LR260",2,0)
 ;;5.2;LAB SERVICE;**260**;Sep 27, 1994
"RTN","LR260",3,0)
 K ERROR,FDA,DIERR
"RTN","LR260",4,0)
 D VAL^DIE(69.51,"+1,",.01,,"VA-HEP C RISK ASSESSMENT",.LRANS)
"RTN","LR260",5,0)
 S FDA(42,69.51,"+1,",.01)=LRANS
"RTN","LR260",6,0)
 I $D(^LAB(69.51,"B",LRANS)) W !,"VA-HEP C RISK ASSESSMENT entry exists in 69.51 and will not be duplicated."
"RTN","LR260",7,0)
 I '$D(^LAB(69.51,"B",LRANS)) D UPDATE^DIE("","FDA(42)","","ERROR")
"RTN","LR260",8,0)
 I $D(ERROR) W !,"VA-HEP C RISK ASSESSMENT not added to file 69.51.",!,"Please log a NOIS call and request assistance."
"RTN","LR260",9,0)
 ;
"RTN","LR260",10,0)
 K ERROR,FDA,DIERR
"RTN","LR260",11,0)
 D VAL^DIE(69.51,"+1,",.01,,"VA-NATIONAL EPI LAB EXTRACT",.LRANS)
"RTN","LR260",12,0)
 S FDA(42,69.51,"+1,",.01)=LRANS
"RTN","LR260",13,0)
 I $D(^LAB(69.51,"B",LRANS)) W !,"VA-NATIONAL EPI LAB EXTRACT entry exists in 69.51 and will not be duplicated."
"RTN","LR260",14,0)
 I '$D(^LAB(69.51,"B",LRANS)) D UPDATE^DIE("","FDA(42)","","ERROR")
"RTN","LR260",15,0)
 I $D(ERROR) W !,"VA-NATIONAL EPI LAB EXTRACT not added to file 69.51.",!,"Please log a NOIS call and request assistance."
"RTN","LR260",16,0)
 ;
"RTN","LR260",17,0)
 K ERROR,FDA,DIERR
"RTN","LR260",18,0)
 D VAL^DIE(69.51,"+1,",.01,,"VA-NATIONAL EPI RX EXTRACT",.LRANS)
"RTN","LR260",19,0)
 S FDA(42,69.51,"+1,",.01)=LRANS
"RTN","LR260",20,0)
 I $D(^LAB(69.51,"B",LRANS)) W !,"VA-NATIONAL EPI RX EXTRACT entry exists in 69.51 and will not be duplicated."
"RTN","LR260",21,0)
 I '$D(^LAB(69.51,"B",LRANS)) D UPDATE^DIE("","FDA(42)","","ERROR")
"RTN","LR260",22,0)
 I $D(ERROR) W !,"VA-NATIONAL VA-NATIONAL EPI RX EXTRACT not added to file 69.51.",!,"Please log a NOIS call and request assistance."
"RTN","LR260",23,0)
 ;
"RTN","LR260",24,0)
 K ERROR,FDA,DIERR
"RTN","LR260",25,0)
 D VAL^DIE(69.5,"+1,",12,,"LREPI",.LRANS)
"RTN","LR260",26,0)
 S FDA(42,69.5,"+1,",12)=LRANS ;Protocol
"RTN","LR260",27,0)
 S FDA(42,69.5,"+1,",.01)="HEPATITIS C ANTIBODY NEG" ;Name
"RTN","LR260",28,0)
 S FDA(42,69.5,"+1,",.05)=15 ;Sequence Number
"RTN","LR260",29,0)
 S FDA(42,69.5,"+1,",1)=0 ;Active (0=yes)
"RTN","LR260",30,0)
 S FDA(42,69.5,"+1,",10.5)=15 ;Lag Days
"RTN","LR260",31,0)
 S FDA(42,69.5,"+1,",10)="M" ;Cycle
"RTN","LR260",32,0)
 S FDA(42,69.5,"+1,",13)=1 ;Follow PTF
"RTN","LR260",33,0)
 I $D(^LAB(69.5,"B","HEPATITIS C ANTIBODY NEG")) W !,"HEPATITIS C ANTIBODY NEG entry exists in 69.5 and will not be duplicated."
"RTN","LR260",34,0)
 I '$D(^LAB(69.5,"B","HEPATITIS C ANTIBODY NEG")) D UPDATE^DIE("","FDA(42)","","ERROR")
"RTN","LR260",35,0)
 I $D(ERROR) W !,"HEPATITIS C ANTIBODY NEG not added to file 69.5.",!,"Please log a NOIS call and request assistance."
"RTN","LR260",36,0)
 ;
"RTN","LR260",37,0)
 K ERROR,FDA,DIERR
"RTN","LR260",38,0)
 D VAL^DIE(69.5,"+1,",12,,"LREPI",.LRANS)
"RTN","LR260",39,0)
 S FDA(42,69.5,"+1,",12)=LRANS ;Protocol
"RTN","LR260",40,0)
 S FDA(42,69.5,"+1,",.01)="HEPATITIS A ANTIBODY POS" ;Name
"RTN","LR260",41,0)
 S FDA(42,69.5,"+1,",.05)=16 ;Sequence Number
"RTN","LR260",42,0)
 S FDA(42,69.5,"+1,",1)=0 ;Active (0=yes)
"RTN","LR260",43,0)
 S FDA(42,69.5,"+1,",10.5)=15 ;Lag Days
"RTN","LR260",44,0)
 S FDA(42,69.5,"+1,",10)="M" ;Cycle
"RTN","LR260",45,0)
 S FDA(42,69.5,"+1,",13)=1 ;Follow PTF
"RTN","LR260",46,0)
 I $D(^LAB(69.5,"B","HEPATITIS A ANTIBODY POS")) W !,"HEPATITIS A ANTIBODY POS entry exists in 69.5 and will not be duplicated."
"RTN","LR260",47,0)
 I '$D(^LAB(69.5,"B","HEPATITIS A ANTIBODY POS")) D UPDATE^DIE("","FDA(42)","","ERROR")
"RTN","LR260",48,0)
 I $D(ERROR) W !,"HEPATITIS A ANTIBODY POS not added to file 69.5.",!,"Please log a NOIS call and request assistance."
"RTN","LR260",49,0)
 ;
"RTN","LR260",50,0)
 K ERROR,FDA,DIERR
"RTN","LR260",51,0)
 D VAL^DIE(69.5,"+1,",12,,"LREPI",.LRANS)
"RTN","LR260",52,0)
 S FDA(42,69.5,"+1,",12)=LRANS ;Protocol
"RTN","LR260",53,0)
 S FDA(42,69.5,"+1,",.01)="HEPATITIS B POS" ;Name
"RTN","LR260",54,0)
 S FDA(42,69.5,"+1,",.05)=17 ;Sequence Number
"RTN","LR260",55,0)
 S FDA(42,69.5,"+1,",1)=0 ;Active (0=yes)
"RTN","LR260",56,0)
 S FDA(42,69.5,"+1,",10.5)=15 ;Lag Days
"RTN","LR260",57,0)
 S FDA(42,69.5,"+1,",10)="M" ;Cycle
"RTN","LR260",58,0)
 S FDA(42,69.5,"+1,",13)=1 ;Follow PTF
"RTN","LR260",59,0)
 I $D(^LAB(69.5,"B","HEPATITIS B POS")) W !,"HEPATITIS B ANTIBODY POS entry exists in 69.51 and will not be duplicated."
"RTN","LR260",60,0)
 I '$D(^LAB(69.5,"B","HEPATITIS B POS")) D UPDATE^DIE("","FDA(42)","","ERROR")
"RTN","LR260",61,0)
 I $D(ERROR) W !,"HEPATITIS B POS not added to file 69.5.",!,"Please log a NOIS call and request assistance."
"RTN","LR260",62,0)
 K FDA,ERROR,DIERR ;
"RTN","LR260",63,0)
 ;I $$FIND1^DIC(3.812,","_$$FIND1^DIC(3.8,,"XM","EPI")_",","M","XXX@Q-EPI",,,"ERROR") W !,"XXX@Q-EPI.MED.VA.GOV already exists in the EPI mailgroup and will not be duplicated."
"RTN","LR260",64,0)
 ;I '$$FIND1^DIC(3.812,","_$$FIND1^DIC(3.8,,"XM","EPI")_",","M","XXX@Q-EPI",,,"ERROR") D
"RTN","LR260",65,0)
 ; . D FIND^DIC(3.8,,,"O","EPI",1,,,,"RESULT","ERROR")
"RTN","LR260",66,0)
 ; . S LRMG=RESULT("DILIST",2,1) D
"RTN","LR260",67,0)
 ; . . S FDA(42,3.812,"+2,"_LRMG_",",.01)="XXX@Q-EPI.MED.VA.GOV"
"RTN","LR260",68,0)
 ; . . D UPDATE^DIE("","FDA(42)","","ERROR")
"RTN","LR260",69,0)
 ;I $D(ERROR) W !,"XXX@Q-EPI.MED.VA.GOV not added to EPI MailGroup.",!,"Please log a NOIS call and request assistance."
"RTN","LR260",70,0)
 K FDA,ERROR,DIERR
"RTN","LR260",71,0)
 S LRIEN=$O(^LAB(69.5,"B","NCH PAP SMEAR",""))
"RTN","LR260",72,0)
 I LRIEN S $P(^LAB(69.5,LRIEN,0),"^",2)=1
"RTN","LR260",73,0)
 S LRIEN=$O(^LAB(69.5,"B","NCH CHOLESTEROL",""))
"RTN","LR260",74,0)
 I LRIEN S $P(^LAB(69.5,LRIEN,0),"^",2)=1
"RTN","LR260",75,0)
 K DIERR,ERROR,FDA,LRANS,LRIEN,LRMG,RESULT
"RTN","LR260",76,0)
ZEOR ;LR260
"RTN","LREPI")
0^1^B67781591
"RTN","LREPI",1,0)
LREPI ;DALOI/SED-EMERGING PATHOGENS SEARCH ;5/1/98
"RTN","LREPI",2,0)
 ;;5.2;LAB SERVICE;**132,175,260**;Sep 27, 1994
"RTN","LREPI",3,0)
 ; Reference to ^DGPT supported by IA #418
"RTN","LREPI",4,0)
 ; Reference to ^ICD9 supported by IA #10082
"RTN","LREPI",5,0)
 ; Reference to ^ORD supported by IA #872
"RTN","LREPI",6,0)
 ; Reference to PATS^PXRMXX supported by IA #3134
"RTN","LREPI",7,0)
TEST S LRRPS=3000501,LRRPE=3000531,LRRTYPE=1
"RTN","LREPI",8,0)
 S LREPI(2)="",LREPI(17)="",LREPI(18)="",LREPI(19)=""
"RTN","LREPI",9,0)
 ;S D0=0 F  S D0=$O(^LAB(69.5,D0)) Q:+D0'>0  D
"RTN","LREPI",10,0)
 .Q:$P(^LAB(69.5,D0,0),U,2)="1"
"RTN","LREPI",11,0)
 .Q:$P(^LAB(69.5,D0,0),U,7)=""
"RTN","LREPI",12,0)
 .Q:'$D(^ORD(101,$P(^LAB(69.5,D0,0),U,7),0))
"RTN","LREPI",13,0)
 .S LREPI(D0)=""
"RTN","LREPI",14,0)
 S LRBEG=9999999-(LRRPE+.9),LREND=9999999-LRRPS+.999999
"RTN","LREPI",15,0)
EN ;
"RTN","LREPI",16,0)
 ;
"RTN","LREPI",17,0)
INIT ;Set up search criteria
"RTN","LREPI",18,0)
 S LRBEG=9999999-(LRRPE+.9),LREND=9999999-LRRPS+.999999
"RTN","LREPI",19,0)
 K ^TMP($J),^TMP("HLS",$J)
"RTN","LREPI",20,0)
 S D0=0 F  S D0=$O(LREPI(D0)) Q:+D0'>0  D
"RTN","LREPI",21,0)
 .S ^TMP($J,$P(^LAB(69.5,D0,0),U,7))=""
"RTN","LREPI",22,0)
 .S:$P(^LAB(69.5,D0,0),U,8)=1 ^TMP($J,"LREPI",D0)=""
"RTN","LREPI",23,0)
 .S LRPROT=$P(^LAB(69.5,D0,0),U,7)
"RTN","LREPI",24,0)
 .S D1=0 F  S D1=$O(^LAB(69.5,D0,1,D1)) Q:+D1'>0  D
"RTN","LREPI",25,0)
 ..S TST=$P(^LAB(69.5,D0,1,D1,0),U)
"RTN","LREPI",26,0)
 ..Q:'$D(^LAB(60,TST,0))
"RTN","LREPI",27,0)
 ..Q:$P(^LAB(60,TST,0),U,4)=""
"RTN","LREPI",28,0)
 ..I $P(^LAB(60,TST,0),U,4)="CH" D
"RTN","LREPI",29,0)
 ...Q:$P(^LAB(60,TST,0),U,5)=""
"RTN","LREPI",30,0)
 ...S ^TMP($J,"T",TST,D0)=""
"RTN","LREPI",31,0)
 ...S ^TMP($J,"TPROT",TST,LRPROT)=""
"RTN","LREPI",32,0)
 ...S LRIND=$P(^LAB(69.5,D0,1,D1,0),U,2,3)
"RTN","LREPI",33,0)
 ...S ^TMP($J,$P(^LAB(60,TST,0),U,4),TST)=$P(^LAB(60,TST,0),U,5)_U_LRIND
"RTN","LREPI",34,0)
 ..I $P(^LAB(60,TST,0),U,4)="CY" D
"RTN","LREPI",35,0)
 ...S ^TMP($J,"T",TST,D0)=""
"RTN","LREPI",36,0)
 ...S ^TMP($J,$P(^LAB(60,TST,0),U,4),TST)=""
"RTN","LREPI",37,0)
 .S D1=0 F  S D1=$O(^LAB(69.5,D0,2,D1)) Q:+D1'>0  S ^TMP($J,"E",$P(^LAB(69.5,D0,2,D1,0),U),D0)=""
"RTN","LREPI",38,0)
 .S D1=0 F  S D1=$O(^LAB(69.5,D0,9,D1)) Q:+D1'>0  S ^TMP($J,"SNO",$P(^LAB(69.5,D0,9,D1,0),U),D0)=""
"RTN","LREPI",39,0)
 .S D1=0 F  S D1=$O(^LAB(69.5,D0,3,D1)) Q:+D1'>0  S ^TMP($J,"ICD",$P(^LAB(69.5,D0,3,D1,0),U),D0)=""
"RTN","LREPI",40,0)
 K D0,D1,TST,LRIND
"RTN","LREPI",41,0)
 I $D(^TMP($J,"LREPI")) D SEARCH^LREPI4
"RTN","LREPI",42,0)
 I $D(^TMP($J,"ICD")) D PTF
"RTN","LREPI",43,0)
LAB63 ;Search file 63 for lab data
"RTN","LREPI",44,0)
 K LRIND
"RTN","LREPI",45,0)
 S LRDFN=0 F  S LRDFN=$O(^LR(LRDFN)) Q:+LRDFN'>0  D
"RTN","LREPI",46,0)
 .Q:'$D(^LR(LRDFN,0))
"RTN","LREPI",47,0)
 .Q:$P(^LR(LRDFN,0),U,2)'=2
"RTN","LREPI",48,0)
 .S LRPAT=$P(^LR(LRDFN,0),U,3)
"RTN","LREPI",49,0)
 .I $D(^TMP($J,"CH")) D CH
"RTN","LREPI",50,0)
 .I $D(^TMP($J,"CY")) D CYTST^LREPICY
"RTN","LREPI",51,0)
 .I $D(^TMP($J,"E")) D MI
"RTN","LREPI",52,0)
 .;I '$D(^TMP($J,"ICD"))&($D(^TMP($J,"SNO"))) D CY^LREPICY
"RTN","LREPI",53,0)
 .I $D(^TMP($J,"SNO")) D CY^LREPICY
"RTN","LREPI",54,0)
 ;Retrieve patient list from Clinical Reminders
"RTN","LREPI",55,0)
 S LRPROTX=$O(^ORD(101,"B","LREPI",""))
"RTN","LREPI",56,0)
 I LRPROTX]"" S LRSRXX="",LRSRGO=0 F  S LRSRXX=$O(LREPI(LRSRXX)) Q:'LRSRXX  I $G(^LAB(69.5,LRSRXX,0))["HEPATITIS" D  Q
"RTN","LREPI",57,0)
  . D PATS^PXRMXX(LRRPS,LRRPE,"LREPISRCH")
"RTN","LREPI",58,0)
  . S EPISRCH=0 F  S EPISRCH=$O(^TMP("LREPISRCH",$J,EPISRCH)) Q:'EPISRCH  D
"RTN","LREPI",59,0)
  . . S LRENCDT=$P(^TMP("LREPISRCH",$J,EPISRCH),"^") Q:'LRENCDT
"RTN","LREPI",60,0)
  . . Q:$D(^TMP($J,LRPROTX,EPISRCH,LRENCDT))  ;Encounter date already exists, don't update
"RTN","LREPI",61,0)
  . . S ^TMP($J,LRPROTX,EPISRCH,LRENCDT)=$P(^TMP("LREPISRCH",$J,EPISRCH),"^",2)
"RTN","LREPI",62,0)
 D ^LREPI2
"RTN","LREPI",63,0)
EXIT ;EXIT
"RTN","LREPI",64,0)
 S D0=0
"RTN","LREPI",65,0)
 I $G(LRRTYPE)=0 F  S D0=$O(LREPI(D0)) Q:+D0'>0  D
"RTN","LREPI",66,0)
 .S $P(^LAB(69.5,D0,0),U,4)=DT
"RTN","LREPI",67,0)
 K LREPI,DFN,CNT,DA,DIE,DR,DQ,HL,ENTRY,ENDT,ENC,FD,HLECH,HLFS,HLN,HLQ
"RTN","LREPI",68,0)
 K DDER,D0,HLRST,HLSAN,LRBEG,LRCNT,LRCS,LRDATE,LRDFN,LREFG,LRENCDT
"RTN","LREPI",69,0)
 K LREND,LRETND,LRHL7,LRINV,LRINVD,LRITN,LRND,LRNL,LRNLT,LRNTE,LROBR
"RTN","LREPI",70,0)
 K LRPAT,LRPFG,LRPID,LRPROT,LRPV1,LRRPE,LRRPS,LRRTYPE,LRTND,LRTNM,MSG
"RTN","LREPI",71,0)
 K MSGCNT,PTF,RR,SEG,SP,STDT,TST,UN,TSTNM,VAERR,X,XCNP,XMDUZ,XMZ,ZTSK
"RTN","LREPI",72,0)
 K AF,D,DI,LRENT,LRIND,LRPATH,OV,LRENDT,ADMDT,EPISITE,EPISRCH
"RTN","LREPI",73,0)
 K LR31799Z,LRANTI,LRCHK,LRIC,LRIEN,LRIPT,LRMG,LRMGN,LRNX,LRO,LROK
"RTN","LREPI",74,0)
 K LROVR,LRPCNT,LRPTOT,LRSI,LRSITE,LRCYSP,LRDIS,LRDISI,LRIC,LRICD
"RTN","LREPI",75,0)
 K LRICDI,LRIEN,LRIPT,LRMG,LRMGN,LRMOR,LRMORI,LRMSG,PXRMITEM
"RTN","LREPI",76,0)
 K LRSNM,LRSNO,LRSTOP,LRSUB,LRTOP,LRTOPP,LRWKI,LRPRO,LRPROI
"RTN","LREPI",77,0)
 K LRNDC,LRNTE1,LRFIND,LRDRUG,LRCODE,LRDRSEQ,HLHDR,HLMTIEN,HLMTIENS
"RTN","LREPI",78,0)
 K HLNEXT,HLNODE,HLQUIT,HLRESLT,HLRESLTA,LRANS,LRDRSQ1,LRPROTX,LRPTY
"RTN","LREPI",79,0)
 K LRPVVV,LRSRGO,LRSRXX,LRTOLD,LRTRM
"RTN","LREPI",80,0)
 Q
"RTN","LREPI",81,0)
PTF ;SEARCH DISCHARGE DATES; NEED ADDITIONAL LATER SPECS
"RTN","LREPI",82,0)
 S STDT=(LRRPS-.0001),ENDT=(LRRPE+.9999)
"RTN","LREPI",83,0)
 F  S STDT=$O(^DGPT("ADS",STDT)) Q:+STDT'>0!(STDT>ENDT)  D
"RTN","LREPI",84,0)
 .S IFN=0 F  S IFN=$O(^DGPT("ADS",STDT,IFN)) Q:+IFN'>0  D
"RTN","LREPI",85,0)
 ..Q:$P($G(^DGPT(IFN,0)),U,6)'=3
"RTN","LREPI",86,0)
 ..I $P($G(^DGPT(IFN,300)),U,3)=1 D
"RTN","LREPI",87,0)
 ...S ICD9=$O(^ICD9("BA","482.80 ",0)) D ICD9
"RTN","LREPI",88,0)
 ..I $D(^DGPT(IFN,70)) F LRI=10,11,16:1:24 D
"RTN","LREPI",89,0)
 ...S ICD9=$P(^DGPT(IFN,70),U,LRI) D ICD9
"RTN","LREPI",90,0)
 ..;SEARCH SUB FIELDS
"RTN","LREPI",91,0)
 ..S LRMV=0 F  S LRMV=$O(^DGPT(IFN,"M",LRMV)) Q:+LRMV'>0  D
"RTN","LREPI",92,0)
 ...I $P($G(^DGPT(IFN,"M",LRMV,300)),U,3)=1 D
"RTN","LREPI",93,0)
 ....S ICD9=$O(^ICD9("BA","482.80 ",0)) D ICD9
"RTN","LREPI",94,0)
 ...I $D(^DGPT(IFN,"M",LRMV,0)) F LRI=5:1:9,11:1:15 D
"RTN","LREPI",95,0)
 ....S ICD9=$P(^DGPT(IFN,"M",LRMV,0),U,LRI) D ICD9
"RTN","LREPI",96,0)
 K IFN,LRMV,ICD9,LRI
"RTN","LREPI",97,0)
 Q
"RTN","LREPI",98,0)
ICD9 ;CHECK ICD9 CODE AND SAVE
"RTN","LREPI",99,0)
 Q:+ICD9'>0
"RTN","LREPI",100,0)
 Q:'$D(^TMP($J,"ICD",+ICD9))
"RTN","LREPI",101,0)
 S LRPROT=$G(LRPROT,999999) S ^TMP($J,"ICDPROT",+ICD9,LRPROT)=""
"RTN","LREPI",102,0)
 S DFN=$P(^DGPT(IFN,0),U,1),ADMDT=$P(^DGPT(IFN,0),U,2)
"RTN","LREPI",103,0)
 S LRPATH=0 F  S LRPATH=$O(^TMP($J,"ICD",+ICD9,LRPATH)) Q:+LRPATH'>0  D SET
"RTN","LREPI",104,0)
 Q
"RTN","LREPI",105,0)
SET ;SET THE TMP GLOBAL
"RTN","LREPI",106,0)
 S LRPROT=$P(^LAB(69.5,LRPATH,0),U,7)
"RTN","LREPI",107,0)
 S LRCHK=0 D ADDCHK Q:LRCHK
"RTN","LREPI",108,0)
 S:'$D(^TMP($J,LRPROT,DFN,ADMDT)) ^TMP($J,LRPROT,DFN,ADMDT)="I"_U_IFN
"RTN","LREPI",109,0)
 S ^TMP($J,LRPROT,DFN,ADMDT,LRPATH,(9999999-ADMDT),"PTF")=IFN
"RTN","LREPI",110,0)
 Q
"RTN","LREPI",111,0)
ENCT ;SET THE ENCOUNTER FOR PV1
"RTN","LREPI",112,0)
 S LRPROT=$P(^LAB(69.5,LRPATH,0),U,7)
"RTN","LREPI",113,0)
 S LRCHK=0 D ADDCHK Q:LRCHK
"RTN","LREPI",114,0)
 S LRDATE=9999999-LRINV
"RTN","LREPI",115,0)
 K VAIN,DFN,VAINDT S DFN=LRPAT,VAINDT=LRDATE D INP^VADPT
"RTN","LREPI",116,0)
 S LRENCDT=$S(VAIN(7)'="":$P(VAIN(7),U),1:LRDATE)
"RTN","LREPI",117,0)
 I $P(^LAB(69.5,LRPATH,0),U,8)=1 D CHECK^LREPI4
"RTN","LREPI",118,0)
 S:'$D(^TMP($J,LRPROT,LRPAT,LRENCDT)) ^TMP($J,LRPROT,LRPAT,LRENCDT)=$S(VAIN(7)'="":"I",1:"O")_U_$G(VAIN(10))
"RTN","LREPI",119,0)
 S:'$D(^TMP($J,LRPROT,LRPAT,LRENCDT,LRPATH,LRINV,ND)) ^TMP($J,LRPROT,LRPAT,LRENCDT,LRPATH,LRINV,ND)=""
"RTN","LREPI",120,0)
 Q
"RTN","LREPI",121,0)
ADDCHK ;DO ADDITIONAL CHECKS HERE FOR AGE AND SEX SCREENING.
"RTN","LREPI",122,0)
 ;
"RTN","LREPI",123,0)
 I '$G(DFN) S DFN=$G(LRPAT)
"RTN","LREPI",124,0)
 K VADM
"RTN","LREPI",125,0)
 I $G(DFN) D DEM^VADPT
"RTN","LREPI",126,0)
 ;
"RTN","LREPI",127,0)
 I $P(^LAB(69.5,LRPATH,0),U,10)'="" D
"RTN","LREPI",128,0)
 .S LRSEX=$P(^LAB(69.5,LRPATH,0),U,10)
"RTN","LREPI",129,0)
 .I LRSEX="O"&$P(VADM(5),U,1)="M" S LRCHK=1 Q
"RTN","LREPI",130,0)
 .I LRSEX="O"&$P(VADM(5),U,1)="F" S LRCHK=1 Q
"RTN","LREPI",131,0)
 .I LRSEX'=$P(VADM(5),U,1) S LRCHK=1
"RTN","LREPI",132,0)
 I $P(^LAB(69.5,LRPATH,0),U,11)'=""!$P(^LAB(69.5,LRPATH,0),U,12)'="" D
"RTN","LREPI",133,0)
 .S LRBEF=$P(^LAB(69.5,LRPATH,0),U,11),LRAFT=$P(^LAB(69.5,LRPATH,0),U,12)
"RTN","LREPI",134,0)
 .I LRBEF'=""&($P(VADM(3),U,1)>LRBEF) S LRCHK=1
"RTN","LREPI",135,0)
 .I LRAFT'=""&($P(VADM(3),U,1)<LRAFT) S LRCHK=1
"RTN","LREPI",136,0)
 K LRBEF,LRSEX,LRAFT,VADM
"RTN","LREPI",137,0)
 Q
"RTN","LREPI",138,0)
CH ;Check the 'CH' node
"RTN","LREPI",139,0)
 S LRINV=LRBEG
"RTN","LREPI",140,0)
 F  S LRINV=$O(^LR(LRDFN,"CH",LRINV)) Q:+LRINV'>0!(LRINV>LREND)  D
"RTN","LREPI",141,0)
 .Q:$P(^LR(LRDFN,"CH",LRINV,0),U,3)=""
"RTN","LREPI",142,0)
 .S LRCNT=1,LRTST=0 F  S LRTST=$O(^TMP($J,"CH",LRTST)) Q:+LRTST'>0  D
"RTN","LREPI",143,0)
 ..S LRND=$P($P(^TMP($J,"CH",LRTST),";",2),U,1) Q:+LRND'>0
"RTN","LREPI",144,0)
 ..S LRPC=$P($P(^TMP($J,"CH",LRTST),";",3),U,1) Q:+LRPC'>0
"RTN","LREPI",145,0)
 ..S LRRES=$P($G(^LR(LRDFN,"CH",LRINV,LRND)),U,LRPC) Q:LRRES=""
"RTN","LREPI",146,0)
 ..S ^TMP($J,"TST",LRTST)=+$G(^TMP($J,"TST",LRTST))+1
"RTN","LREPI",147,0)
 ..S ^TMP($J,"TST",LRTST,LRDFN)=""
"RTN","LREPI",148,0)
 ..S LRPATH=0 F  S LRPATH=$O(^TMP($J,"T",LRTST,LRPATH)) Q:+LRPATH'>0  D CHKIND
"RTN","LREPI",149,0)
 K LRTST,LRND,LRPC,LRRES,LRNO
"RTN","LREPI",150,0)
 Q
"RTN","LREPI",151,0)
CHKIND ;Check the results
"RTN","LREPI",152,0)
 I '$D(^LAB(69.5,LRPATH,1,"B",LRTST)) Q
"RTN","LREPI",153,0)
 S LRITST=0,ND="CH",LRNO=0
"RTN","LREPI",154,0)
 F  S LRITST=$O(^LAB(69.5,LRPATH,1,"B",LRTST,LRITST)) Q:+LRITST'>0  D  D:'LRNO ENCT
"RTN","LREPI",155,0)
 .S LRNO=0
"RTN","LREPI",156,0)
 .S LRIND=$P(^LAB(69.5,LRPATH,1,LRITST,0),U,2,3)
"RTN","LREPI",157,0)
 .Q:$P(LRIND,U,1)=""
"RTN","LREPI",158,0)
 .I $P(LRIND,U,1)=1 D  Q
"RTN","LREPI",159,0)
 ..Q:'LRRES#2
"RTN","LREPI",160,0)
 ..S LRSPEC=$P($G(^LR(LRDFN,"CH",LRINV,0)),U,5) Q:LRSPEC=""
"RTN","LREPI",161,0)
 ..Q:'$D(^LAB(60,LRTST,1,LRSPEC,0))
"RTN","LREPI",162,0)
 ..S LRLOW=$P(^LAB(60,LRTST,1,LRSPEC,0),U,2),LRHIG=$P(^(0),U,3)
"RTN","LREPI",163,0)
 ..Q:'LRLOW#2!('LRHIG#2)
"RTN","LREPI",164,0)
 ..I LRRES<LRLOW!(LRRES>LRHIG) Q
"RTN","LREPI",165,0)
 ..S LRNO=1
"RTN","LREPI",166,0)
 .I $P(LRIND,U,2)="" Q
"RTN","LREPI",167,0)
 .S LRRES=$$UP^XLFSTR(LRRES),LRIND=$$UP^XLFSTR(LRIND)
"RTN","LREPI",168,0)
 .I $P(LRIND,U,1)=2,(LRRES[$P(LRIND,U,2)) Q
"RTN","LREPI",169,0)
 .I $P(LRIND,U,1)=3,(LRRES>$P(LRIND,U,2)) Q
"RTN","LREPI",170,0)
 .I $P(LRIND,U,1)=4,(LRRES<$P(LRIND,U,2)) Q
"RTN","LREPI",171,0)
 .I $P(LRIND,U,1)=5,(LRRES=$P(LRIND,U,2)) Q
"RTN","LREPI",172,0)
 .S LRNO=1
"RTN","LREPI",173,0)
 K LRITST,LRLOW,LRHIG,LRSPEC
"RTN","LREPI",174,0)
 Q
"RTN","LREPI",175,0)
MI ;Check the 'MI' node
"RTN","LREPI",176,0)
 S LRINV=LRBEG
"RTN","LREPI",177,0)
 F  S LRINV=$O(^LR(LRDFN,"MI",LRINV)) Q:+LRINV'>0!(LRINV>LREND)  D
"RTN","LREPI",178,0)
 .S LRCNT=1
"RTN","LREPI",179,0)
 .F LRMIND=3,6,9,12,17 S LRETND=0 F  S LRETND=$O(^LR(LRDFN,"MI",LRINV,LRMIND,LRETND)) Q:+LRETND'>0  D
"RTN","LREPI",180,0)
 ..I LRMIND=3,$P($G(^LR(LRDFN,"MI",LRINV,1)),U,2)'="F" Q
"RTN","LREPI",181,0)
 ..I LRMIND'=3,$P($G(^LR(LRDFN,"MI",LRINV,(LRMIND-1))),U,2)'="F" Q
"RTN","LREPI",182,0)
 ..S LRETI=$P($G(^LR(LRDFN,"MI",LRINV,LRMIND,LRETND,0)),U)
"RTN","LREPI",183,0)
 ..Q:+LRETI'>0
"RTN","LREPI",184,0)
 ..Q:'$D(^TMP($J,"E",LRETI))
"RTN","LREPI",185,0)
 ..S ^TMP($J,"EPROT",LRETI)=""
"RTN","LREPI",186,0)
 ..S ^TMP($J,"ETI",LRETI)=+$G(^TMP($J,"ETI",LRETI))+1
"RTN","LREPI",187,0)
 ..S ^TMP($J,"ETI",LRETI,LRDFN)=""
"RTN","LREPI",188,0)
 ..S LRPATH=0 F  S LRPATH=$O(^TMP($J,"E",LRETI,LRPATH)) Q:+LRPATH'>0  D
"RTN","LREPI",189,0)
 ...S ND="MI"
"RTN","LREPI",190,0)
 ...D TOP Q:LRTOP
"RTN","LREPI",191,0)
 ...I LRMIND=3 D ANTI Q
"RTN","LREPI",192,0)
 ...D ENCT
"RTN","LREPI",193,0)
 K LRMIND,LRETI
"RTN","LREPI",194,0)
 Q
"RTN","LREPI",195,0)
TOP ;CHECK TO SEE IF SCREEN ON SITE
"RTN","LREPI",196,0)
 S LRTOP=0
"RTN","LREPI",197,0)
 S LRSITE=$P($G(^LR(LRDFN,"MI",LRINV,0)),U,5) Q:+LRSITE'>0
"RTN","LREPI",198,0)
 I ($O(^LAB(69.5,LRPATH,5,0))="")&($O(^LAB(69.5,LRPATH,6,0))="") Q
"RTN","LREPI",199,0)
 I ($O(^LAB(69.5,LRPATH,5,0))'="")&($O(^LAB(69.5,LRPATH,6,0))'="") Q
"RTN","LREPI",200,0)
 I ($O(^LAB(69.5,LRPATH,5,0))'="")&($D(^LAB(69.5,LRPATH,5,"B",LRSITE))) Q
"RTN","LREPI",201,0)
 I ($O(^LAB(69.5,LRPATH,6,0))'="")&('$D(^LAB(69.5,LRPATH,6,"B",LRSITE))) Q
"RTN","LREPI",202,0)
 S LRTOP=1
"RTN","LREPI",203,0)
 Q
"RTN","LREPI",204,0)
ANTI ;LOOK FOR THE ANTIMICROBIAL SUS FOR ORGANISMS
"RTN","LREPI",205,0)
 I $O(^LAB(69.5,LRPATH,4,0))="" D ENCT Q
"RTN","LREPI",206,0)
 S LRANTI=0 F  S LRANTI=$O(^LAB(69.5,LRPATH,4,LRANTI)) Q:+LRANTI'>0  D
"RTN","LREPI",207,0)
 .S LRANT=$G(^LAB(69.5,LRPATH,4,LRANTI,0)) Q:+LRANT'>0
"RTN","LREPI",208,0)
 .S LRAND=$P($G(^LAB(62.06,LRANT,0)),U,2) Q:LRAND=""
"RTN","LREPI",209,0)
 .Q:'$D(^LR(LRDFN,"MI",LRINV,LRMIND,LRETND,LRAND))
"RTN","LREPI",210,0)
 .Q:$P(^LR(LRDFN,"MI",LRINV,LRMIND,LRETND,LRAND),U,2)=""
"RTN","LREPI",211,0)
 .Q:$$UP^XLFSTR($E($P($G(^LR(LRDFN,"MI",LRINV,LRMIND,LRETND,LRAND)),U,2),1,1))="S"
"RTN","LREPI",212,0)
 .D ENCT
"RTN","LREPI",213,0)
 Q
"RTN","LREPI",214,0)
 ;
"RTN","LREPI1")
0^2^B49465482
"RTN","LREPI1",1,0)
LREPI1 ;DALOI/SED - EMERGING PATHOGENS HL7 BUILDER ; 5/9/98
"RTN","LREPI1",2,0)
 ;;5.2;LAB SERVICE;**132,157,175,260**;Sep 27, 1994
"RTN","LREPI1",3,0)
 ; Reference to ^DD supported by IA #999
"RTN","LREPI1",4,0)
 ; Reference to ^XLFSTR supported by IA #10104
"RTN","LREPI1",5,0)
EN(LRDFN,SS,IVDT,SEQ) ;Entry to build the HL7 Segment
"RTN","LREPI1",6,0)
 ;LRDFN=Patient ID
"RTN","LREPI1",7,0)
 ;SS=Subscripts in file 63  for results
"RTN","LREPI1",8,0)
 ;IVDT=Inverted Date and Time
"RTN","LREPI1",9,0)
 ;SEQ=Sequence Number
"RTN","LREPI1",10,0)
 ;S LRCS=$E(HL("ECH"))
"RTN","LREPI1",11,0)
 K ^TMP("HL7",$J)
"RTN","LREPI1",12,0)
 S:+$G(SEQ)'>0 SEQ=1
"RTN","LREPI1",13,0)
 S CNT=1
"RTN","LREPI1",14,0)
 Q:'$G(LRDFN)!('$G(IVDT))!('$L($G(SS)))
"RTN","LREPI1",15,0)
 I $L($T(@SS)) D @SS
"RTN","LREPI1",16,0)
EXIT ;KILL THEN EXIT
"RTN","LREPI1",17,0)
 K CNT,IND,LRAND,LRANT,LRDATA,LRES,LRINLT,LRNT,LRRDTE,LRREF,LRTST,LRUNIT
"RTN","LREPI1",18,0)
 K ND,NLT,NLTP,ORGNB,ORGPT,SEQX,SITE,TYPE,LRCODE
"RTN","LREPI1",19,0)
 Q SEQ
"RTN","LREPI1",20,0)
CY D CY^LREPI1A
"RTN","LREPI1",21,0)
 Q
"RTN","LREPI1",22,0)
SITECD ;Determine the HL7 Speciman code from the Site and return LRCODE
"RTN","LREPI1",23,0)
 S LRCODE=""
"RTN","LREPI1",24,0)
 Q:'$D(SITE)
"RTN","LREPI1",25,0)
 S LRCODE=$P($G(^LAB(61,SITE,0)),U,8)     ;Use if LEDI is not defined
"RTN","LREPI1",26,0)
 S LRIPT=$P($G(^LAB(61,SITE,0)),U,9) Q:+LRIPT'>0
"RTN","LREPI1",27,0)
 Q:'$D(^LAB(64.061,LRIPT,0))
"RTN","LREPI1",28,0)
 Q:$P(^LAB(64.061,LRIPT,0),U,3)=""
"RTN","LREPI1",29,0)
 S LRCODE=$P(^LAB(64.061,LRIPT,0),U,3)
"RTN","LREPI1",30,0)
 Q
"RTN","LREPI1",31,0)
CH ;BUILD HL7 MSG FOR CH SUBSCRIPT
"RTN","LREPI1",32,0)
 ;TO BUILD OBR SEGMENT FOR CHEM
"RTN","LREPI1",33,0)
 I '$D(^LR(LRDFN,SS,IVDT,0)) Q
"RTN","LREPI1",34,0)
 K LRDATA
"RTN","LREPI1",35,0)
 S $P(LRDATA,HLFS,1)=$G(SEQ)
"RTN","LREPI1",36,0)
 S $P(LRDATA,HLFS,4)="81121.0000"_LRCS_"CHEMISTRY TEST"_LRCS_"VANLT"
"RTN","LREPI1",37,0)
 S $P(LRDATA,HLFS,18)=$P(^LR(LRDFN,SS,IVDT,0),U,6)
"RTN","LREPI1",38,0)
 S $P(LRDATA,HLFS,7)=$$HLDATE^HLFNC(9999999-IVDT)
"RTN","LREPI1",39,0)
 S LRRDTE=$P($G(^LR(LRDFN,SS,IVDT,0)),U,3)
"RTN","LREPI1",40,0)
 S:+LRRDTE>0 LRRDTE=$$HLDATE^HLFNC(LRRDTE)
"RTN","LREPI1",41,0)
 S SITE=$P($G(^LR(LRDFN,SS,IVDT,0)),U,5)
"RTN","LREPI1",42,0)
 D SITECD
"RTN","LREPI1",43,0)
 S $P(LRDATA,HLFS,15)=LRCODE_LRCS_LRCS_$P($G(^LAB(61,SITE,0)),U)
"RTN","LREPI1",44,0)
 S ^TMP("HL7",$J,CNT)="OBR"_HLFS_$$UP^XLFSTR(LRDATA)
"RTN","LREPI1",45,0)
 ;TO BUILD OBX SEGMENT CHEM
"RTN","LREPI1",46,0)
 S (IND,SEQX)=1
"RTN","LREPI1",47,0)
 F  S IND=$O(^LR(LRDFN,"CH",IVDT,IND)) Q:+IND'>0  D
"RTN","LREPI1",48,0)
 .S LRES=^LR(LRDFN,"CH",IVDT,IND)
"RTN","LREPI1",49,0)
 .Q:LRES=""
"RTN","LREPI1",50,0)
 .Q:'$D(^LAB(60,"C","CH;"_IND_";1"))
"RTN","LREPI1",51,0)
 .K LRDATA
"RTN","LREPI1",52,0)
 .S LRTST=$O(^LAB(60,"C","CH;"_IND_";1",0))
"RTN","LREPI1",53,0)
 .Q:'$D(^TMP($J,"T",LRTST,LRPATH))
"RTN","LREPI1",54,0)
 .S $P(LRDATA,HLFS,1)=SEQX,$P(LRDATA,HLFS,2)="ST"
"RTN","LREPI1",55,0)
 .S LRUNIT=$P($G(^LAB(60,LRTST,1,SITE,0)),U,7)
"RTN","LREPI1",56,0)
 .S LRREF=$P($G(^LAB(60,LRTST,1,SITE,0)),U,2)_"-"
"RTN","LREPI1",57,0)
 .S LRREF=LRREF_$P($G(^LAB(60,LRTST,1,SITE,0)),U,3)
"RTN","LREPI1",58,0)
 .S LRINLT=+$G(^LAB(60,LRTST,64)),LRNLT=LRCS_LRCS_LRCS
"RTN","LREPI1",59,0)
 .I LRINLT'="",$D(^LAM(LRINLT,0)) D
"RTN","LREPI1",60,0)
 ..S $P(LRNLT,LRCS,2)=$P(^LAM(LRINLT,0),U,1)
"RTN","LREPI1",61,0)
 ..S $P(LRNLT,LRCS,1)=$P(^LAM(LRINLT,0),U,2)
"RTN","LREPI1",62,0)
 ..S $P(LRNLT,LRCS,3)="VANLT"
"RTN","LREPI1",63,0)
 .S $P(LRDATA,HLFS,3)=LRNLT_LRTST_LRCS_$P(^LAB(60,LRTST,0),U)_LRCS_"VA60"
"RTN","LREPI1",64,0)
 .S $P(LRDATA,HLFS,5)=$P(LRES,U,1),$P(LRDATA,HLFS,8)=$P(LRES,U,2)
"RTN","LREPI1",65,0)
 .S $P(LRDATA,HLFS,6)=LRUNIT,$P(LRDATA,HLFS,7)=LRREF
"RTN","LREPI1",66,0)
 .S $P(LRDATA,HLFS,14)=LRRDTE
"RTN","LREPI1",67,0)
 .S CNT=CNT+1,SEQX=SEQX+1,^TMP("HL7",$J,CNT)="OBX"_HLFS_$$UP^XLFSTR(LRDATA)
"RTN","LREPI1",68,0)
 Q
"RTN","LREPI1",69,0)
MI ;TO BUILD INITIAL OBR SEGMENT FOR MICRO
"RTN","LREPI1",70,0)
 I '$D(^LR(LRDFN,SS,IVDT,0)) Q
"RTN","LREPI1",71,0)
 K LRDATA
"RTN","LREPI1",72,0)
 S $P(LRDATA,HLFS,1)=$G(SEQ)
"RTN","LREPI1",73,0)
 S $P(LRDATA,HLFS,4)="87999.0000"_LRCS_"MICRO CULTURE"_LRCS_"VANLT"
"RTN","LREPI1",74,0)
 S $P(LRDATA,HLFS,7)=$$HLDATE^HLFNC(9999999-IVDT)
"RTN","LREPI1",75,0)
 S $P(LRDATA,HLFS,18)=$P(^LR(LRDFN,SS,IVDT,0),U,6)
"RTN","LREPI1",76,0)
 S SITE=$P(^LR(LRDFN,SS,IVDT,0),U,5)
"RTN","LREPI1",77,0)
 D SITECD
"RTN","LREPI1",78,0)
 S $P(LRDATA,HLFS,15)=LRCODE_LRCS_LRCS_$P($G(^LAB(61,SITE,0)),U)
"RTN","LREPI1",79,0)
 S ^TMP("HL7",$J,CNT)="OBR"_HLFS_$$UP^XLFSTR(LRDATA)
"RTN","LREPI1",80,0)
 ;LOOK INTO ALL MICRO SUB NODES FOR DATA AND BUILD FIRST OBX 
"RTN","LREPI1",81,0)
 F ND=3,6,9,12,17  I $D(^LR(LRDFN,SS,IVDT,ND,0)) D TYPE,MIORG
"RTN","LREPI1",82,0)
 ;SECOND LOOP TO BUILD SECONDARY OBR AND OBX
"RTN","LREPI1",83,0)
 F ND=3,12  I $D(^LR(LRDFN,SS,IVDT,ND,0)) D TYPE,@("SEC"_ND)
"RTN","LREPI1",84,0)
 Q
"RTN","LREPI1",85,0)
TYPE ;DETERMINS THE CORRECT NLT CODE TO USE 
"RTN","LREPI1",86,0)
 S:ND=3 TYPE="87993.0000"_LRCS_"BACTERIOLOGY CULTURE"_LRCS_"VANLT"
"RTN","LREPI1",87,0)
 S:ND=6 TYPE="87505.0000"_LRCS_"PARASITOLOGY"_LRCS_"VANLT"
"RTN","LREPI1",88,0)
 S:ND=9 TYPE="87994.0000"_LRCS_"MYCOLOGY CULTURE"_LRCS_"VANLT"
"RTN","LREPI1",89,0)
 S:ND=12 TYPE="87995.0000"_LRCS_"MYCOBACTERIUM CULTURE"_LRCS_"VANLT"
"RTN","LREPI1",90,0)
 S:ND=17 TYPE="87996.0000"_LRCS_"VIROLOGY CULTURE"_LRCS_"VANLT"
"RTN","LREPI1",91,0)
 Q
"RTN","LREPI1",92,0)
 ;
"RTN","LREPI1",93,0)
MIORG ;TO BUILD ORGANISM OBX SEGMENT FOR MICRO
"RTN","LREPI1",94,0)
 S ORGNB=0 F  S ORGNB=$O(^LR(LRDFN,SS,IVDT,ND,ORGNB)) Q:+ORGNB'>0  D
"RTN","LREPI1",95,0)
 .Q:'$D(^LR(LRDFN,SS,IVDT,ND,ORGNB,0))
"RTN","LREPI1",96,0)
 .S LRRDTE=""
"RTN","LREPI1",97,0)
 .S:ND=3 LRRDTE=+$P($G(^LR(LRDFN,SS,IVDT,1)),U,1)
"RTN","LREPI1",98,0)
 .S:ND'=3 LRRDTE=+$P($G(^LR(LRDFN,SS,IVDT,(ND-1))),U,1)
"RTN","LREPI1",99,0)
 .S:+LRRDTE>0 LRRDTE=$$HLDATE^HLFNC(LRRDTE)
"RTN","LREPI1",100,0)
 .S ORGPT=+$P($G(^LR(LRDFN,SS,IVDT,ND,ORGNB,0)),U,1)
"RTN","LREPI1",101,0)
 .Q:'$D(^LAB(61.2,ORGPT,0))
"RTN","LREPI1",102,0)
 .K LRDATA
"RTN","LREPI1",103,0)
 .S $P(LRDATA,HLFS,1)=ORGNB,$P(LRDATA,HLFS,2)="CE"
"RTN","LREPI1",104,0)
 .S $P(LRDATA,HLFS,3)=TYPE
"RTN","LREPI1",105,0)
 .S $P(LRDATA,HLFS,4)=ORGNB
"RTN","LREPI1",106,0)
 .S $P(LRDATA,HLFS,14)=LRRDTE
"RTN","LREPI1",107,0)
 .S $P(LRDATA,HLFS,5)=LRCS_$P(^LAB(61.2,ORGPT,0),U,1)
"RTN","LREPI1",108,0)
 .S CNT=CNT+1,^TMP("HL7",$J,CNT)="OBX"_HLFS_$$UP^XLFSTR(LRDATA)
"RTN","LREPI1",109,0)
 Q
"RTN","LREPI1",110,0)
SEC3 ;BUILD SUSEPTABILTY FOR ORGANISMS
"RTN","LREPI1",111,0)
 ;FIRST BUILD OBR THEN OBX FOR THE ANTIMICROBIAL TESTING
"RTN","LREPI1",112,0)
 S ORGNB=0 F  S ORGNB=$O(^LR(LRDFN,SS,IVDT,ND,ORGNB)) Q:+ORGNB'>0  D
"RTN","LREPI1",113,0)
 .Q:'$D(^LR(LRDFN,SS,IVDT,ND,ORGNB,0))
"RTN","LREPI1",114,0)
 .;CHECK TO SEE IF ANY ANTIMICROBIAL INFORMATION BEFORE PROCEEDING
"RTN","LREPI1",115,0)
 .S LRAND=1,LRANDFG=1
"RTN","LREPI1",116,0)
 .F  S LRAND=$O(^LR(LRDFN,SS,IVDT,ND,ORGNB,LRAND)) Q:+LRAND'>0  D
"RTN","LREPI1",117,0)
 ..Q:'$D(^LAB(62.06,"AD",LRAND))
"RTN","LREPI1",118,0)
 ..S:$P(^LR(LRDFN,SS,IVDT,ND,ORGNB,LRAND),U,2)'="" LRANDFG=0
"RTN","LREPI1",119,0)
 .Q:LRANDFG
"RTN","LREPI1",120,0)
 .K LRDATA,LRANDFG S SEQ=SEQ+1
"RTN","LREPI1",121,0)
 .S $P(LRDATA,HLFS,1)=SEQ
"RTN","LREPI1",122,0)
 .S $P(LRDATA,HLFS,4)="87518.0000"_LRCS_"ANTIBIOTIC MIC"_LRCS_"VANLT"
"RTN","LREPI1",123,0)
 .S $P(LRDATA,HLFS,26)=$P(TYPE,LRCS,1)_LRCS_ORGNB
"RTN","LREPI1",124,0)
 .S $P(LRDATA,HLFS,7)=$$HLDATE^HLFNC(9999999-IVDT)
"RTN","LREPI1",125,0)
 .S SITE=$P(^LR(LRDFN,SS,IVDT,0),U,5)
"RTN","LREPI1",126,0)
 .D SITECD
"RTN","LREPI1",127,0)
 .S $P(LRDATA,HLFS,15)=LRCODE_LRCS_LRCS_$P($G(^LAB(61,SITE,0)),U)
"RTN","LREPI1",128,0)
 .S CNT=CNT+1,^TMP("HL7",$J,CNT)="OBR"_HLFS_$$UP^XLFSTR(LRDATA)
"RTN","LREPI1",129,0)
ANTI3 .;NOW GET ANTIMICROBIAL INFORMATION
"RTN","LREPI1",130,0)
 .S SEQX=1,LRAND=1
"RTN","LREPI1",131,0)
 .F  S LRAND=$O(^LR(LRDFN,SS,IVDT,ND,ORGNB,LRAND)) Q:+LRAND'>0  D
"RTN","LREPI1",132,0)
 ..Q:'$D(^LAB(62.06,"AD",LRAND))
"RTN","LREPI1",133,0)
 ..Q:$P(^LR(LRDFN,SS,IVDT,ND,ORGNB,LRAND),U,2)=""
"RTN","LREPI1",134,0)
 ..K LRDATA
"RTN","LREPI1",135,0)
 ..S LRANT=$O(^LAB(62.06,"AD",LRAND,0))
"RTN","LREPI1",136,0)
 ..S $P(LRDATA,HLFS,1)=SEQX,$P(LRDATA,HLFS,2)="ST"
"RTN","LREPI1",137,0)
 ..S NLT=LRCS_LRCS_LRCS_LRANT_LRCS_$P(^LAB(62.06,LRANT,0),U,1)_LRCS_"VA62.06"
"RTN","LREPI1",138,0)
 ..S NLTP=+$G(^LAB(62.06,LRANT,64))
"RTN","LREPI1",139,0)
 ..S:$D(^LAM(NLTP,0)) $P(NLT,LRCS,1)=$P(^LAM(NLTP,0),U,2),$P(NLT,LRCS,2)=$P(^LAM(NLTP,0),U,1),$P(NLT,LRCS,3)="VANLT"
"RTN","LREPI1",140,0)
 ..S $P(LRDATA,HLFS,3)=NLT
"RTN","LREPI1",141,0)
 ..S $P(LRDATA,HLFS,8)=$P(^LR(LRDFN,SS,IVDT,ND,ORGNB,LRAND),U,2)
"RTN","LREPI1",142,0)
 ..S SEQX=SEQX+1,CNT=CNT+1,^TMP("HL7",$J,CNT)="OBX"_HLFS_$$UP^XLFSTR(LRDATA)
"RTN","LREPI1",143,0)
 Q
"RTN","LREPI1",144,0)
SEC12 ;
"RTN","LREPI1",145,0)
 ;FIRST BUILD OBR THEN OBX FOR THE ANTIMICROBIAL TESTING
"RTN","LREPI1",146,0)
 S ORGNB=0 F  S ORGNB=$O(^LR(LRDFN,SS,IVDT,ND,ORGNB)) Q:+ORGNB'>0  D
"RTN","LREPI1",147,0)
 .Q:'$D(^LR(LRDFN,SS,IVDT,ND,ORGNB,0))
"RTN","LREPI1",148,0)
 .;FIRST CHECK FOR ANTIMICROBIAL INFORMATION
"RTN","LREPI1",149,0)
 .S LRAND=1,LRANDFG=1
"RTN","LREPI1",150,0)
 .F  S LRAND=$O(^LR(LRDFN,SS,IVDT,ND,ORGNB,LRAND)) Q:+LRAND'>0  D
"RTN","LREPI1",151,0)
 ..S:$P(^LR(LRDFN,SS,IVDT,ND,ORGNB,LRAND),U,2)'="" LRANDFG=0
"RTN","LREPI1",152,0)
 .Q:LRANDFG
"RTN","LREPI1",153,0)
 .K LRDATA,LRANDFG S SEQ=SEQ+1
"RTN","LREPI1",154,0)
 .S $P(LRDATA,HLFS,1)=SEQ
"RTN","LREPI1",155,0)
 .S $P(LRDATA,HLFS,4)="87518.0000"_LRCS_"ANTIBIOTIC MIC"_LRCS_"VANLT"
"RTN","LREPI1",156,0)
 .S $P(LRDATA,HLFS,26)=$P(TYPE,LRCS,1)_LRCS_ORGNB
"RTN","LREPI1",157,0)
 .S $P(LRDATA,HLFS,7)=$$HLDATE^HLFNC(9999999-IVDT)
"RTN","LREPI1",158,0)
 .S SITE=$P(^LR(LRDFN,SS,IVDT,0),U,5)
"RTN","LREPI1",159,0)
 .D SITECD
"RTN","LREPI1",160,0)
 .S $P(LRDATA,HLFS,15)=LRCODE_LRCS_LRCS_$P($G(^LAB(61,SITE,0)),U)
"RTN","LREPI1",161,0)
 .S CNT=CNT+1,^TMP("HL7",$J,CNT)="OBR"_HLFS_$$UP^XLFSTR(LRDATA)
"RTN","LREPI1",162,0)
ANTI12 .;NOW GET ANTIMICROBIAL INFORMATION FOR THE MYCOBACTERIUM
"RTN","LREPI1",163,0)
 .S SEQX=1,LRAND=1
"RTN","LREPI1",164,0)
 .F  S LRAND=$O(^LR(LRDFN,SS,IVDT,ND,ORGNB,LRAND)) Q:+LRAND'>0  D
"RTN","LREPI1",165,0)
 ..Q:$P(^LR(LRDFN,SS,IVDT,ND,ORGNB,LRAND),U,2)=""
"RTN","LREPI1",166,0)
 ..K LRDATA
"RTN","LREPI1",167,0)
 ..S LRNT=$O(^DD(63.39,"GL",LRAND,1,0))
"RTN","LREPI1",168,0)
 ..S LRANT=$P($G(^DD(63.39,LRNT,.1)),U,1)
"RTN","LREPI1",169,0)
 ..S:LRANT="" LRANT=$P(^DD(63.39,LRNT,0),U,1)
"RTN","LREPI1",170,0)
 ..S $P(LRDATA,HLFS,1)=SEQX,$P(LRDATA,HLFS,2)="ST"
"RTN","LREPI1",171,0)
 ..S $P(LRDATA,HLFS,3)=LRCS_LRCS_LRCS_LRAND_LRCS_LRANT_LRCS_"VA63.39"
"RTN","LREPI1",172,0)
 ..S $P(LRDATA,HLFS,8)=$P(^LR(LRDFN,SS,IVDT,ND,ORGNB,LRAND),U,2)
"RTN","LREPI1",173,0)
 ..S SEQX=SEQX+1,CNT=CNT+1,^TMP("HL7",$J,CNT)="OBX"_HLFS_$$UP^XLFSTR(LRDATA)
"RTN","LREPI1",174,0)
 Q
"RTN","LREPI1A")
0^3^B18417132
"RTN","LREPI1A",1,0)
LREPI1A ;DALOI/SED-EMERGING PATHOGENS HL7 BUILDER ;5/1/98
"RTN","LREPI1A",2,0)
 ;;5.2;LAB SERVICE;**175,260**;Sep 27, 1994
"RTN","LREPI1A",3,0)
 ; Reference to ^ICD9 supported by IA #10082
"RTN","LREPI1A",4,0)
 ; Reference to ^XLFSTR supported by IA #10104
"RTN","LREPI1A",5,0)
 ;
"RTN","LREPI1A",6,0)
EN(LRDFN,SS,IVDT,SEQ) ;Entry to build the HL7 Segment
"RTN","LREPI1A",7,0)
 ;LRDFN=Patient ID
"RTN","LREPI1A",8,0)
 ;SS=Subscripts in file 63  for results
"RTN","LREPI1A",9,0)
 ;IVDT=Inverted Date and Time
"RTN","LREPI1A",10,0)
 ;SEQ=Sequence Number
"RTN","LREPI1A",11,0)
 ;S LRCS=$E(HL("ECH"))
"RTN","LREPI1A",12,0)
 K ^TMP("HL7",$J)
"RTN","LREPI1A",13,0)
 S:+$G(SEQ)'>0 SEQ=1
"RTN","LREPI1A",14,0)
 S CNT=1
"RTN","LREPI1A",15,0)
 Q:'$G(LRDFN)!('$G(IVDT))!('$L($G(SS)))
"RTN","LREPI1A",16,0)
 I $L($T(@SS)) D @SS
"RTN","LREPI1A",17,0)
EXIT ;KILL THEN EXIT
"RTN","LREPI1A",18,0)
 K CNT,IND,LRAND,LRANT,LRDATA,LRES,LRINLT,LRNT,LRRDTE,LRREF,LRTST,LRUNIT
"RTN","LREPI1A",19,0)
 K ND,NLT,NLTP,ORGNB,ORGPT,SEQX,SITE,TYPE
"RTN","LREPI1A",20,0)
 Q SEQ
"RTN","LREPI1A",21,0)
CY ;BUILD HL7 MSG FOR CY SUBSCRIPT
"RTN","LREPI1A",22,0)
 ;TO BUILD OBR SEGMENT FOR CY
"RTN","LREPI1A",23,0)
 I '$D(^LR(LRDFN,SS,IVDT,0)) Q
"RTN","LREPI1A",24,0)
 ;Look at ICD9 codes
"RTN","LREPI1A",25,0)
 I $O(^LR(LRDFN,SS,IVDT,3,0))>0 D
"RTN","LREPI1A",26,0)
 .K LRDATA
"RTN","LREPI1A",27,0)
 .S $P(LRDATA,HLFS,1)=$G(SEQ)
"RTN","LREPI1A",28,0)
 .S $P(LRDATA,HLFS,4)="88056.0000"_LRCS_"CY SPECIMEN"_LRCS_"VANLT"
"RTN","LREPI1A",29,0)
 .S $P(LRDATA,HLFS,18)=$P(^LR(LRDFN,SS,IVDT,0),U,6)
"RTN","LREPI1A",30,0)
 .S $P(LRDATA,HLFS,7)=$$HLDATE^HLFNC(9999999-IVDT)
"RTN","LREPI1A",31,0)
 .S LRSI=$O(^LR(LRDFN,SS,IVDT,.1,0)),SITE=""
"RTN","LREPI1A",32,0)
 .S:+LRSI>0 SITE=$P($G(^LR(LRDFN,SS,IVDT,.1,LRSI,0)),U,1)
"RTN","LREPI1A",33,0)
 .S $P(LRDATA,HLFS,15)=LRCS_LRCS_SITE
"RTN","LREPI1A",34,0)
 .S ^TMP("HL7",$J,CNT)="OBR"_HLFS_$$UP^XLFSTR(LRDATA),CNT=CNT+1,SEQ=SEQ+1
"RTN","LREPI1A",35,0)
 .S LRIC=0 F  S LRIC=$O(^LR(LRDFN,SS,IVDT,3,LRIC)) Q:+LRIC'>0  D
"RTN","LREPI1A",36,0)
 ..Q:'$D(^LR(LRDFN,SS,IVDT,3,LRIC,0))
"RTN","LREPI1A",37,0)
 ..S:'$D(DGCNT) DGCNT=1
"RTN","LREPI1A",38,0)
 ..S ICD9=$P(^LR(LRDFN,SS,IVDT,3,LRIC,0),U,1)
"RTN","LREPI1A",39,0)
 ..K LRDATA
"RTN","LREPI1A",40,0)
 ..S LRDATA="DG1"_HLFS_DGCNT_HLFS_HLFS_$P(^ICD9(ICD9,0),U,1)
"RTN","LREPI1A",41,0)
 ..S LRDATA=LRDATA_LRCS_$P(^ICD9(ICD9,0),U,3)_LRCS_"I9"
"RTN","LREPI1A",42,0)
 ..S ^TMP("HL7",$J,CNT)=$$UP^XLFSTR(LRDATA),DGCNT=DGCNT+1,CNT=CNT+1
"RTN","LREPI1A",43,0)
 K LRDATA,DGCNT
"RTN","LREPI1A",44,0)
 ;Look to see in there is a workload code.
"RTN","LREPI1A",45,0)
 S LRWKI=0 F  S LRWKI=$O(^LR(LRDFN,SS,IVDT,.1,LRWKI)) Q:+LRWKI'>0  D
"RTN","LREPI1A",46,0)
 .S LRWKDT=$G(^LR(LRDFN,SS,IVDT,.1,LRWKI,0))
"RTN","LREPI1A",47,0)
 .Q:+$P(LRWKDT,U,2)'>0
"RTN","LREPI1A",48,0)
 .Q:'$D(^LAB(60,$P(LRWKDT,U,2)))
"RTN","LREPI1A",49,0)
 .S LRTST=$P(LRWKDT,U,2)
"RTN","LREPI1A",50,0)
 .S LRNLT="88056.0000"_LRCS_"CY SPECIMEN"_LRCS_"VANLT"
"RTN","LREPI1A",51,0)
 .S LRINLT=+$G(^LAB(60,$P(LRWKDT,U,2),64))
"RTN","LREPI1A",52,0)
 .I LRINLT'="",$D(^LAM(LRINLT,0)) D
"RTN","LREPI1A",53,0)
 ..S $P(LRNLT,LRCS,2)=$P(^LAM(LRINLT,0),U,1)
"RTN","LREPI1A",54,0)
 ..S $P(LRNLT,LRCS,1)=$P(^LAM(LRINLT,0),U,2)
"RTN","LREPI1A",55,0)
 ..S $P(LRNLT,LRCS,3)="VANLT"
"RTN","LREPI1A",56,0)
 .K LRDATA
"RTN","LREPI1A",57,0)
 .S $P(LRDATA,HLFS,1)=$G(SEQ)
"RTN","LREPI1A",58,0)
 .S $P(LRDATA,HLFS,4)=LRNLT_LRCS_LRTST_LRCS_$P(^LAB(60,LRTST,0),U)_LRCS_"VA60"
"RTN","LREPI1A",59,0)
 .S $P(LRDATA,HLFS,18)=$P(^LR(LRDFN,SS,IVDT,0),U,6)
"RTN","LREPI1A",60,0)
 .S $P(LRDATA,HLFS,7)=$$HLDATE^HLFNC(9999999-IVDT)
"RTN","LREPI1A",61,0)
 .S LRRDTE=$P($G(^LR(LRDFN,SS,IVDT,0)),U,3)
"RTN","LREPI1A",62,0)
 .S:+LRRDTE>0 LRRDTE=$$HLDATE^HLFNC(LRRDTE)
"RTN","LREPI1A",63,0)
 .S SITE=$P(LRWKDT,U,1)
"RTN","LREPI1A",64,0)
 .S $P(LRDATA,HLFS,15)=LRCS_LRCS_SITE
"RTN","LREPI1A",65,0)
 .S ^TMP("HL7",$J,CNT)="OBR"_HLFS_$$UP^XLFSTR(LRDATA),CNT=CNT+1,SEQ=SEQ+1
"RTN","LREPI1A",66,0)
 K LRDATA,DGCNT,LRTST,LRWKDT,LRINLT,LRNLT
"RTN","LREPI1A",67,0)
 ;Look into Multiple CYTOPATH ORGAN/TISSUE sub file
"RTN","LREPI1A",68,0)
 S LRTOP=0 F  S LRTOP=$O(^LR(LRDFN,SS,IVDT,2,LRTOP)) Q:+LRTOP'>0  D
"RTN","LREPI1A",69,0)
 .K LRDATA
"RTN","LREPI1A",70,0)
 .S $P(LRDATA,HLFS,1)=$G(SEQ)
"RTN","LREPI1A",71,0)
 .S $P(LRDATA,HLFS,4)="88056.0000"_LRCS_"CY SPECIMEN"_LRCS_"VANLT"
"RTN","LREPI1A",72,0)
 .S $P(LRDATA,HLFS,18)=$P(^LR(LRDFN,SS,IVDT,0),U,6)
"RTN","LREPI1A",73,0)
 .S $P(LRDATA,HLFS,7)=$$HLDATE^HLFNC(9999999-IVDT)
"RTN","LREPI1A",74,0)
 .S LRRDTE=$P($G(^LR(LRDFN,SS,IVDT,0)),U,3)
"RTN","LREPI1A",75,0)
 .S:+LRRDTE>0 LRRDTE=$$HLDATE^HLFNC(LRRDTE)
"RTN","LREPI1A",76,0)
 .S SITE=$P(^LR(LRDFN,SS,IVDT,2,LRTOP,0),U,1)
"RTN","LREPI1A",77,0)
 .D SITECD^LREPI1
"RTN","LREPI1A",78,0)
 .S $P(LRDATA,HLFS,15)=LRCODE_LRCS_LRCS_$P($G(^LAB(61,SITE,0)),U)
"RTN","LREPI1A",79,0)
 .S ^TMP("HL7",$J,CNT)="OBR"_HLFS_$$UP^XLFSTR(LRDATA),CNT=CNT+1,SEQ=SEQ+1
"RTN","LREPI1A",80,0)
 .;NOW DO THE OBX(s) FOR TO SITE
"RTN","LREPI1A",81,0)
 .S ND="61.4,61.1,61.3,61.5"
"RTN","LREPI1A",82,0)
 .S SEQX=1
"RTN","LREPI1A",83,0)
 .F LRSUB=1,2,3,4 D
"RTN","LREPI1A",84,0)
 ..Q:'$D(^LR(LRDFN,SS,IVDT,2,LRTOP,LRSUB,0))
"RTN","LREPI1A",85,0)
 ..S LRNX=0
"RTN","LREPI1A",86,0)
 ..F  S LRNX=$O(^LR(LRDFN,SS,IVDT,2,LRTOP,LRSUB,LRNX)) Q:+LRNX'>0  D
"RTN","LREPI1A",87,0)
 ...K LRDATA
"RTN","LREPI1A",88,0)
 ...S LRI=$P(^LR(LRDFN,SS,IVDT,2,LRTOP,LRSUB,LRNX,0),U,1)
"RTN","LREPI1A",89,0)
 ...Q:'$D(^LAB($P(ND,",",LRSUB),+LRI,0))
"RTN","LREPI1A",90,0)
 ...S LRO=^LAB($P(ND,",",LRSUB),+LRI,0)
"RTN","LREPI1A",91,0)
 ...S $P(LRDATA,HLFS,1)=$G(SEQX)
"RTN","LREPI1A",92,0)
 ...S $P(LRDATA,HLFS,2)="ST"
"RTN","LREPI1A",93,0)
 ...S $P(LRDATA,HLFS,3)=$P(LRO,U,2)_LRCS_$P(LRO,U,1)_LRCS_"SNM3"_LRCS_$P(LRO,U,2)_LRCS_$E($P(LRO,U,1),1,25)_LRCS_"SNM3"
"RTN","LREPI1A",94,0)
 ...S $P(LRDATA,HLFS,14)=LRRDTE
"RTN","LREPI1A",95,0)
 ...S LRRES=""
"RTN","LREPI1A",96,0)
 ...S:LRSUB=4 LRRES=$P(^LR(LRDFN,SS,IVDT,2,LRTOP,LRSUB,LRNX,0),U,2)
"RTN","LREPI1A",97,0)
 ...S:LRRES'="" $P(LRDATA,HLFS,5)=$S(LRRES:"Positive",1:"Negative")
"RTN","LREPI1A",98,0)
 ...S ^TMP("HL7",$J,CNT)="OBX"_HLFS_$$UP^XLFSTR(LRDATA),CNT=CNT+1,SEQX=SEQX+1
"RTN","LREPI1A",99,0)
 Q
"RTN","LREPI2")
0^4^B24648813
"RTN","LREPI2",1,0)
LREPI2 ;DALOI/SED-EMERGING PATHOGENS HL7 BUILD ;5/1/98
"RTN","LREPI2",2,0)
 ;;5.2;LAB SERVICE;**132,157,175,242,260**;Sep 27, 1994
"RTN","LREPI2",3,0)
 ;
"RTN","LREPI2",4,0)
START ;START WITH THE PROTOCOL USED
"RTN","LREPI2",5,0)
 S LRPROT=0 F  S LRPROT=$O(^TMP($J,LRPROT)) Q:+LRPROT'>0  D
"RTN","LREPI2",6,0)
 .D INIT^HLFNC2(LRPROT,.HL)
"RTN","LREPI2",7,0)
 .S LRCS=$E(HL("ECH")),LRMSGNM=1,LRMSGSZ=0
"RTN","LREPI2",8,0)
 .S LRMSGDF=$S(+$P($G(^LAB(69.4,LRPROT,0)),U,3)>0:+$P($G(^LAB(69.4,LRPROT,0)),U,3),1:30000)
"RTN","LREPI2",9,0)
 .D EN I LRMSGSZ D MOVE,SEND
"RTN","LREPI2",10,0)
 .F LRTND="ETI","TST" D:$D(^TMP($J,LRTND)) TOTAL
"RTN","LREPI2",11,0)
 .D SEND,ALERT
"RTN","LREPI2",12,0)
 K LRMSGDF,LRMSGNM,LRMSGSZ,%,%X
"RTN","LREPI2",13,0)
 Q
"RTN","LREPI2",14,0)
ALERT ;Send a Alert if desired.
"RTN","LREPI2",15,0)
 K XQA,XQAMSG,XQAOPT,XQAROU,XQAID,XQADATA,XQAFLAG
"RTN","LREPI2",16,0)
 Q:+$G(LRRTYPE)=1
"RTN","LREPI2",17,0)
 S X="NOW",%DT="SRT" D ^%DT,DD^%DT
"RTN","LREPI2",18,0)
 S XQAMSG=$P(^LAB(69.4,LRPROT,0),U,5)_" Was processed at "_Y
"RTN","LREPI2",19,0)
 ;GET THE DUZ'S FOR ALERTS
"RTN","LREPI2",20,0)
 S LRIEN=0 F  S LRIEN=$O(^LAB(69.4,LRPROT,1,LRIEN)) Q:+LRIEN'>0  D
"RTN","LREPI2",21,0)
 .S LRDATA=$G(^LAB(69.4,LRPROT,1,LRIEN,0))
"RTN","LREPI2",22,0)
 .I $P(LRDATA,";",2)["VA(200" S XQA($P(LRDATA,";",1))=""
"RTN","LREPI2",23,0)
 .I $P(LRDATA,";",2)["XMB(3.8" D
"RTN","LREPI2",24,0)
 ..S LRMG=$P(LRDATA,";",1) ;Q:'$D(^XMB(3.8,LRMG))
"RTN","LREPI2",25,0)
 ..S LRMGN=$$GET1^DIQ(69.4,LRMG,1) Q:LRMGN=""
"RTN","LREPI2",26,0)
 ..S X=LRMGN,XMDUZ=DUZ D INST^XMA21
"RTN","LREPI2",27,0)
 ..;S LRDUZ=0 F  S LRDUZ=$O(^XMB(3.8,LRMG,1,"B",LRDUZ)) Q:+LRDUZ'>0  S XQA(LRDUZ)=""
"RTN","LREPI2",28,0)
 Q:'$D(XQA)
"RTN","LREPI2",29,0)
 D SETUP^XQALERT
"RTN","LREPI2",30,0)
 Q
"RTN","LREPI2",31,0)
SEND ;SEND THE HL7 MESSAGE
"RTN","LREPI2",32,0)
 D HEAD
"RTN","LREPI2",33,0)
 D GENERATE^HLMA(LRPROT,"GM",1,.HLRST,"",.HL)
"RTN","LREPI2",34,0)
 S LRMSGNM=LRMSGNM+1,LRMSGSZ=0
"RTN","LREPI2",35,0)
 K ^TMP("HLS",$J)
"RTN","LREPI2",36,0)
 Q
"RTN","LREPI2",37,0)
EN ;ENTRY TO BUILD A MESSAGE
"RTN","LREPI2",38,0)
 S (LRCNT,LRPID)=1,DFN=0
"RTN","LREPI2",39,0)
 F  S DFN=$O(^TMP($J,LRPROT,DFN)) Q:+DFN'>0  D
"RTN","LREPI2",40,0)
 .I LRMSGSZ>20000 D MOVE,SEND
"RTN","LREPI2",41,0)
 .D PID^LREPI3
"RTN","LREPI2",42,0)
 .S LRPV1=1,LRENDT=0,LRPFG="",LREFG=0,LRPVVV=0
"RTN","LREPI2",43,0)
 .F  S LRENDT=$O(^TMP($J,LRPROT,DFN,LRENDT)) S LRPFG="" Q:+LRENDT'>0!(LREFG)  D
"RTN","LREPI2",44,0)
 ..D PV1
"RTN","LREPI2",45,0)
 ..I $D(^TMP("LREPISRCH",$J,DFN)),LRPROT=LRPROTX D RXNT^LREPIPH
"RTN","LREPI2",46,0)
 ..S LRPATH=0,LRNTE=1,LRPVVV=1
"RTN","LREPI2",47,0)
 ..F  S LRPATH=$O(^TMP($J,LRPROT,DFN,LRENDT,LRPATH)) Q:+LRPATH'>0!(LREFG)  D
"RTN","LREPI2",48,0)
 ...D:LRPFG'=LRPATH NTE^LREPI3
"RTN","LREPI2",49,0)
 ...S LRPFG=LRPATH,LROBR=1,LRINVD=0
"RTN","LREPI2",50,0)
 ...F  S LRINVD=$O(^TMP($J,LRPROT,DFN,LRENDT,LRPATH,LRINVD)) Q:+LRINVD'>0!(LREFG)  D
"RTN","LREPI2",51,0)
 ....S LRND=""
"RTN","LREPI2",52,0)
 ....F  S LRND=$O(^TMP($J,LRPROT,DFN,LRENDT,LRPATH,LRINVD,LRND)) Q:LRND=""!(LREFG)  D
"RTN","LREPI2",53,0)
 .....S LRDFN=$$LRDFN^LR7OR1(DFN) Q:'LRDFN
"RTN","LREPI2",54,0)
 .....S LREFG=+$P($G(^LAB(69.5,LRPATH,0)),U,6)
"RTN","LREPI2",55,0)
 .....S:LRND'="PTF" LROBR=$$EN^LREPI1(LRDFN,LRND,LRINVD,LROBR)+1
"RTN","LREPI2",56,0)
 .....D:LRND="PTF" DG1^LREPI3
"RTN","LREPI2",57,0)
 .....D MOVE
"RTN","LREPI2",58,0)
 Q
"RTN","LREPI2",59,0)
TOTAL ;Report the total counts  ->    "ETI" or "TST"
"RTN","LREPI2",60,0)
 ;                                \/
"RTN","LREPI2",61,0)
 S LRITN=0 F  S LRITN=$O(^TMP($J,LRTND,LRITN)) Q:+LRITN'>0  D
"RTN","LREPI2",62,0)
 .S (LRNLT,LRTNM)=""
"RTN","LREPI2",63,0)
 .I LRTND="TST" D
"RTN","LREPI2",64,0)
 ..I '$D(^TMP($J,"TPROT",LRITN,LRPROT)) QUIT
"RTN","LREPI2",65,0)
 ..S LRTNM=$P($G(^LAB(60,LRITN,0)),U,1)
"RTN","LREPI2",66,0)
 ..S LRNL=$G(^LAB(60,LRITN,64)) Q:+LRNL'>0
"RTN","LREPI2",67,0)
 ..Q:'$D(^LAM(LRNL,0))
"RTN","LREPI2",68,0)
 ..S LRNLT=$P(^LAM(LRNL,0),U,2)
"RTN","LREPI2",69,0)
 .I LRTND="ETI" D
"RTN","LREPI2",70,0)
 ..I '$D(^TMP($J,"EPROT",LRITN)) QUIT
"RTN","LREPI2",71,0)
 ..S LRTNM=$P($G(^LAB(61.2,LRITN,0)),U,1)
"RTN","LREPI2",72,0)
 ..S LRNL=$G(^LAB(61.2,LRITN,64)) Q:+LRNL'>0
"RTN","LREPI2",73,0)
 ..Q:'$D(^LAM(LRNL,0))
"RTN","LREPI2",74,0)
 ..S LRNLT=$P(^LAM(LRNL,0),U,2)
"RTN","LREPI2",75,0)
 .I LRTND="STOT" D
"RTN","LREPI2",76,0)
 ..I '$D(^TMP($J,"SPROT",LRITN,LRPROT)) QUIT
"RTN","LREPI2",77,0)
 ..S LRTNM=""
"RTN","LREPI2",78,0)
 ..S LRNL=LRITN
"RTN","LREPI2",79,0)
 ..S LRNLT=""
"RTN","LREPI2",80,0)
 .K LRDATA
"RTN","LREPI2",81,0)
 .I '$G(LRTNM) D NAME
"RTN","LREPI2",82,0)
 .S LRDATA="NTE"_HLFS_HLFS_"T"_LRCS_LRNLT_LRCS_LRTNM_LRCS_+^TMP($J,LRTND,LRITN)
"RTN","LREPI2",83,0)
 .S LRCNT=LRCNT+1
"RTN","LREPI2",84,0)
 .S ^TMP("HLS",$J,LRCNT)=$$UP^XLFSTR(LRDATA),LRMSGSZ=LRMSGSZ+$L(LRDATA)
"RTN","LREPI2",85,0)
 .K LRDATA
"RTN","LREPI2",86,0)
 .S (LRPCNT,LRPTOT)=0
"RTN","LREPI2",87,0)
 .F  S LRPCNT=$O(^TMP($J,LRTND,LRITN,LRPCNT)) Q:+LRPCNT'>0  S LRPTOT=LRPTOT+1
"RTN","LREPI2",88,0)
 .Q:LRPTOT'>0
"RTN","LREPI2",89,0)
 .I '$G(LRTNM) D NAME
"RTN","LREPI2",90,0)
 .S LRDATA="NTE"_HLFS_HLFS_"T"_LRCS_LRNLT_LRCS_"PATIENTS WITH "_LRTNM_LRCS_LRPTOT ;+^TMP($J,LRPCNT,LRITN)
"RTN","LREPI2",91,0)
 .S LRCNT=LRCNT+1
"RTN","LREPI2",92,0)
 .S ^TMP("HLS",$J,LRCNT)=$$UP^XLFSTR(LRDATA),LRMSGSZ=LRMSGSZ+$L(LRDATA)
"RTN","LREPI2",93,0)
 Q
"RTN","LREPI2",94,0)
NAME ;
"RTN","LREPI2",95,0)
 Q:LRTND'="TST"
"RTN","LREPI2",96,0)
 S LRTNM=$P($G(^LAB(60,LRITN,0)),U,1)
"RTN","LREPI2",97,0)
 S LRNL=$G(^LAB(60,LRITN,64)) Q:+LRNL'>0
"RTN","LREPI2",98,0)
 Q:'$D(^LAM(LRNL,0))
"RTN","LREPI2",99,0)
 S LRNLT=$P(^LAM(LRNL,0),U,2)
"RTN","LREPI2",100,0)
 ;
"RTN","LREPI2",101,0)
 QUIT
"RTN","LREPI2",102,0)
HEAD ;ENTER A NTE FOR REPORT HEADER
"RTN","LREPI2",103,0)
 K LRDATA
"RTN","LREPI2",104,0)
 S LRDATA="NTE"_HLFS_HLFS_$S(LRRTYPE:"R",1:"")_LRCS
"RTN","LREPI2",105,0)
 I $G(LR31799Z)=1 S LRDATA=LRDATA_"*** H E P A T I T I S  C  MARCH 17 1999 ***"
"RTN","LREPI2",106,0)
 S LRDATA=LRDATA_"REPORTING DATE FROM "_$$HLDATE^HLFNC(LRRPS)
"RTN","LREPI2",107,0)
 S LRDATA=LRDATA_" TO "_$$HLDATE^HLFNC(LRRPE)
"RTN","LREPI2",108,0)
 S LRDATA=LRDATA_LRCS_LRMSGNM
"RTN","LREPI2",109,0)
 I LRPROTX=LRPROT S LRDATA=LRDATA_LRCS_LRCS_"V2"
"RTN","LREPI2",110,0)
 I '$O(^TMP("HLS",$J,1)) S LRDATA=LRDATA_LRCS_"N"
"RTN","LREPI2",111,0)
 S ^TMP("HLS",$J,1)=$$UP^XLFSTR(LRDATA),LRMSGSZ=LRMSGSZ+$L(LRDATA)
"RTN","LREPI2",112,0)
 K LRDATA
"RTN","LREPI2",113,0)
 Q
"RTN","LREPI2",114,0)
MOVE S LRMOVE=0
"RTN","LREPI2",115,0)
 F  S LRMOVE=$O(^TMP("HL7",$J,LRMOVE)) Q:+LRMOVE'>0  D
"RTN","LREPI2",116,0)
 .S LRCNT=LRCNT+1
"RTN","LREPI2",117,0)
 .S ^TMP("HLS",$J,LRCNT)=^TMP("HL7",$J,LRMOVE)
"RTN","LREPI2",118,0)
 .S LRMSGSZ=LRMSGSZ+$L(^TMP("HL7",$J,LRMOVE))
"RTN","LREPI2",119,0)
 K ^TMP("HL7",$J),LRMOVE
"RTN","LREPI2",120,0)
 Q
"RTN","LREPI2",121,0)
 ;
"RTN","LREPI2",122,0)
PV1 ;
"RTN","LREPI2",123,0)
 ;I $O(^TMP($J,LRPROT,DFN,LRENDT,""))!('$D(^TMP("LREPISRCH",$J,DFN)))!($P(LRNDTDA,"^",3))="UPDT" D PV1^LREPI3 S LRPVVV=1
"RTN","LREPI2",124,0)
 I LRPV1>1,$O(^TMP($J,LRPROT,DFN,LRENDT,LRPATH))="",$P($G(^TMP($J,LRPROT,DFN,LRENDT)),"^",3)'="UPDT" Q
"RTN","LREPI2",125,0)
 I $P($G(^TMP($J,LRPROT,DFN,LRENDT)),"^",3)="UPDT" D PV1^LREPI3 S LRPVVV=1 Q
"RTN","LREPI2",126,0)
 I $O(^TMP($J,LRPROT,DFN,LRENDT,""))]"" D PV1^LREPI3 S LRPVVV=1 Q
"RTN","LREPI2",127,0)
 I '$D(^TMP("LREPISRCH",$J,DFN)) D PV1^LREPI3 S LRPVVV=1 Q
"RTN","LREPI3")
0^5^B13134340
"RTN","LREPI3",1,0)
LREPI3 ;DALOI/SED-EMERGING PATHOGENS HL7 SEGMENTS ;5/21/98
"RTN","LREPI3",2,0)
 ;;5.2;LAB SERVICE;**132,175,260**;Sep 27, 1994
"RTN","LREPI3",3,0)
 ; Reference to ^DGPT supported by IA #418
"RTN","LREPI3",4,0)
 ; Reference to ^DIC(21 supported by IA #2504
"RTN","LREPI3",5,0)
 ; Reference to ^ICD9 supported by IA #10082
"RTN","LREPI3",6,0)
NTE ;TO BUILD THE NTE SEGMENT TO DEFINE THE EPI
"RTN","LREPI3",7,0)
 S LRDATA="NTE"_HLFS_LRNTE_HLFS_$P(^LAB(69.5,LRPATH,0),U,9)_LRCS_$P(^LAB(69.5,LRPATH,0),U,1)
"RTN","LREPI3",8,0)
 S LRCNT=LRCNT+1,^TMP("HLS",$J,LRCNT)=$$UP^XLFSTR(LRDATA)
"RTN","LREPI3",9,0)
 S LRMSGSZ=LRMSGSZ+$L(LRDATA)
"RTN","LREPI3",10,0)
 S LRNTE=LRNTE+1
"RTN","LREPI3",11,0)
 Q
"RTN","LREPI3",12,0)
DG1 ;BUILD THE DG1 FOR ICD9 CODES
"RTN","LREPI3",13,0)
 K ^TMP($J,"DG1")
"RTN","LREPI3",14,0)
 S IFN=+$G(^TMP($J,LRPROT,DFN,LRENDT,LRPATH,LRINVD,LRND))
"RTN","LREPI3",15,0)
DG11 Q:+IFN'>0
"RTN","LREPI3",16,0)
 Q:'$D(^DGPT(IFN))
"RTN","LREPI3",17,0)
 ;SEARCH FOR LEGIONAIRS HERE
"RTN","LREPI3",18,0)
 I $P($G(^DGPT(IFN,300)),U,3)=1 D
"RTN","LREPI3",19,0)
 .S ICD9=$O(^ICD9("BA","482.80 ",0)) Q:+ICD9'>0
"RTN","LREPI3",20,0)
 .S ^TMP($J,"DG1",ICD9)=$P($G(^DGPT(IFN,70)),"^",10)_"^"_$$HLDATE^HLFNC($P($G(^DGPT(IFN,0)),"^",2))
"RTN","LREPI3",21,0)
 I $D(^DGPT(IFN,70)) F LRI=10,11,16:1:24 D
"RTN","LREPI3",22,0)
 .S ICD9=$P(^DGPT(IFN,70),U,LRI) Q:+ICD9'>0
"RTN","LREPI3",23,0)
 .S ^TMP($J,"DG1",ICD9)=$P($G(^DGPT(IFN,70)),"^",10)_"^"_$$HLDATE^HLFNC($P($G(^DGPT(IFN,0)),"^",2))
"RTN","LREPI3",24,0)
 ;SEARCH SUB FIELDS
"RTN","LREPI3",25,0)
 S LRMV=0 F  S LRMV=$O(^DGPT(IFN,"M",LRMV)) Q:+LRMV'>0  D
"RTN","LREPI3",26,0)
 .;SEARCH FOR LEGIONAIRS HERE IN SUB FILE
"RTN","LREPI3",27,0)
 .I $P($G(^DGPT(IFN,"M",LRMV,300)),U,3)=1 D
"RTN","LREPI3",28,0)
 ..S ICD9=$O(^ICD9("BA","482.80 ",0)) Q:+ICD9'>0
"RTN","LREPI3",29,0)
 ..S ^TMP($J,"DG1",ICD9)=$P($G(^DGPT(IFN,70)),"^",10)_"^"_$$HLDATE^HLFNC($P($G(^DGPT(IFN,0)),"^",2))
"RTN","LREPI3",30,0)
 .I $D(^DGPT(IFN,"M",LRMV,0)) F LRI=5:1:9,11:1:15 D
"RTN","LREPI3",31,0)
 ..S ICD9=$P(^DGPT(IFN,"M",LRMV,0),U,LRI) Q:+ICD9'>0
"RTN","LREPI3",32,0)
 ..S ^TMP($J,"DG1",ICD9)=$P($G(^DGPT(IFN,70)),"^",10)_"^"_$$HLDATE^HLFNC($P($G(^DGPT(IFN,0)),"^",2))
"RTN","LREPI3",33,0)
 Q:'$D(^TMP($J,"DG1"))
"RTN","LREPI3",34,0)
BLD S ICD9=0 F  S ICD9=$O(^TMP($J,"DG1",ICD9)) Q:+ICD9'>0  D
"RTN","LREPI3",35,0)
 .S:'$D(DGCNT) DGCNT=1
"RTN","LREPI3",36,0)
 .K LRDATA
"RTN","LREPI3",37,0)
 .S LRDATA="DG1"_HLFS_DGCNT_HLFS_HLFS_$P(^ICD9(ICD9,0),U,1)
"RTN","LREPI3",38,0)
 .S LRDATA=LRDATA_LRCS_$P(^ICD9(ICD9,0),U,3)_LRCS_"I9"
"RTN","LREPI3",39,0)
 .I LRPROT=LRPROTX S LRDATA=LRDATA_HLFS_$P(^TMP($J,"DG1",ICD9),"^",2)_HLFS_HLFS_$S(ICD9=$P(^TMP($J,"DG1",ICD9),"^"):"PR",1:"")
"RTN","LREPI3",40,0)
 .S ^TMP("HL7",$J,DGCNT)=$$UP^XLFSTR(LRDATA),DGCNT=DGCNT+1
"RTN","LREPI3",41,0)
 K ^TMP($J,"DG1"),LRDATA,DGCNT,ICD9,LRMV
"RTN","LREPI3",42,0)
 Q
"RTN","LREPI3",43,0)
PID ;TO BUILD PID SEGMENT
"RTN","LREPI3",44,0)
 K MSG
"RTN","LREPI3",45,0)
 S FLDS="1,2,3,5,7,8,10,19" S MSG=$$EN^VAFHLPID(DFN,FLDS,LRPID)
"RTN","LREPI3",46,0)
 ;ADDITIONAL DATA ADDED HERE HOMELESSNES
"RTN","LREPI3",47,0)
 S:$$HOMELESS^SOWKHIRM(DFN) $P(MSG,HLFS,12)="HOMELESS"
"RTN","LREPI3",48,0)
 ;NOW GET PERIOD OF SERVICE
"RTN","LREPI3",49,0)
 K VAEL D ELIG^VADPT
"RTN","LREPI3",50,0)
 S:$G(VAEL(2))'="" $P(MSG,HLFS,28)=$P($G(^DIC(21,+VAEL(2),0)),U,3)
"RTN","LREPI3",51,0)
 K VAEL
"RTN","LREPI3",52,0)
 ;GET ZIP IF THERE
"RTN","LREPI3",53,0)
 K VAPA D ADD^VADPT S $P(MSG,HLFS,12)=$P(MSG,HLFS,12)_LRCS_$G(VAPA(6))
"RTN","LREPI3",54,0)
 K VAPA
"RTN","LREPI3",55,0)
 S LRPID=LRPID+1,LRCNT=LRCNT+1,^TMP("HLS",$J,LRCNT)=$$UP^XLFSTR(MSG)
"RTN","LREPI3",56,0)
 S LRMSGSZ=LRMSGSZ+$L(MSG)
"RTN","LREPI3",57,0)
 K FLDS,VAEL
"RTN","LREPI3",58,0)
 Q
"RTN","LREPI3",59,0)
PV1 ;TO BUILD PV1 SEGMENT
"RTN","LREPI3",60,0)
 K PTF,Y,C,LRDATA
"RTN","LREPI3",61,0)
 S $P(LRDATA,HLFS,1)=LRPV1
"RTN","LREPI3",62,0)
 S $P(LRDATA,HLFS,2)=$P(^TMP($J,LRPROT,DFN,LRENDT),U)
"RTN","LREPI3",63,0)
 S:$P(^TMP($J,LRPROT,DFN,LRENDT),U,3)="UPDT" $P(LRDATA,HLFS,2)="U"
"RTN","LREPI3",64,0)
 S $P(LRDATA,HLFS,44)=$$HLDATE^HLFNC(LRENDT)
"RTN","LREPI3",65,0)
 S PTF=$P(^TMP($J,LRPROT,DFN,LRENDT),U,2) I +PTF>0 D
"RTN","LREPI3",66,0)
 .Q:'$D(^DGPT(PTF,0))
"RTN","LREPI3",67,0)
 .Q:$P(^DGPT(PTF,0),U,6)'=3
"RTN","LREPI3",68,0)
 .Q:'$D(^DGPT(PTF,70))
"RTN","LREPI3",69,0)
 .S:+$P(^DGPT(PTF,70),U)>0 $P(LRDATA,HLFS,45)=$$HLDATE^HLFNC($P(^DGPT(PTF,70),U))
"RTN","LREPI3",70,0)
 .S (Y,LRDTY)=$P(^DGPT(PTF,70),U,3)
"RTN","LREPI3",71,0)
 .Q:+Y'>0
"RTN","LREPI3",72,0)
 .S Y=$$EXTERNAL^DILFD(45,72,,Y) ;removed direct reference to ^DD(45,72
"RTN","LREPI3",73,0)
 .;S C=$P(^DD(45,72,0),U,2) D Y^DIQ ;RLM
"RTN","LREPI3",74,0)
 .S $P(LRDATA,HLFS,36)=LRDTY_LRCS_Y_LRCS_"VA45"
"RTN","LREPI3",75,0)
 S LRCNT=LRCNT+1,^TMP("HLS",$J,LRCNT)="PV1"_HLFS_$$UP^XLFSTR(LRDATA),LRPV1=LRPV1+1
"RTN","LREPI3",76,0)
 S LRMSGSZ=LRMSGSZ+$L(LRDATA)
"RTN","LREPI3",77,0)
 Q:+$G(PTF)'>0
"RTN","LREPI3",78,0)
 Q:'$D(^DGPT(PTF,0))
"RTN","LREPI3",79,0)
 Q:$P(^DGPT(PTF,0),U,6)'=3
"RTN","LREPI3",80,0)
 S IFN=PTF D DG11
"RTN","LREPI3",81,0)
 D MOVE^LREPI2
"RTN","LREPI3",82,0)
 K PTF,Y,C,LRDATA,LRDTY,Y,IFN
"RTN","LREPI3",83,0)
 Q
"RTN","LREPI3",84,0)
 ;
"RTN","LREPI4")
0^6^B3184026
"RTN","LREPI4",1,0)
LREPI4 ;DALOI/SED-EMERGING PATHOGENS INPATIENT UPDATE ;5/1/98
"RTN","LREPI4",2,0)
 ;;5.2;LAB SERVICE;**132,175,260**;Sep 27, 1994
"RTN","LREPI4",3,0)
 ; Reference to ^DD supported by IA #999
"RTN","LREPI4",4,0)
 ; Reference to ^DGPT supported by IA #418
"RTN","LREPI4",5,0)
CHECK ;CHECKS TO SEE IF PRIOR TO INPATIENT DISCHARGE
"RTN","LREPI4",6,0)
 Q:VAIN(10)=""
"RTN","LREPI4",7,0)
 Q:$P($G(^DGPT(VAIN(10),0)),U,6)=3
"RTN","LREPI4",8,0)
 Q:LRRTYPE
"RTN","LREPI4",9,0)
SET ;SETS THE PTF RECORD FOR THE ENCOUNTER ONLY FOR AUTO RUNS
"RTN","LREPI4",10,0)
 Q:$D(^LAB(69.5,LRPATH,7,"B",VAIN(10)))
"RTN","LREPI4",11,0)
 K DD
"RTN","LREPI4",12,0)
 S DIC="^LAB(69.5,"_LRPATH_",7,",DIC(0)="L",X=VAIN(10),DLAYGO=69.5
"RTN","LREPI4",13,0)
 S DIC("P")=$P(^DD(69.5,14,0),U,2),DA(1)=LRPATH
"RTN","LREPI4",14,0)
 D FILE^DICN
"RTN","LREPI4",15,0)
 K DD,DO,DIC,DA,DLAYGO,X,Y
"RTN","LREPI4",16,0)
 Q
"RTN","LREPI4",17,0)
SEARCH ;LOOKS AT THE ENTRIES TO DETERMINE DISCHARGES
"RTN","LREPI4",18,0)
 S LRPATH=0 F  S LRPATH=$O(^TMP($J,"LREPI",LRPATH)) Q:LRPATH'>0  D
"RTN","LREPI4",19,0)
 .S LRPTF=0 F  S LRPTF=$O(^LAB(69.5,LRPATH,7,"B",LRPTF)) Q:+LRPTF'>0  D
"RTN","LREPI4",20,0)
 ..Q:$P($G(^DGPT(LRPTF,0)),U,6)'=3  ;Added $G to cure undef problems
"RTN","LREPI4",21,0)
 ..S DA=0 F DA=$O(^LAB(69.5,LRPATH,7,"B",LRPTF,DA)) Q:+DA'>0  D
"RTN","LREPI4",22,0)
 ...Q:$P(^LAB(69.5,LRPATH,7,DA,0),U,2)'=""&($E($P(^LAB(69.5,LRPATH,7,DA,0),U,2),1,5)'=$E(LRRPS,1,5))
"RTN","LREPI4",23,0)
 ...S LRPROT=$P(^LAB(69.5,LRPATH,0),U,7)
"RTN","LREPI4",24,0)
 ...S LRPAT=$P(^DGPT(LRPTF,0),U,1),LRENCDT=$P(^DGPT(LRPTF,0),U,2)
"RTN","LREPI4",25,0)
 ...Q:LRENCDT>LRRPE
"RTN","LREPI4",26,0)
 ...S ^TMP($J,LRPROT,LRPAT,LRENCDT)="I"_U_LRPTF_U_"UPDT"
"RTN","LREPI4",27,0)
 ...;NOW DATE THE ENTRY(S) THAT WERE UPDATED FOR AUTO RUN ONLY
"RTN","LREPI4",28,0)
 ...Q:LRRTYPE
"RTN","LREPI4",29,0)
 ...S:$P(^LAB(69.5,LRPATH,7,DA,0),U,2)="" $P(^LAB(69.5,LRPATH,7,DA,0),U,2)=LRRPS
"RTN","LREPI4",30,0)
 K LRPATH,LRPTF,DA,LRPROT,LRPAT,LRENCDT
"RTN","LREPI4",31,0)
 Q
"RTN","LREPI4",32,0)
 ;
"RTN","LREPIAK")
0^7^B9171569
"RTN","LREPIAK",1,0)
LREPIAK ;DALOI/HOAK-EXTRACT ACKNOWLEDGEMENT ;4/10/98
"RTN","LREPIAK",2,0)
 ;;5.2;LAB SERVICE;**175,260**;Sep 27, 1994
"RTN","LREPIAK",3,0)
 ;
"RTN","LREPIAK",4,0)
 ;
"RTN","LREPIAK",5,0)
 ;
"RTN","LREPIAK",6,0)
 ;
"RTN","LREPIAK",7,0)
 ;
"RTN","LREPIAK",8,0)
 ;
"RTN","LREPIAK",9,0)
 ;  ^HL(772,1732536,0) = 1700204^40^^I^^1695685^^1728022^I^4576
"RTN","LREPIAK",10,0)
 ;  ^HL(772,1732536,"IN",0) = ^^104^104^2980404^
"RTN","LREPIAK",11,0)
 ;  ^HL(772,1732536,"IN",1,0) = MSH^~|\&^NCH-AAC^200^NCH-LAB^525^19980403210341^^ACK~^1695685^P^2.2^^^NE^AL
"RTN","LREPIAK",12,0)
 ;                                   ID    LEVEL
"RTN","LREPIAK",13,0)
 ;  ^HL(772,1732536,"IN",99,0) = DSP^0001^029349629:19980401093501:000
"RTN","LREPIAK",14,0)
 ;  ^HL(772,1732536,"IN",101,0) = DSP^0001^010486381:19980331114855:000
"RTN","LREPIAK",15,0)
 ;  ^HL(772,1732536,"IN",104,0) = NNNN
"RTN","LREPIAK",16,0)
 ;                       CODE
"RTN","LREPIAK",17,0)
 ;                        \/
"RTN","LREPIAK",18,0)
LOOK ;  ^HL(772,1732536,"P") = 3^2980404.002435
"RTN","LREPIAK",19,0)
 ;
"RTN","LREPIAK",20,0)
 I '$G(LRPROT) S LRPROT=$G(HL("EID"))
"RTN","LREPIAK",21,0)
 D GENACK^HLMA1(HL("EID"),HLMTIENS,HL("EIDS"),"LM",1,.HLRESLTA)
"RTN","LREPIAK",22,0)
TEST ;
"RTN","LREPIAK",23,0)
 I '$G(HLFS) S HLFS=HL("FS")
"RTN","LREPIAK",24,0)
 S LRMID=HLMTIEN D
"RTN","LREPIAK",25,0)
  . D GETS^DIQ(772,LRMID,200,"Z","LREPRT","LREPMT")
"RTN","LREPIAK",26,0)
  . S LRMN=$P($G(LREPRT(772,LRMID_",",200,1,0)),HLFS,10)
"RTN","LREPIAK",27,0)
  . ;$P($G(^HL(772,LRMID,"IN",1,0)),HLFS,10)
"RTN","LREPIAK",28,0)
  . I '$G(LRMN) S LRMN=$P($G(HLHDR),HLFS,10)
"RTN","LREPIAK",29,0)
  . Q:'$G(LRMN)
"RTN","LREPIAK",30,0)
  . I $G(HLHDR) S LRNCHAAC=$P(HLHDR,HLFS,3)
"RTN","LREPIAK",31,0)
  . I '$G(LRNCHAAC) S LRNCHAAC=$P($G(LREPRT(772,LRMID_",",200,1,0)),HLFS,3)
"RTN","LREPIAK",32,0)
  . ;$P($G(^HL(772,LRMID,"IN",1,0)),HLFS,3)
"RTN","LREPIAK",33,0)
  . D GETS^DIQ(772,LRMID,20,"Z","LREPRT","LREPMT")
"RTN","LREPIAK",34,0)
  . S LRSTATUS=LREPRT(772,LRMID_",",20)
"RTN","LREPIAK",35,0)
  . ;S LRSTATUS=+$G(^HL(772,LRMID,"P"))
"RTN","LREPIAK",36,0)
  . I 'LRSTATUS S LRSTATUS=3
"RTN","LREPIAK",37,0)
  . D GETS^DIQ(772,LRMID,21,"Z","LREPRT","LREPMT")
"RTN","LREPIAK",38,0)
  . S LRSTADT=LREPRT(772,LRMID_",",21)
"RTN","LREPIAK",39,0)
  . ;S LRSTADT=$P(^HL(772,LRMID,"P"),U,2)
"RTN","LREPIAK",40,0)
  . S ^TMP($J,"LREPIACK",LRMN)=LRSTATUS_U_LRSTADT
"RTN","LREPIAK",41,0)
 I $G(LRNCHAAC)'="NCH-AAC" S HLRESLT=0 QUIT
"RTN","LREPIAK",42,0)
 D MAIL
"RTN","LREPIAK",43,0)
 S HLRESLT=0
"RTN","LREPIAK",44,0)
 QUIT
"RTN","LREPIAK",45,0)
 ;
"RTN","LREPIAK",46,0)
 ;
"RTN","LREPIAK",47,0)
 ;
"RTN","LREPIAK",48,0)
 ; Send a message to entries
"RTN","LREPIAK",49,0)
 ;
"RTN","LREPIAK",50,0)
MAIL I $G(DUZ)'>0 S LRDUZ2=.5
"RTN","LREPIAK",51,0)
 I $G(LRDUZ2)'>0 S LRDUZ2=.5
"RTN","LREPIAK",52,0)
 ;
"RTN","LREPIAK",53,0)
 ;
"RTN","LREPIAK",54,0)
 ;  ^XMB(3.8,"B","LR NCH-REPORT",4741)
"RTN","LREPIAK",55,0)
 K XMY S X="LR NCH-REPORT",XMDUZ=DUZ D INST^XMA21 I XMMG["not found" S HLRESLT="LR NCH-REPORT mail group not defined" QUIT
"RTN","LREPIAK",56,0)
 ;S LRGRP=$O(^XMB(3.8,"B","LR NCH-REPORT",0))
"RTN","LREPIAK",57,0)
 ;I '$G(LRGRP) S HLRESLT="LR NCH-REPORT mail group not defined" QUIT
"RTN","LREPIAK",58,0)
 ;
"RTN","LREPIAK",59,0)
 ;
"RTN","LREPIAK",60,0)
 ;  ^XMB(3.8,4741,0) = LR NCH-REPORT^PR^n^^^1^1059
"RTN","LREPIAK",61,0)
 ;  ^XMB(3.8,4741,1,0) = ^3.81P^2^2
"RTN","LREPIAK",62,0)
 ;  ^XMB(3.8,4741,1,1,0) = 10984
"RTN","LREPIAK",63,0)
 ;
"RTN","LREPIAK",64,0)
 ;  GET mail group members
"RTN","LREPIAK",65,0)
 ;S LRMEM=0
"RTN","LREPIAK",66,0)
 ;F  S LRMEM=$O(^XMB(3.8,LRGRP,1,LRMEM)) Q:+LRMEM'>0  S XMY(^(LRMEM,0))="" D
"RTN","LREPIAK",67,0)
 S XMDUZ=LRDUZ2
"RTN","LREPIAK",68,0)
 S XMTEXT="LRTXT("
"RTN","LREPIAK",69,0)
 S LRTXT(1)="Flash... This is an acknowledgement message from NCH"
"RTN","LREPIAK",70,0)
 S LRTXT(2)="Message #: "_$G(LRSTATUS)_" From the status file 771.6 message is categorized as: "
"RTN","LREPIAK",71,0)
 S LRX=0
"RTN","LREPIAK",72,0)
 F  S LRX=$O(^TMP($J,"LREPIACK",LRX)) Q:+LRX'>0  S LRSTATUS=$P(^(LRX),U),LRSTADT=$P(^(LRX),U,2) I $G(LRSTATUS) D
"RTN","LREPIAK",73,0)
  . S LRTXT(LRX)="Message: "_LRX_" "_$$GET1^DIQ(771.6,+LRSTATUS,.01)_" @ "_$$FMTE^XLFDT(LRSTADT)
"RTN","LREPIAK",74,0)
 S XMSUB="Acknowledgement message from Austin."
"RTN","LREPIAK",75,0)
 D ^XMD
"RTN","LREPIAK",76,0)
 ;
"RTN","LREPIAK",77,0)
 ;
"RTN","LREPIAK",78,0)
 QUIT
"RTN","LREPIAK",79,0)
 ;
"RTN","LREPIAK",80,0)
 ;
"RTN","LREPIAK",81,0)
 ;
"RTN","LREPIAK",82,0)
END ;
"RTN","LREPIAK",83,0)
 ;
"RTN","LREPIAK",84,0)
 K LRX,LRSTATUS,LRSTADT,LRDUZ2,LREPRT,LRMID,LRMN,LRNCHAAC,LRTXT,XMMG,XMSUB,XMTEXT
"RTN","LREPIAK",85,0)
 K ^TMP($J,"LREPIACK")
"RTN","LREPIAK",86,0)
 ;
"RTN","LREPIAK",87,0)
 QUIT
"RTN","LREPIPH")
0^8^B9292693
"RTN","LREPIPH",1,0)
LREPIPH ;DALOI/RLM-EMERGING PATHOGENS HL7 SEGMENT BUILDER ;1/1/98
"RTN","LREPIPH",2,0)
 ;;5.2;LAB SERVICE;**260**;Sep 27, 1994
"RTN","LREPIPH",3,0)
 ; Reference to ^ICD9 supported by IA #10082
"RTN","LREPIPH",4,0)
 ; Reference to ^PXD(811.9 supported by IA #1256
"RTN","LREPIPH",5,0)
 ; Reference to ^PSDRUG supported by IA #221-A
"RTN","LREPIPH",6,0)
 ; Reference to FIDATA^PXRM supported by IA #2182
"RTN","LREPIPH",7,0)
 Q
"RTN","LREPIPH",8,0)
RXNT ;Findings Data
"RTN","LREPIPH",9,0)
 K FINDINGS S LRNTE1=1,(LRDRSQ1,LRDRSEQ)=0
"RTN","LREPIPH",10,0)
 S LRDRSEQ=LRDRSEQ+1
"RTN","LREPIPH",11,0)
 M FINDINGS=^TMP("LREPISRCH",$J,DFN,"FIND")
"RTN","LREPIPH",12,0)
 S LRFIND=0 F  S LRFIND=$O(FINDINGS(LRFIND)) Q:'LRFIND  D
"RTN","LREPIPH",13,0)
  . ;S LRENDTX=$G(FINDINGS(LRFIND,"DATE"))
"RTN","LREPIPH",14,0)
  . ;D PV1
"RTN","LREPIPH",15,0)
  . I $D(FINDINGS(LRFIND,"DRUG")) S LRDRSQ1=LRDRSEQ D DRUG
"RTN","LREPIPH",16,0)
  . I $D(FINDINGS(LRFIND,"FINDING")) D FIND
"RTN","LREPIPH",17,0)
  . S LRDRSQ1=0 Q
"RTN","LREPIPH",18,0)
 K FINDINGS,^TMP("LREPISRCH",$J,DFN) S LRPVVV=0 Q
"RTN","LREPIPH",19,0)
DRUG ;
"RTN","LREPIPH",20,0)
 D PV1
"RTN","LREPIPH",21,0)
 S LRDRUG=+FINDINGS(LRFIND,"FINDING")
"RTN","LREPIPH",22,0)
 S LRDRGC=$P($G(^PSDRUG(LRDRUG,2)),"^",4)
"RTN","LREPIPH",23,0)
 S LRDATA="ZXE"_HLFS_LRDRGC_HLFS_FINDINGS(LRFIND,"DRUG")_LRCS_"NDC"_HLFS_FINDINGS(LRFIND,"DSUP")_HLFS_$$HLDATE^HLFNC($G(FINDINGS(LRFIND,"RDATE")))_HLFS_$$HLDATE^HLFNC($G(FINDINGS(LRFIND,"DATE")))_HLFS
"RTN","LREPIPH",24,0)
 S LRDATA=LRDATA_$$HLDATE^HLFNC($G(FINDINGS(LRFIND,"STOPDATE")))_HLFS_+LRDRSQ1
"RTN","LREPIPH",25,0)
 ;S LRDATA="RXO"_HLFS_LRDRGC_LRCS_FINDINGS(LRFIND,"DRUG")_LRCS_"NDC"_HLFS_LRDRGC_HLFS_HLFS_FINDINGS(LRFIND,"DSUP")_HLFS_HLFS_HLFS_HLFS_HLFS_HLFS_HLFS_HLFS_HLFS_+LRDRSQ1
"RTN","LREPIPH",26,0)
 S LRCNT=LRCNT+1,^TMP("HLS",$J,LRCNT)=$$UP^XLFSTR(LRDATA),LRMSGSZ=LRMSGSZ+$L(LRDATA)
"RTN","LREPIPH",27,0)
 K LRDRGC S LRDRSEQ=LRDRSEQ+1 Q  ;S LRPVVV=0 Q
"RTN","LREPIPH",28,0)
FIND ;
"RTN","LREPIPH",29,0)
 ;Q:$D(FINDINGS(LRFIND,"RDATE"))  ;Don't send DSP if RX data is sent.
"RTN","LREPIPH",30,0)
 D PV1
"RTN","LREPIPH",31,0)
 S LRTRM=$P($G(FINDINGS(LRFIND,"TERM")),"^")
"RTN","LREPIPH",32,0)
 S LRTOLD=$G(FINDINGS(LRFIND,"ALTTRM")) I LRTOLD'?1.N S LRTOLD="00"
"RTN","LREPIPH",33,0)
 S LRDATA="DSP"_HLFS_LRNTE1_HLFS_HLFS_$$HLDATE^HLFNC(FINDINGS(LRFIND,"DATE"),"TS")_LRCS_LRTRM_LRCS_LRTOLD_LRCS_$G(FINDINGS(LRFIND,"RESULT"))_LRCS_$G(FINDINGS(LRFIND,"S/N"))_HLFS_HLFS_+LRDRSQ1
"RTN","LREPIPH",34,0)
 S LRNTE1=LRNTE1+1,LRCNT=LRCNT+1,^TMP("HLS",$J,LRCNT)=$$UP^XLFSTR(LRDATA),LRMSGSZ=LRMSGSZ+$L(LRDATA)
"RTN","LREPIPH",35,0)
 Q  ;S LRPVVV=0 Q
"RTN","LREPIPH",36,0)
PV1 ;Build PV1
"RTN","LREPIPH",37,0)
 Q:$G(LRPVVV)
"RTN","LREPIPH",38,0)
 S LRPTY=$P(^TMP($J,LRPROT,DFN,LRENDT),U)
"RTN","LREPIPH",39,0)
 S:$P(^TMP($J,LRPROT,DFN,LRENDT),U,3)="UPDT" LRPTY="U"
"RTN","LREPIPH",40,0)
 I $P($G(FINDINGS(LRFIND)),"^",2)]"",$P($G(FINDINGS(LRFIND)),"^",2)'="U" S LRPTY=$P($G(FINDINGS(LRFIND)),"^",2)
"RTN","LREPIPH",41,0)
 I LRPTY'="I",LRPTY'="O",LRPTY'="U" S LRPTY="U"
"RTN","LREPIPH",42,0)
 S LRDATA="PV1|"_LRPV1_"|"_LRPTY_"||||||||||||||||||||||||||||||||||||||||||"_$$HLDATE^HLFNC(LRENDT)
"RTN","LREPIPH",43,0)
 S LRCNT=LRCNT+1,^TMP("HLS",$J,LRCNT)=$$UP^XLFSTR(LRDATA),LRMSGSZ=LRMSGSZ+$L(LRDATA),LRPV1=LRPV1+1
"RTN","LREPIPH",44,0)
 S LRPVVV=1
"RTN","LREPIPH",45,0)
 Q
"RTN","LREPIPH",46,0)
ZEOR ;LREPIPH
"RTN","LREPIRP")
0^9^B20241479
"RTN","LREPIRP",1,0)
LREPIRP ;DALOI/SED-EMERGING PATHOGENS HL7 REPORT CONVERSION ;1/1/98
"RTN","LREPIRP",2,0)
 ;;5.2;LAB SERVICE;**132,157,175,260**;Sep 27, 1994
"RTN","LREPIRP",3,0)
 ; Reference to ^DIC(21 supported by IA #2504
"RTN","LREPIRP",4,0)
 Q
"RTN","LREPIRP",5,0)
PROCESS K ^TMP($J,"MSG")
"RTN","LREPIRP",6,0)
 S SP="                        ",LRPROT=HL("EID")
"RTN","LREPIRP",7,0)
 S LRMGP=+$P($G(^LAB(69.4,LRPROT,0)),U,2)
"RTN","LREPIRP",8,0)
 Q:+LRMGP'>0
"RTN","LREPIRP",9,0)
 S LRMGPN=$$GET1^DIQ(69.4,LRPROT,1)
"RTN","LREPIRP",10,0)
 S XMSUB=$P(^LAB(69.4,LRPROT,0),U,5)
"RTN","LREPIRP",11,0)
 S:XMSUB="" XMSUB="Verification Report"
"RTN","LREPIRP",12,0)
 S MSGCNT=1,HLFS=HL("FS"),LRCS=$E(HL("ECH"),1,1)
"RTN","LREPIRP",13,0)
 N I,J,X F I=1:1 X HLNEXT Q:HLQUIT'>0  S LRHL7=HLNODE D
"RTN","LREPIRP",14,0)
 .S MSG="" S SEG=$P(LRHL7,HLFS,1) I $L($T(@SEG)) D @SEG
"RTN","LREPIRP",15,0)
 .I MSG]"" S ^TMP($J,"MSG",MSGCNT)=MSG,MSGCNT=MSGCNT+1
"RTN","LREPIRP",16,0)
 ; Add totals here.  They will appear on all messages.
"RTN","LREPIRP",17,0)
 S XMDUZ="POSTMASTER"
"RTN","LREPIRP",18,0)
 S XMY("G."_LRMGPN)="" ;$P(^XMB(3.8,LRMGP,0),U,1))=""
"RTN","LREPIRP",19,0)
 S XMTEXT="^TMP("_$J_",""MSG"","
"RTN","LREPIRP",20,0)
 D ^XMD
"RTN","LREPIRP",21,0)
 K LRMGP,LRMGPN
"RTN","LREPIRP",22,0)
 K ISITE
"RTN","LREPIRP",23,0)
 Q
"RTN","LREPIRP",24,0)
MSH ;
"RTN","LREPIRP",25,0)
 S SITE=$P(LRHL7,HLFS,4),ISITE=""
"RTN","LREPIRP",26,0)
 S:SITE="" SITE="UNDEFINED"
"RTN","LREPIRP",27,0)
 ;S:$D(^DIC(4,"D",SITE)) ISITE=$O(^DIC(4,"D",SITE,0))
"RTN","LREPIRP",28,0)
 ;I +ISITE>0,$G(^DIC(4,ISITE,0))'="" S SITE=$P(^DIC(4,SITE,0),U,1)
"RTN","LREPIRP",29,0)
 S X=SITE S DIC="^DIC(4,",DIC(0)="SX",D="D" D IX^DIC
"RTN","LREPIRP",30,0)
 S SITE=$P(Y,"^",2) S:Y=-1 SITE="UNDEFINED" ;REMOVED HARDCODED LOOKUP
"RTN","LREPIRP",31,0)
 ;PER DBIA 2508
"RTN","LREPIRP",32,0)
 S MSG="Message Date/Time  "_$$CDT($P(LRHL7,HLFS,7))
"RTN","LREPIRP",33,0)
 S MSG=MSG_"           HL7 Message # "_$P(LRHL7,HLFS,10)
"RTN","LREPIRP",34,0)
 S ^TMP($J,"MSG",MSGCNT)=MSG,MSGCNT=MSGCNT+1,MSG=""
"RTN","LREPIRP",35,0)
 S ^TMP($J,"MSG",MSGCNT)="Sending Site  "_SITE,MSGCNT=MSGCNT+1
"RTN","LREPIRP",36,0)
 S ^TMP($J,"MSG",MSGCNT)=MSG,MSGCNT=MSGCNT+1,MSG=""
"RTN","LREPIRP",37,0)
 Q
"RTN","LREPIRP",38,0)
NTE ;NOTE AND COMMENTS
"RTN","LREPIRP",39,0)
 S TYPE=$P($P(LRHL7,HLFS,3),LRCS,1),MSG=""
"RTN","LREPIRP",40,0)
 I TYPE="T" D
"RTN","LREPIRP",41,0)
 .S MSG="TOTAL "_$P($P(LRHL7,HLFS,3),LRCS,2)_"  "
"RTN","LREPIRP",42,0)
 .S MSG=MSG_$P($P(LRHL7,HLFS,3),LRCS,3)_"  "_$P($P(LRHL7,HLFS,3),LRCS,4)
"RTN","LREPIRP",43,0)
 I +TYPE>0 D
"RTN","LREPIRP",44,0)
 .;S:$G(^TMP($J,"MSG",(MSGCNT-1)))'="" ^TMP($J,"MSG",MSGCNT)="",MSGCNT=MSGCNT+1
"RTN","LREPIRP",45,0)
 .S MSG="*********  "_TYPE_"  "_$P($P(LRHL7,HLFS,3),LRCS,2)_"  *********"
"RTN","LREPIRP",46,0)
 I MSG="" D
"RTN","LREPIRP",47,0)
 .S MSG=$P($P($P(LRHL7,HLFS,3),LRCS,2)," ",1,3)
"RTN","LREPIRP",48,0)
 .S MSG=MSG_"  "_$$CDT($P($P($P(LRHL7,HLFS,3),LRCS,2)," ",4))
"RTN","LREPIRP",49,0)
 .S MSG=MSG_"  TO  "_$$CDT($P($P($P(LRHL7,HLFS,3),LRCS,2)," ",6))
"RTN","LREPIRP",50,0)
 .S MSG=MSG_"    Message Seq # "_$P($P(LRHL7,HLFS,3),LRCS,3)
"RTN","LREPIRP",51,0)
 .S MSG=MSG_"  "_$S(TYPE="R":"manual",1:"Auto")
"RTN","LREPIRP",52,0)
 K TYPE
"RTN","LREPIRP",53,0)
 Q
"RTN","LREPIRP",54,0)
PID ;PATIENT INFO
"RTN","LREPIRP",55,0)
 S:$G(^TMP($J,"MSG",(MSGCNT-1)))'="" ^TMP($J,"MSG",MSGCNT)="",MSGCNT=MSGCNT+1
"RTN","LREPIRP",56,0)
 S NM=$P(LRHL7,HLFS,6),SSN=$P(LRHL7,HLFS,20)
"RTN","LREPIRP",57,0)
 S SSN=$E(SSN,1,3)_"-"_$E(SSN,4,5)_"-"_$E(SSN,6,9)
"RTN","LREPIRP",58,0)
 S DOB=$$CDT($P(LRHL7,HLFS,8)),NM=$P(NM,LRCS,2)_" "_$P(NM,LRCS,1)
"RTN","LREPIRP",59,0)
 S SX=$P(LRHL7,HLFS,9),AD=$P($P(LRHL7,HLFS,12),LRCS,1)
"RTN","LREPIRP",60,0)
 S ZP=$P($P(LRHL7,HLFS,12),LRCS,2),POS=$P(LRHL7,HLFS,28),POSN=""
"RTN","LREPIRP",61,0)
 I POS'="",$D(^DIC(21,"D",POS)) S POS=$O(^DIC(21,"D",POS,""))
"RTN","LREPIRP",62,0)
 S:POS'="" POSN=$P($G(^DIC(21,POS,0)),U,1)
"RTN","LREPIRP",63,0)
 S MSG=NM_"    "_SSN_"    "_DOB_"    "_SX
"RTN","LREPIRP",64,0)
 S:POSN'="" MSG=MSG_"   "_POSN
"RTN","LREPIRP",65,0)
 S MSG=MSG_"   "_AD_"   "_ZP
"RTN","LREPIRP",66,0)
 S ^TMP($J,"MSG",MSGCNT)="",MSGCNT=MSGCNT+1
"RTN","LREPIRP",67,0)
 K NM,SSN,DOB,SX,POS,AD,ZP,POSN
"RTN","LREPIRP",68,0)
 Q
"RTN","LREPIRP",69,0)
PV1 ;PATIENT VISIT ENCOUNTER
"RTN","LREPIRP",70,0)
 S TYPE=$P(LRHL7,HLFS,3)
"RTN","LREPIRP",71,0)
 S ENC=$S(TYPE="O":"Accession ",1:"Admission ")_"Date  "
"RTN","LREPIRP",72,0)
 S TYPE=$S(TYPE="U":"Update",TYPE="I":"Inpatient ",1:"Outpatient")
"RTN","LREPIRP",73,0)
 S MSG=TYPE_"  "_ENC_$$CDT($P(LRHL7,HLFS,45))
"RTN","LREPIRP",74,0)
 S ^TMP($J,"MSG",MSGCNT)=MSG,MSGCNT=MSGCNT+1,MSG=""
"RTN","LREPIRP",75,0)
 Q:$P(LRHL7,HLFS,46)=""
"RTN","LREPIRP",76,0)
 S MSG="            Discharge Date  "_$$CDT($P(LRHL7,HLFS,46))
"RTN","LREPIRP",77,0)
 S MSG=MSG_"  Discharge Disposition  "_$P($P(LRHL7,HLFS,37),LRCS,2)
"RTN","LREPIRP",78,0)
 K TYPE
"RTN","LREPIRP",79,0)
 Q
"RTN","LREPIRP",80,0)
CDT(DATE) ;CONVERTS THE DATE AND TIME
"RTN","LREPIRP",81,0)
 S X=$E(DATE,5,6)_"-"_$E(DATE,7,8)_"-"_$E(DATE,1,4)
"RTN","LREPIRP",82,0)
 S:$E(DATE,9,12)'="" X=X_"@"_$E(DATE,9,12)
"RTN","LREPIRP",83,0)
 S:X="--" X=""
"RTN","LREPIRP",84,0)
 Q X
"RTN","LREPIRP",85,0)
DG1 ;DIAGNOSES
"RTN","LREPIRP",86,0)
 S:$G(^TMP($J,"MSG",(MSGCNT-1)))'="" ^TMP($J,"MSG",MSGCNT)="",MSGCNT=MSGCNT+1
"RTN","LREPIRP",87,0)
 S MSG=$P($P(LRHL7,HLFS,4),LRCS,1)
"RTN","LREPIRP",88,0)
 S MSG=MSG_$E(SP,1,(15-$L(MSG)))_$P($P(LRHL7,HLFS,4),LRCS,2)
"RTN","LREPIRP",89,0)
 Q
"RTN","LREPIRP",90,0)
OBR ;OBSERVATION REPORTING
"RTN","LREPIRP",91,0)
 ;S:$G(^TMP($J,"MSG",(MSGCNT-1)))'="" ^TMP($J,"MSG",MSGCNT)="",MSGCNT=MSGCNT+1
"RTN","LREPIRP",92,0)
 S TST=$P(LRHL7,HLFS,5),TSTNM=$P(TST,LRCS,2),MSG=""
"RTN","LREPIRP",93,0)
 S:TSTNM="" TSTNM=$P(TST,LRCS,5)
"RTN","LREPIRP",94,0)
 S TOP=$P($P(LRHL7,HLFS,16),LRCS,3)
"RTN","LREPIRP",95,0)
 S ENTRY=$P($P(LRHL7,HLFS,27),LRCS,2)
"RTN","LREPIRP",96,0)
 S:+ENTRY MSG="ORG # "_ENTRY_"  "
"RTN","LREPIRP",97,0)
 S MSG=MSG_$$CDT($P(LRHL7,HLFS,8))_"  "
"RTN","LREPIRP",98,0)
 S:$P(LRHL7,HLFS,19)'="" MSG=MSG_$P(LRHL7,HLFS,19)_"  "
"RTN","LREPIRP",99,0)
 S MSG=MSG_TSTNM_"  "_TOP
"RTN","LREPIRP",100,0)
 K TST,TSTNM,TOP,ENTRY
"RTN","LREPIRP",101,0)
 Q
"RTN","LREPIRP",102,0)
OBX ;RESULTS
"RTN","LREPIRP",103,0)
 I $P(LRHL7,HLFS,3)="ST" D
"RTN","LREPIRP",104,0)
 .S TST=$P(LRHL7,HLFS,4),TSTNM=$P(TST,LRCS,5)
"RTN","LREPIRP",105,0)
 .;S:TSTNM="" TSTNM=$P(TST,LRCS,5)
"RTN","LREPIRP",106,0)
 .S OV=$P(LRHL7,HLFS,6)
"RTN","LREPIRP",107,0)
 I $P(LRHL7,HLFS,3)="CE" D
"RTN","LREPIRP",108,0)
 .S TSTNM=""
"RTN","LREPIRP",109,0)
 .S OV=$P($P(LRHL7,HLFS,6),LRCS,2)
"RTN","LREPIRP",110,0)
 S MSG="",ENTRY=$P(LRHL7,HLFS,5) S:+ENTRY MSG=ENTRY_"  "
"RTN","LREPIRP",111,0)
 S MSG=MSG_TSTNM_"  "
"RTN","LREPIRP",112,0)
 S FD=$$CDT($P(LRHL7,HLFS,15)),RR=$P(LRHL7,HLFS,8)
"RTN","LREPIRP",113,0)
 S UN=$P(LRHL7,HLFS,7),AF=""
"RTN","LREPIRP",114,0)
 S MSG="     "_MSG_FD_"   "_OV_"  "_UN_"  "_RR
"RTN","LREPIRP",115,0)
 Q:$P(LRHL7,HLFS,9)=""
"RTN","LREPIRP",116,0)
 S MSG=MSG_$E(SP,1,(40-$L(MSG)))_$P(LRHL7,HLFS,9)
"RTN","LREPIRP",117,0)
 Q
"RTN","LREPIRP",118,0)
 ;
"RTN","LREPISRV")
0^10^B20851844
"RTN","LREPISRV",1,0)
LREPISRV ;DALOI/RLM-EPI data server ;8/2/2000
"RTN","LREPISRV",2,0)
 ;;5.2;LAB SERVICE;**260**;Sep 27, 1994
"RTN","LREPISRV",3,0)
 ; Reference to ^%ZOSF supported by IA #10096
"RTN","LREPISRV",4,0)
START ;
"RTN","LREPISRV",5,0)
 K ^TMP($J,"LREPDATA")
"RTN","LREPISRV",6,0)
 S LREPST=$P($$SITE^VASITE,"^",2)
"RTN","LREPISRV",7,0)
 ;Determine station number
"RTN","LREPISRV",8,0)
 S X=XQSUB X ^%ZOSF("UPPERCASE") S LREPSUB=Y
"RTN","LREPISRV",9,0)
 S ^TMP($J,"LREPDATA",1)=LREPSUB_" triggered at "_LREPST_" by "_XMFROM_" on "_XQDATE
"RTN","LREPISRV",10,0)
 ;The first line of the message tells who requested the action and when
"RTN","LREPISRV",11,0)
 S ^TMP($J,"LREPDATA",2)="No"_$S(LREPSUB["REPORT":" report generated",1:"thing done")_" at "_LREPST
"RTN","LREPISRV",12,0)
 ;The second line tells when the server is activated and no data can be gathered from the MailMan message.
"RTN","LREPISRV",13,0)
 S LREPLNT=1
"RTN","LREPISRV",14,0)
 I LREPSUB["REPORT" G REPORT
"RTN","LREPISRV",15,0)
 ;If the subject contains "REPORT" send a report of the currently registered patients to the Clozapine group on Forum
"RTN","LREPISRV",16,0)
EXIT ;If all went well, report that too.
"RTN","LREPISRV",17,0)
 S %H=$H D YMD^%DTC S XMDUN="EPI SYSTEM",XMDUZ=".5",XMSUB=LREPST_" EPI ("_X_%_")",XMTEXT="^TMP($J,""LREPDATA"","
"RTN","LREPISRV",18,0)
 S XMY("G.EPI-SITE@CINCINNATI.VA.GOV")=""
"RTN","LREPISRV",19,0)
 ;S XMY("MORTON,RANDY@DEV.ISC-DALLAS.VA.GOV")="" ;,XMY("RANDY.MORTON2@MED.VA.GOV")=""
"RTN","LREPISRV",20,0)
 D ^XMD
"RTN","LREPISRV",21,0)
 ;Mail the errors and successes back to the EPI group at Cincinnati.
"RTN","LREPISRV",22,0)
 K ^TMP($J,"LREPDATA")
"RTN","LREPISRV",23,0)
 K %,%DT,%H,D,DIC,X,XMDUN,XMDUZ,XMER,XMFROM,XMREC,XMRG,XMSUB,XMTEXT,XMY,XMZ,XQDATE,XQSUB,Y,LREPA,LREPB,LREPDA,LREPDA1,LREPDATA,LREPDFN,LREPDM,LREPDOC
"RTN","LREPISRV",24,0)
 K LREPDOM,LREPDTA,LREPED,LREPER,LREPLNT,LREPNM,LREPPT,LREPSD1,LREPSDT,LREPSSN,LREPST,LREPSUB,LREPTC,YSPR,LREPWB,LREPX,ZTQUEUED,ZTSK
"RTN","LREPISRV",25,0)
 K LRA,LRCOND,LRDATA,LRFILL,LRI,LRPATH,LRTEST
"RTN","LREPISRV",26,0)
 Q
"RTN","LREPISRV",27,0)
 ;F  X XMREC Q:XMER<0  S XMRG=$TR(XMRG,"- ","") D
"RTN","LREPISRV",28,0)
REPORT ;send report of current registrations to the Clozapine group on Forum
"RTN","LREPISRV",29,0)
 S $P(LRFILL," ",256)=""
"RTN","LREPISRV",30,0)
 S LRA=0 F  S LRA=$O(^LAB(69.5,LRA)) Q:'LRA  D
"RTN","LREPISRV",31,0)
  . S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)="*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*="
"RTN","LREPISRV",32,0)
  . S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)="Pathogen                       Ref# Cy LD Protocol FPTF Active"
"RTN","LREPISRV",33,0)
  . S LRPATH=$G(^LAB(69.5,LRA,0))
"RTN","LREPISRV",34,0)
  . I LRPATH="" S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)="IEN # "_LRA_" damaged. (NULL)" Q
"RTN","LREPISRV",35,0)
  . I '$P(LRPATH,"^",7) S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)="IEN # "_LRA_" damaged. (No Protocol)" Q
"RTN","LREPISRV",36,0)
  . S LRDATA=$P(LRPATH,"^")_$E(LRFILL,$L($P(LRPATH,"^")),30)_$J($P(LRPATH,"^",9),4)_$J($P(LRPATH,"^",5),3)_$J($P(LRPATH,"^",3),3)_$J($P(^ORD(101,$P(LRPATH,"^",7),0),"^"),9)_$J($P(LRPATH,"^",8),4)_$J($P(LRPATH,"^",2),4)
"RTN","LREPISRV",37,0)
  . S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)=LRDATA
"RTN","LREPISRV",38,0)
  . S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)="   Lab Test                                          Indicator      Value"
"RTN","LREPISRV",39,0)
LTEST  . S LRI=0 F  S LRI=$O(^LAB(69.5,LRA,1,LRI)) Q:'LRI  D
"RTN","LREPISRV",40,0)
  . . S LRTEST=$G(^LAB(69.5,LRA,1,LRI,0))
"RTN","LREPISRV",41,0)
  . . I $P(LRTEST,"^")="" S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)="IEN # "_LRA_" damaged. (No Test)" Q
"RTN","LREPISRV",42,0)
  . . S LRCOND=$P(LRTEST,"^",2),LRCOND=$S(LRCOND=1:"Ref. Range",LRCOND=2:"Contains",LRCOND=3:"Greater Than",LRCOND=4:"Less Than",LRCOND=5:"Equal To",1:"Unknown")
"RTN","LREPISRV",43,0)
  . . S LRDATA=$P($G(^LAB(60,$P(LRTEST,"^"),0),0),"^")_$E(LRFILL,$L($P($G(^LAB(60,$P(LRTEST,"^"),0),0),"^")),40)_$J(LRCOND,20)_$J($P(LRTEST,"^",3),10)
"RTN","LREPISRV",44,0)
  . . S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)=LRDATA
"RTN","LREPISRV",45,0)
  . S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)="   Etiology"
"RTN","LREPISRV",46,0)
ETIO  . S LRI=0 F  S LRI=$O(^LAB(69.5,LRA,2,LRI)) Q:'LRI  D
"RTN","LREPISRV",47,0)
  . . S LRTEST=$G(^LAB(69.5,LRA,2,LRI,0))
"RTN","LREPISRV",48,0)
  . . I $P(LRTEST,"^")="" S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)="IEN # "_LRA_" damaged. (No Etiology)" Q
"RTN","LREPISRV",49,0)
  . . S LRCOND=$P(LRTEST,"^",2),LRCOND=$S(LRCOND=1:"Ref. Range",LRCOND=2:"Contains",LRCOND=3:"Greater Than",LRCOND=4:"Less Than",LRCOND=5:"Equal To",1:"Unknown")
"RTN","LREPISRV",50,0)
  . . S LRDATA=$P($G(^LAB(61.2,$P(LRTEST,"^"),0),0),"^")
"RTN","LREPISRV",51,0)
  . . S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)=LRDATA
"RTN","LREPISRV",52,0)
  . S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)="   Microbial Susceptibility"
"RTN","LREPISRV",53,0)
MICROB  . S LRI=0 F  S LRI=$O(^LAB(69.5,LRA,4,LRI)) Q:'LRI  D
"RTN","LREPISRV",54,0)
  . . S LRTEST=$G(^LAB(69.5,LRA,4,LRI,0))
"RTN","LREPISRV",55,0)
  . . I $P(LRTEST,"^")="" S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)="IEN # "_LRA_" damaged. (No Microbial Susceptibility)" Q
"RTN","LREPISRV",56,0)
  . . S LRDATA=$P($G(^LAB(62.06,$P(LRTEST,"^"),0),0),"^")
"RTN","LREPISRV",57,0)
  . . S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)=LRDATA
"RTN","LREPISRV",58,0)
 G EXIT
"RTN","LREPISRV",59,0)
OUT S LREPLNT=$G(LREPLNT)+1,^TMP($J,"LREPDATA",LREPLNT)=XMRG_LREPER_LREPST Q
"RTN","LREPISRV",60,0)
 ;Build the text for the return message here.
"RTN","LREPISRV",61,0)
ZEOR ;LREPISRV
"SEC","^DIC",69.51,69.51,0,"AUDIT")

"SEC","^DIC",69.51,69.51,0,"DD")
@
"SEC","^DIC",69.51,69.51,0,"DEL")
#
"SEC","^DIC",69.51,69.51,0,"LAYGO")
#
"SEC","^DIC",69.51,69.51,0,"RD")

"SEC","^DIC",69.51,69.51,0,"WR")
#
"VER")
8.0^22.0
"^DD",69.51,69.51,0)
FIELD^^.01^1
"^DD",69.51,69.51,0,"DDA")
N
"^DD",69.51,69.51,0,"DT")
3000602
"^DD",69.51,69.51,0,"IX","B",69.51,.01)

"^DD",69.51,69.51,0,"NM","LREPI REMINDER LINK")

"^DD",69.51,69.51,.01,0)
REMINDER^RP811.9'^PXD(811.9,^0;1^Q
"^DD",69.51,69.51,.01,.1)
POINTER TO CLINICAL REMINDER
"^DD",69.51,69.51,.01,1,0)
^.1
"^DD",69.51,69.51,.01,1,1,0)
69.51^B
"^DD",69.51,69.51,.01,1,1,1)
S ^LAB(69.51,"B",$E(X,1,30),DA)=""
"^DD",69.51,69.51,.01,1,1,2)
K ^LAB(69.51,"B",$E(X,1,30),DA)
"^DD",69.51,69.51,.01,3)
Select an entry from the REMINDER DEFINITION (#811.9) file.
"^DD",69.51,69.51,.01,21,0)
^^3^3^3000602^
"^DD",69.51,69.51,.01,21,1,0)
This field holds a pointer to the REMINDER DEFINITION (#811.9) file. These
"^DD",69.51,69.51,.01,21,2,0)
entries will be used to determine which Clinical Reminders will be used to
"^DD",69.51,69.51,.01,21,3,0)
generate data for the Hepatitis C registry.
"^DD",69.51,69.51,.01,"DT")
3000602
"^DIC",69.51,69.51,0)
LREPI REMINDER LINK^69.51
"^DIC",69.51,69.51,0,"GL")
^LAB(69.51,
"^DIC",69.51,69.51,"%",0)
^1.005^^
"^DIC",69.51,69.51,"%D",0)
^^4^4^3000629^
"^DIC",69.51,69.51,"%D",1,0)
This file holds a pointer to the REMINDER DEFINITION (#811.9) file for
"^DIC",69.51,69.51,"%D",2,0)
use by the Emerging Pathogens Initiative (EPI). The entries in this file
"^DIC",69.51,69.51,"%D",3,0)
are used to determine which Clinical Reminders will be used to generate
"^DIC",69.51,69.51,"%D",4,0)
data for the Hepatitis C registry.
"^DIC",69.51,"B","LREPI REMINDER LINK",69.51)

**END**
**END**

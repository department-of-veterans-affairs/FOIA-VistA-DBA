Released IB*2*229 SEQ #204
Extracted from mail message
**KIDS**:IB*2.0*229^

**INSTALL NAME**
IB*2.0*229
"BLD",4884,0)
IB*2.0*229^INTEGRATED BILLING^0^3030828^y
"BLD",4884,1,0)
^^8^8^3030828^^^^
"BLD",4884,1,1,0)
This patch updates the Information/Warning records in file #361.
"BLD",4884,1,2,0)
Ref. NOIS FGH-0203-31133
"BLD",4884,1,3,0)
Routine:  IB20P229, a database conversion routine.
"BLD",4884,1,4,0)
  
"BLD",4884,1,5,0)
This patch also fixes a display problem with the Contact Date
"BLD",4884,1,6,0)
and Call Ref. No. on the IBCN PATIENT INSURANCE screens.
"BLD",4884,1,7,0)
Ref. NOIS BAY-0403-32311
"BLD",4884,1,8,0)
Routine: IBCNSP0
"BLD",4884,4,0)
^9.64PA^^
"BLD",4884,"INI")

"BLD",4884,"INID")
^^
"BLD",4884,"INIT")
IB20P229
"BLD",4884,"KRN",0)
^9.67PA^8989.52^19
"BLD",4884,"KRN",.4,0)
.4
"BLD",4884,"KRN",.401,0)
.401
"BLD",4884,"KRN",.402,0)
.402
"BLD",4884,"KRN",.403,0)
.403
"BLD",4884,"KRN",.5,0)
.5
"BLD",4884,"KRN",.84,0)
.84
"BLD",4884,"KRN",3.6,0)
3.6
"BLD",4884,"KRN",3.8,0)
3.8
"BLD",4884,"KRN",9.2,0)
9.2
"BLD",4884,"KRN",9.8,0)
9.8
"BLD",4884,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",4884,"KRN",9.8,"NM",1,0)
IB20P229^^0^B11973842
"BLD",4884,"KRN",9.8,"NM",2,0)
IBCNSP0^^0^B21843232
"BLD",4884,"KRN",9.8,"NM","B","IB20P229",1)

"BLD",4884,"KRN",9.8,"NM","B","IBCNSP0",2)

"BLD",4884,"KRN",19,0)
19
"BLD",4884,"KRN",19,"NM",0)
^9.68A^^
"BLD",4884,"KRN",19.1,0)
19.1
"BLD",4884,"KRN",101,0)
101
"BLD",4884,"KRN",409.61,0)
409.61
"BLD",4884,"KRN",771,0)
771
"BLD",4884,"KRN",870,0)
870
"BLD",4884,"KRN",8989.51,0)
8989.51
"BLD",4884,"KRN",8989.52,0)
8989.52
"BLD",4884,"KRN",8994,0)
8994
"BLD",4884,"KRN","B",.4,.4)

"BLD",4884,"KRN","B",.401,.401)

"BLD",4884,"KRN","B",.402,.402)

"BLD",4884,"KRN","B",.403,.403)

"BLD",4884,"KRN","B",.5,.5)

"BLD",4884,"KRN","B",.84,.84)

"BLD",4884,"KRN","B",3.6,3.6)

"BLD",4884,"KRN","B",3.8,3.8)

"BLD",4884,"KRN","B",9.2,9.2)

"BLD",4884,"KRN","B",9.8,9.8)

"BLD",4884,"KRN","B",19,19)

"BLD",4884,"KRN","B",19.1,19.1)

"BLD",4884,"KRN","B",101,101)

"BLD",4884,"KRN","B",409.61,409.61)

"BLD",4884,"KRN","B",771,771)

"BLD",4884,"KRN","B",870,870)

"BLD",4884,"KRN","B",8989.51,8989.51)

"BLD",4884,"KRN","B",8989.52,8989.52)

"BLD",4884,"KRN","B",8994,8994)

"BLD",4884,"QUES",0)
^9.62^^
"BLD",4884,"REQB",0)
^9.611^^0
"INIT")
IB20P229
"MBREQ")
0
"PKG",200,-1)
1^1
"PKG",200,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",200,20,0)
^9.402P^1^1
"PKG",200,20,1,0)
2^^IBAXDR
"PKG",200,20,1,1)

"PKG",200,20,"B",2,1)

"PKG",200,22,0)
^9.49I^1^1
"PKG",200,22,1,0)
2.0^2940321^2990406^2447
"PKG",200,22,1,"PAH",1,0)
229^3030828
"PKG",200,22,1,"PAH",1,1,0)
^^8^8^3030828
"PKG",200,22,1,"PAH",1,1,1,0)
This patch updates the Information/Warning records in file #361.
"PKG",200,22,1,"PAH",1,1,2,0)
Ref. NOIS FGH-0203-31133
"PKG",200,22,1,"PAH",1,1,3,0)
Routine:  IB20P229, a database conversion routine.
"PKG",200,22,1,"PAH",1,1,4,0)
  
"PKG",200,22,1,"PAH",1,1,5,0)
This patch also fixes a display problem with the Contact Date
"PKG",200,22,1,"PAH",1,1,6,0)
and Call Ref. No. on the IBCN PATIENT INSURANCE screens.
"PKG",200,22,1,"PAH",1,1,7,0)
Ref. NOIS BAY-0403-32311
"PKG",200,22,1,"PAH",1,1,8,0)
Routine: IBCNSP0
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","IB20P229")
0^1^B11973842
"RTN","IB20P229",1,0)
IB20P229 ;ISP/TJH - Post-Init routine for IB*2.0*229 ;07/22/2003
"RTN","IB20P229",2,0)
 ;;2.0;INTEGRATED BILLING;**229**;21-MAR-94
"RTN","IB20P229",3,0)
POST ; This routine converts BILL STATUS MESSAGEs prior to 3/24/2003
"RTN","IB20P229",4,0)
 ; that have a REVIEW STATUS of 0, to a REVIEW STATUS of 2.
"RTN","IB20P229",5,0)
 ; Code introduced by IB*2.0*197 on 3/24/2003 should now be doing
"RTN","IB20P229",6,0)
 ; this automatically but records prior to that time were not converted
"RTN","IB20P229",7,0)
 ; and have become a nuisance.  Responding to NOIS FGH-0203-31133.
"RTN","IB20P229",8,0)
 ;
"RTN","IB20P229",9,0)
REV ; Convert REVIEW STATUS if appropriate
"RTN","IB20P229",10,0)
 I '$D(^IBM(361,"AREV",0)) D  Q
"RTN","IB20P229",11,0)
 . D BMES^XPDUTL("No records to convert.  Processing complete.")
"RTN","IB20P229",12,0)
 D BMES^XPDUTL("Conversion of ^IBM(361,""AREV"",0 started.")
"RTN","IB20P229",13,0)
 K ^TMP("IB20P229",$J)
"RTN","IB20P229",14,0)
 N DA,DIE,DR,IBA,IBM
"RTN","IB20P229",15,0)
 S DA=0
"RTN","IB20P229",16,0)
 ; loop through AREV x-ref 0 entries
"RTN","IB20P229",17,0)
 F  S DA=$O(^IBM(361,"AREV",0,DA)) Q:DA=""  D
"RTN","IB20P229",18,0)
 . D GETS^DIQ(361,DA_",",".02;.03","I","IBA","IBM")
"RTN","IB20P229",19,0)
 . ; check for problems with the record
"RTN","IB20P229",20,0)
 . I '$D(IBA) S ^TMP("IB20P229",$J,DA)=$G(IBM("DIERR",1,"TEXT",1)) Q
"RTN","IB20P229",21,0)
 . ; select records older than 3/24/03 with a message severity of Information/Warning
"RTN","IB20P229",22,0)
 . I (IBA(361,DA_",",.02,"I")<3030324)&(IBA(361,DA_",",.03,"I")="I") D
"RTN","IB20P229",23,0)
 .. ; and convert those records to Review Complete, Final Review Action=F and Auto Filed=Yes
"RTN","IB20P229",24,0)
 .. S DR=".09////2;.1////F;.14////1",DIE="^IBM(361," D ^DIE
"RTN","IB20P229",25,0)
 . K IBA,IBM
"RTN","IB20P229",26,0)
 I $D(^TMP("IB20P229",$J)) D TMMSG
"RTN","IB20P229",27,0)
 K ^TMP("IB20P229",$J)
"RTN","IB20P229",28,0)
 D END
"RTN","IB20P229",29,0)
 Q
"RTN","IB20P229",30,0)
 ;
"RTN","IB20P229",31,0)
END ; display message that pre-init has completed successfully
"RTN","IB20P229",32,0)
 D BMES^XPDUTL("Conversion complete.")
"RTN","IB20P229",33,0)
 Q
"RTN","IB20P229",34,0)
 ;
"RTN","IB20P229",35,0)
TMMSG ; Send message reporting any database issues found by FM during conversion
"RTN","IB20P229",36,0)
 N DA,IBC,IBGROUP,IBPARAM,IBTXT,XMDUZ,XMSUB,XMTEXT,XMY
"RTN","IB20P229",37,0)
 S XMSUB="IB*2.0*229 ERROR REPORT"
"RTN","IB20P229",38,0)
 S XMDUZ=DUZ,XMTEXT="IBTXT"
"RTN","IB20P229",39,0)
 S IBPARAM("FROM")="PATCH IB*2.0*229 CONVERSION"
"RTN","IB20P229",40,0)
 S IBGROUP="IB EDI SUPERVISOR"
"RTN","IB20P229",41,0)
 I '$D(^XMB(3.8,"B",IBGROUP)) S IBGROUP=DUZ ; billing group not defined - send to the user
"RTN","IB20P229",42,0)
 E  S IBGROUP="G."_IBGROUP
"RTN","IB20P229",43,0)
 S XMY(IBGROUP)="",XMY("HOLLOWAY.THOMAS_J@FORUM.VA.GOV")=""
"RTN","IB20P229",44,0)
 ;
"RTN","IB20P229",45,0)
 S IBC=0
"RTN","IB20P229",46,0)
 S IBC=IBC+1,IBTXT(IBC)="This message has been sent by patch IB*2.0*229 at the completion of"
"RTN","IB20P229",47,0)
 S IBC=IBC+1,IBTXT(IBC)="the conversion of the 'Information/Warning' records in file #361."
"RTN","IB20P229",48,0)
 S IBC=IBC+1,IBTXT(IBC)="The purpose of this message is to report any errors encountered during"
"RTN","IB20P229",49,0)
 S IBC=IBC+1,IBTXT(IBC)="the conversion."
"RTN","IB20P229",50,0)
 S IBC=IBC+1,IBTXT(IBC)="  "
"RTN","IB20P229",51,0)
 S IBC=IBC+1,IBTXT(IBC)="The following IENs in the AREV cross reference were not found in the main file."
"RTN","IB20P229",52,0)
 S DA=0
"RTN","IB20P229",53,0)
 F  S DA=$O(^TMP("IB20P229",$J,DA)) Q:DA=""  D  Q:IBC>110
"RTN","IB20P229",54,0)
 . S IBC=IBC+1
"RTN","IB20P229",55,0)
 . I IBC>110 S IBTXT(IBC)="Additional errors exist.  Your system manager should be consulted." Q
"RTN","IB20P229",56,0)
 . S IBTXT(IBC)=DA_":  "_^TMP("IB20P229",$J,DA)
"RTN","IB20P229",57,0)
 D SENDMSG^XMXAPI(XMDUZ,XMSUB,XMTEXT,.XMY,.IBPARAM,"","")
"RTN","IB20P229",58,0)
 S IBTXT="Conversion timing message "_$S($D(XMERR):"not sent due to error in message set up.",1:"sent to IB EDI SUPERVISOR mail group and to the patch developer.")
"RTN","IB20P229",59,0)
 D BMES^XPDUTL(IBTXT)
"RTN","IB20P229",60,0)
 Q
"RTN","IBCNSP0")
0^2^B21843232
"RTN","IBCNSP0",1,0)
IBCNSP0 ;ALB/AAS - INSURANCE MANAGEMENT - EXPANDED POLICY  ;05-MAR-1993
"RTN","IBCNSP0",2,0)
 ;;2.0;INTEGRATED BILLING;**28,43,52,85,93,103,137,229**;21-MAR-94
"RTN","IBCNSP0",3,0)
 ;;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","IBCNSP0",4,0)
 ;
"RTN","IBCNSP0",5,0)
 ;
"RTN","IBCNSP0",6,0)
CONTACT ; -- Insurance Contact Information
"RTN","IBCNSP0",7,0)
 N OFFSET,START
"RTN","IBCNSP0",8,0)
 S START=38+$G(IBLCNT),OFFSET=42
"RTN","IBCNSP0",9,0)
 N IBTRC,IBTRCD,IBTCOD
"RTN","IBCNSP0",10,0)
 S IBTCOD=$O(^IBE(356.11,"ACODE",85,0))
"RTN","IBCNSP0",11,0)
 ;
"RTN","IBCNSP0",12,0)
 S IBTRC=0,IBTRCD=""
"RTN","IBCNSP0",13,0)
 F  S IBTRC=$O(^IBT(356.2,"D",DFN,IBTRC)) Q:'IBTRC  D
"RTN","IBCNSP0",14,0)
 .Q:$P($G(^IBT(356.2,+IBTRC,1)),"^",5)'=IBCDFN  ; must be same policy
"RTN","IBCNSP0",15,0)
 .Q:$P($G(^IBT(356.2,+IBTRC,0)),"^",4)'=IBTCOD  ; must be ins. ver. type
"RTN","IBCNSP0",16,0)
 .S IBTRCD=$G(^IBT(356.2,+IBTRC,0))
"RTN","IBCNSP0",17,0)
 ;
"RTN","IBCNSP0",18,0)
 I '$D(@VALMAR@(START-1)) D SET(START-1,OFFSET,"  ")
"RTN","IBCNSP0",19,0)
 D SET(START,OFFSET," Insurance Contact (last) ",IORVON,IORVOFF)
"RTN","IBCNSP0",20,0)
 D SET(START+1,OFFSET," Person Contacted: "_$$EXPAND^IBTRE(356.2,.06,$P(IBTRCD,"^",6)))
"RTN","IBCNSP0",21,0)
 D SET(START+2,OFFSET,"Method of Contact: "_$$EXPAND^IBTRE(356.2,.17,$P(IBTRCD,"^",17)))
"RTN","IBCNSP0",22,0)
 D SET(START+3,OFFSET,"  Contact's Phone: "_$$EXPAND^IBTRE(356.2,.07,$P(IBTRCD,"^",7)))
"RTN","IBCNSP0",23,0)
 D SET(START+4,OFFSET,"    Call Ref. No.: "_$$EXPAND^IBTRE(356.2,.09,$P(IBTRCD,"^",9)))
"RTN","IBCNSP0",24,0)
 D SET(START+5,OFFSET,"     Contact Date: "_$$EXPAND^IBTRE(356.2,.01,$P(IBTRCD,"^")))
"RTN","IBCNSP0",25,0)
 Q
"RTN","IBCNSP0",26,0)
 ;
"RTN","IBCNSP0",27,0)
POLICY ; -- Policy Region
"RTN","IBCNSP0",28,0)
 ; -- if pointer to policy file exists get data from policy file
"RTN","IBCNSP0",29,0)
 N OFFSET,START,IBP,IBX
"RTN","IBCNSP0",30,0)
 S START=1,OFFSET=2
"RTN","IBCNSP0",31,0)
 D SET(START,OFFSET," Plan Information ",IORVON,IORVOFF)
"RTN","IBCNSP0",32,0)
 D SET(START+1,OFFSET,"   Is Group Plan: "_$S($P(IBCPOLD,"^",2)=1:"YES",1:"NO"))
"RTN","IBCNSP0",33,0)
 D SET(START+2,OFFSET,"      Group Name: "_$P(IBCPOLD,"^",3))
"RTN","IBCNSP0",34,0)
 D SET(START+3,OFFSET,"    Group Number: "_$P(IBCPOLD,"^",4))
"RTN","IBCNSP0",35,0)
 D SET(START+4,OFFSET,"    Type of Plan: "_$E($P($G(^IBE(355.1,+$P(IBCPOLD,"^",9),0)),"^"),1,23))
"RTN","IBCNSP0",36,0)
 S IBX=5
"RTN","IBCNSP0",37,0)
 I $P(IBCPOLD,U,14)]"" D
"RTN","IBCNSP0",38,0)
 . D SET(START+IBX,OFFSET,"   Plan Category: "_$$EXPAND^IBTRE(355.3,.14,$P(IBCPOLD,"^",14))) S IBX=IBX+1
"RTN","IBCNSP0",39,0)
 I $P(IBCPOLD,U,15)]"" D
"RTN","IBCNSP0",40,0)
 . D SET(START+IBX,OFFSET," Electronic Type: "_$$EXPAND^IBTRE(355.3,.15,$P(IBCPOLD,"^",15))) S IBX=IBX+1
"RTN","IBCNSP0",41,0)
 D SET(START+IBX,OFFSET,"  Plan Filing TF: "_$P(IBCPOLD,"^",13))
"RTN","IBCNSP0",42,0)
 ; -- in case pointer is missing
"RTN","IBCNSP0",43,0)
 I '$G(^IBA(355.3,+$P(IBCDFND,"^",18),0)) D
"RTN","IBCNSP0",44,0)
 .D SET(START+1,OFFSET,"Insurance Number: "_$P(IBCDFND,"^",2))
"RTN","IBCNSP0",45,0)
 .D SET(START+2,OFFSET,"      Group Name: "_$P(IBCDFND,"^",15))
"RTN","IBCNSP0",46,0)
 .D SET(START+3,OFFSET,"    Group Number: "_$P(IBCDFND,"^",3))
"RTN","IBCNSP0",47,0)
 .Q
"RTN","IBCNSP0",48,0)
 Q
"RTN","IBCNSP0",49,0)
 ;
"RTN","IBCNSP0",50,0)
INS ; -- Insurance Co. Region
"RTN","IBCNSP0",51,0)
 N OFFSET,START,IBADD,IBCDFNDA,IBCDFNDB
"RTN","IBCNSP0",52,0)
 S START=1,OFFSET=45
"RTN","IBCNSP0",53,0)
 D SET(START,OFFSET," Insurance Company ",IORVON,IORVOFF)
"RTN","IBCNSP0",54,0)
 D SET(START+1,OFFSET,"   Company: "_$P($G(^DIC(36,+IBCDFND,0)),"^"))
"RTN","IBCNSP0",55,0)
 S IBCDFNDA=$G(^DIC(36,+IBCDFND,.11)),IBCDFNDB=$G(^(.13))
"RTN","IBCNSP0",56,0)
 G:IBCDFNDA="" INSQ
"RTN","IBCNSP0",57,0)
 D SET(START+2,OFFSET,"    Street: "_$P(IBCDFNDA,"^")) S IBADD=1
"RTN","IBCNSP0",58,0)
 I $P(IBCDFNDA,"^",2)'="" D SET(START+3,OFFSET,"  Street 2: "_$P(IBCDFNDA,"^",2)) S IBADD=2
"RTN","IBCNSP0",59,0)
 I $P(IBCDFNDA,"^",3)'="" D SET(START+4,OFFSET,"  Street 3: "_$P(IBCDFNDA,"^",3)) S IBADD=3
"RTN","IBCNSP0",60,0)
 D SET(START+2+IBADD,OFFSET,"City/State: "_$E($P(IBCDFNDA,"^",4),1,15)_$S($P(IBCDFNDA,"^",4)="":"",1:", ")_$P($G(^DIC(5,+$P(IBCDFNDA,"^",5),0)),"^",2)_" "_$E($P(IBCDFNDA,"^",6),1,5))
"RTN","IBCNSP0",61,0)
 D SET(START+3+IBADD,OFFSET,"Billing Ph: "_$P(IBCDFNDB,"^",2))
"RTN","IBCNSP0",62,0)
 D SET(START+4+IBADD,OFFSET,"Precert Ph: "_$$PHONE^IBCNSC01(IBCDFNDB))
"RTN","IBCNSP0",63,0)
 ;
"RTN","IBCNSP0",64,0)
INSQ Q
"RTN","IBCNSP0",65,0)
 ;
"RTN","IBCNSP0",66,0)
SPON ; -- Sponsor (Insured Person) Region
"RTN","IBCNSP0",67,0)
 N IBC3,IBSSN,IBZIP,START,OFFSET,IBA,DA,DR,DIC,DIQ
"RTN","IBCNSP0",68,0)
 S IBC3=$G(^DPT(DFN,.312,IBCDFN,3)),IBSSN=$P(IBC3,"^",5)
"RTN","IBCNSP0",69,0)
 S DA=+$P(IBC3,"^",2),DR=.01,DIQ(0)="E",DIC="^DIC(23,",DIQ="IBA" D EN^DIQ1
"RTN","IBCNSP0",70,0)
 S START=27,OFFSET=4
"RTN","IBCNSP0",71,0)
 D SET(START,OFFSET," Insured Person's Information (use Subscriber Update action) ",IORVON,IORVOFF)
"RTN","IBCNSP0",72,0)
 D SET(START+1,OFFSET,"    Insured's DOB: "_$$DAT3^IBOUTL($P(IBC3,"^")))
"RTN","IBCNSP0",73,0)
 D SET(START+2,OFFSET," Insured's Branch: "_$G(IBA(23,DA,.01,"E")))
"RTN","IBCNSP0",74,0)
 D SET(START+3,OFFSET,"   Insured's Rank: "_$P(IBC3,"^",3))
"RTN","IBCNSP0",75,0)
 D SET(START+4,OFFSET,"    Insured's SSN: "_$S(IBSSN]"":$E(IBSSN,1,3)_"-"_$E(IBSSN,4,5)_"-"_$E(IBSSN,6,9),1:""))
"RTN","IBCNSP0",76,0)
 ;
"RTN","IBCNSP0",77,0)
 S OFFSET=43
"RTN","IBCNSP0",78,0)
 S Y=$P(IBC3,"^",10) D ZIPOUT^VAFADDR S IBZIP=Y
"RTN","IBCNSP0",79,0)
 D SET(START+1,OFFSET," Str 1: "_$P(IBC3,"^",6))
"RTN","IBCNSP0",80,0)
 D SET(START+2,OFFSET," Str 2: "_$P(IBC3,"^",7))
"RTN","IBCNSP0",81,0)
 D SET(START+3,OFFSET,"  City: "_$P(IBC3,"^",8))
"RTN","IBCNSP0",82,0)
 D SET(START+4,OFFSET,"St/Zip: "_$P($G(^DIC(5,+$P(IBC3,"^",9),0)),"^",2)_"  "_IBZIP)
"RTN","IBCNSP0",83,0)
 D SET(START+5,OFFSET," Phone: "_$P(IBC3,"^",11))
"RTN","IBCNSP0",84,0)
 Q
"RTN","IBCNSP0",85,0)
 ;
"RTN","IBCNSP0",86,0)
BLANK(LINE) ; -- Build blank line
"RTN","IBCNSP0",87,0)
 D SET^VALM10(.LINE,$J("",80))
"RTN","IBCNSP0",88,0)
 Q
"RTN","IBCNSP0",89,0)
 ;
"RTN","IBCNSP0",90,0)
SET(LINE,COL,TEXT,ON,OFF) ; -- set display info in array
"RTN","IBCNSP0",91,0)
 D:'$D(@VALMAR@(LINE,0)) BLANK(.LINE)
"RTN","IBCNSP0",92,0)
 D SET^VALM10(.LINE,$$SETSTR^VALM1(.TEXT,@VALMAR@(LINE,0),.COL,$L(TEXT)))
"RTN","IBCNSP0",93,0)
 D:$G(ON)]""!($G(OFF)]"") CNTRL^VALM10(.LINE,.COL,$L(TEXT),$G(ON),$G(OFF))
"RTN","IBCNSP0",94,0)
 W:'(LINE#5) "."
"RTN","IBCNSP0",95,0)
 Q
"VER")
8.0^22
**END**
**END**

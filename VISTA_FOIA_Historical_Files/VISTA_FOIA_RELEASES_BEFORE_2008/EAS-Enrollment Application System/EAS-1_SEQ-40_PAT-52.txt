$TXT Created by NAPOLIELLO,GREG at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 05/17/04 at 13:59
=============================================================================
Run Date: JUN 14, 2004                     Designation: EAS*1*52
Package : EAS - ENROLLMENT APPLICATION SYSTEM Priority: Mandatory
Version : 1        SEQ #40                      Status: Released
                  Compliance Date: JUL 15, 2004
=============================================================================

Associated patches: (v)EAS*1*35    <<= must be installed BEFORE `EAS*1*52'

Subject: Fix Undefined IVM3 for IVM Z06 Delete

Category: 
  - Routine

Description:
============

 This patch will fix an undefined variable (IVM3) that was generated during
 an upload of an IVM Cancel Z06 HL7 message for the EDB.
  
  
  This patch addresses the following E3R(s):
  ------------------------------------------
  There are no E3Rs associated with this patch.
  
  
  This patch addresses the following NOIS message(s):
  ---------------------------------------------------
  MAD-0104-40652  PROCESS+38~EASPREC7:1 <undef> IVM3
  
  Overview of NOIS Message(s):
  ---------------------------
  MAD-0104-40652  PROCESS+38~EASPREC7:1 <undef> IVM3
  
  PROBLEM: While processing a Delete Z06 from EDB, this undefined error,
  was generated and the process halted at this point.
  
  
  RESOLUTION: The variable not defined is IVM3 and is created when the 
  PARSEZMT tag is called to process an HL7 ZMT segment.  The call to 
  PARSEZMT was moved to within the ZMT tag, so it will be run immediately,
  after reading in a ZMT segment.
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 This patch can be loaded with users on the system, however, it should be
 installed during period of minimum usage.  
  
    Install Time - 2 Minutes.
  
  
      1.   LOAD TRANSPORT GLOBAL
           ---------------------
           Choose the PackMan message containing this patch and invoke the
           INSTALL/CHECK MESSAGE PackMan option.
  
      2.   DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only)
           -----------------------
           Disable routine mapping on all systems for the routines listed 
           in step 3 below.
  
           NOTE: If the routines included in this patch are not currently 
                 in your mapped routine set, please skip this step.
  
      3.   COMPONENTS SENT WITH PATCH
           --------------------------
           The following is a list of the routine(s) included in this
           patch.  The second line of each of these routine(s) will look
           like:
  
  
      <tab>;;1.0;ENROLLMENT APPLICATION SYSTEM;**[patch list]**;21-OCT-94
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  EASPREC7              15204346             15075877         23,30,35,52
  
           Total number of routines - 1
  
  
      4.   START UP KIDS
           -------------
           Start up the Kernel Installation and Distribution System Menu
           [XPD MAIN]:
  
                Edits and Distribution ...
                Utilities ...
                Installation ...
  
      Select Kernel Installation & Distribution System Option: INStallation
                                                               ---
                Load a Distribution
                Print Transport Global
                Compare Transport Global to Current System
                Verify Checksums in Transport Global
                Install Package(s)
                Restart Install of Package(s)
                Unload a Distribution
                Backup a Transport Global
  
      Select Installation Option:
  
      5.   Select Installation Option:
           --------------------------
           NOTE: The following are OPTIONAL - (When prompted for the 
                 INSTALL NAME, enter EAS*1.0*52):
  
           a. Backup a Transport Global - This option will create a backup
              message of any routines exported with this patch. It will not
              backup any other changes such as DD's or templates.
           b. Compare Transport Global to Current System - This option will
              allow you to view all changes that will be made when this
              patch is installed.  It compares all components of this patch
              (routines, DD's, templates, etc.).
           c. Verify Checksums in Transport Global - This option will allow
              you to ensure the integrity of the routines that are in the
              transport global.
  
      6.   Select Installation Option: Install Package(s)
                                       ----------------
           **This is the step to start the installation of this KIDS patch:
  
           a. Choose the Install Package(s) option to start the patch
              install.
           b. When prompted 'Want KIDS to Rebuild Menu Trees Upon 
              Completion of Install? YES// answer NO.
           c. When prompted 'Want KIDS to INHIBIT LOGONs during the
              install? YES//' answer NO.
           d. When prompted 'Want to DISABLE Scheduled Options, Menu 
              Options, and Protocols? YES//' answer NO (unless otherwise
              indicated)
  
      7.   REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
           -------------------------
           Optional - Include the routines distributed with this patch
           in the mapped routine set.
  
           NOTE: This step is only necessary if you performed step 2 or
                 if you wish to include the routines in your mapped set.

Routine Information:
====================

Routine Name:
  - EASPREC7

 Routine changed to call the PARSEZMT tag from within the ZMT tag to get 
 variables defined earlier.
  
 before code change:
 ===================
  
 114     . . D PARSEZMT(ZMTSEG)                      ;Retrieve ZMT Values
 115     . . S DA=IVMMTIEN,DIE="^DGMT(408.31,"
  
 ************
 146     ;Means test date from ZMT segment
  
 ************
 179   PARSEZMT(ZSEG)  S IVM2=$$FMDATE^HLFNC($P(ZMTSEG,"^",3))  ;Means 
 180      S IVM3=$O(^DG(408.32,"C",$P(ZMTSEG,"^",4),""))   ;Means Test
 181      S IVM7=$S($P(ZMTSEG,"^",8)="Y":1,1:0)            ;Agrees To
 182      S IVM8=$P(ZMTSEG,"^",9)                          ;Threshold A
 183      S IVM10=$$FMDATE^HLFNC($P(ZMTSEG,"^",11))        ;Date/Time
 184      S IVM12=$P(ZMTSEG,"^",13)                        ;Number of
 185      S IVM17=$P(ZMTSEG,"^",18)                        ;Type of Test
 186      S IVM18=$P(ZMTSEG,"^",19)                        ;Source of Test
 187      S IVM20=$$FMDATE^HLFNC($P(ZMTSEG,"^",21))        ;IVM Verified MT
 188      S IVM25=$$FMDATE^HLFNC($P(ZMTSEG,"^",26))        ;D/T Last
 189      S IVM26=$O(^DG(408.32,"C",$P(ZMTSEG,"^",27),"")) ;Test Determined
 190      Q
  
 after code change:
 ==================
  
 118           . . S DA=IVMMTIEN,DIE="^DGMT(408.31,"
  
 ************
 149     D PARSEZMT(ZMTSEG)                      ;Retrieve ZMT Values
 150     ;Means test date from ZMT segment
  
 ************
 183   PARSEZMT(ZSEG)  S IVM2=$$FMDATE^HLFNC($P(ZSEG,"^",3))  ;Means Test
 184      S IVM3=$O(^DG(408.32,"C",$P(ZSEG,"^",4),""))   ;Means 
 185      S IVM7=$S($P(ZSEG,"^",8)="Y":1,1:0)            ;Agrees To 
 186      S IVM8=$P(ZSEG,"^",9)                          ;Threshold A
 187      S IVM10=$$FMDATE^HLFNC($P(ZSEG,"^",11))        ;Date/Time 
 188      S IVM12=$P(ZSEG,"^",13)                        ;Number of 
 189      S IVM17=$P(ZSEG,"^",18)                        ;Type of Test
 190      S IVM18=$P(ZSEG,"^",19)                        ;Source of Test
 191      S IVM20=$$FMDATE^HLFNC($P(ZSEG,"^",21))        ;IVM Verified MT
 192      S IVM25=$$FMDATE^HLFNC($P(ZSEG,"^",26))        ;D/T Last Changed
 193      S IVM26=$O(^DG(408.32,"C",$P(ZSEG,"^",27),"")) ;Test Determined
 194      Q

Routine Checksum:

=============================================================================
User Information:
Entered By  : NAPOLIELLO,GREG               Date Entered  : MAY 17, 2004
Completed By: MULLER,RICHARD                Date Completed: JUN 10, 2004
Released By : GROOMS,ANTHONY E              Date Released : JUN 14, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

$TXT Created by MOORE,JIM at NXT.KERNEL.FO-OAKLAND.MED.VA.GOV  (KIDS) on Wednesday, 04/18/07 at 09:39
=============================================================================
Run Date: APR 25, 2007                     Designation: HL*1.6*134
Package : HL - HEALTH LEVEL SEVEN             Priority: Mandatory
Version : 1.6       SEQ #107                    Status: Released
                  Compliance Date: MAY 26, 2007
=============================================================================

Associated patches: (v)HL*1.6*132  <<= must be installed BEFORE `HL*1.6*134'

Subject: HLO ERROR STATISTICS

Category: 
  - Enhancement (Mandatory)
  - Routine
  - Data Dictionary

Description:
============

 This patch provides several enhancements and bug fixes to the HLO
 software.  A description of each change is listed below:
  
 1. A new report is added, the HLO Error Statistics Report.  It displays
    counts of message errors encountered by application over a time period
    specified by the user.
  
 2. A new field is added to the HLO System Monitor to display a count of
    message errors that have occurred so far for the current date.
  
 3. The Interface Engine operational status field on the HLO System Monitor was
    never implemented and so was deleted. Sites can test the status of entries
    in the HL Logical Link file that were set up for HLO by using the Test Link
    action on the HLO System Monitor, including links that go to the interface
    engine.
  
 4. There was a bug in the HLO System Monitor where the screen did not always 
    refresh properly after updates. This patch fixes that problem.
  
 5. The EN^HLOCNRT API was enhanced to return the message ids for the messages
    that result.  The API may optionally include a fifth parameter to return
    the message ids.
  
 6. The EN^HLOCNRT API will now automatically add the sending application to
    the HLO Application Registry if its not already there.
  
 7. The EN^HLOCNRT will now allow the application to set up the routine that
    should be executed to process the returned application acknowledgment.
    That can be done in one of two ways:
  
     - The <tag>^<routine> can be passed in as a formal parameter to
       EN^HLOCNRT when the original message is generated by setting the
       subscript "APP ACK RESPONSE" in the third parameter (HLP array,
       pass-by-reference).
  
     - The message type and event type of the application acknowledgment can
       be entered to the HLO Application Registry, along with the
       <tag>^<routine> that should be executed to process the returned
       application acknowledgment.  
  
 8. The Message Search action of the HLO Message Viewer will now allow the
    user to specify the maximum number of messages to be returned.
  
 9.  The option HLO SYSTEM STARTUP has been modified so that it will always
     start HLO at system startup even if HLO had been shutdown. It will
     automatically be scheduled to run on production systems at system startup
     via the post-install routine. On development or test systems, if a site
     wants HLO to start automatically at system startup then they must
     schedule this option themselves.
  
 10. A new option has been added, HLO DAILY STARTUP.  This option will be
     automatcally scheduled to run on a daily basis via the post-install
     routine. The purpose of this option is to insure that HLO has not
     unexpectly stopped. If HLO was deliberately shutdown, then this option
     just quits without doing anything.  However, if HLO has unexpectedly
     stopped, it will be restarted.
  
 11. If the sending application does not specify the field separator
     and other message delimiters to construct the message with, HLO will
     default to the values recommended by the HL7 standard, with one
     exception.  The HL7 standard recommends | as the field separator,
     ^ as the component separator, ~ as the repetition character, and \ as
     the escape character.  However, the 'old' VistA HL7 package GENERATE^HLMA
     API defaulted to a different set; ^ as the field separator and
     ~|\& for the other delimiters. Since the EN^HLOCNRT API is meant for 
     existing applications that call GENERATE^HLMA to convert to using
     HLO, it will default to the same delimiter values, i.e., ^ as the field
     separator and ~|\& for the others.
  
 12. Fixes a bug in the HLO purge process. The HLO purge process properly 
     purges the HLO message files when it is first started, but upon completion
     the process may loop indefinitely without doing any additional purging.
     The correct behavior is to start over again looking for more records to
     purge. This patch fixes that. 
  
  Test Sites:
  ===========
  Bay Pines
  CMOP-NAT
  West Palm Beach
  
   
  REMEDY:  
  =====
  none
  
      
  ROUTINE SUMMARY:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
     
     <tab>;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;Oct 13, 1995;Build 3
  
                           CHECK^XTSUMBLD results
  Routine name    Before Patch        After Patch         Patch List
  ============    ============        ===========         ==========
  HLOAPI1              7888531            7877437         126,132,134
  HLOAPI2             10902941           10839368       126,131,133,134
  HLOAPI3             11545400           12013888         126,133,134
  HLOAPI4              3107754            2989815           131,134
  HLOASUB1             9089024            9226747           126,134
  HLOCLNT             17524826           16766048       126,130,131,134
  HLOCLNT1             7549395            7920089       126,130,131,134
  HLOCLNT2             9043934           10007952     126,130,131,133,134
  HLOCLNT3             2295109            3389793         126,130,134
  HLOCNRT              2083217            4764482         126,132,134
  HLOCVU               2978737            6396753         126,132,134
  HLOESTAT                 N/A            7253016             134
  HLOF778              7463325            8973279           126,134
  HLOF778A            10581929           11866005           126,134
  HLOFILER             8406035            8567833         126,131,134
  HLOMSG               9820871            9889362           126,134
  HLOPOST              2282753            4766425           126,134
  HLOPRE                   N/A
  HLOPROC              6533340            6940090           126,134
  HLOPRS               7857438            7657874     118,126,133,132,134
  HLOPRS1              7276258            7356195       118,131,133,134
  HLOPURGE             7353313            8047608           126,134
  HLOQUE               1716909            1867168         126,132,134
  HLOSRVR             16342424           19611852       126,130,131,134
  HLOSRVR1            15639975           18851341     126,130,131,133,134
  HLOSTAT             13790242           14283976         130,131,134
  HLOTCP              10339454           10464163         126,131,134
  HLOUSR              19476594           18887479         126,130,134
  HLOUSR1             11175583           12580710           126,134
  HLOUSR2             11218586           12815737           126,134
  HLOUSR3              6315298            7893436           126,134
      
 INSTALLATION INSTRUCTIONS
  =========================
  
    1.  Users are allowed to be on the system during the installation.
  
    2.  Disable the HL7 TCPIP services for the HLO multi-listener running on 
        all nodes in the cluster. For example, at the VMS prompt
        in your production account:
          ISC6A1> TCPIP          <-- at the VMS prompt
          TCPIP> DISABLE SERVICE HLS5001CACHE  
  
          In your test account:
          ISC6A1> TCPIP          <-- at the VMS prompt
          TCPIP> DISABLE SERVICE HLS5026CACHE  
   
         You could also do this from the M programmer's prompt as 
         follows:
  
         VISTA> D ^%CLI   <-- at the M programmer's prompt                       
  
         CLI command: TCPIP                 
         TCPIP> DISABLE SERVICE HLS5001CACHE  
  
    3.  Use the STOP HLO action of the HLO System Monitor option to
        temporarily stop the transmission of HLO messages. Wait several
        minutes to insure that all HLO processes have terminated.
  
        NOTE: There is a pre-install routine that will abort the installation
              if any HLO process is still running.  If the installation
              is aborted, verify that HLO is stopped, and restart the
              installation.
    
    4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
        option will load the KIDS package onto your system.
  
    5.  This patch is now loaded into a transport global on your system.
        The next step is to use KIDS to install the Transport global.  On
        the KIDS menu, under the 'Installation' menu, use the following
        options:
  
           Verify Checksums in Transport Global
           Print Transport Global 
           Compare Transport Global to Current System 
           Backup a Transport Global
           Install Package(s) 
  
        When using the Install Package(s) menu option to install the 
        patch build, you will be asked several questions.  The questions,
        and the answers you should supply, are shown below.
  
        INSTALL NAME: <HL*1.6*134>
        Want KIDS to INHIBIT LOGONS during the install?  <NO>
        Want to DISABLE Scheduled Options, Menu Options,
          and Protocols?  <NO>
        Want KIDS to Rebuild Menu Trees Upon Completion of Install? <YES> 
  
      A pre-install routine will verify that all HLO processes have been
      stopped before the installation will complete.
  
      A post-install routine will automatically schedule the HLO SYSTEM STARUP
      and HLO DAILY STARTUP options.
  
    6. Enable the HL7 TCPIP services for the multi-listeners
          For example, in a production account at the VMS promt:
          ISC6A1> TCPIP             <-- at the VMS prompt
          TCPIP> ENABLE SERVICE HLS5001CACHE 
  
          For example, in a test account:
          ISC6A1> TCPIP             <-- at the VMS prompt
          TCPIP> ENABLE SERVICE HLS5026CACHE 
  
         You could also do this from the M programmer's prompt as 
         follows:
  
         VISTA> D ^%CLI   <-- at the M programmer's prompt                       
  
         CLI command: TCPIP                 
         TCPIP> ENABLE SERVICE HLS5001CACHE   
  
    7. Use the START HLO action of the HLO System Monitor option to 
       resume transmission of HLO messages in your production account.
       This step is optional in test systems.

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: HLOAPI1
    Before: B47955238  After: B48519291  **126,132,134**
Routine Name: HLOAPI2
    Before: B37578775  After: B37390174  **126,131,133,134**
Routine Name: HLOAPI3
    Before: B43853464  After: B45861231  **126,133,134**
Routine Name: HLOAPI4
    Before: B22068040  After: B21664349  **131,134**
Routine Name: HLOASUB1
    Before: B53189937  After: B62125339  **126,134**
Routine Name: HLOCLNT
    Before: B57442573  After: B59494519  **126,130,131,134**
Routine Name: HLOCLNT1
    Before: B28062817  After: B31098132  **126,130,131,134**
Routine Name: HLOCLNT2
    Before: B29898713  After: B38024388  **126,130,131,133,134**
Routine Name: HLOCLNT3
    Before:  B3706254  After:  B5680444  **126,130,134**
Routine Name: HLOCNRT
    Before:  B4616658  After: B11469805  **126,132,134**
Routine Name: HLOCVU
    Before:  B6948622  After: B14731556  **126,132,134**
Routine Name: HLOESTAT
    Before:       n/a  After: B23707837  **134**
Routine Name: HLOF778
    Before: B26674072  After: B31810576  **126,134**
Routine Name: HLOF778A
    Before: B35675106  After: B38921929  **126,134**
Routine Name: HLOFILER
    Before: B25709739  After: B28742582  **126,131,134**
Routine Name: HLOMSG
    Before: B44340349  After: B46053749  **126,134**
Routine Name: HLOPOST
    Before:  B3878072  After: B10060576  **126,134**
Routine Name: HLOPRE
    Before:       n/a  After:   B871663  **134**
Routine Name: HLOPROC
    Before: B24878795  After: B26319281  **126,134**
Routine Name: HLOPRS
    Before: B29583267  After: B28621487  **118,126,133,132,134**
Routine Name: HLOPRS1
    Before: B19727557  After: B19883932  **118,131,133,134**
Routine Name: HLOPURGE
    Before: B28987748  After: B33852841  **126,134**
Routine Name: HLOQUE
    Before:  B5510606  After:  B5560431  **126,132,134**
Routine Name: HLOSRVR
    Before: B62293420  After: B71398107  **126,130,131,134**
Routine Name: HLOSRVR1
    Before: B60360938  After: B71810026  **126,130,131,133,134**
Routine Name: HLOSTAT
    Before: B55442954  After: B56413629  **130,131,134**
Routine Name: HLOTCP
    Before: B45043587  After: B45604114  **126,131,134**
Routine Name: HLOUSR
    Before: B88410850  After: B88986165  **126,130,134**
Routine Name: HLOUSR1
    Before: B64766610  After: B71059198  **126,134**
Routine Name: HLOUSR2
    Before: B44072105  After: B50803948  **126,134**
Routine Name: HLOUSR3
    Before: B18658983  After: B28592051  **126,134**

=============================================================================
User Information:
Entered By  : MOORE,CHARLES J               Date Entered  : NOV 15, 2006
Completed By: SINGH,GURBIR                  Date Completed: APR 25, 2007
Released By : APOLONIO,AUGUSTO              Date Released : APR 25, 2007
=============================================================================


Packman Mail Message:
=====================

$END TXT

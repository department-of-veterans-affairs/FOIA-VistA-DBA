Released SD*5.3*454 SEQ #369
Extracted from mail message
**KIDS**:SD*5.3*454^

**INSTALL NAME**
SD*5.3*454
"BLD",6320,0)
SD*5.3*454^SCHEDULING^0^3050926^y
"BLD",6320,1,0)
^^1^1^3050818^
"BLD",6320,1,1,0)
Users cannot disposition deceased patients from wait list
"BLD",6320,4,0)
^9.64PA^^
"BLD",6320,"ABPKG")
n
"BLD",6320,"KRN",0)
^9.67PA^8989.52^19
"BLD",6320,"KRN",.4,0)
.4
"BLD",6320,"KRN",.401,0)
.401
"BLD",6320,"KRN",.402,0)
.402
"BLD",6320,"KRN",.403,0)
.403
"BLD",6320,"KRN",.5,0)
.5
"BLD",6320,"KRN",.84,0)
.84
"BLD",6320,"KRN",3.6,0)
3.6
"BLD",6320,"KRN",3.8,0)
3.8
"BLD",6320,"KRN",9.2,0)
9.2
"BLD",6320,"KRN",9.8,0)
9.8
"BLD",6320,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",6320,"KRN",9.8,"NM",1,0)
SDWLD^^0^B15770104
"BLD",6320,"KRN",9.8,"NM",2,0)
SDWLDISP^^0^B34642315
"BLD",6320,"KRN",9.8,"NM",3,0)
SDWLE110^^0^B23512324
"BLD",6320,"KRN",9.8,"NM","B","SDWLD",1)

"BLD",6320,"KRN",9.8,"NM","B","SDWLDISP",2)

"BLD",6320,"KRN",9.8,"NM","B","SDWLE110",3)

"BLD",6320,"KRN",19,0)
19
"BLD",6320,"KRN",19.1,0)
19.1
"BLD",6320,"KRN",101,0)
101
"BLD",6320,"KRN",409.61,0)
409.61
"BLD",6320,"KRN",771,0)
771
"BLD",6320,"KRN",870,0)
870
"BLD",6320,"KRN",8989.51,0)
8989.51
"BLD",6320,"KRN",8989.52,0)
8989.52
"BLD",6320,"KRN",8994,0)
8994
"BLD",6320,"KRN","B",.4,.4)

"BLD",6320,"KRN","B",.401,.401)

"BLD",6320,"KRN","B",.402,.402)

"BLD",6320,"KRN","B",.403,.403)

"BLD",6320,"KRN","B",.5,.5)

"BLD",6320,"KRN","B",.84,.84)

"BLD",6320,"KRN","B",3.6,3.6)

"BLD",6320,"KRN","B",3.8,3.8)

"BLD",6320,"KRN","B",9.2,9.2)

"BLD",6320,"KRN","B",9.8,9.8)

"BLD",6320,"KRN","B",19,19)

"BLD",6320,"KRN","B",19.1,19.1)

"BLD",6320,"KRN","B",101,101)

"BLD",6320,"KRN","B",409.61,409.61)

"BLD",6320,"KRN","B",771,771)

"BLD",6320,"KRN","B",870,870)

"BLD",6320,"KRN","B",8989.51,8989.51)

"BLD",6320,"KRN","B",8989.52,8989.52)

"BLD",6320,"KRN","B",8994,8994)

"BLD",6320,"QUES",0)
^9.62^^
"BLD",6320,"REQB",0)
^9.611^2^2
"BLD",6320,"REQB",1,0)
SD*5.3*424^1
"BLD",6320,"REQB",2,0)
SD*5.3*427^1
"BLD",6320,"REQB","B","SD*5.3*424",1)

"BLD",6320,"REQB","B","SD*5.3*427",2)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
454^3050926
"PKG",16,22,1,"PAH",1,1,0)
^^1^1^3050926
"PKG",16,22,1,"PAH",1,1,1,0)
Users cannot disposition deceased patients from wait list
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","SDWLD")
0^1^B15770104
"RTN","SDWLD",1,0)
SDWLD ;;IOFO BAY PINES/TEH - DISPLAY PENDING APPOINTMENTS;06/12/2002 ; 20 Aug 2002  2:10 PM
"RTN","SDWLD",2,0)
 ;;5.3;scheduling;**263,454**;AUG 13 1993
"RTN","SDWLD",3,0)
 ;
"RTN","SDWLD",4,0)
 ;
"RTN","SDWLD",5,0)
 ;*********************************************************
"RTN","SDWLD",6,0)
 ;                                               CHANGE LOG
"RTN","SDWLD",7,0)
 ;                                               
"RTN","SDWLD",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLD",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLD",10,0)
 ;   
"RTN","SDWLD",11,0)
 ;   
"RTN","SDWLD",12,0)
 ;   ;ENTRY POINT FOR OPTION CALL
"RTN","SDWLD",13,0)
 ;
"RTN","SDWLD",14,0)
 ;       SDWLDFN = PATIENT IEN
"RTN","SDWLD",15,0)
 ;       SDWLSSN = PATIENT SSN
"RTN","SDWLD",16,0)
 ;       SDWLNAM = PATIENT NAME
"RTN","SDWLD",17,0)
 ;       
"RTN","SDWLD",18,0)
EN(SDWLDFN,SDWLSSN,SDWLNAM) ;ENTRY POINT - INTIALIZE VARIABLES
"RTN","SDWLD",19,0)
 K ^TMP("SDWLD",$J) I $D(^SDWL(409.3,"B",SDWLDFN)) D
"RTN","SDWLD",20,0)
 .D GETDATA
"RTN","SDWLD",21,0)
 .Q:'SDWLCNT
"RTN","SDWLD",22,0)
 .D HD1
"RTN","SDWLD",23,0)
 .D DIS
"RTN","SDWLD",24,0)
 .D HD2
"RTN","SDWLD",25,0)
 .D DISPD
"RTN","SDWLD",26,0)
 Q
"RTN","SDWLD",27,0)
GETDATA ;GET PATIENT DATA FROM SD WAIT LIST FILE (^SDWL(409.3) 
"RTN","SDWLD",28,0)
 S SDWLCNT=0,SDWLWTE=0 D
"RTN","SDWLD",29,0)
 .S SDWLDA=0 F  S SDWLDA=$O(^SDWL(409.3,"B",SDWLDFN,SDWLDA)) Q:SDWLDA=""  D
"RTN","SDWLD",30,0)
 ..S SDWLDATA=$G(^SDWL(409.3,SDWLDA,0))
"RTN","SDWLD",31,0)
 ..;IF STATUS IS CLOSED DO NOT DISPLAY RECORD
"RTN","SDWLD",32,0)
 ..I $P(SDWLDATA,U,17)["C" Q
"RTN","SDWLD",33,0)
 ..I $D(^SDWL(409.3,"ST",SDWLDA)) S SDWLWTE=1
"RTN","SDWLD",34,0)
 ..I $D(^SDWL(409.3,"SP",SDWLDA)) S SDWLPOS=1
"RTN","SDWLD",35,0)
 ..S SDWLDT=$P(SDWLDATA,U,2),SDWLCL=$P(SDWLDATA,U,4) I SDWLDT="" Q
"RTN","SDWLD",36,0)
 ..S SDWLCLN="" I $D(^SC(+SDWLCL,0)) S SDWLCLN=$E($P($G(^SC(SDWLCL,0)),U,2),1,6) I SDWLCLN="" Q
"RTN","SDWLD",37,0)
 ..S SDWLCNT=SDWLCNT+1,^TMP("SDWLD",$J,SDWLDFN,SDWLCNT)=SDWLDATA_"~"_SDWLDA,^TMP("SDWLD",$J,"B",SDWLCNT,SDWLDFN,SDWLDT,SDWLDA)=""
"RTN","SDWLD",38,0)
 ..K SDWLDATA
"RTN","SDWLD",39,0)
 Q
"RTN","SDWLD",40,0)
DIS ;DISPLAY PATIENT DATA
"RTN","SDWLD",41,0)
 W !,?5,SDWLNAM,?35,SDWLSSN,!
"RTN","SDWLD",42,0)
 W !,"Patient Currently is on Waiting List for the Following",!
"RTN","SDWLD",43,0)
 Q
"RTN","SDWLD",44,0)
DISPD ;DISPLAY WAIT LIST DATA  
"RTN","SDWLD",45,0)
 S (SDWLDT,SDWLCNT,SDWLCN)=""
"RTN","SDWLD",46,0)
 F  S SDWLCNT=$O(^TMP("SDWLD",$J,SDWLDFN,SDWLCNT)) Q:SDWLCNT=""  D
"RTN","SDWLD",47,0)
 .S X=$G(^TMP("SDWLD",$J,SDWLDFN,SDWLCNT)),SDWLDA=$P(X,"~",2),SDWLIN=$P(X,U,3),SDWLCL=$P(X,U,4),SDWLTY=$P(X,U,5),SDWLPRI=$P(X,U,11)
"RTN","SDWLD",48,0)
 .S SDWLDSP=$P(X,U,17)
"RTN","SDWLD",49,0)
 .S SDWLDT=$P(X,U,2),SDWLTYN=$$EXTERNAL^DILFD(409.3,4,,SDWLTY),SDWLPRIN=$$EXTERNAL^DILFD(409.3,10,,SDWLPRI)
"RTN","SDWLD",50,0)
 .S SDWLSTO=$P(X,U,22),SDWLSPO=$P(X,U,23),SDWLSSO=$P(X,U,24),SDWLSCO=$P(X,U,25)
"RTN","SDWLD",51,0)
 .S SDWLST=$P(X,U,6),SDWLSP=$P(X,U,7),SDWLSS=$P(X,U,8),SDWLSC=$P(X,U,9),SDWLWR="" D
"RTN","SDWLD",52,0)
 ..I SDWLST'="" S SDWLWR=$$EXTERNAL^DILFD(409.3,5,,SDWLST)
"RTN","SDWLD",53,0)
 ..I SDWLSTO["Y" S SDWLWR="OPEN"
"RTN","SDWLD",54,0)
 ..I SDWLSP'="" S SDWLWR=$$EXTERNAL^DILFD(409.3,6,,SDWLSP)
"RTN","SDWLD",55,0)
 ..I SDWLSPO["Y" S SDWLWR="OPEN"
"RTN","SDWLD",56,0)
 ..I SDWLSS'="" S SDWLWR=$$EXTERNAL^DILFD(409.3,7,,SDWLSS)
"RTN","SDWLD",57,0)
 ..I SDWLSSO["Y" S SDWLWR="OPEN"
"RTN","SDWLD",58,0)
 ..I SDWLSC'="" S SDWLWR=$$EXTERNAL^DILFD(409.3,8,,SDWLSC)
"RTN","SDWLD",59,0)
 ..I SDWLSCO["^" S SDWLWR="OPEN"
"RTN","SDWLD",60,0)
 .S YY=$E(SDWLDT,1,3)+1700,YY=$E(YY,3,4),MM=$E(SDWLDT,4,5),DD=$E(SDWLDT,6,7),SDWLDTP=MM_DD_YY
"RTN","SDWLD",61,0)
 .S SDWLCLN="" I $D(^SC(+SDWLCL,0)) S SDWLCLN=$$GET1^DIQ(44,SDWLCL_",",1,,)
"RTN","SDWLD",62,0)
 .S SDWLINN=$E($P($G(^DIC(4,+SDWLIN,0)),U,1),1,8)
"RTN","SDWLD",63,0)
 .S SDWLDIS=$P($G(^SDWL(409.3,SDWLDA,"DIS")),U,3),SDWLDISN=$$EXTERNAL^DILFD(409.3,21,,SDWLDIS)
"RTN","SDWLD",64,0)
 .S SDWLCN=SDWLCN+1
"RTN","SDWLD",65,0)
 .W !,$J(SDWLCN,2)_".",?5,$E(SDWLTYN,1,14),?22,SDWLPRI,?25,$E(SDWLWR,1,19),?51,$E(SDWLINN,1,14) W:$D(SDWLDISC) ?67,SDWLDSP
"RTN","SDWLD",66,0)
 .W ?73,SDWLDTP
"RTN","SDWLD",67,0)
 K SDWLDT,SDWLIN,SDWLCL,SDWLTY,SDWLPRI,SDWLPRIN,SDWLTYN,SDWLST,SDWLSP,SDWLSS,SDWLSC,SDWLCLN,SDWLDTP,SDWLINN,SDWLDA,SDWLDISN
"RTN","SDWLD",68,0)
 K SDWLPRI,SDWLWR
"RTN","SDWLD",69,0)
 Q
"RTN","SDWLD",70,0)
HD1 ;TOF HEADER INFORMATION
"RTN","SDWLD",71,0)
 I '$D(SDWLHDR) S SDWLHDR="Wait List Display"
"RTN","SDWLD",72,0)
 W !!,?80-$L(SDWLHDR_$S($D(SDWLOP):" - "_SDWLOP,1:""))\2,SDWLHDR W:$D(SDWLOP) " - ",SDWLOP  ;SD*5.3*454 removed page feed
"RTN","SDWLD",73,0)
 W !
"RTN","SDWLD",74,0)
 Q
"RTN","SDWLD",75,0)
HD2 ;DATA HEADER
"RTN","SDWLD",76,0)
 W !," #",?4,"Wait List Type",?22,"P",?26,"Waiting",?51,"Institution" W:$D(SDWLDISC) ?65,"Status"
"RTN","SDWLD",77,0)
 W ?74,"Date"
"RTN","SDWLD",78,0)
 W !,?28,"For",?73,"Entered"
"RTN","SDWLD",79,0)
 Q
"RTN","SDWLDISP")
0^2^B34642315
"RTN","SDWLDISP",1,0)
SDWLDISP ;;IOFO BAY PINES/TEH - WAIT LIST - DISPOSITION WAIT LIST ENTRY;06/12/2002 ; 20 Aug 2002  2:10 PM
"RTN","SDWLDISP",2,0)
 ;;5.3;scheduling;**263,273,427,454**;AUG 13 1993
"RTN","SDWLDISP",3,0)
 ;
"RTN","SDWLDISP",4,0)
 ;
"RTN","SDWLDISP",5,0)
 ;******************************************************************
"RTN","SDWLDISP",6,0)
 ;                             CHANGE LOG
"RTN","SDWLDISP",7,0)
 ;                                               
"RTN","SDWLDISP",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLDISP",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLDISP",10,0)
 ;  11/19/2002                 SD*5.3*273              EN1+4 CHECK FOR "^"
"RTN","SDWLDISP",11,0)
 ;  11/19/2002                 SD*5.3*273              REMOVED DIC("S") SCREEN FROM PAT
"RTN","SDWLDISP",12,0)
 ;
"RTN","SDWLDISP",13,0)
 ;
"RTN","SDWLDISP",14,0)
 ;
"RTN","SDWLDISP",15,0)
 ;
"RTN","SDWLDISP",16,0)
EN ;
"RTN","SDWLDISP",17,0)
 S SDWLERR=0 I $D(SDWLLIST),SDWLLIST D
"RTN","SDWLDISP",18,0)
 .I '$D(DFN) S SDWLERR=1 Q
"RTN","SDWLDISP",19,0)
 .I $D(DFN),'$D(^SDWL(409.3,"B",DFN)) D HD,1^VADPT,DEM^VADPT W !,VADM(1),?40,VA("PID"),*7,!,"This Patient has NO entries on the Electronic Wait List." S DIR(0)="E" D ^DIR S DUOUT=1 Q
"RTN","SDWLDISP",20,0)
 I $D(DUOUT) Q
"RTN","SDWLDISP",21,0)
 I 'SDWLERR,$D(SDWLLIST),SDWLLIST D HD S SDWLDFN=DFN K DIR,DIC,DR,DIE,VADM D 1^VADPT,DEM^VADPT W !,VADM(1),?40,VA("PID") S (SDWLBDT,SDWLEDT)="" D DIS G EN1
"RTN","SDWLDISP",22,0)
 K DIR,DIC,DR,DIE
"RTN","SDWLDISP",23,0)
 ;OPTION HEADER
"RTN","SDWLDISP",24,0)
 ;
"RTN","SDWLDISP",25,0)
 S SDWLOP=" - Disposition Patient" D HD
"RTN","SDWLDISP",26,0)
 ;
"RTN","SDWLDISP",27,0)
 ;PATIENT LOOK-UP FROM WAIT LIST PATIENT FILE (^SDWL(409.3,IEN,0).
"RTN","SDWLDISP",28,0)
 ;
"RTN","SDWLDISP",29,0)
 D PAT G END:'$D(SDWLDFN),END:SDWLDFN<0,END:SDWLDFN=""
"RTN","SDWLDISP",30,0)
 ;
"RTN","SDWLDISP",31,0)
 ;DISPLAY PATIENT DATA FROM ^SDWL(409.3,IEN,0).
"RTN","SDWLDISP",32,0)
 ;
"RTN","SDWLDISP",33,0)
 D DIS
"RTN","SDWLDISP",34,0)
 ;PROMPT USER FOR RECORD FOR DISPOSITIONING.
"RTN","SDWLDISP",35,0)
 ;
"RTN","SDWLDISP",36,0)
EN1 K DIR,DIC,DIE,DR,X,Y,SDWLERR S SDWLPS=$S(SDWLCN>1:1,SDWLCN=1:2,1:0),SDWLERR=0
"RTN","SDWLDISP",37,0)
 I SDWLPS=0 W !!,"Patient has no Wait List Entries to Disposition." S DIR(0)="E" D ^DIR G END
"RTN","SDWLDISP",38,0)
 I SDWLPS=1 S DIR(0)="FOA^^" S DIR("A")="Select Wait List (1-"_SDWLCN_") or '^' to Quit? "
"RTN","SDWLDISP",39,0)
 I SDWLPS=2 S DIR(0)="FOA^^" S DIR("A")="Disposition This 'ENTRY' or '^' to Quit? Yes // "
"RTN","SDWLDISP",40,0)
 W ! D ^DIR G END:X["^" S SDWLY=Y W !
"RTN","SDWLDISP",41,0)
 I SDWLPS=1 D
"RTN","SDWLDISP",42,0)
 .S SDWLERR=$S(X?1N.N:0,X?1"N".E:1,X?1"n".E:1,X="":1,X?1"Y".E:0,X?1"y".E:0,$D(DUOUT):1,X["^":1,1:2)
"RTN","SDWLDISP",43,0)
 I $D(SDWLERR),SDWLERR=2 W *7," Invalid Entry" G EN1
"RTN","SDWLDISP",44,0)
 I SDWLPS=2 D
"RTN","SDWLDISP",45,0)
 .S SDWLERR=$S(X="":0,X?1"Y".E:0,X?1"y":0,X?1"N".E:1,X?1"n".E:1,X["^":1,1:2)
"RTN","SDWLDISP",46,0)
 I SDWLERR=2 W *7," Invalid Entry" G EN1
"RTN","SDWLDISP",47,0)
 G END:SDWLERR
"RTN","SDWLDISP",48,0)
 I SDWLPS=2,'SDWLY S SDWLY=1
"RTN","SDWLDISP",49,0)
 S SDWLERR=0 I SDWLY?1N.N D  G EN1:SDWLERR
"RTN","SDWLDISP",50,0)
 .K DIR,DIC,DR
"RTN","SDWLDISP",51,0)
 .;
"RTN","SDWLDISP",52,0)
 .;CHECK FOR VALID ENTRY
"RTN","SDWLDISP",53,0)
 .;
"RTN","SDWLDISP",54,0)
 .I '$D(^TMP("SDWLD",$J,SDWLDFN,+SDWLY)) W " Invalid Entry " S SDWLERR=1 Q
"RTN","SDWLDISP",55,0)
 .S SDWLDA=$P($G(^TMP("SDWLD",$J,SDWLDFN,+SDWLY)),"~",2)
"RTN","SDWLDISP",56,0)
 .;
"RTN","SDWLDISP",57,0)
 .;LOCK DATA FILE
"RTN","SDWLDISP",58,0)
 .;
"RTN","SDWLDISP",59,0)
 .L ^SDWL(409.3,SDWLDA):5 I '$T W !,"Another User is Editing this Entry. Try Later." S DUOUT=1
"RTN","SDWLDISP",60,0)
 I $D(DUOUT) G END
"RTN","SDWLDISP",61,0)
 ;
"RTN","SDWLDISP",62,0)
 ;GET PATIENT DATA FROM ^SDWL(409.3,IEN,0).
"RTN","SDWLDISP",63,0)
 ;
"RTN","SDWLDISP",64,0)
 D GETDATA
"RTN","SDWLDISP",65,0)
 ;
"RTN","SDWLDISP",66,0)
 ;ENTER DISPOSITION
"RTN","SDWLDISP",67,0)
 ;  
"RTN","SDWLDISP",68,0)
 D EDIT G END:$D(DUOUT) I $D(SDWLERR) G END:SDWLERR
"RTN","SDWLDISP",69,0)
 W !,"*** Patient has been removed from Wait List. ***"
"RTN","SDWLDISP",70,0)
 K DIR,DIE,DR,DIC
"RTN","SDWLDISP",71,0)
 S DIR(0)="E" D ^DIR I $D(DUOUT) G END
"RTN","SDWLDISP",72,0)
 D END G EN
"RTN","SDWLDISP",73,0)
 ;
"RTN","SDWLDISP",74,0)
 Q
"RTN","SDWLDISP",75,0)
PAT ;PATIENT LOOK-UP
"RTN","SDWLDISP",76,0)
 ;
"RTN","SDWLDISP",77,0)
 S DIC(0)="EMNAQ",DIC=409.3 D ^DIC S (SDWLDFN,DFN)=$P(Y,U,2) G PAT1:DFN<0
"RTN","SDWLDISP",78,0)
 G PAT1:DFN=""
"RTN","SDWLDISP",79,0)
 S SDWLNAM=$$GET1^DIQ(2,DFN_",",.01)
"RTN","SDWLDISP",80,0)
 S X=$$GET1^DIQ(2,DFN_",",".351") I X'="" W !!,*7,"PATIENT'S DATE OF DEATH HAS BEEN RECORDED"  ;SD*5.3*454 allow user to disposition deceased patient
"RTN","SDWLDISP",81,0)
 D 1^VADPT
"RTN","SDWLDISP",82,0)
PAT1 Q
"RTN","SDWLDISP",83,0)
 ;
"RTN","SDWLDISP",84,0)
DIS ;DISPLAY DATA FOR PATIENT
"RTN","SDWLDISP",85,0)
 ;
"RTN","SDWLDISP",86,0)
 S SDWLDISC="",SDWLCN=0,SDWLHDR="Wait List Disposition"
"RTN","SDWLDISP",87,0)
 D EN^SDWLD(SDWLDFN,VA("PID"),VADM(1))
"RTN","SDWLDISP",88,0)
 K VADM,VAIN,VA,SDWLDISC
"RTN","SDWLDISP",89,0)
 Q
"RTN","SDWLDISP",90,0)
GETDATA ;PATIENT DATA RETRIEVAL
"RTN","SDWLDISP",91,0)
 ;
"RTN","SDWLDISP",92,0)
 S SDWLDATA=$G(^SDWL(409.3,SDWLDA,0))
"RTN","SDWLDISP",93,0)
 S SDWLIN=$P(SDWLDATA,U,3),SDWLCL=+$P(SDWLDATA,U,4),SDWLTY=$P(SDWLDATA,U,5),SDWLST=$P(SDWLDATA,U,6)
"RTN","SDWLDISP",94,0)
 S SDWLSP=$P(SDWLDATA,U,7),SDWLSS=$P(SDWLDATA,U,8),SDWLSC=$P(SDWLDATA,U,9),SDWLPRI=$P(SDWLDATA,U,10),SDWLRB=$P(SDWLDATA,U,11)
"RTN","SDWLDISP",95,0)
 S SDWLPROV=$P(SDWLDATA,U,12),SDWLDAPT=$P(SDWLDATA,U,16),SDWLST=$P(SDWLDATA,U,17),SDWLDUZ=DUZ,SDWLEDT=DT
"RTN","SDWLDISP",96,0)
 S SDWLSCL="" I SDWLSC S SDWLSCL=+$P(^SDWL(409.32,SDWLSC,0),U,1)
"RTN","SDWLDISP",97,0)
 I $D(^SDWL(409.3,SDWLDA,"DIS")) S SDWLDISP=$P(^SDWL(409.3,SDWLDA,"DIS"),U,3)
"RTN","SDWLDISP",98,0)
 Q
"RTN","SDWLDISP",99,0)
EDIT ;ENTER/EDIT DISPOSITION
"RTN","SDWLDISP",100,0)
 ;
"RTN","SDWLDISP",101,0)
 S SDWLDUZ=DUZ,SDWLERR=0 K DIR,DR,DIE,DIC
"RTN","SDWLDISP",102,0)
 I $D(SDWLDISP) S DIR("B")=$$EXTERNAL^DILFD(409.3,21,,SDWLDISP)
"RTN","SDWLDISP",103,0)
 S DIR(0)="SO^D:DEATH;NC:REMOVED/NON-VA CARE;SA:REMOVED/SCHEDULED-ASSIGNED;CC:REMOVED/VA CONTRACT CARE;NN:REMOVED/NO LONGER NECESSARY;ER:ENTERED IN ERROR^"
"RTN","SDWLDISP",104,0)
 S DIR("L",1)="Disposition Reason:",DIR("L",2)="",DIR("L",3)="D DEATH",DIR("L",4)="NC REMOVED/NON-VA CARE",DIR("L",5)="SA REMOVED/SCHEDULED-ASSIGNED"
"RTN","SDWLDISP",105,0)
 S DIR("L",6)="CC REMOVED/VA CONTRACT CARE",DIR("L",7)="NN REMOVED/NO LONGER NECESSARY",DIR("L")="ER ENTERED IN ERROR"
"RTN","SDWLDISP",106,0)
 D ^DIR
"RTN","SDWLDISP",107,0)
 I X="" S DUOUT=1 Q
"RTN","SDWLDISP",108,0)
 I X="^" S DUOUT=1 Q
"RTN","SDWLDISP",109,0)
 S SDWLDISP=$S(X["D":"D",X["d":"D",X["NC":"NC",X["nc":"NC",X["SA":"SA",X["sa":"SA",X["CC":"CC",X["cc":"CC",X["NN":"NN",X["nn":"NN",X["ER":"ER",X["er":"ER",1:0)
"RTN","SDWLDISP",110,0)
 I SDWLDISP=0 S SDWLERR=1
"RTN","SDWLDISP",111,0)
 I SDWLERR W *7,"Invalid Entry" G EDIT
"RTN","SDWLDISP",112,0)
 S DIE("NO^")="NO EDITING"
"RTN","SDWLDISP",113,0)
 S DIE="^SDWL(409.3,",DA=SDWLDA,DR="21////^S X=SDWLDISP" D ^DIE
"RTN","SDWLDISP",114,0)
 S DR="19////^S X=DT" D ^DIE
"RTN","SDWLDISP",115,0)
 S DR="20////^S X=SDWLDUZ" D ^DIE
"RTN","SDWLDISP",116,0)
 S DR="23////^S X=""C""" D ^DIE
"RTN","SDWLDISP",117,0)
 I SDWLSCL K:$D(^SDWL(409.3,"SC",SDWLSCL,SDWLDA)) ^SDWL(409.3,"SC",SDWLSCL,SDWLDA)
"RTN","SDWLDISP",118,0)
 I SDWLSS K:$D(^SDWL(409.3,"SS",SDWLDFN,SDWLSS,SDWLDA)) ^SDWL(409.3,"SS",SDWLDFN,SDWLSS,SDWLDA)
"RTN","SDWLDISP",119,0)
 Q
"RTN","SDWLDISP",120,0)
HD ;HEADER
"RTN","SDWLDISP",121,0)
 ;
"RTN","SDWLDISP",122,0)
 W:$D(IOF) @IOF W !!,?80-$L("Wait List - Disposition Patient")\2,"Wait List - Disposition Patient",!!
"RTN","SDWLDISP",123,0)
 ;
"RTN","SDWLDISP",124,0)
END ;QUIT OPTION
"RTN","SDWLDISP",125,0)
 K DIC,DIR,DR,DIE,SDWLDFN,DUOUT,SDWLSCL
"RTN","SDWLDISP",126,0)
 K SDWLCL,SDWSLCN,SDWLDA,SDWLDAPT,SDWLDATA,SDWLDFN,SDWLDISP,SDWLDUZ,SDWLEDT,SDWLERR,SDWLIN,SDWLNAM,SDWLOP,SDWLPRI
"RTN","SDWLDISP",127,0)
 K SDWLPROV,SDWLPS,SDWLRB,SDWLSC,SDWLSP,SDWLSS,SDWLST,SDWLTY,SDWLY,X,Y,SDWLHDR
"RTN","SDWLDISP",128,0)
 Q
"RTN","SDWLE110")
0^3^B23512324
"RTN","SDWLE110",1,0)
SDWLE110 ;;IOFO BAY PINES/TEH - WAITING LIST-ENTER/EDIT;06/12/2002 ; 29 Aug 2002  2:54 PM
"RTN","SDWLE110",2,0)
 ;;5.3;scheduling;**263,273,424,454**;AUG 13 1993
"RTN","SDWLE110",3,0)
 ;
"RTN","SDWLE110",4,0)
 ;
"RTN","SDWLE110",5,0)
 ;******************************************************************
"RTN","SDWLE110",6,0)
 ;                             CHANGE LOG
"RTN","SDWLE110",7,0)
 ;                                               
"RTN","SDWLE110",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLE110",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLE110",10,0)
 ;   11/27/02                  SD*5.3*273            Add "/", line SA1+11,+13,FA2+13
"RTN","SDWLE110",11,0)
 ;   
"RTN","SDWLE110",12,0)
 ;   
"RTN","SDWLE110",13,0)
EN K DIR
"RTN","SDWLE110",14,0)
 I $D(^SDWL(409.3,SDWLDA,0)) S DIR("B")=$$EXTERNAL^DILFD(409.3,10,,$P(^(0),U,11))
"RTN","SDWLE110",15,0)
 I DIR("B")="" K DIR("B")
"RTN","SDWLE110",16,0)
 S DIR(0)="SO^1:Future Date;2:ASAP"
"RTN","SDWLE110",17,0)
 S DIR("L",1)="Priority",DIR("L",2)=""
"RTN","SDWLE110",18,0)
 S DIR("L",3)="1. Future Date",DIR("L")="2. ASAP"
"RTN","SDWLE110",19,0)
 D ^DIR I X["^" S DUOUT=1 Q  ;-'^' here will remove patient from wait list
"RTN","SDWLE110",20,0)
 I X="@" W *7," ??" G EN
"RTN","SDWLE110",21,0)
 I X="" W *7,"Required or '^' to quit." G EN
"RTN","SDWLE110",22,0)
 I $D(DTOUT) S DUOUT=1 Q
"RTN","SDWLE110",23,0)
 S X=$E(X,1)
"RTN","SDWLE110",24,0)
 S X=$TR(X,"abcdefghijklmnopqrstuvwxyz","ABCEDFGHIJKLMNOPQRSTUVWXYZ")
"RTN","SDWLE110",25,0)
 S SDWLPRIE=$S(X["A":"A",X["F":"F",X[1:"F",X[2:"A",1:"F")
"RTN","SDWLE110",26,0)
 S DIE="^SDWL(409.3,",DA=SDWLDA,DR="10////^S X=SDWLPRIE" D ^DIE
"RTN","SDWLE110",27,0)
 ;
"RTN","SDWLE110",28,0)
 ;If priority is ASAP ask requesting provider
"RTN","SDWLE110",29,0)
 ;
"RTN","SDWLE110",30,0)
 I SDWLPRIE="A" S Y=DT D DD^%DT W " ",Y D SA,DUP G END:$D(DUOUT) Q
"RTN","SDWLE110",31,0)
 I SDWLPRIE="F" D FA G END:$D(DUOUT) Q  ;to enter future date
"RTN","SDWLE110",32,0)
 Q
"RTN","SDWLE110",33,0)
 ;
"RTN","SDWLE110",34,0)
SA K DIR,DR,DIE S SDWLERR=0,SDWLX=$S($D(SDWLPROV):$$EXTERNAL^DILFD(409.3,12,,SDWLPROV),1:"")
"RTN","SDWLE110",35,0)
 I $D(SDWLPROV),SDWLPROV,SDWLX'="" S DIR("B")=SDWLX
"RTN","SDWLE110",36,0)
 I $D(^SDWL(409.3,SDWLDA,0)) S DIR("B")=$$EXTERNAL^DILFD(409.3,11,,$P(^(0),U,12))
"RTN","SDWLE110",37,0)
 I DIR("B")="" K DIR("B")
"RTN","SDWLE110",38,0)
 K %DT,DR S DIR(0)="SO^1:Provider;2:Patient"
"RTN","SDWLE110",39,0)
 S DIR("L",1)="Request By",DIR("L",2)=""
"RTN","SDWLE110",40,0)
 S DIR("L",3)="1. Provider",DIR("L")="2. Patient"
"RTN","SDWLE110",41,0)
 D ^DIR I X["^" S DUOUT=1,DIR("A")="ASAP" Q
"RTN","SDWLE110",42,0)
 S X=Y
"RTN","SDWLE110",43,0)
 I $D(DTOUT) S DUOUT=1,DIR("A")="ASAP" Q
"RTN","SDWLE110",44,0)
 S SDWLRBE=$S(X=1:1,X["PR":1,X["pr":1,X["Pr":1,X=2:2,X["PA":2,X["pa":2,X["Pa":2,1:0) I 'SDWLRBE W *7," ??" G SA
"RTN","SDWLE110",45,0)
 S DR="11////^S X=SDWLRBE",DA=SDWLDA,DIE="^SDWL(409.3," D ^DIE
"RTN","SDWLE110",46,0)
 ;
"RTN","SDWLE110",47,0)
SA1 I SDWLRBE=1 D
"RTN","SDWLE110",48,0)
 .S DIC("S")="I $$SCREEN^SDUTL2(Y,DT)"
"RTN","SDWLE110",49,0)
 .S SDWLX=$S($D(SDWLPROV):$$EXTERNAL^DILFD(409.3,12,,SDWLPROV),1:"") I SDWLX'="" S DIC("B")=SDWLPROV
"RTN","SDWLE110",50,0)
 .I $D(^SDWL(409.3,SDWLDA,0)) S DIR("B")=$$EXTERNAL^DILFD(409.3,11,,$P(^(0),U,12))
"RTN","SDWLE110",51,0)
 .S SDWLERR=0,DIC(0)="AEQ",DIC=200,DIC("A")="Provider Requesting Appointment: " D ^DIC
"RTN","SDWLE110",52,0)
 .I X["^" S DUOUT=1 Q
"RTN","SDWLE110",53,0)
 .I Y<1 S SDWLERR=1 Q
"RTN","SDWLE110",54,0)
 .I $D(DUOUT) Q
"RTN","SDWLE110",55,0)
 .I $D(DTOUT) S DUOUT=1 Q
"RTN","SDWLE110",56,0)
 .K DIC,DIC("S"),DIC("A"),DIC(0),DIC("B")
"RTN","SDWLE110",57,0)
 .S SDWLPROV=+Y,SDWLPRON=$P(Y,U,2),DIE="^SDWL(409.3,",DA=SDWLDA
"RTN","SDWLE110",58,0)
 .S DR="12////^S X=SDWLPROV" D ^DIE S SDWLPRVE=SDWLPROV
"RTN","SDWLE110",59,0)
 I SDWLERR W *7," Required" G SA1
"RTN","SDWLE110",60,0)
 S DR="11////^S X=SDWLRBE" D ^DIE
"RTN","SDWLE110",61,0)
 S DR="22///TODAY" D ^DIE K DIE,DR,DIC,DIR,SDWLPRVE,SDWLPROV,SDWLPRON
"RTN","SDWLE110",62,0)
 Q
"RTN","SDWLE110",63,0)
 ;
"RTN","SDWLE110",64,0)
 ;If Priority is 'FUTURE' ask Desired Date of Appointment and Requesting by Provider or Patient
"RTN","SDWLE110",65,0)
 ;
"RTN","SDWLE110",66,0)
FA S SDWLERR=0 K DIR,DUOUT,DR,DIE I $D(SDWLDAPE) S Y=SDWLDAPE D DD^%DT S DIR("B")=Y
"RTN","SDWLE110",67,0)
 I $D(^SDWL(409.3,SDWLDA,0)),$P(^(0),U,16) S %DT("B")=$$EXTERNAL^DILFD(409.3,22,,$P(^(0),U,16))  ;SD*5.3*424
"RTN","SDWLE110",68,0)
 S %DT="AE",%DT("A")="Desired Date of Appointment: " D ^%DT
"RTN","SDWLE110",69,0)
 I $D(DTOUT)!(X="^") G EN
"RTN","SDWLE110",70,0)
 I X="" W *7,!!,"This is a required response. Enter '^' to exit.",! G EN  ;SD*5.3*454
"RTN","SDWLE110",71,0)
 S SDWLDAPE=Y,DR="22////^S X=SDWLDAPE",DIE="^SDWL(409.3,",DA=SDWLDA D ^DIE
"RTN","SDWLE110",72,0)
 K SDWLDAPE,Y,DA,DIE,%DT,%DT(0),%DT("A"),%DT("B")
"RTN","SDWLE110",73,0)
 ;
"RTN","SDWLE110",74,0)
FA1 K DIR,%DT,DR S DIR(0)="SO^1:Provider;2:Patient"
"RTN","SDWLE110",75,0)
 S SDWLX=$S($D(SDWLPROV):$$EXTERNAL^DILFD(409.3,12,,SDWLPROV),1:"") I SDWLX'="" S DIR("B")=SDWLPROV
"RTN","SDWLE110",76,0)
 I $D(^SDWL(409.3,SDWLDA,0)) S DIR("B")=$$EXTERNAL^DILFD(409.3,11,,$P(^(0),U,12))
"RTN","SDWLE110",77,0)
 I DIR("B")="" K DIR("B")
"RTN","SDWLE110",78,0)
 S DIR("L",1)="Request By",DIR("L",2)=""
"RTN","SDWLE110",79,0)
 S DIR("L",3)="1. Provider",DIR("L")="2. Patient"
"RTN","SDWLE110",80,0)
 D ^DIR I X["^" S DIR("B")=$S($D(SDWLDAPE):SDWLDAPE,1:"") G FA
"RTN","SDWLE110",81,0)
 S X=Y
"RTN","SDWLE110",82,0)
 I $D(DTOUT) S DUOUT=1 S DIR("B")=SDWLDAPE G FA
"RTN","SDWLE110",83,0)
 S SDWLRBE=$S(X=1:1,X["PR":1,X["pr":1,X["Pr":1,X=2:2,X["PA":2,X["pa":2,X["Pa":2,1:0) I 'SDWLRBE W *7," ??" G FA1
"RTN","SDWLE110",84,0)
 S DR="11////^S X=SDWLRBE",DA=SDWLDA,DIE="^SDWL(409.3," D ^DIE
"RTN","SDWLE110",85,0)
 ;
"RTN","SDWLE110",86,0)
FA2 I SDWLRBE=1 D
"RTN","SDWLE110",87,0)
 .;
"RTN","SDWLE110",88,0)
 .;if provider is selected look-up valid provider from new person (File 200)
"RTN","SDWLE110",89,0)
 .;
"RTN","SDWLE110",90,0)
 .S DIC("S")="I $$SCREEN^SDUTL2(Y,DT)"
"RTN","SDWLE110",91,0)
 .S SDWLX=$S($D(SDWLPROV):$$EXTERNAL^DILFD(409.3,12,,SDWLPROV),1:""),DIC("B")=$S($D(SDWLPROV):SDWLX,1:"")
"RTN","SDWLE110",92,0)
 .S SDWLERR=0,DIC(0)="AEQ",DIC=200,DIC("A")="Provider Requesting Appointment: " D ^DIC
"RTN","SDWLE110",93,0)
 .I X["^" S DUOUT=1 Q
"RTN","SDWLE110",94,0)
 .I Y<1 S SDWLERR=1 Q
"RTN","SDWLE110",95,0)
 .I $D(DTOUT) S DUOUT=1 Q
"RTN","SDWLE110",96,0)
 .Q:$D(DUOUT)  D
"RTN","SDWLE110",97,0)
 ..K DIC,DIC("S"),DIC("A"),DIC(0),DIC("B")
"RTN","SDWLE110",98,0)
 ..S SDWLPROV=+Y,SDWLPRON=$P(Y,U,2),DIE="^SDWL(409.3,",DA=SDWLDA
"RTN","SDWLE110",99,0)
 ..S DR="12////^S X=SDWLPROV" D ^DIE S SDWLPRVE=SDWLPROV K DIE
"RTN","SDWLE110",100,0)
 I SDWLERR W *7," Required" G FA2
"RTN","SDWLE110",101,0)
END K DIC,DIE,DIR I $D(DUOUT) S DIR("B")=$S(SDWLPRIE="F":"Future",1:"ASAP")
"RTN","SDWLE110",102,0)
 K SDWLPRVE,SDWLPROV,SDWLPRON
"RTN","SDWLE110",103,0)
 Q
"RTN","SDWLE110",104,0)
 ;
"RTN","SDWLE110",105,0)
DUP ;
"RTN","SDWLE110",106,0)
 Q
"VER")
8.0^22.0
"BLD",6320,6)
^369
**END**
**END**

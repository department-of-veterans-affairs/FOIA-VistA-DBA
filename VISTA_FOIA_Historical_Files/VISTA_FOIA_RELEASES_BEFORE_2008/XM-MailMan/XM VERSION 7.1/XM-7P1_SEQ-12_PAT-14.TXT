$TXT Created by WILLIAMSON,ROBERT at SILVER.FORUM.VA.GOV on TUESDAY, 03/28/95 at 12:38
=============================================================================
Run Date: APR 18, 1995                     Designation: XM*7.1*14
Package : XM - MAILMAN                         Priority: Mandatory
Version : 7.1        SEQ #12                    Status: Verified
=============================================================================


Subject: P-MESSAGE ENCORE

Category: 
  - PATCH FOR A PATCH
  - Routine

Description: 
============

The following routine error is fixed with this patch:
 
  o  XMAPHOST:  A message that is designated to be sent to multiple users
in the background will not go to all of them.
 
 Installation Instructions
 =========================
 
         Save a copy of the above routine either before you begin this
         installation or when requested to do so during the unloading
         of the specified PackMan message.
 
 1.  If your system uses mapped routine sets, unmap routines from any
mapped routine sets.
 
 2.  This patch cannot be loaded when any users or background processes
may be within the affected areas of MailMan.  In particular, a background
process that generates bulletins could bomb.  Therefore it is recommended
that this patch be installed only when all users, Task Manager, and all
MailMan-using background tasks are not running.  However, the probability
of any task being affected is negligable.
 
 3.  Load the PackMan message into your production account.
 
 4.  Execute CHECK^XTSUMBLD to compute checksums for the routine and
confirm that the checksum is what is documented below.
 
     * Stop installation, reload the original routines and call your
       supporting ISC if checksums do not match.
 
 5.  Move the newly installed routine to all DHCP systems (as appropriate).
 
 6.  Check the mapped routine set and map the appropriate routines into
the routine set.  Rebuild the mapped routine set.
 
 7.  Start Task Manager and enable users.
 
 
 NOTES:
 
   o  There is no TARGET or NOIS report associated with this patch.
   o  The installation is the same regardless of the platform.
   o  Users may NOT be on the system during the installation of this patch.
   o  Any mapped routines must be unmapped, changed and remapped.

Routine Information:
====================

Routine Name:
  - XMAPHOST

 
Change line XMAPHOST+11 from:
    K ^TMP("XMY",$J),^TMP("XMY0",$J),XMY,XMY0
 
To: K ^TMP("XMY",$J),^TMP("XMY0",$J) I '$D(ZTQUEUED) K XMY,XMY0
 
 
For example, by replacing ,X with  I '$D(ZTQUEUED) K X
 
 
The second line should look like:
         ;;7.1;MailMan;**7,14**;Sep 12, 1994

Routine Checksum:
Before patch:  6372694
After patch:   6430917

=============================================================================
User Information:                               
Entered By  : HIRZ,LEE J                    Date Entered : MAR 22, 1995
Completed By: WILLIAMSON,ROBERT             Date Completed : APR 18, 1995
Verified By : HARROD,PAUL                   Date Verified : APR 18, 1995
=============================================================================


Packman Mail Message:
=====================

 
$END TXT

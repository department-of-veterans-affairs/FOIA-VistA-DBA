Released SD*5.3*492 SEQ #405
Extracted from mail message
**KIDS**:SD*5.3*492^

**INSTALL NAME**
SD*5.3*492
"BLD",6827,0)
SD*5.3*492^SCHEDULING^0^3061012^y
"BLD",6827,1,0)
^^1^1^3060717^
"BLD",6827,1,1,0)
Duplicate Patient Appointments for Clinic View
"BLD",6827,4,0)
^9.64PA^^
"BLD",6827,6.3)
1
"BLD",6827,"ABPKG")
n
"BLD",6827,"KRN",0)
^9.67PA^8989.52^19
"BLD",6827,"KRN",.4,0)
.4
"BLD",6827,"KRN",.4,"NM",0)
^9.68A^^
"BLD",6827,"KRN",.401,0)
.401
"BLD",6827,"KRN",.402,0)
.402
"BLD",6827,"KRN",.403,0)
.403
"BLD",6827,"KRN",.5,0)
.5
"BLD",6827,"KRN",.84,0)
.84
"BLD",6827,"KRN",3.6,0)
3.6
"BLD",6827,"KRN",3.8,0)
3.8
"BLD",6827,"KRN",9.2,0)
9.2
"BLD",6827,"KRN",9.8,0)
9.8
"BLD",6827,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6827,"KRN",9.8,"NM",1,0)
SDAM3^^0^B10895275
"BLD",6827,"KRN",9.8,"NM","B","SDAM3",1)

"BLD",6827,"KRN",19,0)
19
"BLD",6827,"KRN",19.1,0)
19.1
"BLD",6827,"KRN",101,0)
101
"BLD",6827,"KRN",409.61,0)
409.61
"BLD",6827,"KRN",771,0)
771
"BLD",6827,"KRN",870,0)
870
"BLD",6827,"KRN",8989.51,0)
8989.51
"BLD",6827,"KRN",8989.52,0)
8989.52
"BLD",6827,"KRN",8994,0)
8994
"BLD",6827,"KRN","B",.4,.4)

"BLD",6827,"KRN","B",.401,.401)

"BLD",6827,"KRN","B",.402,.402)

"BLD",6827,"KRN","B",.403,.403)

"BLD",6827,"KRN","B",.5,.5)

"BLD",6827,"KRN","B",.84,.84)

"BLD",6827,"KRN","B",3.6,3.6)

"BLD",6827,"KRN","B",3.8,3.8)

"BLD",6827,"KRN","B",9.2,9.2)

"BLD",6827,"KRN","B",9.8,9.8)

"BLD",6827,"KRN","B",19,19)

"BLD",6827,"KRN","B",19.1,19.1)

"BLD",6827,"KRN","B",101,101)

"BLD",6827,"KRN","B",409.61,409.61)

"BLD",6827,"KRN","B",771,771)

"BLD",6827,"KRN","B",870,870)

"BLD",6827,"KRN","B",8989.51,8989.51)

"BLD",6827,"KRN","B",8989.52,8989.52)

"BLD",6827,"KRN","B",8994,8994)

"BLD",6827,"QUES",0)
^9.62^^
"BLD",6827,"REQB",0)
^9.611^1^1
"BLD",6827,"REQB",1,0)
SD*5.3*478^2
"BLD",6827,"REQB","B","SD*5.3*478",1)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
492^3061012
"PKG",16,22,1,"PAH",1,1,0)
^^1^1^3061012
"PKG",16,22,1,"PAH",1,1,1,0)
Duplicate Patient Appointments for Clinic View
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","SDAM3")
0^1^B10895275^B9638005
"RTN","SDAM3",1,0)
SDAM3 ;MJK/ALB - Appt Mgt (Clinic) ; 4/21/05 12:23pm
"RTN","SDAM3",2,0)
 ;;5.3;Scheduling;**63,189,380,478,492**;Aug 13, 1993;Build 1
"RTN","SDAM3",3,0)
 ;
"RTN","SDAM3",4,0)
INIT ; -- get init clinic appt data
"RTN","SDAM3",5,0)
 ;  input:        SDCLN := ifn of pat
"RTN","SDAM3",6,0)
 ; output:  ^TMP("SDAM" := appt array
"RTN","SDAM3",7,0)
 S X=$P($G(^DG(43,1,"SCLR")),U,12),SDPRD=$S(X:X,1:2)
"RTN","SDAM3",8,0)
 S X1=DT,X2=-SDPRD D C^%DTC S VALMB=X D RANGE^VALM11
"RTN","SDAM3",9,0)
 I '$D(VALMBEG) S VALMQUIT="" G INITQ
"RTN","SDAM3",10,0)
 S SDBEG=VALMBEG,SDEND=VALMEND
"RTN","SDAM3",11,0)
 D CHGCAP^VALM("NAME","Patient")
"RTN","SDAM3",12,0)
 S X="NO ACTION TAKEN" D LIST^SDAM
"RTN","SDAM3",13,0)
INITQ K VALMB,VALMBEG,VALMEND Q
"RTN","SDAM3",14,0)
 ;
"RTN","SDAM3",15,0)
BLD ; -- scan apts
"RTN","SDAM3",16,0)
 N VA,SDAMDD,SDNAME,SDMAX,SDLARGE,DFN,SDCL,BL,XC,XW,AC,AW,TC,TW,NC,NW,SC,SW,SDT,SDDA ; done for speed see INIT^SDAM10
"RTN","SDAM3",17,0)
 D INIT^SDAM10
"RTN","SDAM3",18,0)
 F SDT=SDBEG:0 S SDT=$O(^SC(SDCLN,"S",SDT)) Q:'SDT!($P(SDT,".",1)>SDEND)  D
"RTN","SDAM3",19,0)
 .F SDDA=0:0 S SDDA=$O(^SC(SDCLN,"S",SDT,1,SDDA)) Q:'SDDA  S CNSTLNK=$P($G(^SC(SDCLN,"S",SDT,1,SDDA,"CONS")),U),CSTAT="" S:CNSTLNK'="" CSTAT=$P($G(^GMR(123,CNSTLNK,0)),U,12) D  ;SD/478
"RTN","SDAM3",20,0)
 ..I $D(^SC(SDCLN,"S",SDT,1,SDDA,0)) S DFN=+^(0) D             ;SD/492
"RTN","SDAM3",21,0)
 ...N NDX,DA,FND                                               ;SD/492
"RTN","SDAM3",22,0)
 ...S (FND,NDX)=""                                             ;SD/492
"RTN","SDAM3",23,0)
 ...F  S NDX=$O(^TMP("SDAMIDX",$J,NDX)) Q:NDX=""  D  Q:FND     ;SD/492
"RTN","SDAM3",24,0)
 ....S DA=^TMP("SDAMIDX",$J,NDX)                               ;SD/492
"RTN","SDAM3",25,0)
 ....I $P(DA,U,2)=DFN,$P(DA,U,3)=SDT,$P(DA,U,4)=SDCLN S FND=1  ;SD/492
"RTN","SDAM3",26,0)
 ...Q:FND                                                      ;SD/492
"RTN","SDAM3",27,0)
 ...D PID^VADPT I $D(^DPT(DFN,"S",SDT,0)),$$VALID^SDAM2(DFN,SDCLN,SDT,SDDA) S SDATA=^DPT(DFN,"S",SDT,0),SDCL=SDCLN,SDNAME=VA("BID")_" "_$P($G(^DPT(DFN,0)),U) D:SDCLN=+SDATA BLD1^SDAM1  ;SD/478,492
"RTN","SDAM3",28,0)
 D NUL^SDAM10,LARGE^SDAM10:$D(SDLARGE)
"RTN","SDAM3",29,0)
 S $P(^TMP("SDAM",$J,0),U,4)=VALMCNT
"RTN","SDAM3",30,0)
 Q
"RTN","SDAM3",31,0)
 ;
"RTN","SDAM3",32,0)
HDR ; -- list screen header
"RTN","SDAM3",33,0)
 ;   input:      SDCLN := ifn of pat
"RTN","SDAM3",34,0)
 ;  output:  VALMHDR() := hdr array
"RTN","SDAM3",35,0)
 ;
"RTN","SDAM3",36,0)
 S VALMHDR(1)=$E($P("Clinic: "_$G(^SC(SDCLN,0)),"^",1),1,45)  ;for proper display of clinic name for SD*5.3*189
"RTN","SDAM3",37,0)
 Q
"RTN","SDAM3",38,0)
 ;
"RTN","SDAM3",39,0)
CLN ; -- change clinic
"RTN","SDAM3",40,0)
 I $G(SDAMLIST)["CANCELLED" S VALMBCK="" W !!,*7,"You must be viewing a patient to list cancelled appointments." D PAUSE^VALM1 G CLNQ
"RTN","SDAM3",41,0)
 D FULL^VALM1 S VALMBCK="R"
"RTN","SDAM3",42,0)
 S X="" I $D(XQORNOD(0)) S X=$P($P(XQORNOD(0),U,4),"=",2)
"RTN","SDAM3",43,0)
 W ! S DIC="^SC(",DIC(0)=$S(X]"":"",1:"A")_"EMQ",DIC("A")="Select Clinic: ",DIC("S")="I $P(^(0),U,3)=""C"",'$G(^(""OOS""))"
"RTN","SDAM3",44,0)
 D ^DIC K DIC
"RTN","SDAM3",45,0)
 I Y<0 D  G CLNQ
"RTN","SDAM3",46,0)
 .I SDAMTYP="C" S VALMSG=$C(7)_"Clinic has not been changed."
"RTN","SDAM3",47,0)
 .I SDAMTYP="P" S VALMSG=$C(7)_"View of patient remains in affect."
"RTN","SDAM3",48,0)
 I SDAMTYP'="C" D CHGCAP^VALM("NAME","Patient") S SDAMTYP="C"
"RTN","SDAM3",49,0)
 N SDRES I SDAMTYP="C" S SDRES=$$CLNCK^SDUTL2(+Y,1) I 'SDRES D  G CLNQ
"RTN","SDAM3",50,0)
 .W !,?5,"Clinic MUST be corrected before continuing." D PAUSE^VALM1
"RTN","SDAM3",51,0)
 S SDCLN=+Y K SDFN D BLD
"RTN","SDAM3",52,0)
CLNQ Q
"RTN","SDAM3",53,0)
 ;
"VER")
8.0^22.0
"BLD",6827,6)
^405
**END**
**END**

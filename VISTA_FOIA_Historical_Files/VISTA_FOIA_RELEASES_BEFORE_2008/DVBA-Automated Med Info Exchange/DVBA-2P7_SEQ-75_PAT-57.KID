Released DVBA*2.7*57 SEQ #75
Extracted from mail message
**KIDS**:DVBA*2.7*57^

**INSTALL NAME**
DVBA*2.7*57
"BLD",4275,0)
DVBA*2.7*57^AUTOMATED MED INFO EXCHANGE^0^3041201^y
"BLD",4275,1,0)
^^2^2^3040630^
"BLD",4275,1,1,0)
Please see the National Patch Module for details
"BLD",4275,1,2,0)
of the enhancements included in this patch.
"BLD",4275,4,0)
^9.64PA^396.4^1
"BLD",4275,4,396.4,0)
396.4
"BLD",4275,4,396.4,2,0)
^9.641^396.4^1
"BLD",4275,4,396.4,2,396.4,0)
2507 EXAM  (File-top level)
"BLD",4275,4,396.4,2,396.4,1,0)
^9.6411^90^1
"BLD",4275,4,396.4,2,396.4,1,90,0)
DATE TRANSCRIPTION COMPLETE
"BLD",4275,4,396.4,222)
y^y^p^^^^n^^n
"BLD",4275,4,396.4,224)

"BLD",4275,4,"APDD",396.4,396.4)

"BLD",4275,4,"APDD",396.4,396.4,90)

"BLD",4275,4,"B",396.4,396.4)

"BLD",4275,"ABPKG")
n
"BLD",4275,"KRN",0)
^9.67PA^8989.52^19
"BLD",4275,"KRN",.4,0)
.4
"BLD",4275,"KRN",.401,0)
.401
"BLD",4275,"KRN",.402,0)
.402
"BLD",4275,"KRN",.403,0)
.403
"BLD",4275,"KRN",.5,0)
.5
"BLD",4275,"KRN",.84,0)
.84
"BLD",4275,"KRN",3.6,0)
3.6
"BLD",4275,"KRN",3.8,0)
3.8
"BLD",4275,"KRN",9.2,0)
9.2
"BLD",4275,"KRN",9.8,0)
9.8
"BLD",4275,"KRN",9.8,"NM",0)
^9.68A^11^8
"BLD",4275,"KRN",9.8,"NM",2,0)
DVBAVDPT^^0^B9992968
"BLD",4275,"KRN",9.8,"NM",4,0)
DVBCENQ1^^0^B24327636
"BLD",4275,"KRN",9.8,"NM",5,0)
DVBAB70^^0^B39943172
"BLD",4275,"KRN",9.8,"NM",6,0)
DVBASPD2^^0^B28946150
"BLD",4275,"KRN",9.8,"NM",8,0)
DVBCUTL4^^0^B22469023
"BLD",4275,"KRN",9.8,"NM",9,0)
DVBABEBD^^0^B4109038
"BLD",4275,"KRN",9.8,"NM",10,0)
DVBABFRM^^0^B4020049
"BLD",4275,"KRN",9.8,"NM",11,0)
DVBAB1^^0^B81586529
"BLD",4275,"KRN",9.8,"NM","B","DVBAB1",11)

"BLD",4275,"KRN",9.8,"NM","B","DVBAB70",5)

"BLD",4275,"KRN",9.8,"NM","B","DVBABEBD",9)

"BLD",4275,"KRN",9.8,"NM","B","DVBABFRM",10)

"BLD",4275,"KRN",9.8,"NM","B","DVBASPD2",6)

"BLD",4275,"KRN",9.8,"NM","B","DVBAVDPT",2)

"BLD",4275,"KRN",9.8,"NM","B","DVBCENQ1",4)

"BLD",4275,"KRN",9.8,"NM","B","DVBCUTL4",8)

"BLD",4275,"KRN",19,0)
19
"BLD",4275,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",4275,"KRN",19,"NM",1,0)
DVBA CAPRI GUI^^0
"BLD",4275,"KRN",19,"NM","B","DVBA CAPRI GUI",1)

"BLD",4275,"KRN",19.1,0)
19.1
"BLD",4275,"KRN",101,0)
101
"BLD",4275,"KRN",101,"NM",0)
^9.68A^^
"BLD",4275,"KRN",409.61,0)
409.61
"BLD",4275,"KRN",771,0)
771
"BLD",4275,"KRN",870,0)
870
"BLD",4275,"KRN",8989.51,0)
8989.51
"BLD",4275,"KRN",8989.52,0)
8989.52
"BLD",4275,"KRN",8994,0)
8994
"BLD",4275,"KRN",8994,"NM",0)
^9.68A^7^5
"BLD",4275,"KRN",8994,"NM",3,0)
DVBAB REPORT SPECIAL^^0
"BLD",4275,"KRN",8994,"NM",4,0)
DVBAB SAVE FORM^^0
"BLD",4275,"KRN",8994,"NM",5,0)
DVBAB EXAMS BY DATE^^0
"BLD",4275,"KRN",8994,"NM",6,0)
DVBAB TEMPLATE LIST^^0
"BLD",4275,"KRN",8994,"NM",7,0)
DVBAB LOAD FORM^^0
"BLD",4275,"KRN",8994,"NM","B","DVBAB EXAMS BY DATE",5)

"BLD",4275,"KRN",8994,"NM","B","DVBAB LOAD FORM",7)

"BLD",4275,"KRN",8994,"NM","B","DVBAB REPORT SPECIAL",3)

"BLD",4275,"KRN",8994,"NM","B","DVBAB SAVE FORM",4)

"BLD",4275,"KRN",8994,"NM","B","DVBAB TEMPLATE LIST",6)

"BLD",4275,"KRN","B",.4,.4)

"BLD",4275,"KRN","B",.401,.401)

"BLD",4275,"KRN","B",.402,.402)

"BLD",4275,"KRN","B",.403,.403)

"BLD",4275,"KRN","B",.5,.5)

"BLD",4275,"KRN","B",.84,.84)

"BLD",4275,"KRN","B",3.6,3.6)

"BLD",4275,"KRN","B",3.8,3.8)

"BLD",4275,"KRN","B",9.2,9.2)

"BLD",4275,"KRN","B",9.8,9.8)

"BLD",4275,"KRN","B",19,19)

"BLD",4275,"KRN","B",19.1,19.1)

"BLD",4275,"KRN","B",101,101)

"BLD",4275,"KRN","B",409.61,409.61)

"BLD",4275,"KRN","B",771,771)

"BLD",4275,"KRN","B",870,870)

"BLD",4275,"KRN","B",8989.51,8989.51)

"BLD",4275,"KRN","B",8989.52,8989.52)

"BLD",4275,"KRN","B",8994,8994)

"BLD",4275,"QUES",0)
^9.62^^
"BLD",4275,"REQB",0)
^9.611^2^1
"BLD",4275,"REQB",2,0)
DVBA*2.7*53^2
"BLD",4275,"REQB","B","DVBA*2.7*53",2)

"FIA",396.4)
2507 EXAM
"FIA",396.4,0)
^DVB(396.4,
"FIA",396.4,0,0)
396.4I
"FIA",396.4,0,1)
y^y^p^^^^n^^n
"FIA",396.4,0,10)

"FIA",396.4,0,11)

"FIA",396.4,0,"RLRO")

"FIA",396.4,0,"VR")
2.7^DVBA
"FIA",396.4,396.4)
1
"FIA",396.4,396.4,90)

"KRN",19,9510,-1)
0^1
"KRN",19,9510,0)
DVBA CAPRI GUI^Capri GUI (Broker)^^B^^^^^^^^AUTOMATED MED INFO EXCHANGE^^
"KRN",19,9510,1,0)
^19.06^2^2^3040326^^^^
"KRN",19,9510,1,1,0)
This is the 'B' type option used by CAPRI GUI client application. It
"KRN",19,9510,1,2,0)
contains all the RPCs used by the CAPRI GUI application.
"KRN",19,9510,20)

"KRN",19,9510,25)

"KRN",19,9510,99.1)
59833,46974
"KRN",19,9510,"RPC",0)
^19.05P^105^104
"KRN",19,9510,"RPC",1,0)
DVBAB REPORT LISTS
"KRN",19,9510,"RPC",2,0)
DVBAB APPOINTMENT LIST
"KRN",19,9510,"RPC",3,0)
DVBAB CHECK CREDENTIALS
"KRN",19,9510,"RPC",4,0)
DVBAB FIND EXAMS
"KRN",19,9510,"RPC",5,0)
DVBAB PTINQ
"KRN",19,9510,"RPC",6,0)
DVBAB INCREASE EXAM COUNT
"KRN",19,9510,"RPC",7,0)
DVBAB SEND MSG
"KRN",19,9510,"RPC",8,0)
DVBAB REPORT CHECKLIST
"KRN",19,9510,"RPC",9,0)
DDR FILER
"KRN",19,9510,"RPC",10,0)
DDR LISTER
"KRN",19,9510,"RPC",11,0)
DDR VALIDATOR
"KRN",19,9510,"RPC",12,0)
DDR GETS ENTRY DATA
"KRN",19,9510,"RPC",14,0)
XWB GET VARIABLE VALUE
"KRN",19,9510,"RPC",15,0)
DVBAB HEALTH SUMMARY TEXT
"KRN",19,9510,"RPC",16,0)
TIU DOCUMENTS BY CONTEXT
"KRN",19,9510,"RPC",17,0)
TIU GET RECORD TEXT
"KRN",19,9510,"RPC",18,0)
ORQQCN LIST
"KRN",19,9510,"RPC",19,0)
ORQQCN DETAIL
"KRN",19,9510,"RPC",20,0)
DVBAB INST LIST
"KRN",19,9510,"RPC",22,0)
ORWRP REPORT TEXT
"KRN",19,9510,"RPC",23,0)
ORWORR AGET
"KRN",19,9510,"RPC",24,0)
ORWRA IMAGING EXAMS
"KRN",19,9510,"RPC",25,0)
ORWRP1 LISTNUTR
"KRN",19,9510,"RPC",26,0)
ORWMC PATIENT PROCEDURES
"KRN",19,9510,"RPC",27,0)
ORQQPL PROBLEM LIST
"KRN",19,9510,"RPC",28,0)
ORWORR GET4LST
"KRN",19,9510,"RPC",29,0)
ORWLR CUMULATIVE REPORT
"KRN",19,9510,"RPC",32,0)
DVBAB DATETIME
"KRN",19,9510,"RPC",34,0)
ORWPT ADMITLST
"KRN",19,9510,"RPC",35,0)
DVBAB SC VETERAN REPORT
"KRN",19,9510,"RPC",36,0)
ORQQVS VISITS/APPTS
"KRN",19,9510,"RPC",37,0)
ORWU DT
"KRN",19,9510,"RPC",38,0)
ORWLRR CHART
"KRN",19,9510,"RPC",39,0)
DG SENSITIVE RECORD ACCESS
"KRN",19,9510,"RPC",40,0)
DG SENSITIVE RECORD BULLETIN
"KRN",19,9510,"RPC",41,0)
DVBAB REPORT EXAM CHKLIST
"KRN",19,9510,"RPC",42,0)
DVBAB REPORT ADMINQ
"KRN",19,9510,"RPC",43,0)
DVBAB REPORT INCOMPVET
"KRN",19,9510,"RPC",44,0)
DVBAB REPORT DISCHARGE
"KRN",19,9510,"RPC",45,0)
DVBAB REPORT READMIT
"KRN",19,9510,"RPC",46,0)
DVBAB REPORT ADMISSIONS
"KRN",19,9510,"RPC",47,0)
DVBAB REPORT 7131INQ
"KRN",19,9510,"RPC",48,0)
DVBAB PENDING C&P REPORT
"KRN",19,9510,"RPC",49,0)
DVBAB REPORT CPDETAILS
"KRN",19,9510,"RPC",50,0)
DVBAB AMIS REPORT
"KRN",19,9510,"RPC",51,0)
DVBAB REPORT PENDING7131
"KRN",19,9510,"RPC",52,0)
DVBAB LABLIST
"KRN",19,9510,"RPC",53,0)
DVBAB VERSION
"KRN",19,9510,"RPC",54,0)
DDR DELETE ENTRY
"KRN",19,9510,"RPC",55,0)
ORWRP REPORT LISTS
"KRN",19,9510,"RPC",57,0)
DVBAB DIVISION
"KRN",19,9510,"RPC",58,0)
DVBAB TEAM PATIENTS
"KRN",19,9510,"RPC",59,0)
ORWCIRN FACLIST
"KRN",19,9510,"RPC",60,0)
XWB REMOTE STATUS CHECK
"KRN",19,9510,"RPC",61,0)
XWB REMOTE GETDATA
"KRN",19,9510,"RPC",63,0)
ORWPT DIEDON
"KRN",19,9510,"RPC",66,0)
XWB REMOTE RPC
"KRN",19,9510,"RPC",68,0)
DDR FIND1
"KRN",19,9510,"RPC",69,0)
DVBAB REPORTS
"KRN",19,9510,"RPC",70,0)
ORWRP2 COMPABV
"KRN",19,9510,"RPC",71,0)
DVBAB SURGERY CASE
"KRN",19,9510,"RPC",72,0)
ORWRP2 COMPDISP
"KRN",19,9510,"RPC",73,0)
ORWRP2 HS COMPONENTS
"KRN",19,9510,"RPC",74,0)
ORWRP2 HS COMPONENT SUBS
"KRN",19,9510,"RPC",75,0)
ORWRP2 HS COMP FILES
"KRN",19,9510,"RPC",76,0)
ORWRP2 SAVLKUP
"KRN",19,9510,"RPC",77,0)
ORWRP2 HS REPORT TEXT
"KRN",19,9510,"RPC",78,0)
ORWRP2 GETLKUP
"KRN",19,9510,"RPC",79,0)
ORWRP2 HS FILE LOOKUP
"KRN",19,9510,"RPC",80,0)
ORWRP2 HS SUBITEMS
"KRN",19,9510,"RPC",81,0)
DVBAB MAIL INIT
"KRN",19,9510,"RPC",82,0)
ORWLRR MICRO
"KRN",19,9510,"RPC",83,0)
TIU CREATE RECORD
"KRN",19,9510,"RPC",84,0)
DVBAB MPI ASSIGN ICN
"KRN",19,9510,"RPC",85,0)
TIU SIGN RECORD
"KRN",19,9510,"RPC",86,0)
TIU DELETE RECORD
"KRN",19,9510,"RPC",87,0)
TIU REQUIRES COSIGNATURE
"KRN",19,9510,"RPC",88,0)
DVBAB REPORT ADMISSION INQUIRY
"KRN",19,9510,"RPC",89,0)
DVBAB REPORT NEW NOTICES DC
"KRN",19,9510,"RPC",90,0)
DVBAB NOTE TITLES
"KRN",19,9510,"RPC",91,0)
DVBAB TEMPLATE DEFINITION
"KRN",19,9510,"RPC",92,0)
DDR FINDER
"KRN",19,9510,"RPC",93,0)
ORWCV VST
"KRN",19,9510,"RPC",94,0)
TIU LOAD BOILERPLATE TEXT
"KRN",19,9510,"RPC",95,0)
DVBAB GET VISIT INFO
"KRN",19,9510,"RPC",96,0)
DVBAB REPORT SPECIAL
"KRN",19,9510,"RPC",97,0)
DVBAB SAVE FORM
"KRN",19,9510,"RPC",98,0)
DVBAB EXAMS BY DATE
"KRN",19,9510,"RPC",99,0)
TIU GET SITE PARAMETERS
"KRN",19,9510,"RPC",100,0)
TIU GET ALERT INFO
"KRN",19,9510,"RPC",101,0)
ORWU VALIDSIG
"KRN",19,9510,"RPC",103,0)
ORWORB FASTUSER
"KRN",19,9510,"RPC",104,0)
DVBAB TEMPLATE LIST
"KRN",19,9510,"RPC",105,0)
DVBAB LOAD FORM
"KRN",19,9510,"U")
CAPRI GUI (BROKER)
"KRN",8994,2221,-1)
0^3
"KRN",8994,2221,0)
DVBAB REPORT SPECIAL^SPECRPT^DVBASPD2^4^R^0^^1
"KRN",8994,2221,1,0)
^8994.01^1^1^3040622^^^^
"KRN",8994,2221,1,1,0)
Special Report for Pension and A&A
"KRN",8994,2221,2,0)
^8994.02A^6^5
"KRN",8994,2221,2,1,0)
DCTYPES^2^^1^1
"KRN",8994,2221,2,1,1,0)
^^2^2^3040622^
"KRN",8994,2221,2,1,1,1,0)
List of IENs that are the "Discharge Types"
"KRN",8994,2221,2,1,1,2,0)
that if found, will be included in the report
"KRN",8994,2221,2,2,0)
BDATE^1^^1^2
"KRN",8994,2221,2,2,1,0)
^^1^1^3040622^
"KRN",8994,2221,2,2,1,1,0)
Beginning Date for the Date Range to use for the report
"KRN",8994,2221,2,3,0)
EDATE^1^^1^3
"KRN",8994,2221,2,3,1,0)
^^1^1^3040622^
"KRN",8994,2221,2,3,1,1,0)
Ending Date for the Date Range to use for the report
"KRN",8994,2221,2,4,0)
RONUM^1^^0^4
"KRN",8994,2221,2,4,1,0)
^^3^3^3040622^
"KRN",8994,2221,2,4,1,1,0)
Regional Office number should be passed if you
"KRN",8994,2221,2,4,1,2,0)
wish to consider only one specific Regional Office
"KRN",8994,2221,2,4,1,3,0)
in the report
"KRN",8994,2221,2,6,0)
REP^1^1^1^5
"KRN",8994,2221,2,6,1,0)
^^2^2^3040622^
"KRN",8994,2221,2,6,1,1,0)
Pass 'A' for an A&A Report
"KRN",8994,2221,2,6,1,2,0)
Pass 'P' for a Pension Report
"KRN",8994,2221,2,"B","BDATE",2)

"KRN",8994,2221,2,"B","DCTYPES",1)

"KRN",8994,2221,2,"B","EDATE",3)

"KRN",8994,2221,2,"B","REP",6)

"KRN",8994,2221,2,"B","RONUM",4)

"KRN",8994,2221,2,"PARAMSEQ",1,1)

"KRN",8994,2221,2,"PARAMSEQ",2,2)

"KRN",8994,2221,2,"PARAMSEQ",3,3)

"KRN",8994,2221,2,"PARAMSEQ",4,4)

"KRN",8994,2221,2,"PARAMSEQ",5,6)

"KRN",8994,2223,-1)
0^4
"KRN",8994,2223,0)
DVBAB SAVE FORM^SAVE^DVBABFRM^1^S^^^0
"KRN",8994,2223,1,0)
^8994.01^6^6^3040816^^
"KRN",8994,2223,1,1,0)
Set DVBIEN to the internal entry number of the form
"KRN",8994,2223,1,2,0)
 
"KRN",8994,2223,1,3,0)
Set DVBLINES to the lines to be saved
"KRN",8994,2223,1,4,0)
 
"KRN",8994,2223,1,5,0)
Set DVBLINEN to the starting line # in the global.  This allows for forms
"KRN",8994,2223,1,6,0)
to be sent in chunks.
"KRN",8994,2223,2,0)
^8994.02A^4^4
"KRN",8994,2223,2,1,0)
DVBIEN^1^^1
"KRN",8994,2223,2,2,0)
DVBLINES^2^^1
"KRN",8994,2223,2,3,0)
DVBLINECOUNT^1^^1
"KRN",8994,2223,2,4,0)
DVBLINEN^1^^1
"KRN",8994,2223,2,"B","DVBIEN",1)

"KRN",8994,2223,2,"B","DVBLINECOUNT",3)

"KRN",8994,2223,2,"B","DVBLINEN",4)

"KRN",8994,2223,2,"B","DVBLINES",2)

"KRN",8994,2261,-1)
0^5
"KRN",8994,2261,0)
DVBAB EXAMS BY DATE^EXAMBYDT^DVBABEBD^4^R
"KRN",8994,2261,1,0)
^8994.01^1^1^3040913^^
"KRN",8994,2261,1,1,0)
Provides a report by date range of all AMIE/CAPRI exam requests.
"KRN",8994,2261,2,0)
^8994.02A^2^2
"KRN",8994,2261,2,1,0)
BEGDT^1^^1
"KRN",8994,2261,2,2,0)
ENDDT^1^^1
"KRN",8994,2261,2,"B","BEGDT",1)

"KRN",8994,2261,2,"B","ENDDT",2)

"KRN",8994,2262,-1)
0^6
"KRN",8994,2262,0)
DVBAB TEMPLATE LIST^TEMPLATE^DVBAB1^4^S
"KRN",8994,2262,1,0)
^^1^1^3041012^
"KRN",8994,2262,1,1,0)
Returns complete list of CAPRI templates.
"KRN",8994,2284,-1)
0^7
"KRN",8994,2284,0)
DVBAB LOAD FORM^LOAD^DVBABFRM^4^S^^^0
"KRN",8994,2284,2,0)
^8994.02A^1^1
"KRN",8994,2284,2,1,0)
DVBIEN^1^^1
"KRN",8994,2284,2,1,1,0)
^^1^1^3041022^
"KRN",8994,2284,2,1,1,1,0)
IEN of the form data to retrieve.
"KRN",8994,2284,2,"B","DVBIEN",1)

"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",223,-1)
1^1
"PKG",223,0)
AUTOMATED MED INFO EXCHANGE^DVBA^The entire AMIE package 7131/2507.
"PKG",223,20,0)
^9.402P^^
"PKG",223,22,0)
^9.49I^1^1
"PKG",223,22,1,0)
2.7^2950410^3010328
"PKG",223,22,1,"PAH",1,0)
57^3041201
"PKG",223,22,1,"PAH",1,1,0)
^^2^2^3041201
"PKG",223,22,1,"PAH",1,1,1,0)
Please see the National Patch Module for details
"PKG",223,22,1,"PAH",1,1,2,0)
of the enhancements included in this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
8
"RTN","DVBAB1")
0^11^B81586529
"RTN","DVBAB1",1,0)
DVBAB1 ;ALB/SPH - CAPRI UTILITIES ;01/01/00
"RTN","DVBAB1",2,0)
 ;;2.7;AMIE;**35,37,50,42,53,57**;Apr 10, 1995
"RTN","DVBAB1",3,0)
 ;
"RTN","DVBAB1",4,0)
VERSION(ZMSG,DVBGUIV) ;
"RTN","DVBAB1",5,0)
 ; Must have a letter at the end of the Version for Delphi compatibility
"RTN","DVBAB1",6,0)
 ; 1st piece is version description
"RTN","DVBAB1",7,0)
 ; 2nd piece can be YESOLD or NOOLD
"RTN","DVBAB1",8,0)
 ; YESOLD = Allow old GUI to run with new KID
"RTN","DVBAB1",9,0)
 ; NOOLD = Do not allow old GUI to run with newer version
"RTN","DVBAB1",10,0)
 S ZMSG="CAPRI GUI V2.7*45*1*A^NOOLD"
"RTN","DVBAB1",11,0)
 S DVBABVR1="CAPRI Server Version: "+ZMSG
"RTN","DVBAB1",12,0)
 I '$D(DVBGUIV) S DVBGUIV="CAPRI GUI Version: UNKNOWN - Version is prior to DVBA*2.7*45"
"RTN","DVBAB1",13,0)
 S DVBABVR2="CAPRI GUI Version: "+DVBGUIV
"RTN","DVBAB1",14,0)
 S DVBABVR3=$P(^VA(200,DUZ,0),"^",1)
"RTN","DVBAB1",15,0)
 Q 
"RTN","DVBAB1",16,0)
 ;
"RTN","DVBAB1",17,0)
REQUESTS(Y,TYPE) ;
"RTN","DVBAB1",18,0)
 ; TYPE is the internal value of field 17 in file 396.3
"RTN","DVBAB1",19,0)
 ; This relates to which status of request should be returned
"RTN","DVBAB1",20,0)
 N DVBABCNT,DVBABIEN
"RTN","DVBAB1",21,0)
 S DVBABCNT=0,DVBABIEN=0
"RTN","DVBAB1",22,0)
 F  S DVBABIEN=$O(^DVB(396.3,DVBABIEN)) Q:'DVBABIEN  D
"RTN","DVBAB1",23,0)
 .S DVBABST=$P($G(^DVB(396.3,DVBABIEN,0)),"^",18)
"RTN","DVBAB1",24,0)
 .I DVBABST=TYPE D
"RTN","DVBAB1",25,0)
 ..S DVBABNM=$P($G(^DVB(396.3,DVBABIEN,0)),"^",1)
"RTN","DVBAB1",26,0)
 ..S DVBABPT=DVBABNM
"RTN","DVBAB1",27,0)
 ..I DVBABNM'="" S DVBABNM=$P($G(^DPT(DVBABNM,0)),"^",1)
"RTN","DVBAB1",28,0)
 ..S DVBABDT=$$FMTE^XLFDT($P($G(^DVB(396.3,DVBABIEN,0)),"^",2),"2D")
"RTN","DVBAB1",29,0)
 ..S DVBABWHO=$P($G(^DVB(396.3,DVBABIEN,0)),"^",4)
"RTN","DVBAB1",30,0)
 ..I DVBABWHO'="" S DVBABWHO=$P($G(^VA(200,DVBABWHO,0)),"^",1)
"RTN","DVBAB1",31,0)
 ..E  S DVBABWHO="UNKNOWN"
"RTN","DVBAB1",32,0)
 ..S DVBABRO=$P($G(^DVB(396.3,DVBABIEN,0)),"^",3)
"RTN","DVBAB1",33,0)
 ..I DVBABRO'="" S DVBABRO=$P($G(^DIC(4,DVBABRO,0)),"^",1)
"RTN","DVBAB1",34,0)
 ..E  S DVBABRO="UNKNOWN"
"RTN","DVBAB1",35,0)
 ..S ^TMP("DVBAREQ",DUZ,DVBABCNT)=DVBABST_"^"_DVBABPT_"^"_DVBABNM_"^"_DVBABDT_"^"_DVBABWHO_"^"_DVBABRO_"^"_DVBABIEN_$C(13),DVBABCNT=DVBABCNT+1
"RTN","DVBAB1",36,0)
 S Y=$NA(^TMP("DVBAREQ",DUZ))
"RTN","DVBAB1",37,0)
 K DVBABCNT,DVBABIEN,TYPE,DVBABNM,DVBABDT,DVBABST,DVBABWHO,DVBABPT
"RTN","DVBAB1",38,0)
 Q
"RTN","DVBAB1",39,0)
TEAMPTS(DVBORY,TEAM,TMPFLAG) ; RETURN LIST OF PATIENTS IN A TEAM
"RTN","DVBAB1",40,0)
 ; If TMPFLAG passed and = TRUE, code expects a "^TMP(xxx"
"RTN","DVBAB1",41,0)
 ;    global root string passed in ORY, and builds the returned 
"RTN","DVBAB1",42,0)
 ;    list in that global instead of to a memory array.
"RTN","DVBAB1",43,0)
 N DOTMP,NEWTMP,DVBSSN,DVBORI,DVBORPT,I
"RTN","DVBAB1",44,0)
 K ^TMP("DVBATMPT",DUZ)
"RTN","DVBAB1",45,0)
 S (I,DOTMP,DVBORI)=0
"RTN","DVBAB1",46,0)
 I $G(TMPFLAG) D             ; Was value passed?
"RTN","DVBAB1",47,0)
 .I TMPFLAG S DOTMP=1        ; Is value TRUE?
"RTN","DVBAB1",48,0)
 I +$G(TEAM)<1 D
"RTN","DVBAB1",49,0)
 .I DOTMP S NEWTMP=DVBORY_1_")",@NEWTMP="^No team identified"
"RTN","DVBAB1",50,0)
 .E  S DVBORY(1)="^No team identified"
"RTN","DVBAB1",51,0)
 F  S DVBORI=$O(^OR(100.21,+TEAM,10,DVBORI)) Q:DVBORI<1  D
"RTN","DVBAB1",52,0)
 .S DVBORPT=^OR(100.21,+TEAM,10,DVBORI,0)
"RTN","DVBAB1",53,0)
 .I DOTMP D
"RTN","DVBAB1",54,0)
 ..S I=I+1,NEWTMP=DVBORY_+I_")"
"RTN","DVBAB1",55,0)
 ..S @NEWTMP=+DVBORPT_U_$P(^DPT(+DVBORPT,0),U)
"RTN","DVBAB1",56,0)
 .S DVBSSN=$P($G(^DPT($P(DVBORPT,";",1),0)),U,9)
"RTN","DVBAB1",57,0)
 .E  S I=I+1,^TMP("DVBATMPT",DUZ,I)=+DVBORPT_U_$P(^DPT(+DVBORPT,0),U)_U_DVBSSN_$C(13)
"RTN","DVBAB1",58,0)
 I DOTMP S:I<1 NEWTMP=DVBORY_1_")",@NEWTMP="^No patients found."
"RTN","DVBAB1",59,0)
 E  S:I<1 ^TMP("DVBATMPT",DUZ,1)="^No patients found."
"RTN","DVBAB1",60,0)
 S DVBORY=$NA(^TMP("DVBATMPT",DUZ))
"RTN","DVBAB1",61,0)
 Q
"RTN","DVBAB1",62,0)
DIVISION(Y) ; Returns Name for an Institution
"RTN","DVBAB1",63,0)
 N DVBARR,DVBERR,DVBATP
"RTN","DVBAB1",64,0)
 S Y=""
"RTN","DVBAB1",65,0)
 Q:$G(DUZ(2))=""
"RTN","DVBAB1",66,0)
 D GETS^DIQ(4,DUZ(2)_",0",".01","I","DVBARR","DVBERR")
"RTN","DVBAB1",67,0)
 Q:$D(DVBERR)
"RTN","DVBAB1",68,0)
 S Y=$G(DVBARR(4,DUZ(2)_",0,",.01,"I"))
"RTN","DVBAB1",69,0)
 D GETS^DIQ(4,DUZ(2)_",0",13,"I","DVBARR","DVBERR")
"RTN","DVBAB1",70,0)
 S DVBATP=$G(DVBARR(4,DUZ(2)_",0,",13,"I"))
"RTN","DVBAB1",71,0)
 I DVBATP'="" S DVBATP=$P($G(^DIC(4.1,DVBATP,0)),"^",1)
"RTN","DVBAB1",72,0)
 S Y=Y_"-"_DVBATP
"RTN","DVBAB1",73,0)
 Q
"RTN","DVBAB1",74,0)
 ;
"RTN","DVBAB1",75,0)
DT(Y,X1,X2) ; Returns date X1 minus X2 days
"RTN","DVBAB1",76,0)
 ; change the '00:00' that could be passed so Fileman doesn't reject
"RTN","DVBAB1",77,0)
 ;C^%DTC(X1,X2)
"RTN","DVBAB1",78,0)
 ;S %DT=$G(%DT,"TS") D ^%DT
"RTN","DVBAB1",79,0)
 ;K %DT,X1,X2
"RTN","DVBAB1",80,0)
 ;Q
"RTN","DVBAB1",81,0)
DPA(LIST,DFN,CHOICE) ;Display Patient Appointments
"RTN","DVBAB1",82,0)
 N DVBABCNT,CKCHOICE
"RTN","DVBAB1",83,0)
 S LIST="",DVBABCNT=1,CKCHOICE="A,F,P",DFN=$G(DFN),CHOICE=$G(CHOICE) K ^TMP("DVBAAPPT",$J)
"RTN","DVBAB1",84,0)
 I DFN="" S ^TMP("DVBAAPPT",$J,DUZ,DVBABCNT)="MISSING PATIENT NAME",LIST=$NA(^TMP("DVBAAPPT",$J,DUZ)) Q
"RTN","DVBAB1",85,0)
 I CHOICE="" S ^TMP("DVBAAPPT",$J,DUZ,DVBABCNT)="MISSING ALL, PAST, OR FUTURE",LIST=$NA(^TMP("DVBAAPPT",$J,DUZ)) Q
"RTN","DVBAB1",86,0)
 I CKCHOICE'[CHOICE S ^TMP("DVBAAPPT",$J,DUZ,DVBABCNT)="INVALID SELECTION",LIST=$NA(^TMP("DVBAAPPT",$J,DUZ)) Q
"RTN","DVBAB1",87,0)
 I CHOICE["A" D
"RTN","DVBAB1",88,0)
 .S SDT=0
"RTN","DVBAB1",89,0)
 .S X="T+730" D ^%DT
"RTN","DVBAB1",90,0)
 .I Y<0 S ^TMP("DVBAAPPT",$J,DUZ,DVBABCNT)="ERROR IN CALCULATING ENDING DATE RANGE",LIST=$NA(^TMP("DVBAAPPT",$J,DUZ))
"RTN","DVBAB1",91,0)
 .S EDT=Y+.9
"RTN","DVBAB1",92,0)
 I CHOICE["F" D
"RTN","DVBAB1",93,0)
 .S X="T+1" D ^%DT
"RTN","DVBAB1",94,0)
 .I Y<0 S ^TMP("DVBAAPPT",$J,DUZ,DVBABCNT)="ERROR IN CALCULATING START DATE RANGE",LIST=$NA(^TMP("DVBAAPPT",$J,DUZ))
"RTN","DVBAB1",95,0)
 .S SDT=Y
"RTN","DVBAB1",96,0)
 .K X,Y
"RTN","DVBAB1",97,0)
 .S X="T+730" D ^%DT
"RTN","DVBAB1",98,0)
 .I Y<0 S ^TMP("DVBAAPPT",$J,DUZ,DVBABCNT)="ERROR IN CALCULATING ENDING DATE RANGE",LIST=$NA(^TMP("DVBAAPPT",$J,DUZ))
"RTN","DVBAB1",99,0)
 .S EDT=Y+.9
"RTN","DVBAB1",100,0)
 I CHOICE["P" D
"RTN","DVBAB1",101,0)
 .S X="T" D ^%DT
"RTN","DVBAB1",102,0)
 .I Y<0 S ^TMP("DVBAAPPT",$J,DUZ,DVBABCNT)="ERROR IN CALCULATING ENDING DATE RANGE",LIST=$NA(^TMP("DVBAAPPT",$J,DUZ))
"RTN","DVBAB1",103,0)
 .S EDT=Y+.9
"RTN","DVBAB1",104,0)
 .K X,Y
"RTN","DVBAB1",105,0)
 .S SDT=0
"RTN","DVBAB1",106,0)
 Q:LIST["ERROR"
"RTN","DVBAB1",107,0)
 I $O(^DPT(DFN,"S",SDT))'>0 S ^TMP("DVBAAPPT",$J,DUZ,DVBABCNT)="NO APPOINTMENTS FOUND FOR YOUR DATE RANGE",LIST=$NA(^TMP("DVBAAPPT",$J,DUZ)) Q
"RTN","DVBAB1",108,0)
 F  S SDT=$O(^DPT(DFN,"S",SDT)) Q:'SDT!(SDT>EDT)  D
"RTN","DVBAB1",109,0)
 .S CLN=$P(^DPT(DFN,"S",SDT,0),"^")
"RTN","DVBAB1",110,0)
 .Q:'$D(^SC(CLN,0))
"RTN","DVBAB1",111,0)
 .S CLN=$P(^SC(CLN,0),"^")
"RTN","DVBAB1",112,0)
 .S ZZ=$L(CLN)
"RTN","DVBAB1",113,0)
 .I ZZ<31 D
"RTN","DVBAB1",114,0)
 ..F ZZZ=ZZ:1:30 S CLN=CLN_" "
"RTN","DVBAB1",115,0)
 .S Y=SDT X ^DD("DD")
"RTN","DVBAB1",116,0)
 .S ZZ2=$L(Y)
"RTN","DVBAB1",117,0)
 .I ZZ2<21 D
"RTN","DVBAB1",118,0)
 ..F ZZZ2=ZZ2:1:20 S Y=Y_" "
"RTN","DVBAB1",119,0)
 .S STATUS=$P(^DPT(DFN,"S",SDT,0),"^",2)
"RTN","DVBAB1",120,0)
 .I STATUS'="" D
"RTN","DVBAB1",121,0)
 ..I STATUS="N" S STATUS="NO-SHOW"
"RTN","DVBAB1",122,0)
 ..I STATUS="C" S STATUS="CANCELLED BY CLINIC"
"RTN","DVBAB1",123,0)
 ..I STATUS="CA" S STATUS="CANCELLED BY CLINIC & AUTO RE-BOOK"
"RTN","DVBAB1",124,0)
 ..I STATUS="NA" S STATUS="NO-SHOW & AUTO-REBOOK"
"RTN","DVBAB1",125,0)
 ..I STATUS="I" S STATUS="INPATIENT APPOINTMENT"
"RTN","DVBAB1",126,0)
 ..I STATUS="PC" S STATUS="CANCELLED BY PATIENT"
"RTN","DVBAB1",127,0)
 ..I STATUS="PCA" S STATUS="CANCELLED BY PATIENT & AUTO RE-BOOK"
"RTN","DVBAB1",128,0)
 ..I STATUS="NT" S STATUS="NO ACTION TAKEN"
"RTN","DVBAB1",129,0)
 . I $D(^DPT(DFN,"S",SDT,"R")) S REMARK=$P(^DPT(DFN,"S",SDT,"R"),"^",1) ;ADDED
"RTN","DVBAB1",130,0)
 .S ^TMP("DVBAAPPT",$J,DUZ,DVBABCNT)=CLN_"  "_Y_" "_STATUS,DVBABCNT=DVBABCNT+1
"RTN","DVBAB1",131,0)
 . I $D(REMARK) S ^TMP("DVBAAPPT",$J,DUZ,DVBABCNT)="   Cancellation Remarks: "_REMARK,DVBABCNT=DVBABCNT+1
"RTN","DVBAB1",132,0)
 . I $D(REMARK) K REMARK
"RTN","DVBAB1",133,0)
 .S LIST=$NA(^TMP("DVBAAPPT",$J,DUZ))
"RTN","DVBAB1",134,0)
 K DFN,X,%DT,CLN,CHOICE,Y,SDT,EDT
"RTN","DVBAB1",135,0)
 Q
"RTN","DVBAB1",136,0)
DTTM(Y) ;
"RTN","DVBAB1",137,0)
 S Y=$$HTE^XLFDT($H,"P")
"RTN","DVBAB1",138,0)
 Q
"RTN","DVBAB1",139,0)
CHKCRED(Y) ;KLB
"RTN","DVBAB1",140,0)
 S Y="[OK]"
"RTN","DVBAB1",141,0)
 I '$D(DUZ(2)) S Y="Your division number is missing." Q
"RTN","DVBAB1",142,0)
 I $D(DUZ)#2=0 S Y="Your user number is invalid." Q
"RTN","DVBAB1",143,0)
 I +DUZ(2)<1 S Y="Invalid division."
"RTN","DVBAB1",144,0)
 Q
"RTN","DVBAB1",145,0)
PTINQ(REF,DFN) ; Return formatted pt inquiry report
"RTN","DVBAB1",146,0)
 K ^TMP("ORDATA",$J,1)
"RTN","DVBAB1",147,0)
 D START^ORWRP(80,"DGINQB^ORCXPND1(DFN)")
"RTN","DVBAB1",148,0)
 S REF=$NA(^TMP("ORDATA",$J,1))
"RTN","DVBAB1",149,0)
 Q
"RTN","DVBAB1",150,0)
TEMPLATE(Y) ; Returns list of CAPRI exam templates
"RTN","DVBAB1",151,0)
 N DVBABCNT,DVBABIEN,DVBABNM,DVBABAD,DVBABDD,DVBABSL,DVBABOC
"RTN","DVBAB1",152,0)
 K Y,^TMP("DVBALAB1",DUZ)
"RTN","DVBAB1",153,0)
 S DVBABCNT=0,DVBABIEN=0
"RTN","DVBAB1",154,0)
 F  S DVBABIEN=$O(^DVB(396.18,DVBABIEN)) Q:'DVBABIEN  D
"RTN","DVBAB1",155,0)
 .S DVBABNM=$P($G(^DVB(396.18,DVBABIEN,0)),"^",1)
"RTN","DVBAB1",156,0)
 .S DVBABAD=$P($G(^DVB(396.18,DVBABIEN,2)),"^",1)
"RTN","DVBAB1",157,0)
 .S DVBABDD=$P($G(^DVB(396.18,DVBABIEN,2)),"^",2)
"RTN","DVBAB1",158,0)
 .S DVBABSL=$P($G(^DVB(396.18,DVBABIEN,6)),"^",1)
"RTN","DVBAB1",159,0)
 .S DVBABOC=$P($G(^DVB(396.18,DVBABIEN,6)),"^",2)
"RTN","DVBAB1",160,0)
 .S ^TMP("DVBATMPL",DUZ,DVBABCNT)=DVBABNM_"^"_DVBABAD_"^"_DVBABDD_"^"_DVBABSL_"^"_DVBABOC_"^"_DVBABIEN_$C(13),DVBABCNT=DVBABCNT+1
"RTN","DVBAB1",161,0)
 S Y=$NA(^TMP("DVBATMPL",DUZ))
"RTN","DVBAB1",162,0)
 Q
"RTN","DVBAB1",163,0)
 ;
"RTN","DVBAB1",164,0)
LABLIST(Y) ; Returns list of LAB TEST NAMES
"RTN","DVBAB1",165,0)
 N DVBABCNT,DVBABIEN,DVBABLNM
"RTN","DVBAB1",166,0)
 K Y,^TMP("DVBALAB1",DUZ)
"RTN","DVBAB1",167,0)
 S DVBABCNT=0,DVBABIEN=0
"RTN","DVBAB1",168,0)
 F  S DVBABIEN=$O(^LAB(60,DVBABIEN)) Q:'DVBABIEN  D
"RTN","DVBAB1",169,0)
 .S DVBABLNM=$P($G(^LAB(60,DVBABIEN,0)),"^",1)
"RTN","DVBAB1",170,0)
 .S ^TMP("DVBALAB1",DUZ,DVBABCNT)=DVBABLNM_"^"_DVBABIEN_$C(13),DVBABCNT=DVBABCNT+1
"RTN","DVBAB1",171,0)
 S Y=$NA(^TMP("DVBALAB1",DUZ))
"RTN","DVBAB1",172,0)
 Q
"RTN","DVBAB1",173,0)
 ;
"RTN","DVBAB1",174,0)
INSTLIST(Y) ; Returns full list of Institutions
"RTN","DVBAB1",175,0)
 N DVBABCNT,DVBABIEN,DVBABNM,DVBABSTN,DVBABST,DVBABDS,DVBARR,DVBERR,DVBATP
"RTN","DVBAB1",176,0)
 K Y,^TMP("DVBAINST",$J,DUZ)
"RTN","DVBAB1",177,0)
 S (DVBABCNT,DVBABIEN)=0
"RTN","DVBAB1",178,0)
 F  S DVBABIEN=$O(^DIC(4,DVBABIEN)) Q:'DVBABIEN  D 
"RTN","DVBAB1",179,0)
 . K DVBARR,DVBERR
"RTN","DVBAB1",180,0)
 . D GETS^DIQ(4,DVBABIEN_",0",".01:.02:.03:","I","DVBARR","DVBERR")
"RTN","DVBAB1",181,0)
 . Q:$D(DVBERR)
"RTN","DVBAB1",182,0)
 . S DVBABNM=$G(DVBARR(4,DVBABIEN_",0,",.01,"I"))
"RTN","DVBAB1",183,0)
 . Q:DVBABNM=""
"RTN","DVBAB1",184,0)
 . S DVBABSTN=$G(DVBARR(4,DVBABIEN_",0,",.02,"I"))
"RTN","DVBAB1",185,0)
 . Q:DVBABSTN=""
"RTN","DVBAB1",186,0)
 . S DVBABDS=$G(DVBARR(4,DVBABIEN_",0,",.03,"I"))
"RTN","DVBAB1",187,0)
 . K DVBARR,DVBERR
"RTN","DVBAB1",188,0)
 . D GETS^DIQ(5,DVBABSTN_",0",.01,"I","DVBARR","DVBERR")
"RTN","DVBAB1",189,0)
 . Q:$D(DVBERR)
"RTN","DVBAB1",190,0)
 . S DVBABST=$G(DVBARR(5,DVBABSTN_",0,",.01,"I"))
"RTN","DVBAB1",191,0)
 . K DVBARR,DVBERR
"RTN","DVBAB1",192,0)
 . D GETS^DIQ(4,DVBABIEN_",0",13,"I","DVBARR","DVBERR")
"RTN","DVBAB1",193,0)
 . S DVBATP=$G(DVBARR(4,DVBABIEN_",0,",13,"I"))
"RTN","DVBAB1",194,0)
 . I DVBATP'="" D
"RTN","DVBAB1",195,0)
 .. S DVBATP=$P($G(^DIC(4.1,DVBATP,0)),"^",1)
"RTN","DVBAB1",196,0)
 . S ^TMP("DVBAINST",$J,DUZ,DVBABCNT)=DVBABNM_"-"_DVBATP_"^"_DVBABST_"^"_DVBABDS_"^"_DVBABIEN_$C(13)
"RTN","DVBAB1",197,0)
 . S DVBABCNT=DVBABCNT+1
"RTN","DVBAB1",198,0)
 S Y=$NA(^TMP("DVBAINST",$J,DUZ))
"RTN","DVBAB1",199,0)
 Q
"RTN","DVBAB1",200,0)
 ;
"RTN","DVBAB1",201,0)
INCEXAM(ZMSG) ;Increased exam # in file  and passes back the # to user
"RTN","DVBAB1",202,0)
 S ZMSG=+$G(^DVB(396.1,1,5))+1
"RTN","DVBAB1",203,0)
 S ^DVB(396.1,1,5)=ZMSG
"RTN","DVBAB1",204,0)
 Q
"RTN","DVBAB1",205,0)
 ;
"RTN","DVBAB1",206,0)
MSG(ERR,DUZ,XMSUB,XMTEXT,MGN) ;Generate mail message;KLB
"RTN","DVBAB1",207,0)
 S ERR=""
"RTN","DVBAB1",208,0)
 K ^TMP($J,"AMIE")
"RTN","DVBAB1",209,0)
 I '$D(DUZ) S ERR="MISSING DUZ" Q
"RTN","DVBAB1",210,0)
 I '$D(XMSUB) S ERR="MISSING SUBJECT" Q
"RTN","DVBAB1",211,0)
 I '$D(XMTEXT) S ERR="MISSING TEXT" Q
"RTN","DVBAB1",212,0)
 I '$D(MGN) S ERR="MISSING MAIL GROUP NAME" Q
"RTN","DVBAB1",213,0)
 S XMDUZ=DUZ,J=0
"RTN","DVBAB1",214,0)
 F  S J=$O(XWBS1(J)) Q:'J  S ^TMP($J,"AMIE",J)=$G(XWBS1(J))
"RTN","DVBAB1",215,0)
 S XMTEXT="^TMP($J,""AMIE"","
"RTN","DVBAB1",216,0)
 S DIC="^XMB(3.8,",DIC(0)="QM",X=MGN D ^DIC
"RTN","DVBAB1",217,0)
 S MG=+Y
"RTN","DVBAB1",218,0)
 I +Y<0 S ERR="INVALID MAIL GROUP NAME" Q
"RTN","DVBAB1",219,0)
 I '$$GOTLOCAL^XMXAPIG(MGN) S ERR="NO ACTIVE LOCAL MEMBERS IN MAIL GROUP" K ^TMP("XMERR",$J) Q
"RTN","DVBAB1",220,0)
 S ZZ=0,ZZ1=0
"RTN","DVBAB1",221,0)
 F  S ZZ=$O(^XMB(3.8,MG,1,"B",ZZ)) Q:'ZZ  D
"RTN","DVBAB1",222,0)
 .F  S ZZ1=$O(^XMB(3.8,MG,1,"B",ZZ,ZZ1)) Q:'ZZ1  S XMY(ZZ)=""
"RTN","DVBAB1",223,0)
 D ^XMD
"RTN","DVBAB1",224,0)
 I $D(XMMG) S ERR=XMMG
"RTN","DVBAB1",225,0)
 E  S ERR="MESSAGE SENT"
"RTN","DVBAB1",226,0)
 K XMSUB,XMTEXT,MGN,DIC,DIC(0),ZZ,XMY,XWBS1,J,ZZ1,MG,^TMP($J,"AMIE"),XMMG,Y,XMDUZ
"RTN","DVBAB1",227,0)
 Q
"RTN","DVBAB1",228,0)
FINDEXAM(ZMSG,ZIEN) ;Returns list of exams in 396.4 that are linked to ZIEN in 396.3
"RTN","DVBAB1",229,0)
 N DVBABCNT,DVBABIEN
"RTN","DVBAB1",230,0)
 S DVBABCNT=0,DVBABIEN=0
"RTN","DVBAB1",231,0)
 F  S DVBABIEN=$O(^DVB(396.4,"C",ZIEN,DVBABIEN)) Q:'DVBABIEN  D
"RTN","DVBAB1",232,0)
 .S DVBABD1=$P($G(^DVB(396.4,DVBABIEN,0)),"^",2)
"RTN","DVBAB1",233,0)
 .S DVBABD2=$P($G(^DVB(396.6,+$P($G(^DVB(396.4,DVBABIEN,0)),"^",3),0)),"^",1)  ;Name of Exam
"RTN","DVBAB1",234,0)
 .S DVBABD3=$P($G(^DVB(396.4,DVBABIEN,0)),"^",4)
"RTN","DVBAB1",235,0)
 .I DVBABD3="O" S DVBABD3="[OPEN]"
"RTN","DVBAB1",236,0)
 .I DVBABD3="C" S DVBABD3="[COMPLETE]"
"RTN","DVBAB1",237,0)
 .I DVBABD3="X" S DVBABD3="[CANCELED BY MAS]"
"RTN","DVBAB1",238,0)
 .I DVBABD3="RX" S DVBABD3="[CANCELED BY RO]"
"RTN","DVBAB1",239,0)
 .I DVBABD3="T" S DVBABD3="[TRANSFERRED OUT]"
"RTN","DVBAB1",240,0)
 .I ZIEN=DVBABD1 D
"RTN","DVBAB1",241,0)
 ..S ZMSG(DVBABCNT)=DVBABIEN_"^"_DVBABD2_" "_DVBABD3
"RTN","DVBAB1",242,0)
 ..S DVBABCNT=DVBABCNT+1
"RTN","DVBAB1",243,0)
 K DVBABCNT,DVBABIEN,ZIEN,DVBABD1,DVBABD2,DVBABD3
"RTN","DVBAB1",244,0)
 Q
"RTN","DVBAB70")
0^5^B39943172
"RTN","DVBAB70",1,0)
DVBAB70 ;ALB/SPH - CAPRI C&P EXAM INQUIRY ;09/08/00
"RTN","DVBAB70",2,0)
 ;;2.7;AMIE;**35,42,57**;Apr 10, 1995
"RTN","DVBAB70",3,0)
 ;
"RTN","DVBAB70",4,0)
STRT(ZMSG,DFN,ZREQDA) ;
"RTN","DVBAB70",5,0)
 S DVBABCNT=0
"RTN","DVBAB70",6,0)
 K ^TMP($J) S Y=DT X ^DD("DD") S FDT(0)=Y D HOME^%ZIS S FF=IOF
"RTN","DVBAB70",7,0)
 S DIC="^DVB(396.3,"
"RTN","DVBAB70",8,0)
 S DIC(0)="M"
"RTN","DVBAB70",9,0)
 S DIC(1)=ZREQDA
"RTN","DVBAB70",10,0)
 S Y=ZREQDA
"RTN","DVBAB70",11,0)
 S JI=$P(Y,U,2),(DA,DA(1),REQDA)=+Y
"RTN","DVBAB70",12,0)
 S (NAME,SSN,CNUM,ADR1,ADR2,ADR3,CITY,STATE,ZIP,HOMPHON,BUSPHON,OTHDIS)=""
"RTN","DVBAB70",13,0)
 D VARS^DVBCUTIL
"RTN","DVBAB70",14,0)
 G START
"RTN","DVBAB70",15,0)
CON ;
"RTN","DVBAB70",16,0)
 I IOST?1"P-".E,$Y>45 W @IOF D HDR
"RTN","DVBAB70",17,0)
 Q
"RTN","DVBAB70",18,0)
START S PGHD="",PG=0
"RTN","DVBAB70",19,0)
 S ZMSG(DVBABCNT)="                     COMPENSATION AND PENSION EXAM INQUIRY",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",20,0)
 S ZMSG(DVBABCNT)="                     -------------------------------------",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",21,0)
 S ZMSG(DVBABCNT)="",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",22,0)
 S ZMSG(DVBABCNT)="",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",23,0)
 S ZMSG(DVBABCNT)="            Name: "_PNAM,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",24,0)
 S ZMSG(DVBABCNT)="             SSN: "_SSN,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",25,0)
 S ZMSG(DVBABCNT)="        C-Number: "_CNUM,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",26,0)
 S Y=DOB X ^DD("DD")
"RTN","DVBAB70",27,0)
 S ZMSG(DVBABCNT)="             DOB: "_Y,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",28,0)
 S ZMSG(DVBABCNT)="         Address: "_ADR1,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",29,0)
 I ADR2'="" S ZMSG(DVBABCNT)="                  "_ADR2,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",30,0)
 I ADR3'="" S ZMSG(DVBABCNT)="                  "_ADR3,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",31,0)
 S ZMSG(DVBABCNT)="City,State,Zip+4: "_CITY_", "_STATE_" "_ZIP,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",32,0)
 S ZMSG(DVBABCNT)="       Res Phone: "_HOMPHON,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",33,0)
 S ZMSG(DVBABCNT)="       Bus Phone: "_BUSPHON,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",34,0)
 S EDTA=$S($D(^DPT(DFN,.32)):^(.32),1:""),EOD=$P(EDTA,U,6),RAD=$P(EDTA,U,7)
"RTN","DVBAB70",35,0)
 S Y=EOD X ^DD("DD") S:Y="" Y="Not specified"
"RTN","DVBAB70",36,0)
 S ZMSG(DVBABCNT)="Entered active service: "_Y,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",37,0)
 S Y=RAD X ^DD("DD") S:Y="" Y="Not specified"
"RTN","DVBAB70",38,0)
 S ZMSG(DVBABCNT)="Released active service: "_Y,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",39,0)
 S ZMSG(DVBABCNT)="================================================================================",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",40,0)
 W !! D CON Q:$D(OUT)  D ^DVBAB97,CON Q:$D(OUT)  D ^DVBAB68,CON Q:$D(OUT)  S REQDT=$P(^DVB(396.3,REQDA,0),U,2)
"RTN","DVBAB70",41,0)
 S Y=REQDT X ^DD("DD")
"RTN","DVBAB70",42,0)
 S ZMSG(DVBABCNT)="This request was initiated on "_$P(Y,"@",1)_" at "_$P(Y,"@",2),DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",43,0)
 S ZMSG(DVBABCNT)="Requester: "_REQN,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",44,0)
 S ZMSG(DVBABCNT)="Requesting Regional Office: "_RONAME,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",45,0)
 S ZMSG(DVBABCNT)="VHA Division Processing Request: "_$P($$SITE^VASITE(,$P(^DVB(396.3,REQDA,1),U,4)),U,2),DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",46,0)
 S ZMSG(DVBABCNT)="",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",47,0)
 I $D(^DVB(396.4,"C",REQDA)) S ZMSG(DVBABCNT)="Exams on this request: ",DVBABCNT=DVBABCNT+1 D TST^DVBAB96 ;DVBCUTL2 
"RTN","DVBAB70",48,0)
 I '$D(^DVB(396.4,"C",REQDA)) S ZMSG(DVBABCNT)="(No exams have yet been entered)",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",49,0)
 S ZMSG(DVBABCNT)="",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",50,0)
 S ZMSG(DVBABCNT)="** Status of request: ",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",51,0)
 S (XSTAT,STAT)=$P(^DVB(396.3,REQDA,0),U,18)
"RTN","DVBAB70",52,0)
 S STAT=$S(XSTAT="N":"New",XSTAT="P":"Pending, reported to MAS",XSTAT="T":"Transcribed",XSTAT="S":"Scheduled",XSTAT="R":"Released, not printed",XSTAT="C":"Completed",XSTAT="CT":"Completed, transferred out",XSTAT="NT":"New, transferred in",1:"")
"RTN","DVBAB70",53,0)
 I STAT]"" S ZMSG(DVBABCNT)=STAT,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",54,0)
 I XSTAT="R"!(XSTAT="C") S Y=$P(^DVB(396.3,REQDA,0),U,14) X ^DD("DD") S RELBY=$P(^DVB(396.3,REQDA,0),U,15),RELBY=$S($D(^VA(200,+RELBY,0)):$P(^(0),U,1),1:"Unknown user") S ZMSG(DVBABCNT)="Released on "_Y_" by "_RELBY,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",55,0)
 I XSTAT="C" S Y=$P(^DVB(396.3,REQDA,0),U,16) X ^DD("DD") S PRBY=$P(^DVB(396.3,REQDA,0),U,17),PRBY=$S($D(^VA(200,+PRBY,0)):$P(^(0),U,1),1:"Unknown user") S ZMSG(DVBABCNT)="Printed by the RO on "_Y_" by "_PRBY,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",56,0)
 I STAT="" S STAT=$S(XSTAT="X":"Cancelled by MAS",XSTAT="RX":"Cancelled by RO",1:"Unknown") S ZMSG(DVBABCNT)=STAT,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",57,0)
 I STAT["Cancelled" S CANDT=$P(^DVB(396.3,REQDA,0),U,19) S ZMSG(DVBABCNT)="  (Cancelled on "_$$FMTE^XLFDT(CANDT,"5DZ")_")",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",58,0)
 I $D(^DVB(396.3,REQDA,1)),$P(^(1),U,3)="Y" S ZMSG(DVBABCNT)="This request was faxed to the regional office.",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",59,0)
 S FEXAM=$P(^DVB(396.3,REQDA,0),U,9) I FEXAM="Y" S ZMSG(DVBABCNT)="*** Exams done on a FEE BASIS ***  ",DVBABCNT=DVBABCNT+1 K FEXAM
"RTN","DVBAB70",60,0)
 S ZMSG(DVBABCNT)="--------------------------------------------------------------------------------",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",61,0)
 D DDIS Q:$D(OUT)  D CON Q:$D(OUT)
"RTN","DVBAB70",62,0)
 I IOST?1"P-".E,$Y>45 W @IOF D HDR
"RTN","DVBAB70",63,0)
 S ZMSG(DVBABCNT)="Other Disabilities: "_OTHDIS,DVBABCNT=DVBABCNT+1 I $D(^DVB(396.3,REQDA,1)) S ZMSG(DVBABCNT)="                    "_OTHDIS1,DVBABCNT=DVBABCNT+1 S ZMSG(DVBABCNT)="                    "_OTHDIS2,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",64,0)
 S ZMSG(DVBABCNT)="General Remarks:",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",65,0)
 K ^UTILITY($J,"W")
"RTN","DVBAB70",66,0)
 F LINE=0:0 S LINE=$O(^DVB(396.3,REQDA,2,LINE)) Q:LINE=""  S X=^(LINE,0),DIWL=5,DIWR=75,DIWF="NW" D ^DIWP S ZMSG(DVBABCNT)=X,DVBABCNT=DVBABCNT+1 ;I IOST?1"C-".E,$Y>19 D CON ;W !!,"General Remarks, continued",!!!
"RTN","DVBAB70",67,0)
END    K ^TMP($J),TSTA1,TSTAT,XCNP
"RTN","DVBAB70",68,0)
 Q
"RTN","DVBAB70",69,0)
DDIS1 S ZMSG(DVBABCNT)=DX_"  "_$J(PCT,3,0)_" %",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",70,0)
 S ZMSG(DVBABCNT)="    Service-Connected? "_$S(SC=1:"Yes",1:"No")_"  DX Code: "_DXCOD,DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",71,0)
 I $Y>19 D CON
"RTN","DVBAB70",72,0)
 Q
"RTN","DVBAB70",73,0)
DDIS I $Y>12 D CON Q:$D(OUT)
"RTN","DVBAB70",74,0)
 I '$D(^DPT(DFN,.372)) S ZMSG(DVBABCNT)="No rated disabilities on file",DVBABCNT=DVBABCNT+1 Q
"RTN","DVBAB70",75,0)
 S ZMSG(DVBABCNT)="",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",76,0)
 S ZMSG(DVBABCNT)="RATED DISABILITIES:",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",77,0)
 F JII=0:0 S JII=$O(^DPT(DFN,.372,JII)) Q:JII=""  S DXNUM=$P(^DPT(DFN,.372,JII,0),U,1),PCT=$P(^(0),U,2),SC=$P(^(0),U,3),DX=$S($D(^DIC(31,DXNUM)):$P(^(DXNUM,0),U,1),1:"Unknown"),DXCOD=$S($D(^DIC(31,DXNUM)):$P(^(DXNUM,0),U,3),1:"Unknown") D DDIS1
"RTN","DVBAB70",78,0)
 S ZMSG(DVBABCNT)="",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",79,0)
 Q
"RTN","DVBAB70",80,0)
HDR S PG=PG+1 W:(IOST?1"C-".E) @IOF
"RTN","DVBAB70",81,0)
 S ZMSG(DVBABCNT)="================================================================================",DVBABCNT=DVBABCNT+1
"RTN","DVBAB70",82,0)
 Q
"RTN","DVBABEBD")
0^9^B4109038
"RTN","DVBABEBD",1,0)
DVBABEBD ;ALB - CAPRI EXAM BY DATE REPORT;09/13/04
"RTN","DVBABEBD",2,0)
 ;;2.7;AMIE;**57**;Apr 10, 1995
"RTN","DVBABEBD",3,0)
 Q
"RTN","DVBABEBD",4,0)
 ;
"RTN","DVBABEBD",5,0)
EXAMBYDT(MSG,BEGDT,ENDDT) ; CALLED BY REMOTE PROCEDURE DVBAB EXAMS BY DATE
"RTN","DVBABEBD",6,0)
 N DVBABCNT,DVBABIEN,DVBABPAT,DVBABT,DVBAB0,DVBABT1,DVBABT2,DVBABT3,DVBABT4,DVBABT5,DVBABT6
"RTN","DVBABEBD",7,0)
 K ^TMP("DVBABEBD",DUZ)
"RTN","DVBABEBD",8,0)
 D SETSTAT
"RTN","DVBABEBD",9,0)
 S ^TMP("DVBABEBD",DUZ,1)="PATIENT NAME^REQUEST DATE^DATE RELEASED^DATE PRINTED BY RO^REQUEST STATUS"_$C(13)
"RTN","DVBABEBD",10,0)
 S DVBABCNT=2,DVBABIEN=0,MSG=$NA(^TMP("DVBABEBD",DUZ))
"RTN","DVBABEBD",11,0)
 ;
"RTN","DVBABEBD",12,0)
 F  S DVBABIEN=$O(^DVB(396.3,DVBABIEN)) Q:'DVBABIEN  D
"RTN","DVBABEBD",13,0)
 .;REQUEST DATE
"RTN","DVBABEBD",14,0)
 .S DVBAB0=^DVB(396.3,DVBABIEN,0),DVBABT2=$P(DVBAB0,"^",2)
"RTN","DVBABEBD",15,0)
 .I $P(DVBABT2,".",1)<(ENDDT+1) I $P(DVBABT2,".",1)>(BEGDT-1) D
"RTN","DVBABEBD",16,0)
 ..S DVBABPAT=^DPT($P(DVBAB0,"^",1),0)
"RTN","DVBABEBD",17,0)
 ..;PATIENT NAME
"RTN","DVBABEBD",18,0)
 ..S DVBABT1=$P(DVBABPAT,"^",1)
"RTN","DVBABEBD",19,0)
 ..;SOCIAL SECURITY NUMBER
"RTN","DVBABEBD",20,0)
 ..S DVBABT6=$P(DVBABPAT,"^",9)
"RTN","DVBABEBD",21,0)
 ..;DATE RELEASED
"RTN","DVBABEBD",22,0)
 ..S DVBABT3=$P(DVBAB0,"^",14)
"RTN","DVBABEBD",23,0)
 ..;DATE PRINTED BY RO
"RTN","DVBABEBD",24,0)
 ..S DVBABT4=$P(DVBAB0,"^",16)
"RTN","DVBABEBD",25,0)
 ..;REQUEST STATUS
"RTN","DVBABEBD",26,0)
 ..S DVBABT5=$P(DVBAB0,"^",18)
"RTN","DVBABEBD",27,0)
 ..S:$D(DVBABT(DVBABT5)) DVBABT5=DVBABT(DVBABT5)
"RTN","DVBABEBD",28,0)
 ..S ^TMP("DVBABEBD",DUZ,DVBABCNT)=DVBABT1_U_DVBABT2_U_DVBABT3_U_DVBABT4_U_DVBABT5_U_DVBABT6_$C(13)
"RTN","DVBABEBD",29,0)
 ..S DVBABCNT=DVBABCNT+1
"RTN","DVBABEBD",30,0)
 Q
"RTN","DVBABEBD",31,0)
 ;
"RTN","DVBABEBD",32,0)
SETSTAT S DVBABT("N")="NEW"
"RTN","DVBABEBD",33,0)
 S DVBABT("P")="PENDING, REPORTED"
"RTN","DVBABEBD",34,0)
 S DVBABT("S")="PENDING, SCHEDULED"
"RTN","DVBABEBD",35,0)
 S DVBABT("R")="RELEASED TO RO, NOT PRINTED"
"RTN","DVBABEBD",36,0)
 S DVBABT("C")="COMPLETED, PRINTED BY RO"
"RTN","DVBABEBD",37,0)
 S DVBABT("X")="CANCELLED BY MAS"
"RTN","DVBABEBD",38,0)
 S DVBABT("RX")="CANCELLED BY RO"
"RTN","DVBABEBD",39,0)
 S DVBABT("T")="TRANSCRIBED"
"RTN","DVBABEBD",40,0)
 S DVBABT("NT")="NEW, TRANSFERRED IN"
"RTN","DVBABEBD",41,0)
 S DVBABT("CT")="COMPLETE, TRANSFERRED OUT"
"RTN","DVBABEBD",42,0)
 Q
"RTN","DVBABFRM")
0^10^B4020049
"RTN","DVBABFRM",1,0)
DVBABFRM ;ALB/SPH - CAPRI TEMPLATE/WORKSHEETS UTILITIES ;11/17/02
"RTN","DVBABFRM",2,0)
 ;;2.7;AMIE;**53,57**;Apr 10, 1995
"RTN","DVBABFRM",3,0)
 ;
"RTN","DVBABFRM",4,0)
DEFINE(Y,DVBIEN,DVBTYPE) ;
"RTN","DVBABFRM",5,0)
 ; DVBTYPE:  1= Form Definition, 2=Script, 3=Report
"RTN","DVBABFRM",6,0)
 K ^TMP($J,"AMIE")
"RTN","DVBABFRM",7,0)
 N DVBJ
"RTN","DVBABFRM",8,0)
 S DVBJ=0,DVBTYPE=DVBTYPE+2,Y=$NA(^TMP($J,"AMIE"))
"RTN","DVBABFRM",9,0)
 F  S DVBJ=$O(^DVB(396.18,DVBIEN,DVBTYPE,DVBJ)) Q:'DVBJ  D
"RTN","DVBABFRM",10,0)
 .S ^TMP($J,"AMIE",DVBJ)=$G(^DVB(396.18,DVBIEN,DVBTYPE,DVBJ,0))_$C(13)
"RTN","DVBABFRM",11,0)
 Q
"RTN","DVBABFRM",12,0)
UPDATE(Y,DVBIEN,DVBTYPE,DVBLINES,DVBLINEC,DVBLINEB) ;
"RTN","DVBABFRM",13,0)
 ; DVBTYPE:  1= Form Definition, 2=Script, 3=Report
"RTN","DVBABFRM",14,0)
 N DVBNUM,DVBCOUNT
"RTN","DVBABFRM",15,0)
 I DVBTYPE=1,DVBLINEB=0 D
"RTN","DVBABFRM",16,0)
 .K ^DVB(396.18,DVBIEN,3)
"RTN","DVBABFRM",17,0)
 .S ^DVB(396.18,DVBIEN,3,0)=DVBLINES(1)
"RTN","DVBABFRM",18,0)
 S DVBNUM=DVBLINEB,DVBCOUNT=1
"RTN","DVBABFRM",19,0)
 I DVBLINEB=0 S DVBCOUNT=2
"RTN","DVBABFRM",20,0)
 I DVBNUM>0 S DVBNUM=DVBNUM-1
"RTN","DVBABFRM",21,0)
 F  S DVBNUM=DVBNUM+1 Q:DVBNUM=(DVBLINEC+DVBLINEB)  D
"RTN","DVBABFRM",22,0)
 .I DVBTYPE=1 S ^DVB(396.18,DVBIEN,3,DVBNUM,0)=DVBLINES(DVBCOUNT),DVBCOUNT=DVBCOUNT+1
"RTN","DVBABFRM",23,0)
 Q
"RTN","DVBABFRM",24,0)
SAVE(Y,DVBIEN,DVBLINES,DVBLINEC,DVBLINEB) ;
"RTN","DVBABFRM",25,0)
 N DVBNUM,DVBCOUNT
"RTN","DVBABFRM",26,0)
 I DVBLINEB=0 D
"RTN","DVBABFRM",27,0)
 .K ^DVB(396.17,DVBIEN,3)
"RTN","DVBABFRM",28,0)
 .S ^DVB(396.17,DVBIEN,3,0)=DVBLINES(1)
"RTN","DVBABFRM",29,0)
 S DVBNUM=DVBLINEB
"RTN","DVBABFRM",30,0)
 S DVBCOUNT=1
"RTN","DVBABFRM",31,0)
 I DVBLINEB=0 S DVBCOUNT=2
"RTN","DVBABFRM",32,0)
 I DVBNUM>0 S DVBNUM=DVBNUM-1
"RTN","DVBABFRM",33,0)
 F  S DVBNUM=DVBNUM+1 Q:DVBNUM=(DVBLINEC+DVBLINEB)  D
"RTN","DVBABFRM",34,0)
 .S ^DVB(396.17,DVBIEN,3,DVBNUM,0)=DVBLINES(DVBCOUNT),DVBCOUNT=DVBCOUNT+1
"RTN","DVBABFRM",35,0)
 Q
"RTN","DVBABFRM",36,0)
LOAD(Y,DVBIEN) ;
"RTN","DVBABFRM",37,0)
 N DVBABCNT,DVBABIEN
"RTN","DVBABFRM",38,0)
 K ^TMP("DVBAFRML",DUZ)
"RTN","DVBABFRM",39,0)
 S DVBABCNT=1,DVBABIEN=0,Y=$NA(^TMP("DVBAFRML",DUZ))
"RTN","DVBABFRM",40,0)
 F  S DVBABIEN=$O(^DVB(396.17,DVBIEN,3,DVBABIEN)) Q:'DVBABIEN  D
"RTN","DVBABFRM",41,0)
 .S ^TMP("DVBAFRML",DUZ,DVBABCNT-1)=$G(^DVB(396.17,DVBIEN,3,DVBABCNT,0))_$C(13),DVBABCNT=DVBABCNT+1
"RTN","DVBABFRM",42,0)
 Q
"RTN","DVBASPD2")
0^6^B28946150
"RTN","DVBASPD2",1,0)
DVBASPD2 ;ALB/GTS-557/THM-AMIE SPECIAL REPORT ; 9/15/91  8:22 PM
"RTN","DVBASPD2",2,0)
 ;;2.7;AMIE;**3,57**;Apr 10, 1995
"RTN","DVBASPD2",3,0)
 K ^TMP($J) G TERM
"RTN","DVBASPD2",4,0)
SET Q:'$D(^DPT(DA,0))  S DFN=DA D RCV^DVBAVDPT Q:RCVPEN'=1&(REP="P")  Q:RCVAA'=1&(REP="A")  Q:CFLOC'=RONUM&(RO="Y")&(CFLOC'=0)&(CFLOC'=376)
"RTN","DVBASPD2",5,0)
 S DCHPTR=$P(^DGPM(MB,0),U,17),TDIS=$S($D(^DGPM(+DCHPTR,0)):$P(^(0),U,18),1:"")
"RTN","DVBASPD2",6,0)
 I +TDIS,'$D(^TMP("DVBA",$J,"DUP",+TDIS)) Q
"RTN","DVBASPD2",7,0)
 S TDIS=$S($P($G(^DG(405.2,+TDIS,0)),U,1)]"":$P(^(0),U,1),1:"Unknown discharge type")
"RTN","DVBASPD2",8,0)
 S ^TMP($J,XCN,CFLOC,MB,DA)=MA_U_RCVAA_U_RCVPEN_U_CNUM_U_TDIS
"RTN","DVBASPD2",9,0)
 Q
"RTN","DVBASPD2",10,0)
 ;
"RTN","DVBASPD2",11,0)
PRINTB W:(IOST?1"C-".E)!($D(DVBAON2)) @IOF
"RTN","DVBASPD2",12,0)
 W !!!,?(80-$L(HEAD)\2),HEAD,!,?(80-$L(HEAD1)\2),HEAD1,!!
"RTN","DVBASPD2",13,0)
 W ?10,REP(0),?26,PNAM,!!,?14,REP(1),?26,CNUM,!,?6,REP(2),?26,XCFLOC,!,?9,REP(3),?26,SSN,!,?8,REP(4),?26,ADMDT,!,?3,REP(5),?26,DIAG,!
"RTN","DVBASPD2",14,0)
 W ?8,REP(6),?26,DCHGDT,! W:DCHGDT]"" ?5,REP(7),?26,$$DIS,!
"RTN","DVBASPD2",15,0)
 W ?11,REP(8),?26,BEDSEC,!,?13,REP(9),?26,$$RAA,!
"RTN","DVBASPD2",16,0)
 W ?14,REP(10),?26,$$PEN,! D ELIG^DVBAVDPT
"RTN","DVBASPD2",17,0)
 I IOST?1"C-".E W *7,!,"Press RETURN to continue or ""^"" to stop    " R ANS:DTIME S:ANS=U!('$T) QUIT=1 I '$T S DVBAQUIT=1 I '$T S DVBAQUIT=1
"RTN","DVBASPD2",18,0)
 S DVBAON2=""
"RTN","DVBASPD2",19,0)
 Q
"RTN","DVBASPD2",20,0)
RAA() Q $S(RCVAA=0:"NO",RCVAA=1:"YES",1:"Not specified")
"RTN","DVBASPD2",21,0)
PEN() Q $S(RCVPEN=0:"NO",RCVPEN=1:"YES",1:"Not specified")
"RTN","DVBASPD2",22,0)
DIS() Q TDIS_$S(TO]"":" TO "_$S($D(^DIC(4,+TO,0)):$P(^(0),U,1),1:""),1:"")
"RTN","DVBASPD2",23,0)
SP(N,M) S $P(M," ",N-1)=" " Q M  ;pass one arg, 2nd for local use
"RTN","DVBASPD2",24,0)
PRINTC F J=0:1:7 S ^TMP("DVBSPCRP",$J,DVBC+J)=DVBS(J) ;NakedRefs = ^TMP("DVBSPCRP",$J,DVBC+J)
"RTN","DVBASPD2",25,0)
 S DVBC=DVBC+6,^TMP("DVBSPCRP",$J,DVBC)=$$SP(10)_REP(0)_PNAM
"RTN","DVBASPD2",26,0)
 S ^(DVBC+2)=$$SP(14)_REP(1)_CNUM
"RTN","DVBASPD2",27,0)
 S ^(DVBC+3)=$$SP(6)_REP(2)_XCFLOC
"RTN","DVBASPD2",28,0)
 S ^(DVBC+4)=$$SP(9)_REP(3)_SSN
"RTN","DVBASPD2",29,0)
 S ^(DVBC+5)=$$SP(8)_REP(4)_ADMDT
"RTN","DVBASPD2",30,0)
 S ^(DVBC+6)=$$SP(3)_REP(5)_DIAG
"RTN","DVBASPD2",31,0)
 S DVBC=DVBC+7,^(DVBC)=$$SP(8)_REP(6)_DCHGDT
"RTN","DVBASPD2",32,0)
 I DCHGDT]"" D
"RTN","DVBASPD2",33,0)
 .S DVBC=DVBC+1,^(DVBC)=$$SP(5)_REP(7)_$$DIS
"RTN","DVBASPD2",34,0)
 S ^(DVBC+1)=$$SP(11)_REP(8)_BEDSEC
"RTN","DVBASPD2",35,0)
 S ^(DVBC+2)=$$SP(13)_REP(9)_$$RAA
"RTN","DVBASPD2",36,0)
 S DVBC=DVBC+3,^(DVBC)=$$SP(14)_REP(10)_$$PEN
"RTN","DVBASPD2",37,0)
 D ELIG^DVBAVDPT
"RTN","DVBASPD2",38,0)
 Q
"RTN","DVBASPD2",39,0)
PRINT S QUIT="",XCN=""
"RTN","DVBASPD2",40,0)
 F  S XCN=$O(^TMP($J,XCN)) Q:XCN=""!(QUIT=1)  S XCFLOC="" F  S XCFLOC=$O(^TMP($J,XCN,XCFLOC)) Q:XCFLOC=""!(QUIT=1)  D PRINT1
"RTN","DVBASPD2",41,0)
 Q
"RTN","DVBASPD2",42,0)
PRINT1 S ADM="" F  S ADM=$O(^TMP($J,XCN,XCFLOC,ADM)) Q:ADM=""!(QUIT=1)  D
"RTN","DVBASPD2",43,0)
 .S DA="" F  S DA=$O(^TMP($J,XCN,XCFLOC,ADM,DA)) Q:DA=""!(QUIT=1)  D
"RTN","DVBASPD2",44,0)
 ..S DATA=^(DA),MA=$P(DATA,U),RCVAA=$P(DATA,U,2),RCVPEN=$P(DATA,U,3)
"RTN","DVBASPD2",45,0)
 ..S CNUM=$P(DATA,U,4),TDIS=$P(DATA,U,5),DFN=DA,TO="",QUIT1=1
"RTN","DVBASPD2",46,0)
 ..D ADM^DVBAVDPT
"RTN","DVBASPD2",47,0)
 ..S:ADMDT]"" ADMDT=$E(ADMDT,4,5)_"/"_$E(ADMDT,6,7)_"/"_$E(ADMDT,2,3)
"RTN","DVBASPD2",48,0)
 ..S:DCHGDT]"" DCHGDT=$E(DCHGDT,4,5)_"/"_$E(DCHGDT,6,7)_"/"_$E(DCHGDT,2,3)
"RTN","DVBASPD2",49,0)
 ..I $$BROKER^XWBLIB D PRINTC Q
"RTN","DVBASPD2",50,0)
 ..D PRINTB
"RTN","DVBASPD2",51,0)
 Q
"RTN","DVBASPD2",52,0)
SETUP S RPT="VARO REPORT"_$S(REP="A":" FOR A & A",1:" FOR PENSION"),DTAR=^DVB(396.1,1,0),FDT(0)=$E(DT,4,5)_"-"_$E(DT,6,7)_"-"_$E(DT,2,3)
"RTN","DVBASPD2",53,0)
 S HEAD="SPECIAL "_$S(REP="A":"A & A",1:"PENSION")_" REPORT",HEAD1="FOR "_$P(DTAR,U,1)_" ON "_FDT(0)
"RTN","DVBASPD2",54,0)
 S Y=$P(DTAR,U,9) X ^DD("DD") S REP("LRUN")="Last report was run on "_Y
"RTN","DVBASPD2",55,0)
 S REP(0)="Patient Name:",REP(1)="Claim No:"
"RTN","DVBASPD2",56,0)
 S REP(2)="Claim Folder Loc:",REP(3)="Social Sec No:"
"RTN","DVBASPD2",57,0)
 S REP(4)="Admission Date:",REP(5)="Admitting Diagnosis:"
"RTN","DVBASPD2",58,0)
 S REP(6)="Discharge Date:",REP(7)="Type of Discharge:"
"RTN","DVBASPD2",59,0)
 S REP(8)="Bed Service:",REP(9)="Recv A&A?:",REP(10)="Pension?:"
"RTN","DVBASPD2",60,0)
 Q
"RTN","DVBASPD2",61,0)
TERM D HOME^%ZIS,SETUP K NOASK
"RTN","DVBASPD2",62,0)
 W @IOF,!,RPT,!,HEAD1
"RTN","DVBASPD2",63,0)
 ;
"RTN","DVBASPD2",64,0)
EN1 W !!,"Please enter dates for search, oldest date first, most recent date last.",!!,REP("LRUN"),!!
"RTN","DVBASPD2",65,0)
 D DATE^DVBAUTIL
"RTN","DVBASPD2",66,0)
 G:X=""!(Y<0) KILL
"RTN","DVBASPD2",67,0)
 S %ZIS="Q" D ^%ZIS K %ZIS G:POP KILL^DVBAUTIL
"RTN","DVBASPD2",68,0)
 ;
"RTN","DVBASPD2",69,0)
QUEUE I $D(IO("Q")) S ZTRTN="DEQUE^DVBASPD2",ZTIO=ION,NOASK=1,ZTDESC="AMIE PENSION/A&A REPORT" F I="^TMP(""DVBA"",$J,""DUP"",","DVBATYPS","REP","FDT(0)","HEAD","HEAD1","BDATE","EDATE","TYPE","RO","RONUM","NOASK" S ZTSAVE(I)=""
"RTN","DVBASPD2",70,0)
 I $D(IO("Q")) D ^%ZTLOAD W:$D(ZTSK) !!,"Request queued.",!! G KILL
"RTN","DVBASPD2",71,0)
 ;
"RTN","DVBASPD2",72,0)
GO S MA=BDATE F  S MA=$O(^DGPM("AMV1",MA)) Q:$P(MA,".")>EDATE!(MA="")  W:'$D(NOASK) "." F DA=0:0 S DA=$O(^DGPM("AMV1",MA,DA)) Q:DA=""  F MB=0:0 S MB=$O(^DGPM("AMV1",MA,DA,MB)) Q:MB=""  D SET
"RTN","DVBASPD2",73,0)
 S:'$D(^TMP($J)) ER="No data found for parameters entered."
"RTN","DVBASPD2",74,0)
 G:$$BROKER^XWBLIB BROKER
"RTN","DVBASPD2",75,0)
 U IO I $D(ER) W !!,*7,ER,!! G KILL
"RTN","DVBASPD2",76,0)
 D PRINT
"RTN","DVBASPD2",77,0)
 I $D(DVBAQUIT) D:$D(ZTQUEUED) KILL^%ZTLOAD K ER,DVBAON2 G KILL^DVBAUTIL
"RTN","DVBASPD2",78,0)
 ;
"RTN","DVBASPD2",79,0)
KILL D ^%ZISC D:$D(ZTQUEUED) KILL^%ZTLOAD S X=9 K ER,DVBAON2 G FINAL^DVBAUTIL
"RTN","DVBASPD2",80,0)
 ;
"RTN","DVBASPD2",81,0)
INIT F J=0,2,5,6,7 S DVBS(J)=" "
"RTN","DVBASPD2",82,0)
 S $P(DVBS(1),"-",70)="-",DVBS(3)=$$SP(70-$L(HEAD)\2)_HEAD,DVBS(4)=$$SP(70-$L(HEAD1)\2)_HEAD1
"RTN","DVBASPD2",83,0)
 S ^TMP("DVBSPCRP",$J,1)=" ",^(2)=RPT,^(3)=HEAD1,^(4)=" ",^(5)=REP("LRUN"),DVBC=6
"RTN","DVBASPD2",84,0)
 F J=0:1:10 S REP(J)=REP(J)_"    "
"RTN","DVBASPD2",85,0)
 Q
"RTN","DVBASPD2",86,0)
BROKER I $D(ER) K ^TMP("DVBSPCRP",$J) S ^($J,1)=ER
"RTN","DVBASPD2",87,0)
 E  D INIT,PRINT
"RTN","DVBASPD2",88,0)
 S X=9 G FINAL^DVBAUTIL
"RTN","DVBASPD2",89,0)
 ;
"RTN","DVBASPD2",90,0)
SPECRPT(ZMSG,DCTYPES,BDATE,EDATE,RONUM,REP)      ;
"RTN","DVBASPD2",91,0)
 N I,J,REQ,DVBC,DVBACEPT,DVBS,ER
"RTN","DVBASPD2",92,0)
 S ZMSG=$NA(^TMP("DVBSPCRP",$J)),RONUM=+$G(RONUM),REQ=" IS REQUIRED"
"RTN","DVBASPD2",93,0)
 S MB=" MUST BE ",TYPE="REPORT TYPE",BDT="BEGINNING DATE",EDT="ENDING DATE"
"RTN","DVBASPD2",94,0)
 I $G(BDATE)="" S ER=BDT_REQ
"RTN","DVBASPD2",95,0)
 I $G(EDATE)="" S ER=EDT_REQ
"RTN","DVBASPD2",96,0)
 I EDATE<BDATE S ER=BDT_MB_"BEFORE THE "_EDT
"RTN","DVBASPD2",97,0)
 I $G(REP)="" S ER=TYPE_REQ
"RTN","DVBASPD2",98,0)
 I "^A^P"'[REP S ER=TYPE_MB_"'A' OR 'P'"
"RTN","DVBASPD2",99,0)
 I $D(RONUM)&(RONUM'?1.3N) S ER="REGIONAL OFFICE"_MB_"1-3 NUMBERS"
"RTN","DVBASPD2",100,0)
 K ^TMP("DVBSPCRP",$J) I $D(ER) S ^($J,1)=ER,X=9 G FINAL^DVBAUTIL
"RTN","DVBASPD2",101,0)
 S (NOASK,DVBACEPT)=1,RO=$S(RONUM=0:"N",1:"Y")
"RTN","DVBASPD2",102,0)
 F J=0:0 S J=$O(DCTYPES(J)) Q:'J  S ^TMP("DVBA",$J,"DUP",DCTYPES(J))=""
"RTN","DVBASPD2",103,0)
 D SETUP
"RTN","DVBASPD2",104,0)
DEQUE K ^TMP($J) G GO
"RTN","DVBASPD2",105,0)
 ;
"RTN","DVBAVDPT")
0^2^B9992968
"RTN","DVBAVDPT",1,0)
DVBAVDPT ;ALB/JLU,557/THM-GET VARIABLES VIA ^VADPT ; 1/23/91  8:02 AM
"RTN","DVBAVDPT",2,0)
 ;;2.7;AMIE;**57**;Apr 10, 1995
"RTN","DVBAVDPT",3,0)
 W *7,!!,"NOT a stand-alone program !",!!,*7 Q
"RTN","DVBAVDPT",4,0)
 ;
"RTN","DVBAVDPT",5,0)
DCHGDT ;entry point for all reports that use discharge dates
"RTN","DVBAVDPT",6,0)
 ;called by D DCHGDT^DVBAVDPT
"RTN","DVBAVDPT",7,0)
 S DCHGDT=MA,VAINDT=$S(MA[".":MA-.000002,1:MA),VA200="" D INP^VADPT K VA200 S ADMDT=$P(VAIN(7),".") G EN
"RTN","DVBAVDPT",8,0)
 ;
"RTN","DVBAVDPT",9,0)
ADM ;entry point for all reports that use admission dates
"RTN","DVBAVDPT",10,0)
 ;called by D ADM^DVBAVDPT only
"RTN","DVBAVDPT",11,0)
 I $D(MA),MA]"" S (ADMDT,VAINDT)=MA S VA200="" D INP^VADPT K VA200 S ADMNUM=VAIN(1),DCHGDT="",DCHPTR=$S($D(^DGPM(+ADMNUM,0)):$P(^(0),U,17),1:"") G:DCHPTR="" EN I DCHPTR]"",$D(^DGPM(DCHPTR,0)) S DCHGDT=$P(^(0),U,1) G EN
"RTN","DVBAVDPT",12,0)
 S VAINDT=$S($D(ADMDT):ADMDT,1:""),VA200="" D INP^VADPT K VA200 S ADMNUM=VAIN(1),DCHGDT="",DCHPTR=$S($D(^DGPM(+ADMNUM,0)):$P(^(0),U,17),1:"") I DCHPTR]"",$D(^DGPM(DCHPTR,0)) S DCHGDT=$P(^(0),U,1)
"RTN","DVBAVDPT",13,0)
 Q:$D(DVBARADQ)
"RTN","DVBAVDPT",14,0)
 ;
"RTN","DVBAVDPT",15,0)
EN ;general entry point
"RTN","DVBAVDPT",16,0)
 S (DVBAELIG,DVBAELST)="" I $D(^DPT(DFN,.36)),$P(^(.36),U)]"" S DVBAELIG=$S($D(^DIC(8,+^(.36),0)):$P(^(0),U,6),1:"")
"RTN","DVBAVDPT",17,0)
 I DVBAELIG]"",$D(^DPT(DFN,.361)),^(.361)]"" S DVBAELST=$P(^(.361),U)
"RTN","DVBAVDPT",18,0)
 S PNAM=$P(^DPT(DFN,0),U),SSN=$P(^(0),U,9),WARD=$P(VAIN(4),U),DIAG=VAIN(9),ADMNUM=VAIN(1)
"RTN","DVBAVDPT",19,0)
 S WARD=$S($D(^DIC(42,+WARD,0)):^(0),1:""),BEDSEC=$S($P(WARD,U,2)]"":$P(WARD,U,2),1:"UNKNOWN"),WARD=$S($P(WARD,U)]"":$P(WARD,U),1:"UNKNOWN")
"RTN","DVBAVDPT",20,0)
 K VAEL,VAERR,VADM,VAIN,VAINDT,DVBAPGM,VAMB,ADMNUM,DVBAX,DVBAY
"RTN","DVBAVDPT",21,0)
RCV ;A&A and Pension
"RTN","DVBAVDPT",22,0)
 ;
"RTN","DVBAVDPT",23,0)
 ;* QUIT1 set by DVBAADRP, DVBACMRP, DVBADSNT, DVBADSRP, DVBADSRT,
"RTN","DVBAVDPT",24,0)
 ;*  DVBARAD1, DVBASPD2
"RTN","DVBAVDPT",25,0)
 Q:$D(QUIT1)  S RCVAA=$S($D(^DPT(DFN,.362)):^(.362),1:""),RCVPEN=$P(RCVAA,U,14),RCVAA=$P(RCVAA,U,12)
"RTN","DVBAVDPT",26,0)
 S RCVAA=$S(RCVAA="Y":1,RCVAA="N":0,1:""),RCVPEN=$S(RCVPEN="Y":1,RCVPEN="N":0,1:"")
"RTN","DVBAVDPT",27,0)
SC ;Service Connection
"RTN","DVBAVDPT",28,0)
 S DVBASC=$S($D(^DPT(DFN,.3)):$P(^(.3),U),1:"")
"RTN","DVBAVDPT",29,0)
CNUM ;Claim Number and Location
"RTN","DVBAVDPT",30,0)
 S CNUM=$S($D(^DPT(DFN,.31)):^(.31),1:"")
"RTN","DVBAVDPT",31,0)
 S CFLOC=+$P(CNUM,U,4)
"RTN","DVBAVDPT",32,0)
 S CNUM=$P(CNUM,U,3)
"RTN","DVBAVDPT",33,0)
 S:CNUM="" CNUM="UNKNOWN"
"RTN","DVBAVDPT",34,0)
 S XCN=$E(CNUM,$L(CNUM)-1,$L(CNUM))
"RTN","DVBAVDPT",35,0)
 S CFLOC=$S($D(^DIC(4,CFLOC,99)):$P(^(99),U,1),1:"UNKNOWN")
"RTN","DVBAVDPT",36,0)
 Q
"RTN","DVBAVDPT",37,0)
 ;
"RTN","DVBAVDPT",38,0)
ELIG N ED S ELIG=DVBAELIG,INCMP="",ED="Eligibility data:"
"RTN","DVBAVDPT",39,0)
 I ELIG]"" S ELIG=ELIG_" ("_$S(DVBAELST="P":"Pend Ver",DVBAELST="R":"Pend Re-verif",DVBAELST="V":"Verified",1:"Not Verified")_")"
"RTN","DVBAVDPT",40,0)
 I $D(^DPT(DA,.29)) S INCMP=$S($P(^(.29),U,12)=1:"Incompetent",1:"")
"RTN","DVBAVDPT",41,0)
 I INCMP]"",ELIG]"" S ELIG=ELIG_", "
"RTN","DVBAVDPT",42,0)
 I '$D(DVBC)!'$$BROKER^XWBLIB W ?6,ED,?26,ELIG W:$X>60 !?26 W INCMP,! Q
"RTN","DVBAVDPT",43,0)
 S DVBC=DVBC+1,ED="     "_ED_"    ",^TMP("DVBSPCRP",$J,DVBC)=ED_ELIG
"RTN","DVBAVDPT",44,0)
 I $L(^(DVBC))<60 S ^(DVBC)=^(DVBC)_INCMP ;NakedRefs = ^TMP("DVBSPCRP",$J,DVBC)
"RTN","DVBAVDPT",45,0)
 E  S DVBC=DVBC+1,$P(^(DVBC)," ",25)=" "_INCMP
"RTN","DVBAVDPT",46,0)
 S DVBC=DVBC+1
"RTN","DVBAVDPT",47,0)
 Q
"RTN","DVBAVDPT",48,0)
 ;
"RTN","DVBAVDPT",49,0)
NOTES ;Supported fields for this routine
"RTN","DVBAVDPT",50,0)
 ;.362 Disability Ret from Military
"RTN","DVBAVDPT",51,0)
 ;.291 Date ruled incomp (VA)
"RTN","DVBAVDPT",52,0)
 ;.292 Date ruled incomp (civil)
"RTN","DVBAVDPT",53,0)
 ;.293 Rated incomp?
"RTN","DVBAVDPT",54,0)
 ;.313 Claim number
"RTN","DVBAVDPT",55,0)
 ;.312 Claim folder loc (as free text)
"RTN","DVBAVDPT",56,0)
 ;2.101 Log-in date/time
"RTN","DVBAVDPT",57,0)
 ;File 44 field .02 Bedsection
"RTN","DVBAVDPT",58,0)
 ;Elig file Print name
"RTN","DVBCENQ1")
0^4^B24327636
"RTN","DVBCENQ1",1,0)
DVBCENQ1 ;ALB/GTS-557/THM 2507 INQUIRY DISPLAY ; 5/25/91  1:52 PM
"RTN","DVBCENQ1",2,0)
 ;;2.7;AMIE;**17,57**;Apr 10, 1995
"RTN","DVBCENQ1",3,0)
 ;
"RTN","DVBCENQ1",4,0)
 G START
"RTN","DVBCENQ1",5,0)
CON K OUT I IOST?1"C-".E W !,"Press [RETURN] to continue or ""^"" to stop   " R ANS:DTIME S:ANS=U!('$T) OUT=1 Q:$D(OUT)  D HDR
"RTN","DVBCENQ1",6,0)
 I IOST?1"P-".E,$Y>45 W @IOF D HDR
"RTN","DVBCENQ1",7,0)
 Q
"RTN","DVBCENQ1",8,0)
 ;
"RTN","DVBCENQ1",9,0)
START S PGHD="COMPENSATION AND PENSION EXAM INQUIRY",PG=0
"RTN","DVBCENQ1",10,0)
 D HDR
"RTN","DVBCENQ1",11,0)
 W !!?2,"Name: ",PNAM,?56,"SSN: ",SSN,!?51,"C-Number: ",CNUM,!?56,"DOB: " S Y=DOB X ^DD("DD") W Y,!?2,"Address: ",ADR1,! W:ADR2]"" ?11,ADR2,! W:ADR3]"" ?11,ADR3,!!
"RTN","DVBCENQ1",12,0)
 W !?2,"City,State,Zip+4: ",?48,"Res Phone: ",HOMPHON,!?5,CITY,"  ",STATE,"  ",ZIP,?48,"Bus Phone: ",BUSPHON,!
"RTN","DVBCENQ1",13,0)
 S EDTA=$S($D(^DPT(DFN,.32)):^(.32),1:""),EOD=$P(EDTA,U,6),RAD=$P(EDTA,U,7)
"RTN","DVBCENQ1",14,0)
 W !,"Entered active service: " S Y=EOD X ^DD("DD") S:Y="" Y="Not specified" W Y,! S Y=RAD X ^DD("DD") S:Y="" Y="Not specified" W "Released active service: " W Y,!
"RTN","DVBCENQ1",15,0)
 F LINE=1:1:80 W "="
"RTN","DVBCENQ1",16,0)
 W !! D CON Q:$D(OUT)  D ^DVBCENQ2,CON Q:$D(OUT)  D ^DVBCEEXM,CON Q:$D(OUT)  S REQDT=$P(^DVB(396.3,REQDA,0),U,2)
"RTN","DVBCENQ1",17,0)
 W !,"This request was initiated on " S Y=REQDT X ^DD("DD") W $P(Y,"@",1)," at ",$P(Y,"@",2),!!?17,"Requester: ",REQN,!,"Requesting Regional Office: ",RONAME,!
"RTN","DVBCENQ1",18,0)
 W "VHA Division Processing Request: "_$P($$SITE^VASITE(,$P(^DVB(396.3,REQDA,1),U,4)),U,2),!
"RTN","DVBCENQ1",19,0)
 I $D(^DVB(396.4,"C",REQDA)) W !?3,"Exams on this request: " D TST^DVBCUTL2 W !
"RTN","DVBCENQ1",20,0)
 I '$D(^DVB(396.4,"C",REQDA)) W !?3,"(No exams have yet been entered)",!
"RTN","DVBCENQ1",21,0)
 W !,"** Status of request: " S (XSTAT,STAT)=$P(^DVB(396.3,REQDA,0),U,18)
"RTN","DVBCENQ1",22,0)
 S STAT=$S(XSTAT="N":"New",XSTAT="P":"Pending, reported to MAS",XSTAT="T":"Transcribed",XSTAT="S":"Scheduled",XSTAT="R":"Released, not printed",XSTAT="C":"Completed",XSTAT="CT":"Completed, transferred out",XSTAT="NT":"New, transferred in",1:"")
"RTN","DVBCENQ1",23,0)
 I STAT]"" W STAT
"RTN","DVBCENQ1",24,0)
 I XSTAT="R"!(XSTAT="C") W !!?9,"Released on " S Y=$P(^DVB(396.3,REQDA,0),U,14) X ^DD("DD") W Y," by " S RELBY=$P(^DVB(396.3,REQDA,0),U,15),RELBY=$S($D(^VA(200,+RELBY,0)):$P(^(0),U,1),1:"Unknown user") W RELBY,!
"RTN","DVBCENQ1",25,0)
 I XSTAT="C" W "Printed by the RO on " S Y=$P(^DVB(396.3,REQDA,0),U,16) X ^DD("DD") W Y," by " S PRBY=$P(^DVB(396.3,REQDA,0),U,17),PRBY=$S($D(^VA(200,+PRBY,0)):$P(^(0),U,1),1:"Unknown user") W PRBY,!
"RTN","DVBCENQ1",26,0)
 I STAT="" S STAT=$S(XSTAT="X":"Cancelled by MAS",XSTAT="RX":"Cancelled by RO",1:"Unknown") W STAT I STAT["Cancelled" W "  (Cancelled on " S CANDT=$P(^DVB(396.3,REQDA,0),U,19) W $$FMTE^XLFDT(CANDT,"5DZ"),")"
"RTN","DVBCENQ1",27,0)
 ;S X=$S($D(^DVB(396.3,REQDA,4)):$P(^(4),U,1),1:"") I X="y" W !,"Exam(s) transferred to another site -- see pending report.",!
"RTN","DVBCENQ1",28,0)
 I $D(^DVB(396.3,REQDA,1)),$P(^(1),U,3)="Y" W !,"This request was faxed to the regional office.",!
"RTN","DVBCENQ1",29,0)
 S FEXAM=$P(^DVB(396.3,REQDA,0),U,9) I FEXAM="Y" W !!,"*** Exams done on a FEE BASIS ***  ",! K FEXAM
"RTN","DVBCENQ1",30,0)
 W ! F LINE=1:1:79 W "-"
"RTN","DVBCENQ1",31,0)
 W ! D DDIS Q:$D(OUT)  D CON Q:$D(OUT)
"RTN","DVBCENQ1",32,0)
 I IOST?1"P-".E,$Y>45 W @IOF D HDR
"RTN","DVBCENQ1",33,0)
 W !!,"Other Disabilities:",!!?2,OTHDIS,! I $D(^DVB(396.3,REQDA,1)) W ?2,OTHDIS1,!?2,OTHDIS2
"RTN","DVBCENQ1",34,0)
 W !!,"General Remarks:",!!
"RTN","DVBCENQ1",35,0)
 K ^UTILITY($J,"W")
"RTN","DVBCENQ1",36,0)
 F LINE=0:0 S LINE=$O(^DVB(396.3,REQDA,2,LINE)) Q:LINE=""  S X=^(LINE,0),DIWL=5,DIWR=75,DIWF="NW" D ^DIWP I IOST?1"C-".E,$Y>19 D CON W !!,"General Remarks, continued",!!!
"RTN","DVBCENQ1",37,0)
 D ^DIWW
"RTN","DVBCENQ1",38,0)
END K ANS I IOST?1"C-".E W !!,"Press [RETURN] to continue or ""^"" to stop   " R ANS:DTIME S:'$T!(ANS=U) OUT=1 I $D(OUT) Q:OUT=1
"RTN","DVBCENQ1",39,0)
 Q
"RTN","DVBCENQ1",40,0)
 ;
"RTN","DVBCENQ1",41,0)
DDIS1 W ?2,DX,?37,$J(PCT,3,0)," %",?50,$S(SC=1:"Yes",1:"No"),?58,DXCOD,!
"RTN","DVBCENQ1",42,0)
 I $Y>19 D CON
"RTN","DVBCENQ1",43,0)
 Q
"RTN","DVBCENQ1",44,0)
 ;
"RTN","DVBCENQ1",45,0)
DDIS I $Y>12 D CON Q:$D(OUT)
"RTN","DVBCENQ1",46,0)
 I '$D(^DPT(DFN,.372)) W !?25,"No rated disabilities on file",!! Q
"RTN","DVBCENQ1",47,0)
 W !?2,"Rated Disability",?37,"Percent",?50,"SC ?",?58,"Dx Code",! W ?2 F LINE=1:1:63 W "-"
"RTN","DVBCENQ1",48,0)
 W !!
"RTN","DVBCENQ1",49,0)
 F JII=0:0 S JII=$O(^DPT(DFN,.372,JII)) Q:JII=""  S DXNUM=$P(^DPT(DFN,.372,JII,0),U,1),PCT=$P(^(0),U,2),SC=$P(^(0),U,3),DX=$S($D(^DIC(31,DXNUM)):$P(^(DXNUM,0),U,1),1:"Unknown"),DXCOD=$S($D(^DIC(31,DXNUM)):$P(^(DXNUM,0),U,3),1:"Unknown") D DDIS1
"RTN","DVBCENQ1",50,0)
 W !!
"RTN","DVBCENQ1",51,0)
 Q
"RTN","DVBCENQ1",52,0)
 ;
"RTN","DVBCENQ1",53,0)
HDR S PG=PG+1 W:(IOST?1"C-".E) @IOF
"RTN","DVBCENQ1",54,0)
 W !,"Date: ",FDT(0),?(80-$L(PGHD)\2),PGHD,?71,"Page: ",PG W !,?(80-$L($$SITE^DVBCUTL4)\2),$$SITE^DVBCUTL4 I PG>1 W !!,"Name: ",PNAM,?44,"SSN: ",SSN,?63,"C-NUM: ",CNUM
"RTN","DVBCENQ1",55,0)
 W ! F XLINE=1:1:80 W "="
"RTN","DVBCENQ1",56,0)
 W ! Q
"RTN","DVBCUTL4")
0^8^B22469023
"RTN","DVBCUTL4",1,0)
DVBCUTL4 ;ALB-ISC/JLU/GTS-A utility routine ;2/22/93
"RTN","DVBCUTL4",2,0)
 ;;2.7;AMIE;**57**;Apr 10, 1995
"RTN","DVBCUTL4",3,0)
 ;
"RTN","DVBCUTL4",4,0)
SITE() ;returns the site's name from the amie parameter file (396.1)
"RTN","DVBCUTL4",5,0)
 N DVBCX
"RTN","DVBCUTL4",6,0)
 S DVBCX=$O(^DVB(396.1,0))
"RTN","DVBCUTL4",7,0)
 I 'DVBCX Q "UNKNOWN"
"RTN","DVBCUTL4",8,0)
 Q $P(^(DVBCX,0),U,1) ;nake on SITE+2
"RTN","DVBCUTL4",9,0)
 ;
"RTN","DVBCUTL4",10,0)
EXAM() ;returns the next exam .01 number in the 396.4 Exam file
"RTN","DVBCUTL4",11,0)
 N DVBA,DVBA1
"RTN","DVBCUTL4",12,0)
 L +^DVB(396.1,1,5):3
"RTN","DVBCUTL4",13,0)
 I '$T Q 0 ;unable to lock parameter file node
"RTN","DVBCUTL4",14,0)
 S DVBA=$P(^DVB(396.1,1,5),U,1)
"RTN","DVBCUTL4",15,0)
 F DVBA1=0:0 S DVBA=DVBA+1 I '$D(^DVB(396.4,"B",DVBA)) Q
"RTN","DVBCUTL4",16,0)
 S $P(^DVB(396.1,1,5),U,1)=DVBA
"RTN","DVBCUTL4",17,0)
 L -^DVB(396.1,1,5)
"RTN","DVBCUTL4",18,0)
 Q DVBA ;contains new .01 value
"RTN","DVBCUTL4",19,0)
 ;
"RTN","DVBCUTL4",20,0)
EXSRH(A,B,C) ;searches for the exam for a specific request.
"RTN","DVBCUTL4",21,0)
 ;A ==> The DIC("A") prompt for 396.6
"RTN","DVBCUTL4",22,0)
 ;B ==> An optional screen on 396.6
"RTN","DVBCUTL4",23,0)
 ;C ==> An optional screen on 396.4
"RTN","DVBCUTL4",24,0)
 ;
"RTN","DVBCUTL4",25,0)
 N ERR
"RTN","DVBCUTL4",26,0)
 DO
"RTN","DVBCUTL4",27,0)
 .I $D(A),A]"" S DIC("A")=A
"RTN","DVBCUTL4",28,0)
 .I $D(B),B]"" S DIC("S")=B
"RTN","DVBCUTL4",29,0)
 .S DIC="^DVB(396.6,",DIC(0)="AEQM"
"RTN","DVBCUTL4",30,0)
 .D ^DIC K DIC
"RTN","DVBCUTL4",31,0)
 .I +Y<0!($D(DTOUT))!(X="")!(X=U) S ERR=-1 Q
"RTN","DVBCUTL4",32,0)
 .I $D(C),C]"" S DIC("S")=C
"RTN","DVBCUTL4",33,0)
 .S X=+Y,DIC="^DVB(396.4,",DIC(0)="EQ"
"RTN","DVBCUTL4",34,0)
 .S D="ARQ"_REQDA
"RTN","DVBCUTL4",35,0)
 .D IX^DIC K DIC,D
"RTN","DVBCUTL4",36,0)
 I $D(ERR),ERR<0 S Y=-1
"RTN","DVBCUTL4",37,0)
 Q Y
"RTN","DVBCUTL4",38,0)
 ;
"RTN","DVBCUTL4",39,0)
ROLLBCK ;  ** Sort the ^TMP global to find added exams **
"RTN","DVBCUTL4",40,0)
 S DIK="^DVB(396.4,"
"RTN","DVBCUTL4",41,0)
 N DVBADA,DVBAEXNM,DVBARQDT
"RTN","DVBCUTL4",42,0)
 S (DVBADA,DVBAEXNM,DVBARQDT)=""
"RTN","DVBCUTL4",43,0)
 S DVBARQDT=$P(^DVB(396.3,REQDA,0),U,2)
"RTN","DVBCUTL4",44,0)
 F DVBACNT=0:0 S DVBAEXNM=$O(^TMP($J,"NEW",DVBAEXNM)) Q:DVBAEXNM=""  D LOOP2
"RTN","DVBCUTL4",45,0)
 K DVBACNT,DVBADA,DVBAEXNM,DVBARQDT,DIK,DA
"RTN","DVBCUTL4",46,0)
 Q
"RTN","DVBCUTL4",47,0)
 ;
"RTN","DVBCUTL4",48,0)
LOOP2 ;  ** Loop through 'PE' X-Ref:delete exams just added **
"RTN","DVBCUTL4",49,0)
 F DVBADA=0:0 S DVBADA=$O(^DVB(396.4,"APE",DFN,DVBAEXNM,DVBARQDT,DVBADA)) Q:DVBADA=""  S DA=DVBADA D ^DIK
"RTN","DVBCUTL4",50,0)
 Q
"RTN","DVBCUTL4",51,0)
 ;
"RTN","DVBCUTL4",52,0)
CONTMES ;  ** Continue Message to replace HANG statements **
"RTN","DVBCUTL4",53,0)
 W !!,"   Press RETURN to continue..." R DVBCCONT:DTIME K DVBCCONT
"RTN","DVBCUTL4",54,0)
 Q
"RTN","DVBCUTL4",55,0)
 ;
"RTN","DVBCUTL4",56,0)
EXMLOG1 ; ** Add exam (Called from DVBCADE2) **
"RTN","DVBCUTL4",57,0)
 S (DIC,DIE)="^DVB(396.4,",DIC(0)=""
"RTN","DVBCUTL4",58,0)
 K DD,DO
"RTN","DVBCUTL4",59,0)
 S DIC("DR")=".02////^S X=REQDA;.03////^S X=$P(^TMP($J,""NEW"",EXMNM),U,1);.04////O"
"RTN","DVBCUTL4",60,0)
 D FILE^DICN I $D(Y),(+Y>0) W:$X>40&($L(EXMNM)>30) !
"RTN","DVBCUTL4",61,0)
 W EXMNM_" -added, " W:$X>50 !
"RTN","DVBCUTL4",62,0)
 I $D(Y),+Y<0 W *7,"Exam addition error ! " S OUT=1 H 3 Q
"RTN","DVBCUTL4",63,0)
 S $P(^TMP($J,"NEW",EXMNM),U,3)=+Y
"RTN","DVBCUTL4",64,0)
 I $P(^DVB(396.3,REQDA,0),U,10)="E" DO
"RTN","DVBCUTL4",65,0)
 .I $D(^DVB(396.3,REQDA,5)) DO  ;**Insuf 2507 entered after 2.7
"RTN","DVBCUTL4",66,0)
 ..K DTOUT
"RTN","DVBCUTL4",67,0)
 ..S DVBAINDA=+$P(^DVB(396.3,REQDA,5),U,1),DVBCADEX=""
"RTN","DVBCUTL4",68,0)
 ..D INSXM^DVBCUTA1 K DVBCADEX
"RTN","DVBCUTL4",69,0)
 .I '$D(^DVB(396.3,REQDA,5)) DO  ;**Insuf 2507 entered prior to 2.7
"RTN","DVBCUTL4",70,0)
 ..N REASON
"RTN","DVBCUTL4",71,0)
 ..S REASON=+$$INRSLK^DVBCUTA3
"RTN","DVBCUTL4",72,0)
 ..I +REASON>0 DO
"RTN","DVBCUTL4",73,0)
 ...K DIE,Y,DA,DR
"RTN","DVBCUTL4",74,0)
 ...S DIE="^DVB(396.4,",DR=".11////^S X=REASON;80;.12"
"RTN","DVBCUTL4",75,0)
 ...S DA=+$P(^TMP($J,"NEW",EXMNM),U,3)
"RTN","DVBCUTL4",76,0)
 ...S DIE("NO^")="" D ^DIE K DIE,DA,DR,Y W !!
"RTN","DVBCUTL4",77,0)
 Q  ;Quit to EXMLOG^DVBCADE2
"RTN","DVBCUTL4",78,0)
 ;
"RTN","DVBCUTL4",79,0)
STATCHK ; ** Check Statuses (Called from ^DVBCEDIT) **
"RTN","DVBCUTL4",80,0)
 Q:STAT="O"  I STAT="RX" W *7,!!,"This exam has been cancelled by the RO.",!! H 2 S NCN=1 Q
"RTN","DVBCUTL4",81,0)
 I STAT="CT" W *7,!!,"This request has been completed and transferred out.",!! H 2 S NCN=1 Q
"RTN","DVBCUTL4",82,0)
 I STAT="C" W *7,!!,"This exam has been completed.",! S NCN=1 Q
"RTN","DVBCUTL4",83,0)
 I STAT="X" W *7,!!,"This exam has been cancelled by MAS.",!! H 2 S NCN=1 Q
"RTN","DVBCUTL4",84,0)
 I STAT="R" W *7,!!,"This exam has been released to the RO.",!! H 2 S NCN=1 Q
"RTN","DVBCUTL4",85,0)
 Q
"RTN","DVBCUTL4",86,0)
 ;
"RTN","DVBCUTL4",87,0)
COMP ; ** Check to see if transcription completed (Called from ^DVBCEDIT) **
"RTN","DVBCUTL4",88,0)
 K OUT Q:$P(^DVB(396.4,EXMDA,0),U,4)="C"  W !!,"Is transcription completed for this exam" S %=2 D YN^DICN I $D(DTOUT) S OUT=1 Q
"RTN","DVBCUTL4",89,0)
 I $D(%Y),(%Y["?") W !!,"Enter Y if all information has been entered and transcription is finished",!,"or N if more information will be entered later",!! G COMP
"RTN","DVBCUTL4",90,0)
 Q:%'=1
"RTN","DVBCUTL4",91,0)
 K DIE,DA,DR
"RTN","DVBCUTL4",92,0)
 S DIE="^DVB(396.4,",DA=EXMDA,DR=".04///C;90///NOW"
"RTN","DVBCUTL4",93,0)
 D ^DIE
"RTN","DVBCUTL4",94,0)
 Q
"RTN","DVBCUTL4",95,0)
 ;
"RTN","DVBCUTL4",96,0)
PAUSE ;this is a pause, only looking for a return or up arrow
"RTN","DVBCUTL4",97,0)
 S DIR(0)="E"
"RTN","DVBCUTL4",98,0)
 D ^DIR
"RTN","DVBCUTL4",99,0)
 K DIR
"RTN","DVBCUTL4",100,0)
 Q
"RTN","DVBCUTL4",101,0)
 ;
"RTN","DVBCUTL4",102,0)
STM ;start response clock
"RTN","DVBCUTL4",103,0)
 I $D(XRTL) D T0^%ZOSV
"RTN","DVBCUTL4",104,0)
 Q
"RTN","DVBCUTL4",105,0)
 ;
"RTN","DVBCUTL4",106,0)
SPM ;stop monitor clock
"RTN","DVBCUTL4",107,0)
 I $D(XRT0) D T1^%ZOSV
"RTN","DVBCUTL4",108,0)
 K XRTN
"RTN","DVBCUTL4",109,0)
 Q
"RTN","DVBCUTL4",110,0)
 ;
"RTN","DVBCUTL4",111,0)
DELSER ;this subroutine will delete the server message
"RTN","DVBCUTL4",112,0)
 S XMZ=XQMSG
"RTN","DVBCUTL4",113,0)
 S XMSER="S."_XQSOP
"RTN","DVBCUTL4",114,0)
 D REMSBMSG^XMA1C
"RTN","DVBCUTL4",115,0)
 Q
"RTN","DVBCUTL4",116,0)
 ;
"RTN","DVBCUTL4",117,0)
PHYS(A) ; ** Question user for access to Physicians Guide **
"RTN","DVBCUTL4",118,0)
 S DIC(0)="AEMQ^^"
"RTN","DVBCUTL4",119,0)
 S DIC("A")="Select exam: "
"RTN","DVBCUTL4",120,0)
 ;S DIR("?")="Enter Yes to access the Physician's Guide using Text Retreival."
"RTN","DVBCUTL4",121,0)
 D ^DIC
"RTN","DVBCUTL4",122,0)
 ;I +Y=1 D PHYS^A1BBTR ;Access Physician's Guide
"RTN","DVBCUTL4",123,0)
 ;I +Y=1 D PHYS^DRSTR ;** Access Physician's Guide
"RTN","DVBCUTL4",124,0)
 S:'$D(Y) Y=""
"RTN","DVBCUTL4",125,0)
 K DIR,X,Y(0)
"RTN","DVBCUTL4",126,0)
 Q Y
"RTN","DVBCUTL4",127,0)
 ;
"RTN","DVBCUTL4",128,0)
DATE(PAR1,PAR2) ;gets the beginning and ending dates from the users
"RTN","DVBCUTL4",129,0)
 ;PAR1 is the beginning date
"RTN","DVBCUTL4",130,0)
 ;PAR2 is the ending date
"RTN","DVBCUTL4",131,0)
 ;
"RTN","DVBCUTL4",132,0)
DATE1 S %DT("A")="Enter the beginning date: "
"RTN","DVBCUTL4",133,0)
 S %DT="AET"
"RTN","DVBCUTL4",134,0)
 D ^%DT
"RTN","DVBCUTL4",135,0)
 I X="^"!($D(DTOUT)) S (PAR1,PAR2)=0 Q
"RTN","DVBCUTL4",136,0)
 I X="" S (PAR1,PAR2)=-1 Q
"RTN","DVBCUTL4",137,0)
 S PAR1=Y
"RTN","DVBCUTL4",138,0)
 K %DT,Y,X,DTOUT
"RTN","DVBCUTL4",139,0)
 S %DT("A")="Enter the ending date: "
"RTN","DVBCUTL4",140,0)
 S %DT="AET"
"RTN","DVBCUTL4",141,0)
 D ^%DT
"RTN","DVBCUTL4",142,0)
 I X="^"!($D(DTOUT)) S (PAR1,PAR2)=0 Q
"RTN","DVBCUTL4",143,0)
 I X="" S (PAR1,PAR2)=-1 Q
"RTN","DVBCUTL4",144,0)
 S PAR2=Y
"RTN","DVBCUTL4",145,0)
 K %DT,X,Y,DTOUT
"RTN","DVBCUTL4",146,0)
 I PAR2<PAR1 DO  G DATE1
"RTN","DVBCUTL4",147,0)
 .S VAR(1,0)="1,0,0,2:2,0^Beginning date must be before ending date!"
"RTN","DVBCUTL4",148,0)
 .D WR^DVBAUTL4("VAR")
"RTN","DVBCUTL4",149,0)
 .K VAR,PAR1,PAR2
"RTN","DVBCUTL4",150,0)
 .Q
"RTN","DVBCUTL4",151,0)
 Q
"VER")
8.0^22.0
"^DD",396.4,396.4,90,0)
DATE TRANSCRIPTION COMPLETE^D^^0;14^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",396.4,396.4,90,9)
^
"^DD",396.4,396.4,90,21,0)
^.001^2^2^3040910^^^
"^DD",396.4,396.4,90,21,1,0)
This field records the date/time the user has marked the exam document as 
"^DD",396.4,396.4,90,21,2,0)
complete.
"^DD",396.4,396.4,90,"DT")
3040909
**END**
**END**

Released WV*1*13 SEQ #12
Extracted from mail message
**KIDS**:WV*1.0*13^

**INSTALL NAME**
WV*1.0*13
"BLD",2963,0)
WV*1.0*13^WOMEN'S HEALTH^0^3010117^y
"BLD",2963,1,0)
^^2^2^3010117^^^
"BLD",2963,1,1,0)
Please read the WV*1*13 patch description on FORUM for an explanation of
"BLD",2963,1,2,0)
what this patch does.
"BLD",2963,4,0)
^9.64PA^^
"BLD",2963,"ABNS",0)
^9.66A^^
"BLD",2963,"ABPKG")
n^n
"BLD",2963,"INIT")
WV13PST
"BLD",2963,"KRN",0)
^9.67PA^19^17
"BLD",2963,"KRN",.4,0)
.4
"BLD",2963,"KRN",.401,0)
.401
"BLD",2963,"KRN",.402,0)
.402
"BLD",2963,"KRN",.403,0)
.403
"BLD",2963,"KRN",.5,0)
.5
"BLD",2963,"KRN",.84,0)
.84
"BLD",2963,"KRN",3.6,0)
3.6
"BLD",2963,"KRN",3.8,0)
3.8
"BLD",2963,"KRN",9.2,0)
9.2
"BLD",2963,"KRN",9.8,0)
9.8
"BLD",2963,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",2963,"KRN",9.8,"NM",1,0)
WVPATE^^0^B8282877
"BLD",2963,"KRN",9.8,"NM",2,0)
WV13PST^^0^B386376
"BLD",2963,"KRN",9.8,"NM","B","WV13PST",2)

"BLD",2963,"KRN",9.8,"NM","B","WVPATE",1)

"BLD",2963,"KRN",19,0)
19
"BLD",2963,"KRN",19.1,0)
19.1
"BLD",2963,"KRN",101,0)
101
"BLD",2963,"KRN",409.61,0)
409.61
"BLD",2963,"KRN",771,0)
771
"BLD",2963,"KRN",870,0)
870
"BLD",2963,"KRN",8994,0)
8994
"BLD",2963,"KRN","B",.4,.4)

"BLD",2963,"KRN","B",.401,.401)

"BLD",2963,"KRN","B",.402,.402)

"BLD",2963,"KRN","B",.403,.403)

"BLD",2963,"KRN","B",.5,.5)

"BLD",2963,"KRN","B",.84,.84)

"BLD",2963,"KRN","B",3.6,3.6)

"BLD",2963,"KRN","B",3.8,3.8)

"BLD",2963,"KRN","B",9.2,9.2)

"BLD",2963,"KRN","B",9.8,9.8)

"BLD",2963,"KRN","B",19,19)

"BLD",2963,"KRN","B",19.1,19.1)

"BLD",2963,"KRN","B",101,101)

"BLD",2963,"KRN","B",409.61,409.61)

"BLD",2963,"KRN","B",771,771)

"BLD",2963,"KRN","B",870,870)

"BLD",2963,"KRN","B",8994,8994)

"BLD",2963,"QUES",0)
^9.62^^
"BLD",2963,"REQB",0)
^9.611^1^1
"BLD",2963,"REQB",1,0)
WV*1.0*3^2
"BLD",2963,"REQB","B","WV*1.0*3",1)

"INIT")
WV13PST
"MBREQ")
0
"PKG",364,-1)
1^1
"PKG",364,0)
WOMEN'S HEALTH^WV^Tracks health issues specific to female patients.
"PKG",364,20,0)
^9.402P^^
"PKG",364,22,0)
^9.49I^1^1
"PKG",364,22,1,0)
1.0^2980925^2980508^547
"PKG",364,22,1,"PAH",1,0)
13^3010117
"PKG",364,22,1,"PAH",1,1,0)
^^2^2^3010117
"PKG",364,22,1,"PAH",1,1,1,0)
Please read the WV*1*13 patch description on FORUM for an explanation of
"PKG",364,22,1,"PAH",1,1,2,0)
what this patch does.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","WV13PST")
0^2^B386376
"RTN","WV13PST",1,0)
WV13PST ;HIOFO/FT-WV*1*13 POST INSTALLATION ROUTINE ;12/27/00  09:40
"RTN","WV13PST",2,0)
 ;;1.0;WOMEN'S HEALTH;**13**;Sep 30, 1998
"RTN","WV13PST",3,0)
EN1 ; Compare FILE 790 record number to the .01 field value. If not the
"RTN","WV13PST",4,0)
 ; same then set the .01 value equal to the record number. The .01 value
"RTN","WV13PST",5,0)
 ; must match the record number. Also, fix the B cross-reference.
"RTN","WV13PST",6,0)
 N WVDFN,WVIFN
"RTN","WV13PST",7,0)
 S WVIFN=0
"RTN","WV13PST",8,0)
 F  S WVIFN=$O(^WV(790,WVIFN)) Q:'WVIFN  D
"RTN","WV13PST",9,0)
 .S WVDFN=$P(^WV(790,WVIFN,0),U,1)
"RTN","WV13PST",10,0)
 .I WVIFN=WVDFN Q
"RTN","WV13PST",11,0)
 .Q:WVIFN=""
"RTN","WV13PST",12,0)
 .Q:WVDFN=""
"RTN","WV13PST",13,0)
 .K ^WV(790,"B",WVDFN,WVIFN)
"RTN","WV13PST",14,0)
 .S ^WV(790,"B",WVIFN,WVIFN)=""
"RTN","WV13PST",15,0)
 .S $P(^WV(790,WVIFN,0),U,1)=WVIFN
"RTN","WV13PST",16,0)
 .Q
"RTN","WV13PST",17,0)
 Q
"RTN","WVPATE")
0^1^B8282877
"RTN","WVPATE",1,0)
WVPATE ;HCIOFO/FT,JR-PATIENT CASE DATA EDIT; ;12/27/00  09:34
"RTN","WVPATE",2,0)
 ;;1.0;WOMEN'S HEALTH;**3,13**;Sep 30, 1998
"RTN","WVPATE",3,0)
 ;;  Original routine created by IHS/ANMC/MWR
"RTN","WVPATE",4,0)
 ;;* MICHAEL REMILLARD, DDS * ALASKA NATIVE MEDICAL CENTER *
"RTN","WVPATE",5,0)
 ;;  CALLED BY OPTION: "WV EDIT PATIENT CASE DATA".
"RTN","WVPATE",6,0)
 ;
"RTN","WVPATE",7,0)
 D SETVARS^WVUTL5
"RTN","WVPATE",8,0)
 F  D PATIENT Q:WVPOP
"RTN","WVPATE",9,0)
 ;
"RTN","WVPATE",10,0)
EXIT ;EP
"RTN","WVPATE",11,0)
 D KILLALL^WVUTL8
"RTN","WVPATE",12,0)
 Q
"RTN","WVPATE",13,0)
 ;
"RTN","WVPATE",14,0)
 ;
"RTN","WVPATE",15,0)
PATIENT ;EP
"RTN","WVPATE",16,0)
 D TITLE^WVUTL5("EDIT PATIENT CASE DATA")
"RTN","WVPATE",17,0)
PATIENT1 ;EP
"RTN","WVPATE",18,0)
 ;---> TO AVOID @IOF AND TITLE.
"RTN","WVPATE",19,0)
 ;---> SELECT PATIENT.
"RTN","WVPATE",20,0)
 ; Quit if no default case manager
"RTN","WVPATE",21,0)
 I '$$DCM^WVUTL9(DUZ(2)) D NODCM^WVUTL9 S WVPOP=1 Q
"RTN","WVPATE",22,0)
 N Y
"RTN","WVPATE",23,0)
 W !!,"   Select the patient you wish to add or edit."
"RTN","WVPATE",24,0)
 D PATLKUP^WVUTL8(.Y,"ADD")
"RTN","WVPATE",25,0)
 I Y<0 S WVPOP=1 Q
"RTN","WVPATE",26,0)
 S WVDFN=+Y
"RTN","WVPATE",27,0)
 D SCREEN(WVDFN) S WVPOP=0
"RTN","WVPATE",28,0)
 Q
"RTN","WVPATE",29,0)
 ;
"RTN","WVPATE",30,0)
 ;
"RTN","WVPATE",31,0)
SCREEN(WVDFN) ;EP
"RTN","WVPATE",32,0)
 ;---> EDIT PATIENT CASE DATA WITH SCREENMAN.
"RTN","WVPATE",33,0)
 ;---> REQUIRED VARIABLES: WVDFN=DFN OF PATIENT.
"RTN","WVPATE",34,0)
 S WVMST=$$MSTDEF^WVUTL1A(WVDFN)
"RTN","WVPATE",35,0)
 I '$P($G(^WV(790,WVDFN,0)),U,10) D STUFF
"RTN","WVPATE",36,0)
 N DR
"RTN","WVPATE",37,0)
 S DR="[WV PATIENT-FORM-1]"
"RTN","WVPATE",38,0)
 D DDS^WVFMAN(790,DR,WVDFN,"","",.WVPOP)
"RTN","WVPATE",39,0)
 Q:WVPOP
"RTN","WVPATE",40,0)
 ;Q
"RTN","WVPATE",41,0)
 N DIR W !,"Do you wish to PRINT this patient's Case Data?"
"RTN","WVPATE",42,0)
 S DIR(0)="Y",DIR("B")="NO" D ^DIR K DIR W !
"RTN","WVPATE",43,0)
 D:Y PRTCASE^WVPATP(WVDFN)
"RTN","WVPATE",44,0)
 Q
"RTN","WVPATE",45,0)
 ;
"RTN","WVPATE",46,0)
CASEDATA(WVDFN) ;EP
"RTN","WVPATE",47,0)
 ;---> CALLED AFTER ADD/EDIT OF NOTIFICATIONS.
"RTN","WVPATE",48,0)
 N DIR W !,"Do you wish to EDIT this patient's Case Data?"
"RTN","WVPATE",49,0)
 S DIR("?",1)="   Enter YES to edit this patient's Case Manager, "
"RTN","WVPATE",50,0)
 S DIR("?")="   PAP Regimen, Current Need, etc."
"RTN","WVPATE",51,0)
 S DIR(0)="Y",DIR("B")="NO" D ^DIR K DIR W !
"RTN","WVPATE",52,0)
 D:Y SCREEN(WVDFN)
"RTN","WVPATE",53,0)
 Q
"RTN","WVPATE",54,0)
 ;
"RTN","WVPATE",55,0)
AUTOADD(DFN,SITE,Y,WVPRMT) ;EP
"RTN","WVPATE",56,0)
 ;---> AUTOMATIC ADD OF A NEW PATIENT TO "WV PATIENT FILE".
"RTN","WVPATE",57,0)
 ;---> SET CASEMANAGER TO SITE PARAMETER DEFAULT.
"RTN","WVPATE",58,0)
 ;---> SET PAP TX NEED (#.11), PAP REGIMEN (#.16)="Undetermined",
"RTN","WVPATE",59,0)
 ;---> MAM TX NEED (#.18)="Undetermined".
"RTN","WVPATE",60,0)
 ;---> PARAMETERS:
"RTN","WVPATE",61,0)
 ;     1 - DFN     (REQUIRED) IEN OF PATIENT IN ^DPT(
"RTN","WVPATE",62,0)
 ;     2 - SITE    (REQUIRED) DUZ(2) FOR DEFAULT CASE MANAGER
"RTN","WVPATE",63,0)
 ;     3 - Y       (RETURNED) FROM ^DICN: IEN OR -1 FAILURE TO ADD PT
"RTN","WVPATE",64,0)
 ;     4 - WVPRMT  (OPTIONAL) EQUALS 1 IF PROMPT WHEN FAILURE
"RTN","WVPATE",65,0)
 ;
"RTN","WVPATE",66,0)
 ;---> SET CASE MANAGER DEFAULT.
"RTN","WVPATE",67,0)
 N WVCMGR,DIC S WVCMGR=$S($D(SITE):$P(^WV(790.02,SITE,0),U,2),1:"")
"RTN","WVPATE",68,0)
 S:'$G(WVPRMT) WVPRMT=0
"RTN","WVPATE",69,0)
 S DIC("DR")=".1////"_WVCMGR_";.11///Undetermined;.16///Undetermined"
"RTN","WVPATE",70,0)
 S DIC("DR")=DIC("DR")_";.18///Undetermined"
"RTN","WVPATE",71,0)
 S DIC("DR")=DIC("DR")_";.21////"_DT
"RTN","WVPATE",72,0)
 S DIC("DR")=DIC("DR")_";.27////"_$$MSTAL^WVUTL1A(DFN)
"RTN","WVPATE",73,0)
 S (DINUM,X)=DFN
"RTN","WVPATE",74,0)
 K DD,DO S DIC="^WV(790,",DIC(0)="ML",DLAYGO=790
"RTN","WVPATE",75,0)
 D FILE^DICN K DIC
"RTN","WVPATE",76,0)
 ;---> IF Y<0, CHECK PERMISSIONS.
"RTN","WVPATE",77,0)
 I Y<0,WVPRMT D  Q
"RTN","WVPATE",78,0)
 .W !!?5,"* UNABLE to add this patient to the Women's Health database."
"RTN","WVPATE",79,0)
 .W !?5,"  Please contact your site manager to check permissions."
"RTN","WVPATE",80,0)
 .D DIRZ^WVUTL3
"RTN","WVPATE",81,0)
 S Y=+Y
"RTN","WVPATE",82,0)
 Q
"RTN","WVPATE",83,0)
 ;
"RTN","WVPATE",84,0)
STUFF ; Stuff case manager if none
"RTN","WVPATE",85,0)
 Q:'+$G(WVDFN)
"RTN","WVPATE",86,0)
 Q:'+$G(DUZ(2))
"RTN","WVPATE",87,0)
 S $P(^WV(790,WVDFN,0),U,10)=$P($G(^WV(790.02,DUZ(2),0)),U,2)
"RTN","WVPATE",88,0)
 Q
"VER")
8.0^22
**END**
**END**

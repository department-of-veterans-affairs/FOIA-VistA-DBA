Released PRC*5.1*93 SEQ #77
Extracted from mail message
**KIDS**:PRC*5.1*93^

**INSTALL NAME**
PRC*5.1*93
"BLD",4939,0)
PRC*5.1*93^IFCAP^0^3051109^y
"BLD",4939,1,0)
^^1^1^3051109^
"BLD",4939,1,1,0)
<NULLSUBSCR> CP+12^PRCSUT
"BLD",4939,4,0)
^9.64PA^^
"BLD",4939,"KRN",0)
^9.67PA^8989.52^19
"BLD",4939,"KRN",.4,0)
.4
"BLD",4939,"KRN",.401,0)
.401
"BLD",4939,"KRN",.402,0)
.402
"BLD",4939,"KRN",.403,0)
.403
"BLD",4939,"KRN",.5,0)
.5
"BLD",4939,"KRN",.84,0)
.84
"BLD",4939,"KRN",3.6,0)
3.6
"BLD",4939,"KRN",3.8,0)
3.8
"BLD",4939,"KRN",9.2,0)
9.2
"BLD",4939,"KRN",9.8,0)
9.8
"BLD",4939,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",4939,"KRN",9.8,"NM",1,0)
PRCSUT^^0^B54556386
"BLD",4939,"KRN",9.8,"NM","B","PRCSUT",1)

"BLD",4939,"KRN",19,0)
19
"BLD",4939,"KRN",19.1,0)
19.1
"BLD",4939,"KRN",101,0)
101
"BLD",4939,"KRN",409.61,0)
409.61
"BLD",4939,"KRN",771,0)
771
"BLD",4939,"KRN",870,0)
870
"BLD",4939,"KRN",8989.51,0)
8989.51
"BLD",4939,"KRN",8989.52,0)
8989.52
"BLD",4939,"KRN",8994,0)
8994
"BLD",4939,"KRN","B",.4,.4)

"BLD",4939,"KRN","B",.401,.401)

"BLD",4939,"KRN","B",.402,.402)

"BLD",4939,"KRN","B",.403,.403)

"BLD",4939,"KRN","B",.5,.5)

"BLD",4939,"KRN","B",.84,.84)

"BLD",4939,"KRN","B",3.6,3.6)

"BLD",4939,"KRN","B",3.8,3.8)

"BLD",4939,"KRN","B",9.2,9.2)

"BLD",4939,"KRN","B",9.8,9.8)

"BLD",4939,"KRN","B",19,19)

"BLD",4939,"KRN","B",19.1,19.1)

"BLD",4939,"KRN","B",101,101)

"BLD",4939,"KRN","B",409.61,409.61)

"BLD",4939,"KRN","B",771,771)

"BLD",4939,"KRN","B",870,870)

"BLD",4939,"KRN","B",8989.51,8989.51)

"BLD",4939,"KRN","B",8989.52,8989.52)

"BLD",4939,"KRN","B",8994,8994)

"BLD",4939,"QUES",0)
^9.62^^
"BLD",4939,"REQB",0)
^9.611^^
"MBREQ")
0
"PKG",455,-1)
1^1
"PKG",455,0)
IFCAP^PRC^IFCAP System Files
"PKG",455,20,0)
^9.402P^^
"PKG",455,22,0)
^9.49I^1^1
"PKG",455,22,1,0)
5.1^3001012^3001019^68
"PKG",455,22,1,"PAH",1,0)
93^3051109
"PKG",455,22,1,"PAH",1,1,0)
^^1^1^3051109
"PKG",455,22,1,"PAH",1,1,1,0)
<NULLSUBSCR> CP+12^PRCSUT
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PRCSUT")
0^1^B54556386
"RTN","PRCSUT",1,0)
PRCSUT ;WISC/SAW/DGL-CONTROL POINT ACTIVITY UTILITY PROGRAM ;9/14/00  15:49
"RTN","PRCSUT",2,0)
V ;;5.1;IFCAP;**93**;Oct 20, 2000
"RTN","PRCSUT",3,0)
 ;Per VHA Directive 10-93-142, this routine should not be modified.
"RTN","PRCSUT",4,0)
 ;
"RTN","PRCSUT",5,0)
ENF(PRCIPFLG) ;Entry point for Inv. Pt. selection
"RTN","PRCSUT",6,0)
EN ;STA,FY,QTR,CP W/SCREEN FOR INACTIVE CP
"RTN","PRCSUT",7,0)
 I '$G(PRCIPFLG) N:'$D(PRCIPFLG) PRCIPFLG S PRCIPFLG=0
"RTN","PRCSUT",8,0)
 D STA G EX:'SI!(Y<0)
"RTN","PRCSUT",9,0)
 D FY G EX:PRC("FY")="^"
"RTN","PRCSUT",10,0)
 D QT G EX:PRC("QTR")="^"
"RTN","PRCSUT",11,0)
 S DIC("S")="I '$P(^(0),""^"",19),$D(^PRC(420,""A"",DUZ,PRC(""SITE""),+Y,1))!($D(^(2)))"
"RTN","PRCSUT",12,0)
 I $D(PRCSC),PRCSC D CPF^PRCSUT1(PRCIPFLG)
"RTN","PRCSUT",13,0)
 I '$D(PRCSC) D CPF(PRCIPFLG)
"RTN","PRCSUT",14,0)
 G EX:'SI!(Y<0)
"RTN","PRCSUT",15,0)
 G:'$$BBFY(PRC("SITE"),PRC("FY"),PRC("CP")) EX
"RTN","PRCSUT",16,0)
 G EN11
"RTN","PRCSUT",17,0)
 ;
"RTN","PRCSUT",18,0)
EN1F(PRCIPFLG) ; Entry point for Inv. Pt. selection
"RTN","PRCSUT",19,0)
EN1 ;STA,FY,QTR,CP
"RTN","PRCSUT",20,0)
 I '$G(PRCIPFLG) N:'$D(PRCIPFLG) PRCIPFLG S PRCIPFLG=0
"RTN","PRCSUT",21,0)
 D STA G EX:'SI!(Y<0)
"RTN","PRCSUT",22,0)
 D FY G EX:PRC("FY")="^"
"RTN","PRCSUT",23,0)
 D QT G EX:PRC("QTR")="^"
"RTN","PRCSUT",24,0)
 I $D(PRCSC),PRCSC D CPF^PRCSUT1(PRCIPFLG)
"RTN","PRCSUT",25,0)
 I '$D(PRCSC) D CPF(PRCIPFLG)
"RTN","PRCSUT",26,0)
 G EX:'SI!(Y<0)
"RTN","PRCSUT",27,0)
 G:'$$BBFY(PRC("SITE"),PRC("FY"),PRC("CP")) EX
"RTN","PRCSUT",28,0)
EN11 S Z=PRC("SITE")_"-"_PRC("FY")_"-"_PRC("QTR")_"-"_$P(PRC("CP")," ")
"RTN","PRCSUT",29,0)
 S X=$P(Z,"-",1,2)_"-"_$P(PRC("CP")," ")
"RTN","PRCSUT",30,0)
 G EXIT
"RTN","PRCSUT",31,0)
 ;
"RTN","PRCSUT",32,0)
EN2 ;STA,FY,QTR
"RTN","PRCSUT",33,0)
 D STA G EX:'SI!(Y<0)
"RTN","PRCSUT",34,0)
 D FY G EX:PRC("FY")="^"
"RTN","PRCSUT",35,0)
 D QT G EX:PRC("QTR")="^"
"RTN","PRCSUT",36,0)
 G EXIT
"RTN","PRCSUT",37,0)
 ;
"RTN","PRCSUT",38,0)
EN3F(PRCIPFLG) ; Entry point for Inv. Pt. selection
"RTN","PRCSUT",39,0)
EN3 ;STA,CP
"RTN","PRCSUT",40,0)
 I '$G(PRCIPFLG) N:'$D(PRCIPFLG) PRCIPFLG S PRCIPFLG=0
"RTN","PRCSUT",41,0)
 D STA G EX:'SI!(Y<0)
"RTN","PRCSUT",42,0)
 I $D(PRCSC),PRCSC D CPF^PRCSUT1(PRCIPFLG)
"RTN","PRCSUT",43,0)
 D:'$D(PRCSC) CPF(PRCIPFLG)
"RTN","PRCSUT",44,0)
 G EX:'SI!(Y<0)
"RTN","PRCSUT",45,0)
 G EXIT
"RTN","PRCSUT",46,0)
 ;
"RTN","PRCSUT",47,0)
EN4 ;STA,FY,QTR,CC
"RTN","PRCSUT",48,0)
 D STA G EX:'SI!(Y<0)
"RTN","PRCSUT",49,0)
 D FY G EX:PRC("FY")="^"
"RTN","PRCSUT",50,0)
 D QT G EX:PRC("QTR")="^"
"RTN","PRCSUT",51,0)
 D CC
"RTN","PRCSUT",52,0)
 G EXIT
"RTN","PRCSUT",53,0)
 ;
"RTN","PRCSUT",54,0)
EN5 ;STA,FY,QTR,BOC
"RTN","PRCSUT",55,0)
 D STA G EX:'SI!(Y<0)
"RTN","PRCSUT",56,0)
 D FY G EX:PRC("FY")="^"
"RTN","PRCSUT",57,0)
 D QT G EX:PRC("QTR")="^"
"RTN","PRCSUT",58,0)
 D SUB
"RTN","PRCSUT",59,0)
 G EXIT
"RTN","PRCSUT",60,0)
 ;
"RTN","PRCSUT",61,0)
EN6F(PRCIPFLG) ; Entry point for Inv. Pt. selection
"RTN","PRCSUT",62,0)
EN6 ;STA,CP,FY
"RTN","PRCSUT",63,0)
 I '$G(PRCIPFLG) N:'$D(PRCIPFLG) PRCIPFLG S PRCIPFLG=0
"RTN","PRCSUT",64,0)
 D STA G EX:'SI!(Y<0)
"RTN","PRCSUT",65,0)
 I $D(PRCSC),PRCSC D CPF^PRCSUT1(PRCIPFLG)
"RTN","PRCSUT",66,0)
 I '$D(PRCSC) D CPF(PRCIPFLG)
"RTN","PRCSUT",67,0)
 G EX:'SI!(Y<0)
"RTN","PRCSUT",68,0)
 D FY G EX:PRC("FY")="^"
"RTN","PRCSUT",69,0)
 G EXIT
"RTN","PRCSUT",70,0)
 ;
"RTN","PRCSUT",71,0)
 ;PRCSST is flag to not ask substation
"RTN","PRCSUT",72,0)
 ;PRCSK is flag to allow selection of any station
"RTN","PRCSUT",73,0)
STA ;SELECT STATION NUMBER
"RTN","PRCSUT",74,0)
 S N="",Y=0
"RTN","PRCSUT",75,0)
 I $D(PRCSK) S SI=2 ; if privilege flag is set, ask STATION
"RTN","PRCSUT",76,0)
 ; else restrict station selection to user's authorized stations
"RTN","PRCSUT",77,0)
 E  F SI=0:1:2 S N=$O(^PRC(420,"A",DUZ,N)) Q:N'>0  S N(1)=N
"RTN","PRCSUT",78,0)
 Q:'SI  ; user not allowed to access any station
"RTN","PRCSUT",79,0)
 I SI>1 D
"RTN","PRCSUT",80,0)
 . S DIC="^PRC(420,",DIC(0)="AEMQ",DIC("A")="Select STATION NUMBER: "
"RTN","PRCSUT",81,0)
 . I '$D(PRCSK) S DIC("S")="I $D(^PRC(420,""A"",DUZ,+Y))"
"RTN","PRCSUT",82,0)
 . I $D(PRC("SITE")) S DIC("B")=PRC("SITE")
"RTN","PRCSUT",83,0)
 . S D="B^C"
"RTN","PRCSUT",84,0)
 . D MIX^DIC1 I Y>0 S PRC("SITE")=+Y
"RTN","PRCSUT",85,0)
 I SI=1 S PRC("SITE")=N(1)
"RTN","PRCSUT",86,0)
 I '$D(PRC("SITE")) S PRC("SITE")="",PRC("SST")=""
"RTN","PRCSUT",87,0)
 I PRC("SITE")=""!(Y<0) K DIC,N Q
"RTN","PRCSUT",88,0)
 ; substation
"RTN","PRCSUT",89,0)
 I '$D(PRC("SST"))!'$D(^PRC(411,"UP",+PRC("SITE"))) S PRC("SST")=""
"RTN","PRCSUT",90,0)
 I '$G(PRCSST),$D(^PRC(411,"UP",+PRC("SITE"))) D
"RTN","PRCSUT",91,0)
 . S DIC("B")=PRC("SST")
"RTN","PRCSUT",92,0)
 . S DIC="^PRC(411,",DIC(0)="AEQZ",DIC("A")="Select SUBSTATION: "
"RTN","PRCSUT",93,0)
 . S DIC("S")="I $E($G(^PRC(411,+Y,0)),1,3)=PRC(""SITE"")"
"RTN","PRCSUT",94,0)
 . D ^DIC I Y>0 S PRC("SST")=+Y
"RTN","PRCSUT",95,0)
 K DIC,N
"RTN","PRCSUT",96,0)
 Q
"RTN","PRCSUT",97,0)
 ;
"RTN","PRCSUT",98,0)
FY ;SELECT FISCAL YEAR
"RTN","PRCSUT",99,0)
 D:'$D(DT) DT^DICRW
"RTN","PRCSUT",100,0)
 S FYT=$E(100+$E(DT,2,3)+$E(DT,4),2,3),PRC("FY")=FYT
"RTN","PRCSUT",101,0)
 W !,"Select FISCAL YEAR: ",FYT,"// " R PRC("FY"):DTIME
"RTN","PRCSUT",102,0)
 S:'$T PRC("FY")=U
"RTN","PRCSUT",103,0)
 S:PRC("FY")="" PRC("FY")=FYT
"RTN","PRCSUT",104,0)
 Q:PRC("FY")="^"
"RTN","PRCSUT",105,0)
 I PRC("FY")'?2N W $C(7),!,"Enter a two digit fiscal year (e.g., 87).",! G FY
"RTN","PRCSUT",106,0)
 Q
"RTN","PRCSUT",107,0)
 ;
"RTN","PRCSUT",108,0)
QT ;SELECT QUARTER
"RTN","PRCSUT",109,0)
 D:'$D(DT) DT^DICRW
"RTN","PRCSUT",110,0)
 I '$D(QTT) S:$D(PRC("QTR")) QTT=PRC("QTR") I '$D(QTT) S SI=$E(DT,4,5),QTT=$P("2^2^2^3^3^3^4^4^4^1^1^1","^",SI)
"RTN","PRCSUT",111,0)
 W !,"Select QUARTER: ",QTT,"// " R PRC("QTR"):DTIME
"RTN","PRCSUT",112,0)
 S:'$T PRC("QTR")=U
"RTN","PRCSUT",113,0)
 S:PRC("QTR")="" PRC("QTR")=QTT
"RTN","PRCSUT",114,0)
 Q:PRC("QTR")=U
"RTN","PRCSUT",115,0)
 I PRC("QTR")<1!(PRC("QTR")>4)!(PRC("QTR")'?1N) W $C(7),!,"Enter a single digit number from 1 to 4.",! G QT
"RTN","PRCSUT",116,0)
 Q
"RTN","PRCSUT",117,0)
 ;
"RTN","PRCSUT",118,0)
CPF(PRCIPFLG) ; Entry point for inv. pt. selection
"RTN","PRCSUT",119,0)
CP ;SELECT CONTROL POINT
"RTN","PRCSUT",120,0)
 N FCPDA
"RTN","PRCSUT",121,0)
 K PRCSIP ; inventory distribution point variable
"RTN","PRCSUT",122,0)
 I '$G(PRCIPFLG) N:'$D(PRCIPFLG) PRCIPFLG S PRCIPFLG=0
"RTN","PRCSUT",123,0)
 S FCPDA=$O(^PRC(420,"A",DUZ,PRC("SITE"),0)) Q:'FCPDA  ; no fcps
"RTN","PRCSUT",124,0)
 I '$O(^PRC(420,"A",DUZ,PRC("SITE"),FCPDA)) D  Q  ; access to 1 fcp
"RTN","PRCSUT",125,0)
 . S PRC("CP")=$P($G(^PRC(420,PRC("SITE"),1,FCPDA,0)),U)
"RTN","PRCSUT",126,0)
 . I PRC("CP"),PRCIPFLG D IP
"RTN","PRCSUT",127,0)
 ; more than one fcp
"RTN","PRCSUT",128,0)
 S DIC="^PRC(420,"_PRC("SITE")_",1,"
"RTN","PRCSUT",129,0)
 S DIC(0)="AEMNQZ",DIC("A")="Select CONTROL POINT: "
"RTN","PRCSUT",130,0)
 I '$D(DIC("S")) S DIC("S")="I '$P(^(0),""^"",19),$D(^PRC(420,""A"",DUZ,PRC(""SITE""),+Y,1))!($D(^(2)))"
"RTN","PRCSUT",131,0)
 I $D(PRC("CP")),PRC("CP"),$D(^PRC(420,PRC("SITE"),1,PRC("CP"))) S DIC("B")=+PRC("CP")
"RTN","PRCSUT",132,0)
 S D="B^C" D MIX^DIC1 S:Y<0 PRC("CP")="^"
"RTN","PRCSUT",133,0)
 I Y>0 S PRC("CP")=$P(Y(0),"^") I PRCIPFLG=1 D IP
"RTN","PRCSUT",134,0)
 K DIC
"RTN","PRCSUT",135,0)
 Q
"RTN","PRCSUT",136,0)
 ;
"RTN","PRCSUT",137,0)
 ;A=station #, B=fiscal year, C=fcp #, PRCA=1 if no user interactive
"RTN","PRCSUT",138,0)
BBFY(A,B,C,PRCA) ;extrinsic function of beginning budget fiscal year
"RTN","PRCSUT",139,0)
 N D,E,F,X,Y
"RTN","PRCSUT",140,0)
 K PRC("BBFY")
"RTN","PRCSUT",141,0)
 S E=$G(^PRC(420,A,1,+C,5))
"RTN","PRCSUT",142,0)
 I $P(E,"^")]"" S F=$O(^PRCD(420.3,"B",$P(E,"^"),"")) I F I $P(^PRCD(420.3,F,0),"^",8)="Y" S PRC("BBFY")=+$$DATE^PRC0C($P(E,"^",8),"I") QUIT PRC("BBFY")
"RTN","PRCSUT",143,0)
 S B=+$$YEAR^PRC0C(B)
"RTN","PRCSUT",144,0)
 S D=$$APP^PRC0C(A,$E(B,3,4),C)
"RTN","PRCSUT",145,0)
 I $P(D,"^")'["_/_" S PRC("BBFY")=B QUIT PRC("BBFY")
"RTN","PRCSUT",146,0)
 S F=$$BBFY^PRC0D(A,C,'$G(PRCA))
"RTN","PRCSUT",147,0)
 I F="",$G(PRCA)=1 S PRC("BBFY")=B QUIT PRC("BBFY")
"RTN","PRCSUT",148,0)
 I $G(PRCA)=1 S PRC("BBFY")=B-(B-$P(F,"~",2)#$P(F,"~",3)) QUIT PRC("BBFY")
"RTN","PRCSUT",149,0)
BBFY1 S E="^2:4^K:X'?2N&(X'?4N) X I $G(X)]"""" S X=+$$YEAR^PRC0C(X) K:X-$P(F,""~"",2)#$P(F,""~"",3) X"
"RTN","PRCSUT",150,0)
 S Y(1)="Enter a 2 or 4 digit year."
"RTN","PRCSUT",151,0)
 D FT^PRC0A(.X,.Y,"First Year of the Multi-Appropriation ("_$P(D,"^")_")",E,$S(F="":B,1:B-(B-$P(F,"~",2)#$P(F,"~",3))))
"RTN","PRCSUT",152,0)
 I Y?2.4N S Y=+$$YEAR^PRC0C(Y) I B<Y!(Y+$P(F,"~",3)-1<B) D EN^DDIOL("You must enter a BBFY such that the document's fiscal year is between"),EN^DDIOL("beginning and ending budget fiscal years") G BBFY1
"RTN","PRCSUT",153,0)
 S PRC("BBFY")=$S(Y?4N:Y,1:"")
"RTN","PRCSUT",154,0)
 QUIT PRC("BBFY")
"RTN","PRCSUT",155,0)
 ;
"RTN","PRCSUT",156,0)
CC ;SELECT COST CENTER
"RTN","PRCSUT",157,0)
 S DIC="^PRCD(420.1,",DIC(0)="AEMNQZ"
"RTN","PRCSUT",158,0)
 D ^DIC Q:Y<0
"RTN","PRCSUT",159,0)
 S PRCS("CC")=$P(Y(0),"^")
"RTN","PRCSUT",160,0)
 Q
"RTN","PRCSUT",161,0)
 ;
"RTN","PRCSUT",162,0)
SUB ;SELECT BOC
"RTN","PRCSUT",163,0)
 S DIC="^PRCD(420.2,",DIC(0)="AEMNQZ"
"RTN","PRCSUT",164,0)
 D ^DIC Q:Y<0
"RTN","PRCSUT",165,0)
 S PRCS("SUB")=$P(Y(0),"^")
"RTN","PRCSUT",166,0)
 Q
"RTN","PRCSUT",167,0)
 ;
"RTN","PRCSUT",168,0)
LOCK ;LOCK GLOBAL THAT IS BEING ACCESSED BY ANOTHER USER
"RTN","PRCSUT",169,0)
 L @("+"_DIC_DA_"):15")
"RTN","PRCSUT",170,0)
 S PRCSL=$T
"RTN","PRCSUT",171,0)
 W:$T=0 !!,$C(7),"Sorry, record is being accessed by another user.  Please try later."
"RTN","PRCSUT",172,0)
 Q
"RTN","PRCSUT",173,0)
 ;
"RTN","PRCSUT",174,0)
EX S Y=-1
"RTN","PRCSUT",175,0)
 K PRC("QTR"),PRC("FY"),PRC("BBFY"),SI
"RTN","PRCSUT",176,0)
 I $D(PRC("CP")) K:PRC("CP")="ALL"!(PRC("CP")="^") PRC("CP")
"RTN","PRCSUT",177,0)
EXIT K FYT,SI,PRCSK,QTT,DIC("A")
"RTN","PRCSUT",178,0)
 Q
"RTN","PRCSUT",179,0)
 ;
"RTN","PRCSUT",180,0)
NSCRNF(PRCIPFLG) ; Entry point for Inv. Pt. selection
"RTN","PRCSUT",181,0)
NSCRN ;STA,FY,QTR,CP
"RTN","PRCSUT",182,0)
 I '$G(PRCIPFLG) N:'$D(PRCIPFLG) PRCIPFLG S PRCIPFLG=0
"RTN","PRCSUT",183,0)
 D STA G EX:'SI!(Y<0)
"RTN","PRCSUT",184,0)
 D FY G EX:PRC("FY")="^"
"RTN","PRCSUT",185,0)
 D QT G EX:PRC("QTR")="^"
"RTN","PRCSUT",186,0)
 S PRCSC=4 D CPF^PRCSUT1(PRCIPFLG)
"RTN","PRCSUT",187,0)
 I '$D(PRCSC) D CPF(PRCIPFLG)
"RTN","PRCSUT",188,0)
 G EX:'SI!(Y<0)
"RTN","PRCSUT",189,0)
 G:'$$BBFY(PRC("SITE"),PRC("FY"),PRC("CP")) EX
"RTN","PRCSUT",190,0)
 QUIT
"RTN","PRCSUT",191,0)
 ;
"RTN","PRCSUT",192,0)
IP ; Get Inventory point
"RTN","PRCSUT",193,0)
 Q:'$D(PRC("SITE"))!('$D(PRC("CP")))
"RTN","PRCSUT",194,0)
 N CTR,I
"RTN","PRCSUT",195,0)
 K ^TMP($J,"PRCSUT")
"RTN","PRCSUT",196,0)
 S (CTR,I)=0,PRCSIP=""
"RTN","PRCSUT",197,0)
 F  S I=$O(^PRC(420,"AF",PRC("SITE"),+PRC("CP"),I)) Q:'I  S CTR=CTR+1,^TMP($J,"PRCSUT",CTR)=I_"^"_$P(^PRCP(445,I,0),"^")
"RTN","PRCSUT",198,0)
 I CTR=0 G IPQ
"RTN","PRCSUT",199,0)
 I CTR=1 S PRCSIP=$P(^TMP($J,"PRCSUT",1),"^") G IPQ
"RTN","PRCSUT",200,0)
 F I=1:1:CTR D  Q:$D(DIRUT)
"RTN","PRCSUT",201,0)
 .   W !,?5,I,") ",$P(^TMP($J,"PRCSUT",I),"^",2)
"RTN","PRCSUT",202,0)
 .   I I#(IOSL-2)=0 K DIR S DIR(0)="E" D ^DIR
"RTN","PRCSUT",203,0)
 S DIR(0)="NO^1:"_CTR_":0"
"RTN","PRCSUT",204,0)
 S DIR("A")="Select INVENTORY POINT"
"RTN","PRCSUT",205,0)
 S DIR("?",1)="Enter a number from 1 to "_CTR_" to select the displayed"
"RTN","PRCSUT",206,0)
 S DIR("?")="Inventory Point. This is an optional response."
"RTN","PRCSUT",207,0)
 D ^DIR K DIR
"RTN","PRCSUT",208,0)
 I Y>0 S PRCSIP=$P(^TMP($J,"PRCSUT",Y),"^") W "  ",$P(^TMP($J,"PRCSUT",Y),"^",2),!
"RTN","PRCSUT",209,0)
IPQ K ^TMP($J,"PRCSUT")
"RTN","PRCSUT",210,0)
 Q
"VER")
8.0^22.0
"BLD",4939,6)
^77
**END**
**END**

Released XU*8*236 SEQ #212
Extracted from mail message
**KIDS**:XU*8.0*236^

**INSTALL NAME**
XU*8.0*236
"BLD",577,0)
XU*8.0*236^KERNEL^0^3020613^y
"BLD",577,1,0)
^^2^2^3020523^
"BLD",577,1,1,0)
See patch XU*8*236 in the National Patch Module for complete information
"BLD",577,1,2,0)
on this patch.
"BLD",577,4,0)
^9.64PA^^0
"BLD",577,"INIT")
XUHUI236
"BLD",577,"KRN",0)
^9.67PA^8989.52^20
"BLD",577,"KRN",.4,0)
.4
"BLD",577,"KRN",.401,0)
.401
"BLD",577,"KRN",.402,0)
.402
"BLD",577,"KRN",.403,0)
.403
"BLD",577,"KRN",.5,0)
.5
"BLD",577,"KRN",.84,0)
.84
"BLD",577,"KRN",3.6,0)
3.6
"BLD",577,"KRN",3.8,0)
3.8
"BLD",577,"KRN",3.8,"NM",0)
^9.68A^1^1
"BLD",577,"KRN",3.8,"NM",1,0)
XUHUI CHANGE EVENT^^0
"BLD",577,"KRN",3.8,"NM","B","XUHUI CHANGE EVENT",1)

"BLD",577,"KRN",9.2,0)
9.2
"BLD",577,"KRN",9.8,0)
9.8
"BLD",577,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",577,"KRN",9.8,"NM",1,0)
XUHUI^^0^B7548970
"BLD",577,"KRN",9.8,"NM",2,0)
XUHUIMSG^^0^B4227271
"BLD",577,"KRN",9.8,"NM","B","XUHUI",1)

"BLD",577,"KRN",9.8,"NM","B","XUHUIMSG",2)

"BLD",577,"KRN",19,0)
19
"BLD",577,"KRN",19.1,0)
19.1
"BLD",577,"KRN",101,0)
101
"BLD",577,"KRN",101,"NM",0)
^9.68A^2^2
"BLD",577,"KRN",101,"NM",1,0)
XUHUI FIELD CHANGE EVENT^^0
"BLD",577,"KRN",101,"NM",2,0)
XUHUI SEND MESSAGE^^0
"BLD",577,"KRN",101,"NM","B","XUHUI FIELD CHANGE EVENT",1)

"BLD",577,"KRN",101,"NM","B","XUHUI SEND MESSAGE",2)

"BLD",577,"KRN",409.61,0)
409.61
"BLD",577,"KRN",771,0)
771
"BLD",577,"KRN",870,0)
870
"BLD",577,"KRN",8989.51,0)
8989.51
"BLD",577,"KRN",8989.52,0)
8989.52
"BLD",577,"KRN",8994,0)
8994
"BLD",577,"KRN",8994.2,0)
8994.2
"BLD",577,"KRN","B",.4,.4)

"BLD",577,"KRN","B",.401,.401)

"BLD",577,"KRN","B",.402,.402)

"BLD",577,"KRN","B",.403,.403)

"BLD",577,"KRN","B",.5,.5)

"BLD",577,"KRN","B",.84,.84)

"BLD",577,"KRN","B",3.6,3.6)

"BLD",577,"KRN","B",3.8,3.8)

"BLD",577,"KRN","B",9.2,9.2)

"BLD",577,"KRN","B",9.8,9.8)

"BLD",577,"KRN","B",19,19)

"BLD",577,"KRN","B",19.1,19.1)

"BLD",577,"KRN","B",101,101)

"BLD",577,"KRN","B",409.61,409.61)

"BLD",577,"KRN","B",771,771)

"BLD",577,"KRN","B",870,870)

"BLD",577,"KRN","B",8989.51,8989.51)

"BLD",577,"KRN","B",8989.52,8989.52)

"BLD",577,"KRN","B",8994,8994)

"BLD",577,"KRN","B",8994.2,8994.2)

"BLD",577,"QUES",0)
^9.62^^
"INIT")
XUHUI236
"KRN",3.8,15,-1)
0^1
"KRN",3.8,15,0)
XUHUI CHANGE EVENT^PU^^^^^
"KRN",3.8,15,2,0)
^3.801^3^3^3020529^^^
"KRN",3.8,15,2,1,0)
This is the mail group that will receive messages from the HUI event of 
"KRN",3.8,15,2,2,0)
changes either to New Person record for a Provider or if the Provider key 
"KRN",3.8,15,2,3,0)
is allocated or de-allocated.
"KRN",101,347,-1)
0^1
"KRN",101,347,0)
XUHUI FIELD CHANGE EVENT^Field Change Event^^X^^^^^^^^
"KRN",101,347,1,0)
^101.06^2^2^3020610^^^
"KRN",101,347,1,1,0)
This is used to launch, in the backgound, the protocols that are listed in
"KRN",101,347,1,2,0)
the ITEM multiple.  Called from routine: DEQUE^XUHUI.
"KRN",101,347,10,0)
^101.01PA^2^2
"KRN",101,347,10,1,0)
350^^^
"KRN",101,347,10,1,"^")
XUHUI SEND MESSAGE
"KRN",101,347,15)

"KRN",101,347,99)
58965,44476
"KRN",101,350,-1)
0^2
"KRN",101,350,0)
XUHUI SEND MESSAGE^Send Notification Message^^A^^^^^^^^
"KRN",101,350,1,0)
^101.06^2^2^3020610^^^
"KRN",101,350,1,1,0)
This Action protocol is used to send a mail message to Members of
"KRN",101,350,1,2,0)
Group: XUHUI CHANGE EVENT.
"KRN",101,350,20)
D ^XUHUIMSG
"KRN",101,350,99)
58946,42897
"MBREQ")
0
"ORD",11,3.8)
3.8;11;;;MAILG^XPDTA1;MAILGF1^XPDIA1;MAILGE1^XPDIA1;MAILGF2^XPDIA1
"ORD",11,3.8,0)
MAIL GROUP
"ORD",15,101)
101;15;;;PRO^XPDTA;PROF1^XPDIA;PROE1^XPDIA;PROF2^XPDIA;;PRODEL^XPDIA
"ORD",15,101,0)
PROTOCOL
"PKG",3,-1)
1^1
"PKG",3,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",3,20,0)
^9.402P^^0
"PKG",3,22,0)
^9.49I^1^1
"PKG",3,22,1,0)
8.0^2950703^2970507^.5
"PKG",3,22,1,"PAH",1,0)
236^3020613
"PKG",3,22,1,"PAH",1,1,0)
^^2^2^3020613
"PKG",3,22,1,"PAH",1,1,1,0)
See patch XU*8*236 in the National Patch Module for complete information
"PKG",3,22,1,"PAH",1,1,2,0)
on this patch.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","XUHUI")
0^1^B7548970
"RTN","XUHUI",1,0)
XUHUI ;SFISC/SO-Main Field Event Trigger Routine ;6:41 AM  13 Jun 2002
"RTN","XUHUI",2,0)
 ;;8.0;KERNEL;**236**;Jul 10, 1995
"RTN","XUHUI",3,0)
 ;This routine comprised three(3) entry points:
"RTN","XUHUI",4,0)
 ;HUI(), HUIKEY(), and OPKG()
"RTN","XUHUI",5,0)
 ;
"RTN","XUHUI",6,0)
 ;PCHK1: Is the business rules check used for the top level for file
"RTN","XUHUI",7,0)
 ;#200, called from AXUHUI xref.
"RTN","XUHUI",8,0)
 ;
"RTN","XUHUI",9,0)
 ;PCHK2: Is the business rules check ussed for the KEYS multiple
"RTN","XUHUI",10,0)
 ;sub-file #200.051
"RTN","XUHUI",11,0)
 ;
"RTN","XUHUI",12,0)
 ;GETVAR: Sets up the variables that are passed thru
"RTN","XUHUI",13,0)
 ;TaskMan to the various options that are to be unwound.
"RTN","XUHUI",14,0)
 ;
"RTN","XUHUI",15,0)
 ;TASK: Sets up the variable list that is to be passed
"RTN","XUHUI",16,0)
 ;thru TaskMan and tasks the job.
"RTN","XUHUI",17,0)
 ;
"RTN","XUHUI",18,0)
 ;CLEAN: Kills any Name Spaced variables that are not implisivly Newed
"RTN","XUHUI",19,0)
 ;
"RTN","XUHUI",20,0)
HUI(XUHUIOP,XUHUINM,XUHUIA,XUHUIXR) ;This is the HUI Entry Point
"RTN","XUHUI",21,0)
 ;XUHUIOP tells the Unwinder to use either 101 for Protocol file or
"RTN","XUHUI",22,0)
 ; 19 for Option file, default = 101
"RTN","XUHUI",23,0)
 ;XUHUINM is the Name(#.01) value of the option to launched
"RTN","XUHUI",24,0)
 ;XUHUIA is a code S = Set xref; K = Kill xref; default = S
"RTN","XUHUI",25,0)
 ;XUHUIXR is the name of the xref
"RTN","XUHUI",26,0)
 ;
"RTN","XUHUI",27,0)
 N ESC S ESC=0
"RTN","XUHUI",28,0)
 D PCHK1 Q:ESC
"RTN","XUHUI",29,0)
 D GETVAR
"RTN","XUHUI",30,0)
 D TASK
"RTN","XUHUI",31,0)
 D CLEAN
"RTN","XUHUI",32,0)
 Q
"RTN","XUHUI",33,0)
 ;
"RTN","XUHUI",34,0)
GETVAR ; Get the variables that are to be passed via Taskman
"RTN","XUHUI",35,0)
 S XUHUIFIL=DIFILE ;File #, IA #3586
"RTN","XUHUI",36,0)
 I $D(DIFLD) M XUHUIFLD=DIFLD ;Field #, IA# 3586
"RTN","XUHUI",37,0)
 I '$D(DIFLD) S XUHUIFLD=""
"RTN","XUHUI",38,0)
 S XUHUIXR=$G(XUHUIXR)
"RTN","XUHUI",39,0)
 M XUHUIDA=DA ;IEN(s) of record, IA# 3586
"RTN","XUHUI",40,0)
 M XUHUIX=X ;New Style 'X' array
"RTN","XUHUI",41,0)
 M XUHUIX1=X1
"RTN","XUHUI",42,0)
 M XUHUIX2=X2
"RTN","XUHUI",43,0)
 Q
"RTN","XUHUI",44,0)
 ;
"RTN","XUHUI",45,0)
TASK ;Creat a task
"RTN","XUHUI",46,0)
 N ZTSAVE,ZTDTH,ZTIO,ZTRTN,ZTDESC,ZTREQ
"RTN","XUHUI",47,0)
 S XUHUIA=$S('$D(XUHUIA):"S",XUHUIA="":"S",1:XUHUIA)
"RTN","XUHUI",48,0)
 S ZTSAVE("XUHUIA")=""
"RTN","XUHUI",49,0)
 S ZTSAVE("XUHUIFIL")=""
"RTN","XUHUI",50,0)
 S ZTSAVE("XUHUIFLD")=""
"RTN","XUHUI",51,0)
 S ZTSAVE("XUHUIXR")=""
"RTN","XUHUI",52,0)
 S ZTSAVE("XUHUIDA*")=""
"RTN","XUHUI",53,0)
 S ZTSAVE("XUHUIX*")=""
"RTN","XUHUI",54,0)
 S ZTSAVE("XUHUINM")="" ;Name of top level Protocol or Option
"RTN","XUHUI",55,0)
 S XUHUIOP=$S('$D(XUHUIOP):101,XUHUIOP="":101,1:XUHUIOP)
"RTN","XUHUI",56,0)
 S ZTSAVE("XUHUIOP")=""
"RTN","XUHUI",57,0)
 S ZTDTH=$H,ZTIO="",ZTRTN="DEQUE^XUHUI",ZTREQ="@"
"RTN","XUHUI",58,0)
 S ZTDESC="TASKED FIELD CHANGED EVENT ("_$S(XUHUIA="S":"SET)",1:"KILL)")
"RTN","XUHUI",59,0)
 D ^%ZTLOAD
"RTN","XUHUI",60,0)
 Q
"RTN","XUHUI",61,0)
 ;
"RTN","XUHUI",62,0)
DEQUE ;From: TaskMan
"RTN","XUHUI",63,0)
 S X=XUHUINM
"RTN","XUHUI",64,0)
 S DIC=$S(XUHUIOP=101:"^ORD(101,",XUHUIOP=19:"^DIC(19,",1:"")
"RTN","XUHUI",65,0)
 D EN^XQOR
"RTN","XUHUI",66,0)
 D CLEAN ; Kill off XUHUI* variables that are passed via Taskman
"RTN","XUHUI",67,0)
 Q
"RTN","XUHUI",68,0)
 ;
"RTN","XUHUI",69,0)
HUIKEY(XUHUIOP,XUHUINM,XUHUIA,XUHUIXR) ;HUI Key check Entry Point
"RTN","XUHUI",70,0)
 ;XUHUIOP tells the Unwinder to use either 101 for Protocol file or
"RTN","XUHUI",71,0)
 ; 19 for Option file, default = 101
"RTN","XUHUI",72,0)
 ;XUHUINM is the Name(#.01) value of the option to launched
"RTN","XUHUI",73,0)
 ;XUHUIA is a code S = Set xref; K = Kill xref; default = S
"RTN","XUHUI",74,0)
 ;XUHUIXR is the name of the xref
"RTN","XUHUI",75,0)
 N ESC S ESC=0
"RTN","XUHUI",76,0)
 D PCHK2 Q:ESC
"RTN","XUHUI",77,0)
 D GETVAR
"RTN","XUHUI",78,0)
 D TASK
"RTN","XUHUI",79,0)
 D CLEAN
"RTN","XUHUI",80,0)
 Q
"RTN","XUHUI",81,0)
 ;
"RTN","XUHUI",82,0)
OPKG(XUHUIOP,XUHUINM,XUHUIA,XUHUIXR) ;All Other Package Entry Point
"RTN","XUHUI",83,0)
 ;XUHUIOP tells the Unwinder to use either 101 for Protocol file or
"RTN","XUHUI",84,0)
 ; 19 for Option file, default = 101
"RTN","XUHUI",85,0)
 ;XUHUINM is the Name(#.01) value of the option to launched
"RTN","XUHUI",86,0)
 ;XUHUIA is a code S = Set xref; K = Kill xref; default = S
"RTN","XUHUI",87,0)
 ;XUHUIXR is the name of the xref
"RTN","XUHUI",88,0)
 D GETVAR
"RTN","XUHUI",89,0)
 D TASK
"RTN","XUHUI",90,0)
 D CLEAN
"RTN","XUHUI",91,0)
 Q
"RTN","XUHUI",92,0)
 ;
"RTN","XUHUI",93,0)
PCHK1 ;
"RTN","XUHUI",94,0)
 I '$D(^XUSEC("PROVIDER",DA))#2 S ESC=1 Q  ;User is not a Provider
"RTN","XUHUI",95,0)
 Q
"RTN","XUHUI",96,0)
 ;
"RTN","XUHUI",97,0)
PCHK2 ;
"RTN","XUHUI",98,0)
 I $P(^DIC(19.1,DA,0),"^")'="PROVIDER" S ESC=1 Q  ;Key Not the PROVIDER key
"RTN","XUHUI",99,0)
 Q
"RTN","XUHUI",100,0)
 ;
"RTN","XUHUI",101,0)
CLEAN ;Kill of XUHUI variables
"RTN","XUHUI",102,0)
 K XUHUIFIL,XUHUIFLD,XUHUIDA,XUHUIX,XUHUIX1,XUHUIX2
"RTN","XUHUI",103,0)
 Q
"RTN","XUHUI236")
0^^B25961038
"RTN","XUHUI236",1,0)
XUHUI236 ;SFISC/SO- Post Install for Patch 236, Install Xrefs ;1:40 PM  7 Jun 2002
"RTN","XUHUI236",2,0)
 ;;8.0;KERNEL;**236**;Jul 10, 1995
"RTN","XUHUI236",3,0)
 ;START - IA #3591
"RTN","XUHUI236",4,0)
 D HUI200
"RTN","XUHUI236",5,0)
 D HUIKEY
"RTN","XUHUI236",6,0)
 Q
"RTN","XUHUI236",7,0)
 ;
"RTN","XUHUI236",8,0)
HUI200 ;INSTALL 'AXUHUI' CROSS-REFERENCE
"RTN","XUHUI236",9,0)
 N HUIFDA,HUIERR,HUIWP
"RTN","XUHUI236",10,0)
 S X="Adding 'AXUHUI' new style cross-reference..." D MES^XPDUTL(X)
"RTN","XUHUI236",11,0)
 S HUIFDA(.11,"+1,",.01)=200 ;FILE NUMBER
"RTN","XUHUI236",12,0)
 S HUIFDA(.11,"+1,",.02)="AXUHUI" ;X-REF NAME
"RTN","XUHUI236",13,0)
 S HUIFDA(.11,"+1,",.11)="Hui Project Top File Xref" ;SHORT DESC.
"RTN","XUHUI236",14,0)
 S HUIFDA(.11,"+1,",.2)="MU" ;TYPE
"RTN","XUHUI236",15,0)
 S HUIFDA(.11,"+1,",.4)="R" ;EXECUTION
"RTN","XUHUI236",16,0)
 S HUIFDA(.11,"+1,",.5)="I" ;ROOT TYPE
"RTN","XUHUI236",17,0)
 S HUIFDA(.11,"+1,",.51)=200 ;ROOT FILE
"RTN","XUHUI236",18,0)
 S HUIFDA(.11,"+1,",.42)="A" ;USE
"RTN","XUHUI236",19,0)
 S HUIFDA(.11,"+1,",1.1)="D HUI^XUHUI("""",""XUHUI FIELD CHANGE EVENT"","""",""AXUHUI"") Q" ;SET LOGIC
"RTN","XUHUI236",20,0)
 S HUIFDA(.11,"+1,",2.1)="Q" ;KILL LOGIC
"RTN","XUHUI236",21,0)
 S HUIFDA(.11,"+1,",2.5)="Q" ;WHOLE FILE KILL
"RTN","XUHUI236",22,0)
 ;
"RTN","XUHUI236",23,0)
 ; CROSS REFERENCE VALUES
"RTN","XUHUI236",24,0)
 ;===========================================
"RTN","XUHUI236",25,0)
 S HUIFDA(.114,"+2,+1,",.01)=1 ;ORDER NUMBER
"RTN","XUHUI236",26,0)
 S HUIFDA(.114,"+2,+1,",1)="F" ;TYPE OF VALUE
"RTN","XUHUI236",27,0)
 S HUIFDA(.114,"+2,+1,",2)=200 ;FILE NUMBER
"RTN","XUHUI236",28,0)
 S HUIFDA(.114,"+2,+1,",3)=.01 ;FIELD NUMBER
"RTN","XUHUI236",29,0)
 S HUIFDA(.114,"+2,+1,",7)="F" ;COLLATION
"RTN","XUHUI236",30,0)
 ;===========================================
"RTN","XUHUI236",31,0)
 S HUIFDA(.114,"+3,+1,",.01)=2 ;ORDER NUMBER
"RTN","XUHUI236",32,0)
 S HUIFDA(.114,"+3,+1,",1)="F" ;TYPE OF VALUE
"RTN","XUHUI236",33,0)
 S HUIFDA(.114,"+3,+1,",2)=200 ;FILE NUMBER
"RTN","XUHUI236",34,0)
 S HUIFDA(.114,"+3,+1,",3)=9.2 ;FIELD NUMBER
"RTN","XUHUI236",35,0)
 S HUIFDA(.114,"+3,+1,",7)="F" ;COLLATION
"RTN","XUHUI236",36,0)
 ;===========================================
"RTN","XUHUI236",37,0)
 S HUIFDA(.114,"+4,+1,",.01)=3 ;ORDER NUMBER
"RTN","XUHUI236",38,0)
 S HUIFDA(.114,"+4,+1,",1)="F" ;TYPE OF VALUE
"RTN","XUHUI236",39,0)
 S HUIFDA(.114,"+4,+1,",2)=200 ;FILE NUMBER
"RTN","XUHUI236",40,0)
 S HUIFDA(.114,"+4,+1,",3)=5 ;FIELD NUMBER
"RTN","XUHUI236",41,0)
 S HUIFDA(.114,"+4,+1,",7)="F" ;COLLATION
"RTN","XUHUI236",42,0)
 ;==========================================
"RTN","XUHUI236",43,0)
 S HUIFDA(.114,"+5,+1,",.01)=4 ;ORDER NUMBER
"RTN","XUHUI236",44,0)
 S HUIFDA(.114,"+5,+1,",1)="F" ;TYPE OF VALUE
"RTN","XUHUI236",45,0)
 S HUIFDA(.114,"+5,+1,",2)=200 ;FILE NUMBER
"RTN","XUHUI236",46,0)
 S HUIFDA(.114,"+5,+1,",3)=9 ;FIELD NUMBER
"RTN","XUHUI236",47,0)
 S HUIFDA(.114,"+5,+1,",7)="F" ;COLLATION
"RTN","XUHUI236",48,0)
 D UPDATE^DIE("","HUIFDA","","HUIERR")
"RTN","XUHUI236",49,0)
 I $D(DIERR) D ERR Q
"RTN","XUHUI236",50,0)
 ;SET DESCRIPTION ARRAY
"RTN","XUHUI236",51,0)
 N VAL,HUIIEN
"RTN","XUHUI236",52,0)
 S VAL(1)=200,VAL(2)="AXUHUI"
"RTN","XUHUI236",53,0)
 S HUIIEN=$$FIND1^DIC(.11,"","X",.VAL,"BB","","HUIERR")
"RTN","XUHUI236",54,0)
 I $D(DIERR) D ERR Q
"RTN","XUHUI236",55,0)
 S HUIWP(1)="This new style cross-reference is on non-multiple fields that the Hui"
"RTN","XUHUI236",56,0)
 S HUIWP(2)="project want to monitor for a change in value (Patch XU*8*236). The"
"RTN","XUHUI236",57,0)
 S HUIWP(3)="following fields are being monitored in order:"
"RTN","XUHUI236",58,0)
 S HUIWP(4)=" "
"RTN","XUHUI236",59,0)
 S HUIWP(5)=" .01 (NAME)"
"RTN","XUHUI236",60,0)
 S HUIWP(6)=" 9.2 (TERMINATION DATE)"
"RTN","XUHUI236",61,0)
 S HUIWP(7)=" 5 (DOB)"
"RTN","XUHUI236",62,0)
 S HUIWP(8)=" 9 (SSN)"
"RTN","XUHUI236",63,0)
 D WP^DIE(.11,HUIIEN_",",.1,"","HUIWP") ;LONG DESCRIPTION
"RTN","XUHUI236",64,0)
 S X="Finished adding 'AXUHUI' cross-reverence." D MES^XPDUTL(X)
"RTN","XUHUI236",65,0)
 S X="Updating any Triggers for cross-reference 'AXUHUI'..." D MES^XPDUTL(X)
"RTN","XUHUI236",66,0)
 N XR
"RTN","XUHUI236",67,0)
 S XR(200,.01)="" ;Name
"RTN","XUHUI236",68,0)
 S XR(200,9.2)="" ;Termination Date
"RTN","XUHUI236",69,0)
 S XR(200,5)="" ;Date Of Birth
"RTN","XUHUI236",70,0)
 S XR(200,9)="" ;SSN
"RTN","XUHUI236",71,0)
 D TRIG^DICR(.XR) ;IA# 3405
"RTN","XUHUI236",72,0)
 S X="Finished Updating any Trigers for cross-reference 'AXUHUI'." D MES^XPDUTL(X)
"RTN","XUHUI236",73,0)
 Q
"RTN","XUHUI236",74,0)
 ;
"RTN","XUHUI236",75,0)
HUIKEY ;INSTALL 'AXUHUIKEY' CROSS-REFERENCE
"RTN","XUHUI236",76,0)
 N HUIFDA,HUIERR,HUIWP
"RTN","XUHUI236",77,0)
 S X="Adding 'AXUHUIKEY' new style cross-reference..." D MES^XPDUTL(X)
"RTN","XUHUI236",78,0)
 S HUIFDA(.11,"+1,",.01)=200 ;FILE NUMBER
"RTN","XUHUI236",79,0)
 S HUIFDA(.11,"+1,",.02)="AXUHUIKEY" ;X-REF NAME
"RTN","XUHUI236",80,0)
 S HUIFDA(.11,"+1,",.11)="HUI key xref" ;SHORT DESC.
"RTN","XUHUI236",81,0)
 S HUIFDA(.11,"+1,",.2)="MU" ;TYPE
"RTN","XUHUI236",82,0)
 S HUIFDA(.11,"+1,",.4)="R" ;EXECUTION
"RTN","XUHUI236",83,0)
 S HUIFDA(.11,"+1,",.5)="W" ;ROOT TYPE
"RTN","XUHUI236",84,0)
 S HUIFDA(.11,"+1,",.51)=200.051 ;ROOT FILE
"RTN","XUHUI236",85,0)
 S HUIFDA(.11,"+1,",.42)="A" ;USE
"RTN","XUHUI236",86,0)
 S HUIFDA(.11,"+1,",1.1)="D HUIKEY^XUHUI("""",""XUHUI FIELD CHANGE EVENT"","""",""AXUHUIKEY"") Q" ;SET LOGIC
"RTN","XUHUI236",87,0)
 S HUIFDA(.11,"+1,",2.1)="D HUIKEY^XUHUI("""",""XUHUI FIELD CHANGE EVENT"",""K"",""AXUHUIKEY"") Q" ;KILL LOGIC
"RTN","XUHUI236",88,0)
 S HUIFDA(.11,"+1,",2.5)="Q" ;WHOLE FILE KILL
"RTN","XUHUI236",89,0)
 ;
"RTN","XUHUI236",90,0)
 ;CROSS REFERENCE VALUES
"RTN","XUHUI236",91,0)
 ;=================================================
"RTN","XUHUI236",92,0)
 S HUIFDA(.114,"+2,+1,",.01)=1 ;ORDER NUMBER
"RTN","XUHUI236",93,0)
 S HUIFDA(.114,"+2,+1,",1)="F" ;TYPE OF VALUE
"RTN","XUHUI236",94,0)
 S HUIFDA(.114,"+2,+1,",2)=200.051 ;FILE NUMBER
"RTN","XUHUI236",95,0)
 S HUIFDA(.114,"+2,+1,",3)=.01 ;FIELD NUMBER
"RTN","XUHUI236",96,0)
 S HUIFDA(.114,"+2,+1,",7)="F" ;COLLATION
"RTN","XUHUI236",97,0)
 ;
"RTN","XUHUI236",98,0)
 ;FILE THE 'AXUHUIKEY' XREF
"RTN","XUHUI236",99,0)
 D UPDATE^DIE("","HUIFDA","","HUIERR")
"RTN","XUHUI236",100,0)
 I $D(DIERR) D ERR Q
"RTN","XUHUI236",101,0)
 ;SET DESCRIPTION ARRAY
"RTN","XUHUI236",102,0)
 N VAL,HUIIEN
"RTN","XUHUI236",103,0)
 S VAL(1)=200,VAL(2)="AXUHUIKEY"
"RTN","XUHUI236",104,0)
 S HUIIEN=$$FIND1^DIC(.11,"","X",.VAL,"BB","","HUIERR")
"RTN","XUHUI236",105,0)
 I $D(DIERR) D ERR Q
"RTN","XUHUI236",106,0)
 S HUIWP(1)="This new style cross-reference is on the multiple: 'KEYS' so the Hui"
"RTN","XUHUI236",107,0)
 S HUIWP(2)="project can monitor the allocation/de-allocation of the 'PROVIDER'"
"RTN","XUHUI236",108,0)
 S HUIWP(3)="key."
"RTN","XUHUI236",109,0)
 D WP^DIE(.11,HUIIEN_",",.1,"","HUIWP") ;LONG DESCRIPTION
"RTN","XUHUI236",110,0)
 S X="Finished adding 'AXUHUIKEY' new style cross-reference." D MES^XPDUTL(X)
"RTN","XUHUI236",111,0)
 S X="Updating any triggers for new style cross-reference 'AXUHUIKEY'." D MES^XPDUTL(X)
"RTN","XUHUI236",112,0)
 N XR
"RTN","XUHUI236",113,0)
 S XR(200.051,.01)="" ;Name
"RTN","XUHUI236",114,0)
 D TRIG^DICR(.XR) ;IA #3405
"RTN","XUHUI236",115,0)
 S X="Finished updating triggers for 'AXUHUIKEY' cross-reference." D MES^XPDUTL(X)
"RTN","XUHUI236",116,0)
 S X="Post installed finished." D MES^XPDUTL(X)
"RTN","XUHUI236",117,0)
 Q
"RTN","XUHUI236",118,0)
 ;
"RTN","XUHUI236",119,0)
ERR ;ERROR PROCESSING
"RTN","XUHUI236",120,0)
 N I S I=""
"RTN","XUHUI236",121,0)
 F  S I=$O(HUIERR("DIERR",1,"TEXT",I)) Q:I=""  D
"RTN","XUHUI236",122,0)
 . D MES^XPDUTL(HUIERR("DIERR",1,"TEXT",I))
"RTN","XUHUI236",123,0)
 D CLEAN^DILF
"RTN","XUHUI236",124,0)
 Q
"RTN","XUHUIMSG")
0^2^B4227271
"RTN","XUHUIMSG",1,0)
XUHUIMSG ;SFISC/SO- Create Mail Message Of Change ;6:27 AM  10 Jun 2002
"RTN","XUHUIMSG",2,0)
 ;;8.0;KERNEL;**236**;Jul 10, 1995
"RTN","XUHUIMSG",3,0)
 I XUHUIXR="AXUHUI" D M200 Q
"RTN","XUHUIMSG",4,0)
 D MKEY
"RTN","XUHUIMSG",5,0)
 Q
"RTN","XUHUIMSG",6,0)
 ;
"RTN","XUHUIMSG",7,0)
M200 ; Build message for top level file 200 stuff
"RTN","XUHUIMSG",8,0)
 N I,MTEXT,SUBJ
"RTN","XUHUIMSG",9,0)
 S I=1,MTEXT=""
"RTN","XUHUIMSG",10,0)
 S MTEXT(I)=" ",I=I+1
"RTN","XUHUIMSG",11,0)
 S MTEXT(I)="Event Change - Name or Termination Date or DOB or SSN or several of these.",I=I+1
"RTN","XUHUIMSG",12,0)
 S MTEXT(I)=" ",I=I+1
"RTN","XUHUIMSG",13,0)
 S MTEXT(I)="Orginal Name: "_XUHUIX1,I=I+1
"RTN","XUHUIMSG",14,0)
 S MTEXT(I)=" ",I=I+1
"RTN","XUHUIMSG",15,0)
 S MTEXT(I)="Old Name: "_XUHUIX1(1)_"  New Name: "_XUHUIX2(1),I=I+1
"RTN","XUHUIMSG",16,0)
 S MTEXT(I)="Old Termination Date: "_XUHUIX1(2)_"  New Termination Date: "_XUHUIX2(2),I=I+1
"RTN","XUHUIMSG",17,0)
 S MTEXT(I)="Old DOB: "_XUHUIX1(3)_"  New DOB: "_XUHUIX2(3),I=I+1
"RTN","XUHUIMSG",18,0)
 S MTEXT(I)="Old SSN: "_XUHUIX1(4)_"  New SSN: "_XUHUIX2(4)
"RTN","XUHUIMSG",19,0)
 S SUBJ="Hui Change Event (New Person)"
"RTN","XUHUIMSG",20,0)
 D SENDIT
"RTN","XUHUIMSG",21,0)
 Q
"RTN","XUHUIMSG",22,0)
 ;
"RTN","XUHUIMSG",23,0)
MKEY ; Build message for Provider Key change of status
"RTN","XUHUIMSG",24,0)
 N MTEXT,I,SUBJ,NAME,SSN
"RTN","XUHUIMSG",25,0)
 S I=1,MTEXT=""
"RTN","XUHUIMSG",26,0)
 S MTEXT(I)=" ",I=I+1
"RTN","XUHUIMSG",27,0)
 D CLEAN^DILF
"RTN","XUHUIMSG",28,0)
 S NAME=$$GET1^DIQ(200,XUHUIDA(1)_",","NAME")
"RTN","XUHUIMSG",29,0)
 S SSN=$$GET1^DIQ(200,XUHUIDA(1)_",","SSN")
"RTN","XUHUIMSG",30,0)
 D CLEAN^DILF
"RTN","XUHUIMSG",31,0)
 S MTEXT(I)="Name: "_NAME_"  SSN: "_SSN,I=I+1
"RTN","XUHUIMSG",32,0)
 D CLEAN^DILF
"RTN","XUHUIMSG",33,0)
 I $P(^DIC(19.1,XUHUIX,0),U)="PROVIDER" S MTEXT(I)="Provider Key: "_$S(XUHUIA="S":"Allocated",1:"De-allocated")
"RTN","XUHUIMSG",34,0)
 S SUBJ="Hui Change Event (Provider Key)"
"RTN","XUHUIMSG",35,0)
 D SENDIT
"RTN","XUHUIMSG",36,0)
 Q
"RTN","XUHUIMSG",37,0)
 ;
"RTN","XUHUIMSG",38,0)
SENDIT ; Send the message
"RTN","XUHUIMSG",39,0)
 ; Test to see if there are MEMBERS to prevent Unreferenced message
"RTN","XUHUIMSG",40,0)
 I '$$GOTLOCAL^XMXAPIG("XUHUI CHANGE EVENT") Q  ;Mail Group Has No Members
"RTN","XUHUIMSG",41,0)
 ; Mail Group Has Memebers so send the message
"RTN","XUHUIMSG",42,0)
 D SENDMSG^XMXAPI(DUZ,SUBJ,"MTEXT","G.XUHUI CHANGE EVENT")
"RTN","XUHUIMSG",43,0)
 Q
"VER")
8.0^22.0
**END**
**END**

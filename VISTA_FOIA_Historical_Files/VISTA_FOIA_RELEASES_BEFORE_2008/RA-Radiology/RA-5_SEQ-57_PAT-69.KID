Released RA*5*69 SEQ #57
Extracted from mail message
**KIDS**:RA*5.0*69^

**INSTALL NAME**
RA*5.0*69
"BLD",5949,0)
RA*5.0*69^RADIOLOGY/NUCLEAR MEDICINE^0^3060120^y
"BLD",5949,1,0)
^^2^2^3060120^
"BLD",5949,1,1,0)
RADIOLOGY REJECTS ORDER FROM CPRS/CPT CODE DISPLAY ISSUE ON PROC-CPT 
"BLD",5949,1,2,0)
REPORT
"BLD",5949,4,0)
^9.64PA^^
"BLD",5949,6.3)
3
"BLD",5949,"KRN",0)
^9.67PA^8989.52^19
"BLD",5949,"KRN",.4,0)
.4
"BLD",5949,"KRN",.401,0)
.401
"BLD",5949,"KRN",.402,0)
.402
"BLD",5949,"KRN",.403,0)
.403
"BLD",5949,"KRN",.5,0)
.5
"BLD",5949,"KRN",.84,0)
.84
"BLD",5949,"KRN",3.6,0)
3.6
"BLD",5949,"KRN",3.8,0)
3.8
"BLD",5949,"KRN",9.2,0)
9.2
"BLD",5949,"KRN",9.8,0)
9.8
"BLD",5949,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",5949,"KRN",9.8,"NM",1,0)
RAO7RON1^^0^16218705
"BLD",5949,"KRN",9.8,"NM",2,0)
RACPT1^^0^19705347
"BLD",5949,"KRN",9.8,"NM","B","RACPT1",2)

"BLD",5949,"KRN",9.8,"NM","B","RAO7RON1",1)

"BLD",5949,"KRN",19,0)
19
"BLD",5949,"KRN",19.1,0)
19.1
"BLD",5949,"KRN",101,0)
101
"BLD",5949,"KRN",409.61,0)
409.61
"BLD",5949,"KRN",771,0)
771
"BLD",5949,"KRN",870,0)
870
"BLD",5949,"KRN",8989.51,0)
8989.51
"BLD",5949,"KRN",8989.52,0)
8989.52
"BLD",5949,"KRN",8994,0)
8994
"BLD",5949,"KRN","B",.4,.4)

"BLD",5949,"KRN","B",.401,.401)

"BLD",5949,"KRN","B",.402,.402)

"BLD",5949,"KRN","B",.403,.403)

"BLD",5949,"KRN","B",.5,.5)

"BLD",5949,"KRN","B",.84,.84)

"BLD",5949,"KRN","B",3.6,3.6)

"BLD",5949,"KRN","B",3.8,3.8)

"BLD",5949,"KRN","B",9.2,9.2)

"BLD",5949,"KRN","B",9.8,9.8)

"BLD",5949,"KRN","B",19,19)

"BLD",5949,"KRN","B",19.1,19.1)

"BLD",5949,"KRN","B",101,101)

"BLD",5949,"KRN","B",409.61,409.61)

"BLD",5949,"KRN","B",771,771)

"BLD",5949,"KRN","B",870,870)

"BLD",5949,"KRN","B",8989.51,8989.51)

"BLD",5949,"KRN","B",8989.52,8989.52)

"BLD",5949,"KRN","B",8994,8994)

"BLD",5949,"QUES",0)
^9.62^^
"BLD",5949,"REQB",0)
^9.611^1^1
"BLD",5949,"REQB",1,0)
RA*5.0*26^1
"BLD",5949,"REQB","B","RA*5.0*26",1)

"MBREQ")
0
"PKG",18,-1)
1^1
"PKG",18,0)
RADIOLOGY/NUCLEAR MEDICINE^RA^REGISTERS PATIENTS,RECORDS EXAMS,PROFILES,AMIS REPORTS
"PKG",18,20,0)
^9.402P^^
"PKG",18,22,0)
^9.49I^1^1
"PKG",18,22,1,0)
5.0^3051109^2980407^50
"PKG",18,22,1,"PAH",1,0)
69^3060120
"PKG",18,22,1,"PAH",1,1,0)
^^2^2^3060120
"PKG",18,22,1,"PAH",1,1,1,0)
RADIOLOGY REJECTS ORDER FROM CPRS/CPT CODE DISPLAY ISSUE ON PROC-CPT 
"PKG",18,22,1,"PAH",1,1,2,0)
REPORT
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","RACPT1")
0^2^B19705347^B18574286
"RTN","RACPT1",1,0)
RACPT1 ;HISC/GJC,FPT-Procedure/CPT Stats Report ;12/29/00  11:28
"RTN","RACPT1",2,0)
 ;;5.0;Radiology/Nuclear Medicine;**26,69**;Mar 16, 1998
"RTN","RACPT1",3,0)
 ;01/19/2006 KAM/BAY Remedy Call 97373 CPT Code Display Problem
"RTN","RACPT1",4,0)
CHK ;
"RTN","RACPT1",5,0)
 I $O(RACCESS(DUZ,""))="" D SETVARS^RAPSET1(0) S RAPSTX=""
"RTN","RACPT1",6,0)
 I $O(RACCESS(DUZ,""))="" D ACCVIO^RAUTL19 S RAQUIT=1 Q
"RTN","RACPT1",7,0)
 D ASK1^RAWKL ;ask if want separate CPT mods
"RTN","RACPT1",8,0)
 I $$DIVLOC^RAUTL7() D  S RAQUIT=1 Q
"RTN","RACPT1",9,0)
 . I $O(^TMP($J,"RA D-TYPE",""))="" W !!?5,"No divisions selected." Q
"RTN","RACPT1",10,0)
 . I $O(^TMP($J,"RA I-TYPE",""))="" W !!?5,"No imaging types selected."
"RTN","RACPT1",11,0)
 . Q
"RTN","RACPT1",12,0)
 W ! S RACAN=$$YESNO()
"RTN","RACPT1",13,0)
 ; RACAN=0: cancelled exams excluded, RACAN=1: cancelled exams
"RTN","RACPT1",14,0)
 ; are included, RACAN=-1: exit option
"RTN","RACPT1",15,0)
 S:RACAN<0 RAQUIT=1 Q:$G(RAQUIT)
"RTN","RACPT1",16,0)
 K DIR S DIR(0)="Y",DIR("B")="Yes"
"RTN","RACPT1",17,0)
 S DIR("A")="Do you wish to include all Procedures"
"RTN","RACPT1",18,0)
 S DIR("?",1)="Enter 'Yes' to select all entries in the file."
"RTN","RACPT1",19,0)
 S DIR("?")="Enter 'No' to select a subset of entries in the file."
"RTN","RACPT1",20,0)
 W ! D ^DIR K DIR I $D(DIRUT) S RAQUIT=1 Q
"RTN","RACPT1",21,0)
 S RAINPUT=+Y
"RTN","RACPT1",22,0)
 I RAINPUT=0 D  Q:$G(RAQUIT)
"RTN","RACPT1",23,0)
 . K RADIC
"RTN","RACPT1",24,0)
 . S RADIC="^RAMIS(71,",RADIC(0)="EMQZ",RADIC("A")="Select PROCEDURE: "
"RTN","RACPT1",25,0)
 . S RAUTIL="RA P-TYPE" D EN1^RASELCT(.RADIC,RAUTIL,"",RAINPUT)
"RTN","RACPT1",26,0)
 . I $O(^TMP($J,"RA P-TYPE",""))=""!$G(RAQUIT) W !!?5,"No procedures selected." S RAQUIT=1
"RTN","RACPT1",27,0)
 . Q
"RTN","RACPT1",28,0)
 S RANUMPRC=$$PROCNUM()
"RTN","RACPT1",29,0)
DATE D DATE^RAUTL Q:RAPOP
"RTN","RACPT1",30,0)
 ;S Z=9999999.9999, WHY IS THIS NEEDED?
"RTN","RACPT1",31,0)
 S RABEG=BEGDATE,RAEND=ENDDATE+.9
"RTN","RACPT1",32,0)
 S DIR(0)="S^I:INPATIENT;O:OUTPATIENT;B:BOTH;",DIR("B")="BOTH",DIR("?",1)="This CPT Workload Report can be broken",DIR("?")="out by Inpatient, Outpatient or Both.",DIR("A")="Report to include"
"RTN","RACPT1",33,0)
 D ^DIR S RASORT=Y I $D(DIRUT) S RAQUIT=1 Q
"RTN","RACPT1",34,0)
 K DIR,X,Y
"RTN","RACPT1",35,0)
 S ZTRTN="START^RACPT"
"RTN","RACPT1",36,0)
 F RASV="RACAN","RANUMPRC","BEGDATE","ENDDATE","RABEG","RAEND","RASORT","RAINPUT","RACMLIST" S ZTSAVE(RASV)=""
"RTN","RACPT1",37,0)
 F RASV="D","I","P" S ZTSAVE("^TMP($J,""RA "_RASV_"-TYPE"",")=""
"RTN","RACPT1",38,0)
 W ! D ZIS^RAUTL
"RTN","RACPT1",39,0)
 Q
"RTN","RACPT1",40,0)
PRINT ; Output data
"RTN","RACPT1",41,0)
 ; 01/19/2006 KAM/BAY Changed next line to utilize $$NAMCODE^RACPTMSC
"RTN","RACPT1",42,0)
 I '$G(RACMLIST) W !,$P($$NAMCODE^RACPTMSC(CPT,""),U),?7,$S($D(^RAMIS(71,J,0)):$E($P(^(0),"^"),1,38),1:"UNKNOWN") S RATOT(1)=+$P(^(0),U,10) ;cost per unit
"RTN","RACPT1",43,0)
 ; 01/19/2006 KAM/BAY Changed next line to utilize $$NAMCODE^RACPTMSC
"RTN","RACPT1",44,0)
 I $G(RACMLIST) W !,$P($$NAMCODE^RACPTMSC(CPT,""),U),?15,$S($D(^RAMIS(71,J,0)):$E($P(^(0),"^"),1,30),1:"UNKNOWN") S RATOT(1)=+$P(^(0),U,10) ;cost per unit
"RTN","RACPT1",45,0)
 S RATOT(2)=RATOT*RATOT(1) ;occurrence * cost per unit
"RTN","RACPT1",46,0)
 S RATOT(4)=$G(^TMP($J,"RA",RAI,RADIV,RAIMAG(1),"DONE"))
"RTN","RACPT1",47,0)
 S RATOT(5)=$G(^TMP($J,"RA",RAI,RADIV,RAIMAG(1),"COST"))
"RTN","RACPT1",48,0)
 W ?45,$J(RATOT,5),?52,$S(RATOT(4)=0:$J(0,3,0),1:$J(RATOT/RATOT(4)*100,3,0))
"RTN","RACPT1",49,0)
 W ?56,$J(RATOT(1),8,2)
"RTN","RACPT1",50,0)
 W ?65,$J(RATOT(2),10,2),?77,$S(RATOT(5)=0:$J(0,3,0),1:$J(RATOT(2)/RATOT(5)*100,3,0))
"RTN","RACPT1",51,0)
 I $E(IOST,1,2)="C-",$Y+4>IOSL D HANG1,HED:'RAEXIT
"RTN","RACPT1",52,0)
 Q
"RTN","RACPT1",53,0)
HED ; Issue header
"RTN","RACPT1",54,0)
 W:($E(IOST)="C")!(PAGE>1) @IOF
"RTN","RACPT1",55,0)
 N RA S RA=">>>>> PROCEDURE/CPT STATISTICS REPORT "
"RTN","RACPT1",56,0)
 S RA=RA_$S(RAI="I":"(INPATIENT)",RAI="O":"(OUTPATIENT)",1:"")_" <<<<<"
"RTN","RACPT1",57,0)
 W !?78-$L(RA)\2,RA,?70,"Page: ",PAGE S PAGE=PAGE+1
"RTN","RACPT1",58,0)
 W !!,"    Division: ",$S(RADIV="":"Unknown",$D(^DIC(4,RADIV,0)):$P(^(0),U),1:"Unknown")
"RTN","RACPT1",59,0)
 W !,"Imaging Type: ",RAIMAG(0)
"RTN","RACPT1",60,0)
 W ?52,"For period: ",BEGDATE(0)," to"
"RTN","RACPT1",61,0)
 W !,"    Run Date: ",RARUNDTE,?64,ENDDATE(0)
"RTN","RACPT1",62,0)
 W !,"    # of Procedures selected: ",$S(RAINPUT:"All",1:RANUMPRC)
"RTN","RACPT1",63,0)
 W ?52,"Cancelled Exams: "_$S(RACAN:"in",1:"ex")_"cluded"
"RTN","RACPT1",64,0)
 W:'$G(RACMLIST) !!,"CPT",?7,"PROCEDURE"
"RTN","RACPT1",65,0)
 W:$G(RACMLIST) !!,"CPT (* : >3 CPT mods)",?25,"PROCEDURE"
"RTN","RACPT1",66,0)
 W ?44,"# DONE",?52,"(%)",?59,"$UNIT",?69,"$TOTAL",?77,"(%)",!,QQ
"RTN","RACPT1",67,0)
 Q
"RTN","RACPT1",68,0)
HANG ; get to the EOP
"RTN","RACPT1",69,0)
 Q:$E(IOST,1,2)'="C-"
"RTN","RACPT1",70,0)
 F Z=1:1:(IOSL-($Y+4)) W !
"RTN","RACPT1",71,0)
HANG1 ; Issue EOP prompt
"RTN","RACPT1",72,0)
 R !!,"Press RETURN to continue or an '^' to stop ",X:DTIME
"RTN","RACPT1",73,0)
 S RAEXIT=(X=U)
"RTN","RACPT1",74,0)
 Q
"RTN","RACPT1",75,0)
SRTPA(RA) ; Check on the sort parameters.  If inpatient and outpatient,
"RTN","RACPT1",76,0)
 ; issue a EOP prompt when the sort parameter changes.
"RTN","RACPT1",77,0)
 ; '1' implies that we are sorting by both inpatient/outpatient and
"RTN","RACPT1",78,0)
 ; are on the second parameter, '0' implies that we fail the above
"RTN","RACPT1",79,0)
 ; conditions.
"RTN","RACPT1",80,0)
 I ($L(RASORT,",")#2)=0,(RA>1),('+$G(RAEOPFLG)) Q 1
"RTN","RACPT1",81,0)
 Q 0
"RTN","RACPT1",82,0)
PROCNUM() ; Determine the number of procedures a user has chosen.
"RTN","RACPT1",83,0)
 N X,Y S X="",Y=0
"RTN","RACPT1",84,0)
 F  S X=$O(^TMP($J,"RA P-TYPE",X)) Q:X']""  S Y=Y+1
"RTN","RACPT1",85,0)
 Q Y
"RTN","RACPT1",86,0)
YESNO() ; Pass back the user's response to the 'Yes/No' question
"RTN","RACPT1",87,0)
 ; returns: 0=user answers No, 1=user answers Yes, -1='^' or timeout
"RTN","RACPT1",88,0)
 N DIR,DIROUT,DIRUT,DTOUT,DUOUT,X,Y S DIR(0)="Y",DIR("B")="Yes"
"RTN","RACPT1",89,0)
 S DIR("A")="Do you wish to include cancelled cases"
"RTN","RACPT1",90,0)
 S DIR("?",1)="Enter 'Yes' if exams with an examination status of Cancelled"
"RTN","RACPT1",91,0)
 S DIR("?",2)="are to be included on the report.  Enter 'No' if cancelled exams"
"RTN","RACPT1",92,0)
 S DIR("?")="are to be excluded from the report." D ^DIR
"RTN","RACPT1",93,0)
 S:$D(DIRUT) Y=-1
"RTN","RACPT1",94,0)
 Q Y
"RTN","RAO7RON1")
0^1^B16218705^B16077127
"RTN","RAO7RON1",1,0)
RAO7RON1 ;HISC/GJC,FPT-Request message from OE/RR. (frontdoor) ; 7/26/05 2:08pm
"RTN","RAO7RON1",2,0)
 ;;5.0;Radiology/Nuclear Medicine;**69**;Mar 16, 1998
"RTN","RAO7RON1",3,0)
 ;
"RTN","RAO7RON1",4,0)
 ;------------------------- Variable List -------------------------------
"RTN","RAO7RON1",5,0)
 ; RADATA=HL7 data minus seg. hdr    RAHDR=Segment header
"RTN","RAO7RON1",6,0)
 ; RAHLFS="|"                        RAMSG=HL7 message passed in
"RTN","RAO7RON1",7,0)
 ; RAOBR12=danger code               RAOBR18=modifier
"RTN","RAO7RON1",8,0)
 ; RAOBR19=Img. Loc. pntr (79.1)     RAOBR30=trans. mode
"RTN","RAO7RON1",9,0)
 ; RAOBR4=univ. trans. mode          RAOBX2=format of observ. value
"RTN","RAO7RON1",10,0)
 ; RAOBX3=observ. ID                 RAOBX5=observ. value
"RTN","RAO7RON1",11,0)
 ; RAORC1=order control              RAORC10=entered by (200)
"RTN","RAO7RON1",12,0)
 ; RAORC12=ordering provider (200)   RAORC15=order effective D/T
"RTN","RAO7RON1",13,0)
 ; RAORC16=order control reason      RAORC2=placer order #_"^OR"
"RTN","RAO7RON1",14,0)
 ; RAORC3=filler order #_"^RA"       RAORC7=start dt/freq. of service
"RTN","RAO7RON1",15,0)
 ; RAPID3=patient ID                 RAPID5=patient name (2)
"RTN","RAO7RON1",16,0)
 ; RAPV119=visit #                   RAPV12=patient class
"RTN","RAO7RON1",17,0)
 ; RAPV13=patient location (44)      RASEG=message seg. including header
"RTN","RAO7RON1",18,0)
 ; ----------------------------------------------------------------------
"RTN","RAO7RON1",19,0)
 ;
"RTN","RAO7RON1",20,0)
OBR ; breakdown the 'OBR' segment
"RTN","RAO7RON1",21,0)
 S RAOBR4=$P(RADATA,RAHLFS,4)
"RTN","RAO7RON1",22,0)
 F I=1:1:$L(RAOBR4,RAECH(1)) S RAOBR4(I)=$P(RAOBR4,RAECH(1),I)
"RTN","RAO7RON1",23,0)
 I RAOBR4(1)'="" S RACPTIEN=+$O(^ICPT("B",RAOBR4(1),0)) S:'RACPTIEN RAERR=8 Q:RAERR  ;RA*5*69
"RTN","RAO7RON1",24,0)
 S RAERR=$$EN2^RAO7VLD(71,+RAOBR4(4),RAOBR4(5)) S:RAERR RAERR=8 Q:RAERR
"RTN","RAO7RON1",25,0)
 I $$UP^XLFSTR($P($G(^RAMIS(71,+RAOBR4(4),0)),"^",6))="P" D  Q:RAERR
"RTN","RAO7RON1",26,0)
 . S RAERR=$$EN6^RAO7VLD(+RAOBR4(4)) S:RAERR RAERR=32
"RTN","RAO7RON1",27,0)
 . Q
"RTN","RAO7RON1",28,0)
 I RAOBR4(1)'="" S:'$D(^RAMIS(71,"D",RACPTIEN,+RAOBR4(4))) RAERR=8 Q:RAERR  ;RA*5*69
"RTN","RAO7RON1",29,0)
 S RAOBR4(4,"I-TYPE")=+$P($G(^RAMIS(71,+RAOBR4(4),0)),"^",12)
"RTN","RAO7RON1",30,0)
 S RANEW(75.1,"+1,",2)=RAOBR4(4)
"RTN","RAO7RON1",31,0)
 S RAIT=$P(^RAMIS(71,+RAOBR4(4),0),U,12)
"RTN","RAO7RON1",32,0)
 S RAERR=$$EN3^RAO7VLD(79.2,RAIT) Q:RAERR
"RTN","RAO7RON1",33,0)
 S RANEW(75.1,"+1,",3)=RAIT
"RTN","RAO7RON1",34,0)
 S RAOBR12=$P(RADATA,RAHLFS,12)
"RTN","RAO7RON1",35,0)
 S RAOBR12=$S($E(RAOBR12)="":"n","yYiI"[$E(RAOBR12):"y",1:"n")
"RTN","RAO7RON1",36,0)
 S RAERR=$$EN1^RAO7VLD(75.1,24,"E",RAOBR12,"RASULT","") S:RAERR RAERR=10 Q:RAERR
"RTN","RAO7RON1",37,0)
 S RANEW(75.1,"+1,",24)=RAOBR12
"RTN","RAO7RON1",38,0)
 S RAOBR18=$P(RADATA,RAHLFS,18)
"RTN","RAO7RON1",39,0)
 N RASERIES,RAIMAG
"RTN","RAO7RON1",40,0)
 F I=1:1:$L(RAOBR18,RAECH(2)) S:$L($P(RAOBR18,RAECH(2),I))>0 RAOBR18(I)=$P(RAOBR18,RAECH(2),I)
"RTN","RAO7RON1",41,0)
 S I=0 F  S I=$O(RAOBR18(I)) Q:I'>0  D  Q:RAERR
"RTN","RAO7RON1",42,0)
 . S RAMODIEN=+$O(^RAMIS(71.2,"B",RAOBR18(I),0))
"RTN","RAO7RON1",43,0)
 . S:'RAMODIEN RAERR=11 Q:RAERR
"RTN","RAO7RON1",44,0)
 . S RAIMAG=$P($G(^RAMIS(71,+RAOBR4(4),0)),U,12) ; type of imaging
"RTN","RAO7RON1",45,0)
 . S:'$D(^RAMIS(71.2,"AB",RAIMAG,RAMODIEN)) RAERR=33 Q:RAERR
"RTN","RAO7RON1",46,0)
 . S RASERIES=$S($P($G(^RAMIS(71,+RAOBR4(4),0)),"^",6)="S":1,1:0)
"RTN","RAO7RON1",47,0)
 . S:RASERIES&($P($G(^RAMIS(71.2,RAMODIEN,0)),U,2)]"") RAERR=34 Q:RAERR
"RTN","RAO7RON1",48,0)
 . S RAPLCHLD=RAPLCHLD+1
"RTN","RAO7RON1",49,0)
 . S RANEW(75.1125,"+"_RAPLCHLD_",+1,",.01)=RAMODIEN
"RTN","RAO7RON1",50,0)
 . Q
"RTN","RAO7RON1",51,0)
 S RAOBR19=$P(RADATA,RAHLFS,19),RAOBR19(1)=$P(RAOBR19,U,1)
"RTN","RAO7RON1",52,0)
 S RAOBR19(2)=$P(RAOBR19,U,2),RAOBR19(3)=+RAOBR19(1)
"RTN","RAO7RON1",53,0)
 I RAOBR19(3) D  Q:RAERR
"RTN","RAO7RON1",54,0)
 . S RAOBR19(3,"I-TYPE")=+$P($G(^RA(79.1,+RAOBR19(3),0)),"^",6)
"RTN","RAO7RON1",55,0)
 . I RAOBR4(4,"I-TYPE")'=RAOBR19(3,"I-TYPE") S RAERR=31
"RTN","RAO7RON1",56,0)
 . Q
"RTN","RAO7RON1",57,0)
 S RANEW(75.1,"+1,",20)=$S(RAOBR19(3)>0:RAOBR19(3),1:"")
"RTN","RAO7RON1",58,0)
 S X=$P(RADATA,RAHLFS,30)
"RTN","RAO7RON1",59,0)
 S RAOBR30=$S(X="CART":"s",X="PORT":"p",X="WALK":"a",X="WHLC":"w",1:"")
"RTN","RAO7RON1",60,0)
 I RAOBR30']"" S RAERR=13
"RTN","RAO7RON1",61,0)
 S:'RAERR RAERR=$$EN1^RAO7VLD(75.1,19,"E",RAOBR30,"RASULT","")
"RTN","RAO7RON1",62,0)
 S:RAERR RAERR=13 Q:RAERR
"RTN","RAO7RON1",63,0)
 S RANEW(75.1,"+1,",19)=RAOBR30
"RTN","RAO7RON1",64,0)
 Q
"RTN","RAO7RON1",65,0)
OBX ; breakdown the 'OBX' segment
"RTN","RAO7RON1",66,0)
 S RAOBX2=$P(RADATA,RAHLFS,2)
"RTN","RAO7RON1",67,0)
 S RAERR=$S(RAOBX2="TX":0,RAOBX2="CE":0,RAOBX2="TS":0,1:1) Q:RAERR=17
"RTN","RAO7RON1",68,0)
 S RAOBX3=$P(RADATA,RAHLFS,3)
"RTN","RAO7RON1",69,0)
 S RAOBX5=$P(RADATA,RAHLFS,5)
"RTN","RAO7RON1",70,0)
 F I=1:1:$L(RAOBX3,RAECH(1)) S RAOBX3(I)=$P(RAOBX3,RAECH(1),I)
"RTN","RAO7RON1",71,0)
 S X=RAOBX3(2) D UPPER^RAUTL4 S RAOBX3(2)=Y
"RTN","RAO7RON1",72,0)
 I RAOBX3(1)=2000.02 D
"RTN","RAO7RON1",73,0)
 .S:RACLIN RACLIN=$$EN4^RAO7VLD(RAOBX5)
"RTN","RAO7RON1",74,0)
 .S RAWP=RAWP+1,^TMP("RAWP",$J,RAWP)=RAOBX5
"RTN","RAO7RON1",75,0)
 I RAOBX3(1)=2000.33 D  Q:RAERR
"RTN","RAO7RON1",76,0)
 .S RAERR=$$EN1^RAO7VLD(75.1,13,"E",RAOBX5,"RASULT","") S:RAERR RAERR=14 Q:RAERR
"RTN","RAO7RON1",77,0)
 .S RAPREG=$E(RAOBX5),RAPREG=$S(RAPREG="N"!(RAPREG="n"):"n",RAPREG="Y"!(RAPREG="y"):"y",1:"u")
"RTN","RAO7RON1",78,0)
 .S RANEW(75.1,"+1,",13)=RAPREG
"RTN","RAO7RON1",79,0)
 I RAOBX3(1)=34!(RAOBX2="CE") D  Q:RAERR
"RTN","RAO7RON1",80,0)
 .S RAERR=$$EN2^RAO7VLD(34,$P(RAOBX5,RAECH(1)),$P(RAOBX5,RAECH(1),2)) Q:RAERR
"RTN","RAO7RON1",81,0)
 .S RANEW(75.1,"+1,",9)=+RAOBX5
"RTN","RAO7RON1",82,0)
 I RAOBX3(2)["RESEARCH" D  S:RAERR RAERR=18 Q:RAERR
"RTN","RAO7RON1",83,0)
 .S RAERR=$$EN1^RAO7VLD(75.1,9.5,"E",RAOBX5,"RASULT","") S:RAERR RAERR=19 Q:RAERR
"RTN","RAO7RON1",84,0)
 .S RANEW(75.1,"+1,",9.5)=RAOBX5
"RTN","RAO7RON1",85,0)
 I RAOBX3(2)["PRE-OP" D  Q:RAERR
"RTN","RAO7RON1",86,0)
 .S RAOBX5=$$FMDATE^HLFNC(RAOBX5)
"RTN","RAO7RON1",87,0)
 .S RAERR=$$EN1^RAO7VLD(75.1,12,"E",RAOBX5,"RASULT","") S:RAERR RAERR=20 Q:RAERR
"RTN","RAO7RON1",88,0)
 .S RANEW(75.1,"+1,",12)=RAOBX5
"RTN","RAO7RON1",89,0)
 I $D(RANEW(75.1,"+1,",9))&($D(RANEW(75.1,"+1,",9.5))) S RAERR=29
"RTN","RAO7RON1",90,0)
 Q
"VER")
8.0^22.0
"BLD",5949,6)
^57
**END**
**END**

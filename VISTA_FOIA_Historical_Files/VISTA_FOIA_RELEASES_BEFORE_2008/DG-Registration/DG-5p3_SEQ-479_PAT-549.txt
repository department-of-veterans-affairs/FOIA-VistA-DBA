$TXT Created by THEROUX,JOHN at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Wednesday, 10/01/03 at 13:49
=============================================================================
Run Date: NOV 05, 2003                     Designation: DG*5.3*549
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #479                    Status: Released
                  Compliance Date: DEC 05, 2003
=============================================================================

Associated patches: (v)DG*5.3*61   <<= must be installed BEFORE `DG*5.3*549'
                    (v)DG*5.3*483  <<= must be installed BEFORE `DG*5.3*549'

Subject: USER CANNOT ADMIT PATIENT;LOCKING ISSUE WITH MOVEMENTS

Category: 
  - Routine

Description:
============

 This patch avoids an undefined error which is preventing users from 
 admitting patients in certain circumstances, and prevents orders from
 being released multiple times.
  
 ASSOCIATED NOISes:
 ==================
 MAD-0903-40702     <NULLSUBSCR>GVID+5~DGPMVBUR:1
   Duplicates:
   REN-0903-61093   GVID+5~DGPMVBUR:1
   BUT-0903-20846   User cannot admit patient
   WPB-0903-32079   Error <NULLSUBSCR>GVID+5^DGPMVBUR:1
   SBY-1003-31413     Error: <NULLSUBSCR>GVID+5^DGPMVBUR:1
   BRX-1003-12144     GVID+5^DGPMVBUR:1, %DSM-E-NULLSUBSCR
  
 ISL-0903-50918     Locking issue during processing of DGPM MOVEMENT EVENTS
  
 PARTICIPATING TEST SITES:
 =========================
  
 Madison, WI
 Reno, NV
 Mountain Home, TN
 Salisbury, TN
  
 NOIS OVERVIEW:
 ==============
 1. MAD-0903-40702
  
 Problem:
 --------
 Patch DG*5.3*483 updated the UR Admission Bulletin to display the 
 hospital location of visits within the last 72 hours of an admission.
 Under certain circumstances, such as for historical events, the
 VISIT file (#9000010) has no hospital location, causing an undefined
 error.
  
 Solution:
 ---------
 Routine ^DGPMVBUR has been modified to display "Unknown location" or
 "Unknown location-event historical" in such instances.
  
 2. ISL-0903-50918
  
 Problem:
 --------
 The problem occurs when a site edits an existing movement for the
 same patient before the DGPM MOVEMENT EVENTS protocol has finished 
 processing on the initial movement.  As a result, it's possible for
 a delayed event to be processed simultaneously by two different
 movements.
 One of the first protocols attached to the DGPM MOVEMENT EVENTS 
 protocol calls routines that use non-incremental locks.  When using 
 non-incremental locks (ones without a + in front of the global) all other 
 locks are released as only one lock can be placed at a time when using 
 non-incremental locks.  This clears the lock on the patient so that 
 another movement can be entered before the initial movement has finished 
 processing the protocol.  The protocol that is causing the problem is 
 DGPM TREATING SPECIALTY EVENT which calls routines that include non-
 incremental locks.
  
 Solution:
 ---------
 Routines ^DGPTTS2 and ^DGPTTS3 are being modified to use incremental
 locks.
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
     <tab>;;5.3;Registration;**[patch list]**;AUG 13, 1993
  
                            CHECK^XTSUMBLD results
 Routine name      Before Patch          After Patch         Patch List
 ============      ============          ===========         ==========
  DGPMVBUR              7188872              7592674        26,31,483,549
  DGPTTS2               9851736              9849099             549
  DGPTTS3              10931746             11095679          26,61,549 
  
 INSTALLATION INSTRUCTIONS:
 ==========================
  
 This patch may be run with users on the system, but it is recommended 
 that it be queued to run after normal business hours to minimize the
 impact on users of the Registration package.
  
 Installation will take less than 2 minutes.
  
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
     the KIDS distribution included with this message.
  
 2.  Review your mapped set.  If any of the routines listed in the 
     ROUTINE section are mapped, they should be removed from the mapped 
     set at this time.
  
 3.  From the Kernel Installation and Distribution System Menu, select
     the Installation menu.
  
 4.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter DG*5.3*549):
     a.  Compare Transport Global to Current System  - this option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch (routines,
         DDs, templates, etc.).
     b.  Verify Checksums in Transport Global - this option will
         allow you to ensure the integrity of the routines that are in
     c.  Print Transport Global - this option will allow you to view the
         components of the KIDS build.
    
 5.  Use the Install Package(s) option and select the package DG*5.3*549.
  
 6.  When prompted ' Want KIDS to INHIBIT LOGONs during the install?
     YES//', respond NO.
  
 7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? YES//', respond NO. 
          
 8.  If routines were unmapped as part of step 2, they should be returned
     to the mapped set once the installation has run to completion.

Routine Information:
====================

Routine Name:
  - DGPMVBUR


Routine Checksum:

Routine Name:
  - DGPTTS2


Routine Checksum:

Routine Name:
  - DGPTTS3


Routine Checksum:

=============================================================================
User Information:
Entered By  : HOUTCHENS,THOMAS              Date Entered  : SEP 03, 2003
Completed By: PEREZ,CAROL                   Date Completed: OCT 31, 2003
Released By : CANNEDY,JOELLEN               Date Released : NOV 05, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

Released SR*3*142 SEQ #145
Extracted from mail message
**KIDS**:SR*3.0*142^

**INSTALL NAME**
SR*3.0*142
"BLD",5341,0)
SR*3.0*142^SURGERY^0^3060308^y
"BLD",5341,1,0)
^^169^169^3050804^
"BLD",5341,1,1,0)
This patch is part of the Patient Financial Services System (PFSS) project.
"BLD",5341,1,2,0)
PFSS patches are being released on various schedules. Some patch
"BLD",5341,1,3,0)
functionality will not be active until a new PFSS switch is activated
"BLD",5341,1,4,0)
during final implementation. PFSS will initially be implemented at select
"BLD",5341,1,5,0)
pilot sites ONLY.
"BLD",5341,1,6,0)
 
"BLD",5341,1,7,0)
The purpose of the PFSS project is to prepare the Veterans Health 
"BLD",5341,1,8,0)
Information Systems and Technology Architecture (VistA) environment for the
"BLD",5341,1,9,0)
implementation of a commercial off-the-shelf (COTS) billing replacement
"BLD",5341,1,10,0)
system. The project consists of the implementation of the billing
"BLD",5341,1,11,0)
replacement system, business process improvements, and enhancements to
"BLD",5341,1,12,0)
VistA to support integration with the COTS billing replacement system.
"BLD",5341,1,13,0)
Significant changes to VistA legacy systems and ancillary packages are
"BLD",5341,1,14,0)
necessary.
"BLD",5341,1,15,0)
 
"BLD",5341,1,16,0)
Some of the PFSS software components are not operational until the PFSS 
"BLD",5341,1,17,0)
On/Off Switch, distributed with patch IB*2*260, is set to "ON". The ability
"BLD",5341,1,18,0)
for the local site to set the switch to "ON" will be provided at the
"BLD",5341,1,19,0)
appropriate time with the release of a subsequent Integrated Billing patch.
"BLD",5341,1,20,0)
 
"BLD",5341,1,21,0)
For more information about the PFSS project, review the documentation 
"BLD",5341,1,22,0)
accompanying this patch and refer to the following website: 
"BLD",5341,1,23,0)
http://vista.med.va.gov/billreplace/
"BLD",5341,1,24,0)
 
"BLD",5341,1,25,0)
Features of patch SR*3*142 are listed below:
"BLD",5341,1,26,0)
 
"BLD",5341,1,27,0)
1. Modified Surgery Coding Option
"BLD",5341,1,28,0)
   Coders currently use the Update/Verify Procedure/Diagnosis Codes 
"BLD",5341,1,29,0)
   [SRCODING EDIT] option, which updates coded data directly in the 
"BLD",5341,1,30,0)
   SURGERY file (#130). However, the SURGERY file (#130) does not
"BLD",5341,1,31,0)
   currently make a distinction between procedure and diagnosis data
"BLD",5341,1,32,0)
   entered by clinicians and that entered by coders. Today, coding a
"BLD",5341,1,33,0)
   surgical case impacts the clinical data for the patient and causes an
"BLD",5341,1,34,0)
   addendum to be generated because each code is directly associated with
"BLD",5341,1,35,0)
   a free-text procedure or diagnosis entry. This patch separates final
"BLD",5341,1,36,0)
   coded procedures and diagnoses from the clinically captured procedures
"BLD",5341,1,37,0)
   and diagnoses.
"BLD",5341,1,38,0)
 
"BLD",5341,1,39,0)
   A new file, the SURGERY PROCEDURE/DIAGNOSIS CODES file (#136), is
"BLD",5341,1,40,0)
   created to store coded procedure and coded diagnosis data for a Surgery
"BLD",5341,1,41,0)
   case. Data entered into this file will be the new source coding data
"BLD",5341,1,42,0)
   sent by the Surgery package to PCE. In the SURGERY file (#130), the
"BLD",5341,1,43,0)
   existing PRINCIPAL CPT Code field (#27), PRIN DIAGNOSIS CODE field 
"BLD",5341,1,44,0)
   (#66), OTHER PROCEDURE CPT CODE field (#3 of sub-file #130.16) and ICD
"BLD",5341,1,45,0)
   DIAGNOSIS CODE field (#3 of sub-file #130.18) are modified to include
"BLD",5341,1,46,0)
   the word "PLANNED" in the field labels and titles.
"BLD",5341,1,47,0)
   
"BLD",5341,1,48,0)
   The Update/Verify Procedure/Diagnosis Codes [SRCODING EDIT] option is 
"BLD",5341,1,49,0)
   modified to allow entry of final billing Current Procedural 
"BLD",5341,1,50,0)
   Terminology (CPT) codes for surgical procedures and International
"BLD",5341,1,51,0)
   Classification of Disease (ICD) diagnosis codes in the SURGERY
"BLD",5341,1,52,0)
   PROCEDURE/DIAGNOSIS CODES file (#136).
"BLD",5341,1,53,0)
 
"BLD",5341,1,54,0)
   Modified features of the Update/Verify Procedure/Diagnosis Codes
"BLD",5341,1,55,0)
   [SRCODING EDIT] option are listed below:
"BLD",5341,1,56,0)
   - Upon record creation for a case in the SURGERY PROCEDURE/DIAGNOSIS
"BLD",5341,1,57,0)
     CODES file (#136), the record will be auto-populated with clinician
"BLD",5341,1,58,0)
     entered coding data, if any, from the SURGERY file (#130).
"BLD",5341,1,59,0)
   - A principal ICD code and a principal CPT code are initial
"BLD",5341,1,60,0)
     requirements for coding a surgical case. 
"BLD",5341,1,61,0)
   - An unlimited number of ICD codes may be entered for other diagnoses
"BLD",5341,1,62,0)
     and an unlimited number of CPT codes may be entered for other
"BLD",5341,1,63,0)
     procedures performed.
"BLD",5341,1,64,0)
   - Each CPT code entered must be assigned the associated ICD code(s)
"BLD",5341,1,65,0)
     related to the procedure performed.
"BLD",5341,1,66,0)
   - An unlimited number of CPT modifiers may be entered for each CPT code
"BLD",5341,1,67,0)
     entered.
"BLD",5341,1,68,0)
   - For every ICD code entered, the following questions must be answered
"BLD",5341,1,69,0)
     as appropriate for the patient based upon enrollment indicators:
"BLD",5341,1,70,0)
     o Treatment related to Service Connected condition?
"BLD",5341,1,71,0)
     o Treatment related to Agent Orange Exposure?
"BLD",5341,1,72,0)
     o Treatment related to Ionizing Radiation Exposure?
"BLD",5341,1,73,0)
     o Treatment related to Environmental Contaminant Exposure?
"BLD",5341,1,74,0)
     o Treatment related to Military Sexual Trauma?
"BLD",5341,1,75,0)
     o Treatment related to Head and/or Neck Cancer?
"BLD",5341,1,76,0)
     o Treatment related to Combat?
"BLD",5341,1,77,0)
   - Upon completion of coding for a case, the coder is allowed to mark
"BLD",5341,1,78,0)
     the record as complete and to send the record immediately to PCE.
"BLD",5341,1,79,0)
   - Before allowing the record to be marked as complete, the option
"BLD",5341,1,80,0)
     checks to see if a specific code, 065.0 CRIMEAN HEMORRHAGIC FEV, is
"BLD",5341,1,81,0)
     entered as a diagnosis code. If it is entered, the software prompts
"BLD",5341,1,82,0)
     the user to make sure that the code is correct for the case. This
"BLD",5341,1,83,0)
     check is added to prevent the inadvertent assignment of code 065.0
"BLD",5341,1,84,0)
     when "CHF" is entered for the Principal or Other ICD Diagnosis
"BLD",5341,1,85,0)
     codes.
"BLD",5341,1,86,0)
   
"BLD",5341,1,87,0)
2. Modified Surgery Reports and Other Options
"BLD",5341,1,88,0)
   - The following Surgery reports and options as modified to use the
"BLD",5341,1,89,0)
     coder entered CPT and/or ICD codes from the SURGERY 
"BLD",5341,1,90,0)
     PROCEDURE/DIAGNOSIS CODES file (#136):
"BLD",5341,1,91,0)
     o Cumulative Report of CPT Codes [SROACCT] option
"BLD",5341,1,92,0)
     o Report of CPT Coding Accuracy [SR CPT ACCURACY] option
"BLD",5341,1,93,0)
     o List Completed Cases Missing CPT Codes [SRSCPT] option
"BLD",5341,1,94,0)
       Note: The option descriptions are updated to read "The List
"BLD",5341,1,95,0)
       Completed Cases Missing CPT Codes option generates a report of
"BLD",5341,1,96,0)
       completed cases that are missing the Principal CPT code for a
"BLD",5341,1,97,0)
       specified date range."
"BLD",5341,1,98,0)
     o Annual Report of Surgical Procedures [SROARSP] option
"BLD",5341,1,99,0)
     o PCE Filing Status Report [SRO PCE STATUS] option
"BLD",5341,1,100,0)
     o Quarterly Report - Surgical Service [SRO QUARTERLY REPORT] option
"BLD",5341,1,101,0)
     o Report of Missing Quarterly Report Data [SROQ MISSING DATA] option
"BLD",5341,1,102,0)
       Note: The Other CPT Codes no longer affect this report and 
"BLD",5341,1,103,0)
       references to Other CPT Codes are removed. The display of "I" in 
"BLD",5341,1,104,0)
       the footer of this report is removed.
"BLD",5341,1,105,0)
     o Annual Report of Non-O.R. Procedures [SRONOP-ANNUAL] option
"BLD",5341,1,106,0)
     o List of Invasive Diagnostic Procedures [SROQIDP] option
"BLD",5341,1,107,0)
   - The following Surgery reports and options are modified to remove CPT 
"BLD",5341,1,108,0)
     and/or ICD codes from the display.
"BLD",5341,1,109,0)
     o Update Status of Returns within 30 Days [SRO UPDATE RETURNS] option
"BLD",5341,1,110,0)
     o Update Operations as Unrelated/Related to Death [SRO DEATH RELATED]
"BLD",5341,1,111,0)
       option
"BLD",5341,1,112,0)
     o Non-OR Procedure Information [SR NON-OR INFO] option
"BLD",5341,1,113,0)
     o Deaths Within 30 Days of Surgery [SROQD] option
"BLD",5341,1,114,0)
     o Admissions Within 14 Days of Outpatient Surgery [SROQADM] option
"BLD",5341,1,115,0)
     o List of Operations Included on Quarterly Report [SROQ LIST OPS]
"BLD",5341,1,116,0)
       option
"BLD",5341,1,117,0)
 
"BLD",5341,1,118,0)
3. Modified Risk Assessment Options
"BLD",5341,1,119,0)
   - Surgery case CPT and/or ICD codes used in the following options are 
"BLD",5341,1,120,0)
     displayed from the SURGERY PROCEDURE/DIAGNOSIS CODES file (#136):
"BLD",5341,1,121,0)
     o Print a Surgery Risk Assessment [SROA PRINT ASSESSMENT] option
"BLD",5341,1,122,0)
     o List of Surgery Risk Assessments [SROA ASSESSMENT LIST] option 
"BLD",5341,1,123,0)
     o Exclusion Criteria (Enter/Edit) [SR NO ASSESSMENT REASON] option
"BLD",5341,1,124,0)
       Note: The new CPT code fields will not be editable from this
"BLD",5341,1,125,0)
       option.
"BLD",5341,1,126,0)
     o Update 1-Liner Case [SROA ONE-LINER UPDATE] option
"BLD",5341,1,127,0)
       Note: The new CPT code fields will not be editable from this
"BLD",5341,1,128,0)
       option.
"BLD",5341,1,129,0)
     o Queue Assessment Transmissions [SROA TRANSMIT ASSESSMENTS] option
"BLD",5341,1,130,0)
   - In the following options CPT codes are removed from the screen
"BLD",5341,1,131,0)
     headings:
"BLD",5341,1,132,0)
     o Preoperative Information (Enter/Edit) [SROA PREOP DATA] option 
"BLD",5341,1,133,0)
     o Laboratory Test Results (Enter/Edit) [SROA LAB] option
"BLD",5341,1,134,0)
     o Operation Information (Enter/Edit) [SROA OPERATION DATA] option
"BLD",5341,1,135,0)
       Note: The CPT code and Postoperative Diagnosis fields will not be 
"BLD",5341,1,136,0)
       editable from this option. 
"BLD",5341,1,137,0)
     o Patient Demographics (Enter/Edit) [SROA DEMOGRAPHICS] option
"BLD",5341,1,138,0)
     o Intraoperative Occurrences (Enter/Edit) [SRO INTRAOP COMP] option
"BLD",5341,1,139,0)
     o Postoperative Occurrences (Enter/Edit) [SRO POSTOP COMP] option
"BLD",5341,1,140,0)
     o Clinical Information (Enter/Edit) [SROA CLINICAL INFORMATION]
"BLD",5341,1,141,0)
       option
"BLD",5341,1,142,0)
     o Laboratory Test Results (Enter/Edit) [SROA LAB-CARDIAC] option
"BLD",5341,1,143,0)
     o Enter Cardiac Catheterization & Angiographic Data [SROA 
"BLD",5341,1,144,0)
       CATHETERIZATION] option 
"BLD",5341,1,145,0)
     o Operative Risk Summary Data (Enter/Edit) [SROA CARDIAC OPERATIVE 
"BLD",5341,1,146,0)
       RISK] option
"BLD",5341,1,147,0)
       Note: The CPT code fields will not be editable from this option.
"BLD",5341,1,148,0)
     o Cardiac Procedures Operative Data (Enter/Edit) [SROA CARDIAC 
"BLD",5341,1,149,0)
       PROCEDURES] option
"BLD",5341,1,150,0)
     o Outcome Information (Enter/Edit) [SROA CARDIAC-OUTCOMES] option
"BLD",5341,1,151,0)
     o Resource Data [SROA CARDIAC RESOURCE] option
"BLD",5341,1,152,0)
   - The Update Assessment Status to 'COMPLETE' [SROA COMPLETE ASSESSMENT]
"BLD",5341,1,153,0)
     option is modified to remove the ability to edit CPT and ICD codes 
"BLD",5341,1,154,0)
     from this option.
"BLD",5341,1,155,0)
 
"BLD",5341,1,156,0)
4. Functions that are currently part of the Surgery Nightly Cleanup and 
"BLD",5341,1,157,0)
   Updates [SRTASK-NIGHT] option are modified as follows:
"BLD",5341,1,158,0)
   - Store Operation Times function uses the CPT code fields in the 
"BLD",5341,1,159,0)
     SURGERY PROCEDURE/DIAGNOSIS CODES file (#136).
"BLD",5341,1,160,0)
   - File Surgery Data in PCE function is removed.
"BLD",5341,1,161,0)
 
"BLD",5341,1,162,0)
5. The Surgery to PCE interface is modified to send coding data from the 
"BLD",5341,1,163,0)
   SURGERY PROCEDURE/DIAGNOSIS CODES file (#136). The interface now passes
"BLD",5341,1,164,0)
   data to PCE in real time when the coder completes the coding process
"BLD",5341,1,165,0)
   for a case. After a case is filed with PCE, if certain data passed to 
"BLD",5341,1,166,0)
   PCE is changed within the Surgery software, the Surgery to PCE
"BLD",5341,1,167,0)
   interface sends an update to PCE immediately. ICD coding related data 
"BLD",5341,1,168,0)
   is updated through the Update/Verify Procedure/Diagnosis Codes
"BLD",5341,1,169,0)
   [SRCODING EDIT] option.
"BLD",5341,4,0)
^9.64PA^130^2
"BLD",5341,4,130,0)
130
"BLD",5341,4,130,2,0)
^9.641^130.275^5
"BLD",5341,4,130,2,130,0)
SURGERY  (File-top level)
"BLD",5341,4,130,2,130,1,0)
^9.6411^.01^24
"BLD",5341,4,130,2,130,1,.01,0)
PATIENT
"BLD",5341,4,130,2,130,1,.011,0)
IN/OUT-PATIENT STATUS
"BLD",5341,4,130,2,130,1,.016,0)
SERVICE CONNECTED
"BLD",5341,4,130,2,130,1,.017,0)
AGENT ORANGE EXPOSURE
"BLD",5341,4,130,2,130,1,.018,0)
IONIZING RADIATION EXPOSURE
"BLD",5341,4,130,2,130,1,.019,0)
ENVIRONMENTAL CONTAMINANTS
"BLD",5341,4,130,2,130,1,.02,0)
OPERATING ROOM
"BLD",5341,4,130,2,130,1,.021,0)
ASSOCIATED CLINIC
"BLD",5341,4,130,2,130,1,.022,0)
MILITARY SEXUAL TRAUMA
"BLD",5341,4,130,2,130,1,.023,0)
HEAD AND/OR NECK CANCER
"BLD",5341,4,130,2,130,1,.024,0)
COMBAT VET
"BLD",5341,4,130,2,130,1,.04,0)
SURGERY SPECIALTY
"BLD",5341,4,130,2,130,1,.14,0)
SURGEON
"BLD",5341,4,130,2,130,1,.164,0)
ATTEND SURG
"BLD",5341,4,130,2,130,1,.205,0)
TIME PAT IN OR
"BLD",5341,4,130,2,130,1,.232,0)
TIME PAT OUT OR
"BLD",5341,4,130,2,130,1,27,0)
PLANNED PRIN PROCEDURE CODE
"BLD",5341,4,130,2,130,1,32.5,0)
PRIN PRE-OP ICD DIAGNOSIS CODE
"BLD",5341,4,130,2,130,1,66,0)
PRIN DIAGNOSIS CODE
"BLD",5341,4,130,2,130,1,119,0)
NON-OR LOCATION
"BLD",5341,4,130,2,130,1,121,0)
TIME PROCEDURE BEGAN
"BLD",5341,4,130,2,130,1,122,0)
TIME PROCEDURE ENDED
"BLD",5341,4,130,2,130,1,123,0)
PROVIDER
"BLD",5341,4,130,2,130,1,124,0)
ATTEND PROVIDER
"BLD",5341,4,130,2,130.16,0)
OTHER PROCEDURES  (sub-file)
"BLD",5341,4,130,2,130.16,1,0)
^9.6411^3^1
"BLD",5341,4,130,2,130.16,1,3,0)
PLANNED OTHER PROC CPT CODE
"BLD",5341,4,130,2,130.165,0)
OTHER ASSOC DIAGNOSIS  (sub-file)
"BLD",5341,4,130,2,130.165,1,0)
^9.6411^.01^1
"BLD",5341,4,130,2,130.165,1,.01,0)
OTHER ASSOC DIAGNOSIS
"BLD",5341,4,130,2,130.18,0)
OTHER POSTOP DIAGS  (sub-file)
"BLD",5341,4,130,2,130.18,1,0)
^9.6411^3^2
"BLD",5341,4,130,2,130.18,1,.01,0)
OTHER POSTOP DIAGS
"BLD",5341,4,130,2,130.18,1,3,0)
ICD DIAGNOSIS CODE
"BLD",5341,4,130,2,130.275,0)
PRIN ASSOC DIAGNOSIS  (sub-file)
"BLD",5341,4,130,2,130.275,1,0)
^9.6411^.01^1
"BLD",5341,4,130,2,130.275,1,.01,0)
PRIN ASSOC DIAGNOSIS
"BLD",5341,4,130,222)
y^n^p^^^^n^^n
"BLD",5341,4,130,224)

"BLD",5341,4,136,0)
136
"BLD",5341,4,136,222)
y^n^f^^^^n
"BLD",5341,4,"APDD",130,130)

"BLD",5341,4,"APDD",130,130,.01)

"BLD",5341,4,"APDD",130,130,.011)

"BLD",5341,4,"APDD",130,130,.016)

"BLD",5341,4,"APDD",130,130,.017)

"BLD",5341,4,"APDD",130,130,.018)

"BLD",5341,4,"APDD",130,130,.019)

"BLD",5341,4,"APDD",130,130,.02)

"BLD",5341,4,"APDD",130,130,.021)

"BLD",5341,4,"APDD",130,130,.022)

"BLD",5341,4,"APDD",130,130,.023)

"BLD",5341,4,"APDD",130,130,.024)

"BLD",5341,4,"APDD",130,130,.04)

"BLD",5341,4,"APDD",130,130,.14)

"BLD",5341,4,"APDD",130,130,.164)

"BLD",5341,4,"APDD",130,130,.205)

"BLD",5341,4,"APDD",130,130,.232)

"BLD",5341,4,"APDD",130,130,27)

"BLD",5341,4,"APDD",130,130,32.5)

"BLD",5341,4,"APDD",130,130,66)

"BLD",5341,4,"APDD",130,130,119)

"BLD",5341,4,"APDD",130,130,121)

"BLD",5341,4,"APDD",130,130,122)

"BLD",5341,4,"APDD",130,130,123)

"BLD",5341,4,"APDD",130,130,124)

"BLD",5341,4,"APDD",130,130.16)

"BLD",5341,4,"APDD",130,130.16,3)

"BLD",5341,4,"APDD",130,130.165)

"BLD",5341,4,"APDD",130,130.165,.01)

"BLD",5341,4,"APDD",130,130.18)

"BLD",5341,4,"APDD",130,130.18,.01)

"BLD",5341,4,"APDD",130,130.18,3)

"BLD",5341,4,"APDD",130,130.275)

"BLD",5341,4,"APDD",130,130.275,.01)

"BLD",5341,4,"B",130,130)

"BLD",5341,4,"B",136,136)

"BLD",5341,6)
11^
"BLD",5341,"INI")
PRE^SROCD4
"BLD",5341,"INID")
^n^n
"BLD",5341,"INIT")
CONV^SROCD4
"BLD",5341,"KRN",0)
^9.67PA^8989.52^19
"BLD",5341,"KRN",.4,0)
.4
"BLD",5341,"KRN",.401,0)
.401
"BLD",5341,"KRN",.402,0)
.402
"BLD",5341,"KRN",.402,"NM",0)
^9.68A^10^9
"BLD",5341,"KRN",.402,"NM",1,0)
SREQUEST    FILE #130^130^0
"BLD",5341,"KRN",.402,"NM",2,0)
SROMEN-OPER    FILE #130^130^0
"BLD",5341,"KRN",.402,"NM",3,0)
SROMEN-OUT    FILE #130^130^0
"BLD",5341,"KRN",.402,"NM",4,0)
SRSCHED-UNREQUESTED    FILE #130^130^0
"BLD",5341,"KRN",.402,"NM",5,0)
SRSRES-ENTRY    FILE #130^130^0
"BLD",5341,"KRN",.402,"NM",6,0)
SRSRES-SCHED    FILE #130^130^0
"BLD",5341,"KRN",.402,"NM",7,0)
SRSRES1    FILE #130^130^0
"BLD",5341,"KRN",.402,"NM",8,0)
SRSREQV    FILE #130^130^0
"BLD",5341,"KRN",.402,"NM",10,0)
SROMEN-POST    FILE #130^130^0
"BLD",5341,"KRN",.402,"NM","B","SREQUEST    FILE #130",1)

"BLD",5341,"KRN",.402,"NM","B","SROMEN-OPER    FILE #130",2)

"BLD",5341,"KRN",.402,"NM","B","SROMEN-OUT    FILE #130",3)

"BLD",5341,"KRN",.402,"NM","B","SROMEN-POST    FILE #130",10)

"BLD",5341,"KRN",.402,"NM","B","SRSCHED-UNREQUESTED    FILE #130",4)

"BLD",5341,"KRN",.402,"NM","B","SRSREQV    FILE #130",8)

"BLD",5341,"KRN",.402,"NM","B","SRSRES-ENTRY    FILE #130",5)

"BLD",5341,"KRN",.402,"NM","B","SRSRES-SCHED    FILE #130",6)

"BLD",5341,"KRN",.402,"NM","B","SRSRES1    FILE #130",7)

"BLD",5341,"KRN",.403,0)
.403
"BLD",5341,"KRN",.5,0)
.5
"BLD",5341,"KRN",.84,0)
.84
"BLD",5341,"KRN",3.6,0)
3.6
"BLD",5341,"KRN",3.8,0)
3.8
"BLD",5341,"KRN",3.8,"NM",0)
^9.68A^^0
"BLD",5341,"KRN",9.2,0)
9.2
"BLD",5341,"KRN",9.8,0)
9.8
"BLD",5341,"KRN",9.8,"NM",0)
^9.68A^106^99
"BLD",5341,"KRN",9.8,"NM",1,0)
SRO1L1^^0^B16661168
"BLD",5341,"KRN",9.8,"NM",2,0)
SROACAR^^0^B10098864
"BLD",5341,"KRN",9.8,"NM",3,0)
SROACAT^^0^B8695359
"BLD",5341,"KRN",9.8,"NM",4,0)
SROACC0^^0^B26210969
"BLD",5341,"KRN",9.8,"NM",5,0)
SROACC1^^0^B16590247
"BLD",5341,"KRN",9.8,"NM",6,0)
SROACC2^^0^B15553723
"BLD",5341,"KRN",9.8,"NM",7,0)
SROACC3^^0^B15911250
"BLD",5341,"KRN",9.8,"NM",8,0)
SROACC4^^0^B14665771
"BLD",5341,"KRN",9.8,"NM",9,0)
SROACC5^^0^B17271167
"BLD",5341,"KRN",9.8,"NM",10,0)
SROACC6^^0^B14172012
"BLD",5341,"KRN",9.8,"NM",11,0)
SROACCM^^0^B8018534
"BLD",5341,"KRN",9.8,"NM",12,0)
SROACLN^^0^B10163917
"BLD",5341,"KRN",9.8,"NM",13,0)
SROACOM^^0^B21753937
"BLD",5341,"KRN",9.8,"NM",14,0)
SROACOP^^0^B19945734
"BLD",5341,"KRN",9.8,"NM",15,0)
SROACPM^^0^B40295841
"BLD",5341,"KRN",9.8,"NM",16,0)
SROAEX^^0^B17035378
"BLD",5341,"KRN",9.8,"NM",17,0)
SROALAB^^0^B6024559
"BLD",5341,"KRN",9.8,"NM",18,0)
SROAOP^^0^B20148443
"BLD",5341,"KRN",9.8,"NM",19,0)
SROAOTH^^0^B5861466
"BLD",5341,"KRN",9.8,"NM",20,0)
SROAOUT^^0^B12360492
"BLD",5341,"KRN",9.8,"NM",21,0)
SROAPCA1^^0^B30690413
"BLD",5341,"KRN",9.8,"NM",22,0)
SROAPM^^0^B40311934
"BLD",5341,"KRN",9.8,"NM",23,0)
SROAPRE^^0^B20305987
"BLD",5341,"KRN",9.8,"NM",24,0)
SROAPRT3^^0^B14821883
"BLD",5341,"KRN",9.8,"NM",25,0)
SROAR1^^0^B17090080
"BLD",5341,"KRN",9.8,"NM",26,0)
SROAR2^^0^B15038123
"BLD",5341,"KRN",9.8,"NM",27,0)
SROARET^^0^B19049777
"BLD",5341,"KRN",9.8,"NM",28,0)
SROATCM1^^0^B51869518
"BLD",5341,"KRN",9.8,"NM",29,0)
SROATM2^^0^B33399568
"BLD",5341,"KRN",9.8,"NM",30,0)
SROATM3^^0^B19436720
"BLD",5341,"KRN",9.8,"NM",31,0)
SROAUTL^^0^B41539294
"BLD",5341,"KRN",9.8,"NM",32,0)
SROAUTL3^^0^B12864572
"BLD",5341,"KRN",9.8,"NM",33,0)
SROCLAB^^0^B3998916
"BLD",5341,"KRN",9.8,"NM",34,0)
SROCMPS^^0^B17061652
"BLD",5341,"KRN",9.8,"NM",35,0)
SRODTH^^0^B12013664
"BLD",5341,"KRN",9.8,"NM",36,0)
SRONAN1^^0^B9950439
"BLD",5341,"KRN",9.8,"NM",37,0)
SRONP0^^0^B6747040
"BLD",5341,"KRN",9.8,"NM",38,0)
SRONP2^^0^B17607439
"BLD",5341,"KRN",9.8,"NM",39,0)
SROQ0A^^0^B15549352
"BLD",5341,"KRN",9.8,"NM",40,0)
SROQADM^^0^B27368110
"BLD",5341,"KRN",9.8,"NM",41,0)
SROQD^^0^B33847612
"BLD",5341,"KRN",9.8,"NM",42,0)
SROQD1^^0^B12825991
"BLD",5341,"KRN",9.8,"NM",43,0)
SROQIDP^^0^B19872075
"BLD",5341,"KRN",9.8,"NM",44,0)
SROQIDP0^^0^B13343047
"BLD",5341,"KRN",9.8,"NM",45,0)
SROQL^^0^B27803674
"BLD",5341,"KRN",9.8,"NM",46,0)
SROQN^^0^B29511817
"BLD",5341,"KRN",9.8,"NM",47,0)
SROPCE0^^0^B29268226
"BLD",5341,"KRN",9.8,"NM",48,0)
SROPCE0A^^0^B42322529
"BLD",5341,"KRN",9.8,"NM",49,0)
SROPCE0B^^0^B19503944
"BLD",5341,"KRN",9.8,"NM",50,0)
SROTHER^^0^B14170836
"BLD",5341,"KRN",9.8,"NM",51,0)
SROUTL^^0^B41983666
"BLD",5341,"KRN",9.8,"NM",52,0)
SRSCPT1^^0^B15065442
"BLD",5341,"KRN",9.8,"NM",53,0)
SRSCPT2^^0^B16666832
"BLD",5341,"KRN",9.8,"NM",60,0)
SROALSS^^0^B17249054
"BLD",5341,"KRN",9.8,"NM",61,0)
SROALSSP^^0^B17066208
"BLD",5341,"KRN",9.8,"NM",62,0)
SROALST^^0^B13078748
"BLD",5341,"KRN",9.8,"NM",63,0)
SROALSTP^^0^B12197759
"BLD",5341,"KRN",9.8,"NM",64,0)
SRSAVG^^0^B5842281
"BLD",5341,"KRN",9.8,"NM",65,0)
SROALL^^0^B14403320
"BLD",5341,"KRN",9.8,"NM",66,0)
SROALLP^^0^B12421048
"BLD",5341,"KRN",9.8,"NM",67,0)
SROALLS^^0^B18743963
"BLD",5341,"KRN",9.8,"NM",68,0)
SROALLSP^^0^B18389897
"BLD",5341,"KRN",9.8,"NM",69,0)
SROANT^^0^B11065524
"BLD",5341,"KRN",9.8,"NM",70,0)
SROANTP^^0^B11267319
"BLD",5341,"KRN",9.8,"NM",71,0)
SROANTS^^0^B13577952
"BLD",5341,"KRN",9.8,"NM",72,0)
SROANTSP^^0^B12522927
"BLD",5341,"KRN",9.8,"NM",73,0)
SROUTLN^^0^B1090084
"BLD",5341,"KRN",9.8,"NM",74,0)
SRSKILL2^^0^B9089088
"BLD",5341,"KRN",9.8,"NM",75,0)
SROAOP1^^0^B18659468
"BLD",5341,"KRN",9.8,"NM",76,0)
SROPCEP^^0^B74884918
"BLD",5341,"KRN",9.8,"NM",77,0)
SRONITE^^0^B3398132
"BLD",5341,"KRN",9.8,"NM",78,0)
SROPCEU0^^0^B24720463
"BLD",5341,"KRN",9.8,"NM",79,0)
SROPCEX^^0^B5206173
"BLD",5341,"KRN",9.8,"NM",80,0)
SROCD^^0^B18456751
"BLD",5341,"KRN",9.8,"NM",81,0)
SROCD0^^0^B58953825
"BLD",5341,"KRN",9.8,"NM",82,0)
SROCD1^^0^B21644302
"BLD",5341,"KRN",9.8,"NM",83,0)
SROCD2^^0^B22859343
"BLD",5341,"KRN",9.8,"NM",84,0)
SROCD3^^0^B22787848
"BLD",5341,"KRN",9.8,"NM",85,0)
SROCD4^^0^B27765963
"BLD",5341,"KRN",9.8,"NM",86,0)
SROCDX^^0^B21645937
"BLD",5341,"KRN",9.8,"NM",87,0)
SROCDX1^^0^B25057274
"BLD",5341,"KRN",9.8,"NM",88,0)
SROCDX2^^0^B14335464
"BLD",5341,"KRN",9.8,"NM",89,0)
SROMOD0^^0^B41364677
"BLD",5341,"KRN",9.8,"NM",90,0)
SROCPT0^^0^B14774043
"BLD",5341,"KRN",9.8,"NM",92,0)
SROATMNO^^0^B25963736
"BLD",5341,"KRN",9.8,"NM",93,0)
SROAPR2^^0^B10438227
"BLD",5341,"KRN",9.8,"NM",94,0)
SROPDEL^^0^B14289565
"BLD",5341,"KRN",9.8,"NM",95,0)
SRONOP1^^0^B16584848
"BLD",5341,"KRN",9.8,"NM",96,0)
SROALC^^0^B10924370
"BLD",5341,"KRN",9.8,"NM",97,0)
SROALCS^^0^B14237632
"BLD",5341,"KRN",9.8,"NM",98,0)
SROALCSP^^0^B12507398
"BLD",5341,"KRN",9.8,"NM",99,0)
SROALM^^0^B21479758
"BLD",5341,"KRN",9.8,"NM",100,0)
SROALT^^0^B10817407
"BLD",5341,"KRN",9.8,"NM",101,0)
SROALTS^^0^B13156100
"BLD",5341,"KRN",9.8,"NM",102,0)
SROALTSP^^0^B12292692
"BLD",5341,"KRN",9.8,"NM",103,0)
SROALCP^^0^B10263576
"BLD",5341,"KRN",9.8,"NM",104,0)
SROALTP^^0^B10106538
"BLD",5341,"KRN",9.8,"NM",105,0)
SROPS1^^0^B14523964
"BLD",5341,"KRN",9.8,"NM",106,0)
SROADX2^^0^B32744906
"BLD",5341,"KRN",9.8,"NM","B","SRO1L1",1)

"BLD",5341,"KRN",9.8,"NM","B","SROACAR",2)

"BLD",5341,"KRN",9.8,"NM","B","SROACAT",3)

"BLD",5341,"KRN",9.8,"NM","B","SROACC0",4)

"BLD",5341,"KRN",9.8,"NM","B","SROACC1",5)

"BLD",5341,"KRN",9.8,"NM","B","SROACC2",6)

"BLD",5341,"KRN",9.8,"NM","B","SROACC3",7)

"BLD",5341,"KRN",9.8,"NM","B","SROACC4",8)

"BLD",5341,"KRN",9.8,"NM","B","SROACC5",9)

"BLD",5341,"KRN",9.8,"NM","B","SROACC6",10)

"BLD",5341,"KRN",9.8,"NM","B","SROACCM",11)

"BLD",5341,"KRN",9.8,"NM","B","SROACLN",12)

"BLD",5341,"KRN",9.8,"NM","B","SROACOM",13)

"BLD",5341,"KRN",9.8,"NM","B","SROACOP",14)

"BLD",5341,"KRN",9.8,"NM","B","SROACPM",15)

"BLD",5341,"KRN",9.8,"NM","B","SROADX2",106)

"BLD",5341,"KRN",9.8,"NM","B","SROAEX",16)

"BLD",5341,"KRN",9.8,"NM","B","SROALAB",17)

"BLD",5341,"KRN",9.8,"NM","B","SROALC",96)

"BLD",5341,"KRN",9.8,"NM","B","SROALCP",103)

"BLD",5341,"KRN",9.8,"NM","B","SROALCS",97)

"BLD",5341,"KRN",9.8,"NM","B","SROALCSP",98)

"BLD",5341,"KRN",9.8,"NM","B","SROALL",65)

"BLD",5341,"KRN",9.8,"NM","B","SROALLP",66)

"BLD",5341,"KRN",9.8,"NM","B","SROALLS",67)

"BLD",5341,"KRN",9.8,"NM","B","SROALLSP",68)

"BLD",5341,"KRN",9.8,"NM","B","SROALM",99)

"BLD",5341,"KRN",9.8,"NM","B","SROALSS",60)

"BLD",5341,"KRN",9.8,"NM","B","SROALSSP",61)

"BLD",5341,"KRN",9.8,"NM","B","SROALST",62)

"BLD",5341,"KRN",9.8,"NM","B","SROALSTP",63)

"BLD",5341,"KRN",9.8,"NM","B","SROALT",100)

"BLD",5341,"KRN",9.8,"NM","B","SROALTP",104)

"BLD",5341,"KRN",9.8,"NM","B","SROALTS",101)

"BLD",5341,"KRN",9.8,"NM","B","SROALTSP",102)

"BLD",5341,"KRN",9.8,"NM","B","SROANT",69)

"BLD",5341,"KRN",9.8,"NM","B","SROANTP",70)

"BLD",5341,"KRN",9.8,"NM","B","SROANTS",71)

"BLD",5341,"KRN",9.8,"NM","B","SROANTSP",72)

"BLD",5341,"KRN",9.8,"NM","B","SROAOP",18)

"BLD",5341,"KRN",9.8,"NM","B","SROAOP1",75)

"BLD",5341,"KRN",9.8,"NM","B","SROAOTH",19)

"BLD",5341,"KRN",9.8,"NM","B","SROAOUT",20)

"BLD",5341,"KRN",9.8,"NM","B","SROAPCA1",21)

"BLD",5341,"KRN",9.8,"NM","B","SROAPM",22)

"BLD",5341,"KRN",9.8,"NM","B","SROAPR2",93)

"BLD",5341,"KRN",9.8,"NM","B","SROAPRE",23)

"BLD",5341,"KRN",9.8,"NM","B","SROAPRT3",24)

"BLD",5341,"KRN",9.8,"NM","B","SROAR1",25)

"BLD",5341,"KRN",9.8,"NM","B","SROAR2",26)

"BLD",5341,"KRN",9.8,"NM","B","SROARET",27)

"BLD",5341,"KRN",9.8,"NM","B","SROATCM1",28)

"BLD",5341,"KRN",9.8,"NM","B","SROATM2",29)

"BLD",5341,"KRN",9.8,"NM","B","SROATM3",30)

"BLD",5341,"KRN",9.8,"NM","B","SROATMNO",92)

"BLD",5341,"KRN",9.8,"NM","B","SROAUTL",31)

"BLD",5341,"KRN",9.8,"NM","B","SROAUTL3",32)

"BLD",5341,"KRN",9.8,"NM","B","SROCD",80)

"BLD",5341,"KRN",9.8,"NM","B","SROCD0",81)

"BLD",5341,"KRN",9.8,"NM","B","SROCD1",82)

"BLD",5341,"KRN",9.8,"NM","B","SROCD2",83)

"BLD",5341,"KRN",9.8,"NM","B","SROCD3",84)

"BLD",5341,"KRN",9.8,"NM","B","SROCD4",85)

"BLD",5341,"KRN",9.8,"NM","B","SROCDX",86)

"BLD",5341,"KRN",9.8,"NM","B","SROCDX1",87)

"BLD",5341,"KRN",9.8,"NM","B","SROCDX2",88)

"BLD",5341,"KRN",9.8,"NM","B","SROCLAB",33)

"BLD",5341,"KRN",9.8,"NM","B","SROCMPS",34)

"BLD",5341,"KRN",9.8,"NM","B","SROCPT0",90)

"BLD",5341,"KRN",9.8,"NM","B","SRODTH",35)

"BLD",5341,"KRN",9.8,"NM","B","SROMOD0",89)

"BLD",5341,"KRN",9.8,"NM","B","SRONAN1",36)

"BLD",5341,"KRN",9.8,"NM","B","SRONITE",77)

"BLD",5341,"KRN",9.8,"NM","B","SRONOP1",95)

"BLD",5341,"KRN",9.8,"NM","B","SRONP0",37)

"BLD",5341,"KRN",9.8,"NM","B","SRONP2",38)

"BLD",5341,"KRN",9.8,"NM","B","SROPCE0",47)

"BLD",5341,"KRN",9.8,"NM","B","SROPCE0A",48)

"BLD",5341,"KRN",9.8,"NM","B","SROPCE0B",49)

"BLD",5341,"KRN",9.8,"NM","B","SROPCEP",76)

"BLD",5341,"KRN",9.8,"NM","B","SROPCEU0",78)

"BLD",5341,"KRN",9.8,"NM","B","SROPCEX",79)

"BLD",5341,"KRN",9.8,"NM","B","SROPDEL",94)

"BLD",5341,"KRN",9.8,"NM","B","SROPS1",105)

"BLD",5341,"KRN",9.8,"NM","B","SROQ0A",39)

"BLD",5341,"KRN",9.8,"NM","B","SROQADM",40)

"BLD",5341,"KRN",9.8,"NM","B","SROQD",41)

"BLD",5341,"KRN",9.8,"NM","B","SROQD1",42)

"BLD",5341,"KRN",9.8,"NM","B","SROQIDP",43)

"BLD",5341,"KRN",9.8,"NM","B","SROQIDP0",44)

"BLD",5341,"KRN",9.8,"NM","B","SROQL",45)

"BLD",5341,"KRN",9.8,"NM","B","SROQN",46)

"BLD",5341,"KRN",9.8,"NM","B","SROTHER",50)

"BLD",5341,"KRN",9.8,"NM","B","SROUTL",51)

"BLD",5341,"KRN",9.8,"NM","B","SROUTLN",73)

"BLD",5341,"KRN",9.8,"NM","B","SRSAVG",64)

"BLD",5341,"KRN",9.8,"NM","B","SRSCPT1",52)

"BLD",5341,"KRN",9.8,"NM","B","SRSCPT2",53)

"BLD",5341,"KRN",9.8,"NM","B","SRSKILL2",74)

"BLD",5341,"KRN",19,0)
19
"BLD",5341,"KRN",19,"NM",0)
^9.68A^2^2
"BLD",5341,"KRN",19,"NM",1,0)
SRCODING EDIT^^0
"BLD",5341,"KRN",19,"NM",2,0)
SRO PCE STATUS^^0
"BLD",5341,"KRN",19,"NM","B","SRCODING EDIT",1)

"BLD",5341,"KRN",19,"NM","B","SRO PCE STATUS",2)

"BLD",5341,"KRN",19.1,0)
19.1
"BLD",5341,"KRN",101,0)
101
"BLD",5341,"KRN",101,"NM",0)
^9.68A^^0
"BLD",5341,"KRN",409.61,0)
409.61
"BLD",5341,"KRN",771,0)
771
"BLD",5341,"KRN",870,0)
870
"BLD",5341,"KRN",8989.51,0)
8989.51
"BLD",5341,"KRN",8989.52,0)
8989.52
"BLD",5341,"KRN",8994,0)
8994
"BLD",5341,"KRN","B",.4,.4)

"BLD",5341,"KRN","B",.401,.401)

"BLD",5341,"KRN","B",.402,.402)

"BLD",5341,"KRN","B",.403,.403)

"BLD",5341,"KRN","B",.5,.5)

"BLD",5341,"KRN","B",.84,.84)

"BLD",5341,"KRN","B",3.6,3.6)

"BLD",5341,"KRN","B",3.8,3.8)

"BLD",5341,"KRN","B",9.2,9.2)

"BLD",5341,"KRN","B",9.8,9.8)

"BLD",5341,"KRN","B",19,19)

"BLD",5341,"KRN","B",19.1,19.1)

"BLD",5341,"KRN","B",101,101)

"BLD",5341,"KRN","B",409.61,409.61)

"BLD",5341,"KRN","B",771,771)

"BLD",5341,"KRN","B",870,870)

"BLD",5341,"KRN","B",8989.51,8989.51)

"BLD",5341,"KRN","B",8989.52,8989.52)

"BLD",5341,"KRN","B",8994,8994)

"BLD",5341,"QUES",0)
^9.62^^
"BLD",5341,"REQB",0)
^9.611^5^4
"BLD",5341,"REQB",2,0)
SR*3.0*118^2
"BLD",5341,"REQB",3,0)
SR*3.0*132^2
"BLD",5341,"REQB",4,0)
SR*3.0*141^2
"BLD",5341,"REQB",5,0)
SR*3.0*150^2
"BLD",5341,"REQB","B","SR*3.0*118",2)

"BLD",5341,"REQB","B","SR*3.0*132",3)

"BLD",5341,"REQB","B","SR*3.0*141",4)

"BLD",5341,"REQB","B","SR*3.0*150",5)

"FIA",130)
SURGERY
"FIA",130,0)
^SRF(
"FIA",130,0,0)
130IP
"FIA",130,0,1)
y^n^p^^^^n^^n
"FIA",130,0,10)

"FIA",130,0,11)

"FIA",130,0,"RLRO")

"FIA",130,0,"VR")
3.0^SR
"FIA",130,130)
1
"FIA",130,130,.01)

"FIA",130,130,.011)

"FIA",130,130,.016)

"FIA",130,130,.017)

"FIA",130,130,.018)

"FIA",130,130,.019)

"FIA",130,130,.02)

"FIA",130,130,.021)

"FIA",130,130,.022)

"FIA",130,130,.023)

"FIA",130,130,.024)

"FIA",130,130,.04)

"FIA",130,130,.14)

"FIA",130,130,.164)

"FIA",130,130,.205)

"FIA",130,130,.232)

"FIA",130,130,.74)

"FIA",130,130,27)

"FIA",130,130,27.5)

"FIA",130,130,32.5)

"FIA",130,130,66)

"FIA",130,130,119)

"FIA",130,130,121)

"FIA",130,130,122)

"FIA",130,130,123)

"FIA",130,130,124)

"FIA",130,130.16)
1
"FIA",130,130.16,3)

"FIA",130,130.16,5)

"FIA",130,130.165)
1
"FIA",130,130.165,.01)

"FIA",130,130.18)
1
"FIA",130,130.18,.01)

"FIA",130,130.18,3)

"FIA",130,130.275)
1
"FIA",130,130.275,.01)

"FIA",136)
SURGERY PROCEDURE/DIAGNOSIS CODES
"FIA",136,0)
^SRO(136,
"FIA",136,0,0)
136P
"FIA",136,0,1)
y^n^f^^^^n
"FIA",136,0,10)

"FIA",136,0,11)

"FIA",136,0,"RLRO")

"FIA",136,0,"VR")
3.0^SR
"FIA",136,136)
0
"FIA",136,136.01)
0
"FIA",136,136.011)
0
"FIA",136,136.02)
0
"FIA",136,136.03)
0
"FIA",136,136.04)
0
"FIA",136,136.31)
0
"FIA",136,136.32)
0
"INI")
PRE^SROCD4
"INIT")
CONV^SROCD4
"IX",130,130,"AD",0)
130^AD^CoreFLS fields monitor flag.^MU^^R^IR^I^130^^^^^A
"IX",130,130,"AD",.1,0)
^^2^2^3020822^
"IX",130,130,"AD",.1,1,0)
This cross-reference will be checked before sending a notification to
"IX",130,130,"AD",.1,2,0)
the CoreFLS software after editing any of these fields.
"IX",130,130,"AD",1)
S ^TMP("CSLSUR1",$J)="" Q
"IX",130,130,"AD",1.4)
N I S (X,I)=0 F  S I=$O(X1(I)) Q:'I  I X1(I)'=X2(I) S X=1 Q
"IX",130,130,"AD",2)
S ^TMP("CSLSUR1",$J)="" Q
"IX",130,130,"AD",2.4)
N I S (X,I)=0 F  S I=$O(X1(I)) Q:'I  I X1(I)'=X2(I) S X=1 Q
"IX",130,130,"AD",2.5)
Q
"IX",130,130,"AD",11.1,0)
^.114IA^11^11
"IX",130,130,"AD",11.1,1,0)
1^F^130^.14^^^F
"IX",130,130,"AD",11.1,2,0)
2^F^130^27^^^F
"IX",130,130,"AD",11.1,3,0)
3^F^130^.02^^^F
"IX",130,130,"AD",11.1,4,0)
4^F^130^.04^^^F
"IX",130,130,"AD",11.1,5,0)
5^F^130^10^^^F
"IX",130,130,"AD",11.1,6,0)
6^F^130^11^^^F
"IX",130,130,"AD",11.1,7,0)
7^F^130^26^^^F
"IX",130,130,"AD",11.1,8,0)
8^F^130^.011^^^F
"IX",130,130,"AD",11.1,9,0)
9^F^130^.09^^^F
"IX",130,130,"AD",11.1,10,0)
10^F^130^35^^^F
"IX",130,130,"AD",11.1,11,0)
11^F^130^.164^^^F
"IX",130,130,"AES",0)
130^AES^Create/delete stub entries in TIU for nurse/operation reports.^MU^^F^^I^130^^^^^A
"IX",130,130,"AES",.1,0)
^^6^6^3010412^
"IX",130,130,"AES",.1,1,0)
This cross reference is responsible for creating stub entries in TIU for
"IX",130,130,"AES",.1,2,0)
the nurse intraoperative report and the operation report when the TIME PAT
"IX",130,130,"AES",.1,3,0)
OUT OR field (#.232) is entered.  It is also responsible for deleting the
"IX",130,130,"AES",.1,4,0)
stub entries in TIU for these same reports, if unsigned, when the TIME PAT
"IX",130,130,"AES",.1,5,0)
OUT OR field (#.232) is deleted.  No action occurs if the value in the
"IX",130,130,"AES",.1,6,0)
TIME PATOUT OR field (#.232) is modified.
"IX",130,130,"AES",1)
D AES^SROESX
"IX",130,130,"AES",1.4)
S X=X1(1)=""
"IX",130,130,"AES",2)
D KAES^SROESX
"IX",130,130,"AES",2.4)
S X=X2(1)=""
"IX",130,130,"AES",11.1,0)
^.114IA^1^1
"IX",130,130,"AES",11.1,1,0)
1^F^130^.232^^^F
"IX",130,130,"AES1",0)
130^AES1^Update TIU when surgeon is changed.^MU^^F^^I^130^^^^^A
"IX",130,130,"AES1",.1,0)
^^3^3^3020204^
"IX",130,130,"AES1",.1,1,0)
This cross reference is responsible for updating the AUTHOR/DICTATOR field
"IX",130,130,"AES1",.1,2,0)
(#1202) and the EXPECTED SIGNER field (#1204) in the TIU DOCUMENT file
"IX",130,130,"AES1",.1,3,0)
(#8925) for the Operation Report when the surgeon is edited.
"IX",130,130,"AES1",1)
D SET^SROESX0
"IX",130,130,"AES1",1.4)
S X=X1(1)'=X2(1)
"IX",130,130,"AES1",2)
Q
"IX",130,130,"AES1",2.4)
S X=0
"IX",130,130,"AES1",11.1,0)
^.114IA^1^1
"IX",130,130,"AES1",11.1,1,0)
1^F^130^.14^^^F
"IX",130,130,"AES2",0)
130^AES2^Update TIU when provider is changed.^MU^^F^^I^130^^^^^A
"IX",130,130,"AES2",.1,0)
^^3^3^3020204^
"IX",130,130,"AES2",.1,1,0)
This cross reference is responsible for updating the AUTHOR/DICTATOR field
"IX",130,130,"AES2",.1,2,0)
(#1202) and the EXPECTED SIGNER field (#1204) in the TIU DOCUMENT file
"IX",130,130,"AES2",.1,3,0)
(#8925) for the Procedure Report (Non-OR) when the provider is edited.
"IX",130,130,"AES2",1)
D SET^SROESX0
"IX",130,130,"AES2",1.4)
S X=X1(1)'=X2(1)
"IX",130,130,"AES2",2)
Q
"IX",130,130,"AES2",2.4)
S X=0
"IX",130,130,"AES2",11.1,0)
^.114IA^1^1
"IX",130,130,"AES2",11.1,1,0)
1^F^130^123^^^F
"IX",130,130,"AES3",0)
130^AES3^Update TIU when attending surgeon is changed.^MU^^F^^I^130^^^^^A
"IX",130,130,"AES3",.1,0)
^^4^4^3020205^
"IX",130,130,"AES3",.1,1,0)
This cross reference is responsible for updating the EXPECTED COSIGNER
"IX",130,130,"AES3",.1,2,0)
field (#1208) and the ATTENDING PHYSICIAN field (#1209) in the TIU
"IX",130,130,"AES3",.1,3,0)
DOCUMENT file (#8925) for the Operation Report when the attending surgeon
"IX",130,130,"AES3",.1,4,0)
is edited.
"IX",130,130,"AES3",1)
D SET1^SROESX0
"IX",130,130,"AES3",1.4)
S X=((X1(1)'=X2(1))&(X2(1)'=""))
"IX",130,130,"AES3",2)
D SET1^SROESX0
"IX",130,130,"AES3",2.4)
S X=X2(1)=""
"IX",130,130,"AES3",11.1,0)
^.114IA^1^1
"IX",130,130,"AES3",11.1,1,0)
1^F^130^.164^^^F
"IX",130,130,"AES4",0)
130^AES4^Update TIU when attending provider is changed.^MU^^F^^I^130^^^^^A
"IX",130,130,"AES4",.1,0)
^^4^4^3020205^^
"IX",130,130,"AES4",.1,1,0)
This cross reference is responsible for updating the EXPECTED COSIGNER
"IX",130,130,"AES4",.1,2,0)
field (#1208) and the ATTENDING PHYSICIAN field (#1209) in the TIU
"IX",130,130,"AES4",.1,3,0)
DOCUMENT file (#8925) for the Procedure Report (Non-OR) when the attending
"IX",130,130,"AES4",.1,4,0)
provider is edited.
"IX",130,130,"AES4",1)
D SET1^SROESX0
"IX",130,130,"AES4",1.4)
S X=((X1(1)'=X2(1))&(X2(1)'=""))
"IX",130,130,"AES4",2)
D SET1^SROESX0
"IX",130,130,"AES4",2.4)
S X=X2(1)=""
"IX",130,130,"AES4",11.1,0)
^.114IA^1^1
"IX",130,130,"AES4",11.1,1,0)
1^F^130^124^^^F
"IX",130,130,"AESP",0)
130^AESP^Create/delete stub entries in TIU for procedure reports (non-OR).^MU^^R^^I^130^^^^^A
"IX",130,130,"AESP",.1,0)
^^8^8^3020226^
"IX",130,130,"AESP",.1,1,0)
This cross reference is responsible for creating a stub entry in TIU for
"IX",130,130,"AESP",.1,2,0)
the non-OR procedure report when the TIME PROCEDURE ENDED field (#122) is
"IX",130,130,"AESP",.1,3,0)
entered and the DICTATED SUMMARY EXPECTED field (#1004) is set to YES.  It
"IX",130,130,"AESP",.1,4,0)
is also responsible for deleting the stub entry in TIU for this report, if
"IX",130,130,"AESP",.1,5,0)
unsigned, when the TIME PROCEDURE ENDED field (#122) is deleted or if the
"IX",130,130,"AESP",.1,6,0)
DICTATED SUMMARY EXPECTED field (#1004) is deleted or  changed to NO.  No
"IX",130,130,"AESP",.1,7,0)
action occurs if the value in the TIME PROCEDURE ENDED field (#122) is
"IX",130,130,"AESP",.1,8,0)
modified.
"IX",130,130,"AESP",1)
D AESP^SROESXP
"IX",130,130,"AESP",1.4)
S X=$$SCOND^SROESXP(.X1,.X2)
"IX",130,130,"AESP",2)
D KAESP^SROESXP
"IX",130,130,"AESP",2.4)
S X=$$KCOND^SROESXP(.X1,.X2)
"IX",130,130,"AESP",11.1,0)
^.114IA^2^2
"IX",130,130,"AESP",11.1,1,0)
1^F^130^122^^^F
"IX",130,130,"AESP",11.1,2,0)
2^F^130^1004^^^F
"IX",130,130.16,"AC",0)
130.16^AC^CoreFLS fields monitor flag.^MU^^R^IR^I^130.16^^^^^A
"IX",130,130.16,"AC",.1,0)
^^2^2^3020822^
"IX",130,130.16,"AC",.1,1,0)
This cross-reference will be checked before sending a notification to
"IX",130,130.16,"AC",.1,2,0)
the CoreFLS software after editing any of these fields.
"IX",130,130.16,"AC",1)
S ^TMP("CSLSUR1",$J)="" Q
"IX",130,130.16,"AC",1.4)
N I S (X,I)=0 F  S I=$O(X1(I)) Q:'I  I X1(I)'=X2(I) S X=1 Q
"IX",130,130.16,"AC",2)
S ^TMP("CSLSUR1",$J)="" Q
"IX",130,130.16,"AC",2.4)
N I S (X,I)=0 F  S I=$O(X1(I)) Q:'I  I X1(I)'=X2(I) S X=1 Q
"IX",130,130.16,"AC",2.5)
Q
"IX",130,130.16,"AC",11.1,0)
^.114IA^2^2
"IX",130,130.16,"AC",11.1,1,0)
1^F^130.16^.01^^^F
"IX",130,130.16,"AC",11.1,2,0)
2^F^130.16^3^^^F
"KRN",.402,739,-1)
0^5
"KRN",.402,739,0)
SRSRES-ENTRY^3050624.154^^130^^^3050624
"KRN",.402,739,"DIAB",1,0,130,0)
26;T
"KRN",.402,739,"DIAB",1,1,130.03,0)
.01;T
"KRN",.402,739,"DIAB",1,1,130.065,0)
.01;T
"KRN",.402,739,"DIAB",1,1,130.14,0)
.01;T
"KRN",.402,739,"DIAB",1,1,130.16,0)
.01;T
"KRN",.402,739,"DIAB",1,1,130.17,0)
.01;T
"KRN",.402,739,"DIAB",2,0,130,0)
.42;T
"KRN",.402,739,"DIAB",2,1,130.03,0)
1;T
"KRN",.402,739,"DIAB",2,1,130.14,0)
1;T
"KRN",.402,739,"DIAB",2,1,130.16,0)
3;T
"KRN",.402,739,"DIAB",2,1,130.17,0)
2;T
"KRN",.402,739,"DIAB",3,0,130,0)
27;T
"KRN",.402,739,"DIAB",3,1,130.03,0)
2;T
"KRN",.402,739,"DIAB",3,1,130.16,0)
1.5;T
"KRN",.402,739,"DIAB",4,0,130,0)
32;T
"KRN",.402,739,"DIAB",4,1,130.03,0)
3;T
"KRN",.402,739,"DIAB",5,0,130,0)
32.5;T
"KRN",.402,739,"DIAB",5,1,130.03,0)
4;T
"KRN",.402,739,"DIAB",6,0,130,0)
.72;T
"KRN",.402,739,"DIAB",6,1,130.03,0)
5;T
"KRN",.402,739,"DIAB",7,0,130,0)
.011//I;T
"KRN",.402,739,"DIAB",8,0,130,0)
56;T
"KRN",.402,739,"DIAB",9,0,130,0)
.035;T
"KRN",.402,739,"DIAB",10,0,130,0)
.04;T
"KRN",.402,739,"DIAB",11,0,130,0)
.14;T
"KRN",.402,739,"DIAB",12,0,130,0)
.15;T
"KRN",.402,739,"DIAB",13,0,130,0)
.16;T
"KRN",.402,739,"DIAB",14,0,130,0)
.164;T
"KRN",.402,739,"DIAB",15,0,130,0)
.43;T
"KRN",.402,739,"DIAB",16,0,130,0)
.037;T
"KRN",.402,739,"DIAB",17,0,130,0)
SURGERY POS;T
"KRN",.402,739,"DIAB",18,0,130,0)
1.01;T
"KRN",.402,739,"DIAB",19,0,130,0)
1.02;T
"KRN",.402,739,"DIAB",20,0,130,0)
1.03;T
"KRN",.402,739,"DIAB",21,0,130,0)
1.035;T
"KRN",.402,739,"DIAB",22,0,130,0)
38;T
"KRN",.402,739,"DIAB",23,0,130,0)
40;T
"KRN",.402,739,"DIAB",24,0,130,0)
1.05;T
"KRN",.402,739,"DIAB",25,0,130,0)
1.04;T
"KRN",.402,739,"DIAB",26,0,130,0)
.05;T
"KRN",.402,739,"DIAB",27,0,130,0)
23;T
"KRN",.402,739,"DIAB",28,0,130,0)
.28;T
"KRN",.402,739,"DIAB",29,0,130,0)
55;T
"KRN",.402,739,"DIAB",30,0,130,0)
BRIEF;T
"KRN",.402,739,"DIAB",31,0,130,0)
80;T
"KRN",.402,739,"DR",1,130)
26T~;.42T~;27T~;32T~;32.5T~;.72T~;.011T~//I;56T~;.035T~;.04T~;.14T~;.15T~;.16T~;.164T~;.43T~;.037T~;65T~;1.01T~;1.02T~;1.03T~;1.035T~;38T~;40T~;1.05T~;1.04T~;.05T~;23T~;.28T~;55T~;60T~;80T~;
"KRN",.402,739,"DR",2,130.03)
.01T~;1T~;2T~;3T~;4T~;5T~;
"KRN",.402,739,"DR",2,130.065)
.01T~;
"KRN",.402,739,"DR",2,130.14)
.01T~;1T~;
"KRN",.402,739,"DR",2,130.16)
.01T~;3T~;1.5T~;
"KRN",.402,739,"DR",2,130.17)
.01T~;2T~;
"KRN",.402,741,-1)
0^3
"KRN",.402,741,0)
SROMEN-OUT^3050624.1515^^130^^^3050624
"KRN",.402,741,"DIAB",1,0,130,0)
.09;T
"KRN",.402,741,"DIAB",1,0,130,1)
.37;T
"KRN",.402,741,"DIAB",1,1,130.042,0)
.01;T
"KRN",.402,741,"DIAB",1,1,130.06,0)
.01;T
"KRN",.402,741,"DIAB",1,1,130.16,0)
.01;T
"KRN",.402,741,"DIAB",1,1,130.17,0)
.01;T
"KRN",.402,741,"DIAB",1,1,130.213,0)
.01;T
"KRN",.402,741,"DIAB",1,1,130.28,0)
.01;T
"KRN",.402,741,"DIAB",1,1,130.36,0)
.01;T
"KRN",.402,741,"DIAB",1,2,130.29,0)
.01;T
"KRN",.402,741,"DIAB",1,2,130.37,0)
.01;T
"KRN",.402,741,"DIAB",1,2,130.47,0)
.01;T
"KRN",.402,741,"DIAB",2,0,130,0)
.011//OUT;T
"KRN",.402,741,"DIAB",2,0,130,1)
.213;T
"KRN",.402,741,"DIAB",2,1,130.042,0)
1;T
"KRN",.402,741,"DIAB",2,1,130.06,0)
.05//YES;T
"KRN",.402,741,"DIAB",2,1,130.16,0)
3;T
"KRN",.402,741,"DIAB",2,1,130.17,0)
2;T
"KRN",.402,741,"DIAB",2,1,130.213,0)
1;T
"KRN",.402,741,"DIAB",2,1,130.28,0)
2;T
"KRN",.402,741,"DIAB",2,1,130.36,0)
1;T
"KRN",.402,741,"DIAB",2,2,130.29,0)
1;T
"KRN",.402,741,"DIAB",2,2,130.37,0)
1;T
"KRN",.402,741,"DIAB",2,2,130.47,0)
1;T
"KRN",.402,741,"DIAB",3,0,130,0)
.14;T
"KRN",.402,741,"DIAB",3,0,130,1)
42;T
"KRN",.402,741,"DIAB",3,1,130.042,0)
2;T
"KRN",.402,741,"DIAB",3,1,130.06,0)
24;T
"KRN",.402,741,"DIAB",3,1,130.28,0)
3;T
"KRN",.402,741,"DIAB",3,1,130.36,0)
3;T
"KRN",.402,741,"DIAB",3,2,130.29,0)
2;T
"KRN",.402,741,"DIAB",3,2,130.37,0)
2;T
"KRN",.402,741,"DIAB",4,0,130,0)
32;T
"KRN",.402,741,"DIAB",4,0,130,1)
17;T
"KRN",.402,741,"DIAB",4,2,130.29,0)
3;T
"KRN",.402,741,"DIAB",4,2,130.37,0)
3;T
"KRN",.402,741,"DIAB",5,0,130,0)
32.5;T
"KRN",.402,741,"DIAB",5,0,130,1)
18;T
"KRN",.402,741,"DIAB",6,0,130,0)
.72;T
"KRN",.402,741,"DIAB",7,0,130,0)
26;T
"KRN",.402,741,"DIAB",8,0,130,0)
27;T
"KRN",.402,741,"DIAB",9,0,130,0)
.42;T
"KRN",.402,741,"DIAB",10,0,130,0)
.205;T
"KRN",.402,741,"DIAB",11,0,130,0)
73;T
"KRN",.402,741,"DIAB",12,0,130,0)
72;T
"KRN",.402,741,"DIAB",13,0,130,0)
71;T
"KRN",.402,741,"DIAB",14,0,130,0)
84;T
"KRN",.402,741,"DIAB",15,0,130,0)
83;T
"KRN",.402,741,"DIAB",16,0,130,0)
82;T
"KRN",.402,741,"DIAB",17,0,130,0)
.22;T
"KRN",.402,741,"DIAB",18,0,130,0)
.23;T
"KRN",.402,741,"DIAB",19,0,130,0)
.232;T
"KRN",.402,741,"DIAB",20,0,130,0)
63;T
"KRN",.402,741,"DIAB",21,0,130,0)
.111;T
"KRN",.402,741,"DIAB",22,0,130,0)
.112;T
"KRN",.402,741,"DIAB",23,0,130,0)
.02;T
"KRN",.402,741,"DIAB",24,0,130,0)
.15;T
"KRN",.402,741,"DIAB",25,0,130,0)
44;T
"KRN",.402,741,"DIAB",26,0,130,0)
45;T
"KRN",.402,741,"DIAB",27,0,130,0)
46;T
"KRN",.402,741,"DIAB",28,0,130,0)
47;T
"KRN",.402,741,"DIAB",29,0,130,0)
48;T
"KRN",.402,741,"DIAB",30,0,130,0)
.04;T
"KRN",.402,741,"DIAB",31,0,130,0)
1.09;T
"KRN",.402,741,"DIAB",32,0,130,0)
.164;T
"KRN",.402,741,"DIAB",33,0,130,0)
.166;T
"KRN",.402,741,"DIAB",34,0,130,0)
49;T
"KRN",.402,741,"DIAB",35,0,130,0)
64;T
"KRN",.402,741,"DIAB",36,0,130,0)
.29;T
"KRN",.402,741,"DIAB",37,0,130,0)
1.13;T
"KRN",.402,741,"DIAB",38,0,130,0)
.31;T
"KRN",.402,741,"DR",1,130)
.09T~;.011T~//OUT;.14T~;32T~;32.5T~;.72T~;26T~;27T~;.42T~;.205T~;73T~;72T~;71T~;84T~;83T~;82T~;.22T~;.23T~;.232T~;63T~;.111T~;.112T~;.02T~;.15T~;44T~;45T~;46T~;47T~;48T~;.04T~;1.09T~;.164T~;.166T~;49T~;64T~;.29T~;1.13T~;.31T~;
"KRN",.402,741,"DR",1,130,1)
.37T~;.213T~;42T~;17T~;18T~;
"KRN",.402,741,"DR",2,130.042)
.01T~;1T~;2T~;
"KRN",.402,741,"DR",2,130.06)
.01T~;.05T~//YES;24T~;
"KRN",.402,741,"DR",2,130.16)
.01T~;3T~;
"KRN",.402,741,"DR",2,130.17)
.01T~;2T~;
"KRN",.402,741,"DR",2,130.213)
.01T~;1T~;
"KRN",.402,741,"DR",2,130.28)
.01T~;2T~;3T~;
"KRN",.402,741,"DR",2,130.36)
.01T~;1T~;3T~;
"KRN",.402,741,"DR",3,130.29)
.01T~;1T~;2T~;3T~;
"KRN",.402,741,"DR",3,130.37)
.01T~;1T~;2T~;3T~;
"KRN",.402,741,"DR",3,130.47)
.01T~;1T~;
"KRN",.402,742,-1)
0^10
"KRN",.402,742,0)
SROMEN-POST^3050726.1502^^130^^^3050726
"KRN",.402,742,"DIAB",1,0,130,0)
41;T
"KRN",.402,742,"DIAB",1,1,130.16,0)
.01;T
"KRN",.402,742,"DIAB",1,1,130.18,0)
.01;T
"KRN",.402,742,"DIAB",1,1,130.213,0)
.01;T
"KRN",.402,742,"DIAB",2,0,130,0)
.875;T
"KRN",.402,742,"DIAB",2,1,130.16,0)
3;T
"KRN",.402,742,"DIAB",2,1,130.213,0)
1;T
"KRN",.402,742,"DIAB",3,0,130,0)
22;T
"KRN",.402,742,"DIAB",3,1,130.16,0)
1.5;T
"KRN",.402,742,"DIAB",3,1,130.18,0)
2;T
"KRN",.402,742,"DIAB",4,0,130,0)
.25;T
"KRN",.402,742,"DIAB",5,0,130,0)
.255;T
"KRN",.402,742,"DIAB",6,0,130,0)
62;T
"KRN",.402,742,"DIAB",7,0,130,0)
1.09;T
"KRN",.402,742,"DIAB",8,0,130,0)
.81;T
"KRN",.402,742,"DIAB",9,0,130,0)
.821;T
"KRN",.402,742,"DIAB",10,0,130,0)
.76;T
"KRN",.402,742,"DIAB",11,0,130,0)
.23;T
"KRN",.402,742,"DIAB",12,0,130,0)
.213;T
"KRN",.402,742,"DIAB",13,0,130,0)
.232;T
"KRN",.402,742,"DIAB",14,0,130,0)
.46;T
"KRN",.402,742,"DIAB",15,0,130,0)
25;T
"KRN",.402,742,"DIAB",16,0,130,0)
34;T
"KRN",.402,742,"DIAB",17,0,130,0)
32.5;T
"KRN",.402,742,"DIAB",18,0,130,0)
.74;T
"KRN",.402,742,"DIAB",19,0,130,0)
26;T
"KRN",.402,742,"DIAB",20,0,130,0)
27;T
"KRN",.402,742,"DIAB",21,0,130,0)
.42;T
"KRN",.402,742,"DIAB",22,0,130,0)
.166;T
"KRN",.402,742,"DR",1,130)
41T~;.875T~;22T~;.25T~;.255T~;62T~;1.09T~;.81T~;.821T~;.76T~;.23T~;.213T~;.232T~;.46T~;25T~;34T~;32.5T~;.74T~;26T~;27T~;.42T~;.166T~;
"KRN",.402,742,"DR",2,130.16)
.01T~;3T~;1.5T~;
"KRN",.402,742,"DR",2,130.18)
.01T~;3;2T~;
"KRN",.402,742,"DR",2,130.213)
.01T~;1T~;
"KRN",.402,743,-1)
0^2
"KRN",.402,743,0)
SROMEN-OPER^3050624.153^^130^^^3050624
"KRN",.402,743,"DIAB",1,0,130,0)
.203;T
"KRN",.402,743,"DIAB",1,1,130.01,0)
.01;T
"KRN",.402,743,"DIAB",1,1,130.0129,0)
.01;T
"KRN",.402,743,"DIAB",1,1,130.013,0)
.01;T
"KRN",.402,743,"DIAB",1,1,130.02,0)
.01;T
"KRN",.402,743,"DIAB",1,1,130.04,0)
.01;T
"KRN",.402,743,"DIAB",1,1,130.08,0)
.01;T
"KRN",.402,743,"DIAB",1,1,130.16,0)
.01;T
"KRN",.402,743,"DIAB",1,1,130.213,0)
.01;T
"KRN",.402,743,"DIAB",1,1,130.32,0)
.01;T
"KRN",.402,743,"DIAB",1,1,130.33,0)
.01;T
"KRN",.402,743,"DIAB",1,2,130.0134,0)
.01;T
"KRN",.402,743,"DIAB",1,2,130.34,0)
.01;T
"KRN",.402,743,"DIAB",1,2,130.39,0)
.01;T
"KRN",.402,743,"DIAB",2,0,130,0)
.205;T
"KRN",.402,743,"DIAB",2,1,130.01,0)
1;T
"KRN",.402,743,"DIAB",2,1,130.0129,0)
1;T
"KRN",.402,743,"DIAB",2,1,130.013,0)
1;T
"KRN",.402,743,"DIAB",2,1,130.02,0)
1;T
"KRN",.402,743,"DIAB",2,1,130.04,0)
1;T
"KRN",.402,743,"DIAB",2,1,130.08,0)
1;T
"KRN",.402,743,"DIAB",2,1,130.16,0)
3;T
"KRN",.402,743,"DIAB",2,1,130.213,0)
1;T
"KRN",.402,743,"DIAB",2,1,130.32,0)
1;T
"KRN",.402,743,"DIAB",2,1,130.33,0)
1;T
"KRN",.402,743,"DIAB",2,2,130.0134,0)
1;T
"KRN",.402,743,"DIAB",2,2,130.34,0)
1;T
"KRN",.402,743,"DIAB",2,2,130.39,0)
1;T
"KRN",.402,743,"DIAB",3,0,130,0)
73;T
"KRN",.402,743,"DIAB",3,1,130.01,0)
2;T
"KRN",.402,743,"DIAB",3,1,130.0129,0)
2;T
"KRN",.402,743,"DIAB",3,1,130.013,0)
2;T
"KRN",.402,743,"DIAB",3,1,130.02,0)
2;T
"KRN",.402,743,"DIAB",3,1,130.04,0)
3;T
"KRN",.402,743,"DIAB",3,1,130.16,0)
1.5;T
"KRN",.402,743,"DIAB",3,1,130.32,0)
2;T
"KRN",.402,743,"DIAB",3,2,130.0134,0)
2;T
"KRN",.402,743,"DIAB",3,2,130.34,0)
2;T
"KRN",.402,743,"DIAB",3,2,130.39,0)
2;T
"KRN",.402,743,"DIAB",4,0,130,0)
72;T
"KRN",.402,743,"DIAB",4,1,130.01,0)
2.5;T
"KRN",.402,743,"DIAB",4,1,130.0129,0)
4;T
"KRN",.402,743,"DIAB",4,1,130.013,0)
3;T
"KRN",.402,743,"DIAB",4,1,130.02,0)
3;T
"KRN",.402,743,"DIAB",4,1,130.04,0)
4;T
"KRN",.402,743,"DIAB",4,1,130.32,0)
3;T
"KRN",.402,743,"DIAB",4,2,130.34,0)
3;T
"KRN",.402,743,"DIAB",5,0,130,0)
71;T
"KRN",.402,743,"DIAB",5,1,130.01,0)
5;T
"KRN",.402,743,"DIAB",5,1,130.0129,0)
3;T
"KRN",.402,743,"DIAB",5,1,130.013,0)
4;T
"KRN",.402,743,"DIAB",5,1,130.02,0)
4;T
"KRN",.402,743,"DIAB",5,1,130.04,0)
5;T
"KRN",.402,743,"DIAB",5,2,130.34,0)
4;T
"KRN",.402,743,"DIAB",6,0,130,0)
84;T
"KRN",.402,743,"DIAB",6,1,130.01,0)
6;T
"KRN",.402,743,"DIAB",6,1,130.0129,0)
5;T
"KRN",.402,743,"DIAB",6,2,130.34,0)
5;T
"KRN",.402,743,"DIAB",7,0,130,0)
83;T
"KRN",.402,743,"DIAB",7,1,130.01,0)
7;T
"KRN",.402,743,"DIAB",8,0,130,0)
82;T
"KRN",.402,743,"DIAB",9,0,130,0)
.213;T
"KRN",.402,743,"DIAB",10,0,130,0)
.22;T
"KRN",.402,743,"DIAB",16,0,130,0)
49;T
"KRN",.402,743,"DIAB",17,0,130,0)
64;T
"KRN",.402,743,"DIAB",18,0,130,0)
.757;T
"KRN",.402,743,"DIAB",19,0,130,0)
.75;T
"KRN",.402,743,"DIAB",20,0,130,0)
57;T
"KRN",.402,743,"DIAB",21,0,130,0)
58;T
"KRN",.402,743,"DIAB",22,0,130,0)
.48;T
"KRN",.402,743,"DIAB",23,0,130,0)
.47;T
"KRN",.402,743,"DIAB",24,0,130,0)
.27;T
"KRN",.402,743,"DIAB",25,0,130,0)
.39;T
"KRN",.402,743,"DIAB",26,0,130,0)
.375;T
"KRN",.402,743,"DIAB",27,0,130,0)
44;T
"KRN",.402,743,"DIAB",28,0,130,0)
45;T
"KRN",.402,743,"DIAB",29,0,130,0)
46;T
"KRN",.402,743,"DIAB",30,0,130,0)
47;T
"KRN",.402,743,"DIAB",31,0,130,0)
48;T
"KRN",.402,743,"DIAB",32,0,130,0)
127;T
"KRN",.402,743,"DIAB",33,0,130,0)
129;T
"KRN",.402,743,"DIAB",34,0,130,0)
130;T
"KRN",.402,743,"DIAB",35,0,130,0)
.29;T
"KRN",.402,743,"DIAB",36,0,130,0)
32;T
"KRN",.402,743,"DIAB",37,0,130,0)
32.5;T
"KRN",.402,743,"DIAB",38,0,130,0)
26;T
"KRN",.402,743,"DIAB",39,0,130,0)
27;T
"KRN",.402,743,"DIAB",40,0,130,0)
.42;T
"KRN",.402,743,"DIAB",41,0,130,0)
55;T
"KRN",.402,743,"DIAB",42,0,130,0)
60;T
"KRN",.402,743,"DR",1,130)
.203T~;.205T~;73T~;72T~;71T~;84T~;83T~;82T~;.213T~;.22T~;W !;W !;W !;W !;W !;49T~;64T~;.757T~;.75T~;57T~;58T~;.48T~;.47T~;.27T~;.39T~;.375T~;44T~;45T~;46T~;47T~;48T~;127T~;129T~;130T~;.29T~;32T~;32.5T~;26T~;27T~;.42T~;55T~;60T~;
"KRN",.402,743,"DR",2,130.01)
.01T~;1T~;2T~;2.5T~;5T~;6T~;7T~;
"KRN",.402,743,"DR",2,130.0129)
.01T~;1T~;2T~;4T~;3T~;5T~;
"KRN",.402,743,"DR",2,130.013)
.01T~;1T~;2T~;3T~;4T~;
"KRN",.402,743,"DR",2,130.02)
.01T~;1T~;2T~;3T~;4T~;
"KRN",.402,743,"DR",2,130.04)
.01T~;1T~;3T~;4T~;5T~;
"KRN",.402,743,"DR",2,130.08)
.01T~;1T~;
"KRN",.402,743,"DR",2,130.16)
.01T~;3T~;1.5T~;
"KRN",.402,743,"DR",2,130.213)
.01T~;1T~;
"KRN",.402,743,"DR",2,130.32)
.01T~;1T~;2T~;3T~;
"KRN",.402,743,"DR",2,130.33)
.01T~;1T~;
"KRN",.402,743,"DR",3,130.0134)
.01T~;1T~;2T~;
"KRN",.402,743,"DR",3,130.34)
.01T~;1T~;2T~;3T~;4T~;5T~;
"KRN",.402,743,"DR",3,130.39)
.01T~;1T~;2T~;
"KRN",.402,746,-1)
0^7
"KRN",.402,746,0)
SRSRES1^3050624.1551^^130^^^3060308
"KRN",.402,746,"DIAB",1,1,130.03,0)
.01;T
"KRN",.402,746,"DIAB",1,1,130.065,0)
.01;T
"KRN",.402,746,"DIAB",2,0,130,0)
32;T
"KRN",.402,746,"DIAB",2,1,130.03,0)
1;T
"KRN",.402,746,"DIAB",3,0,130,0)
32.5;T
"KRN",.402,746,"DIAB",3,1,130.03,0)
2;T
"KRN",.402,746,"DIAB",4,0,130,0)
.011//I;T
"KRN",.402,746,"DIAB",4,1,130.03,0)
3;T
"KRN",.402,746,"DIAB",5,0,130,0)
.035;T
"KRN",.402,746,"DIAB",5,1,130.03,0)
4;T
"KRN",.402,746,"DIAB",6,0,130,0)
.15;T
"KRN",.402,746,"DIAB",6,1,130.03,0)
5;T
"KRN",.402,746,"DIAB",7,0,130,0)
.16;T
"KRN",.402,746,"DIAB",9,0,130,0)
.164;T
"KRN",.402,746,"DIAB",10,0,130,0)
.43;T
"KRN",.402,746,"DIAB",11,0,130,0)
.037;T
"KRN",.402,746,"DIAB",12,0,130,0)
SURGERY POS;T
"KRN",.402,746,"DIAB",13,0,130,0)
1.01;T
"KRN",.402,746,"DIAB",14,0,130,0)
1.02;T
"KRN",.402,746,"DIAB",15,0,130,0)
1.03;T
"KRN",.402,746,"DIAB",16,0,130,0)
1.035;T
"KRN",.402,746,"DIAB",17,0,130,0)
1.04;T
"KRN",.402,746,"DIAB",18,0,130,0)
.05;T
"KRN",.402,746,"DIAB",19,0,130,0)
23;T
"KRN",.402,746,"DIAB",20,0,130,0)
.28;T
"KRN",.402,746,"DIAB",21,0,130,0)
80;T
"KRN",.402,746,"DR",1,130)
W !;32T~;32.5T~;.011T~//I;.035T~;.15T~;.16T~;Q;.164T~;.43T~;.037T~;65T~;1.01T~;1.02T~;1.03T~;1.035T~;1.04T~;.05T~;23T~;.28T~;80T~;
"KRN",.402,746,"DR",2,130.03)
.01T~;1T~;2T~;3T~;4T~;5T~;
"KRN",.402,746,"DR",2,130.065)
.01T~;
"KRN",.402,747,-1)
0^6
"KRN",.402,747,0)
SRSRES-SCHED^3050722.1628^^130^^^3050722
"KRN",.402,747,"DIAB",1,1,130.14,0)
.01;T
"KRN",.402,747,"DIAB",1,1,130.16,0)
.01;T
"KRN",.402,747,"DIAB",1,1,130.17,0)
.01;T
"KRN",.402,747,"DIAB",2,0,130,0)
26;T
"KRN",.402,747,"DIAB",2,1,130.14,0)
1;T
"KRN",.402,747,"DIAB",2,1,130.16,0)
3;T
"KRN",.402,747,"DIAB",2,1,130.17,0)
2;T
"KRN",.402,747,"DIAB",3,0,130,0)
27;T
"KRN",.402,747,"DIAB",3,1,130.16,0)
1.5;T
"KRN",.402,747,"DIAB",4,0,130,0)
.42;T
"KRN",.402,747,"DIAB",5,0,130,0)
32;T
"KRN",.402,747,"DIAB",6,0,130,0)
PRIN PRE-OP ICD DIAGNOSIS CODE;T
"KRN",.402,747,"DIAB",7,0,130,0)
.72;T
"KRN",.402,747,"DIAB",8,0,130,0)
.011//I;T
"KRN",.402,747,"DIAB",9,0,130,0)
56;T
"KRN",.402,747,"DIAB",10,0,130,0)
.035;T
"KRN",.402,747,"DIAB",11,0,130,0)
.04;T
"KRN",.402,747,"DIAB",12,0,130,0)
.14;T
"KRN",.402,747,"DIAB",13,0,130,0)
.15;T
"KRN",.402,747,"DIAB",14,0,130,0)
.16;T
"KRN",.402,747,"DIAB",15,0,130,0)
.164;T
"KRN",.402,747,"DIAB",16,0,130,0)
.43;T
"KRN",.402,747,"DIAB",17,0,130,0)
.037;T
"KRN",.402,747,"DIAB",18,0,130,0)
1.01;T
"KRN",.402,747,"DIAB",19,0,130,0)
1.02;T
"KRN",.402,747,"DIAB",20,0,130,0)
1.03;T
"KRN",.402,747,"DIAB",21,0,130,0)
1.035;T
"KRN",.402,747,"DIAB",22,0,130,0)
38;T
"KRN",.402,747,"DIAB",23,0,130,0)
40;T
"KRN",.402,747,"DIAB",24,0,130,0)
1.05;T
"KRN",.402,747,"DIAB",25,0,130,0)
1.04;T
"KRN",.402,747,"DIAB",26,0,130,0)
.05;T
"KRN",.402,747,"DIAB",27,0,130,0)
.31;T
"KRN",.402,747,"DIAB",28,0,130,0)
.34;T
"KRN",.402,747,"DIAB",29,0,130,0)
60;T
"KRN",.402,747,"DIAB",30,0,130,0)
.28;T
"KRN",.402,747,"DIAB",31,0,130,0)
80;T
"KRN",.402,747,"DR",1,130)
26T~;27T~;.42T~;32T~;32.5T~;.72T~;.011T~//I;56T~;.035T~;.04T~;.14T~;.15T~;.16T~;.164T~;.43T~;.037T~;1.01T~;1.02T~;1.03T~;1.035T~;38T~;40T~;1.05T~;1.04T~;.05T~;.31T~;.34T~;60T~;.28T~;80T~;
"KRN",.402,747,"DR",2,130.14)
.01T~;1T~;
"KRN",.402,747,"DR",2,130.16)
.01T~;3T~;1.5T~;
"KRN",.402,747,"DR",2,130.17)
.01T~;2T~;
"KRN",.402,753,-1)
0^8
"KRN",.402,753,0)
SRSREQV^3050725.0849^^130^^^3050725
"KRN",.402,753,"DIAB",1,0,130,0)
26;T
"KRN",.402,753,"DIAB",1,1,130.03,0)
.01;T
"KRN",.402,753,"DIAB",1,1,130.065,0)
.01;T
"KRN",.402,753,"DIAB",1,1,130.14,0)
.01;T
"KRN",.402,753,"DIAB",1,1,130.16,0)
.01;T
"KRN",.402,753,"DIAB",1,1,130.17,0)
.01;T
"KRN",.402,753,"DIAB",2,0,130,0)
.42;T
"KRN",.402,753,"DIAB",2,1,130.03,0)
1;T
"KRN",.402,753,"DIAB",2,1,130.14,0)
1;T
"KRN",.402,753,"DIAB",2,1,130.16,0)
3;T
"KRN",.402,753,"DIAB",2,1,130.17,0)
2;T
"KRN",.402,753,"DIAB",3,0,130,0)
27;T
"KRN",.402,753,"DIAB",3,1,130.03,0)
2;T
"KRN",.402,753,"DIAB",3,1,130.16,0)
1.5;T
"KRN",.402,753,"DIAB",4,0,130,0)
32;T
"KRN",.402,753,"DIAB",4,1,130.03,0)
3;T
"KRN",.402,753,"DIAB",5,0,130,0)
32.5;T
"KRN",.402,753,"DIAB",5,1,130.03,0)
4;T
"KRN",.402,753,"DIAB",6,0,130,0)
.72;T
"KRN",.402,753,"DIAB",6,1,130.03,0)
5;T
"KRN",.402,753,"DIAB",7,0,130,0)
.011//I;T
"KRN",.402,753,"DIAB",8,0,130,0)
.035;T
"KRN",.402,753,"DIAB",9,0,130,0)
.04;T
"KRN",.402,753,"DIAB",10,0,130,0)
.14;T
"KRN",.402,753,"DIAB",11,0,130,0)
.15;T
"KRN",.402,753,"DIAB",12,0,130,0)
.16;T
"KRN",.402,753,"DIAB",13,0,130,0)
.164;T
"KRN",.402,753,"DIAB",14,0,130,0)
.43;T
"KRN",.402,753,"DIAB",15,0,130,0)
.037;T
"KRN",.402,753,"DIAB",16,0,130,0)
SURGERY POS;T
"KRN",.402,753,"DIAB",17,0,130,0)
1.01;T
"KRN",.402,753,"DIAB",18,0,130,0)
1.02;T
"KRN",.402,753,"DIAB",19,0,130,0)
1.03;T
"KRN",.402,753,"DIAB",20,0,130,0)
1.035;T
"KRN",.402,753,"DIAB",21,0,130,0)
38;T
"KRN",.402,753,"DIAB",22,0,130,0)
40;T
"KRN",.402,753,"DIAB",23,0,130,0)
1.05;T
"KRN",.402,753,"DIAB",24,0,130,0)
1.04;T
"KRN",.402,753,"DIAB",25,0,130,0)
.05;T
"KRN",.402,753,"DIAB",26,0,130,0)
23;T
"KRN",.402,753,"DIAB",27,0,130,0)
.28;T
"KRN",.402,753,"DIAB",28,0,130,0)
55;T
"KRN",.402,753,"DIAB",29,0,130,0)
BRIEF;T
"KRN",.402,753,"DR",1,130)
26T~;.42T~;27T~;32T~;32.5T~;.72T~;.011T~//I;.035T~;.04T~;.14T~;.15T~;.16T~;.164T~;.43T~;.037T~;65T~;1.01T~;1.02T~;1.03T~;1.035T~;38T~;40T~;1.05T~;1.04T~;.05T~;23T~;.28T~;55T~;60T~;
"KRN",.402,753,"DR",2,130.03)
.01T~;1T~;2T~;3T~;4T~;5T~;
"KRN",.402,753,"DR",2,130.065)
.01T~;Q;
"KRN",.402,753,"DR",2,130.14)
.01T~;1T~;
"KRN",.402,753,"DR",2,130.16)
.01T~;3T~;1.5T~;
"KRN",.402,753,"DR",2,130.17)
.01T~;2T~;
"KRN",.402,1410,-1)
0^1
"KRN",.402,1410,0)
SREQUEST^3050624.1525^^130^^^3060111
"KRN",.402,1410,"DIAB",1,0,130,1)
.16;T
"KRN",.402,1410,"DIAB",1,0,130,2)
1.03;T
"KRN",.402,1410,"DIAB",1,1,130.03,0)
.01;T
"KRN",.402,1410,"DIAB",1,1,130.065,0)
.01;T
"KRN",.402,1410,"DIAB",2,0,130,0)
32;T
"KRN",.402,1410,"DIAB",2,1,130.03,0)
1;T
"KRN",.402,1410,"DIAB",3,1,130.03,0)
2;T
"KRN",.402,1410,"DIAB",4,0,130,1)
.164;T
"KRN",.402,1410,"DIAB",4,0,130,2)
1.035;T
"KRN",.402,1410,"DIAB",4,1,130.03,0)
3;T
"KRN",.402,1410,"DIAB",5,0,130,0)
32.5;T
"KRN",.402,1410,"DIAB",5,1,130.03,0)
4;T
"KRN",.402,1410,"DIAB",6,1,130.03,0)
5;T
"KRN",.402,1410,"DIAB",7,0,130,1)
.43;T
"KRN",.402,1410,"DIAB",7,0,130,2)
1.04;T
"KRN",.402,1410,"DIAB",8,0,130,0)
.011//I;T
"KRN",.402,1410,"DIAB",9,0,130,0)
.011//I;T
"KRN",.402,1410,"DIAB",10,0,130,1)
.037;T
"KRN",.402,1410,"DIAB",10,0,130,2)
.05;T
"KRN",.402,1410,"DIAB",11,0,130,0)
56;T
"KRN",.402,1410,"DIAB",12,0,130,1)
SURGERY POS;T
"KRN",.402,1410,"DIAB",12,0,130,2)
23;T
"KRN",.402,1410,"DIAB",13,0,130,2)
.28;T
"KRN",.402,1410,"DIAB",14,0,130,0)
.035;T
"KRN",.402,1410,"DIAB",14,0,130,1)
1.01;T
"KRN",.402,1410,"DIAB",14,0,130,2)
80;T
"KRN",.402,1410,"DIAB",17,0,130,0)
.15;T
"KRN",.402,1410,"DIAB",17,0,130,1)
1.02;T
"KRN",.402,1410,"DR",1,130)
I $D(SREQ(32)) S Y="@1";32T~;@1;I $D(SREQ(32.5)) S Y="@2";32.5T~;@2;I $D(SREQ(.011)) S Y="@4";Q;.011T~//I;I X="I" S Y="@4";56T~;@4;I $D(SREQ(.035)) S Y="@5";.035T~;@5;I $D(SREQ(.15)) S Y="@6";.15T~;@6;I $D(SREQ(.16)) S Y="@7";
"KRN",.402,1410,"DR",1,130,1)
.16T~;@7;I $D(SREQ(.164)) S Y="@8";.164T~;@8;I $D(SREQ(.43)) S Y="@9";.43T~;@9;I $D(SREQ(.037)) S Y="@10";.037T~;@10;65T~;I $D(SREQ(1.01)) S Y="@11";1.01T~;@11;I $D(SREQ(1.02)) S Y="@12";1.02T~;@12;I $D(SREQ(1.03)) S Y="@13";
"KRN",.402,1410,"DR",1,130,2)
1.03T~;@13;I $D(SREQ(1.035)) S Y="@14";1.035T~;@14;I $D(SREQ(1.04)) S Y="@15";1.04T~;@15;I $D(SREQ(.05)) S Y="@16";.05T~;@16;23T~;.28T~;80T~;
"KRN",.402,1410,"DR",2,130.03)
.01T~;1T~;2T~;3T~;4T~;5T~;
"KRN",.402,1410,"DR",2,130.065)
.01T~;
"KRN",.402,1410,"DR",99,1,9.2)
S (D,D0)=$QS(DIMQ,$QL(DIMQ)) I D,$D(^PRCP(445.3,D,0)) S X=$P(^(0),U) S DWLC=DWLC+1,^SRF(DA,DV,DWLC,0)=X
"KRN",.402,1410,"DR",99,1,9.3)
N DIMQ,DIMSTRT,DIMSCNT S (DIMQ,DIMSTRT)=$NA(^PRCP(445.3,"ASR2",I(0,0))),DIMSCNT=$QL(DIMQ) F  S DIMQ=$Q(@DIMQ) Q:DIMQ=""  Q:$NA(@DIMQ,DIMSCNT)'=DIMSTRT   X DR(99,1,9.2) Q:'$D(D)  S D=D0
"KRN",.402,1410,"DR",99,2,9.2)
S (D,D0)=$QS(DIMQ,$QL(DIMQ)) I D,$D(^PRCP(445.3,D,0)) S X=$P(^(0),U) S DWLC=DWLC+1,^SRF(DA,DV,DWLC,0)=X
"KRN",.402,1410,"DR",99,2,9.3)
N DIMQ,DIMSTRT,DIMSCNT S (DIMQ,DIMSTRT)=$NA(^PRCP(445.3,"ASR2",I(0,0))),DIMSCNT=$QL(DIMQ) F  S DIMQ=$Q(@DIMQ) Q:DIMQ=""  Q:$NA(@DIMQ,DIMSCNT)'=DIMSTRT   X DR(99,2,9.2) Q:'$D(D)  S D=D0
"KRN",.402,1411,-1)
0^4
"KRN",.402,1411,0)
SRSCHED-UNREQUESTED^3050624.1531^^130^^^3060111
"KRN",.402,1411,"DIAB",1,0,130,1)
.16;T
"KRN",.402,1411,"DIAB",2,0,130,0)
32;T
"KRN",.402,1411,"DIAB",2,0,130,2)
1.035;T
"KRN",.402,1411,"DIAB",4,0,130,1)
.164;T
"KRN",.402,1411,"DIAB",5,0,130,0)
32.5;T
"KRN",.402,1411,"DIAB",5,0,130,2)
1.04;T
"KRN",.402,1411,"DIAB",7,0,130,1)
.43;T
"KRN",.402,1411,"DIAB",8,0,130,2)
.05;T
"KRN",.402,1411,"DIAB",9,0,130,0)
.011//I;T
"KRN",.402,1411,"DIAB",10,0,130,1)
.037;T
"KRN",.402,1411,"DIAB",10,0,130,2)
.28;T
"KRN",.402,1411,"DIAB",11,0,130,0)
56;T
"KRN",.402,1411,"DIAB",11,0,130,2)
80;T
"KRN",.402,1411,"DIAB",13,0,130,1)
1.01;T
"KRN",.402,1411,"DIAB",14,0,130,0)
.035;T
"KRN",.402,1411,"DIAB",16,0,130,1)
1.02;T
"KRN",.402,1411,"DIAB",17,0,130,0)
.15;T
"KRN",.402,1411,"DIAB",19,0,130,1)
1.03;T
"KRN",.402,1411,"DR",1,130)
I $D(SREQ(32)) S Y="@1";32T~;@1;I $D(SREQ(32.5)) S Y="@2";32.5T~;@2;I $D(SREQ(.011)) S Y="@4";Q;.011T~//I;I X="I" S Y="@4";56T~;@4;I $D(SREQ(.035)) S Y="@5";.035T~;@5;I $D(SREQ(.15)) S Y="@6";.15T~;@6;I $D(SREQ(.16)) S Y="@7";
"KRN",.402,1411,"DR",1,130,1)
.16T~;@7;I $D(SREQ(.164)) S Y="@8";.164T~;@8;I $D(SREQ(.43)) S Y="@9";.43T~;@9;I $D(SREQ(.037)) S Y="@10";.037T~;@10;I $D(SREQ(1.01)) S Y="@11";1.01T~;@11;I $D(SREQ(1.02)) S Y="@12";1.02T~;@12;I $D(SREQ(1.03)) S Y="@13";1.03T~;@13;
"KRN",.402,1411,"DR",1,130,2)
I $D(SREQ(1.035)) S Y="@14";1.035T~;@14;I $D(SREQ(1.04)) S Y="@15";1.04T~;@15;I $D(SREQ(.05)) S Y="@16";.05T~;@16;.28T~;80T~;
"KRN",19,10019,-1)
0^2
"KRN",19,10019,0)
SRO PCE STATUS^PCE Filing Status Report^^R^^^^^^^^SURGERY^^1^1
"KRN",19,10019,1,0)
^19.06^28^28^3050712^^
"KRN",19,10019,1,1,0)
This option provides a report of the PCE filing status of completed cases 
"KRN",19,10019,1,2,0)
performed during the selected date range.  The report may be printed for 
"KRN",19,10019,1,3,0)
OR surgical cases, non-OR procedures or both.  Also, the report may be 
"KRN",19,10019,1,4,0)
printed for all specialties or for a single specialty only.  
"KRN",19,10019,1,5,0)
  
"KRN",19,10019,1,6,0)
This report is intended to be used as a tool in the review of Surgery 
"KRN",19,10019,1,7,0)
case information that is passed to PCE.  The report uses 2 status 
"KRN",19,10019,1,8,0)
categories: 
"KRN",19,10019,1,9,0)
  (1) FILED - This status indicates that case information has already been
"KRN",19,10019,1,10,0)
      filed with PCE.  
"KRN",19,10019,1,11,0)
  (2) NOT FILED - This status indicates that the case information has not
"KRN",19,10019,1,12,0)
      been filed with PCE.  The case may or may not be missing information
"KRN",19,10019,1,13,0)
      needed to file with PCE.  
"KRN",19,10019,1,14,0)
  
"KRN",19,10019,1,15,0)
Two forms of the report are available, the long and the short. The long 
"KRN",19,10019,1,16,0)
form uses a 132 column format and prints case information including the 
"KRN",19,10019,1,17,0)
surgeon/provider, the attending, the specialty, the principal post-op 
"KRN",19,10019,1,18,0)
diagnosis, and the principal procedure.  If the PCE filing status is 
"KRN",19,10019,1,19,0)
FILED, the CPT codes and ICD diagnosis codes will be printed.  If the 
"KRN",19,10019,1,20,0)
filing status is NOT FILED, information fields needed for PCE filing that 
"KRN",19,10019,1,21,0)
do not contain data will be printed.  At the end of the report, the 
"KRN",19,10019,1,22,0)
number of cases in each PCE filing status will be printed, plus the 
"KRN",19,10019,1,23,0)
number of CPT and ICD codes for cases with a status of FILED.  
"KRN",19,10019,1,24,0)
  
"KRN",19,10019,1,25,0)
The short form uses an 80 column format and does not include 
"KRN",19,10019,1,26,0)
surgeon/provider, attending, principal post-op diagnosis and CPT and ICD 
"KRN",19,10019,1,27,0)
code information.  The totals printed at the end will show only the total 
"KRN",19,10019,1,28,0)
cases for each status.
"KRN",19,10019,15)
D EXIT^SROVAR
"KRN",19,10019,20)
D ^SROVAR
"KRN",19,10019,22)
Q
"KRN",19,10019,25)
SROPCE0
"KRN",19,10019,"U")
PCE FILING STATUS REPORT
"KRN",19,11284,-1)
0^1
"KRN",19,11284,0)
SRCODING EDIT^Update/Verify Procedure/Diagnosis Codes^^R^^^^^^^^SURGERY^y^1^1
"KRN",19,11284,1,0)
^19.06^2^2^3050506^^^
"KRN",19,11284,1,1,0)
This option is used to enter/edit the final CPT and ICD9 codes for an
"KRN",19,11284,1,2,0)
operation or non-OR procedure.
"KRN",19,11284,15)
K:'$D(SRTNK) SRTN K SRTNK D EXIT^SROVAR
"KRN",19,11284,20)
D ^SROVAR Q:$D(XQUIT)  S:$D(SRTN) SRTNK=SRTN D:'$D(SRTN) ^SROPS1 S:'$D(SRTN) XQUIT="" Q:$D(XQUIT)
"KRN",19,11284,22)
Q
"KRN",19,11284,25)
SROCD
"KRN",19,11284,"U")
UPDATE/VERIFY PROCEDURE/DIAGNO
"MBREQ")
0
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",167,-1)
1^1
"PKG",167,0)
SURGERY^SR^SURGICAL DATA COLLECTION AND OPERATIONS SCHEDULING
"PKG",167,20,0)
^9.402P^^
"PKG",167,22,0)
^9.49I^1^1
"PKG",167,22,1,0)
3.0^3040426^2930811
"PKG",167,22,1,"PAH",1,0)
142^3060308^517
"PKG",167,22,1,"PAH",1,1,0)
^^169^169^3060308
"PKG",167,22,1,"PAH",1,1,1,0)
This patch is part of the Patient Financial Services System (PFSS) project.
"PKG",167,22,1,"PAH",1,1,2,0)
PFSS patches are being released on various schedules. Some patch
"PKG",167,22,1,"PAH",1,1,3,0)
functionality will not be active until a new PFSS switch is activated
"PKG",167,22,1,"PAH",1,1,4,0)
during final implementation. PFSS will initially be implemented at select
"PKG",167,22,1,"PAH",1,1,5,0)
pilot sites ONLY.
"PKG",167,22,1,"PAH",1,1,6,0)
 
"PKG",167,22,1,"PAH",1,1,7,0)
The purpose of the PFSS project is to prepare the Veterans Health 
"PKG",167,22,1,"PAH",1,1,8,0)
Information Systems and Technology Architecture (VistA) environment for the
"PKG",167,22,1,"PAH",1,1,9,0)
implementation of a commercial off-the-shelf (COTS) billing replacement
"PKG",167,22,1,"PAH",1,1,10,0)
system. The project consists of the implementation of the billing
"PKG",167,22,1,"PAH",1,1,11,0)
replacement system, business process improvements, and enhancements to
"PKG",167,22,1,"PAH",1,1,12,0)
VistA to support integration with the COTS billing replacement system.
"PKG",167,22,1,"PAH",1,1,13,0)
Significant changes to VistA legacy systems and ancillary packages are
"PKG",167,22,1,"PAH",1,1,14,0)
necessary.
"PKG",167,22,1,"PAH",1,1,15,0)
 
"PKG",167,22,1,"PAH",1,1,16,0)
Some of the PFSS software components are not operational until the PFSS 
"PKG",167,22,1,"PAH",1,1,17,0)
On/Off Switch, distributed with patch IB*2*260, is set to "ON". The ability
"PKG",167,22,1,"PAH",1,1,18,0)
for the local site to set the switch to "ON" will be provided at the
"PKG",167,22,1,"PAH",1,1,19,0)
appropriate time with the release of a subsequent Integrated Billing patch.
"PKG",167,22,1,"PAH",1,1,20,0)
 
"PKG",167,22,1,"PAH",1,1,21,0)
For more information about the PFSS project, review the documentation 
"PKG",167,22,1,"PAH",1,1,22,0)
accompanying this patch and refer to the following website: 
"PKG",167,22,1,"PAH",1,1,23,0)
http://vista.med.va.gov/billreplace/
"PKG",167,22,1,"PAH",1,1,24,0)
 
"PKG",167,22,1,"PAH",1,1,25,0)
Features of patch SR*3*142 are listed below:
"PKG",167,22,1,"PAH",1,1,26,0)
 
"PKG",167,22,1,"PAH",1,1,27,0)
1. Modified Surgery Coding Option
"PKG",167,22,1,"PAH",1,1,28,0)
   Coders currently use the Update/Verify Procedure/Diagnosis Codes 
"PKG",167,22,1,"PAH",1,1,29,0)
   [SRCODING EDIT] option, which updates coded data directly in the 
"PKG",167,22,1,"PAH",1,1,30,0)
   SURGERY file (#130). However, the SURGERY file (#130) does not
"PKG",167,22,1,"PAH",1,1,31,0)
   currently make a distinction between procedure and diagnosis data
"PKG",167,22,1,"PAH",1,1,32,0)
   entered by clinicians and that entered by coders. Today, coding a
"PKG",167,22,1,"PAH",1,1,33,0)
   surgical case impacts the clinical data for the patient and causes an
"PKG",167,22,1,"PAH",1,1,34,0)
   addendum to be generated because each code is directly associated with
"PKG",167,22,1,"PAH",1,1,35,0)
   a free-text procedure or diagnosis entry. This patch separates final
"PKG",167,22,1,"PAH",1,1,36,0)
   coded procedures and diagnoses from the clinically captured procedures
"PKG",167,22,1,"PAH",1,1,37,0)
   and diagnoses.
"PKG",167,22,1,"PAH",1,1,38,0)
 
"PKG",167,22,1,"PAH",1,1,39,0)
   A new file, the SURGERY PROCEDURE/DIAGNOSIS CODES file (#136), is
"PKG",167,22,1,"PAH",1,1,40,0)
   created to store coded procedure and coded diagnosis data for a Surgery
"PKG",167,22,1,"PAH",1,1,41,0)
   case. Data entered into this file will be the new source coding data
"PKG",167,22,1,"PAH",1,1,42,0)
   sent by the Surgery package to PCE. In the SURGERY file (#130), the
"PKG",167,22,1,"PAH",1,1,43,0)
   existing PRINCIPAL CPT Code field (#27), PRIN DIAGNOSIS CODE field 
"PKG",167,22,1,"PAH",1,1,44,0)
   (#66), OTHER PROCEDURE CPT CODE field (#3 of sub-file #130.16) and ICD
"PKG",167,22,1,"PAH",1,1,45,0)
   DIAGNOSIS CODE field (#3 of sub-file #130.18) are modified to include
"PKG",167,22,1,"PAH",1,1,46,0)
   the word "PLANNED" in the field labels and titles.
"PKG",167,22,1,"PAH",1,1,47,0)
   
"PKG",167,22,1,"PAH",1,1,48,0)
   The Update/Verify Procedure/Diagnosis Codes [SRCODING EDIT] option is 
"PKG",167,22,1,"PAH",1,1,49,0)
   modified to allow entry of final billing Current Procedural 
"PKG",167,22,1,"PAH",1,1,50,0)
   Terminology (CPT) codes for surgical procedures and International
"PKG",167,22,1,"PAH",1,1,51,0)
   Classification of Disease (ICD) diagnosis codes in the SURGERY
"PKG",167,22,1,"PAH",1,1,52,0)
   PROCEDURE/DIAGNOSIS CODES file (#136).
"PKG",167,22,1,"PAH",1,1,53,0)
 
"PKG",167,22,1,"PAH",1,1,54,0)
   Modified features of the Update/Verify Procedure/Diagnosis Codes
"PKG",167,22,1,"PAH",1,1,55,0)
   [SRCODING EDIT] option are listed below:
"PKG",167,22,1,"PAH",1,1,56,0)
   - Upon record creation for a case in the SURGERY PROCEDURE/DIAGNOSIS
"PKG",167,22,1,"PAH",1,1,57,0)
     CODES file (#136), the record will be auto-populated with clinician
"PKG",167,22,1,"PAH",1,1,58,0)
     entered coding data, if any, from the SURGERY file (#130).
"PKG",167,22,1,"PAH",1,1,59,0)
   - A principal ICD code and a principal CPT code are initial
"PKG",167,22,1,"PAH",1,1,60,0)
     requirements for coding a surgical case. 
"PKG",167,22,1,"PAH",1,1,61,0)
   - An unlimited number of ICD codes may be entered for other diagnoses
"PKG",167,22,1,"PAH",1,1,62,0)
     and an unlimited number of CPT codes may be entered for other
"PKG",167,22,1,"PAH",1,1,63,0)
     procedures performed.
"PKG",167,22,1,"PAH",1,1,64,0)
   - Each CPT code entered must be assigned the associated ICD code(s)
"PKG",167,22,1,"PAH",1,1,65,0)
     related to the procedure performed.
"PKG",167,22,1,"PAH",1,1,66,0)
   - An unlimited number of CPT modifiers may be entered for each CPT code
"PKG",167,22,1,"PAH",1,1,67,0)
     entered.
"PKG",167,22,1,"PAH",1,1,68,0)
   - For every ICD code entered, the following questions must be answered
"PKG",167,22,1,"PAH",1,1,69,0)
     as appropriate for the patient based upon enrollment indicators:
"PKG",167,22,1,"PAH",1,1,70,0)
     o Treatment related to Service Connected condition?
"PKG",167,22,1,"PAH",1,1,71,0)
     o Treatment related to Agent Orange Exposure?
"PKG",167,22,1,"PAH",1,1,72,0)
     o Treatment related to Ionizing Radiation Exposure?
"PKG",167,22,1,"PAH",1,1,73,0)
     o Treatment related to Environmental Contaminant Exposure?
"PKG",167,22,1,"PAH",1,1,74,0)
     o Treatment related to Military Sexual Trauma?
"PKG",167,22,1,"PAH",1,1,75,0)
     o Treatment related to Head and/or Neck Cancer?
"PKG",167,22,1,"PAH",1,1,76,0)
     o Treatment related to Combat?
"PKG",167,22,1,"PAH",1,1,77,0)
   - Upon completion of coding for a case, the coder is allowed to mark
"PKG",167,22,1,"PAH",1,1,78,0)
     the record as complete and to send the record immediately to PCE.
"PKG",167,22,1,"PAH",1,1,79,0)
   - Before allowing the record to be marked as complete, the option
"PKG",167,22,1,"PAH",1,1,80,0)
     checks to see if a specific code, 065.0 CRIMEAN HEMORRHAGIC FEV, is
"PKG",167,22,1,"PAH",1,1,81,0)
     entered as a diagnosis code. If it is entered, the software prompts
"PKG",167,22,1,"PAH",1,1,82,0)
     the user to make sure that the code is correct for the case. This
"PKG",167,22,1,"PAH",1,1,83,0)
     check is added to prevent the inadvertent assignment of code 065.0
"PKG",167,22,1,"PAH",1,1,84,0)
     when "CHF" is entered for the Principal or Other ICD Diagnosis
"PKG",167,22,1,"PAH",1,1,85,0)
     codes.
"PKG",167,22,1,"PAH",1,1,86,0)
   
"PKG",167,22,1,"PAH",1,1,87,0)
2. Modified Surgery Reports and Other Options
"PKG",167,22,1,"PAH",1,1,88,0)
   - The following Surgery reports and options as modified to use the
"PKG",167,22,1,"PAH",1,1,89,0)
     coder entered CPT and/or ICD codes from the SURGERY 
"PKG",167,22,1,"PAH",1,1,90,0)
     PROCEDURE/DIAGNOSIS CODES file (#136):
"PKG",167,22,1,"PAH",1,1,91,0)
     o Cumulative Report of CPT Codes [SROACCT] option
"PKG",167,22,1,"PAH",1,1,92,0)
     o Report of CPT Coding Accuracy [SR CPT ACCURACY] option
"PKG",167,22,1,"PAH",1,1,93,0)
     o List Completed Cases Missing CPT Codes [SRSCPT] option
"PKG",167,22,1,"PAH",1,1,94,0)
       Note: The option descriptions are updated to read "The List
"PKG",167,22,1,"PAH",1,1,95,0)
       Completed Cases Missing CPT Codes option generates a report of
"PKG",167,22,1,"PAH",1,1,96,0)
       completed cases that are missing the Principal CPT code for a
"PKG",167,22,1,"PAH",1,1,97,0)
       specified date range."
"PKG",167,22,1,"PAH",1,1,98,0)
     o Annual Report of Surgical Procedures [SROARSP] option
"PKG",167,22,1,"PAH",1,1,99,0)
     o PCE Filing Status Report [SRO PCE STATUS] option
"PKG",167,22,1,"PAH",1,1,100,0)
     o Quarterly Report - Surgical Service [SRO QUARTERLY REPORT] option
"PKG",167,22,1,"PAH",1,1,101,0)
     o Report of Missing Quarterly Report Data [SROQ MISSING DATA] option
"PKG",167,22,1,"PAH",1,1,102,0)
       Note: The Other CPT Codes no longer affect this report and 
"PKG",167,22,1,"PAH",1,1,103,0)
       references to Other CPT Codes are removed. The display of "I" in 
"PKG",167,22,1,"PAH",1,1,104,0)
       the footer of this report is removed.
"PKG",167,22,1,"PAH",1,1,105,0)
     o Annual Report of Non-O.R. Procedures [SRONOP-ANNUAL] option
"PKG",167,22,1,"PAH",1,1,106,0)
     o List of Invasive Diagnostic Procedures [SROQIDP] option
"PKG",167,22,1,"PAH",1,1,107,0)
   - The following Surgery reports and options are modified to remove CPT 
"PKG",167,22,1,"PAH",1,1,108,0)
     and/or ICD codes from the display.
"PKG",167,22,1,"PAH",1,1,109,0)
     o Update Status of Returns within 30 Days [SRO UPDATE RETURNS] option
"PKG",167,22,1,"PAH",1,1,110,0)
     o Update Operations as Unrelated/Related to Death [SRO DEATH RELATED]
"PKG",167,22,1,"PAH",1,1,111,0)
       option
"PKG",167,22,1,"PAH",1,1,112,0)
     o Non-OR Procedure Information [SR NON-OR INFO] option
"PKG",167,22,1,"PAH",1,1,113,0)
     o Deaths Within 30 Days of Surgery [SROQD] option
"PKG",167,22,1,"PAH",1,1,114,0)
     o Admissions Within 14 Days of Outpatient Surgery [SROQADM] option
"PKG",167,22,1,"PAH",1,1,115,0)
     o List of Operations Included on Quarterly Report [SROQ LIST OPS]
"PKG",167,22,1,"PAH",1,1,116,0)
       option
"PKG",167,22,1,"PAH",1,1,117,0)
 
"PKG",167,22,1,"PAH",1,1,118,0)
3. Modified Risk Assessment Options
"PKG",167,22,1,"PAH",1,1,119,0)
   - Surgery case CPT and/or ICD codes used in the following options are 
"PKG",167,22,1,"PAH",1,1,120,0)
     displayed from the SURGERY PROCEDURE/DIAGNOSIS CODES file (#136):
"PKG",167,22,1,"PAH",1,1,121,0)
     o Print a Surgery Risk Assessment [SROA PRINT ASSESSMENT] option
"PKG",167,22,1,"PAH",1,1,122,0)
     o List of Surgery Risk Assessments [SROA ASSESSMENT LIST] option 
"PKG",167,22,1,"PAH",1,1,123,0)
     o Exclusion Criteria (Enter/Edit) [SR NO ASSESSMENT REASON] option
"PKG",167,22,1,"PAH",1,1,124,0)
       Note: The new CPT code fields will not be editable from this
"PKG",167,22,1,"PAH",1,1,125,0)
       option.
"PKG",167,22,1,"PAH",1,1,126,0)
     o Update 1-Liner Case [SROA ONE-LINER UPDATE] option
"PKG",167,22,1,"PAH",1,1,127,0)
       Note: The new CPT code fields will not be editable from this
"PKG",167,22,1,"PAH",1,1,128,0)
       option.
"PKG",167,22,1,"PAH",1,1,129,0)
     o Queue Assessment Transmissions [SROA TRANSMIT ASSESSMENTS] option
"PKG",167,22,1,"PAH",1,1,130,0)
   - In the following options CPT codes are removed from the screen
"PKG",167,22,1,"PAH",1,1,131,0)
     headings:
"PKG",167,22,1,"PAH",1,1,132,0)
     o Preoperative Information (Enter/Edit) [SROA PREOP DATA] option 
"PKG",167,22,1,"PAH",1,1,133,0)
     o Laboratory Test Results (Enter/Edit) [SROA LAB] option
"PKG",167,22,1,"PAH",1,1,134,0)
     o Operation Information (Enter/Edit) [SROA OPERATION DATA] option
"PKG",167,22,1,"PAH",1,1,135,0)
       Note: The CPT code and Postoperative Diagnosis fields will not be 
"PKG",167,22,1,"PAH",1,1,136,0)
       editable from this option. 
"PKG",167,22,1,"PAH",1,1,137,0)
     o Patient Demographics (Enter/Edit) [SROA DEMOGRAPHICS] option
"PKG",167,22,1,"PAH",1,1,138,0)
     o Intraoperative Occurrences (Enter/Edit) [SRO INTRAOP COMP] option
"PKG",167,22,1,"PAH",1,1,139,0)
     o Postoperative Occurrences (Enter/Edit) [SRO POSTOP COMP] option
"PKG",167,22,1,"PAH",1,1,140,0)
     o Clinical Information (Enter/Edit) [SROA CLINICAL INFORMATION]
"PKG",167,22,1,"PAH",1,1,141,0)
       option
"PKG",167,22,1,"PAH",1,1,142,0)
     o Laboratory Test Results (Enter/Edit) [SROA LAB-CARDIAC] option
"PKG",167,22,1,"PAH",1,1,143,0)
     o Enter Cardiac Catheterization & Angiographic Data [SROA 
"PKG",167,22,1,"PAH",1,1,144,0)
       CATHETERIZATION] option 
"PKG",167,22,1,"PAH",1,1,145,0)
     o Operative Risk Summary Data (Enter/Edit) [SROA CARDIAC OPERATIVE 
"PKG",167,22,1,"PAH",1,1,146,0)
       RISK] option
"PKG",167,22,1,"PAH",1,1,147,0)
       Note: The CPT code fields will not be editable from this option.
"PKG",167,22,1,"PAH",1,1,148,0)
     o Cardiac Procedures Operative Data (Enter/Edit) [SROA CARDIAC 
"PKG",167,22,1,"PAH",1,1,149,0)
       PROCEDURES] option
"PKG",167,22,1,"PAH",1,1,150,0)
     o Outcome Information (Enter/Edit) [SROA CARDIAC-OUTCOMES] option
"PKG",167,22,1,"PAH",1,1,151,0)
     o Resource Data [SROA CARDIAC RESOURCE] option
"PKG",167,22,1,"PAH",1,1,152,0)
   - The Update Assessment Status to 'COMPLETE' [SROA COMPLETE ASSESSMENT]
"PKG",167,22,1,"PAH",1,1,153,0)
     option is modified to remove the ability to edit CPT and ICD codes 
"PKG",167,22,1,"PAH",1,1,154,0)
     from this option.
"PKG",167,22,1,"PAH",1,1,155,0)
 
"PKG",167,22,1,"PAH",1,1,156,0)
4. Functions that are currently part of the Surgery Nightly Cleanup and 
"PKG",167,22,1,"PAH",1,1,157,0)
   Updates [SRTASK-NIGHT] option are modified as follows:
"PKG",167,22,1,"PAH",1,1,158,0)
   - Store Operation Times function uses the CPT code fields in the 
"PKG",167,22,1,"PAH",1,1,159,0)
     SURGERY PROCEDURE/DIAGNOSIS CODES file (#136).
"PKG",167,22,1,"PAH",1,1,160,0)
   - File Surgery Data in PCE function is removed.
"PKG",167,22,1,"PAH",1,1,161,0)
 
"PKG",167,22,1,"PAH",1,1,162,0)
5. The Surgery to PCE interface is modified to send coding data from the 
"PKG",167,22,1,"PAH",1,1,163,0)
   SURGERY PROCEDURE/DIAGNOSIS CODES file (#136). The interface now passes
"PKG",167,22,1,"PAH",1,1,164,0)
   data to PCE in real time when the coder completes the coding process
"PKG",167,22,1,"PAH",1,1,165,0)
   for a case. After a case is filed with PCE, if certain data passed to 
"PKG",167,22,1,"PAH",1,1,166,0)
   PCE is changed within the Surgery software, the Surgery to PCE
"PKG",167,22,1,"PAH",1,1,167,0)
   interface sends an update to PCE immediately. ICD coding related data 
"PKG",167,22,1,"PAH",1,1,168,0)
   is updated through the Update/Verify Procedure/Diagnosis Codes
"PKG",167,22,1,"PAH",1,1,169,0)
   [SRCODING EDIT] option.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
99
"RTN","SRO1L1")
0^1^B16661168^B15646582
"RTN","SRO1L1",1,0)
SRO1L1 ;BIR/ADM - UPDATE 1-LINER CASE, CONTINUED ;02/14/06
"RTN","SRO1L1",2,0)
 ;;3.0; Surgery ;**86,88,100,129,142**;24 Jun 93
"RTN","SRO1L1",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME Q
"RTN","SRO1L1",4,0)
 S SRSOUT=0,SRSUPCPT=2 D NCODE^SROAUTL
"RTN","SRO1L1",5,0)
 N SRLCK S SRLCK=$$LOCK^SROUTL(SRTN) I 'SRLCK Q
"RTN","SRO1L1",6,0)
 D SRA^SROES
"RTN","SRO1L1",7,0)
EDIT S SRA=$G(^SRF(SRTN,"RA")) I $P(SRA,"^",2)="N",$P(SRA,"^",6)="N",$P(SRA,"^",7)'="" D ^SROAEX,END Q
"RTN","SRO1L1",8,0)
 S SRR=0 D TSTAT,HDR^SROAUTL D TECH^SROPRIN
"RTN","SRO1L1",9,0)
 S X=$P(^SRF(SRTN,"OP"),"^",2) I X S Y=$P($$CPT^ICPTCOD(X),"^",2) D SSPRIN^SROCPT S SRCPT=Y
"RTN","SRO1L1",10,0)
 S SRQ=0,SRDR=".011;.03;.04;.035;.166;1.09;1.13"
"RTN","SRO1L1",11,0)
 S SRAO(1)="In/Out-Patient Status^.011",SRAO(2)="Major or Minor^.03",SRAO(3)="Surgical Specialty^.04",SRAO(4)="Surgical Priority^.035",SRAO(5)="Attending Code^.166"
"RTN","SRO1L1",12,0)
 S SRAO(6)="ASA Class^1.13",SRAO(7)="Wound Classification^1.09",SRAO(8)="Anesthesia Technique^.37",SRAO(9)="CPT Codes (view only)^",SRAO(10)="Other Procedures^.42"
"RTN","SRO1L1",13,0)
 K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="E",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SRO1L1",14,0)
 S SRY(130,SRTN,.37,"E")=SRTECH,SRY(130,SRTN,.42,"E")=$S($O(^SRF(SRTN,13,0)):"***INFORMATION ENTERED***",1:"***NONE ENTERED***"),SRY(130,SRTN,27,"E")=SRCPT
"RTN","SRO1L1",15,0)
 F I=1:1:10 W !,$J(I,2)_". "_$P(SRAO(I),"^")_":" D
"RTN","SRO1L1",16,0)
 .I I=9 D PROC Q
"RTN","SRO1L1",17,0)
 .S SREXT(1)=SRY(130,SRTN,$P(SRAO(I),"^",2),"E") I $L(SREXT(1))>48 D
"RTN","SRO1L1",18,0)
 ..N I,J,X,Y S X=SREXT(1) F I=0:1:47 S J=48-I,Y=$E(X,J) I Y=" " S SREXT(1)=$E(X,1,J-1),SREXT(2)=$E(X,J+1,$L(X)) Q
"RTN","SRO1L1",19,0)
 .W ?32,SREXT(1) W:$D(SREXT(2)) !,?32,SREXT(2) K SREXT
"RTN","SRO1L1",20,0)
 W !! F I=1:1:80 W "-"
"RTN","SRO1L1",21,0)
 S SRX=10 D SEL
"RTN","SRO1L1",22,0)
 K DA,DIK S DIK="^SRF(",DIK(1)=".232^AQ",DA=SRTN D EN1^DIK K DA,DIK
"RTN","SRO1L1",23,0)
 G:SRR=1 EDIT
"RTN","SRO1L1",24,0)
END D EXIT^SROES D:$G(SRLCK) UNLOCK^SROUTL(SRTN)
"RTN","SRO1L1",25,0)
 Q
"RTN","SRO1L1",26,0)
PROC N I,SRPROC,SRL S SRL=48 D CPTS^SROAOP1 I SRPROC(1)="" S SRPROC(1)="NOT ENTERED"
"RTN","SRO1L1",27,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?32,SRPROC(I) W:I'=1 !,?32,SRPROC(I)
"RTN","SRO1L1",28,0)
 Q
"RTN","SRO1L1",29,0)
SEL W !!,"Select number of item to edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SRO1L1",30,0)
 Q:X=""  S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP S SRR=1 Q
"RTN","SRO1L1",31,0)
 I X?1.2N1":"1.2N S Y=$P(X,":"),Z=$P(X,":",2) I Y<1!(Z>SRX)!(Y>Z) D HELP S SRR=1 Q
"RTN","SRO1L1",32,0)
 I X="A" S X="1:"_SRX
"RTN","SRO1L1",33,0)
 I X?1.2N1":"1.2N D RANGE S SRR=1 Q
"RTN","SRO1L1",34,0)
 I $D(SRAO(X)) S EMILY=X W !! D ONE S SRR=1
"RTN","SRO1L1",35,0)
 Q
"RTN","SRO1L1",36,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SRO1L1",37,0)
 W !!,"1. Enter 'A' to update all items.",!!,"2. Enter a number (1-"_SRX_") to update an individual item.  (For example,",!,"   enter '1' to update "_$P(SRAO(1),"^")_")"
"RTN","SRO1L1",38,0)
 W !!,"3. Enter a range of numbers (1-"_SRX_") separated by a ':' to enter a range",!,"   of items.  (For example, enter '1:4' to update items 1, 2, 3 and 4.)",!
"RTN","SRO1L1",39,0)
PRESS W ! K DIR S DIR("A")="Press the ENTER key to continue or '^' to exit: ",DIR(0)="FOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SRO1L1",40,0)
 Q
"RTN","SRO1L1",41,0)
RANGE ; range of numbers
"RTN","SRO1L1",42,0)
 S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SRO1L1",43,0)
 Q
"RTN","SRO1L1",44,0)
ONE ; edit one item
"RTN","SRO1L1",45,0)
 I EMILY=8 D UPANES Q
"RTN","SRO1L1",46,0)
 I EMILY=9 D DISP^SROAOP1 Q
"RTN","SRO1L1",47,0)
 I EMILY=10 D ^SROTHER Q
"RTN","SRO1L1",48,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SRO1L1",49,0)
 Q
"RTN","SRO1L1",50,0)
UPANES K DR,DIE,DA S DA=SRTN,DR=.37,DR(2,130.06)=".01T;.05T;42T",DIE=130 D ^DIE K DR
"RTN","SRO1L1",51,0)
 Q
"RTN","SRO1L1",52,0)
TSTAT ; transmission status
"RTN","SRO1L1",53,0)
 N DA,SR905,SRDT,SRTD S SR905=$P($G(^SRF(SRTN,.4)),"^",2)
"RTN","SRO1L1",54,0)
 S SRHDR(.5)="Transmission Status: "_$S(SR905="T":"TRANSMITTED",SR905="R":"QUEUED TO TRANSMIT",1:"NOT QUEUED")
"RTN","SRO1L1",55,0)
 Q
"RTN","SROACAR")
0^2^B10098864^B10066425
"RTN","SROACAR",1,0)
SROACAR ;BIR/MAM - OPEATIVE DATA ;04/13/04  12:55 PM
"RTN","SROACAR",2,0)
 ;;3.0; Surgery ;**38,71,93,95,100,125,142**;24 Jun 93
"RTN","SROACAR",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACAR",4,0)
 S SRACLR=0,SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACAR",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO D ^SROACR1
"RTN","SROACAR",6,0)
ASK W !,"Select Operative Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROACAR",7,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROACAR",8,0)
 I X="A" S X="1:20"
"RTN","SROACAR",9,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>20)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROACAR",10,0)
 D HDR^SROAUTL
"RTN","SROACAR",11,0)
 I X?.N1":".N D RANGE G START
"RTN","SROACAR",12,0)
 I $D(SRAO(X)),+X=X S EMILY=X D  G START
"RTN","SROACAR",13,0)
 .I $$LOCK^SROUTL(SRTN) W ! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACAR",14,0)
 I $D(SRAO(X)) W ! S EMILY=X D  G START
"RTN","SROACAR",15,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACAR",16,0)
END I 'SRSOUT D ^SROACR2
"RTN","SROACAR",17,0)
 W @IOF D ^SRSKILL
"RTN","SROACAR",18,0)
 Q
"RTN","SROACAR",19,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACAR",20,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (1-20) to update the information in that field.  (For",!,"   example, enter '9' to update Valve Repair.)"
"RTN","SROACAR",21,0)
 W !!,"3. Enter a range of numbers (1-20) separated by a ':' to enter a range of",!,"   information.  (For example, enter '6:8' to enter Aortic Valve",!,"   Replacement, Mitral Valve Replacement, and Tricuspid Valve Replacement.)"
"RTN","SROACAR",22,0)
 D RET
"RTN","SROACAR",23,0)
 Q
"RTN","SROACAR",24,0)
RANGE ; range of numbers
"RTN","SROACAR",25,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACAR",26,0)
 .W ! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACAR",27,0)
 Q
"RTN","SROACAR",28,0)
ONE ; edit one item
"RTN","SROACAR",29,0)
 ;I EMILY=16 D MIS^SROACR1 Q
"RTN","SROACAR",30,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROACAR",31,0)
 I 'SRSOUT,EMILY=12!(EMILY=13) D OK
"RTN","SROACAR",32,0)
 Q
"RTN","SROACAR",33,0)
OK N SRISCH,SRCPB S X=$G(^SRF(SRTN,206)),SRISCH=$P(X,"^",36),SRCPB=$P(X,"^",37)
"RTN","SROACAR",34,0)
 I SRISCH,SRCPB,SRISCH>SRCPB W !!,"  ***  NOTE: Ischemic Time is greater than CPB Time!!  Please check.  ***",! D RET W !
"RTN","SROACAR",35,0)
 Q
"RTN","SROACAR",36,0)
RET Q:SRSOUT  W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROACAR",37,0)
 Q
"RTN","SROACAT")
0^3^B8695359^B8662920
"RTN","SROACAT",1,0)
SROACAT ;BIR/MAM - CARDIAC CATH INFO ;04/13/04  3:00 PM
"RTN","SROACAT",2,0)
 ;;3.0; Surgery ;**38,47,100,125,142**;24 Jun 93
"RTN","SROACAT",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACAT",4,0)
 S SRACLR=0,SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACAT",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 D ^SROACTH
"RTN","SROACAT",6,0)
ASK W !!,"Select Cardiac Catheterization and Angiographic Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROACAT",7,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROACAT",8,0)
 I X="A" S X="1:8"
"RTN","SROACAT",9,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>8)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROACAT",10,0)
 D HDR^SROAUTL
"RTN","SROACAT",11,0)
 I X?.N1":".N D RANGE G START
"RTN","SROACAT",12,0)
 I $D(SRAO(X)) S EMILY=X D  G START
"RTN","SROACAT",13,0)
 .I $$LOCK^SROUTL(SRTN) W !! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACAT",14,0)
END I 'SRSOUT D ^SROACTH1
"RTN","SROACAT",15,0)
 I '$D(SREQST) W @IOF D ^SRSKILL
"RTN","SROACAT",16,0)
 Q
"RTN","SROACAT",17,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACAT",18,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (1-8) to update the information in that field.  (For",!,"   example, enter '3' to update Aortic Systolic Pressure.)"
"RTN","SROACAT",19,0)
 W !!,"3. Enter a range of numbers (1-8) separated by a ':' to enter a range of",!,"   information.  (For example, enter '1:3' to update Procedure, LVEDP",!,"   and Aortic Systolic Pressure.)"
"RTN","SROACAT",20,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROACAT",21,0)
 Q
"RTN","SROACAT",22,0)
RANGE ; range of numbers
"RTN","SROACAT",23,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACAT",24,0)
 .W !! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACAT",25,0)
 Q
"RTN","SROACAT",26,0)
ONE ; edit one item
"RTN","SROACAT",27,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y)!$D(DTOUT) S SRSOUT=1
"RTN","SROACAT",28,0)
 Q
"RTN","SROACAT",29,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACAT",30,0)
 Q
"RTN","SROACC0")
0^4^B26210969^B24312640
"RTN","SROACC0",1,0)
SROACC0 ;BIR/MAM - CPT ACCURACY SORT BY SPECIALTY ;05/13/99  2:33 PM
"RTN","SROACC0",2,0)
 ;;3.0; Surgery ;**50,88,142**;24 Jun 93
"RTN","SROACC0",3,0)
DEV W !!,"This report is designed to use a 132 column format.",!!
"RTN","SROACC0",4,0)
 K IOP,%ZIS,POP,IO("Q") S %ZIS("A")="Select Device: ",%ZIS="QM" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROACC0",5,0)
 I $D(IO("Q")) K IO("Q") S ZTRTN="EN^SROACC0",(ZTSAVE("SRSS"),ZTSAVE("SDATE*"),ZTSAVE("EDATE*"),ZTSAVE("SRCPT"),ZTSAVE("SRFLG"),ZTSAVE("SRSITE*"))="",ZTDESC="REPORT TO CHECK CPT CODING ACCURACY" D ^%ZTLOAD G END
"RTN","SROACC0",6,0)
EN ; entry when queued
"RTN","SROACC0",7,0)
 K ^TMP("SR",$J) U IO S SRSOUT=0,SRPAGE=1,SRINST=SRSITE("SITE")
"RTN","SROACC0",8,0)
 N SRFRTO S Y=SDATE X ^DD("DD") S SRFRTO="FROM: "_Y_"  TO: " S Y=EDATE X ^DD("DD") S SRFRTO=SRFRTO_Y
"RTN","SROACC0",9,0)
 I SRCPT="ALL",SRSS="ALL" D ^SROACC1 G END
"RTN","SROACC0",10,0)
 I SRCPT="ALL",SRSS D ^SROACC2 G END
"RTN","SROACC0",11,0)
 I SRCPT,SRSS="ALL" D ^SROACC3 G END
"RTN","SROACC0",12,0)
 D ^SROACC4
"RTN","SROACC0",13,0)
END W:$E(IOST)="P" @IOF I $D(ZTQUEUED) K ^TMP("SR",$J) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROACC0",14,0)
 I 'SRSOUT,$E(IOST)'="P" W !!,"Press RETURN to continue  " R X:DTIME
"RTN","SROACC0",15,0)
 D ^%ZISC W @IOF K SRTN D ^SRSKILL
"RTN","SROACC0",16,0)
 Q
"RTN","SROACC0",17,0)
HDR ; print heading
"RTN","SROACC0",18,0)
 I SRHDR,$E(IOST)'="P" W !!,"Press RETURN to continue, or '^' to quit:  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACC0",19,0)
 W:$Y @IOF W !,?(132-$L(SRINST)\2),SRINST,?126,"PAGE",!,?58,"SURGICAL SERVICE",?126,$J(SRPAGE,4),!,?51,"REPORT OF CPT CODING ACCURACY",?100,"REVIEWED BY:"
"RTN","SROACC0",20,0)
 W ! W:SRSS'="" ?(132-$L("FOR "_SRSS)\2),"FOR "_SRSS W ?100,"DATE REVIEWED:"
"RTN","SROACC0",21,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO
"RTN","SROACC0",22,0)
 W !,$S(SRFLG=1:"O.R. SURGICAL PROCEDURES",SRFLG=2:"NON-O.R. PROCEDURES",1:"O.R. SURGICAL PROCEDURES AND NON-O.R. PROCEDURES")
"RTN","SROACC0",23,0)
 W !!,?1,"PROCEDURE DATE",?20,"PATIENT",?60,"PROCEDURES",?111,"SURGEON/PROVIDER",!,?3,"CASE #",?22,"ID#",?111,"ATTEND SURG/PROV"
"RTN","SROACC0",24,0)
 S SRHDR=1,SRPAGE=SRPAGE+1 Q
"RTN","SROACC0",25,0)
SPEC W !!!,"Do you want to print the Report to Check Coding Accuracy for all",!,"Surgical Specialties ?  YES//  " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 G END
"RTN","SROACC0",26,0)
 S SRYN=$E(SRYN) S:SRYN="" SRYN="Y"
"RTN","SROACC0",27,0)
 I "YyNn"'[SRYN W !!,"Enter RETURN if you want to print the report for all specialties, or 'NO'",!,"to select a specific Surgical Specialty.",!!,"Press RETURN to continue  " R X:DTIME G SPEC
"RTN","SROACC0",28,0)
 S SRSS="ALL" I "Nn"[SRYN W !! K DIC S DIC("S")="I '$P(^(0),""^"",3)",DIC=137.45,DIC(0)="QEAMZ",DIC("A")="Print the Coding Accuracy Report for which Surgical Specialty ?  " D ^DIC S:Y<0 SRSOUT=1 G:Y<0 END S SRSS=+Y
"RTN","SROACC0",29,0)
 D DEV Q
"RTN","SROACC0",30,0)
MSP I SRFLG=3 S SRSS="ALL" G DEV
"RTN","SROACC0",31,0)
 W !!!,"Do you want to print the Report to Check Coding Accuracy for all",!,"Medical Specialties ?  YES//  " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 G END
"RTN","SROACC0",32,0)
 S SRYN=$E(SRYN) S:SRYN="" SRYN="Y"
"RTN","SROACC0",33,0)
 I "YyNn"'[SRYN W !!,"Enter RETURN if you want to print the report for all specialties, or 'NO'",!,"to select a specific Medical Specialty.",!!,"Press RETURN to continue  " R X:DTIME G MSP
"RTN","SROACC0",34,0)
 S SRSS="ALL" I "Nn"[SRYN W !! K DIC S DIC=723,DIC(0)="QEAMZ",DIC("A")="Print the Coding Accuracy Report for which Medical Specialty ?  " D ^DIC S:Y<0 SRSOUT=1 G:Y<0 END S SRSS=+Y
"RTN","SROACC0",35,0)
 D DEV
"RTN","SROACC0",36,0)
 Q
"RTN","SROACC0",37,0)
OPER N CPT,SRCPT K SROPERS,SRCPTT S SRX=^SRF(SRTN,"OP"),SROPER=$P(SRX,"^")
"RTN","SROACC0",38,0)
 I $O(^SRF(SRTN,13,0)) S SROPER=SROPER_",  OTHER OPERATIONS: " S OTH=0 F  S OTH=$O(^SRF(SRTN,13,OTH)) Q:'OTH  D OTHER
"RTN","SROACC0",39,0)
OPERT ; patch SR*3*142 changes
"RTN","SROACC0",40,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2),SRCPT=$S(CPT:$P($$CPT^ICPTCOD(CPT),"^",2),1:"CPT NOT ENTERED") S SRCPTT="CPT Codes: "_SRCPT I CPT D PMOD
"RTN","SROACC0",41,0)
 I $O(^SRO(136,SRTN,3,0)) S OTH=0 F  S OTH=$O(^SRO(136,SRTN,3,OTH)) Q:'OTH  D OTHERT
"RTN","SROACC0",42,0)
 Q
"RTN","SROACC0",43,0)
OTHER ; other procedures
"RTN","SROACC0",44,0)
 S SRLONG=1,SROPERS=$P(^SRF(SRTN,13,OTH,0),"^")
"RTN","SROACC0",45,0)
 I $L(SROPER)+$L(SROPERS)>250 S SROPER=SROPER_" ...",OTH=999 Q
"RTN","SROACC0",46,0)
 S SROPER=SROPER_$S(OTH=1:" ",1:", ")_SROPERS
"RTN","SROACC0",47,0)
 Q
"RTN","SROACC0",48,0)
OTHERT ; other procedures - file #136
"RTN","SROACC0",49,0)
 S SRLONG=1,CPT=$P($G(^SRO(136,SRTN,3,OTH,0)),"^"),SRCPT=$S(CPT:$P($$CPT^ICPTCOD(CPT),"^",2),1:"CPT NOT ENTERED") I CPT S SRCPTT=SRCPTT_", "_SRCPT D OMOD
"RTN","SROACC0",50,0)
 Q
"RTN","SROACC0",51,0)
OMOD ; Other procedure CPT modifiers - file #136
"RTN","SROACC0",52,0)
 N SRCMOD,SRCOMMA,X I $O(^SRO(136,SRTN,3,OTH,1,0)) D
"RTN","SROACC0",53,0)
 .S (SRCOMMA,SRI)=0,SRCMOD="",SRCPTT=SRCPTT_"-" F  S SRI=$O(^SRO(136,SRTN,3,OTH,1,SRI)) Q:'SRI  D
"RTN","SROACC0",54,0)
 ..S SRM=$P(^SRO(136,SRTN,3,OTH,1,SRI,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRM,"I"),"^",2)
"RTN","SROACC0",55,0)
 ..S SRCPTT=SRCPTT_$S(SRCOMMA:",",1:"")_SRCMOD,SRCOMMA=1
"RTN","SROACC0",56,0)
 Q
"RTN","SROACC0",57,0)
PMOD ; principle procedure CPT modifiers - file #136
"RTN","SROACC0",58,0)
 N SRCMOD,SRCOMMA,X I $O(^SRO(136,SRTN,1,0)) D
"RTN","SROACC0",59,0)
 .S (SRCOMMA,SRI)=0,SRCMOD="",SRCPTT=SRCPTT_"-" F  S SRI=$O(^SRO(136,SRTN,1,SRI)) Q:'SRI  D
"RTN","SROACC0",60,0)
 ..S SRM=$P(^SRO(136,SRTN,1,SRI,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRM,"I"),"^",2)
"RTN","SROACC0",61,0)
 ..S SRCPTT=SRCPTT_$S(SRCOMMA:",",1:"")_SRCMOD,SRCOMMA=1
"RTN","SROACC0",62,0)
 Q
"RTN","SROACC0",63,0)
LOOP ; break CPT line greater than 50 characters
"RTN","SROACC0",64,0)
 S SROPT(M)="" F LOOP=1:1 S MM=$P(SRCPTT," "),MMM=$P(SRCPTT," ",2,200) Q:MMM=""  Q:$L(SROPT(M))+$L(MM)'<50  S SROPT(M)=SROPT(M)_MM_" ",SRCPTT=MMM
"RTN","SROACC0",65,0)
 Q
"RTN","SROACC1")
0^5^B16590247^B15386801
"RTN","SROACC1",1,0)
SROACC1 ;BIR/MAM - CPT ACCURACY ALL CODES AND SPECIALTIES ;05/13/99  3:24 PM
"RTN","SROACC1",2,0)
 ;;3.0; Surgery ;**37,50,88,127,142**;24 Jun 93
"RTN","SROACC1",3,0)
 ;
"RTN","SROACC1",4,0)
 ; Reference to ^ECC(723 supported by DBIA #205
"RTN","SROACC1",5,0)
 ;
"RTN","SROACC1",6,0)
 S SRSDT=SDATE1 F  S SRSDT=$O(^SRF("AC",SRSDT)) Q:SRSDT>EDATE1!('SRSDT)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDT,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$P($G(^SRF(SRTN,30)),"^")="",$$DIV^SROUTL0(SRTN) D UTIL
"RTN","SROACC1",7,0)
 S (SRSS,SRHDR)=0 F  S SRSS=$O(^TMP("SR",$J,SRSS)) Q:SRSS=""!(SRSOUT)  D HDR^SROACC0 Q:SRSOUT  S SRHDR=1,CPT=0 F  S CPT=$O(^TMP("SR",$J,SRSS,CPT)) Q:CPT=""!(SRSOUT)  D MORE
"RTN","SROACC1",8,0)
 I '$D(^TMP("SR",$J)) D HDR^SROACC0,LINE W $$NODATA^SROUTL0()
"RTN","SROACC1",9,0)
 Q
"RTN","SROACC1",10,0)
MORE ; print CPT description and get cases
"RTN","SROACC1",11,0)
 I $Y+12>IOSL D HDR^SROACC0 I SRSOUT Q
"RTN","SROACC1",12,0)
 S TYPE=0,X=$$CPT^ICPTCOD(CPT,EDATE),CPT1=$P(X,"^",2)_"  "_$P(X,"^",3)
"RTN","SROACC1",13,0)
 F  S TYPE=$O(^TMP("SR",$J,SRSS,CPT,TYPE)) Q:TYPE=""  D DESC S SRSDT=0 F  S SRSDT=$O(^TMP("SR",$J,SRSS,CPT,TYPE,SRSDT)) Q:'SRSDT!(SRSOUT)  D SRTN
"RTN","SROACC1",14,0)
 Q
"RTN","SROACC1",15,0)
SRTN S SRTN=0 F  S SRTN=$O(^TMP("SR",$J,SRSS,CPT,TYPE,SRSDT,SRTN)) Q:'SRTN!(SRSOUT)  D PRINT
"RTN","SROACC1",16,0)
 Q
"RTN","SROACC1",17,0)
LOOP ; break procedure greater than 50 characters
"RTN","SROACC1",18,0)
 S SROP(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROP(M))+$L(MM)'<50  S SROP(M)=SROP(M)_MM_" ",SROPER=MMM
"RTN","SROACC1",19,0)
 Q
"RTN","SROACC1",20,0)
DESC ; print description
"RTN","SROACC1",21,0)
 Q:SRSOUT  I '$O(^TMP("SR",$J,SRSS,CPT,TYPE,0)) Q
"RTN","SROACC1",22,0)
 D LINE W !!,?(132-$L(CPT1)\2),CPT1
"RTN","SROACC1",23,0)
 I TYPE=1 W !,?50,"PRINCIPAL PROCEDURES"
"RTN","SROACC1",24,0)
 I TYPE=2 W !,?54,"OTHER PROCEDURES"
"RTN","SROACC1",25,0)
 K SRDESC S X=$$CPTD^ICPTCOD(CPT,"SRDESC",,EDATE) F I=1:1:X S Y=$S(I=1:"DESCRIPTION: "_SRDESC(I),1:SRDESC(I)) W !,?(132-$L(Y)\2),Y
"RTN","SROACC1",26,0)
 W !! F LINE=1:1:132 W "-"
"RTN","SROACC1",27,0)
 Q
"RTN","SROACC1",28,0)
PRINT ; print each case
"RTN","SROACC1",29,0)
 I $Y+5>IOSL D HDR^SROACC0 Q:SRSOUT  D DESC
"RTN","SROACC1",30,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROACC1",31,0)
 S DFN=$P(^SRF(SRTN,0),"^"),Y=SRSDT D D^DIQ S SRDT=Y
"RTN","SROACC1",32,0)
 S Y=$P(SRDT,"@",2),SRDT=$E(SRSDT,4,5)_"/"_$E(SRSDT,6,7)_"/"_$E(SRSDT,2,3)_" "_Y
"RTN","SROACC1",33,0)
 D DEM^VADPT S SRNAME=VADM(1),SSN=VA("PID"),SR(.1)=$S($D(^SRF(SRTN,.1)):^(.1),1:""),SRSUR=$S(SRNON:$P(^SRF(SRTN,"NON"),"^",6),1:$P(SR(.1),"^",4)),SRATT=$S(SRNON:$P(^SRF(SRTN,"NON"),"^",7),1:$P(SR(.1),"^",13))
"RTN","SROACC1",34,0)
 I SRSUR S SRSUR=$P(^VA(200,SRSUR,0),"^") I $L(SRSUR)>20 S SRSUR=$P(SRSUR,",")_", "_$E($P(SRSUR,",",2))
"RTN","SROACC1",35,0)
 I SRATT S SRATT=$P(^VA(200,SRATT,0),"^") I $L(SRATT)>20 S SRATT=$P(SRATT,",")_", "_$E($P(SRATT,",",2))
"RTN","SROACC1",36,0)
 D OPER^SROACC0
"RTN","SROACC1",37,0)
 K SROP,SROPT,MM,MMM S:$L(SROPER)<51 SROP(1)=SROPER I $L(SROPER)>50 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROACC1",38,0)
 W !,SRDT,?20,SRNAME,?60,SROP(1),?111,SRSUR,!,?3,SRTN,?20,VA("PID") W:$D(SROP(2)) ?60,SROP(2) W ?111,SRATT,! W:SRFLG=3&(SRNON) "NON-O.R." I $D(SROP(3)) W ?60,SROP(3) I $D(SROP(4)) W !,?60,SROP(4) I $D(SROP(5)) W !,?60,SROP(5)
"RTN","SROACC1",39,0)
 I $D(SRCPTT) S:$L(SRCPTT)<51 SROPT(1)=SRCPTT I $L(SRCPTT)>50 S SRCPTT=SRCPTT_"  " F M=1:1 D LOOP^SROACC0 Q:MMM=""
"RTN","SROACC1",40,0)
 I $D(SRCPTT) F LOOP=1:1 Q:'$D(SROPT(LOOP))  W !,?60,SROPT(LOOP)
"RTN","SROACC1",41,0)
 W ! Q
"RTN","SROACC1",42,0)
UTIL ; set ^TMP("SR")
"RTN","SROACC1",43,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROACC1",44,0)
 I SRFLG=1!(SRFLG=3&('SRNON)) Q:$P($G(^SRF(SRTN,.2)),"^",12)=""
"RTN","SROACC1",45,0)
 I SRFLG=2 Q:'SRNON
"RTN","SROACC1",46,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2)
"RTN","SROACC1",47,0)
 I 'SRNON S X=$P(^SRF(SRTN,0),"^",4),SRSS=$S('X:"SPECIALTY NOT ENTERED",1:$P(^SRO(137.45,X,0),"^"))
"RTN","SROACC1",48,0)
 I SRNON S X=$P(^SRF(SRTN,"NON"),"^",8),SRSS=$S(X:$P(^ECC(723,X,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROACC1",49,0)
 I CPT S ^TMP("SR",$J,SRSS,CPT,1,SRSDT,SRTN)=""
"RTN","SROACC1",50,0)
 S OP=0 F  S OP=$O(^SRO(136,SRTN,3,OP)) Q:'OP  I $P($G(^SRO(136,SRTN,3,OP,0)),"^") S CPT=$P(^(0),"^"),^TMP("SR",$J,SRSS,CPT,2,SRSDT,SRTN)=""
"RTN","SROACC1",51,0)
 Q
"RTN","SROACC1",52,0)
LINE W ! F LINE=1:1:132 W "="
"RTN","SROACC1",53,0)
 Q
"RTN","SROACC2")
0^6^B15553723^B14349621
"RTN","SROACC2",1,0)
SROACC2 ;BIR/MAM - CPT ACCURACY ALL CODES AND 1 SPECIALTY ;05/14/99  11:33 AM
"RTN","SROACC2",2,0)
 ;;3.0; Surgery ;**37,50,88,127,142**;24 Jun 93
"RTN","SROACC2",3,0)
 ;
"RTN","SROACC2",4,0)
 ; Reference to ^ECC(723 supported by DBIA #205
"RTN","SROACC2",5,0)
 ;
"RTN","SROACC2",6,0)
 S SRSPEC=SRSS,SRSS=$S(SRFLG=1:$P(^SRO(137.45,SRSS,0),"^"),1:$P(^ECC(723,SRSS,0),"^"))
"RTN","SROACC2",7,0)
 S SRSDT=SDATE1 F  S SRSDT=$O(^SRF("AC",SRSDT)) Q:SRSDT>EDATE1!('SRSDT)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDT,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$P($G(^SRF(SRTN,30)),"^")="",$$DIV^SROUTL0(SRTN) D UTIL
"RTN","SROACC2",8,0)
 S SRHDR=0 D HDR^SROACC0 S CPT=0 F  S CPT=$O(^TMP("SR",$J,SRSS,CPT)) Q:'CPT!(SRSOUT)  D MORE
"RTN","SROACC2",9,0)
 I '$D(^TMP("SR",$J)) D LINE W $$NODATA^SROUTL0()
"RTN","SROACC2",10,0)
 Q
"RTN","SROACC2",11,0)
MORE ; print CPT description and get cases
"RTN","SROACC2",12,0)
 I $Y+12>IOSL D HDR^SROACC0 I SRSOUT Q
"RTN","SROACC2",13,0)
 S TYPE=0,X=$$CPT^ICPTCOD(CPT,EDATE),CPT1=$P(X,"^",2)_"  "_$P(X,"^",3)
"RTN","SROACC2",14,0)
 F  S TYPE=$O(^TMP("SR",$J,SRSS,CPT,TYPE)) Q:TYPE=""  D DESC S SRSDT=0 F  S SRSDT=$O(^TMP("SR",$J,SRSS,CPT,TYPE,SRSDT)) Q:'SRSDT!(SRSOUT)  D SRTN
"RTN","SROACC2",15,0)
 Q
"RTN","SROACC2",16,0)
SRTN S SRTN=0 F  S SRTN=$O(^TMP("SR",$J,SRSS,CPT,TYPE,SRSDT,SRTN)) Q:'SRTN!(SRSOUT)  D PRINT
"RTN","SROACC2",17,0)
 Q
"RTN","SROACC2",18,0)
LOOP ; break procedure greater than 50 characters
"RTN","SROACC2",19,0)
 S SROP(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROP(M))+$L(MM)'<50  S SROP(M)=SROP(M)_MM_" ",SROPER=MMM
"RTN","SROACC2",20,0)
 Q
"RTN","SROACC2",21,0)
DESC ; print description
"RTN","SROACC2",22,0)
 Q:SRSOUT  I '$O(^TMP("SR",$J,SRSS,CPT,TYPE,0)) Q
"RTN","SROACC2",23,0)
 D LINE W !!,?(132-$L(CPT1)\2),CPT1
"RTN","SROACC2",24,0)
 I TYPE=1 W !,?50,"PRINCIPAL PROCEDURES"
"RTN","SROACC2",25,0)
 I TYPE=2 W !,?54,"OTHER PROCEDURES"
"RTN","SROACC2",26,0)
 K SRDESC S X=$$CPTD^ICPTCOD(CPT,"SRDESC",,EDATE) F I=1:1:X S Y=$S(I=1:"DESCRIPTION: "_SRDESC(I),1:SRDESC(I)) W !,?(132-$L(Y)\2),Y
"RTN","SROACC2",27,0)
 W !! F LINE=1:1:132 W "-"
"RTN","SROACC2",28,0)
 Q
"RTN","SROACC2",29,0)
PRINT ; print each case
"RTN","SROACC2",30,0)
 I $Y+5>IOSL D HDR^SROACC0 Q:SRSOUT  D DESC
"RTN","SROACC2",31,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROACC2",32,0)
 S DFN=$P(^SRF(SRTN,0),"^"),Y=SRSDT D D^DIQ S SRDT=Y
"RTN","SROACC2",33,0)
 S Y=$P(SRDT,"@",2),SRDT=$E(SRSDT,4,5)_"/"_$E(SRSDT,6,7)_"/"_$E(SRSDT,2,3)_" "_Y
"RTN","SROACC2",34,0)
 D DEM^VADPT S SRNAME=VADM(1),SSN=VA("PID"),SR(.1)=$S($D(^SRF(SRTN,.1)):^(.1),1:""),SRSUR=$S(SRNON:$P(^SRF(SRTN,"NON"),"^",6),1:$P(SR(.1),"^",4)),SRATT=$S(SRNON:$P(^SRF(SRTN,"NON"),"^",7),1:$P(SR(.1),"^",13))
"RTN","SROACC2",35,0)
 I SRSUR S SRSUR=$P(^VA(200,SRSUR,0),"^") I $L(SRSUR)>20 S SRSUR=$P(SRSUR,",")_", "_$E($P(SRSUR,",",2))
"RTN","SROACC2",36,0)
 I SRATT S SRATT=$P(^VA(200,SRATT,0),"^") I $L(SRATT)>20 S SRATT=$P(SRATT,",")_", "_$E($P(SRATT,",",2))
"RTN","SROACC2",37,0)
 D OPER^SROACC0
"RTN","SROACC2",38,0)
 K SROP,SROPT,MM,MMM S:$L(SROPER)<51 SROP(1)=SROPER I $L(SROPER)>50 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROACC2",39,0)
 W !,SRDT,?20,SRNAME,?60,SROP(1),?111,SRSUR,!,?3,SRTN,?20,VA("PID") W:$D(SROP(2)) ?60,SROP(2) W ?111,SRATT,! W:SRFLG=3&(SRNON) "NON-O.R." I $D(SROP(3)) W ?60,SROP(3) I $D(SROP(4)) W !,?60,SROP(4) I $D(SROP(5)) W !,?60,SROP(5)
"RTN","SROACC2",40,0)
 I $D(SRCPTT) S:$L(SRCPTT)<51 SROPT(1)=SRCPTT I $L(SRCPTT)>50 S SRCPTT=SRCPTT_"  " F M=1:1 D LOOP^SROACC0 Q:MMM=""
"RTN","SROACC2",41,0)
 I $D(SRCPTT) F LOOP=1:1 Q:'$D(SROPT(LOOP))  W !,?60,SROPT(LOOP)
"RTN","SROACC2",42,0)
 W ! Q
"RTN","SROACC2",43,0)
UTIL ; set ^TMP("SR")
"RTN","SROACC2",44,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROACC2",45,0)
 I SRFLG=1!(SRFLG=3&('SRNON)) Q:$P($G(^SRF(SRTN,.2)),"^",12)=""
"RTN","SROACC2",46,0)
 I SRFLG=2 Q:'SRNON
"RTN","SROACC2",47,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2)
"RTN","SROACC2",48,0)
 I 'SRNON S X=$P(^SRF(SRTN,0),"^",4) I X'=SRSPEC Q
"RTN","SROACC2",49,0)
 I SRNON S X=$P(^SRF(SRTN,"NON"),"^",8) I X'=SRSPEC Q
"RTN","SROACC2",50,0)
 I CPT S ^TMP("SR",$J,SRSS,CPT,1,SRSDT,SRTN)=""
"RTN","SROACC2",51,0)
 S OP=0 F  S OP=$O(^SRO(136,SRTN,3,OP)) Q:'OP  I $P($G(^SRO(136,SRTN,3,OP,0)),"^") S CPT=$P(^(0),"^"),^TMP("SR",$J,SRSS,CPT,2,SRSDT,SRTN)=""
"RTN","SROACC2",52,0)
 Q
"RTN","SROACC2",53,0)
LINE W ! F LINE=1:1:132 W "="
"RTN","SROACC2",54,0)
 Q
"RTN","SROACC3")
0^7^B15911250^B14708328
"RTN","SROACC3",1,0)
SROACC3 ;BIR/MAM - CPT ACCURACY 1 CODE, ALL SPECIALTIES ;05/14/99  11:33 AM
"RTN","SROACC3",2,0)
 ;;3.0; Surgery ;**37,50,88,127,142**;24 Jun 93
"RTN","SROACC3",3,0)
 ;
"RTN","SROACC3",4,0)
 ; Reference to ^ECC(723 supported by DBIA #205
"RTN","SROACC3",5,0)
 ;
"RTN","SROACC3",6,0)
 S SRSDT=SDATE1 F  S SRSDT=$O(^SRF("AC",SRSDT)) Q:SRSDT>EDATE1!('SRSDT)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDT,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$P($G(^SRF(SRTN,30)),"^")="",$$DIV^SROUTL0(SRTN) D UTIL
"RTN","SROACC3",7,0)
 S (SRSS,SRHDR)=0 F  S SRSS=$O(^TMP("SR",$J,SRSS)) Q:SRSS=""!(SRSOUT)  D HDR^SROACC0 Q:SRSOUT  S SRHDR=1 D MORE
"RTN","SROACC3",8,0)
 I '$D(^TMP("SR",$J)) D HDR^SROACC0,LINE W $$NODATA^SROUTL0()
"RTN","SROACC3",9,0)
 Q
"RTN","SROACC3",10,0)
MORE ; print CPT description and get cases
"RTN","SROACC3",11,0)
 I $Y+12>IOSL D HDR^SROACC0 I SRSOUT Q
"RTN","SROACC3",12,0)
 S TYPE=0,X=$$CPT^ICPTCOD(SRCPT,EDATE),CPT1=$P(X,"^",2)_"  "_$P(X,"^",3)
"RTN","SROACC3",13,0)
 F  S TYPE=$O(^TMP("SR",$J,SRSS,TYPE)) Q:TYPE=""  D DESC S SRSDT=0 F  S SRSDT=$O(^TMP("SR",$J,SRSS,TYPE,SRSDT)) Q:'SRSDT!(SRSOUT)  D SRTN
"RTN","SROACC3",14,0)
 Q
"RTN","SROACC3",15,0)
SRTN S SRTN=0 F  S SRTN=$O(^TMP("SR",$J,SRSS,TYPE,SRSDT,SRTN)) Q:'SRTN!(SRSOUT)  D PRINT
"RTN","SROACC3",16,0)
 Q
"RTN","SROACC3",17,0)
LOOP ; break procedure greater than 50 characters
"RTN","SROACC3",18,0)
 S SROP(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROP(M))+$L(MM)'<50  S SROP(M)=SROP(M)_MM_" ",SROPER=MMM
"RTN","SROACC3",19,0)
 Q
"RTN","SROACC3",20,0)
DESC ; print description
"RTN","SROACC3",21,0)
 Q:SRSOUT  I '$O(^TMP("SR",$J,SRSS,TYPE,0)) Q
"RTN","SROACC3",22,0)
 D LINE W !!,?(132-$L(CPT1)\2),CPT1
"RTN","SROACC3",23,0)
 I TYPE=1 W !,?50,"PRINCIPAL PROCEDURES"
"RTN","SROACC3",24,0)
 I TYPE=2 W !,?54,"OTHER PROCEDURES"
"RTN","SROACC3",25,0)
 K SRDESC S X=$$CPTD^ICPTCOD(SRCPT,"SRDESC",,EDATE) F I=1:1:X S Y=$S(I=1:"DESCRIPTION: "_SRDESC(I),1:SRDESC(I)) W !,?(132-$L(Y)\2),Y
"RTN","SROACC3",26,0)
 W !! F LINE=1:1:132 W "-"
"RTN","SROACC3",27,0)
 Q
"RTN","SROACC3",28,0)
PRINT ; print each case
"RTN","SROACC3",29,0)
 I $Y+5>IOSL D HDR^SROACC0 Q:SRSOUT  D DESC
"RTN","SROACC3",30,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROACC3",31,0)
 S DFN=$P(^SRF(SRTN,0),"^"),Y=SRSDT D D^DIQ S SRDT=Y
"RTN","SROACC3",32,0)
 S Y=$P(SRDT,"@",2),SRDT=$E(SRSDT,4,5)_"/"_$E(SRSDT,6,7)_"/"_$E(SRSDT,2,3)_" "_Y
"RTN","SROACC3",33,0)
 D DEM^VADPT S SRNAME=VADM(1),SSN=VA("PID"),SR(.1)=$S($D(^SRF(SRTN,.1)):^(.1),1:""),SRSUR=$S(SRNON:$P(^SRF(SRTN,"NON"),"^",6),1:$P(SR(.1),"^",4)),SRATT=$S(SRNON:$P(^SRF(SRTN,"NON"),"^",7),1:$P(SR(.1),"^",13))
"RTN","SROACC3",34,0)
 I SRSUR S SRSUR=$P(^VA(200,SRSUR,0),"^") I $L(SRSUR)>20 S SRSUR=$P(SRSUR,",")_", "_$E($P(SRSUR,",",2))
"RTN","SROACC3",35,0)
 I SRATT S SRATT=$P(^VA(200,SRATT,0),"^") I $L(SRATT)>20 S SRATT=$P(SRATT,",")_", "_$E($P(SRATT,",",2))
"RTN","SROACC3",36,0)
 D OPER^SROACC0
"RTN","SROACC3",37,0)
 K SROP,SROPT,MM,MMM S:$L(SROPER)<51 SROP(1)=SROPER I $L(SROPER)>50 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROACC3",38,0)
 W !,SRDT,?20,SRNAME,?60,SROP(1),?111,SRSUR,!,?3,SRTN,?20,VA("PID") W:$D(SROP(2)) ?60,SROP(2) W ?111,SRATT,! W:SRFLG=3&(SRNON) "NON-O.R." I $D(SROP(3)) W ?60,SROP(3) I $D(SROP(4)) W !,?60,SROP(4) I $D(SROP(5)) W !,?60,SROP(5)
"RTN","SROACC3",39,0)
 I $D(SRCPTT) S:$L(SRCPTT)<51 SROPT(1)=SRCPTT I $L(SRCPTT)>50 S SRCPTT=SRCPTT_"  " F M=1:1 D LOOP^SROACC0 Q:MMM=""
"RTN","SROACC3",40,0)
 I $D(SRCPTT) F LOOP=1:1 Q:'$D(SROPT(LOOP))  W !,?60,SROPT(LOOP)
"RTN","SROACC3",41,0)
 W ! Q
"RTN","SROACC3",42,0)
UTIL ; set ^TMP("SR")
"RTN","SROACC3",43,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROACC3",44,0)
 I SRFLG=1!(SRFLG=3&('SRNON)) Q:$P($G(^SRF(SRTN,.2)),"^",12)=""
"RTN","SROACC3",45,0)
 I SRFLG=2 Q:'SRNON
"RTN","SROACC3",46,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2)
"RTN","SROACC3",47,0)
 I 'SRNON S X=$P(^SRF(SRTN,0),"^",4),SRSS=$S('X:"SPECIALTY NOT ENTERED",1:$P(^SRO(137.45,X,0),"^"))
"RTN","SROACC3",48,0)
 I SRNON S X=$P(^SRF(SRTN,"NON"),"^",8),SRSS=$S(X:$P(^ECC(723,X,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROACC3",49,0)
 I CPT=SRCPT S ^TMP("SR",$J,SRSS,1,SRSDT,SRTN)=""
"RTN","SROACC3",50,0)
 S OP=0 F  S OP=$O(^SRO(136,SRTN,3,OP)) Q:'OP  S CPT=$P($G(^SRO(136,SRTN,3,OP,0)),"^") I CPT=SRCPT S ^TMP("SR",$J,SRSS,2,SRSDT,SRTN)=""
"RTN","SROACC3",51,0)
 Q
"RTN","SROACC3",52,0)
LINE W ! F LINE=1:1:132 W "="
"RTN","SROACC3",53,0)
 Q
"RTN","SROACC4")
0^8^B14665771^B13498785
"RTN","SROACC4",1,0)
SROACC4 ;BIR/MAM - CPT ACCURACY ALL CODES AND 1 SPECIALTY ;05/14/99  11:37 AM
"RTN","SROACC4",2,0)
 ;;3.0; Surgery ;**37,50,88,127,142**;24 Jun 93
"RTN","SROACC4",3,0)
 ;
"RTN","SROACC4",4,0)
 ; Reference to ^ECC(723 supported by DBIA #205
"RTN","SROACC4",5,0)
 ;
"RTN","SROACC4",6,0)
 S SRSPEC=SRSS,SRSS=$S(SRFLG=1:$P(^SRO(137.45,SRSS,0),"^"),1:$P(^ECC(723,SRSS,0),"^"))
"RTN","SROACC4",7,0)
 S SRSDT=SDATE1 F  S SRSDT=$O(^SRF("AC",SRSDT)) Q:SRSDT>EDATE1!('SRSDT)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDT,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$P($G(^SRF(SRTN,30)),"^")="",$$DIV^SROUTL0(SRTN) D UTIL
"RTN","SROACC4",8,0)
 S SRHDR=0 D HDR^SROACC0 Q:SRSOUT  S SRHDR=1
"RTN","SROACC4",9,0)
 S TYPE=0,X=$$CPT^ICPTCOD(SRCPT,EDATE),CPT1=$P(X,"^",2)_"  "_$P(X,"^",3)
"RTN","SROACC4",10,0)
 F  S TYPE=$O(^TMP("SR",$J,SRSS,TYPE)) Q:TYPE=""  D DESC S SRSDT=0 F  S SRSDT=$O(^TMP("SR",$J,SRSS,TYPE,SRSDT)) Q:'SRSDT!(SRSOUT)  D SRTN
"RTN","SROACC4",11,0)
 I '$D(^TMP("SR",$J)) D LINE W $$NODATA^SROUTL0()
"RTN","SROACC4",12,0)
 Q
"RTN","SROACC4",13,0)
SRTN S SRTN=0 F  S SRTN=$O(^TMP("SR",$J,SRSS,TYPE,SRSDT,SRTN)) Q:'SRTN!(SRSOUT)  D PRINT
"RTN","SROACC4",14,0)
 Q
"RTN","SROACC4",15,0)
LOOP ; break procedure greater than 50 characters
"RTN","SROACC4",16,0)
 S SROP(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROP(M))+$L(MM)'<50  S SROP(M)=SROP(M)_MM_" ",SROPER=MMM
"RTN","SROACC4",17,0)
 Q
"RTN","SROACC4",18,0)
DESC ; print description
"RTN","SROACC4",19,0)
 Q:SRSOUT  I '$O(^TMP("SR",$J,SRSS,TYPE,0)) Q
"RTN","SROACC4",20,0)
 D LINE W !!,?(132-$L(CPT1)\2),CPT1
"RTN","SROACC4",21,0)
 I TYPE=1 W !,?50,"PRINCIPAL PROCEDURES"
"RTN","SROACC4",22,0)
 I TYPE=2 W !,?54,"OTHER PROCEDURES"
"RTN","SROACC4",23,0)
 K SRDESC S X=$$CPTD^ICPTCOD(SRCPT,"SRDESC",,EDATE) F I=1:1:X S Y=$S(I=1:"DESCRIPTION: "_SRDESC(I),1:SRDESC(I)) W !,?(132-$L(Y)\2),Y
"RTN","SROACC4",24,0)
 W !! F LINE=1:1:132 W "-"
"RTN","SROACC4",25,0)
 Q
"RTN","SROACC4",26,0)
PRINT ; print each case
"RTN","SROACC4",27,0)
 I $Y+5>IOSL D HDR^SROACC0 Q:SRSOUT  D DESC
"RTN","SROACC4",28,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROACC4",29,0)
 S DFN=$P(^SRF(SRTN,0),"^"),Y=SRSDT D D^DIQ S SRDT=Y
"RTN","SROACC4",30,0)
 S Y=$P(SRDT,"@",2),SRDT=$E(SRSDT,4,5)_"/"_$E(SRSDT,6,7)_"/"_$E(SRSDT,2,3)_" "_Y
"RTN","SROACC4",31,0)
 D DEM^VADPT S SRNAME=VADM(1),SSN=VA("PID"),SR(.1)=$S($D(^SRF(SRTN,.1)):^(.1),1:""),SRSUR=$S(SRNON:$P(^SRF(SRTN,"NON"),"^",6),1:$P(SR(.1),"^",4)),SRATT=$S(SRNON:$P(^SRF(SRTN,"NON"),"^",7),1:$P(SR(.1),"^",13))
"RTN","SROACC4",32,0)
 I SRSUR S SRSUR=$P(^VA(200,SRSUR,0),"^") I $L(SRSUR)>20 S SRSUR=$P(SRSUR,",")_", "_$E($P(SRSUR,",",2))
"RTN","SROACC4",33,0)
 I SRATT S SRATT=$P(^VA(200,SRATT,0),"^") I $L(SRATT)>20 S SRATT=$P(SRATT,",")_", "_$E($P(SRATT,",",2))
"RTN","SROACC4",34,0)
 D OPER^SROACC0
"RTN","SROACC4",35,0)
 K SROP,SROPT,MM,MMM S:$L(SROPER)<51 SROP(1)=SROPER I $L(SROPER)>50 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROACC4",36,0)
 W !,SRDT,?20,SRNAME,?60,SROP(1),?111,SRSUR,!,?3,SRTN,?20,VA("PID") W:$D(SROP(2)) ?60,SROP(2) W ?111,SRATT,! W:SRFLG=3&(SRNON) "NON-O.R." I $D(SROP(3)) W ?60,SROP(3) I $D(SROP(4)) W !,?60,SROP(4) I $D(SROP(5)) W !,?60,SROP(5)
"RTN","SROACC4",37,0)
 I $D(SRCPTT) S:$L(SRCPTT)<51 SROPT(1)=SRCPTT I $L(SRCPTT)>50 S SRCPTT=SRCPTT_"  " F M=1:1 D LOOP^SROACC0 Q:MMM=""
"RTN","SROACC4",38,0)
 I $D(SRCPTT) F LOOP=1:1 Q:'$D(SROPT(LOOP))  W !,?60,SROPT(LOOP)
"RTN","SROACC4",39,0)
 W ! Q
"RTN","SROACC4",40,0)
UTIL ; set ^TMP("SR")
"RTN","SROACC4",41,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROACC4",42,0)
 I SRFLG=1!(SRFLG=3&('SRNON)) Q:$P($G(^SRF(SRTN,.2)),"^",12)=""
"RTN","SROACC4",43,0)
 I SRFLG=2 Q:'SRNON
"RTN","SROACC4",44,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2)
"RTN","SROACC4",45,0)
 I 'SRNON S X=$P(^SRF(SRTN,0),"^",4) I X'=SRSPEC Q
"RTN","SROACC4",46,0)
 I SRNON S X=$P(^SRF(SRTN,"NON"),"^",8) I X'=SRSPEC Q
"RTN","SROACC4",47,0)
 I CPT=SRCPT S ^TMP("SR",$J,SRSS,1,SRSDT,SRTN)=""
"RTN","SROACC4",48,0)
 S OP=0 F  S OP=$O(^SRO(136,SRTN,3,OP)) Q:'OP  S CPT=$P($G(^SRO(136,SRTN,3,OP,0)),"^") I CPT=SRCPT S ^TMP("SR",$J,SRSS,2,SRSDT,SRTN)=""
"RTN","SROACC4",49,0)
 Q
"RTN","SROACC4",50,0)
LINE W ! F LINE=1:1:132 W "="
"RTN","SROACC4",51,0)
 Q
"RTN","SROACC5")
0^9^B17271167^B15888183
"RTN","SROACC5",1,0)
SROACC5 ;BIR/MAM - CPT ACCURACY ALL CODES ;05/14/99  11:33 AM
"RTN","SROACC5",2,0)
 ;;3.0; Surgery ;**37,50,88,127,142**;24 Jun 93
"RTN","SROACC5",3,0)
 ;
"RTN","SROACC5",4,0)
 ; Reference to ^ECC(723 supported by DBIA #205
"RTN","SROACC5",5,0)
 ;
"RTN","SROACC5",6,0)
 S SRSDT=SDATE1 F  S SRSDT=$O(^SRF("AC",SRSDT)) Q:SRSDT>EDATE1!('SRSDT)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDT,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$P($G(^SRF(SRTN,30)),"^")="",$$DIV^SROUTL0(SRTN) D UTIL
"RTN","SROACC5",7,0)
 S SRHDR=0 D HDR^SROACC S CPT=0 F  S CPT=$O(^TMP("SR",$J,CPT)) Q:CPT=""!(SRSOUT)  D MORE
"RTN","SROACC5",8,0)
 I '$D(^TMP("SR",$J)) D LINE W $$NODATA^SROUTL0()
"RTN","SROACC5",9,0)
 Q
"RTN","SROACC5",10,0)
CNT ; get count
"RTN","SROACC5",11,0)
 S X=$S($D(^TMP("SR",$J,CPT))#2:^(CPT),1:0) S ^TMP("SR",$J,CPT)=X+1
"RTN","SROACC5",12,0)
 S X=$S($D(^TMP("SR",$J,CPT,2))#2:^(2),1:0) S ^TMP("SR",$J,CPT,2)=X+1
"RTN","SROACC5",13,0)
 Q
"RTN","SROACC5",14,0)
MORE ; print CPT description and get cases
"RTN","SROACC5",15,0)
 I $Y+12>IOSL D HDR^SROACC I SRSOUT Q
"RTN","SROACC5",16,0)
 S TYPE=0,X=$$CPT^ICPTCOD(CPT,EDATE),CPT1=$P(X,"^",2)_"  "_$P(X,"^",3)
"RTN","SROACC5",17,0)
 F  S TYPE=$O(^TMP("SR",$J,CPT,TYPE)) Q:TYPE=""  D DESC S SRSDT=0 F  S SRSDT=$O(^TMP("SR",$J,CPT,TYPE,SRSDT)) Q:'SRSDT!(SRSOUT)  D SRTN
"RTN","SROACC5",18,0)
 Q
"RTN","SROACC5",19,0)
SRTN S SRTN=0 F  S SRTN=$O(^TMP("SR",$J,CPT,TYPE,SRSDT,SRTN)) Q:'SRTN!(SRSOUT)  D PRINT
"RTN","SROACC5",20,0)
 Q
"RTN","SROACC5",21,0)
LOOP ; break procedure greater than 50 characters
"RTN","SROACC5",22,0)
 S SROP(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROP(M))+$L(MM)'<50  S SROP(M)=SROP(M)_MM_" ",SROPER=MMM
"RTN","SROACC5",23,0)
 Q
"RTN","SROACC5",24,0)
DESC ; print description
"RTN","SROACC5",25,0)
 Q:SRSOUT  I '$O(^TMP("SR",$J,CPT,TYPE,0)) Q
"RTN","SROACC5",26,0)
 D LINE W !!,?(132-$L(CPT1)\2),CPT1
"RTN","SROACC5",27,0)
 I TYPE=1 W !,?50,"PRINCIPAL PROCEDURES"
"RTN","SROACC5",28,0)
 I TYPE=2 W !,?54,"OTHER PROCEDURES"
"RTN","SROACC5",29,0)
 K SRDESC S X=$$CPTD^ICPTCOD(CPT,"SRDESC",,EDATE) F I=1:1:X S Y=$S(I=1:"DESCRIPTION: "_SRDESC(I),1:SRDESC(I)) W !,?(132-$L(Y)\2),Y
"RTN","SROACC5",30,0)
 W !! F LINE=1:1:132 W "-"
"RTN","SROACC5",31,0)
 Q
"RTN","SROACC5",32,0)
PRINT ; print each case
"RTN","SROACC5",33,0)
 I $Y+5>IOSL D HDR^SROACC Q:SRSOUT  D DESC
"RTN","SROACC5",34,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROACC5",35,0)
 S DFN=$P(^SRF(SRTN,0),"^"),Y=SRSDT D D^DIQ S SRDT=Y
"RTN","SROACC5",36,0)
 I 'SRNON S X=$P(^SRF(SRTN,0),"^",4),SRSS=$S(X:$P(^SRO(137.45,X,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROACC5",37,0)
 I SRNON S X=$P(^SRF(SRTN,"NON"),"^",8),SRSS=$S(X:$P(^ECC(723,X,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROACC5",38,0)
 S Y=$P(SRDT,"@",2),SRDT=$E(SRSDT,4,5)_"/"_$E(SRSDT,6,7)_"/"_$E(SRSDT,2,3)_" "_Y
"RTN","SROACC5",39,0)
 D DEM^VADPT S SRNAME=VADM(1),SSN=VA("PID")
"RTN","SROACC5",40,0)
 S SR(.1)=$S($D(^SRF(SRTN,.1)):^(.1),1:""),SRSUR=$S(SRNON:$P(^SRF(SRTN,"NON"),"^",6),1:$P(SR(.1),"^",4)),SRATT=$S(SRNON:$P(^SRF(SRTN,"NON"),"^",7),1:$P(SR(.1),"^",13))
"RTN","SROACC5",41,0)
 I SRSUR S SRSUR=$P(^VA(200,SRSUR,0),"^") I $L(SRSUR)>20 S SRSUR=$P(SRSUR,",")_", "_$E($P(SRSUR,",",2))
"RTN","SROACC5",42,0)
 I SRATT S SRATT=$P(^VA(200,SRATT,0),"^") I $L(SRATT)>20 S SRATT=$P(SRATT,",")_", "_$E($P(SRATT,",",2))
"RTN","SROACC5",43,0)
 D OPER^SROACC0
"RTN","SROACC5",44,0)
 K SROP,SROPT,MM,MMM S:$L(SROPER)<51 SROP(1)=SROPER I $L(SROPER)>50 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROACC5",45,0)
 W !,SRDT,?20,SRNAME,?60,SROP(1),?111,SRSUR,!,?3,SRTN,?20,VA("PID") W:$D(SROP(2)) ?60,SROP(2) W ?111,SRATT,!
"RTN","SROACC5",46,0)
 W:SRFLG=3&(SRNON) "NON-O.R." W ?20,SRSS I $D(SROP(3)) W ?60,SROP(3) I $D(SROP(4)) W !,?60,SROP(4) I $D(SROP(5)) W !,?60,SROP(5)
"RTN","SROACC5",47,0)
 ;
"RTN","SROACC5",48,0)
 I $D(SRCPTT) S:$L(SRCPTT)<51 SROPT(1)=SRCPTT I $L(SRCPTT)>50 S SRCPTT=SRCPTT_"  " F M=1:1 D LOOP^SROACC0 Q:MMM=""
"RTN","SROACC5",49,0)
 I $D(SRCPTT) F LOOP=1:1 Q:'$D(SROPT(LOOP))  W !,?60,SROPT(LOOP)
"RTN","SROACC5",50,0)
 W ! Q
"RTN","SROACC5",51,0)
UTIL ; set ^TMP("SR")
"RTN","SROACC5",52,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROACC5",53,0)
 I SRFLG=1!(SRFLG=3&('SRNON)) Q:$P($G(^SRF(SRTN,.2)),"^",12)=""
"RTN","SROACC5",54,0)
 I SRFLG=2 Q:'SRNON
"RTN","SROACC5",55,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2) I CPT S ^TMP("SR",$J,CPT,1,SRSDT,SRTN)="",X=$S($D(^TMP("SR",$J,CPT))#2:^(CPT),1:0),^TMP("SR",$J,CPT)=X+1,X=$S($D(^TMP("SR",$J,CPT,1))#2:^(1),1:0),^TMP("SR",$J,CPT,1)=X+1
"RTN","SROACC5",56,0)
 S OP=0 F  S OP=$O(^SRO(136,SRTN,3,OP)) Q:'OP  I $P($G(^SRO(136,SRTN,3,OP,0)),"^") S CPT=$P(^(0),"^"),^TMP("SR",$J,CPT,2,SRSDT,SRTN)="" D CNT
"RTN","SROACC5",57,0)
 Q
"RTN","SROACC5",58,0)
LINE W ! F LINE=1:1:132 W "="
"RTN","SROACC5",59,0)
 Q
"RTN","SROACC6")
0^10^B14172012^B12947968
"RTN","SROACC6",1,0)
SROACC6 ;BIR/MAM - CPT ACCURACY ONE CODE ;05/14/99  11:41 AM
"RTN","SROACC6",2,0)
 ;;3.0; Surgery ;**37,50,88,127,142**;24 Jun 93
"RTN","SROACC6",3,0)
 ;
"RTN","SROACC6",4,0)
 ; Reference to ^ECC(723 supported by DBIA #205
"RTN","SROACC6",5,0)
 ;
"RTN","SROACC6",6,0)
 S SRSDT=SDATE1 F  S SRSDT=$O(^SRF("AC",SRSDT)) Q:SRSDT>EDATE1!('SRSDT)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDT,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$P($G(^SRF(SRTN,30)),"^")="",$$DIV^SROUTL0(SRTN) D UTIL
"RTN","SROACC6",7,0)
 S SRHDR=0 D HDR^SROACC Q:SRSOUT  S SRHDR=1
"RTN","SROACC6",8,0)
 S TYPE=0
"RTN","SROACC6",9,0)
 F  S TYPE=$O(^TMP("SR",$J,TYPE)) Q:TYPE=""  D DESC S SRSDT=0 F  S SRSDT=$O(^TMP("SR",$J,TYPE,SRSDT)) Q:'SRSDT!(SRSOUT)  D SRTN
"RTN","SROACC6",10,0)
 I '$D(^TMP("SR",$J)) D LINE W $$NODATA^SROUTL0()
"RTN","SROACC6",11,0)
 Q
"RTN","SROACC6",12,0)
SRTN S SRTN=0 F  S SRTN=$O(^TMP("SR",$J,TYPE,SRSDT,SRTN)) Q:'SRTN!(SRSOUT)  D PRINT
"RTN","SROACC6",13,0)
 Q
"RTN","SROACC6",14,0)
LOOP ; break procedure greater than 50 characters
"RTN","SROACC6",15,0)
 S SROP(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROP(M))+$L(MM)'<50  S SROP(M)=SROP(M)_MM_" ",SROPER=MMM
"RTN","SROACC6",16,0)
 Q
"RTN","SROACC6",17,0)
DESC ; print description
"RTN","SROACC6",18,0)
 Q:SRSOUT  S X=$O(^TMP("SR",$J,TYPE,0)) I 'X Q
"RTN","SROACC6",19,0)
 S X=$$CPT^ICPTCOD(SRCPT,EDATE),CPT1=$P(X,"^",2)_"  "_$P(X,"^",3)
"RTN","SROACC6",20,0)
 D LINE W !!,?(132-$L(CPT1)\2),CPT1
"RTN","SROACC6",21,0)
 I TYPE=1 W !,?50,"PRINCIPAL PROCEDURES"
"RTN","SROACC6",22,0)
 I TYPE=2 W !,?54,"OTHER PROCEDURES"
"RTN","SROACC6",23,0)
 S X=$O(^TMP("SR",$J,TYPE,0))
"RTN","SROACC6",24,0)
 K SRDESC S X=$$CPTD^ICPTCOD(SRCPT,"SRDESC",,EDATE) F I=1:1:X S Y=$S(I=1:"DESCRIPTION: "_SRDESC(I),1:SRDESC(I)) W !,?(132-$L(Y)\2),Y
"RTN","SROACC6",25,0)
 W !! F LINE=1:1:132 W "-"
"RTN","SROACC6",26,0)
 Q
"RTN","SROACC6",27,0)
PRINT ; print each case
"RTN","SROACC6",28,0)
 I $Y+5>IOSL D HDR^SROACC Q:SRSOUT  D DESC
"RTN","SROACC6",29,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROACC6",30,0)
 S DFN=$P(^SRF(SRTN,0),"^"),Y=SRSDT D D^DIQ S SRDT=Y
"RTN","SROACC6",31,0)
 I 'SRNON S X=$P(^SRF(SRTN,0),"^",4),SRSS=$S(X:$P(^SRO(137.45,X,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROACC6",32,0)
 I SRNON S X=$P(^SRF(SRTN,"NON"),"^",8),SRSS=$S(X:$P(^ECC(723,X,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROACC6",33,0)
 S Y=$P(SRDT,"@",2),SRDT=$E(SRSDT,4,5)_"/"_$E(SRSDT,6,7)_"/"_$E(SRSDT,2,3)_" "_Y
"RTN","SROACC6",34,0)
 D DEM^VADPT S SRNAME=VADM(1),SSN=VA("PID")
"RTN","SROACC6",35,0)
 S SR(.1)=$S($D(^SRF(SRTN,.1)):^(.1),1:""),SRSUR=$S(SRNON:$P(^SRF(SRTN,"NON"),"^",6),1:$P(SR(.1),"^",4)),SRATT=$S(SRNON:$P(^SRF(SRTN,"NON"),"^",7),1:$P(SR(.1),"^",13))
"RTN","SROACC6",36,0)
 I SRSUR S SRSUR=$P(^VA(200,SRSUR,0),"^") I $L(SRSUR)>20 S SRSUR=$P(SRSUR,",")_", "_$E($P(SRSUR,",",2))
"RTN","SROACC6",37,0)
 I SRATT S SRATT=$P(^VA(200,SRATT,0),"^") I $L(SRATT)>20 S SRATT=$P(SRATT,",")_", "_$E($P(SRATT,",",2))
"RTN","SROACC6",38,0)
 D OPER^SROACC0
"RTN","SROACC6",39,0)
 K SROP,SROPT,MM,MMM S:$L(SROPER)<51 SROP(1)=SROPER I $L(SROPER)>50 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROACC6",40,0)
 W !,SRDT,?20,SRNAME,?60,SROP(1),?111,SRSUR,!,?3,SRTN,?20,VA("PID") W:$D(SROP(2)) ?60,SROP(2) W ?111,SRATT,!
"RTN","SROACC6",41,0)
 W:SRFLG=3&(SRNON) "NON-O.R." W ?20,SRSS I $D(SROP(3)) W ?60,SROP(3) I $D(SROP(4)) W !,?60,SROP(4) I $D(SROP(5)) W !,?60,SROP(5)
"RTN","SROACC6",42,0)
 I $D(SRCPTT) S:$L(SRCPTT)<51 SROPT(1)=SRCPTT I $L(SRCPTT)>50 S SRCPTT=SRCPTT_"  " F M=1:1 D LOOP^SROACC0 Q:MMM=""
"RTN","SROACC6",43,0)
 I $D(SRCPTT) F LOOP=1:1 Q:'$D(SROPT(LOOP))  W !,?60,SROPT(LOOP)
"RTN","SROACC6",44,0)
 W ! Q
"RTN","SROACC6",45,0)
UTIL ; set ^TMP("SR")
"RTN","SROACC6",46,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROACC6",47,0)
 I SRFLG=1!(SRFLG=3&('SRNON)) Q:$P($G(^SRF(SRTN,.2)),"^",12)=""
"RTN","SROACC6",48,0)
 I SRFLG=2 Q:'SRNON
"RTN","SROACC6",49,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2) I CPT=SRCPT S ^TMP("SR",$J,1,SRSDT,SRTN)=""
"RTN","SROACC6",50,0)
 S OP=0 F  S OP=$O(^SRO(136,SRTN,3,OP)) Q:'OP  S CPT=$P($G(^SRO(136,SRTN,3,OP,0)),"^") I CPT=SRCPT S ^TMP("SR",$J,2,SRSDT,SRTN)=""
"RTN","SROACC6",51,0)
 Q
"RTN","SROACC6",52,0)
LINE W ! F LINE=1:1:132 W "="
"RTN","SROACC6",53,0)
 Q
"RTN","SROACCM")
0^11^B8018534^B7913619
"RTN","SROACCM",1,0)
SROACCM ;BIR/MAM - TOTAL CPTS ;12/15/98  11:34 AM
"RTN","SROACCM",2,0)
 ;;3.0; Surgery ;**59,50,88,127,142**;24 Jun 93
"RTN","SROACCM",3,0)
EN ; entry when queued
"RTN","SROACCM",4,0)
 U IO S SRSOUT=0,SRINST=SRSITE("SITE") K ^TMP("SR",$J)
"RTN","SROACCM",5,0)
 N SRFRTO S Y=SDATE X ^DD("DD") S SRFRTO="FROM: "_Y_"  TO: " S Y=EDATE X ^DD("DD") S SRFRTO=SRFRTO_Y
"RTN","SROACCM",6,0)
 S SRSDT=SDATE1 F  S SRSDT=$O(^SRF("AC",SRSDT)) Q:SRSDT>EDATE1!('SRSDT)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDT,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTIL
"RTN","SROACCM",7,0)
 D HDR Q:SRSOUT
"RTN","SROACCM",8,0)
 S CPT=0 F  S CPT=$O(^TMP("SR",$J,CPT)) Q:'CPT!(SRSOUT)  D PRINT
"RTN","SROACCM",9,0)
 I '$D(^TMP("SR",$J)) W $$NODATA^SROUTL0()
"RTN","SROACCM",10,0)
 Q
"RTN","SROACCM",11,0)
PRINT ; print info
"RTN","SROACCM",12,0)
 I $Y+6>IOSL D PAGE I SRSOUT Q
"RTN","SROACCM",13,0)
 S TOT1=$S($D(^TMP("SR",$J,CPT,1)):^(1),1:0),TOT2=$S($D(^TMP("SR",$J,CPT,2)):^(2),1:0),TOT=TOT1+TOT2
"RTN","SROACCM",14,0)
 S Y=$$CPT^ICPTCOD(CPT,EDATE),CPT1=$P(Y,"^",2)_"  "_$P(Y,"^",3)
"RTN","SROACCM",15,0)
 W !,CPT1,?55,TOT,?79,TOT1,?110,TOT2,! F LINE=1:1:132 W "-"
"RTN","SROACCM",16,0)
 Q
"RTN","SROACCM",17,0)
PAGE I $E(IOST)'="P" W !!,"Press RETURN to continue, or '^' to quit:  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACCM",18,0)
HDR ; print heading
"RTN","SROACCM",19,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROACCM",20,0)
 W:$Y @IOF W !,?(132-$L(SRINST)\2),SRINST,!,?57,"SURGICAL SERVICE",?100,"REVIEWED BY",!,?50,"CUMULATIVE REPORT OF CPT CODES",?100,"DATE REVIEWED:"
"RTN","SROACCM",21,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO
"RTN","SROACCM",22,0)
 W !,$S(SRFLG=1:"O.R. SURGICAL PROCEDURES",SRFLG=2:"NON-O.R. PROCEDURES",1:"O.R. SURGICAL PROCEDURES AND NON-O.R. PROCEDURES")
"RTN","SROACCM",23,0)
 W !!,"CPT CODE - SHORT DESCRIPTION",?50,"TOTAL PROCEDURES",?72,"TOTAL PRINCIPAL PROCEDURES",?104,"TOTAL OTHER PROCEDURES",! F LINE=1:1:132 W "="
"RTN","SROACCM",24,0)
 Q
"RTN","SROACCM",25,0)
UTIL ; set ^TMP("SR")
"RTN","SROACCM",26,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROACCM",27,0)
 I SRFLG=1!(SRFLG=3&('SRNON)) Q:$P($G(^SRF(SRTN,.2)),"^",12)=""
"RTN","SROACCM",28,0)
 I SRFLG=2 Q:'SRNON
"RTN","SROACCM",29,0)
 I $P($G(^SRF(SRTN,30)),"^")'="" Q
"RTN","SROACCM",30,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2) I CPT S X=$S($D(^TMP("SR",$J,CPT,1)):^(1),1:0),^TMP("SR",$J,CPT,1)=X+1
"RTN","SROACCM",31,0)
 S OP=0 F  S OP=$O(^SRO(136,SRTN,3,OP)) Q:'OP  I $D(^SRO(136,SRTN,3,OP,0)),$P(^(0),"^") S CPT=$P(^(0),"^") I CPT S X=$S($D(^TMP("SR",$J,CPT,2)):^(2),1:0),^TMP("SR",$J,CPT,2)=X+1
"RTN","SROACCM",32,0)
 Q
"RTN","SROACLN")
0^12^B10163917^B10131478
"RTN","SROACLN",1,0)
SROACLN ;BIR/MAM - CLINICAL DATA ;07/25/04  1:32 PM
"RTN","SROACLN",2,0)
 ;;3.0; Surgery ;**38,47,71,95,100,125,142**;24 Jun 93
"RTN","SROACLN",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACLN",4,0)
 S SRACLR=0,SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACLN",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO D ^SROACL1
"RTN","SROACLN",6,0)
ASK W !!,"Select Clinical Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROACLN",7,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROACLN",8,0)
 I X="A" S X="1:24"
"RTN","SROACLN",9,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>24)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROACLN",10,0)
 D HDR^SROAUTL
"RTN","SROACLN",11,0)
 I X?.N1":".N D RANGE G START
"RTN","SROACLN",12,0)
 I $D(SRAO(X)) S EMILY=X D  G START
"RTN","SROACLN",13,0)
 .I $$LOCK^SROUTL(SRTN) W !! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACLN",14,0)
END I '$D(SREQST) W @IOF D ^SRSKILL
"RTN","SROACLN",15,0)
 Q
"RTN","SROACLN",16,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACLN",17,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a specific number to update the information in that field.  (For",!,"   example, enter '8' to update Current Smoker)"
"RTN","SROACLN",18,0)
 W !!,"3. Enter a range of numbers separated by a ':' to enter a range of",!,"   information.  (For example, enter '7:9' to enter Pulmonary Rales,",!,"   Current Smoker, and Active Endocarditis.)"
"RTN","SROACLN",19,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROACLN",20,0)
 Q
"RTN","SROACLN",21,0)
RANGE ; range of numbers
"RTN","SROACLN",22,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACLN",23,0)
 .W !! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACLN",24,0)
 Q
"RTN","SROACLN",25,0)
ONE ; edit one item
"RTN","SROACLN",26,0)
 I EMILY=11 D FUNCT Q
"RTN","SROACLN",27,0)
 I EMILY=15 D ^SROACL2 K DR,DIE S DA=SRTN,DR="485///"_$P(SRAO(15),"^"),DIE=130 D ^DIE K DR S:$D(Y) SRSOUT=1 Q
"RTN","SROACLN",28,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROACLN",29,0)
 I EMILY=14,$P($G(^SRF(SRTN,206)),"^",15)=0 S $P(^SRF(SRTN,206),"^",42)=0
"RTN","SROACLN",30,0)
 Q
"RTN","SROACLN",31,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACLN",32,0)
 Q
"RTN","SROACLN",33,0)
FUNCT K DA,DIR S DA=SRTN,DIR(0)="130,240",DIR("A")="Functional Status" D ^DIR K DIR D  Q
"RTN","SROACLN",34,0)
 .I $D(DTOUT)!$D(DUOUT) Q
"RTN","SROACLN",35,0)
 .I X="@" K DIE,DR S DIE=130,DR="240///@" D ^DIE K DA,DIE,DR Q
"RTN","SROACLN",36,0)
 .K DIE,DR S DIE=130,DR="240////"_Y D ^DIE K DA,DIE,DR
"RTN","SROACLN",37,0)
 Q
"RTN","SROACOM")
0^13^B21753937^B20479071
"RTN","SROACOM",1,0)
SROACOM ;BIR/MAM - COMPLETE ASSESSMENT ;09/29/04
"RTN","SROACOM",2,0)
 ;;3.0; Surgery ;**38,55,63,65,88,93,95,102,100,125,134,142**;24 Jun 93
"RTN","SROACOM",3,0)
 I '$D(SRTN) Q
"RTN","SROACOM",4,0)
 S (SRSFLG,SRSOUT,SROVER)=0,SRA=$G(^SRF(SRTN,"RA")),Y=$P(SRA,"^") I Y'="I" W !!,"This assessment has a "_$S(Y="C":"'COMPLETE'",1:"'TRANSMITTED'")_" status.",!!,"No action taken." G END
"RTN","SROACOM",5,0)
 I $P(SRA,"^",2)="N",$P(SRA,"^",6)="Y" D CHK^SROAUTL
"RTN","SROACOM",6,0)
 I $P(SRA,"^",2)="N",$P(SRA,"^",6)="N" D CHK^SROAUTL3
"RTN","SROACOM",7,0)
 I $P(SRA,"^",2)="C" D CHK^SROAUTLC
"RTN","SROACOM",8,0)
 S SRFLD="" I $O(SRX(SRFLD))'="" D LIST
"RTN","SROACOM",9,0)
 I $P(SRA,"^",2)="C" D CHCK G:SRSOUT END
"RTN","SROACOM",10,0)
YEP W ! S SRFLD="" K DIR S DIR("A")="Are you sure you want to complete this assessment ? ",DIR("B")=$S($O(SRX(SRFLD)):"NO",1:"YES"),DIR(0)="YA"
"RTN","SROACOM",11,0)
 S DIR("?",1)="Enter YES to complete this assessment, or enter NO to leave the status",DIR("?")="unchanged." D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SROACOM",12,0)
 I 'Y W !!,"No action taken." G END
"RTN","SROACOM",13,0)
 I $$LOCK^SROUTL(SRTN) D COMPLT Q
"RTN","SROACOM",14,0)
 E  W !!,"No action taken." G END
"RTN","SROACOM",15,0)
 Q
"RTN","SROACOM",16,0)
COMPLT W !!,"Updating the current status to 'COMPLETE'..." K DR,DIE S DA=SRTN,DIE=130,DR="235///C" D ^DIE K STATUS
"RTN","SROACOM",17,0)
 I $P(SRA,"^",5)="" K DR,DIE S DA=SRTN,DIE=130,DR="272///"_DT D ^DIE K STATUS
"RTN","SROACOM",18,0)
 I $P(SRA,"^",2)="C" K DA,DIE,DIK,DR S DIK="^SRF(",DIK(1)=".232^AQ",DA=SRTN D EN1^DIK K DA,DIK
"RTN","SROACOM",19,0)
 D UNLOCK^SROUTL(SRTN)
"RTN","SROACOM",20,0)
PRINT W !!,"Do you want to print the completed assessment ?  YES//  " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 Q
"RTN","SROACOM",21,0)
 S SRYN=$E(SRYN) S:SRYN="" SRYN="Y" I "Nn"[SRYN S SRSOUT=1 Q
"RTN","SROACOM",22,0)
 I "Yy"'[SRYN W !!,"Enter <RET> to print the completed assessment, or 'NO' to return to the menu." G PRINT
"RTN","SROACOM",23,0)
 W ! K %ZIS,IO("Q"),POP S %ZIS("A")="Print the Completed Assessment on which Device: ",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 Q
"RTN","SROACOM",24,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="Completed Surgery Risk Assessment",(ZTSAVE("SRSITE*"),ZTSAVE("SRTN"))="",ZTRTN="EN^SROACOM" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROACOM",25,0)
 D EN,END
"RTN","SROACOM",26,0)
 Q
"RTN","SROACOM",27,0)
EN U IO S SRABATCH=1 D ^SROAPAS Q
"RTN","SROACOM",28,0)
END I 'SRSOUT,$E(IOST)'="P" D RET
"RTN","SROACOM",29,0)
 W @IOF I $E(IOST)="P" D ^%ZISC W @IOF
"RTN","SROACOM",30,0)
 D ^SRSKILL K SRSFLG
"RTN","SROACOM",31,0)
 Q
"RTN","SROACOM",32,0)
LIST W @IOF,!,"This assessment is missing the following items:",! S SRZ="",SRCNT=1
"RTN","SROACOM",33,0)
 I '$P($G(^SRO(136,SRTN,10)),"^")!('$P($G(^SRO(136,SRTN,0)),"^",2))!('$P($G(^SRO(136,SRTN,0)),"^",3)) W !,?6,"The coding for Procedure and Diagnosis is",!,?6,"not complete.",!
"RTN","SROACOM",34,0)
 F  S SRZ=$O(SRX(SRZ)) Q:SRZ=""  D:$Y+5>IOSL RET Q:SRSOUT  W !,?5,$J(SRCNT,2)_". "_SRX(SRZ) S SRCNT=SRCNT+1
"RTN","SROACOM",35,0)
 S SRSOUT=0 W ! K DIR S DIR(0)="Y",DIR("A")="Do you want to enter the missing items at this time",DIR("B")="NO" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROACOM",36,0)
 Q:'Y  I $$LOCK^SROUTL(SRTN) D PRT,UNLOCK^SROUTL(SRTN)
"RTN","SROACOM",37,0)
 Q
"RTN","SROACOM",38,0)
PRT S SRSOUT=0,SRMD="",SRCNT=0 F  S SRMD=$O(SRX(SRMD)) Q:SRMD=""  D  Q:$G(SRSFLG)
"RTN","SROACOM",39,0)
 .I $E(SRMD,1,10)="ANESTHESIA" D ANES Q
"RTN","SROACOM",40,0)
 .I $E(SRMD,1,10)="ANESTRAUMA" D  Q
"RTN","SROACOM",41,0)
 ..I '$D(SRX("ANESTHESIA TECHNIQUE")) D TRAUMA Q
"RTN","SROACOM",42,0)
 .I $E(SRMD,1,6)="POSTOP"!($E(SRMD,1,6)="SEPSIS") D POST^SROCMPS Q
"RTN","SROACOM",43,0)
 .I SRMD=240 D FUNCT Q
"RTN","SROACOM",44,0)
 .I SRMD=492 D FUNCTI^SROAPRE Q
"RTN","SROACOM",45,0)
 .K DR,DIE S DA=SRTN,DIE=130,DR=SRMD_"T" D ^DIE K DR I $D(Y) S SRSFLG=1
"RTN","SROACOM",46,0)
 S:'$G(SRSOUT) SRSOUT=0
"RTN","SROACOM",47,0)
 Q
"RTN","SROACOM",48,0)
FUNCT I $P($G(^SRF(SRTN,"RA")),"^",2)="C" D FUNCT^SROACLN Q
"RTN","SROACOM",49,0)
 D FUNCTJ^SROAPRE
"RTN","SROACOM",50,0)
 Q
"RTN","SROACOM",51,0)
ANES K DR,DIE,DA S DA=SRTN,DR=.37,DR(2,130.06)=".01T;.05T;42T;12T",DIE=130 D ^DIE S:$D(Y) SRSFLG=1 K DR
"RTN","SROACOM",52,0)
 Q
"RTN","SROACOM",53,0)
TRAUMA ; airway trauma
"RTN","SROACOM",54,0)
 N SRTECH,SRT,SRZ S SRT=0 F  S SRT=$O(^SRF(SRTN,6,SRT)) Q:'SRT  D ^SROPRIN Q:$D(SRZ)
"RTN","SROACOM",55,0)
 I '$G(SRT) D ANES Q
"RTN","SROACOM",56,0)
 I $G(SRT) K DA,DR,DIE S DIE="^SRF("_SRTN_",6,",DA(1)=SRTN,DA=SRT,DR="12" D ^DIE K DA,DR,DIE
"RTN","SROACOM",57,0)
 Q
"RTN","SROACOM",58,0)
CHCK ; cardiac checks added by SR*3*93
"RTN","SROACOM",59,0)
 N SRADM,SRDIS,SRISCH,SRCPB,SRRET S SRRET=0,X=$G(^SRF(SRTN,208)),SRADM=$P(X,"^",14),SRDIS=$P(X,"^",15),X=$G(^SRF(SRTN,206)),SRISCH=$P(X,"^",36),SRCPB=$P(X,"^",37)
"RTN","SROACOM",60,0)
 I SRADM,SRDIS,SRADM'<SRDIS W !!,"  ***  NOTE: Discharge Date precedes Admission Date!!  Please check.  ***" S SRRET=1,SRX(418)=""
"RTN","SROACOM",61,0)
 I SRISCH,SRCPB,SRISCH>SRCPB W !!,"  ***  NOTE: Ischemic Time is greater than CPB Time!!  Please check.  ***",! S SRRET=1,SRX(450)=""
"RTN","SROACOM",62,0)
 I SRRET W ! K DIR S DIR(0)="E" D ^DIR K DIR S:$D(DTOUT)!$D(DUOUT) SRSOUT=1 W !
"RTN","SROACOM",63,0)
 Q
"RTN","SROACOM",64,0)
RET W !! K DIR S DIR(0)="E" D ^DIR K DIR W @IOF I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROACOM",65,0)
 Q
"RTN","SROACOM",66,0)
PAGE I $E(IOST)'="P" D RET Q
"RTN","SROACOM",67,0)
 W @IOF,!!!
"RTN","SROACOM",68,0)
 Q
"RTN","SROACOP")
0^14^B19945734^B20581214
"RTN","SROACOP",1,0)
SROACOP ;BIR/MAM - CARDIAC OPERATIVE RISK SUMMARY ;02/14/06
"RTN","SROACOP",2,0)
 ;;3.0; Surgery ;**38,47,71,88,95,107,100,125,142**;24 Jun 93
"RTN","SROACOP",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACOP",4,0)
 S SRACLR=0,SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACOP",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO
"RTN","SROACOP",6,0)
 F I=206,206.1,208 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROACOP",7,0)
 I $P(SRA(206),"^",41)="" K DA,DIE,DR S DA=SRTN,DIE=130,DR="472////N" D ^DIE K DA,DIE,DR S SRA(206)=$G(^SRF(SRTN,206))
"RTN","SROACOP",8,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),C=$P(^DD(130,1.13,0),"^",2) D:Y'="" Y^DIQ S SRAO(2)=Y_"^1.13"
"RTN","SROACOP",9,0)
 S SRAO(1)=$P(SRA(206),"^",31)_"^364",SRAO(3)=$P(SRA(208),"^",12)_"^414"
"RTN","SROACOP",10,0)
 S Y=$P(SRA(206),"^",32) D DT S SRAO("1A")=X_"^364.1"
"RTN","SROACOP",11,0)
 S Y=$P(SRAO(3),"^") I Y'="" S C=$P(^DD(130,414,0),"^",2) D Y^DIQ S $P(SRAO(3),"^")=Y
"RTN","SROACOP",12,0)
 S Y=$P(SRA(208),"^",13) D DT S SRAO("3A")=X_"^414.1"
"RTN","SROACOP",13,0)
 S Y=$P($G(^SRF(SRTN,.2)),"^",2) D DT S SRAO(4)=X_"^.22"
"RTN","SROACOP",14,0)
 S Y=$P($G(^SRF(SRTN,.2)),"^",3) D DT S SRAO(5)=X_"^.23"
"RTN","SROACOP",15,0)
 S SRAO(6)=SRA(206.1)_"^430"
"RTN","SROACOP",16,0)
 S SRPAGE="PAGE: 1" D HDR^SROAUTL S SRAO(7)=""
"RTN","SROACOP",17,0)
 S X=$P(SRAO(1),"^"),X=$S(X?1.3N:X_"%",1:X) W !," 1. Physician's Preoperative Estimate of Operative Mortality: "_X
"RTN","SROACOP",18,0)
 S X=$P(SRAO("1A"),"^") I X'="" W !,?3," A. Date/Time Collected:    "_X
"RTN","SROACOP",19,0)
 W !," 2. ASA Classification:",?31,$P(SRAO(2),"^"),!," 3. Surgical Priority:",?31,$P(SRAO(3),"^")
"RTN","SROACOP",20,0)
 S X=$P(SRAO("3A"),"^") I X'="" W !,?3," A. Date/Time Collected:    "_X
"RTN","SROACOP",21,0)
 W !," 4. Date/Time Operation Began:",?31,$P(SRAO(4),"^"),!," 5. Date/Time Operation Ended:",?31,$P(SRAO(5),"^")
"RTN","SROACOP",22,0)
 W !," 6. Preoperative Risk Factors: "
"RTN","SROACOP",23,0)
 I $P(SRAO(6),"^")'="" S SRQ=0 S X=$P(SRAO(6),"^") W:$L(X)<49 X,! I $L(X)>48 S Z=$L(X) D
"RTN","SROACOP",24,0)
 .I X'[" " W ?25,X Q
"RTN","SROACOP",25,0)
 .S I=0,LINE=1 F  S SRL=$S(LINE=1:48,1:80) D  Q:SRQ
"RTN","SROACOP",26,0)
 ..I $E(X,1,SRL)'[" " W X,! S SRQ=1 Q
"RTN","SROACOP",27,0)
 ..S J=SRL-I,Y=$E(X,J),I=I+1 I Y=" " W $E(X,1,J-1),! S X=$E(X,J+1,Z),Z=$L(X),I=0,LINE=LINE+1 I Z<SRL W X S SRQ=1 Q
"RTN","SROACOP",28,0)
 N SRPROC,SRL S SRL=49 D CPTS^SROAOP1 W !," 7. CPT Codes (view only):" I SRPROC(1)="" S SRPROC(1)="NOT ENTERED"
"RTN","SROACOP",29,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?31,SRPROC(I) W:I'=1 !,?31,SRPROC(I)
"RTN","SROACOP",30,0)
 W !! F MOE=1:1:80 W "-"
"RTN","SROACOP",31,0)
ASK W !,"Select Operative Risk Summary Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROACOP",32,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROACOP",33,0)
 I X="A" S X="1:7"
"RTN","SROACOP",34,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>7)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROACOP",35,0)
 I X'=7 D HDR^SROAUTL
"RTN","SROACOP",36,0)
 I X?.N1":".N D RANGE S SROERR=SRTN D ^SROERR0 G START
"RTN","SROACOP",37,0)
 I $D(SRAO(X))!(X=6) S EMILY=X D  S SROERR=SRTN D ^SROERR0 G START
"RTN","SROACOP",38,0)
 .I $$LOCK^SROUTL(SRTN) W !! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACOP",39,0)
END I '$D(SREQST) W @IOF D ^SRSKILL
"RTN","SROACOP",40,0)
 Q
"RTN","SROACOP",41,0)
DT I 'Y S X="" Q
"RTN","SROACOP",42,0)
 X ^DD("DD") S X=$P(Y,"@")_" "_$P(Y,"@",2)
"RTN","SROACOP",43,0)
 Q
"RTN","SROACOP",44,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACOP",45,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter the corresponding number to update the information in a particular",!,"   field.  (For example, enter '3' to update Surgical Priority)"
"RTN","SROACOP",46,0)
 W !!,"3. Enter two numbers separated by a ':' to enter a range of information.",!,"   (For example, enter '1:2' to update Physician's Preoperative Estimate of",!,"   Mortality and ASA Classification.)"
"RTN","SROACOP",47,0)
 W !!,"Press ENTER to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROACOP",48,0)
 Q
"RTN","SROACOP",49,0)
RANGE ; range of numbers
"RTN","SROACOP",50,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACOP",51,0)
 .W !! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACOP",52,0)
 Q
"RTN","SROACOP",53,0)
ONE ; edit one item
"RTN","SROACOP",54,0)
 I EMILY=7 D DISP^SROAOP1 Q
"RTN","SROACOP",55,0)
 K DR,DIE S DA=SRTN,DIE=130,DR=$P(SRAO(EMILY),"^",2)
"RTN","SROACOP",56,0)
 S DR=DR_"T",DIE=130 S DR=DR_$S(EMILY=1:";364.1T",EMILY=3:";414.1T",1:"") D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROACOP",57,0)
 Q
"RTN","SROACOP",58,0)
RET Q:SRSOUT  W !!,"Press ENTER to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACOP",59,0)
 Q
"RTN","SROACOP",60,0)
NOW ; update date/time of estimate of mortality
"RTN","SROACOP",61,0)
 N X D NOW^%DTC S $P(^SRF(DA,206),"^",32)=$E(%,1,12)
"RTN","SROACOP",62,0)
 Q
"RTN","SROACOP",63,0)
KNOW ; delete date/time of estimate of mortality
"RTN","SROACOP",64,0)
 S $P(^SRF(DA,206),"^",32)=""
"RTN","SROACOP",65,0)
 Q
"RTN","SROACOP",66,0)
YN ; store answer
"RTN","SROACOP",67,0)
 S SHEMP=$S(NYUK="NS":"Unknown",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROACOP",68,0)
 Q
"RTN","SROACPM")
0^15^B40295841^B40217929
"RTN","SROACPM",1,0)
SROACPM ;BIR/ADM - CARDIAC RESOURCE INFO ;07/05/05
"RTN","SROACPM",2,0)
 ;;3.0; Surgery ;**71,93,95,99,100,125,142**;24 Jun 93
"RTN","SROACPM",3,0)
 ;
"RTN","SROACPM",4,0)
 ; Reference to ^DGPM("APTT1" supported by DBIA #565
"RTN","SROACPM",5,0)
 ;
"RTN","SROACPM",6,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROACPM",7,0)
 S SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROACPM",8,0)
START G:SRSOUT END D HDR^SROAUTL
"RTN","SROACPM",9,0)
 S DIR("A",1)="Enter/Edit Patient Resource Data",DIR("A",2)=" ",DIR("A",3)="1. Capture Information from PIMS Records",DIR("A",4)="2. Enter, Edit, or Review Information",DIR("A",5)=" "
"RTN","SROACPM",10,0)
 S DIR("?",1)="Enter '1' if you want to capture patient information from PIMS",DIR("?",2)="records.  Enter '2' if you want to enter, edit, or review patient",DIR("?")="other information on this screen."
"RTN","SROACPM",11,0)
 S DIR("A")="Select Number",DIR(0)="NO^1:2" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 G END
"RTN","SROACPM",12,0)
 I Y=1 D PIMS G START
"RTN","SROACPM",13,0)
EDIT S SRR=0 S SRPAGE="PAGE: 1" D HDR^SROAUTL K DR S SRQ=0,(DR,SRDR)="418;419;440;.205;.232;470;471;473;472;431;442"
"RTN","SROACPM",14,0)
 K DA,DIC,DIQ,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="IE",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROACPM",15,0)
 K SRZ S SRZ=0 F M=1:1 S I=$P(SRDR,";",M)  Q:'I  D
"RTN","SROACPM",16,0)
 .D TR,GET
"RTN","SROACPM",17,0)
 .S SRZ=SRZ+1,Y=$P(X,";;",2),SRFLD=$P(Y,"^"),(Z,SRZ(SRZ))=$P(Y,"^",2)_"^"_SRFLD,SREXT=SRY(130,SRTN,SRFLD,"E")
"RTN","SROACPM",18,0)
 .W !,$J(SRZ,2)_". "_$P(Z,"^")_": " D EXT
"RTN","SROACPM",19,0)
 D CHCK W !! F K=1:1:80 W "-"
"RTN","SROACPM",20,0)
 D SEL G:SRR=1 EDIT
"RTN","SROACPM",21,0)
 G START
"RTN","SROACPM",22,0)
 Q
"RTN","SROACPM",23,0)
CHCK ; compare admission and discharge dates to each other
"RTN","SROACPM",24,0)
 N SRADM,SRDIS S SRADM=SRY(130,SRTN,418,"I"),SRDIS=SRY(130,SRTN,419,"I")
"RTN","SROACPM",25,0)
 I SRADM'="",SRDIS'="",SRADM'<SRDIS W !!,"  ***  NOTE: Discharge Date precedes Admission Date!!  Please check.  ***"
"RTN","SROACPM",26,0)
 Q
"RTN","SROACPM",27,0)
EXT I SRFLD=440&(SREXT="NS") S SREXT=SREXT_"-"_$S(SREXT="NS":"No Study",1:SREXT)
"RTN","SROACPM",28,0)
 I SRFLD=470,(SREXT="NS"!(SREXT="RI")) S SREXT=SREXT_"-"_$S(SREXT="NS":"Unable to determine",SREXT="RI":"Remains intubated at 30 days",1:SREXT)
"RTN","SROACPM",29,0)
 I SRFLD=471,(SREXT="NS"!(SREXT="RI")) S SREXT=SREXT_"-"_$S(SREXT="NS":"Unable to determine",SREXT="RI":"Remains in ICU at 30 days",1:SREXT)
"RTN","SROACPM",30,0)
 I $L(SREXT)<41 W ?39,SREXT W:SRFLD=247 $S(SREXT="":"",SREXT=1:" Day",SREXT=0:" Days",SREXT>1:" Days",1:"") Q
"RTN","SROACPM",31,0)
 N I,J,X,Y S X=SREXT F  D  W:$L(X) ! I $L(X)<41!(X'[" ") W ?39,X Q
"RTN","SROACPM",32,0)
 .F I=0:1:39 S J=40-I,Y=$E(X,J) I Y=" " W ?39,$E(X,1,J-1) S X=$E(X,J+1,$L(X)) Q
"RTN","SROACPM",33,0)
 Q
"RTN","SROACPM",34,0)
SEL S SRSOUT=0 W !!,"Select number of item to edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROACPM",35,0)
 Q:X=""  S:X="a" X="A" I '$D(SRFLG),'$D(SRZ(X)),(X'?1.2N1":"1.2N),X'="A" D HELP S SRR=1 Q
"RTN","SROACPM",36,0)
 I X?1.2N1":"1.2N S Y=$P(X,":"),Z=$P(X,":",2) I Y<1!(Z>SRZ)!(Y>Z) D HELP S SRR=1 Q
"RTN","SROACPM",37,0)
 I X="A" S X="1:"_SRZ
"RTN","SROACPM",38,0)
 I X?1.2N1":"1.2N D RANGE S SRR=1 Q
"RTN","SROACPM",39,0)
 I $D(SRZ(X)),+X=X S EMILY=X D  S SRR=1
"RTN","SROACPM",40,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROACPM",41,0)
 Q
"RTN","SROACPM",42,0)
PIMS ; get update from PIMS records
"RTN","SROACPM",43,0)
 W ! K DIR S DIR("A")="Are you sure you want to retrieve information from PIMS records ? ",DIR("B")="YES",DIR(0)="YOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROACPM",44,0)
 W ! D WAIT^DICD D ^SROAPIMS
"RTN","SROACPM",45,0)
 Q
"RTN","SROACPM",46,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROACPM",47,0)
 W !!,"1. Enter 'A' to update all items.",!!,"2. Enter a number (1-"_SRZ_") to update an individual item.  (For example,",!,"   enter '1' to update "_$P(SRZ(1),"^")_".)"
"RTN","SROACPM",48,0)
 W !!,"3. Enter a range of numbers (1-"_SRZ_") separated by a ':' to enter a range",!,"   of items.  (For example, enter '1:4' to update items 1, 2, 3 and 4.)",!
"RTN","SROACPM",49,0)
 I $D(SRFLG) W !,"4. Enter 'N' or 'NO' to enter negative response for all items.",!!,"5. Enter '@' to delete information from all items.",!
"RTN","SROACPM",50,0)
PRESS W ! K DIR S DIR("A")="Press the return key to continue or '^' to exit: ",DIR(0)="FOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROACPM",51,0)
 Q
"RTN","SROACPM",52,0)
RANGE ; range of numbers
"RTN","SROACPM",53,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROACPM",54,0)
 .S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROACPM",55,0)
 Q
"RTN","SROACPM",56,0)
ONE ; edit one item
"RTN","SROACPM",57,0)
 I EMILY=7 D LIST
"RTN","SROACPM",58,0)
 K DR,DA,DIE S DR=$P(SRZ(EMILY),"^",2)_"T",DA=SRTN,DIE=130,SRDT=$P(SRZ(EMILY),"^",3) S:SRDT DR=DR_";"_SRDT_"T" D ^DIE K DR,DA I $D(Y) S SRSOUT=1
"RTN","SROACPM",59,0)
 I 'SRSOUT,EMILY=1!(EMILY=2) D OK
"RTN","SROACPM",60,0)
 Q
"RTN","SROACPM",61,0)
OK ; compare admission date to discharge date
"RTN","SROACPM",62,0)
 N SRADM,SRDIS S X=$G(^SRF(SRTN,208)),SRADM=$P(X,"^",14),SRDIS=$P(X,"^",15)
"RTN","SROACPM",63,0)
 I SRADM,SRDIS,SRADM'<SRDIS W !!,"  ***  NOTE: Discharge Date precedes Admission Date!!  Please check.  ***",! D PRESS W !
"RTN","SROACPM",64,0)
 Q
"RTN","SROACPM",65,0)
LIST ; display list of patient movements
"RTN","SROACPM",66,0)
 N CNT,SRADM,SRLOC,SRMOVE,SRMVMT,SRT,SRTYPE,SRZ,SRY
"RTN","SROACPM",67,0)
 S DFN=$P(^SRF(SRTN,0),"^"),SRZ=$P($G(^SRF(SRTN,.2)),"^",12)
"RTN","SROACPM",68,0)
 S SRADM=0 D ADM Q:'SRZ
"RTN","SROACPM",69,0)
 S CNT=0 F  Q:'SRZ  D MVMT
"RTN","SROACPM",70,0)
 Q:CNT=0
"RTN","SROACPM",71,0)
 W !!,?5,"To identify the date and time the patient was discharged from intensive",!,?5,"care following surgery, see the following list of patient movements"
"RTN","SROACPM",72,0)
 W !,?5,"that occurred during the inpatient stay associated with this surgery.",!
"RTN","SROACPM",73,0)
 S CNT=0 F  S CNT=$O(SRMVMT(CNT)) Q:'CNT  S X=SRMVMT(CNT),SRT=$P(X,"^",2) W !,?5,$P($P(X,"^"),":",1,2),?25,$P(X,"^",3),?37,$S(SRT=3:"From",1:"To")_": "_$P(X,"^",4)
"RTN","SROACPM",74,0)
 W !
"RTN","SROACPM",75,0)
 Q
"RTN","SROACPM",76,0)
MVMT S VAIP("D")=SRZ D IN5^VADPT S SRY=$P(VAIP(3),"^")
"RTN","SROACPM",77,0)
 I SRY S CNT=CNT+1 D
"RTN","SROACPM",78,0)
 .S SRMOVE=$P(VAIP(3),"^",2),SRTYPE=$P(VAIP(2),"^",1,2),SRLOC=$P(VAIP(5),"^",2)
"RTN","SROACPM",79,0)
 .S SRMVMT(CNT)=SRMOVE_"^"_SRTYPE_"^"_SRLOC
"RTN","SROACPM",80,0)
 I 'SRY S SRZ="" Q
"RTN","SROACPM",81,0)
 I VAIP(1)=VAIP(17) S SRZ="" Q
"RTN","SROACPM",82,0)
 I VAIP(16),VAIP(16)=VAIP(17) S CNT=CNT+1,SRMOVE=$P(VAIP(16,1),"^",2),SRTYPE=$P(VAIP(16,2),"^",1,2),SRLOC=$P(VAIP(16,4),"^",2),SRMVMT(CNT)=SRMOVE_"^"_SRTYPE_"^"_SRLOC,SRZ="" Q
"RTN","SROACPM",83,0)
 S SRZ=$P(VAIP(16,1),"^")
"RTN","SROACPM",84,0)
 Q
"RTN","SROACPM",85,0)
ADM N SR24 S VAIP("D")=SRZ D IN5^VADPT
"RTN","SROACPM",86,0)
 I 'VAIP(13) S X1=SRZ,X2=1 D C^%DTC S SR24=X,SRDT=$O(^DGPM("APTT1",DFN,SRZ)) Q:'SRDT!(SRDT>SR24)  S VAIP("D")=SRDT D IN5^VADPT I 'VAIP(13) S SRZ="" Q
"RTN","SROACPM",87,0)
 I VAIP(13) S SRZ=$P(VAIP(13,1),"^")+.000001
"RTN","SROACPM",88,0)
 Q
"RTN","SROACPM",89,0)
TR S J=I,J=$TR(J,"1234567890.","ABCDEFGHIJP")
"RTN","SROACPM",90,0)
 Q
"RTN","SROACPM",91,0)
GET S X=$T(@J)
"RTN","SROACPM",92,0)
 Q
"RTN","SROACPM",93,0)
END W @IOF D ^SRSKILL
"RTN","SROACPM",94,0)
 Q
"RTN","SROACPM",95,0)
DAH ;;418^Hospital Admission Date
"RTN","SROACPM",96,0)
DAI ;;419^Hospital Discharge Date
"RTN","SROACPM",97,0)
DDJ ;;440^Cardiac Catheterization Date
"RTN","SROACPM",98,0)
PBJE ;;.205^Time Patient In OR
"RTN","SROACPM",99,0)
PBCB ;;.232^Time Patient Out OR
"RTN","SROACPM",100,0)
DGJ ;;470^Date/Time Patient Extubated
"RTN","SROACPM",101,0)
DGA ;;471^Date/Time Discharged from ICU
"RTN","SROACPM",102,0)
DDB ;;442^Employment Status Preoperatively
"RTN","SROACPM",103,0)
DCA ;;431^Resource Data Comments
"RTN","SROACPM",104,0)
DGC ;;473^Homeless
"RTN","SROACPM",105,0)
DGB ;;472^Surg Performed at Non-VA Facility
"RTN","SROADX2")
0^106^B32744906^B33229144
"RTN","SROADX2",1,0)
SROADX2 ;BIR/RJS - ASSOCIATED DIAGNOSIS FOR CODER AND VERIFY SCREENS ;09/12/05 12:01pm
"RTN","SROADX2",2,0)
 ;;3.0; Surgery ;**119,150,142**;24 Jun 93
"RTN","SROADX2",3,0)
PDXCHK(SRCODE) N SRYBAK,SRXBAK,DIR,SRQUIT,SRTEMP,DA
"RTN","SROADX2",4,0)
 Q:'$D(D0)
"RTN","SROADX2",5,0)
 I '$D(SRTN) N SRTN S SRTN=D0
"RTN","SROADX2",6,0)
 Q:D0=SRTN
"RTN","SROADX2",7,0)
 S ^TMP($J,"SRASOC",SRTN)=""
"RTN","SROADX2",8,0)
 M SRYBAK=Y
"RTN","SROADX2",9,0)
 I SRYBAK=1 S SRYBAK=""
"RTN","SROADX2",10,0)
 S DIR(0)="Y",SRXBAK=X,SRQUIT=0,SRKALL=0,Y=0
"RTN","SROADX2",11,0)
 S DIR("A",1)="The Procedure Associations may no longer be correct,"
"RTN","SROADX2",12,0)
 I SRCODE D
"RTN","SROADX2",13,0)
 .Q:$$PRLOOP(1)=0
"RTN","SROADX2",14,0)
 .I $P(XQY0,U)'="SROVER"&($P(XQY0,U)'="SRCODING EDIT") S DIR("A",2)="Please update the Associations in the PHYSICIAN'S VERIFY menu"
"RTN","SROADX2",15,0)
 .S DIR("A")="Delete PRINCIPAL Procedure Associations for this DX",DIR("B")="NO"
"RTN","SROADX2",16,0)
 .S:$$GET1^DIQ(130.18,D0_","_SRTN_",",3) DIR("B")="YES"
"RTN","SROADX2",17,0)
 .D ^DIR
"RTN","SROADX2",18,0)
 I 'SRCODE D
"RTN","SROADX2",19,0)
 .I $$PRLOOP(1)=0,$$OTLOOP(1)=0 Q
"RTN","SROADX2",20,0)
 .S DIR("A")="All Procedure Associations for this DX will be deleted. Continue",DIR("B")="NO"
"RTN","SROADX2",21,0)
 .D ^DIR S:'Y SRXBAK=SRYBAK,SRQUIT=1
"RTN","SROADX2",22,0)
 .S:Y SRKALL=1
"RTN","SROADX2",23,0)
 S:Y SRTEMP=$$PRLOOP(0)
"RTN","SROADX2",24,0)
 M Y=SRYBAK S X=SRXBAK
"RTN","SROADX2",25,0)
 I SRQUIT W !! Q
"RTN","SROADX2",26,0)
 K DIR
"RTN","SROADX2",27,0)
 D OTHCHK(SRCODE)
"RTN","SROADX2",28,0)
 K SRKALL,SRMATCH,DIR
"RTN","SROADX2",29,0)
 Q
"RTN","SROADX2",30,0)
OTHCHK(SRCODE) N OTH,DA,SRY,SRQUIT,SRYBAK,SRXBAK,DIR
"RTN","SROADX2",31,0)
 M SRYBAK=Y
"RTN","SROADX2",32,0)
 S SRQUIT=0,SRXBAK=X
"RTN","SROADX2",33,0)
 I 'SRKALL W ! D
"RTN","SROADX2",34,0)
 .Q:$$OTLOOP(1)=0
"RTN","SROADX2",35,0)
 .S DIR(0)="Y",DIR("A",1)="The OTHER Prodecure Associations may no longer be correct."
"RTN","SROADX2",36,0)
 .I SRCODE D
"RTN","SROADX2",37,0)
 ..I $P(XQY0,U)'="SROVER"&($P(XQY0,U)'="SRCODING EDIT") S DIR("A",2)="Please update the Associations in the PHYSICIAN'S VERIFY menu"
"RTN","SROADX2",38,0)
 ..S DIR("A")="Delete OTHER Procedure Associations for this DX",DIR("B")="NO"
"RTN","SROADX2",39,0)
 ..S:$$GET1^DIQ(130.18,D0_","_SRTN_",",3) DIR("B")="YES"
"RTN","SROADX2",40,0)
 ..D ^DIR W !!
"RTN","SROADX2",41,0)
 I Y!SRKALL D
"RTN","SROADX2",42,0)
 .N DA S OTH=0
"RTN","SROADX2",43,0)
 .F  S OTH=$O(^SRF(SRTN,13,OTH)) Q:'OTH  D
"RTN","SROADX2",44,0)
 ..S DA=0
"RTN","SROADX2",45,0)
 ..F  S DA=$O(^SRF(SRTN,13,OTH,"OADX",DA)) Q:'+DA  D
"RTN","SROADX2",46,0)
 ...I D0=^SRF(SRTN,13,OTH,"OADX",DA,0) D  Q
"RTN","SROADX2",47,0)
 ....D KOADX(SRTN,OTH)
"RTN","SROADX2",48,0)
 M Y=SRYBAK S X=SRXBAK
"RTN","SROADX2",49,0)
 Q
"RTN","SROADX2",50,0)
MSG Q:$D(SRFLG)
"RTN","SROADX2",51,0)
 Q:'$D(EMILY)
"RTN","SROADX2",52,0)
 D SRCMSG^SROADX1
"RTN","SROADX2",53,0)
 D SRCWRT^SROADX1
"RTN","SROADX2",54,0)
 Q
"RTN","SROADX2",55,0)
PRLOOP(SRCHK) N SRDX,SRMATCH S (SRDX,SRMATCH)=0
"RTN","SROADX2",56,0)
 F SRI=1:1 S SRDX=$O(^SRF(SRTN,"PADX",SRDX)) Q:'SRDX  D
"RTN","SROADX2",57,0)
 .I (D0=^SRF(SRTN,"PADX",SRDX,0))!($G(DA)=^SRF(SRTN,"PADX",SRDX,0)) S SRMATCH=1 Q
"RTN","SROADX2",58,0)
 I SRMATCH,'SRCHK D KPADX(SRTN)
"RTN","SROADX2",59,0)
 Q SRMATCH
"RTN","SROADX2",60,0)
OTLOOP(SRCHK) N SRDA,OTH,SRMATCH S (OTH,SRMATCH)=0
"RTN","SROADX2",61,0)
 F  S OTH=$O(^SRF(SRTN,13,OTH)) Q:'OTH  D
"RTN","SROADX2",62,0)
 .S SRDA=0
"RTN","SROADX2",63,0)
 .F  S SRDA=$O(^SRF(SRTN,13,OTH,"OADX",SRDA)) Q:'+SRDA  D
"RTN","SROADX2",64,0)
 ..I (D0=^SRF(SRTN,13,OTH,"OADX",SRDA,0))!($G(DA)=^SRF(SRTN,13,OTH,"OADX",SRDA,0)) D  Q
"RTN","SROADX2",65,0)
 ...I 'SRCHK D KOADX(SRTN,SRDA)
"RTN","SROADX2",66,0)
 ...S SRMATCH=1
"RTN","SROADX2",67,0)
 Q SRMATCH
"RTN","SROADX2",68,0)
DELASOC N DIR,Y,SRPR,SROT,SRXBAK
"RTN","SROADX2",69,0)
 S:'$D(SRTN)&$D(DA(1)) SRTN=DA(1)
"RTN","SROADX2",70,0)
 S:'$D(SRTN)&'$D(DA(1)) SRTN=DA
"RTN","SROADX2",71,0)
 I $D(^TMP($J,"SRASOC",SRTN)) K ^TMP($J,"SRASOC",SRTN) Q
"RTN","SROADX2",72,0)
 Q:$G(D0)=""
"RTN","SROADX2",73,0)
 S SRPR=$$PRLOOP(1),SROT=$$OTLOOP(1),SRXBAK=X
"RTN","SROADX2",74,0)
 I 'SRPR,'SROT Q
"RTN","SROADX2",75,0)
 S DIR(0)="FO",DIR("A")="Procedure Associations for this Diagnosis will be deleted. Continue"
"RTN","SROADX2",76,0)
 D ^DIR
"RTN","SROADX2",77,0)
 S SRPR=$$PRLOOP(0),SROT=$$OTLOOP(0)
"RTN","SROADX2",78,0)
 S X=SRXBAK
"RTN","SROADX2",79,0)
 Q
"RTN","SROADX2",80,0)
PRINASO(SRCODE) Q:$G(SRTN)=""!($G(X)="")
"RTN","SROADX2",81,0)
 N D0 S D0=0  D PDXCHK(SRCODE) K SRCODE Q
"RTN","SROADX2",82,0)
PRINASOD Q:$G(SRTN)=""!($G(X)="")
"RTN","SROADX2",83,0)
 I $D(^TMP($J,"SRASOC",SRTN)) K ^TMP($J,"SRASOC",SRTN) Q
"RTN","SROADX2",84,0)
 N D0 S D0=0  D DELASOC Q
"RTN","SROADX2",85,0)
PCPTASO(SRCODE) Q:$G(SRTN)=""!($G(X)="")
"RTN","SROADX2",86,0)
 I $G(D0)=""!('+$G(X)&(SRCODE))!('$D(^SRF(SRTN,"PADX"))) Q
"RTN","SROADX2",87,0)
 D:$$EDITWARN(SRCODE) KPADX(SRTN)
"RTN","SROADX2",88,0)
 K SRCODE
"RTN","SROADX2",89,0)
 Q
"RTN","SROADX2",90,0)
OCPTASO(SRCODE) Q:$G(SRTN)=""!($G(DA)="")!($G(X)="")
"RTN","SROADX2",91,0)
 I $G(D0)=""!('+$G(X)&(SRCODE))!('$D(^SRF(SRTN,13,DA,"OADX",0))) Q
"RTN","SROADX2",92,0)
 D:$$EDITWARN(SRCODE) KOADX(SRTN,DA)
"RTN","SROADX2",93,0)
 K SRCODE
"RTN","SROADX2",94,0)
 Q
"RTN","SROADX2",95,0)
EDITWARN(SRCODE) N SRYBAK,SRXBAK,DIR,SRY
"RTN","SROADX2",96,0)
 M SRYBAK=Y,SRDABAK=DA
"RTN","SROADX2",97,0)
 S DIR(0)="Y",DIR("B")="NO",SRXBAK=X,SRQUIT=0
"RTN","SROADX2",98,0)
 S DIR("A",1)="The Diagnosis to Procedure Associations may no longer be correct."
"RTN","SROADX2",99,0)
 I SRCODE D
"RTN","SROADX2",100,0)
 .I $P(XQY0,U)'="SROVER"&($P(XQY0,U)'="SRCODING EDIT") S DIR("A",2)="Please update the Associations in the PHYSICIAN'S VERIFY menu."
"RTN","SROADX2",101,0)
 .S DIR("A")="Delete Diagnosis Associations for this Procedure"
"RTN","SROADX2",102,0)
 .D ^DIR
"RTN","SROADX2",103,0)
 I 'SRCODE D
"RTN","SROADX2",104,0)
 .S DIR("A")="All DX Associations for this Procedure will be deleted. Continue"
"RTN","SROADX2",105,0)
 .D ^DIR
"RTN","SROADX2",106,0)
 .S:'Y SRXBAK=SRYBAK
"RTN","SROADX2",107,0)
 S X=SRXBAK,SRY=Y
"RTN","SROADX2",108,0)
 M Y=SRYBAK,DA=SRDABAK
"RTN","SROADX2",109,0)
 W !!
"RTN","SROADX2",110,0)
 Q SRY
"RTN","SROADX2",111,0)
KPADX(SRCN) ; kill all the principal cpt associated diagnosis codes
"RTN","SROADX2",112,0)
 N DA,DIK,SRX1,Y,SRXBAK
"RTN","SROADX2",113,0)
 S SRX1=0,DA(1)=SRCN,SRXBAK=X
"RTN","SROADX2",114,0)
 F  S SRX1=$O(^SRF(DA(1),"PADX",SRX1)) Q:'SRX1  D
"RTN","SROADX2",115,0)
 .S DA=SRX1,DA(1)=SRCN,DIK="^SRF("_DA(1)_",""PADX""," D ^DIK
"RTN","SROADX2",116,0)
 S X=SRXBAK
"RTN","SROADX2",117,0)
 Q
"RTN","SROADX2",118,0)
KOADX(SRCN,SRREC) ; kill other cpt associated diagnosis codes
"RTN","SROADX2",119,0)
 N DA,DIK,SRX1,Y,SRXBAK
"RTN","SROADX2",120,0)
 S SRX1=0,DA(2)=SRCN,SRXBAK=X
"RTN","SROADX2",121,0)
 F  S SRX1=$O(^SRF(DA(2),13,SRREC,"OADX",SRX1)) Q:'SRX1  D
"RTN","SROADX2",122,0)
 .S DA=SRX1,DA(1)=SRREC,DA(2)=SRCN,DIK="^SRF("_DA(2)_",13,"_DA(1)_",""OADX""," D ^DIK
"RTN","SROADX2",123,0)
 S X=SRXBAK
"RTN","SROADX2",124,0)
 Q
"RTN","SROADX2",125,0)
ADXCHK ; check the validity of associations and remove if diagnosis missing
"RTN","SROADX2",126,0)
 N SRDX,SRX,SRY,SRZ
"RTN","SROADX2",127,0)
 S SRDX=0
"RTN","SROADX2",128,0)
 I $D(^SRF(SRTN,13)) S SRX=0 D
"RTN","SROADX2",129,0)
 .F  S SRX=$O(^SRF(SRTN,13,SRX)) Q:'SRX  D
"RTN","SROADX2",130,0)
 ..I $D(^SRF(SRTN,13,SRX,"OADX")) S SRY=0 D
"RTN","SROADX2",131,0)
 ...F  S SRY=$O(^SRF(SRTN,13,SRX,"OADX",SRY)) Q:'SRY  D
"RTN","SROADX2",132,0)
 ....S SRDX=^SRF(SRTN,13,SRX,"OADX",SRY,0)
"RTN","SROADX2",133,0)
 ....I (SRDX'=0),'$D(^SRF(SRTN,15,SRDX,0)) D KOADX(SRTN,SRX)
"RTN","SROADX2",134,0)
 ....I (SRDX=0),($P($G(^SRF(SRTN,34)),U)=""),('$P($G(^SRF(SRTN,34)),U,2)) D KOADX(SRTN,SRX)
"RTN","SROADX2",135,0)
 I $D(^SRF(SRTN,"PADX")) S SRX=0 D
"RTN","SROADX2",136,0)
 .F  S SRX=$O(^SRF(SRTN,"PADX",SRX)) Q:'SRX  D
"RTN","SROADX2",137,0)
 ..S SRDX=^SRF(SRTN,"PADX",SRX,0)
"RTN","SROADX2",138,0)
 ..I (SRDX'=0),'$D(^SRF(SRTN,15,SRDX,0)) D KPADX(SRTN)
"RTN","SROADX2",139,0)
 I $O(^SRF(SRTN,"PADX",0)),(($P($G(^SRF(SRTN,34)),U)="")&('$P($G(^SRF(SRTN,34)),U,2)))!(($P($G(^SRF(SRTN,"OP")),U)="")&('$P($G(^SRF(SRTN,"OP")),U,2))) D KPADX(SRTN)
"RTN","SROADX2",140,0)
 Q
"RTN","SROAEX")
0^16^B17035378^B17075520
"RTN","SROAEX",1,0)
SROAEX ;BIR/MAM - EXCLUSION CRITERIA ;02/14/06
"RTN","SROAEX",2,0)
 ;;3.0; Surgery ;**38,47,63,88,142**;24 Jun 93
"RTN","SROAEX",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROAEX",4,0)
 S SRACLR=0,SRSOUT=0 D NCODE^SROAUTL
"RTN","SROAEX",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO S SRAO(4)=""
"RTN","SROAEX",6,0)
 S SR(0)=^SRF(SRTN,0),Y=$P($G(^SRF(SRTN,"RA")),"^",7) D CRITERIA S SRAO(1)=NYUK_"^102"
"RTN","SROAEX",7,0)
 S SRAO(2)=$P(SR(0),"^",10)_"^.035",X=$P(SRAO(2),"^") I X'="" S $P(SRAO(2),"^")=$S(X="EL":"ELECTIVE",X="EM":"EMERGENT",X="U":"URGENT",X="A":"ADD ON TODAY (NONEMERGENT)",X="S":"STANDBY",1:"")
"RTN","SROAEX",8,0)
 S SHEMP=$P(SR(0),"^",4) S:SHEMP SHEMP=$P(^SRO(137.45,SHEMP,0),"^"),SRAO(3)=SHEMP_"^.04"
"RTN","SROAEX",9,0)
 D TECH^SROPRIN S:SRTECH="NOT ENTERED" SRTECH="" S SRAO(5)=SRTECH
"RTN","SROAEX",10,0)
 S X=$P(SR(0),"^",3),X=$S(X="J":"MAJOR",X="N":"MINOR",1:""),SRAO(6)=X_"^.03"
"RTN","SROAEX",11,0)
 D TSTAT^SRO1L1,HDR^SROAUTL
"RTN","SROAEX",12,0)
 W !,"1. Exclusion Criteria: ",?35,$P(SRAO(1),"^"),!,"2. Surgical Priority:",?35,$P(SRAO(2),"^"),!,"3. Surgical Specialty:",?35,$P(SRAO(3),"^")
"RTN","SROAEX",13,0)
 N SRPROC,SRL S SRL=45 D CPTS^SROAOP1 W !,"4. CPT Codes (view only):" I SRPROC(1)="" S SRPROC(1)="NOT ENTERED"
"RTN","SROAEX",14,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?35,SRPROC(I) W:I'=1 !,?35,SRPROC(I)
"RTN","SROAEX",15,0)
 W !,"5. Principal Anesthesia Technique: "_$P(SRAO(5),"^"),!,"6. Major or Minor:",?35,$P(SRAO(6),"^"),!! F LINE=1:1:80 W "-"
"RTN","SROAEX",16,0)
ASK W !!,"Select Excluded Case Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROAEX",17,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROAEX",18,0)
 I X="A" S X="1:6"
"RTN","SROAEX",19,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>6)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROAEX",20,0)
 D TSTAT^SRO1L1,HDR^SROAUTL
"RTN","SROAEX",21,0)
 I X?.N1":".N D RANGE,AQ G START
"RTN","SROAEX",22,0)
 I $D(SRAO(X)) S EMILY=X W !! D ONE,AQ G START
"RTN","SROAEX",23,0)
END W @IOF D ^SRSKILL
"RTN","SROAEX",24,0)
 Q
"RTN","SROAEX",25,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROAEX",26,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (1-6) to update the information in that field.  (For",!,"   example, enter '2' to update Surgical Priority)"
"RTN","SROAEX",27,0)
 W !!,"3. Enter a range of numbers (1-6) separated by a ':' to enter a range of",!,"   information.  (For example, enter '1:2' to update the Exclusion Criteria ",!,"   and Surgical Priority)"
"RTN","SROAEX",28,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROAEX",29,0)
 Q
"RTN","SROAEX",30,0)
AQ ; update transmission status
"RTN","SROAEX",31,0)
 K DA,DIK S DIK="^SRF(",DIK(1)=".232^AQ",DA=SRTN D EN1^DIK K DA,DIK
"RTN","SROAEX",32,0)
 Q
"RTN","SROAEX",33,0)
RANGE ; range of numbers
"RTN","SROAEX",34,0)
 W !! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE I EMILY=4 D HDR^SROAUTL
"RTN","SROAEX",35,0)
 Q
"RTN","SROAEX",36,0)
ONE ; edit one item
"RTN","SROAEX",37,0)
 I EMILY=1 D REASON Q
"RTN","SROAEX",38,0)
 I EMILY=4 D DISP^SROAOP1 Q
"RTN","SROAEX",39,0)
 I EMILY=5 D UPANES Q
"RTN","SROAEX",40,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROAEX",41,0)
 Q
"RTN","SROAEX",42,0)
RET Q:SRSOUT  W !!,"Press ENTER to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAEX",43,0)
 Q
"RTN","SROAEX",44,0)
CRITERIA ; expand set of codes for exclusion criteria
"RTN","SROAEX",45,0)
 S C=$P(^DD(130,102,0),"^",2) D Y^DIQ S NYUK=Y
"RTN","SROAEX",46,0)
 S SHEMP=$P(^SRF(SRTN,0),"^",10),MOE=$S(SHEMP="E":"ELECTIVE",SHEMP="M":"EMERGENCY",SHEMP="U":"URGENT",1:"")
"RTN","SROAEX",47,0)
 Q
"RTN","SROAEX",48,0)
UPANES K DR,DIE,DA S DA=SRTN,DR=.37,DR(2,130.06)=".01T;.05T;42T",DIE=130 D ^DIE K DR
"RTN","SROAEX",49,0)
 Q
"RTN","SROAEX",50,0)
REASON W ! K DIR S DIR(0)="130,102",DIR("A")="Reason for not Creating an Assessment",DIR("B")=$P(SRAO(1),"^") D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROAEX",51,0)
 I X="@" D DELETE^SRONASS S SRSOUT=1 Q
"RTN","SROAEX",52,0)
 I Y K DR,DIE,DA S DA=SRTN,DIE=130,DR="102////"_Y D ^DIE K DA,DIE,DR
"RTN","SROAEX",53,0)
 Q
"RTN","SROALAB")
0^17^B6024559^B5999302
"RTN","SROALAB",1,0)
SROALAB ;BIR/MAM - ENTER/EDIT LABORATORY INFORMATION ;05/26/99  10:51 AM
"RTN","SROALAB",2,0)
 ;;3.0; Surgery ;**38,88,142**;24 Jun 93
"RTN","SROALAB",3,0)
 I '$D(SRTN) W !!,"You must select a surgery risk assessment prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROALAB",4,0)
 S SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROALAB",5,0)
START G:SRSOUT END D HDR^SROAUTL
"RTN","SROALAB",6,0)
 W !,"Enter/Edit Laboratory Test Results",!!,"1. Capture Preoperative Laboratory Information",!,"2. Capture Postoperative Laboratory Information"
"RTN","SROALAB",7,0)
 W !,"3. Enter, Edit, or Review Laboratory Test Results"
"RTN","SROALAB",8,0)
ASK W !!,"Select Number: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROALAB",9,0)
 I X>3!(X<1)!(X'?.N) D HELP G:SRSOUT END G START
"RTN","SROALAB",10,0)
 I X=1 D ^SROAL1 G START
"RTN","SROALAB",11,0)
 I X=2 D ^SROAL2 G START
"RTN","SROALAB",12,0)
 D ^SROALEN G START
"RTN","SROALAB",13,0)
END ;
"RTN","SROALAB",14,0)
 W @IOF D ^SRSKILL
"RTN","SROALAB",15,0)
 Q
"RTN","SROALAB",16,0)
HELP W !!,"Enter '1' if you want to capture preoperative laboratory test results from the",!,"DHCP Laboratory records.  Enter '2' if you want to capture the postoperative"
"RTN","SROALAB",17,0)
 W !,"laboratory test results from the DHCP Laboratory records.  If you want to ",!,"enter, edit, or review preoperative and postoperative laboratory test results,",!,"enter '3'."
"RTN","SROALAB",18,0)
PRESS W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROALAB",19,0)
 Q
"RTN","SROALC")
0^96^B10924370^B10012138
"RTN","SROALC",1,0)
SROALC ;BIR/MAM - COMPLETE ASSESSMENTS ;03/08/06
"RTN","SROALC",2,0)
 ;;3.0; Surgery ;**38,50,142**;24 Jun 93 
"RTN","SROALC",3,0)
 I $E(IOST)="P" D ^SROALCP Q
"RTN","SROALC",4,0)
 S SRSOUT=0 D HDR
"RTN","SROALC",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALC",6,0)
 Q
"RTN","SROALC",7,0)
SET ; print assessments
"RTN","SROALC",8,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALC",9,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROALC",10,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALC",11,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALC",12,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALC",13,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALC",14,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALC",15,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALC",16,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALC",17,0)
 D TECH^SROPRIN
"RTN","SROALC",18,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALC",19,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALC",20,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3)
"RTN","SROALC",21,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROALC",22,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALC",23,0)
 Q
"RTN","SROALC",24,0)
OTHER ; other operations
"RTN","SROALC",25,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALC",26,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALC",27,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALC",28,0)
 Q
"RTN","SROALC",29,0)
LOOP ; break procedures
"RTN","SROALC",30,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALC",31,0)
 Q
"RTN","SROALC",32,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALC",33,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALC",34,0)
HDR W @IOF,!,?27,"COMPLETED RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"SURGICAL SPECIALTY",!,"OPERATION DATE",?20,"PRINCIPAL OPERATION",?55,"ANESTHESIA TECHNIQUE",! F LINE=1:1:80 W "="
"RTN","SROALC",35,0)
 Q
"RTN","SROALCP")
0^103^B10263576^B9375103
"RTN","SROALCP",1,0)
SROALCP ;BIR/MAM - COMPLETE ASSESSMENTS (PRINTER) ;03/08/06
"RTN","SROALCP",2,0)
 ;;3.0; Surgery ;**32,50,142**;24 Jun 93
"RTN","SROALCP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALCP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALCP",5,0)
 Q
"RTN","SROALCP",6,0)
SET ; print assessments
"RTN","SROALCP",7,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALCP",8,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROALCP",9,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROALCP",10,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALCP",11,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALCP",12,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALCP",13,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALCP",14,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALCP",15,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALCP",16,0)
 D TECH^SROPRIN
"RTN","SROALCP",17,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALCP",18,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALCP",19,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1) I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALCP",20,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROALCP",21,0)
 W !
"RTN","SROALCP",22,0)
 Q
"RTN","SROALCP",23,0)
OTHER ; other operations
"RTN","SROALCP",24,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALCP",25,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALCP",26,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALCP",27,0)
 Q
"RTN","SROALCP",28,0)
LOOP ; break procedures
"RTN","SROALCP",29,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<81  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALCP",30,0)
 Q
"RTN","SROALCP",31,0)
HDR ; print heading
"RTN","SROALCP",32,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALCP",33,0)
 W:$Y @IOF W !,?53,"COMPLETED RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALCP",34,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALCP",35,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"PRINCIPAL OPERATIVE PROCEDURE",! F LINE=1:1:132 W "="
"RTN","SROALCP",36,0)
 Q
"RTN","SROALCS")
0^97^B14237632^B13195672
"RTN","SROALCS",1,0)
SROALCS ;BIR/MAM - COMPLETE ASSESSMENTS ;03/08/06
"RTN","SROALCS",2,0)
 ;;3.0; Surgery ;**38,50,142**;24 Jun 93
"RTN","SROALCS",3,0)
 I $E(IOST)="P" D ^SROALCSP Q
"RTN","SROALCS",4,0)
 K ^TMP("SRA",$J)
"RTN","SROALCS",5,0)
 S SRSOUT=0 D HDR
"RTN","SROALCS",6,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALCS",7,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) Q:'SRTN!SRSOUT  D SET
"RTN","SROALCS",8,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROALCS",9,0)
 Q
"RTN","SROALCS",10,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROALCS",11,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROALCS",12,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALCS",13,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALCS",14,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALCS",15,0)
 Q
"RTN","SROALCS",16,0)
SET ; print assessments
"RTN","SROALCS",17,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALCS",18,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALCS",19,0)
 S SRA(0)=^SRF(SRTN,0),SR("RA")=^SRF(SRTN,"RA"),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALCS",20,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALCS",21,0)
 S SRC="",Y=$E($P(SR("RA"),"^",5),1,7) I Y D D^DIQ S SRC=Y
"RTN","SROALCS",22,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALCS",23,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALCS",24,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALCS",25,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALCS",26,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALCS",27,0)
 D TECH^SROPRIN
"RTN","SROALCS",28,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALCS",29,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALCS",30,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,SRC,!,SRDT,?20,SROPS(1),?55,SRTECH S SRAO=1 F  S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROALCS",31,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROALCS",32,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALCS",33,0)
 Q
"RTN","SROALCS",34,0)
OTHER ; other operations
"RTN","SROALCS",35,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALCS",36,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALCS",37,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALCS",38,0)
 Q
"RTN","SROALCS",39,0)
LOOP ; break procedures
"RTN","SROALCS",40,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALCS",41,0)
 Q
"RTN","SROALCS",42,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALCS",43,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALCS",44,0)
HDR W @IOF,!,?27,"COMPLETED RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"DATE COMPLETED",!,"OPERATION DATE",?20,"PRINCIPAL OPERATION",?55,"ANESTHESIA TECHNIQUE",! F LINE=1:1:80 W "="
"RTN","SROALCS",45,0)
 Q
"RTN","SROALCS",46,0)
SS ; print surgical specialty
"RTN","SROALCS",47,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALCS",48,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALCS",49,0)
 Q
"RTN","SROALCSP")
0^98^B12507398^B11530013
"RTN","SROALCSP",1,0)
SROALCSP ;BIR/MAM - COMPLETE ASSESSMENTS (PRINTER) ;03/08/06
"RTN","SROALCSP",2,0)
 ;;3.0; Surgery ;**32,50,142**;24 Jun 93
"RTN","SROALCSP",3,0)
 K ^TMP("SRA",$J) S SRPAGE=0,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALCSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALCSP",5,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN LINE Q:'SRTN!SRSOUT  D SET
"RTN","SROALCSP",6,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROALCSP",7,0)
 Q
"RTN","SROALCSP",8,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROALCSP",9,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROALCSP",10,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALCSP",11,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALCSP",12,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALCSP",13,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALCSP",14,0)
 Q
"RTN","SROALCSP",15,0)
SET ; print assessments
"RTN","SROALCSP",16,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALCSP",17,0)
 I $Y+5>IOSL D HDR I SRSOUT Q
"RTN","SROALCSP",18,0)
 S SRA(0)=^SRF(SRTN,0),SR("RA")=^SRF(SRTN,"RA"),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALCSP",19,0)
 S SRC="",Y=$E($P(SR("RA"),"^",5),1,7) I Y D D^DIQ S SRC=Y
"RTN","SROALCSP",20,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALCSP",21,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALCSP",22,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALCSP",23,0)
 D TECH^SROPRIN
"RTN","SROALCSP",24,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALCSP",25,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALCSP",26,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,SRC,?107,SRTECH,!,SRDT,?20,SROPS(1) S SRAO=1 F I=0:0 S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROALCSP",27,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROALCSP",28,0)
 W ! Q
"RTN","SROALCSP",29,0)
OTHER ; other operations
"RTN","SROALCSP",30,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALCSP",31,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALCSP",32,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALCSP",33,0)
 Q
"RTN","SROALCSP",34,0)
LOOP ; break procedures
"RTN","SROALCSP",35,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALCSP",36,0)
 Q
"RTN","SROALCSP",37,0)
HDR ; print heading
"RTN","SROALCSP",38,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALCSP",39,0)
 S SRPAGE=SRPAGE+1 W:$Y @IOF W !,?53,"COMPLETED RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALCSP",40,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALCSP",41,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"DATE COMPLETED",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"PRINCIPAL OPERATIVE PROCEDURE",! F LINE=1:1:132 W "="
"RTN","SROALCSP",42,0)
 Q
"RTN","SROALCSP",43,0)
SS ; print surgical specialty
"RTN","SROALCSP",44,0)
 I $Y+5>IOSL D HDR
"RTN","SROALCSP",45,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALCSP",46,0)
 Q
"RTN","SROALCSP",47,0)
LINE W ! F L=1:1:132 W "-"
"RTN","SROALCSP",48,0)
 Q
"RTN","SROALL")
0^65^B14403320^B14061298
"RTN","SROALL",1,0)
SROALL ;BIR/MAM - ALL ASSESSMENTS ;11/23/99  12:38 PM
"RTN","SROALL",2,0)
 ;;3.0; Surgery ;**32,38,47,55,50,88,142**;24 Jun 93
"RTN","SROALL",3,0)
 I $E(IOST)="P" D ^SROALLP Q
"RTN","SROALL",4,0)
 S SRSOUT=0 D HDR F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALL",5,0)
 Q
"RTN","SROALL",6,0)
SET ; print assessments
"RTN","SROALL",7,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALL",8,0)
 S SRA(0)=^SRF(SRTN,0) I $P(SRA(0),"^",3)'="J" Q
"RTN","SROALL",9,0)
 I $G(SRMNA),($P($G(^SRF(SRTN,"RA")),"^",2))'="" Q
"RTN","SROALL",10,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALL",11,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALL",12,0)
 I '$P($G(^SRF(SRTN,.2)),"^",12) Q:'$G(SRMNA)  I '$P($G(^SRF(SRTN,.2)),"^",3) Q
"RTN","SROALL",13,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALL",14,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALL",15,0)
 S SREXCL="" I '$G(SRMNA) D
"RTN","SROALL",16,0)
 .S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"NO ASSESSMENT")
"RTN","SROALL",17,0)
 .S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALL",18,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALL",19,0)
 I '$G(SRMNA) S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALL",20,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALL",21,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALL",22,0)
 D TECH^SROPRIN
"RTN","SROALL",23,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALL",24,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH,!,$S('$G(SRMNA):STATUS,1:"") W:$D(SROPS(2)) ?20,SROPS(2)
"RTN","SROALL",25,0)
 I $G(SRMNA) S X=$P($G(^SRO(136,SRTN,0)),"^",2),SRCPT=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"CPT CODE MISSING") I X S Y=SRCPT D SSPRIN^SROCPT0 S SRCPT=Y W ?55,SRCPT
"RTN","SROALL",26,0)
 I $G(SRMNA),SRCPT="CPT CODE MISSING" W ?55,"NOT ENTERED"
"RTN","SROALL",27,0)
 I '$G(SRMNA),(SREXCL'="") W ?55,SREXCL I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALL",28,0)
 I SREXCL="",$D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALL",29,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALL",30,0)
 Q
"RTN","SROALL",31,0)
OTHER ; other operations
"RTN","SROALL",32,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALL",33,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALL",34,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALL",35,0)
 Q
"RTN","SROALL",36,0)
LOOP ; break procedures
"RTN","SROALL",37,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALL",38,0)
 Q
"RTN","SROALL",39,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALL",40,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALL",41,0)
HDR S SRHD=$S($G(SRMNA):"NON-ASSESSED MAJOR SURGICAL CASES BY SURGICAL SPECIALTY",1:"ALL MAJOR SURGICAL CASES BY SURGICAL SPECIALTY")
"RTN","SROALL",42,0)
 W @IOF,!,?(80-$L(SRHD)\2),SRHD,!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALL",43,0)
 W !!,"CASE #",?20,"PATIENT",?55,"SURGICAL SPECIALTY",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)",?55,"ANESTHESIA TECHNIQUE"
"RTN","SROALL",44,0)
 I '$G(SRMNA) W !,"ASSESSMENT STATUS",?55,"EXCLUSION CRITERIA"
"RTN","SROALL",45,0)
 E  W !,?55,"PRINCIPAL CPT CODE"
"RTN","SROALL",46,0)
 W ! F LINE=1:1:80 W "="
"RTN","SROALL",47,0)
 Q
"RTN","SROALLP")
0^66^B12421048^B12094401
"RTN","SROALLP",1,0)
SROALLP ;BIR/MAM - MAJOR CASES ;11/23/99  11:40 AM
"RTN","SROALLP",2,0)
 ;;3.0; Surgery ;**32,47,55,50,88,142**;24 Jun 93
"RTN","SROALLP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALLP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALLP",5,0)
 Q
"RTN","SROALLP",6,0)
SET ; print assessments
"RTN","SROALLP",7,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROALLP",8,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALLP",9,0)
 I $P(SRA(0),"^",3)'="J" Q
"RTN","SROALLP",10,0)
 I $G(SRMNA),($P($G(^SRF(SRTN,"RA")),"^",2))'="" Q
"RTN","SROALLP",11,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALLP",12,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALLP",13,0)
 I '$P($G(^SRF(SRTN,.2)),"^",12) Q:'$G(SRMNA)  I '$P($G(^SRF(SRTN,.2)),"^",3) Q
"RTN","SROALLP",14,0)
 S SREXCL="" I '$G(SRMNA) D
"RTN","SROALLP",15,0)
 .S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"NO ASSESSMENT")
"RTN","SROALLP",16,0)
 .S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALLP",17,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALLP",18,0)
 I '$G(SRMNA) S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALLP",19,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALLP",20,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLP",21,0)
 D TECH^SROPRIN
"RTN","SROALLP",22,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALLP",23,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1)
"RTN","SROALLP",24,0)
 I $G(SRMNA) S X=$P($G(^SRO(136,SRTN,0)),"^",2),SRCPT=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"CPT CODE MISSING") I X S Y=SRCPT D SSPRIN^SROCPT0 S SRCPT=Y W ?67,SRCPT
"RTN","SROALLP",25,0)
 I $G(SRMNA),SRCPT="CPT CODE MISSING" W ?67,"NOT ENTERED"
"RTN","SROALLP",26,0)
 I '$G(SRMNA) W ?65,STATUS,?105,SREXCL
"RTN","SROALLP",27,0)
 I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALLP",28,0)
 W !
"RTN","SROALLP",29,0)
 Q
"RTN","SROALLP",30,0)
OTHER ; other operations
"RTN","SROALLP",31,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALLP",32,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALLP",33,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALLP",34,0)
 Q
"RTN","SROALLP",35,0)
LOOP ; break procedures
"RTN","SROALLP",36,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALLP",37,0)
 Q
"RTN","SROALLP",38,0)
HDR ; print heading
"RTN","SROALLP",39,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALLP",40,0)
 S SRTITLE=$S($G(SRMNA):"NON-ASSESSED MAJOR SURGICAL CASES",1:"ALL MAJOR SURGICAL CASES")
"RTN","SROALLP",41,0)
 W:$Y @IOF W !,?(132-$L(SRTITLE)\2),SRTITLE,?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALLP",42,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALLP",43,0)
 W !!,"CASE #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)"
"RTN","SROALLP",44,0)
 I '$G(SRMNA) W ?67,"ASSESSMENT STATUS",?107,"EXCLUSION CRITERIA"
"RTN","SROALLP",45,0)
 E  W ?67,"PRINCIPAL CPT CODE"
"RTN","SROALLP",46,0)
 W ! F LINE=1:1:132 W "="
"RTN","SROALLP",47,0)
 Q
"RTN","SROALLS")
0^67^B18743963^B18328276
"RTN","SROALLS",1,0)
SROALLS ;BIR/ADM - MAJOR CASES BY SPECIALTY ;11/23/99  11:52 AM
"RTN","SROALLS",2,0)
 ;;3.0; Surgery ;**32,38,47,55,50,88,142**;24 Jun 93
"RTN","SROALLS",3,0)
 I $E(IOST)="P" D ^SROALLSP Q
"RTN","SROALLS",4,0)
START S SRSOUT=0 K ^TMP("SRA",$J)
"RTN","SROALLS",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALLS",6,0)
 D PRINT Q
"RTN","SROALLS",7,0)
UTL ; write to ^TMP("SRA,$J)
"RTN","SROALLS",8,0)
 S SRA(0)=^SRF(SRTN,0) I $P(SRA(0),"^",3)'="J" Q
"RTN","SROALLS",9,0)
 I $G(SRMNA),($P($G(^SRF(SRTN,"RA")),"^",2))'="" Q
"RTN","SROALLS",10,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALLS",11,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALLS",12,0)
 I '$P($G(^SRF(SRTN,.2)),"^",12) Q:'$G(SRMNA)  I '$P($G(^SRF(SRTN,.2)),"^",3) Q
"RTN","SROALLS",13,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALLS",14,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLS",15,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALLS",16,0)
 Q
"RTN","SROALLS",17,0)
SET ; set variables
"RTN","SROALLS",18,0)
 S SREXCL="" I '$G(SRMNA) D
"RTN","SROALLS",19,0)
 .S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"NO ASSESSMENT")
"RTN","SROALLS",20,0)
 .S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALLS",21,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALLS",22,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALLS",23,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALLS",24,0)
 I '$G(SRMNA) S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALLS",25,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALLS",26,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLS",27,0)
 D TECH^SROPRIN
"RTN","SROALLS",28,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALLS",29,0)
 Q
"RTN","SROALLS",30,0)
PRINT ;
"RTN","SROALLS",31,0)
 U IO S SRSS="",SRTC=0 D HDR
"RTN","SROALLS",32,0)
 F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  S SRC=0 D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN SSCT Q:'SRTN!SRSOUT  D SET,CASE Q:SRSOUT
"RTN","SROALLS",33,0)
 Q:SRSOUT!SRFLG  I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALLS",34,0)
 W !!,"TOTAL MAJOR CASES FOR ALL SPECIALTIES: ",SRTC
"RTN","SROALLS",35,0)
 Q
"RTN","SROALLS",36,0)
CASE ; print a case
"RTN","SROALLS",37,0)
 S SRC=SRC+1,SRTC=SRTC+1
"RTN","SROALLS",38,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALLS",39,0)
 W !,SRTN,?20,SRANM_"  "_VA("PID"),?55,SRTECH
"RTN","SROALLS",40,0)
 W !,SRDT,?20,SROPS(1)
"RTN","SROALLS",41,0)
 I '$G(SRMNA) W ?55,STATUS
"RTN","SROALLS",42,0)
 E  S X=$P($G(^SRO(136,SRTN,0)),"^",2),SRCPT=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"CPT CODE MISSING") I X S Y=SRCPT D SSPRIN^SROCPT0 S SRCPT=Y W ?55,SRCPT
"RTN","SROALLS",43,0)
 I $G(SRMNA),SRCPT="CPT CODE MISSING" W ?55,"NOT ENTERED"
"RTN","SROALLS",44,0)
 I '$G(SRMNA),(SREXCL'="") W ! W:$D(SROPS(2)) ?20,SROPS(2) W ?55,SREXCL I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALLS",45,0)
 I SREXCL="",$D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALLS",46,0)
 W ! Q
"RTN","SROALLS",47,0)
SS ; print surgical specialty
"RTN","SROALLS",48,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALLS",49,0)
 W !,"** SURGICAL SPECIALTY: ",SRSS," **",! Q
"RTN","SROALLS",50,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALLS",51,0)
 I X["?" W !!,"If you want to continue listing assessments, enter <RET>.  Enter '^' to",!,"return to the menu." G PAGE
"RTN","SROALLS",52,0)
HDR ; print heading
"RTN","SROALLS",53,0)
 S SRHD=$S($G(SRMNA):"NON-ASSESSED MAJOR SURGICAL CASES BY SURGICAL SPECIALTY",1:"ALL MAJOR SURGICAL CASES BY SURGICAL SPECIALTY")
"RTN","SROALLS",54,0)
 W @IOF,!,?(80-$L(SRHD)\2),SRHD,!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALLS",55,0)
 W !!,"CASE #",?20,"PATIENT",?55,"ANESTHESIA TECHNIQUE"
"RTN","SROALLS",56,0)
 W !,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)"
"RTN","SROALLS",57,0)
 I '$G(SRMNA) W ?55,"ASSESSMENT STATUS"
"RTN","SROALLS",58,0)
 E  W ?55,"PRINCIPAL CPT CODE"
"RTN","SROALLS",59,0)
 I '$G(SRMNA) W !,?55,"EXCLUSION CRITERIA"
"RTN","SROALLS",60,0)
 W ! F L=1:1:80 W "="
"RTN","SROALLS",61,0)
 W ! Q
"RTN","SROALLS",62,0)
OTHER ; other operations
"RTN","SROALLS",63,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,OPER=999,SROPERS=" ..."
"RTN","SROALLS",64,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALLS",65,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALLS",66,0)
 Q
"RTN","SROALLS",67,0)
LOOP ; break procedures
"RTN","SROALLS",68,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALLS",69,0)
 Q
"RTN","SROALLS",70,0)
SSCT ; write specialty count
"RTN","SROALLS",71,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALLS",72,0)
 W !,"TOTAL ",SRSS,": ",SRC,! F L=1:1:80 W "-"
"RTN","SROALLS",73,0)
 Q
"RTN","SROALLSP")
0^68^B18389897^B17978859
"RTN","SROALLSP",1,0)
SROALLSP ;BIR/ADM - ASSESSMENTS BY SPECIALTY (PRINTER) ;11/23/99  11:54 AM
"RTN","SROALLSP",2,0)
 ;;3.0; Surgery ;**32,47,55,50,88,142**;24 Jun 93
"RTN","SROALLSP",3,0)
START S SRSOUT=0 K ^TMP("SRA",$J)
"RTN","SROALLSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALLSP",5,0)
 D PRINT Q
"RTN","SROALLSP",6,0)
UTL ; write to ^TMP("SRA,$J)
"RTN","SROALLSP",7,0)
 S SRA(0)=^SRF(SRTN,0) I $P(SRA(0),"^",3)'="J" Q
"RTN","SROALLSP",8,0)
 I $G(SRMNA),($P($G(^SRF(SRTN,"RA")),"^",2))'="" Q
"RTN","SROALLSP",9,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALLSP",10,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALLSP",11,0)
 I '$P($G(^SRF(SRTN,.2)),"^",12) Q:'$G(SRMNA)  I '$P($G(^SRF(SRTN,.2)),"^",3) Q
"RTN","SROALLSP",12,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALLSP",13,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLSP",14,0)
 S TYPE=$P($G(^SRF(SRTN,"RA")),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALLSP",15,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALLSP",16,0)
 Q
"RTN","SROALLSP",17,0)
SET ; set variables
"RTN","SROALLSP",18,0)
 S SREXCL="" I '$G(SRMNA) D
"RTN","SROALLSP",19,0)
 .S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"NO ASSESSMENT")
"RTN","SROALLSP",20,0)
 .S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALLSP",21,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALLSP",22,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALLSP",23,0)
 I '$G(SRMNA) S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALLSP",24,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALLSP",25,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALLSP",26,0)
 D TECH^SROPRIN
"RTN","SROALLSP",27,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALLSP",28,0)
 Q
"RTN","SROALLSP",29,0)
PRINT ;
"RTN","SROALLSP",30,0)
 U IO S SRSS="",(SRTC,SRPAGE)=0 D HDR Q:SRSOUT
"RTN","SROALLSP",31,0)
 F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  S SRC=0 D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN SSCT Q:'SRTN!SRSOUT  D SET,CASE
"RTN","SROALLSP",32,0)
 Q:SRFLG  I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALLSP",33,0)
 W !!,"TOTAL CASES FOR ALL SPECIALTIES: ",SRTC
"RTN","SROALLSP",34,0)
 Q
"RTN","SROALLSP",35,0)
CASE ; print a case
"RTN","SROALLSP",36,0)
 S SRC=SRC+1,SRTC=SRTC+1
"RTN","SROALLSP",37,0)
 I $Y+5>IOSL D HDR Q:SRSOUT  W !!,"SURGICAL SPECIALTY: ",SRSS,!
"RTN","SROALLSP",38,0)
 W !,SRTN,?20,SRANM_"  "_VA("PID") I '$G(SRMNA) W ?67,STATUS
"RTN","SROALLSP",39,0)
 W ?107,SRTECH,!,SRDT,?20,SROPS(1)
"RTN","SROALLSP",40,0)
 I $G(SRMNA) S X=$P($G(^SRO(136,SRTN,0)),"^",2),SRCPT=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"CPT CODE MISSING") I X S Y=SRCPT D SSPRIN^SROCPT0 S SRCPT=Y W ?107,SRCPT
"RTN","SROALLSP",41,0)
 I $G(SRMNA),SRCPT="CPT CODE MISSING" W ?107,"NOT ENTERED"
"RTN","SROALLSP",42,0)
 I '$G(SRMNA),(SREXCL'="") W ?65,SREXCL I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALLSP",43,0)
 I SREXCL="",$D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALLSP",44,0)
 W ! Q
"RTN","SROALLSP",45,0)
SS ; print surgical specialty
"RTN","SROALLSP",46,0)
 I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALLSP",47,0)
 W !!,"SURGICAL SPECIALTY: ",SRSS,! Q
"RTN","SROALLSP",48,0)
HDR ; print heading
"RTN","SROALLSP",49,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALLSP",50,0)
 S SRHD=$S($G(SRMNA):"NON-ASSESSED MAJOR SURGICAL CASES BY SURGICAL SPECIALTY",1:"ALL MAJOR SURGICAL CASES BY SURGICAL SPECIALTY"),SRPAGE=SRPAGE+1
"RTN","SROALLSP",51,0)
 W:$Y @IOF W !,?(132-$L(SRHD)\2),SRHD,?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALLSP",52,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALLSP",53,0)
 W !!,"CASE #",?20,"PATIENT" I '$G(SRMNA) W ?67,"ASSESSMENT STATUS"
"RTN","SROALLSP",54,0)
 W ?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"OPERATIVE PROCEDURE(S)"
"RTN","SROALLSP",55,0)
 I '$G(SRMNA) W ?65,"EXCLUSION CRITERIA"
"RTN","SROALLSP",56,0)
 E  W ?107,"PRINCIPAL CPT CODE"
"RTN","SROALLSP",57,0)
 W ! F L=1:1:132 W "="
"RTN","SROALLSP",58,0)
 Q
"RTN","SROALLSP",59,0)
OTHER ; other operations
"RTN","SROALLSP",60,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,OPER=999,SROPERS=" ..."
"RTN","SROALLSP",61,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALLSP",62,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALLSP",63,0)
 Q
"RTN","SROALLSP",64,0)
LOOP ; break procedures
"RTN","SROALLSP",65,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALLSP",66,0)
 Q
"RTN","SROALLSP",67,0)
SSCT ; write specialty count
"RTN","SROALLSP",68,0)
 I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALLSP",69,0)
 W !!,"TOTAL ",SRSS,": ",SRC,! F L=1:1:132 W "-"
"RTN","SROALLSP",70,0)
 Q
"RTN","SROALM")
0^99^B21479758^B18411014
"RTN","SROALM",1,0)
SROALM ;BIR/ADM - LIST OF ASSESSMENTS MISSING INFORMATION ;03/08/06
"RTN","SROALM",2,0)
 ;;3.0; Surgery ;**38,50,88,142**;24 Jun 93
"RTN","SROALM",3,0)
 S (GRAND,SRNEW,SRSOUT,TOT)=0,(SRHDR,SRPAGE)=1,SRTITLE="COMPLETED/TRANSMITTED ASSESSMENTS MISSING INFORMATION" K ^TMP("SRA",$J)
"RTN","SROALM",4,0)
 I SRFLG,SRASP S SRSPEC=$P(^SRO(137.45,SRASP,0),"^")
"RTN","SROALM",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  D
"RTN","SROALM",6,0)
 .S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="C"!($P(SR("RA"),"^")="T"),$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALM",7,0)
 I SRSP S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""  D SRSD Q:SRSOUT  D:TOT TOT
"RTN","SROALM",8,0)
 I 'SRSP S SRNEW=1,(SRSD,TOT)=0 F  S SRSD=$O(^TMP("SRA",$J,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSD,SRTN)) Q:'SRTN  S SRA=^(SRTN) D CASE Q:SRSOUT
"RTN","SROALM",9,0)
 Q:SRSOUT  I SRSP,'SRFLG,GRAND D GRAND
"RTN","SROALM",10,0)
 I SRFLG,'GRAND S SRSS=SRSPEC D HDR,GRAND
"RTN","SROALM",11,0)
 I SRSP,'SRFLG,'GRAND S SRSS="" D HDR,GRAND
"RTN","SROALM",12,0)
 I 'SRSP,'GRAND S SRSS="" D HDR,GRAND
"RTN","SROALM",13,0)
 I 'SRSP,GRAND S SRSS="" D GRAND
"RTN","SROALM",14,0)
 Q
"RTN","SROALM",15,0)
UTL ; set up TMP global
"RTN","SROALM",16,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALM",17,0)
 I SRSP S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED"),^TMP("SRA",$J,SRSS,SRSD,SRTN)=SR("RA") Q
"RTN","SROALM",18,0)
 S ^TMP("SRA",$J,SRSD,SRTN)=SR("RA")
"RTN","SROALM",19,0)
 Q
"RTN","SROALM",20,0)
SRSD S SRNEW=1,(SRSD,TOT)=0 F  S SRSD=$O(^TMP("SRA",$J,SRSS,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRSD,SRTN)) Q:'SRTN  S SRA=^(SRTN) D CASE Q:SRSOUT
"RTN","SROALM",21,0)
 Q
"RTN","SROALM",22,0)
CASE I $P(SRA,"^",2)="N",$P(SRA,"^",6)="Y" S SRATYPE="NON-CARDIAC" D CHK^SROAUTL
"RTN","SROALM",23,0)
 I $P(SRA,"^",2)="N",$P(SRA,"^",6)="N" S SRATYPE="EXCLUDED" D CHK^SROAUTL3
"RTN","SROALM",24,0)
 I $P(SRA,"^",2)="C" S SRATYPE="CARDIAC" D CHK^SROAUTLC
"RTN","SROALM",25,0)
 S SRFLD="" I $O(SRX(SRFLD))'="" S TOT=TOT+1,GRAND=GRAND+1 D PRINT
"RTN","SROALM",26,0)
 Q
"RTN","SROALM",27,0)
PRINT ; print assessments
"RTN","SROALM",28,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALM",29,0)
 I $Y+5>IOSL!SRNEW D PAGE I SRSOUT Q
"RTN","SROALM",30,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALM",31,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALM",32,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALM",33,0)
 K SROPS,MM,MMM S:$L(SROPER)<63 SROPS(1)=SROPER I $L(SROPER)>62 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALM",34,0)
 S SRSTATUS=$S($P(SRA,"^")="T":"TRANSMITTED",1:"COMPLETE"),Y=SRSD D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALM",35,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALM",36,0)
 W !,SRTN,?18,SRANM_" "_VA("PID"),?53,SRATYPE,?68,SRSTATUS,!,SRDT F I=1:1 Q:'$D(SROPS(I))  W ?18,SROPS(I),!
"RTN","SROALM",37,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALM",38,0)
 W ?18,"CPT Code: "_SRCPTT,!
"RTN","SROALM",39,0)
 S CNT=1 W ?5,"Missing information:"
"RTN","SROALM",40,0)
 I '$P($G(^SRO(136,SRTN,10)),"^")!('$P($G(^SRO(136,SRTN,0)),"^",2))!('$P($G(^SRO(136,SRTN,0)),"^",3)) W !,$J(CNT_". ",8),"The final coding for Procedure and Diagnosis is not complete." S CNT=CNT+1
"RTN","SROALM",41,0)
 F  S SRFLD=$O(SRX(SRFLD)) Q:SRFLD=""  D:$Y+5>IOSL PAGE Q:SRSOUT  W !,$J(CNT_". ",8),SRX(SRFLD) S CNT=CNT+1
"RTN","SROALM",42,0)
 I 'SRSOUT W ! F LINE=1:1:80 W "-"
"RTN","SROALM",43,0)
 Q
"RTN","SROALM",44,0)
OTHER ; other operations
"RTN","SROALM",45,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALM",46,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALM",47,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALM",48,0)
 Q
"RTN","SROALM",49,0)
LOOP ; break procedures
"RTN","SROALM",50,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<63  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALM",51,0)
 Q
"RTN","SROALM",52,0)
PAGE I $E(IOST)="P"!SRHDR G HDR
"RTN","SROALM",53,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALM",54,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALM",55,0)
HDR ; print heading
"RTN","SROALM",56,0)
 W @IOF,!,?(80-$L(SRTITLE)\2),SRTITLE,?70,$J("PAGE "_SRPAGE,9) W:$E(IOST)="P" !,?(80-$L(SRINST)\2),SRINST W !,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALM",57,0)
 W:$E(IOST)="P" !,?(80-$L(SRPRINT)\2),SRPRINT I SRSP,SRSS'="" W !!,"** "_SRSS
"RTN","SROALM",58,0)
 W !!,"ASSESSMENT #",?18,"PATIENT",?53,"TYPE",?68,"STATUS",!,"OPERATION DATE",?18,"OPERATION(S)",! F LINE=1:1:80 W "="
"RTN","SROALM",59,0)
 S SRHDR=0,SRNEW=0,SRPAGE=SRPAGE+1
"RTN","SROALM",60,0)
 Q
"RTN","SROALM",61,0)
TOT W !!,"TOTAL FOR "_SRSS_": ",TOT
"RTN","SROALM",62,0)
 Q
"RTN","SROALM",63,0)
GRAND I 'SRSP W !!,"TOTAL: ",GRAND Q
"RTN","SROALM",64,0)
 I SRSP,'SRFLG W !!,"TOTAL FOR ALL SPECIALTIES: ",GRAND Q
"RTN","SROALM",65,0)
 I SRSP,SRFLG S SRSS=SRSPEC D TOT
"RTN","SROALM",66,0)
 Q
"RTN","SROALSS")
0^60^B17249054^B18472594
"RTN","SROALSS",1,0)
SROALSS ;BIR/ADM - ALL CASES BY SPECIALTY ;03/08/06
"RTN","SROALSS",2,0)
 ;;3.0; Surgery ;**38,47,50,100,142**;24 Jun 93
"RTN","SROALSS",3,0)
 I $E(IOST)="P" D ^SROALSSP Q
"RTN","SROALSS",4,0)
START S SRSOUT=0 K ^TMP("SRA",$J)
"RTN","SROALSS",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALSS",6,0)
 D PRINT Q
"RTN","SROALSS",7,0)
UTL ; write to ^TMP("SRA,$J)
"RTN","SROALSS",8,0)
 S SRA(0)=^SRF(SRTN,0)
"RTN","SROALSS",9,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALSS",10,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALSS",11,0)
 S X=$P($G(^SRF(SRTN,.2)),"^",12) I 'X Q
"RTN","SROALSS",12,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALSS",13,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSS",14,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALSS",15,0)
 Q
"RTN","SROALSS",16,0)
SET ; set variables
"RTN","SROALSS",17,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALSS",18,0)
 S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"EXCLUSION")
"RTN","SROALSS",19,0)
 S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALSS",20,0)
 I SREXCL="",STATUS="EXCLUSION" S STATUS="NO ASSESSMENT"
"RTN","SROALSS",21,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALSS",22,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALSS",23,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROALSS",24,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALSS",25,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALSS",26,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALSS",27,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSS",28,0)
 D TECH^SROPRIN
"RTN","SROALSS",29,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALSS",30,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>18 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALSS",31,0)
 S SRDOC=Y
"RTN","SROALSS",32,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALSS",33,0)
 Q
"RTN","SROALSS",34,0)
PRINT ;
"RTN","SROALSS",35,0)
 U IO S SRSS="",SRTC=0 D HDR
"RTN","SROALSS",36,0)
 F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  S SRC=0 D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN SSCT Q:'SRTN!SRSOUT  D SET,CASE
"RTN","SROALSS",37,0)
 Q:SRSOUT!SRFLG  I $Y+5>IOSL D PAGE Q:SRSOUT  D HDR
"RTN","SROALSS",38,0)
 W !!,"TOTAL CASES FOR ALL SPECIALTIES: ",SRTC
"RTN","SROALSS",39,0)
 Q
"RTN","SROALSS",40,0)
CASE ; print a case
"RTN","SROALSS",41,0)
 S SRC=SRC+1,SRTC=SRTC+1
"RTN","SROALSS",42,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALSS",43,0)
 W !,SRTN,?20,SRANM_"  "_VA("PID"),?55,STATUS,!,SRDT,?20,SROPS(1),?55,SRTECH
"RTN","SROALSS",44,0)
 W !,SRDOC W:$D(SROPS(2)) ?20,SROPS(2) W ?55,SREXCL
"RTN","SROALSS",45,0)
 I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALSS",46,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROALSS",47,0)
 W ! Q
"RTN","SROALSS",48,0)
SS ; print surgical specialty
"RTN","SROALSS",49,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALSS",50,0)
 W !,"** SURGICAL SPECIALTY: ",SRSS," **",! Q
"RTN","SROALSS",51,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALSS",52,0)
 I X["?" W !!,"If you want to continue listing assessments, enter <RET>.  Enter '^' to",!,"return to the menu." G PAGE
"RTN","SROALSS",53,0)
HDR ; print heading
"RTN","SROALSS",54,0)
 S SRHD="ALL SURGICAL CASES BY SURGICAL SPECIALTY"
"RTN","SROALSS",55,0)
 W @IOF,!,?(80-$L(SRHD)\2),SRHD,!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALSS",56,0)
 W !!,"CASE #",?20,"PATIENT",?55,"ASSESSMENT STATUS",!,"OPERATION DATE",?20,"PRINCIPAL OPERATIVE PROCEDURE",?55,"ANESTHESIA TECHNIQUE",!,"SURGEON",?55,"EXCLUSION CRITERIA",! F L=1:1:80 W "="
"RTN","SROALSS",57,0)
 W ! Q
"RTN","SROALSS",58,0)
OTHER ; other operations
"RTN","SROALSS",59,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,OPER=999,SROPERS=" ..."
"RTN","SROALSS",60,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALSS",61,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALSS",62,0)
 Q
"RTN","SROALSS",63,0)
LOOP ; break procedures
"RTN","SROALSS",64,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALSS",65,0)
 Q
"RTN","SROALSS",66,0)
SSCT ; write specialty count
"RTN","SROALSS",67,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALSS",68,0)
 W !,"TOTAL ",SRSS,": ",SRC,! F L=1:1:80 W "-"
"RTN","SROALSS",69,0)
 Q
"RTN","SROALSSP")
0^61^B17066208^B18279057
"RTN","SROALSSP",1,0)
SROALSSP ;BIR/ADM - ASSESSMENTS BY SPECIALTY (PRINTER) ;03/08/06
"RTN","SROALSSP",2,0)
 ;;3.0; Surgery ;**32,47,50,100,142**;24 Jun 93
"RTN","SROALSSP",3,0)
START S SRSOUT=0 K ^TMP("SRA",$J)
"RTN","SROALSSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALSSP",5,0)
 D PRINT Q
"RTN","SROALSSP",6,0)
UTL ; write to ^TMP("SRA,$J)
"RTN","SROALSSP",7,0)
 S SRA(0)=^SRF(SRTN,0)
"RTN","SROALSSP",8,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALSSP",9,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALSSP",10,0)
 S X=$P($G(^SRF(SRTN,.2)),"^",12) I 'X Q
"RTN","SROALSSP",11,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALSSP",12,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSSP",13,0)
 S TYPE=$P($G(^SRF(SRTN,"RA")),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALSSP",14,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALSSP",15,0)
 Q
"RTN","SROALSSP",16,0)
SET ; set variables
"RTN","SROALSSP",17,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALSSP",18,0)
 S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"EXCLUSION")
"RTN","SROALSSP",19,0)
 S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALSSP",20,0)
 I SREXCL="",STATUS="EXCLUSION" S STATUS="NO ASSESSMENT"
"RTN","SROALSSP",21,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALSSP",22,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROALSSP",23,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALSSP",24,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALSSP",25,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALSSP",26,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSSP",27,0)
 D TECH^SROPRIN
"RTN","SROALSSP",28,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALSSP",29,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALSSP",30,0)
 S SRDOC=Y
"RTN","SROALSSP",31,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALSSP",32,0)
 Q
"RTN","SROALSSP",33,0)
PRINT ;
"RTN","SROALSSP",34,0)
 U IO S SRSS="",(SRTC,SRPAGE)=0 D HDR Q:SRSOUT
"RTN","SROALSSP",35,0)
 F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  S SRC=0 D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN SSCT Q:'SRTN!SRSOUT  D SET,CASE
"RTN","SROALSSP",36,0)
 Q:SRFLG  I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALSSP",37,0)
 W !!,"TOTAL MAJOR CASES FOR ALL SPECIALTIES: ",SRTC
"RTN","SROALSSP",38,0)
 Q
"RTN","SROALSSP",39,0)
CASE ; print a case
"RTN","SROALSSP",40,0)
 S SRC=SRC+1,SRTC=SRTC+1
"RTN","SROALSSP",41,0)
 I $Y+5>IOSL D HDR Q:SRSOUT  W !!,"SURGICAL SPECIALTY: ",SRSS,!
"RTN","SROALSSP",42,0)
 W !,SRTN,?20,SRANM_"  "_VA("PID"),?67,STATUS,?107,SRTECH,!,SRDT,?20,SROPS(1),?67,SREXCL W ?107,SRDOC
"RTN","SROALSSP",43,0)
 I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALSSP",44,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROALSSP",45,0)
 W ! Q
"RTN","SROALSSP",46,0)
SS ; print surgical specialty
"RTN","SROALSSP",47,0)
 I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALSSP",48,0)
 W !!,"SURGICAL SPECIALTY: ",SRSS,! Q
"RTN","SROALSSP",49,0)
HDR ; print heading
"RTN","SROALSSP",50,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALSSP",51,0)
 S SRHD="ALL SURGICAL CASES BY SURGICAL SPECIALTY",SRPAGE=SRPAGE+1
"RTN","SROALSSP",52,0)
 W:$Y @IOF W !,?(132-$L(SRHD)\2),SRHD,?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALSSP",53,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALSSP",54,0)
 W !!,"CASE #",?20,"PATIENT",?67,"ASSESSMENT STATUS",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"PRINCIPAL OPERATIVE PROCEDURE",?67,"EXCLUSION CRITERIA",?107,"SURGEON",! F L=1:1:132 W "="
"RTN","SROALSSP",55,0)
 Q
"RTN","SROALSSP",56,0)
OTHER ; other operations
"RTN","SROALSSP",57,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,OPER=999,SROPERS=" ..."
"RTN","SROALSSP",58,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALSSP",59,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALSSP",60,0)
 Q
"RTN","SROALSSP",61,0)
LOOP ; break procedures
"RTN","SROALSSP",62,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALSSP",63,0)
 Q
"RTN","SROALSSP",64,0)
SSCT ; write specialty count
"RTN","SROALSSP",65,0)
 I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SROALSSP",66,0)
 W !!,"TOTAL ",SRSS,": ",SRC,! F L=1:1:132 W "-"
"RTN","SROALSSP",67,0)
 Q
"RTN","SROALST")
0^62^B13078748^B14176066
"RTN","SROALST",1,0)
SROALST ;BIR/MAM - ALL ASSESSMENTS ;03/08/06
"RTN","SROALST",2,0)
 ;;3.0; Surgery ;**38,47,50,100,142**;24 Jun 93
"RTN","SROALST",3,0)
 I $E(IOST)="P" D ^SROALSTP Q
"RTN","SROALST",4,0)
 S SRSOUT=0 D HDR F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALST",5,0)
 Q
"RTN","SROALST",6,0)
SET ; print assessments
"RTN","SROALST",7,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALST",8,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALST",9,0)
 S SRA(0)=^SRF(SRTN,0)
"RTN","SROALST",10,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALST",11,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALST",12,0)
 S X=$P($G(^SRF(SRTN,.2)),"^",12) I 'X Q
"RTN","SROALST",13,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALST",14,0)
 S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"EXCLUSION")
"RTN","SROALST",15,0)
 S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALST",16,0)
 I SREXCL="",STATUS="EXCLUSION" S STATUS="NO ASSESSMENT"
"RTN","SROALST",17,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROALST",18,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALST",19,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALST",20,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALST",21,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALST",22,0)
 D TECH^SROPRIN
"RTN","SROALST",23,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALST",24,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>18 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALST",25,0)
 S SRDOC=Y
"RTN","SROALST",26,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALST",27,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH,!,STATUS W:$D(SROPS(2)) ?20,SROPS(2) W ?55,SREXCL
"RTN","SROALST",28,0)
 W !,SRDOC I $D(SROPS(3)) W ?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALST",29,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROALST",30,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALST",31,0)
 Q
"RTN","SROALST",32,0)
OTHER ; other operations
"RTN","SROALST",33,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALST",34,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALST",35,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALST",36,0)
 Q
"RTN","SROALST",37,0)
LOOP ; break procedures
"RTN","SROALST",38,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALST",39,0)
 Q
"RTN","SROALST",40,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALST",41,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALST",42,0)
HDR S SRHD="ALL SURGICAL CASES"
"RTN","SROALST",43,0)
 W @IOF,!,?(80-$L(SRHD)\2),SRHD,!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SROALST",44,0)
 W !!,"CASE #",?20,"PATIENT",?55,"SURGICAL SPECIALTY",!,"OPERATION DATE",?20,"PRINCIPAL OPERATION",?55,"ANESTHESIA TECHNIQUE",!,"ASSESSMENT STATUS",?55,"EXCLUSION CRITERIA",!,"SURGEON",! F LINE=1:1:80 W "="
"RTN","SROALST",45,0)
 Q
"RTN","SROALSTP")
0^63^B12197759^B13266033
"RTN","SROALSTP",1,0)
SROALSTP ;BIR/MAM - ALL CASES ;03/08/06
"RTN","SROALSTP",2,0)
 ;;3.0; Surgery ;**32,47,50,100,142**;24 Jun 93
"RTN","SROALSTP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALSTP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALSTP",5,0)
 Q
"RTN","SROALSTP",6,0)
SET ; print assessments
"RTN","SROALSTP",7,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALSTP",8,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROALSTP",9,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALSTP",10,0)
 S CAN=$P($G(^SRF(SRTN,30)),"^") I CAN Q
"RTN","SROALSTP",11,0)
 S CAN=$P($G(^SRF(SRTN,31)),"^",8) I CAN'="" Q
"RTN","SROALSTP",12,0)
 S X=$P($G(^SRF(SRTN,.2)),"^",12) I 'X Q
"RTN","SROALSTP",13,0)
 S SRA("RA")=$G(^SRF(SRTN,"RA")),X=$P(SRA("RA"),"^"),STATUS=$S(X="I":"INCOMPLETE",X="C":"COMPLETED",X="T":"TRANSMITTED",1:"EXCLUSION")
"RTN","SROALSTP",14,0)
 S (SREXCL,Y)=$P(SRA("RA"),"^",7),C=$P(^DD(130,102,0),"^",2) D Y^DIQ S SREXCL=Y
"RTN","SROALSTP",15,0)
 I SREXCL="",STATUS="EXCLUSION" S STATUS="NO ASSESSMENT"
"RTN","SROALSTP",16,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROALSTP",17,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALSTP",18,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALSTP",19,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALSTP",20,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALSTP",21,0)
 D TECH^SROPRIN
"RTN","SROALSTP",22,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALSTP",23,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROALSTP",24,0)
 S SRDOC=Y
"RTN","SROALSTP",25,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALSTP",26,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1),?67,STATUS,?107,SREXCL,!
"RTN","SROALSTP",27,0)
 W:$D(SROPS(2)) ?20,SROPS(2) W ?107,SRDOC
"RTN","SROALSTP",28,0)
 I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALSTP",29,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROALSTP",30,0)
 W !
"RTN","SROALSTP",31,0)
 Q
"RTN","SROALSTP",32,0)
OTHER ; other operations
"RTN","SROALSTP",33,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALSTP",34,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALSTP",35,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALSTP",36,0)
 Q
"RTN","SROALSTP",37,0)
LOOP ; break procedures
"RTN","SROALSTP",38,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALSTP",39,0)
 Q
"RTN","SROALSTP",40,0)
HDR ; print heading
"RTN","SROALSTP",41,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALSTP",42,0)
 W:$Y @IOF W !,?56,"ALL SURGICAL CASES",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALSTP",43,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALSTP",44,0)
 W !!,"CASE #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"PRINCIPAL OPERATIVE PROCEDURE",?67,"ASSESSMENT STATUS",?107,"EXCLUSION CRITERIA",!,?107,"SURGEON",!
"RTN","SROALSTP",45,0)
 F LINE=1:1:132 W "="
"RTN","SROALSTP",46,0)
 Q
"RTN","SROALT")
0^100^B10817407^B9914980
"RTN","SROALT",1,0)
SROALT ;BIR/MAM - TRANSMITTED ASSESSMENTS ;03/08/06
"RTN","SROALT",2,0)
 ;;3.0; Surgery ;**38,50,142**;24 Jun 93
"RTN","SROALT",3,0)
 I $E(IOST)="P" D ^SROALTP Q
"RTN","SROALT",4,0)
 S SRSOUT=0 D HDR
"RTN","SROALT",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="T",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALT",6,0)
 Q
"RTN","SROALT",7,0)
SET ; print assessments
"RTN","SROALT",8,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALT",9,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALT",10,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALT",11,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALT",12,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALT",13,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALT",14,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALT",15,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALT",16,0)
 D TECH^SROPRIN
"RTN","SROALT",17,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALT",18,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALT",19,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3)
"RTN","SROALT",20,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROALT",21,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALT",22,0)
 Q
"RTN","SROALT",23,0)
OTHER ; other operations
"RTN","SROALT",24,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALT",25,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALT",26,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALT",27,0)
 Q
"RTN","SROALT",28,0)
LOOP ; break procedures
"RTN","SROALT",29,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALT",30,0)
 Q
"RTN","SROALT",31,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALT",32,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALT",33,0)
HDR W @IOF,!,?26,"TRANSMITTED RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"SURGICAL SPECIALTY",!,"OPERATION DATE",?20,"PRINCIPAL OPERATION",?55,"ANESTHESIA TECHNIQUE",! F LINE=1:1:80 W "="
"RTN","SROALT",34,0)
 Q
"RTN","SROALTP")
0^104^B10106538^B9228161
"RTN","SROALTP",1,0)
SROALTP ;BIR/MAM - TRANSMITTED ASSESSMENTS (PRINTER) ;03/08/06
"RTN","SROALTP",2,0)
 ;;3.0; Surgery ;**32,50,142**;24 Jun 93
"RTN","SROALTP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALTP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="T",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROALTP",5,0)
 Q
"RTN","SROALTP",6,0)
SET ; print assessments
"RTN","SROALTP",7,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALTP",8,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROALTP",9,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALTP",10,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F  S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALTP",11,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALTP",12,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALTP",13,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALTP",14,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALTP",15,0)
 D TECH^SROPRIN
"RTN","SROALTP",16,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALTP",17,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALTP",18,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1) I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROALTP",19,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROALTP",20,0)
 W !
"RTN","SROALTP",21,0)
 Q
"RTN","SROALTP",22,0)
OTHER ; other operations
"RTN","SROALTP",23,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALTP",24,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALTP",25,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALTP",26,0)
 Q
"RTN","SROALTP",27,0)
LOOP ; break procedures
"RTN","SROALTP",28,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALTP",29,0)
 Q
"RTN","SROALTP",30,0)
HDR ; print heading
"RTN","SROALTP",31,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALTP",32,0)
 W:$Y @IOF W !,?52,"TRANSMITTED RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALTP",33,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALTP",34,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"PRINCIPAL OPERATIVE PROCEDURE",! F LINE=1:1:132 W "="
"RTN","SROALTP",35,0)
 Q
"RTN","SROALTS")
0^101^B13156100^B12162601
"RTN","SROALTS",1,0)
SROALTS ;BIR/MAM - TRANSMITTED ASSESSMENTS ;03/08/06
"RTN","SROALTS",2,0)
 ;;3.0; Surgery ;**38,50,142**;24 Jun 93
"RTN","SROALTS",3,0)
 I $E(IOST)="P" D ^SROALTSP Q
"RTN","SROALTS",4,0)
 S SRSOUT=0 D HDR
"RTN","SROALTS",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="T",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALTS",6,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F J=0:0 S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) Q:'SRTN!SRSOUT  D SET
"RTN","SROALTS",7,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROALTS",8,0)
 Q
"RTN","SROALTS",9,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROALTS",10,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALTS",11,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALTS",12,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALTS",13,0)
 Q
"RTN","SROALTS",14,0)
SET ; print assessments
"RTN","SROALTS",15,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALTS",16,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROALTS",17,0)
 S SR("RA")=^SRF(SRTN,"RA"),SRAT="",Y=$E($P(SR("RA"),"^",4),1,7) I Y D D^DIQ S SRAT=Y
"RTN","SROALTS",18,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALTS",19,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROALTS",20,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALTS",21,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALTS",22,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALTS",23,0)
 D TECH^SROPRIN
"RTN","SROALTS",24,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALTS",25,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALTS",26,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,SRAT,!,SRDT,?20,SROPS(1),?55,SRTECH S SRAO=1 F I=0:0 S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROALTS",27,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROALTS",28,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROALTS",29,0)
 Q
"RTN","SROALTS",30,0)
OTHER ; other operations
"RTN","SROALTS",31,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALTS",32,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALTS",33,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALTS",34,0)
 Q
"RTN","SROALTS",35,0)
LOOP ; break procedures
"RTN","SROALTS",36,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALTS",37,0)
 Q
"RTN","SROALTS",38,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROALTS",39,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROALTS",40,0)
HDR W @IOF,!,?26,"TRANSMITTED RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"TRANSMISSION DATE",!,"OPERATION DATE",?20,"PRINCIPAL OPERATION",?55,"ANESTHESIA TECHNIQUE",! F LINE=1:1:80 W "="
"RTN","SROALTS",41,0)
 Q
"RTN","SROALTS",42,0)
SS ; print surgical specialty
"RTN","SROALTS",43,0)
 I $Y+5>IOSL D PAGE Q:SRSOUT
"RTN","SROALTS",44,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALTS",45,0)
 Q
"RTN","SROALTSP")
0^102^B12292692^B11325590
"RTN","SROALTSP",1,0)
SROALTSP ;BIR/MAM - TRANSMITTED ASSESSMENTS (PRINTER) ;03/08/06
"RTN","SROALTSP",2,0)
 ;;3.0; Surgery ;**32,50,142**;24 Jun 93
"RTN","SROALTSP",3,0)
 K ^TMP("SRA",$J) S SRPAGE=0,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROALTSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="T",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROALTSP",5,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN LINE Q:'SRTN!SRSOUT  D SET
"RTN","SROALTSP",6,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROALTSP",7,0)
 Q
"RTN","SROALTSP",8,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROALTSP",9,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROALTSP",10,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROALTSP",11,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROALTSP",12,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROALTSP",13,0)
 Q
"RTN","SROALTSP",14,0)
SET ; print assessments
"RTN","SROALTSP",15,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROALTSP",16,0)
 I $Y+5>IOSL D HDR I SRSOUT Q
"RTN","SROALTSP",17,0)
 S SR("RA")=^SRF(SRTN,"RA"),SRAT="",Y=$E($P(SR("RA"),"^",4),1,7) I Y D D^DIQ S SRAT=Y
"RTN","SROALTSP",18,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROALTSP",19,0)
 S SROPER=$P(^SRF(SRTN,"OP"),"^") I $O(^SRF(SRTN,13,0)) S SROTHER=0 F  S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROALTSP",20,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROALTSP",21,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROALTSP",22,0)
 D TECH^SROPRIN
"RTN","SROALTSP",23,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROALTSP",24,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROALTSP",25,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,SRAT,?107,SRTECH,!,SRDT,?20,SROPS(1) S SRAO=1 F  S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROALTSP",26,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROALTSP",27,0)
 W ! Q
"RTN","SROALTSP",28,0)
OTHER ; other operations
"RTN","SROALTSP",29,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROALTSP",30,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROALTSP",31,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROALTSP",32,0)
 Q
"RTN","SROALTSP",33,0)
LOOP ; break procedures
"RTN","SROALTSP",34,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<44  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROALTSP",35,0)
 Q
"RTN","SROALTSP",36,0)
HDR ; print heading
"RTN","SROALTSP",37,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROALTSP",38,0)
 S SRPAGE=SRPAGE+1 W:$Y @IOF W !,?52,"TRANSMITTED RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROALTSP",39,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROALTSP",40,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"TRANSMISSION DATE",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"PRINCIPAL OPERATIVE PROCEDURE",! F LINE=1:1:132 W "="
"RTN","SROALTSP",41,0)
 Q
"RTN","SROALTSP",42,0)
SS ;print surgical specialty
"RTN","SROALTSP",43,0)
 I $Y+5>IOSL D HDR
"RTN","SROALTSP",44,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROALTSP",45,0)
 Q
"RTN","SROALTSP",46,0)
LINE W ! F L=1:1:132 W "-"
"RTN","SROALTSP",47,0)
 Q
"RTN","SROANT")
0^69^B11065524^B12088246
"RTN","SROANT",1,0)
SROANT ;BIR/MAM - INCOMPLETE ASSESSMENTS ;03/08/06
"RTN","SROANT",2,0)
 ;;3.0; Surgery ;**38,50,100,142**;24 Jun 93
"RTN","SROANT",3,0)
 I $E(IOST)="P" D ^SROANTP Q
"RTN","SROANT",4,0)
 S SRSOUT=0 D HDR
"RTN","SROANT",5,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="I",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROANT",6,0)
 Q
"RTN","SROANT",7,0)
SET ; print assessments
"RTN","SROANT",8,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROANT",9,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROANT",10,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROANT",11,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROANT",12,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROANT",13,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROANT",14,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F  S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROANT",15,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROANT",16,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROANT",17,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROANT",18,0)
 D TECH^SROPRIN
"RTN","SROANT",19,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROANT",20,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>18 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROANT",21,0)
 S SRDOC=Y
"RTN","SROANT",22,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROANT",23,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,$P(SRSS,"("),!,SRDT,?20,SROPS(1),?55,SRTECH,!,SRDOC I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3)
"RTN","SROANT",24,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROANT",25,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROANT",26,0)
 Q
"RTN","SROANT",27,0)
OTHER ; other operations
"RTN","SROANT",28,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROANT",29,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROANT",30,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROANT",31,0)
 Q
"RTN","SROANT",32,0)
LOOP ; break procedures
"RTN","SROANT",33,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROANT",34,0)
 Q
"RTN","SROANT",35,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROANT",36,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROANT",37,0)
HDR W @IOF,!,?26,"INCOMPLETE RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"SURGICAL SPECIALTY"
"RTN","SROANT",38,0)
 W !,"OPERATION DATE",?20,"PRINCIPAL OPERATION",?55,"ANESTHESIA TECHNIQUE",!,"SURGEON",! F LINE=1:1:80 W "="
"RTN","SROANT",39,0)
 Q
"RTN","SROANTP")
0^70^B11267319^B12272179
"RTN","SROANTP",1,0)
SROANTP ;BIR/MAM - INCOMPLETE ASSESSMENTS (PRINTER) ;03/08/06
"RTN","SROANTP",2,0)
 ;;3.0; Surgery ;**32,50,100,142**;24 Jun 93
"RTN","SROANTP",3,0)
 S SRPAGE=1,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROANTP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="I",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROANTP",5,0)
 Q
"RTN","SROANTP",6,0)
SET ; print assessments
"RTN","SROANTP",7,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROANTP",8,0)
 I $Y+5>IOSL S SRPAGE=SRPAGE+1 D HDR I SRSOUT Q
"RTN","SROANTP",9,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROANTP",10,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROANTP",11,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROANTP",12,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F  S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROANTP",13,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROANTP",14,0)
 K SROPS,MM,MMM S:$L(SROPER)<81 SROPS(1)=SROPER I $L(SROPER)>80 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROANTP",15,0)
 S SRSS=$P(SRA(0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROANTP",16,0)
 S TYPE=$P(SR("RA"),"^",2) I SRSS="SPECIALTY NOT ENTERED",TYPE="C" S SRSS="N/A"
"RTN","SROANTP",17,0)
 D TECH^SROPRIN
"RTN","SROANTP",18,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROANTP",19,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROANTP",20,0)
 S SRDOC=Y
"RTN","SROANTP",21,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROANTP",22,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,$P(SRSS,"("),?107,SRTECH,!,SRDT,?20,SROPS(1),?107,SRDOC I $D(SROPS(2)) W !,?20,SROPS(2) I $D(SROPS(3)) W !,?20,SROPS(3) I $D(SROPS(4)) W !,?20,SROPS(4)
"RTN","SROANTP",23,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROANTP",24,0)
 W !
"RTN","SROANTP",25,0)
 Q
"RTN","SROANTP",26,0)
OTHER ; other operations
"RTN","SROANTP",27,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>165 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROANTP",28,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROANTP",29,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROANTP",30,0)
 Q
"RTN","SROANTP",31,0)
LOOP ; break procedures
"RTN","SROANTP",32,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<81  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROANTP",33,0)
 Q
"RTN","SROANTP",34,0)
HDR ; print heading
"RTN","SROANTP",35,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROANTP",36,0)
 W:$Y @IOF W !,?53,"INCOMPLETE RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROANTP",37,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROANTP",38,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"SURGICAL SPECIALTY",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"PRINCIPAL OPERATIVE PROCEDURE",?107,"SURGEON",! F LINE=1:1:132 W "="
"RTN","SROANTP",39,0)
 Q
"RTN","SROANTS")
0^71^B13577952^B14690682
"RTN","SROANTS",1,0)
SROANTS ;BIR/MAM - INCOMPLETE ASSESSMENTS ;03/08/06
"RTN","SROANTS",2,0)
 ;;3.0; Surgery ;**38,50,100,142**;24 Jun 93
"RTN","SROANTS",3,0)
 I $E(IOST)="P" D ^SROANTSP Q
"RTN","SROANTS",4,0)
 K ^TMP("SRA",$J)
"RTN","SROANTS",5,0)
 S SRSOUT=0 D HDR
"RTN","SROANTS",6,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="I",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROANTS",7,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) Q:'SRTN!SRSOUT  D SET
"RTN","SROANTS",8,0)
 I '$D(^TMP("SRA",$J)) W $$NODATA^SROUTL0()
"RTN","SROANTS",9,0)
 Q
"RTN","SROANTS",10,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROANTS",11,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROANTS",12,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROANTS",13,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROANTS",14,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROANTS",15,0)
 Q
"RTN","SROANTS",16,0)
SET ; print assessments
"RTN","SROANTS",17,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROANTS",18,0)
 I $Y+5>IOSL D PAGE I SRSOUT Q
"RTN","SROANTS",19,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROANTS",20,0)
 I $L(SRANM)>19 S SRANM=$P(SRANM,",")_","_$E($P(SRANM,",",2))_"."
"RTN","SROANTS",21,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROANTS",22,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROANTS",23,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROANTS",24,0)
 K SROPS,MM,MMM S:$L(SROPER)<34 SROPS(1)=SROPER I $L(SROPER)>33 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROANTS",25,0)
 D TECH^SROPRIN
"RTN","SROANTS",26,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROANTS",27,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROANTS",28,0)
 S SRDOC=Y
"RTN","SROANTS",29,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROANTS",30,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?55,SRTECH,!,SRDT,?20,SROPS(1),?55,SRDOC S SRAO=1 F  S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?20,SROPS(SRAO)
"RTN","SROANTS",31,0)
 W !,?20,"CPT Code: "_SRCPTT
"RTN","SROANTS",32,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROANTS",33,0)
 Q
"RTN","SROANTS",34,0)
OTHER ; other operations
"RTN","SROANTS",35,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROANTS",36,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROANTS",37,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROANTS",38,0)
 Q
"RTN","SROANTS",39,0)
LOOP ; break procedures
"RTN","SROANTS",40,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<34  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROANTS",41,0)
 Q
"RTN","SROANTS",42,0)
PAGE W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROANTS",43,0)
 I X["?" W !!,"If you want to continue listing incomplete assessments, enter <RET>.  Enter",!,"'^' to return to the menu." G PAGE
"RTN","SROANTS",44,0)
HDR W @IOF,!!,?26,"INCOMPLETE RISK ASSESSMENTS",!,?(80-$L(SRFRTO)\2),SRFRTO,!!,"ASSESSMENT #",?20,"PATIENT",?55,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?20,"PRINCIPAL OPERATION",?55,"SURGEON",! F LINE=1:1:80 W "="
"RTN","SROANTS",45,0)
 Q
"RTN","SROANTS",46,0)
SS ; print surgical specialty
"RTN","SROANTS",47,0)
 I $Y+8>IOSL D PAGE Q:SRSOUT
"RTN","SROANTS",48,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROANTS",49,0)
 Q
"RTN","SROANTSP")
0^72^B12522927^B13524175
"RTN","SROANTSP",1,0)
SROANTSP ;BIR/MAM - INCOMPLETE ASSESSMENTS (PRINTER) ;03/08/06
"RTN","SROANTSP",2,0)
 ;;3.0; Surgery ;**32,50,100,142**;24 Jun 93
"RTN","SROANTSP",3,0)
 K ^TMP("SRA",$J) S SRPAGE=0,(SRSOUT,SRDFN)=0 D HDR Q:SRSOUT
"RTN","SROANTSP",4,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN!SRSOUT  S SR("RA")=$G(^SRF(SRTN,"RA")) I $P(SR("RA"),"^")="I",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTL
"RTN","SROANTSP",5,0)
 S SRSS="" F  S SRSS=$O(^TMP("SRA",$J,SRSS)) Q:SRSS=""!SRSOUT  D SS S SRTN=0 F  S SRTN=$O(^TMP("SRA",$J,SRSS,SRTN)) D:'SRTN LINE Q:'SRTN!SRSOUT  D SET
"RTN","SROANTSP",6,0)
 Q
"RTN","SROANTSP",7,0)
UTL ; write to ^TMP("SRA",$J)
"RTN","SROANTSP",8,0)
 I $P(SR("RA"),"^",6)="N" Q
"RTN","SROANTSP",9,0)
 I SRFLG,$P(^SRF(SRTN,0),"^",4)'=SRASP Q
"RTN","SROANTSP",10,0)
 S SRSS=$P(^SRF(SRTN,0),"^",4),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SRECIALTY NOT ENTERED")
"RTN","SROANTSP",11,0)
 S ^TMP("SRA",$J,SRSS,SRTN)=""
"RTN","SROANTSP",12,0)
 Q
"RTN","SROANTSP",13,0)
SET ; print assessments
"RTN","SROANTSP",14,0)
 K SRCPTT S SRCPTT="NOT ENTERED"
"RTN","SROANTSP",15,0)
 I $Y+5>IOSL D HDR I SRSOUT Q
"RTN","SROANTSP",16,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANM=VADM(1),SRASSN=VA("PID") K VADM
"RTN","SROANTSP",17,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^")
"RTN","SROANTSP",18,0)
 I $O(^SRF(SRTN,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SRTN,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROANTSP",19,0)
 S X=$P($G(^SRF(SRTN,"RA")),"^",2) I X="C" S SROPER="* "_SROPER
"RTN","SROANTSP",20,0)
 K SROPS,MM,MMM S:$L(SROPER)<36 SROPS(1)=SROPER I $L(SROPER)>35 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROANTSP",21,0)
 D TECH^SROPRIN
"RTN","SROANTSP",22,0)
 S Y=$P(SRA(0),"^",9) D D^DIQ S SRDT=$P(Y,"@")
"RTN","SROANTSP",23,0)
 S (SRDOC,Y)=$P($G(^SRF(SRTN,.1)),"^",4),C=$P(^DD(130,.14,0),"^",2) D:Y'="" Y^DIQ I $L(Y)>23 S Z=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=Z
"RTN","SROANTSP",24,0)
 S SRDOC=Y
"RTN","SROANTSP",25,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 I $L(Y) S SRCPTT=Y
"RTN","SROANTSP",26,0)
 W !,SRTN,?20,SRANM_" "_VA("PID"),?67,SROPS(1),?107,SRTECH,!,SRDT W:$D(SROPS(2)) ?67,SROPS(2) W ?107,SRDOC S SRAO=2 F  S SRAO=$O(SROPS(SRAO)) Q:'SRAO  W !,?67,SROPS(SRAO)
"RTN","SROANTSP",27,0)
 W !,?67,"CPT Code: "_SRCPTT
"RTN","SROANTSP",28,0)
 W ! Q
"RTN","SROANTSP",29,0)
 Q
"RTN","SROANTSP",30,0)
OTHER ; other operations
"RTN","SROANTSP",31,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SRTN,13,SROTHER,0),"^"))>125 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROANTSP",32,0)
 I SRLONG S SROPERS=$P(^SRF(SRTN,13,SROTHER,0),"^")
"RTN","SROANTSP",33,0)
 S SROPER=SROPER_$S(SROPERS'=" ...":", "_SROPERS,1:SROPERS)
"RTN","SROANTSP",34,0)
 Q
"RTN","SROANTSP",35,0)
LOOP ; break procedures
"RTN","SROANTSP",36,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<35  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROANTSP",37,0)
 Q
"RTN","SROANTSP",38,0)
HDR ; print heading
"RTN","SROANTSP",39,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROANTSP",40,0)
 S SRPAGE=SRPAGE+1 W:$Y @IOF W !,?53,"INCOMPLETE RISK ASSESSMENTS",?120,"PAGE "_SRPAGE,!,?(132-$L(SRINST)\2),SRINST,!,?58,"SURGERY SERVICE",?100,"DATE REVIEWED:"
"RTN","SROANTSP",41,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,"REVIEWED BY:"
"RTN","SROANTSP",42,0)
 W !!,"ASSESSMENT #",?20,"PATIENT",?67,"PRINCIPAL OPERATIVE PROCEDURE",?107,"ANESTHESIA TECHNIQUE",!,"OPERATION DATE",?107,"SURGEON",! F LINE=1:1:132 W "="
"RTN","SROANTSP",43,0)
 Q
"RTN","SROANTSP",44,0)
SS ; print surgical specialty
"RTN","SROANTSP",45,0)
 I $Y+5>IOSL D HDR
"RTN","SROANTSP",46,0)
 W !!,"** SURGICAL SPECIALTY: ",SRSS," **",!
"RTN","SROANTSP",47,0)
 Q
"RTN","SROANTSP",48,0)
LINE W ! F L=1:1:132 W "-"
"RTN","SROANTSP",49,0)
 Q
"RTN","SROAOP")
0^18^B20148443^B19509780
"RTN","SROAOP",1,0)
SROAOP ;BIR/MAM - ENTER OPERATION INFO ;02/14/06
"RTN","SROAOP",2,0)
 ;;3.0; Surgery ;**19,38,47,63,67,81,86,97,100,125,142**;24 Jun 93
"RTN","SROAOP",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROAOP",4,0)
 S SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROAOP",5,0)
START G:SRSOUT END K SRAOTH,SRACON D ^SROAOP1
"RTN","SROAOP",6,0)
ASK W !!,"Select Operative Information to Edit: " R SRASEL:DTIME I '$T!(SRASEL["^") S SRSOUT=1 G END
"RTN","SROAOP",7,0)
 I SRASEL="" G END
"RTN","SROAOP",8,0)
 S SRN=12 S:SRASEL="a" SRASEL="A" I '$D(SRAO(SRASEL)),(SRASEL'?.N1":".N),(SRASEL'="A") D HELP G:SRSOUT END G START
"RTN","SROAOP",9,0)
 I SRASEL="A" S SRASEL="1:"_SRN
"RTN","SROAOP",10,0)
 I SRASEL?.N1":".N S Y=$E(SRASEL),Z=$P(SRASEL,":",2) I Y<1!(Z>SRN)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROAOP",11,0)
 S MM=$E(SRASEL) I MM'=3,(MM'=4),(MM'=5) S SRHDR(.5)=SRDOC D HDR^SROAUTL
"RTN","SROAOP",12,0)
 I SRASEL?.N1":".N D RANGE G START
"RTN","SROAOP",13,0)
 Q:'$D(SRAO(SRASEL))
"RTN","SROAOP",14,0)
 S EMILY=SRASEL D  G START
"RTN","SROAOP",15,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROAOP",16,0)
END I 'SRSOUT D ^SROAOP2
"RTN","SROAOP",17,0)
 I $D(SRTN) S SROERR=SRTN D ^SROERR0
"RTN","SROAOP",18,0)
 W @IOF D ^SRSKILL
"RTN","SROAOP",19,0)
 Q
"RTN","SROAOP",20,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit. Examples of proper",!,"responses are listed below."
"RTN","SROAOP",21,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (1-"_SRN_") to update the information in that field. (For",!,"   example, enter '2' to update Principal Operation.)"
"RTN","SROAOP",22,0)
 W !!,"3. Enter a range of numbers (1-"_SRN_") separated by a ':' to enter a range of",!,"   information. (For example, enter '6:8' to update PGY of Primary Surgeon,",!,"   Surgical Priority and Wound Classification.)"
"RTN","SROAOP",23,0)
 W !!,"Press ENTER to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROAOP",24,0)
 Q
"RTN","SROAOP",25,0)
RANGE ; range of numbers
"RTN","SROAOP",26,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAOP",27,0)
 .S SHEMP=$P(SRASEL,":"),CURLEY=$P(SRASEL,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROAOP",28,0)
 Q
"RTN","SROAOP",29,0)
ONE ; edit one item
"RTN","SROAOP",30,0)
 I EMILY=3 D DISP^SROAOP1 Q
"RTN","SROAOP",31,0)
 I EMILY=10 D ANES Q
"RTN","SROAOP",32,0)
 I EMILY=4 D ^SROTHER Q
"RTN","SROAOP",33,0)
 I EMILY=5 D CONCUR Q
"RTN","SROAOP",34,0)
 ;I EMILY=4!(EMILY=5) D:EMILY=4 ^SROTHER D:EMILY=5 CONCUR Q
"RTN","SROAOP",35,0)
 I EMILY=6,SRASEL[":",($P(SRASEL,":")'=6) S SRPAGE="" S SRHDR(.5)=SRDOC D HDR^SROAUTL
"RTN","SROAOP",36,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DR I $D(Y) S SRSOUT=1
"RTN","SROAOP",37,0)
 I EMILY=2 D ^SROAUTL
"RTN","SROAOP",38,0)
 Q
"RTN","SROAOP",39,0)
RET Q:SRSOUT  W !!,"Press ENTER to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAOP",40,0)
 Q
"RTN","SROAOP",41,0)
CONCUR ; concurrent case information
"RTN","SROAOP",42,0)
 S SRLINE="" F I=1:1:80 S SRLINE=SRLINE_"-"
"RTN","SROAOP",43,0)
 S CON=$P($G(^SRF(SRTN,"CON")),"^") I CON,($P($G(^SRF(CON,30)),"^")!($P($G(^SRF(CON,31)),"^",8))) S CON=""
"RTN","SROAOP",44,0)
 S SRPAGE="" D HDR^SROAUTL
"RTN","SROAOP",45,0)
 W !,"Concurrent case information cannot be updated using the Risk Assessment",!,"Module. To update the CPT code of a concurrent case, please use an option",!,"contained within the Operation Menu."
"RTN","SROAOP",46,0)
 I CON D CC W !!,"Concurrent Procedure: ",?25,SROPS(1) I $D(SROPS(2)) W !,?25,SROPS(2) I $D(SROPS(3)) W !,?25,SROPS(3) I $D(SROPS(4)) W !,?25,SROPS(4)
"RTN","SROAOP",47,0)
 W !!,"Press ENTER to continue " R X:DTIME
"RTN","SROAOP",48,0)
 Q
"RTN","SROAOP",49,0)
CC ; list concurrent procedure
"RTN","SROAOP",50,0)
 S SROPER=$P(^SRF(CON,"OP"),"^") I $P(^("OP"),"^",2) S SROPER=SROPER_" ("_$P(^("OP"),"^",2)_")"
"RTN","SROAOP",51,0)
 K SROPS,MM,MMM S:$L(SROPER)<45 SROPS(1)=SROPER
"RTN","SROAOP",52,0)
 I $L(SROPER)>44 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROAOP",53,0)
 Q
"RTN","SROAOP",54,0)
LOOP ; break procedures
"RTN","SROAOP",55,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<45  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROAOP",56,0)
 Q
"RTN","SROAOP",57,0)
ANES K DR,DIE,DA S DA=SRTN,DR=".37T;901.1T",DR(2,130.06)=".01T;.05T;42T;12T",DIE=130 D ^DIE K DR
"RTN","SROAOP",58,0)
 Q
"RTN","SROAOP",59,0)
TRAUMA ; airway trauma
"RTN","SROAOP",60,0)
 N SRTECH,SRT,SRZ S SRT=0 F  S SRT=$O(^SRF(SRTN,6,SRT)) Q:'SRT  D ^SROPRIN Q:$D(SRZ)
"RTN","SROAOP",61,0)
 I '$G(SRT) W !!,"Enter Principal Anesthesia Technique first!",! H 2 D ANES Q
"RTN","SROAOP",62,0)
 I $G(SRT) K DA,DR,DIE S DIE="^SRF("_SRTN_",6,",DA(1)=SRTN,DA=SRT,DR="12" D ^DIE K DA,DR,DIE
"RTN","SROAOP",63,0)
 Q
"RTN","SROAOP1")
0^75^B18659468^B11423399
"RTN","SROAOP1",1,0)
SROAOP1 ;BIR/MAM - SET OPERATION INFO ;03/08/06
"RTN","SROAOP1",2,0)
 ;;3.0; Surgery ;**38,47,63,81,88,95,97,125,142**;24 Jun 93
"RTN","SROAOP1",3,0)
 K SRA,SRAO F I=0,200,"OP" S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROAOP1",4,0)
 S SRDOC="Surgeon: "_$P(^VA(200,$P(^SRF(SRTN,.1),"^",4),0),"^") F I=3,4,5 S SRAO(I)=""
"RTN","SROAOP1",5,0)
 K SROPS S SROPER=$P(SRA("OP"),"^")
"RTN","SROAOP1",6,0)
 S SRAO(2)="^26"
"RTN","SROAOP1",7,0)
 S:$L(SROPER)<52 SROPS(1)=SROPER K M,MM,MMM I $L(SROPER)>51 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROAOP1",8,0)
 S X=$P(SRA(0),"^",4) S:X X=$P(^SRO(137.45,X,0),"^",1) S SRAO(1)=X_"^.04"
"RTN","SROAOP1",9,0)
 S X=$P(SRA(0),"^",3) S:X'="" X=$S(X="J":"MAJOR",1:"MINOR") S SRAO(12)=X_"^.03"
"RTN","SROAOP1",10,0)
 S SRHDR(.5)=SRDOC,SRPAGE="PAGE: 1 OF 2" D HDR^SROAUTL
"RTN","SROAOP1",11,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",3) S:X X=$$ICDDX^ICDCODE(X,$P($G(^SRF(SRTN,0)),"^",9)),X=$P(X,"^",2)_"   "_$P(X,"^",4)
"RTN","SROAOP1",12,0)
 W "Postop Diagnosis Code (ICD9): ",$S(X'="":X,1:"NOT ENTERED"),!
"RTN","SROAOP1",13,0)
 W !," 1. Surgical Specialty: ",?28,$P(SRAO(1),"^"),!," 2. Principal Operation: ",?28,SROPS(1) I $D(SROPS(2)) W !,?28,SROPS(2) I $D(SROPS(3)) W !,?28,SROPS(3) I $D(SROPS(4)) W !,?28,SROPS(4)
"RTN","SROAOP1",14,0)
 N SRPROC,SRL S SRL=52 D CPTS W !," 3. CPT Codes (view only):" I SRPROC(1)="" S SRPROC(1)="NOT ENTERED"
"RTN","SROAOP1",15,0)
 F I=1:1 Q:'$D(SRPROC(I))  W:I=1 ?28,SRPROC(I) W:I'=1 !,?28,SRPROC(I)
"RTN","SROAOP1",16,0)
 W !," 4. Other Procedures:" W:$O(^SRF(SRTN,13,0)) ?28,"***INFORMATION ENTERED***"
"RTN","SROAOP1",17,0)
 W !," 5. Concurrent Procedure:" S CON=$P($G(^SRF(SRTN,"CON")),"^") I CON,'($P($G(^SRF(CON,30)),"^")!($P($G(^SRF(CON,31)),"^",8))) W ?28,"***INFORMATION ENTERED***"
"RTN","SROAOP1",18,0)
 S X=$P(SRA(200),"^",52),SRAO(6)=X_"^214",NYUK=$P(SRA(0),"^",10) D EMERG S SRAO(7)=SHEMP_"^.035"
"RTN","SROAOP1",19,0)
 S Y=$P($G(^SRF(SRTN,"1.0")),"^",8),C=$P(^DD(130,1.09,0),"^",2) D:Y'="" Y^DIQ S SRAO(8)=Y_"^1.09"
"RTN","SROAOP1",20,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),C=$P(^DD(130,1.13,0),"^",2) D:Y'="" Y^DIQ S SRAO(9)=Y_"^1.13"
"RTN","SROAOP1",21,0)
 D TECH^SROPRIN S SRAO(10)=SRTECH
"RTN","SROAOP1",22,0)
 S X=$P(SRA(200),"^",54),SRAO(11)=X_"^340" K SRA(.2)
"RTN","SROAOP1",23,0)
 W !," 6. PGY of Primary Surgeon:",?28,$P(SRAO(6),"^"),!," 7. Surgical Priority:",?28,$P(SRAO(7),"^"),!," 8. Wound Classification: ",?28,$P(SRAO(8),"^")
"RTN","SROAOP1",24,0)
 W !," 9. ASA Classification:",?28,$P(SRAO(9),"^")
"RTN","SROAOP1",25,0)
 W !,"10. Principal Anesthesia Technique: ",$P(SRAO(10),"^")
"RTN","SROAOP1",26,0)
 W !,"11. RBC Units Transfused:",?28,$P(SRAO(11),"^")
"RTN","SROAOP1",27,0)
 W !,"12. Major or Minor:",?28,$P(SRAO(12),"^"),! F LINE=1:1:80 W "-"
"RTN","SROAOP1",28,0)
 Q
"RTN","SROAOP1",29,0)
YN S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAOP1",30,0)
 Q
"RTN","SROAOP1",31,0)
LOOP ; break procedures
"RTN","SROAOP1",32,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<52  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROAOP1",33,0)
 Q
"RTN","SROAOP1",34,0)
EMERG ; surgical priority
"RTN","SROAOP1",35,0)
 I NYUK="" S SHEMP="" Q
"RTN","SROAOP1",36,0)
 S Y=NYUK,C=$P(^DD(130,.035,0),"^",2) D Y^DIQ S SHEMP=Y
"RTN","SROAOP1",37,0)
 Q
"RTN","SROAOP1",38,0)
CPTS ; put CPT codes in array for display
"RTN","SROAOP1",39,0)
 N SRDA,K,X,XX,Y K SRPROC S K=1,Y=$P($G(^SRO(136,SRTN,0)),"^",2),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"")
"RTN","SROAOP1",40,0)
 I $L(Y) D SSPRIN^SROCPT0
"RTN","SROAOP1",41,0)
 S SRPROC(K)=$S($L(Y):Y,1:"")
"RTN","SROAOP1",42,0)
 S SRDA=0 F  S SRDA=$O(^SRO(136,SRTN,3,SRDA)) Q:'SRDA  D
"RTN","SROAOP1",43,0)
 .S Y=$P($G(^SRO(136,SRTN,3,SRDA,0)),"^"),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"")
"RTN","SROAOP1",44,0)
 .I $L(Y) D SSOTH^SROCPT0
"RTN","SROAOP1",45,0)
 .I $L(Y)+$L(SRPROC(K))'>SRL S SRPROC(K)=SRPROC(K)_", "_Y Q
"RTN","SROAOP1",46,0)
 .S K=K+1,SRPROC(K)=Y
"RTN","SROAOP1",47,0)
 Q
"RTN","SROAOP1",48,0)
DISP ; display CPT code info
"RTN","SROAOP1",49,0)
 N SRFIRST,SRMO,SRMOD S SRPAGE="" D HDR^SROAUTL S SRFIRST=0,SRW="NOT ENTERED"
"RTN","SROAOP1",50,0)
 S Y=$P($G(^SRO(136,SRTN,0)),"^",2) I Y S Y=$P($$CPT^ICPTCOD(Y),"^",2) D DES^SROCPT0
"RTN","SROAOP1",51,0)
 W "Principal CPT Code: "_SRW I $G(SRDES(1))'="" F I=1:1 Q:$L(SRDES(I))'>1  W !,?5,SRDES(I)
"RTN","SROAOP1",52,0)
 I $O(^SRO(136,SRTN,1,0)) W !,?3,"Modifier: " D
"RTN","SROAOP1",53,0)
 .S SRMOD=0 F  S SRMOD=$O(^SRO(136,SRTN,1,SRMOD)) Q:'SRMOD  D
"RTN","SROAOP1",54,0)
 ..S SRMO=$P(^SRO(136,SRTN,1,SRMOD,0),"^")
"RTN","SROAOP1",55,0)
 ..W:SRFIRST !,?13 W $P($$MOD^ICPTMOD(SRMO,"I"),"^",2),"-",$P($$MOD^ICPTMOD(SRMO,"I"),"^",3)
"RTN","SROAOP1",56,0)
 ..S SRFIRST=1
"RTN","SROAOP1",57,0)
 K SRDES W !
"RTN","SROAOP1",58,0)
OTH S SROTH=0 F  S SROTH=$O(^SRO(136,SRTN,3,SROTH)) Q:'SROTH  D  K SRDES W !
"RTN","SROAOP1",59,0)
 .S Y=$P($G(^SRO(136,SRTN,3,SROTH,0)),"^"),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"") D DES^SROCPT0
"RTN","SROAOP1",60,0)
 .W !,"Other CPT Code:     "_SRW I $G(SRDES(1))'="" F I=1:1 Q:$L(SRDES(I))'>1  W !,?5,SRDES(I)
"RTN","SROAOP1",61,0)
 .I $O(^SRO(136,SRTN,3,SROTH,1,0)) S SRFIRST=0 W !,?3,"Modifier: " D
"RTN","SROAOP1",62,0)
 ..S SRMOD=0 F  S SRMOD=$O(^SRO(136,SRTN,3,SROTH,1,SRMOD)) Q:'SRMOD  D
"RTN","SROAOP1",63,0)
 ...S SRMO=$P(^SRO(136,SRTN,3,SROTH,1,SRMOD,0),"^")
"RTN","SROAOP1",64,0)
 ...W:SRFIRST !,?13 W $P($$MOD^ICPTMOD(SRMO,"I"),"^",2),"-",$P($$MOD^ICPTMOD(SRMO,"I"),"^",3)
"RTN","SROAOP1",65,0)
 ...S SRFIRST=1
"RTN","SROAOP1",66,0)
PRESS K DIR S DIR(0)="FOA",DIR("A")="Press ENTER to continue." D ^DIR K DIR
"RTN","SROAOP1",67,0)
 Q
"RTN","SROAOTH")
0^19^B5861466^B3838510
"RTN","SROAOTH",1,0)
SROAOTH ;BIR/MAM - PRINT OTHER PROCEDURES ;03/08/06
"RTN","SROAOTH",2,0)
 ;;3.0; Surgery ;**34,88,97,142**;24 Jun 93
"RTN","SROAOTH",3,0)
 N CPTT
"RTN","SROAOTH",4,0)
 W ! S (CNT,OTH)=0,CPTT="" F  S OTH=$O(^SRF(SRTN,13,OTH)) Q:'OTH  S CNT=CNT+1,OPER=$P(^SRF(SRTN,13,OTH,0),"^"),CPT=$P($G(^SRF(SRTN,13,OTH,2)),"^") D LIST
"RTN","SROAOTH",5,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$S(X:$P($$CPT^ICPTCOD(X),"^",2),1:"") D SSPRIN^SROCPT0 S CPTT=Y I $L(Y),$O(^SRO(136,SRTN,3,0)) D
"RTN","SROAOTH",6,0)
 .S OTH=0 F  S OTH=$O(^SRO(136,SRTN,3,OTH)) Q:'OTH  S OPER=$P($G(^SRO(136,SRTN,3,OTH,0)),"^"),CPT=$P($G(^SRO(136,SRTN,3,OTH,0)),"^") D
"RTN","SROAOTH",7,0)
 ..I CPT S Y=$P($$CPT^ICPTCOD(CPT),"^",2),SRDA=OTH D SSOTH^SROCPT0 S CPT=Y I $L(CPT) S CPTT=CPTT_", "_CPT
"RTN","SROAOTH",8,0)
 W !!,$J("Procedure CPT Codes: ",39)_CPTT
"RTN","SROAOTH",9,0)
 K OTH,CPT,CNT,OPER,SROPS S SROPS(1)=""
"RTN","SROAOTH",10,0)
 S CPT="",CON=$P($G(^SRF(SRTN,"CON")),"^") I CON,($P($G(^SRF(CON,30)),"^")!($P($G(^SRF(CON,31)),"^",8))) S CON=""
"RTN","SROAOTH",11,0)
 I CON S SROPER=$P(^SRF(CON,"OP"),"^"),CPT=$P($G(^SRO(136,CON,0)),"^",2) D
"RTN","SROAOTH",12,0)
 .K SROPS,MM,MMM S:$L(SROPER)<49 SROPS(1)=SROPER I $L(SROPER)>48 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROAOTH",13,0)
 .I CPT S Y=$P($$CPT^ICPTCOD(CPT),"^",2) D CON
"RTN","SROAOTH",14,0)
 .S:CPT="" CPT="MISSING"
"RTN","SROAOTH",15,0)
 W !!,$J("Concurrent Procedure: ",39)_SROPS(1) I $D(SROPS(2)) W !,?39,SROPS(2) I $D(SROPS(3)) W !,?39,SROPS(3)
"RTN","SROAOTH",16,0)
 W !,$J("CPT Code: ",39)_CPT
"RTN","SROAOTH",17,0)
 Q
"RTN","SROAOTH",18,0)
CON ; get CPT modifiers for concurrent procedure
"RTN","SROAOTH",19,0)
 N SRTN S SRTN=CON D SSPRIN^SROCPT0 S CPT=Y
"RTN","SROAOTH",20,0)
 Q
"RTN","SROAOTH",21,0)
LIST I CPT S Y=$P($$CPT^ICPTCOD(CPT),"^",2),SRDA=OTH D SSOTH^SROCPT S CPT=Y
"RTN","SROAOTH",22,0)
 S:CPT="" CPT="MISSING"
"RTN","SROAOTH",23,0)
 W !,$J("Other Procedure ("_CNT_"): ",39)_OPER
"RTN","SROAOTH",24,0)
 Q
"RTN","SROAOTH",25,0)
LOOP ; break procedures
"RTN","SROAOTH",26,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<49  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROAOTH",27,0)
 Q
"RTN","SROAOUT")
0^20^B12360492^B12241301
"RTN","SROAOUT",1,0)
SROAOUT ;BIR/SJA - OUTCOMES DATA ;07/05/05
"RTN","SROAOUT",2,0)
 ;;3.0; Surgery ;**125,135,142**;24 Jun 93
"RTN","SROAOUT",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROAOUT",4,0)
 D SRA^SROES S SRACLR=0,SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROAOUT",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO D ^SROUTC
"RTN","SROAOUT",6,0)
ASK W !!,"Select Outcomes Information to Edit: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROAOUT",7,0)
 S:X="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),(X'="A") D HELP G:SRSOUT END G START
"RTN","SROAOUT",8,0)
 I X="A" S X="0:13"
"RTN","SROAOUT",9,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<0!(Z>13)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROAOUT",10,0)
 D HDR^SROAUTL
"RTN","SROAOUT",11,0)
 I X?.N1":".N D RANGE G START
"RTN","SROAOUT",12,0)
 I $D(SRAO(X)) S EMILY=X D  G START
"RTN","SROAOUT",13,0)
 .I $$LOCK^SROUTL(SRTN) W !! D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROAOUT",14,0)
END D:$D(SRTN) EXIT^SROES W @IOF D ^SRSKILL
"RTN","SROAOUT",15,0)
 Q
"RTN","SROAOUT",16,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below."
"RTN","SROAOUT",17,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter a number (0-13) to update the information in that field.  (For",!,"   example, enter '4' to update Mediastinitis)"
"RTN","SROAOUT",18,0)
 W !!,"3. Enter a range of numbers separated by a ':' to enter a range of",!,"   information.  (For example, enter '11:13' to enter Stroke,",!,"   Coma >= 24 hr, and New Mech Circ Support)"
"RTN","SROAOUT",19,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROAOUT",20,0)
 Q
"RTN","SROAOUT",21,0)
RANGE ; range of numbers
"RTN","SROAOUT",22,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAOUT",23,0)
 .W !! S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROAOUT",24,0)
 Q
"RTN","SROAOUT",25,0)
ONE ; edit one item
"RTN","SROAOUT",26,0)
 N SRBEF
"RTN","SROAOUT",27,0)
 S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I",DR=$P(SRAO(EMILY),"^",2) D EN^DIQ1 K DA,DIC,DIQ,DR S SRBEF=SRY(130,SRTN,$P(SRAO(EMILY),"^",2),"I")
"RTN","SROAOUT",28,0)
 K DR,DIE S DA=SRTN,DR=$P(SRAO(EMILY),"^",2)_"T",DIE=130 D ^DIE K DA,DIE,DR I $D(Y)!$D(DTOUT) S SRSOUT=1
"RTN","SROAOUT",29,0)
 I 'SRSOUT,SRBEF'="Y",X="Y" D UPDATE^SROUTC Q
"RTN","SROAOUT",30,0)
 I 'SRSOUT,SRBEF="Y",X="Y",EMILY=8 D  K DA,DR,DIE Q
"RTN","SROAOUT",31,0)
 .N SROCC,SRSTAT S SROCC=0 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,16,SROCC,0),"^",2)=27 S SRSTAT=$P(^SRF(SRTN,16,SROCC,0),"^",5) Q
"RTN","SROAOUT",32,0)
 .K DIR S DIR(0)="130.22,8",DIR("A")="Cardiopulmonary Bypass Status",DA(1)=SRTN,DA=SROCC D ^DIR K DA,DR,DIE,DIR
"RTN","SROAOUT",33,0)
 .I ($G(SRSTAT)=""&((X="")!(X="@")!(X["^")))!(Y=0) D DEL^SROUTC S DA=SRTN,DIE=130,DR="391////N" D ^DIE Q
"RTN","SROAOUT",34,0)
 .I $G(SRSTAT)'="",X["^" Q
"RTN","SROAOUT",35,0)
 .I $G(SRSTAT)'=Y,Y'="" S DA=SROCC,DA(1)=SRTN,DIE="^SRF(SRTN,16,",DR="8////"_Y D ^DIE Q
"RTN","SROAOUT",36,0)
 I 'SRSOUT,SRBEF="Y",(X=""!(X="N")) D DEL^SROUTC
"RTN","SROAOUT",37,0)
 Q
"RTN","SROAOUT",38,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAOUT",39,0)
 Q
"RTN","SROAPCA1")
0^21^B30690413^B30586056
"RTN","SROAPCA1",1,0)
SROAPCA1 ;BIR/MAM - PRINT CARDIAC CATH INFO ;04/05/04  9:12 AM
"RTN","SROAPCA1",2,0)
 ;;3.0; Surgery ;**38,63,71,88,95,125,142**;24 Jun 93
"RTN","SROAPCA1",3,0)
 N SRX F I=200:1:202,206,208,209 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROAPCA1",4,0)
 I $Y+14>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA1",5,0)
 D LAB^SROAPCA4
"RTN","SROAPCA1",6,0)
 I $Y+16>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA1",7,0)
 S Y=$P(SRA(209),"^",4),SRAO(1)=$S(Y="C":"CATH",Y="I":"IVUS",Y="B":"BOTH",Y="NS":" NS",1:"")_"^476"
"RTN","SROAPCA1",8,0)
 S Y=$P(SRA(206),"^",24),SRX=357,SRAO(2)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",9,0)
 S Y=$P(SRA(206),"^",25),SRX=358,SRAO(3)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",10,0)
 S Y=$P(SRA(206),"^",26),SRX=359,SRAO(4)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",11,0)
 S Y=$P(SRA(206),"^",27),SRX=360,SRAO(5)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",12,0)
 S NYUK=$P(SRA(206),"^",30) D LV S SRAO(6)=SHEMP_"^363"
"RTN","SROAPCA1",13,0)
 S Y=$P(SRA(206),"^",9),SRX=415,SRAO(7)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",14,0)
 S Y=$P(SRA(209),"^",5),SRX=477,SRAO(8)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",15,0)
 S Y=$P(SRA(206),"^",28),SRX=361,SRAO(9)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",16,0)
 S Y=$P(SRA(206),"^",33),SRX=362.1,SRAO(10)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",17,0)
 S Y=$P(SRA(206),"^",34),SRX=362.2,SRAO(11)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",18,0)
 S Y=$P(SRA(206),"^",35),SRX=362.3,SRAO(12)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",19,0)
 S Y=$P(SRA(209),"^",6),SRX=478,SRAO(13)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",20,0)
 S Y=$P(SRA(209),"^",7),SRX=479,SRAO(14)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",21,0)
 S Y=$P(SRA(209),"^",8),SRX=480,SRAO(15)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",22,0)
 W !!,"IV. CARDIAC CATHETERIZATION AND ANGIOGRAPHIC DATA"
"RTN","SROAPCA1",23,0)
 S Y=$P($G(^SRF(SRTN,207)),"^",21) I Y>1 D DT S Y=X
"RTN","SROAPCA1",24,0)
 D NS W !,"Cardiac Catheterization Date: ",$E(Y,1,8)
"RTN","SROAPCA1",25,0)
 W !,"Procedure:",?26,$P(SRAO(1),"^"),?41,"Native Coronaries:"
"RTN","SROAPCA1",26,0)
 S SRX=$P(SRAO(2),"^") W !,"LVEDP:",?26,$J(SRX,3) D MMHG
"RTN","SROAPCA1",27,0)
 S SRX=$P(SRAO(9),"^") W ?41,"Left Main Stenosis:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",28,0)
 S SRX=$P(SRAO(3),"^") W !,"Aortic Systolic Pressure:",?26,$J(SRX,3) D MMHG
"RTN","SROAPCA1",29,0)
 S SRX=$P(SRAO(10),"^") W ?41,"LAD Stenosis:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",30,0)
 S SRX=$P(SRAO(11),"^") W !,?41,"Right Coronary Stenosis:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",31,0)
 W !,"For patients having right heart cath:" S SRX=$P(SRAO(12),"^") W ?41,"Circumflex Stenosis:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",32,0)
 ;
"RTN","SROAPCA1",33,0)
 S SRX=$P(SRAO(4),"^") W !,"PA Systolic Pressure:",?26,$J(SRX,3) D MMHG
"RTN","SROAPCA1",34,0)
 S SRX=$P(SRAO(5),"^") W !,"PAW Mean Pressure:",?26,$J(SRX,3) D MMHG
"RTN","SROAPCA1",35,0)
 W ?41,"If a Re-do, indicate stenosis",!,?44," in graft to:"
"RTN","SROAPCA1",36,0)
 S SRX=$P(SRAO(13),"^") W !,?41,"LAD:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",37,0)
 S SRX=$P(SRAO(14),"^") W !,?41,"Right coronary (include PDA): ",$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",38,0)
 S SRX=$P(SRAO(15),"^") W !,?41,"Circumflex:",?71,$J(SRX,3) I SRX?1.3N W "%"
"RTN","SROAPCA1",39,0)
 W !,LN
"RTN","SROAPCA1",40,0)
 W !,"LV Contraction Grade (from contrast or radionuclide angiogram or 2D Echo):",!,?7,"Grade",?17,"Ejection Fraction Range",?51,"Definition"
"RTN","SROAPCA1",41,0)
 W !,?8,$P(SRAO(6),"^")
"RTN","SROAPCA1",42,0)
 W !,LN,!,"Mitral Regurgitation:",?26,$P(SRAO(7),"^")
"RTN","SROAPCA1",43,0)
 W !,"Aortic stenosis:",?26,$P(SRAO(8),"^")
"RTN","SROAPCA1",44,0)
 I $Y+14>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA1",45,0)
 K SRAO S Y=$P(SRA(206),"^",31),SRX=364,SRAO(1)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",46,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),SRX=1.13,SRAO(2)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",47,0)
 S Y=$P(SRA(208),"^",12),SRX=414,SRAO(3)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",48,0)
 S Y=$P(SRA(206),"^",32),SRX=364.1,SRAO("1A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",49,0)
 S Y=$P(SRA(208),"^",13),SRX=414.1,SRAO("3A")=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",50,0)
 S Y=$P($G(^SRF(SRTN,.2)),"^",2),SRX=.22,SRAO(0)=$$OUT(SRX,Y)_"^"_SRX
"RTN","SROAPCA1",51,0)
 W !!,"V. OPERATIVE RISK SUMMARY DATA" S X=$P(SRAO(0),"^") I X'="" W ?40,"(Operation Began: "_X_")"
"RTN","SROAPCA1",52,0)
 W !,?5,"Physician's Preoperative" S Y=$P($G(^SRF(SRTN,.2)),"^",3) I Y'="" D DT W ?40,"(Operation Ended: "_X_")"
"RTN","SROAPCA1",53,0)
 W !,?7,"Estimate of Operative Mortality: "_$P(SRAO(1),"^") I $P(SRAO(1),"^")'=""&($P(SRAO(1),"^")'="NS") W "%"
"RTN","SROAPCA1",54,0)
 S X=$P(SRAO("1A"),"^") I X'="" W ?57,"("_X_")"
"RTN","SROAPCA1",55,0)
 W !,?5,"ASA Classification:",?35,$P(SRAO(2),"^"),!,?5,"Surgical Priority:",?35,$P(SRAO(3),"^") S X=$P(SRAO("3A"),"^") I X'="" W ?57,"("_X_")"
"RTN","SROAPCA1",56,0)
 S X=$P($G(^SRO(136,SRTN,0)),"^",2) I X S Y=$P($$CPT^ICPTCOD(X),"^",2) D SSPRIN^SROCPT0 S X=Y
"RTN","SROAPCA1",57,0)
 S X=$S(X'="":X,1:"CPT Code Missing")
"RTN","SROAPCA1",58,0)
 W !,?5,"Principal CPT Code:",?35,X,!,?5,"Other Procedures CPT Codes: "
"RTN","SROAPCA1",59,0)
 S CNT=32,OTH=0 F  S OTH=$O(^SRO(136,SRTN,3,OTH)) Q:'OTH  S CPT=$P($G(^SRO(136,SRTN,3,OTH,0)),"^") D
"RTN","SROAPCA1",60,0)
 .I CPT S Y=$P($$CPT^ICPTCOD(CPT),"^",2) S SRDA=OTH D SSOTH^SROCPT0 S CPT=Y
"RTN","SROAPCA1",61,0)
 .S:CPT="" CPT="NONE" S CNT=CNT+3
"RTN","SROAPCA1",62,0)
 .I CNT+$L(CPT)'>80 W:CNT>35 ";" W ?(CNT),CPT S CNT=CNT+$L(CPT) Q
"RTN","SROAPCA1",63,0)
 .W !,?35,CPT S CNT=35+$L(CPT)
"RTN","SROAPCA1",64,0)
 W !,?5,"Preoperative Risk Factors: "
"RTN","SROAPCA1",65,0)
 I $G(^SRF(SRTN,206.1))'="" S SRQ=0 S X=$G(^SRF(SRTN,206.1)) W:$L(X)<49 X,! I $L(X)>48 S Z=$L(X) D
"RTN","SROAPCA1",66,0)
 .I X'[" " W ?25,X Q
"RTN","SROAPCA1",67,0)
 .S I=0,LINE=1 F  S SRL=$S(LINE=1:48,1:80) D  Q:SRQ
"RTN","SROAPCA1",68,0)
 ..I $E(X,1,SRL)'[" " W X,! S SRQ=1 Q
"RTN","SROAPCA1",69,0)
 ..S J=SRL-I,Y=$E(X,J),I=I+1 I Y=" " W $E(X,1,J-1),!,?5 S X=$E(X,J+1,Z),Z=$L(X),I=0,LINE=LINE+1 I Z<SRL W X S SRQ=1 Q
"RTN","SROAPCA1",70,0)
 I $Y+20>IOSL D PAGE^SROAPCA I SRSOUT Q
"RTN","SROAPCA1",71,0)
 K SRA,SRAO D ^SROAPCA2
"RTN","SROAPCA1",72,0)
 Q
"RTN","SROAPCA1",73,0)
YN ; store answer
"RTN","SROAPCA1",74,0)
 S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPCA1",75,0)
 Q
"RTN","SROAPCA1",76,0)
DT I 'Y S X="" Q
"RTN","SROAPCA1",77,0)
 S Z=$E($P(Y,".",2),1,4),Z=Z_"0000",Z=$E(Z,1,4),X=$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_$E(Y,2,3)_" "_$E(Z,1,2)_":"_$E(Z,3,4)
"RTN","SROAPCA1",78,0)
 Q
"RTN","SROAPCA1",79,0)
OUT(SRFLD,SRY) ; get data in output form
"RTN","SROAPCA1",80,0)
 N C,Y
"RTN","SROAPCA1",81,0)
 S Y=SRY,C=$P(^DD(130,SRFLD,0),"^",2) D:Y'="" Y^DIQ
"RTN","SROAPCA1",82,0)
 I Y="NO STUDY" S Y="NS" Q Y
"RTN","SROAPCA1",83,0)
 Q Y
"RTN","SROAPCA1",84,0)
MMHG I SRX="NO STUDY"!(SRX="NS") Q
"RTN","SROAPCA1",85,0)
 W " mm Hg"
"RTN","SROAPCA1",86,0)
 Q
"RTN","SROAPCA1",87,0)
NS S Y=$S(Y="NS":"NO STUDY",1:Y)
"RTN","SROAPCA1",88,0)
 Q
"RTN","SROAPCA1",89,0)
LV K SHEMP S SHEMP=$S(NYUK="I":" I          > or = 0.55                    NORMAL",NYUK="II":"II             0.45-0.54                   MILD DYSFUNCTION",1:NYUK)
"RTN","SROAPCA1",90,0)
 Q:SHEMP'=NYUK  S SHEMP=$S(NYUK="III":"III           0.35-0.44                    MODERATE DYSFUNCTION",1:NYUK)
"RTN","SROAPCA1",91,0)
 Q:SHEMP'=NYUK  S SHEMP=$S(NYUK="IIIa":"IIIa          0.40-0.44                    MODERATE DYSFUNCTION A",1:NYUK)
"RTN","SROAPCA1",92,0)
 Q:SHEMP'=NYUK  S SHEMP=$S(NYUK="IIIb":"IIIb          0.35-0.39                    MODERATE DYSFUNCTION B",1:NYUK)
"RTN","SROAPCA1",93,0)
 Q:SHEMP'=NYUK  S SHEMP=$S(NYUK="IV":"IV            0.25-0.34                    SEVERE DYSFUNCTION",NYUK="V":" V             <0.25                       VERY SEVERE DYSFUNCTION",NYUK="NS":"NO LV STUDY",1:"")
"RTN","SROAPCA1",94,0)
 Q
"RTN","SROAPM")
0^22^B40311934^B40194294
"RTN","SROAPM",1,0)
SROAPM ;BIR/ADM - PATIENT DEMOGRAPHIC INFO ;07/05/05
"RTN","SROAPM",2,0)
 ;;3.0; Surgery ;**47,81,111,107,100,125,142**;24 Jun 93
"RTN","SROAPM",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROAPM",4,0)
 S SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROAPM",5,0)
START G:SRSOUT END D HDR^SROAUTL
"RTN","SROAPM",6,0)
 S DIR("A",1)="Enter/Edit Patient Demographic Information",DIR("A",2)=" ",DIR("A",3)="1. Capture Information from PIMS Records",DIR("A",4)="2. Enter, Edit, or Review Information",DIR("A",5)=" "
"RTN","SROAPM",7,0)
 S DIR("?",1)="Enter '1' if you want to capture patient movement information from PIMS",DIR("?",2)="records.  Enter '2' if you want to enter, edit, or review patient",DIR("?")="movement and other information on this screen."
"RTN","SROAPM",8,0)
 S DIR("A")="Select Number",DIR(0)="NO^1:2" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 G END
"RTN","SROAPM",9,0)
 I Y=1 D PIMS G START
"RTN","SROAPM",10,0)
EDIT S SRR=0 D HDR^SROAUTL K DR S SRQ=0,(DR,SRDR)="413;452;453;454;418;419;420;421;247;.011"
"RTN","SROAPM",11,0)
 K DA,DIC,DIQ,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="E",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROAPM",12,0)
 K SRZ S SRZ=0 F M=1:1 S I=$P(SRDR,";",M)  Q:'I  D
"RTN","SROAPM",13,0)
 .D TR,GET
"RTN","SROAPM",14,0)
 .S SRZ=SRZ+1,Y=$P(X,";;",2),SRFLD=$P(Y,"^"),(Z,SRZ(SRZ))=$P(Y,"^",2)_"^"_SRFLD,SREXT=SRY(130,SRTN,SRFLD,"E")
"RTN","SROAPM",15,0)
 .W !,$S($L(SRZ)<2:" "_SRZ,1:SRZ)_". "_$P(Z,"^")_":" D EXT
"RTN","SROAPM",16,0)
 ;
"RTN","SROAPM",17,0)
 D DEM^VADPT
"RTN","SROAPM",18,0)
 ;Find patient's ethnicity and list it on the display
"RTN","SROAPM",19,0)
 W !,"11. Patient's Ethnicity:" D
"RTN","SROAPM",20,0)
 .I $G(VADM(11)) W ?40,$P(VADM(11,1),U,2)
"RTN","SROAPM",21,0)
 .I '$G(VADM(11)) W ?40,"UNANSWERED"
"RTN","SROAPM",22,0)
 ;
"RTN","SROAPM",23,0)
 ;Find all race entries and place into a string with commas inbetween
"RTN","SROAPM",24,0)
 S SRORC=0,C=1,SRORACE="",SROLINE="",N=1,SROL=""
"RTN","SROAPM",25,0)
 F  S SRORC=$O(VADM(12,SRORC)) Q:SRORC=""  Q:C=11  D
"RTN","SROAPM",26,0)
 .I $G(VADM(12,SRORC)) S SRORACE(C)=$P(VADM(12,SRORC),U,2)
"RTN","SROAPM",27,0)
 .I SROLINE'="" S SROLINE=SROLINE_", "_SRORACE(C)
"RTN","SROAPM",28,0)
 .I SROLINE="" S SROLINE=SRORACE(C)
"RTN","SROAPM",29,0)
 .S C=C+1
"RTN","SROAPM",30,0)
 ;
"RTN","SROAPM",31,0)
 ;Find total length of 'race' string and wrap the text if necessary
"RTN","SROAPM",32,0)
 I $L(SROLINE)=40!$L(SROLINE)<40 S SROL(N)=SROLINE,SRNUM1=2
"RTN","SROAPM",33,0)
 I $L(SROLINE)>40 D WRAP
"RTN","SROAPM",34,0)
 ;
"RTN","SROAPM",35,0)
 W !,"12. Patient's Race:"
"RTN","SROAPM",36,0)
 I $G(VADM(12)) F D=1:1:SRNUM1-1 D
"RTN","SROAPM",37,0)
 .W:D=1 ?40,SROL(D)
"RTN","SROAPM",38,0)
 .W:D'=1 !,?40,SROL(D)
"RTN","SROAPM",39,0)
 ;
"RTN","SROAPM",40,0)
 I '$G(VADM(12)) W ?40,"UNANSWERED"
"RTN","SROAPM",41,0)
 ;
"RTN","SROAPM",42,0)
 K SROL,SROLINE,SRORC,SRORACE,SROLN,SROLN1,SROWRAP,SRNUM1
"RTN","SROAPM",43,0)
 ;
"RTN","SROAPM",44,0)
 W !! F K=1:1:80 W "-"
"RTN","SROAPM",45,0)
 D SEL G:SRR=1 EDIT
"RTN","SROAPM",46,0)
 S SROERR=SRTN D ^SROERR0
"RTN","SROAPM",47,0)
 G START
"RTN","SROAPM",48,0)
 Q
"RTN","SROAPM",49,0)
 ;
"RTN","SROAPM",50,0)
WRAP ;Wrap multiple race entries so that wrapped line
"RTN","SROAPM",51,0)
 ;does not break in the middle of a word
"RTN","SROAPM",52,0)
 ;
"RTN","SROAPM",53,0)
 N SROLNGTH S SROLNGTH=$L(SROLINE),E=40,SROWRAP="",SROLN="",SROLN1="",SROL=""
"RTN","SROAPM",54,0)
 F I=1:40:SROLNGTH S SROLN(I)=SROWRAP_$E(SROLINE,I,E) D
"RTN","SROAPM",55,0)
 .F K=40:-1:1 I $E(SROLN(I),K)[" " D  Q    ;Break lines at space
"RTN","SROAPM",56,0)
 ..S SROLN1(I)=$E(SROLN(I),1,K-1)
"RTN","SROAPM",57,0)
 ..S SROWRAP=$E(SROLN(I),K+1,E)
"RTN","SROAPM",58,0)
 .S E=E+40
"RTN","SROAPM",59,0)
 ;
"RTN","SROAPM",60,0)
 S:'$D(SROLN1(I)) SROLN1(I)=SROLN(I),SROWRAP=""
"RTN","SROAPM",61,0)
 I $L(SROLN1(I))+$L(SROWRAP)>39 S SROLN1(I+1)=SROWRAP   ;Last line 
"RTN","SROAPM",62,0)
 I $L(SROLN1(I))+$L(SROWRAP)'>39 S SROLN1(I)=SROLN1(I)_" "_SROWRAP
"RTN","SROAPM",63,0)
 ;
"RTN","SROAPM",64,0)
 ;Renumber the SROLN1 array to be in numeric order
"RTN","SROAPM",65,0)
 S SRNUM=0,SRNUM1=1
"RTN","SROAPM",66,0)
 F  S SRNUM=$O(SROLN1(SRNUM)) Q:SRNUM=""  D
"RTN","SROAPM",67,0)
 .S SROL(SRNUM1)=SROLN1(SRNUM)
"RTN","SROAPM",68,0)
 .S SRNUM1=SRNUM1+1
"RTN","SROAPM",69,0)
 Q
"RTN","SROAPM",70,0)
 ;
"RTN","SROAPM",71,0)
EXT I $L(SREXT)<40 W ?40,SREXT W:SRFLD=247 $S(SREXT="":"",SREXT=1:" Day",SREXT=0:" Days",SREXT>1:" Days",1:"") Q
"RTN","SROAPM",72,0)
 N I,J,X,Y S X=SREXT F  D  W:$L(X) ! I $L(X)<40!(X'[" ") W ?40,X Q
"RTN","SROAPM",73,0)
 .F I=0:1:38 S J=39-I,Y=$E(X,J) I Y=" " W ?40,$E(X,1,J-1) S X=$E(X,J+1,$L(X)) Q
"RTN","SROAPM",74,0)
 Q
"RTN","SROAPM",75,0)
SEL W !!,"Select number of item to edit: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAPM",76,0)
 I (X=11)!(X=12) S SRR=1 W !!,"The Patient's Race and Ethnicity information cannot be updated through the" D  Q
"RTN","SROAPM",77,0)
 .W !,"Surgery package options."
"RTN","SROAPM",78,0)
 .W !!,"Press RETURN to continue " R X:DTIME
"RTN","SROAPM",79,0)
 Q:X=""  S:X="a" X="A" I '$D(SRFLG),'$D(SRZ(X)),(X'?1.2N1":"1.2N),X'="A" D HELP S SRR=1 Q
"RTN","SROAPM",80,0)
 I X?1.2N1":"1.2N S Y=$P(X,":"),Z=$P(X,":",2) I Y<1!(Z>SRZ)!(Y>Z) D HELP S SRR=1 Q
"RTN","SROAPM",81,0)
 I X="A" S X="1:"_SRZ
"RTN","SROAPM",82,0)
 I X?1.2N1":"1.2N D RANGE S SRR=1 Q
"RTN","SROAPM",83,0)
 I $D(SRZ(X)),+X=X S EMILY=X D  S SRR=1
"RTN","SROAPM",84,0)
 .I $$LOCK^SROUTL(SRTN) D ONE,UNLOCK^SROUTL(SRTN)
"RTN","SROAPM",85,0)
 Q
"RTN","SROAPM",86,0)
PIMS ; get update from PIMS records
"RTN","SROAPM",87,0)
 W ! K DIR S DIR("A")="Are you sure you want to retrieve information from PIMS records ? ",DIR("B")="YES",DIR(0)="YOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROAPM",88,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAPM",89,0)
 .W ! D WAIT^DICD D ^SROAPIMS
"RTN","SROAPM",90,0)
 Q
"RTN","SROAPM",91,0)
HELP W @IOF,!!!!,"Enter the number or range of numbers you want to edit.  Examples of proper",!,"responses are listed below.",!!,"NOTE: Items 11 and 12 cannot be updated through the surgery package options."
"RTN","SROAPM",92,0)
 W !!,"1. Enter 'A' to update items 1 through 10.",!!,"2. Enter a number (1-"_SRZ_") to update an individual item.  (For example,",!,"   enter '1' to update "_$P(SRZ(1),"^")_")"
"RTN","SROAPM",93,0)
 W !!,"3. Enter a range of numbers (1-"_SRZ_") separated by a ':' to enter a range",!,"   of items.  (For example, enter '1:4' to update items 1, 2, 3 and 4.)",!
"RTN","SROAPM",94,0)
 I $D(SRFLG) W !,"4. Enter 'N' or 'NO' to enter negative response for all items.",!!,"5. Enter '@' to delete information from all items.",!
"RTN","SROAPM",95,0)
PRESS W ! K DIR S DIR("A")="Press the return key to continue or '^' to exit: ",DIR(0)="FOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROAPM",96,0)
 Q
"RTN","SROAPM",97,0)
RANGE ; range of numbers
"RTN","SROAPM",98,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAPM",99,0)
 .S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROAPM",100,0)
 Q
"RTN","SROAPM",101,0)
ONE ; edit one item
"RTN","SROAPM",102,0)
 K DR,DA,DIE S DR=$P(SRZ(EMILY),"^",2)_"T",DA=SRTN,DIE=130,SRDT=$P(SRZ(EMILY),"^",3) S:SRDT DR=DR_";"_SRDT_"T" D ^DIE K DR,DA I $D(Y) S SRSOUT=1
"RTN","SROAPM",103,0)
 Q
"RTN","SROAPM",104,0)
TR S J=I,J=$TR(J,"1234567890.","ABCDEFGHIJP")
"RTN","SROAPM",105,0)
 Q
"RTN","SROAPM",106,0)
GET S X=$T(@J)
"RTN","SROAPM",107,0)
 Q
"RTN","SROAPM",108,0)
END W @IOF D ^SRSKILL
"RTN","SROAPM",109,0)
 Q
"RTN","SROAPM",110,0)
PJAA ;;.011^In/Out-Patient Status
"RTN","SROAPM",111,0)
BDG ;;247^Length of Postop Hospital Stay
"RTN","SROAPM",112,0)
DAC ;;413^Transfer Status
"RTN","SROAPM",113,0)
DAG ;;417^Patient's Race
"RTN","SROAPM",114,0)
DAH ;;418^Hospital Admission Date/Time
"RTN","SROAPM",115,0)
DAI ;;419^Hospital Discharge Date/Time
"RTN","SROAPM",116,0)
DBJ ;;420^Admit/Transfer to Surgical Svc.
"RTN","SROAPM",117,0)
DBA ;;421^Discharge/Transfer to Chronic Care
"RTN","SROAPM",118,0)
DEB ;;452^Observation Admission Date/Time
"RTN","SROAPM",119,0)
DEC ;;453^Observation Discharge Date/Time
"RTN","SROAPM",120,0)
DED ;;454^Observation Treating Specialty
"RTN","SROAPR2")
0^93^B10438227^B9482991
"RTN","SROAPR2",1,0)
SROAPR2 ;BIR/MAM - PAGE 2 PREOP SCREEN ;06/13/05
"RTN","SROAPR2",2,0)
 ;;3.0; Surgery ;**38,100,125,142**;24 Jun 93
"RTN","SROAPR2",3,0)
 K SRA,SRAO
"RTN","SROAPR2",4,0)
START Q:SRSOUT  D:SRACLR RET S SRACLR=0 K SRA,SRAO D ^SROAPS2
"RTN","SROAPR2",5,0)
ASK W !!,"Select Preoperative Information to Edit: " R X:DTIME I '$T!("^"[X) D CONCC^SROAPRE S SRSOUT=1 Q
"RTN","SROAPR2",6,0)
 S:X="a" X="A" S:X="n" X="N"
"RTN","SROAPR2",7,0)
 I $L(X)=2,'$D(SRAO(X)),X?1N1A S Z=$E(X,2),Z=$TR(Z,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ") I $D(SRAO($E(X)_Z)) S X=$E(X)_Z
"RTN","SROAPR2",8,0)
 I '$D(SRAO(X)),(X'?1N1":"1N),(X'="A"),(X'="N") D HELP Q:SRSOUT  G START
"RTN","SROAPR2",9,0)
 I X="A" S X="1:3"
"RTN","SROAPR2",10,0)
 I X?1N1":"1N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>3)!(Y>Z) D HELP Q:SRSOUT  G START
"RTN","SROAPR2",11,0)
 I X="N" D  G START
"RTN","SROAPR2",12,0)
 .W ! K DIR S DIR(0)="Y",DIR("B")="NO",DIR("A")="Are you sure you want to set all fields on this page to NO"
"RTN","SROAPR2",13,0)
 .D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROAPR2",14,0)
 .I Y D NO2ALL^SROAPRE2
"RTN","SROAPR2",15,0)
 S SRPAGE="" D HDR^SROAUTL
"RTN","SROAPR2",16,0)
 I X?1N1":"1N D RANGE G START
"RTN","SROAPR2",17,0)
 I $D(SRAO(X)),+X=X S EMILY=X D  G START
"RTN","SROAPR2",18,0)
 .I $$LOCK^SROUTL(SRTN) D ^SROAPRE2,UNLOCK^SROUTL(SRTN)
"RTN","SROAPR2",19,0)
 I $D(SRAO(X)) D  G START
"RTN","SROAPR2",20,0)
 .I $$LOCK^SROUTL(SRTN) W !! S DA=SRTN,DIE=130,DR=$P(SRAO(X),"^",2)_"T" D ^DIE K DA,DIE,DR D UNLOCK^SROUTL(SRTN)
"RTN","SROAPR2",21,0)
 S SRSOUT=1 Q
"RTN","SROAPR2",22,0)
HELP W @IOF,!!!!,"Enter the number, number/letter combination, or range of numbers you want to",!,"edit.  Examples of proper responses are listed below."
"RTN","SROAPR2",23,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter 'N' to set all fields on this page to NO."
"RTN","SROAPR2",24,0)
 W !!,"3. Enter a number (1-3) to update the information in that group.  (For",!,"   example, enter '1' to update all Central Nervous System information)"
"RTN","SROAPR2",25,0)
 W !!,"4. Enter a number/letter combination to update a specific occurrence. (To ",!,"   update Impaired Sensorium, enter '2A')"
"RTN","SROAPR2",26,0)
 W !!,"5. Enter a range of numbers (2-3) separated by a ':' to enter all",!,"   Central Nervous System and Nutritional/Immune/Other information."
"RTN","SROAPR2",27,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROAPR2",28,0)
 Q
"RTN","SROAPR2",29,0)
RANGE ; range of numbers
"RTN","SROAPR2",30,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAPR2",31,0)
 .F EMILY=1,2,3 D ^SROAPRE2 Q:SRSOUT
"RTN","SROAPR2",32,0)
 Q
"RTN","SROAPR2",33,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAPR2",34,0)
 Q
"RTN","SROAPRE")
0^23^B20305987^B18999361
"RTN","SROAPRE",1,0)
SROAPRE ;BIR/MAM - PREOPERATIVE INFO ;06/03/05
"RTN","SROAPRE",2,0)
 ;;3.0; Surgery ;**38,47,55,88,100,125,142**;24 Jun 93
"RTN","SROAPRE",3,0)
 I '$D(SRTN) W !!,"A Surgery Risk Assessment must be selected prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROAPRE",4,0)
 S (SRSOUT,SRACLR)=0,SRSUPCPT=1 D ^SROAUTL,DUP^SROAUTL G:SRSOUT END
"RTN","SROAPRE",5,0)
START D:SRACLR RET G:SRSOUT END S SRACLR=0 K SRA,SRAO D ^SROAPS1
"RTN","SROAPRE",6,0)
ASK W !,"Select Preoperative Information to Edit: " R X:DTIME I '$T!(X["^") D CONCC G END
"RTN","SROAPRE",7,0)
 S:X="" X="+1" S:X="a" X="A" S:X="n" X="N"
"RTN","SROAPRE",8,0)
 I $L(X)=2,'$D(SRAO(X)),X?1N1A S Z=$E(X,2),Z=$TR(Z,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ") I $D(SRAO($E(X)_Z)) S X=$E(X)_Z
"RTN","SROAPRE",9,0)
 I '$D(SRAO(X)),(X'?.N1":".N),(X'="A"),(X'="N"),(X'="+1") D HELP G:SRSOUT END G START
"RTN","SROAPRE",10,0)
 I X="+1" D CONCC,^SROAPR2 G START
"RTN","SROAPRE",11,0)
 I X="A" S X="1:6"
"RTN","SROAPRE",12,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>6)!(Y>Z) D HELP G:SRSOUT END G START
"RTN","SROAPRE",13,0)
 I X="N" D  G:SRSOUT END G START
"RTN","SROAPRE",14,0)
 .W ! K DIR S DIR(0)="Y",DIR("B")="NO",DIR("A")="Are you sure you want to set all fields on this page to NO"
"RTN","SROAPRE",15,0)
 .D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROAPRE",16,0)
 .I Y D NO2ALL^SROAPRE1
"RTN","SROAPRE",17,0)
 S SRPAGE="" D HDR^SROAUTL
"RTN","SROAPRE",18,0)
 I X?.N1":".N D RANGE G START
"RTN","SROAPRE",19,0)
 I $D(SRAO(X)),+X=X S EMILY=X D  G START
"RTN","SROAPRE",20,0)
 .I $$LOCK^SROUTL(SRTN) W ! D:EMILY<4 ^SROAPRE1 D:EMILY>3 ^SROAPR1A D UNLOCK^SROUTL(SRTN)
"RTN","SROAPRE",21,0)
 I $D(SRAO(X)),$$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAPRE",22,0)
 .I X="1J" D FUNCTI Q
"RTN","SROAPRE",23,0)
 .I X="1I" D FUNCTJ Q
"RTN","SROAPRE",24,0)
 .S SRX=X W ! K DR,DIE S DA=SRTN,DR=$P(SRAO(X),"^",2)_"T",DIE=130 D ^DIE K DR
"RTN","SROAPRE",25,0)
 G START
"RTN","SROAPRE",26,0)
END I '$D(SREQST) W @IOF D ^SRSKILL
"RTN","SROAPRE",27,0)
 Q
"RTN","SROAPRE",28,0)
FUNCTI N X K DA,DIR S DA=SRTN,DIR(0)="130,492",DIR("A")="Functional Health Status at Evaluation for Surgery" D ^DIR K DIR D  Q
"RTN","SROAPRE",29,0)
 .I $D(DTOUT)!$D(DUOUT) Q
"RTN","SROAPRE",30,0)
 .I X="@" K DIE,DR S DIE=130,DR="492///@" D ^DIE K DA,DIE,DR Q
"RTN","SROAPRE",31,0)
 .K DIE,DR S DIE=130,DR="492////"_Y D ^DIE K DA,DIE,DR
"RTN","SROAPRE",32,0)
 Q
"RTN","SROAPRE",33,0)
FUNCTJ N X K DA,DIR S DA=SRTN,DIR(0)="130,240",DIR("A")="Functional Health Status Prior to Current Illness" D ^DIR K DIR D  Q
"RTN","SROAPRE",34,0)
 .I $D(DTOUT)!$D(DUOUT) Q
"RTN","SROAPRE",35,0)
 .I X="@" K DIE,DR S DIE=130,DR="240///@" D ^DIE K DA,DIE,DR Q
"RTN","SROAPRE",36,0)
 .K DIE,DR S DIE=130,DR="240////"_Y D ^DIE K DA,DIE,DR
"RTN","SROAPRE",37,0)
 Q
"RTN","SROAPRE",38,0)
HELP W @IOF,!!!!,"Enter the number, number/letter combination, or range of numbers you want to",!,"edit.  Examples of proper responses are listed below."
"RTN","SROAPRE",39,0)
 W !!,"1. Enter 'A' to update all information.",!!,"2. Enter 'N' to set all fields on this page to NO."
"RTN","SROAPRE",40,0)
 W !!,"3. Enter a number (1-6) to update the information in that group.  (For",!,"   example, enter '5' to update all cardiac information)"
"RTN","SROAPRE",41,0)
 W !!,"4. Enter a number/letter combination to update a specific occurrence. (To ",!,"   update Current Pneumonia, enter '2C'.)"
"RTN","SROAPRE",42,0)
 W !!,"5. Enter a range of numbers (1-6) separated by a ':' to enter a range of",!,"   occurrences.  (For example, enter '2:4' to enter all pulmonary,",!,"   hepatobiliary, and gastrointestinal information)"
"RTN","SROAPRE",43,0)
 W !!,"6. Press <RET> to continue to page 2 of this option."
"RTN","SROAPRE",44,0)
 W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1
"RTN","SROAPRE",45,0)
 Q
"RTN","SROAPRE",46,0)
RANGE ; range of numbers
"RTN","SROAPRE",47,0)
 I $$LOCK^SROUTL(SRTN) D  D UNLOCK^SROUTL(SRTN)
"RTN","SROAPRE",48,0)
 .S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) W:SHEMP<9 ! F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D:EMILY<4 ^SROAPRE1 D:EMILY>3 ^SROAPR1A
"RTN","SROAPRE",49,0)
 Q
"RTN","SROAPRE",50,0)
RET Q:SRSOUT  W !!,"Press <RET> to continue, or '^' to quit  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROAPRE",51,0)
 Q
"RTN","SROAPRE",52,0)
CONCC ; check for concurrent case and update if one exists
"RTN","SROAPRE",53,0)
 S SRCON=$P($G(^SRF(SRTN,"CON")),"^") Q:'SRCON
"RTN","SROAPRE",54,0)
 Q:$P($G(^SRF(SRCON,"RA")),"^",2)="C"
"RTN","SROAPRE",55,0)
 S SRI="" F  S SRI=$O(SRAO(SRI)) Q:SRI=""  S SRZ=$P(SRAO(SRI),"^",2) K DA,DIC,DIQ,DR,SRY D
"RTN","SROAPRE",56,0)
 .S DA=SRTN,DR=SRZ,DIC="^SRF(",DIQ="SRY",DIQ(0)="I" D EN^DIQ1 S SRX=SRY(130,SRTN,SRZ,"I") S:SRX="" SRX="@"
"RTN","SROAPRE",57,0)
 .I $$LOCK^SROUTL(SRTN) K DA,DIE,DR S DA=SRCON,DIE=130,DR=SRZ_"////"_SRX D ^DIE K DR D UNLOCK^SROUTL(SRTN)
"RTN","SROAPRE",58,0)
 Q
"RTN","SROAPRT3")
0^24^B14821883^B15749642
"RTN","SROAPRT3",1,0)
SROAPRT3 ;BIR/MAM - PRINT OPERATION INFO ;02/01/04  2:10 PM
"RTN","SROAPRT3",2,0)
 ;;3.0; Surgery ;**38,47,63,81,88,95,125,142**;24 Jun 93
"RTN","SROAPRT3",3,0)
 K SRAO S (SRAO(7),SRAO(8))="",SRA("OP")=^SRF(SRTN,"OP")
"RTN","SROAPRT3",4,0)
 S SRAO(2)="^1" K SROPS S SROPER=$P(SRA("OP"),"^")
"RTN","SROAPRT3",5,0)
 S:$L(SROPER)<49 SROPS(1)=SROPER K M,MM,MMM I $L(SROPER)>48 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROAPRT3",6,0)
 S SRA(0)=^SRF(SRTN,0),X=$P(SRA(0),"^",4) S:X X=$P(^SRO(137.45,X,0),"^") S SRAO(2)=X_"^.04"
"RTN","SROAPRT3",7,0)
 W !,?29,"OPERATIVE INFORMATION",!!,$J("Surgical Specialty: ",39)_$P(SRAO(2),"^")
"RTN","SROAPRT3",8,0)
 W !!,$J("Principal Operation: ",39)_SROPS(1) I $D(SROPS(2)) W !,?40,SROPS(2) I $D(SROPS(3)) W !,?40,SROPS(3)
"RTN","SROAPRT3",9,0)
 D ^SROAOTH
"RTN","SROAPRT3",10,0)
 S X=$P(SRA(200),"^",52),SRAO(9)=X_"^214",NYUK=$P(SRA(0),"^",10),NYUK=$S(NYUK="EM":"YES",1:"NO") S SRAO(10)=NYUK_"^.035"
"RTN","SROAPRT3",11,0)
 S Y=$P($G(^SRF(SRTN,"1.0")),"^",8),C=$P(^DD(130,1.09,0),"^",2) D:Y'="" Y^DIQ S SRAO(11)=Y_"^1.09"
"RTN","SROAPRT3",12,0)
 S NYUK=$P(SRA(200),"^",53) D YN S SRAO(12)=SHEMP_"^201"
"RTN","SROAPRT3",13,0)
 S Y=$P($G(^SRF(SRTN,1.1)),"^",3),C=$P(^DD(130,1.13,0),"^",2) D:Y'="" Y^DIQ S SRAO(13)=Y_"^1.13"
"RTN","SROAPRT3",14,0)
 D TECH^SROPRIN S SRAO(14)=SRTECH D TRAUMA S SRAO(14.1)=SRTRAUMA K SRTRAUMA
"RTN","SROAPRT3",15,0)
 S SRI=$P($G(^SRF(SRTN,.3)),"^",9) D  S SRAO(14.2)=SRI
"RTN","SROAPRT3",16,0)
 .I 'SRI S SRI="NOT ENTERED" Q
"RTN","SROAPRT3",17,0)
 .K DA,DIC,DIQ,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="E",DR=901 D EN^DIQ1 S SRI=SRY(130,SRTN,901,"E") K DA,DIC,DIQ,DR,SRY
"RTN","SROAPRT3",18,0)
 S X=$P(SRA(200),"^",54),SRAO(15)=X_"^340"
"RTN","SROAPRT3",19,0)
 S Y=$P($G(^SRF(SRTN,.3)),"^",11),C=$P(^DD(130,901.1,0),"^",2) D:Y'="" Y^DIQ S:Y="" Y="NOT ENTERED" S SRAO(16)=Y_"^901.1"
"RTN","SROAPRT3",20,0)
 I $E(IOST)'="P" D PAGE^SROAPAS Q:SRSOUT  W !,?29,"OPERATIVE INFORMATION",!
"RTN","SROAPRT3",21,0)
 W !,$J("PGY of Primary Surgeon: ",39)_$P(SRAO(9),"^") W !,$J("Emergency Case (Y/N): ",39)_$P(SRAO(10),"^")
"RTN","SROAPRT3",22,0)
 S X=$P(SRA(0),"^",3),X=$S(X="J":"MAJOR",X="N":"MINOR",1:""),SRAO(12)=X_"^.03" W !,$J("Major or Minor: ",39)_$P(SRAO(12),"^")
"RTN","SROAPRT3",23,0)
 W !,$J("Wound Classification: ",39)_$P(SRAO(11),"^")
"RTN","SROAPRT3",24,0)
 W !,$J("ASA Classification: ",39)_$P(SRAO(13),"^")
"RTN","SROAPRT3",25,0)
 W !,$J("Airway Trauma: ",39)_$P(SRAO(14.1),"^")
"RTN","SROAPRT3",26,0)
 W !,$J("Mallampati Scale: ",39)_$P(SRAO(16),"^")
"RTN","SROAPRT3",27,0)
 W !,$J("Principal Anesthesia Technique: ",39)_$P(SRAO(14),"^")
"RTN","SROAPRT3",28,0)
 W !,$J("Airway Index: ",39)_$P(SRAO(14.2),"^")
"RTN","SROAPRT3",29,0)
 W !,$J("RBC Units Transfused: ",39)_$P(SRAO(15),"^")
"RTN","SROAPRT3",30,0)
 I $E(IOST)="P" W !!
"RTN","SROAPRT3",31,0)
 Q
"RTN","SROAPRT3",32,0)
YN S SHEMP=$S(NYUK="NS":"NS",NYUK="N":"NO",NYUK="Y":"YES",1:"")
"RTN","SROAPRT3",33,0)
 Q
"RTN","SROAPRT3",34,0)
LOOP ; break procedures
"RTN","SROAPRT3",35,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<49  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROAPRT3",36,0)
 Q
"RTN","SROAPRT3",37,0)
TRAUMA ; trauma related to anesthesia airway management
"RTN","SROAPRT3",38,0)
 S SRTRAUMA="" S:SRT SRTRAUMA=$P(^SRF(SRTN,6,SRT,0),"^",14) I SRTRAUMA="" S SRTRAUMA="NOT ENTERED" Q
"RTN","SROAPRT3",39,0)
 S Y=SRTRAUMA,C=$P(^DD(130.06,12,0),"^",2) D Y^DIQ S SRTRAUMA=Y
"RTN","SROAPRT3",40,0)
 Q
"RTN","SROAPRT3",41,0)
OPTIMES ; print operation times
"RTN","SROAPRT3",42,0)
 K SRAO F I=1:1:7 S SRAO(I)=""
"RTN","SROAPRT3",43,0)
 W !,?24,"OPERATION DATE/TIMES INFORMATION"
"RTN","SROAPRT3",44,0)
 S X=$G(^SRF(SRTN,.2)),SRAO(1)=$P(X,"^",10),SRAO(2)=$P(X,"^",2),SRAO(3)=$P(X,"^",3),SRAO(4)=$P(X,"^",12),SRAO(5)=$P(X,"^"),SRAO(6)=$P(X,"^",4),SRAO(7)=$P($G(^SRF(SRTN,1.1)),"^",8)
"RTN","SROAPRT3",45,0)
 F SRI=1:1:7 S Y=SRAO(SRI) I Y X ^DD("DD") S X=$P(Y,"@")_"  "_$P(Y,"@",2),SRAO(SRI)=X
"RTN","SROAPRT3",46,0)
 W !!,$J("Patient in Room (PIR): ",39)_SRAO(1),!,$J("Procedure/Surgery Start Time (PST): ",39)_SRAO(2),!,$J("Procedure/Surgery Finish (PF): ",39)_SRAO(3)
"RTN","SROAPRT3",47,0)
 W !,$J("Patient Out of Room (POR): ",39)_SRAO(4),!,$J("Anesthesia Start (AS): ",39)_SRAO(5),!,$J("Anesthesia Finish (AF): ",39)_SRAO(6),!,$J("Discharge from PACU (DPACU): ",39)_SRAO(7)
"RTN","SROAPRT3",48,0)
 I $E(IOST)="P" W !
"RTN","SROAPRT3",49,0)
 Q
"RTN","SROAR1")
0^25^B17090080^B16973018
"RTN","SROAR1",1,0)
SROAR1 ;BIR/MAM - ANNUAL REPORT, ALL SPECIALTIES ;11/17/99  6:25 AM
"RTN","SROAR1",2,0)
 ;;3.0; Surgery ;**34,50,88,127,142**;24 Jun 93
"RTN","SROAR1",3,0)
 S (GRAND,GMAJ,GMIN,GMAS,GMAR,GMIS,GMIR)=0 K ^TMP("SR",$J) S PAGE=1
"RTN","SROAR1",4,0)
 D HDR Q:SRHALT  S SRSDATE=SDATE1 F  S SRSDATE=$O(^SRF("AC",SRSDATE)) Q:SRSDATE>EDATE1!('SRSDATE)!SRHALT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDATE,SRTN)) Q:'SRTN!SRHALT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROAR1",5,0)
 S SRSS=0 F  S SRSS=$O(^TMP("SR",$J,SRSS)) Q:SRSS=""!SRHALT  D SPEC S SRCPT=0 F  S SRCPT=$O(^TMP("SR",$J,SRSS,SRCPT)) D:SRCPT="" TOTS Q:SRCPT=""!SRHALT  D OUT
"RTN","SROAR1",6,0)
 W !!! F LINE=1:1:132 W "="
"RTN","SROAR1",7,0)
 D:$Y+6>IOSL HDR Q:SRHALT  W !!,"TOTAL OPERATIONS:",?50,GRAND,?68,GMAS,?77,GMAR,?88,GMAJ,?103,GMIS,?112,GMIR,?124,GMIN,!! F I=1:1:132 W "="
"RTN","SROAR1",8,0)
 Q
"RTN","SROAR1",9,0)
SPEC ; specialty heading
"RTN","SROAR1",10,0)
 D:$Y+5>IOSL HDR Q:SRHALT  W !,?(132-$L(SRSS)\2),SRSS,! F LINE=1:1:132 W "-"
"RTN","SROAR1",11,0)
 S (TOTAL,TOTMAJ,TOTMIN,TOTMAS,TOTMAR,TOTMIS,TOTMIR)=0
"RTN","SROAR1",12,0)
 Q
"RTN","SROAR1",13,0)
HDR ; print heading
"RTN","SROAR1",14,0)
 I $D(ZTQUEUED) D ^SROSTOP Q:SRHALT
"RTN","SROAR1",15,0)
 W:$Y @IOF W !,?(132-$L(SRINST)\2),SRINST,?120,"PAGE: "_PAGE,!,?58,"SURGICAL SERVICE",?100,"REVIEWED BY:",!,?48,"ANNUAL REPORT OF SURGICAL PROCEDURES",?100,"DATE REVIEWED:"
"RTN","SROAR1",16,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,SRPRINT
"RTN","SROAR1",17,0)
 W !!,?75,"MAJOR",?110,"MINOR",!,"CPT CODE - OPERATION",?48,"TOTAL",?67,"STAFF",?74,"RESIDENT",?87,"TOTAL",?102,"STAFF",?109,"RESIDENT",?122,"TOTAL",! F I=1:1:132 W "-"
"RTN","SROAR1",18,0)
 S PAGE=PAGE+1
"RTN","SROAR1",19,0)
 Q
"RTN","SROAR1",20,0)
OUT ; print info
"RTN","SROAR1",21,0)
 K MAJR,MAJS,MAJT,MINR,MINS,MINT I $Y+5>IOSL D HDR Q:SRHALT  W !,?(132-$L(SRSS)\2),SRSS,! F LINE=1:1:132 W "-"
"RTN","SROAR1",22,0)
 S SRCPT("NAME")=SRCPT_" "_^TMP("SR",$J,SRSS,SRCPT)
"RTN","SROAR1",23,0)
 S (MAJS,MAJR,MINS,MINR)=0
"RTN","SROAR1",24,0)
 I $D(^TMP("SR",$J,SRSS,SRCPT,"J","S")) S MAJS=^("S")
"RTN","SROAR1",25,0)
 I $D(^TMP("SR",$J,SRSS,SRCPT,"J","R")) S MAJR=^("R")
"RTN","SROAR1",26,0)
 I $D(^TMP("SR",$J,SRSS,SRCPT,"N","S")) S MINS=^("S")
"RTN","SROAR1",27,0)
 I $D(^TMP("SR",$J,SRSS,SRCPT,"N","R")) S MINR=^("R")
"RTN","SROAR1",28,0)
 S MAJT=MAJR+MAJS,MINT=MINR+MINS,SUBT=MAJT+MINT,TOTAL=TOTAL+SUBT,TOTMAJ=TOTMAJ+MAJT,TOTMIN=TOTMIN+MINT,TOTMAS=TOTMAS+MAJS,TOTMAR=TOTMAR+MAJR,TOTMIS=TOTMIS+MINS,TOTMIR=TOTMIR+MINR
"RTN","SROAR1",29,0)
 W !,SRCPT("NAME"),?50,SUBT,?68,MAJS,?77,MAJR,?88,MAJT,?103,MINS,?112,MINR,?124,MINT
"RTN","SROAR1",30,0)
 Q
"RTN","SROAR1",31,0)
SET ; set local variables
"RTN","SROAR1",32,0)
 Q:'$D(^SRF(SRTN,.2))  I $P(^SRF(SRTN,.2),"^",12)="" Q
"RTN","SROAR1",33,0)
 I $D(^SRF(SRTN,30)),$P(^(30),"^")'="" Q
"RTN","SROAR1",34,0)
 I $D(^SRF(SRTN,31)),$P(^(31),"^",8)'="" Q
"RTN","SROAR1",35,0)
 K CPT S SR(0)=^SRF(SRTN,0),SRSS=$P(SR(0),"^",4) S SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SROAR1",36,0)
 S SRMAJ=$P(SR(0),"^",3) S:SRMAJ="" SRMAJ="N"
"RTN","SROAR1",37,0)
 S SRATT=$P($G(^SRF(SRTN,.1)),"^",3) S:SRATT="" SRATT="R"
"RTN","SROAR1",38,0)
 S (CPT,CNT)=0 F  S CPT=$O(^SRO(136,SRTN,3,CPT)) Q:CPT=""  S CNT=CNT+1 S Y=$P($G(^SRO(136,SRTN,3,CPT,0)),"^") I Y S X=$$CPT^ICPTCOD(Y,$P(^SRF(SRTN,0),"^",9)),CPT(CNT)=$P(X,"^",2,3)
"RTN","SROAR1",39,0)
 S CPT("*")=$P($G(^SRO(136,SRTN,0)),"^",2) I CPT("*")'="" S X=$$CPT^ICPTCOD(CPT("*"),$P(^SRF(SRTN,0),"^",9)),CPT("*")=$P(X,"^",2,3)
"RTN","SROAR1",40,0)
 S CPT=0 F  S CPT=$O(CPT(CPT)) Q:CPT=""  I CPT(CPT)'="" D SETUTL
"RTN","SROAR1",41,0)
 Q
"RTN","SROAR1",42,0)
SETUTL ; set ^TMP("SR",$J)
"RTN","SROAR1",43,0)
 S SRCPT=$P(CPT(CPT),"^"),FLAG=0
"RTN","SROAR1",44,0)
 I $D(^TMP("SR",$J,SRSS,SRCPT,SRMAJ,SRATT)) S ^TMP("SR",$J,SRSS,SRCPT,SRMAJ,SRATT)=^TMP("SR",$J,SRSS,SRCPT,SRMAJ,SRATT)+1,FLAG=1
"RTN","SROAR1",45,0)
 I FLAG Q
"RTN","SROAR1",46,0)
 S ^TMP("SR",$J,SRSS,SRCPT,SRMAJ,SRATT)=1,^TMP("SR",$J,SRSS,SRCPT)=$P(CPT(CPT),"^",2)
"RTN","SROAR1",47,0)
 Q
"RTN","SROAR1",48,0)
TOTS W !!! F I=1:1:132 W "-"
"RTN","SROAR1",49,0)
 D:$Y+5>IOSL HDR Q:SRHALT  W !,"TOTALS FOR "_SRSS_": ",?50,TOTAL,?68,TOTMAS,?77,TOTMAR,?88,TOTMAJ,?103,TOTMIS,?112,TOTMIR,?124,TOTMIN,! F LINE=1:1:132 W "-"
"RTN","SROAR1",50,0)
GRAND S GRAND=GRAND+TOTAL,GMAS=GMAS+TOTMAS,GMAR=GMAR+TOTMAR,GMIS=GMIS+TOTMIS,GMIR=GMIR+TOTMIR,GMAJ=GMAJ+TOTMAJ,GMIN=GMIN+TOTMIN
"RTN","SROAR1",51,0)
 Q
"RTN","SROAR2")
0^26^B15038123^B14923181
"RTN","SROAR2",1,0)
SROAR2 ;BIR/MAM - ANNUAL REPORT, ONE SPECIALTY ;11/17/99  6:46 AM
"RTN","SROAR2",2,0)
 ;;3.0; Surgery ;**34,60,50,88,127,142**;24 Jun 93
"RTN","SROAR2",3,0)
 S SRSP=$P(^SRO(137.45,SRSS,0),"^"),(GRAND,GMAJ,GMIN,GMAS,GMAR,GMIS,GMIR)=0,PAGE=1 K ^TMP("SR",$J)
"RTN","SROAR2",4,0)
 D HDR Q:SRHALT  S SRSDATE=SDATE1 F  S SRSDATE=$O(^SRF("AC",SRSDATE)) Q:SRSDATE>EDATE1!('SRSDATE)!SRHALT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDATE,SRTN)) Q:'SRTN!SRHALT  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D SET
"RTN","SROAR2",5,0)
 W !,?(132-$L(SRSP)\2),SRSP,! F LINE=1:1:132 W "-"
"RTN","SROAR2",6,0)
 S (TOTAL,TOTMAJ,TOTMIN,TOTMAS,TOTMAR,TOTMIS,TOTMIR)=0
"RTN","SROAR2",7,0)
 S SRCPT=0 F  S SRCPT=$O(^TMP("SR",$J,SRSS,SRCPT)) D:SRCPT="" TOTS Q:SRCPT=""  D OUT
"RTN","SROAR2",8,0)
 Q
"RTN","SROAR2",9,0)
HDR ; print heading
"RTN","SROAR2",10,0)
 I $D(ZTQUEUED) D ^SROSTOP Q:SRHALT
"RTN","SROAR2",11,0)
 W:$Y @IOF W !,?(132-$L(SRINST)\2),SRINST,?120,"PAGE: "_PAGE,!,?58,"SURGICAL SERVICE",?100,"REVIEWED BY:",!,?48,"ANNUAL REPORT OF SURGICAL PROCEDURES",?100,"DATE REVIEWED:"
"RTN","SROAR2",12,0)
 W !,?(132-$L(SRFRTO)\2),SRFRTO,?100,SRPRINT
"RTN","SROAR2",13,0)
 W !!,?75,"MAJOR",?110,"MINOR",!,"CPT CODE - OPERATION",?48,"TOTAL",?67,"STAFF",?74,"RESIDENT",?87,"TOTAL",?102,"STAFF",?109,"RESIDENT",?122,"TOTAL",! F I=1:1:132 W "-"
"RTN","SROAR2",14,0)
 S PAGE=PAGE+1
"RTN","SROAR2",15,0)
 Q
"RTN","SROAR2",16,0)
OUT ; print info
"RTN","SROAR2",17,0)
 K MAJR,MAJS,MAJT,MINR,MINS,MINT I $Y+5>IOSL D HDR Q:SRHALT  W !,?(132-$L(SRSS)\2),SRSS,! F LINE=1:1:132 W "-"
"RTN","SROAR2",18,0)
 S SRCPT("NAME")=SRCPT_" "_^TMP("SR",$J,SRSS,SRCPT)
"RTN","SROAR2",19,0)
 S (MAJS,MAJR,MINS,MINR)=0
"RTN","SROAR2",20,0)
 I $D(^TMP("SR",$J,SRSS,SRCPT,"J","S")) S MAJS=^("S")
"RTN","SROAR2",21,0)
 I $D(^TMP("SR",$J,SRSS,SRCPT,"J","R")) S MAJR=^("R")
"RTN","SROAR2",22,0)
 I $D(^TMP("SR",$J,SRSS,SRCPT,"N","S")) S MINS=^("S")
"RTN","SROAR2",23,0)
 I $D(^TMP("SR",$J,SRSS,SRCPT,"N","R")) S MINR=^("R")
"RTN","SROAR2",24,0)
 S MAJT=MAJR+MAJS,MINT=MINR+MINS,SUBT=MAJT+MINT,TOTAL=TOTAL+SUBT,TOTMAJ=TOTMAJ+MAJT,TOTMIN=TOTMIN+MINT,TOTMAS=TOTMAS+MAJS,TOTMAR=TOTMAR+MAJR,TOTMIS=TOTMIS+MINS,TOTMIR=TOTMIR+MINR
"RTN","SROAR2",25,0)
 W !,SRCPT("NAME"),?50,SUBT,?68,MAJS,?77,MAJR,?88,MAJT,?103,MINS,?112,MINR,?124,MINT
"RTN","SROAR2",26,0)
 Q
"RTN","SROAR2",27,0)
SET ; set local variables
"RTN","SROAR2",28,0)
 Q:'$D(^SRF(SRTN,.2))  I $P(^SRF(SRTN,.2),"^",12)="" Q
"RTN","SROAR2",29,0)
 I $D(^SRF(SRTN,30)),$P(^(30),"^")'="" Q
"RTN","SROAR2",30,0)
 I $D(^SRF(SRTN,31)),$P(^(31),"^",8)'="" Q
"RTN","SROAR2",31,0)
 S SR(0)=^SRF(SRTN,0),X=$P(SR(0),"^",4) Q:'X  S SRSPEC=X I SRSPEC'=SRSS Q
"RTN","SROAR2",32,0)
 K CPT S SRMAJ=$P(SR(0),"^",3) S:SRMAJ="" SRMAJ="N"
"RTN","SROAR2",33,0)
 S SRATT=$P($G(^SRF(SRTN,.1)),"^",3) S:SRATT="" SRATT="R"
"RTN","SROAR2",34,0)
 S (CPT,CNT)=0 F  S CPT=$O(^SRO(136,SRTN,3,CPT)) Q:CPT=""  S CNT=CNT+1 S Y=$P($G(^SRO(136,SRTN,3,CPT,0)),"^") I Y S X=$$CPT^ICPTCOD(Y,$P(^SRF(SRTN,0),"^",9)),CPT(CNT)=$P(X,"^",2,3)
"RTN","SROAR2",35,0)
 S CPT("*")=$P($G(^SRO(136,SRTN,0)),"^",2) I CPT("*")'="" S X=$$CPT^ICPTCOD(CPT("*"),$P(^SRF(SRTN,0),"^",9)),CPT("*")=$P(X,"^",2,3)
"RTN","SROAR2",36,0)
 S CPT=0 F  S CPT=$O(CPT(CPT)) Q:CPT=""  I CPT(CPT)'="" D SETUTL
"RTN","SROAR2",37,0)
 Q
"RTN","SROAR2",38,0)
SETUTL ; set ^TMP("SR",$J)
"RTN","SROAR2",39,0)
 S SRCPT=$P(CPT(CPT),"^"),FLAG=0
"RTN","SROAR2",40,0)
 I $D(^TMP("SR",$J,SRSPEC,SRCPT,SRMAJ,SRATT)) S ^TMP("SR",$J,SRSPEC,SRCPT,SRMAJ,SRATT)=^TMP("SR",$J,SRSPEC,SRCPT,SRMAJ,SRATT)+1,FLAG=1
"RTN","SROAR2",41,0)
 I FLAG Q
"RTN","SROAR2",42,0)
 S ^TMP("SR",$J,SRSPEC,SRCPT,SRMAJ,SRATT)=1,^TMP("SR",$J,SRSPEC,SRCPT)=$P(CPT(CPT),"^",2)
"RTN","SROAR2",43,0)
 Q
"RTN","SROAR2",44,0)
TOTS W !!! F I=1:1:132 W "="
"RTN","SROAR2",45,0)
 D:$Y+5>IOSL HDR Q:SRHALT  W !,"TOTALS FOR "_SRSP_": ",?50,TOTAL,?68,TOTMAS,?77,TOTMAR,?88,TOTMAJ,?103,TOTMIS,?112,TOTMIR,?124,TOTMIN,! F LINE=1:1:132 W "="
"RTN","SROAR2",46,0)
GRAND S GRAND=GRAND+TOTAL,GMAS=GMAS+TOTMAS,GMAR=GMAR+TOTMAR,GMIS=GMIS+TOTMIS,GMIR=GMIR+TOTMIR,GMAJ=GMAJ+TOTMAJ,GMIN=GMIN+TOTMIN
"RTN","SROAR2",47,0)
 Q
"RTN","SROARET")
0^27^B19049777^B20166421
"RTN","SROARET",1,0)
SROARET ;BIR/MAM - UPDATE RETURNS ;07/07/04  12:27 PM
"RTN","SROARET",2,0)
 ;;3.0; Surgery ;**16,19,38,46,88,100,125,142**;24 Jun 93
"RTN","SROARET",3,0)
 I '$D(SRTN) S SRTN1=1 D ^SROPS I '$D(SRTN) S SRSOUT=1 G END1
"RTN","SROARET",4,0)
 S SRSUPCPT=1 D ^SROAUTL S SRNAME=VADM(1),SRSOUT=0,SR(0)=^SRF(SRTN,0),SRLINE="" F I=1:1:79 S SRLINE=SRLINE_"-"
"RTN","SROARET",5,0)
 S SRT=$P($G(^SRF(SRTN,.2)),"^",10),(SRSDATE,X1)=$E($P(SR(0),"^",9),1,7),X2=30 D C^%DTC S SRENDT=X,END=SRENDT+.9999 K SRETURN
"RTN","SROARET",6,0)
 S SRCASE=0 F  S SRCASE=$O(^SRF(SRTN,29,SRCASE)) Q:'SRCASE  D
"RTN","SROARET",7,0)
 .S CASE=$P(^SRF(SRTN,29,SRCASE,0),"^"),SRCT=$P(^SRF(CASE,0),"^",9),SRT1=$P($G(^SRF(CASE,.2)),"^",10)
"RTN","SROARET",8,0)
 .I $E(SRCT,1,7)<SRSDATE!(SRCT=$P(SR(0),"^",9))!(SRCT>END)!$P($G(^SRF(CASE,30)),"^")!$P($G(^SRF(CASE,31)),"^",8)!$P($G(^SRF(CASE,37)),"^") D DEL Q
"RTN","SROARET",9,0)
 .I SRT,SRT1,SRT>SRT1 D DEL
"RTN","SROARET",10,0)
 S SRCASE=0 F  S SRCASE=$O(^SRF("B",DFN,SRCASE)) Q:'SRCASE  I SRCASE'=SRTN D CHECK
"RTN","SROARET",11,0)
 I '$O(^SRF(SRTN,29,0)) W !!,"There are no surgical cases entered for "_SRNAME_"",!,"within 30 days of this operation." G END
"RTN","SROARET",12,0)
RETURN S SRPAGE="RETURNS TO SURGERY" D HDR^SROAUTL
"RTN","SROARET",13,0)
 S (SRCASE,CNT)=0 F  S SRCASE=$O(^SRF(SRTN,29,SRCASE)) Q:'SRCASE  D
"RTN","SROARET",14,0)
 .S CNT=CNT+1,X=$P(^SRF(SRTN,29,SRCASE,0),"^",3) I X="" S X="U",$P(^SRF(SRTN,29,SRCASE,0),"^",3)=X
"RTN","SROARET",15,0)
 .S SRELATE=$S(X="U":"UNRELATED",1:"RELATED"),SRETURN(CNT)=SRCASE_"^"_SRELATE D LIST
"RTN","SROARET",16,0)
 I '$D(SRETURN(2)) S X=1 D RELATED G END
"RTN","SROARET",17,0)
 W !,SRLINE,!
"RTN","SROARET",18,0)
PICK W !!,"Select Number: " R X:DTIME I '$T!("^"[X) S SRSOUT=1 G END
"RTN","SROARET",19,0)
 I '$D(SRETURN(X)) W !!,"Select the number corresponding to the return which you want to update, or",!,"enter RETURN to quit this option.",!!,"Press RETURN to continue  " R X:DTIME G RETURN
"RTN","SROARET",20,0)
 D RELATED G RETURN
"RTN","SROARET",21,0)
DEL ; delete returns
"RTN","SROARET",22,0)
 S DA(1)=SRTN,DA=SRCASE,DIK="^SRF("_SRTN_",29," D ^DIK
"RTN","SROARET",23,0)
 Q
"RTN","SROARET",24,0)
CHECK ; add to RETURNS if necessary
"RTN","SROARET",25,0)
 Q:$P($G(^SRF(SRCASE,"NON")),"^")="Y"!$P($G(^SRF(SRCASE,37)),"^")  S CAN=$P($G(^SRF(SRCASE,30)),"^") I CAN Q
"RTN","SROARET",26,0)
 S CAN=$P($G(^SRF(SRCASE,31)),"^",8) I CAN'="" Q
"RTN","SROARET",27,0)
 S CON=$P($G(^SRF(SRTN,"CON")),"^") I CON=SRCASE Q
"RTN","SROARET",28,0)
 S DATE=$P(^SRF(SRCASE,0),"^",9),SRT1=$P($G(^SRF(SRCASE,.2)),"^",10) I $E(DATE,1,7)<SRSDATE!(DATE>END)!(DATE=$P(SR(0),"^",9)) Q
"RTN","SROARET",29,0)
 I SRT,SRT1,SRT>SRT1 Q
"RTN","SROARET",30,0)
 I $D(^SRF(SRTN,29,SRCASE,0)) Q
"RTN","SROARET",31,0)
 I '$D(^SRF(SRTN,29,0)) S ^SRF(SRTN,29,0)="^130.43PA^^"
"RTN","SROARET",32,0)
 K DA,DO,DD,DA,DINUM,DIC S DA(1)=SRTN,DIC="^SRF("_SRTN_",29,",X=SRCASE,DINUM=X,DIC(0)="L",DLAYGO=130.43 D FILE^DICN K DD,DO,DIC,DINUM,DLAYGO
"RTN","SROARET",33,0)
 S $P(^SRF(SRTN,29,SRCASE,0),"^",3)="U"
"RTN","SROARET",34,0)
 Q
"RTN","SROARET",35,0)
LIST ; list returns
"RTN","SROARET",36,0)
 S SROPER=$P(^SRF(SRCASE,"OP"),"^")
"RTN","SROARET",37,0)
 S SROPER=SROPER_" - "_SRELATE
"RTN","SROARET",38,0)
 S DATE=$P(^SRF(SRCASE,0),"^",9),DATE=$E(DATE,4,5)_"/"_$E(DATE,6,7)_"/"_$E(DATE,2,3)
"RTN","SROARET",39,0)
 K SROPS,MM,MMM S:$L(SROPER)<65 SROPS(1)=SROPER I $L(SROPER)>64 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROARET",40,0)
 W !,CNT_".",?3,DATE,?15,SROPS(1) I $D(SROPS(2)) W !,?15,SROPS(2) I $D(SROPS(3)) W !,?15,SROPS(3)
"RTN","SROARET",41,0)
 W ! Q
"RTN","SROARET",42,0)
LOOP ; break procedures
"RTN","SROARET",43,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<65  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROARET",44,0)
 Q
"RTN","SROARET",45,0)
UPDATE ; update single return
"RTN","SROARET",46,0)
END I 'SRSOUT W !!,"Press RETURN to continue  " R X:DTIME
"RTN","SROARET",47,0)
END1 I $D(SRTN1) K SRTN,SRTN1
"RTN","SROARET",48,0)
 D ^SRSKILL W @IOF
"RTN","SROARET",49,0)
 Q
"RTN","SROARET",50,0)
RELATED ; update RELATED/UNRELATED status
"RTN","SROARET",51,0)
 S RETURN=$P(SRETURN(X),"^"),SRELATE=$P(SRETURN(X),"^",2),OPPOSITE=$S(SRELATE["U":"RELATED",1:"UNRELATED")
"RTN","SROARET",52,0)
 I $D(SRETURN(2)) S SRPAGE="RETURNS TO SURGERY" D HDR^SROAUTL W ! S SRCASE=$P(SRETURN(X),"^"),CNT=X D LIST W !,SRLINE,!
"RTN","SROARET",53,0)
CHANGE W !!,"This return to surgery is currently defined as "_SRELATE_" to the case selected.",!,"Do you want to change this status ? NO// " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 Q
"RTN","SROARET",54,0)
 S SRYN=$E(SRYN) I "YyNn"'[SRYN W !!,"Enter 'YES' to change the status of this return from "_SRELATE_" to "_OPPOSITE_".",!,"Enter 'NO' to leave the information unchanged.",! G CHANGE
"RTN","SROARET",55,0)
 S:SRYN="" SRYN="N" I "Yy"'[SRYN Q
"RTN","SROARET",56,0)
 S $P(^SRF(SRTN,29,RETURN,0),"^",3)=$E(OPPOSITE)
"RTN","SROARET",57,0)
 Q
"RTN","SROATCM1")
0^28^B51869518^B51308276
"RTN","SROATCM1",1,0)
SROATCM1 ;BIR/MAM - STUFF TRANMISSION IN ^TMP ;07/05/05
"RTN","SROATCM1",2,0)
 ;;3.0; Surgery ;**38,71,79,90,88,93,95,111,125,135,134,142**;24 Jun 93
"RTN","SROATCM1",3,0)
 K SRA F I=0,.2,200,201,202,205:1:208,207.1,209 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROATCM1",4,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRANAME=VADM(1),SEX=$P(VADM(5),"^"),Z=$P(VADM(3),"^"),SRSDATE=$P(SRA(0),"^",9),Y=$E(SRSDATE,1,7),AGE=$E(Y,1,3)-$E(Z,1,3)-($E(Y,4,7)<$E(Z,4,7))
"RTN","SROATCM1",5,0)
 S SHEMP="_"_$J(SRASITE,3)_$J(SRTN,7)_" 1 "_DT_$J(AGE,3)_$J(SEX,1)_$J(SRSDATE,12,4)_VA("PID")
"RTN","SROATCM1",6,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 2 ",SRACNT=SRACNT+1
"RTN","SROATCM1",7,0)
 S SRHD=$P(SRA(206),"^")
"RTN","SROATCM1",8,0)
 I SRHD["C" S SRH="C",SRHD=$E(SRHD,1,$L(SRHD)-1)
"RTN","SROATCM1",9,0)
 E  S SRH=" "
"RTN","SROATCM1",10,0)
 S SRWD=$P(SRA(206),"^",2)
"RTN","SROATCM1",11,0)
 I SRWD["K" S SRW="K",SRWD=$E(SRWD,1,$L(SRWD)-1)
"RTN","SROATCM1",12,0)
 E  S SRW=" "
"RTN","SROATCM1",13,0)
 S SHEMP=SHEMP_$J(SRHD,3)_SRH_$J(SRWD,3)_SRW_$J($P(SRA(200),"^",2),2)_$J($P(SRA(200),"^",11),2)_$J($P(SRA(206),"^",5),3)_$J($P(SRA(206),"^",6),2)_$J($P(SRA(206),"^",7),2)
"RTN","SROATCM1",14,0)
 S SRCT=$P($G(^SRF(SRTN,201)),"^",4) S:SRCT["NS" SRCT=""
"RTN","SROATCM1",15,0)
 S SHEMP=SHEMP_$J($P(SRA(200),"^",3),2)_$J(SRCT,4)_$J($P(SRA(206),"^",10),2)_$J($P(SRA(206),"^",11),2)_$J($P(SRA(200),"^",8),2)_$J(" ",2)_$J($P(SRA(206),"^",14),2)_$J(" ",2)
"RTN","SROATCM1",16,0)
 S SHEMP=SHEMP_$J($P(SRA(206),"^",16),2)_$J($P(SRA(206),"^",17),2)_$J($P(SRA(206),"^",18),3)_$J($P(SRA(206),"^",19),3)_$J($P(SRA(206),"^",20),2)_$J($P(SRA(206),"^",21),2)_$J($P(SRA(206),"^",22),2)_$J($P(SRA(206),"^",23),2)
"RTN","SROATCM1",17,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 3 ",SRACNT=SRACNT+1
"RTN","SROATCM1",18,0)
 S SHEMP=SHEMP_$J($P(SRA(206),"^",24),2)_$J($P(SRA(206),"^",25),3)_$J($P(SRA(206),"^",26),3)_$J($P(SRA(206),"^",27),3)
"RTN","SROATCM1",19,0)
 ; Left Main (node 3 pos 26-28), LAD (node 3 pos 29-31), Right Coronary (node 3 pos 32-34) & Circumflex Stenosis (node 3 pos 35-37)
"RTN","SROATCM1",20,0)
 S SHEMP=SHEMP_$J($P(SRA(206),"^",28),3)_$J($P($G(SRA(206)),"^",33),3)_$J($P($G(SRA(206)),"^",34),3)_$J($P($G(SRA(206)),"^",35),3)
"RTN","SROATCM1",21,0)
 ; LV Cont Grade (node 3 pos 39-40) & Mitral Regurgitation(node 3 pos 41-42)
"RTN","SROATCM1",22,0)
 N SROLV S SROLV=$P(SRA(206),"^",30)
"RTN","SROATCM1",23,0)
 S SHEMP=SHEMP_$J($S(SROLV="IIIa":"3A",SROLV="IIIb":"3B",1:SROLV),3)_$J($P($G(SRA(206)),"^",9),2)
"RTN","SROATCM1",24,0)
 ; Estimate of Mortality and ASA Class are changed to not transmit "NS"
"RTN","SROATCM1",25,0)
 S SREMDATE=$P($G(SRA(206)),"^",32)
"RTN","SROATCM1",26,0)
 S SREMO=$P($G(^SRF(SRTN,206)),"^",31) S:SREMO["NS" SREMDATE=""
"RTN","SROATCM1",27,0)
 ; Estimate of Mortality (node 3 pos 43-45) & date (node 3 pos 46-57)
"RTN","SROATCM1",28,0)
 S SHEMP=SHEMP_$J(SREMO,3)
"RTN","SROATCM1",29,0)
 S SHEMP=SHEMP_$S(SREMDATE="":$J(SREMDATE,12),1:$J(SREMDATE,12,4))
"RTN","SROATCM1",30,0)
 S X="",Y=$P($G(^SRF(SRTN,1.1)),"^",3) S:Y X=$P($P($G(^SRO(132.8,Y,0)),"^"),"-") S X=$E(X) S:X["N" X=""
"RTN","SROATCM1",31,0)
 S SHEMP=SHEMP_$J(X,1)
"RTN","SROATCM1",32,0)
 ; Cardiac Est. of Surg. Priority(node 3 pos 59) & date(node 3 pos 60-71)
"RTN","SROATCM1",33,0)
 S SHEMP=SHEMP_$J($P($G(SRA(208)),"^",12),1)
"RTN","SROATCM1",34,0)
 N SREMSPDT S SREMSPDT=$P($G(SRA(208)),"^",13)
"RTN","SROATCM1",35,0)
 S SHEMP=SHEMP_$S(SREMSPDT="":$J(SREMSPDT,12),1:$J(SREMSPDT,12,4))
"RTN","SROATCM1",36,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 4 ",SRACNT=SRACNT+1
"RTN","SROATCM1",37,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^"),2)_$J($P(SRA(207),"^",2),2)_$J($P(SRA(207),"^",3),2)_$J($P(SRA(207),"^",4),2)_$J($P(SRA(207),"^",5),2)_$J(" ",2)_$J($P(SRA(207),"^",7),2)
"RTN","SROATCM1",38,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^",8),2)_$J($P(SRA(207),"^",9),2)_$J($P(SRA(207),"^",10),2)_$J($P(SRA(207),"^",12),2)_$J($P(SRA(207),"^",13),2)_$J($P(SRA(207),"^",14),2)_$J($P(SRA(207),"^",15),2)
"RTN","SROATCM1",39,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^",16),2)_$J($P(SRA(207),"^",17),2)_$J($P(SRA(207),"^",18),2)_$J($P(SRA(207),"^",19),2)
"RTN","SROATCM1",40,0)
 S SRDEATH=$P($G(SRA(208)),"^"),SRDDATE=$E($P($G(^DPT(DFN,.35)),"^"),1,12) I SRDDATE'="" S SRDDATE=$$LJ^XLFSTR(SRDDATE,12,0)
"RTN","SROATCM1",41,0)
 S SHEMP=SHEMP_$J(SRDEATH,2)_$J(SRDDATE,12)
"RTN","SROATCM1",42,0)
 S SHEMP=SHEMP_$P(SRA(207),"^",20)
"RTN","SROATCM1",43,0)
 ; Other procedures node 5
"RTN","SROATCM1",44,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 5 ",SRACNT=SRACNT+1
"RTN","SROATCM1",45,0)
 S SHEMP=SHEMP_$TR($E($G(SRA(207.1)),1,65),",","^")
"RTN","SROATCM1",46,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 6 ",SRACNT=SRACNT+1
"RTN","SROATCM1",47,0)
 S SHEMP=SHEMP_$J($P(SRA(208),"^",2),2)_$J($P(SRA(208),"^",3),2)_$J($P(SRA(205),"^",17),2)_$J($P(SRA(208),"^",4),2)_$J($P(SRA(208),"^",5),2)_$J($P(SRA(205),"^",28),2)_$J($P(SRA(208),"^",6),2)
"RTN","SROATCM1",48,0)
 N SRRCS D RCSP S SHEMP=SHEMP_$J($P(SRA(205),"^",13),2)_$J(SRRCS,2)_$J($P(SRA(205),"^",22),2)_$J($P(SRA(205),"^",21),2)
"RTN","SROATCM1",49,0)
 N SRIP D CPR S SHEMP=SHEMP_$J(SRIP,2)
"RTN","SROATCM1",50,0)
 ;
"RTN","SROATCM1",51,0)
 ;Ethnicity contained in VADM(11)
"RTN","SROATCM1",52,0)
 N SROETCD,SROPTF S SROETCD="",SROPTF=""
"RTN","SROATCM1",53,0)
 S SROETCD=$P($G(VADM(11,1)),U,1)            ;Ethnicity code
"RTN","SROATCM1",54,0)
 S SROPTF=$$PTR2CODE^DGUTL4(SROETCD,2,4)     ;PTF Ethnicity code
"RTN","SROATCM1",55,0)
 S SHEMP=SHEMP_$J($G(SROPTF),1)   ;Ethnicity
"RTN","SROATCM1",56,0)
 ;
"RTN","SROATCM1",57,0)
 ;Multiple races contained in VADM(12)
"RTN","SROATCM1",58,0)
 N SRORAC,SRORCD,SRORCE S SRORCE=0,SRORAC="",SRORACE="",SRORCD=""
"RTN","SROATCM1",59,0)
 F  S SRORCE=$O(VADM(12,SRORCE)) Q:SRORCE=""  D
"RTN","SROATCM1",60,0)
 .S SRORAC=$P($G(VADM(12,SRORCE)),U,1)        ;Race code
"RTN","SROATCM1",61,0)
 .S SRORCD=$$PTR2CODE^DGUTL4(SRORAC,1,4)     ;PTF race code
"RTN","SROATCM1",62,0)
 .S SRORACE=SRORACE_$J(SRORCD,1)
"RTN","SROATCM1",63,0)
 ;
"RTN","SROATCM1",64,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP_SRORACE  ;Eth, race added
"RTN","SROATCM1",65,0)
 ;
"RTN","SROATCM1",66,0)
 S SHEMP=$E(SHEMP,1,11)_" 7 ",SRACNT=SRACNT+1
"RTN","SROATCM1",67,0)
 S SHEMP=SHEMP_$TR(SRANAME,","," ")
"RTN","SROATCM1",68,0)
 I $P($G(^SRF(SRTN,"RA")),"^",3)=1 S SHEMP=SHEMP_$J("***RE-TRANSMISSION",38)
"RTN","SROATCM1",69,0)
 ; zip code, employ status, hemoglobin, hemo date, serum albumin, albumin date, creatitine date, total ischemic time, min invasive, total cpb time, total pre,post ICU & step down unit LOS,
"RTN","SROATCM1",70,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 8 ",SRACNT=SRACNT+1
"RTN","SROATCM1",71,0)
 K VADM D ADD^VADPT S X=$S($P(VAPA(11),"^",2)'="":$P(VAPA(11),"^",2),1:VAPA(6))
"RTN","SROATCM1",72,0)
 S SHEMP=SHEMP_$J(X,10)_$J($P(SRA(208),"^",18),1)_$J($P(SRA(201),"^",20),7)_$J($P(SRA(202),"^",20),7)_$J($P(SRA(201),"^",8),4)_$J($P(SRA(202),"^",8),7)_$J($P(SRA(202),"^",4),7)_$J($P(SRA(206),"^",36),4)
"RTN","SROATCM1",73,0)
 S SHEMP=SHEMP_$J($P(SRA(207),"^",22),1)_$J($P(SRA(206),"^",37),4)_$J($P(SRA(207),"^",23),2)
"RTN","SROATCM1",74,0)
 ; cpt codes
"RTN","SROATCM1",75,0)
NODE9 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 9 ",SRACNT=SRACNT+1
"RTN","SROATCM1",76,0)
 S SRPMOD="",SR10SP="          ",CPT=$P($G(^SRO(136,SRTN,0)),"^",2) D
"RTN","SROATCM1",77,0)
 .I CPT S CPT=$P($$CPT^ICPTCOD(CPT),"^",2),SRCASE=SRTN D MOD^SROATM3 S SRPMOD=SRM
"RTN","SROATCM1",78,0)
 .S SHEMP=SHEMP_$J(CPT,5),SRPMOD=SRPMOD_SR10SP
"RTN","SROATCM1",79,0)
 K CPT F I=1:1:10 S (CPT(I),SRMOD(I))=""
"RTN","SROATCM1",80,0)
 S (OPS,CNT)=0 F  S OPS=$O(^SRO(136,SRTN,3,OPS)) Q:'OPS!(CNT=10)  S CNT=CNT+1,X=$P($G(^SRO(136,SRTN,3,OPS,0)),"^") I X S CPT(CNT)=$P($$CPT^ICPTCOD(X),"^",2) D OTH^SROATM3
"RTN","SROATCM1",81,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)_$J(CPT(7),5)_$J(CPT(8),5)_$J(CPT(9),5)_$J(CPT(10),5)
"RTN","SROATCM1",82,0)
 ; card cath date, admission date/time, hospital discharge date/time, anesthesia start & end date/times
"RTN","SROATCM1",83,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 10",SRACNT=SRACNT+1
"RTN","SROATCM1",84,0)
 I $P(SRA(207),"^",21)'="" D
"RTN","SROATCM1",85,0)
 .I $E($P(SRA(207),"^",21),8)="." Q
"RTN","SROATCM1",86,0)
 .E  S $P(SRA(207),"^",21)=$P(SRA(207),"^",21)_"."
"RTN","SROATCM1",87,0)
 S $P(SRA(207),"^",21)=$$LJ^XLFSTR($P(SRA(207),"^",21),12,0)
"RTN","SROATCM1",88,0)
 S SHEMP=SHEMP_$J($E($P(SRA(207),"^",21),1,12),12)
"RTN","SROATCM1",89,0)
 S (SRDATE,SRI)="" F SRI=14,15 S SRDATE=$E($P($G(SRA(208)),"^",SRI),1,12) S SRDATE=$$LJ^XLFSTR(SRDATE,12,0) S SHEMP=SHEMP_SRDATE
"RTN","SROATCM1",90,0)
 S (SRDATE,SRI)="" F SRI=1,4 S SRDATE=$P(SRA(.2),"^",SRI) S SRDATE=$$LJ^XLFSTR(SRDATE,12,0) S SHEMP=SHEMP_SRDATE
"RTN","SROATCM1",91,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 11",SRACNT=SRACNT+1
"RTN","SROATCM1",92,0)
 S (SRDATE,SRI)="" F SRI=10,12,2,3 S SRDATE=$P(SRA(.2),"^",SRI),SRDATE=$$LJ^XLFSTR(SRDATE,12,0) S SHEMP=SHEMP_SRDATE
"RTN","SROATCM1",93,0)
 ; preop risk factors comments
"RTN","SROATCM1",94,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 12",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.1)),1,65),",","^")
"RTN","SROATCM1",95,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 13",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.1)),66,130),",","^")
"RTN","SROATCM1",96,0)
 ; resource data comments
"RTN","SROATCM1",97,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 14",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.2)),1,65),",","^")
"RTN","SROATCM1",98,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 15",SRACNT=SRACNT+1 S SHEMP=SHEMP_$TR($E($G(^SRF(SRTN,206.2)),66,130),",","^")
"RTN","SROATCM1",99,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1,SHEMP=$E(SHEMP,1,11)_" 16"_$E(SRPMOD,1,10) F I=1:1:5 S SHEMP=SHEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATCM1",100,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1,SHEMP=$E(SHEMP,1,11)_" 17" F I=6:1:10 S SHEMP=SHEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATCM1",101,0)
 S X=$$SITE^SROUTL0(SRTN),SRDIV=$S(X:$P(^SRO(133,X,0),"^"),1:""),SRDIV=$S(SRDIV:$$GET1^DIQ(4,SRDIV,99),1:SRASITE),SHEMP=SHEMP_$J(SRDIV,6)
"RTN","SROATCM1",102,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATCM1",103,0)
 Q
"RTN","SROATCM1",104,0)
RCSP S X=$P(SRA(208),"^",7) I X="N" S SRRCS=0 Q
"RTN","SROATCM1",105,0)
 N SROCC S SROCC=0 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,16,SROCC,0),"^",2)=27 S X=$P(^SRF(SRTN,16,SROCC,0),"^",5) S:X'="" SRRCS=X Q
"RTN","SROATCM1",106,0)
 Q
"RTN","SROATCM1",107,0)
CPR S SRIP=$P(SRA(205),"^",26) I SRIP'="Y" Q
"RTN","SROATCM1",108,0)
 N SROCC S SROCC=0 F  S SROCC=$O(^SRF(SRTN,10,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,10,SROCC,0),"^",2)=16 S SRIP="I" Q
"RTN","SROATCM1",109,0)
 I SRIP="Y" S SROCC=0 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  I $P(^SRF(SRTN,16,SROCC,0),"^",2)=16 S SRIP="P" Q
"RTN","SROATCM1",110,0)
 Q
"RTN","SROATM2")
0^29^B33399568^B32533830
"RTN","SROATM2",1,0)
SROATM2 ;BIR/MAM - NON CARDIAC TRANSMISSION (CONT) ;07/05/05
"RTN","SROATM2",2,0)
 ;;3.0; Surgery ;**38,39,45,47,57,60,62,68,81,88,97,129,125,142**;24 Jun 93
"RTN","SROATM2",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATM2",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATM2",5,0)
 ;**         are prohibited.
"RTN","SROATM2",6,0)
 ;
"RTN","SROATM2",7,0)
 K SRA F I=.2,.3,1.1,201:1:208,208.1 S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROATM2",8,0)
 S SRA("CON")=$P($G(^SRF(SRTN,"CON")),"^") I SRA("CON"),$P($G(^SRF(SRA("CON"),30)),"^")!($P($G(^SRF(SRA("CON"),31)),"^",8)) S SRA("CON")=""
"RTN","SROATM2",9,0)
 D RS
"RTN","SROATM2",10,0)
 S SHEMP=SHEMP_$J($E($P(SRA(.2),"^",2),1,12),12)_$J($E($P(SRA(.2),"^",3),1,12),12)_$J(SRATT,2)_"  "_$J($P($G(^SRF(SRTN,200)),"^",54),2)
"RTN","SROATM2",11,0)
 S SRICD=$P($G(^SRO(136,SRTN,0)),"^",3) S:SRICD SRICD=$P(^ICD9(SRICD,0),"^") S SHEMP=SHEMP_$J(SRICD,6)_$J($P(SRA(205),"^"),4)_$J($E($P(SRA(205),"^",2)),1)
"RTN","SROATM2",12,0)
 S NYUK=$P($G(^DPT(DFN,.35)),"^"),NYUK=$E(NYUK,1,7),SHEMP=SHEMP_$J(NYUK,7)
"RTN","SROATM2",13,0)
 S NYUK="N",SRET=0 F  S SRET=$O(^SRF(SRTN,29,SRET)) Q:'SRET  S CASE=$P(^SRF(SRTN,29,SRET,0),"^") I $P($G(^SRF(CASE,.2)),"^",10) S NYUK="Y" Q
"RTN","SROATM2",14,0)
 S SHEMP=SHEMP_NYUK_$J($P($G(^SRF(SRTN,.4)),"^",7),1)_$J($E($P($G(^SRF(SRTN,0)),"^",12)),1)_$J($P($G(^SRF(SRTN,0)),"^",3),1)
"RTN","SROATM2",15,0)
 S (SRADMIT,SRADMT)=0 I $P($G(^SRF(SRTN,0)),"^",12)="O" D ADM^SROQ0A S SRADMIT=$S(SRADMT=0:"0",1:"1")
"RTN","SROATM2",16,0)
 S SHEMP=SHEMP_" "_SRADMIT D OCC^SROATMNO S SHEMP=SHEMP_SRTMP_$J(SROCTYPE,1)_$J(SROC(35),2)_$J(SROC(36),2) K SROC,SROCTYPE
"RTN","SROATM2",17,0)
 S NYUK=$P(^DPT(DFN,0),"^",3),NYUK=$E(NYUK,1,7),SHEMP=SHEMP_$J(NYUK,7) ; date of birth
"RTN","SROATM2",18,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  4",SRACNT=SRACNT+1
"RTN","SROATM2",19,0)
 F MOE=1:1:6 S CPT(MOE)=""
"RTN","SROATM2",20,0)
 S (X,CNT)=0 F  S X=$O(^SRF(SRTN,29,X)) Q:'X!(CNT=6)  I $P(^SRF(SRTN,29,X,0),"^",3)="R" S NYUK=$P(^SRF(SRTN,29,X,0),"^") D RETURN
"RTN","SROATM2",21,0)
 S SHEMP=SHEMP_$J(CNT,2)
"RTN","SROATM2",22,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)
"RTN","SROATM2",23,0)
 F MOE=1:1:6 S CPT(MOE)=""
"RTN","SROATM2",24,0)
 S (X,CNT)=0 F  S X=$O(^SRF(SRTN,29,X)) Q:'X!(CNT=6)  I $P(^SRF(SRTN,29,X,0),"^",3)'="R" S NYUK=$P(^SRF(SRTN,29,X,0),"^") D RETURN
"RTN","SROATM2",25,0)
 S SHEMP=SHEMP_$J(CNT,2)
"RTN","SROATM2",26,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)
"RTN","SROATM2",27,0)
 S SRSDATE=$P(^SRF(SRTN,0),"^",9) K SRSEP D OCC^SROAUTL0 S:'$D(SRO) SRO="",$P(SRO," ",198)="" S SHEMP=SHEMP_$E(SRO,1,112)
"RTN","SROATM2",28,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  5",SRACNT=SRACNT+1
"RTN","SROATM2",29,0)
 S NYUK=$P(SRA(205),"^",6) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",7) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",8) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",10) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM2",30,0)
 S NYUK="N" I $P(SRA(205),"^",11)="Y"!($P(SRA(205),"^",28)="Y") S NYUK="Y"
"RTN","SROATM2",31,0)
 D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",12) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",13) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(29)),U)
"RTN","SROATM2",32,0)
 D IFELSE
"RTN","SROATM2",33,0)
 S NYUK=$P(SRA(205),"^",16) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",17) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",18) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(31)),U)
"RTN","SROATM2",34,0)
 D IFELSE
"RTN","SROATM2",35,0)
 S NYUK="N",SRCVA=$P(SRA(205),"^",21),SRST=$P(SRA(208),"^",8) I SRCVA="Y"!(SRST="Y") S NYUK="Y"
"RTN","SROATM2",36,0)
 D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",22) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",23) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(30)),U)
"RTN","SROATM2",37,0)
 D IFELSE
"RTN","SROATM2",38,0)
 S NYUK=$P(SRA(205),"^",26) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",27) D ONE S SHEMP=SHEMP_MOE_" " S NYUK=$P($G(SROOC(32)),U)
"RTN","SROATM2",39,0)
 D IFELSE
"RTN","SROATM2",40,0)
 S NYUK=$P(SRA(205),"^",31) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",32) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",33) D ONE S SHEMP=SHEMP_MOE,NYUK=$P(SRA(205),"^",34) D ONE S SHEMP=SHEMP_MOE
"RTN","SROATM2",41,0)
 S NYUK=$P(SRA(205),"^",35) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(21)),U) D IFELSE
"RTN","SROATM2",42,0)
 S SHEMP=SHEMP_$E(SRO,113,196),NYUK=$P(SRA(205),"^",37) D ONE S SHEMP=SHEMP_MOE,NYUK=$P($G(SROOC(36)),U) D IFELSE
"RTN","SROATM2",43,0)
 S SHEMP=SHEMP_$E(SRO,197)
"RTN","SROATM2",44,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  6",SRACNT=SRACNT+1
"RTN","SROATM2",45,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^"),5)_$J($P(SRA(202),"^"),7)_$J($P(SRA(201),"^",8),4)_$J($P(SRA(202),"^",8),7)_$J($P(SRA(201),"^",9),5)_$J($P(SRA(202),"^",9),7)_$J($P(SRA(201),"^",5),5)_$J($P(SRA(202),"^",5),7)
"RTN","SROATM2",46,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",4),4)_$J($P(SRA(202),"^",4),7)
"RTN","SROATM2",47,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",27),5)_$J($P(SRA(202),"^",27),7)
"RTN","SROATM2",48,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  7",SRACNT=SRACNT+1
"RTN","SROATM2",49,0)
 S SHEMP=SHEMP_$J($E($P(SRA(208),"^",14),1,12),12)_"  "_$J($P($G(SRA(208)),"^",11),2)_$J($P($G(SRA(208)),"^",10),2)_$J($E($P($G(SRA(208)),"^",9),1,4),4)
"RTN","SROATM2",50,0)
 S SHEMP=SHEMP_$J($E($P(SRA(208),"^",15),1,12),12)_"  "_$J($P($G(SRA(.3)),"^",9),2)_$J($P($G(SRA(206)),"^",3),2)_$J($P($G(SRA(206)),"^",4),2)_$J($P($G(SRA(206)),"^",8),2)_$J($G(SRTRAUMA),2)
"RTN","SROATM2",51,0)
 S SHEMP=SHEMP_$J($E($P(SRA(208),"^",16),1,12),12)_$J($E($P(SRA(208),"^",17),1,12),12)_$J($E($P(SRA(.2),"^",12),1,12),12)_$J($E($P(SRA(.2),"^"),1,12),12)
"RTN","SROATM2",52,0)
 S SHEMP=SHEMP_$J($E($P(SRA(1.1),"^",8),1,12),12)_$J($E($P(SRA(208.1),"^"),1,12),12)_$J($E($P(SRA(208.1),"^",2),1,12),12)_$J($E($P(SRA(208.1),"^",3),1,3),3)_$J(SRA("CON"),10)_$J($E($P(SRA(.2),"^",4),1,12),12)
"RTN","SROATM2",53,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  8",SRACNT=SRACNT+1
"RTN","SROATM2",54,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",11),5)_$J($P(SRA(202),"^",11),7)_$J($P(SRA(201),"^",12),5)_$J($P(SRA(202),"^",12),7)_$J($P(SRA(201),"^",13),4)_$J($P(SRA(202),"^",13),7)_$J($P(SRA(201),"^",14),4)_$J($P(SRA(202),"^",14),7)
"RTN","SROATM2",55,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",15),5)_$J($P(SRA(202),"^",15),7)
"RTN","SROATM2",56,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_"  9",SRACNT=SRACNT+1
"RTN","SROATM2",57,0)
 D ^SROATM3
"RTN","SROATM2",58,0)
 Q
"RTN","SROATM2",59,0)
ONE S MOE=$S(NYUK="NS":"S",NYUK="":" ",1:NYUK)
"RTN","SROATM2",60,0)
 Q
"RTN","SROATM2",61,0)
IFELSE I NYUK["NO ICD9" S SHEMP=SHEMP_$J(" ",6)
"RTN","SROATM2",62,0)
 E  S SHEMP=SHEMP_$J(NYUK,6)
"RTN","SROATM2",63,0)
 Q
"RTN","SROATM2",64,0)
RS ; resident supervision (attending code)
"RTN","SROATM2",65,0)
 N SRSR,SRX S (SRATT,SRSR)="",SRX=$G(^SRF(SRTN,.1)) D SRES
"RTN","SROATM2",66,0)
 S SRATT=$P(SRX,"^",10) I SRATT="" D
"RTN","SROATM2",67,0)
 .I SRSR=0 S SRATT=$S($P(^SRF(SRTN,0),"^",9)<3040401:1,1:9) Q
"RTN","SROATM2",68,0)
 .S SRATT=99
"RTN","SROATM2",69,0)
 Q
"RTN","SROATM2",70,0)
SRES ; does site have residents?
"RTN","SROATM2",71,0)
 N SRDIV,SRSITE,Y S SRDIV=$P($G(^SRF(SRTN,8)),"^") I SRDIV S SRSITE=$O(^SRO(133,"B",SRDIV,0)),SRSR=$P(^SRO(133,SRSITE,0),"^",19)
"RTN","SROATM2",72,0)
 Q
"RTN","SROATM2",73,0)
RETURN ; CPT of Returns
"RTN","SROATM2",74,0)
 S Y=$P($G(^SRO(136,NYUK,0)),"^",2) I Y S CNT=CNT+1,CPT(CNT)=$P($$CPT^ICPTCOD(Y),"^",2)
"RTN","SROATM2",75,0)
 Q
"RTN","SROATM3")
0^30^B19436720^B19136385
"RTN","SROATM3",1,0)
SROATM3 ;BIR/MAM - NON CARDIAC TRANSMISSION (CONT) ;09/09/05
"RTN","SROATM3",2,0)
 ;;3.0; Surgery ;**27,38,62,88,97,111,142**;24 Jun 93
"RTN","SROATM3",3,0)
 N SRCONMOD,SRMOD,SRPMOD,SR10SP
"RTN","SROATM3",4,0)
 S SHEMP=SHEMP_$J($P(SRA(201),"^",16),5)_$J($P(SRA(202),"^",16),7)_$J($P(SRA(201),"^",17),4)_$J($P(SRA(202),"^",17),7)_$J($P(SRA(203),"^"),5)_$J($P(SRA(204),"^"),7)_$J($P(SRA(203),"^",2),5)_$J($P(SRA(204),"^",2),7)
"RTN","SROATM3",5,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 10",SRACNT=SRACNT+1
"RTN","SROATM3",6,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",3),3)_$J($P(SRA(204),"^",3),7)_$J($P(SRA(203),"^",4),3)_$J($P(SRA(204),"^",4),7)_$J($P(SRA(203),"^",6),4)_$J($P(SRA(204),"^",6),7)
"RTN","SROATM3",7,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",7),6)_$J($P(SRA(204),"^",7),7)
"RTN","SROATM3",8,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 11",SRACNT=SRACNT+1
"RTN","SROATM3",9,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",8),4)_$J($P(SRA(204),"^",8),7)_$J($P(SRA(203),"^",9),5)_$J($P(SRA(204),"^",9),7)_$J($P(SRA(203),"^",10),4)_$J($P(SRA(204),"^",10),7)
"RTN","SROATM3",10,0)
 S SHEMP=SHEMP_$J($P(SRA(203),"^",12),4)_$J($P(SRA(204),"^",12),7)_$J($P(SRA(203),"^",13),5)_$J($P(SRA(204),"^",13),7)_$J($P(SRA(203),"^",14),5)_$J($P(SRA(204),"^",14),7)
"RTN","SROATM3",11,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" 12",SRACNT=SRACNT+1
"RTN","SROATM3",12,0)
 S (SRPMOD,SRCONMOD)="",SR10SP="          " F I="OP","CON" S SRA(I)=$G(^SRF(SRTN,I))
"RTN","SROATM3",13,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2) D
"RTN","SROATM3",14,0)
 .I SRA("CON"),$P($G(^SRF(SRA("CON"),30)),"^")!($P($G(^SRF(SRA("CON"),31)),"^",8)) S SRA("CON")=""
"RTN","SROATM3",15,0)
 .I CPT S CPT=$P($$CPT^ICPTCOD(CPT),"^",2),SRCASE=SRTN D MOD S SRPMOD=SRM
"RTN","SROATM3",16,0)
 .S SHEMP=SHEMP_$J(CPT,5),SRPMOD=SRPMOD_SR10SP
"RTN","SROATM3",17,0)
 S CPT="",CON=$P(SRA("CON"),"^") S:CON CPT=$P($G(^SRO(136,CON,0)),"^",2) D
"RTN","SROATM3",18,0)
 .I CPT S CPT=$P($$CPT^ICPTCOD(CPT),"^",2),SRCASE=CON D MOD S SRCONMOD=SRM
"RTN","SROATM3",19,0)
 .S SHEMP=SHEMP_$J(CPT,5),SRCONMOD=SRCONMOD_SR10SP
"RTN","SROATM3",20,0)
 S CPT="",SHEMP=SHEMP_$J(CPT,5)
"RTN","SROATM3",21,0)
 K CPT F I=1:1:10 S (CPT(I),SRMOD(I))=""
"RTN","SROATM3",22,0)
 S (OPS,CNT)=0 F  S OPS=$O(^SRO(136,SRTN,3,OPS)) Q:'OPS!(CNT=10)  S CNT=CNT+1,X=$P($G(^SRO(136,SRTN,3,OPS,0)),"^") I X S CPT(CNT)=$P($$CPT^ICPTCOD(X),"^",2) D OTH
"RTN","SROATM3",23,0)
 S SHEMP=SHEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)_$J(CPT(7),5)_$J(CPT(8),5)_$J(CPT(9),5)_$J(CPT(10),5)
"RTN","SROATM3",24,0)
 S SHEMP=SHEMP_$E(SRPMOD,1,10)_$E(SRCONMOD,1,10) F I=1:1:10 S SHEMP=SHEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATM3",25,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATM3",26,0)
 ;
"RTN","SROATM3",27,0)
 ;Ethnicity contained in VADM(11)
"RTN","SROATM3",28,0)
 N SROETCD,SROPTF S SHEMP=$E(SHEMP,1,11)_" 13"
"RTN","SROATM3",29,0)
 S SROETCD="",SROPTF=""
"RTN","SROATM3",30,0)
 S SROETCD=$P($G(VADM(11,1)),U,1)            ;Ethnicity code
"RTN","SROATM3",31,0)
 S SROPTF=$$PTR2CODE^DGUTL4(SROETCD,2,4)     ;PTF Ethnicity code
"RTN","SROATM3",32,0)
 S SHEMP=SHEMP_$J($G(SROPTF),1)   ;Ethnicity
"RTN","SROATM3",33,0)
 ;
"RTN","SROATM3",34,0)
 ;Multiple races contained in VADM(12)
"RTN","SROATM3",35,0)
 N SRORAC,SRORCD,SRORCE S SRORCE=0,SRORAC="",SRORACE="",SRORCD=""
"RTN","SROATM3",36,0)
 F  S SRORCE=$O(VADM(12,SRORCE)) Q:SRORCE=""  D
"RTN","SROATM3",37,0)
 .S SRORAC=$P($G(VADM(12,SRORCE)),U,1)       ;Race code
"RTN","SROATM3",38,0)
 .S SRORCD=$$PTR2CODE^DGUTL4(SRORAC,1,4)     ;PTF race code
"RTN","SROATM3",39,0)
 .S SRORACE=SRORACE_$J(SRORCD,1)
"RTN","SROATM3",40,0)
 ;
"RTN","SROATM3",41,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP_SRORACE   ;Line 13
"RTN","SROATM3",42,0)
 S SRACNT=SRACNT+1
"RTN","SROATM3",43,0)
 ;
"RTN","SROATM3",44,0)
 S SHEMP=$E(SHEMP,1,11)_" A1"
"RTN","SROATM3",45,0)
 S SHEMP=SHEMP_SRANAME,^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A2",SRACNT=SRACNT+1
"RTN","SROATM3",46,0)
 S SRA(0)=^SRF(SRTN,0),DFN=$P(SRA(0),"^") K SRA,VADM D ADD^VADPT
"RTN","SROATM3",47,0)
 S SHEMP=SHEMP_VAPA(1),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A3",SRACNT=SRACNT+1
"RTN","SROATM3",48,0)
 S SHEMP=SHEMP_VAPA(2),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A4",SRACNT=SRACNT+1
"RTN","SROATM3",49,0)
 S SHEMP=SHEMP_VAPA(3),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A5",SRACNT=SRACNT+1
"RTN","SROATM3",50,0)
 S SHEMP=SHEMP_VAPA(4),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A6",SRACNT=SRACNT+1
"RTN","SROATM3",51,0)
 S SHEMP=SHEMP_$P(VAPA(5),"^",2),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A7",SRACNT=SRACNT+1
"RTN","SROATM3",52,0)
 S SHEMP=SHEMP_VAPA(6),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SHEMP=$E(SHEMP,1,11)_" A8",SRACNT=SRACNT+1
"RTN","SROATM3",53,0)
 S SHEMP=SHEMP_VAPA(8),^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SHEMP,SRACNT=SRACNT+1
"RTN","SROATM3",54,0)
 Q
"RTN","SROATM3",55,0)
MOD ; get principal CPT modifiers
"RTN","SROATM3",56,0)
 S SRI=0,SRCNT=1,SRM="" F  S SRI=$O(^SRO(136,SRCASE,1,SRI)) Q:'SRI  D  Q:SRCNT>5
"RTN","SROATM3",57,0)
 .S X=$P(^SRO(136,SRCASE,1,SRI,0),"^"),Y=$P($$MOD^ICPTMOD(X,"I"),"^",2)
"RTN","SROATM3",58,0)
 .I Y'="" S SRM=SRM_Y,SRCNT=SRCNT+1
"RTN","SROATM3",59,0)
 Q
"RTN","SROATM3",60,0)
OTH ; get other procedure CPT modifiers
"RTN","SROATM3",61,0)
 S SRI=0,SRCNT=1 F  S SRI=$O(^SRO(136,SRTN,3,OPS,1,SRI)) Q:'SRI  D  Q:SRCNT>5
"RTN","SROATM3",62,0)
 .S X=$P(^SRO(136,SRTN,3,OPS,1,SRI,0),"^"),Y=$P($$MOD^ICPTMOD(X,"I"),"^",2)
"RTN","SROATM3",63,0)
 .I Y'="" S SRMOD(CNT)=SRMOD(CNT)_Y,SRCNT=SRCNT+1
"RTN","SROATM3",64,0)
 Q
"RTN","SROATMNO")
0^92^B25963736^B25194831
"RTN","SROATMNO",1,0)
SROATMNO ;BIR/MAM - TRANSMIT NO ASSESSMENT ;09/09/05
"RTN","SROATMNO",2,0)
 ;;3.0; Surgery ;**27,38,47,62,68,79,83,81,88,93,95,97,129,125,142**;24 Jun 93
"RTN","SROATMNO",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROATMNO",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROATMNO",5,0)
 ;**         are prohibited.
"RTN","SROATMNO",6,0)
 ;
"RTN","SROATMNO",7,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROATMNO",8,0)
 ;
"RTN","SROATMNO",9,0)
 N SR10SP,SRINTUB,SR95PO,TDATE K ^TMP("SRA",$J) S SRATOT=0,SRASITE=+$P($$SITE^SROVAR,"^",3),(SRAMNUM,SRACNT)=1
"RTN","SROATMNO",10,0)
 S TDATE=0 F  S TDATE=$O(^SRF("AQ",TDATE)) Q:TDATE=""  I DT'<TDATE S SRTN=0 F  S SRTN=$O(^SRF("AQ",TDATE,SRTN)) Q:'SRTN  D SET
"RTN","SROATMNO",11,0)
 S SRATOTM=SRAMNUM D ^SROATM4
"RTN","SROATMNO",12,0)
 Q
"RTN","SROATMNO",13,0)
SET I $P($G(^SRF(SRTN,.4)),"^",2)="T" K ^SRF("AQ",TDATE,SRTN) Q
"RTN","SROATMNO",14,0)
 I $P($G(^SRF(SRTN,30)),"^")!$P($G(^SRF(SRTN,31)),"^",8)!'$P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,"NON")),"^")="Y") K ^SRF("AQ",TDATE,SRTN) S $P(^SRF(SRTN,.4),"^",2)="" Q
"RTN","SROATMNO",15,0)
 I $P($G(^SRF(SRTN,"RA")),"^",6)="Y",$P($G(^SRF(SRTN,"RA")),"^",2)="N" K ^SRF("AQ",TDATE,SRTN) Q
"RTN","SROATMNO",16,0)
 S SR10SP="          " K DA,DIE,DR S DA=SRTN,DIE=130,DR="905///R" D ^DIE K DR,DA,DIE
"RTN","SROATMNO",17,0)
 S SRA(0)=^SRF(SRTN,0),DATE=$E($P(SRA(0),"^",9),1,7),SPEC=$P(SRA(0),"^",4) S:SPEC SPEC=$P(^DIC(45.3,$P(^SRO(137.45,SPEC,0),"^",2),0),"^")
"RTN","SROATMNO",18,0)
 S EMERG=$P(SRA(0),"^",10),EMERG=$S(EMERG="EM":"Y",1:"N")
"RTN","SROATMNO",19,0)
 K SRTECH,SRZ S SRT=0 F  S SRT=$O(^SRF(SRTN,6,SRT)) Q:'SRT  D ^SROPRIN Q:$D(SRZ)
"RTN","SROATMNO",20,0)
 I $D(SRTECH) S SRINTUB=$P($G(^SRF(SRTN,6,SRT,8)),"^",2)
"RTN","SROATMNO",21,0)
 I '$D(SRTECH) S (SRTECH,SRINTUB)=""
"RTN","SROATMNO",22,0)
 S CPT=$P($G(^SRO(136,SRTN,0)),"^",2),SRPMOD="" I CPT S CPT=$P($$CPT^ICPTCOD(CPT),"^",2) D
"RTN","SROATMNO",23,0)
 .S SRM=0,SRCNT=1 F  S SRM=$O(^SRO(136,SRTN,1,SRM)) Q:'SRM  D  Q:SRCNT>5
"RTN","SROATMNO",24,0)
 ..S X=$P(^SRO(136,SRTN,1,SRM,0),"^") I X S Y=$P($$MOD^ICPTMOD(X,"I"),"^",2),SRPMOD=SRPMOD_Y,SRCNT=SRCNT+1
"RTN","SROATMNO",25,0)
 S DFN=$P(SRA(0),"^") N I D DEM^VADPT S SRDOB=$E($P(VADM(3),"^"),1,7)
"RTN","SROATMNO",26,0)
 S X=$$SITE^SROUTL0(SRTN),SRDIV=$S(X:$P(^SRO(133,X,0),"^"),1:""),SRDIV=$S(SRDIV:$$GET1^DIQ(4,SRDIV,99),1:SRASITE)
"RTN","SROATMNO",27,0)
 D RS^SROATM2
"RTN","SROATMNO",28,0)
 S SRMAJMIN=$E($P($G(^SRF(SRTN,0)),U,3),1)
"RTN","SROATMNO",29,0)
 S SRDEATH=$E($P($G(^DPT(DFN,.35)),U),1,7)
"RTN","SROATMNO",30,0)
 S SRDTHUR=$E($P($G(^SRF(SRTN,.4)),U,7),1)
"RTN","SROATMNO",31,0)
 S SRSTATUS=$E($P($G(^SRF(SRTN,0)),U,12),1) I SRSTATUS'="I"&(SRSTATUS'="O") S VAIP("D")=$P(SRA(0),"^",9) D IN5^VADPT S SRSTATUS=$S(VAIP(13):"I",1:"O") K VAIP
"RTN","SROATMNO",32,0)
 S SRAGE="" I $P(VADM(3),"^") S SRAGE=$E(DATE,1,3)-$E($P(VADM(3),"^"),1,3)-($E(DATE,4,7)<$E($P(VADM(3),"^"),4,7))
"RTN","SROATMNO",33,0)
 S SRASA="",Y=$P($G(^SRF(SRTN,1.1)),"^",3) S:Y X=$P($P($G(^SRO(132.8,Y,0)),"^"),"-"),SRASA=$E(X,1,2)
"RTN","SROATMNO",34,0)
 ; Admission wi 14 days following outpatient surgery due to an Occrrence 
"RTN","SROATMNO",35,0)
 S (SRADMIT,SRADMT)=0 I SRSTATUS="O" D ADM^SROQ0A S SRADMIT=$S(SRADMT=0:"0",1:"1")
"RTN","SROATMNO",36,0)
 S EXC=$P($G(^SRF(SRTN,"RA")),"^",7),SRWOUND=$P($G(^SRF(SRTN,"1.0")),"^",8)
"RTN","SROATMNO",37,0)
 D OCC
"RTN","SROATMNO",38,0)
 S SRNODE="" D
"RTN","SROATMNO",39,0)
 .I $P($G(^SRF(SRTN,"RA")),U,6)="N" S SRNODE="  *" Q
"RTN","SROATMNO",40,0)
 .I $P($G(^SRF(SRTN,"RA")),U,2)="C" S SRNODE="  C" Q
"RTN","SROATMNO",41,0)
 .I $P($G(^SRF(SRTN,"RA")),U,6)="" S SRNODE="   " Q
"RTN","SROATMNO",42,0)
 S SRTEMP="@"_$J(SRASITE,3)_$J(SRTN,7)_SRNODE_DATE_$J(SRTECH,3)_$J(EMERG,1)_$J(SPEC,3)_$J(CPT,5)_$J(EXC,1)_$J(VA("PID"),20)_$J(SRDIV,6)_" "
"RTN","SROATMNO",43,0)
 S SRTEMP=SRTEMP_$J(SRMAJMIN,1)_$J(SRDEATH,7)_$J(SRDTHUR,1)_$J(SRSTATUS,1)_$J(SRAGE,3)_$J(SRASA,2)_$J(SRADMIT,1)_SRTMP
"RTN","SROATMNO",44,0)
 K CPT,SRMOD F SRZ=1:1:10 S (CPT(SRZ),SRMOD(SRZ))=""
"RTN","SROATMNO",45,0)
 S (OPS,CNT)=0 F  S OPS=$O(^SRO(136,SRTN,3,OPS)) Q:'OPS!(CNT=10)  S CNT=CNT+1,X=$P($G(^SRO(136,SRTN,3,OPS,0)),"^") I X S CPT(CNT)=$P($$CPT^ICPTCOD(X),"^",2) D MOD
"RTN","SROATMNO",46,0)
 S SRCC=$P($G(^SRF(SRTN,"CON")),"^"),SRBLANK="          "
"RTN","SROATMNO",47,0)
 I SRCC,$P($G(^SRF(SRCC,30)),"^")!($P($G(^SRF(SRCC,31)),"^",8)) S SRCC=""
"RTN","SROATMNO",48,0)
 S SRTEMP=SRTEMP_$J(CPT(1),5)_$J(CPT(2),5)_$J(CPT(3),5)_$J(CPT(4),5)_$J(CPT(5),5)_$J(CPT(6),5)_$J(CPT(7),5)_$J(CPT(8),5)_$J(CPT(9),5)_$J(CPT(10),5)_$J(SRWOUND,2)_$J(SROCTYPE,1)_SRBLANK_$J(SRCC,10)
"RTN","SROATMNO",49,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SRTEMP,SRACNT=SRACNT+1
"RTN","SROATMNO",50,0)
 S SRA(.2)=$G(^SRF(SRTN,.2))
"RTN","SROATMNO",51,0)
 S SRTEMP="@"_$J(SRASITE,3)_$J(SRTN,7)_"  B"_$J($E($P(SRA(.2),"^"),1,12),12)_$J($E($P(SRA(.2),"^",4),1,12),12)_$E(SRPMOD_SR10SP,1,10)
"RTN","SROATMNO",52,0)
 F I=1:1:10 S SRTEMP=SRTEMP_$E(SRMOD(I)_SR10SP,1,10)
"RTN","SROATMNO",53,0)
 S ^TMP("SRA",$J,SRAMNUM,SRACNT,0)=SRTEMP_$J(SRINTUB,1)_SR95PO_$J(SRATT,2)_SRDOB,SRACNT=SRACNT+1
"RTN","SROATMNO",54,0)
 I SRACNT>100 S SRACNT=1,SRAMNUM=SRAMNUM+1
"RTN","SROATMNO",55,0)
 S SRATOT=SRATOT+1
"RTN","SROATMNO",56,0)
 S X=$E($P(^SRF(SRTN,0),"^",9),1,5)_"00",^TMP("SRWL",$J,X)=""
"RTN","SROATMNO",57,0)
 K DATE,ANES,EMERG,EXC,SPEC,SRADMIT,SRADMT,SRATT,SRBLANK,SRCC,SRDIV,SRDOB,SRDTHUR,SRIO,SRMAJMIN,SROCTYPE,SRTEMP,SRTMP,SRWOUND,SRZ,SR14,CPT
"RTN","SROATMNO",58,0)
 Q
"RTN","SROATMNO",59,0)
OCC ; total of each occurrence by category
"RTN","SROATMNO",60,0)
 N SRIOFLAG,SRPOFLAG
"RTN","SROATMNO",61,0)
 F SRK=1:1:36 S SROC(SRK)=""
"RTN","SROATMNO",62,0)
 S (SRPO,SRIOFLAG)=0 F  S SRPO=$O(^SRF(SRTN,10,SRPO)) Q:'SRPO  S SRSUB=$P(^SRF(SRTN,10,SRPO,0),U,2) I SRSUB'="" S SROC(SRSUB)=SROC(SRSUB)+1,SRIOFLAG=1
"RTN","SROATMNO",63,0)
 S (SRPO,SRPOFLAG)=0 F  S SRPO=$O(^SRF(SRTN,16,SRPO)) Q:'SRPO  S SRSUB=$P(^SRF(SRTN,16,SRPO,0),U,2) I SRSUB'="" S SROC(SRSUB)=SROC(SRSUB)+1,SRPOFLAG=1
"RTN","SROATMNO",64,0)
 S (SROCTYPE,SRTMP)="" F SRK=1:1:32 S SRTMP=SRTMP_$J(SROC(SRK),2)
"RTN","SROATMNO",65,0)
 S SR95PO=$J(SROC(33),2)_$J(SROC(34),2)_$J(SROC(35),2)_$J(SROC(36),2)
"RTN","SROATMNO",66,0)
 I SRIOFLAG=1,(SRPOFLAG=0) S SROCTYPE="I"
"RTN","SROATMNO",67,0)
 I SRIOFLAG=0,(SRPOFLAG=1) S SROCTYPE="P"
"RTN","SROATMNO",68,0)
 I SRIOFLAG=1,(SRPOFLAG=1) S SROCTYPE="B"
"RTN","SROATMNO",69,0)
 I SRIOFLAG=0,(SRPOFLAG=0) S SROCTYPE=""
"RTN","SROATMNO",70,0)
 Q
"RTN","SROATMNO",71,0)
MOD N SRM S SRM=0,SRCNT=1 F  S SRM=$O(^SRO(136,SRTN,3,OPS,1,SRM)) Q:'SRM  D  Q:SRCNT>5
"RTN","SROATMNO",72,0)
 .S X=$P(^SRO(136,SRTN,3,OPS,1,SRM,0),"^"),Y=$P($$MOD^ICPTMOD(X,"I"),"^",2)
"RTN","SROATMNO",73,0)
 .I Y'="" S SRMOD(CNT)=SRMOD(CNT)_Y,SRCNT=SRCNT+1
"RTN","SROATMNO",74,0)
 Q
"RTN","SROAUTL")
0^31^B41539294^B37814933
"RTN","SROAUTL",1,0)
SROAUTL ;BIR/ADM - RISK ASSESSMENT UTILITY ;09/14/04
"RTN","SROAUTL",2,0)
 ;;3.0; Surgery ;**38,46,47,63,81,88,95,112,100,125,134,142**;24 Jun 93
"RTN","SROAUTL",3,0)
 I $G(SRSUPCPT)=2 G NCODE
"RTN","SROAUTL",4,0)
 N SRCMOD,SRCOMMA,X K SRHDR S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S SRHDR=VADM(1)_" ("_VA("PID")_")        Case #"_SRTN,Y=$E($P(^SRF(SRTN,0),"^",9),1,7) X ^DD("DD") S SRSDATE=Y
"RTN","SROAUTL",5,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^"),Y=$P(X,"^",2),SRCPT=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"CPT MISSING") I SRCPT,$O(^SRF(SRTN,"OPMOD",0)) D
"RTN","SROAUTL",6,0)
 .S (SRCOMMA,SRI)=0,SRCMOD="",SRCPT=SRCPT_"-" F  S SRI=$O(^SRF(SRTN,"OPMOD",SRI)) Q:'SRI  D
"RTN","SROAUTL",7,0)
 ..S SRM=$P(^SRF(SRTN,"OPMOD",SRI,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRM,"I"),"^",2)
"RTN","SROAUTL",8,0)
 ..S SRCPT=SRCPT_$S(SRCOMMA:",",1:"")_SRCMOD,SRCOMMA=1
"RTN","SROAUTL",9,0)
 S SRCPT=$S($G(SRSUPCPT)=1:"",1:"("_SRCPT_")")
"RTN","SROAUTL",10,0)
 S SROPER=SROPER_" "_SRCPT D LOOP S SRHDR(1)=SRSDATE_"   "_SRHDR(1)
"RTN","SROAUTL",11,0)
 Q
"RTN","SROAUTL",12,0)
NCODE N SRCMOD,SRCOMMA,X K SRHDR S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S SRHDR=VADM(1)_" ("_VA("PID")_")        Case #"_SRTN,Y=$E($P(^SRF(SRTN,0),"^",9),1,7) X ^DD("DD") S SRSDATE=Y
"RTN","SROAUTL",13,0)
 S X=^SRF(SRTN,"OP"),SROPER=$P(X,"^"),Y=$P($G(^SRO(136,SRTN,0)),"^",2),SRCPT=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"CPT MISSING") I SRCPT,$O(^SRO(136,SRTN,1,0)) D
"RTN","SROAUTL",14,0)
 .S (SRCOMMA,SRI)=0,SRCMOD="",SRCPT=SRCPT_"-" F  S SRI=$O(^SRO(136,SRTN,1,SRI)) Q:'SRI  D
"RTN","SROAUTL",15,0)
 ..S SRM=$P(^SRO(136,SRTN,1,SRI,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRM,"I"),"^",2)
"RTN","SROAUTL",16,0)
 ..S SRCPT=SRCPT_$S(SRCOMMA:",",1:"")_SRCMOD,SRCOMMA=1
"RTN","SROAUTL",17,0)
 S SRCPT="(CPT Code: "_SRCPT_")"
"RTN","SROAUTL",18,0)
 S SROPER=SROPER_" "_SRCPT D LOOP S SRHDR(1)=SRSDATE_"   "_SRHDR(1)
"RTN","SROAUTL",19,0)
 Q
"RTN","SROAUTL",20,0)
LOOP I $L(SROPER)<68 S SRHDR(1)=SROPER Q
"RTN","SROAUTL",21,0)
 I $L(SROPER)>67 S X=SROPER,K=1 F  D  I $L(X)<68 S SRHDR(K)=X Q
"RTN","SROAUTL",22,0)
 .F I=0:1:66 S J=67-I,Y=$E(X,J) I Y=" " S SRHDR(K)=$E(X,1,J-1),X=$E(X,J+1,$L(X)) S K=K+1 Q
"RTN","SROAUTL",23,0)
 Q
"RTN","SROAUTL",24,0)
HDR ; print screen header
"RTN","SROAUTL",25,0)
 W @IOF,!,SRHDR W:$D(SRPAGE) ?(79-$L(SRPAGE)),SRPAGE
"RTN","SROAUTL",26,0)
 S I=0 F  S I=$O(SRHDR(I)) Q:'I  W ! W:I<2 SRHDR(I) W:I>1 ?14,SRHDR(I)
"RTN","SROAUTL",27,0)
 K SRHDR(.5),SRPAGE W ! F I=1:1:80 W "-"
"RTN","SROAUTL",28,0)
 W !
"RTN","SROAUTL",29,0)
 Q
"RTN","SROAUTL",30,0)
SMOKE() ; called by screen on current smoker field (#202)
"RTN","SROAUTL",31,0)
 N SRSCR S SRSCR="I 'Y"
"RTN","SROAUTL",32,0)
 I $$CARD S SRSCR="I Y"
"RTN","SROAUTL",33,0)
 Q SRSCR
"RTN","SROAUTL",34,0)
FUNCT() ; called by screen on functional health status field (#240)
"RTN","SROAUTL",35,0)
 N SRSCR S SRSCR="I 1"
"RTN","SROAUTL",36,0)
 I $$CARD S SRSCR="I Y'=4"
"RTN","SROAUTL",37,0)
 Q SRSCR
"RTN","SROAUTL",38,0)
CARD() ; is this a cardiac assessed case?
"RTN","SROAUTL",39,0)
 N SRX S SRX=$S($D(SRTN):SRTN,$D(DA):DA,1:"") I 'SRX Q 0
"RTN","SROAUTL",40,0)
 I $P($G(^SRF(SRX,"RA")),"^",2)="C" Q 1
"RTN","SROAUTL",41,0)
 Q 0
"RTN","SROAUTL",42,0)
NC ; called from input transform to kill X if case is cardiac assessed
"RTN","SROAUTL",43,0)
 I $$CARD,X="NA"!(X="NS") K X
"RTN","SROAUTL",44,0)
 Q
"RTN","SROAUTL",45,0)
DATE ; called by output transmform on several date fields
"RTN","SROAUTL",46,0)
 I $D(Y),Y="NA"!(Y="NS") Q
"RTN","SROAUTL",47,0)
 N SRY S SRY=Y D DD^%DT
"RTN","SROAUTL",48,0)
 Q
"RTN","SROAUTL",49,0)
INDX ; set airway index
"RTN","SROAUTL",50,0)
 S SRY=$S(SRI>4:5,SRI>3:4,SRI>2:3,SRI>0:2,1:1),$P(^SRF(DA,.3),"^",9)=SRY
"RTN","SROAUTL",51,0)
 K SRI,SRMS,SROP,SRY
"RTN","SROAUTL",52,0)
 Q
"RTN","SROAUTL",53,0)
OP ; set logic for AOP cross reference on Oral-Pharyngeal field (901.1)
"RTN","SROAUTL",54,0)
 N SRI,SRMS,SRY S SRMS=$P(^SRF(DA,.3),"^",12) I SRMS'="" S SRMS=SRMS*.1,SRI=2.5*X-SRMS D INDX
"RTN","SROAUTL",55,0)
 Q
"RTN","SROAUTL",56,0)
MS ; set logic for AMS cross reference on Mandibular Space field (901.2)
"RTN","SROAUTL",57,0)
 N SRI,SRY,SRMS,SROP S SROP=$P(^SRF(DA,.3),"^",11) I SROP'="" S SRMS=X*.1,SRI=2.5*SROP-SRMS D INDX
"RTN","SROAUTL",58,0)
 Q
"RTN","SROAUTL",59,0)
K901 ; kill logic for AOP and AMS cross references
"RTN","SROAUTL",60,0)
 S $P(^SRF(DA,.3),"^",9)=""
"RTN","SROAUTL",61,0)
 Q
"RTN","SROAUTL",62,0)
DUP ; duplicate preop information from prior operation within 60 days
"RTN","SROAUTL",63,0)
 S SR200=$G(^SRF(SRTN,200)) S NOGO="" F I=1,9,13,18,30,37,44 S X=$P(SR200,"^",I) I X'="" S NOGO=1 K SR200 Q
"RTN","SROAUTL",64,0)
 S X=$P($G(^SRF(SRTN,200.1)),"^") I X'="" S NOGO=1
"RTN","SROAUTL",65,0)
 I NOGO K NOGO Q
"RTN","SROAUTL",66,0)
 K SRCASE S SR=^SRF(SRTN,0),DFN=$P(SR,"^"),(SRSDATE,X1)=$P(SR,"^",9),X2=-60 D C^%DTC S SRENDT=X,SRCASE=0 F  S SRCASE=$O(^SRF("B",DFN,SRCASE)) Q:'SRCASE  I SRCASE,SRCASE'=SRTN D
"RTN","SROAUTL",67,0)
 .S SRX=$P(^SRF(SRCASE,0),"^",9) I SRX>SRSDATE!(SRX<SRENDT) Q
"RTN","SROAUTL",68,0)
 .Q:$P($G(^SRF(SRCASE,"NON")),"^")="Y"!$P($G(^SRF(SRCASE,30)),"^")!$P($G(^SRF(SRCASE,31)),"^",8)!($P($G(^SRF(SRCASE,"CON")),"^")=SRTN)!'$P($G(^SRF(SRCASE,.2)),"^",12)
"RTN","SROAUTL",69,0)
 .S SRX=9999999-SRX,SRCASE(SRX,SRCASE)=""
"RTN","SROAUTL",70,0)
 K SRDT S (SRX,Y)=0 F  S SRX=$O(SRCASE(SRX)) Q:'SRX!$D(SRDT)  S SRCASE="" F  S SRCASE=$O(SRCASE(SRX,SRCASE)) Q:'SRCASE  S SR=$G(^SRF(SRCASE,"RA")) I $P(SR,"^",2)="N",$P(SR,"^",6)="Y" D  Q
"RTN","SROAUTL",71,0)
 .S Y=$P(^SRF(SRCASE,0),"^",9) X ^DD("DD") S SRDT=Y K DIR
"RTN","SROAUTL",72,0)
 .W !! S DIR("A",1)="This patient had a previous non-cardiac operation on "_SRDT_".",DIR("A",2)="",DIR("A",3)="Case #"_SRCASE_"  "_$P(^SRF(SRCASE,"OP"),"^")
"RTN","SROAUTL",73,0)
 .S DIR("A",4)="",DIR("A",5)="Do you want to duplicate the preoperative information from the earlier",DIR("A")="assessment in this assessment? "
"RTN","SROAUTL",74,0)
 .S DIR("B")="YES",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROAUTL",75,0)
 .D:Y STUFF
"RTN","SROAUTL",76,0)
 Q
"RTN","SROAUTL",77,0)
STUFF ; stuff preop information from previous case
"RTN","SROAUTL",78,0)
 I $$LOCK^SROUTL(SRCASE) D  D UNLOCK^SROUTL(SRCASE)
"RTN","SROAUTL",79,0)
 .K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRCASE,DIQ="SRY",DIQ(0)="I" D PREHD D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROAUTL",80,0)
 .S SRZ=0 F  S SRZ=$O(SRY(130,SRCASE,SRZ)) Q:'SRZ  S DIE=130,DA=SRTN,DR=SRZ_"////"_SRY(130,SRCASE,SRZ,"I") D ^DIE K DA,DIE,DR
"RTN","SROAUTL",81,0)
 Q
"RTN","SROAUTL",82,0)
CHK ; check for missing non-cardiac assessment data items
"RTN","SROAUTL",83,0)
 N SRSEP K SRX
"RTN","SROAUTL",84,0)
 F SRC="PREOP","DEM" K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I" D @SRC D EN^DIQ1 D ^SROAUTL1
"RTN","SROAUTL",85,0)
 F SRC="LAB","REM" K DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I" D @SRC D EN^DIQ1 D ^SROAUTL2
"RTN","SROAUTL",86,0)
OTH K DA,DIC,DIQ,DR,SRY,SRZ D TECH^SROPRIN I SRTECH="NOT ENTERED" S SRX("ANESTHESIA TECHNIQUE")="Anesthesia Technique"
"RTN","SROAUTL",87,0)
 ;D RELATE^SROAUTL2
"RTN","SROAUTL",88,0)
OCC D EN^SROCCAT S SRSDATE=$E($P(^SRF(SRTN,0),"^",9),1,7) K ^TMP("SROCC",$J),SRO
"RTN","SROAUTL",89,0)
 S SRPO=0 F  S SRPO=$O(^SRF(SRTN,10,SRPO)) Q:'SRPO  S ^TMP("SROCC",$J,$P(^SRF(SRTN,10,SRPO,0),"^",2),SRSDATE)=""
"RTN","SROAUTL",90,0)
 S SRPO=0 F  S SRPO=$O(^SRF(SRTN,16,SRPO)) Q:'SRPO  S SRDATE=$E($P(^SRF(SRTN,16,SRPO,0),"^",7),1,7) D
"RTN","SROAUTL",91,0)
 .S SRSEP=$P(^SRF(SRTN,16,SRPO,0),"^",4)
"RTN","SROAUTL",92,0)
 .I '$G(SRDATE) S SRDATE="NO DATE"
"RTN","SROAUTL",93,0)
 .S ^TMP("SROCC",$J,$P(^SRF(SRTN,16,SRPO,0),"^",2),SRDATE)=SRSEP
"RTN","SROAUTL",94,0)
 I '$D(^TMP("SROCC",$J)) D OCCEND Q
"RTN","SROAUTL",95,0)
 S SRPO=0 F  S SRPO=$O(^TMP("SROCC",$J,SRPO)) Q:'SRPO  S SRDATE="" F  S SRDATE=$O(^TMP("SROCC",$J,SRPO,SRDATE)) Q:SRDATE  S SRX("POSTOP OCCURRENCE DATE"_SRPO)="Date Noted on "_$P(^SRO(136.5,SRPO,0),"^")_" (Postop Occurrence)" Q
"RTN","SROAUTL",96,0)
 S SRDATE="",SRDATE=$O(^TMP("SROCC",$J,3,SRDATE)) Q:SRDATE=""  I ^TMP("SROCC",$J,3,SRDATE)="" S SRX("SEPSIS CATEGORY")="SEPSIS CATEGORY on SYSTEMIC SEPSIS (Postop Occurrence)"
"RTN","SROAUTL",97,0)
OCCEND K ^TMP("SROCC",$J)
"RTN","SROAUTL",98,0)
 Q
"RTN","SROAUTL",99,0)
PREOP S DR="236;237;346;202;202.1;246;325;238;240;492;204;203;326;212;213;396;394;220;266;395;208;329;330;328;211;332;333;398;399;400;334;335;336;401;338;218;339;215;216;217;338.1;338.2;218.1"
"RTN","SROAUTL",100,0)
 Q
"RTN","SROAUTL",101,0)
DEM S DR="413;.011;247;418;419;420;421;452;453;454"
"RTN","SROAUTL",102,0)
 Q
"RTN","SROAUTL",103,0)
LAB S DR="270;304;224;291;223;290;225;292;228;295;227;294;229;296;230;297;234;301;231;298;233;300;232;299;487;487.1;274;305;405;407;275;306;406;408;277;308;278;309;279;310;280;311;281;312;283;314;455;455.1;456;456.1"
"RTN","SROAUTL",104,0)
 Q
"RTN","SROAUTL",105,0)
REM S DR=".03;214;.035;1.09;1.13;.22;.23;340"
"RTN","SROAUTL",106,0)
 Q
"RTN","SROAUTL",107,0)
PREHD D PREOP S DR=DR_";402;241;244;242;243;210;245"
"RTN","SROAUTL",108,0)
 Q
"RTN","SROAUTL3")
0^32^B12864572^B12401280
"RTN","SROAUTL3",1,0)
SROAUTL3 ;BIR/ADM - RISK ASSESSMENT UTILITY ;06/21/05
"RTN","SROAUTL3",2,0)
 ;;3.0; Surgery ;**38,47,63,77,142**;24 Jun 93
"RTN","SROAUTL3",3,0)
 ;
"RTN","SROAUTL3",4,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROAUTL3",5,0)
 ;
"RTN","SROAUTL3",6,0)
 Q
"RTN","SROAUTL3",7,0)
RISK ; allow entry of risk assessment preop information with case request
"RTN","SROAUTL3",8,0)
 S Y=$P(^SRO(133,SRSITE,0),"^",14) I 'Y Q
"RTN","SROAUTL3",9,0)
 W ! K DIR S DIR("A")="Enter risk assessment preop information for this patient (Y/N)",DIR(0)="Y",DIR("B")="YES" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROAUTL3",10,0)
 S SREQST=1,SRCARD=0 I $$CARD^SROAUTLC S SRSP=$P(^DIC(45.3,$P(^SRO(137.45,$P(^SRF(SRTN,0),"^",4),0),"^",2),0),"^") I SRSP=500!(SRSP=58) D  I SRCARD Q
"RTN","SROAUTL3",11,0)
 .S SRCARD=1 W ! K DIR S DIR("A")="Will this procedure require cardiopulmonary bypass (Y/N) ? ",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) Q
"RTN","SROAUTL3",12,0)
 .I 'Y S SRCARD=0 Q
"RTN","SROAUTL3",13,0)
 .D CARD S SRCARD=1
"RTN","SROAUTL3",14,0)
 I 'SRCARD D ^SROAPRE
"RTN","SROAUTL3",15,0)
 Q
"RTN","SROAUTL3",16,0)
CARD ; allow input of cardiac risk assessment preop information
"RTN","SROAUTL3",17,0)
 W @IOF,!,"Enter Cardiac Preoperative information",!!,"  1. Clinical Information",!,"  2. Cardiac Catheterization & Angiographic Data",!,"  3. Operative Risk Summary Data",!
"RTN","SROAUTL3",18,0)
 K DIR S DIR(0)="NO^1:3:0",DIR("?")="Enter the number of the selection to be edited." D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROAUTL3",19,0)
 I Y=1 D ^SROACLN G CARD
"RTN","SROAUTL3",20,0)
 I Y=2 D ^SROACAT G CARD
"RTN","SROAUTL3",21,0)
 D ^SROACOP G CARD
"RTN","SROAUTL3",22,0)
 Q
"RTN","SROAUTL3",23,0)
PREOP ; print preop information (managerial)
"RTN","SROAUTL3",24,0)
 W:$E(IOST)="P" !! D PREOP^SROAUTL0 S SRDR=DR W !,?28,"PREOPERATIVE INFORMATION",! S SRQ=1 D OUT
"RTN","SROAUTL3",25,0)
 Q
"RTN","SROAUTL3",26,0)
OUT K DA,DIC,DIQ,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="E",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROAUTL3",27,0)
 K SRX S SRX=0 F M=1:1 S I=$P(SRDR,";",M) Q:'I  D
"RTN","SROAUTL3",28,0)
 .Q:I=413  D TR D:SRQ GET^SROAUTL1 D:'SRQ GET^SROAUTL2
"RTN","SROAUTL3",29,0)
 .S SRX=SRX+1,Y=$P(X,";;",2),SRFLD=$P(Y,"^"),(Z,SRX(SRX))=$S($P(Y,"^",3)'="":$P(Y,"^",3),1:$P(Y,"^",2))_"^"_SRFLD
"RTN","SROAUTL3",30,0)
 .W !,$J($P(Z,"^")_": ",39) S SREXT=SRY(130,SRTN,SRFLD,"E") D EXT
"RTN","SROAUTL3",31,0)
 Q
"RTN","SROAUTL3",32,0)
EXT I SRFLD=27 S SREXT=$S(SREXT="":"MISSING",1:$E(SREXT,1,5))
"RTN","SROAUTL3",33,0)
 I $L(SREXT)<40 W SREXT Q
"RTN","SROAUTL3",34,0)
 N I,J,X,Y S X=SREXT F  D  W:$L(X) ! I $L(X)<40!(X'[" ") W ?40,X Q
"RTN","SROAUTL3",35,0)
 .F I=0:1:38 S J=39-I,Y=$E(X,J) I Y=" " W ?40,$E(X,1,J-1) S X=$E(X,J+1,$L(X)) Q
"RTN","SROAUTL3",36,0)
 Q
"RTN","SROAUTL3",37,0)
LAB ; print preoperative laboratory test information (managerial)
"RTN","SROAUTL3",38,0)
 W !,?20,"PREOPERATIVE LABORATORY TEST INFORMATION",!
"RTN","SROAUTL3",39,0)
 D LR^SROAUTL0 S SRDR=DR K DA,DIC,DIQ,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="E",DR=SRDR D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROAUTL3",40,0)
 K SRX S SRX=0 F M=1:2 S L=$P(SRDR,";",M) Q:'L  S I=L D
"RTN","SROAUTL3",41,0)
 .D TR D GET^SROAUTL2 S SRX=SRX+1,Y=$P(X,";;",2),SRFLD=$P(Y,"^"),SRDT=$P(Y,"^",4),(Z,SRX(SRX))=$S($P(Y,"^",3)'="":$P(Y,"^",3),1:$P(Y,"^",2))_"^"_SRFLD_"^"_SRDT
"RTN","SROAUTL3",42,0)
 .W !,$J($P(Z,"^")_": ",39),SRY(130,SRTN,SRFLD,"E") W:SRY(130,SRTN,SRDT,"E")'="" ?50,"("_$P(SRY(130,SRTN,SRDT,"E"),"@")_")"
"RTN","SROAUTL3",43,0)
 Q
"RTN","SROAUTL3",44,0)
TR S J=I,J=$TR(J,"1234567890.","ABCDEFGHIJP")
"RTN","SROAUTL3",45,0)
 Q
"RTN","SROAUTL3",46,0)
NON S DR=".03;102;.035"
"RTN","SROAUTL3",47,0)
 Q
"RTN","SROAUTL3",48,0)
CHK ; check for missing information for excluded cases
"RTN","SROAUTL3",49,0)
 K SRX,DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I" D NON D EN^DIQ1 D ^SROAUTL2
"RTN","SROAUTL3",50,0)
 K DA,DIC,DIQ,DR,SRY,SRZ D TECH^SROPRIN I SRTECH="NOT ENTERED" S SRX("ANESTHESIA TECHNIQUE")="Anesthesia Technique"
"RTN","SROAUTL3",51,0)
 Q
"RTN","SROCD")
0^80^B18456751
"RTN","SROCD",1,0)
SROCD ;BIR/ADM - CASE CODING IN SURGERY PROCEDURE/DIAGNOSIS CODES FILE ;10/20/05
"RTN","SROCD",2,0)
 ;;3.0; Surgery ;**142**;24 Jun 93
"RTN","SROCD",3,0)
 I '$D(SRSITE) D ^SROVAR I '$D(SRSITE) S XQUIT="" Q
"RTN","SROCD",4,0)
 I '$G(SRTN) D ^SROPS1 I '$D(SRTN) S XQUIT="" Q
"RTN","SROCD",5,0)
BEG N S,SR2,SRCMOD,SRDES,SRDX,SREDIT,SRHDR,SRMOD,SRNM,SRPROC,SRS,SRSEL,SRTXT
"RTN","SROCD",6,0)
 S (SREDIT,SRMOD,SRSOUT,SRS,SR2)=0 I $P($G(^SRF(SRTN,.2)),"^",3) S SRS=1
"RTN","SROCD",7,0)
 S S(0)=^SRF(SRTN,0),Y=$P(S(0),"^",9),SRDATE=Y D D^DIQ S SRSDATE=Y,DFN=$P(S(0),"^") D DEM^VADPT S SRNM=VADM(1)_"  ("_VA("PID")_")"
"RTN","SROCD",8,0)
 S SRNON=$S($P($G(^SRF(SRTN,"NON")),"^")="Y":1,1:0)
"RTN","SROCD",9,0)
 I '$D(^SRO(136,SRTN)) D ^SROCD1
"RTN","SROCD",10,0)
 I $P($G(^SRO(136,SRTN,10)),"^") D SURE I 'SREDIT Q
"RTN","SROCD",11,0)
EDIT D ^SROCD2 I SRSOUT!SREDIT G END
"RTN","SROCD",12,0)
 D EDIT
"RTN","SROCD",13,0)
 Q
"RTN","SROCD",14,0)
SURE D HDR K DIR
"RTN","SROCD",15,0)
 S DIR("A",1)="Coding for this case has been completed "_$S($P(^SRF(SRTN,0),"^",15):"and",1:"but not")_" sent to PCE."
"RTN","SROCD",16,0)
 S DIR("A",2)="",DIR("A")="Are you sure you want to edit this case",DIR(0)="Y",DIR("B")="NO" D ^DIR K DIR
"RTN","SROCD",17,0)
 I Y S SREDIT=1 M ^TMP("SRED1",$J,SRTN)=^SRO(136,SRTN) Q
"RTN","SROCD",18,0)
END S SROERR=SRTN D ^SROERR0,^SRSKILL
"RTN","SROCD",19,0)
 K ADCNT,SRCOMMA,SRDXCNT,SROCNTR,SROCPT2,SROERR,SROFLG,SRTMP,SRICD9,SRDIAGS,SRASDX,SRMSG,SRADX,SRPADX,SRODIR,REC,SRDIRX,SRADIAG,SRDX,SRDX1,SRDX2,SROICD,SUB4
"RTN","SROCD",20,0)
 W @IOF K ^TMP("SRED1",$J)
"RTN","SROCD",21,0)
 Q
"RTN","SROCD",22,0)
HDR W @IOF,!,SRNM_"        Case #"_SRTN,!
"RTN","SROCD",23,0)
 S SRPROC=$P(^SRF(SRTN,"OP"),"^") D BRK W $P(SRSDATE,"@")_"   "_SRHDR(1)
"RTN","SROCD",24,0)
 I $D(SRHDR(2)) W !,?15,SRHDR(2) I $D(SRHDR(3)) W !,?15,SRHDR(3)
"RTN","SROCD",25,0)
 W ! F I=1:1:80 W "-"
"RTN","SROCD",26,0)
 Q
"RTN","SROCD",27,0)
BRK ; break procedure if greater than 65 characters
"RTN","SROCD",28,0)
 I $L(SRPROC)<66 S SRHDR(1)=SRPROC Q
"RTN","SROCD",29,0)
 S X=SRPROC,K=1 F  D  I $L(X)<66 S SRHDR(K)=X Q
"RTN","SROCD",30,0)
 .F I=0:1:64 S J=65-I,Y=$E(X,J) I Y=" " S SRHDR(K)=$E(X,1,J-1),X=$E(X,J+1,$L(X)) S K=K+1 Q
"RTN","SROCD",31,0)
 Q
"RTN","SROCD",32,0)
OSCEI ; update SC/EI info on other diagnosis
"RTN","SROCD",33,0)
 K DA,DIE,DR,DIR W !!,"Please supply the following required information related to this diagnosis:",!
"RTN","SROCD",34,0)
 S SRDR="",SRQ=0 S DA=$P(SRSEL(SRDA),U),DA(1)=SRTN D  I SRQ Q
"RTN","SROCD",35,0)
 .I $D(SRCL(3)) D SC I SRQ Q
"RTN","SROCD",36,0)
 .I $D(SRCL(7)) D CV I SRQ Q
"RTN","SROCD",37,0)
 .I $D(SRCL(1)) D AO I SRQ Q
"RTN","SROCD",38,0)
 .I $D(SRCL(2)) D IR I SRQ Q
"RTN","SROCD",39,0)
 .I $D(SRCL(4)) D EC I SRQ Q
"RTN","SROCD",40,0)
 .I $D(SRCL(5)) D MST I SRQ Q
"RTN","SROCD",41,0)
 .I $D(SRCL(6)) D HNC
"RTN","SROCD",42,0)
 K DIR S DA=$P(SRSEL(SRDA),U),DA(1)=SRTN,DIE="^SRO(136,SRTN,4,",DR=SRDR D ^DIE K DA,DIE,DR,SRDR
"RTN","SROCD",43,0)
 Q
"RTN","SROCD",44,0)
SC S DIR("A")="Treatment related to Service Connected condition (Y/N)",DIR(0)="136.04,.02" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",45,0)
 I X=""!(X="@") W !,*7,?15,"Enter YES or NO." G SC
"RTN","SROCD",46,0)
 S SRCL(3)=Y,SRDR=$G(SRDR)_".02////"_SRCL(3)_";"
"RTN","SROCD",47,0)
 Q
"RTN","SROCD",48,0)
CV S DIR("A")="Treatment related to Combat (Y/N)",DIR(0)="136.04,.08" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",49,0)
 I X=""!(X="@") W !,*7,?15,"Enter YES or NO." G CV
"RTN","SROCD",50,0)
 S SRCL(7)=Y,SRDR=SRDR_".08////"_SRCL(7)_";"
"RTN","SROCD",51,0)
 Q
"RTN","SROCD",52,0)
AO S DIR("A")="Treatment related to Agent Orange Exposure (Y/N)",DIR(0)="136.04,.03" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",53,0)
 I X=""!(X="@") W !,*7,?15,"Enter YES or NO." G AO
"RTN","SROCD",54,0)
 S SRCL(1)=Y,SRDR=SRDR_".03////"_SRCL(1)_";"
"RTN","SROCD",55,0)
 Q
"RTN","SROCD",56,0)
IR S DIR("A")="Treatment related to Ionizing Radiation Exposure (Y/N)",DIR(0)="136.04,.04" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",57,0)
 I X=""!(X="@") W !,*7,?15,"Enter YES or NO." G IR
"RTN","SROCD",58,0)
 S SRCL(2)=Y,SRDR=SRDR_".04////"_SRCL(2)_";"
"RTN","SROCD",59,0)
 Q
"RTN","SROCD",60,0)
EC S DIR("A")="Treatment related to Environmental Contaminant Exposure (Y/N)",DIR(0)="136.04,.07" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",61,0)
 I X=""!(X="@") W !,*7,?15,"Enter YES or NO." G EC
"RTN","SROCD",62,0)
 S SRCL(4)=Y,SRDR=SRDR_".07////"_SRCL(4)_";"
"RTN","SROCD",63,0)
 Q
"RTN","SROCD",64,0)
MST S DIR("A")="Treatment related to Military Sexual Trauma (Y/N)",DIR(0)="136.04,.05" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",65,0)
 I X=""!(X="@") W !,*7,?15,"Enter YES or NO." G MST
"RTN","SROCD",66,0)
 S SRCL(5)=Y,SRDR=SRDR_".05////"_SRCL(5)_";"
"RTN","SROCD",67,0)
 Q
"RTN","SROCD",68,0)
HNC S DIR("A")="Treatment related to Head and/or Neck Cancer (Y/N)",DIR(0)="136.04,.06" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD",69,0)
 I X=""!(X="@") W !,*7,?15,"Enter YES or NO." G HNC
"RTN","SROCD",70,0)
 S SRCL(6)=Y,SRDR=SRDR_".06////"_SRCL(6)_";"
"RTN","SROCD",71,0)
 Q
"RTN","SROCD0")
0^81^B58953825
"RTN","SROCD0",1,0)
SROCD0 ;BIR/ADM - CASE CODING INPUT/EDIT ;08/01/05
"RTN","SROCD0",2,0)
 ;;3.0; Surgery ;**142**;24 Jun 93
"RTN","SROCD0",3,0)
 ;;
"RTN","SROCD0",4,0)
 ; Reference to CL^SDCO21 supported by DBIA #406
"RTN","SROCD0",5,0)
 ;;
"RTN","SROCD0",6,0)
PRDX ; edit Principal Postop Diagnosis
"RTN","SROCD0",7,0)
 N SRDUP,SRDXY,SRI,SROLD,ENVARR,SCEC,SRNEW,SRNUM S SCEC=$$SCEC()
"RTN","SROCD0",8,0)
 S (SROLD,X)=$P(^SRO(136,SRTN,0),"^",3),SRDIAG="NOT ENTERED" I 'X D PDXEN Q
"RTN","SROCD0",9,0)
 I X S Y=$$ICDDX^ICDCODE(X,$P($G(^SRF(SRTN,0)),"^",9)),SRNUM=$P(Y,U,2),SRDES=$P(Y,U,4),SRDIAG=SRNUM_"  "_SRDES
"RTN","SROCD0",10,0)
 W !,"Principal Postop Diagnosis:",!!,?5,"ICD9 Code: "_SRDIAG D:SCEC
"RTN","SROCD0",11,0)
 .D GETS^DIQ(136,SRTN_",",".04:.1","E","ENVARR")
"RTN","SROCD0",12,0)
 .I $D(ENVARR(136,SRTN_",",.04,"E")) D
"RTN","SROCD0",13,0)
 ..N SRCOLSPN S SRCOLSPN=13 W !
"RTN","SROCD0",14,0)
 ..I $D(SRCL(3)) W ?SRCOLSPN,"SC:",$E(ENVARR(136,SRTN_",",.04,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",15,0)
 ..I $D(SRCL(7)) W ?SRCOLSPN,"CV:",$E(ENVARR(136,SRTN_",",.1,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",16,0)
 ..I $D(SRCL(1)) W ?SRCOLSPN,"AO:",$E(ENVARR(136,SRTN_",",.05,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",17,0)
 ..I $D(SRCL(2)) W ?SRCOLSPN,"IR:",$E(ENVARR(136,SRTN_",",.06,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",18,0)
 ..I $D(SRCL(4)) W ?SRCOLSPN,"EC:",$E(ENVARR(136,SRTN_",",.07,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",19,0)
 ..I $D(SRCL(5)) W ?SRCOLSPN,"MST:",$E(ENVARR(136,SRTN_",",.08,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",20,0)
 ..I $D(SRCL(6)) W ?SRCOLSPN,"H&N:",$E(ENVARR(136,SRTN_",",.09,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",21,0)
 K DIR S DIR(0)="SO^1:Update Principal Postop Diagnosis Code;2:Update Service Connected/Environmental Indicators only"
"RTN","SROCD0",22,0)
 S DIR("A")="Enter selection (1 or 2)",DIR("B")=1 D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROCD0",23,0)
 S SRDXY=Y I SRDXY=1 D PDXEN Q
"RTN","SROCD0",24,0)
 I SRDXY=2 D PSCEI
"RTN","SROCD0",25,0)
 Q
"RTN","SROCD0",26,0)
PRESS W ! K DIR S DIR("A")="Press Enter/Return key to continue ",DIR(0)="FOA" D ^DIR K DIR
"RTN","SROCD0",27,0)
 Q
"RTN","SROCD0",28,0)
PDXEN W ! K DA,DIR S DIR("A")="Principal Postop Diagnosis Code",DIR(0)="136,.03",DIR("B")=$G(SRNUM) D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) Q
"RTN","SROCD0",29,0)
 S SRNEW=+Y I X="@" W !!," Deletion of the Principal Postop Diagnosis Code is not allowed! ??" G PDXEN
"RTN","SROCD0",30,0)
 I X="" W !,"This is a required entry." G PDXEN
"RTN","SROCD0",31,0)
 S (SRDUP,SRI)=0 I SRNEW=SROLD Q
"RTN","SROCD0",32,0)
 I SRNEW,SRNEW'=SROLD F  S SRI=$O(SRADIAG(SRI)) Q:'SRI  I SRADIAG(SRI)=SRNEW S SRDUP=1 Q
"RTN","SROCD0",33,0)
 I SRDUP D DUP,HDR^SROCD G PDXEN
"RTN","SROCD0",34,0)
 K DR,DIE,DA S DIE=136,DA=SRTN,DR=".03////"_SRNEW D ^DIE K DR,DIE I $D(Y) Q
"RTN","SROCD0",35,0)
 I SRNEW'=SROLD S X=SROLD D PRINASOD^SROCDX2
"RTN","SROCD0",36,0)
 D REMIND
"RTN","SROCD0",37,0)
PSCEI I $P(^SRO(136,SRTN,0),"^",3) D
"RTN","SROCD0",38,0)
 .I SCEC D SCEI^SROCD3 K SRCL Q
"RTN","SROCD0",39,0)
 .W !!,"  >>>  No SC/EI information required for this patient.  <<<" D PRESS
"RTN","SROCD0",40,0)
 Q
"RTN","SROCD0",41,0)
POTH W !,"Other Procedures:",!
"RTN","SROCD0",42,0)
 N SRSHT,SRNEW,SROLD,SRPOTH,CNT,OTHER,SROPY K SRSEL S CNT=1,OTH=0 F  S OTH=$O(^SRO(136,SRTN,3,OTH)) Q:'OTH!(SRSOUT)  D
"RTN","SROCD0",43,0)
 .S X=$P($G(^SRO(136,SRTN,3,OTH,0)),U),CPT1=""
"RTN","SROCD0",44,0)
 .I X S CPT1=X,Y=$$CPT^ICPTCOD(X,$P($G(^SRF(SRTN,0)),"^",9)),SRCPT=$P(Y,U,2),SRSHT=$P(Y,U,3),Y=SRCPT,SRDA=OTH D SSOTH^SROCPT0 S SRCPT=Y,CPT=SRCPT_"  "_SRSHT
"RTN","SROCD0",45,0)
 .W !,CNT_". CPT Code: "_CPT
"RTN","SROCD0",46,0)
 .S SRSEL(CNT)=OTH_"^CPT Code: "_CPT_"^"_CPT1_"^"_SRCPT
"RTN","SROCD0",47,0)
 .D OTHADXD^SROCDX1
"RTN","SROCD0",48,0)
 .S CNT=CNT+1
"RTN","SROCD0",49,0)
 W !,CNT_". Enter NEW Other Procedure Code",! K DIR S DIR("A")="Enter selection",DIR(0)="NO^1:"_CNT D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROCD0",50,0)
 I 'Y,$$ADCHK D DELWRN^SROCDX2,PRESS Q
"RTN","SROCD0",51,0)
 Q:'Y  S (OTHCNT,SRDA)=Y W !! I SRDA<CNT D  G PH
"RTN","SROCD0",52,0)
 .D HDR^SROCD,OTHCPTD^SROCDX,OTHADX^SROCDX1
"RTN","SROCD0",53,0)
 .K DIR S DIR(0)="SO^1:Update Other Procedure CPT Code;2:Update Associated Diagnoses"
"RTN","SROCD0",54,0)
 .S DIR("A")="Enter selection (1 or 2)",DIR("B")=1 D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROCD0",55,0)
 .S SROPY=Y I SROPY=1 D OPEN Q
"RTN","SROCD0",56,0)
 .I SROPY=2 D OASS
"RTN","SROCD0",57,0)
 S SRDUP=0 K DIR S DIR("A")="Enter new OTHER PROCEDURE CPT code",DIR(0)="136.03,.01" D ^DIR K DIR S SRNEW=+Y I $D(DTOUT)!$D(DUOUT)!(Y="") G PH
"RTN","SROCD0",58,0)
 S SRX=0 F  S SRX=$O(^SRO(136,SRTN,3,SRX)) Q:'SRX  I $P($G(^SRO(136,SRTN,3,SRX,0)),U)=SRNEW S SRDUP=1 Q
"RTN","SROCD0",59,0)
 K DD,DO S SRDICN=1,DIC="^SRO(136,SRTN,3,",X=SRNEW,DIC(0)="L" D FILE^DICN K DIC,DD,DO,SRDICN I +Y<0 Q
"RTN","SROCD0",60,0)
 K DA S (SRPOTH,DA)=+Y,DA(1)=SRTN D OPROC^SROMOD0 K DA
"RTN","SROCD0",61,0)
 S SRDA=CNT,OTHER=SRNEW D COTHADX^SROCDX
"RTN","SROCD0",62,0)
PH D HDR^SROCD D POTH
"RTN","SROCD0",63,0)
 Q
"RTN","SROCD0",64,0)
OPEN N SRDIRED W ! S SROLD=$P(SRSEL(SRDA),U,3),SRDIE=1,SRDIRED=0 K DA,DIE,DIR,DR
"RTN","SROCD0",65,0)
 S DA=$P(SRSEL(SRDA),U),DA(1)=SRTN,DIE="^SRO(136,SRTN,3,",DR=".01T" D ^DIE K DIE,DR,SRDIE Q:$D(Y)
"RTN","SROCD0",66,0)
 I 'SRDIRED K DA Q
"RTN","SROCD0",67,0)
 D OPROC^SROMOD0
"RTN","SROCD0",68,0)
 S X=$P($G(^SRO(136,SRTN,3,$P(SRSEL(SRDA),U),0)),"^") I SROLD'=X D SADXO^SROCDX2 K DA
"RTN","SROCD0",69,0)
OASS S SRPOTH=$P(SRSEL(SRDA),U) D COTHADX^SROCDX
"RTN","SROCD0",70,0)
 Q
"RTN","SROCD0",71,0)
DUP K DIR S DIR("A",1)="",DIR("A",2)="This code has already been selected. Please try again.",DIR("A",3)="",DIR("A")="Press the ENTER key to continue",DIR(0)="FO" D ^DIR K DIR
"RTN","SROCD0",72,0)
 Q
"RTN","SROCD0",73,0)
DOTH W !,"Other Postop Diagnosis:",!
"RTN","SROCD0",74,0)
 N CNT,SRDUP,SRI,SRJ,SRNEW,SRX,SCEC,ENVARR,SRNUM S SCEC=$$SCEC()
"RTN","SROCD0",75,0)
 K SRSEL S CNT=1,OTH=0 F  S OTH=$O(^SRO(136,SRTN,4,OTH)) Q:'OTH!(SRSOUT)  D
"RTN","SROCD0",76,0)
 .S (SRX,X)=$P(^SRO(136,SRTN,4,OTH,0),U),SRDIAG="NOT ENTERED"
"RTN","SROCD0",77,0)
 .I X S Y=$$ICDDX^ICDCODE(X,$P($G(^SRF(SRTN,0)),"^",9)),SRNUM=$P(Y,U,2),SRDES=$P(Y,U,4),SRDIAG=SRNUM_"  "_SRDES
"RTN","SROCD0",78,0)
 .W !,CNT_". ICD9 Code: "_SRDIAG S SRSEL(CNT)=OTH_"^ICD9 Code: "_SRDIAG_"^"_SRNUM_"^"_SRX
"RTN","SROCD0",79,0)
 .D:SCEC OIND
"RTN","SROCD0",80,0)
 .S CNT=CNT+1 I 'SCEC W !
"RTN","SROCD0",81,0)
 W !,CNT_". Enter NEW Other Postop Diagnosis Code",! K DIR S DIR("A")="Enter selection",DIR(0)="NO^1:"_CNT D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROCD0",82,0)
 Q:'Y  S SRDA=Y W !! I SRDA<CNT D  G DH
"RTN","SROCD0",83,0)
 .D HDR^SROCD W !,"Other Postop Diagnosis:",!!,SRDA_". "_$P(SRSEL(SRDA),U,2) I SCEC S OTH=$P(SRSEL(SRDA),"^") D OIND
"RTN","SROCD0",84,0)
 .K DIR S DIR(0)="SO^1:Update Other Postop Diagnosis Code;2:Update Service Connected/Environmental Indicators only"
"RTN","SROCD0",85,0)
 .S DIR("A")="Enter selection (1 or 2)",DIR("B")=1 D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROCD0",86,0)
 .S SRDXY=Y D:SRDXY=1 ODXEN D:SRDXY=2 OSCEI Q
"RTN","SROCD0",87,0)
 K DIR,SRCL S DIR("A")="Enter new OTHER POSTOP DIAGNOSIS Code",DIR(0)="136.04,.01" D ^DIR K DIR S SRNEW=+Y I $D(DTOUT)!$D(DUOUT)!(Y="") G DH
"RTN","SROCD0",88,0)
 S (SRDUP,SRI)=0 F  S SRI=$O(SRADIAG(SRI)) Q:'SRI  I SRADIAG(SRI)=SRNEW S SRDUP=1 Q
"RTN","SROCD0",89,0)
 I SRDUP D DUP G DH
"RTN","SROCD0",90,0)
 S:'$D(DA(1)) DA(1)=SRTN
"RTN","SROCD0",91,0)
 K DD,DO S DIC="^SRO(136,SRTN,4,",X=SRNEW,DIC(0)="L" D FILE^DICN K DA,DD,DIC,DO,DR
"RTN","SROCD0",92,0)
 D REMIND
"RTN","SROCD0",93,0)
DH D PASSDIAG^SROCDX1,ASSDIAG^SROCDX1,HDR^SROCD,DOTH
"RTN","SROCD0",94,0)
 Q
"RTN","SROCD0",95,0)
ODXEN W ! K DIR S SROLD=$P(SRSEL(SRDA),U,4),DIR(0)="136.04,.01",DIR("B")=$P(SRSEL(SRDA),U,3),DIR("A")="Other Postop Diagnosis Code"
"RTN","SROCD0",96,0)
 D ^DIR K DIR S SRNEW=+Y I $D(DTOUT)!$D(DUOUT) Q
"RTN","SROCD0",97,0)
 I X="@" S SRSOUT=0 D  I SRSOUT S SRSOUT=0 Q
"RTN","SROCD0",98,0)
 .K DIR S DIR("A")="SURE YOU WANT TO DELETE THE ENTIRE OTHER POSTOP DIAGNOSIS CODE",DIR(0)="YO",DIR("B")="NO"
"RTN","SROCD0",99,0)
 .D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRSOUT=1 Q
"RTN","SROCD0",100,0)
 .K DA,DIE,DR S DA=$P(SRSEL(SRDA),U),DA(1)=SRTN,DIE="^SRO(136,SRTN,4,",DR=".01///@" D ^DIE
"RTN","SROCD0",101,0)
 .S X=$P(SRSEL(SRDA),U,4) D DELASOC^SROCDX2 K DA,DIE,DR,SRSEL(SRDA)
"RTN","SROCD0",102,0)
 .D REMIND S SRSOUT=1
"RTN","SROCD0",103,0)
 S (SRDUP,SRI)=0 F  S SRI=$O(SRADIAG(SRI)) Q:'SRI  I SRADIAG(SRI)=SRNEW,SROLD'=SRNEW S SRDUP=1 Q
"RTN","SROCD0",104,0)
 I SRDUP D DUP Q
"RTN","SROCD0",105,0)
 I SRNEW=SROLD Q
"RTN","SROCD0",106,0)
 I SRNEW,SRNEW'=SROLD K DA,DIE,DIR S DA=$P(SRSEL(SRDA),U),DA(1)=SRTN,DIE="^SRO(136,SRTN,4,",DR=".01////"_SRNEW D ^DIE
"RTN","SROCD0",107,0)
 S X=$P(SRSEL(SRDA),U,4) D DELASOC^SROCDX2 K DA,DIE,DR
"RTN","SROCD0",108,0)
 D REMIND
"RTN","SROCD0",109,0)
OSCEI I '$D(SRCL) W !!,"  >>>  No SC/EI information required for this patient.  <<<" D PRESS Q
"RTN","SROCD0",110,0)
 D OSCEI^SROCD
"RTN","SROCD0",111,0)
 Q
"RTN","SROCD0",112,0)
SCEC() N SRSDATE,DFN,SCEC S SRSDATE=$S($D(SRTN):$P(^SRF(SRTN,0),U,9),1:DT)
"RTN","SROCD0",113,0)
 S DFN=$P(^SRF(SRTN,0),U) D CL^SDCO21(DFN,SRSDATE,,.SRCL)
"RTN","SROCD0",114,0)
 S SCEC=$S($D(SRCL):1,1:0)
"RTN","SROCD0",115,0)
 Q SCEC
"RTN","SROCD0",116,0)
ADCHK() ; check for other procedures with no associated diagnosis
"RTN","SROCD0",117,0)
 N SRADX,SROTH,SRQ S (SRADX,SROTH,SRQ)=0
"RTN","SROCD0",118,0)
 F  S SROTH=$O(^SRO(136,SRTN,3,SROTH)) Q:'SROTH  I '$O(^SRO(136,SRTN,3,SROTH,2,0)) S SRADX=1 Q
"RTN","SROCD0",119,0)
 Q SRADX
"RTN","SROCD0",120,0)
REMIND ; display reminder to update procedure/diagnosis associations
"RTN","SROCD0",121,0)
 K DIR W ! S DIR("A",1)="Please review and update procedure associations for this diagnosis."
"RTN","SROCD0",122,0)
 S DIR("A",2)="",DIR("A")="Press Enter/Return key to continue ",DIR(0)="FOA" D ^DIR K DIR
"RTN","SROCD0",123,0)
 Q
"RTN","SROCD0",124,0)
OIND D GETS^DIQ(136.04,OTH_","_SRTN_",",".02:.08","E","ENVARR")
"RTN","SROCD0",125,0)
 I $D(ENVARR(136.04,OTH_","_SRTN_",",.02,"E")) D
"RTN","SROCD0",126,0)
 .N SRCOLSPN S SRCOLSPN=13 W !
"RTN","SROCD0",127,0)
 .I $D(SRCL(3)) W ?SRCOLSPN,"SC:",$E(ENVARR(136.04,OTH_","_SRTN_",",.02,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",128,0)
 .I $D(SRCL(7)) W ?SRCOLSPN,"CV:",$E(ENVARR(136.04,OTH_","_SRTN_",",.08,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",129,0)
 .I $D(SRCL(1)) W ?SRCOLSPN,"AO:",$E(ENVARR(136.04,OTH_","_SRTN_",",.03,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",130,0)
 .I $D(SRCL(2)) W ?SRCOLSPN,"IR:",$E(ENVARR(136.04,OTH_","_SRTN_",",.04,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",131,0)
 .I $D(SRCL(4)) W ?SRCOLSPN,"EC:",$E(ENVARR(136.04,OTH_","_SRTN_",",.07,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",132,0)
 .I $D(SRCL(5)) W ?SRCOLSPN,"MST:",$E(ENVARR(136.04,OTH_","_SRTN_",",.05,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",133,0)
 .I $D(SRCL(6)) W ?SRCOLSPN,"H&N:",$E(ENVARR(136.04,OTH_","_SRTN_",",.06,"E")) S SRCOLSPN=SRCOLSPN+8
"RTN","SROCD0",134,0)
 Q
"RTN","SROCD1")
0^82^B21644302
"RTN","SROCD1",1,0)
SROCD1 ;BIR/ADM - CREATE CODING RECORD ;02/13/06
"RTN","SROCD1",2,0)
 ;;3.0; Surgery ;**142**;24 Jun 93
"RTN","SROCD1",3,0)
 N SR,SRD,SRDX,SRDICN,SRIEN,SRM,SRMOD,SRN,SRO,SROTH,SRP,SRPD,SRX,SRY,X,Y
"RTN","SROCD1",4,0)
 I $P($G(^SRO(136,SRTN,0)),"^")'=SRTN D NEW
"RTN","SROCD1",5,0)
 S SR(0)=$G(^SRF(SRTN,0))
"RTN","SROCD1",6,0)
 S $P(^SRO(136,SRTN,0),"^",2)=$P($G(^SRF(SRTN,"OP")),"^",2)
"RTN","SROCD1",7,0)
 S $P(^SRO(136,SRTN,0),"^",3)=$P($G(^SRF(SRTN,34)),"^",2)
"RTN","SROCD1",8,0)
SC S $P(^SRO(136,SRTN,0),"^",4)=$P(SR(0),"^",16)
"RTN","SROCD1",9,0)
AO S $P(^SRO(136,SRTN,0),"^",5)=$P(SR(0),"^",17)
"RTN","SROCD1",10,0)
IR S $P(^SRO(136,SRTN,0),"^",6)=$P(SR(0),"^",18)
"RTN","SROCD1",11,0)
EC S $P(^SRO(136,SRTN,0),"^",7)=$P(SR(0),"^",19)
"RTN","SROCD1",12,0)
MST S $P(^SRO(136,SRTN,0),"^",8)=$P(SR(0),"^",22)
"RTN","SROCD1",13,0)
HNC S $P(^SRO(136,SRTN,0),"^",9)=$P(SR(0),"^",23)
"RTN","SROCD1",14,0)
CV S $P(^SRO(136,SRTN,0),"^",10)=$P(SR(0),"^",24)
"RTN","SROCD1",15,0)
PMOD S SRM=0 F  S SRM=$O(^SRF(SRTN,"OPMOD",SRM)) Q:'SRM  D
"RTN","SROCD1",16,0)
 .S SRMOD=$P(^SRF(SRTN,"OPMOD",SRM,0),"^")
"RTN","SROCD1",17,0)
 .S SRY(136.01,"+1,"_SRTN_",",.01)=SRMOD D UPDATE^DIE("","SRY") K SRY
"RTN","SROCD1",18,0)
PDX S SRD=0 F  S SRD=$O(^SRF(SRTN,"PADX",SRD)) Q:'SRD  D
"RTN","SROCD1",19,0)
 .S SRX=$P(^SRF(SRTN,"PADX",SRD,0),"^")
"RTN","SROCD1",20,0)
 .I SRX=0 S SRDX=$P($G(^SRF(SRTN,34)),"^",2)
"RTN","SROCD1",21,0)
 .E  S SRDX=$P($G(^SRF(SRTN,15,SRX,0)),"^",3)
"RTN","SROCD1",22,0)
 .I SRDX S SRY(136.02,"+1,"_SRTN_",",.01)=SRDX D UPDATE^DIE("","SRY") K SRY
"RTN","SROCD1",23,0)
POTH S SRO=0 F  S SRO=$O(^SRF(SRTN,13,SRO)) Q:'SRO  D
"RTN","SROCD1",24,0)
 .S SROTH=$P($G(^SRF(SRTN,13,SRO,2)),"^") Q:'SROTH  S SRDICN=1
"RTN","SROCD1",25,0)
 .K DD,DO,DIC S DIC="^SRO(136,SRTN,3,",DIC(0)="L",X=SROTH D FILE^DICN K DA,DD,DIC,DO,DR S SRIEN=+Y I SRIEN'>0 Q
"RTN","SROCD1",26,0)
 .S SRM=0 F  S SRM=$O(^SRF(SRTN,13,SRO,"MOD",SRM)) Q:'SRM  D
"RTN","SROCD1",27,0)
 ..S SRMOD=$P(^SRF(SRTN,13,SRO,"MOD",SRM,0),"^")
"RTN","SROCD1",28,0)
 ..S SRY(136.31,"+1,"_SRIEN_","_SRTN_",",.01)=SRMOD D UPDATE^DIE("","SRY") K SRY
"RTN","SROCD1",29,0)
 .S SRD=0 F  S SRD=$O(^SRF(SRTN,13,SRO,"OADX",SRD)) Q:'SRD  D
"RTN","SROCD1",30,0)
 ..S SRX=$P(^SRF(SRTN,13,SRO,"OADX",SRD,0),"^")
"RTN","SROCD1",31,0)
 ..I SRX=0 S SRDX=$P($G(^SRF(SRTN,34)),"^",2)
"RTN","SROCD1",32,0)
 ..E  S SRDX=$P($G(^SRF(SRTN,15,SRX,0)),"^",3)
"RTN","SROCD1",33,0)
 ..I SRDX S SRY(136.32,"+1,"_SRIEN_","_SRTN_",",.01)=SRDX D UPDATE^DIE("","SRY") K SRY
"RTN","SROCD1",34,0)
 ; other diagnoses
"RTN","SROCD1",35,0)
 S SRP=0 F  S SRP=$O(^SRF(SRTN,15,SRP)) Q:'SRP  D
"RTN","SROCD1",36,0)
 .S SRPD=$P($G(^SRF(SRTN,15,SRP,0)),"^",3) Q:'SRPD  S SRIS=$G(^SRF(SRTN,15,SRP,2))
"RTN","SROCD1",37,0)
 .S SRY(136.04,"+1,"_SRTN_",",.01)=SRPD,SRY(136.04,"+1,"_SRTN_",",.02)=$P(SRIS,"^")
"RTN","SROCD1",38,0)
 .S SRY(136.04,"+1,"_SRTN_",",.03)=$P(SRIS,"^",2),SRY(136.04,"+1,"_SRTN_",",.04)=$P(SRIS,"^",3)
"RTN","SROCD1",39,0)
 .S SRY(136.04,"+1,"_SRTN_",",.05)=$P(SRIS,"^",4),SRY(136.04,"+1,"_SRTN_",",.06)=$P(SRIS,"^",5)
"RTN","SROCD1",40,0)
 .S SRY(136.04,"+1,"_SRTN_",",.07)=$P(SRIS,"^",6),SRY(136.04,"+1,"_SRTN_",",.08)=$P(SRIS,"^",7)
"RTN","SROCD1",41,0)
 .D UPDATE^DIE("","SRY") K SRIS,SRY
"RTN","SROCD1",42,0)
 Q
"RTN","SROCD1",43,0)
NEW K DA,DIC,DD,DO,DINUM S (DINUM,X)=SRTN,DIC="^SRO(136,",DIC(0)="L" D FILE^DICN K DD,DO,DIC,DINUM
"RTN","SROCD1",44,0)
 Q
"RTN","SROCD1",45,0)
CHNG() ; check for changes to data
"RTN","SROCD1",46,0)
 N SRI,SRJ,SRK,SRS,SRCHNG S SRCHNG=0
"RTN","SROCD1",47,0)
 M ^TMP("SRED2",$J,SRTN)=^SRO(136,SRTN)
"RTN","SROCD1",48,0)
 I $G(^TMP("SRED1",$J,SRTN,0))'=$G(^TMP("SRED2",$J,SRTN,0)) Q 1
"RTN","SROCD1",49,0)
 D COMP
"RTN","SROCD1",50,0)
 Q SRCHNG
"RTN","SROCD1",51,0)
COMP S SRI=0 F  S SRI=$O(^TMP("SRED1",$J,SRTN,1,SRI)) Q:'SRI!SRCHNG  I $G(^TMP("SRED1",$J,SRTN,1,SRI,0))'=$G(^TMP("SRED2",$J,SRTN,1,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",52,0)
 S SRI=0 F  S SRI=$O(^TMP("SRED1",$J,SRTN,2,SRI)) Q:'SRI!SRCHNG  I $G(^TMP("SRED1",$J,SRTN,2,SRI,0))'=$G(^TMP("SRED2",$J,SRTN,2,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",53,0)
 S SRI=0 F  S SRI=$O(^TMP("SRED1",$J,SRTN,3,SRI)) Q:'SRI!SRCHNG  D  Q:SRCHNG
"RTN","SROCD1",54,0)
 .I $G(^TMP("SRED1",$J,SRTN,3,SRI,0))'=$G(^TMP("SRED2",$J,SRTN,3,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",55,0)
 .F SRS=1,2 S SRK=0 F  S SRK=$O(^TMP("SRED1",$J,SRTN,3,SRI,SRS,SRK)) Q:'SRK!SRCHNG  I $G(^TMP("SRED1",$J,SRTN,3,SRI,SRS,SRK,0))'=$G(^TMP("SRED2",$J,SRTN,3,SRI,SRS,SRK,0)) S SRCHNG=1 Q
"RTN","SROCD1",56,0)
 S SRI=0 F  S SRI=$O(^TMP("SRED1",$J,SRTN,4,SRI)) Q:'SRI!SRCHNG  I $G(^TMP("SRED1",$J,SRTN,4,SRI,0))'=$G(^TMP("SRED2",$J,SRTN,4,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",57,0)
 S SRI=0 F  S SRI=$O(^TMP("SRED2",$J,SRTN,1,SRI)) Q:'SRI!SRCHNG  I $G(^TMP("SRED2",$J,SRTN,1,SRI,0))'=$G(^TMP("SRED1",$J,SRTN,1,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",58,0)
 S SRI=0 F  S SRI=$O(^TMP("SRED2",$J,SRTN,2,SRI)) Q:'SRI!SRCHNG  I $G(^TMP("SRED2",$J,SRTN,2,SRI,0))'=$G(^TMP("SRED1",$J,SRTN,2,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",59,0)
 S SRI=0 F  S SRI=$O(^TMP("SRED2",$J,SRTN,3,SRI)) Q:'SRI!SRCHNG  D  Q:SRCHNG
"RTN","SROCD1",60,0)
 .I $G(^TMP("SRED2",$J,SRTN,3,SRI,0))'=$G(^TMP("SRED1",$J,SRTN,3,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",61,0)
 .F SRS=1,2 S SRK=0 F  S SRK=$O(^TMP("SRED2",$J,SRTN,3,SRI,SRS,SRK)) Q:'SRK!SRCHNG  I $G(^TMP("SRED2",$J,SRTN,3,SRI,SRS,SRK,0))'=$G(^TMP("SRED1",$J,SRTN,3,SRI,SRS,SRK,0)) S SRCHNG=1 Q
"RTN","SROCD1",62,0)
 S SRI=0 F  S SRI=$O(^TMP("SRED2",$J,SRTN,4,SRI)) Q:'SRI!SRCHNG  I $G(^TMP("SRED2",$J,SRTN,4,SRI,0))'=$G(^TMP("SRED1",$J,SRTN,4,SRI,0)) S SRCHNG=1 Q
"RTN","SROCD1",63,0)
 K ^TMP("SRED1",$J),^TMP("SRED2",$J)
"RTN","SROCD1",64,0)
 Q
"RTN","SROCD2")
0^83^B22859343
"RTN","SROCD2",1,0)
SROCD2 ;BIR/ADM - DISPLAY MAIN SCREEN FOR CASE CODING ;07/27/05
"RTN","SROCD2",2,0)
 ;;3.0; Surgery ;**142**;24 Jun 93
"RTN","SROCD2",3,0)
 ; display information from file 136
"RTN","SROCD2",4,0)
EN N SCEC,SRCHFNO,SRFIRST,SRFLG,SRCMOD,SRSHRT,SRNON
"RTN","SROCD2",5,0)
DSPLY S (SREDIT,SRSOUT,SRNON,SRCHFNO)=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROCD2",6,0)
 S SRDATE=$P($G(^SRF(SRTN,0)),"^",9),SR(0)=$G(^SRO(136,SRTN,0))
"RTN","SROCD2",7,0)
 D HDR^SROCD W !,$S('SRNON:"Surgery Procedure",1:"Non-OR Procedure")_" PCE/Billing Information:",!
"RTN","SROCD2",8,0)
 S SRDIAG="NOT ENTERED",SRDX=$P(SR(0),"^",3) I SRDX S SRDIAG=$$ICDDX^ICDCODE(SRDX,SRDATE),SRDIAG=$P(SRDIAG,"^",2)_"  "_$P(SRDIAG,"^",4)
"RTN","SROCD2",9,0)
 W !,"1. Principal Postop Diagnosis Code:",?36,SRDIAG
"RTN","SROCD2",10,0)
 W !,"2. Other Postop Diagnosis Code:" I '$O(^SRO(136,SRTN,4,0)) W ?36,"NOT ENTERED"
"RTN","SROCD2",11,0)
 S (SRFLG,SRD)=0 F  S SRD=$O(^SRO(136,SRTN,4,SRD)) Q:'SRD  D
"RTN","SROCD2",12,0)
 .S SRDIAG="",SRDX=$P($G(^SRO(136,SRTN,4,SRD,0)),"^") I SRDX S SRDIAG=$$ICDDX^ICDCODE(SRDX,SRDATE),SRDIAG=$P(SRDIAG,"^",2)_"  "_$P(SRDIAG,"^",4)
"RTN","SROCD2",13,0)
 .W:SRFLG ! W ?36,SRDIAG S SRFLG=1
"RTN","SROCD2",14,0)
 S CPT=$P(SR(0),"^",2),SRCPT="NOT ENTERED",(SRSHRT,SRX)="",SRFLG=0
"RTN","SROCD2",15,0)
 I CPT S Y=$$CPT^ICPTCOD(CPT,SRDATE),SRCPT=$P(Y,"^",2),SRSHRT=$P(Y,"^",3)
"RTN","SROCD2",16,0)
 S SRMSG="NO Assoc. DX ENTERED"
"RTN","SROCD2",17,0)
 I CPT,$O(^SRO(136,SRTN,1,0)) D
"RTN","SROCD2",18,0)
 .S (SRCOMMA,SRI)=0,SRCMOD="",SRX="-" F  S SRI=$O(^SRO(136,SRTN,1,SRI)) Q:'SRI  D
"RTN","SROCD2",19,0)
 ..S SRM=$P(^SRO(136,SRTN,1,SRI,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRM,"I"),"^",2) K SRM
"RTN","SROCD2",20,0)
 ..S SRX=SRX_$S(SRCOMMA:",",1:"")_SRCMOD,SRCOMMA=1
"RTN","SROCD2",21,0)
 W !,"3. Principal CPT Code: ",SRCPT_SRX_"  "_SRSHRT
"RTN","SROCD2",22,0)
 D PADXD^SROCDX1
"RTN","SROCD2",23,0)
 W !,"4. Other CPT Code: " I '$O(^SRO(136,SRTN,3,0)) W ?23,"NOT ENTERED"
"RTN","SROCD2",24,0)
 S SRX=0,SRFIRST=1 F  S SRX=$O(^SRO(136,SRTN,3,SRX)) Q:'SRX  D
"RTN","SROCD2",25,0)
 .S (SRSHRT,SRY)="",CPT=$P($G(^SRO(136,SRTN,3,SRX,0)),"^")
"RTN","SROCD2",26,0)
 .I CPT S Y=$$CPT^ICPTCOD(CPT,SRDATE),SRCPT=$P(Y,"^",2),SRSHRT=$P(Y,"^",3)
"RTN","SROCD2",27,0)
 .I CPT,$O(^SRO(136,SRTN,3,SRX,1,0)) D
"RTN","SROCD2",28,0)
 ..S (SRCOMMA,SRFLG,SRI)=0,SRCMOD="",SRY="-" F  S SRI=$O(^SRO(136,SRTN,3,SRX,1,SRI)) Q:'SRI  D
"RTN","SROCD2",29,0)
 ...S SRM=$P(^SRO(136,SRTN,3,SRX,1,SRI,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRM,"I"),"^",2) K SRM
"RTN","SROCD2",30,0)
 ...S SRY=SRY_$S(SRCOMMA:",",1:"")_SRCMOD,SRCOMMA=1
"RTN","SROCD2",31,0)
 .W:'SRFIRST !,?3,"Other CPT Code: " W SRCPT_SRY_"  "_SRSHRT S SRFIRST=0
"RTN","SROCD2",32,0)
 .W !,?5,"Assoc. DX: " I '$O(^SRO(136,SRTN,3,SRX,2,0)) W " NOT ENTERED"
"RTN","SROCD2",33,0)
 .I CPT S (SRCNT,SRD,SRFLG)=0 F  S SRD=$O(^SRO(136,SRTN,3,SRX,2,SRD)) Q:'SRD  D
"RTN","SROCD2",34,0)
 ..S SRDIAG="",SRDX=$P($G(^SRO(136,SRTN,3,SRX,2,SRD,0)),"^"),SRCNT=SRCNT+1
"RTN","SROCD2",35,0)
 ..I SRDX S SRDIAG=$$ICDDX^ICDCODE(SRDX,SRDATE),SRDIAG=$P(SRDIAG,"^",2)_"-"_$P(SRDIAG,"^",4)
"RTN","SROCD2",36,0)
 ..I SRCNT#2 W:$G(SRFLG) ! W ?16,$E(SRDIAG,1,28) S SRFLG=1
"RTN","SROCD2",37,0)
 ..I '(SRCNT#2) W ?48,$E(SRDIAG,1,28)
"RTN","SROCD2",38,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SROCD2",39,0)
 I $P(^SRO(136,SRTN,0),"^",3)=""!($P(^SRO(136,SRTN,0),"^",2)="") D REQ Q:SRSOUT  G DSPLY
"RTN","SROCD2",40,0)
 S SRAO(1)=.03,SRAO(2)="",SRAO(3)=".02",SRAO(4)=""
"RTN","SROCD2",41,0)
ASK K DIR S DIR("A")="Enter number of item to edit (1-4): ",DIR(0)="FOA",DIR("?",1)="Enter the number corresponding to the information you want to update. You may"
"RTN","SROCD2",42,0)
 S DIR("?",2)="enter 'ALL' to update all the information displayed on this screen, or a",DIR("?")="range of numbers separated by a ':' to update more than one item." D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROCD2",43,0)
 I X="" D ^SROCD4 Q
"RTN","SROCD2",44,0)
 S:$E(X)="a" X="A" I '$D(SRAO(X)),(X'?.N1":".N),($E(X)'="A") D HELP Q:SRSOUT  G ASK
"RTN","SROCD2",45,0)
 I $E(X)="A" S X="1:4"
"RTN","SROCD2",46,0)
 I X?.N1":".N S Y=$E(X),Z=$P(X,":",2) I Y<1!(Z>4)!(Y>Z) D HELP Q:SRSOUT  G ASK
"RTN","SROCD2",47,0)
 I X?.N1":".N D RANGE Q
"RTN","SROCD2",48,0)
 S EMILY=X D ONE Q
"RTN","SROCD2",49,0)
 Q
"RTN","SROCD2",50,0)
HELP W !!,"Enter the number corresponding to the information you want to update. You may",!,"enter 'ALL' to update all the information displayed on this screen, or a"
"RTN","SROCD2",51,0)
 W !,"range of numbers separated by a ':' to update more than one item.",!
"RTN","SROCD2",52,0)
 Q
"RTN","SROCD2",53,0)
RANGE ; range of numbers
"RTN","SROCD2",54,0)
 N CURLEY,EMILY,SHEMP
"RTN","SROCD2",55,0)
 S SHEMP=$P(X,":"),CURLEY=$P(X,":",2) F EMILY=SHEMP:1:CURLEY Q:SRSOUT  D ONE
"RTN","SROCD2",56,0)
 Q
"RTN","SROCD2",57,0)
ONE ; edit one item
"RTN","SROCD2",58,0)
 D HDR^SROCD
"RTN","SROCD2",59,0)
 I EMILY=4 D POTH^SROCD0 Q
"RTN","SROCD2",60,0)
 I EMILY=2 D DOTH^SROCD0 Q
"RTN","SROCD2",61,0)
 I EMILY=1 D PRDX^SROCD0 Q
"RTN","SROCD2",62,0)
 I EMILY=3 D PCPT^SROCDX
"RTN","SROCD2",63,0)
 Q
"RTN","SROCD2",64,0)
REQ W !,"The following information is required before continuing.",!
"RTN","SROCD2",65,0)
PDX I $P(^SRO(136,SRTN,0),"^",3)="" D  Q:SRSOUT
"RTN","SROCD2",66,0)
 .K DA,DIE,DR S DA=SRTN,DIE=136,DR=".03T" D ^DIE I $D(Y) S SRSOUT=1 Q
"RTN","SROCD2",67,0)
 .S Y=$P(^SRO(136,SRTN,0),"^",3) I Y S SCEC=$$SCEC^SROCD0() I SCEC D SCEI^SROCD3 K SRCL
"RTN","SROCD2",68,0)
 I $P(^SRO(136,SRTN,0),"^",3)="" W !,"This is a required response. Enter '^' to exit" G PDX
"RTN","SROCD2",69,0)
 I $D(SCEC) K SCEC Q
"RTN","SROCD2",70,0)
PCPT I $P(^SRO(136,SRTN,0),"^",2)="" K DA,DIE,DR S DA=SRTN,DIE=136,DR=".02T" D ^DIE I $D(Y) S SRSOUT=1 Q
"RTN","SROCD2",71,0)
 I $P(^SRO(136,SRTN,0),"^",2)="" W !,"This is a required response. Enter '^' to exit" G PCPT
"RTN","SROCD2",72,0)
 D PRIN^SROMOD0 K DA,DIE,DR
"RTN","SROCD2",73,0)
 Q
"RTN","SROCD3")
0^84^B22787848
"RTN","SROCD3",1,0)
SROCD3 ;BIR/ADM - ASK SC/EI QUESTIONS FOR CODING ;10/17/05
"RTN","SROCD3",2,0)
 ;;3.0; Surgery ;**142**;24 Jun 93
"RTN","SROCD3",3,0)
 ;
"RTN","SROCD3",4,0)
 ; Reference to DIS^DGRPDB supported by DBIA #700
"RTN","SROCD3",5,0)
 ; Reference to Field #.322013 in File #2 supported by DBIA #3475
"RTN","SROCD3",6,0)
 ;
"RTN","SROCD3",7,0)
ASK W ! K DIR S DIR("A")="Do you want to update classification information (Y/N)? ",DIR("B")="NO",DIR(0)="YA" D ^DIR K DIR I 'Y!$D(DTOUT)!$D(DUOUT) Q
"RTN","SROCD3",8,0)
SCEI ; output of SC/EI conditions
"RTN","SROCD3",9,0)
 N SRAO,SRCV,SRDR,SREC,SRELIG,SRHNC,SRIR,SRMST,SRPERC,SRQ,SREEQ,SRSC,VADM,VAEL,VASV,SRY
"RTN","SROCD3",10,0)
 D DEM^VADPT,ELIG^VADPT,SVC^VADPT
"RTN","SROCD3",11,0)
 S SRELIG=$P(VAEL(1),"^",2),SRSC=$P(VAEL(3),"^"),SRSC=$S(SRSC:"YES",SRSC=0:"NO",1:""),SRPERC=$P(VAEL(3),"^",2)
"RTN","SROCD3",12,0)
 S SRAO=$S(VASV(2):"YES",1:"NO"),SRIR=$S(VASV(3):"YES",1:"NO"),SRCV=$S(VASV(10):"YES",1:"NO")
"RTN","SROCD3",13,0)
 S SRMST=$S($D(SRCL(5)):"YES",1:"NO"),SRHNC=$S($D(SRCL(6)):"YES",1:"NO")
"RTN","SROCD3",14,0)
 S DIC=2,DA=DFN,DR=".322013",DIQ="SRY",DIQ(0)="I" D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROCD3",15,0)
 S SREC=SRY(2,DFN,.322013,"I"),SREC=$S(SREC="Y":"YES",1:"NO")
"RTN","SROCD3",16,0)
 W @IOF,!,VADM(1)_"  ("_VA("PID")_")       ",$P(VAEL(6),"^",2),!!,"   * * * Eligibility Information and Service Connected Conditions * * *"
"RTN","SROCD3",17,0)
 W !!,?5,"Primary Eligibility: "_SRELIG,!,?5,"Combat Vet: "_SRCV,?22,"A/O Exp.: "_SRAO,?39,"M/S Trauma: "_SRMST
"RTN","SROCD3",18,0)
 W !,?5,"ION Rad.: "_SRIR,?22,"Env Contam: "_SREC,?39,"H/N Cancer: "_SRHNC
"RTN","SROCD3",19,0)
 D DIS^DGRPDB
"RTN","SROCD3",20,0)
 W ! F I=1:1:79 W "-"
"RTN","SROCD3",21,0)
SUP S SRY="operation" I $D(SRTN),$P($G(^SRF(SRTN,"NON")),"^")="Y" S SRY="procedure"
"RTN","SROCD3",22,0)
 K DIR W !!,"Please supply the following required information about this "_SRY_":",! S:$D(SRTN) DA=SRTN S SRDR="" S:'$D(SRQ) SRQ=0 D  I SRQ G END
"RTN","SROCD3",23,0)
 .I $D(SRCL(3)) D SC I SRQ Q
"RTN","SROCD3",24,0)
 .I $D(SRCL(7)) D CV I SRQ Q
"RTN","SROCD3",25,0)
 .I $D(SRCL(1)) D AO I SRQ Q
"RTN","SROCD3",26,0)
 .I $D(SRCL(2)) D IR I SRQ Q
"RTN","SROCD3",27,0)
 .I $D(SRCL(4)) D EC I SRQ Q
"RTN","SROCD3",28,0)
 .I $D(SRCL(5)) D MST I SRQ Q
"RTN","SROCD3",29,0)
 .I $D(SRCL(6)) D HNC
"RTN","SROCD3",30,0)
 K DA,DIE,DR S:$D(SRTN) DA=SRTN,DIE=136,DR=SRDR D ^DIE
"RTN","SROCD3",31,0)
UPDX I $O(^SRO(136,SRTN,4,0)) D
"RTN","SROCD3",32,0)
 .W ! K DIR S DIR("A",1)="Update all 'OTHER POSTOP DIAGNOSIS' Eligibility and Service Connected",DIR("A")="Conditions with these values (Y/N)"
"RTN","SROCD3",33,0)
 .S DIR("B")="NO",DIR(0)="Y" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) Q
"RTN","SROCD3",34,0)
 .I Y D UPDSC
"RTN","SROCD3",35,0)
END K DA,DIE,DR,SRZ,X,Y
"RTN","SROCD3",36,0)
 Q
"RTN","SROCD3",37,0)
SC S DIR("A")="Treatment related to Service Connected condition (Y/N)",DIR(0)="136,.04" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",38,0)
 I X=""!(X="@") W !,*7,?15,"Enter YES or NO." G SC
"RTN","SROCD3",39,0)
 S SRCL(3)=Y,SRDR=$G(SRDR)_".04////"_SRCL(3)_";"
"RTN","SROCD3",40,0)
 S SRCL(3,"UPDATE")=1
"RTN","SROCD3",41,0)
 Q
"RTN","SROCD3",42,0)
CV S DIR("A")="Treatment related to Combat (Y/N)",DIR(0)="136,.1" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",43,0)
 I X=""!(X="@") W !,*7,?15,"Enter YES or NO." G CV
"RTN","SROCD3",44,0)
 S SRCL(7)=Y,SRDR=SRDR_".1////"_SRCL(7)_";"
"RTN","SROCD3",45,0)
 S SRCL(7,"UPDATE")=1
"RTN","SROCD3",46,0)
 Q
"RTN","SROCD3",47,0)
AO S DIR("A")="Treatment related to Agent Orange Exposure (Y/N)",DIR(0)="136,.05" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",48,0)
 I X=""!(X="@") W !,*7,?15,"Enter YES or NO." G AO
"RTN","SROCD3",49,0)
 S SRCL(1)=Y,SRDR=SRDR_".05////"_SRCL(1)_";"
"RTN","SROCD3",50,0)
 S SRCL(1,"UPDATE")=1
"RTN","SROCD3",51,0)
 Q
"RTN","SROCD3",52,0)
IR S DIR("A")="Treatment related to Ionizing Radiation Exposure (Y/N)",DIR(0)="136,.06" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",53,0)
 I X=""!(X="@") W !,*7,?15,"Enter YES or NO." G IR
"RTN","SROCD3",54,0)
 S SRCL(2)=Y,SRDR=SRDR_".06////"_SRCL(2)_";"
"RTN","SROCD3",55,0)
 S SRCL(2,"UPDATE")=1
"RTN","SROCD3",56,0)
 Q
"RTN","SROCD3",57,0)
EC S DIR("A")="Treatment related to Environmental Contaminant Exposure (Y/N)",DIR(0)="136,.07" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",58,0)
 I X=""!(X="@") W !,*7,?15,"Enter YES or NO." G EC
"RTN","SROCD3",59,0)
 S SRCL(4)=Y,SRDR=SRDR_".07////"_SRCL(4)_";"
"RTN","SROCD3",60,0)
 S SRCL(4,"UPDATE")=1
"RTN","SROCD3",61,0)
 Q
"RTN","SROCD3",62,0)
MST S DIR("A")="Treatment related to Military Sexual Trauma (Y/N)",DIR(0)="136,.08" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",63,0)
 I X=""!(X="@") W !,*7,?15,"Enter YES or NO." G MST
"RTN","SROCD3",64,0)
 S SRCL(5)=Y,SRDR=SRDR_".08////"_SRCL(5)_";"
"RTN","SROCD3",65,0)
 S SRCL(5,"UPDATE")=1
"RTN","SROCD3",66,0)
 Q
"RTN","SROCD3",67,0)
HNC S DIR("A")="Treatment related to Head and/or Neck Cancer (Y/N)",DIR(0)="136,.09" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRQ=1 Q
"RTN","SROCD3",68,0)
 I X=""!(X="@") W !,*7,?15,"Enter YES or NO." G HNC
"RTN","SROCD3",69,0)
 S SRCL(6)=Y,SRDR=SRDR_".09////"_SRCL(6)_";"
"RTN","SROCD3",70,0)
 S SRCL(6,"UPDATE")=1
"RTN","SROCD3",71,0)
 Q
"RTN","SROCD3",72,0)
PRESS W ! K DIR S DIR("A")="Press RETURN to continue  ",DIR(0)="FOA" D ^DIR K DIR W @IOF
"RTN","SROCD3",73,0)
 Q
"RTN","SROCD3",74,0)
UPDSC ;Update existing DX to Service Connected/Environmental Indicators associations.
"RTN","SROCD3",75,0)
 K DA,DIE,DR
"RTN","SROCD3",76,0)
 S (DA,I)=0,DA(1)=SRTN,DIE="^SRO(136,"_SRTN_",4,"
"RTN","SROCD3",77,0)
 D:$D(SRCL(1,"UPDATE")) BLDDR(.03,SRCL(1))
"RTN","SROCD3",78,0)
 D:$D(SRCL(2,"UPDATE")) BLDDR(.04,SRCL(2))
"RTN","SROCD3",79,0)
 D:$D(SRCL(3,"UPDATE")) BLDDR(.02,SRCL(3))
"RTN","SROCD3",80,0)
 D:$D(SRCL(4,"UPDATE")) BLDDR(.07,SRCL(4))
"RTN","SROCD3",81,0)
 D:$D(SRCL(5,"UPDATE")) BLDDR(.05,SRCL(5))
"RTN","SROCD3",82,0)
 D:$D(SRCL(6,"UPDATE")) BLDDR(.06,SRCL(6))
"RTN","SROCD3",83,0)
 D:$D(SRCL(7,"UPDATE")) BLDDR(.08,SRCL(7))
"RTN","SROCD3",84,0)
 F I=1:1 S DA=$O(^SRO(136,SRTN,4,DA)) Q:DA=""  D ^DIE
"RTN","SROCD3",85,0)
 Q
"RTN","SROCD3",86,0)
BLDDR(DXPIECE,NEWSC) ;Build the DR string for updating DX/Service Indicators associations
"RTN","SROCD3",87,0)
 S:$D(DR) DR=DR_";"
"RTN","SROCD3",88,0)
 S:'$D(DR) DR=""
"RTN","SROCD3",89,0)
 S DR=DR_DXPIECE_"///"_NEWSC
"RTN","SROCD3",90,0)
 K DXPIECE,NEWSC
"RTN","SROCD3",91,0)
 Q
"RTN","SROCD4")
0^85^B27765963
"RTN","SROCD4",1,0)
SROCD4 ;BIR/ADM - MARK CASE CODING COMPLETE ;10/17/05
"RTN","SROCD4",2,0)
 ;;3.0; Surgery ;**142**;24 Jun 93
"RTN","SROCD4",3,0)
 ;
"RTN","SROCD4",4,0)
 ; Reference to CL^SDCO21 supported by DBIA #406
"RTN","SROCD4",5,0)
 ;
"RTN","SROCD4",6,0)
 N SR,SRCHF,SRCL,SRDATA,SRDX,SRICD,SRK,SRMISS,SROTH,SRSDATE,SRTYPE
"RTN","SROCD4",7,0)
 D CHF I SRCHF=1 D ASKCHF I SRCHFNO Q
"RTN","SROCD4",8,0)
 S SR(0)=^SRO(136,SRTN,0) S SRSOUT=0,SREDIT=1
"RTN","SROCD4",9,0)
 I $P(SR(0),"^",2)="" S SRMISS("PRINCIPAL PROCEDURE CODE")=""
"RTN","SROCD4",10,0)
 I $P(SR(0),"^",3)="" S SRMISS("PRINCIPAL POSTOP DIAGNOSIS CODE")=""
"RTN","SROCD4",11,0)
 S DFN=$P(^SRF(SRTN,0),"^"),SRSDATE=$P(^SRF(SRTN,0),"^",9) D CL^SDCO21(DFN,SRSDATE,,.SRCL) I $D(SRCL) D PSCEI
"RTN","SROCD4",12,0)
 I '$O(^SRO(136,SRTN,2,0)) S SRMISS("PRINCIPAL ASSOCIATED DIAGNOSIS")=""
"RTN","SROCD4",13,0)
 S SROTH=0 F  S SROTH=$O(^SRO(136,SRTN,3,SROTH)) Q:'SROTH  I '$O(^SRO(136,SRTN,3,SROTH,2,0)) S SRMISS("OTHER ASSOCIATED DIAGNOSIS")="" Q
"RTN","SROCD4",14,0)
 S SROTH=0 F  S SROTH=$O(^SRO(136,SRTN,4,SROTH)) Q:'SROTH  I $D(SRCL) S SRDX=^SRO(136,SRTN,4,SROTH,0) D OSCEI
"RTN","SROCD4",15,0)
 I $D(SRMISS) D MISS Q
"RTN","SROCD4",16,0)
 I $P($G(^SRO(136,SRTN,10)),"^"),'$$CHNG^SROCD1 D  Q
"RTN","SROCD4",17,0)
 .I '$P(^SRF(SRTN,0),"^",15) D FILE Q
"RTN","SROCD4",18,0)
 I '$P($G(^SRO(136,SRTN,10)),"^") D  D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROCD4",19,0)
 .W ! K DIR S DIR("A")="Is the coding of this case complete and ready to send to PCE",DIR("B")="NO",DIR(0)="Y"
"RTN","SROCD4",20,0)
FILE D NOW^%DTC S SRNOW=$E(%,1,12) D
"RTN","SROCD4",21,0)
 .K DA,DIE,DR S DA=SRTN,DIE=136,DR="10////1" D ^DIE K DA,DIE,DR
"RTN","SROCD4",22,0)
 .K DD,DO S DIC="^SRO(136,SRTN,11,",DIC(0)="L",X=DUZ,DIC("DR")="1////"_SRNOW D FILE^DICN K DA,DD,DIC,DO,DR
"RTN","SROCD4",23,0)
 .W !!,"Processing data to be sent to PCE..." D CHKIN I SRK D  K SRK Q
"RTN","SROCD4",24,0)
 ..W !!,"Information needed to send the case to PCE is missing. Use the PCE"
"RTN","SROCD4",25,0)
 ..W !,"Filing Status Report to review missing information. The case will be"
"RTN","SROCD4",26,0)
 ..W !,"sent to PCE upon completion of the missing information.",! D PAGE
"RTN","SROCD4",27,0)
 .D START^SROPCEP ; send to PCE
"RTN","SROCD4",28,0)
 .W !!,"Coding completed and sent to PCE.",! D PAGE
"RTN","SROCD4",29,0)
 Q
"RTN","SROCD4",30,0)
CHKIN ; check for items in file 130 required by PCE
"RTN","SROCD4",31,0)
 N SR,SRAO,SRATT,SRCHK,SRCPT,SRCV,SRDATE,SRDEPC,SRDIAG,SRDXF,SREC,SRHNC,SRINOUT,SRIR,SRLOC,SRMST,SRNON,SRO,SRODIAG,SRPROV,SRRPROV,SRSC,SRUP,SRX
"RTN","SROCD4",32,0)
 D UTIL^SROPCEP
"RTN","SROCD4",33,0)
 Q
"RTN","SROCD4",34,0)
CHF ; check diagnoses for CRIMEAN HEMORRHAGIC FEVER
"RTN","SROCD4",35,0)
 N SRY,X,Y S SRY="",SRCHF=0
"RTN","SROCD4",36,0)
 K DIC S DIC="^ICD9(",DIC(0)="XM",X="CHF" D ^DIC S:Y'=-1 SRY=+Y Q:'SRY
"RTN","SROCD4",37,0)
 S Y=$$ICDDX^ICDCODE("065.0",$P(^SRF(SRTN,0),"^",9)) I $P(Y,"^")'=SRY Q
"RTN","SROCD4",38,0)
 S SRICD=$P(Y,"^",2)_" "_$P(Y,"^",4),X=$P(^SRO(136,SRTN,0),"^",3) I X=SRY S SRCHF=1 Q
"RTN","SROCD4",39,0)
 S Y=0 F  S Y=$O(^SRO(136,SRTN,4,Y)) Q:'Y  I $P(^SRO(136,SRTN,4,Y,0),"^")=SRY S SRCHF=1 Q
"RTN","SROCD4",40,0)
 Q
"RTN","SROCD4",41,0)
ASKCHF ; ask for confirmation of CRIMEAN HEMORRHAGIC FEVER diagnosis
"RTN","SROCD4",42,0)
 K DIR S DIR("A",1)="",DIR(0)="Y",SRCHFNO=0
"RTN","SROCD4",43,0)
 S DIR("A",2)="The ICD Diagnosis Code "_SRICD_" was entered as the"
"RTN","SROCD4",44,0)
 S DIR("A",3)="Principal or Other Diagnosis. It is possible that you entered ""CHF"" and"
"RTN","SROCD4",45,0)
 S DIR("A",4)="have the wrong code entered.",DIR("A",5)=""
"RTN","SROCD4",46,0)
 S DIR("A",6)="Are you sure that you want to submit this case to PCE with the case"
"RTN","SROCD4",47,0)
 S DIR("A")="coded using "_SRICD,DIR("B")="NO"
"RTN","SROCD4",48,0)
 D ^DIR K DIR I $D(DTOUT)!$D(DUOUT)!'Y S SRCHFNO=1
"RTN","SROCD4",49,0)
 Q
"RTN","SROCD4",50,0)
MISS W !!,"Coding of this surgical case is not complete.",!,"The following items are missing:",!
"RTN","SROCD4",51,0)
 S SRDATA="" F  S SRDATA=$O(SRMISS(SRDATA)) Q:SRDATA=""  W ?5,SRDATA,!
"RTN","SROCD4",52,0)
 W !,"This case cannot be sent to PCE until all missing information is supplied.",!
"RTN","SROCD4",53,0)
PAGE K DIR S DIR(0)="FOA",DIR("A")="Press Enter/Return key to continue " D ^DIR K DIR
"RTN","SROCD4",54,0)
 Q
"RTN","SROCD4",55,0)
PSCEI S SRTYPE="PRINCIPAL"
"RTN","SROCD4",56,0)
 I $D(SRCL(1)),$P(SR(0),"^",5)="" D SRSET Q
"RTN","SROCD4",57,0)
 I $D(SRCL(2)),$P(SR(0),"^",6)="" D SRSET Q
"RTN","SROCD4",58,0)
 I $D(SRCL(3)),$P(SR(0),"^",4)="" D SRSET Q
"RTN","SROCD4",59,0)
 I $D(SRCL(4)),$P(SR(0),"^",7)="" D SRSET Q
"RTN","SROCD4",60,0)
 I $D(SRCL(5)),$P(SR(0),"^",8)="" D SRSET Q
"RTN","SROCD4",61,0)
 I $D(SRCL(6)),$P(SR(0),"^",9)="" D SRSET Q
"RTN","SROCD4",62,0)
 I $D(SRCL(7)),$P(SR(0),"^",10)="" D SRSET
"RTN","SROCD4",63,0)
 Q
"RTN","SROCD4",64,0)
OSCEI S SRTYPE="OTHER DIAGNOSIS"
"RTN","SROCD4",65,0)
 I $D(SRCL(1)),$P(SRDX,"^",3)="" D SRSET Q
"RTN","SROCD4",66,0)
 I $D(SRCL(2)),$P(SRDX,"^",4)="" D SRSET Q
"RTN","SROCD4",67,0)
 I $D(SRCL(3)),$P(SRDX,"^",2)="" D SRSET Q
"RTN","SROCD4",68,0)
 I $D(SRCL(4)),$P(SRDX,"^",7)="" D SRSET Q
"RTN","SROCD4",69,0)
 I $D(SRCL(5)),$P(SRDX,"^",5)="" D SRSET Q
"RTN","SROCD4",70,0)
 I $D(SRCL(6)),$P(SRDX,"^",6)="" D SRSET Q
"RTN","SROCD4",71,0)
 I $D(SRCL(7)),$P(SRDX,"^",8)="" D SRSET
"RTN","SROCD4",72,0)
 Q
"RTN","SROCD4",73,0)
SRSET S SRMISS(SRTYPE_" SC/EI")=""
"RTN","SROCD4",74,0)
 Q
"RTN","SROCD4",75,0)
CONV ; convert coding data from file 130 to file 136
"RTN","SROCD4",76,0)
 I $O(^SRO(136,0)) D MES^XPDUTL("Conversion has already run.") Q
"RTN","SROCD4",77,0)
 D NITE^SROPCE
"RTN","SROCD4",78,0)
C2 N SRCT,SRD,SRODX,SRPDX,SRPP,SROP,SRP,SRTN
"RTN","SROCD4",79,0)
 D MES^XPDUTL(" Converting coding data from file 130 to file 136...")
"RTN","SROCD4",80,0)
 S (SRCT,SRTN)=0 F  S SRTN=$O(^SRF(SRTN)) Q:'SRTN  D
"RTN","SROCD4",81,0)
 .I '$P($G(^SRF(SRTN,.2)),"^",12)&'$P($G(^SRF(SRTN,"NON")),"^",5) Q
"RTN","SROCD4",82,0)
 .S SRPP=$P($G(^SRF(SRTN,"OP")),"^",2),(SROP,SRP)=0 F  S SRP=$O(^SRF(SRTN,13,SRP)) Q:'SRP  I $P($G(^SRF(SRTN,13,SRP,2)),"^") S SROP=1 Q
"RTN","SROCD4",83,0)
 .S SRPDX=$P($G(^SRF(SRTN,34)),"^",2),(SRODX,SRD)=0 F  S SRD=$O(^SRF(SRTN,15,SRD)) Q:'SRD  I $P($G(^SRF(SRTN,15,SRD,0)),"^",3) S SRODX=1 Q
"RTN","SROCD4",84,0)
 .I SRPP!SROP!SRPDX!SRODX D
"RTN","SROCD4",85,0)
 ..Q:$D(^SRO(136,SRTN,0))
"RTN","SROCD4",86,0)
 ..D ^SROCD1 S SRCT=SRCT+1 I '(SRCT#10000) D MES^XPDUTL(SRCT_" cases converted... ")
"RTN","SROCD4",87,0)
 D MES^XPDUTL("Total cases converted: "_SRCT)
"RTN","SROCD4",88,0)
 Q
"RTN","SROCD4",89,0)
PRE ; pre-install entry
"RTN","SROCD4",90,0)
 ; delete APCE x-refs
"RTN","SROCD4",91,0)
 K DIE,DR,DIK,DA S DIK="^DD(130.16,3,1,",DA=1,DA(1)=3,DA(2)=130.16 D ^DIK
"RTN","SROCD4",92,0)
 K DIK,DA S DIK="^DD(130.165,.01,1,",DA=2,DA(1)=.01,DA(2)=130.165 D ^DIK
"RTN","SROCD4",93,0)
 K DIK,DA S DIK="^DD(130.18,.01,1,",DA=9,DA(1)=.01,DA(2)=130.18 D ^DIK
"RTN","SROCD4",94,0)
 K DIK,DA S DIK="^DD(130.18,3,1,",DA=1,DA(1)=3,DA(2)=130.18 D ^DIK
"RTN","SROCD4",95,0)
 K DIK,DA S DIK="^DD(130,27,1,",DA=1,DA(1)=27,DA(2)=130 D ^DIK
"RTN","SROCD4",96,0)
 K DIK,DA S DIK="^DD(130.275,.01,1,",DA=1,DA(1)=.01,DA(2)=130.275 D ^DIK
"RTN","SROCD4",97,0)
 K DIK,DA S DIK="^DD(130,32.5,1,",DA=1,DA(1)=32.5,DA(2)=130 D ^DIK
"RTN","SROCD4",98,0)
 K DIK,DA S DIK="^DD(130,66,1,",DA=1,DA(1)=66,DA(2)=130 D ^DIK K DIK,DA
"RTN","SROCD4",99,0)
 Q
"RTN","SROCDX")
0^86^B21645937
"RTN","SROCDX",1,0)
SROCDX ;BIR/ADM - CASE CODING INPUT/EDIT ;08/29/05
"RTN","SROCDX",2,0)
 ;;3.0; Surgery ;**142**;24 Jun 93
"RTN","SROCDX",3,0)
PCPT ; edit principal procedure code
"RTN","SROCDX",4,0)
 N SRPPY,SRPRIN S (SRPRIN,X)=$P(^SRO(136,SRTN,0),"^",2) I 'X D PPROC Q
"RTN","SROCDX",5,0)
 W !,"Principal Procedure:",! D CPTDISP,ASDX^SROCDX1
"RTN","SROCDX",6,0)
 K DIR S DIR(0)="SO^1:Update Principal Procedure CPT Code;2:Update Associated Diagnoses"
"RTN","SROCDX",7,0)
 S DIR("A")="Enter selection (1 or 2)",DIR("B")=1 D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROCDX",8,0)
 S SRPPY=Y D  Q
"RTN","SROCDX",9,0)
 .I SRPPY=1 D PPROC Q
"RTN","SROCDX",10,0)
 .I SRPPY=2 D CASDX
"RTN","SROCDX",11,0)
 Q
"RTN","SROCDX",12,0)
PPROC N SRCPT S SRCPT=$P(^SRO(136,SRTN,0),"^",2),SRDIE=1 W !
"RTN","SROCDX",13,0)
 K DR,DIE,DA S DIE=136,DA=SRTN,DR=".02T" D ^DIE K DIE,DR,SRDIE I $D(Y) S SRSOUT=1
"RTN","SROCDX",14,0)
 D PRIN^SROMOD0 I SRCPT'=$P(^SRO(136,SRTN,0),"^",2) D SADXP^SROCDX2 K DA
"RTN","SROCDX",15,0)
 S X=$P(^SRO(136,SRTN,0),"^",2) I $G(SRPRIN)=X Q
"RTN","SROCDX",16,0)
CASDX ; associate principal CPT to diagnosis
"RTN","SROCDX",17,0)
 N SRADX,SRDX0,SRDX1,SRDX2,SRDXCT,SRODIR,SRDIRX,OTHCNT,SRASSDS,SROCT
"RTN","SROCDX",18,0)
 S CPT=$P(^SRO(136,SRTN,0),"^",2) Q:'CPT  K DIR
"RTN","SROCDX",19,0)
 S SRODIR("A",1)="   Select the number(s) of the Diagnosis Code to associate to"
"RTN","SROCDX",20,0)
 S SRODIR("A")="   the procedure selected"
"RTN","SROCDX",21,0)
 D HDR^SROCD,CPTDISP,ASDX^SROCDX1
"RTN","SROCDX",22,0)
 K DIR D SRODIR
"RTN","SROCDX",23,0)
 W !
"RTN","SROCDX",24,0)
 S DIR(0)=SRDX2,SRASSDS=$$PASSDS^SROCDX1,DIR("B")=SRASSDS
"RTN","SROCDX",25,0)
 F I=1:1 D ^DIR Q:(($$VALASC())&('$$DXDUP(Y)))
"RTN","SROCDX",26,0)
 Q:(Y["^")!(Y="")
"RTN","SROCDX",27,0)
 D PADD1^SROCDX1 Q
"RTN","SROCDX",28,0)
 Q:Y="Q"!(Y["")
"RTN","SROCDX",29,0)
 G CASDX
"RTN","SROCDX",30,0)
 Q
"RTN","SROCDX",31,0)
COTHADX D COTHBLD        ;Associate "Other" CPTs to Diagnosis
"RTN","SROCDX",32,0)
 N SRDX0,SRDX1,SRDX2,SRDIR,OTHCNT,SRASSDS
"RTN","SROCDX",33,0)
 S OTHCNT=SRDA
"RTN","SROCDX",34,0)
 S SRODIR("A",1)="   Select the number(s) of the Diagnosis Code to associate to"
"RTN","SROCDX",35,0)
 S SRODIR("A")="   the procedure selected"
"RTN","SROCDX",36,0)
 K DIR D HDR^SROCD,OTHCPTD,OTHADX^SROCDX1
"RTN","SROCDX",37,0)
 K DIR D SRODIR W ! F I=1:1:80 W "-"
"RTN","SROCDX",38,0)
 S DIR(0)=SRDX2 I $G(D0)="",$G(SRPOTH) S D0=SRPOTH
"RTN","SROCDX",39,0)
 S SRASSDS=$$OASSDS^SROCDX1
"RTN","SROCDX",40,0)
 S DIR("B")=SRASSDS I SRASSDS="",$G(SRDIRX(1))'="" S DIR("B")=1
"RTN","SROCDX",41,0)
 F I=1:1 D ^DIR Q:(($$VALASC())&('$$DXDUP(Y)))
"RTN","SROCDX",42,0)
 Q:(Y["^")!(Y="")
"RTN","SROCDX",43,0)
 D OADD1^SROCDX1
"RTN","SROCDX",44,0)
 Q:Y="Q"!(Y["")
"RTN","SROCDX",45,0)
 G COTHADX
"RTN","SROCDX",46,0)
 Q
"RTN","SROCDX",47,0)
DXDUP(SRDX) I (Y["^")!($G(DTOUT)) Q 0
"RTN","SROCDX",48,0)
 N SRAI,SRDXX,SRDUP,DIR S SRDUP=0
"RTN","SROCDX",49,0)
 I SRDX="" Q 0
"RTN","SROCDX",50,0)
 F SRAI=1:1:$L(SRDX,",") D
"RTN","SROCDX",51,0)
 .Q:$P(SRDX,",",SRAI)<1
"RTN","SROCDX",52,0)
 .I $D(SRDXX($P(SRDX,",",SRAI)))!((SRDIRX($P(SRDX,",",SRAI))="ALL")&($L(SRDX,",")>1)) S SRDUP=1,DIR(0)="FO^",DIR("A",1)="     **Duplicates entered",DIR("A")="     Press Return to continue" D ^DIR
"RTN","SROCDX",53,0)
 .S SRDXX($P(SRDX,",",SRAI))=""
"RTN","SROCDX",54,0)
 Q SRDUP
"RTN","SROCDX",55,0)
VALASC() I (Y["^")!('$G(Y(0)))!($G(DTOUT)) Q 1
"RTN","SROCDX",56,0)
 N VALA,DIR S VALA=1
"RTN","SROCDX",57,0)
 S:Y=""!(Y=U)!('+Y(0))!(Y[",0")!($P(Y,",",1)=0) VALA=0
"RTN","SROCDX",58,0)
 I 'VALA S DIR("A",1)="     **Invalid input",DIR(0)="FO^",DIR("A")="     Press Return to continue" D ^DIR
"RTN","SROCDX",59,0)
 Q VALA
"RTN","SROCDX",60,0)
SRODIR N SRFLG,SRCNT,SRCNTR
"RTN","SROCDX",61,0)
 S DIR("A",1)="Only the following ICD Diagnosis Codes can be associated:"
"RTN","SROCDX",62,0)
 S DIR("A",2)=""
"RTN","SROCDX",63,0)
 S (SRFLG,SRCNT)=1,SRCNTR=3,ADCNT="" F  S ADCNT=$O(SRDIRX(ADCNT)) Q:'ADCNT  D
"RTN","SROCDX",64,0)
 .S:'$D(DIR("A",SRCNTR)) DIR("A",SRCNTR)=""
"RTN","SROCDX",65,0)
 .S DIR("A",SRCNTR)=DIR("A",SRCNTR)_SRCNT_". "_SRDIRX(ADCNT),SRCNT=SRCNT+1,SRCNTR=SRCNTR+1,SRFLG=1
"RTN","SROCDX",66,0)
 S DIR("A",SRCNTR+2)=SRODIR("A",1),DIR("A")=SRODIR("A"),DIR("A",SRCNTR+1)=""
"RTN","SROCDX",67,0)
 Q
"RTN","SROCDX",68,0)
COTHBLD N SRCNT,OTH,X,CPT,CPT1,SRDA K SRSEL
"RTN","SROCDX",69,0)
 S OTH=0,SRCNT=1 F  S OTH=$O(^SRO(136,SRTN,3,OTH)) Q:'OTH  D
"RTN","SROCDX",70,0)
 .S X=$P(^SRO(136,SRTN,3,OTH,0),U),CPT1=""
"RTN","SROCDX",71,0)
 .I X S CPT1=X,Y=$$CPT^ICPTCOD(X),SRCPT=$P(Y,U,2),SRSHT=$P(Y,U,3),Y=SRCPT,SRDA=OTH D SSOTH^SROCPT0 S SRCPT=Y,CPT=SRCPT_"  "_SRSHT
"RTN","SROCDX",72,0)
 .S SRSEL(SRCNT)=OTH_"^CPT Code: "_CPT_U_CPT1_U_$E(SRCPT,1,5)_"  "_SRSHT
"RTN","SROCDX",73,0)
 .S SRCNT=SRCNT+1
"RTN","SROCDX",74,0)
 Q
"RTN","SROCDX",75,0)
OTHCPTD N SRM,SRI,SRFIRST,SRY ;PROCS/Codes/Mods.
"RTN","SROCDX",76,0)
 S SRFIRST=0 D COTHBLD
"RTN","SROCDX",77,0)
 W !,"Other Procedures:",!!,OTHCNT,"."," CPT Code: "_$P(SRSEL(SRDA),U,4)
"RTN","SROCDX",78,0)
 S OTH=$P(SRSEL(SRDA),U) W !,?5,"Modifiers: "
"RTN","SROCDX",79,0)
 S SRI=0 F  S SRI=$O(^SRO(136,SRTN,3,OTH,1,SRI)) Q:'SRI  D
"RTN","SROCDX",80,0)
 .S SRM=$P(^SRO(136,SRTN,3,OTH,1,SRI,0),U)
"RTN","SROCDX",81,0)
 .W:SRFIRST !,?16 W $P($$MOD^ICPTMOD(SRM,"I"),"^",2),"-",$P($$MOD^ICPTMOD(SRM,"I"),"^",3)
"RTN","SROCDX",82,0)
 .S SRFIRST=1
"RTN","SROCDX",83,0)
 I '$O(^SRO(136,SRTN,3,OTH,1,0)) W "NOT ENTERED"
"RTN","SROCDX",84,0)
 Q
"RTN","SROCDX",85,0)
CPTDISP N SRFIRST,SRMO
"RTN","SROCDX",86,0)
 S X=$P(^SRO(136,SRTN,0),U,2) I X S SRY=$$CPT^ICPTCOD(X),Y=$P(SRY,U,2),(SROCPT2,Z)=$P(SRY,U,3)
"RTN","SROCDX",87,0)
 S:'$D(Y) Y="NOT ENTERED",Z="" W !,?3,"CPT Code: "_Y_"  "_Z,!,?3,"Modifiers: "
"RTN","SROCDX",88,0)
 I '$O(^SRO(136,SRTN,1,0)) W "NOT ENTERED"
"RTN","SROCDX",89,0)
 S SRMOD=0 F  S SRMOD=$O(^SRO(136,SRTN,1,SRMOD)) Q:'SRMOD  D
"RTN","SROCDX",90,0)
 .S SRMO=$P(^SRO(136,SRTN,1,SRMOD,0),U)
"RTN","SROCDX",91,0)
 .W:$G(SRFIRST) !,?14 W $P($$MOD^ICPTMOD(SRMO,"I"),"^",2),"-",$P($$MOD^ICPTMOD(SRMO,"I"),"^",3)
"RTN","SROCDX",92,0)
 .S SRFIRST=1
"RTN","SROCDX",93,0)
 Q
"RTN","SROCDX1")
0^87^B25057274
"RTN","SROCDX1",1,0)
SROCDX1 ;BIR/ADM - ASSOCIATED DIAGNOSIS FOR CODER SCREENS ;05/16/05
"RTN","SROCDX1",2,0)
 ;;3.0; Surgery ;**142**;24 Jun 93
"RTN","SROCDX1",3,0)
OTHADX ;Display ASDX for OTHER PROCS
"RTN","SROCDX1",4,0)
 N SRTMP,SRASSD,SROICD
"RTN","SROCDX1",5,0)
 S SRPADX=0,SROCNTR=1 F SRI=1:1 S SRPADX=$O(^SRO(136,SRTN,3,OTH,2,SRPADX)) Q:'SRPADX  D
"RTN","SROCDX1",6,0)
 .S SRICD9=^SRO(136,SRTN,3,OTH,2,SRPADX,0)
"RTN","SROCDX1",7,0)
 .S:SRICD9 SROICD=$$ICDSTR
"RTN","SROCDX1",8,0)
 .S SRTMP(SRI)=SROICD,SROCNTR=SROCNTR+1
"RTN","SROCDX1",9,0)
 S SROCNTR=0
"RTN","SROCDX1",10,0)
 D ADXDISP I '$O(^SRO(136,SRTN,3,OTH,2,0)) W "NOT ENTERED",!
"RTN","SROCDX1",11,0)
 D PASSDIAG,ASSDIAG
"RTN","SROCDX1",12,0)
 Q
"RTN","SROCDX1",13,0)
ASDX ;Display ASDX for PRIN Procs
"RTN","SROCDX1",14,0)
 N SRI,SRFIRST,SRICD9,SRPRIN,SRPADX,SRASSD K SRTMP
"RTN","SROCDX1",15,0)
 S SRI=0,SRFIRST=1 F  S SRI=$O(^SRO(136,SRTN,1,SRI)) Q:'SRI  S SRM=$P(^SRO(136,SRTN,1,SRI,0),U)
"RTN","SROCDX1",16,0)
 S SRPADX=0,SROCNTR=2 F SRI=1:1 S SRPADX=$O(^SRO(136,SRTN,2,SRPADX)) Q:'SRPADX  D
"RTN","SROCDX1",17,0)
 .S SRICD9=^SRO(136,SRTN,2,SRPADX,0)
"RTN","SROCDX1",18,0)
 .S:SRICD9 SROICD=$$ICDSTR
"RTN","SROCDX1",19,0)
 .S SRTMP(SRI)=SROICD,SROCNTR=SROCNTR+1
"RTN","SROCDX1",20,0)
 D ADXDISP I '$O(^SRO(136,SRTN,2,0)) W !,?5,SRMSG
"RTN","SROCDX1",21,0)
 D PASSDIAG,ASSDIAG
"RTN","SROCDX1",22,0)
 Q
"RTN","SROCDX1",23,0)
AASDX S SROICD=""
"RTN","SROCDX1",24,0)
 S:SRASSD SRICD9=$P($G(^SRO(136,SRTN,4,SRASSD,0)),U)
"RTN","SROCDX1",25,0)
 S:'SRASSD SRICD9=$P($G(^SRO(136,SRTN,0)),U,3)
"RTN","SROCDX1",26,0)
 S:SRICD9 SROICD=$$ICDSTR
"RTN","SROCDX1",27,0)
 Q
"RTN","SROCDX1",28,0)
PASSDIAG N ADCNT,SRICD9,SRFLG,SRCNTR,SRASSD  ;List PRIN DX to assoc.
"RTN","SROCDX1",29,0)
 K SRADX,SRDIRX,SRADIAG S SRICD9=$P($G(^SRO(136,SRTN,0)),U,3)
"RTN","SROCDX1",30,0)
 I SRICD9'="" S SRDIRX(1)=$$ICDSTR,SRADX(1)=$P(^ICD9(SRICD9,0),U,1),SRADIAG(1)=$P($G(^SRO(136,SRTN,0)),U,3)
"RTN","SROCDX1",31,0)
 I SRICD9="" S SRDIRX(1)="",SRADIAG(1)=""
"RTN","SROCDX1",32,0)
 Q
"RTN","SROCDX1",33,0)
ASSDIAG N SRDCNT,SRADCNT,SRQ ;DXs for assoc.
"RTN","SROCDX1",34,0)
 S (ADCNT,SRASSD)=0 S SRCNT=$S($G(SRDIRX(1))'="":1,1:0)
"RTN","SROCDX1",35,0)
 F  S ADCNT=$O(^SRO(136,SRTN,4,ADCNT)) Q:ADCNT=""  D
"RTN","SROCDX1",36,0)
 .S SRICD9=$P(^SRO(136,SRTN,4,ADCNT,0),U)
"RTN","SROCDX1",37,0)
 .S:SRICD9'="" SRCNT=SRCNT+1,SRDIRX(SRCNT)=$$ICDSTR,SRADX(SRCNT)=$P(^ICD9(SRICD9,0),U,1)
"RTN","SROCDX1",38,0)
 .S:SRICD9="" SRDIRX(SRCNT)=$P(^SRO(136,SRTN,4,ADCNT,0),U)
"RTN","SROCDX1",39,0)
 .S SRADIAG(SRCNT)=$P(^SRO(136,SRTN,4,ADCNT,0),U)
"RTN","SROCDX1",40,0)
 S:$D(SRDIRX) SRDX2="LO^:"_SRCNT
"RTN","SROCDX1",41,0)
 Q
"RTN","SROCDX1",42,0)
SRDIAGS() N SRDIAGS,SRDGCNT
"RTN","SROCDX1",43,0)
 S (SRDIAGS,SRDGCNT)=0 S:$D(^SRF(SRTN,34)) SRDIAGS=1
"RTN","SROCDX1",44,0)
 F I=1:1 S SRDGCNT=$O(^SRF(SRTN,15,SRDGCNT)) Q:SRDGCNT=""  S SRDIAGS=SRDIAGS+1
"RTN","SROCDX1",45,0)
 Q SRDIAGS
"RTN","SROCDX1",46,0)
ICDSTR() N SRICDSTR
"RTN","SROCDX1",47,0)
 S SRICDSTR=$P($$ICDDX^ICDCODE(SRICD9,SRSDATE),U,2)_"-"_$P($$ICDDX^ICDCODE(SRICD9,SRSDATE),U,4)
"RTN","SROCDX1",48,0)
 Q SRICDSTR
"RTN","SROCDX1",49,0)
PASSDS() N SRDX,SRI,SRJ,SRPADX,SRASSDS,SRPX
"RTN","SROCDX1",50,0)
 S SRASSDS="",SRPADX=0 F  S SRPADX=$O(^SRO(136,SRTN,2,SRPADX)) Q:'SRPADX  D
"RTN","SROCDX1",51,0)
 .S SRDX=$P(^SRO(136,SRTN,2,SRPADX,0),"^")
"RTN","SROCDX1",52,0)
 .S SRJ=0 F  S SRJ=$O(SRADIAG(SRJ)) Q:'SRJ  I SRADIAG(SRJ)=SRDX S SRPX=SRJ Q
"RTN","SROCDX1",53,0)
 .S SRASSDS=$S($L(SRASSDS)<1:SRPX,1:SRASSDS_","_SRPX)
"RTN","SROCDX1",54,0)
 Q SRASSDS
"RTN","SROCDX1",55,0)
OASSDS() N SRDX,SRI,SRJ,SRPADX,SRASSDS,SRPX
"RTN","SROCDX1",56,0)
 S SRASSDS="",SRPADX=0 F  S SRPADX=$O(^SRO(136,SRTN,3,SRPOTH,2,SRPADX)) Q:'SRPADX  D
"RTN","SROCDX1",57,0)
 .S SRDX=$P(^SRO(136,SRTN,3,SRPOTH,2,SRPADX,0),"^")
"RTN","SROCDX1",58,0)
 .S SRJ=0 F  S SRJ=$O(SRADIAG(SRJ)) Q:'SRJ  I SRADIAG(SRJ)=SRDX S SRPX=SRJ Q
"RTN","SROCDX1",59,0)
 .S SRASSDS=$S($L(SRASSDS)<1:SRPX,1:SRASSDS_","_SRPX)
"RTN","SROCDX1",60,0)
 Q SRASSDS
"RTN","SROCDX1",61,0)
OTHADXD N SRCOMMA,SROADX,SRICD9,SROADX1,SROODX,SRASSD,SRSUB ;OTHER PROCS ADXs
"RTN","SROCDX1",62,0)
 I '$O(^SRO(136,SRTN,3,OTH,2,0)) W !,?5,SRMSG Q
"RTN","SROCDX1",63,0)
 S SRSUB=1 D OTHADX
"RTN","SROCDX1",64,0)
 Q
"RTN","SROCDX1",65,0)
PADXD N SRCOMMA,SRPADX,SRICD9,SRPDX,SRPDX1,SROPRIN,SRSUB
"RTN","SROCDX1",66,0)
 S SRPADX=0,SROCNTR=2,SRSUB=1
"RTN","SROCDX1",67,0)
 I '$O(^SRO(136,SRTN,2,0)),$P(^SRO(136,SRTN,0),U,3) D
"RTN","SROCDX1",68,0)
 .S SRASSD=$P(^SRO(136,SRTN,0),U,3),SRFDA="136.02",SRIENU="+1"_","_SRTN_",",SRIENF=0_","_SRTN_"," D UPDATE,FILE
"RTN","SROCDX1",69,0)
 D ASDX
"RTN","SROCDX1",70,0)
 Q
"RTN","SROCDX1",71,0)
ADXDISP N SROCNTR ;ADXS for PROC
"RTN","SROCDX1",72,0)
 W !,?5,"Assoc. DX: " N SRFIRST
"RTN","SROCDX1",73,0)
 S (SROCNTR,SRDXCNT)=0,SRFIRST=1
"RTN","SROCDX1",74,0)
 F I=1:1  S SROCNTR=$O(SRTMP(SROCNTR)) Q:'SROCNTR  D
"RTN","SROCDX1",75,0)
 .I $D(SRSUB) D
"RTN","SROCDX1",76,0)
 ..W:'(I#2) ?48 W:I#2 ?16 W $E(SRTMP(SROCNTR),1,28)
"RTN","SROCDX1",77,0)
 ..I '(I#2),($O(SRTMP(SROCNTR))) W !
"RTN","SROCDX1",78,0)
 .I '$D(SRSUB) W:'SRFIRST ! W ?16,$E(SRTMP(SROCNTR),1,28) S SRFIRST=0
"RTN","SROCDX1",79,0)
 S SRDXCNT=I,SRDX1="LO^:"_SRDXCNT S:SRDXCNT>0 SRDX1="LO^:"_SRDXCNT
"RTN","SROCDX1",80,0)
 Q
"RTN","SROCDX1",81,0)
PADD1 ;PRIN ADX
"RTN","SROCDX1",82,0)
 N SRY,SRY0,SRY1,SRY2,SRC,REC,DIE,DA,DR,SRASSD
"RTN","SROCDX1",83,0)
 S SRY(0)=Y(0)
"RTN","SROCDX1",84,0)
 D KPADX^SROCDX2(SRTN)
"RTN","SROCDX1",85,0)
 S SRCNTR=0,SRASSD=SRADIAG($P(SRY(0),",",1)),SRFDA="136.02",SRIENU="+1"_","_SRTN_",",SRIENF=SRCNTR_","_SRTN_"," D UPDATE,FILE
"RTN","SROCDX1",86,0)
 S SRY(0)=$E(SRY(0),2,$L(SRY(0)))
"RTN","SROCDX1",87,0)
 F SRY2=1:1:$P(SRDX2,":",2) D
"RTN","SROCDX1",88,0)
 .S SRY0=$P(SRY(0),",",SRY2)
"RTN","SROCDX1",89,0)
 .Q:SRY0<1
"RTN","SROCDX1",90,0)
 .S SRCNTR=$P(^SRO(136,SRTN,2,0),U,3)+1,SRASSD=SRADIAG(SRY0),SRFDA="136.02",SRIENU="+1"_","_SRTN_",",SRIENF=SRCNTR_","_SRTN_"," D UPDATE,FILE
"RTN","SROCDX1",91,0)
 S Y(0)=SRY(0)
"RTN","SROCDX1",92,0)
 Q
"RTN","SROCDX1",93,0)
OADD1 N SRY,SRY0,SRY1,SRY2,SRCNTR,SRASSD ;Associate 1 Diagnosis to OTHER Procedure
"RTN","SROCDX1",94,0)
 S SRY(0)=Y(0),SRCNTR=0
"RTN","SROCDX1",95,0)
 S:$D(^SRO(136,SRTN,3,OTH,2)) SRCNTR=$P(^SRO(136,SRTN,3,OTH,2,0),U,3)+1
"RTN","SROCDX1",96,0)
 D KOADX^SROCDX2(SRTN,OTH)
"RTN","SROCDX1",97,0)
 S:'$D(^SRO(136,SRTN,3,OTH,2)) SRCNTR=1
"RTN","SROCDX1",98,0)
 S SRFDA="136.32",SRIENU="+1"_","_OTH_","_SRTN_","
"RTN","SROCDX1",99,0)
 F SRY2=1:1:$P(SRDX2,":",2) D
"RTN","SROCDX1",100,0)
 .S SRY0=$P(SRY(0),",",SRY2)
"RTN","SROCDX1",101,0)
 .Q:'SRY0
"RTN","SROCDX1",102,0)
 .S SRASSD=SRADIAG(SRY0),SRIENF=SRCNTR_","_OTH_","_SRTN_"," K SRY1 D UPDATE,FILE
"RTN","SROCDX1",103,0)
 .S SRCNTR=SRCNTR+1
"RTN","SROCDX1",104,0)
 S Y(0)=SRY(0)
"RTN","SROCDX1",105,0)
 Q
"RTN","SROCDX1",106,0)
UPDATE ;
"RTN","SROCDX1",107,0)
 S SRY1(SRFDA,SRIENU,".01")=SRASSD
"RTN","SROCDX1",108,0)
 D UPDATE^DIE("","SRY1")
"RTN","SROCDX1",109,0)
 Q
"RTN","SROCDX1",110,0)
FILE ;
"RTN","SROCDX1",111,0)
 S SRY1(SRFDA,SRIENF,".01")=SRASSD D FILE^DIE("","SRY1") K SRY1
"RTN","SROCDX1",112,0)
 Q
"RTN","SROCDX1",113,0)
CONT N DIR S DIR(0)="FO^",DIR("A")="Press RETURN to continue  " D ^DIR
"RTN","SROCDX1",114,0)
 Q
"RTN","SROCDX2")
0^88^B14335464
"RTN","SROCDX2",1,0)
SROCDX2 ;BIR/ADM - ASSOCIATED DIAGNOSIS CODING UTILITIES ;07/27/05
"RTN","SROCDX2",2,0)
 ;;3.0; Surgery ;**142**;24 Jun 93
"RTN","SROCDX2",3,0)
PRLOOP(SRCHK) N SRDX,SRMATCH,SRXX S (SRDX,SRMATCH)=0,SRXX=X
"RTN","SROCDX2",4,0)
 F SRI=1:1 S SRDX=$O(^SRO(136,SRTN,2,SRDX)) Q:'SRDX  D
"RTN","SROCDX2",5,0)
 .I X=^SRO(136,SRTN,2,SRDX,0) D
"RTN","SROCDX2",6,0)
 ..I 'SRCHK D KPADX(SRTN,SRDX) S X=SRXX
"RTN","SROCDX2",7,0)
 ..S:$G(SRNEW) ^SRO(136,SRTN,2,SRDX,0)=SRNEW
"RTN","SROCDX2",8,0)
 ..S SRMATCH=1
"RTN","SROCDX2",9,0)
 Q SRMATCH
"RTN","SROCDX2",10,0)
OTLOOP(SRCHK) N SRDA,OTH,SRMATCH,SRXX S (OTH,SRMATCH)=0,SRXX=X
"RTN","SROCDX2",11,0)
 F  S OTH=$O(^SRO(136,SRTN,3,OTH)) Q:'OTH  D
"RTN","SROCDX2",12,0)
 .S SRDA=0 F  S SRDA=$O(^SRO(136,SRTN,3,OTH,2,SRDA)) Q:'+SRDA  D
"RTN","SROCDX2",13,0)
 ..I X=^SRO(136,SRTN,3,OTH,2,SRDA,0) D  Q
"RTN","SROCDX2",14,0)
 ...I 'SRCHK D KOADX(SRTN,OTH,SRDA) S X=SRXX
"RTN","SROCDX2",15,0)
 ...S:$G(SRNEW) ^SRO(136,SRTN,3,OTH,2,SRDA,0)=SRNEW
"RTN","SROCDX2",16,0)
 ...S SRMATCH=1
"RTN","SROCDX2",17,0)
 Q SRMATCH
"RTN","SROCDX2",18,0)
DELASOC N DIR,Y,SRPR,SROT,SRXBAK
"RTN","SROCDX2",19,0)
 Q:$G(X)=""  S SRXBAK=X
"RTN","SROCDX2",20,0)
 S:'$D(SRTN)&$D(DA(1)) SRTN=DA(1) S:'$D(SRTN)&'$D(DA(1)) SRTN=DA
"RTN","SROCDX2",21,0)
 S SRPR=$$PRLOOP(1),SROT=$$OTLOOP(1)
"RTN","SROCDX2",22,0)
 I 'SRPR,'SROT Q
"RTN","SROCDX2",23,0)
 S X=SRXBAK,SRPR=$$PRLOOP(0),SROT=$$OTLOOP(0)
"RTN","SROCDX2",24,0)
 Q
"RTN","SROCDX2",25,0)
PRINASOD Q:$G(SRTN)=""!($G(X)="")
"RTN","SROCDX2",26,0)
 N D0 S D0=0  D DELASOC
"RTN","SROCDX2",27,0)
 Q
"RTN","SROCDX2",28,0)
SCOND(X1,X2) ; set condition for ADXP x-ref
"RTN","SROCDX2",29,0)
 N SRDO S SRDO=0
"RTN","SROCDX2",30,0)
 I X1(1)'="",X1(1)'=X2(1) S SRDO=1
"RTN","SROCDX2",31,0)
 Q SRDO
"RTN","SROCDX2",32,0)
KCOND(X1,X2) ; kill condition for ADXP x-ref
"RTN","SROCDX2",33,0)
 N SRDO S SRDO=0
"RTN","SROCDX2",34,0)
 I X2(1)="" S SRDO=1
"RTN","SROCDX2",35,0)
 Q SRDO
"RTN","SROCDX2",36,0)
SADXP ; ADXP x-ref set logic
"RTN","SROCDX2",37,0)
 N DIR,Y
"RTN","SROCDX2",38,0)
 I '$O(^SRO(136,DA,2,0)) Q
"RTN","SROCDX2",39,0)
 S DIR("A",1)="",DIR("A",2)="The Diagnosis to Procedure Associations may no longer be correct.",DIR("A")="Delete all Principal Associated Diagnoses"
"RTN","SROCDX2",40,0)
 S DIR(0)="Y",DIR("B")="NO" D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROCDX2",41,0)
 I Y D KADXP
"RTN","SROCDX2",42,0)
 Q
"RTN","SROCDX2",43,0)
KADXP ; ADXP x-ref kill logic
"RTN","SROCDX2",44,0)
 N SRASSD,SRFDA,SRIENU,SRIENF,SRTN
"RTN","SROCDX2",45,0)
 S SRTN=DA D AT2 I $P(^SRO(136,SRTN,0),U,3) D
"RTN","SROCDX2",46,0)
 .S SRASSD=$P(^SRO(136,SRTN,0),U,3),SRFDA="136.02",SRIENU="+1"_","_SRTN_",",SRIENF=0_","_SRTN_"," D UPDATE^SROCDX1,FILE^SROCDX1
"RTN","SROCDX2",47,0)
 Q
"RTN","SROCDX2",48,0)
AT2 ; delete principal associated diagnoses
"RTN","SROCDX2",49,0)
 N SRDA,SRJ,SRY
"RTN","SROCDX2",50,0)
 S SRDA=DA,SRJ=0 F  S SRJ=$O(^SRO(136,SRDA,2,SRJ)) Q:'SRJ  D
"RTN","SROCDX2",51,0)
 .S SRY(136.02,SRJ_","_SRDA_",",.01)="@" D FILE^DIE("","SRY")
"RTN","SROCDX2",52,0)
 Q
"RTN","SROCDX2",53,0)
SADXO ; ADXO x-ref set logic
"RTN","SROCDX2",54,0)
 N DIR,Y
"RTN","SROCDX2",55,0)
 I '$O(^SRO(136,DA(1),3,DA,2,0)) Q
"RTN","SROCDX2",56,0)
 S DIR("A",1)="",DIR("A",2)="The Diagnosis to Procedure Associations may no longer be correct.",DIR("A")="Delete all Other Associated Diagnoses"
"RTN","SROCDX2",57,0)
 S DIR(0)="Y",DIR("B")="NO" D ^DIR I $D(DTOUT)!$D(DUOUT)!'Y Q
"RTN","SROCDX2",58,0)
 I Y D KADXO
"RTN","SROCDX2",59,0)
 Q
"RTN","SROCDX2",60,0)
KADXO ; ADXO x-ref kill logic
"RTN","SROCDX2",61,0)
 N SRDA,SRJ,SRY
"RTN","SROCDX2",62,0)
 S SRDA=DA,SRDA(1)=DA(1),SRJ=0 F  S SRJ=$O(^SRO(136,SRDA(1),3,SRDA,2,SRJ)) Q:'SRJ  D
"RTN","SROCDX2",63,0)
 .S SRY(136.32,SRJ_","_SRDA_","_SRDA(1)_",",.01)="@" D FILE^DIE("","SRY")
"RTN","SROCDX2",64,0)
 Q
"RTN","SROCDX2",65,0)
KPADX(SRCN,SRPDA) ; kill all the principal cpt associated diagnosis codes
"RTN","SROCDX2",66,0)
 N DA,DIK,SRX1,Y
"RTN","SROCDX2",67,0)
 S SRX1=0,DA(1)=SRCN
"RTN","SROCDX2",68,0)
 I '$G(SRPDA) F  S SRX1=$O(^SRO(136,DA(1),2,SRX1)) Q:'SRX1  D
"RTN","SROCDX2",69,0)
 .S DA=SRX1,DA(1)=SRCN,DIK="^SRO(136,"_DA(1)_",2," D ^DIK
"RTN","SROCDX2",70,0)
 Q:'$G(SRPDA)
"RTN","SROCDX2",71,0)
 S DA=SRPDA,DA(1)=SRCN,DIK="^SRO(136,"_DA(1)_",2," D ^DIK
"RTN","SROCDX2",72,0)
 Q
"RTN","SROCDX2",73,0)
KOADX(SRCN,SRREC,SRPDA) ; kill other cpt associated diagnosis codes
"RTN","SROCDX2",74,0)
 N DA,DIK,SRX1,Y
"RTN","SROCDX2",75,0)
 S SRX1=0,DA(2)=SRCN
"RTN","SROCDX2",76,0)
 I '$G(SRPDA) F  S SRX1=$O(^SRO(136,DA(2),3,SRREC,2,SRX1)) Q:'SRX1  D
"RTN","SROCDX2",77,0)
 .S DA=SRX1,DA(1)=SRREC,DA(2)=SRCN,DIK="^SRO(136,"_DA(2)_",3,"_DA(1)_",2," D ^DIK
"RTN","SROCDX2",78,0)
 Q:'$G(SRPDA)
"RTN","SROCDX2",79,0)
 S DA=SRPDA,DA(1)=SRREC,DA(2)=SRCN,DIK="^SRO(136,"_DA(2)_",3,"_DA(1)_",2," D ^DIK
"RTN","SROCDX2",80,0)
 Q
"RTN","SROCDX2",81,0)
DELWRN N SRC
"RTN","SROCDX2",82,0)
 S SRC(1)="This case cannot be sent to PCE until all procedures have at",SRC(1,"F")="!!?3"
"RTN","SROCDX2",83,0)
 S SRC(2)="least one associated diagnosis code entered.",SRC(2,"F")="!?3"
"RTN","SROCDX2",84,0)
 D EN^DDIOL(.SRC)
"RTN","SROCDX2",85,0)
 Q
"RTN","SROCLAB")
0^33^B3998916^B3973659
"RTN","SROCLAB",1,0)
SROCLAB ;BIR/SJA - ENTER/EDIT CARDIAC LAB INFORMATION ;01/21/04  08:27 AM
"RTN","SROCLAB",2,0)
 ;;3.0; Surgery ;**125,142**;24 Jun 93
"RTN","SROCLAB",3,0)
 I '$D(SRTN) W !!,"You must select a surgery risk assessment prior to using this option.",!!,"Press <RET> to continue  " R X:DTIME G END
"RTN","SROCLAB",4,0)
 S SRSOUT=0,SRSUPCPT=1 D ^SROAUTL
"RTN","SROCLAB",5,0)
START G:SRSOUT END D HDR^SROAUTL
"RTN","SROCLAB",6,0)
 W !,"Enter/Edit Laboratory Test Results",!!,"1. Capture Laboratory Information",!,"2. Enter, Edit, or Review Laboratory Test Results"
"RTN","SROCLAB",7,0)
ASK W !!,"Select Number: " R X:DTIME I '$T!("^"[X) G END
"RTN","SROCLAB",8,0)
 I X>2!(X<1)!(X'?.N) D HELP G:SRSOUT END G START
"RTN","SROCLAB",9,0)
 I X=1 D ^SROCL1 G START
"RTN","SROCLAB",10,0)
 D ^SROACPM1 G START
"RTN","SROCLAB",11,0)
END ;
"RTN","SROCLAB",12,0)
 W @IOF D ^SRSKILL
"RTN","SROCLAB",13,0)
 Q
"RTN","SROCLAB",14,0)
HELP W !!,"Enter '1' if you want to capture laboratory test results from the",!,"DHCP Laboratory records.  Enter '2' if you want to enter, edit, or review laboratory test results."
"RTN","SROCLAB",15,0)
PRESS W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROCLAB",16,0)
 Q
"RTN","SROCMPS")
0^34^B17061652^B16971881
"RTN","SROCMPS",1,0)
SROCMPS ;BIR/MAM - ENTER/EDIT OCCURRENCES ;06/17/04  6:55 AM
"RTN","SROCMPS",2,0)
 ;;3.0; Surgery ;**14,32,38,95,102,116,125,142**;24 Jun 93
"RTN","SROCMPS",3,0)
INTRA S SRTYPE=10,SRTY="INTRAOPERATIVE",SRTYPDD="130.13A"
"RTN","SROCMPS",4,0)
POST I '$D(SRTYPE) S SRTYPE=16,SRTY="POSTOPERATIVE",SRTYPDD="130.22A"
"RTN","SROCMPS",5,0)
 W @IOF,! S SRSOUT=0 I '$D(SRTN) S SRTN1=1 D ^SROPS I '$D(SRTN) S SRSOUT=1 G END
"RTN","SROCMPS",6,0)
 D SRA^SROES
"RTN","SROCMPS",7,0)
 S SRSUPCPT=1 D ^SROAUTL S SRNAME=$P(VADM(1),"^")_"  ("_VA("PID")_")",SRLINE="" F I=0:1:79 S SRLINE=SRLINE_"-"
"RTN","SROCMPS",8,0)
EDIT G:SRSOUT END K SRCOMP S SRNEW=0
"RTN","SROCMPS",9,0)
 I '$O(^SRF(SRTN,SRTYPE,0)) D NEW G:SRSOUT END D ^SROCMPED G EDIT
"RTN","SROCMPS",10,0)
 D HDR^SROAUTL W "Enter/Edit "_$S(SRTYPE=10:"Intraoperative",1:"Postoperative")_" Occurrences",! S (COMP,CNT)=0 F  S COMP=$O(^SRF(SRTN,SRTYPE,COMP)) Q:'COMP  D LIST
"RTN","SROCMPS",11,0)
SEL W !,"Select a number ("_$S(CNT=1:1,1:"1-"_CNT)_"), or type 'NEW' to enter another occurrence: " R X:DTIME I '$T!("^"[X) S SRSOUT=1 G END
"RTN","SROCMPS",12,0)
 K SRENTRY I $E(X)="N"!($E(X)="n") D NEW G:SRSOUT END D ^SROCMPED G EDIT
"RTN","SROCMPS",13,0)
 I '$D(SRCOMP(X)) W !!,"Select the number corresponding to the occurrence you want to update, or",!,"enter 'NEW' to add another occurrence. ",!!,"Press RETURN to continue  " R X:DTIME G EDIT
"RTN","SROCMPS",14,0)
 S:'$D(SRENTRY) SRENTRY=$P(SRCOMP(X),"^",3) D ^SROCMPED G EDIT
"RTN","SROCMPS",15,0)
 Q
"RTN","SROCMPS",16,0)
END D:$D(SRTN) EN^SROCCAT,EXIT^SROES I $D(SRTN1) K SRTN,SRTN1
"RTN","SROCMPS",17,0)
 I 'SRSOUT W !!,"Press RETURN to continue  " R X:DTIME
"RTN","SROCMPS",18,0)
 D:'$D(SROVER) ^SRSKILL W @IOF
"RTN","SROCMPS",19,0)
 Q
"RTN","SROCMPS",20,0)
LIST ; list existing occurrences
"RTN","SROCMPS",21,0)
 S CNT=CNT+1,SRC(0)=^SRF(SRTN,SRTYPE,COMP,0),SRCMP=$P(SRC(0),"^"),SRCAT=$P(SRC(0),"^",2),SRCAT=$S(SRCAT:$P(^SRO(136.5,SRCAT,0),"^"),1:"NOT ENTERED"),SRCOMP(CNT)=SRCMP_"^"_SRCAT_"^"_COMP
"RTN","SROCMPS",22,0)
 W !,CNT_".  ",?5,SRCMP,!,?5,"Category: "_SRCAT,!
"RTN","SROCMPS",23,0)
 Q
"RTN","SROCMPS",24,0)
NEW ; enter new occurrences
"RTN","SROCMPS",25,0)
 D HDR^SROAUTL W ! I '$O(^SRF(SRTN,SRTYPE,0)) W !,"There are no "_$S(SRTYPE=10:"Intraoperative",1:"Postoperative")_" Occurrences entered for this case.",!!
"RTN","SROCMPS",26,0)
 K DIR,X S SRDD=$S(SRTYPE=10:130.13,1:130.22),DIR(0)=SRDD_","_$S(SRTYPE=10:3,1:5)_"O",DIR("A")="Enter a New "_$S(SRTYPE=10:"Intraoperative",1:"Postoperative")_" Occurrence" D ^DIR I $D(DUOUT)!(Y="") S SRSOUT=1 Q
"RTN","SROCMPS",27,0)
 K SRCOM,SRPOINT S SRPOINT=+Y,SRCOM=$P(Y,"^",2),SRNEW=1 D PRESS
"RTN","SROCMPS",28,0)
 S SRICD="" I SRCOM["OTHER" D ICD I SRSOUT Q
"RTN","SROCMPS",29,0)
 I '$D(^SRF(SRTN,SRTYPE,0)) S ^SRF(SRTN,SRTYPE,0)="^"_SRTYPDD_"^^"
"RTN","SROCMPS",30,0)
 K DD,DA,DO,DIC,DINUM S X=SRCOM,DIC(0)="L",DLAYGO=SRDD,DA(1)=SRTN,DIC="^SRF("_SRTN_","_SRTYPE_"," D FILE^DICN S SRENTRY=+Y
"RTN","SROCMPS",31,0)
 S $P(^SRF(SRTN,SRTYPE,+Y,0),"^",2)=SRPOINT,$P(^SRF(SRTN,SRTYPE,+Y,0),"^",3)=SRICD
"RTN","SROCMPS",32,0)
 Q
"RTN","SROCMPS",33,0)
ICD W !!,"Since you have selected one of the 'OTHER' occurrence categories, an ICD",!,"Diagnosis Code should be entered for this occurrence."
"RTN","SROCMPS",34,0)
 S DIR(0)=$S(SRTY="INTRAOPERATIVE":"130.13,4",1:"130.22,6"),DIR("A")="Select ICD Diagnosis Code" D ^DIR K DIR I $D(DUOUT) Q
"RTN","SROCMPS",35,0)
 I +Y>0 S SRICD=+Y,SRCOM=$P($$ICDC^SROICD(+Y),"^",3)
"RTN","SROCMPS",36,0)
 Q
"RTN","SROCMPS",37,0)
DESC ; output occurrence category description when doing lookup
"RTN","SROCMPS",38,0)
 N SRX,SRY,SRZ
"RTN","SROCMPS",39,0)
 S SRX=0,SRY=Y F  S SRX=$O(^SRO(136.5,SRY,1,SRX)) Q:'SRX  S SRZ(SRX)=^SRO(136.5,SRY,1,SRX,0),SRZ(SRX,"F")="!?2"
"RTN","SROCMPS",40,0)
 I $O(SRZ(0)) D EN^DDIOL(.SRZ)
"RTN","SROCMPS",41,0)
 D EN^DDIOL(" ","","!")
"RTN","SROCMPS",42,0)
 Q
"RTN","SROCMPS",43,0)
PRESS K DIR W ! S DIR(0)="FOA",DIR("A")="Press RETURN to continue: " D ^DIR K DIR I $D(DTOUT) S SRSOUT=1
"RTN","SROCMPS",44,0)
 Q
"RTN","SROCMPS",45,0)
CO() ; called by screen on post-op occurrence category field
"RTN","SROCMPS",46,0)
 N SRSCR,SRTYPE,SRX S SRSCR="I '$P(^(0),U,2)" D  Q SRSCR
"RTN","SROCMPS",47,0)
 .S SRX=$S($D(SRTN):SRTN,$D(DA(1)):DA(1),1:"") Q:'SRX
"RTN","SROCMPS",48,0)
 .S SRTYPE=$P($G(^SRF(SRX,"RA")),U,2)
"RTN","SROCMPS",49,0)
 .I SRTYPE'=""&(SRTYPE'="C") S SRSCR=SRSCR_"&($P(^(0),U,4)'="_"""Y"""_")"
"RTN","SROCMPS",50,0)
 Q
"RTN","SROCPT0")
0^90^B14774043
"RTN","SROCPT0",1,0)
SROCPT0 ;BIR/ADM - CPT CODING UTILITY ;04/20/05
"RTN","SROCPT0",2,0)
 ;;3.0; Surgery ;**142**;24 Jun 93
"RTN","SROCPT0",3,0)
1 N SRCODE,SRDA,SRDATE,SRDES,SRI,SRX
"RTN","SROCPT0",4,0)
 S SRDATE=DT
"RTN","SROCPT0",5,0)
 S SRDA=$S($G(SRTN):SRTN,$D(DA(1)):DA(1),$D(DA):DA,1:"")
"RTN","SROCPT0",6,0)
 I $G(SRDA) S SRDATE=$P($G(^SRF(SRDA,0)),"^",9)
"RTN","SROCPT0",7,0)
 S SRDATE=$S($G(ICPTVDT):ICPTVDT,1:SRDATE)
"RTN","SROCPT0",8,0)
 S SRCODE=Y,SRX=$$CPTD^ICPTCOD(SRCODE,"SRDES",,SRDATE)
"RTN","SROCPT0",9,0)
 F SRI=1:1:SRX D:$TR(SRDES(SRI)," ")'="" EN^DDIOL(SRDES(SRI),"","!,?1")
"RTN","SROCPT0",10,0)
 Q
"RTN","SROCPT0",11,0)
DISPLAY ; output principal CPT
"RTN","SROCPT0",12,0)
 I $D(Y),Y="" Q
"RTN","SROCPT0",13,0)
 N SRCODE,SRCPT,SRDA,SRDES,SRI,SRK,SRP,SRW,SRX,SRY,SRZ
"RTN","SROCPT0",14,0)
 S Y=$P($$CPT^ICPTCOD(Y),"^",2),SRDA=$S($D(SRTN):SRTN,1:"") Q:SRDA=""
"RTN","SROCPT0",15,0)
 I $D(QPQPQ)!$D(SRDIE) D SSPRIN Q
"RTN","SROCPT0",16,0)
 D DES I '$O(^SRO(136,SRDA,1,0)) Q
"RTN","SROCPT0",17,0)
 S SRCPT="Principal CPT Code: "_SRW D EN^DDIOL(SRCPT,"","!,?6")
"RTN","SROCPT0",18,0)
 S SRX="Modifiers: -"
"RTN","SROCPT0",19,0)
 S SRI=0 F  S SRI=$O(^SRO(136,SRDA,1,SRI)) Q:'SRI  D
"RTN","SROCPT0",20,0)
 .S SRZ=$P(^SRO(136,SRDA,1,SRI,0),"^"),SRY=$$MOD^ICPTMOD(SRZ,"I",$P($G(^SRF(SRDA,0)),"^",9)),SRX=SRX_$P(SRY,"^",2)_" "_$E($P(SRY,"^",3),1,57) D EN^DDIOL(SRX,"","!,?7") S SRX="           -"
"RTN","SROCPT0",21,0)
 W !
"RTN","SROCPT0",22,0)
 Q
"RTN","SROCPT0",23,0)
OTHDISP ; output other procedure CPT
"RTN","SROCPT0",24,0)
 I $D(Y),Y="" Q
"RTN","SROCPT0",25,0)
 N SRCODE,SRCPT,SRDA,SRDES,SRI,SRK,SRP,SRW,SRX,SRY,SRZ
"RTN","SROCPT0",26,0)
 S Y=$P($$CPT^ICPTCOD(Y),"^",2),SRDA(1)=$S($D(SRTN):SRTN,1:""),SRDA=$S($D(DA):DA,1:"") Q:SRDA(1)=""!(SRDA="")
"RTN","SROCPT0",27,0)
 I $D(QPQPQ)!$D(SRDIE) D SSOTH Q
"RTN","SROCPT0",28,0)
 D DES I '$O(^SRO(136,SRDA(1),3,SRDA,1,0)) Q
"RTN","SROCPT0",29,0)
 S SRCPT="Other CPT Code: "_SRW D EN^DDIOL(SRCPT,"","!,?6")
"RTN","SROCPT0",30,0)
 S SRX="Modifiers: -"
"RTN","SROCPT0",31,0)
 S SRI=0 F  S SRI=$O(^SRO(136,SRDA(1),3,SRDA,1,SRI)) Q:'SRI  D
"RTN","SROCPT0",32,0)
 .S SRZ=$P(^SRO(136,SRDA(1),3,SRDA,1,SRI,0),"^"),SRY=$$MOD^ICPTMOD(SRZ,"I",$P($G(^SRF(SRDA(1),0)),"^",9)),SRX=SRX_$P(SRY,"^",2)_" "_$E($P(SRY,"^",3),1,57) D EN^DDIOL(SRX,"","!,?7") S SRX="           -"
"RTN","SROCPT0",33,0)
 Q
"RTN","SROCPT0",34,0)
DES ; get short name and description
"RTN","SROCPT0",35,0)
 N X,Z,SRDAA,SRDD S (SRCODE,SRK)=Y,SRDAA=$S($D(SRTN):SRTN,$D(SRDA(1)):SRDA(1),$D(SRDA):SRDA,1:"")
"RTN","SROCPT0",36,0)
 S SRDD=DT I $G(SRDAA) S SRDD=$E($P(^SRF(SRDAA,0),"^",9),1,7)
"RTN","SROCPT0",37,0)
 S SRY=$$CPT^ICPTCOD(SRCODE,SRDD),SRK=$P(SRY,"^",2),SRW=SRK_"  "_$P(SRY,"^",3)
"RTN","SROCPT0",38,0)
 S SRY=$$CPTD^ICPTCOD(SRCODE,"SRDES",,SRDD),SRK=SRK_" " F SRI=1:1:SRY D  Q:$L(SRK_" "_X)>245  S SRK=SRK_" "_X
"RTN","SROCPT0",39,0)
 .S X=SRDES(SRI) F  S Z=$F(X,"  ") Q:'Z  S X=$E(X,1,Z-2)_$E(X,Z,255)
"RTN","SROCPT0",40,0)
 S Y=SRK
"RTN","SROCPT0",41,0)
 Q
"RTN","SROCPT0",42,0)
ACTIV(SRTN,SRCODE) ; screen for active CPT codes
"RTN","SROCPT0",43,0)
 K ICPTVDT
"RTN","SROCPT0",44,0)
 N SROK,SRSDATE S SROK=1,SRSDATE=DT
"RTN","SROCPT0",45,0)
 I $G(SRTN) S SRSDATE=$E($P(^SRF(SRTN,0),"^",9),1,7)
"RTN","SROCPT0",46,0)
 S SROK=$P($$CPT^ICPTCOD(SRCODE,SRSDATE),"^",7),ICPTVDT=SRSDATE
"RTN","SROCPT0",47,0)
 Q SROK
"RTN","SROCPT0",48,0)
IN ; check CPT input
"RTN","SROCPT0",49,0)
 N SRX,SRCPT K SRCMOD S SRX=X,SRCPT=$P(SRX,"-"),SRCMOD=$P(SRX,"-",2) I SRCMOD="" K SRCMOD
"RTN","SROCPT0",50,0)
 S X=SRCPT
"RTN","SROCPT0",51,0)
 Q
"RTN","SROCPT0",52,0)
DUP ; check for duplicate other procedure CPT
"RTN","SROCPT0",53,0)
 N SRX,SRQ
"RTN","SROCPT0",54,0)
 S (SRQ,SRX)=0 F  S SRX=$O(^SRO(136,SRTN,3,SRX)) Q:'SRX  D  Q:SRQ
"RTN","SROCPT0",55,0)
 .I $D(DA),SRX=DA S SRQ=1 Q
"RTN","SROCPT0",56,0)
 .I $P($G(^SRO(136,SRTN,3,SRX,0)),U)=X D EN^DDIOL("This code has already been selected. Please try again.","","!,?5") K X S SRQ=1 Q
"RTN","SROCPT0",57,0)
 Q
"RTN","SROCPT0",58,0)
SSPRIN ; append CPT modifiers to principal CPT code
"RTN","SROCPT0",59,0)
 N SRCMOD,SRCOMMA,SRCPT,SRI,SRM,X I $O(^SRO(136,SRTN,1,0)) D
"RTN","SROCPT0",60,0)
 .S (SRCOMMA,SRI)=0,SRCMOD="",SRCPT=Y_"-" F  S SRI=$O(^SRO(136,SRTN,1,SRI)) Q:'SRI  D
"RTN","SROCPT0",61,0)
 ..S SRM=$P(^SRO(136,SRTN,1,SRI,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRM,"I"),"^",2)
"RTN","SROCPT0",62,0)
 ..S SRCPT=SRCPT_$S(SRCOMMA:",",1:"")_SRCMOD,SRCOMMA=1
"RTN","SROCPT0",63,0)
 .S Y=SRCPT
"RTN","SROCPT0",64,0)
 Q
"RTN","SROCPT0",65,0)
SSOTH ; append CPT modifiers to other CPT code
"RTN","SROCPT0",66,0)
 N SRCMOD,SRCOMMA,SRCPT,SRI,SRM,X I $O(^SRO(136,SRTN,3,SRDA,1,0)) D
"RTN","SROCPT0",67,0)
 .S (SRCOMMA,SRI)=0,SRCMOD="",SRCPT=Y_"-" F  S SRI=$O(^SRO(136,SRTN,3,SRDA,1,SRI)) Q:'SRI  D
"RTN","SROCPT0",68,0)
 ..S SRM=$P(^SRO(136,SRTN,3,SRDA,1,SRI,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRM,"I"),"^",2)
"RTN","SROCPT0",69,0)
 ..S SRCPT=SRCPT_$S(SRCOMMA:",",1:"")_SRCMOD,SRCOMMA=1
"RTN","SROCPT0",70,0)
 .S Y=SRCPT
"RTN","SROCPT0",71,0)
 Q
"RTN","SRODTH")
0^35^B12013664^B14263110
"RTN","SRODTH",1,0)
SRODTH ;BIR/ADM - UPDATE CASE AS UNRELATED OR RELATED TO DEATH ;01/30/01  10:06 AM
"RTN","SRODTH",2,0)
 ;;3.0; Surgery ;**47,88,100,142**;24 Jun 93
"RTN","SRODTH",3,0)
PAT W @IOF,!,?15,"Update Operations as Unrelated or Related to Death",!!
"RTN","SRODTH",4,0)
 S SRSOUT=0 K DIC S DIC("A")="Select Patient: ",DIC=2,DIC(0)="QEAM" D ^DIC K DIC I Y<0 G END
"RTN","SRODTH",5,0)
 S DFN=+Y D DEM^VADPT S SRDEATH=$P(VADM(6),"^") I 'SRDEATH G NODIE
"RTN","SRODTH",6,0)
 S X1=SRDEATH,X2=-90 D C^%DTC S SRDAY=X,(CNT,SRDT)=0
"RTN","SRODTH",7,0)
 K SRCASE F  S SRDT=$O(^SRF("ADT",DFN,SRDT)) Q:'SRDT  S SRCASE=0 F  S SRCASE=$O(^SRF("ADT",DFN,SRDT,SRCASE)) Q:'SRCASE  D SET
"RTN","SRODTH",8,0)
OUT D HDR I 'CNT W !!,"This patient had no operations in 90 days prior to death.",!! K DIR S DIR(0)="E" D ^DIR K DIR G:$D(DTOUT)!$D(DUOUT) END G PAT
"RTN","SRODTH",9,0)
 W !!,"Operations in 90 Days Prior to Death:",!
"RTN","SRODTH",10,0)
 F NUM=1:1 Q:'$D(SRCASE(NUM))  S SRCASE=SRCASE(NUM) D LIST W !
"RTN","SRODTH",11,0)
SEL ; select operation to update
"RTN","SRODTH",12,0)
 K DIR S DIR(0)="NO^1:"_CNT_":0",DIR("?",1)="Enter the number corresponding to the operation to be updated or",DIR("?")="press RETURN to quit this patient."
"RTN","SRODTH",13,0)
 S DIR("A")="Select Number of Operation to be Updated" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) G END
"RTN","SRODTH",14,0)
 I Y S NUM=Y D RELATED G OUT
"RTN","SRODTH",15,0)
 G PAT
"RTN","SRODTH",16,0)
 Q
"RTN","SRODTH",17,0)
RELATED ; update UNRELATED/RELATED status
"RTN","SRODTH",18,0)
 S SRCASE=SRCASE(NUM) I $$LOCK^SROUTL(SRCASE) D  D UNLOCK^SROUTL(SRCASE)
"RTN","SRODTH",19,0)
 .D HDR W ! D LIST W ! K DA,DIE,DR S DA=SRCASE,DR="903T;904T",DIE=130 D ^DIE K DA,DIE,DR
"RTN","SRODTH",20,0)
 Q
"RTN","SRODTH",21,0)
SET ; set up array of cases in 90 days prior to death
"RTN","SRODTH",22,0)
 S SRSDATE=$P(^SRF(SRCASE,0),"^",9) I SRSDATE<SRDAY!(SRSDATE>SRDEATH) Q
"RTN","SRODTH",23,0)
 I '$P($G(^SRF(SRCASE,.2)),"^",12)!$P($G(^SRF(SRCASE,30)),"^")!($P($G(^SRF(SRCASE,"NON")),"^")="Y")!$P($G(^SRF(SRCASE,37)),"^") Q
"RTN","SRODTH",24,0)
 S CNT=CNT+1,SRCASE(CNT)=SRCASE
"RTN","SRODTH",25,0)
 Q
"RTN","SRODTH",26,0)
LIST ; display list of operations
"RTN","SRODTH",27,0)
 S X=$P($G(^SRF(SRCASE,.4)),"^",7) I X="" S X="U",$P(^SRF(SRCASE,.4),"^",7)=X
"RTN","SRODTH",28,0)
 S SRELATE=$S(X="U":"UNRELATED",1:"RELATED")
"RTN","SRODTH",29,0)
 S SROPER=$P(^SRF(SRCASE,"OP"),"^")
"RTN","SRODTH",30,0)
 S SROPER=SROPER_" - "_SRELATE
"RTN","SRODTH",31,0)
 S X1=SRDEATH,(DATE,X2)=$P(^SRF(SRCASE,0),"^",9),DATE=$E(DATE,4,5)_"/"_$E(DATE,6,7)_"/"_$E(DATE,2,3) D ^%DTC S SRLENGTH=X
"RTN","SRODTH",32,0)
 K SROPS,MM,MMM S:$L(SROPER)<65 SROPS(1)=SROPER I $L(SROPER)>64 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SRODTH",33,0)
 W !,NUM_".",?3,DATE,?15,SROPS(1) I $D(SROPS(2)) W !,?15,SROPS(2) I $D(SROPS(3)) W !,?15,SROPS(3)
"RTN","SRODTH",34,0)
 W !,?15," >>> Died "_SRLENGTH_" day"_$S(SRLENGTH>1:"s",1:"")_" postop. <<<"
"RTN","SRODTH",35,0)
 Q
"RTN","SRODTH",36,0)
LOOP ; break procedures
"RTN","SRODTH",37,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<65  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SRODTH",38,0)
 Q
"RTN","SRODTH",39,0)
HDR ; print heading
"RTN","SRODTH",40,0)
 W @IOF,!,?15,"Update Operations as Unrelated or Related to Death",!!,VADM(1)_"   "_VA("PID") S X=$P($G(VADM(6)),"^") W:X "        * DIED "_$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)_" *"
"RTN","SRODTH",41,0)
 Q
"RTN","SRODTH",42,0)
NODIE D HDR W !!!,"No death is recorded for this patient.",!!! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) G END
"RTN","SRODTH",43,0)
 G PAT
"RTN","SRODTH",44,0)
END I SRSOUT K DIR S DIR(0)="E" D ^DIR
"RTN","SRODTH",45,0)
 D ^SRSKILL W @IOF
"RTN","SRODTH",46,0)
 Q
"RTN","SROMOD0")
0^89^B41364677
"RTN","SROMOD0",1,0)
SROMOD0 ;BIR/ADM - CPT MODIFIER INPUT ;08/01/05
"RTN","SROMOD0",2,0)
 ;;3.0; Surgery ;**142**;24 Jun 93
"RTN","SROMOD0",3,0)
 Q
"RTN","SROMOD0",4,0)
DISPLAY ; display name with modifier
"RTN","SROMOD0",5,0)
 N SRY,SRDA,SRDATE S SRDATE=DT
"RTN","SROMOD0",6,0)
 S SRDA=$S($G(SRTN):SRTN,$D(DA(1)):DA(1),$D(DA):DA,1:"")
"RTN","SROMOD0",7,0)
 I $G(SRDA) S SRDATE=$P($G(^SRF(SRDA,0)),"^",9)
"RTN","SROMOD0",8,0)
 S SRY=$$MOD^ICPTMOD(Y,"I",SRDATE) Q:$P(SRY,"^")=-1
"RTN","SROMOD0",9,0)
 S Y=$P(SRY,"^",2)_"  "_$P(SRY,"^",3)
"RTN","SROMOD0",10,0)
 Q
"RTN","SROMOD0",11,0)
SCR27() ; screen for acceptable CPT code/modifier pair for principal procedure
"RTN","SROMOD0",12,0)
 N SRCODE,SRDA,SRCMOD,SROK,SRSDATE,SRZ D PCHK K SRM
"RTN","SROMOD0",13,0)
 Q SROK
"RTN","SROMOD0",14,0)
PCHK ; return value of modifier if acceptable for principal procedure
"RTN","SROMOD0",15,0)
 N SRSDATE S SRSDATE=DT
"RTN","SROMOD0",16,0)
 S SROK=0,SRCODE="",SRDA=$S($G(SRTN):SRTN,$D(DA(1)):DA(1),$D(DA):DA,1:""),SRM=$S($D(SRM):SRM,1:+Y)
"RTN","SROMOD0",17,0)
 I SRDA S SRSDATE=$P(^SRF(SRDA,0),"^",9),SRCODE=$P($G(^SRO(136,SRDA,0)),"^",2)
"RTN","SROMOD0",18,0)
 I 'SRCODE Q
"RTN","SROMOD0",19,0)
 S SRZ=$P($$MODP^ICPTMOD(SRCODE,SRM,"I",SRSDATE),"^") I SRZ>0 S SROK=SRZ
"RTN","SROMOD0",20,0)
 Q
"RTN","SROMOD0",21,0)
OTH() ; screen for acceptable CPT code/modifier pair for other procedure
"RTN","SROMOD0",22,0)
 N SRCODE,SRDA,SRCMOD,SROK,SROTH,SRSDATE,SRZ D OCHK K SRM
"RTN","SROMOD0",23,0)
 Q SROK
"RTN","SROMOD0",24,0)
OCHK ; return value of modifier if acceptable for other procedure
"RTN","SROMOD0",25,0)
 N SRSDATE S SRSDATE=DT
"RTN","SROMOD0",26,0)
 S SROK=0,SRCODE="",SRDA=$S($G(SRTN):SRTN,$D(DA(2)):DA(2),$D(DA(1)):DA(1),$D(D0):D0,1:""),SROTH=$S($D(DA):DA,$D(D1):D1,1:""),SRM=$S($D(SRM):SRM,1:+Y)
"RTN","SROMOD0",27,0)
 I SRDA&SROTH S SRSDATE=$P(^SRF(SRDA,0),"^",9),SRCODE=$P($G(^SRO(136,SRDA,3,SROTH,0)),"^")
"RTN","SROMOD0",28,0)
 I 'SRCODE Q
"RTN","SROMOD0",29,0)
 S SRZ=$P($$MODP^ICPTMOD(SRCODE,SRM,"I",SRSDATE),"^") I SRZ>0 S SROK=SRZ
"RTN","SROMOD0",30,0)
 Q
"RTN","SROMOD0",31,0)
PRIN ; enter CPT modifiers for principal CPT code
"RTN","SROMOD0",32,0)
 Q:$E($G(IOST),1,2)'="C-"!($G(DIK)'="")
"RTN","SROMOD0",33,0)
 N SRCODE,SRDA,SRDEF,SRIEN,SRJ,SRQ,SRSDATE,SRSEL,SRSOUT,SRX,SRY,Z
"RTN","SROMOD0",34,0)
 S (SRQ,SRSOUT)=0,SRDA=DA,SRCODE=$P(^SRO(136,SRDA,0),"^",2),SRIEN=$O(^SRO(136,SRDA,1,"AAA"),-1)
"RTN","SROMOD0",35,0)
 I SRIEN S SRX=$P(^SRO(136,SRDA,1,SRIEN,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRX,"I"),"^",2)
"RTN","SROMOD0",36,0)
 K DIR F  D  K SRM,SRCMOD Q:SRSOUT  S SRQ=0
"RTN","SROMOD0",37,0)
 .S DIR("A")=" Modifier: ",DIR(0)="136.01,.01AO" S:$G(SRCMOD)'="" DIR("B")=SRCMOD D:$O(^SRO(136,SRDA,1,0)) QUES
"RTN","SROMOD0",38,0)
 .D ^DIR K DIR S DA=SRDA I $D(DTOUT)!$D(DUOUT)!(X="") S SRSOUT=1 Q
"RTN","SROMOD0",39,0)
 .I +Y S SRJ=0 F  S SRJ=$O(^SRO(136,SRDA,1,SRJ)) Q:'SRJ  I $P(^SRO(136,SRDA,1,SRJ,0),"^")=+Y N DIR D  Q
"RTN","SROMOD0",40,0)
 ..S SRSEL=Y(0),DIR(0)="136.01,.01AO",DIR("A")="   Modifier: ",DIR("B")=$P(Y(0),"^")
"RTN","SROMOD0",41,0)
 ..D ^DIR S DA=SRDA I $D(DTOUT)!$D(DUOUT)!(X="") S SRSOUT=1 Q
"RTN","SROMOD0",42,0)
 ..I +Y S SRK=0 F  S SRK=$O(^SRO(136,SRDA,1,SRK)) Q:'SRK  I $P(^SRO(136,SRDA,1,SRK,0),"^")=+Y S SRQ=1 Q
"RTN","SROMOD0",43,0)
 ..Q:SRQ  I +Y S $P(^SRO(136,SRDA,1,SRJ,0),"^")=+Y,SRQ=1 Q
"RTN","SROMOD0",44,0)
 ..I X="@" S SRY(136.01,SRJ_","_SRDA_",",.01)="@" D FILE^DIE("","SRY"),EN^DDIOL(" ... Modifier deleted","","?20") S SRQ=1
"RTN","SROMOD0",45,0)
 .Q:SRQ!SRSOUT
"RTN","SROMOD0",46,0)
 .I +Y S SRY(136.01,"+1,"_DA_",",.01)=+Y D UPDATE^DIE("","SRY") Q
"RTN","SROMOD0",47,0)
 .I X="@",$D(SRCMOD) S SRY(136.01,SRIEN_","_SRDA_",",.01)="@" D FILE^DIE("","SRY"),EN^DDIOL(" ... Modifier deleted","","?20")
"RTN","SROMOD0",48,0)
 Q
"RTN","SROMOD0",49,0)
OPROC ; enter CPT modifiers for other CPT code
"RTN","SROMOD0",50,0)
 N SRCODE,SRDA,SRDEF,SRIEN,SRJ,SRQ,SRSDATE,SRSEL,SRSOUT,SRX,SRY,Z S (SRQ,SRSOUT)=0,SRCODE=X N X I $D(SRCMOD) D OHYPH
"RTN","SROMOD0",51,0)
 S SRDA=DA,SRDA(1)=DA(1),SRIEN=$O(^SRO(136,SRDA(1),3,SRDA,1,"A"),-1) I SRIEN S SRX=$P(^SRO(136,SRDA(1),3,SRDA,1,SRIEN,0),"^"),SRCMOD=$P($$MOD^ICPTMOD(SRX,"I"),"^",2)
"RTN","SROMOD0",52,0)
 K DIR F  D  K SRM,SRCMOD Q:SRSOUT  S SRQ=0
"RTN","SROMOD0",53,0)
 .S DIR("A")=" Modifier: ",DIR(0)="136.31,.01AO" S:$G(SRCMOD)'="" DIR("B")=SRCMOD D:$O(^SRO(136,SRDA(1),3,SRDA,1,0)) QUES1
"RTN","SROMOD0",54,0)
 .D ^DIR K DIR S DA=SRDA,DA(1)=SRDA(1) I $D(DTOUT)!$D(DUOUT)!(X="") S SRSOUT=1 Q
"RTN","SROMOD0",55,0)
 .I +Y S SRJ=0 F  S SRJ=$O(^SRO(136,SRDA(1),3,SRDA,1,SRJ)) Q:'SRJ  I $P(^SRO(136,SRDA(1),3,SRDA,1,SRJ,0),"^")=+Y N DIR D  Q
"RTN","SROMOD0",56,0)
 ..S SRSEL=Y(0),DIR(0)="136.31,.01AO",DIR("A")="   Modifier: ",DIR("B")=$P(Y(0),"^")
"RTN","SROMOD0",57,0)
 ..D ^DIR S DA=SRDA I $D(DTOUT)!$D(DUOUT)!(X="") S SRSOUT=1 Q
"RTN","SROMOD0",58,0)
 ..I +Y S SRK=0 F  S SRK=$O(^SRO(136,SRDA(1),3,SRDA,1,SRK)) Q:'SRK  I $P(^SRO(136,SRDA(1),3,SRDA,1,SRK,0),"^")=+Y S Y="" Q
"RTN","SROMOD0",59,0)
 ..I X="@" S SRY(136.31,SRJ_","_SRDA_","_SRDA(1)_",",.01)="@" D FILE^DIE("","SRY"),EN^DDIOL(" ... Modifier deleted","","?20") S SRQ=1
"RTN","SROMOD0",60,0)
 .Q:SRQ!SRSOUT
"RTN","SROMOD0",61,0)
 .I +Y S SRY(136.31,"+1,"_DA_","_DA(1)_",",.01)=+Y D UPDATE^DIE("","SRY") Q
"RTN","SROMOD0",62,0)
 .I X="@",$D(SRCMOD) S SRY(136.31,SRIEN_","_SRDA_",",SRDA(1)_",",.01)="@" D FILE^DIE("","SRY"),EN^DDIOL(" ... Modifier deleted","","?20")
"RTN","SROMOD0",63,0)
 Q
"RTN","SROMOD0",64,0)
KOMOD ; delete other CPT modifiers when CPT code is edited
"RTN","SROMOD0",65,0)
 I $D(SRDIRED) S SRDIRED=1 Q:'$D(DA)
"RTN","SROMOD0",66,0)
 N SRCODE,SRDA,SRJ,SRY S SRDA=$G(DA),SRDA(1)=$G(DA(1)) Q:'SRDA!'SRDA(1)
"RTN","SROMOD0",67,0)
 S SRCODE=X,SRJ=0 F  S SRJ=$O(^SRO(136,SRDA(1),3,SRDA,1,SRJ)) Q:'SRJ  D
"RTN","SROMOD0",68,0)
 .S SRY(136.31,SRJ_","_SRDA_","_SRDA(1)_",",.01)="@" D FILE^DIE("","SRY")
"RTN","SROMOD0",69,0)
 S X=SRCODE
"RTN","SROMOD0",70,0)
 Q
"RTN","SROMOD0",71,0)
PHYPH ; called from input transform to process hyphenated modifier list
"RTN","SROMOD0",72,0)
 Q:$E($G(IOST),1,2)'="C-"!($G(DIK)'="")
"RTN","SROMOD0",73,0)
 N SRSDATE,SRDA,SRDUP,SRJ,SRLIST,SRM,SRN,SROK,SRY,SRZ S SRCODE=X D KPMOD S X=SRCODE Q:'$D(SRCMOD)
"RTN","SROMOD0",74,0)
 S SRLIST=SRCMOD,SRSDATE=DT,SRDA=$S($G(SRTN):SRTN,$D(DA(1)):DA(1),$D(DA):DA,1:"")
"RTN","SROMOD0",75,0)
 S:SRDA SRSDATE=$P(^SRF(SRDA,0),"^",9)
"RTN","SROMOD0",76,0)
 F SRN=1:1 S SRCMOD=$P(SRLIST,",",SRN) Q:SRCMOD=""  D
"RTN","SROMOD0",77,0)
 .S (SRDUP,SROK)=0
"RTN","SROMOD0",78,0)
 .S SRM=$P($$MOD^ICPTMOD(SRCMOD),"^") K:SRM<0 SRM I $D(SRM) D  K SRM
"RTN","SROMOD0",79,0)
 ..S SROK=0,SRM=$S($D(SRM):SRM,1:+Y)
"RTN","SROMOD0",80,0)
 ..S SRZ=$P($$MODP^ICPTMOD(SRCODE,SRM,"I",SRSDATE),"^") I SRZ>0 S SROK=SRZ
"RTN","SROMOD0",81,0)
 .I 'SROK&($E($G(IOST),1,2)="C-") D EN^DDIOL("CPT Modifier '"_SRCMOD_"' is not acceptable with this CPT code.","","!") K SRCMOD Q
"RTN","SROMOD0",82,0)
 .S SRJ=0 F  S SRJ=$O(^SRO(136,SRDA,1,SRJ)) Q:'SRJ  I $P(^SRO(136,SRDA,1,SRJ,0),"^")=SROK S SRDUP=1 Q
"RTN","SROMOD0",83,0)
 .I 'SRDUP S SRY(136.01,"+1,"_DA_",",.01)=SROK D UPDATE^DIE("","SRY")
"RTN","SROMOD0",84,0)
 S X=SRCODE
"RTN","SROMOD0",85,0)
 Q
"RTN","SROMOD0",86,0)
KPMOD ; delete principal CPT modifiers when CPT code is edited
"RTN","SROMOD0",87,0)
 N SRDA,SRJ,SRY
"RTN","SROMOD0",88,0)
 S SRDA=DA,SRJ=0 F  S SRJ=$O(^SRO(136,SRDA,1,SRJ)) Q:'SRJ  D
"RTN","SROMOD0",89,0)
 .S SRY(136.01,SRJ_","_SRDA_",",.01)="@" D FILE^DIE("","SRY")
"RTN","SROMOD0",90,0)
 Q
"RTN","SROMOD0",91,0)
OHYPH ; input CPT hyphenated modifier for other procedure
"RTN","SROMOD0",92,0)
 N SRCODE,SRDA,SRDUP,SRLIST,SRN,SROK,SROTH,SRY S SRLIST=SRCMOD
"RTN","SROMOD0",93,0)
 F SRN=1:1 S SRCMOD=$P(SRLIST,",",SRN) Q:SRCMOD=""  D
"RTN","SROMOD0",94,0)
 .S (SRDUP,SROK)=0
"RTN","SROMOD0",95,0)
 .S SRM=$P($$MOD^ICPTMOD(SRCMOD),"^") K:SRM<0 SRM I $D(SRM) D OCHK K SRM
"RTN","SROMOD0",96,0)
 .I 'SROK D EN^DDIOL("CPT Modifier '"_SRCMOD_"' is not acceptable with this CPT code.","","!") K SRCMOD Q
"RTN","SROMOD0",97,0)
 .S SRJ=0 F  S SRJ=$O(^SRO(136,SRDA,3,SROTH,1,SRJ)) Q:'SRJ  I $P(^SRO(136,SRDA,3,SROTH,1,SRJ,0),"^")=SROK S SRDUP=1 Q
"RTN","SROMOD0",98,0)
 .I 'SRDUP S SRY(136.31,"+1,"_DA_","_DA(1)_",",.01)=SROK D UPDATE^DIE("","SRY")
"RTN","SROMOD0",99,0)
 Q
"RTN","SROMOD0",100,0)
QUES N SRI,SRMD,SRX,SRY,SRZ S DIR("?",1)=" Answer with PRIN PROCEDURE CPT MODIFIER",DIR("?",2)="Choose from:"
"RTN","SROMOD0",101,0)
 S SRI=0,SRCT=3 F  S SRI=$O(^SRO(136,SRDA,1,SRI)) Q:'SRI  S SRMD=$P(^SRO(136,SRDA,1,SRI,0),"^") D
"RTN","SROMOD0",102,0)
 .S SRX=$$MOD^ICPTMOD(SRMD,"I",$P($G(^SRF(SRDA,0)),"^",9)),SRY=$P(SRX,"^",2),SRZ=$P(SRX,"^",3)
"RTN","SROMOD0",103,0)
 .S DIR("?",SRCT)="   "_SRY_"   "_SRZ,SRCT=SRCT+1
"RTN","SROMOD0",104,0)
 S DIR("?",SRCT)="",DIR("?")="     You may enter a new PRIN PROCEDURE CPT MODIFIER, if you wish."
"RTN","SROMOD0",105,0)
 Q
"RTN","SROMOD0",106,0)
QUES1 N SRI,SRMD,SRX,SRY,SRZ S DIR("?",1)=" Answer with OTHER PROCEDURE CPT MODIFIER",DIR("?",2)="Choose from:"
"RTN","SROMOD0",107,0)
 S SRI=0,SRCT=3 F  S SRI=$O(^SRO(136,SRDA(1),3,SRDA,1,SRI)) Q:'SRI  S SRMD=$P(^SRO(136,SRDA(1),3,SRDA,1,SRI,0),"^") D
"RTN","SROMOD0",108,0)
 .S SRX=$$MOD^ICPTMOD(SRMD,"I",$P($G(^SRF(SRDA,0)),"^",9)),SRY=$P(SRX,"^",2),SRZ=$P(SRX,"^",3)
"RTN","SROMOD0",109,0)
 .S DIR("?",SRCT)="   "_SRY_"   "_SRZ,SRCT=SRCT+1
"RTN","SROMOD0",110,0)
 S DIR("?",SRCT)="",DIR("?")="     You may enter a new OTHER PROCEDURE CPT MODIFIER, if you wish."
"RTN","SROMOD0",111,0)
 Q
"RTN","SROMOD0",112,0)
  
"RTN","SRONAN1")
0^36^B9950439^B9876666
"RTN","SRONAN1",1,0)
SRONAN1 ;BIR/MAM - ANNUAL REPORT NON-O.R. PROCEDURES ;12/16/98  11:46 AM
"RTN","SRONAN1",2,0)
 ;;3.0; Surgery ;**50,88,127,142**;24 Jun 93
"RTN","SRONAN1",3,0)
 ;
"RTN","SRONAN1",4,0)
 ; Reference to ^ECC(723 supported by DBIA #205
"RTN","SRONAN1",5,0)
 ;
"RTN","SRONAN1",6,0)
 K ^TMP("SR",$J) S (SRHDR,SRSUMM,SRSOUT)=0,^TMP("SR",$J)=0
"RTN","SRONAN1",7,0)
 F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)  S SROP=0 F  S SROP=$O(^SRF("AC",SRSD,SROP)) Q:'SROP  I $P($G(^SRF(SROP,"NON")),"^")="Y",$D(^SRF(SROP,0)),$$DIV^SROUTL0(SROP) D SET
"RTN","SRONAN1",8,0)
 S SRSS=0 F  S SRSS=$O(^TMP("SR",$J,SRSS)) Q:SRSS=""!SRSOUT  D HDR Q:SRSOUT  S SRCPT=0 F  S SRCPT=$O(^TMP("SR",$J,SRSS,SRCPT)) Q:SRCPT=""!SRSOUT  D PRINT
"RTN","SRONAN1",9,0)
 Q:SRSOUT  S SRSUMM=1,SRSS="" D HDR Q:SRSOUT
"RTN","SRONAN1",10,0)
 S SRSS=0 F  S SRSS=$O(^TMP("SR",$J,SRSS)) Q:SRSS=""!(SRSOUT)  D SUM
"RTN","SRONAN1",11,0)
 W:'SRSOUT !!,?9,"TOTAL NON-O.R. PROCEDURES FOR "_SRSITE("SITE")_": "_^TMP("SR",$J)
"RTN","SRONAN1",12,0)
 Q
"RTN","SRONAN1",13,0)
SET ; set local variables
"RTN","SRONAN1",14,0)
 I $P($G(^SRF(SROP,30)),"^") Q
"RTN","SRONAN1",15,0)
 S SRSS=$P(^SRF(SROP,"NON"),"^",8),SRCPT=$P($G(^SRO(136,SROP,0)),"^",2) I 'SRCPT Q
"RTN","SRONAN1",16,0)
 S SRSPEC=$S(SRSS:$P(^ECC(723,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED")
"RTN","SRONAN1",17,0)
 D CPT,UTIL S SROTH=0 F  S SROTH=$O(^SRO(136,SROP,3,SROTH)) Q:'SROTH  S SRCPT=$P($G(^SRO(136,SROP,3,SROTH,0)),"^") I SRCPT D CPT,UTIL
"RTN","SRONAN1",18,0)
 Q
"RTN","SRONAN1",19,0)
UTIL ; set ^TMP("SR",$J
"RTN","SRONAN1",20,0)
 S ^TMP("SR",$J)=^TMP("SR",$J)+1
"RTN","SRONAN1",21,0)
 I '$D(^TMP("SR",$J,SRSPEC)) S ^TMP("SR",$J,SRSPEC)=0
"RTN","SRONAN1",22,0)
 S ^TMP("SR",$J,SRSPEC)=^TMP("SR",$J,SRSPEC)+1
"RTN","SRONAN1",23,0)
 I '$D(^TMP("SR",$J,SRSPEC,SRCPT)) S ^TMP("SR",$J,SRSPEC,SRCPT)=1 Q
"RTN","SRONAN1",24,0)
 S ^TMP("SR",$J,SRSPEC,SRCPT)=^TMP("SR",$J,SRSPEC,SRCPT)+1
"RTN","SRONAN1",25,0)
 Q
"RTN","SRONAN1",26,0)
CPT ; get procedure name and code
"RTN","SRONAN1",27,0)
 S X=$$CPT^ICPTCOD(SRCPT,$P(SRED,".")),SROPER=$P(X,"^",3),SRCPT=$P(X,"^",2)_"   "_SROPER
"RTN","SRONAN1",28,0)
 Q
"RTN","SRONAN1",29,0)
PRINT ; print CPT info
"RTN","SRONAN1",30,0)
 I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SRONAN1",31,0)
 W !,SRCPT,?66,^TMP("SR",$J,SRSS,SRCPT)
"RTN","SRONAN1",32,0)
 Q
"RTN","SRONAN1",33,0)
SUM ; print summary
"RTN","SRONAN1",34,0)
 I $Y+5>IOSL D HDR Q:SRSOUT
"RTN","SRONAN1",35,0)
 W !,SRSS,?42,"TOTAL NON-O.R. PROCEDURES: ",?67,^TMP("SR",$J,SRSS)
"RTN","SRONAN1",36,0)
 Q
"RTN","SRONAN1",37,0)
HDR1 ; print heading to screen
"RTN","SRONAN1",38,0)
 I SRHDR W !!!!,"Press RETURN to continue, or '^' to quit:  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SRONAN1",39,0)
 W @IOF,!,?22,"ANNUAL REPORT OF NON-O.R. PROCEDURES" I SRSUMM W !,?27,"SUMMARY OF ALL SPECIALTIES"
"RTN","SRONAN1",40,0)
 W !,?(80-$L(SRFRTO)\2),SRFRTO,! F LINE=1:1:80 W "="
"RTN","SRONAN1",41,0)
 W:'SRSUMM&(SRSS'="") !!,?(80-$L(SRSS)\2),SRSS,! S SRHDR=1
"RTN","SRONAN1",42,0)
 Q
"RTN","SRONAN1",43,0)
HDR ; print heading
"RTN","SRONAN1",44,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SRONAN1",45,0)
 I $E(IOST)'="P" D HDR1 Q
"RTN","SRONAN1",46,0)
 W:$Y @IOF W !,?(80-$L(SRINST)\2),SRINST,?65,"REVIEWED BY:",!,?32,"SURGICAL SERVICE",!,?22,"ANNUAL REPORT OF NON-O.R. PROCEDURES",?65,"DATE REVIEWED:"
"RTN","SRONAN1",47,0)
 I SRSUMM W !,?27,"SUMMARY OF ALL SPECIALTIES"
"RTN","SRONAN1",48,0)
 W !,?(80-$L(SRFRTO)\2),SRFRTO I 'SRSUMM W !!,"CPT - PROCEDURE",?30,"SPECIALTY",?65,"TOTAL"
"RTN","SRONAN1",49,0)
 W ! F LINE=1:1:80 W "="
"RTN","SRONAN1",50,0)
 W:'SRSUMM&(SRSS'="") !!,?(80-$L(SRSS)\2),SRSS,! S SRHDR=1
"RTN","SRONAN1",51,0)
 Q
"RTN","SRONITE")
0^77^B3398132^B3541445
"RTN","SRONITE",1,0)
SRONITE ;BIR/MAM - NIGHTLY BACKGROUND TASK ;12/16/98  2:09 PM
"RTN","SRONITE",2,0)
 ;;3.0; Surgery ;**47,58,62,41,86,142**;24 Jun 93
"RTN","SRONITE",3,0)
 F SRI=1:1 S SRX=$P($T(TASK+SRI),";;",2) Q:SRX=""  S SRRTN=$P(SRX,";"),SRDESC=$P(SRX,";",2) S ZTDESC=SRDESC,ZTRTN="JOB^SRONITE",ZTIO="",ZTDTH=$H,ZTSAVE("SRRTN")="" D ^%ZTLOAD
"RTN","SRONITE",4,0)
 D EN^SROA30
"RTN","SRONITE",5,0)
 Q
"RTN","SRONITE",6,0)
JOB D @SRRTN S ZTREQ="@"
"RTN","SRONITE",7,0)
 Q
"RTN","SRONITE",8,0)
TRANS ; entry to queue risk assessment transmissions manually
"RTN","SRONITE",9,0)
 W !!,"Transmit Surgery Risk Assessments",!
"RTN","SRONITE",10,0)
 S ZTDESC="Transmit Surgery Risk Assessments",SRRTN="^SROATMIT",ZTRTN="JOB^SRONITE",ZTIO="",ZTSAVE("SRRTN")="" D ^%ZTLOAD
"RTN","SRONITE",11,0)
 I $D(ZTSK) W !!,"Queued as task #"_ZTSK
"RTN","SRONITE",12,0)
 D PRESS,^SRSKILL K SRRTN W @IOF
"RTN","SRONITE",13,0)
 Q
"RTN","SRONITE",14,0)
PRESS W ! K DIR S DIR("A")="Press RETURN to continue ",DIR(0)="FOA" D ^DIR K DIR
"RTN","SRONITE",15,0)
 Q
"RTN","SRONITE",16,0)
TASK ;    
"RTN","SRONITE",17,0)
 ;;^SRSCRAP;Surgery Files Cleanup
"RTN","SRONITE",18,0)
 ;;^SROUTUP;Update Surgery Utilization File
"RTN","SRONITE",19,0)
 ;;LOCK^SROLOCK;Lock Surgery Cases
"RTN","SRONITE",20,0)
 ;;TASK^SRSAVG;Store Operation Times
"RTN","SRONITE",21,0)
 ;;^SROATMIT;Transmit Surgery Risk Assessments
"RTN","SRONITE",22,0)
 ;;TASK^SROAWL;Surgery Workload Report
"RTN","SRONITE",23,0)
 ;;NIGHT^SROQT;Surgery Quarterly Report
"RTN","SRONITE",24,0)
 ;;^SRHLXTMP;Surgery Interface Purge
"RTN","SRONOP1")
0^95^B16584848^B15550721
"RTN","SRONOP1",1,0)
SRONOP1 ;BIR/MAM - NON-O.R. PROCEDURES ;06/15/05
"RTN","SRONOP1",2,0)
 ;;3.0; Surgery ;**44,56,58,48,67,70,88,100,142**;24 Jun 93
"RTN","SRONOP1",3,0)
 S X=$P($G(VADM(6)),"^") I X D  I SRSOUT D ^SRSKILL G ^SRONOP
"RTN","SRONOP1",4,0)
 .S SRDEATH=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3) W @IOF,!,?1,VADM(1)_"   "_VA("PID")_"        * Died "_SRDEATH_" *"
"RTN","SRONOP1",5,0)
 .W !!,$C(7) K DIR S DIR("A",1)=">>> The patient you have selected died on "_SRDEATH_"."
"RTN","SRONOP1",6,0)
 .S DIR("A")="    Are you sure this is the correct patient ? ",DIR("B")="NO",DIR(0)="YA" D ^DIR K DIR
"RTN","SRONOP1",7,0)
 .I 'Y!$D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SRONOP1",8,0)
 W @IOF,!,"Entering a new non-O.R. procedure for "_SRNM_".",!!
"RTN","SRONOP1",9,0)
OP ; principal procedure
"RTN","SRONOP1",10,0)
 W ! K DIR S DIR(0)="130,26A",DIR("A")="Enter the Procedure: " D ^DIR K DIR I $D(DTOUT)!(X="^") S SRSOUT=1 G END
"RTN","SRONOP1",11,0)
 S SROPER=Y
"RTN","SRONOP1",12,0)
DATE W ! K %DT S %DT="AEX",%DT("A")="Select the Date of the Procedure: " D ^%DT I X="" W !!,"The Date of the Procedure MUST be entered." G DATE
"RTN","SRONOP1",13,0)
 I Y<0!$D(DTOUT) S SRSOUT=1 G END
"RTN","SRONOP1",14,0)
 S SRSDATE=+Y
"RTN","SRONOP1",15,0)
DOC W ! K DIR S DIR("A")="Provider",DIR(0)="130,123" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SRONOP1",16,0)
 S SRSDOC=+Y
"RTN","SRONOP1",17,0)
SPEC W ! K DIR S DIR("A")="Medical Specialty",DIR(0)="130,125" D ^DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SRONOP1",18,0)
 S SRSPEC=+Y
"RTN","SRONOP1",19,0)
SUMM ; dictated summary expected?
"RTN","SRONOP1",20,0)
 N SREXPT W ! K DIR S DIR("A")="Will a summary of this procedure be dictated? (Y/N)"
"RTN","SRONOP1",21,0)
 S DIR("?",1)="This field indicates if the provider will dictate a summary of this",DIR("?",2)="procedure to be electronically signed. Enter YES if a dictated summary"
"RTN","SRONOP1",22,0)
 S DIR("?")="is expected. Enter NO or leave blank if no summary is expected.",DIR(0)="Y" D ^DIR K DIR
"RTN","SRONOP1",23,0)
 I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SRONOP1",24,0)
 S SREXPT=Y
"RTN","SRONOP1",25,0)
 K DIC,DO,DA,DD,DINUM,SRTN S X=DFN,DIC="^SRF(",DIC(0)="L",DLAYGO=130 D FILE^DICN K DD,DO,DIC,DLAYGO S SRTN=+Y
"RTN","SRONOP1",26,0)
 N SRLCK S SRLCK=$$LOCK^SROUTL(SRTN) I 'SRLCK S Q3("VIEW")=""
"RTN","SRONOP1",27,0)
 K DR S DIE=130,DR="120///"_SRSDATE_";26///"_SROPER_";118///Y;123////"_SRSDOC_";125////"_SRSPEC_";1004////"_SREXPT,DA=SRTN D ^DIE K DR,DA,DIE S ^SRF(SRTN,8)=SRSITE("DIV")
"RTN","SRONOP1",28,0)
 D RT S SRSOUT=1,SRN=$E(SRNM,1,20),Q3(1)="** NON-O.R. PROCEDURE **  CASE #"_SRTN_"  "_SRN_" "
"RTN","SRONOP1",29,0)
 S SRDTIME=DTIME,DTIME=3600,ST="NON-O.R. PROCEDURE",DIE=130,DR="[SRNON-OR]",DA=SRTN D ^SRCUSS S DTIME=SRDTIME D ^SROPCE1 S SRSOUT=0
"RTN","SRONOP1",30,0)
 S SRSOP=SROPER,SRL=$P(^SRF(SRTN,"NON"),"^",2) S ORL=$S(SRL:SRL_";SC(",1:"") D ^SROERR
"RTN","SRONOP1",31,0)
 D ^SRSKILL I $G(SRLCK) D UNLOCK^SROUTL(SRTN)
"RTN","SRONOP1",32,0)
 Q
"RTN","SRONOP1",33,0)
END I SRSOUT W !!,"No action taken.",!!,"Press RETURN to continue  " R X:DTIME
"RTN","SRONOP1",34,0)
 D ^SRSKILL K SRTN W @IOF
"RTN","SRONOP1",35,0)
 Q
"RTN","SRONOP1",36,0)
RT ; start RT logging
"RTN","SRONOP1",37,0)
 I $D(XRTL) S ZRTN="SRONOP1" D T0^%ZOSV
"RTN","SRONOP1",38,0)
 Q
"RTN","SRONOP1",39,0)
DEL ; delete procedure
"RTN","SRONOP1",40,0)
 W !!,"Are you sure that you want to remove this procedure from your ",!,"records ?  NO// " R X:DTIME I '$T!(X="^") W !!,"No action taken..." Q
"RTN","SRONOP1",41,0)
 S X=$E(X) S:X="" X="N" I "YyNn"'[X W !!,"Enter RETURN or 'NO' if this procedure should remain on file.  Enter 'YES'",!,"to delete this procedure."
"RTN","SRONOP1",42,0)
 I "Nn"[X W !!,"No action taken." Q
"RTN","SRONOP1",43,0)
 I $P($G(^SRF(SRTN,"TIU")),"^",3) D EN^DDIOL("This case can't be deleted, there is a Procedure Report (Non-O.R.) associated with it.",,"!!,?2,$C(7)") Q
"RTN","SRONOP1",44,0)
 W !!,"Deleting procedure..."
"RTN","SRONOP1",45,0)
 S SRX=$P($G(^SRF(SRTN,0)),"^",15) I SRX S SRVSIT=SRX D DEL^SROPCEP ; delete visit
"RTN","SRONOP1",46,0)
 I $D(^SRO(136,SRTN,0)) S DA=SRTN,DIK="^SRO(136," D ^DIK K DA,DIK ; remove entry in file 136
"RTN","SRONOP1",47,0)
 D DEL^SROERR S DA=SRTN,DIK="^SRF(" D ^DIK
"RTN","SRONOP1",48,0)
 Q
"RTN","SRONP0")
0^37^B6747040^B13015079
"RTN","SRONP0",1,0)
SRONP0 ;BIR/ADM - PROCEDURE REPORT (NON-OR) ;10 Mar 2005  10:39 AM
"RTN","SRONP0",2,0)
 ;;3.0; Surgery ;**132,142**;24 Jun 93
"RTN","SRONP0",3,0)
 D TIMES
"RTN","SRONP0",4,0)
 D PRIN I $O(^SRF(SRTN,13,0)) D OTHER
"RTN","SRONP0",5,0)
 D ^SRONP1
"RTN","SRONP0",6,0)
 Q
"RTN","SRONP0",7,0)
N(SRL) N SRNM I $L(Y)>SRL S SRNM=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=SRNM
"RTN","SRONP0",8,0)
 Q
"RTN","SRONP0",9,0)
TIMES ; anesthesia start and end times, procedure start and end times
"RTN","SRONP0",10,0)
 N AB,AE,OB,OE D LINE(1)
"RTN","SRONP0",11,0)
 S AB="N/A",Y=$P(SR(.2),"^") I Y D D^DIQ S AB=$P(Y,"@")_"  "_$P(Y,"@",2)
"RTN","SRONP0",12,0)
 S AE="N/A",Y=$P(SR(.2),"^",4) I Y D D^DIQ S AE=$P(Y,"@")_"  "_$P(Y,"@",2)
"RTN","SRONP0",13,0)
 I AB="N/A",AE="N/A" G PRTM
"RTN","SRONP0",14,0)
 D LINE(1) S @SRG@(SRI)="Anes Begin:  "_AB S @SRG@(SRI)=@SRG@(SRI)_$$SPACE(40)_"Anes End:  "_AE
"RTN","SRONP0",15,0)
PRTM S Y=$P(SR("NON"),"^",4) I Y D D^DIQ S OB=$P(Y,"@")_"  "_$P(Y,"@",2)
"RTN","SRONP0",16,0)
 D LINE(1) S @SRG@(SRI)="Proc Begin:  "_$S($D(OB):OB,1:"NOT ENTERED")
"RTN","SRONP0",17,0)
 S Y=$P(SR("NON"),"^",5) I Y D D^DIQ S OE=$P(Y,"@")_"  "_$P(Y,"@",2)
"RTN","SRONP0",18,0)
 S @SRG@(SRI)=@SRG@(SRI)_$$SPACE(40)_"Proc End:  "_$S($D(OE):OE,1:"NOT ENTERED")
"RTN","SRONP0",19,0)
 Q
"RTN","SRONP0",20,0)
PRIN ; principal procedure information
"RTN","SRONP0",21,0)
 N CNT,I,LOOP,M,MM,MMM,SRJ,SROPER,SROPS,SRX,SRY,SRZ,X,Z
"RTN","SRONP0",22,0)
 D LINE(2) S @SRG@(SRI)="Procedure(s) Performed:"
"RTN","SRONP0",23,0)
PRIN2 S SROPER=$P(^SRF(SRTN,"OP"),"^")
"RTN","SRONP0",24,0)
 S SROPER="Principal: "_SROPER
"RTN","SRONP0",25,0)
 S:$L(SROPER)<74 SROPS(1)=SROPER I $L(SROPER)>73 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SRONP0",26,0)
 F I=1:1 Q:'$D(SROPS(I))  D LINE(1) S @SRG@(SRI)=$S(I=1:"  ",1:"    ")_SROPS(I)
"RTN","SRONP0",27,0)
 Q
"RTN","SRONP0",28,0)
LOOP ; break procedure if greater than 74 characters
"RTN","SRONP0",29,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<74  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SRONP0",30,0)
 Q
"RTN","SRONP0",31,0)
OTHER ; other procedures
"RTN","SRONP0",32,0)
 N CNT,OTH,OTHER,SRJ,SRX,SRY,SRZ,Z
"RTN","SRONP0",33,0)
 D LINE(1) S (OTH,CNT)=0 F  S OTH=$O(^SRF(SRTN,13,OTH)) Q:'OTH  S CNT=CNT+1 D OTH
"RTN","SRONP0",34,0)
 Q
"RTN","SRONP0",35,0)
OTH S OTHER=$P(^SRF(SRTN,13,OTH,0),"^")
"RTN","SRONP0",36,0)
 S @SRG@(SRI)="  Other: "_OTHER
"RTN","SRONP0",37,0)
 I $P($G(^SRF(SRTN,13,OTH,2)),"^"),$O(^SRF(SRTN,13,OTH,1,0)) D CPT
"RTN","SRONP0",38,0)
 Q
"RTN","SRONP0",39,0)
CPT D LINE(1) S @SRG@(SRI)="     Procedure Code Comments:" S SRLINE=0
"RTN","SRONP0",40,0)
 F  S SRLINE=$O(^SRF(SRTN,13,OTH,1,SRLINE)) Q:'SRLINE  S X=^SRF(SRTN,13,OTH,1,SRLINE,0) D COMM^SRONP2(X,5)
"RTN","SRONP0",41,0)
 Q
"RTN","SRONP0",42,0)
SPACE(NUM) ;create spaces
"RTN","SRONP0",43,0)
 ;pass in position returns number of needed spaces
"RTN","SRONP0",44,0)
 I '$D(@SRG@(SRI)) S @SRG@(SRI)=""
"RTN","SRONP0",45,0)
 Q $J("",NUM-$L(@SRG@(SRI)))
"RTN","SRONP0",46,0)
LINE(NUM) ;create carriage returns
"RTN","SRONP0",47,0)
 F J=1:1:NUM S SRI=SRI+1,@SRG@(SRI)=""
"RTN","SRONP0",48,0)
 Q
"RTN","SRONP2")
0^38^B17607439^B18149822
"RTN","SRONP2",1,0)
SRONP2 ;BIR/ADM - PROCEDURE REPORT (NON-OR) ;07/26/04  9:45 AM
"RTN","SRONP2",2,0)
 ;;3.0; Surgery ;**132,142**;24 Jun 93
"RTN","SRONP2",3,0)
 Q
"RTN","SRONP2",4,0)
OPTOP(SRTN) ; send op-top to ^TMP
"RTN","SRONP2",5,0)
 ; SRTN   - case number in file 130
"RTN","SRONP2",6,0)
 ;
"RTN","SRONP2",7,0)
 N ANE,DFN,ICD,J,NUM,SR,SRATT,SRCASE,SRDIV,SRI,SRL,SRLINE,SRLOC,SRN,SROPTOP,SRSPEC,SRSTATUS,SRTECH,X,Y
"RTN","SRONP2",8,0)
 S SRCASE=SRTN,SRG=$NA(^TMP("SRNOR",$J,SRCASE)) K @SRG
"RTN","SRONP2",9,0)
 S SRI=0,SRDIV=$$SITE^SROUTL0(SRTN)
"RTN","SRONP2",10,0)
 I $P($G(^SRF(SRTN,30)),"^")!$P($G(^SRF(SRTN,31)),"^",8) D LINE(1) S @SRG@(SRI)="  * * PROCEDURE ABORTED * *" D LINE(1)
"RTN","SRONP2",11,0)
 F SRN=0:.1:1.1,"NON" S SR(SRN)=$G(^SRF(SRTN,SRN))
"RTN","SRONP2",12,0)
 S Y=$P(SR("NON"),"^",8),C=$P(^DD(130,125,0),"^",2) D:Y'="" Y^DIQ S SRSPEC=$S(Y="":"NOT ENTERED",1:$E(Y,1,25))
"RTN","SRONP2",13,0)
 S SRLOC="NOT ENTERED",SRL=$P(SR("NON"),"^",2) S:SRL SRLOC=$E($P(^SC(SRL,0),"^"),1,25)
"RTN","SRONP2",14,0)
 D LINE(1) S @SRG@(SRI)="Med. Specialty: "_SRSPEC,@SRG@(SRI)=@SRG@(SRI)_$$SPACE(44)_"Location: "_SRLOC
"RTN","SRONP2",15,0)
 S X=$P($G(^SRF(SRTN,33)),"^",2) D LINE(2) S @SRG@(SRI)="Principal Diagnosis: " D
"RTN","SRONP2",16,0)
 .I X="" S @SRG@(SRI)=@SRG@(SRI)_"NOT ENTERED" Q
"RTN","SRONP2",17,0)
 .D LINE(1) S @SRG@(SRI)="  "_X
"RTN","SRONP2",18,0)
 .S @SRG@(SRI)=@SRG@(SRI)
"RTN","SRONP2",19,0)
 .N OTH,CNT S (OTH,CNT)=0 F  S OTH=$O(^SRF(SRTN,15,OTH)) Q:'OTH  S CNT=CNT+1 D DIAG
"RTN","SRONP2",20,0)
 S Y=$P(SR("NON"),"^",6),C=$P(^DD(130,123,0),"^",2) D:Y'="" Y^DIQ D LINE(2) S @SRG@(SRI)="Provider: "_Y
"RTN","SRONP2",21,0)
 S X=$P($G(SR(0)),"^",12),SRSTATUS=$S(X="I":"INPATIENT",X="O":"OUTPATIENT",1:"NOT ENTERED")
"RTN","SRONP2",22,0)
 S @SRG@(SRI)=@SRG@(SRI)_$$SPACE(50)_"Patient Status: "_SRSTATUS
"RTN","SRONP2",23,0)
 S Y=$P(SR("NON"),"^",7),C=$P(^DD(130,124,0),"^",2) D:Y'="" Y^DIQ,N(28) S:Y="" Y="N/A" D LINE(1) S @SRG@(SRI)="Attending: "_Y
"RTN","SRONP2",24,0)
 D RS S:SRATT="" SRATT="NOT ENTERED" D LINE(1) S @SRG@(SRI)="Attending Code: "_SRATT
"RTN","SRONP2",25,0)
 S Y=$P(SR(.3),"^",4),C=$P(^DD(130,.34,0),"^",2) D:Y'="" Y^DIQ S:Y="" Y="N/A" D LINE(2) S @SRG@(SRI)="Attend Anesth: "_Y
"RTN","SRONP2",26,0)
 S X=$P(SR(.3),"^",6),X=$S(X:$P(^SRO(132.95,X,0),"^"),1:"N/A")
"RTN","SRONP2",27,0)
 D LINE(1) S @SRG@(SRI)="Anesthesia Supervisor Code: "_X
"RTN","SRONP2",28,0)
 S Y=$P(SR(.3),"^"),C=$P(^DD(130,.31,0),"^",2) D:Y'="" Y^DIQ S:Y="" Y="N/A" D LINE(1) S @SRG@(SRI)="Anesthetist: "_Y
"RTN","SRONP2",29,0)
 D LINE(2) S @SRG@(SRI)="Anesthesia Technique(s): " D
"RTN","SRONP2",30,0)
 .I '$O(^SRF(SRTN,6,0)) S @SRG@(SRI)=@SRG@(SRI)_"N/A" Q
"RTN","SRONP2",31,0)
 .S ANE=0 F  S ANE=$O(^SRF(SRTN,6,ANE)) Q:'ANE  D ANE
"RTN","SRONP2",32,0)
 D TECH I $E(SRTECH,1,2)'="NO" S X=$P($G(^SRF(SRTN,31)),"^",9),X=$S(X="N":"NO",X="Y":"YES",1:"") I X'="" D LINE(2) S @SRG@(SRI)="Diagnostic/Therapeutic: "_X
"RTN","SRONP2",33,0)
 D ^SRONP0
"RTN","SRONP2",34,0)
 Q
"RTN","SRONP2",35,0)
DIAG D LINE(1) S X=$G(^SRF(SRTN,15,OTH,0)),@SRG@(SRI)=$S(CNT=1:" Other: ",1:"        ")_$P(X,"^"),ICD=$P(X,"^",3)
"RTN","SRONP2",36,0)
 S ICD=$S(ICD:$P(^ICD9(ICD,0),"^"),1:"NOT ENTERED"),@SRG@(SRI)=@SRG@(SRI)_$$SPACE(50)_"ICD9 Code: "_ICD
"RTN","SRONP2",37,0)
 Q
"RTN","SRONP2",38,0)
N(SRL) N SRNM I $L(Y)>SRL S SRNM=$P(Y,",")_","_$E($P(Y,",",2))_".",Y=SRNM
"RTN","SRONP2",39,0)
 Q
"RTN","SRONP2",40,0)
TECH N SRT,SRZ D TECH^SROPRIN
"RTN","SRONP2",41,0)
 Q
"RTN","SRONP2",42,0)
ANE ; print anesthesia technique
"RTN","SRONP2",43,0)
 N A,AGNT,C,CNT
"RTN","SRONP2",44,0)
 S A=^SRF(SRTN,6,ANE,0),Y=$P(A,"^"),C=$P(^DD(130.06,.01,0),"^",2) D:Y'="" Y^DIQ D LINE(1) S Y=Y_$S($P(A,"^",3)="Y":"  (PRINCIPAL)",1:""),@SRG@(SRI)=$$SPACE(2)_Y D AGENT
"RTN","SRONP2",45,0)
 Q
"RTN","SRONP2",46,0)
AGENT ; print agents
"RTN","SRONP2",47,0)
 Q:$P(A,"^")="N"  N SRDOSE,SRY
"RTN","SRONP2",48,0)
 D LINE(1) S @SRG@(SRI)="     Agent: " I '$O(^SRF(SRTN,6,ANE,1,0)) S @SRG@(SRI)=@SRG@(SRI)_"NONE ENTERED" Q
"RTN","SRONP2",49,0)
 S (AGNT,CNT)=0 F  S AGNT=$O(^SRF(SRTN,6,ANE,1,AGNT)) Q:'AGNT  S CNT=CNT+1 D
"RTN","SRONP2",50,0)
 .S SRY=^SRF(SRTN,6,ANE,1,AGNT,0),SRDOSE=$P(SRY,"^",2)
"RTN","SRONP2",51,0)
 .S Y=$P(SRY,"^"),C=$P(^DD(130.47,.01,0),"^",2) D Y^DIQ
"RTN","SRONP2",52,0)
 .D:CNT>1 LINE(1) S @SRG@(SRI)=@SRG@(SRI)_$$SPACE(13)_Y
"RTN","SRONP2",53,0)
 .I SRDOSE S @SRG@(SRI)=@SRG@(SRI)_"   "_SRDOSE_" mg"
"RTN","SRONP2",54,0)
 Q
"RTN","SRONP2",55,0)
RS ; attending code
"RTN","SRONP2",56,0)
 I $$GET1^DID(130,.166,"","LABEL")["ATTENDING CODE" D  Q
"RTN","SRONP2",57,0)
 .S Y=$P(SR(.1),"^",10),C=$P(^DD(130,.166,0),"^",2) D Y^DIQ S SRATT=Y
"RTN","SRONP2",58,0)
 S Y=$P(SR(.1),"^",16),C=$P(^DD(130,.165,0),"^",2) D Y^DIQ S SRATT=Y
"RTN","SRONP2",59,0)
 Q
"RTN","SRONP2",60,0)
COMM(X,NUM) ; output word-processing text
"RTN","SRONP2",61,0)
 ; X = line of text to be processed
"RTN","SRONP2",62,0)
 ; NUM = left margin
"RTN","SRONP2",63,0)
 N I,J,K,Y,SRL S SRL=80-NUM
"RTN","SRONP2",64,0)
 I $L(X)<(SRL+1)!($E(X,1,SRL)'[" ") D LINE(1) S @SRG@(SRI)=$$SPACE(NUM)_X Q
"RTN","SRONP2",65,0)
 S K=1 F  D  I $L(X)<SRL+1 S X(K)=X Q
"RTN","SRONP2",66,0)
 .F I=0:1:SRL-1 S J=SRL-I,Y=$E(X,J) I Y=" " S X(K)=$E(X,1,J-1),X=$E(X,J+1,$L(X)) S K=K+1 Q
"RTN","SRONP2",67,0)
 F I=1:1:K D LINE(1) S @SRG@(SRI)=$$SPACE(NUM)_X(I)
"RTN","SRONP2",68,0)
 Q
"RTN","SRONP2",69,0)
SPACE(NUM) ; create spaces
"RTN","SRONP2",70,0)
 ; pass in position returns number of needed spaces
"RTN","SRONP2",71,0)
 I '$D(@SRG@(SRI)) S @SRG@(SRI)=""
"RTN","SRONP2",72,0)
 Q $J("",NUM-$L(@SRG@(SRI)))
"RTN","SRONP2",73,0)
LINE(NUM) ; create carriage returns
"RTN","SRONP2",74,0)
 F J=1:1:NUM S SRI=SRI+1,@SRG@(SRI)=""
"RTN","SRONP2",75,0)
 Q
"RTN","SROPCE0")
0^47^B29268226^B31414628
"RTN","SROPCE0",1,0)
SROPCE0 ;BIR/ADM - PCE FILING STATUS REPORT ;03/17/05
"RTN","SROPCE0",2,0)
 ;;3.0; Surgery ;**58,62,69,77,50,119,142**;24 Jun 93
"RTN","SROPCE0",3,0)
 W @IOF,!,?26,"Report of PCE Filing Status",!!,"This report displays the filing status of completed cases performed during the",!,"selected date range.",!
"RTN","SROPCE0",4,0)
 S (SRFLG,SRSOUT)=0,SRSPEC=""
"RTN","SROPCE0",5,0)
ASK W ! K DIR S DIR("A",1)="Print PCE filing status of completed cases for",DIR("A",2)="",DIR("A",3)="1. O.R. Surgical Procedures",DIR("A",4)="2. Non-O.R. Procedures"
"RTN","SROPCE0",6,0)
 S DIR("A",5)="3. Both O.R. Surgical Procedures and Non-O.R. Procedures (All Specialties)",DIR("A",6)="",DIR("A")="Select Number (1, 2 or 3): ",DIR("B")="1"
"RTN","SROPCE0",7,0)
 S DIR(0)="NA^1:3:0" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SROPCE0",8,0)
 S SRFLG=Y I SRFLG=1 D SPEC G:SRSOUT END
"RTN","SROPCE0",9,0)
 I SRFLG=2 D MSP G:SRSOUT END
"RTN","SROPCE0",10,0)
DATE D DATE^SROUTL(.SDATE,.EDATE,.SRSOUT) G:SRSOUT END
"RTN","SROPCE0",11,0)
FORM W ! K DIR S DIR("A")="Print the long form or the short form ? ",DIR("B")="SHORT",DIR(0)="SAM^L:LONG;S:SHORT" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SROPCE0",12,0)
 S SRFORM=Y I Y="L" W !!,"This report is designed to use a 132 column format."
"RTN","SROPCE0",13,0)
 W ! K %ZIS,IOP,IO("Q"),POP S %ZIS("A")="Print the PCE Filing Status Report to which Printer ? ",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROPCE0",14,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="PCE FILING STATUS REPORT",(ZTSAVE("EDATE"),ZTSAVE("SRFORM"),ZTSAVE("SDATE"),ZTSAVE("SRSITE*"),ZTSAVE("SRSPEC*"),ZTSAVE("SRFLG"))="",ZTRTN="EN^SROPCE0" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROPCE0",15,0)
EN U IO S SRSOUT=0,(SRHDR,SRPAGE)=1,SRSDT=SDATE-.0001,SRSEDT=EDATE+.9999,Y=SDATE X ^DD("DD") S STARTDT=Y,Y=EDATE X ^DD("DD") S ENDATE=Y F I=1:1:6 S CNT(I)=0
"RTN","SROPCE0",16,0)
 S SRRPT="PCE FILING STATUS REPORT",SRTITLE="For Completed "_$S(SRFLG=1:"O.R. Surgical Procedures",SRFLG=2:"Non-O.R. Procedures",1:"O.R. Surgical and Non-O.R. Procedures"),SRFRTO="From: "_STARTDT_"  To: "_ENDATE
"RTN","SROPCE0",17,0)
 S SRINST=SRSITE("SITE") D NOW^%DTC S Y=$E(%,1,12) X ^DD("DD") S SRPRINT="Report Printed: "_Y
"RTN","SROPCE0",18,0)
 I SRFORM="L" D ^SROPCE0A G END
"RTN","SROPCE0",19,0)
 D ^SROPCE0B
"RTN","SROPCE0",20,0)
END W:$E(IOST)="P" @IOF I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROPCE0",21,0)
 I 'SRSOUT,$E(IOST)'="P" W !!,"Press RETURN to continue  " R X:DTIME
"RTN","SROPCE0",22,0)
 D ^%ZISC K SRDIV,SRDX,SRFCPT,SRFICD,SRFRTO,SRINOUT,SRPARAM,SRPODX,SRQCPT,SRQICD,SRRPT,SRSCHED,SRSPS,SRSR,SRTN,SRUCPT,SRUICD D ^SRSKILL W @IOF
"RTN","SROPCE0",23,0)
 Q
"RTN","SROPCE0",24,0)
SPEC W @IOF,! S DIR("?",1)="Enter YES if you would like the report printed for all Surgical Specialties",DIR("?")="or enter NO to select a specific specialty."
"RTN","SROPCE0",25,0)
 S DIR("A")="Do you want the report for all Surgical Specialties ? ",DIR("B")="YES",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROPCE0",26,0)
 I 'Y W ! K DIC S DIC=137.45,DIC(0)="QEAMZ",DIC("A")="Select Surgical Specialty: ",DIC("S")="I '$P(^(0),""^"",3)" D ^DIC K DIC S:Y<0 SRSOUT=1 Q:Y<0  S SRSPEC=+Y,SRSPECN=$P(Y(0),"^")
"RTN","SROPCE0",27,0)
 Q
"RTN","SROPCE0",28,0)
MSP W @IOF,! S DIR("?",1)="Enter YES if you would like the report printed for all Medical Specialties",DIR("?")="or enter NO to select a specific specialty."
"RTN","SROPCE0",29,0)
 S DIR("A")="Do you want the report for all Medical Specialties ? ",DIR("B")="YES",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROPCE0",30,0)
 I 'Y W ! K DIC S DIC=723,DIC(0)="QEAMZ",DIC("A")="Select Medical Specialty: " D ^DIC K DIC S:Y<0 SRSOUT=1 Q:Y<0  S SRSPEC=+Y,SRSPECN=$P(Y(0),"^")
"RTN","SROPCE0",31,0)
 Q
"RTN","SROPCE0",32,0)
CHK ; set up array of fields missing data
"RTN","SROPCE0",33,0)
 K SRX,DA,DIC,DIQ,DR,SRY S DIC="^SRF(",DA=SRTN,DIQ="SRY",DIQ(0)="I" D  D EN^DIQ1
"RTN","SROPCE0",34,0)
 .I SRNON S DR="119;121;122;123;"_$S(SRSR'=0:"124;",1:"")_"125;"
"RTN","SROPCE0",35,0)
 .I 'SRNON S DR=".04;.14;"_$S(SRSR'=0:".164;",1:"")_".205;.232;"
"RTN","SROPCE0",36,0)
 .I $P(^SRO(133,SRSITE,0),"^",16) S DR=DR_".0155;"
"RTN","SROPCE0",37,0)
 .I SRSTATUS=5 S DR=DR_".011;"
"RTN","SROPCE0",38,0)
 D CLINIC
"RTN","SROPCE0",39,0)
 S SRZ=0 F  S SRZ=$O(SRY(130,SRTN,SRZ)) Q:'SRZ  I SRY(130,SRTN,SRZ,"I")="" D TR S X=$T(@SRP),SRFLD=$P(X,";;",2),SRX(SRZ)=$P(SRFLD,"^",2)
"RTN","SROPCE0",40,0)
 I '$P($G(^SRO(136,SRTN,0)),"^",2) S SRX(.02)="PRINCIPAL PROCEDURE CODE"
"RTN","SROPCE0",41,0)
 I '$P($G(^SRO(136,SRTN,0)),"^",3) S SRX(.03)="PRIN POSTOP DIAGNOSIS CODE"
"RTN","SROPCE0",42,0)
OTH S SROTH=0,SROTH=$O(^SRO(136,SRTN,2,SROTH)) I SROTH="" S SRX(99998)="PRIN PROCEDURE CODE MISSING ASSOCIATED DIAGNOSIS CODE"
"RTN","SROPCE0",43,0)
 S SROTH=0 F  S SROTH=$O(^SRO(136,SRTN,3,SROTH)) Q:'SROTH  D
"RTN","SROPCE0",44,0)
 .I '$D(^SRO(136,SRTN,3,SROTH,2)) S SRX(99999)="OTHER PROCEDURE CPT MISSING ASSOCIATED DIAGNOSIS ICD CODE" Q
"RTN","SROPCE0",45,0)
 .S SRZ=0 S SRZ=$O(^SRO(136,SRTN,3,SROTH,2,SRZ)) I 'SRZ S SRX(99999)="OTHER PROCEDURE CPT MISSING ASSOCIATED DIAGNOSIS ICD CODE" Q
"RTN","SROPCE0",46,0)
 Q
"RTN","SROPCE0",47,0)
CLINIC N SRCLINIC S SRCLINIC=$P(^SRF(SRTN,0),"^",21) D
"RTN","SROPCE0",48,0)
 .I SRNON S:SRCLINIC="" SRCLINIC=$P(^SRF(SRTN,"NON"),"^",2) Q
"RTN","SROPCE0",49,0)
 .S:SRCLINIC="" SRCLINIC=$P(^SRO(137.45,$P(^SRF(SRTN,0),"^",4),0),"^",5) I SRCLINIC="",$P(^SRF(SRTN,0),"^",2) S SRCLINIC=$P(^SRS($P(^SRF(SRTN,0),"^",2),0),"^")
"RTN","SROPCE0",50,0)
 I SRCLINIC,'$$CLINIC^SROUTL(SRCLINIC,SRTN) S SRCLINIC=""
"RTN","SROPCE0",51,0)
 S SRY(130,SRTN,.021,"I")=SRCLINIC
"RTN","SROPCE0",52,0)
 Q
"RTN","SROPCE0",53,0)
TR S SRP=SRZ,SRP=$TR(SRP,"1234567890.","ABCDEFGHIJP")
"RTN","SROPCE0",54,0)
 Q
"RTN","SROPCE0",55,0)
PJAA ;;.011^IN/OUT-PATIENT STATUS
"RTN","SROPCE0",56,0)
PJAEE ;;.0155^CLASSIFICATION INFORMATION
"RTN","SROPCE0",57,0)
PJBA ;;.021^ASSOCIATED CLINIC
"RTN","SROPCE0",58,0)
PJD ;;.04^SURGERY SPECIALTY
"RTN","SROPCE0",59,0)
PAFD ;;.164^ATTEND SURG
"RTN","SROPCE0",60,0)
PBJE ;;.205^TIME PAT IN OR
"RTN","SROPCE0",61,0)
PBCB ;;.232^TIME PAT OUT OR
"RTN","SROPCE0",62,0)
AAI ;;119^NON-OR LOCATION
"RTN","SROPCE0",63,0)
ABA ;;121^TIME PROCEDURE BEGAN
"RTN","SROPCE0",64,0)
ABB ;;122^TIME PROCEDURE ENDED
"RTN","SROPCE0",65,0)
ABC ;;123^PROVIDER
"RTN","SROPCE0",66,0)
ABD ;;124^ATTEND PROVIDER
"RTN","SROPCE0",67,0)
ABE ;;125^MEDICAL SPECIALTY
"RTN","SROPCE0A")
0^48^B42322529^B45156648
"RTN","SROPCE0A",1,0)
SROPCE0A ;BIR/ADM - PCE FILING STATUS REPORT, LONG FORM ;03/17/05
"RTN","SROPCE0A",2,0)
 ;;3.0; Surgery ;**58,62,69,77,50,86,88,127,142**;24 Jun 93
"RTN","SROPCE0A",3,0)
 ;
"RTN","SROPCE0A",4,0)
 ; Reference to ^ECC(723 supported by DBIA #205
"RTN","SROPCE0A",5,0)
 ;
"RTN","SROPCE0A",6,0)
 S (SRFCPT,SRQCPT,SRFICD,SRQICD,SRUCPT,SRUICD)=0
"RTN","SROPCE0A",7,0)
 D HDR F  S SRSDT=$O(^SRF("AC",SRSDT)) Q:'SRSDT!(SRSDT>SRSEDT)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDT,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN),$P($G(^SRF(SRTN,30)),"^")="" D UTIL Q:SRSOUT
"RTN","SROPCE0A",8,0)
 D:'SRSOUT TOTAL
"RTN","SROPCE0A",9,0)
 Q
"RTN","SROPCE0A",10,0)
TOTAL D:$Y+10>IOSL PAGE Q:SRSOUT  W !,?28,"CPT",?36,"ICD",!,?20,"CASES",?27,"CODES",?35,"CODES",!,?13,"FILED: ",$J(CNT(1),5),?27,$J(SRFCPT,5),?35,$J(SRFICD,5)
"RTN","SROPCE0A",11,0)
 W !,?9,"NOT FILED: "_$J(CNT(4),5) F I=1:1:5 S CNT(6)=CNT(6)+CNT(I)
"RTN","SROPCE0A",12,0)
 W:CNT(5) !,?9,"UNCERTAIN: "_$J(CNT(5),5) W !,?20,"-----",?27,"-----",?35,"-----",!,?13,"TOTAL: ",$J(CNT(6),5),?27,$J(SRFCPT+SRQCPT+SRUCPT,5),?35,$J(SRFICD+SRQICD+SRUICD,5)
"RTN","SROPCE0A",13,0)
 Q
"RTN","SROPCE0A",14,0)
UTIL ; process case
"RTN","SROPCE0A",15,0)
 S SRDIV=$P($G(^SRF(SRTN,8)),"^") I SRDIV S SRSPS=$O(^SRO(133,"B",SRDIV,0))
"RTN","SROPCE0A",16,0)
 I 'SRDIV S SRSPS=SRSITE
"RTN","SROPCE0A",17,0)
 S X=^SRO(133,SRSPS,0),SRPARAM=$P(X,"^",15),SRSR=$P(X,"^",19) I SRPARAM=""!(SRPARAM="N") Q
"RTN","SROPCE0A",18,0)
 S SRINOUT=$P(^SRF(SRTN,0),"^",12) I SRPARAM="O",SRINOUT'="",SRINOUT'="O" Q
"RTN","SROPCE0A",19,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROPCE0A",20,0)
 I SRFLG=1!(SRFLG=3&('SRNON)) Q:'$P($G(^SRF(SRTN,.2)),"^",12)
"RTN","SROPCE0A",21,0)
 I SRFLG=2!(SRFLG=3&SRNON) Q:'$P($G(^SRF(SRTN,"NON")),"^",5)
"RTN","SROPCE0A",22,0)
 Q:SRFLG=2&('SRNON)  Q:SRFLG=1&(SRNON)
"RTN","SROPCE0A",23,0)
 S SRSS=$S('SRNON:$P(^SRF(SRTN,0),"^",4),1:$P(^SRF(SRTN,"NON"),"^",8)) I SRSPEC,SRSPEC'=SRSS Q
"RTN","SROPCE0A",24,0)
 S SRSSNM=$S('SRNON:$P(^SRO(137.45,SRSS,0),"^"),1:$P(^ECC(723,SRSS,0),"^"))
"RTN","SROPCE0A",25,0)
 I SRPARAM="O",SRINOUT="" S SRSTATUS=5,CNT(5)=CNT(5)+1 D CASE,CHK^SROPCE0,MISS Q
"RTN","SROPCE0A",26,0)
 I $P(^SRF(SRTN,0),"^",15) S SRSTATUS=1,CNT(1)=CNT(1)+1 D CASE,LINE Q
"RTN","SROPCE0A",27,0)
 S SRSTATUS=4,CNT(4)=CNT(4)+1 D CASE,CHK^SROPCE0,MISS
"RTN","SROPCE0A",28,0)
 Q
"RTN","SROPCE0A",29,0)
MISS ; list fields missing data
"RTN","SROPCE0A",30,0)
 Q:SRSOUT  S SRFLD="" S SRFLD=$O(SRX(SRFLD)) I SRFLD="" W !,?15,"No Missing Information" D LINE Q
"RTN","SROPCE0A",31,0)
 S SRCT=1,SRFLD="" W !,?15,"Missing Information:" F  S SRFLD=$O(SRX(SRFLD)) Q:SRFLD=""  D:$Y+5>IOSL PAGE Q:SRSOUT  W !,$J(SRCT_". ",20),SRX(SRFLD) S SRCT=SRCT+1
"RTN","SROPCE0A",32,0)
LINE I 'SRSOUT W ! F I=1:1:IOM W "-"
"RTN","SROPCE0A",33,0)
 Q
"RTN","SROPCE0A",34,0)
CASE ; print case info
"RTN","SROPCE0A",35,0)
 D:$Y+9>IOSL PAGE Q:SRSOUT  D DEM,SCHED^SROPCE0B
"RTN","SROPCE0A",36,0)
 W !,SRSDATE,?22,SRSNM,?49,SRPROV,?71,SRSSNM,?113,$S(SRSTATUS=1:"FILED",SRSTATUS=4:"NOT FILED",1:"UNCERTAIN")
"RTN","SROPCE0A",37,0)
 W !,SRTN,?22,SRSSN_"  ("_SRAGE_")",?49,SRATT,?71,SRDIAG(1),?113,$E(SRSCHED,1,17),!
"RTN","SROPCE0A",38,0)
 W:(SRFLG=3)&SRNON "NON-OR" W ?22,SRPROC(1) W:$D(SRDIAG(2)) ?71,SRDIAG(2) W:$D(SRPROC(2)) !,?22,SRPROC(2) W:$D(SRPROC(3)) !,?22,SRPROC(3) W !
"RTN","SROPCE0A",39,0)
 I "1,2,3"[SRSTATUS F SRI=1:1 Q:'$D(SRCPT(SRI))&'$D(SRDX(SRI))  D:$Y+4>IOSL PAGE Q:SRSOUT  W ! D  W:$D(SRDX(SRI)) ?71,"ICD Diagnosis Code: "_SRDX(SRI)
"RTN","SROPCE0A",40,0)
 .I $D(SRCPT(SRI)) S SRCPT(SRI)=$S($D(SRDX(SRI)):$E(SRCPT(SRI),1,68),1:SRCPT(SRI)) W ?1,SRCPT(SRI)
"RTN","SROPCE0A",41,0)
 Q
"RTN","SROPCE0A",42,0)
DEM ; get patient demographic information
"RTN","SROPCE0A",43,0)
 S SR(0)=^SRF(SRTN,0),DFN=$P(SR(0),"^") D DEM^VADPT S SRSNM=VADM(1),SRSSN=VA("PID"),Y=SRSDT X ^DD("DD") S SRSDATE=Y,X1=$E(SRSDT,1,7),X2=$P(VADM(3),"^"),SRAGE=$E(X1,1,3)-$E(X2,1,3)-($E(X1,4,7)<$E(X2,4,7))
"RTN","SROPCE0A",44,0)
 I $L(SRSNM)>25 S X=SRSNM,SRSNM=$P(X,",")_","_$E($P(X,",",2))_"."
"RTN","SROPCE0A",45,0)
PROC ; get principal procedure and other case information
"RTN","SROPCE0A",46,0)
 K SRPROC S X=$P(^SRF(SRTN,"OP"),"^") I $L(X)<60 S SRPROC(1)=X
"RTN","SROPCE0A",47,0)
 I $L(X)>59 S K=1 F  D  I $L(X)<60 S SRPROC(K)=X Q
"RTN","SROPCE0A",48,0)
 .F I=0:1:58 S J=59-I,Y=$E(X,J) I Y=" " S SRPROC(K)=$E(X,1,J-1),X=$E(X,J+1,$L(X)) S K=K+1 Q
"RTN","SROPCE0A",49,0)
 K SRDIAG S X=$S(SRNON:$P($G(^SRF(SRTN,33)),"^",2),1:$P($G(^SRF(SRTN,34)),"^")) I $L(X)<40 S SRDIAG(1)=X
"RTN","SROPCE0A",50,0)
 I $L(X)>39 S K=1 F  D  I $L(X)<40 S SRDIAG(K)=X Q
"RTN","SROPCE0A",51,0)
 .F I=0:1:38 S J=39-I,Y=$E(X,J) I Y=" " S SRDIAG(K)=$E(X,1,J-1),X=$E(X,J+1,$L(X)) S K=K+1 Q
"RTN","SROPCE0A",52,0)
 I SRDIAG(1)="" S SRDIAG(1)="NOT ENTERED"
"RTN","SROPCE0A",53,0)
 I SRNON S X=$G(^SRF(SRTN,"NON")) S SRPROV=$S($P(X,"^",6):$P(^VA(200,$P(X,"^",6),0),"^"),1:"NOT ENTERED"),SRATT=$S($P(X,"^",7):$P(^VA(200,$P(X,"^",7),0),"^"),1:"NOT ENTERED")
"RTN","SROPCE0A",54,0)
 I 'SRNON S X=$G(^SRF(SRTN,.1)) S SRPROV=$S($P(X,"^",4):$P(^VA(200,$P(X,"^",4),0),"^"),1:"NOT ENTERED"),SRATT=$S($P(X,"^",13):$P(^VA(200,$P(X,"^",13),0),"^"),1:"NOT ENTERED")
"RTN","SROPCE0A",55,0)
 I $L(SRPROV)>20 S X=SRPROV,SRPROV=$P(X,",")_","_$E($P(X,",",2))_"."
"RTN","SROPCE0A",56,0)
 I $L(SRATT)>20 S X=SRATT,SRATT=$P(X,",")_","_$E($P(X,",",2))_"."
"RTN","SROPCE0A",57,0)
 Q:"1,2,3"'[SRSTATUS
"RTN","SROPCE0A",58,0)
CPT ; get CPT codes
"RTN","SROPCE0A",59,0)
 N SRICPT K SRCPT S SRJ=1,X=$P($G(^SRO(136,SRTN,0)),"^",2) I X D
"RTN","SROPCE0A",60,0)
 .S SRICPT=$$CPT^ICPTCOD(X,$P($G(^SRF(SRTN,0)),"^",9)),SRCPT(1)="CPT Code: "_$P(SRICPT,"^",2)_"  "_$P(SRICPT,"^",3),SRJ=SRJ+1
"RTN","SROPCE0A",61,0)
 .S:SRSTATUS=1 SRFCPT=SRFCPT+1 S:SRSTATUS=2 SRQCPT=SRQCPT+1 S:SRSTATUS=3 SRUCPT=SRUCPT+1
"RTN","SROPCE0A",62,0)
 .I X,$O(^SRO(136,SRTN,1,0)) D
"RTN","SROPCE0A",63,0)
 ..N SRI,SRX,SRY,SRZ S SRX=" Modifiers: -"
"RTN","SROPCE0A",64,0)
 ..S SRI=0 F  S SRI=$O(^SRO(136,SRTN,1,SRI)) Q:'SRI  D
"RTN","SROPCE0A",65,0)
 ...S SRZ=$P(^SRO(136,SRTN,1,SRI,0),"^"),SRY=$$MOD^ICPTMOD(SRZ,"I",$P($G(^SRF(SRTN,0)),"^",9)),SRX=SRX_$P(SRY,"^",2)_" "_$P(SRY,"^",3)
"RTN","SROPCE0A",66,0)
 ...S SRCPT(SRJ)=SRX,SRJ=SRJ+1,SRX="            -"
"RTN","SROPCE0A",67,0)
 S SROP=0 F  S SROP=$O(^SRO(136,SRTN,3,SROP)) Q:'SROP  S X=$P($G(^SRO(136,SRTN,3,SROP,0)),"^") I X D
"RTN","SROPCE0A",68,0)
 .S SRICPT=$$CPT^ICPTCOD(X,$P($G(^SRF(SRTN,0)),"^",9)),SRCPT(SRJ)="CPT Code: "_$P(SRICPT,"^",2)_"  "_$P(SRICPT,"^",3),SRJ=SRJ+1
"RTN","SROPCE0A",69,0)
 .I $O(^SRO(136,SRTN,3,SROP,1,0)) D
"RTN","SROPCE0A",70,0)
 ..N SRI,SRX,SRY,SRZ S SRX=" Modifiers: -"
"RTN","SROPCE0A",71,0)
 ..S SRI=0 F  S SRI=$O(^SRO(136,SRTN,3,SROP,1,SRI)) Q:'SRI  D
"RTN","SROPCE0A",72,0)
 ...S SRZ=$P(^SRO(136,SRTN,3,SROP,1,SRI,0),"^"),SRY=$$MOD^ICPTMOD(SRZ,"I",$P($G(^SRF(SRTN,0)),"^",9)),SRX=SRX_$P(SRY,"^",2)_" "_$P(SRY,"^",3)
"RTN","SROPCE0A",73,0)
 ...S SRCPT(SRJ)=SRX,SRJ=SRJ+1,SRX="            -"
"RTN","SROPCE0A",74,0)
 .S:SRSTATUS=1 SRFCPT=SRFCPT+1 S:SRSTATUS=2 SRQCPT=SRQCPT+1 S:SRSTATUS=3 SRUCPT=SRUCPT+1
"RTN","SROPCE0A",75,0)
DX ; get diagnosis and ICD codes
"RTN","SROPCE0A",76,0)
 K SRDX S SRJ=1,X=$P($G(^SRO(136,SRTN,0)),"^",3) I X D
"RTN","SROPCE0A",77,0)
 .S SRDX(1)=$$ICDDX^ICDCODE(X,$P($G(^SRF(SRTN,0)),"^",9)),SRDX(1)=$P(SRDX(1),"^",2)_"  "_$P(SRDX(1),"^",4),SRJ=SRJ+1
"RTN","SROPCE0A",78,0)
 .S:SRSTATUS=1 SRFICD=SRFICD+1 S:SRSTATUS=2 SRQICD=SRQICD+1 S:SRSTATUS=3 SRUICD=SRUICD+1
"RTN","SROPCE0A",79,0)
 S SRPODX=0 F  S SRPODX=$O(^SRO(136,SRTN,4,SRPODX)) Q:'SRPODX  S X=$P(^SRO(136,SRTN,4,SRPODX,0),"^") I X D
"RTN","SROPCE0A",80,0)
 .S SRDX(SRJ)=$$ICDDX^ICDCODE(X,$P($G(^SRF(SRTN,0)),"^",9)),SRDX(SRJ)=$P(SRDX(SRJ),"^",2)_"  "_$P(SRDX(SRJ),"^",4),SRJ=SRJ+1
"RTN","SROPCE0A",81,0)
 .S:SRSTATUS=1 SRFICD=SRFICD+1 S:SRSTATUS=2 SRQICD=SRQICD+1 S:SRSTATUS=3 SRUICD=SRUICD+1
"RTN","SROPCE0A",82,0)
 Q
"RTN","SROPCE0A",83,0)
PAGE I $E(IOST)="P"!SRHDR G HDR
"RTN","SROPCE0A",84,0)
 W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROPCE0A",85,0)
HDR ; print heading
"RTN","SROPCE0A",86,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROPCE0A",87,0)
 W:$Y @IOF W:$E(IOST)="P" !,?(IOM-$L(SRINST)\2),SRINST W !,?(IOM-$L(SRRPT)\2),SRRPT,?(IOM-10),$J("PAGE "_SRPAGE,9),!,?(IOM-$L(SRTITLE)\2),SRTITLE,!,?(IOM-$L(SRFRTO)\2),SRFRTO W:$E(IOST)="P" !,?(IOM-$L(SRPRINT)\2),SRPRINT
"RTN","SROPCE0A",88,0)
 W !!,"DATE OF "_$S(SRFLG=1:"OPERATION",SRFLG=2:"PROCEDURE",1:"OP/PROCEDURE"),?22,"PATIENT NAME",?49,$S(SRFLG=1:"SURGEON",SRFLG=2:"PROVIDER",1:"SURGEON/PROVIDER"),?71,"SPECIALTY",?113,"PCE FILING STATUS"
"RTN","SROPCE0A",89,0)
 W !,"CASE #",?22,"PATIENT ID  (AGE)",?49,"ATTENDING",?71,"PRINCIPAL "_$S(SRFLG=1:"POST-OP ",1:"")_"DIAGNOSIS",?113,"SCHED STATUS",!,?22,"PRINCIPAL PROCEDURE"
"RTN","SROPCE0A",90,0)
 S SRHDR=0,SRPAGE=SRPAGE+1 W ! F I=1:1:IOM W "="
"RTN","SROPCE0A",91,0)
 Q
"RTN","SROPCE0B")
0^49^B19503944^B21648800
"RTN","SROPCE0B",1,0)
SROPCE0B ;BIR/ADM - PCE FILING STATUS REPORT, SHORT FORM ;12/16/98  2:10 PM
"RTN","SROPCE0B",2,0)
 ;;3.0; Surgery ;**58,62,69,77,50,86,118,142**;24 Jun 93
"RTN","SROPCE0B",3,0)
 ;
"RTN","SROPCE0B",4,0)
 ; Reference to ^ECC(723 supported by DBIA #205
"RTN","SROPCE0B",5,0)
 ; Reference to ^SCE("AVSIT" supported by DBIA #2045
"RTN","SROPCE0B",6,0)
 ; Reference to File #409.68 supported by DBIA #2045
"RTN","SROPCE0B",7,0)
 ;
"RTN","SROPCE0B",8,0)
 D HDR F  S SRSDT=$O(^SRF("AC",SRSDT)) Q:'SRSDT!(SRSDT>SRSEDT)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDT,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN),$P($G(^SRF(SRTN,30)),"^")="" D UTIL Q:SRSOUT
"RTN","SROPCE0B",9,0)
 D:'SRSOUT TOTAL
"RTN","SROPCE0B",10,0)
 Q
"RTN","SROPCE0B",11,0)
TOTAL D:$Y+9>IOSL PAGE Q:SRSOUT  W !!,?13,"FILED: ",$J(CNT(1),5),!,?9,"NOT FILED: "_$J(CNT(4),5)
"RTN","SROPCE0B",12,0)
 F I=1:1:5 S CNT(6)=CNT(6)+CNT(I)
"RTN","SROPCE0B",13,0)
 W:CNT(5) !,?9,"UNCERTAIN: "_$J(CNT(5),5) W !,?20,"-----",!,?7,"TOTAL CASES: ",$J(CNT(6),5)
"RTN","SROPCE0B",14,0)
 Q
"RTN","SROPCE0B",15,0)
UTIL ; process case
"RTN","SROPCE0B",16,0)
 S SRDIV=$P($G(^SRF(SRTN,8)),"^") I SRDIV S SRSPS=$O(^SRO(133,"B",SRDIV,0))
"RTN","SROPCE0B",17,0)
 I 'SRDIV S SRSPS=SRSITE
"RTN","SROPCE0B",18,0)
 S X=^SRO(133,SRSPS,0),SRPARAM=$P(X,"^",15),SRSR=$P(X,"^",19) I SRPARAM=""!(SRPARAM="N") Q
"RTN","SROPCE0B",19,0)
 S SRINOUT=$P(^SRF(SRTN,0),"^",12) I SRPARAM="O",SRINOUT'="",SRINOUT'="O" Q
"RTN","SROPCE0B",20,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROPCE0B",21,0)
 I SRFLG=1!(SRFLG=3&('SRNON)),'$P($G(^SRF(SRTN,.2)),"^",12) Q
"RTN","SROPCE0B",22,0)
 I SRFLG=2!(SRFLG=3&SRNON),'$P($G(^SRF(SRTN,"NON")),"^",5) Q
"RTN","SROPCE0B",23,0)
 I (SRFLG=2&('SRNON))!(SRFLG=1&(SRNON)) Q
"RTN","SROPCE0B",24,0)
 S SRSS=$S('SRNON:$P(^SRF(SRTN,0),"^",4),1:$P(^SRF(SRTN,"NON"),"^",8)) I SRSPEC,SRSPEC'=SRSS Q
"RTN","SROPCE0B",25,0)
 S SRSSNM=$S('SRNON:$P(^SRO(137.45,SRSS,0),"^"),1:$P(^ECC(723,SRSS,0),"^"))
"RTN","SROPCE0B",26,0)
 I SRPARAM="O",SRINOUT="" S SRSTATUS=5,CNT(5)=CNT(5)+1 D CASE,CHK^SROPCE0,MISS Q
"RTN","SROPCE0B",27,0)
 I $P(^SRF(SRTN,0),"^",15) S SRSTATUS=1,CNT(1)=CNT(1)+1 D CASE,LINE Q
"RTN","SROPCE0B",28,0)
 S SRSTATUS=4,CNT(4)=CNT(4)+1 D CASE,CHK^SROPCE0,MISS
"RTN","SROPCE0B",29,0)
 Q
"RTN","SROPCE0B",30,0)
MISS ; list fields missing data
"RTN","SROPCE0B",31,0)
 Q:SRSOUT  S SRFLD="" S SRFLD=$O(SRX(SRFLD)) I SRFLD="" W !,?15,"No Missing Information" D LINE Q
"RTN","SROPCE0B",32,0)
 S SRCT=1,SRFLD="" W !!,?15,"Missing Information:" F  S SRFLD=$O(SRX(SRFLD)) Q:SRFLD=""  D:$Y+5>IOSL PAGE Q:SRSOUT  W !,$J(SRCT_". ",20),SRX(SRFLD) S SRCT=SRCT+1
"RTN","SROPCE0B",33,0)
LINE I 'SRSOUT W ! F I=1:1:80 W "-"
"RTN","SROPCE0B",34,0)
 Q
"RTN","SROPCE0B",35,0)
SCHED ; get appointment status from Scheduling
"RTN","SROPCE0B",36,0)
 N SRENC,SRVSIT,SRX S SRSCHED="<NONE>",SRVSIT=$P(SR(0),"^",15) Q:'SRVSIT
"RTN","SROPCE0B",37,0)
 S SRENC=$O(^SCE("AVSIT",SRVSIT,0)) Q:'SRENC
"RTN","SROPCE0B",38,0)
 S DA=SRENC,DIC=409.68,DR=".12",DIQ="SRX",DIQ(0)="E" D EN^DIQ1 K DA,DIC,DIQ,DR
"RTN","SROPCE0B",39,0)
 I SRX(409.68,SRENC,.12,"E")="INPATIENT APPOINTMENT" S SRX(409.68,SRENC,.12,"E")="INPATIENT APPT"
"RTN","SROPCE0B",40,0)
 S X=SRX(409.68,SRENC,.12,"E") I X'="" S SRSCHED=X
"RTN","SROPCE0B",41,0)
 Q
"RTN","SROPCE0B",42,0)
CASE ; print case info
"RTN","SROPCE0B",43,0)
 D:$Y+9>IOSL PAGE Q:SRSOUT  D DEM,PROC,SCHED
"RTN","SROPCE0B",44,0)
 W !,SRSDATE,?22,SRSNM,?44,SRSSN_"  ("_SRAGE_")",?66,$S(SRSTATUS=1:"FILED",SRSTATUS=4:"NOT FILED",1:"UNCERTAIN")
"RTN","SROPCE0B",45,0)
 W !,SRTN,?22,$E(SRSSNM,1,20),?66,$E(SRSCHED,1,14),! W:(SRFLG=3)&SRNON "NON-O.R." W ?22,SRPROC(1) W:$D(SRPROC(2)) !,?22,SRPROC(2) W:$D(SRPROC(3)) !,?22,SRPROC(3)
"RTN","SROPCE0B",46,0)
 Q
"RTN","SROPCE0B",47,0)
DEM ; get patient demographic information
"RTN","SROPCE0B",48,0)
 S SR(0)=^SRF(SRTN,0),DFN=$P(SR(0),"^") D DEM^VADPT S SRSNM=VADM(1),SRSSN=VA("PID"),Y=SRSDT X ^DD("DD") S SRSDATE=Y,X1=$E(SRSDT,1,7),X2=$P(VADM(3),"^"),SRAGE=$E(X1,1,3)-$E(X2,1,3)-($E(X1,4,7)<$E(X2,4,7))
"RTN","SROPCE0B",49,0)
 I $L(SRSNM)>20 S SRSNM=$P(VADM(1),",")_","_$E($P(VADM(1),",",2))_"."
"RTN","SROPCE0B",50,0)
 Q
"RTN","SROPCE0B",51,0)
PROC ; get principal procedure
"RTN","SROPCE0B",52,0)
 K SRPROC S X=$P(^SRF(SRTN,"OP"),"^") I $L(X)<56 S SRPROC(1)=X
"RTN","SROPCE0B",53,0)
 I $L(X)>55 S K=1 F  D  I $L(X)<56 S SRPROC(K)=X Q
"RTN","SROPCE0B",54,0)
 .F I=0:1:54 S J=55-I,Y=$E(X,J) I Y=" " S SRPROC(K)=$E(X,1,J-1),X=$E(X,J+1,$L(X)) S K=K+1 Q
"RTN","SROPCE0B",55,0)
 Q
"RTN","SROPCE0B",56,0)
PAGE I $E(IOST)="P"!SRHDR G HDR
"RTN","SROPCE0B",57,0)
 W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROPCE0B",58,0)
HDR ; print heading
"RTN","SROPCE0B",59,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROPCE0B",60,0)
 W:$Y @IOF W:$E(IOST)="P" !,?(80-$L(SRINST)\2),SRINST W !,?(80-$L(SRRPT)\2),SRRPT,?70,$J("PAGE "_SRPAGE,9),!,?(80-$L(SRTITLE)\2),SRTITLE,!,?(80-$L(SRFRTO)\2),SRFRTO W:$E(IOST)="P" !,?(80-$L(SRPRINT)\2),SRPRINT
"RTN","SROPCE0B",61,0)
 W !!,"DATE OF "_$S(SRFLG=1:"OPERATION",SRFLG=2:"PROCEDURE",1:"OP/PROCEDURE"),?22,"PATIENT NAME",?44,"PATIENT ID  (AGE)",?66,"FILING STATUS",!,"CASE #",?22,"SPECIALTY",?66,"SCHED STATUS",!,?22,"PRINCIPAL PROCEDURE"
"RTN","SROPCE0B",62,0)
 S SRHDR=0,SRPAGE=SRPAGE+1 W ! F I=1:1:80 W "="
"RTN","SROPCE0B",63,0)
 Q
"RTN","SROPCEP")
0^76^B74884918
"RTN","SROPCEP",1,0)
SROPCEP ;BIR/TJH - PCE UPDATES ;04/26/05  9:28 AM
"RTN","SROPCEP",2,0)
 ;;3.0; Surgery ;**142**;24 Jun 93
"RTN","SROPCEP",3,0)
 ;
"RTN","SROPCEP",4,0)
 ; Reference to $$DATA2PCE^PXAPI supported by DBIA #1889
"RTN","SROPCEP",5,0)
 ; Reference to $$DELVFILE^PXAPI supported by DBIA #1890
"RTN","SROPCEP",6,0)
 ;
"RTN","SROPCEP",7,0)
 Q
"RTN","SROPCEP",8,0)
START ; entry for update to PCE with surgery & non-OR procedure data
"RTN","SROPCEP",9,0)
 I '$D(SRTN) S SRTN=$G(DA)
"RTN","SROPCEP",10,0)
 I '$D(SRTN) Q
"RTN","SROPCEP",11,0)
 N DFN,SR,SRAO,SRATT,SRCHK,SRCPT,SRDATE,SRDIAG,SREC,SRHNC,SRIR,SRCV,SRK,SRLOC,SRMST,SRNON,SROTH,SRPKG,SRPROV,SRS,SRSC,SRV,SRVSIT,SRX,SRX2
"RTN","SROPCEP",12,0)
 N SRPLSC,SRPLAO,SRPLIR,SRPLEC,SRPLMST,SRPLHNC,SRPLCV,SRADX,SRCNT,SRD,SRDX,SRRPROV,SRUP,SRINOUT,SRODIAG,SRDXF,SRO
"RTN","SROPCEP",13,0)
 N SRDP,SRDC,SRDI,SRDL,SRDIE,SRDG,SRDM,SRDR,SRDH,SRDK,SRDA,SRD0,SRDDER,SRDG,SRDIC,SRDIC1,SRDICRRE,SRDIEDA,SRDIG,SRDIH,SRDIIENS,SRDISL,SRDISYS,SRDIU,SRDIV,SRDIWT,SRDN,SRDQ,SRDX,SRDY
"RTN","SROPCEP",14,0)
 D FM1 K DIC S DIC=9.4,DIC(0)="XM",X="SURGERY" D ^DIC K DIC D FM2 Q:Y=-1  S SRPKG=+Y
"RTN","SROPCEP",15,0)
 S SRS="SURGERY DATA" K ^TMP("SRPXAPI",$J)
"RTN","SROPCEP",16,0)
 D UTIL I 'SRK D PCE
"RTN","SROPCEP",17,0)
 Q
"RTN","SROPCEP",18,0)
DEL ; delete data from the Visit file and V files
"RTN","SROPCEP",19,0)
 D FM1 K DA,DIE,DR S DA=SRTN,DIE=130,DR=".015///@" D ^DIE K DA,DIE,DR D FM2
"RTN","SROPCEP",20,0)
 D FM1 S SRV=$$DELVFILE^PXAPI("ALL",SRVSIT) K SRVSIT D FM2
"RTN","SROPCEP",21,0)
 Q
"RTN","SROPCEP",22,0)
UTIL ; set procedure variables
"RTN","SROPCEP",23,0)
 N SRDIV,SRSITE,SRSR
"RTN","SROPCEP",24,0)
 S SRSR="",SRK=0,SRDIV=$P($G(^SRF(SRTN,8)),"^") I SRDIV S SRSITE=$O(^SRO(133,"B",SRDIV,0)),X=^SRO(133,SRSITE,0),SRUP=$P(X,"^",15),SRSR=$P(X,"^",19) I SRUP=""!(SRUP="N") S SRK=1 Q
"RTN","SROPCEP",25,0)
 S SRX=$P($G(^SRF(SRTN,0)),"^",15) I SRX S SRVSIT=SRX D DEL I '$D(^SRF(SRTN,0)) S SRK=1 Q
"RTN","SROPCEP",26,0)
 S SR(0)=$G(^SRF(SRTN,0)) I SR(0)=""!$P($G(^SRF(SRTN,30)),"^") S SRK=1 Q
"RTN","SROPCEP",27,0)
 S DFN=$P(SR(0),"^")
"RTN","SROPCEP",28,0)
 S SRNON=$S($P($G(^SRF(SRTN,"NON")),"^")="Y":1,1:0),SRCPT=$P($G(^SRO(136,SRTN,0)),"^",2) I 'SRCPT S SRK=1 Q
"RTN","SROPCEP",29,0)
 Q:SRK  S SRDIAG=$P($G(^SRO(136,SRTN,0)),"^",3) I 'SRDIAG S SRK=1 Q
"RTN","SROPCEP",30,0)
 S SRODIAG=$P($G(^SRF(SRTN,34)),"^",3)
"RTN","SROPCEP",31,0)
 S SRDXF=$S(SRODIAG=SRDIAG:1,1:0)
"RTN","SROPCEP",32,0)
 I 'SRNON D  I SRK Q
"RTN","SROPCEP",33,0)
 .S SRX=$P(SR(0),"^",21) I SRX S SRLOC=SRX
"RTN","SROPCEP",34,0)
 .I 'SRX S SRX=$P(^SRO(137.45,$P(SR(0),"^",4),0),"^",5) I SRX S SRLOC=SRX
"RTN","SROPCEP",35,0)
 .I 'SRX S SRX=$P(SR(0),"^",2) S:SRX SRLOC=$P(^SRS(SRX,0),"^") I 'SRX S SRK=1 Q
"RTN","SROPCEP",36,0)
 .S SRX=$G(^SRF(SRTN,.2)),SRCHK=$P(SRX,"^",12) I 'SRCHK S SRK=1 Q
"RTN","SROPCEP",37,0)
 .S SRDATE=$P(SRX,"^",10) I 'SRDATE S SRK=1 Q
"RTN","SROPCEP",38,0)
 .S SRX=$G(^SRF(SRTN,.1)),SRPROV=$P(SRX,"^",4),SRATT=$P(SRX,"^",13) I 'SRPROV S SRK=1 Q
"RTN","SROPCEP",39,0)
 .I SRSR'=0,'SRATT S SRK=1 Q
"RTN","SROPCEP",40,0)
 I SRNON D  I SRK Q
"RTN","SROPCEP",41,0)
 .S SRLOC=$P(SR(0),"^",21)
"RTN","SROPCEP",42,0)
 .S SRX=^SRF(SRTN,"NON"),SRCHK=$P(SRX,"^",5) I 'SRCHK S SRK=1 Q
"RTN","SROPCEP",43,0)
 .S SRDATE=$P(SRX,"^",4) I 'SRDATE S SRK=1 Q
"RTN","SROPCEP",44,0)
 .I 'SRLOC S SRLOC=$P(SRX,"^",2) I 'SRLOC S SRK=1 Q
"RTN","SROPCEP",45,0)
 .S SRPROV=$P(SRX,"^",6),SRATT=$P(SRX,"^",7) I 'SRPROV S SRK=1
"RTN","SROPCEP",46,0)
 .I SRSR'=0,'SRATT S SRK=1
"RTN","SROPCEP",47,0)
 S VAINDT=SRDATE
"RTN","SROPCEP",48,0)
 D INP^VADPT
"RTN","SROPCEP",49,0)
 I VAIN(1) S SRINOUT="I"
"RTN","SROPCEP",50,0)
 I 'VAIN(1) S SRINOUT="O"
"RTN","SROPCEP",51,0)
 K VAINDT,VAIN
"RTN","SROPCEP",52,0)
 I '$$CLINIC^SROUTL(SRLOC,SRTN) S SRK=1 Q
"RTN","SROPCEP",53,0)
 S SRX=0,SRX=$O(^SRO(136,SRTN,2,SRX)) I SRX="" S SRK=1 Q
"RTN","SROPCEP",54,0)
 S SRX=0 F  S SRX=$O(^SRO(136,SRTN,3,SRX)) Q:'SRX  S SRX2=0,SRX2=$O(^SRO(136,SRTN,3,SRX,2,SRX2)) I $D(^SRO(136,SRTN,3,SRX,0)),(SRX2="") S SRK=1  Q:SRK
"RTN","SROPCEP",55,0)
 S SRRPROV="" I $D(^SRF(SRTN,18)) S SRX=0,SRX=$O(^SRF(SRTN,18,SRX)) I SRX S SRRPROV=$P($G(^SRF(SRTN,18,SRX,0)),"^",7)
"RTN","SROPCEP",56,0)
 S SRO(0)=$G(^SRO(136,SRTN,0))
"RTN","SROPCEP",57,0)
 S (SRSC,SRAO,SREC,SRHNC,SRIR,SRMST,SRCV)=0,SRSC=$P(SRO(0),"^",4),SRAO=$P(SRO(0),"^",5),SRIR=$P(SRO(0),"^",6),SREC=$P(SRO(0),"^",7),SRMST=$P(SRO(0),"^",8),SRHNC=$P(SRO(0),"^",9),SRCV=$P(SRO(0),"^",10)
"RTN","SROPCEP",58,0)
 Q
"RTN","SROPCEP",59,0)
PCE ; set up call to PCE
"RTN","SROPCEP",60,0)
 N SRI,SRJ,SRCODE,SROTH D TMP
"RTN","SROPCEP",61,0)
D2PCE ;
"RTN","SROPCEP",62,0)
 D FM1 S SRV=$$DATA2PCE^PXAPI("^TMP(""SRPXAPI"",$J)",SRPKG,SRS,.SRVSIT) D FM2
"RTN","SROPCEP",63,0)
 I SRVSIT D FM1 K DA,DIE,DR S DA=SRTN,DIE=130,DR=".015////"_SRVSIT D ^DIE K DA,DIE,DR D FM2
"RTN","SROPCEP",64,0)
 K ^TMP("SRPXAPI",$J),SRVSIT
"RTN","SROPCEP",65,0)
 Q
"RTN","SROPCEP",66,0)
TMP ; set up ^TMP global array
"RTN","SROPCEP",67,0)
ENC S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"ENC D/T")=SRDATE
"RTN","SROPCEP",68,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"PATIENT")=DFN
"RTN","SROPCEP",69,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"HOS LOC")=SRLOC
"RTN","SROPCEP",70,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"CHECKOUT D/T")=SRCHK
"RTN","SROPCEP",71,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"SERVICE CATEGORY")="S"
"RTN","SROPCEP",72,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"ENCOUNTER TYPE")="P"
"RTN","SROPCEP",73,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"APPT")=9
"RTN","SROPCEP",74,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"SC")=SRSC
"RTN","SROPCEP",75,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"AO")=SRAO
"RTN","SROPCEP",76,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"IR")=SRIR
"RTN","SROPCEP",77,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"EC")=SREC
"RTN","SROPCEP",78,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"MST")=SRMST
"RTN","SROPCEP",79,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"HNC")=SRHNC
"RTN","SROPCEP",80,0)
 S ^TMP("SRPXAPI",$J,"ENCOUNTER",1,"CV")=SRCV
"RTN","SROPCEP",81,0)
PROC S SRI=1,SRCODE=SRCPT D PMOD,CPT
"RTN","SROPCEP",82,0)
 S SROTH=0 F  S SROTH=$O(^SRO(136,SRTN,3,SROTH)) Q:'SROTH  S SRCODE=$P($G(^SRO(136,SRTN,3,SROTH,0)),"^") I SRCODE S SRI=SRI+1 D OMOD,CPT
"RTN","SROPCEP",83,0)
PROV S ^TMP("SRPXAPI",$J,"PROVIDER",1,"NAME")=SRPROV
"RTN","SROPCEP",84,0)
 S ^TMP("SRPXAPI",$J,"PROVIDER",1,"PRIMARY")=1
"RTN","SROPCEP",85,0)
 I 'SRNON S ^TMP("SRPXAPI",$J,"PROVIDER",1,"COMMENT")="Surgeon"
"RTN","SROPCEP",86,0)
 I SRPROV=SRATT!'SRATT S ^TMP("SRPXAPI",$J,"PROVIDER",1,"ATTENDING")=1 G DIAG
"RTN","SROPCEP",87,0)
 I 'SRATT G DIAG
"RTN","SROPCEP",88,0)
 S ^TMP("SRPXAPI",$J,"PROVIDER",2,"NAME")=SRATT
"RTN","SROPCEP",89,0)
 S ^TMP("SRPXAPI",$J,"PROVIDER",2,"ATTENDING")=1
"RTN","SROPCEP",90,0)
 S ^TMP("SRPXAPI",$J,"PROVIDER",2,"PRIMARY")=0
"RTN","SROPCEP",91,0)
 I 'SRNON S ^TMP("SRPXAPI",$J,"PROVIDER",2,"COMMENT")="Attending Surgeon"
"RTN","SROPCEP",92,0)
DIAG S SRI=1,SRDX=SRDIAG D DX
"RTN","SROPCEP",93,0)
 S SRD=0 F  S SRD=$O(^SRO(136,SRTN,4,SRD)) Q:'SRD  S SRDX=$P(^SRO(136,SRTN,4,SRD,0),"^") I SRDX D DX
"RTN","SROPCEP",94,0)
 I 'SRDXF,SRODIAG D
"RTN","SROPCEP",95,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"DIAGNOSIS")=SRODIAG
"RTN","SROPCEP",96,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"ORD/RES")="O"
"RTN","SROPCEP",97,0)
 Q
"RTN","SROPCEP",98,0)
DX S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"DIAGNOSIS")=SRDX
"RTN","SROPCEP",99,0)
 I SRI=1 D
"RTN","SROPCEP",100,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PRIMARY")=1
"RTN","SROPCEP",101,0)
 .I SRDXF S ^TMP("SRPXAPI",$J,"DX/PL",1,"ORD/RES")="OR"
"RTN","SROPCEP",102,0)
 .I 'SRDXF S ^TMP("SRPXAPI",$J,"DX/PL",1,"ORD/RES")="R"
"RTN","SROPCEP",103,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL SC")=SRSC
"RTN","SROPCEP",104,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL AO")=SRAO
"RTN","SROPCEP",105,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL IR")=SRIR
"RTN","SROPCEP",106,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL EC")=SREC
"RTN","SROPCEP",107,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL MST")=SRMST
"RTN","SROPCEP",108,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL HNC")=SRHNC
"RTN","SROPCEP",109,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",1,"PL CV")=SRCV
"RTN","SROPCEP",110,0)
 I SRI'=1 D
"RTN","SROPCEP",111,0)
 .S SR(4)=$G(^SRO(136,SRTN,4,SRD,0))
"RTN","SROPCEP",112,0)
 .S (SRPLSC,SRPLAO,SRPLIR,SRPLEC,SRPLMST,SRPLHNC,SRPLCV)=0,SRPLSC=$P(SR(4),"^",2),SRPLAO=$P(SR(4),"^",3),SRPLIR=$P(SR(4),"^",4),SRPLMST=$P(SR(4),"^",5),SRPLHNC=$P(SR(4),"^",6),SRPLEC=$P(SR(4),"^",7),SRPLCV=$P(SR(4),"^",8)
"RTN","SROPCEP",113,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"ORD/RES")="R"
"RTN","SROPCEP",114,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL SC")=SRPLSC
"RTN","SROPCEP",115,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL AO")=SRPLAO
"RTN","SROPCEP",116,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL IR")=SRPLIR
"RTN","SROPCEP",117,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL EC")=SRPLEC
"RTN","SROPCEP",118,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL MST")=SRPLMST
"RTN","SROPCEP",119,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL HNC")=SRPLHNC
"RTN","SROPCEP",120,0)
 .S ^TMP("SRPXAPI",$J,"DX/PL",SRI,"PL CV")=SRPLCV
"RTN","SROPCEP",121,0)
 S SRI=SRI+1
"RTN","SROPCEP",122,0)
 Q
"RTN","SROPCEP",123,0)
CPT S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"ENC PROVIDER")=SRPROV
"RTN","SROPCEP",124,0)
 S:SRRPROV'="" ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"ORD PROVIDER")=SRRPROV
"RTN","SROPCEP",125,0)
 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"EVENT D/T")=SRDATE
"RTN","SROPCEP",126,0)
 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"PROCEDURE")=SRCODE
"RTN","SROPCEP",127,0)
 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"QTY")=1
"RTN","SROPCEP",128,0)
 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"COMMENT")=$S(SRI=1:"Principal Procedure",1:"Other Procedure")
"RTN","SROPCEP",129,0)
 I SRI=1 D
"RTN","SROPCEP",130,0)
 .S SRCNT=1,SRX=0 F  S SRX=$O(^SRO(136,SRTN,2,SRX)) Q:'SRX  D
"RTN","SROPCEP",131,0)
 ..S SRADX=$P(^SRO(136,SRTN,2,SRX,0),"^")
"RTN","SROPCEP",132,0)
 ..I SRCNT=1 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS")=SRADX
"RTN","SROPCEP",133,0)
 ..I SRCNT=2 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS 2")=SRADX
"RTN","SROPCEP",134,0)
 ..I SRCNT=3 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS 3")=SRADX
"RTN","SROPCEP",135,0)
 ..I SRCNT=4 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS 4")=SRADX
"RTN","SROPCEP",136,0)
 ..I SRCNT=5 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS 5")=SRADX
"RTN","SROPCEP",137,0)
 ..I SRCNT=6 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS 6")=SRADX
"RTN","SROPCEP",138,0)
 ..I SRCNT=7 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS 7")=SRADX
"RTN","SROPCEP",139,0)
 ..I SRCNT=8 S ^TMP("SRPXAPI",$J,"PROCEDURE",1,"DIAGNOSIS 8")=SRADX
"RTN","SROPCEP",140,0)
 ..S SRCNT=SRCNT+1
"RTN","SROPCEP",141,0)
 I SRI'=1 D
"RTN","SROPCEP",142,0)
 .S SRCNT=1,SRX=0 F  S SRX=$O(^SRO(136,SRTN,3,SROTH,2,SRX)) Q:'SRX  D
"RTN","SROPCEP",143,0)
 ..S SRADX=$P(^SRO(136,SRTN,3,SROTH,2,SRX,0),"^")
"RTN","SROPCEP",144,0)
 ..I SRCNT=1 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS")=SRADX
"RTN","SROPCEP",145,0)
 ..I SRCNT=2 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS 2")=SRADX
"RTN","SROPCEP",146,0)
 ..I SRCNT=3 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS 3")=SRADX
"RTN","SROPCEP",147,0)
 ..I SRCNT=4 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS 4")=SRADX
"RTN","SROPCEP",148,0)
 ..I SRCNT=5 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS 5")=SRADX
"RTN","SROPCEP",149,0)
 ..I SRCNT=6 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS 6")=SRADX
"RTN","SROPCEP",150,0)
 ..I SRCNT=7 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS 7")=SRADX
"RTN","SROPCEP",151,0)
 ..I SRCNT=8 S ^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"DIAGNOSIS 8")=SRADX
"RTN","SROPCEP",152,0)
 ..S SRCNT=SRCNT+1
"RTN","SROPCEP",153,0)
 Q
"RTN","SROPCEP",154,0)
PMOD ; get modifiers for principal CPT code
"RTN","SROPCEP",155,0)
 N SRM,SRMOD,X
"RTN","SROPCEP",156,0)
 S SRM=0 F  S SRM=$O(^SRO(136,SRTN,1,SRM)) Q:'SRM  S X=$P(^SRO(136,SRTN,1,SRM,0),"^"),SRMOD=$P($$MOD^ICPTMOD(X,"I"),"^",2),^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"MODIFIERS",SRMOD)=""
"RTN","SROPCEP",157,0)
 Q
"RTN","SROPCEP",158,0)
OMOD ; get modifiers for other CPT codes
"RTN","SROPCEP",159,0)
 N SRM,SRMOD,X
"RTN","SROPCEP",160,0)
 S SRM=0 F  S SRM=$O(^SRO(136,SRTN,3,SROTH,1,SRM)) Q:'SRM  S X=$P(^SRO(136,SRTN,3,SROTH,1,SRM,0),"^"),SRMOD=$P($$MOD^ICPTMOD(X,"I"),"^",2),^TMP("SRPXAPI",$J,"PROCEDURE",SRI,"MODIFIERS",SRMOD)=""
"RTN","SROPCEP",161,0)
 Q
"RTN","SROPCEP",162,0)
FM1 M SRDA=DA,SRDP=DP,SRDC=DC,SRDI=DI,SRDL=DL,SRDIE=DIE,SRDG=DG,SRDM=DM,SRDR=DR,SRDH=DH,SRDK=DK,SRD0=D0,SRDDER=DDER,SRDG=DG,SRDIC=DIC,SRDIC1=DIC1,SRDICRRE=DICRREC
"RTN","SROPCEP",163,0)
 M SRDIEDA=DIEDA,SRDIG=DIG,SRDIH=DIH,SRDIIENS=DIIENS,SRDISL=DISL,SRDISYS=DISYS,SRDIU=DIU,SRDIV=DIV,SRDIWT=DIWT,SRDN=DN,SRDQ=DQ,SRDX=DX,SRDY=DY
"RTN","SROPCEP",164,0)
FM2 M DA=SRDA,DP=SRDP,DC=SRDC,DI=SRDI,DL=SRDL,DIE=SRDIE,DG=SRDG,DM=SRDM,DR=SRDR,DH=SRDH,DK=SRDK,D0=SRD0,DDER=SRDDER,DG=SRDG,DIC=SRDIC,DIC1=SRDIC1,DICRREC=SRDICRRE
"RTN","SROPCEP",165,0)
 M DIEDA=SRDIEDA,DIG=SRDIG,DIH=SRDIH,DIIENS=SRDIIENS,DISL=SRDISL,DISYS=SRDISYS,DIU=SRDIU,DIV=SRDIV,DIWT=SRDIWT,DN=SRDN,DQ=SRDQ,DX=SRDX,DY=SRDY
"RTN","SROPCEU0")
0^78^B24720463^B23740020
"RTN","SROPCEU0",1,0)
SROPCEU0 ;BIR/ADM - UNTRANSMITTED OUTPATIENT ENCOUNTERS (CONT.) ;06/21/05
"RTN","SROPCEU0",2,0)
 ;;3.0; Surgery ;**69,77,50,142**;24 Jun 93
"RTN","SROPCEU0",3,0)
 ;
"RTN","SROPCEU0",4,0)
 ; Reference to ^ECC(723 supported by DBIA #205
"RTN","SROPCEU0",5,0)
 ;
"RTN","SROPCEU0",6,0)
 U IO S (SRNEW,SRSOUT,SRSUB)=0,(SRHDR,SRPAGE)=1,Y=SDATE X ^DD("DD") S STARTDT=Y,Y=EDATE X ^DD("DD") S ENDATE=Y
"RTN","SROPCEU0",7,0)
 S SRRPT="Outpatient Surgery Encounters Not Transmitted to NPCD"
"RTN","SROPCEU0",8,0)
 S SRTITLE="For Completed "_$S(SRFLG=1:"O.R. Surgical Procedures",SRFLG=2:"Non-O.R. Procedures",1:"O.R. Surgical and Non-O.R. Procedures")
"RTN","SROPCEU0",9,0)
 S SRFRTO="From: "_STARTDT_"  To: "_ENDATE,SRINST=SRSITE("SITE") D NOW^%DTC S Y=$E(%,1,12) X ^DD("DD") S SRPRINT="Report Printed: "_Y
"RTN","SROPCEU0",10,0)
 I SRSORT G S1
"RTN","SROPCEU0",11,0)
 D HDR I SRSEL=1 S SRTN=0 F  S SRTN=$O(^TMP("SR69",$J,SRTN)) Q:'SRTN!SRSOUT  D CASE
"RTN","SROPCEU0",12,0)
 Q:SRSOUT  D:$Y+10>IOSL PAGE Q:SRSOUT
"RTN","SROPCEU0",13,0)
 W !!,$S(SRSPEC:"SPECIALTY: "_SRSPECN,1:" * * *  ALL SPECIALTIES  * * *")
"RTN","SROPCEU0",14,0)
TOT W !!,"      Total with NO status: ",$J(SRCNT(0),5)
"RTN","SROPCEU0",15,0)
 W !,"      Total with NON-COUNT: ",$J(SRCNT(12),5)
"RTN","SROPCEU0",16,0)
 W !,"Total with ACTION REQUIRED: ",$J(SRCNT(14),5),!,?28,"-----"
"RTN","SROPCEU0",17,0)
 W !,"    Total cases identified: ",$J(SRCNT,5) S SRSUB=0
"RTN","SROPCEU0",18,0)
 Q
"RTN","SROPCEU0",19,0)
S1 S (SRSP,SRSPECN)=0 F  S SRSPECN=$O(^TMP("SRSP",$J,SRSPECN)) Q:SRSPECN=""!SRSOUT  S SRNEW=1 D PAGE Q:SRSOUT  D
"RTN","SROPCEU0",20,0)
 .I SRSEL=1 S SRTN=0 F  S SRTN=$O(^TMP("SRSP",$J,SRSPECN,SRTN)) Q:'SRTN!SRSOUT  D CASE
"RTN","SROPCEU0",21,0)
 .Q:SRSOUT  S X=^TMP("SRSP",$J,SRSPECN,0),SRCNT(0)=$P(X,"^"),SRCNT(12)=$P(X,"^",2),SRCNT(14)=$P(X,"^",3),SRCNT=$P(X,"^",4),SRSUB=1 D:$Y+10>IOSL PAGE Q:SRSOUT
"RTN","SROPCEU0",22,0)
 .D TOT
"RTN","SROPCEU0",23,0)
 Q:SRSOUT  S SRSUB=1 D PAGE Q:SRSOUT  W !!," * * *  COMBINED TOTALS FOR ALL SPECIALTIES  * * *" S X=^TMP("SRSP",$J,0),SRCNT(0)=$P(X,"^"),SRCNT(12)=$P(X,"^",2),SRCNT(14)=$P(X,"^",3),SRCNT=$P(X,"^",4) D TOT
"RTN","SROPCEU0",24,0)
 Q
"RTN","SROPCEU0",25,0)
SUBHD W !!,">>> "_$S($P(SRSPECN,";;")=1:"SURGICAL",1:"MEDICAL")_" SPECIALTY: "_$P(SRSPECN,";;",2)_$S('SRNEW:"  * * continued * *",1:"")
"RTN","SROPCEU0",26,0)
 S SRNEW=0 I SRSORT W !
"RTN","SROPCEU0",27,0)
 Q
"RTN","SROPCEU0",28,0)
CASE ; print case info
"RTN","SROPCEU0",29,0)
 D:$Y+6>IOSL PAGE Q:SRSOUT
"RTN","SROPCEU0",30,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SROPCEU0",31,0)
 S SRSS=$S('SRNON:$P(^SRF(SRTN,0),"^",4),1:$P(^SRF(SRTN,"NON"),"^",8)),SRSSNM=$S('SRNON:$P(^SRO(137.45,SRSS,0),"^"),1:$P(^ECC(723,SRSS,0),"^"))
"RTN","SROPCEU0",32,0)
 S SRSTATUS=$S('SRSORT:^TMP("SR69",$J,SRTN),1:^TMP("SRSP",$J,SRSPECN,SRTN)) I SRSTATUS="" S SRSTATUS="<NONE>"
"RTN","SROPCEU0",33,0)
 I SRSORT D CLIN
"RTN","SROPCEU0",34,0)
 D DEM,PROC W !,SRSDATE,?23,SRTN,?38,$S(SRSORT:$E(SRLOC,1,20),1:$E(SRSSNM,1,20)),?61,$S(IOM<82:$E(SRSTATUS,1,19),1:SRSTATUS)
"RTN","SROPCEU0",35,0)
 W !,SRSNM,?23,SRPROC(1),!,SRSSN_"  ("_SRAGE_")" W:$D(SRPROC(2)) ?23,SRPROC(2) W:(SRFLG=3)&SRNON !,"NON-O.R." I $D(SRPROC(3)) W:'SRNON ! W ?23,SRPROC(3)
"RTN","SROPCEU0",36,0)
 W ! F I=1:1:IOM W "-"
"RTN","SROPCEU0",37,0)
 Q
"RTN","SROPCEU0",38,0)
DEM ; get patient dempgraphic information
"RTN","SROPCEU0",39,0)
 S SR(0)=^SRF(SRTN,0),DFN=$P(SR(0),"^") D DEM^VADPT S SRSNM=VADM(1),SRSSN=VA("PID"),(SRSDT,Y)=$P(SR(0),"^",9) X ^DD("DD") S SRSDATE=Y,X1=$E(SRSDT,1,7),X2=$P(VADM(3),"^"),SRAGE=$E(X1,1,3)-$E(X2,1,3)-($E(X1,4,7)<$E(X2,4,7))
"RTN","SROPCEU0",40,0)
 I $L(SRSNM)>21 S SRSNM=$P(VADM(1),",")_","_$E($P(VADM(1),"^",2))_"."
"RTN","SROPCEU0",41,0)
 Q
"RTN","SROPCEU0",42,0)
PROC ; get principal procedure
"RTN","SROPCEU0",43,0)
 K SRPROC S X=$P(^SRF(SRTN,"OP"),"^") I $L(X)<58 S SRPROC(1)=X
"RTN","SROPCEU0",44,0)
 I $L(X)>57 S K=1 F  D  I $L(X)<58 S SRPROC(K)=X Q
"RTN","SROPCEU0",45,0)
 .F I=0:1:56 S J=57-I,Y=$E(X,J) I Y=" " S SRPROC(K)=$E(X,1,J-1),X=$E(X,J+1,$L(X)) S K=K+1 Q
"RTN","SROPCEU0",46,0)
 Q
"RTN","SROPCEU0",47,0)
CLIN ; get associated clinic
"RTN","SROPCEU0",48,0)
 S X=$P(^SRF(SRTN,0),"^",21) I X S SRLOC=X
"RTN","SROPCEU0",49,0)
 I 'SRNON,'X S X=$P(^SRO(137.45,SRSS,0),"^",5) S:X SRLOC=X I 'X S Y=$P(^SRF(SRTN,0),"^",2) I Y S X=$P(^SRS(Y,0),"^") I X S SRLOC=X
"RTN","SROPCEU0",50,0)
 I SRNON,'X S X=$P(^SRF(SRTN,"NON"),"^",2) I X S SRLOC=X
"RTN","SROPCEU0",51,0)
 S SRLOC=$S(SRLOC:$P(^SC(SRLOC,0),"^"),1:"<NOT ENTERED>")
"RTN","SROPCEU0",52,0)
 Q
"RTN","SROPCEU0",53,0)
PAGE I $E(IOST)="P"!SRHDR D HDR Q
"RTN","SROPCEU0",54,0)
 W ! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROPCEU0",55,0)
HDR ;  print heading
"RTN","SROPCEU0",56,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROPCEU0",57,0)
 W:$Y @IOF W:$E(IOST)="P" !,?(IOM-$L(SRINST)\2),SRINST W !,?(IOM-$L(SRRPT)\2),SRRPT,?(IOM-10),$J("Page "_SRPAGE,9),!,?(IOM-$L(SRTITLE)\2),SRTITLE,!,?(IOM-$L(SRFRTO)\2),SRFRTO
"RTN","SROPCEU0",58,0)
 I $E(IOST)="P" W !,?(IOM-$L(SRPRINT)\2),SRPRINT W:SRSUB !
"RTN","SROPCEU0",59,0)
 I SRSEL=1,'SRSUB W !!,"DATE OF "_$S(SRFLG=1:"OPERATION",SRFLG=2:"PROCEDURE",1:"OP/PROCEDURE"),?23,"CASE #",?38,$S(SRSORT:"CLINIC",1:"SPECIALTY"),?61,"SCHED STATUS",!,"PATIENT NAME",?23,"PRINCIPAL PROCEDURE",!,"PATIENT ID  (AGE)"
"RTN","SROPCEU0",60,0)
 S (SRHDR,SRSUB)=0,SRPAGE=SRPAGE+1 W ! F I=1:1:IOM W "="
"RTN","SROPCEU0",61,0)
 I SRSORT D:SRSPECN'="" SUBHD S SRNEW=0
"RTN","SROPCEU0",62,0)
 Q
"RTN","SROPCEU0",63,0)
REFILE ; re-file cases in PCE
"RTN","SROPCEU0",64,0)
 N SRVISIT,SRVSIT K DIC S DIC=9.4,DIC(0)="XM",X="SURGERY" D ^DIC K DIC Q:Y=-1  S SRPKG=+Y
"RTN","SROPCEU0",65,0)
 S (SRK,SRTN)=0,SRS="SURGERY DATA",SRFILE=1
"RTN","SROPCEU0",66,0)
 F  S SRTN=$O(^TMP("SR69",$J,SRTN)) Q:'SRTN  D
"RTN","SROPCEU0",67,0)
 .S (SRVISIT,SRVSIT)=$P(^SRF(SRTN,0),"^",15),SRV=$$DELVFILE^PXAPI("PRV^POV^CPT",SRVSIT)
"RTN","SROPCEU0",68,0)
 .D UTIL^SROPCEP I 'SRK D
"RTN","SROPCEU0",69,0)
 ..D TMP^SROPCEP
"RTN","SROPCEU0",70,0)
 ..S SRVSIT=SRVISIT,SRV=$$DATA2PCE^PXAPI("^TMP(""SRPXAPI"",$J)",SRPKG,SRS,SRVSIT)
"RTN","SROPCEU0",71,0)
 ..K ^TMP("SRPXAPI",$J)
"RTN","SROPCEU0",72,0)
 Q
"RTN","SROPCEX")
0^79^B5206173^B9882023
"RTN","SROPCEX",1,0)
SROPCEX ;BIR/ADM - CROSS REFERENCE LOGIC ;01/11/06
"RTN","SROPCEX",2,0)
 ;;3.0; Surgery ;**58,62,69,86,119,142**;24 Jun 93
"RTN","SROPCEX",3,0)
 Q
"RTN","SROPCEX",4,0)
APCE ; send case data to PCE
"RTN","SROPCEX",5,0)
 N SRCASE,SRDIV,SRCLINIC,SRPDATE,SRQ,SRSITE,SRSR,SRWC,SRX,SRZ S SRQ=0 S:$D(SRTN) SRCASE=SRTN I '$D(SRCASE) S SRCASE=$S($G(DA(1)):DA(1),1:DA)
"RTN","SROPCEX",6,0)
 Q:($P($G(^SRF(SRCASE,30)),"^"))!($P($G(^SRF(SRCASE,37)),"^"))
"RTN","SROPCEX",7,0)
 S SRSR="",SRDIV=$P($G(^SRF(SRCASE,8)),"^") I SRDIV D  Q:SRQ
"RTN","SROPCEX",8,0)
 .S SRSITE=$O(^SRO(133,"B",SRDIV,0)),SRWC=$P(^SRO(133,SRSITE,0),"^",15),SRSR=$P(^SRO(133,SRSITE,0),"^",19)
"RTN","SROPCEX",9,0)
 .S SRPDATE=$P(^SRO(133,SRSITE,0),"^",17) I SRPDATE,$P(^SRF(SRCASE,0),"^",9)<SRPDATE S SRQ=1 Q
"RTN","SROPCEX",10,0)
 .I $P(^SRO(133,SRSITE,0),"^",16),'$P(^SRF(SRCASE,0),"^",20) S SRQ=1 Q
"RTN","SROPCEX",11,0)
 .Q:SRWC="A"  I "N"[SRWC S SRQ=1 Q
"RTN","SROPCEX",12,0)
 S SRCLINIC=$P(^SRF(SRCASE,0),"^",21)
"RTN","SROPCEX",13,0)
 S SRX=$G(^SRF(SRCASE,"NON")) I $P(SRX,"^")="Y" Q:'$P(SRX,"^",4)!'$P(SRX,"^",5)!'$P(SRX,"^",6)!((SRSR'=0)&('$P(SRX,"^",7)))  S:SRCLINIC="" SRCLINIC=$P(SRX,"^",2) Q:SRCLINIC=""  Q:'$$CLINIC^SROUTL(SRCLINIC,SRCASE)  G SET
"RTN","SROPCEX",14,0)
 I $P(^SRF(SRCASE,0),"^",4),SRCLINIC="" S SRCLINIC=$P(^SRO(137.45,$P(^SRF(SRCASE,0),"^",4),0),"^",5)
"RTN","SROPCEX",15,0)
 I SRCLINIC="",$P(^SRF(SRCASE,0),"^",2) S SRCLINIC=$P(^SRS($P(^SRF(SRCASE,0),"^",2),0),"^")
"RTN","SROPCEX",16,0)
 Q:SRCLINIC=""  I '$$CLINIC^SROUTL(SRCLINIC,SRCASE) Q
"RTN","SROPCEX",17,0)
 S SRX=$G(^SRF(SRCASE,.2)) Q:'$P(SRX,"^",10)!'$P(SRX,"^",12)
"RTN","SROPCEX",18,0)
 S SRX=$G(^SRF(SRCASE,.1)) Q:'$P(SRX,"^",4)  I SRSR'=0,'$P(SRX,"^",13) Q
"RTN","SROPCEX",19,0)
 Q:SRQ
"RTN","SROPCEX",20,0)
SET S SRZ=$P($G(^SRO(136,SRCASE,10)),"^") I SRZ S SRTN=SRCASE D START^SROPCEP
"RTN","SROPCEX",21,0)
 Q
"RTN","SROPDEL")
0^94^B14289565^B13352187
"RTN","SROPDEL",1,0)
SROPDEL ;BIR/MAM - DELETE CASE ;06/14/05
"RTN","SROPDEL",2,0)
 ;;3.0; Surgery ;**67,100,142**;24 Jun 93
"RTN","SROPDEL",3,0)
DEL W !!,"Are you sure that you want to delete this case ?  NO//  " R SRYN:DTIME I '$T!(SRYN["^") S SRSOUT=1 Q
"RTN","SROPDEL",4,0)
 S:SRYN="" SRYN="N" S SRYN=$E(SRYN)
"RTN","SROPDEL",5,0)
 I "YyNn"'[SRYN W !!,"Enter 'YES' to delete this surgical case from your records.  If you have",!,"selected this option inadvertantly and do not want to remove this case,",!,"enter RETURN or 'NO'." G DEL
"RTN","SROPDEL",6,0)
 I "Yy"'[SRYN S SRSOUT=1 Q
"RTN","SROPDEL",7,0)
 S SRCC="",SROPCOM="Operation..."
"RTN","SROPDEL",8,0)
 I $P($G(^SRF(SRTN,.2)),"^",12)'="" W !!,"This case has been completed and must remain in the file for your records." D RET Q
"RTN","SROPDEL",9,0)
 I $D(^SRF(SRTN,"LOCK")),^("LOCK")=1 W !!,"This case has been verified and locked.  It cannot be deleted unless unlocked",!,"by your Chief of Surgery, or someone appointed by him." D RET Q
"RTN","SROPDEL",10,0)
 I $P($G(^SRF(SRTN,30)),"^") S SROPCAN=1
"RTN","SROPDEL",11,0)
 I $P($G(^SRF(SRTN,31)),"^",8)'="" S SROPCAN=1
"RTN","SROPDEL",12,0)
 I $D(SROPCAN) W !!,"This case has been cancelled and must remain in the file for your records." D RET Q
"RTN","SROPDEL",13,0)
 I $P($G(^SRF(SRTN,31)),"^",4) W !!,"You cannot delete a procedure that has already been scheduled.  If you",!,"would like to cancel this procedure, use the option 'Cancel Scheduled ",!,"Operation'." D RET Q
"RTN","SROPDEL",14,0)
 S Y=$G(^SRF(SRTN,"TIU")) I $P(Y,"^")!$P(Y,"^",2)!$P(Y,"^",4) W !!,"You cannot delete a procedure that has one or more operative documents." D RET Q
"RTN","SROPDEL",15,0)
KILL ; delete entry
"RTN","SROPDEL",16,0)
 Q:'$$LOCK^SROUTL(SRTN)
"RTN","SROPDEL",17,0)
 S SRCONC=$P($G(^SRF(SRTN,"CON")),"^") I SRCONC K ^SRF(SRCONC,"CON")
"RTN","SROPDEL",18,0)
 D DEL^SROERR
"RTN","SROPDEL",19,0)
 W !!,"  Deleting "_SRCC_SROPCOM I $P($G(^SRF(SRTN,.2)),"^",10) S DIE=130,DA=SRTN,DR=".205///@" D ^DIE K DA
"RTN","SROPDEL",20,0)
 S SRX=$P($G(^SRF(SRTN,0)),"^",15) I SRX S SRVSIT=SRX D DEL^SROPCEP ; delete visit
"RTN","SROPDEL",21,0)
 I $D(^SRO(136,SRTN,0)) S DA=SRTN,DIK="^SRO(136," D ^DIK K DA,DIK ; remove entry in file 136
"RTN","SROPDEL",22,0)
 S (DA,SRTN1)=SRTN,DIK="^SRF(" D ^DIK,UNLOCK^SROUTL(SRTN) K DA,DIK,SRTN
"RTN","SROPDEL",23,0)
 I SRCONC D UNLOCK^SROUTL(SRCONC),CON I SRCONC D KILL
"RTN","SROPDEL",24,0)
 Q
"RTN","SROPDEL",25,0)
CON ; delete concurrent case ?
"RTN","SROPDEL",26,0)
 S SRTN=SRCONC W !!,"There is a concurrent procedure associated with this case.  Do you want to",!,"delete it also ?  YES//  " R SRYN:DTIME I '$T!(SRYN["^") S SRCONC=0 Q
"RTN","SROPDEL",27,0)
 S SRYN=$E(SRYN) S:SRYN="" SRYN="Y"
"RTN","SROPDEL",28,0)
 I "YyNn"'[SRYN W !!,"Enter RETURN to delete this concurrent case.  If you are not sure whether to",!,"delete the other case, enter 'NO'.  It can be removed later if necessary." G CON
"RTN","SROPDEL",29,0)
 I "Nn"[SRYN S SRCONC=0
"RTN","SROPDEL",30,0)
 Q
"RTN","SROPDEL",31,0)
RET W !!,"Press RETURN to continue  " R X:DTIME K SRTN
"RTN","SROPDEL",32,0)
 Q
"RTN","SROPS1")
0^105^B14523964^B14216513
"RTN","SROPS1",1,0)
SROPS1 ;BIR/ADM - SELECT CASE (INCLUDING NON-OR) ;08/23/05
"RTN","SROPS1",2,0)
 ;;3.0; Surgery ;**100,142**;24 Jun 93
"RTN","SROPS1",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROPS1",4,0)
 ;**         controlled procedure.  Local modifications to this routine
"RTN","SROPS1",5,0)
 ;**         are prohibited.
"RTN","SROPS1",6,0)
 ;
"RTN","SROPS1",7,0)
 W ! S SRSOUT=0 K DIC S DIC("A")="Select Patient: ",DIC=2,DIC(0)="QEAM" D ^DIC K DIC I Y<0 S SRSOUT=1 G END
"RTN","SROPS1",8,0)
 S DFN=+Y D DEM^VADPT D HDR
"RTN","SROPS1",9,0)
ADT S (SRDT,CNT,SRBACK)=0 F  S SRDT=$O(^SRF("ADT",DFN,SRDT)) Q:'SRDT!SRSOUT!$D(SRTN)!SRBACK  S SROP=0 F  S SROP=$O(^SRF("ADT",DFN,SRDT,SROP)) Q:'SROP!$D(SRTN)!SRSOUT!SRBACK  D LIST
"RTN","SROPS1",10,0)
 G:SRBACK ADT Q:$D(SRTN)
"RTN","SROPS1",11,0)
 I '$D(SRCASE(1)) W !!,"There are no cases entered for "_VADM(1)_".",!!,"Press RETURN to continue  " R X:DTIME G END
"RTN","SROPS1",12,0)
OPT S SRSOUT=0 W !!,"Select Case: " R X:DTIME I '$T!("^"[X) S SRSOUT=1 G END
"RTN","SROPS1",13,0)
 I '$D(SRCASE(X)) W !!,"Enter the number of the desired operation." G OPT
"RTN","SROPS1",14,0)
 S SRTN=+SRCASE(X)
"RTN","SROPS1",15,0)
 Q
"RTN","SROPS1",16,0)
END D ^SRSKILL K SRTN W @IOF
"RTN","SROPS1",17,0)
 Q
"RTN","SROPS1",18,0)
LIST ; list cases
"RTN","SROPS1",19,0)
 S SRNON=0 I $P($G(^SRF(SROP,"NON")),"^")="Y" S SRNON=1
"RTN","SROPS1",20,0)
 I SRNON,('$P(^SRF(SROP,"NON"),"^",4)!'$P(^SRF(SROP,"NON"),"^",5)) Q
"RTN","SROPS1",21,0)
 I 'SRNON,('$P($G(^SRF(SROP,.2)),"^",10)!'$P($G(^SRF(SROP,.2)),"^",12)) Q
"RTN","SROPS1",22,0)
 I $D(^SRF(SROP,37)),$P(^(37),"^") Q
"RTN","SROPS1",23,0)
 I $Y+5>IOSL S SRBACK=0 D SEL Q:$D(SRTN)!(SRSOUT)  D HDR Q:SRBACK
"RTN","SROPS1",24,0)
 S CNT=CNT+1,SRSDATE=$P(^SRF(SROP,0),"^",9) W !,CNT_". "
"RTN","SROPS1",25,0)
CASE W $E(SRSDATE,4,5)_"-"_$E(SRSDATE,6,7)_"-"_$E(SRSDATE,2,3)
"RTN","SROPS1",26,0)
 S SROPER=$P(^SRF(SROP,"OP"),"^") I $O(^SRF(SROP,13,0)) S SROTHER=0 F I=0:0 S SROTHER=$O(^SRF(SROP,13,SROTHER)) Q:'SROTHER  D OTHER
"RTN","SROPS1",27,0)
 I SRNON S SROPER=SROPER_" (NON-OR PROCEDURE)"
"RTN","SROPS1",28,0)
 D:'SRNON ^SROP1 D LOCK K SROPS,MM,MMM S:$L(SROPER)<65 SROPS(1)=SROPER I $L(SROPER)>64 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SROPS1",29,0)
 W ?14,SROPS(1) I $D(SROPS(2)) W !,?14,SROPS(2) I $D(SROPS(3)) W !,?14,SROPS(3) W:$D(SROPS(4)) !,?14,SROPS(4)
"RTN","SROPS1",30,0)
 W ! S SRCASE(CNT)=SROP_"^"_SRDT
"RTN","SROPS1",31,0)
 Q
"RTN","SROPS1",32,0)
SEL ; select case
"RTN","SROPS1",33,0)
 W ! K DIR S DIR("A")="Select case or enter RETURN to continue listing cases: ",DIR(0)="FOA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROPS1",34,0)
 I X="" Q
"RTN","SROPS1",35,0)
 I '$D(SRCASE(X)) W ! S DIR("A",1)="Please enter the number corresponding to the case you want to edit.",DIR("A",2)="If the case desired does not appear, enter RETURN to continue listing",DIR("A",3)="additional cases."
"RTN","SROPS1",36,0)
 I '$D(SRCASE(X)) S DIR("A",4)="",DIR("A")="Press RETURN to continue  " D ^DIR K DIR S:$D(DTOUT)!$D(DUOUT) SRSOUT=1 S SRBACK=1 Q
"RTN","SROPS1",37,0)
 S SRTN=+SRCASE(X)
"RTN","SROPS1",38,0)
 Q
"RTN","SROPS1",39,0)
LOCK ; case locked?
"RTN","SROPS1",40,0)
 I $D(SRTN),$P($G(^SRF(SRTN,"LOCK")),"^") S SROPER=SROPER_" **LOCKED**"
"RTN","SROPS1",41,0)
 Q
"RTN","SROPS1",42,0)
OTHER ; other operations
"RTN","SROPS1",43,0)
 S SRLONG=1 I $L(SROPER)+$L($P(^SRF(SROP,13,SROTHER,0),"^"))>235 S SRLONG=0,SROTHER=999,SROPERS=" ..."
"RTN","SROPS1",44,0)
 I SRLONG S SROPERS=$P(^SRF(SROP,13,SROTHER,0),"^")
"RTN","SROPS1",45,0)
 S SROPER=SROPER_$S(SROPERS=" ...":SROPERS,1:", "_SROPERS)
"RTN","SROPS1",46,0)
 Q
"RTN","SROPS1",47,0)
LOOP ; break procedure
"RTN","SROPS1",48,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<65  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SROPS1",49,0)
 Q
"RTN","SROPS1",50,0)
HDR ; print heading
"RTN","SROPS1",51,0)
 W @IOF,!,?1,VADM(1)_"   "_VA("PID") S X=$P($G(VADM(6)),"^") W:X "        * DIED "_$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)_" *" W !
"RTN","SROPS1",52,0)
 Q
"RTN","SROQ0A")
0^39^B15549352^B15364604
"RTN","SROQ0A",1,0)
SROQ0A ;BIR/ADM - QUARTERLY REPORT (CONTINUED) ;06/16/04  9:38 AM
"RTN","SROQ0A",2,0)
 ;;3.0; Surgery ;**37,38,62,70,88,103,129,142**;24 Jun 93
"RTN","SROQ0A",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQ0A",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQ0A",5,0)
 ;**         are prohibited.
"RTN","SROQ0A",6,0)
 ;
"RTN","SROQ0A",7,0)
 ; Reference to ^DGPM("APTT1" supported by DBIA #565
"RTN","SROQ0A",8,0)
 ;
"RTN","SROQ0A",9,0)
 S SRFLAG=1 D NDEX
"RTN","SROQ0A",10,0)
SUP ; look at resident supervision
"RTN","SROQ0A",11,0)
 S SRATT=$P($G(^SRF(SRTN,.1)),"^",10) I SRATT="" D RS
"RTN","SROQ0A",12,0)
 S:'$D(SRATT(SRATT)) (SRATT(SRATT),SRATT("J",SRATT),SRATT("N",SRATT))=0
"RTN","SROQ0A",13,0)
 S SRATT(SRATT)=SRATT(SRATT)+1,SRMATCH=0,SRMM=$S(SRMM="J":"J",1:"N"),SRATT(SRMM,SRATT)=SRATT(SRMM,SRATT)+1
"RTN","SROQ0A",14,0)
IDP ; invasive diagnostic?
"RTN","SROQ0A",15,0)
 D IDP^SROQIDP I SRIDP S SRINV(SRIOSTAT)=SRINV(SRIOSTAT)+1
"RTN","SROQ0A",16,0)
 I SRIOSTAT="O",SRPOC D ADM
"RTN","SROQ0A",17,0)
 Q
"RTN","SROQ0A",18,0)
NDEX ; look at procedures performed
"RTN","SROQ0A",19,0)
 S SROP="",X=$P($G(^SRO(136,SRTN,0)),"^",2) S:X SROP=$P($$CPT^ICPTCOD(X),"^",2)_";"
"RTN","SROQ0A",20,0)
 S Y=0 F  S Y=$O(^SRO(136,SRTN,3,Y)) Q:'Y  I Y S X=$P($G(^SRO(136,SRTN,3,Y,0)),"^") I X S SROP=SROP_$P($$CPT^ICPTCOD(X),"^",2)_";" I $L(SROP)>239 Q
"RTN","SROQ0A",21,0)
CHECK Q:SROP=""  F J=1:1:12 S SRMATCH=0,SRCODES=$P($T(PROC+J),";;",3) F K=1:1 Q:SRMATCH  S SRCPT=$P(SRCODES,",",K) Q:'SRCPT  I SROP[SRCPT S SRMATCH=1 D:SRFLAG ADD D:'SRFLAG IXDTH Q
"RTN","SROQ0A",22,0)
 Q
"RTN","SROQ0A",23,0)
RS ; surgical residents used?
"RTN","SROQ0A",24,0)
 N SRK,SRDIV,SRSITE S SRK=0,SRDIV=$P($G(^SRF(SRTN,8)),"^") I SRDIV S SRSITE=$O(^SRO(133,"B",SRDIV,0)),Y=$P(^SRO(133,SRSITE,0),"^",19) I Y=0 D  Q
"RTN","SROQ0A",25,0)
 .I $P(^SRF(SRTN,0),"^",9)<3040401 S SRATT=1 Q
"RTN","SROQ0A",26,0)
 .S SRATT=9 Q
"RTN","SROQ0A",27,0)
 S SRATT=99
"RTN","SROQ0A",28,0)
 Q
"RTN","SROQ0A",29,0)
ADM ; check for admission within 14 days of surgery
"RTN","SROQ0A",30,0)
 S (SRSDATE,X1)=$P($G(^SRF(SRTN,.2)),"^",12),X2=14 D C^%DTC S SR14=X
"RTN","SROQ0A",31,0)
 S SRSDATE=$O(^DGPM("APTT1",DFN,SRSDATE)) I SRSDATE,SRSDATE'>SR14 S SRADMT=SRADMT+1
"RTN","SROQ0A",32,0)
 Q
"RTN","SROQ0A",33,0)
ADD ; increment counters in ^TMP
"RTN","SROQ0A",34,0)
 F I=1,2 S SRP(I)=$P(^TMP("SRPROC",$J,J),"^",I)
"RTN","SROQ0A",35,0)
 S SRP(1)=SRP(1)+1 S:SRPOC!($O(^SRF(SRTN,10,0))) SRP(2)=SRP(2)+1
"RTN","SROQ0A",36,0)
 S ^TMP("SRPROC",$J,J)=SRP(1)_"^"_SRP(2) K SRP
"RTN","SROQ0A",37,0)
 Q
"RTN","SROQ0A",38,0)
IXDTH S ^TMP("SRDEATH",$J,DFN)=SRTN_"^"_J I SRREL="R" S ^TMP("SRP",$J,DFN,(9999999-$P(^SRF(SRTN,0),"^",9)))=J
"RTN","SROQ0A",39,0)
 Q
"RTN","SROQ0A",40,0)
IXOUT ; get procedure name for output
"RTN","SROQ0A",41,0)
 S SROP=$P($T(PROC+J),";;",2)
"RTN","SROQ0A",42,0)
 Q
"RTN","SROQ0A",43,0)
SHOW ; display list of procedures with CPT codes
"RTN","SROQ0A",44,0)
 F I=1:1:12 S X=$T(PROC+I),SRPROC=$P(X,";;",2),SRCODES=$P(X,";;",3) D
"RTN","SROQ0A",45,0)
 .I SRPROC["," W:I=7 !,?4,$P(SRPROC,",") S SRPROC=$P(SRPROC,",",2)
"RTN","SROQ0A",46,0)
 .W !,?4,SRPROC,?30,$E(SRCODES,1,48) I $L(SRCODES)>48 W !,?30,$E(SRCODES,49,96)
"RTN","SROQ0A",47,0)
 Q
"RTN","SROQ0A",48,0)
TMP ; store index procedure names in ^TMP
"RTN","SROQ0A",49,0)
 F J=1:1:12 S ^TMP("SRIP",$J,J)=$P($T(PROC+J),";;",2)
"RTN","SROQ0A",50,0)
 Q
"RTN","SROQ0A",51,0)
DRPT ; from report of deaths within 30 days
"RTN","SROQ0A",52,0)
 S SROP="",X=$P($G(^SRO(136,SRTN,0)),"^",2) S:X SROP=$P($$CPT^ICPTCOD(X),"^",2)_";"
"RTN","SROQ0A",53,0)
 S Y=0 F  S Y=$O(^SRO(136,SRTN,3,Y)) Q:'Y  I Y S X=$P($G(^SRO(136,SRTN,3,Y,0)),"^") I X S SROP=SROP_$P($$CPT^ICPTCOD(X),"^",2)_";" I $L(SROP)>239 Q
"RTN","SROQ0A",54,0)
CK1 Q:SROP=""  F J=1:1:12 S SRMATCH=0,SRCODES=$P($T(PROC+J),";;",3) F K=1:1 Q:SRMATCH  S SRCPT=$P(SRCODES,",",K) Q:'SRCPT  I SROP[SRCPT D  Q
"RTN","SROQ0A",55,0)
 .S SRMATCH=1,^TMP("SRDEATH",$J,DFN)=J,^TMP("SRNAT",$J,DFN,J)=SRTN
"RTN","SROQ0A",56,0)
 .S:SRREL="R" ^TMP("SRREL",$J,DFN,(9999999-SRSD),SRTN)=J
"RTN","SROQ0A",57,0)
 Q
"RTN","SROQ0A",58,0)
PROC ; index procedures
"RTN","SROQ0A",59,0)
P1 ;;Inguinal Hernia;;49505,49507,49520,49521,49525;;
"RTN","SROQ0A",60,0)
P2 ;;Cholecystectomy;;47600,47605,47610,47562,47563,47564;;
"RTN","SROQ0A",61,0)
P3 ;;Coronary Artery Bypass;;33510,33511,33512,33513,33514,33516,33517,33518,33519,33521,33522,33523,33533,33534,33535,33536;;
"RTN","SROQ0A",62,0)
P4 ;;Colon Resection (L & R);;44140,44141,44143,44144,44145,44146,44147,44160;;
"RTN","SROQ0A",63,0)
P5 ;;Fem-Pop Bypass;;35656,35556;;
"RTN","SROQ0A",64,0)
P6 ;;Pulmonary Lobectomy;;32480,32500,32440;;
"RTN","SROQ0A",65,0)
P7 ;;Hip Replacement,  - Elective;;27125,27130,27132,27134,27137,27138;;
"RTN","SROQ0A",66,0)
P8 ;;Hip Replacement,  - Acute Fracture;;27236;;
"RTN","SROQ0A",67,0)
P9 ;;TURP;;52601;;
"RTN","SROQ0A",68,0)
P10 ;;Laryngectomy;;31360,31365,31367,31368;;
"RTN","SROQ0A",69,0)
P11 ;;Craniotomy;;61304,61305,61312,61314,61510,61512,61518,61519,61700,61680;;
"RTN","SROQ0A",70,0)
P12 ;;Intraoccular Lens;;66983,66984;;
"RTN","SROQADM")
0^40^B27368110^B27003785
"RTN","SROQADM",1,0)
SROQADM ;BIR/ADM - ADMISSIONS WITHIN 14 DAYS OF OUTPATIENT SURGERY ;09/22/98
"RTN","SROQADM",2,0)
 ;;3.0; Surgery ;**62,77,50,142**;24 Jun 93
"RTN","SROQADM",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQADM",4,0)
 ;**         controlled procedure.  Local modifications to this routine
"RTN","SROQADM",5,0)
 ;**         are prohibited.
"RTN","SROQADM",6,0)
 ;
"RTN","SROQADM",7,0)
 ; Reference to ^DGPM("APTT1" supported by DBIA #565
"RTN","SROQADM",8,0)
 ;
"RTN","SROQADM",9,0)
 S SRSOUT=0,SRSPEC="" W @IOF,!,?18,"Outpatient Cases with Postop Occurrences",!,?24,"and Admissions Within 14 Days"
"RTN","SROQADM",10,0)
 W !!!,"This report displays the completed outpatient surgical cases which resulted in",!,"at least one postoperative occurrence and a hospital admission within 14 days.",!
"RTN","SROQADM",11,0)
SEL ; select date range and specialty
"RTN","SROQADM",12,0)
 D DATE^SROUTL(.SDATE,.EDATE,.SRSOUT) G:SRSOUT END D SPEC^SROUTL G:SRSOUT END
"RTN","SROQADM",13,0)
 N SRINSTP S SRINST=$$INST^SROUTL0() G:SRINST="^" END S SRINSTP=$P(SRINST,"^"),SRINST=$S(SRINST["ALL DIVISIONS":SRINST,1:$P(SRINST,"^",2))
"RTN","SROQADM",14,0)
IO W !!,"This report is designed to use a 132 column format.",!
"RTN","SROQADM",15,0)
 K %ZIS,IOP,IO("Q"),POP S %ZIS("A")="Print the report to which Printer ? ",%ZIS("B")="",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROQADM",16,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="Outpatient Cases with Admissions in 14 Days",(ZTSAVE("EDATE"),ZTSAVE("SDATE"),ZTSAVE("SRSITE*"),ZTSAVE("SRSPEC*"),ZTSAVE("SRINSTP"))="",ZTRTN="EN^SROQADM" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROQADM",17,0)
EN U IO S (SRADMT,SRSOUT)=0,(SRHDR,SRPAGE)=1,SRSD=SDATE-.0001,SRED=EDATE+.9999,Y=SDATE X ^DD("DD") S STARTDT=Y,Y=EDATE X ^DD("DD") S ENDATE=Y K ^TMP("SR",$J)
"RTN","SROQADM",18,0)
 S SRRPT="OUTPATIENT CASES WITH POSTOP OCCURRENCES AND ADMISSIONS WITHIN 14 DAYS",SRFRTO="From: "_STARTDT_"  To: "_ENDATE
"RTN","SROQADM",19,0)
 S SRINST=$S(SRINSTP["ALL DIV":$P($$SITE^SROVAR,"^",2)_" - ALL DIVISIONS",1:$$GET1^DIQ(4,SRINSTP,.01))
"RTN","SROQADM",20,0)
 D NOW^%DTC S Y=$E(%,1,12) X ^DD("DD") S SRPRINT="Report Printed: "_Y
"RTN","SROQADM",21,0)
 D HDR,AC
"RTN","SROQADM",22,0)
 I SRADMT=0 W $$NODATA^SROUTL0() G END
"RTN","SROQADM",23,0)
 S SRSD=0 F  S SRSD=$O(^TMP("SR",$J,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SR",$J,SRSD,SRTN)) Q:'SRTN!SRSOUT  S SRZ=^TMP("SR",$J,SRSD,SRTN) D PRINT
"RTN","SROQADM",24,0)
 D:$Y+6>IOSL PAGE G:SRSOUT END W !,"TOTAL CASES: ",SRADMT
"RTN","SROQADM",25,0)
END W:$E(IOST)="P" @IOF I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROQADM",26,0)
 I 'SRSOUT,$E(IOST)'="P" D PRESS
"RTN","SROQADM",27,0)
 D ^%ZISC K ^TMP("SR",$J),SR14,SRADM,SRADMT,SRFRTO,SRIO,SRIOT,SROCC,SRRPT,SRTN D ^SRSKILL W @IOF
"RTN","SROQADM",28,0)
 Q
"RTN","SROQADM",29,0)
AC F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) K SRADM D CASE I $O(SRADM(0)) D TMP
"RTN","SROQADM",30,0)
 Q
"RTN","SROQADM",31,0)
CASE ; examine case
"RTN","SROQADM",32,0)
 Q:'$P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,"NON")),"^")="Y")!$P($G(^SRF(SRTN,30)),"^")
"RTN","SROQADM",33,0)
 S SR(0)=^SRF(SRTN,0),DFN=$P(SR(0),"^"),SRSS=$P(SR(0),"^",4) I SRSPEC Q:SRSS'=SRSPEC
"RTN","SROQADM",34,0)
 S SRIO=$P(SR(0),"^",12) I SRIO'="O"&(SRIO'="I") S VAIP("D")=SRSD D IN5^VADPT S SRIO=$S(VAIP(13):"I",1:"O") K VAIP
"RTN","SROQADM",35,0)
 Q:(SRIO'="O")!'$O(^SRF(SRTN,16,0))
"RTN","SROQADM",36,0)
ADM ; check for admission within 14 days of surgery
"RTN","SROQADM",37,0)
 S (SRSDATE,X1)=$P($G(^SRF(SRTN,.2)),"^",12),X2=14 D C^%DTC S SR14=X
"RTN","SROQADM",38,0)
 F  S SRSDATE=$O(^DGPM("APTT1",DFN,SRSDATE)) Q:'SRSDATE!(SRSDATE>SR14)  S SRADM(SRSDATE)="",SRADMT=SRADMT+1 Q
"RTN","SROQADM",39,0)
 Q
"RTN","SROQADM",40,0)
TMP ; set TMP global
"RTN","SROQADM",41,0)
 S SRSDATE=$O(SRADM(0)),^TMP("SR",$J,SRSD,SRTN)=DFN_"^"_SRSDATE_"^"_SRSS
"RTN","SROQADM",42,0)
 Q
"RTN","SROQADM",43,0)
PRINT ; print case information
"RTN","SROQADM",44,0)
 D:$Y+9>IOSL PAGE Q:SRSOUT  S SRL=78,SRSUPCPT=1 D PROC^SROUTL
"RTN","SROQADM",45,0)
 S DFN=$P(SRZ,"^"),SRSS=$P(^SRO(137.45,$P(SRZ,"^",3),0),"^"),Y=$P(SRZ,"^",2) X ^DD("DD") S SRADM=$P(Y,":",1,2) S SRDOC=$P($G(^SRF(SRTN,.1)),"^",4) I SRDOC S SRDOC=$P(^VA(200,SRDOC,0),"^")
"RTN","SROQADM",46,0)
 D DEM^VADPT S SRSNM=VADM(1),SRSSN=VA("PID"),Y=SRSD X ^DD("DD") S SRSDATE=Y,SRAGE=$E(SRSD,1,3)-$E($P(VADM(3),"^"),1,3)-($E(SRSD,4,7)<$E($P(VADM(3),"^"),4,7))
"RTN","SROQADM",47,0)
 D TECH^SROPRIN S SRANES=$S(SRTECH'="":SRTECH,1:"NOT ENTERED") D OCC
"RTN","SROQADM",48,0)
 W !,SRSDATE,?22,SRSNM,?54,$S(SRSPEC:$E(SRDOC,1,30),1:$E(SRSS,1,30)),?87,SRANES,?114,SRADM
"RTN","SROQADM",49,0)
 W !,SRTN,?22,SRSSN_"  ("_SRAGE_")",?54,SRPROC(1),!
"RTN","SROQADM",50,0)
 F I=1:1 Q:'$D(SRPOST(I))&('$D(SRPROC(I+1)))  W:$D(SRPOST(I)) "*"_$P(SRPOST(I),"^")_" - ("_$P(SRPOST(I),"^",2)_")" W:$D(SRPROC(I+1)) ?54,SRPROC(I+1) W !
"RTN","SROQADM",51,0)
 W !
"RTN","SROQADM",52,0)
 Q
"RTN","SROQADM",53,0)
PRESS W !! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROQADM",54,0)
 Q
"RTN","SROQADM",55,0)
OCC ; get post-op occurrences
"RTN","SROQADM",56,0)
 K SRPOST S SROCC=0,SRP=1
"RTN","SROQADM",57,0)
 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  S SRCAT=$P(^SRF(SRTN,16,SROCC,0),"^",2) I SRCAT S X=$P(^(0),"^",7) D
"RTN","SROQADM",58,0)
 .S:X Z=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3) S:'X Z="??/??/??"
"RTN","SROQADM",59,0)
 .S SRPOST(SRP)=$P(^SRO(136.5,SRCAT,0),"^")_"^"_Z,SRP=SRP+1
"RTN","SROQADM",60,0)
 Q
"RTN","SROQADM",61,0)
PAGE I $E(IOST)="P"!SRHDR G HDR
"RTN","SROQADM",62,0)
 D PRESS I SRSOUT Q
"RTN","SROQADM",63,0)
HDR ; print heading
"RTN","SROQADM",64,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROQADM",65,0)
 W:$Y @IOF W:$E(IOST)="P" !,?(IOM-$L(SRINST)\2),SRINST W !,?(IOM-$L(SRRPT)\2),SRRPT,?(IOM-10),$J("PAGE "_SRPAGE,9),!,?(IOM-$L(SRFRTO)\2),SRFRTO W:$E(IOST)="P" !,?(IOM-$L(SRPRINT)\2),SRPRINT
"RTN","SROQADM",66,0)
 I SRSPEC S X="SURGICAL SPECIALTY: "_SRSPECN W !,?(IOM-$L(X)\2),X
"RTN","SROQADM",67,0)
 W !!,"DATE OF OPERATION",?22,"PATIENT NAME",?54,$S(SRSPEC:"SURGEON",1:"SURGICAL SPECIALTY"),?87,"ANESTHESIA TECHNIQUE",?114,"DATE OF ADMISSION"
"RTN","SROQADM",68,0)
 W !,"CASE #",?22,"PATIENT ID  (AGE)",?54,"PROCEDURE(S) PERFORMED",!,"*OCCURRENCE - (DATE)"
"RTN","SROQADM",69,0)
 S SRHDR=0,SRPAGE=SRPAGE+1 W ! F I=1:1:IOM W "="
"RTN","SROQADM",70,0)
 Q
"RTN","SROQD")
0^41^B33847612^B34092407
"RTN","SROQD",1,0)
SROQD ;BIR/ADM - CASES WITH DEATHS WITHIN 30 DAYS ;09/22/98  11:45 AM
"RTN","SROQD",2,0)
 ;;3.0; Surgery ;**62,77,50,142**;24 Jun 93
"RTN","SROQD",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQD",4,0)
 ;**         controlled procedure.  Local modifications to this routine
"RTN","SROQD",5,0)
 ;**         are prohibited.
"RTN","SROQD",6,0)
 ;
"RTN","SROQD",7,0)
 S SRSOUT=0,SRIO="A",SRSPEC="" W @IOF,!,?24,"Deaths Within 30 Days of Surgery"
"RTN","SROQD",8,0)
 W !!,"This report lists patients who had surgery within the selected date range,",!,"who died within 30 days of surgery and whose deaths are included on the",!,"Quarterly/Summary Report."
"RTN","SROQD",9,0)
 D DATE^SROUTL(.SDATE,.EDATE,.SRSOUT) G:SRSOUT END
"RTN","SROQD",10,0)
SEC W !! K DIR S DIR("A",1)="Print report for which section of Quarterly/Summary Report ?",DIR("A",2)="",DIR("A",3)=" 1. Total Cases Summary",DIR("A",4)=" 2. Specialty Procedures",DIR("A",5)=" 3. Index Procedures"
"RTN","SROQD",11,0)
 S DIR("A",6)="",DIR("A")="Select number: ",DIR("B")=1,DIR(0)="SAM^1:Total Cases Summary;2:Specialty Procedures;3:Index Procedures" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 G END
"RTN","SROQD",12,0)
 S SRSEL=Y D:SRSEL=2 SPEC
"RTN","SROQD",13,0)
 I SRSEL=1 W @IOF S SRRPT="Deaths within 30 Days of Surgery" D INOUT^SROUTL
"RTN","SROQD",14,0)
 N SRINSTP S SRINST=$$INST^SROUTL0() G:SRINST="^" END S SRINSTP=$P(SRINST,"^"),SRINST=$S(SRINST["ALL DIVISIONS":SRINST,1:$P(SRINST,"^",2))
"RTN","SROQD",15,0)
 I SRSOUT G END
"RTN","SROQD",16,0)
IO W !!,"This report is designed to use a 132 column format.",!
"RTN","SROQD",17,0)
 K %ZIS,IOP,IO("Q"),POP S %ZIS("A")="Print the report to which Printer ? ",%ZIS("B")="",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROQD",18,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="Deaths within 30 Days of Surgery",(ZTSAVE("EDATE"),ZTSAVE("SDATE"),ZTSAVE("SRIO"),ZTSAVE("SRSEL"),ZTSAVE("SRINSTP"),ZTSAVE("SRSPEC*"))="",ZTRTN="EN^SROQD" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROQD",19,0)
EN U IO S (SRCTOT,SRDTOT,SRHDR2,SRSNM,SRSOUT)=0,(SRHDR,SRPAGE)=1,SRSD=SDATE-.0001,SRED=EDATE+.9999,Y=SDATE X ^DD("DD") S STARTDT=Y,Y=EDATE X ^DD("DD") S ENDATE=Y
"RTN","SROQD",20,0)
 D KTMP S SRRPT="DEATHS WITHIN 30 DAYS OF SURGERY"_$S(SRSEL=2:" LISTED FOR SPECIALTY PROCEDURES",SRSEL=3:" LISTED FOR INDEX PROCEDURES",1:"")
"RTN","SROQD",21,0)
 S SRFRTO="FOR "_$S(SRIO="O":"OUTPATIENT ",SRIO="I":"INPATIENT ",1:"")_"SURGERY PERFORMED FROM: "_STARTDT_"  TO: "_ENDATE
"RTN","SROQD",22,0)
 S SRINST=$S(SRINSTP["ALL DIV":$P($$SITE^SROVAR,"^",2)_" - ALL DIVISIONS",1:$$GET1^DIQ(4,SRINSTP,.01))
"RTN","SROQD",23,0)
 D NOW^%DTC S Y=$E(%,1,12) X ^DD("DD") S SRPRINT="Report Printed: "_Y
"RTN","SROQD",24,0)
 D AC^SROQD0 D:SRSEL=1 PLIST D:SRSEL=2 NAT^SROQD1 D:SRSEL=3 IP^SROQD1
"RTN","SROQD",25,0)
END W:$E(IOST)="P" @IOF D KTMP I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROQD",26,0)
 I 'SRSOUT,$E(IOST)'="P" D PRESS
"RTN","SROQD",27,0)
 D ^%ZISC K SRCTOT,SRDNAT,SRDTH,SRDTOT,SRFRTO,SRHDR2,SRINV,SRIO,SRIOSTAT,SRNAT,SRNATNM,SRRPT,SRSEL,SRTN D ^SRSKILL W @IOF
"RTN","SROQD",28,0)
 Q
"RTN","SROQD",29,0)
PRESS W !! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROQD",30,0)
 Q
"RTN","SROQD",31,0)
KTMP F I="SR","SRDEATH","SRDTH","SRINOUT","SRIP","SRIOST","SRNM","SRPAT","SRNAT","SRSEC","SRREL","SRTN" K ^TMP(I,$J)
"RTN","SROQD",32,0)
 Q
"RTN","SROQD",33,0)
PLIST ; print patient list for total cases
"RTN","SROQD",34,0)
 D HDR^SROQD0 S SRNM="" I SRIO'="A" D NOTA,TOT Q
"RTN","SROQD",35,0)
 F  S SRNM=$O(^TMP("SRPAT",$J,SRNM)) Q:SRNM=""!SRSOUT  S DFN=0 F  S DFN=$O(^TMP("SRPAT",$J,SRNM,DFN)) Q:'DFN!SRSOUT  S SRZ=^(DFN) D
"RTN","SROQD",36,0)
 .S SRSNM=0,SRSSN=$P(SRZ,"^"),(SRDD,X1)=$P(SRZ,"^",3),X2=$P(SRZ,"^",2),SRAGE=$E(X1,1,3)-$E(X2,1,3)-($E(X1,4,7)<$E(X2,4,7)) D PAT
"RTN","SROQD",37,0)
TOT I 'SRSOUT S SRHDR2=1 D SUM^SROQD0
"RTN","SROQD",38,0)
 Q
"RTN","SROQD",39,0)
NOTA ; print in or out-patient deaths
"RTN","SROQD",40,0)
 F  S SRNM=$O(^TMP("SRSEC",$J,SRIO,SRNM)) Q:SRNM=""!SRSOUT  S DFN=0 F  S DFN=$O(^TMP("SRSEC",$J,SRIO,SRNM,DFN)) Q:'DFN!SRSOUT  S SRTN=^TMP("SRSEC",$J,SRIO,SRNM,DFN),SRZ=^TMP("SRPAT",$J,SRNM,DFN) D
"RTN","SROQD",41,0)
 .S SRSSN=$P(SRZ,"^"),(SRDD,X1)=$P(SRZ,"^",3),X2=$P(SRZ,"^",2),SRAGE=$E(X1,1,3)-$E(X2,1,3)-($E(X1,4,7)<$E(X2,4,7))
"RTN","SROQD",42,0)
 .S SRNAME=">>> "_SRNM_"  ("_SRSSN_") - DIED "_$E(SRDD,4,5)_"/"_$E(SRDD,6,7)_"/"_$E(SRDD,2,3)_"  AGE: "_SRAGE,SRDTOT=SRDTOT+1
"RTN","SROQD",43,0)
 .D:$Y+9>IOSL PAGE^SROQD0 Q:SRSOUT  W !,SRNAME,! S SRSNM=1
"RTN","SROQD",44,0)
 .S SRSD=$P(^SRF(SRTN,0),"^",9),SRZ=^TMP("SR",$J,DFN,SRSD,SRTN) D OP S SRSNM=0 W ! F I=1:1:IOM W "-"
"RTN","SROQD",45,0)
 Q
"RTN","SROQD",46,0)
PAT ; print new patient information
"RTN","SROQD",47,0)
 S SRNAME=">>> "_SRNM_"  ("_SRSSN_") - DIED "_$E(SRDD,4,5)_"/"_$E(SRDD,6,7)_"/"_$E(SRDD,2,3)_"  AGE: "_SRAGE,SRDTOT=SRDTOT+1
"RTN","SROQD",48,0)
 D:$Y+9>IOSL PAGE^SROQD0 Q:SRSOUT  W !,SRNAME,! S SRSNM=1,SRSD=0 F  S SRSD=$O(^TMP("SR",$J,DFN,SRSD)) Q:'SRSD  S SRTN=0 F  S SRTN=$O(^TMP("SR",$J,DFN,SRSD,SRTN)) Q:'SRTN!SRSOUT  D OP
"RTN","SROQD",49,0)
 S SRSNM=0 W ! F I=1:1:IOM W "-"
"RTN","SROQD",50,0)
 Q
"RTN","SROQD",51,0)
OP ; print case information
"RTN","SROQD",52,0)
 Q:SRSD<(SDATE-.0001)!(SRSD>(EDATE+.9999))  D:$Y+7>IOSL PAGE^SROQD0 Q:SRSOUT
"RTN","SROQD",53,0)
 S SRZ=^TMP("SR",$J,DFN,SRSD,SRTN),Y=SRSD,SRSDATE=$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_$E(Y,2,3),Y=$P(SRZ,"^"),SRSS=$S(Y=9999:"SPECIALTY NOT ENTERED",1:$P(^SRO(137.45,Y,0),"^"))
"RTN","SROQD",54,0)
 S Y=$P(SRZ,"^",2),SRIOSTAT=$S(Y="I":"INPAT",Y="O":"OUTPAT",1:"???"),Y=$P(SRZ,"^",3),SRREL=$S(Y="U":"UNRELATED",Y="R":"RELATED",1:"???")
"RTN","SROQD",55,0)
 S SRCON=$P(SRZ,"^",4) S SRL=52,SRSUPCPT=1 D PROC^SROUTL
"RTN","SROQD",56,0)
 W !,SRSDATE,?10,SRTN,?22,SRIOSTAT,?31,$E(SRSS,1,35),?69,SRPROC(1),?123,SRREL,! W:SRCON "*** CONCURRENT CASE #"_SRCON_" ***" S I=1 F  S I=$O(SRPROC(I)) Q:'I  W ?69,SRPROC(I),!
"RTN","SROQD",57,0)
 I SRCON,'$D(SRPROC(2)) W !
"RTN","SROQD",58,0)
 Q
"RTN","SROQD",59,0)
SPEC ; select national specialty
"RTN","SROQD",60,0)
 W @IOF,! S DIR("?",1)="Enter YES if you would like the report printed for all National Surgical",DIR("?")="Specialties or enter NO to select a specific specialty."
"RTN","SROQD",61,0)
 S DIR("A")="Do you want the report for all National Surgical Specialties ? ",DIR("B")="YES",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROQD",62,0)
 I 'Y W ! K DIC S DIC=45.3,DIC(0)="QEAMZ",DIC("A")="Select National Surgical Specialty: ",DIC("S")="I '$P(^(0),""^"",3)" D ^DIC K DIC S:Y<0 SRSOUT=1 Q:Y<0  S SRSPEC=+Y,SRSPECN=$P(Y(0),"^")
"RTN","SROQD",63,0)
 Q
"RTN","SROQD1")
0^42^B12825991^B12561016
"RTN","SROQD1",1,0)
SROQD1 ;BIR/ADM - CASES WITH DEATHS WITHIN 30 DAYS ;01/29/98
"RTN","SROQD1",2,0)
 ;;3.0; Surgery ;**62,70,77,142**;24 Jun 93
"RTN","SROQD1",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQD1",4,0)
 ;**         controlled procedure.  Local modifications to this routine
"RTN","SROQD1",5,0)
 ;**         are prohibited.
"RTN","SROQD1",6,0)
 ;
"RTN","SROQD1",7,0)
 ; Reference to ^DIC(45.3 supported by DBIA #218
"RTN","SROQD1",8,0)
 ;
"RTN","SROQD1",9,0)
NAT ; loop through national specialties
"RTN","SROQD1",10,0)
 D HDR I SRSPEC S SRNAT=SRSPEC,SRNATNM=$P(^DIC(45.3,SRNAT,0),"^",2),SRDNAT=0 D PATS Q
"RTN","SROQD1",11,0)
 S SRNAT=0 F  S SRNAT=$O(^DIC(45.3,SRNAT)),SRSNM=0 Q:'SRNAT!SRSOUT  I $D(^TMP("SRSEC",$J,SRNAT)) S SRNATNM=$P(^DIC(45.3,SRNAT,0),"^",2),SRDNAT=0 D PATS
"RTN","SROQD1",12,0)
 I $D(^TMP("SRSEC",$J,9999)) S SRNAT=9999,SRNATNM="SPECIALTY NOT ENTERED",SRDNAT=0 D PATS
"RTN","SROQD1",13,0)
 D:'SRSOUT SUM1
"RTN","SROQD1",14,0)
 Q
"RTN","SROQD1",15,0)
IP ; loop through index procedures
"RTN","SROQD1",16,0)
 D TMP^SROQ0A D HDR F SRNAT=1:1:12 S SRSNM=0 Q:SRSOUT  I $D(^TMP("SRSEC",$J,SRNAT)) S SRNATNM=^TMP("SRIP",$J,SRNAT),SRDNAT=0 D PATS
"RTN","SROQD1",17,0)
 D:'SRSOUT SUM1
"RTN","SROQD1",18,0)
 Q
"RTN","SROQD1",19,0)
NEW ; print national specialty or index procedure category
"RTN","SROQD1",20,0)
 D:$Y+9>IOSL PAGE Q:SRSOUT  I SRNATNM["," S SRNATNM=$P(SRNATNM,",")_$P(SRNATNM,", ",2)
"RTN","SROQD1",21,0)
 W !,">>> "_SRNATNM_" <<<",! S SRSNM=1
"RTN","SROQD1",22,0)
 Q
"RTN","SROQD1",23,0)
PATS ; print patient list
"RTN","SROQD1",24,0)
 D NEW S SRNM="" F  S SRNM=$O(^TMP("SRSEC",$J,SRNAT,SRNM)) Q:SRNM=""!SRSOUT  S DFN=0 F  S DFN=$O(^TMP("SRSEC",$J,SRNAT,SRNM,DFN)) Q:'DFN!SRSOUT  D CASE
"RTN","SROQD1",25,0)
 D:'SRSOUT SUM
"RTN","SROQD1",26,0)
 Q
"RTN","SROQD1",27,0)
CASE ; print case information
"RTN","SROQD1",28,0)
 S SRDNAT=SRDNAT+1,SRDTOT=SRDTOT+1 I $Y+7>IOSL D PAGE Q:SRSOUT
"RTN","SROQD1",29,0)
 S SRZ=^TMP("SRPAT",$J,SRNM,DFN),SRSSN=$P(SRZ,"^"),(SRDD,X1)=$P(SRZ,"^",3),X2=$P(SRZ,"^",2),SRAGE=$E(X1,1,3)-$E(X2,1,3)-($E(X1,4,7)<$E(X2,4,7))
"RTN","SROQD1",30,0)
 S X=SRDD,SRDD=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"RTN","SROQD1",31,0)
 S SRTN=^TMP("SRSEC",$J,SRNAT,SRNM,DFN),SR=^SRF(SRTN,0),X=$P(SR,"^",9),SRX=^TMP("SR",$J,DFN,X,SRTN),SRSD=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3)
"RTN","SROQD1",32,0)
 S Y=$P(SRX,"^",2),SRIOSTAT=$S(Y="I":"INPAT",Y="O":"OUTPAT",1:"???")
"RTN","SROQD1",33,0)
 S Y=$P(SRX,"^",3),SRREL=$S(Y="U":"UNRELATED",Y="R":"RELATED",1:"???")
"RTN","SROQD1",34,0)
 S X=$P(SR,"^",4),SRSS=$S(X:$P(^SRO(137.45,X,0),"^"),1:"SPECIALTY NOT ENTERED"),SRL=86,SRSUPCPT=1 D PROC^SROUTL
"RTN","SROQD1",35,0)
 W !,SRSD,?12,SRNM,?44,SRDD,?60,SRSS,?102,SRIOSTAT,?111,SRREL,!,SRTN,?12,SRSSN_"  ("_SRAGE_")" S I=0 F  S I=$O(SRPROC(I)) Q:'I  W ?44,SRPROC(I),!
"RTN","SROQD1",36,0)
 Q
"RTN","SROQD1",37,0)
PAGE I $E(IOST)="P"!SRHDR G HDR
"RTN","SROQD1",38,0)
 D PRESS I SRSOUT Q
"RTN","SROQD1",39,0)
HDR ; print heading
"RTN","SROQD1",40,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROQD1",41,0)
 W:$Y @IOF W:$E(IOST)="P" !,?(IOM-$L(SRINST)\2),SRINST W !,?(IOM-$L(SRRPT)\2),SRRPT,?(IOM-10),$J("PAGE "_SRPAGE,9),!,?(IOM-$L(SRFRTO)\2),SRFRTO,!,?(IOM-$L(SRPRINT)\2),SRPRINT
"RTN","SROQD1",42,0)
 W !!,"OP DATE",?12,"PATIENT NAME",?44,"DATE OF DEATH",?60,"LOCAL SPECIALTY",?102,"IN/OUT",?111,"DEATH RELATED"
"RTN","SROQD1",43,0)
 W !,"CASE #",?12,"PATIENT ID#  (AGE)",?44,"PROCEDURE(S)"
"RTN","SROQD1",44,0)
 S SRHDR=0,SRPAGE=SRPAGE+1 W ! F I=1:1:IOM W "="
"RTN","SROQD1",45,0)
 I SRSNM W !,">>> "_SRNATNM_" <<<   * * Continued from previous page * *"
"RTN","SROQD1",46,0)
 Q
"RTN","SROQD1",47,0)
SUM ; print total for specialty or index procedure
"RTN","SROQD1",48,0)
 D:$Y+6>IOSL PAGE Q:SRSOUT
"RTN","SROQD1",49,0)
 W !!,"TOTAL DEATHS FOR "_SRNATNM_": "_SRDNAT,! F I=1:1:IOM W "-"
"RTN","SROQD1",50,0)
 Q
"RTN","SROQD1",51,0)
SUM1 ; print grand total for all specialties or index procedures
"RTN","SROQD1",52,0)
 D:$Y+6>IOSL PAGE Q:SRSOUT
"RTN","SROQD1",53,0)
 W !!,"TOTAL FOR ALL "_$S(SRSEL=2:"SPECIALTIES",1:"INDEX PROCEDURES")_": "_SRDTOT
"RTN","SROQD1",54,0)
 Q
"RTN","SROQD1",55,0)
PRESS W !! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROQD1",56,0)
 Q
"RTN","SROQIDP")
0^43^B19872075^B19978848
"RTN","SROQIDP",1,0)
SROQIDP ;BIR/ADM - LIST OF INVASIVE DIAGNOSTIC PROCEDURES ;12/16/98  12:11 PM
"RTN","SROQIDP",2,0)
 ;;3.0; Surgery ;**62,77,50,88,142**;24 Jun 93
"RTN","SROQIDP",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQIDP",4,0)
 ;**         controlled procedure.  Local modifications to this routine
"RTN","SROQIDP",5,0)
 ;**         are prohibited.
"RTN","SROQIDP",6,0)
 ;
"RTN","SROQIDP",7,0)
 S SRSOUT=0 W @IOF,!,?20,"List of Invasive Diagnostic Procedures",!!,"This report displays the completed surgical cases that meet the selection",!,"criteria and that have a principal CPT code on the list below defined by"
"RTN","SROQIDP",8,0)
 W !,"Surgical Service at VHA Headquarters as invasive diagnostic procedures.",!!,?3,"Procedure Group",?30,"CPT Code(s)",!,?3,"---------------",?30,"-----------" D SHOW,PRESS^SROQIDP0 G:SRSOUT END
"RTN","SROQIDP",9,0)
SEL S (SRIO,SRSPEC)="" W @IOF S SRRPT="List of Invasive Diagnostic Procedures",SRB="O" D INOUT^SROUTL G:SRSOUT END D DATE^SROUTL(.SDATE,.EDATE,.SRSOUT) G:SRSOUT END D SPEC^SROUTL G:SRSOUT END
"RTN","SROQIDP",10,0)
 N SRINSTP S SRINST=$$INST^SROUTL0() G:SRINST="^" END S SRINSTP=$P(SRINST,"^"),SRINST=$S(SRINST["ALL DIVISIONS":SRINST,1:$P(SRINST,"^",2))
"RTN","SROQIDP",11,0)
IO W !!,"This report is designed to use a 132 column format.",!
"RTN","SROQIDP",12,0)
 K %ZIS,IOP,IO("Q"),POP S %ZIS("A")="Print the List of Invasive Diagnostic Procedures to which Printer ? ",%ZIS("B")="",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROQIDP",13,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="List of Invasive Diagnostic Procedures",(ZTSAVE("EDATE"),ZTSAVE("SRIO"),ZTSAVE("SDATE"),ZTSAVE("SRINSTP"),ZTSAVE("SRSPEC*"))="",ZTRTN="EN^SROQIDP" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROQIDP",14,0)
EN D ^SROQIDP0
"RTN","SROQIDP",15,0)
END W:$E(IOST)="P" @IOF I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROQIDP",16,0)
 I 'SRSOUT,$E(IOST)'="P" D PRESS^SROQIDP0
"RTN","SROQIDP",17,0)
 D ^%ZISC K ^TMP("SR",$J),SRFRTO,SRIDP,SRIDPT,SRIO,SRIOSTAT,SRIOT,SRRPT,SRTN D ^SRSKILL W @IOF
"RTN","SROQIDP",18,0)
 Q
"RTN","SROQIDP",19,0)
AC F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D CASE Q:SRSOUT
"RTN","SROQIDP",20,0)
 Q
"RTN","SROQIDP",21,0)
CASE ; determine if case is invasive procedure
"RTN","SROQIDP",22,0)
 Q:'$P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,"NON")),"^")="Y")!$P($G(^SRF(SRTN,30)),"^")
"RTN","SROQIDP",23,0)
 S SR(0)=^SRF(SRTN,0),SRSS=$P(SR(0),"^",4) I SRSPEC Q:SRSS'=SRSPEC
"RTN","SROQIDP",24,0)
 S SRIOSTAT=$P(SR(0),"^",12) I SRIOSTAT'="I"&(SRIOSTAT'="O") S VAIP("D")=SRSD D IN5^VADPT S SRIOSTAT=$S(VAIP(13):"I",1:"O") K VAIP
"RTN","SROQIDP",25,0)
 I SRIO'="A" Q:SRIOSTAT'=SRIO
"RTN","SROQIDP",26,0)
 D IDP I SRIDP S ^TMP("SR",$J,SRSD,SRTN)=$P(SR(0),"^")_"^"_SRSS_"^"_SRIOSTAT,SRIDPT=SRIDPT+1,SRIOT(SRIOSTAT)=SRIOT(SRIOSTAT)+1
"RTN","SROQIDP",27,0)
 Q
"RTN","SROQIDP",28,0)
QTR ; entry from quarterly report
"RTN","SROQIDP",29,0)
 N SROP,SROPER S SRIDP=0 D IDP I SRIDP D ADD
"RTN","SROQIDP",30,0)
 Q
"RTN","SROQIDP",31,0)
IDP ; get CPT codes for procedures performed
"RTN","SROQIDP",32,0)
 N SRCODES,SRCPT,SRMATCH S SRIDP=0 S SROP=$P($G(^SRO(136,SRTN,0)),"^",2) I SROP S SROP=$P($$CPT^ICPTCOD(SROP),"^",2) D CHECK I SRMATCH S SRIDP=1
"RTN","SROQIDP",33,0)
 I SRIDP S SROPER=0 F  S SROPER=$O(^SRO(136,SRTN,3,SROPER)) Q:'SROPER  S SROP=$P($G(^SRO(136,SRTN,3,SROPER,0)),"^") I SROP D CHECK I 'SRMATCH S SRIDP=0 Q
"RTN","SROQIDP",34,0)
 Q
"RTN","SROQIDP",35,0)
CHECK ; compare procedure performed with HQ list
"RTN","SROQIDP",36,0)
 S SRMATCH=0 F J=1:1:6 Q:SRMATCH  S SRCODES=$P($T(PROC+J),";;",3) F K=1:1 S SRCPT=$P(SRCODES,",",K) Q:'SRCPT  I SRCPT=SROP S SRMATCH=1 Q
"RTN","SROQIDP",37,0)
 Q
"RTN","SROQIDP",38,0)
ADD ; increment counters in ^TMP
"RTN","SROQIDP",39,0)
 S $P(^TMP("SRIDP",$J),"^")=$P(^TMP("SRIDP",$J),"^")+1
"RTN","SROQIDP",40,0)
 I $P(SR(0),"^",12)="I" S $P(^TMP("SRIDP",$J),"^",2)=$P(^TMP("SRIDP",$J),"^",2)+1 Q
"RTN","SROQIDP",41,0)
 S $P(^TMP("SRIDP",$J),"^",3)=$P(^TMP("SRIDP",$J),"^",3)+1
"RTN","SROQIDP",42,0)
 Q
"RTN","SROQIDP",43,0)
SHOW ; display list of invasive diagnostic procedures
"RTN","SROQIDP",44,0)
 F I=1:1:6 S X=$T(PROC+I),SRPROC=$P(X,";;",2),SRCODES=$P(X,";;",3) W !,?3,SRPROC,?30,$E(SRCODES,1,48) I $L(SRCODES)>48 W !,?30,$E(SRCODES,49,96)
"RTN","SROQIDP",45,0)
 Q
"RTN","SROQIDP",46,0)
PROC ; HQ list of invasive diagnostic procedures
"RTN","SROQIDP",47,0)
 ;;Urologic;;52000,52005,52007,52010,52204;;
"RTN","SROQIDP",48,0)
 ;;ENT;;31231;;
"RTN","SROQIDP",49,0)
 ;;Pulmonary (Respiratory);;31615,31622,31625,31628,31629,31656;;
"RTN","SROQIDP",50,0)
 ;;Upper Gastrointestinal;;43200,43202,43234,43235,43239,43259,43263;;
"RTN","SROQIDP",51,0)
 ;;Small Bowel and Stomach;;44360,44361,44376,44377,44380,44382,44385,44386,44388,44389;;
"RTN","SROQIDP",52,0)
 ;;Colon and Rectum;;45330,45331,45355,45378,45380,46600,46606
"RTN","SROQIDP0")
0^44^B13343047^B12594919
"RTN","SROQIDP0",1,0)
SROQIDP0 ;BIR/ADM - LIST OF INVASIVE DIAGNOSTIC PROCEDURES ;09/22/98  11:46 AM
"RTN","SROQIDP0",2,0)
 ;;3.0; Surgery ;**62,77,50,142**;24 Jun 93
"RTN","SROQIDP0",3,0)
 ;
"RTN","SROQIDP0",4,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQIDP0",5,0)
 ;**         controlled procedure.  Local modifications to this routine
"RTN","SROQIDP0",6,0)
 ;**         are prohibited.
"RTN","SROQIDP0",7,0)
 ;
"RTN","SROQIDP0",8,0)
 U IO S (SRIDPT,SRSOUT)=0,(SRHDR,SRPAGE)=1,SRSD=SDATE-.0001,SRED=EDATE+.9999,Y=SDATE X ^DD("DD") S STARTDT=Y,Y=EDATE X ^DD("DD") S ENDATE=Y K ^TMP("SR",$J) F I="N","I","O" S SRIOT(I)=0
"RTN","SROQIDP0",9,0)
 S SRRPT="LIST OF INVASIVE DIAGNOSTIC PROCEDURES",SRFRTO="From: "_STARTDT_"  To: "_ENDATE
"RTN","SROQIDP0",10,0)
 S SRINST=$S(SRINSTP["ALL DIV":$P($$SITE^SROVAR,"^",2)_" - ALL DIVISIONS",1:$$GET1^DIQ(4,SRINSTP,.01))
"RTN","SROQIDP0",11,0)
 D NOW^%DTC S Y=$E(%,1,12) X ^DD("DD") S SRPRINT="Report Printed: "_Y
"RTN","SROQIDP0",12,0)
 D HDR D AC^SROQIDP
"RTN","SROQIDP0",13,0)
 I SRIDPT=0 W $$NODATA^SROUTL0() Q
"RTN","SROQIDP0",14,0)
 S SRSD=0 F  S SRSD=$O(^TMP("SR",$J,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SR",$J,SRSD,SRTN)) Q:'SRTN!SRSOUT  S SRZ=^TMP("SR",$J,SRSD,SRTN) D PRINT
"RTN","SROQIDP0",15,0)
 D:$Y+10>IOSL PAGE Q:SRSOUT  W !! D
"RTN","SROQIDP0",16,0)
 .I SRIO="A" W ?4,"TOTAL CASES BY IN/OUT-PATIENT STATUS",!,?14,"INPATIENT: ",SRIOT("I"),!,?13,"OUTPATIENT: ",SRIOT("O"),!,?12,"NOT ENTERED: ",SRIOT("N"),!!,?12,"TOTAL CASES: ",SRIDPT
"RTN","SROQIDP0",17,0)
 .I SRIO'="A" W "TOTAL "_$S(SRIO="I":"INPATIENT",1:"OUTPATIENT")_" CASES: "_SRIOT(SRIO)
"RTN","SROQIDP0",18,0)
 Q
"RTN","SROQIDP0",19,0)
PRINT ; print case information
"RTN","SROQIDP0",20,0)
 D:$Y+9>IOSL PAGE Q:SRSOUT  S SRL=78,SRSUPCPT=1 D PROC^SROUTL
"RTN","SROQIDP0",21,0)
 S DFN=$P(SRZ,"^"),SRSS=$P(^SRO(137.45,$P(SRZ,"^",2),0),"^"),Y=$P(SRZ,"^",3),SRIOSTAT=$S(Y="I":"INPATIENT",Y="O":"OUTPATIENT",1:"NOT ENTERED"),SRDOC=$P($G(^SRF(SRTN,.1)),"^",4) I SRDOC S SRDOC=$P(^VA(200,SRDOC,0),"^")
"RTN","SROQIDP0",22,0)
 D DEM^VADPT S SRSNM=VADM(1),SRSSN=VA("PID"),Y=SRSD X ^DD("DD") S SRSDATE=Y,X1=$E(SRSD,1,7),X2=$P(VADM(3),"^"),SRAGE=$E(X1,1,3)-$E(X2,1,3)-($E(X1,4,7)<$E(X2,4,7))
"RTN","SROQIDP0",23,0)
 D TECH^SROPRIN S SRANES=$S(SRTECH'="":SRTECH,1:"NOT ENTERED")
"RTN","SROQIDP0",24,0)
 W !,SRSDATE,?22,SRSNM,?54,$S(SRSPEC:$E(SRDOC,1,27),1:$E(SRSS,1,27)),?89,SRANES,?117,SRIOSTAT
"RTN","SROQIDP0",25,0)
 W !,SRTN,?22,SRSSN_"  ("_SRAGE_")",?54,SRPROC(1),! S I=1 F  S I=$O(SRPROC(I)) Q:'I  W ?54,SRPROC(I),!
"RTN","SROQIDP0",26,0)
 D:$Y+9>IOSL PAGE Q:SRSOUT  S SRL=78 D PROC^SROUTLN W !,?54,SRPROC(1),! S I=1 F  S I=$O(SRPROC(I)) Q:'I  W ?54,SRPROC(I),!
"RTN","SROQIDP0",27,0)
 Q
"RTN","SROQIDP0",28,0)
PRESS W !! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROQIDP0",29,0)
 Q
"RTN","SROQIDP0",30,0)
PAGE I $E(IOST)="P"!SRHDR G HDR
"RTN","SROQIDP0",31,0)
 D PRESS I SRSOUT Q
"RTN","SROQIDP0",32,0)
HDR ; print heading
"RTN","SROQIDP0",33,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROQIDP0",34,0)
 W:$Y @IOF W:$E(IOST)="P" !,?(IOM-$L(SRINST)\2),SRINST W !,?(IOM-$L(SRRPT)\2),SRRPT,?(IOM-10),$J("PAGE "_SRPAGE,9),!,?(IOM-$L(SRFRTO)\2),SRFRTO W:$E(IOST)="P" !,?(IOM-$L(SRPRINT)\2),SRPRINT
"RTN","SROQIDP0",35,0)
 I SRSPEC S X="SURGICAL SPECIALTY: "_SRSPECN W !,?(IOM-$L(X)\2),X
"RTN","SROQIDP0",36,0)
 W !!,"DATE OF OPERATION",?22,"PATIENT NAME",?54,$S(SRSPEC:"SURGEON",1:"SURGICAL SPECIALTY"),?89,"ANESTHESIA TECHNIQUE",?117,"IN/OUT-PATIENT"
"RTN","SROQIDP0",37,0)
 W !,"CASE #",?22,"PATIENT ID (AGE)",?54,"PROCEDURE(S) PERFORMED"
"RTN","SROQIDP0",38,0)
 S SRHDR=0,SRPAGE=SRPAGE+1 W ! F I=1:1:IOM W "="
"RTN","SROQIDP0",39,0)
 Q
"RTN","SROQL")
0^45^B27803674^B27080039
"RTN","SROQL",1,0)
SROQL ;BIR/ADM - LIST OF OPERATIONS FOR QUARTERLY REPORT ;06/15/04  11:46 AM
"RTN","SROQL",2,0)
 ;;3.0; Surgery ;**62,77,50,129,142**;24 Jun 93
"RTN","SROQL",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQL",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQL",5,0)
 ;**         are prohibited.
"RTN","SROQL",6,0)
 ;
"RTN","SROQL",7,0)
 S SRSOUT=0,SRSPEC="" W @IOF,!,?17,"List of Operations Included on Quarterly Report",!!
"RTN","SROQL",8,0)
 W !,"This option generates a list of completed operations that are included on the",!,"Quarterly Report and displays the data fields for each case that are checked",!,"by the Quarterly Report."
"RTN","SROQL",9,0)
SEL ; select date range and specialty
"RTN","SROQL",10,0)
 D DATE^SROUTL(.SDATE,.EDATE,.SRSOUT) G:SRSOUT END D SPEC^SROUTL G:SRSOUT END
"RTN","SROQL",11,0)
 N SRINSTP S SRINST=$$INST^SROUTL0() G:SRINST="^" END S SRINSTP=$P(SRINST,"^"),SRINST=$S(SRINST["ALL DIVISIONS":SRINST,1:$P(SRINST,"^",2))
"RTN","SROQL",12,0)
IO W !!,"This report is designed to use a 132 column format.",!
"RTN","SROQL",13,0)
 K %ZIS,IOP,IO("Q"),POP S %ZIS("A")="Print the report to which Printer ? ",%ZIS("B")="",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROQL",14,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="List of Operations Included on Quarterly Report",(ZTSAVE("EDATE"),ZTSAVE("SDATE"),ZTSAVE("SRINSTP"),ZTSAVE("SRSPEC*"))="",ZTRTN="EN^SROQL" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROQL",15,0)
EN U IO S (SRTOT,SRSOUT)=0,(SRHDR,SRPAGE)=1,SRSD=SDATE-.0001,SRED=EDATE+.9999,Y=SDATE X ^DD("DD") S STARTDT=Y,Y=EDATE X ^DD("DD") S ENDATE=Y K ^TMP("SR",$J)
"RTN","SROQL",16,0)
 S SRRPT="List of Operations Included on Quarterly Report",SRFRTO="From: "_STARTDT_"  To: "_ENDATE
"RTN","SROQL",17,0)
 S SRINST=$S(SRINSTP["ALL DIV":$P($$SITE^SROVAR,"^",2)_" - ALL DIVISIONS",1:$$GET1^DIQ(4,SRINSTP,.01))
"RTN","SROQL",18,0)
 D NOW^%DTC S Y=$E(%,1,12) X ^DD("DD") S SRPRINT="Report Printed: "_Y
"RTN","SROQL",19,0)
 D HDR,AC I 'SRTOT W $$NODATA^SROUTL0() G END
"RTN","SROQL",20,0)
 G:SRSOUT END D:$Y+8>IOSL PAGE G:SRSOUT END W !!,"TOTAL CASES: ",SRTOT
"RTN","SROQL",21,0)
END W:$E(IOST)="P" @IOF I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROQL",22,0)
 I 'SRSOUT,$E(IOST)'="P" D PRESS
"RTN","SROQL",23,0)
 D ^%ZISC K SRFRTO,SRIO,SRPERI,SRTOT,SRRPT,SRTN D ^SRSKILL W @IOF
"RTN","SROQL",24,0)
 Q
"RTN","SROQL",25,0)
AC F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D CASE
"RTN","SROQL",26,0)
 Q
"RTN","SROQL",27,0)
CASE ; examine case
"RTN","SROQL",28,0)
 Q:'$P($G(^SRF(SRTN,.2)),"^",12)!($P($G(^SRF(SRTN,"NON")),"^")="Y")!$P($G(^SRF(SRTN,30)),"^")
"RTN","SROQL",29,0)
 S SR(0)=^SRF(SRTN,0),DFN=$P(SR(0),"^"),SRSS=$P(SR(0),"^",4) I SRSPEC Q:SRSS'=SRSPEC
"RTN","SROQL",30,0)
 D DEM^VADPT S SRSNM=VADM(1),SRSSN=VA("PID"),X1=$E(SRSD,1,7),X2=$P(VADM(3),"^"),SRAGE=$E(X1,1,3)-$E(X2,1,3)-($E(X1,4,7)<$E(X2,4,7))
"RTN","SROQL",31,0)
 S SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"???"),Y=SRSD X ^DD("DD") S SRSDATE=Y,SRDOC=$P($G(^SRF(SRTN,.1)),"^",4) I SRDOC S SRDOC=$P(^VA(200,SRDOC,0),"^")
"RTN","SROQL",32,0)
 S X=$P(SR(0),"^",12),SRIO=$S(X="I":"INPATIENT",X="O":"OUTPATIENT",1:"???"),X=$P(SR(0),"^",3),SRMM=$S(X="J":"MAJOR",X="N":"MINOR",1:"???")
"RTN","SROQL",33,0)
 S Y=$P(SR(0),"^",10),C=$P(^DD(130,.035,0),"^",2) D Y^DIQ S SRTYPE=$S(Y="":"???",1:Y),Y=$P($G(^SRF(SRTN,1.1)),"^",3),C=$P(^DD(130,1.13,0),"^",2) D Y^DIQ S SRASA=$S(Y="":"???",1:Y)
"RTN","SROQL",34,0)
 S Y=$P($G(^SRF(SRTN,"1.0")),"^",8),C=$P(^DD(130,1.09,0),"^",2) D Y^DIQ S SRWC=$S(Y="":"???",1:Y)
"RTN","SROQL",35,0)
 S SRATT=$P($G(^SRF(SRTN,.1)),"^",10) I SRATT="" D RS^SROQ0A
"RTN","SROQL",36,0)
 S I=SRATT D
"RTN","SROQL",37,0)
 .S SRATT=$S(I=9:"A",I=10:"B",I=11:"C",I=12:"D",I=13:"E",I=14:"F",I=1:"0 (Old)",I=2:"1 (Old)",I=3:"2 (Old)",I=4:"3 (Old)",I=5:"0",I=6:"1",I=7:"2",I=8:"3",1:"???")
"RTN","SROQL",38,0)
 S SRTOT=SRTOT+1,SRL=78,SRSUPCPT=1 D PROC^SROUTL,OCC D:$Y+9>IOSL PAGE Q:SRSOUT
"RTN","SROQL",39,0)
 W !,SRSDATE,?22,SRSNM,?54,SRSSN_"  ("_SRAGE_")",?81,$E(SRASA,1,25),?108,"LEVEL "_SRATT,!,SRTN_"  ("_SRMM_")",?22,$S(SRSPEC:SRDOC,1:$E(SRSS,1,30)),?54,$E(SRTYPE,1,25),?81,SRWC,?108,SRIO,!
"RTN","SROQL",40,0)
 F I=1:1 Q:'$D(SRPERI(I))&('$D(SRPROC(I)))  W:$D(SRPERI(I)) SRPERI(I) W:$D(SRPROC(I)) ?54,SRPROC(I) W !
"RTN","SROQL",41,0)
AAA S SRL=78 D PROC^SROUTLN D:$Y+9>IOSL PAGE Q:SRSOUT  F I=1:1 Q:'$D(SRPROC(I))  D
"RTN","SROQL",42,0)
 .W !,?54,SRPROC(I) W !
"RTN","SROQL",43,0)
 F I=1:1:IOM W "-"
"RTN","SROQL",44,0)
 Q
"RTN","SROQL",45,0)
PRESS W !! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROQL",46,0)
 Q
"RTN","SROQL",47,0)
OCC ; get occurrences
"RTN","SROQL",48,0)
 K SRPERI S SROCC=0,SRP=1
"RTN","SROQL",49,0)
 F  S SROCC=$O(^SRF(SRTN,10,SROCC)) Q:'SROCC  S SRCAT=$P(^SRF(SRTN,10,SROCC,0),"^",2) I SRCAT S SRPERI(SRP)="INTRAOP - "_$P(^SRO(136.5,SRCAT,0),"^"),SRP=SRP+1
"RTN","SROQL",50,0)
 S SROCC=0 F  S SROCC=$O(^SRF(SRTN,16,SROCC)) Q:'SROCC  S SRCAT=$P(^SRF(SRTN,16,SROCC,0),"^",2) I SRCAT S SRPERI(SRP)="POSTOP - "_$P(^SRO(136.5,SRCAT,0),"^"),SRP=SRP+1
"RTN","SROQL",51,0)
 Q
"RTN","SROQL",52,0)
PAGE I $E(IOST)="P"!SRHDR G HDR
"RTN","SROQL",53,0)
 D PRESS I SRSOUT Q
"RTN","SROQL",54,0)
HDR ; print heading
"RTN","SROQL",55,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROQL",56,0)
 W:$Y @IOF W:$E(IOST)="P" !,?(IOM-$L(SRINST)\2),SRINST W !,?(IOM-$L(SRRPT)\2),SRRPT,?(IOM-10),$J("PAGE "_SRPAGE,9),!,?(IOM-$L(SRFRTO)\2),SRFRTO W:$E(IOST)="P" !,?(IOM-$L(SRPRINT)\2),SRPRINT
"RTN","SROQL",57,0)
 I SRSPEC S X="SURGICAL SPECIALTY: "_SRSPECN W !,?(IOM-$L(X)\2),X
"RTN","SROQL",58,0)
 W !!,"DATE OF OPERATION",?22,"PATIENT NAME",?54,"PATIENT ID  (AGE)",?81,"ASA CLASS",?108,"RESIDENT SUPERVISION"
"RTN","SROQL",59,0)
 W !,"CASE #  (MAJ/MIN)",?22,$S(SRSPEC:"SURGEON",1:"SURGICAL SPECIALTY"),?54,"CASE SCHEDULE TYPE",?81,"WOUND CLASS",?108,"IN/OUT-PAT STATUS"
"RTN","SROQL",60,0)
 W !,"OCCURENCE(S)",?54,"PROCEDURE(S)" S SRHDR=0,SRPAGE=SRPAGE+1 W ! F I=1:1:IOM W "="
"RTN","SROQL",61,0)
 Q
"RTN","SROQN")
0^46^B29511817^B31591131
"RTN","SROQN",1,0)
SROQN ;BIR/ADM - REPORT OF MISSING DATA FOR QUARTERLY REPORT ;07/20/04  9:11 AM
"RTN","SROQN",2,0)
 ;;3.0; Surgery ;**62,77,92,129,142**;24 Jun 93
"RTN","SROQN",3,0)
 ;** NOTICE: This routine is part of an implementation of a nationally
"RTN","SROQN",4,0)
 ;**         controlled procedure. Local modifications to this routine
"RTN","SROQN",5,0)
 ;**         are prohibited.
"RTN","SROQN",6,0)
 ;
"RTN","SROQN",7,0)
 S SRSOUT=0,SRSPEC="" W @IOF,!,?18,"Report of Missing Quarterly Report Data",!!
"RTN","SROQN",8,0)
 W !,"For surgical cases with an entry in the TIME PAT IN OR field and that are not",!,"aborted, this option generates a report of cases missing any of the following",!,"pieces of information used by the Quarterly Report:"
"RTN","SROQN",9,0)
 W !!,?10,"In/Out-Patient Status",!,?10,"Major/Minor",!,?10,"Case Schedule Type",!,?10,"Attending Code",!,?10,"Time Pat Out OR",!,?10,"Wound Classification",!,?10,"ASA Class",!,?10,"CPT Code (Principal)",!
"RTN","SROQN",10,0)
SEL ; select date range and specialty
"RTN","SROQN",11,0)
 D DATE^SROUTL(.SDATE,.EDATE,.SRSOUT) G:SRSOUT END D SPEC^SROUTL G:SRSOUT END
"RTN","SROQN",12,0)
 N SRINSTP S SRINST=$$INST^SROUTL0() G:SRINST="^" END S SRINSTP=$P(SRINST,"^"),SRINST=$S(SRINST["ALL DIVISIONS":SRINST,1:$P(SRINST,"^",2))
"RTN","SROQN",13,0)
IO W !!,"This report is designed to use a 132 column format.",!
"RTN","SROQN",14,0)
 K %ZIS,IOP,IO("Q"),POP S %ZIS("A")="Print the report to which Printer ? ",%ZIS("B")="",%ZIS="Q" D ^%ZIS I POP S SRSOUT=1 G END
"RTN","SROQN",15,0)
 I $D(IO("Q")) K IO("Q") S ZTDESC="Report of Missing Data for Quarterly Report",(ZTSAVE("EDATE"),ZTSAVE("SDATE"),ZTSAVE("SRINSTP"),ZTSAVE("SRSPEC*"))="",ZTRTN="EN^SROQN" D ^%ZTLOAD S SRSOUT=1 G END
"RTN","SROQN",16,0)
EN U IO S (SRTOT,SRSOUT)=0,(SRHDR,SRPAGE)=1,SRSD=SDATE-.0001,SRED=EDATE+.9999,Y=SDATE X ^DD("DD") S STARTDT=Y,Y=EDATE X ^DD("DD") S ENDATE=Y K ^TMP("SR",$J)
"RTN","SROQN",17,0)
 S SRRPT="Report of Missing Data for Quarterly Report",SRFRTO="From: "_STARTDT_"  To: "_ENDATE
"RTN","SROQN",18,0)
 S SRINST=$S(SRINSTP["ALL DIV":$P($$SITE^SROVAR,"^",2)_" - ALL DIVISIONS",1:$$GET1^DIQ(4,SRINSTP,.01))
"RTN","SROQN",19,0)
 D NOW^%DTC S Y=$E(%,1,12) X ^DD("DD") S SRPRINT="Report Printed: "_Y
"RTN","SROQN",20,0)
 D HDR,AC
"RTN","SROQN",21,0)
 I '$O(^TMP("SR",$J,0)) W !!,"No data for selected date range." G END
"RTN","SROQN",22,0)
 S SRSD=0 F  S SRSD=$O(^TMP("SR",$J,SRSD)) Q:'SRSD!SRSOUT  S SRTN=0 F  S SRTN=$O(^TMP("SR",$J,SRSD,SRTN)) Q:'SRTN!SRSOUT  S SRTOT=SRTOT+1,SRZ=^TMP("SR",$J,SRSD,SRTN) D PRINT
"RTN","SROQN",23,0)
 G:SRSOUT END D:$Y+8>IOSL PAGE G:SRSOUT END W !!,"TOTAL CASES MISSING DATA: ",SRTOT
"RTN","SROQN",24,0)
 D CODES
"RTN","SROQN",25,0)
END W:$E(IOST)="P" @IOF I $D(ZTQUEUED) Q:$G(ZTSTOP)  S ZTREQ="@" Q
"RTN","SROQN",26,0)
 I 'SRSOUT,$E(IOST)'="P" D PRESS
"RTN","SROQN",27,0)
 D ^%ZISC K ^TMP("SR",$J),SRFRTO,SRIO,SRTOT,SRRPT,SRTN D ^SRSKILL W @IOF
"RTN","SROQN",28,0)
 Q
"RTN","SROQN",29,0)
AC F  S SRSD=$O(^SRF("AC",SRSD)) Q:'SRSD!(SRSD>SRED)!SRSOUT  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSD,SRTN)) Q:'SRTN  I $D(^SRF(SRTN,0)),$$MANDIV^SROUTL0(SRINSTP,SRTN) D CASE
"RTN","SROQN",30,0)
 Q
"RTN","SROQN",31,0)
CASE ; examine case for missing items
"RTN","SROQN",32,0)
 Q:'$P($G(^SRF(SRTN,.2)),"^",10)!($P($G(^SRF(SRTN,"NON")),"^")="Y")!$P($G(^SRF(SRTN,30)),"^")
"RTN","SROQN",33,0)
 S SR(0)=^SRF(SRTN,0),DFN=$P(SR(0),"^"),SRSS=$P(SR(0),"^",4) I SRSPEC Q:SRSS'=SRSPEC
"RTN","SROQN",34,0)
 S SRIO=$P(SR(0),"^",12) I SRIO'="O"&(SRIO'="I") S SRIO=""
"RTN","SROQN",35,0)
 S SRMM=$P(SR(0),"^",3),SRTYPE=$P(SR(0),"^",10),SRASA=$P($G(^SRF(SRTN,1.1)),"^",3),SRATT=$P($G(^SRF(SRTN,.1)),"^",10),SRWC=$P($G(^SRF(SRTN,"1.0")),"^",8) I SRATT="" D RS^SROQ0A
"RTN","SROQN",36,0)
 S SROUT=$P($G(^SRF(SRTN,.2)),"^",12),SRCPT=$P($G(^SRO(136,SRTN,0)),"^",2)
"RTN","SROQN",37,0)
 S (SRMISS,X)="" S:SRIO="" X="A," S:SRMM="" X=X_"B," S:SRTYPE="" X=X_"C," S:SRATT=99 X=X_"D," S:'SROUT X=X_"E," S:SRWC="" X=X_"F," S:SRASA="" X=X_"G," S:'SRCPT X=X_"H,"
"RTN","SROQN",38,0)
 S Y=$L(X),SRMISS=$E(X,1,Y-1) I SRMISS'="" S ^TMP("SR",$J,SRSD,SRTN)=DFN_"^"_SRSS_"^"_SRMISS
"RTN","SROQN",39,0)
 Q
"RTN","SROQN",40,0)
PRINT ; print case information
"RTN","SROQN",41,0)
 D:$Y+9>IOSL PAGE Q:SRSOUT  S DFN=$P(SRZ,"^"),SRSS=$P(SRZ,"^",2),SRSS=$S(SRSS:$P(^SRO(137.45,SRSS,0),"^"),1:"SPECIALTY NOT ENTERED"),Y=SRSD X ^DD("DD") S SRSDATE=Y
"RTN","SROQN",42,0)
 S SRDOC=$P($G(^SRF(SRTN,.1)),"^",4) I SRDOC S SRDOC=$P(^VA(200,SRDOC,0),"^")
"RTN","SROQN",43,0)
 D DEM^VADPT S SRSNM=VADM(1),SRSSN=VA("PID"),X1=$E(SRSD,1,7),X2=$P(VADM(3),"^"),SRAGE=$E(X1,1,3)-$E(X2,1,3)-($E(X1,4,7)<$E(X2,4,7)),SRMISS=$P(SRZ,"^",3)
"RTN","SROQN",44,0)
 K SRPROC S X=$P(^SRF(SRTN,"OP"),"^") I $L(X)<79 S SRPROC(1)=X
"RTN","SROQN",45,0)
 I $L(X)>78 S K=1 F  D  I $L(X)<56 S SRPROC(K)=X Q
"RTN","SROQN",46,0)
 .F I=0:1:54 S J=78-I,Y=$E(X,J) I Y=" " S SRPROC(K)=$E(X,1,J-1),X=$E(X,J+1,$L(X)) S K=K+1 Q
"RTN","SROQN",47,0)
 W !,SRSDATE,?22,SRSNM,?54,$S(SRSPEC:SRDOC,1:SRSS),?97,SRMISS,!,SRTN,?22,SRSSN_"  ("_SRAGE_")",?54,SRPROC(1),!
"RTN","SROQN",48,0)
 W:$D(SRPROC(2)) ?54,SRPROC(2),!
"RTN","SROQN",49,0)
 Q
"RTN","SROQN",50,0)
PRESS W !! K DIR S DIR(0)="E" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1
"RTN","SROQN",51,0)
 Q
"RTN","SROQN",52,0)
PAGE D CODES I $E(IOST)="P"!SRHDR G HDR
"RTN","SROQN",53,0)
 D PRESS I SRSOUT Q
"RTN","SROQN",54,0)
HDR ; print heading
"RTN","SROQN",55,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SROQN",56,0)
 W:$Y @IOF W:$E(IOST)="P" !,?(IOM-$L(SRINST)\2),SRINST W !,?(IOM-$L(SRRPT)\2),SRRPT,?(IOM-10),$J("PAGE "_SRPAGE,9),!,?(IOM-$L(SRFRTO)\2),SRFRTO W:$E(IOST)="P" !,?(IOM-$L(SRPRINT)\2),SRPRINT
"RTN","SROQN",57,0)
 I SRSPEC S X="SURGICAL SPECIALTY: "_SRSPECN W !,?(IOM-$L(X)\2),X
"RTN","SROQN",58,0)
 W !!,"DATE OF OPERATION",?22,"PATIENT NAME",?54,$S(SRSPEC:"SURGEON",1:"SURGICAL SPECIALTY"),?97,"MISSING ITEMS",!,"CASE #",?22,"PATIENT ID  (AGE)",?54,"PRINCIPAL PROCEDURE"
"RTN","SROQN",59,0)
 S SRHDR=0,SRPAGE=SRPAGE+1 W ! F I=1:1:IOM W "="
"RTN","SROQN",60,0)
 Q
"RTN","SROQN",61,0)
CODES ; missing items code definition
"RTN","SROQN",62,0)
 F I=$Y:1:(IOSL-8) W !
"RTN","SROQN",63,0)
 W ! F I=1:1:IOM W "-"
"RTN","SROQN",64,0)
 W !,"MISSING ITEMS CODES:  A-IN/OUT-PATIENT STATUS,   B-MAJOR/MINOR,   C-CASE SCHEDULE TYPE,     D-ATTENDING CODE,"
"RTN","SROQN",65,0)
 W !,"E-TIME PAT OUT OR,    F-WOUND CLASSIFICATION,    G-ASA CLASS,     H-CPT CODE (PRINCIPAL)"
"RTN","SROQN",66,0)
 Q
"RTN","SROTHER")
0^50^B14170836^B13644546
"RTN","SROTHER",1,0)
SROTHER ;BIR/MAM - OTHER PROCEDURES ;05/14/99  12:14 PM
"RTN","SROTHER",2,0)
 ;;3.0; Surgery ;**38,88,142**;24 Jun 93
"RTN","SROTHER",3,0)
 S SRSOUT=0 I '$D(SRTN) W @IOF,!!,"A surgical case must be selected prior to using this option.",!!,"Press RETURN to continue  " R X:DTIME S SRSOUT=1 G END
"RTN","SROTHER",4,0)
 D ^SROAUTL S SR(0)=^SRF(SRTN,0),Y=$P(SR(0),"^",9),SRDATE=$E(Y,4,5)_"/"_$E(Y,6,7)_"/"_$E(Y,2,3),SRLINE="" F I=0:1:79 S SRLINE=SRLINE_"-"
"RTN","SROTHER",5,0)
START D HDR K SROTHER S (OTH,CNT)=0 F  S OTH=$O(^SRF(SRTN,13,OTH)) Q:'OTH!($D(SROTHER))  Q:SRSOUT  S CNT=CNT+1 D LIST I CNT=13 W !!,SRLINE D SEL
"RTN","SROTHER",6,0)
 I SRSOUT Q
"RTN","SROTHER",7,0)
 I $D(SROTHER) D EDIT G START
"RTN","SROTHER",8,0)
 I CNT W !!,SRLINE
"RTN","SROTHER",9,0)
 I CNT=0 D ASK G:'SRSOUT START S SRSOUT=0 Q
"RTN","SROTHER",10,0)
OPT W !!,"Enter "_$S(CNT=1:1,1:"(1-"_CNT_")")_" to edit an existing procedure, or 'NEW' to",!,"enter another operative procedure: " R X:DTIME I '$T!("^"[X) Q
"RTN","SROTHER",11,0)
 I $E(X)="N" D NEW G START
"RTN","SROTHER",12,0)
 I '$D(OTHER(X)) W !!,"Select the number corresponding to the procedure you want to edit, or 'NEW' to",!,"enter an additional operative procedure." G OPT
"RTN","SROTHER",13,0)
 S SROTHER=$P(OTHER(X),"^",3) D EDIT G START
"RTN","SROTHER",14,0)
 Q
"RTN","SROTHER",15,0)
END I 'SRSOUT W !!,"Press RETURN to continue  " R X:DTIME
"RTN","SROTHER",16,0)
 D ^SRSKILL W @IOF
"RTN","SROTHER",17,0)
 Q
"RTN","SROTHER",18,0)
LIST ; list existing procedures
"RTN","SROTHER",19,0)
 S X=^SRF(SRTN,13,OTH,0),CPT=$P($G(^SRF(SRTN,13,OTH,2)),"^") I CPT S Y=$P($$CPT^ICPTCOD(CPT),"^",2),SRDA=OTH D SSOTH^SROCPT S CPT=Y
"RTN","SROTHER",20,0)
 I CPT="" S CPT="NOT ENTERED"
"RTN","SROTHER",21,0)
 S OTHER(CNT)=$P(X,"^")_"^"_CPT_"^"_OTH
"RTN","SROTHER",22,0)
 W !,$S(CNT<10:" ",1:"")_CNT_". "_$P(OTHER(CNT),"^")_$S('$D(SRSUPCPT):" (CPT: "_$P(OTHER(CNT),"^",2)_")",1:"")
"RTN","SROTHER",23,0)
 Q
"RTN","SROTHER",24,0)
SEL ; select procedure
"RTN","SROTHER",25,0)
 W !!,"Select (1-"_CNT_") to edit an existing procedure, or RETURN to continue: " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SROTHER",26,0)
 I X="" S CNT=0 K OTHER D HDR Q
"RTN","SROTHER",27,0)
 I '$D(OTHER(X)) W !!,"Enter the number corresponding to the procedure you want to edit, or RETURN",!,"to continue listing procedures." G SEL
"RTN","SROTHER",28,0)
 S SROTHER=$P(OTHER(X),"^",3)
"RTN","SROTHER",29,0)
 Q
"RTN","SROTHER",30,0)
HDR ; print screen header
"RTN","SROTHER",31,0)
 S SRPAGE="OTHER OPERATIVE PROCEDURES" D HDR^SROAUTL
"RTN","SROTHER",32,0)
 Q
"RTN","SROTHER",33,0)
EDIT ; edit one procedure
"RTN","SROTHER",34,0)
 D HDR W ! S DA=SROTHER,DIE="^SRF("_SRTN_",13,",DA(1)=SRTN,DR=".01T"_$S('$D(SRSUPCPT):";3T",1:"")
"RTN","SROTHER",35,0)
 D ^DIE K DR,DIE
"RTN","SROTHER",36,0)
 Q
"RTN","SROTHER",37,0)
ASK W !!,"There are no additional procedures entered for this case.  Do you want to add",!,"a new procedure ? YES// " R SRYN:DTIME I '$T!(SRYN["^") S SRYN="N"
"RTN","SROTHER",38,0)
 S:SRYN="" SRYN="Y"
"RTN","SROTHER",39,0)
 S SRYN=$E(SRYN) I "YyNn"'[SRYN W !!,"Enter 'YES' to add another operative procedure, or 'NO' to return to the",!,"previous screen." G ASK
"RTN","SROTHER",40,0)
 I "Nn"[SRYN S SRSOUT=1 Q
"RTN","SROTHER",41,0)
NEW D HDR W ! K DIR,DA S DIR(0)="130.16,.01",DIR("A")="Other Operative Procedure" D ^DIR I Y=""!$D(DTOUT)!$D(DUOUT) Q
"RTN","SROTHER",42,0)
 I '$D(^SRF(SRTN,13,0)) S ^SRF(SRTN,13,0)="^130.16A^^"
"RTN","SROTHER",43,0)
 K DA,DIC,DD,DO,DINUM S DA(1)=SRTN,X=Y,DIC="^SRF("_SRTN_",13,",DIC(0)="L" D FILE^DICN K DA,DIC,DD,DO,DINUM
"RTN","SROTHER",44,0)
 I '$D(SRSUPCPT) K DR,DIE S DA=+Y,DA(1)=SRTN,DR="3T",DIE="^SRF("_SRTN_",13," D ^DIE K DR
"RTN","SROTHER",45,0)
 Q
"RTN","SROUTL")
0^51^B41983666^B41589621
"RTN","SROUTL",1,0)
SROUTL ;BIR/ADM - UTILITY ROUTINE ;01/05/05
"RTN","SROUTL",2,0)
 ;;3.0; Surgery ;**58,62,69,77,50,88,94,100,129,134,141,142**;24 Jun 93
"RTN","SROUTL",3,0)
 ;
"RTN","SROUTL",4,0)
 ; Reference to $P(^SC(SRLOC,0),"^",17) supported by DBIA #964
"RTN","SROUTL",5,0)
 ;
"RTN","SROUTL",6,0)
 Q
"RTN","SROUTL",7,0)
HDR ; display menu header
"RTN","SROUTL",8,0)
 Q:'$D(SRSITE)
"RTN","SROUTL",9,0)
 N DFN,SRCNT,SRNUM,SRSDATE,SRX,Y S (SRCNT,SRX)=0 F  S SRX=$O(^SRO(133,SRX)) Q:'SRX  I '$P($G(^SRO(133,SRX,0)),"^",21) S SRCNT=SRCNT+1
"RTN","SROUTL",10,0)
 I SRCNT>1 S SRNUM=$$GET1^DIQ(4,SRSITE("DIV"),99) S Y="Division: "_SRSITE("SITE")_"  ("_SRNUM_")" W @IOF,!,?(80-$L(Y)\2),Y
"RTN","SROUTL",11,0)
 I $G(SRTN) D
"RTN","SROUTL",12,0)
 .S DFN=$P(^SRF(SRTN,0),"^") D DEM^VADPT S Y=$E($P(^SRF(SRTN,0),"^",9),1,7) X ^DD("DD") S SRSDATE=Y
"RTN","SROUTL",13,0)
 .W:SRCNT'>1 @IOF W:SRCNT>1 !! W " "_VADM(1)_" ("_VA("PID")_")   Case #"_SRTN_" - "_SRSDATE
"RTN","SROUTL",14,0)
 Q
"RTN","SROUTL",15,0)
CLINIC(SRLOC,SRCASE)         ; active count clinic screen for cases
"RTN","SROUTL",16,0)
 N SRCLIN,SRX,SRY,SRZ S SRZ=$S(SRCASE:$P(^SRF(SRCASE,0),U,9),1:DT) D SC I 'SRCLIN Q 0
"RTN","SROUTL",17,0)
 Q 1
"RTN","SROUTL",18,0)
ACTCLIN(SRLOC)     ; active count clinic screen
"RTN","SROUTL",19,0)
 N SRCLIN,SRX,SRY,SRZ S SRZ=DT D SC I 'SRCLIN Q 0
"RTN","SROUTL",20,0)
 Q 1
"RTN","SROUTL",21,0)
SC N SRKL S SRCLIN=1 S SRKL=$$GET1^DIQ(44,SRLOC,2.1) I SRKL'="CLINIC"!($P(^SC(SRLOC,0),"^",17)="Y") S SRCLIN=0 Q
"RTN","SROUTL",22,0)
 S SRX=$P($G(^SC(SRLOC,"I")),"^") I 'SRX Q
"RTN","SROUTL",23,0)
 S SRY=$P($G(^SC(SRLOC,"I")),U,2) I SRZ'<SRX,((SRY="")!(SRZ<SRY)) S SRCLIN=0
"RTN","SROUTL",24,0)
 Q
"RTN","SROUTL",25,0)
INOUT ; select in/out-patient status choice for report
"RTN","SROUTL",26,0)
 K DIR S DIR("A",1)="Print "_$S($D(SRRPT):SRRPT,1:"report")_" for",DIR("A",2)="",DIR("A",5)="  I - Inpatient cases only",DIR("A",4)="  O - Outpatient cases only",DIR("A",3)="  A - All cases"
"RTN","SROUTL",27,0)
 S DIR("A",6)="",DIR("A")="Select Letter (I, O or A): ",DIR("B")=$S($D(SRB):SRB,1:"A")
"RTN","SROUTL",28,0)
 S DIR(0)="SAM^A:All Cases;O:Outpatient Cases Only;I:Inpatient Cases Only" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROUTL",29,0)
 S SRIO=Y
"RTN","SROUTL",30,0)
 Q
"RTN","SROUTL",31,0)
DATE(SRSD,SRED,SRQ)  ; starting and ending date utility (pass by reference)
"RTN","SROUTL",32,0)
 ; The following variables are returned
"RTN","SROUTL",33,0)
 ;  SRSD - starting date
"RTN","SROUTL",34,0)
 ;  SRED - ending date
"RTN","SROUTL",35,0)
 ;  SRQ  - user interrupt
"RTN","SROUTL",36,0)
 S (SRSD,SRED,SRQ)=0 W ! F  D  Q:SRED'<SRSD!SRQ
"RTN","SROUTL",37,0)
 .K %DT S %DT="AEPX",%DT("A")="Start with Date: " D ^%DT I Y<1 S SRQ=1 Q
"RTN","SROUTL",38,0)
 .S SRSD=Y
"RTN","SROUTL",39,0)
 .K %DT S %DT="AEPX",%DT("A")="End with Date: " D ^%DT I Y<1 S SRQ=1 Q
"RTN","SROUTL",40,0)
 .I Y<SRSD W !!,"The ending date must be later than the starting date.",!
"RTN","SROUTL",41,0)
 .S SRED=Y
"RTN","SROUTL",42,0)
 Q
"RTN","SROUTL",43,0)
SPEC ; select surgical specialty
"RTN","SROUTL",44,0)
 W @IOF,! S DIR("?",1)="Enter YES if you would like the report printed for all Surgical Specialties",DIR("?")="or enter NO to select a specific specialty."
"RTN","SROUTL",45,0)
 S DIR("A")="Do you want the report for all Surgical Specialties ? ",DIR("B")="YES",DIR(0)="YA" D ^DIR K DIR I $D(DTOUT)!$D(DUOUT) S SRSOUT=1 Q
"RTN","SROUTL",46,0)
 I 'Y W ! K DIC S DIC=137.45,DIC(0)="QEAMZ",DIC("A")="Select Surgical Specialty: ",DIC("S")="I '$P(^(0),""^"",3)" D ^DIC K DIC S:Y<0 SRSOUT=1 Q:Y<0  S SRSPEC=+Y,SRSPECN=$P(Y(0),"^")
"RTN","SROUTL",47,0)
 Q
"RTN","SROUTL",48,0)
PROC ; put procedures and CPT code in array for display
"RTN","SROUTL",49,0)
 N SRDA,X,Y K SRPROC S K=1,Y=$P(^SRF(SRTN,"OP"),"^",2),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"???") I Y'="???" D SSPRIN^SROCPT
"RTN","SROUTL",50,0)
 S X=$P(^SRF(SRTN,"OP"),"^")_$S($G(SRSUPCPT)=1:"",1:" (CPT Code: "_Y_")") I $L(X)<(SRL+1) S SRPROC(K)=X,K=K+1 G OTH
"RTN","SROUTL",51,0)
 D FORMAT
"RTN","SROUTL",52,0)
OTH S SRDA=0 F  S SRDA=$O(^SRF(SRTN,13,SRDA)) Q:'SRDA  D
"RTN","SROUTL",53,0)
 .S Y=$P($G(^SRF(SRTN,13,SRDA,2)),"^"),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"???")
"RTN","SROUTL",54,0)
 .I Y'="???" D SSOTH^SROCPT
"RTN","SROUTL",55,0)
 .S X=$P(^SRF(SRTN,13,SRDA,0),"^")_$S($G(SRSUPCPT)=1:"",1:" (CPT Code: "_Y_")")
"RTN","SROUTL",56,0)
 .I $L(X)<(SRL+1) S SRPROC(K)=X,K=K+1 Q
"RTN","SROUTL",57,0)
 .D FORMAT
"RTN","SROUTL",58,0)
 Q
"RTN","SROUTL",59,0)
FORMAT I $L(X)>SRL F  D  I $L(X)<(SRL+1) S SRPROC(K)=X,K=K+1 Q
"RTN","SROUTL",60,0)
 .F I=0:1:(SRL-1) S J=SRL-I,Y=$E(X,J) I Y=" " S SRPROC(K)=$E(X,1,J-1),X=$E(X,J+1,$L(X)) S K=K+1 Q
"RTN","SROUTL",61,0)
 Q
"RTN","SROUTL",62,0)
DIAG ; check diagnosis input for required space in every 31 characters
"RTN","SROUTL",63,0)
 Q:$L(X)<31  N SRC,SRBL,SRDIAG,SRFLG
"RTN","SROUTL",64,0)
 S SRDIAG=X,SRFLG=0 F  D  Q:SRFLG!($L(SRDIAG)'>30)
"RTN","SROUTL",65,0)
 .S SRBL=$F(SRDIAG," ") I SRBL>32!('SRBL) S SRFLG=1 K X Q
"RTN","SROUTL",66,0)
 .S SRDIAG=$E(SRDIAG,SRBL,$L(SRDIAG))
"RTN","SROUTL",67,0)
 I '$D(X) D
"RTN","SROUTL",68,0)
 .S SRC(1)="Answer must contain at least one space in every 31 characters of length.",SRC(1,"F")="!!?5",SRC(2)="If you are using a comma (,) to separate information, leave a space after",SRC(2,"F")="!?5"
"RTN","SROUTL",69,0)
 .S SRC(3)="it.  Please re-enter the diagnosis.",SRC(3,"F")="!?5" D EN^DDIOL(.SRC)
"RTN","SROUTL",70,0)
 Q
"RTN","SROUTL",71,0)
LOCK(SRCASE) ;
"RTN","SROUTL",72,0)
 N D0,SRCONCC,SRLCK,SRNOW,SRNOW1,SRTAG,SRUSER,SRX
"RTN","SROUTL",73,0)
 S SRNOW=$$NOW^XLFDT,SRNOW1=$$FMADD^XLFDT(SRNOW,,2)
"RTN","SROUTL",74,0)
 S SRLCK=1,SRTAG="",SRCONCC=$P($G(^SRF(SRCASE,"CON")),"^")
"RTN","SROUTL",75,0)
 I $$SIGNED^SROESUTL(SRCASE)!$G(SRESIG) D SINED Q SRLCK
"RTN","SROUTL",76,0)
 L +^XTMP("SRLOCK-"_SRCASE,DUZ,$J):1
"RTN","SROUTL",77,0)
 E  D E1 S SRLCK=0 Q SRLCK
"RTN","SROUTL",78,0)
 I SRCONCC D
"RTN","SROUTL",79,0)
 .L +^XTMP("SRLOCK-"_SRCONCC,DUZ,$J):1
"RTN","SROUTL",80,0)
 .E  D  S SRLCK=0
"RTN","SROUTL",81,0)
 ..D E2 L -^XTMP("SRLOCK-"_SRCASE,DUZ,$J)
"RTN","SROUTL",82,0)
 D:SRLCK XTMP
"RTN","SROUTL",83,0)
 Q SRLCK
"RTN","SROUTL",84,0)
E1 S SRUSER="Another person",SRX=$O(^XTMP("SRLOCK-"_SRCASE,0))
"RTN","SROUTL",85,0)
 I SRX S SRUSER=$P($G(^VA(200,SRX,0)),"^")
"RTN","SROUTL",86,0)
 D EN^DDIOL(SRUSER_" is editing this case. Please try later.","","!,$C(7)") H 2
"RTN","SROUTL",87,0)
 Q
"RTN","SROUTL",88,0)
E2 S SRUSER="Another person",SRX=$O(^XTMP("SRLOCK-"_SRCONCC,0))
"RTN","SROUTL",89,0)
 I SRX S SRUSER=$P($G(^VA(200,SRX,0)),"^")
"RTN","SROUTL",90,0)
 D EN^DDIOL(SRUSER_" is editing the concurrent case. Please try later.","","!,$C(7)") H 2
"RTN","SROUTL",91,0)
 Q
"RTN","SROUTL",92,0)
SINED L +^XTMP("SRLOCK-"_SRCASE):1
"RTN","SROUTL",93,0)
 E  D E1 S SRLCK=0 Q
"RTN","SROUTL",94,0)
 I SRCONCC D  Q:'SRLCK
"RTN","SROUTL",95,0)
 .L +^XTMP("SRLOCK-"_SRCONCC):1
"RTN","SROUTL",96,0)
 .E  D  S SRLCK=0
"RTN","SROUTL",97,0)
 ..D E2 L -^XTMP("SRLOCK-"_SRCASE)
"RTN","SROUTL",98,0)
 S SRTAG="-Master"
"RTN","SROUTL",99,0)
XTMP S ^XTMP("SRLOCK-"_SRCASE,0)=SRNOW1_"^"_SRNOW_"^Surgery Case Lock"_SRTAG_"^"_$J,^XTMP("SRLOCK-"_SRCASE,DUZ,$J)=""
"RTN","SROUTL",100,0)
 I SRCONCC S ^XTMP("SRLOCK-"_SRCONCC,0)=SRNOW1_"^"_SRNOW_"^Surgery Case Lock"_SRTAG_"^"_$J,^XTMP("SRLOCK-"_SRCONCC,DUZ,$J)=""
"RTN","SROUTL",101,0)
 Q
"RTN","SROUTL",102,0)
UNLOCK(SRCASE) ; apply decremental lock
"RTN","SROUTL",103,0)
 N SRCC,SRCONCC S SRCONCC=$P($G(^SRF(SRCASE,"CON")),"^")
"RTN","SROUTL",104,0)
 L -^XTMP("SRLOCK-"_SRCASE),-^XTMP("SRLOCK-"_SRCASE,DUZ,$J) K ^XTMP("SRLOCK-"_SRCASE,DUZ,$J)
"RTN","SROUTL",105,0)
 I '$O(^XTMP("SRLOCK-"_SRCASE,0))!(($G(^XTMP("SRLOCK-"_SRCASE,0))["-Master")&($P($G(^XTMP("SRLOCK-"_SRCASE,0)),"^",4)=$J)) K ^XTMP("SRLOCK-"_SRCASE)
"RTN","SROUTL",106,0)
 I SRCONCC D
"RTN","SROUTL",107,0)
 .L -^XTMP("SRLOCK-"_SRCONCC),-^XTMP("SRLOCK-"_SRCONCC,DUZ,$J) K ^XTMP("SRLOCK-"_SRCONCC,DUZ,$J)
"RTN","SROUTL",108,0)
 .I '$O(^XTMP("SRLOCK-"_SRCONCC,0))!(($G(^XTMP("SRLOCK-"_SRCONCC,0))["-Master")&($P($G(^XTMP("SRLOCK-"_SRCONCC,0)),"^",4)=$J)) K ^XTMP("SRLOCK-"_SRCONCC)
"RTN","SROUTL",109,0)
 Q
"RTN","SROUTL",110,0)
NOCNT(SRDA) ; screen for active, non-count clinic for this division
"RTN","SROUTL",111,0)
 N SRDIV,SRKL,SRLOC,SRX,SRY,SRZ
"RTN","SROUTL",112,0)
 S SRDIV=$P($G(^SRO(133,SRDA,0)),"^"),SRLOC=Y,SRZ=DT
"RTN","SROUTL",113,0)
 I SRDIV'=$P($G(^SC(SRLOC,0)),"^",4) Q 0
"RTN","SROUTL",114,0)
 S SRKL=$$GET1^DIQ(44,SRLOC,2.1) I SRKL'="CLINIC" Q 0
"RTN","SROUTL",115,0)
 I $P(^SC(SRLOC,0),"^",17)'="Y" Q 0
"RTN","SROUTL",116,0)
 S SRX=$P($G(^SC(SRLOC,"I")),"^") I 'SRX Q 1
"RTN","SROUTL",117,0)
 S SRY=$P($G(^SC(SRLOC,"I")),U,2) I SRZ'<SRX,((SRY="")!(SRZ<SRY)) Q 0
"RTN","SROUTL",118,0)
 Q 1
"RTN","SROUTL",119,0)
DESC ; output attending code description when doing lookup
"RTN","SROUTL",120,0)
 N SRX,SRY,SRZ
"RTN","SROUTL",121,0)
 S SRX=0,SRY=Y F  S SRX=$O(^SRO(132.9,SRY,1,SRX)) Q:'SRX  S SRZ(SRX)=^SRO(132.9,SRY,1,SRX,0),SRZ(SRX,"F")="!?2"
"RTN","SROUTL",122,0)
 I $O(SRZ(0)) D EN^DDIOL(.SRZ)
"RTN","SROUTL",123,0)
 D EN^DDIOL(" ","","!")
"RTN","SROUTL",124,0)
 Q
"RTN","SROUTLN")
0^73^B1090084
"RTN","SROUTLN",1,0)
SROUTLN ;BIR/SJA - UTILITY ROUTINE ;03/14/05
"RTN","SROUTLN",2,0)
 ;;3.0; Surgery ;**142**;24 Jun 93
"RTN","SROUTLN",3,0)
 ;
"RTN","SROUTLN",4,0)
 Q
"RTN","SROUTLN",5,0)
PROC ; put procedures and CPT code in array for display
"RTN","SROUTLN",6,0)
 N SRDA,X,XX,Y K SRPROC S K=1,Y=$P($G(^SRO(136,SRTN,0)),"^",2),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"???")
"RTN","SROUTLN",7,0)
 I Y'="???" D SSPRIN^SROCPT0
"RTN","SROUTLN",8,0)
 S SRPROC(K)="CPT Codes: "_Y
"RTN","SROUTLN",9,0)
OTH S SRDA=0 F  S SRDA=$O(^SRO(136,SRTN,3,SRDA)) Q:'SRDA  D
"RTN","SROUTLN",10,0)
 .S Y=$P($G(^SRO(136,SRTN,3,SRDA,0)),"^"),Y=$S(Y:$P($$CPT^ICPTCOD(Y),"^",2),1:"???")
"RTN","SROUTLN",11,0)
 .I Y'="???" D SSOTH^SROCPT0
"RTN","SROUTLN",12,0)
 .I $L(Y)+$L(SRPROC(K))'>SRL S SRPROC(K)=SRPROC(K)_", "_Y Q
"RTN","SROUTLN",13,0)
 .S K=K+1,SRPROC(K)=Y
"RTN","SROUTLN",14,0)
 Q
"RTN","SRSAVG")
0^64^B5842281^B5822900
"RTN","SRSAVG",1,0)
SRSAVG ;BIR/MAM - CALCULATE AVG OPERATION TIME ;18 JAN 1990  8:00 AM
"RTN","SRSAVG",2,0)
 ;;3.0; Surgery ;**12,13,142**;24 Jun 93
"RTN","SRSAVG",3,0)
 I 'SRSPEC S SRAVG="" Q
"RTN","SRSAVG",4,0)
 I 'SRSCPT S SRAVG="" Q
"RTN","SRSAVG",5,0)
 I '$D(^SRO(131.25,SRSPEC,1,SRSCPT,0)) S SRAVG="" Q
"RTN","SRSAVG",6,0)
 S SRAV=^SRO(131.25,SRSPEC,1,SRSCPT,0),SRMIN=$P(SRAV,"^",2),SRNUM=$P(SRAV,"^",3),SRAV=SRMIN/SRNUM,SRAV=SRAV\1
"RTN","SRSAVG",7,0)
 S SRAV1=SRAV#60,SRAV=SRAV\60 S:SRAV1?1N SRAV1=0_SRAV1 S SRAVG=SRAV_":"_SRAV1
"RTN","SRSAVG",8,0)
 Q
"RTN","SRSAVG",9,0)
TASK ; nightly task to update average times
"RTN","SRSAVG",10,0)
 S X1=DT,X2=-14 D C^%DTC S DATE=X,SRSDATE=DATE-.0001,END=DATE+.9999
"RTN","SRSAVG",11,0)
 F  S SRSDATE=$O(^SRF("AC",SRSDATE)) Q:'SRSDATE!(SRSDATE>END)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDATE,SRTN)) Q:'SRTN  D UPDATE
"RTN","SRSAVG",12,0)
 K SRTN D ^SRSKILL
"RTN","SRSAVG",13,0)
 Q
"RTN","SRSAVG",14,0)
UPDATE ; update operation times
"RTN","SRSAVG",15,0)
 S SRSPEC=$P(^SRF(SRTN,0),"^",4),SRSCPT=$P($G(^SRO(136,SRTN,0)),"^",2)
"RTN","SRSAVG",16,0)
 S SR(.2)=$S($D(^SRF(SRTN,.2)):^(.2),1:""),SRIN=$P(SR(.2),"^",2),SROUT=$P(SR(.2),"^",3)
"RTN","SRSAVG",17,0)
 I SRSPEC=""!(SRSCPT="")!(SRIN="")!(SROUT="") Q
"RTN","SRSAVG",18,0)
 S X=SRIN,X1=SROUT,Y=$E(X1_"000",9,10)-$E(X_"000",9,10)*60+$E(X1_"00000",11,12)-$E(X_"00000",11,12),X2=X,X=$P(X,".",1)'=$P(X1,".",1) D ^%DTC:X S SRTIME=X*1440+Y
"RTN","SRSAVG",19,0)
 I '$D(^SRO(131.25,SRSPEC,0)) K DD,DO S DIC="^SRO(131.25,",DIC(0)="L",DLAYGO=131.25,(X,DINUM)=SRSPEC D FILE^DICN K DIC,DLAYGO
"RTN","SRSAVG",20,0)
 I '$D(^SRO(131.25,SRSPEC,1)) S ^SRO(131.25,SRSPEC,1,0)="^131.251PA^0^0"
"RTN","SRSAVG",21,0)
 S $P(^SRO(131.25,SRSPEC,1,0),"^",4)=$P(^SRO(131.25,SRSPEC,1,0),"^",4)+1 I SRSCPT>$P(^SRO(131.25,SRSPEC,1,0),"^",3) S $P(^(0),"^",3)=SRSCPT
"RTN","SRSAVG",22,0)
 I '$D(^SRO(131.25,SRSPEC,1,SRSCPT,0)) S ^SRO(131.25,SRSPEC,1,SRSCPT,0)=SRSCPT_"^"_SRTIME_"^"_1 Q
"RTN","SRSAVG",23,0)
 S $P(^SRO(131.25,SRSPEC,1,SRSCPT,0),"^",2)=$P(^SRO(131.25,SRSPEC,1,SRSCPT,0),"^",2)+SRTIME,$P(^(0),"^",3)=$P(^(0),"^",3)+1
"RTN","SRSAVG",24,0)
 Q
"RTN","SRSCPT1")
0^52^B15065442^B16955345
"RTN","SRSCPT1",1,0)
SRSCPT1 ;BIR/MAM - MISSING CPTS (1 SPECIALTY) ;11/01/99  10:56 AM
"RTN","SRSCPT1",2,0)
 ;;3.0; Surgery ;**59,50,88,142**;24 Jun 93
"RTN","SRSCPT1",3,0)
 F  S SRSDT=$O(^SRF("AC",SRSDT)) Q:'SRSDT!(SRSDT>SRSEDT)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDT,SRTN)) Q:'SRTN  I $P($G(^SRF(SRTN,30)),"^")="",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTIL
"RTN","SRSCPT1",4,0)
 S STARTDT=$E(SDATE,4,5)_"/"_$E(SDATE,6,7)_"/"_$E(SDATE,2,3),ENDATE=$E(EDATE,4,5)_"/"_$E(EDATE,6,7)_"/"_$E(EDATE,2,3)
"RTN","SRSCPT1",5,0)
 S (SRHDR,SRSOUT)=0 D HDR S SRHDR=1,SRSDT=0 F  S SRSDT=$O(^TMP("SR",$J,SRSDT)) Q:'SRSDT!(SRSOUT)  S SRTN=0 F  S SRTN=$O(^TMP("SR",$J,SRSDT,SRTN)) Q:'SRTN!(SRSOUT)  K SR,SROP D SET
"RTN","SRSCPT1",6,0)
 I '$D(^TMP("SR",$J)) W $$NODATA^SROUTL0()
"RTN","SRSCPT1",7,0)
 Q
"RTN","SRSCPT1",8,0)
SET ; set variables & print info
"RTN","SRSCPT1",9,0)
 I $Y+8>IOSL D HDR I SRSOUT Q
"RTN","SRSCPT1",10,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SRSCPT1",11,0)
 S SR(0)=^SRF(SRTN,0)
"RTN","SRSCPT1",12,0)
 I SRFLG=1!(SRFLG=3&('SRNON)) Q:$P(SR(0),"^",4)'=SRSPEC
"RTN","SRSCPT1",13,0)
 I SRFLG=2!(SRFLG=3&(SRNON)) Q:$P($G(^SRF(SRTN,"NON")),"^",8)'=SRSPEC
"RTN","SRSCPT1",14,0)
 S DFN=+SR(0) D DEM^VADPT S SRSNM=VADM(1),SRSSN=VA("PID"),Y=$P(SR(0),"^",9) D D^DIQ S SRSDATE=$E(Y,1,12) I $L(SRSNM)>23 S SRSNM=$P(VADM(1),",")_","_$E($P(VADM(1),",",2))_"."
"RTN","SRSCPT1",15,0)
 S SROP(1)=$P(^SRF(SRTN,"OP"),"^")
"RTN","SRSCPT1",16,0)
 S CNT=1,OP=0 F  S OP=$O(^SRF(SRTN,13,OP)) Q:'OP  D
"RTN","SRSCPT1",17,0)
 .S CNT=CNT+1,SROP(CNT)=$P(^SRF(SRTN,13,OP,0),"^")
"RTN","SRSCPT1",18,0)
 S SR(.1)=$S($D(^SRF(SRTN,.1)):^(.1),1:"")
"RTN","SRSCPT1",19,0)
 S SRSUR=$S(SRNON:$P(^SRF(SRTN,"NON"),"^",6),1:$P(SR(.1),"^",4)) S:SRSUR="" SRSUR="NOT ENTERED" I SRSUR S SRSUR=$P(^VA(200,SRSUR,0),"^") I $L(SRSUR)>19 S SRSUR=$P(SRSUR,",")_","_$E($P(SRSUR,",",2))_"."
"RTN","SRSCPT1",20,0)
 W !,SRSDATE,?18,SRSNM_" ("_VA("PID")_")",?60,SRSUR,!,SRTN W:SRFLG=3&(SRNON) !,"NON-O.R."
"RTN","SRSCPT1",21,0)
 S CNT=0 F  S CNT=$O(SROP(CNT)) Q:'CNT  S SROPER="* "_SROP(CNT) D OPS
"RTN","SRSCPT1",22,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SRSCPT1",23,0)
 Q
"RTN","SRSCPT1",24,0)
UTIL ; set ^TMP("SR",$J)
"RTN","SRSCPT1",25,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SRSCPT1",26,0)
 I SRFLG=1!(SRFLG=3&('SRNON)) Q:$P($G(^SRF(SRTN,.2)),"^",12)=""
"RTN","SRSCPT1",27,0)
 I SRFLG=2 Q:'SRNON
"RTN","SRSCPT1",28,0)
 S SRMISS=0,SR("OP")=^SRF(SRTN,"OP") I '$P(SR("OP"),"^",2) S SRMISS=1 G UT
"RTN","SRSCPT1",29,0)
 S SROP=0 F  S SROP=$O(^SRF(SRTN,13,SROP)) Q:'SROP  S:'$D(^SRF(SRTN,13,SROP,2)) SRMISS=1 I $D(^SRF(SRTN,13,SROP,2)),$P(^(2),"^")="" S SRMISS=1
"RTN","SRSCPT1",30,0)
 I 'SRMISS Q
"RTN","SRSCPT1",31,0)
UT S ^TMP("SR",$J,SRSDT,SRTN)=""
"RTN","SRSCPT1",32,0)
 Q
"RTN","SRSCPT1",33,0)
HDR ; print heading
"RTN","SRSCPT1",34,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SRSCPT1",35,0)
 I SRHDR,$E(IOST)'="P" W !!,"Press RETURN to continue, or '^' to quit:.  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SRSCPT1",36,0)
 S SRTITLE=$S(SRFLG=1:"O.R. Surgical Procedures",SRFLG=2:"Non-O.R. Procedures",1:"O.R. Surgical and Non-O.R. Procedures")
"RTN","SRSCPT1",37,0)
 W:$Y @IOF W !,?(80-$L(SRINST)\2),SRINST,!,?23,"Completed Cases Missing CPT Codes",!,?(80-$L(SRTITLE)\2),SRTITLE,!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SRSCPT1",38,0)
 W !,?(80-$L("Specialty: "_SRSPECN)\2),"Specialty: "_SRSPECN,!!,"Operation Date",?18,"Patient (ID#)",?60,"Surgeon/Provider",!,"Case #",! F LINE=1:1:80 W "="
"RTN","SRSCPT1",39,0)
 Q
"RTN","SRSCPT1",40,0)
OPS ; print operations
"RTN","SRSCPT1",41,0)
 K SROPS,MM,MMM S:$L(SROPER)<60 SROPS(1)=SROPER I $L(SROPER)>59 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SRSCPT1",42,0)
 W !,?18,SROPS(1) I $D(SROPS(2)) W !,?18,SROPS(2) I $D(SROPS(3)) W !,?18,SROPS(3) I $D(SROPS(4)) W !,?18,SROPS(4)
"RTN","SRSCPT1",43,0)
 Q
"RTN","SRSCPT1",44,0)
LOOP ; break procedure if greater than 59 characters
"RTN","SRSCPT1",45,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<60  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SRSCPT1",46,0)
 Q
"RTN","SRSCPT2")
0^53^B16666832^B18638044
"RTN","SRSCPT2",1,0)
SRSCPT2 ;BIR/MAM - MISSING CPTS (ALL SPECIALTIES) ;11/01/99  10:58 AM
"RTN","SRSCPT2",2,0)
 ;;3.0; Surgery ;**59,50,88,142**;24 Jun 93
"RTN","SRSCPT2",3,0)
 ;
"RTN","SRSCPT2",4,0)
 ; Reference to ^ECC(723 supported by DBIA #205
"RTN","SRSCPT2",5,0)
 ;
"RTN","SRSCPT2",6,0)
 F  S SRSDT=$O(^SRF("AC",SRSDT)) Q:'SRSDT!(SRSDT>SRSEDT)  S SRTN=0 F  S SRTN=$O(^SRF("AC",SRSDT,SRTN)) Q:'SRTN  I $P($G(^SRF(SRTN,30)),"^")="",$D(^SRF(SRTN,0)),$$DIV^SROUTL0(SRTN) D UTIL
"RTN","SRSCPT2",7,0)
 S (SRSPEC,SRHDR,SRSOUT)=0 F  S SRSPEC=$O(^TMP("SR",$J,SRSPEC)) Q:SRSPEC=""!(SRSOUT)  D HDR S SRHDR=1 S SRSDT=0 F  S SRSDT=$O(^TMP("SR",$J,SRSPEC,SRSDT)) Q:'SRSDT!(SRSOUT)  D CASE
"RTN","SRSCPT2",8,0)
 I '$D(^TMP("SR",$J)) S SRSPEC="" D HDR W $$NODATA^SROUTL0()
"RTN","SRSCPT2",9,0)
 Q
"RTN","SRSCPT2",10,0)
CASE ; get case number
"RTN","SRSCPT2",11,0)
 S SRTN=0 F  S SRTN=$O(^TMP("SR",$J,SRSPEC,SRSDT,SRTN)) Q:'SRTN!(SRSOUT)  K SR,SROP D SET
"RTN","SRSCPT2",12,0)
 Q
"RTN","SRSCPT2",13,0)
SET ; set variables & print info
"RTN","SRSCPT2",14,0)
 I $Y+8>IOSL D HDR I SRSOUT Q
"RTN","SRSCPT2",15,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SRSCPT2",16,0)
 S SR(0)=^SRF(SRTN,0),DFN=+SR(0) D DEM^VADPT S SRSNM=VADM(1),SRSSN=VA("PID"),Y=$P(SR(0),"^",9) D D^DIQ S SRSDATE=$E(Y,1,12) I $L(SRSNM)>23 S SRSNM=$P(VADM(1),",")_","_$E($P(VADM(1),",",2))_"."
"RTN","SRSCPT2",17,0)
 S SROP(1)=$P(^SRF(SRTN,"OP"),"^")
"RTN","SRSCPT2",18,0)
 S CNT=1,OP=0 F  S OP=$O(^SRF(SRTN,13,OP)) Q:'OP  D
"RTN","SRSCPT2",19,0)
 .S CNT=CNT+1,SROP(CNT)=$P(^SRF(SRTN,13,OP,0),"^")
"RTN","SRSCPT2",20,0)
 S SR(.1)=$S($D(^SRF(SRTN,.1)):^(.1),1:"")
"RTN","SRSCPT2",21,0)
 S SRSUR=$S(SRNON:$P(^SRF(SRTN,"NON"),"^",6),1:$P(SR(.1),"^",4)) S:SRSUR="" SRSUR="NOT ENTERED" I SRSUR S SRSUR=$P(^VA(200,SRSUR,0),"^") I $L(SRSUR)>19 S SRSUR=$P(SRSUR,",")_","_$E($P(SRSUR,",",2))_"."
"RTN","SRSCPT2",22,0)
 W !,SRSDATE,?18,SRSNM_" ("_VA("PID")_")",?60,SRSUR,!,SRTN W:SRFLG=3&(SRNON) !,"NON-O.R."
"RTN","SRSCPT2",23,0)
 S CNT=0 F  S CNT=$O(SROP(CNT)) Q:'CNT  S SROPER="* "_SROP(CNT) D OPS
"RTN","SRSCPT2",24,0)
 W ! F LINE=1:1:80 W "-"
"RTN","SRSCPT2",25,0)
 Q
"RTN","SRSCPT2",26,0)
UTIL ; set ^TMP("SR",$J)
"RTN","SRSCPT2",27,0)
 S SRNON=0 I $P($G(^SRF(SRTN,"NON")),"^")="Y" S SRNON=1
"RTN","SRSCPT2",28,0)
 I SRFLG=1!(SRFLG=3&('SRNON)) Q:$P($G(^SRF(SRTN,.2)),"^",12)=""
"RTN","SRSCPT2",29,0)
 I SRFLG=2 Q:'SRNON
"RTN","SRSCPT2",30,0)
 S SRMISS=0,SR("OP")=^SRF(SRTN,"OP") I '$P(SR("OP"),"^",2) S SRMISS=1 G UT
"RTN","SRSCPT2",31,0)
 S SROP=0 F  S SROP=$O(^SRF(SRTN,13,SROP)) Q:'SROP  S:'$D(^SRF(SRTN,13,SROP,2)) SRMISS=1 I $D(^SRF(SRTN,13,SROP,2)),$P(^(2),"^")="" S SRMISS=1
"RTN","SRSCPT2",32,0)
 I 'SRMISS Q
"RTN","SRSCPT2",33,0)
UT I SRNON S SRSPEC=$P(^SRF(SRTN,"NON"),"^",8),SRSPECN=$S(SRSPEC:$P(^ECC(723,SRSPEC,0),"^"),1:"UNKNOWN")
"RTN","SRSCPT2",34,0)
 I 'SRNON S SRSPEC=$P(^SRF(SRTN,0),"^",4),SRSPECN=$S('SRSPEC:"UNKNOWN",1:$P(^SRO(137.45,SRSPEC,0),"^"))
"RTN","SRSCPT2",35,0)
 S ^TMP("SR",$J,SRSPECN,SRSDT,SRTN)=""
"RTN","SRSCPT2",36,0)
 Q
"RTN","SRSCPT2",37,0)
HDR ; print heading
"RTN","SRSCPT2",38,0)
 I $D(ZTQUEUED) D ^SROSTOP I SRHALT S SRSOUT=1 Q
"RTN","SRSCPT2",39,0)
 I SRHDR,$E(IOST)'="P" W !!,"Press RETURN to continue, or '^' to quit:.  " R X:DTIME I '$T!(X["^") S SRSOUT=1 Q
"RTN","SRSCPT2",40,0)
 S SRTITLE=$S(SRFLG=1:"O.R. Surgical Procedures",SRFLG=2:"Non-O.R. Procedures",1:"O.R. Surgical and Non-O.R. Procedures")
"RTN","SRSCPT2",41,0)
 W:$Y @IOF W !,?(80-$L(SRINST)\2),SRINST,!,?23,"Completed Cases Missing CPT Codes",!,?(80-$L(SRTITLE)\2),SRTITLE,!,?(80-$L(SRFRTO)\2),SRFRTO
"RTN","SRSCPT2",42,0)
 W:SRSPEC'="" !,?(80-$L("Specialty: "_SRSPEC)\2),"Specialty: "_SRSPEC W !!,"Operation Date",?18,"Patient (ID#)",?60,"Surgeon/Provider",!,"Case #",! F LINE=1:1:80 W "="
"RTN","SRSCPT2",43,0)
 Q
"RTN","SRSCPT2",44,0)
OPS ; print operations
"RTN","SRSCPT2",45,0)
 K SROPS,MM,MMM S:$L(SROPER)<60 SROPS(1)=SROPER I $L(SROPER)>59 S SROPER=SROPER_"  " F M=1:1 D LOOP Q:MMM=""
"RTN","SRSCPT2",46,0)
 W !,?18,SROPS(1) I $D(SROPS(2)) W !,?18,SROPS(2) I $D(SROPS(3)) W !,?18,SROPS(3) I $D(SROPS(4)) W !,?18,SROPS(4)
"RTN","SRSCPT2",47,0)
 Q
"RTN","SRSCPT2",48,0)
LOOP ; break procedure if greater than 59 characters
"RTN","SRSCPT2",49,0)
 S SROPS(M)="" F LOOP=1:1 S MM=$P(SROPER," "),MMM=$P(SROPER," ",2,200) Q:MMM=""  Q:$L(SROPS(M))+$L(MM)'<60  S SROPS(M)=SROPS(M)_MM_" ",SROPER=MMM
"RTN","SRSCPT2",50,0)
 Q
"RTN","SRSKILL2")
0^74^B9089088^B8914092
"RTN","SRSKILL2",1,0)
SRSKILL2 ;BIR/MAM - KILL SURGERY VARIABLES ;07/05/05
"RTN","SRSKILL2",2,0)
 ;;3.0; Surgery ;**38,70,142**;24 Jun 93
"RTN","SRSKILL2",3,0)
 K SRSTATN,SRSTATUS,SRSTFLAG,SRSTIME,SRSTIME1,SRSTOP,SRSTOWN,SRSTYP,SRSUB,SRSUMM,SRSUP,SRSUPCPT,SRSUPDT,SRSUR,SRSURG,SRSWDT,SRSWOP,SRSZIP,SRT,SRT1,SRTACD,SRTBL,SRTBLD,SRTC,SRTCC,SRTCHK,SRTCMP,SRTCMP1
"RTN","SRSKILL2",4,0)
 K SRTDA,SRTDATE,SRTDFN,SRTDG,SRTDG1,SRTDG2,SRTECH,SRTEMP,SRTI,SRTIME,SRTIMEIN,SRTITLE,SRTMAJ,SRTMS,SRTN1,SRTNEW,SRTNM,SRTO,SRTOLD,SRTP,SRTQ,SRTRAUMA,SRTREAT,SRTS,SRTSP,SRTWO,SRTY,SRTYPDD,SRTYPE
"RTN","SRSKILL2",5,0)
 K SRU,SRUL,SRUP,SRUPDT,SRUPPER,SRURET,SRUSER,SRUTIL,SRUTL,SRUTT,SRVADPT,SRVAMC,SRVFR,SRVIA,SRW,SRWARD,SRWC,SRWD,SRWL,SRWRONG,SRX,SRX1,SRX2,SRXRAY,SRXRAY1,SRXRAY2,SRXREF,SRY,SRYN,SRYR,SRZ,SRZT,SRZZ,SS,SSN,SSOPT,ST,STAFF,START
"RTN","SRSKILL2",6,0)
 K STARTDT,STATE,STATNUM,STATUS,STBY,STIME,STNAME,STOP,STORE,STY,SUB,SUBT,SUR,SURE,SURG,SX,T,TC,TCAN,TECH,TEMP,TEMPDT,TH,TIME,TIME2,TIMEIN,TIMEOUT,TIMES,TITLE,TOT,TOT1,TOT2,TOTAL,TOTANES,TOTDED,TOTMAJ,TOTMAR,TOTMAS,TOTMIN,TOTMIR
"RTN","SRSKILL2",7,0)
 K TOTMIS,TOTRATE,TOUR,TPRCNT,TT,TYPE,UL,UNIT,UR,URINE,USED,USER,V,V1,V2,VA,VADM,VAEL,VAERR,VALUE,VAPA,VERIFY,VIA,VV,W,X,X0,X1,X2,X3,X5,XMDUZ,XMER,XMFROM,XMMSG,XMREC,XMRG,XMSUB,XMTEXT,XMY,XMZ,XQSUB,XRTL,XRTN,XRT0,XX,Y,YEAR
"RTN","SRSKILL2",8,0)
 K Z,Z0,Z1,Z2,ZRTN,ZTCPU,ZTDESC,ZTDTH,ZTIO,ZTREG,ZTREQ,ZTRTN,ZTSAVE,ZTSK,ZZ
"RTN","SRSKILL2",9,0)
 K LN,ORL,SREXCL,SRG,SRMNA
"RTN","SRSKILL2",10,0)
 Q
"UP",130,130.16,-1)
130^13
"UP",130,130.16,0)
130.16
"UP",130,130.165,-2)
130^13
"UP",130,130.165,-1)
130.16^OADX
"UP",130,130.165,0)
130.165
"UP",130,130.18,-1)
130^15
"UP",130,130.18,0)
130.18
"UP",130,130.275,-1)
130^PADX
"UP",130,130.275,0)
130.275
"VER")
8.0^22.0
"^DD",130,130,.01,0)
PATIENT^RP2'^DPT(^0;1^Q
"^DD",130,130,.01,.1)
Patient's Name
"^DD",130,130,.01,1,0)
^.1
"^DD",130,130,.01,1,1,0)
130^B
"^DD",130,130,.01,1,1,1)
S ^SRF("B",$E(X,1,30),DA)=""
"^DD",130,130,.01,1,1,2)
K ^SRF("B",$E(X,1,30),DA)
"^DD",130,130,.01,1,2,0)
130^ARET^MUMPS
"^DD",130,130,.01,1,2,1)
Q
"^DD",130,130,.01,1,2,2)
D ^SROKRET
"^DD",130,130,.01,1,2,"%D",0)
3^^5^5^2930128^^
"^DD",130,130,.01,1,2,"%D",1,0)
The ARET cross reference on the PATIENT field removes returns to surgery
"^DD",130,130,.01,1,2,"%D",2,0)
that are defined for other cases when a case is deleted.  In addition, the
"^DD",130,130,.01,1,2,"%D",3,0)
ARET cross reference includes logic to remove AL and AUD nodes (on case
"^DD",130,130,.01,1,2,"%D",4,0)
deletion) that may exist because of the reverse set and kill logic on the
"^DD",130,130,.01,1,2,"%D",5,0)
AL and AUD cross references.
"^DD",130,130,.01,3)

"^DD",130,130,.01,21,0)
^^2^2^2900104^
"^DD",130,130,.01,21,1,0)
This is the name of the patient.
"^DD",130,130,.01,21,2,0)
 
"^DD",130,130,.01,"DEL",1,0)
I 1 D EN^DDIOL("Deletion from this file is not allowed !!",,"!!,?2")
"^DD",130,130,.01,"DT")
2910122
"^DD",130,130,.011,0)
IN/OUT-PATIENT STATUS^SX^I:INPATIENT;O:OUTPATIENT;^0;12^I $D(^SRF(DA,"CON")),$P(^("CON"),"^") S SRFLD=.011 D ^SROCON Q
"^DD",130,130,.011,.1)
Hospital Admission Status
"^DD",130,130,.011,1,0)
^.1
"^DD",130,130,.011,1,1,0)
130^APCE5^MUMPS
"^DD",130,130,.011,1,1,1)
D APCE^SROPCEX
"^DD",130,130,.011,1,1,2)
Q
"^DD",130,130,.011,1,1,"%D",0)
^.101^1^1^3050616^^
"^DD",130,130,.011,1,1,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.011,1,1,"DT")
3050531
"^DD",130,130,.011,3)
Enter the code corresponding to the hospital admission status at the time of surgery.
"^DD",130,130,.011,21,0)
^^5^5^3040316^
"^DD",130,130,.011,21,1,0)
NSQIP Definition (2004):
"^DD",130,130,.011,21,2,0)
This field contains the patient's hospital admission status at the time
"^DD",130,130,.011,21,3,0)
of surgery. Enter the letter "I" if the patient is an inpatient or the
"^DD",130,130,.011,21,4,0)
letter "O" if he or she was an outpatient. Please follow your
"^DD",130,130,.011,21,5,0)
hospital's definition of inpatient and outpatient status.
"^DD",130,130,.011,"DT")
3050531
"^DD",130,130,.016,0)
SERVICE CONNECTED^S^1:YES;0:NO;^0;16^Q
"^DD",130,130,.016,.1)
Treatment related to Service Connected condition (Y/N)
"^DD",130,130,.016,1,0)
^.1
"^DD",130,130,.016,1,1,0)
130^APCE16^MUMPS
"^DD",130,130,.016,1,1,1)
D APCE^SROPCEX
"^DD",130,130,.016,1,1,2)
Q
"^DD",130,130,.016,1,1,"%D",0)
^.101^1^1^3050616^^^^
"^DD",130,130,.016,1,1,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.016,1,1,"DT")
3050531
"^DD",130,130,.016,3)
If this case is treating a service connected problem, enter YES.
"^DD",130,130,.016,21,0)
^^3^3^2961004^
"^DD",130,130,.016,21,1,0)
This field will be used to indicate if this surgery or non-OR procedure
"^DD",130,130,.016,21,2,0)
is treating a VA patient for a service connected problem.  This 
"^DD",130,130,.016,21,3,0)
information may be passed to the VISIT file (#9000010) for use by PCE.
"^DD",130,130,.016,"DT")
3050531
"^DD",130,130,.017,0)
AGENT ORANGE EXPOSURE^S^1:YES;0:NO;^0;17^Q
"^DD",130,130,.017,.1)
Treatment related to Agent Orange Exposure (Y/N)
"^DD",130,130,.017,1,0)
^.1
"^DD",130,130,.017,1,1,0)
130^APCE17^MUMPS
"^DD",130,130,.017,1,1,1)
D APCE^SROPCEX
"^DD",130,130,.017,1,1,2)
Q
"^DD",130,130,.017,1,1,"%D",0)
^.101^1^1^3050616^^^^
"^DD",130,130,.017,1,1,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.017,1,1,"DT")
3050531
"^DD",130,130,.017,3)
If this case is treating an agent orange exposure problem, enter YES.
"^DD",130,130,.017,21,0)
^^4^4^2961004^
"^DD",130,130,.017,21,1,0)
This field will be used to indicate if this surgery or non-OR procedure
"^DD",130,130,.017,21,2,0)
is treating a VA patient for a problem that is related to Agent Orange
"^DD",130,130,.017,21,3,0)
Exposure.  This information may be passed to the VISIT file (#9000010) for
"^DD",130,130,.017,21,4,0)
use by PCE.
"^DD",130,130,.017,"DT")
3050531
"^DD",130,130,.018,0)
IONIZING RADIATION EXPOSURE^S^1:YES;0:NO;^0;18^Q
"^DD",130,130,.018,.1)
Treatment related to Ionizing Radiation Exposure (Y/N)
"^DD",130,130,.018,1,0)
^.1
"^DD",130,130,.018,1,1,0)
130^APCE18^MUMPS
"^DD",130,130,.018,1,1,1)
D APCE^SROPCEX
"^DD",130,130,.018,1,1,2)
Q
"^DD",130,130,.018,1,1,"%D",0)
^.101^1^1^3050616^^^
"^DD",130,130,.018,1,1,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.018,1,1,"DT")
3050531
"^DD",130,130,.018,3)
If this case is treating an Ionizing Radiation Exposure problem, enter YES.
"^DD",130,130,.018,21,0)
^^4^4^2961004^
"^DD",130,130,.018,21,1,0)
This field will be used to indicate if this surgery or non-OR procedure is
"^DD",130,130,.018,21,2,0)
treating a VA patient for a problem that is related to Ionizing Radiation
"^DD",130,130,.018,21,3,0)
Exposure.  This information may be passed to the VISIT file (#9000010) for
"^DD",130,130,.018,21,4,0)
use by PCE.
"^DD",130,130,.018,"DT")
3050531
"^DD",130,130,.019,0)
ENVIRONMENTAL CONTAMINANTS^S^1:YES;0:NO;^0;19^Q
"^DD",130,130,.019,.1)
Treatment related to Environmental Contaminant Exposure (Y/N)
"^DD",130,130,.019,1,0)
^.1
"^DD",130,130,.019,1,1,0)
130^APCE19^MUMPS
"^DD",130,130,.019,1,1,1)
D APCE^SROPCEX
"^DD",130,130,.019,1,1,2)
Q
"^DD",130,130,.019,1,1,"%D",0)
^.101^1^1^3050616^^^
"^DD",130,130,.019,1,1,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.019,1,1,"DT")
3050531
"^DD",130,130,.019,3)
If this case is treating an Environmental Contaminant Exposure problem, enter YES.
"^DD",130,130,.019,21,0)
^^4^4^2961004^
"^DD",130,130,.019,21,1,0)
This field will be used to indicate if this surgery or non-OR procedure
"^DD",130,130,.019,21,2,0)
is treating a VA patient for a problem related to environmental
"^DD",130,130,.019,21,3,0)
contaminant exposure.  This information may be passed to the VISIT file
"^DD",130,130,.019,21,4,0)
(#9000010) for use by PCE.
"^DD",130,130,.019,"DT")
3050531
"^DD",130,130,.02,0)
OPERATING ROOM^*P131.7'X^SRS(^0;2^S DIC("S")="I $$ORDIV^SROUTL0(+Y,$G(SRSITE(""DIV""))),('$P(^SRS(+Y,0),U,6))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",130,130,.02,.1)
Operating Room
"^DD",130,130,.02,1,0)
^.1
"^DD",130,130,.02,1,1,0)
130^AOR^MUMPS
"^DD",130,130,.02,1,1,1)
I $P(^SRF(DA,0),"^",9)'="" S ^SRF("AOR",X,$E($P(^SRF(DA,0),"^",9),1,7),DA)=""
"^DD",130,130,.02,1,1,2)
K ^SRF("AOR",X,$E($P(^SRF(DA,0),"^",9),1,7),DA)
"^DD",130,130,.02,1,1,"%D",0)
^^2^2^2930128^
"^DD",130,130,.02,1,1,"%D",1,0)
The AOR cross reference on the OPERATING ROOM field is used in various
"^DD",130,130,.02,1,1,"%D",2,0)
reports when sorting by operating room.
"^DD",130,130,.02,1,2,0)
130^AM3^MUMPS
"^DD",130,130,.02,1,2,1)
D AM3^SROXR2
"^DD",130,130,.02,1,2,2)
D KILLAM3^SROXR2
"^DD",130,130,.02,1,2,"%D",0)
^^3^3^2930128^^^
"^DD",130,130,.02,1,2,"%D",1,0)
The AM3 cross reference on the OPERATING ROOM field updates the AMM cross
"^DD",130,130,.02,1,2,"%D",2,0)
reference when the OPERATING ROOM is edited if the case has been
"^DD",130,130,.02,1,2,"%D",3,0)
scheduled.
"^DD",130,130,.02,1,2,"DT")
2920110
"^DD",130,130,.02,1,3,0)
130^APCE20^MUMPS
"^DD",130,130,.02,1,3,1)
D APCE^SROPCEX
"^DD",130,130,.02,1,3,2)
Q
"^DD",130,130,.02,1,3,"%D",0)
^.101^1^1^3050616^^^
"^DD",130,130,.02,1,3,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.02,1,3,"DT")
3050531
"^DD",130,130,.02,3)
Enter the name of the operating room where the principal operation is performed.
"^DD",130,130,.02,12)
Screen limits selection to active operating rooms for the division.
"^DD",130,130,.02,12.1)
S DIC("S")="I $$ORDIV^SROUTL0(+Y,$G(SRSITE(""DIV""))),('$P(^SRS(+Y,0),U,6))"
"^DD",130,130,.02,21,0)
^^3^3^2980317^^^^
"^DD",130,130,.02,21,1,0)
This is the name of the operating room where the principal operation
"^DD",130,130,.02,21,2,0)
is performed for this patient.  It can be selected by entering the name  
"^DD",130,130,.02,21,3,0)
or abbreviation of the operating room.
"^DD",130,130,.02,"DT")
3050531
"^DD",130,130,.021,0)
ASSOCIATED CLINIC^*P44'^SC(^0;21^S DIC("S")="I $$HL^SROUTL0(Y,$G(SRSITE(""DIV""))),$$CLINIC^SROUTL(Y,$S($D(DA):DA,1:""""))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",130,130,.021,.1)
Associated Clinic
"^DD",130,130,.021,1,0)
^.1
"^DD",130,130,.021,1,1,0)
130^APCE21^MUMPS
"^DD",130,130,.021,1,1,1)
D APCE^SROPCEX
"^DD",130,130,.021,1,1,2)
Q
"^DD",130,130,.021,1,1,"%D",0)
^.101^1^1^3050616^^^
"^DD",130,130,.021,1,1,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.021,1,1,"DT")
3050531
"^DD",130,130,.021,3)
Enter the clinic associated with this case.
"^DD",130,130,.021,12)
Select active, count clinic at the user's division.
"^DD",130,130,.021,12.1)
S DIC("S")="I $$HL^SROUTL0(Y,$G(SRSITE(""DIV""))),$$CLINIC^SROUTL(Y,$S($D(DA):DA,1:""""))"
"^DD",130,130,.021,21,0)
^^3^3^2960927^
"^DD",130,130,.021,21,1,0)
This is the clinic associated with this surgical case or non-OR procedure.
"^DD",130,130,.021,21,2,0)
The entry made in this field will be used as the location of the encounter
"^DD",130,130,.021,21,3,0)
for PCE.
"^DD",130,130,.021,"DT")
3050531
"^DD",130,130,.022,0)
MILITARY SEXUAL TRAUMA^S^1:YES;0:NO;^0;22^Q
"^DD",130,130,.022,.1)
Treatment related to Military Sexual Trauma (Y/N)
"^DD",130,130,.022,1,0)
^.1
"^DD",130,130,.022,1,1,0)
130^APCE22^MUMPS
"^DD",130,130,.022,1,1,1)
D APCE^SROPCEX
"^DD",130,130,.022,1,1,2)
Q
"^DD",130,130,.022,1,1,"%D",0)
^.101^1^1^3050616^^^
"^DD",130,130,.022,1,1,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.022,1,1,"DT")
3050531
"^DD",130,130,.022,3)
If this case is treating a problem related to Military Sexual Trauma, enter YES.
"^DD",130,130,.022,21,0)
^.001^4^4^3011105^^^^
"^DD",130,130,.022,21,1,0)
This field will be used to indicate if this surgery or non-OR procedure is
"^DD",130,130,.022,21,2,0)
treating a VA patient for a problem that is related to Military Sexual 
"^DD",130,130,.022,21,3,0)
Trauma.  This information may be passed to the VISIT file (#9000010) for
"^DD",130,130,.022,21,4,0)
use by PCE.
"^DD",130,130,.022,"DT")
3050531
"^DD",130,130,.023,0)
HEAD AND/OR NECK CANCER^S^1:YES;0:NO;^0;23^Q
"^DD",130,130,.023,.1)
Treatment related to Head and/or Neck Cancer (Y/N)
"^DD",130,130,.023,1,0)
^.1
"^DD",130,130,.023,1,1,0)
130^APCE23^MUMPS
"^DD",130,130,.023,1,1,1)
D APCE^SROPCEX
"^DD",130,130,.023,1,1,2)
Q
"^DD",130,130,.023,1,1,"%D",0)
^.101^1^1^3050616^^^
"^DD",130,130,.023,1,1,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.023,1,1,"DT")
3050531
"^DD",130,130,.023,3)
If this case is treating a problem related to Head and/or Neck Cancer, enter YES.
"^DD",130,130,.023,21,0)
^^4^4^3011121^
"^DD",130,130,.023,21,1,0)
This field will be used to indicate if this surgery or non-OR procedure is
"^DD",130,130,.023,21,2,0)
treating a VA patient for a problem that is related to Head and/or Neck 
"^DD",130,130,.023,21,3,0)
Cancer.  This information may be passed to the VISIT file (#9000010) for
"^DD",130,130,.023,21,4,0)
use by PCE.
"^DD",130,130,.023,"DT")
3050531
"^DD",130,130,.024,0)
COMBAT VET^S^1:YES;0:NO;^0;24^Q
"^DD",130,130,.024,.1)
Treatment related to Combat (Y/N)
"^DD",130,130,.024,1,0)
^.1
"^DD",130,130,.024,1,1,0)
130^APCE27^MUMPS
"^DD",130,130,.024,1,1,1)
D APCE^SROPCEX
"^DD",130,130,.024,1,1,2)
Q
"^DD",130,130,.024,1,1,"%D",0)
^.101^1^1^3050616^^^
"^DD",130,130,.024,1,1,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.024,1,1,"DT")
3050531
"^DD",130,130,.024,3)
If this case is treating a problem related to Combat, enter YES.
"^DD",130,130,.024,21,0)
^.001^3^3^3040210^^^^
"^DD",130,130,.024,21,1,0)
This field will be used to indicate if this surgery or non-OR procedure 
"^DD",130,130,.024,21,2,0)
is treating a VA patient for a problem that is related to Combat.  This 
"^DD",130,130,.024,21,3,0)
information may be passed to the VISIT file (#9000010) for use by PCE.
"^DD",130,130,.024,"DT")
3050531
"^DD",130,130,.04,0)
SURGERY SPECIALTY^R*P137.45'^SRO(137.45,^0;4^S DIC("S")="I '$P(^(0),U,3)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",130,130,.04,.1)
Surgical Specialty
"^DD",130,130,.04,1,0)
^.1
"^DD",130,130,.04,1,1,0)
130^ASP^MUMPS
"^DD",130,130,.04,1,1,1)
I $P(^SRF(DA,0),"^",9)'="" S ^SRF("ASP",X,$E($P(^SRF(DA,0),"^",9),1,7),DA)=DA
"^DD",130,130,.04,1,1,2)
K ^SRF("ASP",X,$E($P(^SRF(DA,0),"^",9),1,7),DA)
"^DD",130,130,.04,1,1,"%D",0)
^^3^3^2930128^^
"^DD",130,130,.04,1,1,"%D",1,0)
The ASP cross reference on the SURGERY SPECIALTY field is used by various
"^DD",130,130,.04,1,1,"%D",2,0)
reports to sort by the surgical specialty and within surgical specialty
"^DD",130,130,.04,1,1,"%D",3,0)
by date of operation.
"^DD",130,130,.04,1,2,0)
130^APCE3^MUMPS
"^DD",130,130,.04,1,2,1)
D APCE^SROPCEX
"^DD",130,130,.04,1,2,2)
Q
"^DD",130,130,.04,1,2,"%D",0)
^.101^1^1^3050616^^^^
"^DD",130,130,.04,1,2,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.04,1,2,"DT")
3050531
"^DD",130,130,.04,3)
Enter the assigned surgical specialty, or section, of the surgeon.
"^DD",130,130,.04,12)
Screen prevents selection of inactive entries.
"^DD",130,130,.04,12.1)
S DIC("S")="I '$P(^(0),U,3)"
"^DD",130,130,.04,21,0)
^^8^8^3040316^
"^DD",130,130,.04,21,1,0)
NSQIP Definition (2004):
"^DD",130,130,.04,21,2,0)
This is the surgical specialty credited for doing this operative 
"^DD",130,130,.04,21,3,0)
procedure. Many reports, including the Annual Report of Surgical 
"^DD",130,130,.04,21,4,0)
Procedures, are sorted by the surgical specialty. This field should be
"^DD",130,130,.04,21,5,0)
entered prior to completion of this case. (If you enter '?' in the
"^DD",130,130,.04,21,6,0)
surgical package, it will display the entire local surgical specialty
"^DD",130,130,.04,21,7,0)
list and a copy of the national list can be found in Appendix I of the
"^DD",130,130,.04,21,8,0)
Operations Manual)
"^DD",130,130,.04,"DT")
3050531
"^DD",130,130,.14,0)
SURGEON^R*P200'^VA(200,^.1;4^S DIC("S")="S RESTRICT=""130,.14"" D KEY^SROXPR I $D(SROK)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",130,130,.14,.1)
Surgeon
"^DD",130,130,.14,1,0)
^.1
"^DD",130,130,.14,1,1,0)
130^ASR^MUMPS
"^DD",130,130,.14,1,1,1)
D STAFF^SROXR1
"^DD",130,130,.14,1,1,2)
D KSTAFF^SROXR1
"^DD",130,130,.14,1,1,"%D",0)
^^2^2^2930128^^
"^DD",130,130,.14,1,1,"%D",1,0)
The ASR cross reference on the SURGEON field is used to update the
"^DD",130,130,.14,1,1,"%D",2,0)
STAFF/RESIDENT field when a surgeon is entered.
"^DD",130,130,.14,1,1,"DT")
2920415
"^DD",130,130,.14,1,2,0)
130^APCE1^MUMPS
"^DD",130,130,.14,1,2,1)
D APCE^SROPCEX
"^DD",130,130,.14,1,2,2)
Q
"^DD",130,130,.14,1,2,"%D",0)
^.101^1^1^3050616^^^^
"^DD",130,130,.14,1,2,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.14,1,2,"DT")
3050531
"^DD",130,130,.14,1,3,0)
130^ATT^MUMPS
"^DD",130,130,.14,1,3,1)
D ATT^SROXR1
"^DD",130,130,.14,1,3,2)
D KATT^SROXR1
"^DD",130,130,.14,1,3,"%D",0)
^^2^2^3041005^
"^DD",130,130,.14,1,3,"%D",1,0)
This cross reference updates the ATTEND SURG field with the SURGEON if 
"^DD",130,130,.14,1,3,"%D",2,0)
the SURGERY RESIDENTS (Y/N) site parameter is NO.
"^DD",130,130,.14,1,3,"DT")
3041005
"^DD",130,130,.14,3)
Enter the name of the privileged person who performs the major portion of the principal operation.
"^DD",130,130,.14,12)
Entries into this field may be restricted based on locally selected keys.
"^DD",130,130,.14,12.1)
S DIC("S")="S RESTRICT=""130,.14"" D KEY^SROXPR I $D(SROK)"
"^DD",130,130,.14,21,0)
^^7^7^2921026^^^^
"^DD",130,130,.14,21,1,0)
This is the name of the person performing the major portion of
"^DD",130,130,.14,21,2,0)
the principal operative procedure.  This field is required as
"^DD",130,130,.14,21,3,0)
part of the Operation Report.
"^DD",130,130,.14,21,4,0)
 
"^DD",130,130,.14,21,5,0)
This field may be restricted by locally determined keys so that only
"^DD",130,130,.14,21,6,0)
people with the appropriate keys can be entered.
"^DD",130,130,.14,21,7,0)
 
"^DD",130,130,.14,22)

"^DD",130,130,.14,"DT")
3050531
"^DD",130,130,.164,0)
ATTEND SURG^*P200'^VA(200,^.1;13^S DIC("S")="S RESTRICT=""130,.164"" D KEY^SROXPR I $D(SROK)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",130,130,.164,.1)
Attending Surgeon
"^DD",130,130,.164,1,0)
^.1
"^DD",130,130,.164,1,1,0)
130^APCE4^MUMPS
"^DD",130,130,.164,1,1,1)
D APCE^SROPCEX
"^DD",130,130,.164,1,1,2)
Q
"^DD",130,130,.164,1,1,"%D",0)
^.101^1^1^3050616^^^^
"^DD",130,130,.164,1,1,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.164,1,1,"DT")
3050531
"^DD",130,130,.164,3)
Enter the name of the attending staff surgeon.  This is required when the surgeon is in training status.
"^DD",130,130,.164,12)
Entries in this field may be restricted based on locally selected keys.
"^DD",130,130,.164,12.1)
S DIC("S")="S RESTRICT=""130,.164"" D KEY^SROXPR I $D(SROK)"
"^DD",130,130,.164,21,0)
5^^4^4^2920221^^^
"^DD",130,130,.164,21,1,0)
This is the name of the attending staff surgeon responsible for
"^DD",130,130,.164,21,2,0)
this case.  This information appears on the Operation Report, Nurse
"^DD",130,130,.164,21,3,0)
Intraoperative Report, and Attending Surgeon Report.
"^DD",130,130,.164,21,4,0)
 
"^DD",130,130,.164,"DEL",1,0)
I 1 D EN^DDIOL("The ATTEND SURGEON can't be deleted.",,"!!,?2")
"^DD",130,130,.164,"DT")
3050531
"^DD",130,130,.205,0)
TIME PAT IN OR^DX^^.2;10^S Z=$E($P(^SRF(DA,0),U,9),1,7) D TIME^SROVAR K:Y<1!(X'[".") X I $D(X),$D(^SRF(DA,"CON")),$P(^("CON"),"^") S SRFLD=.205 D ^SROCON Q
"^DD",130,130,.205,.1)
Time Patient In the O.R.
"^DD",130,130,.205,1,0)
^.1
"^DD",130,130,.205,1,1,0)
^^TRIGGER^130^.09
"^DD",130,130,.205,1,1,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^SRF(D0,0)):^(0),1:"") S X=$P(Y(1),U,9),X=X S DIU=X K Y S X=DIV S X=DIV S DIH=$S($D(^SRF(DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,9)=DIV,DIH=130,DIG=.09 D ^DICR
"^DD",130,130,.205,1,1,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^SRF(D0,0)):^(0),1:"") S X=$P(Y(1),U,9),X=X S DIU=X K Y X ^DD(130,.205,1,1,2.1) X ^DD(130,.205,1,1,2.4)
"^DD",130,130,.205,1,1,2.1)
S X=DIV S X=X,Y(1)=X S X=1,Y(2)=X S X=7,X=$E(Y(1),Y(2),X)
"^DD",130,130,.205,1,1,2.4)
S DIH=$S($D(^SRF(DIV(0),0)):^(0),1:""),DIV=X S $P(^(0),U,9)=DIV,DIH=130,DIG=.09 D ^DICR
"^DD",130,130,.205,1,1,"%D",0)
^^2^2^2930128^
"^DD",130,130,.205,1,1,"%D",1,0)
This trigger on the TIME PAT IN OR field updates the DATE OF OPERATION
"^DD",130,130,.205,1,1,"%D",2,0)
field with the date/time the patient went into the operating room.
"^DD",130,130,.205,1,1,"CREATE VALUE")
TIME PAT IN OR
"^DD",130,130,.205,1,1,"DELETE VALUE")
$E(OLD TIME PAT IN OR,1,7)
"^DD",130,130,.205,1,1,"FIELD")
DATE OF OPERATION
"^DD",130,130,.205,1,2,0)
130^APCE6^MUMPS
"^DD",130,130,.205,1,2,1)
D APCE^SROPCEX
"^DD",130,130,.205,1,2,2)
Q
"^DD",130,130,.205,1,2,"%D",0)
^.101^1^1^3050616^^^^
"^DD",130,130,.205,1,2,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.205,1,2,"DT")
3050531
"^DD",130,130,.205,1,3,0)
130^AD^MUMPS
"^DD",130,130,.205,1,3,1)
D VALIDAT^SROCVER
"^DD",130,130,.205,1,3,2)
Q
"^DD",130,130,.205,1,3,"%D",0)
^^2^2^3030319^
"^DD",130,130,.205,1,3,"%D",1,0)
This MUMPS cross-reference on the TIME PAT IN OR field is used to 
"^DD",130,130,.205,1,3,"%D",2,0)
invoke the CPT and ICD-9 codes revalidation checks in routine ^SROCVER.
"^DD",130,130,.205,1,3,"DT")
3030303
"^DD",130,130,.205,3)
Enter the date/time that the patient was transported into the operating room.
"^DD",130,130,.205,21,0)
^^6^6^3040316^
"^DD",130,130,.205,21,1,0)
This is the date and time that the patient was transported into the
"^DD",130,130,.205,21,2,0)
operation room. Times entered without a date will be converted to the
"^DD",130,130,.205,21,3,0)
date of operation at that time.
"^DD",130,130,.205,21,4,0)
 
"^DD",130,130,.205,21,5,0)
NSQIP Definition (2004):
"^DD",130,130,.205,21,6,0)
Patient in Room (PIR): Time when patient enters the OR/PR.
"^DD",130,130,.205,"DT")
3050531
"^DD",130,130,.232,0)
TIME PAT OUT OR^DX^^.2;12^S SRN=.2,SRP=10,SR130="TIME PAT IN OR" D TERM^SROVAR K:Y<1 X I $D(X) D ATT^SROUTL1 I $D(DA),$D(X),$D(^SRF(DA,"CON")),$P(^("CON"),"^") S SRFLD=.232 D ^SROCON Q
"^DD",130,130,.232,.1)
Time Patient Out of the O.R.
"^DD",130,130,.232,1,0)
^.1^^-1
"^DD",130,130,.232,1,1,0)
130^AH^MUMPS
"^DD",130,130,.232,1,1,1)
I $D(^SRF(DA,14)),'$D(^(15)) S %X="^SRF(DA,14,",%Y="^SRF(DA,15," D %XY^%RCR S ^(0)="^130.18A"_U_$P(^SRF(DA,15,0),U,3,4) K %X,%Y
"^DD",130,130,.232,1,1,2)
Q
"^DD",130,130,.232,1,1,"%D",0)
^^3^3^2930128^^
"^DD",130,130,.232,1,1,"%D",1,0)
The AH cross reference on the TIME PAT OUT OR field moves the OTHER PREOP
"^DD",130,130,.232,1,1,"%D",2,0)
DIAGNOSIS information into the OTHER POSTOP DIAGS subfile when the TIME
"^DD",130,130,.232,1,1,"%D",3,0)
PAT OUT OR is entered.
"^DD",130,130,.232,1,3,0)
130^AM1^MUMPS
"^DD",130,130,.232,1,3,1)
D AM1^SROXR2
"^DD",130,130,.232,1,3,2)
Q
"^DD",130,130,.232,1,3,"%D",0)
^^4^4^2930301^^^
"^DD",130,130,.232,1,3,"%D",1,0)
The AM1 cross reference on the TIME PAT OUT OR field is responsible for
"^DD",130,130,.232,1,3,"%D",2,0)
removing the AMM cross reference for the case and for updating the
"^DD",130,130,.232,1,3,"%D",3,0)
scheduling display graph.  In addition, if the case is a reqested case,
"^DD",130,130,.232,1,3,"%D",4,0)
the AR cross reference is removed if it still exists.
"^DD",130,130,.232,1,4,0)
130^APCE7^MUMPS
"^DD",130,130,.232,1,4,1)
D APCE^SROPCEX
"^DD",130,130,.232,1,4,2)
Q
"^DD",130,130,.232,1,4,"%D",0)
^.101^1^1^3050616^^^^
"^DD",130,130,.232,1,4,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,.232,1,4,"DT")
3050531
"^DD",130,130,.232,1,5,0)
130^AQ^MUMPS
"^DD",130,130,.232,1,5,1)
D AQ^SROXR4
"^DD",130,130,.232,1,5,2)
D KAQ^SROXR4
"^DD",130,130,.232,1,5,"%D",0)
^^2^2^2970123^
"^DD",130,130,.232,1,5,"%D",1,0)
This MUMPS cross reference is used by the transmission process to the
"^DD",130,130,.232,1,5,"%D",2,0)
national database.
"^DD",130,130,.232,1,5,"DT")
2970123
"^DD",130,130,.232,1,6,0)
130^AOE^MUMPS
"^DD",130,130,.232,1,6,1)
I $L($T(OR1^ORMEVNT1)) D OR1^ORMEVNT1(DA,X)
"^DD",130,130,.232,1,6,2)
I $L($T(OR2^ORMEVNT1)) D OR2^ORMEVNT1(DA)
"^DD",130,130,.232,1,6,"%D",0)
^.101^1^1^3030115^^^^
"^DD",130,130,.232,1,6,"%D",1,0)
This MUMPS cross reference allows the CPRS to automatic discontinue or release orders when the patient leaves the OR.
"^DD",130,130,.232,1,6,"DT")
3020816
"^DD",130,130,.232,3)
Enter the time that the patient is taken from the operating room, i.e. 7:45, 0745, 745, T@7:45, JAN 1@745 ...
"^DD",130,130,.232,21,0)
^^12^12^3040721^
"^DD",130,130,.232,21,1,0)
This is the date and time that the patient is taken from the operating
"^DD",130,130,.232,21,2,0)
room. Times entered without a date will be converted to the date of
"^DD",130,130,.232,21,3,0)
operation at that time. This information is very significant for
"^DD",130,130,.232,21,4,0)
operating room management studies.
"^DD",130,130,.232,21,5,0)
 
"^DD",130,130,.232,21,6,0)
NSQIP Definition (2004):
"^DD",130,130,.232,21,7,0)
Patient Out of Room (POR): Time at which patient leaves OR/PR.
"^DD",130,130,.232,21,8,0)
 
"^DD",130,130,.232,21,9,0)
CICSP Definition (2004):
"^DD",130,130,.232,21,10,0)
Indicate the time the patient was transported out of the operating 
"^DD",130,130,.232,21,11,0)
room. If the patient dies prior to leaving the OR, then indicate the
"^DD",130,130,.232,21,12,0)
time of death for this data element.
"^DD",130,130,.232,"DEL",1,0)
I $$DEL^SROESX(DA,"1,2") D EN^DDIOL("The TIME PAT OUT OR can't be deleted. This case has one or more operative",,"!!,?2") D EN^DDIOL("reports associated with it.",,"!,?2")
"^DD",130,130,.232,"DT")
3050531
"^DD",130,130,.74,0)
OTHER POSTOP DIAGS^130.18A^^15;0
"^DD",130,130,.74,.1)
Other Postoperative Diagnosis
"^DD",130,130,.74,21,0)
^.001^3^3^3050623^^^^
"^DD",130,130,.74,21,1,0)
This is information related to any postoperative diagnosis in addition
"^DD",130,130,.74,21,2,0)
to the principal postoperative diagnosis.
"^DD",130,130,.74,21,3,0)
 
"^DD",130,130,.74,"DT")
2921026
"^DD",130,130,27,0)
PLANNED PRIN PROCEDURE CODE ^*P81'OX^ICPT(^OP;2^D IN^SROCPT S DIC("S")="I $$ACTIV^SROCPT($S($D(SRTN):SRTN,$D(DA):DA,1:""""),+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X D PCPTASO^SROADX2(1) K:$G(X)="" X
"^DD",130,130,27,.1)
Planned Principal Procedure Code (CPT)
"^DD",130,130,27,1,0)
^.1^^-1
"^DD",130,130,27,1,2,0)
130^ACPT^MUMPS
"^DD",130,130,27,1,2,1)
D SPRIN^SROMOD
"^DD",130,130,27,1,2,2)
D KPRIN^SROMOD
"^DD",130,130,27,1,2,"%D",0)
^.101^20^20^3041216^^^^
"^DD",130,130,27,1,2,"%D",1,0)
This MUMPS cross reference provides for updating CPT modifiers for the
"^DD",130,130,27,1,2,"%D",2,0)
principal procedure code.  CPT modifiers for the PRINCIPAL PROCEDURE CODE
"^DD",130,130,27,1,2,"%D",3,0)
field (#27) are stored in the PRIN. PROCEDURE CPT MODIFIER field (#.01) of
"^DD",130,130,27,1,2,"%D",4,0)
the PRIN. PROCEDURE CPT MODIFIER multiple field (#28) in SURGERY file
"^DD",130,130,27,1,2,"%D",5,0)
(#130).
"^DD",130,130,27,1,2,"%D",6,0)
 
"^DD",130,130,27,1,2,"%D",7,0)
After selecting a CPT code, this cross reference prompts the user for a
"^DD",130,130,27,1,2,"%D",8,0)
CPT modifier.  If a CPT modifier was entered concatenated with a hyphen to
"^DD",130,130,27,1,2,"%D",9,0)
the CPT code, this CPT modifier is displayed as a default modifier. Upon
"^DD",130,130,27,1,2,"%D",10,0)
entering a CPT modifier, the user is prompted for another CPT modifier
"^DD",130,130,27,1,2,"%D",11,0)
until the user makes a null entry. CPT modifier input is controlled by the
"^DD",130,130,27,1,2,"%D",12,0)
input transform on the PRIN. PROCEDURE CPT MODIFIER field (#28). At the
"^DD",130,130,27,1,2,"%D",13,0)
CPT modifier prompt, the user may to enter a question mark (?) to see a
"^DD",130,130,27,1,2,"%D",14,0)
list of CPT modifiers already entered and a list of acceptable CPT
"^DD",130,130,27,1,2,"%D",15,0)
modifiers to choose from.  If the user selects a modifier already entered,
"^DD",130,130,27,1,2,"%D",16,0)
the user may change or delete the modifier.  If a user enters a new CPT
"^DD",130,130,27,1,2,"%D",17,0)
code, replacing a previously entered CPT code, KILL logic on the ACPT
"^DD",130,130,27,1,2,"%D",18,0)
cross reference deletes any previously entered CPT modifiers for the old
"^DD",130,130,27,1,2,"%D",19,0)
CPT code before the SET logic prompts the user to enter CPT modifiers for
"^DD",130,130,27,1,2,"%D",20,0)
the new CPT code.
"^DD",130,130,27,1,2,"DT")
2990224
"^DD",130,130,27,2)
S Y(0)=Y D DISPLAY^SROCPT
"^DD",130,130,27,2.1)
D DISPLAY^SROCPT
"^DD",130,130,27,3)
Enter the planned CPT code for the principal procedure.
"^DD",130,130,27,12)
Screen out Inactive Codes
"^DD",130,130,27,12.1)
S DIC("S")="I $$ACTIV^SROCPT($S($D(SRTN):SRTN,$D(DA):DA,1:""""),+Y)"
"^DD",130,130,27,21,0)
^.001^5^5^3050505^^
"^DD",130,130,27,21,1,0)
This is the Current Procedural Terminology (CPT) code corresponding 
"^DD",130,130,27,21,2,0)
with the planned principal procedure. A CPT modifier on the CPT code
"^DD",130,130,27,21,3,0)
may be included by appending the modifier to the CPT code separated by
"^DD",130,130,27,21,4,0)
a hyphen in the format "XXXXX-YY" where "XXXXX" is the five character
"^DD",130,130,27,21,5,0)
CPT code and "YY" is the two character CPT modifier.
"^DD",130,130,27,"DT")
3050722
"^DD",130,130,27.5,0)
PRIN ASSOC DIAGNOSIS^130.275A^^PADX;0
"^DD",130,130,27.5,21,0)
^.001^2^2^3040227^^^^
"^DD",130,130,27.5,21,1,0)
This Surgery sub-file is used to store the Procedure/Diagnosis 
"^DD",130,130,27.5,21,2,0)
association data.
"^DD",130,130,27.5,"DT")
3040227
"^DD",130,130,32.5,0)
PRIN PRE-OP ICD DIAGNOSIS CODE^*P80'^ICD9(^34;3^S DIC("S")="I $P(^(0),""^"",9)'=1" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",130,130,32.5,.1)
Prin Pre-OP ICD Diagnosis Code
"^DD",130,130,32.5,1,0)
^.1^^-1
"^DD",130,130,32.5,1,2,0)
130^AM^MUMPS
"^DD",130,130,32.5,1,2,1)
S $P(^SRF(DA,34),"^",2)=X
"^DD",130,130,32.5,1,2,2)
Q
"^DD",130,130,32.5,1,2,"%D",0)
^^2^2^3050404^
"^DD",130,130,32.5,1,2,"%D",1,0)
This cross reference stuffs the current value of the PRIN PRE-OP ICD 
"^DD",130,130,32.5,1,2,"%D",2,0)
DIAGNOSIS CODE field (#32.5) into the PRIN DIAGNOSIS CODE field (#66).
"^DD",130,130,32.5,1,2,"DT")
3050404
"^DD",130,130,32.5,3)
Enter the ICD Diagnosis code for the principal Pre-OP diagnosis..
"^DD",130,130,32.5,12)
Screen prevents selection of inactive diagnosis.
"^DD",130,130,32.5,12.1)
S DIC("S")="I $P(^(0),""^"",9)'=1"
"^DD",130,130,32.5,21,0)
^^2^2^3050504^
"^DD",130,130,32.5,21,1,0)
This is the principal Pre-OP ICD diagnosis code.  It should be entered
"^DD",130,130,32.5,21,2,0)
for all cases.
"^DD",130,130,32.5,"DT")
3050606
"^DD",130,130,66,0)
PLANNED PRIN DIAGNOSIS CODE^*P80'X^ICD9(^34;2^S DIC("S")="I $$ACTIV^SROICD($S($D(SRTN):SRTN,$D(DA):DA,1:""""),+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",130,130,66,.1)
Planned Principal Diagnosis Code (ICD9)
"^DD",130,130,66,1,0)
^.1^^-1
"^DD",130,130,66,1,2,0)
130^PADX1^MUMPS
"^DD",130,130,66,1,2,1)
Q
"^DD",130,130,66,1,2,2)
D PRINASOD^SROADX2
"^DD",130,130,66,1,2,"%D",0)
^.101^2^2^3031015^^
"^DD",130,130,66,1,2,"%D",1,0)
This MUMPS cross reference removes associations to procedures upon edits 
"^DD",130,130,66,1,2,"%D",2,0)
or deletes of the diagnosis.
"^DD",130,130,66,1,2,"DT")
3031002
"^DD",130,130,66,3)
Enter the planned ICD Diagnosis code for the principal diagnosis.
"^DD",130,130,66,12)
Screen prevents selection of inactive diagnosis.
"^DD",130,130,66,12.1)
S DIC("S")="I $$ACTIV^SROICD($S($D(SRTN):SRTN,$D(DA):DA,1:""""),+Y)"
"^DD",130,130,66,21,0)
^^2^2^3050623^
"^DD",130,130,66,21,1,0)
This is the planned principal postoperative ICD9 diagnosis code assigned 
"^DD",130,130,66,21,2,0)
by the clinician.
"^DD",130,130,66,"DEL",1,0)
I 1 D EN^DDIOL("The PRIN DIAGNOSIS CODE can't be deleted.",,"!!,?2")
"^DD",130,130,66,"DT")
3050623
"^DD",130,130,119,0)
NON-OR LOCATION^*P44'X^SC(^NON;2^S DIC("S")="I $$NONORDIV^SROUTL0(DA,+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",130,130,119,.1)
Non-OR Location
"^DD",130,130,119,1,0)
^.1
"^DD",130,130,119,1,1,0)
130^APCE9^MUMPS
"^DD",130,130,119,1,1,1)
D APCE^SROPCEX
"^DD",130,130,119,1,1,2)
Q
"^DD",130,130,119,1,1,"%D",0)
^.101^1^1^3050616^^^^
"^DD",130,130,119,1,1,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,119,1,1,"DT")
3050531
"^DD",130,130,119,3)
Enter the non-OR location (file 44) where this procedure was performed.
"^DD",130,130,119,12)
This screen checks inactivation and reactivation dates as well as the institution field for multi-division hospitals.
"^DD",130,130,119,12.1)
S DIC("S")="I $$NONORDIV^SROUTL0(DA,+Y)"
"^DD",130,130,119,21,0)
^^1^1^2961030^^^
"^DD",130,130,119,21,1,0)
This is the location (file 44) where this non-OR procedure was performed.
"^DD",130,130,119,"DT")
3050531
"^DD",130,130,121,0)
TIME PROCEDURE BEGAN^DX^^NON;4^S Z=$E($P(^SRF(DA,"NON"),U,3),1,7) D TIME^SROVAR K:Y<1!(X'[".") X
"^DD",130,130,121,.1)
Time Procedure Began
"^DD",130,130,121,1,0)
^.1
"^DD",130,130,121,1,1,0)
130^AST^MUMPS
"^DD",130,130,121,1,1,1)
D AST^SRONXR
"^DD",130,130,121,1,1,2)
D KILLAST^SRONXR
"^DD",130,130,121,1,1,"%D",0)
^^4^4^2930129^^^^
"^DD",130,130,121,1,1,"%D",1,0)
The AST cross reference on the TIME PROCEDURE BEGAN field updates the
"^DD",130,130,121,1,1,"%D",2,0)
ANES CARE START TIME if the non-O.R. procedure is an Anesthesiology
"^DD",130,130,121,1,1,"%D",3,0)
procedure, that is, if the case is assigned to the Anesthesiology Medical
"^DD",130,130,121,1,1,"%D",4,0)
Specialty.
"^DD",130,130,121,1,1,"DT")
2920117
"^DD",130,130,121,1,2,0)
130^APCE10^MUMPS
"^DD",130,130,121,1,2,1)
D APCE^SROPCEX
"^DD",130,130,121,1,2,2)
Q
"^DD",130,130,121,1,2,"%D",0)
^.101^1^1^3050616^^^^
"^DD",130,130,121,1,2,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,121,1,2,"DT")
3050531
"^DD",130,130,121,1,3,0)
130^ADA^MUMPS
"^DD",130,130,121,1,3,1)
D VALIDAT^SROCVER
"^DD",130,130,121,1,3,2)
Q
"^DD",130,130,121,1,3,"%D",0)
^^2^2^3030319^
"^DD",130,130,121,1,3,"%D",1,0)
This MUMPS cross-reference on the TIME PROCEDURE BEGAN field is used to
"^DD",130,130,121,1,3,"%D",2,0)
invoke the CPT and ICD-9 codes revalidation checks in routine ^SROCVER.
"^DD",130,130,121,1,3,"DT")
3030319
"^DD",130,130,121,3)
Enter the time of the start of the non-OR procedure.
"^DD",130,130,121,21,0)
^^1^1^2911205^
"^DD",130,130,121,21,1,0)
This is the date and time that the non-OR procedure began.
"^DD",130,130,121,"DT")
3050531
"^DD",130,130,122,0)
TIME PROCEDURE ENDED^DX^^NON;5^S SRN="NON",SRP=4,SR130="TIME PROCEDURE BEGAN" D TERM^SROVAR K:Y<1 X I $D(X) D ATTP^SROUTL1
"^DD",130,130,122,.1)
Time Procedure Ended
"^DD",130,130,122,1,0)
^.1
"^DD",130,130,122,1,1,0)
130^AND^MUMPS
"^DD",130,130,122,1,1,1)
D AND^SRONXR
"^DD",130,130,122,1,1,2)
D KILLAND^SRONXR
"^DD",130,130,122,1,1,"%D",0)
^^3^3^2930129^^^^
"^DD",130,130,122,1,1,"%D",1,0)
The AND cross reference on the TIME PROCEDURE ENDED field updates the
"^DD",130,130,122,1,1,"%D",2,0)
ANES CARE END TIME if the non-O.R. procedure is assigned to the
"^DD",130,130,122,1,1,"%D",3,0)
Anesthesiology Medical Specialty.
"^DD",130,130,122,1,1,"DT")
2920117
"^DD",130,130,122,1,2,0)
130^APCE11^MUMPS
"^DD",130,130,122,1,2,1)
D APCE^SROPCEX
"^DD",130,130,122,1,2,2)
Q
"^DD",130,130,122,1,2,"%D",0)
^.101^1^1^3050616^^^^
"^DD",130,130,122,1,2,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,122,1,2,"DT")
3050531
"^DD",130,130,122,3)
Enter the time that the non-OR procedure was completed.
"^DD",130,130,122,21,0)
^^2^2^2911205^
"^DD",130,130,122,21,1,0)
This is the date and time that all the procedures for this non-OR case are
"^DD",130,130,122,21,2,0)
complete.
"^DD",130,130,122,"DEL",1,0)
I $$DEL^SROESX(DA,"3") D EN^DDIOL("The TIME PROCEDURE ENDED field can't be deleted. This case has a Procedure Report associated with it.",,"!,?2")
"^DD",130,130,122,"DT")
3050531
"^DD",130,130,123,0)
PROVIDER^R*P200'^VA(200,^NON;6^S DIC("S")="S RESTRICT=""130,123"" D KEY^SROXPR I $D(SROK)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",130,130,123,.1)
Provider
"^DD",130,130,123,1,0)
^.1
"^DD",130,130,123,1,1,0)
130^APCE12^MUMPS
"^DD",130,130,123,1,1,1)
D APCE^SROPCEX
"^DD",130,130,123,1,1,2)
Q
"^DD",130,130,123,1,1,"%D",0)
^.101^1^1^3050616^^^^
"^DD",130,130,123,1,1,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,123,1,1,"DT")
3050531
"^DD",130,130,123,1,2,0)
130^ATTP^MUMPS
"^DD",130,130,123,1,2,1)
D ATTP^SROXR1
"^DD",130,130,123,1,2,2)
D KATTP^SROXR1
"^DD",130,130,123,1,2,"%D",0)
^^2^2^3041005^
"^DD",130,130,123,1,2,"%D",1,0)
This cross reference updates the ATTEND PROVIDER field with the PROVIDER 
"^DD",130,130,123,1,2,"%D",2,0)
if the SURGERY RESIDENTS (Y/N) site parameter is NO.
"^DD",130,130,123,1,2,"DT")
3041005
"^DD",130,130,123,3)
Enter the name of the privileged person who performs the major portion of the principle procedure.
"^DD",130,130,123,12)
Entries in this field may be restricted based on locally selected keys.
"^DD",130,130,123,12.1)
S DIC("S")="S RESTRICT=""130,123"" D KEY^SROXPR I $D(SROK)"
"^DD",130,130,123,21,0)
^^2^2^2921026^^^
"^DD",130,130,123,21,1,0)
This is the person who performs the major portion of the principal non-OR
"^DD",130,130,123,21,2,0)
procedure.  This field is required for several reports.
"^DD",130,130,123,"DT")
3050531
"^DD",130,130,124,0)
ATTEND PROVIDER^*P200'X^VA(200,^NON;7^S DIC("S")="S RESTRICT=""130,124"" D KEY^SROXPR I $D(SROK)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",130,130,124,.1)
Attending Provider
"^DD",130,130,124,1,0)
^.1
"^DD",130,130,124,1,1,0)
130^APCE13^MUMPS
"^DD",130,130,124,1,1,1)
D APCE^SROPCEX
"^DD",130,130,124,1,1,2)
Q
"^DD",130,130,124,1,1,"%D",0)
^.101^1^1^3050621^^^^
"^DD",130,130,124,1,1,"%D",1,0)
This MUMPS cross reference updates PCE.
"^DD",130,130,124,1,1,"DT")
3050531
"^DD",130,130,124,3)
Enter the name of the attending staff provider.  This is required when the provider is in training status.
"^DD",130,130,124,12)
This field contains a screen which may be used to restrict entries based on locally defined keys.
"^DD",130,130,124,12.1)
S DIC("S")="S RESTRICT=""130,124"" D KEY^SROXPR I $D(SROK)"
"^DD",130,130,124,21,0)
^^2^2^2911206^
"^DD",130,130,124,21,1,0)
This is the name of the attending staff provider responsible for this case.
"^DD",130,130,124,21,2,0)
This information appears on several reports.
"^DD",130,130,124,"DEL",1,0)
I $P($G(^SRF(DA,"NON")),"^",5) D EN^DDIOL("The Attending Provider cannot be deleted on a completed non-OR procedure!  ",,"!!,?2")
"^DD",130,130,124,"DT")
3050531
"^DD",130,130.16,3,0)
PLANNED OTHER PROC CPT CODE^*P81'OX^ICPT(^2;1^D OCPTASO^SROADX2(1) K:X="" X D IN^SROCPT S DIC("S")="I $$ACTIV^SROCPT($S($D(SRTN):SRTN,$D(DA(1)):DA(1),1:""""),+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",130,130.16,3,.1)
Planned Other Procedure CPT Code
"^DD",130,130.16,3,1,0)
^.1^^-1
"^DD",130,130.16,3,1,2,0)
130.16^ACPT1^MUMPS
"^DD",130,130.16,3,1,2,1)
D SOTH^SROMOD
"^DD",130,130.16,3,1,2,2)
D KOTH^SROMOD
"^DD",130,130.16,3,1,2,"%D",0)
^.101^21^21^3041216^^
"^DD",130,130.16,3,1,2,"%D",1,0)
This MUMPS cross reference provides for updating CPT modifiers for other
"^DD",130,130.16,3,1,2,"%D",2,0)
procedure CPT codes.  CPT modifiers for the OTHER PROCEDURE CPT CODE field
"^DD",130,130.16,3,1,2,"%D",3,0)
(#3) of the OTHER PROCEDURES multiple field (#.42) in SURGERY file (#130)
"^DD",130,130.16,3,1,2,"%D",4,0)
are stored in the OTHER PROCEDURE CPT MODIFIER field (#.01) of the OTHER
"^DD",130,130.16,3,1,2,"%D",5,0)
PROCEDURE CPT MODIFIER multiple field (#4) of the OTHER PROCEDURES
"^DD",130,130.16,3,1,2,"%D",6,0)
multiple field (#.42).
"^DD",130,130.16,3,1,2,"%D",7,0)
 
"^DD",130,130.16,3,1,2,"%D",8,0)
After selecting a CPT code, this cross reference prompts the user for a
"^DD",130,130.16,3,1,2,"%D",9,0)
CPT modifier.  If a CPT modifier was entered concatenated with a hyphen to
"^DD",130,130.16,3,1,2,"%D",10,0)
the CPT code, this CPT modifier is displayed as a default modifier. Upon
"^DD",130,130.16,3,1,2,"%D",11,0)
entering a CPT modifier, the user is prompted for another CPT modifier
"^DD",130,130.16,3,1,2,"%D",12,0)
until the user makes a null entry. CPT modifier input is controlled by the
"^DD",130,130.16,3,1,2,"%D",13,0)
input transform on the OTHER PROCEDURE CPT MODIFIER field (#.01 of
"^DD",130,130.16,3,1,2,"%D",14,0)
sub-file #130.164).  At the CPT modifier prompt, the user may enter a
"^DD",130,130.16,3,1,2,"%D",15,0)
question mark (?) to see a list of CPT modifiers already entered and a
"^DD",130,130.16,3,1,2,"%D",16,0)
list of acceptable CPT modifiers to choose from.  If the user selects a
"^DD",130,130.16,3,1,2,"%D",17,0)
modifier already entered, the user may change or delete the modifier.  If
"^DD",130,130.16,3,1,2,"%D",18,0)
a user enters a new CPT code, replacing a previously entered CPT code,
"^DD",130,130.16,3,1,2,"%D",19,0)
KILL logic on the ACPT1 cross reference deletes any previously entered CPT
"^DD",130,130.16,3,1,2,"%D",20,0)
modifiers for the old CPT code before the SET logic prompts the user to
"^DD",130,130.16,3,1,2,"%D",21,0)
enter CPT modifiers for the new CPT code.
"^DD",130,130.16,3,1,2,"DT")
2990225
"^DD",130,130.16,3,2)
S Y(0)=Y D OTHDISP^SROCPT
"^DD",130,130.16,3,2.1)
D OTHDISP^SROCPT
"^DD",130,130.16,3,3)
Enter the planned CPT code for this procedure.
"^DD",130,130.16,3,12)
Screen out Inactive Codes
"^DD",130,130.16,3,12.1)
S DIC("S")="I $$ACTIV^SROCPT($S($D(SRTN):SRTN,$D(DA(1)):DA(1),1:""""),+Y)"
"^DD",130,130.16,3,21,0)
^.001^5^5^3050624^^
"^DD",130,130.16,3,21,1,0)
This is the Current Procedural Terminology (CPT) code corresponding to
"^DD",130,130.16,3,21,2,0)
this planned operative procedure. A CPT modifier on the CPT code may be
"^DD",130,130.16,3,21,3,0)
included by appending the modifier to the CPT code separated by a
"^DD",130,130.16,3,21,4,0)
hyphen in the format "XXXXX-YY" where "XXXXX" is the five character CPT
"^DD",130,130.16,3,21,5,0)
code and "YY" is the two character CPT modifier.
"^DD",130,130.16,3,"DT")
3050606
"^DD",130,130.16,5,0)
OTHER ASSOC DIAGNOSIS^130.165A^^OADX;0
"^DD",130,130.16,5,21,0)
^.001^2^2^3040227^^^^
"^DD",130,130.16,5,21,1,0)
The OTHER ASSOC DIAGNOSIS is used to associate diagnoses to OTHER 
"^DD",130,130.16,5,21,2,0)
PROCEDURES.  This information is needed to generate a clean claim.
"^DD",130,130.16,5,"DT")
3040227
"^DD",130,130.165,0)
OTHER ASSOC DIAGNOSIS SUB-FIELD^^.01^1
"^DD",130,130.165,0,"NM","OTHER ASSOC DIAGNOSIS")

"^DD",130,130.165,.01,0)
OTHER ASSOC DIAGNOSIS^NJ5,0^^0;1^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."1N.N) X
"^DD",130,130.165,.01,.1)
Other Associated Diagnosis
"^DD",130,130.165,.01,1,0)
^.1^^-1
"^DD",130,130.165,.01,1,1,0)
130.165^B
"^DD",130,130.165,.01,1,1,1)
S ^SRF(DA(2),13,DA(1),"OADX","B",$E(X,1,30),DA)=""
"^DD",130,130.165,.01,1,1,2)
K ^SRF(DA(2),13,DA(1),"OADX","B",$E(X,1,30),DA)
"^DD",130,130.165,.01,3)
The associated Diagnosis can only be added via the Surgery Menu options.
"^DD",130,130.165,.01,21,0)
^^2^2^3040227^
"^DD",130,130.165,.01,21,1,0)
The OTHER ASSOC DIAGNOSIS is used to associate diagnoses to OTHER 
"^DD",130,130.165,.01,21,2,0)
PROCEDURES.  This information is needed to generate a clean claim.
"^DD",130,130.165,.01,"DT")
3050606
"^DD",130,130.18,0)
OTHER POSTOP DIAGS SUB-FIELD^NL^10^11
"^DD",130,130.18,0,"NM","OTHER POSTOP DIAGS")

"^DD",130,130.18,.01,0)
OTHER POSTOP DIAGS^MFX^^0;1^K:$L(X)>40!($L(X)<1) X D:$D(X) DIAG^SROUTL,PDXCHK^SROADX2(0) K:$G(X)="" X
"^DD",130,130.18,.01,.1)
Other Postoperative Diagnosis
"^DD",130,130.18,.01,1,0)
^.1^^-1
"^DD",130,130.18,.01,1,1,0)
^^TRIGGER^130.18^4
"^DD",130,130.18,.01,1,1,1)
X ^DD(130.18,.01,1,1,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,1),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,16) X ^DD(130.18,.01,1,1,1.4)
"^DD",130,130.18,.01,1,1,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,4,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,1)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,1,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,1)=DIV,DIH=130.18,DIG=4 D ^DICR
"^DD",130,130.18,.01,1,1,2)
Q
"^DD",130,130.18,.01,1,1,"CREATE CONDITION")
SERVICE CONNECTED=""
"^DD",130,130.18,.01,1,1,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,16)
"^DD",130,130.18,.01,1,1,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,1,"DT")
3030707
"^DD",130,130.18,.01,1,1,"FIELD")
SERVICE CONNECTED
"^DD",130,130.18,.01,1,2,0)
^^TRIGGER^130.18^10
"^DD",130,130.18,.01,1,2,1)
X ^DD(130.18,.01,1,2,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,7),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,24) X ^DD(130.18,.01,1,2,1.4)
"^DD",130,130.18,.01,1,2,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,10,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,7)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,2,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,7)=DIV,DIH=130.18,DIG=10 D ^DICR
"^DD",130,130.18,.01,1,2,2)
Q
"^DD",130,130.18,.01,1,2,"CREATE CONDITION")
COMBAT VET=""
"^DD",130,130.18,.01,1,2,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,24)
"^DD",130,130.18,.01,1,2,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,2,"DT")
3040318
"^DD",130,130.18,.01,1,2,"FIELD")
COMBAT VET
"^DD",130,130.18,.01,1,3,0)
^^TRIGGER^130.18^5
"^DD",130,130.18,.01,1,3,1)
X ^DD(130.18,.01,1,3,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,17) X ^DD(130.18,.01,1,3,1.4)
"^DD",130,130.18,.01,1,3,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,5,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,2)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,3,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,2)=DIV,DIH=130.18,DIG=5 D ^DICR
"^DD",130,130.18,.01,1,3,2)
Q
"^DD",130,130.18,.01,1,3,"CREATE CONDITION")
AGENT ORANGE=""
"^DD",130,130.18,.01,1,3,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,17)
"^DD",130,130.18,.01,1,3,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,3,"DT")
3040318
"^DD",130,130.18,.01,1,3,"FIELD")
AGENT ORANGE
"^DD",130,130.18,.01,1,4,0)
^^TRIGGER^130.18^6
"^DD",130,130.18,.01,1,4,1)
X ^DD(130.18,.01,1,4,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,3),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,18) X ^DD(130.18,.01,1,4,1.4)
"^DD",130,130.18,.01,1,4,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,6,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,3)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,4,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,3)=DIV,DIH=130.18,DIG=6 D ^DICR
"^DD",130,130.18,.01,1,4,2)
Q
"^DD",130,130.18,.01,1,4,"CREATE CONDITION")
IONIZING RADIATION EXPOSURE=""
"^DD",130,130.18,.01,1,4,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,18)
"^DD",130,130.18,.01,1,4,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,4,"DT")
3040318
"^DD",130,130.18,.01,1,4,"FIELD")
IONIZI
"^DD",130,130.18,.01,1,5,0)
^^TRIGGER^130.18^9
"^DD",130,130.18,.01,1,5,1)
X ^DD(130.18,.01,1,5,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,6),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,19) X ^DD(130.18,.01,1,5,1.4)
"^DD",130,130.18,.01,1,5,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,9,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,6)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,5,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,6)=DIV,DIH=130.18,DIG=9 D ^DICR
"^DD",130,130.18,.01,1,5,2)
Q
"^DD",130,130.18,.01,1,5,"CREATE CONDITION")
ENVIRONMENTAL CONTAMINANTS=""
"^DD",130,130.18,.01,1,5,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,19)
"^DD",130,130.18,.01,1,5,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,5,"DT")
3040318
"^DD",130,130.18,.01,1,5,"FIELD")
ENVI
"^DD",130,130.18,.01,1,6,0)
^^TRIGGER^130.18^7
"^DD",130,130.18,.01,1,6,1)
X ^DD(130.18,.01,1,6,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,4),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,22) X ^DD(130.18,.01,1,6,1.4)
"^DD",130,130.18,.01,1,6,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,7,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,4)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,6,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,4)=DIV,DIH=130.18,DIG=7 D ^DICR
"^DD",130,130.18,.01,1,6,2)
Q
"^DD",130,130.18,.01,1,6,"CREATE CONDITION")
MILITARY SEXUAL TRAUMA=""
"^DD",130,130.18,.01,1,6,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,22)
"^DD",130,130.18,.01,1,6,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,6,"DT")
3040318
"^DD",130,130.18,.01,1,6,"FIELD")
MILITARY
"^DD",130,130.18,.01,1,7,0)
^^TRIGGER^130.18^8
"^DD",130,130.18,.01,1,7,1)
X ^DD(130.18,.01,1,7,1.3) I X S X=DIV S Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P(Y(1),U,5),X=X S DIU=X K Y S X=DIV S X=$P(^SRF(DA(1),0),U,23) X ^DD(130.18,.01,1,7,1.4)
"^DD",130,130.18,.01,1,7,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(130.18,8,0)),U,3),Y(1)=$S($D(^SRF(D0,15,D1,2)):^(2),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,5)_":",2),$C(59))=""
"^DD",130,130.18,.01,1,7,1.4)
S DIH=$G(^SRF(DIV(0),15,DIV(1),2)),DIV=X S $P(^(2),U,5)=DIV,DIH=130.18,DIG=8 D ^DICR
"^DD",130,130.18,.01,1,7,2)
Q
"^DD",130,130.18,.01,1,7,"CREATE CONDITION")
HEAD AND/OR NECK CANCER=""
"^DD",130,130.18,.01,1,7,"CREATE VALUE")
S X=$P(^SRF(DA(1),0),U,23)
"^DD",130,130.18,.01,1,7,"DELETE VALUE")
NO EFFECT
"^DD",130,130.18,.01,1,7,"DT")
3040318
"^DD",130,130.18,.01,1,7,"FIELD")
HEAD
"^DD",130,130.18,.01,1,8,0)
130.18^DADX1^MUMPS
"^DD",130,130.18,.01,1,8,1)
Q
"^DD",130,130.18,.01,1,8,2)
D DELASOC^SROADX2
"^DD",130,130.18,.01,1,8,"%D",0)
^^2^2^3040318^
"^DD",130,130.18,.01,1,8,"%D",1,0)
This MUMPS cross reference removes associations to procedures upon edits 
"^DD",130,130.18,.01,1,8,"%D",2,0)
or deletes of the diagnosis.
"^DD",130,130.18,.01,1,8,"DT")
3040318
"^DD",130,130.18,.01,3)
Your answer must be 1 to 40 characters in length.
"^DD",130,130.18,.01,21,0)
^.001^3^3^3030917^^^^
"^DD",130,130.18,.01,21,1,0)
This is the name of a postoperative diagnosis other than the principal
"^DD",130,130.18,.01,21,2,0)
postoperative diagnosis.
"^DD",130,130.18,.01,21,3,0)
 
"^DD",130,130.18,.01,"DT")
3050606
"^DD",130,130.18,3,0)
PLANNED ICD DIAGNOSIS CODE^*P80'X^ICD9(^0;3^S DIC("S")="I $$ACTIV^SROICD($S($D(SRTN):SRTN,$D(DA(1)):DA(1),1:""""),+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",130,130.18,3,.1)
Planned Other ICD Diagnosis Code
"^DD",130,130.18,3,1,0)
^.1^^-1
"^DD",130,130.18,3,1,2,0)
130.18^PADX^MUMPS
"^DD",130,130.18,3,1,2,1)
Q
"^DD",130,130.18,3,1,2,2)
D DELASOC^SROADX2
"^DD",130,130.18,3,1,2,"%D",0)
^^2^2^3031014^
"^DD",130,130.18,3,1,2,"%D",1,0)
This MUMPS cross reference removes associations to procedures upon edits 
"^DD",130,130.18,3,1,2,"%D",2,0)
or deletes of the diagnosis.
"^DD",130,130.18,3,1,2,"DT")
3030923
"^DD",130,130.18,3,3)
Enter the planned ICD Diagnosis Code that corresponds to this diagnosis.
"^DD",130,130.18,3,12)
Screen prevents selection of inactive diagnosis.
"^DD",130,130.18,3,12.1)
S DIC("S")="I $$ACTIV^SROICD($S($D(SRTN):SRTN,$D(DA(1)):DA(1),1:""""),+Y)"
"^DD",130,130.18,3,21,0)
^^2^2^3050623^
"^DD",130,130.18,3,21,1,0)
This is the planned ICD-9-CM code corresponding with this postoperative
"^DD",130,130.18,3,21,2,0)
diagnosis.
"^DD",130,130.18,3,"DT")
3050623
"^DD",130,130.275,0)
PRIN ASSOC DIAGNOSIS SUB-FIELD^^.01^1
"^DD",130,130.275,0,"NM","PRIN ASSOC DIAGNOSIS")

"^DD",130,130.275,.01,0)
PRIN ASSOC DIAGNOSIS^NJ5,0^^0;1^K:+X'=X!(X>99999)!(X<0)!(X?.E1"."1N.N) X
"^DD",130,130.275,.01,.1)
Pointer To ICD DIAGNOSIS File (#80)
"^DD",130,130.275,.01,1,0)
^.1^^-1
"^DD",130,130.275,.01,1,2,0)
130.275^B
"^DD",130,130.275,.01,1,2,1)
S ^SRF(DA(1),"PADX","B",$E(X,1,30),DA)=""
"^DD",130,130.275,.01,1,2,2)
K ^SRF(DA(1),"PADX","B",$E(X,1,30),DA)
"^DD",130,130.275,.01,1,2,"DT")
3030915
"^DD",130,130.275,.01,3)
This field can only be changed via the Surgery Menu.  All entries outside of the Surgery menu will not be filed.
"^DD",130,130.275,.01,21,0)
^.001^3^3^3040227^^^^
"^DD",130,130.275,.01,21,1,0)
This field holds the IEN of the associated diagnosis.  It is used to 
"^DD",130,130.275,.01,21,2,0)
store the Procedure/Diagnosis association data needed to create a clean 
"^DD",130,130.275,.01,21,3,0)
claim.  This field can only be changed via the Surgery menu.
"^DD",130,130.275,.01,"DT")
3050606
"^DD",136,136,0)
FIELD^^11^16
"^DD",136,136,0,"DDA")
N
"^DD",136,136,0,"DT")
3050426
"^DD",136,136,0,"IX","B",136,.01)

"^DD",136,136,0,"NM","SURGERY PROCEDURE/DIAGNOSIS CODES")

"^DD",136,136,0,"VRPK")
SR
"^DD",136,136,.01,0)
SURGERY CASE^RP130'X^SRF(^0;1^S DINUM=X
"^DD",136,136,.01,.1)
Surgery Case
"^DD",136,136,.01,1,0)
^.1
"^DD",136,136,.01,1,1,0)
136^B
"^DD",136,136,.01,1,1,1)
S ^SRO(136,"B",$E(X,1,30),DA)=""
"^DD",136,136,.01,1,1,2)
K ^SRO(136,"B",$E(X,1,30),DA)
"^DD",136,136,.01,3)
Enter the matching case in the SURGERY file (#130). 
"^DD",136,136,.01,21,0)
^^1^1^3041214^
"^DD",136,136,.01,21,1,0)
This is the case in the SURGERY file associated with this file entry.
"^DD",136,136,.01,"DT")
3041214
"^DD",136,136,.02,0)
PRINCIPAL PROCEDURE CODE^*P81'OX^ICPT(^0;2^D IN^SROCPT S DIC("S")="I $$ACTIV^SROCPT($S($D(SRTN):SRTN,$D(DA):DA,1:""""),+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X D:$D(X) PHYPH^SROMOD0
"^DD",136,136,.02,.1)
Principal Procedure Code (CPT)
"^DD",136,136,.02,1,0)
^.1^^0
"^DD",136,136,.02,2)
S Y(0)=Y D DISPLAY^SROCPT0
"^DD",136,136,.02,2.1)
D DISPLAY^SROCPT0
"^DD",136,136,.02,3)
Enter the CPT code for the principal procedure.
"^DD",136,136,.02,12)
Screen out Inactive Codes.
"^DD",136,136,.02,12.1)
S DIC("S")="I $$ACTIV^SROCPT($S($D(SRTN):SRTN,$D(DA):DA,1:""""),+Y)"
"^DD",136,136,.02,21,0)
^^2^2^3050801^
"^DD",136,136,.02,21,1,0)
This is the Current Procedural Terminology (CPT) code corresponding
"^DD",136,136,.02,21,2,0)
with the principal procedure. 
"^DD",136,136,.02,"DEL",1,0)
I 1 D EN^DDIOL("Deletion of the Principal Procedure Code is not allowed! ",,"!!,?2")
"^DD",136,136,.02,"DT")
3050731
"^DD",136,136,.03,0)
PRIN POSTOP DIAGNOSIS CODE^*P80'X^ICD9(^0;3^S DIC("S")="I $$ACTIV^SROICD($S($D(SRTN):SRTN,$D(DA):DA,1:""""),+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",136,136,.03,.1)
Principal Postop Diagnosis Code (ICD9)
"^DD",136,136,.03,1,0)
^.1^^0
"^DD",136,136,.03,3)
Enter the ICD Diagnosis code for the principal postoperative diagnosis.
"^DD",136,136,.03,12)
Screen prevents selection of inactive diagnosis.
"^DD",136,136,.03,12.1)
S DIC("S")="I $$ACTIV^SROICD($S($D(SRTN):SRTN,$D(DA):DA,1:""""),+Y)"
"^DD",136,136,.03,21,0)
^^1^1^3050504^
"^DD",136,136,.03,21,1,0)
This is the principal postoperative ICD9 diagnosis code.
"^DD",136,136,.03,"DEL",1,0)
I 1 D EN^DDIOL("Deletion of the Principal Postop Diagnosis Code is not allowed! ",,"!!,?2")
"^DD",136,136,.03,"DT")
3050726
"^DD",136,136,.04,0)
SERVICE CONNECTED (PRIN)^S^1:YES;0:NO;^0;4^Q
"^DD",136,136,.04,.1)
Treatment related to Service Connected condition (Y/N)
"^DD",136,136,.04,3)
If the principal diagnosis is a service connected problem, enter YES.
"^DD",136,136,.04,21,0)
^^3^3^3050111^
"^DD",136,136,.04,21,1,0)
This field indicates if the principal diagnosis is a service connected 
"^DD",136,136,.04,21,2,0)
problem. This information may be passed to the VISIT file (#9000010) 
"^DD",136,136,.04,21,3,0)
for use by PCE.
"^DD",136,136,.04,"DT")
3050111
"^DD",136,136,.05,0)
AGENT ORANGE EXPOSURE (PRIN)^S^1:YES;0:NO;^0;5^Q
"^DD",136,136,.05,.1)
Treatment related to Agent Orange Exposure (Y/N)
"^DD",136,136,.05,3)
If the principal diagnosis is an agent orange exposure problem, enter YES.
"^DD",136,136,.05,21,0)
^.001^3^3^3050111^^
"^DD",136,136,.05,21,1,0)
This field indicates if the principal diagnosis is an agent orange 
"^DD",136,136,.05,21,2,0)
exposure problem. This information may be passed to the VISIT file
"^DD",136,136,.05,21,3,0)
(#9000010) for use by PCE.
"^DD",136,136,.05,"DT")
3050111
"^DD",136,136,.06,0)
IONIZING RAD EXPOSURE (PRIN)^S^1:YES;0:NO;^0;6^Q
"^DD",136,136,.06,.1)
Treatment related to Ionizing Radiation Exposure (Y/N)
"^DD",136,136,.06,3)
If the principal diagnosis is an ionizing radiation exposure problem, enter YES.
"^DD",136,136,.06,21,0)
^.001^3^3^3050112^^
"^DD",136,136,.06,21,1,0)
This field indicates if the principal diagnosis is an ionizing 
"^DD",136,136,.06,21,2,0)
radiation exposure problem. This information may be passed to the VISIT
"^DD",136,136,.06,21,3,0)
file (#9000010) for use by PCE.
"^DD",136,136,.06,"DT")
3050112
"^DD",136,136,.07,0)
ENVIRONMENTAL CONTAMIN (PRIN)^S^1:YES;0:NO;^0;7^Q
"^DD",136,136,.07,.1)
Treatment related to Environmental Contaminants Exposure (Y/N)
"^DD",136,136,.07,3)
If the principal diagnosis is an environmental contaminant exposure problem, enter YES.
"^DD",136,136,.07,21,0)
^.001^3^3^3050112^^^^
"^DD",136,136,.07,21,1,0)
This field indicates if the principal diagnosis is an environmental 
"^DD",136,136,.07,21,2,0)
contaminants exposure problem. This information may be passed to the 
"^DD",136,136,.07,21,3,0)
VISIT file (#9000010) for use by PCE.
"^DD",136,136,.07,"DT")
3050112
"^DD",136,136,.08,0)
MILITARY SEXUAL TRAUMA (PRIN)^S^1:YES;0:NO;^0;8^Q
"^DD",136,136,.08,.1)
Treatment related to Military Sexual Trauma (Y/N)
"^DD",136,136,.08,3)
If the principal diagnosis is related to military sexual trauma, enter YES.
"^DD",136,136,.08,21,0)
^.001^3^3^3050112^^^
"^DD",136,136,.08,21,1,0)
This field indicates if the principal diagnosis is a military sexual 
"^DD",136,136,.08,21,2,0)
trauma problem. This information may be passed to the VISIT file
"^DD",136,136,.08,21,3,0)
(#9000010) for use by PCE.
"^DD",136,136,.08,"DT")
3050112
"^DD",136,136,.09,0)
HEAD AND/OR NECK CANCER (PRIN)^S^1:YES;0:NO;^0;9^Q
"^DD",136,136,.09,.1)
Treatment related to Head and/or Neck Cancer (Y/N)
"^DD",136,136,.09,3)
If the principal diagnosis is a problem related to head and/or neck cancer, enter YES.
"^DD",136,136,.09,21,0)
^.001^3^3^3050112^^^
"^DD",136,136,.09,21,1,0)
This field indicates if the principal diagnosis is a head and/or neck 
"^DD",136,136,.09,21,2,0)
cancer problem. This information may be passed to the VISIT file
"^DD",136,136,.09,21,3,0)
(#9000010) for use by PCE.
"^DD",136,136,.09,"DT")
3050112
"^DD",136,136,.1,0)
COMBAT VET (PRIN)^S^1:YES;0:NO;^0;10^Q
"^DD",136,136,.1,.1)
Treatment related to Combat (Y/N)
"^DD",136,136,.1,3)
If the principal diagnosis is a problem related to combat, enter YES.
"^DD",136,136,.1,21,0)
^.001^3^3^3050112^^
"^DD",136,136,.1,21,1,0)
This field indicates if the principal diagnosis is a combat related
"^DD",136,136,.1,21,2,0)
problem. This information may be passed to the VISIT file (#9000010)
"^DD",136,136,.1,21,3,0)
for use by PCE.
"^DD",136,136,.1,"DT")
3050112
"^DD",136,136,1,0)
PRIN PROCEDURE CPT MODIFIERS^136.01P^^1;0
"^DD",136,136,1,"DT")
3041215
"^DD",136,136,2,0)
PRIN ASSOCIATED DIAGNOSES^136.02P^^2;0
"^DD",136,136,2,"DT")
3041215
"^DD",136,136,3,0)
OTHER PROCEDURE CODES^136.03PA^^3;0
"^DD",136,136,4,0)
OTHER POSTOP DIAGNOSIS CODES^136.04P^^4;0
"^DD",136,136,4,"DT")
3050112
"^DD",136,136,10,0)
CODING COMPLETE^S^1:YES;0:NO;^10;1^Q
"^DD",136,136,10,.1)
Coding is Complete and Ready to Send to PCE?
"^DD",136,136,10,3)
Enter YES if the record is complete and ready to send to PCE.
"^DD",136,136,10,9)
^
"^DD",136,136,10,21,0)
^.001^2^2^3050309^^
"^DD",136,136,10,21,1,0)
This field indicates if the coding record is complete for this case and 
"^DD",136,136,10,21,2,0)
is ready to send to PCE.
"^DD",136,136,10,"DT")
3050309
"^DD",136,136,11,0)
CODING COMPLETED BY^136.011PA^^11;0
"^DD",136,136,11,9)
^
"^DD",136,136.01,0)
PRIN PROCEDURE CPT MODIFIERS SUB-FIELD^^.01^1
"^DD",136,136.01,0,"DT")
3041215
"^DD",136,136.01,0,"NM","PRIN PROCEDURE CPT MODIFIERS")

"^DD",136,136.01,0,"UP")
136
"^DD",136,136.01,.01,0)
PRIN PROCEDURE CPT MODIFIER^M*P81.3'O^DIC(81.3,^0;1^S DIC("S")="I $$SCR27^SROMOD0" D ^DIC K DIC S DIC=$G(DIE),X=+Y K:Y<0 X
"^DD",136,136.01,.01,.1)
Principal Procedure CPT Modifier
"^DD",136,136.01,.01,1,0)
^.1^^0
"^DD",136,136.01,.01,2)
S Y(0)=Y D DISPLAY^SROMOD0
"^DD",136,136.01,.01,2.1)
D DISPLAY^SROMOD0
"^DD",136,136.01,.01,3)
Enter a CPT modifier for this procedure.
"^DD",136,136.01,.01,12)
Screen prevents selection of modifier inappropriate for CPT code.
"^DD",136,136.01,.01,12.1)
S DIC("S")="I $$SCR27^SROMOD0"
"^DD",136,136.01,.01,21,0)
^^3^3^3041215^
"^DD",136,136.01,.01,21,1,0)
This is a procedural coding modifier used to indicate that the 
"^DD",136,136.01,.01,21,2,0)
principal procedure performed has been altered by some specific
"^DD",136,136.01,.01,21,3,0)
circumstance but not changed in its definition or code.
"^DD",136,136.01,.01,"DT")
3041216
"^DD",136,136.011,0)
CODING COMPLETED BY SUB-FIELD^^1^2
"^DD",136,136.011,0,"DT")
3050426
"^DD",136,136.011,0,"NM","CODING COMPLETED BY")

"^DD",136,136.011,0,"UP")
136
"^DD",136,136.011,.01,0)
CODING COMPLETED BY^P200'I^VA(200,^0;1^Q
"^DD",136,136.011,.01,.1)
Person Who Completed the Coding of this Case
"^DD",136,136.011,.01,1,0)
^.1^^0
"^DD",136,136.011,.01,3)
Enter the name of person who completed the coding of this case.
"^DD",136,136.011,.01,21,0)
^.001^1^1^3050426^^
"^DD",136,136.011,.01,21,1,0)
This is the name of the person who completed the coding of this case.
"^DD",136,136.011,.01,"DEL",1,0)
I 1 D EN^DDIOL("Deletion not allowed!",,"!!,?2")
"^DD",136,136.011,.01,"DT")
3050426
"^DD",136,136.011,1,0)
DATE CODING COMPLETED^DI^^0;2^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",136,136.011,1,.1)
Date/Time Coding Was Completed
"^DD",136,136.011,1,3)
Enter the date and time the coding of this case was completed.
"^DD",136,136.011,1,21,0)
^.001^2^2^3050426^^
"^DD",136,136.011,1,21,1,0)
This is the date and time the coding of this case was completed and was 
"^DD",136,136.011,1,21,2,0)
sent to PCE.
"^DD",136,136.011,1,"DT")
3050426
"^DD",136,136.02,0)
PRIN ASSOCIATED DIAGNOSES SUB-FIELD^^.01^1
"^DD",136,136.02,0,"DT")
3041215
"^DD",136,136.02,0,"NM","PRIN ASSOCIATED DIAGNOSES")

"^DD",136,136.02,0,"UP")
136
"^DD",136,136.02,.01,0)
PRIN ASSOCIATED DIAGNOSIS^MP80'^ICD9(^0;1^Q
"^DD",136,136.02,.01,.1)
Principal Associated Diagnosis Code
"^DD",136,136.02,.01,1,0)
^.1^^0
"^DD",136,136.02,.01,3)
Enter a diagnosis code associated with the principal procedure.
"^DD",136,136.02,.01,21,0)
^.001^1^1^3041215^^
"^DD",136,136.02,.01,21,1,0)
This is a diagnosis associated with the principal procedure. 
"^DD",136,136.02,.01,"DT")
3050112
"^DD",136,136.03,0)
OTHER PROCEDURE CODES SUB-FIELD^^2^3
"^DD",136,136.03,0,"DT")
3050114
"^DD",136,136.03,0,"NM","OTHER PROCEDURE CODES")

"^DD",136,136.03,0,"UP")
136
"^DD",136,136.03,.01,0)
OTHER PROCEDURE CODE^*P81'OX^ICPT(^0;1^D IN^SROCPT0 S DIC("S")="I $$ACTIV^SROCPT($S($D(SRTN):SRTN,$D(DA(1)):DA(1),1:""""),+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X D:$D(X) KOMOD^SROMOD0
"^DD",136,136.03,.01,.1)
Other Procedure CPT Code
"^DD",136,136.03,.01,1,0)
^.1^^0
"^DD",136,136.03,.01,2)
S Y(0)=Y D OTHDISP^SROCPT0
"^DD",136,136.03,.01,2.1)
D OTHDISP^SROCPT0
"^DD",136,136.03,.01,3)
Enter the CPT code for this procedure.
"^DD",136,136.03,.01,12)
Screen out Inactive Codes
"^DD",136,136.03,.01,12.1)
S DIC("S")="I $$ACTIV^SROCPT($S($D(SRTN):SRTN,$D(DA(1)):DA(1),1:""""),+Y)"
"^DD",136,136.03,.01,21,0)
^^2^2^3050801^
"^DD",136,136.03,.01,21,1,0)
This is the Current Procedural Terminology (CPT) code corresponding to
"^DD",136,136.03,.01,21,2,0)
this operative procedure.
"^DD",136,136.03,.01,"DT")
3050801
"^DD",136,136.03,1,0)
OTHER PROCEDURE CPT MODIFIERS^136.31P^^1;0
"^DD",136,136.03,2,0)
OTHER ASSOCIATED DIAGNOSES^136.32P^^2;0
"^DD",136,136.04,0)
OTHER POSTOP DIAGNOSIS CODES SUB-FIELD^^.08^8
"^DD",136,136.04,0,"DT")
3050112
"^DD",136,136.04,0,"NM","OTHER POSTOP DIAGNOSIS CODES")

"^DD",136,136.04,0,"UP")
136
"^DD",136,136.04,.01,0)
OTHER POSTOP DIAGNOSIS CODE^M*P80'^ICD9(^0;1^S DIC("S")="I $$ACTIV^SROICD($S($D(SRTN):SRTN,$D(DA(1)):DA(1),1:""""),+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",136,136.04,.01,.1)
Other Postop Diagnosis Code
"^DD",136,136.04,.01,1,0)
^.1^^-1
"^DD",136,136.04,.01,1,1,0)
^^TRIGGER^136.04^.02
"^DD",136,136.04,.01,1,1,1)
X ^DD(136.04,.01,1,1,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,4) X ^DD(136.04,.01,1,1,1.4)
"^DD",136,136.04,.01,1,1,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.02,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,2)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,1,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,2)=DIV,DIH=136.04,DIG=.02 D ^DICR
"^DD",136,136.04,.01,1,1,2)
Q
"^DD",136,136.04,.01,1,1,"CREATE CONDITION")
SERVICE CONNECTED=""
"^DD",136,136.04,.01,1,1,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,4)
"^DD",136,136.04,.01,1,1,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,1,"DT")
3050112
"^DD",136,136.04,.01,1,1,"FIELD")
SERVICE CONNECTED
"^DD",136,136.04,.01,1,2,0)
^^TRIGGER^136.04^.03
"^DD",136,136.04,.01,1,2,1)
X ^DD(136.04,.01,1,2,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,3),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,5) X ^DD(136.04,.01,1,2,1.4)
"^DD",136,136.04,.01,1,2,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.03,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,3)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,2,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,3)=DIV,DIH=136.04,DIG=.03 D ^DICR
"^DD",136,136.04,.01,1,2,2)
Q
"^DD",136,136.04,.01,1,2,"CREATE CONDITION")
AGENT ORANGE EXPOSURE=""
"^DD",136,136.04,.01,1,2,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,5)
"^DD",136,136.04,.01,1,2,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,2,"DT")
3050112
"^DD",136,136.04,.01,1,2,"FIELD")
AGENT ORANGE EXPOSURE
"^DD",136,136.04,.01,1,3,0)
^^TRIGGER^136.04^.04
"^DD",136,136.04,.01,1,3,1)
X ^DD(136.04,.01,1,3,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,4),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,6) X ^DD(136.04,.01,1,3,1.4)
"^DD",136,136.04,.01,1,3,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.04,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,4)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,3,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,4)=DIV,DIH=136.04,DIG=.04 D ^DICR
"^DD",136,136.04,.01,1,3,2)
Q
"^DD",136,136.04,.01,1,3,"CREATE CONDITION")
IONIZING RADIATION EXPOSURE=""
"^DD",136,136.04,.01,1,3,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,6)
"^DD",136,136.04,.01,1,3,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,3,"DT")
3050112
"^DD",136,136.04,.01,1,3,"FIELD")
IONIZING RADIATION EXPOSURE
"^DD",136,136.04,.01,1,4,0)
^^TRIGGER^136.04^.05
"^DD",136,136.04,.01,1,4,1)
X ^DD(136.04,.01,1,4,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,5),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,8) X ^DD(136.04,.01,1,4,1.4)
"^DD",136,136.04,.01,1,4,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.05,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,5)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,4,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,5)=DIV,DIH=136.04,DIG=.05 D ^DICR
"^DD",136,136.04,.01,1,4,2)
Q
"^DD",136,136.04,.01,1,4,"CREATE CONDITION")
MILITARY SEXUAL TRAUMA=""
"^DD",136,136.04,.01,1,4,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,8)
"^DD",136,136.04,.01,1,4,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,4,"DT")
3050112
"^DD",136,136.04,.01,1,4,"FIELD")
MILITARY SEXUAL TRAUMA
"^DD",136,136.04,.01,1,5,0)
^^TRIGGER^136.04^.06
"^DD",136,136.04,.01,1,5,1)
X ^DD(136.04,.01,1,5,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,6),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,9) X ^DD(136.04,.01,1,5,1.4)
"^DD",136,136.04,.01,1,5,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.06,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,6)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,5,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,6)=DIV,DIH=136.04,DIG=.06 D ^DICR
"^DD",136,136.04,.01,1,5,2)
Q
"^DD",136,136.04,.01,1,5,"CREATE CONDITION")
HEAD AND/OR NECK CANCER=""
"^DD",136,136.04,.01,1,5,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,9)
"^DD",136,136.04,.01,1,5,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,5,"DT")
3050112
"^DD",136,136.04,.01,1,5,"FIELD")
HEAD AND/OR NECK CANCER
"^DD",136,136.04,.01,1,6,0)
^^TRIGGER^136.04^.07
"^DD",136,136.04,.01,1,6,1)
X ^DD(136.04,.01,1,6,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,7),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,7) X ^DD(136.04,.01,1,6,1.4)
"^DD",136,136.04,.01,1,6,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.07,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,7)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,6,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,7)=DIV,DIH=136.04,DIG=.07 D ^DICR
"^DD",136,136.04,.01,1,6,2)
Q
"^DD",136,136.04,.01,1,6,"CREATE CONDITION")
ENVIRONMENTAL CONTAMINANTS=""
"^DD",136,136.04,.01,1,6,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,7)
"^DD",136,136.04,.01,1,6,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,6,"DT")
3050112
"^DD",136,136.04,.01,1,6,"FIELD")
ENVIRONMENTAL CONTAMINANTS
"^DD",136,136.04,.01,1,7,0)
^^TRIGGER^136.04^.08
"^DD",136,136.04,.01,1,7,1)
X ^DD(136.04,.01,1,7,1.3) I X S X=DIV S Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,8),X=X S DIU=X K Y S X=DIV S X=$P(^SRO(136,DA(1),0),U,10) X ^DD(136.04,.01,1,7,1.4)
"^DD",136,136.04,.01,1,7,1.3)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(0)=X S Y(2)=$C(59)_$P($G(^DD(136.04,.08,0)),U,3),Y(1)=$S($D(^SRO(136,D0,4,D1,0)):^(0),1:"") S X=$P($P(Y(2),$C(59)_$P(Y(1),U,8)_":",2),$C(59))=""
"^DD",136,136.04,.01,1,7,1.4)
S DIH=$G(^SRO(136,DIV(0),4,DIV(1),0)),DIV=X S $P(^(0),U,8)=DIV,DIH=136.04,DIG=.08 D ^DICR
"^DD",136,136.04,.01,1,7,2)
Q
"^DD",136,136.04,.01,1,7,"CREATE CONDITION")
COMBAT VET=""
"^DD",136,136.04,.01,1,7,"CREATE VALUE")
S X=$P(^SRO(136,DA(1),0),U,10)
"^DD",136,136.04,.01,1,7,"DELETE VALUE")
NO EFFECT
"^DD",136,136.04,.01,1,7,"DT")
3050112
"^DD",136,136.04,.01,1,7,"FIELD")
COMBAT VET
"^DD",136,136.04,.01,3)
Enter the ICD Diagnosis Code that corresponds to this diagnosis.
"^DD",136,136.04,.01,12)
Screen prevents selection of inactive diagnosis.
"^DD",136,136.04,.01,12.1)
S DIC("S")="I $$ACTIV^SROICD($S($D(SRTN):SRTN,$D(DA(1)):DA(1),1:""""),+Y)"
"^DD",136,136.04,.01,21,0)
^^2^2^3050112^
"^DD",136,136.04,.01,21,1,0)
This is the ICD-9-CM code corresponding with this postoperative
"^DD",136,136.04,.01,21,2,0)
diagnosis.
"^DD",136,136.04,.01,"DT")
3050726
"^DD",136,136.04,.02,0)
SERVICE CONNECTED^S^1:YES;0:NO;^0;2^Q
"^DD",136,136.04,.02,.1)
Treatment related to Service Connected condition (Y/N)
"^DD",136,136.04,.02,3)
If this diagnosis is a service connected problem, enter YES.
"^DD",136,136.04,.02,5,1,0)
136.04^.01^1
"^DD",136,136.04,.02,21,0)
^.001^3^3^3050112^^
"^DD",136,136.04,.02,21,1,0)
This field indicates if this diagnosis is a service connected problem.
"^DD",136,136.04,.02,21,2,0)
This information may be passed to the VISIT file (#9000010) for use by
"^DD",136,136.04,.02,21,3,0)
PCE.
"^DD",136,136.04,.02,"DT")
3050112
"^DD",136,136.04,.03,0)
AGENT ORANGE EXPOSURE^S^1:YES;0:NO;^0;3^Q
"^DD",136,136.04,.03,.1)
Treatment related to Agent Orange Exposure (Y/N)
"^DD",136,136.04,.03,3)
If this diagnosis is an agent orange exposure problem, enter YES.
"^DD",136,136.04,.03,5,1,0)
136.04^.01^2
"^DD",136,136.04,.03,21,0)
^.001^3^3^3050112^^
"^DD",136,136.04,.03,21,1,0)
This field indicates if this diagnosis is an agent orange exposure 
"^DD",136,136.04,.03,21,2,0)
problem. This information may be passed to the VISIT file (#9000010)
"^DD",136,136.04,.03,21,3,0)
for use by PCE.
"^DD",136,136.04,.03,"DT")
3050112
"^DD",136,136.04,.04,0)
IONIZING RADIATION EXPOSURE^S^1:YES;0:NO;^0;4^Q
"^DD",136,136.04,.04,.1)
Treatment related to Ionizing Radiation Exposure (Y/N)
"^DD",136,136.04,.04,3)
If this diagnosis is an ionizing radiation exposure problem, enter YES.
"^DD",136,136.04,.04,5,1,0)
136.04^.01^3
"^DD",136,136.04,.04,21,0)
^.001^3^3^3050112^^
"^DD",136,136.04,.04,21,1,0)
This field indicates if this diagnosis is an ionizing radiation 
"^DD",136,136.04,.04,21,2,0)
exposure problem. This information may be passed to the VISIT file
"^DD",136,136.04,.04,21,3,0)
(#9000010) for use by PCE.
"^DD",136,136.04,.04,"DT")
3050112
"^DD",136,136.04,.05,0)
MILITARY SEXUAL TRAUMA^S^1:YES;0:NO;^0;5^Q
"^DD",136,136.04,.05,.1)
Treatment related to Military Sexual Trauma (Y/N)
"^DD",136,136.04,.05,3)
If this diagnosis is related to military sexual trauma, enter YES.
"^DD",136,136.04,.05,5,1,0)
136.04^.01^4
"^DD",136,136.04,.05,21,0)
^.001^3^3^3050112^^
"^DD",136,136.04,.05,21,1,0)
This field indicates if this diagnosis is a military sexual trauma
"^DD",136,136.04,.05,21,2,0)
problem. This information may be passed to the VISIT file (#9000010)
"^DD",136,136.04,.05,21,3,0)
for use by PCE.
"^DD",136,136.04,.05,"DT")
3050112
"^DD",136,136.04,.06,0)
HEAD AND/OR NECK CANCER^S^1:YES;0:NO;^0;6^Q
"^DD",136,136.04,.06,.1)
Treatment related to Head and/or Neck Cancer (Y/N)
"^DD",136,136.04,.06,3)
If this diagnosis is related to head and/or neck cancer, enter YES.
"^DD",136,136.04,.06,5,1,0)
136.04^.01^5
"^DD",136,136.04,.06,21,0)
^.001^3^3^3050112^^
"^DD",136,136.04,.06,21,1,0)
This field indicates if this diagnosis is a head and/or neck cancer
"^DD",136,136.04,.06,21,2,0)
problem. This information may be passed to the VISIT file (#9000010)
"^DD",136,136.04,.06,21,3,0)
for use by PCE.
"^DD",136,136.04,.06,"DT")
3050112
"^DD",136,136.04,.07,0)
ENVIRONMENTAL CONTAMINANTS^S^1:YES;0:NO;^0;7^Q
"^DD",136,136.04,.07,.1)
Treatment related to Environmental Contaminants Exposure (Y/N)
"^DD",136,136.04,.07,3)
If this diagnosis is an environmental contaminant exposure problem, enter YES.
"^DD",136,136.04,.07,5,1,0)
136.04^.01^6
"^DD",136,136.04,.07,21,0)
^.001^3^3^3050112^^
"^DD",136,136.04,.07,21,1,0)
This field indicates if this diagnosis is an environmental 
"^DD",136,136.04,.07,21,2,0)
contaminants exposure problem. This information may be passed to the
"^DD",136,136.04,.07,21,3,0)
VISIT file (#9000010) for use by PCE.
"^DD",136,136.04,.07,"DT")
3050112
"^DD",136,136.04,.08,0)
COMBAT VET^S^1:YES;0:NO;^0;8^Q
"^DD",136,136.04,.08,.1)
Treatment related to Combat (Y/N)
"^DD",136,136.04,.08,3)
If this diagnosis is related to combat, enter YES.
"^DD",136,136.04,.08,5,1,0)
136.04^.01^7
"^DD",136,136.04,.08,21,0)
^.001^3^3^3050112^^
"^DD",136,136.04,.08,21,1,0)
This field indicates if this diagnosis is a combat related problem.
"^DD",136,136.04,.08,21,2,0)
This information may be passed to the VISIT file (#9000010) for use by
"^DD",136,136.04,.08,21,3,0)
PCE.
"^DD",136,136.04,.08,"DT")
3050112
"^DD",136,136.31,0)
OTHER PROCEDURE CPT MODIFIERS SUB-FIELD^^.01^1
"^DD",136,136.31,0,"DT")
3050114
"^DD",136,136.31,0,"NM","OTHER PROCEDURE CPT MODIFIERS")

"^DD",136,136.31,0,"UP")
136.03
"^DD",136,136.31,.01,0)
OTHER PROCEDURE CPT MODIFIER^M*P81.3'O^DIC(81.3,^0;1^S DIC("S")="I $$OTH^SROMOD0" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",136,136.31,.01,.1)
Other Procedure CPT Modifier
"^DD",136,136.31,.01,1,0)
^.1^^0
"^DD",136,136.31,.01,2)
S Y(0)=Y D DISPLAY^SROMOD0
"^DD",136,136.31,.01,2.1)
D DISPLAY^SROMOD0
"^DD",136,136.31,.01,3)
Enter a CPT modifier for this procedure.
"^DD",136,136.31,.01,12)
Screen prevents selection of modifier inappropriate for CPT code.
"^DD",136,136.31,.01,12.1)
S DIC("S")="I $$OTH^SROMOD0"
"^DD",136,136.31,.01,21,0)
^.001^3^3^3050114^^^
"^DD",136,136.31,.01,21,1,0)
This is a procedural coding modifier used to indicate that the other
"^DD",136,136.31,.01,21,2,0)
procedure performed has been altered by some specific circumstance but 
"^DD",136,136.31,.01,21,3,0)
not changed in its definition or code.
"^DD",136,136.31,.01,"DT")
3050114
"^DD",136,136.32,0)
OTHER ASSOCIATED DIAGNOSES SUB-FIELD^^.01^1
"^DD",136,136.32,0,"DT")
3041215
"^DD",136,136.32,0,"NM","OTHER ASSOCIATED DIAGNOSES")

"^DD",136,136.32,0,"UP")
136.03
"^DD",136,136.32,.01,0)
OTHER ASSOCIATED DIAGNOSIS^MP80'^ICD9(^0;1^Q
"^DD",136,136.32,.01,.1)
Other Associated Diagnosis Code
"^DD",136,136.32,.01,1,0)
^.1^^0
"^DD",136,136.32,.01,3)
Enter a diagnosis code associated with this procedure.
"^DD",136,136.32,.01,21,0)
^^1^1^3041215^
"^DD",136,136.32,.01,21,1,0)
This is a diagnosis associated with the other procedure.
"^DD",136,136.32,.01,"DT")
3041216
"^DIC",136,136,0)
SURGERY PROCEDURE/DIAGNOSIS CODES^136
"^DIC",136,136,0,"GL")
^SRO(136,
"^DIC",136,136,"%",0)
^1.005^^0
"^DIC",136,136,"%D",0)
^1.001^2^2^3050715^^
"^DIC",136,136,"%D",1,0)
This file contains the final procedure (CPT) codes and diagnosis (ICD9)
"^DIC",136,136,"%D",2,0)
codes for each completed case in the SURGERY file (#130).
"^DIC",136,"B","SURGERY PROCEDURE/DIAGNOSIS CODES",136)

"BLD",5341,6)
^145
**END**
**END**

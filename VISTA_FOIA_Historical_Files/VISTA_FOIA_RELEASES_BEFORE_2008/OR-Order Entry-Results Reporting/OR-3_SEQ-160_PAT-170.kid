Released OR*3*170 SEQ #160
Extracted from mail message
**KIDS**:OR*3.0*170^

**INSTALL NAME**
OR*3.0*170
"BLD",4134,0)
OR*3.0*170^ORDER ENTRY/RESULTS REPORTING^0^3030113^y
"BLD",4134,4,0)
^9.64PA^^
"BLD",4134,"ABPKG")
n
"BLD",4134,"KRN",0)
^9.67PA^8989.52^19
"BLD",4134,"KRN",.4,0)
.4
"BLD",4134,"KRN",.401,0)
.401
"BLD",4134,"KRN",.402,0)
.402
"BLD",4134,"KRN",.403,0)
.403
"BLD",4134,"KRN",.5,0)
.5
"BLD",4134,"KRN",.84,0)
.84
"BLD",4134,"KRN",3.6,0)
3.6
"BLD",4134,"KRN",3.8,0)
3.8
"BLD",4134,"KRN",9.2,0)
9.2
"BLD",4134,"KRN",9.8,0)
9.8
"BLD",4134,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",4134,"KRN",9.8,"NM",1,0)
ORB3FN^^0^B6818738
"BLD",4134,"KRN",9.8,"NM","B","ORB3FN",1)

"BLD",4134,"KRN",19,0)
19
"BLD",4134,"KRN",19,"NM",0)
^9.68A^^
"BLD",4134,"KRN",19.1,0)
19.1
"BLD",4134,"KRN",101,0)
101
"BLD",4134,"KRN",409.61,0)
409.61
"BLD",4134,"KRN",771,0)
771
"BLD",4134,"KRN",870,0)
870
"BLD",4134,"KRN",8989.51,0)
8989.51
"BLD",4134,"KRN",8989.52,0)
8989.52
"BLD",4134,"KRN",8994,0)
8994
"BLD",4134,"KRN","B",.4,.4)

"BLD",4134,"KRN","B",.401,.401)

"BLD",4134,"KRN","B",.402,.402)

"BLD",4134,"KRN","B",.403,.403)

"BLD",4134,"KRN","B",.5,.5)

"BLD",4134,"KRN","B",.84,.84)

"BLD",4134,"KRN","B",3.6,3.6)

"BLD",4134,"KRN","B",3.8,3.8)

"BLD",4134,"KRN","B",9.2,9.2)

"BLD",4134,"KRN","B",9.8,9.8)

"BLD",4134,"KRN","B",19,19)

"BLD",4134,"KRN","B",19.1,19.1)

"BLD",4134,"KRN","B",101,101)

"BLD",4134,"KRN","B",409.61,409.61)

"BLD",4134,"KRN","B",771,771)

"BLD",4134,"KRN","B",870,870)

"BLD",4134,"KRN","B",8989.51,8989.51)

"BLD",4134,"KRN","B",8989.52,8989.52)

"BLD",4134,"KRN","B",8994,8994)

"BLD",4134,"QUES",0)
^9.62^^
"BLD",4134,"REQB",0)
^9.611^2^2
"BLD",4134,"REQB",1,0)
OR*3.0*91^2
"BLD",4134,"REQB",2,0)
XT*7.3*60^2
"BLD",4134,"REQB","B","OR*3.0*91",1)

"BLD",4134,"REQB","B","XT*7.3*60",2)

"MBREQ")
0
"PKG",110,-1)
1^1
"PKG",110,0)
ORDER ENTRY/RESULTS REPORTING^OR^Order Entry/Results Reporting
"PKG",110,20,0)
^9.402P^^
"PKG",110,22,0)
^9.49I^1^1
"PKG",110,22,1,0)
3.0^2971217
"PKG",110,22,1,"PAH",1,0)
170^3030113
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","ORB3FN")
0^1^B6818738
"RTN","ORB3FN",1,0)
ORB3FN ; slc/CLA - Functions which return OE/RR Notification information ;1/13/03
"RTN","ORB3FN",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**31,74,91,170**;Dec 17, 1997
"RTN","ORB3FN",3,0)
 Q
"RTN","ORB3FN",4,0)
ONOFF(ORBN) ;extrinsic function returns '1' if notif is to be processed
"RTN","ORB3FN",5,0)
 N ORBERR,ORBE,ORBX,ORBV
"RTN","ORB3FN",6,0)
 S ORBX=0
"RTN","ORB3FN",7,0)
 K ^TMP("ORBP",$J)
"RTN","ORB3FN",8,0)
 D ENVAL^XPAR($NA(^TMP("ORBP",$J)),"ORB PROCESSING FLAG",ORBN,.ORBERR,1)
"RTN","ORB3FN",9,0)
 I 'ORBERR,$G(^TMP("ORBP",$J))>0 D
"RTN","ORB3FN",10,0)
 .S ORBE="" F  S ORBE=$O(^TMP("ORBP",$J,ORBE)) Q:'ORBE!ORBX>0  D
"RTN","ORB3FN",11,0)
 ..S ORBV=$G(^TMP("ORBP",$J,ORBE,ORBN))
"RTN","ORB3FN",12,0)
 ..S:ORBV="M" ORBX=1
"RTN","ORB3FN",13,0)
 ..S:ORBV="E" ORBX=2
"RTN","ORB3FN",14,0)
 K ^TMP("ORBP",$J),ORBERR
"RTN","ORB3FN",15,0)
 I ORBX=1 Q "1^Mandatory Entity(s) exist."
"RTN","ORB3FN",16,0)
 I ORBX=2 Q "1^Enabled Entity(s) exist."
"RTN","ORB3FN",17,0)
 D ENVAL^XPAR($NA(^TMP("ORBP",$J)),"ORB DEFAULT RECIPIENT DEVICES",ORBN,.ORBERR,1)
"RTN","ORB3FN",18,0)
 I 'ORBERR,$G(^TMP("ORBP",$J))>0 Q "1^Default Recipient Device(s) exist."
"RTN","ORB3FN",19,0)
 K ^TMP("ORBP",$J),ORBERR
"RTN","ORB3FN",20,0)
 S ORBX=0
"RTN","ORB3FN",21,0)
 D ENVAL^XPAR($NA(^TMP("ORBP",$J)),"ORB DEFAULT RECIPIENTS",ORBN,.ORBERR,1)
"RTN","ORB3FN",22,0)
 I 'ORBERR,$G(^TMP("ORBP",$J))>0 D
"RTN","ORB3FN",23,0)
 .S ORBE="" F  S ORBE=$O(^TMP("ORBP",$J,ORBE)) Q:'ORBE!ORBX>0  D
"RTN","ORB3FN",24,0)
 ..S ORBV=$G(^TMP("ORBP",$J,ORBE,ORBN))
"RTN","ORB3FN",25,0)
 ..S:ORBV=1 ORBX=1
"RTN","ORB3FN",26,0)
 K ^TMP("ORBP",$J)
"RTN","ORB3FN",27,0)
 I ORBX=1 Q "1^Default Recipient(s) exist."
"RTN","ORB3FN",28,0)
 Q "0^No Mandatory or enabled entities and no default recipients."
"RTN","ORB3FN",29,0)
LIST(Y) ;return list of notifications from Notification File [#100.9]
"RTN","ORB3FN",30,0)
 ; RETURN IEN^NAME^URGENCY
"RTN","ORB3FN",31,0)
 N I,J,V
"RTN","ORB3FN",32,0)
 S I=1
"RTN","ORB3FN",33,0)
 S J=0 F  S J=$O(^ORD(100.9,"B",J)) Q:J=""  S V=0,V=$O(^ORD(100.9,"B",J,V)) S Y(I)=V_"^"_J_"^"_^ORD(100.9,V,3),I=I+1
"RTN","ORB3FN",34,0)
 Q
"RTN","ORB3FN",35,0)
LISTON(ORY,ORBUSR) ;return notifications the user has turned On or OFF
"RTN","ORB3FN",36,0)
 ; RETURN NOTIF IEN^NOTIF NAME^ON/OFF FLAG
"RTN","ORB3FN",37,0)
 N ORSX,ORUX,ORMX,ORBNAM,ORBIEN,ORYI
"RTN","ORB3FN",38,0)
 S ORYI=0
"RTN","ORB3FN",39,0)
 ;see if notification system is disabled:
"RTN","ORB3FN",40,0)
 S ORSX=$$GET^XPAR("DIV^SYS^PKG","ORB SYSTEM ENABLE/DISABLE",1,"I")
"RTN","ORB3FN",41,0)
 I ORSX="D" S ORMX="OFF"
"RTN","ORB3FN",42,0)
 ;
"RTN","ORB3FN",43,0)
 ;loop thru all notifications and determine recipient status:
"RTN","ORB3FN",44,0)
 S ORBNAM="" F  S ORBNAM=$O(^ORD(100.9,"B",ORBNAM)) Q:ORBNAM=""  D
"RTN","ORB3FN",45,0)
 .S ORBIEN=0,ORBIEN=$O(^ORD(100.9,"B",ORBNAM,ORBIEN)) I +$G(ORBIEN)>0 D
"RTN","ORB3FN",46,0)
 ..I $G(ORSX)'="D" D
"RTN","ORB3FN",47,0)
 ...S ORUX="",ORUX=$$ONOFF^ORB3USER(ORBIEN,ORBUSR,"","")
"RTN","ORB3FN",48,0)
 ...I $L(ORUX) S ORMX=$P(ORUX,U)
"RTN","ORB3FN",49,0)
 ..S ORYI=ORYI+1
"RTN","ORB3FN",50,0)
 ..S ORY(ORYI)=ORBIEN_U_ORBNAM_U_ORMX
"RTN","ORB3FN",51,0)
 ;
"RTN","ORB3FN",52,0)
 Q
"RTN","ORB3FN",53,0)
PTLOC(ORBPT) ;get patient's location (INPATIENT ONLY - outpt locations
"RTN","ORB3FN",54,0)
 ;cannot be reliably determined, and many simultaneous outpt locations
"RTN","ORB3FN",55,0)
 ;can occur) - returns pt location in format: location ien^location name
"RTN","ORB3FN",56,0)
 ;outpatients return "0^Outpt"
"RTN","ORB3FN",57,0)
 N ORBLOC,ORBLOCN,ORBRES
"RTN","ORB3FN",58,0)
 S ORBRES="0^Outpt"
"RTN","ORB3FN",59,0)
 I +$G(ORBPT)>0 D
"RTN","ORB3FN",60,0)
 .N DFN S DFN=ORBPT,VA200="" D OERR^VADPT
"RTN","ORB3FN",61,0)
 .S ORBLOC=+$G(^DIC(42,+VAIN(4),44)) I +$G(ORBLOC)>0 D
"RTN","ORB3FN",62,0)
 ..S ORBLOCN=$P(^SC(+ORBLOC,0),U)
"RTN","ORB3FN",63,0)
 ..S ORBRES=ORBLOC_U_ORBLOCN
"RTN","ORB3FN",64,0)
 K VA200,VAIN
"RTN","ORB3FN",65,0)
 Q ORBRES
"VER")
8.0^22.0
**END**
**END**

$TXT Created by GAVRILOV,SERGEY at DEV.DEV.FO-HINES.MED.VA.GOV  (KIDS) on Thursday, 04/03/03 at 15:42
=============================================================================
Run Date: JUN 17, 2003                     Designation: ROR*1*4
Package : ROR - CLINICAL CASE REGISTRIES     Priority: Mandatory
Version : 1         SEQ #4                     Status: Released
                  Compliance Date: JUL 18, 2003
=============================================================================

Associated patches: (v)ROR*1*3     <<= must be installed BEFORE `ROR*1*4'

Subject: Very long data extraction

Category: 
  - Routine

Description: 
============

 This patch fixes the problem in the data extraction code that causes very 
 long execution of the data extraction subtask.
  
 The patch contains the following problem resolutions and enhancements:
  
 [01] Very long data extraction
      -------------------------
  
 The slowdown of the data extraction process is caused by a peculiarity of 
 the $$GCPR^LA7QRY function, which is used for the laboratory data
 extraction. The function works slower when a bigger time frame for the
 data extraction is requested (even if the API does not extract any data).
 Unfortunately, this fact has not been taken into account.
  
 The DATA EXTRACTED UNTIL (9.2) and DATA ACKNOWLEDGED UNTIL (9.1) fields of
 the patient's record in the ROR LOCAL REGISTRY file (#798) are not updated
 if there is no data to send for the patient. Because of this, a bigger and
 bigger time frame is used by the data extraction process during each run
 for those patients who have been added to the registry but do not have any
 recent Hep C related data.
  
 The ROREXT01 routine has been amended to update these fields for all 
 registry patients (except the inactive ones that are ignored by the data
 extraction process anyway).
  
 The NOIS references for this problem are HWH-0203-41840 and 
 LON-0403-60128.
  
 [02] The 'COMMIT+3^RORHDT05:2, %DSM-E-DEVNOTOPN' error
      ------------------------------------------------- 
  
 The historical data extraction had to be rerun at San Antonio. This 
 caused the 'COMMIT+3^RORHDT05:2, %DSM-E-DEVNOTOPN' error in the 
 $$COMMIT^RORHDT05 function.
  
 The RORHDT04 and RORHDT05 routines have been amended to fix this error. 
  
 The NOIS reference for this problem is STX-0203-70736.
  
 [03] Missing Radiology CPT codes
      ---------------------------
  
 The RORHL04 routine has been amended to skip the Radiology records with 
 missing CPT codes (instead of recording the errors).
  
 The NOIS reference for this problem is STX-0203-70736.
  
 [04] Drug codes update
      -----------------
  
 A new National Drug Code (000004035639) is added to the DRUG THERAPY LIST
 multiple (17) of the ROR REGISTRY PARAMETERS file (#798.1) by the
 post-install routine (see the POST^RORP004 procedure for more details). 
  
  
 Associated NOIS:
 ===============
 HWH-0203-41840
 LON-0403-60128
 STX-0203-70736
  
  
 Thanks to Test Sites:
 ====================
 HEARTLAND-WEST HCS
 LONG BEACH, CA
 SOUTH TEXAS HCS
  
  
 Routine Summary:
 ===============
  
 The following routines are included in this patch.  The second line of 
 each of these routines now looks like:
  
   <tab>;;1.0;CLINICAL CASE REGISTRIES;**<patchlist>**;May 14, 2002
  
                  Checksum
   Routine    Before     After   Patch List
   --------  --------  --------  ---------------------------
   ROREXT01   3458673   3565437  2,4
   RORHDT04   8356244   8353277  2,3,4
   RORHDT05   3192213   3043062  3,4
   RORHL04    3889494   3896609  2,3,4
   RORNTEG    3493843   3502098  3,4
   RORP004        n/a   1648658  4
  
  
 Installation Instructions:
 =========================
  
 Installation of this patch will not take more than 10 minutes.
  
 The patch can be installed with VistA users online.
  
 NOTE: The nightly task (the [ROR TASK] option) must not be running
       during the installation!
  
 Taskman does not need to be STOPPED or placed in a WAIT state.
  
   1. AXP/DSM sites: Review your mapped routine set. If any of the 
 routine(s) listed in the ROUTINE SUMMARY section are mapped, they should
 be removed from the mapped set at this time.
  
   2. Use the "INSTALL/CHECK MESSAGE" option on the Packman menu. This 
 option loads the patch into a Transport Global on your system.
  
   3. On the KIDS menu, select the "Installation" menu, and use the 
 following options to install the Transport Global:
  
    Verify Checksums in Transport Global
    Print Transport Global
    Compare Transport Global to Current System
    Backup a Transport Global
    Install Package(s)
  
    Select INSTALL NAME: ROR*1.0*4
                         =========
    Want KIDS to INHIBIT LOGONs during the install? NO
                                                    ==
    Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES
                                                                    ===
    Enter options you wish to mark as 'Out Of Order': ROR TASK
                                                      ========
    Enter options you wish to mark as 'Out Of Order': <RET>
  
    Enter protocols you wish to mark as 'Out Of Order': <RET>
  
    Delay Install (Minutes):  (0-60): 0// <RET>
  
   4. AXP/DSM sites: After the patch has been installed, if any routines 
 were removed from the mapped set in Step 1 above, rebuild your map set.
  
   5. After the installation is complete, make sure that the ROR TASK
 option is not marked Out-Of-Order.

Routine Information:
====================

Routine Name:
  - ROREXT01


Routine Checksum:

Routine Name:
  - RORNTEG


Routine Checksum:

Routine Name:
  - RORP004


Routine Checksum:

Routine Name:
  - RORHDT05


Routine Checksum:

Routine Name:
  - RORHL04


Routine Checksum:

Routine Name:
  - RORHDT04


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : GAVRILOV,SERGUEI               Date Entered : MAR 13, 2003
Completed By: PATRICK,PAT                   Date Completed: JUN 16, 2003
Released By : BELSCHWINDER,MICHAEL          Date Released : JUN 17, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

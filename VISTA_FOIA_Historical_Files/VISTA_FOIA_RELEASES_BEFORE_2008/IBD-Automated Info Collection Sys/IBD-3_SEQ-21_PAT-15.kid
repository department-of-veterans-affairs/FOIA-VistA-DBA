Released IBD*3*15 SEQ #21
Extracted from mail message
**KIDS**:IBD*3.0*15^

**INSTALL NAME**
IBD*3.0*15
"BLD",655,0)
IBD*3.0*15^AUTOMATED INFO COLLECTION SYS^0^2971014^y
"BLD",655,1,0)
^^10^10^2980910^^^^
"BLD",655,1,1,0)
Automatic sending of Forms Tracking entries in a Pending Pages status
"BLD",655,1,2,0)
to PCE.
"BLD",655,1,3,0)
 
"BLD",655,1,4,0)
Add a new package interface and toolkit component to display clinical
"BLD",655,1,5,0)
reminders on an encounter form
"BLD",655,1,6,0)
 
"BLD",655,1,7,0)
This patch fixes the IBDF Background Job for the printing of
"BLD",655,1,8,0)
Encounter Forms ignoring the time queued (starting time ) for
"BLD",655,1,9,0)
print jobs.  It also allows only numerics to be entered in the
"BLD",655,1,10,0)
Time Queued field of the Encounter Form Parameters file #357.09.
"BLD",655,4,0)
^9.64PA^358.6^6
"BLD",655,4,357.09,0)
357.09
"BLD",655,4,357.09,222)
y^n^f^^^^n
"BLD",655,4,357.2,0)
357.2
"BLD",655,4,357.2,2,0)
^9.641^357.2^1
"BLD",655,4,357.2,2,357.2,0)
SELECTION LIST  (File-top level)
"BLD",655,4,357.2,2,357.2,1,0)
^9.6411^.19^1
"BLD",655,4,357.2,2,357.2,1,.19,0)
CLINICAL REMINDER DISPLAY TYPE
"BLD",655,4,357.2,222)
y^n^p^^^^n
"BLD",655,4,357.6,0)
357.6
"BLD",655,4,357.6,222)
y^n^f^^y^PATCH15^y^o^n
"BLD",655,4,358.1,0)
358.1
"BLD",655,4,358.1,222)
y^n^f^^y^^y^o^n
"BLD",655,4,358.2,0)
358.2
"BLD",655,4,358.2,222)
y^n^f^^y^^y^o^n
"BLD",655,4,358.6,0)
358.6
"BLD",655,4,358.6,222)
y^n^f^^y^^y^m^n
"BLD",655,4,"APDD",357.2,357.2)

"BLD",655,4,"APDD",357.2,357.2,.19)

"BLD",655,4,"B",357.09,357.09)

"BLD",655,4,"B",357.2,357.2)

"BLD",655,4,"B",357.6,357.6)

"BLD",655,4,"B",358.1,358.1)

"BLD",655,4,"B",358.2,358.2)

"BLD",655,4,"B",358.6,358.6)

"BLD",655,"ABPKG")
n
"BLD",655,"INIT")
IBDY315P
"BLD",655,"KRN",0)
^9.67PA^19^18
"BLD",655,"KRN",.4,0)
.4
"BLD",655,"KRN",.4,"NM",0)
^9.68A^^
"BLD",655,"KRN",.401,0)
.401
"BLD",655,"KRN",.402,0)
.402
"BLD",655,"KRN",.402,"NM",0)
^9.68A^1^1
"BLD",655,"KRN",.402,"NM",1,0)
IBDF EDIT SELECTION LIST    FILE #357.2^357.2^0
"BLD",655,"KRN",.402,"NM","B","IBDF EDIT SELECTION LIST    FILE #357.2",1)

"BLD",655,"KRN",.403,0)
.403
"BLD",655,"KRN",.5,0)
.5
"BLD",655,"KRN",.84,0)
.84
"BLD",655,"KRN",3.6,0)
3.6
"BLD",655,"KRN",3.8,0)
3.8
"BLD",655,"KRN",9.2,0)
9.2
"BLD",655,"KRN",9.8,0)
9.8
"BLD",655,"KRN",9.8,"NM",0)
^9.68A^11^11
"BLD",655,"KRN",9.8,"NM",1,0)
IBDF3^^0^B26445717
"BLD",655,"KRN",9.8,"NM",2,0)
IBDFU1^^0^B30221560
"BLD",655,"KRN",9.8,"NM",3,0)
IBDFN15^^0^B15636299
"BLD",655,"KRN",9.8,"NM",4,0)
IBDFFRFT^^0^B32815140
"BLD",655,"KRN",9.8,"NM",5,0)
IBDFQB^^0^B33230836
"BLD",655,"KRN",9.8,"NM",6,0)
IBDFESP^^0^B7325981
"BLD",655,"KRN",9.8,"NM",7,0)
IBDF9A^^0^B38086456
"BLD",655,"KRN",9.8,"NM",8,0)
IBDFQEA^^0^B29652832
"BLD",655,"KRN",9.8,"NM",9,0)
IBDFU2^^0^B27823065
"BLD",655,"KRN",9.8,"NM",10,0)
IBDFPE1^^0^B19179036
"BLD",655,"KRN",9.8,"NM",11,0)
IBDF2D^^0^B29914063
"BLD",655,"KRN",9.8,"NM","B","IBDF2D",11)

"BLD",655,"KRN",9.8,"NM","B","IBDF3",1)

"BLD",655,"KRN",9.8,"NM","B","IBDF9A",7)

"BLD",655,"KRN",9.8,"NM","B","IBDFESP",6)

"BLD",655,"KRN",9.8,"NM","B","IBDFFRFT",4)

"BLD",655,"KRN",9.8,"NM","B","IBDFN15",3)

"BLD",655,"KRN",9.8,"NM","B","IBDFPE1",10)

"BLD",655,"KRN",9.8,"NM","B","IBDFQB",5)

"BLD",655,"KRN",9.8,"NM","B","IBDFQEA",8)

"BLD",655,"KRN",9.8,"NM","B","IBDFU1",2)

"BLD",655,"KRN",9.8,"NM","B","IBDFU2",9)

"BLD",655,"KRN",19,0)
19
"BLD",655,"KRN",19,"NM",0)
^9.68A^13^13
"BLD",655,"KRN",19,"NM",1,0)
IBDF REPORTS MENU^^0
"BLD",655,"KRN",19,"NM",2,0)
IBDF FREE PENDING PAGES^^0
"BLD",655,"KRN",19,"NM",3,0)
IBDF REPORT CLINIC SETUPS^^0
"BLD",655,"KRN",19,"NM",4,0)
IBDF UTIL MAINTENANCE UTILITY^^0
"BLD",655,"KRN",19,"NM",5,0)
IBDF LIST CLINICS WITH NO FORM^^0
"BLD",655,"KRN",19,"NM",6,0)
IBDF FORMS TRACKING^^0
"BLD",655,"KRN",19,"NM",7,0)
IBDF SCANNED W/BILL GEN^^0
"BLD",655,"KRN",19,"NM",8,0)
IBDF VALIDATE FORMS^^0
"BLD",655,"KRN",19,"NM",9,0)
IBDF PRINT SAMPLE ALL CLINICS^^0
"BLD",655,"KRN",19,"NM",10,0)
IBDF EDIT SITE PARAM^^0
"BLD",655,"KRN",19,"NM",11,0)
IBDF EF FORM COMPONENTS^^0
"BLD",655,"KRN",19,"NM",12,0)
IBDF PRINT ERROR LIST^^0
"BLD",655,"KRN",19,"NM",13,0)
IBDF LIST CLINICS USING FORMS^^0
"BLD",655,"KRN",19,"NM","B","IBDF EDIT SITE PARAM",10)

"BLD",655,"KRN",19,"NM","B","IBDF EF FORM COMPONENTS",11)

"BLD",655,"KRN",19,"NM","B","IBDF FORMS TRACKING",6)

"BLD",655,"KRN",19,"NM","B","IBDF FREE PENDING PAGES",2)

"BLD",655,"KRN",19,"NM","B","IBDF LIST CLINICS USING FORMS",13)

"BLD",655,"KRN",19,"NM","B","IBDF LIST CLINICS WITH NO FORM",5)

"BLD",655,"KRN",19,"NM","B","IBDF PRINT ERROR LIST",12)

"BLD",655,"KRN",19,"NM","B","IBDF PRINT SAMPLE ALL CLINICS",9)

"BLD",655,"KRN",19,"NM","B","IBDF REPORT CLINIC SETUPS",3)

"BLD",655,"KRN",19,"NM","B","IBDF REPORTS MENU",1)

"BLD",655,"KRN",19,"NM","B","IBDF SCANNED W/BILL GEN",7)

"BLD",655,"KRN",19,"NM","B","IBDF UTIL MAINTENANCE UTILITY",4)

"BLD",655,"KRN",19,"NM","B","IBDF VALIDATE FORMS",8)

"BLD",655,"KRN",19.1,0)
19.1
"BLD",655,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",655,"KRN",101,0)
101
"BLD",655,"KRN",101,"NM",0)
^9.68A^^
"BLD",655,"KRN",409.61,0)
409.61
"BLD",655,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",655,"KRN",771,0)
771
"BLD",655,"KRN",869.2,0)
869.2
"BLD",655,"KRN",870,0)
870
"BLD",655,"KRN",8994,0)
8994
"BLD",655,"KRN","B",.4,.4)

"BLD",655,"KRN","B",.401,.401)

"BLD",655,"KRN","B",.402,.402)

"BLD",655,"KRN","B",.403,.403)

"BLD",655,"KRN","B",.5,.5)

"BLD",655,"KRN","B",.84,.84)

"BLD",655,"KRN","B",3.6,3.6)

"BLD",655,"KRN","B",3.8,3.8)

"BLD",655,"KRN","B",9.2,9.2)

"BLD",655,"KRN","B",9.8,9.8)

"BLD",655,"KRN","B",19,19)

"BLD",655,"KRN","B",19.1,19.1)

"BLD",655,"KRN","B",101,101)

"BLD",655,"KRN","B",409.61,409.61)

"BLD",655,"KRN","B",771,771)

"BLD",655,"KRN","B",869.2,869.2)

"BLD",655,"KRN","B",870,870)

"BLD",655,"KRN","B",8994,8994)

"BLD",655,"PRE")
IBDY315E
"BLD",655,"QUES",0)
^9.62^^
"BLD",655,"REQB",0)
^9.611^3^2
"BLD",655,"REQB",2,0)
AUTOMATED INFO COLLECTION SYS 3.0^1
"BLD",655,"REQB",3,0)
PX*1.0*36^1
"BLD",655,"REQB","B","AUTOMATED INFO COLLECTION SYS 3.0",2)

"BLD",655,"REQB","B","PX*1.0*36",3)

"DATA",357.6,125,0)
PX CLINICAL REMINDERS PRINT^DISP^IBDFN15^CLINICAL REMINDERS^1^3^4^1^1^^^1^^1^^^^^^1
"DATA",357.6,125,1,0)
^^2^2^2971027^^^
"DATA",357.6,125,1,1,0)
This interface will print applicable clinical reminders for a patient from
"DATA",357.6,125,1,2,0)
a list of reminders specified during the design of an encounter form.
"DATA",357.6,125,2)
Reminder Number^10^^^^^^^^^^^^^^Internal Number^0^1
"DATA",357.6,125,3)
CLINICAL REMINDERS PCE
"DATA",357.6,125,15,0)
^357.615I^5^5
"DATA",357.6,125,15,1,0)
DUE NOW^8^3^^Due Now
"DATA",357.6,125,15,2,0)
DATE DUE^13^4^^Date Due
"DATA",357.6,125,15,3,0)
LAST ACTIVITY DATE^13^5^^LAST ACTIVITY
"DATA",357.6,125,15,4,0)
COMBO DUE NOW/DUE DATE^13^6^^Due
"DATA",357.6,125,15,5,0)
REMINDER NAME^30^2^^Name
"DATA",357.6,125,17)

"DATA",358.1,1,0)
CLINICAL REMINDERS (V3.0)^^^0^0^48^15^^^1^Clinical Reminders^CR^Clinical Reminders with due date only^1
"DATA",358.1,2,0)
CLINICAL REMINDERS FULL (V3.0)^^^0^0^77^15^^^1^CLINICAL REMINDERS^CR^Clinical Reminders w/ full display of data^1
"DATA",358.2,1,0)
CLINICAL REMINDERS^1^^^^^2^0^^^1^0^^1^1^^^^2
"DATA",358.2,1,1,0)
^358.21I^1^1
"DATA",358.2,1,1,1,0)
1^2^2^12
"DATA",358.2,1,2,0)
^358.22I^3^2
"DATA",358.2,1,2,2,0)
2^Due^12^1^6
"DATA",358.2,1,2,3,0)
1^Name^30^1^2
"DATA",358.2,2,0)
FULL CLINICAL REMINDER^2^^^^^2^0^^^1^0^^1^1^^^^2
"DATA",358.2,2,1,0)
^358.21I^1^1
"DATA",358.2,2,1,1,0)
1^2^1^14
"DATA",358.2,2,2,0)
^358.22I^6^4
"DATA",358.2,2,2,3,0)
3^Date Due^12^1^4
"DATA",358.2,2,2,4,0)
4^Last Activity^18^1^5
"DATA",358.2,2,2,5,0)
1^Name^30^1^2
"DATA",358.2,2,2,6,0)
2^Due Now^8^1^3
"DATA",358.6,1,0)
PX CLINICAL REMINDERS PRINT^DISP^IBDFN15^CLINICAL REMINDERS^1^3^4^1^1^^^1^^1^^^^^^1
"DATA",358.6,1,1,0)
^^2^2^2971027^^^
"DATA",358.6,1,1,1,0)
This interface will print applicable clinical reminders for a patient from
"DATA",358.6,1,1,2,0)
a list of reminders specified during the design of an encounter form.
"DATA",358.6,1,2)
Reminder Number^10^^^^^^^^^^^^^^Internal Number^0^1
"DATA",358.6,1,3)
CLINICAL REMINDERS PCE
"DATA",358.6,1,15,0)
^357.615I^5^5
"DATA",358.6,1,15,1,0)
DUE NOW^8^3^^Due Now
"DATA",358.6,1,15,2,0)
DATE DUE^13^4^^Date Due
"DATA",358.6,1,15,3,0)
LAST ACTIVITY DATE^13^5^^LAST ACTIVITY
"DATA",358.6,1,15,4,0)
COMBO DUE NOW/DUE DATE^13^6^^Due
"DATA",358.6,1,15,5,0)
REMINDER NAME^30^2^^Name
"FIA",357.09)
ENCOUNTER FORM PARAMETERS
"FIA",357.09,0)
^IBD(357.09,
"FIA",357.09,0,0)
357.09
"FIA",357.09,0,1)
y^n^f^^^^n
"FIA",357.09,0,10)

"FIA",357.09,0,11)

"FIA",357.09,0,"RLRO")

"FIA",357.09,0,"VR")
3.0^IBD
"FIA",357.09,357.09)
0
"FIA",357.09,357.091)
0
"FIA",357.2)
SELECTION LIST
"FIA",357.2,0)
^IBE(357.2,
"FIA",357.2,0,0)
357.2I
"FIA",357.2,0,1)
y^n^p^^^^n
"FIA",357.2,0,10)

"FIA",357.2,0,11)

"FIA",357.2,0,"RLRO")

"FIA",357.2,0,"VR")
3.0^IBD
"FIA",357.2,357.2)
1
"FIA",357.2,357.2,.19)

"FIA",357.6)
PACKAGE INTERFACE
"FIA",357.6,0)
^IBE(357.6,
"FIA",357.6,0,0)
357.6I
"FIA",357.6,0,1)
y^n^f^^y^PATCH15^y^o^n
"FIA",357.6,0,10)

"FIA",357.6,0,11)

"FIA",357.6,0,"RLRO")
^DIBT(1297,1)
"FIA",357.6,0,"VR")
3.0^IBD
"FIA",357.6,357.6)
0
"FIA",357.6,357.61)
0
"FIA",357.6,357.613)
0
"FIA",357.6,357.615)
0
"FIA",357.6,357.66)
0
"FIA",357.6,357.67)
0
"FIA",358.1)
IMP/EXP ENCOUNTER FORM BLOCK
"FIA",358.1,0)
^IBE(358.1,
"FIA",358.1,0,0)
358.1I
"FIA",358.1,0,1)
y^n^f^^y^^y^o^n
"FIA",358.1,0,10)

"FIA",358.1,0,11)

"FIA",358.1,0,"RLRO")

"FIA",358.1,0,"VR")
3.0^IBD
"FIA",358.1,358.1)
0
"FIA",358.1,358.11)
0
"FIA",358.2)
IMP/EXP SELECTION LIST
"FIA",358.2,0)
^IBE(358.2,
"FIA",358.2,0,0)
358.2I
"FIA",358.2,0,1)
y^n^f^^y^^y^o^n
"FIA",358.2,0,10)

"FIA",358.2,0,11)

"FIA",358.2,0,"RLRO")

"FIA",358.2,0,"VR")
3.0^IBD
"FIA",358.2,358.2)
0
"FIA",358.2,358.21)
0
"FIA",358.2,358.22)
0
"FIA",358.6)
IMP/EXP PACKAGE INTERFACE
"FIA",358.6,0)
^IBE(358.6,
"FIA",358.6,0,0)
358.6I
"FIA",358.6,0,1)
y^n^f^^y^^y^m^n
"FIA",358.6,0,10)

"FIA",358.6,0,11)

"FIA",358.6,0,"RLRO")

"FIA",358.6,0,"VR")
3.0^IBD
"FIA",358.6,358.6)
0
"FIA",358.6,358.61)
0
"FIA",358.6,358.613)
0
"FIA",358.6,358.615)
0
"FIA",358.6,358.66)
0
"FIA",358.6,358.67)
0
"INIT")
IBDY315P
"KRN",.402,1439,-1)
0^1
"KRN",.402,1439,0)
IBDF EDIT SELECTION LIST^2971030.1322^^357.2^^^2990120
"KRN",.402,1439,"%D",0)
^^2^2^2961219^^
"KRN",.402,1439,"%D",1,0)
Used to edit a selection list, except for the position and size of the
"KRN",.402,1439,"%D",2,0)
columns.
"KRN",.402,1439,"DIAB",1,0,357.2,1)
.07//TWO SPACES;T
"KRN",.402,1439,"DIAB",1,0,357.2,2)
.16//1;T
"KRN",.402,1439,"DIAB",2,1,357.22,3)
.06//BUBBLE;T;REQ
"KRN",.402,1439,"DIAB",3,0,357.2,1)
.09//CSU;T
"KRN",.402,1439,"DIAB",3,0,357.2,2)
.17//NARRATIVE AND CODE;T;REQ
"KRN",.402,1439,"DIAB",3,1,357.22,1)
.04//TEXT;T
"KRN",.402,1439,"DIAB",3,1,357.22,6)
.07;T;REQ
"KRN",.402,1439,"DIAB",4,0,357.2,2)
.18//CODE ONLY;T;REQ
"KRN",.402,1439,"DIAB",4,1,357.22,0)
.01;"SUBCOLUMN NUMBER"
"KRN",.402,1439,"DIAB",5,0,357.2,1)
.08//0;T
"KRN",.402,1439,"DIAB",5,1,357.22,4)
.02;T
"KRN",.402,1439,"DIAB",6,0,357.2,1)
.12//NO;T
"KRN",.402,1439,"DIAB",7,1,357.22,5)
.02;T
"KRN",.402,1439,"DIAB",10,0,357.2,0)
.15;T
"KRN",.402,1439,"DIAB",11,1,357.22,4)
.05;"Select Subcolumn's Data";REQ
"KRN",.402,1439,"DIAB",15,0,357.2,0)
.05;T
"KRN",.402,1439,"DIAB",17,0,357.2,0)
.06;T
"KRN",.402,1439,"DR",1,357.2)
S IBDELETE=1;.01;I IBOLD S Y="@1";D FULL^VALM1;.02////^S X=$G(IBBLK);.11////^S X=$G(IBRTN);D DATASIZE^IBDF9A(+X),LISTTYPE^IBDF9A(+X);@1;S:'IBDYN Y="@19";.15T~;@19;S:'IBCLRM Y="@5";.19//1;@5;.05T~;I X="" S Y="@2";.06T~;@2;.04;
"KRN",.402,1439,"DR",1,357.2,1)
.07T~//TWO SPACES;S:IBDYN Y="@4";.09T~//CSU;@4;.08T~//0;.12T~//NO;D MSG3^IBDF9A;D HELP4^IBDFU5;2;K ^DIE("NO^");I ('IBDYN)!(IBINPUT) S Y="@100";.13;D RESET^VALM4:VALMCC,REFRESH^VALM;1//1;@100;S:'$$OTHEROK^IBDF9A(IBRTN) Y="@101";
"KRN",.402,1439,"DR",1,357.2,2)
.16T~//1;S:X=0 Y="@101";.17R~T~//NARRATIVE AND CODE;.18R~T~//CODE ONLY;@101;S IBDELETE=0;
"KRN",.402,1439,"DR",2,357.21)
.01;.02;.03//^S X=1+$S($G(IBBLK("BOX"))=1:1,1:0);.04;
"KRN",.402,1439,"DR",2,357.22)
S DIE("NO^")="BACKOUTOK";S IBSC1=$P($G(^IBE(357.2,D0,2,D1,0)),U);S IBSC1(IBSC1)=$P($G(^IBE(357.2,D0,2,D1,0)),U,4)_"^"_$P($G(^IBE(357.2,D0,2,D1,0)),U,5);.01SUBCOLUMN NUMBER~;N IBSC3,IBSC4 D SCLOOP^IBDF9A3;
"KRN",.402,1439,"DR",2,357.22,1)
S IBSC2=$P($G(^IBE(357.2,D0,2,D1,0)),U);S:(IBSC1'=IBSC2) IBSWITCH(+$G(IBSWITCH))=IBSC1_"^"_IBSC2,IBSWITCH=$G(IBSWITCH)+1;.04T~//TEXT;
"KRN",.402,1439,"DR",2,357.22,2)
I X'=$P(IBSC1(IBSC1),U,1),$P(IBSC1(IBSC1),U,1)]"" S $P(^IBE(357.2,D0,2,D1,0),U,4)=$P(IBSC1(IBSC1),U,1) W !!,"*** PREVENTING LOSS OF DATA ***",!,"NOT ALLOWING THE 'TYPE OF SUBCOLUMN' TO BE CHANGED",!! S X=$P(IBSC1(IBSC1),U,1);
"KRN",.402,1439,"DR",2,357.22,3)
I X=1 S Y="@3";.06R~T~//BUBBLE;I $P(^IBE(357.91,X,0),"^")'["BUBBLE" S Y="@6";.08////1;S Y="@7";@6;.08;@7;S:'$G(IBINPUT) Y="@8",IBD=0;.1;S:'$O(^IBE(357.6,IBINPUT,13,0)) Y="@8",IBD=0;.09;S IBD=+X;@8;
"KRN",.402,1439,"DR",2,357.22,4)
I $P(^IBE(357.2,D0,2,D1,0),U,2)'="" S Y="@10";.02///^S X=$S(IBD:$P($G(^IBD(357.98,IBD,0)),U,3),1:"");@10;S X=X;.02T~;I X'="" S Y="@99";.02////^S X=" ";S Y="@99";@3;D HELP2^IBDFU5;.05R~Select Subcolumn's Data~;S IBD=+X;
"KRN",.402,1439,"DR",2,357.22,5)
N IBDFFLG D SCDEL^IBDF9A3 I $D(IBDFFLG) S Y="@99";.03//^S X=+$G(IBLEN(IBD));I $P(^IBE(357.2,D0,2,D1,0),U,2)'="" S Y="@11";.02///^S X=$P($G(IBLEN(IBD)),U,2);@11;S X=X;.02T~;I X'="" S Y="@9";.02////^S X=" ";@9;I IBD<2 S Y="@99";
"KRN",.402,1439,"DR",2,357.22,6)
I IBDYN S Y="@99";S:IBDYN Y="@99";.07R~T~;@99;D HELP4^IBDFU5;
"KRN",.402,1439,"ROU")
^IBDXI2
"KRN",.402,1439,"ROUOLD")
IBDXI2
"KRN",19,4115,-1)
0^3
"KRN",19,4115,0)
IBDF REPORT CLINIC SETUPS^Report Clinic Setups^^A^^^^^^^^AUTOMATED INFO COLLECTION SYS^^1
"KRN",19,4115,1,0)
^^2^2^2980408^^^^
"KRN",19,4115,1,1,0)
Reports on each clinic setup, listing the encounter forms and other reports
"KRN",19,4115,1,2,0)
defined for use by the clinic.
"KRN",19,4115,20)
D ^IBDF14
"KRN",19,4115,"U")
REPORT CLINIC SETUPS
"KRN",19,4116,-1)
0^13
"KRN",19,4116,0)
IBDF LIST CLINICS USING FORMS^List Clinics Using Forms^^A^^^^^^^^AUTOMATED INFO COLLECTION SYS^^1
"KRN",19,4116,1,0)
^^1^1^2951211^^^^
"KRN",19,4116,1,1,0)
For each encounter form this option lists the clinics using it.
"KRN",19,4116,20)
D ^IBDF15
"KRN",19,4116,"U")
LIST CLINICS USING FORMS
"KRN",19,6079,-1)
0^4
"KRN",19,6079,0)
IBDF UTIL MAINTENANCE UTILITY^Maintenance Utility for Active/Inactive Codes^^R^^^^^^^^AUTOMATED INFO COLLECTION SYS^^
"KRN",19,6079,1,0)
^^5^5^2981026^^^^
"KRN",19,6079,1,1,0)
This is a maintenance utility for the AICS package.  It allows the user
"KRN",19,6079,1,2,0)
to display and print a listing of the invalid ICD9, CPT and VISIT codes
"KRN",19,6079,1,3,0)
that are on encounter forms.  It also allows the user to delete the
"KRN",19,6079,1,4,0)
invalid codes from the forms.  Another action of this option is displaying
"KRN",19,6079,1,5,0)
a complete listing of all invalid ICD9, CPT, and VISIT codes.
"KRN",19,6079,20)

"KRN",19,6079,25)
IBDFUTL
"KRN",19,6079,99.1)
57734,7762
"KRN",19,6079,"U")
MAINTENANCE UTILITY FOR ACTIVE
"KRN",19,6080,-1)
0^5
"KRN",19,6080,0)
IBDF LIST CLINICS WITH NO FORM^Clinics With No Encounter Forms^^A^^^^^^^^AUTOMATED INFO COLLECTION SYS^^1
"KRN",19,6080,1,0)
^^2^2^2951211^^^^
"KRN",19,6080,1,1,0)
This option gives a report that lists the clinics that do not
"KRN",19,6080,1,2,0)
have encounter forms.
"KRN",19,6080,20)
D ^IBDFCNOF
"KRN",19,6080,"U")
CLINICS WITH NO ENCOUNTER FORM
"KRN",19,6081,-1)
0^6
"KRN",19,6081,0)
IBDF FORMS TRACKING^Forms Tracking^^R^^^^^^^^AUTOMATED INFO COLLECTION SYS^^
"KRN",19,6081,1,0)
^^5^5^2950721^
"KRN",19,6081,1,1,0)
This option connects the user to the forms tracking
"KRN",19,6081,1,2,0)
display.  This allows the user to see what encounter
"KRN",19,6081,1,3,0)
forms have been printed, scanned and those that have not
"KRN",19,6081,1,4,0)
not.  It also allows the user to get statistics on this
"KRN",19,6081,1,5,0)
data as well as display forms with a specific status.
"KRN",19,6081,20)

"KRN",19,6081,25)
IBDFFT
"KRN",19,6081,"U")
FORMS TRACKING
"KRN",19,6082,-1)
0^7
"KRN",19,6082,0)
IBDF SCANNED W/BILL GEN^Scanned Forms w/ Bill Gen^^R^^^^^^^^AUTOMATED INFO COLLECTION SYS
"KRN",19,6082,1,0)
^^7^7^2980818^^^^
"KRN",19,6082,1,1,0)
This option prints a report for those encounter forms that have
"KRN",19,6082,1,2,0)
been scanned that also have bills generated.  The report displays
"KRN",19,6082,1,3,0)
this data for all clinics using encounter forms for one/many/all
"KRN",19,6082,1,4,0)
divisions for a specific date range.  The data that is displayed 
"KRN",19,6082,1,5,0)
is the number scanned, number insured, number of bills entered,
"KRN",19,6082,1,6,0)
number of bills printed, and average days from date of encounter
"KRN",19,6082,1,7,0)
to date of bill generation (printed).
"KRN",19,6082,25)
IBDFOSG
"KRN",19,6082,"U")
SCANNED FORMS W/ BILL GEN
"KRN",19,6086,-1)
0^1
"KRN",19,6086,0)
IBDF REPORTS MENU^Reports and Utilities^^M^^^^^^^^AUTOMATED INFO COLLECTION SYS
"KRN",19,6086,1,0)
^^2^2^2980522^^^^
"KRN",19,6086,1,1,0)
This menu option will contain the reports and utilities for AICS.
"KRN",19,6086,1,2,0)

"KRN",19,6086,10,0)
^19.01IP^23^12
"KRN",19,6086,10,12,0)
7148^SF
"KRN",19,6086,10,12,"^")
IBDF FREE PENDING PAGES
"KRN",19,6086,10,13,0)
4115^RC
"KRN",19,6086,10,13,"^")
IBDF REPORT CLINIC SETUPS
"KRN",19,6086,10,14,0)
4116^LC
"KRN",19,6086,10,14,"^")
IBDF LIST CLINICS USING FORMS
"KRN",19,6086,10,15,0)
6079^MU
"KRN",19,6086,10,15,"^")
IBDF UTIL MAINTENANCE UTILITY
"KRN",19,6086,10,16,0)
6081^FT
"KRN",19,6086,10,16,"^")
IBDF FORMS TRACKING
"KRN",19,6086,10,17,0)
6080^NF
"KRN",19,6086,10,17,"^")
IBDF LIST CLINICS WITH NO FORM
"KRN",19,6086,10,18,0)
6082^SG
"KRN",19,6086,10,18,"^")
IBDF SCANNED W/BILL GEN
"KRN",19,6086,10,19,0)
6087^VF
"KRN",19,6086,10,19,"^")
IBDF VALIDATE FORMS
"KRN",19,6086,10,20,0)
6088^PS
"KRN",19,6086,10,20,"^")
IBDF PRINT SAMPLE ALL CLINICS
"KRN",19,6086,10,21,0)
6089^EP
"KRN",19,6086,10,21,"^")
IBDF EDIT SITE PARAM
"KRN",19,6086,10,22,0)
6967^CP
"KRN",19,6086,10,22,"^")
IBDF EF FORM COMPONENTS
"KRN",19,6086,10,23,0)
6968^ER
"KRN",19,6086,10,23,"^")
IBDF PRINT ERROR LIST
"KRN",19,6086,99)
57280,41975
"KRN",19,6086,"U")
REPORTS AND UTILITIES
"KRN",19,6087,-1)
0^8
"KRN",19,6087,0)
IBDF VALIDATE FORMS^Validate Forms^^R^^^^^^^^AUTOMATED INFO COLLECTION SYS
"KRN",19,6087,1,0)
^^3^3^2960523^^
"KRN",19,6087,1,1,0)
Report used to validate the data that will be passed to PCE
"KRN",19,6087,1,2,0)
when an Encounter Form is scanned.  The report may be sorted
"KRN",19,6087,1,3,0)
by Division, Clinic Group, Clinic or Form.
"KRN",19,6087,25)
IBDFFV
"KRN",19,6087,"U")
VALIDATE FORMS
"KRN",19,6088,-1)
0^9
"KRN",19,6088,0)
IBDF PRINT SAMPLE ALL CLINICS^Print Sample of all Forms^^R^^^^^^^^AUTOMATED INFO COLLECTION SYS
"KRN",19,6088,1,0)
^^4^4^2960108^^^^
"KRN",19,6088,1,1,0)
This option will print out one copy of each form currently assigned to a
"KRN",19,6088,1,2,0)
clinic and that is in use.  Use this to prepare a package of materials
"KRN",19,6088,1,3,0)
for review or sharing with other facilities.
"KRN",19,6088,1,4,0)

"KRN",19,6088,25)
IBDFFSMP
"KRN",19,6088,"U")
PRINT SAMPLE OF ALL FORMS
"KRN",19,6089,-1)
0^10
"KRN",19,6089,0)
IBDF EDIT SITE PARAM^Edit Site Parameters^^R^^^^^^^^AUTOMATED INFO COLLECTION SYS
"KRN",19,6089,1,0)
^^3^3^2970414^^^^
"KRN",19,6089,1,1,0)
This option will allow editing of AICS site parameters that affect
"KRN",19,6089,1,2,0)
the printing of forms, manual data entry, the purge utility and
"KRN",19,6089,1,3,0)
scanning.
"KRN",19,6089,25)
IBDFESP
"KRN",19,6089,"U")
EDIT SITE PARAMETERS
"KRN",19,6967,-1)
0^11
"KRN",19,6967,0)
IBDF EF FORM COMPONENTS^Form Components^^R^^^^^^^^AUTOMATED INFO COLLECTION SYS
"KRN",19,6967,1,0)
^^12^12^2961202^^
"KRN",19,6967,1,1,0)
This new display lists the contents of a form ( without displaying them).
"KRN",19,6967,1,2,0)
It list the contents of each block,  the name of the block,  starting row
"KRN",19,6967,1,3,0)
and column,  width and height of the block.  Two actions are included on
"KRN",19,6967,1,4,0)
this screen ,  EX Expand Item and BC Block Components.  Expand Item
"KRN",19,6967,1,5,0)
allows the user to do an inquiry of the block and its components  listed in
"KRN",19,6967,1,6,0)
the Block file #357.1.   The Block Components action gives the user a
"KRN",19,6967,1,7,0)
more exact makeup of the block and the data it displays.  It lists the
"KRN",19,6967,1,8,0)
component, type it is (selection list, hand print field or data field)  row,
"KRN",19,6967,1,9,0)
column and block separators.   For selection lists it also lists the
"KRN",19,6967,1,10,0)
subcolumn information.  The Type  ( text or marking), Data
"KRN",19,6967,1,11,0)
(code, short description) ,  Width of the subcolumn, Qualifier,
"KRN",19,6967,1,12,0)
Selection Rule and if it is editable.
"KRN",19,6967,25)
IBDFCMP
"KRN",19,6967,"U")
FORM COMPONENTS
"KRN",19,6968,-1)
0^12
"KRN",19,6968,0)
IBDF PRINT ERROR LIST^Scanning Error and Warning Listing^^R^^^^^^^^AUTOMATED INFO COLLECTION SYS
"KRN",19,6968,1,0)
^^3^3^2970314^^
"KRN",19,6968,1,1,0)
During scanning errors reported by AICS or PCE are stored in the AICS Error
"KRN",19,6968,1,2,0)
Log file.  This report will allow printing a list of the errors so that the
"KRN",19,6968,1,3,0)
encounter forms can be retrieved and the data validated.
"KRN",19,6968,25)
PRT^IBDF18E2
"KRN",19,6968,"U")
SCANNING ERROR AND WARNING LIS
"KRN",19,7148,-1)
0^2
"KRN",19,7148,0)
IBDF FREE PENDING PAGES^Send Forms Tracking Entries Pending Pages to PCE^^R^^IBD MANAGER^^^^^^AUTOMATED INFO COLLECTION SYS
"KRN",19,7148,1,0)
^^2^2^2971014^
"KRN",19,7148,1,1,0)
This option will allow a user to send Forms Tracking entries that are in
"KRN",19,7148,1,2,0)
a pending pages status to PCE.
"KRN",19,7148,25)
MANUAL^IBDFFRFT
"KRN",19,7148,"U")
SEND FORMS TRACKING ENTRIES PE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PGL",357.6,0,11,.11)
TYPE OF HEALTH SUMMARY^*P142'^GMT(142,^0;11^S DIC("S")="I $P(^(0),U)'=""GMTS HS ADHOC OPTION""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"PGL",357.6,0,13,.13)
PACKAGE INTERFACE FOR INPUT^*P357.6'^IBE(357.6,^0;13^S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$P(^(0),U,16)[""S""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"PGL",357.6,16,2,16.2)
NARRATIVE DATA TYPE^P359.1'^IBE(359.1,^16;2^Q
"PGL",357.6,16,6,16.6)
PRIMARY VALUE DATA TYPE^P359.1'^IBE(359.1,^16;6^Q
"PGL",358.22,0,6,.06)
MARKING AREA^P358.91'^IBE(358.91,^0;6^Q
"PGL",358.22,0,9,.09)
DATA QUALIFIER^P358.98'^IBD(358.98,^0;9^Q
"PGL",358.6,0,11,.11)
TYPE OF HEALTH SUMMARY^*P142'^GMT(142,^0;11^S DIC("S")="I $P(^(0),U)'=""GMTS HS ADHOC OPTION""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"PGL",358.6,0,13,.13)
PACKAGE INTERFACE FOR INPUT^*P358.6'^IBE(358.6,^0;13^S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$P(^(0),U,16)[""S""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"PGL",358.6,16,2,16.2)
NARRATIVE DATA TYPE^P358.99'^IBE(358.99,^16;2^Q
"PGL",358.6,16,6,16.6)
PRIMARY VALUE DATA TYPE^P358.99'^IBE(358.99,^16;6^Q
"PKG",421,-1)
1^1
"PKG",421,0)
AUTOMATED INFO COLLECTION SYS^IBD^The utilities for generating a paper encounter form.
"PKG",421,20,0)
^9.402P^^
"PKG",421,22,0)
^9.49I^1^1
"PKG",421,22,1,0)
3.0^2970212^2970424^1258
"PKG",421,22,1,"PAH",1,0)
15^2971014^1453
"PKG",421,22,1,"PAH",1,1,0)
^^10^10^2990126
"PKG",421,22,1,"PAH",1,1,1,0)
Automatic sending of Forms Tracking entries in a Pending Pages status
"PKG",421,22,1,"PAH",1,1,2,0)
to PCE.
"PKG",421,22,1,"PAH",1,1,3,0)
 
"PKG",421,22,1,"PAH",1,1,4,0)
Add a new package interface and toolkit component to display clinical
"PKG",421,22,1,"PAH",1,1,5,0)
reminders on an encounter form
"PKG",421,22,1,"PAH",1,1,6,0)
 
"PKG",421,22,1,"PAH",1,1,7,0)
This patch fixes the IBDF Background Job for the printing of
"PKG",421,22,1,"PAH",1,1,8,0)
Encounter Forms ignoring the time queued (starting time ) for
"PKG",421,22,1,"PAH",1,1,9,0)
print jobs.  It also allows only numerics to be entered in the
"PKG",421,22,1,"PAH",1,1,10,0)
Time Queued field of the Encounter Form Parameters file #357.09.
"PRE")
IBDY315E
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
13
"RTN","IBDF2D")
0^11^B29914063
"RTN","IBDF2D",1,0)
IBDF2D ;ALB/CJM - ENCOUNTER FORM - WRITE SELECTION LIST ;NOV 16,1992
"RTN","IBDF2D",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**15**;APR 24, 1997
"RTN","IBDF2D",3,0)
 ;prints a selection list
"RTN","IBDF2D",4,0)
PRINTLST(IBLIST) ;writes the selection list to the print array
"RTN","IBDF2D",5,0)
 ;IBLIST - pointer to a selection list
"RTN","IBDF2D",6,0)
 ;
"RTN","IBDF2D",7,0)
 N GROUPODR,SLCTNODR,GROUP,SLCTN,PRRGROUP,QUIT,COL,CWIDTH,CUTLEFT,CUTRIGHT,BOX,LINE,NEEDUPR,ALL,CNT,DRWBBL,TRACKBBL,LOCATION,HDR,SUBHDR
"RTN","IBDF2D",8,0)
 ;CWIDTH=the width of the entries, including end "|"
"RTN","IBDF2D",9,0)
 ;BOX=1 if the block is outlined
"RTN","IBDF2D",10,0)
 ;LINE=1 if the separator between subcolumns has "|"
"RTN","IBDF2D",11,0)
 ;NEEDUPR=1 if, when printing a group header, the row above should be underlined also - cures a defect caused when some subcolumns NOT underlined
"RTN","IBDF2D",12,0)
 ;ALL=0 if list is dynamic and only data should be printed
"RTN","IBDF2D",13,0)
 ;DRWBBL=1 while printing bubbles - can turn off printing of bubbles by setting DRWBBL=0
"RTN","IBDF2D",14,0)
 ;TRACKBBL=1 if bubbles are going into form tracking - for dynamic lists
"RTN","IBDF2D",15,0)
 ;HDR=text of group header
"RTN","IBDF2D",16,0)
 ;SUBHDR=text of subheader within group (defined as a place holder)
"RTN","IBDF2D",17,0)
 ;
"RTN","IBDF2D",18,0)
 S (TRACKBBL,GROUPODR,SLCTNODR,GROUP,SLCTN,PRRGROUP,COL,QUIT,NEEDUPR,CNT,SUBHDR,HDR)=""
"RTN","IBDF2D",19,0)
 S (DRWBBL,ALL)=1
"RTN","IBDF2D",20,0)
 ;
"RTN","IBDF2D",21,0)
 Q:$$LSTDESCR^IBDFU1(.IBLIST)
"RTN","IBDF2D",22,0)
 Q:IBLIST("BLK")'=IBBLK
"RTN","IBDF2D",23,0)
 S BOX=$S(IBBLK("BOX")=2:0,1:1)
"RTN","IBDF2D",24,0)
 S LINE=(IBLIST("SEP")["|")
"RTN","IBDF2D",25,0)
 I 'IBLIST("NUMCOL") S IBLIST("NUMCOL")=8
"RTN","IBDF2D",26,0)
 D SCDESCR^IBDFU1(.IBLIST,.CWIDTH)
"RTN","IBDF2D",27,0)
 I IBLIST("DYNAMIC"),'IBPRINT("ENTIRE") S ALL=0
"RTN","IBDF2D",28,0)
 I IBLIST("DYNAMIC"),IBPRINT("WITH_DATA") D GETDATA(.LOCATION)
"RTN","IBDF2D",29,0)
 ;
"RTN","IBDF2D",30,0)
 ;should the bubbles be written to form tracking?
"RTN","IBDF2D",31,0)
 I IBLIST("DYNAMIC") I $G(IBPFID),$G(IBFORM("SCAN",IBBLK("PAGE"))),IBLIST("INPUT_RTN"),IBDEVICE("PCL") S TRACKBBL=1
"RTN","IBDF2D",32,0)
 ;
"RTN","IBDF2D",33,0)
 ;get the first column
"RTN","IBDF2D",34,0)
 D GETCOL^IBDF2D1(.COL) I 'COL D:IBDEVICE("LISTMAN")  Q
"RTN","IBDF2D",35,0)
 .W !!,"The LIST="_IBLIST("NAME")_" in BLOCK="_IBBLK("NAME")_" requires at least",!,CWIDTH_" columns in order to display!",!
"RTN","IBDF2D",36,0)
 .D PAUSE^IBDFU5
"RTN","IBDF2D",37,0)
 ;
"RTN","IBDF2D",38,0)
 D:ALL OTHER^IBDF2D2
"RTN","IBDF2D",39,0)
 D DRWCOL^IBDF2D1(.COL)
"RTN","IBDF2D",40,0)
 F  D  Q:QUIT
"RTN","IBDF2D",41,0)
 .S PRRGROUP=GROUP
"RTN","IBDF2D",42,0)
 .D NEXT(.GROUP,.GROUPODR,.SLCTNODR,.SLCTN) I 'SLCTN S QUIT=1 Q
"RTN","IBDF2D",43,0)
 .I COL("ROWSLEFT")<(1+IBLIST("BTWN")) D GETCOL^IBDF2D1(.COL) S:'COL QUIT=1 Q:QUIT  D DRWCOL^IBDF2D1(.COL)
"RTN","IBDF2D",44,0)
 .D DISPLAY^IBDF2D3(SLCTN,.COL,HDR,.SUBHDR)
"RTN","IBDF2D",45,0)
 ;
"RTN","IBDF2D",46,0)
 ;for dynamic lists, if full data is needed, add to overflow report if there is more data
"RTN","IBDF2D",47,0)
 ;
"RTN","IBDF2D",48,0)
 I 'IBDEVICE("LISTMAN"),IBLIST("DYNAMIC"),IBLIST("OVERFLOW"),SLCTN S @IBARRAY("OVERFLOW")@(IBBLK,IBLIST,"DYNAMIC LIST")=""
"RTN","IBDF2D",49,0)
 ;
"RTN","IBDF2D",50,0)
 ;no selections left - fill in with blank selections, unless dynamic and just filling in with data
"RTN","IBDF2D",51,0)
 I ALL S SLCTN="",QUIT=0 S:('IBLIST("DYNAMIC"))!('IBLIST("INPUT_RTN")) DRWBBL=0 F  Q:'COL  D
"RTN","IBDF2D",52,0)
 .F  Q:(COL("ROWSLEFT")<(IBLIST("BTWN")+1))  D DISPLAY^IBDF2D3(SLCTN,.COL,HDR,.SUBHDR)
"RTN","IBDF2D",53,0)
 .D GETCOL^IBDF2D1(.COL) S:'COL QUIT=1 Q:QUIT  D DRWCOL^IBDF2D1(.COL)
"RTN","IBDF2D",54,0)
 ;
"RTN","IBDF2D",55,0)
 I IBDEVICE("LISTMAN"),GROUP D NEXT(.GROUP,.GROUPODR,.SLCTNODR,.SLCTN) I SLCTN W !,"There are entries that do not fit on the ",IBLIST("NAME")," list!",!,"Column width="_CWIDTH,!,"Make more room to display all of the entries!",! D PAUSE^IBDFU5
"RTN","IBDF2D",56,0)
 ;
"RTN","IBDF2D",57,0)
 ;
"RTN","IBDF2D",58,0)
EXIT ;
"RTN","IBDF2D",59,0)
 Q
"RTN","IBDF2D",60,0)
 ;
"RTN","IBDF2D",61,0)
NEXT(GROUP,GROUPODR,SLCTNODR,SLCTN) ;finds the next selction to be printed
"RTN","IBDF2D",62,0)
 ;** PARAMETERS - must be passed by reference **
"RTN","IBDF2D",63,0)
 N QUIT S QUIT=0
"RTN","IBDF2D",64,0)
 I IBLIST("DYNAMIC") D  Q
"RTN","IBDF2D",65,0)
 .I IBPRINT("WITH_DATA") S:SLCTN="" SLCTN=0 S SLCTN=$O(@LOCATION@(SLCTN))
"RTN","IBDF2D",66,0)
 S GROUP=$G(GROUP),SLCTN=$G(SLCTN),GROUPODR=$G(GROUPODR),SLCTNODR=$G(SLCTNODR)
"RTN","IBDF2D",67,0)
 F  Q:QUIT  D
"RTN","IBDF2D",68,0)
 .I 'GROUP!(SLCTNODR="") D NXTGROUP(.GROUP,.GROUPODR) S (SLCTNODR,SLCTN)="" S:'GROUP QUIT=1 Q:QUIT  I COL D  Q:QUIT
"RTN","IBDF2D",69,0)
 ..I COL("ROWSLEFT")<1 D GETCOL^IBDF2D1(.COL) S:'COL QUIT=1 Q:QUIT  D DRWCOL^IBDF2D1(.COL)
"RTN","IBDF2D",70,0)
 ..D GROUPHDR(GROUP,.COL,.HDR,.SUBHDR)
"RTN","IBDF2D",71,0)
 .I SLCTNODR="" S SLCTNODR=$O(^IBE(357.3,"APO",IBLIST,GROUP,"")) I SLCTNODR="" Q
"RTN","IBDF2D",72,0)
 .S SLCTN=$O(^IBE(357.3,"APO",IBLIST,GROUP,SLCTNODR,SLCTN)) S:SLCTN QUIT=1 S:'SLCTN SLCTNODR=$O(^IBE(357.3,"APO",IBLIST,GROUP,SLCTNODR))
"RTN","IBDF2D",73,0)
 Q
"RTN","IBDF2D",74,0)
NXTGROUP(GROUP,GROUPODR) ;
"RTN","IBDF2D",75,0)
 ;** PARAMETERS - must be passed by reference **
"RTN","IBDF2D",76,0)
 ;
"RTN","IBDF2D",77,0)
 N QUIT S QUIT=0
"RTN","IBDF2D",78,0)
 F  Q:QUIT  D
"RTN","IBDF2D",79,0)
 .I (GROUPODR="")!('GROUP) S GROUPODR=$O(^IBE(357.4,"APO",IBLIST,GROUPODR)),GROUP="" I GROUPODR="" S QUIT=1 Q
"RTN","IBDF2D",80,0)
 .S GROUP=$O(^IBE(357.4,"APO",IBLIST,GROUPODR,GROUP)) S:GROUP QUIT=1
"RTN","IBDF2D",81,0)
 Q
"RTN","IBDF2D",82,0)
 ;
"RTN","IBDF2D",83,0)
GROUPHDR(GROUP,COL,HDR,SUBHDR) ;writes the group header to the list
"RTN","IBDF2D",84,0)
 ;COL is the column to write at
"RTN","IBDF2D",85,0)
 ;returns HDR=displayed text if passed by reference
"RTN","IBDF2D",86,0)
 ;
"RTN","IBDF2D",87,0)
 N WIDTH,OPTIONS,OFFSET,NODE
"RTN","IBDF2D",88,0)
 S HDR=""
"RTN","IBDF2D",89,0)
 S SUBHDR=""
"RTN","IBDF2D",90,0)
 S NODE=^IBE(357.4,GROUP,0)
"RTN","IBDF2D",91,0)
 ;don't print invisible headers
"RTN","IBDF2D",92,0)
 Q:$P(NODE,"^",4)="I"
"RTN","IBDF2D",93,0)
 S HDR=$P(NODE,"^")
"RTN","IBDF2D",94,0)
 ;some other special cases
"RTN","IBDF2D",95,0)
 I (HDR="BLANK")!(HDR="") S HDR="" Q
"RTN","IBDF2D",96,0)
 ;
"RTN","IBDF2D",97,0)
 S OPTIONS="",OFFSET=$L(IBLIST("SEP1")),WIDTH=CWIDTH-(2*OFFSET)
"RTN","IBDF2D",98,0)
 S HDR=$E(HDR,1,WIDTH)
"RTN","IBDF2D",99,0)
 S OPTIONS=$TR(IBLIST("DGHDR"),"C","")
"RTN","IBDF2D",100,0)
 S OPTIONS=$TR(OPTIONS,"SR","ss")
"RTN","IBDF2D",101,0)
 ;
"RTN","IBDF2D",102,0)
 ;only affects forms with big print - bold otherwise not available
"RTN","IBDF2D",103,0)
 ;??? do we really want to assume bold not available for small fonts?
"RTN","IBDF2D",104,0)
 ;I OPTIONS["s",OPTIONS'["B",IBFORM("WIDTH")<100 S OPTIONS=OPTIONS_"B"
"RTN","IBDF2D",105,0)
 ;I IBFORM("WIDTH")>100 S OPTIONS=$TR(OPTIONS,"B")
"RTN","IBDF2D",106,0)
 ;
"RTN","IBDF2D",107,0)
 I HDR=" " S OPTIONS=$TR(OPTIONS,"s","") S:'IBLIST("ULSLCTNS") OPTIONS=$TR(OPTIONS,"U","")
"RTN","IBDF2D",108,0)
 I IBLIST("DGHDR")["C" S OFFSET=OFFSET+((WIDTH-$L(HDR))\2)
"RTN","IBDF2D",109,0)
 I OPTIONS["U",$L(HDR)<WIDTH,'IBLIST("ULSLCTNS") D
"RTN","IBDF2D",110,0)
 .D DRWSTR^IBDFU($$Y,($$X)+OFFSET,"","U",$L(HDR))
"RTN","IBDF2D",111,0)
 .S OPTIONS=$TR(OPTIONS,"U","")
"RTN","IBDF2D",112,0)
 ;want to apply options over entire column width?
"RTN","IBDF2D",113,0)
 ;I IBLIST("ULSLCTNS")!(LINE&(OPTIONS["s")) D
"RTN","IBDF2D",114,0)
 I IBLIST("ULSLCTNS")!(OPTIONS["s") D
"RTN","IBDF2D",115,0)
 .D DRWSTR^IBDFU($$Y,($$X)+LINE,$J("",OFFSET-LINE)_HDR,OPTIONS,CWIDTH-(2*LINE))
"RTN","IBDF2D",116,0)
 .I OPTIONS["U",NEEDUPR D DRWSTR^IBDFU($$Y-1,($$X)+LINE,"","U",CWIDTH-(2*LINE)) S NEEDUPR=0
"RTN","IBDF2D",117,0)
 E  D DRWSTR^IBDFU($$Y,($$X)+OFFSET,HDR,OPTIONS)
"RTN","IBDF2D",118,0)
 D DECREASE(.COL)
"RTN","IBDF2D",119,0)
 Q
"RTN","IBDF2D",120,0)
 ;
"RTN","IBDF2D",121,0)
DECREASE(COL) ;
"RTN","IBDF2D",122,0)
 S COL("ROWSLEFT")=COL("ROWSLEFT")-1
"RTN","IBDF2D",123,0)
 S COL("NEXTROW")=COL("NEXTROW")+1
"RTN","IBDF2D",124,0)
 Q
"RTN","IBDF2D",125,0)
X() ;
"RTN","IBDF2D",126,0)
 Q COL("X")
"RTN","IBDF2D",127,0)
Y() ;
"RTN","IBDF2D",128,0)
 Q COL("NEXTROW")+COL("Y")
"RTN","IBDF2D",129,0)
 ;
"RTN","IBDF2D",130,0)
GETDATA(LOCATION) ;gets the dynamic data at print time,@LOCATION=where the list was put
"RTN","IBDF2D",131,0)
 ;
"RTN","IBDF2D",132,0)
 N RTN
"RTN","IBDF2D",133,0)
 S RTN=IBLIST("RTN")
"RTN","IBDF2D",134,0)
 D RTNDSCR^IBDFU1B(.RTN)
"RTN","IBDF2D",135,0)
 S LOCATION=RTN("DATA_LOCATION")
"RTN","IBDF2D",136,0)
 I RTN("ACTION")=3,RTN("DYNAMIC") D
"RTN","IBDF2D",137,0)
 .I $G(REPRINT),($G(RTN("INPUT_RTN"))]"") D REPRINT^IBDFN11(IBPFID,IBLIST,.LOCATION) Q
"RTN","IBDF2D",138,0)
 .I '$D(RTNLIST(RTN("RTN"))) Q:'$$DORTN^IBDFU1B(.RTN)
"RTN","IBDF2D",139,0)
 .S:'IBDEVICE("LISTMAN") RTNLIST(RTN("RTN"))=""
"RTN","IBDF2D",140,0)
 .K RTNLIST(RTN("RTN"))
"RTN","IBDF2D",141,0)
 Q
"RTN","IBDF3")
0^1^B26445717
"RTN","IBDF3",1,0)
IBDF3 ;ALB/CJM - Edit Selection List ;NOV 16,1992
"RTN","IBDF3",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**15**;APR 24, 1997
"RTN","IBDF3",3,0)
 ;
"RTN","IBDF3",4,0)
EDITLIST ;expects IBBLK to be defined
"RTN","IBDF3",5,0)
 N IBLIST,IBVALMBG
"RTN","IBDF3",6,0)
 D FULL^VALM1
"RTN","IBDF3",7,0)
 S IBVALMBG=VALMBG,VALMBCK="R"
"RTN","IBDF3",8,0)
 D SELECT
"RTN","IBDF3",9,0)
 I IBLIST D
"RTN","IBDF3",10,0)
 .Q:$$LSTDSCR2^IBDFU1(.IBLIST)
"RTN","IBDF3",11,0)
 .;I IBLIST("DYNAMIC"),$G(IBLIST("CLRM")) D SEL^IBDFN15(.IBLIST)
"RTN","IBDF3",12,0)
 .I IBLIST("DYNAMIC"),'$G(IBLIST("CLRM")) W !,"You can not edit the contents of this list - it is determined at print time!" D PAUSE^IBDFU5 Q
"RTN","IBDF3",13,0)
 .;I '$G(IBLIST("CLRM")) D EN^VALM("IBDF DISPLAY GROUPS FOR EDIT")
"RTN","IBDF3",14,0)
 .I $G(IBLIST("CLRM")) S IBLIST("EDITING CLRM")=1
"RTN","IBDF3",15,0)
 .D EN^VALM("IBDF DISPLAY GROUPS FOR EDIT")
"RTN","IBDF3",16,0)
 .K IBLIST
"RTN","IBDF3",17,0)
 .D UNCMPBLK^IBDF19(IBBLK)
"RTN","IBDF3",18,0)
 .I '$G(IBFASTXT) D
"RTN","IBDF3",19,0)
 ..D IDXBLOCK^IBDFU4
"RTN","IBDF3",20,0)
 ..S VALMBCK="R",VALMBG=IBVALMBG
"RTN","IBDF3",21,0)
 Q
"RTN","IBDF3",22,0)
ONENTRY ;
"RTN","IBDF3",23,0)
 D IDXGRP
"RTN","IBDF3",24,0)
 Q
"RTN","IBDF3",25,0)
ONEXIT ;
"RTN","IBDF3",26,0)
 K @VALMAR
"RTN","IBDF3",27,0)
 Q
"RTN","IBDF3",28,0)
SELECT ; 
"RTN","IBDF3",29,0)
 ; -- dic("s") passed in from ibdfgrp
"RTN","IBDF3",30,0)
 S IBLIST=""
"RTN","IBDF3",31,0)
 Q:'$G(IBBLK)
"RTN","IBDF3",32,0)
 S DIC="^IBE(357.2,",DIC(0)="EQ",D="C",X=IBBLK
"RTN","IBDF3",33,0)
 D IX^DIC K DIC
"RTN","IBDF3",34,0)
 S:+Y>0 IBLIST=+Y
"RTN","IBDF3",35,0)
 Q
"RTN","IBDF3",36,0)
ADDBLANK() ;
"RTN","IBDF3",37,0)
 N IGRP
"RTN","IBDF3",38,0)
 S GRP="" F  S GRP=$O(^IBE(357.4,"D",IBLIST,GRP)) Q:'GRP  Q:$P(^IBE(357.4,GRP,0),"^")="BLANK"
"RTN","IBDF3",39,0)
 I 'GRP D
"RTN","IBDF3",40,0)
 .K DIC,DD,DO,DINUM S DIC="^IBE(357.4,",DIC(0)="",X="BLANK",DIC(0)=""
"RTN","IBDF3",41,0)
 .D FILE^DICN K DIC
"RTN","IBDF3",42,0)
 .S GRP=$S(+Y<0:"",1:+Y)
"RTN","IBDF3",43,0)
 I GRP K DA,DIE S DA=GRP,DIE="^IBE(357.4,",DR=".02////0;.03////"_IBLIST D ^DIE K DIE,DA,DR
"RTN","IBDF3",44,0)
 Q GRP
"RTN","IBDF3",45,0)
IDXGRP ;build an index of groups in print order for list processor
"RTN","IBDF3",46,0)
 N GRP,GRPODR
"RTN","IBDF3",47,0)
 K @VALMAR
"RTN","IBDF3",48,0)
 S VALMCNT=0
"RTN","IBDF3",49,0)
 S GRPODR="" F  S GRPODR=$O(^IBE(357.4,"APO",IBLIST,GRPODR)) Q:GRPODR=""  D
"RTN","IBDF3",50,0)
 .S GRP="" F  S GRP=$O(^IBE(357.4,"APO",IBLIST,GRPODR,GRP)) Q:'GRP  D
"RTN","IBDF3",51,0)
 ..;
"RTN","IBDF3",52,0)
 ..;make sure the index is correct
"RTN","IBDF3",53,0)
 ..I $P($G(^IBE(357.4,GRP,0)),"^",3)'=IBLIST K DIK,DA S DIK="^IBE(357.4,",DA=GRP D IX^DIK K DIK,DA,^IBE(357.4,"APO",IBLIST,GRPODR,GRP) Q
"RTN","IBDF3",54,0)
 ..;
"RTN","IBDF3",55,0)
 ..S VALMCNT=VALMCNT+1
"RTN","IBDF3",56,0)
 ..S @VALMAR@(VALMCNT,0)=$$DISPLAY(GRP,VALMCNT),@VALMAR@("IDX",VALMCNT,VALMCNT)=GRP
"RTN","IBDF3",57,0)
 ..D FLDCTRL^VALM10(VALMCNT,"ID") ;set video for ID column
"RTN","IBDF3",58,0)
 Q
"RTN","IBDF3",59,0)
LMGRPHDR ;sets the screen hdr
"RTN","IBDF3",60,0)
 S VALMHDR(1)="PRINT GROUPS CURRENTLY DEFINED FOR '"_$$LISTNAME_"' SELECTION LIST"
"RTN","IBDF3",61,0)
 Q
"RTN","IBDF3",62,0)
DISPLAY(GRP,ROW) ;
"RTN","IBDF3",63,0)
 N NODE0,NAME,INV
"RTN","IBDF3",64,0)
 S NODE0=$G(^IBE(357.4,GRP,0)),NAME=$P(NODE0,"^"),INV=$P(NODE0,"^",4)
"RTN","IBDF3",65,0)
 I NAME="BLANK" S NAME="*i  BLANK (Not Displayed)"
"RTN","IBDF3",66,0)
 I NAME'="BLANK",INV="I" S NAME="*i  "_NAME
"RTN","IBDF3",67,0)
 I NAME'="BLANK",INV'="I" S NAME="    "_NAME
"RTN","IBDF3",68,0)
 Q $$PADRIGHT^IBDFU(ROW,6)_$J($P(NODE0,"^",2),6)_$J("",3)_$$PADRIGHT^IBDFU(NAME,40)_$J($$SLCTNCNT(GRP),6)_" selection(s)"
"RTN","IBDF3",69,0)
SLCTNCNT(GRP) ;
"RTN","IBDF3",70,0)
 N CNT,SLCTN
"RTN","IBDF3",71,0)
 S CNT=0,SLCTN=""
"RTN","IBDF3",72,0)
 F  S SLCTN=$O(^IBE(357.3,"D",GRP,SLCTN)) Q:'SLCTN  S CNT=CNT+1
"RTN","IBDF3",73,0)
 Q CNT
"RTN","IBDF3",74,0)
LISTNAME() ;
"RTN","IBDF3",75,0)
 Q $P($G(^IBE(357.2,IBLIST,0)),"^",1)
"RTN","IBDF3",76,0)
ADDGRP ;
"RTN","IBDF3",77,0)
 N NAME,QUIT,GRP
"RTN","IBDF3",78,0)
 S QUIT=0
"RTN","IBDF3",79,0)
 F  D  Q:QUIT
"RTN","IBDF3",80,0)
 .K DIR S DIR(0)="357.4,.01O",DIR("B")="" D ^DIR K DIR I $D(DIRUT) S QUIT=1 Q
"RTN","IBDF3",81,0)
 .S NAME=Y
"RTN","IBDF3",82,0)
 .K DIC,DD,DO,DINUM S DIC="^IBE(357.4,",X=NAME,DIC(0)=""
"RTN","IBDF3",83,0)
 .D FILE^DICN K DIC,DIE,DA
"RTN","IBDF3",84,0)
 .I +Y<0 W !,"Unable to create a new record!" D PAUSE^VALM1 S QUIT=1 Q
"RTN","IBDF3",85,0)
 .I +Y>0 K DA S DA=+Y,DIE="^IBE(357.4,",DIE("NO^")="Any value",DR=".02;.04;.03////"_IBLIST D ^DIE K DIC,DIE,DR,DA
"RTN","IBDF3",86,0)
 .W !,"Now Another!",!
"RTN","IBDF3",87,0)
 D IDXGRP
"RTN","IBDF3",88,0)
 S VALMBCK="R"
"RTN","IBDF3",89,0)
 Q
"RTN","IBDF3",90,0)
 ;
"RTN","IBDF3",91,0)
ADDEMPTY ;adds a blank group - a place holder that takes up space on the form
"RTN","IBDF3",92,0)
 ;
"RTN","IBDF3",93,0)
 N ORDER,QUIT,GRP
"RTN","IBDF3",94,0)
 S QUIT=0
"RTN","IBDF3",95,0)
 F  D  Q:QUIT
"RTN","IBDF3",96,0)
 .K DIR S DIR(0)="357.4,.02O",DIR("B")="" D ^DIR K DIR I (Y="")!$D(DIRUT) S QUIT=1 Q
"RTN","IBDF3",97,0)
 .S ORDER=Y
"RTN","IBDF3",98,0)
 .K DIC,DD,DO,DINUM S DIC="^IBE(357.4,",X=" ",DIC(0)=""
"RTN","IBDF3",99,0)
 .D FILE^DICN K DIC,DIE,DA
"RTN","IBDF3",100,0)
 .I +Y<0 W !,"Unable to create a new group record!" D PAUSE^VALM1 S QUIT=1 Q
"RTN","IBDF3",101,0)
 .I +Y>0 K DA S DA=+Y,DIE="^IBE(357.4,",DIE("NO^")="Any value",DR=".02////"_ORDER_";.03////"_IBLIST D ^DIE K DIC,DIE,DR,DA
"RTN","IBDF3",102,0)
 .W !,"Now Another!",!
"RTN","IBDF3",103,0)
 D IDXGRP
"RTN","IBDF3",104,0)
 S VALMBCK="R"
"RTN","IBDF3",105,0)
 Q
"RTN","IBDF3",106,0)
EDTSLCTN ;
"RTN","IBDF3",107,0)
 N SEL,IBGRP S SEL=""
"RTN","IBDF3",108,0)
 I $G(VALMCNT) D
"RTN","IBDF3",109,0)
 .D EN^VALM2($G(XQORNOD(0)),"S")
"RTN","IBDF3",110,0)
 .S SEL=$O(VALMY(""))
"RTN","IBDF3",111,0)
 I SEL="" D
"RTN","IBDF3",112,0)
 .S IBGRP=$$ADDBLANK Q:'IBGRP
"RTN","IBDF3",113,0)
 E  S IBGRP=$G(@VALMAR@("IDX",SEL,SEL))
"RTN","IBDF3",114,0)
 D:IBGRP SLCTNS^IBDF4,IDXGRP
"RTN","IBDF3",115,0)
 S VALMBCK="R"
"RTN","IBDF3",116,0)
 Q
"RTN","IBDF3",117,0)
EDITGRP ;
"RTN","IBDF3",118,0)
 N SEL,GRP
"RTN","IBDF3",119,0)
 S VALMBCK="R"
"RTN","IBDF3",120,0)
 D EN^VALM2($G(XQORNOD(0)),"S")
"RTN","IBDF3",121,0)
 S SEL="" F  S SEL=$O(VALMY(SEL)) Q:'SEL  D
"RTN","IBDF3",122,0)
 .S GRP=$G(@VALMAR@("IDX",SEL,SEL))
"RTN","IBDF3",123,0)
 .D:GRP
"RTN","IBDF3",124,0)
 ..K DIE,DA S DIE=357.4,DA=GRP,DR=".01;.02;.04" D ^DIE
"RTN","IBDF3",125,0)
 ..I '$D(DA) D DELSLCTN
"RTN","IBDF3",126,0)
 ..K DIE,DA,DR,DIC
"RTN","IBDF3",127,0)
 D IDXGRP
"RTN","IBDF3",128,0)
 S VALMBCK="R"
"RTN","IBDF3",129,0)
 Q
"RTN","IBDF3",130,0)
DELSLCTN ;deletes a group's selections
"RTN","IBDF3",131,0)
 N SLCTN
"RTN","IBDF3",132,0)
 S SLCTN="",DIK="^IBE(357.3,"
"RTN","IBDF3",133,0)
 F  S SLCTN=$O(^IBE(357.3,"D",GRP,SLCTN)) Q:'SLCTN  I $P($G(^IBE(357.3,SLCTN,0)),"^",4)=GRP K DA S DA=SLCTN D ^DIK
"RTN","IBDF3",134,0)
 K DIK,DA
"RTN","IBDF3",135,0)
 Q
"RTN","IBDF3",136,0)
DELGRP ;delete a group and all of its selections
"RTN","IBDF3",137,0)
 N SEL,GRP
"RTN","IBDF3",138,0)
 S VALMBCK="R"
"RTN","IBDF3",139,0)
 D EN^VALM2($G(XQORNOD(0)))
"RTN","IBDF3",140,0)
 S SEL="" F  S SEL=$O(VALMY(SEL)) Q:'SEL  D
"RTN","IBDF3",141,0)
 .S GRP=$G(@VALMAR@("IDX",SEL,SEL))
"RTN","IBDF3",142,0)
 .Q:'$$RUSURE^IBDFU5($P($G(^IBE(357.4,GRP,0)),"^"))
"RTN","IBDF3",143,0)
 .I GRP D DELSLCTN K DA S DIK="^IBE(357.4,",DA=GRP D ^DIK K DIK
"RTN","IBDF3",144,0)
 D IDXGRP
"RTN","IBDF3",145,0)
 S VALMBCK="R"
"RTN","IBDF3",146,0)
 Q
"RTN","IBDF9A")
0^7^B38086456
"RTN","IBDF9A",1,0)
IBDF9A ;ALB/CJM - ENCOUNTER FORM - (create,edit,delete selection list) ;FEB 1,1993
"RTN","IBDF9A",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**15**;APR 24, 1997
"RTN","IBDF9A",3,0)
 ;
"RTN","IBDF9A",4,0)
LIST ;Create, Edit, or Delete a selection list from the form
"RTN","IBDF9A",5,0)
 N IBVALMBG
"RTN","IBDF9A",6,0)
 S VALMBCK="R",IBVALMBG=VALMBG
"RTN","IBDF9A",7,0)
 K DIR S DIR("?",1)="You can create a [N]ew list, edit its [A]ppearance, [D]elete it,",DIR("?")="edit its [Co]ntents, [P]osition or size its columns.  Choose from:"
"RTN","IBDF9A",8,0)
 S DIR("B")="C" I $G(IBBLK) D
"RTN","IBDF9A",9,0)
 .S X=$G(^IBE(357.2,+$O(^IBE(357.2,"C",IBBLK,0)),0))
"RTN","IBDF9A",10,0)
 .I $P(X,"^",14),'$P(X,"^",19) S DIR("B")="A" ;dynamic list, can't edit contents, default changed to appearance, unless its clinical reminders
"RTN","IBDF9A",11,0)
 ;
"RTN","IBDF9A",12,0)
 S DIR(0)="SAB^A:APPEARANCE;C:CONTENTS;D:DELETE;N:NEW;P:POSITION",DIR("A")="[N]ew   [A]ppearance   [D]elete   [C]ontents   [P]osition: "
"RTN","IBDF9A",13,0)
 W !!,DIR("?",1),!,DIR("?"),!
"RTN","IBDF9A",14,0)
 D ^DIR K DIR I $D(DIRUT)!(Y<0) Q
"RTN","IBDF9A",15,0)
 D @$S(Y="C":"EDITLIST^IBDF3",Y="A":"EDITLIST",Y="N":"NEWLIST^IBDF9A1",Y="D":"DLTLIST",Y="P":"COLUMNS",1:"NOSUCH")
"RTN","IBDF9A",16,0)
 S VALMBG=IBVALMBG
"RTN","IBDF9A",17,0)
 Q
"RTN","IBDF9A",18,0)
NOSUCH ;
"RTN","IBDF9A",19,0)
 Q
"RTN","IBDF9A",20,0)
EDITLIST ;allows editing of the structure of a list
"RTN","IBDF9A",21,0)
 ;expects IBBLK to be defined
"RTN","IBDF9A",22,0)
 ;IBSC1,IBSC2,IBSWITCH,IBD,IBOLD,IBLEN  are used in the input template
"RTN","IBDF9A",23,0)
 N IBLIST,IBRTN,IBSC1,IBSC2,IBSWITCH,IBSWT,IBD,IBOLD,IBLEN,IBDELETE,IBSCOLD,IBSCNEW,FROM,TO,IBDYN,IBINPUT,IBSC,IBSCRAY
"RTN","IBDF9A",24,0)
 S VALMBCK="R",(IBOLD,IBSWITCH)=1
"RTN","IBDF9A",25,0)
 D FULL^VALM1
"RTN","IBDF9A",26,0)
 D SELECT
"RTN","IBDF9A",27,0)
 I IBLIST D
"RTN","IBDF9A",28,0)
 .S (IBSCOLD,IBSCNEW)=""
"RTN","IBDF9A",29,0)
 .S IBRTN=$P($G(^IBE(357.2,IBLIST,0)),"^",11)
"RTN","IBDF9A",30,0)
 .D LISTTYPE(IBRTN)
"RTN","IBDF9A",31,0)
 .D GETSC^IBDF9A3(.IBSCOLD,IBLIST)
"RTN","IBDF9A",32,0)
 .D:IBRTN DATASIZE(IBRTN)
"RTN","IBDF9A",33,0)
 .K DIE,DA,DR S DIE=357.2,DA=IBLIST,DR="[IBDF EDIT SELECTION LIST]",DIE("NO^")="BACKOUTOK" D ^DIE K DIE,DR,DA,%,I
"RTN","IBDF9A",34,0)
 .;
"RTN","IBDF9A",35,0)
 .;if the list already had selections the subcolumns may need to be reordered/created/deleted
"RTN","IBDF9A",36,0)
 .S IBSWITCH="" F  S IBSWITCH=$O(IBSWITCH(IBSWITCH)) Q:'IBSWITCH  S FROM=$P(IBSWITCH(IBSWITCH),"^"),TO=$P(IBSWITCH(IBSWITCH),"^",2) D  S IBSWT(FROM)=TO
"RTN","IBDF9A",37,0)
 ..I $D(IBSCOLD(TO)) D DELSC^IBDF9A3(IBLIST,TO)
"RTN","IBDF9A",38,0)
 ..;D SWITCH(IBLIST,FROM,TO)
"RTN","IBDF9A",39,0)
 ..I $D(IBSCOLD(FROM)) S IBSCOLD(TO)=IBSCOLD(FROM) K IBSCOLD(FROM)
"RTN","IBDF9A",40,0)
 .D SWITCH(IBLIST,.IBSWT)
"RTN","IBDF9A",41,0)
 .D GETSC^IBDF9A3(.IBSCNEW,IBLIST)
"RTN","IBDF9A",42,0)
 .N SC S SC=0 F  S SC=$O(IBSCOLD(SC)) Q:'SC  I IBSCOLD(SC)'=$G(IBSCNEW(SC)) D DELSC^IBDF9A3(IBLIST,SC)
"RTN","IBDF9A",43,0)
 .S SC=0 F  S SC=$O(IBSCNEW(SC)) Q:'SC  I IBSCNEW(SC)'=$G(IBSCOLD(SC)) D ADDSC^IBDF9A3(IBLIST,SC)
"RTN","IBDF9A",44,0)
 .D BLKCHNG^IBDF19(IBFORM,IBBLK) ;8/20/96 changed from d UNCMPLBLK^IBDF19
"RTN","IBDF9A",45,0)
 .D IDXBLOCK^IBDFU4
"RTN","IBDF9A",46,0)
 S VALMBCK="R"
"RTN","IBDF9A",47,0)
 Q
"RTN","IBDF9A",48,0)
COLUMNS ;allows the user to place and size the columns of the list
"RTN","IBDF9A",49,0)
 ;expects IBBLK to be defined
"RTN","IBDF9A",50,0)
 N IBLIST
"RTN","IBDF9A",51,0)
 S VALMBCK="R"
"RTN","IBDF9A",52,0)
 D FULL^VALM1
"RTN","IBDF9A",53,0)
 D SELECT
"RTN","IBDF9A",54,0)
 I IBLIST D
"RTN","IBDF9A",55,0)
 .K DIE,DA,DR S DIE=357.2,DA=IBLIST,DR="[IBDF POSITION/SIZE COLUMNS]",DIE("NO^")="BACKOUTOK" D ^DIE K DIE,DR,DA
"RTN","IBDF9A",56,0)
 .D UNCMPBLK^IBDF19(IBBLK),IDXBLOCK^IBDFU4
"RTN","IBDF9A",57,0)
 S VALMBCK="R"
"RTN","IBDF9A",58,0)
 Q
"RTN","IBDF9A",59,0)
SELECT ;
"RTN","IBDF9A",60,0)
 S IBLIST=""
"RTN","IBDF9A",61,0)
 Q:'$G(IBBLK)
"RTN","IBDF9A",62,0)
 I '$O(^IBE(357.2,"C",IBBLK,0)) W !,"There is no selection list!" D PAUSE^IBDFU5 Q
"RTN","IBDF9A",63,0)
AGAIN K DIC S DIC="^IBE(357.2,",DIC(0)="EQ",D="C",X=IBBLK
"RTN","IBDF9A",64,0)
 S DIC("S")="I $P($G(^(0)),U,2)=IBBLK"
"RTN","IBDF9A",65,0)
 D IX^DIC K DIC
"RTN","IBDF9A",66,0)
 S:+Y>0 IBLIST=+Y
"RTN","IBDF9A",67,0)
 I 'IBLIST,'$D(DTOUT),'$D(DUOUT) K DIR S DIR(0)="Y",DIR("A")="No selection list selected! Try again",DIR("B")="YES" D ^DIR K DIR I '$D(DIRUT),Y=1 G AGAIN
"RTN","IBDF9A",68,0)
 Q
"RTN","IBDF9A",69,0)
MSG1 ;called by the input template
"RTN","IBDF9A",70,0)
 W !!,"Entering the number of list columns is optional. By default the list will be",!,"given as many columns as the block has space for.",!
"RTN","IBDF9A",71,0)
 Q
"RTN","IBDF9A",72,0)
MSG2 ;called by the input template
"RTN","IBDF9A",73,0)
 W !!,"Entering the information on the position of the columns and their",!,"height is optional. Appropriate default values will be used. However,",!,"you may specify your own values for up to 4 coulmns.",!
"RTN","IBDF9A",74,0)
 Q
"RTN","IBDF9A",75,0)
MSG3 ;called by the input template
"RTN","IBDF9A",76,0)
 W !!,"You can now specify the subcolumns the list should contain.",!,"There can be at most 6 subcolumns, numbered 1-6.",!
"RTN","IBDF9A",77,0)
 Q
"RTN","IBDF9A",78,0)
 ;
"RTN","IBDF9A",79,0)
DATASIZE(RTN) ;IBLEN() stores the lengths of the pieces of the record returned by the package interface
"RTN","IBDF9A",80,0)
 N NODE,IEN,PIECE
"RTN","IBDF9A",81,0)
 Q:'$G(RTN)
"RTN","IBDF9A",82,0)
 S PIECE=0 F  S PIECE=$O(^IBE(357.6,RTN,15,"C",PIECE)) Q:'PIECE  S IEN=0 F  S IEN=$O(^IBE(357.6,RTN,15,"C",PIECE,IEN)) Q:'IEN  S NODE=$G(^IBE(357.6,RTN,15,IEN,0)) I $P(NODE,"^",3) S IBLEN($P(NODE,"^",3))=+$P(NODE,"^",2)_"^"_$P(NODE,"^",5)
"RTN","IBDF9A",83,0)
 S IBLEN(0)=4
"RTN","IBDF9A",84,0)
 S IBLEN(1)=$P($G(^IBE(357.6,RTN,2)),"^",2)_"^"_$P($G(^IBE(357.6,RTN,2)),"^",16)
"RTN","IBDF9A",85,0)
 Q
"RTN","IBDF9A",86,0)
 ;
"RTN","IBDF9A",87,0)
NEWNAME() ;
"RTN","IBDF9A",88,0)
 K DIR S DIR(0)="357.2,.01A",DIR("A")="New Selection List Name: ",DIR("B")=""
"RTN","IBDF9A",89,0)
 D ^DIR K DIR I $D(DIRUT) Q -1
"RTN","IBDF9A",90,0)
 Q Y
"RTN","IBDF9A",91,0)
SWITCH(IBLIST,IBARRY) ;FOR loops thru selection list and changes all subcolumn numbers from old to new (called only once)
"RTN","IBDF9A",92,0)
 N SLCTN,SC
"RTN","IBDF9A",93,0)
 S SLCTN="" F  S SLCTN=$O(^IBE(357.3,"C",IBLIST,SLCTN)) Q:'SLCTN  D
"RTN","IBDF9A",94,0)
 .S (IBSC1,SC)=0 F  S IBSC1=$O(^IBE(357.3,SLCTN,1,"B",IBSC1)) Q:'IBSC1  F  S SC=$O(^IBE(357.3,SLCTN,1,"B",IBSC1,SC)) Q:'SC  S IBSC(SC)=IBSC1
"RTN","IBDF9A",95,0)
 . S (IBSC1,SC)=0 F  S SC=$O(IBSC(SC)) Q:'SC  S IBSC1=IBSC(SC) D
"RTN","IBDF9A",96,0)
 ..;I $P($G(^IBE(357.3,SLCTN,1,SC,0)),"^")=IBSC1 D
"RTN","IBDF9A",97,0)
 ..I $D(IBARRY(IBSC1)) S IBSC2=IBARRY(IBSC1) D
"RTN","IBDF9A",98,0)
 ...I $G(^IBE(357.3,SLCTN,1,0))="" S ^IBE(357.3,SLCTN,1,0)="^357.31IA^"
"RTN","IBDF9A",99,0)
 ...K DIE,DA,DR S DIE="^IBE(357.3,SLCTN,1,",DA(1)=SLCTN,DA=SC,DR=".01////"_IBSC2
"RTN","IBDF9A",100,0)
 ...D ^DIE
"RTN","IBDF9A",101,0)
 ...;K DIE,DA,DR S DA(1)=SLCTN,DIE="^IBE(357.3,"_DA(1)_",1,",DA=SC,DR=".01////"_IBSC2
"RTN","IBDF9A",102,0)
 ..E  D
"RTN","IBDF9A",103,0)
 ...K ^IBE(357.3,SLCTN,1,"B",IBSC1,SC)
"RTN","IBDF9A",104,0)
 ...K DIK,DA S DIK="^IBE(357.3,SLCTN,1,",DA(1)=SLCTN,DA=SC D IX^DIK
"RTN","IBDF9A",105,0)
 K DIK,DA,DIE,DR
"RTN","IBDF9A",106,0)
 Q
"RTN","IBDF9A",107,0)
RTN() ;does a lookup on the package interface file using the E cross-reference, which uses the name with the prefix=namespace removed
"RTN","IBDF9A",108,0)
 K DIC S DIC("S")="I $P(^(0),U,6)=3,$P(^(0),U,9)=1"
"RTN","IBDF9A",109,0)
 S DIC="^IBE(357.6,",DIC(0)="MQEA",D="E^D^B",DIC("A")="Select the TYPE OF DATA that the list will contain: " D MIX^DIC1 K DIC,DA
"RTN","IBDF9A",110,0)
 Q $S((Y<0)!$D(DTOUT)!$D(DUOUT):0,1:+Y)
"RTN","IBDF9A",111,0)
DLTLIST ;expects IBBLK to be defined
"RTN","IBDF9A",112,0)
 N IBLIST
"RTN","IBDF9A",113,0)
 D FULL^VALM1
"RTN","IBDF9A",114,0)
 D SELECT
"RTN","IBDF9A",115,0)
 I IBLIST D
"RTN","IBDF9A",116,0)
 .Q:'$$RUSURE^IBDFU5($P($G(^IBE(357.2,IBLIST,0)),"^"))
"RTN","IBDF9A",117,0)
 .D DLTLIST^IBDFU3(357.2,IBBLK,IBLIST)
"RTN","IBDF9A",118,0)
 .D UNCMPBLK^IBDF19(IBBLK),IDXBLOCK^IBDFU4
"RTN","IBDF9A",119,0)
 Q
"RTN","IBDF9A",120,0)
 ;
"RTN","IBDF9A",121,0)
LISTTYPE(RTN) ;sets IBDYN=1 if the rtn is dynamic selection,IBINPUT to the input interface
"RTN","IBDF9A",122,0)
 N NODE
"RTN","IBDF9A",123,0)
 I '$G(RTN) S (IBDYN,IBINPUT,IBCLRM)=0 Q
"RTN","IBDF9A",124,0)
 S NODE=$G(^IBE(357.6,RTN,0))
"RTN","IBDF9A",125,0)
 S IBDYN=$P(NODE,"^",14)
"RTN","IBDF9A",126,0)
 S IBINPUT=$P(NODE,"^",13)
"RTN","IBDF9A",127,0)
 S IBCLRM=$P(NODE,"^",20)
"RTN","IBDF9A",128,0)
 Q
"RTN","IBDF9A",129,0)
 ;
"RTN","IBDF9A",130,0)
OTHEROK(PI) ;returns 1 if the selection interface=PI allows 'other', 0 otherwise
"RTN","IBDF9A",131,0)
 N NODE
"RTN","IBDF9A",132,0)
 Q:'$G(PI) 0
"RTN","IBDF9A",133,0)
 ;
"RTN","IBDF9A",134,0)
 ;there must be an interface for input
"RTN","IBDF9A",135,0)
 Q:'$P((^IBE(357.6,PI,0)),"^",13) 0
"RTN","IBDF9A",136,0)
 ;
"RTN","IBDF9A",137,0)
 ;the selection interface must allow input of narrative or code
"RTN","IBDF9A",138,0)
 S NODE=$G(^IBE(357.6,PI,16))
"RTN","IBDF9A",139,0)
 I '$P(NODE,"^",2),'$P(NODE,"^",6) Q 0
"RTN","IBDF9A",140,0)
 Q 1
"RTN","IBDFESP")
0^6^B7325981
"RTN","IBDFESP",1,0)
IBDFESP ;ALB/AAS - AICS EDIT SITE PARAMS ; 19-DEC-95
"RTN","IBDFESP",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**15**;APR 24, 1997
"RTN","IBDFESP",3,0)
 ;
"RTN","IBDFESP",4,0)
EDIT ; -- edit site parameters
"RTN","IBDFESP",5,0)
 N DIC,DIE,DA,DR,X,Y,HOLD
"RTN","IBDFESP",6,0)
 I $G(^IBD(357.09,1,0))="" D CREATE
"RTN","IBDFESP",7,0)
 S DIE="^IBD(357.09,",DA=1
"RTN","IBDFESP",8,0)
 S HOLD=$P($G(^IBD(357.09,DA,0)),"^",8,9)
"RTN","IBDFESP",9,0)
 W !!,"Edit AICS Site Parameters"
"RTN","IBDFESP",10,0)
 W !!,"Form Tracking Purge Parameters"
"RTN","IBDFESP",11,0)
 S DR=".02;.03;1.01;W !!,""Data Entry Parameters"";.04;.06;.07;W !!,""Print Parameters"";.05//YES;.1//30;W !!,""Scanning Parameters"";I '$D(^XUSEC(""IBD MANAGER"",DUZ)) S Y=1.02;.08//20;.09//5;1.02;.11"
"RTN","IBDFESP",12,0)
 D ^DIE
"RTN","IBDFESP",13,0)
 ;
"RTN","IBDFESP",14,0)
 ; -- if scanning parameters have changed, force a regen. of all fs
"RTN","IBDFESP",15,0)
 I HOLD'=$P($G(^IBD(357.09,DA,0)),"^",8,9) D
"RTN","IBDFESP",16,0)
 .W !!,$C(7),"***SCANNING PERCENTAGES HAVE CHANGED***"
"RTN","IBDFESP",17,0)
 .W !!,"In order for scanning % changes to take affect, you MUST DELETE ALL",!,"Form Specification files from EVERY workstation.  Delete EF*.FS files using",!,"the FILE, DELETE FORMSPEC options on the AICS Workstation screen!"
"RTN","IBDFESP",18,0)
 .S ZTRTN="FSPEC^IBDFESP",ZTDESC="IBD - REGENERATE FORM SPECS",ZTDTH=$H,ZTIO="" D ^%ZTLOAD
"RTN","IBDFESP",19,0)
 .W !!,$S($D(ZTSK):"Form Spec Regeneration task # "_ZTSK,1:"Form Spec Regeneration failed, edit scanning parameters again!") D HOME^%ZIS
"RTN","IBDFESP",20,0)
 Q
"RTN","IBDFESP",21,0)
 ;
"RTN","IBDFESP",22,0)
CREATE ; -- create entry in new parameters file 357.09
"RTN","IBDFESP",23,0)
 I $G(^IBD(357.09,1,0))'="" Q
"RTN","IBDFESP",24,0)
 N DLAYGO
"RTN","IBDFESP",25,0)
 S DIC="^IBD(357.09,",DINUM=1,X=$P($$SITE^VASITE,"^",2),DIC(0)="L",DLAYGO=357.09 D FILE^DICN Q:+Y<1
"RTN","IBDFESP",26,0)
 S $P(^IBD(357.09,1,0),"^",5)=1 ; set print inpatients to yes
"RTN","IBDFESP",27,0)
 S ^IBD(357.09,1,"Q",0)="^357.091A^"
"RTN","IBDFESP",28,0)
 Q
"RTN","IBDFESP",29,0)
FSPEC ;Form Specs deleted from file 359.2  FORM SPEC file.
"RTN","IBDFESP",30,0)
 N IBDIFN
"RTN","IBDFESP",31,0)
 S IBDIFN=0
"RTN","IBDFESP",32,0)
 F  S IBDIFN=$O(^IBD(359.2,IBDIFN)) Q:IBDIFN']""  I $D(^IBD(357.95,IBDIFN,0)) D SCAN^IBDFBKS(IBDIFN)
"RTN","IBDFESP",33,0)
 Q
"RTN","IBDFFRFT")
0^4^B32815140
"RTN","IBDFFRFT",1,0)
IBDFFRFT ;ALB/CMR - AICS Free Forms Tracking Entry ; 27-MAR-97
"RTN","IBDFFRFT",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**15**;APR 24, 1997
"RTN","IBDFFRFT",3,0)
 ;
"RTN","IBDFFRFT",4,0)
 ; -- modified 10/7/97 to allow background freeing via site parameter
"RTN","IBDFFRFT",5,0)
 ;
"RTN","IBDFFRFT",6,0)
FREEFT ; -- called to pass data from FT to PCE regardless of whether all
"RTN","IBDFFRFT",7,0)
 ;    pages have been received.
"RTN","IBDFFRFT",8,0)
 ;
"RTN","IBDFFRFT",9,0)
 N FORMTYPE,IBFID,IBD,IBNODE,DFN,CLINIC,APPT,Y,PXCA,AUPNDAYS,AUPNDOB,AUPNDOD,AUPNPAT,AUPNSEX,CNT,ORVP,PXCAVSIT,RESULT,SDFN
"RTN","IBDFFRFT",10,0)
 D EN^VALM2($G(XQORNOD(0)))
"RTN","IBDFFRFT",11,0)
 I $D(VALMY) D FULL^VALM1 S IBD=0 F  S IBD=$O(VALMY(IBD)) Q:'IBD!$D(DIRUT)  D
"RTN","IBDFFRFT",12,0)
 .S IBFID=$P($G(^TMP("FRMIDX",$J,+IBD)),"^",2)
"RTN","IBDFFRFT",13,0)
 .S IBNODE=$G(^IBD(357.96,+IBFID,0)) I IBNODE="" W !,"No Form Tracking record associated with entry #",IBD H 2 Q
"RTN","IBDFFRFT",14,0)
 .I '$D(^XUSEC("IBD MANAGER",DUZ)) W !,"You must hold the IBD MANAGER key to free Forms Tracking entries" H 2 Q
"RTN","IBDFFRFT",15,0)
 .I $P(IBNODE,"^",11)'=11 W !,"You may only pass data to PCE if the current status is PENDING PAGES" H 2 Q
"RTN","IBDFFRFT",16,0)
 .S DFN=$P(IBNODE,"^",2),APPT=$P(IBNODE,"^",3),CLINIC=$P(IBNODE,"^",10)
"RTN","IBDFFRFT",17,0)
 .;
"RTN","IBDFFRFT",18,0)
 .; -- display ft data
"RTN","IBDFFRFT",19,0)
 .W !!,"PATIENT: ",$P($G(^DPT(DFN,0)),"^"),"    APPT DATE/TIME: ",$$FMTE^XLFDT(APPT,2),!,"CLINIC:  ",$P($G(^SC(CLINIC,0)),"^"),!
"RTN","IBDFFRFT",20,0)
 .;
"RTN","IBDFFRFT",21,0)
 .; -- display page data
"RTN","IBDFFRFT",22,0)
 .S I=0 F  S I=$O(^IBD(357.96,IBFID,9,I)) Q:'I  S IBNODE=$G(^IBD(357.96,IBFID,9,I,0)) W !?5,"Page ",$P(IBNODE,"^")," ",$S(+$P(IBNODE,"^",2):"Received",1:"Not Received")
"RTN","IBDFFRFT",23,0)
 .W ! S DIR(0)="Y",DIR("A")="Okay to continue",DIR("B")="Y" D ^DIR K DIR Q:'Y
"RTN","IBDFFRFT",24,0)
 .D SEND(IBFID)
"RTN","IBDFFRFT",25,0)
 ;
"RTN","IBDFFRFT",26,0)
 D EXIT1^IBDFFT,START^IBDFFT1
"RTN","IBDFFRFT",27,0)
 S VALMBCK="R"
"RTN","IBDFFRFT",28,0)
 Q
"RTN","IBDFFRFT",29,0)
 ;
"RTN","IBDFFRFT",30,0)
SEND(IBFID,ERRCNT) ; -- send all page data in forms tracking
"RTN","IBDFFRFT",31,0)
 ;
"RTN","IBDFFRFT",32,0)
 ; -- gather data from previously stored pages
"RTN","IBDFFRFT",33,0)
 S I=0 F  S I=$O(^IBD(357.96,IBFID,10,I)) Q:'I  D ARYAD^IBDFBKR($G(^IBD(357.96,IBFID,10,I,0)))
"RTN","IBDFFRFT",34,0)
 ;
"RTN","IBDFFRFT",35,0)
 ; -- send data to pce
"RTN","IBDFFRFT",36,0)
 W:'$D(ZTQUEUED) !,"Sending Data to PCE..."
"RTN","IBDFFRFT",37,0)
 S RESULT=$$SEND^IBDF18E(IBFID,"","",.BUBBLES,.HANDPRNT,"",.PXCA,.DYNAMIC)
"RTN","IBDFFRFT",38,0)
 W:'$D(ZTQUEUED) $S(RESULT:"Successfull",1:"Unsuccessful")
"RTN","IBDFFRFT",39,0)
 ;
"RTN","IBDFFRFT",40,0)
 ; -- process any returned errors/warnings
"RTN","IBDFFRFT",41,0)
 I $D(PXCA("ERROR"))!($D(PXCA("WARNING"))) D
"RTN","IBDFFRFT",42,0)
 .N I,J,ERR,LCNT,DIR,DIRUT,DUOUT
"RTN","IBDFFRFT",43,0)
 .S LCNT=0,ERRCNT=$G(ERRCNT)+1
"RTN","IBDFFRFT",44,0)
 .D EW^IBDFBK2(.ERR,.PXCA,.LCNT)
"RTN","IBDFFRFT",45,0)
 .;
"RTN","IBDFFRFT",46,0)
 .W:'$D(ZTQUEUED) !!!,"The following Error(s) occured while validating data in PCE for: ",$P($G(^DPT(DFN,0)),"^")
"RTN","IBDFFRFT",47,0)
 .Q:$D(ZTQUEUED)
"RTN","IBDFFRFT",48,0)
 .S I=0 F  S I=$O(ERR(I)) Q:'I  W !?4,$E(ERR(I),1,75)  I $L(ERR(I))>75 W !?10,$E(ERR(I),76,140)
"RTN","IBDFFRFT",49,0)
 .W !!
"RTN","IBDFFRFT",50,0)
 Q
"RTN","IBDFFRFT",51,0)
 ;
"RTN","IBDFFRFT",52,0)
BCKGRND ; -- entry point for back ground job to process pending pages
"RTN","IBDFFRFT",53,0)
 ;
"RTN","IBDFFRFT",54,0)
 N DAYS,START,END
"RTN","IBDFFRFT",55,0)
 S DAYS=+$P($G(^IBD(357.09,1,0)),"^",11)
"RTN","IBDFFRFT",56,0)
 ;
"RTN","IBDFFRFT",57,0)
 Q:'DAYS
"RTN","IBDFFRFT",58,0)
 S ERRCNT=0
"RTN","IBDFFRFT",59,0)
 S START=DAYS+7
"RTN","IBDFFRFT",60,0)
 S START=$$FMADD^XLFDT(DT,-START)
"RTN","IBDFFRFT",61,0)
 S END=$$FMADD^XLFDT(DT,-DAYS)+.24
"RTN","IBDFFRFT",62,0)
 ;
"RTN","IBDFFRFT",63,0)
B1 N CNT,ERRCNT,IBFID,STATUS
"RTN","IBDFFRFT",64,0)
 F  S START=$O(^IBD(357.96,"D",START)) Q:'START!(START>END)  D
"RTN","IBDFFRFT",65,0)
 .S IBFID=0
"RTN","IBDFFRFT",66,0)
 .F  S IBFID=$O(^IBD(357.96,"D",START,IBFID)) Q:'IBFID  D
"RTN","IBDFFRFT",67,0)
 ..S STATUS=$P($G(^IBD(357.96,IBFID,0)),"^",11)
"RTN","IBDFFRFT",68,0)
 ..I STATUS=11 S CNT=$G(CNT)+1 D SEND(IBFID,.ERRCNT)
"RTN","IBDFFRFT",69,0)
 ;
"RTN","IBDFFRFT",70,0)
 D:$G(MANUAL) BULL
"RTN","IBDFFRFT",71,0)
 I $D(ZTQUEUED),$G(MANUAL) S ZTREQ="@"
"RTN","IBDFFRFT",72,0)
 Q
"RTN","IBDFFRFT",73,0)
 ;
"RTN","IBDFFRFT",74,0)
BULL ; -- add bulletin or something to let people know what was done
"RTN","IBDFFRFT",75,0)
 ;    but only if they ask for it during testing.
"RTN","IBDFFRFT",76,0)
 ;
"RTN","IBDFFRFT",77,0)
 S IBD(1)="The background job to release pending pages has completed"
"RTN","IBDFFRFT",78,0)
 S IBD(2)=""
"RTN","IBDFFRFT",79,0)
 S IBD(3)="   Number of Forms Tracking Entries: "_+$G(CNT)
"RTN","IBDFFRFT",80,0)
 S IBD(4)="  Number of Forms Generating Errors: "_+$G(ERRCNT)
"RTN","IBDFFRFT",81,0)
 S XMSUB="AICS RELEASE PENDING PAGES"
"RTN","IBDFFRFT",82,0)
 S XMDUZ="AICS PACKAGE",XMTEXT="IBD("
"RTN","IBDFFRFT",83,0)
 K XMY S XMN=0
"RTN","IBDFFRFT",84,0)
 S XMY(DUZ)=""
"RTN","IBDFFRFT",85,0)
 D ^XMD
"RTN","IBDFFRFT",86,0)
 K X,Y,IBD,XMDUZ,XMTEXT,XMY,XMSUB,XMN
"RTN","IBDFFRFT",87,0)
 Q
"RTN","IBDFFRFT",88,0)
 ;
"RTN","IBDFFRFT",89,0)
MANUAL ; -- entry point for sending pending pages to PCE for a date range
"RTN","IBDFFRFT",90,0)
 ;    get date range and do b1
"RTN","IBDFFRFT",91,0)
 ;
"RTN","IBDFFRFT",92,0)
 W !!,"Option to Manually send Encounter Forms in a Pending Pages Status in Forms"
"RTN","IBDFFRFT",93,0)
 W !,"Tracking to PCE by Encounter date range.",!!
"RTN","IBDFFRFT",94,0)
 ;
"RTN","IBDFFRFT",95,0)
 S MANUAL=1
"RTN","IBDFFRFT",96,0)
 S DAYS=+$P($G(^IBD(357.09,1,0)),"^",11)
"RTN","IBDFFRFT",97,0)
 S HELP="Enter a START date.  This is an exact date and should be in the past."
"RTN","IBDFFRFT",98,0)
 S START=$$ASKDT("Start Date: ","T-"_(60+DAYS),"AEPQX","",DT,.HELP,"D SHELP^IBDFFRFT")
"RTN","IBDFFRFT",99,0)
 I START<1 G MQ
"RTN","IBDFFRFT",100,0)
 S HELP="Enter the END date.  This must be after the start date an before today."
"RTN","IBDFFRFT",101,0)
 S END=$$ASKDT("End Date: ","T-"_$S(DAYS:DAYS,1:15),"AEQX",START,DT,.HELP,"D EHELP^IBDFFRFT")
"RTN","IBDFFRFT",102,0)
 I END<1!(END<START) G MQ
"RTN","IBDFFRFT",103,0)
 S ZTRTN="B1^IBDFFRFT",ZTSAVE("START")="",ZTSAVE("END")="",ZTSAVE("DAYS")="",ZTSAVE("MANUAL")=""
"RTN","IBDFFRFT",104,0)
 S ZTDESC="IBD-FREE FORMS TRACKING OF PENDING PAGES"
"RTN","IBDFFRFT",105,0)
 S ZTIO=""
"RTN","IBDFFRFT",106,0)
 W !!,"This option must be queued.  No Device is Necessary."
"RTN","IBDFFRFT",107,0)
 W !,"A mail message will be sent when the process has completed.",!!
"RTN","IBDFFRFT",108,0)
 D ^%ZTLOAD
"RTN","IBDFFRFT",109,0)
MQ K X,Y,IBD,DAYS,START,END,MANUAL,HELP,ZTSK,ZTRTN,ZTSAVE,ZTSAVE,ZTDESC,ZTIO
"RTN","IBDFFRFT",110,0)
 Q
"RTN","IBDFFRFT",111,0)
 ;
"RTN","IBDFFRFT",112,0)
EHELP ; -- help for the end date prompt
"RTN","IBDFFRFT",113,0)
 W !,"Enter the END date.  This is an Encounter Date."
"RTN","IBDFFRFT",114,0)
 W !,"This is the last date that forms that are in a Pending Pages Status in Forms"
"RTN","IBDFFRFT",115,0)
 W !,"Tracking will be automatically sent to PCE for processing."
"RTN","IBDFFRFT",116,0)
 Q
"RTN","IBDFFRFT",117,0)
 ;
"RTN","IBDFFRFT",118,0)
SHELP ; -- help for start date prompt
"RTN","IBDFFRFT",119,0)
 W !,"Enter the START date.  This is an Encounter Date."
"RTN","IBDFFRFT",120,0)
 W !,"This is the date that you want to start the process that sends forms that"
"RTN","IBDFFRFT",121,0)
 W !,"are in a Pending Pages Status in Forms Tracking entries to PCE to start on."
"RTN","IBDFFRFT",122,0)
 Q
"RTN","IBDFFRFT",123,0)
 ;
"RTN","IBDFFRFT",124,0)
ASKDT(QUES,DEFLT,PARAM,EARLY,LATEST,HELP,EXHELP) ; -- ask date questions
"RTN","IBDFFRFT",125,0)
 N X,Y,DIR,DIRUT,DTOUT,DUOUT,IBQUIT
"RTN","IBDFFRFT",126,0)
 S DIR(0)="DOA^"_$E($G(EARLY),1,7)_":"_$G(LATEST)_":"_$S($G(PARAM)'="":PARAM,1:"AEQRX")
"RTN","IBDFFRFT",127,0)
 I $G(QUES)'="" S DIR("A")=QUES
"RTN","IBDFFRFT",128,0)
 I $G(DEFLT)'="" S DIR("B")=DEFLT
"RTN","IBDFFRFT",129,0)
 I $L($G(EXHELP)) S DIR("??")="^"_EXHELP
"RTN","IBDFFRFT",130,0)
 I $D(HELP) M DIR("?")=HELP
"RTN","IBDFFRFT",131,0)
 D ^DIR
"RTN","IBDFFRFT",132,0)
 I $D(DIRUT),Y'="" S Y=-1 ;i y="" user typed "@"
"RTN","IBDFFRFT",133,0)
 I $D(DTOUT)!($D(DUOUT)) S IBQUIT=1,Y=-1
"RTN","IBDFFRFT",134,0)
 Q Y
"RTN","IBDFN15")
0^3^B15636299
"RTN","IBDFN15",1,0)
IBDFN15 ;ALB/CMR - ENCOUNTER FORM - OUTPUTS;JAN 4, 1996
"RTN","IBDFN15",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**15**;APR 24, 1997
"RTN","IBDFN15",3,0)
 ;
"RTN","IBDFN15",4,0)
 ; -- clinical reminders interface
"RTN","IBDFN15",5,0)
 ;
"RTN","IBDFN15",6,0)
SELRM ; -- Select reminders using old structures
"RTN","IBDFN15",7,0)
 N DIC
"RTN","IBDFN15",8,0)
 K @IBARY
"RTN","IBDFN15",9,0)
 W !
"RTN","IBDFN15",10,0)
 S QUIT=0
"RTN","IBDFN15",11,0)
 S DIC("S")="I '$P(^(0),U,6)"
"RTN","IBDFN15",12,0)
 S DIC=811.9,DIC(0)="AEMQZ"
"RTN","IBDFN15",13,0)
 D ^DIC K DIC
"RTN","IBDFN15",14,0)
 I +Y>0 S @IBARY=+Y_"^"_$P(Y(0),"^",3)_"^DUE NOW^LAST ACTIVITY^DUE DATE^COMBO"
"RTN","IBDFN15",15,0)
 Q
"RTN","IBDFN15",16,0)
 ;
"RTN","IBDFN15",17,0)
DISP ; -- display reminders on encounter form, treat like a dynamic
"RTN","IBDFN15",18,0)
 ;    selection list
"RTN","IBDFN15",19,0)
 ;
"RTN","IBDFN15",20,0)
 N I,L,X,Y,Z,ORD,SEL,LAST,IBDCLRM,IBDX,CNT,TEXT,IBCLRMNM,CLRMTYP,COMBO,INVISIBL,NODE,GRPORD,GRP,CLRMCNT
"RTN","IBDFN15",21,0)
 I $G(IBLIST("EDITING CLRM")) G SELRM
"RTN","IBDFN15",22,0)
 ;
"RTN","IBDFN15",23,0)
 I +$G(IBLIST("CLRMLIST"))<1 S IBLIST("CLRMLIST")=2
"RTN","IBDFN15",24,0)
 S CLRMTYP=+$G(IBLIST("CLRMLIST"))-1
"RTN","IBDFN15",25,0)
 K ^TMP("PXRHM",$J),^TMP("PXRM",$J)
"RTN","IBDFN15",26,0)
 K ^TMP("IB",$J,"INTERFACES","PX CLINICAL REMINDERS PRINT")
"RTN","IBDFN15",27,0)
 Q:'$G(DFN)!('$G(IBLIST))
"RTN","IBDFN15",28,0)
 ;
"RTN","IBDFN15",29,0)
 ; -- determine which reminders are due now
"RTN","IBDFN15",30,0)
 ;    loop through groups and then selections
"RTN","IBDFN15",31,0)
 S GRPORD=""
"RTN","IBDFN15",32,0)
 F  S GRPORD=$O(^IBE(357.4,"APO",+IBLIST,GRPORD)) Q:GRPORD=""  S GRP=0 F  S GRP=$O(^IBE(357.4,"APO",+IBLIST,GRPORD,GRP)) Q:'GRP  D
"RTN","IBDFN15",33,0)
 .S NODE=$G(^IBE(357.4,+GRP,0))
"RTN","IBDFN15",34,0)
 .I $P(NODE,"^")="BLANK"!($P(NODE,"^",4)) S INVISIBL=1
"RTN","IBDFN15",35,0)
 .I '$G(INVISIBL) S CNT=$G(CNT)+1,^TMP("IB",$J,"INTERFACES","PX CLINICAL REMINDERS PRINT",CNT)="0^  "_$P(NODE,"^")
"RTN","IBDFN15",36,0)
 .D ONEGRP
"RTN","IBDFN15",37,0)
 ;
"RTN","IBDFN15",38,0)
 K RTNLIST(RTN("RTN")),^TMP("PXRM",$J),^TMP("PXHRM",$J)
"RTN","IBDFN15",39,0)
 I $G(CLRMCNT)<1 S ^TMP("IB",$J,"INTERFACES","PX CLINICAL REMINDERS PRINT",1)="0^No Reminders in List"
"RTN","IBDFN15",40,0)
 I $G(CLRMCNT),'$D(^TMP("IB",$J,"INTERFACES","PX CLINICAL REMINDERS PRINT")) D
"RTN","IBDFN15",41,0)
 .S ^TMP("IB",$J,"INTERFACES","PX CLINICAL REMINDERS PRINT",1)="0^No. Reminders Evaluated: "_CLRMCNT
"RTN","IBDFN15",42,0)
 .I CLRMTYP S ^TMP("IB",$J,"INTERFACES","PX CLINICAL REMINDERS PRINT",2)="0^None Applicable this patient"
"RTN","IBDFN15",43,0)
 .I 'CLRMTYP S ^TMP("IB",$J,"INTERFACES","PX CLINICAL REMINDERS PRINT",2)="0^None Due Now"
"RTN","IBDFN15",44,0)
 Q
"RTN","IBDFN15",45,0)
 ;
"RTN","IBDFN15",46,0)
ONEGRP ; -- loop through entries of one group in order
"RTN","IBDFN15",47,0)
 S ORD="" F  S ORD=$O(^IBE(357.3,"APO",+IBLIST,GRP,ORD)) Q:ORD=""  S SEL=0 F  S SEL=$O(^IBE(357.3,"APO",+IBLIST,+GRP,ORD,SEL)) Q:'SEL  D
"RTN","IBDFN15",48,0)
 .S IBDCLRM=$G(^IBE(357.3,SEL,0))
"RTN","IBDFN15",49,0)
 .I +IBDCLRM,'$P(IBDCLRM,"^",2) D
"RTN","IBDFN15",50,0)
 ..S CLRMCNT=$G(CLRMCNT)+1
"RTN","IBDFN15",51,0)
 ..D MAIN^PXRM(DFN,+IBDCLRM,CLRMTYP)
"RTN","IBDFN15",52,0)
 ..S TEXT=$O(^TMP("PXRHM",$J,+IBDCLRM,""))
"RTN","IBDFN15",53,0)
 ..Q:TEXT=""
"RTN","IBDFN15",54,0)
 ..S NODE=$G(^TMP("PXRHM",$J,+IBDCLRM,TEXT))
"RTN","IBDFN15",55,0)
 ..K ^TMP("PXRHM",$J),^TMP("PXRM",$J)
"RTN","IBDFN15",56,0)
 ..I $P(NODE,"^")="N/A" Q  ;don't display not applicables
"RTN","IBDFN15",57,0)
 ..I CLRMTYP=0,$P(NODE,"^")'="DUE NOW" Q  ;type of list DUE NOW only
"RTN","IBDFN15",58,0)
 ..S LAST=$P(NODE,"^",3) I +LAST,$L($P(LAST,"."))=7 S LAST=$$FMTE^XLFDT(LAST)
"RTN","IBDFN15",59,0)
 ..I $P(NODE,"^",5)="E" S LAST=LAST_" (E)" ;last activity was historical encounter, see px*1*38
"RTN","IBDFN15",60,0)
 ..S CNT=$G(CNT)+1
"RTN","IBDFN15",61,0)
 ..S COMBO=$S($P(NODE,"^")="DUE NOW":"DUE NOW",1:$$FMTE^XLFDT($P(NODE,"^",2)))
"RTN","IBDFN15",62,0)
 ..S ^TMP("IB",$J,"INTERFACES","PX CLINICAL REMINDERS PRINT",CNT)="0^"_TEXT_"^"_$P(NODE,"^")_"^"_$$FMTE^XLFDT($P(NODE,"^",2))_"^"_LAST_"^"_COMBO
"RTN","IBDFN15",63,0)
 .;
"RTN","IBDFN15",64,0)
 .I $P(IBDCLRM,"^",2) S CNT=$G(CNT)+1,^TMP("IB",$J,"INTERFACES","PX CLINICAL REMINDERS PRINT",CNT)="0^  "_$P(IBDCLRM,"^",6)
"RTN","IBDFN15",65,0)
 Q
"RTN","IBDFN15",66,0)
 ;
"RTN","IBDFN15",67,0)
TEST ;
"RTN","IBDFN15",68,0)
 N DFN,IBLIST,RTN,X
"RTN","IBDFN15",69,0)
 K ^TMP("IB",$J,"INTERFACES","PX CLINICAL REMINDERS PRINT")
"RTN","IBDFN15",70,0)
 S DFN=7169761 ;mnt,vbb-male
"RTN","IBDFN15",71,0)
 ;S DFN=7170189 ;mnt,vbb-female
"RTN","IBDFN15",72,0)
 ;S DFN=712 ;dev,den-male
"RTN","IBDFN15",73,0)
 S IBLIST("CLRMLIST")=2
"RTN","IBDFN15",74,0)
 S IBLIST=489 ;dev,den
"RTN","IBDFN15",75,0)
 S IBLIST=430 ;mnt,vbb
"RTN","IBDFN15",76,0)
 S RTN("RTN")="IBDFN15"
"RTN","IBDFN15",77,0)
 D DISP
"RTN","IBDFN15",78,0)
T1 S X="" F  S X=$O(^TMP("IB",$J,"INTERFACES","PX CLINICAL REMINDERS PRINT",X)) Q:'X  W !,^(X)
"RTN","IBDFN15",79,0)
 Q
"RTN","IBDFPE1")
0^10^B19179036
"RTN","IBDFPE1",1,0)
IBDFPE1 ;MAF/ALB - ENCOUNTER FORMS QUEUEING PARAMETERS DISPLAY CONT.; 1 31 94
"RTN","IBDFPE1",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**15**;APR 24, 1997
"RTN","IBDFPE1",3,0)
EDT ; -- Edit Parameter Groups
"RTN","IBDFPE1",4,0)
 N IBDVALM,IBDAT,VALMY
"RTN","IBDFPE1",5,0)
 S VALMBCK=""
"RTN","IBDFPE1",6,0)
 D EN^VALM2($G(XQORNOD(0))) G REP:'$O(VALMY(0)) S IBDVALM=0
"RTN","IBDFPE1",7,0)
 D FULL^VALM1 S VALMBCK="R"
"RTN","IBDFPE1",8,0)
 F IBDVALM=0:0 S IBDVALM=$O(VALMY(IBDVALM)) Q:'IBDVALM  S DA=$S($D(IBDTYPE(IBDVALM)):$P(IBDTYPE(IBDVALM),"^",1),1:"") I DA]"" D
"RTN","IBDFPE1",9,0)
 .S DA(1)=1,DIE="^IBD(357.09,"_DA(1)_","_"""Q"""_",",DA=DA,DR=".01;.04:.1;.13" D ^DIE K DA,DIE,DIC,DR
"RTN","IBDFPE1",10,0)
 D REP Q
"RTN","IBDFPE1",11,0)
 ;
"RTN","IBDFPE1",12,0)
 ;
"RTN","IBDFPE1",13,0)
ADD ; -- Add New Print Parameters
"RTN","IBDFPE1",14,0)
 D FULL^VALM1
"RTN","IBDFPE1",15,0)
 N DLAYGO
"RTN","IBDFPE1",16,0)
 I '$O(^IBD(357.09,0))!($O(^IBD(357.09,0))&'$D(^IBD(357.09,+$O(^IBD(357.09,0)),"Q",0))) W ! S DIC="^IBD(357.09,",DIC(0)="AELQMN",DIC("DR")=".01",DLAYGO=357.09 D ^DIC K DIC G:Y<1 REP S DA=+Y D
"RTN","IBDFPE1",17,0)
 .;S DIE="^IBD(357.09,",DA=DA,DR="11",DR(2,357.091)=".04:.1" D ^DIE K DA,DIE,DR
"RTN","IBDFPE1",18,0)
 W ! S DA(1)=1,DIC("A")="Select Print Mgrs. Queuing Params. Name: ",DIC="^IBD(357.09,"_DA(1)_","_"""Q"""_",",DIC(0)="AELQMN",DIC("DR")=".01",DLAYGO=357.09 D ^DIC K DIC G:Y<1 REP S DA=+Y D
"RTN","IBDFPE1",19,0)
 .S DA(1)=1,DIE="^IBD(357.09,"_DA(1)_","_"""Q"""_",",DA=DA
"RTN","IBDFPE1",20,0)
 .S DR=".04//"_1_";.05//"_"NO"_";.06"_";.07//"_5_";.08//"_"R"_";.09"_";.1//"_10_";.13//"_0000
"RTN","IBDFPE1",21,0)
 .D ^DIE K DA,DIE,DIC,DR
"RTN","IBDFPE1",22,0)
 .Q
"RTN","IBDFPE1",23,0)
REP D INIT^IBDFPE S VALMBCK="R" Q
"RTN","IBDFPE1",24,0)
 ;
"RTN","IBDFPE1",25,0)
STAT ; -- Find out the status of the queued job and kill a tasked job
"RTN","IBDFPE1",26,0)
 N IBDVALM,IBDAT,VALMY,IBDFNODE,IBDFSTAT,IBQUIT
"RTN","IBDFPE1",27,0)
 S VALMBCK=""
"RTN","IBDFPE1",28,0)
 D EN^VALM2($G(XQORNOD(0))) G REP:'$O(VALMY(0)) S IBDVALM=0
"RTN","IBDFPE1",29,0)
 D FULL^VALM1 S VALMBCK="R"
"RTN","IBDFPE1",30,0)
 F IBDVALM=0:0 S IBDVALM=$O(VALMY(IBDVALM)) Q:'IBDVALM  S DA=$S($D(IBDTYPE(IBDVALM)):$P(IBDTYPE(IBDVALM),"^",1),1:"") I DA]"" D  K IBQUIT
"RTN","IBDFPE1",31,0)
 .S DA(1)=1,IBDFNODE=^IBD(357.09,DA(1),"Q",DA,0) D ASK Q:$D(IBQUIT)  D:$D(IBDFSTOP) KILL^%ZTLOAD D:'$D(IBDFSTOP)&(IBDFSTAT]"") STAT^%ZTLOAD D
"RTN","IBDFPE1",32,0)
 ..D FULL^VALM1
"RTN","IBDFPE1",33,0)
 ..I IBDFSTAT']"" W !!,"Status of Queued Job <<< "_$P(IBDFNODE,"^",1)_" >>>",!!,"JOB NOT TASKED!" W:$D(IBDFSTOP) "  NO NEED TO INTERRUPT JOB!" Q
"RTN","IBDFPE1",34,0)
 ..W !!,"Status of Queued Job <<< "_$P(IBDFNODE,"^",1)_" >>>",!!
"RTN","IBDFPE1",35,0)
 ..I $D(ZTSK(0)) W !,"       TASK: ",$S($D(ZTSK):ZTSK,1:"")_"  -  ",$S(ZTSK(0)=1:"Defined",1:"Undefined")
"RTN","IBDFPE1",36,0)
 ..I $D(ZTSK(1)) W !,"STATUS CODE: ",ZTSK(1)
"RTN","IBDFPE1",37,0)
 ..I $D(ZTSK(2)) W !,"     STATUS: ",ZTSK(2)
"RTN","IBDFPE1",38,0)
 ..I $D(IBDFSTOP) W:ZTSK(0)=1 !,"SUCCESSFUL DELETION OF TASK" W !!,"***JOB STOPPED UPON REQUEST***" S:ZTSK=$P(IBDFNODE,"^",11) $P(^IBD(357.09,DA(1),"Q",DA,0),"^",11)="" S:ZTSK=$P(IBDFNODE,"^",14) $P(^IBD(357.09,DA(1),"Q",DA,0),"^",14)=""
"RTN","IBDFPE1",39,0)
 ..Q
"RTN","IBDFPE1",40,0)
 ;I IBDFSTAT']"" W !!,"Status of Queued Job <<< "_$P(IBDFNODE,"^",1)_" >>>",!!,"JOB NOT TASKED!" I $D(IBDFSTOP) W "  NO NEED TO INTERRUPT JOB!"
"RTN","IBDFPE1",41,0)
 K DA,DA(1)
"RTN","IBDFPE1",42,0)
 D PAUSE^VALM1,REP Q
"RTN","IBDFPE1",43,0)
 Q
"RTN","IBDFPE1",44,0)
 ;
"RTN","IBDFPE1",45,0)
DEL ; -- Delete Clinic Group
"RTN","IBDFPE1",46,0)
 N IBDVALM,VALMY,DIR,DIRUT,DUOUT
"RTN","IBDFPE1",47,0)
 S VALMBCK=""
"RTN","IBDFPE1",48,0)
 D EN^VALM2($G(XQORNOD(0))) G REP:'$O(VALMY(0)) S IBDVALM=0
"RTN","IBDFPE1",49,0)
 D FULL^VALM1 S VALMBCK="R"
"RTN","IBDFPE1",50,0)
 ;
"RTN","IBDFPE1",51,0)
 F IBDVALM=0:0 S IBDVALM=$O(VALMY(IBDVALM)) Q:'IBDVALM  S DA=$S($D(IBDTYPE(IBDVALM)):$P(IBDTYPE(IBDVALM),"^",1),1:"") I DA]"" D
"RTN","IBDFPE1",52,0)
 .S DA(1)=1,DIK="^IBD(357.09,"_DA(1)_","_"""Q"""_","
"RTN","IBDFPE1",53,0)
 .W !!,"Paramater Group: "_$P($G(^IBD(357.09,1,"Q",DA,0)),"^",1)
"RTN","IBDFPE1",54,0)
 .W ! S DIR(0)="Y",DIR("B")="NO",DIR("A")="Are You Sure you want to delete "_$P($G(^IBD(357.09,1,"Q",DA,0)),"^",1)
"RTN","IBDFPE1",55,0)
 .D ^DIR K DIR I Y'=1 W !,"Entry ",$P($G(^IBD(357.09,1,"Q",DA,0)),"^",1)," not Deleted!" Q
"RTN","IBDFPE1",56,0)
 .D DP1
"RTN","IBDFPE1",57,0)
 ;
"RTN","IBDFPE1",58,0)
DELQ D REP
"RTN","IBDFPE1",59,0)
 S VALMBCK="R" Q
"RTN","IBDFPE1",60,0)
 ;
"RTN","IBDFPE1",61,0)
DP1 ; -- actual deletion
"RTN","IBDFPE1",62,0)
 S DIK="^IBD(357.09,"_DA(1)_","_"""Q"""_"," D ^DIK
"RTN","IBDFPE1",63,0)
 W !,"Entry ",IBDVALM," Deleted"
"RTN","IBDFPE1",64,0)
 Q
"RTN","IBDFPE1",65,0)
ASK I $P(IBDFNODE,"^",11)']""!($P(IBDFNODE,"^",14)']"")!($P(IBDFNODE,"^",11)=$P(IBDFNODE,"^",14)) D  Q
"RTN","IBDFPE1",66,0)
 .S (IBDFSTAT,ZTSK)=$P(IBDFNODE,"^",11)
"RTN","IBDFPE1",67,0)
 .Q
"RTN","IBDFPE1",68,0)
 S DIR(0)="S^1:CURRENT;2:PREVIOUS"
"RTN","IBDFPE1",69,0)
 S DIR("A")="Select action for print group "_$P(IBDFNODE,"^",1)
"RTN","IBDFPE1",70,0)
 S DIR("B")="CURRENT"
"RTN","IBDFPE1",71,0)
 S DIR("?")=" "
"RTN","IBDFPE1",72,0)
 S DIR("?",1)="Choose 1 or 'C' CURRENT TASK"
"RTN","IBDFPE1",73,0)
 S DIR("?",2)="                or"
"RTN","IBDFPE1",74,0)
 S DIR("?",3)="       2 or 'P' for PREVIOUS TASK"
"RTN","IBDFPE1",75,0)
 S DIR("?",4)=" "
"RTN","IBDFPE1",76,0)
 S DIR("?",5)="          Current task # ="_$P(IBDFNODE,"^",11)
"RTN","IBDFPE1",77,0)
 S DIR("?",6)=" "
"RTN","IBDFPE1",78,0)
 S DIR("?",7)="          Previous task # = "_$P(IBDFNODE,"^",14)
"RTN","IBDFPE1",79,0)
 D ^DIR
"RTN","IBDFPE1",80,0)
 I $D(DTOUT)!($D(DUOUT)) S IBQUIT=1
"RTN","IBDFPE1",81,0)
 S (IBDFSTAT,ZTSK)=$S(Y=2:$P(IBDFNODE,"^",14),1:$P(IBDFNODE,"^",11))
"RTN","IBDFPE1",82,0)
 K DIR Q
"RTN","IBDFQB")
0^5^B33230836
"RTN","IBDFQB",1,0)
IBDFQB ;ALB/MAF - MAIN QUEUE JOB FOR ENCOUNTER FORM PRINTING - FEB 2 1995
"RTN","IBDFQB",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**15**;APR 24, 1997
"RTN","IBDFQB",3,0)
 ;
"RTN","IBDFQB",4,0)
EN ;
"RTN","IBDFQB",5,0)
 ; -- Goes through the "SEQ" cross reference to print the 
"RTN","IBDFQB",6,0)
 ;    highest priority jobs first (lowest sequence number).
"RTN","IBDFQB",7,0)
 N IBDFQUE,IBDFQDT,IBDFQD,IBDFQT,IBDFTSTP
"RTN","IBDFQB",8,0)
 S IBDFQUE=1,IBDFTSTP=1
"RTN","IBDFQB",9,0)
 S (IBDFNUM,IBDFNAME,IBDFIFN,IBDFSEQ,QUIT)=0
"RTN","IBDFQB",10,0)
 D NOW^%DTC S IBDFQDT=%,IBDFQD=$P(%,"."),IBDFQT=$E($P(%,".",2),1,4)
"RTN","IBDFQB",11,0)
 ;
"RTN","IBDFQB",12,0)
 F  S IBDFSEQ=$O(^IBD(357.09,"SEQ",IBDFSEQ)) Q:IBDFSEQ']""  F  S IBDFNUM=$O(^IBD(357.09,"SEQ",IBDFSEQ,IBDFNUM)) Q:IBDFNUM']""  F  S IBDFIFN=$O(^IBD(357.09,"SEQ",IBDFSEQ,IBDFNUM,IBDFIFN)) Q:IBDFIFN']""  N IBDFARY D UP($$QUEUE(IBDFIFN))
"RTN","IBDFQB",13,0)
 ;
"RTN","IBDFQB",14,0)
 ; -- send forms pending pages to PCE automatically
"RTN","IBDFQB",15,0)
 D BCKGRND^IBDFFRFT
"RTN","IBDFQB",16,0)
 ;
"RTN","IBDFQB",17,0)
 G EXIT
"RTN","IBDFQB",18,0)
 ;
"RTN","IBDFQB",19,0)
 ;
"RTN","IBDFQB",20,0)
UP(IBTASK) ; -- store results of tasking
"RTN","IBDFQB",21,0)
 Q:'$G(IBTASK)
"RTN","IBDFQB",22,0)
 D TASK
"RTN","IBDFQB",23,0)
 Q
"RTN","IBDFQB",24,0)
 ;
"RTN","IBDFQB",25,0)
 ;
"RTN","IBDFQB",26,0)
QUEUE(IBDFIFN) ; -- Set up Queue variables
"RTN","IBDFQB",27,0)
 N ZTSK,ZTDTH,ZTRTN,ZTDESC,ZTSAVE,ZTION,X,Y
"RTN","IBDFQB",28,0)
 K ^TMP("IBDF",$J,"C"),^TMP("IBDF",$J,"D")
"RTN","IBDFQB",29,0)
 D SET
"RTN","IBDFQB",30,0)
 G:('$D(^TMP("IBDF",$J)))!QUIT CLEAR
"RTN","IBDFQB",31,0)
 ;
"RTN","IBDFQB",32,0)
 ; -- check if already tasked and running?
"RTN","IBDFQB",33,0)
 ;I $P(IBDFNODE,"^",11)]"" S ZTSK=$P(IBDFNODE,"^",11) D STAT^%ZTLOAD I "^1^2^"[ZTSK(1) S QUIT=1 G CLEAR
"RTN","IBDFQB",34,0)
 ;I $P(IBDFNODE,"^",11)]"" S ZTSK=$P(IBDFNODE,"^",11) W !,ZTSK,! B  
"RTN","IBDFQB",35,0)
 S $P(^IBD(357.09,IBDFNUM,"Q",IBDFIFN,0),"^",14)=$P(IBDFNODE,"^",11)
"RTN","IBDFQB",36,0)
 ;
"RTN","IBDFQB",37,0)
 F IBDT=0:0 S IBDT=$O(IBDFARY(IBDT)) Q:'IBDT  D
"RTN","IBDFQB",38,0)
 .S ZTDTH=$S('$D(ZTDTH):$H,$D(ZTDTH)&(ZTDTH]""):ZTDTH,1:$H)
"RTN","IBDFQB",39,0)
 .S ZTRTN="DQ^IBDFQB",ZTDESC="IBD - Encounter Forms for"_IBDFNAME,ZTSAVE("^TMP(""IBDF"",$J,")="",ZTSAVE("IB*")="",ZTIO=$S($P(IBDFNODE,"^",9)]"":$P(IBDFNODE,"^",9),1:"") D ^%ZTLOAD D HOME^%ZIS
"RTN","IBDFQB",40,0)
 ;
"RTN","IBDFQB",41,0)
 ; -- after queing, delete start and stop times and add task
"RTN","IBDFQB",42,0)
 ; -- once started add start time
"RTN","IBDFQB",43,0)
 ; -- once finished add stop time, delete task no.
"RTN","IBDFQB",44,0)
 ;
"RTN","IBDFQB",45,0)
 S IBZTSK=ZTSK
"RTN","IBDFQB",46,0)
 I '$D(ZTQUEUED) D ^%ZISC S QUIT=1
"RTN","IBDFQB",47,0)
 ;
"RTN","IBDFQB",48,0)
 ;
"RTN","IBDFQB",49,0)
CLEAR ; -- Clean up variables if task is not queued
"RTN","IBDFQB",50,0)
 K ^TMP("IBDF",$J),^TMP("IB",$J)
"RTN","IBDFQB",51,0)
 ;
"RTN","IBDFQB",52,0)
 I QUIT D
"RTN","IBDFQB",53,0)
 .I $D(ZTSK),$D(ZTSK(1)) I "^1^2^"[ZTSK(1) K ZTSK
"RTN","IBDFQB",54,0)
 .S IBZTSK=$S($D(ZTSK):ZTSK,1:"")
"RTN","IBDFQB",55,0)
 ;
"RTN","IBDFQB",56,0)
 S QUIT=0
"RTN","IBDFQB",57,0)
 Q $G(IBZTSK)
"RTN","IBDFQB",58,0)
 ;
"RTN","IBDFQB",59,0)
DQ ; -- Generic entry points to edit
"RTN","IBDFQB",60,0)
 ; -- only called by jobs tasked by this routine
"RTN","IBDFQB",61,0)
 S IBDFFLD=".02" D UPDT
"RTN","IBDFQB",62,0)
 D ^IBDF1B1
"RTN","IBDFQB",63,0)
 S IBDFFLD=".03" D UPDT
"RTN","IBDFQB",64,0)
 S IBTASK="@" D TASK
"RTN","IBDFQB",65,0)
 Q
"RTN","IBDFQB",66,0)
 ;
"RTN","IBDFQB",67,0)
UPDT ; -- Update start and finish times
"RTN","IBDFQB",68,0)
 N DIE,DA,DR
"RTN","IBDFQB",69,0)
 D NOW^%DTC S IBDFX=$E(%,1,12),DA=IBDFIFN,DA(1)=IBDFNUM,DIE="^IBD(357.09,"_DA(1)_","_"""Q"""_",",DR=IBDFFLD_"///"_"^S X=IBDFX" D ^DIE Q
"RTN","IBDFQB",70,0)
 ;
"RTN","IBDFQB",71,0)
 ;
"RTN","IBDFQB",72,0)
TASK ; -- Update Task number and last date printed
"RTN","IBDFQB",73,0)
 N DA,DR,DIE
"RTN","IBDFQB",74,0)
 S DA=IBDFIFN,DA(1)=IBDFNUM,DIE="^IBD(357.09,"_DA(1)_","_"""Q"""_",",DR=".11///"_IBTASK_";.12///"_IBDT D ^DIE
"RTN","IBDFQB",75,0)
 I $D(IB1FLAG) S IB1TASK=IBTASK
"RTN","IBDFQB",76,0)
 Q
"RTN","IBDFQB",77,0)
 ;
"RTN","IBDFQB",78,0)
 ;
"RTN","IBDFQB",79,0)
EXIT K IBADDONS,IBCLN,IBDFDAY,IBDFIFN,IBDFINST,IBDFNAME,IBDFNODE,IBDFNOW,IBDFNUM,IBDFSEQ,IBDIV,IBDT,IBREPRNT,IBSRT,IBSTRTDV,IBDFDAY1,IBDFLAST,IBDFONE,IBDFQ,IBDFXX,IBZTSK,QUIT
"RTN","IBDFQB",80,0)
 I $D(ZTQUEUED) S ZTREQ="@" Q
"RTN","IBDFQB",81,0)
 D ^%ZISC
"RTN","IBDFQB",82,0)
 Q
"RTN","IBDFQB",83,0)
 ;
"RTN","IBDFQB",84,0)
 ;
"RTN","IBDFQB",85,0)
SET ; -- Set up variables needed for priniting of forms
"RTN","IBDFQB",86,0)
 S IBDFNODE=$G(^IBD(357.09,IBDFNUM,"Q",IBDFIFN,0))
"RTN","IBDFQB",87,0)
 I $P(IBDFNODE,"^",4)=""!($P(IBDFNODE,"^",5)="")!($P(IBDFNODE,"^",6)="")!($P(IBDFNODE,"^",7)="")!($P(IBDFNODE,"^",8)="")!($P(IBDFNODE,"^",9)="")!($P(IBDFNODE,"^",10)="") D  I QUIT Q
"RTN","IBDFQB",88,0)
 .I '$D(IBDFQUE) W !!,"PRINT QUEUE ABORTED.... missing required parameters!!!!" D PAUSE^VALM1
"RTN","IBDFQB",89,0)
 .S QUIT=1
"RTN","IBDFQB",90,0)
 .Q
"RTN","IBDFQB",91,0)
 I $P(IBDFNODE,"^",8)="N" D  I QUIT Q
"RTN","IBDFQB",92,0)
 .I '$D(IBDFQUE)  W !!,"PRINT QUEUE ABORTED.....not an active print job... check Special Instructions" D PAUSE^VALM1
"RTN","IBDFQB",93,0)
 .S QUIT=1
"RTN","IBDFQB",94,0)
 .Q
"RTN","IBDFQB",95,0)
 S IBSRT=$P(IBDFNODE,"^",4),SELECTBY="C",IBADDONS=$P(IBDFNODE,"^",5),IBREPRNT="",IBSTRTDV=""
"RTN","IBDFQB",96,0)
 D ENTRY Q:QUIT  D
"RTN","IBDFQB",97,0)
 .N GROUPS,IEN
"RTN","IBDFQB",98,0)
 .; -- GET PRINT MANAGER GROUPS
"RTN","IBDFQB",99,0)
 .S GROUPS=""
"RTN","IBDFQB",100,0)
 .S GROUPS($P(IBDFNODE,"^",6))="" D
"RTN","IBDFQB",101,0)
 ..S GROUPS=0 F  S GROUPS=$O(GROUPS(GROUPS)) Q:'GROUPS  D
"RTN","IBDFQB",102,0)
 ...S IEN=0 F  S IEN=$O(^IBD(357.99,GROUPS,10,IEN)) Q:'IEN  S IBCLN=+$G(^IBD(357.99,GROUPS,10,IEN,0)) S:IBCLN ^TMP("IBDF",$J,"C",IBCLN)=""
"RTN","IBDFQB",103,0)
 ...S IEN=0 F  S IEN=$O(^IBD(357.99,GROUPS,11,IEN)) Q:'IEN  S IBDIV=+$G(^IBD(357.99,GROUPS,11,IEN,0)) S:IBDIV ^TMP("IBDF",$J,"D",IBDIV)=""
"RTN","IBDFQB",104,0)
 Q
"RTN","IBDFQB",105,0)
 ;
"RTN","IBDFQB",106,0)
 ;
"RTN","IBDFQB",107,0)
ENTRY ; -- Calc date and do checks on special instructions
"RTN","IBDFQB",108,0)
 K IBDFARY
"RTN","IBDFQB",109,0)
 N IBDFNOW,IBDFINST,IBDFDATE,IBDFDAYS,IBDFCTR,IBDFQTIM
"RTN","IBDFQB",110,0)
 ;S IBDFNOW=$P($$NOW^XLFDT(),"."),IBDFINST=$P(IBDFNODE,"^",8),IBDFQTIM=$S($P(IBDFNODE,"^",13)]"":$P(IBDFNODE,"^",13),1:$E($P($$NOW^XLFDT(),".",2),1,4))
"RTN","IBDFQB",111,0)
 S IBDFNOW=$P($$NOW^XLFDT(),"."),IBDFINST=$P(IBDFNODE,"^",8),IBDFQTIM=$S($P(IBDFNODE,"^",13)]"":$P(IBDFNODE,"^",13),1:IBDFQT)
"RTN","IBDFQB",112,0)
 D:'$D(IBDFSING) ZTDTH
"RTN","IBDFQB",113,0)
 ;
"RTN","IBDFQB",114,0)
 ; -- if ignoring weekends and/or holidays, check current date
"RTN","IBDFQB",115,0)
 I IBDFINST["W" I $$WEEKEND(IBDFNOW) S QUIT=1 Q
"RTN","IBDFQB",116,0)
 I IBDFINST["H" I $$HOLIDAY(IBDFNOW) S QUIT=1 Q
"RTN","IBDFQB",117,0)
 I IBDFINST["I" I $$WEEKEND(IBDFNOW)!($$HOLIDAY(IBDFNOW)) S QUIT=1 Q
"RTN","IBDFQB",118,0)
 ;
"RTN","IBDFQB",119,0)
 ; -- find date to return - returned in IBDFARY(date) array
"RTN","IBDFQB",120,0)
 ; -- loop adds 1 day and checks if day is restricted
"RTN","IBDFQB",121,0)
 ; --     if not, it adds it as a printable day and compares it
"RTN","IBDFQB",122,0)
 ; --     with the number of printable days ahead the user wants to prn
"RTN","IBDFQB",123,0)
 S IBDFDATE=IBDFNOW,IBDFCTR=0,IBDFDAYS=+$P(IBDFNODE,"^",7)
"RTN","IBDFQB",124,0)
 F  Q:IBDFCTR=IBDFDAYS  D
"RTN","IBDFQB",125,0)
 .S IBDFDATE=$$FMADD^XLFDT(IBDFDATE,1)
"RTN","IBDFQB",126,0)
 .I IBDFINST["W" Q:$$WEEKEND(IBDFDATE) 
"RTN","IBDFQB",127,0)
 .I IBDFINST["H" Q:$$HOLIDAY(IBDFDATE)
"RTN","IBDFQB",128,0)
 .I IBDFINST["I" Q:$$WEEKEND(IBDFDATE)!($$HOLIDAY(IBDFDATE))
"RTN","IBDFQB",129,0)
 .S IBDFCTR=IBDFCTR+1
"RTN","IBDFQB",130,0)
 S IBDFARY(IBDFDATE)=""
"RTN","IBDFQB",131,0)
 Q
"RTN","IBDFQB",132,0)
 ;
"RTN","IBDFQB",133,0)
WEEKEND(DATE) ;
"RTN","IBDFQB",134,0)
 ; -- DATE (defaulted to current date if not passed)
"RTN","IBDFQB",135,0)
 ; -- output = 1 if date is a weekend
"RTN","IBDFQB",136,0)
 I '$G(DATE) S DATE=$P($$NOW^XLFDT(),".")
"RTN","IBDFQB",137,0)
 I 60[$$DOW^XLFDT(DATE,1) Q 1
"RTN","IBDFQB",138,0)
 Q 0
"RTN","IBDFQB",139,0)
 ;
"RTN","IBDFQB",140,0)
HOLIDAY(DATE) ;
"RTN","IBDFQB",141,0)
 ; -- DATE (defaulted to current date if not passed)
"RTN","IBDFQB",142,0)
 ; -- output = 1 if date is a holiday
"RTN","IBDFQB",143,0)
 I '$G(DATE) S DATE=$P($$NOW^XLFDT(),".")
"RTN","IBDFQB",144,0)
 N X,Y,DIC
"RTN","IBDFQB",145,0)
 S DIC="^HOLIDAY(",DIC(0)="",X=+$P(DATE,".")
"RTN","IBDFQB",146,0)
 D ^DIC I +Y>0 Q 1
"RTN","IBDFQB",147,0)
 Q 0
"RTN","IBDFQB",148,0)
ZTDTH ;  -- Set up the variable ZTDTH to pass the queue date time of the
"RTN","IBDFQB",149,0)
 ;     queued job.
"RTN","IBDFQB",150,0)
 N IBDFJQ
"RTN","IBDFQB",151,0)
 I IBDFQT=2400!(IBDFQT=0000) D  G DTIME
"RTN","IBDFQB",152,0)
 .I IBDFQTIM=2400 S IBDFQTIM="0000"
"RTN","IBDFQB",153,0)
 .I IBDFQTIM=IBDFQT S IBDFJQ=IBDFQDT Q
"RTN","IBDFQB",154,0)
 .S IBDFJQ=IBDFQD_"."_IBDFQTIM
"RTN","IBDFQB",155,0)
 I IBDFQTIM>IBDFQT S IBDFJQ=IBDFQD_"."_IBDFQTIM
"RTN","IBDFQB",156,0)
 I IBDFQTIM<IBDFQT S X1=IBDFQDT,X2=1 D C^%DTC S IBDFJQ=$P(X,".")_"."_IBDFQTIM
"RTN","IBDFQB",157,0)
 I IBDFQTIM=IBDFQT S IBDFJQ=IBDFQDT
"RTN","IBDFQB",158,0)
DTIME I IBDFJQ]"" S ZTDTH=$$FMTH^XLFDT(IBDFJQ)
"RTN","IBDFQB",159,0)
 Q
"RTN","IBDFQEA")
0^8^B29652832
"RTN","IBDFQEA",1,0)
IBDFQEA ;ALB/CJM/MAF - ENCOUNTER FORM - BUILD FORM(editing action for group's selections list) ;JUN 16,1995
"RTN","IBDFQEA",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**15**;APR 24, 1997
"RTN","IBDFQEA",3,0)
 ;
"RTN","IBDFQEA",4,0)
EDIT ;allows editing of an existing selection
"RTN","IBDFQEA",5,0)
 D FULL^VALM1
"RTN","IBDFQEA",6,0)
 N SEL,SUB,SLCTN,SC,NODE,OQTY,NQTY
"RTN","IBDFQEA",7,0)
 D EN^VALM2($G(XQORNOD(0)),"S")
"RTN","IBDFQEA",8,0)
 S SEL="" F  S SEL=$O(VALMY(SEL)) Q:'SEL  D
"RTN","IBDFQEA",9,0)
 .W !,"Editing Entry #",SEL
"RTN","IBDFQEA",10,0)
 .S SLCTN=$P($G(^TMP("SELIDX",$J,SEL)),"^",3) Q:'SLCTN
"RTN","IBDFQEA",11,0)
 .S NODE=$G(^IBE(357.3,SLCTN,0))
"RTN","IBDFQEA",12,0)
 .S IBGRP=$P(NODE,"^",4),ORD=$P(NODE,"^",5)
"RTN","IBDFQEA",13,0)
 .;re-index the record, to insure it is good                             
"RTN","IBDFQEA",14,0)
 .K DIK,DA S DIK="^IBE(357.3,",DA=SLCTN D IX^DIK K DIK
"RTN","IBDFQEA",15,0)
 .;edit the order of the selection - also, for placeholders, the text, then quit
"RTN","IBDFQEA",16,0)
 .I $P(NODE,"^",2) S DA=SLCTN,DIE=357.3,DR="[IBDF EDIT PLACE HOLDER]" D ^DIE K DIE,DA,DR Q
"RTN","IBDFQEA",17,0)
 .S DA=SLCTN,DIE=357.3,DR=".05;I '$P($G(^IBE(357.6,$P($G(^IBE(357.2,+IBLIST,0)),""^"",11),16)),""^"",8) S Y=""@99"";S OQTY=$P(^IBE(357.3,DA,0),""^"",9);.09;S NQTY=X;@99;S CONT=1" S CONT=0 D ^DIE K DIE,DA,DR
"RTN","IBDFQEA",18,0)
 .;add any missing subcolumns
"RTN","IBDFQEA",19,0)
 .S SC=0 F SC=1:1:8 I $G(IBLIST("SCTYPE",SC))=1 I '$D(^IBE(357.3,SLCTN,1,"B",SC)) D
"RTN","IBDFQEA",20,0)
 ..K DA,DO,DINUM,DIC
"RTN","IBDFQEA",21,0)
 ..N DLAYGO
"RTN","IBDFQEA",22,0)
 ..S DIC="^IBE(357.3,"_SLCTN_",1,",DA(1)=SLCTN,X=SC,DIC(0)="L",DLAYGO=357.3 D FILE^DICN
"RTN","IBDFQEA",23,0)
 .;now allow the user to edit editable subcolumns - CONT=0 means the user up-arrowed out, so stop
"RTN","IBDFQEA",24,0)
 .I CONT S SUB=0 F  S SUB=$O(^IBE(357.3,SLCTN,1,SUB)) Q:'SUB  D
"RTN","IBDFQEA",25,0)
 ..S SC=+$G(^IBE(357.3,SLCTN,1,SUB,0)) I $G(IBLIST("SCTYPE",SC))=1,$G(IBLIST("SCPIECE",SC)),$G(IBLIST("SCEDITABLE",SC)) D
"RTN","IBDFQEA",26,0)
 ...I $G(^IBE(357.3,SLCTN,1,0))="" S ^IBE(357.3,SLCTN,1,0)="^357.31IA^"
"RTN","IBDFQEA",27,0)
 ...S DIE="^IBE(357.3,"_SLCTN_",1,",DA(1)=SLCTN,DA=SUB,DR=".02;S CONT=1",CONT=0 W !!,"Editing Subcolumn "_SC_": Header="_IBLIST("SCHDR",SC)
"RTN","IBDFQEA",28,0)
 ...I $G(OQTY)'=$G(NQTY) S IBVAL=$P($G(^IBE(357.3,SLCTN,1,SUB,0)),"^",2),IBVAL=$P(IBVAL," x "_OQTY)_$S(NQTY>1:" x "_NQTY,1:""),DR=".02////^S X=IBVAL;I;"_DR
"RTN","IBDFQEA",29,0)
 ...D ^DIE K DIE,DA,DR,IBVAL I 'CONT Q
"RTN","IBDFQEA",30,0)
 .D NARR^IBDF4 W !
"RTN","IBDFQEA",31,0)
 .D TERM^IBDF4 W !
"RTN","IBDFQEA",32,0)
 .D CODES^IBDF4A W !
"RTN","IBDFQEA",33,0)
 ;
"RTN","IBDFQEA",34,0)
EDITEXIT ;
"RTN","IBDFQEA",35,0)
 G EXIT
"RTN","IBDFQEA",36,0)
DELETE ;allows the user to select selections to delete
"RTN","IBDFQEA",37,0)
 D FULL^VALM1
"RTN","IBDFQEA",38,0)
 N SEL
"RTN","IBDFQEA",39,0)
 D EN^VALM2($G(XQORNOD(0)))
"RTN","IBDFQEA",40,0)
 K DA
"RTN","IBDFQEA",41,0)
 S SEL="" F  S SEL=$O(VALMY(SEL)) Q:'SEL  D
"RTN","IBDFQEA",42,0)
 .S DIK="^IBE(357.3,",DA=$P($G(^TMP("SELIDX",$J,SEL)),"^",3) Q:'DA
"RTN","IBDFQEA",43,0)
 .S NODE=$G(^IBE(357.3,DA,0))
"RTN","IBDFQEA",44,0)
 .S IBGRP=$P(NODE,"^",4),ORD=$P(NODE,"^",5)
"RTN","IBDFQEA",45,0)
 .Q:'$$RUSURE^IBDFU5("Selection #"_SEL)
"RTN","IBDFQEA",46,0)
 .D ^DIK
"RTN","IBDFQEA",47,0)
 .D KILL^VALM10(SEL)
"RTN","IBDFQEA",48,0)
 K DIK,DA
"RTN","IBDFQEA",49,0)
 G EXIT
"RTN","IBDFQEA",50,0)
ADDSLCTN ;allows the user to add a selection to the selection group
"RTN","IBDFQEA",51,0)
 N QUIT,SUB
"RTN","IBDFQEA",52,0)
 ;
"RTN","IBDFQEA",53,0)
 D FULL^VALM1
"RTN","IBDFQEA",54,0)
 S IBRTN=IBLIST("RTN")
"RTN","IBDFQEA",55,0)
 I $G(IBLIST("CLRM")) S IBLIST("EDITING CLRM")=1
"RTN","IBDFQEA",56,0)
 D RTNDSCR^IBDFU1B(.IBRTN)
"RTN","IBDFQEA",57,0)
 I IBRTN("ACTION")'=3 D NOGOOD^IBDF4 G ADDEXIT
"RTN","IBDFQEA",58,0)
 K @IBRTN("DATA_LOCATION")
"RTN","IBDFQEA",59,0)
 S QUIT=0 F  D  G:QUIT EXIT  W !,"Now for another!",!
"RTN","IBDFQEA",60,0)
 .I '$$DORTN^IBDFU1B(.IBRTN) S QUIT=1 D NOGOOD^IBDF4 Q
"RTN","IBDFQEA",61,0)
 .I '$D(@IBRTN("DATA_LOCATION")) S QUIT=1 Q
"RTN","IBDFQEA",62,0)
 .S DIC="^IBE(357.4,",DIC(0)="AEMN",DIC("S")="I $P(^IBE(357.4,+Y,0),""^"",3)=IBLIST" D ^DIC K DIC S:X="^" QUIT=1 Q:QUIT  S IBGRP=+Y I Y<0 D  Q:QUIT=1
"RTN","IBDFQEA",63,0)
 ..W !!,"A SELECTION GROUP HEADER IS REQUIRED.... The selection will not be added if none is provided....Enter '??' for a list of choices.",!!
"RTN","IBDFQEA",64,0)
 ..S DIC="^IBE(357.4,",DIC(0)="AEMN",DIC("S")="I $P(^IBE(357.4,+Y,0),""^"",3)=IBLIST" D ^DIC K DIC S IBGRP=+Y I Y<0 S QUIT=1 Q
"RTN","IBDFQEA",65,0)
 .D ADDREC^IBDF4(.QUIT) ;edits and adds the selection
"RTN","IBDFQEA",66,0)
 .K @IBRTN("DATA_LOCATION")
"RTN","IBDFQEA",67,0)
ADDEXIT ;
"RTN","IBDFQEA",68,0)
 G EXIT
"RTN","IBDFQEA",69,0)
ADDBLANK ;allows the user to add a dummy selection to the selection group
"RTN","IBDFQEA",70,0)
 ;i.e., a place holder that will not actually print a selection
"RTN","IBDFQEA",71,0)
 ;
"RTN","IBDFQEA",72,0)
 ;
"RTN","IBDFQEA",73,0)
 N IBGRP
"RTN","IBDFQEA",74,0)
 D FULL^VALM1
"RTN","IBDFQEA",75,0)
 K DIC S DIC="^IBE(357.4,",DIC(0)="AEMN",DIC("S")="I $D(^IBE(357.3,""APO"",IBLIST,+Y))" D ^DIC S IBGRP=+Y K DIC
"RTN","IBDFQEA",76,0)
 I ('$D(DIRUT))&(Y>0) D ADD^IBDF4A
"RTN","IBDFQEA",77,0)
 D INIT^IBDFQSL1
"RTN","IBDFQEA",78,0)
 S VALMBCK="R"
"RTN","IBDFQEA",79,0)
 Q
"RTN","IBDFQEA",80,0)
FORMAT ;allows the user to format all of the selections in the group in mass
"RTN","IBDFQEA",81,0)
 ;
"RTN","IBDFQEA",82,0)
 D FORMAT^IBDF9A1
"RTN","IBDFQEA",83,0)
 G EXIT
"RTN","IBDFQEA",84,0)
 ;
"RTN","IBDFQEA",85,0)
GRPDEL ;  -- Group Delete
"RTN","IBDFQEA",86,0)
 D FULL^VALM1
"RTN","IBDFQEA",87,0)
 N GRP
"RTN","IBDFQEA",88,0)
 S DIC="^IBE(357.4,",DIC(0)="AEMN",DIC("S")="I $P(^IBE(357.4,+Y,0),""^"",3)=IBLIST" D ^DIC K DIC S IBGRP=+Y I Y<0 G EXIT
"RTN","IBDFQEA",89,0)
 S GRP=+Y
"RTN","IBDFQEA",90,0)
 Q:'$$RUSURE^IBDFU5($P($G(^IBE(357.4,GRP,0)),"^"))
"RTN","IBDFQEA",91,0)
 I GRP D DELSLCTN^IBDF3 K DA S DIK="^IBE(357.4,",DA=GRP D ^DIK K DIK
"RTN","IBDFQEA",92,0)
 D IDXGRP^IBDF3
"RTN","IBDFQEA",93,0)
 S VALMBCK="R"
"RTN","IBDFQEA",94,0)
 D EXIT Q
"RTN","IBDFQEA",95,0)
 ;
"RTN","IBDFQEA",96,0)
GROUPADD ;  -- Add a new group to the selection list and to file 357.4.
"RTN","IBDFQEA",97,0)
 D FULL^VALM1
"RTN","IBDFQEA",98,0)
 N NAME,QUIT,GRP
"RTN","IBDFQEA",99,0)
 S QUIT=0
"RTN","IBDFQEA",100,0)
 F  D  D IDXGRP^IBDF3 G:QUIT EXIT
"RTN","IBDFQEA",101,0)
 .K DIR S DIR(0)="357.4,.01O",DIR("B")="" D ^DIR K DIR I $D(DIRUT) S QUIT=1 Q
"RTN","IBDFQEA",102,0)
 .S NAME=Y
"RTN","IBDFQEA",103,0)
 .K DIC,DD,DO,DINUM S DIC="^IBE(357.4,",X=NAME,DIC(0)=""
"RTN","IBDFQEA",104,0)
 .D FILE^DICN K DIC,DIE,DA
"RTN","IBDFQEA",105,0)
 .I +Y<0 W !,"Unable to create a new record!" D PAUSE^VALM1 S QUIT=1 Q
"RTN","IBDFQEA",106,0)
 .I +Y>0 K DA S DA=+Y,DIE="^IBE(357.4,",DIE("NO^")="Any value",DR=".02;.04;.03////"_IBLIST D ^DIE K DIC,DIE,DR,DA
"RTN","IBDFQEA",107,0)
 .W !,"Now Another!",!
"RTN","IBDFQEA",108,0)
 G EXIT
"RTN","IBDFQEA",109,0)
 ;
"RTN","IBDFQEA",110,0)
GRPEDIT ;
"RTN","IBDFQEA",111,0)
 D FULL^VALM1
"RTN","IBDFQEA",112,0)
 N DIC,DIE,DA,DR,GRP
"RTN","IBDFQEA",113,0)
 S DIC="^IBE(357.4,",DIC(0)="AEMN",DIC("S")="I $P(^IBE(357.4,+Y,0),""^"",3)=IBLIST" D ^DIC K DIC S IBGRP=+Y I Y<0 G EXIT
"RTN","IBDFQEA",114,0)
 S GRP=+Y
"RTN","IBDFQEA",115,0)
 S (DIC,DIE)="^IBE(357.4,",DA=GRP,DR=".01;.02;.04" D ^DIE
"RTN","IBDFQEA",116,0)
 I '$D(DA) D DELSLCTN^IBDF3
"RTN","IBDFQEA",117,0)
 D IDXGRP^IBDF3
"RTN","IBDFQEA",118,0)
 S VALMBCK="R"
"RTN","IBDFQEA",119,0)
 D EXIT Q
"RTN","IBDFQEA",120,0)
 Q
"RTN","IBDFQEA",121,0)
 ;
"RTN","IBDFQEA",122,0)
EXIT D INIT^IBDFQSL1 S VALMBCK="R"
"RTN","IBDFQEA",123,0)
 Q
"RTN","IBDFQEA",124,0)
GRPRESEQ ;  -- Resequence numerically or alphabetically a group
"RTN","IBDFQEA",125,0)
 ;     within a block.
"RTN","IBDFQEA",126,0)
 D FULL^VALM1
"RTN","IBDFQEA",127,0)
 N DIC,GRP,IBGRP,IBGRUP
"RTN","IBDFQEA",128,0)
 Q:$$LSTDSCR2^IBDFU1(.IBLIST) 1
"RTN","IBDFQEA",129,0)
GRP1 S DIC="^IBE(357.4,",DIC(0)="AEMN",DIC("S")="I $P(^IBE(357.4,+Y,0),""^"",3)=IBLIST" D ^DIC K DIC S IBGRUP(+Y)=+Y
"RTN","IBDFQEA",130,0)
 I Y<0&($D(IBGRUP)) D SEQUENCE^IBDF4,EXIT Q
"RTN","IBDFQEA",131,0)
 I Y<0&('$D(IBGRUP)) G EXIT
"RTN","IBDFQEA",132,0)
 G GRP1
"RTN","IBDFQEA",133,0)
GRPRSEQ1 ;  -- Resequence all groups chosen
"RTN","IBDFQEA",134,0)
 N IBGROUP,IBFLAG
"RTN","IBDFQEA",135,0)
 S IBGROUP=0,IBFLAG=1
"RTN","IBDFQEA",136,0)
 F  S IBGROUP=$O(IBGRP(IBGROUP)) Q:'IBGROUP  D SEQUENCE^IBDF4
"RTN","IBDFQEA",137,0)
 Q
"RTN","IBDFU1")
0^2^B30221560
"RTN","IBDFU1",1,0)
IBDFU1 ;ALB/CJM - AICS get list descriptions ;NOV 16,1992
"RTN","IBDFU1",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**15**;APR 24, 1997
"RTN","IBDFU1",3,0)
 ;
"RTN","IBDFU1",4,0)
LSTDESCR(IBLIST) ;parses the IBLIST record pointed to by IBBLK and puts the
"RTN","IBDFU1",5,0)
 ;descripition in IBLIST - should be called by reference
"RTN","IBDFU1",6,0)
 ;returns 1 if list description not found
"RTN","IBDFU1",7,0)
 N NODE,J,C
"RTN","IBDFU1",8,0)
 S NODE=$G(^IBE(357.2,IBLIST,0))
"RTN","IBDFU1",9,0)
 Q:NODE="" 1
"RTN","IBDFU1",10,0)
 S IBLIST("NAME")=$P(NODE,"^",1)
"RTN","IBDFU1",11,0)
 S IBLIST("BLK")=$P(NODE,"^",2)
"RTN","IBDFU1",12,0)
 S IBLIST("DSCHDR")=$P(NODE,"^",4)
"RTN","IBDFU1",13,0)
 S IBLIST("HDR")=$P(NODE,"^",5)
"RTN","IBDFU1",14,0)
 S IBLIST("DHDR")=$P(NODE,"^",6)
"RTN","IBDFU1",15,0)
 S IBLIST("SEP")=$P(NODE,"^",7) D
"RTN","IBDFU1",16,0)
 .;how to separate subcolumns
"RTN","IBDFU1",17,0)
 .I IBLIST("SEP")=1 S IBLIST("SEP")=" ",IBLIST("SEP1")=" ",IBLIST("SEP2")="" Q
"RTN","IBDFU1",18,0)
 .I IBLIST("SEP")=2 S IBLIST("SEP")="  ",IBLIST("SEP1")="  ",IBLIST("SEP2")="" Q
"RTN","IBDFU1",19,0)
 .I IBLIST("SEP")=3 S IBLIST("SEP")="|",IBLIST("SEP1")="|",IBLIST("SEP2")="" Q
"RTN","IBDFU1",20,0)
 .I IBLIST("SEP")=4 S IBLIST("SEP")=" | ",IBLIST("SEP1")=" |",IBLIST("SEP2")=" " Q
"RTN","IBDFU1",21,0)
 ;
"RTN","IBDFU1",22,0)
 S IBLIST("BTWN")=$P(NODE,"^",8)
"RTN","IBDFU1",23,0)
 S IBLIST("DGHDR")=$P(NODE,"^",9)
"RTN","IBDFU1",24,0)
 S IBLIST("RTN")=$P(NODE,"^",11)
"RTN","IBDFU1",25,0)
 S IBLIST("INPUT_RTN")=$S(IBLIST("RTN"):$P($G(^IBE(357.6,IBLIST("RTN"),0)),"^",13),1:"")
"RTN","IBDFU1",26,0)
 S IBLIST("ULSLCTNS")=$P(NODE,"^",12)
"RTN","IBDFU1",27,0)
 S IBLIST("NUMCOL")=$P(NODE,"^",13)
"RTN","IBDFU1",28,0)
 S IBLIST("DYNAMIC")=+$P(NODE,"^",14)
"RTN","IBDFU1",29,0)
 S IBLIST("OVERFLOW")=+$P(NODE,"^",15)
"RTN","IBDFU1",30,0)
 S IBLIST("OTHER")=$P(NODE,"^",16)
"RTN","IBDFU1",31,0)
 S IBLIST("CLRMLIST")=$P(NODE,"^",19)
"RTN","IBDFU1",32,0)
 S IBLIST("CLRM")=+$P($G(^IBE(357.6,+$P(NODE,"^",11),0)),"^",20)
"RTN","IBDFU1",33,0)
 S (IBLIST("NAR_READ"),IBLIST("NAR_PRINT"),IBLIST("CODE_READ"),IBLIST("CODE_PRINT"))=0
"RTN","IBDFU1",34,0)
 I $P(NODE,"^",17)=1 S IBLIST("NAR_PRINT")=1,IBLIST("CODE_PRINT")=0
"RTN","IBDFU1",35,0)
 I $P(NODE,"^",17)=2 S IBLIST("NAR_PRINT")=0,IBLIST("CODE_PRINT")=1
"RTN","IBDFU1",36,0)
 I $P(NODE,"^",17)=3 S IBLIST("NAR_PRINT")=1,IBLIST("CODE_PRINT")=1
"RTN","IBDFU1",37,0)
 I $P(NODE,"^",18)=1 S IBLIST("NAR_READ")=1,IBLIST("CODE_READ")=0
"RTN","IBDFU1",38,0)
 I $P(NODE,"^",18)=2 S IBLIST("NAR_READ")=0,IBLIST("CODE_READ")=1
"RTN","IBDFU1",39,0)
 I $P(NODE,"^",18)=3 S IBLIST("NAR_READ")=1,IBLIST("CODE_READ")=1
"RTN","IBDFU1",40,0)
 ;
"RTN","IBDFU1",41,0)
 ;go to the package interface
"RTN","IBDFU1",42,0)
 S NODE="" S:IBLIST("RTN") NODE=$G(^IBE(357.6,IBLIST("RTN"),16))
"RTN","IBDFU1",43,0)
 S IBLIST("NAR_DATATYPE")=$P(NODE,"^",2),IBLIST("NAR_HDR")=$P(NODE,"^",3),IBLIST("CODE_DATATYPE")=$P(NODE,"^",6),IBLIST("CODE_HDR")=$P(NODE,"^",7)
"RTN","IBDFU1",44,0)
 ;
"RTN","IBDFU1",45,0)
 S IBLIST("SC0")=IBLIST("DYNAMIC")&IBLIST("INPUT_RTN")
"RTN","IBDFU1",46,0)
 ;get column information
"RTN","IBDFU1",47,0)
 F J=1:1:4 S C=$O(^IBE(357.2,IBLIST,1,"B",J,"")) S NODE=$S('C:"",1:$G(^IBE(357.2,IBLIST,1,C,0))) S IBLIST("Y",J)=$P(NODE,"^",2),IBLIST("X",J)=$P(NODE,"^",3),IBLIST("H",J)=$P(NODE,"^",4)
"RTN","IBDFU1",48,0)
 ;get subcolumn information
"RTN","IBDFU1",49,0)
 I IBLIST("SC0") S IBLIST("SCHDR",0)="",IBLIST("SCW",0)=4,IBLIST("SCTYPE",0)=1,IBLIST("SCPIECE",0)=0,IBLIST("SCEDITABLE",0)=0,IBLIST("NOUL",0)=0
"RTN","IBDFU1",50,0)
 F J=1:1:8 S C=$O(^IBE(357.2,IBLIST,2,"B",J,"")) S NODE=$S('C:"",1:$G(^IBE(357.2,IBLIST,2,C,0))) D
"RTN","IBDFU1",51,0)
 .S IBLIST("SCTYPE",J)=$P(NODE,"^",4) Q:'IBLIST("SCTYPE",J)
"RTN","IBDFU1",52,0)
 .S IBLIST("SCHDR",J)=$P(NODE,"^",2) S:IBLIST("SCHDR",J)=" " IBLIST("SCHDR",J)="" S IBLIST("SCW",J)=$P(NODE,"^",3)
"RTN","IBDFU1",53,0)
 .I IBLIST("SCTYPE",J)=1 S IBLIST("SCPIECE",J)=$P(NODE,"^",5),IBLIST("SCEDITABLE",J)=$P(NODE,"^",7),IBLIST("NOUL",J)=$P(NODE,"^",8) D
"RTN","IBDFU1",54,0)
 ..I IBLIST("SCPIECE",J)=1,IBLIST("RTN") S IBLIST("SCEDITABLE",J)=$S($P($G(^IBE(357.6,IBLIST("RTN"),2)),"^",2)="":1,1:0)
"RTN","IBDFU1",55,0)
 .I IBLIST("SCTYPE",J)=2 D
"RTN","IBDFU1",56,0)
 ..S IBLIST("SCSYMBOL",J)=$P(NODE,"^",6)
"RTN","IBDFU1",57,0)
 ..S IBLIST("NOUL",J)=$P(NODE,"^",8),IBLIST("ROUTINE",J)=""
"RTN","IBDFU1",58,0)
 ..S IBLIST("QLFR",J)=$P(NODE,"^",9),IBLIST("RULE",J)=+$P(NODE,"^",10)
"RTN","IBDFU1",59,0)
 ..I 'IBLIST("SCSYMBOL",J) S IBLIST("SCSYMBOL",I)="",IBLIST("SCW",J)=0 Q
"RTN","IBDFU1",60,0)
 ..S NODE=$G(^IBE(357.91,IBLIST("SCSYMBOL",J),0))
"RTN","IBDFU1",61,0)
 ..I '$P(NODE,"^",4) S IBLIST("SCSYMBOL",J)=$P(NODE,"^",2),IBLIST("SCW",J)=$L(IBLIST("SCSYMBOL",J)) D  Q
"RTN","IBDFU1",62,0)
 ...I $L($G(IBLIST("SCHDR",J)))>IBLIST("SCW",J) S IBLIST("SCW",J)=$L(IBLIST("SCHDR",J)),IBLIST("SCSYMBOL",J)=$J($$CJ^XLFSTR(IBLIST("SCSYMBOL",J),IBLIST("SCW",J)),IBLIST("SCW",J))
"RTN","IBDFU1",63,0)
 ..;may need to call a special procedure if printing to a PCL printer
"RTN","IBDFU1",64,0)
 ..I $E($P(NODE,"^"),1,6)="BUBBLE" D
"RTN","IBDFU1",65,0)
 ...S IBLIST("ROUTINE",J)="BUBBLE",IBLIST("SCW",J)=3,IBLIST("SCSYMBOL",J)="   "
"RTN","IBDFU1",66,0)
 ...I $L(IBLIST("SCHDR",J))>IBLIST("SCW",J) S IBLIST("SCW",J)=$L(IBLIST("SCHDR",J)),IBLIST("SCSYMBOL",J)=$J(" ",IBLIST("SCW",J))
"RTN","IBDFU1",67,0)
 Q 0
"RTN","IBDFU1",68,0)
 ;
"RTN","IBDFU1",69,0)
LSTDSCR2(IBLIST) ;parses the IBLIST record pointed to by IBBLK and puts the
"RTN","IBDFU1",70,0)
 ;descripition in IBLIST(just what's needed while editing the selection
"RTN","IBDFU1",71,0)
 ;list, not for printing it) in- should be called by reference
"RTN","IBDFU1",72,0)
 ;returns 1 if list description not found
"RTN","IBDFU1",73,0)
 N NODE,J,C
"RTN","IBDFU1",74,0)
 S NODE=$G(^IBE(357.2,IBLIST,0))
"RTN","IBDFU1",75,0)
 Q:NODE="" 1
"RTN","IBDFU1",76,0)
 S IBLIST("RTN")=$P(NODE,"^",11)
"RTN","IBDFU1",77,0)
 S IBLIST("DYNAMIC")=+$P(NODE,"^",14)
"RTN","IBDFU1",78,0)
 S IBLIST("BTWN")=$P(NODE,"^",8)
"RTN","IBDFU1",79,0)
 S IBLIST("CLRMLIST")=$P(NODE,"^",19)
"RTN","IBDFU1",80,0)
 S IBLIST("CLRM")=+$P($G(^IBE(357.6,+$P(NODE,"^",11),0)),"^",20)
"RTN","IBDFU1",81,0)
 ;get subcolumn information
"RTN","IBDFU1",82,0)
 F J=1:1:8 S C=$O(^IBE(357.2,IBLIST,2,"B",J,"")) S NODE=$S('C:"",1:$G(^IBE(357.2,IBLIST,2,C,0))) D
"RTN","IBDFU1",83,0)
 .Q:NODE=""  S IBLIST("SCTYPE",J)=$P(NODE,"^",4) Q:'IBLIST("SCTYPE",J)
"RTN","IBDFU1",84,0)
 .S IBLIST("SCHDR",J)=$P(NODE,"^",2),IBLIST("SCW",J)=$P(NODE,"^",3)
"RTN","IBDFU1",85,0)
 .I IBLIST("SCTYPE",J)=1 S IBLIST("SCPIECE",J)=$P(NODE,"^",5),IBLIST("SCEDITABLE",J)=$P(NODE,"^",7) I IBLIST("SCPIECE",J)=1,IBLIST("RTN") S IBLIST("SCEDITABLE",J)=$S($P($G(^IBE(357.6,IBLIST("RTN"),2)),"^",2)="":1,1:0)
"RTN","IBDFU1",86,0)
 Q 0
"RTN","IBDFU1",87,0)
 ;
"RTN","IBDFU1",88,0)
SCDESCR(LIST,CWIDTH) ;computes the offsets for each subcolumn and
"RTN","IBDFU1",89,0)
 ;computes the column width (CWIDTH)
"RTN","IBDFU1",90,0)
 N I,SCHDR,CHDR,W,FLAG
"RTN","IBDFU1",91,0)
 ;CHDR will be the line with all the subcolumn headers
"RTN","IBDFU1",92,0)
 S CWIDTH=LINE+$L($P(LIST("SEP"),"|",2))
"RTN","IBDFU1",93,0)
 S CHDR="",FLAG=0
"RTN","IBDFU1",94,0)
 F I=1-LIST("SC0"):1:8 D
"RTN","IBDFU1",95,0)
 .I (LIST("SCTYPE",I)'=1)&(LIST("SCTYPE",I)'=2) S LIST("SCTYPE",I)="" Q
"RTN","IBDFU1",96,0)
 .I 'LIST("SCW",I) S LIST("SCTYPE",I)="" Q
"RTN","IBDFU1",97,0)
 .I LIST("SCHDR",I)'="" S FLAG=1,LIST("SCHDR",I)=$E(LIST("SCHDR",I),1,LIST("SCW",I))
"RTN","IBDFU1",98,0)
 .S LIST("SCOS",I)=CWIDTH+((LIST("SCW",I)-$L(LIST("SCHDR",I)))\2)
"RTN","IBDFU1",99,0)
 .S CWIDTH=CWIDTH+LIST("SCW",I)+$L(LIST("SEP"))
"RTN","IBDFU1",100,0)
 .S SCHDR=LIST("SCHDR",I)
"RTN","IBDFU1",101,0)
 .S W=$L(SCHDR)
"RTN","IBDFU1",102,0)
 .S SCHDR=$$PADRIGHT^IBDFU($J(SCHDR,W+((LIST("SCW",I)-W)\2)),LIST("SCW",I))
"RTN","IBDFU1",103,0)
 .S:CHDR'="" CHDR=CHDR_$J("",$L(LIST("SEP")))
"RTN","IBDFU1",104,0)
 .S CHDR=CHDR_SCHDR
"RTN","IBDFU1",105,0)
 ;
"RTN","IBDFU1",106,0)
 ;calculate the column width
"RTN","IBDFU1",107,0)
 S CWIDTH=CWIDTH-$L($P(LIST("SEP"),"|"))
"RTN","IBDFU1",108,0)
 ;
"RTN","IBDFU1",109,0)
 ;if there were no subcolumn headers then that line is empty, don't print
"RTN","IBDFU1",110,0)
 I 'FLAG S LIST("CHDR")="" Q
"RTN","IBDFU1",111,0)
 S LIST("CHDR")=LIST("SEP2")_CHDR
"RTN","IBDFU1",112,0)
 Q
"RTN","IBDFU2")
0^9^B27823065
"RTN","IBDFU2",1,0)
IBDFU2 ;ALB/CJM - ENCOUNTER FORM - BUILD FORM(copying blocks) ; 08-JAN-1993
"RTN","IBDFU2",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**15**;APR 24, 1997
"RTN","IBDFU2",3,0)
 ;
"RTN","IBDFU2",4,0)
COPYBLK(OLDBLOCK,IBFORM,FROMFILE,TOFILE,ROW,COL,TKORDER,NAME,RECMPILE) ;copys OLDBLOCK in FROMFILE to IBFORM in TOFILE
"RTN","IBDFU2",5,0)
 ;makes the new block part of IBFORM if defined
"RTN","IBDFU2",6,0)
 ;places block at (ROW,COL) if defined
"RTN","IBDFU2",7,0)
 ;sets TOOL KIT ORDER TKORDER if defined and >0
"RTN","IBDFU2",8,0)
 ;sets the block name to NAME if defined
"RTN","IBDFU2",9,0)
 ;returns the ien of the new copy
"RTN","IBDFU2",10,0)
 ;RECMPILE means don't copy compiled block
"RTN","IBDFU2",11,0)
 ;
"RTN","IBDFU2",12,0)
 Q:(FROMFILE'=357.1)&(FROMFILE'=358.1) ""
"RTN","IBDFU2",13,0)
 Q:(TOFILE'=357.1)&(TOFILE'=358.1) ""
"RTN","IBDFU2",14,0)
 N NODE,LIST,FLD,LINE,TEXT,NEWBLOCK,FROM,TO,SUB,I
"RTN","IBDFU2",15,0)
 S NEWBLOCK=""
"RTN","IBDFU2",16,0)
 S NODE=$G(^IBE(FROMFILE,OLDBLOCK,0)) Q:NODE="" ""
"RTN","IBDFU2",17,0)
 S $P(NODE,"^",2)=$G(IBFORM)
"RTN","IBDFU2",18,0)
 S:$G(NAME)="" NAME=$P(NODE,"^")
"RTN","IBDFU2",19,0)
 S RECMPILE=+$G(RECMPILE)
"RTN","IBDFU2",20,0)
 ;there must be a name
"RTN","IBDFU2",21,0)
 Q:NAME="" ""
"RTN","IBDFU2",22,0)
 S $P(NODE,"^")=NAME
"RTN","IBDFU2",23,0)
 I $D(ROW),(ROW=+ROW) S $P(NODE,"^",4)=ROW
"RTN","IBDFU2",24,0)
 I $D(COL),(COL=+COL) S $P(NODE,"^",5)=COL
"RTN","IBDFU2",25,0)
 S:$D(TKORDER) $P(NODE,"^",14)=$S(TKORDER:TKORDER,1:"")
"RTN","IBDFU2",26,0)
 K DIC,DO,DD,DINUM S DIC="^IBE("_TOFILE_",",X=NAME,DIC(0)=""
"RTN","IBDFU2",27,0)
 D FILE^DICN K DIC,DIE,DA
"RTN","IBDFU2",28,0)
 S NEWBLOCK=$S(+Y<0:"",1:+Y)
"RTN","IBDFU2",29,0)
 Q:'NEWBLOCK ""
"RTN","IBDFU2",30,0)
 S ^IBE(TOFILE,NEWBLOCK,0)=NODE
"RTN","IBDFU2",31,0)
 S NODE=0 F  S NODE=$O(^IBE(FROMFILE,OLDBLOCK,NODE)) Q:'NODE  S ^IBE(TOFILE,NEWBLOCK,NODE)=$G(^IBE(FROMFILE,OLDBLOCK,NODE))
"RTN","IBDFU2",32,0)
 K DIK,DA S DIK="^IBE("_TOFILE_",",DA=NEWBLOCK
"RTN","IBDFU2",33,0)
 D IX1^DIK K DIK,DA
"RTN","IBDFU2",34,0)
 ;I ('RECMPILE),TOFILE=357.1,FROMFILE=357.1,$D(^IBE(357.1,OLDBLOCK,"V")),$D(^IBE(357.1,OLDBLOCK,"S")),$D(^IBE(357.1,OLDBLOCK,"B")),$D(^IBE(357.1,OLDBLOCK,"H")) D
"RTN","IBDFU2",35,0)
 ;.F SUB="S","V","B","H" S I=0 S ^IBE(357.1,NEWBLOCK,SUB,0)=$G(^IBE(357.1,OLDBLOCK,SUB,0)) F  S I=$O(^IBE(357.1,OLDBLOCK,SUB,I)) Q:'I  S ^IBE(357.1,NEWBLOCK,SUB,I,0)=$G(^IBE(357.1,OLDBLOCK,SUB,I,0))
"RTN","IBDFU2",36,0)
 ;before any new block component is created, make sure there is no garbage around with dangling pointer pointing to new block
"RTN","IBDFU2",37,0)
 D DLTCNTNT^IBDFU3(NEWBLOCK,TOFILE)
"RTN","IBDFU2",38,0)
 ;
"RTN","IBDFU2",39,0)
 ;now copy the old block's contents into the newblock
"RTN","IBDFU2",40,0)
 S (LIST,LINE,TEXT)=""
"RTN","IBDFU2",41,0)
 ;
"RTN","IBDFU2",42,0)
 ;copy selection lists
"RTN","IBDFU2",43,0)
 S FROM=$S(FROMFILE[358:358.2,1:357.2),TO=$S(TOFILE[358:358.2,1:357.2)
"RTN","IBDFU2",44,0)
 F  S LIST=$O(^IBE(FROM,"C",OLDBLOCK,LIST)) Q:'LIST  I $$COPYLIST(LIST,OLDBLOCK,NEWBLOCK,FROM,TO)
"RTN","IBDFU2",45,0)
 ;
"RTN","IBDFU2",46,0)
 ;copy data fields
"RTN","IBDFU2",47,0)
 S FROM=$S(FROMFILE[358:358.5,1:357.5),TO=$S(TOFILE[358:358.5,1:357.5)
"RTN","IBDFU2",48,0)
 S FLD=0 F  S FLD=$O(^IBE(FROM,"C",OLDBLOCK,FLD)) Q:'FLD  D COPYFLD^IBDFU2A(FLD,OLDBLOCK,NEWBLOCK,FROM,TO)
"RTN","IBDFU2",49,0)
 ;
"RTN","IBDFU2",50,0)
 ;copy multiple choice fields
"RTN","IBDFU2",51,0)
 S FROM=$S(FROMFILE[358:358.93,1:357.93),TO=$S(TOFILE[358:358.93,1:357.93)
"RTN","IBDFU2",52,0)
 S FLD=0 F  S FLD=$O(^IBE(FROM,"C",OLDBLOCK,FLD)) Q:'FLD  D COPYMFLD^IBDFU2A(FLD,OLDBLOCK,NEWBLOCK,FROM,TO)
"RTN","IBDFU2",53,0)
 ;
"RTN","IBDFU2",54,0)
 ;copy hand print fields
"RTN","IBDFU2",55,0)
 S FROM=$S(FROMFILE[358:358.94,1:359.94),TO=$S(TOFILE[358:358.94,1:359.94)
"RTN","IBDFU2",56,0)
 S FLD=0 F  S FLD=$O(^IBE(FROM,"C",OLDBLOCK,FLD)) Q:'FLD  D COPYHFLD^IBDFU2A(FLD,OLDBLOCK,NEWBLOCK,FROM,TO)
"RTN","IBDFU2",57,0)
 ;
"RTN","IBDFU2",58,0)
 ;copy lines
"RTN","IBDFU2",59,0)
 S FROM=$S(FROMFILE[358:358.7,1:357.7),TO=$S(TOFILE[358:358.7,1:357.7)
"RTN","IBDFU2",60,0)
 F  S LINE=$O(^IBE(FROM,"C",OLDBLOCK,LINE)) Q:'LINE  D COPYLINE^IBDFU2A(LINE,OLDBLOCK,NEWBLOCK,FROM,TO)
"RTN","IBDFU2",61,0)
 ;
"RTN","IBDFU2",62,0)
 ;copy text areas
"RTN","IBDFU2",63,0)
 S FROM=$S(FROMFILE[358:358.8,1:357.8),TO=$S(TOFILE[358:358.8,1:357.8)
"RTN","IBDFU2",64,0)
 F  S TEXT=$O(^IBE(FROM,"C",OLDBLOCK,TEXT)) Q:'TEXT  D COPYTEXT^IBDFU2A(TEXT,OLDBLOCK,NEWBLOCK,FROM,TO)
"RTN","IBDFU2",65,0)
 Q NEWBLOCK
"RTN","IBDFU2",66,0)
 ;
"RTN","IBDFU2",67,0)
COPYLIST(LIST,OLDBLOCK,NEWBLOCK,FROMFILE,TOFILE) ;
"RTN","IBDFU2",68,0)
 ;returns the new list copied from LIST
"RTN","IBDFU2",69,0)
 Q:'$G(LIST)!('$G(OLDBLOCK))!('$G(NEWBLOCK))!('$G(FROMFILE))!('$G(TOFILE)) 0
"RTN","IBDFU2",70,0)
 Q:(FROMFILE'=357.2)&(FROMFILE'=358.2) 0
"RTN","IBDFU2",71,0)
 Q:(TOFILE'=357.2)&(TOFILE'=358.2) 0
"RTN","IBDFU2",72,0)
 N NODE,NAME,NEWLIST,GRP,SLCTN,COL,TO,FROM,TOPI,FROMPI,DYNAMIC
"RTN","IBDFU2",73,0)
 S NEWLIST=""
"RTN","IBDFU2",74,0)
 S NODE=$G(^IBE(FROMFILE,LIST,0)) Q:NODE="" 0
"RTN","IBDFU2",75,0)
 S DYNAMIC=$P(NODE,"^",14)
"RTN","IBDFU2",76,0)
 ;make sure the list really belongs to the block being copied - if not re-index it
"RTN","IBDFU2",77,0)
 I $P(NODE,"^",2)='OLDBLOCK K DA S DA=LIST,DIK="^IBE("_FROMFILE_"," D IX^DIK K DIK Q 0
"RTN","IBDFU2",78,0)
 S NAME=$P(NODE,"^",1),$P(NODE,"^",2)=NEWBLOCK
"RTN","IBDFU2",79,0)
 S FROMPI=$P(NODE,"^",11)
"RTN","IBDFU2",80,0)
 S TOPI=$$GETPI^IBDFU2B(FROMPI,$S(FROMFILE[358:358.6,1:357.6),$S(TOFILE[358:358.6,1:357.6)),$P(NODE,"^",11)=TOPI
"RTN","IBDFU2",81,0)
 Q:NAME="" 0
"RTN","IBDFU2",82,0)
 K DIC,DD,DINUM,DO S DIC="^IBE("_TOFILE_",",X=NAME,DIC(0)=""
"RTN","IBDFU2",83,0)
 D FILE^DICN K DIC,DIE,DA
"RTN","IBDFU2",84,0)
 S NEWLIST=$S(+Y<0:"",1:+Y)
"RTN","IBDFU2",85,0)
 Q:'NEWLIST 0
"RTN","IBDFU2",86,0)
 D DLISTCNT^IBDFU3(NEWLIST,TOFILE) ;clean up any dangling pointers that may be now pointing to this new, supposedly empty list
"RTN","IBDFU2",87,0)
 ;
"RTN","IBDFU2",88,0)
 ;now copy
"RTN","IBDFU2",89,0)
 S ^IBE(TOFILE,NEWLIST,0)=NODE
"RTN","IBDFU2",90,0)
 ;
"RTN","IBDFU2",91,0)
 ;copy the column multiple
"RTN","IBDFU2",92,0)
 S NODE=$G(^IBE(FROMFILE,LIST,1,0))
"RTN","IBDFU2",93,0)
 I NODE'=""  S $P(NODE,"^",2)=TOFILE_"1I",^IBE(TOFILE,NEWLIST,1,0)=NODE S COL=0 F  S COL=$O(^IBE(FROMFILE,LIST,1,COL)) Q:'COL  S NODE=$G(^IBE(FROMFILE,LIST,1,COL,0)) S:NODE'="" ^IBE(TOFILE,NEWLIST,1,COL,0)=NODE
"RTN","IBDFU2",94,0)
 ;
"RTN","IBDFU2",95,0)
 ;now copy the subcolumn multiple
"RTN","IBDFU2",96,0)
 S NODE=$G(^IBE(FROMFILE,LIST,2,0)) I NODE'=""  S $P(NODE,"^",2)=TOFILE_"2I",^IBE(TOFILE,NEWLIST,2,0)=NODE S COL=0 F  S COL=$O(^IBE(FROMFILE,LIST,2,COL)) Q:'COL  S NODE=$G(^IBE(FROMFILE,LIST,2,COL,0)) I NODE'="" D
"RTN","IBDFU2",97,0)
 .S:$P(NODE,"^",6) $P(NODE,"^",6)=$$GETMA^IBDFU2B($P(NODE,"^",6),$S(FROMFILE[358:358.91,1:357.91),$S(TOFILE[358:358.91,1:357.91))
"RTN","IBDFU2",98,0)
 .S:$P(NODE,"^",9) $P(NODE,"^",9)=$$GETQLFR^IBDFU2B($P(NODE,"^",9),$S(FROMFILE[358:358.98,1:357.98),$S(TOFILE[358:358.98,1:357.98))
"RTN","IBDFU2",99,0)
 .S ^IBE(TOFILE,NEWLIST,2,COL,0)=NODE
"RTN","IBDFU2",100,0)
 ;
"RTN","IBDFU2",101,0)
 K DIK,DA S DIK="^IBE("_TOFILE_",",DA=NEWLIST
"RTN","IBDFU2",102,0)
 D IX1^DIK K DIK,DA
"RTN","IBDFU2",103,0)
 S FROM=$S(FROMFILE[358:358.4,1:357.4),TO=$S(TOFILE[358:358.4,1:357.4)
"RTN","IBDFU2",104,0)
 ;
"RTN","IBDFU2",105,0)
 ; -- don't want to copy groups and selections if the selections are 
"RTN","IBDFU2",106,0)
 ;    not exportable
"RTN","IBDFU2",107,0)
 I FROM'=TO,FROMPI,'$P($G(^IBE($S(FROM[358:358.6,1:357.6),FROMPI,2)),"^",18) Q NEWLIST
"RTN","IBDFU2",108,0)
 ;I 'DYNAMIC S GRP="" F  S GRP=$O(^IBE(FROM,"D",LIST,GRP)) Q:'GRP  D COPYGRP^IBDFU2A(GRP,LIST,NEWLIST,NEWBLOCK,FROM,TO)
"RTN","IBDFU2",109,0)
 S GRP="" F  S GRP=$O(^IBE(FROM,"D",LIST,GRP)) Q:'GRP  D COPYGRP^IBDFU2A(GRP,LIST,NEWLIST,NEWBLOCK,FROM,TO)
"RTN","IBDFU2",110,0)
 Q NEWLIST
"RTN","IBDY315E")
0^^B2717967
"RTN","IBDY315E",1,0)
IBDY315E ;ALB/TMP - ENVIRONMENT CHECK FOR PATCH IBD*3*3 ; 23-JUN-97
"RTN","IBDY315E",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**15**;APR 24, 1997
"RTN","IBDY315E",3,0)
 ;
"RTN","IBDY315E",4,0)
EN ; Make sure patch 1 is installed first
"RTN","IBDY315E",5,0)
 Q:$G(XPDENV)'=1
"RTN","IBDY315E",6,0)
 N CNT,PATCH,Z,Z0
"RTN","IBDY315E",7,0)
 D DLTALL^IBDE2
"RTN","IBDY315E",8,0)
 ;
"RTN","IBDY315E",9,0)
 I $S($D(DUZ)[0:1,$D(DUZ(0))[0:1,'DUZ:1,1:0) W !!,*7,">> DUZ and DUZ(0) must be defined as an active user",! S XPDQUIT=2
"RTN","IBDY315E",10,0)
 ;
"RTN","IBDY315E",11,0)
 ;Check for existence of prerequisite IBD patch 1
"RTN","IBDY315E",12,0)
 ;
"RTN","IBDY315E",13,0)
 I $T(+2^IBDF18E1)'["**1" D NOPTCH(1,.CNT)
"RTN","IBDY315E",14,0)
 ;
"RTN","IBDY315E",15,0)
 I $G(CNT) W !!,"Please install th",$S(CNT>1:"ese patches",1:"is patch")," first and then restart this install.",! S XPDQUIT=2
"RTN","IBDY315E",16,0)
 Q
"RTN","IBDY315E",17,0)
 ;
"RTN","IBDY315E",18,0)
NOPTCH(PATCH,CNT) ; Writes patch not installed messsage
"RTN","IBDY315E",19,0)
 ;PATCH = patch number not found
"RTN","IBDY315E",20,0)
 ;CNT = # of patches missing ... passed by reference ... running count
"RTN","IBDY315E",21,0)
 W !!,*7,"PATCH #: IBD*3.0*",PATCH," does not appear to be installed on your system and is",!,"  required before this patch can be installed."
"RTN","IBDY315E",22,0)
 S CNT=$G(CNT)+1
"RTN","IBDY315E",23,0)
 Q
"RTN","IBDY315P")
0^^B8569885
"RTN","IBDY315P",1,0)
IBDY315P ;ALB/AAS - Post Install routine for ibd*3*15  - 11-Oct-97
"RTN","IBDY315P",2,0)
 ;;3.0;AUTOMATED INFO COLLECTION SYS;**15**;APR 24, 1997
"RTN","IBDY315P",3,0)
 ;
"RTN","IBDY315P",4,0)
 D CLEANUP,AUTOINS,DEL,TRANS
"RTN","IBDY315P",5,0)
 Q
"RTN","IBDY315P",6,0)
 ;
"RTN","IBDY315P",7,0)
AUTOINS ; -- auto install tool kit blocks into production
"RTN","IBDY315P",8,0)
 N FORM,NEWFORM,FORMNM,CNT,CNT1,ARY,NAME,X,Y,NEWBLOCK,A,EXCLUDE,BLK,CNTF,CNTB
"RTN","IBDY315P",9,0)
 D MES^XPDUTL(">>> Now Attempting to automatically add Clinical Reminders Tool Kit Blocks.")
"RTN","IBDY315P",10,0)
 S (CNTB,CNTF)=0
"RTN","IBDY315P",11,0)
 ;
"RTN","IBDY315P",12,0)
 ; -- add all tool kit blocks
"RTN","IBDY315P",13,0)
 S FORMNM="TOOL KIT"
"RTN","IBDY315P",14,0)
 I '$O(^IBE(357,"B",FORMNM,0)) Q
"RTN","IBDY315P",15,0)
 S ORD="" F  S ORD=$O(^IBE(358.1,"D",ORD)) Q:ORD=""  S BLK=0 F  S BLK=$O(^IBE(358.1,"D",ORD,BLK)) Q:'BLK  D
"RTN","IBDY315P",16,0)
 .S NAME=$P($G(^IBE(358.1,+BLK,0)),"^")
"RTN","IBDY315P",17,0)
 .Q:$P($G(^IBE(358.1,BLK,0)),"^",14)'=1  ;not toolkit
"RTN","IBDY315P",18,0)
 .I $O(^IBE(357.1,"B",NAME,0)) D MES^XPDUTL("     Block "_NAME_" already exists") Q
"RTN","IBDY315P",19,0)
 .D MES^XPDUTL("    Moving Block '"_$P($G(^IBE(358.1,+BLK,0)),"^")_"' from import/export to Tool Kit")
"RTN","IBDY315P",20,0)
 .N IBTKBLK S IBTKBLK=1
"RTN","IBDY315P",21,0)
 .S NEWBLOCK=$$COPYBLK^IBDFU2(BLK,$$TKFORM^IBDFU2C,358.1,357.1,"","",$$TKORDER^IBDF13),CNTB=CNTB+1
"RTN","IBDY315P",22,0)
 .D:$G(NEWBLOCK) DLTBLK^IBDFU3(BLK,"",358.1)
"RTN","IBDY315P",23,0)
 ;
"RTN","IBDY315P",24,0)
 ; -- clear workspace
"RTN","IBDY315P",25,0)
 D DLTALL^IBDE2
"RTN","IBDY315P",26,0)
 Q
"RTN","IBDY315P",27,0)
 ;
"RTN","IBDY315P",28,0)
DEL ; -- delete unused field in 357.6
"RTN","IBDY315P",29,0)
 S DIK="^DD(357.613,",DA=1,DA(1)=357.613
"RTN","IBDY315P",30,0)
 D ^DIK
"RTN","IBDY315P",31,0)
 K DIK,DA
"RTN","IBDY315P",32,0)
 Q
"RTN","IBDY315P",33,0)
 ;
"RTN","IBDY315P",34,0)
CLEANUP ; -- Clean up initial reminder blocks
"RTN","IBDY315P",35,0)
 N IBDI,IBDJ
"RTN","IBDY315P",36,0)
 S IBDI=0
"RTN","IBDY315P",37,0)
 F  S IBDI=$O(^IBE(357.2,"B","CLINICAL REMINDERS",IBDI)) Q:'IBDI  D
"RTN","IBDY315P",38,0)
 .S IBDJ=0
"RTN","IBDY315P",39,0)
 .F  S IBDJ=$O(^IBE(357.2,IBDI,2,IBDJ)) Q:'IBDJ  D
"RTN","IBDY315P",40,0)
 ..I $P($G(^IBE(357.2,IBDI,2,IBDJ,0)),"^",3)=13 S $P(^IBE(357.2,IBDI,2,IBDJ,0),"^",3)=12
"RTN","IBDY315P",41,0)
 ..I $P($G(^IBE(357.2,IBDI,2,IBDJ,0)),"^",3)=17 S $P(^IBE(357.2,IBDI,2,IBDJ,0),"^",3)=18
"RTN","IBDY315P",42,0)
 ;
"RTN","IBDY315P",43,0)
 S IBDI=0
"RTN","IBDY315P",44,0)
 F  S IBDI=$O(^IBE(357.2,"B","FULL CLINICAL REMINDER",IBDI)) Q:'IBDI  D
"RTN","IBDY315P",45,0)
 .S IBDJ=0
"RTN","IBDY315P",46,0)
 .F  S IBDJ=$O(^IBE(357.2,IBDI,2,IBDJ)) Q:'IBDJ  D
"RTN","IBDY315P",47,0)
 ..I $P($G(^IBE(357.2,IBDI,2,IBDJ,0)),"^",3)=13 S $P(^IBE(357.2,IBDI,2,IBDJ,0),"^",3)=12
"RTN","IBDY315P",48,0)
 ..I $P($G(^IBE(357.2,IBDI,2,IBDJ,0)),"^",3)=17 S $P(^IBE(357.2,IBDI,2,IBDJ,0),"^",3)=18
"RTN","IBDY315P",49,0)
 Q
"RTN","IBDY315P",50,0)
BLOCKS ;;
"RTN","IBDY315P",51,0)
 ;;TOOL KIT
"RTN","IBDY315P",52,0)
 ;;
"RTN","IBDY315P",53,0)
 Q
"RTN","IBDY315P",54,0)
TRANS D MES^XPDUTL(">>> Translating letters O and l to numbers 0 and 1 in Time Queued field of file 357.09.")
"RTN","IBDY315P",55,0)
 N IBX,IBX1,IBY1,IBNODE
"RTN","IBDY315P",56,0)
 S IBX1=0
"RTN","IBDY315P",57,0)
 F  S IBX1=$O(^IBD(357.09,IBX1)) Q:'IBX1  D
"RTN","IBDY315P",58,0)
 .S IBY1=0 F  S IBY1=$O(^IBD(357.09,IBX1,"Q",IBY1)) Q:'IBY1  D
"RTN","IBDY315P",59,0)
 ..S IBNODE=$G(^IBD(357.09,IBX1,"Q",IBY1,0))
"RTN","IBDY315P",60,0)
 ..S IBX=$P(IBNODE,"^",13)
"RTN","IBDY315P",61,0)
 ..I IBX]"" S IBX=$TR(IBX,"OoLl","0011"),$P(^IBD(357.09,IBX1,"Q",IBY1,0),"^",13)=IBX
"RTN","IBDY315P",62,0)
 Q
"VER")
8.0^21.0
"^DD",357.09,357.09,0)
FIELD^^11^15
"^DD",357.09,357.09,0,"DDA")
N
"^DD",357.09,357.09,0,"DT")
2971229
"^DD",357.09,357.09,0,"IX","ACG",357.091,.06)

"^DD",357.09,357.09,0,"IX","B",357.09,.01)

"^DD",357.09,357.09,0,"IX","SEQ",357.091,.1)

"^DD",357.09,357.09,0,"NM","ENCOUNTER FORM PARAMETERS")

"^DD",357.09,357.09,0,"VRPK")
IBD
"^DD",357.09,357.09,.001,0)
NUMBER^NJ1,0^^ ^K:+X'=X!(X>1)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.09,357.09,.001,3)
Type a Number between 1 and 1, 0 Decimal Digits
"^DD",357.09,357.09,.001,21,0)
^^3^3^2950303^
"^DD",357.09,357.09,.001,21,1,0)
There is only one number in this ENCOUNTER FORM PARAMETERS file,
"^DD",357.09,357.09,.001,21,2,0)
and that is the number 'one' denoting there is only one Encounter Form
"^DD",357.09,357.09,.001,21,3,0)
Parameter.  The labels are subfields of this one parameter.
"^DD",357.09,357.09,.001,"DT")
2950303
"^DD",357.09,357.09,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",357.09,357.09,.01,1,0)
^.1
"^DD",357.09,357.09,.01,1,1,0)
357.09^B
"^DD",357.09,357.09,.01,1,1,1)
S ^IBD(357.09,"B",$E(X,1,30),DA)=""
"^DD",357.09,357.09,.01,1,1,2)
K ^IBD(357.09,"B",$E(X,1,30),DA)
"^DD",357.09,357.09,.01,3)
Answer must be 3-30 characters in length.
"^DD",357.09,357.09,.01,21,0)
^^2^2^2950303^^
"^DD",357.09,357.09,.01,21,1,0)
This field is the name field.  There should only be one
"^DD",357.09,357.09,.01,21,2,0)
entry in this field.
"^DD",357.09,357.09,.01,23,0)
^^1^1^2950303^^
"^DD",357.09,357.09,.01,23,1,0)
 
"^DD",357.09,357.09,.01,"DT")
2950303
"^DD",357.09,357.09,.02,0)
RECORDS TO PURGE^S^0:NONE;1:COMPLETED;2:ALL;^0;2^Q
"^DD",357.09,357.09,.02,21,0)
^^14^14^2951208^^
"^DD",357.09,357.09,.02,21,1,0)
Enter whether you want the background purge option to purge all records
"^DD",357.09,357.09,.02,21,2,0)
from form tracking older that the number of days specified in the field
"^DD",357.09,357.09,.02,21,3,0)
FORM TRACKING RETENTION DAYS, or completed records, or no records.  
"^DD",357.09,357.09,.02,21,4,0)
 
"^DD",357.09,357.09,.02,21,5,0)
After purging records from form tracking, the purge utility will check
"^DD",357.09,357.09,.02,21,6,0)
to see if all forms for inactive form definitions have been received.
"^DD",357.09,357.09,.02,21,7,0)
If so, then the form definition and Form Specification for that form
"^DD",357.09,357.09,.02,21,8,0)
may be deleted.  Purging ALL Form Tracking entries will cause the
"^DD",357.09,357.09,.02,21,9,0)
form definition and form specification to be deleted for forms that
"^DD",357.09,357.09,.02,21,10,0)
have not yet been completed.  Once the form definition is deleted
"^DD",357.09,357.09,.02,21,11,0)
the form specification can not be recreated in DHCP, if it does not
"^DD",357.09,357.09,.02,21,12,0)
exist on the AICS workstation the form can not be recognized.
"^DD",357.09,357.09,.02,21,13,0)
This is generally not a problem as entries must be at least 60 days
"^DD",357.09,357.09,.02,21,14,0)
old to purge.
"^DD",357.09,357.09,.02,"DT")
2951208
"^DD",357.09,357.09,.03,0)
FORM TRACKING RETENTION DAYS^NJ4,0^^0;3^K:+X'=X!(X>9999)!(X<60)!(X?.E1"."1N.N) X
"^DD",357.09,357.09,.03,3)
Type a Number between 60 and 9999, 0 Decimal Digits
"^DD",357.09,357.09,.03,21,0)
^^5^5^2951003^
"^DD",357.09,357.09,.03,21,1,0)
Enter the number of days to retain form tracking information after it
"^DD",357.09,357.09,.03,21,2,0)
is no longer used.  The AICS purge utility will delete entries in
"^DD",357.09,357.09,.03,21,3,0)
the Encounter Form Definition file (357.95), the Encounter Form Tracking
"^DD",357.09,357.09,.03,21,4,0)
file (357.96), and the Form Specification file the number of days 
"^DD",357.09,357.09,.03,"DT")
2951003
"^DD",357.09,357.09,.04,0)
DEFAULT DATA ENTRY FORM^P357'^IBE(357,^0;4^Q
"^DD",357.09,357.09,.04,3)
Enter the form to be used as the default form for doing data entry when no form exists for a clinic.
"^DD",357.09,357.09,.04,21,0)
^^5^5^2951208^
"^DD",357.09,357.09,.04,21,1,0)
This is the form definition that will be used during manual data entry
"^DD",357.09,357.09,.04,21,2,0)
if no form for a clinic is defined.  If this is not filled in then
"^DD",357.09,357.09,.04,21,3,0)
the PRIMARY CARE SAMPLE (2.1) form in the tool kit will be used as the
"^DD",357.09,357.09,.04,21,4,0)
default form.  If that form has been deleted then provider, procedure     
"^DD",357.09,357.09,.04,21,5,0)
and diagnosis will be asked but no quick entry features will be available.
"^DD",357.09,357.09,.04,"DT")
2951208
"^DD",357.09,357.09,.05,0)
PRINT FORMS FOR INPATIENTS^S^0:NO;1:YES;^0;5^Q
"^DD",357.09,357.09,.05,3)
If you would like to suppress printing of encounter forms for inpatients enter 'No'.  Answering 'Yes' or leaving blank will cause Encounter Forms for inpatients to print.
"^DD",357.09,357.09,.05,21,0)
2^^7^7^2951219^^^
"^DD",357.09,357.09,.05,21,1,0)
Enter 'Yes' if you want encounter forms printed for Inpatients or 'No'
"^DD",357.09,357.09,.05,21,2,0)
if no enounter forms for inpatients should be printed.  If this field
"^DD",357.09,357.09,.05,21,3,0)
is null, it will be treated as a 'Yes' and encounter forms for inpatients
"^DD",357.09,357.09,.05,21,4,0)
will be printed.
"^DD",357.09,357.09,.05,21,5,0)
 
"^DD",357.09,357.09,.05,21,6,0)
This parameter affects all options that print forms for appointments
"^DD",357.09,357.09,.05,21,7,0)
for a clinic, it does not affect printing individual forms.
"^DD",357.09,357.09,.05,23,0)
^^2^2^2951219^
"^DD",357.09,357.09,.05,23,1,0)
This parameter is checked twice in routine IBDF1B1A when check 
"^DD",357.09,357.09,.05,23,2,0)
the status of a patients appointment.
"^DD",357.09,357.09,.05,"DT")
2951218
"^DD",357.09,357.09,.06,0)
MAKE APPOINTMENT IN DATA ENTRY^S^0:NO;1:YES;^0;6^Q
"^DD",357.09,357.09,.06,3)
Enter 'Yes' if you want to be able to make a follow up appointment using the AICS manual Data entry option.
"^DD",357.09,357.09,.06,21,0)
^^3^3^2960403^
"^DD",357.09,357.09,.06,21,1,0)
Enter 'Yes' if you wish for users at your site to be able to make a follow
"^DD",357.09,357.09,.06,21,2,0)
up appointment during data entry of an encounter form or enter 'No' if you
"^DD",357.09,357.09,.06,21,3,0)
do not wish to see that prompt.
"^DD",357.09,357.09,.06,"DT")
2960403
"^DD",357.09,357.09,.07,0)
PASS DATA TO PCE^S^0:BACKGROUND;1:BACKGROUND/W VALIDATION;2:FOREGROUND/NO DISPLAY;3:FOREGROUND/WITH DISPLAY;^0;7^Q
"^DD",357.09,357.09,.07,3)
How should data captured in the AICS EF Data entry option be passed to PCE?
"^DD",357.09,357.09,.07,21,0)
^^25^25^2961230^^^^
"^DD",357.09,357.09,.07,21,1,0)
Choose how data captured in the AICS EF Data Entry Options should be
"^DD",357.09,357.09,.07,21,2,0)
passed to PCE.  The data entry options use the same mechanism to update
"^DD",357.09,357.09,.07,21,3,0)
PCE (and scheduling) as the scanning software.  Background refers to
"^DD",357.09,357.09,.07,21,4,0)
sending data to PCE by using TaskMan to create a separate process so the
"^DD",357.09,357.09,.07,21,5,0)
user may continue working.  Foreground refers to sending the data to PCE in
"^DD",357.09,357.09,.07,21,6,0)
real time.  The choices for data entry are:
"^DD",357.09,357.09,.07,21,7,0)
   
"^DD",357.09,357.09,.07,21,8,0)
   Background - This is the fastest method for the user.  No validation 
"^DD",357.09,357.09,.07,21,9,0)
       of the data is done by PCE and no display there is no display of
"^DD",357.09,357.09,.07,21,10,0)
       results.
"^DD",357.09,357.09,.07,21,11,0)
 
"^DD",357.09,357.09,.07,21,12,0)
   Background with Validation -  This is the next fastest way.  The data
"^DD",357.09,357.09,.07,21,13,0)
       is validated with PCE prior to passing in the background.  If the
"^DD",357.09,357.09,.07,21,14,0)
       data does not validate, the user will be shown the error messages
"^DD",357.09,357.09,.07,21,15,0)
       and allowed to re-edit the data.
"^DD",357.09,357.09,.07,21,16,0)
 
"^DD",357.09,357.09,.07,21,17,0)
   Foreground with no display of data - Data is always validated when 
"^DD",357.09,357.09,.07,21,18,0)
       passed to PCE in the foreground. If the data does not validate,
"^DD",357.09,357.09,.07,21,19,0)
       the user will be shown the error messages and allowed to re-edit
"^DD",357.09,357.09,.07,21,20,0)
       the data.
"^DD",357.09,357.09,.07,21,21,0)
 
"^DD",357.09,357.09,.07,21,22,0)
  Foreground with display - This is the slowest method but will be most 
"^DD",357.09,357.09,.07,21,23,0)
      useful as a validation tool.  The data sent to PCE is redisplayed
"^DD",357.09,357.09,.07,21,24,0)
      after it has been been accepted by PCE.  Any differences in what
"^DD",357.09,357.09,.07,21,25,0)
      was supposed to be sent and what was actually sent should be noticable.
"^DD",357.09,357.09,.07,"DT")
2960411
"^DD",357.09,357.09,.08,0)
FILL % FOR BUBBLES^NJ2,0^^0;8^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",357.09,357.09,.08,3)
Type a Number between 0 and 99, 0 Decimal Digits.  This is the amount of fill required for Paper Keyboard to recognize the Bubble as checked.
"^DD",357.09,357.09,.08,9)
^
"^DD",357.09,357.09,.08,21,0)
^^10^10^2970821^^^^
"^DD",357.09,357.09,.08,21,1,0)
Enter a number between 0 and 99 that represents the percentage of
"^DD",357.09,357.09,.08,21,2,0)
fill required for a bubble to be considered as checked.  Entering a zero
"^DD",357.09,357.09,.08,21,3,0)
will leave the determination up to Paper Keyboard.  If this field is left
"^DD",357.09,357.09,.08,21,4,0)
blank AICS will use 20% as the amount of fill required.
"^DD",357.09,357.09,.08,21,5,0)
 
"^DD",357.09,357.09,.08,21,6,0)
This field corresponds to the Threshold % field in the Metric dialog box
"^DD",357.09,357.09,.08,21,7,0)
in Paper Keyboard.  Modifying this field will only affect new forms.
"^DD",357.09,357.09,.08,21,8,0)
Existing form specification files will not be affected.  To modify an 
"^DD",357.09,357.09,.08,21,9,0)
existing form specification file it must be deleted from the workstation 
"^DD",357.09,357.09,.08,21,10,0)
and the corresponding entry in file 359.2 must be deleted.
"^DD",357.09,357.09,.08,"DT")
2970121
"^DD",357.09,357.09,.09,0)
BACKGROUND % FOR BUBBLES^NJ2,0^^0;9^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",357.09,357.09,.09,3)
Type a Number between 0 and 99, 0 Decimal Digits.  This is the amount of background allowable that Paper Keyboard will ignore.
"^DD",357.09,357.09,.09,9)
^
"^DD",357.09,357.09,.09,21,0)
^^15^15^2970821^^^
"^DD",357.09,357.09,.09,21,1,0)
Enter a number between 0 and 99 that represents the percentage of 
"^DD",357.09,357.09,.09,21,2,0)
background fill in a bubble that can exist before Paper Keyboard
"^DD",357.09,357.09,.09,21,3,0)
will consider any markings in the bubble.  If this field is left blank
"^DD",357.09,357.09,.09,21,4,0)
then AICS will use 5%.  Entering a zero leaves the determination up
"^DD",357.09,357.09,.09,21,5,0)
to Paper Keyboard.
"^DD",357.09,357.09,.09,21,6,0)
 
"^DD",357.09,357.09,.09,21,7,0)
This field corresponds to the Background % field in the Metric dialog box.
"^DD",357.09,357.09,.09,21,8,0)
Entering a small value prevents small dots on the page from appearing as
"^DD",357.09,357.09,.09,21,9,0)
check marks.  The value of this field should always be less than the value
"^DD",357.09,357.09,.09,21,10,0)
for the FILL % FOR BUBBLES field.
"^DD",357.09,357.09,.09,21,11,0)
 
"^DD",357.09,357.09,.09,21,12,0)
Editing this field will not affect any current form specification files,
"^DD",357.09,357.09,.09,21,13,0)
only files created after changing this value.  To modify a current form
"^DD",357.09,357.09,.09,21,14,0)
specification you must delete the file from the workstation and remove the
"^DD",357.09,357.09,.09,21,15,0)
corresponding entry from file 359.2.
"^DD",357.09,357.09,.09,"DT")
2970121
"^DD",357.09,357.09,.1,0)
DAYS TO PRINT 1010F^NJ3,0^^0;10^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",357.09,357.09,.1,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",357.09,357.09,.1,21,0)
^^5^5^2970416^^^^
"^DD",357.09,357.09,.1,21,1,0)
If you have chosen to print a 1010F with your encounter forms, this is the
"^DD",357.09,357.09,.1,21,2,0)
number of days between the expiration of a means test and the aoppointment 
"^DD",357.09,357.09,.1,21,3,0)
date before that you want to print 1010F's for.  For example, if this field
"^DD",357.09,357.09,.1,21,4,0)
is set to 30, then 1010F's will print for means tests that are due to 
"^DD",357.09,357.09,.1,21,5,0)
expire within 30 days of the appointment.
"^DD",357.09,357.09,.1,23,0)
^^2^2^2970409^^
"^DD",357.09,357.09,.1,23,1,0)
This parameter is used in PRMT^IBDFN2 if a 1010F is printed from the print
"^DD",357.09,357.09,.1,23,2,0)
manager.
"^DD",357.09,357.09,.1,"DT")
2970317
"^DD",357.09,357.09,.11,0)
DAYS TO RETAIN PENDING PAGES^NJ3,0^^0;11^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",357.09,357.09,.11,3)
Type a Number between 0 and 999, 0 Decimal Digits
"^DD",357.09,357.09,.11,21,0)
^^5^5^2971028^^^
"^DD",357.09,357.09,.11,21,1,0)
Enter the number of days that entries in Form Tracking will be retained
"^DD",357.09,357.09,.11,21,2,0)
in a Pending Pages status.  The automatic encounter form job will check
"^DD",357.09,357.09,.11,21,3,0)
this value each night and attempt to pass forms in this status to PCE
"^DD",357.09,357.09,.11,21,4,0)
after they have been in this status for the specified number of days
"^DD",357.09,357.09,.11,21,5,0)
past the encounter date.
"^DD",357.09,357.09,.11,"DT")
2971007
"^DD",357.09,357.09,1.01,0)
PURGE NOTIFICATION MAIL GROUP^P3.8'^XMB(3.8,^1;1^Q
"^DD",357.09,357.09,1.01,3)
This mail group will automatically receive notification of purge results.  Results are also stored in the AICS PURGE LOG file and may be reviewed.  Mail notification is not required.
"^DD",357.09,357.09,1.01,21,0)
^^8^8^2951219^^
"^DD",357.09,357.09,1.01,21,1,0)
Enter the name of the mail group that should receive the automatic
"^DD",357.09,357.09,1.01,21,2,0)
notification of purge results.  Purge results are sent every time
"^DD",357.09,357.09,1.01,21,3,0)
the AICS purge runs, regardless of whether or not the auto purge or
"^DD",357.09,357.09,1.01,21,4,0)
manual purge is run.
"^DD",357.09,357.09,1.01,21,5,0)
 
"^DD",357.09,357.09,1.01,21,6,0)
If no group is entered then no message will be sent.  Results are
"^DD",357.09,357.09,1.01,21,7,0)
always stored in the AICS PURGE LOG file (357.08) and can be reviewed
"^DD",357.09,357.09,1.01,21,8,0)
at any time.
"^DD",357.09,357.09,1.01,"DT")
2951208
"^DD",357.09,357.09,1.02,0)
STOP DEFAULTING C/O DATE/TIME^S^1:YES;^1;2^Q
"^DD",357.09,357.09,1.02,3)
Enter 'YES' to stop defaulting the checkout date/time during scanning to the scan date/time if no checkout data exists on the form.
"^DD",357.09,357.09,1.02,21,0)
^^4^4^2970122^
"^DD",357.09,357.09,1.02,21,1,0)
If checkout date/time is not present on the Encounter Form, the software
"^DD",357.09,357.09,1.02,21,2,0)
will automatically default a checkout date/time to that of the scan date/
"^DD",357.09,357.09,1.02,21,3,0)
time.  If you do not wish to default the checkout date/time, you should
"^DD",357.09,357.09,1.02,21,4,0)
enter 'YES' in this field to stop the automatic default.
"^DD",357.09,357.09,1.02,"DT")
2970122
"^DD",357.09,357.09,11,0)
PRINT MGR'S QUEUING PARAM NAME^357.091A^^Q;0
"^DD",357.09,357.09,11,21,0)
6^^5^5^2990126^^^^
"^DD",357.09,357.09,11,21,1,0)
This field is a multiple.  This is the name of the parameter group 
"^DD",357.09,357.09,11,21,2,0)
for the printing of encounter forms.  The encounter form background
"^DD",357.09,357.09,11,21,3,0)
print job will loop through all of the parameter groups and
"^DD",357.09,357.09,11,21,4,0)
print the forms for the clinics that are under this parameter
"^DD",357.09,357.09,11,21,5,0)
the print job.
"^DD",357.09,357.09,11,23,0)
^^1^1^2990126^^^^
"^DD",357.09,357.09,11,23,1,0)
 
"^DD",357.09,357.09,11,"DT")
2971104
"^DD",357.09,357.091,0)
PRINT MGR'S QUEUING PARAM NAME SUB-FIELD^^.14^14
"^DD",357.09,357.091,0,"DT")
2971229
"^DD",357.09,357.091,0,"IX","B",357.091,.01)

"^DD",357.09,357.091,0,"NM","PRINT MGR'S QUEUING PARAM NAME")

"^DD",357.09,357.091,0,"UP")
357.09
"^DD",357.09,357.091,.01,0)
PRINT MGR'S QUEUING PARAM NAME^MF^^0;1^K:$L(X)>30!($L(X)<3) X
"^DD",357.09,357.091,.01,1,0)
^.1
"^DD",357.09,357.091,.01,1,1,0)
357.091^B
"^DD",357.09,357.091,.01,1,1,1)
S ^IBD(357.09,DA(1),"Q","B",$E(X,1,30),DA)=""
"^DD",357.09,357.091,.01,1,1,2)
K ^IBD(357.09,DA(1),"Q","B",$E(X,1,30),DA)
"^DD",357.09,357.091,.01,3)
Answer must be 3-30 characters in length.
"^DD",357.09,357.091,.01,21,0)
^^2^2^2951004^^^
"^DD",357.09,357.091,.01,21,1,0)
This field is the name of the parameter group for printing of
"^DD",357.09,357.091,.01,21,2,0)
encounter forms when using the background print job.
"^DD",357.09,357.091,.01,"DT")
2960402
"^DD",357.09,357.091,.02,0)
DATE/TIME STARTED^D^^0;2^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",357.09,357.091,.02,3)
This is the date/time that the print job began.
"^DD",357.09,357.091,.02,21,0)
^^2^2^2951004^
"^DD",357.09,357.091,.02,21,1,0)
This field is the date that the job started.  It is supplied by
"^DD",357.09,357.091,.02,21,2,0)
the system when the queued print job begins.
"^DD",357.09,357.091,.02,"DT")
2951004
"^DD",357.09,357.091,.03,0)
DATE/TIME ENDED^D^^0;3^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",357.09,357.091,.03,3)
This is the date/time the print job finished.
"^DD",357.09,357.091,.03,21,0)
^^2^2^2951004^
"^DD",357.09,357.091,.03,21,1,0)
This field contains the date that the print job finished.  This data
"^DD",357.09,357.091,.03,21,2,0)
is supplied by the system when the print job is finished.
"^DD",357.09,357.091,.03,"DT")
2951004
"^DD",357.09,357.091,.04,0)
CLINIC SORT BY^RS^1:DIVISION/CLINIC/PATIENT;2:DIVISION/TERMINAL DIGITS;3:DIVISION/CLINIC/TERMINAL DIGITS;^0;4^Q
"^DD",357.09,357.091,.04,3)
Select the way the encounter forms should be sorted when printing.
"^DD",357.09,357.091,.04,21,0)
^^5^5^2951004^
"^DD",357.09,357.091,.04,21,1,0)
This field contains the sort sequence for the printing of encounter
"^DD",357.09,357.091,.04,21,2,0)
forms.  Its value can be:
"^DD",357.09,357.091,.04,21,3,0)
 1) Division/Clinic/Patient
"^DD",357.09,357.091,.04,21,4,0)
 2) Division/Terminal Digits
"^DD",357.09,357.091,.04,21,5,0)
 3) Division/Clinic/Terminal Digits
"^DD",357.09,357.091,.04,"DT")
2951004
"^DD",357.09,357.091,.05,0)
ADD ONS^S^0:NO;1:YES;^0;5^Q
"^DD",357.09,357.091,.05,21,0)
^^3^3^2951004^
"^DD",357.09,357.091,.05,21,1,0)
This field is a Yes/No field as to whether the print job will be just
"^DD",357.09,357.091,.05,21,2,0)
for printing add ons only.  If this field contains 'Yes', the print
"^DD",357.09,357.091,.05,21,3,0)
job will only print the add ons for the clinics.
"^DD",357.09,357.091,.05,"DT")
2951004
"^DD",357.09,357.091,.06,0)
CLINIC GROUPS^P357.99'^IBD(357.99,^0;6^Q
"^DD",357.09,357.091,.06,1,0)
^.1
"^DD",357.09,357.091,.06,1,1,0)
357.09^ACG
"^DD",357.09,357.091,.06,1,1,1)
S ^IBD(357.09,"ACG",$E(X,1,30),DA(1),DA)=""
"^DD",357.09,357.091,.06,1,1,2)
K ^IBD(357.09,"ACG",$E(X,1,30),DA(1),DA)
"^DD",357.09,357.091,.06,1,1,"%D",0)
^^3^3^2960220^
"^DD",357.09,357.091,.06,1,1,"%D",1,0)
Cross reference of clinic groups
"^DD",357.09,357.091,.06,1,1,"%D",2,0)
used to prevent deleting of clinic groups used
"^DD",357.09,357.091,.06,1,1,"%D",3,0)
in parameter setup.
"^DD",357.09,357.091,.06,1,1,"DT")
2960220
"^DD",357.09,357.091,.06,21,0)
^^4^4^2951004^
"^DD",357.09,357.091,.06,21,1,0)
This field is a pointer to the PRINT MANAGERS CLINIC GROUPS file 
"^DD",357.09,357.091,.06,21,2,0)
(#357.99).  This stores the name of the clinic group that the
"^DD",357.09,357.091,.06,21,3,0)
encounter forms should be printed for.  Each Clinic Group has one
"^DD",357.09,357.091,.06,21,4,0)
or more clinics assigned to it.
"^DD",357.09,357.091,.06,"DT")
2960220
"^DD",357.09,357.091,.07,0)
DAYS TO PRINT AHEAD^RNJ2,0^^0;7^K:+X'=X!(X>10)!(X<0)!(X?.E1"."1N.N) X
"^DD",357.09,357.091,.07,3)
Type a Number between 0 and 10, 0 Decimal Digits
"^DD",357.09,357.091,.07,21,0)
^^2^2^2960109^^^
"^DD",357.09,357.091,.07,21,1,0)
This field contains a number which will be the number of days ahead
"^DD",357.09,357.091,.07,21,2,0)
that the encounter forms will be printed for.
"^DD",357.09,357.091,.07,23,0)
^^2^2^2960109^^
"^DD",357.09,357.091,.07,23,1,0)
 
"^DD",357.09,357.091,.07,23,2,0)
 
"^DD",357.09,357.091,.07,"DT")
2960109
"^DD",357.09,357.091,.08,0)
SPECIAL INSTRUCTIONS^S^R:RUN REGARDLESS;I:IGNORE BOTH WEEKENDS AND HOLIDAYS;W:IGNORE WEEKENDS;H:IGNORE HOLIDAYS;T:TODAY;N:NOT ACTIVE;^0;8^Q
"^DD",357.09,357.091,.08,21,0)
^^8^8^2960209^^
"^DD",357.09,357.091,.08,21,1,0)
This field will store the special instructions for the printing of
"^DD",357.09,357.091,.08,21,2,0)
the encounter forms.  The values for this field can be:
"^DD",357.09,357.091,.08,21,3,0)
 (I) Ignore both holidays and weekends
"^DD",357.09,357.091,.08,21,4,0)
 (R) Run Regardless
"^DD",357.09,357.091,.08,21,5,0)
 (W) Ignore Weekends
"^DD",357.09,357.091,.08,21,6,0)
 (H) Ignore Holidays
"^DD",357.09,357.091,.08,21,7,0)
 (T) Today
"^DD",357.09,357.091,.08,21,8,0)
 (N) Not active
"^DD",357.09,357.091,.08,"DT")
2960209
"^DD",357.09,357.091,.09,0)
DEVICE^FX^^0;9^N IBL S IBL=X,X=$P(X,";"),DIC=3.5,DIC(0)="EQ" D ^DIC K:Y'>0!(X=" ") X S:$D(X) X=X_$S(IBL[";":";"_$P(IBL,";",2,99),1:"") S DIC=DIE
"^DD",357.09,357.091,.09,3)
Answer must be 3-40 characters in length.
"^DD",357.09,357.091,.09,21,0)
^^3^3^2951004^
"^DD",357.09,357.091,.09,21,1,0)
This field contains a free text pointer to the device.  This stores the
"^DD",357.09,357.091,.09,21,2,0)
name of the printer where the encounter forms should be printed for
"^DD",357.09,357.091,.09,21,3,0)
the print job.
"^DD",357.09,357.091,.09,"DT")
2960402
"^DD",357.09,357.091,.1,0)
PRINT PRIORITY^RNJ6,2^^0;10^K:+X'=X!(X>999)!(X<1)!(X?.E1"."3N.N) X
"^DD",357.09,357.091,.1,1,0)
^.1
"^DD",357.09,357.091,.1,1,1,0)
357.09^SEQ
"^DD",357.09,357.091,.1,1,1,1)
S ^IBD(357.09,"SEQ",$E(X,1,30),DA(1),DA)=""
"^DD",357.09,357.091,.1,1,1,2)
K ^IBD(357.09,"SEQ",$E(X,1,30),DA(1),DA)
"^DD",357.09,357.091,.1,1,1,"%D",0)
^^1^1^2951004^
"^DD",357.09,357.091,.1,1,1,"%D",1,0)
Cross reference used to find sequences to print encounter forms.
"^DD",357.09,357.091,.1,1,1,"DT")
2951004
"^DD",357.09,357.091,.1,3)
Type a Number between 1 and 999, 2 Decimal Digits
"^DD",357.09,357.091,.1,21,0)
^^3^3^2971211^^
"^DD",357.09,357.091,.1,21,1,0)
This field contains a number which will be used to sequence the print
"^DD",357.09,357.091,.1,21,2,0)
job tasks.  The lower the number, the higher the priority of the job 
"^DD",357.09,357.091,.1,21,3,0)
and those will be queued to print first.
"^DD",357.09,357.091,.1,23,0)
^^1^1^2971211^
"^DD",357.09,357.091,.1,23,1,0)
 
"^DD",357.09,357.091,.1,"DT")
2951004
"^DD",357.09,357.091,.11,0)
TASK NUMBER^NJ9,0^^0;11^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",357.09,357.091,.11,3)
Type a Number between 0 and 999999999, 0 Decimal Digits
"^DD",357.09,357.091,.11,21,0)
^^6^6^2971229^^
"^DD",357.09,357.091,.11,21,1,0)
This field contains the task number from taskman, when a print job is
"^DD",357.09,357.091,.11,21,2,0)
queued to print.  It will delete the entry when the job finished.  This
"^DD",357.09,357.091,.11,21,3,0)
value is supplied by the system.  If the job has been interrupted,
"^DD",357.09,357.091,.11,21,4,0)
waiting to run or is running this value will be present.  This field
"^DD",357.09,357.091,.11,21,5,0)
is used by the action Queue Status on the Parameter Interface screen.
"^DD",357.09,357.091,.11,21,6,0)
That action will give the user the status of the queued job.
"^DD",357.09,357.091,.11,23,0)
^^1^1^2971229^
"^DD",357.09,357.091,.11,23,1,0)
 
"^DD",357.09,357.091,.11,"DT")
2951004
"^DD",357.09,357.091,.12,0)
LAST DAY PRINTED^D^^0;12^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",357.09,357.091,.12,21,0)
^^2^2^2951004^
"^DD",357.09,357.091,.12,21,1,0)
This field contains the last day teh encounter forms were printed for.
"^DD",357.09,357.091,.12,21,2,0)
This will keep track so that the date does not get printed again.
"^DD",357.09,357.091,.12,"DT")
2951004
"^DD",357.09,357.091,.13,0)
TIME QUEUED^FX^^0;13^K:$L(X)>4!($L(X)<4)!'(X?4N) X I $D(X),+$E(X,1,2)>24!(+$E(X,3,4)>59)!(+X>2400) K X
"^DD",357.09,357.091,.13,3)
Enter time as a 4 digit number from 0000 - 2400 (military time).  Answer must be 4 numbers in length.
"^DD",357.09,357.091,.13,21,0)
^^4^4^2990126^^^^
"^DD",357.09,357.091,.13,21,1,0)
This field stores the time that the job will queue to print. The user
"^DD",357.09,357.091,.13,21,2,0)
will supply the time as a 4 digit number from 0000 - 2400 (military time).
"^DD",357.09,357.091,.13,21,3,0)
This will allow the user to stagger the times certain print jobs start
"^DD",357.09,357.091,.13,21,4,0)
to print to different printers.
"^DD",357.09,357.091,.13,23,0)
^^1^1^2990126^^^^
"^DD",357.09,357.091,.13,23,1,0)
 
"^DD",357.09,357.091,.13,"DT")
2990126
"^DD",357.09,357.091,.14,0)
PREVIOUS TASK NUMBER^NJ9,0^^0;14^K:+X'=X!(X>999999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",357.09,357.091,.14,3)
Type a Number between 0 and 999999999, 0 Decimal Digits
"^DD",357.09,357.091,.14,21,0)
^^5^5^2971229^
"^DD",357.09,357.091,.14,21,1,0)
This field holds the previous task number of the print job if the job
"^DD",357.09,357.091,.14,21,2,0)
has not finished the task (due to paper jam etc.) before the job gets
"^DD",357.09,357.091,.14,21,3,0)
tasked again.  The current job will be the most recent task number and
"^DD",357.09,357.091,.14,21,4,0)
the previous task number will be the task number of the job that has
"^DD",357.09,357.091,.14,21,5,0)
not yet finished.
"^DD",357.09,357.091,.14,"DT")
2971229
"^DD",357.2,357.2,.19,0)
CLINICAL REMINDER DISPLAY TYPE^S^1:DUE NOW ONLY;2:ALL REMINDERS;^0;19^Q
"^DD",357.2,357.2,.19,3)
This determines the clincial reminders that will print on an encounter form.  Choose either to see only those due now or all appropriate reminders.
"^DD",357.2,357.2,.19,21,0)
^^7^7^2990105^^^^
"^DD",357.2,357.2,.19,21,1,0)
Enter "DUE NOW ONLY" if you want to print only those reminders that
"^DD",357.2,357.2,.19,21,2,0)
are currently due (this is sometimes called clinical reminder mode).
"^DD",357.2,357.2,.19,21,3,0)
 
"^DD",357.2,357.2,.19,21,4,0)
Enter "ALL REMINDERS" if you want to print all applicable reminders
"^DD",357.2,357.2,.19,21,5,0)
and a date due (this is sometimes called clincal maintenance mode).
"^DD",357.2,357.2,.19,21,6,0)
 
"^DD",357.2,357.2,.19,21,7,0)
Reminders that are not applicable for a patient will not print.
"^DD",357.2,357.2,.19,"DT")
2971023
"^DD",357.6,357.6,0)
FIELD^^21^56
"^DD",357.6,357.6,0,"ACT")
D ASK^IBDFU9
"^DD",357.6,357.6,0,"DDA")
N
"^DD",357.6,357.6,0,"DT")
2961021
"^DD",357.6,357.6,0,"ID",.06)
W ""
"^DD",357.6,357.6,0,"ID","WRITE")
N IBDWNAM S IBDWNAM=$E($P(^(0),U),1,40) D EN^DDIOL(IBDWNAM,"","!?0")
"^DD",357.6,357.6,0,"ID","WRITE1")
N IBDWTYPE S IBDWTYPE=$S($P(^(0),"^",6)=1:"INPUT",$P(^(0),"^",6)=2:"OUTPUT",$P(^(0),"^",6)=3:"SELECTION",1:"REPORT")_$S($P(^(0),"^",6)=3&'$P(^(0),"^",13):"  ** NOT SCANNABLE **",1:"") D EN^DDIOL("TYPE="_IBDWTYPE,"","?45")
"^DD",357.6,357.6,0,"IX","B",357.6,.01)

"^DD",357.6,357.6,0,"IX","C",357.6,.04)

"^DD",357.6,357.6,0,"IX","D",357.6,3)

"^DD",357.6,357.6,0,"IX","E",357.6,.01)

"^DD",357.6,357.6,0,"NM","PACKAGE INTERFACE")

"^DD",357.6,357.6,0,"PT",357.13,.03)

"^DD",357.6,357.6,0,"PT",357.14,.04)

"^DD",357.6,357.6,0,"PT",357.2,.11)

"^DD",357.6,357.6,0,"PT",357.5,.03)

"^DD",357.6,357.6,0,"PT",357.6,.13)

"^DD",357.6,357.6,0,"PT",357.93,.06)

"^DD",357.6,357.6,0,"PT",357.951,.03)

"^DD",357.6,357.6,0,"PT",357.952,.04)

"^DD",357.6,357.6,0,"PT",357.961,.03)

"^DD",357.6,357.6,0,"PT",357.962,.03)

"^DD",357.6,357.6,0,"PT",358.94,.06)

"^DD",357.6,357.6,0,"PT",359.3,.1)

"^DD",357.6,357.6,0,"PT",359.94,.06)

"^DD",357.6,357.6,0,"PT",409.9501,.01)

"^DD",357.6,357.6,0,"PT",409.9502,.01)

"^DD",357.6,357.6,0,"PT",409.961,.01)

"^DD",357.6,357.6,0,"VRPK")
IBD
"^DD",357.6,357.6,.01,0)
NAME^RFX^^0;1^K:$L(X)>40!($L(X)<3)!'(X'?1P.E) X
"^DD",357.6,357.6,.01,1,0)
^.1
"^DD",357.6,357.6,.01,1,1,0)
357.6^B
"^DD",357.6,357.6,.01,1,1,1)
S ^IBE(357.6,"B",$E(X,1,30),DA)=""
"^DD",357.6,357.6,.01,1,1,2)
K ^IBE(357.6,"B",$E(X,1,30),DA)
"^DD",357.6,357.6,.01,1,2,0)
357.6^E^MUMPS
"^DD",357.6,357.6,.01,1,2,1)
N IBDXE S IBDXE=$E(X,$F(X," "),40) S:$A(IBDXE)<33 IBDXE=X S ^IBE(357.6,"E",IBDXE,DA)=""
"^DD",357.6,357.6,.01,1,2,2)
N IBDXE S IBDXE=$E(X,$F(X," "),40) S:$A(IBDXE)<33 IBDXE=X K ^IBE(357.6,"E",IBDXE,DA)
"^DD",357.6,357.6,.01,1,2,"%D",0)
^^4^4^2970711^^^^
"^DD",357.6,357.6,.01,1,2,"%D",1,0)
 
"^DD",357.6,357.6,.01,1,2,"%D",2,0)
For package interfaces that are output routines the name has the custodial
"^DD",357.6,357.6,.01,1,2,"%D",3,0)
package's name space as a prefix. This cross-reference removes that
"^DD",357.6,357.6,.01,1,2,"%D",4,0)
prefix. It is used to improve the display of output routines for the user.
"^DD",357.6,357.6,.01,1,2,"DT")
2970711
"^DD",357.6,357.6,.01,3)
The name should be prefixed with the namespace of the package that provides the data.
"^DD",357.6,357.6,.01,21,0)
^^3^3^2951017^
"^DD",357.6,357.6,.01,21,1,0)
 
"^DD",357.6,357.6,.01,21,2,0)
The name of the Package Interface. The name should be preceded with the
"^DD",357.6,357.6,.01,21,3,0)
namespace of the package.
"^DD",357.6,357.6,.01,23,0)
^^1^1^2951017^^^
"^DD",357.6,357.6,.01,23,1,0)
 
"^DD",357.6,357.6,.01,"DT")
2970711
"^DD",357.6,357.6,.02,0)
ENTRY POINT^F^^0;2^K:$L(X)>8!($L(X)<1) X
"^DD",357.6,357.6,.02,3)
What entry point into the routine does this package interface use?
"^DD",357.6,357.6,.02,21,0)
^^2^2^2941018^^
"^DD",357.6,357.6,.02,21,1,0)
 
"^DD",357.6,357.6,.02,21,2,0)
The entry point in the routine that should be called.
"^DD",357.6,357.6,.02,"DT")
2941018
"^DD",357.6,357.6,.03,0)
ROUTINE^F^^0;3^K:$L(X)>8!($L(X)<1) X
"^DD",357.6,357.6,.03,3)
What routine does this package interface use?
"^DD",357.6,357.6,.03,21,0)
^^2^2^2941018^^
"^DD",357.6,357.6,.03,21,1,0)
 
"^DD",357.6,357.6,.03,21,2,0)
The routine that should be called.
"^DD",357.6,357.6,.03,"DT")
2921125
"^DD",357.6,357.6,.04,0)
CUSTODIAL PACKAGE^F^^0;4^K:$L(X)>30!($L(X)<3) X
"^DD",357.6,357.6,.04,1,0)
^.1
"^DD",357.6,357.6,.04,1,1,0)
357.6^C
"^DD",357.6,357.6,.04,1,1,1)
S ^IBE(357.6,"C",$E(X,1,30),DA)=""
"^DD",357.6,357.6,.04,1,1,2)
K ^IBE(357.6,"C",$E(X,1,30),DA)
"^DD",357.6,357.6,.04,1,1,"DT")
2921229
"^DD",357.6,357.6,.04,3)
Answer must be 3-30 characters in length.
"^DD",357.6,357.6,.04,21,0)
^^2^2^2951017^^
"^DD",357.6,357.6,.04,21,1,0)
This is a free text pointer to the package file. It serves only to
"^DD",357.6,357.6,.04,21,2,0)
document the custodial package of the data.
"^DD",357.6,357.6,.04,"DT")
2951017
"^DD",357.6,357.6,.05,0)
VARIABLE DATA?^S^0:NO;1:YES;^0;5^Q
"^DD",357.6,357.6,.05,.1)
DOES THE DATA VARY FROM PATIENT TO PATIENT?
"^DD",357.6,357.6,.05,3)
Enter YES if the data returned is variable, NO if the data is always the same.
"^DD",357.6,357.6,.05,21,0)
^^3^3^2930726^^^
"^DD",357.6,357.6,.05,21,1,0)
This field is used in the batch printing of encounter forms. The purpose
"^DD",357.6,357.6,.05,21,2,0)
is to avoid recomputing fields whose data does not change from patient to
"^DD",357.6,357.6,.05,21,3,0)
patient.
"^DD",357.6,357.6,.05,"DT")
2931124
"^DD",357.6,357.6,.06,0)
ACTION TYPE^RS^1:INPUT;2:DISPLAY;3:SELECTION;4:PRINT REPORT;^0;6^Q
"^DD",357.6,357.6,.06,3)
Is this interface for inputting data, displaying data to a form, for creating lists that will appear on a form, or for printing reports?
"^DD",357.6,357.6,.06,21,0)
^^10^10^2981216^^^^
"^DD",357.6,357.6,.06,21,1,0)

"^DD",357.6,357.6,.06,21,2,0)
Enter 1 for INPUT if the interface accepts data input from the user
"^DD",357.6,357.6,.06,21,3,0)
        and transmits the data to the appropriate package. 
"^DD",357.6,357.6,.06,21,4,0)
Enter 2 for DISPLAY if the interface retrieves data for display to a form.
"^DD",357.6,357.6,.06,21,5,0)
Enter 3 for SELECTION if the interface is for building a list to display
"^DD",357.6,357.6,.06,21,6,0)
        to a form.
"^DD",357.6,357.6,.06,21,7,0)
Enter 4 if the interface is for printing a report.
"^DD",357.6,357.6,.06,21,8,0)

"^DD",357.6,357.6,.06,21,9,0)
If the ACTION TYPE is SELECTION then the data type must be a record and
"^DD",357.6,357.6,.06,21,10,0)
the first piece must be the ID use to uniquely identify the selection.
"^DD",357.6,357.6,.06,23,0)
^^1^1^2981216^^^^
"^DD",357.6,357.6,.06,23,1,0)
 
"^DD",357.6,357.6,.06,"DT")
2950825
"^DD",357.6,357.6,.07,0)
DATA TYPE^S^1:SINGLE VALUE;2:RECORD;3:LIST OF SINGLE VALUES;4:LIST OF RECORDS;5:WORD PROCESSING;^0;7^Q
"^DD",357.6,357.6,.07,.1)
WHAT FORMAT WILL THE DATA BE IN?
"^DD",357.6,357.6,.07,3)
What format will the data be in?
"^DD",357.6,357.6,.07,21,0)
^^9^9^2981216^^
"^DD",357.6,357.6,.07,21,1,0)
Only applies to selection or display interfaces, both of which retrieve
"^DD",357.6,357.6,.07,21,2,0)
data for display to a form. It is the type of format the data should be
"^DD",357.6,357.6,.07,21,3,0)
in.
"^DD",357.6,357.6,.07,21,4,0)
 
"^DD",357.6,357.6,.07,21,5,0)
A single value is a string without pieces. A record is a set of strings
"^DD",357.6,357.6,.07,21,6,0)
concatenated together with "^" separating the pieces. A list is an
"^DD",357.6,357.6,.07,21,7,0)
indefinite number of values, each numbered, each containing the same type
"^DD",357.6,357.6,.07,21,8,0)
of information. A word processing data type will be in FM format.
"^DD",357.6,357.6,.07,21,9,0)
If the ACTION TYPE is SELECTION then the data type must be record.
"^DD",357.6,357.6,.07,"DT")
2930726
"^DD",357.6,357.6,.08,0)
PRINT COMPLETE^S^0:NO;1:YES;^0;8^Q
"^DD",357.6,357.6,.08,3)
If there is insufficient room on the form to print the data, should it be re-printed in full on a separate page?
"^DD",357.6,357.6,.08,21,0)
^^4^4^2930527^
"^DD",357.6,357.6,.08,21,1,0)
 
"^DD",357.6,357.6,.08,21,2,0)
This field is used to determine what should happen if the data does not
"^DD",357.6,357.6,.08,21,3,0)
fit in the space allocated to it on the form. If answered YES the data
"^DD",357.6,357.6,.08,21,4,0)
will be printed on another page.
"^DD",357.6,357.6,.08,"DT")
2930507
"^DD",357.6,357.6,.09,0)
AVAILABLE? (Y/N)^RS^0:NO;1:YES;^0;9^Q
"^DD",357.6,357.6,.09,3)
Is this package interface now available for use?
"^DD",357.6,357.6,.09,21,0)
^^3^3^2930527^
"^DD",357.6,357.6,.09,21,1,0)
 
"^DD",357.6,357.6,.09,21,2,0)
This field should be set to YES if the interface is available, NO if it is
"^DD",357.6,357.6,.09,21,3,0)
not available. Interfaces that are not available are not called.
"^DD",357.6,357.6,.09,"DT")
2921213
"^DD",357.6,357.6,.1,0)
HEALTH SUMMARY?^S^0:NO;1:YES;^0;10^Q
"^DD",357.6,357.6,.1,.1)
ARE YOU REQUESTING A HEALTH SUMMARY?
"^DD",357.6,357.6,.1,2.1)
S:Y=+Y Y=Y+1
"^DD",357.6,357.6,.1,3)
 Are you requesting a HEALTH SUMMARY to print?
"^DD",357.6,357.6,.1,21,0)
^^7^7^2930616^
"^DD",357.6,357.6,.1,21,1,0)
 
"^DD",357.6,357.6,.1,21,2,0)
This field will determine how to go about printing the report or form. It
"^DD",357.6,357.6,.1,21,3,0)
applies only to Package Interfaces of ACTION TYPE = PRINT REPORT. Health
"^DD",357.6,357.6,.1,21,4,0)
Summaries use the field HEALTH SUMMARY to determine the type of Health
"^DD",357.6,357.6,.1,21,5,0)
Summary to print. The process of printing Health Summaries dos not use the
"^DD",357.6,357.6,.1,21,6,0)
fields ENTRY POINT or ROUTINE, since all Health Summaries are printed in
"^DD",357.6,357.6,.1,21,7,0)
the same way.
"^DD",357.6,357.6,.1,"DT")
2930616
"^DD",357.6,357.6,.11,0)
TYPE OF HEALTH SUMMARY^*P142'^GMT(142,^0;11^S DIC("S")="I $P(^(0),U)'=""GMTS HS ADHOC OPTION""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",357.6,357.6,.11,3)
Which Health Summary do you want printed?
"^DD",357.6,357.6,.11,12)
EXCLUDES AD HOC HEALTH SUMMARIES
"^DD",357.6,357.6,.11,12.1)
S DIC("S")="I $P(^(0),U)'=""GMTS HS ADHOC OPTION"""
"^DD",357.6,357.6,.11,21,0)
^^4^4^2970819^^
"^DD",357.6,357.6,.11,21,1,0)
 
"^DD",357.6,357.6,.11,21,2,0)
This identifies the Health Summary that should be printed when this
"^DD",357.6,357.6,.11,21,3,0)
Package Interface is invoked. It should be null unless the HEALTH SUMMARY?
"^DD",357.6,357.6,.11,21,4,0)
field #.1 is coded YES.
"^DD",357.6,357.6,.11,"DT")
2930617
"^DD",357.6,357.6,.12,0)
TOOLKIT MEMBER?^S^0:NO;1:YES;^0;12^Q
"^DD",357.6,357.6,.12,.1)
SHOULD THIS PACKAGE INTERFACE BE PART OF THE TOOLKIT?
"^DD",357.6,357.6,.12,3)
Enter YES if this PACKAGE INTERFACE was added by the package developers as part of the toolkit, enter NO otherwise.
"^DD",357.6,357.6,.12,21,0)
^^3^3^2950808^^
"^DD",357.6,357.6,.12,21,1,0)
 
"^DD",357.6,357.6,.12,21,2,0)
Package Interfaces that are developed for national use will be documented
"^DD",357.6,357.6,.12,21,3,0)
as being part of the toolkit.
"^DD",357.6,357.6,.12,"DT")
2950711
"^DD",357.6,357.6,.13,0)
PACKAGE INTERFACE FOR INPUT^*P357.6'^IBE(357.6,^0;13^S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$P(^(0),U,16)[""S""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",357.6,357.6,.13,.1)
WHICH INTERFACE SHOULD THIS LIST USE FOR PASSING DATA TO THE DATA BASE?
"^DD",357.6,357.6,.13,3)
What interface should be used for inputting data entered on the selection list?
"^DD",357.6,357.6,.13,12)
Must be an available interfaces for accepting input from selection lists.
"^DD",357.6,357.6,.13,12.1)
S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$P(^(0),U,16)[""S"""
"^DD",357.6,357.6,.13,21,0)
^^1^1^2970902^^^^
"^DD",357.6,357.6,.13,21,1,0)
Used to map scanned data to DHCP.
"^DD",357.6,357.6,.13,"DT")
2950825
"^DD",357.6,357.6,.14,0)
DYNAMIC SELECTIONS^S^0:NO;1:YES;^0;14^Q
"^DD",357.6,357.6,.14,3)
Only for selection routines. Enter YES if the Package Interface builds the selection list each time the form is printed.
"^DD",357.6,357.6,.14,21,0)
^^2^2^2950719^
"^DD",357.6,357.6,.14,21,1,0)
This is used to indicate whether the interface is used to build selection
"^DD",357.6,357.6,.14,21,2,0)
lists at print time.
"^DD",357.6,357.6,.14,"DT")
2941221
"^DD",357.6,357.6,.15,0)
DO NOT USE DFN AS A SUBSCRIPT^*S^0:NO;1:YES;^0;15^Q
"^DD",357.6,357.6,.15,3)
If the patient DFN should not be used as a subscript when passing data enter YES.
"^DD",357.6,357.6,.15,12)
If the action type is not OUTPUT ROUTINE then this field should not be set to NO.
"^DD",357.6,357.6,.15,12.1)
S DIC("S")="I (Y=1)!($P(^IBE(357.6,DA,0),U,6)=2)"
"^DD",357.6,357.6,.15,21,0)
^^6^6^2950413^^^^
"^DD",357.6,357.6,.15,21,1,0)
Originally, the patient DFN was used as a subscript when returning data
"^DD",357.6,357.6,.15,21,2,0)
for Package Interfaces of type output, but not for other types of
"^DD",357.6,357.6,.15,21,3,0)
interfaces. It is no longer necessary for any new Package Interface to use
"^DD",357.6,357.6,.15,21,4,0)
DFN as a subscript, but, to maintain compatibilty, output routines
"^DD",357.6,357.6,.15,21,5,0)
must set this field to YES if DFN is not to be used as a subscript. This
"^DD",357.6,357.6,.15,21,6,0)
field has no effect on other types of interfaces.
"^DD",357.6,357.6,.15,"DT")
2950413
"^DD",357.6,357.6,.16,0)
ALLOWED OBJECT USE^FX^^0;16^S X=$$UPPER^VALM1(X) K:$L(X)>4!("SMHP"'[$E(X,1))!("SMHP"'[$E(X,2))!("SMHP"'[$E(X,3))!("SMHP"'[$E(X,4)) X
"^DD",357.6,357.6,.16,3)

"^DD",357.6,357.6,.16,4)
D HELP7^IBDFU5A
"^DD",357.6,357.6,.16,21,0)
^^5^5^2950913^^^^
"^DD",357.6,357.6,.16,21,1,0)
This field applies only to package interfaces for input and is used to
"^DD",357.6,357.6,.16,21,2,0)
determine which package interfaces a particular type of form object may
"^DD",357.6,357.6,.16,21,3,0)
point to. Some combinations don't make sense. For example, it would not
"^DD",357.6,357.6,.16,21,4,0)
make sense to allow a multiple choice question to point to vitals, which
"^DD",357.6,357.6,.16,21,5,0)
is used to input data such as temperature and blood pressure.
"^DD",357.6,357.6,.16,"DT")
2950913
"^DD",357.6,357.6,.17,0)
ASK FOR ADDITIONAL NARRATIVE^S^0:NO;1:YES;^0;17^Q
"^DD",357.6,357.6,.17,21,0)
^^7^7^2951207^
"^DD",357.6,357.6,.17,21,1,0)
Enter whether users should be prompt for specifying the provider narrative
"^DD",357.6,357.6,.17,21,2,0)
that will be sent to PCE (and problem list) when creating a selection list.
"^DD",357.6,357.6,.17,21,3,0)
If this is answered no and the narrative is sent to PCE then the text as it
"^DD",357.6,357.6,.17,21,4,0)
appears on the form will be used as the provider narrative.
"^DD",357.6,357.6,.17,21,5,0)
 
"^DD",357.6,357.6,.17,21,6,0)
Generally only dianosis and clinical lexicon entries will want this field 
"^DD",357.6,357.6,.17,21,7,0)
set to Yes.
"^DD",357.6,357.6,.17,"DT")
2951207
"^DD",357.6,357.6,.18,0)
ASK FOR CLINICAL LEXICON^S^0:NO;1:YES;^0;18^Q
"^DD",357.6,357.6,.18,3)
Enter 'Yes' if you want to map entries from this interface to the clinical lexicon
"^DD",357.6,357.6,.18,21,0)
^^10^10^2960205^
"^DD",357.6,357.6,.18,21,1,0)
If this field is answered 'Yes' then users who are editing or creating
"^DD",357.6,357.6,.18,21,2,0)
selection lists based on this interface will be asked to map each entry
"^DD",357.6,357.6,.18,21,3,0)
(thought it is optional) to a clinical lexicon entry.  This is highly
"^DD",357.6,357.6,.18,21,4,0)
recommended for user who are scanning diagnosis entries and trying to 
"^DD",357.6,357.6,.18,21,5,0)
add entries to the Patients Problem list.
"^DD",357.6,357.6,.18,21,6,0)
 
"^DD",357.6,357.6,.18,21,7,0)
The primary purpose of this field is to allow sites who have built selection
"^DD",357.6,357.6,.18,21,8,0)
lists using the ICD9 Diagnosis file to map each entry to the clinical lexicon.
"^DD",357.6,357.6,.18,21,9,0)
The Problem List EP has recommended that each problem added to the problem
"^DD",357.6,357.6,.18,21,10,0)
list be associated with a clinical lexicon entry.
"^DD",357.6,357.6,.18,"DT")
2960205
"^DD",357.6,357.6,.19,0)
DQ REQUIRED^S^1:YES;^0;19^Q
"^DD",357.6,357.6,.19,21,0)
^^2^2^2960228^^
"^DD",357.6,357.6,.19,21,1,0)
Field used to determine if a data qualifier is required for this
"^DD",357.6,357.6,.19,21,2,0)
input interface.
"^DD",357.6,357.6,.19,"DT")
2960212
"^DD",357.6,357.6,.2,0)
ASK FOR CLINICAL REMINDERS^S^0:NO;1:YES;^0;20^Q
"^DD",357.6,357.6,.2,3)
If this package interface is for display of clinical reminders answer yes, otherwise answer no.
"^DD",357.6,357.6,.2,21,0)
^^2^2^2990122^^^^
"^DD",357.6,357.6,.2,21,1,0)
If this package interface is for display of clinical reminders answer 
"^DD",357.6,357.6,.2,21,2,0)
yes, otherwise answer no.
"^DD",357.6,357.6,.2,"DT")
2971002
"^DD",357.6,357.6,1,0)
DESCRIPTION^357.61^^1;0
"^DD",357.6,357.6,1,21,0)
^^1^1^2950719^^^^
"^DD",357.6,357.6,1,21,1,0)
Should describe the data being exchanged by the package interface.
"^DD",357.6,357.6,2.01,0)
PIECE 1 DESCRIPTIVE NAME^F^^2;1^K:$L(X)>30!($L(X)<3) X
"^DD",357.6,357.6,2.01,.1)
WHAT IS THE FIRST PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",357.6,357.6,2.01,3)
Answer must be 3-30 characters in length.
"^DD",357.6,357.6,2.01,21,0)
^^3^3^2930527^
"^DD",357.6,357.6,2.01,21,1,0)
 
"^DD",357.6,357.6,2.01,21,2,0)
Should be a descriptive name of the first field in the record returned by
"^DD",357.6,357.6,2.01,21,3,0)
the interface.
"^DD",357.6,357.6,2.01,"DT")
2930726
"^DD",357.6,357.6,2.02,0)
PIECE 1 MAXIMUM LENGTH^NJ3,0^^2;2^K:+X'=X!(X>210)!(X<0)!(X?.E1"."1N.N) X
"^DD",357.6,357.6,2.02,.1)
WHAT IS ITS MAXIMUM LENGTH?
"^DD",357.6,357.6,2.02,3)
Type a Number between 0 and 210, 0 Decimal Digits
"^DD",357.6,357.6,2.02,21,0)
^^3^3^2930527^
"^DD",357.6,357.6,2.02,21,1,0)
 
"^DD",357.6,357.6,2.02,21,2,0)
The maximum length of the first field of the record returned by the
"^DD",357.6,357.6,2.02,21,3,0)
interface.
"^DD",357.6,357.6,2.02,"DT")
2930726
"^DD",357.6,357.6,2.16,0)
PIECE 1 RECOMMENDED HEADER^F^^2;16^K:$L(X)>20!($L(X)<1) X
"^DD",357.6,357.6,2.16,3)
Answer must be 1-20 characters in length.
"^DD",357.6,357.6,2.16,21,0)
^^1^1^2950719^
"^DD",357.6,357.6,2.16,21,1,0)
The recommended header will be used as the default when designing a form.
"^DD",357.6,357.6,2.16,"DT")
2950417
"^DD",357.6,357.6,2.17,0)
IS PIECE 1 DISPLAYABLE?^S^0:NO;1:YES;^2;17^Q
"^DD",357.6,357.6,2.17,.1)
CAN THIS FIELD BE DISPLAYED TO THE USER?
"^DD",357.6,357.6,2.17,3)
The first piece of the returned record is reserved for the unique id of the selection. Enter no if it should not be displayed, for example, if it is a pointer.
"^DD",357.6,357.6,2.17,21,0)
^^3^3^2950719^^
"^DD",357.6,357.6,2.17,21,1,0)
This is used only for selection type interfaces. If NO, then the value can
"^DD",357.6,357.6,2.17,21,2,0)
not be displayed to the encounter form.  The first piece must contain the
"^DD",357.6,357.6,2.17,21,3,0)
unique id of the selection.
"^DD",357.6,357.6,2.17,"DT")
2930810
"^DD",357.6,357.6,2.18,0)
EXPORT SELECTIONS/CHOICES?^S^0:NO;1:YES;^2;18^Q
"^DD",357.6,357.6,2.18,3)
Enter NO if the ID returned by the PACKAGE INTERFACE is not constant between sites, for example, if it is a pointer. Otherwise answer YES.
"^DD",357.6,357.6,2.18,21,0)
^^8^8^2950825^
"^DD",357.6,357.6,2.18,21,1,0)
 
"^DD",357.6,357.6,2.18,21,2,0)
 
"^DD",357.6,357.6,2.18,21,3,0)
Applies to selection and input routines. Determines whether
"^DD",357.6,357.6,2.18,21,4,0)
selections appearing on selection lists and choices in a multiple choice
"^DD",357.6,357.6,2.18,21,5,0)
field will be exported along with the form that they appear on. The
"^DD",357.6,357.6,2.18,21,6,0)
import/export utility will not resolve pointers, so if the id used by
"^DD",357.6,357.6,2.18,21,7,0)
the package interface is a pointer that differs between sites
"^DD",357.6,357.6,2.18,21,8,0)
this field should contain NO.
"^DD",357.6,357.6,2.18,"DT")
2950825
"^DD",357.6,357.6,3,0)
USER LOOKUP^F^^3;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>240!($L(X)<1) X
"^DD",357.6,357.6,3,.1)
LIST OF WORDS TO MAKE LOOK-UPS EASIER
"^DD",357.6,357.6,3,1,0)
^.1
"^DD",357.6,357.6,3,1,1,0)
357.6^D^KWIC
"^DD",357.6,357.6,3,1,1,1)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2,^DD("KWIC")'[I S ^IBE(357.6,"D",I,DA)=""
"^DD",357.6,357.6,3,1,1,2)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2 K ^IBE(357.6,"D",I,DA)
"^DD",357.6,357.6,3,1,1,"%D",0)
^^3^3^2930409^^
"^DD",357.6,357.6,3,1,1,"%D",1,0)
 
"^DD",357.6,357.6,3,1,1,"%D",2,0)
This index is meant to assist the user in locating the correct package
"^DD",357.6,357.6,3,1,1,"%D",3,0)
interface needed to display a particular item of data to a form.
"^DD",357.6,357.6,3,1,1,"DT")
2930309
"^DD",357.6,357.6,3,3)
Enter words separated with spaces. They will be indexed to assist in lookup.
"^DD",357.6,357.6,3,4)
D LOOKUP^IBDF16
"^DD",357.6,357.6,3,21,0)
^^4^4^2940217^
"^DD",357.6,357.6,3,21,1,0)
 
"^DD",357.6,357.6,3,21,2,0)
This field is used to create a KWIC index for this file. The purpose is to
"^DD",357.6,357.6,3,21,3,0)
assist the user in locating the package interface he needs to display a
"^DD",357.6,357.6,3,21,4,0)
particular item of data to a form.
"^DD",357.6,357.6,3,"DT")
2930726
"^DD",357.6,357.6,4.01,0)
ENTRY ACTION^K^^4;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,4.01,3)
This is Standard MUMPS code.
"^DD",357.6,357.6,4.01,9)
@
"^DD",357.6,357.6,4.01,21,0)
^^3^3^2930527^
"^DD",357.6,357.6,4.01,21,1,0)
 
"^DD",357.6,357.6,4.01,21,2,0)
This code will be executed after the PROTECTED VARIABLES are newed, but
"^DD",357.6,357.6,4.01,21,3,0)
before the interface routine is called.
"^DD",357.6,357.6,4.01,"DT")
2930521
"^DD",357.6,357.6,5.01,0)
EXIT ACTION^K^^5;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,5.01,3)
This is Standard MUMPS code.
"^DD",357.6,357.6,5.01,9)
@
"^DD",357.6,357.6,5.01,21,0)
^^3^3^2930528^
"^DD",357.6,357.6,5.01,21,1,0)
 
"^DD",357.6,357.6,5.01,21,2,0)
This code will be executed after the interface routine is called.
"^DD",357.6,357.6,5.01,21,3,0)
The effect of the NEW done on the PROTECTED VARIABLES is still in effect.
"^DD",357.6,357.6,5.01,"DT")
2930518
"^DD",357.6,357.6,6,0)
PROTECTED LOCAL VARIABLES^357.66^^6;0
"^DD",357.6,357.6,6,21,0)
^^11^11^2950719^^^
"^DD",357.6,357.6,6,21,1,0)
 
"^DD",357.6,357.6,6,21,2,0)
This is a list of variables that should be newed before the entry action
"^DD",357.6,357.6,6,21,3,0)
or calling the interface routine. It is protection against interfaces that
"^DD",357.6,357.6,6,21,4,0)
alter or kill variables, or entry actions that do so. Note that REQUIRED
"^DD",357.6,357.6,6,21,5,0)
VARIABLES should not also be PROTECTED VARIABLES. If an interface routine
"^DD",357.6,357.6,6,21,6,0)
changes a required variable, however, there is a way to protect it.
"^DD",357.6,357.6,6,21,7,0)
Supposing, for example, DFN is killed by the interface. This will protect
"^DD",357.6,357.6,6,21,8,0)
it:
"^DD",357.6,357.6,6,21,9,0)
     PROTECTED VARIABLE:   IBDFN
"^DD",357.6,357.6,6,21,10,0)
     ENTRY ACTION:  S IBDFN=DFN
"^DD",357.6,357.6,6,21,11,0)
     EXIT ACTION:   S DFN=IBDFN
"^DD",357.6,357.6,7,0)
REQUIRED LOCAL VARIABLES^357.67^^7;0
"^DD",357.6,357.6,7,21,0)
^^4^4^2930528^
"^DD",357.6,357.6,7,21,1,0)
 
"^DD",357.6,357.6,7,21,2,0)
The interface may require inputs. This field is a list of the required
"^DD",357.6,357.6,7,21,3,0)
local variables. The interface will not be called unless the variables are
"^DD",357.6,357.6,7,21,4,0)
determined to exist.
"^DD",357.6,357.6,9,0)
PCE DIM INPUT TRANSFORM^K^^9;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,9,3)
The input transform should transform X to the value that should be passed.
"^DD",357.6,357.6,9,9)
@
"^DD",357.6,357.6,9,21,0)
^^3^3^2960401^^
"^DD",357.6,357.6,9,21,1,0)
Used to transform X, the identifier stored with the form object, to the
"^DD",357.6,357.6,9,21,2,0)
form that should be passed to the PCE Device Interface Module. It may, for
"^DD",357.6,357.6,9,21,3,0)
example, transform a code to an ien.
"^DD",357.6,357.6,9,"DT")
2960401
"^DD",357.6,357.6,10,0)
HELP TEXT^F^^10;1^K:$L(X)>245!($L(X)<1) X
"^DD",357.6,357.6,10,3)
This should provide some help to the user who is trying to enter a value associated with a bubble.
"^DD",357.6,357.6,10,21,0)
^^2^2^2950817^^^
"^DD",357.6,357.6,10,21,1,0)
This should provide some help to the user who is trying to enter a value
"^DD",357.6,357.6,10,21,2,0)
associated with a bubble.
"^DD",357.6,357.6,10,"DT")
2950522
"^DD",357.6,357.6,11,0)
VALIDATOR^K^^11;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,11,3)
This is Standard MUMPS code will kill X if X no longer identifies a valid code.
"^DD",357.6,357.6,11,9)
@
"^DD",357.6,357.6,11,21,0)
^^7^7^2981222^^
"^DD",357.6,357.6,11,21,1,0)
This field is used to validate codes currently on a form. The variable X
"^DD",357.6,357.6,11,21,2,0)
should be set to the identifier that was returned by the Package
"^DD",357.6,357.6,11,21,3,0)
Interface. For selection interfaces, the identifier is always piece 1 of
"^DD",357.6,357.6,11,21,4,0)
the 0 node of the entry in the selection list. Xecuting this field will
"^DD",357.6,357.6,11,21,5,0)
result in X being killed if the value is not valid. This is used by the
"^DD",357.6,357.6,11,21,6,0)
maintanance utility, for example, to find CPT codes that have been
"^DD",357.6,357.6,11,21,7,0)
inactivated.
"^DD",357.6,357.6,11,"DT")
2950908
"^DD",357.6,357.6,12.01,0)
PCE DIM NODE^F^^12;1^K:$L(X)>30!($L(X)<1) X
"^DD",357.6,357.6,12.01,3)
What node will be used to pass the data?
"^DD",357.6,357.6,12.01,21,0)
^^1^1^2951017^^
"^DD",357.6,357.6,12.01,21,1,0)
The node used to pass the data to PCE, using the PCE DEVICE INTERFACE MODULE.
"^DD",357.6,357.6,12.01,"DT")
2951017
"^DD",357.6,357.6,12.02,0)
PCE DIM PIECE, VALUE^NJ2,0^^12;2^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.6,12.02,3)
What piece should be used to pass the value?
"^DD",357.6,357.6,12.02,21,0)
^^1^1^2951017^^^
"^DD",357.6,357.6,12.02,21,1,0)
The piece in the PXCA node used to pass the input value.
"^DD",357.6,357.6,12.02,"DT")
2951017
"^DD",357.6,357.6,12.03,0)
PCE DIM PIECE, NARRATIVE^NJ2,0^^12;3^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.6,12.03,3)
What piece should be used to pass the text displayed on the form?
"^DD",357.6,357.6,12.03,21,0)
^^1^1^2950317^^^
"^DD",357.6,357.6,12.03,21,1,0)
The piece in the PCXA node used to pass the text displayed on the form.
"^DD",357.6,357.6,12.03,"DT")
2951017
"^DD",357.6,357.6,12.04,0)
PCE DIM PIECE, HEADER^NJ2,0^^12;4^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.6,12.04,3)
What piece should be used to pass the header displayed on the form?
"^DD",357.6,357.6,12.04,21,0)
^^2^2^2951017^
"^DD",357.6,357.6,12.04,21,1,0)
The piece on the node specified by the PCE DIM that the header is mapped
"^DD",357.6,357.6,12.04,21,2,0)
to.
"^DD",357.6,357.6,12.04,"DT")
2951017
"^DD",357.6,357.6,12.05,0)
PCE DIM PIECE, DATA QUALIFIER^NJ2,0^^12;5^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.6,12.05,3)
What piece should be used to pass the data qualifier?
"^DD",357.6,357.6,12.05,21,0)
^^1^1^2971028^^
"^DD",357.6,357.6,12.05,21,1,0)
The piece of the PXCA node where the data modifier belongs.
"^DD",357.6,357.6,12.05,"DT")
2951017
"^DD",357.6,357.6,12.06,0)
PCE DIM PIECE, QUANTITY^NJ2,0^^12;6^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.6,12.06,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",357.6,357.6,12.06,21,0)
^^2^2^2961031^^
"^DD",357.6,357.6,12.06,21,1,0)
An entry in this field indicates which piece of the array the quantity
"^DD",357.6,357.6,12.06,21,2,0)
should be passed on when sending data to PCE.
"^DD",357.6,357.6,12.06,"DT")
2961015
"^DD",357.6,357.6,13,0)
ALLOWABLE QUALIFIERS^357.613V^^13;0
"^DD",357.6,357.6,13,21,0)
^^2^2^2971028^^^
"^DD",357.6,357.6,13,21,1,0)
This mulitiple contains the list of qualifiers that may apply to the
"^DD",357.6,357.6,13,21,2,0)
data.
"^DD",357.6,357.6,14,0)
PCE DIM OUTPUT TRANSFORM^K^^14;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,14,3)
This should change Y, the value to be passed, to a value suitable for display.
"^DD",357.6,357.6,14,9)
@
"^DD",357.6,357.6,14,21,0)
^^3^3^2960401^^
"^DD",357.6,357.6,14,21,1,0)
This transform should set Y, the value to be passed to the PCE 
"^DD",357.6,357.6,14,21,2,0)
Device Interface Module (DIM), to a value that is suitable for
"^DD",357.6,357.6,14,21,3,0)
display. It may, for example, change an ien to a code.
"^DD",357.6,357.6,14,"DT")
2960401
"^DD",357.6,357.6,15,0)
DATA DESCRIPTION^357.615I^^15;0
"^DD",357.6,357.6,15,21,0)
^^2^2^2950330^
"^DD",357.6,357.6,15,21,1,0)
For interfaces that return records, this multiple stores information on
"^DD",357.6,357.6,15,21,2,0)
the fields, other than the first field.
"^DD",357.6,357.6,16.1,0)
ALLOW INPUT OF NARRATIVE?^S^n:NO;o:OPTIONAL;r:REQUIRED;^16;1^Q
"^DD",357.6,357.6,16.1,3)
Should the user be allowed to enter a narrative? Answer n=NO, o=OPTIONAL, r=REQUIRED
"^DD",357.6,357.6,16.1,21,0)
^^2^2^2950915^
"^DD",357.6,357.6,16.1,21,1,0)
For selection interfaces, this field determines whether a narrative is
"^DD",357.6,357.6,16.1,21,2,0)
allowed by the PCE Generic Device Interface.
"^DD",357.6,357.6,16.1,"DT")
2950421
"^DD",357.6,357.6,16.2,0)
NARRATIVE DATA TYPE^P359.1'^IBE(359.1,^16;2^Q
"^DD",357.6,357.6,16.2,3)
What data type definition describes the narrative?
"^DD",357.6,357.6,16.2,21,0)
^^2^2^2950719^
"^DD",357.6,357.6,16.2,21,1,0)
This determines, among other things, how much space to allocate for the
"^DD",357.6,357.6,16.2,21,2,0)
narrative.
"^DD",357.6,357.6,16.2,"DT")
2950426
"^DD",357.6,357.6,16.3,0)
NARRATIVE HEADER^F^^16;3^K:$L(X)>40!($L(X)<1) X
"^DD",357.6,357.6,16.3,3)
Answer must be 1-40 characters in length.
"^DD",357.6,357.6,16.3,21,0)
^^1^1^2950825^
"^DD",357.6,357.6,16.3,21,1,0)
Used to label the narrative field.
"^DD",357.6,357.6,16.3,"DT")
2950815
"^DD",357.6,357.6,16.5,0)
ALLOW INPUT OF PRIMARY VALUE?^S^n:NO;o:OPTIONAL;r:REQUIRED;^16;5^Q
"^DD",357.6,357.6,16.5,3)
Should a code be entered? n=NO, o=OPTIONAL, r=REQUIRED
"^DD",357.6,357.6,16.5,21,0)
^^2^2^2950915^
"^DD",357.6,357.6,16.5,21,1,0)
For selectin interfaces this determines whether a value, other than a
"^DD",357.6,357.6,16.5,21,2,0)
narrative, can be entered.
"^DD",357.6,357.6,16.5,"DT")
2950426
"^DD",357.6,357.6,16.6,0)
PRIMARY VALUE DATA TYPE^P359.1'^IBE(359.1,^16;6^Q
"^DD",357.6,357.6,16.6,3)
What type of data is the primary value?
"^DD",357.6,357.6,16.6,21,0)
^^2^2^2950915^
"^DD",357.6,357.6,16.6,21,1,0)
For selection interfaces this determines, among other things, the data
"^DD",357.6,357.6,16.6,21,2,0)
type of the value to be entered.
"^DD",357.6,357.6,16.6,"DT")
2950426
"^DD",357.6,357.6,16.7,0)
PRIMARY VALUE HEADER^F^^16;7^K:$L(X)>40!($L(X)<1) X
"^DD",357.6,357.6,16.7,3)
Answer must be 1-40 characters in length.
"^DD",357.6,357.6,16.7,21,0)
^^1^1^2950815^
"^DD",357.6,357.6,16.7,21,1,0)
Used to label the primary value field.
"^DD",357.6,357.6,16.7,"DT")
2950815
"^DD",357.6,357.6,16.8,0)
ALLOW MULTIPLIERS^S^1:YES;^16;8^Q
"^DD",357.6,357.6,16.8,3)
Enter yes if this interface will allow entry of quantity at form development time.
"^DD",357.6,357.6,16.8,21,0)
^^3^3^2961031^^
"^DD",357.6,357.6,16.8,21,1,0)
For selection interfaces, this determines whether 'quantity' should be
"^DD",357.6,357.6,16.8,21,2,0)
asked at form development time to pass multiple occurrences of a selection
"^DD",357.6,357.6,16.8,21,3,0)
to PCE.
"^DD",357.6,357.6,16.8,"DT")
2961008
"^DD",357.6,357.6,16.9,0)
ALLOW INPUT OF MULTIPLE CODES?^S^1:YES;^16;9^Q
"^DD",357.6,357.6,16.9,3)
Enter a 1 for 'YES'.
"^DD",357.6,357.6,16.9,21,0)
^^4^4^2961216^^^^
"^DD",357.6,357.6,16.9,21,1,0)
Enter a one in this field if the users will be allowed to add more than
"^DD",357.6,357.6,16.9,21,2,0)
one code to pass along to PCE when one entry is bubbled.
"^DD",357.6,357.6,16.9,21,3,0)
Data in this field REQUIRES that field 17 be populated with mumps code
"^DD",357.6,357.6,16.9,21,4,0)
that will allow selection of the code if the entry is edited.
"^DD",357.6,357.6,16.9,"DT")
2961021
"^DD",357.6,357.6,17,0)
SELECTOR^K^^17;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,17,3)
Enter mumps code that will allow the form designer to add a choice to a multiple choice field.
"^DD",357.6,357.6,17,9)
@
"^DD",357.6,357.6,17,21,0)
^^9^9^2951208^^^
"^DD",357.6,357.6,17,21,1,0)
This field only applies to input interfaces. It is executed as by an input
"^DD",357.6,357.6,17,21,2,0)
transform when creating a multiple choice field. It should:
"^DD",357.6,357.6,17,21,3,0)
1) Kill X if an nothing is selected, otherwise set X to a value suitable
"^DD",357.6,357.6,17,21,4,0)
for display, perhaps the code.
"^DD",357.6,357.6,17,21,5,0)
2) Set IBLABEL to a suitable label for the choice.
"^DD",357.6,357.6,17,21,6,0)
3) Set IBID to an identifier. The identifier should ideally be exportable,
"^DD",357.6,357.6,17,21,7,0)
meaning the same from site to site. This usually means a coded value
"^DD",357.6,357.6,17,21,8,0)
rather than an ien. The identfier should match that of a corresponding
"^DD",357.6,357.6,17,21,9,0)
selection interface, if there is one.
"^DD",357.6,357.6,17,"DT")
2950908
"^DD",357.6,357.6,18,0)
MANUAL DATA ENTRY ROUTINE^K^^18;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,18,3)
Enter the code to be executed during manual data entry for this interface.  This is Standard MUMPS code.
"^DD",357.6,357.6,18,9)
@
"^DD",357.6,357.6,18,21,0)
^^10^10^2951208^
"^DD",357.6,357.6,18,21,1,0)
Enter the code to be executed to do manual data entry for this interface.
"^DD",357.6,357.6,18,21,2,0)
 
"^DD",357.6,357.6,18,21,3,0)
This field should only be completed for input package interfaces.  This
"^DD",357.6,357.6,18,21,4,0)
code will be executed to provide quick data entry for a user trying to
"^DD",357.6,357.6,18,21,5,0)
input data for a form.  It is expected that the output of this field will
"^DD",357.6,357.6,18,21,6,0)
be used to format the PXCA array prior to calling PCE to file the data
"^DD",357.6,357.6,18,21,7,0)
for the encounter.
"^DD",357.6,357.6,18,21,8,0)

"^DD",357.6,357.6,18,21,9,0)
Developers writing routines for this entry should provide a roll and scroll
"^DD",357.6,357.6,18,21,10,0)
interface for manaul entry of items only on the form.
"^DD",357.6,357.6,18,"DT")
2951208
"^DD",357.6,357.6,19,0)
EXTERNAL DISPLAY VALUES^K^^19;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,19,3)
This is Standard MUMPS code.
"^DD",357.6,357.6,19,9)
@
"^DD",357.6,357.6,19,21,0)
^^5^5^2960228^^^^
"^DD",357.6,357.6,19,21,1,0)
Executable code used to translate the internal value that is to
"^DD",357.6,357.6,19,21,2,0)
be passed to PCE into its external value for display purposes.  It
"^DD",357.6,357.6,19,21,3,0)
is used by the data validation routines to display the external
"^DD",357.6,357.6,19,21,4,0)
values and descriptions of what is to be passed, to the
"^DD",357.6,357.6,19,21,5,0)
user for verification.
"^DD",357.6,357.6,19,"DT")
2960214
"^DD",357.6,357.6,20,0)
PASS DQ AS VALUE^S^1:YES;^20;1^Q
"^DD",357.6,357.6,20,3)
Enter Yes if the Data Qualifier should be passed as the Value when sending data to PCE.
"^DD",357.6,357.6,20,21,0)
^^7^7^2961031^^
"^DD",357.6,357.6,20,21,1,0)
If the value of the Data Qualifier shall be passed to PCE as the VALUE,
"^DD",357.6,357.6,20,21,2,0)
this field should be set to one.  Doing so will prevent the data in the
"^DD",357.6,357.6,20,21,3,0)
VALUE from populating the PCE DIM NODE, but instead, will allow the Data
"^DD",357.6,357.6,20,21,4,0)
Qualifier to pass as the VALUE.
"^DD",357.6,357.6,20,21,5,0)
This is used mostly for YES/NO Data Qualifiers, where the value may
"^DD",357.6,357.6,20,21,6,0)
be a question, and the Data Qualifier Value, if bubbled, is the value
"^DD",357.6,357.6,20,21,7,0)
that must be placed on the PCE DIM NODE.
"^DD",357.6,357.6,20,"DT")
2961001
"^DD",357.6,357.6,21,0)
PCE DIM PIECE, VARIABLE VALUE^K^^21;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",357.6,357.6,21,3)
This is Standard MUMPS code.
"^DD",357.6,357.6,21,9)
@
"^DD",357.6,357.6,21,21,0)
^^7^7^2961031^^^
"^DD",357.6,357.6,21,21,1,0)
This field should be populated when the PCE DIM PIECE VALUE is not
"^DD",357.6,357.6,21,21,2,0)
constant.  If the value of that field is dependent upon specific conditions,
"^DD",357.6,357.6,21,21,3,0)
those conditions may be evaluated by placing the MUMPS code in this
"^DD",357.6,357.6,21,21,4,0)
field.  Ultimately, the code should return a value that will be used as
"^DD",357.6,357.6,21,21,5,0)
the PCE DIM PIECE VALUE.  If the return value is null, the original
"^DD",357.6,357.6,21,21,6,0)
PCE DIM PIECE VALUE field will be used to determine the piece location
"^DD",357.6,357.6,21,21,7,0)
to pass the VALUE on.
"^DD",357.6,357.6,21,"DT")
2961001
"^DD",357.6,357.61,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",357.6,357.61,0,"DT")
2921119
"^DD",357.6,357.61,0,"NM","DESCRIPTION")

"^DD",357.6,357.61,0,"UP")
357.6
"^DD",357.6,357.61,.01,0)
/6^W^^0;1^Q
"^DD",357.6,357.61,.01,3)
Enter a description of the data being exchanged.
"^DD",357.6,357.61,.01,21,0)
^^1^1^2950719^^
"^DD",357.6,357.61,.01,21,1,0)
This should describe the data being exchanged b the package interface.
"^DD",357.6,357.61,.01,"DT")
2930210
"^DD",357.6,357.613,0)
ALLOWABLE QUALIFIERS SUB-FIELD^^.01^6
"^DD",357.6,357.613,0,"DT")
2950810
"^DD",357.6,357.613,0,"IX","B",357.613,.01)

"^DD",357.6,357.613,0,"NM","ALLOWABLE QUALIFIERS")

"^DD",357.6,357.613,0,"UP")
357.6
"^DD",357.6,357.613,.01,0)
ALLOWABLE QUALIFIERS^MV^^0;1^Q
"^DD",357.6,357.613,.01,1,0)
^.1
"^DD",357.6,357.613,.01,1,1,0)
357.613^B
"^DD",357.6,357.613,.01,1,1,1)
S ^IBE(357.6,DA(1),13,"B",$E(X,1,30),DA)=""
"^DD",357.6,357.613,.01,1,1,2)
K ^IBE(357.6,DA(1),13,"B",$E(X,1,30),DA)
"^DD",357.6,357.613,.01,1,1,3)
Required Index for Variable Pointer
"^DD",357.6,357.613,.01,3)
Which qualifiers can apply to the data?
"^DD",357.6,357.613,.01,21,0)
^^1^1^2950814^^
"^DD",357.6,357.613,.01,21,1,0)
A qualifier that can be used by this package interface.
"^DD",357.6,357.613,.01,"DT")
2950426
"^DD",357.6,357.613,.01,"V",0)
^.12P^2^2
"^DD",357.6,357.613,.01,"V",1,0)
357.98^DATA QUALIFIER^1^Q^n^n
"^DD",357.6,357.613,.01,"V",2,0)
359.1^TYPE OF DATA^2^D^n^n
"^DD",357.6,357.613,.03,0)
INDEPENDENT MAPPING INFO?^RS^0:NO;1:YES;^0;3^Q
"^DD",357.6,357.613,.03,3)
YES means that fields on the form associated with this qualifier will have its own rules for entering the data to the database.
"^DD",357.6,357.613,.03,21,0)
^^1^1^2951017^
"^DD",357.6,357.613,.03,21,1,0)
YES means that data can be mapped into the PCE DIM based on the qualifier.
"^DD",357.6,357.613,.03,"DT")
2950426
"^DD",357.6,357.613,.04,0)
PCE DIM NODE^F^^0;4^K:$L(X)>30!($L(X)<1) X
"^DD",357.6,357.613,.04,3)
What node should the qualifier be placed on?
"^DD",357.6,357.613,.04,21,0)
^^1^1^2971028^^^
"^DD",357.6,357.613,.04,21,1,0)
The node where the data should be placed.
"^DD",357.6,357.613,.04,"DT")
2951017
"^DD",357.6,357.613,.05,0)
PCE DIM PIECE, VALUE^NJ2,0^^0;5^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.613,.05,3)
What piece should the primary value be located?
"^DD",357.6,357.613,.05,21,0)
^^1^1^2950719^
"^DD",357.6,357.613,.05,21,1,0)
The piece on the node where the value should be placed.
"^DD",357.6,357.613,.05,"DT")
2951017
"^DD",357.6,357.613,.07,0)
PCE DIM PIECE, HEADER^NJ2,0^^0;7^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.613,.07,3)
What piece should the header be located on?
"^DD",357.6,357.613,.07,21,0)
^^1^1^2951017^^
"^DD",357.6,357.613,.07,21,1,0)
The piece on the node where the associated header should be placed.
"^DD",357.6,357.613,.07,"DT")
2951017
"^DD",357.6,357.613,.08,0)
PCE DIM PIECE, QUALIFIER^NJ2,0^^0;8^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.613,.08,3)
What piece should the qualifier be located on?
"^DD",357.6,357.613,.08,21,0)
^^1^1^2971028^^
"^DD",357.6,357.613,.08,21,1,0)
The piece where the qualifier should go.
"^DD",357.6,357.613,.08,"DT")
2951017
"^DD",357.6,357.615,0)
DATA DESCRIPTION SUB-FIELD^^.05^5
"^DD",357.6,357.615,0,"DT")
2950417
"^DD",357.6,357.615,0,"ID","WRITE")
D EN^DDIOL("   PIECE="_$P(^(0),U,3),"","?0")
"^DD",357.6,357.615,0,"IX","B",357.615,.01)

"^DD",357.6,357.615,0,"IX","C",357.615,.03)

"^DD",357.6,357.615,0,"NM","DATA DESCRIPTION")

"^DD",357.6,357.615,0,"UP")
357.6
"^DD",357.6,357.615,.01,0)
DATA^MF^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",357.6,357.615,.01,1,0)
^.1
"^DD",357.6,357.615,.01,1,1,0)
357.615^B
"^DD",357.6,357.615,.01,1,1,1)
S ^IBE(357.6,DA(1),15,"B",$E(X,1,30),DA)=""
"^DD",357.6,357.615,.01,1,1,2)
K ^IBE(357.6,DA(1),15,"B",$E(X,1,30),DA)
"^DD",357.6,357.615,.01,3)
Enter a descriptive name for this data field, up to 30 characters.
"^DD",357.6,357.615,.01,21,0)
^^1^1^2960730^^
"^DD",357.6,357.615,.01,21,1,0)
A descriptive name for the data.
"^DD",357.6,357.615,.01,"DT")
2950320
"^DD",357.6,357.615,.02,0)
MAXIMUM LENGTH^RNJ3,0^^0;2^K:+X'=X!(X>210)!(X<1)!(X?.E1"."1N.N) X
"^DD",357.6,357.615,.02,3)
What is the maximum length of this field?
"^DD",357.6,357.615,.02,21,0)
^^1^1^2950719^
"^DD",357.6,357.615,.02,21,1,0)
The maximum length of the data.
"^DD",357.6,357.615,.02,"DT")
2950320
"^DD",357.6,357.615,.03,0)
PIECE^NJ1,0X^^0;3^K:+X'=X!(X>8)!(X<2)!(X?.E1"."1N.N)!($D(^IBE(357.6,D0,15,"C",X))) X
"^DD",357.6,357.615,.03,1,0)
^.1
"^DD",357.6,357.615,.03,1,1,0)
357.615^C
"^DD",357.6,357.615,.03,1,1,1)
S ^IBE(357.6,DA(1),15,"C",$E(X,1,30),DA)=""
"^DD",357.6,357.615,.03,1,1,2)
K ^IBE(357.6,DA(1),15,"C",$E(X,1,30),DA)
"^DD",357.6,357.615,.03,1,1,"%D",0)
^^1^1^2950320^
"^DD",357.6,357.615,.03,1,1,"%D",1,0)
Indexes the field by piece.
"^DD",357.6,357.615,.03,1,1,"DT")
2950320
"^DD",357.6,357.615,.03,3)
In the returned record, which piece will this field be?
"^DD",357.6,357.615,.03,21,0)
^^2^2^2950918^^
"^DD",357.6,357.615,.03,21,1,0)
The piece that the data will be returned as. Doesn't allow
"^DD",357.6,357.615,.03,21,2,0)
piece 1 because that is stored in field #2.01.
"^DD",357.6,357.615,.03,"DT")
2950407
"^DD",357.6,357.615,.04,0)
ANNEX NODE^F^^0;4^K:$L(X)>10!($L(X)<1) X
"^DD",357.6,357.615,.04,3)
You can optionally specify the subscript to store the data. Use this when the entire record won't fit on one node.
"^DD",357.6,357.615,.04,21,0)
^^2^2^2950719^
"^DD",357.6,357.615,.04,21,1,0)
In case all the returned data can not be returned on a single node an
"^DD",357.6,357.615,.04,21,2,0)
annex node can be specified.
"^DD",357.6,357.615,.04,"DT")
2950320
"^DD",357.6,357.615,.05,0)
RECOMMENDED HEADER^F^^0;5^K:$L(X)>40!($L(X)<1) X
"^DD",357.6,357.615,.05,3)
Answer must be 1-40 characters in length.
"^DD",357.6,357.615,.05,21,0)
^^1^1^2950719^^
"^DD",357.6,357.615,.05,21,1,0)
The recommended header will be used as the default when designing a form.
"^DD",357.6,357.615,.05,"DT")
2950417
"^DD",357.6,357.66,0)
PROTECTED LOCAL VARIABLES SUB-FIELD^^.01^1
"^DD",357.6,357.66,0,"DT")
2930608
"^DD",357.6,357.66,0,"IX","B",357.66,.01)

"^DD",357.6,357.66,0,"NM","PROTECTED LOCAL VARIABLES")

"^DD",357.6,357.66,0,"UP")
357.6
"^DD",357.6,357.66,.01,0)
PROTECTED LOCAL VARIABLES^MFX^^0;1^K:'$$VARIABLE^IBDFU5(X) X
"^DD",357.6,357.66,.01,1,0)
^.1
"^DD",357.6,357.66,.01,1,1,0)
357.66^B
"^DD",357.6,357.66,.01,1,1,1)
S ^IBE(357.6,DA(1),6,"B",$E(X,1,30),DA)=""
"^DD",357.6,357.66,.01,1,1,2)
K ^IBE(357.6,DA(1),6,"B",$E(X,1,30),DA)
"^DD",357.6,357.66,.01,3)
Enter variables that should be NEWED before the entry action or calling the interface.
"^DD",357.6,357.66,.01,21,0)
^^3^3^2950426^^
"^DD",357.6,357.66,.01,21,1,0)
 
"^DD",357.6,357.66,.01,21,2,0)
A list of variables that should be newed before the entry action or
"^DD",357.6,357.66,.01,21,3,0)
calling the interface.
"^DD",357.6,357.66,.01,"DT")
2930608
"^DD",357.6,357.67,0)
REQUIRED LOCAL VARIABLES SUB-FIELD^^.01^1
"^DD",357.6,357.67,0,"DT")
2930521
"^DD",357.6,357.67,0,"IX","B",357.67,.01)

"^DD",357.6,357.67,0,"NM","REQUIRED LOCAL VARIABLES")

"^DD",357.6,357.67,0,"UP")
357.6
"^DD",357.6,357.67,.01,0)
REQUIRED LOCAL VARIABLE^MFX^^0;1^K:'$$VARIABLE^IBDFU5(X) X
"^DD",357.6,357.67,.01,1,0)
^.1
"^DD",357.6,357.67,.01,1,1,0)
357.67^B
"^DD",357.6,357.67,.01,1,1,1)
S ^IBE(357.6,DA(1),7,"B",$E(X,1,30),DA)=""
"^DD",357.6,357.67,.01,1,1,2)
K ^IBE(357.6,DA(1),7,"B",$E(X,1,30),DA)
"^DD",357.6,357.67,.01,3)
Enter any variables that must exist before the Package Interface routine is called.
"^DD",357.6,357.67,.01,21,0)
^^4^4^2930528^
"^DD",357.6,357.67,.01,21,1,0)
 
"^DD",357.6,357.67,.01,21,2,0)
A variable that is required input to the interface routine. The interface
"^DD",357.6,357.67,.01,21,3,0)
routine will not be called if all of the required variables are not
"^DD",357.6,357.67,.01,21,4,0)
defined.
"^DD",357.6,357.67,.01,"DT")
2930521
"^DD",358.1,358.1,0)
FIELD^^1^12
"^DD",358.1,358.1,0,"DT")
2930806
"^DD",358.1,358.1,0,"ID",.02)
W ""
"^DD",358.1,358.1,0,"IX","B",358.1,.01)

"^DD",358.1,358.1,0,"IX","C",358.1,.02)

"^DD",358.1,358.1,0,"IX","D",358.1,.14)

"^DD",358.1,358.1,0,"NM","IMP/EXP ENCOUNTER FORM BLOCK")

"^DD",358.1,358.1,0,"PT",358.2,.02)

"^DD",358.1,358.1,0,"PT",358.5,.02)

"^DD",358.1,358.1,0,"PT",358.7,.06)

"^DD",358.1,358.1,0,"PT",358.8,.02)

"^DD",358.1,358.1,0,"PT",358.93,.08)

"^DD",358.1,358.1,0,"VRPK")
AUTOMATED INFO COLLECTION SYS
"^DD",358.1,358.1,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",358.1,358.1,.01,1,0)
^.1
"^DD",358.1,358.1,.01,1,1,0)
358.1^B
"^DD",358.1,358.1,.01,1,1,1)
S ^IBE(358.1,"B",$E(X,1,30),DA)=""
"^DD",358.1,358.1,.01,1,1,2)
K ^IBE(358.1,"B",$E(X,1,30),DA)
"^DD",358.1,358.1,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",358.1,358.1,.01,21,0)
^^2^2^2930527^
"^DD",358.1,358.1,.01,21,1,0)
 
"^DD",358.1,358.1,.01,21,2,0)
The name of the block.
"^DD",358.1,358.1,.01,"DEL",1,0)
I '$G(IBLISTPR) W "...Encounter Form Blocks can only be deleted through the Encounter Form Utilities!"
"^DD",358.1,358.1,.02,0)
FORM^RP358'^IBE(358,^0;2^Q
"^DD",358.1,358.1,.02,1,0)
^.1
"^DD",358.1,358.1,.02,1,1,0)
358.1^C
"^DD",358.1,358.1,.02,1,1,1)
S ^IBE(358.1,"C",$E(X,1,30),DA)=""
"^DD",358.1,358.1,.02,1,1,2)
K ^IBE(358.1,"C",$E(X,1,30),DA)
"^DD",358.1,358.1,.02,1,1,"%D",0)
^^1^1^2921116^
"^DD",358.1,358.1,.02,1,1,"%D",1,0)
Used to find all the blocks belonging to a particular form.
"^DD",358.1,358.1,.02,1,1,"DT")
2921116
"^DD",358.1,358.1,.02,3)
What form should this block appear on?
"^DD",358.1,358.1,.02,21,0)
^^2^2^2930802^^
"^DD",358.1,358.1,.02,21,1,0)
 
"^DD",358.1,358.1,.02,21,2,0)
The form the block appears on.
"^DD",358.1,358.1,.02,"DT")
2930802
"^DD",358.1,358.1,.04,0)
BLOCK'S STARTING ROW^RNJ3,0XO^^0;4^S:+X=X X=X-1 K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.1,358.1,.04,.1)
WHAT ROW SHOULD THE BLOCK START IN?
"^DD",358.1,358.1,.04,2)
S Y(0)=Y S Y=(+Y)+1
"^DD",358.1,358.1,.04,2.1)
S Y=(+Y)+1
"^DD",358.1,358.1,.04,3)
What line should this block begin on?
"^DD",358.1,358.1,.04,21,0)
^^1^1^2930715^^^
"^DD",358.1,358.1,.04,21,1,0)
The row  on the encounter form that the block starts on.
"^DD",358.1,358.1,.04,23,0)
^^4^4^2930715^
"^DD",358.1,358.1,.04,23,1,0)
The internal representation starts at 0, the external representation
"^DD",358.1,358.1,.04,23,2,0)
starts at 1. The difference is because for computing the form image
"^DD",358.1,358.1,.04,23,3,0)
it is convenient to work with displacements fromt the top left-hand
"^DD",358.1,358.1,.04,23,4,0)
corner. However, users do not want to work with row=0 or column=0.
"^DD",358.1,358.1,.04,"DT")
2930715
"^DD",358.1,358.1,.05,0)
BLOCK'S STARTING COLUMN^RNJ3,0XO^^0;5^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.1,358.1,.05,.1)
WHAT COLUMN SHOULD THE BLOCK START IN?
"^DD",358.1,358.1,.05,2)
S Y(0)=Y S Y=(+Y)+1
"^DD",358.1,358.1,.05,2.1)
S Y=(+Y)+1
"^DD",358.1,358.1,.05,3)
What column should this block begin on?
"^DD",358.1,358.1,.05,21,0)
^^1^1^2930715^^
"^DD",358.1,358.1,.05,21,1,0)
The column on the encounter form that the block starts on.
"^DD",358.1,358.1,.05,23,0)
^^4^4^2930715^
"^DD",358.1,358.1,.05,23,1,0)
The internal representation starts at 0, the external representation
"^DD",358.1,358.1,.05,23,2,0)
starts at 1. The difference is because for computing the form image
"^DD",358.1,358.1,.05,23,3,0)
it is convenient to work with displacements from the top left-hand
"^DD",358.1,358.1,.05,23,4,0)
corner. However, users do not want to work with row=0 or column=0.
"^DD",358.1,358.1,.05,"DT")
2930715
"^DD",358.1,358.1,.06,0)
WIDTH IN CHARACTERS^RNJ3,0^^0;6^K:+X'=X!(X>200)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.1,358.1,.06,.1)
HOW MANY CHARACTERS WIDE SHOULD THE BLOCK BE?
"^DD",358.1,358.1,.06,3)
How many characters wide should this block be?
"^DD",358.1,358.1,.06,21,0)
^^2^2^2930527^
"^DD",358.1,358.1,.06,21,1,0)
 
"^DD",358.1,358.1,.06,21,2,0)
The width of the block, measured in the number of characters across.
"^DD",358.1,358.1,.06,"DT")
2930415
"^DD",358.1,358.1,.07,0)
HEIGHT IN LINES^RNJ3,0^^0;7^K:+X'=X!(X>200)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.1,358.1,.07,.1)
HOW MANY LINES HIGH SHOULD THE BLOCK BE?
"^DD",358.1,358.1,.07,3)
How many lines high should this block be?
"^DD",358.1,358.1,.07,21,0)
^^2^2^2930527^
"^DD",358.1,358.1,.07,21,1,0)
 
"^DD",358.1,358.1,.07,21,2,0)
The height of the block, measured by the number of lines it takes up.
"^DD",358.1,358.1,.07,"DT")
2930415
"^DD",358.1,358.1,.1,0)
OUTLINE TYPE^RS^1:SOLID LINE;2:INVISIBLE;^0;10^Q
"^DD",358.1,358.1,.1,.1)
OUTLINE TYPE (SOLID/INVISIBLE)
"^DD",358.1,358.1,.1,3)
Enter '1' if the block should have a box around it, '2' if not.
"^DD",358.1,358.1,.1,21,0)
^^2^2^2930527^
"^DD",358.1,358.1,.1,21,1,0)
 
"^DD",358.1,358.1,.1,21,2,0)
How the block is outlined on the form.
"^DD",358.1,358.1,.1,"DT")
2930415
"^DD",358.1,358.1,.11,0)
BLOCK HEADER^F^^0;11^K:$L(X)>60!($L(X)<1) X
"^DD",358.1,358.1,.11,.1)
WHAT HEADER WOULD SHOULD APPEAR AT THE TOP OF THE BLOCK? (OPTIONAL)
"^DD",358.1,358.1,.11,3)
What text should appear at the top of the block?
"^DD",358.1,358.1,.11,21,0)
^^2^2^2930527^
"^DD",358.1,358.1,.11,21,1,0)
 
"^DD",358.1,358.1,.11,21,2,0)
The text appearing at the top of the block.
"^DD",358.1,358.1,.11,"DT")
2930415
"^DD",358.1,358.1,.12,0)
HEADER APPEARANCE^FX^^0;12^S X=$$UPPER^VALM1(X) K:$L(X)>3!("UBC"'[$E(X,1))!("UBC"'[$E(X,2))!("UBC"'[$E(X,3)) X
"^DD",358.1,358.1,.12,.1)
HOW SHOULD THE BLOCK HEADER APPEAR? CHOOSE FROM {U,B,C}
"^DD",358.1,358.1,.12,3)
B=bold, U=underline, C=center. You can enter any combination of {B,U,C}.
"^DD",358.1,358.1,.12,21,0)
^^2^2^2930607^
"^DD",358.1,358.1,.12,21,1,0)
 
"^DD",358.1,358.1,.12,21,2,0)
A description of the block's contents and use.
"^DD",358.1,358.1,.12,"DT")
2930616
"^DD",358.1,358.1,.13,0)
BRIEF DESCRIPTION^RF^^0;13^K:$L(X)>80!($L(X)<1) X
"^DD",358.1,358.1,.13,.1)
ENTER A BRIEF DESCRIPTION OF THE USE & CONTENTS OF THE BLOCK
"^DD",358.1,358.1,.13,3)
Answer must be 1-80 characters in length.
"^DD",358.1,358.1,.13,21,0)
^^2^2^2930607^
"^DD",358.1,358.1,.13,21,1,0)
 
"^DD",358.1,358.1,.13,21,2,0)
A brief description of the contents or use of the block.
"^DD",358.1,358.1,.13,"DT")
2930415
"^DD",358.1,358.1,.14,0)
TOOL KIT ORDER^NJ6,2^^0;14^K:+X'=X!(X>999.99)!(X<0)!(X?.E1"."3N.N) X
"^DD",358.1,358.1,.14,1,0)
^.1
"^DD",358.1,358.1,.14,1,1,0)
358.1^D
"^DD",358.1,358.1,.14,1,1,1)
S ^IBE(358.1,"D",$E(X,1,30),DA)=""
"^DD",358.1,358.1,.14,1,1,2)
K ^IBE(358.1,"D",$E(X,1,30),DA)
"^DD",358.1,358.1,.14,1,1,"%D",0)
^^2^2^2930108^
"^DD",358.1,358.1,.14,1,1,"%D",1,0)
This index is used to locate all the 'tool box' blocs that can be used 
"^DD",358.1,358.1,.14,1,1,"%D",2,0)
as templates to create a new block to be added to a form.
"^DD",358.1,358.1,.14,1,1,"DT")
2930108
"^DD",358.1,358.1,.14,3)
Enter a numeric value >0 if this block is part of the tool kit. The number will determine its listed order.
"^DD",358.1,358.1,.14,21,0)
^^4^4^2930607^
"^DD",358.1,358.1,.14,21,1,0)
 
"^DD",358.1,358.1,.14,21,2,0)
A value greater than 0 means that the block belongs to the tool kit. The
"^DD",358.1,358.1,.14,21,3,0)
value also determines the order that the block will be listed to the
"^DD",358.1,358.1,.14,21,4,0)
screen that displays the tool kit blocks.
"^DD",358.1,358.1,.14,"DT")
2930309
"^DD",358.1,358.1,1,0)
EXPORT NOTES^358.11^^1;0
"^DD",358.1,358.1,1,21,0)
^^2^2^2930806^
"^DD",358.1,358.1,1,21,1,0)
Should be give other sites information that will enable them to decide
"^DD",358.1,358.1,1,21,2,0)
whether or not they want to import the block. Only applies to tool kit blocks.
"^DD",358.1,358.11,0)
EXPORT NOTES SUB-FIELD^^.01^1
"^DD",358.1,358.11,0,"DT")
2930806
"^DD",358.1,358.11,0,"NM","EXPORT NOTES")

"^DD",358.1,358.11,0,"UP")
358.1
"^DD",358.1,358.11,.01,0)
EXPORT NOTES^W^^0;1^Q
"^DD",358.1,358.11,.01,3)
What should other sites know about this tool kit block before importing it?
"^DD",358.1,358.11,.01,"DT")
2930806
"^DD",358.2,358.2,0)
FIELD^^2^19
"^DD",358.2,358.2,0,"DDA")
N
"^DD",358.2,358.2,0,"DT")
2960123
"^DD",358.2,358.2,0,"ID",.02)
W ""
"^DD",358.2,358.2,0,"ID",.11)
W ""
"^DD",358.2,358.2,0,"IX","B",358.2,.01)

"^DD",358.2,358.2,0,"IX","C",358.2,.02)

"^DD",358.2,358.2,0,"NM","IMP/EXP SELECTION LIST")

"^DD",358.2,358.2,0,"PT",358.3,.03)

"^DD",358.2,358.2,0,"PT",358.4,.03)

"^DD",358.2,358.2,0,"VRPK")
AUTOMATED INFO COLLECTION SYS
"^DD",358.2,358.2,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",358.2,358.2,.01,1,0)
^.1
"^DD",358.2,358.2,.01,1,1,0)
358.2^B
"^DD",358.2,358.2,.01,1,1,1)
S ^IBE(358.2,"B",$E(X,1,30),DA)=""
"^DD",358.2,358.2,.01,1,1,2)
K ^IBE(358.2,"B",$E(X,1,30),DA)
"^DD",358.2,358.2,.01,3)
Answer must be 3-30 characters in length.
"^DD",358.2,358.2,.01,21,0)
^^2^2^2930527^
"^DD",358.2,358.2,.01,21,1,0)
 
"^DD",358.2,358.2,.01,21,2,0)
The name of the list.
"^DD",358.2,358.2,.01,"DEL",1,0)
I '$G(IBLISTPR) W "...Selection Lists can only be deleted through the Encounter Form Utilities!"
"^DD",358.2,358.2,.01,"DT")
2921119
"^DD",358.2,358.2,.02,0)
BLOCK^RP358.1'^IBE(358.1,^0;2^Q
"^DD",358.2,358.2,.02,1,0)
^.1
"^DD",358.2,358.2,.02,1,1,0)
358.2^C
"^DD",358.2,358.2,.02,1,1,1)
S ^IBE(358.2,"C",$E(X,1,30),DA)=""
"^DD",358.2,358.2,.02,1,1,2)
K ^IBE(358.2,"C",$E(X,1,30),DA)
"^DD",358.2,358.2,.02,1,1,"DT")
2921207
"^DD",358.2,358.2,.02,3)
Enter the block that the selection list should appear in.
"^DD",358.2,358.2,.02,21,0)
^^2^2^2930527^
"^DD",358.2,358.2,.02,21,1,0)
The block that the list appears on. The position of the selection list is
"^DD",358.2,358.2,.02,21,2,0)
relative to the block.
"^DD",358.2,358.2,.02,"DT")
2921207
"^DD",358.2,358.2,.04,0)
SUBCOLUMN HEADER APPEARANCE^FX^^0;4^S X=$$UPPER^VALM1(X) K:$L(X)>1!("R"'[$E(X,1)) X
"^DD",358.2,358.2,.04,.1)
HOW SHOULD THE SUBCOLUMN HEADERS APPEAR? ENTER 'R' FOR REVERSE PRINTING.
"^DD",358.2,358.2,.04,3)
R=Reverse Printing
"^DD",358.2,358.2,.04,"DT")
2940531
"^DD",358.2,358.2,.05,0)
COLUMN HEADER^F^^0;5^K:$L(X)>70!($L(X)<1) X
"^DD",358.2,358.2,.05,.1)
WHAT TEXT SHOULD APPEAR AT THE TOP OF EACH COLUMN? (OPTIONAL)
"^DD",358.2,358.2,.05,3)
This header will appear at the top of the column that contains the list. If there is more than one column it will appear at the top of each.
"^DD",358.2,358.2,.05,21,0)
^^2^2^2930527^
"^DD",358.2,358.2,.05,21,1,0)
 
"^DD",358.2,358.2,.05,21,2,0)
The text that appears at the top of each column (NOT subcolumn).
"^DD",358.2,358.2,.05,"DT")
2930415
"^DD",358.2,358.2,.06,0)
COLUMN HEADER APPEARANCE^FX^^0;6^S X=$$UPPER^VALM1(X) K:$L(X)>4!("UBRC"'[$E(X,1))!("UBRC"'[$E(X,2))!("UBRC"'[$E(X,3))!("UBRC"'[$E(X,4)) X
"^DD",358.2,358.2,.06,.1)
HOW SHOULD THE COLUMN HEADER APPEAR? CHOOSE FROM {U,B,R,C}
"^DD",358.2,358.2,.06,3)
B=bold,U=underline,R=reverse,C=center. You can enter any combination of {B,U,R,C}.
"^DD",358.2,358.2,.06,21,0)
^^2^2^2940531^^^
"^DD",358.2,358.2,.06,21,1,0)
 
"^DD",358.2,358.2,.06,21,2,0)
The column header can be give characteristics, such as centered and bold.
"^DD",358.2,358.2,.06,"DT")
2940531
"^DD",358.2,358.2,.07,0)
SUBCOLUMNS SEPARATED WITH?^RS^1:ONE SPACE;2:TWO SPACES;3:LINE;4:SPACE/LINE/SPACE;^0;7^Q
"^DD",358.2,358.2,.07,.1)
HOW SHOULD THE SUBCOLUMNS BE SEPARATED?
"^DD",358.2,358.2,.07,3)
How should the subcolumns be separated?
"^DD",358.2,358.2,.07,21,0)
^^2^2^2930527^
"^DD",358.2,358.2,.07,21,1,0)
 
"^DD",358.2,358.2,.07,21,2,0)
What characters are used to separate the subcolumns.
"^DD",358.2,358.2,.07,"DT")
2930415
"^DD",358.2,358.2,.08,0)
EXTRA LINES FOR SELECTIONS^NJ1,0^^0;8^K:+X'=X!(X>9)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.2,358.2,.08,.1)
NUMBER OF ADDITIONAL LINES FOR EACH ENTRY ON LIST?
"^DD",358.2,358.2,.08,3)
How many extra lines should be allocated for each selection, in addition to the 1 the selection will print on?
"^DD",358.2,358.2,.08,21,0)
^^4^4^2930527^
"^DD",358.2,358.2,.08,21,1,0)
 
"^DD",358.2,358.2,.08,21,2,0)
Each entry on the list prints on only one line. However, if you want
"^DD",358.2,358.2,.08,21,3,0)
extra space to appear below each entry on the list then this field should
"^DD",358.2,358.2,.08,21,4,0)
be set to the number of blank lines desired.
"^DD",358.2,358.2,.08,"DT")
2930427
"^DD",358.2,358.2,.09,0)
GROUP HEADER APPEARANCE^FX^^0;9^S X=$$UPPER^VALM1(X) K:$L(X)>4!("UBRC"'[$E(X,1))!("UBRC"'[$E(X,2))!("UBRC"'[$E(X,3))!("UBRC"'[$E(X,4)) X
"^DD",358.2,358.2,.09,.1)
HOW SHOULD THE HEADER FOR EACH GROUP OF ENTRIES APPEAR? CHOOSE FROM {U,B,R,C}
"^DD",358.2,358.2,.09,3)
B=bold,R=reverse,C=center,U=underline. You can use any combination of {B,R,C,U}
"^DD",358.2,358.2,.09,21,0)
^^1^1^2940527^^^^
"^DD",358.2,358.2,.09,21,1,0)
This field determines the appearance of the group headers.
"^DD",358.2,358.2,.09,"DT")
2940527
"^DD",358.2,358.2,.11,0)
SELECTION ROUTINE^R*P358.6'^IBE(358.6,^0;11^S DIC("S")="I $P(^(0),U,6)=3,$P(^(0),U,9)=1" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",358.2,358.2,.11,3)
Enter the package interface used to obtain this list.
"^DD",358.2,358.2,.11,12)
Allows only available selection routines.
"^DD",358.2,358.2,.11,12.1)
S DIC("S")="I $P(^(0),U,6)=3,$P(^(0),U,9)=1"
"^DD",358.2,358.2,.11,21,0)
^^2^2^2930527^
"^DD",358.2,358.2,.11,21,1,0)
 
"^DD",358.2,358.2,.11,21,2,0)
This identifies the Package Interface that is used to fill the list.
"^DD",358.2,358.2,.11,"DT")
2930115
"^DD",358.2,358.2,.12,0)
UNDERLINE SELECTIONS?^RS^0:NO;1:YES;^0;12^Q
"^DD",358.2,358.2,.12,.1)
SHOULD EACH ENTRY ON THE LIST BE UNDERLINED? (YES/NO)
"^DD",358.2,358.2,.12,3)
Should the items on the list be underlined?
"^DD",358.2,358.2,.12,21,0)
^^2^2^2930527^
"^DD",358.2,358.2,.12,21,1,0)
 
"^DD",358.2,358.2,.12,21,2,0)
Answer yes if each entry on the list should be underlined.
"^DD",358.2,358.2,.12,"DT")
2930414
"^DD",358.2,358.2,.13,0)
NUMBER OF COLUMNS^NJ2,0^^0;13^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.2,358.2,.13,.1)
HOW MANY COLUMNS OF LIST ENTRIES SHOULD THE LIST HAVE? (OPTIONAL)
"^DD",358.2,358.2,.13,3)

"^DD",358.2,358.2,.13,4)
D HELP5^IBDFU5
"^DD",358.2,358.2,.13,21,0)
^^6^6^2930527^
"^DD",358.2,358.2,.13,21,1,0)
 
"^DD",358.2,358.2,.13,21,2,0)
A selection list may be displayed in an area several columns wide. The
"^DD",358.2,358.2,.13,21,3,0)
starting position and height of each column may be specified. However, it
"^DD",358.2,358.2,.13,21,4,0)
is not necessary because defaults values will be used. The defaults used
"^DD",358.2,358.2,.13,21,5,0)
assume that nothing else is going in the block except the selection list
"^DD",358.2,358.2,.13,21,6,0)
and that the entire block should be filled.
"^DD",358.2,358.2,.13,"DT")
2930802
"^DD",358.2,358.2,.14,0)
DYNAMIC SELECTIONS^S^0:NO;1:YES;^0;14^Q
"^DD",358.2,358.2,.14,3)
Answer YES if the list of selecitons are created at print time.
"^DD",358.2,358.2,.14,"DT")
2950717
"^DD",358.2,358.2,.15,0)
PRINT COMPLETE^S^0:NO;1:YES;^0;15^Q
"^DD",358.2,358.2,.15,3)
If the data on the list won't fit on the form, should it be printed on a separate page?
"^DD",358.2,358.2,.15,21,0)
^^1^1^2950717^
"^DD",358.2,358.2,.15,21,1,0)
Applies only to dynamic selection lists.
"^DD",358.2,358.2,.15,"DT")
2950717
"^DD",358.2,358.2,.16,0)
NUMBER OF OTHER^NJ1,0^^0;16^K:+X'=X!(X>9)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.2,358.2,.16,3)
Allocate space for how many 'other' not found on the list?
"^DD",358.2,358.2,.16,21,0)
^^2^2^2950717^
"^DD",358.2,358.2,.16,21,1,0)
Space will be allocated at the bottom of the lsit for this number of items
"^DD",358.2,358.2,.16,21,2,0)
not found on the list.
"^DD",358.2,358.2,.16,"DT")
2950717
"^DD",358.2,358.2,.17,0)
WHAT TO ALLOCATE SPACE FOR^S^1:NARRATIVE ONLY;2:CODE ONLY;3:NARRATIVE AND CODE;^0;17^Q
"^DD",358.2,358.2,.17,3)
What should space be allocated for when making room for 'other'?
"^DD",358.2,358.2,.17,21,0)
^^2^2^2950803^^
"^DD",358.2,358.2,.17,21,1,0)
This field will determine what fields will be placed on the form for
"^DD",358.2,358.2,.17,21,2,0)
writting in other items not found on the list.
"^DD",358.2,358.2,.17,"DT")
2950717
"^DD",358.2,358.2,.18,0)
WHAT TO SEND TO PCE^S^1:NARRATIVE ONLY;2:CODE ONLY;3:NARRATIVE AND CODE;^0;18^Q
"^DD",358.2,358.2,.18,3)
WHAT DO YOU WANT ENTERED INTO THE DATABASE?
"^DD",358.2,358.2,.18,21,0)
^^2^2^2960123^
"^DD",358.2,358.2,.18,21,1,0)
This determines what is sent to PCE.  For example, some types of data
"^DD",358.2,358.2,.18,21,2,0)
may require that a code be sent, but the narrative may be optional.
"^DD",358.2,358.2,.18,"DT")
2960123
"^DD",358.2,358.2,.19,0)
CLINICAL REMINDER DISPLAY TYPE^S^1:DUE NOW ONLY;2:ALL REMINDERS;^0;19^Q
"^DD",358.2,358.2,.19,3)
This determines the clincial reminders that will print on an encounter form.  Choose either to see only those due now or all appropriate reminders.
"^DD",358.2,358.2,.19,21,0)
^^1^1^2980910^^^^
"^DD",358.2,358.2,.19,21,1,0)
This is the display type for this list of clinical reminders.
"^DD",358.2,358.2,.19,"DT")
2971027
"^DD",358.2,358.2,1,0)
LIST COLUMN^358.21I^^1;0
"^DD",358.2,358.2,1,21,0)
^^2^2^2940216^^^^
"^DD",358.2,358.2,1,21,1,0)
A column is a rectangular area that has the necessary width to display a
"^DD",358.2,358.2,1,21,2,0)
single item on the list.
"^DD",358.2,358.2,1,"DT")
2930802
"^DD",358.2,358.2,2,0)
SUBCOLUMN NUMBER^358.22I^^2;0
"^DD",358.2,358.2,2,21,0)
^^4^4^2941020^^^^
"^DD",358.2,358.2,2,21,1,0)
 
"^DD",358.2,358.2,2,21,2,0)
A subcolumn contains one field of the entry on the list. The subcolumn
"^DD",358.2,358.2,2,21,3,0)
order is the order, from left to right, that the subcolumns will appear
"^DD",358.2,358.2,2,21,4,0)
in.
"^DD",358.2,358.2,2,"DT")
2930413
"^DD",358.2,358.21,0)
LIST COLUMN SUB-FIELD^^.04^4
"^DD",358.2,358.21,0,"DT")
2930331
"^DD",358.2,358.21,0,"ID","WRITE")
D EN^DDIOL("   COLUMN #"_$P($G(^(0)),U),"","?0")
"^DD",358.2,358.21,0,"IX","B",358.21,.01)

"^DD",358.2,358.21,0,"NM","LIST COLUMN")

"^DD",358.2,358.21,0,"UP")
358.2
"^DD",358.2,358.21,.01,0)
LIST COLUMN NUMBER^MNJ1,0^^0;1^K:+X'=X!(X>4)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.2,358.21,.01,1,0)
^.1
"^DD",358.2,358.21,.01,1,1,0)
358.21^B
"^DD",358.2,358.21,.01,1,1,1)
S ^IBE(358.2,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",358.2,358.21,.01,1,1,2)
K ^IBE(358.2,DA(1),1,"B",$E(X,1,30),DA)
"^DD",358.2,358.21,.01,3)
You can specify the position and height of up to 4 columns. Defaults will be used where needed.
"^DD",358.2,358.21,.01,21,0)
^^2^2^2930722^^
"^DD",358.2,358.21,.01,21,1,0)
The order that the columns will be filled. Column 1 will first be filled
"^DD",358.2,358.21,.01,21,2,0)
with items, then column 2, etc.
"^DD",358.2,358.21,.01,"DT")
2930802
"^DD",358.2,358.21,.02,0)
LIST COLUMN'S STARTING ROW^NJ3,0XO^^0;2^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.2,358.21,.02,.1)
WHAT ROW SHOULD THE LIST COLUMN START IN? (OPTIONAL)
"^DD",358.2,358.21,.02,2)
S Y(0)=Y S:+Y=Y Y=+Y+1
"^DD",358.2,358.21,.02,2.1)
S:+Y=Y Y=+Y+1
"^DD",358.2,358.21,.02,3)
What row should the column begin in?
"^DD",358.2,358.21,.02,21,0)
^^2^2^2930715^^^
"^DD",358.2,358.21,.02,21,1,0)
The row, relative to the block, that the column should begin in. This is
"^DD",358.2,358.21,.02,21,2,0)
optional, since default values can be used.
"^DD",358.2,358.21,.02,23,0)
^^4^4^2930715^^
"^DD",358.2,358.21,.02,23,1,0)
The internal representation starts at 0, the external representation
"^DD",358.2,358.21,.02,23,2,0)
starts at 1. The difference is because for computing the form image
"^DD",358.2,358.21,.02,23,3,0)
it is convenient to work with displacements from the top left-hand
"^DD",358.2,358.21,.02,23,4,0)
corner. However, users do not want to work with row=0 or column=0.
"^DD",358.2,358.21,.02,"DT")
2930802
"^DD",358.2,358.21,.03,0)
LIST COLUMN'S STARTING COLUMN^NJ3,0XO^^0;3^S:+X=X X=X-1 K:+X'=X!(X>200)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.2,358.21,.03,.1)
WHAT BLOCK COLUMN SHOULD THE LIST COLUMN START IN? (OPTIONAL)
"^DD",358.2,358.21,.03,2)
S Y(0)=Y S:+Y=Y Y=+Y+1
"^DD",358.2,358.21,.03,2.1)
S:+Y=Y Y=+Y+1
"^DD",358.2,358.21,.03,3)
At what block column should the list column begin at? The first subcolumn of the list column will start one character to the right of this.
"^DD",358.2,358.21,.03,21,0)
^^4^4^2940216^
"^DD",358.2,358.21,.03,21,1,0)
 
"^DD",358.2,358.21,.03,21,2,0)
The column (# of characters to the right) that the list column should
"^DD",358.2,358.21,.03,21,3,0)
begin in, relative to the block. It is optional, since a default value can
"^DD",358.2,358.21,.03,21,4,0)
be used.
"^DD",358.2,358.21,.03,23,0)
^^4^4^2930715^
"^DD",358.2,358.21,.03,23,1,0)
The internal representation starts at 0, the external representation
"^DD",358.2,358.21,.03,23,2,0)
starts at 1. The difference is because for computing the form image
"^DD",358.2,358.21,.03,23,3,0)
it is convenient to work with displacements from the top left-hand
"^DD",358.2,358.21,.03,23,4,0)
corner. However, users do not want to work with row=0 or column=0.
"^DD",358.2,358.21,.03,"DT")
2930930
"^DD",358.2,358.21,.04,0)
LIST COLUMN HEIGHT^NJ3,0^^0;4^K:+X'=X!(X>200)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.2,358.21,.04,.1)
HOW MANY LINES HIGH SHOULD THE LIST COLUMN BE? (OPTIONAL)
"^DD",358.2,358.21,.04,3)
How many lines should the column cover?
"^DD",358.2,358.21,.04,21,0)
^^3^3^2930527^
"^DD",358.2,358.21,.04,21,1,0)
 
"^DD",358.2,358.21,.04,21,2,0)
The number of lines the column should occupy. This is optional - if not
"^DD",358.2,358.21,.04,21,3,0)
supplied the column will extend to the bottom of the block.
"^DD",358.2,358.21,.04,"DT")
2930802
"^DD",358.2,358.22,0)
SUBCOLUMN NUMBER SUB-FIELD^^.1^10
"^DD",358.2,358.22,0,"DT")
2960123
"^DD",358.2,358.22,0,"ID","WRITE")
D ID1^IBDFU5
"^DD",358.2,358.22,0,"IX","B",358.22,.01)

"^DD",358.2,358.22,0,"NM","SUBCOLUMN NUMBER")

"^DD",358.2,358.22,0,"UP")
358.2
"^DD",358.2,358.22,.01,0)
SUBCOLUMN NUMBER^MRNJ1,0X^^0;1^K:+X'=X!(X>6)!(X<1)!(X?.E1"."1N.N)!($D(^IBE(358.2,DA(1),2,"B",X))) X
"^DD",358.2,358.22,.01,.1)
Number of the subcolumn, subcolumns being numbered 1-6, left-to-right
"^DD",358.2,358.22,.01,1,0)
^.1
"^DD",358.2,358.22,.01,1,1,0)
358.22^B
"^DD",358.2,358.22,.01,1,1,1)
S ^IBE(358.2,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",358.2,358.22,.01,1,1,2)
K ^IBE(358.2,DA(1),2,"B",$E(X,1,30),DA)
"^DD",358.2,358.22,.01,3)
The SUBCOLUMN NUMBER determines the order in which the subcolumns will display. There are at most 6 subcolumns, numbered 1-6.
"^DD",358.2,358.22,.01,21,0)
^^2^2^2930527^
"^DD",358.2,358.22,.01,21,1,0)
 
"^DD",358.2,358.22,.01,21,2,0)
The order that the subcolumn will appear on the form.
"^DD",358.2,358.22,.01,"DT")
2930413
"^DD",358.2,358.22,.02,0)
SUBCOLUMN HEADER^F^^0;2^K:$L(X)>150!($L(X)<1) X
"^DD",358.2,358.22,.02,.1)
WHAT TEXT SHOULD APPEAR AT THE TOP OF THE SUBCOLUMN?
"^DD",358.2,358.22,.02,3)
What text should appear at the top of the subcolumn?
"^DD",358.2,358.22,.02,21,0)
^^2^2^2930527^
"^DD",358.2,358.22,.02,21,1,0)
 
"^DD",358.2,358.22,.02,21,2,0)
The text that will appear at the top of the subcolumn.
"^DD",358.2,358.22,.02,"DT")
2930414
"^DD",358.2,358.22,.03,0)
SUBCOLUMN WIDTH^NJ3,0^^0;3^K:+X'=X!(X>150)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.2,358.22,.03,.1)
HOW WIDE SHOULD THE SUBCOLUMN BE?
"^DD",358.2,358.22,.03,3)
How wide should the subcolumn be?
"^DD",358.2,358.22,.03,21,0)
^^3^3^2930527^
"^DD",358.2,358.22,.03,21,1,0)
 
"^DD",358.2,358.22,.03,21,2,0)
The width of the subcolumn. If the subcolumn contains a MARKING AREA then
"^DD",358.2,358.22,.03,21,3,0)
the width of the MARKING AREA overrides what ever this is.
"^DD",358.2,358.22,.03,"DT")
2930414
"^DD",358.2,358.22,.04,0)
TYPE OF SUBCOLUMN^RS^1:TEXT;2:MARKING;^0;4^Q
"^DD",358.2,358.22,.04,.1)
SUBCOLUMN CONTAINS TEXT, OR FOR MARKING? (TEXT/MARKING)
"^DD",358.2,358.22,.04,3)
Enter '1' if the subcolumn will contain text, '2' if it will be for the user to mark his selections.
"^DD",358.2,358.22,.04,21,0)
^^4^4^2930527^
"^DD",358.2,358.22,.04,21,1,0)
 
"^DD",358.2,358.22,.04,21,2,0)
The subcolumn can contain either text, derived from what is returned by
"^DD",358.2,358.22,.04,21,3,0)
the PACKAGE INTERFACE, or a MARKING AREA, which is meant to be written in
"^DD",358.2,358.22,.04,21,4,0)
to select an entry on the list.
"^DD",358.2,358.22,.04,"DT")
2930428
"^DD",358.2,358.22,.05,0)
SUBCOLUMN'S DATA^NJ1,0X^^0;5^K:+X'=X!(X>7)!(X<1)!(X?.E1"."1N.N)!($P($G(^IBE(358.6,+$P($G(^IBE(358.2,DA(1),0)),U,11),2)),U,(2*X)-1)="")!((X=1)&'$P($G(^IBE(358.6,+$P($G(^IBE(358.2,DA(1),0)),U,11),2)),U,17)) X
"^DD",358.2,358.22,.05,.1)
WHAT DATA SHOULD BE CONTAINED IN THE SUBCOLUMN?
"^DD",358.2,358.22,.05,3)
WHAT DATA SHOULD BE CONTAINED IN THE SUBCOLUMN?
"^DD",358.2,358.22,.05,4)
D HELP2^IBDFU5
"^DD",358.2,358.22,.05,21,0)
^^3^3^2940719^^
"^DD",358.2,358.22,.05,21,1,0)
 
"^DD",358.2,358.22,.05,21,2,0)
The Package Interface returns a record, which is composed of fields. This
"^DD",358.2,358.22,.05,21,3,0)
identifies which field goes in the subcolumn.
"^DD",358.2,358.22,.05,"DT")
2940719
"^DD",358.2,358.22,.06,0)
MARKING AREA^P358.91'^IBE(358.91,^0;6^Q
"^DD",358.2,358.22,.06,.1)
TYPE OF MARKING AREA
"^DD",358.2,358.22,.06,3)
What type of marking area should appear in the subcolumn?
"^DD",358.2,358.22,.06,21,0)
^^2^2^2930527^
"^DD",358.2,358.22,.06,21,1,0)
 
"^DD",358.2,358.22,.06,21,2,0)
This identifies which MARKING AREA should go in the subcolumn.
"^DD",358.2,358.22,.06,"DT")
2930414
"^DD",358.2,358.22,.07,0)
ALLOW EDITING OF TEXT?^S^0:NO;1:YES;^0;7^Q
"^DD",358.2,358.22,.07,.1)
ALLOW EDITING OF THE TEXT APPEARING IN THIS SUBCOLUMN? (YES/NO)
"^DD",358.2,358.22,.07,3)
Is it okey to edit the text appearing in this subcolumn?
"^DD",358.2,358.22,.07,21,0)
^^4^4^2930527^
"^DD",358.2,358.22,.07,21,1,0)
 
"^DD",358.2,358.22,.07,21,2,0)
This determines whether or not the user, when selecting items to appear on
"^DD",358.2,358.22,.07,21,3,0)
the list, will be able to edit the text appearing in the subcolum. This is
"^DD",358.2,358.22,.07,21,4,0)
ignored if the subcolumn contains a MARKING AREA.
"^DD",358.2,358.22,.07,"DT")
2930428
"^DD",358.2,358.22,.08,0)
DO NOT UNDERLINE MARKING AREA?^S^0:NO;1:YES;^0;8^Q
"^DD",358.2,358.22,.08,3)
Enter YES if you do NOT want this subcolumn underlined.
"^DD",358.2,358.22,.08,"DT")
2940607
"^DD",358.2,358.22,.09,0)
DATA QUALIFIER^P358.98'^IBD(358.98,^0;9^Q
"^DD",358.2,358.22,.09,"DT")
2941020
"^DD",358.2,358.22,.1,0)
SELECTION RULE^S^0:ANY NUMBER;1:EXACTLY ONE;2:AT MOST ONE (0 or 1);3:AT LEAST ONE (1 or more);^0;10^Q
"^DD",358.2,358.22,.1,3)
Which rule applies to the choices the user can make in this subcolumn?
"^DD",358.2,358.22,.1,21,0)
^^2^2^2960123^
"^DD",358.2,358.22,.1,21,1,0)
A selection rule can be applied to a subcolumn used to make selections,
"^DD",358.2,358.22,.1,21,2,0)
i.e., one that contains marking areas.
"^DD",358.2,358.22,.1,"DT")
2960123
"^DD",358.6,358.6,0)
FIELD^^21^75
"^DD",358.6,358.6,0,"DDA")
N
"^DD",358.6,358.6,0,"DT")
2961031
"^DD",358.6,358.6,0,"ID",.06)
W ""
"^DD",358.6,358.6,0,"ID","WRITE")
N IBDWNAM S IBDWNAM=$E($P(^(0),U),1,40) D EN^DDIOL(IBDWNAM,"","!?0")
"^DD",358.6,358.6,0,"ID","WRITE1")
N IBDWTYPE S IBDWTYPE=$S($P(^(0),"^",6)=1:"INPUT",$P(^(0),"^",6)=2:"OUTPUT",$P(^(0),"^",6)=3:"SELECTION",1:"REPORT")_$S($P(^(0),U,6)=3&'$P(^(0),"^",13):"  ** NOT SCANNABLE **",1:"") D EN^DDIOL("TYPE="_IBDWTYPE,"","?45")
"^DD",358.6,358.6,0,"IX","B",358.6,.01)

"^DD",358.6,358.6,0,"IX","C",358.6,.04)

"^DD",358.6,358.6,0,"IX","D",358.6,3)

"^DD",358.6,358.6,0,"IX","E",358.6,.01)

"^DD",358.6,358.6,0,"NM","IMP/EXP PACKAGE INTERFACE")

"^DD",358.6,358.6,0,"PT",358.2,.11)

"^DD",358.6,358.6,0,"PT",358.5,.03)

"^DD",358.6,358.6,0,"PT",358.6,.13)

"^DD",358.6,358.6,0,"PT",358.93,.06)

"^DD",358.6,358.6,0,"VRPK")
AUTOMATED INFO COLLECTION SYS
"^DD",358.6,358.6,.01,0)
NAME^RF^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>40!($L(X)<3)!'(X'?1P.E) X
"^DD",358.6,358.6,.01,1,0)
^.1
"^DD",358.6,358.6,.01,1,1,0)
358.6^B
"^DD",358.6,358.6,.01,1,1,1)
S ^IBE(358.6,"B",$E(X,1,30),DA)=""
"^DD",358.6,358.6,.01,1,1,2)
K ^IBE(358.6,"B",$E(X,1,30),DA)
"^DD",358.6,358.6,.01,1,2,0)
358.6^E^MUMPS
"^DD",358.6,358.6,.01,1,2,1)
S ^IBE(358.6,"E",$E(X,$F(X," "),40),DA)=""
"^DD",358.6,358.6,.01,1,2,2)
K ^IBE(358.6,"E",$E(X,$F(X," "),40),DA)
"^DD",358.6,358.6,.01,1,2,"%D",0)
^^4^4^2940224^
"^DD",358.6,358.6,.01,1,2,"%D",1,0)
 
"^DD",358.6,358.6,.01,1,2,"%D",2,0)
For package interfaces that are output routines the name has the custodial
"^DD",358.6,358.6,.01,1,2,"%D",3,0)
package's name space as a prefix. This cross-reference removes that
"^DD",358.6,358.6,.01,1,2,"%D",4,0)
prefix. It is used to improve the display of output routines for the user.
"^DD",358.6,358.6,.01,1,2,"DT")
2930409
"^DD",358.6,358.6,.01,3)
Answer must be 3-40 characters in length. All entries with Action Type other than PRINT REPORT must be be prefixed with the namespace of the package that is responsible for the data.
"^DD",358.6,358.6,.01,21,0)
^^3^3^2950412^^^^
"^DD",358.6,358.6,.01,21,1,0)
 
"^DD",358.6,358.6,.01,21,2,0)
The name of the Package Interface. For interfaces returning data the name
"^DD",358.6,358.6,.01,21,3,0)
should be preceded with the namespace of the package.
"^DD",358.6,358.6,.01,23,0)
^^1^1^2950412^
"^DD",358.6,358.6,.01,23,1,0)
 
"^DD",358.6,358.6,.01,"DT")
2930409
"^DD",358.6,358.6,.02,0)
ENTRY POINT^F^^0;2^K:$L(X)>8!($L(X)<1) X
"^DD",358.6,358.6,.02,3)
What entry point into the routine does this package interface use?
"^DD",358.6,358.6,.02,21,0)
^^2^2^2941018^^
"^DD",358.6,358.6,.02,21,1,0)
 
"^DD",358.6,358.6,.02,21,2,0)
The entry point in the routine that should be called.
"^DD",358.6,358.6,.02,"DT")
2941018
"^DD",358.6,358.6,.03,0)
ROUTINE^F^^0;3^K:$L(X)>8!($L(X)<1) X
"^DD",358.6,358.6,.03,3)
What routine does this package interface use?
"^DD",358.6,358.6,.03,21,0)
^^2^2^2941018^^
"^DD",358.6,358.6,.03,21,1,0)
 
"^DD",358.6,358.6,.03,21,2,0)
The routine that should be called.
"^DD",358.6,358.6,.03,"DT")
2921125
"^DD",358.6,358.6,.04,0)
CUSTODIAL PACKAGE^F^^0;4^K:$L(X)>20!($L(X)<3) X
"^DD",358.6,358.6,.04,1,0)
^.1
"^DD",358.6,358.6,.04,1,1,0)
358.6^C
"^DD",358.6,358.6,.04,1,1,1)
S ^IBE(358.6,"C",$E(X,1,30),DA)=""
"^DD",358.6,358.6,.04,1,1,2)
K ^IBE(358.6,"C",$E(X,1,30),DA)
"^DD",358.6,358.6,.04,1,1,"DT")
2921229
"^DD",358.6,358.6,.04,3)
For Package Interfaces that return data the Custodial Package is the package that is providing the data. For Package Interfaces that print reports it is the package that is providing the report.
"^DD",358.6,358.6,.04,21,0)
^^2^2^2940217^
"^DD",358.6,358.6,.04,21,1,0)
This is a free text pointer to the package file. It serves only to
"^DD",358.6,358.6,.04,21,2,0)
document the custodial package of the data.
"^DD",358.6,358.6,.04,"DT")
2930726
"^DD",358.6,358.6,.05,0)
VARIABLE DATA?^S^0:NO;1:YES;^0;5^Q
"^DD",358.6,358.6,.05,.1)
DOES THE DATA VARY FROM PATIENT TO PATIENT?
"^DD",358.6,358.6,.05,3)
Enter YES if the data returned is variable, NO if the data is always the same.
"^DD",358.6,358.6,.05,21,0)
^^3^3^2930726^^^
"^DD",358.6,358.6,.05,21,1,0)
This field is used in the batch printing of encounter forms. The purpose
"^DD",358.6,358.6,.05,21,2,0)
is to avoid recomputing fields whose data does not change from patient to
"^DD",358.6,358.6,.05,21,3,0)
patient.
"^DD",358.6,358.6,.05,"DT")
2931124
"^DD",358.6,358.6,.06,0)
ACTION TYPE^RS^1:INPUT;2:DISPLAY;3:SELECTION;4:PRINT REPORT;^0;6^Q
"^DD",358.6,358.6,.06,3)
Is this interface for inputting data, displaying data to a form, for creating lists that will appear on a form, or for printing reports?
"^DD",358.6,358.6,.06,21,0)
^^9^9^2950825^
"^DD",358.6,358.6,.06,21,1,0)
                                                                   
"^DD",358.6,358.6,.06,21,2,0)
 
"^DD",358.6,358.6,.06,21,3,0)
Enter 1 for INPUT if the interface accepts data input from the user
"^DD",358.6,358.6,.06,21,4,0)
and transmits the data to the appropriate package. Enter 2 for DISPLAY
"^DD",358.6,358.6,.06,21,5,0)
if the interface retrieve data for display to a form. Enter 3 for
"^DD",358.6,358.6,.06,21,6,0)
SELECTION if the interface is for building a list to display
"^DD",358.6,358.6,.06,21,7,0)
to a form. Enter 4 if the interface is for printing a report. If
"^DD",358.6,358.6,.06,21,8,0)
the ACTION TYPE is SELECTION then the data type must be a record and the
"^DD",358.6,358.6,.06,21,9,0)
first piece must be the ID use to uniquely identify the selection.
"^DD",358.6,358.6,.06,"DT")
2950825
"^DD",358.6,358.6,.07,0)
DATA TYPE^S^1:SINGLE VALUE;2:RECORD;3:LIST OF SINGLE VALUES;4:LIST OF RECORDS;5:WORD PROCESSING;^0;7^Q
"^DD",358.6,358.6,.07,.1)
WHAT FORMAT WILL THE DATA BE IN?
"^DD",358.6,358.6,.07,3)
What format will the data be in?
"^DD",358.6,358.6,.07,21,0)
^^9^9^2950825^
"^DD",358.6,358.6,.07,21,1,0)
Only applies to selection or display interfaces, both of which retrieve
"^DD",358.6,358.6,.07,21,2,0)
data for display to a form. It is the type of format the data should be
"^DD",358.6,358.6,.07,21,3,0)
in.
"^DD",358.6,358.6,.07,21,4,0)
 
"^DD",358.6,358.6,.07,21,5,0)
A single value is a string without pieces. A record is a set of strings
"^DD",358.6,358.6,.07,21,6,0)
concatenated together with "^" separating the pieces. A list is an
"^DD",358.6,358.6,.07,21,7,0)
indefinite number of values, each numbered, each containing the same type
"^DD",358.6,358.6,.07,21,8,0)
of information. A word processing data type will be in FM format.
"^DD",358.6,358.6,.07,21,9,0)
If the ACTION TYPE is SELECTION then the data type must be record.
"^DD",358.6,358.6,.07,"DT")
2930726
"^DD",358.6,358.6,.08,0)
PRINT COMPLETE^S^0:NO;1:YES;^0;8^Q
"^DD",358.6,358.6,.08,3)
If there is insufficient room on the form to print the data, should it be re-printed in full on a separate page?
"^DD",358.6,358.6,.08,21,0)
^^4^4^2930527^
"^DD",358.6,358.6,.08,21,1,0)
 
"^DD",358.6,358.6,.08,21,2,0)
This field is used to determine what should happen if the data does not
"^DD",358.6,358.6,.08,21,3,0)
fit in the space allocated to it on the form. If answered YES the data
"^DD",358.6,358.6,.08,21,4,0)
will be printed on another page.
"^DD",358.6,358.6,.08,"DT")
2930507
"^DD",358.6,358.6,.09,0)
AVAILABLE? (Y/N)^RS^0:NO;1:YES;^0;9^Q
"^DD",358.6,358.6,.09,3)
Is this package interface now available for use?
"^DD",358.6,358.6,.09,21,0)
^^3^3^2930527^
"^DD",358.6,358.6,.09,21,1,0)
 
"^DD",358.6,358.6,.09,21,2,0)
This field should be set to YES if the interface is available, NO if it is
"^DD",358.6,358.6,.09,21,3,0)
not available. Interfaces that are not available are not called.
"^DD",358.6,358.6,.09,"DT")
2921213
"^DD",358.6,358.6,.1,0)
HEALTH SUMMARY?^S^0:NO;1:YES;^0;10^Q
"^DD",358.6,358.6,.1,.1)
ARE YOU REQUESTING A HEALTH SUMMARY?
"^DD",358.6,358.6,.1,2.1)
S:Y=+Y Y=Y+1
"^DD",358.6,358.6,.1,3)
 Are you requesting a HEALTH SUMMARY to print?
"^DD",358.6,358.6,.1,21,0)
^^7^7^2930616^
"^DD",358.6,358.6,.1,21,1,0)
 
"^DD",358.6,358.6,.1,21,2,0)
This field will determine how to go about printing the report or form. It
"^DD",358.6,358.6,.1,21,3,0)
applies only to Package Interfaces of ACTION TYPE = PRINT REPORT. Health
"^DD",358.6,358.6,.1,21,4,0)
Summaries use the field HEALTH SUMMARY to determine the type of Health
"^DD",358.6,358.6,.1,21,5,0)
Summary to print. The process of printing Health Summaries dos not use the
"^DD",358.6,358.6,.1,21,6,0)
fields ENTRY POINT or ROUTINE, since all Health Summaries are printed in
"^DD",358.6,358.6,.1,21,7,0)
the same way.
"^DD",358.6,358.6,.1,"DT")
2930616
"^DD",358.6,358.6,.11,0)
TYPE OF HEALTH SUMMARY^*P142'^GMT(142,^0;11^S DIC("S")="I $P(^(0),U)'=""GMTS HS ADHOC OPTION""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",358.6,358.6,.11,3)
Which Health Summary do you want printed?
"^DD",358.6,358.6,.11,12)
EXCLUDES AD HOC HEALTH SUMMARIES
"^DD",358.6,358.6,.11,12.1)
S DIC("S")="I $P(^(0),U)'=""GMTS HS ADHOC OPTION"""
"^DD",358.6,358.6,.11,21,0)
^^4^4^2940224^
"^DD",358.6,358.6,.11,21,1,0)
 
"^DD",358.6,358.6,.11,21,2,0)
This identifies the Health Summary that should be printed when this
"^DD",358.6,358.6,.11,21,3,0)
Package Interface is invoked. It should be null unless the HEALTH SUMMARY?
"^DD",358.6,358.6,.11,21,4,0)
field #.1 is coded YES.
"^DD",358.6,358.6,.11,"DT")
2930617
"^DD",358.6,358.6,.12,0)
TOOLKIT MEMBER?^S^0:NO;1:YES;^0;12^Q
"^DD",358.6,358.6,.12,.1)
SHOULD THIS PACKAGE INTERFACE BE PART OF THE TOOLKIT?
"^DD",358.6,358.6,.12,3)
Enter YES if this PACKAGE INTERFACE was added by the package developers as part of the toolkit, enter NO otherwise.
"^DD",358.6,358.6,.12,21,0)
^^3^3^2950808^^
"^DD",358.6,358.6,.12,21,1,0)
 
"^DD",358.6,358.6,.12,21,2,0)
Package Interfaces that are developed for national use will be documented
"^DD",358.6,358.6,.12,21,3,0)
as being part of the toolkit.
"^DD",358.6,358.6,.12,"DT")
2950711
"^DD",358.6,358.6,.13,0)
PACKAGE INTERFACE FOR INPUT^*P358.6'^IBE(358.6,^0;13^S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$P(^(0),U,16)[""S""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",358.6,358.6,.13,.1)
WHICH INTERFACE SHOULD THIS LIST USE FOR PASSING DATA TO THE DATA BASE?
"^DD",358.6,358.6,.13,3)
What interface should be used for inputting data entered on the selection list?
"^DD",358.6,358.6,.13,12)
Must be an available interfaces for accepting input from selection lists.
"^DD",358.6,358.6,.13,12.1)
S DIC("S")="I $P(^(0),U,6)=1,$P(^(0),U,9)=1,$P(^(0),U,16)[""S"""
"^DD",358.6,358.6,.13,21,0)
^^1^1^2950825^^^^
"^DD",358.6,358.6,.13,21,1,0)
Used to map scanned data to DHCP.
"^DD",358.6,358.6,.13,"DT")
2950825
"^DD",358.6,358.6,.14,0)
DYNAMIC SELECTIONS^S^0:NO;1:YES;^0;14^Q
"^DD",358.6,358.6,.14,3)
Only for selection routines. Enter YES if the Package Interface builds the selection list each time the form is printed.
"^DD",358.6,358.6,.14,21,0)
^^2^2^2950719^
"^DD",358.6,358.6,.14,21,1,0)
This is used to indicate whether the interface is used to build selection
"^DD",358.6,358.6,.14,21,2,0)
lists at print time.
"^DD",358.6,358.6,.14,"DT")
2941221
"^DD",358.6,358.6,.15,0)
DO NOT USE DFN AS A SUBSCRIPT^*S^0:NO;1:YES;^0;15^Q
"^DD",358.6,358.6,.15,3)
If the patient DFN should not be used as a subscript when passing data enter YES.
"^DD",358.6,358.6,.15,12)
If the action type is not OUTPUT ROUTINE then this field should not be set to NO.
"^DD",358.6,358.6,.15,12.1)
S DIC("S")="I (Y=1)!($P(^IBE(358.6,DA,0),U,6)=2)"
"^DD",358.6,358.6,.15,21,0)
^^6^6^2950413^^^^
"^DD",358.6,358.6,.15,21,1,0)
Originally, the patient DFN was used as a subscript when returning data
"^DD",358.6,358.6,.15,21,2,0)
for Package Interfaces of type output, but not for other types of
"^DD",358.6,358.6,.15,21,3,0)
interfaces. It is no longer necessary for any new Package Interface to use
"^DD",358.6,358.6,.15,21,4,0)
DFN as a subscript, but, to maintain compatibilty, output routines
"^DD",358.6,358.6,.15,21,5,0)
must set this field to YES if DFN is not to be used as a subscript. This
"^DD",358.6,358.6,.15,21,6,0)
field has no effect on other types of interfaces.
"^DD",358.6,358.6,.15,"DT")
2950413
"^DD",358.6,358.6,.16,0)
ALLOWED OBJECT USE^FX^^0;16^S X=$$UPPER^VALM1(X) K:$L(X)>4!("SMHP"'[$E(X,1))!("SMHP"'[$E(X,2))!("SMHP"'[$E(X,3))!("SMHP"'[$E(X,4)) X
"^DD",358.6,358.6,.16,3)

"^DD",358.6,358.6,.16,4)
D HELP7^IBDFU5A
"^DD",358.6,358.6,.16,21,0)
^^5^5^2950913^^^^
"^DD",358.6,358.6,.16,21,1,0)
This field applies only to package interfaces for input and is used to
"^DD",358.6,358.6,.16,21,2,0)
determine which package interfaces a particular type of form object may
"^DD",358.6,358.6,.16,21,3,0)
point to. Some combinations don't make sense. For example, it would not
"^DD",358.6,358.6,.16,21,4,0)
make sense to allow a multiple choice question to point to vitals, which
"^DD",358.6,358.6,.16,21,5,0)
is used to input data such as temperature and blood pressure.
"^DD",358.6,358.6,.16,"DT")
2950913
"^DD",358.6,358.6,.17,0)
ASK FOR ADDITIONAL NARRATIVE^S^0:NO;1:YES;^0;17^Q
"^DD",358.6,358.6,.17,3)
Answer yes or no.
"^DD",358.6,358.6,.17,21,0)
^^8^8^2960123^
"^DD",358.6,358.6,.17,21,1,0)
Enter whether users should be prompted for specifying the provider
"^DD",358.6,358.6,.17,21,2,0)
narrative that will be sent to PCE (and problem list) when creating a
"^DD",358.6,358.6,.17,21,3,0)
selection list.  If this is answered no and the narrative is sent to
"^DD",358.6,358.6,.17,21,4,0)
PCE then the text as it appears on the form will be used as the
"^DD",358.6,358.6,.17,21,5,0)
provider narrative.
"^DD",358.6,358.6,.17,21,6,0)
 
"^DD",358.6,358.6,.17,21,7,0)
Generally only diagnosis and clinical lexicon entries will want this
"^DD",358.6,358.6,.17,21,8,0)
field set to Yes.
"^DD",358.6,358.6,.17,"DT")
2960123
"^DD",358.6,358.6,.18,0)
ASK FOR CLINICAL LEXICON^S^0:NO;1:YES;^0;18^Q
"^DD",358.6,358.6,.18,3)
 Enter 'Yes' if you want to map entries from this interface to the clinical lexicon.
"^DD",358.6,358.6,.18,21,0)
^^10^10^2960205^
"^DD",358.6,358.6,.18,21,1,0)
If this field is answered 'Yes' then users who are editing or creating
"^DD",358.6,358.6,.18,21,2,0)
selection lists based on this interface will be asked to map each entry
"^DD",358.6,358.6,.18,21,3,0)
(thought it is optional) to a clinical lexicon entry.  This is highly
"^DD",358.6,358.6,.18,21,4,0)
recommended for user who are scanning diagnosis entries and trying to 
"^DD",358.6,358.6,.18,21,5,0)
add entries to the Patients Problem list.
"^DD",358.6,358.6,.18,21,6,0)
 
"^DD",358.6,358.6,.18,21,7,0)
The primary purpose of this field is to allow sites who have built selection
"^DD",358.6,358.6,.18,21,8,0)
lists using the ICD9 Diagnosis file to map each entry to the clinical lexicon.
"^DD",358.6,358.6,.18,21,9,0)
The Problem List EP has recommended that each problem added to the problem
"^DD",358.6,358.6,.18,21,10,0)
list be associated with a clinical lexicon entry.
"^DD",358.6,358.6,.18,"DT")
2960205
"^DD",358.6,358.6,.19,0)
DQ REQUIRED^S^1:YES;^0;19^Q
"^DD",358.6,358.6,.19,21,0)
^^2^2^2960212^
"^DD",358.6,358.6,.19,21,1,0)
Field used to determine if a data qualifier is required for this
"^DD",358.6,358.6,.19,21,2,0)
input interface.
"^DD",358.6,358.6,.19,"DT")
2960212
"^DD",358.6,358.6,.2,0)
ASK FOR CLINICAL REMINDERS^S^0:NO;1:YES;^0;20^Q
"^DD",358.6,358.6,.2,3)
If this package interface is for display of clinical reminders answer yes, otherwise answer no.
"^DD",358.6,358.6,.2,21,0)
^^2^2^2990122^^^^
"^DD",358.6,358.6,.2,21,1,0)
If this package interface is for display of clinical reminders answer yes, 
"^DD",358.6,358.6,.2,21,2,0)
otherwise answer no.
"^DD",358.6,358.6,.2,"DT")
2971015
"^DD",358.6,358.6,1,0)
DESCRIPTION^358.61^^1;0
"^DD",358.6,358.6,1,21,0)
^^1^1^2950719^^^^
"^DD",358.6,358.6,1,21,1,0)
Should describe the data being exchanged by the package interface.
"^DD",358.6,358.6,2.01,0)
PIECE 1 DESCRIPTIVE NAME^F^^2;1^K:$L(X)>30!($L(X)<3) X
"^DD",358.6,358.6,2.01,.1)
WHAT IS THE FIRST PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",358.6,358.6,2.01,3)
Answer must be 3-30 characters in length.
"^DD",358.6,358.6,2.01,21,0)
^^3^3^2930527^
"^DD",358.6,358.6,2.01,21,1,0)
 
"^DD",358.6,358.6,2.01,21,2,0)
Should be a descriptive name of the first field in the record returned by
"^DD",358.6,358.6,2.01,21,3,0)
the interface.
"^DD",358.6,358.6,2.01,"DT")
2930726
"^DD",358.6,358.6,2.02,0)
PIECE 1 MAXIMUM LENGTH^NJ3,0^^2;2^K:+X'=X!(X>210)!(X<0)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,2.02,.1)
WHAT IS ITS MAXIMUM LENGTH?
"^DD",358.6,358.6,2.02,3)
Type a Number between 0 and 210, 0 Decimal Digits
"^DD",358.6,358.6,2.02,21,0)
^^3^3^2930527^
"^DD",358.6,358.6,2.02,21,1,0)
 
"^DD",358.6,358.6,2.02,21,2,0)
The maximum length of the first field of the record returned by the
"^DD",358.6,358.6,2.02,21,3,0)
interface.
"^DD",358.6,358.6,2.02,"DT")
2930726
"^DD",358.6,358.6,2.03,0)
PIECE 2 DESCRIPTIVE NAME^F^^2;3^K:$L(X)>30!($L(X)<3) X
"^DD",358.6,358.6,2.03,.1)
WHAT IS THE SECOND PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",358.6,358.6,2.03,3)
Answer must be 3-30 characters in length.
"^DD",358.6,358.6,2.03,21,0)
^^3^3^2930528^
"^DD",358.6,358.6,2.03,21,1,0)
 
"^DD",358.6,358.6,2.03,21,2,0)
A descriptive name of the second field of the record returned by the
"^DD",358.6,358.6,2.03,21,3,0)
interface routine.
"^DD",358.6,358.6,2.03,"DT")
2930726
"^DD",358.6,358.6,2.04,0)
WHAT IS ITS MAXIMUM LENGTH?^NJ3,0^^2;4^K:+X'=X!(X>210)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,2.04,3)
Type a Number between 1 and 210, 0 Decimal Digits
"^DD",358.6,358.6,2.04,21,0)
^^3^3^2930528^
"^DD",358.6,358.6,2.04,21,1,0)
 
"^DD",358.6,358.6,2.04,21,2,0)
The maximum length of the second field of the record returned by the
"^DD",358.6,358.6,2.04,21,3,0)
interface routine.
"^DD",358.6,358.6,2.04,"DT")
2930726
"^DD",358.6,358.6,2.05,0)
PIECE 3 DESCRIPTIVE NAME^F^^2;5^K:$L(X)>30!($L(X)<3) X
"^DD",358.6,358.6,2.05,.1)
WHAT IS THE THIRD PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",358.6,358.6,2.05,3)
Answer must be 3-30 characters in length.
"^DD",358.6,358.6,2.05,21,0)
^^3^3^2930528^
"^DD",358.6,358.6,2.05,21,1,0)
 
"^DD",358.6,358.6,2.05,21,2,0)
A descriptive name of the third field of the record returned by the
"^DD",358.6,358.6,2.05,21,3,0)
interface routine.
"^DD",358.6,358.6,2.05,"DT")
2930726
"^DD",358.6,358.6,2.06,0)
PIECE 3 MAXIMUM LENGTH^NJ3,0^^2;6^K:+X'=X!(X>210)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,2.06,.1)
WHAT IS ITS MAXIMUM LENGTH?
"^DD",358.6,358.6,2.06,3)
Type a Number between 1 and 210, 0 Decimal Digits
"^DD",358.6,358.6,2.06,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.06,21,1,0)
 
"^DD",358.6,358.6,2.06,21,2,0)
The maximum length of the 3rd field returned by the interface routine.
"^DD",358.6,358.6,2.06,"DT")
2930726
"^DD",358.6,358.6,2.07,0)
PIECE 4 DESCRIPTIVE NAME^F^^2;7^K:$L(X)>30!($L(X)<3) X
"^DD",358.6,358.6,2.07,.1)
WHAT IS THE FOURTH PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",358.6,358.6,2.07,3)
Answer must be 3-30 characters in length.
"^DD",358.6,358.6,2.07,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.07,21,1,0)
 
"^DD",358.6,358.6,2.07,21,2,0)
A descriptive name of the 4th field returned by the interface routine.
"^DD",358.6,358.6,2.07,"DT")
2930726
"^DD",358.6,358.6,2.08,0)
PIECE 4 MAXIMUM LENGTH^NJ3,0^^2;8^K:+X'=X!(X>200)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,2.08,.1)
WHAT IS ITS MAXIMUM LENGTH?
"^DD",358.6,358.6,2.08,3)
Type a Number between 1 and 200, 0 Decimal Digits
"^DD",358.6,358.6,2.08,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.08,21,1,0)
 
"^DD",358.6,358.6,2.08,21,2,0)
The maximum length of the 4th field returned by the interface routine.
"^DD",358.6,358.6,2.08,"DT")
2930726
"^DD",358.6,358.6,2.09,0)
PIECE 5 DESCRIPTIVE NAME^F^^2;9^K:$L(X)>30!($L(X)<3) X
"^DD",358.6,358.6,2.09,.1)
WHAT IS THE FIFTH PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",358.6,358.6,2.09,3)
Answer must be 3-30 characters in length.
"^DD",358.6,358.6,2.09,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.09,21,1,0)
 
"^DD",358.6,358.6,2.09,21,2,0)
A descriptive name of the 5th field returned by the interface routine.
"^DD",358.6,358.6,2.09,"DT")
2930726
"^DD",358.6,358.6,2.1,0)
PIECE 5 MAXIMUM LENGTH^NJ3,0^^2;10^K:+X'=X!(X>210)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,2.1,.1)
WHAT IS ITS MAXIMUM LENGTH?
"^DD",358.6,358.6,2.1,3)
Type a Number between 1 and 210, 0 Decimal Digits
"^DD",358.6,358.6,2.1,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.1,21,1,0)
 
"^DD",358.6,358.6,2.1,21,2,0)
The maximum length of the 5th field returned by the interface routine.
"^DD",358.6,358.6,2.1,"DT")
2930726
"^DD",358.6,358.6,2.11,0)
PIECE 6 DESCRIPTIVE NAME^F^^2;11^K:$L(X)>30!($L(X)<3) X
"^DD",358.6,358.6,2.11,.1)
WHAT IS THE SIXTH PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",358.6,358.6,2.11,3)
Answer must be 3-30 characters in length.
"^DD",358.6,358.6,2.11,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.11,21,1,0)
 
"^DD",358.6,358.6,2.11,21,2,0)
A descriptive name fo the 6th field returned by the interface routine.
"^DD",358.6,358.6,2.11,"DT")
2930726
"^DD",358.6,358.6,2.12,0)
PIECE 6 MAXIMUM LENGTH^NJ3,0^^2;12^K:+X'=X!(X>210)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,2.12,.1)
WHAT IS ITS MAXIMUM LENGTH?
"^DD",358.6,358.6,2.12,3)
Type a Number between 1 and 210, 0 Decimal Digits
"^DD",358.6,358.6,2.12,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.12,21,1,0)
 
"^DD",358.6,358.6,2.12,21,2,0)
The maximum length of the 6th field returned by the interface routine.
"^DD",358.6,358.6,2.12,"DT")
2930726
"^DD",358.6,358.6,2.13,0)
PIECE 7 DESCRIPTIVE NAME^F^^2;13^K:$L(X)>30!($L(X)<3) X
"^DD",358.6,358.6,2.13,.1)
WHAT IS THE SEVENTH PIECE OF DATA RETURNED BY THE INTERFACE?
"^DD",358.6,358.6,2.13,3)
Answer must be 3-30 characters in length.
"^DD",358.6,358.6,2.13,21,0)
^^3^3^2930528^
"^DD",358.6,358.6,2.13,21,1,0)
 
"^DD",358.6,358.6,2.13,21,2,0)
A descriptive name for the 7th field returned by the package interface
"^DD",358.6,358.6,2.13,21,3,0)
routine.
"^DD",358.6,358.6,2.13,"DT")
2930726
"^DD",358.6,358.6,2.14,0)
PIECE 7 MAXIMUM LENGTH^NJ3,0^^2;14^K:+X'=X!(X>210)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,2.14,.1)
WHAT IS ITS MAXIMUM LENGTH?
"^DD",358.6,358.6,2.14,3)
Type a Number between 1 and 210, 0 Decimal Digits
"^DD",358.6,358.6,2.14,21,0)
^^2^2^2930528^
"^DD",358.6,358.6,2.14,21,1,0)
 
"^DD",358.6,358.6,2.14,21,2,0)
The maximum length of the 7th field returned by the interface routine.
"^DD",358.6,358.6,2.14,"DT")
2930726
"^DD",358.6,358.6,2.16,0)
PIECE 1 RECOMMENDED HEADER^F^^2;16^K:$L(X)>20!($L(X)<1) X
"^DD",358.6,358.6,2.16,3)
Answer must be 1-20 characters in length.
"^DD",358.6,358.6,2.16,21,0)
^^1^1^2950719^
"^DD",358.6,358.6,2.16,21,1,0)
The recommended header will be used as the default when designing a form.
"^DD",358.6,358.6,2.16,"DT")
2950417
"^DD",358.6,358.6,2.17,0)
IS PIECE 1 DISPLAYABLE?^S^0:NO;1:YES;^2;17^Q
"^DD",358.6,358.6,2.17,.1)
CAN THIS FIELD BE DISPLAYED TO THE USER?
"^DD",358.6,358.6,2.17,3)
The first piece of the returned record is reserved for the unique id of the selection. Enter no if it should not be displayed, for example, if it is a pointer.
"^DD",358.6,358.6,2.17,21,0)
^^3^3^2950719^^
"^DD",358.6,358.6,2.17,21,1,0)
This is used only for selection type interfaces. If NO, then the value can
"^DD",358.6,358.6,2.17,21,2,0)
not be displayed to the encounter form.  The first piece must contain the
"^DD",358.6,358.6,2.17,21,3,0)
unique id of the selection.
"^DD",358.6,358.6,2.17,"DT")
2930810
"^DD",358.6,358.6,2.18,0)
EXPORT SELECTIONS/CHOICES?^S^0:NO;1:YES;^2;18^Q
"^DD",358.6,358.6,2.18,3)
Enter NO if the ID returned by the PACKAGE INTERFACE is not constant between sites, for example, if it is a pointer. Otherwise answer YES.
"^DD",358.6,358.6,2.18,21,0)
^^8^8^2950825^
"^DD",358.6,358.6,2.18,21,1,0)
 
"^DD",358.6,358.6,2.18,21,2,0)
 
"^DD",358.6,358.6,2.18,21,3,0)
Applies to selection and input routines. Determines whether
"^DD",358.6,358.6,2.18,21,4,0)
selections appearing on selection lists and choices in a multiple choice
"^DD",358.6,358.6,2.18,21,5,0)
field will be exported along with the form that they appear on. The
"^DD",358.6,358.6,2.18,21,6,0)
import/export utility will not resolve pointers, so if the id used by
"^DD",358.6,358.6,2.18,21,7,0)
the package interface is a pointer that differs between sites
"^DD",358.6,358.6,2.18,21,8,0)
this field should contain NO.
"^DD",358.6,358.6,2.18,"DT")
2950825
"^DD",358.6,358.6,3,0)
USER LOOKUP^F^^3;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>240!($L(X)<1) X
"^DD",358.6,358.6,3,.1)
LIST OF WORDS TO MAKE LOOK-UPS EASIER
"^DD",358.6,358.6,3,1,0)
^.1
"^DD",358.6,358.6,3,1,1,0)
358.6^D^KWIC
"^DD",358.6,358.6,3,1,1,1)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2,^DD("KWIC")'[I S ^IBE(358.6,"D",I,DA)=""
"^DD",358.6,358.6,3,1,1,2)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2 K ^IBE(358.6,"D",I,DA)
"^DD",358.6,358.6,3,1,1,"%D",0)
^^3^3^2930409^^
"^DD",358.6,358.6,3,1,1,"%D",1,0)
 
"^DD",358.6,358.6,3,1,1,"%D",2,0)
This index is meant to assist the user in locating the correct package
"^DD",358.6,358.6,3,1,1,"%D",3,0)
interface needed to display a particular item of data to a form.
"^DD",358.6,358.6,3,1,1,"DT")
2930309
"^DD",358.6,358.6,3,3)
Enter words separated with spaces. They will be indexed to assist in lookup.
"^DD",358.6,358.6,3,4)
D LOOKUP^IBDF16
"^DD",358.6,358.6,3,21,0)
^^4^4^2940217^
"^DD",358.6,358.6,3,21,1,0)
 
"^DD",358.6,358.6,3,21,2,0)
This field is used to create a KWIC index for this file. The purpose is to
"^DD",358.6,358.6,3,21,3,0)
assist the user in locating the package interface he needs to display a
"^DD",358.6,358.6,3,21,4,0)
particular item of data to a form.
"^DD",358.6,358.6,3,"DT")
2930726
"^DD",358.6,358.6,4.01,0)
ENTRY ACTION^K^^4;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,4.01,3)
This is Standard MUMPS code.
"^DD",358.6,358.6,4.01,9)
@
"^DD",358.6,358.6,4.01,21,0)
^^3^3^2930527^
"^DD",358.6,358.6,4.01,21,1,0)
 
"^DD",358.6,358.6,4.01,21,2,0)
This code will be executed after the PROTECTED VARIABLES are newed, but
"^DD",358.6,358.6,4.01,21,3,0)
before the interface routine is called.
"^DD",358.6,358.6,4.01,"DT")
2930521
"^DD",358.6,358.6,5.01,0)
EXIT ACTION^K^^5;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,5.01,3)
This is Standard MUMPS code.
"^DD",358.6,358.6,5.01,9)
@
"^DD",358.6,358.6,5.01,21,0)
^^3^3^2930528^
"^DD",358.6,358.6,5.01,21,1,0)
 
"^DD",358.6,358.6,5.01,21,2,0)
This code will be executed after the interface routine is called.
"^DD",358.6,358.6,5.01,21,3,0)
The effect of the NEW done on the PROTECTED VARIABLES is still in effect.
"^DD",358.6,358.6,5.01,"DT")
2930518
"^DD",358.6,358.6,6,0)
PROTECTED LOCAL VARIABLES^358.66^^6;0
"^DD",358.6,358.6,6,21,0)
^^11^11^2950719^^^
"^DD",358.6,358.6,6,21,1,0)
 
"^DD",358.6,358.6,6,21,2,0)
This is a list of variables that should be newed before the entry action
"^DD",358.6,358.6,6,21,3,0)
or calling the interface routine. It is protection against interfaces that
"^DD",358.6,358.6,6,21,4,0)
alter or kill variables, or entry actions that do so. Note that REQUIRED
"^DD",358.6,358.6,6,21,5,0)
VARIABLES should not also be PROTECTED VARIABLES. If an interface routine
"^DD",358.6,358.6,6,21,6,0)
changes a required variable, however, there is a way to protect it.
"^DD",358.6,358.6,6,21,7,0)
Supposing, for example, DFN is killed by the interface. This will protect
"^DD",358.6,358.6,6,21,8,0)
it:
"^DD",358.6,358.6,6,21,9,0)
     PROTECTED VARIABLE:   IBDFN
"^DD",358.6,358.6,6,21,10,0)
     ENTRY ACTION:  S IBDFN=DFN
"^DD",358.6,358.6,6,21,11,0)
     EXIT ACTION:   S DFN=IBDFN
"^DD",358.6,358.6,7,0)
REQUIRED LOCAL VARIABLES^358.67^^7;0
"^DD",358.6,358.6,7,21,0)
^^4^4^2930528^
"^DD",358.6,358.6,7,21,1,0)
 
"^DD",358.6,358.6,7,21,2,0)
The interface may require inputs. This field is a list of the required
"^DD",358.6,358.6,7,21,3,0)
local variables. The interface will not be called unless the variables are
"^DD",358.6,358.6,7,21,4,0)
determined to exist.
"^DD",358.6,358.6,8.01,0)
PIECE 1 NODE^F^^8;1^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.6,8.01,3)
Answer must be 1-10 characters in length.
"^DD",358.6,358.6,8.01,"DT")
2931203
"^DD",358.6,358.6,8.02,0)
PIECE 2 NODE^F^^8;2^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.6,8.02,3)
Answer must be 1-10 characters in length.
"^DD",358.6,358.6,8.02,"DT")
2931203
"^DD",358.6,358.6,8.03,0)
PIECE 3 NODE^F^^8;3^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.6,8.03,3)
Answer must be 1-10 characters in length.
"^DD",358.6,358.6,8.03,"DT")
2931203
"^DD",358.6,358.6,8.04,0)
PIECE 4 NODE^F^^8;4^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.6,8.04,3)
Answer must be 1-10 characters in length.
"^DD",358.6,358.6,8.04,"DT")
2931203
"^DD",358.6,358.6,8.05,0)
PIECE 5 NODE^F^^8;5^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.6,8.05,3)
Answer must be 1-10 characters in length.
"^DD",358.6,358.6,8.05,"DT")
2931203
"^DD",358.6,358.6,8.06,0)
PIECE 6 NODE^F^^8;6^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.6,8.06,3)
Answer must be 1-10 characters in length.
"^DD",358.6,358.6,8.06,"DT")
2931203
"^DD",358.6,358.6,8.07,0)
PIECE 7 NODE^F^^8;7^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.6,8.07,3)
Answer must be 1-10 characters in length.
"^DD",358.6,358.6,8.07,"DT")
2931203
"^DD",358.6,358.6,9,0)
PCE DIM INPUT TRANSFORM^K^^9;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,9,3)
The input transform should transform X to the value that should be passed.
"^DD",358.6,358.6,9,9)
@
"^DD",358.6,358.6,9,21,0)
^^3^3^2960401^^^^
"^DD",358.6,358.6,9,21,1,0)
Used to transform X, the identifier stored with the form object, to the
"^DD",358.6,358.6,9,21,2,0)
form that should be passed to the PCE Device Interface Module (DIM). It may,
"^DD",358.6,358.6,9,21,3,0)
for example, transform a code to an ien.
"^DD",358.6,358.6,9,"DT")
2960401
"^DD",358.6,358.6,10,0)
HELP TEXT^F^^10;1^K:$L(X)>245!($L(X)<1) X
"^DD",358.6,358.6,10,3)
This should provide some help to the user who is trying to enter a value associated with a bubble.
"^DD",358.6,358.6,10,21,0)
^^2^2^2950817^^^
"^DD",358.6,358.6,10,21,1,0)
This should provide some help to the user who is trying to enter a value
"^DD",358.6,358.6,10,21,2,0)
associated with a bubble.
"^DD",358.6,358.6,10,"DT")
2950522
"^DD",358.6,358.6,11,0)
VALIDATOR^K^^11;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,11,3)
This is Standard MUMPS code will kill X if X no longer identifies a valid code.
"^DD",358.6,358.6,11,9)
@
"^DD",358.6,358.6,11,21,0)
^^7^7^2950825^
"^DD",358.6,358.6,11,21,1,0)
This field is used to validate codes currently on a form. The variable X
"^DD",358.6,358.6,11,21,2,0)
should be set to the identifier that was returned by the Package
"^DD",358.6,358.6,11,21,3,0)
Interface. For selection interfaces, the identifier is always piece 1 of
"^DD",358.6,358.6,11,21,4,0)
the 0 node of the entry in the selection list. Xecuting this field will
"^DD",358.6,358.6,11,21,5,0)
result in X being killed if the value is not valid. This is used by the
"^DD",358.6,358.6,11,21,6,0)
maintanance utility, for example, to find CPT codes that have been
"^DD",358.6,358.6,11,21,7,0)
inactivated.
"^DD",358.6,358.6,11,"DT")
2950908
"^DD",358.6,358.6,12.01,0)
PCE DIM NODE^F^^12;1^K:$L(X)>30!($L(X)<1) X
"^DD",358.6,358.6,12.01,3)
What node will be used to pass the data?
"^DD",358.6,358.6,12.01,21,0)
^^1^1^2960401^^
"^DD",358.6,358.6,12.01,21,1,0)
The node used to pass the data to PCE, using the PCE DEVICE INTERFACE MODULE.
"^DD",358.6,358.6,12.01,"DT")
2960401
"^DD",358.6,358.6,12.02,0)
PCE DIM PIECE, VALUE^NJ2,0^^12;2^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,12.02,3)
What piece should be used to pass the value?
"^DD",358.6,358.6,12.02,21,0)
^^1^1^2960401^^^
"^DD",358.6,358.6,12.02,21,1,0)
The piece in the PXCA node used to pass the input value.
"^DD",358.6,358.6,12.02,"DT")
2960401
"^DD",358.6,358.6,12.03,0)
PCE DIM PIECE, NARRATIVE^NJ2,0^^12;3^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,12.03,3)
What piece should be used to pass the text displayed on the form?
"^DD",358.6,358.6,12.03,21,0)
^^1^1^2960401^^^^
"^DD",358.6,358.6,12.03,21,1,0)
The piece in the PCXA node used to pass the text displayed on the form.
"^DD",358.6,358.6,12.03,"DT")
2960401
"^DD",358.6,358.6,12.04,0)
PCE DIM PIECE, HEADER^NJ2,0^^12;4^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,12.04,3)
What piece should be used to pass the header displayed on the form?
"^DD",358.6,358.6,12.04,21,0)
^^2^2^2960401^^
"^DD",358.6,358.6,12.04,21,1,0)
The piece on the node specified by the PCE Device Interface Module
"^DD",358.6,358.6,12.04,21,2,0)
that the header is mapped to.
"^DD",358.6,358.6,12.04,"DT")
2960401
"^DD",358.6,358.6,12.05,0)
PCE DIM PIECE, DATA QUALIFIER^NJ2,0^^12;5^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,12.05,3)
What piece should be used to pass the data qualifier?
"^DD",358.6,358.6,12.05,21,0)
^^1^1^2960401^^^
"^DD",358.6,358.6,12.05,21,1,0)
The piece of the PXCA node where the data modifier belongs.
"^DD",358.6,358.6,12.05,"DT")
2960401
"^DD",358.6,358.6,12.06,0)
PCE DIM PIECE, QUANTITY^NJ2,0^^12;6^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.6,12.06,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",358.6,358.6,12.06,21,0)
^^2^2^2961031^
"^DD",358.6,358.6,12.06,21,1,0)
An entry in this field indicates which piece of the array the quantity
"^DD",358.6,358.6,12.06,21,2,0)
should be passed on when sending data to PCE.
"^DD",358.6,358.6,12.06,"DT")
2961031
"^DD",358.6,358.6,13,0)
ALLOWABLE QUALIFIERS^358.613V^^13;0
"^DD",358.6,358.6,13,21,0)
^^2^2^2980928^^^^
"^DD",358.6,358.6,13,21,1,0)
This mulitiple contains the list of quailifiers that may apply to the
"^DD",358.6,358.6,13,21,2,0)
data.
"^DD",358.6,358.6,14,0)
PCE DIM OUTPUT TRANSFORM^K^^14;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,14,3)
This should change Y, the value to be passed, to a value suitable for display.
"^DD",358.6,358.6,14,9)
@
"^DD",358.6,358.6,14,21,0)
^^3^3^2960401^^
"^DD",358.6,358.6,14,21,1,0)
This transform should set Y, the value to be passed to the PCE 
"^DD",358.6,358.6,14,21,2,0)
Device Interface Module, to a value that is suitable for display.
"^DD",358.6,358.6,14,21,3,0)
It may, for example, change an ien to a code.
"^DD",358.6,358.6,14,"DT")
2960401
"^DD",358.6,358.6,15,0)
DATA DESCRIPTION^358.615I^^15;0
"^DD",358.6,358.6,15,21,0)
^^2^2^2950330^
"^DD",358.6,358.6,15,21,1,0)
For interfaces that return records, this multiple stores information on
"^DD",358.6,358.6,15,21,2,0)
the fields, other than the first field.
"^DD",358.6,358.6,16.1,0)
ALLOW INPUT OF NARRATIVE?^S^n:NO;o:OPTIONAL;r:REQUIRED;^16;1^Q
"^DD",358.6,358.6,16.1,3)
Should the user be allowed to enter a narrative? Answer n=NO, o=OPTIONAL, r=REQUIRED
"^DD",358.6,358.6,16.1,21,0)
^^2^2^2950719^
"^DD",358.6,358.6,16.1,21,1,0)
For input interfaces, this field determines whether a narrative is
"^DD",358.6,358.6,16.1,21,2,0)
allowed by the PCE Generic Device Interface.
"^DD",358.6,358.6,16.1,"DT")
2950421
"^DD",358.6,358.6,16.2,0)
NARRATIVE DATA TYPE^P358.99'^IBE(358.99,^16;2^Q
"^DD",358.6,358.6,16.2,3)
What data type definition describes the narrative?
"^DD",358.6,358.6,16.2,21,0)
^^2^2^2951018^^
"^DD",358.6,358.6,16.2,21,1,0)
This determines, among other things, how much space to allocate for the
"^DD",358.6,358.6,16.2,21,2,0)
narrative.
"^DD",358.6,358.6,16.2,"DT")
2951018
"^DD",358.6,358.6,16.3,0)
NARRATIVE HEADER^F^^16;3^K:$L(X)>40!($L(X)<1) X
"^DD",358.6,358.6,16.3,3)
Answer must be 1-40 characters in length.
"^DD",358.6,358.6,16.3,21,0)
^^1^1^2950825^
"^DD",358.6,358.6,16.3,21,1,0)
Used to label the narrative field.
"^DD",358.6,358.6,16.3,"DT")
2950815
"^DD",358.6,358.6,16.5,0)
ALLOW INPUT OF PRIMARY VALUE?^S^n:NO;o:OPTIONAL;r:REQUIRED;^16;5^Q
"^DD",358.6,358.6,16.5,3)
Should a code be entered? n=NO, o=OPTIONAL, r=REQUIRED
"^DD",358.6,358.6,16.5,21,0)
^^2^2^2950719^
"^DD",358.6,358.6,16.5,21,1,0)
This applies only to interfaces for input and determines whether a
"^DD",358.6,358.6,16.5,21,2,0)
value, other than a narrative, can be entered.
"^DD",358.6,358.6,16.5,"DT")
2950426
"^DD",358.6,358.6,16.6,0)
PRIMARY VALUE DATA TYPE^P358.99'^IBE(358.99,^16;6^Q
"^DD",358.6,358.6,16.6,3)
What type of data is the primary value?
"^DD",358.6,358.6,16.6,21,0)
^^2^2^2951018^^^
"^DD",358.6,358.6,16.6,21,1,0)
This applies only to interfaces for input and determines, among other
"^DD",358.6,358.6,16.6,21,2,0)
things, the data type of the value to be entered.
"^DD",358.6,358.6,16.6,"DT")
2950914
"^DD",358.6,358.6,16.7,0)
PRIMARY VALUE HEADER^F^^16;7^K:$L(X)>40!($L(X)<1) X
"^DD",358.6,358.6,16.7,3)
Answer must be 1-40 characters in length.
"^DD",358.6,358.6,16.7,21,0)
^^1^1^2950815^
"^DD",358.6,358.6,16.7,21,1,0)
Used to label the primary value field.
"^DD",358.6,358.6,16.7,"DT")
2950815
"^DD",358.6,358.6,16.8,0)
ALLOW MULTIPLIERS^S^1:YES;^16;8^Q
"^DD",358.6,358.6,16.8,3)
Enter yes if this interface will allow entry of quantity at form development time.
"^DD",358.6,358.6,16.8,21,0)
^^3^3^2961031^
"^DD",358.6,358.6,16.8,21,1,0)
For selection interfaces, this determines whether 'quantity' should be
"^DD",358.6,358.6,16.8,21,2,0)
asked at form development time to pass multiple occurrences of a selection
"^DD",358.6,358.6,16.8,21,3,0)
to PCE.
"^DD",358.6,358.6,16.8,"DT")
2961031
"^DD",358.6,358.6,16.9,0)
ALLOW INPUT OF MULTIPLE CODES?^S^1:YES;^16;9^Q
"^DD",358.6,358.6,16.9,3)
Enter a 1 for 'YES'.
"^DD",358.6,358.6,16.9,21,0)
^^4^4^2961031^
"^DD",358.6,358.6,16.9,21,1,0)
Enter a one in this field if the users will be allowed to add more than
"^DD",358.6,358.6,16.9,21,2,0)
one code to pass along to PCE when one entry is bubbled.
"^DD",358.6,358.6,16.9,21,3,0)
Data in this field REQUIRES that field 17 be populated with mumps code
"^DD",358.6,358.6,16.9,21,4,0)
that will allow selection of the code if the entry is edited.
"^DD",358.6,358.6,16.9,"DT")
2961031
"^DD",358.6,358.6,17,0)
SELECTOR^K^^17;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,17,3)
Enter mumps code that will allow the form designer to add a choice to a multiple choice field.
"^DD",358.6,358.6,17,9)
@
"^DD",358.6,358.6,17,21,0)
^^9^9^2950908^^
"^DD",358.6,358.6,17,21,1,0)
This field only applies to input interfaces. It is executed as by an input
"^DD",358.6,358.6,17,21,2,0)
transform when creating a multiple choice field. It should:
"^DD",358.6,358.6,17,21,3,0)
1) Kill X if an nothing is selected, otherwise set X to a value suitable
"^DD",358.6,358.6,17,21,4,0)
for display, perhaps the code.
"^DD",358.6,358.6,17,21,5,0)
2) Set IBLABEL to a suitable label for the choice.
"^DD",358.6,358.6,17,21,6,0)
3) Set IBID to an identifier. The identifier should ideally be exportable,
"^DD",358.6,358.6,17,21,7,0)
meaning the same from site to site. This usually means a coded value
"^DD",358.6,358.6,17,21,8,0)
rather than an ien. The identfier should match that of a corresponding
"^DD",358.6,358.6,17,21,9,0)
selection interface, if there is one.
"^DD",358.6,358.6,17,"DT")
2950908
"^DD",358.6,358.6,18,0)
MANUAL DATA ENTRY ROUTINE^K^^18;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,18,3)
Enter the code to be executed during manual data entry for this interface.  This is Standard MUMPS code.
"^DD",358.6,358.6,18,9)
@
"^DD",358.6,358.6,18,21,0)
^^7^7^2960123^
"^DD",358.6,358.6,18,21,1,0)
This field should only be completed for input package interfaces.  This
"^DD",358.6,358.6,18,21,2,0)
code will be executed to provide quick data entry for a user trying to
"^DD",358.6,358.6,18,21,3,0)
input data for a form.  It is expected that the output of this field will
"^DD",358.6,358.6,18,21,4,0)
be used to format the PXCA array prior to calling PCE to file the data
"^DD",358.6,358.6,18,21,5,0)
for the encounter.
"^DD",358.6,358.6,18,21,6,0)
Developers writing routines for this entry should provide a roll and
"^DD",358.6,358.6,18,21,7,0)
scroll interface for manual entry of items only on the form.
"^DD",358.6,358.6,18,"DT")
2960123
"^DD",358.6,358.6,19,0)
EXTERNAL DISPLAY VALUES^K^^19;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,19,3)
This is Standard MUMPS code.
"^DD",358.6,358.6,19,9)
@
"^DD",358.6,358.6,19,21,0)
^^5^5^2960214^
"^DD",358.6,358.6,19,21,1,0)
Executable code used to translate the internal value that is to
"^DD",358.6,358.6,19,21,2,0)
be passed to PCE into its external value for display purposes.  It
"^DD",358.6,358.6,19,21,3,0)
is used by the data validation routines to display the external
"^DD",358.6,358.6,19,21,4,0)
values and descriptions of the data to be passed, to the user
"^DD",358.6,358.6,19,21,5,0)
for verification.
"^DD",358.6,358.6,19,"DT")
2960214
"^DD",358.6,358.6,20,0)
PASS DQ AS VALUE^S^1:YES;^20;1^Q
"^DD",358.6,358.6,20,3)
Enter Yes if the Data Qualifier should be passed as the Value when sending data to PCE.
"^DD",358.6,358.6,20,21,0)
^^7^7^2961031^
"^DD",358.6,358.6,20,21,1,0)
If the value of the Data Qualifier shall be passed to PCE as the VALUE,
"^DD",358.6,358.6,20,21,2,0)
this field should be set to one.  Doing so will prevent the data in the
"^DD",358.6,358.6,20,21,3,0)
VALUE from populating the PCE DIM NODE, but instead, will allow the Data
"^DD",358.6,358.6,20,21,4,0)
Qualifier to pass as the VALUE.
"^DD",358.6,358.6,20,21,5,0)
This is used mostly for YES/NO Data Qualifiers, where the value may
"^DD",358.6,358.6,20,21,6,0)
be a question, and the Data Qualifier Value, if bubbled, is the value
"^DD",358.6,358.6,20,21,7,0)
that must be placed on the PCE DIM NODE.
"^DD",358.6,358.6,20,"DT")
2961031
"^DD",358.6,358.6,21,0)
PCE DIM PIECE, VARIABLE VALUE^K^^21;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",358.6,358.6,21,3)
This is Standard MUMPS code.
"^DD",358.6,358.6,21,9)
@
"^DD",358.6,358.6,21,21,0)
^^7^7^2961031^
"^DD",358.6,358.6,21,21,1,0)
This field should be populated when the PCE DIM PIECE VALUE is not
"^DD",358.6,358.6,21,21,2,0)
constant.  If the value of that field is dependent upon specific conditions,
"^DD",358.6,358.6,21,21,3,0)
those conditions may be evaluated by placing the MUMPS code in this
"^DD",358.6,358.6,21,21,4,0)
field.  Ultimately, the code should return a value that will be used as
"^DD",358.6,358.6,21,21,5,0)
the PCE DIM PIECE VALUE.  If the return value is null, the original
"^DD",358.6,358.6,21,21,6,0)
PCE DIM PIECE VALUE field will be used to determine the piece location
"^DD",358.6,358.6,21,21,7,0)
to pass the VALUE on.
"^DD",358.6,358.6,21,"DT")
2961031
"^DD",358.6,358.61,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",358.6,358.61,0,"DT")
2921119
"^DD",358.6,358.61,0,"NM","DESCRIPTION")

"^DD",358.6,358.61,0,"UP")
358.6
"^DD",358.6,358.61,.01,0)
/6^W^^0;1^Q
"^DD",358.6,358.61,.01,3)
Enter a description of the data being exchanged.
"^DD",358.6,358.61,.01,21,0)
^^1^1^2950719^^
"^DD",358.6,358.61,.01,21,1,0)
This should describe the data being exchanged b the package interface.
"^DD",358.6,358.61,.01,"DT")
2930210
"^DD",358.6,358.613,0)
ALLOWABLE QUALIFIERS SUB-FIELD^^.08^6
"^DD",358.6,358.613,0,"DT")
2950810
"^DD",358.6,358.613,0,"IX","B",358.613,.01)

"^DD",358.6,358.613,0,"NM","ALLOWABLE QUALIFIERS")

"^DD",358.6,358.613,0,"UP")
358.6
"^DD",358.6,358.613,.01,0)
ALLOWABLE QUALIFIERS^MV^^0;1^Q
"^DD",358.6,358.613,.01,1,0)
^.1
"^DD",358.6,358.613,.01,1,1,0)
358.613^B
"^DD",358.6,358.613,.01,1,1,1)
S ^IBE(358.6,DA(1),13,"B",$E(X,1,30),DA)=""
"^DD",358.6,358.613,.01,1,1,2)
K ^IBE(358.6,DA(1),13,"B",$E(X,1,30),DA)
"^DD",358.6,358.613,.01,1,1,3)
Required Index for Variable Pointer
"^DD",358.6,358.613,.01,3)
Which qualifiers can apply to the data?
"^DD",358.6,358.613,.01,21,0)
^^1^1^2951018^^^^
"^DD",358.6,358.613,.01,21,1,0)
A qualifier that can be used by this package interface.
"^DD",358.6,358.613,.01,"DT")
2950426
"^DD",358.6,358.613,.01,"V",0)
^.12P^2^2
"^DD",358.6,358.613,.01,"V",1,0)
358.98^QUALIFIER^1^Q^n^n
"^DD",358.6,358.613,.01,"V",2,0)
358.99^DATA ELEMENT^2^D^n^n
"^DD",358.6,358.613,.03,0)
INDEPENDENT MAPPING INFO?^RS^0:NO;1:YES;^0;3^Q
"^DD",358.6,358.613,.03,3)
YES means that fields on the form associated with this qualifier will have its own rules for entering the data to the database.
"^DD",358.6,358.613,.03,21,0)
^^2^2^2950719^
"^DD",358.6,358.613,.03,21,1,0)
YES means that data can be mapped into the PCE Generic Device Interface
"^DD",358.6,358.613,.03,21,2,0)
based on the qualifier.
"^DD",358.6,358.613,.03,"DT")
2950426
"^DD",358.6,358.613,.04,0)
PCE GDI NODE^F^^0;4^K:$L(X)>30!($L(X)<1) X
"^DD",358.6,358.613,.04,3)
What node should the qualifier be placed on?
"^DD",358.6,358.613,.04,21,0)
^^1^1^2950719^
"^DD",358.6,358.613,.04,21,1,0)
The node where the data should be placed.
"^DD",358.6,358.613,.04,"DT")
2950710
"^DD",358.6,358.613,.05,0)
PCE GDI PIECE, VALUE^NJ2,0^^0;5^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.613,.05,3)
What piece should the primary value be located?
"^DD",358.6,358.613,.05,21,0)
^^1^1^2950719^
"^DD",358.6,358.613,.05,21,1,0)
The piece on the node where the value should be placed.
"^DD",358.6,358.613,.05,"DT")
2950426
"^DD",358.6,358.613,.07,0)
PCE GDI PIECE, HEADER^NJ2,0^^0;7^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.613,.07,3)
What piece should the header be located on?
"^DD",358.6,358.613,.07,21,0)
^^1^1^2950719^
"^DD",358.6,358.613,.07,21,1,0)
The piece on the node where the associated header should be placed.
"^DD",358.6,358.613,.07,"DT")
2950426
"^DD",358.6,358.613,.08,0)
PCE GDI PIECE, QUALIFIER^NJ2,0^^0;8^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.613,.08,3)
What piece should the qualifier be located on?
"^DD",358.6,358.613,.08,21,0)
^^1^1^2950719^
"^DD",358.6,358.613,.08,21,1,0)
The piece where the qualifier should go.
"^DD",358.6,358.613,.08,"DT")
2950426
"^DD",358.6,358.615,0)
DATA DESCRIPTION SUB-FIELD^^.05^5
"^DD",358.6,358.615,0,"DT")
2950417
"^DD",358.6,358.615,0,"ID","WRITE")
D EN^DDIOL("  PIECE="_$P(^(0),U,3),"","?0")
"^DD",358.6,358.615,0,"IX","B",358.615,.01)

"^DD",358.6,358.615,0,"IX","C",358.615,.03)

"^DD",358.6,358.615,0,"NM","DATA DESCRIPTION")

"^DD",358.6,358.615,0,"UP")
358.6
"^DD",358.6,358.615,.01,0)
DATA^MF^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",358.6,358.615,.01,1,0)
^.1
"^DD",358.6,358.615,.01,1,1,0)
358.615^B
"^DD",358.6,358.615,.01,1,1,1)
S ^IBE(358.6,DA(1),15,"B",$E(X,1,30),DA)=""
"^DD",358.6,358.615,.01,1,1,2)
K ^IBE(358.6,DA(1),15,"B",$E(X,1,30),DA)
"^DD",358.6,358.615,.01,3)
Enter a descriptive name for this data field, up to 30 characters.
"^DD",358.6,358.615,.01,21,0)
^^1^1^2950719^
"^DD",358.6,358.615,.01,21,1,0)
A descriptive name for the data.
"^DD",358.6,358.615,.01,"DT")
2950320
"^DD",358.6,358.615,.02,0)
MAXIMUM LENGTH^RNJ3,0^^0;2^K:+X'=X!(X>210)!(X<1)!(X?.E1"."1N.N) X
"^DD",358.6,358.615,.02,3)
What is the maximum length of this field?
"^DD",358.6,358.615,.02,21,0)
^^1^1^2950719^
"^DD",358.6,358.615,.02,21,1,0)
The maximum length of the data.
"^DD",358.6,358.615,.02,"DT")
2950320
"^DD",358.6,358.615,.03,0)
PIECE^NJ1,0X^^0;3^K:+X'=X!(X>8)!(X<2)!(X?.E1"."1N.N)!($D(^IBE(358.6,D0,15,"C",X))) X
"^DD",358.6,358.615,.03,1,0)
^.1
"^DD",358.6,358.615,.03,1,1,0)
358.615^C
"^DD",358.6,358.615,.03,1,1,1)
S ^IBE(358.6,DA(1),15,"C",$E(X,1,30),DA)=""
"^DD",358.6,358.615,.03,1,1,2)
K ^IBE(358.6,DA(1),15,"C",$E(X,1,30),DA)
"^DD",358.6,358.615,.03,1,1,"%D",0)
^^1^1^2950320^
"^DD",358.6,358.615,.03,1,1,"%D",1,0)
Indexes the field by piece.
"^DD",358.6,358.615,.03,1,1,"DT")
2950320
"^DD",358.6,358.615,.03,3)
In the returned record, which piece will this field be?
"^DD",358.6,358.615,.03,21,0)
^^1^1^2950719^
"^DD",358.6,358.615,.03,21,1,0)
The piece that the data will be returned as.
"^DD",358.6,358.615,.03,"DT")
2950407
"^DD",358.6,358.615,.04,0)
ANNEX NODE^F^^0;4^K:$L(X)>10!($L(X)<1) X
"^DD",358.6,358.615,.04,3)
You can optionally specify the subscript to store the data. Use this when the entire record won't fit on one node.
"^DD",358.6,358.615,.04,21,0)
^^2^2^2950719^
"^DD",358.6,358.615,.04,21,1,0)
In case all the returned data can not be returned on a single node an
"^DD",358.6,358.615,.04,21,2,0)
annex node can be specified.
"^DD",358.6,358.615,.04,"DT")
2950320
"^DD",358.6,358.615,.05,0)
RECOMMENDED HEADER^F^^0;5^K:$L(X)>40!($L(X)<1) X
"^DD",358.6,358.615,.05,3)
Answer must be 1-40 characters in length.
"^DD",358.6,358.615,.05,21,0)
^^1^1^2950719^^
"^DD",358.6,358.615,.05,21,1,0)
The recommended header will be used as the default when designing a form.
"^DD",358.6,358.615,.05,"DT")
2950417
"^DD",358.6,358.66,0)
PROTECTED LOCAL VARIABLES SUB-FIELD^^.01^1
"^DD",358.6,358.66,0,"DT")
2930608
"^DD",358.6,358.66,0,"IX","B",358.66,.01)

"^DD",358.6,358.66,0,"NM","PROTECTED LOCAL VARIABLES")

"^DD",358.6,358.66,0,"UP")
358.6
"^DD",358.6,358.66,.01,0)
PROTECTED LOCAL VARIABLES^MFX^^0;1^K:'$$VARIABLE^IBDFU5(X) X
"^DD",358.6,358.66,.01,1,0)
^.1
"^DD",358.6,358.66,.01,1,1,0)
358.66^B
"^DD",358.6,358.66,.01,1,1,1)
S ^IBE(358.6,DA(1),6,"B",$E(X,1,30),DA)=""
"^DD",358.6,358.66,.01,1,1,2)
K ^IBE(358.6,DA(1),6,"B",$E(X,1,30),DA)
"^DD",358.6,358.66,.01,3)
Enter variables that should be NEWED before the entry action or calling the interface.
"^DD",358.6,358.66,.01,21,0)
^^3^3^2950426^^
"^DD",358.6,358.66,.01,21,1,0)
 
"^DD",358.6,358.66,.01,21,2,0)
A list of variables that should be newed before the entry action or
"^DD",358.6,358.66,.01,21,3,0)
calling the interface.
"^DD",358.6,358.66,.01,"DT")
2930608
"^DD",358.6,358.67,0)
REQUIRED LOCAL VARIABLES SUB-FIELD^^.01^1
"^DD",358.6,358.67,0,"DT")
2930521
"^DD",358.6,358.67,0,"IX","B",358.67,.01)

"^DD",358.6,358.67,0,"NM","REQUIRED LOCAL VARIABLES")

"^DD",358.6,358.67,0,"UP")
358.6
"^DD",358.6,358.67,.01,0)
REQUIRED LOCAL VARIABLE^MFX^^0;1^K:'$$VARIABLE^IBDFU5(X) X
"^DD",358.6,358.67,.01,1,0)
^.1
"^DD",358.6,358.67,.01,1,1,0)
358.67^B
"^DD",358.6,358.67,.01,1,1,1)
S ^IBE(358.6,DA(1),7,"B",$E(X,1,30),DA)=""
"^DD",358.6,358.67,.01,1,1,2)
K ^IBE(358.6,DA(1),7,"B",$E(X,1,30),DA)
"^DD",358.6,358.67,.01,3)
Enter any variables that must exist before the Package Interface routine is called.
"^DD",358.6,358.67,.01,21,0)
^^4^4^2930528^
"^DD",358.6,358.67,.01,21,1,0)
 
"^DD",358.6,358.67,.01,21,2,0)
A variable that is required input to the interface routine. The interface
"^DD",358.6,358.67,.01,21,3,0)
routine will not be called if all of the required variables are not
"^DD",358.6,358.67,.01,21,4,0)
defined.
"^DD",358.6,358.67,.01,"DT")
2930521
"^DIC",357.09,357.09,0)
ENCOUNTER FORM PARAMETERS^357.09
"^DIC",357.09,357.09,0,"GL")
^IBD(357.09,
"^DIC",357.09,357.09,"%D",0)
^^4^4^2951208^^
"^DIC",357.09,357.09,"%D",1,0)
This file contains the AICS parameters that control the operation of
"^DIC",357.09,357.09,"%D",2,0)
the package.  Included are parameters to manage the automatic purge
"^DIC",357.09,357.09,"%D",3,0)
and those necessary to create print manager jobs that automatically 
"^DIC",357.09,357.09,"%D",4,0)
queue encounter forms to print.
"^DIC",357.09,"B","ENCOUNTER FORM PARAMETERS",357.09)

"^DIC",357.6,357.6,0)
PACKAGE INTERFACE^357.6IO
"^DIC",357.6,357.6,0,"GL")
^IBE(357.6,
"^DIC",357.6,357.6,"%D",0)
^^17^17^2950913^^^
"^DIC",357.6,357.6,"%D",1,0)
This file contains a description of all of the interfaces with other packages.
"^DIC",357.6,357.6,"%D",2,0)
The form will invoke the proper interface routines by doing a lookup on
"^DIC",357.6,357.6,"%D",3,0)
this file and then calling the routine by indirection. The
"^DIC",357.6,357.6,"%D",4,0)
Data will be exchanged between the encounter form utilities and other
"^DIC",357.6,357.6,"%D",5,0)
packages by putting the data in at @IBARY. Interfaces that pass a single
"^DIC",357.6,357.6,"%D",6,0)
value or record will will reference data as in: S DATA=@IBARY. Interfaces
"^DIC",357.6,357.6,"%D",7,0)
that pass lists of records or values will reference the data as in:
"^DIC",357.6,357.6,"%D",8,0)
S DATA=@IBARY@(<number of item on the list>).
"^DIC",357.6,357.6,"%D",9,0)
 
"^DIC",357.6,357.6,"%D",10,0)
Note that multiple entries in this file can have the same entry points
"^DIC",357.6,357.6,"%D",11,0)
into routines. This is for efficiency purposes. For example, patient name,
"^DIC",357.6,357.6,"%D",12,0)
DOB and sex are all located on the same node of the Patient file. Each of
"^DIC",357.6,357.6,"%D",13,0)
these items of data can have its own entry in the Package Interface file,
"^DIC",357.6,357.6,"%D",14,0)
but by using the same entry point there is a savings because all of the
"^DIC",357.6,357.6,"%D",15,0)
data on that node can be obtained at once. The routine that invokes the
"^DIC",357.6,357.6,"%D",16,0)
entry points keeps track of those already invoked so that they are not
"^DIC",357.6,357.6,"%D",17,0)
repeated.
"^DIC",357.6,"B","PACKAGE INTERFACE",357.6)

"^DIC",358.1,358.1,0)
IMP/EXP ENCOUNTER FORM BLOCK
"^DIC",358.1,358.1,0,"GL")
^IBE(358.1,
"^DIC",358.1,358.1,"%D",0)
^^4^4^2940217^
"^DIC",358.1,358.1,"%D",1,0)
 
"^DIC",358.1,358.1,"%D",2,0)
This file is nearly identical to file #357.1. It is used by the
"^DIC",358.1,358.1,"%D",3,0)
Import/Export Utility as a temporary staging area for data from that file
"^DIC",358.1,358.1,"%D",4,0)
that is being imported or exported.
"^DIC",358.1,"B","IMP/EXP ENCOUNTER FORM BLOCK",358.1)

"^DIC",358.2,358.2,0)
IMP/EXP SELECTION LIST
"^DIC",358.2,358.2,0,"GL")
^IBE(358.2,
"^DIC",358.2,358.2,"%D",0)
^^1^1^2940829^^^^
"^DIC",358.2,358.2,"%D",1,0)
Used by the import/export utility as a workspace.
"^DIC",358.2,358.2,"%D",2,0)
 
"^DIC",358.2,358.2,"%D",3,0)
 
"^DIC",358.2,358.2,"%D",4,0)
 
"^DIC",358.2,358.2,"%D",5,0)
 
"^DIC",358.2,358.2,"%D",6,0)
 
"^DIC",358.2,358.2,"%D",7,0)
 
"^DIC",358.2,358.2,"%D",8,0)
This file is nearly identical to file #357.2 . It is used by the
"^DIC",358.2,358.2,"%D",9,0)
Import/Export Utility as a temporary staging area for data from that file
"^DIC",358.2,358.2,"%D",10,0)
that is being imported or exported.
"^DIC",358.2,358.2,"%D",11,0)
provisions have been made to specify up to 4 columns per list.
"^DIC",358.2,"B","IMP/EXP SELECTION LIST",358.2)

"^DIC",358.6,358.6,0)
IMP/EXP PACKAGE INTERFACE^358.6I
"^DIC",358.6,358.6,0,"GL")
^IBE(358.6,
"^DIC",358.6,358.6,"%D",0)
^^1^1^2950927^^^^
"^DIC",358.6,358.6,"%D",1,0)
This file is used as a workspace by the import/export utility.
"^DIC",358.6,358.6,"%D",2,0)
Import/Export Utility as a temporary staging area for data from that file
"^DIC",358.6,358.6,"%D",3,0)
that is being imported or exported.
"^DIC",358.6,358.6,"%D",4,0)
 
"^DIC",358.6,358.6,"%D",5,0)
This file contains a description of all of the interfaces with other packages.
"^DIC",358.6,358.6,"%D",6,0)
The form will invoke the proper interface routines by doing a lookup on
"^DIC",358.6,358.6,"%D",7,0)
this file and then invoking the routine by indirection. The INPUT VARIABLE
"^DIC",358.6,358.6,"%D",8,0)
fields are for documentation purposes and to verify that the proper
"^DIC",358.6,358.6,"%D",9,0)
variables are defined. Data will be exchanged between the encounter form
"^DIC",358.6,358.6,"%D",10,0)
utilities and other packages by putting the data in a predefined location.
"^DIC",358.6,358.6,"%D",11,0)
The first part of the subscript is always be ^TMP("IB",$J,"INTERFACES".
"^DIC",358.6,358.6,"%D",12,0)
For output routines, but not selection routines, the fourth subscript is
"^DIC",358.6,358.6,"%D",13,0)
be the patient DFN. The next subscript is the name of the Package
"^DIC",358.6,358.6,"%D",14,0)
Interface. For single valued data and record valued data there is no
"^DIC",358.6,358.6,"%D",15,0)
additional subscript. For interfaces returning a list there is one
"^DIC",358.6,358.6,"%D",16,0)
additional subscript level, the number of the item on the list. For
"^DIC",358.6,358.6,"%D",17,0)
word processing type data the data will be in FM word-processing format,
"^DIC",358.6,358.6,"%D",18,0)
i.e., the final subscripts will be ...1,0),...2,0),...3,0), etc.
"^DIC",358.6,358.6,"%D",19,0)
these items of data can have its own entry in the Package Interface file,
"^DIC",358.6,358.6,"%D",20,0)
but by using the same entry point there is a savings because all of the
"^DIC",358.6,358.6,"%D",21,0)
data on that node can be obtained at once. The routines that invoke the
"^DIC",358.6,358.6,"%D",22,0)
entry point keep track of the entry points already invoked so they are
"^DIC",358.6,358.6,"%D",23,0)
not repeated.
"^DIC",358.6,"B","IMP/EXP PACKAGE INTERFACE",358.6)

**END**
**END**

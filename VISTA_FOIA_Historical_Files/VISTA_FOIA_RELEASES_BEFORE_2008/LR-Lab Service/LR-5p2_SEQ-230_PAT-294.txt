$TXT Created by MORTON,RANDY at VAHVSS.FO-ALBANY.MED.VA.GOV  (KIDS) on Tuesday, 04/08/03 at 15:24
=============================================================================
Run Date: AUG 26, 2003                     Designation: LR*5.2*294
Package : LR - LAB SERVICE                    Priority: Mandatory
Version : 5.2       SEQ #230                    Status: Released
                  Compliance Date: SEP 26, 2003
=============================================================================


Subject: VBECS API'S FOR CPRS AND LAB

Category: 
  - Routine

Description:
============

 This patch is being released in support of the VBECS (Vista Blood 
 Establishment Computer Software) Blood Bank Modernization Project.  In 
 the future, data will be transitioned from the existing M database to a 
 Microsoft SQL database.  The API's release in this patch will allow CPRS 
 and the Lab packages to transition to the new database when it is 
 released.
  
    Get ABORh
          ABORH^VBECA1       Retrieve the ABO & Rh for a patient DFN.
                             If none is on file, return NULL
  
    Get ABO
          ABO^VBECA1         Retrieve the ABO for a patient DFN.
                             If none is on file, return NULL
  
    Get Rh
          RH^VBECA1          Retrieve the Rh for a patient DFN.
                             If none is on file, return NULL
  
    Get RBC Antigens Present
          AGPRES^VBECA1      Retrieve the antigens previously found
                             for the patient.  If none are found,
                             return empty array.
  
    Get Antibodies Identified
          ABID^VBECA1        Retrieve the antibodies previously found
                             for the patient.  If none are found,
                             return empty array.
  
    Get RBC Antigens Absent
          AGAB^VBECA1        Retrieve the absent antigens previously
                             recorded.  If none are on record, return
                             empty array.
  
    Get Transfusion Reactions
          TRRX^VBECA1        Retrieve any previously recorded transfusion
                             reactions.  If none are on record, return
                             empty array.
  
    Get Blood Bank Comments
          BBCMT^VBECA1       Retrieve blood bank comments on the patient.
                             If none are on record, return empty array.
  
    Get Available Autologous Units
          AUTO^VBECA1        Return quantity and component class of units
                             available.  If none are on record return
                             empty array.
  
    Get CPRS Report Data
          DFN^VBECA3A        The following fields are retrieved in
                             support of the CPRS Blood Bank reports.
          CPRS^VBECA3B       This API converts the arrays produced in
                             VBECA3A into a single cohesive array for
                             use by CPRS.
  
       Component Request
          63.084,.01  (Blood Component Request)
          63.084,.04  (Number of Units)
          63.084,.03  (Request Date/Time)
          63.084,.05  (Date/Time Units Wanted)
          63.084,.09  (Requesting Person)
          63,.084,.08 (Entering Person DUZ)
  
       Crossmatch Data
          65,.01      (Unit ID)
          65,.04      (Component)
          65,.07      (ABO Group)
          65,.08      (RH Type)
          65,.06      (Expiration Date/Time)
          65,.16      (Division)
          65.03,.04   (Location) (Note: Most recent entry is
                                  reported here)
  
       Specimen Data
          63.01,.01   (Date/Time Specimen Taken)
          63.01,.03   (Date Report Completed)
          63.01,.01   (Date/Time Specimen Taken)
          63.01,10    (ABO Interpretation)
          63.01,2.9   (DIRECT AHG INTERPRETATION)
          63.01,2.1   (DIRECT AHG(POLYSPECIFIC))
          63.01,2.4   (Anti-IgC)
          63.01,2.6   (ANTI-COMPLEMENT)
          63.01,11    (RH Interpretation)
          63.01,6     (Antibody Screen Interpretation)
          63.199,.01  (Specimen Comment)
          63.01,2.91  (DIRECT AHG TEST COMMENT)
          63.012,.01  (ELUATE ANTIBODY)
          63.46,.01   (SERUM ANTIBODY)
          63.46,.02   (ANTIBODY COMMENT)
          63.48,.01   (ANTIBODY SCREEN COMMENT)
  
  
  
  EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*294 does not 
 contain any changes to the VISTA BLOOD BANK Software as defined by VHA 
 DIRECTIVE 99-053 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
  
  EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*294 does not 
 alter or modify any software design safeguards or safety critical 
 elements functions.
  
  RISK ANALYSIS: Changes made by patch LR*5.2*294 have no effect on Blood 
 Bank software functionality, therefore RISK is none.
  
  DBIA: 3879-A
        3879-B
        3879-C 3181-A, 3181-D, and 3181-G
        3181-A
        3181-D
        3181-G
  
  Reference NOIS:   None
  
  Reporting Site:   None
   
  Test Site(s):     
  
   
 ROUTINE SUMMARY
 ===============
   The following routines are included in this patch.  The second line
   of each of these routines now looks like:
   <tab> ;;0.5;VBECS;<patchlist>;APR 26, 2002
  
                     Checksum       Checksum
    Routine Name     Before Patch   After Patch    Patch List
    ------------     ------------   -----------    ------------
    VBECA1            NEW            7650459        294
    VBECA1A           NEW            1999149        294
    VBECA3A           NEW            6174129        294
    VBECA3B           NEW            7215596        294
  
 List of preceding patches: None
 Sites should use CHECK^XTSUMBLD to verify checksums.
  
   Installation Instructions:
   ==========================
  
   NOTE: This KIDS install does not place any options out of service
         during the install and no user options are affected.
         If KIDS prompts:
   
         "Want KIDS to Rebuild Menu Trees Upon Completion of
          Install? YES// NO"
         "Want KIDS to INHIBIT LOGONs during the install? YES// NO"
         "Want to DISABLE Scheduled Options, Menu Options, and
         Protocols? YES// NO"
  
         The site should answer "NO" to all three questions.
             Note: You may not receive all three prompts at your site.  
   
         1. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu.
            This option will load the KIDS package in this message onto
            your system.
         2. Review your mapped set.  If the routines are mapped, they
            should be removed from the mapped set at this time.
         3. The patch has now been loaded into a Transport global on
            your system. You now need to use KIDS to install the
            Transport global.
            On the KIDS menu, under the 'Installation' menu, use the 
            following options:
                Print Transport Global
                Compare Transport Global to Current System
                Verify Checksums in Transport Global
                Backup a Transport Global
         4. Users may remain on the system.
         5. No options need to be placed out of service.
         6. Installation time is less than 2 minutes during off peak
            hours and less the 5 minutes during peak hours.
         7. Installation of this patch requires no additional memory
            space.
         8. From the 'Installation Menu' of the KIDS menu, run the
            option 'Install Package(s)' Select the package 'LR*5.2*294'
            and proceed with the install.
         9. If any routines were unmapped as part of step 2, they should
            be returned to the mapped set once the installation has run
            to completion.

Routine Information:
====================

Routine Name:
  - VBECA1


Routine Checksum:

Routine Name:
  - VBECA1A


Routine Checksum:

Routine Name:
  - VBECA3A


Routine Checksum:

Routine Name:
  - VBECA3B


Routine Checksum:

=============================================================================
User Information:
Entered By  : TOMLIN,BRIAN                  Date Entered  : SEP 11, 2002
Completed By: MORTON,RANDY                  Date Completed: AUG 22, 2003
Released By : SAUNDERS,TOM                  Date Released : AUG 26, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

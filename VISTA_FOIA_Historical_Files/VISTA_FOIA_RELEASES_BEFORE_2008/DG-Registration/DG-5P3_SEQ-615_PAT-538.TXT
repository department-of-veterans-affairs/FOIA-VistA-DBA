
=============================================================================
Run Date: MAY 26, 2006                     Designation: DG*5.3*538
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #615                    Status: Released
                  Compliance Date: JUN 26, 2006
=============================================================================

Associated patches: (v)XU*8*309    <<= must be installed BEFORE `DG*5.3*538'
                    (v)XU*8*325    <<= must be installed BEFORE `DG*5.3*538'
                    (v)DG*5.3*641  <<= must be installed BEFORE `DG*5.3*538'

Subject: GUI PATIENT LOOKUP (FOR JAVA)

Category: 
  - Routine
  - Other

Description:
============

  Person Lookup is a Veterans Health Information Systems and Technology  
  Architecture (VistA) re-engineering project based on the Java
  technologies. Person Lookup is a service that provides a common user
  interface  and methodology for performing lookups. User interfaces are
  provided for web-based and rich-client applications.  The Person Service
  Lookup functionality provided in this patch will be invisible to existing
  M VistA applications.  It is being released to support upcoming
  HealtheVet applications such as Blind Rehab, Veterans Personal Finance
  System (VPFS) and Replacement Scheduling Application (RSA).
  
  This project creates a standard VistA Person lookup service that will  
  be approached using business rules that are similar to those employed 
  for patient lookups in DPTLK.  The project also analyzed the 
  existing Patient Lookup business rules used by existing VistA GUI 
  applications. As a result of this analysis, a service was built that 
  best meets the Veterans Administration's (VA) needs for a standardized  
  person lookup.  This service has been designed, developed and  
  distributed in a format that all Java 2 Enterprise Edition (J2EE) and  
  Java 2 Standard Edition (J2SE) applications can utilize in their  
  respective applications.  
  
  Functionality provided by this lookup includes:
  
   - The ability for a user to search for a patient by Name, Social
   Security Number (SSN) or the last four numbers of SSN and first initial
   of the last name.
  
   - The patient lookup provides the user the ability to filter the search
   by provider, ward, specialty or clinic. 
  
   - Programmatic search for provider lookup. 
  
   - Display of the possible patient selections with various identifiers.
  
   - Programmatic lookup by ICN or DFN.
  
  The encapsulation of the existing software code and user interface 
  ensures that the business rules of person lookup are the same no matter 
  what application is performing the action. This will provide a 
  consistent look and feel for the field users across VistA GUI  
  applications.
  
  NEW OPTION:
  ----------
  
  DGRR GUI PATIENT LOOKUP, GUI Patient Lookup RPC access, is a new Broker  
  (Client/Server) type option added by this patch to provide access for 
  the Java Patient Lookup users.
  
  REMOTE PROCEDURE CALLS:
  ----------------------
  DGRR GET LOOKUP TYPE LIST - This RPC returns an XML document containing 
  a list of wards or clinics.  Input parameters values are:  
  
     PARAM("TYPE")="ward" returns a list of wards
     PARAM("TYPE")="clinic" returns a list of clinics
     PARAM("TYPE")="provider" returns a list of providers
     PARAM("TYPE")="specialty" returns a list of specialties  
  
  Entry point for this RPC is GETLIST^DGRRLU3.  
  
  DGRR PATIENT LOOKUP SEARCH - This RPC returns an XML document containing 
  a list of patients found based on the search type and value input 
  parameters.  Input parameter values are:
  
     PARAM("SEARCH TYPE") = type of search requested
     PARAM("SEARCH VALUE") = value to search on
     PARAM("JOB") = a unique job # used to check for cancelled jobs
  
  Entry point for the RPC is SEARCH^DGRRLU. 
  
  DGRR SET SENSITIVE ACCESS LOG - This RPC adds an entry to the DG 
  SECURITY LOG (#38.1) file and generates the Sensitive Record Access 
  bulletin depending on the value in the ACTION input parameter.  If the  
  ACTION parameter is not defined, the DG Security Log file will be 
  updated and the Sensitive Record Access mail message generated.  Input
  parameter values are:
  
      ACTION:  1 - Set DG Security Log entry
               2 - Generate Sensitive Record Access bulletin
               3 - Both
      DFN:    Patient (#2) file internal entry number
      DGDUZ:  New Person (#200) file internal entry number
      DG1:    Inpatient/Outpatient Indicator (optional)
      DGOPT:  Option Name^Menu Text from Option (#19) file
  
  Entry point for this RPC is NOTICE^DGRRLU2.  
  
  DGRR GET PTLK BUSINESS DATA - This RPC returns an XML document containing
  data needed to perform business logic checks on a patient lookup.  Input 
  parameter values are:
  
       PARAMS("PatientId_Type") = DFN (default) or ICN
       PARAMS("PatientId") (value for DFN or ICN)
       PARAMS("UserId")  (DUZ)
       PARAMS("UserInstitution") = division usage default to DUZ(2)
  
  Entry point for this RPC is BUS^DGRRLU1.  
  
  DGRR SET PTLK PREFERENCES - This RPC updates the division/institution  
  preferences.  Users holding the DGRR PLU ADMINISTRATOR security key may 
  update the preferences for their divisions.  RPC returns an XML document 
  documenting successful update or error condition.  Input parameter 
  values are:
  
       PARAMS("stationNumber")=station number for division/institution
       PARAMS("maxNumberPatients")= Number from 20 to 100.
       PARAMS("patientsPerPage")= Number between 5 and 20.  
       PARAMS("patientType")=Enabled or Disabled
       PARAMS("gender")=Disabled or Enabled
       PARAMS("primaryEligibility")=Enabled or Disabled
       PARAMS("roomBed")=Enabled or Disabled
       PARAMS("serviceConnected")=Enabled or Disabled
       PARAMS("veteranStatus")=Enabled or Disabled
       PARAMS("ward")=Enabled or Disabled
       PARAMS("veteranImage")=Enabled or Disabled
  
  Entry point for this RPC is UPDATE^DGRRLU4.  
  
  DGRR PATIENT LKUP PREFERENCES - This RPC returns an XML document  
  containing the division preferences for the specified location.  If no  
  value is defined for the division, the package file preferences are  
  returned.  Input parameter values are:
  
      PARAM("stationNumber") = station number for institution.  If not 
                    defined, RPC will return the package default values.
  
  Entry point for this RPC is START^DGRRLU4.
  
  DGRR CANCEL SEARCH - This RPC will cancel a patient search in VistA.  
  Input parameter is:
  
      JOB = A unique JOB ID used to cancel a VistA search.
  
  Entry point for this RPC is CANCEL^DGRRLU.
  
  SECURITY KEY:
  ------------
  
  DGRR PLU ADMINISTRATOR is a new security key distributed with this 
  patch.  It locks the DGRR SET PTLK PREFERENCES remote procedure call.  
  Keyholders are allowed to update the division preferences.
  
  PARAMETER DEFINITIONS:
  ---------------------
  
  Ten new Parameter Definition (#8989.51) entries will be distributed to
  support the institution preferences.  Post init routine DG53538P will
  populate each parameter definition with its default package value.  
  
  Parameter Definition Name        Acceptable              Package
                                    Values                 Value
  -------------------------------------------------------------------------
  DGRR PL GENDER                  Enabled/Disabled          Enabled
  DGRR PL MAX NUM PATIENTS RET    20-100                    50
  DGRR PL NUM PATIENTS PER PAGE   5-20                      10    
  DGRR PL PATIENT TYPE            Enabled/Disabled          Enabled
  DGRR PL PRIMARY ELIGIBILITY     Enabled/Disabled          Enabled
  DGRR PL ROOM BED                Enabled/Disabled          Disabled
  DGRR PL SERVICE CONNECTED       Enabled/Disabled          Disabled
  DGRR PL VETERAN STATUS          Enabled/Disabled          Disabled
  DGRR PL WARD                    Enabled/Disabled          Disabled
  DGRR PL VETERAN IMAGE           Enabled/Disabled          Enabled 
  
  Test Sites:
  ==========
  
  Augusta VAMC
  Hines VAMC
  Tucson VAMC
  Puget Sound HCS
  
  ROUTINE SUMMARY: 
  ================
  
  The following is a list of the routine(s) included in this 
  patch.  The second line of each of these routine(s) will look 
  like: 
  
      <tab>;;5.3;Registration;**[patch list]**;Aug 13, 1993 
  
                     CHECK^XTSUMBLD results 
  
  Routine name      Before Patch     After Patch   Patch List 
  ============      ============     ===========   ==========
  DG53538P            N/A              1403875        538
  DGRRLU              N/A             11516068        538
  DGRRLU0             N/A              8643365        538
  DGRRLU1             N/A             19230618        538
  DGRRLU1A            N/A             13313006        538
  DGRRLU2             N/A              3235741        538
  DGRRLU3             N/A             11542017        538
  DGRRLU4             N/A              5552477        538
  DGRRLU5             N/A             10584462        538
  DGRRLU6             N/A             10834164        538
  DGRRLUA             N/A              5773398        538
  DGRRUTL             N/A              1976644        538
  DPTLK1         13893306             14419464    32,50,197,249,317,
                                                  391,244,532,574,620,
                                                      641,680,538
  
  NEW:               CHECK1^XTSUMBLD results 
  
  Routine name      Before Patch     After Patch   Patch List 
  ============      ============     ===========   ==========
  DG53538P            N/A              2534601        538
  DGRRLU              N/A             38010373        538
  DGRRLU0             N/A             36764979        538
  DGRRLU1             N/A             55226700        538
  DGRRLU1A            N/A             29052428        538
  DGRRLU2             N/A             12113753        538
  DGRRLU3             N/A             63039034        538
  DGRRLU4             N/A             18531017        538
  DGRRLU5             N/A             34859755        538
  DGRRLU6             N/A             34442401        538
  DGRRLUA             N/A             14717059        538
  DGRRUTL             N/A              4044912        538
  DPTLK1         38915744             41327686    32,50,197,249,317,
                                                  391,244,532,574,620,
                                                      641,680,538
  
  SOFTWARE RETRIEVAL:
  ================== 
  
  This patch is not being distributed through the National Patch Module.
  The distribution file DG_53_P538.KID may be obtained using FTP from the  
  ANONYMOUS.SOFTWARE directory at DOWNLOAD.VISTA.MED.VA.GOV or from 
  specific servers at:
  
             Albany:  ftp.fo-albany.med.va.gov
              Hines:  ftp.fo-hines.med.va.gov
     Salt Lake City:  ftp.fo-slc.med.va.gov
  
     Host file name: DG_53_P538.KID 
  
  INSTALLATION INSTRUCTIONS:
  ==========================
  This patch can be loaded with users on the system.  Installation
  will take less than 5 minutes.  This patch can be installed with 
  users on the system, however because routine DPTLK1 is modified it 
  should be installed during off hours to minimize disruption to users.
  
  These installation instructions apply to the M portion of the
  application.
                  
                                  **Warning** 
  When an option is included in the patch build, the question REBUILD MENUS
  is asked as a PRE-INSTALL question. If you choose to have KIDs rebuild 
  the menus, it will happen at the end of the build installation and may
  take several hours.
  
  Note: Most sites have a nightly batch job that rebuilds the menus so if
  you queued the installations ensure that it will complete prior to the 
  batch job.  Or, if you are installing several builds, wait until the last
  one to use the KIDs rebuild functionality.
  
                                      ****
  
  1.  Use LOAD A DISTRIBUTION option on the KIDS INSTALLATION Menu, and 
      enter: DG_53_P538.KID.
  
  2.  From the Kernel Installation and Distribution System Menu, select 
      the Installation menu.  
  
  3.  From this menu, you may elect to use the following options
      (when prompted for INSTALL NAME, enter DG*5.3*538): 
  
      a.  Backup a Transport Global - this option will create a backup
          message of any routines exported with the patch.  It will NOT
          backup any other changes such as DDs or templates.
      b.  Compare Transport Global to Current System  - this option will
          allow you to view all changes that will be made when the patch
          is installed.  It compares all components of the patch (routines,
          DDs, templates, etc.).
      c.  Verify Checksums in Transport Global - this option will
          allow you to ensure the integrity of the routines that are in
          the transport global.
      d.  Print Transport Global - this option will allow you to view the
          components of the KIDS build.
  
  4.  Use the Install Package(s) option and select the package 
      DG*5.3*538.
  
  5.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
      YES??//',respond NO.
  
  6.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
      and Protocols? YES//', respond NO.
  
  7.  Assign the DGRR GUI PATIENT LOOKUP option and DGRR PLU 
      ADMINISTRATOR security key as needed to appropriate users.
  
  8.  After the patch has been successfully installed, the post-
      installation routine, DG53538P, may be deleted.

Routine Information:
====================
Routine Name: DG53538P
Routine Name: DGRRLU
Routine Name: DGRRLU0
Routine Name: DGRRLU1
Routine Name: DGRRLU1A
Routine Name: DGRRLU2
Routine Name: DGRRLU3
Routine Name: DGRRLU4
Routine Name: DGRRLU5
Routine Name: DGRRLU6
Routine Name: DGRRLUA
Routine Name: DGRRUTL
Routine Name: DPTLK1

=============================================================================
User Information:
Entered By  : SKINNER,ALAN                  Date Entered  : JUL 10, 2003
Completed By: ZITTEL,ERIC                   Date Completed: MAY 25, 2006
Released By : FITCH,DONNA                   Date Released : MAY 26, 2006
=============================================================================


Packman Mail Message:
=====================

No routines included

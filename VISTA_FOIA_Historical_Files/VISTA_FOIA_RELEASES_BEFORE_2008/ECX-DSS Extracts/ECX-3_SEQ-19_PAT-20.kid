Released ECX*3*20 SEQ #19
Extracted from mail message
**KIDS**:ECX*3.0*20^

**INSTALL NAME**
ECX*3.0*20
"BLD",1703,0)
ECX*3.0*20^DSS EXTRACTS^0^2990203^y
"BLD",1703,4,0)
^9.64PA^^
"BLD",1703,"KRN",0)
^9.67PA^19^18
"BLD",1703,"KRN",.4,0)
.4
"BLD",1703,"KRN",.401,0)
.401
"BLD",1703,"KRN",.402,0)
.402
"BLD",1703,"KRN",.403,0)
.403
"BLD",1703,"KRN",.5,0)
.5
"BLD",1703,"KRN",.84,0)
.84
"BLD",1703,"KRN",3.6,0)
3.6
"BLD",1703,"KRN",3.8,0)
3.8
"BLD",1703,"KRN",9.2,0)
9.2
"BLD",1703,"KRN",9.8,0)
9.8
"BLD",1703,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",1703,"KRN",9.8,"NM",1,0)
ECXPAI^^0^B7136974
"BLD",1703,"KRN",9.8,"NM",2,0)
ECXSCNS^^0^B7060326
"BLD",1703,"KRN",9.8,"NM","B","ECXPAI",1)

"BLD",1703,"KRN",9.8,"NM","B","ECXSCNS",2)

"BLD",1703,"KRN",19,0)
19
"BLD",1703,"KRN",19.1,0)
19.1
"BLD",1703,"KRN",101,0)
101
"BLD",1703,"KRN",409.61,0)
409.61
"BLD",1703,"KRN",771,0)
771
"BLD",1703,"KRN",869.2,0)
869.2
"BLD",1703,"KRN",870,0)
870
"BLD",1703,"KRN",8994,0)
8994
"BLD",1703,"KRN","B",.4,.4)

"BLD",1703,"KRN","B",.401,.401)

"BLD",1703,"KRN","B",.402,.402)

"BLD",1703,"KRN","B",.403,.403)

"BLD",1703,"KRN","B",.5,.5)

"BLD",1703,"KRN","B",.84,.84)

"BLD",1703,"KRN","B",3.6,3.6)

"BLD",1703,"KRN","B",3.8,3.8)

"BLD",1703,"KRN","B",9.2,9.2)

"BLD",1703,"KRN","B",9.8,9.8)

"BLD",1703,"KRN","B",19,19)

"BLD",1703,"KRN","B",19.1,19.1)

"BLD",1703,"KRN","B",101,101)

"BLD",1703,"KRN","B",409.61,409.61)

"BLD",1703,"KRN","B",771,771)

"BLD",1703,"KRN","B",869.2,869.2)

"BLD",1703,"KRN","B",870,870)

"BLD",1703,"KRN","B",8994,8994)

"BLD",1703,"QUES",0)
^9.62^^
"BLD",1703,"REQB",0)
^9.611^2^2
"BLD",1703,"REQB",1,0)
ECX*3.0*8^2
"BLD",1703,"REQB",2,0)
ECX*3.0*13^2
"BLD",1703,"REQB","B","ECX*3.0*13",2)

"BLD",1703,"REQB","B","ECX*3.0*8",1)

"PKG",513,-1)
1^1
"PKG",513,0)
DSS EXTRACTS^ECX^Decision Support System. (DSS)
"PKG",513,20,0)
^9.402P^^
"PKG",513,22,0)
^9.49I^1^1
"PKG",513,22,1,0)
3.0^2971222^2980112^11714
"PKG",513,22,1,"PAH",1,0)
20^2990203
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","ECXPAI")
0^1^B7136974
"RTN","ECXPAI",1,0)
ECXPAI ;ALB/JAP,BIR/DMA,PTD-PAI Extract from File 45.9 ; 10/30/96 14:25
"RTN","ECXPAI",2,0)
 ;;3.0;DSS EXTRACTS;**8,20**;Dec 22, 1997
"RTN","ECXPAI",3,0)
BEG ;entry point from option
"RTN","ECXPAI",4,0)
 D SETUP I ECFILE="" Q
"RTN","ECXPAI",5,0)
 D ^ECXTRAC,^ECXKILL
"RTN","ECXPAI",6,0)
 Q
"RTN","ECXPAI",7,0)
 ;
"RTN","ECXPAI",8,0)
START ; start package specific extract
"RTN","ECXPAI",9,0)
 N DFN,QFLG,SSN,NAM,RACE
"RTN","ECXPAI",10,0)
 S QFLG=0
"RTN","ECXPAI",11,0)
 S ECED=ECED+.3,ECD=ECSD1
"RTN","ECXPAI",12,0)
 F  S ECD=$O(^DG(45.9,"AA",ECD)),ECF=0 Q:'ECD  Q:ECD>ECED  F  S ECF=$O(^DG(45.9,"AA",ECD,ECF)) Q:'ECF  I $D(^DG(45.9,ECF,0)) S EC=^(0),DFN=+EC,ECTD=$P(EC,U,7) I $D(^DPT(DFN,0)) S EC=^(0) D  Q:QFLG
"RTN","ECXPAI",13,0)
 .S ECDA=0 F  S ECDA=+$O(^DGPM("APCA",DFN,ECDA)),ECTD1=ECTD-.0001 Q:'ECDA  I $D(^DGPM(ECDA,0)) F  S ECTD1=+$O(^DGPM("APCA",DFN,ECDA,ECTD1)) Q:'ECTD1  Q:ECTD1>(ECTD+.3)  D  Q:QFLG
"RTN","ECXPAI",14,0)
 ..S EC1=0 F  S EC1=+$O(^DGPM("APCA",DFN,ECDA,ECTD1,EC1)) Q:'EC1  I $D(^DGPM(EC1,0)),$P(^(0),U,2)'=3 S ECADM=$P(^DGPM(ECDA,0),U) D  Q:QFLG
"RTN","ECXPAI",15,0)
 ...S NAM=$E($P($P(EC,U),",")_"    ",1,4),SSN=$P(EC,U,9),RACE=$P($G(^DIC(10,+$P(EC,U,6),0)),U,2)
"RTN","ECXPAI",16,0)
 ...D FILE
"RTN","ECXPAI",17,0)
 Q
"RTN","ECXPAI",18,0)
 ;
"RTN","ECXPAI",19,0)
FILE ;file record
"RTN","ECXPAI",20,0)
 ;node0
"RTN","ECXPAI",21,0)
 ;fac^dfn^ssn^name^i/o^day^admission date^admission time^admission/transfer date^admission/transfer time^race
"RTN","ECXPAI",22,0)
 ;node1
"RTN","ECXPAI",23,0)
 ;mpi^dss dept
"RTN","ECXPAI",24,0)
 N DA,DIK
"RTN","ECXPAI",25,0)
 S EC7=$O(^ECX(ECFILE,999999999),-1)
"RTN","ECXPAI",26,0)
 S ECODEZ="" I EC7>0 S ECODEZ=^ECX(ECFILE,EC7,0)
"RTN","ECXPAI",27,0)
 S ECODE=U_U_DFN_U_SSN_U_NAM_U_"3"_U_$$ECXDATE^ECXUTL(ECD,ECXYM)
"RTN","ECXPAI",28,0)
 S ECODE=ECODE_U_$$ECXDATE^ECXUTL(ECADM,ECXYM)_U_$$ECXTIME^ECXUTL(ECADM)_U_$$ECXDATE^ECXUTL(ECTD1,ECXYM)_U_$$ECXTIME^ECXUTL(ECTD1)_U_RACE
"RTN","ECXPAI",29,0)
 S ECODE1=U
"RTN","ECXPAI",30,0)
 Q:$P(ECODE,U,4,14)=$P(ECODEZ,U,4,14)
"RTN","ECXPAI",31,0)
 I $P(ECODE,U,3,7)=$P(ECODEZ,U,5,9),$P(ECODE,U,10)=$P(ECODEZ,U,12),$P(ECODE,U,8,9)'=$P(ECODEZ,10,11) D  Q
"RTN","ECXPAI",32,0)
 .S $P(^ECX(ECFILE,EC7,0),U,10,11)=$P(ECODE,U,8,9)
"RTN","ECXPAI",33,0)
 S EC7=EC7+1
"RTN","ECXPAI",34,0)
 S ^ECX(ECFILE,EC7,0)=EC7_U_EC23_ECODE,^ECX(ECFILE,EC7,1)=ECODE1,ECRN=ECRN+1
"RTN","ECXPAI",35,0)
 S DA=EC7,DIK="^ECX("_ECFILE_"," D IX^DIK K DIK,DA
"RTN","ECXPAI",36,0)
 I $D(ZTQUEUED),ECRN>499,'(ECRN#500),$$S^%ZTLOAD S QFLG=1
"RTN","ECXPAI",37,0)
 Q
"RTN","ECXPAI",38,0)
SETUP ;Set required input for ECXTRAC
"RTN","ECXPAI",39,0)
 S ECHEAD="PAS"
"RTN","ECXPAI",40,0)
 D ECXDEF^ECXUTL2(ECHEAD,.ECPACK,.ECGRP,.ECFILE,.ECRTN,.ECPIECE,.ECVER)
"RTN","ECXPAI",41,0)
 Q
"RTN","ECXPAI",42,0)
 ;
"RTN","ECXPAI",43,0)
QUE ; entry point for the background requeuing handled by ECXTAUTO
"RTN","ECXPAI",44,0)
 D SETUP,QUE^ECXTAUTO,^ECXKILL Q
"RTN","ECXSCNS")
0^2^B7060326
"RTN","ECXSCNS",1,0)
ECXSCNS ;ALB/JAP,BIR/DMA,PTD-No Show Clinic Extract ; [ 11/22/96  5:48 PM ]
"RTN","ECXSCNS",2,0)
 ;;3.0;DSS EXTRACTS;**11,8,13,20**;Dec 22, 1997
"RTN","ECXSCNS",3,0)
BEG ;entry point from option
"RTN","ECXSCNS",4,0)
 D SETUP I ECFILE="" Q
"RTN","ECXSCNS",5,0)
 D ^ECXTRAC,^ECXKILL
"RTN","ECXSCNS",6,0)
 Q
"RTN","ECXSCNS",7,0)
 ;
"RTN","ECXSCNS",8,0)
START ;start package specific extract
"RTN","ECXSCNS",9,0)
 N QFLG
"RTN","ECXSCNS",10,0)
 S QFLG=0
"RTN","ECXSCNS",11,0)
 S ECED=ECED+.3
"RTN","ECXSCNS",12,0)
 S SC=0
"RTN","ECXSCNS",13,0)
 F  S SC=$O(^SC(SC)) Q:('SC)!(QFLG)  I $D(^(SC,0)) S EC=^(0) I $P(EC,U,3)="C" D  Q:QFLG
"RTN","ECXSCNS",14,0)
 .S SU=$P(EC,U,15)
"RTN","ECXSCNS",15,0)
 .D FEEDER^ECXSCX1(SC,ECSD1,.ECXP1,.ECXP2,.ECXP3,.ECXSEND)
"RTN","ECXSCNS",16,0)
 .Q:ECXSEND=6
"RTN","ECXSCNS",17,0)
 .S ECXDSS=ECXP1_ECXP2,ECD=ECSD1
"RTN","ECXSCNS",18,0)
 .F  S ECD=$O(^SC(SC,"S",ECD)) Q:'ECD  Q:ECD>ECED  D  Q:QFLG
"RTN","ECXSCNS",19,0)
 ..S ECDA=0
"RTN","ECXSCNS",20,0)
 ..F  S ECDA=$O(^SC(SC,"S",ECD,1,ECDA)) Q:'ECDA  I $D(^(ECDA,0)),$S('$D(^("C")):1,1:^("C")="") D
"RTN","ECXSCNS",21,0)
 ...S EC=^SC(SC,"S",ECD,1,ECDA,0),DFN=$P(EC,U)
"RTN","ECXSCNS",22,0)
 ...I $D(^DPT(+DFN,0)) S EC1=^(0) D INP
"RTN","ECXSCNS",23,0)
 ...;log no shows only for outpatients
"RTN","ECXSCNS",24,0)
 ...I ECA=1 D
"RTN","ECXSCNS",25,0)
 ....S DOB=$$ECXDOB^ECXUTL($P(EC1,U,3)),VET=$P($G(^("VET")),U),RACE=$P($G(^DIC(10,+$P(EC1,U,6),0)),U,2),ELG=$P($G(^DIC(8,+$G(^DPT(DFN,.36)),0)),U,9) I ELG S ELG=$C(ELG+64)
"RTN","ECXSCNS",26,0)
 ....I $D(^DPT(DFN,"S",ECD,0)),$P(^(0),U)=SC,$P(^(0),U,2)]"",$P(^(0),U,2)["N" D FILE
"RTN","ECXSCNS",27,0)
 Q
"RTN","ECXSCNS",28,0)
 ;
"RTN","ECXSCNS",29,0)
FILE ;file record
"RTN","ECXSCNS",30,0)
 ;node0
"RTN","ECXSCNS",31,0)
 ;fac^dfn^ssn^name^in/out^day^^mov #^treat spec^dob^elig^vet^time^primary care team^primary care provider^provider^race^dss identifier
"RTN","ECXSCNS",32,0)
 ;node1
"RTN","ECXSCNS",33,0)
 ;mpi^dss dept^pc provider npi^provider npi^pc prov person class
"RTN","ECXSCNS",34,0)
 N DA,DIK
"RTN","ECXSCNS",35,0)
 S EC7=$O(^ECX(ECFILE,999999999),-1),EC7=EC7+1
"RTN","ECXSCNS",36,0)
 S ECODE=EC7_U_EC23
"RTN","ECXSCNS",37,0)
 S ECODE=ECODE_U_SU_U_DFN_U_$P(EC1,U,9)_U_$E($P($P(EC1,U),",")_"    ",1,4)_U_ECA_U_$$ECXDATE^ECXUTL(ECD,ECXYM)
"RTN","ECXSCNS",38,0)
 S ECODE=ECODE_U_U_ECMN_U_ECTS_U_DOB_U_ELG_U_VET_U_$$ECXTIME^ECXUTL(ECD)_U_ECPTTM_U_ECPTPR_U_U_RACE_U_ECXDSS
"RTN","ECXSCNS",39,0)
 S ECODE1=U_U_U_U_ECCLAS
"RTN","ECXSCNS",40,0)
 S ^ECX(ECFILE,EC7,0)=ECODE,^ECX(ECFILE,EC7,1)=ECODE1,ECRN=ECRN+1
"RTN","ECXSCNS",41,0)
 S DA=EC7,DIK="^ECX("_ECFILE_"," D IX^DIK K DIK,DA
"RTN","ECXSCNS",42,0)
 I $D(ZTQUEUED),ECRN>499,'(ECRN#500),$$S^%ZTLOAD S QFLG=1
"RTN","ECXSCNS",43,0)
 Q
"RTN","ECXSCNS",44,0)
 ;
"RTN","ECXSCNS",45,0)
INP ;Determine in/outpatient status, movement number, primary care team and provider.
"RTN","ECXSCNS",46,0)
 N X
"RTN","ECXSCNS",47,0)
 S X=$$INP^ECXUTL2(DFN,ECD),ECA=$P(X,U,1),ECMN=$P(X,U,2),ECTS=$P(X,U,3)
"RTN","ECXSCNS",48,0)
 S X=$$PRIMARY^ECXUTL2(DFN,ECD),ECPTTM=$P(X,U,1),ECPTPR=$P(X,U,2),ECCLAS=$P(X,U,3)
"RTN","ECXSCNS",49,0)
 Q
"RTN","ECXSCNS",50,0)
 ;
"RTN","ECXSCNS",51,0)
SETUP ;Set required input for ECXTRAC
"RTN","ECXSCNS",52,0)
 S ECHEAD="NOS"
"RTN","ECXSCNS",53,0)
 D ECXDEF^ECXUTL2(ECHEAD,.ECPACK,.ECGRP,.ECFILE,.ECRTN,.ECPIECE,.ECVER)
"RTN","ECXSCNS",54,0)
 Q
"RTN","ECXSCNS",55,0)
 ;
"RTN","ECXSCNS",56,0)
QUE ; entry point for the background requeuing handled by ECXTAUTO
"RTN","ECXSCNS",57,0)
 D SETUP,QUE^ECXTAUTO,^ECXKILL Q
"VER")
8.0^21.0
**END**
**END**

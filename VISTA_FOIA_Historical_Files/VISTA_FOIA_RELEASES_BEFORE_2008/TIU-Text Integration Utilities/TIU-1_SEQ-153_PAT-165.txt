
=============================================================================
Run Date: SEP 13, 2003                     Designation: TIU*1*165
Package : TIU - TEXT INTEGRATION UTILITIES    Priority: Mandatory
Version : 1       SEQ #153                      Status: Released
                  Compliance Date: OCT 14, 2003
=============================================================================

Associated patches: (v)TIU*1*137   <<= must be installed BEFORE `TIU*1*165'

Subject: DOCUMENT DEFS for PATIENT RECORD FLAGS

Category: 
  - Routine
  - Other

Description:
============

 I. DESCRIPTION:
    ============
 This patch supports DG*5.3*425, PATIENT RECORD FLAGS, providing TIU 
 Titles to be used when documenting the assignment of a flag to a patient.
 An option which must be run AFTER THE PATCH IS INSTALLED creates new
 Document Definitions, and a new User Class and a new Business Rule to
 govern their behavior.
  
  
 II. TECHNICAL COMPONENTS:
     ====================
  
 File ^TIU(8925.1, TIU DOCUMENT DEFINITION:
 ==========================================
 1. New Document Definitions are created:
  
 Option [TIU165 DDEFS & RULES, PRF], which must be run AFTER THE PATCH IS
 INSTALLED creates 2 new Document Classes, and 5 new Titles.  They are
 created under Class PROGRESS NOTES, with the following hierarchical
 structure:
  
        PROGRESS NOTES                                                CL  
          PATIENT RECORD FLAG CAT I                                   DC
            PATIENT RECORD FLAG CATEGORY I                            TL
          PATIENT RECORD FLAG CAT II                                  DC
            PATIENT RECORD FLAG CATEGORY II - INFECTIOUS DISEASE      TL
            PATIENT RECORD FLAG CATEGORY II - RESEARCH STUDY          TL
            PATIENT RECORD FLAG CATEGORY II - RISK, FALL              TL
            PATIENT RECORD FLAG CATEGORY II - RISK, WANDERING         TL
  
 The two Document Classes and the Category I Title are National Standard,
 and are created with status ACTIVE. Nation-wide use of Category I 
 Patient Record Flags is mandatory, and the use of title PATIENT RECORD 
 FLAG CATEGORY I to document the assignment of a Category I flag to a
 particular patient is also mandatory.
  
 A new business rule created in this patch limits entry of Category I notes
 to members of a new User Class.  (See patch USR*1*24 for more on the new
 User Class and Business Rule.) Thus, notes of title PATIENT RECORD FLAG
 CATEGORY I cannot be entered until that User Class is populated, even
 though the title status is ACTIVE. This is a safeguard, preventing 
 inadvertent or premature entry of such notes. See DOCUMENTATION, in
 section IV, below, stating where to find documentation describing the use
 of the new Category I title.
  
 The four Category II Titles are not National Standard, and are created
 with status TEST. It is left to the sites to decide whether or not to 
 create and use Category II Patient Record Flags. These Category II titles
 are provided for documenting the assignment of Category II flags, should
 sites elect to create such flags. Status TEST prevents users (except for
 Clinical Coordinator owners) from writing notes using the new titles until
 the site changes the status to ACTIVE. This is a safeguard, preventing 
 inadvertent or premature entry of such notes. Status TEST (as opposed to
 status INACTIVE) permits sites to write business rules for Category II
 Titles before activating them. See DOCUMENTATION, in section IV, below,
 stating where to find documentation describing the use of the new Category
 II titles.
  
 USR FILES:                                
 ==========
 Option [TIU165 DDEFS & RULES, PRF] which creates the 7 new Document
 Definitions, also creates a new User Class, DGPF PATIENT RECORD FLAGS MGR,
 and a new Business Rule. See patch USR*1*24 for detailed descriptions of
 USR components.
  
 OPTIONS:
 ========
 This patch exports a new option, Create DDEFS, Rules for Patient Record
 Flags [TIU165 DDEFS & RULES, PRF]. It is this option, not the patch
 itself, which creates the new TIU and USR entities needed for documenting
 in the Patient Record the assignment of Patient Record Flags.
  
 For more information on this option, see VI, POST-INSTALLATION 
 INSTRUCTIONS, below.
  
  ROUTINE SUMMARY:                                                  
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
  <tab>;;1.0;Text Integration Utilities;**[patch list]**;Jun 20, 1997
  
                             CHECK^XTSUMBLD results
  Routine name         Before Patch          After Patch         Patch List
  ============         ============          ===========         ==========
  TIU165D                       N/A              2131364            165
  TIUEN165                      N/A              4942547            165
  TIUPS165                      N/A             10964000            165
  
  
 See patch USR*1*24 for information on USR routines.
  
  
 III.  INTERFACES AND DEPENDENCIES:
       ============================
 Patch TIU*1*165 requires TIU*1*137; it needs DD changes made in that 
 patch for its Database Server calls.
  
  
 IV. SOFTWARE AND DOCUMENTATION RETRIEVAL:
     =====================================
  
 SOFTWARE:
 =========
 This patch is distributed in a host file.  The host file contains two KIDS
 builds.  The first build is for patch TIU*1*165.  The second build is for
 Authorization/Subscription patch USR*1*24.
  
 The master build containing these two patches can be downloaded as
 described below under section DOCUMENTATION, using ASCII format, and using
 file name:
     TIU_10_165.KID
  
 DOCUMENTATION:                              
 ==============
 A new appendix, Appendix E: Patient Record Flags, has been added to the 
 TIU Implementation Guide, describing TIU/USR aspects of the Patient Record
 Flag project.  The list of nationally exported Business Rules has been
 updated in the Implementation Guide.  The TIU User Manual has also been
 updated to include the new National Patient Record Flag titles.
  
 The updated TIU manual and guide are available in the form of (.PDF)
 files, as follows:
  
    TIUUM.PDF       TIU User Manual
    TIUIM.PDF       TIU/ASU Implementation Guide
  
 These files can be retrieved in BINARY format by FTP. The preferred method
 is to FTP the files from
  
     download.vista.med.va.gov    
  
 which will transmit the files from the first available FTP server.
  
 The files may also be downloaded directly from a particular FTP location
 at the following locations.
  
         Albany                  ftp.fo-albany.med.va.gov
         Hines                   ftp.fo-hines.med.va.gov
         Salt Lake City          ftp.fo-slc.med.va.gov
  
  Files are available in the ANONYMOUS.SOFTWARE directory.
  
 TIU documentation for this patch can also be found using the following
 Web address:
  
    http://vista.med.va.gov/tiu/html/documentation.html
  
 NOTE:
 Extensive general information not specific to TIU/USR on Patient Record
 Flags is available on the new Patient Record Flags Training Web Site at
 the following address:
     
 http://vaww.vistau.med.va.gov/VistaU/prf/
  
 The new VHA Directive 2003-048, dated August 28, 2003, titled: National
 Patient Record Flags, is available there.
  
 General information is also available in the VistA Document Library.
  
  
 V. INSTALLATION INSTRUCTIONS:
    ==========================
 This patch can be loaded with users on the system. Installation should
 require less than two minutes to complete.
   
  1. Use the LOAD A DISTRIBUTION OPTION on the KIDS INSTALLATION Menu, and 
     enter TIU_10_165.KID.
  
     Although it is unlikely that sites would already have Document
     Definitions or User Classes with the same names as those installed by
     this patch, this patch has Environment Check routines to prevent
     possible overwriting of such entries. We recommend running them when
     loading the distribution.
  
     If the site already has Document Definitions with names matching the
     seven exported in this patch, the first Environment Check routine will
     display the matches, with the following dialogue:
  
                      ------------------
 Build TIU*1.0*165 has an Environmental Check Routine
 Want to RUN the Environment Check Routine? YES// 
    TIU*1.0*165
 Will first run the Environment Check Routine, TIUEN165
  
 You already have the following Document Definitions exported by this 
 patch. I don't want to overwrite them. Please change their names so they
 no longer match the exported ones, or if you are not using them, delete
 them.
  
 If you change the name of a Document Definition, remember to update its 
 Print Name, as well. For help, contact National VistA Support.
      PATIENT RECORD FLAG CAT I
      PATIENT RECORD FLAG CAT II
      PATIENT RECORD FLAG CATEGORY I
      PATIENT RECORD FLAG CATEGORY II - RISK, FALL
      PATIENT RECORD FLAG CATEGORY II - RISK, WANDERING
      PATIENT RECORD FLAG CATEGORY II - RESEARCH STUDY
      PATIENT RECORD FLAG CATEGORY II - INFECTIOUS DISEASE
 Aborting Install...
                      ------------------
  
  
     If the site already has a User Class named DGPF PATIENT RECORD FLAGS 
     MGR (but has no matching Document Definitions) the second
     Environment Check routine will display the following dialogue:
  
                      ------------------
    USR*1.0*24
 Will first run the Environment Check Routine, USREN24
  
 You already have the User Class exported by this patch. I don't want
 to overwrite it. Please change its name so it no longer matches the
 exported one, or if you are not using it, delete it.  For help, contact
 National VistA Support.
 Aborting Install...
                      ------------------
  
     If the environment checks find matches, please follow instructions in
     the above dialogues.  The patch will not install until matches are
     changed or deleted.
  
     If there are no matches, or if matching entries were created by a 
     previous install of this patch and can be ignored, the above dialogues
     read:
  
                      ------------------
 Build TIU*1.0*165 has an Environmental Check Routine
 Want to RUN the Environment Check Routine? YES// 
    TIU*1.0*165
 Will first run the Environment Check Routine, TIUEN165
  
 Document Definitions look OK.
    USR*1.0*24
 Will first run the Environment Check Routine, USREN24
  
 User Classes look OK.
 Use INSTALL NAME: TIU*1.0*165 to install this Distribution.
                      ------------------
  
  2. On the KIDS menu under the 'INSTALLATION' menu, use the following
     options as desired:
        Print Transport Global
        Compare Transport Global to Current System
        Verify Checksums in Transport Global
        Backup a Transport Global
                      
  3. On the KIDS menu under the 'INSTALLATION' menu, use the following
     option to install the patch:
        Install Package(s) (TIU*1.0*165)
  
  4. When prompted "Want KIDS to Rebuild Menu Trees Upon Completion of 
     Install? YES//", respond 'NO'.
  
  5. When prompted "Want KIDS to INHIBIT LOGONs during the install? YES//",
     respond 'NO'.
  
  6. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and 
     Protocols? YES//', respond 'YES', and DISABLE the TIU* Options and
     Protocols.
  
  7. When prompted 'Delay Install (Minutes):  (0-60): 0//; respond '0'.
  
  8. After installing the patch, sites MUST RUN OPTION [TIU165 DDEFS & 
     RULES, PRF].  See VI, POST-INSTALLATION INSTRUCTIONS.
  
  9. We do not anticipate any need to reinstall this patch. If, however, it
     must be reinstalled, the environment check routine will recognize your
     Document Definitions as having been created by this patch, and will
     ignore them rather than creating new ones.
  
 10. This ability to recognize Document Definitions as having been created
     by this patch is made possible by setting globals ^XTMP("TIU165") and
     ^XTMP("USR24").  The globals are small. Option Clean old Job Nodes in
     XUTL [XQ XUTL $J NODES] will automatically delete these global nodes
     on or about March 1, 2004.
  
 11. After the package has been installed and option [TIU165 DDEFS & 
     RULES, PRF] has successfully created all 7 Document Definitions, the
     User Class, and the Business Rule, sites should delete the option, as 
     well as environment-check routines TIUEN165 and USREN24, and
     routines TIUPS165 and USRPS24 (which create the Document Definitions,
     User Class, and Business Rule).  Please verify checksums before 
     deleting routines.
  
  
 VI. POST-INSTALLATION INSTRUCTIONS:
     ===============================
 Option [TIU165 DDEFS & RULES, PRF] is exported with the patch.  It
 must be run after the patch is installed. It is this option, not the patch
 itself, which actually creates the new Document Definitions, User Class,
 and Business Rule needed for Patient Record Flags.
  
 The option should take less than one minute to run and will not disrupt 
 users, so it can be run at any time of day.
  
 When the option has run successfully to the end and messages have
 indicated that all 7 Document Definitions, the User Class, and the
 Business Rule have been created successfully, with no problems
 encountered, this option should be deleted, along with routines TIUEN165,
 TIUPS165, USREN24, and USRPS24, after verifying the checksums.
  
 This option may be re-run if desired.  However, the option will not
 attempt to recreate entries that were already created successfully the
 first time the option was run.  Also, the option will not attempt to
 recreate the Business Rule once the User Class is created successfully.
  
 The option must be run from programmer mode.
  
 Before running the option, please verify that your account has user class 
 CLINICAL COORDINATOR.  This user class was exported with the original 
 release of TIU, and TIU expects to find it there.  The option assigns 
 ownership of the new Document Definitions to this user class.  If the 
 option fails to find class CLINICAL COORDINATOR, the Document Definitions 
 will be created without important attributes including Type, Status, and 
 Owner.  Error messages will inform the person running the option that 
 data was not filed successfully for the entries, and ask them to contact
 NVS.  In order to avoid this situation, please check that user class
 CLINICAL COORDINATOR exists, prior to running the option.
  
 There are several different dialogues that may be displayed when 
 the option is run, depending on the scenario.
  
 Scenario I:
 If the option is successful in creating Document Definitions, User Class,
 and Business Rule, it displays the following dialogue:
  
                        ------------------
 >D ^XUP
  
 Setting up programmer environment
 Terminal Type set to: C-VT320
  
 Select OPTION NAME: TIU165 DDEFS & RULES, PRF       Create DDEFS, Rules 
 for Patient Record Flags
 Create DDEFS, Rules for Patient Record Flags
  
 This option creates Document Definitions, a User Class, and
 a Business Rule for Patient Record Flags.
  
 DEVICE: HOME//   ANYWHERE
  
  
  
          ***** Document Definitions for PATIENT RECORD FLAGS *****
  
 DOCUMENT CLASS named PATIENT RECORD FLAG CAT I
     created successfully.
   Data for entry filed successfully.
   Entry added to parent.
 DOCUMENT CLASS named PATIENT RECORD FLAG CAT II
     created successfully.
   Data for entry filed successfully.
   Entry added to parent.
 TITLE named PATIENT RECORD FLAG CATEGORY I
     created successfully.
   Data for entry filed successfully.
   Entry added to parent.
 TITLE named PATIENT RECORD FLAG CATEGORY II - RISK, FALL
     created successfully.
   Data for entry filed successfully.
   Entry added to parent.
 TITLE named PATIENT RECORD FLAG CATEGORY II - RISK, WANDERING
     created successfully.
   Data for entry filed successfully.
   Entry added to parent.
 TITLE named PATIENT RECORD FLAG CATEGORY II - RESEARCH STUDY
     created successfully.
   Data for entry filed successfully.
   Entry added to parent.
 TITLE named PATIENT RECORD FLAG CATEGORY II - INFECTIOUS DISEASE
     created successfully.
   Data for entry filed successfully.
   Entry added to parent.
  
                            *************
  
         ***** User Class and Rules for PATIENT RECORD FLAGS *****
  
 User Class named DGPF PATIENT RECORD FLAGS MGR
     created successfully.
  
 Business Rule created successfully.
  
                              *********
                       ------------------
  
 Scenario II: 
 If the option is run again, after Document Definitions and User Class 
 have already been created, the dialogue looks like this:
  
                        ------------------   
          ***** Document Definitions for PATIENT RECORD FLAGS *****
  
 DOCUMENT CLASS PATIENT RECORD FLAG CAT I
     was already created in a previous install.
 DOCUMENT CLASS PATIENT RECORD FLAG CAT II
     was already created in a previous install.
 TITLE PATIENT RECORD FLAG CATEGORY I
     was already created in a previous install.
 TITLE PATIENT RECORD FLAG CATEGORY II - RISK, FALL
     was already created in a previous install.
 TITLE PATIENT RECORD FLAG CATEGORY II - RISK, WANDERING
     was already created in a previous install.
 TITLE PATIENT RECORD FLAG CATEGORY II - RESEARCH STUDY
     was already created in a previous install.
 TITLE PATIENT RECORD FLAG CATEGORY II - INFECTIOUS DISEASE
     was already created in a previous install.
  
                            *************
  
  
         ***** User Class and Rules for PATIENT RECORD FLAGS *****
  
 User Class and, presumably, Business Rules
     were already created in a previous install.
  
                              *********
                       ------------------
  
 Scenario 3: 
 If Document Definitions or User Classes matching those exported by this 
 patch have been inadvertently created BETWEEN the time the patch is 
 installed (where the environment has been found OK), and the time the
 option is first run, the dialogue is an abbreviated form of the install
 dialogue when the environment checks find duplicates. (See number 1 of
 section V, INSTALLATION INSTRUCTIONS.)
  
 These matches must be eliminated by changing names or deleting entries. 
 See number 1 of section V, INSTALLATION INSTRUCTIONS.  The option should
 then be run again.
  
 If duplicate Document Definitions are encountered when running the option,
 the dialogue will look like this, and the option will quit rather than
 proceeding to check User Classes:
  
                        ------------------  
          ***** Document Definitions for PATIENT RECORD FLAGS *****
  
 Duplicate problem.  See description for patch TIU*1*165,
 in the National Patch Module.
  
                            *************
                        ------------------  
  
 If a duplicate User Class (but no duplicate Document Definitions) is
 encountered when running the option, the option will proceed to create 
 the Document Definitions and then present this dialogue:
  
                        ------------------   
         ***** User Class and Rules for PATIENT RECORD FLAGS *****
  
 Duplicate problem.  See description for patch TIU*1*165,
 in the National Patch Module.
  
                              *********
                        ------------------  

Routine Information:
====================

Routine Name:
  - TIUEN165


Routine Checksum:

Routine Name:
  - TIUPS165


Routine Checksum:

Routine Name:
  - TIU165D


Routine Checksum:

=============================================================================
User Information:
Entered By  : MCCLENAHAN,MARGARET           Date Entered  : APR 23, 2003
Completed By: HOANG,CATHERINE               Date Completed: SEP 10, 2003
Released By : GIVENS,DALE S                 Date Released : SEP 13, 2003
=============================================================================


Packman Mail Message:
=====================

No routines included

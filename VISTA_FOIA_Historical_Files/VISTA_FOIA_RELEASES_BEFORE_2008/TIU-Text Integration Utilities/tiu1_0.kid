KIDS Distribution saved on Jun 20, 1997@12:35:55
TEXT INTEGRATION UTILITIES (TIU) v1.0 (6/20/97)
**KIDS**:TEXT INTEGRATION UTILITIES 1.0^

**INSTALL NAME**
TEXT INTEGRATION UTILITIES 1.0
"BLD",586,0)
TEXT INTEGRATION UTILITIES 1.0^TEXT INTEGRATION UTILITIES^0^2970620^y
"BLD",586,1,0)
^^28^28^2970620^
"BLD",586,1,1,0)
TEXT INTEGRATION UTILITIES v1.0
"BLD",586,1,2,0)
 
"BLD",586,1,3,0)
Text Integration Utilities (TIU) is a collection of software tools that
"BLD",586,1,4,0)
manage clinical documents in a standardized way. The initial release of
"BLD",586,1,5,0)
Version 1.0 includes Discharge Summary and Progress Notes. TIU replaces
"BLD",586,1,6,0)
the previous versions of these DHCP packages, while incorporating all of
"BLD",586,1,7,0)
the functionality of them.
"BLD",586,1,8,0)
 
"BLD",586,1,9,0)
Benefits of TIU
"BLD",586,1,10,0)
 
"BLD",586,1,11,0)
+ Ability to view and manipulate clinical documents from a single program
"BLD",586,1,12,0)
+ Upload capability for many types of documents
"BLD",586,1,13,0)
+ Improved searching and retrieving capabilities across documents
"BLD",586,1,14,0)
+ Less duplication of effort for clinicians, managers, and other staff
"BLD",586,1,15,0)
+ Boilerplate support
"BLD",586,1,16,0)
+ Links to the Computerized Patient Record System (CPRS), Authorization/
"BLD",586,1,17,0)
  Subscription Utility (ASU), Incomplete Record Tracking (IRT), and
"BLD",586,1,18,0)
  interfacility document transfer
"BLD",586,1,19,0)
 
"BLD",586,1,20,0)
Costs
"BLD",586,1,21,0)
 
"BLD",586,1,22,0)
+ Planning your Document and User Class hierarchies.
"BLD",586,1,23,0)
+ Setting up the Document hierarchy so that your current Progress Notes
"BLD",586,1,24,0)
  can be converted into the new TIU structure
"BLD",586,1,25,0)
+ Setting up and populating the User Classes (ASU)
"BLD",586,1,26,0)
+ Setting up the Upload Utilities and other TIU parameters
"BLD",586,1,27,0)
+ Converting existing progress notes and discharge summaries to TIU
"BLD",586,1,28,0)
+ Switching Progress Notes and Discharge Summary menus to TIU menus
"BLD",586,4,0)
^9.64PA^8925^18
"BLD",586,4,8925,0)
8925
"BLD",586,4,8925,222)
y^y^f^^^^n
"BLD",586,4,8925.1,0)
8925.1
"BLD",586,4,8925.1,222)
y^y^f^^n^TIU EXPORTED DOCUMENT DEFS^y^a^n
"BLD",586,4,8925.2,0)
8925.2
"BLD",586,4,8925.2,222)
y^y^f^^^^n
"BLD",586,4,8925.3,0)
8925.3
"BLD",586,4,8925.3,222)
y^y^f^^n^^y^o^n
"BLD",586,4,8925.4,0)
8925.4
"BLD",586,4,8925.4,222)
y^y^f^^^^n
"BLD",586,4,8925.5,0)
8925.5
"BLD",586,4,8925.5,222)
y^y^f^^^^n
"BLD",586,4,8925.6,0)
8925.6
"BLD",586,4,8925.6,222)
y^y^f^^n^^y^o^n
"BLD",586,4,8925.7,0)
8925.7
"BLD",586,4,8925.7,222)
y^y^f^^^^n
"BLD",586,4,8925.8,0)
8925.8
"BLD",586,4,8925.8,222)
y^y^f^^n^^y^o^n
"BLD",586,4,8925.9,0)
8925.9
"BLD",586,4,8925.9,222)
y^y^f^^^^n
"BLD",586,4,8925.91,0)
8925.91
"BLD",586,4,8925.91,222)
y^y^f^^^^n
"BLD",586,4,8925.93,0)
8925.93
"BLD",586,4,8925.93,222)
y^y^f^^^^n
"BLD",586,4,8925.94,0)
8925.94
"BLD",586,4,8925.94,222)
y^y^f^^^^n
"BLD",586,4,8925.95,0)
8925.95
"BLD",586,4,8925.95,222)
y^y^f^^n^^y^a^n
"BLD",586,4,8925.97,0)
8925.97
"BLD",586,4,8925.97,222)
y^y^f^^n^^y^a^n
"BLD",586,4,8925.98,0)
8925.98
"BLD",586,4,8925.98,222)
y^y^f^^^^n
"BLD",586,4,8925.99,0)
8925.99
"BLD",586,4,8925.99,222)
y^y^f^^^^n
"BLD",586,4,8926,0)
8926
"BLD",586,4,8926,222)
y^y^f^^^^n
"BLD",586,4,"B",8925,8925)

"BLD",586,4,"B",8925.1,8925.1)

"BLD",586,4,"B",8925.2,8925.2)

"BLD",586,4,"B",8925.3,8925.3)

"BLD",586,4,"B",8925.4,8925.4)

"BLD",586,4,"B",8925.5,8925.5)

"BLD",586,4,"B",8925.6,8925.6)

"BLD",586,4,"B",8925.7,8925.7)

"BLD",586,4,"B",8925.8,8925.8)

"BLD",586,4,"B",8925.9,8925.9)

"BLD",586,4,"B",8925.91,8925.91)

"BLD",586,4,"B",8925.93,8925.93)

"BLD",586,4,"B",8925.94,8925.94)

"BLD",586,4,"B",8925.95,8925.95)

"BLD",586,4,"B",8925.97,8925.97)

"BLD",586,4,"B",8925.98,8925.98)

"BLD",586,4,"B",8925.99,8925.99)

"BLD",586,4,"B",8926,8926)

"BLD",586,"ABNS",0)
^9.66A^1^1
"BLD",586,"ABNS",1,0)
TIU
"BLD",586,"ABNS",1,1,0)
^9.661A^^
"BLD",586,"ABNS","B","TIU",1)

"BLD",586,"ABPKG")
n^y^G.TIU@ISC-SLC.VA.GOV
"BLD",586,"INIT")
TIUPOST
"BLD",586,"KRN",0)
^9.67PA^870^18
"BLD",586,"KRN",.4,0)
.4
"BLD",586,"KRN",.4,"NM",0)
^9.68A^5^5
"BLD",586,"KRN",.4,"NM",1,0)
TIU PRINT AUTHOR STATS    FILE #8925^8925^0
"BLD",586,"KRN",.4,"NM",2,0)
TIU PRINT REPORT BUFFER    FILE #8925.2^8925.2^0
"BLD",586,"KRN",.4,"NM",3,0)
TIU PRINT SERVICE STATS    FILE #8925^8925^0
"BLD",586,"KRN",.4,"NM",4,0)
TIU PRINT TRANS STATS    FILE #8925^8925^0
"BLD",586,"KRN",.4,"NM",5,0)
TIU RELEASED/UNVERIFIED PRINT    FILE #8925^8925^0
"BLD",586,"KRN",.4,"NM","B","TIU PRINT AUTHOR STATS    FILE #8925",1)

"BLD",586,"KRN",.4,"NM","B","TIU PRINT REPORT BUFFER    FILE #8925.2",2)

"BLD",586,"KRN",.4,"NM","B","TIU PRINT SERVICE STATS    FILE #8925",3)

"BLD",586,"KRN",.4,"NM","B","TIU PRINT TRANS STATS    FILE #8925",4)

"BLD",586,"KRN",.4,"NM","B","TIU RELEASED/UNVERIFIED PRINT    FILE #8925",5)

"BLD",586,"KRN",.401,0)
.401
"BLD",586,"KRN",.401,"NM",0)
^9.68A^^0
"BLD",586,"KRN",.402,0)
.402
"BLD",586,"KRN",.402,"NM",0)
^9.68A^13^12
"BLD",586,"KRN",.402,"NM",1,0)
TIU BASIC PARAMETER EDIT    FILE #8925.99^8925.99^0
"BLD",586,"KRN",.402,"NM",2,0)
TIU DOCUMENT PARAMETER EDIT    FILE #8925.95^8925.95^0
"BLD",586,"KRN",.402,"NM",3,0)
TIU EDIT DOCUMENT TYPE    FILE #8925.1^8925.1^0
"BLD",586,"KRN",.402,"NM",4,0)
TIU ENTER/EDIT CONSULT RESULT    FILE #8925^8925^0
"BLD",586,"KRN",.402,"NM",5,0)
TIU ENTER/EDIT DS    FILE #8925^8925^0
"BLD",586,"KRN",.402,"NM",7,0)
TIU ENTER/EDIT PERSONAL LIST    FILE #8925.98^8925.98^0
"BLD",586,"KRN",.402,"NM",8,0)
TIU ENTER/EDIT PROGRESS NOTE    FILE #8925^8925^0
"BLD",586,"KRN",.402,"NM",9,0)
TIU ENTER/EDIT SEARCH CATEGORY    FILE #8925.8^8925.8^0
"BLD",586,"KRN",.402,"NM",10,0)
TIU UPLOAD FIELD EDIT    FILE #8925.1^8925.1^0
"BLD",586,"KRN",.402,"NM",11,0)
TIU UPLOAD PARAMETER EDIT    FILE #8925.99^8925.99^0
"BLD",586,"KRN",.402,"NM",12,0)
TIUF UPLOAD FIELD EDIT    FILE #8925.1^8925.1^0
"BLD",586,"KRN",.402,"NM",13,0)
TIUZ ENTER/EDIT PN    FILE #8925^8925^0
"BLD",586,"KRN",.402,"NM","B","TIU BASIC PARAMETER EDIT    FILE #8925.99",1)

"BLD",586,"KRN",.402,"NM","B","TIU DOCUMENT PARAMETER EDIT    FILE #8925.95",2)

"BLD",586,"KRN",.402,"NM","B","TIU EDIT DOCUMENT TYPE    FILE #8925.1",3)

"BLD",586,"KRN",.402,"NM","B","TIU ENTER/EDIT CONSULT RESULT    FILE #8925",4)

"BLD",586,"KRN",.402,"NM","B","TIU ENTER/EDIT DS    FILE #8925",5)

"BLD",586,"KRN",.402,"NM","B","TIU ENTER/EDIT PERSONAL LIST    FILE #8925.98",7)

"BLD",586,"KRN",.402,"NM","B","TIU ENTER/EDIT PROGRESS NOTE    FILE #8925",8)

"BLD",586,"KRN",.402,"NM","B","TIU ENTER/EDIT SEARCH CATEGORY    FILE #8925.8",9)

"BLD",586,"KRN",.402,"NM","B","TIU UPLOAD FIELD EDIT    FILE #8925.1",10)

"BLD",586,"KRN",.402,"NM","B","TIU UPLOAD PARAMETER EDIT    FILE #8925.99",11)

"BLD",586,"KRN",.402,"NM","B","TIUF UPLOAD FIELD EDIT    FILE #8925.1",12)

"BLD",586,"KRN",.402,"NM","B","TIUZ ENTER/EDIT PN    FILE #8925",13)

"BLD",586,"KRN",.403,0)
.403
"BLD",586,"KRN",.5,0)
.5
"BLD",586,"KRN",.5,"NM",0)
^9.68A^3^3
"BLD",586,"KRN",.5,"NM",1,0)
TIU NAME FORMAT^^0
"BLD",586,"KRN",.5,"NM",2,0)
TIU UNKNOWN DATA^^0
"BLD",586,"KRN",.5,"NM",3,0)
TIU VISIT ID^^0
"BLD",586,"KRN",.5,"NM","B","TIU NAME FORMAT",1)

"BLD",586,"KRN",.5,"NM","B","TIU UNKNOWN DATA",2)

"BLD",586,"KRN",.5,"NM","B","TIU VISIT ID",3)

"BLD",586,"KRN",.84,0)
.84
"BLD",586,"KRN",.84,"NM",0)
^9.68A^5^5
"BLD",586,"KRN",.84,"NM",1,0)
89250001^^0
"BLD",586,"KRN",.84,"NM",2,0)
89250002^^0
"BLD",586,"KRN",.84,"NM",3,0)
89250003^^0
"BLD",586,"KRN",.84,"NM",4,0)
89250004^^0
"BLD",586,"KRN",.84,"NM",5,0)
89250005^^0
"BLD",586,"KRN",.84,"NM","B",89250001,1)

"BLD",586,"KRN",.84,"NM","B",89250002,2)

"BLD",586,"KRN",.84,"NM","B",89250003,3)

"BLD",586,"KRN",.84,"NM","B",89250004,4)

"BLD",586,"KRN",.84,"NM","B",89250005,5)

"BLD",586,"KRN",3.6,0)
3.6
"BLD",586,"KRN",3.6,"NM",0)
^9.68A^4^4
"BLD",586,"KRN",3.6,"NM",1,0)
TIU PRN CONVERSION CLEAN^^0
"BLD",586,"KRN",3.6,"NM",2,0)
TIU PRN CONVERSION ERRORS^^0
"BLD",586,"KRN",3.6,"NM",3,0)
TIU DS CONVERSION CLEAN^^0
"BLD",586,"KRN",3.6,"NM",4,0)
TIU DS CONVERSION ERRORS^^0
"BLD",586,"KRN",3.6,"NM","B","TIU DS CONVERSION CLEAN",3)

"BLD",586,"KRN",3.6,"NM","B","TIU DS CONVERSION ERRORS",4)

"BLD",586,"KRN",3.6,"NM","B","TIU PRN CONVERSION CLEAN",1)

"BLD",586,"KRN",3.6,"NM","B","TIU PRN CONVERSION ERRORS",2)

"BLD",586,"KRN",3.8,0)
3.8
"BLD",586,"KRN",9.2,0)
9.2
"BLD",586,"KRN",9.8,0)
9.8
"BLD",586,"KRN",9.8,"NM",0)
^9.68A^230^211
"BLD",586,"KRN",9.8,"NM",1,0)
TIUADD^^0^B28738072
"BLD",586,"KRN",9.8,"NM",2,0)
TIUALRT^^0^B24621402
"BLD",586,"KRN",9.8,"NM",3,0)
TIUAPIOK^^0^B13295307
"BLD",586,"KRN",9.8,"NM",4,0)
TIUAUDIT^^0^B2826641
"BLD",586,"KRN",9.8,"NM",5,0)
TIUBPEDT^^0^B636886
"BLD",586,"KRN",9.8,"NM",6,0)
TIUBR^^0^B70884521
"BLD",586,"KRN",9.8,"NM",7,0)
TIUBRWS^^0^B2002061
"BLD",586,"KRN",9.8,"NM",8,0)
TIUCHLP^^0^B11383740
"BLD",586,"KRN",9.8,"NM",9,0)
TIUCNSLT^^0^B5552620
"BLD",586,"KRN",9.8,"NM",11,0)
TIUDD^^0^B13164803
"BLD",586,"KRN",9.8,"NM",12,0)
TIUDD8^^0^B4030714
"BLD",586,"KRN",9.8,"NM",13,0)
TIUDD98^^0^B6186915
"BLD",586,"KRN",9.8,"NM",14,0)
TIUDEV^^0^B980528
"BLD",586,"KRN",9.8,"NM",16,0)
TIUDIRH^^0^B12733935
"BLD",586,"KRN",9.8,"NM",17,0)
TIUDIRT^^0^B10082846
"BLD",586,"KRN",9.8,"NM",18,0)
TIUDPEDT^^0^B647539
"BLD",586,"KRN",9.8,"NM",19,0)
TIUDSCNV^^0^B72413586
"BLD",586,"KRN",9.8,"NM",20,0)
TIUEDI1^^0^B44026410
"BLD",586,"KRN",9.8,"NM",21,0)
TIUEDI2^^0^B7056766
"BLD",586,"KRN",9.8,"NM",22,0)
TIUEDIM^^0^B9777818
"BLD",586,"KRN",9.8,"NM",23,0)
TIUEDIT^^0^B76856252
"BLD",586,"KRN",9.8,"NM",24,0)
TIUEDITR^^0^B9211968
"BLD",586,"KRN",9.8,"NM",25,0)
TIUELST^^0^B17741798
"BLD",586,"KRN",9.8,"NM",26,0)
TIUENV^^0^B4563050
"BLD",586,"KRN",9.8,"NM",27,0)
TIUEPRNT^^0^B4361139
"BLD",586,"KRN",9.8,"NM",28,0)
TIUFA^^0^B18106709
"BLD",586,"KRN",9.8,"NM",29,0)
TIUFA1^^0^B12919954
"BLD",586,"KRN",9.8,"NM",30,0)
TIUFC^^0^B34524861
"BLD",586,"KRN",9.8,"NM",31,0)
TIUFD^^0^B41043754
"BLD",586,"KRN",9.8,"NM",32,0)
TIUFD1^^0^B15048670
"BLD",586,"KRN",9.8,"NM",33,0)
TIUFD2^^0^B16631595
"BLD",586,"KRN",9.8,"NM",34,0)
TIUFD3^^0^B30011238
"BLD",586,"KRN",9.8,"NM",35)
^^^
"BLD",586,"KRN",9.8,"NM",35,0)
TIUFD4^^0^B18895783
"BLD",586,"KRN",9.8,"NM",36,0)
TIUFH^^0^B7300013
"BLD",586,"KRN",9.8,"NM",37,0)
TIUFH1^^0^B13907706
"BLD",586,"KRN",9.8,"NM",38,0)
TIUFHA^^0^B19018049
"BLD",586,"KRN",9.8,"NM",39,0)
TIUFHA1^^0^B34214053
"BLD",586,"KRN",9.8,"NM",40,0)
TIUFHA2^^0^B39396929
"BLD",586,"KRN",9.8,"NM",41,0)
TIUFHA3^^0^B33750385
"BLD",586,"KRN",9.8,"NM",42,0)
TIUFHA4^^0^B19360898
"BLD",586,"KRN",9.8,"NM",44,0)
TIUFL^^0^B33840632
"BLD",586,"KRN",9.8,"NM",45,0)
TIUFL1^^0^B22888029
"BLD",586,"KRN",9.8,"NM",46,0)
TIUFLA^^0^B17403761
"BLD",586,"KRN",9.8,"NM",47,0)
TIUFLA1^^0^B8695881
"BLD",586,"KRN",9.8,"NM",48,0)
TIUFLD^^0^B30337885
"BLD",586,"KRN",9.8,"NM",49,0)
TIUFLD1^^0^B10285692
"BLD",586,"KRN",9.8,"NM",50,0)
TIUFLF^^0^B14030170
"BLD",586,"KRN",9.8,"NM",51,0)
TIUFLF1^^0^B34561287
"BLD",586,"KRN",9.8,"NM",52,0)
TIUFLF2^^0^B15764660
"BLD",586,"KRN",9.8,"NM",53,0)
TIUFLF3^^0^B39078332
"BLD",586,"KRN",9.8,"NM",54,0)
TIUFLF4^^0^B15201759
"BLD",586,"KRN",9.8,"NM",55,0)
TIUFLF5^^0^B30717217
"BLD",586,"KRN",9.8,"NM",56,0)
TIUFLF6^^0^B17775342
"BLD",586,"KRN",9.8,"NM",57,0)
TIUFLF7^^0^B22452826
"BLD",586,"KRN",9.8,"NM",58,0)
TIUFLLM^^0^B5264751
"BLD",586,"KRN",9.8,"NM",59,0)
TIUFLLM1^^0^B19964581
"BLD",586,"KRN",9.8,"NM",60,0)
TIUFLLM2^^0^B35004765
"BLD",586,"KRN",9.8,"NM",61,0)
TIUFLLM3^^0^B3140
"BLD",586,"KRN",9.8,"NM",62,0)
TIUFLT^^0^B8051475
"BLD",586,"KRN",9.8,"NM",63,0)
TIUFPR^^0^B21943868
"BLD",586,"KRN",9.8,"NM",64,0)
TIUFT^^0^B36716887
"BLD",586,"KRN",9.8,"NM",65,0)
TIUFT1^^0^B18849085
"BLD",586,"KRN",9.8,"NM",66,0)
TIUFXHLX^^0^B46158789
"BLD",586,"KRN",9.8,"NM",67,0)
TIUHELP^^0^B7867271
"BLD",586,"KRN",9.8,"NM",68,0)
TIUIL^^0^B26375066
"BLD",586,"KRN",9.8,"NM",69,0)
TIUIL1^^0^B25018815
"BLD",586,"KRN",9.8,"NM",71,0)
TIUIL2^^0^B30581308
"BLD",586,"KRN",9.8,"NM",72,0)
TIUIL3^^0^B26570373
"BLD",586,"KRN",9.8,"NM",73,0)
TIUIL4^^0^B21699501
"BLD",586,"KRN",9.8,"NM",74,0)
TIUIL5^^0^B29279419
"BLD",586,"KRN",9.8,"NM",75,0)
TIUIL6^^0^B22066969
"BLD",586,"KRN",9.8,"NM",76,0)
TIUIL7^^0^B24775646
"BLD",586,"KRN",9.8,"NM",77,0)
TIUIL8^^0^B30561887
"BLD",586,"KRN",9.8,"NM",78,0)
TIUIL9^^0^B24191326
"BLD",586,"KRN",9.8,"NM",79,0)
TIULA^^0^B21077855
"BLD",586,"KRN",9.8,"NM",80,0)
TIULA1^^0^B18412028
"BLD",586,"KRN",9.8,"NM",81,0)
TIULA2^^0^B37859522
"BLD",586,"KRN",9.8,"NM",82,0)
TIULA3^^0^B8622264
"BLD",586,"KRN",9.8,"NM",83,0)
TIULA4^^0^B8030069
"BLD",586,"KRN",9.8,"NM",84,0)
TIULAB^^0^B5066533
"BLD",586,"KRN",9.8,"NM",85,0)
TIULADR^^0^B1404259
"BLD",586,"KRN",9.8,"NM",86,0)
TIULAPI^^0^B3224015
"BLD",586,"KRN",9.8,"NM",87,0)
TIULAPIC^^0^B2126451
"BLD",586,"KRN",9.8,"NM",88,0)
TIULAPIS^^0^B3538707
"BLD",586,"KRN",9.8,"NM",89,0)
TIULC^^0^B24697163
"BLD",586,"KRN",9.8,"NM",90,0)
TIULC1^^0^B20622166
"BLD",586,"KRN",9.8,"NM",91,0)
TIULD^^0^B8647232
"BLD",586,"KRN",9.8,"NM",92,0)
TIULE^^0^B3631439
"BLD",586,"KRN",9.8,"NM",93,0)
TIULEXP^^0^B1170195
"BLD",586,"KRN",9.8,"NM",94,0)
TIULF^^0^B3847821
"BLD",586,"KRN",9.8,"NM",95,0)
TIULG^^0^B4273334
"BLD",586,"KRN",9.8,"NM",96,0)
TIULIP^^0^B2467156
"BLD",586,"KRN",9.8,"NM",97,0)
TIULM^^0^B2972809
"BLD",586,"KRN",9.8,"NM",98,0)
TIULO^^0^B40930742
"BLD",586,"KRN",9.8,"NM",99,0)
TIULO1^^0^B2036711
"BLD",586,"KRN",9.8,"NM",100,0)
TIULP^^0^B10167945
"BLD",586,"KRN",9.8,"NM",101,0)
TIULP1^^0^B19642962
"BLD",586,"KRN",9.8,"NM",102,0)
TIULQ^^0^B9528312
"BLD",586,"KRN",9.8,"NM",103,0)
TIULQ2^^0^B4351710
"BLD",586,"KRN",9.8,"NM",104,0)
TIULS^^0^B15667975
"BLD",586,"KRN",9.8,"NM",105,0)
TIULS1^^0^B2481
"BLD",586,"KRN",9.8,"NM",106,0)
TIULV^^0^B20771783
"BLD",586,"KRN",9.8,"NM",107,0)
TIULX^^0^B12042405
"BLD",586,"KRN",9.8,"NM",108,0)
TIUMOVE^^0^B12681817
"BLD",586,"KRN",9.8,"NM",109,0)
TIUNTEG^^0^B20065471
"BLD",586,"KRN",9.8,"NM",110,0)
TIUNTEG0^^0^B5211638
"BLD",586,"KRN",9.8,"NM",112,0)
TIUPD^^0^B20999059
"BLD",586,"KRN",9.8,"NM",113,0)
TIUPEDSP^^0^B681398
"BLD",586,"KRN",9.8,"NM",114,0)
TIUPEVN1^^0^B942992
"BLD",586,"KRN",9.8,"NM",115,0)
TIUPEVNT^^0^B44462750
"BLD",586,"KRN",9.8,"NM",116,0)
TIUPL^^0^B1583
"BLD",586,"KRN",9.8,"NM",117,0)
TIUPLST^^0^B14058125
"BLD",586,"KRN",9.8,"NM",118,0)
TIUPNCV^^0^B36155717
"BLD",586,"KRN",9.8,"NM",119,0)
TIUPNCV1^^0^B7182326
"BLD",586,"KRN",9.8,"NM",120,0)
TIUPNCV2^^0^B16280396
"BLD",586,"KRN",9.8,"NM",121,0)
TIUPNCV3^^0^B14727650
"BLD",586,"KRN",9.8,"NM",122,0)
TIUPNCV4^^0^B18242292
"BLD",586,"KRN",9.8,"NM",123,0)
TIUPNCV5^^0^B14077765
"BLD",586,"KRN",9.8,"NM",124,0)
TIUPNCV6^^0^B11336336
"BLD",586,"KRN",9.8,"NM",125,0)
TIUPNCV7^^0^B14479543
"BLD",586,"KRN",9.8,"NM",126,0)
TIUPNCV8^^0^B18516606
"BLD",586,"KRN",9.8,"NM",128,0)
TIUPOST^^0^B2560627
"BLD",586,"KRN",9.8,"NM",137,0)
TIUPRD^^0^B5701311
"BLD",586,"KRN",9.8,"NM",138,0)
TIUPRDS^^0^B4597822
"BLD",586,"KRN",9.8,"NM",139,0)
TIUPRDS1^^0^B44835585
"BLD",586,"KRN",9.8,"NM",140,0)
TIUPRDS2^^0^B7185613
"BLD",586,"KRN",9.8,"NM",141,0)
TIUPREF^^0^B791105
"BLD",586,"KRN",9.8,"NM",142,0)
TIUPRPN^^0^B1941997
"BLD",586,"KRN",9.8,"NM",143,0)
TIUPRPN1^^0^B58943181
"BLD",586,"KRN",9.8,"NM",144,0)
TIUPRPN2^^0^B6201564
"BLD",586,"KRN",9.8,"NM",145,0)
TIUPRPN3^^0^B20739651
"BLD",586,"KRN",9.8,"NM",146,0)
TIUPRPN4^^0^B8735462
"BLD",586,"KRN",9.8,"NM",147,0)
TIUPRPN5^^0^B21557628
"BLD",586,"KRN",9.8,"NM",148,0)
TIUPRPN6^^0^B9359246
"BLD",586,"KRN",9.8,"NM",149,0)
TIUPRPN7^^0^B28237354
"BLD",586,"KRN",9.8,"NM",150,0)
TIUPUTC^^0^B36119612
"BLD",586,"KRN",9.8,"NM",151,0)
TIUPUTD^^0^B14935009
"BLD",586,"KRN",9.8,"NM",152,0)
TIUPUTPN^^0^B20604432
"BLD",586,"KRN",9.8,"NM",153,0)
TIUPUTU^^0^B15874627
"BLD",586,"KRN",9.8,"NM",154,0)
TIUPXAPI^^0^B40004472
"BLD",586,"KRN",9.8,"NM",155,0)
TIUR^^0^B71845057
"BLD",586,"KRN",9.8,"NM",156,0)
TIURA^^0^B65822919
"BLD",586,"KRN",9.8,"NM",157,0)
TIURA1^^0^B24835961
"BLD",586,"KRN",9.8,"NM",158,0)
TIURB^^0^B69372270
"BLD",586,"KRN",9.8,"NM",159,0)
TIURB1^^0^B3550979
"BLD",586,"KRN",9.8,"NM",160,0)
TIURC^^0^B59265808
"BLD",586,"KRN",9.8,"NM",161,0)
TIURD^^0^B38740755
"BLD",586,"KRN",9.8,"NM",162,0)
TIURE^^0^B14984642
"BLD",586,"KRN",9.8,"NM",163,0)
TIURH^^0^B3583027
"BLD",586,"KRN",9.8,"NM",164,0)
TIURL^^0^B14210183
"BLD",586,"KRN",9.8,"NM",165,0)
TIURM^^0^B59243058
"BLD",586,"KRN",9.8,"NM",166,0)
TIURMH^^0^B2169345
"BLD",586,"KRN",9.8,"NM",167,0)
TIURP^^0^B10007157
"BLD",586,"KRN",9.8,"NM",168,0)
TIURPTTL^^0^B59669322
"BLD",586,"KRN",9.8,"NM",169,0)
TIURS^^0^B29391835
"BLD",586,"KRN",9.8,"NM",170,0)
TIURS1^^0^B6070592
"BLD",586,"KRN",9.8,"NM",171,0)
TIURT^^0^B24143274
"BLD",586,"KRN",9.8,"NM",172,0)
TIURTITL^^0^B58208562
"BLD",586,"KRN",9.8,"NM",173,0)
TIUSRV^^0^B63596263
"BLD",586,"KRN",9.8,"NM",174,0)
TIUSRVA^^0^B2096344
"BLD",586,"KRN",9.8,"NM",175,0)
TIUSRVD^^0^B16977188
"BLD",586,"KRN",9.8,"NM",176,0)
TIUSRVE^^0^B10442489
"BLD",586,"KRN",9.8,"NM",177,0)
TIUSRVG^^0^B24954709
"BLD",586,"KRN",9.8,"NM",178,0)
TIUSRVL^^0^B31985341
"BLD",586,"KRN",9.8,"NM",179,0)
TIUSRVL1^^0^B17609186
"BLD",586,"KRN",9.8,"NM",180,0)
TIUSRVLC^^0^B10549996
"BLD",586,"KRN",9.8,"NM",181,0)
TIUSRVLV^^0^B1945376
"BLD",586,"KRN",9.8,"NM",182,0)
TIUSRVP^^0^B34011342
"BLD",586,"KRN",9.8,"NM",183,0)
TIUSRVP1^^0^B2590205
"BLD",586,"KRN",9.8,"NM",184,0)
TIUSRVR^^0^B5351449
"BLD",586,"KRN",9.8,"NM",185,0)
TIUSRVR1^^0^B59532516
"BLD",586,"KRN",9.8,"NM",186,0)
TIUT^^0^B16322348
"BLD",586,"KRN",9.8,"NM",187,0)
TIUTHLP^^0^B6271007
"BLD",586,"KRN",9.8,"NM",188,0)
TIUTSK^^0^B9937250
"BLD",586,"KRN",9.8,"NM",189,0)
TIUU^^0^B4797606
"BLD",586,"KRN",9.8,"NM",190,0)
TIUUPEDT^^0^B5452800
"BLD",586,"KRN",9.8,"NM",191,0)
TIUUPLD^^0^B15440148
"BLD",586,"KRN",9.8,"NM",192,0)
TIUVISIT^^0^B18979993
"BLD",586,"KRN",9.8,"NM",193,0)
TIUVSIT^^0^B60127108
"BLD",586,"KRN",9.8,"NM",194,0)
TIUEDIH^^0^B6186
"BLD",586,"KRN",9.8,"NM",195,0)
TIUFXHL1^^0^B15366142
"BLD",586,"KRN",9.8,"NM",196,0)
TIULMED^^0^B2559880
"BLD",586,"KRN",9.8,"NM",197,0)
TIUPNAPI^^0^B8096854
"BLD",586,"KRN",9.8,"NM",199,0)
TIURTITH^^0^B929678
"BLD",586,"KRN",9.8,"NM",200,0)
TIUFHA5^^0^B32236093
"BLD",586,"KRN",9.8,"NM",201,0)
TIUFHLP^^0^B49790553
"BLD",586,"KRN",9.8,"NM",202,0)
TIUFHLP1^^0^B12788010
"BLD",586,"KRN",9.8,"NM",203,0)
TIUFC1^^0^B33248572
"BLD",586,"KRN",9.8,"NM",204,0)
TIURD1^^0^B51925749
"BLD",586,"KRN",9.8,"NM",205,0)
TIUFJ^^0^B2662787
"BLD",586,"KRN",9.8,"NM",206,0)
TIUFX^^0^B6971628
"BLD",586,"KRN",9.8,"NM",207,0)
TIUPXAP1^^0^B10817599
"BLD",586,"KRN",9.8,"NM",208,0)
TIUDD0^^0^B45662787
"BLD",586,"KRN",9.8,"NM",210,0)
TIUFLF8^^0^B18128052
"BLD",586,"KRN",9.8,"NM",211,0)
TIUFLJ^^0^B26580060
"BLD",586,"KRN",9.8,"NM",212,0)
TIUFLX^^0^B17966324
"BLD",586,"KRN",9.8,"NM",213,0)
TIUIL10^^0^B16471997
"BLD",586,"KRN",9.8,"NM",214,0)
TIUPNCVX^^0^B12540443
"BLD",586,"KRN",9.8,"NM",215,0)
TIUPXAPS^^0^B3872191
"BLD",586,"KRN",9.8,"NM",216,0)
TIUROR^^0^B50353508
"BLD",586,"KRN",9.8,"NM",217,0)
TIURORL^^0^B1843469
"BLD",586,"KRN",9.8,"NM",218,0)
TIURPN^^0^B15422869
"BLD",586,"KRN",9.8,"NM",219,0)
TIUSRVLL^^0^B19714213
"BLD",586,"KRN",9.8,"NM",220,0)
TIUSRVLO^^0^B27563071
"BLD",586,"KRN",9.8,"NM",224,0)
TIUFHA6^^0^B20036765
"BLD",586,"KRN",9.8,"NM",225,0)
TIUFLJ1^^0^B7820219
"BLD",586,"KRN",9.8,"NM",226,0)
TIUPEFIX^^0^B34384563
"BLD",586,"KRN",9.8,"NM",227,0)
TIUPXAP2^^0^B3394206
"BLD",586,"KRN",9.8,"NM",228,0)
TIUSRV1^^0^B4927992
"BLD",586,"KRN",9.8,"NM",229,0)
TIUDD01^^0^B41747242
"BLD",586,"KRN",9.8,"NM",230,0)
TIUPXAPC^^0^B15201950
"BLD",586,"KRN",9.8,"NM","B","TIUADD",1)

"BLD",586,"KRN",9.8,"NM","B","TIUALRT",2)

"BLD",586,"KRN",9.8,"NM","B","TIUAPIOK",3)

"BLD",586,"KRN",9.8,"NM","B","TIUAUDIT",4)

"BLD",586,"KRN",9.8,"NM","B","TIUBPEDT",5)

"BLD",586,"KRN",9.8,"NM","B","TIUBR",6)

"BLD",586,"KRN",9.8,"NM","B","TIUBRWS",7)

"BLD",586,"KRN",9.8,"NM","B","TIUCHLP",8)

"BLD",586,"KRN",9.8,"NM","B","TIUCNSLT",9)

"BLD",586,"KRN",9.8,"NM","B","TIUDD",11)

"BLD",586,"KRN",9.8,"NM","B","TIUDD0",208)

"BLD",586,"KRN",9.8,"NM","B","TIUDD01",229)

"BLD",586,"KRN",9.8,"NM","B","TIUDD8",12)

"BLD",586,"KRN",9.8,"NM","B","TIUDD98",13)

"BLD",586,"KRN",9.8,"NM","B","TIUDEV",14)

"BLD",586,"KRN",9.8,"NM","B","TIUDIRH",16)

"BLD",586,"KRN",9.8,"NM","B","TIUDIRT",17)

"BLD",586,"KRN",9.8,"NM","B","TIUDPEDT",18)

"BLD",586,"KRN",9.8,"NM","B","TIUDSCNV",19)

"BLD",586,"KRN",9.8,"NM","B","TIUEDI1",20)

"BLD",586,"KRN",9.8,"NM","B","TIUEDI2",21)

"BLD",586,"KRN",9.8,"NM","B","TIUEDIH",194)

"BLD",586,"KRN",9.8,"NM","B","TIUEDIM",22)

"BLD",586,"KRN",9.8,"NM","B","TIUEDIT",23)

"BLD",586,"KRN",9.8,"NM","B","TIUEDITR",24)

"BLD",586,"KRN",9.8,"NM","B","TIUELST",25)

"BLD",586,"KRN",9.8,"NM","B","TIUENV",26)

"BLD",586,"KRN",9.8,"NM","B","TIUEPRNT",27)

"BLD",586,"KRN",9.8,"NM","B","TIUFA",28)

"BLD",586,"KRN",9.8,"NM","B","TIUFA1",29)

"BLD",586,"KRN",9.8,"NM","B","TIUFC",30)

"BLD",586,"KRN",9.8,"NM","B","TIUFC1",203)

"BLD",586,"KRN",9.8,"NM","B","TIUFD",31)

"BLD",586,"KRN",9.8,"NM","B","TIUFD1",32)

"BLD",586,"KRN",9.8,"NM","B","TIUFD2",33)

"BLD",586,"KRN",9.8,"NM","B","TIUFD3",34)

"BLD",586,"KRN",9.8,"NM","B","TIUFD4",35)

"BLD",586,"KRN",9.8,"NM","B","TIUFH",36)

"BLD",586,"KRN",9.8,"NM","B","TIUFH1",37)

"BLD",586,"KRN",9.8,"NM","B","TIUFHA",38)

"BLD",586,"KRN",9.8,"NM","B","TIUFHA1",39)

"BLD",586,"KRN",9.8,"NM","B","TIUFHA2",40)

"BLD",586,"KRN",9.8,"NM","B","TIUFHA3",41)

"BLD",586,"KRN",9.8,"NM","B","TIUFHA4",42)

"BLD",586,"KRN",9.8,"NM","B","TIUFHA5",200)

"BLD",586,"KRN",9.8,"NM","B","TIUFHA6",224)

"BLD",586,"KRN",9.8,"NM","B","TIUFHLP",201)

"BLD",586,"KRN",9.8,"NM","B","TIUFHLP1",202)

"BLD",586,"KRN",9.8,"NM","B","TIUFJ",205)

"BLD",586,"KRN",9.8,"NM","B","TIUFL",44)

"BLD",586,"KRN",9.8,"NM","B","TIUFL1",45)

"BLD",586,"KRN",9.8,"NM","B","TIUFLA",46)

"BLD",586,"KRN",9.8,"NM","B","TIUFLA1",47)

"BLD",586,"KRN",9.8,"NM","B","TIUFLD",48)

"BLD",586,"KRN",9.8,"NM","B","TIUFLD1",49)

"BLD",586,"KRN",9.8,"NM","B","TIUFLF",50)

"BLD",586,"KRN",9.8,"NM","B","TIUFLF1",51)

"BLD",586,"KRN",9.8,"NM","B","TIUFLF2",52)

"BLD",586,"KRN",9.8,"NM","B","TIUFLF3",53)

"BLD",586,"KRN",9.8,"NM","B","TIUFLF4",54)

"BLD",586,"KRN",9.8,"NM","B","TIUFLF5",55)

"BLD",586,"KRN",9.8,"NM","B","TIUFLF6",56)

"BLD",586,"KRN",9.8,"NM","B","TIUFLF7",57)

"BLD",586,"KRN",9.8,"NM","B","TIUFLF8",210)

"BLD",586,"KRN",9.8,"NM","B","TIUFLJ",211)

"BLD",586,"KRN",9.8,"NM","B","TIUFLJ1",225)

"BLD",586,"KRN",9.8,"NM","B","TIUFLLM",58)

"BLD",586,"KRN",9.8,"NM","B","TIUFLLM1",59)

"BLD",586,"KRN",9.8,"NM","B","TIUFLLM2",60)

"BLD",586,"KRN",9.8,"NM","B","TIUFLLM3",61)

"BLD",586,"KRN",9.8,"NM","B","TIUFLT",62)

"BLD",586,"KRN",9.8,"NM","B","TIUFLX",212)

"BLD",586,"KRN",9.8,"NM","B","TIUFPR",63)

"BLD",586,"KRN",9.8,"NM","B","TIUFT",64)

"BLD",586,"KRN",9.8,"NM","B","TIUFT1",65)

"BLD",586,"KRN",9.8,"NM","B","TIUFX",206)

"BLD",586,"KRN",9.8,"NM","B","TIUFXHL1",195)

"BLD",586,"KRN",9.8,"NM","B","TIUFXHLX",66)

"BLD",586,"KRN",9.8,"NM","B","TIUHELP",67)

"BLD",586,"KRN",9.8,"NM","B","TIUIL",68)

"BLD",586,"KRN",9.8,"NM","B","TIUIL1",69)

"BLD",586,"KRN",9.8,"NM","B","TIUIL10",213)

"BLD",586,"KRN",9.8,"NM","B","TIUIL2",71)

"BLD",586,"KRN",9.8,"NM","B","TIUIL3",72)

"BLD",586,"KRN",9.8,"NM","B","TIUIL4",73)

"BLD",586,"KRN",9.8,"NM","B","TIUIL5",74)

"BLD",586,"KRN",9.8,"NM","B","TIUIL6",75)

"BLD",586,"KRN",9.8,"NM","B","TIUIL7",76)

"BLD",586,"KRN",9.8,"NM","B","TIUIL8",77)

"BLD",586,"KRN",9.8,"NM","B","TIUIL9",78)

"BLD",586,"KRN",9.8,"NM","B","TIULA",79)

"BLD",586,"KRN",9.8,"NM","B","TIULA1",80)

"BLD",586,"KRN",9.8,"NM","B","TIULA2",81)

"BLD",586,"KRN",9.8,"NM","B","TIULA3",82)

"BLD",586,"KRN",9.8,"NM","B","TIULA4",83)

"BLD",586,"KRN",9.8,"NM","B","TIULAB",84)

"BLD",586,"KRN",9.8,"NM","B","TIULADR",85)

"BLD",586,"KRN",9.8,"NM","B","TIULAPI",86)

"BLD",586,"KRN",9.8,"NM","B","TIULAPIC",87)

"BLD",586,"KRN",9.8,"NM","B","TIULAPIS",88)

"BLD",586,"KRN",9.8,"NM","B","TIULC",89)

"BLD",586,"KRN",9.8,"NM","B","TIULC1",90)

"BLD",586,"KRN",9.8,"NM","B","TIULD",91)

"BLD",586,"KRN",9.8,"NM","B","TIULE",92)

"BLD",586,"KRN",9.8,"NM","B","TIULEXP",93)

"BLD",586,"KRN",9.8,"NM","B","TIULF",94)

"BLD",586,"KRN",9.8,"NM","B","TIULG",95)

"BLD",586,"KRN",9.8,"NM","B","TIULIP",96)

"BLD",586,"KRN",9.8,"NM","B","TIULM",97)

"BLD",586,"KRN",9.8,"NM","B","TIULMED",196)

"BLD",586,"KRN",9.8,"NM","B","TIULO",98)

"BLD",586,"KRN",9.8,"NM","B","TIULO1",99)

"BLD",586,"KRN",9.8,"NM","B","TIULP",100)

"BLD",586,"KRN",9.8,"NM","B","TIULP1",101)

"BLD",586,"KRN",9.8,"NM","B","TIULQ",102)

"BLD",586,"KRN",9.8,"NM","B","TIULQ2",103)

"BLD",586,"KRN",9.8,"NM","B","TIULS",104)

"BLD",586,"KRN",9.8,"NM","B","TIULS1",105)

"BLD",586,"KRN",9.8,"NM","B","TIULV",106)

"BLD",586,"KRN",9.8,"NM","B","TIULX",107)

"BLD",586,"KRN",9.8,"NM","B","TIUMOVE",108)

"BLD",586,"KRN",9.8,"NM","B","TIUNTEG",109)

"BLD",586,"KRN",9.8,"NM","B","TIUNTEG0",110)

"BLD",586,"KRN",9.8,"NM","B","TIUPD",112)

"BLD",586,"KRN",9.8,"NM","B","TIUPEDSP",113)

"BLD",586,"KRN",9.8,"NM","B","TIUPEFIX",226)

"BLD",586,"KRN",9.8,"NM","B","TIUPEVN1",114)

"BLD",586,"KRN",9.8,"NM","B","TIUPEVNT",115)

"BLD",586,"KRN",9.8,"NM","B","TIUPL",116)

"BLD",586,"KRN",9.8,"NM","B","TIUPLST",117)

"BLD",586,"KRN",9.8,"NM","B","TIUPNAPI",197)

"BLD",586,"KRN",9.8,"NM","B","TIUPNCV",118)

"BLD",586,"KRN",9.8,"NM","B","TIUPNCV1",119)

"BLD",586,"KRN",9.8,"NM","B","TIUPNCV2",120)

"BLD",586,"KRN",9.8,"NM","B","TIUPNCV3",121)

"BLD",586,"KRN",9.8,"NM","B","TIUPNCV4",122)

"BLD",586,"KRN",9.8,"NM","B","TIUPNCV5",123)

"BLD",586,"KRN",9.8,"NM","B","TIUPNCV6",124)

"BLD",586,"KRN",9.8,"NM","B","TIUPNCV7",125)

"BLD",586,"KRN",9.8,"NM","B","TIUPNCV8",126)

"BLD",586,"KRN",9.8,"NM","B","TIUPNCVX",214)

"BLD",586,"KRN",9.8,"NM","B","TIUPOST",128)

"BLD",586,"KRN",9.8,"NM","B","TIUPRD",137)

"BLD",586,"KRN",9.8,"NM","B","TIUPRDS",138)

"BLD",586,"KRN",9.8,"NM","B","TIUPRDS1",139)

"BLD",586,"KRN",9.8,"NM","B","TIUPRDS2",140)

"BLD",586,"KRN",9.8,"NM","B","TIUPREF",141)

"BLD",586,"KRN",9.8,"NM","B","TIUPRPN",142)

"BLD",586,"KRN",9.8,"NM","B","TIUPRPN1",143)

"BLD",586,"KRN",9.8,"NM","B","TIUPRPN2",144)

"BLD",586,"KRN",9.8,"NM","B","TIUPRPN3",145)

"BLD",586,"KRN",9.8,"NM","B","TIUPRPN4",146)

"BLD",586,"KRN",9.8,"NM","B","TIUPRPN5",147)

"BLD",586,"KRN",9.8,"NM","B","TIUPRPN6",148)

"BLD",586,"KRN",9.8,"NM","B","TIUPRPN7",149)

"BLD",586,"KRN",9.8,"NM","B","TIUPUTC",150)

"BLD",586,"KRN",9.8,"NM","B","TIUPUTD",151)

"BLD",586,"KRN",9.8,"NM","B","TIUPUTPN",152)

"BLD",586,"KRN",9.8,"NM","B","TIUPUTU",153)

"BLD",586,"KRN",9.8,"NM","B","TIUPXAP1",207)

"BLD",586,"KRN",9.8,"NM","B","TIUPXAP2",227)

"BLD",586,"KRN",9.8,"NM","B","TIUPXAPC",230)

"BLD",586,"KRN",9.8,"NM","B","TIUPXAPI",154)

"BLD",586,"KRN",9.8,"NM","B","TIUPXAPS",215)

"BLD",586,"KRN",9.8,"NM","B","TIUR",155)

"BLD",586,"KRN",9.8,"NM","B","TIURA",156)

"BLD",586,"KRN",9.8,"NM","B","TIURA1",157)

"BLD",586,"KRN",9.8,"NM","B","TIURB",158)

"BLD",586,"KRN",9.8,"NM","B","TIURB1",159)

"BLD",586,"KRN",9.8,"NM","B","TIURC",160)

"BLD",586,"KRN",9.8,"NM","B","TIURD",161)

"BLD",586,"KRN",9.8,"NM","B","TIURD1",204)

"BLD",586,"KRN",9.8,"NM","B","TIURE",162)

"BLD",586,"KRN",9.8,"NM","B","TIURH",163)

"BLD",586,"KRN",9.8,"NM","B","TIURL",164)

"BLD",586,"KRN",9.8,"NM","B","TIURM",165)

"BLD",586,"KRN",9.8,"NM","B","TIURMH",166)

"BLD",586,"KRN",9.8,"NM","B","TIUROR",216)

"BLD",586,"KRN",9.8,"NM","B","TIURORL",217)

"BLD",586,"KRN",9.8,"NM","B","TIURP",167)

"BLD",586,"KRN",9.8,"NM","B","TIURPN",218)

"BLD",586,"KRN",9.8,"NM","B","TIURPTTL",168)

"BLD",586,"KRN",9.8,"NM","B","TIURS",169)

"BLD",586,"KRN",9.8,"NM","B","TIURS1",170)

"BLD",586,"KRN",9.8,"NM","B","TIURT",171)

"BLD",586,"KRN",9.8,"NM","B","TIURTITH",199)

"BLD",586,"KRN",9.8,"NM","B","TIURTITL",172)

"BLD",586,"KRN",9.8,"NM","B","TIUSRV",173)

"BLD",586,"KRN",9.8,"NM","B","TIUSRV1",228)

"BLD",586,"KRN",9.8,"NM","B","TIUSRVA",174)

"BLD",586,"KRN",9.8,"NM","B","TIUSRVD",175)

"BLD",586,"KRN",9.8,"NM","B","TIUSRVE",176)

"BLD",586,"KRN",9.8,"NM","B","TIUSRVG",177)

"BLD",586,"KRN",9.8,"NM","B","TIUSRVL",178)

"BLD",586,"KRN",9.8,"NM","B","TIUSRVL1",179)

"BLD",586,"KRN",9.8,"NM","B","TIUSRVLC",180)

"BLD",586,"KRN",9.8,"NM","B","TIUSRVLL",219)

"BLD",586,"KRN",9.8,"NM","B","TIUSRVLO",220)

"BLD",586,"KRN",9.8,"NM","B","TIUSRVLV",181)

"BLD",586,"KRN",9.8,"NM","B","TIUSRVP",182)

"BLD",586,"KRN",9.8,"NM","B","TIUSRVP1",183)

"BLD",586,"KRN",9.8,"NM","B","TIUSRVR",184)

"BLD",586,"KRN",9.8,"NM","B","TIUSRVR1",185)

"BLD",586,"KRN",9.8,"NM","B","TIUT",186)

"BLD",586,"KRN",9.8,"NM","B","TIUTHLP",187)

"BLD",586,"KRN",9.8,"NM","B","TIUTSK",188)

"BLD",586,"KRN",9.8,"NM","B","TIUU",189)

"BLD",586,"KRN",9.8,"NM","B","TIUUPEDT",190)

"BLD",586,"KRN",9.8,"NM","B","TIUUPLD",191)

"BLD",586,"KRN",9.8,"NM","B","TIUVISIT",192)

"BLD",586,"KRN",9.8,"NM","B","TIUVSIT",193)

"BLD",586,"KRN",19,0)
19
"BLD",586,"KRN",19,"NM",0)
^9.68A^111^99
"BLD",586,"KRN",19,"NM",1,0)
TIU BASIC PARAMETER EDIT^^0
"BLD",586,"KRN",19,"NM",2,0)
TIU BRIEF DS MENU^^0
"BLD",586,"KRN",19,"NM",3,0)
TIU BROWSE DOCUMENT CLINICIAN^^0
"BLD",586,"KRN",19,"NM",4,0)
TIU BROWSE DOCUMENT MGR^^0
"BLD",586,"KRN",19,"NM",5,0)
TIU BROWSE DOCUMENT MRT^^0
"BLD",586,"KRN",19,"NM",6,0)
TIU BROWSE DOCUMENT READ ONLY^^0
"BLD",586,"KRN",19,"NM",7,0)
TIU BROWSE DS CLINICIAN^^0
"BLD",586,"KRN",19,"NM",8,0)
TIU BROWSE DS MGR^^0
"BLD",586,"KRN",19,"NM",9,0)
TIU BROWSE DS MRT^^0
"BLD",586,"KRN",19,"NM",10,0)
TIU BROWSE PN CLINICIAN^^0
"BLD",586,"KRN",19,"NM",11,0)
TIU BROWSE PN MGR^^0
"BLD",586,"KRN",19,"NM",12,0)
TIU BROWSE PN MRT^^0
"BLD",586,"KRN",19,"NM",14,0)
TIU DISCHARGE SUMMARY CONVERT^^0
"BLD",586,"KRN",19,"NM",15,0)
TIU DOCUMENT DEFINITION EDIT^^0
"BLD",586,"KRN",19,"NM",16,0)
TIU DOCUMENT PARAMETER EDIT^^0
"BLD",586,"KRN",19,"NM",17,0)
TIU DS LINE COUNT BY AUTHOR^^0
"BLD",586,"KRN",19,"NM",18,0)
TIU DS LINE COUNT BY SERVICE^^0
"BLD",586,"KRN",19,"NM",19,0)
TIU DS LINE COUNT BY TRANSCR^^0
"BLD",586,"KRN",19,"NM",20,0)
TIU ENTER/EDIT^^0
"BLD",586,"KRN",19,"NM",21,0)
TIU ENTER/EDIT DS^^0
"BLD",586,"KRN",19,"NM",22,0)
TIU ENTER/EDIT PN^^0
"BLD",586,"KRN",19,"NM",23,0)
TIU ENTER/EDIT TRANSCRIBER^^0
"BLD",586,"KRN",19,"NM",24,0)
TIU GMRPN CONVERSION^^0
"BLD",586,"KRN",19,"NM",25,0)
TIU GMRPN CONVERT^^0
"BLD",586,"KRN",19,"NM",26,0)
TIU GMRPN MONITOR^^0
"BLD",586,"KRN",19,"NM",27,0)
TIU GMRPN RESTART^^0
"BLD",586,"KRN",19,"NM",28,0)
TIU GMRPN SINGLE^^0
"BLD",586,"KRN",19,"NM",30,0)
TIU IRM MAINTENANCE MENU^^0
"BLD",586,"KRN",19,"NM",31,0)
TIU LINE COUNT BY AUTHOR^^0
"BLD",586,"KRN",19,"NM",32,0)
TIU LIST NOTES BY TITLE^^0
"BLD",586,"KRN",19,"NM",33,0)
TIU MAIN MENU CLINICIAN^^0
"BLD",586,"KRN",19,"NM",34,0)
TIU MAIN MENU DS CLINICIAN^^0
"BLD",586,"KRN",19,"NM",35,0)
TIU MAIN MENU MGR^^0
"BLD",586,"KRN",19,"NM",36,0)
TIU MAIN MENU MIXED CLINICIAN^^0
"BLD",586,"KRN",19,"NM",37,0)
TIU MAIN MENU MRT^^0
"BLD",586,"KRN",19,"NM",38,0)
TIU MAIN MENU PN CLINICIAN^^0
"BLD",586,"KRN",19,"NM",40,0)
TIU MAIN MENU REMOTE USER^^0
"BLD",586,"KRN",19,"NM",41,0)
TIU MAIN MENU TRANSCRIPTION^^0
"BLD",586,"KRN",19,"NM",42,0)
TIU NIGHTLY TASK^^0
"BLD",586,"KRN",19,"NM",43,0)
TIU PERSONAL PREFERENCE MENU^^0
"BLD",586,"KRN",19,"NM",44,0)
TIU PERSONAL PREFERENCES^^0
"BLD",586,"KRN",19,"NM",45,0)
TIU PREFERRED DOCUMENT LIST^^0
"BLD",586,"KRN",19,"NM",46,0)
TIU PRINT PN^^0
"BLD",586,"KRN",19,"NM",47,0)
TIU PRINT PN ADMISSION^^0
"BLD",586,"KRN",19,"NM",48,0)
TIU PRINT PN AUTHOR^^0
"BLD",586,"KRN",19,"NM",49,0)
TIU PRINT PN BATCH INTERACTIVE^^0
"BLD",586,"KRN",19,"NM",50,0)
TIU PRINT PN BATCH SCHEDULED^^0
"BLD",586,"KRN",19,"NM",51,0)
TIU PRINT PN DIV PARAMS^^0
"BLD",586,"KRN",19,"NM",52,0)
TIU PRINT PN LOC^^0
"BLD",586,"KRN",19,"NM",53,0)
TIU PRINT PN LOC PARAMS^^0
"BLD",586,"KRN",19,"NM",54,0)
TIU PRINT PN MAS MENU^^0
"BLD",586,"KRN",19,"NM",55,0)
TIU PRINT PN OUTPT LOC^^0
"BLD",586,"KRN",19,"NM",56,0)
TIU PRINT PN PT^^0
"BLD",586,"KRN",19,"NM",57,0)
TIU PRINT PN USER MENU^^0
"BLD",586,"KRN",19,"NM",58,0)
TIU PRINT PN WARD^^0
"BLD",586,"KRN",19,"NM",59,0)
TIU RELEASED/UNVERIFIED REPORT^^0
"BLD",586,"KRN",19,"NM",61,0)
TIU REVIEW DS CLINICIAN^^0
"BLD",586,"KRN",19,"NM",62,0)
TIU REVIEW DS UNSIGNED^^0
"BLD",586,"KRN",19,"NM",63,0)
TIU REVIEW FILING EVENTS^^0
"BLD",586,"KRN",19,"NM",64,0)
TIU REVIEW PN CLINICIAN^^0
"BLD",586,"KRN",19,"NM",65,0)
TIU REVIEW PN UNSIGNED^^0
"BLD",586,"KRN",19,"NM",66,0)
TIU REVIEW SCREEN CLINICIAN^^0
"BLD",586,"KRN",19,"NM",67,0)
TIU REVIEW SCREEN MIS MANAGER^^0
"BLD",586,"KRN",19,"NM",68,0)
TIU REVIEW SCREEN MRT^^0
"BLD",586,"KRN",19,"NM",69,0)
TIU REVIEW SCREEN READ ONLY^^0
"BLD",586,"KRN",19,"NM",70,0)
TIU REVIEW UNSIGNED^^0
"BLD",586,"KRN",19,"NM",71,0)
TIU SEARCH BY PATIENT/TITLE^^0
"BLD",586,"KRN",19,"NM",72,0)
TIU SEARCH LIST MGR^^0
"BLD",586,"KRN",19,"NM",73,0)
TIU SEARCH LIST MRT^^0
"BLD",586,"KRN",19,"NM",74,0)
TIU SET-UP MENU^^0
"BLD",586,"KRN",19,"NM",75,0)
TIU STATISTICAL REPORTS^^0
"BLD",586,"KRN",19,"NM",76,0)
TIU UPLOAD DOCUMENTS^^0
"BLD",586,"KRN",19,"NM",77,0)
TIU UPLOAD HELP^^0
"BLD",586,"KRN",19,"NM",78,0)
TIU UPLOAD MENU^^0
"BLD",586,"KRN",19,"NM",79,0)
TIU UPLOAD PARAMETER EDIT^^0
"BLD",586,"KRN",19,"NM",80,0)
TIUF DOCUMENT DEFINITION CLIN^^0
"BLD",586,"KRN",19,"NM",81,0)
TIUF DOCUMENT DEFINITION MGR^^0
"BLD",586,"KRN",19,"NM",83,0)
TIUFA SORT DDEFS CLIN^^0
"BLD",586,"KRN",19,"NM",84,0)
TIUFA SORT DDEFS MGR^^0
"BLD",586,"KRN",19,"NM",86,0)
TIUFC CREATE DDEFS MGR^^0
"BLD",586,"KRN",19,"NM",88,0)
TIUFH EDIT DDEFS CLIN^^0
"BLD",586,"KRN",19,"NM",89,0)
TIUFH EDIT DDEFS MGR^^0
"BLD",586,"KRN",19,"NM",91,0)
TIUP PRINT DISCHARGE SUMMARIES^^0
"BLD",586,"KRN",19,"NM",92,0)
TIUP PRINT DOCUMENTS^^0
"BLD",586,"KRN",19,"NM",93,0)
TIUP PRINT MENU^^0
"BLD",586,"KRN",19,"NM",94,0)
TIUP PRINT PROGRESS NOTES^^0
"BLD",586,"KRN",19,"NM",99,0)
USR CLASS DEFINITION^^0
"BLD",586,"KRN",19,"NM",100,0)
USR CLASS MANAGEMENT MENU^^0
"BLD",586,"KRN",19,"NM",101,0)
USR EDIT BUSINESS RULES^^0
"BLD",586,"KRN",19,"NM",102,0)
USR LIST MEMBERSHIP BY CLASS^^0
"BLD",586,"KRN",19,"NM",103,0)
USR LIST MEMBERSHIP BY USER^^0
"BLD",586,"KRN",19,"NM",104,0)
USR INITIALIZE MEMBERSHIP^^0
"BLD",586,"KRN",19,"NM",105,0)
USR BUSINESS RULE MANAGEMENT^^0
"BLD",586,"KRN",19,"NM",106,0)
TIU CONVERSIONS MENU^^0
"BLD",586,"KRN",19,"NM",107,0)
TIU GMRPN HALT^^0
"BLD",586,"KRN",19,"NM",108,0)
TIUFJ CREATE OBJECTS MGR^^0
"BLD",586,"KRN",19,"NM",109,0)
TIUFJ VIEW OBJECTS CLIN^^0
"BLD",586,"KRN",19,"NM",110,0)
TIU GMRPN TITLES^^0
"BLD",586,"KRN",19,"NM",111,0)
TIU OE/RR REVIEW PROG NOTES^^0
"BLD",586,"KRN",19,"NM","B","TIU BASIC PARAMETER EDIT",1)

"BLD",586,"KRN",19,"NM","B","TIU BRIEF DS MENU",2)

"BLD",586,"KRN",19,"NM","B","TIU BROWSE DOCUMENT CLINICIAN",3)

"BLD",586,"KRN",19,"NM","B","TIU BROWSE DOCUMENT MGR",4)

"BLD",586,"KRN",19,"NM","B","TIU BROWSE DOCUMENT MRT",5)

"BLD",586,"KRN",19,"NM","B","TIU BROWSE DOCUMENT READ ONLY",6)

"BLD",586,"KRN",19,"NM","B","TIU BROWSE DS CLINICIAN",7)

"BLD",586,"KRN",19,"NM","B","TIU BROWSE DS MGR",8)

"BLD",586,"KRN",19,"NM","B","TIU BROWSE DS MRT",9)

"BLD",586,"KRN",19,"NM","B","TIU BROWSE PN CLINICIAN",10)

"BLD",586,"KRN",19,"NM","B","TIU BROWSE PN MGR",11)

"BLD",586,"KRN",19,"NM","B","TIU BROWSE PN MRT",12)

"BLD",586,"KRN",19,"NM","B","TIU CONVERSIONS MENU",106)

"BLD",586,"KRN",19,"NM","B","TIU DISCHARGE SUMMARY CONVERT",14)

"BLD",586,"KRN",19,"NM","B","TIU DOCUMENT DEFINITION EDIT",15)

"BLD",586,"KRN",19,"NM","B","TIU DOCUMENT PARAMETER EDIT",16)

"BLD",586,"KRN",19,"NM","B","TIU DS LINE COUNT BY AUTHOR",17)

"BLD",586,"KRN",19,"NM","B","TIU DS LINE COUNT BY SERVICE",18)

"BLD",586,"KRN",19,"NM","B","TIU DS LINE COUNT BY TRANSCR",19)

"BLD",586,"KRN",19,"NM","B","TIU ENTER/EDIT",20)

"BLD",586,"KRN",19,"NM","B","TIU ENTER/EDIT DS",21)

"BLD",586,"KRN",19,"NM","B","TIU ENTER/EDIT PN",22)

"BLD",586,"KRN",19,"NM","B","TIU ENTER/EDIT TRANSCRIBER",23)

"BLD",586,"KRN",19,"NM","B","TIU GMRPN CONVERSION",24)

"BLD",586,"KRN",19,"NM","B","TIU GMRPN CONVERT",25)

"BLD",586,"KRN",19,"NM","B","TIU GMRPN HALT",107)

"BLD",586,"KRN",19,"NM","B","TIU GMRPN MONITOR",26)

"BLD",586,"KRN",19,"NM","B","TIU GMRPN RESTART",27)

"BLD",586,"KRN",19,"NM","B","TIU GMRPN SINGLE",28)

"BLD",586,"KRN",19,"NM","B","TIU GMRPN TITLES",110)

"BLD",586,"KRN",19,"NM","B","TIU IRM MAINTENANCE MENU",30)

"BLD",586,"KRN",19,"NM","B","TIU LINE COUNT BY AUTHOR",31)

"BLD",586,"KRN",19,"NM","B","TIU LIST NOTES BY TITLE",32)

"BLD",586,"KRN",19,"NM","B","TIU MAIN MENU CLINICIAN",33)

"BLD",586,"KRN",19,"NM","B","TIU MAIN MENU DS CLINICIAN",34)

"BLD",586,"KRN",19,"NM","B","TIU MAIN MENU MGR",35)

"BLD",586,"KRN",19,"NM","B","TIU MAIN MENU MIXED CLINICIAN",36)

"BLD",586,"KRN",19,"NM","B","TIU MAIN MENU MRT",37)

"BLD",586,"KRN",19,"NM","B","TIU MAIN MENU PN CLINICIAN",38)

"BLD",586,"KRN",19,"NM","B","TIU MAIN MENU REMOTE USER",40)

"BLD",586,"KRN",19,"NM","B","TIU MAIN MENU TRANSCRIPTION",41)

"BLD",586,"KRN",19,"NM","B","TIU NIGHTLY TASK",42)

"BLD",586,"KRN",19,"NM","B","TIU OE/RR REVIEW PROG NOTES",111)

"BLD",586,"KRN",19,"NM","B","TIU PERSONAL PREFERENCE MENU",43)

"BLD",586,"KRN",19,"NM","B","TIU PERSONAL PREFERENCES",44)

"BLD",586,"KRN",19,"NM","B","TIU PREFERRED DOCUMENT LIST",45)

"BLD",586,"KRN",19,"NM","B","TIU PRINT PN",46)

"BLD",586,"KRN",19,"NM","B","TIU PRINT PN ADMISSION",47)

"BLD",586,"KRN",19,"NM","B","TIU PRINT PN AUTHOR",48)

"BLD",586,"KRN",19,"NM","B","TIU PRINT PN BATCH INTERACTIVE",49)

"BLD",586,"KRN",19,"NM","B","TIU PRINT PN BATCH SCHEDULED",50)

"BLD",586,"KRN",19,"NM","B","TIU PRINT PN DIV PARAMS",51)

"BLD",586,"KRN",19,"NM","B","TIU PRINT PN LOC",52)

"BLD",586,"KRN",19,"NM","B","TIU PRINT PN LOC PARAMS",53)

"BLD",586,"KRN",19,"NM","B","TIU PRINT PN MAS MENU",54)

"BLD",586,"KRN",19,"NM","B","TIU PRINT PN OUTPT LOC",55)

"BLD",586,"KRN",19,"NM","B","TIU PRINT PN PT",56)

"BLD",586,"KRN",19,"NM","B","TIU PRINT PN USER MENU",57)

"BLD",586,"KRN",19,"NM","B","TIU PRINT PN WARD",58)

"BLD",586,"KRN",19,"NM","B","TIU RELEASED/UNVERIFIED REPORT",59)

"BLD",586,"KRN",19,"NM","B","TIU REVIEW DS CLINICIAN",61)

"BLD",586,"KRN",19,"NM","B","TIU REVIEW DS UNSIGNED",62)

"BLD",586,"KRN",19,"NM","B","TIU REVIEW FILING EVENTS",63)

"BLD",586,"KRN",19,"NM","B","TIU REVIEW PN CLINICIAN",64)

"BLD",586,"KRN",19,"NM","B","TIU REVIEW PN UNSIGNED",65)

"BLD",586,"KRN",19,"NM","B","TIU REVIEW SCREEN CLINICIAN",66)

"BLD",586,"KRN",19,"NM","B","TIU REVIEW SCREEN MIS MANAGER",67)

"BLD",586,"KRN",19,"NM","B","TIU REVIEW SCREEN MRT",68)

"BLD",586,"KRN",19,"NM","B","TIU REVIEW SCREEN READ ONLY",69)

"BLD",586,"KRN",19,"NM","B","TIU REVIEW UNSIGNED",70)

"BLD",586,"KRN",19,"NM","B","TIU SEARCH BY PATIENT/TITLE",71)

"BLD",586,"KRN",19,"NM","B","TIU SEARCH LIST MGR",72)

"BLD",586,"KRN",19,"NM","B","TIU SEARCH LIST MRT",73)

"BLD",586,"KRN",19,"NM","B","TIU SET-UP MENU",74)

"BLD",586,"KRN",19,"NM","B","TIU STATISTICAL REPORTS",75)

"BLD",586,"KRN",19,"NM","B","TIU UPLOAD DOCUMENTS",76)

"BLD",586,"KRN",19,"NM","B","TIU UPLOAD HELP",77)

"BLD",586,"KRN",19,"NM","B","TIU UPLOAD MENU",78)

"BLD",586,"KRN",19,"NM","B","TIU UPLOAD PARAMETER EDIT",79)

"BLD",586,"KRN",19,"NM","B","TIUF DOCUMENT DEFINITION CLIN",80)

"BLD",586,"KRN",19,"NM","B","TIUF DOCUMENT DEFINITION MGR",81)

"BLD",586,"KRN",19,"NM","B","TIUFA SORT DDEFS CLIN",83)

"BLD",586,"KRN",19,"NM","B","TIUFA SORT DDEFS MGR",84)

"BLD",586,"KRN",19,"NM","B","TIUFC CREATE DDEFS MGR",86)

"BLD",586,"KRN",19,"NM","B","TIUFH EDIT DDEFS CLIN",88)

"BLD",586,"KRN",19,"NM","B","TIUFH EDIT DDEFS MGR",89)

"BLD",586,"KRN",19,"NM","B","TIUFJ CREATE OBJECTS MGR",108)

"BLD",586,"KRN",19,"NM","B","TIUFJ VIEW OBJECTS CLIN",109)

"BLD",586,"KRN",19,"NM","B","TIUP PRINT DISCHARGE SUMMARIES",91)

"BLD",586,"KRN",19,"NM","B","TIUP PRINT DOCUMENTS",92)

"BLD",586,"KRN",19,"NM","B","TIUP PRINT MENU",93)

"BLD",586,"KRN",19,"NM","B","TIUP PRINT PROGRESS NOTES",94)

"BLD",586,"KRN",19,"NM","B","USR BUSINESS RULE MANAGEMENT",105)

"BLD",586,"KRN",19,"NM","B","USR CLASS DEFINITION",99)

"BLD",586,"KRN",19,"NM","B","USR CLASS MANAGEMENT MENU",100)

"BLD",586,"KRN",19,"NM","B","USR EDIT BUSINESS RULES",101)

"BLD",586,"KRN",19,"NM","B","USR INITIALIZE MEMBERSHIP",104)

"BLD",586,"KRN",19,"NM","B","USR LIST MEMBERSHIP BY CLASS",102)

"BLD",586,"KRN",19,"NM","B","USR LIST MEMBERSHIP BY USER",103)

"BLD",586,"KRN",19.1,0)
19.1
"BLD",586,"KRN",19.1,"NM",0)
^9.68A^1^1
"BLD",586,"KRN",19.1,"NM",1,0)
TIU AUTOVERIFY^^0
"BLD",586,"KRN",19.1,"NM","B","TIU AUTOVERIFY",1)

"BLD",586,"KRN",101,0)
101
"BLD",586,"KRN",101,"NM",0)
^9.68A^284^235
"BLD",586,"KRN",101,"NM",1,0)
TIU ACTION ADD DOCUMENT^^0
"BLD",586,"KRN",101,"NM",2,0)
TIU ACTION AMEND^^0
"BLD",586,"KRN",101,"NM",3,0)
TIU ACTION BLANK1^^0
"BLD",586,"KRN",101,"NM",4,0)
TIU ACTION BLANK2^^0
"BLD",586,"KRN",101,"NM",5,0)
TIU ACTION BLANK3^^0
"BLD",586,"KRN",101,"NM",6,0)
TIU ACTION BOTTOM^^0
"BLD",586,"KRN",101,"NM",7,0)
TIU ACTION BROWSE FOR CLINICIAN^^0
"BLD",586,"KRN",101,"NM",8,0)
TIU ACTION BROWSE FOR MGR^^0
"BLD",586,"KRN",101,"NM",9,0)
TIU ACTION BROWSE FOR MRT^^0
"BLD",586,"KRN",101,"NM",10,0)
TIU ACTION BROWSE FOR READ ONLY^^0
"BLD",586,"KRN",101,"NM",11,0)
TIU ACTION CHANGE VIEW CLINICIAN^^0
"BLD",586,"KRN",101,"NM",12,0)
TIU ACTION CHANGE VIEW ERROR SCREEN^^0
"BLD",586,"KRN",101,"NM",13,0)
TIU ACTION CHANGE VIEW MIS^^0
"BLD",586,"KRN",101,"NM",14,0)
TIU ACTION CHANGE VIEW OTHER^^0
"BLD",586,"KRN",101,"NM",15,0)
TIU ACTION CHANGE VIEW PT/TTL^^0
"BLD",586,"KRN",101,"NM",16,0)
TIU ACTION CHANGE VIEW TITLE^^0
"BLD",586,"KRN",101,"NM",17,0)
TIU ACTION COPY^^0
"BLD",586,"KRN",101,"NM",18,0)
TIU ACTION DELETE^^0
"BLD",586,"KRN",101,"NM",19,0)
TIU ACTION DESIGNATE SIGNERS^^0
"BLD",586,"KRN",101,"NM",20,0)
TIU ACTION DETAILED DISPLAY^^0
"BLD",586,"KRN",101,"NM",21,0)
TIU ACTION EDIT^^0
"BLD",586,"KRN",101,"NM",22,0)
TIU ACTION LINK TO PROBLEMS^^0
"BLD",586,"KRN",101,"NM",23,0)
TIU ACTION LINK TO VISIT^^0
"BLD",586,"KRN",101,"NM",24,0)
TIU ACTION MAKE ADDENDUM^^0
"BLD",586,"KRN",101,"NM",25,0)
TIU ACTION MENU CLINICIAN^^0
"BLD",586,"KRN",101,"NM",26,0)
TIU ACTION MENU COPY^^0
"BLD",586,"KRN",101,"NM",27,0)
TIU ACTION MENU EDIT ADDENDUM^^0
"BLD",586,"KRN",101,"NM",28,0)
TIU ACTION MENU ERRORS^^0
"BLD",586,"KRN",101,"NM",29,0)
TIU ACTION MENU LINK^^0
"BLD",586,"KRN",101,"NM",30,0)
TIU ACTION MENU LINK TO PROBLEM^^0
"BLD",586,"KRN",101,"NM",31,0)
TIU ACTION MENU MGR^^0
"BLD",586,"KRN",101,"NM",32,0)
TIU ACTION MENU MGR REVIEW^^0
"BLD",586,"KRN",101,"NM",33,0)
TIU ACTION MENU MRT^^0
"BLD",586,"KRN",101,"NM",34,0)
TIU ACTION MENU MRT REVIEW^^0
"BLD",586,"KRN",101,"NM",35,0)
TIU ACTION MENU PT/TTL REVIEW^^0
"BLD",586,"KRN",101,"NM",36,0)
TIU ACTION MENU READ-ONLY^^0
"BLD",586,"KRN",101,"NM",37,0)
TIU ACTION MENU REASSIGN^^0
"BLD",586,"KRN",101,"NM",38,0)
TIU ACTION MENU SEND BACK^^0
"BLD",586,"KRN",101,"NM",39,0)
TIU ACTION MENU SIGN ON CHART^^0
"BLD",586,"KRN",101,"NM",40,0)
TIU ACTION MENU SIGN/COSIGN^^0
"BLD",586,"KRN",101,"NM",41,0)
TIU ACTION MENU TITLE REVIEW^^0
"BLD",586,"KRN",101,"NM",42,0)
TIU ACTION MENU UPLOAD EVENTS^^0
"BLD",586,"KRN",101,"NM",43,0)
TIU ACTION MENU VERIFY^^0
"BLD",586,"KRN",101,"NM",44,0)
TIU ACTION NEXT SCREEN^^0
"BLD",586,"KRN",101,"NM",45,0)
TIU ACTION PREVIOUS SCREEN^^0
"BLD",586,"KRN",101,"NM",46,0)
TIU ACTION PRINT^^0
"BLD",586,"KRN",101,"NM",47,0)
TIU ACTION PRINT ERROR^^0
"BLD",586,"KRN",101,"NM",48,0)
TIU ACTION PRINT UPLOAD EVENT^^0
"BLD",586,"KRN",101,"NM",49,0)
TIU ACTION QUIT^^0
"BLD",586,"KRN",101,"NM",50,0)
TIU ACTION REASSIGN^^0
"BLD",586,"KRN",101,"NM",51,0)
TIU ACTION REFRESH^^0
"BLD",586,"KRN",101,"NM",52,0)
TIU ACTION RESOLVE FILING ERRORS^^0
"BLD",586,"KRN",101,"NM",53,0)
TIU ACTION SEARCH LIST^^0
"BLD",586,"KRN",101,"NM",54,0)
TIU ACTION SELECT LIST ELEMENT^^0
"BLD",586,"KRN",101,"NM",55,0)
TIU ACTION SELECT PROBLEM^^0
"BLD",586,"KRN",101,"NM",56,0)
TIU ACTION SEND BACK^^0
"BLD",586,"KRN",101,"NM",57,0)
TIU ACTION SIGN ON CHART^^0
"BLD",586,"KRN",101,"NM",58,0)
TIU ACTION SIGN/COSIGN^^0
"BLD",586,"KRN",101,"NM",59,0)
TIU ACTION TOP^^0
"BLD",586,"KRN",101,"NM",60,0)
TIU ACTION VERIFY^^0
"BLD",586,"KRN",101,"NM",61,0)
TIU BROWSE ACTION AMEND^^0
"BLD",586,"KRN",101,"NM",62,0)
TIU BROWSE ACTION APPROVE^^0
"BLD",586,"KRN",101,"NM",63,0)
TIU BROWSE ACTION COPY^^0
"BLD",586,"KRN",101,"NM",64,0)
TIU BROWSE ACTION DELETE^^0
"BLD",586,"KRN",101,"NM",65,0)
TIU BROWSE ACTION DESIGNATE SIGNERS^^0
"BLD",586,"KRN",101,"NM",66,0)
TIU BROWSE ACTION EDIT^^0
"BLD",586,"KRN",101,"NM",67,0)
TIU BROWSE ACTION EDIT ADDENDUM^^0
"BLD",586,"KRN",101,"NM",68,0)
TIU BROWSE ACTION MAKE ADDENDUM^^0
"BLD",586,"KRN",101,"NM",69,0)
TIU BROWSE ACTION PRINT^^0
"BLD",586,"KRN",101,"NM",70,0)
TIU BROWSE ACTION PRINT TEXT^^0
"BLD",586,"KRN",101,"NM",71,0)
TIU BROWSE ACTION REASSIGN^^0
"BLD",586,"KRN",101,"NM",72,0)
TIU BROWSE ACTION REJECT^^0
"BLD",586,"KRN",101,"NM",73,0)
TIU BROWSE ACTION SEARCH^^0
"BLD",586,"KRN",101,"NM",74,0)
TIU BROWSE ACTION SEND BACK^^0
"BLD",586,"KRN",101,"NM",75,0)
TIU BROWSE ACTION SIGN ON CHART^^0
"BLD",586,"KRN",101,"NM",76,0)
TIU BROWSE ACTION SIGN/COSIGN^^0
"BLD",586,"KRN",101,"NM",77,0)
TIU BROWSE ACTION VERIFY^^0
"BLD",586,"KRN",101,"NM",78,0)
TIU BROWSE MENU CLINICIAN^^0
"BLD",586,"KRN",101,"NM",79,0)
TIU BROWSE MENU MGR^^0
"BLD",586,"KRN",101,"NM",80,0)
TIU BROWSE MENU MRT^^0
"BLD",586,"KRN",101,"NM",81,0)
TIU BROWSE MENU PRINT^^0
"BLD",586,"KRN",101,"NM",82,0)
TIU BROWSE MENU READ ONLY^^0
"BLD",586,"KRN",101,"NM",83,0)
TIU DS OE/RR INTERFACE^^0
"BLD",586,"KRN",101,"NM",84,0)
TIU ENTER/EDIT^^0
"BLD",586,"KRN",101,"NM",85,0)
TIU ERROR ACTION PRINT^^0
"BLD",586,"KRN",101,"NM",86,0)
TIU ERROR ACTION RESOLVE^^0
"BLD",586,"KRN",101,"NM",87,0)
TIU ERROR RESOLUTION MENU^^0
"BLD",586,"KRN",101,"NM",88,0)
TIU ERROR STATUS ALL^^0
"BLD",586,"KRN",101,"NM",89,0)
TIU ERROR STATUS RESOLVED^^0
"BLD",586,"KRN",101,"NM",90,0)
TIU ERROR STATUS SELECT^^0
"BLD",586,"KRN",101,"NM",91,0)
TIU ERROR STATUS UNRESOLVED^^0
"BLD",586,"KRN",101,"NM",92,0)
TIU HIDDEN ACTIONS^^0
"BLD",586,"KRN",101,"NM",93,0)
TIU HIDDEN ACTIONS BROWSE^^0
"BLD",586,"KRN",101,"NM",94,0)
TIU PN ENTER NOTE^^0
"BLD",586,"KRN",101,"NM",95,0)
TIU PN OE/RR INTERFACE^^0
"BLD",586,"KRN",101,"NM",96,0)
TIU REVIEW BY ALL CATEGORIES^^0
"BLD",586,"KRN",101,"NM",97,0)
TIU REVIEW BY AUTHOR^^0
"BLD",586,"KRN",101,"NM",98,0)
TIU REVIEW BY PATIENT^^0
"BLD",586,"KRN",101,"NM",99,0)
TIU REVIEW BY RESP PROVIDER^^0
"BLD",586,"KRN",101,"NM",100,0)
TIU REVIEW BY SERVICE^^0
"BLD",586,"KRN",101,"NM",101,0)
TIU REVIEW BY SUBJECT^^0
"BLD",586,"KRN",101,"NM",102,0)
TIU REVIEW BY TRANSCRIPTIONIST^^0
"BLD",586,"KRN",101,"NM",103,0)
TIU REVIEW BY TREATING SPECIALTY^^0
"BLD",586,"KRN",101,"NM",104,0)
TIU REVIEW SCREEN MENU^^0
"BLD",586,"KRN",101,"NM",105,0)
TIU STATUS AMENDED^^0
"BLD",586,"KRN",101,"NM",106,0)
TIU STATUS COMPLETED^^0
"BLD",586,"KRN",101,"NM",107,0)
TIU STATUS DELETED^^0
"BLD",586,"KRN",101,"NM",108,0)
TIU STATUS MENU^^0
"BLD",586,"KRN",101,"NM",109,0)
TIU STATUS PURGED^^0
"BLD",586,"KRN",101,"NM",110,0)
TIU STATUS UNCOSIGNED^^0
"BLD",586,"KRN",101,"NM",111,0)
TIU STATUS UNDICTATED^^0
"BLD",586,"KRN",101,"NM",112,0)
TIU STATUS UNRELEASED^^0
"BLD",586,"KRN",101,"NM",113,0)
TIU STATUS UNSIGNED^^0
"BLD",586,"KRN",101,"NM",114,0)
TIU STATUS UNTRANSCRIBED^^0
"BLD",586,"KRN",101,"NM",115,0)
TIU STATUS UNVERIFIED^^0
"BLD",586,"KRN",101,"NM",131,0)
TIUF CHANGE SORT ATTR VALUE^^0
"BLD",586,"KRN",101,"NM",132,0)
TIUF CHANGE SORT ATTRIBUTE^^0
"BLD",586,"KRN",101,"NM",133,0)
TIUF CHANGE SORT MENU^^0
"BLD",586,"KRN",101,"NM",134,0)
TIUF CHANGE START WITH/GO TO^^0
"BLD",586,"KRN",101,"NM",135,0)
TIUF CHANGE STATUS TO ACTIVE^^0
"BLD",586,"KRN",101,"NM",136,0)
TIUF CHANGE STATUS TO INACTIVE^^0
"BLD",586,"KRN",101,"NM",137,0)
TIUF CHANGE STATUS TO TEST^^0
"BLD",586,"KRN",101,"NM",138,0)
TIUF DOWN A LINE^^0
"BLD",586,"KRN",101,"NM",146,0)
TIUF FIRST SCREEN^^0
"BLD",586,"KRN",101,"NM",147,0)
TIUF GOTO PAGE^^0
"BLD",586,"KRN",101,"NM",148,0)
TIUF HIDDEN ACTIONS^^0
"BLD",586,"KRN",101,"NM",149,0)
TIUF LAST SCREEN^^0
"BLD",586,"KRN",101,"NM",150,0)
TIUF LEFT^^0
"BLD",586,"KRN",101,"NM",151,0)
TIUF NEXT SCREEN^^0
"BLD",586,"KRN",101,"NM",152,0)
TIUF OWNER CLASS^^0
"BLD",586,"KRN",101,"NM",153,0)
TIUF OWNER INDIVIDUAL^^0
"BLD",586,"KRN",101,"NM",154,0)
TIUF OWNER NONE^^0
"BLD",586,"KRN",101,"NM",155,0)
TIUF OWNER PERSONAL^^0
"BLD",586,"KRN",101,"NM",156,0)
TIUF PARENTAGE NONORPHAN^^0
"BLD",586,"KRN",101,"NM",157,0)
TIUF PARENTAGE ORPHAN^^0
"BLD",586,"KRN",101,"NM",158,0)
TIUF PREVIOUS SCREEN^^0
"BLD",586,"KRN",101,"NM",159,0)
TIUF PRINT LIST^^0
"BLD",586,"KRN",101,"NM",160,0)
TIUF PRINT SCREEN^^0
"BLD",586,"KRN",101,"NM",161,0)
TIUF QUIT^^0
"BLD",586,"KRN",101,"NM",162,0)
TIUF RIGHT^^0
"BLD",586,"KRN",101,"NM",164,0)
TIUF SORT^^0
"BLD",586,"KRN",101,"NM",165,0)
TIUF SORT BY ALL^^0
"BLD",586,"KRN",101,"NM",166,0)
TIUF SORT BY OWNER^^0
"BLD",586,"KRN",101,"NM",167,0)
TIUF SORT BY PARENTAGE^^0
"BLD",586,"KRN",101,"NM",168,0)
TIUF SORT BY STATUS^^0
"BLD",586,"KRN",101,"NM",169,0)
TIUF SORT BY TYPE^^0
"BLD",586,"KRN",101,"NM",170,0)
TIUF SORT BY USED BY DOCMTS^^0
"BLD",586,"KRN",101,"NM",184,0)
TIUF UP ONE LINE^^0
"BLD",586,"KRN",101,"NM",185,0)
TIUF USED BY DOCMTS NO^^0
"BLD",586,"KRN",101,"NM",186,0)
TIUF USED BY DOCMTS YES^^0
"BLD",586,"KRN",101,"NM",188,0)
TIUFA ACTION ADD ENTRY^^0
"BLD",586,"KRN",101,"NM",189,0)
TIUFA ACTION CHANGE VIEW^^0
"BLD",586,"KRN",101,"NM",190,0)
TIUFA ACTION MENU CLIN^^0
"BLD",586,"KRN",101,"NM",191,0)
TIUFA ACTION MENU MGR^^0
"BLD",586,"KRN",101,"NM",193,0)
TIUFC ACTION BEGIN AGAIN^^0
"BLD",586,"KRN",101,"NM",194,0)
TIUFC ACTION CREATE CLASS/DOCUMENT CLASS^^0
"BLD",586,"KRN",101,"NM",195,0)
TIUFC ACTION CREATE COMPONENT^^0
"BLD",586,"KRN",101,"NM",196,0)
TIUFC ACTION CREATE TL^^0
"BLD",586,"KRN",101,"NM",197,0)
TIUFC ACTION MENU^^0
"BLD",586,"KRN",101,"NM",198,0)
TIUFC ACTION NEXT LEVEL^^0
"BLD",586,"KRN",101,"NM",199,0)
TIUFD ACTION MENU CLIN^^0
"BLD",586,"KRN",101,"NM",200,0)
TIUFD ACTION MENU MGR^^0
"BLD",586,"KRN",101,"NM",202,0)
TIUFD ACTION MENU VIEW^^0
"BLD",586,"KRN",101,"NM",203,0)
TIUFD EDIT BASICS^^0
"BLD",586,"KRN",101,"NM",204,0)
TIUFD EDIT BOILERPLATE TEXT^^0
"BLD",586,"KRN",101,"NM",205,0)
TIUFD EDIT TECHNICAL FIELDS^^0
"BLD",586,"KRN",101,"NM",208,0)
TIUFH ACTION JUMP TO DDEF^^0
"BLD",586,"KRN",101,"NM",209,0)
TIUFH ACTION EXPAND/COLLAPSE ENTRY^^0
"BLD",586,"KRN",101,"NM",210,0)
TIUFH ACTION MENU CLIN^^0
"BLD",586,"KRN",101,"NM",211,0)
TIUFH ACTION MENU MGR^^0
"BLD",586,"KRN",101,"NM",214,0)
TIUFHA ACTION COPY^^0
"BLD",586,"KRN",101,"NM",215,0)
TIUFHA ACTION DELETE^^0
"BLD",586,"KRN",101,"NM",216,0)
TIUFHA ACTION EDIT NAME/OWNER/PNAME^^0
"BLD",586,"KRN",101,"NM",217,0)
TIUFHA ACTION EDIT STATUS^^0
"BLD",586,"KRN",101,"NM",218,0)
TIUFHA ACTION EDIT/VIEW^^0
"BLD",586,"KRN",101,"NM",220,0)
TIUFT ACTION MENU ADD/EDIT/VIEW ITEMS^^0
"BLD",586,"KRN",101,"NM",221,0)
TIUFT ACTION MENU EDIT/VIEW ITEMS^^0
"BLD",586,"KRN",101,"NM",222,0)
TIUFT ACTION MENU VIEW ITEMS^^0
"BLD",586,"KRN",101,"NM",224,0)
VALM BLANK 1^^0
"BLD",586,"KRN",101,"NM",225,0)
VALM DOWN A LINE^^0
"BLD",586,"KRN",101,"NM",226,0)
VALM GOTO PAGE^^0
"BLD",586,"KRN",101,"NM",227,0)
VALM LEFT^^0
"BLD",586,"KRN",101,"NM",228,0)
VALM PRINT LIST^^0
"BLD",586,"KRN",101,"NM",229,0)
VALM REFRESH^^0
"BLD",586,"KRN",101,"NM",230,0)
VALM RIGHT^^0
"BLD",586,"KRN",101,"NM",231,0)
VALM SEARCH LIST^^0
"BLD",586,"KRN",101,"NM",232,0)
VALM TURN ON/OFF MENUS^^0
"BLD",586,"KRN",101,"NM",233,0)
VALM UP ONE LINE^^0
"BLD",586,"KRN",101,"NM",234,0)
TIUF ACTION TRY^^0
"BLD",586,"KRN",101,"NM",235,0)
TIUF QUIT1^^0
"BLD",586,"KRN",101,"NM",236,0)
TIUFD EDIT UPLOAD MGR^^0
"BLD",586,"KRN",101,"NM",237,0)
TIUFHA ATTRIBUTE EDIT NAME^^0
"BLD",586,"KRN",101,"NM",238,0)
TIUFHA ATTRIBUTE EDIT OWNER^^0
"BLD",586,"KRN",101,"NM",239,0)
TIUFHA ATTRIBUTE EDIT PRINT NAME^^0
"BLD",586,"KRN",101,"NM",240,0)
TIUFT ACTION ADD ITEMS^^0
"BLD",586,"KRN",101,"NM",241,0)
TIUFT ACTION DELETE ITEMS^^0
"BLD",586,"KRN",101,"NM",242,0)
TIUFT ACTION EDIT MENU TEXT^^0
"BLD",586,"KRN",101,"NM",243,0)
TIUFT ACTION EDIT MNEMONIC^^0
"BLD",586,"KRN",101,"NM",244,0)
TIUFT ACTION EDIT SEQUENCE^^0
"BLD",586,"KRN",101,"NM",245,0)
TIUFT ACTION ITEMS EDIT ALL^^0
"BLD",586,"KRN",101,"NM",246,0)
TIUFH EDIT ITEMS^^0
"BLD",586,"KRN",101,"NM",247,0)
TIUF STATUS ACTIVE^^0
"BLD",586,"KRN",101,"NM",248,0)
TIUF STATUS INACTIVE^^0
"BLD",586,"KRN",101,"NM",249,0)
TIUF STATUS TEST^^0
"BLD",586,"KRN",101,"NM",250,0)
TIUF STATUS NONE^^0
"BLD",586,"KRN",101,"NM",251,0)
TIU INTEGRATED OE/RR INTERFACE^^0
"BLD",586,"KRN",101,"NM",252,0)
TIU PT/TITLE OE/RR INTERFACE^^0
"BLD",586,"KRN",101,"NM",253,0)
TIUF FIND^^0
"BLD",586,"KRN",101,"NM",254,0)
TIUFHA ACTION BOILERPLATE TEXT^^0
"BLD",586,"KRN",101,"NM",255,0)
TIUFJ ACTION CHANGE VIEW^^0
"BLD",586,"KRN",101,"NM",257,0)
TIUFJ ACTION MENU CLIN^^0
"BLD",586,"KRN",101,"NM",258,0)
TIUFJ ACTION MENU MGR^^0
"BLD",586,"KRN",101,"NM",259,0)
TIUFX ACTION MENU MGR^^0
"BLD",586,"KRN",101,"NM",260,0)
TIUFX ACTION MENU VIEW^^0
"BLD",586,"KRN",101,"NM",261,0)
TIUFX EDIT STATUS^^0
"BLD",586,"KRN",101,"NM",262,0)
TIU ACTION BROWSE FOR OE/RR^^0
"BLD",586,"KRN",101,"NM",263,0)
TIU ACTION CHANGE TITLE^^0
"BLD",586,"KRN",101,"NM",264,0)
TIU ACTION COMPLETE DOCUMENTS^^0
"BLD",586,"KRN",101,"NM",265,0)
TIU ACTION COMPLETE NOTES^^0
"BLD",586,"KRN",101,"NM",266,0)
TIU ACTION CWAD DISPLAY^^0
"BLD",586,"KRN",101,"NM",267,0)
TIU ACTION MENU CHANGE TITLE^^0
"BLD",586,"KRN",101,"NM",268,0)
TIU ACTION MENU OE/RR^^0
"BLD",586,"KRN",101,"NM",269,0)
TIU ACTION RESET ALL SIGNED^^0
"BLD",586,"KRN",101,"NM",270,0)
TIU ACTION SELECT NEW PATIENT^^0
"BLD",586,"KRN",101,"NM",271,0)
TIU ACTION SIGNED/UNSIGNED^^0
"BLD",586,"KRN",101,"NM",272,0)
TIU BROWSE ACTION CHANGE TITLE^^0
"BLD",586,"KRN",101,"NM",273,0)
TIU COMPLETE NOTES MENU^^0
"BLD",586,"KRN",101,"NM",274,0)
TIU HIDDEN ACTIONS ADVANCED^^0
"BLD",586,"KRN",101,"NM",275,0)
TIU HIDDEN ACTIONS OE/RR^^0
"BLD",586,"KRN",101,"NM",276,0)
TIU LM REVIEW PN^^0
"BLD",586,"KRN",101,"NM",277,0)
TIUFDJ ACTION MENU MGR^^0
"BLD",586,"KRN",101,"NM",281,0)
TIUFJ ACTION EDIT OWNER^^0
"BLD",586,"KRN",101,"NM",282,0)
TIU BROWSE ACTION LINK TO PROBLEM^^0
"BLD",586,"KRN",101,"NM",283,0)
TIU BROWSE MENU LINK^^0
"BLD",586,"KRN",101,"NM",284,0)
TIUF ACTION TRY1^^0
"BLD",586,"KRN",101,"NM","B","TIU ACTION ADD DOCUMENT",1)

"BLD",586,"KRN",101,"NM","B","TIU ACTION AMEND",2)

"BLD",586,"KRN",101,"NM","B","TIU ACTION BLANK1",3)

"BLD",586,"KRN",101,"NM","B","TIU ACTION BLANK2",4)

"BLD",586,"KRN",101,"NM","B","TIU ACTION BLANK3",5)

"BLD",586,"KRN",101,"NM","B","TIU ACTION BOTTOM",6)

"BLD",586,"KRN",101,"NM","B","TIU ACTION BROWSE FOR CLINICIAN",7)

"BLD",586,"KRN",101,"NM","B","TIU ACTION BROWSE FOR MGR",8)

"BLD",586,"KRN",101,"NM","B","TIU ACTION BROWSE FOR MRT",9)

"BLD",586,"KRN",101,"NM","B","TIU ACTION BROWSE FOR OE/RR",262)

"BLD",586,"KRN",101,"NM","B","TIU ACTION BROWSE FOR READ ONLY",10)

"BLD",586,"KRN",101,"NM","B","TIU ACTION CHANGE TITLE",263)

"BLD",586,"KRN",101,"NM","B","TIU ACTION CHANGE VIEW CLINICIAN",11)

"BLD",586,"KRN",101,"NM","B","TIU ACTION CHANGE VIEW ERROR SCREEN",12)

"BLD",586,"KRN",101,"NM","B","TIU ACTION CHANGE VIEW MIS",13)

"BLD",586,"KRN",101,"NM","B","TIU ACTION CHANGE VIEW OTHER",14)

"BLD",586,"KRN",101,"NM","B","TIU ACTION CHANGE VIEW PT/TTL",15)

"BLD",586,"KRN",101,"NM","B","TIU ACTION CHANGE VIEW TITLE",16)

"BLD",586,"KRN",101,"NM","B","TIU ACTION COMPLETE DOCUMENTS",264)

"BLD",586,"KRN",101,"NM","B","TIU ACTION COMPLETE NOTES",265)

"BLD",586,"KRN",101,"NM","B","TIU ACTION COPY",17)

"BLD",586,"KRN",101,"NM","B","TIU ACTION CWAD DISPLAY",266)

"BLD",586,"KRN",101,"NM","B","TIU ACTION DELETE",18)

"BLD",586,"KRN",101,"NM","B","TIU ACTION DESIGNATE SIGNERS",19)

"BLD",586,"KRN",101,"NM","B","TIU ACTION DETAILED DISPLAY",20)

"BLD",586,"KRN",101,"NM","B","TIU ACTION EDIT",21)

"BLD",586,"KRN",101,"NM","B","TIU ACTION LINK TO PROBLEMS",22)

"BLD",586,"KRN",101,"NM","B","TIU ACTION LINK TO VISIT",23)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MAKE ADDENDUM",24)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU CHANGE TITLE",267)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU CLINICIAN",25)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU COPY",26)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU EDIT ADDENDUM",27)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU ERRORS",28)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU LINK",29)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU LINK TO PROBLEM",30)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU MGR",31)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU MGR REVIEW",32)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU MRT",33)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU MRT REVIEW",34)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU OE/RR",268)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU PT/TTL REVIEW",35)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU READ-ONLY",36)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU REASSIGN",37)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU SEND BACK",38)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU SIGN ON CHART",39)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU SIGN/COSIGN",40)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU TITLE REVIEW",41)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU UPLOAD EVENTS",42)

"BLD",586,"KRN",101,"NM","B","TIU ACTION MENU VERIFY",43)

"BLD",586,"KRN",101,"NM","B","TIU ACTION NEXT SCREEN",44)

"BLD",586,"KRN",101,"NM","B","TIU ACTION PREVIOUS SCREEN",45)

"BLD",586,"KRN",101,"NM","B","TIU ACTION PRINT",46)

"BLD",586,"KRN",101,"NM","B","TIU ACTION PRINT ERROR",47)

"BLD",586,"KRN",101,"NM","B","TIU ACTION PRINT UPLOAD EVENT",48)

"BLD",586,"KRN",101,"NM","B","TIU ACTION QUIT",49)

"BLD",586,"KRN",101,"NM","B","TIU ACTION REASSIGN",50)

"BLD",586,"KRN",101,"NM","B","TIU ACTION REFRESH",51)

"BLD",586,"KRN",101,"NM","B","TIU ACTION RESET ALL SIGNED",269)

"BLD",586,"KRN",101,"NM","B","TIU ACTION RESOLVE FILING ERRORS",52)

"BLD",586,"KRN",101,"NM","B","TIU ACTION SEARCH LIST",53)

"BLD",586,"KRN",101,"NM","B","TIU ACTION SELECT LIST ELEMENT",54)

"BLD",586,"KRN",101,"NM","B","TIU ACTION SELECT NEW PATIENT",270)

"BLD",586,"KRN",101,"NM","B","TIU ACTION SELECT PROBLEM",55)

"BLD",586,"KRN",101,"NM","B","TIU ACTION SEND BACK",56)

"BLD",586,"KRN",101,"NM","B","TIU ACTION SIGN ON CHART",57)

"BLD",586,"KRN",101,"NM","B","TIU ACTION SIGN/COSIGN",58)

"BLD",586,"KRN",101,"NM","B","TIU ACTION SIGNED/UNSIGNED",271)

"BLD",586,"KRN",101,"NM","B","TIU ACTION TOP",59)

"BLD",586,"KRN",101,"NM","B","TIU ACTION VERIFY",60)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION AMEND",61)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION APPROVE",62)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION CHANGE TITLE",272)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION COPY",63)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION DELETE",64)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION DESIGNATE SIGNERS",65)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION EDIT",66)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION EDIT ADDENDUM",67)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION LINK TO PROBLEM",282)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION MAKE ADDENDUM",68)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION PRINT",69)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION PRINT TEXT",70)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION REASSIGN",71)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION REJECT",72)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION SEARCH",73)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION SEND BACK",74)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION SIGN ON CHART",75)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION SIGN/COSIGN",76)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE ACTION VERIFY",77)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE MENU CLINICIAN",78)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE MENU LINK",283)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE MENU MGR",79)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE MENU MRT",80)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE MENU PRINT",81)

"BLD",586,"KRN",101,"NM","B","TIU BROWSE MENU READ ONLY",82)

"BLD",586,"KRN",101,"NM","B","TIU COMPLETE NOTES MENU",273)

"BLD",586,"KRN",101,"NM","B","TIU DS OE/RR INTERFACE",83)

"BLD",586,"KRN",101,"NM","B","TIU ENTER/EDIT",84)

"BLD",586,"KRN",101,"NM","B","TIU ERROR ACTION PRINT",85)

"BLD",586,"KRN",101,"NM","B","TIU ERROR ACTION RESOLVE",86)

"BLD",586,"KRN",101,"NM","B","TIU ERROR RESOLUTION MENU",87)

"BLD",586,"KRN",101,"NM","B","TIU ERROR STATUS ALL",88)

"BLD",586,"KRN",101,"NM","B","TIU ERROR STATUS RESOLVED",89)

"BLD",586,"KRN",101,"NM","B","TIU ERROR STATUS SELECT",90)

"BLD",586,"KRN",101,"NM","B","TIU ERROR STATUS UNRESOLVED",91)

"BLD",586,"KRN",101,"NM","B","TIU HIDDEN ACTIONS",92)

"BLD",586,"KRN",101,"NM","B","TIU HIDDEN ACTIONS ADVANCED",274)

"BLD",586,"KRN",101,"NM","B","TIU HIDDEN ACTIONS BROWSE",93)

"BLD",586,"KRN",101,"NM","B","TIU HIDDEN ACTIONS OE/RR",275)

"BLD",586,"KRN",101,"NM","B","TIU INTEGRATED OE/RR INTERFACE",251)

"BLD",586,"KRN",101,"NM","B","TIU LM REVIEW PN",276)

"BLD",586,"KRN",101,"NM","B","TIU PN ENTER NOTE",94)

"BLD",586,"KRN",101,"NM","B","TIU PN OE/RR INTERFACE",95)

"BLD",586,"KRN",101,"NM","B","TIU PT/TITLE OE/RR INTERFACE",252)

"BLD",586,"KRN",101,"NM","B","TIU REVIEW BY ALL CATEGORIES",96)

"BLD",586,"KRN",101,"NM","B","TIU REVIEW BY AUTHOR",97)

"BLD",586,"KRN",101,"NM","B","TIU REVIEW BY PATIENT",98)

"BLD",586,"KRN",101,"NM","B","TIU REVIEW BY RESP PROVIDER",99)

"BLD",586,"KRN",101,"NM","B","TIU REVIEW BY SERVICE",100)

"BLD",586,"KRN",101,"NM","B","TIU REVIEW BY SUBJECT",101)

"BLD",586,"KRN",101,"NM","B","TIU REVIEW BY TRANSCRIPTIONIST",102)

"BLD",586,"KRN",101,"NM","B","TIU REVIEW BY TREATING SPECIALTY",103)

"BLD",586,"KRN",101,"NM","B","TIU REVIEW SCREEN MENU",104)

"BLD",586,"KRN",101,"NM","B","TIU STATUS AMENDED",105)

"BLD",586,"KRN",101,"NM","B","TIU STATUS COMPLETED",106)

"BLD",586,"KRN",101,"NM","B","TIU STATUS DELETED",107)

"BLD",586,"KRN",101,"NM","B","TIU STATUS MENU",108)

"BLD",586,"KRN",101,"NM","B","TIU STATUS PURGED",109)

"BLD",586,"KRN",101,"NM","B","TIU STATUS UNCOSIGNED",110)

"BLD",586,"KRN",101,"NM","B","TIU STATUS UNDICTATED",111)

"BLD",586,"KRN",101,"NM","B","TIU STATUS UNRELEASED",112)

"BLD",586,"KRN",101,"NM","B","TIU STATUS UNSIGNED",113)

"BLD",586,"KRN",101,"NM","B","TIU STATUS UNTRANSCRIBED",114)

"BLD",586,"KRN",101,"NM","B","TIU STATUS UNVERIFIED",115)

"BLD",586,"KRN",101,"NM","B","TIUF ACTION TRY",234)

"BLD",586,"KRN",101,"NM","B","TIUF ACTION TRY1",284)

"BLD",586,"KRN",101,"NM","B","TIUF CHANGE SORT ATTR VALUE",131)

"BLD",586,"KRN",101,"NM","B","TIUF CHANGE SORT ATTRIBUTE",132)

"BLD",586,"KRN",101,"NM","B","TIUF CHANGE SORT MENU",133)

"BLD",586,"KRN",101,"NM","B","TIUF CHANGE START WITH/GO TO",134)

"BLD",586,"KRN",101,"NM","B","TIUF CHANGE STATUS TO ACTIVE",135)

"BLD",586,"KRN",101,"NM","B","TIUF CHANGE STATUS TO INACTIVE",136)

"BLD",586,"KRN",101,"NM","B","TIUF CHANGE STATUS TO TEST",137)

"BLD",586,"KRN",101,"NM","B","TIUF DOWN A LINE",138)

"BLD",586,"KRN",101,"NM","B","TIUF FIND",253)

"BLD",586,"KRN",101,"NM","B","TIUF FIRST SCREEN",146)

"BLD",586,"KRN",101,"NM","B","TIUF GOTO PAGE",147)

"BLD",586,"KRN",101,"NM","B","TIUF HIDDEN ACTIONS",148)

"BLD",586,"KRN",101,"NM","B","TIUF LAST SCREEN",149)

"BLD",586,"KRN",101,"NM","B","TIUF LEFT",150)

"BLD",586,"KRN",101,"NM","B","TIUF NEXT SCREEN",151)

"BLD",586,"KRN",101,"NM","B","TIUF OWNER CLASS",152)

"BLD",586,"KRN",101,"NM","B","TIUF OWNER INDIVIDUAL",153)

"BLD",586,"KRN",101,"NM","B","TIUF OWNER NONE",154)

"BLD",586,"KRN",101,"NM","B","TIUF OWNER PERSONAL",155)

"BLD",586,"KRN",101,"NM","B","TIUF PARENTAGE NONORPHAN",156)

"BLD",586,"KRN",101,"NM","B","TIUF PARENTAGE ORPHAN",157)

"BLD",586,"KRN",101,"NM","B","TIUF PREVIOUS SCREEN",158)

"BLD",586,"KRN",101,"NM","B","TIUF PRINT LIST",159)

"BLD",586,"KRN",101,"NM","B","TIUF PRINT SCREEN",160)

"BLD",586,"KRN",101,"NM","B","TIUF QUIT",161)

"BLD",586,"KRN",101,"NM","B","TIUF QUIT1",235)

"BLD",586,"KRN",101,"NM","B","TIUF RIGHT",162)

"BLD",586,"KRN",101,"NM","B","TIUF SORT",164)

"BLD",586,"KRN",101,"NM","B","TIUF SORT BY ALL",165)

"BLD",586,"KRN",101,"NM","B","TIUF SORT BY OWNER",166)

"BLD",586,"KRN",101,"NM","B","TIUF SORT BY PARENTAGE",167)

"BLD",586,"KRN",101,"NM","B","TIUF SORT BY STATUS",168)

"BLD",586,"KRN",101,"NM","B","TIUF SORT BY TYPE",169)

"BLD",586,"KRN",101,"NM","B","TIUF SORT BY USED BY DOCMTS",170)

"BLD",586,"KRN",101,"NM","B","TIUF STATUS ACTIVE",247)

"BLD",586,"KRN",101,"NM","B","TIUF STATUS INACTIVE",248)

"BLD",586,"KRN",101,"NM","B","TIUF STATUS NONE",250)

"BLD",586,"KRN",101,"NM","B","TIUF STATUS TEST",249)

"BLD",586,"KRN",101,"NM","B","TIUF UP ONE LINE",184)

"BLD",586,"KRN",101,"NM","B","TIUF USED BY DOCMTS NO",185)

"BLD",586,"KRN",101,"NM","B","TIUF USED BY DOCMTS YES",186)

"BLD",586,"KRN",101,"NM","B","TIUFA ACTION ADD ENTRY",188)

"BLD",586,"KRN",101,"NM","B","TIUFA ACTION CHANGE VIEW",189)

"BLD",586,"KRN",101,"NM","B","TIUFA ACTION MENU CLIN",190)

"BLD",586,"KRN",101,"NM","B","TIUFA ACTION MENU MGR",191)

"BLD",586,"KRN",101,"NM","B","TIUFC ACTION BEGIN AGAIN",193)

"BLD",586,"KRN",101,"NM","B","TIUFC ACTION CREATE CLASS/DOCUMENT CLASS",194)

"BLD",586,"KRN",101,"NM","B","TIUFC ACTION CREATE COMPONENT",195)

"BLD",586,"KRN",101,"NM","B","TIUFC ACTION CREATE TL",196)

"BLD",586,"KRN",101,"NM","B","TIUFC ACTION MENU",197)

"BLD",586,"KRN",101,"NM","B","TIUFC ACTION NEXT LEVEL",198)

"BLD",586,"KRN",101,"NM","B","TIUFD ACTION MENU CLIN",199)

"BLD",586,"KRN",101,"NM","B","TIUFD ACTION MENU MGR",200)

"BLD",586,"KRN",101,"NM","B","TIUFD ACTION MENU VIEW",202)

"BLD",586,"KRN",101,"NM","B","TIUFD EDIT BASICS",203)

"BLD",586,"KRN",101,"NM","B","TIUFD EDIT BOILERPLATE TEXT",204)

"BLD",586,"KRN",101,"NM","B","TIUFD EDIT TECHNICAL FIELDS",205)

"BLD",586,"KRN",101,"NM","B","TIUFD EDIT UPLOAD MGR",236)

"BLD",586,"KRN",101,"NM","B","TIUFDJ ACTION MENU MGR",277)

"BLD",586,"KRN",101,"NM","B","TIUFH ACTION EXPAND/COLLAPSE ENTRY",209)

"BLD",586,"KRN",101,"NM","B","TIUFH ACTION JUMP TO DDEF",208)

"BLD",586,"KRN",101,"NM","B","TIUFH ACTION MENU CLIN",210)

"BLD",586,"KRN",101,"NM","B","TIUFH ACTION MENU MGR",211)

"BLD",586,"KRN",101,"NM","B","TIUFH EDIT ITEMS",246)

"BLD",586,"KRN",101,"NM","B","TIUFHA ACTION BOILERPLATE TEXT",254)

"BLD",586,"KRN",101,"NM","B","TIUFHA ACTION COPY",214)

"BLD",586,"KRN",101,"NM","B","TIUFHA ACTION DELETE",215)

"BLD",586,"KRN",101,"NM","B","TIUFHA ACTION EDIT NAME/OWNER/PNAME",216)

"BLD",586,"KRN",101,"NM","B","TIUFHA ACTION EDIT STATUS",217)

"BLD",586,"KRN",101,"NM","B","TIUFHA ACTION EDIT/VIEW",218)

"BLD",586,"KRN",101,"NM","B","TIUFHA ATTRIBUTE EDIT NAME",237)

"BLD",586,"KRN",101,"NM","B","TIUFHA ATTRIBUTE EDIT OWNER",238)

"BLD",586,"KRN",101,"NM","B","TIUFHA ATTRIBUTE EDIT PRINT NAME",239)

"BLD",586,"KRN",101,"NM","B","TIUFJ ACTION CHANGE VIEW",255)

"BLD",586,"KRN",101,"NM","B","TIUFJ ACTION EDIT OWNER",281)

"BLD",586,"KRN",101,"NM","B","TIUFJ ACTION MENU CLIN",257)

"BLD",586,"KRN",101,"NM","B","TIUFJ ACTION MENU MGR",258)

"BLD",586,"KRN",101,"NM","B","TIUFT ACTION ADD ITEMS",240)

"BLD",586,"KRN",101,"NM","B","TIUFT ACTION DELETE ITEMS",241)

"BLD",586,"KRN",101,"NM","B","TIUFT ACTION EDIT MENU TEXT",242)

"BLD",586,"KRN",101,"NM","B","TIUFT ACTION EDIT MNEMONIC",243)

"BLD",586,"KRN",101,"NM","B","TIUFT ACTION EDIT SEQUENCE",244)

"BLD",586,"KRN",101,"NM","B","TIUFT ACTION ITEMS EDIT ALL",245)

"BLD",586,"KRN",101,"NM","B","TIUFT ACTION MENU ADD/EDIT/VIEW ITEMS",220)

"BLD",586,"KRN",101,"NM","B","TIUFT ACTION MENU EDIT/VIEW ITEMS",221)

"BLD",586,"KRN",101,"NM","B","TIUFT ACTION MENU VIEW ITEMS",222)

"BLD",586,"KRN",101,"NM","B","TIUFX ACTION MENU MGR",259)

"BLD",586,"KRN",101,"NM","B","TIUFX ACTION MENU VIEW",260)

"BLD",586,"KRN",101,"NM","B","TIUFX EDIT STATUS",261)

"BLD",586,"KRN",101,"NM","B","VALM BLANK 1",224)

"BLD",586,"KRN",101,"NM","B","VALM DOWN A LINE",225)

"BLD",586,"KRN",101,"NM","B","VALM GOTO PAGE",226)

"BLD",586,"KRN",101,"NM","B","VALM LEFT",227)

"BLD",586,"KRN",101,"NM","B","VALM PRINT LIST",228)

"BLD",586,"KRN",101,"NM","B","VALM REFRESH",229)

"BLD",586,"KRN",101,"NM","B","VALM RIGHT",230)

"BLD",586,"KRN",101,"NM","B","VALM SEARCH LIST",231)

"BLD",586,"KRN",101,"NM","B","VALM TURN ON/OFF MENUS",232)

"BLD",586,"KRN",101,"NM","B","VALM UP ONE LINE",233)

"BLD",586,"KRN",409.61,0)
409.61
"BLD",586,"KRN",409.61,"NM",0)
^9.68A^^0
"BLD",586,"KRN",771,0)
771
"BLD",586,"KRN",869.2,0)
869.2
"BLD",586,"KRN",870,0)
870
"BLD",586,"KRN",8994,0)
8994
"BLD",586,"KRN",8994,"NM",0)
^9.68A^24^24
"BLD",586,"KRN",8994,"NM",1,0)
TIU CREATE ADDENDUM RECORD^^0
"BLD",586,"KRN",8994,"NM",2,0)
TIU CREATE RECORD^^0
"BLD",586,"KRN",8994,"NM",3,0)
TIU DELETE RECORD^^0
"BLD",586,"KRN",8994,"NM",4,0)
TIU DETAILED DISPLAY^^0
"BLD",586,"KRN",8994,"NM",5,0)
TIU GET DOCUMENT PARAMETERS^^0
"BLD",586,"KRN",8994,"NM",6,0)
TIU GET DS TITLES^^0
"BLD",586,"KRN",8994,"NM",7,0)
TIU GET PERSONAL PREFERENCES^^0
"BLD",586,"KRN",8994,"NM",8,0)
TIU GET PN TITLES^^0
"BLD",586,"KRN",8994,"NM",9,0)
TIU GET RECORD TEXT^^0
"BLD",586,"KRN",8994,"NM",10,0)
TIU LOAD BOILERPLATE TEXT^^0
"BLD",586,"KRN",8994,"NM",11,0)
TIU LOAD RECORD FOR EDIT^^0
"BLD",586,"KRN",8994,"NM",12,0)
TIU NOTES^^0
"BLD",586,"KRN",8994,"NM",13,0)
TIU NOTES BY VISIT^^0
"BLD",586,"KRN",8994,"NM",14,0)
TIU PRINT RECORD^^0
"BLD",586,"KRN",8994,"NM",15,0)
TIU REQUIRES COSIGNATURE^^0
"BLD",586,"KRN",8994,"NM",16,0)
TIU SIGN RECORD^^0
"BLD",586,"KRN",8994,"NM",17,0)
TIU SUMMARIES^^0
"BLD",586,"KRN",8994,"NM",18,0)
TIU SUMMARIES BY VISIT^^0
"BLD",586,"KRN",8994,"NM",19,0)
TIU UPDATE RECORD^^0
"BLD",586,"KRN",8994,"NM",20,0)
TIU AUTHORIZATION^^0
"BLD",586,"KRN",8994,"NM",21,0)
TIU GET DS URGENCIES^^0
"BLD",586,"KRN",8994,"NM",22,0)
TIU DOCUMENTS BY CONTEXT^^0
"BLD",586,"KRN",8994,"NM",23,0)
TIU NOTES 16 BIT^^0
"BLD",586,"KRN",8994,"NM",24,0)
TIU WHICH SIGNATURE ACTION^^0
"BLD",586,"KRN",8994,"NM","B","TIU AUTHORIZATION",20)

"BLD",586,"KRN",8994,"NM","B","TIU CREATE ADDENDUM RECORD",1)

"BLD",586,"KRN",8994,"NM","B","TIU CREATE RECORD",2)

"BLD",586,"KRN",8994,"NM","B","TIU DELETE RECORD",3)

"BLD",586,"KRN",8994,"NM","B","TIU DETAILED DISPLAY",4)

"BLD",586,"KRN",8994,"NM","B","TIU DOCUMENTS BY CONTEXT",22)

"BLD",586,"KRN",8994,"NM","B","TIU GET DOCUMENT PARAMETERS",5)

"BLD",586,"KRN",8994,"NM","B","TIU GET DS TITLES",6)

"BLD",586,"KRN",8994,"NM","B","TIU GET DS URGENCIES",21)

"BLD",586,"KRN",8994,"NM","B","TIU GET PERSONAL PREFERENCES",7)

"BLD",586,"KRN",8994,"NM","B","TIU GET PN TITLES",8)

"BLD",586,"KRN",8994,"NM","B","TIU GET RECORD TEXT",9)

"BLD",586,"KRN",8994,"NM","B","TIU LOAD BOILERPLATE TEXT",10)

"BLD",586,"KRN",8994,"NM","B","TIU LOAD RECORD FOR EDIT",11)

"BLD",586,"KRN",8994,"NM","B","TIU NOTES",12)

"BLD",586,"KRN",8994,"NM","B","TIU NOTES 16 BIT",23)

"BLD",586,"KRN",8994,"NM","B","TIU NOTES BY VISIT",13)

"BLD",586,"KRN",8994,"NM","B","TIU PRINT RECORD",14)

"BLD",586,"KRN",8994,"NM","B","TIU REQUIRES COSIGNATURE",15)

"BLD",586,"KRN",8994,"NM","B","TIU SIGN RECORD",16)

"BLD",586,"KRN",8994,"NM","B","TIU SUMMARIES",17)

"BLD",586,"KRN",8994,"NM","B","TIU SUMMARIES BY VISIT",18)

"BLD",586,"KRN",8994,"NM","B","TIU UPDATE RECORD",19)

"BLD",586,"KRN",8994,"NM","B","TIU WHICH SIGNATURE ACTION",24)

"BLD",586,"KRN","B",.4,.4)

"BLD",586,"KRN","B",.401,.401)

"BLD",586,"KRN","B",.402,.402)

"BLD",586,"KRN","B",.403,.403)

"BLD",586,"KRN","B",.5,.5)

"BLD",586,"KRN","B",.84,.84)

"BLD",586,"KRN","B",3.6,3.6)

"BLD",586,"KRN","B",3.8,3.8)

"BLD",586,"KRN","B",9.2,9.2)

"BLD",586,"KRN","B",9.8,9.8)

"BLD",586,"KRN","B",19,19)

"BLD",586,"KRN","B",19.1,19.1)

"BLD",586,"KRN","B",101,101)

"BLD",586,"KRN","B",409.61,409.61)

"BLD",586,"KRN","B",771,771)

"BLD",586,"KRN","B",869.2,869.2)

"BLD",586,"KRN","B",870,870)

"BLD",586,"KRN","B",8994,8994)

"BLD",586,"PRE")
TIUENV
"BLD",586,"QUES",0)
^9.62^^
"BLD",586,"REQB",0)
^9.611^^0
"DATA",8925.1,1,0)
DISCHARGE SUMMARY^DCS^Discharge Summary^DOC^^55^11^^^^^^1
"DATA",8925.1,1,1)
8925^1^2;TEXT
"DATA",8925.1,1,3)
^1
"DATA",8925.1,1,4)
D LOOKUP^TIUPUTU
"DATA",8925.1,1,4.5)
D FOLLOWUP^TIUPUTU(TIUREC("#"))
"DATA",8925.1,1,4.8)
D GETPAT^TIUCHLP
"DATA",8925.1,1,5)
[TIU ENTER/EDIT DS]
"DATA",8925.1,1,6)
D ENTRY^TIUPRDS
"DATA",8925.1,1,99)
56777,28688
"DATA",8925.1,1,"DFLT",0)
^^7^7^2970411^
"DATA",8925.1,1,"DFLT",1,0)
DIAGNOSIS: 
"DATA",8925.1,1,"DFLT",2,0)
 
"DATA",8925.1,1,"DFLT",3,0)
 
"DATA",8925.1,1,"DFLT",4,0)
 
"DATA",8925.1,1,"DFLT",5,0)
 
"DATA",8925.1,1,"DFLT",6,0)
 
"DATA",8925.1,1,"DFLT",7,0)
OPERATIONS/PROCEDURES:
"DATA",8925.1,1,"HEAD",0)
^8925.12A^8^7
"DATA",8925.1,1,"HEAD",1,0)
PATIENT SSN^SSN^.02^TIUSSN^***********^1^1
"DATA",8925.1,1,"HEAD",1,1)
S:X?3N1P2N1P4N.E X=$TR(X,"-/","")
"DATA",8925.1,1,"HEAD",2,0)
DATE OF ADMISSION^ADMISSION DATE^.07^TIUADT^03/30/93^1^1
"DATA",8925.1,1,"HEAD",4,0)
DICTATED BY^DICTATING PROVIDER^1202^^DOOGEY P. HOWSER, M.D.^1^1
"DATA",8925.1,1,"HEAD",4,1)
S X=$$INAME^TIULS(X)
"DATA",8925.1,1,"HEAD",5,0)
DICTATION DATE^DICTATION DATE^1307^TIUDICDT^04/03/93^0^1
"DATA",8925.1,1,"HEAD",6,0)
ATTENDING PHYSICIAN^ATTENDING PHYSICIAN^1209^^MARCUS C. WELBY, M.D.^1^1
"DATA",8925.1,1,"HEAD",6,1)
S X=$$INAME^TIULS(X)
"DATA",8925.1,1,"HEAD",7,0)
TRANSCRIPTIONIST^TRANSCRIPTIONIST ID^1302^^T1212^0
"DATA",8925.1,1,"HEAD",8,0)
URGENCY^STAT OR ROUTINE^.09^^PRIORITY^1^1
"DATA",8925.1,3,0)
PROGRESS NOTES^PN^Progress Notes^CL^^55^11^^^^^^1
"DATA",8925.1,3,1)
8925^1^2;TEXT
"DATA",8925.1,3,3)
^1^
"DATA",8925.1,3,4)
D LOOKUP^TIUPUTPN
"DATA",8925.1,3,4.5)
D FOLLOWUP^TIUPUTPN(TIUREC("#"))
"DATA",8925.1,3,4.8)
D GETPN^TIUCHLP
"DATA",8925.1,3,5)
[TIU ENTER/EDIT PROGRESS NOTE]
"DATA",8925.1,3,6)
D ENTRY^TIUPRPN
"DATA",8925.1,3,6.1)
Progress Notes^Vice SF 509^2^0
"DATA",8925.1,3,7)
D ENPN^TIUVSIT(.TIU,.DFN,1)
"DATA",8925.1,3,8)
S TIUASK=$$CHEKPN^TIULD(.TIU,.TIUBY)
"DATA",8925.1,3,10,0)
^8925.14P^27^7
"DATA",8925.1,3,10,19,0)
27^1^1^Advance Directive
"DATA",8925.1,3,10,21,0)
23^5^5^Historical Titles
"DATA",8925.1,3,10,22,0)
30^3^3^Crisis Note
"DATA",8925.1,3,10,23,0)
31^4^4^Clinical Warning
"DATA",8925.1,3,10,24,0)
25^2^2^Adv React/Allergy
"DATA",8925.1,3,10,27,0)
39^6^6^Addiction Severity
"DATA",8925.1,3,99)
57149,39953
"DATA",8925.1,3,"DIALOG",0)
^8925.114^6^6
"DATA",8925.1,3,"DIALOG",1,0)
PATIENT NAME^Patient^1^.02^1
"DATA",8925.1,3,"DIALOG",2,0)
PATIENT LOCATION^HOSPITAL LOCATION^2^1205^^1
"DATA",8925.1,3,"DIALOG",2,"W")
2^95
"DATA",8925.1,3,"DIALOG",3,0)
DATE/TIME OF NOTE^^3^1301^1^1
"DATA",8925.1,3,"DIALOG",3,"W")
3^13
"DATA",8925.1,3,"DIALOG",3,"W7")
S Y="Now"
"DATA",8925.1,3,"DIALOG",4,0)
AUTHOR OF NOTE^^4^1202^1^0
"DATA",8925.1,3,"DIALOG",4,1)
S X=+$G(DUZ)
"DATA",8925.1,3,"DIALOG",5,0)
SUBJECT^Subject of Note^5^1701^0
"DATA",8925.1,3,"DIALOG",6,0)
NOTE TEXT^TEXT OF NOTE^6^2
"DATA",8925.1,3,"DIALOG",6,"W")
4^66
"DATA",8925.1,3,"HEAD",0)
^8925.12A^11^11
"DATA",8925.1,3,"HEAD",1,0)
TITLE^TITLE OF NOTE^.01^TIUTITLE^ADTC (AMB DIAG TREAT CENTER) DISCHARGE SUMMARY NOTE^1^1
"DATA",8925.1,3,"HEAD",2,0)
SSN^PATIENT SSN^.02^TIUSSN^***********^1^1
"DATA",8925.1,3,"HEAD",2,1)
S X=$TR(X,"-/","")
"DATA",8925.1,3,"HEAD",3,0)
VISIT/EVENT DATE^VISIT/EVENT DATE^.07^TIUVDT^3/2/96@14:00^1^1
"DATA",8925.1,3,"HEAD",4,0)
AUTHOR^DICTATING PROVIDER^1202^^HOWSER,DOOGEY^1^1
"DATA",8925.1,3,"HEAD",5,0)
TRANSCRIBER^TRANSCRIBER^1302^^K5420^0^0
"DATA",8925.1,3,"HEAD",6,0)
DATE/TIME OF DICT^DICTATION DATE/TIME^1301^TIUDDT^4/4/96^0^1
"DATA",8925.1,3,"HEAD",7,0)
LOCATION^PATIENT LOCATION^1205^TIULOC^MEDICAL-CONSULT 6200^1^1
"DATA",8925.1,3,"HEAD",8,0)
EXPECTED COSIGNER^EXPECTED COSIGNER^1208^^WELBY,MARCUS^1^0
"DATA",8925.1,3,"HEAD",9,0)
date of admis
"DATA",8925.1,3,"HEAD",10,0)
DATE OF ADMISSION^ADMISSION DATE^.07^^3/30/97^1^1
"DATA",8925.1,3,"HEAD",11,0)
URGENCY
"DATA",8925.1,8,0)
ADVANCE DIRECTIVE^ADIR^ADVANCE DIRECTIVE^DOC^^55^11^^^^^^1
"DATA",8925.1,8,3)
^1
"DATA",8925.1,8,99)
56792,49217
"DATA",8925.1,10,0)
GENERAL NOTE^GPN^General Note^DOC^^55^13^^^^^^0
"DATA",8925.1,10,3)
^1^0
"DATA",8925.1,10,10,0)
^8925.14P^^0
"DATA",8925.1,10,99)
57041,46477
"DATA",8925.1,11,0)
ADMISSION ASSESSMENT^ADM^Admission Assessment^DOC^^55^13^^^^^^0
"DATA",8925.1,11,3)
^1^0
"DATA",8925.1,11,10,0)
^8925.14P^^0
"DATA",8925.1,11,99)
56914,42440
"DATA",8925.1,12,0)
OBJECTIVE^OBJ^OBJECTIVE^CO^^55^13^^^1^^^1
"DATA",8925.1,12,3)
^1
"DATA",8925.1,12,99)
56792,40402
"DATA",8925.1,12,"DFLT",0)
^^2^2^2970304^
"DATA",8925.1,12,"DFLT",1,0)
 
"DATA",8925.1,12,"DFLT",2,0)
 
"DATA",8925.1,13,0)
ASSESSMENT^ASMT^ASSESSMENT^CO^^55^13^^^1^^^1
"DATA",8925.1,13,3)
^1
"DATA",8925.1,13,99)
56792,40403
"DATA",8925.1,13,"DFLT",0)
^^2^2^2970304^
"DATA",8925.1,13,"DFLT",1,0)
 
"DATA",8925.1,13,"DFLT",2,0)
 
"DATA",8925.1,14,0)
PLAN^PLAN^PLAN^CO^^55^13^^^1^^^1
"DATA",8925.1,14,3)
^1
"DATA",8925.1,14,99)
56792,40404
"DATA",8925.1,14,"DFLT",0)
^^2^2^2961008^^^
"DATA",8925.1,14,"DFLT",1,0)
 
"DATA",8925.1,14,"DFLT",2,0)
 
"DATA",8925.1,15,0)
CLINICAL WARNING^CW^CLINICAL WARNING^DOC^^55^11^^^^^^1
"DATA",8925.1,15,3)
^1
"DATA",8925.1,15,99)
56792,49387
"DATA",8925.1,17,0)
ADVERSE REACTION/ALLERGY^GADR^Adverse React/Allergy^DOC^^55^11^^^^^^1
"DATA",8925.1,17,3)
^1^0
"DATA",8925.1,17,99)
56993,62295
"DATA",8925.1,19,0)
FINAL DISCHARGE NOTE^FDN^Final Discharge Note^DOC^^55^13^^^^^^0
"DATA",8925.1,19,3)
^1^0
"DATA",8925.1,19,5)
Final Discharge Note
"DATA",8925.1,19,10,0)
^8925.14P^^0
"DATA",8925.1,19,99)
56914,42802
"DATA",8925.1,20,0)
CRISIS NOTE^CN^CRISIS NOTE^DOC^^55^11^^^^^^1
"DATA",8925.1,20,3)
^1
"DATA",8925.1,20,99)
56792,49505
"DATA",8925.1,21,0)
SOAP - GENERAL NOTE^SOAP^SOAP - GENERAL NOTE^DOC^^55^13^^^^^^0
"DATA",8925.1,21,3)
^1
"DATA",8925.1,21,10,0)
^8925.14P^3^4
"DATA",8925.1,21,10,1,0)
28^^1^Subjective
"DATA",8925.1,21,10,2,0)
12^^2^Objective
"DATA",8925.1,21,10,3,0)
13^^3^Assessment
"DATA",8925.1,21,10,4,0)
14^^4^Plan
"DATA",8925.1,21,99)
56993,48305
"DATA",8925.1,23,0)
HISTORICAL TITLES^^HISTORICAL TITLES^DC^^55^13^^^^^^0^
"DATA",8925.1,23,3)
^1^
"DATA",8925.1,23,10,0)
^8925.14P^4^4
"DATA",8925.1,23,10,1,0)
11^^1^Admission Assessment
"DATA",8925.1,23,10,2,0)
19^^2^Final Discharge Note
"DATA",8925.1,23,10,3,0)
10^^3^General Note
"DATA",8925.1,23,10,4,0)
21^^4^SOAP - General Note
"DATA",8925.1,23,99)
57129,56292
"DATA",8925.1,25,0)
ADVERSE REACTION/ALLERGY^^ADVERSE REACTION/ALLERGY^DC^^55^11^^^^^^1^A
"DATA",8925.1,25,3)
^1
"DATA",8925.1,25,10,0)
^8925.14P^1^1
"DATA",8925.1,25,10,1,0)
17^^^Adv React/Allergy
"DATA",8925.1,25,99)
57129,55302
"DATA",8925.1,27,0)
ADVANCE DIRECTIVE^AD^Advance Directive^DC^^55^11^^^^^^1^D
"DATA",8925.1,27,3)
^1
"DATA",8925.1,27,10,0)
^8925.14P^1^1
"DATA",8925.1,27,10,1,0)
8^AD^^Advance Directive
"DATA",8925.1,27,99)
57129,56292
"DATA",8925.1,28,0)
SUBJECTIVE^^SUBJECTIVE^CO^^55^13^^^1^^^1
"DATA",8925.1,28,3)
^1
"DATA",8925.1,28,99)
56792,52408
"DATA",8925.1,28,"DFLT",0)
^^2^2^2970304^
"DATA",8925.1,28,"DFLT",1,0)
 
"DATA",8925.1,28,"DFLT",2,0)
 
"DATA",8925.1,30,0)
CRISIS NOTE^CN^Crisis Note^DC^^55^11^^^^^^1^C
"DATA",8925.1,30,3)
^1
"DATA",8925.1,30,10,0)
^8925.14P^1^1
"DATA",8925.1,30,10,1,0)
20^C^^Crisis Note
"DATA",8925.1,30,99)
57129,56292
"DATA",8925.1,31,0)
CLINICAL WARNING^CW^Clinical Warning^DC^^55^11^^^^^^1^W
"DATA",8925.1,31,3)
^1
"DATA",8925.1,31,10,0)
^8925.14P^1^1
"DATA",8925.1,31,10,1,0)
15^W^^Clinical Warning
"DATA",8925.1,31,99)
57129,56292
"DATA",8925.1,38,0)
CLINICAL DOCUMENTS^CD^CLINICAL DOCUMENTS^CL^^55^11^^^^^^1
"DATA",8925.1,38,3)
^1^0
"DATA",8925.1,38,6.1)
^^^1
"DATA",8925.1,38,10,0)
^8925.14P^30^3
"DATA",8925.1,38,10,3,0)
3^2^2^Progress Notes
"DATA",8925.1,38,10,28,0)
512^3^3^Addendum
"DATA",8925.1,38,10,30,0)
244^1^1^Discharge Summaries
"DATA",8925.1,38,99)
57131,50459
"DATA",8925.1,39,0)
ADDICTION SEVERITY INDEX^^ADDICTION SEVERITY INDEX^DC^^55^11^^^^^^1
"DATA",8925.1,39,3)
^1
"DATA",8925.1,39,10,0)
^8925.14P^1^1
"DATA",8925.1,39,10,1,0)
40^^^ASI-Addiction Index
"DATA",8925.1,39,99)
57140,49396
"DATA",8925.1,40,0)
ASI-ADDICTION SEVERITY INDEX^^ASI-ADDICTION SEVERITY INDEX^DOC^^55^11^^^^^^1
"DATA",8925.1,40,3)
^1
"DATA",8925.1,40,99)
57140,44742
"DATA",8925.1,73,0)
PATIENT AGE^AGE^PATIENT AGE^O^^55^11
"DATA",8925.1,73,3)
^1
"DATA",8925.1,73,9)
S X=$$AGE^TIULO(DFN)
"DATA",8925.1,73,99)
57077,80666
"DATA",8925.1,74,0)
PATIENT SEX^SEX^PATIENT SEX^O^^55^11
"DATA",8925.1,74,3)
^1
"DATA",8925.1,74,9)
S X=$$SEX^TIULO(DFN)
"DATA",8925.1,74,99)
57055,39184
"DATA",8925.1,75,0)
PATIENT RACE^RACE^PATIENT RACE^O^^55^11
"DATA",8925.1,75,3)
^1
"DATA",8925.1,75,9)
S X=$$RACE^TIULO(DFN)
"DATA",8925.1,75,99)
57055,39184
"DATA",8925.1,76,0)
PATIENT NAME^NAME^PATIENT NAME^O^^55^11
"DATA",8925.1,76,3)
^1
"DATA",8925.1,76,9)
S X=$$NAME^TIULO(DFN)
"DATA",8925.1,76,99)
57077,77922
"DATA",8925.1,77,0)
PATIENT SSN^SSN^PATIENT SSN^O^^55^11
"DATA",8925.1,77,3)
^1
"DATA",8925.1,77,9)
S X=$$SSN^TIULO(DFN)
"DATA",8925.1,77,99)
57055,39184
"DATA",8925.1,78,0)
PATIENT DATE OF BIRTH^DOB^PATIENT DOB^O^^55^11
"DATA",8925.1,78,3)
^1
"DATA",8925.1,78,9)
S X=$$DOB^TIULO(DFN)
"DATA",8925.1,78,99)
57055,39184
"DATA",8925.1,79,0)
PATIENT DATE OF DEATH^DOD^PATIENT DOD^O^^55^11
"DATA",8925.1,79,3)
^1
"DATA",8925.1,79,9)
S X=$$DOD^TIULO(DFN)
"DATA",8925.1,79,99)
57055,39184
"DATA",8925.1,81,0)
ADDENDUM^ADD^Addendum^DOC^^55^11^^^^^^1
"DATA",8925.1,81,3)
^1
"DATA",8925.1,81,99)
56777,28695
"DATA",8925.1,82,0)
ALLERGIES/ADR^ADR^ALLERGIES/ADV RXNS^O^^55^11^^^^^^
"DATA",8925.1,82,3)
^1
"DATA",8925.1,82,9)
S X=$$MAIN^TIULADR(DFN,1,"^TMP(""TIULADR"",$J)",0)
"DATA",8925.1,82,99)
57055,39184
"DATA",8925.1,244,0)
DISCHARGE SUMMARY^^Discharge Summary^CL^^55^11^^^^^^1
"DATA",8925.1,244,1)
8925
"DATA",8925.1,244,3)
^1
"DATA",8925.1,244,4)
D LOOKUP^TIUPUTU
"DATA",8925.1,244,5)
[TIU ENTER/EDIT DS]
"DATA",8925.1,244,6)
D ENTRY^TIUPRDS
"DATA",8925.1,244,6.1)
^^^0
"DATA",8925.1,244,7)
D MAIN^TIUMOVE(.TIU,DFN)
"DATA",8925.1,244,8)
S TIUASK=$$CHEKDS^TIULD(.TIU)
"DATA",8925.1,244,10,0)
^8925.14P^1^1
"DATA",8925.1,244,10,1,0)
569^1^1^Discharge Summaries
"DATA",8925.1,244,99)
57129,56292
"DATA",8925.1,423,0)
PATIENT HEIGHT^HT^PATIENT HEIGHT^O^^55^11
"DATA",8925.1,423,3)
^1
"DATA",8925.1,423,9)
S X=$$HEIGHT^TIULO(+$G(DFN))
"DATA",8925.1,423,99)
57055,39184
"DATA",8925.1,424,0)
PATIENT WEIGHT^WT^PATIENT WEIGHT^O^^55^11
"DATA",8925.1,424,3)
^1
"DATA",8925.1,424,9)
S X=$$WEIGHT^TIULO(+$G(DFN))
"DATA",8925.1,424,99)
57055,39184
"DATA",8925.1,486,0)
TEMPERATURE^TEMP^TEMPERATURE^O^^55^11
"DATA",8925.1,486,3)
^1
"DATA",8925.1,486,9)
S X=$$TEMP^TIULO(+$G(DFN))
"DATA",8925.1,486,99)
57055,39185
"DATA",8925.1,487,0)
PULSE^PULS^PULSE^O^^55^11
"DATA",8925.1,487,3)
^1
"DATA",8925.1,487,9)
S X=$$PULSE^TIULO(+$G(DFN))
"DATA",8925.1,487,99)
57055,39185
"DATA",8925.1,488,0)
RESPIRATION^RESP^RESPIRATION^O^^55^11
"DATA",8925.1,488,3)
^1
"DATA",8925.1,488,9)
S X=$$RESP^TIULO(+$G(DFN))
"DATA",8925.1,488,99)
57055,39185
"DATA",8925.1,489,0)
BLOOD PRESSURE^BP^BLOOD PRESSURE^O^^55^11
"DATA",8925.1,489,3)
^1
"DATA",8925.1,489,9)
S X=$$BP^TIULO(+$G(DFN))
"DATA",8925.1,489,99)
57055,39185
"DATA",8925.1,512,0)
ADDENDUM^ad^Addendum^DC^^55^11^^^^^^1
"DATA",8925.1,512,3)
^1
"DATA",8925.1,512,6.1)
^^^0
"DATA",8925.1,512,10,0)
^8925.14P^1^1
"DATA",8925.1,512,10,1,0)
81^1^1^Addendum
"DATA",8925.1,512,99)
57129,56292
"DATA",8925.1,540,0)
VISIT DATE^VSIT^VISIT DATE^O^^55^11
"DATA",8925.1,540,3)
^1
"DATA",8925.1,540,9)
S X=$$VISDATE^TIULO1(.TIU)
"DATA",8925.1,540,99)
57055,39185
"DATA",8925.1,566,0)
TODAY'S DATE^DT^TODAY'S DATE^O^^55^11
"DATA",8925.1,566,3)
^1
"DATA",8925.1,566,9)
S X=$$TODAY^TIULO()
"DATA",8925.1,566,99)
57055,39185
"DATA",8925.1,567,0)
NOW^DTTM^NOW^O^^55^11
"DATA",8925.1,567,3)
^1
"DATA",8925.1,567,9)
S X=$$NOW^TIULO
"DATA",8925.1,567,99)
57055,39185
"DATA",8925.1,568,0)
CURRENT ADMISSION^CADM^CURRENT ADMISSION^O^^55^11
"DATA",8925.1,568,3)
^1
"DATA",8925.1,568,9)
S X=$$ADM^TIULO(DFN)
"DATA",8925.1,568,99)
57055,39185
"DATA",8925.1,569,0)
DISCHARGE SUMMARIES^DS^DISCHARGE SUMMARY^DC^^55^11^^^^^^1
"DATA",8925.1,569,1)
8925^1^2;TEXT
"DATA",8925.1,569,3)
^1
"DATA",8925.1,569,10,0)
^8925.14P^1^1
"DATA",8925.1,569,10,1,0)
1^1^1^Discharge Summary
"DATA",8925.1,569,99)
57129,56292
"DATA",8925.1,569,"HEAD",0)
^8925.12A^1^1
"DATA",8925.1,569,"HEAD",1,0)
PATIENT NAME^NAME^.02^TIUNAME^DOE,JOHN^1^1
"DATA",8925.1,595,0)
ACTIVE MEDICATIONS^AMED^ACTIVE MEDICATIONS^O^^55^11^^^^^^0
"DATA",8925.1,595,3)
^1
"DATA",8925.1,595,9)
S X=$$MAIN^TIULMED(DFN,"^TMP(""TIUMED"",$J)")
"DATA",8925.1,595,99)
57055,39185
"DATA",8925.3,1,0)
RECORD HEADER SIGNAL MISSING^No RECORD HEADER SIGNAL is defined in file #8925.99.^I
"DATA",8925.3,2,0)
MAJOR DELIMITER UNDEFINED^No MAJOR DELIMITER is defined in file #8925.99.^I
"DATA",8925.3,3,0)
INVALID REPORT TYPE^Invalid Report Type encountered. ^I
"DATA",8925.3,4,0)
TARGET FILE UNDEFINED^The TARGET FILE is not defined for: ^I
"DATA",8925.3,5,0)
TARGET TEXT FIELD UNDEFINED^The TARGET TEXT FIELD is not defined for: ^I
"DATA",8925.3,6,0)
LOOKUP FAILED^ Record could not be found or created.^I
"DATA",8925.3,7,0)
BEGIN TEXT SIGNAL MISSING^No BEGIN REPORT TEXT SIGNAL is defined in file 8925.99 ^I
"DATA",8925.6,1,0)
UNDICTATED^d^5
"DATA",8925.6,1,1,0)
^^3^3^2940319^
"DATA",8925.6,1,1,1,0)
The document is required, and a record has been created in anticipation of
"DATA",8925.6,1,1,2,0)
dictation and transcription, but the system has not yet been informed of
"DATA",8925.6,1,1,3,0)
its dictation.
"DATA",8925.6,2,0)
UNTRANSCRIBED^t^10
"DATA",8925.6,2,1,0)
^^3^3^2940319^
"DATA",8925.6,2,1,1,0)
The document is required, and the system has been informed of its
"DATA",8925.6,2,1,2,0)
dictation, but the transcription has not yet been entered, or received by
"DATA",8925.6,2,1,3,0)
upload.
"DATA",8925.6,3,0)
UNRELEASED^r^15
"DATA",8925.6,3,1,0)
^^3^3^2940319^
"DATA",8925.6,3,1,1,0)
The document is in the process of being entered into the system, but has
"DATA",8925.6,3,1,2,0)
not yet been released by the originator (i.e., the person entering the
"DATA",8925.6,3,1,3,0)
text directly on line).
"DATA",8925.6,4,0)
UNVERIFIED^v^20
"DATA",8925.6,4,1,0)
^^2^2^2940319^
"DATA",8925.6,4,1,1,0)
The document has been released or uploaded, but an intervening
"DATA",8925.6,4,1,2,0)
verification step must be completed before the document may be displayed.
"DATA",8925.6,5,0)
UNSIGNED^$^25
"DATA",8925.6,5,1,0)
^^2^2^2940319^
"DATA",8925.6,5,1,1,0)
The document is on line, in a draft state, but the first-line (author's)
"DATA",8925.6,5,1,2,0)
signature has not yet been obtained.
"DATA",8925.6,6,0)
UNCOSIGNED^u^30
"DATA",8925.6,6,1,0)
^^2^2^2940319^
"DATA",8925.6,6,1,1,0)
The document is complete, with the exception of cosignature (i.e., by the
"DATA",8925.6,6,1,2,0)
supervisor).
"DATA",8925.6,7,0)
COMPLETED^c^35
"DATA",8925.6,7,1,0)
^^2^2^2940319^
"DATA",8925.6,7,1,1,0)
The document has acquired all necessary signatures, and is legally
"DATA",8925.6,7,1,2,0)
authenticated.
"DATA",8925.6,8,0)
AMENDED^a^45
"DATA",8925.6,8,1,0)
^^2^2^2950417^^^
"DATA",8925.6,8,1,1,0)
The document has been completed, and a privacy act issue has required its
"DATA",8925.6,8,1,2,0)
amendment.
"DATA",8925.6,9,0)
PURGED^p^50
"DATA",8925.6,9,1,0)
^^5^5^2940319^
"DATA",8925.6,9,1,1,0)
The grace period for purge has expired, and the report text has been
"DATA",8925.6,9,1,2,0)
removed from the on line record to recover disk space.
"DATA",8925.6,9,1,3,0)
 
"DATA",8925.6,9,1,4,0)
NOTE:  only completed documents may be purged.  It is assumed that the
"DATA",8925.6,9,1,5,0)
chart copy of the document has been retained for archival purposes.
"DATA",8925.6,10,0)
TEST^t^100^DEF
"DATA",8925.6,10,1,0)
^^9^9^2950927^
"DATA",8925.6,10,1,1,0)
This Status applies to Document Definitions only.
"DATA",8925.6,10,1,2,0)
 
"DATA",8925.6,10,1,3,0)
TEST Status is intended for Document Definitions when they are being
"DATA",8925.6,10,1,4,0)
tested, BEFORE being used to define actual clinical documents on real
"DATA",8925.6,10,1,5,0)
patients.
"DATA",8925.6,10,1,6,0)
 
"DATA",8925.6,10,1,7,0)
A Document Definition of TEST Status is available only to Managers and to
"DATA",8925.6,10,1,8,0)
its owner for use in entering documents.  It is not GENERALLY available
"DATA",8925.6,10,1,9,0)
for entering documents.
"DATA",8925.6,11,0)
ACTIVE^a^105^DEF
"DATA",8925.6,11,1,0)
^^13^13^2950927^
"DATA",8925.6,11,1,1,0)
This Status applies to Document Definitions only.
"DATA",8925.6,11,1,2,0)
 
"DATA",8925.6,11,1,3,0)
ACTIVE Status is intended for Document Definitions when they have been
"DATA",8925.6,11,1,4,0)
tested and are ready for use defining actual clinical documents on real
"DATA",8925.6,11,1,5,0)
patients.
"DATA",8925.6,11,1,6,0)
 
"DATA",8925.6,11,1,7,0)
A Document Definition of ACTIVE Status is available for use by ANYONE with
"DATA",8925.6,11,1,8,0)
menu access for entering documents (unless document entry for this
"DATA",8925.6,11,1,9,0)
document definition is restricted by parameters to certain users).
"DATA",8925.6,11,1,10,0)
 
"DATA",8925.6,11,1,11,0)
ACTIVE Status determines whether a Document Definition MAY be used for
"DATA",8925.6,11,1,12,0)
actual documents.  It does not determine whether it IS used for actual
"DATA",8925.6,11,1,13,0)
documents.
"DATA",8925.6,13,0)
INACTIVE^i^105^DEF
"DATA",8925.6,13,1,0)
^^15^15^2950927^
"DATA",8925.6,13,1,1,0)
This Status applies to Document Definitions only.
"DATA",8925.6,13,1,2,0)
 
"DATA",8925.6,13,1,3,0)
INACTIVE Status is intended for Document Definitions which are not yet
"DATA",8925.6,13,1,4,0)
ready to be tested, which are being edited at the moment, or which are no
"DATA",8925.6,13,1,5,0)
longer being used for entering documents but may need to be kept to
"DATA",8925.6,13,1,6,0)
display/print/etc. existing documents which use them as their definition.
"DATA",8925.6,13,1,7,0)
 
"DATA",8925.6,13,1,8,0)
Document Definitions newly created through the Document Definition Utility
"DATA",8925.6,13,1,9,0)
(DDU) are automatically assigned Status INACTIVE.
"DATA",8925.6,13,1,10,0)
 
"DATA",8925.6,13,1,11,0)
A Document Definition of INACTIVE Status is not available to ANYONE for
"DATA",8925.6,13,1,12,0)
entering documents.
"DATA",8925.6,13,1,13,0)
 
"DATA",8925.6,13,1,14,0)
Before permitting a change from INACTIVE to TEST or ACTIVE, DDU
"DATA",8925.6,13,1,15,0)
automatically checks for gross errors/rudimentary completeness.
"DATA",8925.6,14,0)
DELETED^d^47^DOCMT
"DATA",8925.6,14,1,0)
^^3^3^2950417^^
"DATA",8925.6,14,1,1,0)
This status applies to documents which have been deleted per the Privacy
"DATA",8925.6,14,1,2,0)
Act, leaving the audit trail information intact, while deleting the body of 
"DATA",8925.6,14,1,3,0)
the document, and its addenda.
"DATA",8925.8,1,0)
ALL CATEGORIES^ALL^All Categories
"DATA",8925.8,1,2)
S Y="ANY"
"DATA",8925.8,1,99)
57126,45240
"DATA",8925.8,2,0)
AUTHOR^AAU^Author^200
"DATA",8925.8,3,0)
EXPECTED COSIGNER^ASUP^Expected Cosigner^200
"DATA",8925.8,3,1)
S DIC("S")="I +$$ISA^USRLM(+$G(Y),""PROVIDER"")"
"DATA",8925.8,4,0)
SUBJECT^ASUB^Subject
"DATA",8925.8,4,2)
S Y=$$ASKSUBJ^TIULA1
"DATA",8925.8,5,0)
SERVICE^ASVC^Service^49
"DATA",8925.8,6,0)
TREATING SPECIALTY^ATS^Treating Specialty^45.7
"DATA",8925.8,7,0)
TRANSCRIPTIONIST^ATC^Transcriptionist^200
"DATA",8925.8,8,0)
PATIENT^APT^Patient^2
"DATA",8925.8,9,0)
VISIT^AVSIT^Visit
"DATA",8925.8,9,2)
S Y=$$GETVSIT^TIULA1
"DATA",8925.8,10,0)
PROBLEM^APRB^Problem^
"DATA",8925.8,10,2)
S Y=$$GETTERM^TIULA1
"DATA",8925.8,11,0)
HOSPITAL LOCATION^ALOC^Hospital Location^44
"DATA",8925.8,12,0)
TITLE^ALL^Title^8925.1
"DATA",8925.8,12,2)
D TITLE^TIULA3
"DATA",8925.95,1,0)
244^1^2^1^^^^0^0^0^^
"DATA",8925.95,1,1,0)
^8925.951P^^0
"DATA",8925.95,1,2,0)
^8925.952P^^0
"DATA",8925.95,1,4,0)
^8925.954P^^0
"DATA",8925.95,1,5,0)
^8925.955P^^0
"DATA",8925.95,2,0)
3^0^2^1^^^^1^1^1^^^^0
"DATA",8925.95,2,2,0)
^8925.952P^^0
"DATA",8925.95,2,4,0)
^8925.954P^^0
"DATA",8925.95,2,5,0)
^8925.955P^1^1
"DATA",8925.95,2,5,1,0)
471
"DATA",8925.97,1,0)
PN^2970620.121519^^^^^
"DATA",8925.97,1,2)
^^
"DATA",8925.97,2,0)
DS
"FIA",8925)
TIU DOCUMENT
"FIA",8925,0)
^TIU(8925,
"FIA",8925,0,0)
8925IP
"FIA",8925,0,1)
y^y^f^^^^n
"FIA",8925,0,10)

"FIA",8925,0,11)

"FIA",8925,0,"RLRO")

"FIA",8925,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925,8925)
0
"FIA",8925,8925.02)
0
"FIA",8925,8925.03)
0
"FIA",8925.1)
TIU DOCUMENT DEFINITION
"FIA",8925.1,0)
^TIU(8925.1,
"FIA",8925.1,0,0)
8925.1sI
"FIA",8925.1,0,1)
y^y^f^^n^TIU EXPORTED DOCUMENT DEFS^y^a^n
"FIA",8925.1,0,10)

"FIA",8925.1,0,11)

"FIA",8925.1,0,"RLRO")
^DIBT(365,1)
"FIA",8925.1,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.1,8925.1)
0
"FIA",8925.1,8925.11)
0
"FIA",8925.1,8925.111)
0
"FIA",8925.1,8925.112)
0
"FIA",8925.1,8925.113)
0
"FIA",8925.1,8925.114)
0
"FIA",8925.1,8925.12)
0
"FIA",8925.1,8925.13)
0
"FIA",8925.1,8925.14)
0
"FIA",8925.2)
TIU UPLOAD BUFFER
"FIA",8925.2,0)
^TIU(8925.2,
"FIA",8925.2,0,0)
8925.2
"FIA",8925.2,0,1)
y^y^f^^^^n
"FIA",8925.2,0,10)

"FIA",8925.2,0,11)

"FIA",8925.2,0,"RLRO")

"FIA",8925.2,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.2,8925.2)
0
"FIA",8925.2,8925.21)
0
"FIA",8925.2,8925.22)
0
"FIA",8925.3)
TIU UPLOAD ERROR DEFINITION
"FIA",8925.3,0)
^TIU(8925.3,
"FIA",8925.3,0,0)
8925.3
"FIA",8925.3,0,1)
y^y^f^^n^^y^o^n
"FIA",8925.3,0,10)

"FIA",8925.3,0,11)

"FIA",8925.3,0,"RLRO")

"FIA",8925.3,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.3,8925.3)
0
"FIA",8925.4)
TIU UPLOAD LOG
"FIA",8925.4,0)
^TIU(8925.4,
"FIA",8925.4,0,0)
8925.4D
"FIA",8925.4,0,1)
y^y^f^^^^n
"FIA",8925.4,0,10)

"FIA",8925.4,0,11)

"FIA",8925.4,0,"RLRO")

"FIA",8925.4,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.4,8925.4)
0
"FIA",8925.4,8925.41)
0
"FIA",8925.4,8925.42)
0
"FIA",8925.5)
TIU AUDIT TRAIL
"FIA",8925.5,0)
^TIU(8925.5,
"FIA",8925.5,0,0)
8925.5P
"FIA",8925.5,0,1)
y^y^f^^^^n
"FIA",8925.5,0,10)

"FIA",8925.5,0,11)

"FIA",8925.5,0,"RLRO")

"FIA",8925.5,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.5,8925.5)
0
"FIA",8925.5,8925.51)
0
"FIA",8925.6)
TIU STATUS
"FIA",8925.6,0)
^TIU(8925.6,
"FIA",8925.6,0,0)
8925.6
"FIA",8925.6,0,1)
y^y^f^^n^^y^o^n
"FIA",8925.6,0,10)

"FIA",8925.6,0,11)

"FIA",8925.6,0,"RLRO")

"FIA",8925.6,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.6,8925.6)
0
"FIA",8925.6,8925.61)
0
"FIA",8925.7)
TIU MULTIPLE SIGNATURE
"FIA",8925.7,0)
^TIU(8925.7,
"FIA",8925.7,0,0)
8925.7PI
"FIA",8925.7,0,1)
y^y^f^^^^n
"FIA",8925.7,0,10)

"FIA",8925.7,0,11)

"FIA",8925.7,0,"RLRO")

"FIA",8925.7,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.7,8925.7)
0
"FIA",8925.8)
TIU SEARCH CATEGORIES
"FIA",8925.8,0)
^TIU(8925.8,
"FIA",8925.8,0,0)
8925.8
"FIA",8925.8,0,1)
y^y^f^^n^^y^o^n
"FIA",8925.8,0,10)

"FIA",8925.8,0,11)

"FIA",8925.8,0,"RLRO")

"FIA",8925.8,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.8,8925.8)
0
"FIA",8925.9)
TIU PROBLEM LINK
"FIA",8925.9,0)
^TIU(8925.9,
"FIA",8925.9,0,0)
8925.9P
"FIA",8925.9,0,1)
y^y^f^^^^n
"FIA",8925.9,0,10)

"FIA",8925.9,0,11)

"FIA",8925.9,0,"RLRO")

"FIA",8925.9,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.9,8925.9)
0
"FIA",8925.91)
TIU EXTERNAL DATA LINK
"FIA",8925.91,0)
^TIU(8925.91,
"FIA",8925.91,0,0)
8925.91P
"FIA",8925.91,0,1)
y^y^f^^^^n
"FIA",8925.91,0,10)

"FIA",8925.91,0,11)

"FIA",8925.91,0,"RLRO")

"FIA",8925.91,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.91,8925.91)
0
"FIA",8925.93)
TIU PRINT PARAMETERS
"FIA",8925.93,0)
^TIU(8925.93,
"FIA",8925.93,0,0)
8925.93P
"FIA",8925.93,0,1)
y^y^f^^^^n
"FIA",8925.93,0,10)

"FIA",8925.93,0,11)

"FIA",8925.93,0,"RLRO")

"FIA",8925.93,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.93,8925.93)
0
"FIA",8925.94)
TIU DIVISION PRINT PARAMETERS
"FIA",8925.94,0)
^TIU(8925.94,
"FIA",8925.94,0,0)
8925.94P
"FIA",8925.94,0,1)
y^y^f^^^^n
"FIA",8925.94,0,10)

"FIA",8925.94,0,11)

"FIA",8925.94,0,"RLRO")

"FIA",8925.94,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.94,8925.94)
0
"FIA",8925.95)
TIU DOCUMENT PARAMETERS
"FIA",8925.95,0)
^TIU(8925.95,
"FIA",8925.95,0,0)
8925.95P
"FIA",8925.95,0,1)
y^y^f^^n^^y^a^n
"FIA",8925.95,0,10)

"FIA",8925.95,0,11)

"FIA",8925.95,0,"RLRO")

"FIA",8925.95,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.95,8925.95)
0
"FIA",8925.95,8925.951)
0
"FIA",8925.95,8925.952)
0
"FIA",8925.95,8925.954)
0
"FIA",8925.95,8925.955)
0
"FIA",8925.97)
TIU CONVERSIONS
"FIA",8925.97,0)
^TIU(8925.97,
"FIA",8925.97,0,0)
8925.97S
"FIA",8925.97,0,1)
y^y^f^^n^^y^a^n
"FIA",8925.97,0,10)

"FIA",8925.97,0,11)

"FIA",8925.97,0,"RLRO")

"FIA",8925.97,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.97,8925.97)
0
"FIA",8925.98)
TIU PERSONAL DOCUMENT TYPE LIST
"FIA",8925.98,0)
^TIU(8925.98,
"FIA",8925.98,0,0)
8925.98IP
"FIA",8925.98,0,1)
y^y^f^^^^n
"FIA",8925.98,0,10)

"FIA",8925.98,0,11)

"FIA",8925.98,0,"RLRO")

"FIA",8925.98,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.98,8925.98)
0
"FIA",8925.98,8925.9801)
0
"FIA",8925.99)
TIU PARAMETERS
"FIA",8925.99,0)
^TIU(8925.99,
"FIA",8925.99,0,0)
8925.99P
"FIA",8925.99,0,1)
y^y^f^^^^n
"FIA",8925.99,0,10)

"FIA",8925.99,0,11)

"FIA",8925.99,0,"RLRO")

"FIA",8925.99,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8925.99,8925.99)
0
"FIA",8925.99,8925.992)
0
"FIA",8926)
TIU PERSONAL PREFERENCES
"FIA",8926,0)
^TIU(8926,
"FIA",8926,0,0)
8926P
"FIA",8926,0,1)
y^y^f^^^^n
"FIA",8926,0,10)

"FIA",8926,0,11)

"FIA",8926,0,"RLRO")

"FIA",8926,0,"VR")
1.0^TEXT INTEGRATION UTILITIES
"FIA",8926,8926)
0
"FIA",8926,8926.01)
0
"INIT")
TIUPOST
"KRN",.4,669,-1)
0^2
"KRN",.4,669,0)
TIU PRINT REPORT BUFFER^2951011.162^^8925.2^^^2951012
"KRN",.4,669,"F",2)
1,.01;C1;S2;X~
"KRN",.4,669,"H")
@
"KRN",.4,669,"SUB")
1
"KRN",.4,671,-1)
0^5
"KRN",.4,671,0)
TIU RELEASED/UNVERIFIED PRINT^2960303.1214^^8925^^^2970602
"KRN",.4,671,"DCL","8925^.1")
&
"KRN",.4,671,"DXS",1,9.2)
S DIP(2)=$S($D(^TIU(8925,D0,12)):^(12),1:"") S X="LAST,FI MI",DIP(1)=X S X=$S('$D(^VA(200,+$P(DIP(2),U,2),0)):"",1:$P(^(0),U,1))
"KRN",.4,671,"DXS",2,"P")
priority
"KRN",.4,671,"DXS",2,"R")
routine
"KRN",.4,671,"F",1)
.02~-9000001,^AUPNPAT(^^S I(0,0)=D0 S DIP(1)=$S($D(^TIU(8925,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;".02:"~
"KRN",.4,671,"F",2)
-9000001,-2,^DPT(^^S I(100,0)=D0 S DIP(101)=$S($D(^AUPNPAT(D0,0)):^(0),1:"") S X=$P(DIP(101),U,1),X=X S D(0)=+X;Z;".01:"~-9000001,-2,.09;"SSN"~
"KRN",.4,671,"F",3)
S DIP(1)=$S($D(^TIU(8925,D0,0)):^(0),1:"") S X=$P(DIP(1),U,7) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3) W X K DIP;"ADM DATE";Z;"NUMDATE(EPISODE BEGIN DATE/TIME)"~
"KRN",.4,671,"F",4)
S DIP(1)=$S($D(^TIU(8925,D0,0)):^(0),1:"") S X=$P(DIP(1),U,8) S:X X=$E(X,4,5)_"/"_$E(X,6,7)_"/"_$E(X,2,3) W X K DIP;"DIS DATE";Z;"NUMDATE(EPISODE END DATE/TIME)"~
"KRN",.4,671,"F",5)
X DXS(1,9.2) S X1=DIP(1) X "S X=$$NAME^GMRDLIBS(X,X1)" W X K DIP;L15;"DICTATED BY";Z;"GMRD NAME FORMAT("LAST,FI MI",AUTHOR)"~.09~.1~.01;L8;""~
"KRN",.4,671,"H")
TEST
"KRN",.4,671,"IOM")
132
"KRN",.4,671,"LAST")

"KRN",.4,671,"ROU")
^TIUPREL
"KRN",.4,671,"ROUOLD")
TIUPREL
"KRN",.4,671,"STATS","S",1)
0
"KRN",.4,671,"T",93)
8^1^0^F^
"KRN",.4,672,-1)
0^1
"KRN",.4,672,0)
TIU PRINT AUTHOR STATS^2960506.1549^@^8925^^@^2961120
"KRN",.4,672,"DCL","8925^-1")
+
"KRN",.4,672,"DCL","8925^.1")
+
"KRN",.4,672,"DXS",1,9.2)
S DIP(2)=$S($D(^TIU(8925,D0,12)):^(12),1:"") S X="LAST,FI MI",DIP(1)=X S X=$S('$D(^VA(200,+$P(DIP(2),U,2),0)):"",1:$P(^(0),U,1))
"KRN",.4,672,"DXS",2,9)
X DXS(2,9.2) S DIP(101)=$S($D(^AUPNPAT(D0,0)):^(0),1:"") S X=$S('$D(^DPT(+$P(DIP(101),U,1),0)):"",1:$P(^(0),U,1)),X1=DIP(1) S X=$$NAME^TIULS(X,X1) S X=X S D0=I(0,0)
"KRN",.4,672,"DXS",2,9.2)
S I(0,0)=$S($D(D0):D0,1:""),DIP(2)=$S($D(^TIU(8925,D0,0)):^(0),1:"") S X="LAST,FI MI",DIP(1)=X,D0=$P(DIP(2),U,2) S:'$D(^AUPNPAT(+D0,0)) D0=-1
"KRN",.4,672,"DXS",3,9)
S DIP(3)=$S($D(^TIU(8925,D0,0)):^(0),1:""),DIP(1)=$S($D(^(13)):^(13),1:"") S X=$P(DIP(1),U,7),DIP(2)=X S X=$P(DIP(3),U,8),X1=DIP(2) D ^XUWORKDY
"KRN",.4,672,"DXS",4,9)
S DIP(1)=$S($D(^TIU(8925,D0,12)):^(12),1:""),DIP(3)=$S($D(^(13)):^(13),1:"") S X=$P(DIP(1),U,1),DIP(2)=X S X=$P(DIP(3),U,7),X1=DIP(2) D ^XUWORKDY
"KRN",.4,672,"DXS",5,9)
S DIP(3)=$S($D(^TIU(8925,D0,12)):^(12),1:""),DIP(1)=$S($D(^(15)):^(15),1:"") S X=$P(DIP(1),U,1),DIP(2)=X S X=$P(DIP(3),U,1),X1=DIP(2) D ^XUWORKDY
"KRN",.4,672,"DXS",6,9)
S DIP(1)=$S($D(^TIU(8925,D0,15)):^(15),1:"") S X=$P(DIP(1),U,7),DIP(2)=X S X=$P(DIP(1),U,1),X1=DIP(2) D ^XUWORKDY
"KRN",.4,672,"F",1)
X DXS(1,9.2) S X1=DIP(1) S X=$$NAME^TIULS(X,X1) W X K DIP;N;L15;"Author";Z;"TIU NAME FORMAT("LAST,FI MI",AUTHOR)"~.1;C17;R8;"Line Count"~
"KRN",.4,672,"F",2)
S DIP(1)=$S($D(^TIU(8925,D0,13)):^(13),1:"") S X=$P(DIP(1),U,1),X=$P(X,".",1) S Y=X D DT K DIP;L11;C28;"Ref Date";Z;"DATE(REFERENCE DATE)"~
"KRN",.4,672,"F",3)
X DXS(2,9) W X K DIP;L15;C42;"Patient";Z;"TIU NAME FORMAT("LAST,FI MI",PATIENT)"~
"KRN",.4,672,"F",4)
X DXS(3,9);C59;R3;"Disch-Dict";;;;;;;;;;;;;Z;"XUWORKDAY(DICTATION DATE,EPISODE END DATE/TIME)";+~
"KRN",.4,672,"F",5)
X DXS(4,9);C75;R3;"Dict-Transcr";;;;;;;;;;;;;Z;"XUWORKDAY(ENTRY DATE,DICTATION DATE)";+~
"KRN",.4,672,"F",6)
X DXS(5,9);C90;R3;"Transcr-Sign";;;;;;;;;;;;;Z;"XUWORKDAY(SIGNATURE DATE,ENTRY DATE)";+~
"KRN",.4,672,"F",7)
X DXS(6,9);C105;R3;"Sign-Cosign";;;;;;;;;;;;;Z;"XUWORKDAY(COSIGNATURE DATE,SIGNATURE DATE)";+~.01;C120;L8;X~
"KRN",.4,672,"H")
DOCUMENT LINE COUNT BY AUTHOR
"KRN",.4,672,"IOM")
132
"KRN",.4,672,"LAST")

"KRN",.4,672,"ROU")
^TIUSTA
"KRN",.4,672,"ROUOLD")
TIUSTA
"KRN",.4,672,"STATS","DITTO",1)

"KRN",.4,672,"STATS","N",2)
0
"KRN",.4,672,"STATS","N",3)
0
"KRN",.4,672,"STATS","N",4)
0
"KRN",.4,672,"STATS","N",5)
0
"KRN",.4,672,"STATS","N",6)
0
"KRN",.4,672,"STATS","S",2)
0
"KRN",.4,672,"STATS","S",3)
0
"KRN",.4,672,"STATS","S",4)
0
"KRN",.4,672,"STATS","S",5)
0
"KRN",.4,672,"STATS","S",6)
0
"KRN",.4,672,"T",16)
8^2^1^F^
"KRN",.4,672,"T",58)
3^3^1^C0^
"KRN",.4,672,"T",74)
3^4^1^C0^
"KRN",.4,672,"T",89)
3^5^1^C0^
"KRN",.4,672,"T",104)
3^6^1^C0^
"KRN",.4,673,-1)
0^4
"KRN",.4,673,0)
TIU PRINT TRANS STATS^2960508.144^@^8925^^@^2970202
"KRN",.4,673,"DCL","8925^-1")
+
"KRN",.4,673,"DCL","8925^.1")
+
"KRN",.4,673,"DXS",1,9)
X DXS(1,9.2) S DIP(101)=$S($D(^AUPNPAT(D0,0)):^(0),1:"") S X=$S('$D(^DPT(+$P(DIP(101),U,1),0)):"",1:$P(^(0),U,1)),X1=DIP(1) S X=$$NAME^TIULS(X,X1) S X=X S D0=I(0,0)
"KRN",.4,673,"DXS",1,9.2)
S I(0,0)=$S($D(D0):D0,1:""),DIP(2)=$S($D(^TIU(8925,D0,0)):^(0),1:"") S X="LAST,FI MI",DIP(1)=X,D0=$P(DIP(2),U,2) S:'$D(^AUPNPAT(+D0,0)) D0=-1
"KRN",.4,673,"DXS",2,9)
S DIP(3)=$S($D(^TIU(8925,D0,0)):^(0),1:""),DIP(1)=$S($D(^(13)):^(13),1:"") S X=$P(DIP(1),U,7),DIP(2)=X S X=$P(DIP(3),U,8),X1=DIP(2) D ^XUWORKDY
"KRN",.4,673,"DXS",3,9)
S DIP(1)=$S($D(^TIU(8925,D0,12)):^(12),1:""),DIP(3)=$S($D(^(13)):^(13),1:"") S X=$P(DIP(1),U,1),DIP(2)=X S X=$P(DIP(3),U,7),X1=DIP(2) D ^XUWORKDY
"KRN",.4,673,"DXS",4,9)
S DIP(3)=$S($D(^TIU(8925,D0,12)):^(12),1:""),DIP(1)=$S($D(^(15)):^(15),1:"") S X=$P(DIP(1),U,1),DIP(2)=X S X=$P(DIP(3),U,1),X1=DIP(2) D ^XUWORKDY
"KRN",.4,673,"DXS",5,9)
S DIP(1)=$S($D(^TIU(8925,D0,15)):^(15),1:"") S X=$P(DIP(1),U,7),DIP(2)=X S X=$P(DIP(1),U,1),X1=DIP(2) D ^XUWORKDY
"KRN",.4,673,"F",1)
1302;N;L15;"Transciber"~.1;C17;R8;"Line Count"~
"KRN",.4,673,"F",2)
S DIP(1)=$S($D(^TIU(8925,D0,13)):^(13),1:"") S X=$P(DIP(1),U,1),X=$P(X,".",1) S Y=X D DT K DIP;L11;C28;"Ref Date";Z;"DATE(REFERENCE DATE)"~
"KRN",.4,673,"F",3)
X DXS(1,9) W X K DIP;L15;C42;"Patient";Z;"TIU NAME FORMAT("LAST,FI MI",PATIENT)"~
"KRN",.4,673,"F",4)
X DXS(2,9);C59;R3;"Disch-Dict";;;;;;;;;Z;"XUWORKDAY(DICTATION DATE,EPISODE END DATE/TIME)";+~
"KRN",.4,673,"F",5)
X DXS(3,9);C75;R3;"Dict-Transcr";;;;;;;Z;"XUWORKDAY(ENTRY DATE,DICTATION DATE)";+~
"KRN",.4,673,"F",6)
X DXS(4,9);C90;R3;"Transcr-Sign";;;;;Z;"XUWORKDAY(SIGNATURE DATE,ENTRY DATE)";+~
"KRN",.4,673,"F",7)
X DXS(5,9);C105;R3;"Sign-Cosign";;;;;;;;;;;;;;;;Z;"XUWORKDAY(COSIGNATURE DATE,SIGNATURE DATE)";+~.01;C120;L8;X~
"KRN",.4,673,"H")
DOCUMENT LINE COUNT BY TRANSCRIPTIONIST
"KRN",.4,673,"IOM")
132
"KRN",.4,673,"LAST")

"KRN",.4,673,"ROU")
^TIUSTT
"KRN",.4,673,"ROUOLD")
TIUSTT
"KRN",.4,673,"STATS","DITTO",1)

"KRN",.4,673,"STATS","N",2)
0
"KRN",.4,673,"STATS","N",3)
0
"KRN",.4,673,"STATS","N",4)
0
"KRN",.4,673,"STATS","N",5)
0
"KRN",.4,673,"STATS","N",6)
0
"KRN",.4,673,"STATS","S",2)
0
"KRN",.4,673,"STATS","S",3)
0
"KRN",.4,673,"STATS","S",4)
0
"KRN",.4,673,"STATS","S",5)
0
"KRN",.4,673,"STATS","S",6)
0
"KRN",.4,673,"T",16)
8^2^1^F^
"KRN",.4,673,"T",58)
3^3^1^C0^
"KRN",.4,673,"T",74)
3^4^1^C0^
"KRN",.4,673,"T",89)
3^5^1^C0^
"KRN",.4,673,"T",104)
3^6^1^C0^
"KRN",.4,674,-1)
0^3
"KRN",.4,674,0)
TIU PRINT SERVICE STATS^2960508.1436^@^8925^^@^2960627
"KRN",.4,674,"DCL","8925^-1")
+
"KRN",.4,674,"DCL","8925^.1")
+
"KRN",.4,674,"DXS",1,9)
X DXS(1,9.2) S DIP(101)=$S($D(^AUPNPAT(D0,0)):^(0),1:"") S X=$S('$D(^DPT(+$P(DIP(101),U,1),0)):"",1:$P(^(0),U,1)),X1=DIP(1) S X=$$NAME^TIULS(X,X1) S X=X S D0=I(0,0)
"KRN",.4,674,"DXS",1,9.2)
S I(0,0)=$S($D(D0):D0,1:""),DIP(2)=$S($D(^TIU(8925,D0,0)):^(0),1:"") S X="LAST,FI MI",DIP(1)=X,D0=$P(DIP(2),U,2) S:'$D(^AUPNPAT(+D0,0)) D0=-1
"KRN",.4,674,"DXS",2,9)
S DIP(3)=$S($D(^TIU(8925,D0,0)):^(0),1:""),DIP(1)=$S($D(^(13)):^(13),1:"") S X=$P(DIP(1),U,7),DIP(2)=X S X=$P(DIP(3),U,8),X1=DIP(2) D ^XUWORKDY
"KRN",.4,674,"DXS",3,9)
S DIP(1)=$S($D(^TIU(8925,D0,12)):^(12),1:""),DIP(3)=$S($D(^(13)):^(13),1:"") S X=$P(DIP(1),U,1),DIP(2)=X S X=$P(DIP(3),U,7),X1=DIP(2) D ^XUWORKDY
"KRN",.4,674,"DXS",4,9)
S DIP(3)=$S($D(^TIU(8925,D0,12)):^(12),1:""),DIP(1)=$S($D(^(15)):^(15),1:"") S X=$P(DIP(1),U,1),DIP(2)=X S X=$P(DIP(3),U,1),X1=DIP(2) D ^XUWORKDY
"KRN",.4,674,"DXS",5,9)
S DIP(1)=$S($D(^TIU(8925,D0,15)):^(15),1:"") S X=$P(DIP(1),U,7),DIP(2)=X S X=$P(DIP(1),U,1),X1=DIP(2) D ^XUWORKDY
"KRN",.4,674,"F",1)
1404;N;L15;"Service"~.1;C17;R8;"Line Count"~
"KRN",.4,674,"F",2)
S DIP(1)=$S($D(^TIU(8925,D0,13)):^(13),1:"") S X=$P(DIP(1),U,1),X=$P(X,".",1) S Y=X D DT K DIP;L11;C28;"Ref Date";Z;"DATE(REFERENCE DATE)"~
"KRN",.4,674,"F",3)
X DXS(1,9) W X K DIP;L15;C42;"Patient";Z;"TIU NAME FORMAT("LAST,FI MI",PATIENT)"~
"KRN",.4,674,"F",4)
X DXS(2,9);C59;R3;"Disch-Dict";;;;;;;;;;;;;;;;Z;"XUWORKDAY(DICTATION DATE,EPISODE END DATE/TIME)";+~
"KRN",.4,674,"F",5)
X DXS(3,9);C75;R3;"Dict-Transcr";;;;;;;;;;;;;;;;Z;"XUWORKDAY(ENTRY DATE,DICTATION DATE)";+~
"KRN",.4,674,"F",6)
X DXS(4,9);C90;R3;"Transcr-Sign";;;;;;;;;;;;;;;;Z;"XUWORKDAY(SIGNATURE DATE,ENTRY DATE)";+~
"KRN",.4,674,"F",7)
X DXS(5,9);C105;R3;"Sign-Cosign";;;;;;;;;;;;;;;;Z;"XUWORKDAY(COSIGNATURE DATE,SIGNATURE DATE)";+~.01;C120;L8;X~
"KRN",.4,674,"H")
DOCUMENT LINE COUNT BY SERVICE
"KRN",.4,674,"IOM")
132
"KRN",.4,674,"LAST")

"KRN",.4,674,"ROU")
^TIUSTS
"KRN",.4,674,"ROUOLD")
TIUSTS
"KRN",.4,674,"STATS","DITTO",1)

"KRN",.4,674,"STATS","N",2)
0
"KRN",.4,674,"STATS","N",3)
0
"KRN",.4,674,"STATS","N",4)
0
"KRN",.4,674,"STATS","N",5)
0
"KRN",.4,674,"STATS","N",6)
0
"KRN",.4,674,"STATS","S",2)
0
"KRN",.4,674,"STATS","S",3)
0
"KRN",.4,674,"STATS","S",4)
0
"KRN",.4,674,"STATS","S",5)
0
"KRN",.4,674,"STATS","S",6)
0
"KRN",.4,674,"T",16)
8^2^1^F^
"KRN",.4,674,"T",58)
3^3^1^C0^
"KRN",.4,674,"T",74)
3^4^1^C0^
"KRN",.4,674,"T",89)
3^5^1^C0^
"KRN",.4,674,"T",104)
3^6^1^C0^
"KRN",.402,915,-1)
0^5
"KRN",.402,915,0)
TIU ENTER/EDIT DS^2960603.0905^^8925^^^2970619
"KRN",.402,915,"DIAB",4,0,8925,1)
1307;REQ
"KRN",.402,915,"DR",1,8925)
.02////^S X=DFN;.03////^S X=$P($G(TIU("VISIT")),U);I $P(^TIU(8925,+DA,0),U,7)]"" S Y="@1";.07////^S X=$P(TIU("EDT"),U);@1;I $P(^TIU(8925,+DA,0),U,8)]"" S Y="@2";.08////^S X=$P(TIU("LDT"),U);@2;.09//routine;
"KRN",.402,915,"DR",1,8925,1)
I +$G(^TIU(8925,+DA,15)) S Y="@3";1202;@3;1307R~;Q;S TIUREFDT=$$REFDATE^TIULC1(.TIU,+X);I +$P(TIUREFDT,U,2)'>0 S Y="@4";.12////^S X=1;@4;1301////^S X=$P(TIUREFDT,U);I +$P($G(^TIU(8925,+DA,13)),U,2) S Y="@5";1302////^S X=DUZ;@5;
"KRN",.402,915,"DR",1,8925,2)
I $P($G(^TIU(8925,+DA,13)),U,3)]"" S Y="@6";1303////^S X="D";@6;I +$P($G(^TIU(8925,+DA,12)),U) S Y="@7";1201////^S X=$$NOW^TIULC;@7;1209;1204////^S X=$$WHOSIGNS^TIULC1(DA);1208////^S X=$$WHOCOSIG^TIULC1(DA);
"KRN",.402,915,"DR",1,8925,3)
1506////^S X=$S(+$P($G(^TIU(8925,+DA,12)),U,4)=+$P($G(^TIU(8925,+DA,12)),U,9):0,1:1);1401////^S X=$G(TIU("AD#"));1402////^S X=$P(TIU("TS"),U);1404////^S X=$P($G(TIU("SVC")),U);1205////^S X=$P($G(TIU("LOC")),U);
"KRN",.402,915,"ROU")
^TIUEDS
"KRN",.402,915,"ROUOLD")
TIUEDS
"KRN",.402,916,-1)
0^3
"KRN",.402,916,0)
TIU EDIT DOCUMENT TYPE^2951022.103^^8925.1^^^2960703
"KRN",.402,916,"DIAB",1,1,8925.14,0)
ALL
"KRN",.402,916,"DR",1,8925.1)
.01;.02;.03;.04;.05;.06;.07;3;4;5;6;7;8;9;10;
"KRN",.402,916,"DR",2,8925.14)
.01:4
"KRN",.402,917,-1)
0^8
"KRN",.402,917,0)
TIU ENTER/EDIT PROGRESS NOTE^2970507.151^^8925^^^2970619
"KRN",.402,917,"DIAB",1,0,8925,3)
1202//^S X=$$PERSNAME^TIULC1($S($D(TIUAUTH):+TIUAUTH,1:+DUZ));T
"KRN",.402,917,"DIAB",1,0,8925,5)
1208//^S X=TIUDCSNR;REQ
"KRN",.402,917,"DIAB",5,0,8925,5)
1208;REQ
"KRN",.402,917,"DIAB",6,0,8925,2)
1301//^S X=$$DATE^TIULS($$NOW^XLFDT,"MM/DD/YY@HR:MIN");T
"KRN",.402,917,"DR",1,8925)
.02////^S X=DFN;.03////^S X=$P($G(TIU("VISIT")),U);.07////^S X=$P($G(TIU("EDT")),U);.08////^S X=$P($G(TIU("LDT")),U);I '+$G(TIUBY) S Y="@1";I +$P($G(^TIU(8925,+DA,12)),U,5) S Y="@13";1205////^S X=$P($G(TIU("LOC")),U);@13;
"KRN",.402,917,"DR",1,8925,1)
I +$G(^TIU(8925,+DA,13)) S Y="@14";1301////^S X=$$NOW^TIULC;@14;I +$P($G(^TIU(8925,+DA,12)),U,2) S Y="@1";1202////^S X=$S($D(TIUAUTH):+TIUAUTH,1:+$G(DUZ));@1;I +$G(TIUBY) S Y="@2";I $P($G(^SC(+$G(TIU("LOC")),0)),U,3)="W" S Y="@3";
"KRN",.402,917,"DR",1,8925,2)
1205////^S X=$P($G(TIU("LOC")),U);S Y="@4";@3;1205//^S X=$P($G(TIU("LOC")),U,2);@4;1301T~//^S X=$$DATE^TIULS($$NOW^XLFDT,"MM/DD/YY@HR:MIN");I +$$DATENOTE^TIULA3($$DATE^TIULS(X,"MM/DD/YY@HR:MIN:SEC"))'>0 S Y="@4";
"KRN",.402,917,"DR",1,8925,3)
1202T~//^S X=$$PERSNAME^TIULC1($S($D(TIUAUTH):+TIUAUTH,1:+DUZ));Q;@2;1204////^S X=$P($G(^TIU(8925,+DA,12)),U,2);S TIUESNR=X;I +$P($G(^TIU(8925,+DA,13)),U,2) S Y="@5";1302////^S X=DUZ;@5;I +$P($G(^TIU(8925,+DA,12)),U) S Y="@6";
"KRN",.402,917,"DR",1,8925,4)
1201////^S X=$$NOW^TIULC;@6;I '+$$REQCOSIG^TIULP(+$G(TIUTYP),+DA,+$G(TIUESNR)) S Y="@7";I +$$ISA^USRLM(DUZ,"TRANSCRIPTIONIST") S Y="@8";S TIUDCSNR=$$PERSNAME^TIULC1(+$P($G(TIUPREF),U,9));I TIUDCSNR="UNKNOWN" S Y="@11";
"KRN",.402,917,"DR",1,8925,5)
1208R~//^S X=TIUDCSNR;K TIUDCSNR;S Y="@9";@11;1208R~;S Y="@9";@8;1208;@9;1506////1;@7;1404///^S X=$P($G(TIU("SVC")),U,2);I +$P($G(TIUPREF),U,8)'>0,($G(^TIU(8925,+DA,17))']"") S Y="@10";1701;@10;K TIUESNR;
"KRN",.402,917,"DR",1,8925,6)
I $P($G(^TIU(8925,+DA,13)),U,3)]"" S Y="@12";1303////^S X="D";@12;
"KRN",.402,917,"ROU")
^TIUEPN
"KRN",.402,917,"ROUOLD")
TIUEPN
"KRN",.402,985,-1)
0^1
"KRN",.402,985,0)
TIU BASIC PARAMETER EDIT^2970320.1354^^8925.99^^^2970616
"KRN",.402,985,"DR",1,8925.99)
.02;1.07;.05;.04;.03;.06;.07;.22;1.06;
"KRN",.402,986,-1)
0^11
"KRN",.402,986,0)
TIU UPLOAD PARAMETER EDIT^2960327.1115^^8925.99^^^2970619
"KRN",.402,986,"DIAB",1,1,8925.992,0)
ALL
"KRN",.402,986,"DR",1,8925.99)
.09;S TIUUSRC=X I X'="R" S Y="@1";.17;I X="k" S Y="@1";.15;.11;@1;.16;I X'="D" S Y="@2";.13;@2;.1;.12;I TIUUSRC'="H" S Y="@3";.11;@3;.18//NO;W !!,"Now Select upload error alert recipients:",!;2;
"KRN",.402,986,"DR",2,8925.992)
.01
"KRN",.402,989,-1)
0^9
"KRN",.402,989,0)
TIU ENTER/EDIT SEARCH CATEGORY^2950616.12^^8925.8^^^2951022
"KRN",.402,989,"DR",1,8925.8)
.01;.02;.03//^S X=$$MIXED^TIULS($P(^TIU(8925.8,+DA,0),U));
"KRN",.402,999,-1)
0^10
"KRN",.402,999,0)
TIU UPLOAD FIELD EDIT^2960328.1551^^8925.1^^^2970619
"KRN",.402,999,"DR",1,8925.1)
.02;1.02;1.01;I +X'>0 S Y=0;S TIUX=X;S TIUX=$$TXTFLD^TIUUPEDT(TIUX,+$P($G(^TIU(8925.1,+DA,1)),U,3));I +TIUX'>0 S Y="@1";1.03////^S X=TIUX;@1;4;4.5;4.8;I '$D(TIUPRM0) D SETPARM^TIULE;I $P(TIUPRM0,U,16)="C" S Y="@2";1;S Y=0;@2;2;
"KRN",.402,999,"DR",2,8925.11)
.01;.02;.03;.04;1;.05;.06;.07;
"KRN",.402,999,"DR",2,8925.12)
.01;.02;.03;.04;1;.05;.06;.07;
"KRN",.402,1003,-1)
0^12
"KRN",.402,1003,0)
TIUF UPLOAD FIELD EDIT^2961210.1417^^8925.1^^^2970522
"KRN",.402,1003,"%D",0)
^^1^1^2960730^
"KRN",.402,1003,"%D",1,0)
Used by Document Definition Utility TIUF to edit upload fields.  
"KRN",.402,1003,"DR",1,8925.1)
1.01;I +X'>0 S Y=0;S TIUX=X;1.02;S TIUX=$$TXTFLD^TIUUPEDT(TIUX,+$P($G(^TIU(8925.1,+DA,1)),U,3));I +TIUX'>0 S Y=0;1.03////^S X=TIUX;4;4.5;4.8;I '$D(TIUPRM0) D SETPARM^TIULE;I $P(TIUPRM0,U,16)="C" S Y="@2";
"KRN",.402,1003,"DR",1,8925.1,1)
W !!,"Editing Delimited ASCII Record Header",!;1;S Y=0;@2;W !!,"Editing Captioned ASCII Record Header",!;2;
"KRN",.402,1003,"DR",2,8925.11)
.01;.02;.03;.04;1;.05;.06;.07;
"KRN",.402,1003,"DR",2,8925.12)
.01;.02;.03;.04;1;.05;.06;.07;
"KRN",.402,1005,-1)
0^2
"KRN",.402,1005,0)
TIU DOCUMENT PARAMETER EDIT^2970225.1153^@^8925.95^^@^2970620
"KRN",.402,1005,"DIAB",1,1,8925.954,0)
.01;"FILING ALERT RECIPIENT"
"KRN",.402,1005,"DIAB",17,0,8925.95,0)
4;"FILING ALERT RECIPIENT"
"KRN",.402,1005,"DR",1,8925.95)
.01;.02;.03;.04;.06;.07;.08;.09;.1;.11;I +X'>0 S Y="@1";.12;@1;.14;3;W !!,"If document is to be uploaded, specify Filing Alert Recipients:",!;4FILING ALERT RECIPIENT~;
"KRN",.402,1005,"DR",1,8925.95,1)
W !!,"Now enter the USER CLASSES for which cosignature will be required:",!;5;W !!,"Now enter the DIVISIONAL parameters:",!;2;
"KRN",.402,1005,"DR",2,8925.952)
.02;.03;
"KRN",.402,1005,"DR",2,8925.954)
.01FILING ALERT RECIPIENT~;
"KRN",.402,1005,"DR",2,8925.955)
.01;
"KRN",.402,1012,-1)
0^4
"KRN",.402,1012,0)
TIU ENTER/EDIT CONSULT RESULT^2970520.153^@^8925^^@^2970521
"KRN",.402,1012,"DIAB",1,0,8925,3)
1202//^S X=$$PERSNAME^TIULC1($S($D(TIUAUTH):+TIUAUTH,1:+DUZ));T
"KRN",.402,1012,"DIAB",1,0,8925,5)
1208//^S X=TIUDCSNR;REQ
"KRN",.402,1012,"DIAB",5,0,8925,5)
1208;REQ
"KRN",.402,1012,"DIAB",6,0,8925,2)
1301//^S X=$$DATE^TIULS($$NOW^XLFDT,"MM/DD/YY@HR:MIN");T
"KRN",.402,1012,"DIAB",13,0,8925,5)
1405////^S X=$$GETCNSLT^TIUCNSLT(DFN);T
"KRN",.402,1012,"DR",1,8925)
.02////^S X=DFN;.03////^S X=$P($G(TIU("VISIT")),U);.07////^S X=$P($G(TIU("EDT")),U);.08////^S X=$P($G(TIU("LDT")),U);I '+$G(TIUBY) S Y="@1";I +$P($G(^TIU(8925,+DA,12)),U,5) S Y="@13";1205////^S X=$P($G(TIU("LOC")),U);@13;
"KRN",.402,1012,"DR",1,8925,1)
I +$G(^TIU(8925,+DA,13)) S Y="@14";1301////^S X=$$NOW^TIULC;@14;I +$P($G(^TIU(8925,+DA,12)),U,2) S Y="@1";1202////^S X=$S($D(TIUAUTH):+TIUAUTH,1:+$G(DUZ));@1;I +$G(TIUBY) S Y="@2";I $P($G(^SC(+$G(TIU("LOC")),0)),U,3)="W" S Y="@3";
"KRN",.402,1012,"DR",1,8925,2)
1205////^S X=$P($G(TIU("LOC")),U);S Y="@4";@3;1205//^S X=$P($G(TIU("LOC")),U,2);@4;1301T~//^S X=$$DATE^TIULS($$NOW^XLFDT,"MM/DD/YY@HR:MIN");I +$$DATENOTE^TIULA3($$DATE^TIULS(X,"MM/DD/YY@HR:MIN:SEC"))'>0 S Y="@4";
"KRN",.402,1012,"DR",1,8925,3)
1202T~//^S X=$$PERSNAME^TIULC1($S($D(TIUAUTH):+TIUAUTH,1:+DUZ));Q;@2;1204////^S X=$P($G(^TIU(8925,+DA,12)),U,2);S TIUESNR=X;I +$P($G(^TIU(8925,+DA,13)),U,2) S Y="@5";1302////^S X=DUZ;@5;I +$P($G(^TIU(8925,+DA,12)),U) S Y="@6";
"KRN",.402,1012,"DR",1,8925,4)
1201////^S X=$$NOW^TIULC;@6;I '+$$REQCOSIG^TIULP(+$G(TIUTYP),+DA,+$G(TIUESNR)) S Y="@7";I +$$ISA^USRLM(DUZ,"TRANSCRIPTIONIST") S Y="@8";S TIUDCSNR=$$PERSNAME^TIULC1(+$P($G(TIUPREF),U,9));I TIUDCSNR="UNKNOWN" S Y="@11";
"KRN",.402,1012,"DR",1,8925,5)
1208R~//^S X=TIUDCSNR;K TIUDCSNR;S Y="@9";@11;1208R~;S Y="@9";@8;1208;@9;1506////1;@7;1404///^S X=$P($G(TIU("SVC")),U,2);1405T~////^S X=$$GETCNSLT^TIUCNSLT(DFN);
"KRN",.402,1012,"DR",1,8925,6)
I +X'>0 W !,"You may only enter a result for a valid Consult Request.",! S Y=0,TIUQUIT=1;I +$P($G(TIUPREF),U,8)'>0,($G(^TIU(8925,+DA,17))']"") S Y="@10";1701;@10;K TIUESNR;I $P($G(^TIU(8925,+DA,13)),U,3)]"" S Y="@12";
"KRN",.402,1012,"DR",1,8925,7)
1303////^S X="D";@12;
"KRN",.402,1026,-1)
0^7
"KRN",.402,1026,0)
TIU ENTER/EDIT PERSONAL LIST^2970114.1619^@^8925.98^^@^2970604
"KRN",.402,1026,"DIAB",1,0,8925.98,0)
.02;T
"KRN",.402,1026,"DIAB",2,0,8925.98,1)
.03;T
"KRN",.402,1026,"DR",1,8925.98)
.02T~;S TIUCLASS=X;I TIUCLASS="" S Y=0;S TIUASK=$$LBYPASS^TIULA4;I TIUASK="D" S Y="@1";W !!,"When selecting from this PARENT CLASS, which TITLES would you like to be",!,"presented with initially?",!;10;@1;I TIUASK="L" S Y=0;
"KRN",.402,1026,"DR",1,8925.98,1)
W !!,$S(TIUASK="B":"Now, ",1:""),"Specify the TITLE you'd like as your DEFAULT for ",$$UP^XLFSTR($$PNAME^TIULC1(TIUCLASS)),!;.03T~;
"KRN",.402,1026,"DR",2,8925.9801)
.01;.02;.03;
"KRN",.402,1125,-1)
0^13
"KRN",.402,1125,0)
TIUZ ENTER/EDIT PN^2970507.1659^@^8925^^@^2970507
"KRN",.402,1125,"DIAB",1,0,8925,4)
1202//^S X=$$PERSNAME^TIULC1($S($D(TIUAUTH):+TIUAUTH,1:+DUZ));T
"KRN",.402,1125,"DIAB",1,0,8925,6)
1208//^S X=TIUDCSNR;REQ
"KRN",.402,1125,"DIAB",3,0,8925,3)
1301//^S X=$$DATE^TIULS($$NOW^TIULC,"MM/DD/YY@HR:MIN:SEC");T
"KRN",.402,1125,"DIAB",5,0,8925,6)
1208;REQ
"KRN",.402,1125,"DR",1,8925)
I $S($G(VALMAR)']"":1,+$$ISADDNDM^TIULC1(+DA):1,1:0) S Y="@13";.01////^S X=+$$ASKTITLE^TIULA3(3,+$G(^TIU(8925,+DA,0)));.04////^S X=$$DOCCLASS^TIULC1(+X);@13;.02////^S X=DFN;.03////^S X=$P($G(TIU("VISIT")),U);
"KRN",.402,1125,"DR",1,8925,1)
.07////^S X=$P($G(TIU("EDT")),U);.08////^S X=$P($G(TIU("LDT")),U);I '+$G(TIUBY) S Y="@1";I +$P($G(^TIU(8925,+DA,12)),U,5) S Y="@14";1205////^S X=$P($G(TIU("LOC")),U);@14;I +$G(^TIU(8925,+DA,13)) S Y="@15";1301////^S X=$$NOW^TIULC;
"KRN",.402,1125,"DR",1,8925,2)
@15;I +$P($G(^TIU(8925,+DA,12)),U,2) S Y="@1";1202////^S X=$S($D(TIUAUTH):+TIUAUTH,1:+$G(DUZ));@1;I +$G(TIUBY) S Y="@2";I $P($G(^SC(+$G(TIU("LOC")),0)),U,3)="W" S Y="@3";1205////^S X=$P($G(TIU("LOC")),U);S Y="@4";@3;
"KRN",.402,1125,"DR",1,8925,3)
1205//^S X=$P($G(TIU("LOC")),U,2);@4;1301T~//^S X=$$DATE^TIULS($$NOW^TIULC,"MM/DD/YY@HR:MIN:SEC");I +$$DATENOTE^TIULA3($$DATE^TIULS(X,"MM/DD/YY@HR:MIN:SEC"))'>0 S Y="@4";
"KRN",.402,1125,"DR",1,8925,4)
1202T~//^S X=$$PERSNAME^TIULC1($S($D(TIUAUTH):+TIUAUTH,1:+DUZ));Q;@2;1204////^S X=$P($G(^TIU(8925,+DA,12)),U,2);S TIUESNR=X;I +$P($G(^TIU(8925,+DA,13)),U,2) S Y="@5";1302////^S X=DUZ;@5;I +$P($G(^TIU(8925,+DA,12)),U) S Y="@6";
"KRN",.402,1125,"DR",1,8925,5)
1201////^S X=$$NOW^TIULC;@6;I '+$$REQCOSIG^TIULP(+$G(TIUTYP),+DA,+$G(TIUESNR)) S Y="@7";I +$$ISA^USRLM(DUZ,"TRANSCRIPTIONIST") S Y="@8";S TIUDCSNR=$$PERSNAME^TIULC1(+$P($G(TIUPREF),U,9));I TIUDCSNR="UNKNOWN" S Y="@11";
"KRN",.402,1125,"DR",1,8925,6)
1208R~//^S X=TIUDCSNR;K TIUDCSNR;S Y="@9";@11;1208R~;S Y="@9";@8;1208;@9;1506////1;@7;1404///^S X=$P($G(TIU("SVC")),U,2);I +$P($G(TIUPREF),U,8)'>0,($G(^TIU(8925,+DA,17))']"") S Y="@10";1701;@10;K TIUESNR;
"KRN",.402,1125,"DR",1,8925,7)
I $P($G(^TIU(8925,+DA,13)),U,3)]"" S Y="@12";1303////^S X="D";@12;
"KRN",.5,174,-1)
0^2
"KRN",.5,174,0)
TIU UNKNOWN DATA
"KRN",.5,174,1)
S:X="" X="UNKNOWN"
"KRN",.5,174,2)
X
"KRN",.5,174,3)
1
"KRN",.5,174,9)
Returns "UNKNOWN" when no field is empty
"KRN",.5,175,-1)
0^1
"KRN",.5,175,0)
TIU NAME FORMAT
"KRN",.5,175,1)
S X=$$NAME^TIULS(X,X1)
"KRN",.5,175,2)
X
"KRN",.5,175,3)
2
"KRN",.5,175,9)
Formats names as TIU NAME FORMAT("LAST, FIRST MI",NAME)
"KRN",.5,176,-1)
0^3
"KRN",.5,176,0)
TIU VISIT ID
"KRN",.5,176,1)
S X=$$IEN2VID^VSIT(X)
"KRN",.5,176,2)
X
"KRN",.5,176,3)
1
"KRN",.5,176,9)
RETURNS VISIT ID BASED ON VISIT FILE POINTER
"KRN",.84,89250001,-1)
0^1
"KRN",.84,89250001,0)
89250001^1^^TEXT INTEGRATION UTILITIES
"KRN",.84,89250001,1,0)
^^2^2^2960705^
"KRN",.84,89250001,1,1,0)
A TIU DOCUMENT record could not be created becuase the patient or visit
"KRN",.84,89250001,1,2,0)
information provided was inadequate.
"KRN",.84,89250001,2,0)
^^1^1^2960705^
"KRN",.84,89250001,2,1,0)
Patient or Visit information was insufficient for document creation.
"KRN",.84,89250002,-1)
0^2
"KRN",.84,89250002,0)
89250002^1^^TEXT INTEGRATION UTILITIES
"KRN",.84,89250002,1,0)
^^2^2^2960705^
"KRN",.84,89250002,1,1,0)
An invalid document title (pointer to file 8925.1 was passed...Can't
"KRN",.84,89250002,1,2,0)
create a new TIU Document.
"KRN",.84,89250002,2,0)
^^1^1^2960705^
"KRN",.84,89250002,2,1,0)
Invalid TITLE Selected.
"KRN",.84,89250003,-1)
0^3
"KRN",.84,89250003,0)
89250003^1^^TEXT INTEGRATION UTILITIES
"KRN",.84,89250003,1,0)
^^4^4^2960705^
"KRN",.84,89250003,1,1,0)
The user is NOT authorized to delete the document in question.  If the
"KRN",.84,89250003,1,2,0)
user needs to be able to do so, he should petition the local Clinical
"KRN",.84,89250003,1,3,0)
Coordinator, and/or Medical Records Committee to revise the local business
"KRN",.84,89250003,1,4,0)
rules to permit the action.
"KRN",.84,89250003,2,0)
^^1^1^2960705^
"KRN",.84,89250003,2,1,0)
You may not DELETE the current document, given its type and status.
"KRN",.84,89250004,-1)
0^4
"KRN",.84,89250004,0)
89250004^1^^TEXT INTEGRATION UTILITIES
"KRN",.84,89250004,1,0)
^^1^1^2960705^
"KRN",.84,89250004,1,1,0)
The user is not authorized to SIGN the document in question.
"KRN",.84,89250004,2,0)
^^1^1^2960705^
"KRN",.84,89250004,2,1,0)
You may not SIGN the current document.
"KRN",.84,89250005,-1)
0^5
"KRN",.84,89250005,0)
89250005^1^^TEXT INTEGRATION UTILITIES
"KRN",.84,89250005,1,0)
^^1^1^2960705^
"KRN",.84,89250005,1,1,0)
The user entered an incorrect electronic signature code.
"KRN",.84,89250005,2,0)
^^1^1^2960705^
"KRN",.84,89250005,2,1,0)
You have entered an incorrect Electronic Signature Code...Try again!
"KRN",3.6,70,-1)
0^1
"KRN",3.6,70,0)
TIU PRN CONVERSION CLEAN^PROGRESS NOTE CONVERSION
"KRN",3.6,70,1,0)
^^10^10^2950627^^^^
"KRN",3.6,70,1,1,0)
         *******  CONVERSION COMPLETED  *******
"KRN",3.6,70,1,2,0)
  
"KRN",3.6,70,1,3,0)
The conversion of Progress Notes into Text Integration Utility
"KRN",3.6,70,1,4,0)
(TIU) has successfully completed.  The Progress Note File 
"KRN",3.6,70,1,5,0)
^GMR(121 should be archived and removed from the system at your
"KRN",3.6,70,1,6,0)
convenience.
"KRN",3.6,70,1,7,0)
   
"KRN",3.6,70,1,8,0)
  CONVERSION STARTED:  |1|
"KRN",3.6,70,1,9,0)
CONVERSION COMPLETED:  |2|
"KRN",3.6,70,1,10,0)
     NOTES CONVERTED:  |3|
"KRN",3.6,70,3,0)
^^3^3^2950627^^^^
"KRN",3.6,70,3,1,0)
This bulletin will be delivered to the user who initiated the
"KRN",3.6,70,3,2,0)
conversion as a notice that processing has completed without
"KRN",3.6,70,3,3,0)
error.
"KRN",3.6,70,4,0)
^3.64A^3^3
"KRN",3.6,70,4,1,0)
1
"KRN",3.6,70,4,1,1,0)
^^1^1^2950619^
"KRN",3.6,70,4,1,1,1,0)
Date/Time conversion began.
"KRN",3.6,70,4,2,0)
2
"KRN",3.6,70,4,2,1,0)
^^1^1^2950619^
"KRN",3.6,70,4,2,1,1,0)
Date/Time conversion completed.
"KRN",3.6,70,4,3,0)
3
"KRN",3.6,70,4,3,1,0)
^^1^1^2950619^
"KRN",3.6,70,4,3,1,1,0)
Number of notes successfully processed.
"KRN",3.6,71,-1)
0^2
"KRN",3.6,71,0)
TIU PRN CONVERSION ERRORS^PROGRESS NOTE CONVERSION
"KRN",3.6,71,1,0)
^^17^17^2970226^^^^
"KRN",3.6,71,1,1,0)
           *******  CONVERSION COMPLETED  *******
"KRN",3.6,71,1,2,0)
  
"KRN",3.6,71,1,3,0)
The Progress Note conversion has completed.  The following is
"KRN",3.6,71,1,4,0)
a listing of notes that were not converted during the processing.
"KRN",3.6,71,1,5,0)
   
"KRN",3.6,71,1,6,0)
            PROGRESS NOTE CONVERSION ERROR REPORT
"KRN",3.6,71,1,7,0)
            =====================================
"KRN",3.6,71,1,8,0)
  
"KRN",3.6,71,1,9,0)
  CONVERSION STARTED:  |1|
"KRN",3.6,71,1,10,0)
CONVERSION COMPLETED:  |2|
"KRN",3.6,71,1,11,0)
    
"KRN",3.6,71,1,12,0)
     NOTES CONVERTED:  |3|
"KRN",3.6,71,1,13,0)
 NOTES NOT CONVERTED:  |4|
"KRN",3.6,71,1,14,0)
   
"KRN",3.6,71,1,15,0)
========================================================================
"KRN",3.6,71,1,16,0)
ERRORS:
"KRN",3.6,71,1,17,0)
|5|
"KRN",3.6,71,3,0)
^^5^5^2970226^^^^
"KRN",3.6,71,3,1,0)
This bulletin will be delivered to the mail group indicated in
"KRN",3.6,71,3,2,0)
response to "mail group" question.  If a mail group is not named,
"KRN",3.6,71,3,3,0)
the user who initiated the conversion will be sent the bulletin.
"KRN",3.6,71,3,4,0)
It contains a listing of notes that could not be converted 
"KRN",3.6,71,3,5,0)
during processing.
"KRN",3.6,71,4,0)
^3.64A^5^5
"KRN",3.6,71,4,1,0)
1
"KRN",3.6,71,4,1,1,0)
^^1^1^2950619^
"KRN",3.6,71,4,1,1,1,0)
Date/Time conversion started
"KRN",3.6,71,4,2,0)
2
"KRN",3.6,71,4,2,1,0)
^^1^1^2950619^
"KRN",3.6,71,4,2,1,1,0)
Date/Time conversion completed
"KRN",3.6,71,4,3,0)
3
"KRN",3.6,71,4,3,1,0)
^^1^1^2950619^
"KRN",3.6,71,4,3,1,1,0)
Number of notes successfully processed.
"KRN",3.6,71,4,4,0)
4
"KRN",3.6,71,4,4,1,0)
^^2^2^2970226^^^^
"KRN",3.6,71,4,4,1,1,0)
Number of notes not processed.  The listing which follows will
"KRN",3.6,71,4,4,1,2,0)
show reason for failure.
"KRN",3.6,71,4,5,0)
5
"KRN",3.6,71,4,5,1,0)
^^1^1^2970226^
"KRN",3.6,71,4,5,1,1,0)
Listing of progress notes that were not converted.
"KRN",3.6,86,-1)
0^3
"KRN",3.6,86,0)
TIU DS CONVERSION CLEAN^DISCHARGE SUMMARY CONVERSION
"KRN",3.6,86,1,0)
^^10^10^2970213^^^^
"KRN",3.6,86,1,1,0)
           *******  CONVERSION COMPLETED  *******
"KRN",3.6,86,1,2,0)
  
"KRN",3.6,86,1,3,0)
The conversion of Discharge Summaries to Text Integration Utility
"KRN",3.6,86,1,4,0)
(TIU) has successfully completed.  The GMR REPORTS File 
"KRN",3.6,86,1,5,0)
^GMR(128, should be archived and removed from the system at your
"KRN",3.6,86,1,6,0)
convenience.
"KRN",3.6,86,1,7,0)
   
"KRN",3.6,86,1,8,0)
  CONVERSION STARTED:  |1|
"KRN",3.6,86,1,9,0)
CONVERSION COMPLETED:  |2|
"KRN",3.6,86,1,10,0)
 SUMMARIES CONVERTED:  |3|
"KRN",3.6,86,3,0)
^^3^3^2970213^^^^
"KRN",3.6,86,3,1,0)
This bulletin will be delivered to the user who initiated the
"KRN",3.6,86,3,2,0)
conversion as a notice that processing has completed without
"KRN",3.6,86,3,3,0)
error.
"KRN",3.6,86,4,0)
^3.64A^3^3
"KRN",3.6,86,4,1,0)
1
"KRN",3.6,86,4,1,1,0)
^^1^1^2970213^^
"KRN",3.6,86,4,1,1,1,0)
Date/Time conversion began.
"KRN",3.6,86,4,2,0)
2
"KRN",3.6,86,4,2,1,0)
^^1^1^2970213^^
"KRN",3.6,86,4,2,1,1,0)
Date/Time conversion completed.
"KRN",3.6,86,4,3,0)
3
"KRN",3.6,86,4,3,1,0)
^^1^1^2970213^^^^
"KRN",3.6,86,4,3,1,1,0)
Number of Summaries successfully processed.
"KRN",3.6,87,-1)
0^4
"KRN",3.6,87,0)
TIU DS CONVERSION ERRORS^DISCHARGE SUMMARY CONVERSION
"KRN",3.6,87,1,0)
^^22^22^2970213^^^^
"KRN",3.6,87,1,1,0)
             *******  CONVERSION COMPLETED  *******
"KRN",3.6,87,1,2,0)
  
"KRN",3.6,87,1,3,0)
The Discharge Summary conversion has completed.  One or more Summaries
"KRN",3.6,87,1,4,0)
were not converted due to missing information, or inability to match
"KRN",3.6,87,1,5,0)
the record to an existing admission.
"KRN",3.6,87,1,6,0)
   
"KRN",3.6,87,1,7,0)
            DISCHARGE SUMMARY CONVERSION ERROR REPORT
"KRN",3.6,87,1,8,0)
            =========================================
"KRN",3.6,87,1,9,0)
  
"KRN",3.6,87,1,10,0)
                     CONVERSION STARTED:  |1|
"KRN",3.6,87,1,11,0)
                   CONVERSION COMPLETED:  |2|
"KRN",3.6,87,1,12,0)
    
"KRN",3.6,87,1,13,0)
                    SUMMARIES CONVERTED:  |3|
"KRN",3.6,87,1,14,0)

"KRN",3.6,87,1,15,0)
                SUMMARIES NOT CONVERTED:  |4|
"KRN",3.6,87,1,16,0)
                  - MISSING INFORMATION:  |5|
"KRN",3.6,87,1,17,0)
                  -  NO ADMISSION FOUND:  |6|
"KRN",3.6,87,1,18,0)
========================================================================
"KRN",3.6,87,1,19,0)

"KRN",3.6,87,1,20,0)
You may see a list of the records which failed to convert by using the
"KRN",3.6,87,1,21,0)
M global lister (i.e., ^%G) to examine the ^GMR(128,"CNV","FAIL",DS #, 
"KRN",3.6,87,1,22,0)
subscript.  The DS # refers to the entry number in file 128.
"KRN",3.6,87,4,0)
^3.64A^6^6
"KRN",3.6,87,4,1,0)
1
"KRN",3.6,87,4,1,1,0)
^^1^1^2970213^^
"KRN",3.6,87,4,1,1,1,0)
Date/Time conversion started
"KRN",3.6,87,4,2,0)
2
"KRN",3.6,87,4,2,1,0)
^^1^1^2970213^^
"KRN",3.6,87,4,2,1,1,0)
Date/Time conversion completed
"KRN",3.6,87,4,3,0)
3
"KRN",3.6,87,4,3,1,0)
^^1^1^2970213^^
"KRN",3.6,87,4,3,1,1,0)
Number of Summaries successfully processed.
"KRN",3.6,87,4,4,0)
4
"KRN",3.6,87,4,4,1,0)
^^1^1^2970213^^^^
"KRN",3.6,87,4,4,1,1,0)
Number of Summaries not Converted.
"KRN",3.6,87,4,5,0)
5
"KRN",3.6,87,4,5,1,0)
^^2^2^2970213^
"KRN",3.6,87,4,5,1,1,0)
Number of Summaries which were not converted due to missing
"KRN",3.6,87,4,5,1,2,0)
information.
"KRN",3.6,87,4,6,0)
6
"KRN",3.6,87,4,6,1,0)
^^2^2^2970213^
"KRN",3.6,87,4,6,1,1,0)
Number of Summaries which failed to convert due to current admission
"KRN",3.6,87,4,6,1,2,0)
not being found.
"KRN",19,4752,-1)
0^66
"KRN",19,4752,0)
TIU REVIEW SCREEN CLINICIAN^Multiple Patient Documents^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,4752,1,0)
^^1^1^2960307^^^
"KRN",19,4752,1,1,0)
Drives Text Intgration Utilities Review Screen.
"KRN",19,4752,15)
K TIUEDT,TIULDT
"KRN",19,4752,20)
D EN^VALM("TIU REVIEW SCREEN CLINICIAN")
"KRN",19,4752,99)
55480,26973
"KRN",19,4752,"U")
MULTIPLE PATIENT DOCUMENTS
"KRN",19,4753,-1)
0^3
"KRN",19,4753,0)
TIU BROWSE DOCUMENT CLINICIAN^Individual Patient Document^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,4753,1,0)
^^2^2^2951103^^^^
"KRN",19,4753,1,1,0)
Allows the user to interactively review, edit, or sign patient Clinical
"KRN",19,4753,1,2,0)
Documents.
"KRN",19,4753,20)
K ORVP D MAIN^TIUBRWS("TIU BROWSE FOR CLINICIAN")
"KRN",19,4753,"U")
INDIVIDUAL PATIENT DOCUMENT
"KRN",19,4754,-1)
0^20
"KRN",19,4754,0)
TIU ENTER/EDIT^Enter/edit Document^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1
"KRN",19,4754,1,0)
^^2^2^2960916^^
"KRN",19,4754,1,1,0)
This option allows end-users to enter/edit clinical documents directly
"KRN",19,4754,1,2,0)
on-line.
"KRN",19,4754,20)
K ORVP D MAIN^TIUEDIT(38)
"KRN",19,4754,99)
55341,57619
"KRN",19,4754,"U")
ENTER/EDIT DOCUMENT
"KRN",19,4755,-1)
0^36
"KRN",19,4755,0)
TIU MAIN MENU MIXED CLINICIAN^Integrated Document Management^^M^^^^^^^y^TEXT INTEGRATION UTILITIES^^1^^^1
"KRN",19,4755,1,0)
^^1^1^2960326^^^^
"KRN",19,4755,1,1,0)
Main Text Integration Utilities menu for clinicians.
"KRN",19,4755,10,0)
^19.01PI^14^13
"KRN",19,4755,10,5,0)
4752^3^3
"KRN",19,4755,10,5,"^")
TIU REVIEW SCREEN CLINICIAN
"KRN",19,4755,10,8,0)
4756^2^2
"KRN",19,4755,10,8,"^")
TIU REVIEW UNSIGNED
"KRN",19,4755,10,12,0)
4753^1^1
"KRN",19,4755,10,12,"^")
TIU BROWSE DOCUMENT CLINICIAN
"KRN",19,4755,10,14,0)
4754^4^4
"KRN",19,4755,10,14,"^")
TIU ENTER/EDIT
"KRN",19,4755,15)

"KRN",19,4755,20)
S GMRPEN=1 Q
"KRN",19,4755,26)
W !!,$$CENTER^TIULS("--- Clinician's Menu ---")
"KRN",19,4755,99)
57061,57349
"KRN",19,4755,99.1)
55446,59382
"KRN",19,4755,"U")
INTEGRATED DOCUMENT MANAGEMENT
"KRN",19,4756,-1)
0^70
"KRN",19,4756,0)
TIU REVIEW UNSIGNED^All MY UNSIGNED Documents^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,4756,1,0)
^^1^1^2940819^
"KRN",19,4756,1,1,0)
Gets all unsigned documents for review, edit, and signature.
"KRN",19,4756,15)
K TIUQUIK,TIUEDT,TIULDT
"KRN",19,4756,20)
S TIUQUIK=1 D EN^VALM("TIU REVIEW SCREEN CLINICIAN")
"KRN",19,4756,99)
55441,53727
"KRN",19,4756,"U")
ALL MY UNSIGNED DOCUMENTS
"KRN",19,4760,-1)
0^67
"KRN",19,4760,0)
TIU REVIEW SCREEN MIS MANAGER^Multiple Patient Documents^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,4760,1,0)
^^1^1^2960607^^^^
"KRN",19,4760,1,1,0)
Drives Text Intgration Utilities Review Screen for MIS Managers.
"KRN",19,4760,15)
K TIUEDT,TIULDT
"KRN",19,4760,20)
D EN^VALM("TIU REVIEW SCREEN MGR")
"KRN",19,4760,99)
55480,26973
"KRN",19,4760,99.1)
56236,52228
"KRN",19,4760,"U")
MULTIPLE PATIENT DOCUMENTS
"KRN",19,4761,-1)
0^68
"KRN",19,4761,0)
TIU REVIEW SCREEN MRT^Multiple Patient Documents^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,4761,1,0)
^^1^1^2950426^^^^
"KRN",19,4761,1,1,0)
Drives Text Intgration Utilities Review Screen for MIS Managers.
"KRN",19,4761,15)
K TIUEDT,TIULDT
"KRN",19,4761,20)
D EN^VALM("TIU REVIEW SCREEN MRT")
"KRN",19,4761,99)
55480,26973
"KRN",19,4761,99.1)
56236,52228
"KRN",19,4761,"U")
MULTIPLE PATIENT DOCUMENTS
"KRN",19,4762,-1)
0^37
"KRN",19,4762,0)
TIU MAIN MENU MRT^Text Integration Utilities (MRT)^^M^^^^^^^y^TEXT INTEGRATION UTILITIES^^1^^^1
"KRN",19,4762,1,0)
^^1^1^2960303^^^^
"KRN",19,4762,1,1,0)
Main Text Integration Utilities menu for Medical Records Technicians.
"KRN",19,4762,10,0)
^19.01PI^14^14
"KRN",19,4762,10,5,0)
4761^2^2
"KRN",19,4762,10,5,"^")
TIU REVIEW SCREEN MRT
"KRN",19,4762,10,10,0)
4815^1^1
"KRN",19,4762,10,10,"^")
TIU BROWSE DOCUMENT MRT
"KRN",19,4762,10,11,0)
5177^3^3
"KRN",19,4762,10,11,"^")
TIU REVIEW FILING EVENTS
"KRN",19,4762,10,12,0)
5185^4^4
"KRN",19,4762,10,12,"^")
TIUP PRINT MENU
"KRN",19,4762,10,13,0)
5248^5^5
"KRN",19,4762,10,13,"^")
TIU RELEASED/UNVERIFIED REPORT
"KRN",19,4762,10,14,0)
5289^6^6
"KRN",19,4762,10,14,"^")
TIU SEARCH LIST MRT
"KRN",19,4762,15)

"KRN",19,4762,20)
S GMRPEN=1 D EDITSAVE^TIUEDI2(.DUZ)
"KRN",19,4762,26)
W !!,$$CENTER^TIULS("--- MRT Menu ---")
"KRN",19,4762,99)
57061,57405
"KRN",19,4762,99.1)
55411,39843
"KRN",19,4762,"U")
TEXT INTEGRATION UTILITIES (MR
"KRN",19,4763,-1)
0^35
"KRN",19,4763,0)
TIU MAIN MENU MGR^Text Integration Utilities (MIS Manager)^^M^^^^^^^y^TEXT INTEGRATION UTILITIES^^1^^^1
"KRN",19,4763,1,0)
^^1^1^2960610^^^^
"KRN",19,4763,1,1,0)
Main Text Integration Utilities menu for MIS Managers.
"KRN",19,4763,10,0)
^19.01PI^12^12
"KRN",19,4763,10,5,0)
4760^2^2
"KRN",19,4763,10,5,"^")
TIU REVIEW SCREEN MIS MANAGER
"KRN",19,4763,10,9,0)
4814^1^1
"KRN",19,4763,10,9,"^")
TIU BROWSE DOCUMENT MGR
"KRN",19,4763,10,10,0)
5185^3^3
"KRN",19,4763,10,10,"^")
TIUP PRINT MENU
"KRN",19,4763,10,11,0)
5288^4^4
"KRN",19,4763,10,11,"^")
TIU SEARCH LIST MGR
"KRN",19,4763,10,12,0)
5273^5^5
"KRN",19,4763,10,12,"^")
TIU STATISTICAL REPORTS
"KRN",19,4763,15)

"KRN",19,4763,20)
S GMRPEN=1 D EDITSAVE^TIUEDI2(.DUZ)
"KRN",19,4763,26)
W !!,$$CENTER^TIULS("--- MIS Managers Menu ---")
"KRN",19,4763,99)
57061,57405
"KRN",19,4763,99.1)
55460,35223
"KRN",19,4763,"U")
TEXT INTEGRATION UTILITIES (MI
"KRN",19,4764,-1)
0^41
"KRN",19,4764,0)
TIU MAIN MENU TRANSCRIPTION^Text Integration Utilities (Transcriptionist)^^M^^^^^^^y^TEXT INTEGRATION UTILITIES^^1^^^1
"KRN",19,4764,1,0)
^^1^1^2950818^^^^
"KRN",19,4764,1,1,0)
Main Text Integration Utilities menu for transcriptionists.
"KRN",19,4764,10,0)
^19.01PI^3^3
"KRN",19,4764,10,1,0)
5187^2^2
"KRN",19,4764,10,1,"^")
TIU ENTER/EDIT TRANSCRIBER
"KRN",19,4764,10,2,0)
5142^3^3
"KRN",19,4764,10,2,"^")
TIU UPLOAD MENU
"KRN",19,4764,10,3,0)
5172^1^1
"KRN",19,4764,10,3,"^")
TIU ENTER/EDIT DS
"KRN",19,4764,15)

"KRN",19,4764,20)
D EDITSAVE^TIUEDI2(.DUZ)
"KRN",19,4764,26)
W !!,$$CENTER^TIULS("--- Transcriptionist Menu ---")
"KRN",19,4764,99)
57061,57389
"KRN",19,4764,99.1)
55469,34443
"KRN",19,4764,"U")
TEXT INTEGRATION UTILITIES (TR
"KRN",19,4766,-1)
0^99
"KRN",19,4766,0)
USR CLASS DEFINITION^User Class Definition^^A^^^^^^^^^^1
"KRN",19,4766,10.1)
Define User Classes
"KRN",19,4766,20)
D EN^VALM("USR DEFINE CLASSES")
"KRN",19,4766,99.1)
57026,35309
"KRN",19,4766,"U")
USER CLASS DEFINITION
"KRN",19,4767,-1)
0^88
"KRN",19,4767,0)
TIUFH EDIT DDEFS CLIN^Edit Document Definitions^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^^^
"KRN",19,4767,1,0)
^^6^6^2970220^^^
"KRN",19,4767,1,1,0)
The Edit Document Definitions Option lets you view and edit entries.
"KRN",19,4767,1,2,0)
 
"KRN",19,4767,1,3,0)
Entries are presented in hierarchy order.  ITEMS of an entry are in
"KRN",19,4767,1,4,0)
Sequence order, or if they have no Sequence, in alphabetic order by Menu
"KRN",19,4767,1,5,0)
Text, and are indented below the entry.  Since Objects do not belong to
"KRN",19,4767,1,6,0)
the hierarchy, they cannot be viewed/edited using the Edit Option.
"KRN",19,4767,15)

"KRN",19,4767,20)
N TIUFWHO S TIUFWHO="C" D EN^TIUFH
"KRN",19,4767,26)

"KRN",19,4767,"U")
EDIT DOCUMENT DEFINITIONS
"KRN",19,4813,-1)
0^69
"KRN",19,4813,0)
TIU REVIEW SCREEN READ ONLY^Multiple Patient Documents^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,4813,1,0)
^^1^1^2950426^^
"KRN",19,4813,1,1,0)
Drives Text Intgration Utilities Review Screen.
"KRN",19,4813,15)
K TIUEDT,TIULDT
"KRN",19,4813,20)
D EN^VALM("TIU REVIEW SCREEN READ ONLY")
"KRN",19,4813,99)
55480,26973
"KRN",19,4813,"U")
MULTIPLE PATIENT DOCUMENTS
"KRN",19,4814,-1)
0^4
"KRN",19,4814,0)
TIU BROWSE DOCUMENT MGR^Individual Patient Document^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,4814,1,0)
^^2^2^2950426^^^
"KRN",19,4814,1,1,0)
Allows the user to interactively review, edit, or sign patient Clinical
"KRN",19,4814,1,2,0)
Documents.
"KRN",19,4814,20)
K MAIN D MAIN^TIUBRWS("TIU BROWSE FOR MGR")
"KRN",19,4814,"U")
INDIVIDUAL PATIENT DOCUMENT
"KRN",19,4815,-1)
0^5
"KRN",19,4815,0)
TIU BROWSE DOCUMENT MRT^Individual Patient Document^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,4815,1,0)
^^2^2^2950426^^^
"KRN",19,4815,1,1,0)
Allows the user to interactively review, edit, or sign patient Clinical
"KRN",19,4815,1,2,0)
Documents.
"KRN",19,4815,20)
K ORVP D MAIN^TIUBRWS("TIU BROWSE FOR MRT")
"KRN",19,4815,"U")
INDIVIDUAL PATIENT DOCUMENT
"KRN",19,4816,-1)
0^6
"KRN",19,4816,0)
TIU BROWSE DOCUMENT READ ONLY^Individual Patient Document^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,4816,1,0)
^^2^2^2950426^^^
"KRN",19,4816,1,1,0)
Allows the user to interactively review, edit, or sign patient Clinical
"KRN",19,4816,1,2,0)
Documents.
"KRN",19,4816,20)
D MAIN^TIUBRWS("TIU BROWSE FOR READ ONLY")
"KRN",19,4816,"U")
INDIVIDUAL PATIENT DOCUMENT
"KRN",19,4817,-1)
0^40
"KRN",19,4817,0)
TIU MAIN MENU REMOTE USER^Text Integration Utilities (Remote User)^^M^^^^^^^^TEXT INTEGRATION UTILITIES^^1^^^1
"KRN",19,4817,1,0)
^^4^4^2950426^^
"KRN",19,4817,1,1,0)
This option allows remote users (e.g., VBA RO personnel) to access only
"KRN",19,4817,1,2,0)
those documents which have been completed (i.e., legally authenticated by
"KRN",19,4817,1,3,0)
signature or cosignature, if necessary), to facilitate processing of claims
"KRN",19,4817,1,4,0)
on a need-to-know basis.
"KRN",19,4817,10,0)
^19.01IP^2^2
"KRN",19,4817,10,1,0)
4816^1^1
"KRN",19,4817,10,1,"^")
TIU BROWSE DOCUMENT READ ONLY
"KRN",19,4817,10,2,0)
4813^2^2
"KRN",19,4817,10,2,"^")
TIU REVIEW SCREEN READ ONLY
"KRN",19,4817,20)
Q
"KRN",19,4817,26)
W !!,$$CENTER^TIULS("--- Remote User Menu ---")
"KRN",19,4817,99)
57061,57358
"KRN",19,4817,99.1)
56440,24316
"KRN",19,4817,"U")
TEXT INTEGRATION UTILITIES (RE
"KRN",19,4893,-1)
0^103
"KRN",19,4893,0)
USR LIST MEMBERSHIP BY USER^List Membership by User^^A^^^^^^^^^^1
"KRN",19,4893,1,0)
^^2^2^2950523^^^
"KRN",19,4893,1,1,0)
This option allows review, addition, editing, and removal of individual
"KRN",19,4893,1,2,0)
members to and from User Classes.
"KRN",19,4893,20)
D MAIN^USRULST
"KRN",19,4893,"U")
LIST MEMBERSHIP BY USER
"KRN",19,4894,-1)
0^100
"KRN",19,4894,0)
USR CLASS MANAGEMENT MENU^User Class Management^^M^^^^^^^^AUTHORIZATION/SUBSCRIPTION^^1^^^1
"KRN",19,4894,1,0)
^^2^2^2970124^^^^
"KRN",19,4894,1,1,0)
This is the menu of options for management of User Class Definition and
"KRN",19,4894,1,2,0)
Membership.
"KRN",19,4894,10,0)
^19.01IP^5^5
"KRN",19,4894,10,1,0)
4766^1^1
"KRN",19,4894,10,1,"^")
USR CLASS DEFINITION
"KRN",19,4894,10,2,0)
4893^2^2
"KRN",19,4894,10,2,"^")
USR LIST MEMBERSHIP BY USER
"KRN",19,4894,10,3,0)
4895^3^3
"KRN",19,4894,10,3,"^")
USR LIST MEMBERSHIP BY CLASS
"KRN",19,4894,10,4,0)
5291^4^4
"KRN",19,4894,10,4,"^")
USR EDIT BUSINESS RULES
"KRN",19,4894,10,5,0)
5924^5^5
"KRN",19,4894,10,5,"^")
USR BUSINESS RULE MANAGEMENT
"KRN",19,4894,20)
Q
"KRN",19,4894,26)
W !!,$$CENTER^TIULS("--- User Class Management Menu ---")
"KRN",19,4894,99)
57061,57411
"KRN",19,4894,99.1)
57025,18084
"KRN",19,4894,"U")
USER CLASS MANAGEMENT
"KRN",19,4895,-1)
0^102
"KRN",19,4895,0)
USR LIST MEMBERSHIP BY CLASS^List Membership by Class^^A^^^^^^^^^^1
"KRN",19,4895,1,0)
^^2^2^2950523^^^
"KRN",19,4895,1,1,0)
This option allows review, addition, editing, and removal of individual
"KRN",19,4895,1,2,0)
members to and from User Classes.
"KRN",19,4895,20)
D MAIN^USRMLST
"KRN",19,4895,"U")
LIST MEMBERSHIP BY CLASS
"KRN",19,5094,-1)
0^83
"KRN",19,5094,0)
TIUFA SORT DDEFS CLIN^Sort Document Definitions^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^^^
"KRN",19,5094,1,0)
^^5^5^2970220^
"KRN",19,5094,1,1,0)
The Sort Document Definitions Option lets you select sort criteria.  It
"KRN",19,5094,1,2,0)
then displays selected entries in alphabetic order by Name, rather than in
"KRN",19,5094,1,3,0)
hierarchy order. Depending on sort criteria, entries can include Objects.
"KRN",19,5094,1,4,0)
 
"KRN",19,5094,1,5,0)
The Sort Option lets you view and edit entries.
"KRN",19,5094,15)

"KRN",19,5094,20)
N TIUFWHO S TIUFWHO="C" D EN^TIUFA
"KRN",19,5094,26)

"KRN",19,5094,"U")
SORT DOCUMENT DEFINITIONS
"KRN",19,5101,-1)
0^24
"KRN",19,5101,0)
TIU GMRPN CONVERSION^Progress Note Conversion^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5101,1,0)
^^3^3^2970226^^^^
"KRN",19,5101,1,1,0)
Menu containing options for moving progress notes from the 
"KRN",19,5101,1,2,0)
Generic Progress Note File ^GMR(121 to the Text Integration
"KRN",19,5101,1,3,0)
Document File ^TIU(8925.
"KRN",19,5101,10,0)
^19.01IP^9^9
"KRN",19,5101,10,1,0)
5102^CV^1
"KRN",19,5101,10,1,"^")
TIU GMRPN CONVERT
"KRN",19,5101,10,2,0)
5103^RS^4
"KRN",19,5101,10,2,"^")
TIU GMRPN RESTART
"KRN",19,5101,10,7,0)
5249^SG^5
"KRN",19,5101,10,7,"^")
TIU GMRPN SINGLE
"KRN",19,5101,10,8,0)
5341^PM^2
"KRN",19,5101,10,8,"^")
TIU GMRPN MONITOR
"KRN",19,5101,10,9,0)
6021^HC^3
"KRN",19,5101,10,9,"^")
TIU GMRPN HALT
"KRN",19,5101,99)
57061,57412
"KRN",19,5101,"U")
PROGRESS NOTE CONVERSION
"KRN",19,5102,-1)
0^25
"KRN",19,5102,0)
TIU GMRPN CONVERT^Convert Progress Notes^^R^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5102,1,0)
^^2^2^2950620^^
"KRN",19,5102,1,1,0)
This option will setup and queue the Generic Progress Note ^GMR(121
"KRN",19,5102,1,2,0)
file for transfer to the Text Integration Document File ^TIU(8925.
"KRN",19,5102,25)
ENTRY^TIUPNCV4
"KRN",19,5102,"U")
CONVERT PROGRESS NOTES
"KRN",19,5103,-1)
0^27
"KRN",19,5103,0)
TIU GMRPN RESTART^Restart Progress Note Conversion^^R^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5103,1,0)
^^1^1^2960304^^
"KRN",19,5103,1,1,0)
Option allows re-start of incomplete conversion process.
"KRN",19,5103,25)
RESTART^TIUPNCV4
"KRN",19,5103,"U")
RESTART PROGRESS NOTE CONVERSI
"KRN",19,5107,-1)
0^46
"KRN",19,5107,0)
TIU PRINT PN^Progress Notes Print Options^^M^^^^^^^^TEXT INTEGRATION UTILITIES^^^^^1
"KRN",19,5107,1,0)
^^1^1^2960919^^^^
"KRN",19,5107,1,1,0)
Menu for printing Progress Notes.
"KRN",19,5107,10,0)
^19.01IP^3^3
"KRN",19,5107,10,1,0)
5108^PT
"KRN",19,5107,10,1,"^")
TIU PRINT PN PT
"KRN",19,5107,10,2,0)
5109
"KRN",19,5107,10,2,"^")
TIU PRINT PN AUTHOR
"KRN",19,5107,10,3,0)
5132
"KRN",19,5107,10,3,"^")
TIU PRINT PN LOC
"KRN",19,5107,26)
W !!,$$CENTER^TIULS("---Print Progress Notes---")
"KRN",19,5107,99)
57061,57365
"KRN",19,5107,99.1)
56678,39347
"KRN",19,5107,"U")
PROGRESS NOTES PRINT OPTIONS
"KRN",19,5108,-1)
0^56
"KRN",19,5108,0)
TIU PRINT PN PT^Patient- Print Progress Notes^^R^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5108,1,0)
^^2^2^2950702^
"KRN",19,5108,1,1,0)
This option print/displays progress notes for a selected patient, by
"KRN",19,5108,1,2,0)
selected date range.
"KRN",19,5108,25)
PT^TIUPRPN3
"KRN",19,5108,"U")
PATIENT- PRINT PROGRESS NOTES
"KRN",19,5109,-1)
0^48
"KRN",19,5109,0)
TIU PRINT PN AUTHOR^Author- Print Progress Notes^^R^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5109,1,0)
^^2^2^2950702^
"KRN",19,5109,1,1,0)
The option produces CHART or WORK copies of Progress Notes by Author,
"KRN",19,5109,1,2,0)
for a selected date range.
"KRN",19,5109,25)
AUTHOR^TIUPRPN3
"KRN",19,5109,"U")
AUTHOR- PRINT PROGRESS NOTES
"KRN",19,5125,-1)
0^84
"KRN",19,5125,0)
TIUFA SORT DDEFS MGR^Sort Document Definitions^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^^^
"KRN",19,5125,1,0)
^^5^5^2970220^
"KRN",19,5125,1,1,0)
The Sort Document Definitions Option lets you select sort criteria.  It
"KRN",19,5125,1,2,0)
then displays selected entries in alphabetic order by Name, rather than in
"KRN",19,5125,1,3,0)
hierarchy order.  Depending on sort criteria, entries can include Objects.
"KRN",19,5125,1,4,0)
 
"KRN",19,5125,1,5,0)
The Sort Option lets you view and edit entries.
"KRN",19,5125,15)

"KRN",19,5125,20)
N TIUFWHO S TIUFWHO="M" D EN^TIUFA
"KRN",19,5125,26)

"KRN",19,5125,99)
56434,81210
"KRN",19,5125,99.1)
56725,54266
"KRN",19,5125,"U")
SORT DOCUMENT DEFINITIONS
"KRN",19,5126,-1)
0^89
"KRN",19,5126,0)
TIUFH EDIT DDEFS MGR^Edit Document Definitions^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^^^
"KRN",19,5126,1,0)
^^6^6^2970220^^^
"KRN",19,5126,1,1,0)
The Edit Document Definitions Option lets you view and edit entries.
"KRN",19,5126,1,2,0)
 
"KRN",19,5126,1,3,0)
Entries are presented in hierarchy order.  ITEMS of an entry are in
"KRN",19,5126,1,4,0)
Sequence order, or if they have no Sequence, in alphabetic order by Menu
"KRN",19,5126,1,5,0)
Text, and are indented below the entry.  Since Objects do not belong to
"KRN",19,5126,1,6,0)
the hierarchy, they cannot be viewed/edited using the Edit Option.
"KRN",19,5126,15)

"KRN",19,5126,20)
N TIUFWHO S TIUFWHO="M" D EN^TIUFH
"KRN",19,5126,26)

"KRN",19,5126,99)
56434,85597
"KRN",19,5126,"U")
EDIT DOCUMENT DEFINITIONS
"KRN",19,5127,-1)
0^80
"KRN",19,5127,0)
TIUF DOCUMENT DEFINITION CLIN^Document Definitions (Clinician)^^M^^^^^^^y^TEXT INTEGRATION UTILITIES^^^^^1
"KRN",19,5127,1,0)
^^3^3^2970220^^^^
"KRN",19,5127,1,1,0)
Document Definition menu for Clinicians.  Lets you view any entry, and
"KRN",19,5127,1,2,0)
edit an entry if you own it.  In particular, lets you enter/edit
"KRN",19,5127,1,3,0)
boilerplate text for an entry you own.
"KRN",19,5127,10,0)
^19.01PI^3^3
"KRN",19,5127,10,1,0)
4767^1^1
"KRN",19,5127,10,1,"^")
TIUFH EDIT DDEFS CLIN
"KRN",19,5127,10,2,0)
5094^2^2
"KRN",19,5127,10,2,"^")
TIUFA SORT DDEFS CLIN
"KRN",19,5127,10,3,0)
5998^3^3
"KRN",19,5127,10,3,"^")
TIUFJ VIEW OBJECTS CLIN
"KRN",19,5127,15)

"KRN",19,5127,20)

"KRN",19,5127,26)
W !!,$$CENTER^TIULS("--- Clinician Document Definition Menu ---")
"KRN",19,5127,99)
57033,56918
"KRN",19,5127,"U")
DOCUMENT DEFINITIONS (CLINICIA
"KRN",19,5129,-1)
0^81
"KRN",19,5129,0)
TIUF DOCUMENT DEFINITION MGR^Document Definitions (Manager)^^M^^^^^^^y^TEXT INTEGRATION UTILITIES^^^^^1
"KRN",19,5129,1,0)
^^10^10^2970220^^
"KRN",19,5129,1,1,0)
Document Definition menu for Managers/IRM.  Lets you create new
"KRN",19,5129,1,2,0)
entries, delete appropriate entries, copy entries, and edit entries,
"KRN",19,5129,1,3,0)
including Technical M fields and Upload fields.
"KRN",19,5129,1,4,0)
 
"KRN",19,5129,1,5,0)
Editing Exception: National Standard entries cannot be edited/deleted on
"KRN",19,5129,1,6,0)
ANY menu.
"KRN",19,5129,1,7,0)
 
"KRN",19,5129,1,8,0)
The Manager menu overrides Ownership for editing, but not for deleting
"KRN",19,5129,1,9,0)
entries; a manager can edit any entry regardless of owner, but must own
"KRN",19,5129,1,10,0)
an entry in order to delete it.
"KRN",19,5129,10,0)
^19.01PI^4^4
"KRN",19,5129,10,1,0)
5126^1^1
"KRN",19,5129,10,1,"^")
TIUFH EDIT DDEFS MGR
"KRN",19,5129,10,2,0)
5125^2^2
"KRN",19,5129,10,2,"^")
TIUFA SORT DDEFS MGR
"KRN",19,5129,10,3,0)
5254^3^3
"KRN",19,5129,10,3,"^")
TIUFC CREATE DDEFS MGR
"KRN",19,5129,10,4,0)
5997^4^4
"KRN",19,5129,10,4,"^")
TIUFJ CREATE OBJECTS MGR
"KRN",19,5129,20)

"KRN",19,5129,26)
W !!,$$CENTER^TIULS("--- Manager Document Definition Menu ---")
"KRN",19,5129,99)
57033,56941
"KRN",19,5129,"U")
DOCUMENT DEFINITIONS (MANAGER)
"KRN",19,5131,-1)
0^15
"KRN",19,5131,0)
TIU DOCUMENT DEFINITION EDIT^Edit Document Definition^^E^^^^^^^^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,5131,1,0)
^^1^1^2960506^^^
"KRN",19,5131,1,1,0)
This option allows editing of document definitions.
"KRN",19,5131,10.1)
Edit Document Definition
"KRN",19,5131,15)
K TIUFPRIV
"KRN",19,5131,20)
S TIUFPRIV=1
"KRN",19,5131,30)
TIU(8925.1,
"KRN",19,5131,31)
AEMQL
"KRN",19,5131,50)
TIU(8925.1,
"KRN",19,5131,51)
[TIU EDIT DOCUMENT TYPE]
"KRN",19,5131,99.1)
56132,47161
"KRN",19,5131,"U")
EDIT DOCUMENT DEFINITION
"KRN",19,5132,-1)
0^52
"KRN",19,5132,0)
TIU PRINT PN LOC^Location- Print Progress Notes^^R^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5132,1,0)
^^2^2^2960211^
"KRN",19,5132,1,1,0)
This option will print CHART or WORK copies of Progress Notes.  If CHART
"KRN",19,5132,1,2,0)
is selected, each note will start on a new page.
"KRN",19,5132,25)
LOC^TIUPRPN3
"KRN",19,5132,"U")
LOCATION- PRINT PROGRESS NOTES
"KRN",19,5140,-1)
0^76
"KRN",19,5140,0)
TIU UPLOAD DOCUMENTS^Upload Documents^^A^^^^^^^y^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5140,1,0)
^^4^4^2950818^
"KRN",19,5140,1,1,0)
This option enables the user to upload transcribed ASCII documents
"KRN",19,5140,1,2,0)
in batch mode, either from remote microcomputers, using ASCII or
"KRN",19,5140,1,3,0)
KERMIT protocol upload, or from Host Files (i.e., DOS or VMS ASCII files)
"KRN",19,5140,1,4,0)
on the host system.
"KRN",19,5140,20)
D MAIN^TIUUPLD
"KRN",19,5140,99)
55420,26251
"KRN",19,5140,"U")
UPLOAD DOCUMENTS
"KRN",19,5141,-1)
0^77
"KRN",19,5141,0)
TIU UPLOAD HELP^Help for Upload Utility^^A^^^^^^^y^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5141,1,0)
^^4^4^2950818^
"KRN",19,5141,1,1,0)
Displays information on the formats of headers for dictated documents that
"KRN",19,5141,1,2,0)
are transcribed off-line and uploaded into DHCP.  Also displays "blank"
"KRN",19,5141,1,3,0)
character, major delimiter and end of message signal as defined by your
"KRN",19,5141,1,4,0)
site.
"KRN",19,5141,20)
D MAIN^TIUTHLP
"KRN",19,5141,99)
55720,40354
"KRN",19,5141,"U")
HELP FOR UPLOAD UTILITY
"KRN",19,5142,-1)
0^78
"KRN",19,5142,0)
TIU UPLOAD MENU^Upload Menu^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5142,1,0)
^^3^3^2950818^^
"KRN",19,5142,1,1,0)
This menu includes options to upload batches of documents, and to obtain
"KRN",19,5142,1,2,0)
help on the header formats for the various documents which have been
"KRN",19,5142,1,3,0)
defined for upload by your site.
"KRN",19,5142,10,0)
^19.01IP^4^4
"KRN",19,5142,10,3,0)
5141^2^2
"KRN",19,5142,10,3,"^")
TIU UPLOAD HELP
"KRN",19,5142,10,4,0)
5140^1^1
"KRN",19,5142,10,4,"^")
TIU UPLOAD DOCUMENTS
"KRN",19,5142,99)
57061,57368
"KRN",19,5142,"U")
UPLOAD MENU
"KRN",19,5163,-1)
0^22
"KRN",19,5163,0)
TIU ENTER/EDIT PN^Entry of Progress Note^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5163,1,0)
^^2^2^2951109^^
"KRN",19,5163,1,1,0)
This option allows end-users to enter/edit Progress Notes directly
"KRN",19,5163,1,2,0)
on-line.
"KRN",19,5163,20)
K ORVP D MAIN^TIUEDIT(3)
"KRN",19,5163,99)
55341,57619
"KRN",19,5163,99.1)
56680,45738
"KRN",19,5163,"U")
ENTRY OF PROGRESS NOTE
"KRN",19,5164,-1)
0^38
"KRN",19,5164,0)
TIU MAIN MENU PN CLINICIAN^Progress Notes User Menu^^M^^^^^^^^TEXT INTEGRATION UTILITIES^^1^^^1
"KRN",19,5164,1,0)
^^1^1^2960918^^^^
"KRN",19,5164,1,1,0)
Main Menu for Progress Notes application.
"KRN",19,5164,10,0)
^19.01IP^9^9
"KRN",19,5164,10,1,0)
5163^1^1
"KRN",19,5164,10,1,"^")
TIU ENTER/EDIT PN
"KRN",19,5164,10,2,0)
5166^2^2
"KRN",19,5164,10,2,"^")
TIU BROWSE PN CLINICIAN
"KRN",19,5164,10,3,0)
5165^4^5
"KRN",19,5164,10,3,"^")
TIU REVIEW PN CLINICIAN
"KRN",19,5164,10,4,0)
5242^5^6
"KRN",19,5164,10,4,"^")
TIU PRINT PN USER MENU
"KRN",19,5164,10,5,0)
5167^3^4
"KRN",19,5164,10,5,"^")
TIU REVIEW PN UNSIGNED
"KRN",19,5164,10,6,0)
5252^6^7
"KRN",19,5164,10,6,"^")
TIU LIST NOTES BY TITLE
"KRN",19,5164,10,7,0)
5459^7^8
"KRN",19,5164,10,7,"^")
TIU SEARCH BY PATIENT/TITLE
"KRN",19,5164,10,8,0)
5179^8^9
"KRN",19,5164,10,8,"^")
TIU PERSONAL PREFERENCE MENU
"KRN",19,5164,10,9,0)
6444^2b^3
"KRN",19,5164,10,9,"^")
TIU OE/RR REVIEW PROG NOTES
"KRN",19,5164,20)
S GMRPEN=1
"KRN",19,5164,26)
W !!,$$CENTER^TIULS("--- Clinician's Progress Notes Menu ---")
"KRN",19,5164,99)
57062,32213
"KRN",19,5164,99.1)
56540,53212
"KRN",19,5164,"U")
PROGRESS NOTES USER MENU
"KRN",19,5165,-1)
0^64
"KRN",19,5165,0)
TIU REVIEW PN CLINICIAN^Show Progress Notes Across Patients^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,5165,1,0)
^^1^1^2970113^^^^
"KRN",19,5165,1,1,0)
Drives Text Intgration Utilities Progress Notes Review Screen.
"KRN",19,5165,15)
K TIUEDT,TIULDT
"KRN",19,5165,20)
D EN^VALM("TIU REVIEW PN CLINICIAN")
"KRN",19,5165,99)
55480,26973
"KRN",19,5165,"U")
SHOW PROGRESS NOTES ACROSS PAT
"KRN",19,5166,-1)
0^10
"KRN",19,5166,0)
TIU BROWSE PN CLINICIAN^Review Progress Notes by Patient^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5166,1,0)
^^2^2^2950925^
"KRN",19,5166,1,1,0)
Allows the user to interactively review, edit, or sign patient Progress
"KRN",19,5166,1,2,0)
Notes.
"KRN",19,5166,20)
K ORVP D MAIN^TIUBRWS("TIU BROWSE FOR CLINICIAN",3)
"KRN",19,5166,"U")
REVIEW PROGRESS NOTES BY PATIE
"KRN",19,5167,-1)
0^65
"KRN",19,5167,0)
TIU REVIEW PN UNSIGNED^All MY UNSIGNED Progress Notes^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,5167,1,0)
^^1^1^2950925^^
"KRN",19,5167,1,1,0)
Gets all unsigned Progress Notes for review, edit, and signature.
"KRN",19,5167,15)
K TIUQUIK,TIUEDT,TIULDT
"KRN",19,5167,20)
S TIUQUIK=1 D EN^VALM("TIU REVIEW SCREEN PN UNSIGNED")
"KRN",19,5167,99)
55441,53727
"KRN",19,5167,"U")
ALL MY UNSIGNED PROGRESS NOTES
"KRN",19,5168,-1)
0^34
"KRN",19,5168,0)
TIU MAIN MENU DS CLINICIAN^Discharge Summary User Menu^^M^^^^^^^^TEXT INTEGRATION UTILITIES^^1^^^1
"KRN",19,5168,1,0)
^^1^1^2960326^^^
"KRN",19,5168,1,1,0)
Main Menu for Discharge Summary application.
"KRN",19,5168,10,0)
^19.01IP^5^4
"KRN",19,5168,10,2,0)
5169^1^1
"KRN",19,5168,10,2,"^")
TIU BROWSE DS CLINICIAN
"KRN",19,5168,10,3,0)
5170^3^3
"KRN",19,5168,10,3,"^")
TIU REVIEW DS CLINICIAN
"KRN",19,5168,10,5,0)
5171^2^2
"KRN",19,5168,10,5,"^")
TIU REVIEW DS UNSIGNED
"KRN",19,5168,20)
S GMRPEN=1 Q
"KRN",19,5168,26)
W !!,$$CENTER^TIULS("--- Clinician's Discharge Summary Menu ---")
"KRN",19,5168,99)
57061,57377
"KRN",19,5168,99.1)
56930,29465
"KRN",19,5168,"U")
DISCHARGE SUMMARY USER MENU
"KRN",19,5169,-1)
0^7
"KRN",19,5169,0)
TIU BROWSE DS CLINICIAN^Individual Patient Discharge Summary^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5169,1,0)
^^2^2^2960502^
"KRN",19,5169,1,1,0)
Allows the user to interactively review, edit, or sign patient Discharge
"KRN",19,5169,1,2,0)
Summaries.
"KRN",19,5169,20)
D MAIN^TIUBRWS("TIU BROWSE FOR CLINICIAN",244)
"KRN",19,5169,"U")
INDIVIDUAL PATIENT DISCHARGE S
"KRN",19,5170,-1)
0^61
"KRN",19,5170,0)
TIU REVIEW DS CLINICIAN^Multiple Patient Discharge Summaries^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,5170,1,0)
^^1^1^2960409^^^
"KRN",19,5170,1,1,0)
Drives Text Integration Utilities Discharge Summary Review Screen.
"KRN",19,5170,15)
K TIUEDT,TIULDT
"KRN",19,5170,20)
D EN^VALM("TIU REVIEW DS CLINICIAN")
"KRN",19,5170,99)
55480,26973
"KRN",19,5170,"U")
MULTIPLE PATIENT DISCHARGE SUM
"KRN",19,5171,-1)
0^62
"KRN",19,5171,0)
TIU REVIEW DS UNSIGNED^All MY UNSIGNED Discharge Summaries^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,5171,1,0)
^^1^1^2950925^^^^
"KRN",19,5171,1,1,0)
Gets all unsigned Discharge Summaries for review, edit, and signature.
"KRN",19,5171,15)
K TIUQUIK,TIUEDT,TIULDT
"KRN",19,5171,20)
S TIUQUIK=1 D EN^VALM("TIU REVIEW SCREEN DS UNSIGNED")
"KRN",19,5171,99)
55441,53727
"KRN",19,5171,"U")
ALL MY UNSIGNED DISCHARGE SUMM
"KRN",19,5172,-1)
0^21
"KRN",19,5172,0)
TIU ENTER/EDIT DS^Enter/Edit Discharge Summary^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5172,1,0)
^^2^2^2960304^
"KRN",19,5172,1,1,0)
This option allows end-users to enter/edit Discharge Summaries Notes
"KRN",19,5172,1,2,0)
directly on-line.
"KRN",19,5172,20)
K ORVP D MAIN^TIUEDIT(244)
"KRN",19,5172,99)
55341,57619
"KRN",19,5172,99.1)
56930,29465
"KRN",19,5172,"U")
ENTER/EDIT DISCHARGE SUMMARY
"KRN",19,5173,-1)
0^33
"KRN",19,5173,0)
TIU MAIN MENU CLINICIAN^Progress Notes/Discharge Summary [TIU]^^M^^^^^^^y^TEXT INTEGRATION UTILITIES^^1^^^1
"KRN",19,5173,1,0)
^^1^1^2960918^^^^
"KRN",19,5173,1,1,0)
Main Text Integration Utilities menu for Clinicians.
"KRN",19,5173,10,0)
^19.01IP^13^13
"KRN",19,5173,10,10,0)
5164^1^1
"KRN",19,5173,10,10,"^")
TIU MAIN MENU PN CLINICIAN
"KRN",19,5173,10,11,0)
5168^2^2
"KRN",19,5173,10,11,"^")
TIU MAIN MENU DS CLINICIAN
"KRN",19,5173,10,12,0)
4755^3^3
"KRN",19,5173,10,12,"^")
TIU MAIN MENU MIXED CLINICIAN
"KRN",19,5173,10,13,0)
5179^4^4
"KRN",19,5173,10,13,"^")
TIU PERSONAL PREFERENCE MENU
"KRN",19,5173,15)

"KRN",19,5173,20)
S GMRPEN=1 D EDITSAVE^TIUEDI2(.DUZ)
"KRN",19,5173,26)
W !!,$$CENTER^TIULS("--- Clinician's Menu ---")
"KRN",19,5173,99)
57061,57382
"KRN",19,5173,99.1)
55460,35223
"KRN",19,5173,"U")
PROGRESS NOTES/DISCHARGE SUMMA
"KRN",19,5174,-1)
0^79
"KRN",19,5174,0)
TIU UPLOAD PARAMETER EDIT^Modify Upload Parameters^^A^^^^^^^y^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5174,1,0)
^^2^2^2960910^^^
"KRN",19,5174,1,1,0)
This option allows the definition and modification of parameters for the
"KRN",19,5174,1,2,0)
batch upload of documents into DHCP.
"KRN",19,5174,20)
D MAIN^TIUUPEDT
"KRN",19,5174,99.1)
57055,56051
"KRN",19,5174,"U")
MODIFY UPLOAD PARAMETERS
"KRN",19,5175,-1)
0^1
"KRN",19,5175,0)
TIU BASIC PARAMETER EDIT^Basic TIU Parameters^^A^^^^^^^y^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5175,1,0)
^^2^2^2960910^^
"KRN",19,5175,1,1,0)
This option allows the user to enter the basic, or general parameters which
"KRN",19,5175,1,2,0)
govern the behavior of the Text Integration Utilities.
"KRN",19,5175,20)
D MAIN^TIUBPEDT
"KRN",19,5175,"U")
BASIC TIU PARAMETERS
"KRN",19,5176,-1)
0^74
"KRN",19,5176,0)
TIU SET-UP MENU^TIU Parameters Menu^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5176,1,0)
^^3^3^2970103^^^
"KRN",19,5176,1,1,0)
This option allows the Clinical Coordinator or IRM Application Specialist
"KRN",19,5176,1,2,0)
to set up either the Basic or Upload Parameters for Text Integration
"KRN",19,5176,1,3,0)
Utilities (TIU).
"KRN",19,5176,10,0)
^19.01IP^5^5
"KRN",19,5176,10,1,0)
5175^1^1
"KRN",19,5176,10,1,"^")
TIU BASIC PARAMETER EDIT
"KRN",19,5176,10,2,0)
5174^2^2
"KRN",19,5176,10,2,"^")
TIU UPLOAD PARAMETER EDIT
"KRN",19,5176,10,3,0)
5286^3^3
"KRN",19,5176,10,3,"^")
TIU DOCUMENT PARAMETER EDIT
"KRN",19,5176,10,4,0)
5488^4^4
"KRN",19,5176,10,4,"^")
TIU PRINT PN LOC PARAMS
"KRN",19,5176,10,5,0)
5489^5^5
"KRN",19,5176,10,5,"^")
TIU PRINT PN DIV PARAMS
"KRN",19,5176,99)
57061,57411
"KRN",19,5176,"U")
TIU PARAMETERS MENU
"KRN",19,5177,-1)
0^63
"KRN",19,5177,0)
TIU REVIEW FILING EVENTS^Review Upload Filing Events^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,5177,1,0)
^^6^6^2951004^
"KRN",19,5177,1,1,0)
This option allows the user to generate a list of all upload filing
"KRN",19,5177,1,2,0)
events (i.e., SUCCESSES, FILING ERRORS, or MISSING FIELD ERRORS by status
"KRN",19,5177,1,3,0)
(e.g., RESOLVED, UNRESOLVED, or ALL) by date range, and to act on selected
"KRN",19,5177,1,4,0)
errors to either print the corresponding error records, or resolve the
"KRN",19,5177,1,5,0)
error (e.g., correct the Patient SSN or Admission date), and retry the
"KRN",19,5177,1,6,0)
filer.
"KRN",19,5177,15)
K TIUEDT,TIULDT
"KRN",19,5177,20)
D EN^VALM("TIU REVIEW FILING EVENTS")
"KRN",19,5177,99)
55431,50702
"KRN",19,5177,"U")
REVIEW UPLOAD FILING EVENTS
"KRN",19,5178,-1)
0^45
"KRN",19,5178,0)
TIU PREFERRED DOCUMENT LIST^Document List Management^^A^^^^^^^y^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5178,1,0)
^^6^6^2970214^^
"KRN",19,5178,1,1,0)
Allows individual users to specify which titles they wish to choose
"KRN",19,5178,1,2,0)
from when asked to select from a given Class of TIU Documents (e.g., when
"KRN",19,5178,1,3,0)
selecting from the class Progress Notes, I'd like to see the Titles Lipid
"KRN",19,5178,1,4,0)
Clinic Note, History & Physical, Interservice Transfer Note, and Discharge
"KRN",19,5178,1,5,0)
Planning, in that order). Also allows the user to specify a default title
"KRN",19,5178,1,6,0)
for the selected Class.
"KRN",19,5178,20)
D MAIN^TIUPLST
"KRN",19,5178,"U")
DOCUMENT LIST MANAGEMENT
"KRN",19,5179,-1)
0^43
"KRN",19,5179,0)
TIU PERSONAL PREFERENCE MENU^Personal Preferences^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5179,1,0)
^^6^6^2961101^^^^
"KRN",19,5179,1,1,0)
This menu allows users to enter either their preferences with respect to
"KRN",19,5179,1,2,0)
the behavior of the TIU Package (e.g., DEFAULT LOCATION, REVIEW SCREEN
"KRN",19,5179,1,3,0)
SORT FIELD and SORT ORDER, DISPLAY MENUS, PATIENT SELECTION PREFERENCE,
"KRN",19,5179,1,4,0)
etc.), or to specify their "pick lists" for document selection when
"KRN",19,5179,1,5,0)
composing or editing documents (e.g., when choosing from the document
"KRN",19,5179,1,6,0)
class Progress Notes, let me see these three specific titles, etc.).
"KRN",19,5179,10,0)
^19.01IP^2^2
"KRN",19,5179,10,1,0)
5178^2^2
"KRN",19,5179,10,1,"^")
TIU PREFERRED DOCUMENT LIST
"KRN",19,5179,10,2,0)
5180^1^1
"KRN",19,5179,10,2,"^")
TIU PERSONAL PREFERENCES
"KRN",19,5179,99)
57061,57383
"KRN",19,5179,"U")
PERSONAL PREFERENCES
"KRN",19,5180,-1)
0^44
"KRN",19,5180,0)
TIU PERSONAL PREFERENCES^Personal Preferences^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5180,1,0)
^^3^3^2961101^^
"KRN",19,5180,1,1,0)
Allows users to specify their preferences with respect to the behavior of
"KRN",19,5180,1,2,0)
the user-configurable features of the Text Integration Utilities (TIU)
"KRN",19,5180,1,3,0)
package.
"KRN",19,5180,20)
D MAIN^TIUPREF
"KRN",19,5180,"U")
PERSONAL PREFERENCES
"KRN",19,5181,-1)
0^14
"KRN",19,5181,0)
TIU DISCHARGE SUMMARY CONVERT^Convert Discharge Summaries (*** BE CERTAIN ***)^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5181,1,0)
^^7^7^2961120^^
"KRN",19,5181,1,1,0)
This option is used to invoke the process which converts Discharge
"KRN",19,5181,1,2,0)
Summaries from the Discharge Summary version 1 database and format to that
"KRN",19,5181,1,3,0)
supported by TIU.
"KRN",19,5181,1,4,0)
 
"KRN",19,5181,1,5,0)
CAUTION:  BE CERTAIN YOU ARE READY TO IMPLEMENT DISCHARGE SUMMARIES UNDER
"KRN",19,5181,1,6,0)
          TIU BEFORE INVOKING THIS OPTION...ALTHOUGH REVERSAL IS POSSIBLE,
"KRN",19,5181,1,7,0)
          IT MAY PROVE TO BE QUITE COMPLICATED.
"KRN",19,5181,20)
D MAIN^TIUDSCNV
"KRN",19,5181,"U")
CONVERT DISCHARGE SUMMARIES (*
"KRN",19,5182,-1)
0^92
"KRN",19,5182,0)
TIUP PRINT DOCUMENTS^Clinical Document Print^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5182,1,0)
2^^2^2^2960625^
"KRN",19,5182,1,1,0)
This option allows MAS personnel to print CHART or WORK copies of documents 
"KRN",19,5182,1,2,0)
on demand.
"KRN",19,5182,20)
D MAIN^TIUPRD(38)
"KRN",19,5182,"U")
CLINICAL DOCUMENT PRINT
"KRN",19,5183,-1)
0^91
"KRN",19,5183,0)
TIUP PRINT DISCHARGE SUMMARIES^Discharge Summary Print^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5183,1,0)
2^^2^2^2960625^
"KRN",19,5183,1,1,0)
This option allows MAS personnel to print CHART or WORK copies of Discharge 
"KRN",19,5183,1,2,0)
Summaries on demand.
"KRN",19,5183,20)
D MAIN^TIUPRD(244)
"KRN",19,5183,"U")
DISCHARGE SUMMARY PRINT
"KRN",19,5184,-1)
0^94
"KRN",19,5184,0)
TIUP PRINT PROGRESS NOTES^Progress Note Print^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5184,1,0)
^^2^2^2960516^^
"KRN",19,5184,1,1,0)
This option allows MAS personnel to print CHART or WORK copies of Progress 
"KRN",19,5184,1,2,0)
Notes on demand.
"KRN",19,5184,20)
D MAIN^TIUPRD(3)
"KRN",19,5184,"U")
PROGRESS NOTE PRINT
"KRN",19,5185,-1)
0^93
"KRN",19,5185,0)
TIUP PRINT MENU^Print Document Menu^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5185,1,0)
3
"KRN",19,5185,1,1,0)
This menu allows MAS personnel access to options which print CHART
"KRN",19,5185,1,2,0)
or WORK copies of Discharge Summaries, Progress Notes, or mixed
"KRN",19,5185,1,3,0)
Documents on demand.
"KRN",19,5185,10,0)
^19.01IP^3^3
"KRN",19,5185,10,1,0)
5183^1^1
"KRN",19,5185,10,1,"^")
TIUP PRINT DISCHARGE SUMMARIES
"KRN",19,5185,10,2,0)
5184^2^2
"KRN",19,5185,10,2,"^")
TIUP PRINT PROGRESS NOTES
"KRN",19,5185,10,3,0)
5182^3^3
"KRN",19,5185,10,3,"^")
TIUP PRINT DOCUMENTS
"KRN",19,5185,99)
57061,57387
"KRN",19,5185,"U")
PRINT DOCUMENT MENU
"KRN",19,5186,-1)
0^58
"KRN",19,5186,0)
TIU PRINT PN WARD^Ward- Print Progress Notes^^R^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5186,1,0)
^^4^4^2951103^
"KRN",19,5186,1,1,0)
This option will allow the printing of Progress Notes for ALL patients on
"KRN",19,5186,1,2,0)
the ward at the time the job is queued to print.  All of the notes for a
"KRN",19,5186,1,3,0)
selected date range (regardless of the location of the note) will print.
"KRN",19,5186,1,4,0)
This option is only for WARD locations.
"KRN",19,5186,25)
LOC^TIUPRPN4
"KRN",19,5186,"U")
WARD- PRINT PROGRESS NOTES
"KRN",19,5187,-1)
0^23
"KRN",19,5187,0)
TIU ENTER/EDIT TRANSCRIBER^Enter/Edit Document^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5187,1,0)
^^2^2^2960228^^
"KRN",19,5187,1,1,0)
This option allows end-users to enter/edit clinical documents directly
"KRN",19,5187,1,2,0)
on-line.
"KRN",19,5187,20)
K ORVP D MAIN^TIUEDITR(38)
"KRN",19,5187,99)
55341,57619
"KRN",19,5187,99.1)
56680,45868
"KRN",19,5187,"U")
ENTER/EDIT DOCUMENT
"KRN",19,5242,-1)
0^57
"KRN",19,5242,0)
TIU PRINT PN USER MENU^Progress Notes Print Options^^M^^^^^^^^TEXT INTEGRATION UTILITIES^^^^^1
"KRN",19,5242,1,0)
^^1^1^2960305^^^^
"KRN",19,5242,1,1,0)
Menu for printing Progress Notes.
"KRN",19,5242,10,0)
^19.01IP^4^4
"KRN",19,5242,10,1,0)
5108^PNPT
"KRN",19,5242,10,1,"^")
TIU PRINT PN PT
"KRN",19,5242,10,2,0)
5109^PNPA
"KRN",19,5242,10,2,"^")
TIU PRINT PN AUTHOR
"KRN",19,5242,10,3,0)
5132^PNPL
"KRN",19,5242,10,3,"^")
TIU PRINT PN LOC
"KRN",19,5242,10,4,0)
5186^PNPW
"KRN",19,5242,10,4,"^")
TIU PRINT PN WARD
"KRN",19,5242,26)
W !!,$$CENTER^TIULS("---Print Progress Notes---")
"KRN",19,5242,99)
57061,57391
"KRN",19,5242,"U")
PROGRESS NOTES PRINT OPTIONS
"KRN",19,5243,-1)
0^55
"KRN",19,5243,0)
TIU PRINT PN OUTPT LOC^Outpatient Location- Print Progress Notes^^R^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5243,1,0)
^^4^4^2960228^^^
"KRN",19,5243,1,1,0)
This option is designed to be used primarily by MAS.  It produces
"KRN",19,5243,1,2,0)
CHARTABLE notes and tracks the last note prted for the selected
"KRN",19,5243,1,3,0)
outpatient location.  Output is sorted in alphabetical by patient
"KRN",19,5243,1,4,0)
order.
"KRN",19,5243,25)
LOC^TIUPRPN5
"KRN",19,5243,"U")
OUTPATIENT LOCATION- PRINT PRO
"KRN",19,5244,-1)
0^50
"KRN",19,5244,0)
TIU PRINT PN BATCH SCHEDULED^Scheduled Print Outpt PNs by Division^^R^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5244,1,0)
^^12^12^2960227^
"KRN",19,5244,1,1,0)
This option will batch print outpatient progress notes in terminal digit
"KRN",19,5244,1,2,0)
order by division.  This option is designed to print as a scheduled tasked
"KRN",19,5244,1,3,0)
job at an interval selected by the sight.  Some sites may want to print
"KRN",19,5244,1,4,0)
these notes weekly, other sites may opt for a monthly print.  Each
"KRN",19,5244,1,5,0)
division will need to set up a separate job in the OPTION SCHEDULED
"KRN",19,5244,1,6,0)
(#19.2) file.  The DIVISION is the required variable.  The starting point
"KRN",19,5244,1,7,0)
will be extracted from file #8925.94.  If the date in field #1.01 is not
"KRN",19,5244,1,8,0)
filled in, the job will terminate.
"KRN",19,5244,1,9,0)
 
"KRN",19,5244,1,10,0)
When setting up the task in file #19.2, SET the variable TIUDIV equal to
"KRN",19,5244,1,11,0)
the IEN of the division in file #8925.94 (TIU DIVISION PRINT PARAMETERS
"KRN",19,5244,1,12,0)
FILE).
"KRN",19,5244,25)
PRINT^TIUPRPN7
"KRN",19,5244,200.9)
y
"KRN",19,5244,"U")
SCHEDULED PRINT OUTPT PNS BY D
"KRN",19,5245,-1)
0^49
"KRN",19,5245,0)
TIU PRINT PN BATCH INTERACTIVE^Batch Print Outpt PNs by Division^^R^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5245,1,0)
^^10^10^2960228^^^
"KRN",19,5245,1,1,0)
This option will batch print outpatient progress notes in terminal digit
"KRN",19,5245,1,2,0)
order by division.  Locations that the site would like excluded from this
"KRN",19,5245,1,3,0)
job may edit field #3 in file #8925.93.  If the location is not entered in
"KRN",19,5245,1,4,0)
file #8925.93, it WILL be included.
"KRN",19,5245,1,5,0)
 
"KRN",19,5245,1,6,0)
For sites that would like to schedule this job to run non-interactively,
"KRN",19,5245,1,7,0)
in file #19.2 (OPTION SCHEDULING) please see option [TIU PRINT PN BATCH
"KRN",19,5245,1,8,0)
SCHEDULED].  If this option is scheduled in file #19.2 it should not be
"KRN",19,5245,1,9,0)
run from the menu, unless, the file room clerks run out of work.  In this
"KRN",19,5245,1,10,0)
case, a fresh batch of PNs would keep them busy.
"KRN",19,5245,25)
BATCH^TIUPRPN7
"KRN",19,5245,"U")
BATCH PRINT OUTPT PNS BY DIVIS
"KRN",19,5246,-1)
0^54
"KRN",19,5246,0)
TIU PRINT PN MAS MENU^MAS Progress Notes Print Options^^M^^^^^^^^TEXT INTEGRATION UTILITIES^^^^^1
"KRN",19,5246,1,0)
^^2^2^2960227^^
"KRN",19,5246,1,1,0)
This is a menu with the print options intended for use by MAS; not PNs end
"KRN",19,5246,1,2,0)
users.
"KRN",19,5246,10,0)
^19.01IP^4^4
"KRN",19,5246,10,1,0)
5245
"KRN",19,5246,10,1,"^")
TIU PRINT PN BATCH INTERACTIVE
"KRN",19,5246,10,2,0)
5186
"KRN",19,5246,10,2,"^")
TIU PRINT PN WARD
"KRN",19,5246,10,3,0)
5243
"KRN",19,5246,10,3,"^")
TIU PRINT PN OUTPT LOC
"KRN",19,5246,10,4,0)
5247
"KRN",19,5246,10,4,"^")
TIU PRINT PN ADMISSION
"KRN",19,5246,26)
W !!,$$CENTER^TIULS("---MAS Options to Print Progress Notes---")
"KRN",19,5246,99)
57061,57393
"KRN",19,5246,99.1)
56784,31334
"KRN",19,5246,"U")
MAS PROGRESS NOTES PRINT OPTIO
"KRN",19,5247,-1)
0^47
"KRN",19,5247,0)
TIU PRINT PN ADMISSION^Admission- Prints all PNs for Current Admission^^R^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5247,1,0)
^^6^6^2960227^
"KRN",19,5247,1,1,0)
This option will print all progress notes for a selected patient for the
"KRN",19,5247,1,2,0)
current admission if patient is an inpatient or LAST admission if the
"KRN",19,5247,1,3,0)
patient has been discharged.
"KRN",19,5247,1,4,0)
 
"KRN",19,5247,1,5,0)
This option is intended to be used to consolidate the PNs for the chart
"KRN",19,5247,1,6,0)
for an admission.
"KRN",19,5247,25)
ADM^TIUPRPN6
"KRN",19,5247,"U")
ADMISSION- PRINTS ALL PNS FOR 
"KRN",19,5248,-1)
0^59
"KRN",19,5248,0)
TIU RELEASED/UNVERIFIED REPORT^Released/Unverified Report^^P^^^^^^^y^TEXT INTEGRATION UTILITIES
"KRN",19,5248,1,0)
^^6^6^2960423^^^^
"KRN",19,5248,1,1,0)
This is a report that will give information on Documents for a specified
"KRN",19,5248,1,2,0)
time period that have been released from transcription but still aren't
"KRN",19,5248,1,3,0)
verified. 
"KRN",19,5248,1,4,0)
 
"KRN",19,5248,1,5,0)
This menu action can be eliminated if Transcription Release or MAS 
"KRN",19,5248,1,6,0)
Verification parameters are not enabled.
"KRN",19,5248,2)
y
"KRN",19,5248,60)
TIU(8925,
"KRN",19,5248,61)
1
"KRN",19,5248,62)
0
"KRN",19,5248,63)
[TIU RELEASED/UNVERIFIED PRINT]
"KRN",19,5248,64)
1304;L7;S;C20,+1302;C3;"TRANSCRIPTIONIST: "
"KRN",19,5248,65)
?,@
"KRN",19,5248,66)
?,
"KRN",19,5248,67)
Discharge Summary Released/Unverified Report
"KRN",19,5248,69)
I +$$REQVER^TIULC1(+$P(^TIU(8925,+D0,0),U),+D0),(+$P(^TIU(8925,D0,13),U,5)'>0)
"KRN",19,5248,99)
55581,69549
"KRN",19,5248,"U")
RELEASED/UNVERIFIED REPORT
"KRN",19,5249,-1)
0^28
"KRN",19,5249,0)
TIU GMRPN SINGLE^Single Progress Note Conversion^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5249,1,0)
^^3^3^2961121^^^^
"KRN",19,5249,1,1,0)
Option permits conversion of a single progress note.  This will
"KRN",19,5249,1,2,0)
allow sites to correct process notes which were not converted due
"KRN",19,5249,1,3,0)
to incomplete data and place them in the TIU files.
"KRN",19,5249,20)
D INDY^TIUPNCV4
"KRN",19,5249,"U")
SINGLE PROGRESS NOTE CONVERSIO
"KRN",19,5250,-1)
0^2
"KRN",19,5250,0)
TIU BRIEF DS MENU^Brief Discharge Summary Menu^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5250,1,0)
^^2^2^2960304^
"KRN",19,5250,1,1,0)
This option allows certain users to print or display/browse
"KRN",19,5250,1,2,0)
Discharge Summaries on-line.
"KRN",19,5250,10,0)
^19.01IP^2^2
"KRN",19,5250,10,1,0)
5183^2^2
"KRN",19,5250,10,1,"^")
TIUP PRINT DISCHARGE SUMMARIES
"KRN",19,5250,10,2,0)
4816^1^1
"KRN",19,5250,10,2,"^")
TIU BROWSE DOCUMENT READ ONLY
"KRN",19,5250,99)
57061,57395
"KRN",19,5250,99.1)
56677,56774
"KRN",19,5250,"U")
BRIEF DISCHARGE SUMMARY MENU
"KRN",19,5252,-1)
0^32
"KRN",19,5252,0)
TIU LIST NOTES BY TITLE^List Notes By Title^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,5252,1,0)
^^1^1^2960410^^^
"KRN",19,5252,1,1,0)
Drives Text Intgration Utilities Progress Notes Review Screen.
"KRN",19,5252,15)
K TIUEDT,TIULDT
"KRN",19,5252,20)
D EN^VALM("TIU REVIEW BY TITLE")
"KRN",19,5252,99)
55480,26973
"KRN",19,5252,"U")
LIST NOTES BY TITLE
"KRN",19,5254,-1)
0^86
"KRN",19,5254,0)
TIUFC CREATE DDEFS MGR^Create Document Definitions^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5254,1,0)
^^11^11^2970220^
"KRN",19,5254,1,1,0)
The Create Document Definitions Option lets you create new entries of any
"KRN",19,5254,1,2,0)
type except Object, placing them where they belong in the hierarchy.
"KRN",19,5254,1,3,0)
 
"KRN",19,5254,1,4,0)
Although entries can be created using the Edit and Sort Options, the
"KRN",19,5254,1,5,0)
Create Option streamlines the process. This option presents entries in
"KRN",19,5254,1,6,0)
hierarchy order, traversing ONE line of descent, starting from Clinical
"KRN",19,5254,1,7,0)
Documents at the top.
"KRN",19,5254,1,8,0)
 
"KRN",19,5254,1,9,0)
The Create Option permits you to view, edit, and create entries, but only
"KRN",19,5254,1,10,0)
from within the current line of descent.  The Create Option does not let
"KRN",19,5254,1,11,0)
you copy an entry.
"KRN",19,5254,20)
N TIUFWHO S TIUFWHO="M" D EN^TIUFC
"KRN",19,5254,99)
56434,85597
"KRN",19,5254,"U")
CREATE DOCUMENT DEFINITIONS
"KRN",19,5266,-1)
0^9
"KRN",19,5266,0)
TIU BROWSE DS MRT^Individual Patient Discharge Summary^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5266,1,0)
^^2^2^2960502^
"KRN",19,5266,1,1,0)
Allows the user to interactively review, edit, or sign patient Discharge
"KRN",19,5266,1,2,0)
Summaries.
"KRN",19,5266,20)
K ORVP D MAIN^TIUBRWS("TIU BROWSE FOR MRT",244)
"KRN",19,5266,"U")
INDIVIDUAL PATIENT DISCHARGE S
"KRN",19,5267,-1)
0^12
"KRN",19,5267,0)
TIU BROWSE PN MRT^Individual Patient Progress Note^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5267,1,0)
^^2^2^2960502^^
"KRN",19,5267,1,1,0)
Allows the user to interactively review, edit, or sign patient Progress
"KRN",19,5267,1,2,0)
Notes.
"KRN",19,5267,20)
D MAIN^TIUBRWS("TIU BROWSE FOR MRT",3)
"KRN",19,5267,"U")
INDIVIDUAL PATIENT PROGRESS NO
"KRN",19,5268,-1)
0^8
"KRN",19,5268,0)
TIU BROWSE DS MGR^Individual Patient Discharge Summary^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5268,1,0)
^^2^2^2960502^
"KRN",19,5268,1,1,0)
Allows the user to interactively review, edit, amend or delete patient
"KRN",19,5268,1,2,0)
Discharge Summaries.
"KRN",19,5268,20)
D MAIN^TIUBRWS("TIU BROWSE FOR MGR",244)
"KRN",19,5268,"U")
INDIVIDUAL PATIENT DISCHARGE S
"KRN",19,5269,-1)
0^11
"KRN",19,5269,0)
TIU BROWSE PN MGR^Individual Patient Progress Note^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5269,1,0)
^^2^2^2960502^
"KRN",19,5269,1,1,0)
Allows the user to interactively review, edit, amend, or delete patient
"KRN",19,5269,1,2,0)
Progress Notes.
"KRN",19,5269,20)
K ORVP D MAIN^TIUBRWS("TIU BROWSE FOR MGR",3)
"KRN",19,5269,"U")
INDIVIDUAL PATIENT PROGRESS NO
"KRN",19,5270,-1)
0^31
"KRN",19,5270,0)
TIU LINE COUNT BY AUTHOR^Author Line Count Statistics^^P^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5270,1,0)
^^2^2^2960506^
"KRN",19,5270,1,1,0)
This option allows generation of statistical reports of line counts and
"KRN",19,5270,1,2,0)
timeliness data by AUTHOR (or Dictating practitioner).
"KRN",19,5270,60)
TIU(8925,
"KRN",19,5270,61)
1
"KRN",19,5270,62)
0
"KRN",19,5270,63)
[TIU PRINT AUTHOR STATS]
"KRN",19,5270,64)
+@1202;S1,-@1301
"KRN",19,5270,65)
,?
"KRN",19,5270,66)
,?
"KRN",19,5270,67)
DOCUMENT Line Count Statistics by AUTHOR
"KRN",19,5270,"U")
AUTHOR LINE COUNT STATISTICS
"KRN",19,5272,-1)
0^17
"KRN",19,5272,0)
TIU DS LINE COUNT BY AUTHOR^AUTHOR Line Count Statistics^^P^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5272,1,0)
^^2^2^2960508^^^^
"KRN",19,5272,1,1,0)
This option allows generation of statistical reports of line counts and
"KRN",19,5272,1,2,0)
timeliness data by AUTHOR (or Dictating practitioner).
"KRN",19,5272,60)
TIU(8925,
"KRN",19,5272,61)
1
"KRN",19,5272,62)
0
"KRN",19,5272,63)
[TIU PRINT AUTHOR STATS]
"KRN",19,5272,64)
+@1202;S1,-@1301
"KRN",19,5272,65)
,?
"KRN",19,5272,66)
,?
"KRN",19,5272,67)
DISCHARGE SUMMARY Line Count Statistics by AUTHOR
"KRN",19,5272,69)
I +$$BELONGS^TIULX(+D0,244)
"KRN",19,5272,"U")
AUTHOR LINE COUNT STATISTICS
"KRN",19,5273,-1)
0^75
"KRN",19,5273,0)
TIU STATISTICAL REPORTS^Statistical Reports^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5273,1,0)
^^2^2^2960508^
"KRN",19,5273,1,1,0)
This menu will allow the users to choose statistical reports for line
"KRN",19,5273,1,2,0)
counts and timeliness by Author, Transcriptionist, and Service.
"KRN",19,5273,2)
y
"KRN",19,5273,10,0)
^19.01IP^3^3
"KRN",19,5273,10,1,0)
5272^AU^2
"KRN",19,5273,10,1,"^")
TIU DS LINE COUNT BY AUTHOR
"KRN",19,5273,10,2,0)
5274^TR^1
"KRN",19,5273,10,2,"^")
TIU DS LINE COUNT BY TRANSCR
"KRN",19,5273,10,3,0)
5275^SVC^3
"KRN",19,5273,10,3,"^")
TIU DS LINE COUNT BY SERVICE
"KRN",19,5273,99)
57061,57402
"KRN",19,5273,"U")
STATISTICAL REPORTS
"KRN",19,5274,-1)
0^19
"KRN",19,5274,0)
TIU DS LINE COUNT BY TRANSCR^TRANSCRIPTIONIST Line Count Statistics^^P^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5274,1,0)
^^3^3^2960508^^
"KRN",19,5274,1,1,0)
This option allows generation of statistical reports of line counts and
"KRN",19,5274,1,2,0)
timeliness data by TRANSCRIPTIONIST (or the Person by whom the document
"KRN",19,5274,1,3,0)
was entered).
"KRN",19,5274,60)
TIU(8925,
"KRN",19,5274,61)
1
"KRN",19,5274,62)
0
"KRN",19,5274,63)
[TIU PRINT TRANS STATS]
"KRN",19,5274,64)
+@1302;S1,-@1301
"KRN",19,5274,65)
,?
"KRN",19,5274,66)
,?
"KRN",19,5274,67)
DISCHARGE SUMMARY Line Count Statistics by TRANSCRIPTIONIST
"KRN",19,5274,69)
I +$$BELONGS^TIULX(+D0,244)
"KRN",19,5274,"U")
TRANSCRIPTIONIST LINE COUNT ST
"KRN",19,5275,-1)
0^18
"KRN",19,5275,0)
TIU DS LINE COUNT BY SERVICE^SERVICE Line Count Statistics^^P^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5275,1,0)
^^3^3^2960508^^
"KRN",19,5275,1,1,0)
This option allows generation of statistical reports of line counts and
"KRN",19,5275,1,2,0)
timeliness data by SERVICE (e.g., Medical Service, Surgical Service,
"KRN",19,5275,1,3,0)
Psychiatry Service, etc.).
"KRN",19,5275,60)
TIU(8925,
"KRN",19,5275,61)
1
"KRN",19,5275,62)
0
"KRN",19,5275,63)
[TIU PRINT SERVICE STATS]
"KRN",19,5275,64)
+@1404;S1,-@1301
"KRN",19,5275,65)
,?
"KRN",19,5275,66)
,?
"KRN",19,5275,67)
DISCHARGE SUMMARY Line Count Statistics by SERVICE
"KRN",19,5275,69)
I +$$BELONGS^TIULX(+D0,244)
"KRN",19,5275,"U")
SERVICE LINE COUNT STATISTICS
"KRN",19,5286,-1)
0^16
"KRN",19,5286,0)
TIU DOCUMENT PARAMETER EDIT^Document Parameter Edit^^A^^^^^^^y^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5286,1,0)
^^3^3^2960910^^
"KRN",19,5286,1,1,0)
This option allows the user to enter the parameters which apply to specific
"KRN",19,5286,1,2,0)
documents (i.e., Titles), or groups of documents (i.e., Classes, or
"KRN",19,5286,1,3,0)
Document Classes). 
"KRN",19,5286,20)
D MAIN^TIUDPEDT
"KRN",19,5286,"U")
DOCUMENT PARAMETER EDIT
"KRN",19,5287,-1)
0^30
"KRN",19,5287,0)
TIU IRM MAINTENANCE MENU^TIU Maintenance Menu^^M^^^^^^^^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,5287,1,0)
^^3^3^2970124^^^^
"KRN",19,5287,1,1,0)
This option allows IRM Staff to set/modify the various parameters
"KRN",19,5287,1,2,0)
controlling the behavior of the Text Integration Utilities Package, as
"KRN",19,5287,1,3,0)
well as the definition of TIU documents.
"KRN",19,5287,10,0)
^19.01IP^8^7
"KRN",19,5287,10,5,0)
5176^1^1
"KRN",19,5287,10,5,"^")
TIU SET-UP MENU
"KRN",19,5287,10,7,0)
4894^3^3
"KRN",19,5287,10,7,"^")
USR CLASS MANAGEMENT MENU
"KRN",19,5287,10,8,0)
5129^2^2
"KRN",19,5287,10,8,"^")
TIUF DOCUMENT DEFINITION MGR
"KRN",19,5287,15)
K TIUFPRIV
"KRN",19,5287,20)
S TIUFPRIV=1
"KRN",19,5287,99)
57075,54514
"KRN",19,5287,99.1)
57026,55169
"KRN",19,5287,"U")
TIU MAINTENANCE MENU
"KRN",19,5288,-1)
0^72
"KRN",19,5288,0)
TIU SEARCH LIST MGR^Search for Selected Documents^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,5288,1,0)
^^3^3^2960607^
"KRN",19,5288,1,1,0)
Allows MIS Managers to generate a list of selected documents based on
"KRN",19,5288,1,2,0)
extended search criteria (i.e., STATUS, SEARCH CATEGORY, and REFERENCE
"KRN",19,5288,1,3,0)
DATE RANGE).
"KRN",19,5288,15)
K TIUEDT,TIULDT
"KRN",19,5288,20)
D EN^VALM("TIU SEARCH LIST MGR")
"KRN",19,5288,99)
55480,26973
"KRN",19,5288,99.1)
56236,52228
"KRN",19,5288,"U")
SEARCH FOR SELECTED DOCUMENTS
"KRN",19,5289,-1)
0^73
"KRN",19,5289,0)
TIU SEARCH LIST MRT^Search for Selected Documents^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,5289,1,0)
^^4^4^2960607^
"KRN",19,5289,1,1,0)
Allows MRT's to generate lists of selected documents by extended search
"KRN",19,5289,1,2,0)
criteria (i.e., STATUS, SEARCH CATEGORY, and REFERNCE DATE RANGE).  These
"KRN",19,5289,1,3,0)
can then be individually or multiply reviewed, verified, sent back to
"KRN",19,5289,1,4,0)
transcription, reassigned, or printed.
"KRN",19,5289,15)
K TIUEDT,TIULDT
"KRN",19,5289,20)
D EN^VALM("TIU SEARCH LIST MRT")
"KRN",19,5289,99)
55480,26973
"KRN",19,5289,99.1)
56236,52228
"KRN",19,5289,"U")
SEARCH FOR SELECTED DOCUMENTS
"KRN",19,5291,-1)
0^101
"KRN",19,5291,0)
USR EDIT BUSINESS RULES^Edit Business Rules^^A^^^^^^^y^AUTHORIZATION/SUBSCRIPTION^^1
"KRN",19,5291,1,0)
^^4^4^2960610^^
"KRN",19,5291,1,1,0)
This option allows the user to enter Business Rules authorizing specific
"KRN",19,5291,1,2,0)
users or groups of users to perform specified actions on documents in
"KRN",19,5291,1,3,0)
particular statuses (e.g, an UNSIGNED PROGRESS NOTE may be EDITED by a
"KRN",19,5291,1,4,0)
PROVIDER who is also the EXPECTED SIGNER of the note, etc.).
"KRN",19,5291,20)
D MAIN^USRAEDT
"KRN",19,5291,"U")
EDIT BUSINESS RULES
"KRN",19,5325,-1)
0^42
"KRN",19,5325,0)
TIU NIGHTLY TASK^Text Integration Utility Nightly Task^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5325,1,0)
^^6^6^2960611^
"KRN",19,5325,1,1,0)
This is a nightly task that will selectively traverse the TEXT INTEGRATION
"KRN",19,5325,1,2,0)
UTILITIES (TIU) database, and send alerts when a document is overdue for
"KRN",19,5325,1,3,0)
signature summaries, update missing Discharge Dates now available
"KRN",19,5325,1,4,0)
through Bed Control, purge documents for which the Grace Period for
"KRN",19,5325,1,5,0)
Purge has been exceeded, and delete all records in the Upload Buffer file
"KRN",19,5325,1,6,0)
that are older than 30 days.
"KRN",19,5325,20)
D MAIN^TIUTSK
"KRN",19,5325,99)
55684,29409
"KRN",19,5325,200.9)
y
"KRN",19,5325,"U")
TEXT INTEGRATION UTILITY NIGHT
"KRN",19,5341,-1)
0^26
"KRN",19,5341,0)
TIU GMRPN MONITOR^Monitor Progress Note Conversion^^R^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5341,25)
MONITOR^TIUPNCV7
"KRN",19,5341,"U")
MONITOR PROGRESS NOTE CONVERSI
"KRN",19,5459,-1)
0^71
"KRN",19,5459,0)
TIU SEARCH BY PATIENT/TITLE^Search by Patient AND Title^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1^1
"KRN",19,5459,1,0)
^^1^1^2960906^^^^
"KRN",19,5459,1,1,0)
Drives Text Intgration Utilities Progress Notes Review Screen.
"KRN",19,5459,15)
K TIUEDT,TIULDT
"KRN",19,5459,20)
D EN^VALM("TIU REVIEW BY PATIENT & TITLE")
"KRN",19,5459,99)
55480,26973
"KRN",19,5459,"U")
SEARCH BY PATIENT AND TITLE
"KRN",19,5488,-1)
0^53
"KRN",19,5488,0)
TIU PRINT PN LOC PARAMS^Progress Notes Batch Print Locations^^R^^^^^^^^TEXT INTEGRATION UTILITIES^^^
"KRN",19,5488,1,0)
^^3^3^2970103^^
"KRN",19,5488,1,1,0)
Option for entering hospital locations used for [TIU PRINT PN OUTPT LOC]
"KRN",19,5488,1,2,0)
and [TIU PRINT PN WARD] options.  If locations are not entered in this
"KRN",19,5488,1,3,0)
file they will not be selectable from these options.
"KRN",19,5488,15)

"KRN",19,5488,25)
ADD^TIUPRPN4
"KRN",19,5488,"U")
PROGRESS NOTES BATCH PRINT LOC
"KRN",19,5489,-1)
0^51
"KRN",19,5489,0)
TIU PRINT PN DIV PARAMS^Division - Progress Notes Print Params^^R^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,5489,1,0)
^^5^5^2970103^^
"KRN",19,5489,1,1,0)
These parameters are used by the [TIU PRINT PN BATCH INTERACTIVE] and
"KRN",19,5489,1,2,0)
[TIU PRINT PN BATCH SCHEDULED] options.  If the site wants a header
"KRN",19,5489,1,3,0)
other than what is returned by $$SITE^VASITE, the .02 field of the 1st
"KRN",19,5489,1,4,0)
entry in this file will be used.  For example, Waco-Temple-Marlin can have
"KRN",19,5489,1,5,0)
the institution of their progress notes as 'CENTRAL TEXAS HCF.'
"KRN",19,5489,25)
DIV^TIUPRPN4
"KRN",19,5489,"U")
DIVISION - PROGRESS NOTES PRIN
"KRN",19,5876,-1)
0^104
"KRN",19,5876,0)
USR INITIALIZE MEMBERSHIP^Initialize Membership of User Classes^^A^^^^^^^^AUTHORIZATION/SUBSCRIPTION^^1
"KRN",19,5876,1,0)
^^3^3^2970116^
"KRN",19,5876,1,1,0)
This option will populate the PROVIDER Class for operation of clinical
"KRN",19,5876,1,2,0)
applications, based on ownership of keys. It should be run ONCE when first
"KRN",19,5876,1,3,0)
implementing ASU.
"KRN",19,5876,20)
D ^USRPROV
"KRN",19,5876,"U")
INITIALIZE MEMBERSHIP OF USER 
"KRN",19,5924,-1)
0^105
"KRN",19,5924,0)
USR BUSINESS RULE MANAGEMENT^Manage Business Rules^^A^^^^^^^^AUTHORIZATION/SUBSCRIPTION^^1
"KRN",19,5924,1,0)
^^3^3^2970109^
"KRN",19,5924,1,1,0)
This option allows you to list the Business rules defined by
"KRN",19,5924,1,2,0)
Authorization/Subscription, and to add, edit, or delete them, as
"KRN",19,5924,1,3,0)
appropriate.
"KRN",19,5924,20)
D EN^USRRUL
"KRN",19,5924,99.1)
57025,18084
"KRN",19,5924,"U")
MANAGE BUSINESS RULES
"KRN",19,5925,-1)
0^106
"KRN",19,5925,0)
TIU CONVERSIONS MENU^TIU Conversions Menu^^M^^^^^^^^TEXT INTEGRATION UTILITIES^^^^^1
"KRN",19,5925,1,0)
^^3^3^2970124^^^
"KRN",19,5925,1,1,0)
This menu includes the Conversion options for Progress Notes, and Discharge 
"KRN",19,5925,1,2,0)
Summary, as well as the option to initialize the User Class Membership for 
"KRN",19,5925,1,3,0)
PROVIDERS.
"KRN",19,5925,10,0)
^19.01IP^3^3
"KRN",19,5925,10,1,0)
5181^1^1
"KRN",19,5925,10,1,"^")
TIU DISCHARGE SUMMARY CONVERT
"KRN",19,5925,10,2,0)
5101^2^2
"KRN",19,5925,10,2,"^")
TIU GMRPN CONVERSION
"KRN",19,5925,10,3,0)
5876^3^3
"KRN",19,5925,10,3,"^")
USR INITIALIZE MEMBERSHIP
"KRN",19,5925,26)
W !!,$$CENTER^TIULS("--- TIU Conversions Menu ---")
"KRN",19,5925,99)
57149,35169
"KRN",19,5925,99.1)
57026,71089
"KRN",19,5925,"U")
TIU CONVERSIONS MENU
"KRN",19,5997,-1)
0^108
"KRN",19,5997,0)
TIUFJ CREATE OBJECTS MGR^Create Objects^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5997,1,0)
^^3^3^2970210^
"KRN",19,5997,1,1,0)
The Create/Edit Objects Option lets you select Start With and Go to
"KRN",19,5997,1,2,0)
values. It then displays Objects within those values in alphabetic order
"KRN",19,5997,1,3,0)
by Name.  User can create new objects or edit existing objects.
"KRN",19,5997,20)
N TIUFWHO S TIUFWHO="M" D EN^TIUFJ
"KRN",19,5997,99)
56434,81210
"KRN",19,5997,99.1)
56725,54266
"KRN",19,5997,"U")
CREATE OBJECTS
"KRN",19,5998,-1)
0^109
"KRN",19,5998,0)
TIUFJ VIEW OBJECTS CLIN^View Objects^^A^^^^^^^n^TEXT INTEGRATION UTILITIES^^1
"KRN",19,5998,1,0)
^^2^2^2970211^
"KRN",19,5998,1,1,0)
The View Objects Option lets you select Start With and Go To values.  It
"KRN",19,5998,1,2,0)
then displays Objects within those values in alphabetic order by Name.  
"KRN",19,5998,20)
N TIUFWHO S TIUFWHO="C" D EN^TIUFJ
"KRN",19,5998,"U")
VIEW OBJECTS
"KRN",19,6021,-1)
0^107
"KRN",19,6021,0)
TIU GMRPN HALT^Halt Progress Note Conversion^^R^^^^^^^^
"KRN",19,6021,1,0)
^^2^2^2970226^^
"KRN",19,6021,1,1,0)
Allows a site to halt out of the conversion.  This option
"KRN",19,6021,1,2,0)
should be used with caution.
"KRN",19,6021,25)
PNHALT^TIUPNCV7
"KRN",19,6021,"U")
HALT PROGRESS NOTE CONVERSION
"KRN",19,6443,-1)
0^110
"KRN",19,6443,0)
TIU GMRPN TITLES^Undefined Progress Note Titles^^R^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",19,6443,1,0)
^^2^2^2950706^
"KRN",19,6443,1,1,0)
Compares ^GMR(121.2 to ^TIU(8925.1 and prints a report of titles
"KRN",19,6443,1,2,0)
not found in ^TIU(8925.1.
"KRN",19,6443,25)
TIUPNCV6
"KRN",19,6443,"U")
UNDEFINED PROGRESS NOTE TITLES
"KRN",19,6444,-1)
0^111
"KRN",19,6444,0)
TIU OE/RR REVIEW PROG NOTES^Review Progress Notes^^A^^^^^^^^TEXT INTEGRATION UTILITIES^^1
"KRN",19,6444,1,0)
^^2^2^2970318^
"KRN",19,6444,1,1,0)
This option allows users to review Progress Notes in a manner familiar to
"KRN",19,6444,1,2,0)
OE/RR v2.5 and PN v2.5 users.
"KRN",19,6444,20)
D EN^TIUROR
"KRN",19,6444,"U")
REVIEW PROGRESS NOTES
"KRN",19.1,223,-1)
0^1
"KRN",19.1,223,0)
TIU AUTOVERIFY^BYPASS MAS VERIFICATION
"KRN",19.1,223,1,0)
^^4^4^2950707^
"KRN",19.1,223,1,1,0)
This key will result in transcribed documents entered by the holder to be
"KRN",19.1,223,1,2,0)
excluded from MAS Verification, when required for the document in
"KRN",19.1,223,1,3,0)
question.  It should only be allocated to transcriptionists whose work is
"KRN",19.1,223,1,4,0)
of such merit that normal processing may be expedited.
"KRN",101,2761,-1)
0^229
"KRN",101,2761,0)
VALM REFRESH^Re-Display Screen^^A^^^^^^^^LIST MANAGER
"KRN",101,2761,1,0)
^^1^1^2911024^
"KRN",101,2761,1,1,0)
This actions allows the user to re-display the current screen.
"KRN",101,2761,2,0)
^101.02A^1^1
"KRN",101,2761,2,1,0)
RE
"KRN",101,2761,2,"B","RE",1)

"KRN",101,2761,10,0)
^101.01PA^0^0
"KRN",101,2761,20)
D RE^VALM4
"KRN",101,2761,99)
57148,34825
"KRN",101,2764,-1)
0^233
"KRN",101,2764,0)
VALM UP ONE LINE^Up a Line^^A^^^^^^^^LIST MANAGER
"KRN",101,2764,1,0)
^^1^1^2911027^
"KRN",101,2764,1,1,0)
Move up a line
"KRN",101,2764,20)
D UP^VALM40
"KRN",101,2764,99)
57148,34825
"KRN",101,2765,-1)
0^225
"KRN",101,2765,0)
VALM DOWN A LINE^Down a Line^^A^^^^^^^^LIST MANAGER
"KRN",101,2765,1,0)
^^2^2^2911027^
"KRN",101,2765,1,1,0)
Move down a line.
"KRN",101,2765,1,2,0)

"KRN",101,2765,20)
D DOWN^VALM40
"KRN",101,2765,99)
57148,34825
"KRN",101,2769,-1)
0^228
"KRN",101,2769,0)
VALM PRINT LIST^Print List^^A^^^^^^^^LIST MANAGER
"KRN",101,2769,1,0)
^^2^2^2920113^
"KRN",101,2769,1,1,0)
This action allws the user to print the entire list of
"KRN",101,2769,1,2,0)
entries currently being displayed.
"KRN",101,2769,20)
D PRTL^VALM1
"KRN",101,2769,99)
57148,34825
"KRN",101,2771,-1)
0^232
"KRN",101,2771,0)
VALM TURN ON/OFF MENUS^Auto-Display(On/Off)^^A^^^^^^^^LIST MANAGER
"KRN",101,2771,20)
D MENU^VALM2
"KRN",101,2771,99)
57148,34825
"KRN",101,2772,-1)
0^224
"KRN",101,2772,0)
VALM BLANK 1^^^A^^^^^^^^LIST MANAGER
"KRN",101,2772,1,0)
^^1^1^2920203^
"KRN",101,2772,1,1,0)
This protocol is used to format spaces in menu lists.
"KRN",101,2772,10,0)
^101.01PA^0^0
"KRN",101,2773,-1)
0^231
"KRN",101,2773,0)
VALM SEARCH LIST^Search List^^A^^^^^^^^LIST MANAGER
"KRN",101,2773,1,0)
^^1^1^2920303^^
"KRN",101,2773,1,1,0)
Finds text in list of entries.
"KRN",101,2773,20)
D FIND^VALM40
"KRN",101,2773,99)
57148,34825
"KRN",101,2780,-1)
0^230
"KRN",101,2780,0)
VALM RIGHT^Shift View to Right^^A^^^^^^^^LIST MANAGER
"KRN",101,2780,20)
D RIGHT^VALM40(XQORNOD(0))
"KRN",101,2780,99)
57148,34825
"KRN",101,2781,-1)
0^227
"KRN",101,2781,0)
VALM LEFT^Shift View to Left^^A^^^^^^^^LIST MANAGER
"KRN",101,2781,20)
D LEFT^VALM40(XQORNOD(0))
"KRN",101,2781,99)
57148,34826
"KRN",101,2783,-1)
0^226
"KRN",101,2783,0)
VALM GOTO PAGE^Go to Page^^A^^^^^^^^LIST MANAGER
"KRN",101,2783,1,0)
^^1^1^2930113^
"KRN",101,2783,1,1,0)

"KRN",101,2783,20)
D GOTO^VALM40
"KRN",101,2783,99)
57148,34826
"KRN",101,3486,-1)
0^92
"KRN",101,3486,0)
TIU HIDDEN ACTIONS^Hidden Actions^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3486,1,0)
^^4^4^2950628^^
"KRN",101,3486,1,1,0)
This menu includes the secondary or "hidden actions" which are provided
"KRN",101,3486,1,2,0)
by the List Manager (e.g., scroll right, scroll left, up one line, etc.)
"KRN",101,3486,1,3,0)
and which may be used in the review screens, but which are not visible
"KRN",101,3486,1,4,0)
in the top level action menu.
"KRN",101,3486,4)
26
"KRN",101,3486,10,0)
^101.01PA^21^21
"KRN",101,3486,10,9,0)
3504^+^1^
"KRN",101,3486,10,9,"^")
TIU ACTION NEXT SCREEN
"KRN",101,3486,10,10,0)
3505^-^2^
"KRN",101,3486,10,10,"^")
TIU ACTION PREVIOUS SCREEN
"KRN",101,3486,10,11,0)
3509^FS^3^
"KRN",101,3486,10,11,"^")
TIU ACTION TOP
"KRN",101,3486,10,12,0)
3510^LS^4^
"KRN",101,3486,10,12,"^")
TIU ACTION BOTTOM
"KRN",101,3486,10,13,0)
2765^DN^14^
"KRN",101,3486,10,13,"^")
VALM DOWN A LINE
"KRN",101,3486,10,14,0)
2783^GO^23^
"KRN",101,3486,10,14,"^")
VALM GOTO PAGE
"KRN",101,3486,10,15,0)
2781^<^15^
"KRN",101,3486,10,15,"^")
VALM LEFT
"KRN",101,3486,10,16,0)
2769^PL^26^
"KRN",101,3486,10,16,"^")
VALM PRINT LIST
"KRN",101,3486,10,17,0)
2761^RD^24^
"KRN",101,3486,10,17,"^")
VALM REFRESH
"KRN",101,3486,10,18,0)
2780^>^16^
"KRN",101,3486,10,18,"^")
VALM RIGHT
"KRN",101,3486,10,19,0)
2764^UP^13^
"KRN",101,3486,10,19,"^")
VALM UP ONE LINE
"KRN",101,3486,10,20,0)
2771^ADPL^^
"KRN",101,3486,10,20,"^")
VALM TURN ON/OFF MENUS
"KRN",101,3486,10,21,0)
4732^CWAD^^
"KRN",101,3486,10,21,"^")
TIU ACTION CWAD DISPLAY
"KRN",101,3486,99)
57148,34826
"KRN",101,3487,-1)
0^93
"KRN",101,3487,0)
TIU HIDDEN ACTIONS BROWSE^Hidden Actions^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3487,1,0)
^^4^4^2950628^^
"KRN",101,3487,1,1,0)
This menu includes the secondary or "hidden actions" which are provided
"KRN",101,3487,1,2,0)
by the List Manager (e.g., up one line, down one line, go to page #, etc.)
"KRN",101,3487,1,3,0)
and which may be used in the browse screens, but which are not visible
"KRN",101,3487,1,4,0)
in the top level action menu.
"KRN",101,3487,4)
26
"KRN",101,3487,10,0)
^101.01PA^17^17
"KRN",101,3487,10,6,0)
3504^+^1^
"KRN",101,3487,10,6,"^")
TIU ACTION NEXT SCREEN
"KRN",101,3487,10,7,0)
3505^-^2^
"KRN",101,3487,10,7,"^")
TIU ACTION PREVIOUS SCREEN
"KRN",101,3487,10,8,0)
3509^FS^3^
"KRN",101,3487,10,8,"^")
TIU ACTION TOP
"KRN",101,3487,10,9,0)
3510^LS^4^
"KRN",101,3487,10,9,"^")
TIU ACTION BOTTOM
"KRN",101,3487,10,10,0)
2761^RD^8^
"KRN",101,3487,10,10,"^")
VALM REFRESH
"KRN",101,3487,10,11,0)
2764^UP^5^
"KRN",101,3487,10,11,"^")
VALM UP ONE LINE
"KRN",101,3487,10,12,0)
2765^DN^6^
"KRN",101,3487,10,12,"^")
VALM DOWN A LINE
"KRN",101,3487,10,13,0)
2783^GO^7^
"KRN",101,3487,10,13,"^")
VALM GOTO PAGE
"KRN",101,3487,10,14,0)
2771^ADPL^9^
"KRN",101,3487,10,14,"^")
VALM TURN ON/OFF MENUS
"KRN",101,3487,10,15,0)
3507^Q^10^
"KRN",101,3487,10,15,"^")
TIU ACTION QUIT
"KRN",101,3487,10,16,0)
4732^CWAD^^
"KRN",101,3487,10,16,"^")
TIU ACTION CWAD DISPLAY
"KRN",101,3487,10,17,0)
4748^CT^^
"KRN",101,3487,10,17,"^")
TIU BROWSE ACTION CHANGE TITLE
"KRN",101,3487,99)
57148,34826
"KRN",101,3488,-1)
0^31
"KRN",101,3488,0)
TIU ACTION MENU MGR^Act on Documents^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3488,1,0)
^^1^1^2950426^^^^
"KRN",101,3488,1,1,0)
Menu of actions which may be executed by MIS Managers.
"KRN",101,3488,4)
26
"KRN",101,3488,10,0)
^101.01PA^18^18
"KRN",101,3488,10,1,0)
3500^^5^
"KRN",101,3488,10,1,"^")
TIU ACTION EDIT
"KRN",101,3488,10,2,0)
3501^^19^
"KRN",101,3488,10,2,"^")
TIU ACTION PRINT
"KRN",101,3488,10,3,0)
3503^^15^
"KRN",101,3488,10,3,"^")
TIU ACTION DETAILED DISPLAY
"KRN",101,3488,10,6,0)
3516^^9^
"KRN",101,3488,10,6,"^")
TIU ACTION DELETE
"KRN",101,3488,10,7,0)
3513^^7^
"KRN",101,3488,10,7,"^")
TIU ACTION AMEND
"KRN",101,3488,10,8,0)
3690^^17^
"KRN",101,3488,10,8,"^")
TIU ACTION BROWSE FOR MGR
"KRN",101,3488,10,9,0)
3507^^23^
"KRN",101,3488,10,9,"^")
TIU ACTION QUIT
"KRN",101,3488,10,10,0)
3522^^3^
"KRN",101,3488,10,10,"^")
TIU ACTION SIGN ON CHART
"KRN",101,3488,10,11,0)
3515^^21^
"KRN",101,3488,10,11,"^")
TIU ACTION CHANGE VIEW OTHER
"KRN",101,3488,10,12,0)
3521^^13^
"KRN",101,3488,10,12,"^")
TIU ACTION SEND BACK
"KRN",101,3488,10,15,0)
4683^^1^
"KRN",101,3488,10,15,"^")
TIU ACTION SEARCH LIST
"KRN",101,3488,10,16,0)
3520^^11^
"KRN",101,3488,10,16,"^")
TIU ACTION REASSIGN
"KRN",101,3488,10,17,0)
3523^^6^
"KRN",101,3488,10,17,"^")
TIU ACTION VERIFY
"KRN",101,3488,10,18,0)
2772^^16^
"KRN",101,3488,10,18,"^")
VALM BLANK 1
"KRN",101,3488,20)
S XQORM("SH")=0 S:$G(VALMSG)'["*" VALMSG="+ Next Screen  - Prev Screen  ?? More Actions",VALM("MAX")=+$G(VALMCNT)
"KRN",101,3488,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3488,26)
S XQORM("#")=$G(^TMP("TIUR",$J,"#")) D RESIZE^TIULM(21,17),SHOW^VALM K XQORM("XLATE","FIND")
"KRN",101,3488,28)
Select Action: 
"KRN",101,3488,99)
57138,36670
"KRN",101,3489,-1)
0^36
"KRN",101,3489,0)
TIU ACTION MENU READ-ONLY^Act on Documents^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3489,1,0)
^^1^1^2930505^^^^
"KRN",101,3489,1,1,0)
Menu of actions which may be executed by clinicians.
"KRN",101,3489,4)
26
"KRN",101,3489,10,0)
^101.01PA^10^8
"KRN",101,3489,10,1,0)
3501^^7^
"KRN",101,3489,10,1,"^")
TIU ACTION PRINT
"KRN",101,3489,10,2,0)
3503^^3^
"KRN",101,3489,10,2,"^")
TIU ACTION DETAILED DISPLAY
"KRN",101,3489,10,5,0)
3692^^5^
"KRN",101,3489,10,5,"^")
TIU ACTION BROWSE FOR READ ONLY
"KRN",101,3489,10,6,0)
3507^^11^
"KRN",101,3489,10,6,"^")
TIU ACTION QUIT
"KRN",101,3489,10,7,0)
3508^^9^
"KRN",101,3489,10,7,"^")
TIU ACTION CHANGE VIEW CLINICIAN
"KRN",101,3489,10,10,0)
4683^^1^
"KRN",101,3489,10,10,"^")
TIU ACTION SEARCH LIST
"KRN",101,3489,20)
S XQORM("SH")=0 S:$G(VALMSG)'["*" VALMSG="+ Next Screen  - Prev Screen  ?? More Actions",VALM("MAX")=+$G(VALMCNT)
"KRN",101,3489,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3489,26)
S XQORM("#")=$G(^TMP("TIUR",$J,"#")) D RESIZE^TIULM(21,18),SHOW^VALM K XQORM("XLATE","FIND")
"KRN",101,3489,28)
Select Action: 
"KRN",101,3489,99)
57138,40652
"KRN",101,3490,-1)
0^79
"KRN",101,3490,0)
TIU BROWSE MENU MGR^Review/edit/sign^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3490,1,0)
^^1^1^2950628^^
"KRN",101,3490,1,1,0)
Menu of actions which may be executed by clinicians.
"KRN",101,3490,4)
26
"KRN",101,3490,10,0)
^101.01PA^15^15
"KRN",101,3490,10,3,0)
3526^^5^
"KRN",101,3490,10,3,"^")
TIU BROWSE ACTION EDIT
"KRN",101,3490,10,4,0)
3527^^3^
"KRN",101,3490,10,4,"^")
TIU BROWSE ACTION PRINT
"KRN",101,3490,10,5,0)
3531^^7^
"KRN",101,3490,10,5,"^")
TIU BROWSE ACTION SIGN ON CHART
"KRN",101,3490,10,6,0)
3507^^17^
"KRN",101,3490,10,6,"^")
TIU ACTION QUIT
"KRN",101,3490,10,7,0)
3529^^1^
"KRN",101,3490,10,7,"^")
TIU BROWSE ACTION SEARCH
"KRN",101,3490,10,10,0)
3524^^9^
"KRN",101,3490,10,10,"^")
TIU BROWSE ACTION AMEND
"KRN",101,3490,10,11,0)
3525^^11^
"KRN",101,3490,10,11,"^")
TIU BROWSE ACTION DELETE
"KRN",101,3490,10,12,0)
3530^^15^
"KRN",101,3490,10,12,"^")
TIU BROWSE ACTION SEND BACK
"KRN",101,3490,10,13,0)
3528^^13^
"KRN",101,3490,10,13,"^")
TIU BROWSE ACTION REASSIGN
"KRN",101,3490,10,14,0)
3533^^6^
"KRN",101,3490,10,14,"^")
TIU BROWSE ACTION VERIFY
"KRN",101,3490,10,15,0)
2772^^12^
"KRN",101,3490,10,15,"^")
VALM BLANK 1
"KRN",101,3490,15)
S:$D(DIROUT) TIUQUIT=1
"KRN",101,3490,20)
S XQORM("SH")=0
"KRN",101,3490,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3490,26)
S VALMSG="+ Next Screen  - Prev Screen  ?? More actions" D RESIZE^TIULM(21,17),SHOW^VALM
"KRN",101,3490,28)
Select Action: 
"KRN",101,3490,99)
57126,43307
"KRN",101,3491,-1)
0^82
"KRN",101,3491,0)
TIU BROWSE MENU READ ONLY^Review/edit/sign^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3491,1,0)
^^1^1^2950628^^^^
"KRN",101,3491,1,1,0)
Menu of actions which may be executed by clinicians.
"KRN",101,3491,4)
26
"KRN",101,3491,10,0)
^101.01PA^5^5
"KRN",101,3491,10,3,0)
3527^^2^
"KRN",101,3491,10,3,"^")
TIU BROWSE ACTION PRINT
"KRN",101,3491,10,4,0)
3507^^3^
"KRN",101,3491,10,4,"^")
TIU ACTION QUIT
"KRN",101,3491,10,5,0)
3529^^1^
"KRN",101,3491,10,5,"^")
TIU BROWSE ACTION SEARCH
"KRN",101,3491,15)
S:$D(DIROUT) TIUQUIT=1
"KRN",101,3491,20)
S XQORM("SH")=0
"KRN",101,3491,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3491,26)
S VALMSG="+ Next Screen  - Prev Screen  ?? More actions" D RESIZE^TIULM(21,18),SHOW^VALM
"KRN",101,3491,28)
Select Action: 
"KRN",101,3491,99)
57129,52630
"KRN",101,3492,-1)
0^104
"KRN",101,3492,0)
TIU REVIEW SCREEN MENU^Screen^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3492,1,0)
^^2^2^2970309^^^^
"KRN",101,3492,1,1,0)
This menu type option is used for selecting the Review Screen for
"KRN",101,3492,1,2,0)
documents.
"KRN",101,3492,4)
40^^Y
"KRN",101,3492,10,0)
^101.01PA^8^8
"KRN",101,3492,10,1,0)
3493^AU^2^
"KRN",101,3492,10,1,"^")
TIU REVIEW BY AUTHOR
"KRN",101,3492,10,2,0)
3494^PT^3^
"KRN",101,3492,10,2,"^")
TIU REVIEW BY PATIENT
"KRN",101,3492,10,3,0)
3495^AT^4^
"KRN",101,3492,10,3,"^")
TIU REVIEW BY RESP PROVIDER
"KRN",101,3492,10,4,0)
3498^SP^5^
"KRN",101,3492,10,4,"^")
TIU REVIEW BY TREATING SPECIALTY
"KRN",101,3492,10,5,0)
3496^TS^7^
"KRN",101,3492,10,5,"^")
TIU REVIEW BY TRANSCRIPTIONIST
"KRN",101,3492,10,6,0)
3497^ALL^1^
"KRN",101,3492,10,6,"^")
TIU REVIEW BY ALL CATEGORIES
"KRN",101,3492,10,7,0)
3551^SUB^6^
"KRN",101,3492,10,7,"^")
TIU REVIEW BY SUBJECT
"KRN",101,3492,10,8,0)
3552^SVC^7^
"KRN",101,3492,10,8,"^")
TIU REVIEW BY SERVICE
"KRN",101,3492,24)
I 1 X:$O(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3492,99)
57061,57320
"KRN",101,3493,-1)
0^97
"KRN",101,3493,0)
TIU REVIEW BY AUTHOR^Author^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3493,1,0)
^^1^1^2950628^^
"KRN",101,3493,1,1,0)
This action type option is used for specifying review by author
"KRN",101,3493,20)

"KRN",101,3493,24)

"KRN",101,3493,99)
57061,57314
"KRN",101,3494,-1)
0^98
"KRN",101,3494,0)
TIU REVIEW BY PATIENT^Patient^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3494,1,0)
^^1^1^2950628^^
"KRN",101,3494,1,1,0)
This action type option is used for specifying Review by patient.
"KRN",101,3494,20)

"KRN",101,3494,24)

"KRN",101,3494,99)
57061,57314
"KRN",101,3495,-1)
0^99
"KRN",101,3495,0)
TIU REVIEW BY RESP PROVIDER^Attending Physician^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3495,1,0)
^^2^2^2950628^^
"KRN",101,3495,1,1,0)
This action type option is used for specifying review by Attending
"KRN",101,3495,1,2,0)
Physician.
"KRN",101,3495,20)

"KRN",101,3495,24)

"KRN",101,3495,99)
57061,57314
"KRN",101,3496,-1)
0^102
"KRN",101,3496,0)
TIU REVIEW BY TRANSCRIPTIONIST^Transcriptionist^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3496,1,0)
^^2^2^2950628^^
"KRN",101,3496,1,1,0)
Select transcriptionist as a second-level search criterion for building
"KRN",101,3496,1,2,0)
the clinician's review screen list.
"KRN",101,3496,24)

"KRN",101,3496,99)
57061,57314
"KRN",101,3497,-1)
0^96
"KRN",101,3497,0)
TIU REVIEW BY ALL CATEGORIES^All Categories^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3497,1,0)
^^3^3^2950628^^
"KRN",101,3497,1,1,0)
Allows user to show all categories of documents, without concern for the
"KRN",101,3497,1,2,0)
second level search criterion (i.e., Author, Attending Physician, Treating
"KRN",101,3497,1,3,0)
Specialty, or Transcriptionist).
"KRN",101,3497,99)
57061,57314
"KRN",101,3498,-1)
0^103
"KRN",101,3498,0)
TIU REVIEW BY TREATING SPECIALTY^Treating Specialty^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3498,1,0)
^^2^2^2950628^^
"KRN",101,3498,1,1,0)
Select treating specialty as a second-level search criterion for building
"KRN",101,3498,1,2,0)
the clinician's review screen list.
"KRN",101,3498,24)

"KRN",101,3498,99)
57061,57314
"KRN",101,3499,-1)
0^25
"KRN",101,3499,0)
TIU ACTION MENU CLINICIAN^Act on Documents^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3499,1,0)
^^1^1^2970309^^^^
"KRN",101,3499,1,1,0)
Menu of actions which may be executed by clinicians.
"KRN",101,3499,4)
26
"KRN",101,3499,10,0)
^101.01PA^18^18
"KRN",101,3499,10,1,0)
3500^^5^
"KRN",101,3499,10,1,"^")
TIU ACTION EDIT
"KRN",101,3499,10,2,0)
3501^^13^
"KRN",101,3499,10,2,"^")
TIU ACTION PRINT
"KRN",101,3499,10,3,0)
3502^^8^
"KRN",101,3499,10,3,"^")
TIU ACTION SIGN/COSIGN
"KRN",101,3499,10,4,0)
3503^^9^
"KRN",101,3499,10,4,"^")
TIU ACTION DETAILED DISPLAY
"KRN",101,3499,10,7,0)
3506^^11^
"KRN",101,3499,10,7,"^")
TIU ACTION BROWSE FOR CLINICIAN
"KRN",101,3499,10,8,0)
3507^^21^
"KRN",101,3499,10,8,"^")
TIU ACTION QUIT
"KRN",101,3499,10,9,0)
3508^^15^^^
"KRN",101,3499,10,9,"^")
TIU ACTION CHANGE VIEW CLINICIAN
"KRN",101,3499,10,12,0)
4683^^1^
"KRN",101,3499,10,12,"^")
TIU ACTION SEARCH LIST
"KRN",101,3499,10,13,0)
3599^^3^
"KRN",101,3499,10,13,"^")
TIU ACTION ADD DOCUMENT
"KRN",101,3499,10,14,0)
3602^^7^
"KRN",101,3499,10,14,"^")
TIU ACTION MENU LINK
"KRN",101,3499,10,15,0)
3745^^17^
"KRN",101,3499,10,15,"^")
TIU ACTION COPY
"KRN",101,3499,10,16,0)
4054^^6^
"KRN",101,3499,10,16,"^")
TIU ACTION MAKE ADDENDUM
"KRN",101,3499,10,17,0)
3516^^19^
"KRN",101,3499,10,17,"^")
TIU ACTION DELETE
"KRN",101,3499,10,18,0)
4159^^14^
"KRN",101,3499,10,18,"^")
TIU ACTION DESIGNATE SIGNERS
"KRN",101,3499,20)
S XQORM("SH")=0 S:$G(VALMSG)'["*" VALMSG="+ Next Screen  - Prev Screen  ?? More Actions",VALM("MAX")=+$G(VALMCNT)
"KRN",101,3499,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3499,26)
S XQORM("#")=$G(^TMP("TIUR",$J,"#")) D RESIZE^TIULM(21,17),SHOW^VALM K XQORM("XLATE","FIND")
"KRN",101,3499,28)
Select Action: 
"KRN",101,3499,99)
57126,45248
"KRN",101,3500,-1)
0^21
"KRN",101,3500,0)
TIU ACTION EDIT^Edit^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3500,1,0)
^^4^4^2950614^^^^
"KRN",101,3500,1,1,0)
Allows authorized users to edit selected documents online...When electronic
"KRN",101,3500,1,2,0)
signature is enabled, physicians will be prompted for their signatures upon
"KRN",101,3500,1,3,0)
exit, thereby allowing doctors to review, edit and sign as a one-step
"KRN",101,3500,1,4,0)
process.
"KRN",101,3500,15)

"KRN",101,3500,20)
D EDIT^TIURA
"KRN",101,3500,99)
57061,57315
"KRN",101,3501,-1)
0^46
"KRN",101,3501,0)
TIU ACTION PRINT^Print^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3501,1,0)
^^2^2^2930810^^^^
"KRN",101,3501,1,1,0)
Allows users to print copies of VAF 10-1000 for selected discharge
"KRN",101,3501,1,2,0)
summaries to a specified device.
"KRN",101,3501,20)
D PRINT^TIURA
"KRN",101,3501,99)
57061,57315
"KRN",101,3502,-1)
0^58
"KRN",101,3502,0)
TIU ACTION SIGN/COSIGN^Sign/Cosign^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3502,1,0)
^^7^7^2930505^^^
"KRN",101,3502,1,1,0)
Allows clinicians to electronically sign selected discharge summaries
"KRN",101,3502,1,2,0)
or addenda.
"KRN",101,3502,1,3,0)
 
"KRN",101,3502,1,4,0)
NOTE:  Electronic signature carries the same legal ramifications that
"KRN",101,3502,1,5,0)
wet signature of a hard-copy discharge summary carries.  You are
"KRN",101,3502,1,6,0)
advised to carefully review each discharge summary for content and
"KRN",101,3502,1,7,0)
accuracy before exercising this option.
"KRN",101,3502,20)
D ELSIG^TIURS
"KRN",101,3502,24)
; I $D(GMRDPRM0),+$P(GMRDPRM0,U,2),$D(^XUSEC("PROVIDER",DUZ))!$D(^XUSEC("GMRD AUTHOR",DUZ))!$D(^XUSEC("GMRD SURROGATE",DUZ))
"KRN",101,3502,99)
57061,57315
"KRN",101,3503,-1)
0^20
"KRN",101,3503,0)
TIU ACTION DETAILED DISPLAY^Detailed Display^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3503,1,0)
^^4^4^2930831^^^^
"KRN",101,3503,1,1,0)
Displays the report type, patient, urgency, line count, author, attending
"KRN",101,3503,1,2,0)
physician, transcriptionist, and verifying clerk, in addition to the
"KRN",101,3503,1,3,0)
admission, discharge, dictation, transcription, signature and amendment
"KRN",101,3503,1,4,0)
dates, without showing the narrative report text.
"KRN",101,3503,2,0)
^101.02A^1^1
"KRN",101,3503,2,1,0)
DT
"KRN",101,3503,2,"B","DT",1)

"KRN",101,3503,20)
D DISPLAY^TIURA
"KRN",101,3503,99)
57061,57315
"KRN",101,3504,-1)
0^44
"KRN",101,3504,0)
TIU ACTION NEXT SCREEN^Next screen^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3504,1,0)
^^2^2^2931129^
"KRN",101,3504,1,1,0)
If multiple screens of information are available, this will page to the
"KRN",101,3504,1,2,0)
next screen.
"KRN",101,3504,20)
D NEXT^VALM4
"KRN",101,3504,99)
57061,57315
"KRN",101,3505,-1)
0^45
"KRN",101,3505,0)
TIU ACTION PREVIOUS SCREEN^Previous Screen^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3505,1,0)
^^3^3^2921123^
"KRN",101,3505,1,1,0)
If multiple screens of information are available, and the user is not on
"KRN",101,3505,1,2,0)
the first screen, this will allow paging back to the previous screens,
"KRN",101,3505,1,3,0)
one at a time.
"KRN",101,3505,20)
D PREV^VALM4
"KRN",101,3505,99)
57061,57315
"KRN",101,3506,-1)
0^7
"KRN",101,3506,0)
TIU ACTION BROWSE FOR CLINICIAN^Browse^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3506,1,0)
^^4^4^2951103^^^
"KRN",101,3506,1,1,0)
Allows users to browse through Documents from the Review Screen.
"KRN",101,3506,1,2,0)
In addition to scrolling sequentially through the selected documents
"KRN",101,3506,1,3,0)
and their addenda, the user may Search for a particular word or
"KRN",101,3506,1,4,0)
phrase, or Print draft copies to a selected device.
"KRN",101,3506,20)
D BROWSE^TIURA("TIU BROWSE FOR CLINICIAN")
"KRN",101,3506,99)
57061,57315
"KRN",101,3507,-1)
0^49
"KRN",101,3507,0)
TIU ACTION QUIT^Quit^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3507,1,0)
^^1^1^2960222^^^^
"KRN",101,3507,1,1,0)
Allows user to quit the current menu level.
"KRN",101,3507,2,0)
^101.02A^^0
"KRN",101,3507,20)
Q
"KRN",101,3507,99)
57061,57315
"KRN",101,3508,-1)
0^11
"KRN",101,3508,0)
TIU ACTION CHANGE VIEW CLINICIAN^Change View^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3508,1,0)
^^2^2^2970309^^
"KRN",101,3508,1,1,0)
Allows users to modify the list of reports by signature status, review
"KRN",101,3508,1,2,0)
screen and dictation date range without exiting the review screen.
"KRN",101,3508,15)

"KRN",101,3508,20)
K TIUQUIK D FULL^VALM1,MAKELIST^TIUR($S(+$G(^TMP("TIUR",$J,"CLASS")):+$G(^TMP("TIUR",$J,"CLASS")),1:38),1) S VALMBCK="R",VALMBG=1
"KRN",101,3508,99)
57061,57315
"KRN",101,3509,-1)
0^59
"KRN",101,3509,0)
TIU ACTION TOP^First Screen^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3509,1,0)
^^1^1^2930225^
"KRN",101,3509,1,1,0)
If multiple screens are available, this will page to the first screen.
"KRN",101,3509,20)
D FIRST^VALM4
"KRN",101,3509,99)
57061,57316
"KRN",101,3510,-1)
0^6
"KRN",101,3510,0)
TIU ACTION BOTTOM^Last Screen^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3510,1,0)
^^2^2^2950420^^
"KRN",101,3510,1,1,0)
If multiple screens of information are available, this will page to the
"KRN",101,3510,1,2,0)
last screen.
"KRN",101,3510,20)
D LAST^VALM4
"KRN",101,3510,99)
57061,57316
"KRN",101,3512,-1)
0^78
"KRN",101,3512,0)
TIU BROWSE MENU CLINICIAN^Review/edit/sign^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3512,1,0)
^^1^1^2960611^^^^
"KRN",101,3512,1,1,0)
Menu of actions which may be executed by clinicians.
"KRN",101,3512,4)
26
"KRN",101,3512,10,0)
^101.01PA^14^14
"KRN",101,3512,10,3,0)
3526^^5^
"KRN",101,3512,10,3,"^")
TIU BROWSE ACTION EDIT
"KRN",101,3512,10,4,0)
3527^^3^
"KRN",101,3512,10,4,"^")
TIU BROWSE ACTION PRINT
"KRN",101,3512,10,5,0)
3532^^11^
"KRN",101,3512,10,5,"^")
TIU BROWSE ACTION SIGN/COSIGN
"KRN",101,3512,10,6,0)
3507^^23^
"KRN",101,3512,10,6,"^")
TIU ACTION QUIT
"KRN",101,3512,10,7,0)
3529^^1^
"KRN",101,3512,10,7,"^")
TIU BROWSE ACTION SEARCH
"KRN",101,3512,10,8,0)
3744^^13^
"KRN",101,3512,10,8,"^")
TIU BROWSE ACTION COPY
"KRN",101,3512,10,9,0)
4055^^9^
"KRN",101,3512,10,9,"^")
TIU BROWSE ACTION MAKE ADDENDUM
"KRN",101,3512,10,10,0)
3525^^19^
"KRN",101,3512,10,10,"^")
TIU BROWSE ACTION DELETE
"KRN",101,3512,10,11,0)
4174^^17^
"KRN",101,3512,10,11,"^")
TIU BROWSE ACTION DESIGNATE SIGNERS
"KRN",101,3512,10,12,0)
3606^^7^
"KRN",101,3512,10,12,"^")
TIU ACTION BLANK1
"KRN",101,3512,10,13,0)
3607^^15^
"KRN",101,3512,10,13,"^")
TIU ACTION BLANK2
"KRN",101,3512,10,14,0)
4769^^21^
"KRN",101,3512,10,14,"^")
TIU BROWSE MENU LINK
"KRN",101,3512,15)
S:$D(DIROUT) TIUQUIT=1
"KRN",101,3512,20)
S XQORM("SH")=0
"KRN",101,3512,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3512,26)
S VALMSG="+ Next Screen  - Prev Screen  ?? More actions" D RESIZE^TIULM(21,17),SHOW^VALM
"KRN",101,3512,28)
Select Action: 
"KRN",101,3512,99)
57126,54098
"KRN",101,3513,-1)
0^2
"KRN",101,3513,0)
TIU ACTION AMEND^Amend Document^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3513,1,0)
^^2^2^2970304^^
"KRN",101,3513,1,1,0)
Allows authorized users to AMEND documents at the patient's request, per
"KRN",101,3513,1,2,0)
the Privacy Act.
"KRN",101,3513,20)
D AMEND^TIURB
"KRN",101,3513,99)
57061,57316
"KRN",101,3514,-1)
0^12
"KRN",101,3514,0)
TIU ACTION CHANGE VIEW ERROR SCREEN^Change view^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3514,1,0)
^^3^3^2930614^
"KRN",101,3514,1,1,0)
 
"KRN",101,3514,1,2,0)
Allows modification of the current list of filing errors to include either
"KRN",101,3514,1,3,0)
UNRESOLVED, RESOLVED, or ALL errors for a specified time range.
"KRN",101,3514,20)
D FULL^VALM1,MAKELIST^TIUELST S VALMBCK="R",VALMBG=1
"KRN",101,3514,99)
57061,57316
"KRN",101,3515,-1)
0^14
"KRN",101,3515,0)
TIU ACTION CHANGE VIEW OTHER^Change View^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3515,1,0)
^^2^2^2950425^^
"KRN",101,3515,1,1,0)
Allows MIS users to modify the list of reports by signature status, and
"KRN",101,3515,1,2,0)
dictation date range without exiting the review screen.
"KRN",101,3515,20)
D FULL^VALM1,MAKELIST^TIUR($S(+$G(^TMP("TIUR",$J,"CLASS")):+$G(^TMP("TIUR",$J,"CLASS")),1:38)) S VALMBCK="R",VALMBG=1
"KRN",101,3515,99)
57061,57316
"KRN",101,3516,-1)
0^18
"KRN",101,3516,0)
TIU ACTION DELETE^Delete Document^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3516,1,0)
^^3^3^2970613^
"KRN",101,3516,1,1,0)
Allows authorized users (as defined by your local business rules in ASU)
"KRN",101,3516,1,2,0)
to delete a discharge summary at the patient's request, per the Privacy
"KRN",101,3516,1,3,0)
Act.
"KRN",101,3516,20)
D DELETE^TIURB
"KRN",101,3516,99)
57061,57316
"KRN",101,3517,-1)
0^42
"KRN",101,3517,0)
TIU ACTION MENU UPLOAD EVENTS^Act on Filing Events^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3517,1,0)
^^2^2^2930614^
"KRN",101,3517,1,1,0)
Menu of actions which may be executed to resolve error generated by the
"KRN",101,3517,1,2,0)
upload filer/router.
"KRN",101,3517,4)
26
"KRN",101,3517,10,0)
^101.01PA^7^7
"KRN",101,3517,10,3,0)
3514^^4^
"KRN",101,3517,10,3,"^")
TIU ACTION CHANGE VIEW ERROR SCREEN
"KRN",101,3517,10,4,0)
4683^^1^
"KRN",101,3517,10,4,"^")
TIU ACTION SEARCH LIST
"KRN",101,3517,10,5,0)
3507^^5^
"KRN",101,3517,10,5,"^")
TIU ACTION QUIT
"KRN",101,3517,10,6,0)
3910^^2^
"KRN",101,3517,10,6,"^")
TIU ACTION RESOLVE FILING ERRORS
"KRN",101,3517,10,7,0)
3519^^3^
"KRN",101,3517,10,7,"^")
TIU ACTION PRINT UPLOAD EVENT
"KRN",101,3517,20)
S XQORM("SH")=0 S:$G(VALMSG)'["*" VALMSG="+ Next Screen  - Prev Screen  ?? More Actions",VALM("MAX")=+$G(VALMCNT)
"KRN",101,3517,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3517,26)
S XQORM("#")=$G(^TMP("TIUERR",$J,"#")) D RESIZE^TIULM(21,18),SHOW^VALM K XQORM("XLATE","FIND")
"KRN",101,3517,28)
Select Action: 
"KRN",101,3517,99)
57131,58090
"KRN",101,3518,-1)
0^33
"KRN",101,3518,0)
TIU ACTION MENU MRT^Act on Documents^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3518,1,0)
^^1^1^2930105^^^^
"KRN",101,3518,1,1,0)
Menu of actions which may be executed by Medical Records Technicians.
"KRN",101,3518,4)
26
"KRN",101,3518,10,0)
^101.01PA^15^13
"KRN",101,3518,10,1,0)
3500^^4^
"KRN",101,3518,10,1,"^")
TIU ACTION EDIT
"KRN",101,3518,10,2,0)
3501^^9^
"KRN",101,3518,10,2,"^")
TIU ACTION PRINT
"KRN",101,3518,10,3,0)
3503^^7^
"KRN",101,3518,10,3,"^")
TIU ACTION DETAILED DISPLAY
"KRN",101,3518,10,6,0)
3523^^2^
"KRN",101,3518,10,6,"^")
TIU ACTION VERIFY
"KRN",101,3518,10,7,0)
3691^^8^
"KRN",101,3518,10,7,"^")
TIU ACTION BROWSE FOR MRT
"KRN",101,3518,10,8,0)
3507^^11^
"KRN",101,3518,10,8,"^")
TIU ACTION QUIT
"KRN",101,3518,10,9,0)
3522^^3^
"KRN",101,3518,10,9,"^")
TIU ACTION SIGN ON CHART
"KRN",101,3518,10,10,0)
3520^^5^
"KRN",101,3518,10,10,"^")
TIU ACTION REASSIGN
"KRN",101,3518,10,11,0)
3515^^10^
"KRN",101,3518,10,11,"^")
TIU ACTION CHANGE VIEW OTHER
"KRN",101,3518,10,12,0)
3521^^6^
"KRN",101,3518,10,12,"^")
TIU ACTION SEND BACK
"KRN",101,3518,10,15,0)
4683^^1^
"KRN",101,3518,10,15,"^")
TIU ACTION SEARCH LIST
"KRN",101,3518,20)
S XQORM("SH")=0 S:$G(VALMSG)'["*" VALMSG="+ Next Screen  - Prev Screen  ?? More Actions",VALM("MAX")=+$G(VALMCNT)
"KRN",101,3518,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3518,26)
S XQORM("#")=$G(^TMP("TIUR",$J,"#")) D RESIZE^TIULM(21,18),SHOW^VALM K XQORM("XLATE","FIND")
"KRN",101,3518,28)
Select Action: 
"KRN",101,3518,99)
57131,56493
"KRN",101,3519,-1)
0^48
"KRN",101,3519,0)
TIU ACTION PRINT UPLOAD EVENT^Print event^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3519,1,0)
^^1^1^2950914^
"KRN",101,3519,1,1,0)
Allows users to print a detailed view of the filing event.
"KRN",101,3519,20)
D PRINT^TIURE
"KRN",101,3519,99)
57061,57317
"KRN",101,3520,-1)
0^50
"KRN",101,3520,0)
TIU ACTION REASSIGN^Reassign^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3520,1,0)
^^5^5^2950614^^^
"KRN",101,3520,1,1,0)
Allows Medical Record Technicians and MIS Managers to reassign Documents
"KRN",101,3520,1,2,0)
which have been inappropriately assigned to a given patient or the wrong 
"KRN",101,3520,1,3,0)
admission/visit.  Authorized users can also reassign a signed Original or
"KRN",101,3520,1,4,0)
Addendum, promote an Addendum as an Original, or "swap" the Addendum and
"KRN",101,3520,1,5,0)
the Original.
"KRN",101,3520,15)
S VALMBCK="R"
"KRN",101,3520,20)
D REASSIGN^TIURD
"KRN",101,3520,99)
57061,57317
"KRN",101,3521,-1)
0^56
"KRN",101,3521,0)
TIU ACTION SEND BACK^Send Back^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3521,1,0)
^^5^5^2950614^^^^
"KRN",101,3521,1,1,0)
Allows Medical Record Technicians or MIS Managers to send a Document back
"KRN",101,3521,1,2,0)
to transcription for editing, provided that it has not yet been signed.
"KRN",101,3521,1,3,0)
The status of the Document is changed to "unreleased" and clinicians and MAS
"KRN",101,3521,1,4,0)
personnel are prevented from viewing it until the modifications have been 
"KRN",101,3521,1,5,0)
made, and the Document has been re-released.
"KRN",101,3521,20)
D SENDBACK^TIURB
"KRN",101,3521,24)

"KRN",101,3521,99)
57061,57318
"KRN",101,3522,-1)
0^57
"KRN",101,3522,0)
TIU ACTION SIGN ON CHART^On Chart^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3522,1,0)
^^5^5^2950614^^^^
"KRN",101,3522,1,1,0)
Allows MIS clerks to mark documents as "signed on chart."
"KRN",101,3522,1,2,0)

"KRN",101,3522,1,3,0)
NOTE:  This step is NECESSARY when the provider elects to sign the chart
"KRN",101,3522,1,4,0)
copy of the document, rather than entering his/her electronic signature
"KRN",101,3522,1,5,0)
on-line.
"KRN",101,3522,20)
D SIGNCHRT^TIURT
"KRN",101,3522,99)
57061,57318
"KRN",101,3523,-1)
0^60
"KRN",101,3523,0)
TIU ACTION VERIFY^Verify/Unverify^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3523,1,0)
^^4^4^2950614^^^^
"KRN",101,3523,1,1,0)
Allows MIS personnel to review, edit, and verify/unverify Documents.
"KRN",101,3523,1,2,0)
 
"KRN",101,3523,1,3,0)
NOTE:  This action may only be applied to Documents which are specified
"KRN",101,3523,1,4,0)
as requiring MAS verification.
"KRN",101,3523,20)
D VERIFY^TIURC
"KRN",101,3523,24)

"KRN",101,3523,99)
57061,57318
"KRN",101,3524,-1)
0^61
"KRN",101,3524,0)
TIU BROWSE ACTION AMEND^Amend^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3524,1,0)
^^2^2^2950628^^^
"KRN",101,3524,1,1,0)
Allows authorized users to amend current document at the
"KRN",101,3524,1,2,0)
patient's request, per the Privacy Act.
"KRN",101,3524,20)
D AMEND1^TIURB,BLDTMP^TIUBR(TIUDA) S VALMBCK="R"
"KRN",101,3524,99)
57061,57318
"KRN",101,3525,-1)
0^64
"KRN",101,3525,0)
TIU BROWSE ACTION DELETE^Delete^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3525,1,0)
^^3^3^2970613^
"KRN",101,3525,1,1,0)
Allows authorized users (as defined by your local business rules in
"KRN",101,3525,1,2,0)
ASU) to delete a discharge summary at the patient's request, per the
"KRN",101,3525,1,3,0)
Privacy Act.
"KRN",101,3525,20)
D DEL^TIURB(TIUDA) S VALMBCK="Q"
"KRN",101,3525,99)
57061,57318
"KRN",101,3526,-1)
0^66
"KRN",101,3526,0)
TIU BROWSE ACTION EDIT^Edit^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3526,1,0)
^^4^4^2950628^^^^
"KRN",101,3526,1,1,0)
Allows authorized users to edit current document online...When electronic
"KRN",101,3526,1,2,0)
signature is enabled, physicians will be prompted for their signatures upon
"KRN",101,3526,1,3,0)
exit, thereby allowing doctors to review, edit and sign as a one-step
"KRN",101,3526,1,4,0)
process. 
"KRN",101,3526,20)
N TIUCHNG D CLEAR^VALM1,EDIT1^TIURA,BLDTMP^TIUBR(TIUDA) S VALMBCK="R"
"KRN",101,3526,99)
57061,57318
"KRN",101,3527,-1)
0^69
"KRN",101,3527,0)
TIU BROWSE ACTION PRINT^Print^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3527,1,0)
^^2^2^2950628^^^^
"KRN",101,3527,1,1,0)
Allows users to print copies of selected documents on their corresponding VA 
"KRN",101,3527,1,2,0)
Standard Forms to a specified device.
"KRN",101,3527,20)
D CLEAR^VALM1,PRINT1^TIURA S VALMBCK="R"
"KRN",101,3527,99)
57061,57318
"KRN",101,3528,-1)
0^71
"KRN",101,3528,0)
TIU BROWSE ACTION REASSIGN^Reassign^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3528,1,0)
^^3^3^2970613^
"KRN",101,3528,1,1,0)
Allows authorized users (as defined by your local business rules in ASU)
"KRN",101,3528,1,2,0)
to reassign the current document which has been inappropriately assigned
"KRN",101,3528,1,3,0)
to a given patient or the wrong admission.
"KRN",101,3528,20)
D REASSIG1^TIURD
"KRN",101,3528,99)
57061,57318
"KRN",101,3529,-1)
0^73
"KRN",101,3529,0)
TIU BROWSE ACTION SEARCH^Find^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3529,1,0)
^^5^5^2950628^^^^
"KRN",101,3529,1,1,0)
Allows users to search for a text string (word or partial word) from the
"KRN",101,3529,1,2,0)
current position in the summary through its end.  Upon reaching
"KRN",101,3529,1,3,0)
the end of the document, the user will be asked whether to continue the
"KRN",101,3529,1,4,0)
search from the beginning of the document through the origin of the
"KRN",101,3529,1,5,0)
search.
"KRN",101,3529,20)
D FIND^VALM40
"KRN",101,3529,99)
57061,57318
"KRN",101,3530,-1)
0^74
"KRN",101,3530,0)
TIU BROWSE ACTION SEND BACK^Send Back^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3530,1,0)
^^6^6^2950628^^^^
"KRN",101,3530,1,1,0)
transcription to be edited.
"KRN",101,3530,1,2,0)
Allows Medical Record Technicians or MIS Managers to send the current
"KRN",101,3530,1,3,0)
summary back to transcription to be edited, if it hasn't been signed yet.
"KRN",101,3530,1,4,0)
The status of the summary is changed to "unreleased" and clinicians and 
"KRN",101,3530,1,5,0)
MAS personnel are prevented from viewing it until the modifications have
"KRN",101,3530,1,6,0)
been made, and the summary has been re-released.
"KRN",101,3530,20)
D SENDBACK^TIUT(TIUDA) S VALMBCK=$S(+$P(^TIU(8925,+TIUDA,13),U,4):"R",1:"Q")
"KRN",101,3530,99)
57061,57318
"KRN",101,3531,-1)
0^75
"KRN",101,3531,0)
TIU BROWSE ACTION SIGN ON CHART^On Chart^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3531,1,0)
^^1^1^2950628^^^^
"KRN",101,3531,1,1,0)
Allows MIS clerks to mark current summary as "signed on chart."
"KRN",101,3531,20)
D SIGCHRT1^TIURT($G(TIUDA))
"KRN",101,3531,99)
57061,57318
"KRN",101,3532,-1)
0^76
"KRN",101,3532,0)
TIU BROWSE ACTION SIGN/COSIGN^Sign/Cosign^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3532,1,0)
^^6^6^2950628^^^^
"KRN",101,3532,1,1,0)
Allows clinicians to electronically sign the current summary.
"KRN",101,3532,1,2,0)
 
"KRN",101,3532,1,3,0)
NOTE:  Electronic signature carries the same legal ramifications that
"KRN",101,3532,1,4,0)
wet signature of a hard-copy discharge summary carries.  You are
"KRN",101,3532,1,5,0)
advised to carefully review each discharge summary for content and
"KRN",101,3532,1,6,0)
accuracy before exercising this option.
"KRN",101,3532,15)
S VALMBCK="Q"
"KRN",101,3532,20)
D EDSIG^TIURS(TIUDA,$G(TIUDATA),1)
"KRN",101,3532,24)

"KRN",101,3532,99)
57061,57318
"KRN",101,3533,-1)
0^77
"KRN",101,3533,0)
TIU BROWSE ACTION VERIFY^Verify/Unverify^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3533,1,0)
^^5^5^2950628^^^^
"KRN",101,3533,1,1,0)
Allows MIS personnel to review, edit, and verify/unverify the current
"KRN",101,3533,1,2,0)
summary.
"KRN",101,3533,1,3,0)
 
"KRN",101,3533,1,4,0)
NOTE:  This action may only be selected when the site parameter to require
"KRN",101,3533,1,5,0)
MAS verification is set.
"KRN",101,3533,15)
S VALMBCK="Q"
"KRN",101,3533,20)
D VERIFY1^TIURC
"KRN",101,3533,24)
; If verification is required
"KRN",101,3533,99)
57061,57318
"KRN",101,3534,-1)
0^80
"KRN",101,3534,0)
TIU BROWSE MENU MRT^Review/edit/sign^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3534,1,0)
^^1^1^2950628^^
"KRN",101,3534,1,1,0)
Menu of actions which may be executed by clinicians.
"KRN",101,3534,4)
26
"KRN",101,3534,10,0)
^101.01PA^13^13
"KRN",101,3534,10,3,0)
3526^^7^
"KRN",101,3534,10,3,"^")
TIU BROWSE ACTION EDIT
"KRN",101,3534,10,4,0)
3527^^13^
"KRN",101,3534,10,4,"^")
TIU BROWSE ACTION PRINT
"KRN",101,3534,10,5,0)
3507^^15^
"KRN",101,3534,10,5,"^")
TIU ACTION QUIT
"KRN",101,3534,10,6,0)
3529^^1^
"KRN",101,3534,10,6,"^")
TIU BROWSE ACTION SEARCH
"KRN",101,3534,10,9,0)
3533^^3^
"KRN",101,3534,10,9,"^")
TIU BROWSE ACTION VERIFY
"KRN",101,3534,10,10,0)
3531^^5^
"KRN",101,3534,10,10,"^")
TIU BROWSE ACTION SIGN ON CHART
"KRN",101,3534,10,11,0)
3530^^9^
"KRN",101,3534,10,11,"^")
TIU BROWSE ACTION SEND BACK
"KRN",101,3534,10,12,0)
3528^^11^
"KRN",101,3534,10,12,"^")
TIU BROWSE ACTION REASSIGN
"KRN",101,3534,10,13,0)
3744^^12^
"KRN",101,3534,10,13,"^")
TIU BROWSE ACTION COPY
"KRN",101,3534,15)
S:$D(DIROUT) TIUQUIT=1
"KRN",101,3534,20)
S XQORM("SH")=0
"KRN",101,3534,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3534,26)
S VALMSG="+ Next Screen  - Prev Screen  ?? More actions" D RESIZE^TIULM(21,18),SHOW^VALM
"KRN",101,3534,28)
Select Action: 
"KRN",101,3534,99)
57134,57340
"KRN",101,3535,-1)
0^84
"KRN",101,3535,0)
TIU ENTER/EDIT^Enter/Edit Document^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3535,1,0)
^^2^2^2950628^^^^
"KRN",101,3535,1,1,0)
This option allows transcriptionists to enter/edit dictated discharge
"KRN",101,3535,1,2,0)
summaries or addenda directly on-line.
"KRN",101,3535,5)
GMRD ENTER/EDIT;DIC(19,
"KRN",101,3535,20)
D MAIN^TIUEDIT
"KRN",101,3535,99)
57061,57319
"KRN",101,3536,-1)
0^88
"KRN",101,3536,0)
TIU ERROR STATUS ALL^All errors^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3536,1,0)
^^2^2^2950628^^
"KRN",101,3536,1,1,0)
 
"KRN",101,3536,1,2,0)
Show all filing errors, regardless of their resolution status.
"KRN",101,3536,99)
57061,57319
"KRN",101,3537,-1)
0^89
"KRN",101,3537,0)
TIU ERROR STATUS RESOLVED^Resolved^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3537,1,0)
^^2^2^2950628^^
"KRN",101,3537,1,1,0)
 
"KRN",101,3537,1,2,0)
Show only those filing errors which have already been resolved.
"KRN",101,3537,99)
57061,57319
"KRN",101,3538,-1)
0^90
"KRN",101,3538,0)
TIU ERROR STATUS SELECT^Error Status^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3538,1,0)
^^3^3^2950628^^
"KRN",101,3538,1,1,0)
 
"KRN",101,3538,1,2,0)
Select the resolution status for the filing errors which you would like to
"KRN",101,3538,1,3,0)
see displayed.
"KRN",101,3538,4)
40
"KRN",101,3538,10,0)
^101.01PA^3^3
"KRN",101,3538,10,1,0)
3539^^1^
"KRN",101,3538,10,1,"^")
TIU ERROR STATUS UNRESOLVED
"KRN",101,3538,10,2,0)
3537^^2^
"KRN",101,3538,10,2,"^")
TIU ERROR STATUS RESOLVED
"KRN",101,3538,10,3,0)
3536^^3^
"KRN",101,3538,10,3,"^")
TIU ERROR STATUS ALL
"KRN",101,3538,99)
57061,57319
"KRN",101,3539,-1)
0^91
"KRN",101,3539,0)
TIU ERROR STATUS UNRESOLVED^Unresolved^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3539,1,0)
^^2^2^2950628^^
"KRN",101,3539,1,1,0)
 
"KRN",101,3539,1,2,0)
Show only those errors which have NOT yet been resolved.
"KRN",101,3539,99)
57061,57319
"KRN",101,3540,-1)
0^83
"KRN",101,3540,0)
TIU DS OE/RR INTERFACE^Review Discharge Summary^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3540,1,0)
^^4^4^2960605^^^^
"KRN",101,3540,1,1,0)
Allows access to the Browse Discharge Summary utility.
"KRN",101,3540,1,2,0)
 
"KRN",101,3540,1,3,0)
NOTE:  This action is designed to be added to ANY OE/RR menu (e.g., OR
"KRN",101,3540,1,4,0)
USER MENU, OR ADD MENU CLINICIAN, etc.).
"KRN",101,3540,2,0)
^101.02A^2^2
"KRN",101,3540,2,1,0)
DISCHARGE SUMMARY
"KRN",101,3540,2,2,0)
DS
"KRN",101,3540,2,"B","DISCHARGE SUMMARY",1)

"KRN",101,3540,2,"B","DS",2)

"KRN",101,3540,3,0)
^101.03P^1^1
"KRN",101,3540,3,1,0)
ORWARD
"KRN",101,3540,15)
K TIUPRM0,TIUPRM1,TIUPRM3
"KRN",101,3540,20)
D MAIN^TIUBRWS($$WHATMPL^TIULC1(DUZ),244)
"KRN",101,3540,99)
57061,57319
"KRN",101,3541,-1)
0^111
"KRN",101,3541,0)
TIU STATUS UNDICTATED^undictated^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3541,1,0)
^^1^1^2970613^^
"KRN",101,3541,1,1,0)
Status undictated (not implemented).
"KRN",101,3541,99)
57061,57319
"KRN",101,3542,-1)
0^114
"KRN",101,3542,0)
TIU STATUS UNTRANSCRIBED^untranscribed^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3542,1,0)
^^1^1^2970613^^
"KRN",101,3542,1,1,0)
Status Untranscribed (not implemented).
"KRN",101,3542,99)
57061,57319
"KRN",101,3543,-1)
0^112
"KRN",101,3543,0)
TIU STATUS UNRELEASED^unreleased^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3543,1,0)
^^1^1^2970613^^
"KRN",101,3543,1,1,0)
Documents not yet released from transcription (i.e., DRAFT documents).
"KRN",101,3543,99)
57061,57319
"KRN",101,3544,-1)
0^115
"KRN",101,3544,0)
TIU STATUS UNVERIFIED^unverified^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3544,1,0)
^^2^2^2970613^^
"KRN",101,3544,1,1,0)
Documents not yet verified by MAS.  When verification is required, these
"KRN",101,3544,1,2,0)
won't be available for view outside of MAS.
"KRN",101,3544,99)
57061,57319
"KRN",101,3545,-1)
0^113
"KRN",101,3545,0)
TIU STATUS UNSIGNED^unsigned^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3545,1,0)
^^1^1^2970613^^
"KRN",101,3545,1,1,0)
Documents which have not yet been signed by the author.
"KRN",101,3545,99)
57061,57319
"KRN",101,3546,-1)
0^110
"KRN",101,3546,0)
TIU STATUS UNCOSIGNED^uncosigned^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3546,1,0)
^^2^2^2970613^^
"KRN",101,3546,1,1,0)
Documents which have not yet been overread and cosigned by the author's
"KRN",101,3546,1,2,0)
supervisor, or the expected cosigner of the document.
"KRN",101,3546,99)
57061,57319
"KRN",101,3547,-1)
0^106
"KRN",101,3547,0)
TIU STATUS COMPLETED^completed^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3547,1,0)
^^2^2^2970613^^
"KRN",101,3547,1,1,0)
Documents which have been signed (and if necessary, cosigned), and are
"KRN",101,3547,1,2,0)
austensibly "authenticated."
"KRN",101,3547,99)
57061,57319
"KRN",101,3548,-1)
0^105
"KRN",101,3548,0)
TIU STATUS AMENDED^amended^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3548,1,0)
^^2^2^2970613^^
"KRN",101,3548,1,1,0)
Documents which have been amended following signature, per the Privacy
"KRN",101,3548,1,2,0)
Act.
"KRN",101,3548,99)
57061,57319
"KRN",101,3549,-1)
0^109
"KRN",101,3549,0)
TIU STATUS PURGED^purged^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3549,1,0)
^^2^2^2970613^^
"KRN",101,3549,1,1,0)
Documents which have been purged from the system, and are only available
"KRN",101,3549,1,2,0)
through archival means.
"KRN",101,3549,99)
57061,57319
"KRN",101,3550,-1)
0^108
"KRN",101,3550,0)
TIU STATUS MENU^Select STATUS^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3550,1,0)
^^1^1^2970613^^
"KRN",101,3550,1,1,0)
Menu of allowable statuses.
"KRN",101,3550,4)
40
"KRN",101,3550,10,0)
^101.01PA^10^10
"KRN",101,3550,10,1,0)
3541^1^1^
"KRN",101,3550,10,1,"^")
TIU STATUS UNDICTATED
"KRN",101,3550,10,2,0)
3542^2^2^
"KRN",101,3550,10,2,"^")
TIU STATUS UNTRANSCRIBED
"KRN",101,3550,10,3,0)
3543^3^3^
"KRN",101,3550,10,3,"^")
TIU STATUS UNRELEASED
"KRN",101,3550,10,4,0)
3544^4^4^
"KRN",101,3550,10,4,"^")
TIU STATUS UNVERIFIED
"KRN",101,3550,10,5,0)
3545^5^5^
"KRN",101,3550,10,5,"^")
TIU STATUS UNSIGNED
"KRN",101,3550,10,6,0)
3546^6^6^
"KRN",101,3550,10,6,"^")
TIU STATUS UNCOSIGNED
"KRN",101,3550,10,7,0)
3547^7^7^
"KRN",101,3550,10,7,"^")
TIU STATUS COMPLETED
"KRN",101,3550,10,8,0)
3548^8^8^
"KRN",101,3550,10,8,"^")
TIU STATUS AMENDED
"KRN",101,3550,10,9,0)
3549^9^9^
"KRN",101,3550,10,9,"^")
TIU STATUS PURGED
"KRN",101,3550,10,10,0)
3684^10^10^
"KRN",101,3550,10,10,"^")
TIU STATUS DELETED
"KRN",101,3550,99)
57126,43141
"KRN",101,3551,-1)
0^101
"KRN",101,3551,0)
TIU REVIEW BY SUBJECT^Subject^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3551,1,0)
^^1^1^2950628^^
"KRN",101,3551,1,1,0)
This action type option is used for specifying Review by patient.
"KRN",101,3551,24)

"KRN",101,3551,99)
57061,57320
"KRN",101,3552,-1)
0^100
"KRN",101,3552,0)
TIU REVIEW BY SERVICE^Service^^^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3552,1,0)
^^1^1^2970613^^
"KRN",101,3552,1,1,0)
Search Category by Service.
"KRN",101,3552,99)
57061,57320
"KRN",101,3553,-1)
0^210
"KRN",101,3553,0)
TIUFH ACTION MENU CLIN^Edit Document Definitions^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3553,1,0)
^^1^1^2970220^^^^
"KRN",101,3553,1,1,0)
Protocol Menu for List Manager Template TIUFH EDIT DDEFS CLIN
"KRN",101,3553,4)
26^
"KRN",101,3553,10,0)
^101.01PA^40^40
"KRN",101,3553,10,5,0)
3554^^11^
"KRN",101,3553,10,5,"^")
TIUFH ACTION EXPAND/COLLAPSE ENTRY
"KRN",101,3553,10,26,0)
3755^^22^
"KRN",101,3553,10,26,"^")
TIUF ACTION TRY
"KRN",101,3553,10,32,0)
3799^^12^^^
"KRN",101,3553,10,32,"^")
TIUFH ACTION JUMP TO DDEF
"KRN",101,3553,10,35,0)
4094^^21^
"KRN",101,3553,10,35,"^")
TIUFHA ACTION EDIT/VIEW
"KRN",101,3553,10,36,0)
4105^^31^
"KRN",101,3553,10,36,"^")
TIUF FIND
"KRN",101,3553,10,37,0)
3507^^32^
"KRN",101,3553,10,37,"^")
TIU ACTION QUIT
"KRN",101,3553,10,38,0)
4701^^13^
"KRN",101,3553,10,38,"^")
TIUFHA ACTION BOILERPLATE TEXT
"KRN",101,3553,10,39,0)
3606^^33^
"KRN",101,3553,10,39,"^")
TIU ACTION BLANK1
"KRN",101,3553,10,40,0)
3607^^33^
"KRN",101,3553,10,40,"^")
TIU ACTION BLANK2
"KRN",101,3553,15)

"KRN",101,3553,20)

"KRN",101,3553,24)

"KRN",101,3553,26)
S VALMSG=$$VMSG^TIUFL D SHOW^VALM
"KRN",101,3553,28)
Select Action: 
"KRN",101,3553,99)
57146,33844
"KRN",101,3554,-1)
0^209
"KRN",101,3554,0)
TIUFH ACTION EXPAND/COLLAPSE ENTRY^Expand/Collapse^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3554,1,0)
^^2^2^2970220^^^^
"KRN",101,3554,1,1,0)
Expands/collapses selected entry to display entry items or to collapse
"KRN",101,3554,1,2,0)
entry hierarchy.  Entries preceded by + have items and can be expanded.
"KRN",101,3554,20)
D EXPCOLL^TIUFH1
"KRN",101,3554,24)

"KRN",101,3554,99)
57028,35220
"KRN",101,3557,-1)
0^51
"KRN",101,3557,0)
TIU ACTION REFRESH^Re-Display Screen^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3557,1,0)
^^2^2^2970613^^
"KRN",101,3557,1,1,0)
Refresh the display (useful when the List Manager display becomes
"KRN",101,3557,1,2,0)
"corrupt" on return from an action or jump).
"KRN",101,3557,2,0)
^101.02A^2^2
"KRN",101,3557,2,1,0)
RS
"KRN",101,3557,2,2,0)
RE
"KRN",101,3557,2,"B","RE",2)

"KRN",101,3557,2,"B","RS",1)

"KRN",101,3557,20)
S VALMBCK="R" D RE^VALM4
"KRN",101,3557,99)
57061,57320
"KRN",101,3560,-1)
0^38
"KRN",101,3560,0)
TIU ACTION MENU SEND BACK^Send Back Menu^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3560,1,0)
^^1^1^2930802^^
"KRN",101,3560,1,1,0)
Menu of actions which may be executed by clinicians.
"KRN",101,3560,4)
26
"KRN",101,3560,10,0)
^101.01PA^8^6
"KRN",101,3560,10,3,0)
3527^^3^
"KRN",101,3560,10,3,"^")
TIU BROWSE ACTION PRINT
"KRN",101,3560,10,4,0)
3507^^6^
"KRN",101,3560,10,4,"^")
TIU ACTION QUIT
"KRN",101,3560,10,5,0)
3529^^1^
"KRN",101,3560,10,5,"^")
TIU BROWSE ACTION SEARCH
"KRN",101,3560,10,8,0)
3530^^5^
"KRN",101,3560,10,8,"^")
TIU BROWSE ACTION SEND BACK
"KRN",101,3560,15)
S:$D(DIROUT) TIUQUIT=1
"KRN",101,3560,20)
S VALMSG="+ Next Screen  - Prev Screen  ?? More Actions"
"KRN",101,3560,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3560,26)
D RESIZE^TIULM(21,18),SHOW^VALM S XQORM("B")=$S(VALMLST<VALMCNT:"Next Screen",1:"Send Back")
"KRN",101,3560,28)
Select Action: 
"KRN",101,3560,99)
57061,57321
"KRN",101,3561,-1)
0^43
"KRN",101,3561,0)
TIU ACTION MENU VERIFY^Verify Documents^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3561,1,0)
^^1^1^2930802^^
"KRN",101,3561,1,1,0)
Menu of actions which may be executed by clinicians.
"KRN",101,3561,4)
26
"KRN",101,3561,10,0)
^101.01PA^8^6
"KRN",101,3561,10,3,0)
3527^^3^
"KRN",101,3561,10,3,"^")
TIU BROWSE ACTION PRINT
"KRN",101,3561,10,4,0)
3507^^9^
"KRN",101,3561,10,4,"^")
TIU ACTION QUIT
"KRN",101,3561,10,5,0)
3529^^1^
"KRN",101,3561,10,5,"^")
TIU BROWSE ACTION SEARCH
"KRN",101,3561,10,8,0)
3533^^5^
"KRN",101,3561,10,8,"^")
TIU BROWSE ACTION VERIFY
"KRN",101,3561,15)
S:$D(DIROUT) TIUQUIT=1
"KRN",101,3561,20)
S XQORM("SH")=0
"KRN",101,3561,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3561,26)
S VALMSG="+ Next Screen  - Prev Screen  ?? More actions" D RESIZE^TIULM(21,18),SHOW^VALM S XQORM("B")=$S(VALMLST<VALMCNT:"Next Screen",1:"Verify")
"KRN",101,3561,28)
Select Action: 
"KRN",101,3561,99)
57131,52700
"KRN",101,3566,-1)
0^40
"KRN",101,3566,0)
TIU ACTION MENU SIGN/COSIGN^Sign/Cosign^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3566,1,0)
^^1^1^2930802^^
"KRN",101,3566,1,1,0)
Menu of actions which may be executed by clinicians.
"KRN",101,3566,4)
26
"KRN",101,3566,10,0)
^101.01PA^10^10
"KRN",101,3566,10,3,0)
3527^^3^
"KRN",101,3566,10,3,"^")
TIU BROWSE ACTION PRINT
"KRN",101,3566,10,4,0)
4157^^9^
"KRN",101,3566,10,4,"^")
TIU BROWSE ACTION REJECT
"KRN",101,3566,10,5,0)
3529^^1^
"KRN",101,3566,10,5,"^")
TIU BROWSE ACTION SEARCH
"KRN",101,3566,10,8,0)
3567^^7^
"KRN",101,3566,10,8,"^")
TIU BROWSE ACTION APPROVE
"KRN",101,3566,10,9,0)
3526^^5^
"KRN",101,3566,10,9,"^")
TIU BROWSE ACTION EDIT
"KRN",101,3566,10,10,0)
2772^^6^
"KRN",101,3566,10,10,"^")
VALM BLANK 1
"KRN",101,3566,15)
K TIUSIGN S:$D(DIROUT) TIUQUIT=1
"KRN",101,3566,20)
S TIUSIGN=0,VALMSG="+ Next Screen  - Prev Screen  ?? More Actions"
"KRN",101,3566,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3566,26)
D RESIZE^TIULM(21,18),SHOW^VALM S XQORM("B")=$S(VALMLST<VALMCNT:"Next Screen",1:"NO")
"KRN",101,3566,28)
Ready for Signature: 
"KRN",101,3566,99)
57135,43431
"KRN",101,3567,-1)
0^62
"KRN",101,3567,0)
TIU BROWSE ACTION APPROVE^Yes^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3567,1,0)
^^2^2^2950628^
"KRN",101,3567,1,1,0)
Allows authorized users to approve the current document for electronic 
"KRN",101,3567,1,2,0)
signature.
"KRN",101,3567,20)
D ACCEPT^TIURS(.TIUSLST,TIUI)
"KRN",101,3567,99)
57061,57322
"KRN",101,3598,-1)
0^246
"KRN",101,3598,0)
TIUFH EDIT ITEMS^Items: Seq Mnem MenuTxt^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3598,1,0)
^^20^20^2970304^
"KRN",101,3598,1,1,0)
ITEMS actions differ from top screen actions such as Delete in that Items
"KRN",101,3598,1,2,0)
looks at items solely as items under the parent, NOT as file entries in
"KRN",101,3598,1,3,0)
their own right.  
"KRN",101,3598,1,4,0)
 
"KRN",101,3598,1,5,0)
Action displays item information (Sequence, Mnemonic, Menu Text) for items
"KRN",101,3598,1,6,0)
of selected entry.  User may add/edit/delete appropriate items.
"KRN",101,3598,1,7,0)
 
"KRN",101,3598,1,8,0)
A Title or Component must be Inactive before its items can be edited.  An
"KRN",101,3598,1,9,0)
entry must have an Owner before its items can be edited.  User can view
"KRN",101,3598,1,10,0)
items of National entries, but only take limited actions on them.  Items
"KRN",101,3598,1,11,0)
of Shared Components can be edited only via the Sort Option.  Enter ??? to
"KRN",101,3598,1,12,0)
see Shared.
"KRN",101,3598,1,13,0)
 
"KRN",101,3598,1,14,0)
MANAGER OPTIONS
"KRN",101,3598,1,15,0)
Managers (persons with Manager menu) can edit items whether or not they
"KRN",101,3598,1,16,0)
own the parent entry.
"KRN",101,3598,1,17,0)
 
"KRN",101,3598,1,18,0)
CLINICIAN OPTIONS
"KRN",101,3598,1,19,0)
Clinicians (persons with Clinician menu) can view but not edit items of
"KRN",101,3598,1,20,0)
entries they don't own.
"KRN",101,3598,10,0)
^101.01PA
"KRN",101,3598,20)
D EDITEMS^TIUFD3
"KRN",101,3598,24)
I $P($G(TIUFNOD0),U,4)'="O"
"KRN",101,3598,99)
57041,41727
"KRN",101,3599,-1)
0^1
"KRN",101,3599,0)
TIU ACTION ADD DOCUMENT^Add Document^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3599,1,0)
^^1^1^2970613^^
"KRN",101,3599,1,1,0)
Enter a new Document.
"KRN",101,3599,15)
S VALMBCK="R"
"KRN",101,3599,20)
D ADD^TIURC
"KRN",101,3599,99)
57061,57322
"KRN",101,3600,-1)
0^23
"KRN",101,3600,0)
TIU ACTION LINK TO VISIT^Visit^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3600,1,0)
^^2^2^2950313^
"KRN",101,3600,1,1,0)
Allows authorized users to create or revise the linkage of any document to 
"KRN",101,3600,1,2,0)
the corresponding encounter with the patient.
"KRN",101,3600,15)
S VALMBCK="R"
"KRN",101,3600,20)
D REASSIGN^TIURD
"KRN",101,3600,99)
57061,57322
"KRN",101,3601,-1)
0^22
"KRN",101,3601,0)
TIU ACTION LINK TO PROBLEMS^Problems^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3601,1,0)
^^2^2^2950313^
"KRN",101,3601,1,1,0)
Allows authorized users to link documents to problems in a many-to-many 
"KRN",101,3601,1,2,0)
fashion.
"KRN",101,3601,15)

"KRN",101,3601,20)
D LINK^TIURB
"KRN",101,3601,99)
57061,57322
"KRN",101,3602,-1)
0^29
"KRN",101,3602,0)
TIU ACTION MENU LINK^Link ...^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3602,1,0)
^^3^3^2950313^
"KRN",101,3602,1,1,0)
Allows authorized users to link documents to either problems, visits, or 
"KRN",101,3602,1,2,0)
other documents.  Such associations permit a variety of clinically useful
"KRN",101,3602,1,3,0)
"views" of the on-line record.
"KRN",101,3602,4)
26
"KRN",101,3602,10,0)
^101.01PA^2^2
"KRN",101,3602,10,1,0)
3601^^1^
"KRN",101,3602,10,1,"^")
TIU ACTION LINK TO PROBLEMS
"KRN",101,3602,10,2,0)
3600^^3^
"KRN",101,3602,10,2,"^")
TIU ACTION LINK TO VISIT
"KRN",101,3602,15)

"KRN",101,3602,20)
S XQORM(0)="AD",VALMBCK=""
"KRN",101,3602,26)
W !
"KRN",101,3602,28)
Specify Linkage: 
"KRN",101,3602,99)
57140,40150
"KRN",101,3606,-1)
0^3
"KRN",101,3606,0)
TIU ACTION BLANK1^^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3606,1,0)
^^1^1^2970613^^
"KRN",101,3606,1,1,0)
Blank space for menu formatting.
"KRN",101,3607,-1)
0^4
"KRN",101,3607,0)
TIU ACTION BLANK2^^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3607,1,0)
^^1^1^2970613^^
"KRN",101,3607,1,1,0)
Blank space for menu formatting.
"KRN",101,3631,-1)
0^30
"KRN",101,3631,0)
TIU ACTION MENU LINK TO PROBLEM^Specify Problem(s)^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3631,1,0)
^^2^2^2970613^^
"KRN",101,3631,1,1,0)
Menu of actions for use by the List Template for Linking Documents to
"KRN",101,3631,1,2,0)
problems.
"KRN",101,3631,4)
26
"KRN",101,3631,10,0)
^101.01PA^3^3
"KRN",101,3631,10,1,0)
3632^^3^
"KRN",101,3631,10,1,"^")
TIU ACTION SELECT PROBLEM
"KRN",101,3631,10,2,0)
4683^^1^
"KRN",101,3631,10,2,"^")
TIU ACTION SEARCH LIST
"KRN",101,3631,10,3,0)
3507^^9^
"KRN",101,3631,10,3,"^")
TIU ACTION QUIT
"KRN",101,3631,20)
S XQORM("SH")=0 S:$G(VALMSG)'["*" VALMSG="+ Next Screen  - Prev Screen  ?? More Actions",VALM("MAX")=$S(+$G(VALMCNT):+$G(VALMCNT),1:10)
"KRN",101,3631,26)
S XQORM("#")=$G(^TMP("TIURP",$J,"#")) D RESIZE^TIULM(21,18),SHOW^VALM K XQORM("XLATE","FIND") S XQORM("B")=$S(VALMLST<VALMCNT:"Next Screen",1:"Select Problems")
"KRN",101,3631,28)
Select Action: 
"KRN",101,3631,99)
57110,60703
"KRN",101,3632,-1)
0^55
"KRN",101,3632,0)
TIU ACTION SELECT PROBLEM^Select Problems^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3632,1,0)
^^2^2^2970613^^
"KRN",101,3632,1,1,0)
Select one or more problems with which the current document is to be
"KRN",101,3632,1,2,0)
associated.
"KRN",101,3632,15)
S VALMBCK="Q"
"KRN",101,3632,20)
D PROBLEM^TIURB
"KRN",101,3632,99)
57061,57323
"KRN",101,3633,-1)
0^166
"KRN",101,3633,0)
TIUF SORT BY OWNER^Owner^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3633,4)
26
"KRN",101,3633,10,0)
^101.01PA^4^4
"KRN",101,3633,10,1,0)
3768^P^1^^^
"KRN",101,3633,10,1,"^")
TIUF OWNER PERSONAL
"KRN",101,3633,10,2,0)
3769^C^2^^^
"KRN",101,3633,10,2,"^")
TIUF OWNER CLASS
"KRN",101,3633,10,3,0)
3770^I^3^^^
"KRN",101,3633,10,3,"^")
TIUF OWNER INDIVIDUAL
"KRN",101,3633,10,4,0)
3825^N^4^
"KRN",101,3633,10,4,"^")
TIUF OWNER NONE
"KRN",101,3633,15)

"KRN",101,3633,20)
S XQORM(0)="1A\",TIUFATTR="O^OWNER",XQORM("??")="D OWNER^TIUFXHL1"
"KRN",101,3633,21,0)
^101.021A^^0
"KRN",101,3633,24)

"KRN",101,3633,26)
W ""
"KRN",101,3633,28)
Select kind of Owner:  (P/C/I/N): 
"KRN",101,3633,29)
Individual
"KRN",101,3633,99)
57126,31308
"KRN",101,3634,-1)
0^168
"KRN",101,3634,0)
TIUF SORT BY STATUS^Status^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3634,4)
26
"KRN",101,3634,10,0)
^101.01PA^4^4
"KRN",101,3634,10,1,0)
4690^A^1^
"KRN",101,3634,10,1,"^")
TIUF STATUS ACTIVE
"KRN",101,3634,10,2,0)
4691^I^2^
"KRN",101,3634,10,2,"^")
TIUF STATUS INACTIVE
"KRN",101,3634,10,3,0)
4692^T^3^
"KRN",101,3634,10,3,"^")
TIUF STATUS TEST
"KRN",101,3634,10,4,0)
4693^N^4^
"KRN",101,3634,10,4,"^")
TIUF STATUS NONE
"KRN",101,3634,15)

"KRN",101,3634,20)
S XQORM(0)="1A\",XQORM("??")="D STATUS^TIUFXHLX",TIUFATTR="S^STATUS",TIUFSLST="AITN"
"KRN",101,3634,21,0)
^101.021A^^0
"KRN",101,3634,24)

"KRN",101,3634,26)
W ""
"KRN",101,3634,28)
Select Status: (A/I/T/N): 
"KRN",101,3634,29)
A
"KRN",101,3634,99)
57138,54297
"KRN",101,3635,-1)
0^169
"KRN",101,3635,0)
TIUF SORT BY TYPE^Type^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3635,4)

"KRN",101,3635,10,0)
^101.01PA^^0
"KRN",101,3635,15)

"KRN",101,3635,20)
N TYPE S TIUFATTR="T^TYPE" S TYPE=$$SELTYPE^TIUFLF8 S:TYPE'="" TIUFAVAL=TYPE_U_^TMP("TIUF",$J,"TYPE"_TYPE)
"KRN",101,3635,21,0)
^101.021A^^0
"KRN",101,3635,24)

"KRN",101,3635,26)
W ""
"KRN",101,3635,28)

"KRN",101,3635,99)
56818,38584
"KRN",101,3638,-1)
0^54
"KRN",101,3638,0)
TIU ACTION SELECT LIST ELEMENT^Select Item^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3638,1,0)
^^1^1^2970613^
"KRN",101,3638,1,1,0)
Select one or more items from the current list of documents.
"KRN",101,3638,20)
D PICK^TIULM($P($G(XQORNOD(0)),"=",2)) S VALMBCK=""
"KRN",101,3638,99)
57061,57323
"KRN",101,3644,-1)
0^215
"KRN",101,3644,0)
TIUFHA ACTION DELETE^Delete^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3644,1,0)
^^17^17^2970521^
"KRN",101,3644,1,1,0)
Deletes the entry as an entry in TIU Document Definition file 8925.1.
"KRN",101,3644,1,2,0)
Entry will first be deleted as an item wherever it is used as an item.
"KRN",101,3644,1,3,0)
Entries In Use by documents cannot be deleted.  An entry must have Status
"KRN",101,3644,1,4,0)
Inactive before it can be deleted to ensure that it is not used during the
"KRN",101,3644,1,5,0)
delete process.  Only the owner can delete an entry.  National entries
"KRN",101,3644,1,6,0)
and Shared Components cannot be deleted.
"KRN",101,3644,1,7,0)
 
"KRN",101,3644,1,8,0)
If the entry is pointed to by by an entry in another file (for example if
"KRN",101,3644,1,9,0)
an entry has a Business Rule which references it), it is the user's
"KRN",101,3644,1,10,0)
responsibility to delete the entry which points to it (for example, the
"KRN",101,3644,1,11,0)
Business Rule) before deleting the entry.
"KRN",101,3644,1,12,0)
 
"KRN",101,3644,1,13,0)
OBJECT DELETE
"KRN",101,3644,1,14,0)
Objects can be deleted only from the Detailed Display of the object.
"KRN",101,3644,1,15,0)
Action deletes the object from the file.  Objects can be deleted only by
"KRN",101,3644,1,16,0)
the owner and only after being inactivated.  Objects cannot be deleted if
"KRN",101,3644,1,17,0)
they are embedded in boilerplate text of any entries.
"KRN",101,3644,20)
D DELETE^TIUFHA1:$G(TIUFSTMP)="",DELOBJ^TIUFD4:$G(TIUFSTMP)="D"
"KRN",101,3644,24)

"KRN",101,3644,99)
57028,35435
"KRN",101,3655,-1)
0^5
"KRN",101,3655,0)
TIU ACTION BLANK3^^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3655,1,0)
^^1^1^2970613^
"KRN",101,3655,1,1,0)
Blank space for menu formatting.
"KRN",101,3670,-1)
0^165
"KRN",101,3670,0)
TIUF SORT BY ALL^ALL Docmt Defs^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3670,1,0)
^^2^2^2970220^^^
"KRN",101,3670,1,1,0)
Gets ALL Document Definitions regardless of Type, Owner, etc.  User can
"KRN",101,3670,1,2,0)
still choose where in the alphabet to start the list.
"KRN",101,3670,20)
S TIUFATTR="A^ALL",TIUFAVAL="ALL^ALL"
"KRN",101,3670,21,0)
^101.021A^^0
"KRN",101,3670,99)
56818,38584
"KRN",101,3684,-1)
0^107
"KRN",101,3684,0)
TIU STATUS DELETED^deleted^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3684,1,0)
^^2^2^2950628^^
"KRN",101,3684,1,1,0)
Identifies those documents which have been deleted in accordance with the
"KRN",101,3684,1,2,0)
Privacy Act.
"KRN",101,3684,99)
57061,57323
"KRN",101,3685,-1)
0^39
"KRN",101,3685,0)
TIU ACTION MENU SIGN ON CHART^Sign On Chart Menu^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3685,1,0)
^^1^1^2950424^
"KRN",101,3685,1,1,0)
Menu of actions which may be executed by MIS Personnel.
"KRN",101,3685,4)
26
"KRN",101,3685,10,0)
^101.01PA^8^6
"KRN",101,3685,10,3,0)
3527^^3^
"KRN",101,3685,10,3,"^")
TIU BROWSE ACTION PRINT
"KRN",101,3685,10,4,0)
3507^^6^
"KRN",101,3685,10,4,"^")
TIU ACTION QUIT
"KRN",101,3685,10,5,0)
3529^^1^
"KRN",101,3685,10,5,"^")
TIU BROWSE ACTION SEARCH
"KRN",101,3685,10,8,0)
3531^^5^
"KRN",101,3685,10,8,"^")
TIU BROWSE ACTION SIGN ON CHART
"KRN",101,3685,15)
S:$D(DIROUT) TIUQUIT=1
"KRN",101,3685,20)
S VALMSG="+ Next Screen  - Prev Screen  ?? More Actions"
"KRN",101,3685,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3685,26)
D RESIZE^TIULM(21,18),SHOW^VALM S XQORM("B")=$S(VALMLST<VALMCNT:"Next Screen",1:"On Chart")
"KRN",101,3685,28)
Select Action: 
"KRN",101,3685,99)
57061,57323
"KRN",101,3688,-1)
0^81
"KRN",101,3688,0)
TIU BROWSE MENU PRINT^Print ...^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3688,1,0)
^^3^3^2970613^^
"KRN",101,3688,1,1,0)
Allows a user to print either a chartable copy of the VA Standard Form
"KRN",101,3688,1,2,0)
associated with the current document, or the contents of the browse
"KRN",101,3688,1,3,0)
screen itself.
"KRN",101,3688,4)
26
"KRN",101,3688,10,0)
^101.01PA^2^2
"KRN",101,3688,10,1,0)
3527^^1^
"KRN",101,3688,10,1,"^")
TIU BROWSE ACTION PRINT
"KRN",101,3688,10,2,0)
3689^^2^
"KRN",101,3688,10,2,"^")
TIU BROWSE ACTION PRINT TEXT
"KRN",101,3688,20)
S XQORM(0)="AD",VALMBCK=""
"KRN",101,3688,26)
W !
"KRN",101,3688,28)
Specify Print Format: 
"KRN",101,3688,99)
57061,57323
"KRN",101,3689,-1)
0^70
"KRN",101,3689,0)
TIU BROWSE ACTION PRINT TEXT^Text^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3689,1,0)
^^2^2^2951103^^^
"KRN",101,3689,1,1,0)
This action allws the user to print the entire list of
"KRN",101,3689,1,2,0)
entries currently being displayed.
"KRN",101,3689,20)
D PRTL^VALM1
"KRN",101,3689,99)
57061,57323
"KRN",101,3690,-1)
0^8
"KRN",101,3690,0)
TIU ACTION BROWSE FOR MGR^Browse^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3690,1,0)
^^4^4^2950426^^^
"KRN",101,3690,1,1,0)
Allows users to browse through Documents from the Review Screen.
"KRN",101,3690,1,2,0)
In addition to scrolling sequentially through the selected documents
"KRN",101,3690,1,3,0)
and their addenda, the user may Search for a particular word or
"KRN",101,3690,1,4,0)
phrase, or Print draft copies to a selected device.
"KRN",101,3690,20)
D BROWSE^TIURA("TIU BROWSE FOR MGR")
"KRN",101,3690,99)
57061,57323
"KRN",101,3691,-1)
0^9
"KRN",101,3691,0)
TIU ACTION BROWSE FOR MRT^Browse^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3691,1,0)
^^4^4^2950426^^^
"KRN",101,3691,1,1,0)
Allows users to browse through Documents from the Review Screen.
"KRN",101,3691,1,2,0)
In addition to scrolling sequentially through the selected documents
"KRN",101,3691,1,3,0)
and their addenda, the user may Search for a particular word or
"KRN",101,3691,1,4,0)
phrase, or Print draft copies to a selected device.
"KRN",101,3691,20)
D BROWSE^TIURA("TIU BROWSE FOR MRT")
"KRN",101,3691,99)
57061,57323
"KRN",101,3692,-1)
0^10
"KRN",101,3692,0)
TIU ACTION BROWSE FOR READ ONLY^Browse^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3692,1,0)
^^4^4^2950426^^
"KRN",101,3692,1,1,0)
Allows users to browse through Documents from the Review Screen.
"KRN",101,3692,1,2,0)
In addition to scrolling sequentially through the selected documents
"KRN",101,3692,1,3,0)
and their addenda, the user may Search for a particular word or
"KRN",101,3692,1,4,0)
phrase, or Print draft copies to a selected device.
"KRN",101,3692,20)
D BROWSE^TIURA("TIU BROWSE FOR READ ONLY")
"KRN",101,3692,99)
57061,57323
"KRN",101,3721,-1)
0^188
"KRN",101,3721,0)
TIUFA ACTION ADD ENTRY^Create^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3721,1,0)
^^11^11^2970521^
"KRN",101,3721,1,1,0)
MANAGER OPTIONS
"KRN",101,3721,1,2,0)
This action can be used to create either Objects or nonobject Document
"KRN",101,3721,1,3,0)
Definitions in TIU Document Definition file 8925.1.
"KRN",101,3721,1,4,0)
 
"KRN",101,3721,1,5,0)
An Object entry must have an uppercase name which differs from all other
"KRN",101,3721,1,6,0)
object names, abbreviations, and print names.
"KRN",101,3721,1,7,0)
 
"KRN",101,3721,1,8,0)
After it is created, a nonobject entry must be explicitly added as an Item
"KRN",101,3721,1,9,0)
to a parent in the hierarchy before it can be used.  (The Create Document
"KRN",101,3721,1,10,0)
Definitions Option does this automatically.)  File 8925.1 cannot have
"KRN",101,3721,1,11,0)
two entries of the same type with the same name.
"KRN",101,3721,20)
D ADD^TIUFA1
"KRN",101,3721,99)
57028,35949
"KRN",101,3724,-1)
0^189
"KRN",101,3724,0)
TIUFA ACTION CHANGE VIEW^Change View...^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3724,1,0)
^^3^3^2970220^
"KRN",101,3724,1,1,0)
Changes what Document Definitions appear on list.  If you are not in the
"KRN",101,3724,1,2,0)
Create Objects Option, and wish to see only Objects, change Attribute
"KRN",101,3724,1,3,0)
to Type, then select Type Object.
"KRN",101,3724,4)

"KRN",101,3724,10,0)
^101.01PA^^0
"KRN",101,3724,15)

"KRN",101,3724,20)
D CHANGE^TIUFA1
"KRN",101,3724,26)
W ""
"KRN",101,3724,28)
Change: 
"KRN",101,3724,99)
57028,51605
"KRN",101,3725,-1)
0^190
"KRN",101,3725,0)
TIUFA ACTION MENU CLIN^Sort Document Definitions^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3725,1,0)
^^1^1^2970220^^^
"KRN",101,3725,1,1,0)
Protocol Menu for List Manager Template TIUFA SORT DDEFS CLIN
"KRN",101,3725,4)
26
"KRN",101,3725,10,0)
^101.01PA^25^24
"KRN",101,3725,10,6,0)
3724^^12^
"KRN",101,3725,10,6,"^")
TIUFA ACTION CHANGE VIEW
"KRN",101,3725,10,12,0)
3755^^31^
"KRN",101,3725,10,12,"^")
TIUF ACTION TRY
"KRN",101,3725,10,21,0)
4094^^22^
"KRN",101,3725,10,21,"^")
TIUFHA ACTION EDIT/VIEW
"KRN",101,3725,10,22,0)
3507^^32^
"KRN",101,3725,10,22,"^")
TIU ACTION QUIT
"KRN",101,3725,10,23,0)
4105^^11^
"KRN",101,3725,10,23,"^")
TIUF FIND
"KRN",101,3725,10,25,0)
4701^^21^
"KRN",101,3725,10,25,"^")
TIUFHA ACTION BOILERPLATE TEXT
"KRN",101,3725,15)

"KRN",101,3725,20)

"KRN",101,3725,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^",1),24)) ^(24)
"KRN",101,3725,26)
S VALMSG=$$VMSG^TIUFL D NOINUSE^TIUFLA1,SHOW^VALM
"KRN",101,3725,28)
Select Action: 
"KRN",101,3725,99)
57146,33844
"KRN",101,3738,-1)
0^37
"KRN",101,3738,0)
TIU ACTION MENU REASSIGN^Reassign Documents^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3738,1,0)
^^1^1^2950622^
"KRN",101,3738,1,1,0)
Menu of actions which may be executed during record reassignment.
"KRN",101,3738,4)
26
"KRN",101,3738,10,0)
^101.01PA^8^6
"KRN",101,3738,10,3,0)
3527^^3^
"KRN",101,3738,10,3,"^")
TIU BROWSE ACTION PRINT
"KRN",101,3738,10,4,0)
3507^^9^
"KRN",101,3738,10,4,"^")
TIU ACTION QUIT
"KRN",101,3738,10,5,0)
3529^^1^
"KRN",101,3738,10,5,"^")
TIU BROWSE ACTION SEARCH
"KRN",101,3738,10,8,0)
3528^^5^
"KRN",101,3738,10,8,"^")
TIU BROWSE ACTION REASSIGN
"KRN",101,3738,15)
S:$D(DIROUT) TIUQUIT=1
"KRN",101,3738,20)
S XQORM("SH")=0
"KRN",101,3738,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3738,26)
S VALMSG="+ Next Screen  - Prev Screen  ?? More actions" D RESIZE^TIULM(21,18),SHOW^VALM S XQORM("B")=$S(VALMLST<VALMCNT:"Next Screen",1:"Reassign")
"KRN",101,3738,28)
Select Action: 
"KRN",101,3738,99)
57140,40159
"KRN",101,3743,-1)
0^26
"KRN",101,3743,0)
TIU ACTION MENU COPY^Copy Documents^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3743,1,0)
^^1^1^2950622^
"KRN",101,3743,1,1,0)
Menu of actions which may be executed during record reassignment.
"KRN",101,3743,4)
26
"KRN",101,3743,10,0)
^101.01PA^8^6
"KRN",101,3743,10,3,0)
3527^^3^
"KRN",101,3743,10,3,"^")
TIU BROWSE ACTION PRINT
"KRN",101,3743,10,4,0)
3507^^9^
"KRN",101,3743,10,4,"^")
TIU ACTION QUIT
"KRN",101,3743,10,5,0)
3529^^1^
"KRN",101,3743,10,5,"^")
TIU BROWSE ACTION SEARCH
"KRN",101,3743,10,8,0)
3744^^5^
"KRN",101,3743,10,8,"^")
TIU BROWSE ACTION COPY
"KRN",101,3743,15)
S:$D(DIROUT) TIUQUIT=1
"KRN",101,3743,20)
S XQORM("SH")=0
"KRN",101,3743,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3743,26)
S VALMSG="+ Next Screen  - Prev Screen  ?? More actions" D RESIZE^TIULM(21,18),SHOW^VALM S XQORM("B")=$S(VALMLST<VALMCNT:"Next Screen",1:"Copy")
"KRN",101,3743,28)
Select Action: 
"KRN",101,3743,99)
57061,57324
"KRN",101,3744,-1)
0^63
"KRN",101,3744,0)
TIU BROWSE ACTION COPY^Copy^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3744,1,0)
^^4^4^2950628^^^^
"KRN",101,3744,1,1,0)
Allows authorized users to duplicate the current document.  This is 
"KRN",101,3744,1,2,0)
especially useful when composing a note for a group of patients (e.g., 
"KRN",101,3744,1,3,0)
therapy group, etc.), and rapid duplication to all members of the group is 
"KRN",101,3744,1,4,0)
appropriate.
"KRN",101,3744,20)
D COPY1^TIURC
"KRN",101,3744,99)
57061,57324
"KRN",101,3745,-1)
0^17
"KRN",101,3745,0)
TIU ACTION COPY^Copy^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3745,1,0)
^^3^3^2950628^^^^
"KRN",101,3745,1,1,0)
Allows authorized users to copy one or more documents to other patients and 
"KRN",101,3745,1,2,0)
encounters...This is particularly useful when documenting group sessions, 
"KRN",101,3745,1,3,0)
etc.
"KRN",101,3745,15)
S VALMBCK="R"
"KRN",101,3745,20)
D COPY^TIURC
"KRN",101,3745,99)
57061,57324
"KRN",101,3755,-1)
0^234
"KRN",101,3755,0)
TIUF ACTION TRY^Try^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3755,1,0)
^^33^33^2970528^^
"KRN",101,3755,1,1,0)
TRY examines selected entry for basic problems.
"KRN",101,3755,1,2,0)
 
"KRN",101,3755,1,3,0)
For titles and components with boilerplate text, this includes checking
"KRN",101,3755,1,4,0)
any embedded objects to make sure the object is embedded correctly.
"KRN",101,3755,1,5,0)
 
"KRN",101,3755,1,6,0)
If the entry is a title and checks out OK, (or if its only problem is an
"KRN",101,3755,1,7,0)
inactive object) the user can test the boilerplate text by choosing a
"KRN",101,3755,1,8,0)
patient and entering a document using the entry. TRY does NOT require any
"KRN",101,3755,1,9,0)
particular Status for the title, since documents entered during the trial
"KRN",101,3755,1,10,0)
are deleted immediately after the trial.  During the trial, objects will
"KRN",101,3755,1,11,0)
function even if inactive in order to permit testing of objects.
"KRN",101,3755,1,12,0)
(Ordinarily, object data are not retrieved unless the object is active, so
"KRN",101,3755,1,13,0)
be sure to activate when ready for use.)  Since the trial document does
"KRN",101,3755,1,14,0)
show up on Unsigned lists during the time it is being edited, users should
"KRN",101,3755,1,15,0)
select TEST PATIENTS ONLY.
"KRN",101,3755,1,16,0)
 
"KRN",101,3755,1,17,0)
If TRY is selected from the Boilerplate Text Screen, TRY shows which
"KRN",101,3755,1,18,0)
objects are badly embedded and why.  Checks include whether the object as
"KRN",101,3755,1,19,0)
written exists in the file, whether it is active, whether it is split
"KRN",101,3755,1,20,0)
between lines, and whether the object as written is ambiguous as to which
"KRN",101,3755,1,21,0)
object is intended.  If entry is OK, user can enter a trial document.
"KRN",101,3755,1,22,0)
 
"KRN",101,3755,1,23,0)
For objects, TRY checks object Name, Abbreviation and Print Name to make
"KRN",101,3755,1,24,0)
sure they are not ambiguous.  That is, it makes sure the utility can
"KRN",101,3755,1,25,0)
decide which object to invoke when given the Name, Abbreviation, or Print
"KRN",101,3755,1,26,0)
Name and that it does not get the wrong object. TRY checks that the object
"KRN",101,3755,1,27,0)
has an Object Method, but does NOT check that the Object Method functions
"KRN",101,3755,1,28,0)
correctly.
"KRN",101,3755,1,29,0)
 
"KRN",101,3755,1,30,0)
For classes, document classes and components, TRY just checks for general
"KRN",101,3755,1,31,0)
completeness and correctness.
"KRN",101,3755,1,32,0)
 
"KRN",101,3755,1,33,0)
For action Try, enter TR
"KRN",101,3755,20)
D CHECKDEF^TIUFHA6
"KRN",101,3755,99)
57028,47393
"KRN",101,3765,-1)
0^191
"KRN",101,3765,0)
TIUFA ACTION MENU MGR^Sort Document Definitions^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3765,1,0)
^^1^1^2970220^^^^
"KRN",101,3765,1,1,0)
Protocol Menu for List Manager Template TIUFA SORT DDEFS MGR
"KRN",101,3765,4)
26
"KRN",101,3765,10,0)
^101.01PA^25^24
"KRN",101,3765,10,1,0)
3721^^13^^^
"KRN",101,3765,10,1,"^")
TIUFA ACTION ADD ENTRY
"KRN",101,3765,10,6,0)
3724^^12^^^
"KRN",101,3765,10,6,"^")
TIUFA ACTION CHANGE VIEW
"KRN",101,3765,10,10,0)
3644^^32^^^
"KRN",101,3765,10,10,"^")
TIUFHA ACTION DELETE
"KRN",101,3765,10,20,0)
3798^^33^
"KRN",101,3765,10,20,"^")
TIUFHA ACTION COPY
"KRN",101,3765,10,21,0)
4098^^23^^^
"KRN",101,3765,10,21,"^")
TIUFHA ACTION EDIT STATUS
"KRN",101,3765,10,22,0)
4094^^22^^^
"KRN",101,3765,10,22,"^")
TIUFHA ACTION EDIT/VIEW
"KRN",101,3765,10,23,0)
4105^^11^^^
"KRN",101,3765,10,23,"^")
TIUF FIND
"KRN",101,3765,10,24,0)
4127^^31^^^
"KRN",101,3765,10,24,"^")
TIUFHA ACTION EDIT NAME/OWNER/PNAME
"KRN",101,3765,10,25,0)
4701^^21^
"KRN",101,3765,10,25,"^")
TIUFHA ACTION BOILERPLATE TEXT
"KRN",101,3765,15)

"KRN",101,3765,20)

"KRN",101,3765,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^",1),24)) ^(24)
"KRN",101,3765,26)
S VALMSG=$$VMSG^TIUFL D NOINUSE^TIUFLA1,SHOW^VALM
"KRN",101,3765,28)
Select Action: 
"KRN",101,3765,99)
57146,65165
"KRN",101,3766,-1)
0^164
"KRN",101,3766,0)
TIUF SORT^Sort by Attribute^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3766,1,0)
^^3^3^2970220^^^^
"KRN",101,3766,1,1,0)
Menu allows user to select attribute (e.g. Type) and attribute value
"KRN",101,3766,1,2,0)
(e.g. Component) by which to sort Document Definitions.  User may also
"KRN",101,3766,1,3,0)
choose to display ALL Document Definitions.
"KRN",101,3766,2,0)
^101.02A^^0
"KRN",101,3766,4)
26
"KRN",101,3766,10,0)
^101.01PA^7^7
"KRN",101,3766,10,2,0)
3633^O^2^^^
"KRN",101,3766,10,2,"^")
TIUF SORT BY OWNER
"KRN",101,3766,10,3,0)
3634^S^3^^^
"KRN",101,3766,10,3,"^")
TIUF SORT BY STATUS
"KRN",101,3766,10,4,0)
4087^U^4^^^
"KRN",101,3766,10,4,"^")
TIUF SORT BY USED BY DOCMTS
"KRN",101,3766,10,5,0)
3670^A^6^^^
"KRN",101,3766,10,5,"^")
TIUF SORT BY ALL
"KRN",101,3766,10,6,0)
3635^T^1^
"KRN",101,3766,10,6,"^")
TIUF SORT BY TYPE
"KRN",101,3766,10,7,0)
4095^P^5^
"KRN",101,3766,10,7,"^")
TIUF SORT BY PARENTAGE
"KRN",101,3766,15)
D:$D(TIUFAVAL) SELSTART^TIUFLA
"KRN",101,3766,20)
S XQORM(0)="1A\",XQORM("??")="D ATTRIB^TIUFXHL1"
"KRN",101,3766,21,0)
^101.021A^^0
"KRN",101,3766,26)
W ""
"KRN",101,3766,28)
Select Attribute:  (T/O/S/U/P/A):  
"KRN",101,3766,29)
Owner
"KRN",101,3766,99)
57126,31296
"KRN",101,3768,-1)
0^155
"KRN",101,3768,0)
TIUF OWNER PERSONAL^Personal^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3768,1,0)
^^2^2^2970220^
"KRN",101,3768,1,1,0)
Enter Personal Owner to get Document Definitions which are personally
"KRN",101,3768,1,2,0)
owned by a particular person.
"KRN",101,3768,2,0)
^101.02A^^0
"KRN",101,3768,20)
N DIC,X,Y D FULL^VALM1 S TIUFFULL=1,DIC=200,DIC(0)="AEQ",DIC("A")="Select Personal Owner: " S DIC("B")=$$PERSNAME^TIULC1(DUZ) D ^DIC S:Y>1 TIUFAVAL=Y_U_"P"
"KRN",101,3768,99)
56818,38586
"KRN",101,3769,-1)
0^152
"KRN",101,3769,0)
TIUF OWNER CLASS^Class^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3769,1,0)
^^2^2^2970220^
"KRN",101,3769,1,1,0)
Enter Class Owner to get Document Definitions owned by a particular User
"KRN",101,3769,1,2,0)
Class.
"KRN",101,3769,20)
N DIC,X,Y D FULL^VALM1 S TIUFFULL=1,DIC=8930,DIC(0)="AEMQ" D ^DIC S:Y>0 TIUFAVAL=Y_U_"C"
"KRN",101,3769,21,0)
^101.021A^^0
"KRN",101,3769,99)
56818,38586
"KRN",101,3770,-1)
0^153
"KRN",101,3770,0)
TIUF OWNER INDIVIDUAL^Individual^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3770,1,0)
^^2^2^2970220^
"KRN",101,3770,1,1,0)
Enter Individual Owner to get Document Definitions owned by given
"KRN",101,3770,1,2,0)
individual as a person OR as a class member of an owning User Class.
"KRN",101,3770,20)
N DIC,X,Y D FULL^VALM1 S TIUFFULL=1,DIC=200,DIC(0)="AEQ",DIC("A")="Select Individual Owner: " S DIC("B")=$$PERSNAME^TIULC1(DUZ) D ^DIC S:Y>0 TIUFAVAL=Y_U_"I"
"KRN",101,3770,99)
56818,38586
"KRN",101,3788,-1)
0^134
"KRN",101,3788,0)
TIUF CHANGE START WITH/GO TO^Start With/Go To^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3788,20)
S TIUFATTR=TIUFTMPA,TIUFAVAL=TIUFTMPV
"KRN",101,3788,28)

"KRN",101,3788,99)
56818,38586
"KRN",101,3789,-1)
0^132
"KRN",101,3789,0)
TIUF CHANGE SORT ATTRIBUTE^Attribute^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3789,4)
26
"KRN",101,3789,10,0)
^101.01PA^6^6
"KRN",101,3789,10,1,0)
3635^T^1^^^
"KRN",101,3789,10,1,"^")
TIUF SORT BY TYPE
"KRN",101,3789,10,2,0)
3633^O^2^^^
"KRN",101,3789,10,2,"^")
TIUF SORT BY OWNER
"KRN",101,3789,10,3,0)
3634^S^3^^^
"KRN",101,3789,10,3,"^")
TIUF SORT BY STATUS
"KRN",101,3789,10,4,0)
4087^U^4^^^
"KRN",101,3789,10,4,"^")
TIUF SORT BY USED BY DOCMTS
"KRN",101,3789,10,5,0)
3670^A^6^
"KRN",101,3789,10,5,"^")
TIUF SORT BY ALL
"KRN",101,3789,10,6,0)
4095^P^5^
"KRN",101,3789,10,6,"^")
TIUF SORT BY PARENTAGE
"KRN",101,3789,15)

"KRN",101,3789,20)
S XQORM(0)="1A\",XQORM("??")="D ATTRIB^TIUFXHL1"
"KRN",101,3789,26)
W ""
"KRN",101,3789,28)
Select Attribute:  (T/O/S/U/P/A): 
"KRN",101,3789,99)
57143,59110
"KRN",101,3790,-1)
0^131
"KRN",101,3790,0)
TIUF CHANGE SORT ATTR VALUE^Value of Attribute^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3790,10,0)
^101.01PA^^0
"KRN",101,3790,15)

"KRN",101,3790,20)
S TIUFATTR=TIUFTMPA S X=$P(TIUFATTR,U),X=$G(^TMP("TIUF",$J,"SORT"_X)),X=X_";ORD(101," W:'X !,"  ?? Viewing ALL: No Attribute Value" H:'X 2 D:X EN^XQOR
"KRN",101,3790,21,0)
^101.021A^^0
"KRN",101,3790,24)

"KRN",101,3790,26)

"KRN",101,3790,99)
56818,38587
"KRN",101,3798,-1)
0^214
"KRN",101,3798,0)
TIUFHA ACTION COPY^Copy^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3798,1,0)
^^51^51^2970522^
"KRN",101,3798,1,1,0)
MANAGER OPTIONS
"KRN",101,3798,1,2,0)
Copy can be done from the Edit Document Definitions Option or from the
"KRN",101,3798,1,3,0)
Sort Option, but not from the Create Document Definitions Option. Document
"KRN",101,3798,1,4,0)
Definitions of Type Title, Component, or Object may be copied.
"KRN",101,3798,1,5,0)
 
"KRN",101,3798,1,6,0)
Copy can be used to "jump start" new entries by copying an old entry and
"KRN",101,3798,1,7,0)
then editing it.  
"KRN",101,3798,1,8,0)
 
"KRN",101,3798,1,9,0)
Copy COULD be used to change the behavior of an entry (i.e. change the
"KRN",101,3798,1,10,0)
behavior of the copy and inactivate the original), but most behavior can
"KRN",101,3798,1,11,0)
be edited even when the entry is in use by documents.  Edit is better than
"KRN",101,3798,1,12,0)
copy/inactivate since it does not clutter up the hierarchy with inactive
"KRN",101,3798,1,13,0)
entries.
"KRN",101,3798,1,14,0)
 
"KRN",101,3798,1,15,0)
Copy can be used to "move" entries once they are in use by documents.
"KRN",101,3798,1,16,0)
(This is not a true "move", but is the only possibility once an entry has
"KRN",101,3798,1,17,0)
been used by documents.  If entry is not yet in use by documents, it is
"KRN",101,3798,1,18,0)
better to delete it as an item from the old parent, and add it to the new
"KRN",101,3798,1,19,0)
parent, a true move).
"KRN",101,3798,1,20,0)
 
"KRN",101,3798,1,21,0)
The Copy action prompts for an entry to copy and a Name to copy into. This
"KRN",101,3798,1,22,0)
name must be different from the name of the entry being copied.  The
"KRN",101,3798,1,23,0)
action then creates a new entry with the chosen name and copies the fields
"KRN",101,3798,1,24,0)
in the Document Definition File 8925.1 into the new entry.
"KRN",101,3798,1,25,0)
 
"KRN",101,3798,1,26,0)
Several fields are NOT copied as is: if the original is National Standard,
"KRN",101,3798,1,27,0)
the entry may be copied, but the copy is not National Standard.  If the
"KRN",101,3798,1,28,0)
original is Shared, it may be copied but the copy is not Shared.  The
"KRN",101,3798,1,29,0)
other exceptional field is the Items field: if the entry has items, the
"KRN",101,3798,1,30,0)
action prompts for item names to copy into, creates NEW entries for the
"KRN",101,3798,1,31,0)
items, and adds the NEW items to the copy.
"KRN",101,3798,1,32,0)
 
"KRN",101,3798,1,33,0)
Exception to the Items field Exception: if a nonshared entry has a Shared
"KRN",101,3798,1,34,0)
item, the action does NOT copy the Shared item but merely adds the Shared
"KRN",101,3798,1,35,0)
item to the copy. If the entry being copied is itself a Shared component,
"KRN",101,3798,1,36,0)
the copy is not shared, and NEW items are added to the copy rather than
"KRN",101,3798,1,37,0)
reusing shared items.
"KRN",101,3798,1,38,0)
 
"KRN",101,3798,1,39,0)
If the copying is being done through the Edit Document Definitions option,
"KRN",101,3798,1,40,0)
the user is asked which parent to add the copy to, and the copy is added
"KRN",101,3798,1,41,0)
as an item to this parent.  If the copy is a Title and the user has chosen
"KRN",101,3798,1,42,0)
a new parent rather than the same parent, the user is asked whether to
"KRN",101,3798,1,43,0)
activate the copy and inactivate the original.
"KRN",101,3798,1,44,0)
 
"KRN",101,3798,1,45,0)
If the copying is done through the Sort Document Definitions option, the
"KRN",101,3798,1,46,0)
copy action does NOT add the copy to any parent.  Such orphan copies can
"KRN",101,3798,1,47,0)
be added to any parent using action Items for the parent.
"KRN",101,3798,1,48,0)
 
"KRN",101,3798,1,49,0)
Objects are copied from the Sort Option or the Create Objects Option.
"KRN",101,3798,1,50,0)
Object Abbreviation and Print Name are not copied, since they must be
"KRN",101,3798,1,51,0)
different from those of the original.
"KRN",101,3798,20)
D COPYENTY^TIUFHA2
"KRN",101,3798,24)

"KRN",101,3798,26)

"KRN",101,3798,99)
57028,35378
"KRN",101,3799,-1)
0^208
"KRN",101,3799,0)
TIUFH ACTION JUMP TO DDEF^Jump to Document Def^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3799,1,0)
^^8^8^2970220^^
"KRN",101,3799,1,1,0)
User selects any Document Definition in the Clinical Document Hierarchy
"KRN",101,3799,1,2,0)
and action expands the display to include the selected entry.  Users
"KRN",101,3799,1,3,0)
cannot jump to Orphans or Objects since they do not belong to the
"KRN",101,3799,1,4,0)
hierarchy.  Users cannot jump to Shared Components since they may occur
"KRN",101,3799,1,5,0)
more than once in the hierarchy.
"KRN",101,3799,1,6,0)
 
"KRN",101,3799,1,7,0)
This is a quick way to get several layers deep into the hierarchy in one
"KRN",101,3799,1,8,0)
step.
"KRN",101,3799,20)
D EXPDEF^TIUFH1
"KRN",101,3799,24)

"KRN",101,3799,26)

"KRN",101,3799,99)
57005,55153
"KRN",101,3802,-1)
0^211
"KRN",101,3802,0)
TIUFH ACTION MENU MGR^Edit Document Definitions^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3802,1,0)
^^1^1^2970220^^^
"KRN",101,3802,1,1,0)
Protocol Menu for List Manager Template TIUFH EDIT DDEFS MGR
"KRN",101,3802,4)
26
"KRN",101,3802,10,0)
^101.01PA^49^48
"KRN",101,3802,10,5,0)
3554^^11^^^
"KRN",101,3802,10,5,"^")
TIUFH ACTION EXPAND/COLLAPSE ENTRY
"KRN",101,3802,10,7,0)
3644^^32^
"KRN",101,3802,10,7,"^")
TIUFHA ACTION DELETE
"KRN",101,3802,10,31,0)
3799^^12^
"KRN",101,3802,10,31,"^")
TIUFH ACTION JUMP TO DDEF
"KRN",101,3802,10,42,0)
4094^^21^^^
"KRN",101,3802,10,42,"^")
TIUFHA ACTION EDIT/VIEW
"KRN",101,3802,10,43,0)
3798^^33^
"KRN",101,3802,10,43,"^")
TIUFHA ACTION COPY
"KRN",101,3802,10,44,0)
4098^^22^^^
"KRN",101,3802,10,44,"^")
TIUFHA ACTION EDIT STATUS
"KRN",101,3802,10,46,0)
4127^^23^^^
"KRN",101,3802,10,46,"^")
TIUFHA ACTION EDIT NAME/OWNER/PNAME
"KRN",101,3802,10,47,0)
3598^^31^^^
"KRN",101,3802,10,47,"^")
TIUFH EDIT ITEMS
"KRN",101,3802,10,49,0)
4701^^13^
"KRN",101,3802,10,49,"^")
TIUFHA ACTION BOILERPLATE TEXT
"KRN",101,3802,15)

"KRN",101,3802,20)

"KRN",101,3802,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^",1),24)) ^(24)
"KRN",101,3802,26)
S VALMSG=$$VMSG^TIUFL D SHOW^VALM
"KRN",101,3802,28)
Select Action: 
"KRN",101,3802,99)
57146,33879
"KRN",101,3819,-1)
0^133
"KRN",101,3819,0)
TIUF CHANGE SORT MENU^Change Sort Menu^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3819,1,0)
^^1^1^2970220^^
"KRN",101,3819,1,1,0)
Changes what Document Definitions appear on list.
"KRN",101,3819,4)
26
"KRN",101,3819,10,0)
^101.01PA^3^3
"KRN",101,3819,10,1,0)
3788^S^1^^^
"KRN",101,3819,10,1,"^")
TIUF CHANGE START WITH/GO TO
"KRN",101,3819,10,2,0)
3790^V^2^^^
"KRN",101,3819,10,2,"^")
TIUF CHANGE SORT ATTR VALUE
"KRN",101,3819,10,3,0)
3789^A^3^^^
"KRN",101,3819,10,3,"^")
TIUF CHANGE SORT ATTRIBUTE
"KRN",101,3819,15)
D:(Y'=-1)&$D(TIUFAVAL) SELSTART^TIUFLA
"KRN",101,3819,20)
S XQORM(0)="1A\",XQORM("??")="D MENU^TIUFXHL1"
"KRN",101,3819,26)
W ""
"KRN",101,3819,28)
Change: (S/A/V): 
"KRN",101,3819,99)
57133,44219
"KRN",101,3825,-1)
0^154
"KRN",101,3825,0)
TIUF OWNER NONE^NOT Owned^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3825,20)
S TIUFAVAL="0^NONE"
"KRN",101,3825,99)
56818,38587
"KRN",101,3905,-1)
0^199
"KRN",101,3905,0)
TIUFD ACTION MENU CLIN^Detailed Display^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3905,1,0)
^^1^1^2970220^^^
"KRN",101,3905,1,1,0)
Menu of Clinician Edit Actions.
"KRN",101,3905,4)
26
"KRN",101,3905,10,0)
^101.01PA^13^13
"KRN",101,3905,10,1,0)
4085^^11^
"KRN",101,3905,10,1,"^")
TIUFD EDIT BASICS
"KRN",101,3905,10,2,0)
3598^^12^
"KRN",101,3905,10,2,"^")
TIUFH EDIT ITEMS
"KRN",101,3905,10,3,0)
4090^^21^
"KRN",101,3905,10,3,"^")
TIUFD EDIT BOILERPLATE TEXT
"KRN",101,3905,10,11,0)
4105^^31^
"KRN",101,3905,10,11,"^")
TIUF FIND
"KRN",101,3905,10,12,0)
3507^^32^
"KRN",101,3905,10,12,"^")
TIU ACTION QUIT
"KRN",101,3905,10,13,0)
3755^^22^
"KRN",101,3905,10,13,"^")
TIUF ACTION TRY
"KRN",101,3905,15)

"KRN",101,3905,20)

"KRN",101,3905,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^",1),24)) ^(24)
"KRN",101,3905,26)
S VALMSG=$$VMSG^TIUFL D SHOW^VALM
"KRN",101,3905,28)
Select Action: 
"KRN",101,3905,99)
57120,48396
"KRN",101,3907,-1)
0^200
"KRN",101,3907,0)
TIUFD ACTION MENU MGR^Detailed Display^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3907,1,0)
^^17^17^2970220^
"KRN",101,3907,1,1,0)
Menu of Manager Edit Actions.
"KRN",101,3907,1,2,0)
 
"KRN",101,3907,1,3,0)
NOTE ON DISPLAY OF HERITABLE FIELDS:
"KRN",101,3907,1,4,0)
 
"KRN",101,3907,1,5,0)
(Most Technical fields are heritable, and Basic field Suppress Visit
"KRN",101,3907,1,6,0)
Selection is heritable.  Upload fields are heritable as a group.  The
"KRN",101,3907,1,7,0)
display does not show inheritance for Upload fields.)
"KRN",101,3907,1,8,0)
 
"KRN",101,3907,1,9,0)
The Document Definition Detailed Display action displays the EFFECTIVE
"KRN",101,3907,1,10,0)
value of inherited fields.  If an inherited field does not have its own
"KRN",101,3907,1,11,0)
explicit value, its effective value is its inherited value.  If it does
"KRN",101,3907,1,12,0)
not have an inherited value, its effective value is the default value for
"KRN",101,3907,1,13,0)
the field. If the field does not have a default value, it does not have an
"KRN",101,3907,1,14,0)
effective value and the field display is blank.  Values marked with * have
"KRN",101,3907,1,15,0)
been inherited.
"KRN",101,3907,1,16,0)
 
"KRN",101,3907,1,17,0)
For EDITING heritable fields, see Technical field Edit Template.
"KRN",101,3907,4)
26
"KRN",101,3907,10,0)
^101.01PA^16^15
"KRN",101,3907,10,1,0)
4085^^11^^^
"KRN",101,3907,10,1,"^")
TIUFD EDIT BASICS
"KRN",101,3907,10,2,0)
3598^^12^^^
"KRN",101,3907,10,2,"^")
TIUFH EDIT ITEMS
"KRN",101,3907,10,3,0)
4090^^13^^^
"KRN",101,3907,10,3,"^")
TIUFD EDIT BOILERPLATE TEXT
"KRN",101,3907,10,7,0)
4092^^22^^^
"KRN",101,3907,10,7,"^")
TIUFD EDIT UPLOAD MGR
"KRN",101,3907,10,9,0)
4091^^21^^^
"KRN",101,3907,10,9,"^")
TIUFD EDIT TECHNICAL FIELDS
"KRN",101,3907,10,12,0)
4105^^31^^^
"KRN",101,3907,10,12,"^")
TIUF FIND
"KRN",101,3907,10,13,0)
3507^^32^^^
"KRN",101,3907,10,13,"^")
TIU ACTION QUIT
"KRN",101,3907,10,15,0)
3607^^33^
"KRN",101,3907,10,15,"^")
TIU ACTION BLANK2
"KRN",101,3907,10,16,0)
3755^^23^^^
"KRN",101,3907,10,16,"^")
TIUF ACTION TRY
"KRN",101,3907,15)

"KRN",101,3907,20)

"KRN",101,3907,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^",1),24)) ^(24)
"KRN",101,3907,26)
S VALMSG=$$VMSG^TIUFL D SHOW^VALM
"KRN",101,3907,28)
Select Action: 
"KRN",101,3907,99)
57126,30956
"KRN",101,3908,-1)
0^202
"KRN",101,3908,0)
TIUFD ACTION MENU VIEW^Detailed Display^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3908,1,0)
^^1^1^2970220^^^
"KRN",101,3908,1,1,0)
Menu of View Actions
"KRN",101,3908,4)
26
"KRN",101,3908,10,0)
^101.01PA^5^5
"KRN",101,3908,10,3,0)
4105^^21^
"KRN",101,3908,10,3,"^")
TIUF FIND
"KRN",101,3908,10,4,0)
3507^^31^
"KRN",101,3908,10,4,"^")
TIU ACTION QUIT
"KRN",101,3908,10,5,0)
3755^^11^
"KRN",101,3908,10,5,"^")
TIUF ACTION TRY
"KRN",101,3908,15)

"KRN",101,3908,20)

"KRN",101,3908,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^",1),24)) ^(24)
"KRN",101,3908,26)
S VALMSG=$$VMSG^TIUFL D SHOW^VALM
"KRN",101,3908,28)
Select Action: 
"KRN",101,3908,99)
57120,48470
"KRN",101,3910,-1)
0^52
"KRN",101,3910,0)
TIU ACTION RESOLVE FILING ERRORS^Display/Fix^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3910,1,0)
^^2^2^2930614^
"KRN",101,3910,1,1,0)
 
"KRN",101,3910,1,2,0)
Allows editing of the buffered text to resolve upload errors.
"KRN",101,3910,20)
D EDIT^TIURE
"KRN",101,3910,99)
57061,57324
"KRN",101,3981,-1)
0^87
"KRN",101,3981,0)
TIU ERROR RESOLUTION MENU^Resolve filing errors^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3981,1,0)
^^1^1^2950628^^^^
"KRN",101,3981,1,1,0)
Menu of actions which may be executed by clinicians.
"KRN",101,3981,4)
26
"KRN",101,3981,10,0)
^101.01PA^6^6
"KRN",101,3981,10,3,0)
3982^^2^
"KRN",101,3981,10,3,"^")
TIU ERROR ACTION PRINT
"KRN",101,3981,10,4,0)
3507^^5^
"KRN",101,3981,10,4,"^")
TIU ACTION QUIT
"KRN",101,3981,10,5,0)
3529^^1^
"KRN",101,3981,10,5,"^")
TIU BROWSE ACTION SEARCH
"KRN",101,3981,10,6,0)
3983^^3^
"KRN",101,3981,10,6,"^")
TIU ERROR ACTION RESOLVE
"KRN",101,3981,15)
S:$D(DIROUT) TIUQUIT=1
"KRN",101,3981,20)
S XQORM("SH")=0
"KRN",101,3981,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,3981,26)
S VALMSG="+ Next Screen  - Prev Screen  ?? More actions" D RESIZE^TIULM(21,18),SHOW^VALM
"KRN",101,3981,28)
Select Action: 
"KRN",101,3981,99)
57121,60279
"KRN",101,3982,-1)
0^85
"KRN",101,3982,0)
TIU ERROR ACTION PRINT^Print^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3982,1,0)
^^2^2^2950628^^
"KRN",101,3982,1,1,0)
This action allws the user to print the entire list of
"KRN",101,3982,1,2,0)
entries currently being displayed.
"KRN",101,3982,20)
D PRTL^VALM1
"KRN",101,3982,99)
57061,57324
"KRN",101,3983,-1)
0^86
"KRN",101,3983,0)
TIU ERROR ACTION RESOLVE^Resolve^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,3983,1,0)
^^1^1^2970613^^
"KRN",101,3983,1,1,0)
Resolve the selected filing errors.
"KRN",101,3983,20)
S BUFDA=$P(TIUDATA,U,3) D EDIT1^TIURE
"KRN",101,3983,99)
57061,57324
"KRN",101,4042,-1)
0^220
"KRN",101,4042,0)
TIUFT ACTION MENU ADD/EDIT/VIEW ITEMS^Items^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4042,1,0)
^^4^4^2970220^^^^
"KRN",101,4042,1,1,0)
Menu allows user to display items and item information for a given
"KRN",101,4042,1,2,0)
Document Definition.  Document Definition owner may add, delete, or edit
"KRN",101,4042,1,3,0)
items.  Added items may be new OR existing entries in the Document
"KRN",101,4042,1,4,0)
Definition File.
"KRN",101,4042,4)
26
"KRN",101,4042,10,0)
^101.01PA^25^25
"KRN",101,4042,10,5,0)
4044^^22^
"KRN",101,4042,10,5,"^")
TIUFT ACTION ADD ITEMS
"KRN",101,4042,10,6,0)
4045^^23^
"KRN",101,4042,10,6,"^")
TIUFT ACTION DELETE ITEMS
"KRN",101,4042,10,17,0)
4048^^11^^^
"KRN",101,4042,10,17,"^")
TIUFT ACTION EDIT SEQUENCE
"KRN",101,4042,10,18,0)
4086^^13^^^
"KRN",101,4042,10,18,"^")
TIUFT ACTION EDIT MENU TEXT
"KRN",101,4042,10,19,0)
4047^^12^^^
"KRN",101,4042,10,19,"^")
TIUFT ACTION EDIT MNEMONIC
"KRN",101,4042,10,21,0)
4046^^21^^^
"KRN",101,4042,10,21,"^")
TIUFT ACTION ITEMS EDIT ALL
"KRN",101,4042,10,24,0)
4105^^32^^^
"KRN",101,4042,10,24,"^")
TIUF FIND
"KRN",101,4042,10,25,0)
3507^^33^^^
"KRN",101,4042,10,25,"^")
TIU ACTION QUIT
"KRN",101,4042,15)

"KRN",101,4042,20)

"KRN",101,4042,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^",1),24)) ^(24)
"KRN",101,4042,26)
S VALMSG=$$VMSG^TIUFL D:"NM"'[TIUFWHO CHGCAP^VALM("IFN","") D SHOW^VALM
"KRN",101,4042,28)
Select Action: 
"KRN",101,4042,99)
57126,43089
"KRN",101,4044,-1)
0^240
"KRN",101,4044,0)
TIUFT ACTION ADD ITEMS^Add/Create^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4044,1,0)
^^12^12^2970220^
"KRN",101,4044,1,1,0)
MANAGER OPTIONS
"KRN",101,4044,1,2,0)
Allows user to add items to parent entry. Items may be new file entries OR
"KRN",101,4044,1,3,0)
preexisting file entries.  Preexisting file entries can be added ONLY if
"KRN",101,4044,1,4,0)
they have the appropriate type for the parent, if the user owns them, AND
"KRN",101,4044,1,5,0)
if they are not already used as an item under (the current or) another
"KRN",101,4044,1,6,0)
entry.  Exception: Shared Components can be added as items to Titles or to
"KRN",101,4044,1,7,0)
Components regardless of owner and regardless of use elsewhere.
"KRN",101,4044,1,8,0)
 
"KRN",101,4044,1,9,0)
User need not own an entry in order to add items to it.  User cannot add
"KRN",101,4044,1,10,0)
items to National Titles or Components.  Entries cannot have 2 items with
"KRN",101,4044,1,11,0)
the same name.  File 8925.1 cannot have 2 entries of the same type with
"KRN",101,4044,1,12,0)
the same name.
"KRN",101,4044,15)

"KRN",101,4044,20)
D ADD^TIUFT
"KRN",101,4044,99)
57028,35599
"KRN",101,4045,-1)
0^241
"KRN",101,4045,0)
TIUFT ACTION DELETE ITEMS^Delete^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4045,1,0)
^^10^10^2970220^^
"KRN",101,4045,1,1,0)
MANAGER OPTIONS
"KRN",101,4045,1,2,0)
Action lets user delete multiple appropriate items from the parent entry.
"KRN",101,4045,1,3,0)
Deleted items are deleted from the parent only, not from file 8925.1. 
"KRN",101,4045,1,4,0)
 
"KRN",101,4045,1,5,0)
Item must be Inactive before it can be deleted.  Noncomponent Items cannot
"KRN",101,4045,1,6,0)
be deleted if they are In Use. National items cannot be deleted from
"KRN",101,4045,1,7,0)
National parents.  Items cannot be deleted from National Titles or
"KRN",101,4045,1,8,0)
Components. Shared Components are the only National entries permitted as
"KRN",101,4045,1,9,0)
items under nonNational parents, and CAN be deleted from NONNATIONAL
"KRN",101,4045,1,10,0)
parents.
"KRN",101,4045,20)
D EDDEL^TIUFT1
"KRN",101,4045,99)
57028,35615
"KRN",101,4046,-1)
0^245
"KRN",101,4046,0)
TIUFT ACTION ITEMS EDIT ALL^All: Seq Mnem MenuTxt^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4046,1,0)
^^1^1^2970220^^^^
"KRN",101,4046,1,1,0)
User can edit Sequence, Mnemonic and Menu Text for selected Items.
"KRN",101,4046,4)

"KRN",101,4046,20)
D EDDEL^TIUFT1
"KRN",101,4046,99)
57041,41778
"KRN",101,4047,-1)
0^243
"KRN",101,4047,0)
TIUFT ACTION EDIT MNEMONIC^Mnemonic^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4047,1,0)
^^4^4^2970220^
"KRN",101,4047,1,1,0)
Applies to Classes, Document Classes.  Mnemonic is a convenient handle for
"KRN",101,4047,1,2,0)
selecting Menu Text from a 3-column menu. Mnemonic is usually a number
"KRN",101,4047,1,3,0)
with the same value as the Sequence.  Alpha mnemonics are also permitted.
"KRN",101,4047,1,4,0)
1-4 characters.
"KRN",101,4047,20)
D EDDEL^TIUFT1
"KRN",101,4047,24)
I $P(TIUFNOD0,U,4)="CL"
"KRN",101,4047,99)
57028,35640
"KRN",101,4048,-1)
0^244
"KRN",101,4048,0)
TIUFT ACTION EDIT SEQUENCE^Sequence^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4048,1,0)
^^4^4^2970220^^^
"KRN",101,4048,1,1,0)
Sequence, if entered, determines item order.  Order is alphabetic by
"KRN",101,4048,1,2,0)
Menu Text if item has no sequence.  Entry owner may edit sequence for
"KRN",101,4048,1,3,0)
selected items.  Sequence is a number between .01 and 999, 2 decimal
"KRN",101,4048,1,4,0)
places allowed.
"KRN",101,4048,20)
D EDDEL^TIUFT1
"KRN",101,4048,99)
57028,35654
"KRN",101,4050,-1)
0^221
"KRN",101,4050,0)
TIUFT ACTION MENU EDIT/VIEW ITEMS^Items^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4050,1,0)
^^4^4^2970220^^^
"KRN",101,4050,1,1,0)
Menu allows user to display items and item information for a given
"KRN",101,4050,1,2,0)
Document Definition.  Document Definition owner may add items if items
"KRN",101,4050,1,3,0)
already exist as entries in the Document Definition file.  Owner may
"KRN",101,4050,1,4,0)
delete, or edit items.
"KRN",101,4050,4)
26
"KRN",101,4050,10,0)
^101.01PA^27^27
"KRN",101,4050,10,17,0)
4048^^11^
"KRN",101,4050,10,17,"^")
TIUFT ACTION EDIT SEQUENCE
"KRN",101,4050,10,18,0)
4086^^21^
"KRN",101,4050,10,18,"^")
TIUFT ACTION EDIT MENU TEXT
"KRN",101,4050,10,19,0)
4047^^12^
"KRN",101,4050,10,19,"^")
TIUFT ACTION EDIT MNEMONIC
"KRN",101,4050,10,21,0)
4046^^22^
"KRN",101,4050,10,21,"^")
TIUFT ACTION ITEMS EDIT ALL
"KRN",101,4050,10,26,0)
4105^^31^
"KRN",101,4050,10,26,"^")
TIUF FIND
"KRN",101,4050,10,27,0)
3507^^32^
"KRN",101,4050,10,27,"^")
TIU ACTION QUIT
"KRN",101,4050,15)

"KRN",101,4050,20)

"KRN",101,4050,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^",1),24)) ^(24)
"KRN",101,4050,26)
S VALMSG=$$VMSG^TIUFL D:"NM"'[TIUFWHO CHGCAP^VALM("IFN","") D SHOW^VALM
"KRN",101,4050,28)
Select Action: 
"KRN",101,4050,99)
57120,48915
"KRN",101,4051,-1)
0^222
"KRN",101,4051,0)
TIUFT ACTION MENU VIEW ITEMS^Items^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4051,1,0)
^^2^2^2970220^^^^
"KRN",101,4051,1,1,0)
Menu allows user to display items and item information for a given
"KRN",101,4051,1,2,0)
Document Definition.
"KRN",101,4051,4)
26
"KRN",101,4051,10,0)
^101.01PA^7^6
"KRN",101,4051,10,4,0)
4105^^11^
"KRN",101,4051,10,4,"^")
TIUF FIND
"KRN",101,4051,10,6,0)
3507^^21^
"KRN",101,4051,10,6,"^")
TIU ACTION QUIT
"KRN",101,4051,10,7,0)
3606^^31^
"KRN",101,4051,10,7,"^")
TIU ACTION BLANK1
"KRN",101,4051,15)

"KRN",101,4051,20)

"KRN",101,4051,26)
S VALMSG=$$VMSG^TIUFL D:"NM"'[TIUFWHO CHGCAP^VALM("IFN","") D SHOW^VALM
"KRN",101,4051,28)
Select Action: 
"KRN",101,4051,99)
57061,57315
"KRN",101,4054,-1)
0^24
"KRN",101,4054,0)
TIU ACTION MAKE ADDENDUM^Make Addendum^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4054,1,0)
^^4^4^2951213^^^^
"KRN",101,4054,1,1,0)
Allows authorized users to add addenda to selected documents online...
"KRN",101,4054,1,2,0)
When electronic signature is enabled, physicians will be prompted for
"KRN",101,4054,1,3,0)
their signatures upon exit, thereby allowing doctors to review, edit
"KRN",101,4054,1,4,0)
and sign as a one-step process.
"KRN",101,4054,20)
D ADDEND^TIURA1
"KRN",101,4054,99)
57061,57324
"KRN",101,4055,-1)
0^68
"KRN",101,4055,0)
TIU BROWSE ACTION MAKE ADDENDUM^Make Addendum^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4055,1,0)
^^4^4^2951213^^^^
"KRN",101,4055,1,1,0)
Allows authorized users to add an addendum to the current document online...
"KRN",101,4055,1,2,0)
When electronic signature is enabled, physicians will be prompted for their
"KRN",101,4055,1,3,0)
signatures upon exit, thereby allowing doctors to review, edit and sign as
"KRN",101,4055,1,4,0)
a one-step process. 
"KRN",101,4055,20)
D CLEAR^VALM1,ADDEND1^TIURA1,BLDTMP^TIUBR(TIUDA) S VALMBCK="R"
"KRN",101,4055,99)
57061,57324
"KRN",101,4056,-1)
0^27
"KRN",101,4056,0)
TIU ACTION MENU EDIT ADDENDUM^Edit Addendum^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4056,1,0)
^^1^1^2951214^^
"KRN",101,4056,1,1,0)
Menu of actions which may be executed by MIS Personnel.
"KRN",101,4056,4)
26
"KRN",101,4056,10,0)
^101.01PA^8^6
"KRN",101,4056,10,3,0)
3527^^3^
"KRN",101,4056,10,3,"^")
TIU BROWSE ACTION PRINT
"KRN",101,4056,10,4,0)
3507^^6^
"KRN",101,4056,10,4,"^")
TIU ACTION QUIT
"KRN",101,4056,10,5,0)
3529^^1^
"KRN",101,4056,10,5,"^")
TIU BROWSE ACTION SEARCH
"KRN",101,4056,10,8,0)
4057^^5^
"KRN",101,4056,10,8,"^")
TIU BROWSE ACTION EDIT ADDENDUM
"KRN",101,4056,15)
S:$D(DIROUT) TIUQUIT=1
"KRN",101,4056,20)
S VALMSG="+ Next Screen  - Prev Screen  ?? More Actions"
"KRN",101,4056,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,4056,26)
D RESIZE^TIULM(21,18),SHOW^VALM S XQORM("B")=$S(VALMLST<VALMCNT:"Next Screen",1:"Edit")
"KRN",101,4056,28)
Select Action: 
"KRN",101,4056,99)
57106,60713
"KRN",101,4057,-1)
0^67
"KRN",101,4057,0)
TIU BROWSE ACTION EDIT ADDENDUM^Edit^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4057,1,0)
^^4^4^2951214^^^^
"KRN",101,4057,1,1,0)
Allows authorized users to edit current addendum online...When electronic
"KRN",101,4057,1,2,0)
signature is enabled, physicians will be prompted for their signatures upon
"KRN",101,4057,1,3,0)
exit, thereby allowing doctors to review, edit and sign as a one-step
"KRN",101,4057,1,4,0)
process. 
"KRN",101,4057,20)
D CLEAR^VALM1,EDADD^TIUADD,BLDTMP^TIUBR(TIUDA) S VALMBCK="R"
"KRN",101,4057,99)
57061,57325
"KRN",101,4081,-1)
0^28
"KRN",101,4081,0)
TIU ACTION MENU ERRORS^Act on Filing Errors^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4081,1,0)
^^2^2^2930614^
"KRN",101,4081,1,1,0)
Menu of actions which may be executed to resolve error generated by the
"KRN",101,4081,1,2,0)
upload filer/router.
"KRN",101,4081,4)
26
"KRN",101,4081,10,0)
^101.01PA^3^3
"KRN",101,4081,10,1,0)
3504^+^1^
"KRN",101,4081,10,1,"^")
TIU ACTION NEXT SCREEN
"KRN",101,4081,10,2,0)
3510^LS^4^
"KRN",101,4081,10,2,"^")
TIU ACTION BOTTOM
"KRN",101,4081,10,3,0)
3514^CV^8^
"KRN",101,4081,10,3,"^")
TIU ACTION CHANGE VIEW ERROR SCREEN
"KRN",101,4081,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,4081,26)
D SHOW^VALM
"KRN",101,4081,28)
Select Action:
"KRN",101,4081,99)
57061,57325
"KRN",101,4082,-1)
0^47
"KRN",101,4082,0)
TIU ACTION PRINT ERROR^Print error^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4082,1,0)
^^5^5^2930614^
"KRN",101,4082,1,1,0)
Allows users to print the contents of the buffer record associated with an
"KRN",101,4082,1,2,0)
UNRESOLVED filing error.  This may facilitate resolution, if the hardcopy
"KRN",101,4082,1,3,0)
is used to identify the source of the error (missing or erroneous values
"KRN",101,4082,1,4,0)
in the header field(s) of a record, etc.), and "pencil-in" the corrected
"KRN",101,4082,1,5,0)
values.
"KRN",101,4082,20)
D PRINT^TIURE
"KRN",101,4082,99)
57061,57325
"KRN",101,4083,-1)
0^16
"KRN",101,4083,0)
TIU ACTION CHANGE VIEW TITLE^Change View^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4083,1,0)
^^2^2^2921125^
"KRN",101,4083,1,1,0)
Allows users to modify the list of reports by signature status, review
"KRN",101,4083,1,2,0)
screen and dictation date range without exiting the review screen.
"KRN",101,4083,20)
K TIUQUIK D FULL^VALM1,MAKELIST^TIURTITL($S(+$G(^TMP("TIUR",$J,"CLASS")):+$G(^TMP("TIUR",$J,"CLASS")),1:38)) S VALMBCK="R",VALMBG=1
"KRN",101,4083,99)
57061,57325
"KRN",101,4084,-1)
0^41
"KRN",101,4084,0)
TIU ACTION MENU TITLE REVIEW^Act on Documents^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4084,1,0)
^^1^1^2951213^^^^
"KRN",101,4084,1,1,0)
Menu of actions which may be executed by clinicians.
"KRN",101,4084,4)
26
"KRN",101,4084,10,0)
^101.01PA^16^16
"KRN",101,4084,10,1,0)
3500^^5^
"KRN",101,4084,10,1,"^")
TIU ACTION EDIT
"KRN",101,4084,10,2,0)
3501^^13^
"KRN",101,4084,10,2,"^")
TIU ACTION PRINT
"KRN",101,4084,10,3,0)
3502^^8^
"KRN",101,4084,10,3,"^")
TIU ACTION SIGN/COSIGN
"KRN",101,4084,10,4,0)
3503^^9^
"KRN",101,4084,10,4,"^")
TIU ACTION DETAILED DISPLAY
"KRN",101,4084,10,7,0)
3506^^11^
"KRN",101,4084,10,7,"^")
TIU ACTION BROWSE FOR CLINICIAN
"KRN",101,4084,10,8,0)
3507^^17^
"KRN",101,4084,10,8,"^")
TIU ACTION QUIT
"KRN",101,4084,10,9,0)
4083^^15^
"KRN",101,4084,10,9,"^")
TIU ACTION CHANGE VIEW TITLE
"KRN",101,4084,10,12,0)
4683^^1^
"KRN",101,4084,10,12,"^")
TIU ACTION SEARCH LIST
"KRN",101,4084,10,13,0)
3599^^3^
"KRN",101,4084,10,13,"^")
TIU ACTION ADD DOCUMENT
"KRN",101,4084,10,14,0)
3602^^7^
"KRN",101,4084,10,14,"^")
TIU ACTION MENU LINK
"KRN",101,4084,10,15,0)
3745^^16^
"KRN",101,4084,10,15,"^")
TIU ACTION COPY
"KRN",101,4084,10,16,0)
4054^^6^
"KRN",101,4084,10,16,"^")
TIU ACTION MAKE ADDENDUM
"KRN",101,4084,20)
S XQORM("SH")=0 S:$G(VALMSG)'["*" VALMSG="+ Next Screen  - Prev Screen  ?? More Actions",VALM("MAX")=+$G(VALMCNT)
"KRN",101,4084,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,4084,26)
S XQORM("#")=$G(^TMP("TIUR",$J,"#")) D RESIZE^TIULM(21,18),SHOW^VALM K XQORM("XLATE","FIND")
"KRN",101,4084,28)
Select Action: 
"KRN",101,4084,99)
57118,64454
"KRN",101,4085,-1)
0^203
"KRN",101,4085,0)
TIUFD EDIT BASICS^Basics^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4085,1,0)
^^14^14^2970220^
"KRN",101,4085,1,1,0)
User can edit basic information for the Document Definition entry.  Status
"KRN",101,4085,1,2,0)
must be Inactive in order to edit most basic attributes.  Enter ??? to see
"KRN",101,4085,1,3,0)
Status.
"KRN",101,4085,1,4,0)
 
"KRN",101,4085,1,5,0)
CLINICIAN OPTIONS:
"KRN",101,4085,1,6,0)
Clinicians (persons with Clinician menu) must own an entry in order to
"KRN",101,4085,1,7,0)
edit it.  They can edit Abbreviation, Print Name, Owner, and Status of
"KRN",101,4085,1,8,0)
entries they own.
"KRN",101,4085,1,9,0)
 
"KRN",101,4085,1,10,0)
MANAGER OPTIONS:
"KRN",101,4085,1,11,0)
Managers (persons with Manager menu) need not own an entry in order to
"KRN",101,4085,1,12,0)
edit it.  They can edit Name, Abbreviation, Print Name, Type (if not In
"KRN",101,4085,1,13,0)
Use), Owner, Shared (for Components), Suppress Visit Selection, and
"KRN",101,4085,1,14,0)
Status.
"KRN",101,4085,20)
D EDBASICS^TIUFD2
"KRN",101,4085,24)
I TIUFWHO="N"!('$P(TIUFNOD0,U,13))
"KRN",101,4085,26)

"KRN",101,4085,99)
57028,35149
"KRN",101,4086,-1)
0^242
"KRN",101,4086,0)
TIUFT ACTION EDIT MENU TEXT^Menu Text^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4086,1,0)
^^10^10^2970220^
"KRN",101,4086,1,1,0)
Menu Text is the short name users will see for Classes and Document
"KRN",101,4086,1,2,0)
Classes when selecting them from a 3-column menu. Such menus occur when
"KRN",101,4086,1,3,0)
viewing documents across many patients or when viewing many types of
"KRN",101,4086,1,4,0)
documents together (e.g. Progress Notes at the same time as Discharge
"KRN",101,4086,1,5,0)
Summaries).  
"KRN",101,4086,1,6,0)
 
"KRN",101,4086,1,7,0)
User can edit Menu Text for selected items.  Menu Text may affect item
"KRN",101,4086,1,8,0)
order since order is alphabetic by Menu Text if item has no sequence. To
"KRN",101,4086,1,9,0)
edit NAME (rather than Menu Text), go back to previous screen.  Menu Text
"KRN",101,4086,1,10,0)
permits up to 20 characters.
"KRN",101,4086,20)
D EDDEL^TIUFT1
"KRN",101,4086,99)
57028,35630
"KRN",101,4087,-1)
0^170
"KRN",101,4087,0)
TIUF SORT BY USED BY DOCMTS^In Use^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4087,4)
26
"KRN",101,4087,10,0)
^101.01PA^3^2
"KRN",101,4087,10,1,0)
4088^YES^1^
"KRN",101,4087,10,1,"^")
TIUF USED BY DOCMTS YES
"KRN",101,4087,10,3,0)
4089^NO^2^
"KRN",101,4087,10,3,"^")
TIUF USED BY DOCMTS NO
"KRN",101,4087,15)

"KRN",101,4087,20)
S XQORM(0)="1A\",TIUFATTR="U^WAY USED",XQORM("??")="D USED^TIUFXHL1"
"KRN",101,4087,21,0)
^101.021A^^0
"KRN",101,4087,24)

"KRN",101,4087,26)
W ""
"KRN",101,4087,28)
Select In Use Value:  (YES/NO): 
"KRN",101,4087,99)
57120,50725
"KRN",101,4088,-1)
0^186
"KRN",101,4088,0)
TIUF USED BY DOCMTS YES^In Use^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4088,20)
S TIUFAVAL="YES"
"KRN",101,4088,99)
56818,38589
"KRN",101,4089,-1)
0^185
"KRN",101,4089,0)
TIUF USED BY DOCMTS NO^NOT In Use^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4089,20)
S TIUFAVAL="NO"
"KRN",101,4089,99)
56818,38589
"KRN",101,4090,-1)
0^204
"KRN",101,4090,0)
TIUFD EDIT BOILERPLATE TEXT^Boilerplate Text^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4090,1,0)
^^16^16^2970226^
"KRN",101,4090,1,1,0)
Boilerplate Text is the optional text a Document Definition may be given.
"KRN",101,4090,1,2,0)
It is displayed as the default, editable text of a TIU document when a TIU
"KRN",101,4090,1,3,0)
document is entered.
"KRN",101,4090,1,4,0)
 
"KRN",101,4090,1,5,0)
Only Document Definitions of Type Title or Component may have Boilerplate
"KRN",101,4090,1,6,0)
Text.  Only Inactive entries can be edited.  Enter '???' for more
"KRN",101,4090,1,7,0)
information on Boilerplate Text.
"KRN",101,4090,1,8,0)
 
"KRN",101,4090,1,9,0)
CLINICIAN OPTIONS
"KRN",101,4090,1,10,0)
Clinicians (persons with Clinician menu) must own the entry in order to
"KRN",101,4090,1,11,0)
edit its boilerplate text.
"KRN",101,4090,1,12,0)
 
"KRN",101,4090,1,13,0)
MANAGER OPTIONS
"KRN",101,4090,1,14,0)
Managers (persons with Manager menu) can edit the boilerplate text of
"KRN",101,4090,1,15,0)
entries regardless of Ownership. Exception:  only the Owner can edit a
"KRN",101,4090,1,16,0)
Shared Component.  Managers cannot edit National entries.
"KRN",101,4090,20)
D EDBOILTX^TIUFD3
"KRN",101,4090,24)
I (($P(TIUFNOD0,U,4)="DOC")!($P(TIUFNOD0,U,4)="CO"))&((TIUFWHO="N")!('$P(TIUFNOD0,U,13)))
"KRN",101,4090,99)
57028,35162
"KRN",101,4091,-1)
0^205
"KRN",101,4091,0)
TIUFD EDIT TECHNICAL FIELDS^Technical Fields^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4091,1,0)
^^9^9^2970220^^^
"KRN",101,4091,1,1,0)
MANAGER OPTIONS
"KRN",101,4091,1,2,0)
Technical fields are mainly M code (which requires Programmer access),
"KRN",101,4091,1,3,0)
although some are just very technical, requiring detailed knowledge of the
"KRN",101,4091,1,4,0)
utility.  Many Technical Fields can be inherited from ancestor entries.
"KRN",101,4091,1,5,0)
 
"KRN",101,4091,1,6,0)
There is one technical field for Objects: Object Method.  For nonObjects,
"KRN",101,4091,1,7,0)
Technical fields include: Entry Action, Exit Action, Edit Template, Print
"KRN",101,4091,1,8,0)
Method, Print Form Header, Print Form Number, Print Group, Visit Linkage
"KRN",101,4091,1,9,0)
Method, Validation Method, and Allow Custom Form Headers.
"KRN",101,4091,2,0)
^101.02A^^0
"KRN",101,4091,4)

"KRN",101,4091,10,0)
^101.01PA^^0
"KRN",101,4091,20)
D EDTECH^TIUFD4
"KRN",101,4091,24)
I TIUFWHO="N"!('$P(TIUFNOD0,U,13))&(($P(TIUFNOD0,U,4)="CL")!($P(TIUFNOD0,U,4)="DC")!($P(TIUFNOD0,U,4)="DOC")!($P(TIUFNOD0,U,4)="O"))
"KRN",101,4091,26)

"KRN",101,4091,28)

"KRN",101,4091,29)
ent
"KRN",101,4091,99)
57028,35180
"KRN",101,4092,-1)
0^236
"KRN",101,4092,0)
TIUFD EDIT UPLOAD MGR^Upload^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4092,1,0)
^^16^16^2970220^
"KRN",101,4092,1,1,0)
MANAGER OPTIONS
"KRN",101,4092,1,2,0)
TIU permits documents to be dictated and then uploaded into TIU or into
"KRN",101,4092,1,3,0)
other files.  Upload information can be set by this action for Document
"KRN",101,4092,1,4,0)
Definition Classes, Document Classes, or Titles, and is heritable.
"KRN",101,4092,1,5,0)
 
"KRN",101,4092,1,6,0)
Although upload information is heritable, it is NOT displayed by the
"KRN",101,4092,1,7,0)
Document Definition Utility when it is inherited rather than belonging to
"KRN",101,4092,1,8,0)
the entry itself.  To edit/view existing upload information, select
"KRN",101,4092,1,9,0)
action Detailed Display for the entry where such information is set rather
"KRN",101,4092,1,10,0)
than lower entries.  Do NOT set partial information at a lower level; if
"KRN",101,4092,1,11,0)
information is set at all at a lower level, it must be complete at that
"KRN",101,4092,1,12,0)
level.
"KRN",101,4092,1,13,0)
 
"KRN",101,4092,1,14,0)
Upload information includes basic characteristics such as the file/field
"KRN",101,4092,1,15,0)
which will store the text of the document, as well as header information
"KRN",101,4092,1,16,0)
for each fixed-field to be uploaded.
"KRN",101,4092,20)
D EDUPLOAD^TIUFD4
"KRN",101,4092,24)
I $P(TIUFNOD0,U,4)="CL"!($P(TIUFNOD0,U,4)="DC")!($P(TIUFNOD0,U,4)="DOC")
"KRN",101,4092,26)

"KRN",101,4092,99)
57028,35192
"KRN",101,4094,-1)
0^218
"KRN",101,4094,0)
TIUFHA ACTION EDIT/VIEW^Detailed Display/Edit^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4094,1,0)
^^19^19^2970220^
"KRN",101,4094,1,1,0)
DETAILED DISPLAY differs from ITEMS in the following way: Detailed Display
"KRN",101,4094,1,2,0)
looks at the entry as a FILE entry and permits edit of all aspects of the
"KRN",101,4094,1,3,0)
entry, including Items.  Items, in contrast, looks at the entry ONLY as an
"KRN",101,4094,1,4,0)
Item under its parent and permits edit of Item characteristics ONLY.
"KRN",101,4094,1,5,0)
 
"KRN",101,4094,1,6,0)
Detailed Display displays selected entry.  Permits edit if appropriate.
"KRN",101,4094,1,7,0)
Edit is limited if entry is National.  Shared Components can be VIEWED via
"KRN",101,4094,1,8,0)
the Edit Document Definitions Option but can be EDITED only via the Sort
"KRN",101,4094,1,9,0)
Option.
"KRN",101,4094,1,10,0)
 
"KRN",101,4094,1,11,0)
CLINICIAN OPTIONS
"KRN",101,4094,1,12,0)
Clinicians (persons with Clinician menu) can VIEW any entry but must own
"KRN",101,4094,1,13,0)
the entry in order to edit it. Edit includes Basics, Items, and
"KRN",101,4094,1,14,0)
Boilerplate Text.
"KRN",101,4094,1,15,0)
 
"KRN",101,4094,1,16,0)
MANAGER OPTIONS
"KRN",101,4094,1,17,0)
Managers (persons with Manager menu) need not own the entry in order to
"KRN",101,4094,1,18,0)
edit it.  Edit includes Basics, Items, Boilerplate Text, Technical Fields
"KRN",101,4094,1,19,0)
and Upload Fields.
"KRN",101,4094,4)

"KRN",101,4094,10,0)
^101.01PA^^0
"KRN",101,4094,15)

"KRN",101,4094,20)
D EDVIEW^TIUFHA
"KRN",101,4094,24)

"KRN",101,4094,26)
W ""
"KRN",101,4094,28)

"KRN",101,4094,99)
57146,33844
"KRN",101,4095,-1)
0^167
"KRN",101,4095,0)
TIUF SORT BY PARENTAGE^Parentage^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4095,4)
26
"KRN",101,4095,10,0)
^101.01PA^2^2
"KRN",101,4095,10,1,0)
4096^O^1^
"KRN",101,4095,10,1,"^")
TIUF PARENTAGE ORPHAN
"KRN",101,4095,10,2,0)
4097^N^2^
"KRN",101,4095,10,2,"^")
TIUF PARENTAGE NONORPHAN
"KRN",101,4095,15)

"KRN",101,4095,20)
S XQORM(0)="1A\",TIUFATTR="P^PARENTAGE",XQORM("??")="D PARENT^TIUFXHL1"
"KRN",101,4095,21,0)
^101.021A^^0
"KRN",101,4095,26)
W ""
"KRN",101,4095,28)
Select Parentage: (O/N): 
"KRN",101,4095,99)
57120,50943
"KRN",101,4096,-1)
0^157
"KRN",101,4096,0)
TIUF PARENTAGE ORPHAN^Orphan^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4096,4)

"KRN",101,4096,20)
S TIUFAVAL="O^ORPHAN"
"KRN",101,4096,21,0)
^101.021A^^0
"KRN",101,4096,99)
56818,38589
"KRN",101,4097,-1)
0^156
"KRN",101,4097,0)
TIUF PARENTAGE NONORPHAN^Nonorphan^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4097,4)

"KRN",101,4097,20)
S TIUFAVAL="N^NONORPHAN"
"KRN",101,4097,21,0)
^101.021A^^0
"KRN",101,4097,99)
56818,38589
"KRN",101,4098,-1)
0^217
"KRN",101,4098,0)
TIUFHA ACTION EDIT STATUS^Status...^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4098,1,0)
^^24^24^2970501^
"KRN",101,4098,1,1,0)
For Options Edit/Sort/Create Document Definitions.
"KRN",101,4098,1,2,0)
 
"KRN",101,4098,1,3,0)
User selects Status Inactive, Test, or Active.  User then selects an
"KRN",101,4098,1,4,0)
entry. (If selected Status is Active, user can select multiple entries.)
"KRN",101,4098,1,5,0)
 
"KRN",101,4098,1,6,0)
If entry is of Type Class or Document Class, entry Status is changed to
"KRN",101,4098,1,7,0)
selected Status. If selected Status is Inactive, descendants are also
"KRN",101,4098,1,8,0)
Inactivated.
"KRN",101,4098,1,9,0)
 
"KRN",101,4098,1,10,0)
If entry is of Type Title, entry Status is changed to selected Status, and
"KRN",101,4098,1,11,0)
Component Statuses are automatically changed to same Status.  Exception:
"KRN",101,4098,1,12,0)
Shared Components do not have a Status and are not changed.
"KRN",101,4098,1,13,0)
 
"KRN",101,4098,1,14,0)
If Status is Inactive or Test, user may select another entry when
"KRN",101,4098,1,15,0)
finished.
"KRN",101,4098,1,16,0)
 
"KRN",101,4098,1,17,0)
For Option Sort Document Definitions, user can select multiple entries for
"KRN",101,4098,1,18,0)
ANY Status.  The display is recreated from scratch rather than updated,
"KRN",101,4098,1,19,0)
making it a bit slower.
"KRN",101,4098,1,20,0)
 
"KRN",101,4098,1,21,0)
Action Status does not function for entries of Type Object.  Instead, the
"KRN",101,4098,1,22,0)
user is asked to edit Status of Objects by using Action Basics under
"KRN",101,4098,1,23,0)
Detailed Display for the Object since Detailed Display shows Titles with
"KRN",101,4098,1,24,0)
the object embedded.
"KRN",101,4098,4)
26
"KRN",101,4098,10,0)
^101.01PA^^0
"KRN",101,4098,15)

"KRN",101,4098,20)
D EDSTAT^TIUFHA3
"KRN",101,4098,24)
I $G(TIUFAVAL)'="O^OBJECT"
"KRN",101,4098,26)

"KRN",101,4098,28)

"KRN",101,4098,99)
57028,48290
"KRN",101,4102,-1)
0^197
"KRN",101,4102,0)
TIUFC ACTION MENU^Create Document Definitions^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4102,1,0)
^^16^16^2970220^
"KRN",101,4102,1,1,0)
Protocol Menu for List Manager Template TIUFC CREATE DDEFS MGR
"KRN",101,4102,1,2,0)
 
"KRN",101,4102,1,3,0)
The Create Option shows the Hierarchy, with CLINICAL DOCUMENTS at the top.
"KRN",101,4102,1,4,0)
When the option begins, Clinical Documents is bolded with its current
"KRN",101,4102,1,5,0)
items indented below it.  You can create additional items under Clinical
"KRN",101,4102,1,6,0)
Documents if you so choose.
"KRN",101,4102,1,7,0)
 
"KRN",101,4102,1,8,0)
If you wish to create items under a LOWER entry, you must go down the
"KRN",101,4102,1,9,0)
hierarchy successive levels until the proper entry is bolded and THEN
"KRN",101,4102,1,10,0)
create your items under the bolded entry.
"KRN",101,4102,1,11,0)
 
"KRN",101,4102,1,12,0)
To go down a level, select action NEXT LEVEL and then select an entry.
"KRN",101,4102,1,13,0)
 
"KRN",101,4102,1,14,0)
To create an entry, select action Class/DocumentClass, Title or Component.
"KRN",101,4102,1,15,0)
Only one of these actions is selectable at a given time.  (Actions
"KRN",101,4102,1,16,0)
enclosed in parentheses are not selectable.)
"KRN",101,4102,4)
26
"KRN",101,4102,10,0)
^101.01PA^54^9
"KRN",101,4102,10,7,0)
3644^^33^
"KRN",101,4102,10,7,"^")
TIUFHA ACTION DELETE
"KRN",101,4102,10,43,0)
4103^^21^
"KRN",101,4102,10,43,"^")
TIUFC ACTION NEXT LEVEL
"KRN",101,4102,10,46,0)
4118^^22^
"KRN",101,4102,10,46,"^")
TIUFC ACTION BEGIN AGAIN
"KRN",101,4102,10,48,0)
4098^^32^^^
"KRN",101,4102,10,48,"^")
TIUFHA ACTION EDIT STATUS
"KRN",101,4102,10,50,0)
4121^^12^^^
"KRN",101,4102,10,50,"^")
TIUFC ACTION CREATE TL
"KRN",101,4102,10,51,0)
4120^^11^^^
"KRN",101,4102,10,51,"^")
TIUFC ACTION CREATE CLASS/DOCUMENT CLASS
"KRN",101,4102,10,52,0)
4122^^13^^^
"KRN",101,4102,10,52,"^")
TIUFC ACTION CREATE COMPONENT
"KRN",101,4102,10,53,0)
4094^^31^^^
"KRN",101,4102,10,53,"^")
TIUFHA ACTION EDIT/VIEW
"KRN",101,4102,10,54,0)
4701^^23^
"KRN",101,4102,10,54,"^")
TIUFHA ACTION BOILERPLATE TEXT
"KRN",101,4102,20)

"KRN",101,4102,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^",1),24)) ^(24)
"KRN",101,4102,26)
D HEADER^TIUFC
"KRN",101,4102,28)
Select Action: 
"KRN",101,4102,99)
57147,28826
"KRN",101,4102,101.04)
^^
"KRN",101,4103,-1)
0^198
"KRN",101,4103,0)
TIUFC ACTION NEXT LEVEL^Next Level^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4103,1,0)
^^9^9^2970225^
"KRN",101,4103,1,1,0)
The user's current position in the Hierarchy is marked by the bolded
"KRN",101,4103,1,2,0)
entry.  Action permits user to navigate down the Hierarchy by selecting an
"KRN",101,4103,1,3,0)
item under the highlighted entry.  The selected item becomes the new
"KRN",101,4103,1,4,0)
current position.
"KRN",101,4103,1,5,0)
 
"KRN",101,4103,1,6,0)
Note that Next Level differs from Expand/Collapse.  Although both actions
"KRN",101,4103,1,7,0)
do expand the selected entry, Next Level also changes the user's current
"KRN",101,4103,1,8,0)
position in the hierarchy and limits future expansion to items of that
"KRN",101,4103,1,9,0)
entry.
"KRN",101,4103,15)

"KRN",101,4103,20)
D NEXT^TIUFC
"KRN",101,4103,99)
56818,38590
"KRN",101,4104,-1)
0^148
"KRN",101,4104,0)
TIUF HIDDEN ACTIONS^TIUF HIDDEN ACTIONS^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4104,1,0)
^^2^2^2970220^^^^
"KRN",101,4104,1,1,0)
Items call RMSG^TIUFL to reset regular message when any Hidden Action is
"KRN",101,4104,1,2,0)
taken.
"KRN",101,4104,4)
26
"KRN",101,4104,10,0)
^101.01PA^21^21
"KRN",101,4104,10,1,0)
4106^+^11^
"KRN",101,4104,10,1,"^")
TIUF NEXT SCREEN
"KRN",101,4104,10,2,0)
4107^-^12^
"KRN",101,4104,10,2,"^")
TIUF PREVIOUS SCREEN
"KRN",101,4104,10,3,0)
4108^UP^13^
"KRN",101,4104,10,3,"^")
TIUF UP ONE LINE
"KRN",101,4104,10,4,0)
4109^DN^14^
"KRN",101,4104,10,4,"^")
TIUF DOWN A LINE
"KRN",101,4104,10,6,0)
4110^PS^25^
"KRN",101,4104,10,6,"^")
TIUF PRINT SCREEN
"KRN",101,4104,10,7,0)
4111^PL^31^
"KRN",101,4104,10,7,"^")
TIUF PRINT LIST
"KRN",101,4104,10,11,0)
4105^F^32^^^Find
"KRN",101,4104,10,11,"^")
TIUF FIND
"KRN",101,4104,10,12,0)
4114^Q^33^
"KRN",101,4104,10,12,"^")
TIUF QUIT
"KRN",101,4104,10,13,0)
4115^LS^23^
"KRN",101,4104,10,13,"^")
TIUF LAST SCREEN
"KRN",101,4104,10,14,0)
4116^FS^22^
"KRN",101,4104,10,14,"^")
TIUF FIRST SCREEN
"KRN",101,4104,10,15,0)
4117^GO^24^
"KRN",101,4104,10,15,"^")
TIUF GOTO PAGE
"KRN",101,4104,10,17,0)
4113^<^21^
"KRN",101,4104,10,17,"^")
TIUF LEFT
"KRN",101,4104,10,18,0)
4112^>^15^
"KRN",101,4104,10,18,"^")
TIUF RIGHT
"KRN",101,4104,10,19,0)
4660^QU^34^
"KRN",101,4104,10,19,"^")
TIUF QUIT1
"KRN",101,4104,10,20,0)
3755^TR^35^
"KRN",101,4104,10,20,"^")
TIUF ACTION TRY
"KRN",101,4104,10,21,0)
4916^TRY^36^
"KRN",101,4104,10,21,"^")
TIUF ACTION TRY1
"KRN",101,4104,99)
57148,36591
"KRN",101,4105,-1)
0^253
"KRN",101,4105,0)
TIUF FIND^Find^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4105,1,0)
^^4^4^2970304^
"KRN",101,4105,1,1,0)
Finds text in list of entries/information displayed.  Action searches all
"KRN",101,4105,1,2,0)
pages of list/information, but cannot 'see' the expansion for unexpanded
"KRN",101,4105,1,3,0)
entries in the Edit Document Definitions Option.  Can be a quick way to
"KRN",101,4105,1,4,0)
get to the right page.  Enter F
"KRN",101,4105,20)
D FIND^VALM40
"KRN",101,4105,99)
57028,34905
"KRN",101,4106,-1)
0^151
"KRN",101,4106,0)
TIUF NEXT SCREEN^Next Screen^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4106,1,0)
^^1^1^2970220^^^^
"KRN",101,4106,1,1,0)
This action moves down to the next screen of entries/information.  Enter +
"KRN",101,4106,2,0)
^101.02A^1^1
"KRN",101,4106,2,1,0)
NX
"KRN",101,4106,2,"B","NX",1)

"KRN",101,4106,20)
D NEXT^VALM4
"KRN",101,4106,99)
56818,38590
"KRN",101,4107,-1)
0^158
"KRN",101,4107,0)
TIUF PREVIOUS SCREEN^Previous Screen^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4107,1,0)
^^1^1^2970220^^^
"KRN",101,4107,1,1,0)
Moves up to the previous screen of entries/information. Enter -
"KRN",101,4107,2,0)
^101.02A^3^3
"KRN",101,4107,2,1,0)
PR
"KRN",101,4107,2,2,0)
BK
"KRN",101,4107,2,3,0)
PR
"KRN",101,4107,2,"B","BK",2)

"KRN",101,4107,2,"B","PR",1)

"KRN",101,4107,2,"B","PR",3)

"KRN",101,4107,20)
D PREV^VALM4
"KRN",101,4107,99)
56818,38590
"KRN",101,4108,-1)
0^184
"KRN",101,4108,0)
TIUF UP ONE LINE^Up One Line^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4108,1,0)
^^1^1^2970220^^^
"KRN",101,4108,1,1,0)
Moves up a line.  Enter UP
"KRN",101,4108,20)
D UP^VALM40
"KRN",101,4108,99)
56818,38590
"KRN",101,4109,-1)
0^138
"KRN",101,4109,0)
TIUF DOWN A LINE^Down a Line^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4109,1,0)
^^1^1^2970220^^^^
"KRN",101,4109,1,1,0)
Moves down a line.  Enter DN
"KRN",101,4109,20)
D DOWN^VALM40
"KRN",101,4109,99)
56818,38590
"KRN",101,4110,-1)
0^160
"KRN",101,4110,0)
TIUF PRINT SCREEN^Print Screen^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4110,1,0)
^^23^23^2970220^
"KRN",101,4110,1,1,0)
NOTE ON PRINTING:  ALL printing of document definitions is done using
"KRN",101,4110,1,2,0)
built-in hidden actions PS Print Screen and PL Print List.  User first
"KRN",101,4110,1,3,0)
locates the data to be printed so that it shows on the screen and then
"KRN",101,4110,1,4,0)
user selects action PS or PL.  To locate the appropriate data use the
"KRN",101,4110,1,5,0)
Edit, Sort, or Create option to list appropriate entries. Option Edit
"KRN",101,4110,1,6,0)
Document Definitions shows the hierarchy.  Option Sort Document
"KRN",101,4110,1,7,0)
Definitions shows sorted document definitions including Orphans, Objects,
"KRN",101,4110,1,8,0)
and Shared Components.  Option Create Document Definitions shows a
"KRN",101,4110,1,9,0)
particular line of descent of the hierarchy.  Option Create Objects shows
"KRN",101,4110,1,10,0)
objects.  To print a list, select action PS or PL at this point. 
"KRN",101,4110,1,11,0)
 
"KRN",101,4110,1,12,0)
To print information on a single given entry, first locate the entry in
"KRN",101,4110,1,13,0)
one of the above lists, then select Action Detailed Display, action
"KRN",101,4110,1,14,0)
Boilerplate Text, or action Items.  Action Detailed Display shows all
"KRN",101,4110,1,15,0)
available information for a given entry.  Action Items shows the items of
"KRN",101,4110,1,16,0)
a given entry.  THEN select action PS or PL.
"KRN",101,4110,1,17,0)
 
"KRN",101,4110,1,18,0)
PRINT SCREEN allows the user to print the current display screen.  Action
"KRN",101,4110,1,19,0)
prints ONLY what is currently visible on the screen, ignoring information
"KRN",101,4110,1,20,0)
that can be moved to horizontally or vertically (pages), so user should
"KRN",101,4110,1,21,0)
move left/right and up/down to desired information before printing. To
"KRN",101,4110,1,22,0)
print more than one visible screen of information use action PL Print
"KRN",101,4110,1,23,0)
List.  For Print Screen enter PS.
"KRN",101,4110,20)
S VALMSG=$$VMSG^TIUFL D PRT^VALM1
"KRN",101,4110,99)
56818,38590
"KRN",101,4111,-1)
0^159
"KRN",101,4111,0)
TIUF PRINT LIST^Print List^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4111,1,0)
^^9^9^2970225^
"KRN",101,4111,1,1,0)
For general printing information see action PS Print Screen.
"KRN",101,4111,1,2,0)
 
"KRN",101,4111,1,3,0)
PRINT LIST prints the entire vertical list of entries/information
"KRN",101,4111,1,4,0)
including entries/information not currently visible but which can be moved
"KRN",101,4111,1,5,0)
up or down to.  If action is selected from the leftmost position of the
"KRN",101,4111,1,6,0)
screen, user is asked whether to print ALL columns or only those columns
"KRN",101,4111,1,7,0)
visible on the current leftmost position of the screen.  If action is
"KRN",101,4111,1,8,0)
selected after user has scrolled to the right, only the currently visible
"KRN",101,4111,1,9,0)
left/right columns are printed.  Enter PL
"KRN",101,4111,20)
D PRTL^TIUFPR
"KRN",101,4111,24)

"KRN",101,4111,99)
56818,38590
"KRN",101,4112,-1)
0^162
"KRN",101,4112,0)
TIUF RIGHT^Right^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4112,1,0)
^^5^5^2970225^
"KRN",101,4112,1,1,0)
Lets the user scroll to the right one column when >> shows on the message
"KRN",101,4112,1,2,0)
bar.  Most screens display essential information which can only be seen by
"KRN",101,4112,1,3,0)
scrolling to the right.  User can also enter >=5 for example, to scroll 5
"KRN",101,4112,1,4,0)
characters to the right, or >=> to scroll to the rightmost position.
"KRN",101,4112,1,5,0)
Enter >
"KRN",101,4112,20)
D RIGHT^TIUFL1(XQORNOD(0))
"KRN",101,4112,99)
56818,38590
"KRN",101,4113,-1)
0^150
"KRN",101,4113,0)
TIUF LEFT^Left^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4113,1,0)
^^3^3^2970220^^^^
"KRN",101,4113,1,1,0)
Lets user scroll left when << shows on the message bar.  Enter < to scroll
"KRN",101,4113,1,2,0)
left to the next column or enter <=5 to scroll 5 characters to the left,
"KRN",101,4113,1,3,0)
or enter <=< to scroll to the leftmost column.  Enter <
"KRN",101,4113,20)
D LEFT^TIUFL1(XQORNOD(0))
"KRN",101,4113,99)
56818,38590
"KRN",101,4114,-1)
0^161
"KRN",101,4114,0)
TIUF QUIT^Quit^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4114,.1)
 
"KRN",101,4114,1,0)
^^1^1^2970220^^^
"KRN",101,4114,1,1,0)
Quits the option.  Enter Q
"KRN",101,4114,2,0)
^101.02A^3^3
"KRN",101,4114,2,1,0)
EXIT
"KRN",101,4114,2,2,0)
QU
"KRN",101,4114,2,3,0)
QUIT
"KRN",101,4114,2,"B","EXIT",1)

"KRN",101,4114,2,"B","QU",2)

"KRN",101,4114,2,"B","QUIT",3)

"KRN",101,4114,20)
Q
"KRN",101,4114,99)
56818,38590
"KRN",101,4115,-1)
0^149
"KRN",101,4115,0)
TIUF LAST SCREEN^Last Screen^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4115,1,0)
^^1^1^2970220^^^^
"KRN",101,4115,1,1,0)
The action displays the last screen of entries/information.  Enter LS
"KRN",101,4115,20)
D LAST^VALM4
"KRN",101,4115,99)
56818,38590
"KRN",101,4116,-1)
0^146
"KRN",101,4116,0)
TIUF FIRST SCREEN^First Screen^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4116,1,0)
^^1^1^2970220^^^^
"KRN",101,4116,1,1,0)
This action displays the first screen of entries/information.  Enter FS
"KRN",101,4116,20)
D FIRST^VALM4
"KRN",101,4116,99)
56818,38590
"KRN",101,4117,-1)
0^147
"KRN",101,4117,0)
TIUF GOTO PAGE^Go to Page^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4117,1,0)
^^2^2^2970220^^^^
"KRN",101,4117,1,1,0)
Lets user choose a page to go to.  User can also enter GO=3, for example
"KRN",101,4117,1,2,0)
to go to page 3 in a single step.  Enter GO
"KRN",101,4117,20)
D GOTO^VALM40
"KRN",101,4117,99)
56818,38590
"KRN",101,4118,-1)
0^193
"KRN",101,4118,0)
TIUFC ACTION BEGIN AGAIN^Restart^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4118,1,0)
^^3^3^2970220^^
"KRN",101,4118,1,1,0)
MANAGER OPTIONS
"KRN",101,4118,1,2,0)
Takes user back to original Display with Clinical Documents bolded as
"KRN",101,4118,1,3,0)
the current position in the hierarchy.
"KRN",101,4118,20)
S VALMBCK="R" S VALMSG=$$VMSG^TIUFL D INIT^TIUFC
"KRN",101,4118,99)
57028,34943
"KRN",101,4120,-1)
0^194
"KRN",101,4120,0)
TIUFC ACTION CREATE CLASS/DOCUMENT CLASS^Class/DocumentClass^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4120,1,0)
^^8^8^2970220^
"KRN",101,4120,1,1,0)
MANAGER OPTIONS
"KRN",101,4120,1,2,0)
This action is selectable only when the bolded entry is of Type Class. (An
"KRN",101,4120,1,3,0)
action is not selectable when it is enclosed in parentheses). It permits
"KRN",101,4120,1,4,0)
the user to create a new Class or Document Class and hang it under the
"KRN",101,4120,1,5,0)
bolded entry.
"KRN",101,4120,1,6,0)
 
"KRN",101,4120,1,7,0)
Option Create Document Definitions does not allow the creation of Objects:
"KRN",101,4120,1,8,0)
Use Option Create Objects or Option Sort Document Definitions.
"KRN",101,4120,20)
D CREATE^TIUFC1
"KRN",101,4120,24)
I $G(TIUFCTYP)="CL"
"KRN",101,4120,99)
57028,34994
"KRN",101,4121,-1)
0^196
"KRN",101,4121,0)
TIUFC ACTION CREATE TL^Title^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4121,1,0)
^^8^8^2970220^
"KRN",101,4121,1,1,0)
MANAGER OPTIONS
"KRN",101,4121,1,2,0)
Create Title is selectable only when the bolded entry has Type Document
"KRN",101,4121,1,3,0)
Class.  (Actions are not selectable when they are enclosed in
"KRN",101,4121,1,4,0)
parentheses).  This action permits the user to Create a new Title and hang
"KRN",101,4121,1,5,0)
it under the bolded entry.
"KRN",101,4121,1,6,0)
 
"KRN",101,4121,1,7,0)
Option Create Document Definitions does not allow the creation of Objects:
"KRN",101,4121,1,8,0)
Use Option Create Objects or Option Sort Document Definitions.
"KRN",101,4121,20)
D CREATE^TIUFC1
"KRN",101,4121,24)
I $G(TIUFCTYP)="DC"
"KRN",101,4121,99)
57028,35019
"KRN",101,4122,-1)
0^195
"KRN",101,4122,0)
TIUFC ACTION CREATE COMPONENT^Component^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4122,1,0)
^^12^12^2970220^
"KRN",101,4122,1,1,0)
MANAGER OPTIONS
"KRN",101,4122,1,2,0)
This action is selectable only when the bolded entry is of Type
"KRN",101,4122,1,3,0)
Title.  (An action is not selectable when it is enclosed in parentheses).
"KRN",101,4122,1,4,0)
It permits the user to create a new Component and hang it under the
"KRN",101,4122,1,5,0)
bolded entry.  Title must be Inactive before Components can be
"KRN",101,4122,1,6,0)
created under it.
"KRN",101,4122,1,7,0)
 
"KRN",101,4122,1,8,0)
If SubComponents are desired, they can be created by selecting Detailed
"KRN",101,4122,1,9,0)
Display for the parent Component, and editing its Items.
"KRN",101,4122,1,10,0)
 
"KRN",101,4122,1,11,0)
Option Create Document Definitions does not allow the creation of Objects:
"KRN",101,4122,1,12,0)
Use Option Create Objects or Option Sort Document Definitions.
"KRN",101,4122,20)
D CREATE^TIUFC1
"KRN",101,4122,24)
I $G(TIUFCTYP)="TL"
"KRN",101,4122,99)
57028,35009
"KRN",101,4124,-1)
0^13
"KRN",101,4124,0)
TIU ACTION CHANGE VIEW MIS^Change View^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4124,1,0)
^^2^2^2950425^^
"KRN",101,4124,1,1,0)
Allows MIS users to modify the list of reports by signature status, and
"KRN",101,4124,1,2,0)
dictation date range without exiting the review screen.
"KRN",101,4124,20)
D FULL^VALM1,MAKELIST^TIURM($S(+$G(^TMP("TIUR",$J,"CLASS")):+$G(^TMP("TIUR",$J,"CLASS")),1:38)) S VALMBCK="R",VALMBG=1
"KRN",101,4124,99)
57061,57325
"KRN",101,4125,-1)
0^34
"KRN",101,4125,0)
TIU ACTION MENU MRT REVIEW^Select Action^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4125,1,0)
^^1^1^2930105^^^^
"KRN",101,4125,1,1,0)
Menu of actions which may be executed by Medical Records Technicians.
"KRN",101,4125,4)
26
"KRN",101,4125,10,0)
^101.01PA^15^13
"KRN",101,4125,10,1,0)
3500^^4^
"KRN",101,4125,10,1,"^")
TIU ACTION EDIT
"KRN",101,4125,10,2,0)
3501^^9^
"KRN",101,4125,10,2,"^")
TIU ACTION PRINT
"KRN",101,4125,10,3,0)
3503^^7^
"KRN",101,4125,10,3,"^")
TIU ACTION DETAILED DISPLAY
"KRN",101,4125,10,6,0)
3523^^2^
"KRN",101,4125,10,6,"^")
TIU ACTION VERIFY
"KRN",101,4125,10,7,0)
3691^^8^
"KRN",101,4125,10,7,"^")
TIU ACTION BROWSE FOR MRT
"KRN",101,4125,10,8,0)
3507^^11^
"KRN",101,4125,10,8,"^")
TIU ACTION QUIT
"KRN",101,4125,10,9,0)
3522^^3^
"KRN",101,4125,10,9,"^")
TIU ACTION SIGN ON CHART
"KRN",101,4125,10,10,0)
3520^^5^
"KRN",101,4125,10,10,"^")
TIU ACTION REASSIGN
"KRN",101,4125,10,11,0)
4124^^10^
"KRN",101,4125,10,11,"^")
TIU ACTION CHANGE VIEW MIS
"KRN",101,4125,10,12,0)
3521^^6^
"KRN",101,4125,10,12,"^")
TIU ACTION SEND BACK
"KRN",101,4125,10,15,0)
4683^^1^
"KRN",101,4125,10,15,"^")
TIU ACTION SEARCH LIST
"KRN",101,4125,20)
S XQORM("SH")=0 S:$G(VALMSG)'["*" VALMSG="+ Next Screen  - Prev Screen  ?? More Actions",VALM("MAX")=+$G(VALMCNT)
"KRN",101,4125,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,4125,26)
S XQORM("#")=$G(^TMP("TIUR",$J,"#")) D RESIZE^TIULM(21,18),SHOW^VALM K XQORM("XLATE","FIND")
"KRN",101,4125,28)
Select Action: 
"KRN",101,4125,99)
57131,49758
"KRN",101,4126,-1)
0^32
"KRN",101,4126,0)
TIU ACTION MENU MGR REVIEW^Select Action^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4126,1,0)
^^1^1^2950426^^^^
"KRN",101,4126,1,1,0)
Menu of actions which may be executed by MIS Managers.
"KRN",101,4126,4)
26
"KRN",101,4126,10,0)
^101.01PA^18^18
"KRN",101,4126,10,1,0)
3500^^5^
"KRN",101,4126,10,1,"^")
TIU ACTION EDIT
"KRN",101,4126,10,2,0)
3501^^19^
"KRN",101,4126,10,2,"^")
TIU ACTION PRINT
"KRN",101,4126,10,3,0)
3503^^15^
"KRN",101,4126,10,3,"^")
TIU ACTION DETAILED DISPLAY
"KRN",101,4126,10,6,0)
3516^^9^
"KRN",101,4126,10,6,"^")
TIU ACTION DELETE
"KRN",101,4126,10,7,0)
3513^^7^
"KRN",101,4126,10,7,"^")
TIU ACTION AMEND
"KRN",101,4126,10,8,0)
3690^^17^
"KRN",101,4126,10,8,"^")
TIU ACTION BROWSE FOR MGR
"KRN",101,4126,10,9,0)
3507^^23^
"KRN",101,4126,10,9,"^")
TIU ACTION QUIT
"KRN",101,4126,10,10,0)
3522^^3^
"KRN",101,4126,10,10,"^")
TIU ACTION SIGN ON CHART
"KRN",101,4126,10,11,0)
4124^^21^
"KRN",101,4126,10,11,"^")
TIU ACTION CHANGE VIEW MIS
"KRN",101,4126,10,12,0)
3521^^13^
"KRN",101,4126,10,12,"^")
TIU ACTION SEND BACK
"KRN",101,4126,10,15,0)
4683^^1^
"KRN",101,4126,10,15,"^")
TIU ACTION SEARCH LIST
"KRN",101,4126,10,16,0)
3520^^11^
"KRN",101,4126,10,16,"^")
TIU ACTION REASSIGN
"KRN",101,4126,10,17,0)
3523^^6^
"KRN",101,4126,10,17,"^")
TIU ACTION VERIFY
"KRN",101,4126,10,18,0)
2772^^16^
"KRN",101,4126,10,18,"^")
VALM BLANK 1
"KRN",101,4126,20)
S XQORM("SH")=0 S:$G(VALMSG)'["*" VALMSG="+ Next Screen  - Prev Screen  ?? More Actions",VALM("MAX")=+$G(VALMCNT)
"KRN",101,4126,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,4126,26)
S XQORM("#")=$G(^TMP("TIUR",$J,"#")) D RESIZE^TIULM(21,17),SHOW^VALM K XQORM("XLATE","FIND")
"KRN",101,4126,28)
Select Action: 
"KRN",101,4126,99)
57126,43153
"KRN",101,4127,-1)
0^216
"KRN",101,4127,0)
TIUFHA ACTION EDIT NAME/OWNER/PNAME^Name/Owner/PrintName...^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4127,1,0)
^^2^2^2970220^^^
"KRN",101,4127,1,1,0)
User chooses to edit Name, Owner, or Print Name, and then selects multiple
"KRN",101,4127,1,2,0)
entries to be edited.
"KRN",101,4127,4)
26
"KRN",101,4127,10,0)
^101.01PA^6^3
"KRN",101,4127,10,1,0)
4130^NM^11^
"KRN",101,4127,10,1,"^")
TIUFHA ATTRIBUTE EDIT NAME
"KRN",101,4127,10,2,0)
4131^OW^21^
"KRN",101,4127,10,2,"^")
TIUFHA ATTRIBUTE EDIT OWNER
"KRN",101,4127,10,6,0)
4135^PN^31^
"KRN",101,4127,10,6,"^")
TIUFHA ATTRIBUTE EDIT PRINT NAME
"KRN",101,4127,20)
S VALMBCK="",XQORM(0)="1A\",XQORM("??")="D NOP^TIUFXHL1"
"KRN",101,4127,26)
W ""
"KRN",101,4127,28)
Select Attribute to Edit: (N/O/P):  
"KRN",101,4127,99)
57126,45250
"KRN",101,4130,-1)
0^237
"KRN",101,4130,0)
TIUFHA ATTRIBUTE EDIT NAME^Name^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4130,1,0)
^^1^1^2970220^^^
"KRN",101,4130,1,1,0)
User selects multiple entries and edits Name.
"KRN",101,4130,15)
D EDATTR^TIUFHA4
"KRN",101,4130,99)
56818,38591
"KRN",101,4131,-1)
0^238
"KRN",101,4131,0)
TIUFHA ATTRIBUTE EDIT OWNER^Owner^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4131,1,0)
^^3^3^2970220^^^
"KRN",101,4131,1,1,0)
User selects multiple entries and edits Owner, Personal and/or Class.  To
"KRN",101,4131,1,2,0)
change from Personal to Class Owner or vice versa, user must delete the
"KRN",101,4131,1,3,0)
unwanted entry to be prompted for the other.
"KRN",101,4131,15)
D EDATTR^TIUFHA4
"KRN",101,4131,99)
56818,38591
"KRN",101,4135,-1)
0^239
"KRN",101,4135,0)
TIUFHA ATTRIBUTE EDIT PRINT NAME^Print Name^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4135,1,0)
^^1^1^2970220^^^
"KRN",101,4135,1,1,0)
User selects multiple entries and edits Print Name.
"KRN",101,4135,15)
D EDATTR^TIUFHA4
"KRN",101,4135,99)
56818,38591
"KRN",101,4157,-1)
0^72
"KRN",101,4157,0)
TIU BROWSE ACTION REJECT^No ^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4157,1,0)
^^2^2^2970613^^
"KRN",101,4157,1,1,0)
If the current document is NOT ready for signature, indicate as much by
"KRN",101,4157,1,2,0)
typing "N", or "NO".
"KRN",101,4157,20)
S TIURJCT=$G(TIURJCT)_$S($G(TIURJCT)]"":",",1:"")_TIUI
"KRN",101,4157,99)
57061,57326
"KRN",101,4159,-1)
0^19
"KRN",101,4159,0)
TIU ACTION DESIGNATE SIGNERS^Identify Signers^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4159,1,0)
^^2^2^2960605^
"KRN",101,4159,1,1,0)
Allows authorized users to identify additional signers for a given
"KRN",101,4159,1,2,0)
document.
"KRN",101,4159,20)
D NAME^TIURA1
"KRN",101,4159,99)
57061,57326
"KRN",101,4160,-1)
0^95
"KRN",101,4160,0)
TIU PN OE/RR INTERFACE^Review Progress Notes^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4160,1,0)
^^4^4^2970313^^^^
"KRN",101,4160,1,1,0)
Allows access to the Review Progress Note utility.
"KRN",101,4160,1,2,0)
 
"KRN",101,4160,1,3,0)
NOTE:  This action is designed to be added to ANY OE/RR menu (e.g., OR
"KRN",101,4160,1,4,0)
USER MENU, OR ADD MENU CLINICIAN, etc.).
"KRN",101,4160,2,0)
^101.02A^3^1
"KRN",101,4160,2,3,0)
PN REVIEW NOTES
"KRN",101,4160,2,"B","PN REVIEW NOTES",3)

"KRN",101,4160,3,0)
^101.03P^1^1
"KRN",101,4160,3,1,0)
ORWARD
"KRN",101,4160,15)
K TIUPRM0,TIUPRM1,TIUPRM3
"KRN",101,4160,20)
D EN^VALM("TIU REVIEW PN CLINICIAN")
"KRN",101,4160,99)
57061,57326
"KRN",101,4161,-1)
0^94
"KRN",101,4161,0)
TIU PN ENTER NOTE^Enter new Progress Note^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4161,1,0)
^^3^3^2960701^^^
"KRN",101,4161,1,1,0)
This action allows the user to enter a new progress note.  It is designed
"KRN",101,4161,1,2,0)
to be attached to any Order Entry menu, or to be ^^-jumped to from any
"KRN",101,4161,1,3,0)
Select Action prompt in OE/RR.
"KRN",101,4161,2,0)
^101.02A^1^1
"KRN",101,4161,2,1,0)
PN ENTER NOTE
"KRN",101,4161,2,"B","PN ENTER NOTE",1)

"KRN",101,4161,3,0)
^101.03P^1^1
"KRN",101,4161,3,1,0)
ORWARD
"KRN",101,4161,15)
K TIUPRM0,TIUPRM1
"KRN",101,4161,20)
D MAIN^TIUEDIT(3)
"KRN",101,4161,99)
57061,57327
"KRN",101,4174,-1)
0^65
"KRN",101,4174,0)
TIU BROWSE ACTION DESIGNATE SIGNERS^Identify Signers^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4174,1,0)
^^4^4^2960611^
"KRN",101,4174,1,1,0)
Allows authorized users to identify additional users who are to be alerted
"KRN",101,4174,1,2,0)
for concurrence signature.  These signers may enter an addendum if they do
"KRN",101,4174,1,3,0)
not concur with the content of the document, but they may not edit the
"KRN",101,4174,1,4,0)
document itself.
"KRN",101,4174,20)
D CLEAR^VALM1,SIGNER^TIURA1,BLDTMP^TIUBR(TIUDA) S VALMBCK="R"
"KRN",101,4174,99)
57061,57327
"KRN",101,4304,-1)
0^135
"KRN",101,4304,0)
TIUF CHANGE STATUS TO ACTIVE^Active^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4304,15)
D EDSTAT^TIUFHA3
"KRN",101,4304,20)

"KRN",101,4304,99)
56818,38222
"KRN",101,4305,-1)
0^136
"KRN",101,4305,0)
TIUF CHANGE STATUS TO INACTIVE^Inactive^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4305,15)
D EDSTAT^TIUFHA3
"KRN",101,4305,20)

"KRN",101,4305,99)
56818,38222
"KRN",101,4306,-1)
0^137
"KRN",101,4306,0)
TIUF CHANGE STATUS TO TEST^Test^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4306,15)
D EDSTAT^TIUFHA3
"KRN",101,4306,20)

"KRN",101,4306,99)
56818,38222
"KRN",101,4410,-1)
0^15
"KRN",101,4410,0)
TIU ACTION CHANGE VIEW PT/TTL^Change View^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4410,1,0)
^^2^2^2921125^
"KRN",101,4410,1,1,0)
Allows users to modify the list of reports by signature status, review
"KRN",101,4410,1,2,0)
screen and dictation date range without exiting the review screen.
"KRN",101,4410,20)
K TIUQUIK D FULL^VALM1,MAKELIST^TIURPTTL($S(+$G(^TMP("TIUR",$J,"CLASS")):+$G(^TMP("TIUR",$J,"CLASS")),1:38)) S VALMBCK="R",VALMBG=1
"KRN",101,4410,99)
57061,57327
"KRN",101,4411,-1)
0^35
"KRN",101,4411,0)
TIU ACTION MENU PT/TTL REVIEW^Act on Documents^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4411,1,0)
^^1^1^2951213^^^^
"KRN",101,4411,1,1,0)
Menu of actions which may be executed by clinicians.
"KRN",101,4411,4)
26
"KRN",101,4411,10,0)
^101.01PA^16^16
"KRN",101,4411,10,1,0)
3500^^5^
"KRN",101,4411,10,1,"^")
TIU ACTION EDIT
"KRN",101,4411,10,2,0)
3501^^13^
"KRN",101,4411,10,2,"^")
TIU ACTION PRINT
"KRN",101,4411,10,3,0)
3502^^8^
"KRN",101,4411,10,3,"^")
TIU ACTION SIGN/COSIGN
"KRN",101,4411,10,4,0)
3503^^9^
"KRN",101,4411,10,4,"^")
TIU ACTION DETAILED DISPLAY
"KRN",101,4411,10,7,0)
3506^^11^
"KRN",101,4411,10,7,"^")
TIU ACTION BROWSE FOR CLINICIAN
"KRN",101,4411,10,8,0)
3507^^17^
"KRN",101,4411,10,8,"^")
TIU ACTION QUIT
"KRN",101,4411,10,9,0)
4410^^15^
"KRN",101,4411,10,9,"^")
TIU ACTION CHANGE VIEW PT/TTL
"KRN",101,4411,10,12,0)
4683^^1^
"KRN",101,4411,10,12,"^")
TIU ACTION SEARCH LIST
"KRN",101,4411,10,13,0)
3599^^3^
"KRN",101,4411,10,13,"^")
TIU ACTION ADD DOCUMENT
"KRN",101,4411,10,14,0)
3602^^7^
"KRN",101,4411,10,14,"^")
TIU ACTION MENU LINK
"KRN",101,4411,10,15,0)
3745^^16^
"KRN",101,4411,10,15,"^")
TIU ACTION COPY
"KRN",101,4411,10,16,0)
4054^^6^
"KRN",101,4411,10,16,"^")
TIU ACTION MAKE ADDENDUM
"KRN",101,4411,20)
S XQORM("SH")=0 S:$G(VALMSG)'["*" VALMSG="+ Next Screen  - Prev Screen  ?? More Actions",VALM("MAX")=+$G(VALMCNT)
"KRN",101,4411,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,4411,26)
S XQORM("#")=$G(^TMP("TIUR",$J,"#")) D RESIZE^TIULM(21,18),SHOW^VALM K XQORM("XLATE","FIND")
"KRN",101,4411,28)
Select Action: 
"KRN",101,4411,99)
57099,60571
"KRN",101,4660,-1)
0^235
"KRN",101,4660,0)
TIUF QUIT1^Quit^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4660,.1)
 
"KRN",101,4660,1,0)
^^1^1^2970220^^^
"KRN",101,4660,1,1,0)
Quits the option.  Enter Q
"KRN",101,4660,2,0)
^101.02A^3^3
"KRN",101,4660,2,1,0)
EXIT
"KRN",101,4660,2,2,0)
QU
"KRN",101,4660,2,3,0)
QUIT
"KRN",101,4660,2,"B","EXIT",1)

"KRN",101,4660,2,"B","QU",2)

"KRN",101,4660,2,"B","QUIT",3)

"KRN",101,4660,20)
Q
"KRN",101,4660,99)
56963,37338
"KRN",101,4683,-1)
0^53
"KRN",101,4683,0)
TIU ACTION SEARCH LIST^Find^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4683,1,0)
^^5^5^2950614^^^^
"KRN",101,4683,1,1,0)
Allows users to search list of Documents for a text string(word or
"KRN",101,4683,1,2,0)
partial word) from current position to the end of the list.  Upon
"KRN",101,4683,1,3,0)
reaching the end of the last page of the list, the user will be asked
"KRN",101,4683,1,4,0)
whether to continue the search from the beginning of the list through the
"KRN",101,4683,1,5,0)
origin of the search.
"KRN",101,4683,20)
D FIND^VALM40
"KRN",101,4683,99)
57061,57328
"KRN",101,4690,-1)
0^247
"KRN",101,4690,0)
TIUF STATUS ACTIVE^Active^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4690,20)
S TIUFAVAL=^TMP("TIUF",$J,"STATA")
"KRN",101,4690,99)
57005,59221
"KRN",101,4691,-1)
0^248
"KRN",101,4691,0)
TIUF STATUS INACTIVE^Inactive^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4691,20)
S TIUFAVAL=^TMP("TIUF",$J,"STATI")
"KRN",101,4691,99)
57005,59325
"KRN",101,4692,-1)
0^249
"KRN",101,4692,0)
TIUF STATUS TEST^Test^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4692,20)
S TIUFAVAL=^TMP("TIUF",$J,"STATT")
"KRN",101,4692,99)
57005,59381
"KRN",101,4693,-1)
0^250
"KRN",101,4693,0)
TIUF STATUS NONE^NO Status^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4693,20)
S TIUFAVAL="0^NONE"
"KRN",101,4693,99)
57005,59415
"KRN",101,4695,-1)
0^257
"KRN",101,4695,0)
TIUFJ ACTION MENU CLIN^View Objects^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4695,1,0)
^^1^1^2970114^^
"KRN",101,4695,1,1,0)
Protocol Menu for List Manager Template TIUFA SORT DDEFS CLIN
"KRN",101,4695,4)
26
"KRN",101,4695,10,0)
^101.01PA^26^6
"KRN",101,4695,10,21,0)
4094^^21^
"KRN",101,4695,10,21,"^")
TIUFHA ACTION EDIT/VIEW
"KRN",101,4695,10,22,0)
3507^^31^
"KRN",101,4695,10,22,"^")
TIU ACTION QUIT
"KRN",101,4695,10,23,0)
4105^^11^
"KRN",101,4695,10,23,"^")
TIUF FIND
"KRN",101,4695,10,24,0)
3606^^32^
"KRN",101,4695,10,24,"^")
TIU ACTION BLANK1
"KRN",101,4695,10,25,0)
4697^^12^
"KRN",101,4695,10,25,"^")
TIUFJ ACTION CHANGE VIEW
"KRN",101,4695,10,26,0)
3607^^22^
"KRN",101,4695,10,26,"^")
TIU ACTION BLANK2
"KRN",101,4695,26)
S VALMSG=$$VMSG^TIUFL D NOINUSE^TIUFLA1,SHOW^VALM
"KRN",101,4695,28)
Select Action: 
"KRN",101,4695,99)
57146,33844
"KRN",101,4696,-1)
0^258
"KRN",101,4696,0)
TIUFJ ACTION MENU MGR^Act on Objects^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4696,1,0)
^^1^1^2970522^^^^
"KRN",101,4696,1,1,0)
Protocol Menu for List Manager Template TIUFA SORT DDEFS MGR
"KRN",101,4696,4)
26
"KRN",101,4696,10,0)
^101.01PA^31^9
"KRN",101,4696,10,1,0)
3721^^13^
"KRN",101,4696,10,1,"^")
TIUFA ACTION ADD ENTRY
"KRN",101,4696,10,20,0)
3798^^31^
"KRN",101,4696,10,20,"^")
TIUFHA ACTION COPY
"KRN",101,4696,10,22,0)
4094^^21^
"KRN",101,4696,10,22,"^")
TIUFHA ACTION EDIT/VIEW
"KRN",101,4696,10,23,0)
4105^^11^
"KRN",101,4696,10,23,"^")
TIUF FIND
"KRN",101,4696,10,25,0)
4697^^12^
"KRN",101,4696,10,25,"^")
TIUFJ ACTION CHANGE VIEW
"KRN",101,4696,10,26,0)
3507^^32^
"KRN",101,4696,10,26,"^")
TIU ACTION QUIT
"KRN",101,4696,10,27,0)
4752^^23^
"KRN",101,4696,10,27,"^")
TIUFJ ACTION EDIT OWNER
"KRN",101,4696,10,30,0)
3755^^22^
"KRN",101,4696,10,30,"^")
TIUF ACTION TRY
"KRN",101,4696,10,31,0)
3606^^33^
"KRN",101,4696,10,31,"^")
TIU ACTION BLANK1
"KRN",101,4696,26)
S VALMSG=$$VMSG^TIUFL D NOINUSE^TIUFLA1,SHOW^VALM
"KRN",101,4696,28)
Select Action: 
"KRN",101,4696,99)
57148,37266
"KRN",101,4697,-1)
0^255
"KRN",101,4697,0)
TIUFJ ACTION CHANGE VIEW^Change View^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4697,1,0)
^^1^1^2970224^
"KRN",101,4697,1,1,0)
Changes what Document Definitions appear on list.
"KRN",101,4697,20)
D CHANGE^TIUFA1
"KRN",101,4697,26)
W ""
"KRN",101,4697,28)
Change:
"KRN",101,4697,99)
57033,57896
"KRN",101,4699,-1)
0^251
"KRN",101,4699,0)
TIU INTEGRATED OE/RR INTERFACE^Review Documents^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4699,1,0)
^^4^4^2970309^^
"KRN",101,4699,1,1,0)
Allows access to the Review Documents function of TIU.
"KRN",101,4699,1,2,0)
 
"KRN",101,4699,1,3,0)
NOTE:  This action is designed to be added to ANY OE/RR menu (e.g., OR
"KRN",101,4699,1,4,0)
USER MENU, OR ADD MENU CLINICIAN, etc.).
"KRN",101,4699,2,0)
^101.02A^1^1
"KRN",101,4699,2,1,0)
TIU REVIEW DOCUMENTS
"KRN",101,4699,2,"B","TIU REVIEW DOCUMENTS",1)

"KRN",101,4699,3,0)
^101.03P^1^1
"KRN",101,4699,3,1,0)
ORWARD
"KRN",101,4699,15)
K TIUPRM0,TIUPRM1,TIUPRM3
"KRN",101,4699,20)
D EN^VALM("TIU REVIEW SCREEN CLINICIAN")
"KRN",101,4699,99)
57061,57328
"KRN",101,4700,-1)
0^252
"KRN",101,4700,0)
TIU PT/TITLE OE/RR INTERFACE^Review Notes by Patient & Title^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4700,1,0)
^^4^4^2970218^
"KRN",101,4700,1,1,0)
Allows users to query for Progress Notes by Patient and Title.
"KRN",101,4700,1,2,0)
 
"KRN",101,4700,1,3,0)
NOTE:  This action is designed to be added to ANY OE/RR menu (e.g., OR
"KRN",101,4700,1,4,0)
USER MENU, OR ADD MENU CLINICIAN, etc.).
"KRN",101,4700,2,0)
^101.02A^1^1
"KRN",101,4700,2,1,0)
PN REVIEW BY PT/TITLE
"KRN",101,4700,2,"B","PN REVIEW BY PT/TITLE",1)

"KRN",101,4700,3,0)
^101.03P^1^1
"KRN",101,4700,3,1,0)
ORWARD
"KRN",101,4700,15)
K TIUPRM0,TIUPRM1,TIUPRM3
"KRN",101,4700,20)
D EN^VALM("TIU REVIEW BY PATIENT & TITLE")
"KRN",101,4700,99)
57061,57328
"KRN",101,4701,-1)
0^254
"KRN",101,4701,0)
TIUFHA ACTION BOILERPLATE TEXT^Boilerplate Text^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4701,1,0)
^^11^11^2970226^
"KRN",101,4701,1,1,0)
Applies to Titles and Components only.  Displays boilerplate text of
"KRN",101,4701,1,2,0)
entry.  If entry is a Title, also displays boilerplate text of any
"KRN",101,4701,1,3,0)
Components.  Permits user to edit boilerplate text.
"KRN",101,4701,1,4,0)
 
"KRN",101,4701,1,5,0)
CLINICIAN OPTIONS
"KRN",101,4701,1,6,0)
Clinicians (persons with Clinician menu) can VIEW boilerplate text of any
"KRN",101,4701,1,7,0)
entry but must own the entry in order to edit the boilerplate text.
"KRN",101,4701,1,8,0)
 
"KRN",101,4701,1,9,0)
MANAGER OPTIONS
"KRN",101,4701,1,10,0)
Managers (persons with Manager menu) need not own the entry in order to
"KRN",101,4701,1,11,0)
edit its boilerplate text.
"KRN",101,4701,20)
D EDVIEW^TIUFHA
"KRN",101,4701,24)
I $G(TIUFAVAL)'="O^OBJECT"
"KRN",101,4701,26)
W ""
"KRN",101,4701,99)
57028,38959
"KRN",101,4702,-1)
0^259
"KRN",101,4702,0)
TIUFX ACTION MENU MGR^Boilerplate Text^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4702,1,0)
^^8^8^2970222^
"KRN",101,4702,1,1,0)
Menu of Manager Boilerplate Text Actions.
"KRN",101,4702,1,2,0)
 
"KRN",101,4702,1,3,0)
CLINICIAN OPTIONS Clinicians (persons with Clinician menu) can VIEW the
"KRN",101,4702,1,4,0)
boilerplate text of any entry and can TRY it.  If the clinician owns
"KRN",101,4702,1,5,0)
the entry, s/he can also edit its status and its boilerplate text.
"KRN",101,4702,1,6,0)
 
"KRN",101,4702,1,7,0)
MANAGER OPTIONS Managers (persons with Manager menu) can edit status, edit
"KRN",101,4702,1,8,0)
boilerplate text, and TRY entry.
"KRN",101,4702,4)
26
"KRN",101,4702,10,0)
^101.01PA^18^6
"KRN",101,4702,10,3,0)
4090^^11^
"KRN",101,4702,10,3,"^")
TIUFD EDIT BOILERPLATE TEXT
"KRN",101,4702,10,12,0)
4105^^22^
"KRN",101,4702,10,12,"^")
TIUF FIND
"KRN",101,4702,10,13,0)
3507^^31^
"KRN",101,4702,10,13,"^")
TIU ACTION QUIT
"KRN",101,4702,10,16,0)
3755^^21^
"KRN",101,4702,10,16,"^")
TIUF ACTION TRY
"KRN",101,4702,10,17,0)
4703^^12^
"KRN",101,4702,10,17,"^")
TIUFX EDIT STATUS
"KRN",101,4702,10,18,0)
3606^^32^
"KRN",101,4702,10,18,"^")
TIU ACTION BLANK1
"KRN",101,4702,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^",1),24)) ^(24)
"KRN",101,4702,26)
S VALMSG=$$VMSG^TIUFL D SHOW^VALM
"KRN",101,4702,28)
Select Action: 
"KRN",101,4702,99)
57126,31199
"KRN",101,4703,-1)
0^261
"KRN",101,4703,0)
TIUFX EDIT STATUS^Status^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4703,1,0)
^^13^13^2970220^
"KRN",101,4703,1,1,0)
User can edit Status.  Status must be Inactive in order to edit
"KRN",101,4703,1,2,0)
boilerplate text.  Status must be Active for Document Definition to be
"KRN",101,4703,1,3,0)
used by general users to enter documents.  If status is Test, only the
"KRN",101,4703,1,4,0)
owner can enter a document on the entry.  User can TRY entry of ANY
"KRN",101,4703,1,5,0)
status since trial document is deleted following trial.
"KRN",101,4703,1,6,0)
 
"KRN",101,4703,1,7,0)
CLINICIAN OPTIONS:
"KRN",101,4703,1,8,0)
Clinicians (persons with Clinician menu) must own an entry in order to
"KRN",101,4703,1,9,0)
edit its status.
"KRN",101,4703,1,10,0)
 
"KRN",101,4703,1,11,0)
MANAGER OPTIONS:
"KRN",101,4703,1,12,0)
Managers (persons with Manager menu) can edit status of entry regardless
"KRN",101,4703,1,13,0)
of ownership.
"KRN",101,4703,20)
D STATUS^TIUFX
"KRN",101,4703,24)
I TIUFWHO="N"!('$P(TIUFNOD0,U,13))
"KRN",101,4703,99)
57028,40580
"KRN",101,4718,-1)
0^260
"KRN",101,4718,0)
TIUFX ACTION MENU VIEW^View Boilerplate Text^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4718,1,0)
^^6^6^2970222^
"KRN",101,4718,1,1,0)
Menu of View Boilerplate Text Actions.  For National Standard entries,
"KRN",101,4718,1,2,0)
entries not owned by Clinician user (person with Clinician menu), Shared
"KRN",101,4718,1,3,0)
Components not owned by user, whether Clinician or Manager (person with
"KRN",101,4718,1,4,0)
Manager menu).
"KRN",101,4718,1,5,0)
 
"KRN",101,4718,1,6,0)
User can VIEW the boilerplate text of any entry and can TRY it.
"KRN",101,4718,4)
26
"KRN",101,4718,10,0)
^101.01PA^16^3
"KRN",101,4718,10,12,0)
4105^^21^
"KRN",101,4718,10,12,"^")
TIUF FIND
"KRN",101,4718,10,13,0)
3507^^31^
"KRN",101,4718,10,13,"^")
TIU ACTION QUIT
"KRN",101,4718,10,16,0)
3755^^11^
"KRN",101,4718,10,16,"^")
TIUF ACTION TRY
"KRN",101,4718,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^",1),24)) ^(24)
"KRN",101,4718,26)
S VALMSG=$$VMSG^TIUFL D SHOW^VALM
"KRN",101,4718,28)
Select Action: 
"KRN",101,4718,99)
57120,49973
"KRN",101,4728,-1)
0^268
"KRN",101,4728,0)
TIU ACTION MENU OE/RR^Act on Documents^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4728,1,0)
^^1^1^2970321^^^^
"KRN",101,4728,1,1,0)
Menu of actions which may be executed by clinicians.
"KRN",101,4728,4)
26
"KRN",101,4728,10,0)
^101.01PA^16^16
"KRN",101,4728,10,2,0)
3501^PC^5^^^Print Copy
"KRN",101,4728,10,2,"^")
TIU ACTION PRINT
"KRN",101,4728,10,3,0)
4737^$^15^^^Complete Note(s)
"KRN",101,4728,10,3,"^")
TIU ACTION COMPLETE NOTES
"KRN",101,4728,10,4,0)
3506^B^3^
"KRN",101,4728,10,4,"^")
TIU ACTION BROWSE FOR CLINICIAN
"KRN",101,4728,10,7,0)
4054^AD^13^
"KRN",101,4728,10,7,"^")
TIU ACTION MAKE ADDENDUM
"KRN",101,4728,10,8,0)
3507^Q^21^
"KRN",101,4728,10,8,"^")
TIU ACTION QUIT
"KRN",101,4728,10,12,0)
3599^NW^1^^^New Note
"KRN",101,4728,10,12,"^")
TIU ACTION ADD DOCUMENT
"KRN",101,4728,10,14,0)
4729^SS^9^^^Select Search
"KRN",101,4728,10,14,"^")
TIU ACTION SIGNED/UNSIGNED
"KRN",101,4728,10,15,0)
4730^SP^7^
"KRN",101,4728,10,15,"^")
TIU ACTION SELECT NEW PATIENT
"KRN",101,4728,10,16,0)
4731^RS^9^
"KRN",101,4728,10,16,"^")
TIU ACTION RESET ALL SIGNED
"KRN",101,4728,20)
S XQORM("SH")=0 S:$G(VALMSG)'["*" VALMSG="+ Next Screen  - Prev Screen  ?? More Actions",VALM("MAX")=+$G(VALMCNT)
"KRN",101,4728,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,4728,26)
S XQORM("#")=$G(^TMP("TIUR",$J,"#")) D RESIZE^TIULM(21,19),SHOW^VALM K XQORM("XLATE","FIND")
"KRN",101,4728,28)
Select Action: 
"KRN",101,4728,99)
57127,19077
"KRN",101,4729,-1)
0^271
"KRN",101,4729,0)
TIU ACTION SIGNED/UNSIGNED^Select Signed/Unsigned Notes^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4729,1,0)
^^2^2^2970316^
"KRN",101,4729,1,1,0)
Allows users to modify the list of reports by signature status, etc.
"KRN",101,4729,1,2,0)
without exiting the review screen.
"KRN",101,4729,20)
D FULL^VALM1,INIT^TIUROR($S(+$G(^TMP("TIUR",$J,"CLASS")):+$G(^("CLASS")),1:3),9999,+$G(^TMP("TIUR",$J,"DFN"))) S VALMBCK="R",VALMBG=1
"KRN",101,4729,99)
57061,57328
"KRN",101,4730,-1)
0^270
"KRN",101,4730,0)
TIU ACTION SELECT NEW PATIENT^Select New Patient^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4730,1,0)
^^1^1^2970613^^
"KRN",101,4730,1,1,0)
Select a new patient.
"KRN",101,4730,15)
D:$D(^TMP("TIUR",$J)) HDR^TIUROR S VALMBCK=$S($D(^TMP("TIUR",$J,0)):"R",1:"Q"),VALMBG=1
"KRN",101,4730,20)
D FULL^VALM1,INIT^TIUROR(+$G(^TMP("TIUR",$J,"CLASS")),1)
"KRN",101,4730,24)
I +$G(ORVP)'>0
"KRN",101,4730,99)
57061,57328
"KRN",101,4731,-1)
0^269
"KRN",101,4731,0)
TIU ACTION RESET ALL SIGNED^Reset to All Signed^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4731,1,0)
^^1^1^2970613^^
"KRN",101,4731,1,1,0)
Reset the list to ALL SIGNED documents.
"KRN",101,4731,15)
D HDR^TIUROR
"KRN",101,4731,20)
D RESTORE^TIUROR
"KRN",101,4731,99)
57061,57328
"KRN",101,4732,-1)
0^266
"KRN",101,4732,0)
TIU ACTION CWAD DISPLAY^CWAD Display^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4732,1,0)
^^2^2^2970317^^^
"KRN",101,4732,1,1,0)
Detailed display of the CWAD patient warnings; setup for "^^"-jumping
"KRN",101,4732,1,2,0)
to within XQOR*.  Requires Health Summary.
"KRN",101,4732,2,0)
^101.02A^2^2
"KRN",101,4732,2,1,0)
CWA
"KRN",101,4732,2,2,0)
CWAD
"KRN",101,4732,2,"B","CWA",1)

"KRN",101,4732,2,"B","CWAD",2)

"KRN",101,4732,3,0)
^101.03P^1^1
"KRN",101,4732,3,1,0)
ORWARD
"KRN",101,4732,15)

"KRN",101,4732,20)
D CWAD^TIULX
"KRN",101,4732,99)
57061,57329
"KRN",101,4733,-1)
0^262
"KRN",101,4733,0)
TIU ACTION BROWSE FOR OE/RR^Browse^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4733,1,0)
^^4^4^2951103^^^
"KRN",101,4733,1,1,0)
Allows users to browse through Documents from the Review Screen.
"KRN",101,4733,1,2,0)
In addition to scrolling sequentially through the selected documents
"KRN",101,4733,1,3,0)
and their addenda, the user may Search for a particular word or
"KRN",101,4733,1,4,0)
phrase, or Print draft copies to a selected device.
"KRN",101,4733,20)
D BROWSE^TIURA("TIU BROWSE FOR CLINICIAN")
"KRN",101,4733,99)
57061,57329
"KRN",101,4734,-1)
0^264
"KRN",101,4734,0)
TIU ACTION COMPLETE DOCUMENTS^Sign/Cosign^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4734,1,0)
^^7^7^2930505^^^
"KRN",101,4734,1,1,0)
Allows clinicians to electronically sign selected discharge summaries
"KRN",101,4734,1,2,0)
or addenda.
"KRN",101,4734,1,3,0)
 
"KRN",101,4734,1,4,0)
NOTE:  Electronic signature carries the same legal ramifications that
"KRN",101,4734,1,5,0)
wet signature of a hard-copy discharge summary carries.  You are
"KRN",101,4734,1,6,0)
advised to carefully review each discharge summary for content and
"KRN",101,4734,1,7,0)
accuracy before exercising this option.
"KRN",101,4734,20)
D FULL^VALM1,ELSIG^TIURS
"KRN",101,4734,24)
; I $D(GMRDPRM0),+$P(GMRDPRM0,U,2),$D(^XUSEC("PROVIDER",DUZ))!$D(^XUSEC("GMRD AUTHOR",DUZ))!$D(^XUSEC("GMRD SURROGATE",DUZ))
"KRN",101,4734,99)
57061,57329
"KRN",101,4735,-1)
0^276
"KRN",101,4735,0)
TIU LM REVIEW PN^Review Progress Notes^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4735,1,0)
^^2^2^2970318^
"KRN",101,4735,1,1,0)
Allows users to access Progress Notes in a manner analogous to that
"KRN",101,4735,1,2,0)
available through Progress Notes v2.5. 
"KRN",101,4735,2,0)
^101.02A^1^1
"KRN",101,4735,2,1,0)
REVIEW NOTES
"KRN",101,4735,2,"B","REVIEW NOTES",1)

"KRN",101,4735,3,0)
^101.03P^1^1
"KRN",101,4735,3,1,0)
ORWARD
"KRN",101,4735,20)
K DUOUT,DTOUT,DIROUT,DIRUT D EN^TIUROR
"KRN",101,4735,99)
57061,57329
"KRN",101,4736,-1)
0^273
"KRN",101,4736,0)
TIU COMPLETE NOTES MENU^Select action^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4736,1,0)
^^1^1^2970613^^
"KRN",101,4736,1,1,0)
This menu is used by the List template for the completion of notes.
"KRN",101,4736,4)
26
"KRN",101,4736,10,0)
^101.01PA^3^3
"KRN",101,4736,10,1,0)
3532^^1^^^Sign
"KRN",101,4736,10,1,"^")
TIU BROWSE ACTION SIGN/COSIGN
"KRN",101,4736,10,2,0)
3526^^2^^^Edit
"KRN",101,4736,10,2,"^")
TIU BROWSE ACTION EDIT
"KRN",101,4736,10,3,0)
3525^^3^^^Delete
"KRN",101,4736,10,3,"^")
TIU BROWSE ACTION DELETE
"KRN",101,4736,15)
S:$D(DIROUT) TIUQUIT=1
"KRN",101,4736,20)
S XQORM("SH")=0
"KRN",101,4736,26)
S VALMSG="+ Next Screen  - Prev Screen  ?? More actions" D RESIZE^TIULM(20,20),SHOW^VALM S XQORM("B")=$S(VALMLST<VALMCNT:"Next Screen",(VALMLST'<VALMCNT)&(+$P($G(^TIU(8925,+TIUDA,0)),U,5)=7):"Quit",1:"Sign")
"KRN",101,4736,28)
(S)ign, (E)dit, or (D)elete this note? 
"KRN",101,4736,99)
57134,61760
"KRN",101,4737,-1)
0^265
"KRN",101,4737,0)
TIU ACTION COMPLETE NOTES^Complete Note(s)^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4737,1,0)
^^2^2^2970321^
"KRN",101,4737,1,1,0)
Allows users to browse Progress Notes from the Review Screen, and to Sign,
"KRN",101,4737,1,2,0)
Edit, or Delete individual records, either singly, or in groups.
"KRN",101,4737,20)
D BROWSE^TIURA("TIU COMPLETE NOTES")
"KRN",101,4737,99)
57061,57329
"KRN",101,4738,-1)
0^275
"KRN",101,4738,0)
TIU HIDDEN ACTIONS OE/RR^Hidden Actions^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4738,1,0)
^^4^4^2970322^^^
"KRN",101,4738,1,1,0)
This menu includes the secondary or "hidden actions" which are provided
"KRN",101,4738,1,2,0)
by the List Manager (e.g., scroll right, scroll left, up one line, etc.)
"KRN",101,4738,1,3,0)
and which may be used in the review screens, but which are not visible
"KRN",101,4738,1,4,0)
in the top level action menu.
"KRN",101,4738,4)
26
"KRN",101,4738,10,0)
^101.01PA^24^24
"KRN",101,4738,10,9,0)
3504^+^1^
"KRN",101,4738,10,9,"^")
TIU ACTION NEXT SCREEN
"KRN",101,4738,10,10,0)
3505^-^2^
"KRN",101,4738,10,10,"^")
TIU ACTION PREVIOUS SCREEN
"KRN",101,4738,10,11,0)
3509^FS^3^
"KRN",101,4738,10,11,"^")
TIU ACTION TOP
"KRN",101,4738,10,12,0)
3510^LS^4^
"KRN",101,4738,10,12,"^")
TIU ACTION BOTTOM
"KRN",101,4738,10,13,0)
2765^DN^14^
"KRN",101,4738,10,13,"^")
VALM DOWN A LINE
"KRN",101,4738,10,14,0)
2783^GO^23^
"KRN",101,4738,10,14,"^")
VALM GOTO PAGE
"KRN",101,4738,10,15,0)
2781^<^15^
"KRN",101,4738,10,15,"^")
VALM LEFT
"KRN",101,4738,10,16,0)
2769^PL^26^
"KRN",101,4738,10,16,"^")
VALM PRINT LIST
"KRN",101,4738,10,17,0)
2761^RD^24^
"KRN",101,4738,10,17,"^")
VALM REFRESH
"KRN",101,4738,10,18,0)
2780^>^16^
"KRN",101,4738,10,18,"^")
VALM RIGHT
"KRN",101,4738,10,19,0)
2764^UP^13^
"KRN",101,4738,10,19,"^")
VALM UP ONE LINE
"KRN",101,4738,10,20,0)
2771^ADPL^^
"KRN",101,4738,10,20,"^")
VALM TURN ON/OFF MENUS
"KRN",101,4738,10,21,0)
4732^CWAD^^
"KRN",101,4738,10,21,"^")
TIU ACTION CWAD DISPLAY
"KRN",101,4738,10,22,0)
4683^F^^
"KRN",101,4738,10,22,"^")
TIU ACTION SEARCH LIST
"KRN",101,4738,10,23,0)
3503^DT^^
"KRN",101,4738,10,23,"^")
TIU ACTION DETAILED DISPLAY
"KRN",101,4738,10,24,0)
4751^CT^^
"KRN",101,4738,10,24,"^")
TIU ACTION CHANGE TITLE
"KRN",101,4738,99)
57148,34826
"KRN",101,4748,-1)
0^272
"KRN",101,4748,0)
TIU BROWSE ACTION CHANGE TITLE^Change Title^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4748,1,0)
^^2^2^2970408^
"KRN",101,4748,1,1,0)
Allows authorized users to change the title of a TIU Document as
"KRN",101,4748,1,2,0)
necessary.
"KRN",101,4748,15)
S VALMBCK="Q"
"KRN",101,4748,20)
D CNVPOST1^TIURS1
"KRN",101,4748,24)

"KRN",101,4748,99)
57076,55234
"KRN",101,4749,-1)
0^267
"KRN",101,4749,0)
TIU ACTION MENU CHANGE TITLE^Change Titles^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4749,1,0)
^^1^1^2970408^^^
"KRN",101,4749,1,1,0)
Menu of actions which may be executed by clinicians.
"KRN",101,4749,4)
26
"KRN",101,4749,10,0)
^101.01PA^8^4
"KRN",101,4749,10,3,0)
3527^^3^
"KRN",101,4749,10,3,"^")
TIU BROWSE ACTION PRINT
"KRN",101,4749,10,4,0)
3507^^9^
"KRN",101,4749,10,4,"^")
TIU ACTION QUIT
"KRN",101,4749,10,5,0)
3529^^1^
"KRN",101,4749,10,5,"^")
TIU BROWSE ACTION SEARCH
"KRN",101,4749,10,8,0)
4748^^5^
"KRN",101,4749,10,8,"^")
TIU BROWSE ACTION CHANGE TITLE
"KRN",101,4749,15)
S:$D(DIROUT) TIUQUIT=1
"KRN",101,4749,20)
S XQORM("SH")=0
"KRN",101,4749,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^"),24)) ^(24)
"KRN",101,4749,26)
S VALMSG="+ Next Screen  - Prev Screen  ?? More actions" D RESIZE^TIULM(21,18),SHOW^VALM S XQORM("B")=$S(VALMLST<VALMCNT:"Next Screen",1:"Change Title")
"KRN",101,4749,28)
Select Action: 
"KRN",101,4749,99)
57076,55293
"KRN",101,4750,-1)
0^274
"KRN",101,4750,0)
TIU HIDDEN ACTIONS ADVANCED^Hidden Actions^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4750,1,0)
^^4^4^2970408^^^^
"KRN",101,4750,1,1,0)
This menu includes the secondary or "hidden actions" which are provided
"KRN",101,4750,1,2,0)
by the List Manager (e.g., scroll right, scroll left, up one line, etc.)
"KRN",101,4750,1,3,0)
and which may be used in the review screens, but which are not visible
"KRN",101,4750,1,4,0)
in the top level action menu.
"KRN",101,4750,4)
26
"KRN",101,4750,10,0)
^101.01PA^23^15
"KRN",101,4750,10,9,0)
3504^+^1^
"KRN",101,4750,10,9,"^")
TIU ACTION NEXT SCREEN
"KRN",101,4750,10,10,0)
3505^-^2^
"KRN",101,4750,10,10,"^")
TIU ACTION PREVIOUS SCREEN
"KRN",101,4750,10,11,0)
3509^FS^3^
"KRN",101,4750,10,11,"^")
TIU ACTION TOP
"KRN",101,4750,10,12,0)
3510^LS^4^
"KRN",101,4750,10,12,"^")
TIU ACTION BOTTOM
"KRN",101,4750,10,13,0)
2765^DN^14^
"KRN",101,4750,10,13,"^")
VALM DOWN A LINE
"KRN",101,4750,10,14,0)
2783^GO^23^
"KRN",101,4750,10,14,"^")
VALM GOTO PAGE
"KRN",101,4750,10,15,0)
2781^<^15^
"KRN",101,4750,10,15,"^")
VALM LEFT
"KRN",101,4750,10,16,0)
2769^PL^26^
"KRN",101,4750,10,16,"^")
VALM PRINT LIST
"KRN",101,4750,10,17,0)
2761^RD^24^
"KRN",101,4750,10,17,"^")
VALM REFRESH
"KRN",101,4750,10,18,0)
2780^>^16^
"KRN",101,4750,10,18,"^")
VALM RIGHT
"KRN",101,4750,10,19,0)
2764^UP^13^
"KRN",101,4750,10,19,"^")
VALM UP ONE LINE
"KRN",101,4750,10,20,0)
2771^ADPL^^
"KRN",101,4750,10,20,"^")
VALM TURN ON/OFF MENUS
"KRN",101,4750,10,21,0)
4732^CWAD^^
"KRN",101,4750,10,21,"^")
TIU ACTION CWAD DISPLAY
"KRN",101,4750,10,22,0)
4683^F^^
"KRN",101,4750,10,22,"^")
TIU ACTION SEARCH LIST
"KRN",101,4750,10,23,0)
4751^CT^^
"KRN",101,4750,10,23,"^")
TIU ACTION CHANGE TITLE
"KRN",101,4750,99)
57148,34826
"KRN",101,4751,-1)
0^263
"KRN",101,4751,0)
TIU ACTION CHANGE TITLE^Change Title^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4751,1,0)
^^2^2^2970408^
"KRN",101,4751,1,1,0)
Allows authorized users to modify the title of a document (and thereby
"KRN",101,4751,1,2,0)
convert a patient posting), as appropriate.
"KRN",101,4751,20)
D CNVPOST^TIURS1
"KRN",101,4751,99)
57076,52269
"KRN",101,4752,-1)
0^281
"KRN",101,4752,0)
TIUFJ ACTION EDIT OWNER^Owner^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4752,1,0)
^^3^3^2970410^
"KRN",101,4752,1,1,0)
User selects multiple entries and edits Owner, Personal and/or Class.  To
"KRN",101,4752,1,2,0)
change from Personal to Class Owner or vice versa, user must delete the
"KRN",101,4752,1,3,0)
unwanted entry to be prompted for the other.
"KRN",101,4752,15)

"KRN",101,4752,20)
D EDATTR^TIUFHA4
"KRN",101,4752,99)
57078,35871
"KRN",101,4753,-1)
0^277
"KRN",101,4753,0)
TIUFDJ ACTION MENU MGR^Detailed Display^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4753,1,0)
^^1^1^2970521^^
"KRN",101,4753,1,1,0)
Menu of Manager Edit Actions for Objects.
"KRN",101,4753,4)
26
"KRN",101,4753,10,0)
^101.01PA^17^6
"KRN",101,4753,10,1,0)
4085^^11^
"KRN",101,4753,10,1,"^")
TIUFD EDIT BASICS
"KRN",101,4753,10,9,0)
4091^^12^
"KRN",101,4753,10,9,"^")
TIUFD EDIT TECHNICAL FIELDS
"KRN",101,4753,10,12,0)
4105^^22^
"KRN",101,4753,10,12,"^")
TIUF FIND
"KRN",101,4753,10,13,0)
3507^^32^
"KRN",101,4753,10,13,"^")
TIU ACTION QUIT
"KRN",101,4753,10,16,0)
3755^^21^
"KRN",101,4753,10,16,"^")
TIUF ACTION TRY
"KRN",101,4753,10,17,0)
3644^^31^
"KRN",101,4753,10,17,"^")
TIUFHA ACTION DELETE
"KRN",101,4753,24)
I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),"^",1),24)) ^(24)
"KRN",101,4753,26)
S VALMSG=$$VMSG^TIUFL D SHOW^VALM
"KRN",101,4753,28)
Select Action: 
"KRN",101,4753,99)
57133,41187
"KRN",101,4768,-1)
0^282
"KRN",101,4768,0)
TIU BROWSE ACTION LINK TO PROBLEM^Problem(s)^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4768,1,0)
^^2^2^2970613^^
"KRN",101,4768,1,1,0)
Link the selected document to one or more Problems from the patient's
"KRN",101,4768,1,2,0)
active Problem List.
"KRN",101,4768,20)
D LINK1^TIURB1
"KRN",101,4768,99)
57112,36839
"KRN",101,4769,-1)
0^283
"KRN",101,4769,0)
TIU BROWSE MENU LINK^Link ...^^M^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4769,1,0)
^^3^3^2970514^
"KRN",101,4769,1,1,0)
Allows authorized users to link single documents to either problems,
"KRN",101,4769,1,2,0)
visits, or other documents.  Such associations permit a variety of
"KRN",101,4769,1,3,0)
clinically useful "views" of the on-line record.
"KRN",101,4769,4)
26
"KRN",101,4769,10,0)
^101.01PA^2^2
"KRN",101,4769,10,1,0)
4768^^1^
"KRN",101,4769,10,1,"^")
TIU BROWSE ACTION LINK TO PROBLEM
"KRN",101,4769,10,2,0)
3528^^3^^^Visit
"KRN",101,4769,10,2,"^")
TIU BROWSE ACTION REASSIGN
"KRN",101,4769,15)
K TIUCHNG
"KRN",101,4769,20)
S XQORM(0)="AD",VALMBCK=""
"KRN",101,4769,26)
W !
"KRN",101,4769,28)
Specify Linkage: 
"KRN",101,4769,99)
57129,56273
"KRN",101,4916,-1)
0^284
"KRN",101,4916,0)
TIUF ACTION TRY1^Try^^A^^^^^^^^TEXT INTEGRATION UTILITIES
"KRN",101,4916,1,0)
^^1^1^2970619^
"KRN",101,4916,1,1,0)
Permits Mnemonic TRY.  Otherwise, same as protocol TIUF ACTION TRY.
"KRN",101,4916,20)
D CHECKDEF^TIUFHA6
"KRN",101,4916,99)
57148,36415
"KRN",8994,65,-1)
0^12
"KRN",8994,65,0)
TIU NOTES^NOTES^TIUSRVLO^2^S^^^
"KRN",8994,65,1,0)
^^2^2^2970605^^^^
"KRN",8994,65,1,1,0)
This API gets lists of progress notes for a patient, with optional 
"KRN",8994,65,1,2,0)
parameters for STATUS, EARLY DATE/TIME, and LATE DATE/TIME.
"KRN",8994,65,2,0)
^8994.02A^1^1
"KRN",8994,65,2,1,0)
DFN^1^20^1
"KRN",8994,65,2,1,1,0)
^^1^1^2970605^^^^
"KRN",8994,65,2,1,1,1,0)
This is the pointer to the patient file.
"KRN",8994,65,2,"B","DFN",1)

"KRN",8994,66,-1)
0^9
"KRN",8994,66,0)
TIU GET RECORD TEXT^TGET^TIUSRVR1^4^S^^^1
"KRN",8994,66,1,0)
^^1^1^2960709^^^^
"KRN",8994,66,1,1,0)
This RPC will get the textual portion of a TIU Document Record.
"KRN",8994,66,2,0)
^8994.02A^1^1
"KRN",8994,66,2,1,0)
TIUDA^1^10^1
"KRN",8994,66,2,"B","TIUDA",1)

"KRN",8994,116,-1)
0^17
"KRN",8994,116,0)
TIU SUMMARIES^SUMMARY^TIUSRVLO^2^S^^^
"KRN",8994,116,1,0)
^^2^2^2970327^^^^
"KRN",8994,116,1,1,0)
This API gets lists of Discharge Summaries for a patient, with optional 
"KRN",8994,116,1,2,0)
parameters for STATUS, EARLY DATE/TIME, and LATE DATE/TIME.
"KRN",8994,116,2,0)
^8994.02A^1^1
"KRN",8994,116,2,1,0)
DFN^1^20^1
"KRN",8994,116,2,1,1,0)
^^1^1^2970327^^^^
"KRN",8994,116,2,1,1,1,0)
This is the pointer to the patient file.
"KRN",8994,116,2,"B","DFN",1)

"KRN",8994,214,-1)
0^13
"KRN",8994,214,0)
TIU NOTES BY VISIT^NOTES^TIUSRVLV^4^S
"KRN",8994,214,1,0)
^^1^1^2951207^^^
"KRN",8994,214,1,1,0)
This API gets lists of Progress Notes by visit from TIU.
"KRN",8994,214,2,0)
^8994.02A^1^1
"KRN",8994,214,2,1,0)
VISIT^1^20^1
"KRN",8994,214,2,1,1,0)
^^1^1^2951207^
"KRN",8994,214,2,1,1,1,0)
This is the pointer to the VISIT File.
"KRN",8994,214,2,"B","VISIT",1)

"KRN",8994,214,3,0)
^^1^1^2951207^^
"KRN",8994,214,3,1,0)
This is the pointer to the visit file.
"KRN",8994,215,-1)
0^18
"KRN",8994,215,0)
TIU SUMMARIES BY VISIT^SUMMARY^TIUSRVLV^4^S
"KRN",8994,215,1,0)
^^1^1^2951207^
"KRN",8994,215,1,1,0)
This API returns lists of Discharge Summaries by visit.
"KRN",8994,215,2,0)
^8994.02A^1^1
"KRN",8994,215,2,1,0)
VISIT^1^20^1
"KRN",8994,215,2,1,1,0)
^^1^1^2951207^
"KRN",8994,215,2,1,1,1,0)
This is the pointer to the visit file.
"KRN",8994,215,2,"B","VISIT",1)

"KRN",8994,293,-1)
0^8
"KRN",8994,293,0)
TIU GET PN TITLES^NOTES^TIUSRVD^2^S
"KRN",8994,293,1,0)
^^3^3^2960513^
"KRN",8994,293,1,1,0)
This API returns a list of Progress Notes Titles, including a SHORT LIST
"KRN",8994,293,1,2,0)
of preferred titles as defined by the user, and a LONG LIST of all titles
"KRN",8994,293,1,3,0)
defined at the site.
"KRN",8994,294,-1)
0^6
"KRN",8994,294,0)
TIU GET DS TITLES^SUMMARY^TIUSRVD^2
"KRN",8994,295,-1)
0^10
"KRN",8994,295,0)
TIU LOAD BOILERPLATE TEXT^BLRSHELL^TIUSRVD^4^S^^^1
"KRN",8994,295,1,0)
^^3^3^2970613^
"KRN",8994,295,1,1,0)
This RPC will load the boilerplate text associated with the selected
"KRN",8994,295,1,2,0)
title, and execute the methods for any objects embedded in the boilerplate
"KRN",8994,295,1,3,0)
text.
"KRN",8994,295,2,0)
^8994.02A^2^2
"KRN",8994,295,2,1,0)
TITLE^1^^1
"KRN",8994,295,2,1,1,0)
^^2^2^2960513^
"KRN",8994,295,2,1,1,1,0)
This is a pointer to the TIU DOCUMENT DEFINITION FILE (#8925.1), which
"KRN",8994,295,2,1,1,2,0)
identifies the title of the document to be loaded.
"KRN",8994,295,2,2,0)
DFN^1^^1
"KRN",8994,295,2,2,1,0)
^^1^1^2960713^^^
"KRN",8994,295,2,2,1,1,0)
This is the pointer to the patient for whom the document is being entered.
"KRN",8994,295,2,"B","DFN",2)

"KRN",8994,295,2,"B","TITLE",1)

"KRN",8994,425,-1)
0^16
"KRN",8994,425,0)
TIU SIGN RECORD^SIGN^TIUSRVP^1^S
"KRN",8994,425,1,0)
^^3^3^2960827^^
"KRN",8994,425,1,1,0)
This API Supports the application of the user's electronic signature to a
"KRN",8994,425,1,2,0)
TIU document while evaluating authorization, and validating the user's
"KRN",8994,425,1,3,0)
electronic signature.
"KRN",8994,425,2,0)
^8994.02A^2^2
"KRN",8994,425,2,1,0)
TIUDA^1^^1
"KRN",8994,425,2,1,1,0)
^^2^2^2960705^
"KRN",8994,425,2,1,1,1,0)
This it the record number (IEN) in the TIU DOCUMENT FILE (#8925) for the
"KRN",8994,425,2,1,1,2,0)
record which has been electronically signed.
"KRN",8994,425,2,2,0)
TIUX^1^245^1
"KRN",8994,425,2,2,1,0)
^^5^5^2960827^
"KRN",8994,425,2,2,1,1,0)
This is the network-encrypted string of what the user entered as his/her
"KRN",8994,425,2,2,1,2,0)
electronic signature code.  The SIGN API will call Kernel to validate the
"KRN",8994,425,2,2,1,3,0)
signature code, determine the user's role and privilege with respect to
"KRN",8994,425,2,2,1,4,0)
the document in question, and apply the signature to the document, if
"KRN",8994,425,2,2,1,5,0)
appropriate.
"KRN",8994,425,2,"B","TIUDA",1)

"KRN",8994,425,2,"B","TIUX",2)

"KRN",8994,425,3,0)
^^4^4^2960827^^
"KRN",8994,425,3,1,0)
This is the error code which may result if the user enters an invalid
"KRN",8994,425,3,2,0)
code, or if the Authorization/Subscription Utility determines that the
"KRN",8994,425,3,3,0)
user is NOT authorized to sign (or cosign) the document, as specified by
"KRN",8994,425,3,4,0)
the site's business rules.
"KRN",8994,432,-1)
0^7
"KRN",8994,432,0)
TIU GET PERSONAL PREFERENCES^GETPREF^TIUSRVR^1^S^^^0
"KRN",8994,432,1,0)
^^6^6^2960626^
"KRN",8994,432,1,1,0)
Returns Users personal preferences for TIU in the following format:
"KRN",8994,432,1,2,0)
 
"KRN",8994,432,1,3,0)
TIUY = USER [1P] ^ DEFAULT LOCATION [2P] ^ REVIEW SCREEN SORT FIELD [3S] ^
"KRN",8994,432,1,4,0)
    ==>REVIEW SCREEN SORT ORDER [4S] ^ DISPLAY MENUS [5S] ^ PATIENT
"KRN",8994,432,1,5,0)
    ==>SELECTION PREFERENCE [6S] ^ ASK 'Save changes?' AFTER EDIT [7S] ^
"KRN",8994,432,1,6,0)
    ==>ASK SUBJECT FOR PROGRESS NOTES [8S] ^
"KRN",8994,432,2,0)
^8994.02A^1^1
"KRN",8994,432,2,1,0)
USER^1^^1
"KRN",8994,432,2,1,1,0)
^^1^1^2960626^
"KRN",8994,432,2,1,1,1,0)
This is the pointer to file 200 (DUZ) for the current user.
"KRN",8994,432,2,"B","USER",1)

"KRN",8994,432,3,0)
^^4^4^2960626^
"KRN",8994,432,3,1,0)
TIUY = USER [1P] ^ DEFAULT LOCATION [2P] ^ REVIEW SCREEN SORT FIELD [3S] ^
"KRN",8994,432,3,2,0)
    ==>REVIEW SCREEN SORT ORDER [4S] ^ DISPLAY MENUS [5S] ^ PATIENT
"KRN",8994,432,3,3,0)
    ==>SELECTION PREFERENCE [6S] ^ ASK 'Save changes?' AFTER EDIT [7S] ^
"KRN",8994,432,3,4,0)
    ==>ASK SUBJECT FOR PROGRESS NOTES [8S] ^
"KRN",8994,435,-1)
0^19
"KRN",8994,435,0)
TIU UPDATE RECORD^UPDATE^TIUSRVP^1^S^^^0
"KRN",8994,435,1,0)
^^7^7^2960709^^^^
"KRN",8994,435,1,1,0)
This API updates the record named in the TIUDA parameter, with the
"KRN",8994,435,1,2,0)
information contained in the TIUX(Field #) array.  The body of the
"KRN",8994,435,1,3,0)
modified TIU document should be passed in the TIUX("TEXT",i,0) subscript,
"KRN",8994,435,1,4,0)
where i is the line number (i.e., the "TEXT" node should be ready to MERGE
"KRN",8994,435,1,5,0)
with a word processing field).  Any filing errors which may occur will be
"KRN",8994,435,1,6,0)
returned in the single valued ERR parameter (which is passed by
"KRN",8994,435,1,7,0)
reference).
"KRN",8994,435,2,0)
^8994.02A^3^3
"KRN",8994,435,2,1,0)
ERR^1
"KRN",8994,435,2,1,1,0)
^^3^3^2960703^
"KRN",8994,435,2,1,1,1,0)
This is the return parameter, which is passed by reference.  If an error
"KRN",8994,435,2,1,1,2,0)
occurs, it will be a pointer to the FM dialog file followed by the integer
"KRN",8994,435,2,1,1,3,0)
1 in the second "^"-piece (e.g., 8925001^1).
"KRN",8994,435,2,2,0)
TIUDA^1^^1
"KRN",8994,435,2,2,1,0)
^^1^1^2960703^
"KRN",8994,435,2,2,1,1,0)
This is the record # (IEN) of the TIU Document in file #8925.
"KRN",8994,435,2,3,0)
TIUX^2^^1
"KRN",8994,435,2,3,1,0)
^^10^10^2960709^^
"KRN",8994,435,2,3,1,1,0)
This is the input array which contains the data to be filed in the
"KRN",8994,435,2,3,1,2,0)
modified document.  It should look something like this:
"KRN",8994,435,2,3,1,3,0)
 
"KRN",8994,435,2,3,1,4,0)
TIUX(.02)=45678
"KRN",8994,435,2,3,1,5,0)
TIUX(1301)=2960703.104556
"KRN",8994,435,2,3,1,6,0)
TIUX(1302)=293764
"KRN",8994,435,2,3,1,7,0)
TIUX("TEXT",1,0)="The patient is a 70 year old WHITE MALE, who presented
"KRN",8994,435,2,3,1,8,0)
to the ONCOLOGY CLINIC"
"KRN",8994,435,2,3,1,9,0)
TIUX("TEXT",2,0)="On JULY 3, 1996@10:00 AM, with the chief complaint of
"KRN",8994,435,2,3,1,10,0)
NECK PAIN..."
"KRN",8994,435,2,"B","ERR",1)

"KRN",8994,435,2,"B","TIUDA",2)

"KRN",8994,435,2,"B","TIUX",3)

"KRN",8994,436,-1)
0^15
"KRN",8994,436,0)
TIU REQUIRES COSIGNATURE^REQCOS^TIUSRVA^1^S
"KRN",8994,436,1,0)
^^2^2^2961129^^
"KRN",8994,436,1,1,0)
This Boolean RPC simply evaluates whether the current user requires
"KRN",8994,436,1,2,0)
cosignature for TIU DOCUMENTS, and returns a 1 if true, or a 0 if false.
"KRN",8994,436,2,0)
^8994.02A^3^3
"KRN",8994,436,2,1,0)
TIUTYP^1^^1
"KRN",8994,436,2,1,1,0)
^^1^1^2961129^
"KRN",8994,436,2,1,1,1,0)
Pointer to the TIU DOCUMENT DEFINITION FILE (#8925.1).
"KRN",8994,436,2,2,0)
TIUDA^1^^0
"KRN",8994,436,2,2,1,0)
^^2^2^2961129^
"KRN",8994,436,2,2,1,1,0)
Pointer to the TIU DOCUMENT FILE (#8925).  References the document to be
"KRN",8994,436,2,2,1,2,0)
edited/signed.
"KRN",8994,436,2,3,0)
USER^1^^0
"KRN",8994,436,2,3,1,0)
^^2^2^2961129^
"KRN",8994,436,2,3,1,1,0)
Optional parameter.  Pointer to the NEW PERSON FILE (#200).  Pass this in if 
"KRN",8994,436,2,3,1,2,0)
author is NOT the current user (e.g., User is a transcriptionist.
"KRN",8994,436,2,"B","TIUDA",2)

"KRN",8994,436,2,"B","TIUTYP",1)

"KRN",8994,436,2,"B","USER",3)

"KRN",8994,436,3,0)
^^1^1^2961129^
"KRN",8994,436,3,1,0)
Boolean result: 0 if FALSE, OR 1 if TRUE.
"KRN",8994,437,-1)
0^11
"KRN",8994,437,0)
TIU LOAD RECORD FOR EDIT^GET4EDIT^TIUSRVR^4^S^^^1
"KRN",8994,437,1,0)
^^3^3^2970613^^^^
"KRN",8994,437,1,1,0)
This RPC loads the return array with data in a format consistent with that
"KRN",8994,437,1,2,0)
required by the TIU UPDATE RECORD API.  It should be invoked when the user
"KRN",8994,437,1,3,0)
invokes the Edit action, to load the dialog for editing the document.
"KRN",8994,437,2,0)
^8994.02A^2^2
"KRN",8994,437,2,1,0)
TIUDA^1^^1
"KRN",8994,437,2,1,1,0)
^^2^2^2960703^
"KRN",8994,437,2,1,1,1,0)
This is the record number (IEN) in file 8925 for the document to be
"KRN",8994,437,2,1,1,2,0)
edited.
"KRN",8994,437,2,2,0)
DR ^1^245^0
"KRN",8994,437,2,2,1,0)
^^10^10^2960830^^
"KRN",8994,437,2,2,1,1,0)
This optional parameter allows the calling application to specify the
"KRN",8994,437,2,2,1,2,0)
fields to be returned in Y(FIELD #) as expected by the edit dialog.
"KRN",8994,437,2,2,1,3,0)
 
"KRN",8994,437,2,2,1,4,0)
e.g., for a PROGRESS NOTE, the user may only edit the DATE/TIME OF NOTE
"KRN",8994,437,2,2,1,5,0)
(Field #1301), the AUTHOR OF NOTE (Field #1202), and (per user preference)
"KRN",8994,437,2,2,1,6,0)
the SUBJECT of the note (Field #1701) (in addition to the body of the
"KRN",8994,437,2,2,1,7,0)
note, of course). For a Discharge Summary, the user may edit the URGENCY
"KRN",8994,437,2,2,1,8,0)
of the record (Field #.09), DICTATED BY (Field #1202), DICTATION DATE
"KRN",8994,437,2,2,1,9,0)
(Field #1307), ATTENDING PHYSICIAN (Field #1209), and an optional SUBJECT
"KRN",8994,437,2,2,1,10,0)
(if specified as preferred by the user).
"KRN",8994,437,2,"B","DR ",2)

"KRN",8994,437,2,"B","TIUDA",1)

"KRN",8994,437,3,0)
^^2^2^2960830^^
"KRN",8994,437,3,1,0)
The return array will be subscripted by the field #, with the body of the
"KRN",8994,437,3,2,0)
document in the ^TMP("TIUEDIT",$J,"TEXT",n) subscript.
"KRN",8994,438,-1)
0^4
"KRN",8994,438,0)
TIU DETAILED DISPLAY^RPC^TIUSRV^4^S
"KRN",8994,438,1,0)
^^1^1^2960703^^
"KRN",8994,438,1,1,0)
Gets details for display of a given record.
"KRN",8994,438,2,0)
^8994.02A^1^1
"KRN",8994,438,2,1,0)
TIUDA^1^^1
"KRN",8994,438,2,1,1,0)
^^1^1^2960703^
"KRN",8994,438,2,1,1,1,0)
This is the record number (IEN) in the TIU Document File (#8925).
"KRN",8994,438,2,"B","TIUDA",1)

"KRN",8994,438,3,0)
^^2^2^2960703^
"KRN",8994,438,3,1,0)
Returns all known details of the record identified by TIUDA (Source,
"KRN",8994,438,3,2,0)
Signature, Linked Problems, Body of document, etc.).
"KRN",8994,441,-1)
0^1
"KRN",8994,441,0)
TIU CREATE ADDENDUM RECORD^MAKEADD^TIUSRVP^1^S
"KRN",8994,441,1,0)
^^1^1^2970613^^^^
"KRN",8994,441,1,1,0)
This Remote Procedure allows the creation of addenda to TIU Documents.
"KRN",8994,441,2,0)
^8994.02A^2^2
"KRN",8994,441,2,1,0)
TIUDA^1^^1
"KRN",8994,441,2,1,1,0)
^^1^1^2960708^
"KRN",8994,441,2,1,1,1,0)
This is the record number of the parent document in file 8925.
"KRN",8994,441,2,2,0)
TIUX^2^^1
"KRN",8994,441,2,2,1,0)
^^2^2^2960708^
"KRN",8994,441,2,2,1,1,0)
This is a local input array containing the data to be filed for the
"KRN",8994,441,2,2,1,2,0)
addendum record, formatted as described for the TIU UPDATE RECORD RPC.
"KRN",8994,441,2,"B","TIUDA",1)

"KRN",8994,441,2,"B","TIUX",2)

"KRN",8994,441,3,0)
^^4^4^2960708^
"KRN",8994,441,3,1,0)
This is the record number of the resulting addendum.
"KRN",8994,441,3,2,0)
 
"KRN",8994,441,3,3,0)
NOTE:  If no addendum record may be created, then the return variable will
"KRN",8994,441,3,4,0)
look as follows:  "-1^Could not create addendum."
"KRN",8994,442,-1)
0^2
"KRN",8994,442,0)
TIU CREATE RECORD^MAKE^TIUSRVP^1^S
"KRN",8994,442,1,0)
^^1^1^2970616^^^
"KRN",8994,442,1,1,0)
This remote procedure allows the creation of TIU DOCUMENT records.
"KRN",8994,442,2,0)
^8994.02A^7^7
"KRN",8994,442,2,1,0)
DFN^1^^1
"KRN",8994,442,2,1,1,0)
^^1^1^2960708^
"KRN",8994,442,2,1,1,1,0)
This REQUIRED PARAMETER is the pointer to the patient file.
"KRN",8994,442,2,2,0)
TITLE^1^^1
"KRN",8994,442,2,2,1,0)
^^2^2^2960708^
"KRN",8994,442,2,2,1,1,0)
This is the pointer to the TIU DOCUMENT DEFINITION FILE which identifies
"KRN",8994,442,2,2,1,2,0)
the TITLE of the document to be filed.
"KRN",8994,442,2,3,0)
VDT^1^^0
"KRN",8994,442,2,3,1,0)
^^5^5^2960708^
"KRN",8994,442,2,3,1,1,0)
This optional parameter is the Date/time of visit.  If the parameter VSIT
"KRN",8994,442,2,3,1,2,0)
is present, this will be ignored.  Otherwise, the RPC will attempt to
"KRN",8994,442,2,3,1,3,0)
generate a match with a visit based on DFN, VDT, and VLOC (visit
"KRN",8994,442,2,3,1,4,0)
location).  In the event that the RPC cannot generate such a match, a new
"KRN",8994,442,2,3,1,5,0)
EVENT-type Visit will be created with the current date/time.
"KRN",8994,442,2,4,0)
VLOC^1^^0
"KRN",8994,442,2,4,1,0)
^^2^2^2960708^
"KRN",8994,442,2,4,1,1,0)
This optional parameter is the Location of Visit (e.g., Cardiology
"KRN",8994,442,2,4,1,2,0)
Clinic).  It is a pointer to Hospital location (File #44).
"KRN",8994,442,2,5,0)
VSIT^1^^0
"KRN",8994,442,2,5,1,0)
^^2^2^2960708^
"KRN",8994,442,2,5,1,1,0)
This is a pointer to the Visit File (#9000010) entry for the visit to
"KRN",8994,442,2,5,1,2,0)
which the document is to be linked.
"KRN",8994,442,2,6,0)
TIUX^2^^1
"KRN",8994,442,2,6,1,0)
^^3^3^2970616^^
"KRN",8994,442,2,6,1,1,0)
This is the input array in which the identifiers of the document, as well
"KRN",8994,442,2,6,1,2,0)
as its text, are to be stored in the format described for the TIU UPDATE
"KRN",8994,442,2,6,1,3,0)
RECORD RPC.
"KRN",8994,442,2,7,0)
VSTR^1^^0
"KRN",8994,442,2,7,1,0)
^^4^4^2970616^
"KRN",8994,442,2,7,1,1,0)
This parameter identifies the visit location, date/time, and Service
"KRN",8994,442,2,7,1,2,0)
Category (Hospitalization, Ambulatory, Telecommunications, or Event
"KRN",8994,442,2,7,1,3,0)
(HISTORICAL)) in the form of a semi-colon delimited string (e.g.,
"KRN",8994,442,2,7,1,4,0)
"469;2970616.1415;A").
"KRN",8994,442,2,"B","DFN",1)

"KRN",8994,442,2,"B","TITLE",2)

"KRN",8994,442,2,"B","TIUX",6)

"KRN",8994,442,2,"B","VDT",3)

"KRN",8994,442,2,"B","VLOC",4)

"KRN",8994,442,2,"B","VSIT",5)

"KRN",8994,442,2,"B","VSTR",7)

"KRN",8994,442,3,0)
^^5^5^2970616^^
"KRN",8994,442,3,1,0)
This is an error message corresponding to an entry in the FileMan Dialog
"KRN",8994,442,3,2,0)
File.  In the event of a filing error, the second "^"-piece of this scalar
"KRN",8994,442,3,3,0)
return variable will be a textual message describing the nature of the
"KRN",8994,442,3,4,0)
error (e.g., 89250001^Patient or Visit information was insufficient for
"KRN",8994,442,3,5,0)
document creation.").
"KRN",8994,447,-1)
0^3
"KRN",8994,447,0)
TIU DELETE RECORD^DELETE^TIUSRVP^1^S
"KRN",8994,447,1,0)
^^1^1^2960711^
"KRN",8994,447,1,1,0)
Deletes TIU Document records...Evaluates authorization.
"KRN",8994,447,2,0)
^8994.02A^1^1
"KRN",8994,447,2,1,0)
TIUDA^1^^1
"KRN",8994,447,2,1,1,0)
^^1^1^2960711^
"KRN",8994,447,2,1,1,1,0)
Record number of TIU Document to be deleted.
"KRN",8994,447,2,"B","TIUDA",1)

"KRN",8994,447,3,0)
^^3^3^2960711^
"KRN",8994,447,3,1,0)
Returns error message with ERR=1^Explanation text if the user is NOT
"KRN",8994,447,3,2,0)
authorized to delete the named record (e.g., it's his, but signed; or it's
"KRN",8994,447,3,3,0)
not his, and he better keep his paws off it).
"KRN",8994,470,-1)
0^14
"KRN",8994,470,0)
TIU PRINT RECORD^RPC^TIUPD^1^S
"KRN",8994,470,1,0)
^^1^1^2960826^^^
"KRN",8994,470,1,1,0)
Allows Printing of TIU Documents on demand.
"KRN",8994,470,2,0)
^8994.02A^3^3
"KRN",8994,470,2,1,0)
TIUDA^1^^1
"KRN",8994,470,2,1,1,0)
^^2^2^2960826^
"KRN",8994,470,2,1,1,1,0)
This is the record number of the document in the TIU DOCUMENT FILE
"KRN",8994,470,2,1,1,2,0)
(#8925). It uniquely identifies the document to be printed.
"KRN",8994,470,2,2,0)
TIUIO^1^^1
"KRN",8994,470,2,2,1,0)
^^4^4^2960826^^
"KRN",8994,470,2,2,1,1,0)
This is the NAME of the device to which the document is to be printed.
"KRN",8994,470,2,2,1,2,0)
 
"KRN",8994,470,2,2,1,3,0)
NOTE: You may not pass the $I for the device, or the Pointer to the DEVICE
"KRN",8994,470,2,2,1,4,0)
FILE entry corresponding to the device.  ONLY THE DEVICE NAME will work.
"KRN",8994,470,2,3,0)
TIUFLAG^1^^0
"KRN",8994,470,2,3,1,0)
^^4^4^2960826^
"KRN",8994,470,2,3,1,1,0)
This is a flag which tells the print driver to specify a CHART versus WORK
"KRN",8994,470,2,3,1,2,0)
copy of the document.  If it is undefined or its value is 0, then the
"KRN",8994,470,2,3,1,3,0)
printed copy will be marked as a WORK COPY.  If its value is 1, then it
"KRN",8994,470,2,3,1,4,0)
will be marked as a CHART COPY.
"KRN",8994,470,2,"B","TIUDA",1)

"KRN",8994,470,2,"B","TIUFLAG",3)

"KRN",8994,470,2,"B","TIUIO",2)

"KRN",8994,470,3,0)
^^6^6^2960826^
"KRN",8994,470,3,1,0)
This is an error flag/message which will have two '^'-pieces.  The first
"KRN",8994,470,3,2,0)
piece will be a boolean flag indicating whether or not the call failed (0
"KRN",8994,470,3,3,0)
indicates success, while 1 indicates failure).  The second piece is a
"KRN",8994,470,3,4,0)
textual message indicating the nature of the error.  In the event of
"KRN",8994,470,3,5,0)
success, the second piece will describe whether the printout will be for a
"KRN",8994,470,3,6,0)
CHART COPY or a WORK COPY.
"KRN",8994,471,-1)
0^5
"KRN",8994,471,0)
TIU GET DOCUMENT PARAMETERS^DOCPARM^TIUSRVP1^2^S
"KRN",8994,471,1,0)
^^2^2^2960827^^
"KRN",8994,471,1,1,0)
This Remote Procedure returns the parameters by which a given document
"KRN",8994,471,1,2,0)
or document type is to be processed.
"KRN",8994,471,2,0)
^8994.02A^2^2
"KRN",8994,471,2,1,0)
TIUDA^1^^0
"KRN",8994,471,2,1,1,0)
^^2^2^2960827^
"KRN",8994,471,2,1,1,1,0)
This is the record number of the document in the TIU DOCUMENT FILE
"KRN",8994,471,2,1,1,2,0)
(#8925).
"KRN",8994,471,2,2,0)
TIUTYP^1^^0
"KRN",8994,471,2,2,1,0)
^^3^3^2960827^^
"KRN",8994,471,2,2,1,1,0)
This is the record number of the Document Definition in the TIU DOCUMENT
"KRN",8994,471,2,2,1,2,0)
DEFINITION FILE (#8925.1).  e.g., TIUTYP=3 corresponds to the Class
"KRN",8994,471,2,2,1,3,0)
Progress Notes, etc.
"KRN",8994,471,2,"B","TIUDA",1)

"KRN",8994,471,2,"B","TIUTYP",2)

"KRN",8994,471,3,0)
^^12^12^2960827^
"KRN",8994,471,3,1,0)
This call returns an array with just one element (so far).  The string
"KRN",8994,471,3,2,0)
will have the following '^'-delimited pieces:
"KRN",8994,471,3,3,0)
 
"KRN",8994,471,3,4,0)
TIUY(0)= (#.01) DOCUMENT DEFINITION [1P] ^ (#.02) REQUIRE RELEASE
"KRN",8994,471,3,5,0)
         ==>[2S] ^ (#.03) REQUIRE MAS VERIFICATION [3S] ^ (#.04)
"KRN",8994,471,3,6,0)
         ==>REQUIRE AUTHOR TO SIGN [4S] ^ (#.05) WHEN MAY CHART COPY
"KRN",8994,471,3,7,0)
         ==>BE PRINTED [5P] ^ (#.06) ROUTINE PRINT EVENT(S) [6S] ^
"KRN",8994,471,3,8,0)
         ==>(#.07) STAT PRINT EVENT(S) [7S] ^ (#.08) MANUAL PRINT
"KRN",8994,471,3,9,0)
         ==>AFTER ENTRY [8S] ^ (#.09) ALLOW CHART PRINT OUTSIDE MAS
"KRN",8994,471,3,10,0)
         ==>[9S] ^ (#.1) ALLOW >1 RECORDS PER VISIT [10S] ^ (#.11)
"KRN",8994,471,3,11,0)
         ==>ENABLE IRT INTERFACE [11S] ^ (#.12) IRT DEFICIENCY [12P]
"KRN",8994,471,3,12,0)
         ==>^ (#.13) DEFAULT PRINTER [13P] ^
"KRN",8994,498,-1)
0^21
"KRN",8994,498,0)
TIU GET DS URGENCIES^URGENCY^TIUSRVA^2^S
"KRN",8994,498,1,0)
^^1^1^2961129^^^^
"KRN",8994,498,1,1,0)
Returns a set of discharge summary urgencies for use in a long list box.
"KRN",8994,498,3,0)
^^8^8^2961129^^^
"KRN",8994,498,3,1,0)
The array of urgencies are returned in the following format:
"KRN",8994,498,3,2,0)

"KRN",8994,498,3,3,0)
   Y(1) = <internal value> ^ <external value>
"KRN",8994,498,3,4,0)

"KRN",8994,498,3,5,0)

"KRN",8994,498,3,6,0)
Example:
"KRN",8994,498,3,7,0)
   Y(1) = P^priority
"KRN",8994,498,3,8,0)
   Y(2) = R^routine
"KRN",8994,510,-1)
0^20
"KRN",8994,510,0)
TIU AUTHORIZATION^CANDO^TIUSRVA^1^S
"KRN",8994,510,1,0)
^^2^2^2961206^
"KRN",8994,510,1,1,0)
This RPC allows the calling application to evaluate privilege to perform
"KRN",8994,510,1,2,0)
any ASU-mediated action on a TIU document.
"KRN",8994,510,2,0)
^8994.02A^2^2
"KRN",8994,510,2,1,0)
TIUDA^1^^1
"KRN",8994,510,2,1,1,0)
^^1^1^2961206^
"KRN",8994,510,2,1,1,1,0)
This is the record number (IEN) of the document in file 8925.
"KRN",8994,510,2,2,0)
TIUACT^1^^1
"KRN",8994,510,2,2,1,0)
^^3^3^2961206^
"KRN",8994,510,2,2,1,1,0)
This is the ASU ACTION (.01 field from file 8930.8) which is to be
"KRN",8994,510,2,2,1,2,0)
performed by the calling application (e.g., EDIT RECORD, SIGNATURE, COPY,
"KRN",8994,510,2,2,1,3,0)
etc.).  To function appropriately, only valid actions may be passed.
"KRN",8994,510,2,"B","TIUACT",2)

"KRN",8994,510,2,"B","TIUDA",1)

"KRN",8994,510,3,0)
^^6^6^2961206^
"KRN",8994,510,3,1,0)
Boolean Truth value, with explanatory message in second '^'-piece if
"KRN",8994,510,3,2,0)
FALSE.  That is:
"KRN",8994,510,3,3,0)
 
"KRN",8994,510,3,4,0)
When privilege to perform action on document is granted, TIUY=1
"KRN",8994,510,3,5,0)
 
"KRN",8994,510,3,6,0)
When privilege to perform action on document is denied, TIUY=0^Why not
"KRN",8994,568,-1)
0^22
"KRN",8994,568,0)
TIU DOCUMENTS BY CONTEXT^CONTEXT^TIUSRVLO^2^S
"KRN",8994,568,1,0)
^^7^7^2970605^^
"KRN",8994,568,1,1,0)
Returns lists of TIU Documents that satisfy the following search criteria:
"KRN",8994,568,1,2,0)
 
"KRN",8994,568,1,3,0)
1 - signed documents (all)   
"KRN",8994,568,1,4,0)
2 - unsigned documents  
"KRN",8994,568,1,5,0)
3 - uncosigned documents
"KRN",8994,568,1,6,0)
4 - signed documents/author
"KRN",8994,568,1,7,0)
5 - signed documents/date range
"KRN",8994,568,2,0)
^8994.02A^8^8
"KRN",8994,568,2,1,0)
CLASS^1^^1^1
"KRN",8994,568,2,1,1,0)
^^3^3^2970605^
"KRN",8994,568,2,1,1,1,0)
This is a pointer to the Class of TIU DOCUMENTS which the user is
"KRN",8994,568,2,1,1,2,0)
interested in (e.g., 3 for PROGRESS NOTES, 244 for DISCHARGE SUMMARIES,
"KRN",8994,568,2,1,1,3,0)
etc.).
"KRN",8994,568,2,2,0)
CONTEXT^1^^1^2
"KRN",8994,568,2,2,1,0)
^^8^8^2970605^^
"KRN",8994,568,2,2,1,1,0)
This is an integer number which maps the context in which the user wishes
"KRN",8994,568,2,2,1,2,0)
the notes to be returned.  The mapping is as follows:
"KRN",8994,568,2,2,1,3,0)
 
"KRN",8994,568,2,2,1,4,0)
1 - signed documents (all)
"KRN",8994,568,2,2,1,5,0)
2 - unsigned documents  
"KRN",8994,568,2,2,1,6,0)
3 - uncosigned documents
"KRN",8994,568,2,2,1,7,0)
4 - signed documents/author
"KRN",8994,568,2,2,1,8,0)
5 - signed documents/date range
"KRN",8994,568,2,3,0)
DFN^1^^1
"KRN",8994,568,2,3,1,0)
^^1^1^2970605^
"KRN",8994,568,2,3,1,1,0)
Pointer to Patient File (#2).
"KRN",8994,568,2,4,0)
EARLY^1^^0
"KRN",8994,568,2,4,1,0)
^^2^2^2970605^
"KRN",8994,568,2,4,1,1,0)
EARLY DATE/TIME in regular FileMan format for the inclusive lower bound on
"KRN",8994,568,2,4,1,2,0)
the search.
"KRN",8994,568,2,5,0)
LATE^1^^0^5
"KRN",8994,568,2,5,1,0)
^^2^2^2970605^
"KRN",8994,568,2,5,1,1,0)
LATE DATE/TIME in regular FileMan format for the inclusive upper bound on
"KRN",8994,568,2,5,1,2,0)
the search.
"KRN",8994,568,2,6,0)
PERSON^1^^0^6
"KRN",8994,568,2,6,1,0)
^^2^2^2970605^
"KRN",8994,568,2,6,1,1,0)
This is a pointer to the NEW PERSON FILE (#200) for the author of the
"KRN",8994,568,2,6,1,2,0)
documents to be retrieved.
"KRN",8994,568,2,7,0)
OCCLIM^1^^0^7
"KRN",8994,568,2,7,1,0)
^^2^2^2970605^
"KRN",8994,568,2,7,1,1,0)
This is the maximum number of documents to be retrieved in the current
"KRN",8994,568,2,7,1,2,0)
query.
"KRN",8994,568,2,8,0)
SEQUENCE^1^^0^8
"KRN",8994,568,2,8,1,0)
^^3^3^2970605^
"KRN",8994,568,2,8,1,1,0)
This is the sequence by reference date/time (A=ascending (OLDEST FIRST),
"KRN",8994,568,2,8,1,2,0)
D=descending (NEWEST FIRST)) in which the user would like the list
"KRN",8994,568,2,8,1,3,0)
returned.
"KRN",8994,568,2,"B","CLASS",1)

"KRN",8994,568,2,"B","CONTEXT",2)

"KRN",8994,568,2,"B","DFN",3)

"KRN",8994,568,2,"B","EARLY",4)

"KRN",8994,568,2,"B","LATE",5)

"KRN",8994,568,2,"B","OCCLIM",7)

"KRN",8994,568,2,"B","PERSON",6)

"KRN",8994,568,2,"B","SEQUENCE",8)

"KRN",8994,568,2,"PARAMSEQ",1,1)

"KRN",8994,568,2,"PARAMSEQ",2,2)

"KRN",8994,568,2,"PARAMSEQ",5,5)

"KRN",8994,568,2,"PARAMSEQ",6,6)

"KRN",8994,568,2,"PARAMSEQ",7,7)

"KRN",8994,568,2,"PARAMSEQ",8,8)

"KRN",8994,568,3,0)
^^5^5^2970605^^
"KRN",8994,568,3,1,0)
The return array has elements with the following positional values:
"KRN",8994,568,3,2,0)
 
"KRN",8994,568,3,3,0)
IEN^REFERENCE DATE/TIME (INT)^PATIENT NAME (LAST I/LAST 4)^AUTHOR
"KRN",8994,568,3,4,0)
   (INT;EXT)^HOSPITAL LOCATION^SIGNATURE STATUS^Visit Date/Time^
"KRN",8994,568,3,5,0)
   Discharge Date/time
"KRN",8994,573,-1)
0^23
"KRN",8994,573,0)
TIU NOTES 16 BIT^NOTES^TIUSRVLC^4^S^^^1
"KRN",8994,573,1,0)
^^2^2^2970618^^^^
"KRN",8994,573,1,1,0)
This API gets lists of progress notes for a patient, with optional 
"KRN",8994,573,1,2,0)
parameters for STATUS, EARLY DATE/TIME, and LATE DATE/TIME.
"KRN",8994,573,2,0)
^8994.02A^1^1
"KRN",8994,573,2,1,0)
DFN^1^20^1
"KRN",8994,573,2,1,1,0)
^^1^1^2970609^^^^
"KRN",8994,573,2,1,1,1,0)
This is the pointer to the patient file.
"KRN",8994,573,2,"B","DFN",1)

"KRN",8994,574,-1)
0^24
"KRN",8994,574,0)
TIU WHICH SIGNATURE ACTION^WHATACT^TIUSRVA^1^S
"KRN",8994,574,1,0)
^^3^3^2970613^^
"KRN",8994,574,1,1,0)
This RPC infers whether the user is trying to sign or cosign the docuement
"KRN",8994,574,1,2,0)
in question, and indicates which ASU ACTION the GUI should pass to the TIU
"KRN",8994,574,1,3,0)
AUTHORIZATION RPC.
"KRN",8994,574,2,0)
^8994.02A^1^1
"KRN",8994,574,2,1,0)
TIUDA^1^^1
"KRN",8994,574,2,1,1,0)
^^1^1^2970609^
"KRN",8994,574,2,1,1,1,0)
This is the record number of the TIU Document in file 8925.
"KRN",8994,574,2,"B","TIUDA",1)

"KRN",8994,574,3,0)
^^2^2^2970609^
"KRN",8994,574,3,1,0)
Returns a single valued string, indicating whether the client application
"KRN",8994,574,3,2,0)
should pass SIGNATURE or COSIGNATURE to the TIU AUTHORIZATION RPC. 
"OER",193,0)
193^TIU
"OER",193,1,0)
^100.9951PA^9^9
"OER",193,1,1,0)
2783
"OER",193,1,1,1,0)
^100.99511PA^2^2
"OER",193,1,1,1,1,0)
3486
"OER",193,1,1,1,2,0)
3487
"OER",193,1,2,0)
2772
"OER",193,1,2,1,0)
^100.99511PA^4^4
"OER",193,1,2,1,1,0)
3488
"OER",193,1,2,1,2,0)
3489
"OER",193,1,2,1,3,0)
3490
"OER",193,1,2,1,4,0)
3491
"OER",193,1,3,0)
2764
"OER",193,1,3,1,0)
^100.99511PA^2^2
"OER",193,1,3,1,1,0)
3486
"OER",193,1,3,1,2,0)
3487
"OER",193,1,4,0)
2765
"OER",193,1,4,1,0)
^100.99511PA^2^2
"OER",193,1,4,1,1,0)
3486
"OER",193,1,4,1,2,0)
3487
"OER",193,1,5,0)
2761
"OER",193,1,5,1,0)
^100.99511PA^2^2
"OER",193,1,5,1,1,0)
3486
"OER",193,1,5,1,2,0)
3487
"OER",193,1,6,0)
2769
"OER",193,1,6,1,0)
^100.99511PA^1^1
"OER",193,1,6,1,1,0)
3486
"OER",193,1,7,0)
2780
"OER",193,1,7,1,0)
^100.99511PA^1^1
"OER",193,1,7,1,1,0)
3486
"OER",193,1,8,0)
2781
"OER",193,1,8,1,0)
^100.99511PA^1^1
"OER",193,1,8,1,1,0)
3486
"OER",193,1,9,0)
2771
"OER",193,1,9,1,0)
^100.99511PA^2^2
"OER",193,1,9,1,1,0)
3486
"OER",193,1,9,1,2,0)
3487
"ORD",2,3.6)
3.6;2;1;;BUL^XPDTA1;;BULE1^XPDIA1;;;BULDEL^XPDIA1
"ORD",2,3.6,0)
BULLETIN
"ORD",3,19.1)
19.1;3;1;;KEY^XPDTA1;;;;;KEYDEL^XPDIA1
"ORD",3,19.1,0)
SECURITY KEY
"ORD",4,.5)
.5;4;;;EDEOUT^DIFROMSO(.5,DA,"",XPDA);FPRE^DIFROMSI(.5,"",XPDA);EPRE^DIFROMSI(.5,DA,"",XPDA,"",OLDA);;EPOST^DIFROMSI(.5,DA,"",XPDA)
"ORD",4,.5,0)
FUNCTION
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",9,.84)
.84;9;;;EDEOUT^DIFROMSO(.84,DA,"",XPDA);FPRE^DIFROMSI(.84,"",XPDA);EPRE^DIFROMSI(.84,DA,"",XPDA,"",OLDA);;EPOST^DIFROMSI(.84,DA,"",XPDA);DEL^DIFROMSK(.84,"",%)
"ORD",9,.84,0)
DIALOG
"ORD",15,101)
101;15;;;PRO^XPDTA;PROF1^XPDIA;PROE1^XPDIA;PROF2^XPDIA;;PRODEL^XPDIA
"ORD",15,101,0)
PROTOCOL
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",193,-1)
1^1
"PKG",193,0)
TEXT INTEGRATION UTILITIES^TIU^Text Integration Utilities 
"PKG",193,1,0)
^^3^3^2950217^
"PKG",193,1,1,0)
This package is designed to manage the capture, retention, retrieval and 
"PKG",193,1,2,0)
processing of any patient-visit-oriented document.  Its first version will 
"PKG",193,1,3,0)
support Discharge Summaries, Progress Notes, and Consult Results.
"PKG",193,5)
SALT LAKE ISC
"PKG",193,7)
^^I
"PKG",193,20,0)
^9.402P^^
"PKG",193,22,0)
^9.49I^1^1
"PKG",193,22,1,0)
1.0^2970620
"PKG",193,22,1,1,0)
^^28^28^2970620
"PKG",193,22,1,1,1,0)
TEXT INTEGRATION UTILITIES v1.0
"PKG",193,22,1,1,2,0)
 
"PKG",193,22,1,1,3,0)
Text Integration Utilities (TIU) is a collection of software tools that
"PKG",193,22,1,1,4,0)
manage clinical documents in a standardized way. The initial release of
"PKG",193,22,1,1,5,0)
Version 1.0 includes Discharge Summary and Progress Notes. TIU replaces
"PKG",193,22,1,1,6,0)
the previous versions of these DHCP packages, while incorporating all of
"PKG",193,22,1,1,7,0)
the functionality of them.
"PKG",193,22,1,1,8,0)
 
"PKG",193,22,1,1,9,0)
Benefits of TIU
"PKG",193,22,1,1,10,0)
 
"PKG",193,22,1,1,11,0)
+ Ability to view and manipulate clinical documents from a single program
"PKG",193,22,1,1,12,0)
+ Upload capability for many types of documents
"PKG",193,22,1,1,13,0)
+ Improved searching and retrieving capabilities across documents
"PKG",193,22,1,1,14,0)
+ Less duplication of effort for clinicians, managers, and other staff
"PKG",193,22,1,1,15,0)
+ Boilerplate support
"PKG",193,22,1,1,16,0)
+ Links to the Computerized Patient Record System (CPRS), Authorization/
"PKG",193,22,1,1,17,0)
  Subscription Utility (ASU), Incomplete Record Tracking (IRT), and
"PKG",193,22,1,1,18,0)
  interfacility document transfer
"PKG",193,22,1,1,19,0)
 
"PKG",193,22,1,1,20,0)
Costs
"PKG",193,22,1,1,21,0)
 
"PKG",193,22,1,1,22,0)
+ Planning your Document and User Class hierarchies.
"PKG",193,22,1,1,23,0)
+ Setting up the Document hierarchy so that your current Progress Notes
"PKG",193,22,1,1,24,0)
  can be converted into the new TIU structure
"PKG",193,22,1,1,25,0)
+ Setting up and populating the User Classes (ASU)
"PKG",193,22,1,1,26,0)
+ Setting up the Upload Utilities and other TIU parameters
"PKG",193,22,1,1,27,0)
+ Converting existing progress notes and discharge summaries to TIU
"PKG",193,22,1,1,28,0)
+ Switching Progress Notes and Discharge Summary menus to TIU menus
"PKG",193,22,1,"PAH",0)
^9.4901^1^1
"PKG",193,22,1,"PAH",1,0)
1^2970312
"PKG",193,22,1,"PAH",1,1,0)
^^37^37^2970312
"PKG",193,22,1,"PAH",1,1,1,0)
PATCH 1 (TEST v2):
"PKG",193,22,1,"PAH",1,1,2,0)
 
"PKG",193,22,1,"PAH",1,1,3,0)
This patch fixes a number of problems with the clinician's review screen
"PKG",193,22,1,"PAH",1,1,4,0)
reported by West Palm Beach:
"PKG",193,22,1,"PAH",1,1,5,0)
 
"PKG",193,22,1,"PAH",1,1,6,0)
1. The Visit search category will no longer ask for a patient within the
"PKG",193,22,1,"PAH",1,1,7,0)
context of OE/RR,
"PKG",193,22,1,"PAH",1,1,8,0)
 
"PKG",193,22,1,"PAH",1,1,9,0)
2. The initial date range for the Review Progress Notes Protocol will now
"PKG",193,22,1,"PAH",1,1,10,0)
be 180 days for Outpatients, while remaining 30 days for current
"PKG",193,22,1,"PAH",1,1,11,0)
inpatients,
"PKG",193,22,1,"PAH",1,1,12,0)
 
"PKG",193,22,1,"PAH",1,1,13,0)
3. The use of '^' during the query dialog will now uniformly retreat one
"PKG",193,22,1,"PAH",1,1,14,0)
prompt,
"PKG",193,22,1,"PAH",1,1,15,0)
 
"PKG",193,22,1,"PAH",1,1,16,0)
4. When ALL categories are selected w/in the context of OE/RR, the search
"PKG",193,22,1,"PAH",1,1,17,0)
will be optimized to find all selected titles within the appropriate class
"PKG",193,22,1,"PAH",1,1,18,0)
for the CURRENT PATIENT, selected statuses, and selected date range,
"PKG",193,22,1,"PAH",1,1,19,0)
 
"PKG",193,22,1,"PAH",1,1,20,0)
5. The Review Notes By Patient Option has been optimized by avoiding an
"PKG",193,22,1,"PAH",1,1,21,0)
unnecessary gather/sort step,
"PKG",193,22,1,"PAH",1,1,22,0)
 
"PKG",193,22,1,"PAH",1,1,23,0)
6. All of the review screen options (i.e., clinician's, MRT's, MGR's,
"PKG",193,22,1,"PAH",1,1,24,0)
List Notes by Title, and Search by Patient and Title) have been optimized
"PKG",193,22,1,"PAH",1,1,25,0)
by the removal of calls to EN^DIQ1 for resolution of data fields during
"PKG",193,22,1,"PAH",1,1,26,0)
list building, and
"PKG",193,22,1,"PAH",1,1,27,0)
 
"PKG",193,22,1,"PAH",1,1,28,0)
7. The Review Progress Notes Protocol will now make direct use of the
"PKG",193,22,1,"PAH",1,1,29,0)
APTCL cross-reference during it's initial build, ignoring sort field
"PKG",193,22,1,"PAH",1,1,30,0)
preferences, to minimize the overhead of fetching the initial list from OE
"PKG",193,22,1,"PAH",1,1,31,0)
2.5.
"PKG",193,22,1,"PAH",1,1,32,0)
 
"PKG",193,22,1,"PAH",1,1,33,0)
Installation Instructions:
"PKG",193,22,1,"PAH",1,1,34,0)
==========================
"PKG",193,22,1,"PAH",1,1,35,0)
Disable all allocated TIU options, along with the protocols TIU PN OE/RR
"PKG",193,22,1,"PAH",1,1,36,0)
INTERFACE, TIU DS OE/RR INTERFACE, and TIU INTEGRATED OE/RR INTERFACE,
"PKG",193,22,1,"PAH",1,1,37,0)
before applying this patch.
"PKG",193,22,1,"PAH","B",1,1)

"PKG",193,"DEV")
JER/SLC
"PKG",193,"VERSION")
1.0
"PRE")
TIUENV
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
211
"RTN","TIUADD")
0^1^B28738072
"RTN","TIUADD",1,0)
TIUADD ; SLC/JER - Enter/Edit an addendum online ;11/2/93  09:09
"RTN","TIUADD",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUADD",3,0)
ADDENDUM(TIUDA,TIUADD,TIUCHNG,TIUNOASK) ; Control branching
"RTN","TIUADD",4,0)
 N TIUY,TIUEDIT,TIUDADD K ^TMP("TIUADD",$J)
"RTN","TIUADD",5,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUADD",6,0)
 D ADDLIST(.TIUY,TIUDA)
"RTN","TIUADD",7,0)
 I +$D(TIUY),+$D(@TIUY) D  G:$D(DIROUT) ADDENX
"RTN","TIUADD",8,0)
 . W !
"RTN","TIUADD",9,0)
 . S TIUEDIT=+$$READ^TIUU("YO","Do you wish to EDIT an existing ADDENDUM","YES")
"RTN","TIUADD",10,0)
 . I +TIUEDIT D EDIT(TIUY)
"RTN","TIUADD",11,0)
 G:+$G(TIUADD) ADDENX
"RTN","TIUADD",12,0)
 I +$P($G(^TIU(8925,+TIUDA,0)),U,6)'>0 D  Q:$D(DIROUT)
"RTN","TIUADD",13,0)
 . S TIUDADD=$$CANDO^TIULP(TIUDA,"MAKE ADDENDUM")
"RTN","TIUADD",14,0)
 . I '+TIUDADD D  Q
"RTN","TIUADD",15,0)
 . . W !,$C(7),$P(TIUDADD,U,2)
"RTN","TIUADD",16,0)
 . . I '$D(VALMAR),$$READ^TIUU("EA","Press RETURN to continue...")
"RTN","TIUADD",17,0)
 . I +TIUDADD D  Q:$D(DIROUT)
"RTN","TIUADD",18,0)
 . . I +$G(TIUNOASK)'>0,'+$$READ^TIUU("YO","Do you wish to ADD a new ADDENDUM","NO") Q
"RTN","TIUADD",19,0)
 . . D ADD(TIUDA,.TIUCHNG)
"RTN","TIUADD",20,0)
 I +$P(^TIU(8925,+TIUDA,0),U,6)>0 D
"RTN","TIUADD",21,0)
 . W !!,$C(7)," You may not make an ADDENDUM to an ADDENDUM.",!
"RTN","TIUADD",22,0)
ADDENX ;Exit for ADDENDUM
"RTN","TIUADD",23,0)
 K ^TMP("TIUADD",$J)
"RTN","TIUADD",24,0)
 ;I $D(VALMAR),$$READ^TIUU("EA","Press RETURN to continue...")
"RTN","TIUADD",25,0)
 Q
"RTN","TIUADD",26,0)
EDIT(TIUY) ;Edit existing addendum
"RTN","TIUADD",27,0)
 N TIUED,TIUDA,DA,DIC,DIE,TIUDAUTH,TIUPT,TIURDOC,DR,X,Y,TIUCNT
"RTN","TIUADD",28,0)
 S TIUCNT=0 F  S TIUCNT=$O(@TIUY@(TIUCNT)) Q:TIUCNT'>0  D  Q:$D(DIROUT)
"RTN","TIUADD",29,0)
 . N TIUQUIT
"RTN","TIUADD",30,0)
 . S TIUDA=+$G(@TIUY@(TIUCNT))
"RTN","TIUADD",31,0)
 . D GETTIU^TIULD(.TIU,+TIUDA)
"RTN","TIUADD",32,0)
 . W !!,"Displaying Addendum #",TIUCNT
"RTN","TIUADD",33,0)
 . D EN^VALM("TIU EDIT ADDENDUM") Q:$D(DIROUT)
"RTN","TIUADD",34,0)
 Q
"RTN","TIUADD",35,0)
EDADD ; Edit action
"RTN","TIUADD",36,0)
 N DA,DIC,DIE,DLAYGO,DIWESUB,TIUDAUTH,TIUMD,TIUPT,TIUECOS,TIUXINI,DR,X,Y
"RTN","TIUADD",37,0)
 N TIUDAD,TIUD0,TIUD12,TIUD13,TIUD14,TIUQUIT,TIUTYP,TIUT0,TIU
"RTN","TIUADD",38,0)
 K TIUBY
"RTN","TIUADD",39,0)
 S TIUCANED=$$CANDO^TIULP(TIUDA,"EDIT RECORD")
"RTN","TIUADD",40,0)
 I +TIUCANED'>0 D  Q
"RTN","TIUADD",41,0)
 . W !!,$P(TIUCANED,U,2)
"RTN","TIUADD",42,0)
 . I $$READ^TIUU("EA","Press RETURN to continue...") ; pause
"RTN","TIUADD",43,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD12=$G(^(12)),TIUD13=$G(^(13))
"RTN","TIUADD",44,0)
 S TIUD14=$G(^TIU(8925,+TIUDA,14))
"RTN","TIUADD",45,0)
 S TIUDAD=+$P($G(^TIU(8925,+TIUDA,0)),U,6)
"RTN","TIUADD",46,0)
 S DA=+TIUDA
"RTN","TIUADD",47,0)
 W !!,"Editing ADDENDUM"
"RTN","TIUADD",48,0)
 S TIUTYP=+$G(^TIU(8925,+DA,0)),TIUT0=$G(^TIU(8925.1,+TIUTYP,0))
"RTN","TIUADD",49,0)
 S TIUTYP(1)="1^"_+TIUTYP_U_$P(TIUT0,U,3)_U
"RTN","TIUADD",50,0)
 S TIUMD=$$ISA^USRLM(+$G(DUZ),"PROVIDER")
"RTN","TIUADD",51,0)
 S TIUPT=$P($G(^DPT(+$P(TIUD0,U,2),0)),U)
"RTN","TIUADD",52,0)
 S DIWESUB="Patient: "_TIUPT
"RTN","TIUADD",53,0)
 S DR=$$GETTMPL^TIUEDI1(+$P(^TIU(8925,+TIUDAD,0),U))
"RTN","TIUADD",54,0)
 D GETTIU^TIULD(.TIU,TIUDAD)
"RTN","TIUADD",55,0)
 D ADDDIE(DA,DR,TIUDAD) I '$D(^TIU(8925,+DA,0)) S TIUCHNG=0 Q
"RTN","TIUADD",56,0)
 S DR=".05///"_$$STATUS^TIULC(DA)_";.13////"_$P($G(TIU("VSTR")),";",3)_";1211////"_$P($G(TIU("VLOC")),U),DIE=8925 D ^DIE
"RTN","TIUADD",57,0)
 S TIUCHNG=2_"^"_+$G(DA)
"RTN","TIUADD",58,0)
 I +$P(TIUPRM0,U,2) D
"RTN","TIUADD",59,0)
 . N TIUSIGN S TIUSIGN=$$CANDO^TIULP(DA,"SIGNATURE")
"RTN","TIUADD",60,0)
 . I '+TIUSIGN D  Q
"RTN","TIUADD",61,0)
 . . I +$$ISA^USRLM(+$G(DUZ),"TRANSCRIPTIONIST") Q
"RTN","TIUADD",62,0)
 . . W !,$C(7),$P(TIUSIGN,U,2)
"RTN","TIUADD",63,0)
 . . I '$D(VALMAR),$$READ^TIUU("EA","Press RETURN to continue...")
"RTN","TIUADD",64,0)
 . I +TIUSIGN D EDSIG^TIURS(DA)
"RTN","TIUADD",65,0)
 . I +$P($G(TIUDPRM(0)),U,8) D PRINT^TIUEPRNT(DA)
"RTN","TIUADD",66,0)
 I '$G(TIUQUIT),$D(DA) D SENDADD^TIUALRT(DA)
"RTN","TIUADD",67,0)
 I $G(TIUQUIT) D DELETE^TIUEDIT(DA) S TIUCHNG=0 Q
"RTN","TIUADD",68,0)
 Q
"RTN","TIUADD",69,0)
ADD(TIUDA,TIUCHNG) ;Add new addendum
"RTN","TIUADD",70,0)
 N DA,DIC,DIE,DLAYGO,DIWESUB,DR,TIUDAUTH,TIUMD,TIUPT,TIUECOS,TIUXINI,X,Y
"RTN","TIUADD",71,0)
 N TIUD0,TIUDV,TIUD12,TIUD13,TIUD14,TIUTYP,TIUT0,TIU,TIUFPRIV,TIUQUIT
"RTN","TIUADD",72,0)
 S TIUFPRIV=1
"RTN","TIUADD",73,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD12=$G(^(12)),TIUD13=$G(^(13))
"RTN","TIUADD",74,0)
 S TIUD14=$G(^TIU(8925,+TIUDA,14)),TIUDV=$P(TIUD0,U,3)
"RTN","TIUADD",75,0)
 S (DIC,DLAYGO)=8925,DIC(0)="L",X=""""_"`"_$$ADDPTR_""""
"RTN","TIUADD",76,0)
 D ^DIC
"RTN","TIUADD",77,0)
 I +Y>0 S DA=+Y D
"RTN","TIUADD",78,0)
 . W !!,"Adding ADDENDUM"
"RTN","TIUADD",79,0)
 . S DIE="^TIU(8925,"
"RTN","TIUADD",80,0)
 . S DR=".03////"_TIUDV_";.04////"_+$$ADDCLASS_";.05////3;.06////"_TIUDA
"RTN","TIUADD",81,0)
 . D ^DIE
"RTN","TIUADD",82,0)
 . S TIUTYP=+$G(^TIU(8925,+DA,0)),TIUT0=$G(^TIU(8925.1,+TIUTYP,0))
"RTN","TIUADD",83,0)
 . S TIUTYP(1)="1^"_+TIUTYP_U_$P(TIUT0,U,3)_U
"RTN","TIUADD",84,0)
 . S TIUMD=$$ISA^USRLM(+$G(DUZ),"PROVIDER")
"RTN","TIUADD",85,0)
 . S TIUPT=$P($G(^DPT(+$P(TIUD0,U,2),0)),U)
"RTN","TIUADD",86,0)
 . S DIWESUB="Patient: "_TIUPT
"RTN","TIUADD",87,0)
 . S DR=$$GETTMPL^TIUEDI1(+$P(^TIU(8925,+TIUDA,0),U))
"RTN","TIUADD",88,0)
 . D GETTIU^TIULD(.TIU,TIUDA)
"RTN","TIUADD",89,0)
 . D ADDDIE(DA,DR,TIUDA) I '$D(^TIU(8925,+DA,0)) S TIUCHNG=0 Q
"RTN","TIUADD",90,0)
 . S DR=".05///"_$$STATUS^TIULC(DA),DIE=8925 D ^DIE
"RTN","TIUADD",91,0)
 . S TIUCHNG=2_"^"_+$G(DA)
"RTN","TIUADD",92,0)
 . I +$P(TIUPRM0,U,2) D
"RTN","TIUADD",93,0)
 . . N TIUSIGN S TIUSIGN=$$CANDO^TIULP(DA,"SIGNATURE")
"RTN","TIUADD",94,0)
 . . I '+TIUSIGN D  Q
"RTN","TIUADD",95,0)
 . . . W !,$C(7),$P(TIUSIGN,U,2)
"RTN","TIUADD",96,0)
 . . . I '$D(VALMAR),$$READ^TIUU("EA","Press RETURN to continue...")
"RTN","TIUADD",97,0)
 . . I +TIUSIGN D EDSIG^TIURS(DA)
"RTN","TIUADD",98,0)
 . I +$P($G(TIUDPRM(0)),U,8) D PRINT^TIUEPRNT(DA)
"RTN","TIUADD",99,0)
 . ; I '$G(TIUQUIT),$D(DA) D SENDADD^TIUALRT(DA)
"RTN","TIUADD",100,0)
 . I $G(TIUQUIT) D DELETE^TIUEDIT(DA) S TIUCHNG=0 Q
"RTN","TIUADD",101,0)
 Q
"RTN","TIUADD",102,0)
ADDPTR() ; Get record # of ADDENDUM in 8925.1
"RTN","TIUADD",103,0)
 N DIC,X,Y,TIUFPRIV S TIUFPRIV=1
"RTN","TIUADD",104,0)
 S DIC=8925.1,DIC(0)="FMX",X="ADDENDUM"
"RTN","TIUADD",105,0)
 S DIC("S")="I $P($G(^TIU(8925.1,+Y,0)),U,4)=""DOC"""
"RTN","TIUADD",106,0)
 D ^DIC K DIC("S")
"RTN","TIUADD",107,0)
 Q +Y
"RTN","TIUADD",108,0)
ADDCLASS() ; Get record # of ADDENDUM Document Class in 8925.1
"RTN","TIUADD",109,0)
 N DIC,X,Y,TIUFPRIV S TIUFPRIV=1
"RTN","TIUADD",110,0)
 S DIC=8925.1,DIC(0)="FMX",X="ADDENDUM"
"RTN","TIUADD",111,0)
 S DIC("S")="I $P($G(^TIU(8925.1,+Y,0)),U,4)=""DC"""
"RTN","TIUADD",112,0)
 D ^DIC K DIC("S")
"RTN","TIUADD",113,0)
 Q +Y
"RTN","TIUADD",114,0)
ADDDIE(DA,DR,TIUDA) ; Call DIE to conduct dialog
"RTN","TIUADD",115,0)
 N TIUREL,TIUD0,TIUD12,TIUD13,TIUD14,DTOUT,Y,DWPK
"RTN","TIUADD",116,0)
 S DIE=8925 D ^DIE
"RTN","TIUADD",117,0)
 I $D(Y)!($D(DTOUT)) S TIUQUIT=1
"RTN","TIUADD",118,0)
 D:+$G(TIUQUIT) SEND^TIUALRT(DA)
"RTN","TIUADD",119,0)
 I '+$G(TIUQUIT) D
"RTN","TIUADD",120,0)
 . D TEXTEDIT^TIUEDIT(DA)
"RTN","TIUADD",121,0)
 . I $$EMPTYDOC^TIULF(DA) D DELETE^TIUEDIT(DA,0) Q
"RTN","TIUADD",122,0)
 . S TIUD0=$G(^TIU(8925,+DA,0)),TIUD12=$G(^(12)),TIUD13=$G(^(13))
"RTN","TIUADD",123,0)
 . S TIUD14=$G(^TIU(8925,+DA,14))
"RTN","TIUADD",124,0)
 . ; Execute RELEASE Logic
"RTN","TIUADD",125,0)
 . D RELEASE^TIUT(DA) S TIUREL=""
"RTN","TIUADD",126,0)
 . ; Execute VERIFY Logic
"RTN","TIUADD",127,0)
 . D VERIFY^TIUT(DA)
"RTN","TIUADD",128,0)
 Q
"RTN","TIUADD",129,0)
ADDLIST(Y,TIUDA) ; Get list of addenda for a record
"RTN","TIUADD",130,0)
 N TIUI,TIUCNT S (TIUCNT,TIUI)=0 K ^TMP("TIUADD",$J)
"RTN","TIUADD",131,0)
 F  S TIUI=$O(^TIU(8925,"DAD",TIUDA,TIUI)) Q:+TIUI'>0  D
"RTN","TIUADD",132,0)
 . Q:+$$ISADDNDM^TIULC1(TIUI)'>0
"RTN","TIUADD",133,0)
 . Q:+$$CANDO^TIULP(TIUI,"EDIT RECORD")'>0
"RTN","TIUADD",134,0)
 . S TIUCNT=TIUCNT+1,^TMP("TIUADD",$J,TIUCNT)=TIUI
"RTN","TIUADD",135,0)
 I $D(^TMP("TIUADD",$J)) S Y=$NA(^TMP("TIUADD",$J))
"RTN","TIUADD",136,0)
 Q
"RTN","TIUALRT")
0^2^B24621402
"RTN","TIUALRT",1,0)
TIUALRT ; SLC/JER - Notify Author and Attending. ;1/20/95  10:05
"RTN","TIUALRT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUALRT",3,0)
SEND(DA,OVERDUE) ; Generate "available for signature" alert
"RTN","TIUALRT",4,0)
 N TIU0,TIU12,TIU13,TIU14,TIU15,TIUESNR,TIUPNM,TIUECSNR,TIUSIG,TIUDPRM
"RTN","TIUALRT",5,0)
 N TIUCOSG,TIUEDT,TIUSSN,TIU,XQA,XQAKILL,XQAMSG,XQAROU,XQAID,XQAFLG
"RTN","TIUALRT",6,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUALRT",7,0)
 D ALERTDEL(DA)
"RTN","TIUALRT",8,0)
 S TIU0=$G(^TIU(8925,+DA,0)),TIU12=$G(^(12)),TIU13=$G(^(13))
"RTN","TIUALRT",9,0)
 S TIU14=$G(^TIU(8925,+DA,14)),TIU15=$G(^(15))
"RTN","TIUALRT",10,0)
 D DOCPRM^TIULC1(+TIU0,.TIUDPRM,DA)
"RTN","TIUALRT",11,0)
 ; Quit if notifications not enabled
"RTN","TIUALRT",12,0)
 I '$D(TIUDPRM(0)) Q
"RTN","TIUALRT",13,0)
 I '+$P(TIUPRM1,U,7)!(+$P(TIU12,U)<+$P(TIUPRM1,U,7)) Q
"RTN","TIUALRT",14,0)
 I +$P($G(TIUDPRM(0)),U,2),'+$P(TIU13,U,4) Q  ; not released
"RTN","TIUALRT",15,0)
 ; If Verification required, and not verified, don't send
"RTN","TIUALRT",16,0)
 I +$$REQVER^TIULC(DA,+$P($G(TIUDPRM(0)),U,3)),'+$P(TIU13,U,5) Q
"RTN","TIUALRT",17,0)
 ; If OE/RR v3 notifications are implemented, use that API
"RTN","TIUALRT",18,0)
 ; Otherwise, set up for call to XQALERT directly
"RTN","TIUALRT",19,0)
 S TIUPNM=$E($P($G(^DPT(+$P(TIU0,U,2),0)),U),1,9)
"RTN","TIUALRT",20,0)
 S TIUTYP=$$PNAME^TIULC1(+$G(TIU0))
"RTN","TIUALRT",21,0)
 S TIUEDT=$$DATE^TIULS($P(TIU0,U,7))
"RTN","TIUALRT",22,0)
 S TIUESNR=$P(TIU12,U,4),TIUSIG=$P(TIU15,U)
"RTN","TIUALRT",23,0)
 S TIUECSNR=$P(TIU12,U,8),TIUCOSG=$P(TIU15,U,7)
"RTN","TIUALRT",24,0)
 D PATVADPT^TIULV(.TIU,+$P(TIU0,U,2)) ;Used to get SSN. Date not important.
"RTN","TIUALRT",25,0)
 S TIUSSN=$E(TIUPNM,1)_$P($G(TIU("SSN")),"-",3)
"RTN","TIUALRT",26,0)
 ; If first signature required and the expected signer is authorized
"RTN","TIUALRT",27,0)
 ; to sign this record, and the record is not yet signed
"RTN","TIUALRT",28,0)
 ; I '+$G(TIUSIG),(+TIUESNR>0),(+$P(TIUDPRM(0),U,4)>0),(DUZ'=TIUESNR) S XQA(TIUESNR)=""
"RTN","TIUALRT",29,0)
 I '+$G(TIUSIG),(+TIUESNR>0),(+$P(TIUDPRM(0),U,4)>0) S XQA(TIUESNR)="" ; Set AUTHOR as recipient
"RTN","TIUALRT",30,0)
 ; If the record requires cosignature, and is not yet cosigned
"RTN","TIUALRT",31,0)
 ; Set Expected Cosigner as recipient
"RTN","TIUALRT",32,0)
 I TIUECSNR]"",(+$G(TIUCOSG)'>0),(DUZ'=TIUECSNR) D
"RTN","TIUALRT",33,0)
 . ; For Progress Notes, defer alerting Expected Cosigner 'til AUTHOR
"RTN","TIUALRT",34,0)
 . ; has signed
"RTN","TIUALRT",35,0)
 . I +$$ISPN^TIULX(+$G(^TIU(8925,+DA,0))),'+$G(TIUSIG) Q
"RTN","TIUALRT",36,0)
 . S XQA(TIUECSNR)=""
"RTN","TIUALRT",37,0)
 ; If additional signers have been designated, alert them too
"RTN","TIUALRT",38,0)
 I +$O(^TIU(8925.7,"B",DA,0)) D
"RTN","TIUALRT",39,0)
 . N TIUXTRA,TIUI D XTRASGNR^TIULG(.TIUXTRA,DA) Q:+$D(TIUXTRA)'>9
"RTN","TIUALRT",40,0)
 . S TIUI=0 F  S TIUI=$O(TIUXTRA(TIUI)) Q:+TIUI'>0  S XQA(TIUI)=""
"RTN","TIUALRT",41,0)
 Q:$D(XQA)'>9
"RTN","TIUALRT",42,0)
 S XQAID="TIU"_+DA
"RTN","TIUALRT",43,0)
 S XQAMSG=TIUPNM_" ("_TIUSSN_"): "_$S($P(TIU0,U,9)="P":"STAT ",1:"")_TIUTYP
"RTN","TIUALRT",44,0)
 I +$G(OVERDUE) S XQAMSG=XQAMSG_" OVERDUE for signature." G ENDMSG
"RTN","TIUALRT",45,0)
 ;If the expected signer is authorized to sign, and the signature is not
"RTN","TIUALRT",46,0)
 ;yet obtained, and cosignature is required, then include signature
"RTN","TIUALRT",47,0)
 ;status in message.
"RTN","TIUALRT",48,0)
 ;. I '+TIUSIG,'+TIUCOSG S XQAMSG=XQAMSG_" unsigned & uncosigned." Q
"RTN","TIUALRT",49,0)
 ;. I +TIUSIG,'+TIUCOSG S XQAMSG=XQAMSG_" signed & uncosigned." Q
"RTN","TIUALRT",50,0)
 S XQAMSG=XQAMSG_" available for signature."
"RTN","TIUALRT",51,0)
ENDMSG ;
"RTN","TIUALRT",52,0)
 S XQAROU="ACT^TIUALRT",XQADATA=+DA_U
"RTN","TIUALRT",53,0)
 D SETUP^XQALERT
"RTN","TIUALRT",54,0)
 Q
"RTN","TIUALRT",55,0)
ACT ; Act on alerts
"RTN","TIUALRT",56,0)
 N TIUQUIK,TIUDA,TIUPRM0,TIUPRM1,TIUPRM3 S TIUQUIK=1 K XQAKILL
"RTN","TIUALRT",57,0)
 S TIUDA=$P(XQADATA,U)
"RTN","TIUALRT",58,0)
 I '$D(^TIU(8925,+TIUDA,0)) D ALERTDEL(TIUDA)
"RTN","TIUALRT",59,0)
 D:'$D(TIUPRM0)!'$D(TIUPRM1) SETPARM^TIULE
"RTN","TIUALRT",60,0)
 D EN^VALM("TIU BROWSE FOR CLINICIAN")
"RTN","TIUALRT",61,0)
 Q
"RTN","TIUALRT",62,0)
SENDTRAN(DA) ; Generate "Send back to transcription" alert
"RTN","TIUALRT",63,0)
 N TIUEDT,TIU0,TIUPNM,TIUSSN,TIUTRAN,TIU,XQA,XQAMSG,TIUMSG
"RTN","TIUALRT",64,0)
 N TIUESNR,TIU12,TIU13,TIU14,TIU15,TIUTYP
"RTN","TIUALRT",65,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUALRT",66,0)
 D ALERTDEL(DA)
"RTN","TIUALRT",67,0)
 ; Don't send if notifications not enabled
"RTN","TIUALRT",68,0)
 I '+$P(TIUPRM1,U,7) Q
"RTN","TIUALRT",69,0)
 S TIU0=$G(^TIU(8925,+DA,0)),TIU12=$G(^(12)),TIU13=$G(^(13))
"RTN","TIUALRT",70,0)
 S TIU14=$G(^TIU(8925,+DA,14)),TIU15=$G(^(15))
"RTN","TIUALRT",71,0)
 S TIUPNM=$E($P($G(^DPT(+$P(TIU0,U,2),0)),U),1,9)
"RTN","TIUALRT",72,0)
 S TIUEDT=$$DATE^TIULS($P(TIU0,U,7))
"RTN","TIUALRT",73,0)
 S TIUTYP=$$PNAME^TIULC1(+$G(TIU0))
"RTN","TIUALRT",74,0)
 S TIUTRAN=$P(TIU13,U,2),TIUESNR=$P(12,U,2)
"RTN","TIUALRT",75,0)
 D PATVADPT^TIULV(.TIU,+$P(TIU0,U,2)) ;Used to get SSN. Date not important.
"RTN","TIUALRT",76,0)
 S TIUSSN=$E(TIUPNM,1)_$P($G(TIU("SSN")),"-",3)
"RTN","TIUALRT",77,0)
 I $D(^VA(200,+TIUTRAN,0)) S XQA(TIUTRAN)=""
"RTN","TIUALRT",78,0)
 Q:$D(XQA)'>9
"RTN","TIUALRT",79,0)
 S TIUMSG=$S(TIUTRAN=TIUESNR:" needs editing",1:" needs retranscription.")
"RTN","TIUALRT",80,0)
 S XQAID="TIU"_+DA
"RTN","TIUALRT",81,0)
 S XQAMSG=TIUPNM_" ("_TIUSSN_"): "_TIUTYP_TIUMSG
"RTN","TIUALRT",82,0)
 D SETUP^XQALERT
"RTN","TIUALRT",83,0)
 Q
"RTN","TIUALRT",84,0)
SENDADD(DA) ; Generates "Addendum added" alert
"RTN","TIUALRT",85,0)
 N TIU12,TIU13,TIU14,TIU15,TIUEDT,TIU0,TIUPNM,TIUSSN,TIUTRAN,TIU
"RTN","TIUALRT",86,0)
 N XQA,XQAMSG,XQAFLG,XQADATA,XQAROU,TIUESNR,TIUATE
"RTN","TIUALRT",87,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUALRT",88,0)
 D ADDENDEL(DA)
"RTN","TIUALRT",89,0)
 ; Don't send if notifications not enabled
"RTN","TIUALRT",90,0)
 I '+$P(TIUPRM1,U,7) Q
"RTN","TIUALRT",91,0)
 S TIU0=$G(^TIU(8925,+DA,0)),TIU12=$G(^(12)),TIU13=$G(^(13))
"RTN","TIUALRT",92,0)
 S TIU14=$G(^TIU(8925,+DA,14)),TIU15=$G(^(15))
"RTN","TIUALRT",93,0)
 S TIUPNM=$E($P($G(^DPT(+$P(TIU0,U,2),0)),U),1,9)
"RTN","TIUALRT",94,0)
 S TIUESNR=$E($P($G(^DPT(+$P(TIU12,U,2),0)),U),1,19)
"RTN","TIUALRT",95,0)
 S TIUEDT=$S(+$P(TIU0,U,7):$P(TIU0,U,7),+$G(TIU("EDT")):+$G(TIU("EDT")),1:"")
"RTN","TIUALRT",96,0)
 S:$L(TIUEDT) TIUEDT=" Adm "_$$DATE^TIULS(TIUEDT)_","
"RTN","TIUALRT",97,0)
 S TIUATE=$S(+$P(TIU13,U):$P(TIU13,U),1:$G(DT))
"RTN","TIUALRT",98,0)
 S TIUATE=$$DATE^TIULS(TIUATE)
"RTN","TIUALRT",99,0)
 D PATVADPT^TIULV(.TIU,+$P(TIU0,U,2)) ;Used to get SSN. Date not important.
"RTN","TIUALRT",100,0)
 S TIUSSN=$E(TIUPNM,1)_$P($G(TIU("SSN")),"-",3)
"RTN","TIUALRT",101,0)
 S TIUTRAN=$P(TIU13,U,2)
"RTN","TIUALRT",102,0)
 ;Attending and Author of original discharge summary
"RTN","TIUALRT",103,0)
 S TIUECSNR=$P($G(^TIU(8925,$P(TIU0,U,6),12)),U,4),TIUESNR=$P($G(^(12)),U,2)
"RTN","TIUALRT",104,0)
 I TIUESNR'=TIUTRAN,$D(^VA(200,+TIUESNR,0)) S XQA(TIUESNR)="" ; Set AUTHOR as recipient
"RTN","TIUALRT",105,0)
 I TIUECSNR'=TIUTRAN,$D(^VA(200,+TIUECSNR,0)) S XQA(TIUECSNR)="" ; Set Attending as recipient
"RTN","TIUALRT",106,0)
 S TIUMGR=0 F  S TIUMGR=$O(^XUSEC("TIU MANAGER",TIUMGR)) Q:TIUMGR'>0  D
"RTN","TIUALRT",107,0)
 . S XQA(TIUMGR)="" ; Set TIU MANAGER as recipient
"RTN","TIUALRT",108,0)
 Q:$D(XQA)'>9
"RTN","TIUALRT",109,0)
 S XQAID="TIUADD"_+DA
"RTN","TIUALRT",110,0)
 S XQAMSG=TIUPNM_" ("_TIUSSN_"):"_TIUEDT_" Addendum added "_TIUATE_" by "_$P($G(^VA(200,+TIUESNR,0)),U)
"RTN","TIUALRT",111,0)
 D SETUP^XQALERT
"RTN","TIUALRT",112,0)
 Q
"RTN","TIUALRT",113,0)
ALERTDEL(DA) ; Delete alerts associated with a given Dis Sum record
"RTN","TIUALRT",114,0)
 N XQA,XQAID,XQAKILL S XQAID="TIU"_DA
"RTN","TIUALRT",115,0)
 D DELETEA^XQALERT
"RTN","TIUALRT",116,0)
 Q
"RTN","TIUALRT",117,0)
ADDENDEL(DA) ; Delete alert associated with a Addendum added
"RTN","TIUALRT",118,0)
 N XQA,XQAID,XQAKILL S XQAID="TIUADD"_DA
"RTN","TIUALRT",119,0)
 D DELETEA^XQALERT
"RTN","TIUALRT",120,0)
 Q
"RTN","TIUAPIOK")
0^3^B13295307
"RTN","TIUAPIOK",1,0)
TIUAPIOK ; SLC/JER - Check out PUT API's
"RTN","TIUAPIOK",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUAPIOK",3,0)
MAKEOK ; Check out the make call
"RTN","TIUAPIOK",4,0)
 N ERR,DFN,VSIT,TITLE,TIUDATA,TIUI,TIUREC
"RTN","TIUAPIOK",5,0)
 S DFN=+$$PATIENT^TIULA Q:+DFN'>0
"RTN","TIUAPIOK",6,0)
 S VSIT=$$VSITPICK(DFN) Q:+VSIT'>0
"RTN","TIUAPIOK",7,0)
 S TITLE=$$TITLPICK Q:+TITLE'>0
"RTN","TIUAPIOK",8,0)
 D LOADREC(.TIUREC) S TIUI=0
"RTN","TIUAPIOK",9,0)
 F  S TIUI=$O(TIUREC(TIUI)) Q:+TIUI'>0  D
"RTN","TIUAPIOK",10,0)
 . I $L($P(TIUREC(TIUI),U,2)) D
"RTN","TIUAPIOK",11,0)
 . . S TIUREC(TIUI)=$P($$READER(TIUREC(TIUI)),U)
"RTN","TIUAPIOK",12,0)
 D BLRPLT^TIUSRVD(.TIUDATA,TITLE,DFN)
"RTN","TIUAPIOK",13,0)
 S DIC=$P(TIUDATA,")")_",",DWPK=1 D EN^DIWE
"RTN","TIUAPIOK",14,0)
 M TIUREC("TEXT")=@TIUDATA K @TIUDATA
"RTN","TIUAPIOK",15,0)
 D MAKE^TIUSRVP(.ERR,DFN,TITLE,"","",VSIT,.TIUREC)
"RTN","TIUAPIOK",16,0)
 Q
"RTN","TIUAPIOK",17,0)
VSITPICK(DFN) ; Given a patient, select a visit
"RTN","TIUAPIOK",18,0)
 N DIC,X,Y
"RTN","TIUAPIOK",19,0)
 S DIC=9000010,DIC(0)="AEMQZ",DIC("S")="I +$P(^AUPNVSIT(+Y,0),U,5)=DFN"
"RTN","TIUAPIOK",20,0)
 D ^DIC K DIC("S")
"RTN","TIUAPIOK",21,0)
 Q +$G(Y)
"RTN","TIUAPIOK",22,0)
TITLPICK() ; Select a title
"RTN","TIUAPIOK",23,0)
 N TITLES,I,L,Y
"RTN","TIUAPIOK",24,0)
 D NOTES^TIUSRVD(.TITLES)
"RTN","TIUAPIOK",25,0)
 S (I,L,PICK)=0 F  S I=$O(TITLES(I)) Q:+I'>0!+PICK  D
"RTN","TIUAPIOK",26,0)
 . W:$E(TITLES(I))="i" !,I,?7,$P(TITLES(I),U,2)
"RTN","TIUAPIOK",27,0)
 . I I#20=0 S Y=$TR($P($G(TITLES(+$$PICK(1,I))),U),"i",""),PICK=+Y
"RTN","TIUAPIOK",28,0)
 . S L=I
"RTN","TIUAPIOK",29,0)
 I 'PICK S Y=$TR($P($G(TITLES(+$$PICK(1,L))),U),"i","")
"RTN","TIUAPIOK",30,0)
 Q $G(Y)
"RTN","TIUAPIOK",31,0)
PICK(LOW,HIGH) ; List selection
"RTN","TIUAPIOK",32,0)
 N X,Y
"RTN","TIUAPIOK",33,0)
 W !
"RTN","TIUAPIOK",34,0)
 S Y=$$READ^TIUU("LO^"_LOW_":"_HIGH,"Select Item")
"RTN","TIUAPIOK",35,0)
 W !
"RTN","TIUAPIOK",36,0)
 Q Y
"RTN","TIUAPIOK",37,0)
LOADREC(TIUREC) ; Load TIUREC for editing
"RTN","TIUAPIOK",38,0)
 S TIUREC(1202)=1202_U_$$PERSNAME^TIULC1(DUZ)
"RTN","TIUAPIOK",39,0)
 S TIUREC(1301)=1301_U_$$DATE^TIULS($$NOW^TIULC,"AMTH DD, CCYY@HR:MIN")
"RTN","TIUAPIOK",40,0)
 Q
"RTN","TIUAPIOK",41,0)
UPDATEOK ; Check out update call
"RTN","TIUAPIOK",42,0)
 N TIUX,TIUY,ERR,TIUDA,DFN,TIUEDIT,DR,TIUREC S DFN=+$$PATIENT^TIULA
"RTN","TIUAPIOK",43,0)
 D SELPAT^TIULA2(.TIUY,3,DFN)
"RTN","TIUAPIOK",44,0)
 I $D(TIUY)'>9 Q
"RTN","TIUAPIOK",45,0)
 S TIUDA=+$G(TIUY(1)),DR="1202;1301"
"RTN","TIUAPIOK",46,0)
 D GET4EDIT^TIUSRVR(.TIUREC,TIUDA,DR)
"RTN","TIUAPIOK",47,0)
 S TIUEDIT=$$CANDO^TIULP(TIUDA,"EDIT RECORD")
"RTN","TIUAPIOK",48,0)
 I +TIUEDIT'>0 W !,$C(7),$C(7),$P(TIUEDIT,U,2) Q
"RTN","TIUAPIOK",49,0)
 D EDIT(TIUDA,.TIUREC)
"RTN","TIUAPIOK",50,0)
 D UPDATE^TIUSRVP(.ERR,TIUDA,.TIUREC)
"RTN","TIUAPIOK",51,0)
 D EN^TIUAUDIT
"RTN","TIUAPIOK",52,0)
 Q
"RTN","TIUAPIOK",53,0)
EDIT(DA,TIUREC) ; Call ^DIE and ^DIWE to edit the text
"RTN","TIUAPIOK",54,0)
 N DIE,DR,TIUI,TIUFLD K ^TMP("TIUEDIT",$J)
"RTN","TIUAPIOK",55,0)
 N DIWESUB,DIWPT,DWHD,DWI,DWLC,DWLR,DWLW,DWO,DWPK
"RTN","TIUAPIOK",56,0)
 D LOADTMP(.TIUREC) S TIUI=0
"RTN","TIUAPIOK",57,0)
 F  S TIUI=$O(TIUREC(TIUI)) Q:+TIUI'>0  D
"RTN","TIUAPIOK",58,0)
 . I $L($P(TIUREC(TIUI),U,2)) D
"RTN","TIUAPIOK",59,0)
 . . S TIUREC(TIUI)=$P($$READER(TIUREC(TIUI)),U)
"RTN","TIUAPIOK",60,0)
 S DIC="^TMP(""TIUEDIT"",$J,",DWPK=1 D EN^DIWE
"RTN","TIUAPIOK",61,0)
 M TIUREC("TEXT")=^TMP("TIUEDIT",$J) K ^TMP("TIUEDIT",$J)
"RTN","TIUAPIOK",62,0)
 Q
"RTN","TIUAPIOK",63,0)
LOADTMP(TIUREC) ; Load Text into ^TMP("TIUEDIT",$J)
"RTN","TIUAPIOK",64,0)
 N TIUL,TIUI S (TIUI,TIUL)=0
"RTN","TIUAPIOK",65,0)
 F  S TIUI=$O(TIUREC("TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUAPIOK",66,0)
 . S ^TMP("TIUEDIT",$J,TIUI,0)=$G(TIUREC("TEXT",TIUI,0))
"RTN","TIUAPIOK",67,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUAPIOK",68,0)
 S ^TMP("TIUEDIT",$J,0)="^^"_TIUL_U_TIUL_U_DT_U
"RTN","TIUAPIOK",69,0)
 Q
"RTN","TIUAPIOK",70,0)
READER(TIUREC) ; Edit each field
"RTN","TIUAPIOK",71,0)
 N TIUY
"RTN","TIUAPIOK",72,0)
 S TIUY=$$READ^TIUU("8925,"_$P(TIUREC,U),"",$P(TIUREC,U,2))
"RTN","TIUAPIOK",73,0)
 Q $G(TIUY)
"RTN","TIUAPIOK",74,0)
DELETOK ; Check out DELETE API
"RTN","TIUAPIOK",75,0)
 N ERR,TIUDA,DFN S DFN=+$$PATIENT^TIULA
"RTN","TIUAPIOK",76,0)
 D SELPAT^TIULA2(.TIUY,38,DFN)
"RTN","TIUAPIOK",77,0)
 I $D(TIUY)'>9 Q
"RTN","TIUAPIOK",78,0)
 S TIUDA=+$G(TIUY(1))
"RTN","TIUAPIOK",79,0)
 D DELETE^TIUSRVP(.ERR,TIUDA)
"RTN","TIUAPIOK",80,0)
 I ERR W !,ERR
"RTN","TIUAPIOK",81,0)
 Q
"RTN","TIUAPIOK",82,0)
ADDNOK ; Check CREATE ADDENDUM API
"RTN","TIUAPIOK",83,0)
 N TIUDADD,TIUDAT,TIUDA,TIUI,DFN,TIUDATA,TIUREC
"RTN","TIUAPIOK",84,0)
 S DFN=+$$PATIENT^TIULA
"RTN","TIUAPIOK",85,0)
 D SELPAT^TIULA2(.TIUDAT,3,DFN)
"RTN","TIUAPIOK",86,0)
 I +$G(TIUDAT)'>0,($D(TIUDAT)'>9) D  S TIUOUT=1 Q
"RTN","TIUAPIOK",87,0)
 . W !!,"Nothing selected."
"RTN","TIUAPIOK",88,0)
 S TIUI=0
"RTN","TIUAPIOK",89,0)
 F  S TIUI=$O(TIUDAT(TIUI)) Q:+TIUI'>0  D
"RTN","TIUAPIOK",90,0)
 . N TIUJ
"RTN","TIUAPIOK",91,0)
 . S TIUDA=+$G(TIUDAT(TIUI)) Q:+TIUDA'>0
"RTN","TIUAPIOK",92,0)
 . D LOADREC(.TIUREC) S TIUJ=0
"RTN","TIUAPIOK",93,0)
 . F  S TIUJ=$O(TIUREC(TIUJ)) Q:+TIUJ'>0  D
"RTN","TIUAPIOK",94,0)
 . . I $L($P(TIUREC(TIUJ),U,2)) D
"RTN","TIUAPIOK",95,0)
 . . . S TIUREC(TIUJ)=$P($$READER(TIUREC(TIUJ)),U)
"RTN","TIUAPIOK",96,0)
 . D BLRPLT^TIUSRVD(.TIUDATA,81,DFN)
"RTN","TIUAPIOK",97,0)
 . S DIC=$P(TIUDATA,")")_",",DWPK=1 D EN^DIWE
"RTN","TIUAPIOK",98,0)
 . M TIUREC("TEXT")=@TIUDATA K @TIUDATA
"RTN","TIUAPIOK",99,0)
 . D MAKEADD^TIUSRVP(.TIUDADD,TIUDA,.TIUREC)
"RTN","TIUAPIOK",100,0)
 Q
"RTN","TIUAUDIT")
0^4^B2826641
"RTN","TIUAUDIT",1,0)
TIUAUDIT ;SLC/JER - Display audit trail ;12/13/94  17:58
"RTN","TIUAUDIT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUAUDIT",3,0)
 ;;Text Integration Utility;;
"RTN","TIUAUDIT",4,0)
EN ; Option entry
"RTN","TIUAUDIT",5,0)
 K ^TMP("TIUAUDIT",$J) N TIU
"RTN","TIUAUDIT",6,0)
 D EN^VALM("TIU DISPLAY AUDIT TRAIL")
"RTN","TIUAUDIT",7,0)
 K ^TMP("TIUAUDIT",$J)
"RTN","TIUAUDIT",8,0)
 Q
"RTN","TIUAUDIT",9,0)
MAIN ; Control branching
"RTN","TIUAUDIT",10,0)
 N TIUVIEW S TIUVIEW=$$CANDO^TIULP(TIUDA,"VIEW")
"RTN","TIUAUDIT",11,0)
 I +TIUVIEW'>0 D  Q
"RTN","TIUAUDIT",12,0)
 . W !!,$C(7),$P(TIUVIEW,U,2),!
"RTN","TIUAUDIT",13,0)
 . I $$READ^TIUU("EA","RETURN to continue...")
"RTN","TIUAUDIT",14,0)
 D GET^TIUSRV(TIUDA)
"RTN","TIUAUDIT",15,0)
 Q
"RTN","TIUAUDIT",16,0)
HDR ; Build Header
"RTN","TIUAUDIT",17,0)
 N TIUDTYP
"RTN","TIUAUDIT",18,0)
 ; I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUAUDIT",19,0)
 D:$D(TIU)'>9 GETTIU^TIULD(.TIU,+TIUDA)
"RTN","TIUAUDIT",20,0)
 S VALMHDR(1)=$$CENTER^TIULS($P($G(TIU("DOCTYP")),U,2))
"RTN","TIUAUDIT",21,0)
 S VALMHDR(2)=$$SETREC("HDR")
"RTN","TIUAUDIT",22,0)
 Q
"RTN","TIUAUDIT",23,0)
SETREC(LINE) ; Calls $$SETSTR^VALM1 for each line of ^TMP("TIUAUDIT",$J,
"RTN","TIUAUDIT",24,0)
 N Y
"RTN","TIUAUDIT",25,0)
 I LINE="HDR" D
"RTN","TIUAUDIT",26,0)
 . S Y=$$SETSTR^VALM1($$NAME^TIULS(TIU("PNM"),"LAST,FI MI"),$G(Y),1,15)
"RTN","TIUAUDIT",27,0)
 . S Y=$$SETSTR^VALM1(TIU("SSN"),$G(Y),16,12)
"RTN","TIUAUDIT",28,0)
 . S Y=$$SETSTR^VALM1($P($G(TIU("WARD")),U,2),$G(Y),30,20)
"RTN","TIUAUDIT",29,0)
 . I +TIU("DOCTYP")=1 D
"RTN","TIUAUDIT",30,0)
 . . S Y=$$SETSTR^VALM1("Adm: "_$$DATE^TIULS(+TIU("EDT"),"MM/DD/YY"),$G(Y),51,13)
"RTN","TIUAUDIT",31,0)
 . . S Y=$$SETSTR^VALM1("Dis: "_$$DATE^TIULS(+TIU("LDT"),"MM/DD/YY"),$G(Y),66,13)
"RTN","TIUAUDIT",32,0)
 . I +TIU("DOCTYP")'=1 D
"RTN","TIUAUDIT",33,0)
 . . S Y=$$SETSTR^VALM1("Visit Date: "_$$DATE^TIULS(+TIU("EDT"),"MM/DD/YY@HR:MIN"),$G(Y),53,26)
"RTN","TIUAUDIT",34,0)
 Q Y
"RTN","TIUBPEDT")
0^5^B636886
"RTN","TIUBPEDT",1,0)
TIUBPEDT ; SLC/JER - Basic Parameter Edit ;2/19/93  16:15
"RTN","TIUBPEDT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUBPEDT",3,0)
MAIN ; Controls branching
"RTN","TIUBPEDT",4,0)
 N DIC,DA,DIE,DR,DLAYGO,TIUPRM0,TIUPRM1,TIUFMT,X,Y,DWPK
"RTN","TIUBPEDT",5,0)
 D:'$D(TIUPRM0) SETPARM^TIULE
"RTN","TIUBPEDT",6,0)
 W !,"First edit Division-wide parameters:",!
"RTN","TIUBPEDT",7,0)
 S (DIC,DLAYGO)=8925.99,DIC(0)="AEMQL",DIC("A")="Select INSTITUTION: "
"RTN","TIUBPEDT",8,0)
 D ^DIC K DLAYGO Q:+Y'>0  S DA=+Y
"RTN","TIUBPEDT",9,0)
 S DIE=8925.99,DR="[TIU BASIC PARAMETER EDIT]"
"RTN","TIUBPEDT",10,0)
 D ^DIE
"RTN","TIUBPEDT",11,0)
 Q
"RTN","TIUBR")
0^6^B70884521
"RTN","TIUBR",1,0)
TIUBR ; SLC/JER - Browse Action Subroutines ;5/2/94  09:53
"RTN","TIUBR",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUBR",3,0)
EN ; Abandon hope, all ye who enter here
"RTN","TIUBR",4,0)
 N TIUY
"RTN","TIUBR",5,0)
 D BLDTMP(TIUDA)
"RTN","TIUBR",6,0)
 Q
"RTN","TIUBR",7,0)
HDR ; Build Header
"RTN","TIUBR",8,0)
 N TIUDTYP
"RTN","TIUBR",9,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUBR",10,0)
 D:$D(TIU)'>9 GETTIU^TIULD(.TIU,+TIUDA)
"RTN","TIUBR",11,0)
 S VALMHDR(1)=$$CENTER^TIULS($P($G(TIU("DOCTYP")),U,2))
"RTN","TIUBR",12,0)
 S VALMHDR(2)=$$SETREC
"RTN","TIUBR",13,0)
 Q
"RTN","TIUBR",14,0)
BLDTMP(TIUDA) ; Build ^TMP("TIUVIEW",$J,
"RTN","TIUBR",15,0)
 N TIUI,TIUJ,TIUL,TIUREC,TIUDADD S (TIUDADD,TIUI)=0
"RTN","TIUBR",16,0)
 N DA,DIC,DIQ,DR,TIUNAME K ^TMP("TIUVIEW",$J) S DA=TIUDA
"RTN","TIUBR",17,0)
 I '$D(^TIU(8925,+TIUDA,0)) S VALMQUIT=1 Q
"RTN","TIUBR",18,0)
 S DIC=8925,DIQ="TIUREC("
"RTN","TIUBR",19,0)
 S DR=".01;.02;.05;.09;1201;1202;1208;1209;1301;1307;1501;1502;1505;1506;1601:1604"
"RTN","TIUBR",20,0)
 D EN^DIQ1
"RTN","TIUBR",21,0)
 I $D(TIUREC)>9 W !!,"Opening "_TIUREC(8925,+TIUDA,.01)_" record for review..."
"RTN","TIUBR",22,0)
 ; First, load dicatation, transcription data, etc.
"RTN","TIUBR",23,0)
 D LOADTOP(.TIUREC,TIUDA,.TIUJ,.TIUL)
"RTN","TIUBR",24,0)
 ; Next, load the remainder of the record
"RTN","TIUBR",25,0)
 D LOADREC(TIUDA,.TIUJ,.TIUL) S TIUJ=TIUL
"RTN","TIUBR",26,0)
 I $L($G(TIUREC(8925,+TIUDA,1601))) D
"RTN","TIUBR",27,0)
 . N TIUMODE
"RTN","TIUBR",28,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUJ,0)="",TIUL=+$G(TIUL)+1
"RTN","TIUBR",29,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUBR",30,0)
 . S ^TMP("TIUVIEW",$J,TIUJ,0)=$G(TIUREC(8925,TIUDA,1601))_"  AMENDMENT FILED:"
"RTN","TIUBR",31,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUBR",32,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUJ,0)="",TIUL=+$G(TIUL)+1
"RTN","TIUBR",33,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUBR",34,0)
 . S TIUMODE=$S($G(TIUREC(8925,TIUDA,1603))]"":"/es/ ",1:"/chart/ ")
"RTN","TIUBR",35,0)
 . S ^TMP("TIUVIEW",$J,TIUJ,0)=TIUMODE_$G(TIUREC(8925,TIUDA,1602))
"RTN","TIUBR",36,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUBR",37,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUBR",38,0)
 . S ^TMP("TIUVIEW",$J,TIUJ,0)=$P($G(TIUPRM1),U,5)
"RTN","TIUBR",39,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUBR",40,0)
 S ^TMP("TIUVIEW",$J,0)=$G(^TIU(8925,+TIUDA,"TEXT",0))
"RTN","TIUBR",41,0)
 S $P(^TMP("TIUVIEW",$J,0),U,3,4)=$G(TIUL)_U_$G(TIUL),VALMCNT=+$G(TIUL)
"RTN","TIUBR",42,0)
 Q
"RTN","TIUBR",43,0)
LOADTOP(TIUREC,TIUDA,TIUJ,TIUL) ; Load top information
"RTN","TIUBR",44,0)
 N TIUY
"RTN","TIUBR",45,0)
 S (TIUJ,TIUL)=1,TIUY=""
"RTN","TIUBR",46,0)
 I $L(TIUREC(8925,+TIUDA,1307)) D  I 1
"RTN","TIUBR",47,0)
 . S TIUY=$$SETSTR^VALM1("DICT DATE: "_TIUREC(8925,+TIUDA,1307),$G(TIUY),4,39)
"RTN","TIUBR",48,0)
 E  S TIUY=$$SETSTR^VALM1("DATE OF NOTE: "_TIUREC(8925,+TIUDA,1301),$G(TIUY),1,39)
"RTN","TIUBR",49,0)
 S TIUY=$$SETSTR^VALM1("ENTRY DATE: "_TIUREC(8925,+TIUDA,1201),$G(TIUY),38,39)
"RTN","TIUBR",50,0)
 S @VALMAR@(TIUJ,0)=TIUY
"RTN","TIUBR",51,0)
 S (TIUJ,TIUL)=2,TIUY=""
"RTN","TIUBR",52,0)
 I $L(TIUREC(8925,+TIUDA,1307)) D  I 1
"RTN","TIUBR",53,0)
 . S TIUY=$$SETSTR^VALM1("DICTATED BY: "_TIUREC(8925,+TIUDA,1202),$G(TIUY),2,32)
"RTN","TIUBR",54,0)
 E  S TIUY=$$SETSTR^VALM1("AUTHOR: "_TIUREC(8925,+TIUDA,1202),$G(TIUY),7,32)
"RTN","TIUBR",55,0)
 I $L(TIUREC(8925,+TIUDA,1209)) D  I 1
"RTN","TIUBR",56,0)
 . S TIUY=$$SETSTR^VALM1("ATTENDING: "_TIUREC(8925,+TIUDA,1209),$G(TIUY),39,40)
"RTN","TIUBR",57,0)
 E  S TIUY=$$SETSTR^VALM1("EXP COSIGNER: "_TIUREC(8925,+TIUDA,1208),$G(TIUY),36,40)
"RTN","TIUBR",58,0)
 S @VALMAR@(TIUJ,0)=TIUY
"RTN","TIUBR",59,0)
 S (TIUJ,TIUL)=3,TIUY=""
"RTN","TIUBR",60,0)
 S TIUY=$$SETSTR^VALM1("URGENCY: "_TIUREC(8925,+TIUDA,.09),$G(TIUY),6,36)
"RTN","TIUBR",61,0)
 S TIUY=$$SETSTR^VALM1("STATUS: "_TIUREC(8925,+TIUDA,.05),$G(TIUY),42,38)
"RTN","TIUBR",62,0)
 S @VALMAR@(TIUJ,0)=TIUY
"RTN","TIUBR",63,0)
 I '$L($G(^TIU(8925,+TIUDA,17))) S (TIUJ,TIUL)=4,TIUY="",@VALMAR@(TIUJ,0)=TIUY
"RTN","TIUBR",64,0)
 E  D
"RTN","TIUBR",65,0)
 . S (TIUJ,TIUL)=4,TIUY=""
"RTN","TIUBR",66,0)
 . S TIUY=$$SETSTR^VALM1("SUBJECT: "_$G(^TIU(8925,+TIUDA,17)),$G(TIUY),6,74)
"RTN","TIUBR",67,0)
 . S @VALMAR@(TIUJ,0)=TIUY
"RTN","TIUBR",68,0)
 . S (TIUJ,TIUL)=5,TIUY="",@VALMAR@(TIUJ,0)=TIUY
"RTN","TIUBR",69,0)
 I +$$HASADDEN^TIULC1(TIUDA) D
"RTN","TIUBR",70,0)
 . S TIUY="   *** "_$$PNAME^TIULC1(+$G(^TIU(8925,TIUDA,0)))_" Has ADDENDA ***"
"RTN","TIUBR",71,0)
 . S (TIUJ,TIUL)=+$G(TIUL)+1,@VALMAR@(TIUJ,0)=TIUY
"RTN","TIUBR",72,0)
 . S (TIUJ,TIUL)=+$G(TIUL)+1,@VALMAR@(TIUJ,0)=""
"RTN","TIUBR",73,0)
 Q
"RTN","TIUBR",74,0)
LOADREC(TIUDA,TIUJ,TIUL) ; Load ^TMP
"RTN","TIUBR",75,0)
 N TIUKID,TIUDADT,TIUI S TIUI=0
"RTN","TIUBR",76,0)
 F  S TIUI=$O(^TIU(8925,+TIUDA,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUBR",77,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUBR",78,0)
 . S ^TMP("TIUVIEW",$J,TIUJ,0)=$G(^TIU(8925,+TIUDA,"TEXT",+TIUI,0))
"RTN","TIUBR",79,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUBR",80,0)
 I +$$ISADDNDM^TIULC1(+TIUDA) D  Q
"RTN","TIUBR",81,0)
 . N TIULINE,TIUPARNT K ^TMP("TIU ADDENDUM",$J) S $P(TIULINE,"=",79)=""
"RTN","TIUBR",82,0)
 . S ^TMP("TIU ADDENDUM",$J)=TIUDA
"RTN","TIUBR",83,0)
 . D LOADSIG(TIUDA,.TIUL) S TIUJ=TIUL
"RTN","TIUBR",84,0)
 . I +$O(^TIU(8925.7,"B",TIUDA,0)) D XTRASIG(TIUDA,.TIUL) S TIUJ=TIUL
"RTN","TIUBR",85,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUJ,0)="",TIUL=+$G(TIUL)+1
"RTN","TIUBR",86,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUJ,0)=TIULINE,TIUL=+$G(TIUL)+1
"RTN","TIUBR",87,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUJ,0)="",TIUL=+$G(TIUL)+1
"RTN","TIUBR",88,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUJ,0)=" --- Original Document ---"
"RTN","TIUBR",89,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUBR",90,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUJ,0)="",TIUL=+$G(TIUL)+1
"RTN","TIUBR",91,0)
 . S TIUPARNT=+$P(^TIU(8925,+TIUDA,0),U,6) D LOADREC(TIUPARNT,.TIUJ,.TIUL)
"RTN","TIUBR",92,0)
 S TIUKID=0
"RTN","TIUBR",93,0)
 F  S TIUKID=$O(^TIU(8925,"DAD",+TIUDA,TIUKID)) Q:+TIUKID'>0  D
"RTN","TIUBR",94,0)
 . I +$$ISADDNDM^TIULC1(TIUKID)'>0 D LOADREC(TIUKID,.TIUJ,.TIUL)
"RTN","TIUBR",95,0)
 I '$$ISCOMP(TIUDA) D LOADSIG(TIUDA,.TIUL)
"RTN","TIUBR",96,0)
 I +$O(^TIU(8925.7,"B",TIUDA,0)) D XTRASIG(TIUDA,.TIUL)
"RTN","TIUBR",97,0)
 S TIUKID=0
"RTN","TIUBR",98,0)
 F  S TIUKID=$O(^TIU(8925,"DAD",+TIUDA,TIUKID)) Q:+TIUKID'>0  D
"RTN","TIUBR",99,0)
 . ; If acting on an addendum, don't show it again
"RTN","TIUBR",100,0)
 . I +TIUKID=+$G(^TMP("TIU ADDENDUM",$J)) Q
"RTN","TIUBR",101,0)
 . I +$$ISADDNDM^TIULC1(TIUKID) D LOADADD(TIUKID,.TIUL)
"RTN","TIUBR",102,0)
 K ^TMP("TIU ADDENDUM",$J)
"RTN","TIUBR",103,0)
 Q
"RTN","TIUBR",104,0)
ISCOMP(DA) ; Evaluate whether a given record is a component
"RTN","TIUBR",105,0)
 N TIUY,TIUTYP
"RTN","TIUBR",106,0)
 S TIUTYP=+$G(^TIU(8925,DA,0))
"RTN","TIUBR",107,0)
 S TIUY=$S($P($G(^TIU(8925.1,+TIUTYP,0)),U,4)="CO":1,1:0)
"RTN","TIUBR",108,0)
 Q TIUY
"RTN","TIUBR",109,0)
LOADADD(TIUDADD,TIUL) ; Load addenda
"RTN","TIUBR",110,0)
 N TIUDAUTH,TIUDATT,TIUJ,TIUSIG,TIUCSIG,CANSEE
"RTN","TIUBR",111,0)
 S CANSEE=$$CANDO^TIULP(+TIUDADD,"VIEW")
"RTN","TIUBR",112,0)
 S TIUJ=0,TIUI=+$G(TIUL)+1,^TMP("TIUVIEW",$J,TIUI,0)=" "
"RTN","TIUBR",113,0)
 S TIUDADT=$$DATE^TIULS($P($G(^TIU(8925,+TIUDADD,13)),U),"MM/DD/YY")
"RTN","TIUBR",114,0)
 S TIUI=TIUI+1,^TMP("TIUVIEW",$J,TIUI,0)=TIUDADT_" ADDENDUM:"
"RTN","TIUBR",115,0)
 I +CANSEE'>0 D  Q
"RTN","TIUBR",116,0)
 . S (TIUI,TIUL)=+$G(TIUI)+1
"RTN","TIUBR",117,0)
 . S ^TMP("TIUVIEW",$J,TIUI,0)=$P(CANSEE,U,2)
"RTN","TIUBR",118,0)
 F  S TIUJ=$O(^TIU(8925,+TIUDADD,"TEXT",TIUJ)) Q:+TIUJ'>0  D
"RTN","TIUBR",119,0)
 . S (TIUI,TIUL)=+$G(TIUI)+1
"RTN","TIUBR",120,0)
 . S ^TMP("TIUVIEW",$J,TIUI,0)=$G(^TIU(8925,+TIUDADD,"TEXT",TIUJ,0))
"RTN","TIUBR",121,0)
 D LOADSIG(TIUDADD,.TIUL)
"RTN","TIUBR",122,0)
 Q
"RTN","TIUBR",123,0)
LOADSIG(DA,TIUL) ; Get signature and cosignature blocks
"RTN","TIUBR",124,0)
 N DIC,DIQ,DR,TIUSIG,TIUESIG1,TIUESIG2,TIUSIG1,TIUSIG2,TIUS1,TIUS2
"RTN","TIUBR",125,0)
 N TIUSNM,TIUSTTL,TIUS1DT,TIUS2DT,TIUSDT
"RTN","TIUBR",126,0)
 Q:'$D(^TIU(8925,DA,15))
"RTN","TIUBR",127,0)
 S DIC=8925,DIQ="TIUSIG(",DIQ(0)="IE",DR="1204;1208;1501:1505;1507:1511"
"RTN","TIUBR",128,0)
 D EN^DIQ1 I '$D(TIUSIG) Q
"RTN","TIUBR",129,0)
 S TIUS1=$S(TIUSIG(8925,DA,1505,"I")="E":"/es/ ",TIUSIG(8925,DA,1505,"I")="C":"/chart/ ",1:"")_$G(TIUSIG(8925,DA,1503,"E"))
"RTN","TIUBR",130,0)
 S TIUS2=$S(TIUSIG(8925,DA,1511,"I")="E":"/es/ ",TIUSIG(8925,DA,1511,"I")="C":"/chart/ ",1:"")_$G(TIUSIG(8925,DA,1509,"E"))
"RTN","TIUBR",131,0)
 S TIUESIG1=$G(TIUSIG(8925,DA,1204,"I"))
"RTN","TIUBR",132,0)
 S TIUSIG1=$G(TIUSIG(8925,DA,1502,"I"))
"RTN","TIUBR",133,0)
 S TIUS1DT=$S(+$G(TIUSIG(8925,DA,1501,"I")):"Signed: "_$$DATE^TIULS($G(TIUSIG(8925,DA,1501,"I")),"MM/DD/YY HR:MIN"),1:"")
"RTN","TIUBR",134,0)
 S TIUESIG2=$G(TIUSIG(8925,DA,1208,"I"))
"RTN","TIUBR",135,0)
 S TIUS2DT=$S(+$G(TIUSIG(8925,DA,1507,"I")):"Cosigned: "_$$DATE^TIULS($G(TIUSIG(8925,DA,1507,"I")),"MM/DD/YY HR:MIN"),1:"")
"RTN","TIUBR",136,0)
 S TIUSIG2=$G(TIUSIG(8925,DA,1508,"I"))
"RTN","TIUBR",137,0)
 S TIUSNM=$$SETSTR^VALM1(TIUS1,$G(TIUSNM),1,35)
"RTN","TIUBR",138,0)
 S TIUSNM=$$SETSTR^VALM1(TIUS2,$G(TIUSNM),40,35)
"RTN","TIUBR",139,0)
 S TIUSTTL=$$SETSTR^VALM1(TIUSIG(8925,DA,1504,"E"),$G(TIUSTTL),1,35)
"RTN","TIUBR",140,0)
 S TIUSTTL=$$SETSTR^VALM1(TIUSIG(8925,DA,1510,"E"),$G(TIUSTTL),40,35)
"RTN","TIUBR",141,0)
 S TIUSDT=$$SETSTR^VALM1(TIUS1DT,$G(TIUSDT),1,35)
"RTN","TIUBR",142,0)
 S TIUSDT=$$SETSTR^VALM1(TIUS2DT,$G(TIUSDT),40,35)
"RTN","TIUBR",143,0)
 S TIUL=+$G(TIUL)+1,@VALMAR@(TIUL,0)=" "
"RTN","TIUBR",144,0)
 S TIUL=+$G(TIUL)+1,@VALMAR@(TIUL,0)=TIUSNM
"RTN","TIUBR",145,0)
 S TIUL=+$G(TIUL)+1,@VALMAR@(TIUL,0)=TIUSTTL
"RTN","TIUBR",146,0)
 S TIUL=+$G(TIUL)+1,@VALMAR@(TIUL,0)=TIUSDT
"RTN","TIUBR",147,0)
 I TIUSIG1]"",(TIUSIG1'=TIUESIG1) D LOADFOR(TIUSIG1,TIUESIG1,TIUSIG2,TIUESIG2,.TIUL) Q
"RTN","TIUBR",148,0)
 I TIUSIG2]"",(TIUSIG2'=TIUESIG2) D LOADFOR(TIUSIG1,TIUESIG1,TIUSIG2,TIUESIG2,.TIUL)
"RTN","TIUBR",149,0)
 Q
"RTN","TIUBR",150,0)
XTRASIG(TIUDA,TIUL) ; Load addtional signature blocks
"RTN","TIUBR",151,0)
 N TIUI,DA,DR,DIC,DIQ,TIUXTRA S TIUI=0
"RTN","TIUBR",152,0)
 S DIC="^TIU(8925.7,",DIQ="TIUXTRA"
"RTN","TIUBR",153,0)
 S TIUL=+$G(TIUL)+1,@VALMAR@(TIUL,0)=" "
"RTN","TIUBR",154,0)
 S TIUL=+$G(TIUL)+1,@VALMAR@(TIUL,0)="Concurrence signatures:"
"RTN","TIUBR",155,0)
 F  S TIUI=$O(^TIU(8925.7,"B",TIUDA,TIUI)) Q:+TIUI'>0  D
"RTN","TIUBR",156,0)
 . N TIUX,TIUSGNR,TIUSDT
"RTN","TIUBR",157,0)
 . S DA=TIUI,DR=".03:.08" D EN^DIQ1 Q:+$D(TIUXTRA)'>9
"RTN","TIUBR",158,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUBR",159,0)
 . S TIUSGNR=$S($L($G(TIUXTRA(8925.7,DA,.06))):"/es/ "_$G(TIUXTRA(8925.7,DA,.06)),1:"     "_$G(TIUXTRA(8925.7,DA,.03)))
"RTN","TIUBR",160,0)
 . S TIUSDT=$S($L($G(TIUXTRA(8925.7,DA,.04))):$G(TIUXTRA(8925.7,DA,.04)),1:"* AWAITING SIGNATURE *")
"RTN","TIUBR",161,0)
 . S TIUX=$$SETSTR^VALM1(TIUSDT,$G(TIUX),1,38)
"RTN","TIUBR",162,0)
 . S TIUX=$$SETSTR^VALM1(TIUSGNR,$G(TIUX),30,49)
"RTN","TIUBR",163,0)
 . S @VALMAR@(TIUL,0)=TIUX,TIUX="",TIUL=+$G(TIUL)+1
"RTN","TIUBR",164,0)
 . S TIUX=$$SETSTR^VALM1($G(TIUXTRA(8925.7,DA,.07)),$G(TIUX),35,44)
"RTN","TIUBR",165,0)
 . S @VALMAR@(TIUL,0)=TIUX
"RTN","TIUBR",166,0)
 Q
"RTN","TIUBR",167,0)
LOADFOR(TIUS1,TIUES1,TIUS2,TIUES2,TIUL) ; Apply "for" block(s)
"RTN","TIUBR",168,0)
 N TIUESN1,TIUEST1,TIUESN2,TIUEST2,TIUFORN,TIUFORT
"RTN","TIUBR",169,0)
 S TIUESN1=$$SIGNAME^TIULS(TIUES1),TIUEST1=$$SIGTITL^TIULS(TIUES1)
"RTN","TIUBR",170,0)
 S TIUESN2=$$SIGNAME^TIULS(TIUES2),TIUEST2=$$SIGTITL^TIULS(TIUES2)
"RTN","TIUBR",171,0)
 I $G(TIUS1)'=$G(TIUES1) S TIUFORN=$$SETSTR^VALM1(TIUESN1,$G(TIUFORN),1,35),TIUFORT=$$SETSTR^VALM1(TIUEST1,$G(TIUFORT),1,35)
"RTN","TIUBR",172,0)
 I $G(TIUS2)'=$G(TIUES2) S TIUFORN=$$SETSTR^VALM1(TIUESN2,$G(TIUFORN),40,35),TIUFORT=$$SETSTR^VALM1(TIUEST2,$G(TIUFORT),40,35)
"RTN","TIUBR",173,0)
 S TIUL=+$G(TIUL)+1,@VALMAR@(TIUL,0)="for "_TIUFORN
"RTN","TIUBR",174,0)
 S TIUL=+$G(TIUL)+1,@VALMAR@(TIUL,0)=TIUFORT
"RTN","TIUBR",175,0)
 Q
"RTN","TIUBR",176,0)
SETREC() ; Calls $$SETSTR^VALM1 for each line of ^TMP("TIUVIEW",$J,
"RTN","TIUBR",177,0)
 N Y
"RTN","TIUBR",178,0)
 S Y=$$SETSTR^VALM1($$NAME^TIULS($G(TIU("PNM")),"LAST,FI MI"),$G(Y),1,15)
"RTN","TIUBR",179,0)
 S Y=$$SETSTR^VALM1($G(TIU("SSN")),$G(Y),16,12)
"RTN","TIUBR",180,0)
 S Y=$$SETSTR^VALM1($P($G(TIU("LOC")),U,2),$G(Y),30,20)
"RTN","TIUBR",181,0)
 I +TIU("DOCTYP")=1 D
"RTN","TIUBR",182,0)
 . S Y=$$SETSTR^VALM1("Adm: "_$$DATE^TIULS(+TIU("EDT"),"MM/DD/YY"),$G(Y),51,13)
"RTN","TIUBR",183,0)
 . S Y=$$SETSTR^VALM1("Dis: "_$$DATE^TIULS(+TIU("LDT"),"MM/DD/YY"),$G(Y),66,13)
"RTN","TIUBR",184,0)
 I +TIU("DOCTYP")'=1 D
"RTN","TIUBR",185,0)
 . S Y=$$SETSTR^VALM1("Visit Date: "_$$DATE^TIULS(+$G(TIU("EDT")),"MM/DD/YY@HR:MIN"),$G(Y),53,26)
"RTN","TIUBR",186,0)
 Q Y
"RTN","TIUBR",187,0)
CLEAN ; Die, filthy spawn!!!
"RTN","TIUBR",188,0)
 D CLEAN^VALM10 K VALMHDR,DFN,TIU,TIUPRM0,TIUPRM1
"RTN","TIUBR",189,0)
 Q
"RTN","TIUBRWS")
0^7^B2002061
"RTN","TIUBRWS",1,0)
TIUBRWS ; SLC/JER - Single patient browse ;8/9/94  10:04
"RTN","TIUBRWS",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUBRWS",3,0)
MAIN(TIULTMP,TIUTYP) ; Control Branching
"RTN","TIUBRWS",4,0)
 N DFN,TIU,TIUOUT,TIUREL,TIUCHK,TIUA,TIUSEE,ACT,TIUY
"RTN","TIUBRWS",5,0)
 N TIUOUT,TIUSEE,TIUI,TIUQUIT
"RTN","TIUBRWS",6,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIUBRWS",7,0)
 S:$D(ORVP) DFN=+ORVP S TIUTYP=$G(TIUTYP,38)
"RTN","TIUBRWS",8,0)
 S TIUTYP(1)="1^"_TIUTYP_U_$P(^TIU(8925.1,+TIUTYP,0),U)
"RTN","TIUBRWS",9,0)
 F  D  Q:+$G(TIUOUT)
"RTN","TIUBRWS",10,0)
 . N TIUDAT
"RTN","TIUBRWS",11,0)
 . D SELPAT^TIULA2(.TIUDAT,TIUTYP,+$G(DFN))
"RTN","TIUBRWS",12,0)
 . I +$G(TIUDAT)'>0,($D(TIUDAT)'>9) D  S TIUOUT=1 Q
"RTN","TIUBRWS",13,0)
 . . W !!,"Nothing selected."
"RTN","TIUBRWS",14,0)
 . S TIUI=0
"RTN","TIUBRWS",15,0)
 . F  S TIUI=$O(TIUDAT(TIUI)) Q:+TIUI'>0  D  Q:$D(DUOUT)!$D(DIROUT)!+$G(TIUOUT)
"RTN","TIUBRWS",16,0)
 . . S TIUDA=+$G(TIUDAT(TIUI)) Q:TIUDA'>0
"RTN","TIUBRWS",17,0)
 . . D GETTIU^TIULD(.TIU,+TIUDA)
"RTN","TIUBRWS",18,0)
 . . I $D(TIU) D
"RTN","TIUBRWS",19,0)
 . . . S TIUSEE=$$CANDO^TIULP(TIUDA,"VIEW")
"RTN","TIUBRWS",20,0)
 . . . I 'TIUSEE D  Q
"RTN","TIUBRWS",21,0)
 . . . . W !!,$C(7),$P(TIUSEE,U,2),! K DFN
"RTN","TIUBRWS",22,0)
 . . . . I $D(ORVP) S TIUOUT=1
"RTN","TIUBRWS",23,0)
 . . . . S TIU=$$READ^TIUU("FOA","Press RETURN to continue...")
"RTN","TIUBRWS",24,0)
 . . . D EN^VALM(TIULTMP)
"RTN","TIUBRWS",25,0)
 . . . K ^TMP("TIUVIEW",$J),DFN
"RTN","TIUBRWS",26,0)
 . . . S:$D(TIUQUIT) TIUOUT=1
"RTN","TIUBRWS",27,0)
 Q
"RTN","TIUCHLP")
0^8^B11383740
"RTN","TIUCHLP",1,0)
TIUCHLP ; SLC/SBW - Help for Clinician ;5/9/94  17:09
"RTN","TIUCHLP",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUCHLP",3,0)
MAIN ; Control branching
"RTN","TIUCHLP",4,0)
 N DIC,X,Y,TIUI,TIUROOT,TIUFPRIV S TIUFPRIV=1
"RTN","TIUCHLP",5,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUCHLP",6,0)
 S DIC=8925.1,DIC(0)="AEMQZ",DIC("A")="Select DOCUMENT TYPE: "
"RTN","TIUCHLP",7,0)
 S DIC("B")=$G(^DISV(+DUZ,"^TIU(8925.1,"))
"RTN","TIUCHLP",8,0)
 D ^DIC I +Y'>0 D
"RTN","TIUCHLP",9,0)
 . W !!,"Required information for dictation help not set up for this report type."
"RTN","TIUCHLP",10,0)
 I +Y>0 D
"RTN","TIUCHLP",11,0)
 . I $P(TIUPRM0,U,16)="D" S TIUROOT="ITEM"
"RTN","TIUCHLP",12,0)
 . E  I $P(TIUPRM0,U,16)="C" S TIUROOT="HEAD"
"RTN","TIUCHLP",13,0)
 . I $G(TIUROOT)']"" W !!,"Required information for dictation help not set up for this report type." Q
"RTN","TIUCHLP",14,0)
 . W !!,"A Dictated ",$P(Y(0),U),", requires the following:"
"RTN","TIUCHLP",15,0)
 . S TIUI=0
"RTN","TIUCHLP",16,0)
 . F  S TIUI=$O(^TIU(8925.1,+Y,TIUROOT,TIUI)) Q:+TIUI'>0  D
"RTN","TIUCHLP",17,0)
 . . I +$P($G(^TIU(8925.1,+Y,TIUROOT,TIUI,0)),U,6) W !?10,$P($G(^(0)),U,2)
"RTN","TIUCHLP",18,0)
 W !!
"RTN","TIUCHLP",19,0)
 I $$READ^TIUU("YO","Do you want to get patient data","YES") D GETPAT
"RTN","TIUCHLP",20,0)
 Q
"RTN","TIUCHLP",21,0)
GETPAT ; Gets Dictation data for a specific patient
"RTN","TIUCHLP",22,0)
 N TIU,TIUOUT,DFN,SUCCESS,TITLE
"RTN","TIUCHLP",23,0)
 F  D  Q:$D(DUOUT)!$D(DIROUT)!+$G(TIUOUT)
"RTN","TIUCHLP",24,0)
 . D MAIN^TIUMOVE(.TIU,.DFN)
"RTN","TIUCHLP",25,0)
 . I $D(TIU) D PATDATA(.TIU)
"RTN","TIUCHLP",26,0)
 . S TIUOUT=$$READ^TIUU("Y","... OK","YES")
"RTN","TIUCHLP",27,0)
 D MAKE^TIUPEFIX(.SUCCESS,DFN,.TITLE,.TIU,+XQADATA)
"RTN","TIUCHLP",28,0)
 I +SUCCESS S TIUDONE=1
"RTN","TIUCHLP",29,0)
 Q
"RTN","TIUCHLP",30,0)
PATDATA(X) ; Display/validate correct patient/treatment episode
"RTN","TIUCHLP",31,0)
 N DIR,Y
"RTN","TIUCHLP",32,0)
 W !!?1,"Patient: ",$$NAME^TIULS(X("PNM"),"LAST, FIRST MI"),?40,"SSN: ",X("SSN"),?62,"Sex: ",$P(X("SEX"),U,2),!
"RTN","TIUCHLP",33,0)
 W ?4,"Ward: ",$P(X("WARD"),U,2),?39,"Race: ",$E($P(X("RACE"),U,2),1,15),?62,"Age: ",X("AGE"),!
"RTN","TIUCHLP",34,0)
 W "Att Phys: ",$P(X("AMD"),U,2),?34,"Prim Phys: ",$P(X("PMD"),U,2),!
"RTN","TIUCHLP",35,0)
 W "Adm Date: ",$$DATE^TIULS(+X("EDT"),"MM/DD/YY@HR:MIN:SEC")
"RTN","TIUCHLP",36,0)
 W:X("LDT")]"" ?35,"Dis Date: ",$$DATE^TIULS(X("LDT"),"MM/DD/YY")
"RTN","TIUCHLP",37,0)
 W !
"RTN","TIUCHLP",38,0)
 W ?2,"Adm Dx: ",X("ADDX"),!
"RTN","TIUCHLP",39,0)
 I $D(X("DICTDT")) D
"RTN","TIUCHLP",40,0)
 . W !,"A DISCHARGE SUMMARY is already on file:",!
"RTN","TIUCHLP",41,0)
 . W ?2,"Dict'd: ",X("DICTDT"),?41,"By: ",X("AUTHOR"),!
"RTN","TIUCHLP",42,0)
 . W ?2,"Signed: ",X("SIGDT"),?35,"Cosigned: ",X("COSDT"),!
"RTN","TIUCHLP",43,0)
 Q
"RTN","TIUCHLP",44,0)
GETPN ; Help get Fields for PN Dictation/Error Resolution
"RTN","TIUCHLP",45,0)
 N TIU,DFN,TIUY,TITLE
"RTN","TIUCHLP",46,0)
 S DFN=+$$PATIENT^TIULA Q:+DFN'>0
"RTN","TIUCHLP",47,0)
 D ENPN^TIUVSIT(.TIU,+DFN,0)
"RTN","TIUCHLP",48,0)
 I '$D(TIU) Q
"RTN","TIUCHLP",49,0)
 S TIUY=$$CHEKPN(.TIU)
"RTN","TIUCHLP",50,0)
 D MAKE^TIUPEFIX(.SUCCESS,DFN,.TITLE,.TIU,+XQADATA)
"RTN","TIUCHLP",51,0)
 I +SUCCESS S TIUDONE=1
"RTN","TIUCHLP",52,0)
 Q
"RTN","TIUCHLP",53,0)
CHEKPN(X,TIUBY) ; Display/validate demographic/visit information
"RTN","TIUCHLP",54,0)
 W !!,"Progress Note Identifiers..."
"RTN","TIUCHLP",55,0)
 W !?14,"Patient Name:  ",$S($G(X("PNM"))]"":$G(X("PNM")),1:"UNKNOWN")
"RTN","TIUCHLP",56,0)
 W !?15,"Patient SSN:  ",$S($G(X("SSN"))]"":$G(X("SSN")),1:"UNKNOWN")
"RTN","TIUCHLP",57,0)
 W !?10,"Patient Location:  ",$S(+$G(X("LOC")):$P($G(X("LOC")),U,2),1:"UNKNOWN")
"RTN","TIUCHLP",58,0)
 W !?8,"Date/time of Visit:  ",$S($L($G(X("VSTR"))):$$DATE^TIULS($P(X("VSTR"),";",2),"MM/DD/YY HR:MIN"),1:"UNKNOWN")
"RTN","TIUCHLP",59,0)
 S Y=$$READ^TIUU("YO","   ...OK","YES")
"RTN","TIUCHLP",60,0)
 I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) Q 0
"RTN","TIUCHLP",61,0)
 I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) Q 0
"RTN","TIUCHLP",62,0)
 I +Y'>0 D
"RTN","TIUCHLP",63,0)
 . K X N TIUINOUT
"RTN","TIUCHLP",64,0)
 . S TIUINOUT=$$INOUT^TIUVSIT
"RTN","TIUCHLP",65,0)
 . I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) Q
"RTN","TIUCHLP",66,0)
 . I $P(TIUINOUT,U)="o" D MAIN^TIUVSIT(.X,DFN,"","","","",1,"",20,0)
"RTN","TIUCHLP",67,0)
 . I $P(TIUINOUT,U)'="o" D MAIN^TIUMOVE(.X,DFN,"","","",1,"LAST",1)
"RTN","TIUCHLP",68,0)
 . S Y=$S($D(X)>9:$$CHEKPN(.X,.TIUBY),1:0)
"RTN","TIUCHLP",69,0)
 Q Y
"RTN","TIUCNSLT")
0^9^B5552620
"RTN","TIUCNSLT",1,0)
TIUCNSLT ; SLC/JER - Patient movement look-up ;7/14/96  13:53
"RTN","TIUCNSLT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUCNSLT",3,0)
GETCNSLT(DFN) ;
"RTN","TIUCNSLT",4,0)
 ; Call with:     [DFN] - patient file entry number
"RTN","TIUCNSLT",5,0)
 ;   Returns:     TIUY  - Variable pointer to consult request
"RTN","TIUCNSLT",6,0)
AGN ; Loop for handling repeated attempts
"RTN","TIUCNSLT",7,0)
 N TIUI,TIUII,TIUER,TIUOK,TIUOUT,TIUX,TIUY,TIUMTSTR,TIUMLST,TIUCNT,X
"RTN","TIUCNSLT",8,0)
 S:+$G(DFN)'>0 DFN=+$$PATIENT^TIULA I +DFN'>0 S TIUOUT=1 Q 0
"RTN","TIUCNSLT",9,0)
 D SEND^GMRCTIU(DFN)
"RTN","TIUCNSLT",10,0)
 ; If no consult requests for patient, then quit
"RTN","TIUCNSLT",11,0)
 I $G(^TMP("GMRCR",$J,"TIU",1,0))["No Consults" D  Q 0
"RTN","TIUCNSLT",12,0)
 . W !!,$C(7),"No CONSULT REQUESTS to Result for ",$P($G(^DPT(DFN,0)),U),".",!
"RTN","TIUCNSLT",13,0)
 S TIUI=0 F  S TIUI=+$O(^TMP("GMRCR",$J,"TIU",TIUI)) Q:+TIUI'>0  D
"RTN","TIUCNSLT",14,0)
 . S TIUCNT=+$G(TIUCNT)+1
"RTN","TIUCNSLT",15,0)
 W !,"You must link your Result to a Consult Request...",!
"RTN","TIUCNSLT",16,0)
 D  I +TIUER G AGN
"RTN","TIUCNSLT",17,0)
 . W !,"The following CONSULT REQUEST"
"RTN","TIUCNSLT",18,0)
 . W $S(+TIUCNT>1:"(S) are",1:" is")," available:"
"RTN","TIUCNSLT",19,0)
 . S (TIUER,TIUOK,TIUI)=0
"RTN","TIUCNSLT",20,0)
 . F  S TIUI=$O(^TMP("GMRCR",$J,"TIU",TIUI)) Q:+TIUI'>0!+TIUER!+TIUOK  D
"RTN","TIUCNSLT",21,0)
 . . S TIUII=TIUI,TIUX=$G(^TMP("GMRCR",$J,"TIU",TIUI,0))
"RTN","TIUCNSLT",22,0)
 . . D WRITE I '(TIUI#5) D BREAK
"RTN","TIUCNSLT",23,0)
 . Q:$D(TIUOUT)
"RTN","TIUCNSLT",24,0)
 . I +TIUER S DFN=0 Q
"RTN","TIUCNSLT",25,0)
 . I TIUII#5 D BREAK Q:$D(TIUOUT)
"RTN","TIUCNSLT",26,0)
 . I +TIUER S DFN=0 Q
"RTN","TIUCNSLT",27,0)
 . S TIUX=$O(^TMP("GMRCR",$J,"TIU","B",+TIUOK,0)),^DISV(DUZ,"^GMR(123,",DFN)=+TIUX
"RTN","TIUCNSLT",28,0)
 . W "  ",+TIUX
"RTN","TIUCNSLT",29,0)
 S TIUY=+TIUX_";GMR(123,"
"RTN","TIUCNSLT",30,0)
 Q $G(TIUY)
"RTN","TIUCNSLT",31,0)
BREAK ; Handle prompting
"RTN","TIUCNSLT",32,0)
 W !,"CHOOSE 1-",TIUII W:$D(^TMP("GMRCR",$J,"TIU",TIUII+1,0)) !,"<RETURN> TO CONTINUE",!,"OR '^' TO QUIT" W ": " R X:DTIME
"RTN","TIUCNSLT",33,0)
 I $S('$T!(X["^"):1,X=""&'$D(^TMP("GMRCR",$J,"TIU",TIUII+1)):1,1:0) S TIUER=1 Q
"RTN","TIUCNSLT",34,0)
 I X="" Q
"RTN","TIUCNSLT",35,0)
 I X=" ",$D(^DISV(DUZ,"^GMR(123,",DFN)) S TIUX=^(DFN) I $D(TIUMLST("TIUMVDA",+TIUX)) S TIUOK=+$O(^TMP("GMRCR",$J,"TIU","C",+TIUX,0)) Q
"RTN","TIUCNSLT",36,0)
 I X'=+X!'$D(^TMP("GMRCR",$J,"TIU",+X)) W !!,$C(7),"INVALID RESPONSE",! G BREAK
"RTN","TIUCNSLT",37,0)
 S TIUOK=X
"RTN","TIUCNSLT",38,0)
 Q
"RTN","TIUCNSLT",39,0)
WRITE W !,TIUX
"RTN","TIUCNSLT",40,0)
 Q
"RTN","TIUCNSLT",41,0)
POST(TIUDA,STATUS) ; Post status updates to Consult Tracking
"RTN","TIUCNSLT",42,0)
 N GMRCDA S GMRCDA=+$P($G(^TIU(8925,+TIUDA,14)),U,5)
"RTN","TIUCNSLT",43,0)
 I +GMRCDA'>0 Q
"RTN","TIUCNSLT",44,0)
 D GET^GMRCTIU(GMRCDA,TIUDA,STATUS)
"RTN","TIUCNSLT",45,0)
 Q 
"RTN","TIUDD")
0^11^B13164803
"RTN","TIUDD",1,0)
TIUDD ; slc/KCM - Build menus in XUTL (file 8925.1) ;7/19/94  13:51 ;
"RTN","TIUDD",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUDD",3,0)
SET ;From: Cross reference in file 8925.1, field 99  Entry: DA  Exit: DA
"RTN","TIUDD",4,0)
 ;NOTE:  Lock ^TIU(8925.1,DA) when calling
"RTN","TIUDD",5,0)
 Q:$D(^TIU(8925.1,DA,0))[0
"RTN","TIUDD",6,0)
 I $D(^TIU(8925.1,DA,99)),$D(^XUTL("XQORM",DA_";TIU(8925.1,",0)),($P(^TIU(8925.1,DA,99),"^")=$P(^XUTL("XQORM",DA_";TIU(8925.1,",0),"^")) Q
"RTN","TIUDD",7,0)
 N TIUCOL,TIUCCOL,TIUROW,TIUCROW,TIUPOS,TIUTOT,S1,S2,X,X1
"RTN","TIUDD",8,0)
 K ^TMP("XQORM",$J) D KILL
"RTN","TIUDD",9,0)
 S TIUCOL=3
"RTN","TIUDD",10,0)
 S ^XUTL("XQORM",DA_";TIU(8925.1,","COL")=TIUCOL,(TIUTOT,S2)=0
"RTN","TIUDD",11,0)
 F  S S2=$O(^TIU(8925.1,DA,10,S2)) Q:S2'>0  D
"RTN","TIUDD",12,0)
 . S X=^TIU(8925.1,DA,10,S2,0) I '$D(^TIU(8925.1,+X,0)) Q
"RTN","TIUDD",13,0)
 . S X=$S(+$P(X,"^",3):+$P(X,"^",3),+$P(X,"^",2):+$P(X,"^",2),$L($P(X,"^",2)):"M"_$P(X,"^",2),1:"Z"_$P(^TIU(8925.1,+X,0),"^",2))
"RTN","TIUDD",14,0)
 . S ^TMP("XQORM",$J,X,S2)="",TIUTOT=TIUTOT+1
"RTN","TIUDD",15,0)
 S TIUROW=TIUTOT\TIUCOL+$S(TIUTOT#TIUCOL:1,1:0),TIUCCOL=1,TIUCROW=0,S1=""
"RTN","TIUDD",16,0)
 F  S S1=$O(^TMP("XQORM",$J,S1)) Q:S1=""  S S2=0 D  ;S1 is sequence
"RTN","TIUDD",17,0)
 . F  S S2=$O(^TMP("XQORM",$J,S1,S2))  Q:S2'>0  D  ;S2 is item subscript
"RTN","TIUDD",18,0)
 . . S X=^TIU(8925.1,DA,10,S2,0) ; X is the item node
"RTN","TIUDD",19,0)
 . . I '$D(^TIU(8925.1,+X,0)) K ^TIU(8925.1,DA,10,S2),^("B",+X,S2) S $P(^TIU(8925.1,DA,10,0),"^",3,4)=S2_"^"_($P(^TIU(8925.1,DA,10,0),"^",4)-1) Q
"RTN","TIUDD",20,0)
 . . S TIUCROW=TIUCROW+1 I TIUCROW>TIUROW S TIUCROW=1,TIUCCOL=TIUCCOL+1
"RTN","TIUDD",21,0)
 . . S TIUPOS=TIUCROW+(TIUCCOL/10)
"RTN","TIUDD",22,0)
 . . S X1=$S($L($P(X,"^",4)):$P(X,"^",4),1:$P(^TIU(8925.1,+X,0),"^",3))
"RTN","TIUDD",23,0)
 . . S X1=$TR(X1,",=;-","    ") Q:'$L(X1)
"RTN","TIUDD",24,0)
 . . S ^XUTL("XQORM",DA_";TIU(8925.1,",TIUPOS,0)=S2_"^"_+X_"^"_X1_"^"_$P(X,"^",2)
"RTN","TIUDD",25,0)
 . . S ^XUTL("XQORM",DA_";TIU(8925.1,","B",$$UP(X1),TIUPOS)=""
"RTN","TIUDD",26,0)
 . . I $L($P(X,"^",2)) S ^XUTL("XQORM",DA_";TIU(8925.1,","B",$$UP($P(X,"^",2)),TIUPOS)=1
"RTN","TIUDD",27,0)
 S X=$H,^XUTL("XQORM",DA_";TIU(8925.1,",0)=X,^TIU(8925.1,DA,99)=X
"RTN","TIUDD",28,0)
 K ^TMP("XQORM",$J)
"RTN","TIUDD",29,0)
 Q
"RTN","TIUDD",30,0)
UP(X) ; Convert X to upper case
"RTN","TIUDD",31,0)
 Q $TR(X,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","TIUDD",32,0)
KILL ; From: File 8925.1, Field 99  Entry: DA  Exit: DA
"RTN","TIUDD",33,0)
 K ^XUTL("XQORM",DA_";TIU(8925.1,") Q
"RTN","TIUDD",34,0)
REDO ; Update TIMESTAMP on self & parents when Print Name Changes
"RTN","TIUDD",35,0)
 ; From: File 8925.1, Field .03  Entry: DA  Exit: DA
"RTN","TIUDD",36,0)
 N I,X S X=$H I $D(^TIU(8925.1,DA,0)) S ^(99)=X,I=0
"RTN","TIUDD",37,0)
 F  S I=$O(^TIU(8925.1,"AD",DA,I)) Q:I'>0  D
"RTN","TIUDD",38,0)
 . I $D(^TIU(8925.1,I,0)) S ^(99)=X
"RTN","TIUDD",39,0)
 Q
"RTN","TIUDD",40,0)
REDOX ; From: Subfile 8925.14, Fields .01,2,3  Entry: DA(1)  Exit: DA(1)
"RTN","TIUDD",41,0)
 I $D(^TIU(8925.1,DA(1),0)) S ^(99)=$H Q
"RTN","TIUDD",42,0)
TREE ; Look back up tree to make sure item is not ancestor (input xform)
"RTN","TIUDD",43,0)
 ; From: 8925.14,.01 Entry: DA(1),X
"RTN","TIUDD",44,0)
 S TIUDDA=DA(1) K:X=TIUDDA X D TREE1 K TIUDDA,TIUDD
"RTN","TIUDD",45,0)
 Q
"RTN","TIUDD",46,0)
TREE1 ; Traverse up tree
"RTN","TIUDD",47,0)
 S TIUDD=0 F  Q:'$D(X)  S TIUDD=$O(^TIU(8925.1,"AD",TIUDDA,TIUDD)) Q:TIUDD'>0  K:TIUDD=X X Q:'$D(X)  D TREE2
"RTN","TIUDD",48,0)
 Q
"RTN","TIUDD",49,0)
TREE2 ; Recurse one level
"RTN","TIUDD",50,0)
 N TIUDDA S TIUDDA=TIUDD N TIUDD D TREE1
"RTN","TIUDD",51,0)
 Q
"RTN","TIUDD",52,0)
ASUBS(SUBJECT,TIUTYP,TIUSTAT,TIUIDT,DA) ; SET logic for "ASUB" X-ref
"RTN","TIUDD",53,0)
 N TIUI,TIUWORD S TIUI=0
"RTN","TIUDD",54,0)
 D PARSE^TIULS(SUBJECT,.TIUWORD)
"RTN","TIUDD",55,0)
 F  S TIUI=$O(TIUWORD(TIUI)) Q:+TIUI'>0  D
"RTN","TIUDD",56,0)
 . S ^TIU(8925,"ASUB",TIUWORD(TIUI),+TIUTYP,+TIUSTAT,+TIUIDT,+DA)=""
"RTN","TIUDD",57,0)
 Q
"RTN","TIUDD",58,0)
ASUBK(SUBJECT,TIUTYP,TIUSTAT,TIUIDT,DA) ; SET logic for "ASUB" X-ref
"RTN","TIUDD",59,0)
 N TIUI,TIUWORD S TIUI=0
"RTN","TIUDD",60,0)
 D PARSE^TIULS(SUBJECT,.TIUWORD)
"RTN","TIUDD",61,0)
 F  S TIUI=$O(TIUWORD(TIUI)) Q:+TIUI'>0  D
"RTN","TIUDD",62,0)
 . K ^TIU(8925,"ASUB",TIUWORD(TIUI),+TIUTYP,+TIUSTAT,+TIUIDT,+DA)
"RTN","TIUDD",63,0)
 Q
"RTN","TIUDD",64,0)
APRBS(TIUTYP,TIUSTAT,TIUIDT,DA,TIUPROB) ; SET logic for "APRB" X-ref
"RTN","TIUDD",65,0)
 N TIUI
"RTN","TIUDD",66,0)
 S TIUI=0 F  S TIUI=+$O(^TIU(8925.9,"B",+DA,TIUI)) Q:+TIUI'>0  D
"RTN","TIUDD",67,0)
 . S:$G(TIUPROB)']"" TIUPROB=$P($G(^TIU(8925.9,+TIUI,0)),U,5)
"RTN","TIUDD",68,0)
 . I TIUPROB]"" D
"RTN","TIUDD",69,0)
 . . S ^TIU(8925,"APRB",$$UPPER^TIULS(TIUPROB),+TIUTYP,+TIUSTAT,+TIUIDT,+DA)=""
"RTN","TIUDD",70,0)
 Q
"RTN","TIUDD",71,0)
APRBK(TIUTYP,TIUSTAT,TIUIDT,DA,TIUPROB) ; KILL logic for "APRB" X-ref
"RTN","TIUDD",72,0)
 N TIUI
"RTN","TIUDD",73,0)
 S TIUI=0 F  S TIUI=+$O(^TIU(8925.9,"B",+DA,TIUI)) Q:+TIUI'>0  D
"RTN","TIUDD",74,0)
 . S:$G(TIUPROB)']"" TIUPROB=$P($G(^TIU(8925.9,+TIUI,0)),U,5)
"RTN","TIUDD",75,0)
 . I TIUPROB]"" D
"RTN","TIUDD",76,0)
 . . K ^TIU(8925,"APRB",$$UPPER^TIULS(TIUPROB),+TIUTYP,+TIUSTAT,+TIUIDT,+DA)
"RTN","TIUDD",77,0)
 Q
"RTN","TIUDD0")
0^208^B45662787
"RTN","TIUDD0",1,0)
TIUDD0 ; SLC/JER - Cross-references on 8925
"RTN","TIUDD0",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUDD0",3,0)
SACLPT(FLD,X) ; SET Logic for ACLPT
"RTN","TIUDD0",4,0)
 ;"ACLPT" On .01 CLASS, .02 PT, 1301 INV RDT
"RTN","TIUDD0",5,0)
 N TIUD0,TIUD13
"RTN","TIUDD0",6,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD13=$G(^(13))
"RTN","TIUDD0",7,0)
 I $S(FLD=1501:1,FLD=1507:1,1:0) D
"RTN","TIUDD0",8,0)
 . I +$P(TIUD0,U),+$P(TIUD13,U),+$P(TIUD0,U,2),($P(TIUD0,U,5)'<6) S ^TIU(8925,"ACLPT",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",9,0)
 I FLD=.01 D
"RTN","TIUDD0",10,0)
 . I +$P(TIUD13,U),+$P(TIUD0,U,2),($P(TIUD0,U,5)'<6) S ^TIU(8925,"ACLPT",+$$CLINDOC^TIULC1(+X,+DA),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",11,0)
 I FLD=.02 D
"RTN","TIUDD0",12,0)
 . I +$P(TIUD0,U),+$P(TIUD13,U),($P(TIUD0,U,5)'<6) S ^TIU(8925,"ACLPT",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+X,$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",13,0)
 I FLD=1301 D
"RTN","TIUDD0",14,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),($P(TIUD0,U,5)'<6) S ^TIU(8925,"ACLPT",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD0,U,2),$$INVDATE(+X),DA)=""
"RTN","TIUDD0",15,0)
 Q
"RTN","TIUDD0",16,0)
 ;
"RTN","TIUDD0",17,0)
SACLAU(FLD,X) ; SET Logic for ACLAU
"RTN","TIUDD0",18,0)
 ; "ACLAU" X-REF ON .01 CLASS, 1202 AUTHOR, .02 PT, & 1301 INV RDT:
"RTN","TIUDD0",19,0)
 N TIUD0,TIUD13,TIUD12
"RTN","TIUDD0",20,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD13=$G(^(13)),TIUD12=$G(^(12))
"RTN","TIUDD0",21,0)
 I FLD=1501 D
"RTN","TIUDD0",22,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U),+$P(TIUD12,U,2) S ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD12,U,2),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",23,0)
 I FLD=.01 D
"RTN","TIUDD0",24,0)
 . I +$P(TIUD0,U,2),+$P(TIUD13,U),+$P(TIUD12,U,2) S ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+X,+DA),+$P(TIUD12,U,2),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",25,0)
 I FLD=1202 D
"RTN","TIUDD0",26,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U) S ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+X,+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",27,0)
 I FLD=.02 D
"RTN","TIUDD0",28,0)
 . I +$P(TIUD0,U),+$P(TIUD13,U),+$P(TIUD12,U,2) S ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD12,U,2),+X,$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",29,0)
 I FLD=1301 D
"RTN","TIUDD0",30,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD12,U,2) S ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD12,U,2),+$P(TIUD0,U,2),$$INVDATE(+X),DA)=""
"RTN","TIUDD0",31,0)
 Q
"RTN","TIUDD0",32,0)
 ;
"RTN","TIUDD0",33,0)
SACLAU1(FLD,X) ; SET LOGIC FOR ACLAU - TRANSCRIPTIONIST (ENTERED BY)
"RTN","TIUDD0",34,0)
 ; "ACLAU" X-REF ON .01 CLASS, 1302 ENTERED BY, .02 PT, & 1301 INV RDT:
"RTN","TIUDD0",35,0)
 N TIUD0,TIUD12,TIUD13
"RTN","TIUDD0",36,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD12=$G(^(12)),TIUD13=$G(^(13))
"RTN","TIUDD0",37,0)
 I FLD'=1302,(+$P(TIUD13,U,2)'=0),(+$P(TIUD13,U,2)=+$P(TIUD12,U,2)) Q
"RTN","TIUDD0",38,0)
 I FLD=1302,(+X'=0),(+X=+$P(TIUD12,U,2)) Q
"RTN","TIUDD0",39,0)
 I FLD=1501 D
"RTN","TIUDD0",40,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U),+$P(TIUD13,U,2) S ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD13,U,2),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",41,0)
 I FLD=.01 D
"RTN","TIUDD0",42,0)
 . I +$P(TIUD0,U,2),+$P(TIUD13,U),+$P(TIUD13,U,2) S ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+X,+DA),+$P(TIUD13,U,2),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",43,0)
 I FLD=1302 D
"RTN","TIUDD0",44,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U) S ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+X,+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",45,0)
 I FLD=.02 D
"RTN","TIUDD0",46,0)
 . I +$P(TIUD0,U),+$P(TIUD13,U),+$P(TIUD13,U,2) S ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD13,U,2),+X,$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",47,0)
 I FLD=1301 D
"RTN","TIUDD0",48,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U,2) S ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD13,U,2),+$P(TIUD0,U,2),$$INVDATE(+X),DA)=""
"RTN","TIUDD0",49,0)
 Q
"RTN","TIUDD0",50,0)
 ;
"RTN","TIUDD0",51,0)
SACLEC(FLD,X) ; SET Logic For ACLEC
"RTN","TIUDD0",52,0)
 ; "ACLEC" On .01 CLASS, 1208 EC, .02 PT, 1301 INV RDT:
"RTN","TIUDD0",53,0)
 N TIUD0,TIUD13,TIUD12
"RTN","TIUDD0",54,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD13=$G(^(13)),TIUD12=$G(^(12))
"RTN","TIUDD0",55,0)
 I $S(FLD=1501:1,FLD=1507:1,1:0) D
"RTN","TIUDD0",56,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U),+$P(TIUD12,U,8) S ^TIU(8925,"ACLEC",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD12,U,8),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",57,0)
 I FLD=.01 D
"RTN","TIUDD0",58,0)
 . I +$P(TIUD0,U,2),+$P(TIUD13,U),+$P(TIUD12,U,8) S ^TIU(8925,"ACLEC",+$$CLINDOC^TIULC1(+X,+DA),+$P(TIUD12,U,8),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",59,0)
 I FLD=1208 D
"RTN","TIUDD0",60,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U) S ^TIU(8925,"ACLEC",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+X,+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",61,0)
 I FLD=.02 D
"RTN","TIUDD0",62,0)
 . I +$P(TIUD0,U),+$P(TIUD13,U),+$P(TIUD12,U,8) S ^TIU(8925,"ACLEC",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD12,U,8),+X,$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",63,0)
 I FLD=1301 D
"RTN","TIUDD0",64,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD12,U,8) S ^TIU(8925,"ACLEC",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD12,U,8),+$P(TIUD0,U,2),$$INVDATE(+X),DA)=""
"RTN","TIUDD0",65,0)
 Q
"RTN","TIUDD0",66,0)
 ;
"RTN","TIUDD0",67,0)
SACLSB(FLD,X) ; SET Logic for ACLSB
"RTN","TIUDD0",68,0)
 ;"ACLSB" X-REF ON .01 CLASS, 1502 SIGNER, .02 PT, 1301 RDT:
"RTN","TIUDD0",69,0)
 N TIUD0,TIUD13,TIUD15
"RTN","TIUDD0",70,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD13=$G(^(13)),TIUD15=$G(^(15))
"RTN","TIUDD0",71,0)
 I FLD=.01 D
"RTN","TIUDD0",72,0)
 . I +$P(TIUD0,U,2),+$P(TIUD13,U),+$P(TIUD15,U,2) S ^TIU(8925,"ACLSB",+$$CLINDOC^TIULC1(+X,+DA),+$P(TIUD15,U,2),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",73,0)
 I FLD=1502 D
"RTN","TIUDD0",74,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U) S ^TIU(8925,"ACLSB",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+X,+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",75,0)
 I FLD=.02 D
"RTN","TIUDD0",76,0)
 . I +$P(TIUD0,U),+$P(TIUD13,U),+$P(TIUD15,U,2) S ^TIU(8925,"ACLSB",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD15,U,2),+X,$$INVDATE($P(TIUD13,U)),DA)=""
"RTN","TIUDD0",77,0)
 I FLD=1301 D
"RTN","TIUDD0",78,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD15,U,2) S ^TIU(8925,"ACLSB",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD15,U,2),+$P(TIUD0,U,2),$$INVDATE(+X),DA)=""
"RTN","TIUDD0",79,0)
 Q
"RTN","TIUDD0",80,0)
 ;
"RTN","TIUDD0",81,0)
SAPTLD(FLD,X) ; SET Logic for "APTLD"
"RTN","TIUDD0",82,0)
 ; APTLD on fields .02 PT, .01 TITLE, "1211;.07;.13" VSTR, .03 VISIT
"RTN","TIUDD0",83,0)
 N TIUD0,TIUD12
"RTN","TIUDD0",84,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD12=$G(^(12))
"RTN","TIUDD0",85,0)
 I FLD=.02 D
"RTN","TIUDD0",86,0)
 . I +TIUD0,+$P(TIUD0,U,7),$L($P(TIUD0,U,13)),+$P(TIUD12,U,11) D
"RTN","TIUDD0",87,0)
 . . N TIUVS
"RTN","TIUDD0",88,0)
 . . ; TIUVS="Hosp Loc;Visit/Adm Date/time;Visit Type"
"RTN","TIUDD0",89,0)
 . . S TIUVS=$P(TIUD12,U,11)_";"_$P(TIUD0,U,7)_";"_$P(TIUD0,U,13)
"RTN","TIUDD0",90,0)
 . . S ^TIU(8925,"APTLD",+X,+TIUD0,TIUVS,DA)=""
"RTN","TIUDD0",91,0)
 . . I +$P(TIUD0,U,3) S ^TIU(8925,"AVSTRV",+X,TIUVS,+$P(TIUD0,U,3),DA)=""
"RTN","TIUDD0",92,0)
 I FLD=.01 D
"RTN","TIUDD0",93,0)
 . I +$P(TIUD0,U,2),+$P(TIUD0,U,7),$L($P(TIUD0,U,13)),+$P(TIUD12,U,11) D
"RTN","TIUDD0",94,0)
 . . N TIUVS
"RTN","TIUDD0",95,0)
 . . ; TIUVS="Hosp Loc;Visit/Adm Date/time;Visit Type"
"RTN","TIUDD0",96,0)
 . . S TIUVS=$P(TIUD12,U,11)_";"_$P(TIUD0,U,7)_";"_$P(TIUD0,U,13)
"RTN","TIUDD0",97,0)
 . . S ^TIU(8925,"APTLD",+$P(TIUD0,U,2),+X,TIUVS,DA)=""
"RTN","TIUDD0",98,0)
 I FLD=1211 D
"RTN","TIUDD0",99,0)
 . I +TIUD0,+$P(TIUD0,U,2),+$P(TIUD0,U,7),$L($P(TIUD0,U,13)) D
"RTN","TIUDD0",100,0)
 . . N TIUVS
"RTN","TIUDD0",101,0)
 . . ; TIUVS="Hosp Loc;Visit/Adm Date/time;Visit Type"
"RTN","TIUDD0",102,0)
 . . S TIUVS=+X_";"_$P(TIUD0,U,7)_";"_$P(TIUD0,U,13)
"RTN","TIUDD0",103,0)
 . . S ^TIU(8925,"APTLD",+$P(TIUD0,U,2),+TIUD0,TIUVS,DA)=""
"RTN","TIUDD0",104,0)
 . . I +$P(TIUD0,U,3) S ^TIU(8925,"AVSTRV",+$P(TIUD0,U,2),TIUVS,+$P(TIUD0,U,3),DA)=""
"RTN","TIUDD0",105,0)
 I FLD=.07 D
"RTN","TIUDD0",106,0)
 . I +TIUD0,+$P(TIUD0,U,2),$L($P(TIUD0,U,13)),+$P(TIUD12,U,11) D
"RTN","TIUDD0",107,0)
 . . N TIUVS
"RTN","TIUDD0",108,0)
 . . ; TIUVS="Hosp Loc;Visit/Adm Date/time;Visit Type"
"RTN","TIUDD0",109,0)
 . . S TIUVS=$P(TIUD12,U,11)_";"_+X_";"_$P(TIUD0,U,13)
"RTN","TIUDD0",110,0)
 . . S ^TIU(8925,"APTLD",+$P(TIUD0,U,2),+TIUD0,TIUVS,DA)=""
"RTN","TIUDD0",111,0)
 . . I +$P(TIUD0,U,3) S ^TIU(8925,"AVSTRV",+$P(TIUD0,U,2),TIUVS,+$P(TIUD0,U,3),DA)=""
"RTN","TIUDD0",112,0)
 I FLD=.13 D
"RTN","TIUDD0",113,0)
 . I +TIUD0,+$P(TIUD0,U,2),+$P(TIUD0,U,7),+$P(TIUD12,U,11) D
"RTN","TIUDD0",114,0)
 . . N TIUVS
"RTN","TIUDD0",115,0)
 . . ; TIUVS="Hosp Loc;Visit/Adm Date/time;Visit Type"
"RTN","TIUDD0",116,0)
 . . S TIUVS=$P(TIUD12,U,11)_";"_$P(TIUD0,U,7)_";"_X
"RTN","TIUDD0",117,0)
 . . S ^TIU(8925,"APTLD",+$P(TIUD0,U,2),+TIUD0,TIUVS,DA)=""
"RTN","TIUDD0",118,0)
 . . I +$P(TIUD0,U,3) S ^TIU(8925,"AVSTRV",+$P(TIUD0,U,2),TIUVS,+$P(TIUD0,U,3),DA)=""
"RTN","TIUDD0",119,0)
 ; SET V-String/Visit Map if Visit record exists
"RTN","TIUDD0",120,0)
 I FLD=.03 D
"RTN","TIUDD0",121,0)
 . I +$P(TIUD0,U,2),+$P(TIUD0,U,7),$L($P(TIUD0,U,13)),+$P(TIUD12,U,11) D
"RTN","TIUDD0",122,0)
 . . N TIUVS
"RTN","TIUDD0",123,0)
 . . ; TIUVS="Hosp Loc;Visit/Adm Date/time;Visit Type"
"RTN","TIUDD0",124,0)
 . . S TIUVS=$P(TIUD12,U,11)_";"_$P(TIUD0,U,7)_";"_$P(TIUD0,U,13)
"RTN","TIUDD0",125,0)
 . . S ^TIU(8925,"AVSTRV",+$P(TIUD0,U,2),TIUVS,+X,DA)=""
"RTN","TIUDD0",126,0)
 Q
"RTN","TIUDD0",127,0)
 ;
"RTN","TIUDD0",128,0)
INVDATE(DATE) ; Inverts date
"RTN","TIUDD0",129,0)
 Q 9999999-DATE
"RTN","TIUDD01")
0^229^B41747242
"RTN","TIUDD01",1,0)
TIUDD01 ; SLC/JER - KILL LOGIC for Cross-references on 8925
"RTN","TIUDD01",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUDD01",3,0)
KACLPT(FLD,X) ; KILL Logic for ACLPT
"RTN","TIUDD01",4,0)
 N TIUD0,TIUD13
"RTN","TIUDD01",5,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD13=$G(^(13))
"RTN","TIUDD01",6,0)
 I $S(FLD=1501:1,FLD=1507:1,1:0) D
"RTN","TIUDD01",7,0)
 . I +$P(TIUD0,U),+$P(TIUD13,U),+$P(TIUD0,U,2) K ^TIU(8925,"ACLPT",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",8,0)
 I FLD=.01 D
"RTN","TIUDD01",9,0)
 . I +$P(TIUD13,U),+$P(TIUD0,U,2) K ^TIU(8925,"ACLPT",+$$CLINDOC^TIULC1(+X,+DA),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",10,0)
 I FLD=.02 D
"RTN","TIUDD01",11,0)
 . I +$P(TIUD0,U),+$P(TIUD13,U) K ^TIU(8925,"ACLPT",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+X,$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",12,0)
 I FLD=1301 D
"RTN","TIUDD01",13,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2) K ^TIU(8925,"ACLPT",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD0,U,2),$$INVDATE(+X),DA)
"RTN","TIUDD01",14,0)
 Q
"RTN","TIUDD01",15,0)
 ;
"RTN","TIUDD01",16,0)
KACLAU(FLD,X) ; KILL Logic for ACLAU
"RTN","TIUDD01",17,0)
 N TIUD0,TIUD13,TIUD12
"RTN","TIUDD01",18,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD13=$G(^(13)),TIUD12=$G(^(12))
"RTN","TIUDD01",19,0)
 I FLD=1501 D
"RTN","TIUDD01",20,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U),+$P(TIUD12,U,2) K ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD12,U,2),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",21,0)
 I FLD=.01 D
"RTN","TIUDD01",22,0)
 . I +$P(TIUD0,U,2),+$P(TIUD13,U),+$P(TIUD12,U,2) K ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+X,+DA),+$P(TIUD12,U,2),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",23,0)
 I FLD=1202 D
"RTN","TIUDD01",24,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U) K ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+X,+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",25,0)
 I FLD=.02 D
"RTN","TIUDD01",26,0)
 . I +$P(TIUD0,U),+$P(TIUD13,U),+$P(TIUD12,U,2) K ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD12,U,2),+X,$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",27,0)
 I FLD=1301 D
"RTN","TIUDD01",28,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD12,U,2) K ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD12,U,2),+$P(TIUD0,U,2),$$INVDATE(+X),DA)
"RTN","TIUDD01",29,0)
 Q
"RTN","TIUDD01",30,0)
 ;
"RTN","TIUDD01",31,0)
KACLAU1(FLD,X) ; KILL Logic for ACLAU - TRANSCRIPTIONIST (ENTERED BY)
"RTN","TIUDD01",32,0)
 N TIUD0,TIUD13,TIUD12
"RTN","TIUDD01",33,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD13=$G(^(13))
"RTN","TIUDD01",34,0)
 I FLD=1501 D
"RTN","TIUDD01",35,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U),+$P(TIUD13,U,2) K ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD13,U,2),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",36,0)
 I FLD=.01 D
"RTN","TIUDD01",37,0)
 . I +$P(TIUD0,U,2),+$P(TIUD13,U),+$P(TIUD13,U,2) K ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+X,+DA),+$P(TIUD13,U,2),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",38,0)
 I FLD=1302 D
"RTN","TIUDD01",39,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U) K ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+X,+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",40,0)
 I FLD=.02 D
"RTN","TIUDD01",41,0)
 . I +$P(TIUD0,U),+$P(TIUD13,U),+$P(TIUD13,U,2) K ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD13,U,2),+X,$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",42,0)
 I FLD=1301 D
"RTN","TIUDD01",43,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U,2) K ^TIU(8925,"ACLAU",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD13,U,2),+$P(TIUD0,U,2),$$INVDATE(+X),DA)
"RTN","TIUDD01",44,0)
 Q
"RTN","TIUDD01",45,0)
 ;
"RTN","TIUDD01",46,0)
KACLEC(FLD,X) ; KILL Logic For ACLEC
"RTN","TIUDD01",47,0)
 N TIUD0,TIUD13,TIUD12
"RTN","TIUDD01",48,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD13=$G(^(13)),TIUD12=$G(^(12))
"RTN","TIUDD01",49,0)
 I $S(FLD=1501:1,FLD=1507:1,1:0) D
"RTN","TIUDD01",50,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U),+$P(TIUD12,U,8) K ^TIU(8925,"ACLEC",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD12,U,8),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",51,0)
 I FLD=.01 D
"RTN","TIUDD01",52,0)
 . I +$P(TIUD0,U,2),+$P(TIUD13,U),+$P(TIUD12,U,8) K ^TIU(8925,"ACLEC",+$$CLINDOC^TIULC1(+X,+DA),+$P(TIUD12,U,8),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",53,0)
 I FLD=1208 D
"RTN","TIUDD01",54,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U) K ^TIU(8925,"ACLEC",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+X,+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",55,0)
 I FLD=.02 D
"RTN","TIUDD01",56,0)
 . I +$P(TIUD0,U),+$P(TIUD13,U),+$P(TIUD12,U,8) K ^TIU(8925,"ACLEC",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD12,U,8),+X,$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",57,0)
 I FLD=1301 D
"RTN","TIUDD01",58,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD12,U,8) K ^TIU(8925,"ACLEC",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD12,U,8),+$P(TIUD0,U,2),$$INVDATE(+X),DA)
"RTN","TIUDD01",59,0)
 Q
"RTN","TIUDD01",60,0)
 ;
"RTN","TIUDD01",61,0)
KACLSB(FLD,X) ; KILL Logic for ACLSB
"RTN","TIUDD01",62,0)
 N TIUD0,TIUD13,TIUD15
"RTN","TIUDD01",63,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD13=$G(^(13)),TIUD15=$G(^(15))
"RTN","TIUDD01",64,0)
 I FLD=.01 D
"RTN","TIUDD01",65,0)
 . I +$P(TIUD0,U,2),+$P(TIUD13,U),+$P(TIUD15,U,2) K ^TIU(8925,"ACLSB",+$$CLINDOC^TIULC1(+X,+DA),+$P(TIUD15,U,2),+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",66,0)
 I FLD=1502 D
"RTN","TIUDD01",67,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD13,U) K ^TIU(8925,"ACLSB",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+X,+$P(TIUD0,U,2),$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",68,0)
 I FLD=.02 D
"RTN","TIUDD01",69,0)
 . I +$P(TIUD0,U),+$P(TIUD13,U),+$P(TIUD15,U,2) K ^TIU(8925,"ACLSB",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD15,U,2),+X,$$INVDATE($P(TIUD13,U)),DA)
"RTN","TIUDD01",70,0)
 I FLD=1301 D
"RTN","TIUDD01",71,0)
 . I +$P(TIUD0,U),+$P(TIUD0,U,2),+$P(TIUD15,U,2) K ^TIU(8925,"ACLSB",+$$CLINDOC^TIULC1(+$P(TIUD0,U),+DA),+$P(TIUD15,U,2),+$P(TIUD0,U,2),$$INVDATE(+X),DA)
"RTN","TIUDD01",72,0)
 Q
"RTN","TIUDD01",73,0)
 ;
"RTN","TIUDD01",74,0)
KAPTLD(FLD,X) ; KILL Logic for "APTLD"
"RTN","TIUDD01",75,0)
 ; APTLD on fields .02,.01,"1211;.07;.13",.03
"RTN","TIUDD01",76,0)
 N TIUD0,TIUD12
"RTN","TIUDD01",77,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD12=$G(^(12))
"RTN","TIUDD01",78,0)
 I FLD=.02 D
"RTN","TIUDD01",79,0)
 . I +TIUD0,+$P(TIUD0,U,7),$L($P(TIUD0,U,13)),+$P(TIUD12,U,11) D
"RTN","TIUDD01",80,0)
 . . N TIUVS
"RTN","TIUDD01",81,0)
 . . ; TIUVS="Hosp Loc;Visit/Adm Date/time;Visit Type"
"RTN","TIUDD01",82,0)
 . . S TIUVS=$P(TIUD12,U,11)_";"_$P(TIUD0,U,7)_";"_$P(TIUD0,U,13)
"RTN","TIUDD01",83,0)
 . . K ^TIU(8925,"APTLD",+X,+TIUD0,TIUVS,DA)
"RTN","TIUDD01",84,0)
 . . I +$P(TIUD0,U,3) K ^TIU(8925,"AVSTRV",+X,TIUVS,+$P(TIUD0,U,3),DA)
"RTN","TIUDD01",85,0)
 I FLD=.01 D
"RTN","TIUDD01",86,0)
 . I +$P(TIUD0,U,2),+$P(TIUD0,U,7),$L($P(TIUD0,U,13)),+$P(TIUD12,U,11) D
"RTN","TIUDD01",87,0)
 . . N TIUVS
"RTN","TIUDD01",88,0)
 . . ; TIUVS="Hosp Loc;Visit/Adm Date/time;Visit Type"
"RTN","TIUDD01",89,0)
 . . S TIUVS=$P(TIUD12,U,11)_";"_$P(TIUD0,U,7)_";"_$P(TIUD0,U,13)
"RTN","TIUDD01",90,0)
 . . K ^TIU(8925,"APTLD",+$P(TIUD0,U,2),+X,TIUVS,DA)
"RTN","TIUDD01",91,0)
 I FLD=1211 D
"RTN","TIUDD01",92,0)
 . I +TIUD0,+$P(TIUD0,U,2),+$P(TIUD0,U,7),$L($P(TIUD0,U,13)) D
"RTN","TIUDD01",93,0)
 . . N TIUVS
"RTN","TIUDD01",94,0)
 . . ; TIUVS="Hosp Loc;Visit/Adm Date/time;Visit Type"
"RTN","TIUDD01",95,0)
 . . S TIUVS=+X_";"_$P(TIUD0,U,7)_";"_$P(TIUD0,U,13)
"RTN","TIUDD01",96,0)
 . . K ^TIU(8925,"APTLD",+$P(TIUD0,U,2),+TIUD0,TIUVS,DA)
"RTN","TIUDD01",97,0)
 . . I +$P(TIUD0,U,3) K ^TIU(8925,"AVSTRV",+$P(TIUD0,U,2),TIUVS,+$P(TIUD0,U,3),DA)
"RTN","TIUDD01",98,0)
 I FLD=.07 D
"RTN","TIUDD01",99,0)
 . I +TIUD0,+$P(TIUD0,U,2),$L($P(TIUD0,U,13)),+$P(TIUD12,U,11) D
"RTN","TIUDD01",100,0)
 . . N TIUVS
"RTN","TIUDD01",101,0)
 . . ; TIUVS="Hosp Loc;Visit/Adm Date/time;Visit Type"
"RTN","TIUDD01",102,0)
 . . S TIUVS=$P(TIUD12,U,11)_";"_+X_";"_$P(TIUD0,U,13)
"RTN","TIUDD01",103,0)
 . . K ^TIU(8925,"APTLD",+$P(TIUD0,U,2),+TIUD0,TIUVS,DA)
"RTN","TIUDD01",104,0)
 . . I +$P(TIUD0,U,3) K ^TIU(8925,"AVSTRV",+$P(TIUD0,U,2),TIUVS,+$P(TIUD0,U,3),DA)
"RTN","TIUDD01",105,0)
 I FLD=.13 D
"RTN","TIUDD01",106,0)
 . I +TIUD0,+$P(TIUD0,U,2),+$P(TIUD0,U,7),+$P(TIUD12,U,11) D
"RTN","TIUDD01",107,0)
 . . N TIUVS
"RTN","TIUDD01",108,0)
 . . ; TIUVS="Hosp Loc;Visit/Adm Date/time;Visit Type"
"RTN","TIUDD01",109,0)
 . . S TIUVS=$P(TIUD12,U,11)_";"_$P(TIUD0,U,7)_";"_X
"RTN","TIUDD01",110,0)
 . . K ^TIU(8925,"APTLD",+$P(TIUD0,U,2),+TIUD0,TIUVS,DA)
"RTN","TIUDD01",111,0)
 . . I +$P(TIUD0,U,3) K ^TIU(8925,"AVSTRV",+$P(TIUD0,U,2),TIUVS,+$P(TIUD0,U,3),DA)
"RTN","TIUDD01",112,0)
 ; SET V-String/Visit Map if Visit record exists
"RTN","TIUDD01",113,0)
 I FLD=.03 D
"RTN","TIUDD01",114,0)
 . I +$P(TIUD0,U,2),+$P(TIUD0,U,7),$L($P(TIUD0,U,13)),+$P(TIUD12,U,11) D
"RTN","TIUDD01",115,0)
 . . N TIUVS
"RTN","TIUDD01",116,0)
 . . ; TIUVS="Hosp Loc;Visit/Adm Date/time;Visit Type"
"RTN","TIUDD01",117,0)
 . . S TIUVS=$P(TIUD12,U,11)_";"_$P(TIUD0,U,7)_";"_$P(TIUD0,U,13)
"RTN","TIUDD01",118,0)
 . . K ^TIU(8925,"AVSTRV",+$P(TIUD0,U,2),TIUVS,+X,DA)
"RTN","TIUDD01",119,0)
 Q
"RTN","TIUDD01",120,0)
 ;
"RTN","TIUDD01",121,0)
INVDATE(DATE) ; Inverts date
"RTN","TIUDD01",122,0)
 Q 9999999-DATE
"RTN","TIUDD8")
0^12^B4030714
"RTN","TIUDD8",1,0)
TIUDD8 ; slc/KCM - Build menus in XUTL (file 8925.8) ;7/19/94  13:51 ;
"RTN","TIUDD8",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUDD8",3,0)
SET ;From: Cross reference in file 8925.8, field 99  Entry: DA  Exit: DA
"RTN","TIUDD8",4,0)
 ;NOTE:  Lock ^TIU(8925.8,DA) when calling
"RTN","TIUDD8",5,0)
 Q:'$D(^TIU(8925.8,1,0))
"RTN","TIUDD8",6,0)
 I $P($G(^TIU(8925.8,1,99)),"^")=$P($G(^XUTL("XQORM","1;TIU(8925.8,",0)),"^") Q
"RTN","TIUDD8",7,0)
 N TIUCOL,TIUCCOL,TIUROW,TIUCROW,TIUPOS,TIUTOT,S1,S2,X,X1
"RTN","TIUDD8",8,0)
 K ^TMP("XQORM",$J) D KILL
"RTN","TIUDD8",9,0)
 S TIUCOL=3
"RTN","TIUDD8",10,0)
 S ^XUTL("XQORM","1;TIU(8925.8,","COL")=TIUCOL,TIUTOT=0,S1=""
"RTN","TIUDD8",11,0)
 F  S S1=$O(^TIU(8925.8,"B",S1)) Q:S1']""  D
"RTN","TIUDD8",12,0)
 . S S2=+$O(^TIU(8925.8,"B",S1,0)) Q:+S2'>0
"RTN","TIUDD8",13,0)
 . S TIUTOT=TIUTOT+1,^TMP("XQORM",$J,TIUTOT,S2)=""
"RTN","TIUDD8",14,0)
 S TIUROW=TIUTOT\TIUCOL+$S(TIUTOT#TIUCOL:1,1:0),TIUCCOL=1,TIUCROW=0,S1=""
"RTN","TIUDD8",15,0)
 F  S S1=$O(^TMP("XQORM",$J,S1)) Q:S1=""  S S2=0 D  ;S1 is sequence
"RTN","TIUDD8",16,0)
 . F  S S2=$O(^TMP("XQORM",$J,S1,S2))  Q:S2'>0  D  ;S2 is record #
"RTN","TIUDD8",17,0)
 . . S X=^TIU(8925.8,S2,0) ; X is the search category record
"RTN","TIUDD8",18,0)
 . . S TIUCROW=TIUCROW+1 I TIUCROW>TIUROW S TIUCROW=1,TIUCCOL=TIUCCOL+1
"RTN","TIUDD8",19,0)
 . . S TIUPOS=TIUCROW+(TIUCCOL/10)
"RTN","TIUDD8",20,0)
 . . S X1=$S($L($P(X,"^",3)):$P(X,"^",3),1:$$MIXED^TIULS($P(X,"^")))
"RTN","TIUDD8",21,0)
 . . S X1=$TR(X1,",=;-","    ") Q:'$L(X1)
"RTN","TIUDD8",22,0)
 . . S ^XUTL("XQORM",1_";TIU(8925.8,",TIUPOS,0)=+S1_"^"_+S2_"^"_X1_"^"_+S1
"RTN","TIUDD8",23,0)
 . . S ^XUTL("XQORM","1;TIU(8925.8,","B",$$UP(X1),TIUPOS)=""
"RTN","TIUDD8",24,0)
 . . I +S1 S ^XUTL("XQORM","1;TIU(8925.8,","B",+S1,TIUPOS)=1
"RTN","TIUDD8",25,0)
 S X=$H,^XUTL("XQORM","1;TIU(8925.8,",0)=X,^TIU(8925.8,1,99)=X
"RTN","TIUDD8",26,0)
 K ^TMP("XQORM",$J)
"RTN","TIUDD8",27,0)
 Q
"RTN","TIUDD8",28,0)
UP(X) ; Convert X to upper case
"RTN","TIUDD8",29,0)
 Q $TR(X,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","TIUDD8",30,0)
KILL ; From: File 8925.8, Field 99  Entry: DA  Exit: DA
"RTN","TIUDD8",31,0)
 K ^XUTL("XQORM","1;TIU(8925.8,") Q
"RTN","TIUDD8",32,0)
REDO ; Update TIMESTAMP on Record #1 when Display Name Changes
"RTN","TIUDD8",33,0)
 ; From: File 8925.8, Field .03  Entry: DA  Exit: DA
"RTN","TIUDD8",34,0)
 N I,X S X=$H I $D(^TIU(8925.8,1,0)) S ^TIU(8925.8,1,99)=X,I=0
"RTN","TIUDD8",35,0)
 Q
"RTN","TIUDD98")
0^13^B6186915
"RTN","TIUDD98",1,0)
TIUDD98 ; slc/KCM - Build menus in XUTL (file 8925.1) ;7/19/94  13:51 ;
"RTN","TIUDD98",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUDD98",3,0)
SET ;From: Cross reference in file 8925.98, field 99  Entry: DA  Exit: DA
"RTN","TIUDD98",4,0)
 ;NOTE:  Lock ^TIU(8925.98,DA) when calling
"RTN","TIUDD98",5,0)
 Q:$D(^TIU(8925.98,DA,0))[0
"RTN","TIUDD98",6,0)
 I $D(^TIU(8925.98,DA,99)),$D(^XUTL("XQORM",DA_";TIU(8925.98,",0)),($P(^TIU(8925.98,DA,99),"^")=$P(^XUTL("XQORM",DA_";TIU(8925.98,",0),"^")) Q
"RTN","TIUDD98",7,0)
 N TIUCOL,TIUCCOL,TIUROW,TIUCROW,TIUPOS,TIUTOT,S1,S2,X,X1
"RTN","TIUDD98",8,0)
 K ^TMP("XQORM",$J) D KILL
"RTN","TIUDD98",9,0)
 S TIUCOL=3
"RTN","TIUDD98",10,0)
 S ^XUTL("XQORM",DA_";TIU(8925.98,","COL")=TIUCOL,(TIUTOT,S2)=0
"RTN","TIUDD98",11,0)
 F  S S2=$O(^TIU(8925.98,DA,10,S2)) Q:S2'>0  D
"RTN","TIUDD98",12,0)
 . S X=^TIU(8925.98,DA,10,S2,0) I '$D(^TIU(8925.1,+$P(X,U),0)) Q
"RTN","TIUDD98",13,0)
 . S X=$S(+$P(X,"^",2):+$P(X,"^",2),$P(X,"^",3)]"":$P(X,"^",3),1:$P($G(^TIU(8925.1,+X,0)),U))
"RTN","TIUDD98",14,0)
 . S ^TMP("XQORM",$J,X,S2)="",TIUTOT=TIUTOT+1
"RTN","TIUDD98",15,0)
 S TIUROW=TIUTOT\TIUCOL+$S(TIUTOT#TIUCOL:1,1:0),TIUCCOL=1,TIUCROW=0,S1=""
"RTN","TIUDD98",16,0)
 F  S S1=$O(^TMP("XQORM",$J,S1)) Q:S1=""  S S2=0 D  ;S1 is sequence
"RTN","TIUDD98",17,0)
 . F  S S2=$O(^TMP("XQORM",$J,S1,S2))  Q:S2'>0  D  ;S2 is item subscript
"RTN","TIUDD98",18,0)
 . . S X=^TIU(8925.98,DA,10,S2,0) ; X is the item node
"RTN","TIUDD98",19,0)
 . . I '$D(^TIU(8925.1,+$P(X,U),0)) D  Q
"RTN","TIUDD98",20,0)
 . . . K ^TIU(8925.98,DA,10,S2),^TIU(8925.98,DA,10,"B",+X,S2)
"RTN","TIUDD98",21,0)
 . . . S $P(^TIU(8925.98,DA,10,0),"^",3,4)=S2_"^"_($P(^TIU(8925.98,DA,10,0),"^",4)-1)
"RTN","TIUDD98",22,0)
 . . S TIUCROW=TIUCROW+1 I TIUCROW>TIUROW S TIUCROW=1,TIUCCOL=TIUCCOL+1
"RTN","TIUDD98",23,0)
 . . S TIUPOS=TIUCROW+(TIUCCOL/10)
"RTN","TIUDD98",24,0)
 . . S X1=$S($L($P(X,"^",3)):$P(X,"^",3),1:$P(^TIU(8925.1,+$P(X,U),0),"^",3))
"RTN","TIUDD98",25,0)
 . . S X1=$E(X1,1,22) I $E(X1,$L(X1))=" " D
"RTN","TIUDD98",26,0)
 . . . N I F I=$L(X1):-1:1 Q:$E(X1,I)'=" "  S X1=$E(X1,1,(I-1))
"RTN","TIUDD98",27,0)
 . . S X1=$TR(X1,",=;-","    ") Q:'$L(X1)
"RTN","TIUDD98",28,0)
 . . S ^XUTL("XQORM",DA_";TIU(8925.98,",TIUPOS,0)=S2_"^"_+$P(X,U)_"^"_X1_"^"_$P(X,"^",2)
"RTN","TIUDD98",29,0)
 . . S ^XUTL("XQORM",DA_";TIU(8925.98,","B",$$UP(X1),TIUPOS)=""
"RTN","TIUDD98",30,0)
 . . I $L($P(X,"^",2)) S ^XUTL("XQORM",DA_";TIU(8925.98,","B",$$UP($P(X,"^",2)),TIUPOS)=1
"RTN","TIUDD98",31,0)
 S X=$H,^XUTL("XQORM",DA_";TIU(8925.98,",0)=X,^TIU(8925.98,DA,99)=X
"RTN","TIUDD98",32,0)
 K ^TMP("XQORM",$J)
"RTN","TIUDD98",33,0)
 Q
"RTN","TIUDD98",34,0)
UP(X) ; Convert X to upper case
"RTN","TIUDD98",35,0)
 Q $TR(X,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","TIUDD98",36,0)
KILL ; From: File 8925.98, Field 99  Entry: DA  Exit: DA
"RTN","TIUDD98",37,0)
 K ^XUTL("XQORM",DA_";TIU(8925.98,") Q
"RTN","TIUDD98",38,0)
REDO ; Update TIMESTAMP on self when Print Name Changes
"RTN","TIUDD98",39,0)
 ; From: File 8925.9801, Field .03  Entry: DA  Exit: DA
"RTN","TIUDD98",40,0)
 I $D(^TIU(8925.98,+$G(DA(1)),0)) S ^(99)=$H
"RTN","TIUDD98",41,0)
 Q
"RTN","TIUDEV")
0^14^B980528
"RTN","TIUDEV",1,0)
TIUDEV ; SLC/JER - Device Handling Utilities ;4/14/94  14:38
"RTN","TIUDEV",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUDEV",3,0)
DEVICE(IO,TIUDEV) ; Calls to Device Handler
"RTN","TIUDEV",4,0)
 N %I,%T,%Y,POP,%ZIS,IOP
"RTN","TIUDEV",5,0)
 S:$D(TIUDEV) %ZIS("B")=TIUDEV
"RTN","TIUDEV",6,0)
 S %ZIS="Q" D ^%ZIS
"RTN","TIUDEV",7,0)
 I +$G(POP) S ION="" W !,$C(7),"TRY LATER"
"RTN","TIUDEV",8,0)
 Q ION
"RTN","TIUDEV",9,0)
QUE(ZTRTN,ZTIO) ; Queue output
"RTN","TIUDEV",10,0)
 N %,ZTDTH,ZTSAVE,ZTSK
"RTN","TIUDEV",11,0)
 Q:'$D(ZTRTN)  K IO("Q"),ZTSAVE
"RTN","TIUDEV",12,0)
 F %="DA","DFN","TIU*","VALM*","^TMP(""TIURIDX"",$J," S ZTSAVE(%)=""
"RTN","TIUDEV",13,0)
 S:'$D(ZTDESC) ZTDESC="PRINT DOCUMENTS"
"RTN","TIUDEV",14,0)
 D ^%ZTLOAD W !,$S($D(ZTSK):"Request Queued!",1:"Request Cancelled!")
"RTN","TIUDEV",15,0)
 K ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE D ^%ZISC
"RTN","TIUDEV",16,0)
 S IOP="HOME" D ^%ZIS
"RTN","TIUDEV",17,0)
 Q
"RTN","TIUDIRH")
0^16^B12733935
"RTN","TIUDIRH",1,0)
TIUDIRH ; SLC/SBW - Help for DIR call (READ^GMRDU) ;4/12/93
"RTN","TIUDIRH",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUDIRH",3,0)
REL ;Help for release from transcription or edit
"RTN","TIUDIRH",4,0)
 W !,"Enter either 'Y' or 'N'"
"RTN","TIUDIRH",5,0)
 W !,"To hold the document in a DRAFT state, where only you may see it, enter 'NO'."
"RTN","TIUDIRH",6,0)
 W !,"If you are finished editing, releasing the document will make it available"
"RTN","TIUDIRH",7,0)
 W !,"for others to view."
"RTN","TIUDIRH",8,0)
 Q
"RTN","TIUDIRH",9,0)
SBACK ;Help for send back report for retranscription or edit
"RTN","TIUDIRH",10,0)
 W !,"Enter either 'Y' or 'N'"
"RTN","TIUDIRH",11,0)
 W !,"When a transcriptionist or an author creates a new report, it must be"
"RTN","TIUDIRH",12,0)
 W !,"released before MAS or Clinicians can view it. Sending the report back to"
"RTN","TIUDIRH",13,0)
 W !,"transcription changes the status from released to unreleased and retricts"
"RTN","TIUDIRH",14,0)
 W !,"it from being viewed by MAS or clinicians."
"RTN","TIUDIRH",15,0)
 Q
"RTN","TIUDIRH",16,0)
VER ;Help for verify reports
"RTN","TIUDIRH",17,0)
 W !,"Enter either 'Y' or 'N'"
"RTN","TIUDIRH",18,0)
 W !,"Verification is quality assurance step done prior to allowing Clinicians to"
"RTN","TIUDIRH",19,0)
 W !,"view report. Verify means it passes this step."
"RTN","TIUDIRH",20,0)
 Q
"RTN","TIUDIRH",21,0)
UNVER ;Help for unverify reports
"RTN","TIUDIRH",22,0)
 W !,"Enter either 'Y' or 'N'"
"RTN","TIUDIRH",23,0)
 W !,"Verification is quality assurance step done prior to allowing Clinicians to"
"RTN","TIUDIRH",24,0)
 W !,"view report. Unverify means it was verified but now it needs to be unverified."
"RTN","TIUDIRH",25,0)
 Q
"RTN","TIUDIRH",26,0)
SIG ;Help for sign report
"RTN","TIUDIRH",27,0)
 W !,"Enter either 'Y' or 'N'"
"RTN","TIUDIRH",28,0)
 W !,"If this report is accurate and meets clinician's approval, it can be"
"RTN","TIUDIRH",29,0)
 W !,"electronically signed now."
"RTN","TIUDIRH",30,0)
 Q
"RTN","TIUDIRH",31,0)
OCSIG ;Help for sign report on chart
"RTN","TIUDIRH",32,0)
 W !,"Enter either 'Y' or 'N'"
"RTN","TIUDIRH",33,0)
 W !,"This allows the electronic record to be marked to indicate that the author "
"RTN","TIUDIRH",34,0)
 W !,"and/or attending physician signed on the chart copy."
"RTN","TIUDIRH",35,0)
 Q
"RTN","TIUDIRH",36,0)
DEF ;Help for edit default format
"RTN","TIUDIRH",37,0)
 W !,"Enter either 'Y' or 'N'"
"RTN","TIUDIRH",38,0)
 W !,"Upon creation of an original report, the default format will be entered into the"
"RTN","TIUDIRH",39,0)
 W !,"text portion of the new record. If the same text is entered for each original"
"RTN","TIUDIRH",40,0)
 W !,"report, setting up a default format will eliminate the entry of this text."
"RTN","TIUDIRH",41,0)
 Q
"RTN","TIUDIRH",42,0)
FIL ;Help for retry the upload filer
"RTN","TIUDIRH",43,0)
 W !,"Enter either 'Y' or 'N'"
"RTN","TIUDIRH",44,0)
 W !,"Allows the reports that were unable to be filed into DHCP at upload time"
"RTN","TIUDIRH",45,0)
 W !,"to be reprocessed in order to try to file them into DHCP again."
"RTN","TIUDIRH",46,0)
 Q
"RTN","TIUDIRH",47,0)
REAS1 ;Help for reassign by MIS Manager if report is uneditable.
"RTN","TIUDIRH",48,0)
 W !,"Enter either 'Y' or 'N'"
"RTN","TIUDIRH",49,0)
 W !,"Report is uneditable. If signed Original is assigned to wrong patient or"
"RTN","TIUDIRH",50,0)
 W !,"admission or signed Addendum is assigned to wrong original, the MIS Manager"
"RTN","TIUDIRH",51,0)
 W !,"can reassign it. The MIS Manager can also promote Addendum to be an Original."
"RTN","TIUDIRH",52,0)
 Q
"RTN","TIUDIRH",53,0)
REAS2 ;Help for reassign by MIS Manager if report is uneditable.
"RTN","TIUDIRH",54,0)
 W !,"Enter either 'Y' or 'N'"
"RTN","TIUDIRH",55,0)
 W !,"If Addendum should be the original, the MIS Manager can promote it to be "
"RTN","TIUDIRH",56,0)
 W !,"an Original."
"RTN","TIUDIRH",57,0)
 Q
"RTN","TIUDIRH",58,0)
CHART ;Help for mark printed summaries as chart copies.
"RTN","TIUDIRH",59,0)
 W !,"Enter either 'Y' or 'N'"
"RTN","TIUDIRH",60,0)
 W !,"If you enter YES, printed 10-1000s for summaries will be MARK as"
"RTN","TIUDIRH",61,0)
 W !,"CHART COPY."
"RTN","TIUDIRH",62,0)
 Q
"RTN","TIUDIRT")
0^17^B10082846
"RTN","TIUDIRT",1,0)
TIUDIRT ; SLC/SBW - IRT interface routines ;3/16/93  06:08
"RTN","TIUDIRT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUDIRT",3,0)
SIGNIRT(TIUDA) ; Update SIGNED & REVIEWED fields in IRT Rec
"RTN","TIUDIRT",4,0)
 N DA,DIC,DR,DIQ,TIUPARM,TIUDATA,TIUDS,TIUSB,TIUDR,TIUB,TIUIRTDA,TIUFLG
"RTN","TIUDIRT",5,0)
 N TIUQUIT,DFN,TIUDDT,TIU,TIUDPRM,TIUD12,TIUD15
"RTN","TIUDIRT",6,0)
 D SETUP(TIUDA)
"RTN","TIUDIRT",7,0)
 Q:+$G(TIUQUIT)
"RTN","TIUDIRT",8,0)
 D CHECK^DGJSUM(DFN,TIUDDT,.TIUPARM,.TIUIRTDA,.TIU,.TIUFLG,$P(TIUDPRM(0),U,12))
"RTN","TIUDIRT",9,0)
 Q:'+$G(TIUPARM)!('+$G(TIUIRTDA))
"RTN","TIUDIRT",10,0)
 I +$G(TIUFLG) D UPDATE
"RTN","TIUDIRT",11,0)
 S TIUD12=$G(^TIU(8925,+TIUDA,12)),TIUD15=$G(^TIU(8925,+TIUDA,15))
"RTN","TIUDIRT",12,0)
 S (TIUDS,TIUSB,TIUDR,TIUB)="@"
"RTN","TIUDIRT",13,0)
 D:TIUD15]""  ;If data exist, set variables
"RTN","TIUDIRT",14,0)
 . ;Review data set here so it exist in case there is no signed data
"RTN","TIUDIRT",15,0)
 . S TIUDR=$S($P(TIUD12,U,4)=$P(TIUD12,U,9):$P(TIUD15,U),1:$P(TIUD15,U,7))
"RTN","TIUDIRT",16,0)
 . I TIUDR]"" S TIUB=$S($P(TIUD12,U,4)=$P(TIUD12,U,9):$P(TIUD15,U,2),1:$P(TIUD15,U,8))
"RTN","TIUDIRT",17,0)
 . E  S TIUDR="@"
"RTN","TIUDIRT",18,0)
 . ;Signed data included
"RTN","TIUDIRT",19,0)
 . S TIUDS=$P(TIUD15,U)
"RTN","TIUDIRT",20,0)
 . I TIUDS]"" S TIUSB=$P(TIUD15,U,2)
"RTN","TIUDIRT",21,0)
 . E  S TIUDS=TIUDR,TIUSB=TIUB ;If no signed data, set to reviewed data
"RTN","TIUDIRT",22,0)
 . I '+$P($G(TIUPARM),U,3) D  ;Review data not required
"RTN","TIUDIRT",23,0)
 . . S (TIUDR,TIUB)="@"
"RTN","TIUDIRT",24,0)
 D SIGUP^DGJSUM(TIUIRTDA,TIUDS,TIUSB,TIUDR,TIUB,TIUPARM)
"RTN","TIUDIRT",25,0)
 Q
"RTN","TIUDIRT",26,0)
UPDTIRT(TIU,TIUDA) ; Update IRT record
"RTN","TIUDIRT",27,0)
 N DA,DIC,DIQ,DR,TIUPARM,TIUIRTDA,DFN,TIUDDT,TIUQUIT,TIUDPRM
"RTN","TIUDIRT",28,0)
 D SETUP(TIUDA)
"RTN","TIUDIRT",29,0)
 Q:+$G(TIUQUIT)
"RTN","TIUDIRT",30,0)
 D CHECK^DGJSUM(DFN,TIUDDT,.TIUPARM,.TIUIRTDA,.TIU,"",$P(TIUDPRM(0),U,12))
"RTN","TIUDIRT",31,0)
 Q:'+$G(TIUPARM)!('+$G(TIUIRTDA))
"RTN","TIUDIRT",32,0)
UPDATE ; Update the dictation and transcription data in IRT rec
"RTN","TIUDIRT",33,0)
 N TIUDATA,TIUDD,TIUDB,TIUDT,TIUTB
"RTN","TIUDIRT",34,0)
 ;Update IRT pointer in TIU record
"RTN","TIUDIRT",35,0)
 I '+$P($G(^TIU(8925,TIUDA,14)),U,3) S $P(^(14),U,3)=+TIUIRTDA
"RTN","TIUDIRT",36,0)
 S DR="1202;1307;1302;1201;1209"
"RTN","TIUDIRT",37,0)
 S DA=+TIUDA,DIC=8925,DIQ="TIUDATA",DIQ(0)="IE" D EN^DIQ1
"RTN","TIUDIRT",38,0)
 I $D(TIUDATA) D  ;If DS Rec exists, set var for update of IRT Rec
"RTN","TIUDIRT",39,0)
 . S TIUDD=TIUDATA(8925,TIUDA,1307,"I"),TIUDB=$G(TIUDATA(8925,TIUDA,1202,"I"))
"RTN","TIUDIRT",40,0)
 . S TIUDT=TIUDATA(8925,TIUDA,1201,"I"),TIUTB=$P($G(^VA(200,+$G(TIUDATA(8925,TIUDA,1302,"I")),0)),U)
"RTN","TIUDIRT",41,0)
 . I TIUTB]"" S TIUTB="P."_TIUTB
"RTN","TIUDIRT",42,0)
 . D EDIT^DGJSUM(TIUIRTDA,TIUDD,TIUDB,TIUDT,TIUTB,TIUPARM)
"RTN","TIUDIRT",43,0)
 E  D DCSDEL^DGJSUM(TIUIRTDA,TIUPARM) ;If Document Deleted, IRT deleted
"RTN","TIUDIRT",44,0)
 Q
"RTN","TIUDIRT",45,0)
DELIRT(TIUDA) ; Deletes activity fields in IRT Rec
"RTN","TIUDIRT",46,0)
 N TIU,TIUPARM,TIUIRTDA,TIUDDT,DFN,TIUDPRM,TIUQUIT
"RTN","TIUDIRT",47,0)
 D SETUP(TIUDA)
"RTN","TIUDIRT",48,0)
 Q:+$G(TIUQUIT)!('+$G(TIUIRTDA))
"RTN","TIUDIRT",49,0)
 D CHECK^DGJSUM(DFN,TIUDDT,.TIUPARM,.TIUIRTDA,.TIU,.TIUFLG,$P(TIUDPRM(0),U,12))
"RTN","TIUDIRT",50,0)
 ; If TIUFLG>0 - IRT rec created in CHECK and don't need to delete
"RTN","TIUDIRT",51,0)
 I +$G(TIUPARM),+$G(TIUIRTDA),'+$G(TIUFLG) D DCSDEL^DGJSUM(TIUIRTDA,TIUPARM)
"RTN","TIUDIRT",52,0)
 Q
"RTN","TIUDIRT",53,0)
SETUP(TIUDA) ;Set TIU variables for CHECK^DGJSUM
"RTN","TIUDIRT",54,0)
 N TIUDATE,TIUD0,TIUD14,TIUTYP
"RTN","TIUDIRT",55,0)
 ; If patch DG*5.3*112 is not in place, suppress IRT call
"RTN","TIUDIRT",56,0)
 I $T(CHECK^DGJSUM)'[",DGJTYP" S TIUQUIT=1 Q
"RTN","TIUDIRT",57,0)
 S TIUD0=$G(^TIU(8925,TIUDA,0)) I TIUD0']"" S TIUQUIT=1 Q
"RTN","TIUDIRT",58,0)
 S TIUD14=$G(^TIU(8925,TIUDA,14))
"RTN","TIUDIRT",59,0)
 D DOCPRM^TIULC1(+$G(TIUD0),.TIUDPRM,TIUDA)
"RTN","TIUDIRT",60,0)
 I '$D(TIUDPRM(0))!(+$P(TIUD0,U,6)) S TIUQUIT=1 Q
"RTN","TIUDIRT",61,0)
 I '+$P(TIUDPRM(0),U,11) S TIUQUIT=1 Q
"RTN","TIUDIRT",62,0)
 S DFN=+$P(TIUD0,U,2),TIUDDT=$P(TIUD0,U,8),TIUIRTDA=+$P(TIUD14,U,3)
"RTN","TIUDIRT",63,0)
 I '$D(TIU)#2 D GETTIU^TIULD(.TIU,TIUDA)
"RTN","TIUDIRT",64,0)
 Q
"RTN","TIUDPEDT")
0^18^B647539
"RTN","TIUDPEDT",1,0)
TIUDPEDT ; SLC/JER - Document Parameter Edit ;2/19/93  16:15
"RTN","TIUDPEDT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUDPEDT",3,0)
MAIN ; Controls branching
"RTN","TIUDPEDT",4,0)
 N DIC,DA,DIE,DR,DLAYGO,X,Y,DWPK,TIUFPRIV S TIUFPRIV=1
"RTN","TIUDPEDT",5,0)
 W !,"First edit Institution-wide parameters:",!
"RTN","TIUDPEDT",6,0)
 S (DIC,DLAYGO)=8925.95,DIC(0)="AEMQL",DIC("A")="Select DOCUMENT DEFINITION: "
"RTN","TIUDPEDT",7,0)
 D ^DIC K DLAYGO Q:+Y'>0  S DA=+Y
"RTN","TIUDPEDT",8,0)
 S DIE=8925.95,DR="[TIU DOCUMENT PARAMETER EDIT]"
"RTN","TIUDPEDT",9,0)
 D ^DIE
"RTN","TIUDPEDT",10,0)
 Q
"RTN","TIUDSCNV")
0^19^B72413586
"RTN","TIUDSCNV",1,0)
TIUDSCNV ; SLC/JER - Discharge Summary Conversion routine
"RTN","TIUDSCNV",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUDSCNV",3,0)
MAIN ; Control branching
"RTN","TIUDSCNV",4,0)
 N GMRDA,TIUOK,TIUQUEUE,TIURUN,GMRDSTOP
"RTN","TIUDSCNV",5,0)
 I +$P($G(^AUPNPAT(0)),U,3)'=+$P($G(^DPT(0)),U,3),'$D(^GMR(128,"CNV","PXPTPOST")) D  Q:+TIUOK'>0
"RTN","TIUDSCNV",6,0)
 . N TIUPRMT
"RTN","TIUDSCNV",7,0)
 . W !!,"The IHS Patient file appears to be out of synchrony with File #2."
"RTN","TIUDSCNV",8,0)
 . W !,"Before continuing, you must run a program to synchronize these files."
"RTN","TIUDSCNV",9,0)
 . W !,"It may take a few minutes.",!
"RTN","TIUDSCNV",10,0)
 . S TIUPRMT="Would you like me to run that program now"
"RTN","TIUDSCNV",11,0)
 . S TIUOK=$$READ^TIUU("Y",TIUPRMT,"NO")
"RTN","TIUDSCNV",12,0)
 . I +TIUOK'>0 W !,"Okay, hurry back!" Q
"RTN","TIUDSCNV",13,0)
 . I +TIUOK>0 D QUE^PXPTPOST S ^GMR(128,"CNV","PXPTPOST")=1
"RTN","TIUDSCNV",14,0)
 W !!?9,"***************************************************************"
"RTN","TIUDSCNV",15,0)
 W !?9,"* This option will convert your Discharge Summary version 1.0 *"
"RTN","TIUDSCNV",16,0)
 W !?9,"*   Database in preparation for implementation of Discharge   *"
"RTN","TIUDSCNV",17,0)
 W !?9,"*           Summary under Text Integration Utilities...       *"
"RTN","TIUDSCNV",18,0)
 W !?9,"* Although the process is NOT irreversible, we recommend you  *"
"RTN","TIUDSCNV",19,0)
 W !?9,"*  be certain you are prepared to implement before invoking   *"
"RTN","TIUDSCNV",20,0)
 W !?9,"*                         this process!                       *"
"RTN","TIUDSCNV",21,0)
 W !?9,"***************************************************************",!
"RTN","TIUDSCNV",22,0)
 S TIUOK=$$READ^TIUU("Y","         ... Are you sure","NO")
"RTN","TIUDSCNV",23,0)
 I +TIUOK'>0 W !!?9,$C(7),"Very well, no damage done!" Q
"RTN","TIUDSCNV",24,0)
 I +$G(^GMR(128,"CNV","T0")),'+$G(^GMR(128,"CNV","T1")) D  Q:+$G(TIURUN)
"RTN","TIUDSCNV",25,0)
 . W !!,"The DISCHARGE SUMMARY CONVERSION is either still running in another partition,"
"RTN","TIUDSCNV",26,0)
 . W !,"or it has been interrupted...",!
"RTN","TIUDSCNV",27,0)
 . S TIURUN=+$$RUNNING
"RTN","TIUDSCNV",28,0)
 . I +TIURUN W !!,$C(7),"CONVERSION STILL RUNNING IN ANOTHER PARTITION."
"RTN","TIUDSCNV",29,0)
 . E  W !!,"No other instance of the conversion could be detected...You're free to RESTART."
"RTN","TIUDSCNV",30,0)
 I +$P($G(^TIU(8925.97,1,0)),U,2),'+$P($G(^TIU(8925.97,1,0)),U,3) D  Q:+$G(TIURUN)
"RTN","TIUDSCNV",31,0)
 . W !!,"The PROGRESS NOTES CONVERSION is either still running in another partition,"
"RTN","TIUDSCNV",32,0)
 . W !,"or it has been interrupted...",!
"RTN","TIUDSCNV",33,0)
 . S TIURUN=+$$PNRUN
"RTN","TIUDSCNV",34,0)
 . I +TIURUN W !!,$C(7),"PROGRESS NOTES CONVERSION STILL RUNNING IN ANOTHER PARTITION."
"RTN","TIUDSCNV",35,0)
 . E  W !!,"PN CONVERSION is NOT currently running...You're free to begin."
"RTN","TIUDSCNV",36,0)
 S GMRDA=+$G(^GMR(128,"CNV","CHKPNT"))
"RTN","TIUDSCNV",37,0)
 S GMRDSTOP=+$G(^GMR(128,"CNV","STOP #"))
"RTN","TIUDSCNV",38,0)
 I GMRDSTOP'>0 D
"RTN","TIUDSCNV",39,0)
 . S GMRDSTOP=+$P($G(^GMR(128,0)),U,3),^GMR(128,"CNV","STOP #")=GMRDSTOP
"RTN","TIUDSCNV",40,0)
 I +GMRDSTOP'>0 W !!,$C(7),"NO DISCHARGE SUMMARIES TO CONVERT...Bye!",! Q
"RTN","TIUDSCNV",41,0)
 I +GMRDA>0 D
"RTN","TIUDSCNV",42,0)
 . W !!,"CONVERSION HAS ALREADY BEEN RUN..."
"RTN","TIUDSCNV",43,0)
 . W !,"Checkpoint is Record #",GMRDA
"RTN","TIUDSCNV",44,0)
 . I +GMRDSTOP'=+$P($G(^GMR(128,0)),U,3) D
"RTN","TIUDSCNV",45,0)
 . . S GMRDSTOP=+$P(^GMR(128,0),U,3)
"RTN","TIUDSCNV",46,0)
 . . S ^GMR(128,"CNV","STOP #")=GMRDSTOP
"RTN","TIUDSCNV",47,0)
 . W !,"Conversion will stop after record #",GMRDSTOP
"RTN","TIUDSCNV",48,0)
 . S TIUOK=$$READ^TIUU("Y","  Do You Wish to Continue","NO")
"RTN","TIUDSCNV",49,0)
 I +TIUOK'>0 W !!?5,"Very well, no damage done!" Q
"RTN","TIUDSCNV",50,0)
 S TIUQUEUE=$$READ^TIUU("Y","Would you like to QUEUE this Process","NO")
"RTN","TIUDSCNV",51,0)
 I +TIUQUEUE'>0 D  Q
"RTN","TIUDSCNV",52,0)
 . W !!?9,$C(7),"Discharge Summary Conversion Running in Foreground"
"RTN","TIUDSCNV",53,0)
 . D ENQ
"RTN","TIUDSCNV",54,0)
 D QUEUE
"RTN","TIUDSCNV",55,0)
 Q
"RTN","TIUDSCNV",56,0)
QUEUE ; Call Task Manager to process conversion
"RTN","TIUDSCNV",57,0)
 N %,ZTDTH,ZTDESC,ZTIO,ZTSAVE,ZTSK,ZTRTN
"RTN","TIUDSCNV",58,0)
 S ZTRTN="ENQ^TIUDSCNV"
"RTN","TIUDSCNV",59,0)
 S ZTSAVE("GMRDA")="",ZTSAVE("DUZ(")="",ZTSAVE("GMRDSTOP")=""
"RTN","TIUDSCNV",60,0)
 S:'$D(ZTDESC) ZTDESC="TIU DISCHARGE SUMMARY CONVERSION" S ZTIO=""
"RTN","TIUDSCNV",61,0)
 D ^%ZTLOAD W !,$S($D(ZTSK):"Request Queued!",1:"Request Cancelled!")
"RTN","TIUDSCNV",62,0)
 D ^%ZISC
"RTN","TIUDSCNV",63,0)
 Q
"RTN","TIUDSCNV",64,0)
ENQ ; Where the work happens
"RTN","TIUDSCNV",65,0)
 N GMRDCNT,GMRDTOTL
"RTN","TIUDSCNV",66,0)
 S:+$G(GMRDA)'>0 GMRDA=+$G(^GMR(128,"CNV","CHKPNT"))
"RTN","TIUDSCNV",67,0)
 S GMRDCNT=+$G(^GMR(128,"CNV","CNT"))
"RTN","TIUDSCNV",68,0)
 S GMRDTOTL=+$P($G(^GMR(128,0)),U,3)
"RTN","TIUDSCNV",69,0)
 ; --- Get records from file #128 ---
"RTN","TIUDSCNV",70,0)
 S:'$D(^GMR(128,"CNV","T0")) ^GMR(128,"CNV","T0")=$$NOW^TIULC
"RTN","TIUDSCNV",71,0)
 I '$D(ZTQUEUED) D PROGBAR
"RTN","TIUDSCNV",72,0)
 F  S GMRDA=$O(^GMR(128,GMRDA)) Q:(+GMRDA'>0)!(+GMRDA>+GMRDSTOP)!+$G(ZTSTOP)  D
"RTN","TIUDSCNV",73,0)
 . D CONVERT(GMRDA) S GMRDCNT=+$G(GMRDCNT)+1
"RTN","TIUDSCNV",74,0)
 . I '$D(ZTQUEUED) D PROGRESS(GMRDCNT,GMRDTOTL)
"RTN","TIUDSCNV",75,0)
 . S ^GMR(128,"CNV","CNT")=GMRDCNT
"RTN","TIUDSCNV",76,0)
 . I $$S^%ZTLOAD S ZTSTOP=1
"RTN","TIUDSCNV",77,0)
 Q:+$G(ZTSTOP)
"RTN","TIUDSCNV",78,0)
 S ^GMR(128,"CNV","CNT")=GMRDCNT
"RTN","TIUDSCNV",79,0)
 S ^GMR(128,"CNV","T1")=$$NOW^TIULC
"RTN","TIUDSCNV",80,0)
 D BULLETIN ; Send Conversion Bulletin
"RTN","TIUDSCNV",81,0)
 Q
"RTN","TIUDSCNV",82,0)
BULLETIN ; Send Bulletins on completion
"RTN","TIUDSCNV",83,0)
 N TIUCNVCT,TIUMISCT,TIUADMCT,TIUFAIL,TIUBDT,TIUEDT,XMY,XMB,XMDUZ
"RTN","TIUDSCNV",84,0)
 S TIUCNVCT=+$G(^GMR(128,"CNV","SUCCEED"))
"RTN","TIUDSCNV",85,0)
 S TIUMISCT=+$G(^GMR(128,"CNV","FAIL",0))
"RTN","TIUDSCNV",86,0)
 S TIUADMCT=+$P($G(^GMR(128,"CNV","FAIL",0)),U,2)
"RTN","TIUDSCNV",87,0)
 S TIUFAIL=+$G(TIUMISCT)+$G(TIUADMCT)
"RTN","TIUDSCNV",88,0)
 S TIUBDT=$$DATE^TIULS(+$G(^GMR(128,"CNV","T0")),"MM/DD/YY HR:MIN")
"RTN","TIUDSCNV",89,0)
 S TIUEDT=$$DATE^TIULS(+$G(^GMR(128,"CNV","T1")),"MM/DD/YY HR:MIN")
"RTN","TIUDSCNV",90,0)
 S XMY(+$G(DUZ))=""
"RTN","TIUDSCNV",91,0)
 S XMB="TIU DS CONVERSION "_$S(+TIUFAIL>0:"ERRORS",1:"CLEAN")
"RTN","TIUDSCNV",92,0)
 S XMDUZ="TIU DISCHARGE SUMMARY CONVERSION"
"RTN","TIUDSCNV",93,0)
 S XMB(1)=TIUBDT,XMB(2)=TIUEDT,XMB(3)=TIUCNVCT
"RTN","TIUDSCNV",94,0)
 I +TIUFAIL>0 S XMB(4)=TIUFAIL,XMB(5)=TIUMISCT,XMB(6)=TIUADMCT
"RTN","TIUDSCNV",95,0)
 D ^XMB,KILL^XM
"RTN","TIUDSCNV",96,0)
 Q
"RTN","TIUDSCNV",97,0)
PROGBAR ; Write a Progress Bar
"RTN","TIUDSCNV",98,0)
 K LAST
"RTN","TIUDSCNV",99,0)
 ; I '$D(IOINORM) S X="IOINORM;IORVON;IORVOFF" D ENDR^%ZISS
"RTN","TIUDSCNV",100,0)
 W !!,$$CENTER^TIULS("Discharge Summary Conversion in Progress...")
"RTN","TIUDSCNV",101,0)
 W !,$$CENTER^TIULS("Percent Complete")
"RTN","TIUDSCNV",102,0)
 W !,$$CENTER^TIULS("0    10   20   30   40   50   60   70   80   90   100")
"RTN","TIUDSCNV",103,0)
 W !?12,"|"
"RTN","TIUDSCNV",104,0)
 Q
"RTN","TIUDSCNV",105,0)
PROGRESS(COUNT,TOTAL) ; Indicate Progress
"RTN","TIUDSCNV",106,0)
 N PCT,INCR,BAR S PCT=(COUNT/TOTAL)*100
"RTN","TIUDSCNV",107,0)
 S INCR=PCT\2
"RTN","TIUDSCNV",108,0)
 I +$G(LAST)'=$J(INCR,0,0) D
"RTN","TIUDSCNV",109,0)
 . S $P(BAR,"|",(INCR-+$G(LAST))+1)=""
"RTN","TIUDSCNV",110,0)
 . W BAR S LAST=$J(INCR,0,0)
"RTN","TIUDSCNV",111,0)
 I COUNT=TOTAL W "|",!!?20,"DISCHARGE SUMMARY CONVERSION COMPLETE!"
"RTN","TIUDSCNV",112,0)
 Q
"RTN","TIUDSCNV",113,0)
CONVERT(GMRDA) ; "Turn or burn!"
"RTN","TIUDSCNV",114,0)
 N GMRD0,GMRDACT,DOCTYP,DFN,GMRDADT,GMRDLDT,TNEW,TIU,TIUTYP,TIUDA,TIUDAD
"RTN","TIUDSCNV",115,0)
 S GMRD0=$G(^GMR(128,+GMRDA,0)),GMRDACT=$G(^GMR(128,+GMRDA,"ACT"))
"RTN","TIUDSCNV",116,0)
 I GMRD0']"" D  Q
"RTN","TIUDSCNV",117,0)
 . N TIUCRCT
"RTN","TIUDSCNV",118,0)
 . S ^GMR(128,"CNV","FAIL",GMRDA)="MISSING INFORMATION"
"RTN","TIUDSCNV",119,0)
 . S TIUCRCT=+$G(^GMR(128,"CNV","FAIL",0))+1
"RTN","TIUDSCNV",120,0)
 . S $P(^GMR(128,"CNV","FAIL",0),U)=TIUCRCT
"RTN","TIUDSCNV",121,0)
 D ALERTDEL^GMRDALRT(GMRDA)
"RTN","TIUDSCNV",122,0)
 S DOCTYP=$S(+$P(GMRD0,U,6):"ADDENDUM",1:"DISCHARGE SUMMARY")
"RTN","TIUDSCNV",123,0)
 S TIUTYP(1)=1_U_+$$WHATITLE^TIUPUTU(DOCTYP)_U_DOCTYP
"RTN","TIUDSCNV",124,0)
 S DFN=+$P(GMRD0,U,2),GMRDADT=$P(GMRD0,U,7)
"RTN","TIUDSCNV",125,0)
 S GMRDLDT=$S($L(GMRDADT,".")=2:$$FMADD^XLFDT(GMRDADT,"","","",1),1:$$FMADD^XLFDT(GMRDADT,1))
"RTN","TIUDSCNV",126,0)
 D MAIN^TIUMOVE(.TIU,.DFN,"",GMRDADT,GMRDLDT,1,"LAST",0)
"RTN","TIUDSCNV",127,0)
 I +$G(TIU("AD#"))'>0 D  Q
"RTN","TIUDSCNV",128,0)
 . N TIUNOVCT
"RTN","TIUDSCNV",129,0)
 . S ^GMR(128,"CNV","FAIL",GMRDA)="NO ADMISSION FOUND"
"RTN","TIUDSCNV",130,0)
 . S TIUNOVCT=+$P($G(^GMR(128,"CNV","FAIL",0)),U,2)+1
"RTN","TIUDSCNV",131,0)
 . S $P(^GMR(128,"CNV","FAIL",0),U,2)=TIUNOVCT
"RTN","TIUDSCNV",132,0)
 I DOCTYP="DISCHARGE SUMMARY" D
"RTN","TIUDSCNV",133,0)
 . S TIUDA=$$GETREC^TIUEDI1(DFN,.TIU,1,.TNEW)
"RTN","TIUDSCNV",134,0)
 . I +$G(TIU("VSTR")) D POST^TIUPXAP1(.TIU,DFN,TIUDA) ; **1**
"RTN","TIUDSCNV",135,0)
 . D STUFREC(TIUDA,"",GMRD0,GMRDACT)
"RTN","TIUDSCNV",136,0)
 I DOCTYP="ADDENDUM" D
"RTN","TIUDSCNV",137,0)
 . S TIUDA=$$MAKEADD^TIUPUTU
"RTN","TIUDSCNV",138,0)
 . I +$G(TIU("VSTR")) D POST^TIUPXAP1(.TIU,DFN,TIUDA) ; **1**
"RTN","TIUDSCNV",139,0)
 . S TIUDAD=$$FINDAD(DFN,$P($G(TIU("VISIT")),U),+$P(TIUTYP(1),U,2)) ; **8
"RTN","TIUDSCNV",140,0)
 . D STUFREC(TIUDA,TIUDAD,GMRD0,GMRDACT)
"RTN","TIUDSCNV",141,0)
 D SEND^TIUALRT(TIUDA)
"RTN","TIUDSCNV",142,0)
 D AUDIT^TIUEDI1(TIUDA,0,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")"))
"RTN","TIUDSCNV",143,0)
 S ^GMR(128,"CNV","CHKPNT")=GMRDA_U_TIUDA
"RTN","TIUDSCNV",144,0)
 S ^GMR(128,"CNV","SUCCEED")=+$G(^GMR(128,"CNV","SUCCEED"))+1
"RTN","TIUDSCNV",145,0)
 S ^TMP("GMR128",GMRDA)=TIUDA
"RTN","TIUDSCNV",146,0)
 Q
"RTN","TIUDSCNV",147,0)
RUNNING() ; Evaluate whether conversion is running in another partition
"RTN","TIUDSCNV",148,0)
 N TIUCKP0,TIUCKP1,TIUI,TIUY
"RTN","TIUDSCNV",149,0)
 W !,"Attempting to determine whether conversion has crashed,"
"RTN","TIUDSCNV",150,0)
 W !,"or is still running in another partition..."
"RTN","TIUDSCNV",151,0)
 S TIUCKP0=+$G(^GMR(128,"CNV","CHKPNT")),TIUY=0
"RTN","TIUDSCNV",152,0)
 F TIUI=1:1:1000 D  Q:+TIUY
"RTN","TIUDSCNV",153,0)
 . W:'(TIUI#10) "."
"RTN","TIUDSCNV",154,0)
 . S TIUCKP1=+$G(^GMR(128,"CNV","CHKPNT"))
"RTN","TIUDSCNV",155,0)
 . I TIUCKP1'=TIUCKP0 S TIUY=1
"RTN","TIUDSCNV",156,0)
 Q +$G(TIUY)
"RTN","TIUDSCNV",157,0)
PNRUN() ; Evaluate whether PN conversion is running in another partition
"RTN","TIUDSCNV",158,0)
 N TIUCKP0,TIUCKP1,TIUI,TIUY
"RTN","TIUDSCNV",159,0)
 W !,"Attempting to determine whether PN conversion has crashed,"
"RTN","TIUDSCNV",160,0)
 W !,"or is still running in another partition..."
"RTN","TIUDSCNV",161,0)
 S TIUCKP0=+$P($G(^TIU(8925.97,1,0)),U,5),TIUY=0
"RTN","TIUDSCNV",162,0)
 F TIUI=1:1:1000 D  Q:+TIUY
"RTN","TIUDSCNV",163,0)
 . W:'(TIUI#10) "."
"RTN","TIUDSCNV",164,0)
 . S TIUCKP1=+$P($G(^TIU(8925.97,1,0)),U,5)
"RTN","TIUDSCNV",165,0)
 . I TIUCKP1'=TIUCKP0 S TIUY=1
"RTN","TIUDSCNV",166,0)
 Q +$G(TIUY)
"RTN","TIUDSCNV",167,0)
FINDAD(DFN,TIUVSIT,TIUTYPE) ; Find original record for an addendum
"RTN","TIUDSCNV",168,0)
 Q +$O(^TIU(8925,"AV",DFN,1,TIUVSIT,0))
"RTN","TIUDSCNV",169,0)
STUFREC(DA,PARENT,GMRD0,GMRDACT) ; Stuff fixed field data
"RTN","TIUDSCNV",170,0)
 N FDA,FDARR,IENS,FLAGS,TIUMSG
"RTN","TIUDSCNV",171,0)
 S IENS=""""_DA_",""",FDARR="FDA(8925,"_IENS_")",FLAGS="K"
"RTN","TIUDSCNV",172,0)
 S @FDARR@(.02)=$G(DFN),@FDARR@(.03)=$P($G(TIU("VISIT")),U) ; **8**
"RTN","TIUDSCNV",173,0)
 S @FDARR@(.07)=$P(TIU("EDT"),U),@FDARR@(.08)=$P(TIU("LDT"),U)
"RTN","TIUDSCNV",174,0)
 S @FDARR@(.09)=$P(GMRD0,U,9),@FDARR@(.1)=$P(GMRD0,U,10)
"RTN","TIUDSCNV",175,0)
 S @FDARR@(1201)=$P(GMRDACT,U,6),@FDARR@(1202)=$P(GMRDACT,U)
"RTN","TIUDSCNV",176,0)
 S @FDARR@(1205)=$P($G(TIU("LOC")),U)
"RTN","TIUDSCNV",177,0)
 S (@FDARR@(1208),@FDARR@(1209))=$P(GMRDACT,U,9)
"RTN","TIUDSCNV",178,0)
 S @FDARR@(1301)=$S(+$P(GMRD0,U,8)>0:$P(GMRD0,U,8),1:$P(GMRDACT,U,3))
"RTN","TIUDSCNV",179,0)
 I +$P(GMRD0,U,8)'>0 S @FDARR@(.12)=1
"RTN","TIUDSCNV",180,0)
 S @FDARR@(1307)=$P(GMRDACT,U,3)
"RTN","TIUDSCNV",181,0)
 S @FDARR@(1302)=$P(GMRDACT,U,5),@FDARR@(1303)="C"
"RTN","TIUDSCNV",182,0)
 S @FDARR@(1304)=$P(GMRDACT,U,19)
"RTN","TIUDSCNV",183,0)
 S @FDARR@(1305)=$P(GMRDACT,U,8),@FDARR@(1306)=$P(GMRDACT,U,7)
"RTN","TIUDSCNV",184,0)
 S @FDARR@(1401)=TIU("AD#"),@FDARR@(1402)=$P($G(TIU("TS")),U)
"RTN","TIUDSCNV",185,0)
 S @FDARR@(1403)=$P(GMRD0,U,13),@FDARR@(1404)=$P($G(TIU("SVC")),U)
"RTN","TIUDSCNV",186,0)
 S @FDARR@(1501)=$P(GMRDACT,U,4),@FDARR@(1502)=$P(GMRDACT,U,17)
"RTN","TIUDSCNV",187,0)
 S @FDARR@(1505)=$P(GMRDACT,U,18),@FDARR@(1506)=$$NEEDSIG(GMRDACT)
"RTN","TIUDSCNV",188,0)
 S @FDARR@(1507)=$P(GMRDACT,U,11),@FDARR@(1508)=$P(GMRDACT,U,20)
"RTN","TIUDSCNV",189,0)
 S @FDARR@(1511)=$P(GMRDACT,U,21)
"RTN","TIUDSCNV",190,0)
 S @FDARR@(1601)=$P(GMRDACT,U,14),@FDARR@(1602)=$P(GMRDACT,U,13)
"RTN","TIUDSCNV",191,0)
 S @FDARR@(1603)=$P(GMRDACT,U,15),@FDARR@(1609)=$P(GMRDACT,U,16)
"RTN","TIUDSCNV",192,0)
 I +$G(PARENT)>0 S @FDARR@(.06)=PARENT
"RTN","TIUDSCNV",193,0)
 D FILE^DIE(FLAGS,"FDA","TIUMSG") ; File record
"RTN","TIUDSCNV",194,0)
 M ^TIU(8925,+TIUDA,"TEXT")=^GMR(128,+GMRDA,"TEXT")
"RTN","TIUDSCNV",195,0)
 S FLAGS="EK"
"RTN","TIUDSCNV",196,0)
 S @FDARR@(.05)=$$STATUS^TIULC(DA)
"RTN","TIUDSCNV",197,0)
 S @FDARR@(1503)=$$SIGNAME^TIULS($P(GMRDACT,U,17))
"RTN","TIUDSCNV",198,0)
 S @FDARR@(1504)=$$SIGTITL^TIULS($P(GMRDACT,U,17))
"RTN","TIUDSCNV",199,0)
 S @FDARR@(1509)=$$SIGNAME^TIULS($P(GMRDACT,U,20))
"RTN","TIUDSCNV",200,0)
 S @FDARR@(1510)=$$SIGTITL^TIULS($P(GMRDACT,U,20))
"RTN","TIUDSCNV",201,0)
 S @FDARR@(1604)=$$SIGNAME^TIULS($P(GMRDACT,U,13))
"RTN","TIUDSCNV",202,0)
 S @FDARR@(1605)=$$SIGTITL^TIULS($P(GMRDACT,U,13))
"RTN","TIUDSCNV",203,0)
 D FILE^DIE(FLAGS,"FDA","TIUMSG") ; File record
"RTN","TIUDSCNV",204,0)
 Q
"RTN","TIUDSCNV",205,0)
NEEDSIG(GMRDACT) ; Evaluates whether cosignature is needed
"RTN","TIUDSCNV",206,0)
 Q $S($P(GMRDACT,U)'=$P(GMRDACT,U,9):1,1:0)
"RTN","TIUEDI1")
0^20^B44026410
"RTN","TIUEDI1",1,0)
TIUEDI1 ; SLC/JER - Additional Edit Code ;10/25/95  20:35
"RTN","TIUEDI1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUEDI1",3,0)
GETREC(DFN,TIU,TIUCREAT,TIUNEW,TIUDPRM) ; Get or create document record
"RTN","TIUEDI1",4,0)
 N DIC,DLAYGO,X,Y,TIUHIT,TIUFPRIV,TIUVTYP,RETRY
"RTN","TIUEDI1",5,0)
LOOP S (TIUHIT,DA)=0,TIUFPRIV=1
"RTN","TIUEDI1",6,0)
 F  S DA=+$O(^TIU(8925,"APTLD",DFN,+$P(TIUTYP(1),U,2),TIU("VSTR"),DA)) Q:+DA'>0  D  Q:+DA'>0!(+$G(TIUHIT)>0)
"RTN","TIUEDI1",7,0)
 . I '$D(^TIU(8925,+DA,0)) K ^TIU(8925,"APTLD",DFN,+$P(TIUTYP(1),U,2),TIU("VSTR"),DA) S DA=0 Q
"RTN","TIUEDI1",8,0)
 . N CANEDIT S CANEDIT=+$$CANDO^TIULP(+DA,"EDIT RECORD")
"RTN","TIUEDI1",9,0)
 . ; If record exists and user may edit it, then return that record
"RTN","TIUEDI1",10,0)
 . I +CANEDIT>0 S TIUHIT=1 Q
"RTN","TIUEDI1",11,0)
 . ; If >1 documents/record not allowed, return current DA for addendum
"RTN","TIUEDI1",12,0)
 . I +$P($G(TIUDPRM(0)),U,10)'>0 S TIUHIT=1 Q
"RTN","TIUEDI1",13,0)
 . ; If a record exists, and >1 record/visit allowed, and can't edit
"RTN","TIUEDI1",14,0)
 . ; existing record, then create a new record for the visit
"RTN","TIUEDI1",15,0)
 . I (+$P($G(TIUDPRM(0)),U,10)>0),(+$O(^TIU(8925,"APTLD",DFN,+$P(TIUTYP(1),U,2),TIU("VSTR"),DA))'>0) S DA=0
"RTN","TIUEDI1",16,0)
 I +DA'>0,($P(TIU("VSTR"),";",3)="H"),(+$G(RETRY)'>0) D  G LOOP
"RTN","TIUEDI1",17,0)
 . S RETRY=1,$P(TIU("VSTR"),";",2)=$P($P(TIU("VSTR"),";",2),".")
"RTN","TIUEDI1",18,0)
 ; If TIUCREAT=1 and rec does NOT exist, then create
"RTN","TIUEDI1",19,0)
 I +$G(TIUCREAT),+DA'>0 D
"RTN","TIUEDI1",20,0)
 . N TIUVTYP,TIUVISIT
"RTN","TIUEDI1",21,0)
 . S (DIC,DLAYGO)=8925,DIC(0)="FL"
"RTN","TIUEDI1",22,0)
 . ; S DIC("S")="I +$G(DFN)=+$P(^TIU(8925,+Y,0),U,2)"
"RTN","TIUEDI1",23,0)
 . S X=""""_"`"_+$P(TIUTYP(1),U,2)_"""" D ^DIC K DIC("S")
"RTN","TIUEDI1",24,0)
 . I +Y'>0 W !,$P(TIUTYP(1),U,3)," record could not be created.",! Q
"RTN","TIUEDI1",25,0)
 . S DA=+Y,TIUNEW=+$P(Y,U,3)
"RTN","TIUEDI1",26,0)
 . N DIE,DR S DIE=8925
"RTN","TIUEDI1",27,0)
 . S TIUVTYP=$P($G(TIU("VSTR")),";",3)
"RTN","TIUEDI1",28,0)
 . S TIUVISIT=$S(+$G(TIU("VISIT")):+$G(TIU("VISIT")),1:"")
"RTN","TIUEDI1",29,0)
 . S DR=".02////"_DFN_";.03////"_TIUVISIT_";.04////"_$$DOCCLASS^TIULC1(+$P(Y,U,2))_";.05///"_$$UP^XLFSTR($$STATUS^TIULC(DA))_";.13////"_TIUVTYP_";1205////"_$P($G(TIU("LOC")),U)_";1211////"_$P($G(TIU("VLOC")),U)
"RTN","TIUEDI1",30,0)
 . D ^DIE
"RTN","TIUEDI1",31,0)
 . I +$G(TIU("STOP")) D DEFER^TIUVSIT(DA,+$G(TIU("STOP")))
"RTN","TIUEDI1",32,0)
 Q +$G(DA)
"RTN","TIUEDI1",33,0)
SCANDAD(TIUTYP,TIUDA) ; Search "DAD" index for component record
"RTN","TIUEDI1",34,0)
 N TIUC,TIUY
"RTN","TIUEDI1",35,0)
 S (TIUY,TIUC)=0
"RTN","TIUEDI1",36,0)
 F  S TIUC=$O(^TIU(8925,"DAD",+TIUDA,TIUC)) Q:+TIUC'>0!(+TIUY>0)  D
"RTN","TIUEDI1",37,0)
 . I +TIUTYP=+$G(^TIU(8925,+TIUC,0)) S TIUY=TIUC Q
"RTN","TIUEDI1",38,0)
 . I +$O(^TIU(8925,"DAD",+TIUC,0)) S TIUY=$$SCANDAD(TIUTYP,TIUC)
"RTN","TIUEDI1",39,0)
 Q TIUY
"RTN","TIUEDI1",40,0)
GETCOMP(TIUTYP,TIUDA,TIU,DFN) ; Adds components to document
"RTN","TIUEDI1",41,0)
 N DIC,DA,X,Y,DIE,DR,TIUC,TIUCMP,TIUMOM,TIUMTYP,TIUY,TIUFPRIV
"RTN","TIUEDI1",42,0)
 S TIUFPRIV=1,(TIUY,TIUC)=0
"RTN","TIUEDI1",43,0)
 S TIUY=$$SCANDAD(TIUTYP,TIUDA)
"RTN","TIUEDI1",44,0)
 I +TIUY G GETCX
"RTN","TIUEDI1",45,0)
 S (DIC,DLAYGO)=8925,DIC(0)="FL"
"RTN","TIUEDI1",46,0)
 S X=""""_$P(^TIU(8925.1,+TIUTYP,0),U)_""""
"RTN","TIUEDI1",47,0)
 D ^DIC
"RTN","TIUEDI1",48,0)
 I +Y'>0 W !,X," component could not be created.",! G GETCX
"RTN","TIUEDI1",49,0)
 S (TIUY,DA)=+Y,DIE=DIC
"RTN","TIUEDI1",50,0)
 S TIUMOM=+$$RUMYMTHR(TIUDA,DA,+TIUTYP,+$G(^TIU(8925,+DA,0)))
"RTN","TIUEDI1",51,0)
 S TIUMTYP=+$G(^TIU(8925,+TIUMOM,0))
"RTN","TIUEDI1",52,0)
 S DR=".02////"_DFN_";.03////"_$P($G(TIU("VISIT")),U)_";.04////"_TIUMTYP_";.06////"_TIUMOM
"RTN","TIUEDI1",53,0)
 D ^DIE W "."
"RTN","TIUEDI1",54,0)
GETCX Q TIUY
"RTN","TIUEDI1",55,0)
RUMYMTHR(MOM,BRAT,MOMTYP,BRATYP) ; Get appropriate parent for component
"RTN","TIUEDI1",56,0)
 N TIUI,GOTMOM,CNDMOM,CNDTYP,TIUMOM S (GOTMOM,TIUI)=0
"RTN","TIUEDI1",57,0)
 I +$O(^TIU(8925.1,"AD",+BRATYP,MOMTYP,0)) S GOTMOM=1 G RUMYX
"RTN","TIUEDI1",58,0)
 S CNDMOM=0
"RTN","TIUEDI1",59,0)
 F  S CNDMOM=$O(^TIU(8925,"DAD",+MOM,+CNDMOM)) Q:+CNDMOM'>0  D
"RTN","TIUEDI1",60,0)
 . S CNDTYP=+$G(^TIU(8925,+CNDMOM,0))
"RTN","TIUEDI1",61,0)
 . S TIUMOM=$$RUMYMTHR(CNDMOM,BRAT,CNDTYP,BRATYP) I $P(TIUMOM,U,2)=1 S MOM=+TIUMOM,GOTMOM=1 Q
"RTN","TIUEDI1",62,0)
RUMYX Q MOM_U_GOTMOM
"RTN","TIUEDI1",63,0)
DELCOMP(TIUDA) ; Cleans up all components of a document
"RTN","TIUEDI1",64,0)
 N DA,DIE,DR,TIUCDA S TIUCDA=0,DIE="^TIU(8925,"
"RTN","TIUEDI1",65,0)
 F  S TIUCDA=$O(^TIU(8925,"DAD",TIUDA,TIUCDA)) Q:+TIUCDA'>0  D
"RTN","TIUEDI1",66,0)
 . W !,$P(^TIU(8925.1,+^TIU(8925,TIUCDA,0),0),U)_" Component Deleted"
"RTN","TIUEDI1",67,0)
 . S DR=".01///@",DA=TIUCDA D ^DIE W "."
"RTN","TIUEDI1",68,0)
 . I +$O(^TIU(8925,"DAD",TIUCDA,0))>0  D DELCOMP(TIUCDA)
"RTN","TIUEDI1",69,0)
 Q
"RTN","TIUEDI1",70,0)
DELAUDIT(TIUDA) ; Cleans up all AUDIT TRAIL entries for a document
"RTN","TIUEDI1",71,0)
 N DA,DIK,DR,TIUADA S TIUADA=0,DIK="^TIU(8925.5,"
"RTN","TIUEDI1",72,0)
 F  S TIUADA=$O(^TIU(8925.5,"B",TIUDA,TIUADA)) Q:+TIUADA'>0  D
"RTN","TIUEDI1",73,0)
 . ; W !," Audit trail record #",TIUADA," Deleted"
"RTN","TIUEDI1",74,0)
 . S DA=TIUADA D ^DIK ; W "."
"RTN","TIUEDI1",75,0)
 Q
"RTN","TIUEDI1",76,0)
ISCOMP(TIUTYP,X) ; Is the text provided a component tag
"RTN","TIUEDI1",77,0)
 N DIC,TIULEVEL,TIUY,Y,TIUFPRIV S TIULEVEL=0,TIUFPRIV=1
"RTN","TIUEDI1",78,0)
 S DIC=8925.1,DIC(0)="FX" D ^DIC
"RTN","TIUEDI1",79,0)
 I +Y'>0 S TIUY=0 G ISCMPX
"RTN","TIUEDI1",80,0)
 S TIUY=Y
"RTN","TIUEDI1",81,0)
ISCMPX Q TIUY
"RTN","TIUEDI1",82,0)
MERGTEMP(TIUDA) ; Merge text from components into TEMP node for edit
"RTN","TIUEDI1",83,0)
 N TIUC,TIUI,TIUJ,TIULINE
"RTN","TIUEDI1",84,0)
 S (TIUC,TIULINE)=0,TIUJ=+$P($G(^TIU(8925,+TIUDA,"TEMP",0)),U,3)
"RTN","TIUEDI1",85,0)
 F  S TIUC=$O(^TIU(8925,"DAD",TIUDA,TIUC)) Q:+TIUC'>0  D
"RTN","TIUEDI1",86,0)
 . I +$$ISADDNDM^TIULC1(+TIUC) Q
"RTN","TIUEDI1",87,0)
 . S TIUI=0 F  S TIUI=$O(^TIU(8925,+TIUC,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUEDI1",88,0)
 . . S TIUJ=+$G(TIUJ)+1
"RTN","TIUEDI1",89,0)
 . . S ^TIU(8925,+TIUDA,"TEMP",TIUJ,0)=$G(^TIU(8925,+TIUC,"TEXT",TIUI,0))
"RTN","TIUEDI1",90,0)
 . . K ^TIU(8925,+TIUC,"TEXT",TIUI,0) ; Clear the way for edits
"RTN","TIUEDI1",91,0)
 . . S ^TIU(8925,+TIUC,"TEXT",0)="^^^^"_DT_"^^"
"RTN","TIUEDI1",92,0)
 . . S ^TIU(8925,+TIUDA,"TEMP",0)="^^"_TIUJ_"^"_TIUJ_"^"_DT_"^^"
"RTN","TIUEDI1",93,0)
 . I +$O(^TIU(8925,"DAD",+TIUC,0)) D MERGGRAN(TIUDA,+TIUC)
"RTN","TIUEDI1",94,0)
 . S TIUJ=+$P($G(^TIU(8925,+TIUDA,"TEMP",0)),U,3)
"RTN","TIUEDI1",95,0)
 I $D(^TIU(8925,+TIUDA,"TEMP",1))>9 M ^TIU(8925,+TIUDA,"TEXT")=^TIU(8925,+TIUDA,"TEMP")
"RTN","TIUEDI1",96,0)
 Q
"RTN","TIUEDI1",97,0)
MERGGRAN(TIUDA,TIUC) ; Merge sub-components into TEMP node of original
"RTN","TIUEDI1",98,0)
 N TIUC1,TIUI,TIUJ,TIULINE
"RTN","TIUEDI1",99,0)
 S (TIUC1,TIULINE)=0,TIUJ=+$P($G(^TIU(8925,+TIUDA,"TEMP",0)),U,3)
"RTN","TIUEDI1",100,0)
 F  S TIUC1=$O(^TIU(8925,"DAD",TIUC,TIUC1)) Q:+TIUC1'>0  D
"RTN","TIUEDI1",101,0)
 . S TIUI=0 F  S TIUI=$O(^TIU(8925,+TIUC1,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUEDI1",102,0)
 . . S TIUJ=+$G(TIUJ)+1
"RTN","TIUEDI1",103,0)
 . . S ^TIU(8925,+TIUDA,"TEMP",TIUJ,0)=$G(^TIU(8925,+TIUC1,"TEXT",TIUI,0))
"RTN","TIUEDI1",104,0)
 . . K ^TIU(8925,+TIUC1,"TEXT",TIUI,0) ; Clear the way for edits
"RTN","TIUEDI1",105,0)
 . . S ^TIU(8925,+TIUC1,"TEXT",0)="^^^^"_DT_"^^"
"RTN","TIUEDI1",106,0)
 . . S ^TIU(8925,+TIUDA,"TEMP",0)="^^"_TIUJ_"^"_TIUJ_"^"_DT_"^^"
"RTN","TIUEDI1",107,0)
 . I +$O(^TIU(8925,"DAD",+TIUC1,0)) D MERGGRAN(TIUDA,+TIUC1)
"RTN","TIUEDI1",108,0)
 . S TIUJ=+$P($G(^TIU(8925,+TIUDA,"TEMP",0)),U,3)
"RTN","TIUEDI1",109,0)
 Q
"RTN","TIUEDI1",110,0)
MERGTEXT(TIUDA,TIU) ; Merge TEMP node from parent document into components
"RTN","TIUEDI1",111,0)
 N TIUTYP
"RTN","TIUEDI1",112,0)
 S TIUTYP=+$P(^TIU(8925,+TIUDA,0),U)
"RTN","TIUEDI1",113,0)
 ; -- If document has components, add/update them
"RTN","TIUEDI1",114,0)
 I +$O(^TIU(8925.1,+TIUTYP,10,0))>0 D
"RTN","TIUEDI1",115,0)
 . N TIUC,TIUI,TIUJ,TIUX,TIUCMP S (TIUI,TIUJ,TIUCMP)=0
"RTN","TIUEDI1",116,0)
 . F  S TIUI=$O(^TIU(8925,+TIUDA,"TEMP",TIUI)) Q:+TIUI'>0  D
"RTN","TIUEDI1",117,0)
 . . S TIUX=$G(^TIU(8925,+TIUDA,"TEMP",TIUI,0))
"RTN","TIUEDI1",118,0)
 . . S TIUC=+$$ISCOMP(TIUTYP,$P(TIUX,":"))
"RTN","TIUEDI1",119,0)
 . . I TIUX[":",+TIUC D
"RTN","TIUEDI1",120,0)
 . . . S TIUJ=0 ; Reinitialize line count for new component
"RTN","TIUEDI1",121,0)
 . . . S TIUCMP=$$GETCOMP(TIUC,TIUDA,.TIU,DFN)
"RTN","TIUEDI1",122,0)
 . . S TIUJ=+$G(TIUJ)+1
"RTN","TIUEDI1",123,0)
 . . I +TIUCMP>0 D
"RTN","TIUEDI1",124,0)
 . . . S ^TIU(8925,+TIUCMP,"TEXT",TIUJ,0)=$G(^TIU(8925,+TIUDA,"TEMP",+TIUI,0))
"RTN","TIUEDI1",125,0)
 . . . S ^TIU(8925,+TIUCMP,"TEXT",0)="^^"_TIUJ_"^"_TIUJ_"^"_DT_"^^"
"RTN","TIUEDI1",126,0)
 . . E  D
"RTN","TIUEDI1",127,0)
 . . . S ^TIU(8925,+TIUDA,"TEXT",TIUJ,0)=$G(^TIU(8925,+TIUDA,"TEMP",TIUJ,0))
"RTN","TIUEDI1",128,0)
 . . . S ^TIU(8925,+TIUDA,"TEXT",0)="^^"_TIUJ_"^"_TIUJ_"^"_DT_"^^"
"RTN","TIUEDI1",129,0)
 ; -- If no components, merge "TEMP" into "TEXT" for current document
"RTN","TIUEDI1",130,0)
 I +$O(^TIU(8925.1,+TIUTYP,10,0))'>0 M ^TIU(8925,+TIUDA,"TEXT")=^TIU(8925,+TIUDA,"TEMP")
"RTN","TIUEDI1",131,0)
 Q
"RTN","TIUEDI1",132,0)
GETTMPL(TIUTYP) ; Get edit template, enforce inheritance
"RTN","TIUEDI1",133,0)
 N TIUDAD,TIUY S TIUDAD=0
"RTN","TIUEDI1",134,0)
 S TIUY=$G(^TIU(8925.1,+TIUTYP,5))
"RTN","TIUEDI1",135,0)
 I TIUY']"",($P(^TIU(8925.1,+TIUTYP,0),U)["ADDENDUM") D
"RTN","TIUEDI1",136,0)
 . S TIUDAD=+$P($G(^TIU(8925,+$P($G(^TIU(8925,+$G(TIUDA),0)),U,6),0)),U)
"RTN","TIUEDI1",137,0)
 . I +TIUDAD S TIUY=$$GETTMPL(TIUDAD)
"RTN","TIUEDI1",138,0)
 I TIUY']"" S TIUDAD=$O(^TIU(8925.1,"AD",+TIUTYP,0))
"RTN","TIUEDI1",139,0)
 I +TIUDAD S TIUY=$$GETTMPL(TIUDAD)
"RTN","TIUEDI1",140,0)
 Q TIUY
"RTN","TIUEDI1",141,0)
AUDIT(TIUDA,TIUCKSM0,TIUCKSM1) ; Update audit trail
"RTN","TIUEDI1",142,0)
 N DIC,DIE,DA,DR,X,Y
"RTN","TIUEDI1",143,0)
 S X=""""_"`"_TIUDA_"""",(DIC,DLAYGO)=8925.5,DIC(0)="FLX" D ^DIC Q:+Y'>0
"RTN","TIUEDI1",144,0)
 S DIE=DIC,DR=".02////"_$$NOW^TIULC_";.03////"_DUZ_";.04////"_TIUCKSM0_";.05////"_TIUCKSM1
"RTN","TIUEDI1",145,0)
 D ^DIE
"RTN","TIUEDI1",146,0)
 Q
"RTN","TIUEDI1",147,0)
GETLMETH(TIUTYP) ; Get Visit Linkage method, enforce inheritance
"RTN","TIUEDI1",148,0)
 N TIUDAD,TIUY S TIUDAD=0
"RTN","TIUEDI1",149,0)
 S TIUY=$G(^TIU(8925.1,+TIUTYP,7))
"RTN","TIUEDI1",150,0)
 I TIUY']"" S TIUDAD=$O(^TIU(8925.1,"AD",+TIUTYP,0))
"RTN","TIUEDI1",151,0)
 I +TIUDAD S TIUY=$$GETLMETH(TIUDAD)
"RTN","TIUEDI1",152,0)
 Q TIUY
"RTN","TIUEDI1",153,0)
GETVMETH(TIUTYP) ; Get Validation method, enforce enheritance
"RTN","TIUEDI1",154,0)
 N TIUDAD,TIUY S TIUDAD=0
"RTN","TIUEDI1",155,0)
 S TIUY=$G(^TIU(8925.1,+TIUTYP,8))
"RTN","TIUEDI1",156,0)
 I TIUY']"" S TIUDAD=$O(^TIU(8925.1,"AD",+TIUTYP,0))
"RTN","TIUEDI1",157,0)
 I +TIUDAD S TIUY=$$GETVMETH(TIUDAD)
"RTN","TIUEDI1",158,0)
 Q TIUY
"RTN","TIUEDI2")
0^21^B7056766
"RTN","TIUEDI2",1,0)
TIUEDI2 ; SLC/JER - Additional Edit Code ;10/25/95  20:35
"RTN","TIUEDI2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUEDI2",3,0)
GETENTRY(TIUTYP) ; Get Entry Action, enforce inheritance
"RTN","TIUEDI2",4,0)
 N TIUDAD,TIUY S TIUDAD=0
"RTN","TIUEDI2",5,0)
 S TIUY=$G(^TIU(8925.1,+TIUTYP,4.6))
"RTN","TIUEDI2",6,0)
 I TIUY']"" S TIUDAD=$O(^TIU(8925.1,"AD",+TIUTYP,0))
"RTN","TIUEDI2",7,0)
 I +TIUDAD S TIUY=$$GETENTRY(TIUDAD)
"RTN","TIUEDI2",8,0)
 Q TIUY
"RTN","TIUEDI2",9,0)
GETEXIT(TIUTYP) ; Get Validation method, enforce enheritance
"RTN","TIUEDI2",10,0)
 N TIUDAD,TIUY S TIUDAD=0
"RTN","TIUEDI2",11,0)
 S TIUY=$G(^TIU(8925.1,+TIUTYP,4.7))
"RTN","TIUEDI2",12,0)
 I TIUY']"" S TIUDAD=$O(^TIU(8925.1,"AD",+TIUTYP,0))
"RTN","TIUEDI2",13,0)
 I +TIUDAD S TIUY=$$GETEXIT(TIUDAD)
"RTN","TIUEDI2",14,0)
 Q TIUY
"RTN","TIUEDI2",15,0)
EXSTNOTE(DFN) ; Sample/display existing notes
"RTN","TIUEDI2",16,0)
 N TIUSMPL,TIUTOTL,TIUEDT,TIULDT,TIUPRMT,TIURVW,TIUPNOUN,TIUSEE,TIUOUT
"RTN","TIUEDI2",17,0)
 N TIUA,TIUI,TIUJ,TIULAST,TIULIST,TIUREC,TIURTN,TIUSTOP,TIUY,TIUZ,TIUQUIT
"RTN","TIUEDI2",18,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIUEDI2",19,0)
 I '$D(TIUPREF) S TIUPREF=$$PERSPRF^TIULE(DUZ)
"RTN","TIUEDI2",20,0)
 I +$P(TIUPREF,U,11) Q
"RTN","TIUEDI2",21,0)
 I +$P(TIUPRM0,U,7),$S($P(TIUPREF,U,11)=0:0,1:1) Q
"RTN","TIUEDI2",22,0)
 I +$O(^TIU(8925,"ACLPT",3,DFN,0))'>0 Q
"RTN","TIUEDI2",23,0)
 D SELPAT^TIULA2(.TIURTN,3,DFN,1)
"RTN","TIUEDI2",24,0)
 I +$G(TIURTN)'>0,($D(TIURTN)=1) D  S TIUOUT=1 Q
"RTN","TIUEDI2",25,0)
 . W !!,"Nothing selected.",!
"RTN","TIUEDI2",26,0)
 S TIUI=0
"RTN","TIUEDI2",27,0)
 F  S TIUI=$O(TIURTN(TIUI)) Q:+TIUI'>0  D  Q:$D(DUOUT)!$D(DIROUT)!+$G(TIUOUT)
"RTN","TIUEDI2",28,0)
 . N TIUDA
"RTN","TIUEDI2",29,0)
 . S TIUDA=+$G(TIURTN(TIUI)) Q:TIUDA'>0
"RTN","TIUEDI2",30,0)
 . D GETTIU^TIULD(.TIU,+TIUDA)
"RTN","TIUEDI2",31,0)
 . I $D(TIU) D
"RTN","TIUEDI2",32,0)
 . . S TIUSEE=$$CANDO^TIULP(TIUDA,"VIEW")
"RTN","TIUEDI2",33,0)
 . . I 'TIUSEE D  Q
"RTN","TIUEDI2",34,0)
 . . . W !!,$C(7),$P(TIUSEE,U,2),! K DFN
"RTN","TIUEDI2",35,0)
 . . . I $D(ORVP) S TIUOUT=1
"RTN","TIUEDI2",36,0)
 . . . S TIU=$$READ^TIUU("FOA","Press RETURN to continue...")
"RTN","TIUEDI2",37,0)
 . . D EN^VALM("TIU BROWSE FOR CLINICIAN")
"RTN","TIUEDI2",38,0)
 . . K ^TMP("TIUVIEW",$J),DFN
"RTN","TIUEDI2",39,0)
 . . S:$D(TIUQUIT) TIUOUT=1
"RTN","TIUEDI2",40,0)
 Q
"RTN","TIUEDI2",41,0)
CHEKSAVE(DUZ) ; Checks for entry in ^TIU(8925,"ASAVE",DUZ,TIUDA)
"RTN","TIUEDI2",42,0)
 Q +$O(^TIU(8925,"ASAVE",DUZ,0))
"RTN","TIUEDI2",43,0)
EDITSAVE(DUZ) ; Evaluates whether an unsaved document exists, allows edit
"RTN","TIUEDI2",44,0)
 N TIUDA,TIUPRMT,TIUY,TIU
"RTN","TIUEDI2",45,0)
 S TIUDA=$$CHEKSAVE(DUZ)
"RTN","TIUEDI2",46,0)
 I +TIUDA'>0 Q
"RTN","TIUEDI2",47,0)
 ; If the document is gone, then delete the save flag and Quit
"RTN","TIUEDI2",48,0)
 I +TIUDA,'$D(^TIU(8925,+TIUDA,0)) K ^TIU(8925,"ASAVE",DUZ,+TIUDA) Q
"RTN","TIUEDI2",49,0)
 W !!,"You have an unsaved document in your buffer."
"RTN","TIUEDI2",50,0)
 W !,"Depending on your preferred editor, you may"
"RTN","TIUEDI2",51,0)
 W !,"have lost some of the text.",!
"RTN","TIUEDI2",52,0)
 S TIUPRMT="Would you like to resume editing now"
"RTN","TIUEDI2",53,0)
 S TIUY=$$READ^TIUU("Y",TIUPRMT,"YES")
"RTN","TIUEDI2",54,0)
 I +TIUY'>0 W !!,"Okay. You can catch up with it later!",! H 1 Q
"RTN","TIUEDI2",55,0)
 W !!,"Good.  Here we go then!",!
"RTN","TIUEDI2",56,0)
 I $D(^TIU(8925,+TIUDA,"TEMP")),'$D(^TIU(8925,+TIUDA,"TEXT")) D
"RTN","TIUEDI2",57,0)
 . D GETTIU^TIULD(.TIU,TIUDA)
"RTN","TIUEDI2",58,0)
 . D MERGTEXT^TIUEDI1(TIUDA,.TIU)
"RTN","TIUEDI2",59,0)
 D EDIT1^TIURA
"RTN","TIUEDI2",60,0)
 Q
"RTN","TIUEDIH")
0^194^B6186
"RTN","TIUEDIH",1,0)
TIUEDIH ; SLC/JER - Documentation of TIUEDIT
"RTN","TIUEDIH",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUEDIH",3,0)
MAIN ; Identify parameters to MAIN^TIUEDIT
"RTN","TIUEDIH",4,0)
 ; Call with: [TIUCLASS] --> pointer to file (8925) corresponding to the
"RTN","TIUEDIH",5,0)
 ;                           class (e.g., Progress Notes=3) from which
"RTN","TIUEDIH",6,0)
 ;                           to select a title
"RTN","TIUEDIH",7,0)
 ;    [by ref] [SUCCESS] --> Boolean flag returned as IFN when a record
"RTN","TIUEDIH",8,0)
 ;                           is created, or 0 when record creation fails
"RTN","TIUEDIH",9,0)
 ;                 [DFN] --> IEN in patient file (#2)
"RTN","TIUEDIH",10,0)
 ;            [TIUTITLE] --> Pointer or NAME of the TITLE from file
"RTN","TIUEDIH",11,0)
 ;                           8925.1 to be used as the default.
"RTN","TIUEDIH",12,0)
 ;            [EVNTFLAG] --> Boolean flag for visit prompt (0 to prompt,
"RTN","TIUEDIH",13,0)
 ;                           1 to force event type)
"RTN","TIUEDIH",14,0)
 ;              [NOSAVE] --> Boolean flag to suppress saving the data
"RTN","TIUEDIH",15,0)
 ;                           (e.g., when testing new Boilerplates, etc.).
"RTN","TIUEDIH",16,0)
 Q
"RTN","TIUEDIM")
0^22^B9777818
"RTN","TIUEDIM",1,0)
TIUEDIM ; SLC/JER - Enter/Edit Multiple Document ;8/19/94  14:52
"RTN","TIUEDIM",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUEDIM",3,0)
MAIN(TIUCLASS,TIUOUT,TIUNDA) ; Control Branching
"RTN","TIUEDIM",4,0)
 N TIUREL,TIUCHK,TIUDA,TIUEDIT,TIUY,TIUNEW,TIUTYP,TIUPAT
"RTN","TIUEDIM",5,0)
 N TIUI,DTOUT S TIUDFLT=""
"RTN","TIUEDIM",6,0)
 K DIROUT
"RTN","TIUEDIM",7,0)
 ; --- Get one or more patients ---
"RTN","TIUEDIM",8,0)
 I '$L($T(PATIENT^ORU1)) Q
"RTN","TIUEDIM",9,0)
 D PATIENT^ORU1(.TIUPAT) I +TIUPAT'>0 S TIUOUT=1 Q
"RTN","TIUEDIM",10,0)
 S TIUI=0 F  S TIUI=+$O(TIUPAT(TIUI)) Q:+TIUI'>0!+$G(TIUOUT)  D
"RTN","TIUEDIM",11,0)
 . N DFN,DUOUT,TIUDPRM,TIU,TIULMETH,TIUVMETH,VAIN,VADM,TIUDA,TIUEDIT
"RTN","TIUEDIM",12,0)
 . N TIUENTRY
"RTN","TIUEDIM",13,0)
 . S DFN=+$G(TIUPAT(TIUI)) Q:+DFN'>0
"RTN","TIUEDIM",14,0)
 . W !!,"For Patient ",$P(TIUPAT(TIUI),U,2)
"RTN","TIUEDIM",15,0)
 . S TIUCLASS=$G(TIUCLASS,38)
"RTN","TIUEDIM",16,0)
 . D DOCSPICK^TIULA2(.TIUTYP,TIUCLASS,"1A","LAST","","+$$CANPICK^TIULP(+Y),+$$CANENTR^TIULP(+Y)")
"RTN","TIUEDIM",17,0)
 . I +$G(TIUTYP)'>0 S TIUOUT=1 Q
"RTN","TIUEDIM",18,0)
 . S TIUTYP=+$P($G(TIUTYP(1)),U,2)
"RTN","TIUEDIM",19,0)
 . ; --- Initialize document parameters ---
"RTN","TIUEDIM",20,0)
 . D DOCPRM^TIULC1(TIUTYP,.TIUDPRM)
"RTN","TIUEDIM",21,0)
 . ; --- If an ENTRY ACTION exists, execute it ---
"RTN","TIUEDIM",22,0)
 . S TIUENTRY=$$GETENTRY^TIUEDI2(+TIUTYP)
"RTN","TIUEDIM",23,0)
 . I $L(TIUENTRY) X TIUENTRY
"RTN","TIUEDIM",24,0)
 . Q:+$G(TIUOUT)  ; If ENTRY ACTION sets TIUOUT=1 Abort Entry
"RTN","TIUEDIM",25,0)
 . ; --- Get associated visit ---
"RTN","TIUEDIM",26,0)
 . S TIULMETH=$$GETLMETH^TIUEDI1(TIUTYP)
"RTN","TIUEDIM",27,0)
 . I '$L(TIULMETH) D  S TIUOUT=1 Q
"RTN","TIUEDIM",28,0)
 . . W !,$C(7),"No Visit Linkage Method defined for "
"RTN","TIUEDIM",29,0)
 . . W $$PNAME^TIULC1(TIUTYP),".",!,"Please contact IRM..."
"RTN","TIUEDIM",30,0)
 . X TIULMETH
"RTN","TIUEDIM",31,0)
 . I $S($D(DIROUT):1,$D(DTOUT):1,1:0) S TIUQUIT=1 Q
"RTN","TIUEDIM",32,0)
 . I $S('$D(TIU):1,$D(DUOUT):1,1:0) D  Q
"RTN","TIUEDIM",33,0)
 . . W !,$C(7),"Patient & Visit required." H 2
"RTN","TIUEDIM",34,0)
 . ; --- Validate Selection ---
"RTN","TIUEDIM",35,0)
 . S TIUVMETH=$$GETVMETH^TIUEDI1(TIUTYP)
"RTN","TIUEDIM",36,0)
 . I '$L(TIUVMETH) D  S TIUOUT=1 Q
"RTN","TIUEDIM",37,0)
 . . W !,$C(7),"No Validation Method defined for "
"RTN","TIUEDIM",38,0)
 . . W $$PNAME^TIULC1(TIUTYP),".",!,"Please contact IRM..."
"RTN","TIUEDIM",39,0)
 . X TIUVMETH
"RTN","TIUEDIM",40,0)
 . I $S($D(DIROUT):1,$D(DTOUT):1,1:0) S TIUQUIT=1 Q
"RTN","TIUEDIM",41,0)
 . I $D(DUOUT) Q
"RTN","TIUEDIM",42,0)
 . I $D(TIU),+$G(TIUASK) D
"RTN","TIUEDIM",43,0)
 . . S DA=$$GETREC^TIUEDI1(DFN,.TIU,1,.TIUNEW,.TIUDPRM)
"RTN","TIUEDIM",44,0)
 . . I +DA'>0 W !,"Unable to enter/edit." Q
"RTN","TIUEDIM",45,0)
 . . S TIUEDIT=$S('+$G(TIUNEW):$$CANDO^TIULP(DA,"EDIT RECORD"),1:1)
"RTN","TIUEDIM",46,0)
 . . I '+TIUEDIT D  Q
"RTN","TIUEDIM",47,0)
 . . . W !,$P(TIUEDIT,U,2) ; Echo denial message
"RTN","TIUEDIM",48,0)
 . . . D ADDENDUM^TIUADD(DA,"",.TIUCHNG)
"RTN","TIUEDIM",49,0)
 . . N TIUQUIT,TIUADD
"RTN","TIUEDIM",50,0)
 . . D DIE^TIUEDIT(DA,.TIUQUIT) Q:+$G(TIUQUIT)=2
"RTN","TIUEDIM",51,0)
 . . I $$EMPTYDOC^TIULF(DA) D DELETE^TIUEDIT(DA,0) Q
"RTN","TIUEDIM",52,0)
 . . Q:+$G(TIUQUIT)
"RTN","TIUEDIM",53,0)
 . . I +$G(TIUONCE) S TIUNDA(+$G(DA))=""
"RTN","TIUEDIM",54,0)
 . . I +$G(TIU("STOP")) D DEFER^TIUVSIT(DA,TIU("STOP")) I 1
"RTN","TIUEDIM",55,0)
 . . E  D QUE^TIUPXAP1
"RTN","TIUEDIM",56,0)
 . . ; --- Execute RELEASE procedure ---
"RTN","TIUEDIM",57,0)
 . . D RELEASE^TIUT(DA)
"RTN","TIUEDIM",58,0)
 . . ; --- Execute VERIFY procedure ---
"RTN","TIUEDIM",59,0)
 . . D VERIFY^TIUT(DA)
"RTN","TIUEDIM",60,0)
 . . ; --- Execute SIGNATURE procedure ---
"RTN","TIUEDIM",61,0)
 . . D EDSIG^TIURS(DA)
"RTN","TIUEDIM",62,0)
 . . ; --- If an EXIT ACTION exists, execute it ---
"RTN","TIUEDIM",63,0)
 . . I $L($G(^TIU(8925.1,+TIUTYP,4.7))) X ^TIU(8925.1,+TIUTYP,4.7)
"RTN","TIUEDIM",64,0)
 . . ; --- If required, prompt for print
"RTN","TIUEDIM",65,0)
 . . I +$P($G(TIUDPRM(0)),U,8) D PRINT^TIUEPRNT(DA)
"RTN","TIUEDIM",66,0)
 Q
"RTN","TIUEDIT")
0^23^B76856252
"RTN","TIUEDIT",1,0)
TIUEDIT ; SLC/JER - Enter/Edit a Document ;8/19/94  14:52
"RTN","TIUEDIT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUEDIT",3,0)
MAIN(TIUCLASS,SUCCESS,DFN,TIUTITLE,EVNTFLAG,NOSAVE,TIUNDA) ; Main routine
"RTN","TIUEDIT",4,0)
 ;
"RTN","TIUEDIT",5,0)
 N TIUASK,TIUOUT,TIUREL,TIUCHK,TIUDA,TIUEDIT,TIUY,TIUNEW,TIUTYP,TIUDPRM
"RTN","TIUEDIT",6,0)
 N TIUDFLT,TIUPREF,VAIN,VADM,TIULMETH,TIUVMETH,DIRUT,DUOUT,DTOUT,TIUPRM0
"RTN","TIUEDIT",7,0)
 N TIUPRM1,TIUPRM3,TIUENTRY,TIUEXIT,TIUBY,TIUPNAME,TIUST
"RTN","TIUEDIT",8,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIUEDIT",9,0)
 S TIUDFLT="LAST"
"RTN","TIUEDIT",10,0)
 ; --- Get user's preferences ---
"RTN","TIUEDIT",11,0)
 S TIUPREF=$$PERSPRF^TIULE(DUZ)
"RTN","TIUEDIT",12,0)
 I $P(TIUPREF,U,6)="M",(+$G(ORVP)'>0),(+$G(NOSAVE)'>0) D MAIN^TIUEDIM(TIUCLASS,.TIUOUT,.TIUNDA) Q
"RTN","TIUEDIT",13,0)
 F  D  Q:+$G(ORVP)!+$G(TIUOUT)!+$G(NOSAVE)
"RTN","TIUEDIT",14,0)
 . N TIU,TIUVSUPP,TIUEDIT S TIUVSUPP=0
"RTN","TIUEDIT",15,0)
 . ; --- Get patient ---
"RTN","TIUEDIT",16,0)
 . I +$G(ORVP) S DFN=+$G(ORVP)
"RTN","TIUEDIT",17,0)
 . I +$G(DFN)'>0 D  I +DFN'>0 S TIUOUT=1 Q
"RTN","TIUEDIT",18,0)
 . . S DFN=+$$PATIENT^TIULA
"RTN","TIUEDIT",19,0)
 . S TIUCLASS=$G(TIUCLASS,38)
"RTN","TIUEDIT",20,0)
 . I TIUCLASS=3,$S(+$$ISA^USRLM(DUZ,"PROVIDER"):1,+$$ISA^USRLM(DUZ,"STUDENT"):1,1:0),(+$G(NOSAVE)'>0) D EXSTNOTE^TIUEDI2(DFN)
"RTN","TIUEDIT",21,0)
 . I +$G(DIROUT)!+$G(DUOUT)!+$G(DTOUT) S TIUOUT=1 Q
"RTN","TIUEDIT",22,0)
 . ; --- Get title ---
"RTN","TIUEDIT",23,0)
 . I +$G(NOSAVE),$G(TIUTITLE)]"" D  I 1
"RTN","TIUEDIT",24,0)
 . . S TIUTYP=1
"RTN","TIUEDIT",25,0)
 . . S TIUTYP(1)=1_U_$S(+$G(TIUTITLE)>0:+$G(TIUTITLE),1:+$O(^TIU(8925.1,"B",TIUTITLE,0)))
"RTN","TIUEDIT",26,0)
 . E  D
"RTN","TIUEDIT",27,0)
 . . I $G(TIUTITLE)]"" S TIUDFLT=$G(TIUTITLE)
"RTN","TIUEDIT",28,0)
 . . D DOCSPICK^TIULA2(.TIUTYP,TIUCLASS,"1A",TIUDFLT,"","+$$CANPICK^TIULP(+Y),+$$CANENTR^TIULP(+Y)")
"RTN","TIUEDIT",29,0)
 . I +$G(TIUTYP)'>0 S TIUOUT=1 Q
"RTN","TIUEDIT",30,0)
 . S TIUTYP=+$P($G(TIUTYP(1)),U,2)
"RTN","TIUEDIT",31,0)
 . ; --- Init doc parameters ---
"RTN","TIUEDIT",32,0)
 . D DOCPRM^TIULC1(TIUTYP,.TIUDPRM)
"RTN","TIUEDIT",33,0)
 . ; --- execute ENTRY ACTION ---
"RTN","TIUEDIT",34,0)
 . S TIUENTRY=$$GETENTRY^TIUEDI2(+TIUTYP)
"RTN","TIUEDIT",35,0)
 . I $L(TIUENTRY) X TIUENTRY
"RTN","TIUEDIT",36,0)
 . Q:+$G(TIUOUT)  ; If ENTRY ACTION sets TIUOUT=1 Abort entry
"RTN","TIUEDIT",37,0)
 . ; --- Get visit ---
"RTN","TIUEDIT",38,0)
 . I $G(EVNTFLAG)']"" S TIUVSUPP=+$$SUPPVSIT^TIULC1(TIUTYP)
"RTN","TIUEDIT",39,0)
 . I $S(TIUVSUPP>0:0,+$G(EVNTFLAG)'>0:1,1:0) D  I 1
"RTN","TIUEDIT",40,0)
 . . S TIULMETH=$$GETLMETH^TIUEDI1(TIUTYP)
"RTN","TIUEDIT",41,0)
 . . I '$L(TIULMETH) D  S TIUOUT=1 Q
"RTN","TIUEDIT",42,0)
 . . . W !,$C(7),"No Visit Linkage Method defined for "
"RTN","TIUEDIT",43,0)
 . . . W $$PNAME^TIULC1(TIUTYP),".",!,"Please contact IRM..."
"RTN","TIUEDIT",44,0)
 . . X TIULMETH
"RTN","TIUEDIT",45,0)
 . E  D
"RTN","TIUEDIT",46,0)
 . . N VSIT
"RTN","TIUEDIT",47,0)
 . . D EVENT^TIUSRVP1(.VSIT,DFN)
"RTN","TIUEDIT",48,0)
 . . D:+$G(VSIT) VSIT^TIULV(.TIU,VSIT)
"RTN","TIUEDIT",49,0)
 . I '$D(TIU("VSTR")) D  Q
"RTN","TIUEDIT",50,0)
 . . W !,$C(7),"Patient & Visit required." H 2 K DFN,TIUTYP
"RTN","TIUEDIT",51,0)
 . ; --- Validate ---
"RTN","TIUEDIT",52,0)
 . S TIUVMETH=$$GETVMETH^TIUEDI1(TIUTYP)
"RTN","TIUEDIT",53,0)
 . I '$L(TIUVMETH) D  S TIUOUT=1 Q
"RTN","TIUEDIT",54,0)
 . . W !,$C(7),"No Validation Method defined for "
"RTN","TIUEDIT",55,0)
 . . W $$PNAME^TIULC1(TIUTYP),".",!,"Please contact IRM..."
"RTN","TIUEDIT",56,0)
 . X TIUVMETH
"RTN","TIUEDIT",57,0)
 . I '$D(TIU("VSTR")) D  Q
"RTN","TIUEDIT",58,0)
 . . W !,$C(7),"Patient & Visit required." H 2 K DFN,TIUTYP
"RTN","TIUEDIT",59,0)
 . I $D(TIU),+$G(TIUASK) D
"RTN","TIUEDIT",60,0)
 . . N DA
"RTN","TIUEDIT",61,0)
 . . S DA=$$GETREC^TIUEDI1(DFN,.TIU,1,.TIUNEW,.TIUDPRM)
"RTN","TIUEDIT",62,0)
 . . I +DA'>0 W !,"Unable to enter/edit." Q
"RTN","TIUEDIT",63,0)
 . . S TIUEDIT=$S('+$G(TIUNEW):$$CANDO^TIULP(DA,"EDIT RECORD"),1:1)
"RTN","TIUEDIT",64,0)
 . . I '+TIUEDIT D  Q
"RTN","TIUEDIT",65,0)
 . . . W !,$P(TIUEDIT,U,2) ; Echo denial message
"RTN","TIUEDIT",66,0)
 . . . D ADDENDUM^TIUADD(DA,"",.TIUCHNG)
"RTN","TIUEDIT",67,0)
 . . N TIUQUIT,TIUADD,TIUTDA
"RTN","TIUEDIT",68,0)
 . . D DIE(DA,.TIUQUIT) Q:+$G(TIUQUIT)=2
"RTN","TIUEDIT",69,0)
 . . I $$EMPTYDOC^TIULF(DA) D DELETE(DA,0) S:$G(VALMAR)="^TMP(""TIUVIEW"",$J)" VALMBCK="Q" Q
"RTN","TIUEDIT",70,0)
 . . Q:+$G(TIUQUIT)
"RTN","TIUEDIT",71,0)
 . . S:+DA SUCCESS=1
"RTN","TIUEDIT",72,0)
 . . I +$G(TIUONCE) S TIUNDA(+$G(DA))=""
"RTN","TIUEDIT",73,0)
 . . I +$G(TIU("STOP")) D DEFER^TIUVSIT(DA,TIU("STOP")) I 1
"RTN","TIUEDIT",74,0)
 . . E  D QUE^TIUPXAP1
"RTN","TIUEDIT",75,0)
 . . ; --- RELEASE proc ---
"RTN","TIUEDIT",76,0)
 . . D RELEASE^TIUT(DA)
"RTN","TIUEDIT",77,0)
 . . ; --- VERIFY proc ---
"RTN","TIUEDIT",78,0)
 . . D VERIFY^TIUT(DA)
"RTN","TIUEDIT",79,0)
 . . ; --- SIGN proc ---
"RTN","TIUEDIT",80,0)
 . . D EDSIG^TIURS(DA)
"RTN","TIUEDIT",81,0)
 . . ; --- execute EXIT ACTION ---
"RTN","TIUEDIT",82,0)
 . . S TIUEXIT=$$GETEXIT^TIUEDI2(+$P(TIUTYP(1),U,2))
"RTN","TIUEDIT",83,0)
 . . I $L(TIUEXIT) S TIUTDA=DA X TIUEXIT S DA=TIUTDA
"RTN","TIUEDIT",84,0)
 . . ; --- prompt for print ---
"RTN","TIUEDIT",85,0)
 . . I +$P($G(TIUDPRM(0)),U,8) D PRINT^TIUEPRNT(DA)
"RTN","TIUEDIT",86,0)
 . K DFN ; Free patient
"RTN","TIUEDIT",87,0)
 . S TIUPNAME=$$PNAME^TIULC1(TIUCLASS)
"RTN","TIUEDIT",88,0)
 . I $$UP^XLFSTR($E(TIUPNAME,$L(TIUPNAME)))="S" S TIUPNAME=$E(TIUPNAME,1,$L(TIUPNAME)-1)
"RTN","TIUEDIT",89,0)
 . I '+$G(NOSAVE),'+$G(ORVP) W !!,"You may enter another ",TIUPNAME,". Press RETURN to exit.",!
"RTN","TIUEDIT",90,0)
 Q
"RTN","TIUEDIT",91,0)
DIE(DA,TIUQUIT,TIUCHNG) ; Invoke ^DIE
"RTN","TIUEDIT",92,0)
 N Y,DIE,DR
"RTN","TIUEDIT",93,0)
 I '$D(TIUPREF) S TIUPREF=$$PERSPRF^TIULE(DUZ)
"RTN","TIUEDIT",94,0)
 L +^TIU(8925,+DA):1
"RTN","TIUEDIT",95,0)
 E  W !?5,$C(7),"Another user is editing this entry." S TIUQUIT=2 Q
"RTN","TIUEDIT",96,0)
 S ^TIU(8925,"ASAVE",DUZ,DA)=""
"RTN","TIUEDIT",97,0)
 S DR=$$GETTMPL^TIUEDI1(+$P(^TIU(8925,+DA,0),U))
"RTN","TIUEDIT",98,0)
 I DR']"" W !?5,$C(7),"No Edit template defined for ",$$PNAME^TIULC1(+$P(^TIU(8925,+DA,0),U)),! S TIUQUIT=2 Q
"RTN","TIUEDIT",99,0)
 S DIE=8925 D ^DIE
"RTN","TIUEDIT",100,0)
 I $D(Y) S TIUQUIT=1
"RTN","TIUEDIT",101,0)
 I +$G(TIUQUIT)>0,+$G(TIUNEW)>0 Q
"RTN","TIUEDIT",102,0)
 D:+$G(TIUQUIT) UPDTIRT^TIUDIRT(.TIU,DA),SEND^TIUALRT(DA)
"RTN","TIUEDIT",103,0)
 Q:+$G(TIUQUIT)
"RTN","TIUEDIT",104,0)
 D TEXTEDIT(DA,.TIUCHNG)
"RTN","TIUEDIT",105,0)
 I +$G(^TIU(8925,DA,0))'>0 S TIUQUIT=2 Q
"RTN","TIUEDIT",106,0)
 S DR=".05///"_$$STATUS^TIULC(DA),DIE=8925 D ^DIE
"RTN","TIUEDIT",107,0)
 D UPDTIRT^TIUDIRT(.TIU,DA),SEND^TIUALRT(DA)
"RTN","TIUEDIT",108,0)
 L -^TIU(8925,+DA)
"RTN","TIUEDIT",109,0)
 Q
"RTN","TIUEDIT",110,0)
TEXTEDIT(DA,TIUCMMT,TIUCHNG) ; Call DIWE
"RTN","TIUEDIT",111,0)
 N DIC,DIWE,DIWESUB,DIWPT,DR,DWHD,DWI,DWLC,DWLR,DWLW,DWO,DWPK,DDWRW
"RTN","TIUEDIT",112,0)
 N TIUCKSM0,TIUCKSM1,TIUESNM,TIUESBLK
"RTN","TIUEDIT",113,0)
 S TIUESNM=$$DECRYPT^TIULC1($P($G(^TIU(8925,DA,15)),U,3),1,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")"))
"RTN","TIUEDIT",114,0)
 S TIUESBLK=$$DECRYPT^TIULC1($P($G(^TIU(8925,DA,15)),U,4),1,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")"))
"RTN","TIUEDIT",115,0)
 W !!,"Calling text editor, please wait..." H 1
"RTN","TIUEDIT",116,0)
 X:$L($G(TIUPRM3)) TIUPRM3
"RTN","TIUEDIT",117,0)
 D BUFFER(DA) ; Load edit buffer to protect original from booboos
"RTN","TIUEDIT",118,0)
 S TIUCKSM0=$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEMP"")")
"RTN","TIUEDIT",119,0)
 I $D(^TIU(8925,+DA,"TEXT"))'>9 D LOADDFLT(DA,+$P(TIUTYP(1),U,2))
"RTN","TIUEDIT",120,0)
 S DIWESUB="Patient: "_$G(TIU("PNM")),DIC="^TIU(8925,"_+DA_",""TEMP"","
"RTN","TIUEDIT",121,0)
 I $G(VALMAR)="^TMP(""TIUVIEW"",$J)",(+$G(VALMBG)>5),(+$G(VALMBG)'>(+$P($G(^TIU(8925,+DA,"TEXT",0)),U,3)+4)) S DDWRW=+$G(VALMBG)-4
"RTN","TIUEDIT",122,0)
 S DWPK=1,DWLW=74 D EN^DIWE
"RTN","TIUEDIT",123,0)
 ; DELETE if NOSAVE
"RTN","TIUEDIT",124,0)
 I +$G(NOSAVE) D DELETE(DA,0) S TIUQUIT=2 Q
"RTN","TIUEDIT",125,0)
 ; Save edit buffer
"RTN","TIUEDIT",126,0)
 S TIUCKSM1=$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEMP"")")
"RTN","TIUEDIT",127,0)
 I TIUCKSM0'=TIUCKSM1 D  I 1
"RTN","TIUEDIT",128,0)
 . D COMMIT(DA),AUDIT^TIUEDI1(DA,TIUCKSM0,TIUCKSM1)
"RTN","TIUEDIT",129,0)
 . S TIUCHNG=1
"RTN","TIUEDIT",130,0)
 . ; re-file /es/-block
"RTN","TIUEDIT",131,0)
 . I $L(TIUESNM) D
"RTN","TIUEDIT",132,0)
 . . S DR="1503///^S X="_""""_TIUESNM_""""_";1504///^S X="_""""_TIUESBLK_"""",DIE=8925
"RTN","TIUEDIT",133,0)
 . . D ^DIE
"RTN","TIUEDIT",134,0)
 E  W !,"No changes made..." D COMMIT(DA,1) S TIUCHNG=0 ;S DIE=8925,DR="3///@",TIUCHNG=0 D ^DIE
"RTN","TIUEDIT",135,0)
 S DIE=8925,DR=".1///"_$$LINECNT^TIULC(DA) D ^DIE
"RTN","TIUEDIT",136,0)
 Q
"RTN","TIUEDIT",137,0)
DELETE(TIUDA,PROMPT,MSG,HUSH) ; Delete record
"RTN","TIUEDIT",138,0)
 N DIDEL,DIE,DR,TIUD0,TIUVSIT,TIUVKILL
"RTN","TIUEDIT",139,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUVSIT=$P(TIUD0,U,3)
"RTN","TIUEDIT",140,0)
 I +$G(PROMPT),'+$$READ^TIUU("YO",MSG,"NO") W !,"Nothing Deleted." Q
"RTN","TIUEDIT",141,0)
 K ^TIU(8925,"ASAVE",DUZ,TIUDA)
"RTN","TIUEDIT",142,0)
 D DELIRT^TIUDIRT(TIUDA)
"RTN","TIUEDIT",143,0)
 S DA=TIUDA,(DIDEL,DIE)=8925,DR=".01///@"
"RTN","TIUEDIT",144,0)
 D ^DIE W:'+$G(HUSH) !,"<NOTHING ENTERED. "
"RTN","TIUEDIT",145,0)
 I '+$G(HUSH) W:+TIUD0 $$PNAME^TIULC1(+TIUD0)," DELETED>"
"RTN","TIUEDIT",146,0)
 D DELCOMP^TIUEDI1(TIUDA),DELAUDIT^TIUEDI1(TIUDA)
"RTN","TIUEDIT",147,0)
 K ^TIU(8925,"ASAVE",DUZ,TIUDA) ; Remove Save Flag
"RTN","TIUEDIT",148,0)
 D ALERTDEL^TIUALRT(TIUDA),ADDENDEL^TIUALRT(TIUDA)
"RTN","TIUEDIT",149,0)
 I +TIUVSIT S TIUVKILL=$$DELVFILE^PXAPI("ALL",TIUVSIT,"","TEXT INTEGRATION UTILITIES")
"RTN","TIUEDIT",150,0)
 Q
"RTN","TIUEDIT",151,0)
LOADDFLT(DA,TIUTYP) ; Load bp text
"RTN","TIUEDIT",152,0)
 N TIUI,TIUJ,TIUK,TIUL S TIUI=0
"RTN","TIUEDIT",153,0)
 S TIUJ=+$P($G(^TIU(8925,+DA,"TEMP",0)),U,3)+1
"RTN","TIUEDIT",154,0)
 ; --- Set comp hdr ---
"RTN","TIUEDIT",155,0)
 S ^TIU(8925,+DA,"TEMP",TIUJ,0)=$S($P($G(^TIU(8925.1,+TIUTYP,0)),U,4)="CO":$P(^TIU(8925.1,+TIUTYP,0),U)_":   ",1:"")
"RTN","TIUEDIT",156,0)
 I +TIUJ=1,($G(^TIU(8925,+DA,"TEMP",TIUJ,0))']"") K ^TIU(8925,+DA,"TEMP",TIUJ,0) S TIUJ=0
"RTN","TIUEDIT",157,0)
 S ^TIU(8925,+DA,"TEMP",0)="^^"_TIUJ_U_TIUJ_U_DT_"^^"
"RTN","TIUEDIT",158,0)
 F  S TIUI=$O(^TIU(8925.1,+TIUTYP,"DFLT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUEDIT",159,0)
 . S TIUJ=TIUJ+1,X=$G(^TIU(8925.1,+TIUTYP,"DFLT",TIUI,0))
"RTN","TIUEDIT",160,0)
 . I X["|" S X=$$BOIL(X,TIUJ)
"RTN","TIUEDIT",161,0)
 . I X["~@" D INSMULT(X,"^TIU(8925,"_+DA_",""TEMP"")",.TIUJ) I 1
"RTN","TIUEDIT",162,0)
 . E  S ^TIU(8925,+DA,"TEMP",TIUJ,0)=X
"RTN","TIUEDIT",163,0)
 . S ^TIU(8925,+DA,"TEMP",0)="^^"_TIUJ_U_TIUJ_U_DT_"^^"
"RTN","TIUEDIT",164,0)
 I +$O(^TIU(8925.1,+TIUTYP,10,0)) D
"RTN","TIUEDIT",165,0)
 . N TIUFITEM,TIUI
"RTN","TIUEDIT",166,0)
 . D ITEMS^TIUFLT(+TIUTYP)
"RTN","TIUEDIT",167,0)
 . S TIUI=0 F  S TIUI=$O(TIUFITEM(TIUI)) Q:+TIUI'>0  D
"RTN","TIUEDIT",168,0)
 . . S TIUL=+$G(TIUFITEM(+TIUI)) D LOADDFLT(DA,TIUL)
"RTN","TIUEDIT",169,0)
 Q
"RTN","TIUEDIT",170,0)
BOIL(LINE,COUNT) ; execute objects
"RTN","TIUEDIT",171,0)
 N TIUI,DIC,X,Y,TIUFPRIV S TIUFPRIV=1
"RTN","TIUEDIT",172,0)
 S DIC=8925.1,DIC(0)="FMZ"
"RTN","TIUEDIT",173,0)
 F TIUI=2:2:$L(LINE,"|") S X=$P(LINE,"|",TIUI) D
"RTN","TIUEDIT",174,0)
 . D ^DIC
"RTN","TIUEDIT",175,0)
 . I +Y'>0 S X="The OBJECT "_X_" was NOT found...Contact IRM."
"RTN","TIUEDIT",176,0)
 . I +Y>0 D
"RTN","TIUEDIT",177,0)
 . . I $D(^TIU(8925.1,+Y,9)),+$$CANXEC(+Y) X ^(9) I 1
"RTN","TIUEDIT",178,0)
 . . E  S X="The OBJECT "_X_" is INACTIVE...Contact IRM."
"RTN","TIUEDIT",179,0)
 . S LINE=$$REPLACE(LINE,X,TIUI)
"RTN","TIUEDIT",180,0)
 Q $TR(LINE,"|","")
"RTN","TIUEDIT",181,0)
CANXEC(TIUODA) ; Eval Obj Status
"RTN","TIUEDIT",182,0)
 N TIUOST,TIUY S TIUOST=+$P($G(^TIU(8925.1,+TIUODA,0)),U,7)
"RTN","TIUEDIT",183,0)
 S TIUY=$S(TIUOST=11:1,+$G(NOSAVE):1,1:0)
"RTN","TIUEDIT",184,0)
 Q +$G(TIUY)
"RTN","TIUEDIT",185,0)
REPLACE(LINE,X,TIUI) ; Replace TIUIth object in LINE
"RTN","TIUEDIT",186,0)
 S $P(LINE,"|",TIUI)=X
"RTN","TIUEDIT",187,0)
 Q LINE
"RTN","TIUEDIT",188,0)
INSMULT(LINE,TARGET,TIULCNT) ; Mult-valued results
"RTN","TIUEDIT",189,0)
 N TIUI,TIULINE,TIUX,TIUSRC,TIUSCNT,TIUSLINE
"RTN","TIUEDIT",190,0)
 S TIUSRC=$P(LINE,"~@",2)
"RTN","TIUEDIT",191,0)
 S TIULINE=$P(LINE,"~@"),(TIUI,TIUSCNT)=0
"RTN","TIUEDIT",192,0)
 F  S TIUI=$O(@TIUSRC@(TIUI)) Q:+TIUI'>0  D
"RTN","TIUEDIT",193,0)
 . S TIUSCNT=TIUSCNT+1
"RTN","TIUEDIT",194,0)
 . S TIUSLINE=$G(@TIUSRC@(TIUI,0))
"RTN","TIUEDIT",195,0)
 . I TIUSCNT=1,($L(TIULINE_TIUSLINE)>73) D  Q
"RTN","TIUEDIT",196,0)
 . . S @TARGET@(TIULCNT,0)=TIULINE
"RTN","TIUEDIT",197,0)
 . . S TIULCNT=TIULCNT+1
"RTN","TIUEDIT",198,0)
 . . S @TARGET@(TIULCNT,0)=TIUSLINE
"RTN","TIUEDIT",199,0)
 . . S TIULCNT=TIULCNT+1
"RTN","TIUEDIT",200,0)
 . I TIUSCNT=1,($L(TIULINE_TIUSLINE)'>73) D  Q
"RTN","TIUEDIT",201,0)
 . . S @TARGET@(TIULCNT,0)=TIULINE_TIUSLINE
"RTN","TIUEDIT",202,0)
 . . S TIULCNT=TIULCNT+1
"RTN","TIUEDIT",203,0)
 . S @TARGET@(TIULCNT,0)=$G(TIUSLINE)
"RTN","TIUEDIT",204,0)
 . S TIULCNT=TIULCNT+1
"RTN","TIUEDIT",205,0)
 K @TIUSRC
"RTN","TIUEDIT",206,0)
 Q
"RTN","TIUEDIT",207,0)
BUFFER(DA) ; Save original text
"RTN","TIUEDIT",208,0)
 K ^TIU(8925,+DA,"TEMP")
"RTN","TIUEDIT",209,0)
 M ^TIU(8925,+DA,"TEMP")=^TIU(8925,+DA,"TEXT")
"RTN","TIUEDIT",210,0)
 D MERGTEMP^TIUEDI1(DA)
"RTN","TIUEDIT",211,0)
 Q
"RTN","TIUEDIT",212,0)
COMMIT(DA,HUSH) ; Overwrite original text
"RTN","TIUEDIT",213,0)
 N DIE,DR
"RTN","TIUEDIT",214,0)
 I '+$G(HUSH),(+$P($G(TIUPREF),U,7)>0),'$$READ^TIUU("YO","Save changes","YES") D  Q
"RTN","TIUEDIT",215,0)
 . W !!,$C(7),"Changes abandoned..."
"RTN","TIUEDIT",216,0)
 . K ^TIU(8925,+DA,"TEMP") M ^TIU(8925,+DA,"TEMP")=^TIU(8925,+DA,"TEXT")
"RTN","TIUEDIT",217,0)
 . K ^TIU(8925,+DA,"TEXT")
"RTN","TIUEDIT",218,0)
 . D MERGTEXT^TIUEDI1(DA,.TIU)
"RTN","TIUEDIT",219,0)
 . K ^TIU(8925,+DA,"TEMP")
"RTN","TIUEDIT",220,0)
 W:'+$G(HUSH) !!,"Saving "_$$PNAME^TIULC1(+$P(TIUTYP(1),U,2))_" with changes..."
"RTN","TIUEDIT",221,0)
 K ^TIU(8925,+DA,"TEXT")
"RTN","TIUEDIT",222,0)
 D MERGTEXT^TIUEDI1(DA,.TIU)
"RTN","TIUEDIT",223,0)
 K ^TIU(8925,+DA,"TEMP")
"RTN","TIUEDIT",224,0)
 K ^TIU(8925,"ASAVE",DUZ,DA)
"RTN","TIUEDIT",225,0)
 S TIUCMMT=1
"RTN","TIUEDIT",226,0)
 Q
"RTN","TIUEDITR")
0^24^B9211968
"RTN","TIUEDITR",1,0)
TIUEDITR ; SLC/JER - Enter/Edit a Document for Transcriber
"RTN","TIUEDITR",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUEDITR",3,0)
MAIN(TIUCLASS) ; Control Branching
"RTN","TIUEDITR",4,0)
 N TIUPREF,TIUOUT,TIUAUTH
"RTN","TIUEDITR",5,0)
 ; --- Get user's preferences ---
"RTN","TIUEDITR",6,0)
 S TIUPREF=$$PERSPRF^TIULE(DUZ)
"RTN","TIUEDITR",7,0)
 ; --- Get the author to be used for multiple patients
"RTN","TIUEDITR",8,0)
 S TIUAUTH=+$$AUTHOR^TIULA2
"RTN","TIUEDITR",9,0)
 I TIUAUTH'>0 Q
"RTN","TIUEDITR",10,0)
 F  D  Q:+$G(TIUOUT)
"RTN","TIUEDITR",11,0)
 . N DFN,TIUREL,TIUCHK,TIUDA,TIUEDIT,TIUY,TIUNEW,TIUTYP,TIUDPRM
"RTN","TIUEDITR",12,0)
 . N TIUASK,TIU,VAIN,VADM,TIULMETH,TIUVMETH,TIUENTRY,TIUEXIT
"RTN","TIUEDITR",13,0)
 . I $P(TIUPREF,U,6)="M" D MAIN^TIUEDIM(TIUCLASS,.TIUOUT) Q
"RTN","TIUEDITR",14,0)
 . ; --- Get a patient ---
"RTN","TIUEDITR",15,0)
 . S DFN=+$$PATIENT^TIULA I +DFN'>0 S TIUOUT=1 Q
"RTN","TIUEDITR",16,0)
 . S TIUCLASS=$G(TIUCLASS,38)
"RTN","TIUEDITR",17,0)
 . ; --- Get a document type ---
"RTN","TIUEDITR",18,0)
 . D DOCSPICK^TIULA2(.TIUTYP,TIUCLASS,"1A","LAST","","+$$CANENTR^TIULP(+Y)")
"RTN","TIUEDITR",19,0)
 . I +$G(TIUTYP)'>0 S TIUOUT=1 Q
"RTN","TIUEDITR",20,0)
 . S TIUTYP=+$P($G(TIUTYP(1)),U,2)
"RTN","TIUEDITR",21,0)
 . ; --- Initialize document parameters ---
"RTN","TIUEDITR",22,0)
 . D DOCPRM^TIULC1(TIUTYP,.TIUDPRM)
"RTN","TIUEDITR",23,0)
 . ; --- If an ENTRY ACTION exists, execute it ---
"RTN","TIUEDITR",24,0)
 . S TIUENTRY=$$GETENTRY^TIUEDI2(+TIUTYP)
"RTN","TIUEDITR",25,0)
 . I $L(TIUENTRY) X TIUENTRY
"RTN","TIUEDITR",26,0)
 . Q:+$G(TIUOUT)  ; If entry action sets TIUOUT=1 Abort Entry
"RTN","TIUEDITR",27,0)
 . ; --- Get associated visit ---
"RTN","TIUEDITR",28,0)
 . S TIULMETH=$$GETLMETH^TIUEDI1(TIUTYP)
"RTN","TIUEDITR",29,0)
 . I '$L(TIULMETH) D  S TIUOUT=1 Q
"RTN","TIUEDITR",30,0)
 . . W !,$C(7),"No Visit Linkage Method defined for "
"RTN","TIUEDITR",31,0)
 . . W $$PNAME^TIULC1(TIUTYP),".",!,"Please contact IRM..."
"RTN","TIUEDITR",32,0)
 . X TIULMETH I '$D(TIU) W !,$C(7),"Patient & Visit required." H 2 Q
"RTN","TIUEDITR",33,0)
 . ; --- Validate Selection ---
"RTN","TIUEDITR",34,0)
 . S TIUVMETH=$$GETVMETH^TIUEDI1(TIUTYP)
"RTN","TIUEDITR",35,0)
 . I '$L(TIUVMETH) D  S TIUOUT=1 Q
"RTN","TIUEDITR",36,0)
 . . W !,$C(7),"No Validation Method defined for "
"RTN","TIUEDITR",37,0)
 . . W $$PNAME^TIULC1(TIUTYP),".",!,"Please contact IRM..."
"RTN","TIUEDITR",38,0)
 . X TIUVMETH
"RTN","TIUEDITR",39,0)
 . I $D(TIU),+$G(TIUASK) D
"RTN","TIUEDITR",40,0)
 . . S DA=$$GETREC^TIUEDI1(DFN,.TIU,1,.TIUNEW,.TIUDPRM)
"RTN","TIUEDITR",41,0)
 . . I +DA'>0 W !,"Unable to enter/edit." Q
"RTN","TIUEDITR",42,0)
 . . S TIUEDIT=$S('+$G(TIUNEW):$$CANDO^TIULP(DA,"EDIT RECORD"),1:1)
"RTN","TIUEDITR",43,0)
 . . I '+TIUEDIT D  Q
"RTN","TIUEDITR",44,0)
 . . . W !,$P(TIUEDIT,U,2) ; Echo denial message
"RTN","TIUEDITR",45,0)
 . . . D ADDENDUM^TIUADD(DA,"",.TIUCHNG)
"RTN","TIUEDITR",46,0)
 . . N TIUQUIT,TIUADD
"RTN","TIUEDITR",47,0)
 . . D DIE^TIUEDIT(DA,.TIUQUIT) Q:+$G(TIUQUIT)=2
"RTN","TIUEDITR",48,0)
 . . I $$EMPTYDOC^TIULF(DA) D DELETE^TIUEDIT(DA,0) Q
"RTN","TIUEDITR",49,0)
 . . Q:+$G(TIUQUIT)
"RTN","TIUEDITR",50,0)
 . . I +$G(TIUONCE) S TIUNDA(+$G(DA))=""
"RTN","TIUEDITR",51,0)
 . . I +$G(TIU("STOP")) D DEFER^TIUVSIT(DA,TIU("STOP")) I 1
"RTN","TIUEDITR",52,0)
 . . E  D QUE^TIUPXAP1
"RTN","TIUEDITR",53,0)
 . . ; --- Execute RELEASE procedure ---
"RTN","TIUEDITR",54,0)
 . . D RELEASE^TIUT(DA)
"RTN","TIUEDITR",55,0)
 . . ; --- Execute VERIFY procedure ---
"RTN","TIUEDITR",56,0)
 . . D VERIFY^TIUT(DA)
"RTN","TIUEDITR",57,0)
 . . ; --- Execute SIGNATURE procedure ---
"RTN","TIUEDITR",58,0)
 . . D EDSIG^TIURS(DA)
"RTN","TIUEDITR",59,0)
 . . ; --- If an EXIT ACTION exists, execute it ---
"RTN","TIUEDITR",60,0)
 . . S TIUEXIT=$$GETEXIT^TIUEDI2(+$P(TIUTYP(1),U,2))
"RTN","TIUEDITR",61,0)
 . . I $L(TIUEXIT) X TIUEXIT
"RTN","TIUEDITR",62,0)
 . . ; --- If required, prompt for print
"RTN","TIUEDITR",63,0)
 . . I +$P($G(TIUDPRM(0)),U,8) D PRINT^TIUEPRNT(DA)
"RTN","TIUEDITR",64,0)
 Q
"RTN","TIUELST")
0^25^B17741798
"RTN","TIUELST",1,0)
TIUELST ; SLC/JER - Review Filer Events ;9/13/95  09:37
"RTN","TIUELST",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUELST",3,0)
EN ; Invoke List Manager
"RTN","TIUELST",4,0)
 D EN^VALM("TIU REVIEW FILING EVENTS")
"RTN","TIUELST",5,0)
 S VALMBCK="Q"
"RTN","TIUELST",6,0)
 Q
"RTN","TIUELST",7,0)
MAKELIST ; Build review screen list
"RTN","TIUELST",8,0)
 N TIUI,TIUTMP,TYPE,STATUS
"RTN","TIUELST",9,0)
 S TYPE=$$SELTYPE("FILING ERRORS")
"RTN","TIUELST",10,0)
 S STATUS=$S(+$G(TYPE)=0:"",+$G(TYPE)=3:"01",1:$$SELRES("UNRESOLVED"))
"RTN","TIUELST",11,0)
 I +$G(DIRUT) S VALMQUIT=1 Q
"RTN","TIUELST",12,0)
 S TIUEDT=$$EDATE^TIULA("Event","T-30")
"RTN","TIUELST",13,0)
 I TIUEDT'>0 S VALMQUIT=1 Q
"RTN","TIUELST",14,0)
 S TIULDT=$$LDATE^TIULA("Event")
"RTN","TIUELST",15,0)
 I TIULDT'>0 S VALMQUIT=1 Q
"RTN","TIUELST",16,0)
 ; If TIUEDT is NOT earlier than TIULDT, then swap
"RTN","TIUELST",17,0)
 I TIUEDT>TIULDT S TIUTMP=TIUEDT,TIUEDT=TIULDT,TIULDT=TIUTMP
"RTN","TIUELST",18,0)
 W !,"Searching for the events."
"RTN","TIUELST",19,0)
 D BUILD(TYPE,STATUS,TIUEDT,TIULDT)
"RTN","TIUELST",20,0)
 Q
"RTN","TIUELST",21,0)
SELTYPE(DFLT) ; Select Event Type
"RTN","TIUELST",22,0)
 N PRMT,READTYPE,X,Y
"RTN","TIUELST",23,0)
 S PRMT="Select Event Type: "
"RTN","TIUELST",24,0)
 S READTYPE="SMA^F:Filing Errors;M:Missing Field Errors;S:Successes;A:All Events"
"RTN","TIUELST",25,0)
 S Y=$P($$READ^TIUU(READTYPE,PRMT,DFLT),U)
"RTN","TIUELST",26,0)
 S Y=$S(Y="S":0,Y="F":1,Y="M":2,1:3)
"RTN","TIUELST",27,0)
 Q Y
"RTN","TIUELST",28,0)
SELRES(DFLT) ; Select Resolution status
"RTN","TIUELST",29,0)
 N PRMT,READTYPE,X,Y
"RTN","TIUELST",30,0)
 S PRMT="Select Resolution Status: "
"RTN","TIUELST",31,0)
 S READTYPE="SAM^U:Unresolved Errors;R:Resolved Errors;A:All Errors"
"RTN","TIUELST",32,0)
 S Y=$P($$READ^TIUU(READTYPE,PRMT,DFLT),U)
"RTN","TIUELST",33,0)
 S Y=$S(Y="U":0,Y="R":1,1:2)
"RTN","TIUELST",34,0)
 Q Y
"RTN","TIUELST",35,0)
BUILD(TIUTYP,STATUS,EARLY,LATE) ; Build List
"RTN","TIUELST",36,0)
 N TIUCNT,TIUI,TIUJ,TIUK,TIUP,TIUPICK,TIUREC,TIUSTAT,XREF
"RTN","TIUELST",37,0)
 S VALMCNT=0
"RTN","TIUELST",38,0)
 K ^TMP("TIUERR",$J),^TMP("TIUERRIDX",$J)
"RTN","TIUELST",39,0)
 S TIUPICK=+$O(^ORD(101,"B","TIU ACTION SELECT LIST ELEMENT",0))
"RTN","TIUELST",40,0)
 I '$D(TIUPRM0)!'$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIUELST",41,0)
 F TYPE=$S(TIUTYP=3:0,1:TIUTYP):1:$S(TIUTYP=3:2,1:TIUTYP) D
"RTN","TIUELST",42,0)
 . S TIUI=0 F  S TIUI=$O(^TIU(8925.4,"D",TYPE,TIUI)) Q:+TIUI'>0  D
"RTN","TIUELST",43,0)
 . . I +$G(^TIU(8925.4,+TIUI,0))'<EARLY,(+$G(^(0))'>LATE) D
"RTN","TIUELST",44,0)
 . . . I STATUS]"",(STATUS'=2),(STATUS'[$P($G(^TIU(8925.4,+TIUI,0)),U,6)) Q
"RTN","TIUELST",45,0)
 . . . N DIC,DIQ,DA,DR,TIUERR,EDT,RDT,DTYPE,EDESC,USER
"RTN","TIUELST",46,0)
 . . . S DIQ="TIUERR",DIC=8925.4,DIQ(0)="IE",DA=TIUI
"RTN","TIUELST",47,0)
 . . . S DR=".01:.08" D EN^DIQ1
"RTN","TIUELST",48,0)
 . . . S USER=$$NAME^TIULS(TIUERR(8925.4,DA,.02,"E"),"LAST, FIRST")
"RTN","TIUELST",49,0)
 . . . S EDT=$$DATE^TIULS(TIUERR(8925.4,DA,.01,"I"),"MM/DD/YY HR:MIN")
"RTN","TIUELST",50,0)
 . . . S RDT=$$DATE^TIULS(TIUERR(8925.4,DA,.07,"I"),"MM/DD/YY HR:MIN")
"RTN","TIUELST",51,0)
 . . . S DTYPE=TIUERR(8925.4,DA,.03,"E")
"RTN","TIUELST",52,0)
 . . . S ETYPE=TIUERR(8925.4,DA,.08,"E"),EDESC=TIUERR(8925.4,DA,.04,"E")
"RTN","TIUELST",53,0)
 . . . S TIUCNT=+$G(TIUCNT)+1
"RTN","TIUELST",54,0)
 . . . S TIUREC=$$SETFLD^VALM1(TIUCNT,"","NUMBER")
"RTN","TIUELST",55,0)
 . . . S TIUREC=$$SETFLD^VALM1(DTYPE,TIUREC,"DOCUMENT TYPE")
"RTN","TIUELST",56,0)
 . . . S TIUREC=$$SETFLD^VALM1(ETYPE,TIUREC,"EVENT TYPE")
"RTN","TIUELST",57,0)
 . . . S TIUREC=$$SETFLD^VALM1(EDT,TIUREC,"EVENT DATE/TIME")
"RTN","TIUELST",58,0)
 . . . S TIUREC=$$SETFLD^VALM1(RDT,TIUREC,"RESOL DATE/TIME")
"RTN","TIUELST",59,0)
 . . . S TIUREC=$$SETFLD^VALM1(USER,TIUREC,"USER NAME")
"RTN","TIUELST",60,0)
 . . . S VALMCNT=+$G(VALMCNT)+1
"RTN","TIUELST",61,0)
 . . . S ^TMP("TIUERR",$J,VALMCNT,0)=TIUREC
"RTN","TIUELST",62,0)
 . . . S ^TMP("TIUERR",$J,"IDX",VALMCNT,TIUCNT)=""
"RTN","TIUELST",63,0)
 . . . S ^TMP("TIUERR",$J,"PICK",TIUCNT,VALMCNT)=""
"RTN","TIUELST",64,0)
 . . . D FLDCTRL^VALM10(VALMCNT,"NUMBER",IOINHI,IOINORM)
"RTN","TIUELST",65,0)
 . . . S VALMCNT=+$G(VALMCNT)+1 W:VALMCNT#5'>0 "."
"RTN","TIUELST",66,0)
 . . . S ^TMP("TIUERR",$J,VALMCNT,0)=$$SETFLD^VALM1(EDESC,"","DESCRIPTION")
"RTN","TIUELST",67,0)
 . . . S ^TMP("TIUERR",$J,"IDX",VALMCNT,TIUCNT)=""
"RTN","TIUELST",68,0)
 . . . S ^TMP("TIUERR",$J,"PICK",TIUCNT,VALMCNT)=""
"RTN","TIUELST",69,0)
 . . . S ^TMP("TIUERRIDX",$J,TIUCNT)=VALMCNT_U_TIUI_U_$P(^TIU(8925.4,+TIUI,0),U,5)
"RTN","TIUELST",70,0)
 S ^TMP("TIUERR",$J,0)=+$G(TIUCNT)_U_$P(TIUTYP,U)_U_$P(STATUS,U)
"RTN","TIUELST",71,0)
 S ^TMP("TIUERR",$J,"#")=TIUPICK_"^1:"_+$G(TIUCNT)
"RTN","TIUELST",72,0)
 I $D(VALMHDR)>9 D HDR
"RTN","TIUELST",73,0)
 I +$G(TIUCNT)'>0 D
"RTN","TIUELST",74,0)
 . S ^TMP("TIUERR",$J,1,0)="",VALMCNT=2
"RTN","TIUELST",75,0)
 . S ^TMP("TIUERR",$J,2,0)="No "_$S(STATUS=0:"unresolved ",STATUS=1:"resolved ",1:"")_"errors found within date/time range"
"RTN","TIUELST",76,0)
 Q
"RTN","TIUELST",77,0)
HDR ; Initialize header for review screen
"RTN","TIUELST",78,0)
 N BY,TIUX,SCREEN,STATUS,TITLE
"RTN","TIUELST",79,0)
 S TIUX=$G(^TMP("TIUERR",$J,0)),STATUS=$P("UNRESOLVED^RESOLVED^ALL",U,+$P(TIUX,U,2)+1)
"RTN","TIUELST",80,0)
 S TITLE=STATUS_" FILING EVENTS"
"RTN","TIUELST",81,0)
 I +TIUEDT>1 S TITLE=TITLE_" from "_$$DATE^TIULS(TIUEDT,"MM/DD/YY")_" to "_$$DATE^TIULS(TIULDT,"MM/DD/YY")
"RTN","TIUELST",82,0)
 S VALMHDR(1)=$$CENTER^TIULS(TITLE)
"RTN","TIUELST",83,0)
 Q
"RTN","TIUELST",84,0)
CLEAN ; Clean up your mess!
"RTN","TIUELST",85,0)
 K ^TMP("TIUERR",$J),^TMP("TIUERRIDX",$J) D CLEAN^VALM10
"RTN","TIUELST",86,0)
 K VALMY
"RTN","TIUELST",87,0)
 Q
"RTN","TIUENV")
0^26^B4563050
"RTN","TIUENV",1,0)
TIUENV ; SLC/JER - Environment check routine ;2/17/95  11:14
"RTN","TIUENV",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUENV",3,0)
MAIN ; Controls branching
"RTN","TIUENV",4,0)
 W !,"** CHECKING DHCP ENVIRONMENT **",!!
"RTN","TIUENV",5,0)
 I +$G(DUZ)'>0!($G(DUZ(0))'="@") D  Q
"RTN","TIUENV",6,0)
 . S XPDQUIT=2
"RTN","TIUENV",7,0)
 . W !,"You must first initialize Programmer Environment by running ^XUP",!
"RTN","TIUENV",8,0)
 I $S('$D(^AUPNPAT):1,'$L($T(PXXDPT^PXXDPT)):1,1:0) D  Q
"RTN","TIUENV",9,0)
 . S XPDQUIT=2
"RTN","TIUENV",10,0)
 . W !,"You must first install the IHS Patient File.",!
"RTN","TIUENV",11,0)
 I $S('$D(^AUPNVSIT):1,'$L($T(VSIT^VSIT)):1,1:0) D  Q
"RTN","TIUENV",12,0)
 . S XPDQUIT=2
"RTN","TIUENV",13,0)
 . W !,"You must first install Visit Tracking.",!
"RTN","TIUENV",14,0)
 I $$VERSION^XPDUTL("VSIT")'="2.0" D  Q
"RTN","TIUENV",15,0)
 . S XPDQUIT=2
"RTN","TIUENV",16,0)
 . W !,"You must first install PCE v1.0 & Visit Tracking v2.0.",!
"RTN","TIUENV",17,0)
 ; Evaluate whether ASU v1.0 has been installed
"RTN","TIUENV",18,0)
 I $$VERSION^XPDUTL("USR")'="1.0" D  Q
"RTN","TIUENV",19,0)
 . S XPDQUIT=2
"RTN","TIUENV",20,0)
 . W !,"You must first install Authorization/Subscription Utilites (ASU) v1.0.",!
"RTN","TIUENV",21,0)
 ; Evaluate whether patch to ORU1 has been applied
"RTN","TIUENV",22,0)
 I $T(PATIENT^ORU1)'[",ORPGSUPP" D  Q
"RTN","TIUENV",23,0)
 . S XPDQUIT=2
"RTN","TIUENV",24,0)
 . W !,"You must first install patch OR*2.5*51.",!
"RTN","TIUENV",25,0)
 ; Evaluate whether patch to XQOR has been applied
"RTN","TIUENV",26,0)
 I +$$PATCH^XPDUTL("XU*8.0*56")'>0 D  Q
"RTN","TIUENV",27,0)
 . S XPDQUIT=2
"RTN","TIUENV",28,0)
 . W !,"You must first install patch XU*8.0*56.",!
"RTN","TIUENV",29,0)
 I +$G(^DD(409.61,0,"VR"))'<1,$L($T(^VALM1)) D  Q
"RTN","TIUENV",30,0)
 . W "Everything looks fine!",!
"RTN","TIUENV",31,0)
 W "You MUST first install the MAS v5.3 and VA ListManager v1.0 (VALM* w/INITS)...",!!
"RTN","TIUENV",32,0)
 W "Text Integration Utilities Initialization aborted.",!!
"RTN","TIUENV",33,0)
 S XPDQUIT=2
"RTN","TIUENV",34,0)
 Q
"RTN","TIUENV",35,0)
READ(TYPE,PROMPT,DEFAULT,HELP,SCREEN) ; Calls reader, returns response
"RTN","TIUENV",36,0)
 N DIR,X,Y
"RTN","TIUENV",37,0)
 S DIR(0)=TYPE
"RTN","TIUENV",38,0)
 I $D(SCREEN) S DIR("S")=SCREEN
"RTN","TIUENV",39,0)
 I $G(PROMPT)]"" S DIR("A")=PROMPT
"RTN","TIUENV",40,0)
 I $D(DEFAULT) S DIR("B")=DEFAULT
"RTN","TIUENV",41,0)
 I $D(HELP) S DIR("?")=HELP
"RTN","TIUENV",42,0)
 D ^DIR
"RTN","TIUENV",43,0)
 I $G(X)="@" S Y="@" G READX
"RTN","TIUENV",44,0)
 I Y]"",($L($G(Y),U)'=2) S Y=Y_U_$G(Y(0),Y)
"RTN","TIUENV",45,0)
READX Q Y
"RTN","TIUEPRNT")
0^27^B4361139
"RTN","TIUEPRNT",1,0)
TIUEPRNT ; SLC/JER - Handle print following entry/edit
"RTN","TIUEPRNT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUEPRNT",3,0)
PRINT(TIUDA) ; Prompt and print
"RTN","TIUEPRNT",4,0)
 N TIUDEV,TIUTYP,DFN,TIUPMTHD,TIUD0,TIUMSG,TIUPR,TIUDARR,TIUFLAG,TIUDPRM
"RTN","TIUEPRNT",5,0)
 N TIUPGRP,TIUPFHDR,TIUPFNBR
"RTN","TIUEPRNT",6,0)
 S TIUMSG="Print this note"
"RTN","TIUEPRNT",7,0)
 S TIUPR=$$READ^TIUU("Y",TIUMSG,"No")
"RTN","TIUEPRNT",8,0)
 I +TIUPR'>0 Q
"RTN","TIUEPRNT",9,0)
 I +$$ISADDNDM^TIULC1(TIUDA) S TIUDA=$P($G(^TIU(8925,+TIUDA,0)),U,6)
"RTN","TIUEPRNT",10,0)
 S TIUD0=$G(^TIU(8925,TIUDA,0))
"RTN","TIUEPRNT",11,0)
 S TIUTYP=$P(TIUD0,U),DFN=$P(TIUD0,U,2)
"RTN","TIUEPRNT",12,0)
 I +TIUTYP'>0 Q
"RTN","TIUEPRNT",13,0)
 S TIUPMTHD=$$PRNTMTHD^TIULG(+TIUTYP)
"RTN","TIUEPRNT",14,0)
 S TIUPGRP=$$PRNTGRP^TIULG(+TIUTYP)
"RTN","TIUEPRNT",15,0)
 S TIUPFHDR=$$PRNTHDR^TIULG(+TIUTYP)
"RTN","TIUEPRNT",16,0)
 S TIUPFNBR=$$PRNTNBR^TIULG(+TIUTYP)
"RTN","TIUEPRNT",17,0)
 D DOCPRM^TIULC1(+TIUTYP,.TIUDPRM,TIUDA)
"RTN","TIUEPRNT",18,0)
 I +$P($G(TIUDPRM(0)),U,9) S TIUFLAG=$$FLAG^TIUPRPN3
"RTN","TIUEPRNT",19,0)
 I $G(TIUPMTHD)]"",+$G(TIUPGRP),($G(TIUPFHDR)]""),($G(TIUPFNBR)]"") S TIUDARR(TIUPMTHD,$G(TIUPGRP)_"$"_TIUPFHDR_";"_DFN,1,TIUDA)=TIUPFNBR
"RTN","TIUEPRNT",20,0)
 E  S TIUDARR(TIUPMTHD,DFN,1,TIUDA)=""
"RTN","TIUEPRNT",21,0)
 I $G(TIUPMTHD)']"" W !,$C(7),"No Print Method Defined for ",$P($G(^TIU(8925.1,+TIUTYP,0)),U) H 2 G PRINT1X
"RTN","TIUEPRNT",22,0)
 S TIUDEV=$$DEVICE^TIUDEV(.IO) ; Get Device/allow queueing
"RTN","TIUEPRNT",23,0)
 I $G(IO)']"" D ^%ZISC Q
"RTN","TIUEPRNT",24,0)
 I $D(IO("Q")) D QUE^TIUDEV("PRINTQ^TIUEPRNT",TIUDEV) G PRINT1X
"RTN","TIUEPRNT",25,0)
 D PRINTQ,^%ZISC
"RTN","TIUEPRNT",26,0)
PRINT1X ; Exit single document print
"RTN","TIUEPRNT",27,0)
 Q
"RTN","TIUEPRNT",28,0)
PRINTQ ; Entry point for queued single document print
"RTN","TIUEPRNT",29,0)
 D PRNTDOC(TIUPMTHD,.TIUDARR)
"RTN","TIUEPRNT",30,0)
 Q
"RTN","TIUEPRNT",31,0)
PRNTDOC(TIUPMTHD,TIUDARR) ; Print a single document type
"RTN","TIUEPRNT",32,0)
 ; Receives TIUPMTHD & TIUDARR
"RTN","TIUEPRNT",33,0)
 N TIUDA
"RTN","TIUEPRNT",34,0)
 I '+$D(TIUDARR) W !,"No Documents selected." Q
"RTN","TIUEPRNT",35,0)
 M ^TMP("TIUPR",$J)=TIUDARR(TIUPMTHD)
"RTN","TIUEPRNT",36,0)
 I TIUPMTHD']"" D  G PRNTDOCX
"RTN","TIUEPRNT",37,0)
 . W !!,"No Print Method Defined for ",$P(TIUTYP,U,2) H 2
"RTN","TIUEPRNT",38,0)
 X TIUPMTHD
"RTN","TIUEPRNT",39,0)
PRNTDOCX ; Exit single document type print
"RTN","TIUEPRNT",40,0)
 K ^TMP("TIUPR",$J)
"RTN","TIUEPRNT",41,0)
 Q
"RTN","TIUFA")
0^28^B18106709
"RTN","TIUFA",1,0)
TIUFA ; SLC/MAM - LM Template A (DDEFs By Attribute) INIT ;10/26/95  15:33
"RTN","TIUFA",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFA",3,0)
 ;
"RTN","TIUFA",4,0)
EN ; -- main entry point for Options TIUFA SORT DDEFS CLIN/MGR/NATL
"RTN","TIUFA",5,0)
 ; Requires TIUFWHO, set in above options
"RTN","TIUFA",6,0)
 N TIUF,TIUFTMPL,TIUFATTR,TIUFAVAL,TIUFSTRT,TIUFVCN1,TIUFXNOD
"RTN","TIUFA",7,0)
 N TIUFREDO,X,XQORM,TIUFLFT
"RTN","TIUFA",8,0)
 S TIUFTMPL="A",TIUFREDO=0
"RTN","TIUFA",9,0)
 N TIUFPRIV D SETUP^TIUFL S:$D(DTOUT) VALMQUIT=1 G:$G(VALMQUIT) ENX
"RTN","TIUFA",10,0)
 S TIUFXNOD="^^Sort^"
"RTN","TIUFA",11,0)
 S X=^TMP("TIUF",$J,"SORT")_";ORD(101," D EN^XQOR
"RTN","TIUFA",12,0)
 G:$D(DTOUT)!'$D(TIUFSTRT) ENX
"RTN","TIUFA",13,0)
 I TIUFWHO="C" D EN^VALM("TIUFA SORT DDEFS CLIN")
"RTN","TIUFA",14,0)
 I "MN"[TIUFWHO D EN^VALM("TIUFA SORT DDEFS MGR")
"RTN","TIUFA",15,0)
ENX Q
"RTN","TIUFA",16,0)
 ;
"RTN","TIUFA",17,0)
HDR ; -- header code
"RTN","TIUFA",18,0)
 ; Requires Attribute TIUFATTR as set in protocols TIUF SORT BY (ALL,
"RTN","TIUFA",19,0)
 ;TYPE, OWNER, STATUS, WAY USED, PARENTAGE):
"RTN","TIUFA",20,0)
 ;  TIUFATTR = A^ALL, T^TYPE, O^OWNER, S^STATUS, U^WAY USED, P^PARENTAGE;
"RTN","TIUFA",21,0)
 ; Requires Attribute Value TIUFAVAL as set in TIUF SORT BY ALL;
"RTN","TIUFA",22,0)
 ;TIUF TYPE /CLASS,DOCUMENT CLASS,MULTIAUTHOR DC,DOCUMENT,COMPONENT,NONE;
"RTN","TIUFA",23,0)
 ;TIUF OWNER /CLASS,INDIVIDUAL,PERSONAL,NONE; TIUF STATUS /INACTIVE,
"RTN","TIUFA",24,0)
 ;TEST,ACTIVE,NONE; TIUF USED BY DOCMTS/YES,NO,NA,UNKNOWN; TIUF PARENTAGE/ORPHAN,NONORPHAN.
"RTN","TIUFA",25,0)
 ; e.g. TIUFAVAL =
"RTN","TIUFA",26,0)
 ;      ALL^ALL if attribute is ALL;
"RTN","TIUFA",27,0)
 ;      CL^CLASS if attribute is Type and Type is Class;
"RTN","TIUFA",28,0)
 ;      NONE^NONE if attr is Type and attr value is NONE.
"RTN","TIUFA",29,0)
 ;      546^PROVIDER^C if attr is Owner, Kind of Owner is Class Owner,
"RTN","TIUFA",30,0)
 ;        and Class Owner is Provider Class (IFN 546).
"RTN","TIUFA",31,0)
 ;      0^NONE if attr is Owner, attr value is NONE.
"RTN","TIUFA",32,0)
 ;      13^INACTIVE if attr is Status and Status is Inactive (IFN 13).
"RTN","TIUFA",33,0)
 ;      0^NONE if attr is Owner and Owner is NONE.
"RTN","TIUFA",34,0)
 ;      YES if attr is Way Used and Way Used is YES:
"RTN","TIUFA",35,0)
 ;        YES/NO/NA
"RTN","TIUFA",36,0)
 ;      O^ORPHAN if attr is ORPHAN and attr value is Orphan.
"RTN","TIUFA",37,0)
 ;      N^NONORPHAN if attr  is ORPHAN and attr value is Nonorphan.
"RTN","TIUFA",38,0)
 ; Requires TIUFSTRT = e.g. " ^ZZZZZZZZ" as set in SELSTART^TIUFLA.
"RTN","TIUFA",39,0)
 N ATTR1,HDR2,MODE,OWN,FROM,TO,HDR3,VHDR1,VHDR2
"RTN","TIUFA",40,0)
 S ATTR1=$P(TIUFATTR,U)
"RTN","TIUFA",41,0)
 I ATTR1="T" S HDR2=$S($P(TIUFAVAL,U)'="NONE":" of Type "_$P(TIUFAVAL,U,2),1:" with NO Type")
"RTN","TIUFA",42,0)
 I ATTR1="O" S MODE=$P(TIUFAVAL,U,3),OWN=$P(TIUFAVAL,U,2) D
"RTN","TIUFA",43,0)
 . S HDR2=$S(MODE="P":" Personally Owned by "_OWN,MODE="C":" Owned by Class "_OWN,MODE="I":" Owned by Individual "_OWN,1:" with No Owner")
"RTN","TIUFA",44,0)
 I ATTR1="S" S HDR2=$S($P(TIUFAVAL,U)'="N":" of Status "_$P(TIUFAVAL,U,2),1:" with NO Status")
"RTN","TIUFA",45,0)
 S FROM=$S($P(TIUFSTRT,U)=" ":"FIRST",1:$P(TIUFSTRT,U))
"RTN","TIUFA",46,0)
 S TO=$S($P(TIUFSTRT,U)=" ":"LAST",$P(TIUFSTRT,U,2)="ZZZZZZZZ":"LAST",1:$P(TIUFSTRT,U,2))
"RTN","TIUFA",47,0)
 S HDR3=$S(TIUFSTRT'=" ^ZZZZZZZZ":" from "_FROM_" to "_TO,1:"")
"RTN","TIUFA",48,0)
 I ATTR1="U" S MODE=TIUFAVAL D
"RTN","TIUFA",49,0)
 . S HDR2=$S(MODE="YES":" In Use",1:" NOT In Use")
"RTN","TIUFA",50,0)
 . I HDR3'="" S HDR2=HDR2_","
"RTN","TIUFA",51,0)
 I ATTR1="P" S HDR2=$S($P(TIUFAVAL,U)="O":" which are ORPHANS",1:" which are NOT ORPHANS")
"RTN","TIUFA",52,0)
 I "TOSUP"[ATTR1 S VALMHDR(1)=$$CENTER^TIUFL("Entries"_HDR2_HDR3,79)
"RTN","TIUFA",53,0)
 I ATTR1="A" S VALMHDR(1)=$$CENTER^TIUFL("ALL Entries"_$S(HDR3'="":", "_HDR3,1:""),79)
"RTN","TIUFA",54,0)
HDRX ;
"RTN","TIUFA",55,0)
 Q
"RTN","TIUFA",56,0)
 ;
"RTN","TIUFA",57,0)
INIT ; -- init variables and list array. Called by Templates A and J AND by Subtemplates.
"RTN","TIUFA",58,0)
 ; Requires TIUFATTR, TIUFAVAL, TIUFSTRT.  See HDR^TIUFA
"RTN","TIUFA",59,0)
 K ^TMP("TIUF1",$J),^TMP("TIUF1IDX",$J),^TMP("TIUFB",$J),^TMP("TIUFBIDX",$J)
"RTN","TIUFA",60,0)
 I '$D(TIUFSTMP) D CLEAN^VALM10 ; Clean IF called from active Template.
"RTN","TIUFA",61,0)
 N LINENO,STRTNM,ENDNM,FILEDA,NAME,PASTEND
"RTN","TIUFA",62,0)
 I '$D(TIUFSTMP) S VALM("TITLE")=$S(TIUFTMPL="J":"Objects",$P(TIUFATTR,U)'="A":"Sort by "_$S($P(TIUFATTR,U,2)="WAY USED":"IN USE Value",1:$P(TIUFATTR,U,2)),1:"ALL Document Definitions")
"RTN","TIUFA",63,0)
 S (TIUFVCN1,LINENO)=0,STRTNM=$P(TIUFSTRT,U),ENDNM=$P(TIUFSTRT,U,2)
"RTN","TIUFA",64,0)
 I $O(^TIU(8925.1,"B",STRTNM,"")) D
"RTN","TIUFA",65,0)
 . S FILEDA=""
"RTN","TIUFA",66,0)
 . F  S FILEDA=$O(^TIU(8925.1,"B",STRTNM,FILEDA)) Q:'FILEDA  D INIT1
"RTN","TIUFA",67,0)
 G:$D(DTOUT) INITX
"RTN","TIUFA",68,0)
 S NAME=STRTNM
"RTN","TIUFA",69,0)
 F  S NAME=$O(^TIU(8925.1,"B",NAME)) Q:NAME=""  D  Q:$G(PASTEND)  G:$D(DTOUT) INITX
"RTN","TIUFA",70,0)
 . I NAME]ENDNM S PASTEND=1 Q
"RTN","TIUFA",71,0)
 . S FILEDA=""
"RTN","TIUFA",72,0)
 . F  S FILEDA=$O(^TIU(8925.1,"B",NAME,FILEDA)) Q:'FILEDA  D INIT1
"RTN","TIUFA",73,0)
 . Q
"RTN","TIUFA",74,0)
 I LINENO D UPDATE^TIUFLLM1("A",LINENO,0) S TIUFVCN1=TIUFVCN1+LINENO
"RTN","TIUFA",75,0)
INITX ;
"RTN","TIUFA",76,0)
 S:$D(DTOUT) VALMQUIT=1
"RTN","TIUFA",77,0)
 S:'$D(TIUFSTMP) VALMCNT=TIUFVCN1
"RTN","TIUFA",78,0)
 Q
"RTN","TIUFA",79,0)
 ;
"RTN","TIUFA",80,0)
INIT1 ; Puts FILEDA in Buffer array.
"RTN","TIUFA",81,0)
 N NODE0,INFO
"RTN","TIUFA",82,0)
 Q:'$D(^TIU(8925.1,FILEDA,0))
"RTN","TIUFA",83,0)
 Q:'$$MATCH^TIUFLA(FILEDA)
"RTN","TIUFA",84,0)
 S LINENO=LINENO+1 ; Needed for NINFO.
"RTN","TIUFA",85,0)
 D NINFO^TIUFLLM(LINENO,FILEDA,.INFO),PARSE^TIUFLLM(.INFO),NODE0ARR^TIUFLF(FILEDA,.NODE0) Q:$D(DTOUT) 
"RTN","TIUFA",86,0)
 I NODE0="" W !!," Entry "_FILEDA_" in 'B' Cross Reference does not exist in the file; See IRM",! D PAUSE^TIUFXHLX S LINENO=LINENO-1 Q
"RTN","TIUFA",87,0)
 D BUFENTRY^TIUFLLM2(.INFO,.NODE0,TIUFTMPL) W "."
"RTN","TIUFA",88,0)
 Q
"RTN","TIUFA",89,0)
 ;
"RTN","TIUFA",90,0)
EXIT ; -- exit code
"RTN","TIUFA",91,0)
 K ^TMP("TIUF1",$J),^TMP("TIUFB",$J),^TMP("TIUF1IDX",$J),^TMP("TIUFBIDX",$J),^TMP("TIUF",$J),IOELALL
"RTN","TIUFA",92,0)
 D CLEAN^VALM10
"RTN","TIUFA",93,0)
 Q
"RTN","TIUFA",94,0)
 ;
"RTN","TIUFA1")
0^29^B12919954
"RTN","TIUFA1",1,0)
TIUFA1 ; SLC/MAM - LM Template A (DDEFs by Attribute) Actions Add Entry, Change View ;4/23/97  20:55
"RTN","TIUFA1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFA1",3,0)
 ;
"RTN","TIUFA1",4,0)
ADD ; LM Template A action Add Entry, LM Template J action Create
"RTN","TIUFA1",5,0)
 ;Requires TIUFATTR, TIUFAVAL, TIUFSTRT.  See HDR^TIUFA
"RTN","TIUFA1",6,0)
 N DIC,DLAYGO,X,Y,FILEDA,NODE0,OPTFLDS,NEWSTAT,MSG1,MSG,TIUI,DA
"RTN","TIUFA1",7,0)
 N DIK,TENDA,CNTCHNG,LINENO,FIELDS,DTOUT,DIRUT,DIROUT
"RTN","TIUFA1",8,0)
 N TIUFY,TIUFNOD,TIUFFULL,TIUFXNOD,TIUFTMSG,TIUFTLST,NAME
"RTN","TIUFA1",9,0)
 S TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFA1",10,0)
 S VALMBCK=""
"RTN","TIUFA1",11,0)
SELECT S NAME=$$SELNAME^TIUFLF2() G:$D(DIRUT) ADDX
"RTN","TIUFA1",12,0)
 D TYPELIST^TIUFLF7(NAME,0,0,.TIUFTMSG,.TIUFTLST) G:$D(DTOUT) ADDX
"RTN","TIUFA1",13,0)
 I TIUFTMPL="J",TIUFTLST'["^O^" W !!,"Please enter a different Name; file already has Object with the same name.",! D PAUSE^TIUFXHLX G SELECT
"RTN","TIUFA1",14,0)
 I TIUFTMPL'="J",TIUFTLST="" W !!,"Please enter a different Name; file already has entry of every type with the",!,"same name.",! D PAUSE^TIUFXHLX G SELECT
"RTN","TIUFA1",15,0)
 S (DIC,DLAYGO)=8925.1,DIC(0)="L",X=""""_NAME_"""" D ^DIC
"RTN","TIUFA1",16,0)
 I Y=-1 W !,"?? ",$S($G(TIUFXNOD)["Create":"Object Name must be different from all other object Names, Abbreviations, and Print Names.",1:"Couldn't Add Entry; See IRM"),! D PAUSE^TIUFXHLX G ADDX
"RTN","TIUFA1",17,0)
 S FILEDA=+Y
"RTN","TIUFA1",18,0)
 L +^TIU(8925.1,FILEDA):1 I '$T S MSG=" Another user has accessed this entry; please finish editing later" G ADDX
"RTN","TIUFA1",19,0)
 D STUFFLDS^TIUFLF4(FILEDA)
"RTN","TIUFA1",20,0)
 S FIELDS=";.04;.05;.06;.07;"
"RTN","TIUFA1",21,0)
 I TIUFTMPL="J" S FIELDS=";.05;.06;"
"RTN","TIUFA1",22,0)
 I TIUFWHO="N" S FIELDS=FIELDS_".13;"
"RTN","TIUFA1",23,0)
 D ASKFLDS^TIUFLF1(FILEDA,FIELDS,0,.NEWSTAT)
"RTN","TIUFA1",24,0)
 K TIUFCK,TIUFDCK D CHECK^TIUFLF3(FILEDA) ;No parent
"RTN","TIUFA1",25,0)
 ; Entry is new orphan; don't worry about descendants, orphan, multiple parents.
"RTN","TIUFA1",26,0)
 K MSG
"RTN","TIUFA1",27,0)
 F TIUI="T","S","A","B" D  G:$D(MSG) ADDX
"RTN","TIUFA1",28,0)
 . I $D(TIUFCK(TIUI)) S MSG1=TIUFCK(TIUI),MSG="Entry deleted: ",DA=FILEDA,DIK="^TIU(8925.1," D ^DIK
"RTN","TIUFA1",29,0)
 K TIUFCK,TIUFDCK
"RTN","TIUFA1",30,0)
 G:$D(DTOUT) ADDX
"RTN","TIUFA1",31,0)
 D OWNCHEC^TIUFLF8(FILEDA)
"RTN","TIUFA1",32,0)
 S NODE0=$G(^TIU(8925.1,FILEDA,0))
"RTN","TIUFA1",33,0)
 D AUPDATE^TIUFLA1(NODE0,FILEDA,.CNTCHNG,.LINENO) S:CNTCHNG VALMCNT=VALMCNT+1
"RTN","TIUFA1",34,0)
 I 'CNTCHNG S MSG=" Entry added; Not in current View"
"RTN","TIUFA1",35,0)
 I CNTCHNG S MSG=" Entry added" I LINENO<VALMBG!(LINENO>(VALMBG+VALM("LINES")-1)) S VALMBG=LINENO
"RTN","TIUFA1",36,0)
 S VALMBCK="R"
"RTN","TIUFA1",37,0)
ADDX ;
"RTN","TIUFA1",38,0)
 I $D(MSG) W !!,MSG,! W:$D(MSG1) MSG1,! H 2 H:$D(MSG1) 2
"RTN","TIUFA1",39,0)
 K TIUFCK,TIUFDCK
"RTN","TIUFA1",40,0)
 L -^TIU(8925.1,+$G(FILEDA))
"RTN","TIUFA1",41,0)
 I $D(DTOUT) S VALMBCK="Q" Q
"RTN","TIUFA1",42,0)
 I $G(TIUFFULL) S VALMBCK="R" D RESET^TIUFXHLX
"RTN","TIUFA1",43,0)
 Q
"RTN","TIUFA1",44,0)
 ;
"RTN","TIUFA1",45,0)
CHANGE ; Template A action Change View
"RTN","TIUFA1",46,0)
 N TIUFTMPA,TIUFTMPV,TIUFTMPS,TIUFXNOD,TIUFFULL,DTOUT,DIRUT,DIROUT
"RTN","TIUFA1",47,0)
 S VALMBCK="R",TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFA1",48,0)
 S TIUFTMPA=TIUFATTR,TIUFTMPV=TIUFAVAL,TIUFTMPS=TIUFSTRT
"RTN","TIUFA1",49,0)
 K TIUFATTR,TIUFAVAL,TIUFSTRT
"RTN","TIUFA1",50,0)
 ; Sets TIUFATTR,TIUFAVAL,TIUFSTRT if no ^:
"RTN","TIUFA1",51,0)
 I TIUFTMPL="A" S X=^TMP("TIUF",$J,"SORTCM")_";ORD(101," D EN^XQOR I '$D(TIUFSTRT) S TIUFATTR=TIUFTMPA,TIUFAVAL=TIUFTMPV,TIUFSTRT=TIUFTMPS,VALMBCK="" G CHANX
"RTN","TIUFA1",52,0)
 I TIUFTMPL="J" D SELSTART^TIUFLA S TIUFATTR=TIUFTMPA,TIUFAVAL=TIUFTMPV I '$D(TIUFSTRT) S TIUFSTRT=TIUFTMPS,VALMBCK="" G CHANX
"RTN","TIUFA1",53,0)
 D INIT^TIUFA
"RTN","TIUFA1",54,0)
 K VALMHDR S VALMBG=1
"RTN","TIUFA1",55,0)
CHANX ;
"RTN","TIUFA1",56,0)
 I $D(DTOUT) S VALMBCK="Q" Q
"RTN","TIUFA1",57,0)
 I $G(TIUFFULL) S VALMBCK="R" D RESET^TIUFXHLX
"RTN","TIUFA1",58,0)
 Q
"RTN","TIUFA1",59,0)
 ;
"RTN","TIUFC")
0^30^B34524861
"RTN","TIUFC",1,0)
TIUFC ; SLC/MAM - LM Template C (Create DDEF) INIT, Action NEXT LEVEL ;4/28/97  21:46
"RTN","TIUFC",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFC",3,0)
EN ; -- main entry point for LM Template TIUFC CREATE DDEF
"RTN","TIUFC",4,0)
 ; Requires TIUFWHO, set in options TIUFC CREATE DDEFS MGR/NATL
"RTN","TIUFC",5,0)
 ; TIUFCBEG is used to set message bar msgs:
"RTN","TIUFC",6,0)
 ; TIUFCBEG = 1 if done EN, no more, not even Start Over.
"RTN","TIUFC",7,0)
 ;            0 if Selected any action
"RTN","TIUFC",8,0)
 ; C in TIUFCDA,TIUFDITM,TIUFCNM,TIUFCTYP,TIUFCTDA,TIUFCLPS stands for 
"RTN","TIUFC",9,0)
 ;Current Position, the highlighted line.
"RTN","TIUFC",10,0)
 N TIUF,TIUFCMSG,CREATEDA,CREATENM,TIUFCONE,TIUFCBEG,TIUFCDA,TIUFCITM,TIUFCNM,TIUFTMPL,TIUFCTYP,TIUFCTDA,TIUFCLPS,TIUFVCN1,XQORM,TIUFXNOD,TIUFLFT
"RTN","TIUFC",11,0)
 S TIUFTMPL="C",TIUFCLPS=0
"RTN","TIUFC",12,0)
 N TIUFPRIV D SETUP^TIUFL S:$D(DTOUT) VALMQUIT=1 G:$G(VALMQUIT) ENX
"RTN","TIUFC",13,0)
 S TIUFCBEG=1
"RTN","TIUFC",14,0)
 I "NM"[TIUFWHO D EN^VALM("TIUFC CREATE DDEFS MGR")
"RTN","TIUFC",15,0)
ENX Q
"RTN","TIUFC",16,0)
 ;
"RTN","TIUFC",17,0)
HDR ; -- header code
"RTN","TIUFC",18,0)
 S VALMHDR(1)=$$CENTER^TIUFL("BASICS",79)
"RTN","TIUFC",19,0)
 Q
"RTN","TIUFC",20,0)
 ;
"RTN","TIUFC",21,0)
HEADER ; Header field of Protocol TIUFC ACTION MENU.
"RTN","TIUFC",22,0)
 N DEFAULT
"RTN","TIUFC",23,0)
 I $G(TIUFCONE) S TIUFCBEG=0 ;used in $$vmsg
"RTN","TIUFC",24,0)
 I '$G(TIUFCONE) S TIUFCONE=1
"RTN","TIUFC",25,0)
 S VALMSG=$$VMSG^TIUFL
"RTN","TIUFC",26,0)
 D SHOW^VALM
"RTN","TIUFC",27,0)
 S TIUFCITM=$$HASITEMS^TIUFLF1(TIUFCDA) ;Update since items could have been deleted
"RTN","TIUFC",28,0)
 S DEFAULT=$S($G(TIUFCTYP)="CL"&'$G(TIUFCITM):"Class/DocumentClass",$G(TIUFCTYP)="CL":"Next Level",$G(TIUFCTYP)="DC":"Title",$G(TIUFCTYP)="TL":"Component",$G(TIUFCTYP)='"CO":"Next Level",1:"")
"RTN","TIUFC",29,0)
 S XQORM("B")=$S(VALMCNT'>(VALMBG+VALM("LINES")-1):DEFAULT,1:"Next Screen")
"RTN","TIUFC",30,0)
 Q
"RTN","TIUFC",31,0)
 ;
"RTN","TIUFC",32,0)
INIT ; -- init variables and list array
"RTN","TIUFC",33,0)
 D INIT^TIUFH I $D(DTOUT) G INITX
"RTN","TIUFC",34,0)
 S TIUFCDA=^TMP("TIUF",$J,"CLINDOC") ;IFN of Current Position in Hier
"RTN","TIUFC",35,0)
 S TIUFCNM="CLINICAL DOCUMENTS",TIUFCITM=$$HASITEMS^TIUFLF1(TIUFCDA),TIUFCTYP="CL"
"RTN","TIUFC",36,0)
 K TIUFCMSG
"RTN","TIUFC",37,0)
 S VALMBG=1
"RTN","TIUFC",38,0)
 S TIUFCMSG(1)=" To create a new CLINICAL DOCUMENTS, Select Class/DocumentClass; or to Go Down a"
"RTN","TIUFC",39,0)
 I VALMCNT'>VALM("LINES") S TIUFCMSG(2)="Level, Select NEXT LEVEL." G INITX
"RTN","TIUFC",40,0)
 I VALMCNT>VALM("LINES") S TIUFCMSG(2)="Level, Screen to (+/-) Desired CLINICAL DOCUMENTS Item, and Select NEXT LEVEL."
"RTN","TIUFC",41,0)
INITX I $D(DTOUT) S VALMQUIT=1
"RTN","TIUFC",42,0)
 Q
"RTN","TIUFC",43,0)
 ;
"RTN","TIUFC",44,0)
NEXT ; TEMPLATE C Action Next Level: Navigate hierarchy.
"RTN","TIUFC",45,0)
 ; Called by Protocol TIUFC ACTION NEXT LEVEL
"RTN","TIUFC",46,0)
 ; Requires TIUFI,TIUFCNM,TIUFCDA,TIUFCITM
"RTN","TIUFC",47,0)
 N LINENO,INFO,BEG,END,XPDLCNT,DIR,X,Y,NODE0,LINENO,IINFO,NMWIDTH,TIUFY
"RTN","TIUFC",48,0)
 N MISSITEM,TIUFXNOD,XFLG,IFILEDA,DTOUT,DIRUT,DIROUT,ILINE
"RTN","TIUFC",49,0)
 S VALMBCK="",TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFC",50,0)
 S LINENO=$O(^TMP("TIUF1IDX",$J,"DAF",TIUFCDA,""))
"RTN","TIUFC",51,0)
 S INFO=^TMP("TIUF1IDX",$J,LINENO),XPDLCNT=$P(INFO,U,3)
"RTN","TIUFC",52,0)
 S BEG=(LINENO+1),END=LINENO+XPDLCNT
"RTN","TIUFC",53,0)
 I TIUFCTYP="TL" W !!," You are already at the bottom Level.  To create Components, enter Component,",!,"or to create Subcomponents, select Detailed Display for the Component, then",!,"edit Items of Component.",! D PAUSE^TIUFXHLX G NEXTX
"RTN","TIUFC",54,0)
 I 'TIUFCITM W !!," No Items: You must Create Items at this level before going down a level.",! D PAUSE^TIUFXHLX G NEXTX
"RTN","TIUFC",55,0)
 S TIUFY=+$P($P(TIUFXNOD,U,4),"=",2) I TIUFY'<BEG,TIUFY'>END,$D(^TMP("TIUF1IDX",$J,TIUFY)) G POSTSEL
"RTN","TIUFC",56,0)
 K TIUFY
"RTN","TIUFC",57,0)
 S DIR(0)="NA^"_BEG_":"_END_":0"
"RTN","TIUFC",58,0)
 S DIR("?",1)=" Your Current Position in the Hierarchy is "_TIUFCNM_"."
"RTN","TIUFC",59,0)
 S DIR("?",2)="You have chosen to go down another level.  This means you must select an Item"
"RTN","TIUFC",60,0)
 S DIR("?")="of "_TIUFCNM_", Line "_BEG_"-"_END_"."
"RTN","TIUFC",61,0)
 I TIUFCITM S DIR("A")=" Select "_TIUFCNM_" Item (Line "_BEG_"-"_END_"): " D ^DIR S TIUFY=Y K DIR,X,Y I 'TIUFY G NEXTX
"RTN","TIUFC",62,0)
POSTSEL S VALMBCK="R"
"RTN","TIUFC",63,0)
 S IINFO=^TMP("TIUF1IDX",$J,TIUFY),TIUFCDA=$P(IINFO,U,2),TIUFCTDA=$P(IINFO,U,6)
"RTN","TIUFC",64,0)
 S ILINE=^TMP("TIUF1",$J,TIUFY,0)
"RTN","TIUFC",65,0)
 S NODE0=^TIU(8925.1,TIUFCDA,0),TIUFCTYP=$P(NODE0,U,4) S:TIUFCTYP="DOC" TIUFCTYP="TL"
"RTN","TIUFC",66,0)
 I TIUFCTYP="" W !!," Entry has no Type.  Can't select entry",! D PAUSE^TIUFXHLX G NEXTX
"RTN","TIUFC",67,0)
 S TIUFCNM=$P(NODE0,U) I $L(TIUFCNM)>30 S TIUFCNM=$E(TIUFCNM,1,30)
"RTN","TIUFC",68,0)
 K TIUFCMSG
"RTN","TIUFC",69,0)
 D PARSE^TIUFLLM(.INFO)
"RTN","TIUFC",70,0)
 S VALMCNT=VALMCNT-XPDLCNT D COLLAPSE^TIUFH1(.INFO) S TIUFCLPS=1
"RTN","TIUFC",71,0)
 ; Has already been expanded; so items exist in file:
"RTN","TIUFC",72,0)
 S LINENO=+INFO+1
"RTN","TIUFC",73,0)
 D CEXPAND1 S VALMCNT=VALMCNT+1,TIUFCLPS=0
"RTN","TIUFC",74,0)
 D CNTRL^VALM10(LINENO-1,8,^TMP("TIUF",$J,"NMWIDTH"),IOINORM,IOINORM)
"RTN","TIUFC",75,0)
 D CNTRL^VALM10(LINENO,8,^TMP("TIUF",$J,"NMWIDTH"),IOINHI,IOINORM)
"RTN","TIUFC",76,0)
 D PARSE^TIUFLLM(.IINFO)
"RTN","TIUFC",77,0)
 S IFILEDA=$P(IINFO,U,2),MISSITEM=$$MISSITEM^TIUFLF4(IFILEDA)
"RTN","TIUFC",78,0)
 I MISSITEM W !!," Corrupt Database: File Entry "_IFILEDA_" Has Nonexistent Item "_MISSITEM_" ; See IRM",! D PAUSE^TIUFXHLX S VALMBCK="" G NEXTX
"RTN","TIUFC",79,0)
 D EXPAND1^TIUFH1(.IINFO)
"RTN","TIUFC",80,0)
 S VALMCNT=VALMCNT+IINFO("XPDLCNT")
"RTN","TIUFC",81,0)
 S VALMBG=+INFO
"RTN","TIUFC",82,0)
 S TIUFCITM=$S($P(IINFO,U,3):1,1:0)
"RTN","TIUFC",83,0)
 I TIUFCTYP="TL" S TIUFCMSG(1)=" You have reached the bottom of the tree.  Select COMPONENT to create a",TIUFCMSG(2)="Component of "_TIUFCNM_".  (SubComponents are created using Detailed Display",TIUFCMSG(3)="and then Item.)" G NEXTX
"RTN","TIUFC",84,0)
 S TIUFCMSG(1)=" Select "_$S(TIUFCTYP="DC":"TITLE",1:"CLASS/DOCUMENTCLASS")_" to create a new "_TIUFCNM
"RTN","TIUFC",85,0)
 S TIUFCMSG(2)="or to Go Down a Level, Select NEXT LEVEL."
"RTN","TIUFC",86,0)
 I VALMCNT>VALM("LINES") S TIUFCMSG(2)="or to Go Down a Level, Screen to (+/-) Desired ",TIUFCMSG(3)=TIUFCNM_" Item, and Select NEXT LEVEL."
"RTN","TIUFC",87,0)
NEXTX I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFC",88,0)
 Q
"RTN","TIUFC",89,0)
 ;
"RTN","TIUFC",90,0)
CEXPAND1 ; Set selected Next Level item of current branch into LM array (i.e. expands current branch to include next level. DOESN'T Update INFO.
"RTN","TIUFC",91,0)
 S $P(ILINE," ")=LINENO_$S($L(LINENO)<$L(+IINFO):" ",1:"")
"RTN","TIUFC",92,0)
 S ^TMP("TIUF1",$J,LINENO,0)=ILINE
"RTN","TIUFC",93,0)
 S $P(IINFO,U)=LINENO,^TMP("TIUF1IDX",$J,LINENO)=IINFO
"RTN","TIUFC",94,0)
 S ^TMP("TIUF1",$J,"IDX",LINENO,LINENO)=""
"RTN","TIUFC",95,0)
 S ^TMP("TIUF1IDX",$J,"DAF",TIUFCDA,LINENO)=""
"RTN","TIUFC",96,0)
 S $P(^TMP("TIUF1IDX",$J,+INFO),U,3)=1
"RTN","TIUFC",97,0)
 Q
"RTN","TIUFC",98,0)
 ;
"RTN","TIUFC",99,0)
EXIT ; -- exit code
"RTN","TIUFC",100,0)
 K ^TMP("TIUF1",$J),^TMP("TIUFB",$J),^TMP("TIUF1IDX",$J),^TMP("TIUFBIDX",$J),^TMP("TIUF",$J),IOELALL
"RTN","TIUFC",101,0)
 D CLEAN^VALM10
"RTN","TIUFC",102,0)
 Q
"RTN","TIUFC",103,0)
 ;
"RTN","TIUFC1")
0^203^B33248572
"RTN","TIUFC1",1,0)
TIUFC1 ; SLC/MAM - LM Template C (Create DDEF) Action Create ;4/21/97  21:46
"RTN","TIUFC1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFC1",3,0)
 ;
"RTN","TIUFC1",4,0)
CREATE ; TEMPLATE C Action Create.
"RTN","TIUFC1",5,0)
 ; C in CNODE0, CSTATUS stands for Current position
"RTN","TIUFC1",6,0)
 N DIC,DIE,DR,DLAYGO,X,Y,CREATE0,DA,DIK,PFILEDA,TENDA,MSG,PLINENO,PINFO,CREATE,FIELDS,NEWSTAT,NAME,TIUFXNOD,SHARED,NEWYES,SHARYES,CNODE0,LINENO
"RTN","TIUFC1",7,0)
 N DIR,X,Y,DA,NAME,TIUFFULL,CSTATUS,TIUFTMSG,TIUFTLST,TIUFIMSG,SEQUENCE
"RTN","TIUFC1",8,0)
 N DUOUT,DTOUT,DIRUT,DIROUT,XFLG
"RTN","TIUFC1",9,0)
 S CREATE=0,TIUFXNOD=$G(XQORNOD(0)),VALMBCK="",CNODE0=^TIU(8925.1,TIUFCDA,0)
"RTN","TIUFC1",10,0)
 I $P(CNODE0,U,13),TIUFWHO'="N",$P(CNODE0,U,4)="DOC"!($P(CNODE0,U,4)="CO") W !!," Parent is National, of Type TL or CO; Can't add or delete Items" D PAUSE^TIUFXHLX G CREAX
"RTN","TIUFC1",11,0)
ANOTHER L -^TIU(8925.1,+$G(CREATEDA)) L -^TIU(8925.1,+$G(TIUFCDA),10,+$G(TENDA))
"RTN","TIUFC1",12,0)
 I TIUFCTYP="TL" S CSTATUS=$$STATWORD^TIUFLF5($P(CNODE0,U,7)) I CSTATUS'="INACTIVE" W !!,"Cannot create a Component unless the parent Title is Inactive.",! D PAUSE^TIUFXHLX G CREAX
"RTN","TIUFC1",13,0)
 N DIR S DIR(0)="FAO^3:60^S X=$$UPPER^TIULS(X) K:'(X'?1P.E) X",(DIR("?"),DIR("??"))="^D NAME^TIUFXHLX"
"RTN","TIUFC1",14,0)
 S:'CREATE DIR("A")=$S(TIUFCTYP="TL":" Enter a new Component of ",1:" Enter the Name of a new ")_TIUFCNM_": "
"RTN","TIUFC1",15,0)
 S:CREATE DIR("A")=" If you wish, you may enter another "_$S(TIUFCTYP="TL":"Component of ",1:"")_TIUFCNM_": "
"RTN","TIUFC1",16,0)
 D ^DIR I Y=""!$D(DUOUT) G CREAX
"RTN","TIUFC1",17,0)
 S NAME=Y,NAME=$$UPPER^TIULS(NAME),(SHARED,NEWYES,SHARYES)=""
"RTN","TIUFC1",18,0)
 I TIUFCTYP="TL" K DIRUT D  Q:$D(DIRUT)  G ADD:SHARYES,ANOTHER:NEWYES=0,ANOTHER:SHARYES=0
"RTN","TIUFC1",19,0)
 . S DIC=8925.1,DIC(0)="Z"
"RTN","TIUFC1",20,0)
 . S DIC("S")="I ($P(^(0),U,4)=""CO"")&($P(^(0),U,10))"
"RTN","TIUFC1",21,0)
 . D ^DIC
"RTN","TIUFC1",22,0)
 . I Y=-1 S DIR("A",1)=" Are you adding '"_NAME_"' as",DIR("A")="a new TIU DOCUMENT DEFINITION?",DIR(0)="Y",DIR("B")="YES" D ^DIR S NEWYES=Y Q
"RTN","TIUFC1",23,0)
 . I Y>0 W $E($P(Y,U,2),$L(NAME)+1,60) D  Q:'SHARYES
"RTN","TIUFC1",24,0)
 . . S CREATEDA=+Y,CREATENM=$P(Y(0),U)
"RTN","TIUFC1",25,0)
 . . S DIR("A",1)=" Are you adding shared component '"_$P(Y,U,2)_"' as",DIR("A")="a new Item",DIR("B")="YES",DIR(0)="Y" D ^DIR S SHARYES=Y
"RTN","TIUFC1",26,0)
 . . I 'SHARYES K CREATEDA,CREATENM
"RTN","TIUFC1",27,0)
 . I $$DUPITEM^TIUFLF7(CREATENM,TIUFCDA) W !!,TIUFIMSG,! D PAUSE^TIUFXHLX S DIRUT=1 Q
"RTN","TIUFC1",28,0)
 . S CREATE0=^TIU(8925.1,CREATEDA,0)
"RTN","TIUFC1",29,0)
 I $$DUPITEM^TIUFLF7(NAME,TIUFCDA) W !!,TIUFIMSG,! D PAUSE^TIUFXHLX G ANOTHER
"RTN","TIUFC1",30,0)
 D TYPELIST^TIUFLF7(NAME,0,TIUFCDA,.TIUFTMSG,.TIUFTLST) G:$D(DTOUT) CREAX
"RTN","TIUFC1",31,0)
 I TIUFTLST="" W !!," Please enter a different Name; File already has entries of every permitted Type",!,"with that Name",! D PAUSE^TIUFXHLX G ANOTHER
"RTN","TIUFC1",32,0)
 N DIC S (DIC,DLAYGO)=8925.1,DIC(0)="L",X=""""_NAME_"""" D ^DIC
"RTN","TIUFC1",33,0)
 I Y=-1 W !!,"Couldn't Create Entry; See IRM",! D PAUSE^TIUFXHLX G CREAX
"RTN","TIUFC1",34,0)
 S CREATEDA=+Y,CREATENM=NAME
"RTN","TIUFC1",35,0)
 L +^TIU(8925.1,CREATEDA):1 I '$T W !!," Another user is editing this entry; please try later.",! H 2 G CREAX
"RTN","TIUFC1",36,0)
 D STUFFLDS^TIUFLF4(CREATEDA,TIUFCDA)
"RTN","TIUFC1",37,0)
 S CREATE0=^TIU(8925.1,CREATEDA,0)
"RTN","TIUFC1",38,0)
 S FIELDS=";.05;.06;" S:$P(CREATE0,U,4)="" FIELDS=";.04"_FIELDS S:TIUFWHO="N" FIELDS=FIELDS_".13;"
"RTN","TIUFC1",39,0)
 D ASKFLDS^TIUFLF1(CREATEDA,FIELDS,TIUFCDA,.NEWSTAT,.XFLG) G:$D(DTOUT) CREAX
"RTN","TIUFC1",40,0)
NOTYPE S CREATE0=^TIU(8925.1,CREATEDA,0)
"RTN","TIUFC1",41,0)
 I $P(CREATE0,U,4)="" S DA=CREATEDA,DIK="^TIU(8925.1," D ^DIK W !!," "_$E(CREATENM,1,40)," Deleted: No Type.",! D PAUSE^TIUFXHLX G CREAX
"RTN","TIUFC1",42,0)
 D OWNCHEC^TIUFLF8(CREATEDA)
"RTN","TIUFC1",43,0)
ADD S PFILEDA=TIUFCDA
"RTN","TIUFC1",44,0)
 L +^TIU(8925.1,TIUFCDA):3 I '$T D  G ANOTHER
"RTN","TIUFC1",45,0)
 . W !!,"Another user is editing current branch; can't hang item under parent.  Entry",!,"deleted.  Please create entry again.",! D PAUSE^TIUFXHLX
"RTN","TIUFC1",46,0)
 . L -^TIU(8925.1,CREATEDA) S CREATE=0,DA=CREATEDA,DIK="^TIU(8925.1," D ^DIK
"RTN","TIUFC1",47,0)
 D ADDTEN^TIUFLF4(PFILEDA,CREATEDA,CREATE0,.TENDA)
"RTN","TIUFC1",48,0)
 L -^TIU(8925.1,TIUFCDA)
"RTN","TIUFC1",49,0)
 I 'TENDA S VALMQUIT=1 W !!," Can't hang item under parent; See IRM. Entry deleted.",! D PAUSE^TIUFXHLX L -^TIU(8925.1,CREATEDA) S DA=CREATEDA,DIK="^TIU(8925.1," D ^DIK G CREAX
"RTN","TIUFC1",50,0)
 I '$G(XFLG),'$D(DTOUT),'SHARED S FIELDS=";.07;" D ASKFLDS^TIUFLF1(CREATEDA,FIELDS,TIUFCDA,.NEWSTAT,.XFLG) G:$D(DTOUT) CREAX
"RTN","TIUFC1",51,0)
 I '$G(XFLG),'$D(DTOUT) L +^TIU(8925.1,TIUFCDA,10,TENDA):1 W:'$T !!," Another user is editing this item; please edit later using Detailed Display for",!,"Current Branch.",! H:'$T 2 G:'$T CREAX D  G:$D(DTOUT) CREAX
"RTN","TIUFC1",52,0)
 . S DA(1)=TIUFCDA,DIE="^TIU(8925.1,DA(1),10,",DA=TENDA
"RTN","TIUFC1",53,0)
 . S DR="3" D ^DIE I $D(Y)!$D(DTOUT) Q
"RTN","TIUFC1",54,0)
 . I $P(CNODE0,U,4)="CL" S SEQUENCE=$P(^TIU(8925.1,TIUFCDA,10,TENDA,0),U,3),DR="2///^S X=SEQUENCE" I $L(SEQUENCE)<5,$L(SEQUENCE) D ^DIE ;Stuff mnem with seq value
"RTN","TIUFC1",55,0)
 . S DR=$S($P(CNODE0,U,4)="CL":"2;4",1:4) D ^DIE
"RTN","TIUFC1",56,0)
 . L -^TIU(8925.1,TIUFCDA,10,TENDA)
"RTN","TIUFC1",57,0)
 S VALMBCK="R",MSG=" Entry Created"
"RTN","TIUFC1",58,0)
 I SHARED S MSG=" Entry Added"
"RTN","TIUFC1",59,0)
 W !!,MSG,! S CREATE=1 L -^TIU(8925.1,CREATEDA) G ANOTHER
"RTN","TIUFC1",60,0)
CREAX L -^TIU(8925.1,+$G(CREATEDA))
"RTN","TIUFC1",61,0)
 L -^TIU(8925.1,+$G(TIUFCDA),10,+$G(TENDA))
"RTN","TIUFC1",62,0)
 I $D(DTOUT) S VALMBCK="Q" Q
"RTN","TIUFC1",63,0)
 S PLINENO=$O(^TMP("TIUF1IDX",$J,"DAF",TIUFCDA,""))
"RTN","TIUFC1",64,0)
 S PINFO=^TMP("TIUF1IDX",$J,PLINENO)
"RTN","TIUFC1",65,0)
 D PARSE^TIUFLLM(.PINFO)
"RTN","TIUFC1",66,0)
 N TIUFSAVE D SAVE(.PINFO) ;Speeds up BUFENTRY^TIUFLLM2
"RTN","TIUFC1",67,0)
 S VALMCNT=VALMCNT-PINFO("XPDLCNT") D COLLAPSE^TIUFH1(.PINFO)
"RTN","TIUFC1",68,0)
 D EXPAND1^TIUFH1(.PINFO) S VALMCNT=VALMCNT+PINFO("XPDLCNT")
"RTN","TIUFC1",69,0)
 S TIUFCITM=$S($P(PINFO,U,3):1,1:0)
"RTN","TIUFC1",70,0)
 I CREATE K TIUFCMSG D
"RTN","TIUFC1",71,0)
 . S TIUFCMSG(1)=" Select "_$S(TIUFCTYP="DC":"TITLE",1:"CLASS/DOCUMENTCLASS")_" to create a new "_TIUFCNM
"RTN","TIUFC1",72,0)
 . S TIUFCMSG(2)="or to Go Down a Level, Select NEXT LEVEL."
"RTN","TIUFC1",73,0)
 . I VALMCNT>VALM("LINES") S TIUFCMSG(2)="or to Go Down a Level, Screen to (+/-) Desired ",TIUFCMSG(3)=TIUFCNM_" Item, and Select NEXT LEVEL."
"RTN","TIUFC1",74,0)
 I $G(TIUFFULL) S VALMBCK="R" D RESET^TIUFXHLX
"RTN","TIUFC1",75,0)
 S LINENO=+$O(^TMP("TIUF1IDX",$J,"DAF",+$G(CREATEDA),0))
"RTN","TIUFC1",76,0)
 I LINENO,LINENO<VALMBG!(LINENO>(VALMBG+VALM("LINES")-1)) S VALMBG=LINENO
"RTN","TIUFC1",77,0)
 Q
"RTN","TIUFC1",78,0)
SAVE(EINFO) ;
"RTN","TIUFC1",79,0)
 N LINENO,FILEDA
"RTN","TIUFC1",80,0)
 F LINENO=+EINFO+1:1:+EINFO+EINFO("XPDLCNT")  D  Q:$D(DTOUT)
"RTN","TIUFC1",81,0)
 . S FILEDA=$P(^TMP("TIUF1IDX",$J,LINENO),U,2)
"RTN","TIUFC1",82,0)
 . S TIUFSAVE(FILEDA)=^TMP("TIUF1",$J,LINENO,0)
"RTN","TIUFC1",83,0)
 Q
"RTN","TIUFC1",84,0)
 ;
"RTN","TIUFD")
0^31^B41043754
"RTN","TIUFD",1,0)
TIUFD ; SLC/MAM - LM Screen D (Display) INIT, DS/BASICS,ITEMS,PARNT,BOILTX,TECH(LASTLIN) ;4/17/97  15:35
"RTN","TIUFD",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFD",3,0)
 ;
"RTN","TIUFD",4,0)
HDR ; -- header code
"RTN","TIUFD",5,0)
 S VALMHDR(1)=$$FHDR
"RTN","TIUFD",6,0)
HDRX ;
"RTN","TIUFD",7,0)
 Q
"RTN","TIUFD",8,0)
 ;
"RTN","TIUFD",9,0)
FHDR() ; Function returns Type_Name for headers; Requires Array TIUFNOD0.
"RTN","TIUFD",10,0)
 N NAME,TYPE
"RTN","TIUFD",11,0)
 S NAME=$P(TIUFNOD0,U)
"RTN","TIUFD",12,0)
 S TYPE=$$MIXED^TIULS(TIUFNOD0("TYPE"))
"RTN","TIUFD",13,0)
 I TYPE'="" S TYPE=TYPE_" "
"RTN","TIUFD",14,0)
 Q $$CENTER^TIUFL(TYPE_NAME,79)
"RTN","TIUFD",15,0)
 ;
"RTN","TIUFD",16,0)
INIT ; -- init variables and list array
"RTN","TIUFD",17,0)
 N TEMPLATE
"RTN","TIUFD",18,0)
 K ^TMP("TIUF3",$J),^TMP("TIUF3IDX",$J)
"RTN","TIUFD",19,0)
 D CLEAN^VALM10
"RTN","TIUFD",20,0)
 S VALMCNT=0 D DSBASICS(.VALMCNT)
"RTN","TIUFD",21,0)
INITX I $D(DTOUT) S VALMQUIT=1
"RTN","TIUFD",22,0)
 Q
"RTN","TIUFD",23,0)
 ;
"RTN","TIUFD",24,0)
DSBASICS(LASTLIN) ; Set/Update Display Array TIUF3 starting with Basics.
"RTN","TIUFD",25,0)
 ; Requires LASTLIN = Last array line set, if setting array; = Last
"RTN","TIUFD",26,0)
 ;line to keep before resetting the rest if resetting array.
"RTN","TIUFD",27,0)
 ; Updates LASTLIN to Last array line set by this module.
"RTN","TIUFD",28,0)
 ; Requires CURRENT arrays TIUFINFO, TIUFNOD0.
"RTN","TIUFD",29,0)
 ;WARNING: +TIUFINFO may = 0!
"RTN","TIUFD",30,0)
 ; Any blanklines are set at the beginning, not the end, of the module.
"RTN","TIUFD",31,0)
 N LINENO,CNT,TIUI,FILEDA,LP,LC,OWNER,DA,DR,TYPE,DIC,DIQ,FLDNO
"RTN","TIUFD",32,0)
 S LINENO=LASTLIN
"RTN","TIUFD",33,0)
 ;If called to redisplay edited screen rather than by Init, kill array starting with Basics before resetting array.
"RTN","TIUFD",34,0)
 S CNT=$O(^TMP("TIUF3",$J,1000000),-1)
"RTN","TIUFD",35,0)
 F TIUI=LASTLIN+1:1:CNT K ^TMP("TIUF3",$J,TIUI),^TMP("TIUF3IDX",$J,TIUI)
"RTN","TIUFD",36,0)
 S FILEDA=TIUFINFO("FILEDA"),TYPE=$P(TIUFNOD0,U,4)
"RTN","TIUFD",37,0)
 S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)="  Basics"_$S(TYPE'="O":"            Note: Values preceded by * have been inherited",1:"")
"RTN","TIUFD",38,0)
 K TIUFQ
"RTN","TIUFD",39,0)
 S DIC=8925.1,DR=".01:.13;3.02;3.03",DIQ(0)="I,E",DA=FILEDA,DIQ="TIUFQ" D EN^DIQ1
"RTN","TIUFD",40,0)
 F FLDNO=.01,.02,.03,.04,.1,0,.13,.07,.05,.11,.08,3.02,3.03 D
"RTN","TIUFD",41,0)
 . I FLDNO=0,"NM"'[TIUFWHO Q  ;Sets IFN line.
"RTN","TIUFD",42,0)
 . I FLDNO=.1,TYPE'="CO" Q
"RTN","TIUFD",43,0)
 . I FLDNO=.11,TIUFTMPL'="A"!(TYPE="O") Q
"RTN","TIUFD",44,0)
 . I FLDNO=3.03,TYPE="CO"!(TYPE="O")!(TIUFWHO="C") Q
"RTN","TIUFD",45,0)
 . I FLDNO=3.02,"N"'[TIUFWHO Q  ; For now, include OK to Distribute only on Natl options.  MAM
"RTN","TIUFD",46,0)
 . D SETFLD^TIUFLD(FILEDA,.LINENO,FLDNO)
"RTN","TIUFD",47,0)
 . Q
"RTN","TIUFD",48,0)
 K TIUFQ
"RTN","TIUFD",49,0)
DSBAX S LASTLIN=LINENO Q:$D(DTOUT)  D DSPARNT(.LASTLIN)
"RTN","TIUFD",50,0)
 Q
"RTN","TIUFD",51,0)
 ;
"RTN","TIUFD",52,0)
DSPARNT(LASTLIN) ; Set/Update Display Array TIUF3 starting with Parents.
"RTN","TIUFD",53,0)
 ; See DSBASICS for required variables, etc.
"RTN","TIUFD",54,0)
 N LINENO,CNT,TIUI,FILEDA,TIUREC,INFO,NODE0,TYPE,OLDLNO,PARENT
"RTN","TIUFD",55,0)
 S (TIUFPLIN,LINENO)=LASTLIN,FILEDA=TIUFINFO("FILEDA"),TYPE=$P(TIUFNOD0,U,4)
"RTN","TIUFD",56,0)
 I TYPE="O" G DSPAX
"RTN","TIUFD",57,0)
 ; Don't display parents if Template H or C, unless SHARED CO OR (mistakenly) Multiple Parents:
"RTN","TIUFD",58,0)
 I "HC"[TIUFTMPL,'((TYPE="CO")&$P(TIUFNOD0,U,10)) S PARENT=+$O(^TIU(8925.1,"AD",FILEDA,0)) I '$O(^TIU(8925.1,"AD",FILEDA,PARENT)) G DSPAX
"RTN","TIUFD",59,0)
 ;If called to redisplay edited screen rather than by Init, kill array starting with Parents before resetting array.
"RTN","TIUFD",60,0)
 S CNT=$O(^TMP("TIUF3",$J,1000000),-1)
"RTN","TIUFD",61,0)
 F TIUI=LASTLIN+1:1:CNT K ^TMP("TIUF3",$J,TIUI),^TMP("TIUF3IDX",$J,TIUI)
"RTN","TIUFD",62,0)
 S FILEDA=TIUFINFO("FILEDA")
"RTN","TIUFD",63,0)
 S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)=""
"RTN","TIUFD",64,0)
 S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)="  Parent"_$S(TIUFNOD0("SHARE")="":"",1:"s")_$S($O(^TIU(8925.1,"AD",FILEDA,0)):"                                   Type      IFN  Natl  Status  Owner",1:"")
"RTN","TIUFD",65,0)
 I '$O(^TIU(8925.1,"AD",FILEDA,0)) S LASTLIN=LINENO G DSPAX
"RTN","TIUFD",66,0)
 S TIUI=0,OLDLNO=LINENO
"RTN","TIUFD",67,0)
 F  S TIUI=$O(^TIU(8925.1,"AD",FILEDA,TIUI)) Q:'TIUI  D  G:$D(DTOUT) DSPAX
"RTN","TIUFD",68,0)
 . S LINENO=LINENO+1 D NINFO^TIUFLLM(LINENO,TIUI,.INFO),PARSE^TIUFLLM(.INFO),NODE0ARR^TIUFLF(TIUI,.NODE0) Q:$D(DTOUT)
"RTN","TIUFD",69,0)
 . I NODE0="" W !!," Entry "_FILEDA_" has parent missing from the file.",! S LINENO=LINENO-1 D PAUSE^TIUFXHLX Q
"RTN","TIUFD",70,0)
 . D BUFENTRY^TIUFLLM2(.INFO,.NODE0,"80")
"RTN","TIUFD",71,0)
 . Q
"RTN","TIUFD",72,0)
 D UPDATE^TIUFLLM1("D",LINENO-OLDLNO,OLDLNO)
"RTN","TIUFD",73,0)
DSPAX S LASTLIN=LINENO Q:$D(DTOUT)  D DSITEMS(.LASTLIN)
"RTN","TIUFD",74,0)
 Q
"RTN","TIUFD",75,0)
 ;
"RTN","TIUFD",76,0)
DSITEMS(LASTLIN) ; Set/Update Display Array TIUF3 starting with Items.
"RTN","TIUFD",77,0)
 ; See DSBASICS for required variables, etc.
"RTN","TIUFD",78,0)
 ; Called by subtemplates D AND T
"RTN","TIUFD",79,0)
 N LINENO,CNT,TIUI,FILEDA,TIUREC,ITEMS,OLDLNO,HASITEMS
"RTN","TIUFD",80,0)
 S (TIUFILIN,LINENO)=LASTLIN
"RTN","TIUFD",81,0)
 G:TIUFNOD0("ITEMS")="" DSITX ; Items is NA
"RTN","TIUFD",82,0)
 ;If called to redisplay edited screen rather than by Init, kill array starting with Items before resetting array.
"RTN","TIUFD",83,0)
 S CNT=$O(^TMP("TIUF3",$J,1000000),-1)
"RTN","TIUFD",84,0)
 F TIUI=LASTLIN+1:1:CNT K ^TMP("TIUF3",$J,TIUI),^TMP("TIUF3IDX",$J,TIUI)
"RTN","TIUFD",85,0)
 S FILEDA=TIUFINFO("FILEDA")
"RTN","TIUFD",86,0)
 S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)=""
"RTN","TIUFD",87,0)
 ; HASITEMS may have changed if edited items:
"RTN","TIUFD",88,0)
 S ITEMS="  Items",HASITEMS=$$HASITEMS^TIUFLF1(FILEDA) I HASITEMS S ITEMS=ITEMS_" (By Sequence if they have it, otherwise alphabetically by Menu Text)"
"RTN","TIUFD",89,0)
 S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)=ITEMS
"RTN","TIUFD",90,0)
 I 'HASITEMS G DSITX
"RTN","TIUFD",91,0)
 S TIUREC=$$SETSTR^VALM1("Item","",2,37)
"RTN","TIUFD",92,0)
 S:"NM"[TIUFWHO TIUREC=$$SETSTR^VALM1("    IFN",TIUREC,32,7)
"RTN","TIUFD",93,0)
 S TIUREC=$$SETSTR^VALM1("Seq   ",TIUREC,41,6),TIUREC=$$SETSTR^VALM1("Mnem",TIUREC,49,4),TIUREC=$$SETSTR^VALM1("Menu Text",TIUREC,55,26)
"RTN","TIUFD",94,0)
 S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)=TIUREC,OLDLNO=LINENO
"RTN","TIUFD",95,0)
 ; Checked for items existing before entered EDIT/View.  So items exist:
"RTN","TIUFD",96,0)
 D BUFITEMS^TIUFLT("D",.TIUFINFO,.LINENO) G:$D(DTOUT) DSITX
"RTN","TIUFD",97,0)
 D UPDATE^TIUFLLM1("D",LINENO-OLDLNO,OLDLNO)
"RTN","TIUFD",98,0)
DSITX S LASTLIN=LINENO Q:$D(DTOUT)  D DSBOILTX(.LASTLIN)
"RTN","TIUFD",99,0)
 Q
"RTN","TIUFD",100,0)
 ;
"RTN","TIUFD",101,0)
DSBOILTX(LASTLIN) ; Set Display Array TIUF3 starting with Boilerplte Text.
"RTN","TIUFD",102,0)
 ; Used by subtemplates D and X AND T
"RTN","TIUFD",103,0)
 ; See DSBASICS for required variables, etc.
"RTN","TIUFD",104,0)
 N LINENO,CNT,TIUI,FILEDA,NAME
"RTN","TIUFD",105,0)
 S (TIUFBLIN,LINENO)=LASTLIN
"RTN","TIUFD",106,0)
 G:TIUFNOD0("BOILPT")="" DSBOX ; NA
"RTN","TIUFD",107,0)
 ;If called to redisplay edited screen rather than by Init, kill array starting with Boilpt Txt before resetting array.
"RTN","TIUFD",108,0)
 S CNT=$O(^TMP("TIUF3",$J,1000000),-1)
"RTN","TIUFD",109,0)
 F TIUI=LASTLIN+1:1:CNT K ^TMP("TIUF3",$J,TIUI),^TMP("TIUF3IDX",$J,TIUI)
"RTN","TIUFD",110,0)
 S FILEDA=TIUFINFO("FILEDA")
"RTN","TIUFD",111,0)
 I TIUFSTMP'="X" S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)="",LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)="  Boilerplate Text"
"RTN","TIUFD",112,0)
 I TIUFNOD0("TYPE")="COMPONENT" S NAME=$P(TIUFNOD0,U),LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)=NAME_":"
"RTN","TIUFD",113,0)
 D SETBOIL^TIUFLD1(FILEDA,.LINENO)
"RTN","TIUFD",114,0)
 D DSETBOIL^TIUFLD1(FILEDA,.LINENO)
"RTN","TIUFD",115,0)
DSBOX S LASTLIN=LINENO Q:$D(DTOUT)  D:TIUFSTMP'="X" DSTECH(.LASTLIN)
"RTN","TIUFD",116,0)
 Q
"RTN","TIUFD",117,0)
 ;
"RTN","TIUFD",118,0)
DSTECH(LASTLIN) ; Set/Update Display Array TIUF3 starting with Technical Flds.
"RTN","TIUFD",119,0)
 ; See DSBASICS for required variables, etc.
"RTN","TIUFD",120,0)
 ; Called by subtemp D and T
"RTN","TIUFD",121,0)
 N LINENO,CNT,TIUI,FILEDA,FLDNO,PFILEDA,PNODE61,PCUSTOM,TYPE
"RTN","TIUFD",122,0)
 N DIC,DR,DIQ,DA
"RTN","TIUFD",123,0)
 S (TIUFTLIN,LINENO)=LASTLIN
"RTN","TIUFD",124,0)
 I "NM"'[TIUFWHO G DSTEX
"RTN","TIUFD",125,0)
 S TYPE=$P(TIUFNOD0,U,4) I TYPE="CO" G DSTEX
"RTN","TIUFD",126,0)
 ;If called to redisplay edited screen rather than by Init, kill array starting with Tech flds before resetting array.
"RTN","TIUFD",127,0)
 S CNT=$O(^TMP("TIUF3",$J,1000000),-1)
"RTN","TIUFD",128,0)
 F TIUI=LASTLIN+1:1:CNT K ^TMP("TIUF3",$J,TIUI),^TMP("TIUF3IDX",$J,TIUI)
"RTN","TIUFD",129,0)
 S FILEDA=TIUFINFO("FILEDA")
"RTN","TIUFD",130,0)
 S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)=""
"RTN","TIUFD",131,0)
 S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)="  Technical Fields"_$S(TYPE'="O":"      Note: Values preceded by * have been inherited",1:"")
"RTN","TIUFD",132,0)
 K TIUFQ
"RTN","TIUFD",133,0)
 S DIC=8925.1,DR="4;4.6;4.7;5:9",DIQ(0)="I,E",DA=FILEDA,DIQ="TIUFQ" D EN^DIQ1
"RTN","TIUFD",134,0)
 I TYPE="O" D SETFLD^TIUFLD(FILEDA,.LINENO,9) G DSTEX
"RTN","TIUFD",135,0)
 S PFILEDA=+$O(^TIU(8925.1,"AD",FILEDA,0))
"RTN","TIUFD",136,0)
 I TYPE="CL"!(TYPE="DC")!(TYPE="DOC") S PNODE61=$G(^TIU(8925.1,PFILEDA,6.1)),PCUSTOM=$P(PNODE61,U,4) I PCUSTOM="" D INHERIT^TIUFLD(FILEDA,0,6.14,"","","",.PCUSTOM)
"RTN","TIUFD",137,0)
 F FLDNO=4.6,4.7,5,6,6.1,6.12,6.13,7,8,6.14 D
"RTN","TIUFD",138,0)
 . I FLDNO=6.14,TYPE'="CL",TYPE'="DC" Q
"RTN","TIUFD",139,0)
 . I FLDNO=6.1!(FLDNO=6.12)!(FLDNO=6.13),'$G(PCUSTOM) Q
"RTN","TIUFD",140,0)
 . D SETFLD^TIUFLD(FILEDA,.LINENO,FLDNO)
"RTN","TIUFD",141,0)
 . Q
"RTN","TIUFD",142,0)
DSTEX K TIUFQ S LASTLIN=LINENO Q:$D(DTOUT)  D DSEMBED^TIUFD1(.LASTLIN)
"RTN","TIUFD",143,0)
 Q
"RTN","TIUFD",144,0)
 ;
"RTN","TIUFD1")
0^32^B15048670
"RTN","TIUFD1",1,0)
TIUFD1 ; SLC/MAM - LM Template DSUPLOAD(LASTLIN), DSEMBED(LASTLIN) ;4/28/97  21:36
"RTN","TIUFD1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFD1",3,0)
 ;
"RTN","TIUFD1",4,0)
DSEMBED(LASTLIN) ; Set/Update Display Array TIUF3 starting with Object Embedded in Titles
"RTN","TIUFD1",5,0)
 ; See DSBASICS for required variables, etc.
"RTN","TIUFD1",6,0)
 ; Called by subtemplate D when OBJECTDA is object
"RTN","TIUFD1",7,0)
 ; Sets ^TMP("TIUFEMBED",$J,OBJECTDA,SUBSCPT,"ANY",FILEDA), for SUBSCPTs
"RTN","TIUFD1",8,0)
 ;TIUFTL,TIUFCO,TIUFORPHAN.
"RTN","TIUFD1",9,0)
 N LINENO,TITLEDA,OBJECTDA,TIUREC,NODE0,IFN,TYPE,HASIT,OLDLNO,INFO
"RTN","TIUFD1",10,0)
 N ORPHANDA
"RTN","TIUFD1",11,0)
 S LINENO=LASTLIN,OBJECTDA=TIUFINFO("FILEDA"),TYPE=$P(TIUFNOD0,U,4)
"RTN","TIUFD1",12,0)
 S TIUFELIN=LASTLIN
"RTN","TIUFD1",13,0)
 I TYPE'="O" G DSEMX
"RTN","TIUFD1",14,0)
 K ^TMP("TIUFEMBED",$J,OBJECTDA) D EMBED^TIUFLJ(OBJECTDA,TIUFNOD0,"ANY",1)
"RTN","TIUFD1",15,0)
TITLE I '$O(^TMP("TIUFEMBED",$J,OBJECTDA,"TIUFTL","ANY",0)) G ORPHAN
"RTN","TIUFD1",16,0)
 S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)="",IFN=$S("NM"[TIUFWHO:"IFN",1:"   ")
"RTN","TIUFD1",17,0)
 S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)="  Object is Embedded in Title(s)                        Status  Owner        "_IFN
"RTN","TIUFD1",18,0)
 S TITLEDA=0,OLDLNO=LINENO
"RTN","TIUFD1",19,0)
 F  S TITLEDA=$O(^TMP("TIUFEMBED",$J,OBJECTDA,"TIUFTL","ANY",TITLEDA)) Q:'TITLEDA  D  G:$D(DTOUT) DSEMX
"RTN","TIUFD1",20,0)
 . S LINENO=LINENO+1 D NINFO^TIUFLLM(LINENO,TITLEDA,.INFO),PARSE^TIUFLLM(.INFO),NODE0ARR^TIUFLF(TITLEDA,.NODE0) Q:$D(DTOUT)
"RTN","TIUFD1",21,0)
 . D BUFENTRY^TIUFLLM2(.INFO,.NODE0,"O")
"RTN","TIUFD1",22,0)
 D UPDATE^TIUFLLM1("O",LINENO-OLDLNO,OLDLNO) K ^TMP("TIUFB",$J)
"RTN","TIUFD1",23,0)
ORPHAN I '$O(^TMP("TIUFEMBED",$J,OBJECTDA,"TIUFORPHAN","ANY",0)) G DSEMX
"RTN","TIUFD1",24,0)
 S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)="",IFN=$S("NM"[TIUFWHO:"IFN",1:"   ")
"RTN","TIUFD1",25,0)
 S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)="  Object is Embedded in Orphan Component(s)             Status  Owner        "_IFN
"RTN","TIUFD1",26,0)
 S ORPHANDA=0,OLDLNO=LINENO
"RTN","TIUFD1",27,0)
 F  S ORPHANDA=$O(^TMP("TIUFEMBED",$J,OBJECTDA,"TIUFORPHAN","ANY",ORPHANDA)) Q:'ORPHANDA  D  G:$D(DTOUT) DSEMX
"RTN","TIUFD1",28,0)
 . S LINENO=LINENO+1 D NINFO^TIUFLLM(LINENO,ORPHANDA,.INFO),PARSE^TIUFLLM(.INFO),NODE0ARR^TIUFLF(ORPHANDA,.NODE0) Q:$D(DTOUT)
"RTN","TIUFD1",29,0)
 . D BUFENTRY^TIUFLLM2(.INFO,.NODE0,"O")
"RTN","TIUFD1",30,0)
 D UPDATE^TIUFLLM1("O",LINENO-OLDLNO,OLDLNO) K ^TMP("TIUFB",$J)
"RTN","TIUFD1",31,0)
DSEMX S LASTLIN=LINENO Q:$D(DTOUT)  D DSUPLOAD(.LASTLIN)
"RTN","TIUFD1",32,0)
 Q
"RTN","TIUFD1",33,0)
 ;
"RTN","TIUFD1",34,0)
DSUPLOAD(LASTLIN) ; Set/Update Display Array TIUF3 starting with Upload.
"RTN","TIUFD1",35,0)
 ; See DSBASICS for required variables, etc.
"RTN","TIUFD1",36,0)
 ; CAlled by subtemp D and T
"RTN","TIUFD1",37,0)
 N LINENO,CNT,TIUI,FILEDA,FLDNO,HEADFLG,ITEMFLG,TIUM,CAPDEL
"RTN","TIUFD1",38,0)
 N DIC,DR,DIQ,DA,TARGET,AFILEDA,TYPE,SUBFLDNO
"RTN","TIUFD1",39,0)
 S (TIUFULIN,LINENO)=LASTLIN,TYPE=$P(TIUFNOD0,U,4)
"RTN","TIUFD1",40,0)
 I "NM"'[TIUFWHO G DSUPX
"RTN","TIUFD1",41,0)
 I TYPE'="CL",TYPE'="DC",TYPE'="DOC" G DSUPX
"RTN","TIUFD1",42,0)
 ;If called to redisplay edited screen rather than by Init, kill array starting with Upload before resetting array.
"RTN","TIUFD1",43,0)
 S CNT=$O(^TMP("TIUF3",$J,1000000),-1)
"RTN","TIUFD1",44,0)
 F TIUI=LASTLIN+1:1:CNT K ^TMP("TIUF3",$J,TIUI),^TMP("TIUF3IDX",$J,TIUI)
"RTN","TIUFD1",45,0)
 S FILEDA=TIUFINFO("FILEDA")
"RTN","TIUFD1",46,0)
 S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)=""
"RTN","TIUFD1",47,0)
 S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)="  Upload"
"RTN","TIUFD1",48,0)
 I $G(^TIU(8925.1,FILEDA,1))="",'$D(^TIU(8925.1,FILEDA,"HEAD",0)),'$D(^TIU(8925.1,FILEDA,"ITEM",0)) G DSUPX
"RTN","TIUFD1",49,0)
 K TIUFQ
"RTN","TIUFD1",50,0)
 S DIC=8925.1,DR="1.01:1.03;4;4.5;4.8",DIQ(0)="I,E",DA=FILEDA,DIQ="TIUFQ" D EN^DIQ1
"RTN","TIUFD1",51,0)
 F FLDNO=1.01,1.02,1.03,4,4.5,4.8 D
"RTN","TIUFD1",52,0)
 . D SETFLD^TIUFLD(FILEDA,.LINENO,FLDNO)
"RTN","TIUFD1",53,0)
 . Q
"RTN","TIUFD1",54,0)
 K TIUFQ
"RTN","TIUFD1",55,0)
UPHEAD ;
"RTN","TIUFD1",56,0)
 S (HEADFLG,ITEMFLG)=0
"RTN","TIUFD1",57,0)
 S:$O(^TIU(8925.1,FILEDA,"HEAD",0)) HEADFLG=1
"RTN","TIUFD1",58,0)
 S:$O(^TIU(8925.1,FILEDA,"ITEM",0)) ITEMFLG=1
"RTN","TIUFD1",59,0)
 F TIUM="HEAD","ITEM" D  G:$D(VALMQUIT) DSUPX
"RTN","TIUFD1",60,0)
 . Q:'@(TIUM_"FLG")
"RTN","TIUFD1",61,0)
 . N TIUJ
"RTN","TIUFD1",62,0)
 . I TIUM="HEAD" S CAPDEL="  Captioned",FLDNO=2
"RTN","TIUFD1",63,0)
 . E  S CAPDEL="  Delimited",FLDNO=1
"RTN","TIUFD1",64,0)
 . S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)=""
"RTN","TIUFD1",65,0)
 . S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)=CAPDEL_" ASCII Record Header"
"RTN","TIUFD1",66,0)
 . S TIUJ=0 K TIUFQ
"RTN","TIUFD1",67,0)
 . F  S TIUJ=$O(^TIU(8925.1,FILEDA,TIUM,TIUJ)) Q:'TIUJ  D  Q:$D(VALMQUIT)
"RTN","TIUFD1",68,0)
 . . S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)=""
"RTN","TIUFD1",69,0)
 . . S DIC=8925.1,DR=FLDNO,DA=FILEDA,DR(8925.1_FLDNO)=".01:1"
"RTN","TIUFD1",70,0)
 . . S DA(8925.1_FLDNO)=TIUJ,DIQ(0)="I,E",DIQ="TIUFQ" D EN^DIQ1
"RTN","TIUFD1",71,0)
 . . F SUBFLDNO=.01:.01:.04,1,.05:.01:.07 D
"RTN","TIUFD1",72,0)
 . . . D SETFLD^TIUFLD(FILEDA,.LINENO,FLDNO,TIUJ,SUBFLDNO)
"RTN","TIUFD1",73,0)
 . . K TIUFQ
"RTN","TIUFD1",74,0)
 . . Q
"RTN","TIUFD1",75,0)
 . Q
"RTN","TIUFD1",76,0)
DSUPX S LASTLIN=LINENO
"RTN","TIUFD1",77,0)
 Q
"RTN","TIUFD1",78,0)
 ;
"RTN","TIUFD2")
0^33^B16631595
"RTN","TIUFD2",1,0)
TIUFD2 ; SLC/MAM - LM Template D (Display) Action Edit Basics ;5/1/97  21:36
"RTN","TIUFD2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFD2",3,0)
 ;
"RTN","TIUFD2",4,0)
EDBASICS ; Template D (Display) Action Edit Basics
"RTN","TIUFD2",5,0)
 ; Requires TIUFTMPL.
"RTN","TIUFD2",6,0)
 ; Requires TIUFWHO, set in Options TIUF/A/C/H EDIT/SORT/CREATE DDEFS CLIN/MGR/NATL
"RTN","TIUFD2",7,0)
 ; Requires CURRENT array TIUFINFO, CURRENT variable TIUFVCN1
"RTN","TIUFD2",8,0)
 ;as set in EDVIEW^TIUFHA, updated (if Template A has changed) 
"RTN","TIUFD2",9,0)
 ;in AUPDATE^TIUFLA1, or (if Template H has changed) in UPDATE^TIUFLLM1.
"RTN","TIUFD2",10,0)
 ;WARNING: +TIUFINFO may = 0 if Template A has changed!
"RTN","TIUFD2",11,0)
 ; If TIUFWHO="C" (Clinician), only owner can edit.
"RTN","TIUFD2",12,0)
 ; If TIUFTMPL = "A", requires TIUFATTR and TIUFAVAL as set in protocols
"RTN","TIUFD2",13,0)
 ;TIUF SORT BY ... and subprotocols.
"RTN","TIUFD2",14,0)
 ; Edit Basics for LM entries as entries in file 8925.1 (not as items
"RTN","TIUFD2",15,0)
 ;for entries in 8925.1).
"RTN","TIUFD2",16,0)
 N FILEDA,NAME,OPTFLDS,NEWFLAG,NODE0,STATUS,FIELDS,NEWSTAT,DTOUT,DIRUT
"RTN","TIUFD2",17,0)
 N DIROUT,CNTCHNG
"RTN","TIUFD2",18,0)
 N PFILEDA,DIR,X,Y,ALLFLDS,BYPASS,TIUFXNOD,TIUFFULL,TYPE,LINENO
"RTN","TIUFD2",19,0)
 S FILEDA=TIUFINFO("FILEDA"),VALMBCK="" ;Redisplay each time.
"RTN","TIUFD2",20,0)
 S NODE0=$G(^TIU(8925.1,FILEDA,0)),TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFD2",21,0)
 I NODE0="" W !!," Entry not in File; See IRM",! D PAUSE^TIUFXHLX G EDBAX
"RTN","TIUFD2",22,0)
 S NAME=$P(NODE0,U),STATUS=$P(NODE0,U,7),TYPE=$P(NODE0,U,4)
"RTN","TIUFD2",23,0)
 S STATUS=$$STATWORD^TIUFLF5(STATUS) ;e.g. INACTIVE
"RTN","TIUFD2",24,0)
 L +^TIU(8925.1,FILEDA):1 I '$T W !!," Another user is editing this entry.",! H 2 G EDBAX
"RTN","TIUFD2",25,0)
 S PFILEDA=+$O(^TIU(8925.1,"AD",FILEDA,0))
"RTN","TIUFD2",26,0)
 D  G:'$D(FIELDS)!$D(DTOUT) EDBAX
"RTN","TIUFD2",27,0)
 . S ALLFLDS=";.01;.02;.03;.04;.05;.06;.07;.1;.13;3.02;3.03;"
"RTN","TIUFD2",28,0)
 . I $P(NODE0,U,10),'$$PERSOWNS^TIUFLF2(FILEDA,DUZ) S FIELDS=";.05;.06;" W !!," Edit Owner only: only an Owner can edit a Shared Component.",! Q
"RTN","TIUFD2",29,0)
 . I TYPE="O",'$$PERSOWNS^TIUFLF2(FILEDA,DUZ) S FIELDS=";.05;.06;" W !!," Edit Owner only: only an Owner can edit an Object.",! Q
"RTN","TIUFD2",30,0)
 . I STATUS="NO/BAD",TYPE'="CO" S FIELDS=";.07;" W !!," Edit Status only: Entry has No Status/Bad Status",! Q
"RTN","TIUFD2",31,0)
 . I STATUS'="INACTIVE",TIUFWHO="N" K DIRUT D  Q:$D(DIRUT)  I BYPASS=1 S FIELDS=ALLFLDS Q
"RTN","TIUFD2",32,0)
 . . S DIR(0)="Y",DIR("A",1)=" Entry is not Inactive.  You can edit Status and Owner"_$S("N"[TIUFWHO:" and OK to Distribute",1:"")
"RTN","TIUFD2",33,0)
 . . S DIR("A",2)="only OR you can bypass safety measures and edit ALL Basic fields even though"
"RTN","TIUFD2",34,0)
 . . S DIR("A",3)="this may cause errors if e.g. a document is being entered on this entry."
"RTN","TIUFD2",35,0)
 . . S DIR("A")="Do you want to edit ALL Basic Fields"
"RTN","TIUFD2",36,0)
 . . S DIR("B")="NO" D ^DIR S BYPASS=Y K DIR,X,Y
"RTN","TIUFD2",37,0)
 . I STATUS="NO/BAD" D  Q
"RTN","TIUFD2",38,0)
 . . S FIELDS=";.07;" W !!," Edit Status only; Entry has No Status/Bad Status" Q
"RTN","TIUFD2",39,0)
 . I STATUS'="INACTIVE" D  Q
"RTN","TIUFD2",40,0)
 . . I TYPE="CO" S FIELDS=";.05;.06;" W !!," Edit Owner only; Entry is not Inactive" Q
"RTN","TIUFD2",41,0)
 . . S FIELDS=";.05;.06;.07"_$S("N"[TIUFWHO:";3.02;",1:";") W !!," Edit Status and Owner "_$S("N"[TIUFWHO:"and OK to Distribute ",1:"")_"only; Entry is not Inactive" Q
"RTN","TIUFD2",42,0)
 . I $P(NODE0,U,10),'$$CANEDIT^TIUFLF6(FILEDA) S FIELDS=";.05;.06;" W !!," Edit Owner only: Shared Component with parent that isn't Inactive" Q
"RTN","TIUFD2",43,0)
 . I TIUFWHO="C" S FIELDS=";.02;.03;.05;.06;.07;" Q
"RTN","TIUFD2",44,0)
 . I TYPE="O" S FIELDS=";.01;.02;.03;.05;.06;.07;3.02;" Q
"RTN","TIUFD2",45,0)
 . S FIELDS=ALLFLDS
"RTN","TIUFD2",46,0)
 D ASKFLDS^TIUFLF1(FILEDA,FIELDS,PFILEDA,.NEWSTAT) G:$D(DTOUT) EDBAX
"RTN","TIUFD2",47,0)
 D NODE0ARR^TIUFLF(FILEDA,.TIUFNOD0) G:$D(DTOUT) EDBAX
"RTN","TIUFD2",48,0)
 I TIUFTMPL="A"!(TIUFTMPL="J") D  ; Update line if 'REDO, no new status:
"RTN","TIUFD2",49,0)
 . I 'NEWSTAT,'TIUFREDO D AUPDATE^TIUFLA1(TIUFNOD0,FILEDA,.CNTCHNG) S:CNTCHNG TIUFVCN1=TIUFVCN1-1 ;doesn't match.
"RTN","TIUFD2",50,0)
 . I NEWSTAT S TIUFREDO=1 ; One new status affects status globally.
"RTN","TIUFD2",51,0)
 ; Update entry itself in TIUFTMPL; entry will be reexpanded when leave EV:
"RTN","TIUFD2",52,0)
 I "HC"[TIUFTMPL D LINEUP^TIUFLLM1(.TIUFINFO,TIUFTMPL)
"RTN","TIUFD2",53,0)
 S LINENO=0 D DSBASICS^TIUFD(.LINENO) S VALMCNT=LINENO
"RTN","TIUFD2",54,0)
 G:$D(DTOUT) EDBAX
"RTN","TIUFD2",55,0)
 D HDR^TIUFD
"RTN","TIUFD2",56,0)
 S VALMSG=$$VMSG^TIUFL D RE^VALM4 I $G(TIUFFULL) D RESET^TIUFXHLX
"RTN","TIUFD2",57,0)
EDBAX ;
"RTN","TIUFD2",58,0)
 L -^TIU(8925.1,+$G(FILEDA))
"RTN","TIUFD2",59,0)
 I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFD2",60,0)
 Q
"RTN","TIUFD2",61,0)
 ;
"RTN","TIUFD3")
0^34^B30011238
"RTN","TIUFD3",1,0)
TIUFD3 ; SLC/MAM - LM Template D Actions Edit Items, Edit Boilerplate Text ;4/17/97  11:02
"RTN","TIUFD3",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFD3",3,0)
 ;
"RTN","TIUFD3",4,0)
EDITEMS ; Templates H, C, A, D Action Edit Items. Calls LM Template TIUFT.
"RTN","TIUFD3",5,0)
 ; Requires TIUFTMPL.
"RTN","TIUFD3",6,0)
 ; Requires TIUFWHO, set in Options TIUF/A/C/H EDIT/SORT/CREATE DDEFS CLIN/MGR/NATL.
"RTN","TIUFD3",7,0)
 ; Sets TIUFACTT for Subtemplate T. Sets TIUFSTMP = T.
"RTN","TIUFD3",8,0)
 I $G(TIUFSTMP)="D" G EDITEMS1
"RTN","TIUFD3",9,0)
 N TIUFINFO,TIUFNOD0,TIUFVCN1,MISSITEM,TIUFXNOD,DTOUT,DIRUT,DIROUT
"RTN","TIUFD3",10,0)
 S VALMBCK="",TIUFVCN1=VALMCNT,TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFD3",11,0)
 I TIUFXNOD'["=" W !!," You may edit the Items of ONE Entry.  Please select an Entry from the List.",!!
"RTN","TIUFD3",12,0)
 D EN^VALM2(TIUFXNOD,"SO") Q:'$O(VALMY(0))  S TIUFINFO=$G(^TMP("TIUF1IDX",$J,$O(VALMY(0)))) I 'TIUFINFO W !!," Missing List Manager Data; See IRM",! D PAUSE^TIUFXHLX S VALMBCK="Q" G EDITX
"RTN","TIUFD3",13,0)
 S FILEDA=$P(TIUFINFO,U,2),MISSITEM=$$MISSITEM^TIUFLF4(FILEDA) I MISSITEM W !!," Can't Edit Items: File Entry "_FILEDA_" Has Nonexistent Item "_MISSITEM_" ; See IRM.",! D PAUSE^TIUFXHLX S VALMBCK="Q" G EDITX
"RTN","TIUFD3",14,0)
 D PARSE^TIUFLLM(.TIUFINFO)
"RTN","TIUFD3",15,0)
 D NODE0ARR^TIUFLF(TIUFINFO("FILEDA"),.TIUFNOD0) G:$D(DTOUT) EDITX
"RTN","TIUFD3",16,0)
EDITEMS1 ; Entry point called by Edit Items of Template D.
"RTN","TIUFD3",17,0)
 ; Requires CURRENT array TIUFINFO, CURRENT variable TIUFVCN1
"RTN","TIUFD3",18,0)
 ;as set in EDVIEW^TIUFHA, updated (if Template A has changed) 
"RTN","TIUFD3",19,0)
 ;in AUPDATE^TIUFLA1, or (if Template H has changed) in UPDATE^TIUFLLM1.
"RTN","TIUFD3",20,0)
 ;WARNING: +TIUFINFO may = 0 if Template A has changed!
"RTN","TIUFD3",21,0)
 ; Requires array TIUFNOD0; Updates TIUFNOD0 upon return from Template T.
"RTN","TIUFD3",22,0)
 ; If called from D, requires TIUFILIN as set in DSITEMS^TIUFD.
"RTN","TIUFD3",23,0)
 ; If called from D, requires TIUFSTMP="D"
"RTN","TIUFD3",24,0)
 N SUBTEMPL
"RTN","TIUFD3",25,0)
 S SUBTEMPL=$G(TIUFSTMP)
"RTN","TIUFD3",26,0)
 S VALMBCK=""
"RTN","TIUFD3",27,0)
 N FILEDA,TYPE,STATUS
"RTN","TIUFD3",28,0)
 S FILEDA=TIUFINFO("FILEDA"),TYPE=$P(TIUFNOD0,U,4)
"RTN","TIUFD3",29,0)
 I TIUFWHO="C",'$$HASITEMS^TIUFLF1(FILEDA) S MSG=" Entry has no Items",VALMBCK="" G EDITX
"RTN","TIUFD3",30,0)
 I TYPE="O" S MSG=" Objects do not have Items",VALMBCK="" G EDITX
"RTN","TIUFD3",31,0)
 N USROWNS,TIUREC,MSG,TIUFVCN3,TIUFBG3,TIUFSTMP,TIUFACTT,TYPE
"RTN","TIUFD3",32,0)
 N TIUFIXED,EXPAND,SHARED
"RTN","TIUFD3",33,0)
 S TIUFSTMP="T" ;Items
"RTN","TIUFD3",34,0)
 S TIUFACTT=$S("NM"[TIUFWHO:"A",TIUFWHO="C":"E",1:"V") ;Add, Edit, View
"RTN","TIUFD3",35,0)
 S TYPE=$P(TIUFNOD0,U,4),SHARED=$P(TIUFNOD0,U,10),STATUS=$$STATWORD^TIUFLF5($P(TIUFNOD0,U,7)) ; e.g. INACTIVE
"RTN","TIUFD3",36,0)
 D
"RTN","TIUFD3",37,0)
 . I TYPE="" S TIUFACTT="V",MSG=" Entry has no Type; View Only" Q
"RTN","TIUFD3",38,0)
 . I SHARED,TIUFTMPL'="A" S TIUFACTT="V",MSG=" Shared Components can be edited only through the SORT Option: View Only." Q
"RTN","TIUFD3",39,0)
 . I 'SHARED,TYPE="DOC"!(TYPE="CO"),STATUS'="INACTIVE" S TIUFACTT="V",MSG=" Can't edit Items of a Title/Component unless entry is Inactive; View Only." Q
"RTN","TIUFD3",40,0)
 . I SHARED,'$$CANEDIT^TIUFLF6(FILEDA) S TIUFACTT="V",MSG=" Shared Component with parent that isn't Inactive; View Only." Q
"RTN","TIUFD3",41,0)
 . S USROWNS=$$PERSOWNS^TIUFLF2(FILEDA,DUZ)
"RTN","TIUFD3",42,0)
 . I USROWNS="" S TIUFACTT="V",MSG=" Entry has no Owner; View Only" Q
"RTN","TIUFD3",43,0)
 . I USROWNS=0,TIUFWHO="C" S TIUFACTT="V",MSG=" Non-Owner; View Only" Q
"RTN","TIUFD3",44,0)
 . I USROWNS=0,TIUFWHO'="C",SHARED S TIUFACTT="V",MSG=" Only the Owner can edit a Shared Component; View Only"
"RTN","TIUFD3",45,0)
 K DIRUT I $D(MSG) W !!,MSG,! D PAUSE^TIUFXHLX K MSG I $D(DIRUT) Q
"RTN","TIUFD3",46,0)
 ; If came from Template H rather than A AND If Edited Items directly from H rather than thru Edit/View (D), AND If H entry was expanded, then collapse entry (reexpand to items only when return):
"RTN","TIUFD3",47,0)
 I TIUFTMPL="H",SUBTEMPL'="D" S EXPAND=TIUFINFO("XPDLCNT") I EXPAND D COLLAPSE^TIUFH1(.TIUFINFO) S VALMCNT=VALMCNT-EXPAND
"RTN","TIUFD3",48,0)
 S TIUFVCN3=VALMCNT,TIUFBG3=VALMBG,TIUFIXED=$G(VALM("FIXED"))
"RTN","TIUFD3",49,0)
 I TIUFACTT="A" D
"RTN","TIUFD3",50,0)
 . I "NM"[TIUFWHO D EN^VALM("TIUFT ITEMS ADD/EDIT/VIEW MGR")
"RTN","TIUFD3",51,0)
 D:TIUFACTT="E" EN^VALM("TIUFT ITEMS EDIT/VIEW CLIN")
"RTN","TIUFD3",52,0)
 D:TIUFACTT="V" EN^VALM("TIUFT ITEMS VIEW MGR/CLIN")
"RTN","TIUFD3",53,0)
 S VALMCNT=TIUFVCN3,VALMBG=TIUFBG3
"RTN","TIUFD3",54,0)
 D NODE0ARR^TIUFLF(FILEDA,.TIUFNOD0) G:$D(DTOUT) EDITX
"RTN","TIUFD3",55,0)
 ; If came from Template H rather than A AND If Edited Items directly from H rather than thru Edit/View (D), then update + for H and If H entry was expanded, reexpand to items only:
"RTN","TIUFD3",56,0)
 I TIUFTMPL="H",SUBTEMPL'="D" D
"RTN","TIUFD3",57,0)
 . ;Since Template is H, then need +.  If 'Expand, just update +:
"RTN","TIUFD3",58,0)
 . I 'EXPAND  S TIUREC=^TMP("TIUF1",$J,+TIUFINFO,0),TIUREC=$$PLUSUP^TIUFLLM(.TIUFINFO,TIUREC),^TMP("TIUF1",$J,+TIUFINFO,0)=TIUREC
"RTN","TIUFD3",59,0)
 . ;If Expand, that will automatically update + for template H:
"RTN","TIUFD3",60,0)
 . I EXPAND D EXPAND1^TIUFH1(.TIUFINFO) S VALMCNT=VALMCNT+$P(TIUFINFO,U,3)
"RTN","TIUFD3",61,0)
 ; Edit Items affects parentage: if came from Template A and sort by parentage, redo all of A:
"RTN","TIUFD3",62,0)
 I TIUFTMPL="A" D:$E(TIUFATTR)="P" INIT^TIUFA G:$D(DTOUT) EDITX
"RTN","TIUFD3",63,0)
 ; If not sort by parentage, don't update A here: Template A has been updated with each change to Template T.
"RTN","TIUFD3",64,0)
 I SUBTEMPL="D" D DSITEMS^TIUFD(.TIUFILIN) S VALMCNT=TIUFILIN ;Update Items to end on Template D.
"RTN","TIUFD3",65,0)
 S VALMBCK="R"
"RTN","TIUFD3",66,0)
EDITX ;
"RTN","TIUFD3",67,0)
 I $D(MSG) W !!,MSG,! H 2
"RTN","TIUFD3",68,0)
 I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFD3",69,0)
 Q
"RTN","TIUFD3",70,0)
 ;
"RTN","TIUFD3",71,0)
EDBOILTX ;Templates D, X Action Edit Boilerplate Text
"RTN","TIUFD3",72,0)
 ; Requires CURRENT arrays TIUFINFO, TIUFNOD0.
"RTN","TIUFD3",73,0)
 ; Requires TIUFBLIN as set in DSBOILTX^TIUFD.
"RTN","TIUFD3",74,0)
 N FILEDA,LINENO,CNTCHNG,TIUFXNOD,MSG,STATUS,DTOUT,DIRUT,DIROUT
"RTN","TIUFD3",75,0)
 S FILEDA=TIUFINFO("FILEDA")
"RTN","TIUFD3",76,0)
 S VALMBCK="R",TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFD3",77,0)
 S STATUS=$$STATWORD^TIUFLF5($P(^TIU(8925.1,FILEDA,0),U,7))
"RTN","TIUFD3",78,0)
 I STATUS'="INACTIVE" W !!,"Entry is not Inactive: Can't edit Boilerplate Text" D PAUSE^TIUFXHLX S VALMBCK="" G EDBOX
"RTN","TIUFD3",79,0)
 I $P(TIUFNOD0,U,10) D  G:$D(MSG) EDBOX
"RTN","TIUFD3",80,0)
 . I '$$PERSOWNS^TIUFLF2(FILEDA,DUZ) S MSG="  Shared Component: Only Owner can Edit Boilerplate Text"
"RTN","TIUFD3",81,0)
 . I '$$CANEDIT^TIUFLF6(FILEDA) S MSG="  Shared Component with parent that isn't Inactive: Can't Edit Boilerplate Text"
"RTN","TIUFD3",82,0)
 . I $D(MSG) W !!,MSG D PAUSE^TIUFXHLX S VALMBCK=""
"RTN","TIUFD3",83,0)
 I TIUFSTMP="X" L +^TIU(8925.1,FILEDA):1 I '$T W !!," Another user is editing this entry.",! H 2 G EDBOX
"RTN","TIUFD3",84,0)
 D EDBOIL^TIUFLD1(FILEDA,TIUFNOD0) G:$D(DTOUT) EDBOX
"RTN","TIUFD3",85,0)
 D DEDBOIL^TIUFLD1(FILEDA) G:$D(DTOUT) EDBOX
"RTN","TIUFD3",86,0)
 D NODE0ARR^TIUFLF(FILEDA,.TIUFNOD0) G:$D(DTOUT) EDBOX
"RTN","TIUFD3",87,0)
 ; Update template D or X:
"RTN","TIUFD3",88,0)
 S LINENO=TIUFBLIN D DSBOILTX^TIUFD(.LINENO) G:$D(DTOUT) EDBOX S VALMCNT=LINENO
"RTN","TIUFD3",89,0)
 I TIUFTMPL="A" D AUPDATE^TIUFLA1(TIUFNOD0,FILEDA,.CNTCHNG) S:CNTCHNG TIUFVCN1=TIUFVCN1-1 ;doesn't match.
"RTN","TIUFD3",90,0)
 I "HC"[TIUFTMPL D LINEUP^TIUFLLM1(.TIUFINFO,TIUFTMPL)
"RTN","TIUFD3",91,0)
EDBOX ;
"RTN","TIUFD3",92,0)
 I TIUFSTMP="X" L -^TIU(8925.1,+$G(FILEDA))
"RTN","TIUFD3",93,0)
 I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFD3",94,0)
 Q
"RTN","TIUFD3",95,0)
 ;
"RTN","TIUFD4")
0^35^B18895783
"RTN","TIUFD4",1,0)
TIUFD4 ; SLC/MAM - LM Template D Actions Edit Technical Fields, Edit Upload. LM Subtemplate DJ Action DELOBJ ;4/17/97  11:02
"RTN","TIUFD4",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFD4",3,0)
 ;
"RTN","TIUFD4",4,0)
DELOBJ ; Template DJ Action Delete (Object).
"RTN","TIUFD4",5,0)
 N FILEDA,MSG,USED,ASKOK,DA,DIK,LINENO
"RTN","TIUFD4",6,0)
 S FILEDA=TIUFINFO("FILEDA"),VALMBCK="R"
"RTN","TIUFD4",7,0)
 I ($L($P(TIUFNOD0,U,5))!$L($P(TIUFNOD0,U,6))),'$$PERSOWNS^TIUFLF2(FILEDA,DUZ) S MSG=" Only an Owner can delete a file entry" W MSG,! D PAUSE^TIUFXHLX  G DELOX
"RTN","TIUFD4",8,0)
 L +^TIU(8925.1,FILEDA):1 I '$T W !!," Another user is editing this entry; Please try later" H 2 G DELOX
"RTN","TIUFD4",9,0)
 S USED=$$OBJUSED^TIUFLJ(FILEDA)
"RTN","TIUFD4",10,0)
 Q:$$CANTDEL^TIUFHA1(FILEDA,USED)
"RTN","TIUFD4",11,0)
 H 1 S ASKOK=$$ASKOK^TIUFHA1(0,0,USED) I 'ASKOK  S MSG=" ... Object not deleted!" W !,MSG,! D PAUSE^TIUFXHLX G DELOX
"RTN","TIUFD4",12,0)
 ; Delete FILEDA as Docmt Def entry in file 8925.1:
"RTN","TIUFD4",13,0)
 S DA=FILEDA,DIK="^TIU(8925.1," D ^DIK
"RTN","TIUFD4",14,0)
 S LINENO=$O(^TMP("TIUF1IDX",$J,"DAF",FILEDA,0))
"RTN","TIUFD4",15,0)
 D UPDATE^TIUFLLM1(TIUFTMPL,-1,LINENO-1) S TIUFVCN1=TIUFVCN1-1
"RTN","TIUFD4",16,0)
 S MSG=" ... Object Deleted!" W !,MSG,! H 1 S VALMBCK="Q"
"RTN","TIUFD4",17,0)
DELOX L -^TIU(8925.1,FILEDA)
"RTN","TIUFD4",18,0)
 I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFD4",19,0)
 Q
"RTN","TIUFD4",20,0)
 ;
"RTN","TIUFD4",21,0)
EDTECH ;LM Template D Action Edit Technical Fields.
"RTN","TIUFD4",22,0)
 ; Requires CURRENT arrays TIUFINFO, TIUFNOD0.
"RTN","TIUFD4",23,0)
 ; Requires TIUFTLIN as set in DSTECH^TIUFD.
"RTN","TIUFD4",24,0)
 N FILEDA,DA,DIE,DR,LINENO,PFILEDA,PNODE61,PCUSTOM,TYPE,STATUS
"RTN","TIUFD4",25,0)
 N DIR,X,Y,TIUFY,TIUFXNOD,TIUFFULL,ICUSTOM,DTOUT,DIRUT,DIROUT
"RTN","TIUFD4",26,0)
 S FILEDA=TIUFINFO("FILEDA"),VALMBCK="",TYPE=$P(TIUFNOD0,U,4),TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFD4",27,0)
 I '$D(^TIU(8925.1,FILEDA,0)) W !!," Can't Edit Technical Fields; File Entry "_FILEDA_" does not exist; See IRM",! D PAUSE^TIUFXHLX S VALMBCK="Q" G EDTEX
"RTN","TIUFD4",28,0)
 S STATUS=$$STATWORD^TIUFLF5($P(TIUFNOD0,U,7)) ;e.g. INACTIVE
"RTN","TIUFD4",29,0)
 I STATUS="NO/BAD" W !!," Can't Edit Technical Fields; No Status/Bad Status",! D PAUSE^TIUFXHLX G EDTEX
"RTN","TIUFD4",30,0)
 I TYPE="O",'$$PERSOWNS^TIUFLF2(FILEDA,DUZ) W !!," Can't edit Technical Fields: Only an Owner can edit Objects",! D PAUSE^TIUFXHLX G EDTEX
"RTN","TIUFD4",31,0)
 I STATUS'="INACTIVE",TYPE'="O",TIUFWHO="N" K DIRUT D  G:$D(DIRUT)!(TIUFY'=1) EDTEX
"RTN","TIUFD4",32,0)
 . S DIR(0)="Y",DIR("A",1)=" Entry is not Inactive.  Do you want to bypass safety measures and edit"
"RTN","TIUFD4",33,0)
 . S DIR("A",2)="Technical Fields even though this may cause errors if e.g. a document is being"
"RTN","TIUFD4",34,0)
 . S DIR("A")="entered on this entry"
"RTN","TIUFD4",35,0)
 . S DIR("B")="NO" D ^DIR S TIUFY=Y K DIR,X,Y
"RTN","TIUFD4",36,0)
 I STATUS'="INACTIVE",TIUFWHO'="N" W !!," Can't edit Technical Fields; Entry is not Inactive",! D PAUSE^TIUFXHLX G EDTEX
"RTN","TIUFD4",37,0)
 L +^TIU(8925.1,FILEDA):1 I '$T W !!," Another user is editing this entry.",! H 2 G EDTEX
"RTN","TIUFD4",38,0)
 S DA=FILEDA,DIE=8925.1
"RTN","TIUFD4",39,0)
 S PFILEDA=+$O(^TIU(8925.1,"AD",FILEDA,0)) I 'PFILEDA S PCUSTOM=0,ICUSTOM="" G DR
"RTN","TIUFD4",40,0)
 ;If FILEDA is Clinical Documents, want to edit 6.14 but not 6.1, 6.12, 6.13:Type=CL so will edit 6.14; PCUSTOM undefined, so skip others:
"RTN","TIUFD4",41,0)
 D INHERIT^TIUFLD(PFILEDA,0,6.14,"","","",.ICUSTOM)
"RTN","TIUFD4",42,0)
 I TYPE="CL"!(TYPE="DC")!(TYPE="DOC") S PNODE61=$G(^TIU(8925.1,PFILEDA,6.1)),PCUSTOM=$P(PNODE61,U,4) I PCUSTOM="" S PCUSTOM=ICUSTOM
"RTN","TIUFD4",43,0)
DR S DR=$S(TYPE="O":9,1:"4.6;4.7;5;6;I '$G(PCUSTOM) S Y=7;6.1;6.12;6.13;7;8;S:TYPE=""DOC"" Y=0 I ICUSTOM=0 S Y=0;6.14") D ^DIE
"RTN","TIUFD4",44,0)
 G:$D(DTOUT) EDTEX
"RTN","TIUFD4",45,0)
 S LINENO=TIUFTLIN
"RTN","TIUFD4",46,0)
 D DSTECH^TIUFD(.LINENO) S VALMCNT=LINENO
"RTN","TIUFD4",47,0)
 G:$D(DTOUT) EDTEX
"RTN","TIUFD4",48,0)
 S VALMBCK="R"
"RTN","TIUFD4",49,0)
EDTEX ;
"RTN","TIUFD4",50,0)
 L -^TIU(8925.1,+$G(FILEDA))
"RTN","TIUFD4",51,0)
 I $D(DTOUT) S VALMBCK="Q" Q
"RTN","TIUFD4",52,0)
 I $G(TIUFFULL) S VALMBCK="R" D RESET^TIUFXHLX
"RTN","TIUFD4",53,0)
 Q
"RTN","TIUFD4",54,0)
 ;
"RTN","TIUFD4",55,0)
EDUPLOAD ;LM Template D Action Edit Upload.
"RTN","TIUFD4",56,0)
 ; Requires CURRENT arrays TIUFINFO, TIUFNOD0.
"RTN","TIUFD4",57,0)
 ; Requires TIUFULIN as set in DSUPLOAD^TIUFD2.
"RTN","TIUFD4",58,0)
 N FILEDA,DA,DIE,DR,LINENO,TIUFXNOD,STATUS,TYPE,DTOUT,DIRUT,DIROUT
"RTN","TIUFD4",59,0)
 S FILEDA=TIUFINFO("FILEDA"),VALMBCK="",TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFD4",60,0)
 I '$D(^TIU(8925.1,FILEDA,0)) W !!," Can't Edit Upload; File Entry "_FILEDA_" does not exist in the file; See IRM",! D PAUSE^TIUFXHLX S VALMBCK="Q" G EDUPX
"RTN","TIUFD4",61,0)
 S STATUS=$$STATWORD^TIUFLF5($P(TIUFNOD0,U,7)),TYPE=$P(TIUFNOD0,U,4)
"RTN","TIUFD4",62,0)
 L +^TIU(8925.1,FILEDA):1 I '$T W !," Another user is editing this entry." H 2 G EDUPX
"RTN","TIUFD4",63,0)
 D FULL^VALM1
"RTN","TIUFD4",64,0)
 N TIUX
"RTN","TIUFD4",65,0)
 S DA=FILEDA,DIE=8925.1
"RTN","TIUFD4",66,0)
 S DR="[TIUF UPLOAD FIELD EDIT]" D ^DIE G:$D(DTOUT) EDUPX
"RTN","TIUFD4",67,0)
 S LINENO=TIUFULIN
"RTN","TIUFD4",68,0)
 D DSUPLOAD^TIUFD1(.LINENO) S VALMCNT=LINENO G:$D(DTOUT) EDUPX
"RTN","TIUFD4",69,0)
 S VALMSG=$$VMSG^TIUFL D RE^VALM4,RESET^TIUFXHLX
"RTN","TIUFD4",70,0)
EDUPX ;
"RTN","TIUFD4",71,0)
 L -^TIU(8925.1,+$G(FILEDA))
"RTN","TIUFD4",72,0)
 I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFD4",73,0)
 Q
"RTN","TIUFD4",74,0)
 ;
"RTN","TIUFH")
0^36^B7300013
"RTN","TIUFH",1,0)
TIUFH ; SLC/MAM - LM Template H (DDEF Hierarchy) INIT ;10/25/95  21:46
"RTN","TIUFH",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFH",3,0)
EN ; -- main entry point for LM Template TIUFH DDEF HIERARCHY
"RTN","TIUFH",4,0)
 ; Requires TIUFWHO, set in options TIUFH EDIT DDEFS CLIN/MGR/NATL.
"RTN","TIUFH",5,0)
 N TIUFTMPL,TIUFVCN1,TIUF,TIUFXNOD,XQORM,DTOUT,DIRUT,DIROUT,DUOUT,TIUFLFT
"RTN","TIUFH",6,0)
 S TIUFTMPL="H"
"RTN","TIUFH",7,0)
 N TIUFPRIV D SETUP^TIUFL S:$D(DTOUT) VALMQUIT=1 G:$G(VALMQUIT) ENX
"RTN","TIUFH",8,0)
 I TIUFWHO="C" D EN^VALM("TIUFH EDIT DDEFS CLIN")
"RTN","TIUFH",9,0)
 I "NM"[TIUFWHO D EN^VALM("TIUFH EDIT DDEFS MGR")
"RTN","TIUFH",10,0)
ENX Q
"RTN","TIUFH",11,0)
 ;
"RTN","TIUFH",12,0)
HDR ; -- header code
"RTN","TIUFH",13,0)
 N HDR
"RTN","TIUFH",14,0)
 S VALMHDR(1)=$$CENTER^TIUFL("BASICS",79)
"RTN","TIUFH",15,0)
 Q
"RTN","TIUFH",16,0)
 ;
"RTN","TIUFH",17,0)
INIT ; -- init variables and list array
"RTN","TIUFH",18,0)
 ; Requires TIUFTMPL.
"RTN","TIUFH",19,0)
 ; Requires TIUFWHO, set in Options TIUF/A/C/H EDIT/SORT/CREATE DDEFS CLIN/MGR/NATL.
"RTN","TIUFH",20,0)
 ; Called by INIT^TIUFC as well as init for TIUFH.
"RTN","TIUFH",21,0)
 K ^TMP("TIUF1",$J),^TMP("TIUF1IDX",$J),^TMP("TIUFB",$J),^TMP("TIUFBIDX",$J)
"RTN","TIUFH",22,0)
 I '$D(TIUFSTMP) D CLEAN^VALM10 ; Clean IF called from active Template.
"RTN","TIUFH",23,0)
 N TIUFERR,EINFO,SPACE,INFO,NODE0,FILEDA,MISSITEM
"RTN","TIUFH",24,0)
 S VALMCNT=0
"RTN","TIUFH",25,0)
 D NINFO^TIUFLLM(1,^TMP("TIUF",$J,"CLINDOC"),.INFO),PARSE^TIUFLLM(.INFO),NODE0ARR^TIUFLF(^TMP("TIUF",$J,"CLINDOC"),.NODE0) G:$D(DTOUT) INITX
"RTN","TIUFH",26,0)
 I NODE0="" W !!," Can't Edit Document Definitions: Clinical Documents does not exist in the",!,"file! See IRM",! D PAUSE^TIUFXHLX S VALMQUIT=1 G INITX
"RTN","TIUFH",27,0)
 D BUFENTRY^TIUFLLM2(.INFO,.NODE0,TIUFTMPL)
"RTN","TIUFH",28,0)
 D UPDATE^TIUFLLM1("H",1,0) S VALMCNT=VALMCNT+1 G:$G(TIUFERR) INITX
"RTN","TIUFH",29,0)
 I TIUFTMPL="C" D CNTRL^VALM10(1,8,^TMP("TIUF",$J,"NMWIDTH"),IOINHI,IOINORM)
"RTN","TIUFH",30,0)
 S EINFO=^TMP("TIUF1IDX",$J,1),FILEDA=$P(EINFO,U,2)
"RTN","TIUFH",31,0)
 D PARSE^TIUFLLM(.EINFO)
"RTN","TIUFH",32,0)
 S MISSITEM=$$MISSITEM^TIUFLF4(FILEDA) I MISSITEM W !!," Can't Edit Docmt Defs: Clinical Documents Has Nonexistent Item "_MISSITEM_"; See IRM",! D PAUSE^TIUFXHLX S VALMQUIT=1 G INITX
"RTN","TIUFH",33,0)
 D EXPAND1^TIUFH1(.EINFO) S VALMCNT=VALMCNT+EINFO("XPDLCNT")
"RTN","TIUFH",34,0)
INITX I $D(DTOUT) S VALMQUIT=1
"RTN","TIUFH",35,0)
 Q
"RTN","TIUFH",36,0)
 ;
"RTN","TIUFH",37,0)
EXIT ; -- exit code for template H
"RTN","TIUFH",38,0)
 K ^TMP("TIUF1",$J),^TMP("TIUFB",$J),^TMP("TIUF1IDX",$J),^TMP("TIUFBIDX",$J),^TMP("TIUF",$J),IOELALL
"RTN","TIUFH",39,0)
 D CLEAN^VALM10
"RTN","TIUFH",40,0)
 Q
"RTN","TIUFH",41,0)
 ;
"RTN","TIUFH1")
0^37^B13907706
"RTN","TIUFH1",1,0)
TIUFH1 ; SLC/MAM - LM Template H (DDEF Hierarchy) Actions Expand/Collapse, Expand to DDEF, EXPAND1(EINFO), COLLAPSE(EINFO) ;10/25/95  21:44
"RTN","TIUFH1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFH1",3,0)
 ;
"RTN","TIUFH1",4,0)
EXPCOLL ; Template A Action Expand/Collapse
"RTN","TIUFH1",5,0)
 N INFO,OXPDLCNT,MISSITEM,FILEDA,MSG,TIUFXNOD,DTOUT,DIRUT,DIROUT
"RTN","TIUFH1",6,0)
 S VALMBCK="R",TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFH1",7,0)
 D EN^VALM2(TIUFXNOD,"SO") I '$O(VALMY(0)) S VALMBCK="" G EXPCX
"RTN","TIUFH1",8,0)
 S INFO=$G(^TMP("TIUF1IDX",$J,$O(VALMY(0)))) I 'INFO W !!," Missing List Manager Data; See IRM",! D PAUSE^TIUFXHLX S VALMBCK="Q" G EXPCX
"RTN","TIUFH1",9,0)
 S FILEDA=$P(INFO,U,2)
"RTN","TIUFH1",10,0)
 D PARSE^TIUFLLM(.INFO) S OXPDLCNT=INFO("XPDLCNT") ;Old XPDLCNT
"RTN","TIUFH1",11,0)
 I OXPDLCNT D COLLAPSE(.INFO) S VALMCNT=VALMCNT-OXPDLCNT G EXPCX
"RTN","TIUFH1",12,0)
 I '$O(^TIU(8925.1,FILEDA,10,0)) S VALMBCK="",MSG=" Entry has no Items to Expand/Collapse" W !!,MSG,! H 1 G EXPCX
"RTN","TIUFH1",13,0)
 S MISSITEM=$$MISSITEM^TIUFLF4(FILEDA) I MISSITEM W !!," Can't Expand/Collapse: File Entry "_FILEDA_" Has Nonexistent Item "_MISSITEM_"; See IRM.",! D PAUSE^TIUFXHLX S VALMBCK="" G EXPCX
"RTN","TIUFH1",14,0)
 D EXPAND1(.INFO)
"RTN","TIUFH1",15,0)
 S VALMCNT=VALMCNT+INFO("XPDLCNT")
"RTN","TIUFH1",16,0)
 I (+INFO+INFO("XPDLCNT"))>(VALMBG+VALM("LINES")-1) S VALMBG=+INFO
"RTN","TIUFH1",17,0)
EXPCX I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFH1",18,0)
 Q
"RTN","TIUFH1",19,0)
 ;
"RTN","TIUFH1",20,0)
EXPDEF ; Template H action Jump to Document Def
"RTN","TIUFH1",21,0)
 ; Assumes Docmt Def except Shared Components have at most 1 parent
"RTN","TIUFH1",22,0)
 N DIC,X,Y,FILEDA,NODE0,ORPHAN,PARENT,MSG,INFO,OXPDLCNT,TIUJ,ENTRYNO
"RTN","TIUFH1",23,0)
 N EINFO,PFILEDA,MISSITEM,TIUFXNOD,MSG1,LINENO,DTOUT,DIRUT,DIROUT
"RTN","TIUFH1",24,0)
 S VALMBCK="R",TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFH1",25,0)
 D FULL^VALM1
"RTN","TIUFH1",26,0)
 S DIC=8925.1,DIC(0)="AEMNQ"
"RTN","TIUFH1",27,0)
ASK K PARENT,Y,MSG D ^DIC I Y=-1 G EXPDX
"RTN","TIUFH1",28,0)
 S FILEDA=+Y,NODE0=^TIU(8925.1,FILEDA,0)
"RTN","TIUFH1",29,0)
 S ORPHAN=$$ORPHAN^TIUFLF4(FILEDA,NODE0,.PARENT)
"RTN","TIUFH1",30,0)
 I $P(NODE0,U,4)="O" S MSG=" Objects are not in the Hierarchy: Use SORT Option"
"RTN","TIUFH1",31,0)
 I $P(NODE0,U,10) S MSG=" Shared Components can occur more than once in the hierarchy; Can't Jump to",MSG1="them.  To find them, use SORT Option.  Edit/View shows their parents."
"RTN","TIUFH1",32,0)
 I ORPHAN="YES" S MSG=" Orphans are not in the Hierarchy: Use SORT Option"
"RTN","TIUFH1",33,0)
 I $D(MSG) W !!,MSG,! W:$D(MSG1) MSG1 K MSG,MSG1 G ASK
"RTN","TIUFH1",34,0)
 S INFO=^TMP("TIUF1IDX",$J,1) D PARSE^TIUFLLM(.INFO) S OXPDLCNT=INFO("XPDLCNT") ;Original XPDLCNT
"RTN","TIUFH1",35,0)
 D COLLAPSE(.INFO) S VALMCNT=VALMCNT-OXPDLCNT
"RTN","TIUFH1",36,0)
 F TIUJ=$O(PARENT(1000),-1):-1:1 D  I MISSITEM G EXPDX
"RTN","TIUFH1",37,0)
 . S ENTRYNO=$O(^TMP("TIUF1IDX",$J,"DAF",PARENT(TIUJ),0))
"RTN","TIUFH1",38,0)
 . S EINFO=^TMP("TIUF1IDX",$J,ENTRYNO)
"RTN","TIUFH1",39,0)
 . D PARSE^TIUFLLM(.EINFO) S PFILEDA=$P(EINFO,U,2)
"RTN","TIUFH1",40,0)
 . S MISSITEM=$$MISSITEM^TIUFLF4(PFILEDA) I MISSITEM W !!," Can't Expand to DDEF: File Entry "_PFILEDA_" Has Nonexistent Item "_MISSITEM_"; See IRM",! D PAUSE^TIUFXHLX Q
"RTN","TIUFH1",41,0)
 . D EXPAND1(.EINFO) S VALMCNT=VALMCNT+EINFO("XPDLCNT")
"RTN","TIUFH1",42,0)
 . Q
"RTN","TIUFH1",43,0)
 S LINENO=$O(^TMP("TIUF1IDX",$J,"DAF",PARENT(0),0))
"RTN","TIUFH1",44,0)
 I LINENO<VALMBG!(LINENO>(VALMBG+VALM("LINES")-1)) S VALMBG=LINENO
"RTN","TIUFH1",45,0)
EXPDX I $D(DTOUT) S VALMBCK="Q" Q
"RTN","TIUFH1",46,0)
 D RESET^TIUFXHLX
"RTN","TIUFH1",47,0)
 Q
"RTN","TIUFH1",48,0)
 ;
"RTN","TIUFH1",49,0)
COLLAPSE(EINFO) ; Collapse ENTRYNO
"RTN","TIUFH1",50,0)
 ; Requires EINFO array, where EINFO = ^TMP("TIUFIDX,$J,ENTRYNO), and
"RTN","TIUFH1",51,0)
 ;where EINFO array is as set in PARSE^TIUFLLM(EINFO).
"RTN","TIUFH1",52,0)
 ; Updates array EINFO; Does NOT update VALMCNT.
"RTN","TIUFH1",53,0)
 I ($D(EINFO)'=11) G COLLX
"RTN","TIUFH1",54,0)
 I 'EINFO("XPDLCNT") G COLLX
"RTN","TIUFH1",55,0)
 D UPDATE^TIUFLLM1("H",-EINFO("XPDLCNT"),+EINFO,.EINFO)
"RTN","TIUFH1",56,0)
COLLX ;
"RTN","TIUFH1",57,0)
 Q
"RTN","TIUFH1",58,0)
 ;
"RTN","TIUFH1",59,0)
EXPAND1(EINFO) ; Set items of List Manager array entry ENTRYNO into
"RTN","TIUFH1",60,0)
 ;LM array (ie., expands entry); Updates Plus in front of ENTRYNO.
"RTN","TIUFH1",61,0)
 ;Updates IN USE Column for entry being expanded.
"RTN","TIUFH1",62,0)
 ; Requires EINFO array, where EINFO = ^TMP("TIUFIDX,$J,ENTRYNO), and
"RTN","TIUFH1",63,0)
 ;where EINFO array is as set in PARSE^TIUFLLM(EINFO).
"RTN","TIUFH1",64,0)
 ; Requires TIUFTMPL.
"RTN","TIUFH1",65,0)
 ; Requires TIUFWHO, set in Options TIUF/A/C/H EDIT/SORT/CREATE DDEFS CLIN/MGR/NATL.
"RTN","TIUFH1",66,0)
 ; Updates array EINFO; Does NOT update VALMCNT.
"RTN","TIUFH1",67,0)
 ; Must check that items exist in file BEFORE calling EXPAND1
"RTN","TIUFH1",68,0)
 N OLDLNO,LINENO
"RTN","TIUFH1",69,0)
 S (OLDLNO,LINENO)=+EINFO
"RTN","TIUFH1",70,0)
 D BUFITEMS^TIUFLT(TIUFTMPL,.EINFO,.LINENO)
"RTN","TIUFH1",71,0)
 G:$D(DTOUT)!(LINENO=OLDLNO) EXPAX ;No items
"RTN","TIUFH1",72,0)
 ; Set Buffer items into LM Template array, update entry being expanded, 
"RTN","TIUFH1",73,0)
 ;including setting IN USE column:
"RTN","TIUFH1",74,0)
 D UPDATE^TIUFLLM1("H",LINENO-OLDLNO,OLDLNO,.EINFO)
"RTN","TIUFH1",75,0)
EXPAX ;
"RTN","TIUFH1",76,0)
 Q
"RTN","TIUFH1",77,0)
 ;
"RTN","TIUFHA")
0^38^B19018049
"RTN","TIUFHA",1,0)
TIUFHA ; SLC/MAM - LM Templates H, A, and C Action Detailed Display, Action Boilerplate Text ;6/5/97 22:57
"RTN","TIUFHA",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFHA",3,0)
 ;
"RTN","TIUFHA",4,0)
EDVIEW ; Templates H, A, C, and J Action Detailed Display if XQORNOD(0)["Detailed; Action Boilerplate Text if XQORNOD(0)["Boil".
"RTN","TIUFHA",5,0)
 ; Requires TIUFTMPL.
"RTN","TIUFHA",6,0)
 ; Requires TIUFWHO, set in Options TIUF/A/C/H/J EDIT/SORT/CREATE CLIN/MGR/NATL.
"RTN","TIUFHA",7,0)
 ; For Detailed Display Sets TIUFSTMP = D 
"RTN","TIUFHA",8,0)
 ; For Boilerplate Text Sets TIUFSTMP = X.
"RTN","TIUFHA",9,0)
 ; Sets TIUFACT where TIUFACT is a letter: C for Clinician, M for Manager, V for View.
"RTN","TIUFHA",10,0)
 ; Sets Array TIUFINFO, Array TIUFNOD0.
"RTN","TIUFHA",11,0)
 N TIUFINFO,TIUFXNOD,TIUFACT,TIUFXSTA,TIUFXBT,DTOUT,DIRUT,DIROUT,DUOUT
"RTN","TIUFHA",12,0)
 N TIUFNOD0,TIUFVCN1,TIUFSTMP,QUIT,TIUFERR,OLDSNO,EXPAND,TIUFBG1
"RTN","TIUFHA",13,0)
 N USROWNS,TIUFBLIN,TIUFILIN,TIUFTLIN,TIUFRLIN,TIUFULIN,TIUFPLIN,TIUFELIN
"RTN","TIUFHA",14,0)
 N NOPTYPE,TIUFIXED,MISSITEM,MSG,SHARED,FILEDA
"RTN","TIUFHA",15,0)
 N TIUPRM0,TIUPRM1,PFILEDA ;Set by [TIUF UPLOAD FIELD EDIT]
"RTN","TIUFHA",16,0)
 S VALMBCK="",TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFHA",17,0)
 D EN^VALM2(TIUFXNOD,"SO") G:'$O(VALMY(0)) EDVIX  S TIUFINFO=$G(^TMP("TIUF1IDX",$J,$O(VALMY(0)))) I 'TIUFINFO W !!," Missing List Manager Data; See IRM",! D PAUSE^TIUFXHLX S VALMBCK="Q" G EDVIX
"RTN","TIUFHA",18,0)
 S FILEDA=$P(TIUFINFO,U,2),MISSITEM=$$MISSITEM^TIUFLF4(FILEDA) I MISSITEM W !!," Sorry; File Entry "_FILEDA_" has Nonexistent Item "_MISSITEM_"; See IRM.",! D PAUSE^TIUFXHLX S VALMBCK="" G EDVIX
"RTN","TIUFHA",19,0)
 D PARSE^TIUFLLM(.TIUFINFO)
"RTN","TIUFHA",20,0)
 D NODE0ARR^TIUFLF(TIUFINFO("FILEDA"),.TIUFNOD0) G:$D(DTOUT) EDVIX
"RTN","TIUFHA",21,0)
 I TIUFXNOD["Detailed" S TIUFSTMP="D"
"RTN","TIUFHA",22,0)
 I TIUFXNOD["Boil" S TIUFSTMP="X"
"RTN","TIUFHA",23,0)
 I TIUFSTMP="X",TIUFNOD0("TYPE")'="TITLE",TIUFNOD0("TYPE")'="COMPONENT" W !!," Only Titles and Components have Boilerplate Text",! D PAUSE^TIUFXHLX S VALMBCK="" G EDVIX
"RTN","TIUFHA",24,0)
 S SHARED=$P(TIUFNOD0,U,10),TIUFACT=TIUFWHO
"RTN","TIUFHA",25,0)
 S PFILEDA="",NOPTYPE=0
"RTN","TIUFHA",26,0)
 F  S PFILEDA=$O(^TIU(8925.1,"AD",TIUFINFO("FILEDA"),PFILEDA)) Q:'PFILEDA  D  Q:NOPTYPE
"RTN","TIUFHA",27,0)
 . I $P(^TIU(8925.1,PFILEDA,0),U,4)="" S NOPTYPE=1
"RTN","TIUFHA",28,0)
 I $P(TIUFNOD0,U,13),TIUFWHO'="N" S MSG=" Entry is National; Limited Actions"
"RTN","TIUFHA",29,0)
 S USROWNS=$$PERSOWNS^TIUFLF2(TIUFINFO("FILEDA"),DUZ)
"RTN","TIUFHA",30,0)
 I TIUFSTMP="X" S TIUFXSTA=TIUFNOD0("STATUS"),TIUFXBT=TIUFNOD0("BOILPT")
"RTN","TIUFHA",31,0)
 D
"RTN","TIUFHA",32,0)
 . I TIUFWHO="C",TIUFNOD0("TYPE")="OBJECT" S TIUFACT="V" S:TIUFTMPL'="J" MSG=" Object; View Only" Q
"RTN","TIUFHA",33,0)
 . I TIUFWHO="C",USROWNS="" S TIUFACT="V",MSG=" Entry has no Owner; View Only" Q
"RTN","TIUFHA",34,0)
 . I TIUFWHO="C",SHARED S TIUFACT="V",MSG=" Entry is Shared Component; View Only" Q
"RTN","TIUFHA",35,0)
 . I TIUFWHO="C",USROWNS=0 S TIUFACT="V",MSG=" Non-Owner; View Only" Q
"RTN","TIUFHA",36,0)
 . I SHARED,USROWNS=0 S TIUFACT="V",MSG="Shared Components can be edited only by the Owner; View Only" Q
"RTN","TIUFHA",37,0)
 . I SHARED,TIUFTMPL'="A" S TIUFACT="V",MSG="Shared Components can be edited only through the SORT option; View Only" Q
"RTN","TIUFHA",38,0)
 I $D(MSG) W !!,MSG,! D PAUSE^TIUFXHLX G:$D(DUOUT)!$D(DTOUT) EDVIX
"RTN","TIUFHA",39,0)
 ; If entry is expanded, collapse entry and reexpand to items only when return.  Too hard to update otherwise.
"RTN","TIUFHA",40,0)
 S EXPAND=TIUFINFO("XPDLCNT")
"RTN","TIUFHA",41,0)
 I "HC"[TIUFTMPL,EXPAND D COLLAPSE^TIUFH1(.TIUFINFO) S VALMCNT=VALMCNT-EXPAND
"RTN","TIUFHA",42,0)
 S TIUFVCN1=VALMCNT,TIUFBG1=VALMBG,TIUFIXED=VALM("FIXED")
"RTN","TIUFHA",43,0)
 N TIUFREDO,TIUREC
"RTN","TIUFHA",44,0)
 S TIUFREDO=0
"RTN","TIUFHA",45,0)
 I TIUFXNOD["Detailed" D
"RTN","TIUFHA",46,0)
 . I $P(TIUFNOD0,U,4)'="O" D EN^VALM("TIUFD DISPLAY CLIN"):(TIUFACT="C"),EN^VALM("TIUFD DISPLAY MGR"):("NM"[TIUFACT),EN^VALM("TIUFD DISPLAY VIEW"):TIUFACT="V" Q
"RTN","TIUFHA",47,0)
 . D EN^VALM("TIUFDJ DISPLAY OBJECT MGR"):("NM"[TIUFACT),EN^VALM("TIUFD DISPLAY VIEW"):TIUFACT="V"
"RTN","TIUFHA",48,0)
 I TIUFXNOD["Boil" D EN^VALM("TIUFX BOILERPLATE TEXT"):("NMC"[TIUFACT),EN^VALM("TIUFX BOILERPLATE TEXT VIEW"):(TIUFACT="V")
"RTN","TIUFHA",49,0)
 S VALMCNT=TIUFVCN1,VALMBG=TIUFBG1
"RTN","TIUFHA",50,0)
 K ^TMP("TIUFEMBED",$J)
"RTN","TIUFHA",51,0)
 I TIUFTMPL="H" D
"RTN","TIUFHA",52,0)
 . S TIUREC=^TMP("TIUF1",$J,+TIUFINFO,0)
"RTN","TIUFHA",53,0)
 . S TIUREC=$$PLUSUP^TIUFLLM(.TIUFINFO,TIUREC)
"RTN","TIUFHA",54,0)
 . S ^TMP("TIUF1",$J,+TIUFINFO,0)=TIUREC
"RTN","TIUFHA",55,0)
 . Q
"RTN","TIUFHA",56,0)
 I "HC"[TIUFTMPL,EXPAND D EXPAND1^TIUFH1(.TIUFINFO) S VALMCNT=VALMCNT+$P(TIUFINFO,U,3)
"RTN","TIUFHA",57,0)
 ; Templates A,J have been updated with each change to Template D(J); just redisplay.
"RTN","TIUFHA",58,0)
 I TIUFTMPL="A" D
"RTN","TIUFHA",59,0)
 . I VALMLFT=81!(VALMLFT=113) D CHGCAP^VALM("NAME1","Name                                Type")
"RTN","TIUFHA",60,0)
 . I VALM("FIXED")=20 D CHGCAP^VALM("NAME1","Name    Type")
"RTN","TIUFHA",61,0)
 I TIUFTMPL="A"!(TIUFTMPL="J"),TIUFREDO D INIT^TIUFA
"RTN","TIUFHA",62,0)
 S VALMBCK="R"
"RTN","TIUFHA",63,0)
EDVIX I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFHA",64,0)
 Q
"RTN","TIUFHA",65,0)
 ;
"RTN","TIUFHA",66,0)
EXIT ; -- exit code for LM Template D, X
"RTN","TIUFHA",67,0)
 K ^TMP("TIUF3",$J),^TMP("TIUFB",$J),^TMP("TIUF3IDX",$J),^TMP("TIUFBIDX",$J)
"RTN","TIUFHA",68,0)
 Q
"RTN","TIUFHA1")
0^39^B34214053
"RTN","TIUFHA1",1,0)
TIUFHA1 ; SLC/MAM - LM Templates H and A Action Delete. CANTDEL(FILEDA,USED), ASKOK(OLDLNO,IFLAG,USED) ;4/28/97  23:41
"RTN","TIUFHA1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFHA1",3,0)
 ;
"RTN","TIUFHA1",4,0)
DELETE ; Templates H and A Action Delete Entries
"RTN","TIUFHA1",5,0)
 ; Requires TIUFTMPL.
"RTN","TIUFHA1",6,0)
 ; Requires TIUFWHO, set in Options TIUF/A/C/H EDIT/SORT/CREATE DDEFS CLIN/MGR/NATL.
"RTN","TIUFHA1",7,0)
 ; Not on Clinician menu: don't worry about TIUFWHO="C".
"RTN","TIUFHA1",8,0)
 N OLDLNO,TIUFDA,FILEDA,USED,IFLAG,PFILEDA,SHARED,ANCQUIT,MSG1
"RTN","TIUFHA1",9,0)
 N ASKOK,ITEMDA,LINENO,INFO,PINFO,MSG,TIUFXNOD,TIUI,ANCESTOR,NODE0,NATL
"RTN","TIUFHA1",10,0)
 N DTOUT,DIRUT,DIROUT
"RTN","TIUFHA1",11,0)
 S VALMBCK="",TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFHA1",12,0)
 D EN^VALM2(TIUFXNOD,"O")
"RTN","TIUFHA1",13,0)
 I '$O(VALMY(0)) G DELEX
"RTN","TIUFHA1",14,0)
 S OLDLNO=0
"RTN","TIUFHA1",15,0)
 F  S OLDLNO=$O(VALMY(OLDLNO)) Q:'OLDLNO  D
"RTN","TIUFHA1",16,0)
 . S TIUFDA(OLDLNO)=$P(^TMP("TIUF1IDX",$J,OLDLNO),U,2)
"RTN","TIUFHA1",17,0)
 . Q
"RTN","TIUFHA1",18,0)
 S OLDLNO=0 K DIRUT
"RTN","TIUFHA1",19,0)
 F  S OLDLNO=$O(TIUFDA(OLDLNO)) Q:'OLDLNO!$D(DIRUT)  D  L -^TIU(8925.1,+$G(FILEDA))
"RTN","TIUFHA1",20,0)
 . S MSG=" Processing Entry "_OLDLNO_"..." W !!,MSG
"RTN","TIUFHA1",21,0)
 . S FILEDA=TIUFDA(OLDLNO)
"RTN","TIUFHA1",22,0)
 . I $G(TIUFCDA) D  Q:$G(ANCQUIT)
"RTN","TIUFHA1",23,0)
 . . D ANCESTOR^TIUFLF4(TIUFCDA,^TIU(8925.1,TIUFCDA,0),.ANCESTOR) S ANCQUIT=0
"RTN","TIUFHA1",24,0)
 . . F TIUI=0:1 Q:'$G(ANCESTOR(TIUI))  I FILEDA=ANCESTOR(TIUI) D  Q
"RTN","TIUFHA1",25,0)
 . . . S ANCQUIT=1
"RTN","TIUFHA1",26,0)
 . . . I TIUI=0 S MSG=" This is your Current Position in the Hierarchy; Can't delete" W !!,MSG,! D PAUSE^TIUFXHLX Q
"RTN","TIUFHA1",27,0)
 . . . S MSG=" This entry is ABOVE your Current Position in the Hierarchy; Can't delete" W !!,MSG,! D PAUSE^TIUFXHLX
"RTN","TIUFHA1",28,0)
 . S NODE0=^TIU(8925.1,FILEDA,0),NATL=$P(NODE0,U,13),SHARED=$P(NODE0,U,10)
"RTN","TIUFHA1",29,0)
 . I SHARED S MSG=" Shared Components cannot be deleted; if they do not have multiple parents,",MSG1="they can be edited to NOT SHARED and then deleted" W !!,MSG,!,MSG1 D PAUSE^TIUFXHLX Q
"RTN","TIUFHA1",30,0)
 . I $P(^TIU(8925.1,FILEDA,0),U,13) S MSG=" National Entry; Can't delete" W MSG,! D PAUSE^TIUFXHLX Q
"RTN","TIUFHA1",31,0)
 . I $P(NODE0,U,4)="O" W !,"To delete an Object, please select action Detailed Display.",! D PAUSE^TIUFXHLX Q
"RTN","TIUFHA1",32,0)
 . I ($L($P(NODE0,U,5))!$L($P(NODE0,U,6))),'$$PERSOWNS^TIUFLF2(FILEDA,DUZ) S MSG=" Only an Owner can delete a file entry" W MSG,! D PAUSE^TIUFXHLX Q
"RTN","TIUFHA1",33,0)
 . L +^TIU(8925.1,FILEDA):1 I '$T W !!," Another user is editing this entry; Please try later" H 2 Q
"RTN","TIUFHA1",34,0)
 . S USED=$S($P(NODE0,U,4)="O":$$OBJUSED^TIUFLJ(FILEDA),1:$$DDEFUSED^TIUFLF(FILEDA))
"RTN","TIUFHA1",35,0)
 . Q:$$CANTDEL(FILEDA,USED)
"RTN","TIUFHA1",36,0)
 . S IFLAG=+$O(^TIU(8925.1,"AD",FILEDA,0))
"RTN","TIUFHA1",37,0)
 . I TIUFTMPL="A",IFLAG D  D PAUSE^TIUFXHLX
"RTN","TIUFHA1",38,0)
 . . H 1 W !!,"  Entry "_OLDLNO_" has Parent:"
"RTN","TIUFHA1",39,0)
 . . S PFILEDA=0 F  D  Q:'PFILEDA
"RTN","TIUFHA1",40,0)
 . . . S PFILEDA=$O(^TIU(8925.1,"AD",FILEDA,PFILEDA)) Q:'PFILEDA
"RTN","TIUFHA1",41,0)
 . . . W !?5,$P(^TIU(8925.1,PFILEDA,0),U)
"RTN","TIUFHA1",42,0)
 . . . Q
"RTN","TIUFHA1",43,0)
 . . Q
"RTN","TIUFHA1",44,0)
 . H 1 S ASKOK=$$ASKOK(OLDLNO,IFLAG,USED) I 'ASKOK  S MSG=" ... Entry "_OLDLNO_" not deleted!" W MSG,! D PAUSE^TIUFXHLX Q
"RTN","TIUFHA1",45,0)
 . I 'IFLAG G DELENTY
"RTN","TIUFHA1",46,0)
 . ; If FILEDA is used as an item, delete it as an item:
"RTN","TIUFHA1",47,0)
 . N DA,DIK
"RTN","TIUFHA1",48,0)
 . S PFILEDA=$O(^TIU(8925.1,"AD",FILEDA,0)) Q:'PFILEDA
"RTN","TIUFHA1",49,0)
 . S ITEMDA=$O(^TIU(8925.1,"AD",FILEDA,PFILEDA,0)) Q:'ITEMDA
"RTN","TIUFHA1",50,0)
 . I TIUFTMPL="A",$E(TIUFATTR)="P" S TIUFREDO=1
"RTN","TIUFHA1",51,0)
 . S DA(1)=PFILEDA,DA=ITEMDA,DIK="^TIU(8925.1,DA(1),10," D ^DIK
"RTN","TIUFHA1",52,0)
DELENTY . ; Delete FILEDA as Docmt Def entry in file 8925.1:
"RTN","TIUFHA1",53,0)
 . N DA,DIK
"RTN","TIUFHA1",54,0)
 . I TIUFTMPL="A",$E(TIUFATTR)="P" S TIUFREDO=1 ;Delete affects parentage globally.
"RTN","TIUFHA1",55,0)
 . S DA=FILEDA,DIK="^TIU(8925.1," D ^DIK
"RTN","TIUFHA1",56,0)
 . S LINENO=$O(^TMP("TIUF1IDX",$J,"DAF",FILEDA,0))
"RTN","TIUFHA1",57,0)
 . G:'LINENO MSG ; not there since parent was already deleted
"RTN","TIUFHA1",58,0)
 . I "AJ"[TIUFTMPL D  G MSG
"RTN","TIUFHA1",59,0)
 . . I '$G(TIUFREDO) D UPDATE^TIUFLLM1(TIUFTMPL,-1,LINENO-1) S VALMCNT=VALMCNT-1
"RTN","TIUFHA1",60,0)
 . ; Update LM Template H: collapse and then delete FILEDA's LINENO.
"RTN","TIUFHA1",61,0)
 . S INFO=^TMP("TIUF1IDX",$J,LINENO) D PARSE^TIUFLLM(.INFO)
"RTN","TIUFHA1",62,0)
 . I INFO("XPDLCNT") S VALMCNT=VALMCNT-INFO("XPDLCNT") D COLLAPSE^TIUFH1(.INFO)
"RTN","TIUFHA1",63,0)
 . S PINFO=^TMP("TIUF1IDX",$J,INFO("PLINENO")) D PARSE^TIUFLLM(.PINFO)
"RTN","TIUFHA1",64,0)
 . D UPDATE^TIUFLLM1("H",-1,LINENO-1,.PINFO) S VALMCNT=VALMCNT-1
"RTN","TIUFHA1",65,0)
MSG . S MSG=" ... Entry "_OLDLNO_" Deleted!" W MSG,! H 1 S VALMBCK="R"
"RTN","TIUFHA1",66,0)
 . Q
"RTN","TIUFHA1",67,0)
 I TIUFTMPL="C" K TIUFCMSG D
"RTN","TIUFHA1",68,0)
 . S TIUFCMSG(1)=" Select "_$S(TIUFCTYP="DC":"TITLE",1:"CLASS/DOCUMENTCLASS")_" to create a new "_TIUFCNM
"RTN","TIUFHA1",69,0)
 . S TIUFCMSG(2)="or to Go Down a Level, Select NEXT LEVEL."
"RTN","TIUFHA1",70,0)
 . I VALMCNT>VALM("LINES") S TIUFCMSG(2)="or to Go Down a Level, Screen to (+/-) Desired ",TIUFCMSG(3)=TIUFCNM_" Item, and Select NEXT LEVEL."
"RTN","TIUFHA1",71,0)
DELEX I $D(DTOUT) S VALMBCK="Q" Q
"RTN","TIUFHA1",72,0)
 I "AJ"[TIUFTMPL,VALMBCK="R",TIUFREDO D INIT^TIUFA S:$D(DTOUT) VALMBCK="Q"
"RTN","TIUFHA1",73,0)
 Q
"RTN","TIUFHA1",74,0)
 ;
"RTN","TIUFHA1",75,0)
ASKOK(OLDLNO,IFLAG,USED) ; Function warns user, asks if OK to continue delete. 1/OK; 0/not OK
"RTN","TIUFHA1",76,0)
 N DIR,X,Y,ANS
"RTN","TIUFHA1",77,0)
 S ANS=0
"RTN","TIUFHA1",78,0)
 I USED=0 S DIR("A")="Object has not been embedded in Boilerplate Text.  Delete" G ASKOX
"RTN","TIUFHA1",79,0)
 S DIR("A",1)="Entry "_OLDLNO_" is not presently used by any documents.  If entry is deleted,"
"RTN","TIUFHA1",80,0)
 I IFLAG S DIR("A",2)="any items UNDER it will be Orphans.  I will delete entry as an item under its",DIR("A")="parent AND as a Document Definition.  It will no longer exist. OK"
"RTN","TIUFHA1",81,0)
 E  S DIR("A",2)="any items UNDER it will be Orphans.  I will delete entry as a Document",DIR("A")="Definition.  It will no longer exist. OK"
"RTN","TIUFHA1",82,0)
ASKOX S DIR(0)="Y",DIR("B")="NO" D ^DIR S ANS=Y
"RTN","TIUFHA1",83,0)
 Q ANS
"RTN","TIUFHA1",84,0)
 ;
"RTN","TIUFHA1",85,0)
CANTDEL(FILEDA,USED) ; Function returns 1 if FILEDA can't be deleted, else 0.
"RTN","TIUFHA1",86,0)
 N ANS,MSG
"RTN","TIUFHA1",87,0)
 S ANS=0
"RTN","TIUFHA1",88,0)
 I '$D(^TIU(8925.1,"AS",+^TMP("TIUF",$J,"STATI"),FILEDA)),$P(^TIU(8925.1,FILEDA,0),U,7) D  G CANTX
"RTN","TIUFHA1",89,0)
 . S MSG=" Status not INACTIVE; Can't Delete" W MSG,! D PAUSE^TIUFXHLX
"RTN","TIUFHA1",90,0)
 . S ANS=1
"RTN","TIUFHA1",91,0)
 I USED="YES" S MSG="Entry In Use by documents; Can't delete" W MSG,! D PAUSE^TIUFXHLX S ANS=1 G CANTX
"RTN","TIUFHA1",92,0)
 I USED S MSG="Object embedded in boilerplate text; Can't delete" W !,MSG,! D PAUSE^TIUFXHLX S ANS=1 G CANTX
"RTN","TIUFHA1",93,0)
 I $D(^USR(8930.1,"B",FILEDA)) S MSG=" Entry has Authorizations/Subscriptions; Can't delete." W !!,MSG,! D PAUSE^TIUFXHLX S ANS=1 G CANTX
"RTN","TIUFHA1",94,0)
CANTX Q ANS
"RTN","TIUFHA1",95,0)
 ;
"RTN","TIUFHA2")
0^40^B39396929
"RTN","TIUFHA2",1,0)
TIUFHA2 ; SLC/MAM - LM Templates A and H Action Copy Entry ;4/17/97  14:02
"RTN","TIUFHA2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFHA2",3,0)
 ;
"RTN","TIUFHA2",4,0)
WHICHDC ; Prompts for DC to add copy to, asks about activating copy.
"RTN","TIUFHA2",5,0)
 ;Requires vars from COPYENTY.
"RTN","TIUFHA2",6,0)
 ;Sets NPFILEDA to DC or 0 if none chosen
"RTN","TIUFHA2",7,0)
 N X,Y,GPFILEDA,DIC,DIR
"RTN","TIUFHA2",8,0)
 D FULL^VALM1 ;displays list before does XE Help, so must full here
"RTN","TIUFHA2",9,0)
 S GPFILEDA=+$O(^TIU(8925.1,"AD",PFILEDA,0))
"RTN","TIUFHA2",10,0)
 W !!,"NOTE: If you wish, you can add the copy to the same Document Class the original",!,"is in, or to any other Document Class under the same parent Class (except CWAD",!,"Document Classes).",!
"RTN","TIUFHA2",11,0)
 S DIC("A")="Add Copy to which Document Class: ",DIC=8925.1,DIC(0)="AEQ"
"RTN","TIUFHA2",12,0)
 S DIC("S")="I $P(^(0),U,4)=""DC""&($P(^(0),U,14)="""")&$D(^TIU(8925.1,""AD"",Y,"_GPFILEDA_"))"
"RTN","TIUFHA2",13,0)
 D ^DIC S NPFILEDA=$S(Y>0:+Y,1:0)
"RTN","TIUFHA2",14,0)
 I Y=-1 W !!,"Copy not added to any Document Class; Copy left in file as an orphan.  Use",!,"action Items and the Document Class to add Copy to a Document Class.",! D PAUSE^TIUFXHLX Q
"RTN","TIUFHA2",15,0)
 I NPFILEDA'=PFILEDA,$P(NODE0,U,7)=+^TMP("TIUF",$J,"STATA"),$P(^TIU(8925.1,NPFILEDA,0),U,7)=$P(NODE0,U,7),'$P(NODE0,U,13) D  D:'$D(DIRUT) PAUSE^TIUFXHLX
"RTN","TIUFHA2",16,0)
 . W !!,"WARNING: Since the Copy is in a new Document Class, it now inherits from a"
"RTN","TIUFHA2",17,0)
 . W !,"different parent, and its behavior may differ from the old Title.  Please do not"
"RTN","TIUFHA2",18,0)
 . W !,"activate the Copy until you are sure its behavior is correct, including Business"
"RTN","TIUFHA2",19,0)
 . W !,"Rule behavior.",!
"RTN","TIUFHA2",20,0)
 . S DIR("A")="Activate the Copy and inactivate the old Title"
"RTN","TIUFHA2",21,0)
 . S DIR(0)="Y",DIR("B")="NO"
"RTN","TIUFHA2",22,0)
 . S DIR("?")="^D COPY^TIUFXHL1"
"RTN","TIUFHA2",23,0)
 . K DA D ^DIR I Y=0!$D(DIRUT) W "  ...Statuses unchanged",! Q
"RTN","TIUFHA2",24,0)
 . D AUTOSTAT^TIUFLF6(CFILEDA,CNODE0,"ACTIVE"),AUTOSTAT^TIUFLF6(FILEDA,NODE0,"INACTIVE") W !!,"Copy activated, old Title inactivated",!
"RTN","TIUFHA2",25,0)
 . D LINEUP^TIUFLLM1(.INFO,"H") ;update status of old entry
"RTN","TIUFHA2",26,0)
 Q
"RTN","TIUFHA2",27,0)
 ;
"RTN","TIUFHA2",28,0)
WHICHTL ; Prompts for TL/CO to add copy to.
"RTN","TIUFHA2",29,0)
 ;Requires vars from COPYENTY.
"RTN","TIUFHA2",30,0)
 ;Sets NPLINENO to TL/CO lineno or 0 if none chosen
"RTN","TIUFHA2",31,0)
 N X,Y,DIC
"RTN","TIUFHA2",32,0)
 D FULL^VALM1 ;displays list before does XE Help, so must full here
"RTN","TIUFHA2",33,0)
 W !!,"NOTE:  If you wish, you can add the copy to a Title, (or to a Component as a",!,"subcomponent).  The Title/Component must be inactive, must NOT be National, and"
"RTN","TIUFHA2",34,0)
 W !,"must be found in the current display.",!
"RTN","TIUFHA2",35,0)
 S DIC("A")="Add Copy to which Title or Component: ",DIC=8925.1,DIC(0)="AEQ"
"RTN","TIUFHA2",36,0)
 S DIC("S")="I $P(^(0),U,4)=""DOC""!($P(^(0),U,4)=""CO"")&'$P(^(0),U,13)&'$P(^(0),U,10)&($P(^(0),U,7)=+^TMP(""TIUF"",$J,""STATI""))&$O(^TMP(""TIUF1IDX"",$J,""DAF"",Y,0))"
"RTN","TIUFHA2",37,0)
 D ^DIC S NPFILEDA=$S(Y>0:+Y,1:0)
"RTN","TIUFHA2",38,0)
 I Y=-1 W !!,"Copy not added to any Title/Component; Copy left in file as an orphan.  Use",!,"action Items and the Title/Component to add Copy to a Title/Component.  Title/",!,"Component must be INACTIVE.",! D PAUSE^TIUFXHLX
"RTN","TIUFHA2",39,0)
 Q
"RTN","TIUFHA2",40,0)
 ;
"RTN","TIUFHA2",41,0)
COPYENTY ; Templates H and A Action Copy Entry.
"RTN","TIUFHA2",42,0)
 ; Copy entry FILEDA of type DOC or CO, creating entry CFILEDA identical 
"RTN","TIUFHA2",43,0)
 ;except:
"RTN","TIUFHA2",44,0)
 ; User selects name for CFILEDA;
"RTN","TIUFHA2",45,0)
 ; If entry is Object, doesn't copy (or stuff) abbreviation or printname.
"RTN","TIUFHA2",46,0)
 ; CFILEDA is created with: status Inactive, Natl 0, and is NonSHARED.
"RTN","TIUFHA2",47,0)
 ;(CFILEDA can later be edited to SHARED if desired.)
"RTN","TIUFHA2",48,0)
 ;  If FILEDA has items, items as well as FILEDA are copied into new file
"RTN","TIUFHA2",49,0)
 ;entries and item COPIES are used for CFILEDA items. Exception: If
"RTN","TIUFHA2",50,0)
 ;FILEDA is NonSHARED but has SHARED descendants, the descendants
"RTN","TIUFHA2",51,0)
 ;are reused, not copied, in CFILEDA.
"RTN","TIUFHA2",52,0)
 ; NOTE: If FILEDA has blank fields, they are copied blank, not as
"RTN","TIUFHA2",53,0)
 ;inherited.
"RTN","TIUFHA2",54,0)
 ; If copy is done from Edit Option, original is Title, original is NOT a
"RTN","TIUFHA2",55,0)
 ;CWAD Title, then user can select which DC to add the copy to.  If
"RTN","TIUFHA2",56,0)
 ;original is active Title and new DC is active, then user can choose
"RTN","TIUFHA2",57,0)
 ;to activate copy and deactivate the original.
"RTN","TIUFHA2",58,0)
 ; If copy is done from Edit Option, original is CO, then user can select
"RTN","TIUFHA2",59,0)
 ;which TL or CO to add the copy to. TL/CO must be inactive, not Natl,
"RTN","TIUFHA2",60,0)
 ;and must be present in the display (tho not the current screen).
"RTN","TIUFHA2",61,0)
 ; If copy is done from Sort option, copy is not added to any parent.
"RTN","TIUFHA2",62,0)
 ; Updates Template A if started there.
"RTN","TIUFHA2",63,0)
 ; Returns TIUFERR=1 if couldn't complete process.
"RTN","TIUFHA2",64,0)
 ; Requires TIUFTMPL.
"RTN","TIUFHA2",65,0)
 ; Requires TIUFWHO, set in Options TIUF/A/C/H EDIT/SORT/CREATE DDEFS CLIN/MGR/NATL.
"RTN","TIUFHA2",66,0)
 N INFO,FILEDA,NODE0,CFILEDA,PLINENO,PINFO,PFILEDA,EXPAND
"RTN","TIUFHA2",67,0)
 N MSG,TIUFXNOD,TIUFSHAR,LINENO,PNODE0,TIUFFULL
"RTN","TIUFHA2",68,0)
 N DTOUT,DIRUT,DIROUT,DUOUT,CNODE0,NPLINENO,NPFILEDA,NPINFO
"RTN","TIUFHA2",69,0)
 N TYPE,CLINENO,NLINENO,PNODE0
"RTN","TIUFHA2",70,0)
 S VALMBCK="",TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFHA2",71,0)
 I $G(TIUFTMPL)=""!($G(TIUFWHO)="") G COPYX
"RTN","TIUFHA2",72,0)
 S VALM("ENTITY")="Entry to Copy"
"RTN","TIUFHA2",73,0)
 D EN^VALM2(TIUFXNOD,"SO") G:'$O(VALMY(0)) COPYX S INFO=$G(^TMP("TIUF1IDX",$J,$O(VALMY(0)))) I 'INFO W !!," Missing List Manager Data; See IRM",! D PAUSE^TIUFXHLX S VALMBCK="Q" G COPYX
"RTN","TIUFHA2",74,0)
 S VALM("ENTITY")="Entry"
"RTN","TIUFHA2",75,0)
 S FILEDA=$P(INFO,U,2),NODE0=^TIU(8925.1,FILEDA,0),TIUFSHAR=+$P(NODE0,U,10),LINENO=+INFO
"RTN","TIUFHA2",76,0)
 I $P(NODE0,U,4)="CL"!($P(NODE0,U,4)="DC") S MSG=" Can't copy Classes, including Document Classes" W !!,MSG,! D PAUSE^TIUFXHLX G COPYX
"RTN","TIUFHA2",77,0)
 S PLINENO=+$P(INFO,U,5),PINFO=$G(^TMP("TIUF1IDX",$J,PLINENO)),PFILEDA=+$P(PINFO,U,2),PNODE0=$G(^TIU(8925.1,PFILEDA,0))
"RTN","TIUFHA2",78,0)
 N TIUFCK,TIUFDCK D CHECK^TIUFLF3(FILEDA,PFILEDA) G:$D(DTOUT) COPYX K TIUFCK("ORPHAN") I $D(TIUFCK)>9!('$G(TIUFDCK)) W !!,"Can't copy bad entries.  Please TRY entry and correct any problems before",!,"copying it.",! D PAUSE^TIUFXHLX G COPYX
"RTN","TIUFHA2",79,0)
 S VALMBCK="R" K DIRUT
"RTN","TIUFHA2",80,0)
 D COPYFDA^TIUFHA5(FILEDA,0,PFILEDA,.CFILEDA,.CNODE0,.VALMCNT)
"RTN","TIUFHA2",81,0)
 S TYPE=$P(NODE0,U,4) S:TYPE="DOC" TYPE="TL" S TYPE=$G(^TMP("TIUF",$J,"TYPE"_TYPE))
"RTN","TIUFHA2",82,0)
 D  D:'$D(DTOUT) PAUSE^TIUFXHLX G:'CFILEDA COPYX
"RTN","TIUFHA2",83,0)
 . I 'CFILEDA W !!,"Not copied" Q
"RTN","TIUFHA2",84,0)
 . I $D(DIRUT) W !!,"Copy deleted" S CFILEDA=0 Q  ;deleted in CP10^TIUFHA5
"RTN","TIUFHA2",85,0)
 . W !!,TYPE_" copied into File Entry #"_CFILEDA
"RTN","TIUFHA2",86,0)
 I $P(NODE0,U,4)="O" G VALMBG
"RTN","TIUFHA2",87,0)
 I (TIUFTMPL'="H")!(($P(NODE0,U,4)="DOC")&($P(PNODE0,U,14)'="")) S NPFILEDA=PFILEDA,NPINFO=PINFO G COLL
"RTN","TIUFHA2",88,0)
 I $P(NODE0,U,4)="CO" D WHICHTL G:'NPFILEDA COPYX
"RTN","TIUFHA2",89,0)
 I $P(NODE0,U,4)="DOC" D WHICHDC G:'NPFILEDA COPYX
"RTN","TIUFHA2",90,0)
 S NPLINENO=$O(^TMP("TIUF1IDX",$J,"DAF",NPFILEDA,0))
"RTN","TIUFHA2",91,0)
 S NPINFO=$G(^TMP("TIUF1IDX",$J,+NPLINENO)) I 'NPINFO W !!,"Missing List Manager Data; See IRM",! D:'$D(DTOUT) PAUSE^TIUFXHLX S VALMBCK="Q" G COPYX
"RTN","TIUFHA2",92,0)
COLL I TIUFTMPL="H",CFILEDA D
"RTN","TIUFHA2",93,0)
 . ; Collapse newparent entry, reexpand (to items only) after adding item.  Too hard to update otherwise:
"RTN","TIUFHA2",94,0)
 . S EXPAND=$P(NPINFO,U,3) D PARSE^TIUFLLM(.NPINFO),COLLAPSE^TIUFH1(.NPINFO) S VALMCNT=VALMCNT-EXPAND
"RTN","TIUFHA2",95,0)
 . D ADDTEN^TIUFLF4(NPFILEDA,CFILEDA,CNODE0,"") D EXPAND1^TIUFH1(.NPINFO) S VALMCNT=VALMCNT+$P(NPINFO,U,3)
"RTN","TIUFHA2",96,0)
 ; TMPLATE A updated for copy already in COPYFDA; didn't change status
"RTN","TIUFHA2",97,0)
VALMBG I "HAJ"[TIUFTMPL,CFILEDA S CLINENO=$O(^TMP("TIUF1IDX",$J,"DAF",CFILEDA,0)) D
"RTN","TIUFHA2",98,0)
 . I 'CLINENO W !,"...  Not in Current View" H 1 Q
"RTN","TIUFHA2",99,0)
 . S NLINENO=$O(^TMP("TIUF1IDX",$J,"DAF",FILEDA,0))
"RTN","TIUFHA2",100,0)
 . I CLINENO'<VALMBG,CLINENO'>(VALMBG+VALM("LINES")-1),LINENO=NLINENO Q
"RTN","TIUFHA2",101,0)
 . S VALMBG=CLINENO
"RTN","TIUFHA2",102,0)
COPYX I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFHA2",103,0)
 I $G(TIUFFULL) S VALMBCK="R" D RESET^TIUFXHLX
"RTN","TIUFHA2",104,0)
 Q
"RTN","TIUFHA2",105,0)
 ;
"RTN","TIUFHA3")
0^41^B33750385
"RTN","TIUFHA3",1,0)
TIUFHA3 ; SLC/MAM - LM Templates H, A Action Edit Status, WARNING ;4/17/97  21:46
"RTN","TIUFHA3",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFHA3",3,0)
 ;
"RTN","TIUFHA3",4,0)
EDSTAT ; Action Edit Status for Templates H, A, J, C
"RTN","TIUFHA3",5,0)
 N STATUS,PROTOCOL,INFO,TIUFQUIT,EXPAND,LINENO,RDISPLAY,TIUFXNOD,TIUFFULL
"RTN","TIUFHA3",6,0)
 N DTOUT,DIRUT,DIROUT
"RTN","TIUFHA3",7,0)
 S VALMBCK="",TIUFXNOD=$G(XQORNOD(0)),TIUFQUIT=0
"RTN","TIUFHA3",8,0)
 S STATUS=$$SELSTAT^TIUFLF5,STATUS=$P(STATUS,U,2) I $D(DTOUT)!(STATUS="") G EDSTX
"RTN","TIUFHA3",9,0)
 I "AJ"[TIUFTMPL D TMPLA G EDSTX
"RTN","TIUFHA3",10,0)
 ;               Template H, C
"RTN","TIUFHA3",11,0)
 I STATUS'="ACTIVE" D ONE G EDSTX
"RTN","TIUFHA3",12,0)
 D MANY
"RTN","TIUFHA3",13,0)
EDSTX I $D(DTOUT) S VALMBCK="Q" Q
"RTN","TIUFHA3",14,0)
 I $G(TIUFFULL) S VALMBCK="R" D RESET^TIUFXHLX
"RTN","TIUFHA3",15,0)
 Q
"RTN","TIUFHA3",16,0)
 ;
"RTN","TIUFHA3",17,0)
MANY ; Select multiple entries for Status ACTIVE for Templates H, C.
"RTN","TIUFHA3",18,0)
 ; Needs vars from EDSTAT
"RTN","TIUFHA3",19,0)
 W !!," Selecting Entries for Status ACTIVE.  You may enter multiple entries",!,"at the same time."
"RTN","TIUFHA3",20,0)
 D EN^VALM2(TIUFXNOD,"O") Q:'$O(VALMY(0))  K DIRUT
"RTN","TIUFHA3",21,0)
 S (RDISPLAY,LINENO)=0 F  S LINENO=$O(VALMY(LINENO)) Q:'LINENO  S INFO=$G(^TMP("TIUF1IDX",$J,LINENO)) D EDONE Q:TIUFQUIT  D LINEUP^TIUFLLM1(INFO,TIUFTMPL) Q:$D(DIRUT)
"RTN","TIUFHA3",22,0)
 I RDISPLAY S VALMBCK="R"
"RTN","TIUFHA3",23,0)
 Q
"RTN","TIUFHA3",24,0)
 ;
"RTN","TIUFHA3",25,0)
ONE ; Select one entry for Status INACTIVE or TEST for Templates H, C.
"RTN","TIUFHA3",26,0)
 ; Needs vars from EDSTAT
"RTN","TIUFHA3",27,0)
 W !!," Selecting Entry for Status ",STATUS,".  Please select ONE entry.  You will be",!,"prompted for another." K DIRUT
"RTN","TIUFHA3",28,0)
 F  D EN^VALM2(TIUFXNOD,"SO") Q:'$O(VALMY(0))  S INFO=$G(^TMP("TIUF1IDX",$J,$O(VALMY(0)))) D  Q:TIUFQUIT!$D(DIRUT)
"RTN","TIUFHA3",29,0)
 . I STATUS="TEST" W " ... "
"RTN","TIUFHA3",30,0)
 . S (EXPAND,TIUFQUIT)=0 K DIRUT D EDONE Q:TIUFQUIT!$D(DIRUT)
"RTN","TIUFHA3",31,0)
 . D LINEUP^TIUFLLM1(INFO,TIUFTMPL)
"RTN","TIUFHA3",32,0)
 . I EXPAND D EXPAND1^TIUFH1(.INFO) S VALMCNT=VALMCNT+$P(INFO,U,3)
"RTN","TIUFHA3",33,0)
 . S VALMSG=$$VMSG^TIUFL D RE^VALM4
"RTN","TIUFHA3",34,0)
 . W !!,"Selecting Another Entry for Status "_STATUS_":"
"RTN","TIUFHA3",35,0)
 Q
"RTN","TIUFHA3",36,0)
 ;
"RTN","TIUFHA3",37,0)
TMPLA ; Select multiple entries for Status edit for Template A:
"RTN","TIUFHA3",38,0)
 ; Needs vars from EDSTAT
"RTN","TIUFHA3",39,0)
 N LINENO,RDISPLAY
"RTN","TIUFHA3",40,0)
 W !!," Selecting Entries for Status ",STATUS,".  You may enter multiple entries",!,"at the same time."
"RTN","TIUFHA3",41,0)
 D EN^VALM2(TIUFXNOD,"O") Q:'$O(VALMY(0))  K DIRUT
"RTN","TIUFHA3",42,0)
 S (RDISPLAY,LINENO)=0 F  S LINENO=$O(VALMY(LINENO)) Q:'LINENO  S INFO=$G(^TMP("TIUF1IDX",$J,LINENO)) D EDONE Q:TIUFQUIT!$D(DIRUT)
"RTN","TIUFHA3",43,0)
 I RDISPLAY S VALMBCK="R" D INIT^TIUFA
"RTN","TIUFHA3",44,0)
 Q
"RTN","TIUFHA3",45,0)
 ;
"RTN","TIUFHA3",46,0)
EDONE ; Edit Status for one LM entry.
"RTN","TIUFHA3",47,0)
 ; Requires STATUS, INFO from EDSTAT.
"RTN","TIUFHA3",48,0)
 N FILEDA,NODE0,TYPE,MSG,MSG1,STATOK,PFILEDA,LIST
"RTN","TIUFHA3",49,0)
 I 'INFO W !!," Missing List Manager Information; See IRM",! D PAUSE^TIUFXHLX S TIUFQUIT=1 G EDONX
"RTN","TIUFHA3",50,0)
 S FILEDA=+$P(INFO,U,2),NODE0=$G(^TIU(8925.1,FILEDA,0))
"RTN","TIUFHA3",51,0)
 I NODE0="" W !!," Entry "_+INFO_" does not exist in the File; See IRM",! D PAUSE^TIUFXHLX S TIUFQUIT=1 G EDONX
"RTN","TIUFHA3",52,0)
 S TYPE=$P(NODE0,U,4)
"RTN","TIUFHA3",53,0)
 I $P(NODE0,U,13),TIUFWHO'="N" S MSG=" Entry "_+INFO_" is National; Can't edit Status" W !!,MSG,! D PAUSE^TIUFXHLX G EDONX
"RTN","TIUFHA3",54,0)
 ;I TYPE="O",'$$PERSOWNS^TIUFLF2(FILEDA,DUZ) S MSG=" Object; only an Owner can edit Status" W !!,MSG,! D PAUSE^TIUFXHLX G EDONX
"RTN","TIUFHA3",55,0)
 I TYPE="O" W !!,"Entry "_+INFO_" is an Object.  To edit Status please select action Detailed",!,"Display and then select Basics.",! D PAUSE^TIUFXHLX G EDONX
"RTN","TIUFHA3",56,0)
 I "AJ"[TIUFTMPL!(STATUS="ACTIVE") S MSG=" Editing Status for Entry "_+INFO_" ... " W !!,MSG H 1
"RTN","TIUFHA3",57,0)
 I TYPE="CO",$P(NODE0,U,10) S MSG=" Shared Components have no Status; Can't Edit Status" W !,MSG,! D PAUSE^TIUFXHLX G EDONX
"RTN","TIUFHA3",58,0)
 I TYPE="CO" S MSG=" Component Status is determined by Parent; Can't Edit Status" W !,MSG,! D PAUSE^TIUFXHLX G EDONX
"RTN","TIUFHA3",59,0)
 L +^TIU(8925.1,FILEDA):1 I '$T W !!," Another user is editing this entry; please try later.",! D PAUSE^TIUFXHLX G EDONX
"RTN","TIUFHA3",60,0)
 S PFILEDA=+$O(^TIU(8925.1,"AD",FILEDA,0))
"RTN","TIUFHA3",61,0)
 D STATLIST^TIUFLF5(FILEDA,PFILEDA,$E(STATUS),.MSG,.LIST) G:$D(DTOUT) EDONX I LIST'[$E(STATUS) W !,MSG,! D PAUSE^TIUFXHLX G EDONX
"RTN","TIUFHA3",62,0)
 I $$STATWORD^TIUFLF5($P(NODE0,U,7))=STATUS S MSG=" Status already "_STATUS W MSG,! D PAUSE^TIUFXHLX G EDONX
"RTN","TIUFHA3",63,0)
 D INACTIVE:STATUS="INACTIVE",TEST:STATUS="TEST",ACTIVE:STATUS="ACTIVE"
"RTN","TIUFHA3",64,0)
 S VALMSG=$$VMSG^TIUFL
"RTN","TIUFHA3",65,0)
EDONX L -^TIU(8925.1,FILEDA)
"RTN","TIUFHA3",66,0)
 Q
"RTN","TIUFHA3",67,0)
 ;
"RTN","TIUFHA3",68,0)
INACTIVE ; Change Status to Inactive.
"RTN","TIUFHA3",69,0)
 ; Requires TYPE, FILEDA, NODE0, INFO from EDSTAT, EDONE.
"RTN","TIUFHA3",70,0)
 N MSG,CONTINUE
"RTN","TIUFHA3",71,0)
 I TYPE="O" S CONTINUE=$$WARNOBJI^TIUFLF6 D  G:'CONTINUE INACX
"RTN","TIUFHA3",72,0)
 . I CONTINUE W " Inactivated" H 1 Q
"RTN","TIUFHA3",73,0)
 . W " NOT Inactivated" H 1
"RTN","TIUFHA3",74,0)
 I TYPE="CL"!(TYPE="DC"),$$HASITEMS^TIUFLF1(FILEDA) S CONTINUE=$$WARNING I 'CONTINUE W "  NOT Inactivated" H 1 G INACX
"RTN","TIUFHA3",75,0)
 I TYPE'="O" D
"RTN","TIUFHA3",76,0)
 . I $G(CONTINUE) W "  Entry and descendants Inactivated" H 1 Q
"RTN","TIUFHA3",77,0)
 . I TYPE="DOC" W " Entry (& any nonShared Components) Inactivated" H 1 Q
"RTN","TIUFHA3",78,0)
 . W " Entry Inactivated" H 1
"RTN","TIUFHA3",79,0)
 D AUTOSTAT^TIUFLF6(FILEDA,NODE0,"INACTIVE") S RDISPLAY=1
"RTN","TIUFHA3",80,0)
 ; If CL, DC or DOC, Collapse CL/DC/DOC entry, reexpand later (to items only):
"RTN","TIUFHA3",81,0)
 I TYPE="CL"!(TYPE="DC")!(TYPE="DOC") S EXPAND=$P(INFO,U,3) I EXPAND D PARSE^TIUFLLM(.INFO),COLLAPSE^TIUFH1(.INFO) S VALMCNT=VALMCNT-EXPAND
"RTN","TIUFHA3",82,0)
INACX Q
"RTN","TIUFHA3",83,0)
 ;
"RTN","TIUFHA3",84,0)
WARNING() ; Function Warns user who asks to Inactivate,  Returns 1 to Inactivate, 0 to not Inactivate.
"RTN","TIUFHA3",85,0)
 N DIR,X,Y
"RTN","TIUFHA3",86,0)
 S DIR(0)="Y",DIR("B")="NO",DIR("A",1)=" This will Inactivate ALL DESCENDANTS (except Shared Components).  Before"
"RTN","TIUFHA3",87,0)
 S DIR("A",2)="Inactivating, please note which Descendants are presently Inactive.  This will"
"RTN","TIUFHA3",88,0)
 S DIR("A",3)="help you know which Descendants NOT to reactivate later."
"RTN","TIUFHA3",89,0)
 S DIR("A")="  Sure you want to Inactivate"
"RTN","TIUFHA3",90,0)
 D ^DIR W " ... "
"RTN","TIUFHA3",91,0)
 Q Y
"RTN","TIUFHA3",92,0)
 ;
"RTN","TIUFHA3",93,0)
ACTIVE ; Change Status to Active.
"RTN","TIUFHA3",94,0)
 ; Requires FILEDA, NODE0, INFO from EDSTAT, EDONE.
"RTN","TIUFHA3",95,0)
 N MSG
"RTN","TIUFHA3",96,0)
 D AUTOSTAT^TIUFLF6(FILEDA,NODE0,"ACTIVE") S RDISPLAY=1
"RTN","TIUFHA3",97,0)
 S MSG=" Entry Activated"
"RTN","TIUFHA3",98,0)
 I $P(NODE0,U,4)="DOC" S MSG=" Entry and any (nonShared) Components Activated"
"RTN","TIUFHA3",99,0)
 W MSG,! H 1
"RTN","TIUFHA3",100,0)
 ; If DOC, Collapse DOC entry, reexpand (to items only):
"RTN","TIUFHA3",101,0)
 I TYPE="DOC" S EXPAND=$P(INFO,U,3) I EXPAND D PARSE^TIUFLLM(.INFO),COLLAPSE^TIUFH1(.INFO),EXPAND1^TIUFH1(.INFO)
"RTN","TIUFHA3",102,0)
 Q
"RTN","TIUFHA3",103,0)
 ;
"RTN","TIUFHA3",104,0)
TEST ; Change Status to Test.
"RTN","TIUFHA3",105,0)
 ; Requires FILEDA, NODE0, INFO from EDSTAT.
"RTN","TIUFHA3",106,0)
 N MSG
"RTN","TIUFHA3",107,0)
 D AUTOSTAT^TIUFLF6(FILEDA,NODE0,"TEST") S RDISPLAY=1
"RTN","TIUFHA3",108,0)
 S MSG=" Entry & any (nonShared) Components changed to TEST"
"RTN","TIUFHA3",109,0)
 W !,MSG,! H 1
"RTN","TIUFHA3",110,0)
 ; Collapse DOC entry, reexpand later (to items only):
"RTN","TIUFHA3",111,0)
 S EXPAND=$P(INFO,U,3) I EXPAND D PARSE^TIUFLLM(.INFO),COLLAPSE^TIUFH1(.INFO) S VALMCNT=VALMCNT-EXPAND
"RTN","TIUFHA3",112,0)
 Q
"RTN","TIUFHA3",113,0)
 ;
"RTN","TIUFHA4")
0^42^B19360898
"RTN","TIUFHA4",1,0)
TIUFHA4 ; SLC/MAM - LM Templates H and A action Edit Name/Owner/PrintName ;4/17/97  11:02
"RTN","TIUFHA4",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFHA4",3,0)
EDATTR ; Actions Edit Name/Owner/PrintName.
"RTN","TIUFHA4",4,0)
 N FIELDS,ATTR,OLDLNO,TIUFDA,NEWLNO,TIUFXNOD,TIUFFULL,EDIT
"RTN","TIUFHA4",5,0)
 N DTOUT,DIRUT,DIROUT
"RTN","TIUFHA4",6,0)
 S VALMBCK="",TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFHA4",7,0)
 S EDIT=$S(TIUFXNOD["Print":"PRINT NAME",TIUFXNOD["Owner":"OWNER",1:"NAME")
"RTN","TIUFHA4",8,0)
 W !!,"Selecting entries for "_EDIT_" Edit"
"RTN","TIUFHA4",9,0)
 D EN^VALM2(XQORNOD,"O") I '$O(VALMY(0)) G EDATX
"RTN","TIUFHA4",10,0)
 S OLDLNO=0 F  S OLDLNO=$O(VALMY(OLDLNO)) Q:'OLDLNO  S TIUFDA(OLDLNO)=$P(^TMP("TIUF1IDX",$J,OLDLNO),U,2)
"RTN","TIUFHA4",11,0)
 I TIUFTMPL="A"!(TIUFTMPL="J") D  ;if Temp=A,J delete selected entries:
"RTN","TIUFHA4",12,0)
 . S OLDLNO=0 F  S OLDLNO=$O(VALMY(OLDLNO)) Q:'OLDLNO  D
"RTN","TIUFHA4",13,0)
 . . S NEWLNO=$O(^TMP("TIUF1IDX",$J,"DAF",TIUFDA(OLDLNO),0)) D UPDATE^TIUFLLM1("A",-1,NEWLNO-1) S VALMCNT=VALMCNT-1
"RTN","TIUFHA4",14,0)
 S FIELDS=$S(EDIT="NAME":";.01;",EDIT="OWNER":";.05;.06;",1:";.03;")
"RTN","TIUFHA4",15,0)
 D BASIC(EDIT)
"RTN","TIUFHA4",16,0)
EDATX I $D(DTOUT) S VALMBCK="Q" Q
"RTN","TIUFHA4",17,0)
 I $G(TIUFFULL) S VALMBCK="R" D RESET^TIUFXHLX
"RTN","TIUFHA4",18,0)
 Q
"RTN","TIUFHA4",19,0)
 ;
"RTN","TIUFHA4",20,0)
BASIC(EDIT) ; Edit one basic field.
"RTN","TIUFHA4",21,0)
 N LINENO,INFO,FILEDA,NODE0,CNTCHNG,NOMATCH,STATUS,EXITFLG,MSG
"RTN","TIUFHA4",22,0)
 N SHARED,NATL,TYPE,PFILEDA,PLINENO,BYPASS
"RTN","TIUFHA4",23,0)
 S LINENO=0 K DUOUT
"RTN","TIUFHA4",24,0)
 F  S LINENO=$O(VALMY(LINENO)) Q:'LINENO!$D(DTOUT)!$D(DUOUT)  D
"RTN","TIUFHA4",25,0)
 . S FILEDA=TIUFDA(LINENO),NODE0=^TIU(8925.1,FILEDA,0),NATL=+$P(NODE0,U,13),TYPE=$P(NODE0,U,4),STATUS=$$STATWORD^TIUFLF5($P(NODE0,U,7)),SHARED=$P(NODE0,U,10)
"RTN","TIUFHA4",26,0)
 . S NOMATCH=0,MSG=" Editing Entry "_LINENO W !!,MSG
"RTN","TIUFHA4",27,0)
 . I TIUFWHO'="N",NATL,EDIT'="OWNER" S MSG=" Entry "_LINENO_" is National; Can't Edit" W !!,MSG,! D PAUSE^TIUFXHLX G AUPDATE
"RTN","TIUFHA4",28,0)
 . ; W Msg, G AUPDATE if editing field other than Owner and active and not Shared component or Object, and not Natl User.
"RTN","TIUFHA4",29,0)
 . ; G AUPDATE if editing field other than Owner and active and Natl user and user chooses NO.
"RTN","TIUFHA4",30,0)
 . I SHARED,TIUFTMPL'="A" W !,"Shared Components can be edited only through the SORT Option",! D PAUSE^TIUFXHLX G AUPDATE
"RTN","TIUFHA4",31,0)
 . I EDIT'="OWNER",SHARED,'$$PERSOWNS^TIUFLF2(FILEDA,DUZ) W !,"Only the Owner can edit Shared Components",! D PAUSE^TIUFXHLX G AUPDATE
"RTN","TIUFHA4",32,0)
 . I EDIT'="OWNER",TYPE="O" W !,"To Edit Name or Print Name of an Object, please select Detailed Display and then",!,"select Basics.",! D PAUSE^TIUFXHLX G AUPDATE
"RTN","TIUFHA4",33,0)
 . I EDIT'="OWNER",SHARED,'$$CANEDIT^TIUFLF6(FILEDA) W !,"Shared Component has parent that isn't Inactive: Can't Edit",! D PAUSE^TIUFXHLX G AUPDATE
"RTN","TIUFHA4",34,0)
 . I 'SHARED,STATUS="NO/BAD",TYPE'="O" W !!," Entry has No Status/Bad Status; Can't Edit",! D PAUSE^TIUFXHLX G AUPDATE
"RTN","TIUFHA4",35,0)
 . I 'SHARED,EDIT'="OWNER",STATUS'="INACTIVE" K DIRUT D  Q:$D(DTOUT)  G:TIUFWHO'="N" AUPDATE G:$D(DIRUT)!(BYPASS'=1) AUPDATE
"RTN","TIUFHA4",36,0)
 . . I TIUFWHO'="N" W !!," Entry "_LINENO_" is not Inactive; Can't Edit",! D PAUSE^TIUFXHLX Q
"RTN","TIUFHA4",37,0)
 . . N DIR,X,Y D  ; Let Natl Developer choose to bypass safety:
"RTN","TIUFHA4",38,0)
 . . . S DIR(0)="Y",(DIR("A",1),DIR("A",2),DIR("A",3))="  "
"RTN","TIUFHA4",39,0)
 . . . S DIR("A",4)=" Entry "_LINENO_" is Active.  Do you want to bypass safety measures and edit"
"RTN","TIUFHA4",40,0)
 . . . S DIR("A",5)="even though this may cause errors if e.g. a document is being entered"
"RTN","TIUFHA4",41,0)
 . . . S DIR("A")="on this entry.",DIR("B")="NO" D ^DIR S BYPASS=Y K DIR,X,Y
"RTN","TIUFHA4",42,0)
 . L +^TIU(8925.1,FILEDA):1 I '$T W !!,"Another user is editing this entry; please try later.",! H 2 G LOOPX
"RTN","TIUFHA4",43,0)
 . S EXITFLG=0 D ASKFLDS^TIUFLF1(FILEDA,FIELDS,0,0,.EXITFLG) G:$D(DTOUT) LOOPX
"RTN","TIUFHA4",44,0)
 . G:EXITFLG AUPDATE
"RTN","TIUFHA4",45,0)
 . S NODE0=^TIU(8925.1,FILEDA,0),VALMBCK="R"
"RTN","TIUFHA4",46,0)
 . I TIUFTMPL="H" S INFO=^TMP("TIUF1IDX",$J,LINENO) D LINEUP^TIUFLLM1(.INFO,"H") G LOOPX
"RTN","TIUFHA4",47,0)
AUPDATE . I TIUFTMPL="A"!(TIUFTMPL="J") D
"RTN","TIUFHA4",48,0)
 . . S NODE0=^TIU(8925.1,FILEDA,0)
"RTN","TIUFHA4",49,0)
 . . D AUPDATE^TIUFLA1(NODE0,FILEDA,.CNTCHNG) S:CNTCHNG=1 VALMCNT=VALMCNT+1 I 'CNTCHNG S NOMATCH=1
"RTN","TIUFHA4",50,0)
 . . I NOMATCH S MSG=" Edited Entry Not in current View" W !!,MSG,! K MSG D PAUSE^TIUFXHLX
"RTN","TIUFHA4",51,0)
LOOPX . L -^TIU(8925.1,FILEDA)
"RTN","TIUFHA4",52,0)
 Q
"RTN","TIUFHA4",53,0)
 ;
"RTN","TIUFHA5")
0^200^B32236093
"RTN","TIUFHA5",1,0)
TIUFHA5 ; SLC/MAM - COPYFDA(FILEDA,ITEMFLG,PFILEDA,CFILEDA,CNODE0,VCNTAJ), CREATE(NAME,FILEDA), CP0,etc. ;10/25/95  14:02
"RTN","TIUFHA5",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFHA5",3,0)
 ;
"RTN","TIUFHA5",4,0)
COPYFDA(FILEDA,ITEMFLG,PFILEDA,CFILEDA,CNODE0,VCNTAJ) ; Copy entry FILEDA into
"RTN","TIUFHA5",5,0)
 ;CFILEDA; Update Template A,J if TIUFTMPL="A","J".
"RTN","TIUFHA5",6,0)
 ; Requires TIUFSHAR from COPYENTY
"RTN","TIUFHA5",7,0)
 ; Requires FILEDA, TIUFTMPL, ITEMFLG
"RTN","TIUFHA5",8,0)
 ; Requires PFILEDA if entry being copied has a parent
"RTN","TIUFHA5",9,0)
 ; Returns CFILEDA; =0 if unsuccessfull.
"RTN","TIUFHA5",10,0)
 ; Returns CNODE0.
"RTN","TIUFHA5",11,0)
 ; I TIUFTMPL="A"or "J", Requires VCNTAJ = VALMCNT for Template A or J, Updates VCNTAJ.
"RTN","TIUFHA5",12,0)
 ; Requires ITEMFLG=0 or 1. 1 if called by CP10 (i.e. currently copying Item of entry rather than entry selected by user.)
"RTN","TIUFHA5",13,0)
 ; If the entry selected for copy is nonSHARED (TIUFSHAR=0) and
"RTN","TIUFHA5",14,0)
 ;module is CURRENTLY copying a SHARED ancestor, module does not copy
"RTN","TIUFHA5",15,0)
 ;FILEDA into a new IFN but sets CFILEDA and CNODE0 to FILEDA and NODE0,
"RTN","TIUFHA5",16,0)
 ;so that FILEDA (rather than a copy) is added to the parent.
"RTN","TIUFHA5",17,0)
 N NODE0,PGM,NAME,DIR,X,Y,SHARED,TIUJ,CNTCHNG,TIUFIMSG
"RTN","TIUFHA5",18,0)
 N TIUFTLST,TIUFTMSG
"RTN","TIUFHA5",19,0)
 S CFILEDA=0
"RTN","TIUFHA5",20,0)
 L +^TIU(8925.1,FILEDA):1 I '$T W !!," Entry accessed by another user; Please try again later.",! H 2 G COPYFDX
"RTN","TIUFHA5",21,0)
 S NODE0=^TIU(8925.1,FILEDA,0),SHARED=$P(NODE0,U,10),PFILEDA=+$G(PFILEDA)
"RTN","TIUFHA5",22,0)
 I ITEMFLG,'TIUFSHAR,SHARED S CFILEDA=FILEDA,CNODE0=NODE0 G COPYFDX
"RTN","TIUFHA5",23,0)
READNM I '$G(TIUFFULL) D FULL^VALM1 S TIUFFULL=1 K DIRUT
"RTN","TIUFHA5",24,0)
 S NAME=$P(NODE0,U),DIR(0)="8925.1,.01",DIR("A")="Copy into (different) Name",DIR("B")=NAME D ^DIR G:$D(DIRUT) COPYFDX
"RTN","TIUFHA5",25,0)
 I Y=NAME W !," Name of copy must be different from original name.  Original is provided as the",!,"default since it may be similar to new name, but original must be changed.",!," Enter ^ to exit." G READNM
"RTN","TIUFHA5",26,0)
 S NAME=Y K DIR,X,Y
"RTN","TIUFHA5",27,0)
 I PFILEDA,$$DUPITEM^TIUFLF7(NAME,PFILEDA) S NAME=$P(NODE0,U) W !!,TIUFIMSG,! G READNM
"RTN","TIUFHA5",28,0)
 I $D(DIRUT) S CFILEDA=0 Q
"RTN","TIUFHA5",29,0)
 D TYPELIST^TIUFLF7(NAME,0,PFILEDA,.TIUFTMSG,.TIUFTLST) G:$D(DTOUT) COPYFDX
"RTN","TIUFHA5",30,0)
 I $D(TIUFTMSG(1)),'$D(TIUFTMSG(2)) W !!,TIUFTMSG(1),!,"Can't Copy entry",! D PAUSE^TIUFXHLX S CFILEDA=0 G COPYFDX
"RTN","TIUFHA5",31,0)
 I TIUFTLST'[$P(NODE0,U,4) W !!," Please enter a different Name; File already has entry of that Type with that",!,"Name",! G READNM
"RTN","TIUFHA5",32,0)
 D CREATE(NAME,.CFILEDA) G:'CFILEDA COPYFDX
"RTN","TIUFHA5",33,0)
 L +^TIU(8925.1,CFILEDA):1 I '$T W !!," Copy accessed by another user; Please recopy" D PAUSE^TIUFXHLX G COPYFDX
"RTN","TIUFHA5",34,0)
 D CP0(FILEDA,CFILEDA,NODE0)
"RTN","TIUFHA5",35,0)
 D STUFFLDS^TIUFLF4(CFILEDA) ;Do NOT send parent to STUFFLDS or it will
"RTN","TIUFHA5",36,0)
 ;stuff SHARED
"RTN","TIUFHA5",37,0)
 K DIRUT D CP10(FILEDA,CFILEDA,.VCNTAJ) G:$D(DIRUT) COPYFDX
"RTN","TIUFHA5",38,0)
 F TIUJ=1,3,"4T9","11T13","DFLT","HEAD","ITEM" S PGM="CP"_TIUJ_"("_FILEDA_","_CFILEDA_")" D @PGM
"RTN","TIUFHA5",39,0)
 S CNODE0=^TIU(8925.1,CFILEDA,0)
"RTN","TIUFHA5",40,0)
 I TIUFTMPL="A"!(TIUFTMPL="J") D AUPDATE^TIUFLA1(CNODE0,CFILEDA,.CNTCHNG) S:CNTCHNG=1 VCNTAJ=VCNTAJ+1 I 'CNTCHNG S TIUFYMSG="; Not in current View"
"RTN","TIUFHA5",41,0)
COPYFDX ;
"RTN","TIUFHA5",42,0)
 L -^TIU(8925.1,+$G(CFILEDA)) L -^TIU(8925.1,+$G(FILEDA))
"RTN","TIUFHA5",43,0)
 I '$G(CFILEDA) S CFILEDA=0
"RTN","TIUFHA5",44,0)
 Q
"RTN","TIUFHA5",45,0)
 ;
"RTN","TIUFHA5",46,0)
CREATE(NAME,FILEDA) ; Creates Document Definition File record of Name NAME with IFN FILEDA
"RTN","TIUFHA5",47,0)
 ; Requires NAME for new record; Returns FILEDA of new record
"RTN","TIUFHA5",48,0)
 ; Returns FILEDA<0 if can't create.
"RTN","TIUFHA5",49,0)
 N DIC,DLAYGO,X,Y
"RTN","TIUFHA5",50,0)
 K DA S (DIC,DLAYGO)=8925.1,DIC(0)="L"
"RTN","TIUFHA5",51,0)
 S X=""""_NAME_""""
"RTN","TIUFHA5",52,0)
 D ^DIC
"RTN","TIUFHA5",53,0)
 S FILEDA=+Y
"RTN","TIUFHA5",54,0)
CREAX Q
"RTN","TIUFHA5",55,0)
 ;
"RTN","TIUFHA5",56,0)
CP0(FILEDA,DA,NODE0) ; Copy root node NODE0 into DA. DON'T copy status, Shared, or National. If object, don't copy abbrev or printname.
"RTN","TIUFHA5",57,0)
 N DR,DIE,TIUI
"RTN","TIUFHA5",58,0)
 S DIE=8925.1
"RTN","TIUFHA5",59,0)
 S DR="" F TIUI=2,3,4,5,6,14 D
"RTN","TIUFHA5",60,0)
 . I $P(NODE0,U,4)="O",TIUI=2!(TIUI=3)!(TIUI=14) Q
"RTN","TIUFHA5",61,0)
 . S DR=DR_".0"_TIUI_"////"_$P(NODE0,U,TIUI)_";"
"RTN","TIUFHA5",62,0)
 D ^DIE
"RTN","TIUFHA5",63,0)
CP0X Q
"RTN","TIUFHA5",64,0)
 ;
"RTN","TIUFHA5",65,0)
CP1(FILEDA,DA) ; Copy node 1 of FILEDA into DA.
"RTN","TIUFHA5",66,0)
 N DR,DIE,TIUI,NODE,VALUE
"RTN","TIUFHA5",67,0)
 S DIE=8925.1,NODE=$G(^TIU(8925.1,FILEDA,1)) Q:NODE=""
"RTN","TIUFHA5",68,0)
 S DR="" F TIUI=1:1:4 S VALUE(TIUI)=$P(NODE,U,TIUI),DR=DR_"1.0"_TIUI_"///^S X=VALUE("_TIUI_")"_$S(TIUI<4:";",1:"") ;Field 1.03 may contain ';'.
"RTN","TIUFHA5",69,0)
 D ^DIE
"RTN","TIUFHA5",70,0)
CP1X Q
"RTN","TIUFHA5",71,0)
 ;
"RTN","TIUFHA5",72,0)
CP3(FILEDA,DA) ; Copy node 3 of FILEDA into DA.  DON'T copy OK to Distribute.
"RTN","TIUFHA5",73,0)
 N DR,DIE,TIUI,NODE
"RTN","TIUFHA5",74,0)
 S DIE=8925.1,NODE=$G(^TIU(8925.1,FILEDA,3)) Q:NODE=""
"RTN","TIUFHA5",75,0)
 S DR="3.03////"_$P(NODE,U,3)
"RTN","TIUFHA5",76,0)
 D ^DIE
"RTN","TIUFHA5",77,0)
CP3X Q
"RTN","TIUFHA5",78,0)
 ;
"RTN","TIUFHA5",79,0)
CP4T9(FILEDA,DA) ; Copy nodes 4 thru 9 of FILEDA into DA.
"RTN","TIUFHA5",80,0)
 N DR,DIE,TIUI,NODE4T9
"RTN","TIUFHA5",81,0)
 S DIE=8925.1
"RTN","TIUFHA5",82,0)
 F TIUI=4,4.5,4.6,4.7,4.8,5,6,7,8,9 D
"RTN","TIUFHA5",83,0)
 . S NODE4T9(TIUI)=$G(^TIU(8925.1,FILEDA,TIUI)) Q:NODE4T9(TIUI)=""
"RTN","TIUFHA5",84,0)
 . S DR=TIUI_"////"_NODE4T9(TIUI) D ^DIE
"RTN","TIUFHA5",85,0)
 . Q
"RTN","TIUFHA5",86,0)
CP4T9X Q
"RTN","TIUFHA5",87,0)
 ;
"RTN","TIUFHA5",88,0)
CP10(FILEDA,CFILEDA,VCNTA) ; Copy Items into new entries, Add new entries as Items.  (If item is SHARED ancestor of nonSHARED entry selected for
"RTN","TIUFHA5",89,0)
 ;copy, don't copy, just add as item.)
"RTN","TIUFHA5",90,0)
 N TIUK,TIUL,IFILEDA,INODE0,MULTDA,MULTNODE,CIFILEDA,CINODE0
"RTN","TIUFHA5",91,0)
 S TIUK=0
"RTN","TIUFHA5",92,0)
 I $O(^TIU(8925.1,FILEDA,10,0)) W !!," Copying Items. . . ",!
"RTN","TIUFHA5",93,0)
 F  S TIUK=$O(^TIU(8925.1,FILEDA,10,TIUK)) Q:'TIUK  D  Q:'CIFILEDA
"RTN","TIUFHA5",94,0)
 . S MULTNODE=^TIU(8925.1,FILEDA,10,TIUK,0),IFILEDA=+MULTNODE
"RTN","TIUFHA5",95,0)
 . K CIFILEDA D COPYFDA^TIUFHA5(IFILEDA,FILEDA,1,.CIFILEDA,.CINODE0,.VCNTA)
"RTN","TIUFHA5",96,0)
 . ;if user uparrows out of renaming items, delete copy and copied items:
"RTN","TIUFHA5",97,0)
 . I 'CIFILEDA D  Q
"RTN","TIUFHA5",98,0)
 . . S DIK="^TIU(8925.1,",TENDA=0 F  S TENDA=$O(^TIU(8925.1,CFILEDA,10,TENDA)) Q:'TENDA  S DA=+$G(^TIU(8925.1,CFILEDA,10,TENDA,0)) I DA,'$P(^TIU(8925.1,DA,0),U,10) D ^DIK
"RTN","TIUFHA5",99,0)
 . . S DA=CFILEDA D ^DIK
"RTN","TIUFHA5",100,0)
 . D ADDTEN^TIUFLF4(CFILEDA,CIFILEDA,CINODE0,.MULTDA)
"RTN","TIUFHA5",101,0)
 . I 'MULTDA Q
"RTN","TIUFHA5",102,0)
 . S DIE="^TIU(8925.1,"_CFILEDA_",10,",DA(1)=CFILEDA,DA=MULTDA,DR=""
"RTN","TIUFHA5",103,0)
 . F TIUL=2,3,4 S DR=DR_TIUL_"////"_$P(MULTNODE,U,TIUL)_$S(TIUL<4:";",1:"")
"RTN","TIUFHA5",104,0)
 . D ^DIE
"RTN","TIUFHA5",105,0)
 . Q
"RTN","TIUFHA5",106,0)
CP10X Q
"RTN","TIUFHA5",107,0)
 ;
"RTN","TIUFHA5",108,0)
CP11T13(FILEDA,CFILEDA) ; Copy Nodes 11 thru 13 of FILEDA into CFILEDA.
"RTN","TIUFHA5",109,0)
 N TIUK,TIUM,MULTDA,DIC,X,Y,DLAYGO
"RTN","TIUFHA5",110,0)
 F TIUM=10:1:13 D
"RTN","TIUFHA5",111,0)
 . S TIUK=0,MULTDA=""
"RTN","TIUFHA5",112,0)
 . F  S TIUK=$O(^TIU(8925.1,FILEDA,TIUM,TIUK)) Q:'TIUK  D
"RTN","TIUFHA5",113,0)
 . . S MULTNODE=^TIU(8925.1,FILEDA,TIUM,TIUK,0),X=$P(MULTNODE,U)
"RTN","TIUFHA5",114,0)
 . . S DA(1)=CFILEDA,DIC="^TIU(8925.1,DA(1),"_TIUM_",",DIC(0)="L",DLAYGO=8925.1
"RTN","TIUFHA5",115,0)
 . . S DIC("P")=$P(^DD(8925.1,TIUM,0),U,2) D ^DIC
"RTN","TIUFHA5",116,0)
 . . S MULTDA=+Y Q:MULTDA=-1
"RTN","TIUFHA5",117,0)
 . . Q:TIUM'=13
"RTN","TIUFHA5",118,0)
 . . S DIE="^TIU(8925.1,CFILEDA,13,",DA(1)=CFILEDA,DA=MULTDA,DR=""
"RTN","TIUFHA5",119,0)
 . . F TIUL=2:1:5 S DR=DR_TIUI_"////"_$P(MULTNODE,U,TIUL)_$S(TIUL<5:";",1:"")
"RTN","TIUFHA5",120,0)
 . . D ^DIE
"RTN","TIUFHA5",121,0)
 . . Q
"RTN","TIUFHA5",122,0)
 . Q
"RTN","TIUFHA5",123,0)
CP11X Q
"RTN","TIUFHA5",124,0)
 ;
"RTN","TIUFHA5",125,0)
CPDFLT(FILEDA,CFILEDA) ; Copy Default Node "DFLT".
"RTN","TIUFHA5",126,0)
 I $D(^TIU(8925.1,FILEDA,"DFLT")) M ^TIU(8925.1,CFILEDA,"DFLT")=^TIU(8925.1,FILEDA,"DFLT")
"RTN","TIUFHA5",127,0)
 ; Gave it descendant BT when added copied items. 
"RTN","TIUFHA5",128,0)
 Q
"RTN","TIUFHA5",129,0)
 ;
"RTN","TIUFHA5",130,0)
CPDIAL ;
"RTN","TIUFHA5",131,0)
 ;
"RTN","TIUFHA5",132,0)
CPHEAD(FILEDA,CFILEDA) ; Copy Node "HEAD".
"RTN","TIUFHA5",133,0)
 I $D(^TIU(8925.1,FILEDA,"HEAD")) M ^TIU(8925.1,CFILEDA,"HEAD")=^TIU(8925.1,FILEDA,"HEAD")
"RTN","TIUFHA5",134,0)
 Q
"RTN","TIUFHA5",135,0)
 ;
"RTN","TIUFHA5",136,0)
CPITEM(FILEDA,CFILEDA) ; Copy Node "ITEM".
"RTN","TIUFHA5",137,0)
 I $D(^TIU(8925.1,FILEDA,"ITEM")) M ^TIU(8925.1,CFILEDA,"ITEM")=^TIU(8925.1,FILEDA,"ITEM")
"RTN","TIUFHA5",138,0)
 Q
"RTN","TIUFHA6")
0^224^B20036765
"RTN","TIUFHA6",1,0)
TIUFHA6 ; SLC/MAM - Templates A H J C D X Action TRY ;6/9/97  14:02
"RTN","TIUFHA6",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFHA6",3,0)
 ;
"RTN","TIUFHA6",4,0)
CHECKDEF ; Templates A, C, H, D, X, J Action Try
"RTN","TIUFHA6",5,0)
 N INFO,FILEDA,MSG,TIUFXNOD,SUCCESS,NODE0,CLASSFDA,ANCEST,TIUFI,PFILEDA
"RTN","TIUFHA6",6,0)
 N SUBS,DTOUT,DIRUT,DIROUT
"RTN","TIUFHA6",7,0)
 S VALMBCK="",TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFHA6",8,0)
 I $P(TIUFXNOD,U,3)="TR" W "Try",! S $P(TIUFXNOD,U,4)="TR="_$P($P(TIUFXNOD,U,4),"==",2)
"RTN","TIUFHA6",9,0)
 I $P(TIUFXNOD,U,3)="TRY" W "Try",! S $P(TIUFXNOD,U,4)="TRY="_$P($P(TIUFXNOD,U,4),"==",2)
"RTN","TIUFHA6",10,0)
 I $G(TIUFSTMP)="T" W !!,"Action Try not available on items screen.",! H 2 Q
"RTN","TIUFHA6",11,0)
 I '$D(TIUFSTMP) D EN^VALM2(TIUFXNOD,"SO") G:'$O(VALMY(0)) CHECX S INFO=$G(^TMP("TIUF1IDX",$J,$O(VALMY(0)))),FILEDA=$P(INFO,U,2) I 'INFO W !!,"Missing List Manager Data; See IRM",! D PAUSE^TIUFXHLX S VALMBCK="Q" G CHECX
"RTN","TIUFHA6",12,0)
 I $D(TIUFSTMP) S FILEDA=$P(TIUFINFO,U,2)
"RTN","TIUFHA6",13,0)
 L +^TIU(8925.1,FILEDA):1 I '$T W !!,"Another user is editing this entry; Please try later." H 2 G CHECX
"RTN","TIUFHA6",14,0)
 N TIUFCK,TIUFDCK
"RTN","TIUFHA6",15,0)
 S PFILEDA=+$O(^TIU(8925.1,"AD",FILEDA,0))
"RTN","TIUFHA6",16,0)
 D CHECK^TIUFLF3(FILEDA,PFILEDA) G:$D(DTOUT) CHECX
"RTN","TIUFHA6",17,0)
 I TIUFCK,'TIUFDCK,TIUFTMPL'="X" S MSG=$P(TIUFDCK,U,2) W !!,MSG,! D PAUSE^TIUFXHLX G CHECX
"RTN","TIUFHA6",18,0)
 ; If all OK, TRY and quit:
"RTN","TIUFHA6",19,0)
 I TIUFCK W !!,"Entry looks OK; no problems found.",! D PAUSE^TIUFXHLX I $D(^TIU(8925.1,"AT","DOC",FILEDA)) D DOCMT(FILEDA) Q
"RTN","TIUFHA6",20,0)
 ; If not all OK, write out nonobject problems:
"RTN","TIUFHA6",21,0)
 K DIRUT
"RTN","TIUFHA6",22,0)
 F SUBS="F","I","T","C","O","S","M","A","B","U","V","E","R","H","N","G","D","P" D  G:$D(DIRUT) CHECX
"RTN","TIUFHA6",23,0)
 . I $D(TIUFCK(SUBS)) S MSG=$S(SUBS="P":"Entry is an ",1:"Faulty Entry: ")_TIUFCK(SUBS) W !!,MSG,! W:$D(TIUFCK(SUBS_1)) TIUFCK(SUBS_1),! D PAUSE^TIUFXHLX
"RTN","TIUFHA6",24,0)
 I 'TIUFDCK,TIUFTMPL'="X" S MSG=$P(TIUFDCK,U,2) W !!,MSG,! D PAUSE^TIUFXHLX G:$D(DIRUT) CHECX
"RTN","TIUFHA6",25,0)
 ; If not in file or has nonexistant items or no/bad status, quit (don't show object or orphan problems):
"RTN","TIUFHA6",26,0)
 I $D(TIUFCK("F"))!$D(TIUFCK("I"))!$D(TIUFCK("S")) Q
"RTN","TIUFHA6",27,0)
 K TIUFCK("P") Q:$D(TIUFCK)<10  ;if only problem is orphan, quit.
"RTN","TIUFHA6",28,0)
 ; Deal w/ any object problems according to template:
"RTN","TIUFHA6",29,0)
 I $G(TIUFSTMP)="X"!($G(TIUFSTMP)="D") D ISXD(FILEDA) G CHECX
"RTN","TIUFHA6",30,0)
 D NOTXD(FILEDA)
"RTN","TIUFHA6",31,0)
CHECX I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFHA6",32,0)
 L -^TIU(8925.1,+$G(FILEDA))
"RTN","TIUFHA6",33,0)
 Q
"RTN","TIUFHA6",34,0)
 ;
"RTN","TIUFHA6",35,0)
ISXD(FILEDA) ; Template is X or D (template is boilerplate text or detailed display (which may be an object or may show boilerplate text).
"RTN","TIUFHA6",36,0)
 ; Writes object problems.
"RTN","TIUFHA6",37,0)
 ; If only problem is inactive objects, tries on docmt.
"RTN","TIUFHA6",38,0)
 N SUBS
"RTN","TIUFHA6",39,0)
 I $D(^TIU(8925.1,"AT","O",FILEDA)) D  Q
"RTN","TIUFHA6",40,0)
 . F SUBS="J","JN","JA","JP" I $D(TIUFCK(SUBS)) S MSG="Bad Object: "_TIUFCK(SUBS) W !!,MSG,! D PAUSE^TIUFXHLX  Q:$D(DIRUT)
"RTN","TIUFHA6",41,0)
 I $D(^TIU(8925.1,"AT","DOC",FILEDA))!$D(^TIU(8925.1,"AT","CO",FILEDA)) K DIRUT,TIUFCK("J"),TIUFCK("JN"),TIUFCK("JA"),TIUFCK("JP") D XCHECK^TIUFLX(FILEDA,0) Q:$D(DIRUT)  D DCHECK^TIUFLX(FILEDA,0) Q:$D(DIRUT)
"RTN","TIUFHA6",42,0)
 I $D(^TIU(8925.1,"AT","DOC",FILEDA)) K TIUFCK("XI"),TIUFCK("XI1") I $D(TIUFCK)<10 D DOCMT(FILEDA)
"RTN","TIUFHA6",43,0)
 Q
"RTN","TIUFHA6",44,0)
 ;
"RTN","TIUFHA6",45,0)
NOTXD(FILEDA) ; Template is not X or D. Writes general object problem, if any.  If only problem is inactive objects and FILEDA is a title, then tries on docmt.
"RTN","TIUFHA6",46,0)
 I '$D(^TIU(8925.1,"AT","O",FILEDA)) K TIUFCK("JN"),TIUFCK("JA"),TIUFCK("JP")
"RTN","TIUFHA6",47,0)
 I $D(TIUFCK("X"))!$D(TIUFCK("J"))!$D(TIUFCK("JN"))!$D(TIUFCK("JA"))!$D(TIUFCK("JP")) W !!,"Bad Object:  For details, select Boilerplate Text or Detailed",!,"Display and select TRY.",! D PAUSE^TIUFXHLX
"RTN","TIUFHA6",48,0)
 I $D(TIUFCK("XI")) W !!,"Inactive Object",! D PAUSE^TIUFXHLX
"RTN","TIUFHA6",49,0)
 I $D(^TIU(8925.1,"AT","DOC",FILEDA)) K TIUFCK("XI"),TIUFCK("XI1") I $D(TIUFCK)<10 D DOCMT(FILEDA)
"RTN","TIUFHA6",50,0)
 Q
"RTN","TIUFHA6",51,0)
 ;
"RTN","TIUFHA6",52,0)
DOCMT(FILEDA) ; Try entry on a document
"RTN","TIUFHA6",53,0)
 I $D(DIRUT) Q
"RTN","TIUFHA6",54,0)
 D FULL^VALM1
"RTN","TIUFHA6",55,0)
 W !!,"Checking Title on a document.  You will not be permitted to sign the document,",!,"and the document will be deleted at the end of the check.",!
"RTN","TIUFHA6",56,0)
 W !,"Be sure to select a TEST PATIENT since the document will show up on Unsigned",!,"lists while you are editing it.",!
"RTN","TIUFHA6",57,0)
 S NODE0=^TIU(8925.1,FILEDA,0) D ANCESTOR^TIUFLF4(FILEDA,NODE0,.ANCEST,0)
"RTN","TIUFHA6",58,0)
 S TIUFI=$O(ANCEST(100),-1) S CLASSFDA=$G(ANCEST(TIUFI-1)) I 'CLASSFDA W !!,"Ancestry ERROR; See IRM" D PAUSE^TIUFXHLX
"RTN","TIUFHA6",59,0)
 I CLASSFDA N FPRI,INDEX,TIUASK,VALUE D MAIN^TIUEDIT(CLASSFDA,.SUCCESS,"",FILEDA,1,1) H 1 Q:$D(DTOUT)
"RTN","TIUFHA6",60,0)
 S VALMSG=$$VMSG^TIUFL D RE^VALM4,RESET^TIUFXHLX
"RTN","TIUFHA6",61,0)
 Q
"RTN","TIUFHA6",62,0)
 ;
"RTN","TIUFHLP")
0^201^B49790553
"RTN","TIUFHLP",1,0)
TIUFHLP ; SLC/MAM,JER - On-line help library: HELP ;4/23/97  11:19
"RTN","TIUFHLP",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFHLP",3,0)
 ;
"RTN","TIUFHLP",4,0)
HELP ; Action Help for TIUF Document Definition Templates A, C, H, J,T,D,X
"RTN","TIUFHLP",5,0)
 N TIUX,ORU,ORUPRMT,VALMDDF,VALMPGE,CREATE,DTOUT,DIRUT,DIROUT
"RTN","TIUFHLP",6,0)
 S TIUX=$$UPPER^TIULS(X),CREATE=$G(TIUFCBEG)
"RTN","TIUFHLP",7,0)
 S VALMBCK="R",VALMSG=$$VMSG^TIUFL
"RTN","TIUFHLP",8,0)
 D ONE:TIUX="?NEW",ONE:TIUX="?",TWO:TIUX="??",THREE:TIUX="???"
"RTN","TIUFHLP",9,0)
HELPX I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFHLP",10,0)
 Q
"RTN","TIUFHLP",11,0)
 ;
"RTN","TIUFHLP",12,0)
ONE ; Help for One ?.
"RTN","TIUFHLP",13,0)
 ;Requires CREATE
"RTN","TIUFHLP",14,0)
 I TIUX="?NEW" W !?3 D FULL^VALM1,ITEM(^TMP("TIUF",$J,"NEWHELP")) D  Q  ;Option Create
"RTN","TIUFHLP",15,0)
 . W !,"   Enter ? for Help"
"RTN","TIUFHLP",16,0)
 . W !,"   Enter ?? for detailed help on actions including PRINTING"
"RTN","TIUFHLP",17,0)
 . W !,"   Enter ??? for detailed help on display"
"RTN","TIUFHLP",18,0)
 . D PAUSE^TIUFXHLX
"RTN","TIUFHLP",19,0)
 I TIUFTMPL="C",'$D(TIUFSTMP) W !,TIUFCMSG(1),!,TIUFCMSG(2),! W:$D(TIUFCMSG(3)) TIUFCMSG(3),! D PAUSE^TIUFXHLX Q:$D(DIRUT)
"RTN","TIUFHLP",20,0)
 D DISP^XQORM1 D PAUSE^TIUFXHLX Q:$D(DIRUT)
"RTN","TIUFHLP",21,0)
 W !!," Type action name from Action List. Example: Type 'D' or 'DET' for Detailed",!,"Display.  There are also 'Hidden Actions' which don't show on the Action List",!,"such as PL Print List."
"RTN","TIUFHLP",22,0)
 W "  Enter ?? to see hidden actions, and for",!,"descriptions of actions."
"RTN","TIUFHLP",23,0)
 D PAUSE^TIUFXHLX Q:$D(DIRUT)
"RTN","TIUFHLP",24,0)
 W !," Action and Entry Number can be selected in a single step.  Examples: To see a",!,"Detailed Display of Entry 3, enter 'DET=3'.  To scroll to the extreme right,",!,"enter '>=>'.",!
"RTN","TIUFHLP",25,0)
 D PAUSE^TIUFXHLX Q:$D(DIRUT)
"RTN","TIUFHLP",26,0)
 I ("HACJ"[TIUFTMPL&'$D(TIUFSTMP))!($G(TIUFSTMP)="T") D  Q:$D(DIRUT)
"RTN","TIUFHLP",27,0)
 . W !!,"To see more columns of essential information, enter '>' to scroll to the right",!,"whenever >>> shows on the highlighted message bar.  Enter '<' to scroll left.",!!
"RTN","TIUFHLP",28,0)
 . D PAUSE^TIUFXHLX
"RTN","TIUFHLP",29,0)
 W !,"  Enter ? for Help"
"RTN","TIUFHLP",30,0)
 W !,"  Enter ?? for detailed help on actions including PRINTING"
"RTN","TIUFHLP",31,0)
 W !,"  Enter ??? for detailed help on display",!
"RTN","TIUFHLP",32,0)
 I TIUFTMPL="C" W "  Enter '?NEW' for New User Help"
"RTN","TIUFHLP",33,0)
 D PAUSE^TIUFXHLX Q:$D(DIRUT)
"RTN","TIUFHLP",34,0)
 W !,"  When editing a field (as opposed to Selecting an Action), ? will give you one"
"RTN","TIUFHLP",35,0)
 W !,"line of help on the field.  ?? will give you a complete description of the"
"RTN","TIUFHLP",36,0)
 W !,"field and how it works.",!
"RTN","TIUFHLP",37,0)
 D PAUSE^TIUFXHLX
"RTN","TIUFHLP",38,0)
 Q
"RTN","TIUFHLP",39,0)
 ;
"RTN","TIUFHLP",40,0)
TWO ; Help for ??
"RTN","TIUFHLP",41,0)
 D FULL^VALM1,CLEAR^VALM1
"RTN","TIUFHLP",42,0)
 W !!,$$CENTER^TIUFL("Help on Listed Actions",80),!!
"RTN","TIUFHLP",43,0)
 W !,"Actions are not selectable when they are enclosed in parentheses.",!!
"RTN","TIUFHLP",44,0)
 K DIRUT D MENU(XQORNOD) Q:$D(DIRUT)
"RTN","TIUFHLP",45,0)
 W !!,$$CENTER^TIUFL("Help on Hidden Actions including PRINTING",80),!!
"RTN","TIUFHLP",46,0)
 D MENU(^TMP("TIUF",$J,"HIDDEN"))
"RTN","TIUFHLP",47,0)
 Q
"RTN","TIUFHLP",48,0)
 ;
"RTN","TIUFHLP",49,0)
THREE ; Help for ???
"RTN","TIUFHLP",50,0)
 D FULL^VALM1,CLEAR^VALM1
"RTN","TIUFHLP",51,0)
 I "HACJ"[TIUFTMPL,'$D(TIUFSTMP) D BASINFD
"RTN","TIUFHLP",52,0)
 I $G(TIUFSTMP)="T" D ITEMINFD
"RTN","TIUFHLP",53,0)
 I $G(TIUFSTMP)="D" D EDITVW^TIUFHLP1
"RTN","TIUFHLP",54,0)
 I $G(TIUFSTMP)="X" D BOILTX^TIUFHLP1
"RTN","TIUFHLP",55,0)
 Q
"RTN","TIUFHLP",56,0)
 ;
"RTN","TIUFHLP",57,0)
BASINFD ; Write Field Description for Basic Info Fields
"RTN","TIUFHLP",58,0)
 N TIUI,FLDNM,FLDNO,MSG,HERE
"RTN","TIUFHLP",59,0)
 W !,$$CENTER^TIUFL("Help on Display",80),! K DIROUT
"RTN","TIUFHLP",60,0)
 F FLDNO=.01,.04,.1,.13,.07,.05,.06,.08,.12,.03,.11 D  Q:$D(DIROUT)
"RTN","TIUFHLP",61,0)
 . I $G(TIUFTMPL)="J",(FLDNO=.1)!(FLDNO=.08)!(FLDNO=.12)!(FLDNO=.11) Q
"RTN","TIUFHLP",62,0)
 . S FLDNM=$P(^TMP("TIUF",$J,FLDNO,"LABEL"),U)
"RTN","TIUFHLP",63,0)
 . K DIRUT W:$$CONTINUE !?1,$G(IOINHI),FLDNM,$G(IOINORM),! Q:$D(DIRUT)
"RTN","TIUFHLP",64,0)
 . I FLDNO=.01,TIUFTMPL="H",'$D(TIUFSTMP) W !,"   Plus (+) indicates entry has Items under it and can be expanded.",!!
"RTN","TIUFHLP",65,0)
 . D HELP^DIE(8925.1,"",FLDNO,"D")
"RTN","TIUFHLP",66,0)
 . S HERE=1 I $G(TIUFTMPL)="J",(FLDNO=.04)!(FLDNO=.07)!(FLDNO=.01) S HERE=0
"RTN","TIUFHLP",67,0)
 . F TIUI=1:1:DIHELP S MSG=^TMP("DIHELP",$J,TIUI) K DIRUT D  Q:$D(DIRUT)
"RTN","TIUFHLP",68,0)
 . . I FLDNO=.04,$G(TIUFTMPL)="J",MSG["O OBJECT" S HERE=1
"RTN","TIUFHLP",69,0)
 . . I FLDNO=.07,$G(TIUFTMPL)="J",MSG["OBJECT STATUS",MSG'["OBJECT STATUS," S HERE=1
"RTN","TIUFHLP",70,0)
 . . I FLDNO=.01,$G(TIUFTMPL)="J",MSG["OBJECT Name" S HERE=1
"RTN","TIUFHLP",71,0)
 . . W:HERE&$$CONTINUE ?3,MSG,!
"RTN","TIUFHLP",72,0)
 D CLEAN^DILF
"RTN","TIUFHLP",73,0)
 Q
"RTN","TIUFHLP",74,0)
 ;
"RTN","TIUFHLP",75,0)
ITEMINFD ; Write Field Description for Item Fields
"RTN","TIUFHLP",76,0)
 N TIUI,FLDNM,FLDNO,MSG
"RTN","TIUFHLP",77,0)
 W !,$$CENTER^TIUFL("Help on Display",80),! K DIROUT
"RTN","TIUFHLP",78,0)
 F FLDNO=10 D  Q:$D(DIROUT)
"RTN","TIUFHLP",79,0)
 . S FLDNM=^TMP("TIUF",$J,FLDNO,"LABEL")
"RTN","TIUFHLP",80,0)
 . K DIRUT W:$$CONTINUE !?1,$G(IOINHI),FLDNM,$G(IOINORM),! Q:$D(DIRUT)
"RTN","TIUFHLP",81,0)
 . D HELP^DIE(8925.1,"",FLDNO,"D")
"RTN","TIUFHLP",82,0)
 . F TIUI=1:1:DIHELP S MSG=^TMP("DIHELP",$J,TIUI) K DIRUT D  Q:$D(DIRUT)
"RTN","TIUFHLP",83,0)
 . . W:$$CONTINUE ?3,MSG,!
"RTN","TIUFHLP",84,0)
 K DIROUT F FLDNO=2:1:4 D  Q:$D(DIROUT)
"RTN","TIUFHLP",85,0)
 . S FLDNM=^TMP("TIUF",$J,10,FLDNO,"LABEL")
"RTN","TIUFHLP",86,0)
 . K DIRUT W:$$CONTINUE !?1,$G(IOINHI),FLDNM,$G(IOINORM),! Q:$D(DIRUT)
"RTN","TIUFHLP",87,0)
 . D HELP^DIE(8925.14,"",FLDNO,"D")
"RTN","TIUFHLP",88,0)
 . F TIUI=1:1:DIHELP S MSG=^TMP("DIHELP",$J,TIUI) K DIRUT D  Q:$D(DIRUT)
"RTN","TIUFHLP",89,0)
 . . W:$$CONTINUE ?3,MSG,!
"RTN","TIUFHLP",90,0)
 D CLEAN^DILF
"RTN","TIUFHLP",91,0)
 Q
"RTN","TIUFHLP",92,0)
 ;
"RTN","TIUFHLP",93,0)
MENU(XQORNOD) ; Unwind protocol menus for help
"RTN","TIUFHLP",94,0)
 N TIUSEQ,TIUI,TIUJ
"RTN","TIUFHLP",95,0)
 K DIRUT W:$$CONTINUE "The following actions are available:",! Q:$D(DIRUT)
"RTN","TIUFHLP",96,0)
 S TIUI=0 F  S TIUI=$O(^ORD(101,+XQORNOD,10,TIUI)) Q:+TIUI'>0  K DIRUT D  Q:$D(DIRUT)
"RTN","TIUFHLP",97,0)
 . S TIUJ=+$P($G(^ORD(101,+XQORNOD,10,TIUI,0)),U,3) S:$D(TIUSEQ(TIUJ)) TIUJ=TIUJ+.1
"RTN","TIUFHLP",98,0)
 . S TIUSEQ(TIUJ)=+$P(^ORD(101,+XQORNOD,10,TIUI,0),U)
"RTN","TIUFHLP",99,0)
 S TIUI=0 F  S TIUI=$O(TIUSEQ(TIUI)) Q:+TIUI'>0  K DIRUT D  Q:$D(DIRUT)
"RTN","TIUFHLP",100,0)
 . I $D(^ORD(101,+TIUSEQ(TIUI),0)) D ITEM(+TIUSEQ(TIUI))
"RTN","TIUFHLP",101,0)
 Q
"RTN","TIUFHLP",102,0)
ITEM(XQORNOD) ; Show descriptions of protocol menu actions
"RTN","TIUFHLP",103,0)
 N TIUI,TMPQUIT,HERE
"RTN","TIUFHLP",104,0)
 Q:$P($G(^ORD(101,+XQORNOD,0)),U,2)']""
"RTN","TIUFHLP",105,0)
 I $G(TIUFTMPL)="J",$G(TIUFSTMP)="D",(^ORD(101,+XQORNOD,0)["Items")!(^ORD(101,+XQORNOD,0)["Boil")!(^ORD(101,+XQORNOD,0)["Upload") Q
"RTN","TIUFHLP",106,0)
 I $G(TIUFSTMP)="T",^ORD(101,+XQORNOD,0)["Try" Q
"RTN","TIUFHLP",107,0)
 Q:XQORNOD=^TMP("TIUF",$J,"STOP")  ;protocol TIUF QUIT1  in hidden actions - dummy to allow user to enter QU
"RTN","TIUFHLP",108,0)
 ; ?NEW for create is contained in protocol TIUFC ACTION MENU; don't write the name of the protocol:
"RTN","TIUFHLP",109,0)
 ; Note on heritable fields is contained in protocol TIUFD ACTION MENU MGR; don't write the name of the protocol:
"RTN","TIUFHLP",110,0)
 I XQORNOD'=^TMP("TIUF",$J,"NEWHELP"),XQORNOD'=^TMP("TIUF",$J,"INHERIT") K DIRUT W:$$CONTINUE ?1,$G(IOINHI),$$UPPER^TIULS($P($G(^ORD(101,+XQORNOD,0)),U,2)),$G(IOINORM),! Q:$D(DIRUT)
"RTN","TIUFHLP",111,0)
 S HERE=1 I $G(TIUFTMPL)="J",$G(^ORD(101,+XQORNOD,0))["Delete" S HERE=0
"RTN","TIUFHLP",112,0)
 S TIUI=0 F  S TIUI=$O(^ORD(101,+XQORNOD,1,TIUI)) Q:+TIUI'>0  K DIRUT D  Q:$D(DIRUT)
"RTN","TIUFHLP",113,0)
 . S LINE=$G(^ORD(101,+XQORNOD,1,TIUI,0))
"RTN","TIUFHLP",114,0)
 . Q:'$$CONTINUE
"RTN","TIUFHLP",115,0)
 . I 'HERE,LINE["OBJECT DELETE" S HERE=1
"RTN","TIUFHLP",116,0)
 . I 'HERE Q
"RTN","TIUFHLP",117,0)
 . ; ?NEW for create, note on heritable: first 2 lines aren't relevant:
"RTN","TIUFHLP",118,0)
 . I XQORNOD=^TMP("TIUF",$J,"NEWHELP")!(XQORNOD=^TMP("TIUF",$J,"INHERIT")),TIUI<3 Q
"RTN","TIUFHLP",119,0)
 . ;protocol description is written in 2 parts, first for clinicians, second for managers. Display appropriate part:
"RTN","TIUFHLP",120,0)
 . I TIUFWHO="C" D
"RTN","TIUFHLP",121,0)
 . . Q:LINE["CLINICIAN OPTIONS"
"RTN","TIUFHLP",122,0)
 . . I LINE'["MANAGER OPTIONS" W ?3,$G(^ORD(101,+XQORNOD,1,TIUI,0)),! Q
"RTN","TIUFHLP",123,0)
 . . S TIUI=5000
"RTN","TIUFHLP",124,0)
 . I "NM"[TIUFWHO D
"RTN","TIUFHLP",125,0)
 . . I LINE["CLINICIAN OPTIONS" S TMPQUIT=1 Q
"RTN","TIUFHLP",126,0)
 . . I LINE["MANAGER OPTIONS" S TMPQUIT=0 Q
"RTN","TIUFHLP",127,0)
 . . Q:$G(TMPQUIT)
"RTN","TIUFHLP",128,0)
 . . W ?3,$G(^ORD(101,+XQORNOD,1,TIUI,0)),!
"RTN","TIUFHLP",129,0)
 Q:XQORNOD=^TMP("TIUF",$J,"NEWHELP")  ;don't show items of TIUFC ACTION MENU
"RTN","TIUFHLP",130,0)
 Q:XQORNOD=^TMP("TIUF",$J,"INHERIT")  ;don't show items of TIUFD ACTION MENU MGR
"RTN","TIUFHLP",131,0)
 S TIUI=0 F  S TIUI=$O(^ORD(101,+XQORNOD,10,TIUI)) Q:+TIUI'>0  K DIRUT D  Q:$D(DIRUT)
"RTN","TIUFHLP",132,0)
 . D ITEM(+$G(^ORD(101,+XQORNOD,10,+TIUI,0))_";ORD(101,")
"RTN","TIUFHLP",133,0)
 Q
"RTN","TIUFHLP",134,0)
CONTINUE() ; Pagination control
"RTN","TIUFHLP",135,0)
 N Y K DIRUT
"RTN","TIUFHLP",136,0)
 I $Y<(IOSL-2) S Y=1 G CONTX
"RTN","TIUFHLP",137,0)
 S Y=$$BOTTM W @IOF,!
"RTN","TIUFHLP",138,0)
CONTX Q Y
"RTN","TIUFHLP",139,0)
 ;
"RTN","TIUFHLP",140,0)
BOTTM() ; Call DIR at bottom of screen
"RTN","TIUFHLP",141,0)
 N DIR,X,Y
"RTN","TIUFHLP",142,0)
 I $E(IOST)'="C" S Y=1 G BOTTX
"RTN","TIUFHLP",143,0)
 I (IOSL>($Y+5)) F  W ! Q:IOSL<($Y+6)
"RTN","TIUFHLP",144,0)
 S DIR(0)="FO^1:1",DIR("A")="Press RETURN to continue or '^' or '^^' to exit"
"RTN","TIUFHLP",145,0)
 S DIR("?")="Enter '^' to quit present section or '^^' to quit to menu"
"RTN","TIUFHLP",146,0)
 D ^DIR I $D(DIRUT),(Y="") K DIRUT
"RTN","TIUFHLP",147,0)
 S Y=$S(Y="^"!(Y="^^"):Y,$D(DTOUT):"",1:1)
"RTN","TIUFHLP",148,0)
BOTTX Q Y
"RTN","TIUFHLP1")
0^202^B12788010
"RTN","TIUFHLP1",1,0)
TIUFHLP1 ; SLC/MAM - On-line help library: EDITVW, FIELD ;3/9/95  11:19
"RTN","TIUFHLP1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFHLP1",3,0)
 ;
"RTN","TIUFHLP1",4,0)
EDITVW ; Write Field Description for Fields Shown in Edit View Templates D
"RTN","TIUFHLP1",5,0)
 N TIUI,FLDNM,FLDNO,MSG,FILEDA,TYPE,PFILEDA
"RTN","TIUFHLP1",6,0)
 S FILEDA=TIUFINFO("FILEDA"),TYPE=$P(TIUFNOD0,U,4)
"RTN","TIUFHLP1",7,0)
 S PFILEDA=+$O(^TIU(8925.1,"AD",FILEDA,0))
"RTN","TIUFHLP1",8,0)
 I "MN"[TIUFWHO,TYPE'="O" D ITEM^TIUFHLP(^TMP("TIUF",$J,"INHERIT"))
"RTN","TIUFHLP1",9,0)
BASICS W !!,$$CENTER^TIUFL("Help on Basics",80),! K DIROUT
"RTN","TIUFHLP1",10,0)
 F FLDNO=.01,.02,.03,.04,.1,0,.13,.07,.05,.06,.11,.08,3.02,3.03 K DIRUT D  Q:$D(DIRUT)
"RTN","TIUFHLP1",11,0)
 . I FLDNO=0!(FLDNO=3.03),"NM"'[TIUFWHO Q
"RTN","TIUFHLP1",12,0)
 . I FLDNO=.11,TIUFTMPL'="A"!(TYPE="O") Q  ;orphan
"RTN","TIUFHLP1",13,0)
 . I FLDNO=3.02,"N"'[TIUFWHO Q  ;OK to Distribute
"RTN","TIUFHLP1",14,0)
 . I TYPE="O",(FLDNO=.1)!(FLDNO=.08)!(FLDNO=.12)!(FLDNO=3.03) Q
"RTN","TIUFHLP1",15,0)
 . D FIELD(8925.1,FLDNO)
"RTN","TIUFHLP1",16,0)
 Q:$D(DTOUT)!$D(DIROUT)
"RTN","TIUFHLP1",17,0)
 I TYPE="O" G BOILTX
"RTN","TIUFHLP1",18,0)
ITEMS W !!,$$CENTER^TIUFL("Help on Items",80),!
"RTN","TIUFHLP1",19,0)
 F FLDNO=10 K DIRUT D FIELD(8925.1,FLDNO) Q:$D(DIRUT)
"RTN","TIUFHLP1",20,0)
 F FLDNO=2,3,4 K DIRUT D FIELD(8925.14,FLDNO) Q:$D(DIRUT)
"RTN","TIUFHLP1",21,0)
 Q:$D(DTOUT)!$D(DIROUT)
"RTN","TIUFHLP1",22,0)
BOILTX W !!,$$CENTER^TIUFL("Help on Boilerplate Text",80),!
"RTN","TIUFHLP1",23,0)
 D FIELD(8925.1,3)
"RTN","TIUFHLP1",24,0)
 Q:$D(DTOUT)!$D(DIROUT)  Q:$G(TIUFSTMP)="X"
"RTN","TIUFHLP1",25,0)
 I TYPE="CO" G UPLOAD
"RTN","TIUFHLP1",26,0)
TECH N PNODE61,PCUSTOM
"RTN","TIUFHLP1",27,0)
 I "MN"'[TIUFWHO Q
"RTN","TIUFHLP1",28,0)
 W !!,$$CENTER^TIUFL("Help on Technical Fields",80),!
"RTN","TIUFHLP1",29,0)
 I TYPE'="O" F FLDNO=4.6,4.7,5,6,6.14,6.1,6.12,6.13,7,8 K DIRUT D FIELD(8925.1,FLDNO) Q:$D(DIRUT)
"RTN","TIUFHLP1",30,0)
 I TYPE="O" D FIELD(8925.1,9)
"RTN","TIUFHLP1",31,0)
 Q:$D(DTOUT)!$D(DIROUT)
"RTN","TIUFHLP1",32,0)
 I TYPE="O"!(TYPE="CO") G EDVWX
"RTN","TIUFHLP1",33,0)
UPLOAD W !!,$$CENTER^TIUFL("Help on Upload",80),!
"RTN","TIUFHLP1",34,0)
 F FLDNO=1.01,1.02,1.03,4,4.5,4.8 K DIRUT D FIELD(8925.1,FLDNO) Q:$D(DIRUT)
"RTN","TIUFHLP1",35,0)
 Q:$D(DTOUT)!$D(DIROUT)
"RTN","TIUFHLP1",36,0)
 W !!,$$CENTER^TIUFL("Help on Upload Record Header",80),!
"RTN","TIUFHLP1",37,0)
 W !,"NOTE: The following fields are for Captioned Headers.  (Fields for Delimited",!,"Headers are similar.)",!
"RTN","TIUFHLP1",38,0)
 F FLDNO=.01:.01:.04,1,.05:.01:.07 K DIRUT D FIELD(8925.12,FLDNO) Q:$D(DIRUT)
"RTN","TIUFHLP1",39,0)
EDVWX D CLEAN^DILF
"RTN","TIUFHLP1",40,0)
 Q
"RTN","TIUFHLP1",41,0)
 ;
"RTN","TIUFHLP1",42,0)
FIELD(FILENO,FLDNO) ; Writes (sub)field description for Display Template D
"RTN","TIUFHLP1",43,0)
 N FLDNM,TIUI,MSG,HERE
"RTN","TIUFHLP1",44,0)
 S FLDNM=$S(FILENO=8925.1:^TMP("TIUF",$J,FLDNO,"LABEL"),FILENO=8925.14:$S(FLDNO=2:"Mnemonic",FLDNO=3:"Sequence",1:"Menu Text"),FILENO=8925.11:^TMP("TIUF",$J,1,FLDNO,"LABEL"),1:"")
"RTN","TIUFHLP1",45,0)
 I FLDNM="" S FLDNM=^TMP("TIUF",$J,2,FLDNO,"LABEL")
"RTN","TIUFHLP1",46,0)
 K DIRUT W:$$CONTINUE^TIUFHLP !?1,$G(IOINHI),$P(FLDNM,U),$G(IOINORM),! Q:$D(DIRUT)
"RTN","TIUFHLP1",47,0)
 I FLDNO=0 W "   The Internal File Number is the number of the entry in the TIU Document",! W:$$CONTINUE^TIUFHLP "   Definition File.  IFN is included in the display to help programmers with",! W:$$CONTINUE^TIUFHLP "   debugging.",! Q
"RTN","TIUFHLP1",48,0)
 D HELP^DIE(FILENO,"",FLDNO,"D")
"RTN","TIUFHLP1",49,0)
 S HERE=1 I $G(TIUFTMPL)="J",(FLDNO=.04)!(FLDNO=.07) S HERE=0
"RTN","TIUFHLP1",50,0)
 F TIUI=1:1:$G(DIHELP) S MSG=^TMP("DIHELP",$J,TIUI) K DIRUT D  Q:$D(DIRUT)
"RTN","TIUFHLP1",51,0)
 . I FLDNO=.04,$G(TIUFTMPL)="J",MSG["O OBJECT" S HERE=1
"RTN","TIUFHLP1",52,0)
 . I FLDNO=.07,$G(TIUFTMPL)="J",MSG["OBJECT STATUS",MSG'["OBJECT STATUS," S HERE=1
"RTN","TIUFHLP1",53,0)
 . W:HERE&$$CONTINUE^TIUFHLP ?3,MSG,!
"RTN","TIUFHLP1",54,0)
 Q
"RTN","TIUFHLP1",55,0)
 ;
"RTN","TIUFJ")
0^205^B2662787
"RTN","TIUFJ",1,0)
TIUFJ ; SLC/MAM - LM Template J (Objects) INIT ;10/26/95  15:33
"RTN","TIUFJ",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFJ",3,0)
 ;
"RTN","TIUFJ",4,0)
EN ; -- main entry point for Options TIUFJ CREATE OBJECTS MGR/VIEW OBJECTS CLIN
"RTN","TIUFJ",5,0)
 ; Requires TIUFWHO, set in above options
"RTN","TIUFJ",6,0)
 N TIUF,TIUFTMPL,TIUFATTR,TIUFAVAL,TIUFSTRT,TIUFVCN1,TIUFXNOD,TIUFREDO
"RTN","TIUFJ",7,0)
 N DTOUT,DIRUT,DIROUT,DUOUT,TIUFLFT
"RTN","TIUFJ",8,0)
 S TIUFTMPL="J",TIUFREDO=0
"RTN","TIUFJ",9,0)
 N TIUFPRIV D SETUP^TIUFL S:$D(DTOUT) VALMQUIT=1 G:$G(VALMQUIT) ENX
"RTN","TIUFJ",10,0)
 S TIUFXNOD="^^Object^"
"RTN","TIUFJ",11,0)
 S TIUFATTR="T^TYPE",TIUFAVAL="O^OBJECT" D SELSTART^TIUFLA
"RTN","TIUFJ",12,0)
 G:$D(DTOUT)!'$D(TIUFSTRT) ENX
"RTN","TIUFJ",13,0)
 I TIUFWHO="C" D EN^VALM("TIUFJ OBJECTS CLIN")
"RTN","TIUFJ",14,0)
 I "MN"[TIUFWHO D EN^VALM("TIUFJ OBJECTS MGR")
"RTN","TIUFJ",15,0)
ENX Q
"RTN","TIUFJ",16,0)
 ;
"RTN","TIUFJ",17,0)
HDR ; -- header code
"RTN","TIUFJ",18,0)
 ; Requires Attribute TIUFATTR="T^TYPE"
"RTN","TIUFJ",19,0)
 ; Requires Attribute Value TIUFAVAL="O^OBJECT"
"RTN","TIUFJ",20,0)
 ; Requires TIUFSTRT = e.g. " ^ZZZZZZZZ" as set in SELSTART^TIUFLA.
"RTN","TIUFJ",21,0)
 N FROM,TO,HDR3
"RTN","TIUFJ",22,0)
 S FROM=$S($P(TIUFSTRT,U)=" ":"FIRST",1:$P(TIUFSTRT,U))
"RTN","TIUFJ",23,0)
 S TO=$S($P(TIUFSTRT,U)=" ":"LAST",$P(TIUFSTRT,U,2)="ZZZZZZZZ":"LAST",1:$P(TIUFSTRT,U,2))
"RTN","TIUFJ",24,0)
 S HDR3=$S(TIUFSTRT'=" ^ZZZZZZZZ":" from "_FROM_" to "_TO,1:"")
"RTN","TIUFJ",25,0)
 S VALMHDR(1)=$$CENTER^TIUFL("Objects "_HDR3,79)
"RTN","TIUFJ",26,0)
HDRX ;
"RTN","TIUFJ",27,0)
 Q
"RTN","TIUFJ",28,0)
 ;
"RTN","TIUFJ",29,0)
INIT ; -- init variables and list array. Called by Template J
"RTN","TIUFJ",30,0)
 D INIT^TIUFA
"RTN","TIUFJ",31,0)
 Q
"RTN","TIUFJ",32,0)
 ;
"RTN","TIUFJ",33,0)
EXIT ; -- exit code
"RTN","TIUFJ",34,0)
 K ^TMP("TIUF1",$J),^TMP("TIUFB",$J),^TMP("TIUF1IDX",$J),^TMP("TIUFBIDX",$J),^TMP("TIUF",$J),IOELALL
"RTN","TIUFJ",35,0)
 D CLEAN^VALM10
"RTN","TIUFJ",36,0)
 Q
"RTN","TIUFJ",37,0)
 ;
"RTN","TIUFL")
0^44^B33840632
"RTN","TIUFL",1,0)
TIUFL ; SLC/MAM - Library of Modules and Functions: SETUP, RMSG, CENTER(X,N) ;4/17/97  11:50
"RTN","TIUFL",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFL",3,0)
 ;
"RTN","TIUFL",4,0)
CENTER(X,N) ; Center X in space of N Characters. Adapted from TIULS.
"RTN","TIUFL",5,0)
 ; Truncates X to N chars if X>N.  NOTE: LM truncates header at scroll lock if header longer than VALMWD-1.
"RTN","TIUFL",6,0)
 N SP,ANSCTR
"RTN","TIUFL",7,0)
 S $P(SP," ",((N-$L(X))\2)+1)=""
"RTN","TIUFL",8,0)
 S ANSCTR=$G(SP)_X_$G(SP) I $L(ANSCTR)>N S ANSCTR=$E(ANSCTR,1,N)
"RTN","TIUFL",9,0)
 Q ANSCTR
"RTN","TIUFL",10,0)
 ;
"RTN","TIUFL",11,0)
SETUP ; Sets ^TMP("TIUF",$J) array before entering Document Definition Utility, etc.
"RTN","TIUFL",12,0)
 ; Array is used in routines and in protocols, including protocol
"RTN","TIUFL",13,0)
 ;item text and item displayed name.  If Type field Set of Codes changes,
"RTN","TIUFL",14,0)
 ;or allowable Statuses from TIU Status File, then ^TMP("TIUF" array and
"RTN","TIUFL",15,0)
 ;associated protocols will need changing.
"RTN","TIUFL",16,0)
 ; TIUF uses protocols TIUF TYPE etc. and TIUF STATUS etc. so that Type,
"RTN","TIUFL",17,0)
 ;Status, and Sort values can be edited at the bottom of the LM screen
"RTN","TIUFL",18,0)
 ;without allowed choices scrolling off.
"RTN","TIUFL",19,0)
 N DIC,X,Y,TIUFI,DA
"RTN","TIUFL",20,0)
 S TIUFPRIV=1
"RTN","TIUFL",21,0)
 S X="IOELALL" D ENDR^%ZISS
"RTN","TIUFL",22,0)
ARRNO ; ^TMP("TIUF",$J) subscripts ARRNO_H/A/C/J/T/D/O.
"RTN","TIUFL",23,0)
 ; e.g. ^TMP("TIUF",$J,"ARRNOH")= 1 since LM Template H uses Array
"RTN","TIUFL",24,0)
 ;number 1, i.e. ^TMP("TIUF1" Arrays.
"RTN","TIUFL",25,0)
 F TIUFI="H","A","C","J","T","D","O" S ^TMP("TIUF",$J,"ARRNO"_TIUFI)=$S("HACJ"[TIUFI:1,TIUFI="T":2,1:3) ; D, O are 3
"RTN","TIUFL",26,0)
 ;
"RTN","TIUFL",27,0)
CLINDOC ; subscript "CLINDOC".
"RTN","TIUFL",28,0)
 ; e.g. ^TMP("TIUF",$J,"CLINDOC")=38
"RTN","TIUFL",29,0)
 S DIC=8925.1,DIC(0)="X",X="CLINICAL DOCUMENTS" D ^DIC
"RTN","TIUFL",30,0)
 G:Y=-1 SETUX
"RTN","TIUFL",31,0)
 S ^TMP("TIUF",$J,"CLINDOC")=+Y
"RTN","TIUFL",32,0)
CLPAC ; Subscript "CLPAC"  NOTE: may not find it so subscript may not exist
"RTN","TIUFL",33,0)
 S DIC=8930,DIC(0)="X"
"RTN","TIUFL",34,0)
 S X="CLINICAL COORDINATOR" D ^DIC
"RTN","TIUFL",35,0)
 I Y>0 S ^TMP("TIUF",$J,"CLPAC")=+Y
"RTN","TIUFL",36,0)
RM ; Subscripts "RMAC", "RMAM", "RMHC", "RMHM",
"RTN","TIUFL",37,0)
 ;"RMCM", "RMJC", "RMJM", "RMT", "RMD" similar to VALM("RM"),
"RTN","TIUFL",38,0)
 ;LM Template Right Margin for Sub/Templates A, H, C, and J, T, D; 
"RTN","TIUFL",39,0)
 ;for TIUFWHO Clinician, Manager.
"RTN","TIUFL",40,0)
 S TIUF("RMAC")=186
"RTN","TIUFL",41,0)
 S TIUF("RMAM")=195
"RTN","TIUFL",42,0)
 S TIUF("RMHC")=179
"RTN","TIUFL",43,0)
 S TIUF("RMHM")=188
"RTN","TIUFL",44,0)
 S TIUF("RMCM")=188
"RTN","TIUFL",45,0)
 S TIUF("RMJC")=157
"RTN","TIUFL",46,0)
 S TIUF("RMJM")=166
"RTN","TIUFL",47,0)
 S TIUF("RMT")=123
"RTN","TIUFL",48,0)
 S (TIUF("RMD"),TIUF("RMXM"),TIUF("RMXC"))=80
"RTN","TIUFL",49,0)
NMWIDTH ; Subscript NMWIDTH for entry name in Temps HACJ.
"RTN","TIUFL",50,0)
 S ^TMP("TIUF",$J,"NMWIDTH")=$S("NM"[TIUFWHO:65,1:72) ; Used in Create options.
"RTN","TIUFL",51,0)
 ;
"RTN","TIUFL",52,0)
HIDDEN ; Subscript HIDDEN for IFN of protocol TIUF HIDDEN ACTIONS
"RTN","TIUFL",53,0)
 S DIC=101
"RTN","TIUFL",54,0)
 S X="TIUF HIDDEN ACTIONS" D ^DIC G:Y=-1 SETUX
"RTN","TIUFL",55,0)
 S ^TMP("TIUF",$J,"HIDDEN")=+Y
"RTN","TIUFL",56,0)
 ;
"RTN","TIUFL",57,0)
STOP ; Subscript STOP for IFN of protocol TIUF QUIT1
"RTN","TIUFL",58,0)
 S DIC=101
"RTN","TIUFL",59,0)
 S X="TIUF QUIT1" D ^DIC G:Y=-1 SETUX
"RTN","TIUFL",60,0)
 S ^TMP("TIUF",$J,"STOP")=+Y
"RTN","TIUFL",61,0)
 ;
"RTN","TIUFL",62,0)
NEWHELP ; Subscript NEWHELP for IFN of protocol TIUFC ACTION MENU
"RTN","TIUFL",63,0)
 S DIC=101
"RTN","TIUFL",64,0)
 S X="TIUFC ACTION MENU" D ^DIC G:Y=-1 SETUX
"RTN","TIUFL",65,0)
 S ^TMP("TIUF",$J,"NEWHELP")=+Y
"RTN","TIUFL",66,0)
 ;
"RTN","TIUFL",67,0)
INHERIT ; Subscript INHERIT for IFN of protocol TIUFD ACTION MENU MGR
"RTN","TIUFL",68,0)
 S DIC=101
"RTN","TIUFL",69,0)
 S X="TIUFD ACTION MENU MGR" D ^DIC G:Y=-1 SETUX
"RTN","TIUFL",70,0)
 S ^TMP("TIUF",$J,"INHERIT")=+Y
"RTN","TIUFL",71,0)
 ;
"RTN","TIUFL",72,0)
RIGHT ; Subscript RIGHT for IFN of protocol TIUF RIGHT.
"RTN","TIUFL",73,0)
 S DIC=101
"RTN","TIUFL",74,0)
 S X="TIUF RIGHT" D ^DIC G:Y=-1 SETUX
"RTN","TIUFL",75,0)
 S ^TMP("TIUF",$J,"RIGHT")=+Y
"RTN","TIUFL",76,0)
 ;
"RTN","TIUFL",77,0)
LEFT ; Subscript LEFT for IFN of protocol TIUF LEFT.
"RTN","TIUFL",78,0)
 S DIC=101
"RTN","TIUFL",79,0)
 S X="TIUF LEFT" D ^DIC G:Y=-1 SETUX
"RTN","TIUFL",80,0)
 S ^TMP("TIUF",$J,"LEFT")=+Y
"RTN","TIUFL",81,0)
 ;
"RTN","TIUFL",82,0)
CREATE ; Subscript CREATE for IFN of protocol TIUFC ACTION MENU.
"RTN","TIUFL",83,0)
 S DIC=101
"RTN","TIUFL",84,0)
 S X="TIUFC ACTION MENU" D ^DIC G:Y=-1 SETUX
"RTN","TIUFL",85,0)
 S ^TMP("TIUF",$J,"CREATE")=+Y
"RTN","TIUFL",86,0)
 ;
"RTN","TIUFL",87,0)
TYPE ; Subscripts TYPECL, TYPEDC, TYPETL, etc.
"RTN","TIUFL",88,0)
 S ^TMP("TIUF",$J,"TYPECL")="CLASS"
"RTN","TIUFL",89,0)
 S ^TMP("TIUF",$J,"TYPEDC")="DOCUMENT CLASS"
"RTN","TIUFL",90,0)
 S ^TMP("TIUF",$J,"TYPETL")="TITLE"
"RTN","TIUFL",91,0)
 S ^TMP("TIUF",$J,"TYPECO")="COMPONENT"
"RTN","TIUFL",92,0)
 S ^TMP("TIUF",$J,"TYPEO")="OBJECT"
"RTN","TIUFL",93,0)
 S ^TMP("TIUF",$J,"TYPENONE")="NONE"
"RTN","TIUFL",94,0)
 ;
"RTN","TIUFL",95,0)
STAT ; subscripts "STATI" (I for Inactive), "STATT" (T for Test),
"RTN","TIUFL",96,0)
 ;"STATA" (A for Active), "PCLSTAT", "STAT#"
"RTN","TIUFL",97,0)
 ; e.g. ^TMP("TIUF",$J,"STATI")=13^INACTIVE where
"RTN","TIUFL",98,0)
 ;   13 = TIU Status File IFN for INACTIVE.
"RTN","TIUFL",99,0)
 ; e.g. ^TMP("TIUF",$J,"STAT13")="INACTIVE" where
"RTN","TIUFL",100,0)
 ;   13 = IFN of INACTIVE in TIU Status File.
"RTN","TIUFL",101,0)
 ;
"RTN","TIUFL",102,0)
 S DIC=8925.6,DIC(0)="X"
"RTN","TIUFL",103,0)
 F TIUFI="INACTIVE","TEST","ACTIVE" D  G:Y=-1 SETUX
"RTN","TIUFL",104,0)
 . S X=TIUFI D ^DIC Q:Y=-1
"RTN","TIUFL",105,0)
 . S ^TMP("TIUF",$J,"STAT"_$E(TIUFI))=+Y_U_TIUFI,^TMP("TIUF",$J,"STAT"_+Y)=TIUFI
"RTN","TIUFL",106,0)
 . Q
"RTN","TIUFL",107,0)
SORT ; subscripts "SORT", "SORTCM" (CM for CHANGE SORT MENU),
"RTN","TIUFL",108,0)
 ; e.g. ^TMP("TIUF",$J,"SORT")=3766, =IFN of protocol TIUF SORT
"RTN","TIUFL",109,0)
 ; e.g. ^TMP("TIUF",$J,"SORTCM")=3819, =IFN of protocol TIUF CHANGE SORT MENU
"RTN","TIUFL",110,0)
 ; e.g. ^TMP("TIUF",$J,"SORTT")=3635, =IFN of protocol TIUF SORT BY TYPE
"RTN","TIUFL",111,0)
 K DIC,DA S DIC=101,DIC(0)="X",X="TIUF SORT" D ^DIC G:Y=-1 SETUX
"RTN","TIUFL",112,0)
 S ^TMP("TIUF",$J,"SORT")=+Y
"RTN","TIUFL",113,0)
 S X="TIUF CHANGE SORT MENU" D ^DIC G:Y=-1 SETUX
"RTN","TIUFL",114,0)
 S ^TMP("TIUF",$J,"SORTCM")=+Y
"RTN","TIUFL",115,0)
 F TIUFI="T^TYPE","O^OWNER","S^STATUS","U^USED BY DOCMTS","P^PARENTAGE" D  G:Y=-1 SETUX
"RTN","TIUFL",116,0)
 . S X="TIUF SORT BY "_$P(TIUFI,U,2) D ^DIC I Y=-1 Q
"RTN","TIUFL",117,0)
 . S ^TMP("TIUF",$J,"SORT"_$P(TIUFI,U))=+Y
"RTN","TIUFL",118,0)
MSG S ^TMP("TIUF",$J,"SMSG")="?Help   >ScrollRight   PS/PL PrintScrn/List   +/-"
"RTN","TIUFL",119,0)
 S ^TMP("TIUF",$J,"MSG")="? Help       +, - Next, Previous Screen     PS/PL"
"RTN","TIUFL",120,0)
 S ^TMP("TIUF",$J,"NMSG")="New Users, Please Enter '?NEW' for Help"
"RTN","TIUFL",121,0)
FLDNAM ; Single Subscripts are Field Numbers: e.g. ^TMP("TIUF",$J,4,"LABEL")="Upload Look-Up Method":
"RTN","TIUFL",122,0)
 S ^TMP("TIUF",$J,0,"LABEL")="IFN^BASICS"
"RTN","TIUFL",123,0)
 S ^TMP("TIUF",$J,1.03,"LABEL")="TARGET TEXT FIELD"
"RTN","TIUFL",124,0)
 F TIUFI=.01:.01:.13,1.01,1.02,2,3,3.02,3.03,4,4.5,4.6,4.7,4.8,5,6,6.1,6.12,6.13,6.14,7,8,9,10 D FIELD^DID(8925.1,TIUFI,"","LABEL","^TMP(""TIUF"",$J,TIUFI)")
"RTN","TIUFL",125,0)
 ;S ^TMP("TIUF",$J,.05,"LABEL")="OWNER^BASICS"
"RTN","TIUFL",126,0)
 ; Double Subscripts are Field Numbers of Multiples,SubField Numbers: e.g
"RTN","TIUFL",127,0)
 ;^TMP("TIUF",$J,1,.01,"LABEL")="Header Piece", the .01 subfield of Multiple field 1:
"RTN","TIUFL",128,0)
 F TIUFI=.01:.01:.07,1 D FIELD^DID(8925.11,TIUFI,"","LABEL","^TMP(""TIUF"",$J,1,TIUFI)"),FIELD^DID(8925.12,TIUFI,"","LABEL","^TMP(""TIUF"",$J,2,TIUFI)")
"RTN","TIUFL",129,0)
 F TIUFI=2,3,4 D FIELD^DID(8925.14,TIUFI,"","LABEL","^TMP(""TIUF"",$J,10,TIUFI)")
"RTN","TIUFL",130,0)
 ;
"RTN","TIUFL",131,0)
FLDTYPE ; Sets ^ piece after FLDNAME = BASICS, TECH, UPLOAD or UPHEAD, i.e. which part of the display the field is in.
"RTN","TIUFL",132,0)
 F TIUFI=.01:.01:.13,3.02,3.03 S $P(^TMP("TIUF",$J,TIUFI,"LABEL"),U,2)="BASICS"
"RTN","TIUFL",133,0)
 F TIUFI=4.6,4.7,5,6,6.1,6.12,6.13,6.14,7,8,9 S $P(^TMP("TIUF",$J,TIUFI,"LABEL"),U,2)="TECH"
"RTN","TIUFL",134,0)
 F TIUFI=1.01:.01:1.03,4,4.5,4.8 S $P(^TMP("TIUF",$J,TIUFI,"LABEL"),U,2)="UPLOAD"
"RTN","TIUFL",135,0)
 F TIUFI=.01:.01:.07,1,2 S $P(^TMP("TIUF",$J,1,TIUFI,"LABEL"),U,2)="UPHEAD",$P(^TMP("TIUF",$J,2,TIUFI,"LABEL"),U,2)="UPHEAD"
"RTN","TIUFL",136,0)
SETUX I $G(Y)=-1 W !!," Missing Basic Variables; See IRM.",! D PAUSE^TIUFXHLX S VALMQUIT=1
"RTN","TIUFL",137,0)
 Q
"RTN","TIUFL",138,0)
 ;
"RTN","TIUFL",139,0)
RMSG ; redisplays standard TIUF msg.  Sets VALMSG=stnd msg.  Called by items of LM Protocol Menus, items of TIUF HIDDEN ACTIONS.
"RTN","TIUFL",140,0)
 ; Requires TIUFSTMP if currently in subtemplate;
"RTN","TIUFL",141,0)
 ; Requires TIUF messages as set in TIUFL.
"RTN","TIUFL",142,0)
 N MSG
"RTN","TIUFL",143,0)
 S VALMSG=$$VMSG
"RTN","TIUFL",144,0)
 D MSG^VALM10(MSG)
"RTN","TIUFL",145,0)
 Q
"RTN","TIUFL",146,0)
 ;
"RTN","TIUFL",147,0)
VMSG() ; Function returns standard VALMSG for a Template.
"RTN","TIUFL",148,0)
 N VMSG
"RTN","TIUFL",149,0)
 I $G(TIUFCBEG) S VMSG=^TMP("TIUF",$J,"NMSG") G VMSG1
"RTN","TIUFL",150,0)
 I "HACJ"[TIUFTMPL,'$D(TIUFSTMP) D  G VMSG1
"RTN","TIUFL",151,0)
 . I $P($G(XQORNOD),";")=^TMP("TIUF",$J,"RIGHT") S VMSG=^TMP("TIUF",$J,"MSG") Q
"RTN","TIUFL",152,0)
 . I $P($G(XQORNOD),";")=^TMP("TIUF",$J,"LEFT") S VMSG=^TMP("TIUF",$J,"SMSG") Q
"RTN","TIUFL",153,0)
 . I $G(VALMLFT)<80 S VMSG=^TMP("TIUF",$J,"SMSG") Q
"RTN","TIUFL",154,0)
 . S VMSG=^TMP("TIUF",$J,"MSG")
"RTN","TIUFL",155,0)
 I $G(TIUFSTMP)="T" D  G VMSG1
"RTN","TIUFL",156,0)
 . I $P($G(XQORNOD),";")=^TMP("TIUF",$J,"RIGHT") S VMSG=^TMP("TIUF",$J,"MSG") Q
"RTN","TIUFL",157,0)
 . I $P($G(XQORNOD),";")=^TMP("TIUF",$J,"LEFT") S VMSG=^TMP("TIUF",$J,"SMSG") Q
"RTN","TIUFL",158,0)
 . I $G(VALMLFT)<80 S VMSG=^TMP("TIUF",$J,"SMSG") Q
"RTN","TIUFL",159,0)
 . S VMSG=^TMP("TIUF",$J,"MSG")
"RTN","TIUFL",160,0)
 I $G(TIUFSTMP)="D"!($G(TIUFSTMP)="X") S VMSG=^TMP("TIUF",$J,"MSG")
"RTN","TIUFL",161,0)
VMSG1 Q VMSG
"RTN","TIUFL",162,0)
 ;
"RTN","TIUFL1")
0^45^B22888029
"RTN","TIUFL1",1,0)
TIUFL1 ; SLC/MAM - Library of Modules and Functions: RIGHT, LEFT ;10/25/95  11:50
"RTN","TIUFL1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFL1",3,0)
 ;
"RTN","TIUFL1",4,0)
RIGHT(TIUFXNOD) ; Action Move View to right: resets VALM("FIXED"), VALMLFT; Sets Type into truncated Name. If in a template, not a subtemplate, sets TIUFLFT to VALMLFT for the template.
"RTN","TIUFL1",5,0)
 ; Requires TIUFXNOD = XQORNOD(0) if doing Action Right, = 0^0^PL if doing Action Print List
"RTN","TIUFL1",6,0)
 N TYPE,MOVE,GOINGEND,RMSUFFIX,NEXTSTND,FIXED,WHO,FIELD
"RTN","TIUFL1",7,0)
 N DTOUT,DIRUT,DIROUT,DUOUT,RM
"RTN","TIUFL1",8,0)
 S WHO=$S(TIUFWHO="N":"M",1:TIUFWHO)
"RTN","TIUFL1",9,0)
 S RMSUFFIX=$S($D(TIUFSTMP):TIUFSTMP,1:TIUFTMPL),RMSUFFIX=RMSUFFIX_$S("TD"'[RMSUFFIX:WHO,1:"")
"RTN","TIUFL1",10,0)
 S GOINGEND=0,MOVE=$P($P(TIUFXNOD,U,4),"=",3)
"RTN","TIUFL1",11,0)
 I $G(TIUFSTMP)="D"!($G(TIUFSTMP)="X") W $C(7) S VALMBCK="" Q
"RTN","TIUFL1",12,0)
 S FIXED=VALM("FIXED") S:$G(TIUFSTMP)="" FIXED=20 ; Template H, A,C, or J
"RTN","TIUFL1",13,0)
 S RM=TIUF("RM"_RMSUFFIX)-80+FIXED ;RM= a sort of 'right margin' for VALMLFT, ie Max that VALMLFT can be without going beyond LM Template RM.
"RTN","TIUFL1",14,0)
 I VALMLFT=RM W $C(7) S VALMBCK="" Q  ;already at right
"RTN","TIUFL1",15,0)
 D  ; Mark all cases where go to end:
"RTN","TIUFL1",16,0)
 . I MOVE?1">".E S GOINGEND=1 Q
"RTN","TIUFL1",17,0)
 . I MOVE,VALMLFT+MOVE'<RM S GOINGEND=1 Q
"RTN","TIUFL1",18,0)
 . S NEXTSTND=+$$STND("R") I 'MOVE,NEXTSTND'<RM S GOINGEND=1
"RTN","TIUFL1",19,0)
 I GOINGEND S VALMLFT=RM D  G RIGHX
"RTN","TIUFL1",20,0)
 . I $G(TIUFSTMP)="" S VALM("FIXED")=20 D:(TIUFTMPL'="J") INSTYPE D:TIUFTMPL="J" INSBLNK
"RTN","TIUFL1",21,0)
 ; NOT Going to End:
"RTN","TIUFL1",22,0)
 ; If HACJ, if move just a bit from beg so Type (J:Status) will still show, then move to next stnd position to prevent NAME2 from scrolling behind NAME1:
"RTN","TIUFL1",23,0)
 S FIELD=$S(TIUFTMPL="J":"STATUS",1:"TYPE")
"RTN","TIUFL1",24,0)
 I $G(TIUFSTMP)="",MOVE,(VALMLFT+MOVE)'>$P(VALMDDF(FIELD),U,2) S MOVE=0
"RTN","TIUFL1",25,0)
 I $G(TIUFSTMP)="" D:(TIUFTMPL'="J") INSTYPE D:(TIUFTMPL="J") INSBLNK
"RTN","TIUFL1",26,0)
 S VALMLFT=$S(MOVE:VALMLFT+MOVE,1:NEXTSTND)
"RTN","TIUFL1",27,0)
RIGHX I $P(TIUFXNOD,U,3)=">" S VALMBCK="R"
"RTN","TIUFL1",28,0)
 I $D(TIUFTMPL),'$D(TIUFSTMP) S TIUFLFT=+$G(VALMLFT)
"RTN","TIUFL1",29,0)
 Q
"RTN","TIUFL1",30,0)
 ;
"RTN","TIUFL1",31,0)
INSTYPE ; Insert Type into end of truncated Names:
"RTN","TIUFL1",32,0)
 ; Needs GOINGEND
"RTN","TIUFL1",33,0)
 N LINENO,TIUREC
"RTN","TIUFL1",34,0)
 F LINENO=1:1:VALMCNT  D  S ^TMP("TIUF1",$J,LINENO,0)=TIUREC
"RTN","TIUFL1",35,0)
 . S TIUREC=^TMP("TIUF1",$J,LINENO,0),TYPE=" "_$E(TIUREC,77,80)_" "
"RTN","TIUFL1",36,0)
 . I GOINGEND S TIUREC=$$SETSTR^VALM1(TYPE,TIUREC,15,6) Q
"RTN","TIUFL1",37,0)
 . I VALMLFT=49 S TIUREC=$$SETSTR^VALM1(TYPE,TIUREC,43,6)
"RTN","TIUFL1",38,0)
 I GOINGEND D CHGCAP^VALM("NAME1","Name    Type") Q
"RTN","TIUFL1",39,0)
 I VALMLFT=49 D CHGCAP^VALM("NAME1","Name                                Type")
"RTN","TIUFL1",40,0)
 Q
"RTN","TIUFL1",41,0)
 ;
"RTN","TIUFL1",42,0)
INSBLNK ; Insert Blank into end of truncated Names:
"RTN","TIUFL1",43,0)
 ; Needs GOINGEND
"RTN","TIUFL1",44,0)
 N LINENO,TIUREC
"RTN","TIUFL1",45,0)
 F LINENO=1:1:VALMCNT  D  S ^TMP("TIUF1",$J,LINENO,0)=TIUREC
"RTN","TIUFL1",46,0)
 . S TIUREC=^TMP("TIUF1",$J,LINENO,0)
"RTN","TIUFL1",47,0)
 . I GOINGEND S TIUREC=$$SETSTR^VALM1(" ",TIUREC,20,1) Q
"RTN","TIUFL1",48,0)
 . I VALMLFT=49 S TIUREC=$$SETSTR^VALM1(" ",TIUREC,48,1)
"RTN","TIUFL1",49,0)
 Q
"RTN","TIUFL1",50,0)
 ;
"RTN","TIUFL1",51,0)
LEFT(TIUFXNOD) ; Action Move View to left: resets VALM("FIXED"), VALMLFT; Takes Type out of Name, refills the hole.
"RTN","TIUFL1",52,0)
 ; Requires TIUFXNOD = XQORNOD(0) if doing Action Left, = 0^0^PL if doing Action Print List
"RTN","TIUFL1",53,0)
 N TYPE,GOINGBEG,MOVE,STND,LM,NEXTSTND,FIELD,DTOUT,DIRUT,DIROUT
"RTN","TIUFL1",54,0)
 S GOINGBEG=0,MOVE=$P($P(TIUFXNOD,U,4),"=",3)
"RTN","TIUFL1",55,0)
 I $G(TIUFSTMP)="D"!($G(TIUFSTMP)="X") W $C(7) S VALMBCK="" Q
"RTN","TIUFL1",56,0)
 S STND=$$STND("L"),NEXTSTND=+STND,LM=$P(STND,U,2) ; A kind of 'Left Margin for VALMLFT, ie, minumum value
"RTN","TIUFL1",57,0)
 I VALMLFT=LM W $C(7) S VALMBCK="" Q  ;already at right
"RTN","TIUFL1",58,0)
 D  ; Mark all cases where go to beg:
"RTN","TIUFL1",59,0)
 . I MOVE?1"<".E S GOINGBEG=1 Q
"RTN","TIUFL1",60,0)
 . I $P(TIUFXNOD,U,3)="PL" S GOINGBEG=1 Q
"RTN","TIUFL1",61,0)
 . ; If HACJ, if Type (J:Status) will show then move to beg to prevent NAME2 from scrolling behind NAME1:
"RTN","TIUFL1",62,0)
 . S FIELD=$S(TIUFTMPL="J":"STATUS",1:"TYPE")
"RTN","TIUFL1",63,0)
 . I $G(TIUFSTMP)="",MOVE,(VALMLFT-MOVE)<$P(VALMDDF(FIELD),U,2) S GOINGBEG=1 Q
"RTN","TIUFL1",64,0)
 . I 'MOVE,NEXTSTND=LM S GOINGBEG=1
"RTN","TIUFL1",65,0)
 I $G(TIUFSTMP)="" D REFILL
"RTN","TIUFL1",66,0)
 I VALM("FIXED")=20 S VALM("FIXED")=48
"RTN","TIUFL1",67,0)
 I GOINGBEG S VALMLFT=LM G LEFTX
"RTN","TIUFL1",68,0)
 ; NOT Going to beg:
"RTN","TIUFL1",69,0)
 S VALMLFT=$S(MOVE:VALMLFT-MOVE,1:NEXTSTND)
"RTN","TIUFL1",70,0)
LEFTX I $P(TIUFXNOD,U,3)="<" S VALMBCK="R"
"RTN","TIUFL1",71,0)
 I $D(TIUFTMPL),'$D(TIUFSTMP) S TIUFLFT=+$G(VALMLFT)
"RTN","TIUFL1",72,0)
 Q
"RTN","TIUFL1",73,0)
 ;
"RTN","TIUFL1",74,0)
STND(DIRECTN) ; Function returns NEXTSTND^STND(0), where NEXTSTND = next Standard Position to the RIGHT/LEFT, STND(0) = leftmost position for VALMLFT ( = VLAM("FIXED")+1)
"RTN","TIUFL1",75,0)
 N TIUFI,TIUFJ,NEXTSTND,STND,START,MOVE
"RTN","TIUFL1",76,0)
 S START=$S($G(TIUFSTMP)="T":34,1:49) ; "HACJ"[TIUFTMPL:49
"RTN","TIUFL1",77,0)
 S MOVE=80-START+1
"RTN","TIUFL1",78,0)
 F TIUFI=0:1:5 S STND(TIUFI)=START+(TIUFI*MOVE)
"RTN","TIUFL1",79,0)
 I DIRECTN="R" F TIUFJ=1:1:5 S STND=STND(TIUFJ) S:TIUFJ=5 NEXTSTND=STND I STND>VALMLFT S NEXTSTND=STND_U_STND(0) Q
"RTN","TIUFL1",80,0)
 I DIRECTN="L" F TIUFJ=5:-1:0 S STND=STND(TIUFJ) S:'TIUFJ NEXTSTND=STND I STND<VALMLFT S NEXTSTND=STND_U_STND(0) Q
"RTN","TIUFL1",81,0)
 Q NEXTSTND_U_STND(0)
"RTN","TIUFL1",82,0)
 ;
"RTN","TIUFL1",83,0)
REFILL ; Fill in holes in Name
"RTN","TIUFL1",84,0)
 ; Needs GOINGBEG
"RTN","TIUFL1",85,0)
 N LINENO,TIUREC,HOLE
"RTN","TIUFL1",86,0)
 F LINENO=1:1:VALMCNT  D  S ^TMP("TIUF1",$J,LINENO,0)=TIUREC
"RTN","TIUFL1",87,0)
 . S TIUREC=^TMP("TIUF1",$J,LINENO,0)
"RTN","TIUFL1",88,0)
 . I VALM("FIXED")=20 D
"RTN","TIUFL1",89,0)
 . . I TIUFTMPL="J" S HOLE=$E(TIUREC,220),TIUREC=$$SETSTR^VALM1(HOLE,TIUREC,20,1) I 'GOINGBEG S TIUREC=$$SETSTR^VALM1(" ",TIUREC,48,1) Q
"RTN","TIUFL1",90,0)
 . . S HOLE=$E(TIUREC,215,220),TIUREC=$$SETSTR^VALM1(HOLE,TIUREC,15,6) I 'GOINGBEG S TYPE=" "_$E(TIUREC,77,80)_" ",TIUREC=$$SETSTR^VALM1(TYPE,TIUREC,43,6)
"RTN","TIUFL1",91,0)
 . I GOINGBEG D
"RTN","TIUFL1",92,0)
 . . I TIUFTMPL="J" S HOLE=$E(TIUREC,248),TIUREC=$$SETSTR^VALM1(HOLE,TIUREC,48,1) Q
"RTN","TIUFL1",93,0)
 . . S HOLE=$E(TIUREC,243,248),TIUREC=$$SETSTR^VALM1(HOLE,TIUREC,43,6)
"RTN","TIUFL1",94,0)
 I GOINGBEG,TIUFTMPL'="J" D CHGCAP^VALM("NAME1","Name") Q
"RTN","TIUFL1",95,0)
 I TIUFTMPL'="J" D CHGCAP^VALM("NAME1","Name                                Type")
"RTN","TIUFL1",96,0)
 Q
"RTN","TIUFL1",97,0)
 ;
"RTN","TIUFLA")
0^46^B17403761
"RTN","TIUFLA",1,0)
TIUFLA ; SLC/MAM - Library; Template A Related: SELSTART, MATCH(FILEDA), TYPMATCH(FILEDA,ATYPE), OWNMATCH(FILEDA,AOWN), STTMATCH(FILEDA,ASTAT), USEMATCH(FILEDA,AUSE), STRMATCH(FILEDA,NODE0), PARMATCH(FILEDA,APARE) ;4/23/97  11:02
"RTN","TIUFLA",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLA",3,0)
 ;
"RTN","TIUFLA",4,0)
SELSTART ; Select Docmt Def to Start with and to Go To
"RTN","TIUFLA",5,0)
 ; Sets TIUFSTRT = Start^Stop where Start and Stop are characters to
"RTN","TIUFLA",6,0)
 ;start and stop display with.
"RTN","TIUFLA",7,0)
 N DIR,X,Y,START,GOTO
"RTN","TIUFLA",8,0)
 W !! S DIR(0)="FO^1:60^S:$L($T(^TIULS)) X=$$UPPER^TIULS(X) K:'(X'?1P.E) X",(DIR("?"),DIR("??"))="^D HELP^TIUFLA(""start"")"
"RTN","TIUFLA",9,0)
 S DIR("A")="START WITH DOCUMENT DEFINITION",DIR("B")="FIRST"
"RTN","TIUFLA",10,0)
 I TIUFTMPL="J" S DIR("A")="START DISPLAY WITH OBJECT"
"RTN","TIUFLA",11,0)
 D ^DIR I $D(DIRUT),'$D(TIUFSTRT) G SELSX
"RTN","TIUFLA",12,0)
 S START=Y,START=$$UPPER^TIULS(START)
"RTN","TIUFLA",13,0)
 I START="FIRST" S TIUFSTRT=" ^ZZZZZZZZ" G SELSX
"RTN","TIUFLA",14,0)
 S DIR("A")="GO TO DOCUMENT DEFINITION",DIR("B")="LAST"
"RTN","TIUFLA",15,0)
 I TIUFTMPL="J" S DIR("A")="GO TO OBJECT"
"RTN","TIUFLA",16,0)
 S (DIR("?"),DIR("??"))="^D HELP^TIUFLA(""end"")"
"RTN","TIUFLA",17,0)
 D ^DIR I $D(DIRUT) G SELSX
"RTN","TIUFLA",18,0)
 S GOTO=$S(Y="LAST":"ZZZZZZZZ",1:Y),GOTO=$$UPPER^TIULS(GOTO)
"RTN","TIUFLA",19,0)
 S TIUFSTRT=START_U_GOTO
"RTN","TIUFLA",20,0)
SELSX Q
"RTN","TIUFLA",21,0)
 ;
"RTN","TIUFLA",22,0)
HELP(STRTEND) ; Writes help for SELSTART
"RTN","TIUFLA",23,0)
 N DDEFOBJ S DDEFOBJ=$S(TIUFTMPL'="J":"Document Definition",1:"Object")
"RTN","TIUFLA",24,0)
 W !,"What ",DDEFOBJ," would you like to ",STRTEND," the display with?  Enter a",!,"partial/whole ",DDEFOBJ," name, or just enter some letters."
"RTN","TIUFLA",25,0)
 Q
"RTN","TIUFLA",26,0)
 ;
"RTN","TIUFLA",27,0)
MATCH(FILEDA) ; Function returns 1 if FILEDA matches Template A Sort
"RTN","TIUFLA",28,0)
 ;Attribute, and Sort Attribute Value.
"RTN","TIUFLA",29,0)
 ;Else Returns e.g. 0^TYPE if Type is where match fails.
"RTN","TIUFLA",30,0)
 ; Requires TIUFATTR, TIUFAVAL.  See HDR^TIUFA
"RTN","TIUFLA",31,0)
 N ANS,ATTR1 S ANS=0
"RTN","TIUFLA",32,0)
 S ATTR1=$P(TIUFATTR,U)
"RTN","TIUFLA",33,0)
 I ATTR1="T" S ANS=$S($$TYPMATCH(FILEDA,TIUFAVAL):1,1:"0^TYPE")
"RTN","TIUFLA",34,0)
 I ATTR1="O" S ANS=$S($$OWNMATCH(FILEDA,TIUFAVAL):1,1:"0^OWNER")
"RTN","TIUFLA",35,0)
 I ATTR1="S" S ANS=$S($$STTMATCH(FILEDA,TIUFAVAL):1,1:"0^STATUS")
"RTN","TIUFLA",36,0)
 I ATTR1="U" S ANS=$S($$USEMATCH(FILEDA,TIUFAVAL):1,1:"0^WAY USED")
"RTN","TIUFLA",37,0)
 I ATTR1="P" S ANS=$S($$PARMATCH(FILEDA,TIUFAVAL):1,1:"0^PARENTAGE")
"RTN","TIUFLA",38,0)
 I ATTR1="A" S ANS=1
"RTN","TIUFLA",39,0)
 Q ANS
"RTN","TIUFLA",40,0)
 ;
"RTN","TIUFLA",41,0)
TYPMATCH(FILEDA,ATYPE) ; Function returns 1 if Type of FILEDA matches
"RTN","TIUFLA",42,0)
 ;Template A Type Value, else 0.
"RTN","TIUFLA",43,0)
 ; Requires FILEDA; Requires ATYPE=TIUFAVAL when TIUFATTR="T^TYPE".
"RTN","TIUFLA",44,0)
 ;See HDR^TIUFA.  Requires TIUFATTR.
"RTN","TIUFLA",45,0)
 N MATCH
"RTN","TIUFLA",46,0)
 I '$G(FILEDA)!'$D(ATYPE)!(TIUFATTR'="T^TYPE") S MATCH="ERR" G TYPMX
"RTN","TIUFLA",47,0)
 S MATCH=0,ATYPE=$P(ATYPE,U) I ATYPE="TL" S ATYPE="DOC"
"RTN","TIUFLA",48,0)
 I ATYPE="NONE" S:($P(^TIU(8925.1,FILEDA,0),U,4)="") MATCH=1 G TYPMX
"RTN","TIUFLA",49,0)
 I '$D(^TIU(8925.1,"AT",ATYPE,FILEDA)) G TYPMX
"RTN","TIUFLA",50,0)
 S MATCH=1
"RTN","TIUFLA",51,0)
TYPMX Q MATCH
"RTN","TIUFLA",52,0)
 ;
"RTN","TIUFLA",53,0)
OWNMATCH(FILEDA,AOWN) ; Function returns 1 if FILEDA matches Template A Owner
"RTN","TIUFLA",54,0)
 ;Value, Else 0.
"RTN","TIUFLA",55,0)
 ; Requires FILEDA; Requires AOWN=TIUFAVAL when TIUFATTR="O^OWNER".
"RTN","TIUFLA",56,0)
 ;See HDR^TIUFA.  Requires TIUFATTR.
"RTN","TIUFLA",57,0)
 N MATCH,PERSOWNS,NODE0
"RTN","TIUFLA",58,0)
 S MATCH=0
"RTN","TIUFLA",59,0)
 I '$G(FILEDA)!'$D(AOWN) G OWNMX
"RTN","TIUFLA",60,0)
 I $P(AOWN,U,3)="P"!($P(AOWN,U,3)="I")!(TIUFATTR'="O^OWNER") D  G OWNMX
"RTN","TIUFLA",61,0)
 . S PERSOWNS=$$PERSOWNS^TIUFLF2(FILEDA,+AOWN)
"RTN","TIUFLA",62,0)
 . I $P(AOWN,U,3)="P",$P(PERSOWNS,U,2)'="P" Q
"RTN","TIUFLA",63,0)
 . I $P(AOWN,U,3)="I",'PERSOWNS Q
"RTN","TIUFLA",64,0)
 . S MATCH=1
"RTN","TIUFLA",65,0)
 . Q
"RTN","TIUFLA",66,0)
 I $P(AOWN,U,3)="C",'$D(^TIU(8925.1,"AC",+AOWN,FILEDA)) G OWNMX
"RTN","TIUFLA",67,0)
 I $P(AOWN,U,2)="NONE" S NODE0=^TIU(8925.1,FILEDA,0) I $L($P(NODE0,U,5))!$L($P(NODE0,U,6)) G OWNMX
"RTN","TIUFLA",68,0)
 S MATCH=1
"RTN","TIUFLA",69,0)
OWNMX Q MATCH
"RTN","TIUFLA",70,0)
 ;
"RTN","TIUFLA",71,0)
STTMATCH(FILEDA,ASTAT) ; Function returns 1 if Status of FILEDA matches
"RTN","TIUFLA",72,0)
 ;Template A STatus Value ASTAT, else 0.
"RTN","TIUFLA",73,0)
 ; Fudge:  If ASTAT is A, I, or T, don't match a shared Component no matter what its .07 fld value is.  However, if ASTAT=0 (NONE), match Shared Component no matter what its .07 fld value is.
"RTN","TIUFLA",74,0)
 ; Requires FILEDA; Requires ASTAT=TIUFAVAL when TIUFATTR="S^STATUS".
"RTN","TIUFLA",75,0)
 ;See HDR^TIUFA.  Requires TIUFATTR.
"RTN","TIUFLA",76,0)
 N MATCH,NODE0
"RTN","TIUFLA",77,0)
 S MATCH=0,ASTAT=$P(ASTAT,U)
"RTN","TIUFLA",78,0)
 I '$G(FILEDA)!'$D(ASTAT)!(TIUFATTR'="S^STATUS") S MATCH="ERR" G STTMX
"RTN","TIUFLA",79,0)
 I $D(^TIU(8925.1,"AS",ASTAT,FILEDA)) S NODE0=^TIU(8925.1,FILEDA,0) I '$P(NODE0,U,10) S MATCH=1 G STTMX
"RTN","TIUFLA",80,0)
 I (ASTAT=0),'$P(^TIU(8925.1,FILEDA,0),U,7) S MATCH=1 G STTMX
"RTN","TIUFLA",81,0)
 I (ASTAT=0) S NODE0=^TIU(8925.1,FILEDA,0) I $P(NODE0,U,10) S MATCH=1
"RTN","TIUFLA",82,0)
STTMX Q MATCH
"RTN","TIUFLA",83,0)
 ;
"RTN","TIUFLA",84,0)
USEMATCH(FILEDA,AUSE) ; Function returns 1 if Way Used By Docmts of
"RTN","TIUFLA",85,0)
 ;FILEDA matches Template A Way Used Value, else 0.
"RTN","TIUFLA",86,0)
 ; Requires FILEDA; Requires AUSE=TIUFAVAL when TIUFATTR="U^WAY USED",
"RTN","TIUFLA",87,0)
 ;=YES,NO,NA or UNKNOWN.
"RTN","TIUFLA",88,0)
 ;See HDR^TIUFA.  Requires TIUFATTR.
"RTN","TIUFLA",89,0)
 N MATCH,DDEFUSED
"RTN","TIUFLA",90,0)
 I '$G(FILEDA)!'$D(AUSE)!(TIUFATTR'="U^WAY USED") S MATCH="ERR" G USEMX
"RTN","TIUFLA",91,0)
 S MATCH=0,DDEFUSED=$$DDEFUSED^TIUFLF(FILEDA)
"RTN","TIUFLA",92,0)
 I DDEFUSED["UNKNOWN",AUSE="UNKNOWN" S MATCH=1 G USEMX ; UNKNOWN[NO!!!
"RTN","TIUFLA",93,0)
 I DDEFUSED=AUSE S MATCH=1 G USEMX
"RTN","TIUFLA",94,0)
USEMX Q MATCH
"RTN","TIUFLA",95,0)
 ;
"RTN","TIUFLA",96,0)
PARMATCH(FILEDA,APARE) ; Function returns 1 if Parentage of FILEDA matches
"RTN","TIUFLA",97,0)
 ;Template A Parentage Value, else 0.
"RTN","TIUFLA",98,0)
 ; Requires FILEDA; Requires APARE=TIUFAVAL when TIUFATTR="P^PARENTAGE".
"RTN","TIUFLA",99,0)
 ;See HDR^TIUFA.  Requires TIUFATTR.
"RTN","TIUFLA",100,0)
 N MATCH,ORPHAN,NODE0
"RTN","TIUFLA",101,0)
 S MATCH=0,APARE=$P(APARE,U)
"RTN","TIUFLA",102,0)
 I '$G(FILEDA)!'$D(APARE)!(TIUFATTR'="P^PARENTAGE") S MATCH="ERR" G PARMX
"RTN","TIUFLA",103,0)
 S NODE0=^TIU(8925.1,FILEDA,0),ORPHAN=$$ORPHAN^TIUFLF4(FILEDA,NODE0)
"RTN","TIUFLA",104,0)
 I ORPHAN="YES",$P(APARE,U)="O" S MATCH=1
"RTN","TIUFLA",105,0)
 I ORPHAN="NO",$P(APARE,U)="N" S MATCH=1
"RTN","TIUFLA",106,0)
PARMX Q MATCH
"RTN","TIUFLA",107,0)
 ;
"RTN","TIUFLA",108,0)
STRMATCH(FILEDA,NODE0) ; Function returns 1 if FILEDA Name matches Template A
"RTN","TIUFLA",109,0)
 ;Start With/Go To Value, Else 0.
"RTN","TIUFLA",110,0)
 ; Requires FILEDA, NODE0= ^TIU(8925.1,FILEDA,0).
"RTN","TIUFLA",111,0)
 ; Requires TIUFSTRT as set in SELSTART^TIUFLA.
"RTN","TIUFLA",112,0)
 N NAME,ANS
"RTN","TIUFLA",113,0)
 S NAME=$P(NODE0,U)
"RTN","TIUFLA",114,0)
 I $P(TIUFSTRT,U)']NAME,NAME']$P(TIUFSTRT,U,2) S ANS=1 G STRMX
"RTN","TIUFLA",115,0)
 S ANS=0
"RTN","TIUFLA",116,0)
STRMX Q ANS
"RTN","TIUFLA",117,0)
 ;
"RTN","TIUFLA1")
0^47^B8695881
"RTN","TIUFLA1",1,0)
TIUFLA1 ; SLC/MAM - Library; Template A,J (DDEFs by Attribute), (Objects) Related: AUPDATE(NODE0,FILEDA,CNTCHNG,NLINENO), SETENTYA(NODE0,FILEDA,FDALNO), IPOINT(NODE0), NOINUSE ;4/6/95  11:02
"RTN","TIUFLA1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLA1",3,0)
 ;
"RTN","TIUFLA1",4,0)
NOINUSE ; If Type is Object for Template A,J blanks out In Use Caption. Called by protocols TIUFA ACTION MENU.
"RTN","TIUFLA1",5,0)
 I $G(TIUFAVAL)="O^OBJECT" D CHGCAP^VALM("INUSE","")
"RTN","TIUFLA1",6,0)
 I $G(TIUFAVAL)'="O^OBJECT" D CHGCAP^VALM("INUSE","In Use")
"RTN","TIUFLA1",7,0)
 Q
"RTN","TIUFLA1",8,0)
 ;
"RTN","TIUFLA1",9,0)
AUPDATE(NODE0,FILEDA,CNTCHNG,FDALNO) ; Updates LM Template A,J (DDEFs by Attribute), (Objects)
"RTN","TIUFLA1",10,0)
 ;with one new or edited LM Line if entry FILEDA matches Template A,J
"RTN","TIUFLA1",11,0)
 ;Attribute, Attribute VAlue, and Start With/Go To Value.
"RTN","TIUFLA1",12,0)
 ; Updates Arrays TIUFINFO, TIUFNOD0 via UPDATE^TIUFLLM1.
"RTN","TIUFLA1",13,0)
 ; Requires CURRENT NODE0 = ^TIU(8925.1,FILEDA,0); Requires FILEDA.
"RTN","TIUFLA1",14,0)
 ; Requires TIUFATTR,TIUFAVAL, and TIUFSTRT.  See HDR^TIUFA.
"RTN","TIUFLA1",15,0)
 ; Returns FDALNO= LM Lineno of new/updated entry FILEDA or = 0 if
"RTN","TIUFLA1",16,0)
 ;no match. Optional.
"RTN","TIUFLA1",17,0)
 ; Returns CNTCHNG = # lines added or deleted (+ or -)
"RTN","TIUFLA1",18,0)
 ;
"RTN","TIUFLA1",19,0)
 N PREVNAME,PREVFDA,INFO,SCRNL,MATCH
"RTN","TIUFLA1",20,0)
 ; DEAL WITH $E(NAME);MAM
"RTN","TIUFLA1",21,0)
 S MATCH=$$MATCH^TIUFLA(FILEDA)&$$STRMATCH^TIUFLA(FILEDA,NODE0)
"RTN","TIUFLA1",22,0)
 S FDALNO=+$O(^TMP("TIUF1IDX",$J,"DAF",FILEDA,0)),INFO=$G(^TMP("TIUF1IDX",$J,FDALNO))
"RTN","TIUFLA1",23,0)
 I INFO="" S INFO=0
"RTN","TIUFLA1",24,0)
 ; FDALNO = lineno of FILEDA's original LM entry.  If no entry, FDALNO=0.
"RTN","TIUFLA1",25,0)
 I MATCH G MATCH
"RTN","TIUFLA1",26,0)
NOMATCH ; If no match, FILEDA has no entry, then Quit.  If no match, FILEDA
"RTN","TIUFLA1",27,0)
 ;has entry, then delete entry, reset TIUFINFO so that piece/subscript
"RTN","TIUFLA1",28,0)
 ;Lineno are 0:
"RTN","TIUFLA1",29,0)
 I 'FDALNO S CNTCHNG=0 Q
"RTN","TIUFLA1",30,0)
 D UPDATE^TIUFLLM1(TIUFTMPL,-1,FDALNO-1) S CNTCHNG=-1
"RTN","TIUFLA1",31,0)
 I FILEDA=$G(TIUFINFO("FILEDA")) S $P(TIUFINFO,U)=0,TIUFINFO("LINENO")=0
"RTN","TIUFLA1",32,0)
 G AUPDX
"RTN","TIUFLA1",33,0)
MATCH ; 
"RTN","TIUFLA1",34,0)
 G:FDALNO HAS
"RTN","TIUFLA1",35,0)
HASNO ; If match, FILEDA has no LM entry, set LM entry. (Happens if setting
"RTN","TIUFLA1",36,0)
 ;rather than updating Template A, or if LM entry was edited in such a
"RTN","TIUFLA1",37,0)
 ;way that it no longer met sort criteria and was deleted as a LM entry.)
"RTN","TIUFLA1",38,0)
 ; If entry=TIUFINFO("FILEDA"), reset lineno piece/subscript of TIUFINFO:
"RTN","TIUFLA1",39,0)
 D SETENTYA(NODE0,FILEDA,.FDALNO) S CNTCHNG=1 G AUPDX
"RTN","TIUFLA1",40,0)
HAS ; I match, FILEDA has LM entry, reset entry.
"RTN","TIUFLA1",41,0)
 D PARSE^TIUFLLM(.INFO),NODE0ARR^TIUFLF(FILEDA,.NODE0) G:$D(DTOUT) AUPDX
"RTN","TIUFLA1",42,0)
 D BUFENTRY^TIUFLLM2(.INFO,.NODE0,TIUFTMPL)
"RTN","TIUFLA1",43,0)
 D UPDATE^TIUFLLM1(TIUFTMPL,0,FDALNO-1)
"RTN","TIUFLA1",44,0)
 S CNTCHNG=0
"RTN","TIUFLA1",45,0)
AUPDX Q
"RTN","TIUFLA1",46,0)
 ;
"RTN","TIUFLA1",47,0)
SETENTYA(NODE0,FILEDA,NLINENO) ; Set LM Template A,J entry w data NODE0, IFN FILEDA at NLINENO.
"RTN","TIUFLA1",48,0)
 ; Requires NODE0,FILEDA
"RTN","TIUFLA1",49,0)
 ; Returns NLINENO
"RTN","TIUFLA1",50,0)
 N INFO
"RTN","TIUFLA1",51,0)
 S NLINENO=$$IPOINT(NODE0,FILEDA)
"RTN","TIUFLA1",52,0)
 D NINFO^TIUFLLM(NLINENO,FILEDA,.INFO),PARSE^TIUFLLM(.INFO)
"RTN","TIUFLA1",53,0)
 D NODE0ARR^TIUFLF(FILEDA,.NODE0) Q:$D(DTOUT)
"RTN","TIUFLA1",54,0)
 D BUFENTRY^TIUFLLM2(.INFO,.NODE0,TIUFTMPL)
"RTN","TIUFLA1",55,0)
 D UPDATE^TIUFLLM1(TIUFTMPL,1,NLINENO-1)
"RTN","TIUFLA1",56,0)
 I FILEDA=$G(TIUFINFO("FILEDA")) S $P(TIUFINFO,U)=NLINENO,TIUFINFO("LINENO")=NLINENO
"RTN","TIUFLA1",57,0)
 Q
"RTN","TIUFLA1",58,0)
 ;
"RTN","TIUFLA1",59,0)
IPOINT(NODE0,FILEDA) ; Function returns Template A,J insertion point for
"RTN","TIUFLA1",60,0)
 ;entry with NODE0, FILEDA. If Name to be added is already in TIUF1 arry,
"RTN","TIUFLA1",61,0)
 ;insertion follows IFN order within Name.  Else after last entry before 
"RTN","TIUFLA1",62,0)
 ;Name in alphabet.
"RTN","TIUFLA1",63,0)
 ; Used for old entries as well as new.  Can't assume insert entry has
"RTN","TIUFLA1",64,0)
 ;larger FILEDA than existing entries w same Name.
"RTN","TIUFLA1",65,0)
 N LINENO,PREVNAME,NLINENO,FDA,INARRAY
"RTN","TIUFLA1",66,0)
 S LINENO=0,PREVNAME=$P(NODE0,U)
"RTN","TIUFLA1",67,0)
 S LINENO=$$LINENO(PREVNAME,FILEDA)
"RTN","TIUFLA1",68,0)
 I LINENO S NLINENO=LINENO+1 G IPOIX
"RTN","TIUFLA1",69,0)
 ; If LINENO=0, go back a name:
"RTN","TIUFLA1",70,0)
 ; Need SACC exempt; MAM
"RTN","TIUFLA1",71,0)
 F  S PREVNAME=$O(^TIU(8925.1,"B",PREVNAME),-1) Q:LINENO!(PREVNAME="")!($P(TIUFSTRT,U)]PREVNAME)  D
"RTN","TIUFLA1",72,0)
 . S (FDA,INARRAY)=0
"RTN","TIUFLA1",73,0)
 . F  S FDA=$O(^TIU(8925.1,"B",PREVNAME,FDA)) Q:'FDA  D
"RTN","TIUFLA1",74,0)
 . . S INARRAY=$O(^TMP("TIUF1IDX",$J,"DAF",FDA,0))
"RTN","TIUFLA1",75,0)
 . . I INARRAY S LINENO=INARRAY
"RTN","TIUFLA1",76,0)
 S NLINENO=LINENO+1
"RTN","TIUFLA1",77,0)
IPOIX Q NLINENO
"RTN","TIUFLA1",78,0)
 ;
"RTN","TIUFLA1",79,0)
LINENO(NAME,FILEDA) ; Function returns Lineno of last entry with name NAME in LM Array TIUF1 whose IFN is less than FILEDA.  If no such entry (EITHER no TIUFI entries with Name OR none with IFN<FILEDA), returns 0.
"RTN","TIUFLA1",80,0)
 N FDA,LINENO,INARRAY
"RTN","TIUFLA1",81,0)
 S FDA="",LINENO=0
"RTN","TIUFLA1",82,0)
 F  S FDA=$O(^TIU(8925.1,"B",NAME,FDA)) Q:'FDA!(FDA'<FILEDA)  D
"RTN","TIUFLA1",83,0)
 . S INARRAY=$O(^TMP("TIUF1IDX",$J,"DAF",FDA,""))
"RTN","TIUFLA1",84,0)
 . S:INARRAY LINENO=INARRAY
"RTN","TIUFLA1",85,0)
LINEX Q LINENO
"RTN","TIUFLA1",86,0)
 ;
"RTN","TIUFLD")
0^48^B30337885
"RTN","TIUFLD",1,0)
TIUFLD ; SLC/MAM - Lib; Template D Related; SETFLD(FILEDA,LASTLIN,FLDNO,SUBFDA,SUBFLDNO), INHERIT(FILEDA,PFILEDA,FLDNO,EIFORM,SUBFDA,SUBFLDNO,VALUE,AFILEDA), MULTILN(TIUREC,LASTLIN,FLDNAME) ;5/1/97  11:02
"RTN","TIUFLD",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLD",3,0)
 ;
"RTN","TIUFLD",4,0)
SETFLD(FILEDA,LASTLIN,FLDNO,SUBFDA,SUBFLDNO) ; Puts External Field in TMP("TIUF3") for Template D (Display), for FILEDA.
"RTN","TIUFLD",5,0)
 ; Requires Array TIUFQ as set in TIUFD, TIUFD1.
"RTN","TIUFLD",6,0)
 ; Requires FILEDA=DA in file.
"RTN","TIUFLD",7,0)
 ; Requires LASTLIN = Last array line set, if setting array; = Last
"RTN","TIUFLD",8,0)
 ;line to keep before resetting the rest if resetting array.
"RTN","TIUFLD",9,0)
 ; Updates LASTLIN to Last array line set by this module.
"RTN","TIUFLD",10,0)
 ; Requires FLDNO from list: 0, .01, .02, .03, .04, .05, .07, .08, .1, .11, .13, 1, 1.01, 1.02, 1.03, 2, 3.02, 3.03, 4, 4.5, 4.6, 4.7, 4.8, 5, 6 6.1, 6.12, 6.13, 6.14, 7, 8, 9.
"RTN","TIUFLD",11,0)
 ; For FLDNO 0, sets IFN=FILEDA
"RTN","TIUFLD",12,0)
 ; For FLDNO 1 and 2, requires SUBFLDNO from list: .01, .02, .03, .04, .05, .06, .07, .1
"RTN","TIUFLD",13,0)
 ; For FLDNO 1 and 2, requires SUBFDA=DA in subfile.
"RTN","TIUFLD",14,0)
 ; For FLDNO .05, combines .05 and .06 into Owner (one value).
"RTN","TIUFLD",15,0)
 N TIUREC,LINENO,AVAIL,FLDNAME,NODE1,ZZCONT,FLDNAME1,UPFIELD,UPFILE,UPMSG
"RTN","TIUFLD",16,0)
 N FIELDNO,FDA,TYPE,POWNER,COWNER,LP,LC,OWNER,FLDVAL,FILENO,LENGTH
"RTN","TIUFLD",17,0)
 N UPCHECK
"RTN","TIUFLD",18,0)
 S:'$G(SUBFLDNO) SUBFLDNO=0 S:'$G(SUBFDA) SUBFDA=0
"RTN","TIUFLD",19,0)
 S FLDNAME=$S(FLDNO=.05:"OWNER^BASICS",$G(SUBFLDNO):^TMP("TIUF",$J,FLDNO,SUBFLDNO,"LABEL"),1:^TMP("TIUF",$J,FLDNO,"LABEL")),LENGTH=$P(FLDNAME,U,2),FLDNAME=$P(FLDNAME,U)
"RTN","TIUFLD",20,0)
 S LENGTH=$S(LENGTH="BASICS":16,LENGTH="TECH":20,LENGTH="UPLOAD":29,1:26)
"RTN","TIUFLD",21,0)
 S:FLDNO FLDNAME=$$MIXED^TIULS(FLDNAME)
"RTN","TIUFLD",22,0)
 I $L(FLDNAME)>LENGTH S:$L(FLDNAME," ")=2 FLDNAME1=$P(FLDNAME," "),FLDNAME=$P(FLDNAME," ",2) S:$L(FLDNAME," ")>2 FLDNAME1=$P(FLDNAME," ",1,2),FLDNAME=$P(FLDNAME," ",3,5) S FLDNAME1=$J(FLDNAME1,LENGTH)
"RTN","TIUFLD",23,0)
 S AVAIL=77-$L(FLDNAME),TYPE=$P(TIUFNOD0,U,4)
"RTN","TIUFLD",24,0)
 S FLDNAME=$J(FLDNAME,LENGTH)
"RTN","TIUFLD",25,0)
 I FLDNO=.05 D  G SETFLD2
"RTN","TIUFLD",26,0)
 . S POWNER=TIUFQ(8925.1,FILEDA,.05,"E"),COWNER=TIUFQ(8925.1,FILEDA,.06,"E")
"RTN","TIUFLD",27,0)
 . S LP=$L(POWNER),LC=$L(COWNER)
"RTN","TIUFLD",28,0)
 . S OWNER=$S(LP&'LC:POWNER,LC&'LP:COWNER,LP&LC:$E(POWNER,1,30)_","_$E(COWNER,1,30),1:"None")
"RTN","TIUFLD",29,0)
 . S TIUREC=OWNER
"RTN","TIUFLD",30,0)
 S FILENO=8925.1_$S(FLDNO=1!(FLDNO=2):FLDNO,1:"")
"RTN","TIUFLD",31,0)
 S FIELDNO=$S($G(SUBFLDNO):SUBFLDNO,1:FLDNO)
"RTN","TIUFLD",32,0)
 S FDA=$S($G(SUBFDA):SUBFDA,1:FILEDA)
"RTN","TIUFLD",33,0)
 I FLDNO=.07,$P(TIUFNOD0,U,10) S TIUREC="" G SETFX
"RTN","TIUFLD",34,0)
 S TIUREC=$G(TIUFQ(FILENO,FDA,FIELDNO,"E"))
"RTN","TIUFLD",35,0)
 I FLDNO=.08,TIUREC="NA" G SETFX
"RTN","TIUFLD",36,0)
 I FLDNO=.1!(FLDNO=.13)!(FLDNO=3.02),TIUREC="" S TIUREC="NO"
"RTN","TIUFLD",37,0)
 I FLDNO=0 S TIUREC=FILEDA ; Sets IFN
"RTN","TIUFLD",38,0)
 G:FLDNO<1 SETFLD2 ;  not heritable.
"RTN","TIUFLD",39,0)
 S NODE1=$G(^TIU(8925.1,FILEDA,1))
"RTN","TIUFLD",40,0)
 I FLDNO=1.01 D
"RTN","TIUFLD",41,0)
 . I $P(NODE1,U)="" S TIUREC="" Q
"RTN","TIUFLD",42,0)
 . D FILE^DID($P(NODE1,U),"","NAME","UPFILE")
"RTN","TIUFLD",43,0)
 . S UPMSG=" FILE ERROR; Please Edit Upload"
"RTN","TIUFLD",44,0)
 . I $G(DIERR) S TIUREC=UPMSG Q
"RTN","TIUFLD",45,0)
 . S TIUREC=UPFILE("NAME")
"RTN","TIUFLD",46,0)
 . D CHK^DIE(8925.1,1.01,"",TIUREC,.UPCHECK) I UPCHECK="^" S TIUREC=UPMSG
"RTN","TIUFLD",47,0)
 I FLDNO=1.03 D
"RTN","TIUFLD",48,0)
 . I $P(NODE1,U,3)="" S TIUREC="" Q
"RTN","TIUFLD",49,0)
 . S UPMSG=" FILE/FIELD/SUBSCRIPT ERROR; Please Edit Upload"
"RTN","TIUFLD",50,0)
 . D FIELD^DID($P(NODE1,U),+$P($P(NODE1,U,3),";"),"","LABEL;GLOBAL SUBSCRIPT LOCATION","UPFIELD")
"RTN","TIUFLD",51,0)
 . I $G(DIERR) S TIUREC=UPMSG Q
"RTN","TIUFLD",52,0)
 . I UPFIELD("GLOBAL SUBSCRIPT LOCATION")'=($P($P(NODE1,U,3),";",2)_";0") S TIUREC=UPMSG Q
"RTN","TIUFLD",53,0)
 . S TIUREC=UPFIELD("LABEL")
"RTN","TIUFLD",54,0)
 I FLDNO'<1,FLDNO<3 G SETFLD2 ;Upload flds, not heritable.
"RTN","TIUFLD",55,0)
 G:FLDNO=3.02!(FLDNO=4)!(FLDNO=4.5)!(FLDNO=4.8) SETFLD2 ;  not heritable.
"RTN","TIUFLD",56,0)
 G:(FLDNO=4.6)!(FLDNO=4.7) SETFLD2 ;  not heritable for the moment MAM
"RTN","TIUFLD",57,0)
SETFLD1 ; Technical fields, others which are heritable.
"RTN","TIUFLD",58,0)
 I TIUREC'="" S TIUREC="  "_TIUREC
"RTN","TIUFLD",59,0)
 I TIUREC="" D INHERIT(FILEDA,0,FLDNO,"E",SUBFDA,SUBFLDNO,.FLDVAL) S TIUREC=FLDVAL S TIUREC=$S(FLDVAL("E")'="":"* "_FLDVAL("E"),FLDNO=3.03:"  NO",1:"")
"RTN","TIUFLD",60,0)
SETFLD2 I $D(FLDNAME1) S LASTLIN=LASTLIN+1,^TMP("TIUF3",$J,LASTLIN,0)=FLDNAME1
"RTN","TIUFLD",61,0)
 I FLDNO<1!(FLDNO=3.02),TIUREC'="" S TIUREC="  "_TIUREC
"RTN","TIUFLD",62,0)
 I $L(TIUREC)'>AVAIL S LASTLIN=LASTLIN+1,^TMP("TIUF3",$J,LASTLIN,0)=FLDNAME_": "_TIUREC G SETFX
"RTN","TIUFLD",63,0)
 D MULTILN(TIUREC,.LASTLIN,FLDNAME)
"RTN","TIUFLD",64,0)
SETFX D CLEAN^DILF
"RTN","TIUFLD",65,0)
 Q
"RTN","TIUFLD",66,0)
 ;
"RTN","TIUFLD",67,0)
INHERIT(FILEDA,PFILEDA,FLDNO,EIFORM,SUBFDA,SUBFLDNO,VALUE,AFILEDA) ;
"RTN","TIUFLD",68,0)
 ; Can't make it a function with pieces since pieces may contain ^.
"RTN","TIUFLD",69,0)
 ; For FLDNO'=6.14, Returns in VALUE the Field Value for first ancestor
"RTN","TIUFLD",70,0)
 ;of FILEDA that has a field value.  If not found, returns "".
"RTN","TIUFLD",71,0)
 ; For FLDNO=6.14, returns "" if no ancestor has a value, internal=0
"RTN","TIUFLD",72,0)
 ;if ANY ancestor is 0; else 1.
"RTN","TIUFLD",73,0)
 ; Requires FILEDA, FLDNO. If FLDNO = 1 or 2, requires SUBFDA,
"RTN","TIUFLD",74,0)
 ;SUBFLDNO. See SETFLDS.
"RTN","TIUFLD",75,0)
 ; Optional PFILEDA=anticipated parent IFN for ADD ITEMS, etc.
"RTN","TIUFLD",76,0)
 ; If EIFORM="E", returns in VALUE("E") the external value; else
"RTN","TIUFLD",77,0)
 ;returns VALUE("E")=""
"RTN","TIUFLD",78,0)
 ; Returns AFILEDA= IFN of ancestor used, if none, 0.
"RTN","TIUFLD",79,0)
 ; Requires FLDNO from list (heritable subset of list from SETFLD):  3.03, 5, 6 6.1, 6.12, 6.13, 6.14, 7, 8, 9.
"RTN","TIUFLD",80,0)
 N PNODE,NODENO,ZZCONT,C,Y
"RTN","TIUFLD",81,0)
 S (VALUE,VALUE("E"))=""
"RTN","TIUFLD",82,0)
 I '$D(EIFORM) S EIFORM="I"
"RTN","TIUFLD",83,0)
 S:'$G(SUBFLDNO) SUBFLDNO=0 S:'$G(SUBFDA) SUBFDA=0
"RTN","TIUFLD",84,0)
 S:'PFILEDA PFILEDA=$O(^TIU(8925.1,"AD",FILEDA,0)) G:'PFILEDA INHEX
"RTN","TIUFLD",85,0)
 S NODENO=$S((FLDNO=6.1)!(FLDNO=6.12)!(FLDNO=6.13)!(FLDNO=6.14):6.1,(FLDNO=3.03):3,1:FLDNO)
"RTN","TIUFLD",86,0)
 S PNODE=$G(^TIU(8925.1,PFILEDA,NODENO)) I PNODE="" G AGAIN
"RTN","TIUFLD",87,0)
 I FLDNO=6.14 S VALUE=$P(PNODE,U,4) G:VALUE=0 INHEX G:VALUE="" AGAIN
"RTN","TIUFLD",88,0)
 S VALUE=$S(FLDNO=6.1:$P(PNODE,U),FLDNO=6.12:$P(PNODE,U,2),FLDNO=6.13:$P(PNODE,U,3),FLDNO=6.14:$P(PNODE,U,4),FLDNO=3.03:$P(PNODE,U,3),1:PNODE)
"RTN","TIUFLD",89,0)
 G:VALUE'="" INHEX
"RTN","TIUFLD",90,0)
AGAIN D INHERIT(PFILEDA,0,FLDNO,EIFORM,SUBFDA,SUBFLDNO,.VALUE,.AFILEDA)
"RTN","TIUFLD",91,0)
INHEX S AFILEDA=+PFILEDA
"RTN","TIUFLD",92,0)
 I VALUE'="",EIFORM="E" D
"RTN","TIUFLD",93,0)
 . I FLDNO=1 S C=$P(^DD(8925.11,SUBFLDNO,0),U,2),Y=VALUE D Y^DIQ S VALUE("E")=Y Q
"RTN","TIUFLD",94,0)
 . I FLDNO=2 S C=$P(^DD(8925.12,SUBFLDNO,0),U,2),Y=VALUE D Y^DIQ S VALUE("E")=Y Q
"RTN","TIUFLD",95,0)
 . S C=$P(^DD(8925.1,FLDNO,0),U,2),Y=VALUE D Y^DIQ S VALUE("E")=Y Q
"RTN","TIUFLD",96,0)
 Q
"RTN","TIUFLD",97,0)
 ;
"RTN","TIUFLD",98,0)
MULTILN(TIUREC,LASTLIN,FLDNAME) ; Set FLDNAME and as much as
"RTN","TIUFLD",99,0)
 ;fits of TIUREC into line LASTLIN+1.  Set rest of TIUREC into succeeding
"RTN","TIUFLD",100,0)
 ;lines.
"RTN","TIUFLD",101,0)
 ; Requires TIUREC.
"RTN","TIUFLD",102,0)
 ; Requires LASTLIN = Last array line set, if setting array; = Last
"RTN","TIUFLD",103,0)
 ;line to keep before resetting the rest if resetting array.
"RTN","TIUFLD",104,0)
 ; Updates LASTLIN to Last array line set by this module.
"RTN","TIUFLD",105,0)
 ; FLDNAME is optional: if no FLDNAME, set TIUREC into 79-character
"RTN","TIUFLD",106,0)
 ;lines.
"RTN","TIUFLD",107,0)
 N TIUK,TIUL,REST,TIUFT,AVAIL,LINENO
"RTN","TIUFLD",108,0)
 S AVAIL=79-$L($G(FLDNAME)) D WRAP^TIUFLD(TIUREC,AVAIL)
"RTN","TIUFLD",109,0)
 I $D(FLDNAME) D
"RTN","TIUFLD",110,0)
 . S LINENO=LASTLIN+1
"RTN","TIUFLD",111,0)
 . S ^TMP("TIUF3",$J,LINENO,0)=FLDNAME_": "_TIUFT(1)
"RTN","TIUFLD",112,0)
 . S REST="" F TIUK=2:1 Q:'$D(TIUFT(TIUK))  S REST=REST_TIUFT(TIUK)
"RTN","TIUFLD",113,0)
 . K TIUFT I REST'="" D WRAP^TIUFLD(REST,79)
"RTN","TIUFLD",114,0)
 F TIUL=1:1 Q:'$D(TIUFT(TIUL))  S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)=TIUFT(TIUL)
"RTN","TIUFLD",115,0)
 S LASTLIN=LINENO
"RTN","TIUFLD",116,0)
 Q
"RTN","TIUFLD",117,0)
 ;
"RTN","TIUFLD",118,0)
WRAP(TEXT,LENGTH,FLENGTH) ; Breaks text string into first substring of
"RTN","TIUFLD",119,0)
 ;length FLENGTH; subsequent substrings of length LENGTH;
"RTN","TIUFLD",120,0)
 ;Sets them into array TIUFT with subscripts 1,2,3, etc.
"RTN","TIUFLD",121,0)
 ;Adapted from Joel Russell's WRAP^GMTSORC.
"RTN","TIUFLD",122,0)
 N TIUFI,TIUFJ,LINE,TIUFT1,TIUFT2,TIUFY
"RTN","TIUFLD",123,0)
 I $G(TEXT)']"" Q
"RTN","TIUFLD",124,0)
 F TIUFI=1:1 D  Q:TIUFI=$L(TEXT," ")
"RTN","TIUFLD",125,0)
 . S TIUFT=$P(TEXT," ",TIUFI)
"RTN","TIUFLD",126,0)
 . I $L(TIUFT)>LENGTH D
"RTN","TIUFLD",127,0)
 . . S TIUFT1=$E(TIUFT,1,LENGTH),TIUFT2=$E(TIUFT,LENGTH+1,$L(TIUFT))
"RTN","TIUFLD",128,0)
 . . S $P(TEXT," ",TIUFI)=TIUFT1_" "_TIUFT2
"RTN","TIUFLD",129,0)
 S LINE=1,TIUFT(1)=$P(TEXT," ")
"RTN","TIUFLD",130,0)
 F TIUFI=2:1 D  Q:TIUFI'<$L(TEXT," ")
"RTN","TIUFLD",131,0)
 . S:$L($G(TIUFT(LINE))_" "_$P(TEXT," ",TIUFI))>LENGTH LINE=LINE+1,TIUFY=1
"RTN","TIUFLD",132,0)
 . S TIUFT(LINE)=$G(TIUFT(LINE))_$S(+$G(TIUFY):"",1:" ")_$P(TEXT," ",TIUFI),TIUFY=0
"RTN","TIUFLD",133,0)
 Q
"RTN","TIUFLD",134,0)
 ;
"RTN","TIUFLD1")
0^49^B10285692
"RTN","TIUFLD1",1,0)
TIUFLD1 ; SLC/MAM - Lib; Template D Related; SETBOIL(FIELDA,LASTLIN), EDBOIL(FILEDA), DEDBOIL(FILEDA), DSETSHAR(FILEDA)  ;4/6/95  11:02
"RTN","TIUFLD1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLD1",3,0)
 ;
"RTN","TIUFLD1",4,0)
SETBOIL(FILEDA,LASTLIN) ; Sets Boilerplate Text of FILEDA into
"RTN","TIUFLD1",5,0)
 ;LM Array for Template D.
"RTN","TIUFLD1",6,0)
 ; Kills LM Array from LASTLIN+1 to the end before setting boiltxt.
"RTN","TIUFLD1",7,0)
 ; Requires FILEDA.
"RTN","TIUFLD1",8,0)
 ; Requires LASTLIN = Last array line set, if setting array; = Last
"RTN","TIUFLD1",9,0)
 ;line to keep before resetting the rest if resetting array.
"RTN","TIUFLD1",10,0)
 ; Updates LASTLIN to Last array line set by this module.
"RTN","TIUFLD1",11,0)
 N TIUFJ,TIUFI,LINENO
"RTN","TIUFLD1",12,0)
 F TIUFJ=LASTLIN+1:1 Q:'$D(^TMP("TIUF3",$J,TIUFJ,0))  K ^TMP("TIUF3",$J,TIUFJ,0)
"RTN","TIUFLD1",13,0)
 S LINENO=LASTLIN,TIUFI=0
"RTN","TIUFLD1",14,0)
 F  S TIUFI=$O(^TIU(8925.1,+FILEDA,"DFLT",TIUFI)) Q:+TIUFI'>0  D
"RTN","TIUFLD1",15,0)
 . S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)=$G(^TIU(8925.1,+FILEDA,"DFLT",+TIUFI,0))
"RTN","TIUFLD1",16,0)
 S LASTLIN=LINENO
"RTN","TIUFLD1",17,0)
SETBX Q
"RTN","TIUFLD1",18,0)
 ;
"RTN","TIUFLD1",19,0)
DSETBOIL(FILEDA,VCNT3) ; Sets boilerplate Text for descendants of FILEDA.
"RTN","TIUFLD1",20,0)
 ; Requires FILEDA, VCNT3=VALMCNT for TIUF3 when DSETBOIL is called.
"RTN","TIUFLD1",21,0)
 ; Updates VCNT3.
"RTN","TIUFLD1",22,0)
 N TIUFITEM,TIUI,LINENO,ITENDA,TENODE0,NAME
"RTN","TIUFLD1",23,0)
 Q:'$G(FILEDA)
"RTN","TIUFLD1",24,0)
 Q:$G(VCNT3)=""
"RTN","TIUFLD1",25,0)
 D ITEMS^TIUFLT(FILEDA)
"RTN","TIUFLD1",26,0)
 S TIUI=0,LINENO=VCNT3
"RTN","TIUFLD1",27,0)
 F  S TIUI=$O(TIUFITEM(TIUI)) Q:'TIUI  D
"RTN","TIUFLD1",28,0)
 . S ITENDA=$P(TIUFITEM(TIUI),U,2)
"RTN","TIUFLD1",29,0)
 . S TENODE0=^TIU(8925.1,FILEDA,10,ITENDA,0),NAME=$P(^TIU(8925.1,+TENODE0,0),U)
"RTN","TIUFLD1",30,0)
 . S LINENO=LINENO+1,^TMP("TIUF3",$J,LINENO,0)=NAME_":"
"RTN","TIUFLD1",31,0)
 . D SETBOIL(+TENODE0,.LINENO)
"RTN","TIUFLD1",32,0)
 . D DSETBOIL(+TENODE0,.LINENO)
"RTN","TIUFLD1",33,0)
 . Q
"RTN","TIUFLD1",34,0)
DSETX S VCNT3=LINENO
"RTN","TIUFLD1",35,0)
 Q
"RTN","TIUFLD1",36,0)
 ;
"RTN","TIUFLD1",37,0)
EDBOIL(FILEDA,NODE0) ; Edit Boilerplate Text of FILEDA.
"RTN","TIUFLD1",38,0)
 ; Requires FILEDA, NODE0 of FILEDA
"RTN","TIUFLD1",39,0)
 D FULL^VALM1
"RTN","TIUFLD1",40,0)
 N DIC,DWPK,DIWESUB
"RTN","TIUFLD1",41,0)
 S DIC="^TIU(8925.1,"_FILEDA_",""DFLT"",",DWPK=1
"RTN","TIUFLD1",42,0)
 S DIWESUB=$P(NODE0,U)
"RTN","TIUFLD1",43,0)
 D EN^DIWE
"RTN","TIUFLD1",44,0)
EDBOX Q
"RTN","TIUFLD1",45,0)
 ;
"RTN","TIUFLD1",46,0)
DEDBOIL(FILEDA) ; Edit Boilerplate Text for descendants of FILEDA.
"RTN","TIUFLD1",47,0)
 N TIUI,IFILEDA,INODE0,TIUFITEM,ITENDA
"RTN","TIUFLD1",48,0)
 G:'$O(^TIU(8925.1,FILEDA,10,0)) DEDBX
"RTN","TIUFLD1",49,0)
 D ITEMS^TIUFLT(FILEDA)
"RTN","TIUFLD1",50,0)
 S TIUI=0 K DUOUT
"RTN","TIUFLD1",51,0)
 F  S TIUI=$O(TIUFITEM(TIUI)) Q:'TIUI  D  Q:$D(DTOUT)!$D(DUOUT)
"RTN","TIUFLD1",52,0)
 . S ITENDA=$P(TIUFITEM(TIUI),U,2)
"RTN","TIUFLD1",53,0)
 . S IFILEDA=+^TIU(8925.1,FILEDA,10,ITENDA,0),INODE0=^TIU(8925.1,IFILEDA,0)
"RTN","TIUFLD1",54,0)
 . I $P(INODE0,U,10),'$$PERSOWNS^TIUFLF2(IFILEDA,DUZ) W !!," ",$P(INODE0,U),!,"is a Shared Component; Only an Owner can edit its Boilerplate Text.",!! D PAUSE^TIUFXHLX Q
"RTN","TIUFLD1",55,0)
 . I $P(INODE0,U,10),TIUFTMPL'="A" W !!," ",$P(INODE0,U),!,"is a Shared Component; it can be edited only through the SORT option",!! D PAUSE^TIUFXHLX Q
"RTN","TIUFLD1",56,0)
 . D EDBOIL(IFILEDA,INODE0) Q:$D(DTOUT)
"RTN","TIUFLD1",57,0)
 . D DEDBOIL(IFILEDA)
"RTN","TIUFLD1",58,0)
 . Q
"RTN","TIUFLD1",59,0)
DEDBX Q
"RTN","TIUFLD1",60,0)
 ;
"RTN","TIUFLD1",61,0)
DSETSHAR(FILEDA) ;  Sets all descendants of FILEDA to SHARED
"RTN","TIUFLD1",62,0)
 ; Requires FILEDA
"RTN","TIUFLD1",63,0)
 N TIUI,IFILEDA,INODE0,DIE,X,Y,SHARED,DA,DR
"RTN","TIUFLD1",64,0)
 S TIUI=0,DIE=8925.1,SHARED="YES"
"RTN","TIUFLD1",65,0)
 F  S TIUI=$O(^TIU(8925.1,FILEDA,10,TIUI)) Q:'TIUI  D
"RTN","TIUFLD1",66,0)
 . S IFILEDA=+^TIU(8925.1,FILEDA,10,TIUI,0)
"RTN","TIUFLD1",67,0)
 . S INODE0=$G(^TIU(8925.1,IFILEDA,0))
"RTN","TIUFLD1",68,0)
 . I INODE0="" W !!," File Entry "_FILEDA_" has Nonexistent item "_IFILEDA_"; See IRM",! D PAUSE^TIUFXHLX Q
"RTN","TIUFLD1",69,0)
 . S DA=IFILEDA,DR=".1///^S X=SHARED" D ^DIE
"RTN","TIUFLD1",70,0)
 . D DSETSHAR(IFILEDA)
"RTN","TIUFLD1",71,0)
 Q
"RTN","TIUFLD1",72,0)
 ;
"RTN","TIUFLF")
0^50^B14030170
"RTN","TIUFLF",1,0)
TIUFLF ; SLC/MAM - Library; File 8925.1 Related: NODE0ARR(FILEDA,NODE0,PFILEDA), HASBOIL(FILEDA,NODE0), DDEFUSED(FILEDA), DESCUSED(FILEDA) ;10/24/95  23:35
"RTN","TIUFLF",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLF",3,0)
 ;
"RTN","TIUFLF",4,0)
HASBOIL(FILEDA,NODE0) ;Function Returns 0, 1, 10, or 11 (like $D) if FILEDA/any descendant has Boilerplate Text, or NA if nonapplicable (neither DOC nor CO).
"RTN","TIUFLF",5,0)
 ; Requires FILEDA, NODE0.
"RTN","TIUFLF",6,0)
 N ANS,ANSONE,ANSTEN
"RTN","TIUFLF",7,0)
 I $P(NODE0,U,4)'="DOC"&($P(NODE0,U,4)'="CO") S ANS="NA" G HASBX
"RTN","TIUFLF",8,0)
 S ANSONE=+$O(^TIU(8925.1,FILEDA,"DFLT",0)) S:ANSONE ANSONE=1
"RTN","TIUFLF",9,0)
 S ANSTEN=$$DHASBOIL(FILEDA)
"RTN","TIUFLF",10,0)
 S ANS=ANSTEN_ANSONE
"RTN","TIUFLF",11,0)
 I ANS="00" S ANS=0
"RTN","TIUFLF",12,0)
 I ANS="01" S ANS=1
"RTN","TIUFLF",13,0)
HASBX Q ANS
"RTN","TIUFLF",14,0)
 ;
"RTN","TIUFLF",15,0)
DHASBOIL(FILEDA) ; Function Returns 1 if any descendant has Boilerplate Text.
"RTN","TIUFLF",16,0)
 ; Requires FILEDA.
"RTN","TIUFLF",17,0)
 N TIUI,IFILEDA,ANS
"RTN","TIUFLF",18,0)
 I '$G(FILEDA) S ANS="ERR" G DHASX
"RTN","TIUFLF",19,0)
 S (TIUI,ANS)=0
"RTN","TIUFLF",20,0)
 F  S TIUI=$O(^TIU(8925.1,FILEDA,10,TIUI)) G:'TIUI!ANS DHASX  D
"RTN","TIUFLF",21,0)
 . S IFILEDA=+^TIU(8925.1,FILEDA,10,TIUI,0)
"RTN","TIUFLF",22,0)
 . I $D(^TIU(8925.1,IFILEDA,"DFLT")) S ANS=1 Q
"RTN","TIUFLF",23,0)
 . S ANS=$$DHASBOIL(IFILEDA)
"RTN","TIUFLF",24,0)
 . Q
"RTN","TIUFLF",25,0)
DHASX Q ANS
"RTN","TIUFLF",26,0)
 ;
"RTN","TIUFLF",27,0)
NODE0ARR(FILEDA,NODE0,PFILEDA) ; Sets NODE0 = ^TIU(8925.1,FILEDA,0)_U_PIECE20, where
"RTN","TIUFLF",28,0)
 ;PIECE20= 0,1,10,11 if FILEDA/any descendant has Boilerplate text
"RTN","TIUFLF",29,0)
 ;(Like $D), or NA.
"RTN","TIUFLF",30,0)
 ; IF NODE0 IS NOT NULL, Passes back NODE0 as an array. If NODE0 is null,
"RTN","TIUFLF",31,0)
 ;doesn't set subscripts, writes warning.
"RTN","TIUFLF",32,0)
 ; When return from this call, if FILEDA is not already on the screen but taken from an item multiple, a name xfef, etc, check for NODE0="".  This will catch broken pointers to 8925.1.
"RTN","TIUFLF",33,0)
 ; Sets Subscript TYPE = Stnd Abbrev = ^TMP("TIUF",$J,"TYPE"_INTERNALTYPE)). See TIUFL.
"RTN","TIUFLF",34,0)
 ; Sets Subscripts COWNER, STATUS = Mixed case(external value);
"RTN","TIUFLF",35,0)
 ; Sets Subscript POWNER = external value;
"RTN","TIUFLF",36,0)
 ; Sets Subscript NATL= Yes, or No;
"RTN","TIUFLF",37,0)
 ; Sets Subscript SHARE = Yes, No, or "" for NA;
"RTN","TIUFLF",38,0)
 ; Sets Subscript ORPHAN = Yes, No, or "" for NA (Object);
"RTN","TIUFLF",39,0)
 ; Sets Subscript ITEMS = Yes, No, or "" for NA (Object);
"RTN","TIUFLF",40,0)
 ; Sets Subscript BOILPT = Yes if entry or descendants have Boiltxt, No, or "" for NA (Type not Doc or CO);
"RTN","TIUFLF",41,0)
 ; Sets Subscript INUSE = Yes, No, ?, or "" for NA (Object).
"RTN","TIUFLF",42,0)
 ; Requires FILEDA = file 8925.1 IFN of 8925.1 entry.
"RTN","TIUFLF",43,0)
 ; Optional PFILEDA = parent IFN of FILEDA. Used for Computed Field .08 In Use for EN^DIQ.
"RTN","TIUFLF",44,0)
 S NODE0=$G(^TIU(8925.1,FILEDA,0))
"RTN","TIUFLF",45,0)
 I '$D(PFILEDA) S PFILEDA=0
"RTN","TIUFLF",46,0)
 I PFILEDA,NODE0="" W !!," File entry "_PFILEDA_" has Nonexistent Item "_FILEDA_"; See IRM.",! D PAUSE^TIUFXHLX G NODEX
"RTN","TIUFLF",47,0)
 I NODE0="" W !!," ",FILEDA_" doesn't exist in the file; See IRM.",! D PAUSE^TIUFXHLX G NODEX
"RTN","TIUFLF",48,0)
 N DIC,DA,DR,TIUFQ,SHARE,ORPHAN,BOILPT,TYPE,ITEMS,DIQ,USED
"RTN","TIUFLF",49,0)
 S DIC=8925.1,DR=".04:.13",DIQ(0)="I,E",DA=FILEDA,DIQ="TIUFQ" D EN^DIQ1
"RTN","TIUFLF",50,0)
 S TYPE=$G(TIUFQ(8925.1,FILEDA,.04,"I")) S:TYPE="DOC" TYPE="TL"
"RTN","TIUFLF",51,0)
 S NODE0("TYPE")=$G(^TMP("TIUF",$J,"TYPE"_TYPE))
"RTN","TIUFLF",52,0)
 S NODE0("POWNER")=$G(TIUFQ(8925.1,FILEDA,.05,"E"))
"RTN","TIUFLF",53,0)
 S NODE0("COWNER")=$$MIXED^TIULS($G(TIUFQ(8925.1,FILEDA,.06,"E")))
"RTN","TIUFLF",54,0)
 S NODE0("STATUS")=$$MIXED^TIULS($G(TIUFQ(8925.1,FILEDA,.07,"E")))
"RTN","TIUFLF",55,0)
 S NODE0("NATL")=$$MIXED^TIULS($G(TIUFQ(8925.1,FILEDA,.13,"E")))
"RTN","TIUFLF",56,0)
 I NODE0("NATL")="" S NODE0("NATL")="No"
"RTN","TIUFLF",57,0)
 S USED=$G(TIUFQ(8925.1,FILEDA,.08,"E")),NODE0("INUSE")=$S(USED="NA":"",USED="?":"?",1:$$MIXED^TIULS(USED))
"RTN","TIUFLF",58,0)
 S SHARE=$G(TIUFQ(8925.1,FILEDA,.1,"E"))
"RTN","TIUFLF",59,0)
 S NODE0("SHARE")=$S(SHARE="YES":"Yes",SHARE="NO":"No",SHARE=""&(TYPE'="O"):"No",1:"")
"RTN","TIUFLF",60,0)
 S ORPHAN=$$ORPHAN^TIUFLF4(FILEDA,NODE0)
"RTN","TIUFLF",61,0)
 S NODE0("ORPHAN")=$S(ORPHAN="NA":"",1:$$MIXED^TIULS(ORPHAN))
"RTN","TIUFLF",62,0)
 S BOILPT=$$HASBOIL(FILEDA,NODE0),$P(NODE0,U,20)=BOILPT
"RTN","TIUFLF",63,0)
 S NODE0("BOILPT")=$S(BOILPT="NA":"",BOILPT:"Yes",1:"No")
"RTN","TIUFLF",64,0)
 S ITEMS=$S($O(^TIU(8925.1,FILEDA,10,0)):1,1:0)
"RTN","TIUFLF",65,0)
 S NODE0("ITEMS")=$S(ITEMS:"Yes",$P(NODE0,U,4)="O":"",1:"No")
"RTN","TIUFLF",66,0)
NODEX Q
"RTN","TIUFLF",67,0)
 ;
"RTN","TIUFLF",68,0)
DESCUSED(FILEDA) ; Function returns 1 if FILEDA has
"RTN","TIUFLF",69,0)
 ;descendant item of Type DOC with TIU documents (file 8925 entries)
"RTN","TIUFLF",70,0)
 ;pointing to it; Else returns 0.
"RTN","TIUFLF",71,0)
 ; Assumes DDEFs cannot be reused Except SHARED Components; stops
"RTN","TIUFLF",72,0)
 ;check at DOC level. It is enough to check descendants down to type
"RTN","TIUFLF",73,0)
 ;DOC since if a component is used, its ancestor of type DOC is used.
"RTN","TIUFLF",74,0)
 ;Therefore reusing COMPONENTS does not present a difficulty for
"RTN","TIUFLF",75,0)
 ;DDEFUSED or for DESCUSED IF CHECKING FOR USE STOPS AT THE DOC LEVEL
"RTN","TIUFLF",76,0)
 ;AND DOES NOT CHECK COMPONENTS.
"RTN","TIUFLF",77,0)
 ; Requires FILEDA.
"RTN","TIUFLF",78,0)
 ; Requires FILEDA's node 0 to exist.
"RTN","TIUFLF",79,0)
 N DESCANS,TIUI,IFILEDA,ITYPE,INODE0
"RTN","TIUFLF",80,0)
 S (TIUI,DESCANS)=0
"RTN","TIUFLF",81,0)
 F  S TIUI=$O(^TIU(8925.1,FILEDA,10,TIUI)) Q:'TIUI  D  Q:DESCANS=1
"RTN","TIUFLF",82,0)
 . S IFILEDA=+^TIU(8925.1,FILEDA,10,TIUI,0)
"RTN","TIUFLF",83,0)
 . I $O(^TIU(8925,"B",IFILEDA,0)) S DESCANS=1 Q
"RTN","TIUFLF",84,0)
 . S INODE0=$G(^TIU(8925.1,IFILEDA,0)),ITYPE=$P(INODE0,U,4)
"RTN","TIUFLF",85,0)
 . I INODE0="" S DESCANS="?" Q
"RTN","TIUFLF",86,0)
 . I ITYPE="DOC" Q
"RTN","TIUFLF",87,0)
 . S DESCANS=$$DESCUSED(IFILEDA)
"RTN","TIUFLF",88,0)
 . Q
"RTN","TIUFLF",89,0)
DESCX Q DESCANS
"RTN","TIUFLF",90,0)
 ;
"RTN","TIUFLF",91,0)
DDEFUSED(FILEDA) ; Function called by 8925.1 computed field .08 USED BY DOCMTS.
"RTN","TIUFLF",92,0)
 ; Assumes DDEFs CANNOT be reused except for SHARED Components.
"RTN","TIUFLF",93,0)
 ; Returns YES if FILEDA is pointed to by 8925 docmts or components.
"RTN","TIUFLF",94,0)
 ;         YES if FILEDA itself is not pointed to, but descendants
"RTN","TIUFLF",95,0)
 ;           of Type DOC(Title) under FILEDA in the hierarchy are 
"RTN","TIUFLF",96,0)
 ;           pointed to.
"RTN","TIUFLF",97,0)
 ;         NA if FILEDA has Type Object.
"RTN","TIUFLF",98,0)
 ;         ? if not known to be YES and FILEDA has Item w broken pointer.
"RTN","TIUFLF",99,0)
 ;         NO if not YES, not ?, and not NA.
"RTN","TIUFLF",100,0)
 ; Requires FILEDA = 8925.1 IFN of Entry.
"RTN","TIUFLF",101,0)
 ; Requires Node 0 of FILEDA to exist.
"RTN","TIUFLF",102,0)
 N DDEFUSED,NODE0,TYPE,DESCUSED
"RTN","TIUFLF",103,0)
 S NODE0=^TIU(8925.1,FILEDA,0),DDEFUSED=0
"RTN","TIUFLF",104,0)
 I $O(^TIU(8925,"B",FILEDA,0)) S DDEFUSED="YES" G DDEFX
"RTN","TIUFLF",105,0)
 S TYPE=$P(NODE0,U,4)
"RTN","TIUFLF",106,0)
 I TYPE="O" S DDEFUSED="NA" G DDEFX
"RTN","TIUFLF",107,0)
 I TYPE="DOC" S DDEFUSED="NO" G DDEFX
"RTN","TIUFLF",108,0)
 S DESCUSED=$$DESCUSED(FILEDA)
"RTN","TIUFLF",109,0)
 S DDEFUSED=$S(DESCUSED:"YES",DESCUSED="?":"?",1:"NO")
"RTN","TIUFLF",110,0)
DDEFX Q DDEFUSED
"RTN","TIUFLF",111,0)
 ;
"RTN","TIUFLF1")
0^51^B34561287
"RTN","TIUFLF1",1,0)
TIUFLF1 ; SLC/MAM - Library; File 8925.1 Related:  HASITEMS(FILEDA), ASKFLDS(FILEDA,FIELDS,PFILEDA,NEWSFLG,XFLG) ;4/23/97  20:39
"RTN","TIUFLF1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLF1",3,0)
 ;
"RTN","TIUFLF1",4,0)
HASITEMS(FILEDA) ; Function returns 0 if FILEDA has no items, else returns 1.
"RTN","TIUFLF1",5,0)
 Q $O(^TIU(8925.1,+FILEDA,10,0))
"RTN","TIUFLF1",6,0)
 ;
"RTN","TIUFLF1",7,0)
ASKFLDS(FILEDA,FIELDS,PFILEDA,NEWSFLG,XFLG) ; Ask FIELDS (String subset of: ;.01;.02;.03;.04;.05;.06;.07;.1;.13;3.03) w ;'s on ends as well as between numbers for file entry FILEDA.
"RTN","TIUFLF1",8,0)
 ; Requires FILEDA, FIELDS.
"RTN","TIUFLF1",9,0)
 ; If field is determined, correct, and exists, module doesn't ask even if it is contained in FIELDS.
"RTN","TIUFLF1",10,0)
 ; Returns NEWSFLG=1 if ASKFIELDS has changed Status of FILEDA, else 0
"RTN","TIUFLF1",11,0)
 ; Returns XFLG=1 if user ^exited, else 0.
"RTN","TIUFLF1",12,0)
 ; Requires PFILEDA (= Actual/Anticipated parent) if FIELDS [ .04 Type
"RTN","TIUFLF1",13,0)
 ;or .07 Status. If no such parent, send PFILEDA=0.
"RTN","TIUFLF1",14,0)
 ; Should Lock FILEDA before calling ASKFLDS.
"RTN","TIUFLF1",15,0)
 ; After calling ASKFLDS, Set back to screen mode if nec, set VALMBCK = "R" if necessary.
"RTN","TIUFLF1",16,0)
 N DIE,DA,X,Y,NODE0,DR,PFDA,TYPEDR,USED,ITEMIFN,DIR,NAME,ANS
"RTN","TIUFLF1",17,0)
 N TIUFQUIT,TIUFY,SIGNERS,TIUFTLST,TIUFTMSG,TIUFIMSG,DEFLT,CONTINUE
"RTN","TIUFLF1",18,0)
 N SUPVISIT,RENODE0
"RTN","TIUFLF1",19,0)
 S NEWSFLG=0,XFLG=0,NODE0=^TIU(8925.1,FILEDA,0)
"RTN","TIUFLF1",20,0)
 S USED=$S($P(NODE0,U,4)="O":1,1:$$DDEFUSED^TIUFLF(FILEDA))
"RTN","TIUFLF1",21,0)
 S DIE=8925.1,DA=FILEDA,TIUFQUIT=0
"RTN","TIUFLF1",22,0)
 S PFILEDA=+$G(PFILEDA) K DIRUT
"RTN","TIUFLF1",23,0)
 I FIELDS'[";.01;" G ABBREV
"RTN","TIUFLF1",24,0)
 I $P(NODE0,U,4)="O" S CONTINUE=$$WARNOBJ^TIUFLJ("N",FILEDA,NODE0) G:$D(DIRUT) ASKFX G:'CONTINUE ABBREV
"RTN","TIUFLF1",25,0)
NAME S DEFLT=$P(NODE0,U) K DIRUT S NAME=$$SELNAME^TIUFLF2(DEFLT) G:$D(DIRUT) ASKFX
"RTN","TIUFLF1",26,0)
 I PFILEDA,$$DUPITEM^TIUFLF7(NAME,PFILEDA,FILEDA) W !!,"Please enter a different Name; Parent already has Item with that Name",! G NAME
"RTN","TIUFLF1",27,0)
 D TYPELIST^TIUFLF7(NAME,FILEDA,PFILEDA,.TIUFTMSG,.TIUFTLST) G:$D(DTOUT) ASKFX
"RTN","TIUFLF1",28,0)
 I $D(TIUFTMSG(1)),'$D(TIUFTMSG(2)) W !!,TIUFTMSG(1),!,"Can't edit Entry",! D PAUSE^TIUFXHLX G ASKFX
"RTN","TIUFLF1",29,0)
 I TIUFTLST="" W !!," Please enter a different Name; File already has entries of every permitted Type",!,"with that Name",! H:$P(NODE0,U,4)="O" 4 G NAME
"RTN","TIUFLF1",30,0)
 I $P(NODE0,U,4)'="",TIUFTLST'[(U_$P(NODE0,U,4)_U) W !!,"Please enter a different Name; File already has entry of this Type",!,"with that Name",! H:$P(NODE0,U,4)="O" 4 G NAME
"RTN","TIUFLF1",31,0)
 S DR=".01///^S X=NAME" D ^DIE S RENODE0=^TIU(8925.1,FILEDA,0)
"RTN","TIUFLF1",32,0)
 I $P(NODE0,U,4)="O",RENODE0'=NODE0
"RTN","TIUFLF1",33,0)
 S NODE0=RENODE0
"RTN","TIUFLF1",34,0)
 I $D(DIRUT)!$D(Y)!$D(DTOUT) S DUOUT=1 G ASKFX
"RTN","TIUFLF1",35,0)
ABBREV I FIELDS'[";.02;" G PRINTN
"RTN","TIUFLF1",36,0)
 I $P(NODE0,U,4)="O" S CONTINUE=$$WARNOBJ^TIUFLJ("A",FILEDA,NODE0) G:$D(DIRUT) ASKFX G:'CONTINUE PRINTN
"RTN","TIUFLF1",37,0)
ABBREV1 S DR=".02" D ^DIE S RENODE0=^TIU(8925.1,FILEDA,0)
"RTN","TIUFLF1",38,0)
 I $P(NODE0,U,4)="O",'$D(Y),$$BADNAP^TIUFLF3($P(RENODE0,U,2),FILEDA) W " ?? Not Unique.",!,"Please enter a different abbreviation or enter ^ to exit",! G ABBREV1
"RTN","TIUFLF1",39,0)
 I $P(NODE0,U,4)="O",RENODE0'=NODE0
"RTN","TIUFLF1",40,0)
 S NODE0=RENODE0
"RTN","TIUFLF1",41,0)
 I $D(DIRUT)!$D(Y)!$D(DTOUT) S DUOUT=1 G ASKFX
"RTN","TIUFLF1",42,0)
PRINTN I FIELDS'[";.03;" G NATL
"RTN","TIUFLF1",43,0)
 I $P(NODE0,U,4)="O" S CONTINUE=$$WARNOBJ^TIUFLJ("P",FILEDA,NODE0) G:$D(DIRUT) ASKFX G:'CONTINUE NATL
"RTN","TIUFLF1",44,0)
PRINTN1 N TIUFUPP S DR=".03" D ^DIE S RENODE0=^TIU(8925.1,FILEDA,0)
"RTN","TIUFLF1",45,0)
 I $P(NODE0,U,4)="O",'$D(Y),$$BADNAP^TIUFLF3($P(RENODE0,U,3),FILEDA) W " ?? Not Unique.",!,"Please enter a different print name or enter ^ to exit",! G PRINTN1
"RTN","TIUFLF1",46,0)
 I $P(NODE0,U,4)="O",RENODE0'=NODE0
"RTN","TIUFLF1",47,0)
 S NODE0=RENODE0
"RTN","TIUFLF1",48,0)
 I $D(DIRUT)!$D(Y)!$D(DTOUT) S DUOUT=1 G ASKFX
"RTN","TIUFLF1",49,0)
NATL I FIELDS[";.13;",TIUFWHO="N" D  G:XFLG ASKFX S NODE0=^TIU(8925.1,FILEDA,0)
"RTN","TIUFLF1",50,0)
 . S DIR("B")=$S($P(NODE0,U,13):"YES",1:"NO")
"RTN","TIUFLF1",51,0)
 . D
"RTN","TIUFLF1",52,0)
 . . S DIR(0)="YO",(DIR("?"),DIR("??"))="^D HELP2^TIUFXHLX(.13)"
"RTN","TIUFLF1",53,0)
 . . S DIR("A")="NATIONAL"
"RTN","TIUFLF1",54,0)
 . . D ^DIR I $D(DUOUT)!$D(DTOUT) S XFLG=1 Q
"RTN","TIUFLF1",55,0)
 . . S ANS=Y,DR=".13////^S X=ANS" D ^DIE
"RTN","TIUFLF1",56,0)
TYPE I FIELDS[";.04;" K DIRUT D EDTYPE^TIUFLF7(FILEDA,.NODE0,PFILEDA,.XFLG,USED) G:$D(DIRUT) ASKFX
"RTN","TIUFLF1",57,0)
SHARE G:FIELDS'[";.1;" OWNER
"RTN","TIUFLF1",58,0)
 N PARENT1,PARENT2,SHARE,STATUS,DIR
"RTN","TIUFLF1",59,0)
 I "NM"'[TIUFWHO G OWNER
"RTN","TIUFLF1",60,0)
 I $P(NODE0,U,4)'="CO" G OWNER
"RTN","TIUFLF1",61,0)
 I '$$PERSOWNS^TIUFLF2(FILEDA,DUZ) W !!,"SHARED: Only an Owner can edit SHARED",! G OWNER
"RTN","TIUFLF1",62,0)
 S SHARE=$P(NODE0,U,10)
"RTN","TIUFLF1",63,0)
 ; If not presently SHARED set default=NO:
"RTN","TIUFLF1",64,0)
 I 'SHARE S DIR("B")="NO"
"RTN","TIUFLF1",65,0)
 ; If presently SHARED but only used once, set default=YES:
"RTN","TIUFLF1",66,0)
 S PARENT1=$O(^TIU(8925.1,"AD",FILEDA,0)),PARENT2=$S('PARENT1:0,1:$O(^TIU(8925.1,"AD",FILEDA,PARENT1)))
"RTN","TIUFLF1",67,0)
 I SHARE,'PARENT2 S DIR("B")="YES" I $P($G(^TIU(8925.1,+PARENT1,0)),U,10) W !!,"SHARED: Subcomponent of Shared Component; Must remain Shared",! G OWNER
"RTN","TIUFLF1",68,0)
 I 'SHARE,$P($G(^TIU(8925.1,+PARENT1,0)),U,10) S DIR("B")="YES"
"RTN","TIUFLF1",69,0)
 N Y
"RTN","TIUFLF1",70,0)
 I $D(DIR("B")) D  G:XFLG ASKFX S NODE0=^TIU(8925.1,FILEDA,0)
"RTN","TIUFLF1",71,0)
 . S DIR(0)="YO",(DIR("?"),DIR("??"))="^D HELP2^TIUFXHLX(.1)"
"RTN","TIUFLF1",72,0)
 . S DIR("A")="SHARED"
"RTN","TIUFLF1",73,0)
 . D ^DIR I $D(DUOUT)!$D(DTOUT) S XFLG=1 Q
"RTN","TIUFLF1",74,0)
 . S ANS=Y,DR=".1////^S X=ANS" D ^DIE
"RTN","TIUFLF1",75,0)
 I 'SHARE,$G(ANS),$$HASITEMS^TIUFLF1(FILEDA) D DSETSHAR^TIUFLD1(FILEDA) G OWNER
"RTN","TIUFLF1",76,0)
 I SHARE,PARENT2 W !!,"SHARED: Entry is SHARED with multiple parents; Can't edit SHARED"
"RTN","TIUFLF1",77,0)
OWNER I FIELDS[";.05;" D EDOWN^TIUFLF8(FILEDA,.XFLG) G:XFLG ASKFX
"RTN","TIUFLF1",78,0)
OKDIST I FIELDS[";3.02;",TIUFWHO="N" S DR="3.02//NO" D ^DIE I $D(Y)!$D(DTOUT) S DUOUT=1 G ASKFX
"RTN","TIUFLF1",79,0)
SUPVISIT I FIELDS[";3.03;",$P(NODE0,U,4)="CL"!($P(NODE0,U,4)="DC")!($P(NODE0,U,4)="DOC") D  G:$D(DUOUT) ASKFX
"RTN","TIUFLF1",80,0)
 . S SUPVISIT=$P($G(^TIU(8925.1,FILEDA,3)),U,3)
"RTN","TIUFLF1",81,0)
 . S SUPVISIT=$S(SUPVISIT=0:"NO",SUPVISIT=1:"YES",1:"")
"RTN","TIUFLF1",82,0)
 . I SUPVISIT="" D INHERIT^TIUFLD(FILEDA,0,3.03,"E","","",.SUPVISIT) S SUPVISIT=SUPVISIT("E")
"RTN","TIUFLF1",83,0)
 . S DR="3.03//^S X=SUPVISIT" D ^DIE I $D(Y)!$D(DTOUT) S DUOUT=1 Q
"RTN","TIUFLF1",84,0)
 . I SUPVISIT="NO",$P($G(^TIU(8925.1,FILEDA,3)),U,3) S CONTINUE=$$WARNSUP D
"RTN","TIUFLF1",85,0)
 . . I 'CONTINUE S DR="3.03///^S X=SUPVISIT" D ^DIE W " NOT"
"RTN","TIUFLF1",86,0)
 . . W " Suppressed" H 1
"RTN","TIUFLF1",87,0)
STATUS I FIELDS'[";.07;" G ASKFX
"RTN","TIUFLF1",88,0)
 I $P(NODE0,U,4)="CO",$P(NODE0,U,10) G ASKFX
"RTN","TIUFLF1",89,0)
 I TIUFTMPL="A",$G(TIUFSTMP)="",($P(NODE0,U,4)="CL")!($P(NODE0,U,4)="DC")!($P(NODE0,U,4)="DOC")!($P(NODE0,U,4)="CO") W !,"STATUS: Orphans are Inactive; Can't Edit Status" H 2 G ASKFX
"RTN","TIUFLF1",90,0)
 I $P(NODE0,U,4)="CO" W !,"STATUS: Components get their Status from their Parent; Can't Edit Status" H:TIUFXNOD["Basics"!(TIUFXNOD["Boil") 2 G ASKFX
"RTN","TIUFLF1",91,0)
 D ASKSTAT^TIUFLF6(FILEDA,.NODE0,PFILEDA,.NEWSFLG,.XFLG)
"RTN","TIUFLF1",92,0)
ASKFX S:$D(DTOUT)!$D(DUOUT) XFLG=1
"RTN","TIUFLF1",93,0)
 Q
"RTN","TIUFLF1",94,0)
 ;
"RTN","TIUFLF1",95,0)
WARNSUP() ; Function Warns user who asks to Suppress Visit,  Returns 1 to Suppress, 0 to not Suppress.
"RTN","TIUFLF1",96,0)
 N DIR,X,Y
"RTN","TIUFLF1",97,0)
 S DIR(0)="Y",DIR("B")="NO",DIR("A",1)=" Warning: You will NOT GET WORKLOAD CREDIT if you Suppress Visit Selection."
"RTN","TIUFLF1",98,0)
 S DIR("A")=" Sure you want to Suppress Visit Selection"
"RTN","TIUFLF1",99,0)
 W ! D ^DIR W " ... "
"RTN","TIUFLF1",100,0)
 Q Y
"RTN","TIUFLF1",101,0)
 ;
"RTN","TIUFLF2")
0^52^B15764660
"RTN","TIUFLF2",1,0)
TIUFLF2 ; SLC/MAM - Library; File 8925.1 Related: PERSOWNS(FILEDA,PERSON), SELNAME(DEFLT), NAMSCRN(PFILEDA) ;4/23/97  18:20
"RTN","TIUFLF2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLF2",3,0)
 ;
"RTN","TIUFLF2",4,0)
PERSOWNS(FILEDA,PERSON) ; Function determines if PERSON owns 8925.1
"RTN","TIUFLF2",5,0)
 ;Entry FILEDA.
"RTN","TIUFLF2",6,0)
 ; Returns 1^P if FILEDA is personally-owned by PERSON;
"RTN","TIUFLF2",7,0)
 ;         1^C if FILEDA is owned by a class and PERSON belongs to it;
"RTN","TIUFLF2",8,0)
 ;         0   if PERSON doesn't own Entry
"RTN","TIUFLF2",9,0)
 ;         ""  if Entry is not owned except if adding FILEDA as item,
"RTN","TIUFLF2",10,0)
 ;         1   if Entry is not owned and adding FILEDA as item. (Users are confused if they don't see the item, so let them add it even if it's missing things).
"RTN","TIUFLF2",11,0)
 ; Requires 8925.1 FILEDA;
"RTN","TIUFLF2",12,0)
 ; Requires PERSON = IFN in file 200
"RTN","TIUFLF2",13,0)
 N ANS,CLASS
"RTN","TIUFLF2",14,0)
 I $D(^TIU(8925.1,"AP",PERSON,FILEDA)) S ANS="1^P" G PERSX
"RTN","TIUFLF2",15,0)
 S CLASS=$P(^TIU(8925.1,FILEDA,0),U,6)
"RTN","TIUFLF2",16,0)
 I $D(^TIU(8925.1,"AC",+CLASS,FILEDA)) D  G PERSX
"RTN","TIUFLF2",17,0)
 . I $$ISA^USRLM(PERSON,CLASS) S ANS="1^C" Q
"RTN","TIUFLF2",18,0)
 . S ANS=0
"RTN","TIUFLF2",19,0)
 . Q
"RTN","TIUFLF2",20,0)
 I 'CLASS,'$P(^TIU(8925.1,FILEDA,0),U,5) S ANS=$S($G(TIUFSTMP)="T"&($G(TIUFXNOD)["Add"):1,1:"") G PERSX
"RTN","TIUFLF2",21,0)
 S ANS=0
"RTN","TIUFLF2",22,0)
PERSX Q ANS
"RTN","TIUFLF2",23,0)
 ;
"RTN","TIUFLF2",24,0)
SELNAME(DEFLT) ; Function Prompts for Name, Returns Name or "" if nothing selected or @ entered.
"RTN","TIUFLF2",25,0)
 ; Optional DEFLT = present Name if editing name
"RTN","TIUFLF2",26,0)
 N DIR,X,Y,DA,NAME
"RTN","TIUFLF2",27,0)
 S DIR(0)="FA^3:60^S X=$$UPPER^TIULS(X) K:'(X'?1P.E) X",(DIR("?"),DIR("??"))="^D NAME^TIUFXHLX"
"RTN","TIUFLF2",28,0)
 I (TIUFXNOD["Create") S $P(DIR(0),U)="FAO"
"RTN","TIUFLF2",29,0)
 I $D(DEFLT) S DIR("B")=DEFLT
"RTN","TIUFLF2",30,0)
 S DIR("A")=$S(TIUFXNOD["Basics"!(TIUFXNOD["Name"):"NAME: ",TIUFTMPL'="J":"Enter Document Definition Name to add as New Entry: ",1:"Enter the Name of a new Object: ")
"RTN","TIUFLF2",31,0)
 D ^DIR I $D(DTOUT)!$D(DUOUT) S NAME="" G SELNX
"RTN","TIUFLF2",32,0)
 S NAME=Y,NAME=$$UPPER^TIULS(NAME)
"RTN","TIUFLF2",33,0)
SELNX Q NAME
"RTN","TIUFLF2",34,0)
 ;
"RTN","TIUFLF2",35,0)
NAMSCRN(PFILEDA) ; Function returns DIC("S") for File 8925.1 Lookups when
"RTN","TIUFLF2",36,0)
 ;looking up entries to add as items to parent entry. Used in Rtn TIUFT,
"RTN","TIUFLF2",37,0)
 ;NOT in file DD's.
"RTN","TIUFLF2",38,0)
 ; Adding items is done in 2 separate steps: 1) choosing a new or
"RTN","TIUFLF2",39,0)
 ;existing entry and adding it to the file if it is new, and 2) actually
"RTN","TIUFLF2",40,0)
 ;adding entry as an item to the parent. This screen is for the first
"RTN","TIUFLF2",41,0)
 ;step ONLY.  The second step is done in ADDTEN^TIUFLF4 and uses the
"RTN","TIUFLF2",42,0)
 ;screen set on fld 10, subfld .01, which prevents lookup failure due to
"RTN","TIUFLF2",43,0)
 ;duplicate names by letting only IFN TIUFISCR past the screen.
"RTN","TIUFLF2",44,0)
 ; Allows items of appropriate Type or NO Type.
"RTN","TIUFLF2",45,0)
 ; Disallows items which already have a parent EXCEPT for Shared Components (field .1).
"RTN","TIUFLF2",46,0)
 ; Disallows items which user doesn't own, EXCEPT ownerless items,
"RTN","TIUFLF2",47,0)
 ;EXCEPT Shared Components.
"RTN","TIUFLF2",48,0)
 ; Disallows entry from being its own item.
"RTN","TIUFLF2",49,0)
 ; If PFILEDA is nonNat'l, disallows Nat'l entries except Shared Comp.
"RTN","TIUFLF2",50,0)
 ; If PFILEDA is a shared component, disallows nonshared entries.
"RTN","TIUFLF2",51,0)
 ; Requires PFILEDA = IFN of 8925.1 parent entry
"RTN","TIUFLF2",52,0)
 ; Returns SCRN = screen that allows appropriate items
"RTN","TIUFLF2",53,0)
 ; TIUFIMSG is set in DUP^TIUFLF7
"RTN","TIUFLF2",54,0)
 N SCRN,PTYPE,HASPRNT,TYPEIS,TYPEISCL,TYPEISDC,TYPISDOC,TYPISNUL,TYPEISCO
"RTN","TIUFLF2",55,0)
 N SHARED,USROWNS,RTTYPE,CL,NUL,DC,DOC,CO,POSSTYPE,GOODTYPE,SELFITEM
"RTN","TIUFLF2",56,0)
 N NATLOK,PNATL,PNODE0,PSHARED
"RTN","TIUFLF2",57,0)
 S SCRN="I 0"
"RTN","TIUFLF2",58,0)
 S SELFITEM="(Y="_PFILEDA_")"
"RTN","TIUFLF2",59,0)
 S HASPRNT="+$O(^TIU(8925.1,""""AD"""",Y,0))"
"RTN","TIUFLF2",60,0)
 S TYPEIS="($P(^(0),U,4)="
"RTN","TIUFLF2",61,0)
 S NUL="""""",CL="""CL""",DC="""DC""",DOC="""DOC""",CO="""CO"""
"RTN","TIUFLF2",62,0)
 S TYPISNUL=TYPEIS_NUL_")"
"RTN","TIUFLF2",63,0)
 S TYPEISCL=TYPEIS_CL_")"
"RTN","TIUFLF2",64,0)
 S TYPEISDC=TYPEIS_DC_")"
"RTN","TIUFLF2",65,0)
 S TYPISDOC=TYPEIS_DOC_")"
"RTN","TIUFLF2",66,0)
 S TYPEISCO=TYPEIS_CO_")"
"RTN","TIUFLF2",67,0)
 S POSSTYPE=$$POSSTYPE^TIUFLF7(PFILEDA) G:$D(DTOUT) NAMSX
"RTN","TIUFLF2",68,0)
 I POSSTYPE="" W !!," Parent has no Type/Bad Type",! G NAMSX
"RTN","TIUFLF2",69,0)
 S GOODTYPE=""
"RTN","TIUFLF2",70,0)
 I POSSTYPE["CL" S GOODTYPE=$S(GOODTYPE="":TYPEISCL,1:GOODTYPE_"!"_TYPEISCL)
"RTN","TIUFLF2",71,0)
 I POSSTYPE["DC" S GOODTYPE=$S(GOODTYPE="":TYPEISDC,1:GOODTYPE_"!"_TYPEISDC)
"RTN","TIUFLF2",72,0)
 I POSSTYPE["DOC" S GOODTYPE=$S(GOODTYPE="":TYPISDOC,1:GOODTYPE_"!"_TYPISDOC)
"RTN","TIUFLF2",73,0)
 I POSSTYPE["CO" S GOODTYPE=$S(GOODTYPE="":TYPEISCO,1:GOODTYPE_"!"_TYPEISCO)
"RTN","TIUFLF2",74,0)
 S USROWNS="+$$PERSOWNS^TIUFLF2(Y,DUZ)"
"RTN","TIUFLF2",75,0)
 S SHARED="+$P(^TIU(8925.1,Y,0),U,10)",PSHARED=+$P(^TIU(8925.1,PFILEDA,0),U,10)
"RTN","TIUFLF2",76,0)
 S SCRN="I "_GOODTYPE_",'"_SELFITEM_",'$$DUP^TIUFLF7($P(^(0),U),"_PFILEDA_",Y),$$NATLOK^TIUFLF2(^TIU(8925.1,Y,0),"_PFILEDA_"),'("_PSHARED_"&'"_SHARED_") X:'"_SHARED_" ""I "_USROWNS_"&'"_HASPRNT_""""
"RTN","TIUFLF2",77,0)
NAMSX I $D(DTOUT) S SCRN="I 0"
"RTN","TIUFLF2",78,0)
 Q SCRN
"RTN","TIUFLF2",79,0)
 ;
"RTN","TIUFLF2",80,0)
NATLOK(NODE0,PFILEDA) ; Function returns 1/0 if item OK/not OK to add as far
"RTN","TIUFLF2",81,0)
 ;as Natl goes.  Considers if parent is Natl, if Item is Natl,
"RTN","TIUFLF2",82,0)
 ;if User has Natl menu.
"RTN","TIUFLF2",83,0)
 N NATL,PNODE0,PNATL,PTYPE,SHARED,NATLANS
"RTN","TIUFLF2",84,0)
 S NATL=+$P(NODE0,U,13),PNODE0=^TIU(8925.1,PFILEDA,0),PNATL=+$P(PNODE0,U,13),PTYPE=$P(PNODE0,U,4),SHARED=$P(NODE0,U,10),NATLANS=0
"RTN","TIUFLF2",85,0)
 I PTYPE="CL"!(PTYPE="DC") S NATLANS=$S(PNATL:$S(NATL:$S(TIUFWHO="N":1,1:0),1:1),1:$S(NATL:0,1:1))
"RTN","TIUFLF2",86,0)
 I PTYPE="DOC"!(PTYPE="CO") S NATLANS=$S(PNATL:$S(NATL:1,1:0),1:$S(NATL:$S(SHARED:1,1:0),1:1))
"RTN","TIUFLF2",87,0)
 Q NATLANS
"RTN","TIUFLF2",88,0)
 ;
"RTN","TIUFLF3")
0^53^B39078332
"RTN","TIUFLF3",1,0)
TIUFLF3 ; SLC/MAM - Library; File 8925.1 Related: CHECK(FILEDA,PFILEDA), DESCCK(FILEDA), OBJECT, BADNAP(NAP,FILEDA) ;6/9/97  18:20
"RTN","TIUFLF3",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLF3",3,0)
 ;
"RTN","TIUFLF3",4,0)
CHECK(FILEDA,PFILEDA) ; Module Checks Docmt Def FILEDA for completeness/correctness. If FILEDA is a TITLE, also checks sub/Components.  Sets array TIUFCK. Sets variable TIUFDCK.
"RTN","TIUFLF3",5,0)
 ; Requires FILEDA
"RTN","TIUFLF3",6,0)
 ; If FILEDA has an actual or prospective parent (as in Create, Add
"RTN","TIUFLF3",7,0)
 ;Items), requires PFILEDA to check if entry Type is right, given
"RTN","TIUFLF3",8,0)
 ;parent, to NOT set Orphan if it has a prospective parent, to check
"RTN","TIUFLF3",9,0)
 ;inheritance, etc.
"RTN","TIUFLF3",10,0)
 ; TIUFCK=1 if OK; 0^First Reason Whynot if Not OK - Reason Used by
"RTN","TIUFLF3",11,0)
 ;msgs like 'Can't Add Item:' or 'Status limited to I:'
"RTN","TIUFLF3",12,0)
 ; If +TIUFCK=0, then TIUFCK(LETTER)=WHYNOT as in CHECK("F") etc, below.
"RTN","TIUFLF3",13,0)
 ; TIUFDCK=1 if TIUFCK'=1 or not TITLE or No Components or Components OK;
"RTN","TIUFLF3",14,0)
 ;         0^Faulty Component if some Component Not OK
"RTN","TIUFLF3",15,0)
 ; NOTE: if you add a new subscript here, be sure to add it also in
"RTN","TIUFLF3",16,0)
 ;rtn TIUFHA6, which writes it out when user TRIES entry.
"RTN","TIUFLF3",17,0)
 ;
"RTN","TIUFLF3",18,0)
 ; Since CHECK for Titles may call CHECK for objects, DON'T KILL TIUFCK HERE!! Do it before checking!!!
"RTN","TIUFLF3",19,0)
 N NODE0,WHYNOT,TYPE,POSSTYPE,LP,LC,POSSSTAT,PARENT,MSG,NODE6,NODE61
"RTN","TIUFLF3",20,0)
 N ICUSTOM,TIUFI,MISSITEM,CHECK,SHARED,VALUE,LETTER
"RTN","TIUFLF3",21,0)
 S CHECK("F")="Does not Exist in File"
"RTN","TIUFLF3",22,0)
 S CHECK("I")="Has Nonexistent Item; See IRM"
"RTN","TIUFLF3",23,0)
 S CHECK("T")="No Type/Wrong Type"
"RTN","TIUFLF3",24,0)
 S CHECK("C")="Shared; Not Component"
"RTN","TIUFLF3",25,0)
 S CHECK("O")="No Owner"
"RTN","TIUFLF3",26,0)
 S CHECK("S")="No Status/Wrong Status for Type" ;For nonshared entries
"RTN","TIUFLF3",27,0)
 S CHECK("X")="Bad Object in Boilerplate Text." ; See rtn TIUFLX.  NOT set if only problem is inactive object: XI is set instead.
"RTN","TIUFLF3",28,0)
 S CHECK("X1")="For details, select Boilerplate Text and TRY again."
"RTN","TIUFLF3",29,0)
 S CHECK("XI")="Boilerplate Text has inactive object"
"RTN","TIUFLF3",30,0)
 S CHECK("XI1")="For details, select Boilerplate Text and TRY again."
"RTN","TIUFLF3",31,0)
 S CHECK("M")="Multiple Parents" ;For nonshared entries
"RTN","TIUFLF3",32,0)
 S CHECK("A")="Natl with NonNatl Ancestor" ;For nonshared entries
"RTN","TIUFLF3",33,0)
 S CHECK("B")="Personal AND Class Owners"
"RTN","TIUFLF3",34,0)
 S CHECK("U")="Unshared, with Shared Parent"
"RTN","TIUFLF3",35,0)
 S CHECK("V")="No Visit Linkage Method" ;For Titles w/o present/anticipate inherited values
"RTN","TIUFLF3",36,0)
 S CHECK("E")="No Edit Template" ;For Titles w/o present/anticipate inherited values
"RTN","TIUFLF3",37,0)
 S CHECK("R")="No Print Method" ;For Titles w/o present/anticipate inherited values
"RTN","TIUFLF3",38,0)
 S CHECK("H")="No Print Form Header" ;For Titles w/o present/anticipate inherited values whose DC allows Custom Form Headers
"RTN","TIUFLF3",39,0)
 S CHECK("N")="No Print Form Number" ;For Titles w/o present/anticipate inherited values whose DC allows Custom Form Headers
"RTN","TIUFLF3",40,0)
 S CHECK("G")="No Print Group" ;For Titles w/o present/anticipate inherited values whose DC allows Custom Form Headers
"RTN","TIUFLF3",41,0)
 S CHECK("D")="No Validation Method" ;For Titles w/o present/anticipate inherited values
"RTN","TIUFLF3",42,0)
 S CHECK("P")="Orphan"
"RTN","TIUFLF3",43,0)
 S CHECK("J")="No Object Method"
"RTN","TIUFLF3",44,0)
 F LETTER="N","A","P" S CHECK("J"_LETTER)="Object "_$S(LETTER="N":"Name",LETTER="A":"Abbreviation",1:"Print Name")_" finds multiple/wrong object(s)"
"RTN","TIUFLF3",45,0)
 S NODE0=$G(^TIU(8925.1,+FILEDA,0)) I NODE0="" D SET("F") G CHECX
"RTN","TIUFLF3",46,0)
 S MISSITEM=$$MISSITEM^TIUFLF4(FILEDA)
"RTN","TIUFLF3",47,0)
 I MISSITEM D SET("I")
"RTN","TIUFLF3",48,0)
 S PFILEDA=+$G(PFILEDA) S POSSTYPE=$$POSSTYPE^TIUFLF7(PFILEDA) G:$D(DTOUT) CHECX
"RTN","TIUFLF3",49,0)
 S TYPE=$P(NODE0,U,4) I TYPE=""!(POSSTYPE'[(U_TYPE_U)) D
"RTN","TIUFLF3",50,0)
 . I TYPE="O" S TIUFCK("T")="Object has parent, IFN "_PFILEDA S:$G(TIUFCK)="" TIUFCK="0^"_TIUFCK("T") Q
"RTN","TIUFLF3",51,0)
 . D SET("T")
"RTN","TIUFLF3",52,0)
 S SHARED=$P(NODE0,U,10) I SHARED,TYPE'="CO" D SET("C")
"RTN","TIUFLF3",53,0)
 S LP=$L($P(NODE0,U,5)),LC=$L($P(NODE0,U,6))
"RTN","TIUFLF3",54,0)
 I LP&LC D SET("B")
"RTN","TIUFLF3",55,0)
 I 'LP&'LC D SET("O")
"RTN","TIUFLF3",56,0)
 I '$P(NODE0,U,7),'$P(NODE0,U,10) D SET("S")
"RTN","TIUFLF3",57,0)
 I $P(NODE0,U,7),'$P(NODE0,U,10) S POSSSTAT=$$POSSSTAT^TIUFLF5(TYPE) I POSSSTAT'[$E($$STATWORD^TIUFLF5($P(NODE0,U,7))) D SET("S")
"RTN","TIUFLF3",58,0)
 I TYPE="O" D OBJECT G CHECX
"RTN","TIUFLF3",59,0)
 I 'PFILEDA!$P(NODE0,U,13) N ANCESTOR D ANCESTOR^TIUFLF4(FILEDA,NODE0,.ANCESTOR)
"RTN","TIUFLF3",60,0)
 I 'PFILEDA,$$ORPHAN^TIUFLF4(FILEDA,NODE0)="YES" D SET("P")
"RTN","TIUFLF3",61,0)
 S PARENT=+$O(^TIU(8925.1,"AD",FILEDA,0))
"RTN","TIUFLF3",62,0)
 I $O(^TIU(8925.1,"AD",FILEDA,PARENT)),'$P(NODE0,U,10) D SET("M")
"RTN","TIUFLF3",63,0)
 I '$P(NODE0,U,10),$P($G(^TIU(8925.1,PARENT,0)),U,10) D SET("U")
"RTN","TIUFLF3",64,0)
 I $$HASBOIL^TIUFLF(FILEDA,NODE0) D XCHECK^TIUFLX(FILEDA,1),DCHECK^TIUFLX(FILEDA,1)
"RTN","TIUFLF3",65,0)
 I $P(NODE0,U,13),'$P(NODE0,U,10) D
"RTN","TIUFLF3",66,0)
 . S TIUFI=0
"RTN","TIUFLF3",67,0)
 . F  S TIUFI=$O(ANCESTOR(TIUFI)) Q:'TIUFI  I '$P(^TIU(8925.1,ANCESTOR(TIUFI),0),U,13) D SET("A") Q
"RTN","TIUFLF3",68,0)
 ; If Title, NOT an ADDENDUM, must have flds 5-8:
"RTN","TIUFLF3",69,0)
 I TYPE="DOC",FILEDA'=81 D
"RTN","TIUFLF3",70,0)
 . I '$D(^TIU(8925.1,FILEDA,5)) D INHERIT^TIUFLD(FILEDA,PFILEDA,5,"","","",.VALUE) I VALUE="" D SET("E")
"RTN","TIUFLF3",71,0)
 . I '$D(^TIU(8925.1,FILEDA,6)) D INHERIT^TIUFLD(FILEDA,PFILEDA,6,"","","",.VALUE) I VALUE="" D SET("R")
"RTN","TIUFLF3",72,0)
 . I '$D(^TIU(8925.1,FILEDA,7)) D INHERIT^TIUFLD(FILEDA,PFILEDA,7,"","","",.VALUE) I VALUE="" D SET("V")
"RTN","TIUFLF3",73,0)
 . I '$D(^TIU(8925.1,FILEDA,8)) D INHERIT^TIUFLD(FILEDA,PFILEDA,8,"","","",.VALUE) I VALUE="" D SET("D")
"RTN","TIUFLF3",74,0)
 ; If DC or TL, NOT Addendum, check for flds 6.1, 6.12, 6.13;
"RTN","TIUFLF3",75,0)
 ;6.14 will be there, it's set to 1 for Clinical Documents.
"RTN","TIUFLF3",76,0)
 I (TYPE="DOC"),FILEDA'=81 D
"RTN","TIUFLF3",77,0)
 . S NODE61=$G(^TIU(8925.1,FILEDA,6.1))
"RTN","TIUFLF3",78,0)
 . D INHERIT^TIUFLD(FILEDA,PFILEDA,6.14,"","","",.ICUSTOM)
"RTN","TIUFLF3",79,0)
 . ; If parent Allows Custom Hdrs, then Require 6.1/6.12/6.13 (can be inherited):
"RTN","TIUFLF3",80,0)
 . Q:'ICUSTOM
"RTN","TIUFLF3",81,0)
 . I $P(NODE61,U)="" D INHERIT^TIUFLD(FILEDA,PFILEDA,6.1,"","","",VALUE) I VALUE="" D SET("H")
"RTN","TIUFLF3",82,0)
 . I $P(NODE61,U,2)="" D INHERIT^TIUFLD(FILEDA,PFILEDA,6.12,"","","",.VALUE) I VALUE="" D SET("N")
"RTN","TIUFLF3",83,0)
 . I $P(NODE61,U,3)="" D INHERIT^TIUFLD(FILEDA,PFILEDA,6.13,"","","",.VALUE) I VALUE="" D SET("G")
"RTN","TIUFLF3",84,0)
CHECX Q:$D(DTOUT)
"RTN","TIUFLF3",85,0)
 I '$D(TIUFCK) S TIUFCK=1
"RTN","TIUFLF3",86,0)
 I TYPE="DOC"!(TYPE="CO"),'$D(TIUFCK("F")),'$D(TIUFCK("I")),'$D(TIUFCK("T")),'$D(TIUFCK("O")),'$D(TIUFCK("S")),'$D(TIUFCK("B")) D DESCCK(FILEDA)
"RTN","TIUFLF3",87,0)
 I '$D(TIUFDCK) S TIUFDCK=1
"RTN","TIUFLF3",88,0)
 Q
"RTN","TIUFLF3",89,0)
 ;
"RTN","TIUFLF3",90,0)
OBJECT ; Set TIUFCK array for objects (subscripts J,JN,JA,JP)
"RTN","TIUFLF3",91,0)
 ; Needs CHECK array, FILEDA,NODE0
"RTN","TIUFLF3",92,0)
 N TIUFI,NAP,LETTER,XREF,OFILEDA ; NAP is for NAME/ABBREV/PRINTNAME
"RTN","TIUFLF3",93,0)
 I $G(^TIU(8925.1,FILEDA,9))="" D SET("J")
"RTN","TIUFLF3",94,0)
 F TIUFI=1:1:3 S NAP=$P(NODE0,U,TIUFI) Q:NAP=""  D
"RTN","TIUFLF3",95,0)
 . S LETTER=$S(TIUFI=1:"N",TIUFI=2:"A",1:"P")
"RTN","TIUFLF3",96,0)
 . F XREF="B","C","D" D
"RTN","TIUFLF3",97,0)
 . . S OFILEDA=0 F  S OFILEDA=$O(^TIU(8925.1,XREF,NAP,OFILEDA)) Q:'OFILEDA  D  Q:$D(TIUFCK("J"_LETTER))
"RTN","TIUFLF3",98,0)
 . . . Q:'$D(^TIU(8925.1,"AT","O",OFILEDA))
"RTN","TIUFLF3",99,0)
 . . . I OFILEDA'=FILEDA D SET("J"_LETTER)
"RTN","TIUFLF3",100,0)
 Q
"RTN","TIUFLF3",101,0)
 ;
"RTN","TIUFLF3",102,0)
BADNAP(NAP,FILEDA) ; Function returns 1 if FILEDA is Object and NAP is ambiguous as an object name, abbrev or print name. else 0
"RTN","TIUFLF3",103,0)
 N NAPANS,XREF,OFILEDA
"RTN","TIUFLF3",104,0)
 S NAPANS=0 I NAP="" G BADNX
"RTN","TIUFLF3",105,0)
 I '$D(^TIU(8925.1,"AT","O",FILEDA)),$G(TIUFXNOD)'["Create" G BADNX
"RTN","TIUFLF3",106,0)
 F XREF="B","C","D" D
"RTN","TIUFLF3",107,0)
 . S OFILEDA=0 F  S OFILEDA=$O(^TIU(8925.1,XREF,NAP,OFILEDA)) Q:'OFILEDA  D  Q:NAPANS
"RTN","TIUFLF3",108,0)
 . . I OFILEDA'=FILEDA,$D(^TIU(8925.1,"AT","O",OFILEDA)) S NAPANS=1
"RTN","TIUFLF3",109,0)
BADNX Q NAPANS
"RTN","TIUFLF3",110,0)
 ;
"RTN","TIUFLF3",111,0)
SET(LETTER) ; Sets TIUFCK, TIUFCK(LETTER)
"RTN","TIUFLF3",112,0)
 ; Requires CHECK array
"RTN","TIUFLF3",113,0)
 S TIUFCK(LETTER)=CHECK(LETTER)
"RTN","TIUFLF3",114,0)
SETX S:$G(TIUFCK)="" TIUFCK=0_U_TIUFCK(LETTER)
"RTN","TIUFLF3",115,0)
 Q
"RTN","TIUFLF3",116,0)
 ;
"RTN","TIUFLF3",117,0)
DESCCK(FILEDA) ; Module Checks FILEDA Components for correctness/completeness.
"RTN","TIUFLF3",118,0)
 ; Requires FILEDA.
"RTN","TIUFLF3",119,0)
 ; Sets var TIUFDCK.
"RTN","TIUFLF3",120,0)
 ; TIUFDCK=1 if all Comp OK; 0^Faulty Component if some Comp Not OK.
"RTN","TIUFLF3",121,0)
 ; Ignores descendant boilerplate text problems since they are already
"RTN","TIUFLF3",122,0)
 ;caught for original entry.
"RTN","TIUFLF3",123,0)
 N TIUI,IFILEDA,TIUFCK
"RTN","TIUFLF3",124,0)
 S TIUI=0
"RTN","TIUFLF3",125,0)
 F  S TIUFDCK=1,TIUI=$O(^TIU(8925.1,FILEDA,10,TIUI)) Q:'TIUI  D  Q:'TIUFDCK
"RTN","TIUFLF3",126,0)
 . S IFILEDA=+^TIU(8925.1,FILEDA,10,TIUI,0)
"RTN","TIUFLF3",127,0)
 . N TIUFCK D CHECK(IFILEDA,FILEDA) K TIUFCK("X"),TIUFCK("X1"),TIUFCK("XI"),TIUFCK("XI1"),TIUFCK("J"),TIUFCK("JN"),TIUFCK("JA"),TIUFCK("JP")
"RTN","TIUFLF3",128,0)
 . I $D(TIUFCK)>9 S TIUFDCK=0_"^Faulty Component" I "NM"[TIUFWHO S TIUFDCK=TIUFDCK_", IFN "_IFILEDA
"RTN","TIUFLF3",129,0)
 Q
"RTN","TIUFLF4")
0^54^B15201759
"RTN","TIUFLF4",1,0)
TIUFLF4 ; SLC/MAM - Lib; ANCESTOR(FILEDA,NODE0,ANCESTOR,DOCFLAG), ORPHAN(FILEDA,NODE0,ANCESTOR), STUFFLDS(FILEDA,PFILEDA), ADDTEN(PFILEDA,FILEDA,NODE0,TENDA),NUMITEMS(FILEDA), MISSITEM(FILEDA) ;4/23/97  11:02
"RTN","TIUFLF4",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLF4",3,0)
 ;
"RTN","TIUFLF4",4,0)
NUMITEMS(FILEDA) ; Function returns Number of Items of FILEDA; Possibly 0
"RTN","TIUFLF4",5,0)
 N ITEMSANS,TIUFI
"RTN","TIUFLF4",6,0)
 S (ITEMSANS,TIUFI)=0
"RTN","TIUFLF4",7,0)
 F  S TIUFI=$O(^TIU(8925.1,FILEDA,10,TIUFI)) G:'TIUFI NUMIX S ITEMSANS=ITEMSANS+1
"RTN","TIUFLF4",8,0)
NUMIX Q ITEMSANS
"RTN","TIUFLF4",9,0)
 ;
"RTN","TIUFLF4",10,0)
MISSITEM(FILEDA) ; Function Checks FILEDA Items (doesn't check subitems etc.) for existence only. Returns IFN of first missing item it finds, else 0.
"RTN","TIUFLF4",11,0)
 ; Requires FILEDA.
"RTN","TIUFLF4",12,0)
 N TIUI,IFILEDA,MISSANS
"RTN","TIUFLF4",13,0)
 S TIUI=0,MISSANS=0
"RTN","TIUFLF4",14,0)
 F  S TIUI=$O(^TIU(8925.1,FILEDA,10,TIUI)) Q:'TIUI!MISSANS  D
"RTN","TIUFLF4",15,0)
 . S IFILEDA=+^TIU(8925.1,FILEDA,10,TIUI,0)
"RTN","TIUFLF4",16,0)
 . I '$D(^TIU(8925.1,IFILEDA,0)) S MISSANS=IFILEDA
"RTN","TIUFLF4",17,0)
 Q MISSANS
"RTN","TIUFLF4",18,0)
 ;
"RTN","TIUFLF4",19,0)
ANCESTOR(FILEDA,NODE0,ANCESTOR,DOCFLAG) ; Module traces ancestors of FILEDA,
"RTN","TIUFLF4",20,0)
 ;creates array ANCESTOR,
"RTN","TIUFLF4",21,0)
 ; where ANCESTOR(0)=FILEDA,
"RTN","TIUFLF4",22,0)
 ; where ANCESTOR(0) is last array entry if FILEDA has no ancestors OR
"RTN","TIUFLF4",23,0)
 ;          $G(DOCFLAG) AND FILEDA has no ancestor of Type DOC;
"RTN","TIUFLF4",24,0)
 ; where ANCESTOR(1)=Parent IFN of FILEDA,
"RTN","TIUFLF4",25,0)
 ;       ANCESTOR(2)=Parent IFN of ANCESTOR(1)
"RTN","TIUFLF4",26,0)
 ;       ...
"RTN","TIUFLF4",27,0)
 ;       ANCESTOR(n)=IFN of oldest ancestor FILEDA if '$G(DOCFLAG) OR
"RTN","TIUFLF4",28,0)
 ;       ANCESTOR(n)=IFN of ancestor of Type DOC if $G(DOCFLAG) AND
"RTN","TIUFLF4",29,0)
 ;                       FILEDA has an ancestor of Type DOC.
"RTN","TIUFLF4",30,0)
 ; Requires FILEDA, NODE0= 0 Node;
"RTN","TIUFLF4",31,0)
 ; DOCFLAG optional, 0 or 1
"RTN","TIUFLF4",32,0)
 N TIUI,QUIT ;OK
"RTN","TIUFLF4",33,0)
 S TIUI=0,ANCESTOR(0)=FILEDA
"RTN","TIUFLF4",34,0)
 I $P(NODE0,U,4)="O" G ANCEX
"RTN","TIUFLF4",35,0)
 F  D  Q:$G(QUIT)
"RTN","TIUFLF4",36,0)
 . S ANCESTOR(TIUI+1)=$O(^TIU(8925.1,"AD",ANCESTOR(TIUI),0))
"RTN","TIUFLF4",37,0)
 . I 'ANCESTOR(TIUI+1) K ANCESTOR(TIUI+1) S QUIT=1 Q
"RTN","TIUFLF4",38,0)
 . S TIUI=TIUI+1
"RTN","TIUFLF4",39,0)
ANCEX Q
"RTN","TIUFLF4",40,0)
 ;
"RTN","TIUFLF4",41,0)
ORPHAN(FILEDA,NODE0,ANCESTOR) ; Function traces ancestors of FILEDA,
"RTN","TIUFLF4",42,0)
 ; Returns NA if FILEDA is Object or Shared Component,
"RTN","TIUFLF4",43,0)
 ;         NO if NOT NA AND FILEDA belongs to Clinical Docmts Hierarchy,
"RTN","TIUFLF4",44,0)
 ;         YES if NOT NA, AND doesn't belong.
"RTN","TIUFLF4",45,0)
 ; Requires FILEDA, NODE0= 0 Node;
"RTN","TIUFLF4",46,0)
 N ORPHAN,LAST
"RTN","TIUFLF4",47,0)
 I $P(NODE0,U,4)="O" S ORPHAN="NA" G ORPHX
"RTN","TIUFLF4",48,0)
 I '$D(ANCESTOR) D ANCESTOR(FILEDA,NODE0,.ANCESTOR)
"RTN","TIUFLF4",49,0)
 I '$D(^TMP("TIUF",$J,"CLINDOC")) D  G:Y=-1 ORPHX
"RTN","TIUFLF4",50,0)
 . N DIC,X,Y
"RTN","TIUFLF4",51,0)
 . S DIC=8925.1,DIC(0)="X",X="CLINICAL DOCUMENTS" D ^DIC
"RTN","TIUFLF4",52,0)
 . I Y=-1 S ORPHAN="UNKNOWN" Q
"RTN","TIUFLF4",53,0)
 . S ^TMP("TIUF",$J,"CLINDOC")=+Y
"RTN","TIUFLF4",54,0)
 S LAST=$O(ANCESTOR(100),-1) I ANCESTOR(LAST)=^TMP("TIUF",$J,"CLINDOC") S ORPHAN="NO" G ORPHX
"RTN","TIUFLF4",55,0)
 S ORPHAN="YES"
"RTN","TIUFLF4",56,0)
ORPHX Q ORPHAN
"RTN","TIUFLF4",57,0)
 ;
"RTN","TIUFLF4",58,0)
STUFFLDS(FILEDA,PFILEDA) ; Stuff fields .03, .04 (tries), .07, [.1]
"RTN","TIUFLF4",59,0)
 ;for 8925.1 entry FILEDA.
"RTN","TIUFLF4",60,0)
 ; Requires FILEDA.
"RTN","TIUFLF4",61,0)
 ; Requires TIUFTLST as set in TYPELIST^TIUFLF7
"RTN","TIUFLF4",62,0)
 ; Requires PFILEDA if entry has prospective (as in Create and Add Item)
"RTN","TIUFLF4",63,0)
 ;or actual parent in order to try to stuff Type.
"RTN","TIUFLF4",64,0)
 ; Stuffs .03 Print Name = First 60 chars of .01 Name if not from copy
"RTN","TIUFLF4",65,0)
 ;action.
"RTN","TIUFLF4",66,0)
 ; Stuffs .04 Type if only 1 possible type in TIUFTLST (because of parent
"RTN","TIUFLF4",67,0)
 ;or duplicates or option e.g. create objects).
"RTN","TIUFLF4",68,0)
 ; Stuffs .07 Status = Inactive.
"RTN","TIUFLF4",69,0)
 ; If receives parent PFILEDA, parent is Shared, then
"RTN","TIUFLF4",70,0)
 ;stuffs .1 Shared = 1
"RTN","TIUFLF4",71,0)
 ; Should Lock FILEDA before calling STUFFLDS.
"RTN","TIUFLF4",72,0)
 N DIE,DA,DR,Y,NAME,PRINTDR,TYPEDR,STATUSDR,SHAREDR
"RTN","TIUFLF4",73,0)
 N NATL,NATLDR,NODE0,TYPE
"RTN","TIUFLF4",74,0)
 I '$G(PFILEDA) S PFILEDA=0
"RTN","TIUFLF4",75,0)
 S DIE=8925.1,DA=FILEDA
"RTN","TIUFLF4",76,0)
 S NODE0=^TIU(8925.1,FILEDA,0),NAME=$P(NODE0,U),PRINTDR=".03///^S X=NAME"
"RTN","TIUFLF4",77,0)
 I $L(TIUFTLST,U)=3 S TYPE=$P(TIUFTLST,U,2),TYPEDR=".04////^S X=TYPE"
"RTN","TIUFLF4",78,0)
 S STATUSDR=".07///INACTIVE"
"RTN","TIUFLF4",79,0)
 S SHAREDR=".1////1"
"RTN","TIUFLF4",80,0)
 I $G(XQORNOD(0))'["Copy" S DR=PRINTDR
"RTN","TIUFLF4",81,0)
 I $G(TYPEDR) S DR=$S($D(DR):DR_";"_TYPEDR,1:TYPEDR)
"RTN","TIUFLF4",82,0)
 S DR=$S($D(DR):DR_";"_STATUSDR,1:STATUSDR)
"RTN","TIUFLF4",83,0)
 I $P($G(^TIU(8925.1,PFILEDA,0)),U,10) S DR=DR_";"_SHAREDR
"RTN","TIUFLF4",84,0)
 D ^DIE
"RTN","TIUFLF4",85,0)
STUFFX Q
"RTN","TIUFLF4",86,0)
 ;
"RTN","TIUFLF4",87,0)
ADDTEN(PFILEDA,FILEDA,NODE0,TENDA) ; Add item FILEDA to 10 NODE of
"RTN","TIUFLF4",88,0)
 ;File 8925.1 entry PFILEDA. Stuff item Menu Text
"RTN","TIUFLF4",89,0)
 ; Requires PFILEDA = 8925.1 IFN of parent of FILEDA.
"RTN","TIUFLF4",90,0)
 ; Requires FILEDA, Requires NODE0 = ^TIU(8925.1,FILEDA,0)
"RTN","TIUFLF4",91,0)
 ; Returns TENDA = 10 node DA of new item.
"RTN","TIUFLF4",92,0)
 ; Returns TENDA="" if fails lookup.  Screen on fld 10, subfld .01
"RTN","TIUFLF4",93,0)
 ;prevents lookup failure due to duplicate names by allowing only
"RTN","TIUFLF4",94,0)
 ;FILEDA to pass screen.
"RTN","TIUFLF4",95,0)
 ;Should Lock PFILEDA before calling ADDTEN.
"RTN","TIUFLF4",96,0)
 N X,Y,DIE,DR,NAME,DA,DIC,DLAYGO,TIUFISCR,MSG,DUPITEM
"RTN","TIUFLF4",97,0)
 S TENDA=""
"RTN","TIUFLF4",98,0)
 I ('$G(PFILEDA))!('$G(FILEDA)) G ADDTX
"RTN","TIUFLF4",99,0)
 S NAME=$P(NODE0,U)
"RTN","TIUFLF4",100,0)
 I '$D(TIUFTLST) S DUPITEM=0,DUPITEM=$$DUPITEM^TIUFLF7(NAME,PFILEDA) I DUPITEM S MSG=" Can't add Item; Parent already has Item with the same Name" W !!,MSG,! G ADDTX ; possibly needed when called from TIU rather than from TIUF.
"RTN","TIUFLF4",101,0)
 S X=""""_NAME_""""
"RTN","TIUFLF4",102,0)
 S DA(1)=PFILEDA,DLAYGO=8925.1
"RTN","TIUFLF4",103,0)
 S TIUFISCR=FILEDA ; activates screen on fld 10, Subfld .01 in DD
"RTN","TIUFLF4",104,0)
 S DIC="^TIU(8925.1,DA(1),10,",DIC(0)="L",DIC("P")=$P(^DD(8925.1,10,0),U,2)
"RTN","TIUFLF4",105,0)
 D ^DIC S TENDA=+Y I Y=-1 S TENDA="" G ADDTX
"RTN","TIUFLF4",106,0)
 K DIC
"RTN","TIUFLF4",107,0)
 S DIE="^TIU(8925.1,DA(1),10,",DA=TENDA,DR="4///^S X=$$MIXED^TIULS($E(NAME,1,20))" D ^DIE
"RTN","TIUFLF4",108,0)
ADDTX Q
"RTN","TIUFLF4",109,0)
 ;
"RTN","TIUFLF5")
0^55^B30717217
"RTN","TIUFLF5",1,0)
TIUFLF5 ; SLC/MAM - Library; File 8925.1 Related: STATSCRN(),STATLIST(FILEDA,PFILEDA,NEWSTAT,STATMSG,STATLIST), ANCSTAT(FILEDA), POSSSTAT(TYPE), STATOK(TYPE,NEWSTAT), SELSTAT(FILEDA,PFILEDA,DEFLT),STATWORD(PIECE7) ;4/17/97  23:35
"RTN","TIUFLF5",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLF5",3,0)
 ;
"RTN","TIUFLF5",4,0)
STATSCRN() ; Function returns DD Status Screen for Status Field .07:
"RTN","TIUFLF5",5,0)
 ;Permits only Statuses which apply to Document Definitions: 
"RTN","TIUFLF5",6,0)
 ;INACTIVE, TEST, ACTIVE.
"RTN","TIUFLF5",7,0)
 Q "I ($P(^(0),U,4)=""DEF"")"
"RTN","TIUFLF5",8,0)
 ;
"RTN","TIUFLF5",9,0)
STATOK(TYPE,NEWSTAT) ; Function returns 1/0 if NEWSTAT is/isn't permissible for TYPE.
"RTN","TIUFLF5",10,0)
 ; Requires internal Type e.g. CL; Requires NEWSTAT= I, T, or A.
"RTN","TIUFLF5",11,0)
 N ANS,STAT,MSG
"RTN","TIUFLF5",12,0)
 S STAT=$$POSSSTAT(TYPE)
"RTN","TIUFLF5",13,0)
 I STAT[NEWSTAT S ANS=1 G STOKX
"RTN","TIUFLF5",14,0)
 S MSG=" Status Limited to "_$S(STAT="ITA":"I, T, or A: ",STAT="IA":"I or A: ",1:"I: ")_$S(STAT="I":"No Type/Bad Type",1:^TMP("TIUF",$J,"TYPE"_TYPE))
"RTN","TIUFLF5",15,0)
 W !!,MSG,!
"RTN","TIUFLF5",16,0)
 S ANS=0
"RTN","TIUFLF5",17,0)
STOKX Q ANS
"RTN","TIUFLF5",18,0)
 ;
"RTN","TIUFLF5",19,0)
STATLIST(FILEDA,PFILEDA,NEWSTAT,STATMSG,STATLIST) ; Module sets List of possible Statuses, sets msg explaining any limitations on Status
"RTN","TIUFLF5",20,0)
 ; Requires FILEDA of 8925.1 entry whose Status is being edited, as set in ASKSTAT^TIUFLF6.
"RTN","TIUFLF5",21,0)
 ; Requires PFILEDA if FILEDA has an actual or prospective parent
"RTN","TIUFLF5",22,0)
 ;(as in Create, Add Items).
"RTN","TIUFLF5",23,0)
 ; Optional NEWSTAT = I, T, or A for anticipated new status.  If entry hs bad status but user is correcting it, don't tell them it's bad.
"RTN","TIUFLF5",24,0)
 ; Optional STATLIST: Returns STATLIST = subset of "AIT", representing acceptable STatuses.
"RTN","TIUFLF5",25,0)
 ;
"RTN","TIUFLF5",26,0)
 N NODE0,TYPE,POSSSTAT,ANCSTAT,STATUS
"RTN","TIUFLF5",27,0)
 S PFILEDA=+$G(PFILEDA),STATMSG=""
"RTN","TIUFLF5",28,0)
 S NODE0=^TIU(8925.1,FILEDA,0),TYPE=$P(NODE0,U,4),POSSSTAT=$$POSSSTAT(TYPE)
"RTN","TIUFLF5",29,0)
 N TIUFCK,TIUFDCK D CHECK^TIUFLF3(FILEDA,PFILEDA) G:$D(DTOUT) STATX
"RTN","TIUFLF5",30,0)
 ;            Problem with Check:
"RTN","TIUFLF5",31,0)
 I 'TIUFCK D  I $L($G(STATMSG)) G STATX
"RTN","TIUFLF5",32,0)
 . ;          Problem with Check is Wrong Status:
"RTN","TIUFLF5",33,0)
 . I $D(TIUFCK("S")) D  Q
"RTN","TIUFLF5",34,0)
 . . S STATLIST=POSSSTAT
"RTN","TIUFLF5",35,0)
 . . ;        If going to change Status to permissable one, and Status is the ONLY problem, don't set msg:
"RTN","TIUFLF5",36,0)
 . . I $D(NEWSTAT),POSSSTAT[$E(NEWSTAT) K TIUFCK("S") I $D(TIUFCK)<11 Q
"RTN","TIUFLF5",37,0)
 . . ;        If present Status is wrong set msg:
"RTN","TIUFLF5",38,0)
 . . I TYPE="CL"!(TYPE="DC")!(TYPE="O") S STATMSG="  Status Limited to A or I: "_^TMP("TIUF",$J,"TYPE"_TYPE) Q
"RTN","TIUFLF5",39,0)
 . K TIUFCK("S") I $D(TIUFCK)<11 Q
"RTN","TIUFLF5",40,0)
 . ;          Problem with Check is not Status:
"RTN","TIUFLF5",41,0)
 . S:$G(NEWSTAT)'="I" STATMSG=" Status Limited to I: "_$P(TIUFCK,U,2),STATLIST="I"
"RTN","TIUFLF5",42,0)
 ;            descendant Problem:
"RTN","TIUFLF5",43,0)
 I 'TIUFDCK S STATLIST="I" I $G(NEWSTAT)'="I" S STATMSG=" Status Limited to I: "_$P(TIUFDCK,U,2) G STATX
"RTN","TIUFLF5",44,0)
 ;            Inactive Ancestor Problem:
"RTN","TIUFLF5",45,0)
 I 'PFILEDA G STATX
"RTN","TIUFLF5",46,0)
 S ANCSTAT=$$ANCSTAT(FILEDA,PFILEDA)
"RTN","TIUFLF5",47,0)
 I ANCSTAT D  S STATLIST="I" G STATX
"RTN","TIUFLF5",48,0)
 . ;W Ancestor msg if user has chosen and choice is not inactive (STATLIST is not used for help (except setting msg), help is managed solely in TIUFXHLX).
"RTN","TIUFLF5",49,0)
 . S STATUS=$S($G(Y):$E(^TMP("TIUF",$J,"STAT"_Y)),1:$G(NEWSTAT))
"RTN","TIUFLF5",50,0)
 . I STATUS'="I" S STATMSG=" Status Limited to I: Inactive Ancestor"
"RTN","TIUFLF5",51,0)
STATX I '$D(STATLIST) D
"RTN","TIUFLF5",52,0)
 . I POSSSTAT="I" S STATLIST="I" Q:$G(NEWSTAT)="I"
"RTN","TIUFLF5",53,0)
 . I POSSSTAT="A" S STATLIST="A" Q:$G(NEWSTAT)="A"
"RTN","TIUFLF5",54,0)
 . I POSSSTAT="IA" S STATLIST="IA" Q:"IA"[$G(NEWSTAT)
"RTN","TIUFLF5",55,0)
 . I '$D(STATLIST) S STATLIST="ITA" Q
"RTN","TIUFLF5",56,0)
 . I TYPE="CL"!(TYPE="DC")!(TYPE="O") S STATMSG=" Status Limited to A or I: "_^TMP("TIUF",$J,"TYPE"_TYPE) Q
"RTN","TIUFLF5",57,0)
 Q
"RTN","TIUFLF5",58,0)
 ;
"RTN","TIUFLF5",59,0)
ANCSTAT(FILEDA,PFILEDA) ; Function returns 1 if any Ancestor is Inactive [or has no status];
"RTN","TIUFLF5",60,0)
 N PNODE0,PANCEST,ANSTAT,TIUI,PANCSTAT
"RTN","TIUFLF5",61,0)
 ;Check parent separately since item may have only PROSPECTIVE parent:
"RTN","TIUFLF5",62,0)
 S ANSTAT=0,PNODE0=^TIU(8925.1,PFILEDA,0),PANCSTAT=$P(PNODE0,U,7)
"RTN","TIUFLF5",63,0)
 I PANCSTAT=+^TMP("TIUF",$J,"STATI")!'PANCSTAT S ANSTAT=1 G ANCSX
"RTN","TIUFLF5",64,0)
 D ANCESTOR^TIUFLF4(PFILEDA,PNODE0,.PANCEST)
"RTN","TIUFLF5",65,0)
 F TIUI=1:1 Q:'$G(PANCEST(TIUI))  D  Q:ANSTAT
"RTN","TIUFLF5",66,0)
 . S PANCSTAT=$P(^TIU(8925.1,PANCEST(TIUI),0),U,7)
"RTN","TIUFLF5",67,0)
 . I PANCSTAT=+^TMP("TIUF",$J,"STATI")!'PANCSTAT S ANSTAT=1
"RTN","TIUFLF5",68,0)
ANCSX Q ANSTAT
"RTN","TIUFLF5",69,0)
 ;
"RTN","TIUFLF5",70,0)
POSSSTAT(TYPE) ; Function returns permissible Statuses for Type
"RTN","TIUFLF5",71,0)
 ; Permissible Statuses is string subset of ITA: (Inactive, Test, Active)
"RTN","TIUFLF5",72,0)
 ; Requires internal Type e.g. CL
"RTN","TIUFLF5",73,0)
 N POSSSTAT
"RTN","TIUFLF5",74,0)
 S POSSSTAT=$S(TYPE="CL":"IA",TYPE="DC":"IA",TYPE="DOC":"ITA",TYPE="CO":"ITA",TYPE="O":"IA",1:"I") ; Inactive for bad or no Type.
"RTN","TIUFLF5",75,0)
 Q POSSSTAT
"RTN","TIUFLF5",76,0)
 ;
"RTN","TIUFLF5",77,0)
SELSTAT(FILEDA,PFILEDA,DEFLT) ; Function Prompts for Status, Returns Selected Status: ActiveIFN^ACTIVE, InactiveIFN^INACTIVE, TestIFN^TEST,  "" if nothing selected or @ entered.
"RTN","TIUFLF5",78,0)
 ; Optional FILEDA: not received for Edit Status.
"RTN","TIUFLF5",79,0)
 ; Optional PFILEDA
"RTN","TIUFLF5",80,0)
 ; Optional DEFLT = 'INACTIVE', etc.
"RTN","TIUFLF5",81,0)
 ; FILEDA, PFILEDA,DEFLT are needed when editing Status under Edit Basics
"RTN","TIUFLF5",82,0)
 ;NOT needed when selecting Status for Edit Status. 
"RTN","TIUFLF5",83,0)
 ; 
"RTN","TIUFLF5",84,0)
 ; Requires TIUFXNOD
"RTN","TIUFLF5",85,0)
 N DIR,X,Y,DA,STATUS,AOK,INACTOK,TOK,CHOICE,STATSCRN,TIUFSMSG
"RTN","TIUFLF5",86,0)
 N TIUFSLST,STATOK
"RTN","TIUFLF5",87,0)
 I '$G(FILEDA) S FILEDA=0
"RTN","TIUFLF5",88,0)
 S DIR(0)=$S(TIUFXNOD["Status...":"FAO^1:9",1:"FA^1:9"),(DIR("?"),DIR("??"))="^D STATUS^TIUFXHLX"
"RTN","TIUFLF5",89,0)
 I $D(DEFLT) S DIR("B")=DEFLT
"RTN","TIUFLF5",90,0)
 ;TIUFSMSG, TIUFSLST set by STATLIST; used in Xecut help
"RTN","TIUFLF5",91,0)
 I FILEDA D STATLIST(FILEDA,+$G(PFILEDA),0,.TIUFSMSG,.TIUFSLST) G:$D(DTOUT) SELSX D
"RTN","TIUFLF5",92,0)
 . S (AOK,INACTOK,TOK)=0
"RTN","TIUFLF5",93,0)
 . S:TIUFSLST["A" AOK=1 S:TIUFSLST["I" INACTOK=1 S:TIUFSLST["T" TOK=1
"RTN","TIUFLF5",94,0)
 . S CHOICE=""
"RTN","TIUFLF5",95,0)
 . I AOK S CHOICE=CHOICE_$S(CHOICE'="":"/A",1:"A")
"RTN","TIUFLF5",96,0)
 . I INACTOK S CHOICE=CHOICE_$S(CHOICE'="":"/I",1:"I")
"RTN","TIUFLF5",97,0)
 . I TOK S CHOICE=CHOICE_$S(CHOICE'="":"/T",1:"T")
"RTN","TIUFLF5",98,0)
 . S CHOICE="("_CHOICE_")"
"RTN","TIUFLF5",99,0)
 I 'FILEDA D
"RTN","TIUFLF5",100,0)
 . I TIUFXNOD["Status..." D
"RTN","TIUFLF5",101,0)
 . . I $P($G(TIUFATTR),U)="T",$P($G(TIUFAVAL),U)="O" S CHOICE="(A/I)",TIUFSLST="AI",TIUFSMSG="Status limited to A or I: OBJECT" Q
"RTN","TIUFLF5",102,0)
 . . S CHOICE="(A/I/T)",TIUFSLST="AIT"
"RTN","TIUFLF5",103,0)
 S DIR("A")=$S('FILEDA:"Select STATUS",1:"STATUS")_": "_CHOICE_": "
"RTN","TIUFLF5",104,0)
AGAIN D ^DIR I $D(DTOUT)!$D(DUOUT) S STATUS="" G SELSX
"RTN","TIUFLF5",105,0)
 S STATUS=$$UPPER^TIULS(Y)
"RTN","TIUFLF5",106,0)
 D  I 'STATOK G AGAIN
"RTN","TIUFLF5",107,0)
 . S STATOK=1
"RTN","TIUFLF5",108,0)
 . I $E(STATUS)="A","ACTIVE"[STATUS W:(STATUS'="ACTIVE") "  ACTIVE" S STATUS=^TMP("TIUF",$J,"STATA") Q  ;11^ACTIVE
"RTN","TIUFLF5",109,0)
 . I $E(STATUS)="I","INACTIVE"[STATUS W:(STATUS'="INACTIVE") "  INACTIVE" S STATUS=^TMP("TIUF",$J,"STATI") Q
"RTN","TIUFLF5",110,0)
 . I $E(STATUS)="T","TEST"[STATUS W:(STATUS'="TEST") "  TEST" S STATUS=^TMP("TIUF",$J,"STATT") Q
"RTN","TIUFLF5",111,0)
 . I STATUS'="" W "  ??  Enter '^' to exit" S STATOK=0 Q
"RTN","TIUFLF5",112,0)
 I FILEDA,STATUS,TIUFSLST'[$E($P(STATUS,U,2)) S STATUS="" W "  ??" G AGAIN ; User entered something that doesn't pass screen.
"RTN","TIUFLF5",113,0)
SELSX S:$D(DTOUT) STATUS=""
"RTN","TIUFLF5",114,0)
 Q STATUS
"RTN","TIUFLF5",115,0)
 ;
"RTN","TIUFLF5",116,0)
STATWORD(PIECE7) ; Function returns Status as a word: ACTIVE, TEST, INACTIVE or NO/BAD
"RTN","TIUFLF5",117,0)
 ; NO/BAD if no status or status is missing from 8925.6 status file, or status is not entry active, test or inactive in 8925.6.
"RTN","TIUFLF5",118,0)
 ; Requires PIECE7= fld .07 of 8925.1 entry, could be null
"RTN","TIUFLF5",119,0)
 N STATANS
"RTN","TIUFLF5",120,0)
 I '$D(^TMP("TIUF",$J,"STATI")) D SETUP^TIUFL
"RTN","TIUFLF5",121,0)
 S STATANS=$G(^TMP("TIUF",$J,"STAT"_+PIECE7))
"RTN","TIUFLF5",122,0)
 I (STATANS'="ACTIVE"),(STATANS'="TEST"),(STATANS'="INACTIVE") S STATANS="NO/BAD"
"RTN","TIUFLF5",123,0)
 Q STATANS
"RTN","TIUFLF5",124,0)
 ;
"RTN","TIUFLF6")
0^56^B17775342
"RTN","TIUFLF6",1,0)
TIUFLF6 ; SLC/MAM - Library; File 8925.1 Related:  ASKSTAT(DA,NODE0,PFIELDA,NEWFLAG,XFLG), AUTOSTAT(DA,NODE0,STAT),DESCSTAT(FILEDA,NEWSTAT) ;4/17/97  20:39
"RTN","TIUFLF6",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLF6",3,0)
 ;
"RTN","TIUFLF6",4,0)
ASKSTAT(DA,NODE0,PFILEDA,NEWFLAG,XFLG) ; User edit DA Status. Does AUTOSTAT.
"RTN","TIUFLF6",5,0)
 ; Requires DA,NODE0
"RTN","TIUFLF6",6,0)
 ; Requires PFILEDA if DA has an actual/prospective parent.
"RTN","TIUFLF6",7,0)
 ; Returns NEWFLAG=0 if Status unchanged, = 1^ExternalNewStatus if changed, e.g. 1^ACTIVE
"RTN","TIUFLF6",8,0)
 ; Returns XFLG=1 if user ^exited or timed out, else as received.
"RTN","TIUFLF6",9,0)
 N XQORM,TIUJ,NEWSTAT,DIR,X,Y,TIUFSTAT,TIUFPFDA,CONTINUE
"RTN","TIUFLF6",10,0)
 N STATUS,DEFLT
"RTN","TIUFLF6",11,0)
 S NEWFLAG=0
"RTN","TIUFLF6",12,0)
 S DEFLT=$$STATWORD^TIUFLF5($P(NODE0,U,7))
"RTN","TIUFLF6",13,0)
READST K DUOUT S:(DEFLT'="NO/BAD") STATUS=$$SELSTAT^TIUFLF5(DA,PFILEDA,DEFLT) S:(DEFLT="NO/BAD") STATUS=$$SELSTAT^TIUFLF5(DA,PFILEDA)
"RTN","TIUFLF6",14,0)
 I $D(DUOUT)!$D(DTOUT) G ASKSX
"RTN","TIUFLF6",15,0)
 I STATUS="" W "  ?? Enter appropriate Status or '^' to exit",! H 2 G READST
"RTN","TIUFLF6",16,0)
 S NEWSTAT=STATUS I +NEWSTAT'=$P(NODE0,U,7) S NEWFLAG="1^"_$P(NEWSTAT,U,2)
"RTN","TIUFLF6",17,0)
 S NEWSTAT=$P(NEWSTAT,U,2) ;e.g. ACTIVE
"RTN","TIUFLF6",18,0)
 I $P(NODE0,U,4)="O",NEWFLAG,NEWSTAT="INACTIVE" S CONTINUE=$$WARNOBJI(FILEDA) D  G:'CONTINUE ASKSX
"RTN","TIUFLF6",19,0)
 . I CONTINUE W " Inactivated" H 1 Q
"RTN","TIUFLF6",20,0)
 . W " NOT Inactivated" H 1
"RTN","TIUFLF6",21,0)
 I NEWFLAG,NEWSTAT="INACTIVE","CLDC"[$P(NODE0,U,4),$$HASITEMS^TIUFLF1(FILEDA) S CONTINUE=$$WARNING^TIUFHA3 W:CONTINUE " Entry and any Components Inactivated" I 'CONTINUE W " NOT Inactivated" H 1 G ASKSX
"RTN","TIUFLF6",22,0)
 D AUTOSTAT(DA,NODE0,NEWSTAT)
"RTN","TIUFLF6",23,0)
ASKSX S:$D(DUOUT)!$D(DTOUT) XFLG=1
"RTN","TIUFLF6",24,0)
 Q
"RTN","TIUFLF6",25,0)
 ;
"RTN","TIUFLF6",26,0)
WARNOBJI(FILEDA) ; Function Warns user inactivating an object,  Returns 1 to Proceed, 0 to Stop.
"RTN","TIUFLF6",27,0)
 N DIR,X,Y,USED,WARNANS
"RTN","TIUFLF6",28,0)
 S USED=$$OBJUSED^TIUFLJ(FILEDA) I USED'["A" S WARNANS=1 G WARNX
"RTN","TIUFLF6",29,0)
 S DIR(0)="Y",DIR("B")="NO",DIR("A",1)=" WARNING: Object is embedded in boilerplate text of active titles.  If you"
"RTN","TIUFLF6",30,0)
 S DIR("A",2)="inactivate the object, it will not function when users enter documents against"
"RTN","TIUFLF6",31,0)
 S DIR("A",3)="such titles.  You might want to warn users or even take such titles offline"
"RTN","TIUFLF6",32,0)
 S DIR("A",4)="while the Object is inactive."
"RTN","TIUFLF6",33,0)
 S DIR("A")="  Continue"
"RTN","TIUFLF6",34,0)
 D ^DIR W " ... " S WARNANS=Y
"RTN","TIUFLF6",35,0)
WARNX Q WARNANS
"RTN","TIUFLF6",36,0)
 ;
"RTN","TIUFLF6",37,0)
AUTOSTAT(DA,NODE0,STAT) ; Auto edit DA to Status STAT; Auto edit DA descendants
"RTN","TIUFLF6",38,0)
 N DIE,DR,X,Y
"RTN","TIUFLF6",39,0)
 I STAT="INACTIVE" D
"RTN","TIUFLF6",40,0)
 . S DIE=8925.1,DR=".07///^S X=STAT" D ^DIE
"RTN","TIUFLF6",41,0)
 . Q:$P(NODE0,U,4)="O"
"RTN","TIUFLF6",42,0)
 . ;Inactivate descendants, all the way down
"RTN","TIUFLF6",43,0)
 . D DESCSTAT(DA,"INACTIVE")
"RTN","TIUFLF6",44,0)
 I STAT="TEST" D
"RTN","TIUFLF6",45,0)
 . S DIE=8925.1,DR=".07///^S X=STAT" D ^DIE
"RTN","TIUFLF6",46,0)
 . D DESCSTAT(DA,"TEST")
"RTN","TIUFLF6",47,0)
 I STAT="ACTIVE" D
"RTN","TIUFLF6",48,0)
 . S DIE=8925.1,DR=".07///^S X=STAT" D ^DIE
"RTN","TIUFLF6",49,0)
 . ; I DOC, activate all descendants.
"RTN","TIUFLF6",50,0)
 . I $P(NODE0,U,4)="DOC" D DESCSTAT(DA,STAT)
"RTN","TIUFLF6",51,0)
 . ; I CL or DC, let user activate desc by using separate option
"RTN","TIUFLF6",52,0)
 . ; I O, done.
"RTN","TIUFLF6",53,0)
 Q
"RTN","TIUFLF6",54,0)
 ;
"RTN","TIUFLF6",55,0)
DESCSTAT(FILEDA,NEWSTAT) ;  Edits Status of all descendants of FILEDA
"RTN","TIUFLF6",56,0)
 ;except Shared Components.
"RTN","TIUFLF6",57,0)
 ; Gives them Status NEWSTAT
"RTN","TIUFLF6",58,0)
 ; Requires FILEDA.  Requires NEWSTAT = ACTIVE, TEST, or INACTIVE
"RTN","TIUFLF6",59,0)
 ; Called with NEWSTAT="ACTIVE" for Components ONLY.
"RTN","TIUFLF6",60,0)
 N TIUI,IFILEDA,INODE0,DIE,X,Y,STATUS
"RTN","TIUFLF6",61,0)
 S TIUI=0,DIE=8925.1
"RTN","TIUFLF6",62,0)
 F  S TIUI=$O(^TIU(8925.1,FILEDA,10,TIUI)) Q:'TIUI  D
"RTN","TIUFLF6",63,0)
 . S IFILEDA=+^TIU(8925.1,FILEDA,10,TIUI,0)
"RTN","TIUFLF6",64,0)
 . S INODE0=$G(^TIU(8925.1,IFILEDA,0))
"RTN","TIUFLF6",65,0)
 . I INODE0="" W !!," File Entry "_FILEDA_" has Nonexistent item "_IFILEDA_"; See IRM",! H 5 Q
"RTN","TIUFLF6",66,0)
 . I $P(INODE0,U,10) Q
"RTN","TIUFLF6",67,0)
 . S DA=IFILEDA,DR=".07///^S X=NEWSTAT" D ^DIE
"RTN","TIUFLF6",68,0)
 . D DESCSTAT(IFILEDA,NEWSTAT)
"RTN","TIUFLF6",69,0)
DESCX Q
"RTN","TIUFLF6",70,0)
 ;
"RTN","TIUFLF6",71,0)
CANEDIT(FILEDA) ; Function returns 1 if Shared Component can be edited, else 0
"RTN","TIUFLF6",72,0)
 ; Can be edited if all parent Titles are Inactive.  Ignores parents which don't exist or have no Status.
"RTN","TIUFLF6",73,0)
 N PFILEDA,PSTATUS,EDITANS,PNODE0,PTYPE
"RTN","TIUFLF6",74,0)
 S EDITANS=1,PFILEDA=0
"RTN","TIUFLF6",75,0)
 F  S PFILEDA=$O(^TIU(8925.1,"AD",FILEDA,PFILEDA)) G:'PFILEDA CANEX D  G:'EDITANS!$D(DTOUT) CANEX
"RTN","TIUFLF6",76,0)
 . I '$D(^TIU(8925.1,PFILEDA,0)) W " File Entry "_PFILEDA_" from AD XREF is missing from the file: See IRM" D PAUSE^TIUFXHLX Q
"RTN","TIUFLF6",77,0)
 . S PNODE0=^TIU(8925.1,PFILEDA,0),PTYPE=$P(PNODE0,U,4)
"RTN","TIUFLF6",78,0)
 . I PTYPE="DOC" S PSTATUS=$P(PNODE0,U,7),PSTATUS=$$STATWORD^TIUFLF5(PSTATUS) I PSTATUS="NO/BAD" W " File Entry "_PFILEDA_" has No Status/Bad Status" D PAUSE^TIUFXHLX Q
"RTN","TIUFLF6",79,0)
 . I PTYPE="DOC" S:(PSTATUS="ACTIVE"!(PSTATUS="TEST")) EDITANS=0 Q
"RTN","TIUFLF6",80,0)
 . I PTYPE="CO" S EDITANS=$$CANEDIT(PFILEDA)
"RTN","TIUFLF6",81,0)
CANEX S:$D(DTOUT) EDITANS=0
"RTN","TIUFLF6",82,0)
 Q EDITANS
"RTN","TIUFLF6",83,0)
 ;
"RTN","TIUFLF7")
0^57^B22452826
"RTN","TIUFLF7",1,0)
TIUFLF7 ; SLC/MAM - Library; File 8925.1: POSSTYPE(PFILEDA),TYPELIST(NAME,FILEDA,PFILEDA,TYPEMSG,TYPELIST),EDTYPE(FILEDA,NODE0,PFILEDA,XFLG,USED),DUPNAME(NAME,FILEDA),DUPITEM(NAME,PFILEDA,FILEDA) ;4/28/97  20:39
"RTN","TIUFLF7",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLF7",3,0)
 ;
"RTN","TIUFLF7",4,0)
POSSTYPE(PFILEDA) ; Function returns possible Types an Entry may have to
"RTN","TIUFLF7",5,0)
 ;be consistent with its parent, e.g. ^CL^DC^
"RTN","TIUFLF7",6,0)
 ; If parent has bad type or no type, Returns POSSTYPE="".
"RTN","TIUFLF7",7,0)
 ; If PFILEDA = 0, Returns all Types including Object.
"RTN","TIUFLF7",8,0)
 ; Requires PFILEDA = 8925.1 IFN of parent of Entry;
"RTN","TIUFLF7",9,0)
 ;                  = 0 if Entry has no parent, actual or prospective.
"RTN","TIUFLF7",10,0)
 ; Shared CO can have more than 1 parent.  But any parent will determine the type of the Child to be a CO, so OK to check only 1 parent.
"RTN","TIUFLF7",11,0)
 N PNODE0,POSSTYPE,PTYPE
"RTN","TIUFLF7",12,0)
 S POSSTYPE=""
"RTN","TIUFLF7",13,0)
 I 'PFILEDA S POSSTYPE="^CL^DC^DOC^CO^O^" G POSTX
"RTN","TIUFLF7",14,0)
 S PNODE0=$G(^TIU(8925.1,PFILEDA,0)) I '$D(PNODE0) W !!," File entry "_PFILEDA_" does not exist in File; See IRM",! D PAUSE^TIUFXHLX G POSTX
"RTN","TIUFLF7",15,0)
 S PTYPE=$P(PNODE0,U,4)
"RTN","TIUFLF7",16,0)
 S POSSTYPE=$S(PTYPE="CL":"^CL^DC^",PTYPE="DC":"^DOC^",PTYPE="CO"!(PTYPE="DOC"):"^CO^",1:"")
"RTN","TIUFLF7",17,0)
POSTX Q POSSTYPE
"RTN","TIUFLF7",18,0)
 ;
"RTN","TIUFLF7",19,0)
TYPELIST(NAME,FILEDA,PFILEDA,TYPEMSG,TYPELIST) ; Module sets list of possible types, sets msg array TYPEMSG explaining nonparent limits on type.
"RTN","TIUFLF7",20,0)
 ; Requires NAME of entry being checked
"RTN","TIUFLF7",21,0)
 ; Requires PFILEDA=IFN of parent if entry has actual or prospective parent (as in Create, Add Items)
"RTN","TIUFLF7",22,0)
 ; Requires FILEDA if entry already exists in the file
"RTN","TIUFLF7",23,0)
 ; Optional TYPEMSG
"RTN","TIUFLF7",24,0)
 ; Optional TYPELIST: Returns TYPELIST = subset of CL,DC,DOC,CO,O
"RTN","TIUFLF7",25,0)
 ;representing permitted Types. Example: ^CL^DOC^
"RTN","TIUFLF7",26,0)
 ;If has parent, parent already has item w same name, then TYPELIST=""
"RTN","TIUFLF7",27,0)
 N DUPNAME,POSSTYPE,TYPE,REST,FDATYPE
"RTN","TIUFLF7",28,0)
 S FILEDA=+$G(FILEDA),PFILEDA=+$G(PFILEDA),TYPELIST=""
"RTN","TIUFLF7",29,0)
 S FDATYPE=$S(FILEDA:$P(^TIU(8925.1,FILEDA,0),U,4),1:"")
"RTN","TIUFLF7",30,0)
 I (FDATYPE'="CL")&(FDATYPE'="DC")&(FDATYPE'="DOC")&(FDATYPE'="CO")&(FDATYPE'="O") S FDATYPE=""
"RTN","TIUFLF7",31,0)
 S DUPNAME=$$DUPNAME(NAME,FILEDA)
"RTN","TIUFLF7",32,0)
 S POSSTYPE=$$POSSTYPE(PFILEDA) G:$D(DTOUT) TYPEX
"RTN","TIUFLF7",33,0)
 I POSSTYPE="" S TYPEMSG(1)="Parent has No Type/Wrong Type" G TYPEX
"RTN","TIUFLF7",34,0)
 I FDATYPE="O"!(TIUFTMPL="J") S TYPELIST="^O^" G TYPEX
"RTN","TIUFLF7",35,0)
 S REST="" F TYPE="CL","DC","DOC","CO","O" I POSSTYPE[(U_TYPE_U) D
"RTN","TIUFLF7",36,0)
 . I DUPNAME[(U_TYPE_U) S REST=$S(REST'="":REST_" or "_TYPE,1:TYPE) Q
"RTN","TIUFLF7",37,0)
 . S TYPELIST=$S(TYPE="O"&((FDATYPE="O")!(FDATYPE="")):TYPELIST_U_TYPE,TYPE="O":TYPELIST,1:TYPELIST_U_TYPE)
"RTN","TIUFLF7",38,0)
 I TYPELIST'="" S TYPELIST=TYPELIST_U
"RTN","TIUFLF7",39,0)
 I REST'="" S:REST="DOC" REST="TL" S TYPEMSG(1)=" Type cannot be "_REST_"; File already has",TYPEMSG(2)="an entry of that Type with the same Name" Q
"RTN","TIUFLF7",40,0)
TYPEX Q
"RTN","TIUFLF7",41,0)
 ;
"RTN","TIUFLF7",42,0)
DUPNAME(NAME,FILEDA) ; Function returns 1 if NAME already
"RTN","TIUFLF7",43,0)
 ;exists in file for entry OTHER THAN FILEDA, else 0.  If 1, returns
"RTN","TIUFLF7",44,0)
 ;1^Type^Type^ etc., for example, 1^DOC^CO^ means: file has a duplicate
"RTN","TIUFLF7",45,0)
 ;name of Type DOC other than FILEDA and a duplicate name of Type CO
"RTN","TIUFLF7",46,0)
 ;other than FILEDA.
"RTN","TIUFLF7",47,0)
 N XDUPANS,XDUPDA,TYPE
"RTN","TIUFLF7",48,0)
 S FILEDA=+$G(FILEDA)
"RTN","TIUFLF7",49,0)
 S (XDUPDA,XDUPANS)=0
"RTN","TIUFLF7",50,0)
 F  S XDUPDA=$O(^TIU(8925.1,"B",$E(NAME,1,30),XDUPDA)) Q:'XDUPDA  D
"RTN","TIUFLF7",51,0)
 . I NAME=$P(^TIU(8925.1,XDUPDA,0),U),XDUPDA'=FILEDA S:'XDUPANS XDUPANS="1^" S TYPE=$P(^TIU(8925.1,XDUPDA,0),U,4) I TYPE'="" S:XDUPANS'[(U_TYPE_U) XDUPANS=XDUPANS_TYPE_U
"RTN","TIUFLF7",52,0)
 Q XDUPANS
"RTN","TIUFLF7",53,0)
 ;
"RTN","TIUFLF7",54,0)
DUPITEM(NAME,PFILEDA,FILEDA) ; Function returns 1 if PFILEDA already has item
"RTN","TIUFLF7",55,0)
 ;(other than FILEDA) named NAME.
"RTN","TIUFLF7",56,0)
 ; Requires NAME, PFILEDA
"RTN","TIUFLF7",57,0)
 ; Requires FILEDA if FILEDA should be excluded from items checked for
"RTN","TIUFLF7",58,0)
 ;duplicate names
"RTN","TIUFLF7",59,0)
 N ITEMANS,XDUPDA
"RTN","TIUFLF7",60,0)
 S (XDUPDA,ITEMANS)=0,FILEDA=+$G(FILEDA)
"RTN","TIUFLF7",61,0)
 F  S XDUPDA=$O(^TIU(8925.1,"B",$E(NAME,1,30),XDUPDA)) Q:'XDUPDA  D  Q:ITEMANS
"RTN","TIUFLF7",62,0)
 . I NAME=$P(^TIU(8925.1,XDUPDA,0),U),$D(^TIU(8925.1,"AD",XDUPDA,PFILEDA)),XDUPDA'=FILEDA S ITEMANS=1
"RTN","TIUFLF7",63,0)
 I ITEMANS S TIUFIMSG=" Please enter a different Name; Parent already has Item with that Name"
"RTN","TIUFLF7",64,0)
DUPIX Q ITEMANS
"RTN","TIUFLF7",65,0)
 ;
"RTN","TIUFLF7",66,0)
DUP(NAME,PFILEDA,FILEDA) ; Function returns 1 if PFILEDA already has item
"RTN","TIUFLF7",67,0)
 ;(possibly FILEDA itself if FILEDA is Shared) named NAME.
"RTN","TIUFLF7",68,0)
 ; Requires NAME, PFILEDA, FILEDA; Used in NAMSCRN^TIUFLF2
"RTN","TIUFLF7",69,0)
 ; FILEDA is potential, not actual item of PFILEDA.
"RTN","TIUFLF7",70,0)
 N DUPANS S DUPANS=0
"RTN","TIUFLF7",71,0)
 I $D(^TIU(8925.1,PFILEDA,10,"B",FILEDA)) S DUPANS=1 G DUPX
"RTN","TIUFLF7",72,0)
 S DUPANS=$$DUPITEM(NAME,PFILEDA,FILEDA)
"RTN","TIUFLF7",73,0)
DUPX Q DUPANS
"RTN","TIUFLF7",74,0)
 ;
"RTN","TIUFLF7",75,0)
EDTYPE(FILEDA,NODE0,PFILEDA,XFLG,USED) ; User edit FILEDA Type.
"RTN","TIUFLF7",76,0)
 ; Requires FILEDA, NODE0.
"RTN","TIUFLF7",77,0)
 ; Requires PFILEDA if DA has an actual/prospective parent. Need PFILEDA
"RTN","TIUFLF7",78,0)
 ;for add items/Create DDEF - they're not in AD xref because not items
"RTN","TIUFLF7",79,0)
 ;yet.
"RTN","TIUFLF7",80,0)
 ; Updates NODE0 (not the array, just the node).
"RTN","TIUFLF7",81,0)
 ; Returns XFLG=1 if user ^exited or timed out, else as received.
"RTN","TIUFLF7",82,0)
 ; Requires USED =1 for object or $$DDEFUSED^TIUFLF
"RTN","TIUFLF7",83,0)
 N TYPE,X,Y,NAME,TIUFTMSG,TIUFTLST,DEFLT,DIE,DR
"RTN","TIUFLF7",84,0)
 K DIRUT,DUOUT,DIROUT
"RTN","TIUFLF7",85,0)
 I $P(NODE0,U,4)="O" W !!,"TYPE: Object. Can't edit Type",! G EDTYX
"RTN","TIUFLF7",86,0)
 I USED="YES"!(USED="ERROR") W !!,"TYPE: Entry In Use by Documents; Can't edit Type",! G EDTYX
"RTN","TIUFLF7",87,0)
 S PFILEDA=+$G(PFILEDA),NAME=$P(NODE0,U)
"RTN","TIUFLF7",88,0)
 D TYPELIST(NAME,FILEDA,PFILEDA,.TIUFTMSG,.TIUFTLST) G:$D(DTOUT) EDTYX
"RTN","TIUFLF7",89,0)
 I $D(TIUFTMSG(1)),'$D(TIUFTMSG(2)) W !!,TIUFTMSG(1),!,"Can't edit Type" S XFLG=1 D PAUSE^TIUFXHLX G EDTYX
"RTN","TIUFLF7",90,0)
 I $D(TIUFTMSG(1)),$D(TIUFTMSG(2)) W !!,TIUFTMSG(1),!,TIUFTMSG(2),!
"RTN","TIUFLF7",91,0)
 I TIUFTLST="" W !!,"TYPE: ",$S($D(TIUFTMSG):TIUFTMSG(1),1:" Faulty entry; File has entries of every permitted Type with the same Name"),! D PAUSE^TIUFXHLX S XFLG=1 G EDTYX
"RTN","TIUFLF7",92,0)
 S DEFLT=$P(NODE0,U,4) S:$L(TIUFTLST,U)=3 DEFLT=$P(TIUFTLST,U,2) S:DEFLT="DOC" DEFLT="TL"
"RTN","TIUFLF7",93,0)
READTYP K DUOUT S TYPE=$S(DEFLT'="":$$SELTYPE^TIUFLF8(FILEDA,DEFLT),1:$$SELTYPE^TIUFLF8(FILEDA))
"RTN","TIUFLF7",94,0)
 I $D(DUOUT)!$D(DTOUT) G EDTYX
"RTN","TIUFLF7",95,0)
 I TYPE="" W "  ?? Enter appropriate Type or '^' to exit",! H 2 G READTYP
"RTN","TIUFLF7",96,0)
 S:TYPE="TL" TYPE="DOC" S DIE=8925.1,DR=".04////"_TYPE D ^DIE
"RTN","TIUFLF7",97,0)
 S NODE0=^TIU(8925.1,FILEDA,0)
"RTN","TIUFLF7",98,0)
EDTYX S:$D(DUOUT)!$D(DTOUT) XFLG=1
"RTN","TIUFLF7",99,0)
 Q
"RTN","TIUFLF7",100,0)
 ;
"RTN","TIUFLF8")
0^210^B18128052
"RTN","TIUFLF8",1,0)
TIUFLF8 ; SLC/MAM - Library; File 8925.1 Related: SELTYPE(FILEDA,DEFLT), EDOWN(DA,XFLG) ;10/25/95  20:39
"RTN","TIUFLF8",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLF8",3,0)
 ;
"RTN","TIUFLF8",4,0)
SELTYPE(FILEDA,DEFLT) ; Function Prompts for Type, Returns Selected Type: CL, DC, TL, CO, O, [N for NONE], "" if nothing selected or @ entered.
"RTN","TIUFLF8",5,0)
 ; Optional FILEDA: if not received, include 'NONE' as selectable Type.
"RTN","TIUFLF8",6,0)
 ; Optional DEFLT = 'CLASS', 'TITLE' etc.
"RTN","TIUFLF8",7,0)
 ; FILEDA, DEFLT are needed when editing Type; NOT needed when selecting Type for SORT.  Assume for SORT if FILEDA is not received.
"RTN","TIUFLF8",8,0)
 ; If used for editing Type, requires TIUFTMSG, TIUFTLST as set in TYPELIST
"RTN","TIUFLF8",9,0)
 N DIR,X,Y,TYPE,CHOICE,TMP
"RTN","TIUFLF8",10,0)
 K DIRUT,DUOUT,DIROUT
"RTN","TIUFLF8",11,0)
 S FILEDA=+$G(FILEDA)
"RTN","TIUFLF8",12,0)
 S DIR(0)=$S(TIUFXNOD["Sort"!(TIUFXNOD["Change View"):"FA0^1:14",1:"FA^1:9"),(DIR("?"),DIR("??"))="^D TYPE^TIUFXHLX"
"RTN","TIUFLF8",13,0)
 I $D(DEFLT) S DIR("B")=DEFLT
"RTN","TIUFLF8",14,0)
 S CHOICE=""
"RTN","TIUFLF8",15,0)
 I FILEDA F TYPE="CL","DC","DOC","CO","O" D
"RTN","TIUFLF8",16,0)
 . I TIUFTLST[(U_TYPE_U) S:TYPE="DOC" TYPE="TL" S CHOICE=CHOICE_$S(CHOICE'="":"/"_TYPE,1:TYPE)
"RTN","TIUFLF8",17,0)
 I 'FILEDA S CHOICE="CL/DC/TL/CO/O/N"
"RTN","TIUFLF8",18,0)
 S CHOICE="("_CHOICE_")"
"RTN","TIUFLF8",19,0)
 S DIR("A")=$S('FILEDA:"Select TYPE",1:"TYPE")_": "_CHOICE_": "
"RTN","TIUFLF8",20,0)
 D ^DIR I $D(DTOUT)!$D(DUOUT) S TYPE="" G SELTX
"RTN","TIUFLF8",21,0)
 S TYPE=$$UPPER^TIULS(Y)
"RTN","TIUFLF8",22,0)
 D
"RTN","TIUFLF8",23,0)
 . I $E(TYPE,1,2)="CL","CLASS"[TYPE W:(TYPE'="CLASS") "  CLASS" S TYPE="CL" Q
"RTN","TIUFLF8",24,0)
 . I TYPE="DC" W "  DOCUMENT CLASS" Q
"RTN","TIUFLF8",25,0)
 . I $E(TYPE,1,2)="DO","DOCUMENT CLASS"[TYPE W:(TYPE'="DOCUMENT CLASS") "  DOCUMENT CLASS" S TYPE="DC" Q
"RTN","TIUFLF8",26,0)
 . I TYPE="TL" W "  TITLE" Q
"RTN","TIUFLF8",27,0)
 . I $E(TYPE,1,2)="TI","TITLE"[TYPE W:(TYPE'="TITLE") "  TITLE" S TYPE="TL" Q
"RTN","TIUFLF8",28,0)
 . I $E(TYPE,1,2)="CO","COMPONENT"[TYPE W:(TYPE'="COMPONENT") "  COMPONENT" S TYPE="CO" Q
"RTN","TIUFLF8",29,0)
 . I TYPE="O" W "  OBJECT" Q
"RTN","TIUFLF8",30,0)
 . I $E(TYPE,1,2)="OB","OBJECT"[TYPE W:(TYPE'="OBJECT") "  OBJECT" S TYPE="O" Q
"RTN","TIUFLF8",31,0)
 . I 'FILEDA,$E(TYPE)="N","NONE"[TYPE W:(TYPE'="NONE") "  NONE" S TYPE="NONE" Q
"RTN","TIUFLF8",32,0)
 . S TYPE=""
"RTN","TIUFLF8",33,0)
 I FILEDA D
"RTN","TIUFLF8",34,0)
 . S TMP=TYPE I TMP="TL" S TMP="DOC"
"RTN","TIUFLF8",35,0)
 . I TMP'="",TIUFTLST'[(U_TMP_U) S TYPE="" ; User entered something not permitted.
"RTN","TIUFLF8",36,0)
SELTX Q TYPE
"RTN","TIUFLF8",37,0)
 ;
"RTN","TIUFLF8",38,0)
EDOWN(DA,XFLG) ; User edit Owner.
"RTN","TIUFLF8",39,0)
 ; Returns XFLG=1 if user ^exited, else as received.
"RTN","TIUFLF8",40,0)
 N DR,DIE,X,Y,NODE0,POWNER,COWNER
"RTN","TIUFLF8",41,0)
 D GET(DA,.NODE0,.POWNER,.COWNER)
"RTN","TIUFLF8",42,0)
 D FULL^VALM1 S TIUFFULL=1,DIE=8925.1 K DUOUT
"RTN","TIUFLF8",43,0)
 I POWNER,'COWNER D OWNPERS(DA,.NODE0,.POWNER,.COWNER) G:$D(DTOUT)!$D(DUOUT) EDOWX D:'POWNER OWNCLAS(DA,.NODE0,.POWNER,.COWNER) G EDOWX
"RTN","TIUFLF8",44,0)
 I COWNER,'POWNER D OWNCLAS(DA,.NODE0,.POWNER,.COWNER) G:$D(DTOUT)!$D(DUOUT) EDOWX D:'COWNER OWNPERS(DA,.NODE0,.POWNER,.COWNER) G EDOWX
"RTN","TIUFLF8",45,0)
 I 'POWNER,'COWNER D OWNCLAS(DA,.NODE0,.POWNER,.COWNER) G:$D(DTOUT)!$D(DUOUT) EDOWX D:'COWNER OWNPERS(DA,.NODE0,.POWNER,.COWNER) G EDOWX
"RTN","TIUFLF8",46,0)
 I POWNER,COWNER D OWNCLAS(DA,.NODE0,.POWNER,.COWNER) G:$D(DTOUT)!$D(DUOUT) EDOWX D:COWNER OWNPERS(DA,.NODE0,.POWNER,.COWNER) G EDOWX
"RTN","TIUFLF8",47,0)
EDOWX S:$D(DUOUT)!$D(DTOUT) XFLG=1
"RTN","TIUFLF8",48,0)
 D OWNCHEC(DA)
"RTN","TIUFLF8",49,0)
 Q
"RTN","TIUFLF8",50,0)
 ;
"RTN","TIUFLF8",51,0)
OWNCHEC(DA) ; Check for no owners, both owners, stuff personal owner if problem
"RTN","TIUFLF8",52,0)
 N NODE0,POWNER,COWNER,DR,DIE,X,Y
"RTN","TIUFLF8",53,0)
 D GET(DA,.NODE0,.POWNER,.COWNER) S DIE=8925.1
"RTN","TIUFLF8",54,0)
 I 'POWNER,'COWNER W !!,"Since Entry has no Owner, you have been made the Personal Owner.",!! D:'$D(DTOUT) PAUSE^TIUFXHLX S DR=".05////^S X=DUZ" D ^DIE
"RTN","TIUFLF8",55,0)
 I POWNER,COWNER W !!,"Since Entry has both Personal and Class Owners, Class Owner has been deleted",!,"and you have been made the Personal Owner.",!! D:'$D(DTOUT) PAUSE^TIUFXHLX S DR=".05////^S X=DUZ;.06///@" D ^DIE
"RTN","TIUFLF8",56,0)
 Q
"RTN","TIUFLF8",57,0)
 ;
"RTN","TIUFLF8",58,0)
GET(DA,NODE0,POWNER,COWNER) ; Get Owner data
"RTN","TIUFLF8",59,0)
 S NODE0=^TIU(8925.1,DA,0),POWNER=$P(NODE0,U,5),COWNER=$P(NODE0,U,6)
"RTN","TIUFLF8",60,0)
 Q
"RTN","TIUFLF8",61,0)
 ;
"RTN","TIUFLF8",62,0)
OWNCLAS(FILEDA,NODE0,POWNER,COWNER) ; Edit Owner Class
"RTN","TIUFLF8",63,0)
 N DIR,X,Y,ANS,DIE,DR,DA
"RTN","TIUFLF8",64,0)
 I 'COWNER,$G(^TMP("TIUF",$J,"CLPAC")) S DIR("B")="CLINICAL COORDINATOR"
"RTN","TIUFLF8",65,0)
 S DA=FILEDA
"RTN","TIUFLF8",66,0)
 S DIR(0)="8925.1,.06O",DIE=8925.1 D ^DIR I $D(DTOUT)!$D(DUOUT) Q
"RTN","TIUFLF8",67,0)
 S:X="@" Y=X S:Y Y=+Y S ANS=Y ; Y was returned like 17^CLINICAL COORDINATOR
"RTN","TIUFLF8",68,0)
 S DR=".06////^S X=ANS" D ^DIE
"RTN","TIUFLF8",69,0)
 D GET(FILEDA,.NODE0,.POWNER,.COWNER)
"RTN","TIUFLF8",70,0)
 Q
"RTN","TIUFLF8",71,0)
 ;
"RTN","TIUFLF8",72,0)
OWNPERS(FILEDA,NODE0,POWNER,COWNER) ; Edit Personal Owner
"RTN","TIUFLF8",73,0)
 N DIR,X,Y,ANS,DIE,DR
"RTN","TIUFLF8",74,0)
 S DA=FILEDA,DIR(0)="8925.1,.05O",DIE=8925.1 D ^DIR I $D(DTOUT)!$D(DUOUT) Q
"RTN","TIUFLF8",75,0)
 S:X="@" Y=X S:Y Y=+Y S ANS=Y
"RTN","TIUFLF8",76,0)
 S DR=".05////^S X=ANS" D ^DIE
"RTN","TIUFLF8",77,0)
 D GET(FILEDA,.NODE0,.POWNER,.COWNER)
"RTN","TIUFLF8",78,0)
 Q
"RTN","TIUFLF8",79,0)
 ;
"RTN","TIUFLJ")
0^211^B26580060
"RTN","TIUFLJ",1,0)
TIUFLJ ;SLC/MAM - NOTE, WARNOBJ(NAP,OBJECTDA,NODE0), HASIT(OBJECTDA,ONODE0,FILEDA,NAP,HASIT), DHASIT(OBJECTDA,ONODE0,FILEDA,NAP,DHASIT), EMBED(OBJECTDA,ONODE0,NAP,ALLSUB), OBJUSED(FILEDA) ;;4/23/97
"RTN","TIUFLJ",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLJ",3,0)
 ;
"RTN","TIUFLJ",4,0)
NOTE ; Write note re possible change in list of titles.
"RTN","TIUFLJ",5,0)
 I $G(^TMP("TIUF3",$J,$G(TIUFELIN)+2,0))'["Object is Embedded in Title" Q
"RTN","TIUFLJ",6,0)
 W !!,"NAME:  Since objects are embedded by name, abbreviation or print name, NOT by"
"RTN","TIUFLJ",7,0)
 W !,"file number, your edit of name, abbreviation or print name may affect which"
"RTN","TIUFLJ",8,0)
 W !,"titles have the object embedded in them.  You may want to note the list of",!,"these titles from the Detailed Display screen NOW before it changes."
"RTN","TIUFLJ",9,0)
 D PAUSE^TIUFXHLX
"RTN","TIUFLJ",10,0)
 Q
"RTN","TIUFLJ",11,0)
 ;
"RTN","TIUFLJ",12,0)
WARNOBJ(NAP,OBJECTDA,NODE0) ; Function writes warning re edit object Name, Abbrev or Print Name. Returns CONTINUE =  1 or 0.
"RTN","TIUFLJ",13,0)
 ; Needs OBJECTDA.  Needs NAP = N or A or P. Needs ^TMP("TIUFEMBED,$J,OBJECTDA,"TIUFTL",NAP).  Needs NODE0.
"RTN","TIUFLJ",14,0)
 N ATTR,CONTINUE,TITLEDA,LINENO
"RTN","TIUFLJ",15,0)
 S ATTR=$S(NAP="N":"Name",NAP="A":"Abbreviation",1:"Print Name")
"RTN","TIUFLJ",16,0)
 S CONTINUE=1
"RTN","TIUFLJ",17,0)
 K ^TMP("TIUFEMBED",$J,OBJECTDA) D EMBED(OBJECTDA,NODE0,NAP,0)
"RTN","TIUFLJ",18,0)
 S TITLEDA=0 F  S TITLEDA=$O(^TMP("TIUFEMBED",$J,OBJECTDA,"TIUFTL",NAP,TITLEDA)) Q:'TITLEDA  Q:^TMP("TIUFEMBED",$J,OBJECTDA,"TIUFTL",NAP,TITLEDA)'="ACTIVE"  D
"RTN","TIUFLJ",19,0)
 . S LINENO=$O(^TMP("TIUF3IDX",$J,"DAF",TITLEDA,0))
"RTN","TIUFLJ",20,0)
 . I CONTINUE S CONTINUE=0 D
"RTN","TIUFLJ",21,0)
 . . D FULL^VALM1 S TIUFFULL=1 W !!
"RTN","TIUFLJ",22,0)
 . . W $$UPPER^TIULS(NAME),":  Object ",ATTR," is embedded in the boilerplate text of the"
"RTN","TIUFLJ",23,0)
 . . W !,"following active title(s).  If you wish to edit object ",ATTR," you must"
"RTN","TIUFLJ",24,0)
 . . W !,"first exit Basics and inactivate these titles.  Then, after editing the object,"
"RTN","TIUFLJ",25,0)
 . . W !,"you will need to update the boilerplate text of these titles and then reactivate"
"RTN","TIUFLJ",26,0)
 . . W !,"them.  If you wish to edit ",ATTR," please note this list NOW and save it"
"RTN","TIUFLJ",27,0)
 . . W !,"until all titles are reactivated.",!
"RTN","TIUFLJ",28,0)
 . W ^TMP("TIUF3",$J,LINENO,0),!
"RTN","TIUFLJ",29,0)
 I CONTINUE D:NAP="N" NOTE G WARNX
"RTN","TIUFLJ",30,0)
 I 'CONTINUE D PAUSE^TIUFXHLX W !!
"RTN","TIUFLJ",31,0)
WARNX Q CONTINUE
"RTN","TIUFLJ",32,0)
 ;
"RTN","TIUFLJ",33,0)
HASIT(OBJECTDA,ONODE0,FILEDA,NAP,HASIT) ; Passes back HASIT=1 if title/
"RTN","TIUFLJ",34,0)
 ;component FILEDA has object (its name or abbreviation or print name
"RTN","TIUFLJ",35,0)
 ;or any of these, depending on NAP) in it.  To "Have it", Abbrev and
"RTN","TIUFLJ",36,0)
 ;Print Name must be exact, but Name can differ in case as long as
"RTN","TIUFLJ",37,0)
 ;uppercase(embedded name) = object name.
"RTN","TIUFLJ",38,0)
 ; Requires all vars to be received and already defined.
"RTN","TIUFLJ",39,0)
 N NAME,ABBREV,PNAME,TIUFK,TIUFJ,EMBEDNM,LINE
"RTN","TIUFLJ",40,0)
 S NAME=$P(ONODE0,U),ABBREV=$P(ONODE0,U,2),PNAME=$P(ONODE0,U,3)
"RTN","TIUFLJ",41,0)
 S TIUFJ=0 F  S TIUFJ=$O(^TIU(8925.1,FILEDA,"DFLT",TIUFJ)) Q:'TIUFJ  D
"RTN","TIUFLJ",42,0)
 . S LINE=$G(^TIU(8925.1,FILEDA,"DFLT",TIUFJ,0))
"RTN","TIUFLJ",43,0)
 . I LINE["|" F TIUFK=2:2:$L(LINE,"|") S EMBEDNM=$P(LINE,"|",TIUFK) D
"RTN","TIUFLJ",44,0)
 . . I EMBEDNM="" Q
"RTN","TIUFLJ",45,0)
 . . I NAP="N"!(NAP="ANY"),$$UPPER^TIULS(EMBEDNM)=NAME S HASIT=1
"RTN","TIUFLJ",46,0)
 . . I NAP="A"!(NAP="ANY"),EMBEDNM=ABBREV S HASIT=1
"RTN","TIUFLJ",47,0)
 . . I NAP="P"!(NAP="ANY"),EMBEDNM=PNAME S HASIT=1
"RTN","TIUFLJ",48,0)
 Q
"RTN","TIUFLJ",49,0)
 ;
"RTN","TIUFLJ",50,0)
DHASIT(OBJECTDA,ONODE0,FILEDA,NAP,DHASIT) ; Does HASIT for FILEDA descendants
"RTN","TIUFLJ",51,0)
 N TIUFITEM,TIUFI,MISSITEM,ITENDA,IFILEDA
"RTN","TIUFLJ",52,0)
 S MISSITEM=$$MISSITEM^TIUFLF4(FILEDA)
"RTN","TIUFLJ",53,0)
 I MISSITEM W !!," Corrupt Database: File Entry "_FILEDA_" Has Nonexistent Item "_MISSITEM_" ; See IRM",!,"Can't tell whether or not "_FILEDA_" has object.",! D PAUSE^TIUFXHLX G DHASX
"RTN","TIUFLJ",54,0)
 D ITEMS^TIUFLT(FILEDA)
"RTN","TIUFLJ",55,0)
 S TIUFI=0
"RTN","TIUFLJ",56,0)
 F  S TIUFI=$O(TIUFITEM(TIUFI)) Q:'TIUFI  D
"RTN","TIUFLJ",57,0)
 . S ITENDA=$P(TIUFITEM(TIUFI),U,2)
"RTN","TIUFLJ",58,0)
 . S IFILEDA=+$G(^TIU(8925.1,FILEDA,10,+ITENDA,0))
"RTN","TIUFLJ",59,0)
 . D HASIT(OBJECTDA,ONODE0,IFILEDA,NAP,.DHASIT)
"RTN","TIUFLJ",60,0)
 . D DHASIT(OBJECTDA,ONODE0,IFILEDA,NAP,.DHASIT)
"RTN","TIUFLJ",61,0)
DHASX Q
"RTN","TIUFLJ",62,0)
 ;
"RTN","TIUFLJ",63,0)
OBJUSED(FILEDA) ; Function returns 1 if FILEDA is embedded in boilerplate text of a Title or component; 1A if any of these titles is active; else 0.
"RTN","TIUFLJ",64,0)
 N USEDANS,TITLEDA,NODE0
"RTN","TIUFLJ",65,0)
 S NODE0=^TIU(8925.1,FILEDA,0)
"RTN","TIUFLJ",66,0)
 K ^TMP("TIUFEMBED",$J,FILEDA) D EMBED(FILEDA,NODE0,"ANY",1)
"RTN","TIUFLJ",67,0)
 I '$O(^TMP("TIUFEMBED",$J,FILEDA,"TIUFTL","ANY",0)),'$O(^TMP("TIUFEMBED",$J,FILEDA,"TIUFORPHAN","ANY",0)),'$O(^TMP("TIUFEMBED",$J,FILEDA,"TIUFCO","ANY",0)) S USEDANS=0 G OBJUX
"RTN","TIUFLJ",68,0)
 S USEDANS=1,TITLEDA=0 F  S TITLEDA=$O(^TMP("TIUFEMBED",$J,FILEDA,"TIUFTL","ANY",TITLEDA)) Q:'TITLEDA  I ^TMP("TIUFEMBED",$J,FILEDA,"TIUFTL","ANY",TITLEDA)="ACTIVE" S USEDANS="1A" G OBJUX
"RTN","TIUFLJ",69,0)
OBJUX Q USEDANS
"RTN","TIUFLJ",70,0)
 ;
"RTN","TIUFLJ",71,0)
EMBED(OBJECTDA,ONODE0,NAP,ALLSUBS) ; Sets ^TMP("TIUFEMBED",$J,OBJECTDA,SUBSCPT,NAP,FILEDA); See top of routine.
"RTN","TIUFLJ",72,0)
 ; Sets ^TMP("TIUFEMBED",$J,OBJECTDA,"TIUFTL",NAP,FILEDA) = status of FILEDA for Titles only: ACTIVE or  TEST or INACTIVE or "".
"RTN","TIUFLJ",73,0)
 ; If ALLSUBS=1, sets array for subscripts TIUFTL, TIUFCO and TIUFORPHAN.  Otherwise, just sets TIUFTL.
"RTN","TIUFLJ",74,0)
 N PARENT,FILEDA,TNODE0,STATUS,CONODE0
"RTN","TIUFLJ",75,0)
 K ^TMP("TIUFEMBED",$J,OBJECTDA)
"RTN","TIUFLJ",76,0)
 I '$G(ALLSUBS) S ALLSUBS=0
"RTN","TIUFLJ",77,0)
 S FILEDA=0 F  S FILEDA=$O(^TIU(8925.1,"AT","DOC",FILEDA)) Q:'FILEDA  D
"RTN","TIUFLJ",78,0)
 . S TNODE0=$G(^TIU(8925.1,FILEDA,0)) I TNODE0="" W !!,"Title ",FILEDA," from the AT cross reference does not exist; see IRM",! Q
"RTN","TIUFLJ",79,0)
 . S (HASIT,DHASIT)=0
"RTN","TIUFLJ",80,0)
 . D HASIT(OBJECTDA,ONODE0,FILEDA,NAP,.HASIT)
"RTN","TIUFLJ",81,0)
 . D DHASIT(OBJECTDA,ONODE0,FILEDA,NAP,.DHASIT)
"RTN","TIUFLJ",82,0)
 . I 'HASIT,'DHASIT Q
"RTN","TIUFLJ",83,0)
 . I 'DHASIT S ^TMP("TIUFEMBED",$J,OBJECTDA,"TIUFCO",NAP,FILEDA)=""
"RTN","TIUFLJ",84,0)
 . S TNODE0=^TIU(8925.1,FILEDA,0),STATUS=$$STATWORD^TIUFLF5($P(TNODE0,U,7))
"RTN","TIUFLJ",85,0)
 . S ^TMP("TIUFEMBED",$J,OBJECTDA,"TIUFTL",NAP,FILEDA)=STATUS
"RTN","TIUFLJ",86,0)
 I 'ALLSUBS Q
"RTN","TIUFLJ",87,0)
 S FILEDA=0 F  S FILEDA=$O(^TIU(8925.1,"AT","CO",FILEDA)) Q:'FILEDA  D
"RTN","TIUFLJ",88,0)
 . S CONODE0=$G(^TIU(8925.1,FILEDA,0)) I CONODE0="" W !!,"Component ",FILEDA," from the AT cross reference does not exist; see IRM",! Q
"RTN","TIUFLJ",89,0)
 . I $D(^TIU(8925.1,"AD",FILEDA)) Q
"RTN","TIUFLJ",90,0)
 . S (HASIT,DHASIT)=0
"RTN","TIUFLJ",91,0)
 . D HASIT(OBJECTDA,ONODE0,FILEDA,NAP,.HASIT)
"RTN","TIUFLJ",92,0)
 . D DHASIT(OBJECTDA,ONODE0,FILEDA,NAP,.DHASIT)
"RTN","TIUFLJ",93,0)
 . I 'HASIT,'DHASIT Q
"RTN","TIUFLJ",94,0)
 . S ^TMP("TIUFEMBED",$J,OBJECTDA,"TIUFORPHAN",NAP,FILEDA)=""
"RTN","TIUFLJ",95,0)
 Q
"RTN","TIUFLJ",96,0)
 ;
"RTN","TIUFLJ1")
0^225^B7820219
"RTN","TIUFLJ1",1,0)
TIUFLJ1 ;SLC/MAM - DOCUMENTATION, LOCKEMB(FILEDA,NAP,LUNLOCK), STATEMB(FILEDA,STATFLG,NAP), EDBTEXT(FILEDA,NAPNAME) ;;6/5/97
"RTN","TIUFLJ1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLJ1",3,0)
 ;
"RTN","TIUFLJ1",4,0)
 ;     ** Documentation on Array ^TMP("TIUFEMBED") **
"RTN","TIUFLJ1",5,0)
 ;
"RTN","TIUFLJ1",6,0)
 ; Array looks like 
"RTN","TIUFLJ1",7,0)
 ;       ^TMP("TIUFEMBED",$J,OBJECTDA,"TIUFTL",NAP,FILEDA) if FILEDA
"RTN","TIUFLJ1",8,0)
 ;           is a title, or
"RTN","TIUFLJ1",9,0)
 ;       ^TMP("TIUFEMBED",$J,OBJECTDA,"TIUFCO",NAP,FILEDA) if FILEDA
"RTN","TIUFLJ1",10,0)
 ;           is a component DESCENDING FROM A TITLE, or
"RTN","TIUFLJ1",11,0)
 ;       ^TMP("TIUFEMBED",$J,OBJECTDA,"TIUFORPHAN",NAP,FILEDA) if
"RTN","TIUFLJ1",12,0)
 ;           FILEDA is a COMPONENT NOT DESCENDING FROM A TITLE.
"RTN","TIUFLJ1",13,0)
 ;
"RTN","TIUFLJ1",14,0)
 ; ^TMP("TIUFEMBED",$J,OBJECTDA,"TIUFTL",NAP,FILEDA) = original status
"RTN","TIUFLJ1",15,0)
 ;(status when array was set) of FILEDA: ACTIVE, TEST, INACTIVE, or "".
"RTN","TIUFLJ1",16,0)
 ;
"RTN","TIUFLJ1",17,0)
 ; NAP is N, A, P, or ANY.
"RTN","TIUFLJ1",18,0)
 ;NAP="N":   Array is set if FILEDA'S boilerplate text has NAME of object
"RTN","TIUFLJ1",19,0)
 ;           OBJECTDA embedded in it.
"RTN","TIUFLJ1",20,0)
 ;NAP="A":   Array is set if FILEDA'S boilerplate text has ABBREVIATION
"RTN","TIUFLJ1",21,0)
 ;           of object OBJECTDA embedded in it.
"RTN","TIUFLJ1",22,0)
 ;NAP="P":   Array is set if FILEDA'S boilerplate text has PRINT NAME
"RTN","TIUFLJ1",23,0)
 ;           of object OBJECTDA embedded in it.
"RTN","TIUFLJ1",24,0)
 ;NAP="ANY": Array is set if FILEDA'S boilerplate text has ANY of the
"RTN","TIUFLJ1",25,0)
 ;           above attributes of object OBJECTDA embedded in it.
"RTN","TIUFLJ1",26,0)
 ;Name, Abbreviation, and Print Name are the values that existed when
"RTN","TIUFLJ1",27,0)
 ;array was SET.
"RTN","TIUFLJ1",28,0)
 ;
"RTN","TIUFLJ1",29,0)
 ;                             **********
"RTN","TIUFLJ1",30,0)
 ;
"RTN","TIUFLJ1",31,0)
LOCKEMB(FILEDA,NAP,LUNLOCK) ; Function returns 1 if has successfully locked or unlocked all Titles in ^TMP("TIUFEMBED",$J,FILEDA,"TIUFTL",NAP)
"RTN","TIUFLJ1",32,0)
 ; NAP See top of rtn TIUFLJ
"RTN","TIUFLJ1",33,0)
 ; LUNLOCK = + or -
"RTN","TIUFLJ1",34,0)
 N TITLEDA,NAME,ABBREV,PNAME,ONODE0,LOCKANS,CONT
"RTN","TIUFLJ1",35,0)
 S LOCKANS=1
"RTN","TIUFLJ1",36,0)
 S TITLEDA=0 F  S TITLEDA=$O(^TMP("TIUFEMBED",$J,FILEDA,"TIUFTL",NAP,TITLEDA)) Q:'TITLEDA  D  G:'LOCKANS LOCKX
"RTN","TIUFLJ1",37,0)
 . I LUNLOCK="-" L -^TIU(8925.1,TITLEDA,0) Q
"RTN","TIUFLJ1",38,0)
 . L +^TIU(8925.1,TITLEDA,0):1 I '$T W !!," Another user is editing one of the Titles you need to edit.  Please try later.",! S LOCKANS=0
"RTN","TIUFLJ1",39,0)
LOCKX Q LOCKANS
"RTN","TIUFLJ1",40,0)
 ;
"RTN","TIUFLJ1",41,0)
STATEMB(FILEDA,STATFLG,NAP) ; Inactivate/reactivate titles in ^TMP("TIUFEMBED",$J,FILEDA,"TIUFTL",NAP).
"RTN","TIUFLJ1",42,0)
 ; Edit Status to original status if STATFLG="O", to inactive if STATFLG="I".
"RTN","TIUFLJ1",43,0)
 ; If restoring to Active, checks for problems, does not reactivate if problems are found.
"RTN","TIUFLJ1",44,0)
 N TITLEDA,TNODE0,TSTATUS,NAME,ABBREV,PNAME,ONODE0,LIST,MSG,PFILEDA
"RTN","TIUFLJ1",45,0)
 S TITLEDA=0 F  S TITLEDA=$O(^TMP("TIUFEMBED",$J,FILEDA,"TIUFTL",NAP,TITLEDA)) Q:'TITLEDA  D
"RTN","TIUFLJ1",46,0)
 . S TNODE0=^TIU(8925.1,TITLEDA,0),TSTATUS=^TMP("TIUFEMBED",$J,FILEDA,"TIUFTL",NAP,TITLEDA) ;may be ""
"RTN","TIUFLJ1",47,0)
 . I STATFLG="O",TSTATUS="ACTIVE" D
"RTN","TIUFLJ1",48,0)
 . . S PFILEDA=+$O(^TIU(8925.1,"AD",FILEDA,0))
"RTN","TIUFLJ1",49,0)
 . . D STATLIST^TIUFLF5(FILEDA,PFILEDA,"A",.MSG,.LIST) Q:$D(DTOUT)
"RTN","TIUFLJ1",50,0)
 . . I LIST'["A" W !,MSG,! D PAUSE^TIUFXHLX Q
"RTN","TIUFLJ1",51,0)
 . . D AUTOSTAT^TIUFLF6(TITLEDA,TNODE0,TSTATUS) W " ."
"RTN","TIUFLJ1",52,0)
 . I STATFLG="O",TSTATUS="TEST" D AUTOSTAT^TIUFLF6(TITLEDA,TNODE0,TSTATUS) W " ."
"RTN","TIUFLJ1",53,0)
 . I STATFLG="I",TSTATUS'="INACTIVE" D AUTOSTAT^TIUFLF6(TITLEDA,TNODE0,"INACTIVE") W " ."
"RTN","TIUFLJ1",54,0)
 Q
"RTN","TIUFLJ1",55,0)
 ;
"RTN","TIUFLJ1",56,0)
EDBTEXT(FILEDA,NAP) ; Edit boilerplate text of the Titles in ^TMP("TIUFEMBED",$J,FILEDA,"TIUFTL",NAP).
"RTN","TIUFLJ1",57,0)
 N TITLEDA,TNODE0,TSTATUS,NAME,ABBREV,PNAME,ONODE0
"RTN","TIUFLJ1",58,0)
 S TITLEDA=0 F  S TITLEDA=$O(^TMP("TIUFEMBED",$J,FILEDA,"TIUFTL",NAP,TITLEDA)) Q:'TITLEDA  D  Q:$D(DTOUT)
"RTN","TIUFLJ1",59,0)
 . D EDBOIL^TIUFLD1(TITLEDA,^TIU(8925.1,TITLEDA,0)) Q:$D(DTOUT)
"RTN","TIUFLJ1",60,0)
 . D DEDBOIL^TIUFLD1(TITLEDA)
"RTN","TIUFLJ1",61,0)
 Q
"RTN","TIUFLJ1",62,0)
 ;
"RTN","TIUFLLM")
0^58^B5264751
"RTN","TIUFLLM",1,0)
TIUFLLM ; SLC/MAM - Library; List Manager Related: RTSCROLL(TIUREC,TYPE), PARSE(INFO), NINFO(LINENO,FILEDA,INFO,PINFO,TENDA), PLUSUP(INFO,TIUREC) ;4/6/95  10:48
"RTN","TIUFLLM",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLLM",3,0)
 ;
"RTN","TIUFLLM",4,0)
RTSCROLL(TIUREC,TYPE) ; Called by BUFENTRY^TIUFLLM2. For lines being set for
"RTN","TIUFLLM",5,0)
 ;Templates HACJ only. Copy chars 15-20, 44-49 of entry into chars
"RTN","TIUFLLM",6,0)
 ;215-220, 244-249. Depending on rt/left scroll position, replace those
"RTN","TIUFLLM",7,0)
 ;chars w Type.
"RTN","TIUFLLM",8,0)
 ; Requires TIUREC, TYPE from BUFENTRY.
"RTN","TIUFLLM",9,0)
 ; TIUFLFT, TIUFIXED are for updating lines in H/A/C/J from Template D or T.
"RTN","TIUFLLM",10,0)
 S TIUREC=$$SETSTR^VALM1($E(TIUREC,15,20),TIUREC,215,6)
"RTN","TIUFLLM",11,0)
 S TIUREC=$$SETSTR^VALM1($E(TIUREC,43,48),TIUREC,243,6)
"RTN","TIUFLLM",12,0)
 I $G(TIUFLFT)>49 D
"RTN","TIUFLLM",13,0)
 . I TIUFTMPL="J" D  Q
"RTN","TIUFLLM",14,0)
 . . I $G(VALM("FIXED"))=20!($G(TIUFIXED)=20) S TIUREC=$$SETSTR^VALM1(" ",TIUREC,20,1) Q
"RTN","TIUFLLM",15,0)
 . D
"RTN","TIUFLLM",16,0)
 . . S TYPE=" "_TYPE_" "
"RTN","TIUFLLM",17,0)
 . . I $G(VALM("FIXED"))=20!($G(TIUFIXED)=20) S TIUREC=$$SETSTR^VALM1(TYPE,TIUREC,15,6) Q
"RTN","TIUFLLM",18,0)
 . . S TIUREC=$$SETSTR^VALM1(TYPE,TIUREC,43,6)
"RTN","TIUFLLM",19,0)
 Q
"RTN","TIUFLLM",20,0)
 ;
"RTN","TIUFLLM",21,0)
PARSE(INFO) ; Splits INFO into pieces such as LINENO, XPDLCNT, etc.
"RTN","TIUFLLM",22,0)
 ;Sets INFO pieces into subscripts.
"RTN","TIUFLLM",23,0)
 ;Requires INFO, where INFO is either as set in NINFO^TIUFLLM or
"RTN","TIUFLLM",24,0)
 ;in UPDATE^TIUFLLM1 or = ^TMP("TIUFIDX,$J,LINENO).
"RTN","TIUFLLM",25,0)
 ; WARNING: +INFO may be set by NINFO or UPDATE to 0!
"RTN","TIUFLLM",26,0)
 ;          Other pieces of INFO may be 0 or ""!
"RTN","TIUFLLM",27,0)
 N LINENO,FILEDA,XPDLCNT,LEVEL,PLINENO,TENDA,PLINENO
"RTN","TIUFLLM",28,0)
 S LINENO=+INFO,FILEDA=$P(INFO,U,2),XPDLCNT=$P(INFO,U,3),LEVEL=$P(INFO,U,4),PLINENO=$P(INFO,U,5),TENDA=$P(INFO,U,6)
"RTN","TIUFLLM",29,0)
 S INFO("LINENO")=LINENO,INFO("FILEDA")=FILEDA
"RTN","TIUFLLM",30,0)
 S INFO("XPDLCNT")=XPDLCNT,INFO("LEVEL")=LEVEL,INFO("PLINENO")=PLINENO,INFO("TENDA")=TENDA
"RTN","TIUFLLM",31,0)
PARSX Q
"RTN","TIUFLLM",32,0)
 ;
"RTN","TIUFLLM",33,0)
NINFO(LINENO,FILEDA,INFO,PINFO,TENDA) ; Returns INFO for New (anticipated)
"RTN","TIUFLLM",34,0)
 ;LM Entry, where INFO = LINENO^FILEDA^XPDLCNT^LEVEL^PLINENO^TENDA or
"RTN","TIUFLLM",35,0)
 ;INFO = Error msg
"RTN","TIUFLLM",36,0)
 ; Requires LINENO = anticipated List Manager Entry #
"RTN","TIUFLLM",37,0)
 ; Requires FILEDA = 8925.1 IFN of new entry
"RTN","TIUFLLM",38,0)
 ; PINFO, TENDA are required IF new Entry has existing parent LM Entry
"RTN","TIUFLLM",39,0)
 ;on current or parent LM Template H.
"RTN","TIUFLLM",40,0)
 ; PINFO has form of INFO, above, but for LM parent of new entry.
"RTN","TIUFLLM",41,0)
 ; TENDA = LINENO's DA in parent item multiple (10 Node).
"RTN","TIUFLLM",42,0)
 ; XPDLCNT = # of lines entry has been expanded, = 0 for new entry.
"RTN","TIUFLLM",43,0)
 ; LEVEL = LINENO hierarchy level.  Clinical Documents has LEVEL 0.  Used
"RTN","TIUFLLM",44,0)
 ;for right shift for Template H.
"RTN","TIUFLLM",45,0)
 ; Module sets LEVEL,PLINENO,TENDA = 0 IF new entry has no existing parent.
"RTN","TIUFLLM",46,0)
 N XPDLCNT,LEVEL,PLINENO
"RTN","TIUFLLM",47,0)
 S XPDLCNT=0
"RTN","TIUFLLM",48,0)
 S LEVEL=$S($G(PINFO):$P(PINFO,U,4)+1,1:0),PLINENO=+$G(PINFO),TENDA=+$G(TENDA)
"RTN","TIUFLLM",49,0)
 S INFO=LINENO_U_FILEDA_U_XPDLCNT_U_LEVEL_U_PLINENO_U_TENDA
"RTN","TIUFLLM",50,0)
NINFX Q
"RTN","TIUFLLM",51,0)
 ;
"RTN","TIUFLLM",52,0)
PLUSUP(INFO,TIUREC) ; Update the plus item indicator in front of LM Entry Name for Template H.
"RTN","TIUFLLM",53,0)
 ; Assumes Name proper starts at col 8, for level 0. + goes in front of Name.
"RTN","TIUFLLM",54,0)
 ; Returns TIUREC with + added or deleted.
"RTN","TIUFLLM",55,0)
 ; Requires INFO array, where INFO is either as set in NINFO^TIUFLLM or
"RTN","TIUFLLM",56,0)
 ;is = ^TMP("TIUFIDX,$J,LINENO), and where INFO array is as set in
"RTN","TIUFLLM",57,0)
 ;PARSE^TIUFLLM(INFO).
"RTN","TIUFLLM",58,0)
 ; Requires TIUREC = LM Entry as in TIUF1 array.
"RTN","TIUFLLM",59,0)
 ; INFO("XPDLCNT") must anticipate next redisplay of screen - whether
"RTN","TIUFLLM",60,0)
 ;Entry will/not be expanded.
"RTN","TIUFLLM",61,0)
 N HASITEMS,LEVEL,NMCOLUMN,COLUMN,PLUS
"RTN","TIUFLLM",62,0)
 S LEVEL=INFO("LEVEL"),HASITEMS=$$HASITEMS^TIUFLF1(INFO("FILEDA"))
"RTN","TIUFLLM",63,0)
 S PLUS=" "
"RTN","TIUFLLM",64,0)
 I HASITEMS,'INFO("XPDLCNT") S PLUS="+"
"RTN","TIUFLLM",65,0)
 S NMCOLUMN=8,COLUMN=NMCOLUMN+(2*LEVEL)-1
"RTN","TIUFLLM",66,0)
 S TIUREC=$$SETSTR^VALM1(PLUS,TIUREC,COLUMN,1)
"RTN","TIUFLLM",67,0)
 Q TIUREC
"RTN","TIUFLLM",68,0)
 ;
"RTN","TIUFLLM1")
0^59^B19964581
"RTN","TIUFLLM1",1,0)
TIUFLLM1 ; SLC/MAM - Library; LM Related: LINEUP(INFO,TEMPLATE), UPDATE(TMPLATE,SHIFT,LASTLIN,PINFO) ;10/25/95  18:47
"RTN","TIUFLLM1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLLM1",3,0)
 ;
"RTN","TIUFLLM1",4,0)
LINEUP(INFO,TEMPLATE) ; Update Line +INFO.  Line must be updated, NOT added or deleted.
"RTN","TIUFLLM1",5,0)
 ; Requires INFO,TEMPLATE
"RTN","TIUFLLM1",6,0)
 N NODE0
"RTN","TIUFLLM1",7,0)
 D:$D(INFO)<10 PARSE^TIUFLLM(.INFO) D:$D(NODE0)<10 NODE0ARR^TIUFLF($P(INFO,U,2),.NODE0) G:$D(DTOUT) LINEX
"RTN","TIUFLLM1",8,0)
 D BUFENTRY^TIUFLLM2(.INFO,.NODE0,TEMPLATE)
"RTN","TIUFLLM1",9,0)
 D UPDATE(TEMPLATE,0,INFO-1)
"RTN","TIUFLLM1",10,0)
LINEX Q
"RTN","TIUFLLM1",11,0)
 ;
"RTN","TIUFLLM1",12,0)
UPDATE(TMPLATE,SHIFT,LASTLIN,PINFO) ; Update LM TMPLATE using Buffer Array.
"RTN","TIUFLLM1",13,0)
 ; TMPLATE lines may be inserted, deleted, or reset.  Resets 1 line;
"RTN","TIUFLLM1",14,0)
 ;inserts or deletes a continuous chunk of lines.
"RTN","TIUFLLM1",15,0)
 ; Lines to be inserted must be in buffer array ^TMP("TIUFB", starting
"RTN","TIUFLLM1",16,0)
 ;with line # LASTLIN+1 and running for SHIFT continuous lines.
"RTN","TIUFLLM1",17,0)
 ; Line to be reset must be in Buffer Array at line # LASTLIN+1,
"RTN","TIUFLLM1",18,0)
 ;with SHIFT = 0.
"RTN","TIUFLLM1",19,0)
 ; Lines to be deleted must be continuous lines starting with line #
"RTN","TIUFLLM1",20,0)
 ;LASTLIN+1 and running for -SHIFT lines, where SHIFT is negative.
"RTN","TIUFLLM1",21,0)
 ; Requires TMPLATE = LM Sub/Template H, A, I, T, D, O, or P; If TMPLATE 
"RTN","TIUFLLM1",22,0)
 ;                  = H (Hierarchy), then lines to be added/deleted
"RTN","TIUFLLM1",23,0)
 ;                    must all be items under the same parent.
"RTN","TIUFLLM1",24,0)
 ;          SHIFT is >0 for add; >0 for delete; =0 for reset.
"RTN","TIUFLLM1",25,0)
 ;          |SHIFT| is Length of addition/deletion;  a reset does not
"RTN","TIUFLLM1",26,0)
 ;            add or delete, so SHIFT is 0 for reset.
"RTN","TIUFLLM1",27,0)
 ;          LASTLIN = Line BEFORE Insertion/del/update point as above.
"RTN","TIUFLLM1",28,0)
 ;
"RTN","TIUFLLM1",29,0)
 ; Requires PINFO and PINFO array IF TMPLATE = "H" AND adding/deleting
"RTN","TIUFLLM1",30,0)
 ;          but NOT resetting lines AND LASTLIN'=0 (Clinical Documents
"RTN","TIUFLLM1",31,0)
 ;            HAS NO parent).
"RTN","TIUFLLM1",32,0)
 ;          PINFO = ^TMP("TIUF1IDX,$J,LINENO), where LINENO is LM
"RTN","TIUFLLM1",33,0)
 ;            Lineno of LM PARENT of lines added/deleted.
"RTN","TIUFLLM1",34,0)
 ;          PINFO Array is as set in PARSE^TIUFLLM for PINFO.
"RTN","TIUFLLM1",35,0)
 ;          PINFO is used to update ^TMP("TIUF*IDX" for ancestors of
"RTN","TIUFLLM1",36,0)
 ;            lines added/updated.
"RTN","TIUFLLM1",37,0)
 ;          PINFO is also used to update the + preceeding Name of parent
"RTN","TIUFLLM1",38,0)
 ;            of lines added/deleted.
"RTN","TIUFLLM1",39,0)
 ;          If PINFO is received, routine returns updated PINFO array.
"RTN","TIUFLLM1",40,0)
 ;            (Updates PINFO("XPDLCNT").
"RTN","TIUFLLM1",41,0)
 ;do I need "daf" for all templates?;MAM
"RTN","TIUFLLM1",42,0)
 N LINENO,TIUI,TIUJ,OLDINFO,BEG,INC,END,BINFO,ARR,ARRIDX,ARRNO,VCNT,TIUREC
"RTN","TIUFLLM1",43,0)
 N INUSE,INUSE1,INUSECOL,PLINENO
"RTN","TIUFLLM1",44,0)
 S ARRNO=^TMP("TIUF",$J,"ARRNO"_TMPLATE)
"RTN","TIUFLLM1",45,0)
 S ARR="TIUF"_ARRNO,ARRIDX="TIUF"_ARRNO_"IDX"
"RTN","TIUFLLM1",46,0)
 I SHIFT'>0 D
"RTN","TIUFLLM1",47,0)
 . ;Delete lines to be deleted/updated
"RTN","TIUFLLM1",48,0)
 . S BEG=LASTLIN+1,END=$S(SHIFT=0:BEG,1:BEG-1-SHIFT)
"RTN","TIUFLLM1",49,0)
 . F TIUI=BEG:1:END D
"RTN","TIUFLLM1",50,0)
 . . S OLDINFO=^TMP(ARRIDX,$J,TIUI)
"RTN","TIUFLLM1",51,0)
 . . K ^TMP(ARR,$J,TIUI,0),^TMP(ARR,$J,"IDX",TIUI)
"RTN","TIUFLLM1",52,0)
 . . K ^TMP(ARRIDX,$J,"DAF",$P(OLDINFO,U,2),TIUI)
"RTN","TIUFLLM1",53,0)
 . . I TMPLATE="T" K ^TMP(ARRIDX,$J,"DA10",$P(OLDINFO,U,6),TIUI)
"RTN","TIUFLLM1",54,0)
 . . K ^TMP(ARRIDX,$J,TIUI)
"RTN","TIUFLLM1",55,0)
 . . Q
"RTN","TIUFLLM1",56,0)
 . Q
"RTN","TIUFLLM1",57,0)
 I SHIFT'=0 D
"RTN","TIUFLLM1",58,0)
 . ; Move lines starting w LASTLIN+1 down, creating gap to add entries 
"RTN","TIUFLLM1",59,0)
 . ; OR Move lines after deleted lines up to fill in gap.
"RTN","TIUFLLM1",60,0)
 . S VCNT=$O(^TMP(ARR,$J,1000000),-1)
"RTN","TIUFLLM1",61,0)
 . I SHIFT>0 S BEG=VCNT,INC=-1,END=LASTLIN+1
"RTN","TIUFLLM1",62,0)
 . E  S BEG=LASTLIN+1-SHIFT,INC=1,END=VCNT
"RTN","TIUFLLM1",63,0)
 . F LINENO=BEG:INC:END Q:INC>0&(BEG>END)  Q:INC<0&(BEG<END)  D 
"RTN","TIUFLLM1",64,0)
 . . S ^TMP(ARR,$J,LINENO+SHIFT,0)=$$SETSTR^VALM1(LINENO+SHIFT,^TMP(ARR,$J,LINENO,0),1,5) ; SETFLD doesn't work since called by nontarget template.
"RTN","TIUFLLM1",65,0)
 . . I SHIFT>5!(SHIFT<-5) W "."
"RTN","TIUFLLM1",66,0)
 . . I ARR'="TIUF3" S ^TMP(ARR,$J,"IDX",LINENO+SHIFT,LINENO+SHIFT)=""
"RTN","TIUFLLM1",67,0)
 . . S OLDINFO=^TMP(ARRIDX,$J,LINENO)
"RTN","TIUFLLM1",68,0)
 . . S $P(OLDINFO,U)=LINENO+SHIFT
"RTN","TIUFLLM1",69,0)
 . . S PLINENO=$P(OLDINFO,U,5) I PLINENO>LASTLIN S $P(OLDINFO,U,5)=PLINENO+SHIFT
"RTN","TIUFLLM1",70,0)
 . . S ^TMP(ARRIDX,$J,"DAF",$P(OLDINFO,U,2),LINENO+SHIFT)=""
"RTN","TIUFLLM1",71,0)
 . . I TMPLATE="T" S ^TMP(ARRIDX,$J,"DA10",$P(OLDINFO,U,6),LINENO+SHIFT)=""
"RTN","TIUFLLM1",72,0)
 . . S ^TMP(ARRIDX,$J,LINENO+SHIFT)=OLDINFO
"RTN","TIUFLLM1",73,0)
 . . K ^TMP(ARR,$J,LINENO,0),^TMP(ARR,$J,"IDX",LINENO,LINENO)
"RTN","TIUFLLM1",74,0)
 . . K ^TMP(ARRIDX,$J,LINENO),^TMP(ARRIDX,$J,"DAF",$P(OLDINFO,U,2),LINENO)
"RTN","TIUFLLM1",75,0)
 . . I TMPLATE="T" K ^TMP(ARRIDX,$J,"DA10",$P(OLDINFO,U,6),LINENO)
"RTN","TIUFLLM1",76,0)
 . . Q
"RTN","TIUFLLM1",77,0)
 . Q
"RTN","TIUFLLM1",78,0)
 I SHIFT'<0 D
"RTN","TIUFLLM1",79,0)
 . ; Fill LM space with buffer array to add/update entries.
"RTN","TIUFLLM1",80,0)
 . S TIUJ=0 F  S TIUJ=$O(^TMP("TIUFB",$J,TIUJ)) Q:'TIUJ  D
"RTN","TIUFLLM1",81,0)
 . . S TIUREC=^TMP("TIUFB",$J,TIUJ,0)
"RTN","TIUFLLM1",82,0)
 . . S ^TMP(ARR,$J,TIUJ,0)=TIUREC
"RTN","TIUFLLM1",83,0)
 . . I SHIFT>5 W "."
"RTN","TIUFLLM1",84,0)
 . . I ARR'="TIUF3" S ^TMP(ARR,$J,"IDX",TIUJ,TIUJ)=""
"RTN","TIUFLLM1",85,0)
 . . S BINFO=^TMP("TIUFBIDX",$J,TIUJ)
"RTN","TIUFLLM1",86,0)
 . . S ^TMP(ARRIDX,$J,"DAF",$P(BINFO,U,2),TIUJ)=""
"RTN","TIUFLLM1",87,0)
 . . I TMPLATE="T" S ^TMP(ARRIDX,$J,"DA10",$P(BINFO,U,6),TIUJ)=""
"RTN","TIUFLLM1",88,0)
 . . S ^TMP(ARRIDX,$J,TIUJ)=BINFO
"RTN","TIUFLLM1",89,0)
 . . Q
"RTN","TIUFLLM1",90,0)
 . K ^TMP("TIUFB",$J),^TMP("TIUFBIDX",$J)
"RTN","TIUFLLM1",91,0)
 . Q
"RTN","TIUFLLM1",92,0)
 I $G(PINFO),SHIFT,TMPLATE="H" D
"RTN","TIUFLLM1",93,0)
 . ; When changing Template H, updates PINFO for entries to be added/deleted.
"RTN","TIUFLLM1",94,0)
 . ; Updates XPDLCNT for ancestors of entries to be added/deleted.
"RTN","TIUFLLM1",95,0)
 . ; Updates + in front of parent.
"RTN","TIUFLLM1",96,0)
 . N ANCINFO,ANCLNO,XPDLCNT,AINFO
"RTN","TIUFLLM1",97,0)
 . S ANCLNO=+PINFO
"RTN","TIUFLLM1",98,0)
 . F  S AINFO=$G(^TMP("TIUF1IDX",$J,ANCLNO)) Q:'AINFO  D
"RTN","TIUFLLM1",99,0)
 . . S XPDLCNT=$P(AINFO,U,3)+SHIFT
"RTN","TIUFLLM1",100,0)
 . . S $P(^TMP("TIUF1IDX",$J,ANCLNO),U,3)=XPDLCNT
"RTN","TIUFLLM1",101,0)
 . . S ANCLNO=+$P(AINFO,U,5)
"RTN","TIUFLLM1",102,0)
 . . Q
"RTN","TIUFLLM1",103,0)
 . S PINFO("XPDLCNT")=$P(PINFO,U,3)+SHIFT
"RTN","TIUFLLM1",104,0)
 . S $P(PINFO,U,3)=PINFO("XPDLCNT")
"RTN","TIUFLLM1",105,0)
 . S TIUREC=^TMP("TIUF1",$J,+PINFO,0)
"RTN","TIUFLLM1",106,0)
 . S TIUREC=$$PLUSUP^TIUFLLM(.PINFO,TIUREC)
"RTN","TIUFLLM1",107,0)
 . S ^TMP("TIUF1",$J,+PINFO,0)=TIUREC
"RTN","TIUFLLM1",108,0)
 . Q
"RTN","TIUFLLM1",109,0)
UPDAX Q
"RTN","TIUFLLM1",110,0)
 ;
"RTN","TIUFLLM2")
0^60^B35004765
"RTN","TIUFLLM2",1,0)
TIUFLLM2 ; SLC/MAM - Library; LM Related: BUFENTRY(INFO,NODE0,CONTENT,PFILEDA), CONTENT params: 80,N,H,B,I,W ;4/28/97  21:21
"RTN","TIUFLLM2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLLM2",3,0)
 ;
"RTN","TIUFLLM2",4,0)
BUFENTRY(INFO,NODE0,CONTENT,PFILEDA) ;Get data for FILEDA; set Docmt
"RTN","TIUFLLM2",5,0)
 ;Def entry INFO("FILEDA") into buffer array, inserting it at lineno
"RTN","TIUFLLM2",6,0)
 ;+INFO with Lineno +INFO.
"RTN","TIUFLLM2",7,0)
 ; This module adds ONE line to buffer array and is called multiple
"RTN","TIUFLLM2",8,0)
 ;times to complete buffer array.  When finished, buffer array is
"RTN","TIUFLLM2",9,0)
 ;inserted AS IS into LM array ^TMP("TIUF1/2/or3" for LM Sub/Template
"RTN","TIUFLLM2",10,0)
 ;TIUFTMPL/TIUFSTMP (unless CONTENT contains W, in which case Buffer
"RTN","TIUFLLM2",11,0)
 ;Array is written to screen.)
"RTN","TIUFLLM2",12,0)
 ; Buffer array does NOT necessarily start with line 1, but with line
"RTN","TIUFLLM2",13,0)
 ;0 if CONTENT contains W, or with number appropriate for where it will
"RTN","TIUFLLM2",14,0)
 ;be inserted into LM array.
"RTN","TIUFLLM2",15,0)
 ;
"RTN","TIUFLLM2",16,0)
 ; Requires INFO array, where INFO is either as set in NINFO^TIUFLLM if
"RTN","TIUFLLM2",17,0)
 ;entry is not yet in LM array, or is = ^TMP("TIUF*IDX,$J,LINENO) if
"RTN","TIUFLLM2",18,0)
 ;entry is already in LM array, and where INFO array is as set in
"RTN","TIUFLLM2",19,0)
 ;PARSE^TIUFLLM(INFO). FILEDA = INFO("FILEDA"), is entry in 8925.1.
"RTN","TIUFLLM2",20,0)
 ; Requires Array NODE0, set as TIUFNOD0 in NODE0ARR^TIUFLF.  NODE0 is
"RTN","TIUFLLM2",21,0)
 ;enhanced 0 node of FILEDA.
"RTN","TIUFLLM2",22,0)
 ; Requires CONTENT = String of flags defining what information is set
"RTN","TIUFLLM2",23,0)
 ;into buffer array for FILEDA: parameters allowed: 80, H, C, A, J, D, O,
"RTN","TIUFLLM2",24,0)
 ;T, W.  For more info on CONTENT see rtn TIUFLLM3.
"RTN","TIUFLLM2",25,0)
 ; Requires PFILEDA if CONTENT contains  D, or T, where
"RTN","TIUFLLM2",26,0)
 ;PFILEDA=FILEDA of (anticipated) parent of entry.
"RTN","TIUFLLM2",27,0)
 ; Requires TIUFWHO, set in Options TIUF/A/C/H EDIT/SORT/CREATE DDEFS CLIN/MGR/NATL.
"RTN","TIUFLLM2",28,0)
 ; Can't use VALMDDEF since called by nontarget Template.
"RTN","TIUFLLM2",29,0)
 ;
"RTN","TIUFLLM2",30,0)
 N DIC,DIQ,DA,DR,MNEM,MENUTEXT,SEQUENCE,NUMBER,NAME,TIUREC,IFN
"RTN","TIUFLLM2",31,0)
 N TYPE,LP,LC,OWNER,TIUREC,STATUS,DDEFUSED,INUSE
"RTN","TIUFLLM2",32,0)
 N MNWIDTH,RESTCOL,NMCOLUMN,TIUFI,FILEDA,BOILPT,SHARE,POWNER,COWNER,ITEMS
"RTN","TIUFLLM2",33,0)
 N CONT80,CONTH,CONTC,CONTA,CONTJ,CONTD,CONTT,CONTW,CONTO
"RTN","TIUFLLM2",34,0)
 N PRINTNM,NATIONAL,FRACTION
"RTN","TIUFLLM2",35,0)
 ; If already had LM array node for entry and saved it (nothing changed except lineno) then put IT in buffer instead of getting all data again:
"RTN","TIUFLLM2",36,0)
 I $D(TIUFSAVE(INFO("FILEDA"))) D  Q
"RTN","TIUFLLM2",37,0)
 . S TIUREC=TIUFSAVE(INFO("FILEDA"))
"RTN","TIUFLLM2",38,0)
 . S $P(TIUREC," ")=+INFO I $L(+INFO)>$L(+TIUFSAVE(INFO("FILEDA"))) S $P(TIUREC,+INFO,2)=$E(TIUREC,$L(+INFO)+2,500)
"RTN","TIUFLLM2",39,0)
 . S ^TMP("TIUFB",$J,+INFO,0)=TIUREC
"RTN","TIUFLLM2",40,0)
 . S ^TMP("TIUFBIDX",$J,+INFO)=INFO
"RTN","TIUFLLM2",41,0)
 S CONTH=$S(CONTENT["H":1,1:0),CONTC=$S(CONTENT["C":1,1:0),CONTA=$S(CONTENT["A":1,1:0)
"RTN","TIUFLLM2",42,0)
 S CONTJ=$S(CONTENT["J":1,1:0),CONTD=$S(CONTENT["D":1,1:0),CONTT=$S(CONTENT["T":1,1:0),CONTW=$S(CONTENT["W":1,1:0),CONT80=$S(+CONTENT:1,1:0),CONTO=$S(CONTENT["O":1,1:0)
"RTN","TIUFLLM2",43,0)
NUM ; Set Entry number
"RTN","TIUFLLM2",44,0)
 I CONTH!CONTA!CONTC!CONTJ!CONTT S NUMBER=$S(+INFO:+INFO,1:""),TIUREC=$$SETSTR^VALM1(NUMBER,"",1,5),NMCOLUMN=8
"RTN","TIUFLLM2",45,0)
 E  S TIUREC="",NMCOLUMN=2
"RTN","TIUFLLM2",46,0)
NAME ; Set DDEF Name, Type into TIUREC:
"RTN","TIUFLLM2",47,0)
 S NAME=$P(NODE0,U),TYPE=$P(NODE0,U,4) S:TYPE="DOC" TYPE="TL"
"RTN","TIUFLLM2",48,0)
 I CONTH!CONTC S NAME=$J(NAME,$L(NAME)+(2*(INFO("LEVEL"))))
"RTN","TIUFLLM2",49,0)
 S TIUREC=$$SETSTR^VALM1(NAME,TIUREC,NMCOLUMN,$S(CONTD:37,CONTO:55,1:67))
"RTN","TIUFLLM2",50,0)
 I CONTH!CONTA!CONTC D
"RTN","TIUFLLM2",51,0)
 . I TYPE'="",NODE0("SHARE")="Yes" S TYPE=$E(TYPE,1,2)_" S"
"RTN","TIUFLLM2",52,0)
 . S TIUREC=$$SETSTR^VALM1(TYPE,TIUREC,77,4) Q
"RTN","TIUFLLM2",53,0)
 I CONTJ S STATUS=$E(NODE0("STATUS")),STATUS=$J(STATUS,6) S TIUREC=$$SETSTR^VALM1(STATUS,TIUREC,75,6)
"RTN","TIUFLLM2",54,0)
 ;
"RTN","TIUFLLM2",55,0)
 I $D(PFILEDA),CONTD!CONTT D
"RTN","TIUFLLM2",56,0)
 . K TIUFQ S DIC=8925.1,DA=PFILEDA,DIQ="TIUFQ",DR="10",DA(8925.14)=INFO("TENDA"),DR(8925.14)=".01:4" D EN^DIQ1
"RTN","TIUFLLM2",57,0)
 . S MNEM=TIUFQ(8925.14,INFO("TENDA"),2),MNEM=$J(MNEM,4)
"RTN","TIUFLLM2",58,0)
 . I TYPE'="CL",(TYPE'="DC") S MNEM="    "
"RTN","TIUFLLM2",59,0)
 . S MENUTEXT=TIUFQ(8925.14,INFO("TENDA"),4),SEQUENCE=TIUFQ(8925.14,INFO("TENDA"),3),FRACTION=$P(SEQUENCE,".",2),SEQUENCE=$S(FRACTION="":SEQUENCE_"   ",$L(FRACTION)=1:SEQUENCE_" ",1:SEQUENCE_""),SEQUENCE=$J(SEQUENCE,6)
"RTN","TIUFLLM2",60,0)
 . K TIUFQ
"RTN","TIUFLLM2",61,0)
 I CONTT,SEQUENCE'="" S TIUREC=$$SETSTR^VALM1(SEQUENCE,TIUREC,75,6)
"RTN","TIUFLLM2",62,0)
 ;
"RTN","TIUFLLM2",63,0)
 S FILEDA=INFO("FILEDA")
"RTN","TIUFLLM2",64,0)
GET ; Get/Set the rest of the line:
"RTN","TIUFLLM2",65,0)
 S IFN=FILEDA,IFN=$J(IFN,7)
"RTN","TIUFLLM2",66,0)
 I CONT80!CONTH!CONTA!CONTC!CONTJ!CONTW D
"RTN","TIUFLLM2",67,0)
 . S NATIONAL=NODE0("NATL"),NATIONAL=$J(NATIONAL,4)
"RTN","TIUFLLM2",68,0)
 . S:TIUFTMPL'["J" INUSE=NODE0("INUSE"),INUSE=$J(INUSE,6)
"RTN","TIUFLLM2",69,0)
 . I TIUFTMPL'["J" S STATUS=$E(NODE0("STATUS")),STATUS=$J(STATUS,6) I $P(NODE0,U,10) S STATUS="      "
"RTN","TIUFLLM2",70,0)
 . S:TIUFTMPL'["J" BOILPT=NODE0("BOILPT"),BOILPT=$J(BOILPT,4)
"RTN","TIUFLLM2",71,0)
 . S:TIUFTMPL'["J" ITEMS=NODE0("ITEMS"),ITEMS=$J(ITEMS,5)
"RTN","TIUFLLM2",72,0)
 . S PRINTNM=$P(NODE0,U,3)
"RTN","TIUFLLM2",73,0)
 I CONT80!CONTH!CONTA!CONTC!CONTJ!CONTW!CONTO D
"RTN","TIUFLLM2",74,0)
 . S POWNER=$P(NODE0,U,5),LP=$L(POWNER)
"RTN","TIUFLLM2",75,0)
 . S COWNER=$P(NODE0,U,6),LC=$L(COWNER)
"RTN","TIUFLLM2",76,0)
 . I LP D
"RTN","TIUFLLM2",77,0)
 . . S POWNER=$G(^VA(200,POWNER,0))
"RTN","TIUFLLM2",78,0)
 . . I POWNER="" S POWNER="ERROR" Q
"RTN","TIUFLLM2",79,0)
 . . S POWNER=$S($L($P(POWNER,U,2)):$P(POWNER,U,2),1:$E($P(POWNER,U),1,7))
"RTN","TIUFLLM2",80,0)
 . I LC D
"RTN","TIUFLLM2",81,0)
 . . S COWNER=$G(^USR(8930,COWNER,0))
"RTN","TIUFLLM2",82,0)
 . . I COWNER="" S COWNER="ERROR" Q
"RTN","TIUFLLM2",83,0)
 . . S COWNER=$S($L($P(COWNER,U,2)):$P(COWNER,U,2),1:$E($P(COWNER,U),1,7))
"RTN","TIUFLLM2",84,0)
 . S OWNER=$S(LP&'LC:POWNER,LC&'LP:COWNER,LP&LC:$E(POWNER,1,3)_","_$E(COWNER,1,4),1:"")
"RTN","TIUFLLM2",85,0)
SET S RESTCOL=$S(CONT80:45,"NM"[TIUFWHO&CONTD:30,CONTD:41,CONTO:57,"C"[TIUFWHO&CONTT:91,1:82)
"RTN","TIUFLLM2",86,0)
 I CONT80 D  G PLUS
"RTN","TIUFLLM2",87,0)
 . S TIUREC=$$SETSTR^VALM1(" "_TYPE,TIUREC,RESTCOL-1,5),RESTCOL=RESTCOL+6 ;RESTCOL=RESTCOL+LASTWIDTH +2
"RTN","TIUFLLM2",88,0)
 . S TIUREC=$$SETSTR^VALM1("  "_IFN,TIUREC,RESTCOL-2,9),RESTCOL=RESTCOL+9
"RTN","TIUFLLM2",89,0)
 . S TIUREC=$$SETSTR^VALM1("  "_NATIONAL,TIUREC,RESTCOL-2,6),RESTCOL=RESTCOL+6
"RTN","TIUFLLM2",90,0)
 . S TIUREC=$$SETSTR^VALM1("  "_STATUS,TIUREC,RESTCOL-2,8),RESTCOL=RESTCOL+8
"RTN","TIUFLLM2",91,0)
 . S TIUREC=$$SETSTR^VALM1("  "_OWNER,TIUREC,RESTCOL-2,9),RESTCOL=RESTCOL+9
"RTN","TIUFLLM2",92,0)
 I CONTO D
"RTN","TIUFLLM2",93,0)
 . S STATUS=$E(NODE0("STATUS")),STATUS=$J(STATUS,6) S TIUREC=$$SETSTR^VALM1(STATUS,TIUREC,RESTCOL,6),RESTCOL=RESTCOL+8
"RTN","TIUFLLM2",94,0)
 . S TIUREC=$$SETSTR^VALM1(OWNER,TIUREC,RESTCOL,7),RESTCOL=RESTCOL+9
"RTN","TIUFLLM2",95,0)
 I "NM"[TIUFWHO D
"RTN","TIUFLLM2",96,0)
 . I CONTD S TIUREC=$$SETSTR^VALM1("  ",TIUREC,RESTCOL,2),RESTCOL=RESTCOL+2
"RTN","TIUFLLM2",97,0)
 . S TIUREC=$$SETSTR^VALM1(IFN,TIUREC,RESTCOL,7),RESTCOL=RESTCOL+9 ;RESTCOL=RESTCOL+LASTWIDTH +2
"RTN","TIUFLLM2",98,0)
 I CONTH!CONTA!CONTC!CONTJ!CONTW D  G PLUS
"RTN","TIUFLLM2",99,0)
 . S TIUREC=$$SETSTR^VALM1(NATIONAL,TIUREC,RESTCOL,4),RESTCOL=RESTCOL+6
"RTN","TIUFLLM2",100,0)
 . S:TIUFTMPL'["J" TIUREC=$$SETSTR^VALM1(STATUS,TIUREC,RESTCOL,6),RESTCOL=RESTCOL+8
"RTN","TIUFLLM2",101,0)
 . S TIUREC=$$SETSTR^VALM1(OWNER,TIUREC,RESTCOL,7),RESTCOL=RESTCOL+9
"RTN","TIUFLLM2",102,0)
 . S:TIUFTMPL'["J" TIUREC=$$SETSTR^VALM1($G(INUSE),TIUREC,RESTCOL,6),RESTCOL=RESTCOL+8
"RTN","TIUFLLM2",103,0)
 . S:TIUFTMPL'["J" TIUREC=$$SETSTR^VALM1(BOILPT,TIUREC,RESTCOL,4),RESTCOL=RESTCOL+6
"RTN","TIUFLLM2",104,0)
 . I CONTA S TIUREC=$$SETSTR^VALM1(ITEMS,TIUREC,RESTCOL,5),RESTCOL=RESTCOL+7
"RTN","TIUFLLM2",105,0)
 . S TIUREC=$$SETSTR^VALM1(PRINTNM,TIUREC,RESTCOL,60)
"RTN","TIUFLLM2",106,0)
 I CONTD!CONTT D
"RTN","TIUFLLM2",107,0)
 . S:CONTD TIUREC=$$SETSTR^VALM1(SEQUENCE,TIUREC,RESTCOL,6),RESTCOL=RESTCOL+8
"RTN","TIUFLLM2",108,0)
 . S TIUREC=$$SETSTR^VALM1(MNEM,TIUREC,RESTCOL,4),RESTCOL=RESTCOL+6
"RTN","TIUFLLM2",109,0)
 . S TIUREC=$$SETSTR^VALM1(MENUTEXT,TIUREC,RESTCOL,26)
"RTN","TIUFLLM2",110,0)
PLUS I CONTH S TIUREC=$$PLUSUP^TIUFLLM(.INFO,TIUREC)
"RTN","TIUFLLM2",111,0)
 I 'CONT80,'CONTO,'CONTD,'CONTT D RTSCROLL^TIUFLLM(.TIUREC,TYPE)
"RTN","TIUFLLM2",112,0)
 S ^TMP("TIUFB",$J,+INFO,0)=TIUREC
"RTN","TIUFLLM2",113,0)
 I 'CONTW D
"RTN","TIUFLLM2",114,0)
 . S ^TMP("TIUFBIDX",$J,+INFO)=INFO
"RTN","TIUFLLM2",115,0)
BUFEX Q
"RTN","TIUFLLM2",116,0)
 ;
"RTN","TIUFLLM3")
0^61^B3140
"RTN","TIUFLLM3",1,0)
TIUFLLM3 ; SLC/MAM - Library; LM Related: Docmentation on Templs H,A,I,T,D,P, Arrays TIUF1/2/3/B, Variables TIUFTMPL,TIUFSTMP,TIUFWHO,TIUFACT, Variable CONTENT in BUFENTRY^TIUFLLM3 ;10/25/95  21:21
"RTN","TIUFLLM3",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLLM3",3,0)
 ;
"RTN","TIUFLLM3",4,0)
 ;                     ***GENERAL DOCUMENTATION***
"RTN","TIUFLLM3",5,0)
 ; Note on Templates/Subtemplates:
"RTN","TIUFLLM3",6,0)
 ;  As the words are used in the Document Definition Utility (TIUF):
"RTN","TIUFLLM3",7,0)
 ;TIUF Templates/Subtemplates are distinguished by what sort of entity
"RTN","TIUFLLM3",8,0)
 ;they display, e.g. they may display Document Definitions in Hierarchy,
"RTN","TIUFLLM3",9,0)
 ;or Items, or complete information on one Document Definition.
"RTN","TIUFLLM3",10,0)
 ; Variables TIUFTMPL/TIUFSTMP name the TIUF Sub/Template by letter
"RTN","TIUFLLM3",11,0)
 ;according to the entity displayed, e.g. T for Items, D for Detailed
"RTN","TIUFLLM3",12,0)
 ;Display, X for Boilerplate Text, H for Hierarchy (Edit DDEFS), A for
"RTN","TIUFLLM3",13,0)
 ;Attribute (Sort DDEFS), C for Create.
"RTN","TIUFLLM3",14,0)
 ; Template Actions CALL Subtemplates.  
"RTN","TIUFLLM3",15,0)
 ;  LIST MANAGER TEMPLATES have a many to one relation to TIUF
"RTN","TIUFLLM3",16,0)
 ;SUB/TEMPLATES:  LM Templates are distinguished from each other by
"RTN","TIUFLLM3",17,0)
 ;1) what sort of entity they display, 2) what users they are intended
"RTN","TIUFLLM3",18,0)
 ;for, 3) what actions may be taken/ how some actions behave, and 4) the 
"RTN","TIUFLLM3",19,0)
 ;type of the entry in the case of detailed display.
"RTN","TIUFLLM3",20,0)
 ;  Variables TIUFTMPL/TIUFSTMP describe the sort of entity displayed.
"RTN","TIUFLLM3",21,0)
 ;TIUFWHO describes the intended user.  TIUFACT* describes actions, which
"RTN","TIUFLLM3",22,0)
 ;may depend on the entry selected from a previous screen as well as on
"RTN","TIUFLLM3",23,0)
 ;the user.  The LM Template called therefore may depend on all 3
"RTN","TIUFLLM3",24,0)
 ;variables: TIUFTMPL/TIUFSTMP, TIUFWHO, and TIUFACT* as well as on the
"RTN","TIUFLLM3",25,0)
 ;type of entry displayed.
"RTN","TIUFLLM3",26,0)
 ;
"RTN","TIUFLLM3",27,0)
 ; TIUF Templates are:    H, A, C, J
"RTN","TIUFLLM3",28,0)
 ; TIUF Subtemplates are: D (called by H/A/C/J), X (called by H/A/C), and T (called by H/A,D).
"RTN","TIUFLLM3",29,0)
 ;
"RTN","TIUFLLM3",30,0)
 ; TIUF Template H corresponds to LM Templates:
"RTN","TIUFLLM3",31,0)
 ;   TIUFH EDIT DDEFS CLIN,
"RTN","TIUFLLM3",32,0)
 ;   TIUFH EDIT DDEFS MGR,
"RTN","TIUFLLM3",33,0)
 ; TIUF Template A corresponds to LM Templates:
"RTN","TIUFLLM3",34,0)
 ;   TIUFA SORT DDEFS CLIN,
"RTN","TIUFLLM3",35,0)
 ;   TIUFA SORT DDEFS MGR,
"RTN","TIUFLLM3",36,0)
 ; TIUF Template C corresponds to LM Templates:
"RTN","TIUFLLM3",37,0)
 ;   TIUFC CREATE DDEFS MGR,
"RTN","TIUFLLM3",38,0)
 ; TIUF Subtemplate D corresponds to LM Templates:
"RTN","TIUFLLM3",39,0)
 ;   TIUFD DISPLAY CLIN,
"RTN","TIUFLLM3",40,0)
 ;   TIUFD DISPLAY MGR,
"RTN","TIUFLLM3",41,0)
 ;   TIUFD DISPLAY VIEW (for objects AND nonobjects),
"RTN","TIUFLLM3",42,0)
 ;   TIUFDJ DISPLAY OBJECT MGR (for objects).
"RTN","TIUFLLM3",43,0)
 ; TIUF Subtemplate X corresponds to LM Templates:
"RTN","TIUFLLM3",44,0)
 ;   TIUFX BOILERPLATE TEXT
"RTN","TIUFLLM3",45,0)
 ;   TIUFX BOILERPLATE TEXT VIEW
"RTN","TIUFLLM3",46,0)
 ; TIUF Subtemplate T corresponds to LM Templates:
"RTN","TIUFLLM3",47,0)
 ;   TIUFT ITEMS ADD/EDIT/VIEW MGR
"RTN","TIUFLLM3",48,0)
 ;   TIUFT ITEMS EDIT/VIEW CLIN
"RTN","TIUFLLM3",49,0)
 ;   TIUFT ITEMS VIEW NATL/MGR/CLIN
"RTN","TIUFLLM3",50,0)
 ;
"RTN","TIUFLLM3",51,0)
 ; Note on Variables: 
"RTN","TIUFLLM3",52,0)
 ; Variables TIUFTMPL, TIUFSTMP, TIUFWHO, TIUFACT*
"RTN","TIUFLLM3",53,0)
 ;   TIUFTMPL = :
"RTN","TIUFLLM3",54,0)
 ;     H for Template Edit Document Definitions,
"RTN","TIUFLLM3",55,0)
 ;     A for Template Sort Document Definitions,
"RTN","TIUFLLM3",56,0)
 ;     C for Template Create Document Definitions
"RTN","TIUFLLM3",57,0)
 ;     J for Template Create Objects
"RTN","TIUFLLM3",58,0)
 ;       TIUFTMPL names the option originally chosen by the user.
"RTN","TIUFLLM3",59,0)
 ;       If TIUFSTMP does not exist, then the user is currently in
"RTN","TIUFLLM3",60,0)
 ;         TIUFTMPL.  If TIUFSTMP exists (along with TIUFTMPL), then
"RTN","TIUFLLM3",61,0)
 ;         the user is currently in TIUFSTMP (and came from TIUFTMPL).
"RTN","TIUFLLM3",62,0)
 ;       TIUFTMPL is set in Options TIUFH EDIT DDEFS, TIUFA SORT DDEFS, or TIUFC CREATE DDEFS, TIUFJ CREATE OBJECTS.
"RTN","TIUFLLM3",63,0)
 ;   TIUFSTMP = :
"RTN","TIUFLLM3",64,0)
 ;     T for Subtemplate Items,
"RTN","TIUFLLM3",65,0)
 ;     D for Subtemplate Detailed Display,
"RTN","TIUFLLM3",66,0)
 ;     X for Subtemplate Boilerplate Text
"RTN","TIUFLLM3",67,0)
 ;       TIUFSTMP is set in rtns.
"RTN","TIUFLLM3",68,0)
 ;   TIUFWHO = :
"RTN","TIUFLLM3",69,0)
 ;     C for Clinician, M for Manager, N for National Developer.
"RTN","TIUFLLM3",70,0)
 ;       TIUFWHO is set in Options TIUF/H/A/C/J EDIT/SORT/CREATE DDEFS
"RTN","TIUFLLM3",71,0)
 ;       /OBJECTS.
"RTN","TIUFLLM3",72,0)
 ;   TIUFACT*= :
"RTN","TIUFLLM3",73,0)
 ;     For Subtemplate T:
"RTN","TIUFLLM3",74,0)
 ;       TIUFACTT = A for TIUFT ITEMS ADD/EDIT/VIEW MGR
"RTN","TIUFLLM3",75,0)
 ;                  E for TIUFT ITEMS EDIT/VIEW CLIN
"RTN","TIUFLLM3",76,0)
 ;                  V for TIUFT ITEMS VIEW MGR/CLIN
"RTN","TIUFLLM3",77,0)
 ;     For Subtemplate D:
"RTN","TIUFLLM3",78,0)
 ;       TIUFACT = C for TIUFD DISPLAY CLIN
"RTN","TIUFLLM3",79,0)
 ;                 M,N for TIUFD DISPLAY MGR
"RTN","TIUFLLM3",80,0)
 ;                 V for TIUFD DISPLAY VIEW
"RTN","TIUFLLM3",81,0)
 ;     For Subtemplate X:
"RTN","TIUFLLM3",82,0)
 ;       TIUFACT = C,M,N for TIUFX BOILERPLATE TEXT
"RTN","TIUFLLM3",83,0)
 ;       TIUFACT = V for TIUFX BOILERPLATE TEXT VIEW
"RTN","TIUFLLM3",84,0)
 ;
"RTN","TIUFLLM3",85,0)
 ;         TIUFACT* is set in rtns
"RTN","TIUFLLM3",86,0)
 ;
"RTN","TIUFLLM3",87,0)
 ;  In the TIUF Utility, LM Templates and Protocol Menus are named using
"RTN","TIUFLLM3",88,0)
 ;TIUFTMPL or TIUFSTMP, and lengthened or abbreviated forms of TIUFWHO
"RTN","TIUFLLM3",89,0)
 ;or TIUFACT.
"RTN","TIUFLLM3",90,0)
 ;  EXAMPLE: Protocol TIUFA ACTION MENU CLIN is the Protocol Menu for 
"RTN","TIUFLLM3",91,0)
 ;LM Template TIUFA SORT DDEFS CLIN, where A = TIUFTMPL = Sort DDEFs,
"RTN","TIUFLLM3",92,0)
 ;CLIN = lengthened TIUFWHO.
"RTN","TIUFLLM3",93,0)
 ;
"RTN","TIUFLLM3",94,0)
 ; Note on Major TMP Arrays:
"RTN","TIUFLLM3",95,0)
 ;   TIUF uses 3 sets of TMP arrays: ^TMP("TIUF1" and associated arrays,
"RTN","TIUFLLM3",96,0)
 ;^TMP("TIUF2" and associated arrays, and ^TMP("TIUF3" and associated
"RTN","TIUFLLM3",97,0)
 ;arrays.  It also uses a buffer array before setting data into the 3
"RTN","TIUFLLM3",98,0)
 ;above arrays: ^TMP("TIUFB".  TMP arrays 1, 2, and 3 above are used for
"RTN","TIUFLLM3",99,0)
 ;LM Templates.
"RTN","TIUFLLM3",100,0)
 ;     ^TMP("TIUF1" is the LM array for TIUF Templates H, A, C and J.
"RTN","TIUFLLM3",101,0)
 ;     ^TMP("TIUF3" is the LM array for TIUF Subtemplates D and X.
"RTN","TIUFLLM3",102,0)
 ;     ^TMP("TIUF2" is the LM array for TIUF Subtemplate T.
"RTN","TIUFLLM3",103,0)
 ;  Modules for ^TMP("TIUF1"/2 optionally handle hierarchy display,
"RTN","TIUFLLM3",104,0)
 ;which updates the display for one entry when another entry is edited.
"RTN","TIUFLLM3",105,0)
 ; TIUF also uses ^TMP("TIUF",$J), which contains setup variables.
"RTN","TIUFLLM3",106,0)
 ;
"RTN","TIUFLLM3",107,0)
 ; Note on variable CONTENT in BUFENTRY^TIUFLLM2:
"RTN","TIUFLLM3",108,0)
 ;CONTENT is a string containing any of the following flags:
"RTN","TIUFLLM3",109,0)
 ;   80   info is limited to 80 chars. 80 can be FOLLOWED by another
"RTN","TIUFLLM3",110,0)
 ;flag, but it must be first.  Commas are not necessary.  Used to display
"RTN","TIUFLLM3",111,0)
 ;parents of Shared Components, to display parent in Template A Edit/
"RTN","TIUFLLM3",112,0)
 ;View.  Other flags are mutually exclusive, i.e., string can contain
"RTN","TIUFLLM3",113,0)
 ;only one except for 80.
"RTN","TIUFLLM3",114,0)
 ;   H    info is for Hierarchy LM Template: need +, need levels, omit Items Column in Screen Display.
"RTN","TIUFLLM3",115,0)
 ;   C    info is for CREATE LM Template: need levels, omit Items Column in Screen Display.
"RTN","TIUFLLM3",116,0)
 ;   A    info is for Attribute Template: need Items, omit levels.
"RTN","TIUFLLM3",117,0)
 ;   J    info is for Object Template: omit levels, omit columns Type, In Use, Boiltext, Items
"RTN","TIUFLLM3",118,0)
 ;   D    info is item fields from item subfile; Shortened Name for Template D, no Number
"RTN","TIUFLLM3",119,0)
 ;   O    info is Name, Status, Owner, (IFN) of Title/Orphan Component with embedded Object; for Template D for Objects
"RTN","TIUFLLM3",120,0)
 ;   T    info is item fields from item subfile; Whole Name for Template T.
"RTN","TIUFLLM3",121,0)
 ;   W    Buffer array is not for insertion into LM array but only for
"RTN","TIUFLLM3",122,0)
 ;writing to screen. +INFO=0, and Buffer array starts with line 0; No number.
"RTN","TIUFLT")
0^62^B8051475
"RTN","TIUFLT",1,0)
TIUFLT ; SLC/MAM - Library; Template T (Items) Related: BUFITEMS(CONTENT,EINFO,LASTLIN), ITEMS(FILEDA) ;4/6/95  11:02
"RTN","TIUFLT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLT",3,0)
 ;
"RTN","TIUFLT",4,0)
BUFITEMS(CONTENT,EINFO,LASTLIN) ; Set items of Entry EINFO into
"RTN","TIUFLT",5,0)
 ;Buffer array in proper order.
"RTN","TIUFLT",6,0)
 ; Requires CONTENT = String containing some or all of: 80, H, C, A, D, T, W.  See BUFENTRY^TIUFLLM2.
"RTN","TIUFLT",7,0)
 ; Requires EINFO, where EINFO is either as set in NINFO^TIUFLLM or
"RTN","TIUFLT",8,0)
 ;is = ^TMP("TIUFIDX,$J,LINENO).
"RTN","TIUFLT",9,0)
 ; Requires LASTLIN=LM array line before item insertion point.
"RTN","TIUFLT",10,0)
 ; Requires all of the entry's items to exist in the file: check before calling this module.
"RTN","TIUFLT",11,0)
 ; Updates LASTLIN to last line set in buffer array, ie 
"RTN","TIUFLT",12,0)
 ;buffer array starts with line [received LASTLIN+1] and ends with
"RTN","TIUFLT",13,0)
 ;line [returned LASTLIN].
"RTN","TIUFLT",14,0)
 N FILEDA,TIUFITEM,LINENO,TIUFI,IFILEDA,ITENDA,INFO,INODE0
"RTN","TIUFLT",15,0)
 S FILEDA=$P(EINFO,U,2)
"RTN","TIUFLT",16,0)
 I TIUFTMPL="C",TIUFCLPS S TIUFITEM(1)=TIUFCDA_U_TIUFCTDA
"RTN","TIUFLT",17,0)
 E  D ITEMS(FILEDA)
"RTN","TIUFLT",18,0)
 K ^TMP("TIUFB",$J),^TMP("TIUFBIDX",$J)
"RTN","TIUFLT",19,0)
 S LINENO=LASTLIN
"RTN","TIUFLT",20,0)
 F TIUFI=1:1 Q:'$G(TIUFITEM(TIUFI))  D  Q:$D(DTOUT)
"RTN","TIUFLT",21,0)
 . S IFILEDA=$P(TIUFITEM(TIUFI),U),ITENDA=$P(TIUFITEM(TIUFI),U,2) Q:'IFILEDA  Q:'ITENDA
"RTN","TIUFLT",22,0)
 . S LINENO=LINENO+1 ;Needed by NINFO.
"RTN","TIUFLT",23,0)
 . D NINFO^TIUFLLM(LINENO,IFILEDA,.INFO,EINFO,ITENDA),PARSE^TIUFLLM(.INFO)
"RTN","TIUFLT",24,0)
 . D NODE0ARR^TIUFLF(IFILEDA,.INODE0,FILEDA) Q:$D(DTOUT)
"RTN","TIUFLT",25,0)
 . I INODE0="" S LINENO=LINENO-1 Q
"RTN","TIUFLT",26,0)
 . D BUFENTRY^TIUFLLM2(.INFO,.INODE0,CONTENT,FILEDA) I TIUFI>5 W "."
"RTN","TIUFLT",27,0)
 . Q
"RTN","TIUFLT",28,0)
 S LASTLIN=LINENO
"RTN","TIUFLT",29,0)
 Q
"RTN","TIUFLT",30,0)
 ;
"RTN","TIUFLT",31,0)
ITEMS(FILEDA) ; Sets items of FILEDA into array TIUFITEM in proper order.
"RTN","TIUFLT",32,0)
 ; TIUFITEM(TIUFI)=Item's 8925.1 IFN^Item's IFN in Item multiple
"RTN","TIUFLT",33,0)
 ; Requires FILEDA = Entry's 8925.1 IFN
"RTN","TIUFLT",34,0)
 N TIUFI,SEQ,TENDA,TENODE0,NAME
"RTN","TIUFLT",35,0)
 S (TIUFI,SEQ,TENDA)=0
"RTN","TIUFLT",36,0)
 F  S SEQ=$O(^TIU(8925.1,FILEDA,10,"AC",SEQ)) Q:'SEQ  D
"RTN","TIUFLT",37,0)
 . ; Set items having sequence into TIUFITEM in sequence order
"RTN","TIUFLT",38,0)
 . F  S TENDA=$O(^TIU(8925.1,FILEDA,10,"AC",SEQ,TENDA)) Q:'TENDA  D
"RTN","TIUFLT",39,0)
 . . S TENODE0=^TIU(8925.1,FILEDA,10,TENDA,0) Q:'TENODE0
"RTN","TIUFLT",40,0)
 . . S TIUFI=TIUFI+1,TIUFITEM(TIUFI)=+TENODE0_"^"_TENDA
"RTN","TIUFLT",41,0)
 S NAME=""
"RTN","TIUFLT",42,0)
 F  S NAME=$O(^TIU(8925.1,FILEDA,10,"C",NAME)) Q:NAME=""  D
"RTN","TIUFLT",43,0)
 . ; Set items with no sequence into TIUFITEM in alpha order by Display Name.
"RTN","TIUFLT",44,0)
 . S TENDA=0
"RTN","TIUFLT",45,0)
 . F  S TENDA=$O(^TIU(8925.1,FILEDA,10,"C",NAME,TENDA)) Q:'TENDA  D
"RTN","TIUFLT",46,0)
 . . S TENODE0=^TIU(8925.1,FILEDA,10,TENDA,0) Q:'TENODE0
"RTN","TIUFLT",47,0)
 . . Q:$P(TENODE0,U,3)  ;If has sequence, already in TIUFITEM.
"RTN","TIUFLT",48,0)
 . . S TIUFI=TIUFI+1,TIUFITEM(TIUFI)=+TENODE0_"^"_TENDA
"RTN","TIUFLT",49,0)
 S TENDA=0
"RTN","TIUFLT",50,0)
 F  S TENDA=$O(^TIU(8925.1,FILEDA,10,TENDA)) Q:'TENDA  D
"RTN","TIUFLT",51,0)
 . ; Set items with no sequence, no display name into buffer in item order
"RTN","TIUFLT",52,0)
 . S TENODE0=^TIU(8925.1,FILEDA,10,TENDA,0) Q:'TENODE0
"RTN","TIUFLT",53,0)
 . Q:$P(TENODE0,U,3)  ;If has sequence, already in TIUFITEM.
"RTN","TIUFLT",54,0)
 . Q:$P(TENODE0,U,4)'=""  ;If has Display Name, already in TIUFITEM.
"RTN","TIUFLT",55,0)
 . S TIUFI=TIUFI+1,TIUFITEM(TIUFI)=+TENODE0_"^"_TENDA
"RTN","TIUFLT",56,0)
 Q
"RTN","TIUFLT",57,0)
 ;
"RTN","TIUFLX")
0^212^B17966324
"RTN","TIUFLX",1,0)
TIUFLX ; SLC/MAM - Library; Template X (Boilerplate Text) Related: XCHECK(FILEDA,SILENT), DCHECK(FILEDA,SILENT) ;6/9/97  11:02
"RTN","TIUFLX",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFLX",3,0)
 ;
"RTN","TIUFLX",4,0)
AMBIG ; Object as embedded is ambig: write msg, set x
"RTN","TIUFLX",5,0)
 ; Needs SILENT, OBJNM
"RTN","TIUFLX",6,0)
 D SET("X")
"RTN","TIUFLX",7,0)
 I 'SILENT D  D PAUSE^TIUFXHLX
"RTN","TIUFLX",8,0)
 . W !!,"Object |",OBJNM,"| cannot be found.",!,"It could be any of SEVERAL objects.  Please check intended object for",!,"spelling using option Create/View Objects.  If necessary, contact IRM.",!
"RTN","TIUFLX",9,0)
 Q
"RTN","TIUFLX",10,0)
 ;
"RTN","TIUFLX",11,0)
XCHECK(FILEDA,SILENT) ; Checks objects in FILEDA's boilerplate text. Silent if SILENT=1.  Writes msgs if SILENT=0 (TIUFSTMP = X or D). Sets TIUFCK, TIUFDCK
"RTN","TIUFLX",12,0)
 ; Requires SILENT = 1 to be silent.
"RTN","TIUFLX",13,0)
 N TIUFJ,LINE,PIECE,OBJNM,OFILEDA,XREF,ARR
"RTN","TIUFLX",14,0)
 S SILENT=+$G(SILENT)
"RTN","TIUFLX",15,0)
 S TIUFJ=0 F  S TIUFJ=$O(^TIU(8925.1,FILEDA,"DFLT",TIUFJ)) Q:'TIUFJ  K DIRUT D  G:$D(DIRUT) XCHEX I SILENT,$D(TIUFCK("X")) G XCHEX
"RTN","TIUFLX",16,0)
 . S LINE=$G(^TIU(8925.1,FILEDA,"DFLT",TIUFJ,0))
"RTN","TIUFLX",17,0)
 . I LINE["|" D
"RTN","TIUFLX",18,0)
 . . I ($L(LINE,"|")+1)#2 W:'SILENT !!,"Object split between lines, rest of line not checked:",!,LINE,! D:'SILENT PAUSE^TIUFXHLX D SET("X") Q
"RTN","TIUFLX",19,0)
 . . F PIECE=2:2:$L(LINE,"|") S OBJNM=$P(LINE,"|",PIECE) K DIRUT,ARR D  Q:$D(DIRUT)  I SILENT,$D(TIUFCK("X")) Q
"RTN","TIUFLX",20,0)
 . . . I OBJNM="" W:'SILENT !!,"Brackets are there, but there's no name inside: ||",! D:'SILENT PAUSE^TIUFXHLX D SET("X") Q
"RTN","TIUFLX",21,0)
 . . . K ARR
"RTN","TIUFLX",22,0)
 . . . F XREF="B","C","D" D  I $O(ARR($O(ARR(0)))) D AMBIG Q
"RTN","TIUFLX",23,0)
 . . . . S OFILEDA=0 F  S OFILEDA=$O(^TIU(8925.1,XREF,OBJNM,OFILEDA)) Q:'OFILEDA  S:$D(^TIU(8925.1,"AT","O",OFILEDA)) ARR(OFILEDA)="" I $O(ARR($O(ARR(0)))) Q
"RTN","TIUFLX",24,0)
 . . . I $O(ARR($O(ARR(0)))) Q
"RTN","TIUFLX",25,0)
 . . . I '$D(ARR) D  Q
"RTN","TIUFLX",26,0)
 . . . . W:'SILENT !!,"Object |",OBJNM,"| cannot be found in the file.",!,"Use uppercase and use object's exact name, print name, or abbreviation.",!,"Object's name/print name/abbreviation may have changed since this was embedded.",!
"RTN","TIUFLX",27,0)
 . . . . D:'SILENT PAUSE^TIUFXHLX D SET("X")
"RTN","TIUFLX",28,0)
 . . . S OFILEDA=$O(ARR(0)) D CHECK^TIUFLF3(OFILEDA)
"RTN","TIUFLX",29,0)
 . . . K TIUFCK("JN"),TIUFCK("JA"),TIUFCK("JP") ; already checked ambiguity
"RTN","TIUFLX",30,0)
 . . . I $D(TIUFCK("J")) W:'SILENT !!,"Object |",OBJNM,"| lacks an object method.",! D:'SILENT PAUSE^TIUFXHLX D SET("X") Q:SILENT  Q:$D(DIRUT)
"RTN","TIUFLX",31,0)
 . . . I '$D(^TIU(8925.1,"AS",+^TMP("TIUF",$J,"STATA"),OFILEDA)) W:'SILENT !!,"Object |",OBJNM,"| is not active.",! D:'SILENT PAUSE^TIUFXHLX D SET("XI")
"RTN","TIUFLX",32,0)
XCHEX I $D(DTOUT) S VALMQUIT=1
"RTN","TIUFLX",33,0)
 Q
"RTN","TIUFLX",34,0)
 ;
"RTN","TIUFLX",35,0)
SET(LETTER) ; Set TIUFCK("X"), TIUFCK("XI"), TIUFCK
"RTN","TIUFLX",36,0)
 I LETTER="X" S TIUFCK("X")="Bad Object in Boilerplate Text.",TIUFCK("X1")="For details, select Boilerplate Text and TRY again."
"RTN","TIUFLX",37,0)
 I LETTER="XI" S TIUFCK("XI")="Boilerplate Text has inactive object.",TIUFCK("XI1")="For details, select Boilerplate Text and TRY again."
"RTN","TIUFLX",38,0)
 S TIUFCK=0_U_"Bad Object in Boilerplate Text." ;Add Items uses this msg; overwrites more explicit object msgs.
"RTN","TIUFLX",39,0)
 Q
"RTN","TIUFLX",40,0)
 ;
"RTN","TIUFLX",41,0)
DCHECK(FILEDA,SILENT) ; Does XCHECK for FILEDA descendants
"RTN","TIUFLX",42,0)
 N TIUFITEM,TIUFI,MISSITEM,ITENDA,IFILEDA
"RTN","TIUFLX",43,0)
 S MISSITEM=$$MISSITEM^TIUFLF4(FILEDA),SILENT=+$G(SILENT)
"RTN","TIUFLX",44,0)
 I MISSITEM W !!,"Corrupt Database: File Entry "_FILEDA_" Has Nonexistent Item "_MISSITEM_" ; See IRM",! D PAUSE^TIUFXHLX G DCHEX
"RTN","TIUFLX",45,0)
 D ITEMS^TIUFLT(FILEDA)
"RTN","TIUFLX",46,0)
 S TIUFI=0
"RTN","TIUFLX",47,0)
 F  S TIUFI=$O(TIUFITEM(TIUFI)) Q:'TIUFI  D
"RTN","TIUFLX",48,0)
 . S ITENDA=$P(TIUFITEM(TIUFI),U,2)
"RTN","TIUFLX",49,0)
 . S IFILEDA=+$G(^TIU(8925.1,FILEDA,10,+ITENDA,0))
"RTN","TIUFLX",50,0)
 . K DIRUT D XCHECK(IFILEDA,SILENT) Q:$D(DIRUT)  D DCHECK(IFILEDA,SILENT)
"RTN","TIUFLX",51,0)
DCHEX Q
"RTN","TIUFLX",52,0)
 ;
"RTN","TIUFPR")
0^63^B21943868
"RTN","TIUFPR",1,0)
TIUFPR ;SLC/MAM - Action Print List ;;7/4/97 9:00pm
"RTN","TIUFPR",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFPR",3,0)
 ;
"RTN","TIUFPR",4,0)
CAPTION(RMSUFFIX) ; -- set up caption line of header
"RTN","TIUFPR",5,0)
 N X,COL,FLD
"RTN","TIUFPR",6,0)
 S $P(X," ",TIUF("RM"_RMSUFFIX)+1)=""
"RTN","TIUFPR",7,0)
 S COL="" F  S COL=$O(VALMDDF(COL)) Q:COL=""  S FLD=VALMDDF(COL) D
"RTN","TIUFPR",8,0)
 .S X=$$SETSTR^VALM1($P(FLD,U,4),X,+$P(FLD,U,2),$S($L($P(FLD,U,4))<$P(FLD,U,3):$L($P(FLD,U,4)),1:+$P(FLD,U,3)))
"RTN","TIUFPR",9,0)
 Q X
"RTN","TIUFPR",10,0)
 ;
"RTN","TIUFPR",11,0)
TBAR(RMSUFFIX) ; -- print caption/top bar
"RTN","TIUFPR",12,0)
 ; Needs TIUFWD,TIUFCAP,RMSUFFIX
"RTN","TIUFPR",13,0)
 N X
"RTN","TIUFPR",14,0)
 D CRT(0,2)
"RTN","TIUFPR",15,0)
 S TIUFCAP=" "_$E(TIUFCAP,2,TIUF("RM"_RMSUFFIX))
"RTN","TIUFPR",16,0)
 S X=$E(TIUFCAP,1,VALM("FIXED"))_$E(TIUFCAP,VALMLFT,VALMLFT+TIUFWD-1-VALM("FIXED"))
"RTN","TIUFPR",17,0)
 W:$G(TIUFSTMP)'="D" ! W X
"RTN","TIUFPR",18,0)
 Q
"RTN","TIUFPR",19,0)
 ;
"RTN","TIUFPR",20,0)
CRT(DX,DY) ;
"RTN","TIUFPR",21,0)
 I DX'<0,DY'<0,$E(IOST,1,2)="C-" W $C(13) X IOXY
"RTN","TIUFPR",22,0)
 Q
"RTN","TIUFPR",23,0)
 ;
"RTN","TIUFPR",24,0)
PRTL ; Action Print List. Prints whole list of items, but if Template permits right/left scroll, prints only the present right/left portion of each item.
"RTN","TIUFPR",25,0)
 N DIR,DA,X,Y,TIUFANS,TIUFAR,TIUFCAP,RMSUFFIX,WHO,DTOUT,DIRUT,DIROUT
"RTN","TIUFPR",26,0)
 S WHO=$S(TIUFWHO="N":"M",1:TIUFWHO)
"RTN","TIUFPR",27,0)
 S TIUFAR=$S($G(TIUFSTMP)="D":"^TMP(""TIUF3"",$J)",$G(TIUFSTMP)="T":"^TMP(""TIUF2"",$J)",1:"^TMP(""TIUF1"",$J)")
"RTN","TIUFPR",28,0)
 S RMSUFFIX=$S($D(TIUFSTMP):TIUFSTMP,1:TIUFTMPL),RMSUFFIX=RMSUFFIX_$S("TD"'[RMSUFFIX:WHO,1:"")
"RTN","TIUFPR",29,0)
 S TIUFCAP=$$CAPTION(RMSUFFIX)
"RTN","TIUFPR",30,0)
 D:VALMCC FULL^VALM1
"RTN","TIUFPR",31,0)
 S DIR("?",1)="You can print only those columns that appear on this screen, or you can print"
"RTN","TIUFPR",32,0)
 S DIR("?")="ALL columns including those you see by scrolling to the right"
"RTN","TIUFPR",33,0)
 D  I $D(DIRUT) G PRTLX
"RTN","TIUFPR",34,0)
 . K DIRUT I $G(TIUFSTMP)="D" S TIUFANS=1 Q
"RTN","TIUFPR",35,0)
 . S DIR(0)="Y",DIR("A")=$S($G(TIUFSTMP)="":"Print Name and Type Only",1:"Print Item and Sequence Only"),DIR("B")="YES"
"RTN","TIUFPR",36,0)
 . I $G(TIUFSTMP)="",VALMLFT=49 D ^DIR S TIUFANS=Y Q
"RTN","TIUFPR",37,0)
 . I $G(TIUFSTMP)="T",VALMLFT=32 D ^DIR S TIUFANS=Y Q
"RTN","TIUFPR",38,0)
 . S TIUFANS=1
"RTN","TIUFPR",39,0)
 S %ZIS="Q" D ^%ZIS I POP G PRTLX
"RTN","TIUFPR",40,0)
 I '$D(IO("Q")),IO=IO(0) D CLEAR^VALM1 S X=0 X ^%ZOSF("RM")
"RTN","TIUFPR",41,0)
 I '$D(IO("Q")) G PRTL1
"RTN","TIUFPR",42,0)
 S ZTRTN="PRTL1^TIUFPR",ZTIO=ION,ZTDESC="TIUF Print List -- List Manager Action"
"RTN","TIUFPR",43,0)
 D SAVE,^%ZTLOAD G PRTLX
"RTN","TIUFPR",44,0)
 ;
"RTN","TIUFPR",45,0)
PRTL1 ;
"RTN","TIUFPR",46,0)
 N TIUFWD,TIUFPGE,TIUFLNS,TIUFHDR,NOSCRNS,NOPGES,TIUFOFPG,TIUFJ,FIRST,LAST,TIUFESC
"RTN","TIUFPR",47,0)
 S TIUFWD=IOM,TIUFPGE=1,TIUFLNS=IOSL-6
"RTN","TIUFPR",48,0)
 S TIUFHDR=VALMHDR(1),TIUFESC=0
"RTN","TIUFPR",49,0)
 I TIUFANS S NOSCRNS=1
"RTN","TIUFPR",50,0)
 E  S NOSCRNS=$S($G(TIUFSTMP)="T":2,1:4)
"RTN","TIUFPR",51,0)
 S NOPGES=$$PAGE(VALMCNT,TIUFLNS),TIUFOFPG=NOPGES*NOSCRNS
"RTN","TIUFPR",52,0)
 U IO
"RTN","TIUFPR",53,0)
 F TIUFJ=1:1:NOPGES S FIRST=TIUFLNS*(TIUFJ-1)+1,LAST=FIRST+TIUFLNS-1 D COLUMNS(FIRST,LAST,NOSCRNS,.TIUFPGE,RMSUFFIX) Q:TIUFESC
"RTN","TIUFPR",54,0)
PRTLX S VALMBCK="R" D:'$D(ZTQUEUED) ^%ZISC D TERM S X=0 X ^%ZOSF("RM")
"RTN","TIUFPR",55,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","TIUFPR",56,0)
 I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFPR",57,0)
 Q
"RTN","TIUFPR",58,0)
 ;
"RTN","TIUFPR",59,0)
TERM ; -- set up term characteristics
"RTN","TIUFPR",60,0)
 D HOME^%ZIS
"RTN","TIUFPR",61,0)
 S X="IORVON;IORVOFF;IOIL;IOSTBM;IOSC;IORC;IOEDEOP;IOINHI;IOINORM;IOUON;IOUOFF;IOBON;IOBOFF;IOSGR0" D ENDR^%ZISS
"RTN","TIUFPR",62,0)
 Q
"RTN","TIUFPR",63,0)
 ;
"RTN","TIUFPR",64,0)
COLUMNS(FIRST,LAST,NOSCRNS,TIUFPAGE,RMSUFFIX) ; Writes columns for LM entries FIRST through LAST;
"RTN","TIUFPR",65,0)
 ; Returns the display back to far left before quitting.
"RTN","TIUFPR",66,0)
 ; NOSCRNS = Number of (left/right) screens to be printed (depends on LM Template Right Margin) and on users choice to print all or only first left/right screen.
"RTN","TIUFPR",67,0)
 N TIUFI,LINENO,TEXT
"RTN","TIUFPR",68,0)
 ;TIUFESC is newed in PRTL; DON'T new it here.
"RTN","TIUFPR",69,0)
 S TIUFESC=0
"RTN","TIUFPR",70,0)
 F TIUFI=1:1:NOSCRNS D  Q:TIUFESC
"RTN","TIUFPR",71,0)
 . D HDR,TBAR(RMSUFFIX)
"RTN","TIUFPR",72,0)
 . F LINENO=FIRST:1:LAST Q:LINENO>VALMCNT  Q:TIUFESC  S TEXT=$$EXTRACT($G(@TIUFAR@(LINENO,0))) W !,TEXT
"RTN","TIUFPR",73,0)
 . D FTR Q:TIUFESC  D:NOSCRNS>1 RIGHT^TIUFL1("0^0^PL") S TIUFPGE=TIUFPGE+1
"RTN","TIUFPR",74,0)
 . Q
"RTN","TIUFPR",75,0)
 D:NOSCRNS>1 LEFT^TIUFL1("0^0^PL")
"RTN","TIUFPR",76,0)
 Q
"RTN","TIUFPR",77,0)
 ;
"RTN","TIUFPR",78,0)
EXTRACT(X) ; -- extract string
"RTN","TIUFPR",79,0)
 ; Requires  TIUFWD
"RTN","TIUFPR",80,0)
 Q $S(X="":X,1:$E($E(X,1,+VALM("FIXED"))_$E(X,VALMLFT,VALMLFT+TIUFWD-1-VALM("FIXED"))_$J("",TIUFWD),1,TIUFWD))
"RTN","TIUFPR",81,0)
 ;
"RTN","TIUFPR",82,0)
HDR ; -- prt/display header
"RTN","TIUFPR",83,0)
 ; Requires TIUFHDR, TIUFWD, TIUFPGE, TIUFIOFPG, TIUFAR, TITLE
"RTN","TIUFPR",84,0)
 N X,I,DX,DY,TITLE
"RTN","TIUFPR",85,0)
 ; -- prt hdr line
"RTN","TIUFPR",86,0)
 W @IOF
"RTN","TIUFPR",87,0)
 I $E(IOST,1,2)="C-" S DX=0,DY=0 X IOXY ; -- position cursor
"RTN","TIUFPR",88,0)
 S TITLE=$S('$D(VALM("TITLE")):$E($P(TIUFNOD0,U),1,30),1:VALM("TITLE"))
"RTN","TIUFPR",89,0)
 W $J(" ",30-$L(TITLE))
"RTN","TIUFPR",90,0)
 I $E(IOST,1,2)="C-" W $C(13) S DX=30,DY=0 X IOXY ; -- position cursor
"RTN","TIUFPR",91,0)
 W $J("",((TIUFWD-80)/2)),$$MIXED^TIULS($$NOW^TIULO),$J("",10+((TIUFWD-80)/2)),"Page: ",$J(TIUFPGE,4)," of ",$J(TIUFOFPG,4)
"RTN","TIUFPR",92,0)
 W !,TIUFHDR,!
"RTN","TIUFPR",93,0)
 Q
"RTN","TIUFPR",94,0)
 ;
"RTN","TIUFPR",95,0)
FTR ; -- footer to print
"RTN","TIUFPR",96,0)
 N PAUSEANS
"RTN","TIUFPR",97,0)
 S TIUFESC=0
"RTN","TIUFPR",98,0)
 I $E(IOST,1,2)="C-" D XPAUSE(.PAUSEANS) S TIUFESC='PAUSEANS
"RTN","TIUFPR",99,0)
 Q
"RTN","TIUFPR",100,0)
 ;
"RTN","TIUFPR",101,0)
XPAUSE(Y) ; Pause with ^ to exit; omits carriage return that scrolls top line off
"RTN","TIUFPR",102,0)
 N DIR,X,DA
"RTN","TIUFPR",103,0)
 W ! S DIR(0)="E" D ^DIR
"RTN","TIUFPR",104,0)
 Q
"RTN","TIUFPR",105,0)
 ;
"RTN","TIUFPR",106,0)
PAGE(BEG,LINES) ; -- calc page #
"RTN","TIUFPR",107,0)
 ; Requires TIUFAR
"RTN","TIUFPR",108,0)
 S BEG=$S($D(@TIUFAR@(BEG,0)):BEG,1:0)
"RTN","TIUFPR",109,0)
 Q (BEG\LINES)+((BEG#LINES)>0)
"RTN","TIUFPR",110,0)
 ;
"RTN","TIUFPR",111,0)
SAVE ; -- save to queue for PRTL
"RTN","TIUFPR",112,0)
 F X="TIUFSTMP","TIUFTMPL","TIUFXNOD","VALMDDF","TIUFWD","TIUF(","VALM(""FIXED"")","VALMLFT","VALMWD","VALMCNT","VALMHDR(","TIUFWHO","TIUFANS","TIUFCAP","RMSUFFIX","VALM(""TITLE"")" S ZTSAVE(X)=""
"RTN","TIUFPR",113,0)
 ;F X="VALMLFT","TIUFPGE","TIUFWD","VALMCNT","TIUFHDR(","TIUF(" S ZTSAVE(X)=""
"RTN","TIUFPR",114,0)
 ;F X="TIUFAR",$S($E(TIUFAR,$L(TIUFAR))=")":$E(TIUFAR,1,$L(TIUFAR)-1)_",",1:TIUFAR_"(") S ZTSAVE(X)=""
"RTN","TIUFPR",115,0)
 F X="TIUFAR",$E(TIUFAR,1,$L(TIUFAR)-1)_"," S ZTSAVE(X)=""
"RTN","TIUFPR",116,0)
 Q
"RTN","TIUFPR",117,0)
 ;
"RTN","TIUFT")
0^64^B36716887
"RTN","TIUFT",1,0)
TIUFT ; SLC/MAM - LM Template T (Items) INIT, Action Add Items ;4/23/97 14:02
"RTN","TIUFT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFT",3,0)
 ;; ;
"RTN","TIUFT",4,0)
HDR ; -- header code
"RTN","TIUFT",5,0)
 ; Requires Array TIUFNOD0.
"RTN","TIUFT",6,0)
 N TYPE,NAME
"RTN","TIUFT",7,0)
 S NAME=$P(TIUFNOD0,U)
"RTN","TIUFT",8,0)
 I $L(NAME)>60 S TYPE=$P(TIUFNOD0,U,4) S:TYPE="DOC" TYPE="TL" G SETHDR
"RTN","TIUFT",9,0)
 S TYPE=$$MIXED^TIULS(TIUFNOD0("TYPE"))
"RTN","TIUFT",10,0)
SETHDR I TYPE'="" S TYPE=TYPE_" "
"RTN","TIUFT",11,0)
 S VALMHDR(1)=$$CENTER^TIUFL("Items for "_TYPE_NAME,79)
"RTN","TIUFT",12,0)
HDRX Q
"RTN","TIUFT",13,0)
 ;
"RTN","TIUFT",14,0)
INIT ; -- init variables and list array; Also Update.
"RTN","TIUFT",15,0)
 ; Requires TIUFSTMP as set in EDITEMS^TIUFD2.
"RTN","TIUFT",16,0)
 ; Requires CURRENT array TIUFINFO
"RTN","TIUFT",17,0)
 ;as set in EDVIEW^TIUFHA, updated (if Template A has changed) 
"RTN","TIUFT",18,0)
 ;in AUPDATE^TIUFLA1.
"RTN","TIUFT",19,0)
 ;WARNING: +TIUFINFO may = 0!
"RTN","TIUFT",20,0)
 N LINENO,FILEDA
"RTN","TIUFT",21,0)
 K ^TMP("TIUF2",$J),^TMP("TIUF2IDX",$J)
"RTN","TIUFT",22,0)
 D CLEAN^VALM10
"RTN","TIUFT",23,0)
 S FILEDA=TIUFINFO("FILEDA"),VALMCNT=0
"RTN","TIUFT",24,0)
 I '$O(^TIU(8925.1,FILEDA,10,0)) D  G INITX
"RTN","TIUFT",25,0)
 . S ^TMP("TIUF2",$J,1,0)=""
"RTN","TIUFT",26,0)
 . S ^TMP("TIUF2",$J,2,0)="Entry has no items.",VALMCNT=2
"RTN","TIUFT",27,0)
 . Q
"RTN","TIUFT",28,0)
 S LINENO=0
"RTN","TIUFT",29,0)
 ; EDit Items checks item existence, so we know items exist in file:
"RTN","TIUFT",30,0)
 D BUFITEMS^TIUFLT("T",.TIUFINFO,.LINENO) G:$D(DTOUT) INITX
"RTN","TIUFT",31,0)
 D UPDATE^TIUFLLM1("T",LINENO,0) S VALMCNT=VALMCNT+LINENO
"RTN","TIUFT",32,0)
INITX I $D(DTOUT) S VALMQUIT=1
"RTN","TIUFT",33,0)
 Q
"RTN","TIUFT",34,0)
 ;
"RTN","TIUFT",35,0)
EXIT ; -- exit code for LM Template T
"RTN","TIUFT",36,0)
 K ^TMP("TIUF2",$J),^TMP("TIUFB",$J),^TMP("TIUF2IDX",$J),^TMP("TIUFBIDX",$J)
"RTN","TIUFT",37,0)
 Q
"RTN","TIUFT",38,0)
 ;
"RTN","TIUFT",39,0)
ADD ; Template T (Items) Action Add Items
"RTN","TIUFT",40,0)
 ; Adds new or existing Docmt Defs to parent entry as items.
"RTN","TIUFT",41,0)
 ; Updates Template H or A and D as well as Item Template I.
"RTN","TIUFT",42,0)
 ; Requires CURRENT arrays TIUFINFO, TIUFNOD0, CURRENT variable TUIFVCN1 
"RTN","TIUFT",43,0)
 ;as set in EDVIEW^TIUFHA, updated (if Template A has changed) 
"RTN","TIUFT",44,0)
 ;in AUPDATE^TIUFLA1, or (if Template H has changed) in UPDATE^TIUFLLM1.
"RTN","TIUFT",45,0)
 ;WARNING: +TIUFINFO may = 0 if Template A has changed!
"RTN","TIUFT",46,0)
 ; Requires TIUFTMPL, TIUFSTMP.
"RTN","TIUFT",47,0)
 ; Requires TIUFWHO, set in Options TIUF/A/C/H EDIT/SORT/CREATE DDEFS CLIN/MGR/NATL.
"RTN","TIUFT",48,0)
 ; If TIUFTMPL ="A", Requires TIUFATTR, TIUFAVAL as set in protocols TIUF SORT BY...
"RTN","TIUFT",49,0)
 N FILEDA,NEWOR,ADDFLAG,DIC,DLAYGO,X,Y,NFILEDA,NEWFLAG,NEWSTAT
"RTN","TIUFT",50,0)
 N MSG2,MSG,MSG1,TENDA,DA,DIE,DR,CFILEDA,LINENO,DTOUT,DIRUT,DIROUT
"RTN","TIUFT",51,0)
 N CNTCHNG,FIELDS,DIK,TIUFOUT1,EXITFLG,TIUFXNOD,TIUFY,TIUFXHLX
"RTN","TIUFT",52,0)
 N NNODE0,TIUFTMSG,TIUFTLST,TIUFIMSG,SEQUENCE,SUBS
"RTN","TIUFT",53,0)
 S FILEDA=TIUFINFO("FILEDA"),TIUFXNOD=$G(XQORNOD(0))
"RTN","TIUFT",54,0)
 S VALMBCK=""
"RTN","TIUFT",55,0)
 I $P(TIUFNOD0,U,13),TIUFWHO'="N",$P(TIUFNOD0,U,4)="DOC"!($P(TIUFNOD0,U,4)="CO") W !!," Parent is National, of Type TL or CO; Can't add or delete Items" D PAUSE^TIUFXHLX G ADDX
"RTN","TIUFT",56,0)
 S (ADDFLAG,TIUFOUT1)=0
"RTN","TIUFT",57,0)
 ; Can't avoid redisplay since may have asked for help or answered no, not adding, in which case must erase and redisplay.
"RTN","TIUFT",58,0)
 F  D  L -^TIU(8925.1,+$G(NFILEDA)) G:$D(DTOUT) ADDX S VALMSG=$$VMSG^TIUFL D RE^VALM4,RESET^TIUFXHLX Q:TIUFOUT1
"RTN","TIUFT",59,0)
 . K MSG2,TIUFIMSG
"RTN","TIUFT",60,0)
 . D FULL^VALM1 ;displays list before does XE Help, so must full here
"RTN","TIUFT",61,0)
 . S DIC("A")="Enter Document Definition Name to add as Item: "
"RTN","TIUFT",62,0)
 . S DIC=8925.1,DIC(0)="AELQ"
"RTN","TIUFT",63,0)
 . S DIC("S")=$$NAMSCRN^TIUFLF2(FILEDA),DLAYGO=8925.1
"RTN","TIUFT",64,0)
 . D ^DIC S TIUFY=Y
"RTN","TIUFT",65,0)
 . I TIUFY=-1 S TIUFOUT1=1 Q
"RTN","TIUFT",66,0)
 . S NFILEDA=+TIUFY,NEWFLAG=$P(TIUFY,U,3),NNODE0=^TIU(8925.1,NFILEDA,0)
"RTN","TIUFT",67,0)
 . L +^TIU(8925.1,NFILEDA):1 I '$T W !!,"Another user is editing item.  Please try later.",! D PAUSE^TIUFXHLX N DA,DIK S DA=NFILEDA,DIK="^TIU(8925.1," D:NEWFLAG ^DIK Q
"RTN","TIUFT",68,0)
 . I $$DUPITEM^TIUFLF7($P(TIUFY,U,2),FILEDA) W !!,"Please enter a different Name; Parent already has Item with that Name",! D PAUSE^TIUFXHLX Q
"RTN","TIUFT",69,0)
 . D TYPELIST^TIUFLF7($P(NNODE0,U),NFILEDA,FILEDA,.TIUFTMSG,.TIUFTLST) Q:$D(DTOUT)
"RTN","TIUFT",70,0)
 . I $D(TIUFTMSG(1)),'$D(TIUFTMSG(2)) W !!,TIUFTMSG(1),!,"Can't add Item",! D PAUSE^TIUFXHLX Q
"RTN","TIUFT",71,0)
 . ; TIUFIMSG gets set in NAMSCRN
"RTN","TIUFT",72,0)
 . I $D(TIUFIMSG) W !!,TIUFIMSG,! D PAUSE^TIUFXHLX Q
"RTN","TIUFT",73,0)
 . I TIUFTLST="" W !!," Please enter a different Name; File already has entries of every permitted Type",!,"with that Name",! D PAUSE^TIUFXHLX Q
"RTN","TIUFT",74,0)
 . I NEWFLAG D STUFFLDS^TIUFLF4(NFILEDA,FILEDA) S NNODE0=^TIU(8925.1,NFILEDA,0)
"RTN","TIUFT",75,0)
 . W !!," Editing prospective Item:",!
"RTN","TIUFT",76,0)
 . S EXITFLG=0
"RTN","TIUFT",77,0)
 . I NEWFLAG S FIELDS=";.05;.06;" S:$P(NNODE0,U,4)="" FIELDS=";.04"_FIELDS S:TIUFWHO="N" FIELDS=FIELDS_".13;" D ASKFLDS^TIUFLF1(NFILEDA,FIELDS,FILEDA,.NEWSTAT,.EXITFLG) Q:$D(DTOUT)
"RTN","TIUFT",78,0)
 . D OWNCHEC^TIUFLF8(NFILEDA)
"RTN","TIUFT",79,0)
 . N TIUFCK,TIUFDCK
"RTN","TIUFT",80,0)
 . D CHECK^TIUFLF3(NFILEDA,FILEDA) D  I $D(MSG2) S MSG=MSG1_MSG2 W !!,MSG,! D PAUSE^TIUFXHLX N DA,DIK S DA=NFILEDA,DIK="^TIU(8925.1," D:NEWFLAG ^DIK Q:$D(DTOUT)
"RTN","TIUFT",81,0)
 . . F SUBS="S","X","X1","XI","XI1","B","O","J","JN","JA","JP","V","E","R","H","N","G","D" K TIUFCK(SUBS)
"RTN","TIUFT",82,0)
 . . Q:$D(TIUFCK)<11
"RTN","TIUFT",83,0)
 . . S MSG1="Can't Add Item: "
"RTN","TIUFT",84,0)
 . . I $D(TIUFCK)>10 S MSG2=$P(TIUFCK,U,2) Q
"RTN","TIUFT",85,0)
 . . I 'TIUFDCK S MSG2=$P(TIUFDCK,U,2) Q
"RTN","TIUFT",86,0)
 . . S NNODE0=^TIU(8925.1,NFILEDA,0)
"RTN","TIUFT",87,0)
 . . I TIUFCK,$O(^TIU(8925.1,"AD",NFILEDA,0)),'$P(NNODE0,U,10) S MSG2="Item Aready has Parent" Q
"RTN","TIUFT",88,0)
 . . I TIUFCK,$D(^TIU(8925.1,FILEDA,10,"B",NFILEDA)) S MSG2="Entry Already has Item"
"RTN","TIUFT",89,0)
 . Q:$D(MSG2)
"RTN","TIUFT",90,0)
 . D ADDTEN^TIUFLF4(FILEDA,NFILEDA,NNODE0,.TENDA)
"RTN","TIUFT",91,0)
 . I TENDA="" W " ?? Couldn't be added! " D PAUSE^TIUFXHLX Q
"RTN","TIUFT",92,0)
 . I TIUFTMPL="A",$E(TIUFATTR)="P" S TIUFREDO=1 ; Adding item affects parentage globally.
"RTN","TIUFT",93,0)
 . I 'EXITFLG,'$D(DTOUT) S FIELDS=";.07;" D ASKFLDS^TIUFLF1(NFILEDA,FIELDS,FILEDA,.NEWSTAT,.EXITFLG) Q:$D(DTOUT)
"RTN","TIUFT",94,0)
 . I 'EXITFLG,'$D(DTOUT) D  L -^TIU(8925.1,FILEDA,10,TENDA) Q:$D(DTOUT)
"RTN","TIUFT",95,0)
 . . L +^TIU(8925.1,FILEDA,10,TENDA):1 I '$T W !!,"Another user is editing item.  Please edit later.",! H 2 Q
"RTN","TIUFT",96,0)
 . . S DA(1)=FILEDA,DIE="^TIU(8925.1,DA(1),10,",DA=TENDA
"RTN","TIUFT",97,0)
 . . S DR="3" D ^DIE I $D(Y)!$D(DTOUT) Q
"RTN","TIUFT",98,0)
 . . I $P(TIUFNOD0,U,4)="CL" S SEQUENCE=$P(^TIU(8925.1,FILEDA,10,TENDA,0),U,3),DR="2///^S X=SEQUENCE" I $L(SEQUENCE)<5,$L(SEQUENCE) D ^DIE ;Stuff mnem with seq value
"RTN","TIUFT",99,0)
 . . S DR=$S($P(TIUFNOD0,U,4)="CL":"2;4",1:4) D ^DIE
"RTN","TIUFT",100,0)
 . S MSG=" Item Added" W !!,MSG,! H 1
"RTN","TIUFT",101,0)
 . ;      Update Template T with Item:
"RTN","TIUFT",102,0)
 . D INIT Q:$D(DTOUT)
"RTN","TIUFT",103,0)
 . S LINENO=$O(^TMP("TIUF2IDX",$J,"DAF",NFILEDA,""))
"RTN","TIUFT",104,0)
 . I LINENO<VALMBG!(LINENO>(VALMBG+VALM("LINES")-1)) S VALMBG=LINENO
"RTN","TIUFT",105,0)
 . S ADDFLAG=1
"RTN","TIUFT",106,0)
 . ;  Update Template A with item (may be new, may be no longer Orphan):
"RTN","TIUFT",107,0)
 . I TIUFTMPL="A" D
"RTN","TIUFT",108,0)
 . . D AUPDATE^TIUFLA1(NNODE0,NFILEDA,.CNTCHNG) S:CNTCHNG TIUFVCN1=TIUFVCN1+1 ;CNTCHNG is Count Change
"RTN","TIUFT",109,0)
 G:'ADDFLAG ADDX
"RTN","TIUFT",110,0)
 D NODE0ARR^TIUFLF(FILEDA,.TIUFNOD0) G:$D(DTOUT) ADDX
"RTN","TIUFT",111,0)
 ;      Template D is updated when return to it from T
"RTN","TIUFT",112,0)
 ;   Template H doesn't need update: will just reexpand when leave items.
"RTN","TIUFT",113,0)
ADDX ;
"RTN","TIUFT",114,0)
 I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFT",115,0)
 Q
"RTN","TIUFT",116,0)
 ;
"RTN","TIUFT1")
0^65^B18849085
"RTN","TIUFT1",1,0)
TIUFT1 ; SLC/MAM - LM Template I (Items) Actions Delete, Edit/All, Mnemonic, Sequence, Menu Text ;4/17/97  11:02
"RTN","TIUFT1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFT1",3,0)
 ;
"RTN","TIUFT1",4,0)
EDDEL ; Template T (Items for Entry) Actions DELETE, EDIT/ ALL, MNEMONIC, SEQUENCE, MENU TEXT
"RTN","TIUFT1",5,0)
 ; Action Delete Items deletes item as an item only, NOT as a file entry.
"RTN","TIUFT1",6,0)
 ; No need to update original screen since entry collapsed, will reexpand
"RTN","TIUFT1",7,0)
 ; Requires arrays TIUFINFO, TIUFNOD0
"RTN","TIUFT1",8,0)
 N OLDLNO,SHIFT,TIUFDA10,LINENO,NODE0,NAME,INFO,TIUFERR,QUIT,TENDA,MSG
"RTN","TIUFT1",9,0)
 N DA,DIE,DR,DIR,DIK,X,Y,FILEDA,IFILEDA,DDEFUSED,INODE0,ITYPE,TIUFFULL
"RTN","TIUFT1",10,0)
 N ISTATUS,TIUFY,INATLFLG,TIUFXNOD,ISHARED,DTOUT,DIRUT,DIROUT
"RTN","TIUFT1",11,0)
 S TIUFXNOD=$G(XQORNOD(0)),VALMBCK="",TIUFFULL=0
"RTN","TIUFT1",12,0)
 S FILEDA=TIUFINFO("FILEDA")
"RTN","TIUFT1",13,0)
 I $P(TIUFXNOD,U,3)["Delete",$P(TIUFNOD0,U,13),TIUFWHO'="N",$P(TIUFNOD0,U,4)="DOC"!($P(TIUFNOD0,U,4)="CO") W !!," Parent is National, of Type TL or CO; Can't add or delete Items" D PAUSE^TIUFXHLX G EDDEX
"RTN","TIUFT1",14,0)
 L +^TIU(8925.1,FILEDA):1 I '$T W !!," Another user is editing this entry; Please try later",! H 2 G EDDEX
"RTN","TIUFT1",15,0)
 D EN^VALM2(TIUFXNOD,"O")
"RTN","TIUFT1",16,0)
 I '$O(VALMY(0)) G EDDEX
"RTN","TIUFT1",17,0)
 S OLDLNO=0,VALMBCK="R"
"RTN","TIUFT1",18,0)
 F  S OLDLNO=$O(VALMY(OLDLNO)) Q:'OLDLNO  D
"RTN","TIUFT1",19,0)
 . S TIUFDA10(OLDLNO)=$P(^TMP("TIUF2IDX",$J,OLDLNO),U,6)
"RTN","TIUFT1",20,0)
 . Q
"RTN","TIUFT1",21,0)
 S (OLDLNO,QUIT)=0,DA(1)=FILEDA
"RTN","TIUFT1",22,0)
 ; Delete Items
"RTN","TIUFT1",23,0)
 I $P(TIUFXNOD,U,3)["Delete" D  G EDDEX
"RTN","TIUFT1",24,0)
 . S DIR(0)="Y",DIR("A")="Sure you want to delete items",DIR("B")="NO"
"RTN","TIUFT1",25,0)
 . S DIR("?",1)="Delete on Items Screen deletes entries as items from the parent ONLY; they are"
"RTN","TIUFT1",26,0)
 . S DIR("?",2)="NOT deleted from the file itself.  For more, enter ?? at the Select Action"
"RTN","TIUFT1",27,0)
 . S DIR("?")="prompt and see DELETE."
"RTN","TIUFT1",28,0)
 . D ^DIR S TIUFY=Y K DIR,X,Y I TIUFY'=1 S VALMBCK="" W !!,"NOT Deleted!",! H 1 Q
"RTN","TIUFT1",29,0)
 . F  S OLDLNO=$O(TIUFDA10(OLDLNO)) Q:'OLDLNO  D  Q:$D(DTOUT)
"RTN","TIUFT1",30,0)
 . . S TENDA=TIUFDA10(OLDLNO)
"RTN","TIUFT1",31,0)
 . . S IFILEDA=+^TIU(8925.1,DA(1),10,TENDA,0)
"RTN","TIUFT1",32,0)
 . . S INODE0=$G(^TIU(8925.1,IFILEDA,0)),ISHARED=+$P(INODE0,U,10)
"RTN","TIUFT1",33,0)
 . . I INODE0="" S MSG=" Entry "_OLDLNO_" does not exist in File; See IRM" W !!,MSG,! D PAUSE^TIUFXHLX Q
"RTN","TIUFT1",34,0)
 . . S INATLFLG=+$P(INODE0,U,13),ITYPE=$P(INODE0,U,4),ISTATUS=$$STATWORD^TIUFLF5($P(INODE0,U,7)) ;e.g INACTIVE
"RTN","TIUFT1",35,0)
 . . ;I INATLFLG,'ISHARED,TIUFWHO'="N" S MSG=" Entry "_OLDLNO_" can't be deleted from parent: Entry is National" W !!,MSG,! D PAUSE^TIUFXHLX Q
"RTN","TIUFT1",36,0)
 . . ; If not CO, don't permit Item delete if Used by Docmts: MAM
"RTN","TIUFT1",37,0)
 . . I ITYPE'="CO" S DDEFUSED=$$DDEFUSED^TIUFLF(IFILEDA) I DDEFUSED="YES" S MSG=" Entry "_OLDLNO_" can't be deleted from parent: In Use by documents" W !!,MSG,! D PAUSE^TIUFXHLX Q
"RTN","TIUFT1",38,0)
 . . I ISTATUS'="INACTIVE" S MSG=" Entry "_OLDLNO_" can't be deleted from parent: not INACTIVE" W !!,MSG,! D PAUSE^TIUFXHLX Q
"RTN","TIUFT1",39,0)
 . . I TIUFTMPL="A",$E(TIUFATTR)="P",$$ORPHAN^TIUFLF4(FILEDA,TIUFNOD0)="NO" S TIUFREDO=1 ;orphaning items below item
"RTN","TIUFT1",40,0)
 . . S DA=TENDA,DIK="^TIU(8925.1,DA(1),10," D ^DIK
"RTN","TIUFT1",41,0)
 . . S MSG=" Entry "_OLDLNO_" Deleted from parent" W !!,MSG,! H 1
"RTN","TIUFT1",42,0)
 . . S LINENO=$O(^TMP("TIUF2IDX",$J,"DA10",TENDA,0))
"RTN","TIUFT1",43,0)
 . . S SHIFT=-1
"RTN","TIUFT1",44,0)
 . . D UPDATE^TIUFLLM1("T",SHIFT,LINENO-1) S VALMCNT=VALMCNT+SHIFT
"RTN","TIUFT1",45,0)
 . . I $G(TIUFERR) S QUIT=1
"RTN","TIUFT1",46,0)
 . . ; D screen will be updated when return from T to D.
"RTN","TIUFT1",47,0)
 . . Q
"RTN","TIUFT1",48,0)
 . D NODE0ARR^TIUFLF(FILEDA,.TIUFNOD0)
"RTN","TIUFT1",49,0)
 . Q
"RTN","TIUFT1",50,0)
 ; Edit Items
"RTN","TIUFT1",51,0)
 D FULL^VALM1 S TIUFFULL=1
"RTN","TIUFT1",52,0)
 F  S OLDLNO=$O(TIUFDA10(OLDLNO)) Q:'OLDLNO!QUIT  D
"RTN","TIUFT1",53,0)
 . S QUIT=0
"RTN","TIUFT1",54,0)
 . S TENDA=TIUFDA10(OLDLNO)
"RTN","TIUFT1",55,0)
 . S LINENO=$O(^TMP("TIUF2IDX",$J,"DA10",TENDA,0))
"RTN","TIUFT1",56,0)
 . S INFO=^TMP("TIUF2IDX",$J,LINENO)
"RTN","TIUFT1",57,0)
 . S IFILEDA=$P(INFO,U,2),INODE0=$G(^TIU(8925.1,IFILEDA,0))
"RTN","TIUFT1",58,0)
 . I INODE0="" S MSG=" Item "_OLDLNO_" Not in File! See IRM." W !!,MSG,!  D PAUSE^TIUFXHLX Q
"RTN","TIUFT1",59,0)
 . S ITYPE=$P(INODE0,U,4)
"RTN","TIUFT1",60,0)
 . S MSG=" Editing Entry "_OLDLNO W !!,MSG
"RTN","TIUFT1",61,0)
 . I $P(TIUFXNOD,U,3)="Mnemonic" S DR="2"
"RTN","TIUFT1",62,0)
 . I $P(TIUFXNOD,U,3)="Sequence" S DR="3"
"RTN","TIUFT1",63,0)
 . I $P(TIUFXNOD,U,3)="Menu Text" S DR="4"
"RTN","TIUFT1",64,0)
 . I $P(TIUFXNOD,U,3)["All" S DR="3;2;4" I ITYPE'="CL",ITYPE'="DC" S DR="3;4"
"RTN","TIUFT1",65,0)
 . S DA=TENDA
"RTN","TIUFT1",66,0)
 . S DIE="^TIU(8925.1,DA(1),10," D ^DIE
"RTN","TIUFT1",67,0)
 . I $D(Y)!$D(DTOUT) S QUIT=1
"RTN","TIUFT1",68,0)
 . Q
"RTN","TIUFT1",69,0)
 G:$D(DTOUT) EDDEX
"RTN","TIUFT1",70,0)
 D INIT^TIUFT
"RTN","TIUFT1",71,0)
EDDEX I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFT1",72,0)
 L -^TIU(8925.1,+$G(FILEDA))
"RTN","TIUFT1",73,0)
 I $G(TIUFFULL) S VALMBCK="R" D RESET^TIUFXHLX
"RTN","TIUFT1",74,0)
 Q
"RTN","TIUFX")
0^206^B6971628
"RTN","TIUFX",1,0)
TIUFX ; SLC/MAM - LM Screen X (Boilerplate Text) INIT, DS/BOILTX ;10/26/95  15:35
"RTN","TIUFX",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFX",3,0)
 ;
"RTN","TIUFX",4,0)
HDR ; -- header code
"RTN","TIUFX",5,0)
 S VALMHDR(1)=$$FHDR
"RTN","TIUFX",6,0)
HDRX ;
"RTN","TIUFX",7,0)
 Q
"RTN","TIUFX",8,0)
 ;
"RTN","TIUFX",9,0)
FHDR() ; Function returns Type_Name for headers; Requires Array TIUFNOD0.
"RTN","TIUFX",10,0)
 N NAME,TYPE
"RTN","TIUFX",11,0)
 S NAME=$P(TIUFNOD0,U)
"RTN","TIUFX",12,0)
 S TYPE=$$MIXED^TIULS(TIUFNOD0("TYPE"))
"RTN","TIUFX",13,0)
 I TYPE'="" S TYPE=TYPE_" "
"RTN","TIUFX",14,0)
 Q $$CENTER^TIUFL(TYPE_NAME,79)
"RTN","TIUFX",15,0)
 ;
"RTN","TIUFX",16,0)
INIT ; -- init variables and list array
"RTN","TIUFX",17,0)
 N TEMPLATE
"RTN","TIUFX",18,0)
 K ^TMP("TIUF3",$J),^TMP("TIUF3IDX",$J)
"RTN","TIUFX",19,0)
 D CLEAN^VALM10
"RTN","TIUFX",20,0)
 S VALMCNT=0 D DSBOILTX^TIUFD(.VALMCNT)
"RTN","TIUFX",21,0)
INITX I $D(DTOUT) S VALMQUIT=1
"RTN","TIUFX",22,0)
 Q
"RTN","TIUFX",23,0)
 ;
"RTN","TIUFX",24,0)
STATUS ; Action Status for Subtemplate X Boilerplate Text
"RTN","TIUFX",25,0)
 N FILEDA,PFILEDA,FIELDS,DTOUT,DIRUT,DIROUT
"RTN","TIUFX",26,0)
 S VALMBCK=""
"RTN","TIUFX",27,0)
 S FILEDA=$P(TIUFINFO,U,2),PFILEDA=+$O(^TIU(8925.1,"AD",FILEDA,0)),FIELDS=";.07;"
"RTN","TIUFX",28,0)
 L +^TIU(8925.1,FILEDA):1 I '$T W !!," Another user is editing this entry.",! H 2 G STATX
"RTN","TIUFX",29,0)
 D ASKFLDS^TIUFLF1(FILEDA,FIELDS,PFILEDA)
"RTN","TIUFX",30,0)
 D NODE0ARR^TIUFLF(FILEDA,.TIUFNOD0) G:$D(DTOUT) STATX
"RTN","TIUFX",31,0)
STATX ;
"RTN","TIUFX",32,0)
 L -^TIU(8925.1,+$G(FILEDA))
"RTN","TIUFX",33,0)
 I $D(DTOUT) S VALMBCK="Q"
"RTN","TIUFX",34,0)
 I $G(TIUFFULL) S VALMBCK="R" D RESET^TIUFXHLX
"RTN","TIUFX",35,0)
 Q
"RTN","TIUFX",36,0)
 ;
"RTN","TIUFX",37,0)
EXIT ; -- Exit Code for LM Template X
"RTN","TIUFX",38,0)
 N NEWSTAT,NEWHASBT,CNTCHNG,LINENO
"RTN","TIUFX",39,0)
 I TIUFTMPL="A" D  ; Update line if no new status and yes new boil and Type is Title
"RTN","TIUFX",40,0)
 . S NEWSTAT=$S(TIUFNOD0("STATUS")'=TIUFXSTA:1,1:0)
"RTN","TIUFX",41,0)
 . S NEWHASBT=$S(TIUFNOD0("BOILPT")'=TIUFXBT:1,1:0)
"RTN","TIUFX",42,0)
 . I 'NEWSTAT,NEWHASBT,(TIUFNOD0("TYPE")="TITLE") D AUPDATE^TIUFLA1(TIUFNOD0,FILEDA,.CNTCHNG) S:CNTCHNG TIUFVCN1=TIUFVCN1-1 ;doesn't match.
"RTN","TIUFX",43,0)
 . I NEWSTAT!(NEWHASBT&(TIUFNOD0("TYPE")="COMPONENT")) S TIUFREDO=1 ; One new status affects status globally.  One new CO Boilerplate Text affects Has Boil globally.
"RTN","TIUFX",44,0)
 ; Update entry itself in TIUFTMPL; entry will be reexpanded when leave EV:
"RTN","TIUFX",45,0)
 I "HC"[TIUFTMPL D LINEUP^TIUFLLM1(.TIUFINFO,TIUFTMPL)
"RTN","TIUFX",46,0)
 K ^TMP("TIUF3",$J),^TMP("TIUFB",$J),^TMP("TIUF3IDX",$J),^TMP("TIUFBIDX",$J)
"RTN","TIUFX",47,0)
 Q
"RTN","TIUFXHL1")
0^195^B15366142
"RTN","TIUFXHL1",1,0)
TIUFXHL1 ;SLC/MAM - ?? XQORM Help, ? COPY Help ;;7-6-95 9:00pm
"RTN","TIUFXHL1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFXHL1",3,0)
 ;
"RTN","TIUFXHL1",4,0)
MENU ; Help for protocol TIUF CHANGE SORT MENU
"RTN","TIUFXHL1",5,0)
 W !," Enter 'S' to change the entry you want to Start the list with"
"RTN","TIUFXHL1",6,0)
 I $P(TIUFTMPA,U)'="A" W !," Enter 'V' to change the Value of the ",$P(TIUFTMPA,U,2) ;Exclude All
"RTN","TIUFXHL1",7,0)
 W !," Enter 'A' to change the sort Attribute to something other than ",$P(TIUFTMPA,U,2),!
"RTN","TIUFXHL1",8,0)
 Q
"RTN","TIUFXHL1",9,0)
ATTRIB ; Help for protocols TIUF SORT, TIUF CHANGE SORT ATTRIBUTE
"RTN","TIUFXHL1",10,0)
 I $G(TIUFXNOD)["Sort" W !
"RTN","TIUFXHL1",11,0)
 W !,"T    Type                 S    Status        P    Parentage"
"RTN","TIUFXHL1",12,0)
 W !,"O    Owner                U    In Use        A    All Docmt Defs"
"RTN","TIUFXHL1",13,0)
 I $G(TIUFXNOD)["Sort" W !
"RTN","TIUFXHL1",14,0)
 W !," Enter the Attribute you want to sort by, or enter 'A' to get All Document",!,"Definitions",!
"RTN","TIUFXHL1",15,0)
 I $G(TIUFXNOD)["Sort" W !
"RTN","TIUFXHL1",16,0)
 Q
"RTN","TIUFXHL1",17,0)
 ;
"RTN","TIUFXHL1",18,0)
OWNER ; Help for protocol TIUF SORT BY OWNER
"RTN","TIUFXHL1",19,0)
 I $G(TIUFXNOD)["Sort" W !
"RTN","TIUFXHL1",20,0)
 W !,"Choose from:"
"RTN","TIUFXHL1",21,0)
 W !,"P  Personal      C  Class       I  Individual      N  None",!
"RTN","TIUFXHL1",22,0)
 I $G(TIUFXNOD)'["Sort" D PAUSE^TIUFXHLX G:$D(DIRUT) OWNEX
"RTN","TIUFXHL1",23,0)
 W !," Enter 'P' to get entries personally owned by a particular Person"
"RTN","TIUFXHL1",24,0)
 W !," Enter 'C' to get entries owned by a particular User Class"
"RTN","TIUFXHL1",25,0)
 I $G(TIUFXNOD)'["Sort" W ! D PAUSE^TIUFXHLX G:$D(DIRUT) OWNEX
"RTN","TIUFXHL1",26,0)
 W !," Enter 'I' to get entries owned by a particular Individual, either personally OR",!,"because the Individual belongs to an Owning User Class"
"RTN","TIUFXHL1",27,0)
 W !," Enter 'N' to get entries with NO Owner.",!
"RTN","TIUFXHL1",28,0)
 I $G(TIUFXNOD)'["Sort" D PAUSE^TIUFXHLX
"RTN","TIUFXHL1",29,0)
OWNEX W !
"RTN","TIUFXHL1",30,0)
 Q
"RTN","TIUFXHL1",31,0)
 ;
"RTN","TIUFXHL1",32,0)
PARENT ; Help for protocol TIUF SORT BY PARENTAGE
"RTN","TIUFXHL1",33,0)
 I $G(TIUFXNOD)["Sort" W !
"RTN","TIUFXHL1",34,0)
 W !,"Choose from:     O   Orphan            N   NonOrphan"
"RTN","TIUFXHL1",35,0)
 I $G(TIUFXNOD)["Sort" W !
"RTN","TIUFXHL1",36,0)
 W !," Enter 'O' for Orphans, entries which don't belong to the Clinical",!,"Documents Hierarchy."
"RTN","TIUFXHL1",37,0)
 W !," Enter 'N' for NonOrphans, entries which DO belong to the Hierarchy.",!
"RTN","TIUFXHL1",38,0)
 I $G(TIUFXNOD)["Sort" W !
"RTN","TIUFXHL1",39,0)
 Q
"RTN","TIUFXHL1",40,0)
 ;
"RTN","TIUFXHL1",41,0)
USED ; Help for protocol TIUF SORT BY USED BY DOCMTS
"RTN","TIUFXHL1",42,0)
 I $G(TIUFXNOD)["Sort" W !
"RTN","TIUFXHL1",43,0)
 W !," Enter 'YES' if you want entries that are In Use by documents in the TIU",!,"Document file, i.e. that have TIU documents using them as their Document",!,"Definition.  Enter 'NO' if you want entries that are NOT In Use.",!!
"RTN","TIUFXHL1",44,0)
 Q
"RTN","TIUFXHL1",45,0)
 ;
"RTN","TIUFXHL1",46,0)
NOP ; Help for protocol TIUFHA ACTION EDIT NAME/OWNER/PNAME
"RTN","TIUFXHL1",47,0)
 W !,"Choose from: N   Name            O   Owner         P   Print Name",!
"RTN","TIUFXHL1",48,0)
 Q
"RTN","TIUFXHL1",49,0)
 ;
"RTN","TIUFXHL1",50,0)
COPY ; Help for action Copy (Activate prompt)
"RTN","TIUFXHL1",51,0)
 W !,"To determine whether the behavior has changed, compare inherited values on the"
"RTN","TIUFXHL1",52,0)
 W !,"Detailed Display for the Copy with those on the Detailed Display for the old"
"RTN","TIUFXHL1",53,0)
 W !,"Title.  Compare Upload information on the Detailed Displays for the new and old"
"RTN","TIUFXHL1",54,0)
 W !,"DOCUMENT CLASSES.  Next, compare Business Rules for the new and old DOCUMENT"
"RTN","TIUFXHL1",55,0)
 W !,"CLASSES.  This takes care of inheritance.  Then, since the copy action does NOT"
"RTN","TIUFXHL1",56,0)
 W !,"copy Business Rules, check to see what Business Rules exist for the entry the"
"RTN","TIUFXHL1",57,0)
 W !,"copy was copied FROM, and create the same rules for the COPY."
"RTN","TIUFXHL1",58,0)
 Q
"RTN","TIUFXHL1",59,0)
 ;
"RTN","TIUFXHLX")
0^66^B46158789
"RTN","TIUFXHLX",1,0)
TIUFXHLX ; SLC/MAM - Xecutable Help  PAUSE, RESET, FLDDESC(FLDNO) ;10/26/95  15:33
"RTN","TIUFXHLX",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUFXHLX",3,0)
 ;
"RTN","TIUFXHLX",4,0)
PAUSE ; Writes Press Return to Continue or ^ to exit on NEXT line without writing !'s.
"RTN","TIUFXHLX",5,0)
 N DIR,X,Y
"RTN","TIUFXHLX",6,0)
 S DIR("?")="Press the RETURN key when you have read the screen and are ready to go on"
"RTN","TIUFXHLX",7,0)
 S DIR(0)="FAO^1:1",DIR("A")="Press RETURN to continue or '^' or '^^' to exit: " D ^DIR
"RTN","TIUFXHLX",8,0)
 I X="",'$D(DTOUT) K DIRUT
"RTN","TIUFXHLX",9,0)
 Q
"RTN","TIUFXHLX",10,0)
 ;
"RTN","TIUFXHLX",11,0)
FLDHELP(FLDNO) ; Writes FLDNO Help Prompt
"RTN","TIUFXHLX",12,0)
 I $G(TIUFXNOD)["Sort" W !
"RTN","TIUFXHLX",13,0)
 D HELP^DIE(8925.1,"",FLDNO,"H")
"RTN","TIUFXHLX",14,0)
 D MSG^DIALOG("HW")
"RTN","TIUFXHLX",15,0)
 Q
"RTN","TIUFXHLX",16,0)
 ;
"RTN","TIUFXHLX",17,0)
FLDDESC(FILENO,FLDNO) ; Sets to scroll mode; Writes FLDNO Field Description to Screen
"RTN","TIUFXHLX",18,0)
 N TIUI,FLDNAME,HERE,MSG
"RTN","TIUFXHLX",19,0)
 K DIRUT
"RTN","TIUFXHLX",20,0)
 D HELP^DIE(8925.1,"",FLDNO,"D")
"RTN","TIUFXHLX",21,0)
 S FLDNAME=$S(FILENO=8925.1:$G(^TMP("TIUF",$J,FLDNO,"LABEL")),FILENO=8925.14:$G(^TMP("TIUF",$J,10,FLDNO)),FILENO=8925.11:$G(^TMP("TIUF",$J,1,FLDNO,"LABEL")),1:"")
"RTN","TIUFXHLX",22,0)
 I FLDNAME="" S FLDNAME=$G(^TMP("TIUF",$J,2,FLDNO,"LABEL"))
"RTN","TIUFXHLX",23,0)
 S FLDNAME=$P(FLDNAME,U)
"RTN","TIUFXHLX",24,0)
 I $D(TIUFTMPL) D FULL^VALM1 S TIUFFULL=1 W !
"RTN","TIUFXHLX",25,0)
 I $G(TIUFXNOD)["Sort" W !
"RTN","TIUFXHLX",26,0)
 I FLDNAME'="" W $$CENTER^TIULS("Description of "_FLDNAME),!!
"RTN","TIUFXHLX",27,0)
 D HELP^DIE(8925.1,"",FLDNO,"D")
"RTN","TIUFXHLX",28,0)
 S HERE=1 I $G(TIUFTMPL)="J",(FLDNO=.04)!(FLDNO=.07) S HERE=0
"RTN","TIUFXHLX",29,0)
 F TIUI=1:1:DIHELP S MSG=^TMP("DIHELP",$J,TIUI) D  Q:$D(DIRUT)
"RTN","TIUFXHLX",30,0)
 . I FLDNO=.04,$G(TIUFTMPL)="J",MSG["O OBJECT" S HERE=1
"RTN","TIUFXHLX",31,0)
 . I FLDNO=.07,$G(TIUFTMPL)="J",MSG["OBJECT STATUS",MSG'["OBJECT STATUS," S HERE=1
"RTN","TIUFXHLX",32,0)
 . W:HERE&$$CONTINUE MSG,!
"RTN","TIUFXHLX",33,0)
 F  Q:$Y>(IOSL-1)  W !
"RTN","TIUFXHLX",34,0)
 I '$D(DIRUT) D PAUSE
"RTN","TIUFXHLX",35,0)
FLDDX D CLEAN^DILF
"RTN","TIUFXHLX",36,0)
 Q
"RTN","TIUFXHLX",37,0)
 ;
"RTN","TIUFXHLX",38,0)
RESET ; -- reset scrolling region to bottom of screen
"RTN","TIUFXHLX",39,0)
 N DX,DY
"RTN","TIUFXHLX",40,0)
 W IOELALL
"RTN","TIUFXHLX",41,0)
 S IOTM=10,IOBM=IOSL W IOSC W @IOSTBM W IORC
"RTN","TIUFXHLX",42,0)
 S DX=0,DY=(VALM("BM")+1) X IOXY
"RTN","TIUFXHLX",43,0)
 Q
"RTN","TIUFXHLX",44,0)
 ;
"RTN","TIUFXHLX",45,0)
NAME ;XECUTABLE HELP for .01 NAME
"RTN","TIUFXHLX",46,0)
 N HELPX S HELPX=X
"RTN","TIUFXHLX",47,0)
 I $G(TIUFSTMP)="T" D  Q
"RTN","TIUFXHLX",48,0)
 . I HELPX="??" D PAUSE
"RTN","TIUFXHLX",49,0)
 . W !," Name may be a preexisting file entry OR a NEW file entry.",!
"RTN","TIUFXHLX",50,0)
 . W !," If Name already exists in the file, it must have the appropriate Type for",!
"RTN","TIUFXHLX",51,0)
 . W "the parent, must be owned by the user, must NOT already be used elsewhere",!
"RTN","TIUFXHLX",52,0)
 . W "(unless it is a Shared Component), must not have the same Name as any Item under",!
"RTN","TIUFXHLX",53,0)
 . W "the parent, and must pass Check as OK.",!
"RTN","TIUFXHLX",54,0)
 . W !," Option Add Items does not accept and does not list other Names as choices.",!
"RTN","TIUFXHLX",55,0)
 . W !," If file already has an available entry of a given name and you want to enter a",!,"new entry of that name instead, enclose it in quotation marks.",!
"RTN","TIUFXHLX",56,0)
 . I HELPX'["?" W !," Name is 3-60 characters, not starting with punctuation.",! ; One ?; No to list
"RTN","TIUFXHLX",57,0)
 . I HELPX="??" D FLDDESC(8925.1,.01)
"RTN","TIUFXHLX",58,0)
 ; Edit Basics, Add Entry, Create Entry, Name (Edit Name from front Template):
"RTN","TIUFXHLX",59,0)
 I $G(TIUFTMPL)="C",$G(TIUFSTMP)="" W !!,"You are creating a new entry of Type "_$P(TIUFXNOD,U,3)_" to hang ",!,"under "_$G(TIUFCNM)_".  3-60 characters, not starting with punctuation.",!
"RTN","TIUFXHLX",60,0)
 I HELPX="?" D FLDHELP(.01)
"RTN","TIUFXHLX",61,0)
 I HELPX="??" D FLDDESC(8925.1,.01)
"RTN","TIUFXHLX",62,0)
 Q
"RTN","TIUFXHLX",63,0)
 ;
"RTN","TIUFXHLX",64,0)
TYPE ; XECUTABLE HELP for .04 TYPE
"RTN","TIUFXHLX",65,0)
 N HELPX S HELPX=X
"RTN","TIUFXHLX",66,0)
 ; For choosing sort criteria, TIUFXNOD="Sort"
"RTN","TIUFXHLX",67,0)
 ; Otherwise, 3rd Piece of TIUFXNOD = "Change View" "Basics" "Create"
"RTN","TIUFXHLX",68,0)
 ;"Class/DocumentClass" "Title" "Component" "Create Document Definitions"
"RTN","TIUFXHLX",69,0)
 I HELPX="?" D FLDHELP(.04),TYPELST
"RTN","TIUFXHLX",70,0)
 I HELPX="??" D FLDDESC(8925.1,.04)
"RTN","TIUFXHLX",71,0)
 Q
"RTN","TIUFXHLX",72,0)
 ;
"RTN","TIUFXHLX",73,0)
TYPELST ; Writes remarks, list of type choices
"RTN","TIUFXHLX",74,0)
 ; Requires TIUFTMSG, TIUFTLST from TIUFLF7 if editing type
"RTN","TIUFXHLX",75,0)
 N OKTYPES,TAB
"RTN","TIUFXHLX",76,0)
 I $G(TIUFXNOD)["Basics" W !," Permitted Types are limited by Parent Type."
"RTN","TIUFXHLX",77,0)
 I $G(TIUFXNOD)["Change View"!($G(TIUFXNOD)["Sort") W !," File may contain (faulty) entries with no Type (NONE)."
"RTN","TIUFXHLX",78,0)
 I $G(TIUFXNOD)["Sort" W !!," You are limiting the list of entries you will see to those with a",!,"particular Type."
"RTN","TIUFXHLX",79,0)
 I $G(TIUFXNOD)["Create Doc" W !," Type is limited by the Type of your Current Position (Highlighted)."
"RTN","TIUFXHLX",80,0)
 I $G(TIUFXNOD)'["Sort" D PAUSE
"RTN","TIUFXHLX",81,0)
 S OKTYPES=$S($D(TIUFTLST):TIUFTLST,1:"^CL^DC^DOC^CO^O^N^") ;for Sort, Change View
"RTN","TIUFXHLX",82,0)
 I $D(TIUFTMSG(1)) W !,TIUFTMSG(1) W:$D(TIUFTMSG(2)) !,TIUFTMSG(2),! D PAUSE
"RTN","TIUFXHLX",83,0)
 I OKTYPES="" W !,"Type problem; See IRM" Q
"RTN","TIUFXHLX",84,0)
 S TAB=5
"RTN","TIUFXHLX",85,0)
 I $G(TIUFXNOD)["Sort" W !
"RTN","TIUFXHLX",86,0)
 W !,"Choose from:"
"RTN","TIUFXHLX",87,0)
 I OKTYPES["CL" W:TAB=5 ! W ?TAB,"Class" S TAB=$S(TAB=51:5,1:TAB+23)
"RTN","TIUFXHLX",88,0)
 I OKTYPES["DC" W:TAB=5 ! W ?TAB,"Document Class" S TAB=$S(TAB=51:5,1:TAB+23)
"RTN","TIUFXHLX",89,0)
 I OKTYPES["DOC" W:TAB=5 ! W ?TAB,"Title" S TAB=$S(TAB=51:5,1:TAB+23)
"RTN","TIUFXHLX",90,0)
 I OKTYPES["CO" W:TAB=5 ! W ?TAB,"Component" S TAB=$S(TAB=51:5,1:TAB+23)
"RTN","TIUFXHLX",91,0)
 I OKTYPES["^O^" W:TAB=5 ! W ?TAB,"Object" S TAB=$S(TAB=51:5,1:TAB+23)
"RTN","TIUFXHLX",92,0)
 I OKTYPES["N" W:TAB=5 ! W ?TAB,"NONE"
"RTN","TIUFXHLX",93,0)
 I $G(TIUFXNOD)["Sort" W !!
"RTN","TIUFXHLX",94,0)
 Q
"RTN","TIUFXHLX",95,0)
 ;
"RTN","TIUFXHLX",96,0)
STATUS ; XECUTABLE HELP for .07 STATUS
"RTN","TIUFXHLX",97,0)
 N HELPX S HELPX=X ;DO I NEED DBIA? MAM
"RTN","TIUFXHLX",98,0)
 I HELPX="?" D
"RTN","TIUFXHLX",99,0)
 . I $D(TIUFSMSG) W !,TIUFSMSG,! D PAUSE Q:$D(DIRUT)
"RTN","TIUFXHLX",100,0)
 . I $G(TIUFSMSG)["OBJECT" D OBJMSG,PAUSE W ! D:'$D(DIRUT) SLIST Q
"RTN","TIUFXHLX",101,0)
 . D FLDHELP(.07),SLIST
"RTN","TIUFXHLX",102,0)
 I HELPX="??" D FLDDESC(8925.1,.07) W !
"RTN","TIUFXHLX",103,0)
 Q
"RTN","TIUFXHLX",104,0)
 ;
"RTN","TIUFXHLX",105,0)
OBJMSG ; Writes msg about Object Status
"RTN","TIUFXHLX",106,0)
 W !," Objects may have Status Active or Inactive.  Active designates objects as ready"
"RTN","TIUFXHLX",107,0)
 W !,"for use.  It is up to the SITE to embed only Active Objects in Boilerplate Text."
"RTN","TIUFXHLX",108,0)
 W !,"Objects must be Inactive before they can be edited. Inactive objects in",!,"boilerplate text don't retrieve data.  For more, enter ??? and see OBJECT STATUS"
"RTN","TIUFXHLX",109,0)
 Q
"RTN","TIUFXHLX",110,0)
 ;
"RTN","TIUFXHLX",111,0)
SLIST ; Writes remarks, list of Status choices
"RTN","TIUFXHLX",112,0)
 ; If used for edit status rather than select status for sort, requires TIUFSLST as set in SELSTAT^TIUFLF5
"RTN","TIUFXHLX",113,0)
 I $G(TIUFXNOD)["Basics" W !,"Statuses are limited by Entry Type.  Statuses are also limited (to Inactive)",!,"by faults in Entry or by parent with Inactive Status." D PAUSE
"RTN","TIUFXHLX",114,0)
 I $G(TIUFXNOD)["Create",TIUFTMPL="A" W !,"Status is limited to Inactive until the entry is added to the Hierarchy." D PAUSE
"RTN","TIUFXHLX",115,0)
 I $G(TIUFXNOD)["Sort"!($G(TIUFXNOD)["Change View") W !," File may contain (faulty) entries with no Status (NONE)."
"RTN","TIUFXHLX",116,0)
 I $G(TIUFXNOD)["Sort" W !!,"You are limiting the list of entries you will see to those with a",!,"particular Status.",!
"RTN","TIUFXHLX",117,0)
 W !,"Choose from:"_$S($G(TIUFSLST)["A":"    ACTIVE",1:"")_$S($G(TIUFSLST)["I":"    INACTIVE",1:"")_$S($G(TIUFSLST)["T":"    TEST",1:"")_$S($G(TIUFSLST)["N":"    NONE",1:"") W:$G(TIUFXNOD)["Sort" !! W:$G(TIUFXNOD)["Change View" !
"RTN","TIUFXHLX",118,0)
 I $G(TIUFSLST)="" W !,"Status problem; See IRM"
"RTN","TIUFXHLX",119,0)
 Q
"RTN","TIUFXHLX",120,0)
 ;
"RTN","TIUFXHLX",121,0)
HELP1(FLDNO) ; Xe help for FLDNO's 5, 6, 6.1, 6.12,  6.13, 6.14, 7, 8
"RTN","TIUFXHLX",122,0)
 N HELPX S HELPX=X
"RTN","TIUFXHLX",123,0)
 I HELPX="??" D FLDDESC(8925.1,FLDNO)
"RTN","TIUFXHLX",124,0)
 Q
"RTN","TIUFXHLX",125,0)
 ;
"RTN","TIUFXHLX",126,0)
CUSTOM ; Xe help for Allow Custom Form Headers
"RTN","TIUFXHLX",127,0)
 N HELPX S HELPX=X
"RTN","TIUFXHLX",128,0)
 I HELPX="?" D PAUSE
"RTN","TIUFXHLX",129,0)
 I HELPX="??" D FLDDESC(8925.1,6.14)
"RTN","TIUFXHLX",130,0)
 Q
"RTN","TIUFXHLX",131,0)
 ;
"RTN","TIUFXHLX",132,0)
HELP2(FLDNO) ; XECUTABLE HELP for FLDNO's .1 SHARED and .13 Nat'l
"RTN","TIUFXHLX",133,0)
 N HELPX S HELPX=X
"RTN","TIUFXHLX",134,0)
 I HELPX="?" D FLDHELP(FLDNO)
"RTN","TIUFXHLX",135,0)
 I HELPX="??" D FULL^VALM1,FLDDESC(8925.1,FLDNO)
"RTN","TIUFXHLX",136,0)
 Q
"RTN","TIUFXHLX",137,0)
 ;
"RTN","TIUFXHLX",138,0)
CONTINUE() ; Pagination control
"RTN","TIUFXHLX",139,0)
 N Y
"RTN","TIUFXHLX",140,0)
 I $Y<(IOSL-2) S Y=1 G CONTX
"RTN","TIUFXHLX",141,0)
 S Y=$$STOP^TIUU("",1) W:+Y @IOF,!!
"RTN","TIUFXHLX",142,0)
CONTX Q Y
"RTN","TIUFXHLX",143,0)
 ;
"RTN","TIUHELP")
0^67^B7867271
"RTN","TIUHELP",1,0)
TIUHELP ; SLC/JER - On-line help library ;3/9/95  11:19
"RTN","TIUHELP",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUHELP",3,0)
PROTOCOL ; Help for protocols
"RTN","TIUHELP",4,0)
 N DIRUT,DTOUT,DUOUT,TIUX,ORU,ORUPRMT,VALMDDF,VALMPGE S TIUX=X
"RTN","TIUHELP",5,0)
 D FULL^VALM1
"RTN","TIUHELP",6,0)
 I TIUX="?"!(TIUX="??") D  G PROTX
"RTN","TIUHELP",7,0)
 . I TIUX="??",($G(VALMAR)="^TMP(""TIUR"",$J)") D STATUS I $D(DIRUT) W ! Q
"RTN","TIUHELP",8,0)
 . D DISP^XQORM1 W !!,"Enter selection by typing the name, or abbreviation.",!,"Enter '??' or '???' for additional details.",!
"RTN","TIUHELP",9,0)
 . I TIUX="?" W:$$STOP^TIUU ""
"RTN","TIUHELP",10,0)
 I TIUX="???" D MENU(XQORNOD) I $D(DIROUT) S (XQORQUIT,XQORPOP)=1 Q
"RTN","TIUHELP",11,0)
PROTX S VALMBCK="R"
"RTN","TIUHELP",12,0)
 Q
"RTN","TIUHELP",13,0)
MENU(XQORNOD) ; Unwind protocol menus for help
"RTN","TIUHELP",14,0)
 N TIUSEQ,TIUI,TIUJ D CLEAR^VALM1
"RTN","TIUHELP",15,0)
 W:$$CONTINUE "Valid selections are:",!
"RTN","TIUHELP",16,0)
 S TIUI=0 F  S TIUI=$O(^ORD(101,+XQORNOD,10,TIUI)) Q:+TIUI'>0  D
"RTN","TIUHELP",17,0)
 . S TIUJ=+$P($G(^ORD(101,+XQORNOD,10,TIUI,0)),U,3) S:$D(TIUSEQ(TIUJ)) TIUJ=TIUJ+.1
"RTN","TIUHELP",18,0)
 . S TIUSEQ(TIUJ)=+$P(^ORD(101,+XQORNOD,10,TIUI,0),U)
"RTN","TIUHELP",19,0)
 S TIUI=0 F  S TIUI=$O(TIUSEQ(TIUI)) Q:+TIUI'>0!$D(DIRUT)  D
"RTN","TIUHELP",20,0)
 . I $D(^ORD(101,+TIUSEQ(TIUI),0)) D ITEM(+TIUSEQ(TIUI),1)
"RTN","TIUHELP",21,0)
 Q
"RTN","TIUHELP",22,0)
ITEM(XQORNOD,TAB) ; Show descriptions of items
"RTN","TIUHELP",23,0)
 N TIUI
"RTN","TIUHELP",24,0)
 Q:$P($G(^ORD(101,+XQORNOD,0)),U,2)']""
"RTN","TIUHELP",25,0)
 W:$$CONTINUE ?+$G(TAB),$G(IOINHI),$$UPPER^TIULS($P($G(^ORD(101,+XQORNOD,0)),U,2)),$G(IOINORM),!
"RTN","TIUHELP",26,0)
 I $D(DIRUT) Q
"RTN","TIUHELP",27,0)
 S TIUI=0 F  S TIUI=$O(^ORD(101,+XQORNOD,1,TIUI)) Q:+TIUI'>0!$D(DIRUT)  D
"RTN","TIUHELP",28,0)
 . W:$$CONTINUE ?(TAB+2),$G(^ORD(101,+XQORNOD,1,TIUI,0)),! Q:$D(DIRUT)
"RTN","TIUHELP",29,0)
 S TIUI=0 F  S TIUI=$O(^ORD(101,+XQORNOD,10,TIUI)) Q:+TIUI'>0  D
"RTN","TIUHELP",30,0)
 . D ITEM(+$G(^ORD(101,+XQORNOD,10,+TIUI,0))_";ORD(101,",3)
"RTN","TIUHELP",31,0)
 Q
"RTN","TIUHELP",32,0)
STATUS ; Show status descriptions
"RTN","TIUHELP",33,0)
 W:$$CONTINUE !!,"The Following Statuses are defined:"
"RTN","TIUHELP",34,0)
 D STATEXP
"RTN","TIUHELP",35,0)
 W:$$CONTINUE !!
"RTN","TIUHELP",36,0)
 W:$$CONTINUE "A '+' to the left of the Patient's name indicates that a report has addenda.",!
"RTN","TIUHELP",37,0)
 W:$$CONTINUE "A '*' to the left of the Patient's name indicates a priority (STAT) document.",!
"RTN","TIUHELP",38,0)
 W:$$CONTINUE "These will appear at the top of the list.",!
"RTN","TIUHELP",39,0)
 Q
"RTN","TIUHELP",40,0)
CONTINUE() ; Pagination control
"RTN","TIUHELP",41,0)
 N Y
"RTN","TIUHELP",42,0)
 I $Y<(IOSL-2) S Y=1 G CONTX
"RTN","TIUHELP",43,0)
 S Y=$$STOP^TIUU("",1) W:+Y @IOF,!
"RTN","TIUHELP",44,0)
CONTX Q Y
"RTN","TIUHELP",45,0)
STATEXP ; Explain Statuses
"RTN","TIUHELP",46,0)
 N TIUI,TIUJ,TIUY S TIUI=0
"RTN","TIUHELP",47,0)
 D STATUS^TIUSRVL(.TIUY,"ALL",1)
"RTN","TIUHELP",48,0)
 F  S TIUI=$O(TIUY(TIUI)) Q:+TIUI'>0  D
"RTN","TIUHELP",49,0)
 . I TIUI>1 W:$$CONTINUE !
"RTN","TIUHELP",50,0)
 . W:$$CONTINUE !,$G(IOINHI),$P(TIUY(TIUI),U,2),$G(IOINORM)
"RTN","TIUHELP",51,0)
 . S TIUJ=0 F  S TIUJ=$O(TIUY(TIUI,1,TIUJ)) Q:+TIUJ'>0  D
"RTN","TIUHELP",52,0)
 . . W:$$CONTINUE !?2,$G(TIUY(TIUI,1,TIUJ))
"RTN","TIUHELP",53,0)
 Q
"RTN","TIUIL")
0^68^B26375066
"RTN","TIUIL",1,0)
TIUIL ; List Template Exporter ; 20-JUN-1997
"RTN","TIUIL",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUIL",3,0)
 D BMES^XPDUTL("'TIU BROWSE FOR CLINICIAN' List Template...")
"RTN","TIUIL",4,0)
 S DA=$O(^SD(409.61,"B","TIU BROWSE FOR CLINICIAN",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL",5,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU BROWSE FOR CLINICIAN" D FILE^DICN S VALM=+Y
"RTN","TIUIL",6,0)
 I VALM>0 D
"RTN","TIUIL",7,0)
 .S ^SD(409.61,VALM,0)="TIU BROWSE FOR CLINICIAN^1^^^5^17^1^1^Document^TIU BROWSE MENU CLINICIAN^Browse Document"
"RTN","TIUIL",8,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS BROWSE"
"RTN","TIUIL",9,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUVIEW"",$J)"
"RTN","TIUIL",10,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUBR"
"RTN","TIUIL",11,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUBR"
"RTN","TIUIL",12,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL",13,0)
 .S ^SD(409.61,VALM,"INIT")="D EN^TIUBR"
"RTN","TIUIL",14,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL",15,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL",16,0)
 ;
"RTN","TIUIL",17,0)
 D BMES^XPDUTL("'TIU BROWSE FOR MGR' List Template...")
"RTN","TIUIL",18,0)
 S DA=$O(^SD(409.61,"B","TIU BROWSE FOR MGR",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL",19,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU BROWSE FOR MGR" D FILE^DICN S VALM=+Y
"RTN","TIUIL",20,0)
 I VALM>0 D
"RTN","TIUIL",21,0)
 .S ^SD(409.61,VALM,0)="TIU BROWSE FOR MGR^1^^^5^18^1^1^Document^TIU BROWSE MENU MGR^Browse Document"
"RTN","TIUIL",22,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS BROWSE"
"RTN","TIUIL",23,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUVIEW"",$J)"
"RTN","TIUIL",24,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUBR"
"RTN","TIUIL",25,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUBR"
"RTN","TIUIL",26,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL",27,0)
 .S ^SD(409.61,VALM,"INIT")="D EN^TIUBR"
"RTN","TIUIL",28,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL",29,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL",30,0)
 ;
"RTN","TIUIL",31,0)
 D BMES^XPDUTL("'TIU BROWSE FOR MRT' List Template...")
"RTN","TIUIL",32,0)
 S DA=$O(^SD(409.61,"B","TIU BROWSE FOR MRT",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL",33,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU BROWSE FOR MRT" D FILE^DICN S VALM=+Y
"RTN","TIUIL",34,0)
 I VALM>0 D
"RTN","TIUIL",35,0)
 .S ^SD(409.61,VALM,0)="TIU BROWSE FOR MRT^1^^^5^18^1^1^^TIU BROWSE MENU MRT^Browse Document"
"RTN","TIUIL",36,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS BROWSE"
"RTN","TIUIL",37,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUVIEW"",$J)"
"RTN","TIUIL",38,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUBR"
"RTN","TIUIL",39,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUBR"
"RTN","TIUIL",40,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL",41,0)
 .S ^SD(409.61,VALM,"INIT")="D EN^TIUBR"
"RTN","TIUIL",42,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL",43,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL",44,0)
 ;
"RTN","TIUIL",45,0)
 D BMES^XPDUTL("'TIU BROWSE FOR READ ONLY' List Template...")
"RTN","TIUIL",46,0)
 S DA=$O(^SD(409.61,"B","TIU BROWSE FOR READ ONLY",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL",47,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU BROWSE FOR READ ONLY" D FILE^DICN S VALM=+Y
"RTN","TIUIL",48,0)
 I VALM>0 D
"RTN","TIUIL",49,0)
 .S ^SD(409.61,VALM,0)="TIU BROWSE FOR READ ONLY^1^^^5^18^1^1^Document^TIU BROWSE MENU READ ONLY^Browse Document"
"RTN","TIUIL",50,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS BROWSE"
"RTN","TIUIL",51,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUVIEW"",$J)"
"RTN","TIUIL",52,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUBR"
"RTN","TIUIL",53,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUBR"
"RTN","TIUIL",54,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL",55,0)
 .S ^SD(409.61,VALM,"INIT")="D EN^TIUBR"
"RTN","TIUIL",56,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL",57,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL",58,0)
 ;
"RTN","TIUIL",59,0)
 D BMES^XPDUTL("'TIU CHANGE TITLE' List Template...")
"RTN","TIUIL",60,0)
 S DA=$O(^SD(409.61,"B","TIU CHANGE TITLE",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL",61,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU CHANGE TITLE" D FILE^DICN S VALM=+Y
"RTN","TIUIL",62,0)
 I VALM>0 D
"RTN","TIUIL",63,0)
 .S ^SD(409.61,VALM,0)="TIU CHANGE TITLE^1^^^5^18^1^1^Document^TIU ACTION MENU CHANGE TITLE^Change Document Title"
"RTN","TIUIL",64,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS BROWSE"
"RTN","TIUIL",65,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUVIEW"",$J)"
"RTN","TIUIL",66,0)
 .S ^SD(409.61,VALM,"FNL")="S VALMBCK=""Q"""
"RTN","TIUIL",67,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUBR"
"RTN","TIUIL",68,0)
 .S ^SD(409.61,VALM,"HLP")="D FULL^VALM1,PROTOCOL^TIUHELP S VALMBCK=""R"""
"RTN","TIUIL",69,0)
 .S ^SD(409.61,VALM,"INIT")="D EN^TIUBR"
"RTN","TIUIL",70,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL",71,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL",72,0)
 ;
"RTN","TIUIL",73,0)
 D BMES^XPDUTL("'TIU COMPLETE NOTES' List Template...")
"RTN","TIUIL",74,0)
 S DA=$O(^SD(409.61,"B","TIU COMPLETE NOTES",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL",75,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU COMPLETE NOTES" D FILE^DICN S VALM=+Y
"RTN","TIUIL",76,0)
 I VALM>0 D
"RTN","TIUIL",77,0)
 .S ^SD(409.61,VALM,0)="TIU COMPLETE NOTES^1^^^5^20^1^1^Progress Note^TIU COMPLETE NOTES MENU^Complete Notes"
"RTN","TIUIL",78,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS BROWSE"
"RTN","TIUIL",79,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUVIEW"",$J)"
"RTN","TIUIL",80,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUBR"
"RTN","TIUIL",81,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUBR"
"RTN","TIUIL",82,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL",83,0)
 .S ^SD(409.61,VALM,"INIT")="D EN^TIUBR"
"RTN","TIUIL",84,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL",85,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL",86,0)
 ;
"RTN","TIUIL",87,0)
 D BMES^XPDUTL("'TIU COPY DOCUMENT' List Template...")
"RTN","TIUIL",88,0)
 S DA=$O(^SD(409.61,"B","TIU COPY DOCUMENT",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL",89,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU COPY DOCUMENT" D FILE^DICN S VALM=+Y
"RTN","TIUIL",90,0)
 I VALM>0 D
"RTN","TIUIL",91,0)
 .S ^SD(409.61,VALM,0)="TIU COPY DOCUMENT^1^^^5^18^1^1^Document^TIU ACTION MENU COPY^Copy Document"
"RTN","TIUIL",92,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS BROWSE"
"RTN","TIUIL",93,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUVIEW"",$J)"
"RTN","TIUIL",94,0)
 .S ^SD(409.61,VALM,"FNL")="S VALMBCK=""Q"""
"RTN","TIUIL",95,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUBR"
"RTN","TIUIL",96,0)
 .S ^SD(409.61,VALM,"HLP")="D FULL^VALM1,PROTOCOL^TIUHELP S VALMBCK=""R"""
"RTN","TIUIL",97,0)
 .S ^SD(409.61,VALM,"INIT")="D EN^TIUBR"
"RTN","TIUIL",98,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL",99,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL",100,0)
 ;
"RTN","TIUIL",101,0)
 G ^TIUIL1
"RTN","TIUIL1")
0^69^B25018815
"RTN","TIUIL1",1,0)
TIUIL1 ; List Template Exporter ; 20-JUN-1997
"RTN","TIUIL1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUIL1",3,0)
 D BMES^XPDUTL("'TIU DISPLAY AUDIT TRAIL' List Template...")
"RTN","TIUIL1",4,0)
 S DA=$O(^SD(409.61,"B","TIU DISPLAY AUDIT TRAIL",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL1",5,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU DISPLAY AUDIT TRAIL" D FILE^DICN S VALM=+Y
"RTN","TIUIL1",6,0)
 I VALM>0 D
"RTN","TIUIL1",7,0)
 .S ^SD(409.61,VALM,0)="TIU DISPLAY AUDIT TRAIL^1^^^5^18^1^1^Document^TIU BROWSE MENU READ ONLY^Detailed Display"
"RTN","TIUIL1",8,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS BROWSE"
"RTN","TIUIL1",9,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUAUDIT"",$J)"
"RTN","TIUIL1",10,0)
 .S ^SD(409.61,VALM,"FNL")="S VALMBCK=""Q"""
"RTN","TIUIL1",11,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUAUDIT"
"RTN","TIUIL1",12,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL1",13,0)
 .S ^SD(409.61,VALM,"INIT")="D MAIN^TIUAUDIT"
"RTN","TIUIL1",14,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL1",15,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL1",16,0)
 ;
"RTN","TIUIL1",17,0)
 D BMES^XPDUTL("'TIU DISPLAY FILING EVENT' List Template...")
"RTN","TIUIL1",18,0)
 S DA=$O(^SD(409.61,"B","TIU DISPLAY FILING EVENT",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL1",19,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU DISPLAY FILING EVENT" D FILE^DICN S VALM=+Y
"RTN","TIUIL1",20,0)
 I VALM>0 D
"RTN","TIUIL1",21,0)
 .S ^SD(409.61,VALM,0)="TIU DISPLAY FILING EVENT^1^^110^4^18^1^1^Event^TIU ERROR RESOLUTION MENU^Detailed Display"
"RTN","TIUIL1",22,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS"
"RTN","TIUIL1",23,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUEVENT"",$J)"
"RTN","TIUIL1",24,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUPEDSP"
"RTN","TIUIL1",25,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUPEDSP"
"RTN","TIUIL1",26,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL1",27,0)
 .S ^SD(409.61,VALM,"INIT")="D MAIN^TIUPEDSP"
"RTN","TIUIL1",28,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL1",29,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL1",30,0)
 ;
"RTN","TIUIL1",31,0)
 D BMES^XPDUTL("'TIU EDIT ADDENDUM' List Template...")
"RTN","TIUIL1",32,0)
 S DA=$O(^SD(409.61,"B","TIU EDIT ADDENDUM",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL1",33,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU EDIT ADDENDUM" D FILE^DICN S VALM=+Y
"RTN","TIUIL1",34,0)
 I VALM>0 D
"RTN","TIUIL1",35,0)
 .S ^SD(409.61,VALM,0)="TIU EDIT ADDENDUM^1^^^5^18^1^1^Document^TIU ACTION MENU EDIT ADDENDUM^Edit Addendum"
"RTN","TIUIL1",36,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS BROWSE"
"RTN","TIUIL1",37,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUVIEW"",$J)"
"RTN","TIUIL1",38,0)
 .S ^SD(409.61,VALM,"FNL")="S VALMBCK=""Q"""
"RTN","TIUIL1",39,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUBR"
"RTN","TIUIL1",40,0)
 .S ^SD(409.61,VALM,"HLP")="D FULL^VALM1,PROTOCOL^TIUHELP S VALMBCK=""R"""
"RTN","TIUIL1",41,0)
 .S ^SD(409.61,VALM,"INIT")="D EN^TIUBR"
"RTN","TIUIL1",42,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL1",43,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL1",44,0)
 ;
"RTN","TIUIL1",45,0)
 D BMES^XPDUTL("'TIU LINK TO PROBLEM' List Template...")
"RTN","TIUIL1",46,0)
 S DA=$O(^SD(409.61,"B","TIU LINK TO PROBLEM",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL1",47,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU LINK TO PROBLEM" D FILE^DICN S VALM=+Y
"RTN","TIUIL1",48,0)
 I VALM>0 D
"RTN","TIUIL1",49,0)
 .S ^SD(409.61,VALM,0)="TIU LINK TO PROBLEM^1^^^4^18^1^1^Problem^TIU ACTION MENU LINK TO PROBLEM^Active Problems^1"
"RTN","TIUIL1",50,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS"
"RTN","TIUIL1",51,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIURP"",$J)"
"RTN","TIUIL1",52,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^6^5"
"RTN","TIUIL1",53,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^3"
"RTN","TIUIL1",54,0)
 .S ^SD(409.61,VALM,"COL",2,0)="DATE^57^8^"
"RTN","TIUIL1",55,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PROBLEM^6^40^"
"RTN","TIUIL1",56,0)
 .S ^SD(409.61,VALM,"COL",5,0)="STATUS^4^2"
"RTN","TIUIL1",57,0)
 .S ^SD(409.61,VALM,"COL",6,0)="ICD9^47^8"
"RTN","TIUIL1",58,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIURP"
"RTN","TIUIL1",59,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURP"
"RTN","TIUIL1",60,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL1",61,0)
 .S ^SD(409.61,VALM,"INIT")="D MAIN^TIURP"
"RTN","TIUIL1",62,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL1",63,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL1",64,0)
 ;
"RTN","TIUIL1",65,0)
 D BMES^XPDUTL("'TIU OE/RR REVIEW PN' List Template...")
"RTN","TIUIL1",66,0)
 S DA=$O(^SD(409.61,"B","TIU OE/RR REVIEW PN",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL1",67,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU OE/RR REVIEW PN" D FILE^DICN S VALM=+Y
"RTN","TIUIL1",68,0)
 I VALM>0 D
"RTN","TIUIL1",69,0)
 .S ^SD(409.61,VALM,0)="TIU OE/RR REVIEW PN^1^^80^5^19^1^1^Progress Note^TIU ACTION MENU OE/RR^Progress Notes^4^^1"
"RTN","TIUIL1",70,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS OE/RR"
"RTN","TIUIL1",71,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL1",72,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^5^5"
"RTN","TIUIL1",73,0)
 .S ^SD(409.61,VALM,"COL",1,0)="TITLE^8^30^Title"
"RTN","TIUIL1",74,0)
 .S ^SD(409.61,VALM,"COL",2,0)="NUMBER^1^4"
"RTN","TIUIL1",75,0)
 .S ^SD(409.61,VALM,"COL",3,0)="AUTHOR^40^17^Author"
"RTN","TIUIL1",76,0)
 .S ^SD(409.61,VALM,"COL",4,0)="REF DATE^56^14^Date/Time"
"RTN","TIUIL1",77,0)
 .S ^SD(409.61,VALM,"COL",5,0)="STATUS^75^5"
"RTN","TIUIL1",78,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUROR"
"RTN","TIUIL1",79,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUROR"
"RTN","TIUIL1",80,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL1",81,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUROR(3,1)"
"RTN","TIUIL1",82,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL1",83,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL1",84,0)
 ;
"RTN","TIUIL1",85,0)
 D BMES^XPDUTL("'TIU REASSIGN' List Template...")
"RTN","TIUIL1",86,0)
 S DA=$O(^SD(409.61,"B","TIU REASSIGN",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL1",87,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REASSIGN" D FILE^DICN S VALM=+Y
"RTN","TIUIL1",88,0)
 I VALM>0 D
"RTN","TIUIL1",89,0)
 .S ^SD(409.61,VALM,0)="TIU REASSIGN^1^^^5^18^1^1^Document^TIU ACTION MENU REASSIGN^Reassign Document"
"RTN","TIUIL1",90,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS BROWSE"
"RTN","TIUIL1",91,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUVIEW"",$J)"
"RTN","TIUIL1",92,0)
 .S ^SD(409.61,VALM,"FNL")="S VALMBCK=""Q"""
"RTN","TIUIL1",93,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUBR"
"RTN","TIUIL1",94,0)
 .S ^SD(409.61,VALM,"HLP")="D FULL^VALM1,PROTOCOL^TIUHELP S VALMBCK=""R"""
"RTN","TIUIL1",95,0)
 .S ^SD(409.61,VALM,"INIT")="D EN^TIUBR"
"RTN","TIUIL1",96,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL1",97,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL1",98,0)
 ;
"RTN","TIUIL1",99,0)
 G ^TIUIL2
"RTN","TIUIL10")
0^213^B16471997
"RTN","TIUIL10",1,0)
TIUIL10 ; List Template Exporter ; 20-JUN-1997
"RTN","TIUIL10",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUIL10",3,0)
 D BMES^XPDUTL("'TIUFT ITEMS EDIT/VIEW CLIN' List Template...")
"RTN","TIUIL10",4,0)
 S DA=$O(^SD(409.61,"B","TIUFT ITEMS EDIT/VIEW CLIN",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL10",5,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFT ITEMS EDIT/VIEW CLIN" D FILE^DICN S VALM=+Y
"RTN","TIUIL10",6,0)
 I VALM>0 D
"RTN","TIUIL10",7,0)
 .S ^SD(409.61,VALM,0)="TIUFT ITEMS EDIT/VIEW CLIN^1^^123^5^18^1^1^ITEM^TIUFT ACTION MENU EDIT/VIEW ITEMS^Items^1^^1"
"RTN","TIUIL10",8,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL10",9,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF2"",$J)"
"RTN","TIUIL10",10,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^7^7"
"RTN","TIUIL10",11,0)
 .S ^SD(409.61,VALM,"COL",1,0)="MNEM^91^4^Mnem"
"RTN","TIUIL10",12,0)
 .S ^SD(409.61,VALM,"COL",2,0)="MENUTEXT^97^26^Menu Text"
"RTN","TIUIL10",13,0)
 .S ^SD(409.61,VALM,"COL",3,0)="SEQUENCE^75^6^Seq"
"RTN","TIUIL10",14,0)
 .S ^SD(409.61,VALM,"COL",4,0)="NUMBER^1^6"
"RTN","TIUIL10",15,0)
 .S ^SD(409.61,VALM,"COL",5,0)="NAME1^8^23^Item^^1"
"RTN","TIUIL10",16,0)
 .S ^SD(409.61,VALM,"COL",6,0)="IFN^82^7^    IFN"
"RTN","TIUIL10",17,0)
 .S ^SD(409.61,VALM,"COL",7,0)="NAME2^31^37"
"RTN","TIUIL10",18,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,5)=""
"RTN","TIUIL10",19,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFT"
"RTN","TIUIL10",20,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFT"
"RTN","TIUIL10",21,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL10",22,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFT"
"RTN","TIUIL10",23,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL10",24,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL10",25,0)
 ;
"RTN","TIUIL10",26,0)
 D BMES^XPDUTL("'TIUFT ITEMS VIEW MGR/CLIN' List Template...")
"RTN","TIUIL10",27,0)
 S DA=$O(^SD(409.61,"B","TIUFT ITEMS VIEW MGR/CLIN",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL10",28,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFT ITEMS VIEW MGR/CLIN" D FILE^DICN S VALM=+Y
"RTN","TIUIL10",29,0)
 I VALM>0 D
"RTN","TIUIL10",30,0)
 .S ^SD(409.61,VALM,0)="TIUFT ITEMS VIEW MGR/CLIN^1^^123^5^18^1^1^ITEM^TIUFT ACTION MENU VIEW ITEMS^Items^1^^1"
"RTN","TIUIL10",31,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL10",32,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF2"",$J)"
"RTN","TIUIL10",33,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^10^7"
"RTN","TIUIL10",34,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NAME1^8^23^Item^^1"
"RTN","TIUIL10",35,0)
 .S ^SD(409.61,VALM,"COL",5,0)="NUMBER^1^6"
"RTN","TIUIL10",36,0)
 .S ^SD(409.61,VALM,"COL",6,0)="MENUTEXT^97^26^Menu Text"
"RTN","TIUIL10",37,0)
 .S ^SD(409.61,VALM,"COL",7,0)="SEQUENCE^75^6^Seq"
"RTN","TIUIL10",38,0)
 .S ^SD(409.61,VALM,"COL",8,0)="MNEM^91^4^Mnem"
"RTN","TIUIL10",39,0)
 .S ^SD(409.61,VALM,"COL",9,0)="IFN^82^7^    IFN"
"RTN","TIUIL10",40,0)
 .S ^SD(409.61,VALM,"COL",10,0)="NAME2^31^37"
"RTN","TIUIL10",41,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,1)=""
"RTN","TIUIL10",42,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFT"
"RTN","TIUIL10",43,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFT"
"RTN","TIUIL10",44,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL10",45,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFT"
"RTN","TIUIL10",46,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL10",47,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL10",48,0)
 ;
"RTN","TIUIL10",49,0)
 D BMES^XPDUTL("'TIUFX BOILERPLATE TEXT' List Template...")
"RTN","TIUIL10",50,0)
 S DA=$O(^SD(409.61,"B","TIUFX BOILERPLATE TEXT",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL10",51,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFX BOILERPLATE TEXT" D FILE^DICN S VALM=+Y
"RTN","TIUIL10",52,0)
 I VALM>0 D
"RTN","TIUIL10",53,0)
 .S ^SD(409.61,VALM,0)="TIUFX BOILERPLATE TEXT^1^^80^4^18^1^1^^TIUFX ACTION MENU MGR^Boilerplate Text^^^1"
"RTN","TIUIL10",54,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL10",55,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF3"",$J)"
"RTN","TIUIL10",56,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFX"
"RTN","TIUIL10",57,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFX"
"RTN","TIUIL10",58,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL10",59,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFX"
"RTN","TIUIL10",60,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL10",61,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL10",62,0)
 ;
"RTN","TIUIL10",63,0)
 D BMES^XPDUTL("'TIUFX BOILERPLATE TEXT VIEW' List Template...")
"RTN","TIUIL10",64,0)
 S DA=$O(^SD(409.61,"B","TIUFX BOILERPLATE TEXT VIEW",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL10",65,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFX BOILERPLATE TEXT VIEW" D FILE^DICN S VALM=+Y
"RTN","TIUIL10",66,0)
 I VALM>0 D
"RTN","TIUIL10",67,0)
 .S ^SD(409.61,VALM,0)="TIUFX BOILERPLATE TEXT VIEW^1^^80^4^18^1^1^^TIUFX ACTION MENU VIEW^Boilerplate Text^^^1"
"RTN","TIUIL10",68,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL10",69,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF3"",$J)"
"RTN","TIUIL10",70,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFX"
"RTN","TIUIL10",71,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFX"
"RTN","TIUIL10",72,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL10",73,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFX"
"RTN","TIUIL10",74,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL10",75,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL10",76,0)
 ;
"RTN","TIUIL10",77,0)
 K DIC,DIK,VALM,X,DA Q
"RTN","TIUIL2")
0^71^B30581308
"RTN","TIUIL2",1,0)
TIUIL2 ; List Template Exporter ; 20-JUN-1997
"RTN","TIUIL2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUIL2",3,0)
 D BMES^XPDUTL("'TIU REVIEW BY PATIENT & TITLE' List Template...")
"RTN","TIUIL2",4,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW BY PATIENT & TITLE",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL2",5,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW BY PATIENT & TITLE" D FILE^DICN S VALM=+Y
"RTN","TIUIL2",6,0)
 I VALM>0 D
"RTN","TIUIL2",7,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW BY PATIENT & TITLE^1^^135^4^18^1^1^Progress Note^TIU ACTION MENU PT/TTL REVIEW^Progress Notes"
"RTN","TIUIL2",8,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL2",9,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL2",10,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^13^9"
"RTN","TIUIL2",11,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^4"
"RTN","TIUIL2",12,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^63^19^Status"
"RTN","TIUIL2",13,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL2",14,0)
 .S ^SD(409.61,VALM,"COL",4,0)="REF DATE^53^8^Ref Date"
"RTN","TIUIL2",15,0)
 .S ^SD(409.61,VALM,"COL",5,0)="SIG DATE^82^8^Completed"
"RTN","TIUIL2",16,0)
 .S ^SD(409.61,VALM,"COL",10,0)="LAST I/LAST 4^20^7^^^0"
"RTN","TIUIL2",17,0)
 .S ^SD(409.61,VALM,"COL",11,0)="AUTHOR^92^15^Author"
"RTN","TIUIL2",18,0)
 .S ^SD(409.61,VALM,"COL",12,0)="COSIGNER^109^15^Cosigner"
"RTN","TIUIL2",19,0)
 .S ^SD(409.61,VALM,"COL",13,0)="DOCUMENT TYPE^28^24^Document^^1"
"RTN","TIUIL2",20,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",0,10)=""
"RTN","TIUIL2",21,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,13)=""
"RTN","TIUIL2",22,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIURPTTL"
"RTN","TIUIL2",23,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURH"
"RTN","TIUIL2",24,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL2",25,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIURPTTL(3)"
"RTN","TIUIL2",26,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL2",27,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL2",28,0)
 ;
"RTN","TIUIL2",29,0)
 D BMES^XPDUTL("'TIU REVIEW BY TITLE' List Template...")
"RTN","TIUIL2",30,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW BY TITLE",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL2",31,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW BY TITLE" D FILE^DICN S VALM=+Y
"RTN","TIUIL2",32,0)
 I VALM>0 D
"RTN","TIUIL2",33,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW BY TITLE^1^^135^4^18^1^1^Progress Note^TIU ACTION MENU TITLE REVIEW^Progress Notes by Title"
"RTN","TIUIL2",34,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL2",35,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL2",36,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^13^9"
"RTN","TIUIL2",37,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^4"
"RTN","TIUIL2",38,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^63^19^Status"
"RTN","TIUIL2",39,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL2",40,0)
 .S ^SD(409.61,VALM,"COL",4,0)="REF DATE^53^8^Ref Date"
"RTN","TIUIL2",41,0)
 .S ^SD(409.61,VALM,"COL",5,0)="SIG DATE^82^8^Completed"
"RTN","TIUIL2",42,0)
 .S ^SD(409.61,VALM,"COL",10,0)="LAST I/LAST 4^20^7^^^0"
"RTN","TIUIL2",43,0)
 .S ^SD(409.61,VALM,"COL",11,0)="AUTHOR^92^15^Author"
"RTN","TIUIL2",44,0)
 .S ^SD(409.61,VALM,"COL",12,0)="COSIGNER^109^15^Cosigner"
"RTN","TIUIL2",45,0)
 .S ^SD(409.61,VALM,"COL",13,0)="DOCUMENT TYPE^28^24^Document^^1"
"RTN","TIUIL2",46,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",0,10)=""
"RTN","TIUIL2",47,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,13)=""
"RTN","TIUIL2",48,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIURTITL"
"RTN","TIUIL2",49,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURTITH"
"RTN","TIUIL2",50,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL2",51,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIURTITL(3)"
"RTN","TIUIL2",52,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL2",53,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL2",54,0)
 ;
"RTN","TIUIL2",55,0)
 D BMES^XPDUTL("'TIU REVIEW DS CLINICIAN' List Template...")
"RTN","TIUIL2",56,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW DS CLINICIAN",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL2",57,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW DS CLINICIAN" D FILE^DICN S VALM=+Y
"RTN","TIUIL2",58,0)
 I VALM>0 D
"RTN","TIUIL2",59,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW DS CLINICIAN^1^^135^4^17^1^1^Discharge Summary^TIU ACTION MENU CLINICIAN^Discharge Summaries"
"RTN","TIUIL2",60,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL2",61,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL2",62,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^13^9"
"RTN","TIUIL2",63,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^4"
"RTN","TIUIL2",64,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^63^19^Status"
"RTN","TIUIL2",65,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL2",66,0)
 .S ^SD(409.61,VALM,"COL",4,0)="REF DATE^53^8^Ref Date"
"RTN","TIUIL2",67,0)
 .S ^SD(409.61,VALM,"COL",5,0)="SIG DATE^82^8^Completed"
"RTN","TIUIL2",68,0)
 .S ^SD(409.61,VALM,"COL",10,0)="LAST I/LAST 4^20^7^^^0"
"RTN","TIUIL2",69,0)
 .S ^SD(409.61,VALM,"COL",11,0)="AUTHOR^92^15^Author"
"RTN","TIUIL2",70,0)
 .S ^SD(409.61,VALM,"COL",12,0)="COSIGNER^109^15^Cosigner"
"RTN","TIUIL2",71,0)
 .S ^SD(409.61,VALM,"COL",13,0)="DOCUMENT TYPE^28^24^Document^^1"
"RTN","TIUIL2",72,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",0,10)=""
"RTN","TIUIL2",73,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,13)=""
"RTN","TIUIL2",74,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUR"
"RTN","TIUIL2",75,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURH"
"RTN","TIUIL2",76,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL2",77,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIUR(244)"
"RTN","TIUIL2",78,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL2",79,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL2",80,0)
 ;
"RTN","TIUIL2",81,0)
 D BMES^XPDUTL("'TIU REVIEW DS MGR' List Template...")
"RTN","TIUIL2",82,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW DS MGR",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL2",83,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW DS MGR" D FILE^DICN S VALM=+Y
"RTN","TIUIL2",84,0)
 I VALM>0 D
"RTN","TIUIL2",85,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW DS MGR^1^^145^4^18^1^1^Discharge Summary^TIU ACTION MENU MGR REVIEW^Discharge Summaries"
"RTN","TIUIL2",86,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL2",87,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL2",88,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^12^11"
"RTN","TIUIL2",89,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^5"
"RTN","TIUIL2",90,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^99^10^Status"
"RTN","TIUIL2",91,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL2",92,0)
 .S ^SD(409.61,VALM,"COL",4,0)="DISCH DATE^72^8^Disch'd"
"RTN","TIUIL2",93,0)
 .S ^SD(409.61,VALM,"COL",5,0)="DICT DATE^82^8^Dictated"
"RTN","TIUIL2",94,0)
 .S ^SD(409.61,VALM,"COL",6,0)="LINE COUNT^92^5^Lines"
"RTN","TIUIL2",95,0)
 .S ^SD(409.61,VALM,"COL",8,0)="ADMISSION DATE^62^8^Admitted"
"RTN","TIUIL2",96,0)
 .S ^SD(409.61,VALM,"COL",9,0)="LAST I/LAST 4^20^8^^^1"
"RTN","TIUIL2",97,0)
 .S ^SD(409.61,VALM,"COL",10,0)="AUTHOR^111^15^Author"
"RTN","TIUIL2",98,0)
 .S ^SD(409.61,VALM,"COL",11,0)="ATTENDING^128^15^Attending"
"RTN","TIUIL2",99,0)
 .S ^SD(409.61,VALM,"COL",12,0)="DOCUMENT TYPE^29^31^Document"
"RTN","TIUIL2",100,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,9)=""
"RTN","TIUIL2",101,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIURM"
"RTN","TIUIL2",102,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURMH"
"RTN","TIUIL2",103,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL2",104,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIURM(244)"
"RTN","TIUIL2",105,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL2",106,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL2",107,0)
 ;
"RTN","TIUIL2",108,0)
 G ^TIUIL3
"RTN","TIUIL3")
0^72^B26570373
"RTN","TIUIL3",1,0)
TIUIL3 ; List Template Exporter ; 20-JUN-1997
"RTN","TIUIL3",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUIL3",3,0)
 D BMES^XPDUTL("'TIU REVIEW DS MRT' List Template...")
"RTN","TIUIL3",4,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW DS MRT",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL3",5,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW DS MRT" D FILE^DICN S VALM=+Y
"RTN","TIUIL3",6,0)
 I VALM>0 D
"RTN","TIUIL3",7,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW DS MRT^1^^145^4^18^1^1^Discharge Summary^TIU ACTION MENU MRT REVIEW^Discharge Summaries"
"RTN","TIUIL3",8,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL3",9,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL3",10,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^12^11"
"RTN","TIUIL3",11,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^5"
"RTN","TIUIL3",12,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^99^10^Status"
"RTN","TIUIL3",13,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL3",14,0)
 .S ^SD(409.61,VALM,"COL",4,0)="DISCH DATE^72^8^Disch'd"
"RTN","TIUIL3",15,0)
 .S ^SD(409.61,VALM,"COL",5,0)="DICT DATE^82^8^Dictated"
"RTN","TIUIL3",16,0)
 .S ^SD(409.61,VALM,"COL",6,0)="LINE COUNT^92^5^Lines"
"RTN","TIUIL3",17,0)
 .S ^SD(409.61,VALM,"COL",8,0)="ADMISSION DATE^62^8^Admitted"
"RTN","TIUIL3",18,0)
 .S ^SD(409.61,VALM,"COL",9,0)="LAST I/LAST 4^20^8^^^1"
"RTN","TIUIL3",19,0)
 .S ^SD(409.61,VALM,"COL",10,0)="AUTHOR^111^15^Author"
"RTN","TIUIL3",20,0)
 .S ^SD(409.61,VALM,"COL",11,0)="ATTENDING^128^15^Attending"
"RTN","TIUIL3",21,0)
 .S ^SD(409.61,VALM,"COL",12,0)="DOCUMENT TYPE^29^31^Document"
"RTN","TIUIL3",22,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,9)=""
"RTN","TIUIL3",23,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIURM"
"RTN","TIUIL3",24,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURMH"
"RTN","TIUIL3",25,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL3",26,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIURM(244)"
"RTN","TIUIL3",27,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL3",28,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL3",29,0)
 ;
"RTN","TIUIL3",30,0)
 D BMES^XPDUTL("'TIU REVIEW FILING ERRORS' List Template...")
"RTN","TIUIL3",31,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW FILING ERRORS",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL3",32,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW FILING ERRORS" D FILE^DICN S VALM=+Y
"RTN","TIUIL3",33,0)
 I VALM>0 D
"RTN","TIUIL3",34,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW FILING ERRORS^1^^^5^18^1^1^Error^TIU ACTION MENU ERRORS^FILING ERRORS"
"RTN","TIUIL3",35,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS"
"RTN","TIUIL3",36,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUERR"",$J)"
"RTN","TIUIL3",37,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^6^6"
"RTN","TIUIL3",38,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^3"
"RTN","TIUIL3",39,0)
 .S ^SD(409.61,VALM,"COL",2,0)="PROCESS ID^4^12^Process ID"
"RTN","TIUIL3",40,0)
 .S ^SD(409.61,VALM,"COL",3,0)="ERROR DATE/TIME^17^17^Error Date/time"
"RTN","TIUIL3",41,0)
 .S ^SD(409.61,VALM,"COL",4,0)="RESOL DATE/TIME^36^17^Resol Date/time"
"RTN","TIUIL3",42,0)
 .S ^SD(409.61,VALM,"COL",5,0)="USER NAME^55^24^User Name"
"RTN","TIUIL3",43,0)
 .S ^SD(409.61,VALM,"COL",6,0)="DESCRIPTION^4^75"
"RTN","TIUIL3",44,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUELST"
"RTN","TIUIL3",45,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL3",46,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIUELST"
"RTN","TIUIL3",47,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL3",48,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL3",49,0)
 ;
"RTN","TIUIL3",50,0)
 D BMES^XPDUTL("'TIU REVIEW FILING EVENTS' List Template...")
"RTN","TIUIL3",51,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW FILING EVENTS",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL3",52,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW FILING EVENTS" D FILE^DICN S VALM=+Y
"RTN","TIUIL3",53,0)
 I VALM>0 D
"RTN","TIUIL3",54,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW FILING EVENTS^1^^115^4^20^1^1^Event^TIU ACTION MENU UPLOAD EVENTS^Filing Events"
"RTN","TIUIL3",55,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS"
"RTN","TIUIL3",56,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUERR"",$J)"
"RTN","TIUIL3",57,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^8^7"
"RTN","TIUIL3",58,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^4^^H"
"RTN","TIUIL3",59,0)
 .S ^SD(409.61,VALM,"COL",3,0)="EVENT DATE/TIME^65^15^Event Date/time"
"RTN","TIUIL3",60,0)
 .S ^SD(409.61,VALM,"COL",4,0)="RESOL DATE/TIME^82^15^Resol Date/time"
"RTN","TIUIL3",61,0)
 .S ^SD(409.61,VALM,"COL",5,0)="USER NAME^99^16^User Name"
"RTN","TIUIL3",62,0)
 .S ^SD(409.61,VALM,"COL",6,0)="DESCRIPTION^6^80"
"RTN","TIUIL3",63,0)
 .S ^SD(409.61,VALM,"COL",7,0)="DOCUMENT TYPE^6^36^Document Type^^1"
"RTN","TIUIL3",64,0)
 .S ^SD(409.61,VALM,"COL",8,0)="EVENT TYPE^44^19^Event Type"
"RTN","TIUIL3",65,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,7)=""
"RTN","TIUIL3",66,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUELST"
"RTN","TIUIL3",67,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUELST"
"RTN","TIUIL3",68,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL3",69,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIUELST"
"RTN","TIUIL3",70,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL3",71,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL3",72,0)
 ;
"RTN","TIUIL3",73,0)
 D BMES^XPDUTL("'TIU REVIEW PN CLINICIAN' List Template...")
"RTN","TIUIL3",74,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW PN CLINICIAN",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL3",75,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW PN CLINICIAN" D FILE^DICN S VALM=+Y
"RTN","TIUIL3",76,0)
 I VALM>0 D
"RTN","TIUIL3",77,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW PN CLINICIAN^1^^135^4^17^1^1^Progress Note^TIU ACTION MENU CLINICIAN^Progress Notes"
"RTN","TIUIL3",78,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL3",79,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL3",80,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^13^9"
"RTN","TIUIL3",81,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^4"
"RTN","TIUIL3",82,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^63^19^Status"
"RTN","TIUIL3",83,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL3",84,0)
 .S ^SD(409.61,VALM,"COL",4,0)="REF DATE^53^8^Ref Date"
"RTN","TIUIL3",85,0)
 .S ^SD(409.61,VALM,"COL",5,0)="SIG DATE^82^8^Completed"
"RTN","TIUIL3",86,0)
 .S ^SD(409.61,VALM,"COL",10,0)="LAST I/LAST 4^20^7^^^0"
"RTN","TIUIL3",87,0)
 .S ^SD(409.61,VALM,"COL",11,0)="AUTHOR^92^15^Author"
"RTN","TIUIL3",88,0)
 .S ^SD(409.61,VALM,"COL",12,0)="COSIGNER^109^15^Cosigner"
"RTN","TIUIL3",89,0)
 .S ^SD(409.61,VALM,"COL",13,0)="DOCUMENT TYPE^28^24^Document^^1"
"RTN","TIUIL3",90,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",0,10)=""
"RTN","TIUIL3",91,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,13)=""
"RTN","TIUIL3",92,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUR"
"RTN","TIUIL3",93,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURH"
"RTN","TIUIL3",94,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL3",95,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIUR(3)"
"RTN","TIUIL3",96,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL3",97,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL3",98,0)
 ;
"RTN","TIUIL3",99,0)
 G ^TIUIL4
"RTN","TIUIL4")
0^73^B21699501
"RTN","TIUIL4",1,0)
TIUIL4 ; List Template Exporter ; 20-JUN-1997
"RTN","TIUIL4",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUIL4",3,0)
 D BMES^XPDUTL("'TIU REVIEW PN MGR' List Template...")
"RTN","TIUIL4",4,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW PN MGR",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL4",5,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW PN MGR" D FILE^DICN S VALM=+Y
"RTN","TIUIL4",6,0)
 I VALM>0 D
"RTN","TIUIL4",7,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW PN MGR^1^^145^4^18^1^1^Progress Note^TIU ACTION MENU MGR REVIEW^Progress Notes"
"RTN","TIUIL4",8,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL4",9,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL4",10,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^12^11"
"RTN","TIUIL4",11,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^5"
"RTN","TIUIL4",12,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^99^10^Status"
"RTN","TIUIL4",13,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL4",14,0)
 .S ^SD(409.61,VALM,"COL",4,0)="DISCH DATE^72^8^Disch'd"
"RTN","TIUIL4",15,0)
 .S ^SD(409.61,VALM,"COL",5,0)="DICT DATE^82^8^Dictated"
"RTN","TIUIL4",16,0)
 .S ^SD(409.61,VALM,"COL",6,0)="LINE COUNT^92^5^Lines"
"RTN","TIUIL4",17,0)
 .S ^SD(409.61,VALM,"COL",8,0)="ADMISSION DATE^62^8^Admitted"
"RTN","TIUIL4",18,0)
 .S ^SD(409.61,VALM,"COL",9,0)="LAST I/LAST 4^20^8^^^1"
"RTN","TIUIL4",19,0)
 .S ^SD(409.61,VALM,"COL",10,0)="AUTHOR^111^15^Author"
"RTN","TIUIL4",20,0)
 .S ^SD(409.61,VALM,"COL",11,0)="ATTENDING^128^15^Attending"
"RTN","TIUIL4",21,0)
 .S ^SD(409.61,VALM,"COL",12,0)="DOCUMENT TYPE^29^31^Document"
"RTN","TIUIL4",22,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,9)=""
"RTN","TIUIL4",23,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIURM"
"RTN","TIUIL4",24,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURMH"
"RTN","TIUIL4",25,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL4",26,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIURM(3)"
"RTN","TIUIL4",27,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL4",28,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL4",29,0)
 ;
"RTN","TIUIL4",30,0)
 D BMES^XPDUTL("'TIU REVIEW PN MRT' List Template...")
"RTN","TIUIL4",31,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW PN MRT",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL4",32,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW PN MRT" D FILE^DICN S VALM=+Y
"RTN","TIUIL4",33,0)
 I VALM>0 D
"RTN","TIUIL4",34,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW PN MRT^1^^145^4^18^1^1^Progress Note^TIU ACTION MENU MRT REVIEW^Progress Notes"
"RTN","TIUIL4",35,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL4",36,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL4",37,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^12^11"
"RTN","TIUIL4",38,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^5"
"RTN","TIUIL4",39,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^99^10^Status"
"RTN","TIUIL4",40,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL4",41,0)
 .S ^SD(409.61,VALM,"COL",4,0)="DISCH DATE^72^8^Disch'd"
"RTN","TIUIL4",42,0)
 .S ^SD(409.61,VALM,"COL",5,0)="DICT DATE^82^8^Dictated"
"RTN","TIUIL4",43,0)
 .S ^SD(409.61,VALM,"COL",6,0)="LINE COUNT^92^5^Lines"
"RTN","TIUIL4",44,0)
 .S ^SD(409.61,VALM,"COL",8,0)="ADMISSION DATE^62^8^Admitted"
"RTN","TIUIL4",45,0)
 .S ^SD(409.61,VALM,"COL",9,0)="LAST I/LAST 4^20^8^^^1"
"RTN","TIUIL4",46,0)
 .S ^SD(409.61,VALM,"COL",10,0)="AUTHOR^111^15^Author"
"RTN","TIUIL4",47,0)
 .S ^SD(409.61,VALM,"COL",11,0)="ATTENDING^128^15^Attending"
"RTN","TIUIL4",48,0)
 .S ^SD(409.61,VALM,"COL",12,0)="DOCUMENT TYPE^29^31^Document"
"RTN","TIUIL4",49,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,9)=""
"RTN","TIUIL4",50,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIURM"
"RTN","TIUIL4",51,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURMH"
"RTN","TIUIL4",52,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL4",53,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIURM(3)"
"RTN","TIUIL4",54,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL4",55,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL4",56,0)
 ;
"RTN","TIUIL4",57,0)
 D BMES^XPDUTL("'TIU REVIEW SCREEN CLINICIAN' List Template...")
"RTN","TIUIL4",58,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW SCREEN CLINICIAN",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL4",59,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW SCREEN CLINICIAN" D FILE^DICN S VALM=+Y
"RTN","TIUIL4",60,0)
 I VALM>0 D
"RTN","TIUIL4",61,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW SCREEN CLINICIAN^1^^135^4^17^1^1^Document^TIU ACTION MENU CLINICIAN^Clinical Documents^"
"RTN","TIUIL4",62,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL4",63,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL4",64,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^13^9"
"RTN","TIUIL4",65,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^5^^"
"RTN","TIUIL4",66,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^70^10^Status"
"RTN","TIUIL4",67,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient^^"
"RTN","TIUIL4",68,0)
 .S ^SD(409.61,VALM,"COL",4,0)="REF DATE^60^8^Ref Date"
"RTN","TIUIL4",69,0)
 .S ^SD(409.61,VALM,"COL",5,0)="SIG DATE^82^8^Completed"
"RTN","TIUIL4",70,0)
 .S ^SD(409.61,VALM,"COL",10,0)="LAST I/LAST 4^20^7^^^0"
"RTN","TIUIL4",71,0)
 .S ^SD(409.61,VALM,"COL",11,0)="AUTHOR^92^15^Author"
"RTN","TIUIL4",72,0)
 .S ^SD(409.61,VALM,"COL",12,0)="COSIGNER^109^15^Cosigner"
"RTN","TIUIL4",73,0)
 .S ^SD(409.61,VALM,"COL",13,0)="DOCUMENT TYPE^28^31^Document^^1"
"RTN","TIUIL4",74,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",0,10)=""
"RTN","TIUIL4",75,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,13)=""
"RTN","TIUIL4",76,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUR"
"RTN","TIUIL4",77,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURH"
"RTN","TIUIL4",78,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL4",79,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIUR(38)"
"RTN","TIUIL4",80,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL4",81,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL4",82,0)
 ;
"RTN","TIUIL4",83,0)
 D BMES^XPDUTL("'TIU REVIEW SCREEN DS UNSIGNED' List Template...")
"RTN","TIUIL4",84,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW SCREEN DS UNSIGNED",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL4",85,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW SCREEN DS UNSIGNED" D FILE^DICN S VALM=+Y
"RTN","TIUIL4",86,0)
 G ^TIUIL5
"RTN","TIUIL5")
0^74^B29279419
"RTN","TIUIL5",1,0)
TIUIL5 ; List Template Exporter ; 20-JUN-1997
"RTN","TIUIL5",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUIL5",3,0)
 I VALM>0 D
"RTN","TIUIL5",4,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW SCREEN DS UNSIGNED^1^^135^4^18^1^1^Discharge Summary^TIU ACTION MENU CLINICIAN^Discharge Summaries"
"RTN","TIUIL5",5,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL5",6,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL5",7,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^13^9"
"RTN","TIUIL5",8,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^5"
"RTN","TIUIL5",9,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^70^10^Status"
"RTN","TIUIL5",10,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL5",11,0)
 .S ^SD(409.61,VALM,"COL",4,0)="REF DATE^60^8^Ref Date"
"RTN","TIUIL5",12,0)
 .S ^SD(409.61,VALM,"COL",5,0)="SIG DATE^82^8^Completed"
"RTN","TIUIL5",13,0)
 .S ^SD(409.61,VALM,"COL",10,0)="LAST I/LAST 4^20^7^^^0"
"RTN","TIUIL5",14,0)
 .S ^SD(409.61,VALM,"COL",11,0)="AUTHOR^92^15^Author"
"RTN","TIUIL5",15,0)
 .S ^SD(409.61,VALM,"COL",12,0)="COSIGNER^109^15^Cosigner"
"RTN","TIUIL5",16,0)
 .S ^SD(409.61,VALM,"COL",13,0)="DOCUMENT TYPE^28^31^Document^^1"
"RTN","TIUIL5",17,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",0,10)=""
"RTN","TIUIL5",18,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,13)=""
"RTN","TIUIL5",19,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUR"
"RTN","TIUIL5",20,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURH"
"RTN","TIUIL5",21,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL5",22,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIUR(244)"
"RTN","TIUIL5",23,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL5",24,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL5",25,0)
 ;
"RTN","TIUIL5",26,0)
 D BMES^XPDUTL("'TIU REVIEW SCREEN MGR' List Template...")
"RTN","TIUIL5",27,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW SCREEN MGR",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL5",28,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW SCREEN MGR" D FILE^DICN S VALM=+Y
"RTN","TIUIL5",29,0)
 I VALM>0 D
"RTN","TIUIL5",30,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW SCREEN MGR^1^^145^4^18^1^1^Document^TIU ACTION MENU MGR REVIEW^CLINICAL DOCUMENTS"
"RTN","TIUIL5",31,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL5",32,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL5",33,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^12^11"
"RTN","TIUIL5",34,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^5"
"RTN","TIUIL5",35,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^99^10^Status"
"RTN","TIUIL5",36,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL5",37,0)
 .S ^SD(409.61,VALM,"COL",4,0)="DISCH DATE^72^8^Disch'd"
"RTN","TIUIL5",38,0)
 .S ^SD(409.61,VALM,"COL",5,0)="DICT DATE^82^8^Dictated"
"RTN","TIUIL5",39,0)
 .S ^SD(409.61,VALM,"COL",6,0)="LINE COUNT^92^5^Lines"
"RTN","TIUIL5",40,0)
 .S ^SD(409.61,VALM,"COL",8,0)="ADMISSION DATE^62^8^Admitted"
"RTN","TIUIL5",41,0)
 .S ^SD(409.61,VALM,"COL",9,0)="LAST I/LAST 4^20^8^^^1"
"RTN","TIUIL5",42,0)
 .S ^SD(409.61,VALM,"COL",10,0)="AUTHOR^111^15^Author"
"RTN","TIUIL5",43,0)
 .S ^SD(409.61,VALM,"COL",11,0)="ATTENDING^128^15^Attending"
"RTN","TIUIL5",44,0)
 .S ^SD(409.61,VALM,"COL",12,0)="DOCUMENT TYPE^29^31^Document"
"RTN","TIUIL5",45,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,9)=""
"RTN","TIUIL5",46,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIURM"
"RTN","TIUIL5",47,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURMH"
"RTN","TIUIL5",48,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL5",49,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIURM(38)"
"RTN","TIUIL5",50,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL5",51,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL5",52,0)
 ;
"RTN","TIUIL5",53,0)
 D BMES^XPDUTL("'TIU REVIEW SCREEN MRT' List Template...")
"RTN","TIUIL5",54,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW SCREEN MRT",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL5",55,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW SCREEN MRT" D FILE^DICN S VALM=+Y
"RTN","TIUIL5",56,0)
 I VALM>0 D
"RTN","TIUIL5",57,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW SCREEN MRT^1^^145^4^18^1^1^Document^TIU ACTION MENU MRT REVIEW^CLINICAL DOCUMENTS"
"RTN","TIUIL5",58,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL5",59,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL5",60,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^12^11"
"RTN","TIUIL5",61,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^5"
"RTN","TIUIL5",62,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^99^10^Status"
"RTN","TIUIL5",63,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL5",64,0)
 .S ^SD(409.61,VALM,"COL",4,0)="DISCH DATE^72^8^Disch'd"
"RTN","TIUIL5",65,0)
 .S ^SD(409.61,VALM,"COL",5,0)="DICT DATE^82^8^Dictated"
"RTN","TIUIL5",66,0)
 .S ^SD(409.61,VALM,"COL",6,0)="LINE COUNT^92^5^Lines"
"RTN","TIUIL5",67,0)
 .S ^SD(409.61,VALM,"COL",8,0)="ADMISSION DATE^62^8^Admitted"
"RTN","TIUIL5",68,0)
 .S ^SD(409.61,VALM,"COL",9,0)="LAST I/LAST 4^20^8^^^1"
"RTN","TIUIL5",69,0)
 .S ^SD(409.61,VALM,"COL",10,0)="AUTHOR^111^15^Author"
"RTN","TIUIL5",70,0)
 .S ^SD(409.61,VALM,"COL",11,0)="ATTENDING^128^15^Attending"
"RTN","TIUIL5",71,0)
 .S ^SD(409.61,VALM,"COL",12,0)="DOCUMENT TYPE^29^31^Document"
"RTN","TIUIL5",72,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,9)=""
"RTN","TIUIL5",73,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIURM"
"RTN","TIUIL5",74,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURMH"
"RTN","TIUIL5",75,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL5",76,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIURM(38)"
"RTN","TIUIL5",77,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL5",78,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL5",79,0)
 ;
"RTN","TIUIL5",80,0)
 D BMES^XPDUTL("'TIU REVIEW SCREEN PN UNSIGNED' List Template...")
"RTN","TIUIL5",81,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW SCREEN PN UNSIGNED",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL5",82,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW SCREEN PN UNSIGNED" D FILE^DICN S VALM=+Y
"RTN","TIUIL5",83,0)
 I VALM>0 D
"RTN","TIUIL5",84,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW SCREEN PN UNSIGNED^1^^135^4^18^1^1^Progress Note^TIU ACTION MENU CLINICIAN^Progress Notes"
"RTN","TIUIL5",85,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL5",86,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL5",87,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^13^9"
"RTN","TIUIL5",88,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^5"
"RTN","TIUIL5",89,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^70^10^Status"
"RTN","TIUIL5",90,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL5",91,0)
 .S ^SD(409.61,VALM,"COL",4,0)="REF DATE^60^8^Ref Date"
"RTN","TIUIL5",92,0)
 .S ^SD(409.61,VALM,"COL",5,0)="SIG DATE^82^8^Completed"
"RTN","TIUIL5",93,0)
 .S ^SD(409.61,VALM,"COL",10,0)="LAST I/LAST 4^20^7^^^0"
"RTN","TIUIL5",94,0)
 .S ^SD(409.61,VALM,"COL",11,0)="AUTHOR^92^15^Author"
"RTN","TIUIL5",95,0)
 .S ^SD(409.61,VALM,"COL",12,0)="COSIGNER^109^15^Cosigner"
"RTN","TIUIL5",96,0)
 .S ^SD(409.61,VALM,"COL",13,0)="DOCUMENT TYPE^28^31^Document^^1"
"RTN","TIUIL5",97,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",0,10)=""
"RTN","TIUIL5",98,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,13)=""
"RTN","TIUIL5",99,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUR"
"RTN","TIUIL5",100,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURH"
"RTN","TIUIL5",101,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL5",102,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIUR(3)"
"RTN","TIUIL5",103,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL5",104,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL5",105,0)
 ;
"RTN","TIUIL5",106,0)
 G ^TIUIL6
"RTN","TIUIL6")
0^75^B22066969
"RTN","TIUIL6",1,0)
TIUIL6 ; List Template Exporter ; 20-JUN-1997
"RTN","TIUIL6",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUIL6",3,0)
 D BMES^XPDUTL("'TIU REVIEW SCREEN READ ONLY' List Template...")
"RTN","TIUIL6",4,0)
 S DA=$O(^SD(409.61,"B","TIU REVIEW SCREEN READ ONLY",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL6",5,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU REVIEW SCREEN READ ONLY" D FILE^DICN S VALM=+Y
"RTN","TIUIL6",6,0)
 I VALM>0 D
"RTN","TIUIL6",7,0)
 .S ^SD(409.61,VALM,0)="TIU REVIEW SCREEN READ ONLY^1^^135^4^18^1^1^Document^TIU ACTION MENU READ-ONLY^Clinical Documents"
"RTN","TIUIL6",8,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS"
"RTN","TIUIL6",9,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL6",10,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^13^9"
"RTN","TIUIL6",11,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^5"
"RTN","TIUIL6",12,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^70^10^Status"
"RTN","TIUIL6",13,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL6",14,0)
 .S ^SD(409.61,VALM,"COL",4,0)="REF DATE^60^8^Ref Date"
"RTN","TIUIL6",15,0)
 .S ^SD(409.61,VALM,"COL",5,0)="SIG DATE^82^8^Completed"
"RTN","TIUIL6",16,0)
 .S ^SD(409.61,VALM,"COL",10,0)="LAST I/LAST 4^20^7"
"RTN","TIUIL6",17,0)
 .S ^SD(409.61,VALM,"COL",11,0)="AUTHOR^92^15^Author"
"RTN","TIUIL6",18,0)
 .S ^SD(409.61,VALM,"COL",12,0)="COSIGNER^109^15^Cosigner"
"RTN","TIUIL6",19,0)
 .S ^SD(409.61,VALM,"COL",13,0)="DOCUMENT TYPE^28^31^Document"
"RTN","TIUIL6",20,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUR"
"RTN","TIUIL6",21,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURH"
"RTN","TIUIL6",22,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL6",23,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIUR(38)"
"RTN","TIUIL6",24,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL6",25,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL6",26,0)
 ;
"RTN","TIUIL6",27,0)
 D BMES^XPDUTL("'TIU SEARCH LIST MGR' List Template...")
"RTN","TIUIL6",28,0)
 S DA=$O(^SD(409.61,"B","TIU SEARCH LIST MGR",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL6",29,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU SEARCH LIST MGR" D FILE^DICN S VALM=+Y
"RTN","TIUIL6",30,0)
 I VALM>0 D
"RTN","TIUIL6",31,0)
 .S ^SD(409.61,VALM,0)="TIU SEARCH LIST MGR^1^^135^4^18^1^1^Document^TIU ACTION MENU MGR^CLINICAL DOCUMENTS"
"RTN","TIUIL6",32,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL6",33,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL6",34,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^13^9"
"RTN","TIUIL6",35,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^5"
"RTN","TIUIL6",36,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^70^10^Status"
"RTN","TIUIL6",37,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL6",38,0)
 .S ^SD(409.61,VALM,"COL",4,0)="REF DATE^60^8^Ref Date"
"RTN","TIUIL6",39,0)
 .S ^SD(409.61,VALM,"COL",5,0)="SIG DATE^82^8^Completed"
"RTN","TIUIL6",40,0)
 .S ^SD(409.61,VALM,"COL",10,0)="LAST I/LAST 4^20^7^^^"
"RTN","TIUIL6",41,0)
 .S ^SD(409.61,VALM,"COL",11,0)="AUTHOR^92^15^Author"
"RTN","TIUIL6",42,0)
 .S ^SD(409.61,VALM,"COL",12,0)="COSIGNER^109^15^Cosigner"
"RTN","TIUIL6",43,0)
 .S ^SD(409.61,VALM,"COL",13,0)="DOCUMENT TYPE^28^31^Document^^1"
"RTN","TIUIL6",44,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,13)=""
"RTN","TIUIL6",45,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUR"
"RTN","TIUIL6",46,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURH"
"RTN","TIUIL6",47,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL6",48,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIUR(38)"
"RTN","TIUIL6",49,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL6",50,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL6",51,0)
 ;
"RTN","TIUIL6",52,0)
 D BMES^XPDUTL("'TIU SEARCH LIST MRT' List Template...")
"RTN","TIUIL6",53,0)
 S DA=$O(^SD(409.61,"B","TIU SEARCH LIST MRT",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL6",54,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU SEARCH LIST MRT" D FILE^DICN S VALM=+Y
"RTN","TIUIL6",55,0)
 I VALM>0 D
"RTN","TIUIL6",56,0)
 .S ^SD(409.61,VALM,0)="TIU SEARCH LIST MRT^1^^135^4^18^1^1^Document^TIU ACTION MENU MRT^CLINICAL DOCUMENTS"
"RTN","TIUIL6",57,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS ADVANCED"
"RTN","TIUIL6",58,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUR"",$J)"
"RTN","TIUIL6",59,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^13^9"
"RTN","TIUIL6",60,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^5"
"RTN","TIUIL6",61,0)
 .S ^SD(409.61,VALM,"COL",2,0)="STATUS^70^10^Status"
"RTN","TIUIL6",62,0)
 .S ^SD(409.61,VALM,"COL",3,0)="PATIENT NAME^6^14^Patient"
"RTN","TIUIL6",63,0)
 .S ^SD(409.61,VALM,"COL",4,0)="REF DATE^60^8^Ref Date"
"RTN","TIUIL6",64,0)
 .S ^SD(409.61,VALM,"COL",5,0)="SIG DATE^82^8^Completed"
"RTN","TIUIL6",65,0)
 .S ^SD(409.61,VALM,"COL",10,0)="LAST I/LAST 4^20^7"
"RTN","TIUIL6",66,0)
 .S ^SD(409.61,VALM,"COL",11,0)="AUTHOR^92^15^Author"
"RTN","TIUIL6",67,0)
 .S ^SD(409.61,VALM,"COL",12,0)="COSIGNER^109^15^Cosigner"
"RTN","TIUIL6",68,0)
 .S ^SD(409.61,VALM,"COL",13,0)="DOCUMENT TYPE^28^31^Document^^1"
"RTN","TIUIL6",69,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,13)=""
"RTN","TIUIL6",70,0)
 .S ^SD(409.61,VALM,"FNL")="D CLEAN^TIUR"
"RTN","TIUIL6",71,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIURH"
"RTN","TIUIL6",72,0)
 .S ^SD(409.61,VALM,"HLP")="D PROTOCOL^TIUHELP"
"RTN","TIUIL6",73,0)
 .S ^SD(409.61,VALM,"INIT")="D MAKELIST^TIUR(38)"
"RTN","TIUIL6",74,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL6",75,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL6",76,0)
 ;
"RTN","TIUIL6",77,0)
 D BMES^XPDUTL("'TIU SEND BACK' List Template...")
"RTN","TIUIL6",78,0)
 S DA=$O(^SD(409.61,"B","TIU SEND BACK",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL6",79,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU SEND BACK" D FILE^DICN S VALM=+Y
"RTN","TIUIL6",80,0)
 I VALM>0 D
"RTN","TIUIL6",81,0)
 .S ^SD(409.61,VALM,0)="TIU SEND BACK^1^^^5^18^1^1^Document^TIU ACTION MENU SEND BACK^REVIEW/SEND BACK"
"RTN","TIUIL6",82,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS BROWSE"
"RTN","TIUIL6",83,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUVIEW"",$J)"
"RTN","TIUIL6",84,0)
 .S ^SD(409.61,VALM,"FNL")="S VALMBCK=""Q"""
"RTN","TIUIL6",85,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUBR"
"RTN","TIUIL6",86,0)
 .S ^SD(409.61,VALM,"HLP")="D FULL^VALM1,PROTOCOL^TIUHELP S VALMBCK=""R"""
"RTN","TIUIL6",87,0)
 .S ^SD(409.61,VALM,"INIT")="D EN^TIUBR"
"RTN","TIUIL6",88,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL6",89,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL6",90,0)
 ;
"RTN","TIUIL6",91,0)
 G ^TIUIL7
"RTN","TIUIL7")
0^76^B24775646
"RTN","TIUIL7",1,0)
TIUIL7 ; List Template Exporter ; 20-JUN-1997
"RTN","TIUIL7",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUIL7",3,0)
 D BMES^XPDUTL("'TIU SIGN ON CHART' List Template...")
"RTN","TIUIL7",4,0)
 S DA=$O(^SD(409.61,"B","TIU SIGN ON CHART",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL7",5,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU SIGN ON CHART" D FILE^DICN S VALM=+Y
"RTN","TIUIL7",6,0)
 I VALM>0 D
"RTN","TIUIL7",7,0)
 .S ^SD(409.61,VALM,0)="TIU SIGN ON CHART^1^^^5^18^1^1^Document^TIU ACTION MENU SIGN ON CHART^Sign On Chart"
"RTN","TIUIL7",8,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS BROWSE"
"RTN","TIUIL7",9,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUVIEW"",$J)"
"RTN","TIUIL7",10,0)
 .S ^SD(409.61,VALM,"FNL")="S VALMBCK=""Q"""
"RTN","TIUIL7",11,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUBR"
"RTN","TIUIL7",12,0)
 .S ^SD(409.61,VALM,"HLP")="D FULL^VALM1,PROTOCOL^TIUHELP S VALMBCK=""R"""
"RTN","TIUIL7",13,0)
 .S ^SD(409.61,VALM,"INIT")="D EN^TIUBR"
"RTN","TIUIL7",14,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL7",15,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL7",16,0)
 ;
"RTN","TIUIL7",17,0)
 D BMES^XPDUTL("'TIU SIGN/COSIGN' List Template...")
"RTN","TIUIL7",18,0)
 S DA=$O(^SD(409.61,"B","TIU SIGN/COSIGN",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL7",19,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU SIGN/COSIGN" D FILE^DICN S VALM=+Y
"RTN","TIUIL7",20,0)
 I VALM>0 D
"RTN","TIUIL7",21,0)
 .S ^SD(409.61,VALM,0)="TIU SIGN/COSIGN^1^^^5^18^1^1^Document^TIU ACTION MENU SIGN/COSIGN^SIGN/COSIGN"
"RTN","TIUIL7",22,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS BROWSE"
"RTN","TIUIL7",23,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUVIEW"",$J)"
"RTN","TIUIL7",24,0)
 .S ^SD(409.61,VALM,"FNL")="S VALMBCK=""Q"""
"RTN","TIUIL7",25,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUBR"
"RTN","TIUIL7",26,0)
 .S ^SD(409.61,VALM,"HLP")="D FULL^VALM1,PROTOCOL^TIUHELP S VALMBCK=""R"""
"RTN","TIUIL7",27,0)
 .S ^SD(409.61,VALM,"INIT")="D EN^TIUBR"
"RTN","TIUIL7",28,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL7",29,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL7",30,0)
 ;
"RTN","TIUIL7",31,0)
 D BMES^XPDUTL("'TIU VERIFY' List Template...")
"RTN","TIUIL7",32,0)
 S DA=$O(^SD(409.61,"B","TIU VERIFY",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL7",33,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIU VERIFY" D FILE^DICN S VALM=+Y
"RTN","TIUIL7",34,0)
 I VALM>0 D
"RTN","TIUIL7",35,0)
 .S ^SD(409.61,VALM,0)="TIU VERIFY^1^^^5^18^1^1^Document^TIU ACTION MENU VERIFY^Verify Document"
"RTN","TIUIL7",36,0)
 .S ^SD(409.61,VALM,1)="^TIU HIDDEN ACTIONS BROWSE"
"RTN","TIUIL7",37,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUVIEW"",$J)"
"RTN","TIUIL7",38,0)
 .S ^SD(409.61,VALM,"FNL")="S VALMBCK=""Q"""
"RTN","TIUIL7",39,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUBR"
"RTN","TIUIL7",40,0)
 .S ^SD(409.61,VALM,"HLP")="D FULL^VALM1,PROTOCOL^TIUHELP S VALMBCK=""R"""
"RTN","TIUIL7",41,0)
 .S ^SD(409.61,VALM,"INIT")="D EN^TIUBR"
"RTN","TIUIL7",42,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL7",43,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL7",44,0)
 ;
"RTN","TIUIL7",45,0)
 D BMES^XPDUTL("'TIUFA SORT DDEFS CLIN' List Template...")
"RTN","TIUIL7",46,0)
 S DA=$O(^SD(409.61,"B","TIUFA SORT DDEFS CLIN",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL7",47,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFA SORT DDEFS CLIN" D FILE^DICN S VALM=+Y
"RTN","TIUIL7",48,0)
 I VALM>0 D
"RTN","TIUIL7",49,0)
 .S ^SD(409.61,VALM,0)="TIUFA SORT DDEFS CLIN^1^^186^5^18^1^1^Entry^TIUFA ACTION MENU CLIN^Sort Docmt Definitions^1^^1"
"RTN","TIUIL7",50,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL7",51,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF1"",$J)"
"RTN","TIUIL7",52,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^19^11"
"RTN","TIUIL7",53,0)
 .S ^SD(409.61,VALM,"COL",2,0)="NUMBER^1^6"
"RTN","TIUIL7",54,0)
 .S ^SD(409.61,VALM,"COL",3,0)="NAME1^8^40^Name^^1"
"RTN","TIUIL7",55,0)
 .S ^SD(409.61,VALM,"COL",11,0)="NAME2^48^27"
"RTN","TIUIL7",56,0)
 .S ^SD(409.61,VALM,"COL",12,0)="TYPE^77^4^Type"
"RTN","TIUIL7",57,0)
 .S ^SD(409.61,VALM,"COL",13,0)="NATIONAL^82^4^Natl"
"RTN","TIUIL7",58,0)
 .S ^SD(409.61,VALM,"COL",14,0)="STATUS^88^6^Status"
"RTN","TIUIL7",59,0)
 .S ^SD(409.61,VALM,"COL",15,0)="OWNER^96^7^Owner"
"RTN","TIUIL7",60,0)
 .S ^SD(409.61,VALM,"COL",16,0)="INUSE^105^6^In Use"
"RTN","TIUIL7",61,0)
 .S ^SD(409.61,VALM,"COL",17,0)="BOIL^113^4^Boil"
"RTN","TIUIL7",62,0)
 .S ^SD(409.61,VALM,"COL",18,0)="ITEMS^119^5^Items"
"RTN","TIUIL7",63,0)
 .S ^SD(409.61,VALM,"COL",19,0)="PRINTNM^126^60^Print Name"
"RTN","TIUIL7",64,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,3)=""
"RTN","TIUIL7",65,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFA"
"RTN","TIUIL7",66,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFA"
"RTN","TIUIL7",67,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL7",68,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFA"
"RTN","TIUIL7",69,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL7",70,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL7",71,0)
 ;
"RTN","TIUIL7",72,0)
 D BMES^XPDUTL("'TIUFA SORT DDEFS MGR' List Template...")
"RTN","TIUIL7",73,0)
 S DA=$O(^SD(409.61,"B","TIUFA SORT DDEFS MGR",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL7",74,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFA SORT DDEFS MGR" D FILE^DICN S VALM=+Y
"RTN","TIUIL7",75,0)
 I VALM>0 D
"RTN","TIUIL7",76,0)
 .S ^SD(409.61,VALM,0)="TIUFA SORT DDEFS MGR^1^^195^5^18^1^1^Entry^TIUFA ACTION MENU MGR^Sort Docmt Definitions^1^^1"
"RTN","TIUIL7",77,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL7",78,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF1"",$J)"
"RTN","TIUIL7",79,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^21^12"
"RTN","TIUIL7",80,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^6"
"RTN","TIUIL7",81,0)
 .S ^SD(409.61,VALM,"COL",6,0)="NAME1^8^40^Name^^1"
"RTN","TIUIL7",82,0)
 .S ^SD(409.61,VALM,"COL",12,0)="NAME2^48^27"
"RTN","TIUIL7",83,0)
 .S ^SD(409.61,VALM,"COL",13,0)="TYPE^77^4^Type"
"RTN","TIUIL7",84,0)
 .S ^SD(409.61,VALM,"COL",14,0)="IFN^82^7^    IFN"
"RTN","TIUIL7",85,0)
 .S ^SD(409.61,VALM,"COL",15,0)="NATIONAL^91^4^Natl"
"RTN","TIUIL7",86,0)
 .S ^SD(409.61,VALM,"COL",16,0)="STATUS^97^6^Status"
"RTN","TIUIL7",87,0)
 .S ^SD(409.61,VALM,"COL",17,0)="OWNER^105^7^Owner"
"RTN","TIUIL7",88,0)
 .S ^SD(409.61,VALM,"COL",18,0)="INUSE^114^6^In Use"
"RTN","TIUIL7",89,0)
 .S ^SD(409.61,VALM,"COL",19,0)="BOIL^122^4^Boil"
"RTN","TIUIL7",90,0)
 .S ^SD(409.61,VALM,"COL",20,0)="ITEMS^128^5^Items"
"RTN","TIUIL7",91,0)
 .S ^SD(409.61,VALM,"COL",21,0)="PRINTNM^135^60^Print Name"
"RTN","TIUIL7",92,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,6)=""
"RTN","TIUIL7",93,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFA"
"RTN","TIUIL7",94,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFA"
"RTN","TIUIL7",95,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL7",96,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFA"
"RTN","TIUIL7",97,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL7",98,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL7",99,0)
 ;
"RTN","TIUIL7",100,0)
 G ^TIUIL8
"RTN","TIUIL8")
0^77^B30561887
"RTN","TIUIL8",1,0)
TIUIL8 ; List Template Exporter ; 20-JUN-1997
"RTN","TIUIL8",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUIL8",3,0)
 D BMES^XPDUTL("'TIUFC CREATE DDEFS MGR' List Template...")
"RTN","TIUIL8",4,0)
 S DA=$O(^SD(409.61,"B","TIUFC CREATE DDEFS MGR",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL8",5,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFC CREATE DDEFS MGR" D FILE^DICN S VALM=+Y
"RTN","TIUIL8",6,0)
 I VALM>0 D
"RTN","TIUIL8",7,0)
 .S ^SD(409.61,VALM,0)="TIUFC CREATE DDEFS MGR^1^^188^5^18^1^1^Entry^TIUFC ACTION MENU^Create Document Definitions^1^^1"
"RTN","TIUIL8",8,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL8",9,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF1"",$J)"
"RTN","TIUIL8",10,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^19^11"
"RTN","TIUIL8",11,0)
 .S ^SD(409.61,VALM,"COL",9,0)="NUMBER^1^6"
"RTN","TIUIL8",12,0)
 .S ^SD(409.61,VALM,"COL",10,0)="NAME1^8^40^Name^^1"
"RTN","TIUIL8",13,0)
 .S ^SD(409.61,VALM,"COL",11,0)="NAME2^48^27"
"RTN","TIUIL8",14,0)
 .S ^SD(409.61,VALM,"COL",12,0)="TYPE^77^4^Type"
"RTN","TIUIL8",15,0)
 .S ^SD(409.61,VALM,"COL",13,0)="IFN^82^7^    IFN"
"RTN","TIUIL8",16,0)
 .S ^SD(409.61,VALM,"COL",14,0)="NATIONAL^91^4^Natl"
"RTN","TIUIL8",17,0)
 .S ^SD(409.61,VALM,"COL",15,0)="STATUS^97^6^Status"
"RTN","TIUIL8",18,0)
 .S ^SD(409.61,VALM,"COL",16,0)="OWNER^105^7^Owner"
"RTN","TIUIL8",19,0)
 .S ^SD(409.61,VALM,"COL",17,0)="INUSE^114^6^In Use"
"RTN","TIUIL8",20,0)
 .S ^SD(409.61,VALM,"COL",18,0)="BOIL^122^4^Boil"
"RTN","TIUIL8",21,0)
 .S ^SD(409.61,VALM,"COL",19,0)="PRINTNM^128^60^Print Name"
"RTN","TIUIL8",22,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,10)=""
"RTN","TIUIL8",23,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFC"
"RTN","TIUIL8",24,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFC"
"RTN","TIUIL8",25,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL8",26,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFC"
"RTN","TIUIL8",27,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL8",28,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL8",29,0)
 ;
"RTN","TIUIL8",30,0)
 D BMES^XPDUTL("'TIUFD DISPLAY CLIN' List Template...")
"RTN","TIUIL8",31,0)
 S DA=$O(^SD(409.61,"B","TIUFD DISPLAY CLIN",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL8",32,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFD DISPLAY CLIN" D FILE^DICN S VALM=+Y
"RTN","TIUIL8",33,0)
 I VALM>0 D
"RTN","TIUIL8",34,0)
 .S ^SD(409.61,VALM,0)="TIUFD DISPLAY CLIN^1^^80^4^18^1^1^Entry^TIUFD ACTION MENU CLIN^Detailed Display^1^^1"
"RTN","TIUIL8",35,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL8",36,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF3"",$J)"
"RTN","TIUIL8",37,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^^0"
"RTN","TIUIL8",38,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFHA"
"RTN","TIUIL8",39,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFD"
"RTN","TIUIL8",40,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL8",41,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFD"
"RTN","TIUIL8",42,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL8",43,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL8",44,0)
 ;
"RTN","TIUIL8",45,0)
 D BMES^XPDUTL("'TIUFD DISPLAY MGR' List Template...")
"RTN","TIUIL8",46,0)
 S DA=$O(^SD(409.61,"B","TIUFD DISPLAY MGR",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL8",47,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFD DISPLAY MGR" D FILE^DICN S VALM=+Y
"RTN","TIUIL8",48,0)
 I VALM>0 D
"RTN","TIUIL8",49,0)
 .S ^SD(409.61,VALM,0)="TIUFD DISPLAY MGR^1^^80^4^18^1^1^^TIUFD ACTION MENU MGR^Detailed Display^1^^1"
"RTN","TIUIL8",50,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL8",51,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF3"",$J)"
"RTN","TIUIL8",52,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFHA"
"RTN","TIUIL8",53,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFD"
"RTN","TIUIL8",54,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL8",55,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFD"
"RTN","TIUIL8",56,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL8",57,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL8",58,0)
 ;
"RTN","TIUIL8",59,0)
 D BMES^XPDUTL("'TIUFD DISPLAY VIEW' List Template...")
"RTN","TIUIL8",60,0)
 S DA=$O(^SD(409.61,"B","TIUFD DISPLAY VIEW",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL8",61,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFD DISPLAY VIEW" D FILE^DICN S VALM=+Y
"RTN","TIUIL8",62,0)
 I VALM>0 D
"RTN","TIUIL8",63,0)
 .S ^SD(409.61,VALM,0)="TIUFD DISPLAY VIEW^1^^80^4^18^1^1^^TIUFD ACTION MENU VIEW^Detailed Display^1^^1"
"RTN","TIUIL8",64,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL8",65,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF3"",$J)"
"RTN","TIUIL8",66,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^^0"
"RTN","TIUIL8",67,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFHA"
"RTN","TIUIL8",68,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFD"
"RTN","TIUIL8",69,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL8",70,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFD"
"RTN","TIUIL8",71,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL8",72,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL8",73,0)
 ;
"RTN","TIUIL8",74,0)
 D BMES^XPDUTL("'TIUFDJ DISPLAY OBJECT MGR' List Template...")
"RTN","TIUIL8",75,0)
 S DA=$O(^SD(409.61,"B","TIUFDJ DISPLAY OBJECT MGR",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL8",76,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFDJ DISPLAY OBJECT MGR" D FILE^DICN S VALM=+Y
"RTN","TIUIL8",77,0)
 I VALM>0 D
"RTN","TIUIL8",78,0)
 .S ^SD(409.61,VALM,0)="TIUFDJ DISPLAY OBJECT MGR^1^^80^4^18^1^1^^TIUFDJ ACTION MENU MGR^Detailed Display^1^^1"
"RTN","TIUIL8",79,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL8",80,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF3"",$J)"
"RTN","TIUIL8",81,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFHA"
"RTN","TIUIL8",82,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFD"
"RTN","TIUIL8",83,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL8",84,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFD"
"RTN","TIUIL8",85,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL8",86,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL8",87,0)
 ;
"RTN","TIUIL8",88,0)
 D BMES^XPDUTL("'TIUFH EDIT DDEFS CLIN' List Template...")
"RTN","TIUIL8",89,0)
 S DA=$O(^SD(409.61,"B","TIUFH EDIT DDEFS CLIN",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL8",90,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFH EDIT DDEFS CLIN" D FILE^DICN S VALM=+Y
"RTN","TIUIL8",91,0)
 I VALM>0 D
"RTN","TIUIL8",92,0)
 .S ^SD(409.61,VALM,0)="TIUFH EDIT DDEFS CLIN^1^^179^5^18^1^1^Entry^TIUFH ACTION MENU CLIN^Edit Document Definitions^1^^1"
"RTN","TIUIL8",93,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL8",94,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF1"",$J)"
"RTN","TIUIL8",95,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^13^10"
"RTN","TIUIL8",96,0)
 .S ^SD(409.61,VALM,"COL",4,0)="NUMBER^1^6"
"RTN","TIUIL8",97,0)
 .S ^SD(409.61,VALM,"COL",5,0)="NAME1^8^40^Name^^1"
"RTN","TIUIL8",98,0)
 .S ^SD(409.61,VALM,"COL",6,0)="NAME2^48^27"
"RTN","TIUIL8",99,0)
 .S ^SD(409.61,VALM,"COL",7,0)="TYPE^77^4^Type"
"RTN","TIUIL8",100,0)
 .S ^SD(409.61,VALM,"COL",8,0)="NATIONAL^82^4^Natl"
"RTN","TIUIL8",101,0)
 .S ^SD(409.61,VALM,"COL",9,0)="STATUS^88^6^Status"
"RTN","TIUIL8",102,0)
 .S ^SD(409.61,VALM,"COL",10,0)="OWNER^96^7^Owner"
"RTN","TIUIL8",103,0)
 .S ^SD(409.61,VALM,"COL",11,0)="INUSE^105^6^In Use"
"RTN","TIUIL8",104,0)
 .S ^SD(409.61,VALM,"COL",12,0)="BOIL^113^4^Boil"
"RTN","TIUIL8",105,0)
 .S ^SD(409.61,VALM,"COL",13,0)="PRINTNM^119^60^Print Name"
"RTN","TIUIL8",106,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,5)=""
"RTN","TIUIL8",107,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFH"
"RTN","TIUIL8",108,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFH"
"RTN","TIUIL8",109,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL8",110,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFH"
"RTN","TIUIL8",111,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL8",112,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL8",113,0)
 ;
"RTN","TIUIL8",114,0)
 G ^TIUIL9
"RTN","TIUIL9")
0^78^B24191326
"RTN","TIUIL9",1,0)
TIUIL9 ; List Template Exporter ; 20-JUN-1997
"RTN","TIUIL9",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUIL9",3,0)
 D BMES^XPDUTL("'TIUFH EDIT DDEFS MGR' List Template...")
"RTN","TIUIL9",4,0)
 S DA=$O(^SD(409.61,"B","TIUFH EDIT DDEFS MGR",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL9",5,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFH EDIT DDEFS MGR" D FILE^DICN S VALM=+Y
"RTN","TIUIL9",6,0)
 I VALM>0 D
"RTN","TIUIL9",7,0)
 .S ^SD(409.61,VALM,0)="TIUFH EDIT DDEFS MGR^1^^188^5^18^1^1^Entry^TIUFH ACTION MENU MGR^Edit Document Definitions^1^^1"
"RTN","TIUIL9",8,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL9",9,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF1"",$J)"
"RTN","TIUIL9",10,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^14^11"
"RTN","TIUIL9",11,0)
 .S ^SD(409.61,VALM,"COL",4,0)="NUMBER^1^6^^^0"
"RTN","TIUIL9",12,0)
 .S ^SD(409.61,VALM,"COL",5,0)="NAME1^8^40^Name^^1"
"RTN","TIUIL9",13,0)
 .S ^SD(409.61,VALM,"COL",6,0)="NAME2^48^27"
"RTN","TIUIL9",14,0)
 .S ^SD(409.61,VALM,"COL",7,0)="TYPE^77^4^Type"
"RTN","TIUIL9",15,0)
 .S ^SD(409.61,VALM,"COL",8,0)="IFN^82^7^    IFN"
"RTN","TIUIL9",16,0)
 .S ^SD(409.61,VALM,"COL",9,0)="NATIONAL^91^4^Natl"
"RTN","TIUIL9",17,0)
 .S ^SD(409.61,VALM,"COL",10,0)="STATUS^97^6^Status"
"RTN","TIUIL9",18,0)
 .S ^SD(409.61,VALM,"COL",11,0)="OWNER^105^7^Owner"
"RTN","TIUIL9",19,0)
 .S ^SD(409.61,VALM,"COL",12,0)="INUSE^114^6^In Use"
"RTN","TIUIL9",20,0)
 .S ^SD(409.61,VALM,"COL",13,0)="BOIL^122^4^Boil"
"RTN","TIUIL9",21,0)
 .S ^SD(409.61,VALM,"COL",14,0)="PRINTNM^128^60^Print Name"
"RTN","TIUIL9",22,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",0,4)=""
"RTN","TIUIL9",23,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,5)=""
"RTN","TIUIL9",24,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFH"
"RTN","TIUIL9",25,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFH"
"RTN","TIUIL9",26,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL9",27,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFH"
"RTN","TIUIL9",28,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL9",29,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL9",30,0)
 ;
"RTN","TIUIL9",31,0)
 D BMES^XPDUTL("'TIUFJ OBJECTS CLIN' List Template...")
"RTN","TIUIL9",32,0)
 S DA=$O(^SD(409.61,"B","TIUFJ OBJECTS CLIN",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL9",33,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFJ OBJECTS CLIN" D FILE^DICN S VALM=+Y
"RTN","TIUIL9",34,0)
 I VALM>0 D
"RTN","TIUIL9",35,0)
 .S ^SD(409.61,VALM,0)="TIUFJ OBJECTS CLIN^1^^157^5^18^1^1^Entry^TIUFJ ACTION MENU CLIN^Objects^1^^1"
"RTN","TIUIL9",36,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL9",37,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF1"",$J)"
"RTN","TIUIL9",38,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^7^7"
"RTN","TIUIL9",39,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^6"
"RTN","TIUIL9",40,0)
 .S ^SD(409.61,VALM,"COL",2,0)="NAME1^8^40^Name^^1"
"RTN","TIUIL9",41,0)
 .S ^SD(409.61,VALM,"COL",3,0)="NAME2^48^27"
"RTN","TIUIL9",42,0)
 .S ^SD(409.61,VALM,"COL",4,0)="STATUS^75^6^Status"
"RTN","TIUIL9",43,0)
 .S ^SD(409.61,VALM,"COL",5,0)="NATIONAL^82^4^Natl"
"RTN","TIUIL9",44,0)
 .S ^SD(409.61,VALM,"COL",6,0)="OWNER^88^7^Owner"
"RTN","TIUIL9",45,0)
 .S ^SD(409.61,VALM,"COL",7,0)="PRINTNM^97^60^Print Name"
"RTN","TIUIL9",46,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,2)=""
"RTN","TIUIL9",47,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFJ"
"RTN","TIUIL9",48,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFJ"
"RTN","TIUIL9",49,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL9",50,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFJ"
"RTN","TIUIL9",51,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL9",52,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL9",53,0)
 ;
"RTN","TIUIL9",54,0)
 D BMES^XPDUTL("'TIUFJ OBJECTS MGR' List Template...")
"RTN","TIUIL9",55,0)
 S DA=$O(^SD(409.61,"B","TIUFJ OBJECTS MGR",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL9",56,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFJ OBJECTS MGR" D FILE^DICN S VALM=+Y
"RTN","TIUIL9",57,0)
 I VALM>0 D
"RTN","TIUIL9",58,0)
 .S ^SD(409.61,VALM,0)="TIUFJ OBJECTS MGR^1^^166^5^18^1^1^Entry^TIUFJ ACTION MENU MGR^Objects^1^^1"
"RTN","TIUIL9",59,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL9",60,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF1"",$J)"
"RTN","TIUIL9",61,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^8^8"
"RTN","TIUIL9",62,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^6"
"RTN","TIUIL9",63,0)
 .S ^SD(409.61,VALM,"COL",2,0)="NAME1^8^40^^^1"
"RTN","TIUIL9",64,0)
 .S ^SD(409.61,VALM,"COL",3,0)="NAME2^48^27"
"RTN","TIUIL9",65,0)
 .S ^SD(409.61,VALM,"COL",4,0)="STATUS^75^6^Status"
"RTN","TIUIL9",66,0)
 .S ^SD(409.61,VALM,"COL",5,0)="IFN^82^7^    IFN"
"RTN","TIUIL9",67,0)
 .S ^SD(409.61,VALM,"COL",6,0)="NATIONAL^91^4^Natl"
"RTN","TIUIL9",68,0)
 .S ^SD(409.61,VALM,"COL",7,0)="OWNER^97^7^Owner"
"RTN","TIUIL9",69,0)
 .S ^SD(409.61,VALM,"COL",8,0)="PRINTNM^106^60^Print Name"
"RTN","TIUIL9",70,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,2)=""
"RTN","TIUIL9",71,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFJ"
"RTN","TIUIL9",72,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFJ"
"RTN","TIUIL9",73,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL9",74,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFJ"
"RTN","TIUIL9",75,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL9",76,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL9",77,0)
 ;
"RTN","TIUIL9",78,0)
 D BMES^XPDUTL("'TIUFT ITEMS ADD/EDIT/VIEW MGR' List Template...")
"RTN","TIUIL9",79,0)
 S DA=$O(^SD(409.61,"B","TIUFT ITEMS ADD/EDIT/VIEW MGR",0)),DIK="^SD(409.61," D ^DIK:DA
"RTN","TIUIL9",80,0)
 K DO,DD S DIC(0)="L",DIC="^SD(409.61,",X="TIUFT ITEMS ADD/EDIT/VIEW MGR" D FILE^DICN S VALM=+Y
"RTN","TIUIL9",81,0)
 I VALM>0 D
"RTN","TIUIL9",82,0)
 .S ^SD(409.61,VALM,0)="TIUFT ITEMS ADD/EDIT/VIEW MGR^1^^123^5^18^1^1^Item^TIUFT ACTION MENU ADD/EDIT/VIEW ITEMS^Items^1^^1"
"RTN","TIUIL9",83,0)
 .S ^SD(409.61,VALM,1)="^TIUF HIDDEN ACTIONS"
"RTN","TIUIL9",84,0)
 .S ^SD(409.61,VALM,"ARRAY")=" ^TMP(""TIUF2"",$J)"
"RTN","TIUIL9",85,0)
 .S ^SD(409.61,VALM,"COL",0)="^409.621^7^7"
"RTN","TIUIL9",86,0)
 .S ^SD(409.61,VALM,"COL",1,0)="NUMBER^1^6"
"RTN","TIUIL9",87,0)
 .S ^SD(409.61,VALM,"COL",2,0)="NAME1^8^23^Item^^1"
"RTN","TIUIL9",88,0)
 .S ^SD(409.61,VALM,"COL",3,0)="NAME2^31^37"
"RTN","TIUIL9",89,0)
 .S ^SD(409.61,VALM,"COL",4,0)="MNEM^91^4^Mnem"
"RTN","TIUIL9",90,0)
 .S ^SD(409.61,VALM,"COL",5,0)="IFN^82^7^    IFN"
"RTN","TIUIL9",91,0)
 .S ^SD(409.61,VALM,"COL",6,0)="SEQUENCE^75^6^Seq   "
"RTN","TIUIL9",92,0)
 .S ^SD(409.61,VALM,"COL",7,0)="MENUTEXT^97^26^Menu Text"
"RTN","TIUIL9",93,0)
 .S ^SD(409.61,VALM,"COL","AIDENT",1,2)=""
"RTN","TIUIL9",94,0)
 .S ^SD(409.61,VALM,"FNL")="D EXIT^TIUFT"
"RTN","TIUIL9",95,0)
 .S ^SD(409.61,VALM,"HDR")="D HDR^TIUFT"
"RTN","TIUIL9",96,0)
 .S ^SD(409.61,VALM,"HLP")="D HELP^TIUFHLP"
"RTN","TIUIL9",97,0)
 .S ^SD(409.61,VALM,"INIT")="D INIT^TIUFT"
"RTN","TIUIL9",98,0)
 .S DA=VALM,DIK="^SD(409.61," D IX1^DIK K DA,DIK
"RTN","TIUIL9",99,0)
 .D MES^XPDUTL("  Filed.")
"RTN","TIUIL9",100,0)
 ;
"RTN","TIUIL9",101,0)
 G ^TIUIL10
"RTN","TIULA")
0^79^B21077855
"RTN","TIULA",1,0)
TIULA ; SLC/JER - Interactive Library functions ;11/14/94  13:21
"RTN","TIULA",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULA",3,0)
PATIENT(TIUSSN) ; Select a patient
"RTN","TIULA",4,0)
 N X,DIC,Y S:$G(TIUSSN)]"" X=TIUSSN
"RTN","TIULA",5,0)
 S DIC=2,DIC(0)=$S($G(TIUSSN)']"":"AEMQ",1:"MX") D ^DIC
"RTN","TIULA",6,0)
 Q Y
"RTN","TIULA",7,0)
SELSTAT(Y,PARM,DEF) ; Select Signature status
"RTN","TIULA",8,0)
 N I,XQORM,X,TIUY
"RTN","TIULA",9,0)
 S XQORM=+$O(^ORD(101,"B","TIU STATUS MENU",0))_";ORD(101,"
"RTN","TIULA",10,0)
 I +XQORM'>0 W !,"Status selection unavailable." S TIUY=-1 G STATX
"RTN","TIULA",11,0)
 S XQORM(0)=$G(PARM),XQORM("A")="Select Status: "
"RTN","TIULA",12,0)
 I $S(PARM="F":1,PARM="R":1,1:0) S X=DEF
"RTN","TIULA",13,0)
 S XQORM("B")=DEF D ^XQORM
"RTN","TIULA",14,0)
 S TIUY=$G(Y)
"RTN","TIULA",15,0)
 I +$G(Y)=1,(+$G(Y(1))=7) S Y=2,Y(2)="8^4843^amended^8"
"RTN","TIULA",16,0)
STATX Q TIUY
"RTN","TIULA",17,0)
SELSCRN(DEF) ; Select Review Screen
"RTN","TIULA",18,0)
 N DIC,XQORM,X
"RTN","TIULA",19,0)
 S DIC=101,DIC(0)="X",X="TIU REVIEW SCREEN MENU" D ^DIC
"RTN","TIULA",20,0)
 I +Y>0 D
"RTN","TIULA",21,0)
 . S XQORM=+Y_";ORD(101,",XQORM(0)="1A",XQORM("A")="Select Category: "
"RTN","TIULA",22,0)
 . S XQORM("S")="I 1 X:$D(^ORD(101,+$P(^ORD(101,DA(1),10,DA,0),U),24)) ^(24)"
"RTN","TIULA",23,0)
 . S XQORM("B")=DEF D ^XQORM
"RTN","TIULA",24,0)
 . I +Y,($D(Y)>9) D
"RTN","TIULA",25,0)
 . . S Y=$S(Y(1)["Author":"AAU",Y(1)["Patient":"APT",Y(1)["Spec":"ATS",Y(1)["Transcrip":"ATC",Y(1)["All":"ALL",Y(1)["Subject":"ASUB",Y(1)["Service":"ASVC",Y(1)["Location":"ALOC",1:"")
"RTN","TIULA",26,0)
 . . I +$G(Y(1))'>0,(X'="^^"),(X'="^") D  Q
"RTN","TIULA",27,0)
 . . . W !,"^^-jumps not allowed from this prompt." S Y=-1
"RTN","TIULA",28,0)
 . . S:Y'="ALL" Y=Y_U_$$SELPAR(Y)
"RTN","TIULA",29,0)
 . . S:Y="ALL" Y=Y_U_"ANY"
"RTN","TIULA",30,0)
 Q Y
"RTN","TIULA",31,0)
SELPAR(DEF) ; Select an author or patient or... 
"RTN","TIULA",32,0)
 N DIC,X,Y
"RTN","TIULA",33,0)
 I DEF="ASUB" S Y=$$ASKSUBJ^TIULA1 G SELPARX
"RTN","TIULA",34,0)
 S DIC=$S(DEF="APT":2,DEF="ATS":45.7,DEF="ASVC":123.5,1:200)
"RTN","TIULA",35,0)
 S DIC(0)="AEMQ"
"RTN","TIULA",36,0)
 S DIC("A")="Select "_$S(DEF="APT":"PATIENT",DEF="AAU":"AUTHOR",DEF="ATS":"TREATING SPECIALTY",DEF="ATC":"TRANSCRIPTIONIST",DEF="ASVC":"SERVICE",1:"ATTENDING PHYSICIAN")_": "
"RTN","TIULA",37,0)
 I DEF="ARP" S DIC("S")="I $$ISA^USRLA(+$G(Y),""PROVIDER"")"
"RTN","TIULA",38,0)
 D ^DIC K DIC("S") I +Y>0 D
"RTN","TIULA",39,0)
 . I $S(DEF="APT"&'$D(^TIU(8925,"C",+Y)):1,DEF="AAU"&'$D(^TIU(8925,"CA",+Y)):1,DEF="ARP"&'$D(^TIU(8925,"CR",+Y)):1,1:0) W !,"No entries for ",$P(Y,U,2) S Y=0
"RTN","TIULA",40,0)
SELPARX Q Y
"RTN","TIULA",41,0)
EDATE(PRMPT,STATUS,DFLT) ; Get early date
"RTN","TIULA",42,0)
 N X,Y,TIUPRMT,TIUDFLT
"RTN","TIULA",43,0)
 I $G(STATUS)=4 S Y=1 Q Y
"RTN","TIULA",44,0)
 S TIUPRMT=" Start "_$S($L($G(PRMPT)):PRMPT_" ",1:"")_"Date [Time]: "
"RTN","TIULA",45,0)
 S TIUDFLT=$S($L($G(DFLT)):DFLT,1:"T-30")
"RTN","TIULA",46,0)
 S Y=$$READ^TIUU("DOA^::AET",TIUPRMT,TIUDFLT)
"RTN","TIULA",47,0)
 Q Y
"RTN","TIULA",48,0)
LDATE(PRMPT,STATUS,DFLT) ; Get late date
"RTN","TIULA",49,0)
 N X,Y,TIUPRMT,TIUDFLT
"RTN","TIULA",50,0)
 I $G(STATUS)=4 S Y=9999999 Q Y
"RTN","TIULA",51,0)
 S TIUPRMT="Ending "_$S($L($G(PRMPT)):PRMPT_" ",1:"")_"Date [Time]: "
"RTN","TIULA",52,0)
 S TIUDFLT=$S($L($G(DFLT)):DFLT,1:"NOW")
"RTN","TIULA",53,0)
 S Y=$$READ^TIUU("DOA^::AET",TIUPRMT,TIUDFLT)
"RTN","TIULA",54,0)
 Q Y
"RTN","TIULA",55,0)
CATEGORY() ; Select Service Category
"RTN","TIULA",56,0)
 N DIR,X,Y
"RTN","TIULA",57,0)
 S DIR(0)="9000010,.07",DIR("A")="Select SERVICE CATEGORY"
"RTN","TIULA",58,0)
 D ^DIR
"RTN","TIULA",59,0)
 Q Y_U_Y(0)
"RTN","TIULA",60,0)
SELTYP(DA,RETURN,PARM,DFLT,TYPE,MODE,DCLASS,PICK) ; Select Document Types
"RTN","TIULA",61,0)
 N I,J,X,XQORM,CURTYP,Y
"RTN","TIULA",62,0)
 ; TIUK is STATIC
"RTN","TIULA",63,0)
 ;I +MODE D DOCLIST^TIULA1(DA,.RETURN,PARM,DFLT) Q:+RETURN'<0
"RTN","TIULA",64,0)
 ; *** ADD CALL TO PERSONAL DOCUMENT LISTER HERE
"RTN","TIULA",65,0)
 N:'$D(TIUK) TIUK S TIUK=+$G(TIUK)
"RTN","TIULA",66,0)
 I $G(DFLT)="LAST" D
"RTN","TIULA",67,0)
 . S DFLT=$O(^DISV(DUZ,"XQORM",DA_";TIU(8925.1,",0))
"RTN","TIULA",68,0)
 . S DFLT=$S(+DFLT:$G(^DISV(DUZ,"XQORM",DA_";TIU(8925.1,",DFLT)),1:"")
"RTN","TIULA",69,0)
 I $G(TYPE)']"" S TYPE="DOC"
"RTN","TIULA",70,0)
 I $G(MODE)']"" S MODE=1 ; Default is ASK
"RTN","TIULA",71,0)
 S XQORM=DA_";TIU(8925.1,",XQORM(0)=$S(+$P($G(^TIU(8925.1,+DA,10,0)),U,3)=1:"F",1:$G(PARM,"AD"))
"RTN","TIULA",72,0)
 I XQORM(0)["D" S XQORM("H")="W !!,$$CENTER^TIULS(""--- ""_$P(^TIU(8925.1,+DA,0),U,3)_"" ---""),!"
"RTN","TIULA",73,0)
 I $S(XQORM(0)="F":1,XQORM(0)="R":1,1:0) S X=$S(DFLT]"":DFLT,1:"ALL")
"RTN","TIULA",74,0)
 S:$G(DFLT)]"" XQORM("B")=DFLT
"RTN","TIULA",75,0)
 S XQORM("A")="Select "_$S(XQORM(0)["D":"Document",1:$P(^TIU(8925.1,+DA,0),U,3))_$S($P(^TIU(8925.1,+DA,0),U,4)="DOC":" Component",1:" Type")_$S(+XQORM(0)'=1:"(s)",1:"")_": "
"RTN","TIULA",76,0)
 ; If screening inactive titles proves to be correct, remove comment
"RTN","TIULA",77,0)
 ; from the line below:
"RTN","TIULA",78,0)
 ; S XQORM("S")="I +$$CANPICK^TIULP(+$G(^TIU(8925.1,+DA(1),10,+DA,0)))>0"
"RTN","TIULA",79,0)
 D EN^XQORM
"RTN","TIULA",80,0)
 I +Y'>0,($D(RETURN)'>9) S RETURN=Y Q
"RTN","TIULA",81,0)
 I (PARM["A"),(+$G(RETURN)'>0) M PICK=Y
"RTN","TIULA",82,0)
 S I=0 F  S I=$O(Y(I)) Q:+I'>0  D
"RTN","TIULA",83,0)
 . N TYPMATCH
"RTN","TIULA",84,0)
 . S J=+$P(Y(I),U,2),CURTYP=$P($G(^TIU(8925.1,+J,0)),U,4)
"RTN","TIULA",85,0)
 . I CURTYP="DC" S DCLASS=+$G(DCLASS)+1,DCLASS(DCLASS)=J
"RTN","TIULA",86,0)
 . I  I TYPE="DOC",(PARM["A"),(+$O(^TIU(8925.1,+J,10,0))'>0) W !!,"The Document Class ",$P(^TIU(8925.1,+J,0),U)," has no active titles at present..."
"RTN","TIULA",87,0)
 . S TYPMATCH=$$TYPMATCH^TIULA1(TYPE,CURTYP)
"RTN","TIULA",88,0)
 . I +TYPMATCH>0 D
"RTN","TIULA",89,0)
 . . S TIUK=+$G(TIUK)+1,RETURN(TIUK)=Y(I),RETURN=TIUK
"RTN","TIULA",90,0)
 . I $S('+$G(TYPMATCH):1,CURTYP="CL":1,1:0),+$O(^TIU(8925.1,+J,10,0))>0 D SELTYP(+J,.RETURN,$S(MODE=1:$G(PARM),1:"F"),$S(MODE=1:"LAST",1:"ALL"),TYPE,MODE,.DCLASS,.PICK)
"RTN","TIULA",91,0)
 Q
"RTN","TIULA1")
0^80^B18412028
"RTN","TIULA1",1,0)
TIULA1 ; SLC/JER - More interactive functions ;10/11/94  12:02
"RTN","TIULA1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULA1",3,0)
TRAVERSE(DA,RETURN,PARM,TYPE) ; Select Document Type(s)
"RTN","TIULA1",4,0)
 N C,I,XQORM,Y N:'$D(LEVEL) LEVEL S LEVEL=+$G(LEVEL)+1
"RTN","TIULA1",5,0)
 S:$G(TYPE)']"" TYPE="D"
"RTN","TIULA1",6,0)
 S XQORM=DA_";TIU(8925.1,",XQORM(0)=$S($L($G(PARM)):PARM,1:"AD")
"RTN","TIULA1",7,0)
 I XQORM(0)["D" S XQORM("H")="W !!,$$CENTER^TIULS(""--- ""_$P(^TIU(8925.1,+DA,0),U,3)_"" ---""),!"
"RTN","TIULA1",8,0)
 S XQORM("B")=$G(^DISV(DUZ,"XQORM",DA_";TIU(8925.1,",1))
"RTN","TIULA1",9,0)
 S XQORM("A")="Select "_$S(XQORM(0)["D":"Document",1:$P(^TIU(8925.1,+DA,0),U,3))_$S("CD"[$P(^TIU(8925.1,+DA,0),U,4):" Component",1:" Type")_$S(+XQORM(0)'=1:"(s)",1:"")_": "
"RTN","TIULA1",10,0)
 D EN^XQORM
"RTN","TIULA1",11,0)
 M RETURN(LEVEL)=Y
"RTN","TIULA1",12,0)
 S I=0 F  S I=$O(Y(I)) Q:+I'>0  D
"RTN","TIULA1",13,0)
 . S J=+$P(Y(I),U,2)
"RTN","TIULA1",14,0)
 . I $P(^TIU(8925.1,+J,0),U,4)'=TYPE,$D(^TIU(8925.1,+J,10))'<10 D TRAVERSE(+J,.RETURN,$G(PARM))
"RTN","TIULA1",15,0)
 Q
"RTN","TIULA1",16,0)
ASKSIG() ; Prompt for ES, return encrypted data
"RTN","TIULA1",17,0)
 N ESNAME,ESTITLE,Y S Y=0
"RTN","TIULA1",18,0)
 D SIG^XUSESIG I X1']"" S:'$D(X) X=0 D BADSIG^TIULG(X) G ASKX
"RTN","TIULA1",19,0)
 S ESNAME=$P($G(^VA(200,DUZ,20)),U,2),ESTITLE=$P($G(^(20)),U,3)
"RTN","TIULA1",20,0)
 S Y=1_U_ESNAME_U_ESTITLE
"RTN","TIULA1",21,0)
ASKX Q Y
"RTN","TIULA1",22,0)
ASKSUBJ() ; Handle query by subject
"RTN","TIULA1",23,0)
 N Y
"RTN","TIULA1",24,0)
 S Y=$$READ^TIUU("FO","Where SUBJECT CONTAINS")
"RTN","TIULA1",25,0)
 Q $$UPPER^TIULS(Y)
"RTN","TIULA1",26,0)
ASKLOC() ; Handle query by location
"RTN","TIULA1",27,0)
 N Y
"RTN","TIULA1",28,0)
 S Y=$$READ^TIUU("P^44:AEMQ","Select HOSPITAL LOCATION")
"RTN","TIULA1",29,0)
 Q Y
"RTN","TIULA1",30,0)
TYPMATCH(TYPE,CURTYP) ; Check for type match
"RTN","TIULA1",31,0)
 N TIUI,TIUY S TIUY=0
"RTN","TIULA1",32,0)
 I $L(TYPE,"!")=1,TYPE=CURTYP S TIUY=1
"RTN","TIULA1",33,0)
 E  F TIUI=1:1:$L(TYPE,"!") I $P(TYPE,"!",TIUI)=CURTYP S TIUY=1 Q
"RTN","TIULA1",34,0)
 Q TIUY
"RTN","TIULA1",35,0)
DOCLIST(CLASS,Y,PARM,DFLT) ; Get preferred documents for user
"RTN","TIULA1",36,0)
 N TIUDA,XQORM,X
"RTN","TIULA1",37,0)
 S TIUDA=+$O(^TIU(8925.98,"AC",DUZ,CLASS,0)),XQORM=TIUDA_";TIU(8925.98,"
"RTN","TIULA1",38,0)
 I +TIUDA'>0!(+$O(^XUTL("XQORM",XQORM,0))'>0) S Y=-1 Q
"RTN","TIULA1",39,0)
 I $G(DFLT)="LAST" D
"RTN","TIULA1",40,0)
 . S DFLT=$O(^DISV(DUZ,"XQORM",XQORM,0))
"RTN","TIULA1",41,0)
 . S DFLT=$S(+DFLT:$G(^DISV(DUZ,"XQORM",XQORM,DFLT)),1:"")
"RTN","TIULA1",42,0)
 S XQORM(0)=$S(+$P($G(^TIU(8925.98,+TIUDA,10,0)),U,3)=1:"F",1:PARM)
"RTN","TIULA1",43,0)
 S XQORM("B")=$S(+$P($G(^TIU(8925.98,+TIUDA,10,0)),U,3)=1:$P($G(^(0)),U,3),1:DFLT)
"RTN","TIULA1",44,0)
 I XQORM(0)'["A" S X=XQORM("B")
"RTN","TIULA1",45,0)
 S XQORM("A")=$S(CLASS=3:"",1:"Select ")_$S(CLASS=3:"TITLE",1:"Document")_$S(+XQORM(0)'=1:"(s)",1:"")_": "
"RTN","TIULA1",46,0)
 I XQORM(0)["D" D
"RTN","TIULA1",47,0)
 . N LISTNAME,PERSNAME S LISTNAME=$$PNAME^TIULC1(CLASS)
"RTN","TIULA1",48,0)
 . I $E(LISTNAME,$L(LISTNAME))="Y" D
"RTN","TIULA1",49,0)
 . . S LISTNAME=$E(LISTNAME,1,($L(LISTNAME)-1))_"IES"
"RTN","TIULA1",50,0)
 . I $E(LISTNAME,$L(LISTNAME))="y" D
"RTN","TIULA1",51,0)
 . . S LISTNAME=$E(LISTNAME,1,($L(LISTNAME)-1))_"ies"
"RTN","TIULA1",52,0)
 . S PERSNAME=$$PERSNAME^TIULC1(DUZ)
"RTN","TIULA1",53,0)
 . S LISTNAME=""""_"--- "_LISTNAME_" for "_PERSNAME_" ---"_""""
"RTN","TIULA1",54,0)
 . S XQORM("H")="W !!,$$CENTER^TIULS("_LISTNAME_"),!"
"RTN","TIULA1",55,0)
 S XQORM("S")="I $$CANPICK^TIULP(+$G(^TIU(8925.98,+DA(1),10,+DA,0)))"
"RTN","TIULA1",56,0)
 D EN^XQORM
"RTN","TIULA1",57,0)
 Q
"RTN","TIULA1",58,0)
SELCAT(Y,PARM,DFLT) ; Get preferred documents for user
"RTN","TIULA1",59,0)
 N TIUI,TIUDA,CATREC,CATLOOK,CATSCRN,XQORM,X S TIUI=0
"RTN","TIULA1",60,0)
 S XQORM="1;TIU(8925.8,"
"RTN","TIULA1",61,0)
 I $G(DFLT)="LAST" D
"RTN","TIULA1",62,0)
 . S DFLT=$O(^DISV(DUZ,"XQORM",XQORM,0))
"RTN","TIULA1",63,0)
 . S DFLT=$S(+DFLT:$G(^DISV(DUZ,"XQORM",XQORM,DFLT)),1:"")
"RTN","TIULA1",64,0)
 S XQORM(0)=$G(PARM,"1A")
"RTN","TIULA1",65,0)
 S XQORM("B")=$G(DFLT,"AUTHOR")
"RTN","TIULA1",66,0)
 I +$G(ORVP) S XQORM("S")="I $G(^XUTL(""XQORM"",XQORM,+$O(^XUTL(""XQORM"",XQORM,""B"",DA,0)),0))'[""Patient"""
"RTN","TIULA1",67,0)
 I XQORM(0)'["A" S X=XQORM("B")
"RTN","TIULA1",68,0)
 S XQORM("A")="Select SEARCH CATEGOR"_$S(+XQORM(0)'=1:"IES",1:"Y")_": "
"RTN","TIULA1",69,0)
 I XQORM(0)["D" S XQORM("H")="W !!,$$CENTER^TIULS(""--- Search Categories ---""),!"
"RTN","TIULA1",70,0)
 D EN^XQORM
"RTN","TIULA1",71,0)
 F  S TIUI=$O(Y(TIUI)) Q:+TIUI'>0  D
"RTN","TIULA1",72,0)
 . S TIUDA=+$P(Y(TIUI),U,2)
"RTN","TIULA1",73,0)
 . S CATREC=$G(^TIU(8925.8,TIUDA,0))
"RTN","TIULA1",74,0)
 . S CATSCRN=$G(^TIU(8925.8,TIUDA,1))
"RTN","TIULA1",75,0)
 . S CATLOOK=$G(^TIU(8925.8,TIUDA,2))
"RTN","TIULA1",76,0)
 . I CATLOOK']"",+$P(CATREC,U,4) S CATVAL=$$DICLOOK(CATREC,CATSCRN)
"RTN","TIULA1",77,0)
 . I CATLOOK]"" S CATVAL=$$LOOK(CATLOOK)
"RTN","TIULA1",78,0)
 . I +CATVAL'=-1,$L(CATVAL) S Y(TIUI)=$P(CATREC,U,2)_U_CATVAL
"RTN","TIULA1",79,0)
 . E  K Y(TIUI) S Y=+$G(Y)-1
"RTN","TIULA1",80,0)
 Q
"RTN","TIULA1",81,0)
DICLOOK(CATEGORY,SCREEN) ; Call ^DIC to get category value
"RTN","TIULA1",82,0)
 N DIC,X,Y
"RTN","TIULA1",83,0)
 S DIC=+$P(CATEGORY,U,4),DIC(0)="AEMQZ"
"RTN","TIULA1",84,0)
 S DIC("A")="Select "_$P(CATEGORY,U)_": "
"RTN","TIULA1",85,0)
 I SCREEN]"" X SCREEN
"RTN","TIULA1",86,0)
 D ^DIC I +$G(DUOUT),(X="^^") S DIROUT=1
"RTN","TIULA1",87,0)
 Q Y
"RTN","TIULA1",88,0)
LOOK(LOOKUP) ; Execute LOOKUP CODE
"RTN","TIULA1",89,0)
 N X,Y
"RTN","TIULA1",90,0)
 X LOOKUP
"RTN","TIULA1",91,0)
 Q Y
"RTN","TIULA1",92,0)
GETVSIT(DFN) ; Visit selection code
"RTN","TIULA1",93,0)
 N X,Y
"RTN","TIULA1",94,0)
 I +$G(ORVP),'+$G(DFN) S DFN=+$G(ORVP)
"RTN","TIULA1",95,0)
 D MAIN^TIUVISIT(.Y,$G(DFN))
"RTN","TIULA1",96,0)
 S Y=$G(Y("VISIT"))
"RTN","TIULA1",97,0)
 I +Y,+$P(Y,U,2) S $P(Y,U,2)=$$DATE^TIULS($P(Y,U,2),"MM/DD/YY HR:MIN")
"RTN","TIULA1",98,0)
 Q Y
"RTN","TIULA1",99,0)
GETTERM(X) ; Get Lexicon term
"RTN","TIULA1",100,0)
 N DIC,USEX,Y
"RTN","TIULA1",101,0)
 S DIC=757.01,DIC(0)="AEMQZ",DIC("A")="Select PROBLEM: "
"RTN","TIULA1",102,0)
 D ^DIC
"RTN","TIULA1",103,0)
 I +Y'>0,(X]""),(X'=" "),(X'["^") D
"RTN","TIULA1",104,0)
 . S USEX=$$READ^TIUU("Y",">>>  Use "_X,"Yes")
"RTN","TIULA1",105,0)
 . I +USEX S Y=1_U_X
"RTN","TIULA1",106,0)
 Q Y
"RTN","TIULA2")
0^81^B37859522
"RTN","TIULA2",1,0)
TIULA2 ; SLC/JER - More interactive functions ;3/12/97  19:40
"RTN","TIULA2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULA2",3,0)
ASKTYP(TIUCLASS,DFLT,SCREEN,PROMPT) ; Call ^DIC to select single type
"RTN","TIULA2",4,0)
 N DIC,X,Y,TIUFPRIV S TIUFPRIV=1
"RTN","TIULA2",5,0)
 S DIC=8925.1,TIUCLASS=$G(TIUCLASS,38)
"RTN","TIULA2",6,0)
 I +$$ITMCNT(TIUCLASS)=1 D  G ASKTYPX
"RTN","TIULA2",7,0)
 . I $P($G(^TIU(8925.1,+TIUCLASS,0)),U,4)="CL" D  Q
"RTN","TIULA2",8,0)
 . . S TIUCLASS=+$G(^TIU(8925.1,+TIUCLASS,10,1,0))
"RTN","TIULA2",9,0)
 . . S Y=$$ASKTYP(+TIUCLASS,DFLT,SCREEN,$G(PROMPT))
"RTN","TIULA2",10,0)
 . S DIC(0)="NX",X=+$G(^TIU(8925.1,+TIUCLASS,10,1,0))
"RTN","TIULA2",11,0)
 . D ^DIC S Y=Y_U_"SINGLE ITEM"
"RTN","TIULA2",12,0)
 S DIC(0)="AEMQZ"
"RTN","TIULA2",13,0)
 S DIC("A")=$S($G(PROMPT)]"":$G(PROMPT),1:"Select TITLE: ")
"RTN","TIULA2",14,0)
 I $G(DFLT)="LAST" S DFLT=$P($$PERSDOC^TIULE(DUZ,+$G(TIUCLASS,38)),U,2)
"RTN","TIULA2",15,0)
 I +$G(DFLT),+$D(TIUCLASS),(+$$ISA^TIULX(+$G(DFLT),+$G(TIUCLASS))'>0) S DFLT=""
"RTN","TIULA2",16,0)
 I $G(DFLT)]"" S DIC("B")=$G(DFLT)
"RTN","TIULA2",17,0)
 I $G(SCREEN)]"" S DIC("S")=SCREEN
"RTN","TIULA2",18,0)
 D ^DIC K DIC("S")
"RTN","TIULA2",19,0)
ASKTYPX Q Y
"RTN","TIULA2",20,0)
ITMCNT(CLASS) ; Count the number of members of a class or document class
"RTN","TIULA2",21,0)
 N TIUI,TIUCNT S (TIUI,TIUCNT)=0
"RTN","TIULA2",22,0)
 F  S TIUI=$O(^TIU(8925.1,+CLASS,10,TIUI)) Q:+TIUI'>0  D 
"RTN","TIULA2",23,0)
 . I +$$CANPICK^TIULP(+$G(^TIU(8925.1,+CLASS,10,TIUI,0))) S TIUCNT=TIUCNT+1
"RTN","TIULA2",24,0)
 Q TIUCNT
"RTN","TIULA2",25,0)
DOCPICK(TIUCLASS,DFLT,ADDSCRN) ; Ask for document, given a class or document class
"RTN","TIULA2",26,0)
 N SCREEN,PROMPT S PROMPT=$S(TIUCLASS=3:"TITLE: ",1:"")
"RTN","TIULA2",27,0)
 S SCREEN="I $P(^TIU(8925.1,+Y,0),U,4)=""DOC"",+$$ISA^TIULX(+Y,TIUCLASS),+$$CANPICK^TIULP(+Y)"_$S($G(ADDSCRN)]"":",",1:"")_$G(ADDSCRN)
"RTN","TIULA2",28,0)
 Q $$ASKTYP(+TIUCLASS,$G(DFLT),SCREEN,PROMPT)
"RTN","TIULA2",29,0)
DOCSPICK(TIUY,TIUCLASS,PARM,DFLT,PROMPT,ADDSCRN) ; Ask for TITLE(S)
"RTN","TIULA2",30,0)
 ; with pick-list
"RTN","TIULA2",31,0)
 N SCREEN,Y
"RTN","TIULA2",32,0)
 S DFLT=$S($G(DFLT)=0:"",$G(DFLT)]"":$G(DFLT),1:"LAST")
"RTN","TIULA2",33,0)
 S PARM=$S($G(PARM)]"":PARM,1:"A")
"RTN","TIULA2",34,0)
 ; D DOCLIST^TIULA1(TIUCLASS,.TIUY,PARM,DFLT) I +TIUY>0 Q
"RTN","TIULA2",35,0)
 ; ADD CALL TO PERSONAL DOCUMENT LISTER HERE
"RTN","TIULA2",36,0)
 I PARM="1A" D TITLPICK^TIULA4(.TIUY,TIUCLASS) I +$G(TIUY)>0 Q
"RTN","TIULA2",37,0)
 S PROMPT=$S($G(PROMPT)]"":$G(PROMPT),TIUCLASS=3:"TITLE: ",1:"")
"RTN","TIULA2",38,0)
 S SCREEN="I $P(^TIU(8925.1,+Y,0),U,4)=""DOC"",($P(^(0),U)'[""ADDENDUM""),+$$ISA^TIULX(+Y,TIUCLASS)"_$S($G(ADDSCRN)]"":",",1:"")_$G(ADDSCRN)
"RTN","TIULA2",39,0)
 S TIUY=$$ASKTYP(+TIUCLASS,$G(DFLT),SCREEN,PROMPT)
"RTN","TIULA2",40,0)
 I +TIUY>0 S TIUY(1)=1_U_TIUY,TIUY=1
"RTN","TIULA2",41,0)
 Q
"RTN","TIULA2",42,0)
SELPAT(TIURTN,TIUTYP,DFN,TIUASK) ; Select a patient's document
"RTN","TIULA2",43,0)
 N TIUI,TIUQRY,TIUREC,TIUEDT,TIULDT,TIUPRMT,TIUA,TIUZ,TIUTOT,TIUSTOP
"RTN","TIULA2",44,0)
 N TIULAST,TIULIST,TIUJ,TIUY,TIUPNOUN,TIUSMPL,TIUTMP,TIUEDFLT,TIUCONT
"RTN","TIULA2",45,0)
 K ^TMP("TIULIST",$J),^TMP("TIULIDX",$J)
"RTN","TIULA2",46,0)
 S TIUTYP=$G(TIUTYP,38)
"RTN","TIULA2",47,0)
 S TIUPNOUN=$S(TIUTYP=3:"notes",TIUTYP=244:"summaries",1:"documents")
"RTN","TIULA2",48,0)
 I '+$G(DFN) S DFN=+$$PATIENT^TIULA Q:+DFN'>0
"RTN","TIULA2",49,0)
 I +$O(^TIU(8925,"APTCL",+DFN,+TIUTYP,0))'>0 D  Q
"RTN","TIULA2",50,0)
 . W !!,"No ",TIUPNOUN," on file for ",$P(^DPT(+DFN,0),U)
"RTN","TIULA2",51,0)
 . I $$READ^TIUU("EA","Press RETURN to continue...") W ""
"RTN","TIULA2",52,0)
 S TIUSMPL=$$SAMPLE(DFN,TIUTYP)
"RTN","TIULA2",53,0)
 I +TIUSMPL'>0 D  Q
"RTN","TIULA2",54,0)
 . W !!,"No ",TIUPNOUN," available for ",$P(^DPT(+DFN,0),U),!
"RTN","TIULA2",55,0)
 . I $$READ^TIUU("EA","Press RETURN to continue...") W ""
"RTN","TIULA2",56,0)
 S TIUTOT=+$P(TIUSMPL,U)
"RTN","TIULA2",57,0)
 S TIUEDT=+$P(TIUSMPL,U,2)_U_$$DATE^TIULS(+$P(TIUSMPL,U,2),"MM/DD/YY")
"RTN","TIULA2",58,0)
 S TIULDT=+$P(TIUSMPL,U,3)_U_$$DATE^TIULS(+$P(TIUSMPL,U,3),"MM/DD/YY")
"RTN","TIULA2",59,0)
 W !!,"Available ",TIUPNOUN,":  ",$P(TIUEDT,U,2)
"RTN","TIULA2",60,0)
 W " thru ",$P(TIULDT,U,2),"  (",TIUTOT,")"
"RTN","TIULA2",61,0)
 I +$G(TIUASK)>0 D  Q:+$G(TIUCONT)'>0
"RTN","TIULA2",62,0)
 . N TIUPRMT S TIUPRMT="Do you wish to see any of these notes"
"RTN","TIULA2",63,0)
 . S TIUCONT=+$$READ^TIUU("YO",TIUPRMT,"NO")
"RTN","TIULA2",64,0)
 I +TIUTOT=1,+$P(TIUSMPL,U,4) S TIURTN=1,TIURTN(1)=+$P(TIUSMPL,U,4) Q
"RTN","TIULA2",65,0)
 W !!,"Please specify a date range from which to select ",TIUPNOUN_":"
"RTN","TIULA2",66,0)
 S TIUPRMT="List "_TIUPNOUN_" Beginning: "
"RTN","TIULA2",67,0)
 S TIUEDFLT=$P(TIUEDT,U)
"RTN","TIULA2",68,0)
 I +TIUEDFLT<+$P(TIUEDT,U) S TIUEDFLT=$P(TIUEDT,U,2)
"RTN","TIULA2",69,0)
 I TIUEDFLT'["/" S TIUEDFLT=$$DATE^TIULS(TIUEDFLT,"MM/DD/YY")
"RTN","TIULA2",70,0)
 S TIUA=+$$READ^TIUU("DA^"_+$P(TIUEDT,".")_":"_+TIULDT_":E",TIUPRMT,TIUEDFLT)
"RTN","TIULA2",71,0)
 I +$D(DIRUT)!(TIUA'>0) Q
"RTN","TIULA2",72,0)
 S TIUPRMT=$J("Thru: ",$L(TIUPRMT))
"RTN","TIULA2",73,0)
 S TIUZ=+$$READ^TIUU("DA^"_+$P(TIUEDT,".")_":"_+TIULDT_":E",TIUPRMT,$P(TIULDT,U,2))_".2401" W !
"RTN","TIULA2",74,0)
 I +$D(DIRUT)!(TIUA'>0) Q
"RTN","TIULA2",75,0)
 I +TIUA>TIUZ S TIUTMP=TIUA,TIUA=TIUZ,TIUZ=TIUTMP
"RTN","TIULA2",76,0)
 D LIST^TIUSRVLL(.TIUY,TIUTYP,DFN,TIUA,TIUZ)
"RTN","TIULA2",77,0)
 I $D(TIUY)>9 D
"RTN","TIULA2",78,0)
 . S TIUI=0 F  S TIUI=$O(TIUY(TIUI)) Q:+TIUI'>0!(+$G(TIUSTOP)>0)  D
"RTN","TIULA2",79,0)
 . . N TIUD0,TIUD13,TIUD12,TIUD17
"RTN","TIULA2",80,0)
 . . S TIUD0=$G(^TIU(8925,+TIUY(TIUI),0)),TIUD12=$G(^(12))
"RTN","TIULA2",81,0)
 . . S TIUD13=$G(^TIU(8925,+TIUY(TIUI),13)),TIUD17=$G(^(17)),TIULAST=TIUI
"RTN","TIULA2",82,0)
 . . W !,TIUI,?4,$$DATE^TIULS(+TIUD13,"MM/DD/YY HR:MIN")
"RTN","TIULA2",83,0)
 . . W ?22,$E($$PNAME^TIULC1(+TIUD0),1,36)
"RTN","TIULA2",84,0)
 . . W ?60,$E($$NAME^TIULS($$PERSNAME^TIULC1(+$P(TIUD12,U,2)),"LAST,FI"),1,19)
"RTN","TIULA2",85,0)
 . . W !?$S($P(TIUD0,U,13)="H":24,1:22),$S($P(TIUD0,U,13)="H":"Adm: ",1:"Visit: "),$$DATE^TIULS($P(TIUD0,U,7),"MM/DD/YY")
"RTN","TIULA2",86,0)
 . . I $P(TIUD0,U,13)="H" W ?39,"Dis: ",$$DATE^TIULS($P(TIUD0,U,8),"MM/DD/YY")
"RTN","TIULA2",87,0)
 . . I $L(TIUD17) W !,"SUBJECT: ",$E(TIUD17,1,70)
"RTN","TIULA2",88,0)
 . . I '(TIUI#5),(TIUI<+$P(TIUY,U)) S TIUSTOP=$$PAUSE
"RTN","TIULA2",89,0)
 . I +TIUY=1 S TIURTN(1)=+TIUY(1) D  Q
"RTN","TIULA2",90,0)
 . . W !!,"One ",$S(TIUTYP=3:"note",TIUTYP=244:"summary",1:"document")
"RTN","TIULA2",91,0)
 . . W " found within date range..." H 1
"RTN","TIULA2",92,0)
 . I +$G(TIUSTOP)>0,(+$G(TIUSTOP)'=9999999) S TIULIST=$G(TIUSTOP)_","
"RTN","TIULA2",93,0)
 . E  S TIULIST=$P($$CHOOSE(1,+$G(TIULAST)),U)
"RTN","TIULA2",94,0)
 . S TIURTN=$L(TIULIST,",")-1
"RTN","TIULA2",95,0)
 . F TIUI=1:1:$L(TIULIST,",") D
"RTN","TIULA2",96,0)
 . . S TIUJ=$P(TIULIST,",",TIUI)
"RTN","TIULA2",97,0)
 . . I +TIUJ>0 S TIURTN(TIUI)=+$G(TIUY(+TIUJ))
"RTN","TIULA2",98,0)
 Q
"RTN","TIULA2",99,0)
SAMPLE(DFN,CLASS) ; Quick sample for range and count
"RTN","TIULA2",100,0)
 N EARLY,LATE,TOTAL,TIUI,TIUJ,TIUL,TIUY,TIULDA
"RTN","TIULA2",101,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIULA2",102,0)
 S (TIUI,TIUL,TIULDA,LATE,EARLY,TOTAL)=0
"RTN","TIULA2",103,0)
 F  S TIUI=$O(^TIU(8925,"APTCL",DFN,CLASS,TIUI)) Q:+TIUI'>0  D
"RTN","TIULA2",104,0)
 . S TIUJ=0
"RTN","TIULA2",105,0)
 . F  S TIUJ=$O(^TIU(8925,"APTCL",DFN,CLASS,TIUI,TIUJ)) Q:+TIUJ'>0  D
"RTN","TIULA2",106,0)
 . . I ($P(TIUPRM0,U,6)="S"),(+$$CANDO^TIULP(TIUJ,"VIEW")'>0) Q
"RTN","TIULA2",107,0)
 . . I +$G(^TIU(8925,+TIUJ,0))=81 Q
"RTN","TIULA2",108,0)
 . . S:'LATE LATE=9999999-TIUI
"RTN","TIULA2",109,0)
 . . S TIUL=TIUI,TOTAL=TOTAL+1,TIULDA=TIUJ
"RTN","TIULA2",110,0)
 S:+TIUL EARLY=9999999-TIUL
"RTN","TIULA2",111,0)
 S TIUY=TOTAL_U_EARLY_U_LATE
"RTN","TIULA2",112,0)
 S:TOTAL=1 TIUY=TIUY_U_TIULDA
"RTN","TIULA2",113,0)
 Q TIUY
"RTN","TIULA2",114,0)
PAUSE() ; Call reader to pause every 5 items
"RTN","TIULA2",115,0)
 N TIUPRMT,TIUY,DIRUT,DUOUT,DTOUT S TIUPRMT="   '^' TO STOP"
"RTN","TIULA2",116,0)
 S TIUY=$$READ^TIUU("FO^0:30",TIUPRMT)
"RTN","TIULA2",117,0)
 I TIUY="^"!$D(DUOUT)!$D(DIROUT)!$D(DTOUT) S TIUY=9999999
"RTN","TIULA2",118,0)
 S TIUY=$P(TIUY,U)
"RTN","TIULA2",119,0)
 I TIUY?1.N1"-"1.N S TIUY=$$RANGE(TIUY) I 1
"RTN","TIULA2",120,0)
 E  I $L(TIUY,",")>1 D
"RTN","TIULA2",121,0)
 . N TIUI F TIUI=1:1 Q:$P(TIUY,",",TIUI)=""  D
"RTN","TIULA2",122,0)
 . . I $P(TIUY,",",TIUI)?1.N1"-"1.N S $P(TIUY,",",TIUI)=$$RANGE($P(TIUY,",",TIUI))
"RTN","TIULA2",123,0)
 I TIUY="" S TIUY=0
"RTN","TIULA2",124,0)
 Q $G(TIUY)
"RTN","TIULA2",125,0)
RANGE(TIUX) ; Expand a selection range
"RTN","TIULA2",126,0)
 N TIUI,TIUY S TIUY=$P(TIUX,"-")
"RTN","TIULA2",127,0)
 F TIUI=($P(TIUX,"-")+1):1:($P(TIUX,"-",2)-1) S TIUY=TIUY_","_TIUI
"RTN","TIULA2",128,0)
 S TIUY=TIUY_","_$P(TIUX,"-",2)
"RTN","TIULA2",129,0)
 Q TIUY
"RTN","TIULA2",130,0)
CHOOSE(LOW,HIGH) ; Call reader to pick one or more items
"RTN","TIULA2",131,0)
 N TIUY,TIUPRMT S TIUPRMT="Choose one or more "_TIUPNOUN W !
"RTN","TIULA2",132,0)
 S TIUY=$$READ^TIUU("LO^"_LOW_":"_HIGH,TIUPRMT)
"RTN","TIULA2",133,0)
 Q TIUY
"RTN","TIULA2",134,0)
AUTHOR() ; Get author
"RTN","TIULA2",135,0)
 N TIUY,TIURTYP,TIUPRMT,TIUSCRN,DFLT
"RTN","TIULA2",136,0)
 S:+$$ISA^USRLM(DUZ,"PROVIDER")!+$$ISA^USRLM(DUZ,"STUDENT") DFLT=$$PERSNAME^TIULC1(DUZ)
"RTN","TIULA2",137,0)
 S TIURTYP="P^200:AEMQZ",TIUPRMT="Select AUTHOR"
"RTN","TIULA2",138,0)
 S TIUY=$$READ^TIUU(TIURTYP,TIUPRMT,$G(DFLT))
"RTN","TIULA2",139,0)
 Q TIUY
"RTN","TIULA3")
0^82^B8622264
"RTN","TIULA3",1,0)
TIULA3 ; SLC/JER - Still more interactive functions
"RTN","TIULA3",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULA3",3,0)
TITLE ; Title Look-up
"RTN","TIULA3",4,0)
 N TIUI,TYPE,TIUCLASS S TIUI=0
"RTN","TIULA3",5,0)
 K TIUTYP
"RTN","TIULA3",6,0)
 I +$G(TIUPICT)'>0 Q
"RTN","TIULA3",7,0)
 I $P($G(TIUPICT(1)),U,4)="ALL" D
"RTN","TIULA3",8,0)
 . S TIUCLASS=+$O(^TIU(8925.1,"AD",+$P(TIUPICT(1),U,2),0))
"RTN","TIULA3",9,0)
 . K TIUPICT
"RTN","TIULA3",10,0)
 . S TIUPICT=1,TIUPICT(1)="1^"_TIUCLASS_U_$$PNAME^TIULC1(TIUCLASS)
"RTN","TIULA3",11,0)
 F  S TIUI=$O(TIUPICT(TIUI)) Q:+TIUI'>0  D
"RTN","TIULA3",12,0)
 . S TIUCLASS=$P(TIUPICT(TIUI),U,2)
"RTN","TIULA3",13,0)
 . W !!,"For ",$$UP^XLFSTR($$PNAME^TIULC1(TIUCLASS)),":  "
"RTN","TIULA3",14,0)
 . D TITLPICK(.TIUTYP,TIUCLASS)
"RTN","TIULA3",15,0)
 S Y="ANY"
"RTN","TIULA3",16,0)
 Q
"RTN","TIULA3",17,0)
TITLPICK(TIUTYP,CLASS) ; Select multiple titles
"RTN","TIULA3",18,0)
 N TIUI,TYPE,TIUPRMT S TIUI=0
"RTN","TIULA3",19,0)
 W !!,"Please Select the ",$$UP^XLFSTR($$PNAME^TIULC1(CLASS))
"RTN","TIULA3",20,0)
 W " TITLES to search for:",!
"RTN","TIULA3",21,0)
 F  D  Q:+$G(TYPE)'>0
"RTN","TIULA3",22,0)
 . K TYPE
"RTN","TIULA3",23,0)
 . S TIUI=TIUI+1,TIUPRMT=$J(TIUI,3)_")  "
"RTN","TIULA3",24,0)
 . D DOCSPICK^TIULA2(.TYPE,CLASS,"A",0,TIUPRMT)
"RTN","TIULA3",25,0)
 . I +TYPE>0 S TIUTYP=+$G(TIUTYP)+1,TIUTYP(TIUTYP)=$G(TYPE(1))
"RTN","TIULA3",26,0)
 . I  I $P(TYPE(1),U,4)="SINGLE ITEM" D
"RTN","TIULA3",27,0)
 . . W !,"There is only one TITLE under ",$$UP^XLFSTR($$PNAME^TIULC1(CLASS))
"RTN","TIULA3",28,0)
 . . S TYPE=0
"RTN","TIULA3",29,0)
 . I $S($D(DTOUT):1,$D(DUOUT):1,(+TYPE'>0&'$D(TIUTYP)):1,1:0) S TIUQUIT=1
"RTN","TIULA3",30,0)
 W !
"RTN","TIULA3",31,0)
 Q
"RTN","TIULA3",32,0)
ASKTITLE(CLASS,TIUTTL) ; Ask for a different title, same class
"RTN","TIULA3",33,0)
 N TIUY,TIUTYP,DFLT,SCREEN,X,Y
"RTN","TIULA3",34,0)
 S DFLT=$$RSLVTITL(TIUTTL)
"RTN","TIULA3",35,0)
 S SCREEN="I $P(^TIU(8925.1,+Y,0),U,4)=""DOC"",($P(^(0),U)'[""ADDENDUM""),+$$ISA^TIULX(+Y,CLASS),+$$CANPICK^TIULP(+Y),+$$CANENTR^TIULP(+Y)"
"RTN","TIULA3",36,0)
 S TIUY=+$$ASKTYP^TIULA2(+CLASS,DFLT,SCREEN,"TITLE: ")
"RTN","TIULA3",37,0)
 I +$G(TIUY)'>0 S TIUY=TIUTTL
"RTN","TIULA3",38,0)
 Q TIUY
"RTN","TIULA3",39,0)
RSLVTITL(TIUTTL) ; Resolve pointers to titles
"RTN","TIULA3",40,0)
 Q $P($G(^TIU(8925.1,+TIUTTL,0)),U)
"RTN","TIULA3",41,0)
ASKSEQ(TIUDFLT) ; Ask preferred sort sequence
"RTN","TIULA3",42,0)
 N TIUPRMT,TIUSET,TIUY S TIUDFLT=$G(TIUDFLT,"D")
"RTN","TIULA3",43,0)
 S TIUPRMT="Please Specify Sort Order: "
"RTN","TIULA3",44,0)
 S TIUSET="A:ascending (OLDEST FIRST);D:descending (NEWEST FIRST)"
"RTN","TIULA3",45,0)
 S TIUY=$$READ^TIUU("SA^"_TIUSET,TIUPRMT,$S(TIUDFLT="A":"ascending",1:"descending"))
"RTN","TIULA3",46,0)
 Q TIUY
"RTN","TIULA3",47,0)
DATENOTE(X) ; Ask for date/time of note
"RTN","TIULA3",48,0)
 N %DT,Y
"RTN","TIULA3",49,0)
 ;S TIUPRMT="DATE/TIME OF NOTE"
"RTN","TIULA3",50,0)
 ;S TIUY=$$READ^TIUU("D^:NOW:RS",TIUPRMT,$G(DFLT,"NOW"),TIUHLP)
"RTN","TIULA3",51,0)
 ;I +TIUY W "     ",$P(TIUY,U,2)
"RTN","TIULA3",52,0)
 S %DT="RSX",%DT(0)="-NOW" D ^%DT
"RTN","TIULA3",53,0)
 I +Y'>0 D
"RTN","TIULA3",54,0)
 . W !,$C(7),"Enter DATE AND TIME of the note (future dates prohibited)."
"RTN","TIULA3",55,0)
 Q +$G(Y)
"RTN","TIULA3",56,0)
SCRCSNR(TIUDA,Y) ; Evaluate whether a person may be selected to cosign
"RTN","TIULA3",57,0)
 N TIUI,TIUY,TIUD0,TIUD12 S TIUY=1 ; most people may be selected
"RTN","TIULA3",58,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD12=$G(^TIU(8925,+TIUDA,12))
"RTN","TIULA3",59,0)
 ; A user may NOT select himself
"RTN","TIULA3",60,0)
 I +$$REQCOSIG^TIULP(+TIUD0,+TIUDA,+$G(DUZ)),(Y=+$G(DUZ)) S TIUY=0 G SCREENX
"RTN","TIULA3",61,0)
 ; Author may NOT be selected
"RTN","TIULA3",62,0)
 I Y=+$P(TIUD12,U,2) S TIUY=0 G SCREENX
"RTN","TIULA3",63,0)
 ; Expected Signer may NOT be selected
"RTN","TIULA3",64,0)
 I Y=+$P(TIUD12,U,4) S TIUY=0 G SCREENX
"RTN","TIULA3",65,0)
 ; Others who require Cosignature may NOT be selected
"RTN","TIULA3",66,0)
 I +$$REQCOSIG^TIULP(+TIUD0,+TIUDA,+Y) S TIUY=0
"RTN","TIULA3",67,0)
SCREENX Q +$G(TIUY)
"RTN","TIULA4")
0^83^B8030069
"RTN","TIULA4",1,0)
TIULA4 ; SLC/JER - Check out PUT API's
"RTN","TIULA4",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULA4",3,0)
CLASPICK(PARENT,Y,TYPES) ; Boolean fn to screen selection of classes
"RTN","TIULA4",4,0)
 N TIUY S TIUY=0,TYPES=$G(TYPES,"DCCL")
"RTN","TIULA4",5,0)
 I ($P(^TIU(8925.1,+Y,0),U,4)]""),$S(TYPES[$P(^TIU(8925.1,+Y,0),U,4):1,1:0),+$$ISA^TIULX(+Y,+PARENT),+$$CANPICK^TIULP(+Y) S TIUY=1
"RTN","TIULA4",6,0)
 Q TIUY
"RTN","TIULA4",7,0)
DFLTPICK(PARENT,Y,LIST) ; Boolean function to screen selection of Default title
"RTN","TIULA4",8,0)
 N TIUY S TIUY=0
"RTN","TIULA4",9,0)
 I $P(^TIU(8925.1,+Y,0),U,4)="DOC",+$$ISA^TIULX(+Y,+PARENT),+$$CANPICK^TIULP(+Y) S TIUY=1
"RTN","TIULA4",10,0)
 I +$G(LIST),(+$O(^TIU(8925.98,+$G(LIST),10,0))>0),(+$O(^TIU(8925.98,+$G(LIST),10,"B",+Y,0))'>0) S TIUY=0
"RTN","TIULA4",11,0)
 Q TIUY
"RTN","TIULA4",12,0)
LBYPASS() ; Interactive function to determine whether to bypass list
"RTN","TIULA4",13,0)
 N PROMPT W !
"RTN","TIULA4",14,0)
 S PROMPT="Edit (L)ist, (D)efault TITLE, or (B)oth? "
"RTN","TIULA4",15,0)
 Q $P($$READ^TIUU("SA^L:list;D:default;B:both",PROMPT,"BOTH"),U)
"RTN","TIULA4",16,0)
TITLPICK(TIUY,CLASS) ; Select a title
"RTN","TIULA4",17,0)
 N TITLES,I,L,Y,TIUDFLT S CLASS=$G(CLASS,3)
"RTN","TIULA4",18,0)
 D LIST(.TITLES,CLASS) Q:'+$O(TITLES(0))
"RTN","TIULA4",19,0)
 I +$G(TITLES("DFLT")) S TIUDFLT=+$G(TITLES("DFLT"))
"RTN","TIULA4",20,0)
 W !,"Personal ",$$UP^XLFSTR($$PNAME^TIULC1(CLASS))," Title List for "
"RTN","TIULA4",21,0)
 W $$NAME^TIULS($$PERSNAME^TIULC1(DUZ),"FIRST LAST"),!
"RTN","TIULA4",22,0)
 S (I,L,PICK)=0 F  S I=$O(TITLES(I)) Q:+I'>0!+PICK  D
"RTN","TIULA4",23,0)
 . W !?3,I,?8,$P(TITLES(I),U,2)
"RTN","TIULA4",24,0)
 . I I#20=0 S Y=$P($G(TITLES(+$$PICK(1,I,+$G(TIUDFLT)))),U),PICK=+Y
"RTN","TIULA4",25,0)
 . I +PICK S TIUY(1)=1_U_+Y_$$PNAME^TIULC1(+Y),TIUY=1
"RTN","TIULA4",26,0)
 . S L=I
"RTN","TIULA4",27,0)
 I 'PICK S Y=$P($G(TITLES(+$$PICK(1,L,+$G(TIUDFLT)))),U)
"RTN","TIULA4",28,0)
 I +Y S TIUY(1)=1_U_+Y_U_$$PNAME^TIULC1(+Y),TIUY=1 W "    ",$$PNAME^TIULC1(+Y)
"RTN","TIULA4",29,0)
 Q
"RTN","TIULA4",30,0)
PICK(LOW,HIGH,DFLT) ; List selection
"RTN","TIULA4",31,0)
 N X,Y
"RTN","TIULA4",32,0)
 W !
"RTN","TIULA4",33,0)
 I +$G(DFLT) S Y=$$READ^TIUU("NO^"_LOW_":"_HIGH,"TITLE",DFLT) I 1
"RTN","TIULA4",34,0)
 E  S Y=$$READ^TIUU("NO^"_LOW_":"_HIGH,"TITLE")
"RTN","TIULA4",35,0)
 W !
"RTN","TIULA4",36,0)
 Q Y
"RTN","TIULA4",37,0)
LIST(TIUY,CLASS,TYPE,TIUK) ; Get list of document titles
"RTN","TIULA4",38,0)
 N TIUDFLT
"RTN","TIULA4",39,0)
 S TIUK=+$G(TIUK)
"RTN","TIULA4",40,0)
 I $G(TYPE)']"" S TYPE="DOC"
"RTN","TIULA4",41,0)
 ; If the user has a preferred list of titles for the CLASS, get it
"RTN","TIULA4",42,0)
 I +$O(^TIU(8925.98,"AC",DUZ,CLASS,0)) D PERSLIST(.TIUY,DUZ,CLASS,.TIUK)
"RTN","TIULA4",43,0)
 Q
"RTN","TIULA4",44,0)
PERSLIST(TIUY,DUZ,CLASS,TIUC) ; Get personal list for a user
"RTN","TIULA4",45,0)
 N TIUI,TIUDA S TIUDA=+$O(^TIU(8925.98,"AC",DUZ,CLASS,0))
"RTN","TIULA4",46,0)
 Q:+TIUDA'>0
"RTN","TIULA4",47,0)
 S TIUY("DFLT")=$P($G(^TIU(8925.98,+TIUDA,0)),U,3)
"RTN","TIULA4",48,0)
 S (TIUC,TIUI)=0
"RTN","TIULA4",49,0)
 F  S TIUI=$O(^TIU(8925.98,TIUDA,10,TIUI)) Q:+TIUI'>0  D
"RTN","TIULA4",50,0)
 . N TIUPL,TIUTNM,TIUDTYP,TIUSEQ
"RTN","TIULA4",51,0)
 . S TIUPL=$G(^TIU(8925.98,TIUDA,10,TIUI,0))
"RTN","TIULA4",52,0)
 . S TIUDTYP=$P(TIUPL,U),TIUSEQ=+$P(TIUPL,U,2)
"RTN","TIULA4",53,0)
 . S TIUTNM=$S($P(TIUPL,U,3)]"":$P(TIUPL,U,3),1:$$PNAME^TIULC1(+TIUDTYP))
"RTN","TIULA4",54,0)
 . S TIUC=+$G(TIUC)+1,TIUSEQ=$S(+TIUSEQ:TIUSEQ,1:TIUC)
"RTN","TIULA4",55,0)
 . S TIUY(TIUSEQ)=TIUDTYP_U_TIUTNM
"RTN","TIULA4",56,0)
 . S:TIUDTYP=TIUY("DFLT") TIUY("DFLT")=TIUSEQ
"RTN","TIULA4",57,0)
 I +$G(TIUC)>0 S TIUC=+$G(TIUC)+1,TIUY(TIUC)=0_U_"Other Title"
"RTN","TIULA4",58,0)
 Q
"RTN","TIULAB")
0^84^B5066533
"RTN","TIULAB",1,0)
TIULAB ; SLC/JER - Lab objects ;7/7/95  15:22
"RTN","TIULAB",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULAB",3,0)
MAIN(DFN,EARLY,LATE,DISPLAY,NORM,TARGET,LINE) ; Control branching
"RTN","TIULAB",4,0)
 N GMTS1,GMTS2,GMTSAGE,GMTSDOB,GMTSPNM,GMTSRB,GMTSSN,GMTSWARD,SEX
"RTN","TIULAB",5,0)
 N LRDFN,MAX,I,J,SMPL,TIUY,VADPT,VAIN
"RTN","TIULAB",6,0)
 K ^TMP("LRC",$J)
"RTN","TIULAB",7,0)
 I $G(NORM)']"" S NORM="ALL"
"RTN","TIULAB",8,0)
 I '$D(^DPT(DFN,"LR")) D NOLABS G LABX
"RTN","TIULAB",9,0)
 S LRDFN=+^DPT(DFN,"LR") I '$D(^LR(LRDFN)) D NOLABS G LABX
"RTN","TIULAB",10,0)
 S MAX=999,GMTS1=9999999-LATE,GMTS2=9999999-EARLY
"RTN","TIULAB",11,0)
 I +$G(DISPLAY) W !,"Gathering Laboratory Data."
"RTN","TIULAB",12,0)
 D ^GMTSLRCE
"RTN","TIULAB",13,0)
 I '$D(^TMP("LRC",$J)) D NOLABS G LABX
"RTN","TIULAB",14,0)
 D SORT($G(NORM))
"RTN","TIULAB",15,0)
 S (TIUY,SMPL)="" F  S SMPL=$O(^TMP("LRC",$J,NORM,SMPL)) Q:SMPL=""  D
"RTN","TIULAB",16,0)
 . S I=GMTS1 F  S I=$O(^TMP("LRC",$J,NORM,SMPL,I)) Q:+I'>0!(I>GMTS2)  D
"RTN","TIULAB",17,0)
 . . S J=0 F  S J=$O(^TMP("LRC",$J,NORM,SMPL,I,J)) Q:+J'>0  D LINE
"RTN","TIULAB",18,0)
 K ^TMP("LRC",$J)
"RTN","TIULAB",19,0)
LABX Q "~@"_$NA(@TARGET)
"RTN","TIULAB",20,0)
NOLABS ; Handles Case Where no Labs are found to satisfy criteria
"RTN","TIULAB",21,0)
 S LINE=$S(+$G(LINE):+$G(LINE),1:1),@TARGET@(LINE,0)="No data available"
"RTN","TIULAB",22,0)
 S LINE=+$G(LINE)+1,@TARGET@(LINE,0)=" "
"RTN","TIULAB",23,0)
 S @TARGET@(0)="^^"_LINE_"^"_LINE_"^"_DT_"^^"
"RTN","TIULAB",24,0)
 Q
"RTN","TIULAB",25,0)
SORT(NFLAG) ; Sort ^TMP("LRC",$J, by reference flag
"RTN","TIULAB",26,0)
 N I,J,K,L I $G(NFLAG)']"" S NFLAG="ALL"
"RTN","TIULAB",27,0)
 S I=GMTS1 F  S I=$O(^TMP("LRC",$J,I)) Q:+I'>0!(I>GMTS2)  D
"RTN","TIULAB",28,0)
 . S J=0 F  S J=$O(^TMP("LRC",$J,I,J)) Q:+J'>0  D
"RTN","TIULAB",29,0)
 . . I NFLAG="ALL" S K="ALL"
"RTN","TIULAB",30,0)
 . . E  I $P(^TMP("LRC",$J,I,J),U,5)']"" S K="NORM"
"RTN","TIULAB",31,0)
 . . E  S K="ABNORM"
"RTN","TIULAB",32,0)
 . . S L=$P(^TMP("LRC",$J,I,J),U,2)
"RTN","TIULAB",33,0)
 . . I NFLAG="ALL"!(K=NFLAG) S ^TMP("LRC",$J,K,L,I,J)=^TMP("LRC",$J,I,J)
"RTN","TIULAB",34,0)
 . . K ^TMP("LRC",$J,I,J)
"RTN","TIULAB",35,0)
 Q
"RTN","TIULAB",36,0)
LINE ; Line-wrap with comma-dimited data
"RTN","TIULAB",37,0)
 N X,Y,TIUX
"RTN","TIULAB",38,0)
 S TIUX=$P($G(^TMP("LRC",$J,NORM,SMPL,I,J)),U,3,4)
"RTN","TIULAB",39,0)
 I $S($$HASNUM^TIULS($P(TIUX,U)):0,$L($P(TIUX,U))>5:1,$L($P(TIUX,U)," ")>1:1,1:0) D
"RTN","TIULAB",40,0)
 . S $P(TIUX,U)=$$MIXED^TIULS($P(TIUX,U))
"RTN","TIULAB",41,0)
 S $P(TIUX,U,2)=$TR($P(TIUX,U,2)," ",""),TIUX=$TR(TIUX,U," ")
"RTN","TIULAB",42,0)
 S TIUY=$$FILL^TIULS(TIUX,TIUY,79)
"RTN","TIULAB",43,0)
 I TIUY=TIUX S LINE=+$G(LINE)+1
"RTN","TIULAB",44,0)
 S @TARGET@(LINE,0)=TIUY
"RTN","TIULAB",45,0)
 S @TARGET@(0)="^^"_LINE_"^"_LINE_"^"_DT_"^^"
"RTN","TIULAB",46,0)
 I +$G(DISPLAY) W "."
"RTN","TIULAB",47,0)
 Q
"RTN","TIULADR")
0^85^B1404259
"RTN","TIULADR",1,0)
TIULADR ; SLC/JER - Adverse Reactions/Allergies ;8/3/94  14:51
"RTN","TIULADR",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULADR",3,0)
MAIN(DFN,DISPLAY,TARGET,LINE) ; Control branching
"RTN","TIULADR",4,0)
 N TIUI,TIUJ,GMRAL,TIUY
"RTN","TIULADR",5,0)
 I +$G(DISPLAY) W !,"Gathering Allergy Data."
"RTN","TIULADR",6,0)
 D EN1^GMRADPT I $D(GMRAL)'>9 D NOADR G ADRX
"RTN","TIULADR",7,0)
 S TIUI=0,TIUY="" F  S TIUI=$O(GMRAL(TIUI)) Q:+TIUI'>0  D LINE
"RTN","TIULADR",8,0)
ADRX Q "~@"_$NA(@TARGET)
"RTN","TIULADR",9,0)
NOADR ; Handles Case Where no Labs are found to satisfy criteria
"RTN","TIULADR",10,0)
 S LINE=+$G(LINE),@TARGET@(LINE,0)="No known allergies"
"RTN","TIULADR",11,0)
 S LINE=+$G(LINE)+1,@TARGET@(LINE,0)=" "
"RTN","TIULADR",12,0)
 S @TARGET@(0)="^^"_LINE_"^"_LINE_"^"_DT_"^^"
"RTN","TIULADR",13,0)
 Q
"RTN","TIULADR",14,0)
LINE ; Line-wrap with comma-dimited data
"RTN","TIULADR",15,0)
 N X,Y,TIUX
"RTN","TIULADR",16,0)
 S TIUX=$P($G(GMRAL(TIUI)),U,2) S:$L(TIUX)>4 TIUX=$$MIXED^TIULS(TIUX)
"RTN","TIULADR",17,0)
 S TIUY=$$FILL^TIULS(TIUX,TIUY,79)
"RTN","TIULADR",18,0)
 I TIUY=TIUX S LINE=+$G(LINE)+1
"RTN","TIULADR",19,0)
 S @TARGET@(LINE,0)=TIUY
"RTN","TIULADR",20,0)
 S @TARGET@(0)="^^"_LINE_"^"_LINE_"^"_DT_"^^"
"RTN","TIULADR",21,0)
 I +$G(DISPLAY) W "."
"RTN","TIULADR",22,0)
 Q
"RTN","TIULAPI")
0^86^B3224015
"RTN","TIULAPI",1,0)
TIULAPI ; SLC/JER - Extract selected documents from TIU ;10/25/95  10:59
"RTN","TIULAPI",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULAPI",3,0)
MAIN(DFN,TIUDOC,STATUS,TIME1,TIME2,OCCLIM,TEXT) ; Control branching
"RTN","TIULAPI",4,0)
 N TIUDA,TIUDT,TIUPRM0,TIUPRM1,TIUPRM3,COUNT,TIUSI,TIUS,TIUTI,TYPES
"RTN","TIULAPI",5,0)
 D SETPARM^TIULE
"RTN","TIULAPI",6,0)
 S:+$G(OCCLIM)'>0 OCCLIM=999
"RTN","TIULAPI",7,0)
 S:+$G(TIME1)'>0 TIME1=6666666
"RTN","TIULAPI",8,0)
 S:+$G(TIME2)'>0 TIME2=9999999
"RTN","TIULAPI",9,0)
 K ^TMP("TIU",$J)
"RTN","TIULAPI",10,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIULAPI",11,0)
 D DOCTYPE^TIUSRVL(.TYPES,TIUDOC)
"RTN","TIULAPI",12,0)
 I $D(STATUS)'>9 D STATUS^TIUSRVL(.STATUS,$S($G(STATUS)]"":STATUS,1:"ALL"))
"RTN","TIULAPI",13,0)
 S TIUTI=0 F  S TIUTI=$O(TYPES(TIUTI)) Q:+TIUTI'>0  D
"RTN","TIULAPI",14,0)
 . S TIUDOC=+$G(TYPES(TIUTI))
"RTN","TIULAPI",15,0)
 . S TIUSI=0 F  S TIUSI=$O(STATUS(TIUSI)) Q:+TIUSI'>0  D
"RTN","TIULAPI",16,0)
 . . S TIUS=+$G(STATUS(TIUSI)),TIUDT=TIME1
"RTN","TIULAPI",17,0)
 . . F  S TIUDT=$O(^TIU(8925,"APT",DFN,TIUDOC,TIUS,TIUDT)) Q:+TIUDT'>0!(TIUDT>TIME2)!(+$G(COUNT)'<OCCLIM)  D
"RTN","TIULAPI",18,0)
 . . . S TIUDA=0 F  S TIUDA=$O(^TIU(8925,"APT",DFN,TIUDOC,TIUS,TIUDT,TIUDA)) Q:+TIUDA'>0  D
"RTN","TIULAPI",19,0)
 . . . . I +$$ISADDNDM^TIULC1(TIUDA),+TEXT Q
"RTN","TIULAPI",20,0)
 . . . . I +$$CANDO^TIULP(TIUDA,"VIEW")'>0 Q
"RTN","TIULAPI",21,0)
 . . . . S COUNT=+$G(COUNT)+1
"RTN","TIULAPI",22,0)
 . . . . D EXTRACT^TIULQ(TIUDA,"^TMP(""TIU"",$J,"_COUNT_")",.TIUERR,".01;.05;.07;.08;1202;1203;1205;1208;1209;1301;1307;1402;1501:1505;1507:1513;1701","",1)
"RTN","TIULAPI",23,0)
 Q
"RTN","TIULAPIC")
0^87^B2126451
"RTN","TIULAPIC",1,0)
TIULAPIC ; SLC/JER - Extract selected classes from TIU
"RTN","TIULAPIC",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULAPIC",3,0)
MAIN(DFN,TIUDOC,TIME1,TIME2,OCCLIM,TEXT) ; Control branching
"RTN","TIULAPIC",4,0)
 N TIUDA,TIUDT,TIUPRM0,TIUPRM1,TIUPRM3,COUNT,TIUSI,TIUS,TIUTI,TYPES
"RTN","TIULAPIC",5,0)
 D SETPARM^TIULE
"RTN","TIULAPIC",6,0)
 S:+$G(OCCLIM)'>0 OCCLIM=999
"RTN","TIULAPIC",7,0)
 S:+$G(TIME1)'>0 TIME1=6666666
"RTN","TIULAPIC",8,0)
 S:+$G(TIME2)'>0 TIME2=9999999
"RTN","TIULAPIC",9,0)
 K ^TMP("TIU",$J)
"RTN","TIULAPIC",10,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIULAPIC",11,0)
 S TIUDT=TIME1
"RTN","TIULAPIC",12,0)
 F  S TIUDT=$O(^TIU(8925,"APTCL",DFN,TIUDOC,TIUDT)) Q:+TIUDT'>0!(TIUDT>TIME2)!(+$G(COUNT)'<OCCLIM)  D
"RTN","TIULAPIC",13,0)
 . S TIUDA=0
"RTN","TIULAPIC",14,0)
 . F  S TIUDA=$O(^TIU(8925,"APTCL",DFN,TIUDOC,TIUDT,TIUDA)) Q:+TIUDA'>0  D
"RTN","TIULAPIC",15,0)
 . . I +$$ISADDNDM^TIULC1(TIUDA),+TEXT Q
"RTN","TIULAPIC",16,0)
 . . I +$$CANDO^TIULP(TIUDA,"VIEW")'>0 Q
"RTN","TIULAPIC",17,0)
 . . S COUNT=+$G(COUNT)+1
"RTN","TIULAPIC",18,0)
 . . D EXTRACT^TIULQ(TIUDA,"^TMP(""TIU"",$J,"_TIUDT_")",.TIUERR,".01;.05;.07;.08;1202;1203;1205;1208;1209;1301;1307;1402;1501:1505;1507:1513;1701","",1)
"RTN","TIULAPIC",19,0)
 Q
"RTN","TIULAPIS")
0^88^B3538707
"RTN","TIULAPIS",1,0)
TIULAPIS ; SLC/JER - Extract selected documents from TIU ;10/25/95  10:59
"RTN","TIULAPIS",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULAPIS",3,0)
MAIN(DFN,TIUDOC,STATUS,TIME1,TIME2,OCCLIM,TEXT) ; Control branching
"RTN","TIULAPIS",4,0)
 N TIUDA,TIUDT,TIUPRM0,TIUSTAT,TIUPRM1,TIUPRM3,COUNT,TIUSI,TIUS,TIUTI
"RTN","TIULAPIS",5,0)
 D SETPARM^TIULE
"RTN","TIULAPIS",6,0)
 S:+$G(OCCLIM)'>0 OCCLIM=999
"RTN","TIULAPIS",7,0)
 S:+$G(TIME1)'>0 TIME1=6666666
"RTN","TIULAPIS",8,0)
 S:+$G(TIME2)'>0 TIME2=9999999
"RTN","TIULAPIS",9,0)
 K ^TMP("TIU",$J)
"RTN","TIULAPIS",10,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIULAPIS",11,0)
 I $D(TIUDOC)'>0 Q
"RTN","TIULAPIS",12,0)
 I $D(STATUS)'>9 D STATUS^TIUSRVL(.STATUS,$S($G(STATUS)]"":STATUS,1:"ALL"))
"RTN","TIULAPIS",13,0)
 S TIUTI=0 F  S TIUTI=$O(TIUDOC(TIUTI)) Q:+TIUTI'>0  D
"RTN","TIULAPIS",14,0)
 . S TIUDOC=+$G(TIUDOC(TIUTI)),COUNT=0
"RTN","TIULAPIS",15,0)
 . S TIUSI=0 F  S TIUSI=$O(STATUS(TIUSI)) Q:+TIUSI'>0  D
"RTN","TIULAPIS",16,0)
 . . S TIUS=+$G(STATUS(TIUSI)),TIUDT=TIME1
"RTN","TIULAPIS",17,0)
 . . F  S TIUDT=$O(^TIU(8925,"APT",DFN,TIUDOC,TIUS,TIUDT)) Q:+TIUDT'>0!(TIUDT>TIME2)!(+$G(COUNT)'<OCCLIM)  D
"RTN","TIULAPIS",18,0)
 . . . S TIUDA=0 F  S TIUDA=$O(^TIU(8925,"APT",DFN,TIUDOC,TIUS,TIUDT,TIUDA)) Q:+TIUDA'>0  D
"RTN","TIULAPIS",19,0)
 . . . . I +$$ISADDNDM^TIULC1(TIUDA),+TEXT Q
"RTN","TIULAPIS",20,0)
 . . . . I +$$CANDO^TIULP(TIUDA,"VIEW")'>0 Q
"RTN","TIULAPIS",21,0)
 . . . . S COUNT=+$G(COUNT)+1,^TMP("TIU",$J,TIUDT,TIUTI,0)=COUNT
"RTN","TIULAPIS",22,0)
 . . . . D EXTRACT^TIULQ(TIUDA,"^TMP(""TIU"","_$J_","_TIUDT_","_TIUTI_")",.TIUERR,".01;.05;.07;.08;1202;1203;1205;1208;1209;1301;1307;1402;1501:1505;1507:1513;1701","",1)
"RTN","TIULAPIS",23,0)
 Q
"RTN","TIULC")
0^89^B24697163
"RTN","TIULC",1,0)
TIULC ; SLC/JER - Computational functions ;8/19/94  12:29
"RTN","TIULC",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULC",3,0)
LINECNT(DA) ; Compute line count for document record
"RTN","TIULC",4,0)
 N CPL S CPL=$S(+$P($G(TIUPRM0),U,3)>0:$P(TIUPRM0,U,3),1:60)
"RTN","TIULC",5,0)
 Q $$CHARCNT(DA)\CPL
"RTN","TIULC",6,0)
CHARCNT(DA) ; Compute character count for a record
"RTN","TIULC",7,0)
 N TIUI
"RTN","TIULC",8,0)
 N:'$D(CCNT) CCNT ; Character count is static
"RTN","TIULC",9,0)
 S TIUI=0 F  S TIUI=$O(^TIU(8925,DA,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIULC",10,0)
 . S CCNT=+$G(CCNT)+$L($$STRIP^TIULS(^TIU(8925,DA,"TEXT",TIUI,0)))
"RTN","TIULC",11,0)
 S TIUI=0
"RTN","TIULC",12,0)
 F  S TIUI=$O(^TIU(8925,"DAD",DA,TIUI)) Q:+TIUI'>0  S CCNT=$$CHARCNT(TIUI)
"RTN","TIULC",13,0)
 Q +$G(CCNT)
"RTN","TIULC",14,0)
STATUS(DA) ; Evaluate Status of Reports
"RTN","TIULC",15,0)
 N NODE12,NODE13,NODE15,NODE16,AMENDED,STATUS,SIGNED,COSIGNED,PURGED
"RTN","TIULC",16,0)
 N VERIFIED,RELEASED,SIGNER,COSIGNER,SIGSTAT,TYPE,REQVER,REQREL,REQCOS
"RTN","TIULC",17,0)
 N DELETED,TIUDPARM
"RTN","TIULC",18,0)
 S STATUS=""
"RTN","TIULC",19,0)
 S TYPE=$S($D(TIUTYP(1)):$P(TIUTYP(1),U,2),1:+$G(^TIU(8925,+DA,0)))
"RTN","TIULC",20,0)
 D DOCPRM^TIULC1(TYPE,.TIUDPARM,DA)
"RTN","TIULC",21,0)
 S REQVER=$$REQVER(+DA,+$P($G(TIUDPARM(0)),U,3))
"RTN","TIULC",22,0)
 S REQREL=+$P($G(TIUDPARM(0)),U,2)
"RTN","TIULC",23,0)
 S NODE12=$G(^TIU(8925,+DA,12)),NODE13=$G(^TIU(8925,+DA,13))
"RTN","TIULC",24,0)
 S NODE15=$G(^TIU(8925,+DA,15)),NODE16=$G(^TIU(8925,+DA,16))
"RTN","TIULC",25,0)
 S SIGNED=+$P(NODE15,U),COSIGNED=+$P(NODE15,U,7),REQCOS=+$P(NODE15,U,6)
"RTN","TIULC",26,0)
 S SIGNER=+$P(NODE12,U,2),COSIGNER=+$P(NODE12,U,4)
"RTN","TIULC",27,0)
 S AMENDED=+$P(NODE16,U),PURGED=+$P(NODE16,U,4),DELETED=+$P(NODE16,U,11)
"RTN","TIULC",28,0)
 S RELEASED=+$P(NODE13,U,4),VERIFIED=+$P(NODE13,U,5)
"RTN","TIULC",29,0)
 I PURGED S STATUS="purged" G STATUSX
"RTN","TIULC",30,0)
 I DELETED S STATUS="deleted" G STATUSX
"RTN","TIULC",31,0)
 I AMENDED S STATUS="amended" G STATUSX
"RTN","TIULC",32,0)
 ; I '+NODE12,'+NODE13 S STATUS="undictated" G STATUSX
"RTN","TIULC",33,0)
 I '+NODE12,+NODE13 S STATUS="untranscribed" G STATUSX
"RTN","TIULC",34,0)
 I REQREL,'RELEASED S STATUS="unreleased" G STATUSX
"RTN","TIULC",35,0)
 I REQVER,'VERIFIED S STATUS="unverified" G STATUSX
"RTN","TIULC",36,0)
 I SIGNED,$S('REQCOS:1,COSIGNED:1,1:0) S STATUS="completed" G STATUSX
"RTN","TIULC",37,0)
 I 'SIGNED S STATUS="unsigned" G STATUSX
"RTN","TIULC",38,0)
 I REQCOS,'COSIGNED S STATUS="uncosigned"
"RTN","TIULC",39,0)
STATUSX Q STATUS
"RTN","TIULC",40,0)
REQVER(TIUDA,TIUVPRM) ; Evaluate conditions of verification requirement
"RTN","TIULC",41,0)
 N TIUD0,TIUD13,TIUY S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD13=$G(^(13))
"RTN","TIULC",42,0)
 I +$G(TIUVPRM)'>0 S TIUY=0 G REQVX
"RTN","TIULC",43,0)
 I +$G(TIUVPRM)=1 S TIUY=1 G REQVX
"RTN","TIULC",44,0)
 I +$G(TIUVPRM)=2,($P(TIUD13,U,3)="U") S TIUY=1 G REQVX
"RTN","TIULC",45,0)
 I +$G(TIUVPRM)=3,($P(TIUD13,U,3)="D") S TIUY=1
"RTN","TIULC",46,0)
REQVX Q +$G(TIUY)
"RTN","TIULC",47,0)
PRCDNC(DA,SCREEN) ; Determine sort precedence of each record
"RTN","TIULC",48,0)
 N SIGNED,URGENCY
"RTN","TIULC",49,0)
 S URGENCY=$P($G(^TIU(8925,+DA,0)),U,9)
"RTN","TIULC",50,0)
 I +$$SIGNED(DA,.SCREEN)'>0 S Y=$S(URGENCY="P":1,1:2)
"RTN","TIULC",51,0)
 E  S Y=3
"RTN","TIULC",52,0)
 Q Y
"RTN","TIULC",53,0)
PURGE(TIUDA) ; Checks whether or not a given Document should be purged
"RTN","TIULC",54,0)
 N TIUEDT,TIUY S TIUY=0
"RTN","TIULC",55,0)
 ; if parameters not in symbol table, get them
"RTN","TIULC",56,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIULC",57,0)
 ; exit if no Archive/purge grace period defined
"RTN","TIULC",58,0)
 S TIUEDT=$P($G(^TIU(8925,TIUDA,12)),U)
"RTN","TIULC",59,0)
 I +TIUEDT'>0 G PURGEX ;Transcription date blank
"RTN","TIULC",60,0)
 I +$$ISPN^TIULX(+$G(^TIU(8925,+TIUDA,0))) G PURGEX ; PN's exempt
"RTN","TIULC",61,0)
 I +$P($G(^TIU(8925,+TIUDA,0)),U,5)<7 G PURGEX ;Incomplete--don't purge
"RTN","TIULC",62,0)
 I +$P($G(^TIU(8925,TIUDA,16)),U,4)>0 G PURGEX ;Report already purged
"RTN","TIULC",63,0)
 I $$FMDIFF^XLFDT(DT,TIUEDT)>+$P(TIUPRM0,U,4) S TIUY=1
"RTN","TIULC",64,0)
PURGEX Q TIUY
"RTN","TIULC",65,0)
OVERDUE(TIUDA) ; Checks whether or not a given document is overdue
"RTN","TIULC",66,0)
 N TIUD0,TIUDATE,TIUY,TIUDPRM S TIUY=0,TIUD0=$G(^TIU(8925,TIUDA,0))
"RTN","TIULC",67,0)
 ; if parameters not in symbol table, get them
"RTN","TIULC",68,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIULC",69,0)
 D DOCPRM^TIULC1(+TIUD0,.TIUDPRM,TIUDA)
"RTN","TIULC",70,0)
 ; exit if no signature grace period defined
"RTN","TIULC",71,0)
 I +$P(TIUPRM0,U,5)'>0 G OVERX
"RTN","TIULC",72,0)
 I '$D(TIUDPRM) G OVERX
"RTN","TIULC",73,0)
 S TIUDATE=$S($P(TIUDPRM(0),U,3):$P($G(^TIU(8925,+TIUDA,13)),U,5),$P(TIUDPRM(0),U,2):$P($G(^TIU(8925,+TIUDA,13)),U,4),1:$P($G(^TIU(8925,+TIUDA,12)),U))
"RTN","TIULC",74,0)
 G:+TIUDATE'>0 OVERX
"RTN","TIULC",75,0)
 I $$FMDIFF^XLFDT(DT,TIUDATE)>$P(TIUPRM0,U,5),(+$P($G(^TIU(8925,+TIUDA,0)),U,5)>4),(+$P($G(^TIU(8925,+TIUDA,0)),U,5)<7) S TIUY=1
"RTN","TIULC",76,0)
OVERX Q TIUY
"RTN","TIULC",77,0)
NOW() ; Extrinsic function returning current date/time to nearest .01 second
"RTN","TIULC",78,0)
 N %,%H,%I,X
"RTN","TIULC",79,0)
 D NOW^%DTC
"RTN","TIULC",80,0)
 Q %
"RTN","TIULC",81,0)
IDATE(X) ; Recieves date in external format, returns internal format
"RTN","TIULC",82,0)
 N %DT,Y
"RTN","TIULC",83,0)
 I ($L(X," ")=2),(X?1.2N1P1.2N1P1.2N1" "1.2N.E) S X=$TR(X," ","@")
"RTN","TIULC",84,0)
 S %DT="TS" D ^%DT
"RTN","TIULC",85,0)
 Q Y
"RTN","TIULC",86,0)
SIGNED(TIUDA,SCREEN) ; Check whether document requires signature or
"RTN","TIULC",87,0)
 ; cosignature on user-sensitive basis
"RTN","TIULC",88,0)
 N Y S Y=0 ; Initialize return value to FALSE
"RTN","TIULC",89,0)
 ; If archived/purged return TRUE
"RTN","TIULC",90,0)
 I +$P($G(^TIU(8925,+TIUDA,16)),U,9) S Y=1 G SIGNEDX
"RTN","TIULC",91,0)
 ; If OPTION is Act on MY Unsigned Documents, check
"RTN","TIULC",92,0)
 ; whether his/her signature is present
"RTN","TIULC",93,0)
 I $P($G(SCREEN(1)),U)="AAU",($P($G(SCREEN(2)),U)="ASUP") D  G SIGNEDX
"RTN","TIULC",94,0)
 . ; If dictated by user and signed return TRUE
"RTN","TIULC",95,0)
 . I $P($G(^TIU(8925,+TIUDA,12)),U,4)=DUZ,(+$P($G(^(15)),U)>0) S Y=1
"RTN","TIULC",96,0)
 . ; If user is Expected Cosigner and cosigned, return TRUE
"RTN","TIULC",97,0)
 . I $P($G(^TIU(8925,+TIUDA,12)),U,8)=DUZ,(+$P($G(^(15)),U,7)>0) S Y=1
"RTN","TIULC",98,0)
 ; Otherwise check search criteria to determine signature status
"RTN","TIULC",99,0)
 I $P($G(SCREEN(1)),U)="AAU",+$P($G(^TIU(8925,+TIUDA,15)),U) S Y=1 G SIGNEDX
"RTN","TIULC",100,0)
 I $P($G(SCREEN(1)),U)="ASUP",+$P($G(^TIU(8925,+TIUDA,15)),U,7) S Y=1 G SIGNEDX
"RTN","TIULC",101,0)
 I +$P($G(^TIU(8925,+TIUDA,15)),U),+$P($G(^(15)),U,7) S Y=1
"RTN","TIULC",102,0)
SIGNEDX Q Y
"RTN","TIULC",103,0)
BLANK(TIUDA) ; Reads a given document for blank lines
"RTN","TIULC",104,0)
 ; Returns: 1:Record contains 1 or more blanks
"RTN","TIULC",105,0)
 ;          0:Record contains no blanks
"RTN","TIULC",106,0)
 N BLANK,TIUI,Y S (TIUI,Y)=0
"RTN","TIULC",107,0)
 I '$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIULC",108,0)
 I $P($G(TIUPRM1),U,6)']"" G BLANKX
"RTN","TIULC",109,0)
 S BLANK=$P(TIUPRM1,U,6)
"RTN","TIULC",110,0)
 F  S TIUI=$O(^TIU(8925,TIUDA,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIULC",111,0)
 . I $G(^TIU(8925,TIUDA,"TEXT",TIUI,0))[BLANK S Y=1
"RTN","TIULC",112,0)
BLANKX Q Y
"RTN","TIULC",113,0)
CHKSUM(TIUROOT,TIUY) ; Calculates checksum for a record
"RTN","TIULC",114,0)
 N TIUI,X S TIUI=0,TIUY=+$G(TIUY)
"RTN","TIULC",115,0)
 F  S TIUI=$O(@TIUROOT@(TIUI)) Q:+TIUI'>0  D
"RTN","TIULC",116,0)
 . S X=$G(@TIUROOT@(TIUI,0))
"RTN","TIULC",117,0)
 . N TIUJ
"RTN","TIULC",118,0)
 . F TIUJ=1:1:$L(X) S TIUY=+$G(TIUY)+(($A(X,TIUJ)*TIUI)*TIUJ)
"RTN","TIULC",119,0)
 S TIUI=0
"RTN","TIULC",120,0)
 F  S TIUI=$O(^TIU(8925,"DAD",+$P(TIUROOT,",",2),TIUI)) Q:+TIUI'>0  D
"RTN","TIULC",121,0)
 . I +$$ISADDNDM^TIULC1(+TIUI) Q
"RTN","TIULC",122,0)
 . S TIUY=+$G(TIUY)+$$CHKSUM("^TIU(8925,"_+TIUI_",""TEXT"")",TIUY)
"RTN","TIULC",123,0)
 Q +$G(TIUY)
"RTN","TIULC1")
0^90^B20622166
"RTN","TIULC1",1,0)
TIULC1 ; SLC/JER - More computational functions ;4/13/94  15:23
"RTN","TIULC1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULC1",3,0)
ENCRYPT(X,X1,X2) ; Encrypt Text Strings
"RTN","TIULC1",4,0)
 D EN^XUSHSHP
"RTN","TIULC1",5,0)
 Q X
"RTN","TIULC1",6,0)
DECRYPT(X,X1,X2) ; Decrypt Text Strings
"RTN","TIULC1",7,0)
 D DE^XUSHSHP
"RTN","TIULC1",8,0)
 Q X
"RTN","TIULC1",9,0)
WHOSIGNS(DA) ; Evaluate who should be the expected signer
"RTN","TIULC1",10,0)
 N Y,TIU12
"RTN","TIULC1",11,0)
 S TIU12=$G(^TIU(8925,+DA,12))
"RTN","TIULC1",12,0)
 I $P(TIU12,U,2)'=$P(TIU12,U,9) S Y=$P(TIU12,U,2)
"RTN","TIULC1",13,0)
 E  S Y=$P(TIU12,U,9)
"RTN","TIULC1",14,0)
 Q Y
"RTN","TIULC1",15,0)
WHOCOSIG(DA) ; Evaluate who should be the expected cosigner
"RTN","TIULC1",16,0)
 N Y,TIU12
"RTN","TIULC1",17,0)
 S TIU12=$G(^TIU(8925,+DA,12))
"RTN","TIULC1",18,0)
 I $P(TIU12,U,2)=$P(TIU12,U,9) D
"RTN","TIULC1",19,0)
 . I $P(TIU12,U,8)]"" S Y="@"
"RTN","TIULC1",20,0)
 . E  S Y=""
"RTN","TIULC1",21,0)
 E  S Y=$P(TIU12,U,9)
"RTN","TIULC1",22,0)
 Q Y
"RTN","TIULC1",23,0)
HASADDEN(DA) ; Evaluate whether a given record has addenda
"RTN","TIULC1",24,0)
 N TIUI,TIUY S (TIUI,TIUY)=0
"RTN","TIULC1",25,0)
 F  S TIUI=$O(^TIU(8925,"DAD",+DA,TIUI)) Q:+TIUI'>0  D
"RTN","TIULC1",26,0)
 . I $P($G(^TIU(8925.1,+$G(^TIU(8925,+TIUI,0)),0)),U)["ADDENDUM" S TIUY=1 Q
"RTN","TIULC1",27,0)
 Q TIUY
"RTN","TIULC1",28,0)
ISADDNDM(DA) ; Evaluate whether a given record IS an addendum
"RTN","TIULC1",29,0)
 N TIUY S TIUY=0
"RTN","TIULC1",30,0)
 I $P($G(^TIU(8925.1,+$G(^TIU(8925,+DA,0)),0)),U)["ADDENDUM",+$P($G(^TIU(8925,+DA,0)),U,6)>0 S TIUY=1
"RTN","TIULC1",31,0)
 Q TIUY
"RTN","TIULC1",32,0)
PNAME(DA) ; Receives pointer to 8925.1, returns display name of
"RTN","TIULC1",33,0)
 ; document class
"RTN","TIULC1",34,0)
 N TIUY,TIUMOM S TIUMOM=0
"RTN","TIULC1",35,0)
 I +$G(DA)'>0 Q "UNKNOWN"
"RTN","TIULC1",36,0)
 S TIUMOM=$O(^TIU(8925.1,"AD",DA,TIUMOM))
"RTN","TIULC1",37,0)
 I $P($G(^TIU(8925.1,+DA,0)),U,4)="CO" S TIUMOM=0
"RTN","TIULC1",38,0)
 I +$P($G(^TIU(8925.1,+DA,0)),U,9)=0 S TIUMOM=0
"RTN","TIULC1",39,0)
 I +TIUMOM>0  D
"RTN","TIULC1",40,0)
 . S TIUY=$P($G(^TIU(8925.1,+TIUMOM,0)),U,3)
"RTN","TIULC1",41,0)
 . I TIUY']"" S TIUY=$$MIXED^TIULS($P($G(^TIU(8925.1,+TIUMOM,0)),U))
"RTN","TIULC1",42,0)
 I +TIUMOM'>0 D
"RTN","TIULC1",43,0)
 . S TIUY=$P($G(^TIU(8925.1,+DA,0)),U,3)
"RTN","TIULC1",44,0)
 . I TIUY']"" S TIUY=$$MIXED^TIULS($P($G(^TIU(8925.1,+DA,0)),U))
"RTN","TIULC1",45,0)
 Q TIUY
"RTN","TIULC1",46,0)
ABBREV(DA) ; Get abbreviaton for a document type or class
"RTN","TIULC1",47,0)
 Q $P($G(^TIU(8925.1,+DA,0)),U,2)
"RTN","TIULC1",48,0)
PERSNAME(USER) ; Receives pointer to 200, returns name field
"RTN","TIULC1",49,0)
 Q $P($G(^VA(200,+USER,0),"UNKNOWN"),U)
"RTN","TIULC1",50,0)
BEEP(USER) ; Get beeper #'s 
"RTN","TIULC1",51,0)
 Q $P($G(^VA(200,+USER,.13)),U,7,8)
"RTN","TIULC1",52,0)
DOCPRM(TIUTYP,TIUDPRM,TIUDA) ; Get Document Parameters, support inheritance
"RTN","TIULC1",53,0)
 N TIUI,TIUDAD
"RTN","TIULC1",54,0)
 I $P($G(^TIU(8925.1,+TIUTYP,0)),U)["ADDENDUM",+$G(TIUDA) S TIUTYP=+$G(^TIU(8925,+$P($G(^TIU(8925,+TIUDA,0)),U,6),0))
"RTN","TIULC1",55,0)
 S TIUI=+$O(^TIU(8925.95,"B",+TIUTYP,0))
"RTN","TIULC1",56,0)
 I +TIUI D  Q
"RTN","TIULC1",57,0)
 . S TIUDPRM(0)=$G(^TIU(8925.95,+TIUI,0))
"RTN","TIULC1",58,0)
 . I +$O(^TIU(8925.95,+TIUI,5,0)) D
"RTN","TIULC1",59,0)
 . . N TIUJ S TIUJ=0
"RTN","TIULC1",60,0)
 . . F  S TIUJ=$O(^TIU(8925.95,+TIUI,5,TIUJ)) Q:+TIUJ'>0  D
"RTN","TIULC1",61,0)
 . . . S $P(TIUDPRM(5),U,TIUJ)=+$G(^TIU(8925.95,+TIUI,5,+TIUJ,0))
"RTN","TIULC1",62,0)
 S TIUDAD=$O(^TIU(8925.1,"AD",+TIUTYP,0))
"RTN","TIULC1",63,0)
 I +TIUDAD D DOCPRM(TIUDAD,.TIUDPRM)
"RTN","TIULC1",64,0)
 Q
"RTN","TIULC1",65,0)
POSTFILE(TIUTYP) ; Get Error Resolution Code, support inheritance
"RTN","TIULC1",66,0)
 N TIUPOST,TIUDAD
"RTN","TIULC1",67,0)
 S TIUPOST=$G(^TIU(8925.1,+TIUTYP,4.5))
"RTN","TIULC1",68,0)
 I TIUPOST]"" G POSTFILX
"RTN","TIULC1",69,0)
 S TIUDAD=$O(^TIU(8925.1,"AD",+TIUTYP,0))
"RTN","TIULC1",70,0)
 I +TIUDAD S TIUPOST=$$POSTFILE(TIUDAD)
"RTN","TIULC1",71,0)
POSTFILX Q TIUPOST
"RTN","TIULC1",72,0)
FIXCODE(TIUTYP) ; Get Error Resolution Code, support inheritance
"RTN","TIULC1",73,0)
 N TIUFIX,TIUDAD
"RTN","TIULC1",74,0)
 S TIUFIX=$G(^TIU(8925.1,+TIUTYP,4.8))
"RTN","TIULC1",75,0)
 I TIUFIX]"" G FIXCODX
"RTN","TIULC1",76,0)
 S TIUDAD=$O(^TIU(8925.1,"AD",+TIUTYP,0))
"RTN","TIULC1",77,0)
 I +TIUDAD S TIUFIX=$$FIXCODE(TIUDAD)
"RTN","TIULC1",78,0)
FIXCODX Q TIUFIX
"RTN","TIULC1",79,0)
DOCCLASS(TIUTYP) ; Given a document type, find its parent document class
"RTN","TIULC1",80,0)
 Q +$O(^TIU(8925.1,"AD",+TIUTYP,0))
"RTN","TIULC1",81,0)
CLINDOC(TIUTYP,TIUDA) ; Given a document type, find the Clinical Document
"RTN","TIULC1",82,0)
 ;                 subclass to which it belongs
"RTN","TIULC1",83,0)
 N TIUI,TIUY S (TIUI,TIUY)=0
"RTN","TIULC1",84,0)
 I +$G(TIUDA),+$$ISADDNDM(TIUDA) S TIUTYP=+$G(^TIU(8925,+$P($G(^TIU(8925,+TIUDA,0)),U,6),0))
"RTN","TIULC1",85,0)
 S TIUI=$O(^TIU(8925.1,"AD",+TIUTYP,TIUI))
"RTN","TIULC1",86,0)
 I +TIUI'>0 G CLINDOX
"RTN","TIULC1",87,0)
 I TIUI=38 S TIUY=TIUTYP
"RTN","TIULC1",88,0)
 I TIUI'=38 S TIUY=$$CLINDOC(TIUI)
"RTN","TIULC1",89,0)
CLINDOX Q TIUY
"RTN","TIULC1",90,0)
REQVER(TIUTYP,TIUDA) ; Does a given document type require verification
"RTN","TIULC1",91,0)
 N TIUDPRM,TIUY
"RTN","TIULC1",92,0)
 I +$G(TIUDA),+$$ISADDNDM(TIUDA) S TIUTYP=+$G(^TIU(8925,+$P($G(^TIU(8925,+TIUDA,0)),U,6),0))
"RTN","TIULC1",93,0)
 D DOCPRM(TIUTYP,.TIUDPRM)
"RTN","TIULC1",94,0)
 I +$P($G(TIUDPRM(0)),U,3) S TIUY=1
"RTN","TIULC1",95,0)
 Q +$G(TIUY)
"RTN","TIULC1",96,0)
REFDATE(TIU,TIUDICDT) ; Identify Reference date
"RTN","TIULC1",97,0)
 N TIURDT
"RTN","TIULC1",98,0)
 I +$G(TIU("LDT")) S TIURDT=+$G(TIU("LDT"))_"^0"
"RTN","TIULC1",99,0)
 I +$G(TIU("LDT"))'>0 D
"RTN","TIULC1",100,0)
 . S TIURDT=$S(+$G(TIUDICDT):+$G(TIUDICDT),1:+$$NOW^TIULC)_"^1"
"RTN","TIULC1",101,0)
 . S TIU("LDT")=TIURDT_U_$$DATE^TIULS(TIURDT,"AMTH DD, CCYY@HR:MIN:SEC")
"RTN","TIULC1",102,0)
 Q TIURDT
"RTN","TIULC1",103,0)
WHATMPL(USER) ; What List Template should a given user get?
"RTN","TIULC1",104,0)
 N TIUY
"RTN","TIULC1",105,0)
 I +$$ISA^USRLM(USER,"PROVIDER") S TIUY="TIU BROWSE FOR CLINICIAN" G WHAX
"RTN","TIULC1",106,0)
 I +$$ISA^USRLM(USER,"MEDICAL RECORDS TECHNICIAN") S TIUY="TIU BROWSE FOR MRT" G WHAX
"RTN","TIULC1",107,0)
 I +$$ISA^USRLM(USER,"CHIEF, MIS") S TIUY="TIU BROWSE FOR MGR" G WHAX
"RTN","TIULC1",108,0)
 I +$$ISA^USRLM(USER,"MEDICAL STUDENT") S TIUY="TIU BROWSE FOR CLINICIAN" G WHAX
"RTN","TIULC1",109,0)
 S TIUY="TIU BROWSE FOR READ ONLY"
"RTN","TIULC1",110,0)
WHAX Q TIUY
"RTN","TIULC1",111,0)
SUPPVSIT(TIUTYP) ; Evaluate whether to suppress visit matching
"RTN","TIULC1",112,0)
 N TIUI,TIUY S TIUY=0
"RTN","TIULC1",113,0)
 I +$P($G(^TIU(8925.1,+TIUTYP,3)),U,3) S TIUY=1 G SUPPVSIX
"RTN","TIULC1",114,0)
 S TIUI=0 F  S TIUI=$O(^TIU(8925.1,"AD",+TIUTYP,TIUI)) Q:+TIUI'>0!(+TIUY>0)  D
"RTN","TIULC1",115,0)
 . S TIUY=+$$SUPPVSIT(+TIUI)
"RTN","TIULC1",116,0)
SUPPVSIX Q TIUY
"RTN","TIULC1",117,0)
PTNAME(DFN) ; Resolve Patient Name
"RTN","TIULC1",118,0)
 N TIUY S TIUY=$P($G(^DPT(DFN,0)),U)
"RTN","TIULC1",119,0)
 S:TIUY']"" TIUY="NAME UNKNOWN"
"RTN","TIULC1",120,0)
 Q TIUY
"RTN","TIULD")
0^91^B8647232
"RTN","TIULD",1,0)
TIULD ; SLC/JER - Admission related functions ;8/9/94  10:40
"RTN","TIULD",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULD",3,0)
GETTIU(TIUY,TIUDA) ; Gets admission array for existing DCS
"RTN","TIULD",4,0)
 N TIUMVN,TIUPTF,TIUVSTR,TIUDTYP,TIUD0,TIUD12,TIUD14
"RTN","TIULD",5,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD12=$G(^(12)),TIUD14=$G(^(14))
"RTN","TIULD",6,0)
 S TIUDTYP=+TIUD0,DFN=+$P(TIUD0,U,2),TIUMVN=$P(TIUD14,U)
"RTN","TIULD",7,0)
 S TIUVSTR=$P(TIUD12,U,11)_";"_$P(TIUD0,U,7)_";"_$P(TIUD0,U,13)
"RTN","TIULD",8,0)
 S TIUY("DOCTYP")=TIUDTYP_U_$$PNAME^TIULC1(TIUDTYP)
"RTN","TIULD",9,0)
 I +$G(^TIU(8925,+TIUDA,13)) S TIUY("REFDT")=+$G(^(13))
"RTN","TIULD",10,0)
 D PATVADPT^TIULV(.TIUY,DFN,TIUMVN,TIUVSTR)
"RTN","TIULD",11,0)
 Q
"RTN","TIULD",12,0)
CHEKDS(X) ; Display/validate correct patient/treatment episode
"RTN","TIULD",13,0)
 N DIR,Y
"RTN","TIULD",14,0)
 I X("AD#")'>0!(X("EDT")="") D  G CHEKDSX
"RTN","TIULD",15,0)
 . W !!,"Movement data doesn't exist for admission, can't create "
"RTN","TIULD",16,0)
 . W "Summary",!
"RTN","TIULD",17,0)
 I +$$ISA^USRLM(DUZ,"TRANSCRIPTIONIST")>0 S Y=1 G CHEKDSX
"RTN","TIULD",18,0)
 W !!?1,"Patient: ",$$NAME^TIULS(X("PNM"),"LAST, FIRST MI"),?40,"SSN: "
"RTN","TIULD",19,0)
 W X("SSN"),?62,"Sex: ",$S(X("SEX")]"":$P(X("SEX"),U,2),1:"UNKNOWN"),!
"RTN","TIULD",20,0)
 W ?4,"Race: ",$E($S(X("RACE")]"":$P(X("RACE"),U,2),1:"UNKNOWN"),1,28)
"RTN","TIULD",21,0)
 W ?40,"Age: ",$S(X("AGE")]"":X("AGE"),1:"UNKNOWN"),?58,"Claim #: "
"RTN","TIULD",22,0)
 W $S(X("CLAIM")]"":X("CLAIM"),1:"UNKNOWN"),!
"RTN","TIULD",23,0)
 W "Adm Date: ",$$DATE^TIULS($P(X("EDT"),U),"MM/DD/YY"),?39,"Ward: "
"RTN","TIULD",24,0)
 W $P(X("WARD"),U,2),!
"RTN","TIULD",25,0)
 W:X("LDT")]"" "Dis Date: ",$$DATE^TIULS(X("LDT"),"MM/DD/YY"),!
"RTN","TIULD",26,0)
 W ?2,"Adm Dx: ",X("ADDX"),!
"RTN","TIULD",27,0)
 I $D(X("DICTDT")) D
"RTN","TIULD",28,0)
 . W !,"A DISCHARGE SUMMARY is already on file:",!
"RTN","TIULD",29,0)
 . W ?2,"Dict'd: ",X("DICTDT"),?41,"By: ",X("AUTHOR"),!
"RTN","TIULD",30,0)
 . W ?2,"Signed: ",X("SIGDT"),?35,"Cosigned: ",X("COSDT"),!
"RTN","TIULD",31,0)
 . S Y=1
"RTN","TIULD",32,0)
 E  S Y=$$READ^TIUU("YO","Correct VISIT","YES")
"RTN","TIULD",33,0)
 W !
"RTN","TIULD",34,0)
CHEKDSX Q Y
"RTN","TIULD",35,0)
CHEKPN(X,TIUBY) ; Display/validate demographic/visit information
"RTN","TIULD",36,0)
 W !!,"Creating new ",$G(TIUTYPNM,"progress note"),"..."
"RTN","TIULD",37,0)
 W !?10,"Patient Location:  ",$S(+X("LOC"):$P(X("LOC"),U,2),1:"UNKNOWN")
"RTN","TIULD",38,0)
 W !?$S(+$G(X("AD#")):4,1:8),"Date/time of "
"RTN","TIULD",39,0)
 W $S(+$G(X("AD#")):"Admission:  ",1:"Visit:  ")
"RTN","TIULD",40,0)
 W $S(+$P($G(X("VSTR")),";",2):$$DATE^TIULS($P(X("VSTR"),";",2),"MM/DD/YY HR:MIN"),1:"UNKNOWN")
"RTN","TIULD",41,0)
 W !?9,"Date/time of Note:  "
"RTN","TIULD",42,0)
 W $S(+$G(X("REFDT"))>0:$$DATE^TIULS(X("REFDT"),"MM/DD/YY HR:MIN"),1:"NOW")
"RTN","TIULD",43,0)
 S:+$G(X("REFDT"))'>0 X("REFDT")=$$NOW^TIULC
"RTN","TIULD",44,0)
 W !?12,"Author of Note:  "
"RTN","TIULD",45,0)
 W $$PERSNAME^TIULC1($S($D(TIUAUTH):+TIUAUTH,1:DUZ))
"RTN","TIULD",46,0)
 S Y=$$READ^TIUU("YO","   ...OK","YES")
"RTN","TIULD",47,0)
 I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) Q 0
"RTN","TIULD",48,0)
 S TIUBY=+Y
"RTN","TIULD",49,0)
 S:'+Y Y=$$READ^TIUU("YO","Correct VISIT","YES")
"RTN","TIULD",50,0)
 I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) Q 0
"RTN","TIULD",51,0)
 I +Y'>0 D
"RTN","TIULD",52,0)
 . K X N TIUINOUT
"RTN","TIULD",53,0)
 . S TIUINOUT=$$INOUT^TIUVSIT
"RTN","TIULD",54,0)
 . I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) Q
"RTN","TIULD",55,0)
 . I $P(TIUINOUT,U)="o" D MAIN^TIUVSIT(.X,DFN,"","","","",1)
"RTN","TIULD",56,0)
 . I $P(TIUINOUT,U)'="o" D MAIN^TIUMOVE(.X,DFN,"","","",1,"LAST",1)
"RTN","TIULD",57,0)
 . S Y=$S($D(X)>9:$$CHEKPN(.X,.TIUBY),1:0)
"RTN","TIULD",58,0)
 Q Y
"RTN","TIULE")
0^92^B3631439
"RTN","TIULE",1,0)
TIULE ; SLC/SBW - Environment Library Functions ;4/22/94  11:28
"RTN","TIULE",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULE",3,0)
SETPARM ; Get parameters for user's division
"RTN","TIULE",4,0)
 N TIUI
"RTN","TIULE",5,0)
 ; S TIUI=$O(^TIU(8925.99,"B",+$O(^DG(40.8,"AD",+$G(DUZ(2)),0)),0))
"RTN","TIULE",6,0)
 S TIUI=$O(^TIU(8925.99,"B",+$G(DUZ(2)),0))
"RTN","TIULE",7,0)
 S:+TIUI'>0 TIUI=+$O(^TIU(8925.99,0))
"RTN","TIULE",8,0)
 S TIUPRM0=$G(^TIU(8925.99,+TIUI,0)),TIUPRM1=$G(^TIU(8925.99,+TIUI,1))
"RTN","TIULE",9,0)
 Q
"RTN","TIULE",10,0)
GETDOCS(TIUY,TIUDUZ,TIUCLASS) ; Get personal document lists
"RTN","TIULE",11,0)
 N TIUI,TIUDA
"RTN","TIULE",12,0)
 S TIUI=0,TIUDA=+$O(^TIU(8925.98,"AC",TIUDUZ,TIUCLASS,0))
"RTN","TIULE",13,0)
 I 'TIUDA S TIUY=0 Q
"RTN","TIULE",14,0)
 S TIUY=$$PNAME^TIULC1(TIUCLASS)_U_$P($G(^TIU(8925.98,+TIUDA,0)),U,3)
"RTN","TIULE",15,0)
 S TIUY=TIUY_U_$P($G(^TIU(8925.1,+$P(TIUY,U,2),0)),U)
"RTN","TIULE",16,0)
 F  S TIUI=$O(^TIU(8925.98,TIUDA,10,"B",TIUI)) Q:+TIUI'>0  D
"RTN","TIULE",17,0)
 . N TIUJ S TIUJ=$O(^TIU(8925.98,TIUDA,10,"B",TIUI,0)) Q:+TIUJ'>0
"RTN","TIULE",18,0)
 . S TIUY(TIUI)=$P($G(^TIU(8925.98,TIUDA,10,TIUJ,0)),U,2,3)
"RTN","TIULE",19,0)
 Q
"RTN","TIULE",20,0)
PERSPRF(USER) ; Get USER's Personal Preferences
"RTN","TIULE",21,0)
 N DA,Y S Y=""
"RTN","TIULE",22,0)
 S DA=+$O(^TIU(8926,"B",USER,0)) I +DA'>0 G PERSPX
"RTN","TIULE",23,0)
 S Y=$G(^TIU(8926,+DA,0))
"RTN","TIULE",24,0)
PERSPX Q Y
"RTN","TIULE",25,0)
PERSDOC(USER,TIUCLASS) ; Get Default document type, given user & class
"RTN","TIULE",26,0)
 N TIUY,TIUTYPE,TIUDA
"RTN","TIULE",27,0)
 S TIUDA=+$O(^TIU(8925.98,"AC",USER,TIUCLASS,0))
"RTN","TIULE",28,0)
 I 'TIUDA S TIUY=0 G PERSDOX
"RTN","TIULE",29,0)
 S TIUTYPE=$P($G(^TIU(8925.98,+TIUDA,0)),U,3)
"RTN","TIULE",30,0)
 S TIUY=TIUTYPE_U_$P($G(^TIU(8925.1,+TIUTYPE,0)),U)
"RTN","TIULE",31,0)
PERSDOX Q TIUY
"RTN","TIULE",32,0)
PERSLOC(USER) ; Get Default location (By day of week, if defined)
"RTN","TIULE",33,0)
 N DA,Y S Y=""
"RTN","TIULE",34,0)
 S DA=+$O(^TIU(8926,"B",USER,0)) I +DA'>0 G PERSLOX
"RTN","TIULE",35,0)
 S Y=+$P(^TIU(8926,+DA,0),U,2) S:+Y Y=Y_U_$P($G(^SC(+Y,0)),U)
"RTN","TIULE",36,0)
 I +$O(^TIU(8926,+DA,1,0)) D
"RTN","TIULE",37,0)
 . N DOW,S1
"RTN","TIULE",38,0)
 . S DOW=$$DOW^XLFDT(DT,1)+1,S1=+$O(^TIU(8926,DA,1,"B",DOW,0)) Q:+S1'>0
"RTN","TIULE",39,0)
 . S Y=+$P(^TIU(8926,+DA,1,+S1,0),U,2) S:+Y Y=Y_U_$P($G(^SC(+Y,0)),U)
"RTN","TIULE",40,0)
PERSLOX Q Y
"RTN","TIULEXP")
0^93^B1170195
"RTN","TIULEXP",1,0)
TIULEXP ; SLC/KR Repoint the TIU Problem Link file to ^LEX( ; 07/24/95
"RTN","TIULEXP",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULEXP",3,0)
 ;
"RTN","TIULEXP",4,0)
EN N LEX,VP,FROM,TO,NODE,STR,NEWN,NEWS
"RTN","TIULEXP",5,0)
 S LEX=$G(^DIC(757.01,0,"GL")) S:LEX="" LEX="^GMP(757.01," S VP=$E(LEX,2,$L(LEX))
"RTN","TIULEXP",6,0)
 S TO=VP,FROM=$S(TO["GMP":"LEX(757.01,",TO["LEX":"GMP(757.01,",1:"")
"RTN","TIULEXP",7,0)
 Q:FROM=""
"RTN","TIULEXP",8,0)
 S NODE="^DD(8925.9)"
"RTN","TIULEXP",9,0)
 F  S NODE=$Q(@NODE) Q:NODE=""!(NODE'["DD(8925.9,")  D
"RTN","TIULEXP",10,0)
 . S NEWN=NODE,STR=@NODE,NEWS=STR Q:(NODE_STR)'[FROM
"RTN","TIULEXP",11,0)
 . S:STR[FROM NEWS=$$CVT(STR,FROM,TO)
"RTN","TIULEXP",12,0)
 . S:NODE[FROM NEWN=$$CVT(NODE,FROM,TO)
"RTN","TIULEXP",13,0)
 . K @NODE S @NEWN=NEWS
"RTN","TIULEXP",14,0)
 Q
"RTN","TIULEXP",15,0)
CVT(X,FROM,TO) ;
"RTN","TIULEXP",16,0)
 G:X="" CVTX G:FROM="" CVTX G:X'[FROM CVTX
"RTN","TIULEXP",17,0)
 F  Q:X'[FROM  S X=$P(X,FROM,1)_TO_$P(X,FROM,2)
"RTN","TIULEXP",18,0)
CVTX Q X
"RTN","TIULF")
0^94^B3847821
"RTN","TIULF",1,0)
TIULF ; SLC/JER - More computational functions ;7/7/94  16:38
"RTN","TIULF",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULF",3,0)
EMPTYDOC(DA) ;Checks to see if text for DCS is blank
"RTN","TIULF",4,0)
 ; returns a 1 if empty
"RTN","TIULF",5,0)
 ; returns a 0 if contains data
"RTN","TIULF",6,0)
 N TIULINE,TIUQUIT,TIUSTART,TIUX,TIUY,TIUCHAR,TIUDATA
"RTN","TIULF",7,0)
 S TIUY=1
"RTN","TIULF",8,0)
 I +$O(^TIU(8925,+DA,"TEXT",0))'>0,+$O(^TIU(8925,"DAD",+DA,0))'>0 G EMPTYX ;Text not entered
"RTN","TIULF",9,0)
 S TIULINE=0 F  S TIULINE=$O(^TIU(8925,+DA,"TEXT",TIULINE)) Q:TIULINE'>0!(TIUY=0)  D  Q:TIUY=0
"RTN","TIULF",10,0)
 . S TIUDATA=$G(^TIU(8925,+DA,"TEXT",TIULINE,0)),TIUQUIT=$L(TIUDATA)
"RTN","TIULF",11,0)
 . I TIUQUIT>0 S TIUSTART=1 D  ;Line contains data
"RTN","TIULF",12,0)
 . . ;Checks a char at a time for valid data. If found, TIUY set to 0
"RTN","TIULF",13,0)
 . . ;Data between two | indicates format command and not valid data 
"RTN","TIULF",14,0)
 . . F TIUSTART=TIUSTART:1:TIUQUIT S TIUCHAR=$E(TIUDATA,TIUSTART) D  Q:(TIUY=0)
"RTN","TIULF",15,0)
 . . . ;Char is not a control char or | char
"RTN","TIULF",16,0)
 . . . I $A(TIUCHAR)'<33&($A(TIUCHAR)'>123)!($A(TIUCHAR)=125) S TIUY=0 Q
"RTN","TIULF",17,0)
 . . . I $A(TIUCHAR)=124 D  ;Char is a |
"RTN","TIULF",18,0)
 . . . . S TIUX=$F(TIUDATA,"|",TIUSTART+1) ;Find second |
"RTN","TIULF",19,0)
 . . . . I TIUX>TIUSTART S TIUSTART=TIUX-1 ;Making sure there is a second |
"RTN","TIULF",20,0)
 I +TIUY,$O(^TIU(8925,"DAD",+DA,0)) D
"RTN","TIULF",21,0)
 . N TIUC S TIUC=0
"RTN","TIULF",22,0)
 . F TIUC=$O(^TIU(8925,"DAD",+DA,TIUC)) Q:+TIUC'>0  D  Q:+TIUY=0
"RTN","TIULF",23,0)
 . . S TIUY=$$EMPTYDOC(TIUC)
"RTN","TIULF",24,0)
EMPTYX ; EXIT
"RTN","TIULF",25,0)
 Q TIUY
"RTN","TIULF",26,0)
DOCTYPE(TIUDA) ; Evaluates Definition of a Document
"RTN","TIULF",27,0)
 N TYPE S TYPE=+$G(^TIU(8925,+TIUDA,0))
"RTN","TIULF",28,0)
 S TYPE=$P($G(^TIU(8925.1,+TYPE,0)),U,4)_U_$$PNAME^TIULC1(+TYPE)
"RTN","TIULF",29,0)
 Q TYPE
"RTN","TIULG")
0^95^B4273334
"RTN","TIULG",1,0)
TIULG ; SLC/JER - More Library functions ;06/10/96  08:36
"RTN","TIULG",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULG",3,0)
BADSIG(TIUX,NOAUTH) ; Sig failed
"RTN","TIULG",4,0)
 I TIUX]"" D
"RTN","TIULG",5,0)
 . W !!,"Use 'Edit Electronic Signature Code' option"
"RTN","TIULG",6,0)
 . W !,"on Secondary Menu under User's Toolbox." H 4
"RTN","TIULG",7,0)
 I +$G(NOAUTH) W !!,$C(7),$C(7),"Only authorized PROVIDERS may sign.  Contact IRM for PROVIDER Key allocation."
"RTN","TIULG",8,0)
 W !!,"NOT SIGNED.",!
"RTN","TIULG",9,0)
 S TIUX=$$READ^TIUU("FOA","Press RETURN to continue...")
"RTN","TIULG",10,0)
 Q
"RTN","TIULG",11,0)
PRNTMTHD(TIUTYP) ; Get print method/enforce enheritance
"RTN","TIULG",12,0)
 N TIUDAD,TIUY S TIUDAD=0
"RTN","TIULG",13,0)
 S TIUY=$G(^TIU(8925.1,+TIUTYP,6))
"RTN","TIULG",14,0)
 I TIUY']"" S TIUDAD=$O(^TIU(8925.1,"AD",+TIUTYP,0))
"RTN","TIULG",15,0)
 I +TIUDAD S TIUY=$$PRNTMTHD(TIUDAD)
"RTN","TIULG",16,0)
 Q TIUY
"RTN","TIULG",17,0)
PRNTGRP(TIUTYP) ; Get print group/enforce inheritance
"RTN","TIULG",18,0)
 N TIUDAD,TIUY S TIUDAD=0
"RTN","TIULG",19,0)
 S TIUY=$P($G(^TIU(8925.1,+TIUTYP,6.1)),U,3)
"RTN","TIULG",20,0)
 I TIUY']"" S TIUDAD=$O(^TIU(8925.1,"AD",+TIUTYP,0))
"RTN","TIULG",21,0)
 I +TIUDAD S TIUY=$$PRNTGRP(TIUDAD)
"RTN","TIULG",22,0)
 Q TIUY
"RTN","TIULG",23,0)
PRNTHDR(TIUTYP) ; Get print form header/enforce inheritance
"RTN","TIULG",24,0)
 N TIUDAD,TIUY S TIUDAD=0
"RTN","TIULG",25,0)
 S TIUY=$P($G(^TIU(8925.1,+TIUTYP,6.1)),U)
"RTN","TIULG",26,0)
 I TIUY']"" S TIUDAD=$O(^TIU(8925.1,"AD",+TIUTYP,0))
"RTN","TIULG",27,0)
 I +TIUDAD S TIUY=$$PRNTHDR(TIUDAD)
"RTN","TIULG",28,0)
 ;I TIUY']"" S TIUY="Progress Notes"
"RTN","TIULG",29,0)
 Q TIUY
"RTN","TIULG",30,0)
PRNTNBR(TIUTYP) ; Get print form number/enforce inheritance
"RTN","TIULG",31,0)
 N TIUDAD,TIUY S TIUDAD=0
"RTN","TIULG",32,0)
 S TIUY=$P($G(^TIU(8925.1,+TIUTYP,6.1)),U,2)
"RTN","TIULG",33,0)
 I TIUY']"" S TIUDAD=$O(^TIU(8925.1,"AD",+TIUTYP,0))
"RTN","TIULG",34,0)
 I +TIUDAD S TIUY=$$PRNTNBR(TIUDAD)
"RTN","TIULG",35,0)
 ;I TIUY']"" S TIUY="Vice SF 509"
"RTN","TIULG",36,0)
 Q TIUY
"RTN","TIULG",37,0)
XTRASGNR(TIUY,TIUDA) ; Get List of Extra Expected Signers
"RTN","TIULG",38,0)
 N TIUI S TIUI=0
"RTN","TIULG",39,0)
 F  S TIUI=$O(^TIU(8925.7,"B",TIUDA,TIUI)) Q:+TIUI'>0  D
"RTN","TIULG",40,0)
 . N TIUDUZ,TIUREQ
"RTN","TIULG",41,0)
 . S TIUDUZ=+$P(^TIU(8925.7,+TIUI,0),U,3),TIUREQ=$P(^(0),U,2)
"RTN","TIULG",42,0)
 . Q:+TIUDUZ'>0!(+$P($G(^TIU(8925.7,+TIUI,0)),U,4)>0)
"RTN","TIULG",43,0)
 . S TIUY(TIUDUZ)=TIUREQ_U_$$SIGNAME^TIULS(TIUDUZ)_U_$$SIGTITL^TIULS(TIUDUZ)
"RTN","TIULG",44,0)
 Q
"RTN","TIULIP")
0^96^B2467156
"RTN","TIULIP",1,0)
TIULIP ; SLC/JER - Lipid Profile Loader ;7/7/95  15:22
"RTN","TIULIP",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULIP",3,0)
MAIN(DFN,EARLY,LATE,DISPLAY,TARGET,LINE) ; Control branching
"RTN","TIULIP",4,0)
 N TIUI,TIUCNT,TIUDT,TIUY S TIUCNT=0
"RTN","TIULIP",5,0)
 K ^TMP("LRAPI",$J)
"RTN","TIULIP",6,0)
 I '$D(^DPT(DFN,"LR")) D NOLABS G LABX
"RTN","TIULIP",7,0)
 S LRDFN=+^DPT(DFN,"LR") I '$D(^LR(LRDFN)) D NOLABS G LABX
"RTN","TIULIP",8,0)
 I +$G(DISPLAY) W !,"Gathering Laboratory Data."
"RTN","TIULIP",9,0)
 D LIPIDS^TIULO(.TIUY,DFN,$G(EARLY),$G(LATE))
"RTN","TIULIP",10,0)
 I $G(TIUY(1))="No Lab Data" D NOLABS G LABX
"RTN","TIULIP",11,0)
 S TIUI="" F  S TIUI=$O(TIUY(TIUI)) Q:TIUI=""  D
"RTN","TIULIP",12,0)
 . N TIUX
"RTN","TIULIP",13,0)
 . S TIUDT=0 F  S TIUDT=$O(TIUY(TIUI,TIUDT)) Q:+TIUDT'>0  D
"RTN","TIULIP",14,0)
 . . S TIUCNT=TIUCNT+1 D LINE
"RTN","TIULIP",15,0)
LABX Q "~@"_$NA(@TARGET)
"RTN","TIULIP",16,0)
NOLABS ; Handles Case Where no Labs are found to satisfy criteria
"RTN","TIULIP",17,0)
 S LINE=$S(+$G(LINE):+$G(LINE),1:1),@TARGET@(LINE,0)="No data available"
"RTN","TIULIP",18,0)
 S LINE=+$G(LINE)+1,@TARGET@(LINE,0)=" "
"RTN","TIULIP",19,0)
 S @TARGET@(0)="^^"_LINE_"^"_LINE_"^"_DT_"^^"
"RTN","TIULIP",20,0)
 Q
"RTN","TIULIP",21,0)
LINE ; Line-wrap with comma-delimited data
"RTN","TIULIP",22,0)
 N X,Y
"RTN","TIULIP",23,0)
 I TIUCNT#2'>0 Q
"RTN","TIULIP",24,0)
 S TIUX=$$SETSTR^VALM1(TIUI_":","",15,24)
"RTN","TIULIP",25,0)
 S TIUX=$$SETSTR^VALM1($G(TIUY(TIUI,TIUDT)),TIUX,47,8)
"RTN","TIULIP",26,0)
 S TIUX=$$SETSTR^VALM1($G(TIUY(TIUI,+$O(TIUY(TIUI,TIUDT)))),TIUX,63,8)
"RTN","TIULIP",27,0)
 S LINE=+$G(LINE)+1
"RTN","TIULIP",28,0)
 S @TARGET@(LINE,0)=TIUX
"RTN","TIULIP",29,0)
 S @TARGET@(0)="^^"_LINE_"^"_LINE_"^"_DT_"^^"
"RTN","TIULIP",30,0)
 I +$G(DISPLAY) W "."
"RTN","TIULIP",31,0)
 Q
"RTN","TIULM")
0^97^B2972809
"RTN","TIULM",1,0)
TIULM ; SLC/JER - List Manager Library ;2/23/95  16:57
"RTN","TIULM",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULM",3,0)
RESIZE(LONG,SHORT,SHRINK) ; Resizes list area
"RTN","TIULM",4,0)
 N TIUBM S TIUBM=$S(VALMMENU:SHORT,+$G(SHRINK):SHORT,1:LONG)
"RTN","TIULM",5,0)
 I VALM("BM")'=TIUBM S VALMBCK="R" D
"RTN","TIULM",6,0)
 . S VALM("BM")=TIUBM,VALM("LINES")=(TIUBM-VALM("TM"))+1
"RTN","TIULM",7,0)
 . I +$G(VALMCC) D RESET^VALM4
"RTN","TIULM",8,0)
 Q
"RTN","TIULM",9,0)
PICK(TIUITEM) ; Highlight selected list elements, add to VALMY(ITEM) array
"RTN","TIULM",10,0)
 N I,ITEM,LINE
"RTN","TIULM",11,0)
 F I=1:1:$L(TIUITEM,",") S ITEM=$P(TIUITEM,",",I) Q:+ITEM'>0  D
"RTN","TIULM",12,0)
 . S LINE=+$O(@VALMAR@("PICK",+ITEM,0)) I '+LINE S LINE=ITEM
"RTN","TIULM",13,0)
 . I '$D(VALMY(ITEM)) D  I 1
"RTN","TIULM",14,0)
 . . D RESTORE^VALM10(LINE),CNTRL^VALM10(LINE,6,VALM("RM"),IORVON,IORVOFF)
"RTN","TIULM",15,0)
 . . D WRITE^VALM10(LINE)
"RTN","TIULM",16,0)
 . . S VALMY(ITEM)=""
"RTN","TIULM",17,0)
 . E  D
"RTN","TIULM",18,0)
 . . D RESTORE(LINE),WRITE^VALM10(LINE)
"RTN","TIULM",19,0)
 . . K VALMY(ITEM)
"RTN","TIULM",20,0)
 D RE^VALM4
"RTN","TIULM",21,0)
 Q
"RTN","TIULM",22,0)
FIXLST ; Restore video attributes to entire list
"RTN","TIULM",23,0)
 N TIUI S TIUI=0
"RTN","TIULM",24,0)
 Q:'$D(VALMAR)
"RTN","TIULM",25,0)
 F  S TIUI=$O(^TMP("TIUR",$J,TIUI)) Q:+TIUI'>0  D
"RTN","TIULM",26,0)
 . D RESTORE^VALM10(TIUI),FLDCTRL^VALM10(TIUI,"NUMBER",IOINHI,IOINORM)
"RTN","TIULM",27,0)
 Q
"RTN","TIULM",28,0)
RESTORE(ITEM) ; Restore video attributes for a single list element
"RTN","TIULM",29,0)
 D RESTORE^VALM10(ITEM),FLDCTRL^VALM10(ITEM,"NUMBER",IOINHI,IOINORM)
"RTN","TIULM",30,0)
 Q
"RTN","TIULM",31,0)
REMOVE(ITEM) ; Remove an element from the list
"RTN","TIULM",32,0)
 N TIUREC S TIUREC=$G(^TMP("TIUR",$J,+ITEM,0))
"RTN","TIULM",33,0)
 S TIUREC=$$SETFLD^VALM1("deleted",TIUREC,"STATUS")
"RTN","TIULM",34,0)
 S ^TMP("TIUR",$J,+ITEM,0)=TIUREC
"RTN","TIULM",35,0)
 D RESTORE^VALM10(+ITEM),CNTRL^VALM10(+ITEM,6,VALM("RM"),IOINHI,IOINORM)
"RTN","TIULM",36,0)
 Q
"RTN","TIULMED")
0^196^B2559880
"RTN","TIULMED",1,0)
TIULMED ; SLC/JER - Current Meds Object Method ;7/7/95  15:22
"RTN","TIULMED",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULMED",3,0)
MAIN(DFN,TARGET,EARLY,LATE,LINE) ; Control branching
"RTN","TIULMED",4,0)
 N TIUI,TIUCNT,TIUDT,TIUY S TIUCNT=0
"RTN","TIULMED",5,0)
 K @TARGET
"RTN","TIULMED",6,0)
 I '$L($T(LIST^ORQQPS)) D NOCPRS G MEDX
"RTN","TIULMED",7,0)
 D LIST^ORQQPS(.TIUY,DFN,$G(EARLY),$G(LATE))
"RTN","TIULMED",8,0)
 I $G(TIUY(1))="^No medications found." D NOMEDS G MEDX
"RTN","TIULMED",9,0)
 S TIUI=0 F  S TIUI=$O(TIUY(TIUI)) Q:TIUI'>0  D
"RTN","TIULMED",10,0)
 . S TIUCNT=TIUCNT+1 D LINE
"RTN","TIULMED",11,0)
MEDX Q "~@"_$NA(@TARGET)
"RTN","TIULMED",12,0)
NOMEDS ; Handles Case Where no Meds are found to satisfy criteria
"RTN","TIULMED",13,0)
 S LINE=$S(+$G(LINE):+$G(LINE),1:1),@TARGET@(LINE,0)="No medications found."
"RTN","TIULMED",14,0)
 S LINE=+$G(LINE)+1,@TARGET@(LINE,0)=" "
"RTN","TIULMED",15,0)
 S @TARGET@(0)="^^"_LINE_"^"_LINE_"^"_DT_"^^"
"RTN","TIULMED",16,0)
 Q
"RTN","TIULMED",17,0)
NOCPRS ; Handles Case Where CPRS (and its RPC's) is not yet installed
"RTN","TIULMED",18,0)
 S LINE=$S(+$G(LINE):+$G(LINE),1:1),@TARGET@(LINE,0)="CPRS Required for this object."
"RTN","TIULMED",19,0)
 S LINE=+$G(LINE)+1,@TARGET@(LINE,0)=" "
"RTN","TIULMED",20,0)
 S @TARGET@(0)="^^"_LINE_"^"_LINE_"^"_DT_"^^"
"RTN","TIULMED",21,0)
 Q
"RTN","TIULMED",22,0)
LINE ; Format each line
"RTN","TIULMED",23,0)
 N X,Y,TIUX
"RTN","TIULMED",24,0)
 S TIUX=$$SETSTR^VALM1(TIUI_")","",1,5)
"RTN","TIULMED",25,0)
 S TIUX=$$SETSTR^VALM1($S($P(TIUY(TIUI),U,2)]"":$P(TIUY(TIUI),U,2),1:"UNKNOWN"),TIUX,6,40)
"RTN","TIULMED",26,0)
 ;S TIUX=$$SETSTR^VALM1($P(TIUY(TIUI),U,3),TIUX,48,10)
"RTN","TIULMED",27,0)
 S LINE=+$G(LINE)+1
"RTN","TIULMED",28,0)
 S @TARGET@(LINE,0)=TIUX
"RTN","TIULMED",29,0)
 S @TARGET@(0)="^^"_LINE_"^"_LINE_"^"_DT_"^^"
"RTN","TIULMED",30,0)
 I +$G(DISPLAY) W "."
"RTN","TIULMED",31,0)
 Q
"RTN","TIULO")
0^98^B40930742
"RTN","TIULO",1,0)
TIULO ; SLC/JER - Embedded Objects ;9/28/95  16:26
"RTN","TIULO",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULO",3,0)
DEM(DFN,VADM) ; Calls DEM^VADPT
"RTN","TIULO",4,0)
 D DEM^VADPT
"RTN","TIULO",5,0)
 Q
"RTN","TIULO",6,0)
NAME(DFN) ; Patient NAME
"RTN","TIULO",7,0)
 I '$D(VADM(1)) D DEM(DFN,.VADM)
"RTN","TIULO",8,0)
 Q $S(VADM(1)]"":VADM(1),1:"NAME UNKNOWN")
"RTN","TIULO",9,0)
SSN(DFN) ; Patient SSN
"RTN","TIULO",10,0)
 I '$D(VADM(2)) D DEM(DFN,.VADM)
"RTN","TIULO",11,0)
 Q $S($P(VADM(2),U,2)]"":$P(VADM(2),U,2),1:"SSN UNKNOWN")
"RTN","TIULO",12,0)
AGE(DFN) ; Patient AGE
"RTN","TIULO",13,0)
 I '$D(VADM(4)) D DEM(DFN,.VADM)
"RTN","TIULO",14,0)
 Q $S(VADM(4)]"":VADM(4),1:"AGE UNKNOWN")
"RTN","TIULO",15,0)
DOB(DFN) ; Patient DATE OF BIRTH
"RTN","TIULO",16,0)
 I '$D(VADM(3)) D DEM(DFN,.VADM)
"RTN","TIULO",17,0)
 Q $S($P(VADM(3),U,2)]"":$P(VADM(3),U,2),1:"DOB UNKNOWN")
"RTN","TIULO",18,0)
DOD(DFN) ; Patient DATE OF DEATH
"RTN","TIULO",19,0)
 I '$D(VADM(6)) D DEM(DFN,.VADM)
"RTN","TIULO",20,0)
 Q $S($P(VADM(6),U,2)]"":$P(VADM(6),U,2),1:"DATE OF DEATH UNKNOWN")
"RTN","TIULO",21,0)
SEX(DFN) ; Patient SEX
"RTN","TIULO",22,0)
 I '$D(VADM(5)) D DEM(DFN,.VADM)
"RTN","TIULO",23,0)
 Q $S($P(VADM(5),U,2)]"":$P(VADM(5),U,2),1:"SEX UNKNOWN")
"RTN","TIULO",24,0)
RACE(DFN) ; Patient RACE
"RTN","TIULO",25,0)
 I '$D(VADM(8)) D DEM(DFN,.VADM)
"RTN","TIULO",26,0)
 Q $S($P(VADM(8),U,2)]"":$P(VADM(8),U,2),1:"RACE UNKNOWN")
"RTN","TIULO",27,0)
HEIGHT(DFN) ; Gets most recent Height from VITALS
"RTN","TIULO",28,0)
 N TIUVIT,TIUVT,TIUVDT,TIUVDA,TIUY,VDT
"RTN","TIULO",29,0)
 D VITALS(.TIUVIT,DFN,"HT")
"RTN","TIULO",30,0)
 S TIUVDT=0 F  S TIUVDT=$O(TIUVIT("HT",TIUVDT)) Q:+TIUVDT'>0!+$G(TIUY)  D
"RTN","TIULO",31,0)
 . S TIUVDA=0
"RTN","TIULO",32,0)
 . F  S TIUVDA=$O(TIUVIT("HT",TIUVDT,TIUVDA)) Q:+TIUVDA'>0!+$G(TIUY)  D
"RTN","TIULO",33,0)
 . . S VDT=$$DATE^TIULS($P($G(TIUVIT("HT",TIUVDT,TIUVDA)),U,1),"MM/DD/YY HR:MIN")
"RTN","TIULO",34,0)
 . . S TIUY=$P($G(TIUVIT("HT",TIUVDT,TIUVDA)),U,8)_" ("_VDT_")"
"RTN","TIULO",35,0)
 Q $G(TIUY)
"RTN","TIULO",36,0)
WEIGHT(DFN) ; Gets most recent Weight from VITALS
"RTN","TIULO",37,0)
 N TIUVIT,TIUVT,TIUVDT,TIUVDA,TIUY,VDT
"RTN","TIULO",38,0)
 D VITALS(.TIUVIT,DFN,"WT")
"RTN","TIULO",39,0)
 S TIUVDT=0 F  S TIUVDT=$O(TIUVIT("WT",TIUVDT)) Q:+TIUVDT'>0!+$G(TIUY)  D
"RTN","TIULO",40,0)
 . S TIUVDA=0 F  S TIUVDA=$O(TIUVIT("WT",TIUVDT,TIUVDA)) Q:+TIUVDA'>0!+$G(TIUY)  D
"RTN","TIULO",41,0)
 . . S VDT=$$DATE^TIULS($P($G(TIUVIT("WT",TIUVDT,TIUVDA)),U,1),"MM/DD/YY HR:MIN")
"RTN","TIULO",42,0)
 . . S TIUY=$P($G(TIUVIT("WT",TIUVDT,TIUVDA)),U,8)_" ("_VDT_")"
"RTN","TIULO",43,0)
 Q $G(TIUY)
"RTN","TIULO",44,0)
TEMP(DFN) ; Gets most recent Temperature from VITALS
"RTN","TIULO",45,0)
 N TIUVIT,TIUVT,TIUVDT,TIUVDA,TIUY,VDT
"RTN","TIULO",46,0)
 D VITALS(.TIUVIT,DFN,"T")
"RTN","TIULO",47,0)
 S TIUVDT=0 F  S TIUVDT=$O(TIUVIT("T",TIUVDT)) Q:+TIUVDT'>0!+$G(TIUY)  D
"RTN","TIULO",48,0)
 . S TIUVDA=0 F  S TIUVDA=$O(TIUVIT("T",TIUVDT,TIUVDA)) Q:+TIUVDA'>0!+$G(TIUY)  D
"RTN","TIULO",49,0)
  . . S VDT=$$DATE^TIULS($P($G(TIUVIT("T",TIUVDT,TIUVDA)),U,1),"MM/DD/YY HR:MIN")
"RTN","TIULO",50,0)
  . . S TIUY=$P($G(TIUVIT("T",TIUVDT,TIUVDA)),U,8)_" ("_VDT_")"
"RTN","TIULO",51,0)
 Q $G(TIUY)
"RTN","TIULO",52,0)
PULSE(DFN) ; Gets most recent Pulse from VITALS
"RTN","TIULO",53,0)
 N TIUVIT,TIUVT,TIUVDT,TIUVDA,TIUY,VDT
"RTN","TIULO",54,0)
 D VITALS(.TIUVIT,DFN,"P")
"RTN","TIULO",55,0)
 S TIUVDT=0 F  S TIUVDT=$O(TIUVIT("P",TIUVDT)) Q:+TIUVDT'>0!+$G(TIUY)  D
"RTN","TIULO",56,0)
 . S TIUVDA=0 F  S TIUVDA=$O(TIUVIT("P",TIUVDT,TIUVDA)) Q:+TIUVDA'>0!+$G(TIUY)  D
"RTN","TIULO",57,0)
 . . S VDT=$$DATE^TIULS($P($G(TIUVIT("P",TIUVDT,TIUVDA)),U,1),"MM/DD/YY HR:MIN")
"RTN","TIULO",58,0)
 . . S TIUY=$P($G(TIUVIT("P",TIUVDT,TIUVDA)),U,8)_" ("_VDT_")"
"RTN","TIULO",59,0)
 Q $G(TIUY)
"RTN","TIULO",60,0)
RESP(DFN) ; Gets most recent Respiration from VITALS
"RTN","TIULO",61,0)
 N TIUVIT,TIUVT,TIUVDT,TIUVDA,TIUY,VDT
"RTN","TIULO",62,0)
 D VITALS(.TIUVIT,DFN,"R")
"RTN","TIULO",63,0)
 S TIUVDT=0 F  S TIUVDT=$O(TIUVIT("R",TIUVDT)) Q:+TIUVDT'>0!+$G(TIUY)  D
"RTN","TIULO",64,0)
 . S TIUVDA=0 F  S TIUVDA=$O(TIUVIT("R",TIUVDT,TIUVDA)) Q:+TIUVDA'>0!+$G(TIUY)  D
"RTN","TIULO",65,0)
 . . S VDT=$$DATE^TIULS($P($G(TIUVIT("R",TIUVDT,TIUVDA)),U,1),"MM/DD/YY HR:MIN")
"RTN","TIULO",66,0)
 . . S TIUY=$P($G(TIUVIT("R",TIUVDT,TIUVDA)),U,8)_" ("_VDT_")"
"RTN","TIULO",67,0)
 Q $G(TIUY)
"RTN","TIULO",68,0)
BP(DFN) ; Gets most recent Blood Pressure from VITALS
"RTN","TIULO",69,0)
 N TIUVIT,TIUVT,TIUVDT,TIUVDA,TIUY,VDT
"RTN","TIULO",70,0)
 D VITALS(.TIUVIT,DFN,"BP")
"RTN","TIULO",71,0)
 S TIUVDT=0 F  S TIUVDT=$O(TIUVIT("BP",TIUVDT)) Q:+TIUVDT'>0!+$G(TIUY)  D
"RTN","TIULO",72,0)
 . S TIUVDA=0 F  S TIUVDA=$O(TIUVIT("BP",TIUVDT,TIUVDA)) Q:+TIUVDA'>0!+$G(TIUY)  D
"RTN","TIULO",73,0)
 . . S VDT=$$DATE^TIULS($P($G(TIUVIT("BP",TIUVDT,TIUVDA)),U,1),"MM/DD/YY HR:MIN")
"RTN","TIULO",74,0)
 . . S TIUY=$P($G(TIUVIT("BP",TIUVDT,TIUVDA)),U,8)_" ("_VDT_")"
"RTN","TIULO",75,0)
 Q $G(TIUY)
"RTN","TIULO",76,0)
VITALS(TIUY,DFN,GMRVSTR,TIUEDT,TIULDT,TIUOCC) ; Vital measurements
"RTN","TIULO",77,0)
 N TIUVT,TIUVDT,TIUVDA K ^UTILITY($J,"GMRVD")
"RTN","TIULO",78,0)
 S GMRVSTR(0)=$G(TIUEDT)_U_$G(TIULDT)_U_$G(TIUOCC,1)_"^0"
"RTN","TIULO",79,0)
 I $L($T(EN1^GMRVUT0)) D EN1^GMRVUT0
"RTN","TIULO",80,0)
 I +$D(^UTILITY($J,"GMRVD")) D
"RTN","TIULO",81,0)
 . S TIUVT=""
"RTN","TIULO",82,0)
 . F  S TIUVT=$O(^UTILITY($J,"GMRVD",TIUVT)) Q:TIUVT']""  D
"RTN","TIULO",83,0)
 . . S TIUVDT=0
"RTN","TIULO",84,0)
 . . F  S TIUVDT=$O(^UTILITY($J,"GMRVD",TIUVT,TIUVDT)) Q:+TIUVDT'>0  D
"RTN","TIULO",85,0)
 . . . S TIUVDA=0
"RTN","TIULO",86,0)
 . . . F  S TIUVDA=$O(^UTILITY($J,"GMRVD",TIUVT,TIUVDT,TIUVDA)) Q:+TIUVDA'>0  D
"RTN","TIULO",87,0)
 . . . . S TIUY(TIUVT,TIUVDT,TIUVDA)=$G(^UTILITY($J,"GMRVD",TIUVT,TIUVDT,TIUVDA))
"RTN","TIULO",88,0)
 K ^UTILITY($J,"GMRVD")
"RTN","TIULO",89,0)
 Q
"RTN","TIULO",90,0)
LIPIDS(TIUY,DFN,TIUEDT,TIULDT) ; Get LIPID profile
"RTN","TIULO",91,0)
 N TIUTST,TIUI,TIURY,TIUDT,TIULDT
"RTN","TIULO",92,0)
 S TIUTST=$O(^LAB(60,"B","LIPID PROFILE",0))
"RTN","TIULO",93,0)
 I '+$G(TIUTST) Q
"RTN","TIULO",94,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUTST)
"RTN","TIULO",95,0)
 I '$D(TIUY)!($G(TIUY(1))="No Lab Data") Q
"RTN","TIULO",96,0)
 S TIUI=0 F  S TIUI=$O(@TIUY@(TIUI)) Q:+TIUI'>0  D
"RTN","TIULO",97,0)
 . S TIUTST=$$MAPPER($P(@TIUY@(TIUI),U,17)),TIUDT=+@TIUY@(TIUI)
"RTN","TIULO",98,0)
 . S:TIUDT'=+$G(TIULDT) TIURY("BASELINE LIPID PROFILES",TIUDT)=$$DATE^TIULS(TIUDT,"MM/DD/YY")
"RTN","TIULO",99,0)
 . S TIURY(TIUTST,TIUDT)=$P(@TIUY@(TIUI),U,4)
"RTN","TIULO",100,0)
 F TIUI="CHYLOMI","TURBID","VLDL" K TIURY(TIUI)
"RTN","TIULO",101,0)
 K @TIUY
"RTN","TIULO",102,0)
 I $D(TIURY) M TIUY=TIURY
"RTN","TIULO",103,0)
 Q
"RTN","TIULO",104,0)
MAPPER(TIUX,TIUI) ; Remap test names
"RTN","TIULO",105,0)
 N TIUNM,Y S TIUNM("CHOL","TOTAL CHOLESTEROL")=""
"RTN","TIULO",106,0)
 S (TIUNM("HDL","HDL CHOLESTEROL"),TIUNM("LDL","LDL CHOLESTEROL"))=""
"RTN","TIULO",107,0)
 S TIUNM("TRIGLYC","TRIGLYCERIDES")=""
"RTN","TIULO",108,0)
 S Y=$O(TIUNM(TIUX,"")) I Y']"" S Y=TIUX
"RTN","TIULO",109,0)
 Q Y
"RTN","TIULO",110,0)
TSHT4(DFN,TIUEDT,TIULDT) ; Get TSH/T4
"RTN","TIULO",111,0)
 N TIUY,TIUTSH,TIUT4 S TIUTSH=+$O(^LAB(60,"B","TSH",0))
"RTN","TIULO",112,0)
 S TIUT4=+$O(^LAB(60,"B","T-4",0))
"RTN","TIULO",113,0)
 I '+$G(TIUTSH)!'+$G(TIUT4) G TSHX
"RTN","TIULO",114,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUTSH)
"RTN","TIULO",115,0)
 S TIUTSH=$S($D(TIUY)#2:$P($G(@TIUY@(1)),U,4),1:"____")
"RTN","TIULO",116,0)
 I $D(TIUY)#2 K @TIUY
"RTN","TIULO",117,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUT4)
"RTN","TIULO",118,0)
 S TIUT4=$S($D(TIUY)#2:$P($G(@TIUY@(1)),U,4),1:"____")
"RTN","TIULO",119,0)
 I $D(TIUY)#2 K @TIUY
"RTN","TIULO",120,0)
 S TIUY=TIUTSH_"/"_TIUT4
"RTN","TIULO",121,0)
TSHX Q $G(TIUY)
"RTN","TIULO",122,0)
SGOT(DFN,TIUEDT,TIULDT) ; Get SGOT
"RTN","TIULO",123,0)
 N TIUY,TIUSGOT S TIUSGOT=+$O(^LAB(60,"B","SGOT",0))
"RTN","TIULO",124,0)
 I '+$G(TIUSGOT) Q
"RTN","TIULO",125,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUSGOT)
"RTN","TIULO",126,0)
 S TIUSGOT=$S($D(TIUY)#2:$P($G(@TIUY@(1)),U,4),1:"____")
"RTN","TIULO",127,0)
 I $D(TIUY)#2 K @TIUY
"RTN","TIULO",128,0)
SGOTX Q $G(TIUSGOT)
"RTN","TIULO",129,0)
HGBA1C(DFN,TIUEDT,TIULDT) ; Get Hemoglobin A1C
"RTN","TIULO",130,0)
 N TIUY,TIUHGB S TIUHGB=+$O(^LAB(60,"B","HEMOGLOBIN A1C",0))
"RTN","TIULO",131,0)
 I '+$G(TIUHGB) G HGBX
"RTN","TIULO",132,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUHGB)
"RTN","TIULO",133,0)
 S TIUHGB=$S($D(TIUY)#2:$P($G(@TIUY@(1)),U,4),1:"____")
"RTN","TIULO",134,0)
 I $D(TIUY)#2 K @TIUY
"RTN","TIULO",135,0)
HGBX Q $G(TIUHGB)
"RTN","TIULO",136,0)
URICACID(DFN,TIUEDT,TIULDT) ; Get Uric Acid
"RTN","TIULO",137,0)
 N TIUY,TIUURIC S TIUURIC=+$O(^LAB(60,"B","URIC ACID",0))
"RTN","TIULO",138,0)
 I '+$G(TIUURIC) G URICX
"RTN","TIULO",139,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUURIC)
"RTN","TIULO",140,0)
 S TIUURIC=$S($D(TIUY)#2:$P($G(@TIUY@(1)),U,4),1:"____")
"RTN","TIULO",141,0)
 I $D(TIUY)#2 K @TIUY
"RTN","TIULO",142,0)
URICX Q $G(TIUURIC)
"RTN","TIULO",143,0)
FBG(DFN,TIUEDT,TIULDT) ; Get Hemoglobin A1C
"RTN","TIULO",144,0)
 N TIUY,TIUFBG S TIUFBG=+$O(^LAB(60,"B","FBS",0))
"RTN","TIULO",145,0)
 I '+$G(TIUFBG) G FBGX
"RTN","TIULO",146,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUFBG)
"RTN","TIULO",147,0)
 S TIUFBG=$S($D(TIUY)#2:$P($G(@TIUY@(1)),U,4),1:"____")
"RTN","TIULO",148,0)
 I $D(TIUY)#2 K @TIUY
"RTN","TIULO",149,0)
FBGX Q $G(TIUFBG)
"RTN","TIULO",150,0)
ADM(DFN) ;Current Admission Date/Time
"RTN","TIULO",151,0)
 N VAIN,J
"RTN","TIULO",152,0)
 D INP^VADPT
"RTN","TIULO",153,0)
 S J=$P(VAIN(7),U,2),J(1)=$P(J,"@",1),J(2)=$P(J,"@",2),J(3)=$E(J(2),1,5),Y=J(1)_" "_J(3) K J
"RTN","TIULO",154,0)
ADMX Q Y
"RTN","TIULO",155,0)
TODAY() ;Today's Date
"RTN","TIULO",156,0)
 S X=$G(DT) I X'="" S Y=X D DD^%DT
"RTN","TIULO",157,0)
TODAYX Q Y
"RTN","TIULO",158,0)
NOW() ;Current Date/Time
"RTN","TIULO",159,0)
NOWX Q $$DATE^TIULS($$NOW^TIULC,"AMTH DD, CCYY HR:MIN")
"RTN","TIULO1")
0^99^B2036711
"RTN","TIULO1",1,0)
TIULO1 ; SLC/JER - More embedded Objects ;10/20/95  22:32
"RTN","TIULO1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULO1",3,0)
VISDATE(TIU) ; Visit date/time
"RTN","TIULO1",4,0)
 Q $$DATE^TIULS($P($G(TIU("VISIT")),U,2),"MM/DD/YY HR:MIN")
"RTN","TIULO1",5,0)
LABS(DFN,TIUTEST,TIUEDT,TIULDT) ; Get Lab Results
"RTN","TIULO1",6,0)
 N TIUY,TIUTST,TIUX S TIUTST=+$O(^LAB(60,"B",TIUTEST,0))
"RTN","TIULO1",7,0)
 I '+$G(TIUTST) G LABX
"RTN","TIULO1",8,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUTST)
"RTN","TIULO1",9,0)
 S TIUX=$S($D(TIUY)#2:$G(@TIUY@(1)),1:"____")
"RTN","TIULO1",10,0)
 I $L(TIUX,U)>1 D
"RTN","TIULO1",11,0)
 . S TIUTST=$P(TIUX,U,4)_" "_$P(TIUX,U,6)_" "_$P(TIUX,U,5)_"    ("
"RTN","TIULO1",12,0)
 . S TIUTST=TIUTST_$$DATE^TIULS($P(TIUX,U),"MM/YY/DD HR:MIN")_")"
"RTN","TIULO1",13,0)
 E  S TIUTST=TIUX
"RTN","TIULO1",14,0)
 I $D(TIUY)#2 K @TIUY
"RTN","TIULO1",15,0)
LABX Q $G(TIUTST)
"RTN","TIULO1",16,0)
 ;
"RTN","TIULO1",17,0)
HPHONE(DFN) ;Current Home Telephone Number
"RTN","TIULO1",18,0)
 N VAPA
"RTN","TIULO1",19,0)
 D ADD^VADPT
"RTN","TIULO1",20,0)
HPHX Q $G(VAPA(8))
"RTN","TIULO1",21,0)
 ;
"RTN","TIULO1",22,0)
SADD(DFN) ;Single Line Street Address
"RTN","TIULO1",23,0)
 N VAPA,J
"RTN","TIULO1",24,0)
 D ADD^VADPT
"RTN","TIULO1",25,0)
 S:$D(VAPA(1)) J=VAPA(1) S:$D(VAPA(2)) J=J_"  "_VAPA(2) S:$D(VAPA(3)) J=J_"  "_VAPA(3)
"RTN","TIULO1",26,0)
SADX Q J
"RTN","TIULO1",27,0)
 ;
"RTN","TIULO1",28,0)
CISTZI(DFN) ;City, State, Zip
"RTN","TIULO1",29,0)
 N VAPA,J
"RTN","TIULO1",30,0)
 D ADD^VADPT
"RTN","TIULO1",31,0)
 S:$D(VAPA(4)) J=VAPA(4) S:$D(VAPA(5)) J=J_", "_$P(VAPA(5),U,2) S:$D(VAPA(6)) J=J_", "_VAPA(6)
"RTN","TIULO1",32,0)
CSTX Q J
"RTN","TIULO1",33,0)
 ;
"RTN","TIULP")
0^100^B10167945
"RTN","TIULP",1,0)
TIULP ; SLC/JER - Functions determining privilege ;8/9/94  10:25
"RTN","TIULP",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULP",3,0)
CANDO(TIUDA,TIUACT) ; Can User perform action now
"RTN","TIULP",4,0)
 ; Receives: TIUDA=Record number in file 8925
"RTN","TIULP",5,0)
 ;           TIUACT=Name or Pointer to 8930.8 (USR Event)
"RTN","TIULP",6,0)
 ;  Returns:   TIUY=1:yes,0:no_"^"_why not message
"RTN","TIULP",7,0)
 N TIUI,TIUTYP,TIUROLE,STATUS,TIUY,TIUATYP S TIUY=0
"RTN","TIULP",8,0)
 I +TIUACT'>0 S TIUACT=$$USREVNT(TIUACT) I +TIUACT'>0 S TIUY=0 G CANDOX
"RTN","TIULP",9,0)
 I +TIUACT=4!(+TIUACT=5),+$$BLANK^TIULC(TIUDA) D  G CANDOX
"RTN","TIULP",10,0)
 . S TIUY="0^ Contains blanks ("_$P(TIUPRM1,U,6)_") which must be filled before "_$P(TIUACT,U,2)_"ATURE."
"RTN","TIULP",11,0)
 S TIUROLE=$$USRROLE(TIUDA),STATUS=+$P($G(^TIU(8925,+TIUDA,0)),U,5)
"RTN","TIULP",12,0)
 S TIUTYP=+$G(^TIU(8925,+TIUDA,0))
"RTN","TIULP",13,0)
 I $$ISADDNDM^TIULC1(+TIUDA) S TIUATYP=TIUTYP,TIUTYP=+$G(^TIU(8925,+$P($G(^TIU(8925,+TIUDA,0)),U,6),0))
"RTN","TIULP",14,0)
 I TIUROLE']"" S TIUY=$$CANDO^USRLA(TIUTYP,STATUS,+TIUACT,DUZ)
"RTN","TIULP",15,0)
 F TIUI=1:1:($L(TIUROLE,U)-1) D  Q:+$G(TIUY)>0
"RTN","TIULP",16,0)
 . S TIUY=$$CANDO^USRLA(TIUTYP,STATUS,+TIUACT,DUZ,$P(TIUROLE,U,TIUI))
"RTN","TIULP",17,0)
 I +$G(TIUATYP) S TIUTYP=+$G(TIUATYP)
"RTN","TIULP",18,0)
 I +TIUY'>0 S TIUY=TIUY_U_" You may not "_$P(TIUACT,U,2)_" this "_$P($G(^TIU(8925.6,+STATUS,0)),U)_" "_$$PNAME^TIULC1(TIUTYP)_"."
"RTN","TIULP",19,0)
CANDOX Q TIUY
"RTN","TIULP",20,0)
CANENTR(TIUTYP) ; Evaluate priveledge to enter a document of a particular type
"RTN","TIULP",21,0)
 N TIUACT,STATUS,USRROLE,TIUY
"RTN","TIULP",22,0)
 S TIUACT=$$USREVNT("ENTRY"),STATUS=2
"RTN","TIULP",23,0)
 S USRROLE=3
"RTN","TIULP",24,0)
 S TIUY=$$CANDO^USRLA(TIUTYP,STATUS,+TIUACT,DUZ,USRROLE)
"RTN","TIULP",25,0)
 Q TIUY
"RTN","TIULP",26,0)
USRROLE(TIUDA) ; Identify the user's role with respect to the document
"RTN","TIULP",27,0)
 N TIU0,TIU12,TIU13,TIUY
"RTN","TIULP",28,0)
 S TIU0=$G(^TIU(8925,+TIUDA,0)),TIU12=$G(^TIU(8925,+TIUDA,12))
"RTN","TIULP",29,0)
 S TIU13=$G(^TIU(8925,+TIUDA,13))
"RTN","TIULP",30,0)
 I DUZ=+$P(TIU13,U,2) S TIUY=+$O(^USR(8930.2,"B","TRANSCRIBER",0))_U
"RTN","TIULP",31,0)
 I DUZ=+$P(TIU12,U,2) S TIUY=$G(TIUY)_+$O(^USR(8930.2,"B","AUTHOR/DICTATOR",0))_U
"RTN","TIULP",32,0)
 I DUZ=+$P(TIU12,U,9) S TIUY=$G(TIUY)_+$O(^USR(8930.2,"B","ATTENDING PHYSICIAN",0))_U
"RTN","TIULP",33,0)
 I DUZ=+$P(TIU12,U,4) S TIUY=$G(TIUY)_+$O(^USR(8930.2,"B","EXPECTED SIGNER",0))_U
"RTN","TIULP",34,0)
 I DUZ=+$P(TIU12,U,8) S TIUY=$G(TIUY)_+$O(^USR(8930.2,"B","EXPECTED COSIGNER",0))_U
"RTN","TIULP",35,0)
 I +$O(^TIU(8925.7,"AE",+TIUDA,+DUZ,0)) D
"RTN","TIULP",36,0)
 . N TIUXTRA S TIUXTRA=+$O(^TIU(8925.7,"AE",+TIUDA,+DUZ,0))
"RTN","TIULP",37,0)
 . I +$P($G(^TIU(8925.7,+TIUXTRA,0)),U,4) Q
"RTN","TIULP",38,0)
 . S TIUY=$G(TIUY)_+$O(^USR(8930.2,"B","ADDITIONAL SIGNER",0))_U
"RTN","TIULP",39,0)
 ; I DUZ=+$P($G(^VA(200,+$P(TIU12,U,4),20)),U,5)!+$P($G(^VA(200,+$P(TIU12,U,8),20)),U,5) S TIUY=$G(TIUY)_+$O(^USR(8930.2,"B","SURROGATE",0))_U
"RTN","TIULP",40,0)
 Q $G(TIUY)
"RTN","TIULP",41,0)
USREVNT(EVENT) ; Given event name, return event pointer
"RTN","TIULP",42,0)
 N TIUY,TIUDA
"RTN","TIULP",43,0)
 S TIUDA=+$O(^USR(8930.8,"B",EVENT,0))
"RTN","TIULP",44,0)
 S TIUY=TIUDA_U_$P($G(^USR(8930.8,TIUDA,0)),U,5)
"RTN","TIULP",45,0)
 Q TIUY
"RTN","TIULP",46,0)
CANPICK(TIUTYP) ; Screens selection of documents
"RTN","TIULP",47,0)
 N TIUPOWN,TIUCOWN,TIUT0,TIUTSTAT,TIUY S TIUY=0
"RTN","TIULP",48,0)
 S TIUT0=$G(^TIU(8925.1,+TIUTYP,0)),TIUTSTAT=$P(TIUT0,U,7)
"RTN","TIULP",49,0)
 I TIUTSTAT']"" S TIUY=0 G CANPIX
"RTN","TIULP",50,0)
 I TIUTSTAT=13 S TIUY=0 G CANPIX
"RTN","TIULP",51,0)
 I TIUTSTAT=11 S TIUY=1 G CANPIX
"RTN","TIULP",52,0)
 S TIUPOWN=$P(TIUT0,U,5),TIUCOWN=+$P(TIUT0,U,6)
"RTN","TIULP",53,0)
 I TIUTSTAT=10 S TIUY=$S(TIUPOWN=DUZ:1,+$$ISA^USRLM(DUZ,TIUCOWN):1,1:0)
"RTN","TIULP",54,0)
CANPIX Q +$G(TIUY)
"RTN","TIULP",55,0)
REQCOSIG(TIUTYP,TIUDA,USER) ; Evaluate whether user requires cosignature
"RTN","TIULP",56,0)
 N TIUI,TIUY S USER=$S(+$G(USER):+$G(USER),1:+$G(DUZ))
"RTN","TIULP",57,0)
 I '$D(TIUDPRM) D DOCPRM^TIULC1(TIUTYP,.TIUDPRM,+$G(TIUDA))
"RTN","TIULP",58,0)
 I '+$G(TIUDPRM(5)) G REQCOSX
"RTN","TIULP",59,0)
 F TIUI=1:1:$L(TIUDPRM(5),U) D  Q:+TIUY>0
"RTN","TIULP",60,0)
 . S TIUY=+$$ISA^USRLM(+USER,+$P(TIUDPRM(5),U,TIUI))
"RTN","TIULP",61,0)
REQCOSX Q +$G(TIUY)
"RTN","TIULP1")
0^101^B19642962
"RTN","TIULP1",1,0)
TIULP1 ; SLC/JER - More functions determining privilege ;1/19/95  17:49
"RTN","TIULP1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULP1",3,0)
CANADDA(DA) ;Checks if an Addendum can be added
"RTN","TIULP1",4,0)
 N TIUY,TIU0,TIU13,TIU15
"RTN","TIULP1",5,0)
 I 'DA S TIUY="^There is no original report." G ADDAX
"RTN","TIULP1",6,0)
 S TIU0=$G(^TIU(8925,+DA,0)),TIU13=$G(^(13)),TIU15=$G(^(15))
"RTN","TIULP1",7,0)
 I +$P(TIU0,U,6) S TIUY="^This is an addendum." G ADDAX
"RTN","TIULP1",8,0)
 ; If release is required, and document isn't released
"RTN","TIULP1",9,0)
 ; I ------ S TIUY="^Document isn't released from transcription.") G ADDAX
"RTN","TIULP1",10,0)
 ; I ------ S TIUY="^Original Discharge Summary isn't verified." G ADDAX
"RTN","TIULP1",11,0)
 I +$G(DUZ)=$P(ACT,U,9) D  G:$D(TIUX) ADDAX
"RTN","TIULP1",12,0)
 . I '$P(ACT,U,11) S TIUX="^Discharge Summary isn't cosigned."
"RTN","TIULP1",13,0)
 I +$G(DUZ)=$P(ACT,U) D  G:$D(TIUX) ADDAX
"RTN","TIULP1",14,0)
 . I '$P(ACT,U,4) S TIUX="^Discharge Summary isn't signed nor cosigned."
"RTN","TIULP1",15,0)
 S TIUX=1
"RTN","TIULP1",16,0)
ADDAX ;Exit for CANADDA
"RTN","TIULP1",17,0)
 I $P($G(TIUX),U,2)]"" S TIUX=TIUX_" Can't enter Addendum."
"RTN","TIULP1",18,0)
 Q TIUX
"RTN","TIULP1",19,0)
CANEDITA(TIUDA,TIUY) ;Checks if an Addendum can be edited
"RTN","TIULP1",20,0)
 N ACT,TIUX,DA,TIUCNT,SIGN,COSIGN,TIUCHIEF
"RTN","TIULP1",21,0)
 S TIUCNT=0
"RTN","TIULP1",22,0)
 I '$D(^TIU(8925,"DAD",+TIUDA))!(+$P($G(^TIU(8925,+TIUDA,0)),U,6)) G EDITAX
"RTN","TIULP1",23,0)
 S DA=0 F  S DA=$O(^TIU(8925,"DAD",+TIUDA,DA)) Q:+DA'>0  D
"RTN","TIULP1",24,0)
 . S ACT=$G(^TIU(8925,+DA,"ACT")),SIGN=$P(ACT,U,4),COSIGN=$P(ACT,U,11)
"RTN","TIULP1",25,0)
 . S TIUCHIEF=+$D(^XUSEC("TIU SERVICE CHIEF",+$G(DUZ)))
"RTN","TIULP1",26,0)
 . I ACT']"" Q
"RTN","TIULP1",27,0)
 . I $D(TIUXCRP) D  Q
"RTN","TIULP1",28,0)
 . . ;Transcriptionist and requires release
"RTN","TIULP1",29,0)
 . . I $P($G(TIUPRM1),U,3),'$P(ACT,U,19) S TIUCNT=TIUCNT+1,TIUY(TIUCNT)=DA
"RTN","TIULP1",30,0)
 . . ;Transcriptionist, doesn't require release, requires verification
"RTN","TIULP1",31,0)
 . . I '$P($G(TIUPRM1),U,3),$P($G(TIUPRM1),U,2),'$P(ACT,U,8) S TIUCNT=TIUCNT+1,TIUY(TIUCNT)=DA
"RTN","TIULP1",32,0)
 . ;MRT or MIS Manager and requires MAS verification
"RTN","TIULP1",33,0)
 . I $P(TIUPRM1,U,2),$D(TIUMRT)!($D(^XUSEC("TIU MANAGER",+$G(DUZ)))) D  Q
"RTN","TIULP1",34,0)
 . . I $P(ACT,U,19),'SIGN,'COSIGN S TIUCNT=TIUCNT+1,TIUY(TIUCNT)=DA
"RTN","TIULP1",35,0)
 . . I '$P(ACT,U,19),$P(ACT,U,5)=+$G(DUZ) S TIUCNT=TIUCNT+1,TIUY(TIUCNT)=DA
"RTN","TIULP1",36,0)
 . ;If not transcriptionist nor MIS, transcriber can see it till signed
"RTN","TIULP1",37,0)
 . I '$D(TIUXCRP),'$D(TIUMRT),'$D(^XUSEC("TIU MANAGER",+$G(DUZ))),$P(ACT,U,5)=+$G(DUZ) D  Q
"RTN","TIULP1",38,0)
 . . I 'SIGN,'COSIGN S TIUCNT=TIUCNT+1,TIUY(TIUCNT)=DA Q
"RTN","TIULP1",39,0)
 . ;Check if author or cosigner and unreleased or unverified or signed
"RTN","TIULP1",40,0)
 . I $P(ACT,U)=+$G(DUZ)!($P(ACT,U,9)=+$G(DUZ))!(TIUCHIEF)!($D(^XUSEC("TIU SURROGATE",+$G(DUZ)))) D  Q
"RTN","TIULP1",41,0)
 . . I +$P(TIUPRM1,U,3),'+$P(ACT,U,19) S TIUCNT=TIUCNT+1,TIUY(TIUCNT)="^ exists but is not yet released from transcription." Q
"RTN","TIULP1",42,0)
 . . I +$P(TIUPRM1,U,2),'+$P(ACT,U,8) S TIUCNT=TIUCNT+1,TIUY(TIUCNT)="^ exists but is not yet verified." Q
"RTN","TIULP1",43,0)
 . . I COSIGN S TIUCNT=TIUCNT+1,TIUY(TIUCNT)="^ exists but has been cosigned" Q
"RTN","TIULP1",44,0)
 . . I 'SIGN,'COSIGN S TIUCNT=TIUCNT+1,TIUY(TIUCNT)=DA Q
"RTN","TIULP1",45,0)
 . . I SIGN,'COSIGN,$P(ACT,U,9)=+$G(DUZ)!(TIUCHIEF) S TIUCNT=TIUCNT+1,TIUY(TIUCNT)=DA Q
"RTN","TIULP1",46,0)
EDITAX ;Exit for CANEDITA
"RTN","TIULP1",47,0)
 S TIUX=$S($D(TIUY(TIUCNT)):1,1:0)
"RTN","TIULP1",48,0)
 Q TIUX
"RTN","TIULP1",49,0)
READYSIG(DA) ;Check if user is provider & rec is ready for signature
"RTN","TIULP1",50,0)
 N ACT,TIUY
"RTN","TIULP1",51,0)
 S TIUY=0,ACT=$G(^TIU(8925,+DA,"ACT"))
"RTN","TIULP1",52,0)
 I $D(^XUSEC("PROVIDER",+$G(DUZ)))!($D(^XUSEC("TIU AUTHOR",+$G(DUZ))))!($D(^XUSEC("TIU SURROGATE",+$G(DUZ)))) D
"RTN","TIULP1",53,0)
 . I $P(TIUPRM1,U,2) D  Q  ;Verification required and completed
"RTN","TIULP1",54,0)
 . . I +$P(ACT,U,8) S TIUY=1
"RTN","TIULP1",55,0)
 . I $P(TIUPRM1,U,3) D  Q  ;Verification not required,
"RTN","TIULP1",56,0)
 . . ;transcription release required and released
"RTN","TIULP1",57,0)
 . . I +$P(ACT,U,19) S TIUY=1
"RTN","TIULP1",58,0)
 . ; Verification and transcription release not required
"RTN","TIULP1",59,0)
 . S TIUY=1
"RTN","TIULP1",60,0)
READYX ;Exit for READYSIG
"RTN","TIULP1",61,0)
 Q TIUY
"RTN","TIULP1",62,0)
CANDEL(DA) ; Check whether user has authority to delete record
"RTN","TIULP1",63,0)
 N Y
"RTN","TIULP1",64,0)
 I $D(^XUSEC("TIU MANAGER",DUZ)) S Y=1 G CANDELX
"RTN","TIULP1",65,0)
 S Y="0^You are not authorized to DELETE Discharge Summaries."
"RTN","TIULP1",66,0)
CANDELX Q Y
"RTN","TIULP1",67,0)
CANSEND(TIUDA) ; Checks of user can send DCS back to transcription
"RTN","TIULP1",68,0)
 N ACT,TIUY
"RTN","TIULP1",69,0)
 S ACT=$G(^TIU(8925,+TIUDA,"ACT")) D
"RTN","TIULP1",70,0)
 . I +$P(ACT,U,16) S TIUY="^ Has been purged." Q
"RTN","TIULP1",71,0)
 . I +$P(TIUPRM1,U,3),'+$P(ACT,U,19) S TIUY="0^ Is already available to transcription." Q
"RTN","TIULP1",72,0)
 . I +$P($G(^TIU(8925,+DA,"ACT")),U,11) S TIUY="0^ Attending Physician has signed." Q
"RTN","TIULP1",73,0)
 . S TIUY=+$$READ^TIUU("YO","Are you sure you want to send report back to "_$S($P(ACT,U)=$P(ACT,U,5):"author",1:"transcription"),"NO","^D SBACK^TIUDIRH")
"RTN","TIULP1",74,0)
 Q TIUY
"RTN","TIULP1",75,0)
CANAMND(TIUDA) ; Checks whether user can amend a discharge summary
"RTN","TIULP1",76,0)
 N ACT,TIUY
"RTN","TIULP1",77,0)
 S ACT=$G(^TIU(8925,+TIUDA,"ACT"))
"RTN","TIULP1",78,0)
 I +$P(ACT,U,4)'>0 S TIUY="0^ Not yet signed"
"RTN","TIULP1",79,0)
 I +$P(ACT,U,11)'>0 S TIUY="0^ Not yet cosigned" G CANAMNX
"RTN","TIULP1",80,0)
 S TIUY=1
"RTN","TIULP1",81,0)
CANAMNX Q TIUY
"RTN","TIULQ")
0^102^B9528312
"RTN","TIULQ",1,0)
TIULQ ; SLC/JER - Record Extract Using FM Retriever
"RTN","TIULQ",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULQ",3,0)
EXTRACT(TIUDA,TIUROOT,TIUERR,DR,TIULINE,TIUTEXT,FORMAT) ; Gets record & addenda
"RTN","TIULQ",4,0)
 N DA,DIC,DIQ,TIULQ,X,Y
"RTN","TIULQ",5,0)
 S TIUROOT=$G(TIUROOT,"^TMP(""TIULQ"",$J)")
"RTN","TIULQ",6,0)
 S DA=TIUDA,DIC=8925,DIQ="TIULQ",DIQ(0)=$G(FORMAT,"IE")
"RTN","TIULQ",7,0)
 I $G(DR)']"" S DR=".01:.1;1201:1701"
"RTN","TIULQ",8,0)
 D EN^DIQ1
"RTN","TIULQ",9,0)
 I '$D(TIULQ) S TIUERR="1^ Record Extract Failed"
"RTN","TIULQ",10,0)
 M @TIUROOT@(TIUDA)=TIULQ(8925,TIUDA)
"RTN","TIULQ",11,0)
 D XTRASIGN(DA,+$G(TIULINE))
"RTN","TIULQ",12,0)
 D PROBLEMS(DA,+$G(TIULINE))
"RTN","TIULQ",13,0)
 I +$G(TIUTEXT) D TEXT(TIUDA,+$G(TIULINE),TIUDA)
"RTN","TIULQ",14,0)
 Q
"RTN","TIULQ",15,0)
XTRASIGN(TIUDA,TIUJ) ; Get Extra Signers
"RTN","TIULQ",16,0)
 N TIUI,TIUXTRA,TIUC,DR,DIC,DIQ S TIUI=0
"RTN","TIULQ",17,0)
 F  S TIUI=$O(^TIU(8925.7,"B",+TIUDA,TIUI)) Q:+TIUI'>0  D
"RTN","TIULQ",18,0)
 . N TIUDT,TIUSGN,TIUSNM,TIUSTTL
"RTN","TIULQ",19,0)
 . S DA=TIUI,DR=".04:.07",DIC="^TIU(8925.7,",DIQ="TIUXTRA",DIQ(0)="IE"
"RTN","TIULQ",20,0)
 . D EN^DIQ1 Q:$D(TIUXTRA)'>9
"RTN","TIULQ",21,0)
 . S TIUC=+$G(TIUC)+1
"RTN","TIULQ",22,0)
 . S TIUDT=$G(TIUXTRA(8925.7,DA,.04,"I"))
"RTN","TIULQ",23,0)
 . S TIUSGN=$G(TIUXTRA(8925.7,DA,.05,"I"))
"RTN","TIULQ",24,0)
 . S TIUSNM=$G(TIUXTRA(8925.7,DA,.06,"E"))
"RTN","TIULQ",25,0)
 . S TIUSTTL=$G(TIUXTRA(8925.7,DA,.07,"E"))
"RTN","TIULQ",26,0)
 . S @TIUROOT@(TIUDA,"EXTRASGNR",(TIUJ+TIUC),"DATE")=TIUDT
"RTN","TIULQ",27,0)
 . S @TIUROOT@(TIUDA,"EXTRASGNR",(TIUJ+TIUC),"EXTRA")=TIUSGN
"RTN","TIULQ",28,0)
 . S @TIUROOT@(TIUDA,"EXTRASGNR",(TIUJ+TIUC),"NAME")=TIUSNM
"RTN","TIULQ",29,0)
 . S @TIUROOT@(TIUDA,"EXTRASGNR",(TIUJ+TIUC),"TITLE")=TIUSTTL
"RTN","TIULQ",30,0)
 Q
"RTN","TIULQ",31,0)
PROBLEMS(TIUDA,TIUJ) ; Get associated problems
"RTN","TIULQ",32,0)
 N TIUI,TIUP,TIUPROB,TIUC,TIUX,DR,DIC,DIQ S TIUI=0
"RTN","TIULQ",33,0)
 F  S TIUI=$O(^TIU(8925.9,"B",+TIUDA,TIUI)) Q:+TIUI'>0  D
"RTN","TIULQ",34,0)
 . S DA=TIUI,DR=".02;.05",DIC="^TIU(8925.9,",DIQ="TIUPROB"
"RTN","TIULQ",35,0)
 . D EN^DIQ1 Q:$D(TIUPROB)'>9
"RTN","TIULQ",36,0)
 . S TIUC=+$G(TIUC)+1
"RTN","TIULQ",37,0)
 . S TIUP=$$MIXED^TIULS($G(TIUPROB(8925.9,TIUI,.05)))
"RTN","TIULQ",38,0)
 . S TIUX=$$SETSTR^VALM1($J(TIUC,2)_".",$G(TIUX),1,3)
"RTN","TIULQ",39,0)
 . S TIUX=$$SETSTR^VALM1(TIUP,$G(TIUX),5,35)
"RTN","TIULQ",40,0)
 . S TIUP=$G(TIUPROB(8925.9,TIUI,.02))
"RTN","TIULQ",41,0)
 . S TIUX=$$SETSTR^VALM1(TIUP,$G(TIUX),40,6)
"RTN","TIULQ",42,0)
 . S @TIUROOT@(TIUDA,"PROBLEM",(TIUJ+TIUC),0)=TIUX
"RTN","TIULQ",43,0)
 Q
"RTN","TIULQ",44,0)
TEXT(TIUDA,TIUJ,TIUDAD) ; Get each component
"RTN","TIULQ",45,0)
 N TIUKID,TIUDADT,TIUI,TIUD0,TIULVL,CANPRINT S TIUI=0
"RTN","TIULQ",46,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIULVL=$P($G(^TIU(8925.1,+TIUD0,0)),U,4)
"RTN","TIULQ",47,0)
 S CANPRINT=$S(TIULVL="DOC":$$CANDO^TIULP(TIUDA,"PRINT RECORD"),1:1)
"RTN","TIULQ",48,0)
 I +CANPRINT'>0 D  Q
"RTN","TIULQ",49,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIULQ",50,0)
 . S @TIUROOT@(TIUDAD,"TEXT",TIUJ,0)=$P(CANPRINT,U,2)
"RTN","TIULQ",51,0)
 . S @TIUROOT@(TIUDAD,"TEXT",0)="^^"_TIUJ_U_TIUJ_U_DT_"^^"
"RTN","TIULQ",52,0)
 F  S TIUI=$O(^TIU(8925,+TIUDA,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIULQ",53,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIULQ",54,0)
 . S @TIUROOT@(TIUDAD,"TEXT",TIUJ,0)=$G(^TIU(8925,+TIUDA,"TEXT",TIUI,0))
"RTN","TIULQ",55,0)
 S @TIUROOT@(TIUDAD,"TEXT",0)="^^"_TIUJ_U_TIUJ_U_DT_"^^"
"RTN","TIULQ",56,0)
 ; Iterate through children, and get their text fields
"RTN","TIULQ",57,0)
 S TIUKID=0
"RTN","TIULQ",58,0)
 F  S TIUKID=$O(^TIU(8925,"DAD",+TIUDA,TIUKID)) Q:+TIUKID'>0  D
"RTN","TIULQ",59,0)
 . I +$$ISADDNDM^TIULC1(TIUKID) D
"RTN","TIULQ",60,0)
 . . N TIUADRT
"RTN","TIULQ",61,0)
 . . I TIUROOT[")" S TIUADRT=$P(TIUROOT,")")_","_TIUDAD_",""ZADD"")"
"RTN","TIULQ",62,0)
 . . E  S TIUADRT=TIUROOT_"("_TIUDAD_",""ZADD"")"
"RTN","TIULQ",63,0)
 . . D EXTRACT(TIUKID,TIUADRT,.TIUERR,DR,.TIUJ,1) I 1
"RTN","TIULQ",64,0)
 . E  D TEXT(TIUKID,.TIUJ,TIUDAD)
"RTN","TIULQ",65,0)
 Q
"RTN","TIULQ2")
0^103^B4351710
"RTN","TIULQ2",1,0)
TIULQ2 ; SLC/JER - Record Extract For Upload Event Display
"RTN","TIULQ2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULQ2",3,0)
EXTRACT(TIUDA,TIUROOT,TIUERR,DR,TIULINE,TIUTEXT) ; Gets record & addenda
"RTN","TIULQ2",4,0)
 N DA,DIC,DIQ,TIULQ,X,Y
"RTN","TIULQ2",5,0)
 S TIUROOT=$G(TIUROOT,"^TMP(""TIULQ"",$J)")
"RTN","TIULQ2",6,0)
 S DA=TIUDA,DIC=8925,DIQ="TIULQ",DIQ(0)="IE"
"RTN","TIULQ2",7,0)
 I $G(DR)']"" S DR=".01:.1;1201:1701"
"RTN","TIULQ2",8,0)
 D EN^DIQ1
"RTN","TIULQ2",9,0)
 I '$D(TIULQ) S TIUERR="1^ Record Extract Failed"
"RTN","TIULQ2",10,0)
 M @TIUROOT@(TIUDA)=TIULQ(8925,TIUDA)
"RTN","TIULQ2",11,0)
 D PROBLEMS(DA,+$G(TIULINE))
"RTN","TIULQ2",12,0)
 I +$G(TIUTEXT) D TEXT(TIUDA,+$G(TIULINE),TIUDA)
"RTN","TIULQ2",13,0)
 Q
"RTN","TIULQ2",14,0)
PROBLEMS(TIUDA,TIUJ) ; Get associated problems
"RTN","TIULQ2",15,0)
 N TIUI,TIUP,TIUPROB,TIUC,TIUX,DR,DIC,DIQ S TIUI=0
"RTN","TIULQ2",16,0)
 F  S TIUI=$O(^TIU(8925.9,"B",+TIUDA,TIUI)) Q:+TIUI'>0  D
"RTN","TIULQ2",17,0)
 . S DA=TIUI,DR=".02;.05",DIC="^TIU(8925.9,",DIQ="TIUPROB"
"RTN","TIULQ2",18,0)
 . D EN^DIQ1 Q:$D(TIUPROB)'>9
"RTN","TIULQ2",19,0)
 . S TIUC=+$G(TIUC)+1
"RTN","TIULQ2",20,0)
 . S TIUP=$$MIXED^TIULS($G(TIUPROB(8925.9,TIUI,.05)))
"RTN","TIULQ2",21,0)
 . S TIUX=$$SETSTR^VALM1($J(TIUC,2)_".",$G(TIUX),1,3)
"RTN","TIULQ2",22,0)
 . S TIUX=$$SETSTR^VALM1(TIUP,$G(TIUX),5,35)
"RTN","TIULQ2",23,0)
 . S TIUP=$G(TIUPROB(8925.9,TIUI,.02))
"RTN","TIULQ2",24,0)
 . S TIUX=$$SETSTR^VALM1(TIUP,$G(TIUX),40,6)
"RTN","TIULQ2",25,0)
 . S @TIUROOT@(TIUDA,"PROBLEM",(TIUJ+TIUC),0)=TIUX
"RTN","TIULQ2",26,0)
 Q
"RTN","TIULQ2",27,0)
TEXT(TIUDA,TIUJ,TIUDAD) ; Get each component
"RTN","TIULQ2",28,0)
 N TIUKID,TIUDADT,TIUI S TIUI=0
"RTN","TIULQ2",29,0)
 F  S TIUI=$O(^TIU(8925,+TIUDA,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIULQ2",30,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIULQ2",31,0)
 . S @TIUROOT@(TIUDAD,"TEXT",TIUJ,0)=$G(^TIU(8925,+TIUDA,"TEXT",TIUI,0))
"RTN","TIULQ2",32,0)
 S @TIUROOT@(TIUDAD,"TEXT",0)="^^"_TIUJ_U_TIUJ_U_DT_"^^"
"RTN","TIULQ2",33,0)
 ; Iterate through children, and get their text fields
"RTN","TIULQ2",34,0)
 S TIUKID=0
"RTN","TIULQ2",35,0)
 F  S TIUKID=$O(^TIU(8925,"DAD",+TIUDA,TIUKID)) Q:+TIUKID'>0  D
"RTN","TIULQ2",36,0)
 . I +$$ISADDNDM^TIULC1(TIUKID) D
"RTN","TIULQ2",37,0)
 . . N TIUADRT
"RTN","TIULQ2",38,0)
 . . I TIUROOT[")" S TIUADRT=$P(TIUROOT,")")_","_TIUDAD_",""ZADD"")"
"RTN","TIULQ2",39,0)
 . . E  S TIUADRT=TIUROOT_"("_TIUDAD_",""ZADD"")"
"RTN","TIULQ2",40,0)
 . . D EXTRACT(TIUKID,TIUADRT,.TIUERR,DR,.TIUJ) I 1
"RTN","TIULQ2",41,0)
 . E  D TEXT(TIUKID,.TIUJ,TIUDAD)
"RTN","TIULQ2",42,0)
 Q
"RTN","TIULS")
0^104^B15667975
"RTN","TIULS",1,0)
TIULS ; SLC/JER - String Library functions ;10/7/94  17:18
"RTN","TIULS",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULS",3,0)
TIME(X,FMT) ; Recieves X as 2910419.01 and FMT=Return Format of time (HH:MM:SS).
"RTN","TIULS",4,0)
 N HR,MIN,SEC,TIUI
"RTN","TIULS",5,0)
 I $S('$D(FMT):1,'$L(FMT):1,1:0) S FMT="HR:MIN"
"RTN","TIULS",6,0)
 S X=$P(X,".",2),HR=$E(X,1,2)_$E("00",0,2-$L($E(X,1,2))),MIN=$E(X,3,4)_$E("00",0,2-$L($E(X,3,4))),SEC=$E(X,5,6)_$E("00",0,2-$L($E(X,5,6)))
"RTN","TIULS",7,0)
 F TIUI="HR","MIN","SEC" S:FMT[TIUI FMT=$P(FMT,TIUI)_@TIUI_$P(FMT,TIUI,2)
"RTN","TIULS",8,0)
 Q FMT
"RTN","TIULS",9,0)
DATE(X,FMT) ; Call with X=2910419.01 and FMT=Return Format of date ("MM/DD")
"RTN","TIULS",10,0)
 N AMTH,MM,CC,DD,YY,TIUI,TIUTMP
"RTN","TIULS",11,0)
 I +X'>0 S $P(TIUTMP," ",$L($G(FMT))+1)="",FMT=TIUTMP G QDATE
"RTN","TIULS",12,0)
 I $S('$D(FMT):1,'$L(FMT):1,1:0) S FMT="MM/DD/YY"
"RTN","TIULS",13,0)
 S MM=$E(X,4,5),DD=$E(X,6,7),YY=$E(X,2,3),CC=17+$E(X)
"RTN","TIULS",14,0)
 S:FMT["AMTH" AMTH=$P("JAN^FEB^MAR^APR^MAY^JUN^JUL^AUG^SEP^OCT^NOV^DEC","^",+MM)
"RTN","TIULS",15,0)
 F TIUI="AMTH","MM","DD","CC","YY" S:FMT[TIUI FMT=$P(FMT,TIUI)_@TIUI_$P(FMT,TIUI,2)
"RTN","TIULS",16,0)
 I FMT["HR" S FMT=$$TIME(X,FMT)
"RTN","TIULS",17,0)
QDATE Q FMT
"RTN","TIULS",18,0)
NAME(X,FMT) ; Call with X="LAST,FIRST MI", FMT=Return Format ("LAST, FI")
"RTN","TIULS",19,0)
 N TIULAST,TIULI,TIUFIRST,TIUFI,TIUMI,TIUI
"RTN","TIULS",20,0)
 I X']"" S FMT="" G NAMEX
"RTN","TIULS",21,0)
 I $S('$D(FMT):1,'$L(FMT):1,1:0) S FMT="LAST,FIRST"
"RTN","TIULS",22,0)
 S FMT=$$LOWER(FMT)
"RTN","TIULS",23,0)
 S TIULAST=$P(X,","),TIULI=$E(TIULAST),TIUFIRST=$P(X,",",2)
"RTN","TIULS",24,0)
 S TIUFI=$E(TIUFIRST)
"RTN","TIULS",25,0)
 S TIUMI=$S($P(TIUFIRST," ",2)'="NMI":$E($P(TIUFIRST," ",2)),1:"")
"RTN","TIULS",26,0)
 S TIUFIRST=$P(TIUFIRST," ")
"RTN","TIULS",27,0)
 F TIUI="last","li","first","fi","mi" I FMT[TIUI S FMT=$P(FMT,TIUI)_@("TIU"_$$UPPER(TIUI))_$P(FMT,TIUI,2)
"RTN","TIULS",28,0)
NAMEX Q FMT
"RTN","TIULS",29,0)
INAME(X) ; Call with X="FIRST MI[.] LAST[,M.D.]", RETURNS "LAST,FIRST MI"
"RTN","TIULS",30,0)
 N LAST,FIRST,MIDDLE,NAME,MI
"RTN","TIULS",31,0)
 I X'?1.A1" ".E S NAME=X G INAMEX
"RTN","TIULS",32,0)
 S NAME=$P(X,","),FIRST=$P(NAME," "),MIDDLE=$S($L(NAME," ")=3:$P(NAME," ",2),1:"")
"RTN","TIULS",33,0)
 S LAST=$P(NAME," ",$L(NAME," ")),MI=$S($L(MIDDLE):$E(MIDDLE),1:"")
"RTN","TIULS",34,0)
 S NAME=LAST_","_FIRST_$S($L(MI):" "_MI,1:"")
"RTN","TIULS",35,0)
INAMEX Q NAME
"RTN","TIULS",36,0)
WORD(X,FMT) ; Call with X=Word Processing array root, FMT=Wrap Width
"RTN","TIULS",37,0)
 N X,DIWL,DIWF,TIUI K ^UTILITY($J,"W")
"RTN","TIULS",38,0)
 S DIWL=2,DIWF="WRC"_FMT
"RTN","TIULS",39,0)
 S TIUI=0 F  S TIUI=$O(@X@(TIUI)) Q:TIUI'>0  S X=^(TIUI,0) D ^DIWP
"RTN","TIULS",40,0)
 D ^DIWW K ^UTILITY($J,"W")
"RTN","TIULS",41,0)
 Q ""
"RTN","TIULS",42,0)
UPPER(X) ; Convert lower case X to UPPER CASE
"RTN","TIULS",43,0)
 Q $TR(X,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
"RTN","TIULS",44,0)
LOWER(X) ; Convert UPPER CASE X to lower case
"RTN","TIULS",45,0)
 Q $TR(X,"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")
"RTN","TIULS",46,0)
MIXED(X) ; Return Mixed Case X
"RTN","TIULS",47,0)
 N TIUI,WORD,TMP
"RTN","TIULS",48,0)
 S TMP="" F TIUI=1:1:$L(X," ") S WORD=$$UPPER($E($P(X," ",TIUI)))_$$LOWER($E($P(X," ",TIUI),2,$L($P(X," ",TIUI)))),TMP=$S(TMP="":WORD,1:TMP_" "_WORD)
"RTN","TIULS",49,0)
 Q TMP
"RTN","TIULS",50,0)
STRIP(TEXT) ; Strips white space from text
"RTN","TIULS",51,0)
 N TIUTI,TIUX
"RTN","TIULS",52,0)
 ; First remove TABS
"RTN","TIULS",53,0)
 F TIUTI=1:1:$L(TEXT) S:$A(TEXT,TIUTI)=9 TEXT=$E(TEXT,1,(TIUTI-1))_" "_$E(TEXT,(TIUTI+1),$L(TEXT))
"RTN","TIULS",54,0)
 S TIUX="" F TIUTI=1:1:$L(TEXT," ") S:$A($P(TEXT," ",TIUTI))>0 TIUX=TIUX_$S(TIUTI=1:"",1:" ")_$P(TEXT," ",TIUTI)
"RTN","TIULS",55,0)
 S TEXT=TIUX S:$P(TEXT," ")']"" TEXT=$P(TEXT," ",2,$L(TEXT," "))
"RTN","TIULS",56,0)
 Q TEXT
"RTN","TIULS",57,0)
SIGNAME(TIUDA) ; Get/Return Signature Block Printed Name
"RTN","TIULS",58,0)
 Q $P($G(^VA(200,+TIUDA,20)),U,2)
"RTN","TIULS",59,0)
SIGTITL(TIUDA) ; Get/Return Signature Block Printed Name
"RTN","TIULS",60,0)
 Q $P($G(^VA(200,+TIUDA,20)),U,3)
"RTN","TIULS",61,0)
CENTER(X) ; Center X
"RTN","TIULS",62,0)
 N SP
"RTN","TIULS",63,0)
 S $P(SP," ",((IOM-$L(X))\2))=""
"RTN","TIULS",64,0)
 Q $G(SP)_X
"RTN","TIULS",65,0)
URGENCY(X) ; Input transform for urgency codes
"RTN","TIULS",66,0)
 Q $S($$UPPER(X)="STAT":"P",1:$E(X))
"RTN","TIULS",67,0)
FILL(X,Y,LEN) ; Append ", "_X to Y, unless Y would excede LEN
"RTN","TIULS",68,0)
 Q $S('$L(Y):X,($L(Y_$C(44)_" "_X)'>LEN):Y_$C(44)_" "_X,1:X)
"RTN","TIULS",69,0)
PARSE(X,Y) ; Parse string X, return array Y with list of words from X
"RTN","TIULS",70,0)
 N I,WORD
"RTN","TIULS",71,0)
 F I=1:1:$L(X," ") D
"RTN","TIULS",72,0)
 . S WORD=$P(X," ",I),WORD=$TR(WORD,".,!&?/|\{}[];:=+*^%$#@~`""><")
"RTN","TIULS",73,0)
 . S:WORD]"" Y(I)=$$UPPER(WORD)
"RTN","TIULS",74,0)
 Q
"RTN","TIULS",75,0)
HASNUM(X) ; Boolean - evaluates whether X contains a number
"RTN","TIULS",76,0)
 N I,Y F I=0:1:9 I X[I S Y=1
"RTN","TIULS",77,0)
 Q +$G(Y)
"RTN","TIULS",78,0)
WRAP(TEXT,LENGTH) ; Breaks text string into substrings of length LENGTH
"RTN","TIULS",79,0)
 N TIUI,TIUJ,LINE,TIUX,TIUX1,TIUX2,TIUY
"RTN","TIULS",80,0)
 I $G(TEXT)']"" Q ""
"RTN","TIULS",81,0)
 F TIUI=1:1 D  Q:TIUI=$L(TEXT," ")
"RTN","TIULS",82,0)
 . S TIUX=$P(TEXT," ",TIUI)
"RTN","TIULS",83,0)
 . I $L(TIUX)>LENGTH D
"RTN","TIULS",84,0)
 . . S TIUX1=$E(TIUX,1,LENGTH),TIUX2=$E(TIUX,LENGTH+1,$L(TIUX))
"RTN","TIULS",85,0)
 . . S $P(TEXT," ",TIUI)=TIUX1_" "_TIUX2
"RTN","TIULS",86,0)
 S LINE=1,TIUX(1)=$P(TEXT," ")
"RTN","TIULS",87,0)
 F TIUI=2:1 D  Q:TIUI'<$L(TEXT," ")
"RTN","TIULS",88,0)
 . S:$L($G(TIUX(LINE))_" "_$P(TEXT," ",TIUI))>LENGTH LINE=LINE+1,TIUY=1
"RTN","TIULS",89,0)
 . S TIUX(LINE)=$G(TIUX(LINE))_$S(+$G(TIUY):"",1:" ")_$P(TEXT," ",TIUI),TIUY=0
"RTN","TIULS",90,0)
 S TIUJ=0,TEXT="" F TIUI=1:1 S TIUJ=$O(TIUX(TIUJ)) Q:+TIUJ'>0  S TEXT=TEXT_$S(TIUI=1:"",1:"|")_TIUX(TIUJ)
"RTN","TIULS",91,0)
 Q TEXT
"RTN","TIULS1")
0^105^B2481
"RTN","TIULS1",1,0)
TIULS1 ; SLC/JER - More string functions
"RTN","TIULS1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULS1",3,0)
 Q
"RTN","TIULV")
0^106^B20771783
"RTN","TIULV",1,0)
TIULV ; SLC/JER - Visit/Movement related library ;2/15/95  10:25
"RTN","TIULV",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULV",3,0)
 ;;Text Integration Utilities;;
"RTN","TIULV",4,0)
PATPN(TIUY,DFN) ; Get minimum demographics for PN Print
"RTN","TIULV",5,0)
 N VADM,VAIP,VAIN,VA
"RTN","TIULV",6,0)
 D OERR^VADPT
"RTN","TIULV",7,0)
 S TIUY("PNMP")=$E($G(VADM(1)),1,30)
"RTN","TIULV",8,0)
 S TIUY("SSN")=$G(VA("PID"))
"RTN","TIULV",9,0)
 S TIUY("DOB")="DOB:"_$$DATE^TIULS(+$G(VADM(3)),"MM-DD-YY")
"RTN","TIULV",10,0)
 S TIUY("PH#")="Ph:"_$P($G(^DPT(+DFN,.13),"**UNKNOWN**"),U)
"RTN","TIULV",11,0)
 S TIUY("SITE")=$P($$SITE^VASITE,U,2)
"RTN","TIULV",12,0)
 S TIUY("LOCP")="Pt Loc: "_$S(VAIN(4)]"":$P(VAIN(4),U,2)_"  "_VAIN(5),1:"OUTPATIENT")
"RTN","TIULV",13,0)
 Q
"RTN","TIULV",14,0)
 ;
"RTN","TIULV",15,0)
PATVADPT(TIUY,DFN,TIUMVN,TIUVSTR,TIUSDC) ; Extract MAS data
"RTN","TIULV",16,0)
 N VA,VADM,VAEL,VAERR,VAIP,TIUI,TIUWARD,X,Y,TIUTYPE
"RTN","TIULV",17,0)
 D DEM^VADPT
"RTN","TIULV",18,0)
 S TIUY("PNM")=$G(VADM(1)),TIUY("SSN")=$G(VA("PID"))
"RTN","TIULV",19,0)
 S TIUY("AGE")=$G(VADM(4)),TIUY("PID")="("_$E(TIUY("PNM"))_VA("BID")_")"
"RTN","TIULV",20,0)
 S TIUY("DOB")=$$DATE^TIULS(+$G(VADM(3)),"MM-DD-YY")
"RTN","TIULV",21,0)
 S TIUY("PH#")=$P($G(^DPT(+DFN,.13),"**UNKNOWN**"),U)
"RTN","TIULV",22,0)
 S TIUY("SEX")=$G(VADM(5)),TIUY("RACE")=$G(VADM(8))
"RTN","TIULV",23,0)
 I +$G(TIUSDC) S TIUY("STOP")=$G(TIUSDC)
"RTN","TIULV",24,0)
 I +$G(TIUD13(0)) S TIUY("REFDT")=+$G(TIUD13(0))
"RTN","TIULV",25,0)
 I +$G(TIUMVN) D
"RTN","TIULV",26,0)
 . N VLOC,VDT,TIUDIV
"RTN","TIULV",27,0)
 . S VAIP("E")=TIUMVN D 52^VADPT
"RTN","TIULV",28,0)
 . S TIUI=$S(+$G(VAIP(17,1)):17,1:14)
"RTN","TIULV",29,0)
 . S TIUY("CLAIM")=$G(VAEL(7)),TIUY("PMD")=$G(VAIP(TIUI,5))
"RTN","TIULV",30,0)
 . S TIUY("AMD")=$G(VAIP(18)),TIUY("TS")=$G(VAIP(TIUI,6))
"RTN","TIULV",31,0)
 . S TIUY("SVC")=+$P($G(^DIC(45.7,+TIUY("TS"),0)),U,4)
"RTN","TIULV",32,0)
 . S TIUY("SVC")=TIUY("SVC")_U_$P($G(^DIC(49,+TIUY("SVC"),0)),U)
"RTN","TIULV",33,0)
 . S TIUY("WARD")=$G(VAIP(TIUI,4)),(TIUY("ADDT"),TIUY("EDT"))=$G(VAIP(3))
"RTN","TIULV",34,0)
 . S TIUY("ADDX")=$G(VAIP(9)),TIUY("LDT")=$G(VAIP(17,1))
"RTN","TIULV",35,0)
 . S TIUY("AD#")=+$G(VAIP(13)),TIUY("MTYPE")=$G(VAIP(TIUI,3))
"RTN","TIULV",36,0)
 . S TIUDIV=$P($G(^DIC(42,+TIUY("WARD"),0)),U,11)
"RTN","TIULV",37,0)
 . I +TIUDIV S TIUY("DIV")=TIUDIV_U_$P($G(^DG(40.8,+TIUDIV,0)),U)
"RTN","TIULV",38,0)
 . S VDT=+VAIP(3)
"RTN","TIULV",39,0)
 . S VLOC=$G(^DIC(42,+$P($G(VAIP(13,4)),U),44))
"RTN","TIULV",40,0)
 . S TIUY("VSTR")=VLOC_";"_+TIUY("EDT")_";H"
"RTN","TIULV",41,0)
 . S TIUY("VLOC")=VLOC_U_$P($G(^SC(VLOC,0)),U)
"RTN","TIULV",42,0)
 . S:'+$G(TIUY("LOC")) TIUY("LOC")=TIUY("VLOC")
"RTN","TIULV",43,0)
 I $G(TIUVSTR)]"" S TIUY("VSTR")=TIUVSTR D VSIT(.TIUY,TIUVSTR)
"RTN","TIULV",44,0)
 I '+$G(TIUMVN),'+$G(TIUVSTR) D CURRENT(.TIUY,DFN)
"RTN","TIULV",45,0)
 I +$$ISA^USRLM($S($D(TIUAUTH):+$G(TIUAUTH),1:DUZ),"PROVIDER") D
"RTN","TIULV",46,0)
 . S TIUY("SVC")=$P($G(^VA(200,+$S($D(TIUAUTH):+$G(TIUAUTH),1:DUZ),5)),U)
"RTN","TIULV",47,0)
 . S:+TIUY("SVC") TIUY("SVC")=TIUY("SVC")_U_$P(^DIC(49,+TIUY("SVC"),0),U)
"RTN","TIULV",48,0)
 I +$G(TIUY("VSTR")),(+$O(^TIU(8925,"AVSTRV",+DFN,$G(TIUY("VSTR")),0))>0) D
"RTN","TIULV",49,0)
 . N TIUVSIT S TIUVSIT=+$O(^TIU(8925,"AVSTRV",+DFN,$G(TIUY("VSTR")),0))
"RTN","TIULV",50,0)
 . I $P($G(^AUPNVSIT(+TIUVSIT,0)),U,5)'=DFN K ^TIU(8925,"AVSTRV",+DFN,$G(TIUY("VSTR")),TIUVSIT) Q
"RTN","TIULV",51,0)
 . S TIUY("VISIT")=+TIUVSIT_U_+$G(^AUPNVSIT(+TIUVSIT,0))
"RTN","TIULV",52,0)
 ; if pt an inpt + doc class is pn- default to current inpt loc
"RTN","TIULV",53,0)
 S TIUTYPE=$S(+$P($G(TIUTYP(1)),U,2)>0:$P($G(TIUTYP(1)),U,2),1:+$G(TIUTYP))
"RTN","TIULV",54,0)
 Q:+TIUTYPE'>0
"RTN","TIULV",55,0)
 I +$G(TIUMVN),$D(^DPT(DFN,.1)),+$$ISPN^TIULX(TIUTYPE) D
"RTN","TIULV",56,0)
 . I $D(VAIP(14,4)) S TIUY("LOC")=$G(^DIC(42,+VAIP(14,4),44))_U_$P(VAIP(14,4),U,2)
"RTN","TIULV",57,0)
 Q
"RTN","TIULV",58,0)
VSIT(TIUY,TIUVSTR) ; Get Visit related info
"RTN","TIULV",59,0)
 N DIC,DIQ,X,Y,DA,DR,VSIT,TIUCT,VAEL,VAERR
"RTN","TIULV",60,0)
 D ELIG^VADPT
"RTN","TIULV",61,0)
 I '$D(TIUY("EDT")) D
"RTN","TIULV",62,0)
 . S TIUY("EDT")=$P(TIUVSTR,";",2)_U_$$DATE^TIULS($P(TIUVSTR,";",2),"AMTH DD, CCYY@HR:MIN")
"RTN","TIULV",63,0)
 I '$D(TIUY("LDT")) D
"RTN","TIULV",64,0)
 S TIUY("LDT")=$G(TIUY("LDT"))
"RTN","TIULV",65,0)
 S TIUCT=$P(TIUVSTR,";",3)
"RTN","TIULV",66,0)
 I TIUCT]"" S TIUY("CAT")=TIUCT_U_$S(TIUCT="A":"AMBULATORY",TIUCT="I":"IN HOSPITAL",TIUCT="H":"HOSPITALIZATION",TIUCT="T":"TELEPHONE",1:"EVENT (HISTORICAL)")
"RTN","TIULV",67,0)
 I TIUCT="E",+$G(TIUVSTR)'>0 Q
"RTN","TIULV",68,0)
 S TIUY("LVL")=$G(TIUY("LVL"))
"RTN","TIULV",69,0)
 S TIUY("ELG")=$G(VAEL(1))
"RTN","TIULV",70,0)
 S TIUY("VLOC")=+$G(TIUVSTR)_U_$P($G(^SC(+$G(TIUVSTR),0)),U)
"RTN","TIULV",71,0)
 I $G(TIUY("LOC"))']"" S TIUY("LOC")=$S($L($G(TIUD12)):$P($G(TIUD12),U,5),+$G(TIUDA):+$P($G(^TIU(8925,+$G(TIUDA),12)),U,5),1:+TIUY("VLOC"))
"RTN","TIULV",72,0)
 S TIUY("LOC")=TIUY("LOC")_U_$P($G(^SC(+TIUY("LOC"),0)),U)
"RTN","TIULV",73,0)
 I '$D(TIUY("DIV")),+$G(TIUY("LOC")) D
"RTN","TIULV",74,0)
 . N TIUDIV,DIC,DR,DA,DIQ,X,Y
"RTN","TIULV",75,0)
 . S DIC=44,DIQ="TIUDIV",DIQ(0)="IE",DA=+TIUY("LOC"),DR="3.5" D EN^DIQ1
"RTN","TIULV",76,0)
 . I '+$G(TIUDIV(44,+DA,3.5,"I")) Q
"RTN","TIULV",77,0)
 . S TIUY("DIV")=TIUDIV(44,+DA,3.5,"I")_U_TIUDIV(44,+DA,3.5,"E")
"RTN","TIULV",78,0)
 I '$D(TIUY("DIV")),'+$G(TIUY("LOC")) D
"RTN","TIULV",79,0)
 . S TIUY("DIV")=+$O(^DG(40.8,"AD",+$G(DUZ(2)),0))
"RTN","TIULV",80,0)
 . S TIUY("DIV")=+TIUY("DIV")_U_$P($G(^DG(40.8,+$G(TIUY("DIV")),0)),U)
"RTN","TIULV",81,0)
 S TIUY("INS")=$G(TIUY("DIV"))
"RTN","TIULV",82,0)
 S TIUY("SC")=$G(TIUY("SC"))
"RTN","TIULV",83,0)
 Q
"RTN","TIULV",84,0)
CURRENT(TIUY,DFN) ; Get current INPATIENT data
"RTN","TIULV",85,0)
 N VAIN D INP^VADPT
"RTN","TIULV",86,0)
 S TIUY("AD#")=$G(VAIN(1)),TIUY("PMD")=$G(VAIN(2))
"RTN","TIULV",87,0)
 S TIUY("TS")=$G(VAIN(3)),TIUY("LOC")=$G(VAIN(4),"0^OUTPATIENT")
"RTN","TIULV",88,0)
 S TIUY("RB")=$G(VAIN(5))
"RTN","TIULV",89,0)
 I +TIUY("LOC") D
"RTN","TIULV",90,0)
 . N DIC,DIQ,DR,DA,TIUDIV,Y
"RTN","TIULV",91,0)
 . S DIC=42,DA=+TIUY("LOC"),DIQ="TIUDIV(",DIQ(0)="IE",DR=.015
"RTN","TIULV",92,0)
 . D EN^DIQ1
"RTN","TIULV",93,0)
 . S TIUY("DIV")=$G(TIUDIV(42,DA,.015,"I"))_U_$G(TIUDIV(42,DA,.015,"E"))
"RTN","TIULV",94,0)
 I '+$G(TIUY("DIV")) D
"RTN","TIULV",95,0)
 . S TIUY("DIV")=+$G(DUZ(2))_U_$P($G(^DIC(4,+$G(DUZ(2)),0)),U)
"RTN","TIULV",96,0)
 Q
"RTN","TIULX")
0^107^B12042405
"RTN","TIULX",1,0)
TIULX ; SLC/JER - Cross-reference library functions
"RTN","TIULX",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIULX",3,0)
ALOCP(DA) ; Should record be included in daily print queue by location?
"RTN","TIULX",4,0)
 ; Receives DA = record # in 8925
"RTN","TIULX",5,0)
 Q +$$ISPN(+$G(^TIU(8925,+DA,0)))
"RTN","TIULX",6,0)
APTP(DA) ; Should record be included in daily print queue by patient?
"RTN","TIULX",7,0)
 ; Receives DA = record # in 8925
"RTN","TIULX",8,0)
 Q +$$ISPN(+$G(^TIU(8925,+DA,0)))
"RTN","TIULX",9,0)
AAUP(DA) ; Should record be included in daily print queue by author?
"RTN","TIULX",10,0)
 ; Receives DA = record # in 8925
"RTN","TIULX",11,0)
 Q +$$ISPN(+$G(^TIU(8925,+DA,0)))
"RTN","TIULX",12,0)
BELONGS(TIUDA,CLASS) ; Evaluate whether a given document belongs to a
"RTN","TIULX",13,0)
 ;                 particular document class
"RTN","TIULX",14,0)
 N TIUY
"RTN","TIULX",15,0)
 I +$$ISADDNDM^TIULC1(TIUDA) S TIUDA=+$P($G(^TIU(8925,+TIUDA,0)),U,6)
"RTN","TIULX",16,0)
 S TIUY=+$$ISA(+$G(^TIU(8925,+TIUDA,0)),CLASS)
"RTN","TIULX",17,0)
 Q TIUY
"RTN","TIULX",18,0)
ISA(DA,CLASS) ; Evaluate whether a given document type is a member of a
"RTN","TIULX",19,0)
 ;         particular document class
"RTN","TIULX",20,0)
 ; Receives DA = record # in 8925.1, and
"RTN","TIULX",21,0)
 ;       CLASS = record # of class in 8925.1
"RTN","TIULX",22,0)
 N TIUI,TIUY S (TIUI,TIUY)=0
"RTN","TIULX",23,0)
 F  S TIUI=$O(^TIU(8925.1,"AD",DA,TIUI)) Q:+TIUI'>0!(TIUY=1)  D
"RTN","TIULX",24,0)
 . I TIUI=CLASS S TIUY=1 Q
"RTN","TIULX",25,0)
 . S TIUY=$$ISA(TIUI,CLASS)
"RTN","TIULX",26,0)
 Q TIUY
"RTN","TIULX",27,0)
ISPN(DA) ; Evaluate whether a given document is a Progress Note
"RTN","TIULX",28,0)
 ; Receives DA = record # in 8925.1
"RTN","TIULX",29,0)
 N TIUI,TIUY S (TIUI,TIUY)=0
"RTN","TIULX",30,0)
 F  S TIUI=$O(^TIU(8925.1,"AD",DA,TIUI)) Q:+TIUI'>0!(TIUY=1)  D
"RTN","TIULX",31,0)
 . I TIUI=3 S TIUY=1 Q
"RTN","TIULX",32,0)
 . S TIUY=$$ISPN(TIUI)
"RTN","TIULX",33,0)
 Q TIUY
"RTN","TIULX",34,0)
ISDS(DA) ; Evaluate whether a given document is a Discharge Summary
"RTN","TIULX",35,0)
 ; Receives DA = record # in 8925.1
"RTN","TIULX",36,0)
 N TIUI,TIUY S (TIUI,TIUY)=0
"RTN","TIULX",37,0)
 F  S TIUI=$O(^TIU(8925.1,"AD",DA,TIUI)) Q:+TIUI'>0!(TIUY=1)  D
"RTN","TIULX",38,0)
 . I TIUI=244 S TIUY=1 Q
"RTN","TIULX",39,0)
 . S TIUY=$$ISDS(TIUI)
"RTN","TIULX",40,0)
 Q TIUY
"RTN","TIULX",41,0)
TRNSFRM(RTYPE,FLD,X) ; Executes Transform code for a given header field
"RTN","TIULX",42,0)
 N XFORM
"RTN","TIULX",43,0)
 S FLD=$O(^TIU(8925.1,+RTYPE("TYPE"),"HEAD","D",+FLD,0))
"RTN","TIULX",44,0)
 I +FLD'>0 G TRNSFRMX
"RTN","TIULX",45,0)
 S XFORM=$G(^TIU(8925.1,+RTYPE("TYPE"),"HEAD",+FLD,1))
"RTN","TIULX",46,0)
 I XFORM']"" G TRNSFRMX
"RTN","TIULX",47,0)
 X XFORM
"RTN","TIULX",48,0)
TRNSFRMX Q X
"RTN","TIULX",49,0)
MENUS ; Evaluate/enforce user's menu display preference
"RTN","TIULX",50,0)
 N TIUI,TIUPREF S TIUPREF=$$PERSPRF^TIULE(DUZ),TIUI=0
"RTN","TIULX",51,0)
 F  S TIUI=$O(^DISV(DUZ,"VALMMENU",TIUI)) Q:+TIUI'>0  D
"RTN","TIULX",52,0)
 . I $P($G(^ORD(101,+TIUI,0)),U)["TIU" S ^DISV(DUZ,"VALMMENU",TIUI)=$S($P(TIUPREF,U,5)=0:0,1:1)
"RTN","TIULX",53,0)
 Q
"RTN","TIULX",54,0)
XTRASIGN(TIUY,TIUDA) ; Get list of extra signers for a document
"RTN","TIULX",55,0)
 N TIUI,TIUJ,TIUL,DA,DR,DIC,DIQ,TIUXTRA S (TIUI,TIUJ,TIUL)=0
"RTN","TIULX",56,0)
 S DIC="^TIU(8925.7,",DIQ="TIUXTRA"
"RTN","TIULX",57,0)
 F  S TIUI=$O(^TIU(8925.7,"B",TIUDA,TIUI)) Q:+TIUI'>0  D
"RTN","TIULX",58,0)
 . N TIUX,TIUSGNR
"RTN","TIULX",59,0)
 . S DA=TIUI,DR=".03;.04" D EN^DIQ1 Q:+$D(TIUXTRA)'>9
"RTN","TIULX",60,0)
 . I $L($G(TIUXTRA(8925.7,DA,.04))) Q
"RTN","TIULX",61,0)
 . S TIUJ=+$G(TIUJ)+1,TIUL=+$G(TIUL)+1
"RTN","TIULX",62,0)
 . S TIUSGNR=$G(TIUXTRA(8925.7,DA,.03))
"RTN","TIULX",63,0)
 . S TIUX=$$SETSTR^VALM1($G(TIUJ)_")  "_TIUSGNR,$G(TIUX),1,39)
"RTN","TIULX",64,0)
 . S TIUY(TIUL)=DA_U_TIUX
"RTN","TIULX",65,0)
 Q
"RTN","TIULX",66,0)
ASKSIGN(TIUY) ; Identify which Signature to edit
"RTN","TIULX",67,0)
 N I,L,Y
"RTN","TIULX",68,0)
 W !!,"Please Indicate Which Expected Signer to Change:",!
"RTN","TIULX",69,0)
 S (I,L,Y)=0 F  S I=$O(TIUY(I)) Q:+I'>0!+Y  D
"RTN","TIULX",70,0)
 . W:$P(TIUY(I),U)]"" !,$P(TIUY(I),U,2)
"RTN","TIULX",71,0)
 . I I#20=0 S Y=$P($$PICK(1,I,"Select Signer","NO"),U)
"RTN","TIULX",72,0)
 . S L=I
"RTN","TIULX",73,0)
 I L#20,'+Y S Y=$P($$PICK(1,L,"Select Signer","NO"),U)
"RTN","TIULX",74,0)
 I +Y,+$G(TIUY(+Y)) S Y=+$G(TIUY(+Y))
"RTN","TIULX",75,0)
 Q Y
"RTN","TIULX",76,0)
PICK(LOW,HIGH,PROMPT,TYPE) ; List selection
"RTN","TIULX",77,0)
 N X,Y S PROMPT=$G(PROMPT,"Select Item"),TYPE=$G(TYPE,"LO")
"RTN","TIULX",78,0)
 W !
"RTN","TIULX",79,0)
 S Y=$$READ^TIUU(TYPE_U_LOW_":"_HIGH,PROMPT)
"RTN","TIULX",80,0)
 W !
"RTN","TIULX",81,0)
 Q Y
"RTN","TIULX",82,0)
CWAD ; Entry action for CWAD protocol
"RTN","TIULX",83,0)
 N GMRPALG,GMRPCWAD,GMRPDFN,GMRPOPT,GMRPEN,GMRPAGE,GMRPCWAD,GMRPDOB
"RTN","TIULX",84,0)
 N GMRPLOC,GMRPRB,GMRPSSN
"RTN","TIULX",85,0)
 D FULL^VALM1
"RTN","TIULX",86,0)
 I '+$G(DFN),'+$G(ORVP) D  Q
"RTN","TIULX",87,0)
 . W !!,"No Patient Selected...",!
"RTN","TIULX",88,0)
 . I $$READ^TIUU("EA","Press RETURN to continue...") ; pause
"RTN","TIULX",89,0)
 . S VALMBCK="R"
"RTN","TIULX",90,0)
 D PAT^GMRPNOR1 Q:$D(GMRPQT)
"RTN","TIULX",91,0)
 S Y=GMRPDFN,GMRPOPT=1,GMRPEN=1 W !!,"** Current Patient:  "_$P(Y,U,2)
"RTN","TIULX",92,0)
 D ENPAT^GMRPNCW S VALMBCK="R"
"RTN","TIULX",93,0)
 Q
"RTN","TIUMOVE")
0^108^B12681817
"RTN","TIUMOVE",1,0)
TIUMOVE ; SLC/JER - Patient movement look-up ;10/26/95  21:17
"RTN","TIUMOVE",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUMOVE",3,0)
MAIN(TIUY,DFN,TIUSSN,TIUMDT,TIULDT,TIUMTYP,TIUDFLT,TIUMODE,TIULOC) ;
"RTN","TIUMOVE",4,0)
 ; Call with:     .TIUY - (by ref) array in which demographic, movement,
"RTN","TIUMOVE",5,0)
 ;                        & visit data are returned
"RTN","TIUMOVE",6,0)
 ;                [DFN] - patient file entry number
"RTN","TIUMOVE",7,0)
 ;             [TIUSSN] - patient SSN
"RTN","TIUMOVE",8,0)
 ;             [TIUMDT] - movement date
"RTN","TIUMOVE",9,0)
 ;             [TIULDT] - upper bound of date range
"RTN","TIUMOVE",10,0)
 ;            [TIUMTYP] - MAS Movement event type
"RTN","TIUMOVE",11,0)
 ;            [TIUDFLT] - Default movement (e.g., "LAST")
"RTN","TIUMOVE",12,0)
 ;            [TIUMODE] - mode flag 0 ==> Silent
"RTN","TIUMOVE",13,0)
 ;                                  1 ==> Interactive (default)
"RTN","TIUMOVE",14,0)
AGN ; Loop for handling repeated attempts
"RTN","TIUMOVE",15,0)
 N TIUI,TIUII,TIUER,TIUOK,TIUOUT,TIUX,TIUMTSTR,TIUMLST,TIUCNT,X
"RTN","TIUMOVE",16,0)
 S TIUMTYP=$S(+$G(TIUMTYP):+$G(TIUMTYP),1:1)
"RTN","TIUMOVE",17,0)
 S TIUMODE=$S($G(TIUMODE)]"":$G(TIUMODE),1:1)
"RTN","TIUMOVE",18,0)
 S TIUMDT=$S(+$G(TIUMDT):+$G(TIUMDT),1:2400101)
"RTN","TIUMOVE",19,0)
 S TIULDT=$S(+$G(TIULDT):+$G(TIULDT),1:+$$NOW^TIULC)
"RTN","TIUMOVE",20,0)
 S TIUMTSTR="ADMISSION^TRANSFER^DISCHARGE^CHECK-IN^CHECK-OUT^SPECIALTY CHANGE"
"RTN","TIUMOVE",21,0)
 S:+$G(DFN)'>0 DFN=+$$PATIENT^TIULA($G(TIUSSN)) I +DFN'>0 S TIUOUT=1 Q
"RTN","TIUMOVE",22,0)
 I '$D(^DGPM("ATID"_TIUMTYP,DFN)),+TIUMODE W !,"No ",$P(TIUMTSTR,U,TIUMTYP),"S on file.",! Q
"RTN","TIUMOVE",23,0)
 I +TIUMTYP=1,(TIUMODE=0),(TIUDFLT="CURRENT"),+$G(^DPT(DFN,.105)) S TIUX=+$G(^DPT(DFN,.105)) G VADPT
"RTN","TIUMOVE",24,0)
 D TGET(.TIUMLST,DFN,TIUMDT,TIULDT,TIUMTYP,.TIUCNT,TIUMODE)
"RTN","TIUMOVE",25,0)
 ; If call is silent, and multiple movements in result, then quit
"RTN","TIUMOVE",26,0)
 I '+TIUMODE,$S(+TIUCNT=1:1,TIUDFLT="LAST":1,1:0) S TIUX=$G(TIUMLST(1))
"RTN","TIUMOVE",27,0)
 I '+TIUMODE,(+TIUCNT>1),(+$G(TIUX)'>0) Q
"RTN","TIUMOVE",28,0)
 I '+TIUMODE,(+TIUCNT=0) Q
"RTN","TIUMOVE",29,0)
 I +TIUMODE D  I +TIUER G AGN
"RTN","TIUMOVE",30,0)
 . I +TIUCNT'>0 W !,"No ",$P(TIUMTSTR,U,TIUMTYP),"S within search parameters.",! Q
"RTN","TIUMOVE",31,0)
 . W !,"The following ",$P(TIUMTSTR,U,TIUMTYP)
"RTN","TIUMOVE",32,0)
 . W $S(+TIUCNT>1:"(S) are",1:" is")," available:"
"RTN","TIUMOVE",33,0)
 . S (TIUER,TIUOK,TIUI)=0
"RTN","TIUMOVE",34,0)
 . F  S TIUI=$O(TIUMLST(TIUI)) Q:+TIUI'>0!+TIUER!+TIUOK  D
"RTN","TIUMOVE",35,0)
 . . S TIUII=TIUI,TIUX=$P(TIUMLST(TIUI),"^",2,20)
"RTN","TIUMOVE",36,0)
 . . D WRITE I '(TIUI#5) D BREAK
"RTN","TIUMOVE",37,0)
 . Q:$D(TIUOUT)
"RTN","TIUMOVE",38,0)
 . I +TIUER S DFN=0 Q
"RTN","TIUMOVE",39,0)
 . I TIUII#5 D BREAK Q:$D(TIUOUT)
"RTN","TIUMOVE",40,0)
 . I +TIUER S DFN=0 Q
"RTN","TIUMOVE",41,0)
 . S TIUX=$G(TIUMLST(+TIUOK)),^DISV(DUZ,"DGPMEX",DFN)=+TIUX
"RTN","TIUMOVE",42,0)
 . W "  ",$$DATE^TIULS(+$P(TIUX,U,2),"AMTH DD CCYY@HR:MIN")
"RTN","TIUMOVE",43,0)
VADPT D PATVADPT^TIULV(.TIUY,DFN,+TIUX)
"RTN","TIUMOVE",44,0)
 Q
"RTN","TIUMOVE",45,0)
TGET(Y,DFN,MDT,LDT,MTYPE,C,MODE) ; Get list of movements
"RTN","TIUMOVE",46,0)
 N I,N,D S MDT=$G(MDT,9999999.9999999),MTYPE=$G(MTYPE,1),LDT=$G(LDT,0)
"RTN","TIUMOVE",47,0)
 I MDT'=9999999.9999999 S MDT=9999999.9999999-$$IDATE^TIULC(MDT)
"RTN","TIUMOVE",48,0)
 I LDT'=0 S LDT=9999999.9999999-$$IDATE^TIULC(LDT)
"RTN","TIUMOVE",49,0)
 S C=0,I=LDT F  S I=$O(^DGPM("ATID"_MTYPE,DFN,I)) Q:+I'>0!(+I>MDT)  D
"RTN","TIUMOVE",50,0)
 . S N=$O(^DGPM("ATID"_MTYPE,DFN,I,0)) Q:'$D(^DGPM(+N,0)) 
"RTN","TIUMOVE",51,0)
 . S D=^(0),C=C+1,Y(C)=N_"^"_D
"RTN","TIUMOVE",52,0)
 . I +$G(MODE) S Y("TIUMVD",+D)=N,Y("TIUMVDA",N)=C
"RTN","TIUMOVE",53,0)
 Q
"RTN","TIUMOVE",54,0)
BREAK ; Handle prompting
"RTN","TIUMOVE",55,0)
 W !,"CHOOSE 1-",TIUII W:$D(TIUMLST(TIUII+1)) !,"<RETURN> TO CONTINUE",!,"OR '^' TO QUIT" W ": " R X:DTIME
"RTN","TIUMOVE",56,0)
 I $S('$T!(X["^"):1,X=""&'$D(TIUMLST(TIUII+1)):1,1:0) S TIUER=1 Q
"RTN","TIUMOVE",57,0)
 I X="" Q
"RTN","TIUMOVE",58,0)
 I X=" ",$D(^DISV(DUZ,"DGPMEX",DFN)) S TIUX=^(DFN) I $D(TIUMLST("TIUMVDA",+TIUX)) S TIUOK=+$G(TIUMLST("TIUMVDA",+TIUX)) Q
"RTN","TIUMOVE",59,0)
 I X'=+X!'$D(TIUMLST(+X)) W !!,$C(7),"INVALID RESPONSE",! G BREAK
"RTN","TIUMOVE",60,0)
 S TIUOK=X
"RTN","TIUMOVE",61,0)
 Q
"RTN","TIUMOVE",62,0)
WRITE W !,$J(TIUI,4),">  ",$$DATE^TIULS(+TIUX,"AMTH DD, CCYY@HR:MIN"),?30,$S('$D(^DG(405.1,+$P(TIUX,"^",4),0)):"",$P(^(0),"^",7)]"":$P(^(0),"^",7),1:$E($P(^(0),"^",1),1,20))
"RTN","TIUMOVE",63,0)
 W ?55,"TO:  ",$S($D(^DIC(42,+$P(TIUX,"^",6),0)):$E($P(^(0),"^",1),1,18),1:"") I $P(TIUX,"^",18)=9 W !?23,"FROM:  ",$S($D(^DIC(4,+$P(TIUX,"^",5),0)):$P(^(0),"^",1),1:"")
"RTN","TIUMOVE",64,0)
 Q
"RTN","TIUNTEG")
0^109^B20065471
"RTN","TIUNTEG",1,0)
TIUNTEG ;ISC/XTSUMBLD KERNEL - Package checksum checker ;2970620.123138
"RTN","TIUNTEG",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUNTEG",3,0)
 ;;7.3;2970620.123138
"RTN","TIUNTEG",4,0)
 S XT4="I 1",X=$T(+3) W !!,"Checksum routine created on ",$P(X,";",4)," by KERNEL V",$P(X,";",3),!
"RTN","TIUNTEG",5,0)
CONT F XT1=1:1 S XT2=$T(ROU+XT1) Q:XT2=""  S X=$P(XT2," ",1),XT3=$P(XT2,";",3) X XT4 I $T W !,X X ^%ZOSF("TEST") S:'$T XT3=0 X:XT3 ^%ZOSF("RSUM") W ?10,$S('XT3:"Routine not in UCI",XT3'=Y:"Calculated "_$C(7)_Y_", off by "_(Y-XT3),1:"ok")
"RTN","TIUNTEG",6,0)
 G CONT^TIUNTEG0
"RTN","TIUNTEG",7,0)
 K %1,%2,%3,X,Y,XT1,XT2,XT3,XT4 Q
"RTN","TIUNTEG",8,0)
ONE S XT4="I $D(^UTILITY($J,X))",X=$T(+3) W !!,"Checksum routine created on ",$P(X,";",4)," by KERNEL V",$P(X,";",3),!
"RTN","TIUNTEG",9,0)
 W !,"Check a subset of routines:" K ^UTILITY($J) X ^%ZOSF("RSEL")
"RTN","TIUNTEG",10,0)
 W ! G CONT
"RTN","TIUNTEG",11,0)
ROU ;;
"RTN","TIUNTEG",12,0)
TIUADD ;;7939178
"RTN","TIUNTEG",13,0)
TIUALRT ;;7724825
"RTN","TIUNTEG",14,0)
TIUAPIOK ;;3873064
"RTN","TIUNTEG",15,0)
TIUAUDIT ;;1559021
"RTN","TIUNTEG",16,0)
TIUBPEDT ;;508305
"RTN","TIUNTEG",17,0)
TIUBR ;;16765412
"RTN","TIUNTEG",18,0)
TIUBRWS ;;1237447
"RTN","TIUNTEG",19,0)
TIUCHLP ;;5315023
"RTN","TIUNTEG",20,0)
TIUCNSLT ;;3238172
"RTN","TIUNTEG",21,0)
TIUDD ;;6376918
"RTN","TIUNTEG",22,0)
TIUDD0 ;;21480632
"RTN","TIUNTEG",23,0)
TIUDD01 ;;20076138
"RTN","TIUNTEG",24,0)
TIUDD8 ;;2520260
"RTN","TIUNTEG",25,0)
TIUDD98 ;;3931207
"RTN","TIUNTEG",26,0)
TIUDEV ;;663743
"RTN","TIUNTEG",27,0)
TIUDIRH ;;6774537
"RTN","TIUNTEG",28,0)
TIUDIRT ;;4819153
"RTN","TIUNTEG",29,0)
TIUDPEDT ;;536132
"RTN","TIUNTEG",30,0)
TIUDSCNV ;;16495251
"RTN","TIUNTEG",31,0)
TIUEDI1 ;;12991861
"RTN","TIUNTEG",32,0)
TIUEDI2 ;;2954081
"RTN","TIUNTEG",33,0)
TIUEDIH ;;2975
"RTN","TIUNTEG",34,0)
TIUEDIM ;;4154959
"RTN","TIUNTEG",35,0)
TIUEDIT ;;15928365
"RTN","TIUNTEG",36,0)
TIUEDITR ;;3870968
"RTN","TIUNTEG",37,0)
TIUELST ;;6772054
"RTN","TIUNTEG",38,0)
TIUENV ;;2421536
"RTN","TIUNTEG",39,0)
TIUEPRNT ;;2624119
"RTN","TIUNTEG",40,0)
TIUFA ;;7724519
"RTN","TIUNTEG",41,0)
TIUFA1 ;;8087670
"RTN","TIUNTEG",42,0)
TIUFC ;;16465224
"RTN","TIUNTEG",43,0)
TIUFC1 ;;19039288
"RTN","TIUNTEG",44,0)
TIUFD ;;13475272
"RTN","TIUNTEG",45,0)
TIUFD1 ;;7389491
"RTN","TIUNTEG",46,0)
TIUFD2 ;;9547245
"RTN","TIUNTEG",47,0)
TIUFD3 ;;14786473
"RTN","TIUNTEG",48,0)
TIUFD4 ;;10720702
"RTN","TIUNTEG",49,0)
TIUFH ;;4847823
"RTN","TIUNTEG",50,0)
TIUFH1 ;;8382917
"RTN","TIUNTEG",51,0)
TIUFHA ;;11209902
"RTN","TIUNTEG",52,0)
TIUFHA1 ;;16234597
"RTN","TIUNTEG",53,0)
TIUFHA2 ;;20808986
"RTN","TIUNTEG",54,0)
TIUFHA3 ;;15228639
"RTN","TIUNTEG",55,0)
TIUFHA4 ;;12217790
"RTN","TIUNTEG",56,0)
TIUFHA5 ;;12641740
"RTN","TIUNTEG",57,0)
TIUFHA6 ;;12852158
"RTN","TIUNTEG",58,0)
TIUFHLP ;;18092533
"RTN","TIUNTEG",59,0)
TIUFHLP1 ;;7453350
"RTN","TIUNTEG",60,0)
TIUFJ ;;1653738
"RTN","TIUNTEG",61,0)
TIUFL ;;8221970
"RTN","TIUNTEG",62,0)
TIUFL1 ;;9625979
"RTN","TIUNTEG",63,0)
TIUFLA ;;6405212
"RTN","TIUNTEG",64,0)
TIUFLA1 ;;2988344
"RTN","TIUNTEG",65,0)
TIUFLD ;;11125322
"RTN","TIUNTEG",66,0)
TIUFLD1 ;;4692678
"RTN","TIUNTEG",67,0)
TIUFLF ;;4692333
"RTN","TIUNTEG",68,0)
TIUFLF1 ;;16152310
"RTN","TIUNTEG",69,0)
TIUFLF2 ;;6745681
"RTN","TIUNTEG",70,0)
TIUFLF3 ;;15793790
"RTN","TIUNTEG",71,0)
TIUFLF4 ;;5459448
"RTN","TIUNTEG",72,0)
TIUFLF5 ;;11369224
"RTN","TIUNTEG",73,0)
TIUFLF6 ;;8814847
"RTN","TIUNTEG",74,0)
TIUFLF7 ;;9734560
"RTN","TIUNTEG",75,0)
TIUFLF8 ;;9404495
"RTN","TIUNTEG",76,0)
TIUFLJ ;;12909079
"RTN","TIUNTEG",77,0)
TIUFLJ1 ;;3627713
"RTN","TIUNTEG",78,0)
TIUFLLM ;;2495187
"RTN","TIUNTEG",79,0)
TIUFLLM1 ;;6144428
"RTN","TIUNTEG",80,0)
TIUFLLM2 ;;12502975
"RTN","TIUNTEG",81,0)
TIUFLLM3 ;;2548
"RTN","TIUNTEG",82,0)
TIUFLT ;;3650017
"RTN","TIUNTEG",83,0)
TIUFLX ;;12531676
"RTN","TIUNTEG",84,0)
TIUFPR ;;9166442
"RTN","TIUNTEG",85,0)
TIUFT ;;14588286
"RTN","TIUNTEG",86,0)
TIUFT1 ;;10470637
"RTN","TIUNTEG",87,0)
TIUFX ;;3844855
"RTN","TIUNTEG",88,0)
TIUFXHL1 ;;9104209
"RTN","TIUNTEG",89,0)
TIUFXHLX ;;18092984
"RTN","TIUNTEG",90,0)
TIUHELP ;;4390368
"RTN","TIUNTEG",91,0)
TIUIL ;;10707933
"RTN","TIUNTEG",92,0)
TIUIL1 ;;10268200
"RTN","TIUNTEG",93,0)
TIUIL10 ;;7628768
"RTN","TIUNTEG",94,0)
TIUIL2 ;;11877224
"RTN","TIUNTEG",95,0)
TIUIL3 ;;10819358
"RTN","TIUNTEG",96,0)
TIUIL4 ;;9431475
"RTN","TIUNTEG",97,0)
TIUIL5 ;;11262828
"RTN","TIUNTEG",98,0)
TIUIL6 ;;9326742
"RTN","TIUNTEG",99,0)
TIUIL7 ;;9797774
"RTN","TIUNTEG",100,0)
TIUIL8 ;;11200556
"RTN","TIUNTEG",101,0)
TIUIL9 ;;9274343
"RTN","TIUNTEG",102,0)
TIULA ;;9753874
"RTN","TIUNTEG",103,0)
TIULA1 ;;6870970
"RTN","TIUNTEG",104,0)
TIULA2 ;;11422552
"RTN","TIUNTEG",105,0)
TIULA3 ;;3916214
"RTN","TIUNTEG",106,0)
TIULA4 ;;4078327
"RTN","TIUNTEG",107,0)
TIULAB ;;2641708
"RTN","TIUNTEG",108,0)
TIULADR ;;929390
"RTN","TIUNTEG",109,0)
TIULAPI ;;2326288
"RTN","TIUNTEG",110,0)
TIULAPIC ;;1609587
"RTN","TIUNTEG",111,0)
TIULAPIS ;;2575326
"RTN","TIUNTEG",112,0)
TIULC ;;8062118
"RTN","TIUNTEG",113,0)
TIULC1 ;;5470005
"RTN","TIUNTEG",114,0)
TIULD ;;4208524
"RTN","TIUNTEG",115,0)
TIULE ;;1891756
"RTN","TIUNTEG",116,0)
TIULEXP ;;835975
"RTN","TIUNTEG",117,0)
TIULF ;;2643087
"RTN","TIUNTEG",118,0)
TIULG ;;2290558
"RTN","TIUNTEG",119,0)
TIULIP ;;1481077
"RTN","TIUNTEG",120,0)
TIULM ;;1683142
"RTN","TIUNTEG",121,0)
TIULMED ;;1603954
"RTN","TIUNTEG",122,0)
TIULO ;;10506939
"RTN","TIUNTEG",123,0)
TIULO1 ;;1280434
"RTN","TIUNTEG",124,0)
TIULP ;;5129626
"RTN","TIUNTEG",125,0)
TIULP1 ;;9230018
"RTN","TIUNTEG",126,0)
TIULQ ;;4047639
"RTN","TIUNTEG",127,0)
TIULQ2 ;;2252073
"RTN","TIUNTEG",128,0)
TIULS ;;6580172
"RTN","TIUNTEG",129,0)
TIULS1 ;;1692
"RTN","TIUNTEG",130,0)
TIULV ;;8064646
"RTN","TIUNTEG",131,0)
TIULX ;;3630728
"RTN","TIUNTEG",132,0)
TIUMOVE ;;6394806
"RTN","TIUNTEG",133,0)
TIUPD ;;7130073
"RTN","TIUNTEG",134,0)
TIUPEDSP ;;452634
"RTN","TIUNTEG",135,0)
TIUPEFIX ;;8681313
"RTN","TIUNTEG",136,0)
TIUPEVN1 ;;629456
"RTN","TIUNTEG",137,0)
TIUPEVNT ;;12440029
"RTN","TIUNTEG",138,0)
TIUPL ;;1185
"RTN","TIUNTEG",139,0)
TIUPLST ;;6597575
"RTN","TIUNTEG",140,0)
TIUPNAPI ;;2629902
"RTN","TIUNTEG",141,0)
TIUPNCV ;;11015132
"RTN","TIUNTEG",142,0)
TIUPNCV1 ;;4045073
"RTN","TIUNTEG",143,0)
TIUPNCV2 ;;9243409
"RTN","TIUNTEG",144,0)
TIUPNCV3 ;;6588806
"RTN","TIUNTEG",145,0)
TIUPNCV4 ;;7285743
"RTN","TIUNTEG",146,0)
TIUPNCV5 ;;6195313
"RTN","TIUNTEG",147,0)
TIUPNCV6 ;;4479485
"RTN","TIUNTEG",148,0)
TIUPNCV7 ;;5344754
"RTN","TIUNTEG",149,0)
TIUPNCV8 ;;6071067
"RTN","TIUNTEG",150,0)
TIUPNCVX ;;6339101
"RTN","TIUNTEG",151,0)
TIUPOST ;;1636376
"RTN","TIUNTEG",152,0)
TIUPRD ;;3348806
"RTN","TIUNTEG",153,0)
TIUPRDS ;;2346057
"RTN","TIUNTEG",154,0)
TIUPRDS1 ;;16479696
"RTN","TIUNTEG",155,0)
TIUPRDS2 ;;4555312
"RTN","TIUNTEG",156,0)
TIUPREF ;;449069
"RTN","TIUNTEG",157,0)
TIUPRPN ;;1209356
"RTN","TIUNTEG",158,0)
TIUPRPN1 ;;14535169
"RTN","TIUNTEG",159,0)
TIUPRPN2 ;;3472106
"RTN","TIUNTEG",160,0)
TIUPRPN3 ;;6243546
"RTN","TIUNTEG",161,0)
TIUPRPN4 ;;3435921
"RTN","TIUNTEG",162,0)
TIUPRPN5 ;;8277668
"RTN","TIUNTEG",163,0)
TIUPRPN6 ;;4171463
"RTN","TIUNTEG",164,0)
TIUPRPN7 ;;9719095
"RTN","TIUNTEG",165,0)
TIUPUTC ;;11775034
"RTN","TIUNTEG",166,0)
TIUPUTD ;;6772714
"RTN","TIUNTEG",167,0)
TIUPUTPN ;;6063243
"RTN","TIUNTEG",168,0)
TIUPUTU ;;5268373
"RTN","TIUNTEG",169,0)
TIUPXAP1 ;;5360722
"RTN","TIUNTEG",170,0)
TIUPXAP2 ;;2016671
"RTN","TIUNTEG",171,0)
TIUPXAPC ;;6952381
"RTN","TIUNTEG",172,0)
TIUPXAPI ;;11865817
"RTN","TIUNTEG",173,0)
TIUPXAPS ;;2373559
"RTN","TIUNTEG0")
0^110^B5211638
"RTN","TIUNTEG0",1,0)
TIUNTEG0 ;ISC/XTSUMBLD KERNEL - Package checksum checker ;2970620.123138
"RTN","TIUNTEG0",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUNTEG0",3,0)
 ;;7.3;2970620.123138
"RTN","TIUNTEG0",4,0)
 S XT4="I 1",X=$T(+3) W !!,"Checksum routine created on ",$P(X,";",4)," by KERNEL V",$P(X,";",3),!
"RTN","TIUNTEG0",5,0)
CONT F XT1=1:1 S XT2=$T(ROU+XT1) Q:XT2=""  S X=$P(XT2," ",1),XT3=$P(XT2,";",3) X XT4 I $T W !,X X ^%ZOSF("TEST") S:'$T XT3=0 X:XT3 ^%ZOSF("RSUM") W ?10,$S('XT3:"Routine not in UCI",XT3'=Y:"Calculated "_$C(7)_Y_", off by "_(Y-XT3),1:"ok")
"RTN","TIUNTEG0",6,0)
 ;
"RTN","TIUNTEG0",7,0)
 K %1,%2,%3,X,Y,XT1,XT2,XT3,XT4 Q
"RTN","TIUNTEG0",8,0)
ONE S XT4="I $D(^UTILITY($J,X))",X=$T(+3) W !!,"Checksum routine created on ",$P(X,";",4)," by KERNEL V",$P(X,";",3),!
"RTN","TIUNTEG0",9,0)
 W !,"Check a subset of routines:" K ^UTILITY($J) X ^%ZOSF("RSEL")
"RTN","TIUNTEG0",10,0)
 W ! G CONT
"RTN","TIUNTEG0",11,0)
ROU ;;
"RTN","TIUNTEG0",12,0)
TIUR ;;18491089
"RTN","TIUNTEG0",13,0)
TIURA ;;15894554
"RTN","TIUNTEG0",14,0)
TIURA1 ;;8079265
"RTN","TIUNTEG0",15,0)
TIURB ;;17660500
"RTN","TIUNTEG0",16,0)
TIURB1 ;;2007802
"RTN","TIUNTEG0",17,0)
TIURC ;;15436202
"RTN","TIUNTEG0",18,0)
TIURD ;;12759625
"RTN","TIUNTEG0",19,0)
TIURD1 ;;20613578
"RTN","TIUNTEG0",20,0)
TIURE ;;6411729
"RTN","TIUNTEG0",21,0)
TIURH ;;2620835
"RTN","TIUNTEG0",22,0)
TIURL ;;6271727
"RTN","TIUNTEG0",23,0)
TIURM ;;13332904
"RTN","TIUNTEG0",24,0)
TIURMH ;;1762939
"RTN","TIUNTEG0",25,0)
TIUROR ;;15584009
"RTN","TIUNTEG0",26,0)
TIURORL ;;1302683
"RTN","TIUNTEG0",27,0)
TIURP ;;4234242
"RTN","TIUNTEG0",28,0)
TIURPN ;;5800803
"RTN","TIUNTEG0",29,0)
TIURPTTL ;;14124768
"RTN","TIUNTEG0",30,0)
TIURS ;;9109901
"RTN","TIUNTEG0",31,0)
TIURS1 ;;3205877
"RTN","TIUNTEG0",32,0)
TIURT ;;12660030
"RTN","TIUNTEG0",33,0)
TIURTITH ;;798286
"RTN","TIUNTEG0",34,0)
TIURTITL ;;14031521
"RTN","TIUNTEG0",35,0)
TIUSRV ;;15487391
"RTN","TIUNTEG0",36,0)
TIUSRV1 ;;3548089
"RTN","TIUNTEG0",37,0)
TIUSRVA ;;1191647
"RTN","TIUNTEG0",38,0)
TIUSRVD ;;4955592
"RTN","TIUNTEG0",39,0)
TIUSRVE ;;4728940
"RTN","TIUNTEG0",40,0)
TIUSRVG ;;9073508
"RTN","TIUNTEG0",41,0)
TIUSRVL ;;9702077
"RTN","TIUNTEG0",42,0)
TIUSRVL1 ;;6356984
"RTN","TIUNTEG0",43,0)
TIUSRVLC ;;4798597
"RTN","TIUNTEG0",44,0)
TIUSRVLL ;;6543081
"RTN","TIUNTEG0",45,0)
TIUSRVLO ;;8206046
"RTN","TIUNTEG0",46,0)
TIUSRVLV ;;1280644
"RTN","TIUNTEG0",47,0)
TIUSRVP ;;8220630
"RTN","TIUNTEG0",48,0)
TIUSRVP1 ;;1577145
"RTN","TIUNTEG0",49,0)
TIUSRVR ;;2608190
"RTN","TIUNTEG0",50,0)
TIUSRVR1 ;;15287016
"RTN","TIUNTEG0",51,0)
TIUT ;;6965722
"RTN","TIUNTEG0",52,0)
TIUTHLP ;;3374350
"RTN","TIUNTEG0",53,0)
TIUTSK ;;4204167
"RTN","TIUNTEG0",54,0)
TIUU ;;2227618
"RTN","TIUNTEG0",55,0)
TIUUPEDT ;;3153456
"RTN","TIUNTEG0",56,0)
TIUUPLD ;;6318141
"RTN","TIUNTEG0",57,0)
TIUVISIT ;;9831934
"RTN","TIUNTEG0",58,0)
TIUVSIT ;;16596741
"RTN","TIUPD")
0^112^B20999059
"RTN","TIUPD",1,0)
TIUPD ; SLC/JER - Background Print Driver ;1/24/95  15:49
"RTN","TIUPD",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPD",3,0)
MAIN(DA,TIUACT) ; Control Branching
"RTN","TIUPD",4,0)
 ;  TIUACT=R ==> Release from transcription,
"RTN","TIUPD",5,0)
 ;         V ==> Verified by MAS,
"RTN","TIUPD",6,0)
 ;         A ==> AMENDED by Privacy Act Officer
"RTN","TIUPD",7,0)
 ;         S ==> On completion by electronic signature by appropriate
"RTN","TIUPD",8,0)
 ;               person (i.e., author or expected cosigner)
"RTN","TIUPD",9,0)
 ; TIUSTAT=1 ==> STAT urgency,
"RTN","TIUPD",10,0)
 ;   TIURP=routine print event(s)
"RTN","TIUPD",11,0)
 ;   TIUSP=stat print event(s)
"RTN","TIUPD",12,0)
 N TIUSTAT,TIURP,TIUSP,TIUDPARM
"RTN","TIUPD",13,0)
 D DOCPRM^TIULC1(+$G(^TIU(8925,+DA,0)),.TIUDPARM,+DA)
"RTN","TIUPD",14,0)
 Q:+$P($G(TIUDPARM(0)),U,8)>0!(+$G(TIUDPARM(0))'>0)
"RTN","TIUPD",15,0)
 Q:$G(TIUACT)=""!("ARVS"'[TIUACT)!(+$G(DA)'>0)
"RTN","TIUPD",16,0)
 S:$P($G(^TIU(8925,+DA,0)),U,9)="P" TIUSTAT=1
"RTN","TIUPD",17,0)
 S TIURP=$P($G(TIUDPARM(0)),U,6),TIUSP=$P($G(TIUDPARM(0)),U,7)
"RTN","TIUPD",18,0)
 I TIUACT="S" D TSKPRINT(DA,2,"",.TIUDPARM) Q
"RTN","TIUPD",19,0)
 I TIUACT="A" D TSKPRINT(DA,1,"",.TIUDPARM) Q
"RTN","TIUPD",20,0)
 I TIUACT="V",TIUSP]"","VB"[TIUSP D TSKPRINT(DA,1,"",.TIUDPARM) Q
"RTN","TIUPD",21,0)
 I +$G(TIUSTAT) D  ;STAT Document processing
"RTN","TIUPD",22,0)
 . I TIUACT="R",TIUSP]"","RB"[TIUSP D TSKPRINT(DA,1,TIUSTAT,.TIUDPARM) Q
"RTN","TIUPD",23,0)
 . I TIUACT="V",TIUSP]"","VB"[TIUSP D TSKPRINT(DA,1,"",.TIUDPARM) Q
"RTN","TIUPD",24,0)
 E  D  ;Non-stat Document processing
"RTN","TIUPD",25,0)
 . I TIUACT="R",TIURP]"","RB"[TIURP D TSKPRINT(DA,1,"",.TIUDPARM) Q
"RTN","TIUPD",26,0)
 . I TIUACT="V",TIURP]"","VB"[TIURP D TSKPRINT(DA,1,"",.TIUDPARM) Q
"RTN","TIUPD",27,0)
 Q
"RTN","TIUPD",28,0)
RPC(TIUY,TIUDA,TIUIO,TIUFLAG) ; Remote Procedure to print a record
"RTN","TIUPD",29,0)
 ;TIUFLAG > 1 Chart Copy, TIUFLAG = 2 Electronically signed Chart Copy
"RTN","TIUPD",30,0)
 N DFN,TIUD0,TIUX,ZTIO,ZTDTH,ZTRTN,ZTSK,ZTDESC,TIUTYPE,TIUPMTHD,TIUTNM
"RTN","TIUPD",31,0)
 N TIUDATE,TIUPFHDR,TIUPFNBR,TIUPGRP,TIUD13,TIUD15 K ^TMP("TIUPR",$J)
"RTN","TIUPD",32,0)
 I '$D(^TIU(8925,+$G(TIUDA),0)) S TIUY="1^No such record in TIU" Q
"RTN","TIUPD",33,0)
 I $G(TIUIO)']"" S TIUY="1^No device selected" Q
"RTN","TIUPD",34,0)
 ; Get Print Method for the document
"RTN","TIUPD",35,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD13=$G(^TIU(8925,+TIUDA,13))
"RTN","TIUPD",36,0)
 S TIUD15=$G(^TIU(8925,+TIUDA,15)),TIUTYPE=+TIUD0,TIUFLAG=+$G(TIUFLAG)
"RTN","TIUPD",37,0)
 S TIUDATE=$S(+TIUD15>0:+TIUD15,+TIUD13>0:+TIUD13,1:+$G(DT))
"RTN","TIUPD",38,0)
 I '+TIUTYPE Q
"RTN","TIUPD",39,0)
 S DFN=+$P(TIUD0,U,2)
"RTN","TIUPD",40,0)
 S TIUTNM=$$PNAME^TIULC1(+TIUTYPE)
"RTN","TIUPD",41,0)
 S TIUPMTHD=$$PRNTMTHD^TIULG(+TIUTYPE)
"RTN","TIUPD",42,0)
 S TIUPGRP=$$PRNTGRP^TIULG(+TIUTYPE)
"RTN","TIUPD",43,0)
 S TIUPFHDR=$$PRNTHDR^TIULG(+TIUTYPE)
"RTN","TIUPD",44,0)
 S TIUPFNBR=$$PRNTNBR^TIULG(+TIUTYPE)
"RTN","TIUPD",45,0)
 I $G(TIUPMTHD)']"",+$$ISADDNDM^TIULC1(TIUDA) D
"RTN","TIUPD",46,0)
 . N TIUDTYP S TIUDTYP=+$G(^TIU(8925,+$P($G(^TIU(8925,+TIUDA,0)),U,6),0))
"RTN","TIUPD",47,0)
 . I +TIUDTYP D
"RTN","TIUPD",48,0)
 . . S TIUPMTHD=$$PRNTMTHD^TIULG(+TIUDTYP)
"RTN","TIUPD",49,0)
 . . S TIUPGRP=$$PRNTGRP^TIULG(+TIUDTYP)
"RTN","TIUPD",50,0)
 . . S TIUPFHDR=$$PRNTHDR^TIULG(+TIUDTYP)
"RTN","TIUPD",51,0)
 . . S TIUPFNBR=$$PRNTNBR^TIULG(+TIUDTYP)
"RTN","TIUPD",52,0)
 . . S TIUDA=+$P($G(^TIU(8925,+TIUDA,0)),U,6)
"RTN","TIUPD",53,0)
 I $G(TIUPMTHD)']"" S TIUY="1^No Print Method Defined" Q
"RTN","TIUPD",54,0)
 S ZTIO=TIUIO,ZTDTH=$H
"RTN","TIUPD",55,0)
 S ZTDESC=$S(+TIUFLAG:"CHART",1:"WORK")_" copy of "_$$UPPER^TIULS(TIUTNM)
"RTN","TIUPD",56,0)
 S ZTRTN=$P(TIUPMTHD," ",2),ZTSAVE("^TMP(""TIUPR"",$J,")=""
"RTN","TIUPD",57,0)
 S ZTSAVE("TIUFLAG")="",ZTSAVE("TIUPRM*")="",ZTSAVE("DUZ(")=""
"RTN","TIUPD",58,0)
 I $G(TIUPMTHD)]"",+$G(TIUPGRP),($G(TIUPFHDR)]""),($G(TIUPFNBR)]"") D
"RTN","TIUPD",59,0)
 . S ^TMP("TIUPR",$J,$G(TIUPGRP)_"$"_$G(TIUPFHDR)_";"_DFN,1,TIUDA)=$G(TIUPFNBR)
"RTN","TIUPD",60,0)
 E  S ^TMP("TIUPR",$J,DFN,1,TIUDA)=""
"RTN","TIUPD",61,0)
 D ^%ZTLOAD K ^TMP("TIUPR",$J,+$P(TIUD0,U,2),TIUDATE,TIUDA)
"RTN","TIUPD",62,0)
 I $D(ZTSK) S TIUY="0^"_$S(+$G(TIUFLAG):"Chart",1:"Draft")_" copy queued"
"RTN","TIUPD",63,0)
 E  S TIUY="1^Task Rejected"
"RTN","TIUPD",64,0)
 Q
"RTN","TIUPD",65,0)
TSKPRINT(DA,TIUFLAG,TIUSTAT,TIUDPARM) ;Set up task and do a queued print
"RTN","TIUPD",66,0)
 ;TIUFLAG > 1 Chart Copy, TIUFLAG = 2 Electronically signed Chart Copy
"RTN","TIUPD",67,0)
 ;TIUSTAT > 1 Stat printed at Release, check for Stat Chart Copy Printer
"RTN","TIUPD",68,0)
 N TIUD0,TIUDA,TIUX,ZTIO,ZTDTH,ZTRTN,ZTSK,ZTDESC,TIUTYPE,TIUPMTHD,TIUTNM
"RTN","TIUPD",69,0)
 N TIUDATE,TIUPFHDR,TIUPFNBR,TIUD13,TIUD15 K ^TMP("TIUPR",$J)
"RTN","TIUPD",70,0)
 I '$D(^TIU(8925,+$G(DA),0)) Q
"RTN","TIUPD",71,0)
 ; Get Print Method for the document
"RTN","TIUPD",72,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD13=$G(^TIU(8925,+DA,13))
"RTN","TIUPD",73,0)
 S TIUD15=$G(^TIU(8925,+DA,15)),TIUTYPE=+TIUD0
"RTN","TIUPD",74,0)
 S TIUDATE=$S(+TIUD15>0:+TIUD15,+TIUD13>0:+TIUD13,1:+$G(DT))
"RTN","TIUPD",75,0)
 I '+TIUTYPE Q
"RTN","TIUPD",76,0)
 S TIUTNM=$$PNAME^TIULC1(+TIUTYPE)
"RTN","TIUPD",77,0)
 S TIUPMTHD=$P($$PRNTMTHD^TIULG(+TIUTYPE)," ",2)
"RTN","TIUPD",78,0)
 S TIUPFHDR=$$PRNTHDR^TIULG(+TIUTYPE)
"RTN","TIUPD",79,0)
 S TIUPFNBR=$$PRNTNBR^TIULG(+TIUTYPE)
"RTN","TIUPD",80,0)
 I TIUPMTHD']"" Q
"RTN","TIUPD",81,0)
 S ZTIO=$$GETDEV(DA,.TIUDPARM,+$G(TIUSTAT)),ZTDTH=$H
"RTN","TIUPD",82,0)
 I ZTIO']"" K ^TMP("TIUPR",$J) Q
"RTN","TIUPD",83,0)
 S ZTDESC="CHART COPY OF "_$$UPPER^TIULS(TIUTNM)
"RTN","TIUPD",84,0)
 S ZTRTN=TIUPMTHD,ZTSAVE("^TMP(""TIUPR"",$J,")="",ZTSAVE("TIUFLAG")=""
"RTN","TIUPD",85,0)
 S ZTSAVE("TIUPRM*")="",ZTSAVE("DUZ(")=""
"RTN","TIUPD",86,0)
 S ^TMP("TIUPR",$J,+$P(TIUD0,U,2),TIUDATE,DA)=""
"RTN","TIUPD",87,0)
 D ^%ZTLOAD K ^TMP("TIUPR",$J,+$P(TIUD0,U,2),TIUDATE,DA)
"RTN","TIUPD",88,0)
 I $D(ZTSK),'$D(XWBOS) W !,$S(+$G(TIUFLAG):"Chart",1:"Draft")," copy queued."
"RTN","TIUPD",89,0)
 Q
"RTN","TIUPD",90,0)
GETDEV(DA,TIUDPARM,TIUSTAT) ; Get Chart copy print device name
"RTN","TIUPD",91,0)
 N DIC,DIQ,DR,X,Y,TIUDPDA,TIUDIV,TIUDEV,TIUI,TIU,TIUY
"RTN","TIUPD",92,0)
 D GETTIU^TIULD(.TIU,+DA)
"RTN","TIUPD",93,0)
 S TIUDPDA=+$O(^TIU(8925.95,"B",+$G(TIUDPARM(0)),0)) I '+TIUDPDA G GETDX
"RTN","TIUPD",94,0)
 S TIUDIV=+$O(^TIU(8925.95,+TIUDPDA,2,"B",+TIU("DIV"),0))
"RTN","TIUPD",95,0)
 I +TIUDIV>0 D
"RTN","TIUPD",96,0)
 . S DIC="^TIU(8925.95,"_TIUDPDA_",2,",DA=+TIUDIV
"RTN","TIUPD",97,0)
 . S DIQ="TIUDEV",DR=".02;.03" D EN^DIQ1
"RTN","TIUPD",98,0)
 . I +$G(TIUSTAT),($G(TIUDEV(8925.952,+DA,.03))]"") S TIUY=$G(TIUDEV(8925.952,+DA,.03))
"RTN","TIUPD",99,0)
 . E  S TIUY=$G(TIUDEV(8925.952,+DA,.02))
"RTN","TIUPD",100,0)
GETDX Q $G(TIUY)
"RTN","TIUPEDSP")
0^113^B681398
"RTN","TIUPEDSP",1,0)
TIUPEDSP ;SLC/JER - Display Filing Event ;12/13/94  17:58
"RTN","TIUPEDSP",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPEDSP",3,0)
 ;;Text Integration Utility;;
"RTN","TIUPEDSP",4,0)
EN ; Option entry
"RTN","TIUPEDSP",5,0)
 K ^TMP("TIUEVENT",$J) N TIU
"RTN","TIUPEDSP",6,0)
 D EN^VALM("TIU DISPLAY FILING EVENT")
"RTN","TIUPEDSP",7,0)
 K ^TMP("TIUEVENT",$J)
"RTN","TIUPEDSP",8,0)
 Q
"RTN","TIUPEDSP",9,0)
MAIN ; Control branching
"RTN","TIUPEDSP",10,0)
 D GET^TIUSRVE(TIUDA)
"RTN","TIUPEDSP",11,0)
 Q
"RTN","TIUPEDSP",12,0)
HDR ; Build Header
"RTN","TIUPEDSP",13,0)
 N TIUETYP S TIUETYP=$G(^TMP("TIUEVENT",$J,0),"Filing Event")
"RTN","TIUPEDSP",14,0)
 S VALMHDR(1)=$$CENTER^TIULS($$TITLE^TIUU(TIUETYP))
"RTN","TIUPEDSP",15,0)
 Q
"RTN","TIUPEDSP",16,0)
CLEAN ; Clean up your mess!
"RTN","TIUPEDSP",17,0)
 K ^TMP("TIUEVENT",$J) D CLEAN^VALM10 K VALMY
"RTN","TIUPEDSP",18,0)
 Q
"RTN","TIUPEFIX")
0^226^B34384563
"RTN","TIUPEFIX",1,0)
TIUPEFIX ; SLC/JER - Resolve Filing errors for TIU Documents
"RTN","TIUPEFIX",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPEFIX",3,0)
MAKE(SUCCESS,DFN,TITLE,TIU,TIUBUF) ; File new TIU Document
"RTN","TIUPEFIX",4,0)
 ; SUCCESS = (by ref) SUCCESS Returns TIU DOCUMENT # (PTR to 8925)
"RTN","TIUPEFIX",5,0)
 ;         = 0^Explanatory message if no SUCCESS
"RTN","TIUPEFIX",6,0)
 ; DFN     = Patient (#2)
"RTN","TIUPEFIX",7,0)
 ; TITLE   = Pointer to TIU Document Definition (#8925.1)
"RTN","TIUPEFIX",8,0)
 ; TIU     = Array of demographic and visit attributes
"RTN","TIUPEFIX",9,0)
 ; TIUBUF  = Record number (ien) of entry in TIU Buffer file (#8925.2)
"RTN","TIUPEFIX",10,0)
 ;
"RTN","TIUPEFIX",11,0)
 ; -- first, get TIU Document record --
"RTN","TIUPEFIX",12,0)
 ;
"RTN","TIUPEFIX",13,0)
 N TIUDA,LDT,NEWREC,TIUX,TIUTYP,TIUDPRM,HAPPY,TIUCLASS,TIUDTYP,TIUPOST
"RTN","TIUPEFIX",14,0)
 N TIUDFLT
"RTN","TIUPEFIX",15,0)
 S SUCCESS=0 ; Initialize SUCCESS to false
"RTN","TIUPEFIX",16,0)
 I $S($D(TIU)'>9:1,+$G(DFN)'>0:1,+$G(TIUTYPE)'>0:1,1:0) S SUCCESS="0^"_$$EZBLD^DIALOG(89250001) Q
"RTN","TIUPEFIX",17,0)
 ; If target file is not 8925 QUIT
"RTN","TIUPEFIX",18,0)
 I +$G(^TIU(8925.1,+TIUTYPE,1))'=8925 Q
"RTN","TIUPEFIX",19,0)
 S TIUDTYP=$P($G(^TIU(8925.1,+TIUTYPE,0)),U,4)
"RTN","TIUPEFIX",20,0)
 S TIUCLASS=$S(TIUDTYP="CL":+TIUTYPE,1:38)
"RTN","TIUPEFIX",21,0)
 S TIUDFLT=$S(TIUCLASS'=TIUTYPE:TIUTYPE,1:"")
"RTN","TIUPEFIX",22,0)
 I +$G(TITLE)'>0 S TITLE=$$ASKTITLE^TIULA3(TIUCLASS,TIUDFLT)
"RTN","TIUPEFIX",23,0)
 Q:+TITLE'>0
"RTN","TIUPEFIX",24,0)
 S TIUTYP=TITLE,TIUTYP(1)=1_U_TITLE
"RTN","TIUPEFIX",25,0)
 D DOCPRM^TIULC1(TITLE,.TIUDPRM)
"RTN","TIUPEFIX",26,0)
 S TIUDA=$$GETREC^TIUEDI1(DFN,.TIU,1,.NEWREC,.TIUDPRM)
"RTN","TIUPEFIX",27,0)
 I +TIUDA'>0 S SUCCESS="0^"_$$EZBLD^DIALOG(89250002) Q
"RTN","TIUPEFIX",28,0)
 I +$$CANEDIT^TIUPUTU(TIUDA)'>0 D  G MAKEX
"RTN","TIUPEFIX",29,0)
 . D MAKEADD(.TIUADD,+TIUDA,TIUBUF) S SUCCESS=TIUADD
"RTN","TIUPEFIX",30,0)
 S SUCCESS=1
"RTN","TIUPEFIX",31,0)
 ;
"RTN","TIUPEFIX",32,0)
 ; -- second, load the header elements & text into TIUX array
"RTN","TIUPEFIX",33,0)
 ;
"RTN","TIUPEFIX",34,0)
 D STUFREC(TIUDA,$G(DFN),$G(PARENT),.TIU)
"RTN","TIUPEFIX",35,0)
 D LOADTIUX(.TIUX,TIUBUF)
"RTN","TIUPEFIX",36,0)
 ;
"RTN","TIUPEFIX",37,0)
 ; -- third, file the data in TIU Document record --
"RTN","TIUPEFIX",38,0)
 ;
"RTN","TIUPEFIX",39,0)
 K ^TIU(8925,+TIUDA,"TEMP"),TIUX(.01),TIUX(.02),TIUX(.03),TIUX(.05)
"RTN","TIUPEFIX",40,0)
 K TIUX(.13),TIUX(1205),TIUX(1211)
"RTN","TIUPEFIX",41,0)
 M ^TIU(8925,+TIUDA,"TEMP")=TIUX("TEXT") K TIUX("TEXT")
"RTN","TIUPEFIX",42,0)
 D FILE(.HAPPY,+TIUDA,.TIUX,TIUTYP)
"RTN","TIUPEFIX",43,0)
 D MERGTEXT^TIUEDI1(+TIUDA,.TIU)
"RTN","TIUPEFIX",44,0)
 S TIUPOST=$$POSTFILE^TIULC1(TITLE)
"RTN","TIUPEFIX",45,0)
 S TIUREC("#")=TIUDA
"RTN","TIUPEFIX",46,0)
 I TIUPOST]"" X TIUPOST
"RTN","TIUPEFIX",47,0)
MAKEX D ALERTDEL^TIUPEVNT(+TIUBUF),RESOLVE^TIUPEVNT(+$P(XQADATA,";",3))
"RTN","TIUPEFIX",48,0)
 D BUFPURGE^TIUPUTC(+TIUBUF)
"RTN","TIUPEFIX",49,0)
 K ^TIU(8925,+TIUDA,"TEMP") W "Done."
"RTN","TIUPEFIX",50,0)
 I +$G(TIUDA),+$D(^TIU(8925,+$G(TIUDA),0)) D
"RTN","TIUPEFIX",51,0)
 . N TIU D GETTIU^TIULD(.TIU,+TIUDA)
"RTN","TIUPEFIX",52,0)
 . D EN^VALM("TIU BROWSE FOR MRT")
"RTN","TIUPEFIX",53,0)
 Q
"RTN","TIUPEFIX",54,0)
LOADTIUX(TIUARR,TIUBUF) ; Load TIUX array with header and text
"RTN","TIUPEFIX",55,0)
 N TIUI,TIUHSIG,TIUBGN,TIULINE,X,Y,TYPE I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIUPEFIX",56,0)
 S TIUHSIG=$P(TIUPRM0,U,10),TIUBGN=$P(TIUPRM0,U,12)
"RTN","TIUPEFIX",57,0)
 S TIUI=0 F  S TIUI=$O(^TIU(8925.2,+TIUBUF,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUPEFIX",58,0)
 . S TIULINE=$G(^TIU(8925.2,+TIUBUF,"TEXT",TIUI,0))
"RTN","TIUPEFIX",59,0)
 . I TIULINE[TIUHSIG D
"RTN","TIUPEFIX",60,0)
 . . S X=$$STRIP^TIULS($P(TIULINE,":",2)),Y=$$WHATYPE^TIUPUTU(X)
"RTN","TIUPEFIX",61,0)
 . . I +Y'>0 D MAIN^TIUPEVNT(TIUBUF,1,3,X) Q
"RTN","TIUPEFIX",62,0)
 . . S TIUD1=$G(^TIU(8925.1,+Y,1)),TIUD4=$G(^TIU(8925.1,+Y,4))
"RTN","TIUPEFIX",63,0)
 . . S TYPE=+Y
"RTN","TIUPEFIX",64,0)
 . . F  D  Q:TIULINE[TIUBGN!(+TIUI'>0)
"RTN","TIUPEFIX",65,0)
 . . . N TIUN,TIUCAP,TIUFLD,TIUREQ S TIUREQ=0
"RTN","TIUPEFIX",66,0)
 . . . S TIUI=$O(^TIU(8925.2,+TIUBUF,"TEXT",TIUI)) Q:+TIUI'>0
"RTN","TIUPEFIX",67,0)
 . . . S TIULINE=$G(^TIU(8925.2,+TIUBUF,"TEXT",TIUI,0)) Q:TIULINE[TIUBGN
"RTN","TIUPEFIX",68,0)
 . . . S TIUCAP=$P(TIULINE,":") Q:TIUCAP']""
"RTN","TIUPEFIX",69,0)
 . . . S TIUN=$O(^TIU(8925.1,+TYPE,"HEAD","B",TIUCAP,0))
"RTN","TIUPEFIX",70,0)
 . . . Q:+TIUN'>0
"RTN","TIUPEFIX",71,0)
 . . . S TIUFLD=$P(^TIU(8925.1,+TYPE,"HEAD",+TIUN,0),U,3)
"RTN","TIUPEFIX",72,0)
 . . . S TIUREQ=$P(^TIU(8925.1,+TYPE,"HEAD",+TIUN,0),U,7)
"RTN","TIUPEFIX",73,0)
 . . . S TIUARR(TIUFLD)=$$STRIP^TIULS($P(TIULINE,":",2,99))
"RTN","TIUPEFIX",74,0)
 . . . S:TIUFLD'=.001 TIUARR(TIUFLD)=$$TRNSFRM(+TYPE,TIUFLD,TIUARR(TIUFLD))
"RTN","TIUPEFIX",75,0)
 . . . I +TIUREQ,TIUARR(TIUFLD)="" S TIUARR(TIUFLD)="** REQUIRED FIELD MISSING FROM UPLOAD **"
"RTN","TIUPEFIX",76,0)
 . . I TIULINE[TIUBGN D
"RTN","TIUPEFIX",77,0)
 . . . N TIUJ S TIUJ=0
"RTN","TIUPEFIX",78,0)
 . . . F  D  Q:+TIUI'>0
"RTN","TIUPEFIX",79,0)
 . . . . S TIUI=$O(^TIU(8925.2,+TIUBUF,"TEXT",TIUI)) Q:+TIUI'>0
"RTN","TIUPEFIX",80,0)
 . . . . S TIUJ=TIUJ+1
"RTN","TIUPEFIX",81,0)
 . . . . S TIUARR("TEXT",TIUJ,0)=$G(^TIU(8925.2,+TIUBUF,"TEXT",TIUI,0))
"RTN","TIUPEFIX",82,0)
 Q
"RTN","TIUPEFIX",83,0)
STUFREC(DA,DFN,PARENT,TIU) ; Stuff fixed field data
"RTN","TIUPEFIX",84,0)
 N FDA,FDARR,IENS,FLAGS,TIUMSG,TIURDT
"RTN","TIUPEFIX",85,0)
 S IENS=""""_DA_",""",FDARR="FDA(8925,"_IENS_")",FLAGS="K"
"RTN","TIUPEFIX",86,0)
 I +$G(PARENT)'>0 D
"RTN","TIUPEFIX",87,0)
 . S @FDARR@(.02)=$G(DFN),@FDARR@(.03)=$P($G(TIU("VISIT")),U)
"RTN","TIUPEFIX",88,0)
 . S @FDARR@(.05)=$S(+$$REQVER^TIULC(+DA,+$P($G(TIUDPRM(0)),U,3)):4,1:5)
"RTN","TIUPEFIX",89,0)
 . S @FDARR@(.07)=$P(TIU("EDT"),U)
"RTN","TIUPEFIX",90,0)
 . S @FDARR@(.08)=$P(TIU("LDT"),U),@FDARR@(1401)=$P($G(TIU("AD#")),U)
"RTN","TIUPEFIX",91,0)
 . S @FDARR@(1402)=$P($G(TIU("TS")),U),@FDARR@(1201)=$$NOW^TIULC
"RTN","TIUPEFIX",92,0)
 . S @FDARR@(1205)=$S(+$P($G(TIU("LOC")),U):$P($G(TIU("LOC")),U),1:$P($G(TIU("VLOC")),U))
"RTN","TIUPEFIX",93,0)
 . S @FDARR@(1404)=$P($G(TIU("SVC")),U)
"RTN","TIUPEFIX",94,0)
 I +$G(PARENT)>0 D
"RTN","TIUPEFIX",95,0)
 . S @FDARR@(.02)=+$P(^TIU(8925,+PARENT,0),U,2)
"RTN","TIUPEFIX",96,0)
 . S @FDARR@(.03)=$P(^TIU(8925,+PARENT,0),U,3)
"RTN","TIUPEFIX",97,0)
 . S @FDARR@(.05)=$S(+$$REQVER^TIULC(+DA,+$P($G(TIUDPRM(0)),U,3)):4,1:5)
"RTN","TIUPEFIX",98,0)
 . S @FDARR@(.06)=PARENT,@FDARR@(.08)=$P($G(TIU("LDT")),U)
"RTN","TIUPEFIX",99,0)
 . S @FDARR@(1205)=$P($G(^TIU(8925,+PARENT,12)),U,5)
"RTN","TIUPEFIX",100,0)
 . S @FDARR@(1401)=$P($G(^TIU(8925,+PARENT,14)),U)
"RTN","TIUPEFIX",101,0)
 . S @FDARR@(1402)=$P($G(^TIU(8925,+PARENT,14)),U,2)
"RTN","TIUPEFIX",102,0)
 . S @FDARR@(1404)=$P($G(^TIU(8925,+PARENT,14)),U,4)
"RTN","TIUPEFIX",103,0)
 S @FDARR@(1201)=$$NOW^XLFDT
"RTN","TIUPEFIX",104,0)
 I +$G(TIU("LDT")) S TIURDT=+$G(TIU("LDT"))
"RTN","TIUPEFIX",105,0)
 I +$G(TIU("LDT"))'>0 D
"RTN","TIUPEFIX",106,0)
 . S TIUDICDT=+$$IDATE^TIULC($G(TIUDICDT))
"RTN","TIUPEFIX",107,0)
 . S TIURDT=$S(+$G(TIUDICDT)>0:+$G(TIUDICDT),1:+$$NOW^TIULC)
"RTN","TIUPEFIX",108,0)
 . S:+$G(TIUTYPE)=1 @FDARR@(.12)=1
"RTN","TIUPEFIX",109,0)
 S @FDARR@(1301)=TIURDT,@FDARR@(1303)="U"
"RTN","TIUPEFIX",110,0)
 D FILE^DIE(FLAGS,"FDA","TIUMSG")
"RTN","TIUPEFIX",111,0)
 Q
"RTN","TIUPEFIX",112,0)
MAKEADD(TIUDADD,TIUDA,TIUBUF) ; Create an addendum record
"RTN","TIUPEFIX",113,0)
 N DIE,DR,DA,DIC,X,Y,DLAYGO,TIUATYP,TIUCAN,TIUFPRIV,TIU,TIUX S TIUFPRIV=1
"RTN","TIUPEFIX",114,0)
 S TIUATYP=+$$WHATITLE^TIUPUTU("ADDENDUM")
"RTN","TIUPEFIX",115,0)
 S (DIC,DLAYGO)=8925,DIC(0)="L",X=""""_"`"_TIUATYP_""""
"RTN","TIUPEFIX",116,0)
 D ^DIC
"RTN","TIUPEFIX",117,0)
 S TIUDADD=+Y
"RTN","TIUPEFIX",118,0)
 I +Y'>0 S TIUDADD=TIUDADD_"^Could not create addendum." Q
"RTN","TIUPEFIX",119,0)
 D GETTIU^TIULD(.TIU,TIUDA)
"RTN","TIUPEFIX",120,0)
 S TIU("DOCTYP")=TIUATYP_U_$$PNAME^TIULC1(TIUATYP)
"RTN","TIUPEFIX",121,0)
 D STUFREC(TIUDADD,DFN,+TIUDA,.TIU)
"RTN","TIUPEFIX",122,0)
 D LOADTIUX(.TIUX,TIUBUF)
"RTN","TIUPEFIX",123,0)
 K ^TIU(8925,+TIUDADD,"TEMP")
"RTN","TIUPEFIX",124,0)
 M ^TIU(8925,+TIUDADD,"TEMP")=TIUX("TEXT") K TIUX("TEXT")
"RTN","TIUPEFIX",125,0)
 D FILE(.SUCCESS,+TIUDADD,.TIUX,TIUATYP)
"RTN","TIUPEFIX",126,0)
 D MERGTEXT^TIUEDI1(+TIUDADD,.TIU)
"RTN","TIUPEFIX",127,0)
 D RELEASE^TIUT(+TIUDADD,1)
"RTN","TIUPEFIX",128,0)
 K ^TIU(8925,+TIUDADD,"TEMP")
"RTN","TIUPEFIX",129,0)
 Q
"RTN","TIUPEFIX",130,0)
FILE(SUCCESS,TIUDA,TIUX,RTYPE) ; Call FM Filer to commit updates to DB
"RTN","TIUPEFIX",131,0)
 N FDA,FDARR,IENS,FLAGS,TIUMSG
"RTN","TIUPEFIX",132,0)
 S IENS=""""_TIUDA_",""",FDARR="FDA(8925,"_IENS_")",FLAGS="KE"
"RTN","TIUPEFIX",133,0)
 M @FDARR=TIUX
"RTN","TIUPEFIX",134,0)
 D FILE^DIE(FLAGS,"FDA","TIUMSG") ; File record
"RTN","TIUPEFIX",135,0)
 I $D(TIUMSG)>9 D
"RTN","TIUPEFIX",136,0)
 . S SUCCESS=0_U_$G(TIUMSG(1,"TEXT",1))
"RTN","TIUPEFIX",137,0)
 . D MAIN^TIUPEVNT(TIUBUF,2,"",$P($G(^TIU(8925.1,+RTYPE,0)),U),.FDA,.TIUMSG)
"RTN","TIUPEFIX",138,0)
 E  S SUCCESS=TIUDA
"RTN","TIUPEFIX",139,0)
 Q
"RTN","TIUPEFIX",140,0)
TRNSFRM(RTYPE,FLD,X) ; Executes Transform code for a given header field
"RTN","TIUPEFIX",141,0)
 N XFORM
"RTN","TIUPEFIX",142,0)
 S FLD=$O(^TIU(8925.1,+RTYPE,"HEAD","D",+FLD,0))
"RTN","TIUPEFIX",143,0)
 I +FLD'>0 G TRNSFRMX
"RTN","TIUPEFIX",144,0)
 S XFORM=$G(^TIU(8925.1,+RTYPE,"HEAD",+FLD,1))
"RTN","TIUPEFIX",145,0)
 I XFORM']"" G TRNSFRMX
"RTN","TIUPEFIX",146,0)
 X XFORM
"RTN","TIUPEFIX",147,0)
TRNSFRMX Q X
"RTN","TIUPEVN1")
0^114^B942992
"RTN","TIUPEVN1",1,0)
TIUPEVN1 ; SLC/JER - Functions supporting filer/event log
"RTN","TIUPEVN1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPEVN1",3,0)
WHOGETS(TIUY,TIUTYP) ; Who gets alerted for a given filing error
"RTN","TIUPEVN1",4,0)
 N TIUI,TIUJ,TIUDAD
"RTN","TIUPEVN1",5,0)
 N:'$D(TIUTFIX) TIUTFIX ; TIUTFIX is STATIC
"RTN","TIUPEVN1",6,0)
 Q:+$G(TIUTYP)'>0
"RTN","TIUPEVN1",7,0)
 I $G(TIUTITLE)]"",'+$G(TIUTFIX) D
"RTN","TIUPEVN1",8,0)
 . S TIUTFIX=1,TIUTYP=$$WHATITLE^TIUPUTU(TIUTITLE)
"RTN","TIUPEVN1",9,0)
 S TIUI=$O(^TIU(8925.95,"B",+TIUTYP,0))
"RTN","TIUPEVN1",10,0)
 I +TIUI D  Q
"RTN","TIUPEVN1",11,0)
 . S TIUJ=0
"RTN","TIUPEVN1",12,0)
 . F  S TIUJ=$O(^TIU(8925.95,+TIUI,4,+TIUJ)) Q:+TIUJ'>0  D
"RTN","TIUPEVN1",13,0)
 . . N TIUDUZ
"RTN","TIUPEVN1",14,0)
 . . S TIUDUZ=+$G(^TIU(8925.95,+TIUI,4,+TIUJ,0)) Q:+TIUDUZ'>0
"RTN","TIUPEVN1",15,0)
 . . S TIUY(TIUDUZ)=""
"RTN","TIUPEVN1",16,0)
 S TIUDAD=$O(^TIU(8925.1,"AD",+TIUTYP,0))
"RTN","TIUPEVN1",17,0)
 I +TIUDAD D WHOGETS(.TIUY,TIUDAD)
"RTN","TIUPEVN1",18,0)
 Q
"RTN","TIUPEVNT")
0^115^B44462750
"RTN","TIUPEVNT",1,0)
TIUPEVNT ; SLC/JER - Event logger for upload/filer ;4/13/93  10:26
"RTN","TIUPEVNT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPEVNT",3,0)
MAIN(BUFDA,ETYPE,ECODE,TIUTYPE,FDA,MSG) ; Controls branching
"RTN","TIUPEVNT",4,0)
 N EVNTDA
"RTN","TIUPEVNT",5,0)
 D LOG(BUFDA,ETYPE,$G(ECODE),$G(TIUTYPE),.EVNTDA,.FDA,.MSG)
"RTN","TIUPEVNT",6,0)
 I ETYPE=2 D FIELDS(EVNTDA,.MSG)
"RTN","TIUPEVNT",7,0)
 Q
"RTN","TIUPEVNT",8,0)
LOG(BUFDA,ETYPE,ECODE,TIUTYPE,EVNTDA,FDA,MSG) ; Register event in file 8925.4
"RTN","TIUPEVNT",9,0)
 N BUFREC,ERRMSG,NEWBUF,DIC,DLAYGO,DIE,DA,DR,TIUK,TIUL,X,Y
"RTN","TIUPEVNT",10,0)
 S BUFREC=$G(^TIU(8925.2,+BUFDA,0))
"RTN","TIUPEVNT",11,0)
 S (DIC,DLAYGO)=8925.4,DIC(0)="MLX",X=""""_$$NOW^TIULC_"""" D ^DIC
"RTN","TIUPEVNT",12,0)
 Q:+Y'>0
"RTN","TIUPEVNT",13,0)
 S DIE=DIC,(EVNTDA,DA)=+Y,ERRMSG=$$ERRMSG(ETYPE,ECODE,TIUTYPE,.FDA,.MSG)
"RTN","TIUPEVNT",14,0)
 S DR=".02////"_$P(BUFREC,U,2)_";.03////"_TIUTYPE_";.04////"_ERRMSG_";.06////"_$S(+ETYPE:0,1:"")_";.08////"_ETYPE
"RTN","TIUPEVNT",15,0)
 D ^DIE K DA ; File upload log record
"RTN","TIUPEVNT",16,0)
 I ETYPE'=1 Q
"RTN","TIUPEVNT",17,0)
 ; Store Header of failed record in log
"RTN","TIUPEVNT",18,0)
 S ^TIU(8925.4,+EVNTDA,"HEAD",0)="^^^^"_DT_"^"
"RTN","TIUPEVNT",19,0)
 S TIUL=0 F TIUK=TIUFRST:1:$S($P(TIUPRM0,U,16)="C":TIUI,1:TIUFRST+1) D
"RTN","TIUPEVNT",20,0)
 . S TIUL=TIUL+1,^TIU(8925.4,+EVNTDA,"HEAD",TIUL,0)=$G(^TIU(8925.2,+BUFDA,"TEXT",TIUK,0))
"RTN","TIUPEVNT",21,0)
 S $P(^TIU(8925.4,+EVNTDA,"HEAD",0),U,3,4)=TIUL_U_TIUL
"RTN","TIUPEVNT",22,0)
 S NEWBUF=$$MAKEBUF^TIUUPLD
"RTN","TIUPEVNT",23,0)
 I +NEWBUF>0 D
"RTN","TIUPEVNT",24,0)
 . N TIUJ,TIUL,TIUBLIN
"RTN","TIUPEVNT",25,0)
 . S ^TIU(8925.2,+NEWBUF,"TEXT",0)="^^^^"_DT_"^"
"RTN","TIUPEVNT",26,0)
 . S TIUJ=TIUFRST,TIUL=1
"RTN","TIUPEVNT",27,0)
 . S ^TIU(8925.2,+NEWBUF,"TEXT",TIUL,0)=$G(^TIU(8925.2,+BUFDA,"TEXT",TIUJ,0)) K ^TIU(8925.2,+BUFDA,"TEXT",TIUJ,0)
"RTN","TIUPEVNT",28,0)
 . F  S TIUJ=$O(^TIU(8925.2,+BUFDA,"TEXT",TIUJ)) Q:$S(+TIUJ'>0:1,($G(^TIU(8925.2,+BUFDA,"TEXT",TIUJ,0))[TIUHSIG):1,1:0)  D
"RTN","TIUPEVNT",29,0)
 . . S TIUL=TIUL+1
"RTN","TIUPEVNT",30,0)
 . . S ^TIU(8925.2,+NEWBUF,"TEXT",TIUL,0)=$G(^TIU(8925.2,+BUFDA,"TEXT",TIUJ,0)),TIUI=TIUJ
"RTN","TIUPEVNT",31,0)
 . . K ^TIU(8925.2,+BUFDA,"TEXT",TIUJ,0)
"RTN","TIUPEVNT",32,0)
 . S $P(^TIU(8925.2,+NEWBUF,"TEXT",0),U,3,4)=TIUL_U_TIUL
"RTN","TIUPEVNT",33,0)
 . S DIE=8925.4,DA=+EVNTDA,DR=".05////"_+NEWBUF D ^DIE
"RTN","TIUPEVNT",34,0)
 . S ^TIU(8925.2,+NEWBUF,"ERR",0)="^8925.22PA^^",DLAYGO=8925.22
"RTN","TIUPEVNT",35,0)
 . S DA(1)=+NEWBUF,DIC="^TIU(8925.2,"_+DA(1)_",""ERR"",",DIC(0)="L"
"RTN","TIUPEVNT",36,0)
 . S X="`"_EVNTDA
"RTN","TIUPEVNT",37,0)
 . D ^DIC ; File error log pointer in buffer file
"RTN","TIUPEVNT",38,0)
 . K DIC,DLAYGO
"RTN","TIUPEVNT",39,0)
 . D ALERT(+NEWBUF,.ERRMSG,.EVNTDA)
"RTN","TIUPEVNT",40,0)
 Q
"RTN","TIUPEVNT",41,0)
ERRMSG(ETYPE,ECODE,TIUTYPE,FDA,MSG) ; Call ^DIC to resolve error code
"RTN","TIUPEVNT",42,0)
 N DIC,DIE,DA,X,Y
"RTN","TIUPEVNT",43,0)
 I +ETYPE'>0 S Y="" G ERRMSX
"RTN","TIUPEVNT",44,0)
 S TIUTYPE=$S($G(TIUTITLE)]"":$G(TIUTITLE),1:$G(TIUTYPE))
"RTN","TIUPEVNT",45,0)
 I +$G(TIUREC("FILE"))=8925,($G(TIUHDR(.09))="PRIORITY"),($G(TIUTYPE)]"") S TIUTYPE="STAT "_$G(TIUTYPE)
"RTN","TIUPEVNT",46,0)
 I +ETYPE=1,+ECODE D  G ERRMSX
"RTN","TIUPEVNT",47,0)
 . S DIC=8925.3,DIC(0)="MXZ",X="`"_ECODE D ^DIC
"RTN","TIUPEVNT",48,0)
 . S Y="FILING ERROR: "_$G(TIUTYPE)_" "_$P(Y(0),U,2)
"RTN","TIUPEVNT",49,0)
 I $G(MSG("DIERR",1,"PARAM","FILE"))=8925 D  G ERRMSX
"RTN","TIUPEVNT",50,0)
 . N TIU,DA S DA=+$O(FDA(8925,"")) D GETTIU^TIULD(.TIU,DA)
"RTN","TIUPEVNT",51,0)
 . S Y=$$NAME^TIULS(TIU("PNM"),"LAST,FI MI ")
"RTN","TIUPEVNT",52,0)
 . S:$G(TIUHDR("TIUTITLE"))]"" TIUTYPE=TIUHDR("TIUTITLE")
"RTN","TIUPEVNT",53,0)
 . S Y=Y_TIU("PID")_": "_$$DATE^TIULS(+TIU("EDT"),"MM/DD/YY ")_$G(TIUTYPE)_" is missing fields."
"RTN","TIUPEVNT",54,0)
 S Y=$G(MSG("DIERR",1,"TEXT",1))
"RTN","TIUPEVNT",55,0)
ERRMSX Q Y
"RTN","TIUPEVNT",56,0)
ALERT(BUFDA,ERRMSG,EVNTDA) ; Call ^XQALERT
"RTN","TIUPEVNT",57,0)
 N BUFREC,XQA,XQAID,XQADATA,XQAMSG,XQAKILL,XQAROU,TIUI,TIUSUB
"RTN","TIUPEVNT",58,0)
 S BUFREC=$G(^TIU(8925.2,+BUFDA,0))
"RTN","TIUPEVNT",59,0)
 I +$G(TIUREC("TYPE")) D WHOGETS^TIUPEVN1(.XQA,+TIUREC("TYPE"))
"RTN","TIUPEVNT",60,0)
 I $D(XQA)'>9 D
"RTN","TIUPEVNT",61,0)
 . S TIUI=$O(^TIU(8925.99,"B",+$G(DUZ(2)),0)) S:+TIUI'>0 TIUI=+$O(^TIU(8925.99,0))
"RTN","TIUPEVNT",62,0)
 . S TIUSUB=0 F  S TIUSUB=$O(^TIU(8925.99,+TIUI,2,TIUSUB)) Q:TIUSUB'>0  D
"RTN","TIUPEVNT",63,0)
 . . S XQA($G(^TIU(8925.99,+TIUI,2,TIUSUB,0)))=""
"RTN","TIUPEVNT",64,0)
 Q:$D(XQA)'>9
"RTN","TIUPEVNT",65,0)
 S XQAID="TIUERR"_+BUFDA
"RTN","TIUPEVNT",66,0)
 S XQAMSG=ERRMSG
"RTN","TIUPEVNT",67,0)
 W:'$D(ZTQUEUED) !!,XQAMSG,!
"RTN","TIUPEVNT",68,0)
 S XQADATA=BUFDA_";"_ERRMSG_";"_EVNTDA_";"_$G(TIUREC("TYPE"))
"RTN","TIUPEVNT",69,0)
 S XQAROU="DISPLAY^TIUPEVNT"
"RTN","TIUPEVNT",70,0)
 D SETUP^XQALERT
"RTN","TIUPEVNT",71,0)
 Q
"RTN","TIUPEVNT",72,0)
DISPLAY ; F/U by showing detailed text
"RTN","TIUPEVNT",73,0)
 N DIC,INQUIRE,RETRY,DWPK,EVNTDA,TIU K XQAKILL,RESCODE,TIUTYPE,TIUDONE
"RTN","TIUPEVNT",74,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUPEVNT",75,0)
 I +$P(XQADATA,";",3) D  G:+$G(TIUDONE) DISPX
"RTN","TIUPEVNT",76,0)
 . N TIUI S TIUI=0
"RTN","TIUPEVNT",77,0)
 . W !!,"The header of the failed record looks like this:",!
"RTN","TIUPEVNT",78,0)
 . S EVNTDA=+$P(XQADATA,";",3)
"RTN","TIUPEVNT",79,0)
 . F  S TIUI=$O(^TIU(8925.4,+EVNTDA,"HEAD",TIUI)) Q:+TIUI'>0  D
"RTN","TIUPEVNT",80,0)
 . . W !,$G(^TIU(8925.4,+EVNTDA,"HEAD",TIUI,0))
"RTN","TIUPEVNT",81,0)
 . S TIUTYPE=+$P(XQADATA,";",4)
"RTN","TIUPEVNT",82,0)
 . I TIUTYPE>0 S RESCODE=$$FIXCODE^TIULC1(TIUTYPE) I 1
"RTN","TIUPEVNT",83,0)
 . E  S RESCODE="D GETPAT^TIUCHLP"
"RTN","TIUPEVNT",84,0)
 . I RESCODE]"" D
"RTN","TIUPEVNT",85,0)
 . . W ! S INQUIRE=$$READ^TIUU("YO","Inquire to patient record","YES")
"RTN","TIUPEVNT",86,0)
 . . I +INQUIRE X RESCODE
"RTN","TIUPEVNT",87,0)
 W !!,$P(XQADATA,";",2),!!,"You may now edit the buffered upload data."
"RTN","TIUPEVNT",88,0)
 S DIC="^TIU(8925.2,"_+XQADATA_",""TEXT"",",DWPK=1 D EN^DIWE
"RTN","TIUPEVNT",89,0)
 S RETRY=$$READ^TIUU("YO","Now would you like to retry the filer","YES","^D FIL^TIUDIRH")
"RTN","TIUPEVNT",90,0)
 I +RETRY D ALERTDEL(+XQADATA),RESOLVE(+$P(XQADATA,";",3)),FILE^TIUUPLD(+XQADATA)
"RTN","TIUPEVNT",91,0)
DISPX K XQX1
"RTN","TIUPEVNT",92,0)
 Q
"RTN","TIUPEVNT",93,0)
ALERTDEL(DA) ; Delete alerts associated with a given Dis Sum record
"RTN","TIUPEVNT",94,0)
 N XQA,XQAID,XQAKILL S XQAID="TIUERR"_+DA
"RTN","TIUPEVNT",95,0)
 F  D DELETEA^XQALERT S XQAID="TIUERR"_+DA Q:'$D(^VA(200,"AXQAN",XQAID))
"RTN","TIUPEVNT",96,0)
 Q
"RTN","TIUPEVNT",97,0)
RESOLVE(EVNTDA) ; Indicate resolution of error
"RTN","TIUPEVNT",98,0)
 N DA,DIE,DR,TIUI,RESTIME,X,Y W !,"Filing Record/Resolving Error..."
"RTN","TIUPEVNT",99,0)
 S RESTIME=$$NOW^TIULC
"RTN","TIUPEVNT",100,0)
 S DIE="^TIU(8925.4,"
"RTN","TIUPEVNT",101,0)
 S DA=+$G(EVNTDA) Q:+DA'>0
"RTN","TIUPEVNT",102,0)
 I +$P(^TIU(8925.4,DA,0),U,6)>0 Q  ; If already resolved, next record
"RTN","TIUPEVNT",103,0)
 S DR=".05///@;.06////1;.07////"_RESTIME_";1///@"
"RTN","TIUPEVNT",104,0)
 D ^DIE ; Mark error log record as resolved
"RTN","TIUPEVNT",105,0)
 Q
"RTN","TIUPEVNT",106,0)
FIELDS(EVNTDA,MSG) ; Log errors for specific fields
"RTN","TIUPEVNT",107,0)
 N TIUI S TIUI=0
"RTN","TIUPEVNT",108,0)
 F  S TIUI=$O(MSG("DIERR",TIUI)) Q:+TIUI'>0  D
"RTN","TIUPEVNT",109,0)
 . N DA,DR,DIC,DIE,DLAYGO S DIC="^TIU(8925.4,"_EVNTDA_",1,",DIC(0)="L"
"RTN","TIUPEVNT",110,0)
 . S ^TIU(8925.4,EVNTDA,1,0)="^8925.42^^",DA(1)=EVNTDA
"RTN","TIUPEVNT",111,0)
 . S DLAYGO=8925.42,X=""""_MSG("DIERR",TIUI,"PARAM","FILE")_""""
"RTN","TIUPEVNT",112,0)
 . D ^DIC Q:+Y'>0
"RTN","TIUPEVNT",113,0)
 . S DIE=DIC,DA(1)=EVNTDA,DA=+Y
"RTN","TIUPEVNT",114,0)
 . S DR=".02///"_+$G(MSG("DIERR",TIUI,"PARAM","IENS"))_";.03///"_$G(MSG("DIERR",TIUI,"PARAM","FIELD"))_";.04///"_$G(MSG("DIERR",TIUI,"PARAM",3))
"RTN","TIUPEVNT",115,0)
 . D ^DIE,FLDALRT(EVNTDA,DA,$P($G(^TIU(8925.4,+EVNTDA,0)),U,4))
"RTN","TIUPEVNT",116,0)
 Q
"RTN","TIUPEVNT",117,0)
FLDALRT(EVNTDA,EVNTDA1,ERRMSG) ; Send alerts for field errors
"RTN","TIUPEVNT",118,0)
 N XQA,XQAID,XQADATA,XQAMSG,XQAKILL,XQAROU,TIUI,TIUSUB
"RTN","TIUPEVNT",119,0)
 I +$G(TIUREC("TYPE")) D WHOGETS^TIUPEVN1(.XQA,+TIUREC("TYPE"))
"RTN","TIUPEVNT",120,0)
 I $D(XQA)'>9 D
"RTN","TIUPEVNT",121,0)
 . S TIUI=$O(^TIU(8925.99,"B",+$G(DUZ(2)),0)) S:+TIUI'>0 TIUI=+$O(^TIU(8925.99,0))
"RTN","TIUPEVNT",122,0)
 . S TIUSUB=0 F  S TIUSUB=$O(^TIU(8925.99,+TIUI,2,TIUSUB)) Q:TIUSUB'>0  D
"RTN","TIUPEVNT",123,0)
 . . S XQA($G(^TIU(8925.99,+TIUI,2,TIUSUB,0)))=""
"RTN","TIUPEVNT",124,0)
 Q:$D(XQA)'>9
"RTN","TIUPEVNT",125,0)
 S XQAID="TIUERR"_","_EVNTDA_","_EVNTDA1
"RTN","TIUPEVNT",126,0)
 S XQAMSG=ERRMSG
"RTN","TIUPEVNT",127,0)
 W:'$D(ZTQUEUED) !!,XQAMSG
"RTN","TIUPEVNT",128,0)
 S XQADATA=ERRMSG_";"_EVNTDA_";"_EVNTDA1
"RTN","TIUPEVNT",129,0)
 S XQAROU="FLDISP^TIUPEVNT"
"RTN","TIUPEVNT",130,0)
 D SETUP^XQALERT
"RTN","TIUPEVNT",131,0)
 Q
"RTN","TIUPEVNT",132,0)
FLDISP ; Follow-up action for field errors
"RTN","TIUPEVNT",133,0)
 N DIE,DA,DR,EVNTDA,EVNTDA1,EVNTREC,TIUFIX S TIUFIX=0
"RTN","TIUPEVNT",134,0)
 S EVNTDA=+$P(XQADATA,";",2),EVNTDA1=+$P(XQADATA,";",3)
"RTN","TIUPEVNT",135,0)
 S EVNTREC=$G(^TIU(8925.4,EVNTDA,1,EVNTDA1,0)) Q:+EVNTREC'>0
"RTN","TIUPEVNT",136,0)
 S DIE=$P(EVNTREC,U),DA=$P(EVNTREC,U,2)
"RTN","TIUPEVNT",137,0)
 S DR=$P(EVNTREC,U,3)_"//"_$P(EVNTREC,U,4)
"RTN","TIUPEVNT",138,0)
 S TIUFIX=$$FIXED(DIE,+DA,+DR)
"RTN","TIUPEVNT",139,0)
 I +TIUFIX>0 D  Q
"RTN","TIUPEVNT",140,0)
 . W !!,"Missing field already filled in by another method..."
"RTN","TIUPEVNT",141,0)
 . W !,"  Nothing left to resolve." H 3
"RTN","TIUPEVNT",142,0)
 . S XQAKILL=0 D FLDRSLV(EVNTDA)
"RTN","TIUPEVNT",143,0)
 W !!,"You may now enter the correct information:",!
"RTN","TIUPEVNT",144,0)
 W !,$P(XQADATA,";"),!
"RTN","TIUPEVNT",145,0)
 D RECDISP(DIE,DA)
"RTN","TIUPEVNT",146,0)
 D ^DIE
"RTN","TIUPEVNT",147,0)
 S TIUFIX=$$FIXED(DIE,+DA,+DR)
"RTN","TIUPEVNT",148,0)
 I +$G(TIUFIX)'>0 K XQAKILL Q
"RTN","TIUPEVNT",149,0)
 S XQAKILL=0
"RTN","TIUPEVNT",150,0)
 D FLDRSLV(EVNTDA)
"RTN","TIUPEVNT",151,0)
 Q
"RTN","TIUPEVNT",152,0)
RECDISP(DIC,DA) ; Call DIQ to display the existing record
"RTN","TIUPEVNT",153,0)
 N X,Y,DIQ,DR
"RTN","TIUPEVNT",154,0)
 I '+$$READ^TIUU("Y","Diplay ENTIRE existing record","NO") Q
"RTN","TIUPEVNT",155,0)
 W ! S DIC=$G(^DIC(DIC,0,"GL"))
"RTN","TIUPEVNT",156,0)
 D EN^DIQ
"RTN","TIUPEVNT",157,0)
 Q
"RTN","TIUPEVNT",158,0)
FIXED(DIC,DA,DR) ; Evaluate whether the field has been filled in
"RTN","TIUPEVNT",159,0)
 N DIQ,X,Y,TIUY,TIUFIX S TIUY=0,DIQ="TIUFIX",DIQ(0)="IN"
"RTN","TIUPEVNT",160,0)
 D EN^DIQ1 I $D(TIUFIX) S TIUY=1
"RTN","TIUPEVNT",161,0)
 Q TIUY
"RTN","TIUPEVNT",162,0)
FLDRSLV(DA) ; Mark field errors resolved
"RTN","TIUPEVNT",163,0)
 N DIE,DR
"RTN","TIUPEVNT",164,0)
 S DIE=8925.4,DR=".06////1;.07////"_$$NOW^TIULC D ^DIE
"RTN","TIUPEVNT",165,0)
 Q
"RTN","TIUPL")
0^116^B1583
"RTN","TIUPL",1,0)
TIUPL ; SLC/JER - Problem List Linker
"RTN","TIUPL",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPLST")
0^117^B14058125
"RTN","TIUPLST",1,0)
TIUPLST ; SLC/JER - Enter/edit personal document pick-list
"RTN","TIUPLST",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPLST",3,0)
MAIN ; Control branching
"RTN","TIUPLST",4,0)
 N DA,TIUFPRIV,DUOUT,DTOUT
"RTN","TIUPLST",5,0)
 S TIUFPRIV=1
"RTN","TIUPLST",6,0)
 D INTROTXT
"RTN","TIUPLST",7,0)
 I $S($D(DUOUT):1,$D(DTOUT):1,$D(DIROUT):1,1:0) Q
"RTN","TIUPLST",8,0)
 D GETEDIT
"RTN","TIUPLST",9,0)
 Q
"RTN","TIUPLST",10,0)
INTROTXT ; Write Introductory Text for the Option
"RTN","TIUPLST",11,0)
 W !
"RTN","TIUPLST",12,0)
 D JUSTIFY^TIUU("--- Personal Document Lists ---","C")
"RTN","TIUPLST",13,0)
 W !!,"This option allows you to create and maintain lists of TITLES for any of the"
"RTN","TIUPLST",14,0)
 W !,"active CLASSES of documents supported by TIU at your site.",!
"RTN","TIUPLST",15,0)
 I '$$READ^TIUU("Y","Explain Details","NO") Q
"RTN","TIUPLST",16,0)
 W !!,"When you use the option to enter a document belonging to a given class"
"RTN","TIUPLST",17,0)
 W !,"you will be asked to select a TITLE belonging to that class."
"RTN","TIUPLST",18,0)
 W !!,"For any particular class, you may find that you only wish to choose from"
"RTN","TIUPLST",19,0)
 W !,"among a few highly specific titles (e.g., if you are a Pulmonologist"
"RTN","TIUPLST",20,0)
 W !,"entering a PROGRESS NOTE, you may wish to choose from a short list of"
"RTN","TIUPLST",21,0)
 W !,"three or four titles related to Pulmonary Function, or Pulmonary Disease)."
"RTN","TIUPLST",22,0)
 W !,"Rather than presenting you with a list of hundreds of unrelated titles,"
"RTN","TIUPLST",23,0)
 W !,"TIU will present you with the list you name here."
"RTN","TIUPLST",24,0)
 W !!,"In the event that you need to select a TITLE which doesn't appear on your"
"RTN","TIUPLST",25,0)
 W !,"list, you will always be able to do so."
"RTN","TIUPLST",26,0)
 W !!,"NOTE:  If you expect to enter a single title, or would be unduely restricted"
"RTN","TIUPLST",27,0)
 W !,"by use of a short list, then we recommend that you bypass the creation of"
"RTN","TIUPLST",28,0)
 W !,"a list, and simply enter a DEFAULT TITLE for the class...This option will"
"RTN","TIUPLST",29,0)
 W !,"afford you the opportunity to do so.",!
"RTN","TIUPLST",30,0)
 Q
"RTN","TIUPLST",31,0)
GETEDIT ; Get record in picklist file, determine action
"RTN","TIUPLST",32,0)
 N DIC,X,Y,CREATE,PROMPT
"RTN","TIUPLST",33,0)
 S X=$P(^VA(200,+$G(DUZ),0),U)
"RTN","TIUPLST",34,0)
 W !,"   Enter/edit Personal Document List for "
"RTN","TIUPLST",35,0)
 W $$NAME^TIULS(X,"FIRST LAST")
"RTN","TIUPLST",36,0)
 I +$O(^TIU(8925.98,"B",DUZ,0))'>0 D  Q
"RTN","TIUPLST",37,0)
 . S Y=+$$NEWLIST(X,1)
"RTN","TIUPLST",38,0)
 . I +Y>0 D EDIT(+Y)
"RTN","TIUPLST",39,0)
 W !!,"You already have one or more Personal Lists...",!
"RTN","TIUPLST",40,0)
 S PROMPT="You may (E)dit, (D)elete, or (C)reate a List: "
"RTN","TIUPLST",41,0)
 S CREATE=$P($$READ^TIUU("SA^E:edit;D:delete;C:create",PROMPT,"EDIT"),U)
"RTN","TIUPLST",42,0)
 I $S(CREATE="":1,$D(DUOUT):1,$D(DTOUT):1,$D(DIROUT):1,1:0) Q
"RTN","TIUPLST",43,0)
 I CREATE="C" S Y=+$$NEWLIST(X) D EDIT(+Y) Q
"RTN","TIUPLST",44,0)
 S DIC=8925.98,DIC(0)="EMZ"
"RTN","TIUPLST",45,0)
 W ! D ^DIC
"RTN","TIUPLST",46,0)
 I +Y'>0 S Y=+$$NEWLIST(X,1)
"RTN","TIUPLST",47,0)
 I +Y'>0 W !,"No changes made..." Q
"RTN","TIUPLST",48,0)
 I CREATE="D" D DELETE(+Y) Q
"RTN","TIUPLST",49,0)
 D EDIT(+Y)
"RTN","TIUPLST",50,0)
 Q
"RTN","TIUPLST",51,0)
NEWLIST(X,ASK) ; Create a new List for the user
"RTN","TIUPLST",52,0)
 N ASKNEW,DIC,DLAYGO,Y S (DIC,DLAYGO)=8925.98,DIC(0)="ELMZ",ASKNEW=1
"RTN","TIUPLST",53,0)
 I +$G(ASK) S ASKNEW=$$READ^TIUU("Y","Add a new Personal Document List","YES")
"RTN","TIUPLST",54,0)
 I +ASKNEW'>0 S Y=-1 G NEWX
"RTN","TIUPLST",55,0)
 S X=""""_X_"""",DIC(0)="LXZ" D ^DIC
"RTN","TIUPLST",56,0)
NEWX Q +$G(Y)
"RTN","TIUPLST",57,0)
DELETE(DA) ; Call ^DIK to delete the list
"RTN","TIUPLST",58,0)
 N DIK,YASURE,TIUNAME S YASURE=0
"RTN","TIUPLST",59,0)
 S TIUNAME=$$UP^XLFSTR($$PNAME^TIULC1($P(^TIU(8925.98,+DA,0),U,2)))
"RTN","TIUPLST",60,0)
 I TIUNAME'="UNKNOWN" D
"RTN","TIUPLST",61,0)
 . W !!,"You are about to delete your entry for CLASS "
"RTN","TIUPLST",62,0)
 . W TIUNAME,!
"RTN","TIUPLST",63,0)
 . S YASURE=$$READ^TIUU("Y","Are you SURE","NO")
"RTN","TIUPLST",64,0)
 I TIUNAME="UNKNOWN" D
"RTN","TIUPLST",65,0)
 . W !!,"You must specify a CLASS in order to maintain the list.",!
"RTN","TIUPLST",66,0)
 . S YASURE=1
"RTN","TIUPLST",67,0)
 I +YASURE'>0 W !,"Nothing deleted...No harm done!" Q
"RTN","TIUPLST",68,0)
 S DIK="^TIU(8925.98,"
"RTN","TIUPLST",69,0)
 D ^DIK
"RTN","TIUPLST",70,0)
 W !,TIUNAME," List DELETED."
"RTN","TIUPLST",71,0)
 Q
"RTN","TIUPLST",72,0)
EDIT(DA) ; Call ^DIE to edit the record
"RTN","TIUPLST",73,0)
 N DIE,DR,TIUCLASS,TIUASK
"RTN","TIUPLST",74,0)
 S DIE=8925.98
"RTN","TIUPLST",75,0)
 S DR="[TIU ENTER/EDIT PERSONAL LIST]"
"RTN","TIUPLST",76,0)
 D ^DIE
"RTN","TIUPLST",77,0)
 I $G(TIUCLASS)="" D DELETE(DA)
"RTN","TIUPLST",78,0)
 Q
"RTN","TIUPNAPI")
0^197^B8096854
"RTN","TIUPNAPI",1,0)
TIUPNAPI ; SLC/JER - API to Replace GMRPAPI
"RTN","TIUPNAPI",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPNAPI",3,0)
NEW(TIUIFN,DFN,TIUAUTH,TIURDT,TIUTITLE,TIULOC,TIUES,TIUPRT,TIUESBY) ;
"RTN","TIUPNAPI",4,0)
 ; -- Create new note
"RTN","TIUPNAPI",5,0)
 ; Return variable (must pass by reference):
"RTN","TIUPNAPI",6,0)
 ;      TIUIFN (pass by ref) = New note IFN in file 8925, -1 if error,
"RTN","TIUPNAPI",7,0)
 ;                           = IFN^0 if note filed, w/o signature when
"RTN","TIUPNAPI",8,0)
 ;                             TIUES=1
"RTN","TIUPNAPI",9,0)
 ; Required Input parameters:
"RTN","TIUPNAPI",10,0)
 ;      DFN                  = Patient IFN in file #2
"RTN","TIUPNAPI",11,0)
 ;      TIUAUTH              = Author IFN in file #200
"RTN","TIUPNAPI",12,0)
 ;      TIURDT               = Date/time of note in FM format
"RTN","TIUPNAPI",13,0)
 ;      TIUTITLE             = Title IFN in file 8925.1
"RTN","TIUPNAPI",14,0)
 ; Required global variable:
"RTN","TIUPNAPI",15,0)
 ;      ^TMP("TIUP",$J)      = Array root for text in format compatible
"RTN","TIUPNAPI",16,0)
 ;                             w/FM Word-processing fields. e.g.,
"RTN","TIUPNAPI",17,0)
 ;                             ^TMP("TIUP",$J,0)=^^1^1^2961216^
"RTN","TIUPNAPI",18,0)
 ;                             ^TMP("TIUP",$J,1,0)=Testing the TIUPNAPI.
"RTN","TIUPNAPI",19,0)
 ; 
"RTN","TIUPNAPI",20,0)
 ;                             NOTE: you no longer need to use the
"RTN","TIUPNAPI",21,0)
 ;                             additional subscript to designate where
"RTN","TIUPNAPI",22,0)
 ;                             the text should go (e.g., 10 for Admission
"RTN","TIUPNAPI",23,0)
 ;                             Note).
"RTN","TIUPNAPI",24,0)
 ; Optional Input variables:
"RTN","TIUPNAPI",25,0)
 ;      TIULOC              = Patient Location IFN in file #44
"RTN","TIUPNAPI",26,0)
 ;      TIUES               = 1 if TIU should prompt/process E-SIG
"RTN","TIUPNAPI",27,0)
 ;      TIUPRT              = 1 if TIU should prompt user to print note
"RTN","TIUPNAPI",28,0)
 ;      TIUESBY             = Signer IFN in file #200:  Calling App is
"RTN","TIUPNAPI",29,0)
 ;                            resonsible for Electronic Signature
"RTN","TIUPNAPI",30,0)
 ;      NOTE: If TIUESBY is passed, the document will be marked as
"RTN","TIUPNAPI",31,0)
 ;            signed at the time the encrypted signature block name
"RTN","TIUPNAPI",32,0)
 ;            and title are filed...It is NOT necessary to pass a
"RTN","TIUPNAPI",33,0)
 ;            signature date/time, as GNEW^GMRPAPI permitted
"RTN","TIUPNAPI",34,0)
 N TIUX,TIUCHNG,TIUHIT,TIUPRM0,TIUPRM1,TIUTYP,TIUOUT,TIUDPRM
"RTN","TIUPNAPI",35,0)
 S TIUIFN=-1
"RTN","TIUPNAPI",36,0)
 I '$D(^DPT(+$G(DFN),0)) Q
"RTN","TIUPNAPI",37,0)
 I '$D(^VA(200,+$G(TIUAUTH),0)) Q
"RTN","TIUPNAPI",38,0)
 I '$D(^TIU(8925.1,+$G(TIUTITLE),0)) Q
"RTN","TIUPNAPI",39,0)
 I $D(^TMP("TIUP",$J))'>9 Q
"RTN","TIUPNAPI",40,0)
 I $S(+$G(TIURDT)'>0:1,+$G(TIURDT)>+$$NOW^XLFDT:1,+$$FMTH^XLFDT(TIURDT)'>0:1,1:0) Q
"RTN","TIUPNAPI",41,0)
 I $S('$D(DUZ)#2:1,'$D(^VA(200,DUZ,0)):1,1:0) Q
"RTN","TIUPNAPI",42,0)
 ; -- Okay, create new note
"RTN","TIUPNAPI",43,0)
 S TIUX(1202)=TIUAUTH,TIUX(1301)=TIURDT
"RTN","TIUPNAPI",44,0)
 I '+$G(TIUESBY),+$$REQCOSIG^TIULP(TIUTITLE) D  Q:+$G(TIUOUT)
"RTN","TIUPNAPI",45,0)
 . S TIUX(1506)=1
"RTN","TIUPNAPI",46,0)
 . S TIUX(1208)=$$GETCOSNR
"RTN","TIUPNAPI",47,0)
 . I TIUX(1208)'>0 S TIUOUT=1,TIUIFN=-1
"RTN","TIUPNAPI",48,0)
 M TIUX("TEXT")=^TMP("TIUP",$J)
"RTN","TIUPNAPI",49,0)
 D MAKE^TIUSRVP(.TIUIFN,DFN,TIUTITLE,TIURDT,$G(TIULOC),"",.TIUX)
"RTN","TIUPNAPI",50,0)
 I +TIUIFN'>0 S TIUIFN=-1 Q
"RTN","TIUPNAPI",51,0)
 I '+$G(TIUESBY),(+$G(TIUES)>0) D
"RTN","TIUPNAPI",52,0)
 . D EDSIG^TIURS(+TIUIFN,"",+$G(TIUPRT))
"RTN","TIUPNAPI",53,0)
 . I +$P(^TIU(8925,+TIUIFN,0),U,5)<6 S TIUIFN=TIUIFN_"^-1"
"RTN","TIUPNAPI",54,0)
 I +$G(TIUESBY) D MARKSIGN(.TIUIFN,+$G(TIUESBY))
"RTN","TIUPNAPI",55,0)
 D SEND^TIUALRT(+TIUIFN)
"RTN","TIUPNAPI",56,0)
 K ^TMP("TIUP",$J)
"RTN","TIUPNAPI",57,0)
 Q
"RTN","TIUPNAPI",58,0)
WHATITLE(X) ; -- Given a freetext title, return pointer to file 8925.1
"RTN","TIUPNAPI",59,0)
 Q $$WHATITLE^TIUPUTU(X)
"RTN","TIUPNAPI",60,0)
GETCOSNR() ; Ask Expected Cosigner
"RTN","TIUPNAPI",61,0)
 N TIUY
"RTN","TIUPNAPI",62,0)
 S TIUY=$$READ^TIUU("P^200:AEMQ","EXPECTED COSIGNER")
"RTN","TIUPNAPI",63,0)
 Q +$G(TIUY)
"RTN","TIUPNAPI",64,0)
MARKSIGN(TIUDA,TIUESBY) ; Mark note as electronically signed
"RTN","TIUPNAPI",65,0)
 N ESNAME,ESTITLE,ESBLOCK
"RTN","TIUPNAPI",66,0)
 I $S(+$G(TIUESBY)'>0:1,'$D(^VA(200,+TIUESBY,0)):1,+$$CANDO^TIULP(TIUDA,"SIGNATURE")'>0:1,1:0) S TIUDA=TIUDA_U_-1 Q
"RTN","TIUPNAPI",67,0)
 S ESNAME=$P($G(^VA(200,TIUESBY,20)),U,2),ESTITLE=$P($G(^(20)),U,3)
"RTN","TIUPNAPI",68,0)
 S ESBLOCK="1^"_ESNAME_U_ESTITLE
"RTN","TIUPNAPI",69,0)
 D ES^TIURS(TIUDA,ESBLOCK)
"RTN","TIUPNAPI",70,0)
 I +$P(^TIU(8925,+TIUIFN,0),U,5)<6 S TIUDA=TIUDA_"^-1"
"RTN","TIUPNAPI",71,0)
 Q
"RTN","TIUPNAPI",72,0)
TEST ; Interactive Test
"RTN","TIUPNAPI",73,0)
 N DFN,TITLE,TIURDT,TIUDA,DIC K ^TMP("TIUP",$J)
"RTN","TIUPNAPI",74,0)
 S DFN=+$$PATIENT^TIULA Q:+DFN'>0
"RTN","TIUPNAPI",75,0)
 S TITLE=$$TITLPICK^TIUAPIOK Q:+TITLE'>0
"RTN","TIUPNAPI",76,0)
 S TIURDT=+$$NOW^XLFDT
"RTN","TIUPNAPI",77,0)
 S DIC="^TMP(""TIUP"",$J," D EN^DIWE
"RTN","TIUPNAPI",78,0)
 D NEW(.TIUDA,DFN,DUZ,TIURDT,TITLE,"",1,1)
"RTN","TIUPNAPI",79,0)
 Q
"RTN","TIUPNCV")
0^118^B36155717
"RTN","TIUPNCV",1,0)
TIUPNCV ;SLC/DJP-SF/JLI ;PNs ==> TIU cnv rtns ;5-7-97
"RTN","TIUPNCV",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPNCV",3,0)
 ;
"RTN","TIUPNCV",4,0)
DRIVER ;Entry point; initializes counters
"RTN","TIUPNCV",5,0)
 S TIUFPRIV=1
"RTN","TIUPNCV",6,0)
 S:'$D(U) U="^" S (GMRPCTR,TIUCTR,ERRCTR)=0 S:'$D(GMRPST) GMRPST=0
"RTN","TIUPNCV",7,0)
 ;above- if not a Restart, initializes counter
"RTN","TIUPNCV",8,0)
 S $P(^TIU(8925.97,1,0),U,2)=$$NOW^XLFDT
"RTN","TIUPNCV",9,0)
 S GMRPFINI=$P($G(^TIU(8925.97,1,0)),U,8)
"RTN","TIUPNCV",10,0)
 S TIUSTRT=$$DATE^TIULS($$NOW^TIULC,"MM/DD/YY HR:MIN")
"RTN","TIUPNCV",11,0)
 ;
"RTN","TIUPNCV",12,0)
RESTART ;Restarts Progress Note conversion
"RTN","TIUPNCV",13,0)
 S GMRPIFN=GMRPST
"RTN","TIUPNCV",14,0)
 F  S GMRPIFN=$O(^GMR(121,GMRPIFN)) Q:'GMRPIFN  Q:GMRPIFN=$G(GMRPFINI)  D
"RTN","TIUPNCV",15,0)
 . D MAIN
"RTN","TIUPNCV",16,0)
 S TIUEND=$$DATE^TIULS($$NOW^TIULC,"MM/DD/YY HR:MIN")
"RTN","TIUPNCV",17,0)
 ;
"RTN","TIUPNCV",18,0)
CLEANUP ;Releases Bulletin & kills variables and scratch files
"RTN","TIUPNCV",19,0)
 W !!?20,"***** CONVERSION HAS FINISHED *****",!
"RTN","TIUPNCV",20,0)
STOP D REPORT^TIUPNCV4
"RTN","TIUPNCV",21,0)
 K GMRPCTR,TIUCTR,GMRPST,GMRPIFN,GMRPFL,TIUFPRIV
"RTN","TIUPNCV",22,0)
 K ^TMP("TIUIFN")
"RTN","TIUPNCV",23,0)
 I $P($G(^TIU(8925.97,1,2)),U,3)'>0
"RTN","TIUPNCV",24,0)
 I  S $P(^TIU(8925.97,1,0),U,3)=$$NOW^XLFDT
"RTN","TIUPNCV",25,0)
 S $P(^TIU(8925.97,1,2),U,3)=0
"RTN","TIUPNCV",26,0)
 Q
"RTN","TIUPNCV",27,0)
 ;
"RTN","TIUPNCV",28,0)
MAIN ;Main loop for each record
"RTN","TIUPNCV",29,0)
 I $P($G(^TIU(8925.97,1,2)),U,3)>0
"RTN","TIUPNCV",30,0)
 I  S TIUEND=$$DATE^TIULS($$NOW^TIULC,"MM/DD/YY HR:MIN") G STOP
"RTN","TIUPNCV",31,0)
 N PN S GMRPCTR=GMRPCTR+1
"RTN","TIUPNCV",32,0)
 ;
"RTN","TIUPNCV",33,0)
MAIN1 ;
"RTN","TIUPNCV",34,0)
 Q:'+$P($G(^GMR(121,GMRPIFN,1)),U,3)
"RTN","TIUPNCV",35,0)
 Q:$P($G(^GMR(121,GMRPIFN,5)),U)="1"
"RTN","TIUPNCV",36,0)
 ;do not convert unsigned/uncosigned notes
"RTN","TIUPNCV",37,0)
 ;
"RTN","TIUPNCV",38,0)
 ;ignore if test patient note
"RTN","TIUPNCV",39,0)
 Q:$E($P($G(^DPT(+$P($G(^GMR(121,GMRPIFN,0)),U,2),0)),U,9),1,5)="00000"
"RTN","TIUPNCV",40,0)
 ;
"RTN","TIUPNCV",41,0)
 S GMR0=$G(^GMR(121,GMRPIFN,0)) ;using naked ref below
"RTN","TIUPNCV",42,0)
 S GMR1=$G(^(1)),GMR5=$G(^(5)),GMR9=$G(^(9)),GMR100=$G(^(100))
"RTN","TIUPNCV",43,0)
 F I=1,2,3,5,6 S PN($P(".01^.02^.03^.04^.05^.06",U,I))=$P(GMR0,U,I)
"RTN","TIUPNCV",44,0)
 F I=1:1:5 S PN($P("1^2^3^4^4.1",U,I))=$P(GMR1,U,I)
"RTN","TIUPNCV",45,0)
 F I=1:1:4 S PN($P("5^6^7^7.1",U,I))=$P(GMR5,U,I)
"RTN","TIUPNCV",46,0)
 S PN(9)=$P(GMR9,U)
"RTN","TIUPNCV",47,0)
 S PN(100)=$P(GMR100,U)
"RTN","TIUPNCV",48,0)
 I (PN(.02)="")!(PN(.03)="")!(PN(.05)="")!(PN(1)="")!(PN(2)="") D  Q
"RTN","TIUPNCV",49,0)
 . S PROBLEM="Progress Note - IFN #"_GMRPIFN_" is incomplete."
"RTN","TIUPNCV",50,0)
 . D ERRORLOG^TIUPNCV3 K BADREC,PN,PROBLEM Q
"RTN","TIUPNCV",51,0)
 ;
"RTN","TIUPNCV",52,0)
 D TIUFLDS
"RTN","TIUPNCV",53,0)
 ;
"RTN","TIUPNCV",54,0)
 D TITLE^TIUPNCV3 I $D(BADREC) D CLEANREC Q
"RTN","TIUPNCV",55,0)
 ;
"RTN","TIUPNCV",56,0)
 D RTNODE I $D(TIU("BAD")) D CLEANREC Q
"RTN","TIUPNCV",57,0)
 ;
"RTN","TIUPNCV",58,0)
 D SETFIELD^TIUPNCV1 I $D(BADREC) D WIPEOUT Q
"RTN","TIUPNCV",59,0)
 ;
"RTN","TIUPNCV",60,0)
 ;Builds the TIU record
"RTN","TIUPNCV",61,0)
 S DIE="^TIU(8925,",DA=TIUIFN D COPY I $D(BADREC) D WIPEOUT Q
"RTN","TIUPNCV",62,0)
 D TEXT
"RTN","TIUPNCV",63,0)
 D SIGSET ; D:TIU(1505)'="" SIGSET D:TIU(1511)'="" COSET
"RTN","TIUPNCV",64,0)
 D ^TIUPNCVX ;*** May uncomment for direct X-ref set ***
"RTN","TIUPNCV",65,0)
 ;S DA=TIUIFN,DIK="^TIU(8925," D IX1^DIK ; DO SETS ON X-REFS FOR ENTRY
"RTN","TIUPNCV",66,0)
 S $P(^TIU(8925.97,1,0),U,5)=GMRPIFN  ;last PN successfully processed
"RTN","TIUPNCV",67,0)
 S $P(^TIU(8925.97,1,2),U,2)=TIUIFN  ;last IEN used within ^TIU(8925,
"RTN","TIUPNCV",68,0)
 I TIUCTR=1 S $P(^TIU(8925.97,1,2),U,1)=TIUIFN  ;first IEN in ^TIU(8925,
"RTN","TIUPNCV",69,0)
 S TIUCTR=TIUCTR+1
"RTN","TIUPNCV",70,0)
 S $P(^TIU(8925.97,1,0),U,6)=TIUCTR  ;records # of TIU documents built
"RTN","TIUPNCV",71,0)
 S ^GMR(121,"CNV",GMRPIFN)=TIUIFN
"RTN","TIUPNCV",72,0)
 I '(TIUIFN#500) W "."
"RTN","TIUPNCV",73,0)
 D CLEANREC
"RTN","TIUPNCV",74,0)
 Q
"RTN","TIUPNCV",75,0)
 ;
"RTN","TIUPNCV",76,0)
CLEANREC ;Cleans partition after entry of record
"RTN","TIUPNCV",77,0)
 K TIU,ESIG,PN,ATH,P1,P2,P3,P4,P5,C1,C2,C3,PNT,BADREC,TIUD,TIUNM,TIUT
"RTN","TIUPNCV",78,0)
 K TMSG,TYP,COSIGN,TIUCOMPO,TIUCTYP,TYPE
"RTN","TIUPNCV",79,0)
 K ^TMP("TIUBRK",GMRPIFN)
"RTN","TIUPNCV",80,0)
 Q
"RTN","TIUPNCV",81,0)
 ;
"RTN","TIUPNCV",82,0)
WIPEOUT ;Clears ^TIU(8925 if record is found to be incomplete
"RTN","TIUPNCV",83,0)
 S DIK="^TIU(8925,",DA=TIUIFN D ^DIK
"RTN","TIUPNCV",84,0)
 K ^TMP("TIUIFN",GMRPIFN)
"RTN","TIUPNCV",85,0)
 I $G(TIU(.03)) S X=TIU(.03) D SUB^AUPNVSIT
"RTN","TIUPNCV",86,0)
 D CLEANREC
"RTN","TIUPNCV",87,0)
 Q
"RTN","TIUPNCV",88,0)
 ;
"RTN","TIUPNCV",89,0)
TIUFLDS ;Sets TIU variables with PN data
"RTN","TIUPNCV",90,0)
 ;
"RTN","TIUPNCV",91,0)
 ; TIU(.01) SET IN TITLESET TIUPNCV3
"RTN","TIUPNCV",92,0)
 S TIU(.02)=PN(.02) ;  .02 PATIENT - .02 PATIENT
"RTN","TIUPNCV",93,0)
 ; TIU(.03) SET IN VISIT TIUPNCV1
"RTN","TIUPNCV",94,0)
 ; TIU(.04) SET IN TITLESET TIUPNCV3
"RTN","TIUPNCV",95,0)
 ; TIU(.05) SET IN SIGVAR/COSVAR TIUPNCV1
"RTN","TIUPNCV",96,0)
 S TIU(.06)=$S(+PN(100):$G(^GMR(121,"CNV",+PN(100))),1:"")
"RTN","TIUPNCV",97,0)
 S TIU(.07)=PN(.03) ; USE DATE/TIME OF NOTE FOR EPISODE DATE TIME
"RTN","TIUPNCV",98,0)
 S TIU(.13)="E"
"RTN","TIUPNCV",99,0)
 S TIU(1201)=PN(.01) ;  1201 ENTRY DATE/TIME - .01 FILE ENTRY DATE
"RTN","TIUPNCV",100,0)
 S (TIU(1202),TIU(1204))=PN(2) ; 1202 AUTHOR/DICTATOR - 2 AUTHOR
"RTN","TIUPNCV",101,0)
 ; expected signer 1204 in TIU is PN(2)- AUTHOR in GMR
"RTN","TIUPNCV",102,0)
 S (TIU(1205),TIU(1211))=PN(9) ; 1205 HOSPITAL LOCATION - 9 LOCATION
"RTN","TIUPNCV",103,0)
 S TIU(1301)=PN(.03) ; 1301 REFERENCE DATE - .03 DATE/TIME OF PROG NOTE
"RTN","TIUPNCV",104,0)
 S TIU(1302)=PN(.05) ; 1302 ENTERED BY - .05 TRANSCRIBER
"RTN","TIUPNCV",105,0)
 S TIU(1303)="C"
"RTN","TIUPNCV",106,0)
 S TIU(1501)=PN(4) ; 1501 SIGNATURE DATE/TIME - 4 DATE/TIME SIGNED
"RTN","TIUPNCV",107,0)
 S TIU(1502)=PN(3) ; 1502 SIGNED BY - 3 E-SIG (AUTHOR)
"RTN","TIUPNCV",108,0)
 S (TIU(1503),TIU(1504),TIU(1505))=""
"RTN","TIUPNCV",109,0)
 S TIU(1506)=PN(5) ; 1506 COSIGNATURE NEEDED - 5 COSIGNATURE REQUIRED
"RTN","TIUPNCV",110,0)
 S TIU(1507)=PN(7) ; 1507 COSIGNATURE DATE/TIME - 7 DATE/TIME COSIGNED
"RTN","TIUPNCV",111,0)
 S (TIU(1208),TIU(1508))=PN(6) ; 1508 COSIGNED BY - 6 COSIGNER
"RTN","TIUPNCV",112,0)
 S (TIU(1509),TIU(1510),TIU(1511))=""
"RTN","TIUPNCV",113,0)
 S (TIU(1512),TIU("SIGCHART"))=PN(4.1) ;1512 - 4.1 SIGNATURE IN CHART
"RTN","TIUPNCV",114,0)
 S (TIU(1513),TIU("COSCHART"))=PN(7.1) ;1513 - 7.1 COSIGNATURE IN CHART
"RTN","TIUPNCV",115,0)
 S TIU("MHCONV")=PN(.06)
"RTN","TIUPNCV",116,0)
 S TIU("PARENT")=$S(+PN(100):$G(^GMR(121,"CNV",+PN(100))),1:"")
"RTN","TIUPNCV",117,0)
 S TIU("SPECDT")=$P(TIU(1201),".",1)
"RTN","TIUPNCV",118,0)
 S TIU("TITLE")=PN(1)
"RTN","TIUPNCV",119,0)
 Q
"RTN","TIUPNCV",120,0)
 ;
"RTN","TIUPNCV",121,0)
RTNODE ;Sets 0 Node for TIU record
"RTN","TIUPNCV",122,0)
 S TIUFPRIV=1
"RTN","TIUPNCV",123,0)
 S (DIC,DLAYGO)=8925,DIC(0)="LN",X=""""_"`"_TIU(.01)_""""
"RTN","TIUPNCV",124,0)
 D ^DIC I +Y<1 S TIU("BAD")=1 Q
"RTN","TIUPNCV",125,0)
 S TIUIFN=+Y,^TMP("TIUIFN",GMRPIFN)=TIUIFN
"RTN","TIUPNCV",126,0)
 Q
"RTN","TIUPNCV",127,0)
 ;
"RTN","TIUPNCV",128,0)
COPY ;Writes data from ^GMR(121,GMRPIFN --> ^TIU(8925,TIUIFN
"RTN","TIUPNCV",129,0)
 S ^TIU(8925,TIUIFN,0)=TIU(.01)_U_TIU(.02)_U_TIU(.03)_U_TIU(.04)_U_TIU(.05)_U_TIU(.06)_U_TIU(.07)_U_U_U_U_U_U_TIU(.13)
"RTN","TIUPNCV",130,0)
 S ^TIU(8925,TIUIFN,12)=TIU(1201)_U_TIU(1202)_U_U_TIU(1204)_U_TIU(1205)_U_U_U_TIU(1208)_U_U_U_TIU(1211)
"RTN","TIUPNCV",131,0)
 S ^TIU(8925,TIUIFN,13)=TIU(1301)_U_TIU(1302)_U_TIU(1303)
"RTN","TIUPNCV",132,0)
 I $D(TIUNEWTY) S DR=".01////"_TIUNEWTY D ^DIE K TIUNEWTY
"RTN","TIUPNCV",133,0)
 Q
"RTN","TIUPNCV",134,0)
 ;
"RTN","TIUPNCV",135,0)
TEXT ;Copies text
"RTN","TIUPNCV",136,0)
 I $D(^TMP("TIUHOLD",GMRPIFN)) M ^TIU(8925,TIUIFN,"TEXT")=^TMP("TIUHOLD",GMRPIFN,10) K ^TMP("TIUHOLD",GMRPIFN),^TMP("TIUMERGE",GMRPIFN) Q
"RTN","TIUPNCV",137,0)
 Q
"RTN","TIUPNCV",138,0)
 ;
"RTN","TIUPNCV",139,0)
SIGSET ;Sets ^TIU(8925 signature fields
"RTN","TIUPNCV",140,0)
 N X
"RTN","TIUPNCV",141,0)
 I TIU(1502)>0 S TIU(1503)=$$ENCRYPT^TIULC1(TIU(1503),1,$$CHKSUM^TIULC("^TIU(8925,"_TIUIFN_",""TEXT"")")),TIU(1504)=$$ENCRYPT^TIULC1(TIU(1504),1,$$CHKSUM^TIULC("^TIU(8925,"_TIUIFN_",""TEXT"")"))
"RTN","TIUPNCV",142,0)
 I TIU(1508)>0 S TIU(1509)=$$ENCRYPT^TIULC1(TIU(1509),1,$$CHKSUM^TIULC("^TIU(8925,"_TIUIFN_",""TEXT"")")),TIU(1510)=$$ENCRYPT^TIULC1(TIU(1510),1,$$CHKSUM^TIULC("^TIU(8925,"_TIUIFN_",""TEXT"")"))
"RTN","TIUPNCV",143,0)
 S X=TIU(1501)_U_TIU(1502)_U_TIU(1503)_U_TIU(1504)_U_TIU(1505)
"RTN","TIUPNCV",144,0)
 S ^TIU(8925,TIUIFN,15)=X_U_TIU(1506)_U_TIU(1507)_U_TIU(1508)_U_TIU(1509)_U_TIU(1510)_U_TIU(1511)_U_TIU(1512)_U_TIU(1513)
"RTN","TIUPNCV",145,0)
 Q
"RTN","TIUPNCV1")
0^119^B7182326
"RTN","TIUPNCV1",1,0)
TIUPNCV1 ;SLC/DJP-SF/JLI ;PNs ==> TIU cnv rtns ;5-7-97
"RTN","TIUPNCV1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPNCV1",3,0)
SETFIELD ;Sets fields for copy into TIU Document File
"RTN","TIUPNCV1",4,0)
 D VISIT,SIGVAR,COSVAR,ADDENDA,FIELDS
"RTN","TIUPNCV1",5,0)
 Q
"RTN","TIUPNCV1",6,0)
 ;
"RTN","TIUPNCV1",7,0)
VISIT ;Sets Visit Tracking data elements
"RTN","TIUPNCV1",8,0)
 N DFN,VDT,TIUVSIT
"RTN","TIUPNCV1",9,0)
 S DFN=TIU(.02),VDT=TIU(1301)
"RTN","TIUPNCV1",10,0)
 D PXAPI^TIUPXAP1(.TIUVSIT,DFN,"",VDT,"E")
"RTN","TIUPNCV1",11,0)
 I +$G(TIUVSIT)'>0 S PROBLEM="Progress Note - IFN "_GMRPIFN_":  Unable to create Visit Tracking entry based on entry date."  D ERRORLOG^TIUPNCV3 K PROBLEM Q
"RTN","TIUPNCV1",12,0)
 S TIU(.03)=+$G(TIUVSIT)
"RTN","TIUPNCV1",13,0)
 Q
"RTN","TIUPNCV1",14,0)
 ;
"RTN","TIUPNCV1",15,0)
FIELDS ;Individual fields, such as S-O-A-P, are converted as a single document
"RTN","TIUPNCV1",16,0)
 S CNT1=0,CNT2=0,RENUM=0
"RTN","TIUPNCV1",17,0)
 F GMRPFLD=10,20,21,22,23,30,32,33,34,40,41,42,43,44,45,46,47,48,8 I $D(^GMR(121,GMRPIFN,GMRPFLD)) D WHATSIT^TIUPNCV2
"RTN","TIUPNCV1",18,0)
 I RENUM=1 D RENUM^TIUPNCV2 K RENUM
"RTN","TIUPNCV1",19,0)
 Q
"RTN","TIUPNCV1",20,0)
 ;
"RTN","TIUPNCV1",21,0)
SIGVAR ;Sets additional variables for signature block -- 
"RTN","TIUPNCV1",22,0)
 ;.05 STATUS
"RTN","TIUPNCV1",23,0)
 ;1503 SIGNATURE BLOCK NAME
"RTN","TIUPNCV1",24,0)
 ;1504 SIGNATURE BLOCK TITLE
"RTN","TIUPNCV1",25,0)
 ;1505 SIGNATURE BLOCK MODE
"RTN","TIUPNCV1",26,0)
 I TIU(1502)="",TIU("SIGCHART")="" S TIUSTAT="UNSIGNED",TIU(.05)=$$STATUS^TIUPNCV3(TIUSTAT),TIU(1505)="" K TIUSTAT Q
"RTN","TIUPNCV1",27,0)
 S:TIU("SIGCHART")'="" TIU(1502)=TIU(1512)
"RTN","TIUPNCV1",28,0)
 S DR=$G(^VA(200,TIU(1502),20)),TIU(1503)=$P(DR,U,2)
"RTN","TIUPNCV1",29,0)
 S TIU(1504)=$P(DR,U,3),TIU(1505)=$S(TIU(1512)="":"E",1:"")
"RTN","TIUPNCV1",30,0)
 S TIUSTAT="COMPLETED",TIU(.05)=$$STATUS^TIUPNCV3(TIUSTAT)
"RTN","TIUPNCV1",31,0)
 I TIU(1512)'="" S TIUSTAT="COMPLETED",TIU(.05)=$$STATUS^TIUPNCV3(TIUSTAT),TIU(1505)="C"
"RTN","TIUPNCV1",32,0)
 K DIC,X,Y,DIQ,DR,TIUSTAT,DA Q
"RTN","TIUPNCV1",33,0)
 ;
"RTN","TIUPNCV1",34,0)
COSVAR ;Sets required variables for cosignature block
"RTN","TIUPNCV1",35,0)
 ;.05 STATUS
"RTN","TIUPNCV1",36,0)
 ;1509 COSIGNATURE BLOCK NAME
"RTN","TIUPNCV1",37,0)
 ;1510 COSIGNATURE BLOCK TITLE
"RTN","TIUPNCV1",38,0)
 ;1511 COSIGNATURE BLOCK MODE
"RTN","TIUPNCV1",39,0)
 S TIU(1511)="" I TIU(1506)="",TIU(1508)="",TIU("COSCHART")="" Q
"RTN","TIUPNCV1",40,0)
 I TIU(1508)="",TIU("COSCHART")="" S TIUSTAT="UNCOSIGNED",TIU(.05)=$$STATUS^TIUPNCV3(TIUSTAT) K TIUSTAT Q
"RTN","TIUPNCV1",41,0)
 S:TIU("COSCHART")='"" TIU(1508)=TIU(1513)
"RTN","TIUPNCV1",42,0)
 S DR=$G(^VA(200,TIU(1508),20)),TIU(1509)=$P(DR,U,2)
"RTN","TIUPNCV1",43,0)
 S TIU(1510)=$P(DR,U,3),TIU(1511)=$S(TIU(1513)="":"E",1:"")
"RTN","TIUPNCV1",44,0)
 S TIUSTAT="COMPLETED",TIU(.05)=$$STATUS^TIUPNCV3(TIUSTAT)
"RTN","TIUPNCV1",45,0)
 I TIU(1513)'="" S TIUSTAT="COMPLETED",TIU(.05)=$$STATUS^TIUPNCV3(TIUSTAT),TIU(1511)="C"
"RTN","TIUPNCV1",46,0)
 K DIC,X,Y,DIQ,DR,TIUSTAT,DA Q
"RTN","TIUPNCV1",47,0)
 ;
"RTN","TIUPNCV1",48,0)
ADDENDA ;sets the Parent variable for notes that are addenda - .06 PARENT
"RTN","TIUPNCV1",49,0)
 Q:TIU("PARENT")=""
"RTN","TIUPNCV1",50,0)
 S PARENT=$G(^GMR(121,GMRPIFN,100))
"RTN","TIUPNCV1",51,0)
 S TIU("PARENT")=$G(^GMR(121,"CNV",PARENT))
"RTN","TIUPNCV1",52,0)
 S TIUNEWTY=+$$WHATITLE^TIUPUTU("ADDENDUM")
"RTN","TIUPNCV1",53,0)
 S TIU(.04)=$$DOCCLASS^TIULC1(TIUNEWTY)
"RTN","TIUPNCV1",54,0)
 Q
"RTN","TIUPNCV2")
0^120^B16280396
"RTN","TIUPNCV2",1,0)
TIUPNCV2 ;SLC/DJP-SF/JLI ;PNs ==> TIU cnv rtns ;5-7-97
"RTN","TIUPNCV2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPNCV2",3,0)
WHATSIT ;Determines component type
"RTN","TIUPNCV2",4,0)
 S A=GMRPFLD
"RTN","TIUPNCV2",5,0)
 ;
"RTN","TIUPNCV2",6,0)
 ;Admission/Assessment Sections
"RTN","TIUPNCV2",7,0)
 I A>39&(A<46) S LNHDR="ADMISSION ASSESSMENT",TX=$S(A=40:"EMOTIONAL STATE",A=41:"BEHAVIORAL ASSESSMENT",A=42:"SOCIAL STATUS",A=43:"REHABILITATION POTENTIAL",A=44:"EMPLOYMENT POTENTIAL",A=45:"DEGREE OF DANGER",1:"") D:TX'="" COUNTS Q
"RTN","TIUPNCV2",8,0)
 I A>45&(A<49) S LNHDR="ADMISSION ASSESSMENT",TX=$S(A=46:"ABNORMAL PHYSICAL FINDINGS",A=47:"INITIAL IMPRESSION/PROVISIONAL DX",A=48:"STATEMENT OF TREATMENT PLANNED",1:"") D:TX'="" COUNTS Q
"RTN","TIUPNCV2",9,0)
 ;
"RTN","TIUPNCV2",10,0)
 ;Final Discharge Note Segments
"RTN","TIUPNCV2",11,0)
 I A>29&(A<35) S LNHDR="FINAL DISCHARGE NOTE",TX=$S(A=30:"DXLS",A=31:"DISCHARGE BED SECTION",A=32:"OTHER DIAGNOSES",A=33:"OPERATIONS/PROCEDURES",A=34:"INSTRUCTIONS GIVEN TO PATIENT",1:"") D:TX'="" COUNTS Q
"RTN","TIUPNCV2",12,0)
 ;
"RTN","TIUPNCV2",13,0)
 ;SOAP Note Segments
"RTN","TIUPNCV2",14,0)
 I A>19&(A<24) S LNHDR="SOAP - GENERAL NOTE",TX=$S(A=20:"SUBJECTIVE",A=21:"OBJECTIVE",A=22:"ASSESSMENT",A=23:"PLAN",1:"") D:TX'="" COUNTS Q
"RTN","TIUPNCV2",15,0)
 I A=10 S LNHDR="" K TX D COUNTS
"RTN","TIUPNCV2",16,0)
 I A=8 S LNHDR="",TX="COMMENTS" D COUNTS
"RTN","TIUPNCV2",17,0)
 Q
"RTN","TIUPNCV2",18,0)
 ;
"RTN","TIUPNCV2",19,0)
COUNTS ;Pieces out line counts for word-processing fields
"RTN","TIUPNCV2",20,0)
 I $D(TX) S SUBTIL=TX
"RTN","TIUPNCV2",21,0)
 I (A=30)!(A=31)!(A=32) D SPECIAL Q
"RTN","TIUPNCV2",22,0)
 S CNTA=$P(^GMR(121,GMRPIFN,GMRPFLD,0),U,3)
"RTN","TIUPNCV2",23,0)
 S CNTB=$P(^GMR(121,GMRPIFN,GMRPFLD,0),U,4)
"RTN","TIUPNCV2",24,0)
 S TEXTDT=$P(^GMR(121,GMRPIFN,GMRPFLD,0),U,5)
"RTN","TIUPNCV2",25,0)
 D ONEDOC
"RTN","TIUPNCV2",26,0)
 Q
"RTN","TIUPNCV2",27,0)
 ;
"RTN","TIUPNCV2",28,0)
ONEDOC ;Pulls formatted notes together into a single word processing field
"RTN","TIUPNCV2",29,0)
 S RENUM=1
"RTN","TIUPNCV2",30,0)
 S CNT1=(CNT1+CNTA),CNT2=(CNT2+CNTB),FLD=GMRPFLD I GMRPFLD=8 S FLD=99
"RTN","TIUPNCV2",31,0)
 S ^TMP("TIUMERGE",GMRPIFN,0)="^"_"^"_CNT1_"^"_CNT2_"^"_TEXTDT
"RTN","TIUPNCV2",32,0)
 M ^TMP("TIUMERGE",GMRPIFN,FLD)=^GMR(121,GMRPIFN,GMRPFLD)
"RTN","TIUPNCV2",33,0)
 I $D(SUBTIL)&(GMRPFLD'=8)
"RTN","TIUPNCV2",34,0)
 I  S ^TMP("TIUMERGE",GMRPIFN,GMRPFLD,"TITLE")=SUBTIL
"RTN","TIUPNCV2",35,0)
 K SUBTIL
"RTN","TIUPNCV2",36,0)
 Q
"RTN","TIUPNCV2",37,0)
 ;
"RTN","TIUPNCV2",38,0)
COMMENT ;Appends word-processing contained in Field 8 - COMMENT
"RTN","TIUPNCV2",39,0)
 S X="COMMENT",GMRPFLD=8,RENUM=1,A=GMRPFLD
"RTN","TIUPNCV2",40,0)
 D COUNTS
"RTN","TIUPNCV2",41,0)
 S ^TMP("TIUMERGE",GMRPIFN,8,"TITLE")="COMMENT"
"RTN","TIUPNCV2",42,0)
 Q
"RTN","TIUPNCV2",43,0)
 ;
"RTN","TIUPNCV2",44,0)
RENUM ;Renumbers WP fields and inserts TITLE of component within field.
"RTN","TIUPNCV2",45,0)
 S PNFLD=0,T1=0,T2=0
"RTN","TIUPNCV2",46,0)
 F PNFLD=0:0 S PNFLD=$O(^TMP("TIUMERGE",GMRPIFN,PNFLD)) Q:PNFLD'>0  D
"RTN","TIUPNCV2",47,0)
 . I $D(^TMP("TIUMERGE",GMRPIFN,PNFLD,0)) K ^TMP("TIUMERGE",GMRPIFN,PNFLD,0)
"RTN","TIUPNCV2",48,0)
 . D SETHOLD
"RTN","TIUPNCV2",49,0)
 S ^TMP("TIUHOLD",GMRPIFN,10,0)="^^"_T2_"^"_T2_"^"_TEXTDT
"RTN","TIUPNCV2",50,0)
 K T1,T2,PNFLD
"RTN","TIUPNCV2",51,0)
 Q
"RTN","TIUPNCV2",52,0)
 ;
"RTN","TIUPNCV2",53,0)
SETHOLD ;Sets ^TMP("TIUHOLD") which contains the resequenced note
"RTN","TIUPNCV2",54,0)
 I $D(^TMP("TIUMERGE",GMRPIFN,PNFLD,"TITLE")) D
"RTN","TIUPNCV2",55,0)
 . S PNHDR=$P(^TMP("TIUMERGE",GMRPIFN,PNFLD,"TITLE"),U,1)
"RTN","TIUPNCV2",56,0)
 . S T2=(T2+1)
"RTN","TIUPNCV2",57,0)
 . S ^TMP("TIUHOLD",GMRPIFN,10,T2,0)=PNHDR
"RTN","TIUPNCV2",58,0)
 . K PNHDR
"RTN","TIUPNCV2",59,0)
 . K ^TMP("TIUMERGE",GMRPIFN,PNFLD,"TITLE")
"RTN","TIUPNCV2",60,0)
 F T1=0:0 S T1=$O(^TMP("TIUMERGE",GMRPIFN,PNFLD,T1)) Q:T1'>0  S T2=(T2+1),^TMP("TIUHOLD",GMRPIFN,10,T2,0)=^TMP("TIUMERGE",GMRPIFN,PNFLD,T1,0)
"RTN","TIUPNCV2",61,0)
 Q
"RTN","TIUPNCV2",62,0)
 ;
"RTN","TIUPNCV2",63,0)
SPECIAL ;Handles fields other than Word Processing
"RTN","TIUPNCV2",64,0)
 ;DXLS
"RTN","TIUPNCV2",65,0)
 I $P($G(^GMR(121,GMRPIFN,30)),U,1) S TIUDX=$P(^(30),U,1),SPECIAL=$$DXLS^TIUPNCV3(TIUDX),GMRPFLD=30,SUBTIL="DXLS" D SETSPEC
"RTN","TIUPNCV2",66,0)
 ;BEDSECTION
"RTN","TIUPNCV2",67,0)
 I $P($G(^GMR(121,GMRPIFN,30)),U,2) S TIUBS=$P(^(30),U,2),SPECIAL=$$BEDSEC^TIUPNCV3(TIUBS),GMRPFLD=31,SUBTIL="DISCHARGE BED SECTION" D SETSPEC
"RTN","TIUPNCV2",68,0)
 ;OTHER DIAGNOSES
"RTN","TIUPNCV2",69,0)
 I $D(^GMR(121,GMRPIFN,32)) S GMRPFLD=32,SUBTIL="OTHER DIAGNOSES" D FREETXT
"RTN","TIUPNCV2",70,0)
 Q
"RTN","TIUPNCV2",71,0)
 ;
"RTN","TIUPNCV2",72,0)
SETSPEC ;Converts non-word-processing fields into word-processing fields
"RTN","TIUPNCV2",73,0)
 S ^TMP("TIUMERGE",GMRPIFN,GMRPFLD,1,0)=SUBTIL_":"
"RTN","TIUPNCV2",74,0)
 S ^TMP("TIUMERGE",GMRPIFN,GMRPFLD,2,0)=SPECIAL
"RTN","TIUPNCV2",75,0)
 K SUBTIL
"RTN","TIUPNCV2",76,0)
 Q
"RTN","TIUPNCV2",77,0)
 ;
"RTN","TIUPNCV2",78,0)
FREETXT ;Converts multiple freetext field into word-processing fields
"RTN","TIUPNCV2",79,0)
 S F2=0,F3=1,^TMP("TIUMERGE",GMRPIFN,GMRPFLD,1,0)=SUBTIL_":"
"RTN","TIUPNCV2",80,0)
 S F1=$P(^GMR(121,GMRPIFN,GMRPFLD,0),U,3) F F2=1:1:F1 D
"RTN","TIUPNCV2",81,0)
 . S F3=F3+1
"RTN","TIUPNCV2",82,0)
 . S ^TMP("TIUMERGE",GMRPIFN,GMRPFLD,F3,0)=^GMR(121,GMRPIFN,GMRPFLD,F2,0)
"RTN","TIUPNCV2",83,0)
 K SUBTIL,F1,F2,F3
"RTN","TIUPNCV2",84,0)
 Q
"RTN","TIUPNCV3")
0^121^B14727650
"RTN","TIUPNCV3",1,0)
TIUPNCV3 ;SLC/DJP ;PNs ==> TIU cnv rtns ;5-7-97
"RTN","TIUPNCV3",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPNCV3",3,0)
ERRORLOG ;Captures information on records that are NOT converted.
"RTN","TIUPNCV3",4,0)
 S BADREC=1 I '$D(ERRCTR) S ERRCTR=0
"RTN","TIUPNCV3",5,0)
 S ERRCTR=ERRCTR+1 S $P(^TIU(8925.97,1,0),U,7)=ERRCTR
"RTN","TIUPNCV3",6,0)
 S ^GMR(121,"ERROR",GMRPIFN)=PROBLEM
"RTN","TIUPNCV3",7,0)
 Q
"RTN","TIUPNCV3",8,0)
 ;
"RTN","TIUPNCV3",9,0)
TITLE ;Defines variables required for Document Definition look-up
"RTN","TIUPNCV3",10,0)
 ; PNT=^GMR(121.2,TIU("TITLE")),0)
"RTN","TIUPNCV3",11,0)
 ; (1)=TITLE * (2)=TYPE * (3) TYPE NARRATIVE
"RTN","TIUPNCV3",12,0)
 ; (4)=INACTIVE * (5) TIU TITLE IEN
"RTN","TIUPNCV3",13,0)
 S PNT=$G(^GMR(121.2,TIU("TITLE"),0))
"RTN","TIUPNCV3",14,0)
 I PNT="" S PROBLEM="Progress Note - IFN "_GMRPIFN_":  TITLE not defined in ^GMR(121.2 - (broken pointer)." D ERRORLOG K PROBLEM Q
"RTN","TIUPNCV3",15,0)
 S PNT(5)=$P($G(^GMR(121.2,TIU("TITLE"),1)),U,3)
"RTN","TIUPNCV3",16,0)
 I PNT(5)'>0 S PROBLEM="Progress Note IFN "_GMRPIFN_":  TITLE not defined in ^TIU(8925.1." D ERRORLOG K PROBLEM Q
"RTN","TIUPNCV3",17,0)
 S PNT(1)=$P($G(PNT),U,1),PNT(2)=$P($G(PNT),U,2),PNT(4)=$P($G(PNT),U,4)
"RTN","TIUPNCV3",18,0)
 I PNT(1)=""!PNT(2)="" S PROBLEM="Progress Note - IFN "_GMRPIFN_":  Incomplete TITLE information in ^GMR(121.2." D ERRORLOG K PROBLEM Q
"RTN","TIUPNCV3",19,0)
 S X=PNT(2),DIC=121.1,DIC(0)="X,Z" D ^DIC K DIC
"RTN","TIUPNCV3",20,0)
 I +Y<0 S PROBLEM="Progress Note IFN "_GMRPIFN_":  TYPE not defined in ^GMR(121.1 (broken pointer)." D ERRORLOG K PROBLEM Q
"RTN","TIUPNCV3",21,0)
 S PNT(3)=$P(Y,U,2)
"RTN","TIUPNCV3",22,0)
 I $P($G(^TIU(8925.1,PNT(5),0)),U,4)'="DOC" S PROBLEM="Progress Note Title:  "_PNT(3)_" not defined correctly in ^TIU(8925.1." D ERRORLOG K PROBLEM Q
"RTN","TIUPNCV3",23,0)
 I PNT(4)'="" S TIU(1701)=PNT(1),X=PNT(2) D TITLESET Q
"RTN","TIUPNCV3",24,0)
 D TITLESET
"RTN","TIUPNCV3",25,0)
 Q
"RTN","TIUPNCV3",26,0)
 ;
"RTN","TIUPNCV3",27,0)
TITLESET ;Sets pointers for Document Definition
"RTN","TIUPNCV3",28,0)
 ; .01 DOCUMENT TYPE * .04 PARENT DOCUMENT TYPE
"RTN","TIUPNCV3",29,0)
 ; 1506 COSIGNATURE REQUIRED * 1701 SUBJECT (description)
"RTN","TIUPNCV3",30,0)
 S TIU(.01)=PNT(5),TIUNM=$P(^TIU(8925.1,PNT(5),0),U,1)
"RTN","TIUPNCV3",31,0)
 S TIU(.04)="",TIU(.04)=$O(^TIU(8925.1,"AD",TIU(.01),TIU(.04)))
"RTN","TIUPNCV3",32,0)
 K X,Y,DIC
"RTN","TIUPNCV3",33,0)
 Q
"RTN","TIUPNCV3",34,0)
 ;
"RTN","TIUPNCV3",35,0)
STATUS(TIUSTAT) ;Returns DOCUMENT STATUS pointer
"RTN","TIUPNCV3",36,0)
 N DIC,X,Y
"RTN","TIUPNCV3",37,0)
 I TIU("MHCONV")="Y" S TIUSTAT="COMPLETED"
"RTN","TIUPNCV3",38,0)
 S X=TIUSTAT,DIC="^TIU(8925.6,",DIC(0)="X,Z" D ^DIC Q:+Y<1
"RTN","TIUPNCV3",39,0)
 Q $P(Y,U,1)
"RTN","TIUPNCV3",40,0)
 ;
"RTN","TIUPNCV3",41,0)
DXLS(TIUDX) ;Resolves variable DXLS ptr from Final Discharge Note
"RTN","TIUPNCV3",42,0)
 S P5=""
"RTN","TIUPNCV3",43,0)
 S P1=$P(TIUDX,";",2) ;    Global reference
"RTN","TIUPNCV3",44,0)
 S P2=$P(TIUDX,";",1) ;    IEN
"RTN","TIUPNCV3",45,0)
 S P3="^"_P1_P2_","_0_")" ;^(0) reference
"RTN","TIUPNCV3",46,0)
 S P4="^"_P1_P2_",""D"")" ;^("D") reference
"RTN","TIUPNCV3",47,0)
 I P1["ICD9" D  Q P5
"RTN","TIUPNCV3",48,0)
 .S P5=$P(@P3,U,3)_"  ("_$P(@P3,U)_")"
"RTN","TIUPNCV3",49,0)
 .I P1["YSD" D  Q P5
"RTN","TIUPNCV3",50,0)
 ..S P4=$G(@P4) Q:P4']""
"RTN","TIUPNCV3",51,0)
 ..S P5=P4
"RTN","TIUPNCV3",52,0)
 ..S P3=$P($G(@P3),U)
"RTN","TIUPNCV3",53,0)
 ..S:P3]"" P5=P5_"  ("_P3_")"
"RTN","TIUPNCV3",54,0)
 .I P1["DIC" D
"RTN","TIUPNCV3",55,0)
 ..S P5=$P(@P3,U)_"  ("_$P(@P3,U,2)_")"
"RTN","TIUPNCV3",56,0)
 Q P5
"RTN","TIUPNCV3",57,0)
 ;
"RTN","TIUPNCV3",58,0)
BEDSEC(TIUBS) ;Resolves D/C Bedsection ptr from the Final Discharge Note
"RTN","TIUPNCV3",59,0)
 N Y
"RTN","TIUPNCV3",60,0)
 S Y=$P(^DIC(42,TIUBS,0),U,1)
"RTN","TIUPNCV3",61,0)
 Q Y
"RTN","TIUPNCV3",62,0)
 ;
"RTN","TIUPNCV3",63,0)
ROLLEM ;Rolls back ^GMR(121 entries in ^TIU(8925
"RTN","TIUPNCV3",64,0)
 K DIR W @IOF W !!?16,"****** ROLL BACK ******"
"RTN","TIUPNCV3",65,0)
 W !!?5,"This option will delete all progress notes entered"
"RTN","TIUPNCV3",66,0)
 W !?5,"into ^TIU(8925 from the GMRPN/TIU Conversion.  The"
"RTN","TIUPNCV3",67,0)
 W !?5,"option uses ^DIK to roll back the file.  Run time is"
"RTN","TIUPNCV3",68,0)
 W !?5,"dependent upon the number of entries made during the"
"RTN","TIUPNCV3",69,0)
 W !?5,"conversion."
"RTN","TIUPNCV3",70,0)
 W !! S DIR(0)="Y",DIR("A")="Do you want to continue",DIR("B")="YES"
"RTN","TIUPNCV3",71,0)
 S DIR("?")="^D HELP10^TIUPNCV3" D ^DIR I $D(DIRUT)!(Y=0) Q
"RTN","TIUPNCV3",72,0)
 W !!?5,"BEGINNING ROLL BACK...",!
"RTN","TIUPNCV3",73,0)
 S TST=$P($G(^TIU(8925.97,1,2)),U,1),LST=$P($G(^TIU(8925.97,1,2)),U,2)
"RTN","TIUPNCV3",74,0)
 S DIK="^TIU(8925,"
"RTN","TIUPNCV3",75,0)
 Q:TST!LST=""
"RTN","TIUPNCV3",76,0)
 F DA=TST:1:LST D:$P($G(^TIU(8925,DA,13)),U,3)="C" ^DIK
"RTN","TIUPNCV3",77,0)
 W !!,"ROLLBACK COMPLETED",!
"RTN","TIUPNCV3",78,0)
 K TST,DIK,LST,DA,TIUDIV
"RTN","TIUPNCV3",79,0)
 Q
"RTN","TIUPNCV3",80,0)
 ;
"RTN","TIUPNCV3",81,0)
HELP10 ;Help text for ROLLBACK prompt
"RTN","TIUPNCV3",82,0)
 W !!?5,"Press <ret> to continue with roll back of Progress Notes"
"RTN","TIUPNCV3",83,0)
 W !?5,"entered during the conversion.  The rollback will begin and"
"RTN","TIUPNCV3",84,0)
 W !?5,"based on rollback fields in ^TIU(8925.97, TIU Conversions."
"RTN","TIUPNCV3",85,0)
 W !!?5,"Enter NO or ""^"" to stop this option."
"RTN","TIUPNCV3",86,0)
 Q
"RTN","TIUPNCV3",87,0)
 ;
"RTN","TIUPNCV4")
0^122^B18242292
"RTN","TIUPNCV4",1,0)
TIUPNCV4 ;SLC/DJP ;PNs ==> TIU cnv rtns ;5-7-97
"RTN","TIUPNCV4",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPNCV4",3,0)
 ;
"RTN","TIUPNCV4",4,0)
ENTRY ;Entry point to set-up conversion
"RTN","TIUPNCV4",5,0)
 N DIC,TIUQUEUE
"RTN","TIUPNCV4",6,0)
 I $G(DUZ)'>0 W !!,"DUZ must be defined as an active user!",! Q
"RTN","TIUPNCV4",7,0)
 S TIU("DUZ")=DUZ
"RTN","TIUPNCV4",8,0)
 D INTRO^TIUPNCV5 I $G(TIU("QUIT")) K TIU Q
"RTN","TIUPNCV4",9,0)
 I $P($G(^TIU(8925.97,1,0)),U,3) W !!,"Conversion has been completed.",! K TIU Q
"RTN","TIUPNCV4",10,0)
 W ! S DIR(0)="Y",DIR("A")="Are you sure everything is okay"
"RTN","TIUPNCV4",11,0)
 S DIR("B")="NO",DIR("?")="^D HELP1^TIUPNCV4" D ^DIR Q:$D(DIRUT)!(Y=0)
"RTN","TIUPNCV4",12,0)
 S TIUQUEUE=$$READ^TIUU("Y","Would you like to QUEUE this Process","NO")
"RTN","TIUPNCV4",13,0)
 I +TIUQUEUE D PNDEVICE Q
"RTN","TIUPNCV4",14,0)
 W !!?9,$C(7),"Progress Notes Conversion Running in Foreground",!
"RTN","TIUPNCV4",15,0)
 D DRIVER^TIUPNCV
"RTN","TIUPNCV4",16,0)
 Q
"RTN","TIUPNCV4",17,0)
 ;
"RTN","TIUPNCV4",18,0)
PNDEVICE ;Permits site to queue conversion
"RTN","TIUPNCV4",19,0)
 N %,ZTDTH,ZTDESC,ZTIO,ZTSAVE,ZTSK,ZTRTN
"RTN","TIUPNCV4",20,0)
 S ZTSAVE("TIU*")="",ZTSAVE("GMRP*")=""
"RTN","TIUPNCV4",21,0)
 S:'$D(ZTDESC) ZTDESC="TIU PN CONVERSION"
"RTN","TIUPNCV4",22,0)
 S ZTRTN="DRIVER^TIUPNCV",ZTIO="" D ^%ZTLOAD
"RTN","TIUPNCV4",23,0)
 W !,$S($D(ZTSK):"Request Queued!",1:"Request Cancelled."),!
"RTN","TIUPNCV4",24,0)
 D ^%ZISC
"RTN","TIUPNCV4",25,0)
 Q
"RTN","TIUPNCV4",26,0)
 ;
"RTN","TIUPNCV4",27,0)
REPORT ;sends bulletin to initiator of conversion
"RTN","TIUPNCV4",28,0)
 I '$D(TIUUSER) S TIUUSER=DUZ
"RTN","TIUPNCV4",29,0)
 S XMY(TIUUSER)=""
"RTN","TIUPNCV4",30,0)
 S XMB="TIU PRN CONVERSION "_$S(GMRPCTR:"ERRORS",1:"CLEAN")
"RTN","TIUPNCV4",31,0)
 S XMDUZ="TIU PROGRESS NOTE CONVERSION"
"RTN","TIUPNCV4",32,0)
 S XMB(1)=TIUSTRT,XMB(2)=TIUEND,XMB(3)=TIUCTR
"RTN","TIUPNCV4",33,0)
 I ERRCTR S XMB(4)=ERRCTR,XMTEXT="^GMR(121,""ERROR"","
"RTN","TIUPNCV4",34,0)
 D ^XMB,KILL^XM K TIUEND,TIUSTRT,ERRCTR
"RTN","TIUPNCV4",35,0)
 Q
"RTN","TIUPNCV4",36,0)
 ;
"RTN","TIUPNCV4",37,0)
RESTART ;Permit restarting of conversion from last successfully processed note.
"RTN","TIUPNCV4",38,0)
 W !
"RTN","TIUPNCV4",39,0)
 K DIR W @IOF
"RTN","TIUPNCV4",40,0)
 W !!?10,"******  RESTART PROGRESS NOTE/TIU CONVERSION  ******",!!
"RTN","TIUPNCV4",41,0)
 S GMRPST1=$P($G(^TIU(8925.97,1,0)),U,5)
"RTN","TIUPNCV4",42,0)
 I GMRPST1'>0 W !?5,"Conversion has NOT been previously run",!?5,"Please use the CONVERT PROGRESS NOTE option." K GMRPST1 Q
"RTN","TIUPNCV4",43,0)
 K DIR S DIR(0)="Y",DIR("A")="Do you wish to restart the conversion"
"RTN","TIUPNCV4",44,0)
 S DIR("B")="YES",DIR("?")="^D HELP2^TIUPNCV4" D ^DIR Q:$D(DIRUT)!(Y=0)
"RTN","TIUPNCV4",45,0)
 W !!?5,"A mail message documenting discrepancies encountered during "
"RTN","TIUPNCV4",46,0)
 W !,?5,"processing will be sent to you.",!
"RTN","TIUPNCV4",47,0)
 S TIU("DUZ")=DUZ
"RTN","TIUPNCV4",48,0)
 D MAIL^TIUPNCV5
"RTN","TIUPNCV4",49,0)
 S GMRPST=(GMRPST1+1)
"RTN","TIUPNCV4",50,0)
 W !!,"Restarting Progress Note Conversion at Record #"_GMRPST_"...",!
"RTN","TIUPNCV4",51,0)
 S $P(^TIU(8925.97,1,0),U,3)=""
"RTN","TIUPNCV4",52,0)
 S GMRPST=(GMRPST-1),RESTARTD=$$NOW^XLFDT
"RTN","TIUPNCV4",53,0)
 S ^GMR(121,"RESTART",GMRPST)=RESTARTD ;Records restart date/time
"RTN","TIUPNCV4",54,0)
 S ZTDESC="RESTART PN CONVERSION"
"RTN","TIUPNCV4",55,0)
 D PNDEVICE
"RTN","TIUPNCV4",56,0)
 Q
"RTN","TIUPNCV4",57,0)
 ;
"RTN","TIUPNCV4",58,0)
INDY ;Converts individual Progress Notes based on IEN in ^GMR(121
"RTN","TIUPNCV4",59,0)
 S TIUFPRIV=1
"RTN","TIUPNCV4",60,0)
 W @IOF W !!?18,"***** INDIVIDUAL RECORD CONVERSION *****",!
"RTN","TIUPNCV4",61,0)
 ;
"RTN","TIUPNCV4",62,0)
ENINDY ;Entry of IEN
"RTN","TIUPNCV4",63,0)
 K DIR S DIR(0)="N^1:9999999"
"RTN","TIUPNCV4",64,0)
 S DIR("A")="Enter IEN of Note to be converted"
"RTN","TIUPNCV4",65,0)
 S DIR("?")="^D HELP4^TIUPNCV4" D ^DIR I $D(DIRUT) K DIR Q
"RTN","TIUPNCV4",66,0)
 ;
"RTN","TIUPNCV4",67,0)
EMERG ;Emergency entrance - must pass "Y" and "EMER"
"RTN","TIUPNCV4",68,0)
 S GMRPIFN=Y,TIU("INDY")=1,GMRPCTR=0,TIUCTR=0
"RTN","TIUPNCV4",69,0)
 I $D(^GMR(121,"CNV",GMRPIFN)) W !?5,"Progress Note IEN "_GMRPIFN_" was converted in a prior session.",! K GMRPIFN,TIU("INDY") G ENINDY
"RTN","TIUPNCV4",70,0)
 S NEWNODE=1 W !!?5,"Now converting Progress Note "_GMRPIFN_"...",!
"RTN","TIUPNCV4",71,0)
 D MAIN^TIUPNCV8
"RTN","TIUPNCV4",72,0)
 I '$D(^TMP("TIUBRK",GMRPIFN)) W !!,"*****Progress Note "_GMRPIFN_" NOT converted*****",! W ^GMR(121,"ERROR",GMRPIFN) W ! G KILINDY
"RTN","TIUPNCV4",73,0)
 W !,"Progress Note "_GMRPIFN_" successfully converted",!
"RTN","TIUPNCV4",74,0)
 ;
"RTN","TIUPNCV4",75,0)
KILINDY ;Cleans up the debris
"RTN","TIUPNCV4",76,0)
 K GMRPIFN,TIU("INDY"),DIR,NEWNODE,BADREC,TIUCTR
"RTN","TIUPNCV4",77,0)
 I $D(EMER) Q
"RTN","TIUPNCV4",78,0)
 G ENINDY
"RTN","TIUPNCV4",79,0)
 ;
"RTN","TIUPNCV4",80,0)
HELP2 ;Help for RESTART prompt
"RTN","TIUPNCV4",81,0)
 W !!?5,"Enter YES to re-start/re-queue the conversion."
"RTN","TIUPNCV4",82,0)
 W !?5,"Press <ret> or enter NO to stop this option."
"RTN","TIUPNCV4",83,0)
 Q
"RTN","TIUPNCV4",84,0)
 ;
"RTN","TIUPNCV4",85,0)
HELP3 ;Help for IEN prompt
"RTN","TIUPNCV4",86,0)
 W !!?5,"The default is the next expected Internal File Number (IEN)"
"RTN","TIUPNCV4",87,0)
 W " for a note."
"RTN","TIUPNCV4",88,0)
 W !?5,"If another starting point is required, enter the IEN for that"
"RTN","TIUPNCV4",89,0)
 W " note."
"RTN","TIUPNCV4",90,0)
 W !?5,"Enter ""^"" to stop option without processing."
"RTN","TIUPNCV4",91,0)
 Q
"RTN","TIUPNCV4",92,0)
 ;
"RTN","TIUPNCV4",93,0)
HELP4 ;Help for INDY prompt
"RTN","TIUPNCV4",94,0)
 W !!?5,"Enter the Internal Entry Number (IEN) of the single Progress"
"RTN","TIUPNCV4",95,0)
 W !?5,"you wish to convert to TIU.",!
"RTN","TIUPNCV4",96,0)
 Q
"RTN","TIUPNCV4",97,0)
 ;
"RTN","TIUPNCV5")
0^123^B14077765
"RTN","TIUPNCV5",1,0)
TIUPNCV5 ;SLC/DJP ;PNs ==> TIU cnv rtns ;5-7-97
"RTN","TIUPNCV5",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPNCV5",3,0)
 ;
"RTN","TIUPNCV5",4,0)
INTRO ;Introduction text
"RTN","TIUPNCV5",5,0)
 K DIR W @IOF W !!?16,"**** PROGRESS NOTE CONVERSION ****"
"RTN","TIUPNCV5",6,0)
 I $P($G(^GMR(121.99,1,"TITLE")),U,4)'="FINISHED" D MOREWK Q
"RTN","TIUPNCV5",7,0)
 D CANRUN Q:$G(TIU("QUIT"))
"RTN","TIUPNCV5",8,0)
 W !!?5,"This option will copy the data from the Generic Progress Note"
"RTN","TIUPNCV5",9,0)
 W !?5,"package (File #121) into the Text Integration Utility (TIU)"
"RTN","TIUPNCV5",10,0)
 W !?5,"package (File #8925).  Entries missing required data fields"
"RTN","TIUPNCV5",11,0)
 W !?5,"are ignored during processing but annotated on an error list."
"RTN","TIUPNCV5",12,0)
 ;
"RTN","TIUPNCV5",13,0)
 W !!?5,"The Generic Progress Note (^GMR 121) global will NOT be"
"RTN","TIUPNCV5",14,0)
 W !?5,"automatically deleted during this process.  It is recommended"
"RTN","TIUPNCV5",15,0)
 W !?5,"that the file be archived and purged as soon as possible after"
"RTN","TIUPNCV5",16,0)
 W !?5,"the conversion has been verified as complete."
"RTN","TIUPNCV5",17,0)
 ;
"RTN","TIUPNCV5",18,0)
 W !!?5,"A mail message documenting all discrepancies encountered during"
"RTN","TIUPNCV5",19,0)
 W !?5,"processing will be sent to you upon completion or halt of the"
"RTN","TIUPNCV5",20,0)
 W " conversion.",!
"RTN","TIUPNCV5",21,0)
 W !?5,"During conversion, a cross-reference is set in the"
"RTN","TIUPNCV5",22,0)
 W !?5,"GENERIC PROGRESS NOTE file (#121)- which contains"
"RTN","TIUPNCV5",23,0)
 W !?5,"the IEN of the progress note and the corresponding"
"RTN","TIUPNCV5",24,0)
 W !?5,"IEN in the TIU DOCUMENT file (#8925).",!
"RTN","TIUPNCV5",25,0)
 W !?5,"FORMAT:  ^GMR(121,""CNV"",IEN)=TIU IEN",!!
"RTN","TIUPNCV5",26,0)
 S DIR(0)="E" D ^DIR I $D(DIRUT) S TIU("QUIT")=1 Q
"RTN","TIUPNCV5",27,0)
 K DIR
"RTN","TIUPNCV5",28,0)
 D PNIEN Q:$G(TIU("QUIT"))
"RTN","TIUPNCV5",29,0)
 D MAIL Q:$G(TIU("QUIT"))
"RTN","TIUPNCV5",30,0)
 Q
"RTN","TIUPNCV5",31,0)
 ;
"RTN","TIUPNCV5",32,0)
MOREWK ;Must run GMRP*2.5*44 before installing & implementing TIU
"RTN","TIUPNCV5",33,0)
 S TIU("QUIT")=1
"RTN","TIUPNCV5",34,0)
 K DIR
"RTN","TIUPNCV5",35,0)
 W !!?5,"You MUST install and implement the patch, GMRP*2.5*44, prior"
"RTN","TIUPNCV5",36,0)
 W !?5,"to converting data from the Generic Progress Note files to the"
"RTN","TIUPNCV5",37,0)
 W !?5,"Text Integration Utility files.  This is a MUST DO action.",!
"RTN","TIUPNCV5",38,0)
 W !?5,"Additional information concerning this patch may be found in the"
"RTN","TIUPNCV5",39,0)
 W !?5,"TIU Implementation Guide."
"RTN","TIUPNCV5",40,0)
 H 2
"RTN","TIUPNCV5",41,0)
 Q
"RTN","TIUPNCV5",42,0)
 ;
"RTN","TIUPNCV5",43,0)
MAIL ;Mail Prompt
"RTN","TIUPNCV5",44,0)
 S TIUMAIL=$P(^VA(200,TIU("DUZ"),0),U,1)
"RTN","TIUPNCV5",45,0)
 W ! K DIR S DIR(0)="P^200:EMZ"
"RTN","TIUPNCV5",46,0)
 S DIR("A")="Please enter person to receive the completion message"
"RTN","TIUPNCV5",47,0)
 S DIR("B")=TIUMAIL,DIR("?")="^D HELP6^TIUPNCV5"
"RTN","TIUPNCV5",48,0)
 D ^DIR K DIR I $D(DIRUT)!(Y<0) S TIU("QUIT")=1 Q
"RTN","TIUPNCV5",49,0)
 S TIUUSER=$P(Y,U,1)
"RTN","TIUPNCV5",50,0)
 Q
"RTN","TIUPNCV5",51,0)
 ;
"RTN","TIUPNCV5",52,0)
PNIEN ;GMRPN IEN Prompt
"RTN","TIUPNCV5",53,0)
 N GMRPDA
"RTN","TIUPNCV5",54,0)
 S GMRPDA="A"
"RTN","TIUPNCV5",55,0)
 S GMRPDA=$O(^GMR(121,GMRPDA),-1)
"RTN","TIUPNCV5",56,0)
 W ! K DIR S DIR(0)="NA^0:99999999"
"RTN","TIUPNCV5",57,0)
 S DIR("A")="Enter IEN of last Progress Note in ^GMR(121 :  "
"RTN","TIUPNCV5",58,0)
 S DIR("B")=GMRPDA,DIR("?")="^D HELP10^TIUPNCV7" D ^DIR K DIR
"RTN","TIUPNCV5",59,0)
 I $D(DIRUT)!(Y<0) S TIU("QUIT")=1 Q
"RTN","TIUPNCV5",60,0)
 S TIUPNIEN=+Y
"RTN","TIUPNCV5",61,0)
 Q
"RTN","TIUPNCV5",62,0)
 ;
"RTN","TIUPNCV5",63,0)
HELP6 ;Help text for MAIL prompt
"RTN","TIUPNCV5",64,0)
 W !!?5,"At the completion of the conversion a bulletin will sent"
"RTN","TIUPNCV5",65,0)
 W !?5,"to this individual indicating completion status."
"RTN","TIUPNCV5",66,0)
 Q
"RTN","TIUPNCV5",67,0)
 ;
"RTN","TIUPNCV5",68,0)
CANRUN ; If Progress Note Conversion is currently running or the
"RTN","TIUPNCV5",69,0)
 ; Discharge Summary conversion is running, you CANNOT restart or
"RTN","TIUPNCV5",70,0)
 ; begin to run the Progress Note Conversion
"RTN","TIUPNCV5",71,0)
 S TIU2=$P($G(^TIU(8925.97,1,0)),U,2) ;start date
"RTN","TIUPNCV5",72,0)
 S TIU5=$P($G(^TIU(8925.97,1,0)),U,3) ;completed date
"RTN","TIUPNCV5",73,0)
 S TIU3=$P($G(^TIU(8925.97,1,0)),U,5) ;processing ien
"RTN","TIUPNCV5",74,0)
 I +$G(TIU2),+$G(TIU5),'+$G(TIU3) D  Q
"RTN","TIUPNCV5",75,0)
 . S TIU("QUIT")=1
"RTN","TIUPNCV5",76,0)
 . W !!?5,"Progress Note Conversion now running.",!
"RTN","TIUPNCV5",77,0)
 . W !?5,"DO NOT RUN CONVERSION",!
"RTN","TIUPNCV5",78,0)
 . K TIU2,TIU5,TIU3
"RTN","TIUPNCV5",79,0)
 . H 5
"RTN","TIUPNCV5",80,0)
 I +$G(^GMR(128,"CNV","T0")),'+$G(^GMR(128,"CNV","T1")) D  Q
"RTN","TIUPNCV5",81,0)
 . S TIU("QUIT")=1
"RTN","TIUPNCV5",82,0)
 . W !!?5,"Discharge Summary Conversion now running.",!
"RTN","TIUPNCV5",83,0)
 . W !?5,"Do not run Progress Note Conversion concurrently.",!
"RTN","TIUPNCV5",84,0)
 . H 5
"RTN","TIUPNCV5",85,0)
 Q
"RTN","TIUPNCV5",86,0)
 ;
"RTN","TIUPNCV6")
0^124^B11336336
"RTN","TIUPNCV6",1,0)
TIUPNCV6 ;SLC/DJP ;PNs ==> TIU cnv rtns ;5-7-97
"RTN","TIUPNCV6",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPNCV6",3,0)
 ;
"RTN","TIUPNCV6",4,0)
TLSRCH ;Utility to search ^TIU(8925.1 FOR ^GMR(121.2 titles
"RTN","TIUPNCV6",5,0)
 K DIR W @IOF W !!?14,"***** TITLE REPORT *****"
"RTN","TIUPNCV6",6,0)
 W !!?5,"This option will identify TITLES in ^GMR(121.2,"
"RTN","TIUPNCV6",7,0)
 W !?5,"Generic Progress Note Title File which are NOT"
"RTN","TIUPNCV6",8,0)
 W !?5,"defined in ^TIU(8925.1, TIU Document Definition File."
"RTN","TIUPNCV6",9,0)
 W !!?5,"It is important for a successful conversion that"
"RTN","TIUPNCV6",10,0)
 W !?5,"all Progress Note Titles be defined as Documents"
"RTN","TIUPNCV6",11,0)
 W !?5,"within ^TIU(8925.1.  The exceptions to this rule are"
"RTN","TIUPNCV6",12,0)
 W !?5,"titles which have been retired or inactivated.  They"
"RTN","TIUPNCV6",13,0)
 W !?5,"do not need to be entered in the file."
"RTN","TIUPNCV6",14,0)
 W !! K DIR S DIR(0)="Y",DIR("A")="Do you want to continue"
"RTN","TIUPNCV6",15,0)
 S DIR("B")="YES",DIR("?")="^D HELP8^TIUPNCV6"
"RTN","TIUPNCV6",16,0)
 D ^DIR K DIR I $D(DIRUT)!(Y=0) Q
"RTN","TIUPNCV6",17,0)
 D DEVICE
"RTN","TIUPNCV6",18,0)
 Q
"RTN","TIUPNCV6",19,0)
 ;
"RTN","TIUPNCV6",20,0)
LOOPT ;Loops through ^GMR(121.2
"RTN","TIUPNCV6",21,0)
 U IO
"RTN","TIUPNCV6",22,0)
 S CTR=0 F LKUP=0:0 S LKUP=$O(^GMR(121.2,LKUP)) Q:LKUP<1  D SRCH
"RTN","TIUPNCV6",23,0)
 D HDR,PRINT
"RTN","TIUPNCV6",24,0)
 K LKUP,GMRPTL,CTR,TIU,PRT,TIULN
"RTN","TIUPNCV6",25,0)
 K ^TMP("TIUTIL")
"RTN","TIUPNCV6",26,0)
 Q
"RTN","TIUPNCV6",27,0)
 ;
"RTN","TIUPNCV6",28,0)
SRCH ;Lookup on ^TIU(8925.1, TIU Document Definition File
"RTN","TIUPNCV6",29,0)
 S TIUFPRIV=1
"RTN","TIUPNCV6",30,0)
 S GMRPTL=$P(^GMR(121.2,LKUP,0),U,1)
"RTN","TIUPNCV6",31,0)
 I $P($G(^GMR(121.2,LKUP,0)),U,4)="1" D RETIRED Q
"RTN","TIUPNCV6",32,0)
 S X=$$UPPER^TIULS(GMRPTL),TYP="DOC"
"RTN","TIUPNCV6",33,0)
 K DIC S DIC(0)="XZ",DIC="^TIU(8925.1,"
"RTN","TIUPNCV6",34,0)
 S DIC("S")="I $P($G(^(0)),U,4)=TYP"
"RTN","TIUPNCV6",35,0)
 D ^DIC K DIC,TYP I Y<1 D NOTR Q
"RTN","TIUPNCV6",36,0)
 I $P(Y(0),U,4)'="DOC" D NORING
"RTN","TIUPNCV6",37,0)
 Q
"RTN","TIUPNCV6",38,0)
 ;
"RTN","TIUPNCV6",39,0)
NOTR ;Title not found in ^TIU(8925.1
"RTN","TIUPNCV6",40,0)
 S CTR=CTR+1
"RTN","TIUPNCV6",41,0)
 S ^TMP("TIUTIL",$J,CTR)=CTR_".  "_GMRPTL_" not found in ^TIU(8925.1."
"RTN","TIUPNCV6",42,0)
 Q
"RTN","TIUPNCV6",43,0)
NORING ;Title found in file but not defined as a DOCUMENT
"RTN","TIUPNCV6",44,0)
 S CTR=CTR+1
"RTN","TIUPNCV6",45,0)
 S ^TMP("TIUTIL",$J,CTR)=CTR_".  "_GMRPTL_" not defined as a DOCUMENT."
"RTN","TIUPNCV6",46,0)
 Q
"RTN","TIUPNCV6",47,0)
 ;
"RTN","TIUPNCV6",48,0)
RETIRED ;Title assigned to existing note but RETIRED from further use
"RTN","TIUPNCV6",49,0)
 S CTR=CTR+1
"RTN","TIUPNCV6",50,0)
 S ^TMP("TIUTIL",$J,CTR)=CTR_".  "_GMRPTL_" RETIRED."
"RTN","TIUPNCV6",51,0)
 Q
"RTN","TIUPNCV6",52,0)
 ;
"RTN","TIUPNCV6",53,0)
PRINT ;Prints Undefined Title Report
"RTN","TIUPNCV6",54,0)
 I '$D(^TMP("TIUTIL",$J))
"RTN","TIUPNCV6",55,0)
 I  W !!,?19,"NO DISCREPANCIES FOUND",!?19,"**************",! Q
"RTN","TIUPNCV6",56,0)
 F PRT=0:0 S PRT=$O(^TMP("TIUTIL",$J,PRT)) Q:PRT<1  W !?5,^TMP("TIUTIL",$J,PRT),! D:PRT=CTR LASTLN Q:$D(TIU("QUIT"))  D LNCK Q:$D(TIU("QUIT"))
"RTN","TIUPNCV6",57,0)
 Q
"RTN","TIUPNCV6",58,0)
 ;
"RTN","TIUPNCV6",59,0)
DEVICE ;prompts for device selection
"RTN","TIUPNCV6",60,0)
 K IOP S %ZIS="Q" D ^%ZIS I POP K POP Q
"RTN","TIUPNCV6",61,0)
 I $D(IO("Q")) K IO("Q") D  Q
"RTN","TIUPNCV6",62,0)
 .S ZTSAVE("TIU*")="",ZTSAVE("GMRP*")=""
"RTN","TIUPNCV6",63,0)
 .S ZTRTN="LOOPT^TIUPNCV6",ZTDESC="TIU/GMRPN TITLE SEARCH" D ^%ZTLOAD
"RTN","TIUPNCV6",64,0)
 .W !,$S($D(ZTSK):"Request Queued!",1:"Request Cancelled."),!
"RTN","TIUPNCV6",65,0)
 .K ZTRTN,ZTDESC,ZTSAVE
"RTN","TIUPNCV6",66,0)
 .D HOME^%ZIS
"RTN","TIUPNCV6",67,0)
 D LOOPT,^%ZISC
"RTN","TIUPNCV6",68,0)
 Q
"RTN","TIUPNCV6",69,0)
 ;
"RTN","TIUPNCV6",70,0)
LNCK ;Check current $Y value for paging
"RTN","TIUPNCV6",71,0)
 I IOST?1"P".E Q:$Y'>(IOSL-9)  D HDR Q
"RTN","TIUPNCV6",72,0)
 I $Y>(IOSL-3) D RETURN I '$D(TIU("QUIT")) D HDR
"RTN","TIUPNCV6",73,0)
 Q
"RTN","TIUPNCV6",74,0)
 ;
"RTN","TIUPNCV6",75,0)
RETURN ;Issues RETURN prompt
"RTN","TIUPNCV6",76,0)
 K DIR F TIULN=1:1:(IOSL-$Y-4) W !
"RTN","TIUPNCV6",77,0)
 S DIR(0)="E" D ^DIR K DIR I $D(DIRUT) S TIU("QUIT")=1 Q
"RTN","TIUPNCV6",78,0)
 I Y="" W @IOF
"RTN","TIUPNCV6",79,0)
 Q
"RTN","TIUPNCV6",80,0)
 ;
"RTN","TIUPNCV6",81,0)
HDR ;Header Line for Title Report
"RTN","TIUPNCV6",82,0)
 W !!?12,"******  UNDEFINED TITLE REPORT  ******",!!
"RTN","TIUPNCV6",83,0)
 Q
"RTN","TIUPNCV6",84,0)
 ;
"RTN","TIUPNCV6",85,0)
LASTLN ;End of report
"RTN","TIUPNCV6",86,0)
 W !!?12,"****** END OF REPORT ******"
"RTN","TIUPNCV6",87,0)
 S TIU("QUIT")=1
"RTN","TIUPNCV6",88,0)
 Q
"RTN","TIUPNCV6",89,0)
 ;
"RTN","TIUPNCV6",90,0)
HELP8 ;Help text for SEARCH prompt
"RTN","TIUPNCV6",91,0)
 W !!?5,"Press <ret> to continue with compare of the Progress"
"RTN","TIUPNCV6",92,0)
 W !?5,"Note Title File and the TIU Document Definition File."
"RTN","TIUPNCV6",93,0)
 W !?5,"Enter NO or ""^"" to stop this option."
"RTN","TIUPNCV6",94,0)
 Q
"RTN","TIUPNCV6",95,0)
 ;
"RTN","TIUPNCV7")
0^125^B14479543
"RTN","TIUPNCV7",1,0)
TIUPNCV7 ;SLC/DJP ;PNs ==> TIU cnv rtns ;5-7-97
"RTN","TIUPNCV7",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPNCV7",3,0)
 ;
"RTN","TIUPNCV7",4,0)
HELP10 ;Help text for GMRP IEN prompt
"RTN","TIUPNCV7",5,0)
 W !!?5,"Enter the Internal Entry Number (IEN)) of the last progress"
"RTN","TIUPNCV7",6,0)
 W !?5,"note you want to convert.  By entering an IEN, you can run"
"RTN","TIUPNCV7",7,0)
 W !?5,"this conversion while users continue to use the Progress Note"
"RTN","TIUPNCV7",8,0)
 W !?5,"options."
"RTN","TIUPNCV7",9,0)
 W !!?5,"To complete the conversion, use the RESTART option."
"RTN","TIUPNCV7",10,0)
 Q
"RTN","TIUPNCV7",11,0)
 ;
"RTN","TIUPNCV7",12,0)
FIX ;Will back records out of ^TIU(8925
"RTN","TIUPNCV7",13,0)
 ;TIU("HERE") must be set to the starting IEN 
"RTN","TIUPNCV7",14,0)
 S DIK="^TIU(8925,",CTR=0
"RTN","TIUPNCV7",15,0)
 S BK=TIU("HERE") F  S BK=$O(^TIU(8925,BK)) Q:'BK  D
"RTN","TIUPNCV7",16,0)
 . Q:$P(^TIU(8925,BK,13),U,3)'="C"
"RTN","TIUPNCV7",17,0)
 . S DA=BK D ^DIK S CTR=CTR+1
"RTN","TIUPNCV7",18,0)
 W !!,"COMPLETED... "_CTR_" RECORDS DELETED."
"RTN","TIUPNCV7",19,0)
 Q
"RTN","TIUPNCV7",20,0)
 ;
"RTN","TIUPNCV7",21,0)
PNHALT ;Options allows site to stop conversion
"RTN","TIUPNCV7",22,0)
 W !!?12,"****** REQUEST TO HALT CONVERSION ******",!
"RTN","TIUPNCV7",23,0)
 I '$P($G(^TIU(8925.97,1,0)),U,5)
"RTN","TIUPNCV7",24,0)
 I  W !!?5,"The Progress Note Conversion is not currently running.",! Q
"RTN","TIUPNCV7",25,0)
 I $P(^TIU(8925.97,1,2),U,3)>0
"RTN","TIUPNCV7",26,0)
 I  W !!?5,"Progress Note Conversion has been stopped."
"RTN","TIUPNCV7",27,0)
 I  W !?5,"Use the RESTART option to begin again.",! Q
"RTN","TIUPNCV7",28,0)
 W !! K DIR S DIR(0)="Y"
"RTN","TIUPNCV7",29,0)
 S DIR("A")="Do you want to HALT the Progress Note Conversion"
"RTN","TIUPNCV7",30,0)
 S DIR("B")="NO",DIR("?")="^D HALTHELP^TIUPNCV7" D ^DIR K DIR
"RTN","TIUPNCV7",31,0)
 I $D(DIRUT)!(Y=0) W !!?5,"Okay.  Conversion will continue to run.",! Q
"RTN","TIUPNCV7",32,0)
 S $P(^TIU(8925.97,1,2),U,3)=1
"RTN","TIUPNCV7",33,0)
 W !!?15,"!!!!!!!!  CONVERSION STOPPED !!!!!!!!",!
"RTN","TIUPNCV7",34,0)
 S TIUPNLST=$P(^TIU(8925.97,1,0),U,5)
"RTN","TIUPNCV7",35,0)
 W !?5,"Last Progress Note record processed is: ^GMR(121,"_TIUPNLST
"RTN","TIUPNCV7",36,0)
 K TIUPNLST
"RTN","TIUPNCV7",37,0)
 Q
"RTN","TIUPNCV7",38,0)
 ;
"RTN","TIUPNCV7",39,0)
HALTHELP ;Help Prompt for Halt action
"RTN","TIUPNCV7",40,0)
 W !!?5,"Answering ""YES"" to this question will stop the Progress Note"
"RTN","TIUPNCV7",41,0)
 W !?5,"Conversion before completion. ""NO"" will allow the conversion"
"RTN","TIUPNCV7",42,0)
 W !?5,"to continue.",!
"RTN","TIUPNCV7",43,0)
 Q
"RTN","TIUPNCV7",44,0)
 ;
"RTN","TIUPNCV7",45,0)
MONITOR ;Monitor progress notes conversion
"RTN","TIUPNCV7",46,0)
 ;
"RTN","TIUPNCV7",47,0)
 W !!?12,"****** MONITORING PROGRESS NOTE CONVERSION ******",!
"RTN","TIUPNCV7",48,0)
 I $P($G(^TIU(8925.97,1,0)),U,3)>0 D  Q
"RTN","TIUPNCV7",49,0)
 . W !?5,"This conversion has been run..."
"RTN","TIUPNCV7",50,0)
 . W !?5,"This option is only for use during the running of the Progress"
"RTN","TIUPNCV7",51,0)
 . W !?5,"Notes conversion from ^GMR(121 to ^TIU(8925."
"RTN","TIUPNCV7",52,0)
 . H 5 Q
"RTN","TIUPNCV7",53,0)
 ; 
"RTN","TIUPNCV7",54,0)
AGAIN ;Redisplay monitor information
"RTN","TIUPNCV7",55,0)
 N NODE,START,CURRENT,STIME,CNTR,ERRORS,TIME,ETIME,NTIME,BYE,PERMIN
"RTN","TIUPNCV7",56,0)
 N PERHR,MIN,NUM,LEFT
"RTN","TIUPNCV7",57,0)
 D SETVAR
"RTN","TIUPNCV7",58,0)
 D DISPLAY
"RTN","TIUPNCV7",59,0)
 D RETURN Q:$D(BYE)
"RTN","TIUPNCV7",60,0)
 W @IOF W !!?12,"****  MONITORING PROGRESS NOTE CONVERSION  ****",!
"RTN","TIUPNCV7",61,0)
 G AGAIN
"RTN","TIUPNCV7",62,0)
 Q
"RTN","TIUPNCV7",63,0)
 ;
"RTN","TIUPNCV7",64,0)
SETVAR ;Using File ^TIU(8925.97, to set and compute variables
"RTN","TIUPNCV7",65,0)
 S NODE=^TIU(8925.97,1,0)
"RTN","TIUPNCV7",66,0)
 S START=$P(NODE,U,4),CURRENT=$P(NODE,U,5),STIME=$P(NODE,U,2)
"RTN","TIUPNCV7",67,0)
 S CNTR=$P(NODE,U,6),ERRORS=$P(NODE,U,7) S:ERRORS'>0 ERRORS=0
"RTN","TIUPNCV7",68,0)
 S TIME=$$FMTE^XLFDT(STIME,"1P")
"RTN","TIUPNCV7",69,0)
 S NTIME=$$NOW^XLFDT
"RTN","TIUPNCV7",70,0)
 S ETIME=$$FMDIFF^XLFDT(NTIME,STIME,3)
"RTN","TIUPNCV7",71,0)
 S MIN=$E($P(ETIME,":"),3,4)*60+($P(ETIME,":",2))+($E(ETIME)*1440)
"RTN","TIUPNCV7",72,0)
 S PERMIN=CNTR/+$S(MIN>0:MIN,1:1),PERHR=PERMIN*60
"RTN","TIUPNCV7",73,0)
 S NUM=$P(^GMR(121,0),U,4)-$P(^TIU(8925,0),U,4)
"RTN","TIUPNCV7",74,0)
 S LEFT=NUM/PERHR,DAYS=LEFT/24
"RTN","TIUPNCV7",75,0)
 S REMAIN1=$P(^GMR(121,0),U,4)-CURRENT ;in file
"RTN","TIUPNCV7",76,0)
 Q
"RTN","TIUPNCV7",77,0)
 ;
"RTN","TIUPNCV7",78,0)
DISPLAY ;Displays known information
"RTN","TIUPNCV7",79,0)
 W !?5,"  Conversion began:  ",TIME
"RTN","TIUPNCV7",80,0)
 W !?5,"   Starting record:  ",START
"RTN","TIUPNCV7",81,0)
 W !?5," Processing record:  ",CURRENT
"RTN","TIUPNCV7",82,0)
 W !?5," Records processed:  ",CNTR
"RTN","TIUPNCV7",83,0)
 W !?5,"Current # of error:  ",ERRORS
"RTN","TIUPNCV7",84,0)
 W !?5,"      Elapsed time:  ",ETIME
"RTN","TIUPNCV7",85,0)
 W !?5,"    Notes per hour:  ",$P(PERHR,".")
"RTN","TIUPNCV7",86,0)
 I LEFT>24 W !?5,"         Days left:  ",$E(DAYS,1,5)
"RTN","TIUPNCV7",87,0)
 E  W !?5,"        Hours left:  ",$E(LEFT,1,5)
"RTN","TIUPNCV7",88,0)
 W !!?2,"Notes left to convert:  ",REMAIN1
"RTN","TIUPNCV7",89,0)
 W !!
"RTN","TIUPNCV7",90,0)
 Q
"RTN","TIUPNCV7",91,0)
 ; 
"RTN","TIUPNCV7",92,0)
RETURN ;Issues RETURN prompt
"RTN","TIUPNCV7",93,0)
 N DIR,Y
"RTN","TIUPNCV7",94,0)
 F TIULN=1:1:(IOSL-$Y-4) W !
"RTN","TIUPNCV7",95,0)
 S DIR(0)="E" D ^DIR I $D(DIRUT) S BYE=1 Q
"RTN","TIUPNCV7",96,0)
 Q
"RTN","TIUPNCV7",97,0)
 ;
"RTN","TIUPNCV8")
0^126^B18516606
"RTN","TIUPNCV8",1,0)
TIUPNCV8 ;SLC/DJP ;PNs ==> TIU cnv rtns ;5-7-97
"RTN","TIUPNCV8",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPNCV8",3,0)
 ;
"RTN","TIUPNCV8",4,0)
 ; used to handset TIUIFN and update ^TIU(8925 appropriately
"RTN","TIUPNCV8",5,0)
 ; call with REDO (TIU IFN) and GMRPIFN.
"RTN","TIUPNCV8",6,0)
 ; if adding new records, set NEWNODE
"RTN","TIUPNCV8",7,0)
 ;
"RTN","TIUPNCV8",8,0)
DRIVER ;Entry point
"RTN","TIUPNCV8",9,0)
 S TIUFPRIV=1
"RTN","TIUPNCV8",10,0)
 S:'$D(U) U="^"
"RTN","TIUPNCV8",11,0)
 S (GMRPCTR,TIUCTR)=0
"RTN","TIUPNCV8",12,0)
 S:'$D(GMRPST) GMRPST=0 ;If not a Restart, initialize counter
"RTN","TIUPNCV8",13,0)
 I '$D(NEWNODE) S TIUIFN=REDO S ^TMP("TIUIFN",GMRPIFN)=TIUIFN
"RTN","TIUPNCV8",14,0)
 D MAIN
"RTN","TIUPNCV8",15,0)
CLEANUP ;Kills variables and scratch files
"RTN","TIUPNCV8",16,0)
 K GMRPCTR,TIUCTR,GMRPST,GMRPIFN,GMRPFLD,NEWNODE,REDO
"RTN","TIUPNCV8",17,0)
 K ^TMP("TIUIFN")
"RTN","TIUPNCV8",18,0)
 Q
"RTN","TIUPNCV8",19,0)
 ;
"RTN","TIUPNCV8",20,0)
MAIN ;Main loop for each record
"RTN","TIUPNCV8",21,0)
 K DIC S DIC="^GMR(121,",DA=GMRPIFN,DIQ="PN"
"RTN","TIUPNCV8",22,0)
 S DIQ(0)="I",DR=".01:.03;.05;.06;1:7.1;9;100"
"RTN","TIUPNCV8",23,0)
 D EN^DIQ1
"RTN","TIUPNCV8",24,0)
 I (PN(121,GMRPIFN,.02,"I")="")!(PN(121,GMRPIFN,.03,"I")="")!(PN(121,GMRPIFN,.05,"I")="")!(PN(121,GMRPIFN,1,"I")="")!(PN(121,GMRPIFN,2,"I")="") D  Q
"RTN","TIUPNCV8",25,0)
 . S PROBLEM="Progress Note - IFN #"_GMRPIFN_" is incomplete."
"RTN","TIUPNCV8",26,0)
 . D ERRORLOG^TIUPNCV3 K BADREC,PN,PROBLEM Q
"RTN","TIUPNCV8",27,0)
 D TIUFLDS
"RTN","TIUPNCV8",28,0)
 ; do not convert test patient notes
"RTN","TIUPNCV8",29,0)
 S TIU("SSN")=$P(^DPT(TIU(.02),0),U,9),TIU("SSN4")=$E(TIU("SSN"),1,4)
"RTN","TIUPNCV8",30,0)
 I TIU("SSN4")["0000" D CLEANREC Q
"RTN","TIUPNCV8",31,0)
 ;
"RTN","TIUPNCV8",32,0)
 D TITLE^TIUPNCV3 I $D(BADREC) D CLEANREC Q
"RTN","TIUPNCV8",33,0)
 I $D(NEWNODE) D RTNODE I $D(BADREC) D CLEANREC Q
"RTN","TIUPNCV8",34,0)
 D SETFIELD^TIUPNCV1 I $D(BADREC) D WIPEOUT Q
"RTN","TIUPNCV8",35,0)
 ;Builds the TIU record
"RTN","TIUPNCV8",36,0)
 ;Sets single-component record
"RTN","TIUPNCV8",37,0)
 S DIE="^TIU(8925,",DA=TIUIFN D COPY I $D(BADREC) D WIPEOUT Q
"RTN","TIUPNCV8",38,0)
 D TEXT
"RTN","TIUPNCV8",39,0)
 D:TIU(1505)'="" SIGSET D:TIU(1511)'="" COSET
"RTN","TIUPNCV8",40,0)
 ;Records number of successfully processed notes
"RTN","TIUPNCV8",41,0)
 D SEND^TIUALRT(+TIUIFN)
"RTN","TIUPNCV8",42,0)
 I '$D(TIU("INDY")) S TIUCTR=TIUCTR+1
"RTN","TIUPNCV8",43,0)
 S ^GMR(121,"CNV",GMRPIFN)=TIUIFN
"RTN","TIUPNCV8",44,0)
 D CLEANREC Q
"RTN","TIUPNCV8",45,0)
 ;
"RTN","TIUPNCV8",46,0)
CLEANREC ;Cleans partition after entry of record
"RTN","TIUPNCV8",47,0)
 K TIU,ESIG,PN,ATH,P1,P2,P3,P4,P5,C1,C2,C3,PNT,BADREC,TIUD,TIUNM
"RTN","TIUPNCV8",48,0)
 K TIUT,TMSG,TYP,^TMP("TIUBRK",GMRPIFN)
"RTN","TIUPNCV8",49,0)
 Q
"RTN","TIUPNCV8",50,0)
 ;
"RTN","TIUPNCV8",51,0)
WIPEOUT ;Clears ^TIU(8925 if record is found to be incomplete
"RTN","TIUPNCV8",52,0)
 S DIK="^TIU(8925,",DA=TIUIFN D ^DIK K DIK
"RTN","TIUPNCV8",53,0)
 K ^TMP("TIUIFN",GMRPIFN)
"RTN","TIUPNCV8",54,0)
 I '$G(TIU(.03)) S X=TIU(.03) D SUB^AUPNVSIT
"RTN","TIUPNCV8",55,0)
 D CLEANREC
"RTN","TIUPNCV8",56,0)
 Q
"RTN","TIUPNCV8",57,0)
 ;
"RTN","TIUPNCV8",58,0)
TIUFLDS ;Sets TIU variables with PN data
"RTN","TIUPNCV8",59,0)
 ; .01 FILE ENTRY DATE
"RTN","TIUPNCV8",60,0)
 ; .02 PATIENT
"RTN","TIUPNCV8",61,0)
 ; 1201 ENTRY DATE/TIME
"RTN","TIUPNCV8",62,0)
 ; 1202 AUTHOR/DICTATOR - 2 AUTHOR
"RTN","TIUPNCV8",63,0)
 ; 1205 HOSPITAL LOCATION - 9 LOCATION
"RTN","TIUPNCV8",64,0)
 ; 1301 REFERENCE DATE - .03 DATE/TIME OF PROGRESS NOTE
"RTN","TIUPNCV8",65,0)
 ; 1302 ENTERED BY - .05 TRANSCRIBER
"RTN","TIUPNCV8",66,0)
 ; 1501 SIGNATURE DATE/TIME - 4 DATE/TIME SIGNED
"RTN","TIUPNCV8",67,0)
 ; 1502 SIGNED BY - 3 ELECTRONIC SIGNATURE (AUTHOR)
"RTN","TIUPNCV8",68,0)
 ; 1506 COSIGNATURE NEEDED - 5 COSIGNATURE REQUIRED
"RTN","TIUPNCV8",69,0)
 ; 1507 COSIGNATURE DATE/TIME - 7 DATE/TIME COSIGNED
"RTN","TIUPNCV8",70,0)
 ; 1508 COSIGNED BY - 6 COSIGNER
"RTN","TIUPNCV8",71,0)
 ; 1512 MARKED SIGNED ON CHART BY - 4.1 SIGNATURE IN CHART
"RTN","TIUPNCV8",72,0)
 ; 1513 MARKED COSIGNED ON CHART BY - 7.1 COSIGNATURE IN CHART
"RTN","TIUPNCV8",73,0)
 S TIU(1201)=PN(121,GMRPIFN,.01,"I")
"RTN","TIUPNCV8",74,0)
 S TIU(.02)=PN(121,GMRPIFN,.02,"I")
"RTN","TIUPNCV8",75,0)
 S TIU(1301)=PN(121,GMRPIFN,.03,"I")
"RTN","TIUPNCV8",76,0)
 S TIU(1302)=PN(121,GMRPIFN,.05,"I")
"RTN","TIUPNCV8",77,0)
 S TIU("MHCONV")=PN(121,GMRPIFN,.06,"I")
"RTN","TIUPNCV8",78,0)
 S TIU("TITLE")=PN(121,GMRPIFN,1,"I")
"RTN","TIUPNCV8",79,0)
 S TIU(1202)=PN(121,GMRPIFN,2,"I")
"RTN","TIUPNCV8",80,0)
 S TIU(1303)="C"
"RTN","TIUPNCV8",81,0)
 S TIU(1502)=PN(121,GMRPIFN,3,"I")
"RTN","TIUPNCV8",82,0)
 S TIU(1501)=PN(121,GMRPIFN,4,"I")
"RTN","TIUPNCV8",83,0)
 S (TIU("SIGCHART"),TIU(1512))=PN(121,GMRPIFN,4.1,"I")
"RTN","TIUPNCV8",84,0)
 S TIU(1506)=PN(121,GMRPIFN,5,"I")
"RTN","TIUPNCV8",85,0)
 S TIU(1508)=PN(121,GMRPIFN,6,"I")
"RTN","TIUPNCV8",86,0)
 S TIU(1507)=PN(121,GMRPIFN,7,"I")
"RTN","TIUPNCV8",87,0)
 S (TIU("COSCHART"),TIU(1513))=PN(121,GMRPIFN,7.1,"I")
"RTN","TIUPNCV8",88,0)
 S TIU(1205)=PN(121,GMRPIFN,9,"I")
"RTN","TIUPNCV8",89,0)
 S TIU("PARENT")=$S(+PN(121,GMRPIFN,100,"I"):$G(^GMR(121,"CNV",+PN(121,GMRPIFN,100,"I"))),1:"")
"RTN","TIUPNCV8",90,0)
 S TIU("SPECDT")=$P(TIU(1201),".",1)
"RTN","TIUPNCV8",91,0)
 Q
"RTN","TIUPNCV8",92,0)
 ;
"RTN","TIUPNCV8",93,0)
RTNODE ;Sets 0 Node for TIU record
"RTN","TIUPNCV8",94,0)
 S (DIC,DLAYGO)=8925,DIC(0)="LN",X=""""_"`"_TIU(.01)_""""
"RTN","TIUPNCV8",95,0)
 D ^DIC I +Y<1 S TIU("BAD")=1 Q
"RTN","TIUPNCV8",96,0)
 S TIUIFN=+Y,^TMP("TIUIFN",GMRPIFN)=TIUIFN
"RTN","TIUPNCV8",97,0)
 Q
"RTN","TIUPNCV8",98,0)
 ;
"RTN","TIUPNCV8",99,0)
COPY ;Writes data from ^GMR(121,GMRPIFN --> ^TIU(8925,TIUIFN
"RTN","TIUPNCV8",100,0)
 S DR=".02////"_TIU(.02)_";.03////"_TIU(.03)_";.04////"_TIU(.04)_";.05////"_TIU(.05) D ^DIE
"RTN","TIUPNCV8",101,0)
 I TIU("PARENT")'="" S DR=".06///"_TIU("PARENT") D ^DIE
"RTN","TIUPNCV8",102,0)
 S DR="1201///"_TIU(1201)_";1202////"_TIU(1202)_";1205///"_TIU(1205)_";1301///"_TIU(1301)_";1302////"_TIU(1302)_";1303///"_TIU(1303) D ^DIE
"RTN","TIUPNCV8",103,0)
 I $D(TIUNEWTY) S DR=".01///"_TIUNEWTY D ^DIE K TIUNEWTY
"RTN","TIUPNCV8",104,0)
 Q
"RTN","TIUPNCV8",105,0)
 ;
"RTN","TIUPNCV8",106,0)
TEXT ;Copies text
"RTN","TIUPNCV8",107,0)
 I $D(^TMP("TIUHOLD",GMRPIFN))
"RTN","TIUPNCV8",108,0)
 I  M ^TIU(8925,TIUIFN,"TEXT")=^TMP("TIUHOLD",GMRPIFN,10)
"RTN","TIUPNCV8",109,0)
 K ^TMP("TIUHOLD",GMRPIFN),^TMP("TIUMERGE",GMRPIFN) Q
"RTN","TIUPNCV8",110,0)
 M ^TIU(8925,TIUIFN,"TEXT")=^GMR(121,GMRPIFN,GMRPFLD)
"RTN","TIUPNCV8",111,0)
 Q
"RTN","TIUPNCV8",112,0)
 ;
"RTN","TIUPNCV8",113,0)
SIGSET ;Sets ^TIU(8925 signature fields
"RTN","TIUPNCV8",114,0)
 S DR="1501///"_TIU(1501)_";1502////"_TIU(1502)_";1503///^S X=TIU(1503);1504///^S X=TIU(1504);1505///"_TIU(1505)_";1512////"_TIU(1512)
"RTN","TIUPNCV8",115,0)
 D ^DIE Q
"RTN","TIUPNCV8",116,0)
 ;
"RTN","TIUPNCV8",117,0)
COSET ;Sets ^TIU(8925 co-signature fields if required
"RTN","TIUPNCV8",118,0)
 S DR="1506///"_TIU(1506)_";1507///"_TIU(1507)_";1508////"_TIU(1508)_";1509///^S X=TIU(1509);1510///^S X=TIU(1510);1511///"_TIU(1511)_";1513////"_TIU(1513)
"RTN","TIUPNCV8",119,0)
 D ^DIE Q
"RTN","TIUPNCV8",120,0)
 ;
"RTN","TIUPNCVX")
0^214^B12540443
"RTN","TIUPNCVX",1,0)
TIUPNCVX ;SF/JLI ;PNs ==> TIU cnv rtns ;5-7-97
"RTN","TIUPNCVX",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPNCVX",3,0)
 ;
"RTN","TIUPNCVX",4,0)
 ;set x-refs for conversion
"RTN","TIUPNCVX",5,0)
ENTRY ;
"RTN","TIUPNCVX",6,0)
 S DA=TIUIFN,TIU0=$G(^TIU(8925,TIUIFN,0)),TIU13=$G(^(13))
"RTN","TIUPNCVX",7,0)
 S TIU12=$G(^(12)),TIU15=$G(^(15))
"RTN","TIUPNCVX",8,0)
 S TIURDATE=9999999-TIU13
"RTN","TIUPNCVX",9,0)
 S ^TIU(8925,"B",$P(TIU0,U),DA)=""
"RTN","TIUPNCVX",10,0)
 I +TIU13 D
"RTN","TIUPNCVX",11,0)
 . I +$P(TIU0,U,5) D
"RTN","TIUPNCVX",12,0)
 . . S ^TIU(8925,"ALL","ANY",+TIU0,+$P(TIU0,U,5),TIURDATE,DA)=""
"RTN","TIUPNCVX",13,0)
 . . I +$P(TIU0,U,2) S ^TIU(8925,"APT",+$P(TIU0,U,2),+TIU0,+$P(TIU0,U,5),TIURDATE,DA)=""
"RTN","TIUPNCVX",14,0)
 . . I +$P(TIU0,U,3) S ^TIU(8925,"AVSIT",+$P(TIU0,U,3),+TIU0,+$P(TIU0,U,5),TIURDATE,DA)=""
"RTN","TIUPNCVX",15,0)
 . . I +$P(TIU12,U,2) S ^TIU(8925,"AAU",+$P(TIU12,U,2),+TIU0,+$P(TIU0,U,5),TIURDATE,DA)=""
"RTN","TIUPNCVX",16,0)
 . . I +$P(TIU12,U,5) S ^TIU(8925,"ALOC",+$P(TIU12,U,5),+TIU0,+$P(TIU0,U,5),TIURDATE,DA)=""
"RTN","TIUPNCVX",17,0)
 . . I +$P(TIU12,U,8) S ^TIU(8925,"ASUP",+$P(TIU12,U,8),+TIU0,+$P(TIU0,U,5),TIURDATE,DA)=""
"RTN","TIUPNCVX",18,0)
 . . I +$P(TIU13,U,2) S ^TIU(8925,"ATC",+$P(TIU13,U,2),+TIU0,+$P(TIU0,U,5),TIURDATE,DA)=""
"RTN","TIUPNCVX",19,0)
 . . I +$O(^TIU(8925.9,"B",DA,0)) D APRBS^TIUDD(+TIU0,+$P(TIU0,U,5),TIURDATE,DA)
"RTN","TIUPNCVX",20,0)
 . I +$P(TIU0,U,2) S ^TIU(8925,"APTCL",+$P(TIU0,U,2),+$$CLINDOC^TIULC1(+TIU0,DA),TIURDATE,DA)=""
"RTN","TIUPNCVX",21,0)
 . I +$P(TIU0,U,2) S ^TIU(8925,"APTCL",+$P(TIU0,U,2),38,TIURDATE,DA)=""
"RTN","TIUPNCVX",22,0)
 I $P($$DOCTYPE^TIULF(DA),U)="DOC",+$P(TIU0,U,2),+$P(TIU0,U,3) D
"RTN","TIUPNCVX",23,0)
 . S ^TIU(8925,"AV",+$P(TIU0,U,2),+TIU0,+$P(TIU0,U,3),DA)=""
"RTN","TIUPNCVX",24,0)
 . S ^TIU(8925,"AA",+$P(TIU0,U,2),+TIU0,(9999999-$P(+^AUPNVSIT(+$P(TIU0,U,3),0),".")),DA)=""
"RTN","TIUPNCVX",25,0)
 . S ^TIU(8925,"AE",+$P(TIU0,U,2),(9999999-$P(+^AUPNVSIT(+$P(TIU0,U,3),0),".")),+TIU0,DA)=""
"RTN","TIUPNCVX",26,0)
 ;
"RTN","TIUPNCVX",27,0)
 I $P(TIU0,U,2)'="" D
"RTN","TIUPNCVX",28,0)
 . S ^TIU(8925,"C",$P(TIU0,U,2),DA)=""
"RTN","TIUPNCVX",29,0)
 . I +$$APTP^TIULX(DA),+TIU15 S ^TIU(8925,"APTP",+$P(TIU0,U,2),+TIU15,DA)=""
"RTN","TIUPNCVX",30,0)
 . I +$P(TIU0,U,4),+TIU13,+$P(TIU0,U,5) S ^TIU(8925,"ADCPT",+$P(TIU0,U,2),+$P(TIU0,U,4),+$P(TIU0,U,5),TIURDATE,DA)=""
"RTN","TIUPNCVX",31,0)
 ;
"RTN","TIUPNCVX",32,0)
 I $P(TIU0,U,3)'="" D
"RTN","TIUPNCVX",33,0)
 . S X=$P(TIU0,U,3)
"RTN","TIUPNCVX",34,0)
 . D:$D(^AUPNVSIT(+$P(TIU0,U,3))) ADD^AUPNVSIT
"RTN","TIUPNCVX",35,0)
 . S ^TIU(8925,"V",$P(TIU0,U,3),DA)=""
"RTN","TIUPNCVX",36,0)
 . X ^DD(8925,.03,1,7,1) ; TRIGGER
"RTN","TIUPNCVX",37,0)
 . S DA=TIUIFN
"RTN","TIUPNCVX",38,0)
 I $P(TIU0,U,6)'="" S ^TIU(8925,"DAD",$P(TIU0,U,6),DA)=""
"RTN","TIUPNCVX",39,0)
 I $P(TIU0,U,12)'="" S ^TIU(8925,"FIX",$P(TIU0,U,12),DA)=""
"RTN","TIUPNCVX",40,0)
 I $P(TIU12,U)'="" S ^TIU(8925,"F",$P(TIU12,U),DA)=""
"RTN","TIUPNCVX",41,0)
 I $P(TIU12,U,2)'="" D
"RTN","TIUPNCVX",42,0)
 . S ^TIU(8925,"CA",$P(TIU12,U,2),DA)=""
"RTN","TIUPNCVX",43,0)
 . I +$$AAUP^TIULX(DA),+TIU15 S ^TIU(8925,"AAUP",+$P(TIU12,U,2),+TIU15,DA)=""
"RTN","TIUPNCVX",44,0)
 I $P(TIU12,U,5)'="",+$$ALOCP^TIULX(DA),+TIU15 S ^TIU(8925,"ALOCP",+$P(TIU12,U,5),+TIU15,DA)=""
"RTN","TIUPNCVX",45,0)
 I $P(TIU12,U,8)'="" S ^TIU(8925,"CS",$P(TIU12,U,8),DA)=""
"RTN","TIUPNCVX",46,0)
 I $P(TIU13,U)'="" S ^TIU(8925,"D",$P(TIU13,U),DA)=""
"RTN","TIUPNCVX",47,0)
 I $P(TIU13,U,2)'="" S ^TIU(8925,"TC",$P(TIU13,U,2),DA)=""
"RTN","TIUPNCVX",48,0)
 I $P(TIU13,U,4)'="" S ^TIU(8925,"E",$P(TIU13,U,4),DA)=""
"RTN","TIUPNCVX",49,0)
 S X=$P($G(^TIU(8925,DA,150)),U)
"RTN","TIUPNCVX",50,0)
 I X'="" S ^TIU(8925,"VID",$E(X,1,30),DA)=""
"RTN","TIUPNCVX",51,0)
 I +TIU0'=81 D SACLPT^TIUDD0(.02,$P(TIU0,U,2))
"RTN","TIUPNCVX",52,0)
 I $P(TIU15,U)'>0 D SACLAU^TIUDD0(1202,$P(TIU12,U,2)),SACLAU1^TIUDD0(1302,$P(TIU13,U,2))
"RTN","TIUPNCVX",53,0)
 I '$P(TIU15,U,7),($P(TIU0,U,5)<7) D
"RTN","TIUPNCVX",54,0)
 . I $P(TIU0,U,5)=6 D SACLEC^TIUDD0(1208,$P(TIU12,U,8)) I 1
"RTN","TIUPNCVX",55,0)
 . E  I $P(TIU0,U,5)>4 D SACLEC^TIUDD0(1208,$P(TIU12,U,8))
"RTN","TIUPNCVX",56,0)
 I +TIU0'=81,$P(TIU15,U,2)>0 D SACLSB^TIUDD0(1502,$P(TIU15,U,2))
"RTN","TIUPNCVX",57,0)
 I $P(TIU0,U,7)'>0 S $P(^(0),U,7)=+$G(^TIU(8925,DA,13))
"RTN","TIUPNCVX",58,0)
 I $P(TIU12,U,5)'>0 S VTYPE="E"
"RTN","TIUPNCVX",59,0)
 E  S VLOC=+$P(TIU12,U,5),STOP=+$P(^SC(VLOC,0),U,7) D
"RTN","TIUPNCVX",60,0)
 . I STOP>0 S STOP=$P(^DIC(40.7,STOP,0),U) S VTYPE=$S(STOP["TELE":"T",1:"A") I 1
"RTN","TIUPNCVX",61,0)
 . E  D
"RTN","TIUPNCVX",62,0)
 . . I $P(^SC(VLOC,0),U,3)="W" S VTYPE="H"
"RTN","TIUPNCVX",63,0)
 . . E  S VTYPE="E"
"RTN","TIUPNCVX",64,0)
 . S $P(^TIU(8925,DA,0),U,13)=VTYPE
"RTN","TIUPNCVX",65,0)
 D SAPTLD^TIUDD0(.02,$P(TIU0,U,2))
"RTN","TIUPNCVX",66,0)
 Q
"RTN","TIUPOST")
0^128^B2560627
"RTN","TIUPOST",1,0)
TIUPOST ; SLC/JER - Post-init for TIU ;2/17/95  11:15
"RTN","TIUPOST",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPOST",3,0)
MAIN ; Control branching
"RTN","TIUPOST",4,0)
 D ^TIUIL        ;   Install List Templates
"RTN","TIUPOST",5,0)
 D COMPILE       ;   Compile hidden menus
"RTN","TIUPOST",6,0)
 D KILL^TIUDD8   ;   Force recompilation of SEARCH CATEGORIES
"RTN","TIUPOST",7,0)
 D EN^TIULEXP    ;   Redirect ^LEX( ptr in PROBLEM LINK file
"RTN","TIUPOST",8,0)
 S $P(^TIU(8925.1,0),U,3)=100  ; Reset file root to fill gaps
"RTN","TIUPOST",9,0)
 Q
"RTN","TIUPOST",10,0)
COMPILE ; Compile Hidden Menus
"RTN","TIUPOST",11,0)
 N DIC,XQORM,X,Y
"RTN","TIUPOST",12,0)
 D BMES^XPDUTL("*** COMPILING HIDDEN PROTOCOL MENUS ***")
"RTN","TIUPOST",13,0)
 S DIC="^ORD(101,",DIC(0)="X",X="TIU HIDDEN ACTIONS" D ^DIC
"RTN","TIUPOST",14,0)
 I +Y D
"RTN","TIUPOST",15,0)
 . D MES^XPDUTL($P(Y,U,2)_".")
"RTN","TIUPOST",16,0)
 . S XQORM=+Y_";ORD(101,",XQORM(0)="" D ^XQORM
"RTN","TIUPOST",17,0)
 S DIC="^ORD(101,",DIC(0)="X",X="TIU HIDDEN ACTIONS ADVANCED" D ^DIC
"RTN","TIUPOST",18,0)
 I +Y D
"RTN","TIUPOST",19,0)
 . D MES^XPDUTL($P(Y,U,2)_".")
"RTN","TIUPOST",20,0)
 . S XQORM=+Y_";ORD(101,",XQORM(0)="" D ^XQORM
"RTN","TIUPOST",21,0)
 S DIC="^ORD(101,",DIC(0)="X",X="TIU HIDDEN ACTIONS OE/RR" D ^DIC
"RTN","TIUPOST",22,0)
 I +Y D
"RTN","TIUPOST",23,0)
 . D MES^XPDUTL($P(Y,U,2)_".")
"RTN","TIUPOST",24,0)
 . S XQORM=+Y_";ORD(101,",XQORM(0)="" D ^XQORM
"RTN","TIUPOST",25,0)
 S DIC="^ORD(101,",DIC(0)="X",X="TIU HIDDEN ACTIONS BROWSE" D ^DIC
"RTN","TIUPOST",26,0)
 I +Y D
"RTN","TIUPOST",27,0)
 . D MES^XPDUTL($P(Y,U,2)_".")
"RTN","TIUPOST",28,0)
 . S XQORM=+Y_";ORD(101,",XQORM(0)="" D ^XQORM
"RTN","TIUPOST",29,0)
 Q
"RTN","TIUPRD")
0^137^B5701311
"RTN","TIUPRD",1,0)
TIUPRD ; SLC/JER - Single patient print ;8/9/94  10:04
"RTN","TIUPRD",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPRD",3,0)
MAIN(TIUTYP) ; Control Branching
"RTN","TIUPRD",4,0)
 N DFN,TIU,TIUOUT,TIUREL,TIUCHK,TIUA,TIUSEE,ACT,TIUY,TIUFLAG
"RTN","TIUPRD",5,0)
 N TIUDAT,TIUOUT,TIUSEE,TIUI,TIUQUIT
"RTN","TIUPRD",6,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIUPRD",7,0)
 S:$D(ORVP) DFN=+ORVP S TIUTYP=$G(TIUTYP,38)
"RTN","TIUPRD",8,0)
 D SELPAT^TIULA2(.TIUDAT,TIUTYP,+$G(DFN))
"RTN","TIUPRD",9,0)
 I +$G(TIUDAT)'>0,($D(TIUDAT)'>9) S TIUOUT=1 Q
"RTN","TIUPRD",10,0)
 S TIUFLAG=$$FLAG^TIUPRPN3
"RTN","TIUPRD",11,0)
 S TIUDEV=$$DEVICE^TIUDEV(.IO) ; Get Device/allow queueing
"RTN","TIUPRD",12,0)
 I IO']"" G PRINTX
"RTN","TIUPRD",13,0)
 I $D(IO("Q")) D QUE^TIUDEV("PRINTN^TIUPRD",TIUDEV) G PRINTX
"RTN","TIUPRD",14,0)
 D PRINTN
"RTN","TIUPRD",15,0)
PRINTX D ^%ZISC
"RTN","TIUPRD",16,0)
 K ^TMP("TIUPR",$J)
"RTN","TIUPRD",17,0)
 Q
"RTN","TIUPRD",18,0)
PRINTN ; Loop through selected doc's & invoke print code as appropriate
"RTN","TIUPRD",19,0)
 N TIUI,TIUTYP,TIUDARR,DFN
"RTN","TIUPRD",20,0)
 U IO
"RTN","TIUPRD",21,0)
 S TIUI=0
"RTN","TIUPRD",22,0)
 F  S TIUI=$O(TIUDAT(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIUPRD",23,0)
 . N TIUPGRP,TIUPMTHD,TIUPFHDR,TIUPFNBR
"RTN","TIUPRD",24,0)
 . S TIUDA=+$G(TIUDAT(TIUI))
"RTN","TIUPRD",25,0)
 . S TIUTYP=$P(^TIU(8925,TIUDA,0),U)
"RTN","TIUPRD",26,0)
 . S DFN=$P(^(0),U,2)
"RTN","TIUPRD",27,0)
 . I +TIUTYP D
"RTN","TIUPRD",28,0)
 . . S TIUPMTHD=$$PRNTMTHD^TIULG(+TIUTYP)
"RTN","TIUPRD",29,0)
 . . S TIUPGRP=$$PRNTGRP^TIULG(+TIUTYP)
"RTN","TIUPRD",30,0)
 . . S TIUPFHDR=$$PRNTHDR^TIULG(+TIUTYP)
"RTN","TIUPRD",31,0)
 . . S TIUPFNBR=$$PRNTNBR^TIULG(+TIUTYP)
"RTN","TIUPRD",32,0)
 . I $G(TIUPMTHD)']"",+$$ISADDNDM^TIULC1(TIUDA) D
"RTN","TIUPRD",33,0)
 . . S TIUDTYP=+$G(^TIU(8925,+$P($G(^TIU(8925,TIUDA,0)),U,6),0))
"RTN","TIUPRD",34,0)
 . . I +TIUDTYP S TIUPMTHD=$$PRNTMTHD^TIULG(+TIUDTYP),TIUPGRP=$$PRNTGRP^TIULG(+TIUDTYP),TIUPFHDR=$$PRNTHDR^TIULG(+TIUDTYP),TIUPFNBR=$$PRNTNBR^TIULG(+TIUDTYP)
"RTN","TIUPRD",35,0)
 . . S TIUDA=+$P($G(^TIU(8925,TIUDA,0)),U,6)
"RTN","TIUPRD",36,0)
 . I $G(TIUPMTHD)]"",+$G(TIUPGRP),($G(TIUPFHDR)]""),($G(TIUPFNBR)]"") S TIUDARR(TIUPMTHD,$G(TIUPGRP)_"$"_TIUPFHDR_";"_DFN,TIUI,TIUDA)=TIUPFNBR
"RTN","TIUPRD",37,0)
 . E  S TIUDARR(TIUPMTHD,DFN,TIUI,TIUDA)=""
"RTN","TIUPRD",38,0)
 S TIUPMTHD="" F  S TIUPMTHD=$O(TIUDARR(TIUPMTHD)) Q:TIUPMTHD=""  D
"RTN","TIUPRD",39,0)
 . D PRNTDOC^TIURA(TIUPMTHD,.TIUDARR)
"RTN","TIUPRD",40,0)
 Q
"RTN","TIUPRDS")
0^138^B4597822
"RTN","TIUPRDS",1,0)
TIUPRDS ; SLC/SBW - Print Form 10-1000 Discharge Summaries ;2/4/93  07:52
"RTN","TIUPRDS",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPRDS",3,0)
WRITE(TIUFLAG) ; Writes form 10-1000 data to screen or paper.
"RTN","TIUPRDS",4,0)
 N ZTRTN,%I,%T,%Y,POP
"RTN","TIUPRDS",5,0)
 S ZTRTN="ENTRY^TIUPRDS"
"RTN","TIUPRDS",6,0)
DEVICE ; Device handling
"RTN","TIUPRDS",7,0)
 ; Call with: ZTRTN
"RTN","TIUPRDS",8,0)
 N %ZIS,IOP
"RTN","TIUPRDS",9,0)
 S:$D(TIUDEV) %ZIS("B")=TIUDEV
"RTN","TIUPRDS",10,0)
 S %ZIS="Q" D ^%ZIS Q:POP
"RTN","TIUPRDS",11,0)
 S TIUDEV=ION
"RTN","TIUPRDS",12,0)
 G:$D(IO("Q")) QUE
"RTN","TIUPRDS",13,0)
NOQUE D @ZTRTN
"RTN","TIUPRDS",14,0)
 D ^%ZISC
"RTN","TIUPRDS",15,0)
 Q
"RTN","TIUPRDS",16,0)
QUE ; Queue output
"RTN","TIUPRDS",17,0)
 N %,ZTDTH,ZTIO,ZTSAVE,ZTSK
"RTN","TIUPRDS",18,0)
 Q:'$D(ZTRTN)  K IO("Q"),ZTSAVE F %="DA","DFN","TIU*" S ZTSAVE(%)=""
"RTN","TIUPRDS",19,0)
 S:'$D(ZTDESC) ZTDESC="PRINT DISCHARGE SUMMARY" S ZTIO=ION
"RTN","TIUPRDS",20,0)
 D ^%ZTLOAD W !,$S($D(ZTSK):"Request Queued!",1:"Request Cancelled!")
"RTN","TIUPRDS",21,0)
 K ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE D ^%ZISC
"RTN","TIUPRDS",22,0)
 S IOP="HOME" D ^%ZIS
"RTN","TIUPRDS",23,0)
 Q
"RTN","TIUPRDS",24,0)
ENTRY ; Entry point to print queued discharge summary
"RTN","TIUPRDS",25,0)
 N TIUERR,TIUI,DFN,D0,DN,Y,DTOUT,DUOUT,DIRUT,DIROUT,TIU0,TIUINI
"RTN","TIUPRDS",26,0)
 K ^TMP("TIULQ",$J)
"RTN","TIUPRDS",27,0)
 S TIUINI=1 ; Indicate initials only for transcriber
"RTN","TIUPRDS",28,0)
 I $D(ZTQUEUED) S ZTREQ="@" ; Tell TaskMan to delete Task log entry
"RTN","TIUPRDS",29,0)
 U IO
"RTN","TIUPRDS",30,0)
 I '$D(^TMP("TIUPR",$J)) W !,"No Document Record Specified.",$C(7) Q
"RTN","TIUPRDS",31,0)
 S DFN=0 F  S DFN=$O(^TMP("TIUPR",$J,DFN)) Q:+DFN'>0  D
"RTN","TIUPRDS",32,0)
 . S TIUI=0 F  S TIUI=$O(^TMP("TIUPR",$J,DFN,TIUI)) Q:+TIUI'>0!$D(DIROUT)  D
"RTN","TIUPRDS",33,0)
 . . S TIUDA=0
"RTN","TIUPRDS",34,0)
 . . F  S TIUDA=+$O(^TMP("TIUPR",$J,DFN,TIUI,TIUDA)) Q:+TIUDA'>0!$D(DIROUT)  D
"RTN","TIUPRDS",35,0)
 . . . S TIU0=$G(^TIU(8925,+TIUDA,0))
"RTN","TIUPRDS",36,0)
 . . . I +$$ISADDNDM^TIULC1(TIUDA) S TIUDA=$P(TIU0,U,6)
"RTN","TIUPRDS",37,0)
 . . . D EXTRACT^TIULQ(+TIUDA,"^TMP(""TIULQ"",$J)",.TIUERR,"","",1)
"RTN","TIUPRDS",38,0)
 . . . I +$G(TIUERR) W !,$P(TIUERR,U,2) Q
"RTN","TIUPRDS",39,0)
 . . . Q:'$D(^TMP("TIULQ",$J))
"RTN","TIUPRDS",40,0)
 . . . D PRINT^TIUPRDS1(+TIUDA,$G(TIUFLAG))
"RTN","TIUPRDS",41,0)
 . . . K ^TMP("TIULQ",$J),^TMP("TIUPR",$J,DFN,TIUI,TIUDA)
"RTN","TIUPRDS",42,0)
 Q
"RTN","TIUPRDS1")
0^139^B44835585
"RTN","TIUPRDS1",1,0)
TIUPRDS1 ; SLC/SBW - Print Form 10-1000 Discharge Summary ;3/8/96  07:32
"RTN","TIUPRDS1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPRDS1",3,0)
PRINT(TIUDA,TIUFLAG) ; Print Summary
"RTN","TIUPRDS1",4,0)
 ; TIUCONT=1 for Continue, 0 for Exit, NULL for Timeout.
"RTN","TIUPRDS1",5,0)
 ; Returned from $$Stop
"RTN","TIUPRDS1",6,0)
 N TIUADD,TIUPAGE,TIUCOPY,TIUSTAT,TIUCONT,TIUY,TIU
"RTN","TIUPRDS1",7,0)
 S TIUPAGE=1 D GETTIU^TIULD(.TIU,TIUDA)
"RTN","TIUPRDS1",8,0)
 I +$G(TIU("LDT")),+$G(TIU("AD#")) D  I 1
"RTN","TIUPRDS1",9,0)
 . N DGPMIFN S DGPMIFN=+$G(TIU("AD#")) D ^DGPMLOS S TIU("DAYS")=X
"RTN","TIUPRDS1",10,0)
 E  S TIU("WARD")=""
"RTN","TIUPRDS1",11,0)
 I $E(IOST)="P",+$G(TIUFLAG) S TIUCOPY=$S(+TIUFLAG=2:"ELECTRONICALLY SIGNED CHART COPY",1:"C H A R T   C O P Y")
"RTN","TIUPRDS1",12,0)
 E  S TIUSTAT=$$STATUS^TIULC(TIUDA),TIUCOPY=$S(TIUSTAT="completed":"C O P Y",1:"D R A F T")
"RTN","TIUPRDS1",13,0)
 W:$E(IOST)="C" @IOF D HEADER^TIUPRDS2(TIUDA,.TIU,TIUFLAG,.TIUPAGE)
"RTN","TIUPRDS1",14,0)
 W !,"DICTATION DATE: ",$P(^TMP("TIULQ",$J,TIUDA,1307,"E"),"@"),?40,"TRANSCRIPTION DATE: ",$P(^TMP("TIULQ",$J,TIUDA,1201,"E"),"@")
"RTN","TIUPRDS1",15,0)
 W !,"TRANSCRIPTIONIST: ",^TMP("TIULQ",$J,TIUDA,1302,"E")
"RTN","TIUPRDS1",16,0)
 W:$E(IOST)'="C" !!
"RTN","TIUPRDS1",17,0)
REPORT ; Report Text
"RTN","TIUPRDS1",18,0)
 N DIW,DIWF,DIWL,DIWR,DIWT,TIUI,X,Z K ^UTILITY($J,"W")
"RTN","TIUPRDS1",19,0)
 S TIUI=0,TIUCONT=1,TIUY=6,DIWF="WN",DIWL=1,DIWR=79
"RTN","TIUPRDS1",20,0)
 F  S TIUI=$O(^TMP("TIULQ",$J,TIUDA,"TEXT",TIUI)) Q:TIUI'>0  D  Q:'TIUCONT
"RTN","TIUPRDS1",21,0)
 . D SETCONT() Q:'TIUCONT
"RTN","TIUPRDS1",22,0)
 . S X=^TMP("TIULQ",$J,TIUDA,"TEXT",TIUI,0) S:X="" X=" " D ^DIWP
"RTN","TIUPRDS1",23,0)
 D ^DIWW K ^UTILITY($J,"W")
"RTN","TIUPRDS1",24,0)
 Q:'TIUCONT
"RTN","TIUPRDS1",25,0)
AMENDMNT ;If DCS has been amended, next lines are printed.
"RTN","TIUPRDS1",26,0)
 S TIUY=9 D SETCONT() Q:'TIUCONT
"RTN","TIUPRDS1",27,0)
 I +$G(^TMP("TIULQ",$J,TIUDA,1601,"I")) D
"RTN","TIUPRDS1",28,0)
 . W !!,^TMP("TIULQ",$J,TIUDA,1601,"E"),"  AMENDMENT FILED:"
"RTN","TIUPRDS1",29,0)
 . I $G(^TMP("TIULQ",$J,TIUDA,1603,"E"))']"" W !!?10 F TIUI=1:1:$L(^TMP("TIULQ",$J,TIUDA,1602,"E")) W "_"
"RTN","TIUPRDS1",30,0)
 . W !?10 W:$G(^TMP("TIULQ",$J,TIUDA,1604))]"" "/es/ " W ^(1604,"E")
"RTN","TIUPRDS1",31,0)
 . W !?10,$G(^TMP("TIULQ",$J,TIUDA,1605))
"RTN","TIUPRDS1",32,0)
RPTSIG ; Signature should be on bottom of form, Addenda on Subsequent pages
"RTN","TIUPRDS1",33,0)
 N AUTHOR,EXPSIGNR,ATTNDING,SIGNDATE,SIGNEDBY,SIGNNAME,SIGNTITL,SIGNMODE
"RTN","TIUPRDS1",34,0)
 N COSGDATE,COSGEDBY,COSGNAME,COSGTITL,COSGMODE,TIULINE,ESSTITL,ATTSTITL
"RTN","TIUPRDS1",35,0)
 S $P(TIULINE,"-",IOM)=""
"RTN","TIUPRDS1",36,0)
 S AUTHOR=$$SIGNAME^TIULS(+$G(^TMP("TIULQ",$J,TIUDA,1202,"I")))
"RTN","TIUPRDS1",37,0)
 S EXPSIGNR=$$SIGNAME^TIULS(+$G(^TMP("TIULQ",$J,TIUDA,1204,"I")))
"RTN","TIUPRDS1",38,0)
 S ESSTITL=$$SIGTITL^TIULS(+$G(^TMP("TIULQ",$J,TIUDA,1204,"I")))
"RTN","TIUPRDS1",39,0)
 S ATTNDING=$$SIGNAME^TIULS(+$G(^TMP("TIULQ",$J,TIUDA,1209,"I")))
"RTN","TIUPRDS1",40,0)
 S ATTSTITL=$$SIGTITL^TIULS(+$G(^TMP("TIULQ",$J,TIUDA,1209,"I")))
"RTN","TIUPRDS1",41,0)
 S SIGNDATE=$G(^TMP("TIULQ",$J,TIUDA,1501,"I"))_";"_$G(^("E"))
"RTN","TIUPRDS1",42,0)
 S SIGNEDBY=$$SIGNAME^TIULS(+$G(^TMP("TIULQ",$J,TIUDA,1502,"I")))
"RTN","TIUPRDS1",43,0)
 S SIGNNAME=$G(^TMP("TIULQ",$J,TIUDA,1503,"E"))
"RTN","TIUPRDS1",44,0)
 S SIGNTITL=$G(^TMP("TIULQ",$J,TIUDA,1504,"E"))
"RTN","TIUPRDS1",45,0)
 S SIGNMODE=$G(^TMP("TIULQ",$J,TIUDA,1505,"I"))_";"_$G(^("E"))
"RTN","TIUPRDS1",46,0)
 S COSGDATE=$G(^TMP("TIULQ",$J,TIUDA,1507,"I"))_";"_$G(^("E"))
"RTN","TIUPRDS1",47,0)
 S COSGEDBY=$$SIGNAME^TIULS(+$G(^TMP("TIULQ",$J,TIUDA,1508,"I")))
"RTN","TIUPRDS1",48,0)
 S COSGNAME=$G(^TMP("TIULQ",$J,TIUDA,1509,"E"))
"RTN","TIUPRDS1",49,0)
 S COSGTITL=$G(^TMP("TIULQ",$J,TIUDA,1510,"E"))
"RTN","TIUPRDS1",50,0)
 S COSGMODE=$G(^TMP("TIULQ",$J,TIUDA,1511,"I"))_";"_$G(^("E"))
"RTN","TIUPRDS1",51,0)
 S TIUY=11 D SETCONT() Q:'TIUCONT
"RTN","TIUPRDS1",52,0)
 F  Q:$Y+TIUY>IOSL  W ! ;MOVES SIG BLOCK TO PAGE/SCREEN BOTTOM
"RTN","TIUPRDS1",53,0)
 I +$G(TIUFLAG) W !,TIULINE
"RTN","TIUPRDS1",54,0)
 E  W !,"WORK COPY =========== UNOFFICIAL - NOT FOR MEDICAL RECORD ========== DO NOT FILE"
"RTN","TIUPRDS1",55,0)
 I EXPSIGNR'=ATTNDING D
"RTN","TIUPRDS1",56,0)
 . W !,"SIGNATURE PHYSICIAN/DENTIST",?40,"SIGNATURE APPROVING PHYSICIAN/DENTIST",!!
"RTN","TIUPRDS1",57,0)
 . I +SIGNDATE W $S($P(SIGNMODE,";")="C":"/on chart/ ",1:"/es/ "),$S(SIGNNAME]"":SIGNNAME,1:SIGNEDBY)," ",$$DATE^TIULS(SIGNDATE,"MM/DD/YY")
"RTN","TIUPRDS1",58,0)
 . I +COSGDATE W ?40,$S($P(COSGMODE,";")="C":"/on chart/ ",1:"/es/ "),$S(COSGNAME]"":COSGNAME,1:COSGEDBY)," ",$$DATE^TIULS(COSGDATE,"MM/DD/YY")
"RTN","TIUPRDS1",59,0)
 . W !,$S((SIGNEDBY]"")&(EXPSIGNR'=SIGNEDBY):"for ",1:""),EXPSIGNR,?40,$S((COSGEDBY]"")&(ATTNDING'=COSGEDBY):"for ",1:""),ATTNDING
"RTN","TIUPRDS1",60,0)
 . ;I SIGNTITL]""!(COSGTITL]"") D
"RTN","TIUPRDS1",61,0)
 . ;. W !,$E(SIGNTITL,1,39),?40,$E(COSGTITL,1,39)
"RTN","TIUPRDS1",62,0)
 . ;E  D
"RTN","TIUPRDS1",63,0)
 . W !,$E(ESSTITL,1,39),?40,$E(ATTSTITL,1,39)
"RTN","TIUPRDS1",64,0)
 I EXPSIGNR=ATTNDING D
"RTN","TIUPRDS1",65,0)
 . W !?40,"SIGNATURE APPROVING PHYSICIAN/DENTIST",!!
"RTN","TIUPRDS1",66,0)
 . I +SIGNDATE W ?40,$S($P(SIGNMODE,";")="C":"/on chart/ ",1:"/es/ "),$S(SIGNNAME]"":SIGNNAME,1:SIGNEDBY)
"RTN","TIUPRDS1",67,0)
 . W !?40,$S(SIGNNAME]""&(ATTNDING'=SIGNEDBY):"for ",1:""),EXPSIGNR
"RTN","TIUPRDS1",68,0)
 . ;I SIGNTITL]"" W !?40,$E(SIGNTITL,1,39)
"RTN","TIUPRDS1",69,0)
 . W !?40,$E(ESSTITL,1,39)
"RTN","TIUPRDS1",70,0)
 I +$G(TIUFLAG) W !,TIULINE
"RTN","TIUPRDS1",71,0)
 E  W !,"=========================== CONFIDENTIAL INFORMATION ==========================="
"RTN","TIUPRDS1",72,0)
ADDENDA ; Discharge Summary Addenda
"RTN","TIUPRDS1",73,0)
 N DIW,DIWF,DIWL,DIWR,DIWT,X,Z K ^UTILITY($J,"W")
"RTN","TIUPRDS1",74,0)
 S TIUADD=0,DIWF="WN",DIWL=1,DIWR=79
"RTN","TIUPRDS1",75,0)
 F  S TIUADD=$O(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD)) Q:TIUADD'>0  D  Q:'TIUCONT
"RTN","TIUPRDS1",76,0)
 . S TIUY=6 D SETCONT() Q:'TIUCONT
"RTN","TIUPRDS1",77,0)
 . W !!,$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1201,"E")),"  ADDENDUM:"
"RTN","TIUPRDS1",78,0)
 . S TIUI=0
"RTN","TIUPRDS1",79,0)
 . F  S TIUI=$O(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,"TEXT",TIUI)) Q:TIUI'>0  D  Q:'TIUCONT
"RTN","TIUPRDS1",80,0)
 . . D SETCONT() Q:'TIUCONT
"RTN","TIUPRDS1",81,0)
 . . S X=^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,"TEXT",TIUI,0) S:X="" X=" " D ^DIWP
"RTN","TIUPRDS1",82,0)
 . D ^DIWW
"RTN","TIUPRDS1",83,0)
 . D:TIUCONT ADDENSIG
"RTN","TIUPRDS1",84,0)
 ; Next line moves footer to bottom of page/screen
"RTN","TIUPRDS1",85,0)
 I TIUCONT S TIUY=6 F  Q:$Y+TIUY>IOSL  W !
"RTN","TIUPRDS1",86,0)
 I  D SETCONT(1)
"RTN","TIUPRDS1",87,0)
 K ^UTILITY($J,"W")
"RTN","TIUPRDS1",88,0)
 Q
"RTN","TIUPRDS1",89,0)
ADDENSIG ;
"RTN","TIUPRDS1",90,0)
 N AUTHOR,EXPSIGNR,ATTNDING,SIGNDATE,SIGNEDBY,SIGNNAME,SIGNMODE,ATTSTITL
"RTN","TIUPRDS1",91,0)
 N AUSTITL,COSGDATE,COSGEDBY,COSGNAME,COSGMODE,TIULINE,SIGNTITL,COSGTITL
"RTN","TIUPRDS1",92,0)
 S $P(TIULINE,"-",80)=""
"RTN","TIUPRDS1",93,0)
 S AUTHOR=$$SIGNAME^TIULS(+$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1202,"I")))
"RTN","TIUPRDS1",94,0)
 S AUSTITL=$$SIGTITL^TIULS(+$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1202,"I")))
"RTN","TIUPRDS1",95,0)
 S SIGNTITL=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1504,"E"))
"RTN","TIUPRDS1",96,0)
 S EXPSIGNR=$$SIGNAME^TIULS(+$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1204,"I")))
"RTN","TIUPRDS1",97,0)
 I EXPSIGNR']"",(AUTHOR]"") S EXPSIGNR=AUTHOR
"RTN","TIUPRDS1",98,0)
 S ATTNDING=$$SIGNAME^TIULS(+$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1209,"I")))
"RTN","TIUPRDS1",99,0)
 S ATTSTITL=$$SIGTITL^TIULS(+$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1209,"I")))
"RTN","TIUPRDS1",100,0)
 S COSGTITL=$G(^TMP("TIULQ",$J,TIUDA,1510,"E"))
"RTN","TIUPRDS1",101,0)
 S SIGNDATE=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1501,"I"))_";"_$G(^("E"))
"RTN","TIUPRDS1",102,0)
 S SIGNEDBY=+$$SIGNAME^TIULS(+$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1502,"I")))
"RTN","TIUPRDS1",103,0)
 S SIGNNAME=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1503,"E"))
"RTN","TIUPRDS1",104,0)
 S SIGNMODE=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1505,"I"))_";"_$G(^("E"))
"RTN","TIUPRDS1",105,0)
 S COSGDATE=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1507,"I"))_";"_$G(^("E"))
"RTN","TIUPRDS1",106,0)
 S COSGEDBY=$$SIGNAME^TIULS(+$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1508,"I")))
"RTN","TIUPRDS1",107,0)
 S COSGNAME=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1509,"E"))
"RTN","TIUPRDS1",108,0)
 S COSGMODE=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1511,"I"))_";"_$G(^("E"))
"RTN","TIUPRDS1",109,0)
 S TIUY=12 D SETCONT() Q:'TIUCONT
"RTN","TIUPRDS1",110,0)
 I AUTHOR'=ATTNDING D
"RTN","TIUPRDS1",111,0)
 . W !,"SIGNATURE PHYSICIAN/DENTIST",?40,"SIGNATURE APPROVING PHYSICIAN/DENTIST",!!
"RTN","TIUPRDS1",112,0)
 . I +SIGNDATE W $S($P(SIGNMODE,";")="C":"/on chart/ ",1:"/es/ "),$S(SIGNNAME]"":SIGNNAME,1:$P(SIGNEDBY,";",2))," ",$$DATE^TIULS(SIGNDATE,"MM/DD/YY")
"RTN","TIUPRDS1",113,0)
 . I +COSGDATE W ?40,$S($P(COSGMODE,";")="C":"/on chart/ ",1:"/es/ "),$S(COSGNAME]"":COSGNAME,1:COSGEDBY)," ",$$DATE^TIULS(COSGDATE,"MM/DD/YY")
"RTN","TIUPRDS1",114,0)
 . W !,$S($P(SIGNEDBY,";",2)]""&(EXPSIGNR'=SIGNEDBY):"for ",1:""),AUTHOR,?40,$S(COSGNAME]""&(ATTNDING'=COSGEDBY):"for ",1:""),ATTNDING
"RTN","TIUPRDS1",115,0)
 . W !,$E($S(SIGNTITL]"":SIGNTITL,1:AUSTITL),1,39),?40,$E($S(COSGTITL]"":COSGTITL,1:ATTSTITL),1,39)
"RTN","TIUPRDS1",116,0)
 I AUTHOR=ATTNDING D
"RTN","TIUPRDS1",117,0)
 . W !?40,"SIGNATURE APPROVING PHYSICIAN/DENTIST",!!
"RTN","TIUPRDS1",118,0)
 . I +SIGNDATE W ?40,$S($P(SIGNMODE,";")="C":"/on chart/ ",1:"/es/ "),$S(SIGNNAME]"":SIGNNAME,1:$P(SIGNEDBY,";",2)),$$DATE^TIULS(SIGNDATE,"MM/DD/YY")
"RTN","TIUPRDS1",119,0)
 . W !?40,$S($P(SIGNEDBY,";",2)]""&(ATTNDING'=SIGNEDBY):"for ",1:""),ATTNDING
"RTN","TIUPRDS1",120,0)
 . W !?40,$E($S(SIGNTITL]"":SIGNTITL,1:ATTSTITL),1,39)
"RTN","TIUPRDS1",121,0)
 Q
"RTN","TIUPRDS1",122,0)
SETCONT(TIUHEAD) ;Does footer and sets TIUCONT
"RTN","TIUPRDS1",123,0)
 S TIUCONT=$$FOOTER^TIUPRDS2(TIUDA,.TIU,TIUFLAG,.TIUPAGE,TIUCOPY,$G(TIUHEAD))
"RTN","TIUPRDS1",124,0)
 Q
"RTN","TIUPRDS2")
0^140^B7185613
"RTN","TIUPRDS2",1,0)
TIUPRDS2 ;SLC/SBW - Header & Footer for Form 10-1000 ;3/26/93
"RTN","TIUPRDS2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPRDS2",3,0)
FOOTER(TIUDA,TIU,TIUFLAG,TIUPAGE,TIUCOPY,TIUHDR) ; Control Pagination
"RTN","TIUPRDS2",4,0)
 ; position, write footer when appropriate
"RTN","TIUPRDS2",5,0)
 ; IF TIUHDR=1, HEADER WILL NOT BE PRINTED
"RTN","TIUPRDS2",6,0)
 S TIUCONT=1 G:$Y+TIUY'>IOSL FOOTEXIT
"RTN","TIUPRDS2",7,0)
 F  Q:$Y+4>IOSL  W ! ;MOVES FOOTER PAGE/SCREEN BOTTOM
"RTN","TIUPRDS2",8,0)
 I $E(IOST)="P" D
"RTN","TIUPRDS2",9,0)
 . W !,"PATIENT: ",^TMP("TIULQ",$J,TIUDA,.02,"E")
"RTN","TIUPRDS2",10,0)
 . W ?47,"VA FORM 10-1000 DISCHARGE SUMMARY"
"RTN","TIUPRDS2",11,0)
 . W !,TIU("SSN"),"  DOB: ",$TR($G(TIU("DOB")),"-","/")
"RTN","TIUPRDS2",12,0)
 W ?40,$J(TIUCOPY,39)
"RTN","TIUPRDS2",13,0)
 I $E(IOST)="C" S TIUCONT=$$STOP^TIUU G FOOTEXIT:'TIUCONT
"RTN","TIUPRDS2",14,0)
 W @IOF
"RTN","TIUPRDS2",15,0)
 D:'+$G(TIUHDR) HEADER(TIUDA,.TIU,TIUFLAG,.TIUPAGE)
"RTN","TIUPRDS2",16,0)
FOOTEXIT ;
"RTN","TIUPRDS2",17,0)
 Q TIUCONT
"RTN","TIUPRDS2",18,0)
HEADER(TIUDA,TIU,TIUFLAG,TIUPAGE) ; Header
"RTN","TIUPRDS2",19,0)
 N TIULINE,TIUADT,TIUENTDT S $P(TIULINE,"-",80)=""
"RTN","TIUPRDS2",20,0)
 S TIUENTDT=+$G(^TIU(8925,+TIUDA,12))
"RTN","TIUPRDS2",21,0)
 S TIUADT=$S(+$G(TIU("LDT")):TIU("LDT"),+TIUENTDT:TIUENTDT,+$G(TIU("EDT")):TIU("EDT"),1:0)
"RTN","TIUPRDS2",22,0)
 I +$G(TIU("DOB")),+TIUADT S TIU("AGE")=$$AGE(TIUADT,+$$IDATE^TIULC($G(TIU("DOB"))))
"RTN","TIUPRDS2",23,0)
 W:'+TIUFLAG&($E(IOST)="P") ?26,"** WORK COPY - NOT FOR MEDICAL RECORD **"
"RTN","TIUPRDS2",24,0)
 W !,$E($P($G(TIU("DIV")),U,2),1,37),?$X+3,$S(^TMP("TIULQ",$J,TIUDA,.09,"I")="P":^("E"),1:"")
"RTN","TIUPRDS2",25,0)
 W ?50,$$DATE^TIULS($$NOW^TIULC,"MM/DD/YY HR:MIN"),?71,"Page: ",$J(TIUPAGE,2)
"RTN","TIUPRDS2",26,0)
 W !,TIULINE
"RTN","TIUPRDS2",27,0)
 W !,"PATIENT NAME",?33,"| AGE | SEX | RACE |     SSN     | CLAIM NUMBER"
"RTN","TIUPRDS2",28,0)
 W !,^TMP("TIULQ",$J,TIUDA,.02,"E"),?33,"| ",$J($G(TIU("AGE")),3),?39,"|",?42,$P($G(TIU("SEX")),U),?45,"| ",$E($P($G(TIU("RACE")),U,2),1,4),?52,"| ",$P($G(TIU("SSN")),U),?66,"| ",$G(TIU("CLAIM"))
"RTN","TIUPRDS2",29,0)
 W !,TIULINE
"RTN","TIUPRDS2",30,0)
 G:$E(IOST)="C"&(TIUPAGE>1) HEADERX ;Next lines not displayed on screen if page > 0
"RTN","TIUPRDS2",31,0)
 W !?2,"ADM DATE   |  DISC DATE   | TYPE OF RELEASE   | INP | ABS | WARD NO"
"RTN","TIUPRDS2",32,0)
 W !,$P(^TMP("TIULQ",$J,TIUDA,.07,"E"),"@"),?13,"| ",$P(^TMP("TIULQ",$J,TIUDA,.08,"E"),"@"),?28,"| "
"RTN","TIUPRDS2",33,0)
 W $S($G(^TMP("TIULQ",$J,TIUDA,.08,"E"))]"":$P($G(TIU("MTYPE")),U,2),1:" "),?48,"|"
"RTN","TIUPRDS2",34,0)
 W ?49,$J($P($G(TIU("DAYS")),U),4),?54,"|",?55,$J($P($G(TIU("DAYS")),U,4),4),?60,"| ",$E($P($G(TIU("WARD")),U,2),1,18)
"RTN","TIUPRDS2",35,0)
 W !,TIULINE
"RTN","TIUPRDS2",36,0)
HEADERX ;Header exit
"RTN","TIUPRDS2",37,0)
 S TIUPAGE=TIUPAGE+1
"RTN","TIUPRDS2",38,0)
 Q
"RTN","TIUPRDS2",39,0)
AGE(TIUDT,TIUDOB) ; Compute patient's age as of discharge (or entry)
"RTN","TIUPRDS2",40,0)
 N Y S Y=$$FMDIFF^XLFDT(TIUDT,TIUDOB)\365.25
"RTN","TIUPRDS2",41,0)
 Q Y
"RTN","TIUPREF")
0^141^B791105
"RTN","TIUPREF",1,0)
TIUPREF ; SLC/JER - Enter/edit personal preferences
"RTN","TIUPREF",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPREF",3,0)
MAIN ; Control branching
"RTN","TIUPREF",4,0)
 N DA
"RTN","TIUPREF",5,0)
 S DA=+$$GETREC
"RTN","TIUPREF",6,0)
 I +DA'>0 Q
"RTN","TIUPREF",7,0)
 D EDIT(DA)
"RTN","TIUPREF",8,0)
 Q
"RTN","TIUPREF",9,0)
GETREC() ; Get record in picklist file
"RTN","TIUPREF",10,0)
 N DIC,DLAYGO,X,Y,ASKNEW
"RTN","TIUPREF",11,0)
 S (DIC,DLAYGO)=8926,DIC(0)="ELMZ"
"RTN","TIUPREF",12,0)
 S X=$P(^VA(200,+$G(DUZ),0),U)
"RTN","TIUPREF",13,0)
 W !,"   Enter/edit Personal Preferences for ",X
"RTN","TIUPREF",14,0)
 D ^DIC
"RTN","TIUPREF",15,0)
 Q +$G(Y)
"RTN","TIUPREF",16,0)
EDIT(DA) ; Call ^DIE to edit the record
"RTN","TIUPREF",17,0)
 N DIE,DR,TIUCLASS,TIUREQCS
"RTN","TIUPREF",18,0)
 S DIE=8926,TIUREQCS=+$$ISA^USRLM(DUZ,"STUDENT")
"RTN","TIUPREF",19,0)
 S DR=".02:.08;.1;.11;I +TIUREQCS'>0 S Y=""@1"";.09;@1;1"
"RTN","TIUPREF",20,0)
 S DR(2,8926.01)=".01;.02;.03" D ^DIE
"RTN","TIUPREF",21,0)
 Q
"RTN","TIUPRPN")
0^142^B1941997
"RTN","TIUPRPN",1,0)
TIUPRPN ;SLC/MJC - Print SF 509 Progress Notes ;;7-6-95 9:00pm
"RTN","TIUPRPN",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPRPN",3,0)
 ; Writes SF 509- Progress Note to screen or paper.
"RTN","TIUPRPN",4,0)
DEVICE(TIUFLAG,TIUSPG) ; pick your device
"RTN","TIUPRPN",5,0)
 ;
"RTN","TIUPRPN",6,0)
 W ! K IOP S %ZIS="Q" D ^%ZIS I POP K POP G EXIT
"RTN","TIUPRPN",7,0)
 S TIUFLAG=+$G(TIUFLAG),TIUSPG=+$G(TIUSPG)
"RTN","TIUPRPN",8,0)
 I $D(IO("Q")) K IO("Q") D  G EXIT
"RTN","TIUPRPN",9,0)
 .S ZTRTN="ENTRY1^TIUPRPN",ZTSAVE("^TMP(""TIUPR"",$J,")=""
"RTN","TIUPRPN",10,0)
 .S ZTSAVE("TIUFLAG")="",ZTSAVE("TIUSPG")="",ZTDESC="TIU PRT PNS"
"RTN","TIUPRPN",11,0)
 .D ^%ZTLOAD W !,$S($D(ZTSK):"Request Queued!",1:"Request Canceled!")
"RTN","TIUPRPN",12,0)
 .K ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE,TIUFLAG,TIUSPG
"RTN","TIUPRPN",13,0)
 .D HOME^%ZIS
"RTN","TIUPRPN",14,0)
 U IO D ENTRY1,^%ZISC
"RTN","TIUPRPN",15,0)
 Q
"RTN","TIUPRPN",16,0)
ENTRY ; Entry point to print progress notes-called from ^TIUA
"RTN","TIUPRPN",17,0)
 N TIUSPG
"RTN","TIUPRPN",18,0)
 U IO
"RTN","TIUPRPN",19,0)
ENTRY1 ; Entry point from above
"RTN","TIUPRPN",20,0)
 N TIUERR,D0,DN,Y,DTOUT,DUOUT,DIRUT,DIROUT
"RTN","TIUPRPN",21,0)
 I $E(IOST)="C" S (TIUSPG,TIUFLAG)=1
"RTN","TIUPRPN",22,0)
 I '+$G(TIUFLAG) S TIUSPG=1
"RTN","TIUPRPN",23,0)
 K ^TMP("TIULQ",$J)
"RTN","TIUPRPN",24,0)
 I $D(ZTQUEUED) S ZTREQ="@" ; Tell TaskMan to delete Task log entry
"RTN","TIUPRPN",25,0)
 D PRINT^TIUPRPN1($G(TIUFLAG),$G(TIUSPG))
"RTN","TIUPRPN",26,0)
EXIT K ^TMP("TIULQ",$J),^TMP("TIUPR",$J)
"RTN","TIUPRPN",27,0)
 Q
"RTN","TIUPRPN1")
0^143^B58943181
"RTN","TIUPRPN1",1,0)
TIUPRPN1 ;SLC/JER - Print SF 509-Progress Notes ;3-1-97
"RTN","TIUPRPN1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPRPN1",3,0)
PRINT(TIUFLAG,TIUSPG) ; Print Summary
"RTN","TIUPRPN1",4,0)
 ; progressive fortune from the pagemaster:
"RTN","TIUPRPN1",5,0)
 ;        - mess with this and a fool and his paging are soon parted
"RTN","TIUPRPN1",6,0)
 ;
"RTN","TIUPRPN1",7,0)
 ; ^TMP("TIUPR",$J) is array of records passed by reference
"RTN","TIUPRPN1",8,0)
 ; TIUFLAG=1 --> Chart Copy     TIUSPG=1 --> Contiguous
"RTN","TIUPRPN1",9,0)
 ; TIUFLAG=0 --> Work Copy      TIUSPG=0 --> Fresh Page- each note
"RTN","TIUPRPN1",10,0)
 N TIUI,TIUJ,TIUPAGE,TIUFOOT,TIUK,TIUDA,TIUCONT,TIUPGRP,TIUTYP
"RTN","TIUPRPN1",11,0)
 N TIUPFHDR,TIUPFNBR
"RTN","TIUPRPN1",12,0)
 S TIUFLAG=+$G(TIUFLAG),TIUSPG=+$G(TIUSPG)
"RTN","TIUPRPN1",13,0)
 S TIUI=0 F  S TIUI=$O(^TMP("TIUPR",$J,TIUI)) Q:TIUI=""  D  Q:'TIUCONT
"RTN","TIUPRPN1",14,0)
 . N DFN,TIU
"RTN","TIUPRPN1",15,0)
 . I TIUI["$" S TIUPGRP=$P(TIUI,"$"),TIUPFHDR=$P($P(TIUI,";"),"$",2)
"RTN","TIUPRPN1",16,0)
 . E  S TIUPFHDR="Progress Notes"
"RTN","TIUPRPN1",17,0)
 . I $G(TIUPGRP)>2 S TIUSPG=0
"RTN","TIUPRPN1",18,0)
 . S DFN=$P(TIUI,";",2)
"RTN","TIUPRPN1",19,0)
 . D PATPN^TIULV(.TIUFOOT,DFN)
"RTN","TIUPRPN1",20,0)
 . I +$G(TIUSPG) D HEADER^TIUPRPN2(.TIUFOOT,TIUFLAG,.TIUPFHDR)
"RTN","TIUPRPN1",21,0)
 . S TIUJ=0 F  S TIUJ=$O(^TMP("TIUPR",$J,TIUI,TIUJ)) Q:'TIUJ  D  Q:'TIUCONT
"RTN","TIUPRPN1",22,0)
 . . S TIUK=0 F  S TIUK=$O(^TMP("TIUPR",$J,TIUI,TIUJ,TIUK)) Q:'TIUK  D  Q:'TIUCONT
"RTN","TIUPRPN1",23,0)
 . . . K TIUCONT1 S TIUPFNBR=^(TIUK)
"RTN","TIUPRPN1",24,0)
 . . . I '+$G(TIUSPG) D HEADER^TIUPRPN2(.TIUFOOT,TIUFLAG,.TIUPFHDR)
"RTN","TIUPRPN1",25,0)
 . . . S TIUDA=TIUK
"RTN","TIUPRPN1",26,0)
 . . . D REPORT(TIUDA) Q:'TIUCONT
"RTN","TIUPRPN1",27,0)
 . . . I '+$G(TIUSPG) K TIUCONT1 D SETCONT(1)
"RTN","TIUPRPN1",28,0)
 . ;F  Q:$Y+6>IOSL  W !
"RTN","TIUPRPN1",29,0)
 . Q:'TIUCONT  I $E(IOST)="C" S TIUCONT=$$STOP^TIUPRPN2() Q:'TIUCONT
"RTN","TIUPRPN1",30,0)
 . I +$G(TIUSPG),$E(IOST)'="C" K TIUCONT1 D SETCONT(1)
"RTN","TIUPRPN1",31,0)
 Q
"RTN","TIUPRPN1",32,0)
REPORT(TIUDA) ; Report Text
"RTN","TIUPRPN1",33,0)
 N DIW,DIWF,DIWL,DIWR,DIWT,TIUERR,TIU,TIUI,X,Z,TIUY,LOC
"RTN","TIUPRPN1",34,0)
 K ^TMP("TIULQ",$J)
"RTN","TIUPRPN1",35,0)
 D EXTRACT^TIULQ(+TIUDA,"^TMP(""TIULQ"",$J)",.TIUERR,"","",1)
"RTN","TIUPRPN1",36,0)
 I +$G(TIUERR) W !,$P(TIUERR,U,2) Q
"RTN","TIUPRPN1",37,0)
 Q:'$D(^TMP("TIULQ",$J))
"RTN","TIUPRPN1",38,0)
 S TIUY=4,TIUCONT=1
"RTN","TIUPRPN1",39,0)
 D SETCONT() Q:'TIUCONT
"RTN","TIUPRPN1",40,0)
 W "NOTE DATED: "
"RTN","TIUPRPN1",41,0)
 W $$DATE^TIULS(^TMP("TIULQ",$J,TIUDA,1301,"I"),"MM/DD/YY HR:MIN")
"RTN","TIUPRPN1",42,0)
 W ?30,$$UP^XLFSTR(^TMP("TIULQ",$J,TIUDA,.01,"E")),!
"RTN","TIUPRPN1",43,0)
 I +$G(^TMP("TIULQ",$J,TIUDA,1205,"I")) D
"RTN","TIUPRPN1",44,0)
 .S LOC=$G(^TMP("TIULQ",$J,TIUDA,1205,"I"))
"RTN","TIUPRPN1",45,0)
 .W $S($P(^SC(LOC,0),U,3)="W":"ADMITTED: ",1:"VISIT: ")
"RTN","TIUPRPN1",46,0)
 .W $$DATE^TIULS(^TMP("TIULQ",$J,TIUDA,.07,"I"),"MM/DD/YY HR:MIN")
"RTN","TIUPRPN1",47,0)
 .W " ",$G(^TMP("TIULQ",$J,TIUDA,1205,"E"))
"RTN","TIUPRPN1",48,0)
 I ^TMP("TIULQ",$J,TIUDA,1701,"E")]"" W !,"SUBJECT: ",^("E"),!
"RTN","TIUPRPN1",49,0)
 S TIUCONT1=1
"RTN","TIUPRPN1",50,0)
 I $D(^TMP("TIULQ",$J,TIUDA,"PROBLEM")) D  Q:'TIUCONT
"RTN","TIUPRPN1",51,0)
 .D SETCONT() Q:'TIUCONT
"RTN","TIUPRPN1",52,0)
 .W !,"ASSOCIATED PROBLEMS:"
"RTN","TIUPRPN1",53,0)
 .N TIUI S TIUI=0
"RTN","TIUPRPN1",54,0)
 .F  S TIUI=$O(^TMP("TIULQ",$J,TIUDA,"PROBLEM",TIUI)) Q:'TIUI  D  Q:'TIUCONT
"RTN","TIUPRPN1",55,0)
 ..W !,^(TIUI,0)
"RTN","TIUPRPN1",56,0)
 ..D SETCONT() Q:'TIUCONT
"RTN","TIUPRPN1",57,0)
 W !
"RTN","TIUPRPN1",58,0)
 ;
"RTN","TIUPRPN1",59,0)
 S TIUI=0,DIWF="WN",DIWL=1,DIWR=79 K ^UTILITY($J,"W")
"RTN","TIUPRPN1",60,0)
 F  S TIUI=$O(^TMP("TIULQ",$J,TIUDA,"TEXT",TIUI)) Q:TIUI'>0  D  Q:'TIUCONT  ; D ^DIWW
"RTN","TIUPRPN1",61,0)
 . D SETCONT() Q:'TIUCONT
"RTN","TIUPRPN1",62,0)
 . S X=^TMP("TIULQ",$J,TIUDA,"TEXT",TIUI,0) S:X="" X=" " D ^DIWP
"RTN","TIUPRPN1",63,0)
 D ^DIWW K ^UTILITY($J,"W")
"RTN","TIUPRPN1",64,0)
 Q:'TIUCONT
"RTN","TIUPRPN1",65,0)
RPTSIG ; Signature should be on bottom of form, Addenda on Subsequent pages
"RTN","TIUPRPN1",66,0)
 N AUTHOR,EXPSIGNR,EXPCOSNR,SIGNDATE,SIGNEDBY,SIGNNAME,SIGTITL,SIGNMODE
"RTN","TIUPRPN1",67,0)
 N COSGDATE,COSGEDBY,COSGNAME,COSGTITL,COSGMODE,SIGCHRT,COSCHRT,TIULINE
"RTN","TIUPRPN1",68,0)
 S $P(TIULINE,"-",81)=""
"RTN","TIUPRPN1",69,0)
 S AUTHOR=$G(^TMP("TIULQ",$J,TIUDA,1202,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",70,0)
 S EXPSIGNR=$G(^TMP("TIULQ",$J,TIUDA,1204,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",71,0)
 S EXPCOSNR=$G(^TMP("TIULQ",$J,TIUDA,1208,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",72,0)
 S SIGNDATE=$G(^TMP("TIULQ",$J,TIUDA,1501,"I"))
"RTN","TIUPRPN1",73,0)
 S SIGNEDBY=$G(^TMP("TIULQ",$J,TIUDA,1502,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",74,0)
 S SIGNNAME=$G(^TMP("TIULQ",$J,TIUDA,1503,"E"))
"RTN","TIUPRPN1",75,0)
 S SIGTITL=$G(^TMP("TIULQ",$J,TIUDA,1504,"E"))
"RTN","TIUPRPN1",76,0)
 S SIGNMODE=$G(^TMP("TIULQ",$J,TIUDA,1505,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",77,0)
 S COSGDATE=$G(^TMP("TIULQ",$J,TIUDA,1507,"I"))
"RTN","TIUPRPN1",78,0)
 S COSGEDBY=$G(^TMP("TIULQ",$J,TIUDA,1508,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",79,0)
 S COSGNAME=$G(^TMP("TIULQ",$J,TIUDA,1509,"E"))
"RTN","TIUPRPN1",80,0)
 S COSGTITL=$G(^TMP("TIULQ",$J,TIUDA,1510,"E"))
"RTN","TIUPRPN1",81,0)
 S COSGMODE=$G(^TMP("TIULQ",$J,TIUDA,1511,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",82,0)
 S SIGCHRT=$G(^TMP("TIULQ",$J,TIUDA,1512,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",83,0)
 S COSCHRT=$G(^TMP("TIULQ",$J,TIUDA,1513,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",84,0)
 D SETCONT() Q:'TIUCONT  W !
"RTN","TIUPRPN1",85,0)
 D SIGBLK Q:'TIUCONT
"RTN","TIUPRPN1",86,0)
ADDENDA ; Progress Notes Addenda
"RTN","TIUPRPN1",87,0)
 N DIW,DIWF,DIWL,DIWR,DIWT,X,Z,TIUI,TIUADD
"RTN","TIUPRPN1",88,0)
 S TIUADD=0,DIWF="WN",DIWL=1,DIWR=79 K ^UTILITY($J,"W")
"RTN","TIUPRPN1",89,0)
 F  S TIUADD=$O(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD)) Q:TIUADD'>0  D  Q:'TIUCONT
"RTN","TIUPRPN1",90,0)
 . S TIUY=4 D SETCONT() Q:'TIUCONT
"RTN","TIUPRPN1",91,0)
 . W !!,$$DATE^TIULS(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1301,"I"),"MM/DD/YY HR:MIN"),?21,"Addendum"
"RTN","TIUPRPN1",92,0)
 . S TIUI=0
"RTN","TIUPRPN1",93,0)
 . F  S TIUI=$O(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,"TEXT",TIUI)) Q:TIUI'>0  D  Q:'TIUCONT
"RTN","TIUPRPN1",94,0)
 . . D SETCONT() Q:'TIUCONT
"RTN","TIUPRPN1",95,0)
 . . S X=^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,"TEXT",TIUI,0) S:X="" X=" " D ^DIWP
"RTN","TIUPRPN1",96,0)
 . D ^DIWW
"RTN","TIUPRPN1",97,0)
 . D:TIUCONT ADDENSIG
"RTN","TIUPRPN1",98,0)
 K ^UTILITY($J,"W")
"RTN","TIUPRPN1",99,0)
 ; Write 2 linefeeds between records
"RTN","TIUPRPN1",100,0)
 Q:'TIUCONT  W !!
"RTN","TIUPRPN1",101,0)
 Q
"RTN","TIUPRPN1",102,0)
ADDENSIG ;
"RTN","TIUPRPN1",103,0)
 N AUTHOR,EXPSIGNR,ATTNDING,SIGNDATE,SIGNEDBY,SIGNNAME,SIGNMODE
"RTN","TIUPRPN1",104,0)
 N COSGDATE,COSGEDBY,COSGNAME,COSGMODE,TIULINE S $P(TIULINE,"-",80)=""
"RTN","TIUPRPN1",105,0)
 S AUTHOR=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1202,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",106,0)
 S EXPSIGNR=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1204,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",107,0)
 S ATTNDING=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1209,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",108,0)
 S SIGNDATE=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1501,"I"))
"RTN","TIUPRPN1",109,0)
 S SIGNEDBY=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1502,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",110,0)
 S SIGNNAME=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1503,"E"))
"RTN","TIUPRPN1",111,0)
 S SIGTITL=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1504,"E"))
"RTN","TIUPRPN1",112,0)
 S SIGNMODE=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1505,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",113,0)
 S COSGDATE=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1507,"I"))
"RTN","TIUPRPN1",114,0)
 S COSGEDBY=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1508,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",115,0)
 S COSGNAME=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1509,"E"))
"RTN","TIUPRPN1",116,0)
 S COSGTITL=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1510,"E"))
"RTN","TIUPRPN1",117,0)
 S COSGMODE=$G(^TMP("TIULQ",$J,TIUDA,"ZADD",TIUADD,1511,"I"))_";"_$G(^("E"))
"RTN","TIUPRPN1",118,0)
 S TIUY=11
"RTN","TIUPRPN1",119,0)
SIGBLK I '+SIGNDATE W !,"**DRAFT COPY - DRAFT COPY -- ABOVE NOTE IS UNSIGNED--"
"RTN","TIUPRPN1",120,0)
 I  W " DRAFT COPY - DRAFT COPY**",! D SETCONT() Q:'TIUCONT
"RTN","TIUPRPN1",121,0)
 I SIGNEDBY]"",(+SIGNEDBY'=+AUTHOR)  D
"RTN","TIUPRPN1",122,0)
 . W ?21,"Author:      ",$P(AUTHOR,";",2),!
"RTN","TIUPRPN1",123,0)
 I +SIGNDATE D SETCONT() Q:'TIUCONT  D
"RTN","TIUPRPN1",124,0)
 . W ?18,"Signed by:",$S($P(SIGNMODE,";")="C":"      ",1:" /es/ "),?34,$S(SIGNNAME]"":SIGNNAME,1:$P(SIGNEDBY,";",2))
"RTN","TIUPRPN1",125,0)
 . W !?34,SIGTITL
"RTN","TIUPRPN1",126,0)
 . I $L(SIGTITL)>30 W !?34
"RTN","TIUPRPN1",127,0)
 . E  W " "
"RTN","TIUPRPN1",128,0)
 . W $$DATE^TIULS(+SIGNDATE,"MM/DD/YY HR:MIN")
"RTN","TIUPRPN1",129,0)
 . I '+$G(TIUFLAG)!($E(IOST)="C") D
"RTN","TIUPRPN1",130,0)
 . . I $P($$BEEP^TIULC1(+SIGNEDBY),U) W !?34,"Analog Pager:  ",$P($$BEEP^TIULC1(+SIGNEDBY),U)
"RTN","TIUPRPN1",131,0)
 . . I $P($$BEEP^TIULC1(+SIGNEDBY),U,2) W !?34,"Digital Pager: ",$P($$BEEP^TIULC1(+SIGNEDBY),U,2)
"RTN","TIUPRPN1",132,0)
 I $G(^TMP("TIULQ",$J,TIUDA,.05,"E"))="UNCOSIGNED" D
"RTN","TIUPRPN1",133,0)
 . W !?34,"**REQUIRES COSIGNATURE**",!
"RTN","TIUPRPN1",134,0)
 I +SIGCHRT,$P(SIGNMODE,";")="C" D SETCONT() Q:'TIUCONT  D
"RTN","TIUPRPN1",135,0)
 . W !?2,"Marked signed on chart by:",?34,$P(SIGCHRT,";",2)
"RTN","TIUPRPN1",136,0)
 I +$D(^TMP("TIULQ",$J,TIUDA,"EXTRASGNR")) D
"RTN","TIUPRPN1",137,0)
 . N TIUI S TIUI=0
"RTN","TIUPRPN1",138,0)
 . D SETCONT() Q:'TIUCONT  W !?16,"Concurrence:"
"RTN","TIUPRPN1",139,0)
 . F  S TIUI=$O(^TMP("TIULQ",$J,TIUDA,"EXTRASGNR",TIUI)) Q:'TIUI  D
"RTN","TIUPRPN1",140,0)
 . . I +$G(^TMP("TIULQ",$J,TIUDA,"EXTRASGNR",TIUI,"DATE"))'>0 Q
"RTN","TIUPRPN1",141,0)
 . . I TIUI>1 D SETCONT() Q:'TIUCONT  W !
"RTN","TIUPRPN1",142,0)
 . . W ?29,"/es/ ",$G(^TMP("TIULQ",$J,TIUDA,"EXTRASGNR",TIUI,"NAME"))
"RTN","TIUPRPN1",143,0)
 . . W !?34,$G(^TMP("TIULQ",$J,TIUDA,"EXTRASGNR",TIUI,"TITLE"))
"RTN","TIUPRPN1",144,0)
 . . I $L($G(^TMP("TIULQ",$J,TIUDA,"EXTRASGNR",TIUI,"TITLE")))>30 W !?34
"RTN","TIUPRPN1",145,0)
 . . E  W " "
"RTN","TIUPRPN1",146,0)
 . . W $$DATE^TIULS($G(^TMP("TIULQ",$J,TIUDA,"EXTRASGNR",TIUI,"DATE")),"MM/DD/YY HR:MIN")
"RTN","TIUPRPN1",147,0)
 . . I '+$G(TIUFLAG)!($E(IOST)="C") D
"RTN","TIUPRPN1",148,0)
 . . . N BEEP
"RTN","TIUPRPN1",149,0)
 . . . S BEEP=$$BEEP^TIULC1(+$G(^TMP("TIULQ",$J,TIUDA,"EXTRASGNR",TIUI,"EXTRA")))
"RTN","TIUPRPN1",150,0)
 . . . I +BEEP W !?34,"Analog Pager:  ",$P(BEEP,U)
"RTN","TIUPRPN1",151,0)
 . . . I +$P(BEEP,U,2) W !?34,"Digital Pager: ",$P(BEEP,U,2)
"RTN","TIUPRPN1",152,0)
 . K ^TMP("TIULQ",$J,TIUDA,"EXTRASGNR")
"RTN","TIUPRPN1",153,0)
 I +COSGDATE,(+COSGEDBY'=+SIGNEDBY) D SETCONT() Q:'TIUCONT  D
"RTN","TIUPRPN1",154,0)
 . W !?16,"Cosigned by:",$S($P(COSGMODE,";")="C":"      ",1:" /es/ "),?34,$S(COSGNAME]"":COSGNAME,1:$P(COSGEDBY,";",2))
"RTN","TIUPRPN1",155,0)
 . W !?34,COSGTITL," "
"RTN","TIUPRPN1",156,0)
 . W $$DATE^TIULS(+COSGDATE,"MM/DD/YY HR:MIN")
"RTN","TIUPRPN1",157,0)
 . I '+$G(TIUFLAG)!($E(IOST)="C") D
"RTN","TIUPRPN1",158,0)
 . . I $P($$BEEP^TIULC1(+COSGEDBY),U) W !?34,"Analog Pager: ",$P($$BEEP^TIULC1(+COSGEDBY),U)
"RTN","TIUPRPN1",159,0)
 . . I $P($$BEEP^TIULC1(+COSGEDBY),U,2) W !?34,"Digital Pager:",$P($$BEEP^TIULC1(+COSGEDBY),U,2)
"RTN","TIUPRPN1",160,0)
 I +COSCHRT,$P(COSGMODE,";")="C" D SETCONT() Q:'TIUCONT  D
"RTN","TIUPRPN1",161,0)
 . W !,"Marked cosigned on chart by:",?34,$P(COSCHRT,";",2)
"RTN","TIUPRPN1",162,0)
 W !
"RTN","TIUPRPN1",163,0)
 K TIUCONT1
"RTN","TIUPRPN1",164,0)
AMEND ; signature blocks of amender
"RTN","TIUPRPN1",165,0)
 S TIUY=4 D SETCONT() Q:'TIUCONT
"RTN","TIUPRPN1",166,0)
 I +$G(^TMP("TIULQ",$J,TIUDA,1601,"I")) D
"RTN","TIUPRPN1",167,0)
 . W !!,"Amendment Filed:  ",^TMP("TIULQ",$J,TIUDA,1601,"E")
"RTN","TIUPRPN1",168,0)
 . W !?13,"by:  ",^TMP("TIULQ",$J,TIUDA,1602,"E")
"RTN","TIUPRPN1",169,0)
 . ;W !?18,^TMP("TIULQ",$J,TIUDA,1603,"E")
"RTN","TIUPRPN1",170,0)
 Q
"RTN","TIUPRPN1",171,0)
SETCONT(TIUHEAD) ;Does footer and sets TIUCONT
"RTN","TIUPRPN1",172,0)
 S TIUCONT=$$FOOTER^TIUPRPN2(.TIUFOOT,TIUFLAG,TIUPFNBR,$G(TIUHEAD),$G(TIUCONT1))
"RTN","TIUPRPN1",173,0)
 Q
"RTN","TIUPRPN2")
0^144^B6201564
"RTN","TIUPRPN2",1,0)
TIUPRPN2 ;SLC/MJC - Header/Footer for Progress Notes ;10-31-96
"RTN","TIUPRPN2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPRPN2",3,0)
FOOTER(TIUFOOT,TIUFLAG,TIUPFNBR,TIUHDR,TIUCONT1) ; Control Pagination
"RTN","TIUPRPN2",4,0)
 ; position, write footer when appropriate
"RTN","TIUPRPN2",5,0)
 ; IF TIUHDR=1, HEADER WILL NOT BE PRINTED
"RTN","TIUPRPN2",6,0)
 S TIUCONT=1
"RTN","TIUPRPN2",7,0)
 I $E(IOST)="C" G FOOTX:$Y+3<IOSL S TIUCONT=$$STOP G FOOTW
"RTN","TIUPRPN2",8,0)
 G FTR:+$G(TIUHDR)
"RTN","TIUPRPN2",9,0)
 G:$Y+7<IOSL FOOTX
"RTN","TIUPRPN2",10,0)
FTR I IOT'="HFS" F  Q:$Y+5'<IOSL  W ! ;moves ftr to pg bottom
"RTN","TIUPRPN2",11,0)
 N TIUFNUM,TIULINE
"RTN","TIUPRPN2",12,0)
 S $P(TIULINE,"-",81)=""
"RTN","TIUPRPN2",13,0)
 W ?21,$S(+$G(TIUCONT1):"** THIS NOTE CONTINUED ON NEXT PAGE **",1:""),!
"RTN","TIUPRPN2",14,0)
 I '+$G(TIUFLAG) W "WORK COPY ========== UNOFFICIAL "
"RTN","TIUPRPN2",15,0)
 I  W "- NOT FOR MEDICAL RECORD =========== DO NOT FILE"
"RTN","TIUPRPN2",16,0)
 E  W TIULINE
"RTN","TIUPRPN2",17,0)
 W !,TIUFOOT("PNMP")
"RTN","TIUPRPN2",18,0)
 I $P($G(^TIU(8925.94,1,0)),U,2)]"" S TIUDIVI=$P(^(0),U,2) D
"RTN","TIUPRPN2",19,0)
 .W ?(80-$L(TIUDIVI)\2),TIUDIVI K TIUDIVI
"RTN","TIUPRPN2",20,0)
 E  W ?(80-$L(TIUFOOT("SITE"))\2),TIUFOOT("SITE")
"RTN","TIUPRPN2",21,0)
 W ?58,"Printed:",$$DATE^TIULS($$NOW^TIULC,"MM/DD/YY HR:MIN")
"RTN","TIUPRPN2",22,0)
 W !,TIUFOOT("SSN")," ",TIUFOOT("DOB")
"RTN","TIUPRPN2",23,0)
 I +$G(TIUFLAG) W ?(80-$L(TIUPFNBR)),TIUPFNBR
"RTN","TIUPRPN2",24,0)
 I '+$G(TIUFLAG) W ?(80-$L(TIUFOOT("PH#"))),TIUFOOT("PH#")
"RTN","TIUPRPN2",25,0)
 I +$G(TIUFLAG) W !,TIULINE
"RTN","TIUPRPN2",26,0)
 E  W !,"=========================== CONFIDENTIAL INFORMATION ==========================="
"RTN","TIUPRPN2",27,0)
 W @IOF
"RTN","TIUPRPN2",28,0)
FOOTW I '+$G(TIUHDR),+$G(TIUCONT) D HEADER(.TIUFOOT,TIUFLAG,.TIUPFHDR,.TIUCONT1)
"RTN","TIUPRPN2",29,0)
FOOTX ;
"RTN","TIUPRPN2",30,0)
 Q TIUCONT
"RTN","TIUPRPN2",31,0)
HEADER(TIUFOOT,TIUFLAG,TIUPFHDR,TIUCONT1) ; Header
"RTN","TIUPRPN2",32,0)
 N TIULINE S $P(TIULINE,"-",81)=""
"RTN","TIUPRPN2",33,0)
 I $E(IOST)="C" D
"RTN","TIUPRPN2",34,0)
 .W @IOF,$C(13),TIULINE,!,TIUFOOT("PNMP")_"  "_TIUFOOT("SSN")
"RTN","TIUPRPN2",35,0)
 .W ?(78-$L(TIUPFHDR)),TIUPFHDR,!,TIULINE,!
"RTN","TIUPRPN2",36,0)
 .I +$G(TIUCONT1) W $$DATE^TIULS(^TMP("TIULQ",$J,TIUDA,1301,"I"),"MM/DD/YY HR:MIN"),?21,"** CONTINUED FROM PREVIOUS SCREEN **",!
"RTN","TIUPRPN2",37,0)
 E  D
"RTN","TIUPRPN2",38,0)
 .W !,TIULINE,!,$S('+$G(TIUFLAG):"** WORK COPY - NOT FOR ",1:"")
"RTN","TIUPRPN2",39,0)
 .W "MEDICAL RECORD" W:'+$G(TIUFLAG) " **" W ?(80-$L(TIUPFHDR)),TIUPFHDR
"RTN","TIUPRPN2",40,0)
 .W !,TIULINE,!
"RTN","TIUPRPN2",41,0)
 .I +$G(TIUCONT1) W $$DATE^TIULS(^TMP("TIULQ",$J,TIUDA,1301,"I"),"MM/DD/YY HR:MIN"),?21,"** CONTINUED FROM PREVIOUS PAGE **",!!
"RTN","TIUPRPN2",42,0)
 K TIUCONT1
"RTN","TIUPRPN2",43,0)
 Q
"RTN","TIUPRPN2",44,0)
STOP() ;on screen paging check
"RTN","TIUPRPN2",45,0)
 ; quits TIUCONT=1 if cont. ELSE quits TIUCONT=0
"RTN","TIUPRPN2",46,0)
 ;F  Q:$Y>21  W !
"RTN","TIUPRPN2",47,0)
 N DIR,Y
"RTN","TIUPRPN2",48,0)
 S DIR(0)="E" D ^DIR
"RTN","TIUPRPN2",49,0)
 S TIUCONT=Y
"RTN","TIUPRPN2",50,0)
 Q TIUCONT
"RTN","TIUPRPN3")
0^145^B20739651
"RTN","TIUPRPN3",1,0)
TIUPRPN3 ;SLC/MJC-Sort PNs for Prting;;2-14-96 12:15pm
"RTN","TIUPRPN3",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPRPN3",3,0)
 ;
"RTN","TIUPRPN3",4,0)
SETUP(TITLE) ;displays centered option hdr
"RTN","TIUPRPN3",5,0)
 N TIULINE
"RTN","TIUPRPN3",6,0)
 S $P(TIULINE,"-",80)=""
"RTN","TIUPRPN3",7,0)
 W @IOF,!!?(IOM-$L(TITLE)\2),TITLE,!,TIULINE,!
"RTN","TIUPRPN3",8,0)
 Q
"RTN","TIUPRPN3",9,0)
PT ;sorts PNs to prt by pt for selected date range
"RTN","TIUPRPN3",10,0)
 ;these notes are chartable either contiguous or separate pgs
"RTN","TIUPRPN3",11,0)
 ;[TIU PRINT PN PT]
"RTN","TIUPRPN3",12,0)
 ;
"RTN","TIUPRPN3",13,0)
 N TIUDFN,TIUQT,DIC,Y,TIUXREF,CTR1
"RTN","TIUPRPN3",14,0)
 D SETUP("Print Progress Notes for a Selected PATIENT")
"RTN","TIUPRPN3",15,0)
 F  W ! S DIC=2,DIC(0)="AEQMN" D ^DIC Q:Y<0  D  K TIUQT
"RTN","TIUPRPN3",16,0)
 .N TIUFLAG,TIUSPG
"RTN","TIUPRPN3",17,0)
 .S TIUDFN=Y,TIUXREF="APTP" ;pt/pt x-ref
"RTN","TIUPRPN3",18,0)
 .D FETCH(TIUXREF,TIUDFN) Q:$D(TIUQT)
"RTN","TIUPRPN3",19,0)
 .S TIUFLAG=$$FLAG() Q:TIUFLAG']""
"RTN","TIUPRPN3",20,0)
 .I +$G(TIUFLAG),CTR1>1 S TIUSPG=$$PAGE Q:TIUSPG']""
"RTN","TIUPRPN3",21,0)
 .S TIUSPG=$S(+$G(TIUSPG):0,1:1)
"RTN","TIUPRPN3",22,0)
 .D DEVICE^TIUPRPN(TIUFLAG,TIUSPG)
"RTN","TIUPRPN3",23,0)
 Q
"RTN","TIUPRPN3",24,0)
 ;
"RTN","TIUPRPN3",25,0)
AUTHOR ;sorts PNs to prt by author for selected date range
"RTN","TIUPRPN3",26,0)
 ;these guys are only chartable if prted on separate pages
"RTN","TIUPRPN3",27,0)
 ;[TIU PRINT PN AUTHOR]
"RTN","TIUPRPN3",28,0)
 ;
"RTN","TIUPRPN3",29,0)
 N TIUDUZ,TIUQT,DIC,Y,TIUXREF,CTR1
"RTN","TIUPRPN3",30,0)
 D SETUP("Print Progress Notes for a Selected AUTHOR")
"RTN","TIUPRPN3",31,0)
 S DIC=200,DIC(0)="AEQMN",DIC("A")="AUTHOR: "
"RTN","TIUPRPN3",32,0)
 F  W ! D ^DIC Q:Y<0  D  K TIUQT
"RTN","TIUPRPN3",33,0)
 .N TIUFLAG,TIUSPG
"RTN","TIUPRPN3",34,0)
 .S TIUDUZ=Y,TIUXREF="AAUP" ;author/author x-ref
"RTN","TIUPRPN3",35,0)
 .D FETCH(TIUXREF,TIUDUZ) Q:$D(TIUQT)
"RTN","TIUPRPN3",36,0)
 .S TIUFLAG=$$FLAG() Q:TIUFLAG']""
"RTN","TIUPRPN3",37,0)
 .S TIUSPG=$S(+$G(TIUFLAG):0,1:1)
"RTN","TIUPRPN3",38,0)
 .D DEVICE^TIUPRPN(TIUFLAG,TIUSPG)
"RTN","TIUPRPN3",39,0)
 Q
"RTN","TIUPRPN3",40,0)
 ;
"RTN","TIUPRPN3",41,0)
LOC ;sorts PNs to prt by location for selected date range
"RTN","TIUPRPN3",42,0)
 ;they are only chartable if prted on separate pages
"RTN","TIUPRPN3",43,0)
 ;[TIU PRINT PN LOC]
"RTN","TIUPRPN3",44,0)
 ;
"RTN","TIUPRPN3",45,0)
 N TIUDUZ,TIUQT,DIC,Y,TIUXREF,CTR1
"RTN","TIUPRPN3",46,0)
 D SETUP("Print Progress Notes for a Selected LOCATION")
"RTN","TIUPRPN3",47,0)
 S DIC=44,DIC(0)="AEQMN"
"RTN","TIUPRPN3",48,0)
 F  W ! D ^DIC Q:Y<0  D  K TIUQT
"RTN","TIUPRPN3",49,0)
 .N TIUFLAG,TIUSPG
"RTN","TIUPRPN3",50,0)
 .S TIULOC=Y,TIUXREF="ALOCP" ;location/location x-ref
"RTN","TIUPRPN3",51,0)
 .D FETCH(TIUXREF,TIULOC) Q:$D(TIUQT)
"RTN","TIUPRPN3",52,0)
 .S TIUFLAG=$$FLAG() Q:TIUFLAG']""
"RTN","TIUPRPN3",53,0)
 .S TIUSPG=$S(+$G(TIUFLAG):0,1:1)
"RTN","TIUPRPN3",54,0)
 .D DEVICE^TIUPRPN(TIUFLAG,TIUSPG)
"RTN","TIUPRPN3",55,0)
 Q
"RTN","TIUPRPN3",56,0)
 ;
"RTN","TIUPRPN3",57,0)
FETCH(TIUXREF,ENTITY) ;get the notes select date range
"RTN","TIUPRPN3",58,0)
 N OLD,NEW,BEG,END,HOLD,SORT,DFN,IFN,Y
"RTN","TIUPRPN3",59,0)
 S OLD=0 S OLD=$O(^TIU(8925,TIUXREF,+ENTITY,OLD)) I 'OLD D  S TIUQT=1 Q
"RTN","TIUPRPN3",60,0)
 .W !!,$C(7),"No signed notes available for "_$P(ENTITY,U,2),!
"RTN","TIUPRPN3",61,0)
 S OLD=$O(^TIU(8925,TIUXREF,+ENTITY,0))
"RTN","TIUPRPN3",62,0)
 S NEW=$O(^TIU(8925,TIUXREF,+ENTITY,9999999),-1)
"RTN","TIUPRPN3",63,0)
 W !!,"Available note",$S(OLD'=NEW:"s",1:""),": "
"RTN","TIUPRPN3",64,0)
 W $$FMTE^XLFDT(OLD,"D")
"RTN","TIUPRPN3",65,0)
 I OLD'=NEW W " thru ",$$FMTE^XLFDT(NEW,"D")
"RTN","TIUPRPN3",66,0)
FISH I OLD=NEW S (BEG,END)=$E(OLD,1,7)
"RTN","TIUPRPN3",67,0)
 E  D  W ! K %DT Q:$D(TIUQT)
"RTN","TIUPRPN3",68,0)
 .S %DT="AEPTX",%DT(0)="-NOW",%DT("A")="Print Notes Beginning: "
"RTN","TIUPRPN3",69,0)
 .D ^%DT I $D(DTOUT)!(Y<0) S TIUQT=1 Q
"RTN","TIUPRPN3",70,0)
 .S BEG=Y,%DT("A")="                 Thru: "
"RTN","TIUPRPN3",71,0)
 .S %DT="AEPTX" D ^%DT I $D(DTOUT)!(Y<0) S TIUQT=1 Q
"RTN","TIUPRPN3",72,0)
 .S END=Y I END<BEG S HOLD=BEG,BEG=END,END=HOLD
"RTN","TIUPRPN3",73,0)
 ; load up the notes
"RTN","TIUPRPN3",74,0)
 W !!,"Searching for the notes"
"RTN","TIUPRPN3",75,0)
 K ^TMP("TIUPR",$J)
"RTN","TIUPRPN3",76,0)
 S CTR1=0,DATE=BEG,END=END+.9999999
"RTN","TIUPRPN3",77,0)
 F  S DATE=$O(^TIU(8925,TIUXREF,+ENTITY,DATE)) Q:'DATE!(DATE>END)  D
"RTN","TIUPRPN3",78,0)
 .S IFN=0 F  S IFN=$O(^TIU(8925,TIUXREF,+ENTITY,DATE,IFN)) Q:'IFN  D
"RTN","TIUPRPN3",79,0)
 ..W "." S CTR1=CTR1+1
"RTN","TIUPRPN3",80,0)
 ..S DFN=$P(^TIU(8925,IFN,0),U,2),SORT=$P(^DPT(DFN,0),U)_";"_DFN
"RTN","TIUPRPN3",81,0)
 ..S ^TMP("TIUPR",$J,SORT,DATE,IFN)="Vice SF 509"
"RTN","TIUPRPN3",82,0)
 I '$D(^TMP("TIUPR",$J)) W !!,"No notes found- try again!",! G FISH
"RTN","TIUPRPN3",83,0)
 W !,">> "_CTR1_" note"_$S(CTR1>1:"s",1:"")_" found for "_$P(ENTITY,U,2)
"RTN","TIUPRPN3",84,0)
 Q
"RTN","TIUPRPN3",85,0)
 ;
"RTN","TIUPRPN3",86,0)
FLAG() ;asks question for CHART vs. WORK copies
"RTN","TIUPRPN3",87,0)
 ;returns TIUFLAG=1 if CHART copy - TIUFLAG=0 if WORK copy - NULL if '^'
"RTN","TIUPRPN3",88,0)
 S TIUFLAG=$$READ^TIUU("SA^C:CHART;W:WORK","Do you want WORK copies or CHART copies? ","CHART","^D HELP^TIUPRPN3")
"RTN","TIUPRPN3",89,0)
 I $E(TIUFLAG)="^" S TIUFLAG=""
"RTN","TIUPRPN3",90,0)
 E  S TIUFLAG=$S($P(TIUFLAG,U)="C":1,1:0)
"RTN","TIUPRPN3",91,0)
 Q TIUFLAG
"RTN","TIUPRPN3",92,0)
 ;
"RTN","TIUPRPN3",93,0)
PAGE() ;asks question for CONTIGUOUS vs. SEPARATE PAGE print
"RTN","TIUPRPN3",94,0)
 ;returns TIUSPG=0 for CONTIGUOUS - TIUSPG=1 SEPARATE PAGE - NULL if '^'
"RTN","TIUPRPN3",95,0)
 S TIUSPG=$$READ^TIUU("YA","Do you want to start each note on a new page? ","NO","^D HELP1^TIUPRPN3")
"RTN","TIUPRPN3",96,0)
 I $E(TIUSPG)="^" S TIUSPG=""
"RTN","TIUPRPN3",97,0)
 E  S TIUSPG=$S(+$G(TIUSPG):1,1:0)
"RTN","TIUPRPN3",98,0)
 Q TIUSPG
"RTN","TIUPRPN3",99,0)
HELP ; answers questions regarding WORK vs. CHART copies
"RTN","TIUPRPN3",100,0)
 W !!?5,"The FOOTERs of WORK/CHART copies vary significantly.  The WORK"
"RTN","TIUPRPN3",101,0)
 W !?5,"FOOTER has the patient's phone number and is clearly marked:"
"RTN","TIUPRPN3",102,0)
 W !?5,"'NOT FOR MEDICAL RECORD'.  Unless you really intend to file the"
"RTN","TIUPRPN3",103,0)
 W !?5,"note(s) in the chart- print a WORK copy."
"RTN","TIUPRPN3",104,0)
 Q
"RTN","TIUPRPN3",105,0)
HELP1 ; answers the 'ea note on a new page' question
"RTN","TIUPRPN3",106,0)
 W !!?5,"The option selected will produce CHARTABLE contiguous notes."
"RTN","TIUPRPN3",107,0)
 W !?5,"If you are filling in a chart that has handwritten notes, or,"
"RTN","TIUPRPN3",108,0)
 W !?5,"you'd prefer to begin each note on a new page; answer 'YES'."
"RTN","TIUPRPN3",109,0)
 Q
"RTN","TIUPRPN4")
0^146^B8735462
"RTN","TIUPRPN4",1,0)
TIUPRPN4 ;SLC/MJC;Print Progress Notes for Inpt Location; 10-31-96
"RTN","TIUPRPN4",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPRPN4",3,0)
 ;
"RTN","TIUPRPN4",4,0)
LOC ;sorts PNs for prting by WARD location
"RTN","TIUPRPN4",5,0)
 ;this option is for inpts
"RTN","TIUPRPN4",6,0)
 ;it prts all PNs for a selected date range for all patients
"RTN","TIUPRPN4",7,0)
 ;currently on the WARD
"RTN","TIUPRPN4",8,0)
 ;these notes are chartable contiguous or separate
"RTN","TIUPRPN4",9,0)
 ;[TIU PRINT PN WARD]
"RTN","TIUPRPN4",10,0)
 ;
"RTN","TIUPRPN4",11,0)
 N DIC,Y,TIUQT,TIULOC,WARD
"RTN","TIUPRPN4",12,0)
 D SETUP^TIUPRPN3("Print Progress Notes for ALL patients on WARD")
"RTN","TIUPRPN4",13,0)
DIC F  D  Q:$D(TIUQT)
"RTN","TIUPRPN4",14,0)
 .S DIC=8925.93,DIC(0)="AEQMNZ",DIC("A")="Select WARD Location: "
"RTN","TIUPRPN4",15,0)
 .S DIC("S")="I $P($G(^SC(+$P($G(^TIU(8925.93,+Y,0)),U),0)),U,3)=""W"""
"RTN","TIUPRPN4",16,0)
 .W ! D ^DIC K DIC I Y<0 S TIUQT=1 Q
"RTN","TIUPRPN4",17,0)
 .S WARD=Y(0,0)
"RTN","TIUPRPN4",18,0)
 .S TIULOC=+Y(0)_U_+Y_U_Y(0,0)
"RTN","TIUPRPN4",19,0)
 .;ien hosp loc^ien tiu prt param^external ward loc
"RTN","TIUPRPN4",20,0)
 .D NOTES(TIULOC)
"RTN","TIUPRPN4",21,0)
 Q
"RTN","TIUPRPN4",22,0)
 ;
"RTN","TIUPRPN4",23,0)
NOTES(TIULOC) ;sets date/time of when notes prted
"RTN","TIUPRPN4",24,0)
 N Y,BEG,MOVE,BED,DATE,CTR,TIULAST,ANS,IFN,TIUSPG,DFN,TIUQT
"RTN","TIUPRPN4",25,0)
 S TIULAST=$P($G(^TIU(8925.93,+$P(TIULOC,U,2),1)),U,2)
"RTN","TIUPRPN4",26,0)
 I TIULAST']"" S BEG=$$DATE() Q:BEG']""
"RTN","TIUPRPN4",27,0)
 I TIULAST]"" D  Q:$D(TIUQT)
"RTN","TIUPRPN4",28,0)
 .I '+$G(TIULAST) D 2^TIUPRPN5 S BEG=$$DATE() I BEG']"" S TIUQT=1 Q
"RTN","TIUPRPN4",29,0)
 .W !!,"Notes were last printed for "_WARD_" at "
"RTN","TIUPRPN4",30,0)
 .W $$FMTE^XLFDT(+TIULAST,"1P"),!
"RTN","TIUPRPN4",31,0)
 .S ANS=$$READ^TIUU("YA","Print from this DATE/TIME on? ","YES","^D HELP^TIUPRPN5")
"RTN","TIUPRPN4",32,0)
 .I $D(DIRUT) S TIUQT=1 Q
"RTN","TIUPRPN4",33,0)
 .I +$G(ANS) S BEG=+TIULAST Q
"RTN","TIUPRPN4",34,0)
 .D 3^TIUPRPN5 S BEG=$$DATE() I BEG']"" S TIUQT=1 Q
"RTN","TIUPRPN4",35,0)
 S TIULAST=BEG,CTR=0
"RTN","TIUPRPN4",36,0)
 S MOVE=0 F  S MOVE=$O(^DGPM("CN",WARD,MOVE)) Q:'MOVE  D
"RTN","TIUPRPN4",37,0)
 .Q:'$D(^DGPM(MOVE,0))
"RTN","TIUPRPN4",38,0)
 .S DFN=$P(^DGPM(MOVE,0),U,3),BED=$G(^DPT(DFN,.101))_" "
"RTN","TIUPRPN4",39,0)
 .S BEG=$E(TIULAST,1,12)-.0001 ;back up one minute
"RTN","TIUPRPN4",40,0)
 .F  S BEG=$O(^TIU(8925,"APTP",DFN,BEG)) Q:'BEG  D
"RTN","TIUPRPN4",41,0)
 ..S IFN=0 F  S IFN=$O(^TIU(8925,"APTP",DFN,BEG,IFN)) Q:'IFN  D
"RTN","TIUPRPN4",42,0)
 ...W "." S CTR=CTR+1
"RTN","TIUPRPN4",43,0)
 ...S ^TMP("TIUPR",$J,BED_";"_DFN,BEG,IFN)="Vice SF 509"
"RTN","TIUPRPN4",44,0)
 I CTR=0 W $C(7),!!,"No notes have been signed for "_WARD_" since "
"RTN","TIUPRPN4",45,0)
 I  W $$FMTE^XLFDT(TIULAST,"1P") Q
"RTN","TIUPRPN4",46,0)
 W !,">> "_CTR_" note"_$S(CTR>1:"s",1:"")_" found for WARD "_WARD
"RTN","TIUPRPN4",47,0)
 S TIUSPG=1,TIULAST=$$NOW^XLFDT
"RTN","TIUPRPN4",48,0)
 D DEV^TIUPRPN5
"RTN","TIUPRPN4",49,0)
 Q
"RTN","TIUPRPN4",50,0)
DATE() W ! S %DT="AESTPX",%DT(0)="-NOW"
"RTN","TIUPRPN4",51,0)
 S %DT("A")="Print Notes Starting With (DATE/TIME): "
"RTN","TIUPRPN4",52,0)
 D ^%DT K %DT
"RTN","TIUPRPN4",53,0)
 S BEG=$S($D(DTOUT):"",Y<0:"",1:Y)
"RTN","TIUPRPN4",54,0)
 Q BEG
"RTN","TIUPRPN4",55,0)
 ;
"RTN","TIUPRPN4",56,0)
ADD ; enter/edit locations in file 8925.93
"RTN","TIUPRPN4",57,0)
 N DA,DIC,DIE,DR,TIUQT,Y
"RTN","TIUPRPN4",58,0)
 F  W ! D  Q:$D(TIUQT)
"RTN","TIUPRPN4",59,0)
 .S (DIC,DLAYGO)=8925.93,DIC(0)="AEQMNL"
"RTN","TIUPRPN4",60,0)
 .S DIC("A")="Select Clinic or Ward: "
"RTN","TIUPRPN4",61,0)
 .D ^DIC I Y<0 S TIUQT=1 Q
"RTN","TIUPRPN4",62,0)
 .S DIE=DIC,DA=+Y,DR="1.03;3" D ^DIE
"RTN","TIUPRPN4",63,0)
 K DLAYGO
"RTN","TIUPRPN4",64,0)
 Q
"RTN","TIUPRPN4",65,0)
 ;
"RTN","TIUPRPN4",66,0)
DIV ; enter/edit division params in file 8925.94
"RTN","TIUPRPN4",67,0)
 N DA,DIC,DIE,DR,TIUQT,Y
"RTN","TIUPRPN4",68,0)
 F  W ! D  Q:$D(TIUQT)
"RTN","TIUPRPN4",69,0)
 .S (DIC,DLAYGO)=8925.94,DIC(0)="AEQMNL"
"RTN","TIUPRPN4",70,0)
 .S DIC("A")="Select Division for PNs Outpatient Batch Print: "
"RTN","TIUPRPN4",71,0)
 .D ^DIC I Y<0 S TIUQT=1 Q
"RTN","TIUPRPN4",72,0)
 .S DIE=DIC,DA=+Y,DR=".02;1.02" D ^DIE
"RTN","TIUPRPN4",73,0)
 K DLAYGO
"RTN","TIUPRPN4",74,0)
 Q
"RTN","TIUPRPN5")
0^147^B21557628
"RTN","TIUPRPN5",1,0)
TIUPRPN5 ;SLC/MJC-Sort PNs for Prting by Location;;10-31-96 11:45am
"RTN","TIUPRPN5",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPRPN5",3,0)
 ;
"RTN","TIUPRPN5",4,0)
LOC ;sorts PNs for prting by CLINIC location
"RTN","TIUPRPN5",5,0)
 ;these notes are chartable contiguous or separate
"RTN","TIUPRPN5",6,0)
 ;this option is screened to exclude WARDs 
"RTN","TIUPRPN5",7,0)
 ;sites should use the [TIU PRINT PN WARD] option which sorts
"RTN","TIUPRPN5",8,0)
 ;by BED NUMBER for current inpts on that ward for INPT notes
"RTN","TIUPRPN5",9,0)
 ;[TIU PRINT PN OUTPT LOC]
"RTN","TIUPRPN5",10,0)
 ;
"RTN","TIUPRPN5",11,0)
 N DIC,Y,TIUQT,TIULOC
"RTN","TIUPRPN5",12,0)
 D SETUP^TIUPRPN3("Print Progress Notes for OUTPATIENT LOCATION")
"RTN","TIUPRPN5",13,0)
DIC F  D  Q:$D(TIUQT)
"RTN","TIUPRPN5",14,0)
 .S DIC=8925.93,DIC(0)="AEQMNZ",DIC("A")="Select OUTPATIENT location: "
"RTN","TIUPRPN5",15,0)
 .S DIC("S")="I $P($G(^SC(+$P($G(^TIU(8925.93,+Y,0)),U),0)),U,3)'=""W"""
"RTN","TIUPRPN5",16,0)
 .W ! D ^DIC K DIC("S") I Y<0 S TIUQT=1 Q
"RTN","TIUPRPN5",17,0)
 .S TIULOC=+Y(0)_U_+Y_U_Y(0,0)
"RTN","TIUPRPN5",18,0)
 .I '$D(^TIU(8925,"ALOCP",+TIULOC)) D  Q
"RTN","TIUPRPN5",19,0)
 ..W !,$C(7),"There are no signed Progress Notes for this location!!"
"RTN","TIUPRPN5",20,0)
 .D NOTES(TIULOC)
"RTN","TIUPRPN5",21,0)
 Q
"RTN","TIUPRPN5",22,0)
 ;
"RTN","TIUPRPN5",23,0)
NOTES(TIULOC) ;returns date/time;ien of last note prted
"RTN","TIUPRPN5",24,0)
 N OLD,NEW,Y,BEG,IFN,TIUSPG,CTR,TIULAST,ANS,MSG,TIUQT,DFN,SORT
"RTN","TIUPRPN5",25,0)
 S MSG=1,TIULAST=$P($G(^TIU(8925.93,+$P(TIULOC,U,2),1)),U,2)
"RTN","TIUPRPN5",26,0)
 I TIULAST]"" D  Q:$D(TIUQT)
"RTN","TIUPRPN5",27,0)
 .I '+$G(TIULAST)!'$P(TIULAST,";",2)!('$D(^TIU(8925,"ALOCP",+TIULOC,+TIULAST,+$P(TIULAST,";",2)))) S $P(^TIU(8925.93,+$P(TIULOC,U,2),1),U,2)="",MSG=2 Q
"RTN","TIUPRPN5",28,0)
 .S BEG=+TIULAST
"RTN","TIUPRPN5",29,0)
 .W !!,"The last note printed for this location using this option was "
"RTN","TIUPRPN5",30,0)
 .W !,"signed ",$$FMTE^XLFDT(BEG,"1P"),!!
"RTN","TIUPRPN5",31,0)
 .S ANS=$$READ^TIUU("YA","Print from this point on? ","YES","^D HELP^TIUPRPN5")
"RTN","TIUPRPN5",32,0)
 .I $D(DIRUT) S TIUQT=1 Q
"RTN","TIUPRPN5",33,0)
 .I +$G(ANS) S IFN=$P(TIULAST,U,2) Q
"RTN","TIUPRPN5",34,0)
 .S $P(^TIU(8925.93,+$P(TIULOC,U,2),1),U,2)="",MSG=3
"RTN","TIUPRPN5",35,0)
 I $P($G(^TIU(8925.93,+$P(TIULOC,U,2),1)),U,2)']"" D  Q:$D(TIUQT)
"RTN","TIUPRPN5",36,0)
 .D @MSG ;writes message to explain date selection
"RTN","TIUPRPN5",37,0)
RANGE .S OLD=$O(^TIU(8925,"ALOCP",+TIULOC,0))
"RTN","TIUPRPN5",38,0)
 .S NEW=$O(^TIU(8925,"ALOCP",+TIULOC,9999999),-1)
"RTN","TIUPRPN5",39,0)
 .W !,"     The OLDEST note was signed: ",$$FMTE^XLFDT(OLD,"1P")
"RTN","TIUPRPN5",40,0)
 .W !,"The MOST RECENT note was signed: ",$$FMTE^XLFDT(NEW,"1P"),!
"RTN","TIUPRPN5",41,0)
 .W !,"Select a date and I will print all signed notes for "
"RTN","TIUPRPN5",42,0)
 .W !,$P(TIULOC,U,3)," from this date until NOW.",!
"RTN","TIUPRPN5",43,0)
DATE .S %DT="AEPX",%DT(0)="-NOW",%DT("A")="Print Notes Beginning: "
"RTN","TIUPRPN5",44,0)
 .D ^%DT K %DT I $D(DTOUT)!(Y<0) S TIUQT=1 Q
"RTN","TIUPRPN5",45,0)
 .I Y>NEW W $C(7),!?5,"Pick a date between the OLDEST and the MOST "
"RTN","TIUPRPN5",46,0)
 .I  W "RECENT." G DATE
"RTN","TIUPRPN5",47,0)
 .S BEG=Y
"RTN","TIUPRPN5",48,0)
 S CTR=0 F  S BEG=$O(^TIU(8925,"ALOCP",+TIULOC,BEG)) Q:'BEG  D
"RTN","TIUPRPN5",49,0)
 .I '$D(IFN) S IFN=0
"RTN","TIUPRPN5",50,0)
 .F  S IFN=$O(^TIU(8925,"ALOCP",+TIULOC,BEG,IFN)) Q:'IFN  D
"RTN","TIUPRPN5",51,0)
 ..W "." S CTR=CTR+1
"RTN","TIUPRPN5",52,0)
 ..S DFN=$P(^TIU(8925,IFN,0),U,2),SORT=$P(^DPT(DFN,0),U)_";"_DFN
"RTN","TIUPRPN5",53,0)
 ..S ^TMP("TIUPR",$J,SORT,BEG,IFN)="Vice SF 509"
"RTN","TIUPRPN5",54,0)
 ..S TIULAST=BEG_";"_IFN
"RTN","TIUPRPN5",55,0)
 I CTR=0 W $C(7),!!,"No notes have been signed for this location since "
"RTN","TIUPRPN5",56,0)
 I  W $$FMTE^XLFDT(+TIULAST,"1P") Q
"RTN","TIUPRPN5",57,0)
 W !,">> "_CTR_" note"_$S(CTR>1:"s",1:"")_" found for "_$P(TIULOC,U,3)
"RTN","TIUPRPN5",58,0)
 I CTR'>1 S TIUSPG=1
"RTN","TIUPRPN5",59,0)
 E  S TIUSPG=$$PAGE^TIUPRPN3 Q:TIUSPG']""  S TIUSPG=$S(+$G(TIUSPG):0,1:1)
"RTN","TIUPRPN5",60,0)
DEV S %ZIS("B")=$P($G(^%ZIS(1,+$P($G(^TIU(8925.93,$P(TIULOC,U,2),1)),U,3),0),""),U) ;brings up default prter from param file
"RTN","TIUPRPN5",61,0)
 W ! S %ZIS="Q" D ^%ZIS I POP K POP G EXIT
"RTN","TIUPRPN5",62,0)
 I $E(IOST)="C" W $C(7),$C(7),!?5,"You must select a "
"RTN","TIUPRPN5",63,0)
 I  W "printer for this option!!" G DEV
"RTN","TIUPRPN5",64,0)
 S $P(^TIU(8925.93,$P(TIULOC,U,2),0),U,4)=""
"RTN","TIUPRPN5",65,0)
 I $D(IO("Q")) K IO("Q") D  G EXIT
"RTN","TIUPRPN5",66,0)
 .S ZTRTN="PRINT^TIUPRPN5",ZTSAVE("^TMP(""TIUPR"",$J,")=""
"RTN","TIUPRPN5",67,0)
 .S ZTSAVE("TIUSPG")="",ZTSAVE("TIULAST")="",ZTSAVE("TIULOC")=""
"RTN","TIUPRPN5",68,0)
 .S ZTDESC="TIU PRT PNS BY LOCATION"
"RTN","TIUPRPN5",69,0)
 .D ^%ZTLOAD W !,$S($D(ZTSK):"Request Queued!",1:"Request Canceled!")
"RTN","TIUPRPN5",70,0)
 .K ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN,ZTSAVE,%ZIS,TIULAST,TIUSPG,TIULOC
"RTN","TIUPRPN5",71,0)
 .D HOME^%ZIS
"RTN","TIUPRPN5",72,0)
 U IO D PRINT,^%ZISC
"RTN","TIUPRPN5",73,0)
 Q
"RTN","TIUPRPN5",74,0)
PRINT ;
"RTN","TIUPRPN5",75,0)
 K ^TMP("TIULQ",$J)
"RTN","TIUPRPN5",76,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","TIUPRPN5",77,0)
 D PRINT^TIUPRPN1(1,$G(TIUSPG))
"RTN","TIUPRPN5",78,0)
 S $P(^TIU(8925.93,$P(TIULOC,U,2),1),U,2)=TIULAST
"RTN","TIUPRPN5",79,0)
EXIT K ^TMP("TIULQ",$J),^TMP("TIUPR",$J)
"RTN","TIUPRPN5",80,0)
 Q
"RTN","TIUPRPN5",81,0)
 ;
"RTN","TIUPRPN5",82,0)
1 W !!,"I don't seem to have any record of you having used this option "
"RTN","TIUPRPN5",83,0)
 W !,"to print progress notes for this location.",!
"RTN","TIUPRPN5",84,0)
 Q
"RTN","TIUPRPN5",85,0)
2 W !!,"I could not determine what the last note printed for this "
"RTN","TIUPRPN5",86,0)
 W !,"location was."
"RTN","TIUPRPN5",87,0)
 W !!,"Please select a date and all notes from that date to NOW will be"
"RTN","TIUPRPN5",88,0)
 W !,"printed.  The last note printed will become the new base date.",!
"RTN","TIUPRPN5",89,0)
 Q
"RTN","TIUPRPN5",90,0)
3 W !!,"OK- then select a different date.",!
"RTN","TIUPRPN5",91,0)
 Q
"RTN","TIUPRPN5",92,0)
HELP ; help for continue from this point prompt
"RTN","TIUPRPN5",93,0)
 W !!,"Every note that has been signed since this date (last time this"
"RTN","TIUPRPN5",94,0)
 W !,"notes were printed using this option) until NOW will be printed."
"RTN","TIUPRPN5",95,0)
 Q
"RTN","TIUPRPN6")
0^148^B9359246
"RTN","TIUPRPN6",1,0)
TIUPRPN6 ;SLC/MJC-Print PNs-Most Current Admission ;2-14-96 8:20am
"RTN","TIUPRPN6",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPRPN6",3,0)
 ;
"RTN","TIUPRPN6",4,0)
ADM ;prints PNs for LAST admission to either date of discharge or NOW
"RTN","TIUPRPN6",5,0)
 ;this sort is chartable for either contiguous or separate
"RTN","TIUPRPN6",6,0)
 ;also supports WORK copy
"RTN","TIUPRPN6",7,0)
 ;TIU PRINT PN ADMISSION]
"RTN","TIUPRPN6",8,0)
 ;
"RTN","TIUPRPN6",9,0)
 N TIUDFN,TIUQT,DIC,Y
"RTN","TIUPRPN6",10,0)
 D SETUP^TIUPRPN3("Print Progress Notes for selected patient's LAST admission")
"RTN","TIUPRPN6",11,0)
 F  W ! S DIC=2,DIC(0)="AEQMN" D ^DIC Q:Y<0  D  K TIUQT
"RTN","TIUPRPN6",12,0)
 .I '$O(^TIU(8925,"APTP",+Y,0)) W !!?5,$C(7),"There are no signed "
"RTN","TIUPRPN6",13,0)
 .I  W "progress notes on file for this patient.",! Q
"RTN","TIUPRPN6",14,0)
 .N TIUFLAG,TIUSPG
"RTN","TIUPRPN6",15,0)
 .S TIUDFN=Y
"RTN","TIUPRPN6",16,0)
 .D NOTES(TIUDFN) Q:$D(TIUQT)
"RTN","TIUPRPN6",17,0)
 .S TIUFLAG=$$FLAG^TIUPRPN3() Q:TIUFLAG']""
"RTN","TIUPRPN6",18,0)
 .S TIUSPG=1
"RTN","TIUPRPN6",19,0)
 .D DEVICE^TIUPRPN(TIUFLAG,TIUSPG)
"RTN","TIUPRPN6",20,0)
 Q
"RTN","TIUPRPN6",21,0)
 ;
"RTN","TIUPRPN6",22,0)
NOTES(TIUDFN) ;get the notes for the admission
"RTN","TIUPRPN6",23,0)
 N VAIP,ADMDT,BEG,END,HOLD,CTR,DATE,IFN,DFN,DIR,Y
"RTN","TIUPRPN6",24,0)
 S DFN=+TIUDFN,VAIP("D")="LAST" D IN5^VADPT
"RTN","TIUPRPN6",25,0)
 I '$G(VAIP(1)) W !!?5,$C(7),"I don't have any record of an admission "
"RTN","TIUPRPN6",26,0)
 I  W "for this patient.",!?5,"Select another patient." S TIUQT=1 Q
"RTN","TIUPRPN6",27,0)
 S ADMDT=VAIP(13,1)
"RTN","TIUPRPN6",28,0)
 W !!,"Patient was admitted:  ",$P(ADMDT,U,2)
"RTN","TIUPRPN6",29,0)
 I $D(VAIP(17,1)) D
"RTN","TIUPRPN6",30,0)
 .W !,"Patient was discharged: ",$P(VAIP(17,1),U,2),!
"RTN","TIUPRPN6",31,0)
 .S DIR("A")="Print all progress notes written during this admission? "
"RTN","TIUPRPN6",32,0)
 E  D
"RTN","TIUPRPN6",33,0)
 .W !!,"Patient has not been DISCHARGED.",!
"RTN","TIUPRPN6",34,0)
 .S DIR("A")="Print all progress notes from admission date until NOW? "
"RTN","TIUPRPN6",35,0)
 S DIR(0)="YA",DIR("B")="YES",DIR("A")=DIR("A")_"(Y/N) "
"RTN","TIUPRPN6",36,0)
 S DIR("?")="^D HELP^TIUPRPN6" D ^DIR
"RTN","TIUPRPN6",37,0)
 I $D(DIRUT) S TIUQT=1 Q
"RTN","TIUPRPN6",38,0)
 I +$G(Y) S BEG=+ADMDT,END=$S($G(VAIP(17,1)):+VAIP(17,1),1:9999999)
"RTN","TIUPRPN6",39,0)
 E  D  K %DT Q:$D(TIUQT)
"RTN","TIUPRPN6",40,0)
 .W ! S %DT="AEPTX",%DT(0)="-NOW",%DT("A")="Print Notes Beginning: "
"RTN","TIUPRPN6",41,0)
 .D ^%DT I $D(DTOUT)!(Y<0) S TIUQT=1 Q
"RTN","TIUPRPN6",42,0)
 .S BEG=Y,%DT("A")="                 Thru: "
"RTN","TIUPRPN6",43,0)
 .S %DT="AEPTX" D ^%DT I $D(DTOUT)!(Y<0) S TIUQT=1 Q
"RTN","TIUPRPN6",44,0)
 .S END=Y I END<BEG S HOLD=BEG,BEG=END,END=HOLD
"RTN","TIUPRPN6",45,0)
 ;load up the notes
"RTN","TIUPRPN6",46,0)
 W !!,"Searching for the notes "
"RTN","TIUPRPN6",47,0)
 K ^TMP("TIUPR",$J)
"RTN","TIUPRPN6",48,0)
 S CTR=0,DATE=BEG
"RTN","TIUPRPN6",49,0)
 F  S DATE=$O(^TIU(8925,"APTP",DFN,DATE)) Q:'DATE!(DATE>END)  D
"RTN","TIUPRPN6",50,0)
 .S IFN=0 F  S IFN=$O(^TIU(8925,"APTP",DFN,DATE,IFN)) Q:'IFN  D
"RTN","TIUPRPN6",51,0)
 ..W "." S CTR=CTR+1
"RTN","TIUPRPN6",52,0)
 ..S ^TMP("TIUPR",$J,$P(TIUDFN,U,2)_";"_DFN,DATE,IFN)="Vice SF 509"
"RTN","TIUPRPN6",53,0)
 I '$D(^TMP("TIUPR",$J)) W !!,"No SIGNED notes found in this date "
"RTN","TIUPRPN6",54,0)
 I  W "range for this patient." S TIUQT=1 Q
"RTN","TIUPRPN6",55,0)
 W !!,">> "_CTR_" note"_$S(CTR>1:"s",1:"")_" found.",!
"RTN","TIUPRPN6",56,0)
 Q
"RTN","TIUPRPN6",57,0)
HELP ;help for yes/no print all notes for admission question
"RTN","TIUPRPN6",58,0)
 W !!?5,"Answer YES and all the progress notes for this admission will "
"RTN","TIUPRPN6",59,0)
 W !?5,"be printed in CONTIGUOUS format."
"RTN","TIUPRPN6",60,0)
 W !!?5,"Answer NO and you will be asked to select a date range for "
"RTN","TIUPRPN6",61,0)
 W !?5,"this patient."
"RTN","TIUPRPN6",62,0)
 Q
"RTN","TIUPRPN7")
0^149^B28237354
"RTN","TIUPRPN7",1,0)
TIUPRPN7 ;SLC/MJC - Progress Notes Outpt Batch Prt ;2-14-96 2:30am
"RTN","TIUPRPN7",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPRPN7",3,0)
 ;
"RTN","TIUPRPN7",4,0)
BATCH ;batch print outpatient progress notes sorted by terminal digit
"RTN","TIUPRPN7",5,0)
 ;if you wish to exlude a particular hospital location from this
"RTN","TIUPRPN7",6,0)
 ;print option that can be specified in the
"RTN","TIUPRPN7",7,0)
 ;EXCLUDE FROM BATCH PRINTING field of file 8925.93
"RTN","TIUPRPN7",8,0)
 ;[TIU PRINT PN BATCH INTERACTIVE]
"RTN","TIUPRPN7",9,0)
 ;
"RTN","TIUPRPN7",10,0)
 N Y,TIUQT,TIUSTART,TIUDIV,ANS,LAST,DIV
"RTN","TIUPRPN7",11,0)
 D SETUP^TIUPRPN3("Batch Print Outpatient Progress Notes by Terminal Digit")
"RTN","TIUPRPN7",12,0)
 W !!?5,"Notes will be printed in terminal digit order."
"RTN","TIUPRPN7",13,0)
 W !!?5,"This option may also be scheduled to run non-interactively"
"RTN","TIUPRPN7",14,0)
 W !?5,"in file #19.2 OPTION SCHEDULING FILE.",!!
"RTN","TIUPRPN7",15,0)
 ;
"RTN","TIUPRPN7",16,0)
 I $D(^TIU(8925.94,0))'=1 W $C(7),$C(7),!?5,"Before using this option "
"RTN","TIUPRPN7",17,0)
 I  W "you must enter the divisions for your site in"
"RTN","TIUPRPN7",18,0)
 I  W !?5,"file #8925.94 - TIU DIVISION PRINT PARAMETERS FILE." Q
"RTN","TIUPRPN7",19,0)
 ;
"RTN","TIUPRPN7",20,0)
 S DIC=8925.94,DIC(0)="AEQMNZ",DIC("A")="Select DIVISION: "
"RTN","TIUPRPN7",21,0)
 S DIC("B")=$P($G(^DG(40.8,+$G(^DISV(DUZ,"^TIU(8925.94,")),0),""),U)
"RTN","TIUPRPN7",22,0)
 ;line above- talk about a Byzantine way to bring up a default!!
"RTN","TIUPRPN7",23,0)
 D ^DIC K DIC Q:Y<0
"RTN","TIUPRPN7",24,0)
 S TIUDIV=+Y(0)_U_+Y_U_Y(0,0)
"RTN","TIUPRPN7",25,0)
 ;ien medical center div^ien tiu param^external division
"RTN","TIUPRPN7",26,0)
 S LAST=$P($G(^TIU(8925.94,+$P(TIUDIV,U,2),1)),U)
"RTN","TIUPRPN7",27,0)
 I LAST']"" S TIUSTART=$$DATE^TIUPRPN4() Q:TIUSTART']""
"RTN","TIUPRPN7",28,0)
 I LAST]"" D  Q:$D(TIUQT)
"RTN","TIUPRPN7",29,0)
 .W !!,"Notes were last printed for '"_$P(TIUDIV,U,3)_"' "
"RTN","TIUPRPN7",30,0)
 .W $$FMTE^XLFDT(LAST,"1P"),!
"RTN","TIUPRPN7",31,0)
 .S ANS=$$READ^TIUU("YA","Print from this DATE/TIME on? ","YES","D HELP^TIUPRPN5")
"RTN","TIUPRPN7",32,0)
 .I $D(DIRUT) S TIUQT=1 Q
"RTN","TIUPRPN7",33,0)
 .I +$G(ANS) S TIUSTART=LAST Q
"RTN","TIUPRPN7",34,0)
 .D 3^TIUPRPN5 S TIUSTART=$$DATE^TIUPRPN4() I TIUSTART']"" S TIUQT=1 Q
"RTN","TIUPRPN7",35,0)
DEV S %ZIS("B")=$P($G(^%ZIS(1,+$P($G(^TIU(8925.94,$P(TIUDIV,U,2),1)),U,2),0),""),U) ;brings up default prter from 8925.94 param file
"RTN","TIUPRPN7",36,0)
 W ! S %ZIS="Q" D ^%ZIS I POP K POP G EXIT
"RTN","TIUPRPN7",37,0)
 I $E(IOST)="C" W $C(7),$C(7),!?5,"You must select a printer for this "
"RTN","TIUPRPN7",38,0)
 I  W "option!!" G DEV
"RTN","TIUPRPN7",39,0)
 S TIUDIV=+TIUDIV
"RTN","TIUPRPN7",40,0)
 I $D(IO("Q")) K IO("Q") D  G EXIT
"RTN","TIUPRPN7",41,0)
 .S ZTRTN="PRINT^TIUPRPN7",ZTSAVE("TIUSTART")="",ZTSAVE("TIUDIV")=""
"RTN","TIUPRPN7",42,0)
 .S ZTDESC="TIU BATCH PRT PNS OUTPT DIV"
"RTN","TIUPRPN7",43,0)
 .D ^%ZTLOAD W !,$S($D(ZTSK):"Request Queued!",1:"Request Canceled!")
"RTN","TIUPRPN7",44,0)
 .K ZTSK,ZTDESC,ZTDTH,ZTIO,ZTRTN,STSAVE,%ZIS,TIUSTART,TIUDIV
"RTN","TIUPRPN7",45,0)
 .D HOME^%ZIS
"RTN","TIUPRPN7",46,0)
 U IO D PRINT,^%ZISC
"RTN","TIUPRPN7",47,0)
 Q
"RTN","TIUPRPN7",48,0)
PRINT ;entry point for non-interactive tasked job
"RTN","TIUPRPN7",49,0)
 ;requires TIUDIV set to the division you want notes for
"RTN","TIUPRPN7",50,0)
 ;if queued non-interactively, file 8925.94- field #1.02 will need 
"RTN","TIUPRPN7",51,0)
 ;to contain the start time of the batch
"RTN","TIUPRPN7",52,0)
 ;[TIU PRINT PN BATCH SCHEDULED]- entry point if called from file #19.2
"RTN","TIUPRPN7",53,0)
 ;
"RTN","TIUPRPN7",54,0)
 I '$D(TIUDIV) D TROUBLE G EXIT
"RTN","TIUPRPN7",55,0)
 N DATE,LOC,IFN,SSN,DFN,STOP
"RTN","TIUPRPN7",56,0)
 K ^TMP("TIUPR",$J),^TMP("TIULQ",$J)
"RTN","TIUPRPN7",57,0)
 S STOP=$$NOW^XLFDT
"RTN","TIUPRPN7",58,0)
 I '$D(TIUSTART) S TIUSTART=$P($G(^TIU(8925.94,TIUDIV,1)),U)
"RTN","TIUPRPN7",59,0)
 Q:TIUSTART']""  ;date not passed/no date in field 1.01 file #8925.94
"RTN","TIUPRPN7",60,0)
 S LOC=0
"RTN","TIUPRPN7",61,0)
 F  S LOC=$O(^TIU(8925,"ALOCP",LOC)) Q:'LOC  D
"RTN","TIUPRPN7",62,0)
 .Q:+$$LOC(LOC,TIUDIV)  S DATE=TIUSTART
"RTN","TIUPRPN7",63,0)
 .F  S DATE=$O(^TIU(8925,"ALOCP",LOC,DATE)) Q:'DATE!(DATE>STOP)  D
"RTN","TIUPRPN7",64,0)
 ..S IFN=0 F  S IFN=$O(^TIU(8925,"ALOCP",LOC,DATE,IFN)) Q:'IFN  D
"RTN","TIUPRPN7",65,0)
 ...S DFN=$P(^TIU(8925,IFN,0),U,2),SSN=$P(^DPT(DFN,0),U,9)
"RTN","TIUPRPN7",66,0)
 ...S SSN=$E(SSN,8,9)_$E(SSN,6,7)_$E(SSN,4,5)_$E(SSN,1,3)
"RTN","TIUPRPN7",67,0)
 ...S ^TMP("TIUPR",$J,SSN_";"_DFN,DATE,IFN)="Vice SF 509"
"RTN","TIUPRPN7",68,0)
 I '$D(^TMP("TIUPR",$J)) D TROUBLE G EXIT
"RTN","TIUPRPN7",69,0)
 D PRINT^TIUPRPN1(1,1)
"RTN","TIUPRPN7",70,0)
 S $P(^TIU(8925.94,TIUDIV,1),U)=STOP
"RTN","TIUPRPN7",71,0)
EXIT K ^TIU("TIUPR",$J),^TMP("TIULQ",$J)
"RTN","TIUPRPN7",72,0)
 Q
"RTN","TIUPRPN7",73,0)
LOC(LOC,DIV) ;checks if this location should be batch prted
"RTN","TIUPRPN7",74,0)
 N IEN
"RTN","TIUPRPN7",75,0)
 S IEN=$O(^TIU(8925.93,"B",LOC,0))
"RTN","TIUPRPN7",76,0)
 Q $S($P($G(^SC(LOC,0)),U,3)="W":1,$P($G(^SC(LOC,0)),U,15)'=DIV:1,'$D(^TIU(8925.93,+IEN,0)):"",+$G(^TIU(8925.93,IEN,3)):1,1:"")
"RTN","TIUPRPN7",77,0)
 ;
"RTN","TIUPRPN7",78,0)
TROUBLE ;message to print if no output
"RTN","TIUPRPN7",79,0)
 W !!,"The option [TIU PRINT PN BATCH OUTPT] ran to completion at "
"RTN","TIUPRPN7",80,0)
 W !,$$FMTE^XLFDT($$NOW^XLFDT,"1P")," but did not find any notes."
"RTN","TIUPRPN7",81,0)
 W !!,"If you were expecting notes to print review the following:"
"RTN","TIUPRPN7",82,0)
 ;
"RTN","TIUPRPN7",83,0)
 W !!,"INTERACTIVE"
"RTN","TIUPRPN7",84,0)
 W !,"-----------"
"RTN","TIUPRPN7",85,0)
 W !,"1.  Very little can go wrong- the required criteria is screened"
"RTN","TIUPRPN7",86,0)
 W !,"while the user is manually queueing the job."
"RTN","TIUPRPN7",87,0)
 W !!,"2.  This option prints all the outpatient progress notes, in"
"RTN","TIUPRPN7",88,0)
 W !,"terminal digit order, for the selected date range for ALL CLINICS"
"RTN","TIUPRPN7",89,0)
 W !,"for the selected DIVISION.  Verify that you have signed progress"
"RTN","TIUPRPN7",90,0)
 W !,"notes satisfying this criteria.",!
"RTN","TIUPRPN7",91,0)
 ;
"RTN","TIUPRPN7",92,0)
 W !!,"NON-INTERACTIVE (job set to run in OPTION SCHEDULING FILE (#19.2)"
"RTN","TIUPRPN7",93,0)
 W !,"-----------------------------------------------------------------"
"RTN","TIUPRPN7",94,0)
 W !,"1.  DIVISION must be defined in file #8925.94 (TIU DIVISION PRINT"
"RTN","TIUPRPN7",95,0)
 W !,"PRINT PARAMETERS FILE)."
"RTN","TIUPRPN7",96,0)
 W !!,"2.  The variable TIUDIV must be defined in the VARIABLE NAME "
"RTN","TIUPRPN7",97,0)
 W !,"multiple of the OPTION SCHEDULING FILE (#19.2).  TIUDIV should"
"RTN","TIUPRPN7",98,0)
 W !,"be set to the IEN of the DIVISION in the MEDICAL CENTER DIVISION"
"RTN","TIUPRPN7",99,0)
 W !,"FILE (#40.8). This pointer value is also stored in the .01 field"
"RTN","TIUPRPN7",100,0)
 W !,"of the TIU DIVISION PRINT PARAMETERS FILE (#8925.94)."
"RTN","TIUPRPN7",101,0)
 W !!,"3.  This option must find a valid date in field #1.01 of"
"RTN","TIUPRPN7",102,0)
 W !,"file #8925.94 to start looping on.  If a valid date is not "
"RTN","TIUPRPN7",103,0)
 W !,"found, the option will terminate with this message."
"RTN","TIUPRPN7",104,0)
 W !!,"4.  To assist in troubleshooting, if no notes are found, the"
"RTN","TIUPRPN7",105,0)
 W !,"DATE/TIME field (#1.01) of file #8925.94 will not be re-set"
"RTN","TIUPRPN7",106,0)
 W !,"to the new value (which is NOW) when the option begins "
"RTN","TIUPRPN7",107,0)
 W "calculating."
"RTN","TIUPRPN7",108,0)
 Q
"RTN","TIUPUTC")
0^150^B36119612
"RTN","TIUPUTC",1,0)
TIUPUTC ; SLC/JER - Document filer - captioned header ;5/9/94  17:10
"RTN","TIUPUTC",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPUTC",3,0)
MAIN ; Controls branching
"RTN","TIUPUTC",4,0)
 N TIUDA,TIUBGN,TIUI,TIUHSIG,TIULIM,TIULCNT,TIULINE,TIUREC,TIUPOST
"RTN","TIUPUTC",5,0)
 N TIUTYPE
"RTN","TIUPUTC",6,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUPUTC",7,0)
 S TIUHSIG=$P(TIUPRM0,U,10),TIUBGN=$P(TIUPRM0,U,12)
"RTN","TIUPUTC",8,0)
 I TIUHSIG']"" D MAIN^TIUPEVNT(DA,1,1) Q
"RTN","TIUPUTC",9,0)
 I TIUBGN']"" D MAIN^TIUPEVNT(DA,1,7) Q
"RTN","TIUPUTC",10,0)
 I $P(TIUPRM0,U,17)="k" D PREPROC(DA) ; Strip controls when kermit
"RTN","TIUPUTC",11,0)
 S TIUI=0 F  S TIUI=$O(^TIU(8925.2,+DA,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUPUTC",12,0)
 . S TIULINE=$G(^TIU(8925.2,+DA,"TEXT",TIUI,0))
"RTN","TIUPUTC",13,0)
 . I TIULINE[TIUHSIG D  Q
"RTN","TIUPUTC",14,0)
 . . N TIUHDR,TIUFRST,TIUJ S TIUFRST=TIUI
"RTN","TIUPUTC",15,0)
 . . I +$G(TIULCNT),$D(TIUREC("TROOT")),$D(@(TIUREC("TROOT")_"0)")) D
"RTN","TIUPUTC",16,0)
 . . . D SETROOT(TIULCNT,.TIUREC)
"RTN","TIUPUTC",17,0)
 . . . S TIUTYPE=$S(+$$ISADDNDM^TIULC1(TIUREC("#")):+$$DADTYPE(TIUREC("#")),1:TIUREC("TYPE"))
"RTN","TIUPUTC",18,0)
 . . . S TIUPOST=$$POSTFILE^TIULC1(TIUTYPE)
"RTN","TIUPUTC",19,0)
 . . . I TIUPOST]"" X TIUPOST
"RTN","TIUPUTC",20,0)
 . . . I TIUREC("FILE")=8925,+$G(TIUREC("BOILON")) D
"RTN","TIUPUTC",21,0)
 . . . . N TIU D GETTIU^TIULD(.TIU,TIUREC("#"))
"RTN","TIUPUTC",22,0)
 . . . . D MERGTEXT^TIUEDI1(TIUREC("#"),.TIU)
"RTN","TIUPUTC",23,0)
 . . . . K ^TIU(8925,+TIUREC("#"),"TEMP")
"RTN","TIUPUTC",24,0)
 . . . D MAIN^TIUPEVNT(DA,0,"",$P($G(^TIU(8925.1,+TIUREC("TYPE"),0)),U))
"RTN","TIUPUTC",25,0)
 . . K TIUREC D GETREC(TIULINE,.TIUREC,.TIUHDR)
"RTN","TIUPUTC",26,0)
 . . I +$G(TIUREC("#"))'>0!($G(TIUREC("ROOT"))']"") Q
"RTN","TIUPUTC",27,0)
 . . D STUFREC(.TIUHDR,.TIUREC)
"RTN","TIUPUTC",28,0)
 . . S TIUREC("TROOT")=TIUREC("ROOT")_TIUREC("#")_","_TIUREC("TEXT")_","
"RTN","TIUPUTC",29,0)
 . . S:'$D(@(TIUREC("TROOT")_"0)")) @(TIUREC("TROOT")_"0)")="^^^^^"
"RTN","TIUPUTC",30,0)
 . . S TIULCNT=+$P(@(TIUREC("TROOT")_"0)"),U,4)
"RTN","TIUPUTC",31,0)
 . . F TIUJ=TIUFRST:1:TIUI D
"RTN","TIUPUTC",32,0)
 . . . K ^TIU(8925.2,+DA,"TEXT",TIUJ,0) ; Delete header lines once filed
"RTN","TIUPUTC",33,0)
 . . I TIUREC("FILE")=8925,+$G(TIUREC("#")),+$G(TIUREC("BOILON")) D BOILRPLT(.TIUREC)
"RTN","TIUPUTC",34,0)
 . I TIULINE'[TIUHSIG,(TIULINE'[TIUBGN),(+$G(TIUREC("FILE"))=8925),+$G(TIUREC("BOILON")) D
"RTN","TIUPUTC",35,0)
 . . I TIULINE]"",$D(^TIU(8925.1,"B",$P(TIULINE,":"))) D  I 1
"RTN","TIUPUTC",36,0)
 . . . S TIULCNT=$$LOCATE(TIULINE,TIUREC("#"))
"RTN","TIUPUTC",37,0)
 . . E  S TIULCNT=+$G(TIULCNT)+.01
"RTN","TIUPUTC",38,0)
 . . S ^TIU(8925,+TIUREC("#"),"TEMP",TIULCNT,0)=TIULINE
"RTN","TIUPUTC",39,0)
 . . K ^TIU(8925.2,+DA,"TEXT",TIUI,0) ; Delete buffer line once xferred
"RTN","TIUPUTC",40,0)
 . I TIULINE'[TIUHSIG,(TIULINE'[TIUBGN),$D(TIUREC("TROOT")),$D(@(TIUREC("TROOT")_"0)")),(+$G(TIUREC("BOILON"))'>0) D
"RTN","TIUPUTC",41,0)
 . . S TIULCNT=+$G(TIULCNT)+1,@(TIUREC("TROOT")_TIULCNT_",0)")=TIULINE
"RTN","TIUPUTC",42,0)
 . . K ^TIU(8925.2,+DA,"TEXT",TIUI,0) ; Delete buffer line once xferred
"RTN","TIUPUTC",43,0)
 . I TIULINE'[TIUHSIG,(TIULINE'[TIUBGN),'$D(TIUREC("TROOT")),($G(TIUREC("#"))'=-1) K ^TIU(8925.2,+DA,"TEXT",TIUI,0) ; Remove leading garbage
"RTN","TIUPUTC",44,0)
 . I TIULINE[TIUBGN K ^TIU(8925.2,+DA,"TEXT",TIUI,0)
"RTN","TIUPUTC",45,0)
 I +$G(TIULCNT),$D(TIUREC("TROOT")),$D(@(TIUREC("TROOT")_"0)")) D
"RTN","TIUPUTC",46,0)
 . D SETROOT(TIULCNT,.TIUREC)
"RTN","TIUPUTC",47,0)
 . S TIUTYPE=$S(+$$ISADDNDM^TIULC1(TIUREC("#")):+$$DADTYPE(TIUREC("#")),1:TIUREC("TYPE"))
"RTN","TIUPUTC",48,0)
 . S TIUPOST=$$POSTFILE^TIULC1(TIUTYPE)
"RTN","TIUPUTC",49,0)
 . I TIUPOST]"" X TIUPOST
"RTN","TIUPUTC",50,0)
 . I TIUREC("FILE")=8925,+$G(TIUREC("BOILON")) D
"RTN","TIUPUTC",51,0)
 . . N TIU D GETTIU^TIULD(.TIU,TIUREC("#"))
"RTN","TIUPUTC",52,0)
 . . D MERGTEXT^TIUEDI1(TIUREC("#"),.TIU)
"RTN","TIUPUTC",53,0)
 . . K ^TIU(8925,+TIUREC("#"),"TEMP")
"RTN","TIUPUTC",54,0)
 . D MAIN^TIUPEVNT(DA,0,"",$P($G(^TIU(8925.1,+TIUREC("TYPE"),0)),U))
"RTN","TIUPUTC",55,0)
 I '+$O(^TIU(8925.2,+DA,"TEXT",0)) D BUFPURGE(DA)
"RTN","TIUPUTC",56,0)
 Q
"RTN","TIUPUTC",57,0)
LOCATE(LINE,REC) ; Locate line in boilerplate text
"RTN","TIUPUTC",58,0)
 N TIUJ,HIT,BTXT S (TIUJ,HIT)=0
"RTN","TIUPUTC",59,0)
 F  Q:+HIT  S TIUJ=$O(^TIU(8925,+REC,"TEMP",TIUJ)) Q:+TIUJ'>0!HIT  D
"RTN","TIUPUTC",60,0)
 . S BTXT=$G(^TIU(8925,+REC,"TEMP",TIUJ,0))
"RTN","TIUPUTC",61,0)
 . I BTXT[$P(LINE,":")_":" S HIT=1
"RTN","TIUPUTC",62,0)
 Q +$G(TIUJ)
"RTN","TIUPUTC",63,0)
GETREC(HEADER,RECORD,TIUHDR) ; Look-up or create record (if LAYGO allowed)
"RTN","TIUPUTC",64,0)
 N DIC,DLAYGO,TIUD1,TIUD4,TIUKEY,X,Y
"RTN","TIUPUTC",65,0)
 S X=$$STRIP^TIULS($P(HEADER,":",2)),Y=$$WHATYPE^TIUPUTU(X)
"RTN","TIUPUTC",66,0)
 I +Y'>0 D MAIN^TIUPEVNT(DA,1,3,X) Q
"RTN","TIUPUTC",67,0)
 S TIUD1=$G(^TIU(8925.1,+Y,1)),TIUD4=$G(^TIU(8925.1,+Y,4))
"RTN","TIUPUTC",68,0)
 S RECORD("TYPE")=+Y,RECORD("FILE")=$P(TIUD1,U)
"RTN","TIUPUTC",69,0)
 S RECORD("BOILON")=$P(TIUD1,U,4)
"RTN","TIUPUTC",70,0)
 I RECORD("FILE")']"" D MAIN^TIUPEVNT(DA,1,4,X) Q
"RTN","TIUPUTC",71,0)
 S RECORD("ROOT")=$G(^DIC(+RECORD("FILE"),0,"GL"))
"RTN","TIUPUTC",72,0)
 I $P(TIUD1,U,3)']"" D MAIN^TIUPEVNT(DA,1,5,X) Q
"RTN","TIUPUTC",73,0)
 I $P(TIUD1,U,3)]"" D
"RTN","TIUPUTC",74,0)
 . S RECORD("TEXT")=$P($P(TIUD1,U,3),";",2) ; Subscript of TEXT field
"RTN","TIUPUTC",75,0)
 . I RECORD("TEXT")]"",'+RECORD("TEXT") S RECORD("TEXT")=""""_RECORD("TEXT")_""""
"RTN","TIUPUTC",76,0)
 F  D  Q:TIULINE[TIUBGN!(+TIUI'>0)
"RTN","TIUPUTC",77,0)
 . N TIUNOD,TIUCAP,TIUVAR,TIUFIELD,TIUREQ S TIUREQ=0
"RTN","TIUPUTC",78,0)
 . S TIUI=$O(^TIU(8925.2,+DA,"TEXT",TIUI)) Q:+TIUI'>0
"RTN","TIUPUTC",79,0)
 . S TIULINE=$G(^TIU(8925.2,+DA,"TEXT",TIUI,0)) Q:TIULINE[TIUBGN
"RTN","TIUPUTC",80,0)
 . S TIUCAP=$P(TIULINE,":") Q:TIUCAP']""
"RTN","TIUPUTC",81,0)
 . S TIUNOD=$O(^TIU(8925.1,+RECORD("TYPE"),"HEAD","B",TIUCAP,0)) Q:+TIUNOD'>0
"RTN","TIUPUTC",82,0)
 . S TIUFIELD=$P(^TIU(8925.1,+RECORD("TYPE"),"HEAD",+TIUNOD,0),U,3)
"RTN","TIUPUTC",83,0)
 . S TIUREQ=$P(^TIU(8925.1,+RECORD("TYPE"),"HEAD",+TIUNOD,0),U,7)
"RTN","TIUPUTC",84,0)
 . S TIUHDR(TIUFIELD)=$$STRIP^TIULS($P(TIULINE,":",2,99))
"RTN","TIUPUTC",85,0)
 . I +TIUREQ,TIUHDR(TIUFIELD)="" S TIUHDR(TIUFIELD)="** REQUIRED FIELD MISSING FROM UPLOAD **"
"RTN","TIUPUTC",86,0)
 . S TIUVAR=$P(^TIU(8925.1,+RECORD("TYPE"),"HEAD",+TIUNOD,0),U,4) Q:TIUVAR']""
"RTN","TIUPUTC",87,0)
 . S TIUHDR(TIUVAR)=$$STRIP^TIULS($P(TIULINE,":",2,99))
"RTN","TIUPUTC",88,0)
 S:+$P(TIUD1,U,2) DLAYGO=RECORD("FILE")
"RTN","TIUPUTC",89,0)
 ; If a LOOKUP METHOD is defined for a given document type, then call it
"RTN","TIUPUTC",90,0)
 I $G(TIUD4)]"" D  Q
"RTN","TIUPUTC",91,0)
 . N TIUJ,TIUVAR,TIUNOD S TIUVAR="A"
"RTN","TIUPUTC",92,0)
 . F  S TIUVAR=$O(TIUHDR(TIUVAR)) Q:TIUVAR=""  D
"RTN","TIUPUTC",93,0)
 . . S TIUJ=+$G(TIUJ)+1,TIUVAR(TIUJ)=TIUVAR
"RTN","TIUPUTC",94,0)
 . . S @TIUVAR=TIUHDR(TIUVAR)
"RTN","TIUPUTC",95,0)
 . X TIUD4 S RECORD("#")=+Y I +Y'>0 D MAIN^TIUPEVNT(DA,1,6,$P($G(^TIU(8925.1,+RECORD("TYPE"),0)),U))
"RTN","TIUPUTC",96,0)
 . S TIUJ=0 F  S TIUJ=$O(TIUVAR(TIUJ)) Q:+TIUJ'>0  K @TIUVAR(TIUJ)
"RTN","TIUPUTC",97,0)
 ; Otherwise set-up for ^DIC call
"RTN","TIUPUTC",98,0)
 S DIC=RECORD("FILE"),DIC(0)="MX"
"RTN","TIUPUTC",99,0)
 S:+$P(TIUD1,U,2) DIC(0)=DIC(0)_"L"
"RTN","TIUPUTC",100,0)
 S:+$G(TIUHDR(.001)) DIC(0)=DIC(0)_"N"
"RTN","TIUPUTC",101,0)
 S TIUKEY=$S(+$G(TIUHDR(.001)):+$G(TIUHDR(.001)),1:$G(TIUHDR(.01)))
"RTN","TIUPUTC",102,0)
 S X=$S(DIC(0)["N":"`",1:"")_TIUKEY D ^DIC
"RTN","TIUPUTC",103,0)
 S RECORD("#")=+Y I +Y'>0 D MAIN^TIUPEVNT(DA,1,6,$P($G(^TIU(8925.1,+RECORD("TYPE"),0)),U))
"RTN","TIUPUTC",104,0)
 Q
"RTN","TIUPUTC",105,0)
STUFREC(HEADER,RECORD) ; Stuffs record with known fixed fields
"RTN","TIUPUTC",106,0)
 N FDA,FDARR,IENS,FLAGS,TIUI,TIUMSG,TIUPC
"RTN","TIUPUTC",107,0)
 S IENS=""""_+RECORD("#")_","""
"RTN","TIUPUTC",108,0)
 S FDARR="FDA("_+RECORD("FILE")_","_IENS_")",FLAGS="KE"
"RTN","TIUPUTC",109,0)
 ; Set up FDA Array
"RTN","TIUPUTC",110,0)
 S TIUI=0
"RTN","TIUPUTC",111,0)
 F  S TIUI=$O(HEADER(TIUI)) Q:+TIUI'>0  D
"RTN","TIUPUTC",112,0)
 . S:TIUI'=.001 @FDARR@(TIUI)=$$TRNSFRM^TIULX(.RECORD,TIUI,HEADER(TIUI))
"RTN","TIUPUTC",113,0)
 I $D(FDA) D FILE^DIE(FLAGS,"FDA","TIUMSG")
"RTN","TIUPUTC",114,0)
 I $D(TIUMSG) D MAIN^TIUPEVNT(DA,2,"",$P($G(^TIU(8925.1,+RECORD("TYPE"),0)),U),.FDA,.TIUMSG)
"RTN","TIUPUTC",115,0)
 Q
"RTN","TIUPUTC",116,0)
BOILRPLT(TIUREC) ; Execute/Interleave Boilerplates w/uploaded text
"RTN","TIUPUTC",117,0)
 N TIU
"RTN","TIUPUTC",118,0)
 D GETTIU^TIULD(.TIU,TIUREC("#"))
"RTN","TIUPUTC",119,0)
 D LOADDFLT^TIUEDIT(TIUREC("#"),TIUREC("TYPE"))
"RTN","TIUPUTC",120,0)
 Q
"RTN","TIUPUTC",121,0)
SETROOT(LINECNT,RECORD) ; Sets root of WP field
"RTN","TIUPUTC",122,0)
 S @(RECORD("TROOT")_"0)")="^^"_LINECNT_"^"_LINECNT_"^"_DT_"^^"
"RTN","TIUPUTC",123,0)
 Q
"RTN","TIUPUTC",124,0)
BUFPURGE(DA) ; Call ^DIK to purge buffer record when all's well
"RTN","TIUPUTC",125,0)
 N DIK S DIK="^TIU(8925.2," D ^DIK
"RTN","TIUPUTC",126,0)
 Q
"RTN","TIUPUTC",127,0)
PREPROC(DA) ; Strip controls & white space from headers
"RTN","TIUPUTC",128,0)
 N TIUI,TIUHLIN,X S (TIUI,TIUHLIN)=0
"RTN","TIUPUTC",129,0)
 F  S TIUI=$O(^TIU(8925.2,+DA,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUPUTC",130,0)
 . S X=$G(^TIU(8925.2,+DA,"TEXT",TIUI,0))
"RTN","TIUPUTC",131,0)
 . S:X[TIUHSIG TIUHLIN=1 S:X[TIUBGN TIUHLIN=0
"RTN","TIUPUTC",132,0)
 . S:TIUHLIN ^TIU(8925.2,+DA,"TEXT",TIUI,0)=$$STRIP^TIULS(X)
"RTN","TIUPUTC",133,0)
 Q
"RTN","TIUPUTC",134,0)
DADTYPE(DA) ; Get type of original document for addenda
"RTN","TIUPUTC",135,0)
 N TIUDAD,Y
"RTN","TIUPUTC",136,0)
 S TIUDAD=$P($G(^TIU(8925,DA,0)),U,6)
"RTN","TIUPUTC",137,0)
 S Y=+$G(^TIU(8925,+TIUDAD,0))
"RTN","TIUPUTC",138,0)
 Q Y
"RTN","TIUPUTD")
0^151^B14935009
"RTN","TIUPUTD",1,0)
TIUPUTD ; SLC/JER - Document filer - delimited header ;5/18/94  10:21
"RTN","TIUPUTD",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPUTD",3,0)
MAIN ; Controls branching
"RTN","TIUPUTD",4,0)
 N TIUDA,TIUBGN,TIUI,TIUHSIG,TIULIM,TIULCNT,TIULINE,TIUREC
"RTN","TIUPUTD",5,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUPUTD",6,0)
 S TIUHSIG=$P(TIUPRM0,U,10),TIUBGN=$P(TIUPRM0,U,12)
"RTN","TIUPUTD",7,0)
 I TIUHSIG']"" D MAIN^TIUPEVNT(DA,1) Q
"RTN","TIUPUTD",8,0)
 S TIULIM=$P(TIUPRM0,U,13)
"RTN","TIUPUTD",9,0)
 I TIULIM']"" D MAIN^TIUPEVNT(DA,2) Q
"RTN","TIUPUTD",10,0)
 S TIUI=0 F  S TIUI=$O(^TIU(8925.2,+DA,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUPUTD",11,0)
 . N TIUFRST
"RTN","TIUPUTD",12,0)
 . S TIULINE=$G(^TIU(8925.2,+DA,"TEXT",TIUI,0))
"RTN","TIUPUTD",13,0)
 . I TIULINE[TIUHSIG D
"RTN","TIUPUTD",14,0)
 . . S TIUFRST=TIUI
"RTN","TIUPUTD",15,0)
 . . I +$G(TIULCNT),$D(TIUREC("TROOT")),$D(@(TIUREC("TROOT")_"0)")) D
"RTN","TIUPUTD",16,0)
 . . . D SETROOT(TIULCNT,.TIUREC)
"RTN","TIUPUTD",17,0)
 . . . D:$G(TIUREC("FILE"))=8925 RELEASE^TIUT(TIUREC("#"),1),UPDTIRT^TIUDIRT(.TIU,TIUREC("#"))
"RTN","TIUPUTD",18,0)
 . . K TIUREC,TIU D GETREC(TIULINE,.TIUREC)
"RTN","TIUPUTD",19,0)
 . . I +$G(TIUREC("#"))'>0!($G(TIUREC("ROOT"))']"") Q
"RTN","TIUPUTD",20,0)
 . . D STUFREC(TIULINE,.TIUREC)
"RTN","TIUPUTD",21,0)
 . . S TIUREC("TROOT")=TIUREC("ROOT")_TIUREC("#")_","_TIUREC("TEXT")_","
"RTN","TIUPUTD",22,0)
 . . S:'$D(@(TIUREC("TROOT")_"0)")) @(TIUREC("TROOT")_"0)")="^^^^^"
"RTN","TIUPUTD",23,0)
 . . S TIULCNT=+$P(@(TIUREC("TROOT")_"0)"),U,4)
"RTN","TIUPUTD",24,0)
 . . K ^TIU(8925.2,+DA,"TEXT",TIUI,0) ; Delete header line once filed
"RTN","TIUPUTD",25,0)
 . I TIULINE'[TIUHSIG,(TIULINE'[TIUBGN),$D(TIUREC("TROOT")),$D(@(TIUREC("TROOT")_"0)")) D
"RTN","TIUPUTD",26,0)
 . . S TIULCNT=+$G(TIULCNT)+1,@(TIUREC("TROOT")_TIULCNT_",0)")=TIULINE
"RTN","TIUPUTD",27,0)
 . . K ^TIU(8925.2,+DA,"TEXT",TIUI,0) ; Delete buffer line once xferred
"RTN","TIUPUTD",28,0)
 . I TIULINE'[TIUHSIG,(TIULINE'[TIUBGN),'$D(TIUREC("TROOT")),($G(TIUREC("#"))'=-1) K ^TIU(8925.2,+DA,"TEXT",TIUI,0) ; Remove leading garbage
"RTN","TIUPUTD",29,0)
 . I TIULINE[TIUBGN K ^TIU(8925.2,+DA,"TEXT",TIUI,0)
"RTN","TIUPUTD",30,0)
 I +$G(TIULCNT),$D(TIUREC("TROOT")),$D(@(TIUREC("TROOT")_"0)")) D
"RTN","TIUPUTD",31,0)
 . D SETROOT(TIULCNT,.TIUREC)
"RTN","TIUPUTD",32,0)
 . D:$G(TIUREC("FILE"))=8925 RELEASE^TIUT(TIUREC("#"),1),UPDTIRT^TIUDIRT(.TIU,TIUREC("#"))
"RTN","TIUPUTD",33,0)
 I '+$O(^TIU(8925.2,+DA,"TEXT",0)) D BUFPURGE(DA)
"RTN","TIUPUTD",34,0)
 Q
"RTN","TIUPUTD",35,0)
GETREC(HEADER,RECORD) ; Look-up or create record (if LAYGO allowed)
"RTN","TIUPUTD",36,0)
 N DIC,DLAYGO,TIUKEY,X,Y,TIUFPRIV S TIUFPRIV=1
"RTN","TIUPUTD",37,0)
 S X=$P(HEADER,TIULIM,2),DIC=8925.1,DIC(0)="MZ" D ^DIC
"RTN","TIUPUTD",38,0)
 I +Y'>0 D MAIN^TIUPEVNT(DA,3) Q
"RTN","TIUPUTD",39,0)
 S RECORD("TYPE")=+Y,RECORD("FILE")=$P(Y(0),U,5)
"RTN","TIUPUTD",40,0)
 I RECORD("FILE")']"" D MAIN^TIUPEVNT(DA,4) Q
"RTN","TIUPUTD",41,0)
 S RECORD("ROOT")=$G(^DIC(+RECORD("FILE"),0,"GL"))
"RTN","TIUPUTD",42,0)
 I $P(Y(0),U,6)']"" D MAIN^TIUPEVNT(DA,5) Q
"RTN","TIUPUTD",43,0)
 I $P(Y(0),U,6)]"" D
"RTN","TIUPUTD",44,0)
 . S RECORD("TEXT")=$P($P(Y(0),U,6),";",2) ; Subscript of TEXT field
"RTN","TIUPUTD",45,0)
 . I RECORD("TEXT")]"",'+RECORD("TEXT") S RECORD("TEXT")=""""_RECORD("TEXT")_""""
"RTN","TIUPUTD",46,0)
 S:+$P(Y(0),U,3) DLAYGO=RECORD("FILE")
"RTN","TIUPUTD",47,0)
 ; If a LOOKUP ROUTINE is defined for a given report type, then call it
"RTN","TIUPUTD",48,0)
 I $P(Y(0),U,8)]"" D  Q
"RTN","TIUPUTD",49,0)
 . N TIUI,TIUVAR,TIUVPC S TIUVAR=""
"RTN","TIUPUTD",50,0)
 . F  S TIUVAR=$O(^TIU(8925.1,+RECORD("TYPE"),"ITEM","E",TIUVAR)) Q:TIUVAR=""  D
"RTN","TIUPUTD",51,0)
 . . S TIUI=+$G(TIUI)+1,TIUVAR(TIUI)=TIUVAR
"RTN","TIUPUTD",52,0)
 . . S TIUVPC=$O(^TIU(8925.1,+RECORD("TYPE"),"ITEM","E",TIUVAR,0))
"RTN","TIUPUTD",53,0)
 . . S @TIUVAR=$P(HEADER,TIULIM,TIUVPC)
"RTN","TIUPUTD",54,0)
 . D @$P(Y(0),U,7,8) S RECORD("#")=Y I +Y'>0 D MAIN^TIUPEVNT(DA,6)
"RTN","TIUPUTD",55,0)
 . S TIUI=0 F  S TIUI=$O(TIUVAR(TIUI)) Q:+TIUI'>0  K @TIUVAR(TIUI)
"RTN","TIUPUTD",56,0)
 ; Otherwise set-up for ^DIC call
"RTN","TIUPUTD",57,0)
 S DIC=RECORD("FILE"),DIC(0)="MX"
"RTN","TIUPUTD",58,0)
 S:+$P(Y(0),U,3) DIC(0)=DIC(0)_"L"
"RTN","TIUPUTD",59,0)
 S TIUKEY=+$O(^TIU(8925.1,+RECORD("TYPE"),"ITEM","D",.001,0))
"RTN","TIUPUTD",60,0)
 S:TIUKEY DIC(0)=DIC(0)_"N"
"RTN","TIUPUTD",61,0)
 S:'TIUKEY TIUKEY=+$O(^TIU(8925.1,+RECORD("TYPE"),"ITEM","D",.01,0))
"RTN","TIUPUTD",62,0)
 S X=$S(DIC(0)["N":"`",1:"")_$P(HEADER,TIULIM,TIUKEY) D ^DIC
"RTN","TIUPUTD",63,0)
 S RECORD("#")=+Y I +Y'>0 D MAIN^TIUPEVNT(DA,6)
"RTN","TIUPUTD",64,0)
 Q
"RTN","TIUPUTD",65,0)
STUFREC(HEADER,RECORD) ; Stuffs record with known fixed fields
"RTN","TIUPUTD",66,0)
 N D0,DA,DR,DIE,TIUI,TIUPC
"RTN","TIUPUTD",67,0)
 S DIE=+RECORD("FILE"),DA=+RECORD("#")
"RTN","TIUPUTD",68,0)
 ; Set up DR-string
"RTN","TIUPUTD",69,0)
 S TIUI=0
"RTN","TIUPUTD",70,0)
 F  S TIUI=$O(^TIU(8925.1,+RECORD("TYPE"),"ITEM","D",TIUI)) Q:+TIUI'>0  D
"RTN","TIUPUTD",71,0)
 . S TIUPC=$O(^TIU(8925.1,+RECORD("TYPE"),"ITEM","D",TIUI,0)) Q:+TIUPC'>0
"RTN","TIUPUTD",72,0)
 . S:TIUI'=.001 DR=$G(DR)_$S($L($G(DR)):";",1:"")_TIUI_"///"_$P(HEADER,TIULIM,TIUPC)
"RTN","TIUPUTD",73,0)
 D ^DIE
"RTN","TIUPUTD",74,0)
 Q
"RTN","TIUPUTD",75,0)
SETROOT(LINECNT,RECORD) ; Sets root of WP field
"RTN","TIUPUTD",76,0)
 S @(RECORD("TROOT")_"0)")="^^"_LINECNT_"^"_LINECNT_"^"_DT_"^^"
"RTN","TIUPUTD",77,0)
 Q
"RTN","TIUPUTD",78,0)
BUFPURGE(DA) ; Call ^DIK to purge buffer record when all's well
"RTN","TIUPUTD",79,0)
 N DIK S DIK="^TIU(8925.2," D ^DIK
"RTN","TIUPUTD",80,0)
 Q
"RTN","TIUPUTPN")
0^152^B20604432
"RTN","TIUPUTPN",1,0)
TIUPUTPN ; SLC/JER - PN Look-up Method ;10/26/95  16:59
"RTN","TIUPUTPN",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPUTPN",3,0)
LOOKUP ; Look-up code used by router/filer
"RTN","TIUPUTPN",4,0)
 ; Required: TIUSSN, TIUVDT
"RTN","TIUPUTPN",5,0)
 N DA,DFN,TIU,TIUDAD,TIUEDIT,TIUEDT,TIULDT,TIUXCRP,TIUTYPE,TIUNEW
"RTN","TIUPUTPN",6,0)
 I $S('$D(TIUSSN):1,'$D(TIUVDT):1,$G(TIUSSN)?4N:1,$G(TIUSSN)']"":1,1:0) S Y=-1 G LOOKUPX
"RTN","TIUPUTPN",7,0)
 I TIUSSN?3N1P2N1P4N.E S TIUSSN=$TR(TIUSSN,"-/","")
"RTN","TIUPUTPN",8,0)
 I TIUSSN["?" S Y=-1 G LOOKUPX
"RTN","TIUPUTPN",9,0)
 S TIULOC=+$$ILOC(TIULOC)
"RTN","TIUPUTPN",10,0)
 I '$D(^SC(+$G(TIULOC),0)) S Y=-1 G LOOKUPX
"RTN","TIUPUTPN",11,0)
 S TIUEDT=$$IDATE^TIULC(TIUVDT),TIULDT=$$FMADD^XLFDT(TIUEDT,1)
"RTN","TIUPUTPN",12,0)
 I +TIUEDT'>0 S Y=-1 Q
"RTN","TIUPUTPN",13,0)
 S TIUTYPE=$$WHATITLE(TIUTITLE)
"RTN","TIUPUTPN",14,0)
 I +TIUTYPE'>0 S Y=-1 Q
"RTN","TIUPUTPN",15,0)
 I $P($G(^SC(+TIULOC,0)),U,3)="W" D  I 1
"RTN","TIUPUTPN",16,0)
 . D MAIN^TIUMOVE(.TIU,.DFN,TIUSSN,TIUEDT,TIULDT,1,"LAST",0,TIULOC)
"RTN","TIUPUTPN",17,0)
 E  D MAIN^TIUVSIT(.TIU,.DFN,TIUSSN,TIUEDT,TIULDT,"LAST",0,TIULOC)
"RTN","TIUPUTPN",18,0)
 I $S($D(TIU)'>9:1,+$G(DFN)'>0:1,1:0) S Y=-1 G LOOKUPX
"RTN","TIUPUTPN",19,0)
 I $P(+$G(TIU("EDT")),".")'=$P($$IDATE^TIULC(TIUVDT),".") S Y=-1 G LOOKUPX
"RTN","TIUPUTPN",20,0)
 S TIUTYP(1)=1_U_TIUTYPE_U_$$PNAME^TIULC1(TIUTYPE)
"RTN","TIUPUTPN",21,0)
 S Y=$$GETREC^TIUEDI1(DFN,.TIU,1,.TIUNEW)
"RTN","TIUPUTPN",22,0)
 I +Y'>0 G LOOKUPX
"RTN","TIUPUTPN",23,0)
 ; If record is not new, has text and can be edited, then replace
"RTN","TIUPUTPN",24,0)
 ; existing text
"RTN","TIUPUTPN",25,0)
 I +$G(TIUNEW)'>0 D
"RTN","TIUPUTPN",26,0)
 . S TIUEDIT=$$CANEDIT(+Y)
"RTN","TIUPUTPN",27,0)
 . I +TIUEDIT>0,$D(^TIU(8925,+Y,"TEXT")) D DELTEXT(+Y)
"RTN","TIUPUTPN",28,0)
 . I +TIUEDIT'>0 S TIUDAD=+Y,Y=$$MAKEADD
"RTN","TIUPUTPN",29,0)
 I +Y'>0 Q
"RTN","TIUPUTPN",30,0)
 D STUFREC(Y,+$G(TIUDAD))
"RTN","TIUPUTPN",31,0)
 I +$G(TIUDAD) D SENDADD^TIUALRT(+Y)
"RTN","TIUPUTPN",32,0)
 K TIUHDR(.01),TIUHDR(.07)
"RTN","TIUPUTPN",33,0)
LOOKUPX Q
"RTN","TIUPUTPN",34,0)
ILOC(LOCATION) ; Get pointer to file 44
"RTN","TIUPUTPN",35,0)
 N DIC,X,Y
"RTN","TIUPUTPN",36,0)
 S DIC=44,DIC(0)="M",X=LOCATION D ^DIC
"RTN","TIUPUTPN",37,0)
 Q Y
"RTN","TIUPUTPN",38,0)
CANEDIT(DA) ; Check whether or not document is released
"RTN","TIUPUTPN",39,0)
 Q $S(+$P($G(^TIU(8925,+DA,0)),U,5)<6:1,1:0)
"RTN","TIUPUTPN",40,0)
MAKEADD() ; Create an addendum record
"RTN","TIUPUTPN",41,0)
 N DIE,DR,DA,DIC,X,Y,DLAYGO,TIUATYP,TIUFPRIV S TIUFPRIV=1
"RTN","TIUPUTPN",42,0)
 S TIUATYP=+$$WHATITLE("ADDENDUM")
"RTN","TIUPUTPN",43,0)
 S (DIC,DLAYGO)=8925,DIC(0)="L",X=""""_"`"_TIUATYP_""""
"RTN","TIUPUTPN",44,0)
 D ^DIC
"RTN","TIUPUTPN",45,0)
 S DA=+Y
"RTN","TIUPUTPN",46,0)
 I +DA>0 S DIE=DIC,DR=".04////"_$$DOCCLASS^TIULC1(TIUATYP) D ^DIE
"RTN","TIUPUTPN",47,0)
 K TIUHDR(.01)
"RTN","TIUPUTPN",48,0)
 Q +DA
"RTN","TIUPUTPN",49,0)
STUFREC(DA,PARENT) ; Stuff fixed field data
"RTN","TIUPUTPN",50,0)
 N FDA,FDARR,IENS,FLAGS,TIUMSG
"RTN","TIUPUTPN",51,0)
 S IENS=""""_DA_",""",FDARR="FDA(8925,"_IENS_")",FLAGS="K"
"RTN","TIUPUTPN",52,0)
 I +$G(PARENT)'>0 D
"RTN","TIUPUTPN",53,0)
 . S @FDARR@(.02)=$G(DFN),@FDARR@(.03)=$P($G(TIU("VISIT")),U)
"RTN","TIUPUTPN",54,0)
 . S @FDARR@(.05)=3
"RTN","TIUPUTPN",55,0)
 . S @FDARR@(.07)=$P($G(TIU("EDT")),U)
"RTN","TIUPUTPN",56,0)
 . S @FDARR@(.08)=$P($G(TIU("LDT")),U)
"RTN","TIUPUTPN",57,0)
 . S @FDARR@(1201)=$$NOW^TIULC
"RTN","TIUPUTPN",58,0)
 . S @FDARR@(1205)=$S(+$P($G(TIU("LOC")),U):$P($G(TIU("LOC")),U),1:$P($G(TIU("VLOC")),U))
"RTN","TIUPUTPN",59,0)
 . ;S @FDARR@(1211)=$P($G(TIU("VLOC")),U)
"RTN","TIUPUTPN",60,0)
 . S @FDARR@(1404)=$P($G(TIU("SVC")),U)
"RTN","TIUPUTPN",61,0)
 I +$G(PARENT)>0 D
"RTN","TIUPUTPN",62,0)
 . S @FDARR@(.02)=+$P($G(^TIU(8925,+PARENT,0)),U,2)
"RTN","TIUPUTPN",63,0)
 . S @FDARR@(.03)=+$P($G(^TIU(8925,+PARENT,0)),U,3),@FDARR@(.05)=3
"RTN","TIUPUTPN",64,0)
 . S @FDARR@(.06)=PARENT
"RTN","TIUPUTPN",65,0)
 . S @FDARR@(.07)=$P($G(^TIU(8925,+PARENT,0)),U,7)
"RTN","TIUPUTPN",66,0)
 . S @FDARR@(.08)=$P($G(^TIU(8925,+PARENT,0)),U,8)
"RTN","TIUPUTPN",67,0)
 . S @FDARR@(1205)=$P($G(^TIU(8925,+PARENT,12)),U,5)
"RTN","TIUPUTPN",68,0)
 . S @FDARR@(1404)=$P($G(^TIU(8925,+PARENT,14)),U,4)
"RTN","TIUPUTPN",69,0)
 . S @FDARR@(1201)=$$NOW^TIULC
"RTN","TIUPUTPN",70,0)
 S @FDARR@(1205)=$P($G(TIU("LOC")),U)
"RTN","TIUPUTPN",71,0)
 S @FDARR@(1301)=$S($G(TIUDDT)]"":$$IDATE^TIULC($G(TIUDDT)),1:"")
"RTN","TIUPUTPN",72,0)
 I @FDARR@(1301)'>0 S @FDARR@(1301)=$G(@FDARR@(.07))
"RTN","TIUPUTPN",73,0)
 S @FDARR@(1303)="U"
"RTN","TIUPUTPN",74,0)
 D FILE^DIE(FLAGS,"FDA","TIUMSG") ; File record
"RTN","TIUPUTPN",75,0)
 Q
"RTN","TIUPUTPN",76,0)
DELTEXT(DA) ; Delete existing text in preparation for replacement
"RTN","TIUPUTPN",77,0)
 N DIE,DR,X,Y
"RTN","TIUPUTPN",78,0)
 S DIE=8925,DR="2///@" D ^DIE
"RTN","TIUPUTPN",79,0)
 Q
"RTN","TIUPUTPN",80,0)
WHATYPE(X) ; Identify document type
"RTN","TIUPUTPN",81,0)
 ; Receives: X=Document Definition Name
"RTN","TIUPUTPN",82,0)
 ;  Returns: Y=Document Definition IFN
"RTN","TIUPUTPN",83,0)
 N DIC,Y,TIUFPRIV S TIUFPRIV=1
"RTN","TIUPUTPN",84,0)
 S DIC=8925.1,DIC(0)="M"
"RTN","TIUPUTPN",85,0)
 S DIC("S")="I $D(^TIU(8925.1,+Y,""HEAD""))!$D(^TIU(8295.1,+Y,""ITEM""))"
"RTN","TIUPUTPN",86,0)
 D ^DIC K DIC("S")
"RTN","TIUPUTPN",87,0)
WHATYPX Q Y
"RTN","TIUPUTPN",88,0)
WHATITLE(X) ; Identify document title
"RTN","TIUPUTPN",89,0)
 ; Receives: X=Document Definition Name
"RTN","TIUPUTPN",90,0)
 ;  Returns: Y=Document Definition IFN
"RTN","TIUPUTPN",91,0)
 N DIC,Y,TIUFPRIV S TIUFPRIV=1
"RTN","TIUPUTPN",92,0)
 S DIC=8925.1,DIC(0)="M"
"RTN","TIUPUTPN",93,0)
 S DIC("S")="I $P(^TIU(8925.1,+Y,0),U,4)=""DOC"""
"RTN","TIUPUTPN",94,0)
 D ^DIC K DIC("S")
"RTN","TIUPUTPN",95,0)
WHATITX Q Y
"RTN","TIUPUTPN",96,0)
FOLLOWUP(TIUDA) ; Post-filing code for PROGRESS NOTES
"RTN","TIUPUTPN",97,0)
 N FDA,FDARR,IENS,FLAGS,TIUMSG,TIU,DFN
"RTN","TIUPUTPN",98,0)
 S IENS=""""_TIUDA_",""",FDARR="FDA(8925,"_IENS_")",FLAGS="K"
"RTN","TIUPUTPN",99,0)
 S @FDARR@(1204)=$$WHOSIGNS^TIULC1(TIUDA)
"RTN","TIUPUTPN",100,0)
 I +$P($G(^TIU(8925,TIUDA,12)),U,9),'+$P($G(^(12)),U,8) D
"RTN","TIUPUTPN",101,0)
 . S @FDARR@(1208)=$$WHOCOSIG^TIULC1(TIUDA)
"RTN","TIUPUTPN",102,0)
 D FILE^DIE(FLAGS,"FDA","TIUMSG")
"RTN","TIUPUTPN",103,0)
 I +$P($G(^TIU(8925,+TIUDA,12)),U,8),(+$P($G(^TIU(8925,+TIUDA,12)),U,4)'=+$P($G(^(12)),U,8)) D
"RTN","TIUPUTPN",104,0)
 . S @FDARR@(1506)=1 D FILE^DIE(FLAGS,"FDA","TIUMSG")
"RTN","TIUPUTPN",105,0)
 D RELEASE^TIUT(TIUDA,1)
"RTN","TIUPUTPN",106,0)
 D AUDIT^TIUEDI1(TIUDA,0,$$CHKSUM^TIULC("^TIU(8925,"_+TIUDA_",""TEXT"")"))
"RTN","TIUPUTPN",107,0)
 I '$D(TIU("VSTR")) D
"RTN","TIUPUTPN",108,0)
 . N TIUD0,TIUD12,TIUVLOC,TIUHLOC,TIUEDT,TIULDT
"RTN","TIUPUTPN",109,0)
 . S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD12=$G(^(12))
"RTN","TIUPUTPN",110,0)
 . S DFN=+$P(TIUD0,U,2),TIUEDT=+$P(TIUD0,U,7)
"RTN","TIUPUTPN",111,0)
 . S TIULDT=$$FMADD^XLFDT(TIUEDT,1),TIUHLOC=+$P(TIUD12,U,5)
"RTN","TIUPUTPN",112,0)
 . S TIUVLOC=$S(+$P(TIUD12,U,11):+$P(TIUD12,U,11),1:+TIUHLOC)
"RTN","TIUPUTPN",113,0)
 . I $S(+DFN'>0:1,+TIUEDT'>0:1,+TIULDT'>0:1,+TIUVLOC'>0:1,1:0) Q
"RTN","TIUPUTPN",114,0)
 . D MAIN^TIUVSIT(.TIU,DFN,"",TIUEDT,TIULDT,"LAST",0,+TIUVLOC)
"RTN","TIUPUTPN",115,0)
 Q:'$D(TIU("VSTR"))
"RTN","TIUPUTPN",116,0)
 D ENQ^TIUPXAP1 ; Get/file VISIT
"RTN","TIUPUTPN",117,0)
 Q
"RTN","TIUPUTU")
0^153^B15874627
"RTN","TIUPUTU",1,0)
TIUPUTU ; SLC/JER - Utilities for Filer/Router ;10/26/95  16:59
"RTN","TIUPUTU",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPUTU",3,0)
LOOKUP ; Look-up code used by router/filer
"RTN","TIUPUTU",4,0)
 ; Required: TIUSSN, TIUADT
"RTN","TIUPUTU",5,0)
 N DA,DFN,TIU,TIUDAD,TIUEDIT,TIUEDT,TIULDT,TIUXCRP S TIUXCRP=1
"RTN","TIUPUTU",6,0)
 I $S('$D(TIUSSN):1,'$D(TIUADT):1,$G(TIUSSN)?4N:1,$G(TIUSSN)']"":1,1:0) S Y=-1 G LOOKUPX
"RTN","TIUPUTU",7,0)
 I TIUSSN?3N1P2N1P4N.E S TIUSSN=$TR(TIUSSN,"-/","")
"RTN","TIUPUTU",8,0)
 I TIUSSN["?" S Y=-1 G LOOKUPX
"RTN","TIUPUTU",9,0)
 S TIUEDT=$$IDATE^TIULC(TIUADT),TIULDT=$$FMADD^XLFDT(TIUEDT,1)
"RTN","TIUPUTU",10,0)
 I +TIUEDT'>0 S Y=-1 Q
"RTN","TIUPUTU",11,0)
 D MAIN^TIUMOVE(.TIU,.DFN,TIUSSN,TIUEDT,TIULDT,1,"LAST",0)
"RTN","TIUPUTU",12,0)
 I $S($D(TIU)'>9:1,+$G(DFN)'>0:1,1:0) S Y=-1 G LOOKUPX
"RTN","TIUPUTU",13,0)
 I $P(+$G(TIU("EDT")),".")'=$P($$IDATE^TIULC(TIUADT),".") S Y=-1 G LOOKUPX
"RTN","TIUPUTU",14,0)
 I '+$G(TIU("LDT")),($G(TIUDICDT)]""),(+$$IDATE^TIULC(TIUDICDT)=-1) S Y=-1 Q
"RTN","TIUPUTU",15,0)
 S TIUTYP(1)=1_U_RECORD("TYPE")_U_$$PNAME^TIULC1(RECORD("TYPE"))
"RTN","TIUPUTU",16,0)
 S Y=$$GETREC^TIUEDI1(DFN,.TIU,1)
"RTN","TIUPUTU",17,0)
 I +Y'>0 G LOOKUPX
"RTN","TIUPUTU",18,0)
 S TIUEDIT=$$CANEDIT(+Y)
"RTN","TIUPUTU",19,0)
 ; If record has text and can be edited, then replace existing text
"RTN","TIUPUTU",20,0)
 I +TIUEDIT>0,$D(^TIU(8925,+Y,"TEXT")) D DELTEXT(+Y)
"RTN","TIUPUTU",21,0)
 I +TIUEDIT'>0 S TIUDAD=+Y,Y=$$MAKEADD
"RTN","TIUPUTU",22,0)
 I +Y'>0 G LOOKUPX
"RTN","TIUPUTU",23,0)
 K TIUHDR(.07)
"RTN","TIUPUTU",24,0)
 D STUFREC(Y,+$G(TIUDAD))
"RTN","TIUPUTU",25,0)
 I +$G(TIUDAD) D SENDADD^TIUALRT(+Y)
"RTN","TIUPUTU",26,0)
LOOKUPX Q
"RTN","TIUPUTU",27,0)
CANEDIT(DA) ; Check whether or not document is released
"RTN","TIUPUTU",28,0)
 Q $S(+$P($G(^TIU(8925,+DA,13)),U,4):0,1:1)
"RTN","TIUPUTU",29,0)
MAKEADD() ; Create an addendum record
"RTN","TIUPUTU",30,0)
 N DIE,DR,DA,DIC,X,Y,DLAYGO,TIUATYP,TIUFPRIV S TIUFPRIV=1
"RTN","TIUPUTU",31,0)
 S TIUATYP=+$$WHATITLE("ADDENDUM")
"RTN","TIUPUTU",32,0)
 S (DIC,DLAYGO)=8925,DIC(0)="L",X=""""_"`"_TIUATYP_""""
"RTN","TIUPUTU",33,0)
 D ^DIC
"RTN","TIUPUTU",34,0)
 S DA=+Y
"RTN","TIUPUTU",35,0)
 I +DA>0 S DIE=DIC,DR=".04////"_$$DOCCLASS^TIULC1(TIUATYP) D ^DIE
"RTN","TIUPUTU",36,0)
 Q +DA
"RTN","TIUPUTU",37,0)
STUFREC(DA,PARENT) ; Stuff fixed field data
"RTN","TIUPUTU",38,0)
 N FDA,FDARR,IENS,FLAGS,TIUMSG,TIURDT
"RTN","TIUPUTU",39,0)
 S IENS=""""_DA_",""",FDARR="FDA(8925,"_IENS_")",FLAGS="K"
"RTN","TIUPUTU",40,0)
 I +$G(PARENT)'>0 D
"RTN","TIUPUTU",41,0)
 . S @FDARR@(.02)=$G(DFN),@FDARR@(.03)=$P($G(TIU("VISIT")),U)
"RTN","TIUPUTU",42,0)
 . S @FDARR@(.05)=3
"RTN","TIUPUTU",43,0)
 . S @FDARR@(.07)=$P(TIU("EDT"),U)
"RTN","TIUPUTU",44,0)
 . S @FDARR@(.08)=$P(TIU("LDT"),U),@FDARR@(1401)=TIU("AD#")
"RTN","TIUPUTU",45,0)
 . S @FDARR@(1402)=$P($G(TIU("TS")),U),@FDARR@(1201)=$$NOW^TIULC
"RTN","TIUPUTU",46,0)
 I +$G(PARENT)>0 D
"RTN","TIUPUTU",47,0)
 . S @FDARR@(.02)=+$P(^TIU(8925,+PARENT,0),U,2)
"RTN","TIUPUTU",48,0)
 . S @FDARR@(.03)=+$P(^TIU(8925,+PARENT,0),U,3),@FDARR@(.05)=3
"RTN","TIUPUTU",49,0)
 . S @FDARR@(.06)=PARENT,@FDARR@(.08)=$P(TIU("LDT"),U)
"RTN","TIUPUTU",50,0)
 . S @FDARR@(1401)=$P(^TIU(8925,+PARENT,14),U)
"RTN","TIUPUTU",51,0)
 . S @FDARR@(1402)=$P(^TIU(8925,+PARENT,14),U,2)
"RTN","TIUPUTU",52,0)
 . S @FDARR@(1201)=$$NOW^TIULC
"RTN","TIUPUTU",53,0)
 S @FDARR@(1205)=$P($G(TIU("LOC")),U)
"RTN","TIUPUTU",54,0)
 I +$G(TIU("LDT")) S TIURDT=+$G(TIU("LDT"))
"RTN","TIUPUTU",55,0)
 I +$G(TIU("LDT"))'>0 D
"RTN","TIUPUTU",56,0)
 . S TIUDICDT=+$$IDATE^TIULC($G(TIUDICDT))
"RTN","TIUPUTU",57,0)
 . S TIURDT=$S(+$G(TIUDICDT)>0:+$G(TIUDICDT),1:+$$NOW^TIULC)
"RTN","TIUPUTU",58,0)
 . S TIU("LDT")=TIURDT_U_$$DATE^TIULS(TIURDT,"AMTH DD, CCYY@HR:MIN:SEC")
"RTN","TIUPUTU",59,0)
 . S @FDARR@(.12)=1
"RTN","TIUPUTU",60,0)
 S @FDARR@(1301)=TIURDT,@FDARR@(1303)="U"
"RTN","TIUPUTU",61,0)
 D FILE^DIE(FLAGS,"FDA","TIUMSG") ; File record
"RTN","TIUPUTU",62,0)
 Q
"RTN","TIUPUTU",63,0)
DELTEXT(DA) ; Delete existing text in preparation for replacement
"RTN","TIUPUTU",64,0)
 N DIE,DR,X,Y
"RTN","TIUPUTU",65,0)
 S DIE=8925,DR="2///@" D ^DIE
"RTN","TIUPUTU",66,0)
 Q
"RTN","TIUPUTU",67,0)
WHATYPE(X) ; Identify document type
"RTN","TIUPUTU",68,0)
 ; Receives: X=Document Definition Name
"RTN","TIUPUTU",69,0)
 ;  Returns: Y=Document Definition IFN
"RTN","TIUPUTU",70,0)
 N DIC,Y,TIUFPRIV S TIUFPRIV=1
"RTN","TIUPUTU",71,0)
 S DIC=8925.1,DIC(0)="M"
"RTN","TIUPUTU",72,0)
 S DIC("S")="I $D(^TIU(8925.1,+Y,""HEAD""))!$D(^TIU(8925.1,+Y,""ITEM""))"
"RTN","TIUPUTU",73,0)
 D ^DIC K DIC("S")
"RTN","TIUPUTU",74,0)
 Q Y
"RTN","TIUPUTU",75,0)
WHATYPE2(X) ; Identify document type
"RTN","TIUPUTU",76,0)
 ; Receives: X=Document Definition Name
"RTN","TIUPUTU",77,0)
 ;  Returns: Y=Document Definition IFN
"RTN","TIUPUTU",78,0)
 N DIC,Y,TIUFPRIV S TIUFPRIV=1
"RTN","TIUPUTU",79,0)
 S DIC=8925.1,DIC(0)="M"
"RTN","TIUPUTU",80,0)
 S DIC("S")="I $D(^TIU(8925.1,+Y,""HEAD""))!$D(^TIU(8925.1,+Y,""ITEM""))"
"RTN","TIUPUTU",81,0)
 D ^DIC K DIC("S")
"RTN","TIUPUTU",82,0)
 Q Y
"RTN","TIUPUTU",83,0)
WHATITLE(X) ; Identify document type
"RTN","TIUPUTU",84,0)
 ; Receives: X=Document Definition Name
"RTN","TIUPUTU",85,0)
 ;  Returns: Y=Document Definition IFN
"RTN","TIUPUTU",86,0)
 N DIC,Y,TIUFPRIV S TIUFPRIV=1
"RTN","TIUPUTU",87,0)
 S DIC=8925.1,DIC(0)="M"
"RTN","TIUPUTU",88,0)
 S DIC("S")="I $P(^TIU(8925.1,+Y,0),U,4)=""DOC"""
"RTN","TIUPUTU",89,0)
 D ^DIC K DIC("S")
"RTN","TIUPUTU",90,0)
 Q Y
"RTN","TIUPUTU",91,0)
FOLLOWUP(TIUDA) ; Post-filing code for Discharge Summaries
"RTN","TIUPUTU",92,0)
 N FDA,FDARR,IENS,FLAGS,TIUMSG,TIU
"RTN","TIUPUTU",93,0)
 S IENS=""""_TIUDA_",""",FDARR="FDA(8925,"_IENS_")",FLAGS="K"
"RTN","TIUPUTU",94,0)
 D GETTIU^TIULD(.TIU,TIUDA)
"RTN","TIUPUTU",95,0)
 I $L($G(TIU("EDT"))) S @FDARR@(.07)=$P($G(TIU("EDT")),U)
"RTN","TIUPUTU",96,0)
 S @FDARR@(1204)=$$WHOSIGNS^TIULC1(TIUDA)
"RTN","TIUPUTU",97,0)
 S @FDARR@(1208)=$$WHOCOSIG^TIULC1(TIUDA)
"RTN","TIUPUTU",98,0)
 D FILE^DIE(FLAGS,"FDA","TIUMSG")
"RTN","TIUPUTU",99,0)
 I +$P($G(^TIU(8925,+TIUDA,12)),U,4)'=+$P($G(^(12)),U,9) D
"RTN","TIUPUTU",100,0)
 . S @FDARR@(1506)=1 D FILE^DIE(FLAGS,"FDA","TIUMSG")
"RTN","TIUPUTU",101,0)
 D ENQ^TIUPXAP1 ; In-line call to get/file the visit
"RTN","TIUPUTU",102,0)
 D RELEASE^TIUT(TIUDA,1),UPDTIRT^TIUDIRT(.TIU,TIUDA)
"RTN","TIUPUTU",103,0)
 D AUDIT^TIUEDI1(TIUDA,0,$$CHKSUM^TIULC("^TIU(8925,"_+TIUDA_",""TEXT"")"))
"RTN","TIUPUTU",104,0)
 Q
"RTN","TIUPXAP1")
0^207^B10817599
"RTN","TIUPXAP1",1,0)
TIUPXAP1 ; SLC/JER - Interface w/PCE/Visit Tracking ;10/9/96  08:10
"RTN","TIUPXAP1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPXAP1",3,0)
QUE ; Use a RESOURCE to post visit tracking information in background
"RTN","TIUPXAP1",4,0)
 N ZTDTH,ZTIO,ZTSAVE,ZTSK,ZTRTN,ZTDESC
"RTN","TIUPXAP1",5,0)
 ; if there is already a visit, and no workload data quit
"RTN","TIUPXAP1",6,0)
 I +$G(TIU("VISIT")),($D(CPT)'>9) Q
"RTN","TIUPXAP1",7,0)
 S (ZTSAVE("TIU("),ZTSAVE("DFN"),ZTSAVE("TIUDA"),ZTSAVE("DA"))=""
"RTN","TIUPXAP1",8,0)
 S (ZTSAVE("DUZ("),ZTSAVE("ICD("),ZTSAVE("CPT("),ZTSAVE("SC("))=""
"RTN","TIUPXAP1",9,0)
 S ZTDTH=$H,ZTIO="TIU/PXAPI RESOURCE",ZTRTN="ENQ^TIUPXAP1"
"RTN","TIUPXAP1",10,0)
 S ZTDESC="TIU/PCE/AmbCare API Call" D ^%ZTLOAD
"RTN","TIUPXAP1",11,0)
 I '$D(ZTSK) D ENQ ; If can't get Resource, Run PXAPI call in foreground
"RTN","TIUPXAP1",12,0)
 Q
"RTN","TIUPXAP1",13,0)
ENQ ; Entry point for Resource
"RTN","TIUPXAP1",14,0)
 I $D(ZTQUEUED) S ZTREQ="@"
"RTN","TIUPXAP1",15,0)
 D POST(.TIU,DFN,$S(+$G(TIUDA):+$G(TIUDA),1:$G(DA)),.ICD,.CPT,.SC)
"RTN","TIUPXAP1",16,0)
 Q
"RTN","TIUPXAP1",17,0)
POST(TIUX,DFN,TIUDA,ICD,CPT,SC) ; Call on commitment to post data to PCE/AmbCare
"RTN","TIUPXAP1",18,0)
 N TIULOC,TIUVDT,TIUSTOP,TIUVCAT,TIUVSIT
"RTN","TIUPXAP1",19,0)
 S TIULOC=$P($G(TIUX("VSTR")),";"),TIUVDT=+$P($G(TIUX("VSTR")),";",2)
"RTN","TIUPXAP1",20,0)
 S TIUVCAT=$P($G(TIUX("VSTR")),";",3),TIUSTOP=$P($G(^SC(+TIULOC,0)),U,7)
"RTN","TIUPXAP1",21,0)
 D PXAPI(.TIUVSIT,DFN,TIULOC,TIUVDT,TIUVCAT,TIUSTOP,.ICD,.CPT,.SC,TIUDA)
"RTN","TIUPXAP1",22,0)
 I +$G(TIUVSIT),+$D(^TIU(8925,+$G(TIUDA))) D
"RTN","TIUPXAP1",23,0)
 . N DIE,DR,DA S DA=+$G(TIUDA)
"RTN","TIUPXAP1",24,0)
 . S DIE=8925,DR=".03////^S X="_+$G(TIUVSIT)_";.07////^S X="_$P($G(TIU("EDT")),U)
"RTN","TIUPXAP1",25,0)
 . D ^DIE
"RTN","TIUPXAP1",26,0)
 . S TIUX("VISIT")=+$G(TIUVSIT)_U_TIUVDT
"RTN","TIUPXAP1",27,0)
 Q
"RTN","TIUPXAP1",28,0)
PXAPI(VSIT,DFN,VLOC,VDT,VCAT,VSTOP,ICD,CPT,SC,TIUDA) ; Build input root
"RTN","TIUPXAP1",29,0)
 N TIUPXAPI,SUCCESS,TIUI,TIUPROV,DA
"RTN","TIUPXAP1",30,0)
 K ^TMP("TIUPXAPI",$J) S TIUPXAPI=$NA(^TMP("TIUPXAPI",$J))
"RTN","TIUPXAP1",31,0)
 S:+$G(VDT) @TIUPXAPI@("ENCOUNTER",1,"ENC D/T")=+$G(VDT)
"RTN","TIUPXAP1",32,0)
 S:+$G(DFN) @TIUPXAPI@("ENCOUNTER",1,"PATIENT")=+$G(DFN)
"RTN","TIUPXAP1",33,0)
 S:+$G(VLOC) @TIUPXAPI@("ENCOUNTER",1,"HOS LOC")=+$G(VLOC)
"RTN","TIUPXAP1",34,0)
 I $D(SC)>9 D
"RTN","TIUPXAP1",35,0)
 . S @TIUPXAPI@("ENCOUNTER",1,"SC")=$P($G(SC("SC")),U)
"RTN","TIUPXAP1",36,0)
 . I +$G(SC("AO")) S @TIUPXAPI@("ENCOUNTER",1,"AO")=$P($G(SC("AO")),U)
"RTN","TIUPXAP1",37,0)
 . I +$G(SC("IR")) S @TIUPXAPI@("ENCOUNTER",1,"IR")=$P($G(SC("IR")),U)
"RTN","TIUPXAP1",38,0)
 . I +$G(SC("AO")) S @TIUPXAPI@("ENCOUNTER",1,"EC")=$P($G(SC("EC")),U)
"RTN","TIUPXAP1",39,0)
 I $D(CPT) S @TIUPXAPI@("ENCOUNTER",1,"CHECKOUT D/T")=$$NOW^XLFDT
"RTN","TIUPXAP1",40,0)
 S:$G(VCAT)]"" @TIUPXAPI@("ENCOUNTER",1,"SERVICE CATEGORY")=$G(VCAT)
"RTN","TIUPXAP1",41,0)
 S:+$G(VSTOP) @TIUPXAPI@("ENCOUNTER",1,"DSS ID")=+$G(VSTOP)
"RTN","TIUPXAP1",42,0)
 S @TIUPXAPI@("ENCOUNTER",1,"APPT")=9
"RTN","TIUPXAP1",43,0)
 S @TIUPXAPI@("ENCOUNTER",1,"ENCOUNTER TYPE")="P"
"RTN","TIUPXAP1",44,0)
 S TIUPROV=$S(+$G(TIUAUTH):+$G(TIUAUTH),+$$ISA^USRLM(DUZ,"PROVIDER"):+$G(DUZ),+$G(TIUDA):$P($G(^TIU(8925,+$G(TIUDA),12)),U,2),1:"")
"RTN","TIUPXAP1",45,0)
 I TIUPROV]"" S @TIUPXAPI@("PROVIDER",1,"NAME")=TIUPROV
"RTN","TIUPXAP1",46,0)
 I $D(ICD)>9 S TIUI=0 F  S TIUI=$O(ICD(TIUI)) Q:+TIUI'>0  D
"RTN","TIUPXAP1",47,0)
 . S @TIUPXAPI@("DX/PL",TIUI,"ENC PROVIDER")=$G(TIUPROV)
"RTN","TIUPXAP1",48,0)
 . S @TIUPXAPI@("DX/PL",TIUI,"DIAGNOSIS")=$P(ICD(TIUI),U)
"RTN","TIUPXAP1",49,0)
 . S @TIUPXAPI@("DX/PL",TIUI,"NARRATIVE")="N/A"
"RTN","TIUPXAP1",50,0)
 . S:+$G(ICD(TIUI,"PRIMARY")) @TIUPXAPI@("DX/PL",TIUI,"PRIMARY")=$G(ICD(TIUI,"PRIMARY"))
"RTN","TIUPXAP1",51,0)
 I $D(CPT)>9 S TIUI=0 F  S TIUI=$O(CPT(TIUI)) Q:+TIUI'>0  D
"RTN","TIUPXAP1",52,0)
 . S @TIUPXAPI@("PROCEDURE",TIUI,"PROCEDURE")=$P(CPT(TIUI),U)
"RTN","TIUPXAP1",53,0)
 . S @TIUPXAPI@("PROCEDURE",TIUI,"QTY")=1
"RTN","TIUPXAP1",54,0)
 . S @TIUPXAPI@("PROCEDURE",TIUI,"ENC PROVIDER")=$G(TIUPROV)
"RTN","TIUPXAP1",55,0)
 S SUCCESS=$$DATA2PCE^PXAPI(TIUPXAPI,"TIU","TEXT INTEGRATION UTILITIES",.VSIT,DUZ,0)
"RTN","TIUPXAP1",56,0)
 K @TIUPXAPI
"RTN","TIUPXAP1",57,0)
 Q
"RTN","TIUPXAP2")
0^227^B3394206
"RTN","TIUPXAP2",1,0)
TIUPXAP2 ; SLC/JER - More code for the workload capture
"RTN","TIUPXAP2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPXAP2",3,0)
TEST ; Test the PXAPI Data Capture dialogs
"RTN","TIUPXAP2",4,0)
 N CPT,DFN,ICD,ICDARR,CPTARR,SC,DTOUT,TIU
"RTN","TIUPXAP2",5,0)
 S DFN=+$$PATIENT^TIULA
"RTN","TIUPXAP2",6,0)
 S TIU("LOC")=$$SELLOC^TIUVSIT
"RTN","TIUPXAP2",7,0)
 D GETICD^TIUPXAPI(TIU("LOC"),.ICDARR)
"RTN","TIUPXAP2",8,0)
 D ICD^TIUPXAPI(.ICD,.ICDARR)
"RTN","TIUPXAP2",9,0)
 D GETCPT^TIUPXAPC(TIU("LOC"),.CPTARR)
"RTN","TIUPXAP2",10,0)
CPTCALL D CPT^TIUPXAPC(.CPT,.CPTARR)
"RTN","TIUPXAP2",11,0)
 I '$D(CPT),'$D(DTOUT) W !!,$C(7),"You MUST enter one or more Procedures." G CPTCALL
"RTN","TIUPXAP2",12,0)
 D SCASK^TIUPXAPS(.SC,+DFN,.TIU)
"RTN","TIUPXAP2",13,0)
 I $D(DTOUT)!(+$O(ICD(0))'>0)&(+$O(CPT(0))'>0)&(+$O(SC(0))'>0) D  Q
"RTN","TIUPXAP2",14,0)
 . W !,$C(7),"Insufficient information for Workload Credit."
"RTN","TIUPXAP2",15,0)
 . W !,"Missing information will have to be captured by another method."
"RTN","TIUPXAP2",16,0)
 S TIUOK=$$CONFIRM^TIUPXAPI(.ICD,.CPT,.SC)
"RTN","TIUPXAP2",17,0)
 I '+TIUOK D  G TEST
"RTN","TIUPXAP2",18,0)
 . W !!,"Changes Discarded. Please Enter Corrected Workload Data..." H 3
"RTN","TIUPXAP2",19,0)
 . K ICD,CPT,SC,ICDARR,CPTARR
"RTN","TIUPXAP2",20,0)
 K CPTARR,ICDARR
"RTN","TIUPXAP2",21,0)
 W "Done."
"RTN","TIUPXAP2",22,0)
 Q
"RTN","TIUPXAP2",23,0)
CMBLST(EMCODES,CPTCODES) ; Combine E/M and other CPT codes
"RTN","TIUPXAP2",24,0)
 N TIUI,TIUJ,TMPARRY S (TIUI,TIUJ)=0
"RTN","TIUPXAP2",25,0)
 M TMPARRY=EMCODES S TIUI=EMCODES(0)
"RTN","TIUPXAP2",26,0)
 F  S TIUJ=$O(CPTCODES(TIUJ)) Q:+TIUJ'>0  D
"RTN","TIUPXAP2",27,0)
 . S TIUI=+$G(TIUI)+1,TMPARRY(TIUI)=CPTCODES(TIUJ),TMPARRY(0)=TIUI
"RTN","TIUPXAP2",28,0)
 K CPTCODES
"RTN","TIUPXAP2",29,0)
 M CPTCODES=TMPARRY
"RTN","TIUPXAP2",30,0)
 Q
"RTN","TIUPXAP2",31,0)
PICK(LOW,HIGH,PROMPT,TYPE) ; List selection
"RTN","TIUPXAP2",32,0)
 N X,Y S PROMPT=$G(PROMPT,"Select Item"),TYPE=$G(TYPE,"LO")
"RTN","TIUPXAP2",33,0)
 W !
"RTN","TIUPXAP2",34,0)
 S Y=$$READ^TIUU(TYPE_U_LOW_":"_HIGH,PROMPT)
"RTN","TIUPXAP2",35,0)
 Q Y
"RTN","TIUPXAPC")
0^230^B15201950
"RTN","TIUPXAPC",1,0)
TIUPXAPC ; SLC/JER - Get CPT stuff ;10/9/96  08:10
"RTN","TIUPXAPC",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPXAPC",3,0)
GETCPT(TIULOC,ARRY1) ; Get CPT codes for clinic
"RTN","TIUPXAPC",4,0)
 N TIUI,TIUROW,TIUCOL,ARRY2,TIUITM,TIUPAGE,EMARRY
"RTN","TIUPXAPC",5,0)
 D GETLST^IBDF18A(+TIULOC,"DG SELECT VISIT TYPE CPT PROCEDURES","EMARRY")
"RTN","TIUPXAPC",6,0)
 D GETLST^IBDF18A(+TIULOC,"DG SELECT CPT PROCEDURE CODES","ARRY2")
"RTN","TIUPXAPC",7,0)
 I $D(EMARRY)>9 D CMBLST^TIUPXAP2(.EMARRY,.ARRY2)
"RTN","TIUPXAPC",8,0)
 S (TIUI,TIUROW,TIUITM)=0,(TIUCOL,TIUPAGE)=1
"RTN","TIUPXAPC",9,0)
 F  S TIUI=$O(ARRY2(TIUI)) Q:+TIUI'>0  D
"RTN","TIUPXAPC",10,0)
 . I $P(ARRY2(TIUI),U)]"" D  I 1
"RTN","TIUPXAPC",11,0)
 . . S TIUROW=+$G(TIUROW)+1,TIUITM=+$G(TIUITM)+1
"RTN","TIUPXAPC",12,0)
 . . S ARRY1(TIUROW,TIUCOL)=TIUITM_U_$G(ARRY2(TIUI))
"RTN","TIUPXAPC",13,0)
 . . S ARRY1("INDEX",TIUITM)=$G(ARRY2(TIUI))
"RTN","TIUPXAPC",14,0)
 . E  D
"RTN","TIUPXAPC",15,0)
 . . S TIUROW=+$G(TIUROW)+1
"RTN","TIUPXAPC",16,0)
 . . S ARRY1(TIUROW,TIUCOL)=U_U_$$UP^XLFSTR($P($G(ARRY2(TIUI)),U,2))
"RTN","TIUPXAPC",17,0)
 . I (TIUROW#20'>0),(TIUCOL=3) S TIUPAGE=TIUPAGE+1
"RTN","TIUPXAPC",18,0)
 . I TIUROW#20'>0 S TIUCOL=$S(TIUCOL=3:1,1:TIUCOL+1),TIUROW=20*(TIUPAGE-1)
"RTN","TIUPXAPC",19,0)
 I +$G(ARRY2(0))>0 D
"RTN","TIUPXAPC",20,0)
 . S TIUROW=+$G(TIUROW)+1,TIUITM=TIUITM+1
"RTN","TIUPXAPC",21,0)
 . S ARRY1(TIUROW,TIUCOL)=TIUITM_"^99999^OTHER Procedure"
"RTN","TIUPXAPC",22,0)
 . S ARRY1("INDEX",TIUITM)="99999^OTHER Procedure"
"RTN","TIUPXAPC",23,0)
 . S ARRY1(0)=+$G(ARRY2(0))_U_+$G(TIUROW)_U_+$G(TIUPAGE)
"RTN","TIUPXAPC",24,0)
 . I (TIUROW#20'>0),(TIUCOL=3) S TIUPAGE=TIUPAGE+1
"RTN","TIUPXAPC",25,0)
 . I TIUROW#20'>0 S TIUCOL=$S(TIUCOL=3:1,1:TIUCOL+1),TIUROW=20*(TIUPAGE-1)
"RTN","TIUPXAPC",26,0)
 Q
"RTN","TIUPXAPC",27,0)
CPT(TIUY,CPTS) ; Select Procedures
"RTN","TIUPXAPC",28,0)
 N I,J,Y,TIUCPT,TIUICNT,TIUPGS,TIUPG,TIUITM,TIULITM,TIUPNM
"RTN","TIUPXAPC",29,0)
 S TIUPNM=$S($L($G(TIU("PNM"))):$G(TIU("PNM")),+$G(DFN):$$PTNAME^TIULC1(DFN),1:"the Patient")
"RTN","TIUPXAPC",30,0)
 W !!,"Please Indicate the Procedure(s) Performed on "_TIUPNM_":"
"RTN","TIUPXAPC",31,0)
 W:+$O(CPTS(0)) !
"RTN","TIUPXAPC",32,0)
 S TIUICNT=+$G(CPTS(0)),TIUPGS=$P($G(CPTS(0)),U,3)
"RTN","TIUPXAPC",33,0)
 S (I,J,L,Y)=0 I +TIUICNT S TIUPG=1
"RTN","TIUPXAPC",34,0)
 F  S I=$O(CPTS(I)) Q:+I'>0  D
"RTN","TIUPXAPC",35,0)
 . S J=0 W ! F  S J=$O(CPTS(I,J)) Q:+J'>0  D
"RTN","TIUPXAPC",36,0)
 . . W ?((J-1)*25) W:+$P(CPTS(I,J),U) $J($P(CPTS(I,J),U),2)_" " W $E($P(CPTS(I,J),U,3),1,20)
"RTN","TIUPXAPC",37,0)
 . . S TIUITM=$S(+$G(CPTS(I,J)):+$G(CPTS(I,J)),1:$G(TIUITM))
"RTN","TIUPXAPC",38,0)
 . . S:TIUITM>+$G(TIULITM) TIULITM=TIUITM
"RTN","TIUPXAPC",39,0)
 . I I#20=0 S Y=$S(+Y:Y,1:"")_$P($$PICK^TIUPXAP2(1,+$G(TIULITM),"Select Procedures"_$S(+$G(TIUPG)<TIUPGS:" (<RETURN> to see next page of choices)",1:"")),U),TIUPG=+$G(TIUPG)+1 W !
"RTN","TIUPXAPC",40,0)
 . S L=I S:TIUITM>+$G(TIULITM) TIULITM=TIUITM
"RTN","TIUPXAPC",41,0)
 I L#20 S Y=$S(+Y:Y,1:"")_$P($$PICK^TIUPXAP2(1,TIULITM,"Select Procedures"),U)
"RTN","TIUPXAPC",42,0)
 I +Y,+CPTS("INDEX",+Y)'=99999 D  I 1
"RTN","TIUPXAPC",43,0)
 . N I,ITEM F I=1:1:($L(Y,",")-1) D
"RTN","TIUPXAPC",44,0)
 . . S ITEM=$P(Y,",",I)
"RTN","TIUPXAPC",45,0)
 . . I +$G(CPTS("INDEX",+ITEM))'=99999 S TIUY(I)=$G(CPTS("INDEX",+ITEM))
"RTN","TIUPXAPC",46,0)
 . . E  D CPTOUT(.TIUY,.I)
"RTN","TIUPXAPC",47,0)
 E  D CPTOUT(.TIUY)
"RTN","TIUPXAPC",48,0)
 I +$O(TIUY(1)) D  I 1
"RTN","TIUPXAPC",49,0)
 . N TIUI S TIUI=0
"RTN","TIUPXAPC",50,0)
 . F  S TIUI=$O(TIUY(TIUI)) Q:+TIUI'>0  S TIUY(TIUI,"QTY")=1
"RTN","TIUPXAPC",51,0)
 E  I $D(TIUY(1)) S TIUY(1,"QTY")=1
"RTN","TIUPXAPC",52,0)
 Q
"RTN","TIUPXAPC",53,0)
CPTOUT(TIUY,TIUI) ; Go off-list for Procedure(s)
"RTN","TIUPXAPC",54,0)
 N DIC,X,Y
"RTN","TIUPXAPC",55,0)
 F  D  Q:+$G(TIUOUT)
"RTN","TIUPXAPC",56,0)
 . I $L($T(CONFIG^LEXSET)) D  I 1
"RTN","TIUPXAPC",57,0)
 . . D CONFIG^LEXSET("CPT","CPT")
"RTN","TIUPXAPC",58,0)
 . E  S DIC="^ICPT("
"RTN","TIUPXAPC",59,0)
 . S DIC(0)="AEMQ"
"RTN","TIUPXAPC",60,0)
 . S DIC("A")="Select "_$S(+$G(CPTS(0))'>0:"Procedure: ",1:"Another Procedure"_$S($D(CPTS):" (NOT from Above List)",1:"")_": ")
"RTN","TIUPXAPC",61,0)
 . N X
"RTN","TIUPXAPC",62,0)
 . D ^DIC
"RTN","TIUPXAPC",63,0)
 . I +$D(DTOUT)!+$D(DUOUT)!(X="") S TIUOUT=1 Q
"RTN","TIUPXAPC",64,0)
 . I +Y>0 D  Q
"RTN","TIUPXAPC",65,0)
 . . S:DIC="^LEX(757.01," Y=$$CPTONE^LEXU(+Y)_U_$P(Y,U,2)
"RTN","TIUPXAPC",66,0)
 . . S:$S(+$G(TIUI)'>0:1,$D(TIUY(+$G(TIUI))):1,1:0) TIUI=$G(TIUI)+1
"RTN","TIUPXAPC",67,0)
 . . S TIUY(TIUI)=Y
"RTN","TIUPXAPC",68,0)
 . W $C(7),!!,"Nothing found for ",X,"..."
"RTN","TIUPXAPC",69,0)
 . F  D  Q:(+Y>0)!+$G(TIUOUT)
"RTN","TIUPXAPC",70,0)
 . . N X
"RTN","TIUPXAPC",71,0)
 . . I $L($T(CONFIG^LEXSET)) D  I 1
"RTN","TIUPXAPC",72,0)
 . . . D CONFIG^LEXSET("CPT","CPT")
"RTN","TIUPXAPC",73,0)
 . . E  S DIC="^ICPT("
"RTN","TIUPXAPC",74,0)
 . . S DIC("A")="Please try another expression, or RETURN to continue: "
"RTN","TIUPXAPC",75,0)
 . . D ^DIC
"RTN","TIUPXAPC",76,0)
 . . I +$D(DTOUT)!+$D(DUOUT)!(X="") S TIUOUT=1 Q
"RTN","TIUPXAPC",77,0)
 . . I +Y>0 D  Q
"RTN","TIUPXAPC",78,0)
 . . . S:DIC="^LEX(757.01," Y=$$CPTONE^LEXU(+Y)_U_$P(Y,U,2)
"RTN","TIUPXAPC",79,0)
 . . . S:$S(+$G(TIUI)'>0:1,$D(TIUY(+$G(TIUI))):1,1:0) TIUI=$G(TIUI)+1
"RTN","TIUPXAPC",80,0)
 . . . S TIUY(TIUI)=Y
"RTN","TIUPXAPC",81,0)
 . . W $C(7),!!,"Nothing found for ",X,"..."
"RTN","TIUPXAPC",82,0)
 Q
"RTN","TIUPXAPI")
0^154^B40004472
"RTN","TIUPXAPI",1,0)
TIUPXAPI ; SLC/JER - Interface w/PCE/Visit Tracking ;10/9/96  08:10
"RTN","TIUPXAPI",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPXAPI",3,0)
CREDIT(DFN,TIU,VSIT) ; Get Dx, CPT, (& SC) for the CMD's mandate
"RTN","TIUPXAPI",4,0)
 N CPT,ICD,ICDARR,CPTARR,SC,DTOUT
"RTN","TIUPXAPI",5,0)
 ; For Historical Visits, just QUEUE the PXAPI call and quit
"RTN","TIUPXAPI",6,0)
 I $P(TIU("VSTR"),";",3)="E" D QUE^TIUPXAP1 Q
"RTN","TIUPXAPI",7,0)
 ; If no Location, and not Historical Visit, then quit
"RTN","TIUPXAPI",8,0)
 Q:+$G(TIU("VSTR"))'>0
"RTN","TIUPXAPI",9,0)
REENTER I $G(VALMAR)="^TMP(""TIUR"",$J)",$D(TIU("PNM")) D
"RTN","TIUPXAPI",10,0)
 . W !!,"For ",$G(TIU("PNM"))," ",$G(TIU("PID"))," Visit on "
"RTN","TIUPXAPI",11,0)
 . W $P($G(TIU("EDT")),U,2),"..."
"RTN","TIUPXAPI",12,0)
 D GETICD(TIU("LOC"),.ICDARR)
"RTN","TIUPXAPI",13,0)
 D ICD(.ICD,.ICDARR) G:+$G(DTOUT) INSUFF
"RTN","TIUPXAPI",14,0)
 D GETCPT^TIUPXAPC(TIU("LOC"),.CPTARR)
"RTN","TIUPXAPI",15,0)
CPTCALL D CPT^TIUPXAPC(.CPT,.CPTARR) G:+$G(DTOUT) INSUFF
"RTN","TIUPXAPI",16,0)
 I '$D(CPT),'$D(DTOUT) W !!,$C(7),"You MUST enter one or more Procedures." H 3 G CPTCALL
"RTN","TIUPXAPI",17,0)
 D SCASK^TIUPXAPS(.SC,+DFN,.TIU)
"RTN","TIUPXAPI",18,0)
INSUFF I $D(DTOUT)!(+$O(ICD(0))'>0)&(+$O(CPT(0))'>0)&(+$O(SC(0))'>0) D  G POST
"RTN","TIUPXAPI",19,0)
 . W !,$C(7),"Insufficient information for Workload Credit."
"RTN","TIUPXAPI",20,0)
 . W !,"Missing information will have to be captured by another method."
"RTN","TIUPXAPI",21,0)
 S TIUOK=$$CONFIRM(.ICD,.CPT,.SC)
"RTN","TIUPXAPI",22,0)
 I '+TIUOK D  G REENTER
"RTN","TIUPXAPI",23,0)
 . W !!,"Changes Discarded. Please Enter Corrected Workload Data..." H 3
"RTN","TIUPXAPI",24,0)
 . K ICD,CPT,SC,ICDARR,CPTARR
"RTN","TIUPXAPI",25,0)
 K CPTARR,ICDARR
"RTN","TIUPXAPI",26,0)
 W !!,"Posting Workload Credit..."
"RTN","TIUPXAPI",27,0)
POST D QUE^TIUPXAP1 ; Queue TIU/PXAPI RESOURCE
"RTN","TIUPXAPI",28,0)
 W:'+$G(DTOUT) "Done."
"RTN","TIUPXAPI",29,0)
 Q
"RTN","TIUPXAPI",30,0)
CONFIRM(ICD,CPT,SC) ; Show user and confirm
"RTN","TIUPXAPI",31,0)
 N TIUI,TIUY S TIUY=0
"RTN","TIUPXAPI",32,0)
 W !!,"You have indicated the following data apply to this visit:",!
"RTN","TIUPXAPI",33,0)
 W !,"DIAGNOSES:"
"RTN","TIUPXAPI",34,0)
 S TIUI=0
"RTN","TIUPXAPI",35,0)
 F  S TIUI=$O(ICD(TIUI)) Q:+TIUI'>0  D
"RTN","TIUPXAPI",36,0)
 . W !?3,$P(ICD(TIUI),U,2),?12,$E($P(ICD(TIUI),U,3),1,67)
"RTN","TIUPXAPI",37,0)
 . W:+$G(ICD(TIUI,"PRIMARY")) "  <<< PRIMARY"
"RTN","TIUPXAPI",38,0)
 W !!,"PROCEDURES:"
"RTN","TIUPXAPI",39,0)
 S TIUI=0
"RTN","TIUPXAPI",40,0)
 F  S TIUI=$O(CPT(TIUI)) Q:+TIUI'>0  D
"RTN","TIUPXAPI",41,0)
 . W !?3,$P(CPT(TIUI),U),?12,$E($P(CPT(TIUI),U,2),1,67)
"RTN","TIUPXAPI",42,0)
 I $S($G(SC("SC"))]"":1,$G(SC("AO"))]"":1,$G(SC("EC"))]"":1,$G(SC("IR"))]"":1,1:0) D
"RTN","TIUPXAPI",43,0)
 . W !!,"SERVICE CONNECTION:"
"RTN","TIUPXAPI",44,0)
 . W !?3,"Service Connected? ",$S(+$G(SC("SC")):"YES",1:"NO")
"RTN","TIUPXAPI",45,0)
 . I $G(SC("AO"))]"" W !?3,"Agent Orange? ",$S(+$G(SC("AO")):"YES",1:"NO")
"RTN","TIUPXAPI",46,0)
 . I $G(SC("AO"))]"" W !?3,"Ionizing Radiation? ",$S(+$G(SC("IR")):"YES",1:"NO")
"RTN","TIUPXAPI",47,0)
 . I $G(SC("AO"))]"" W !?3,"Environmental Contaminants? ",$S(+$G(SC("EC")):"YES",1:"NO")
"RTN","TIUPXAPI",48,0)
 W ! S TIUY=+$$READ^TIUU("Y","   ...OK","YES")
"RTN","TIUPXAPI",49,0)
 Q +$G(TIUY)
"RTN","TIUPXAPI",50,0)
GETICD(TIULOC,ARRY1) ; Get ICD-9 codes for clinic
"RTN","TIUPXAPI",51,0)
 N TIUI,TIUROW,TIUCOL,ARRY2,TIUITM,TIUPAGE
"RTN","TIUPXAPI",52,0)
 D GETLST^IBDF18A(+TIULOC,"DG SELECT ICD-9 DIAGNOSIS CODES","ARRY2")
"RTN","TIUPXAPI",53,0)
 S (TIUI,TIUROW,TIUITM)=0,(TIUCOL,TIUPAGE)=1
"RTN","TIUPXAPI",54,0)
 F  S TIUI=$O(ARRY2(TIUI)) Q:+TIUI'>0  D
"RTN","TIUPXAPI",55,0)
 . I $P(ARRY2(TIUI),U)]"" D  I 1
"RTN","TIUPXAPI",56,0)
 . . S TIUROW=+$G(TIUROW)+1,TIUITM=+$G(TIUITM)+1
"RTN","TIUPXAPI",57,0)
 . . S ARRY1(TIUROW,TIUCOL)=TIUITM_U_$G(ARRY2(TIUI))
"RTN","TIUPXAPI",58,0)
 . . S ARRY1("INDEX",TIUITM)=$G(ARRY2(TIUI))
"RTN","TIUPXAPI",59,0)
 . E  D
"RTN","TIUPXAPI",60,0)
 . . S TIUROW=+$G(TIUROW)+1
"RTN","TIUPXAPI",61,0)
 . . S ARRY1(TIUROW,TIUCOL)=U_U_$$UP^XLFSTR($P($G(ARRY2(TIUI)),U,2))
"RTN","TIUPXAPI",62,0)
 . I (TIUROW#20'>0),(TIUCOL=3) S TIUPAGE=TIUPAGE+1
"RTN","TIUPXAPI",63,0)
 . I TIUROW#20'>0 S TIUCOL=$S(TIUCOL=3:1,1:TIUCOL+1),TIUROW=20*(TIUPAGE-1)
"RTN","TIUPXAPI",64,0)
 I +$G(ARRY2(0))>0 D
"RTN","TIUPXAPI",65,0)
 . S TIUROW=+$G(TIUROW)+1,TIUITM=TIUITM+1
"RTN","TIUPXAPI",66,0)
 . S ARRY1(TIUROW,TIUCOL)=TIUITM_"^99999^OTHER Diagnosis"
"RTN","TIUPXAPI",67,0)
 . S ARRY1("INDEX",TIUITM)="99999^OTHER Diagnosis"
"RTN","TIUPXAPI",68,0)
 . S ARRY1(0)=+$G(ARRY2(0))_U_+$G(TIUROW)_U_+$G(TIUPAGE)
"RTN","TIUPXAPI",69,0)
 . I (TIUROW#20'>0),(TIUCOL=3) S TIUPAGE=TIUPAGE+1
"RTN","TIUPXAPI",70,0)
 . I TIUROW#20'>0 S TIUCOL=$S(TIUCOL=3:1,1:TIUCOL+1),TIUROW=20*(TIUPAGE-1)
"RTN","TIUPXAPI",71,0)
 Q
"RTN","TIUPXAPI",72,0)
ICD(TIUY,ICDS) ; Select Dx's
"RTN","TIUPXAPI",73,0)
 N I,J,Y,TIUICD,TIUICNT,TIUPGS,TIUPG,TIUITM,TIULITM,TIUPNM
"RTN","TIUPXAPI",74,0)
 S TIUPNM=$S($L($G(TIU("PNM"))):$G(TIU("PNM")),+$G(DFN):$$PTNAME^TIULC1(DFN),1:"the Patient")
"RTN","TIUPXAPI",75,0)
 W !!,"Please Indicate the Diagnoses for which "_TIUPNM_" was Seen:"
"RTN","TIUPXAPI",76,0)
 W:+$O(ICDS(0)) !
"RTN","TIUPXAPI",77,0)
 S TIUICNT=+$G(ICDS(0)),TIUPGS=$P($G(ICDS(0)),U,3)
"RTN","TIUPXAPI",78,0)
 S (I,J,L,Y)=0 I +TIUICNT S TIUPG=1
"RTN","TIUPXAPI",79,0)
 F  S I=$O(ICDS(I)) Q:+I'>0  D  Q:+$G(DTOUT)
"RTN","TIUPXAPI",80,0)
 . S J=0 W ! F  S J=$O(ICDS(I,J)) Q:+J'>0  D
"RTN","TIUPXAPI",81,0)
 . . W ?((J-1)*25) W:+$P(ICDS(I,J),U) $J($P(ICDS(I,J),U),2)_" " W $E($P(ICDS(I,J),U,3),1,20)
"RTN","TIUPXAPI",82,0)
 . . S TIUITM=$S(+$G(ICDS(I,J)):+$G(ICDS(I,J)),1:$G(TIUITM))
"RTN","TIUPXAPI",83,0)
 . . S:TIUITM>+$G(TIULITM) TIULITM=TIUITM
"RTN","TIUPXAPI",84,0)
 . I I#20=0 S Y=$S(+Y:Y,1:"")_$P($$PICK^TIUPXAP2(1,+$G(TIULITM),"Select Diagnoses"_$S(+$G(TIUPG)<TIUPGS:" (<RETURN> to see next page of choices)",1:"")),U),TIUPG=+$G(TIUPG)+1 W !
"RTN","TIUPXAPI",85,0)
 . S L=I S:TIUITM>+$G(TIULITM) TIULITM=TIUITM
"RTN","TIUPXAPI",86,0)
 I +$G(DTOUT) Q
"RTN","TIUPXAPI",87,0)
 I L#20 S Y=$S(+Y:Y,1:"")_$P($$PICK^TIUPXAP2(1,TIULITM,"Select Diagnoses"),U)
"RTN","TIUPXAPI",88,0)
 I +Y,+ICDS("INDEX",+Y)'=99999 D  I 1
"RTN","TIUPXAPI",89,0)
 . N I,ITEM F I=1:1:($L(Y,",")-1) D  Q:+$G(DTOUT)
"RTN","TIUPXAPI",90,0)
 . . S ITEM=$P(Y,",",I)
"RTN","TIUPXAPI",91,0)
 . . I +$G(ICDS("INDEX",+ITEM))'=99999 D
"RTN","TIUPXAPI",92,0)
 . . . S TIUICD=+$O(^ICD9("AB",$P(ICDS("INDEX",+ITEM),U)_" ",0))
"RTN","TIUPXAPI",93,0)
 . . . S TIUY(I)=TIUICD_U_$G(ICDS("INDEX",+ITEM))
"RTN","TIUPXAPI",94,0)
 . . E  D ICDOUT(.TIUY,.I)
"RTN","TIUPXAPI",95,0)
 Q:+$G(DTOUT)
"RTN","TIUPXAPI",96,0)
 E  D ICDOUT(.TIUY)
"RTN","TIUPXAPI",97,0)
 I +$O(TIUY(1)) D ASKPRMRY(.TIUY) I 1
"RTN","TIUPXAPI",98,0)
 Q:+$G(DTOUT)
"RTN","TIUPXAPI",99,0)
 E  I $D(TIUY(1)) S TIUY(1,"PRIMARY")=1
"RTN","TIUPXAPI",100,0)
 Q
"RTN","TIUPXAPI",101,0)
ASKPRMRY(TIUY) ; Which Dx is Primary
"RTN","TIUPXAPI",102,0)
 N I,L,Y
"RTN","TIUPXAPI",103,0)
PRMAGN W !!,"Please indicate which of the Diagnoses is the Primary Diagnosis:",!
"RTN","TIUPXAPI",104,0)
 S (I,L,Y)=0 F  S I=$O(TIUY(I)) Q:+I'>0!+Y  D
"RTN","TIUPXAPI",105,0)
 . W:$P(TIUY(I),U)]"" !,I,?7,$P(TIUY(I),U,3)
"RTN","TIUPXAPI",106,0)
 . I I#20=0 S Y=$P($$PICK^TIUPXAP2(1,I,"Select Diagnosis","NO"),U)
"RTN","TIUPXAPI",107,0)
 . S L=I
"RTN","TIUPXAPI",108,0)
 I L#20,'+Y S Y=$P($$PICK^TIUPXAP2(1,L,"Select Diagnosis","NO"),U)
"RTN","TIUPXAPI",109,0)
 I +Y'>0 W !!?3,$C(7),"You must specify a Primary Diagnosis." G PRMAGN
"RTN","TIUPXAPI",110,0)
 I +Y,$D(TIUY(+Y)) S TIUY(+Y,"PRIMARY")=1
"RTN","TIUPXAPI",111,0)
 Q
"RTN","TIUPXAPI",112,0)
ICDOUT(TIUY,TIUI) ; Go off-list for Dx
"RTN","TIUPXAPI",113,0)
 N DIC,X,Y,TIUICD,TIUOUT
"RTN","TIUPXAPI",114,0)
 F  D  Q:+$G(TIUOUT)
"RTN","TIUPXAPI",115,0)
 . I $L($T(CONFIG^LEXSET)) D  I 1
"RTN","TIUPXAPI",116,0)
 . . D CONFIG^LEXSET("ICD","ICD")
"RTN","TIUPXAPI",117,0)
 . E  D
"RTN","TIUPXAPI",118,0)
 . . D CONFIG^GMPTSET("GMPL","PL2")
"RTN","TIUPXAPI",119,0)
 . . S:$G(GMPTSHOW)'["ICD" GMPTSHOW=$G(GMPTSHOW)_"/ICD"
"RTN","TIUPXAPI",120,0)
 . . S:$E(GMPTSHOW,1)="/" GMPTSHOW=$E(GMPTSHOW,2,$L(GMPTSHOW))
"RTN","TIUPXAPI",121,0)
 . S DIC(0)="AEMQ"
"RTN","TIUPXAPI",122,0)
 . S DIC("A")="Select "_$S(+$G(ICDS(0))'>0:"Diagnosis: ",1:"Another Diagnosis"_$S($D(ICDS):" (NOT from Above List)",1:"")_": ")
"RTN","TIUPXAPI",123,0)
 . N X K DIC("B")
"RTN","TIUPXAPI",124,0)
 . D ^DIC
"RTN","TIUPXAPI",125,0)
 . I +$D(DTOUT)!+$D(DUOUT)!(X="") S TIUOUT=1 Q
"RTN","TIUPXAPI",126,0)
 . I $G(Y(1))]"" D  Q
"RTN","TIUPXAPI",127,0)
 . . S TIUICD=+$O(^ICD9("AB",$P(Y(1),U)_" ",0))
"RTN","TIUPXAPI",128,0)
 . . S:TIUICD'>0 TIUICD=+$O(^ICD9("AB",$P(Y(1),U)_"0 ",0))
"RTN","TIUPXAPI",129,0)
 . . I +TIUICD'>0 W !,$C(7),"ICD CODE NOT FOUND FOR EXPRESSION." Q
"RTN","TIUPXAPI",130,0)
 . . S:$S(+$G(TIUI)'>0:1,$D(TIUY(+$G(TIUI))):1,1:0) TIUI=$G(TIUI)+1
"RTN","TIUPXAPI",131,0)
 . . S TIUY(TIUI)=TIUICD_U_Y(1)_U_$P(Y,U,2)
"RTN","TIUPXAPI",132,0)
 . W $C(7),!!,"Nothing found for ",X,"..."
"RTN","TIUPXAPI",133,0)
 . F  D  Q:(+Y>0)!+$G(TIUOUT)
"RTN","TIUPXAPI",134,0)
 . . N X
"RTN","TIUPXAPI",135,0)
 . . I $L($T(CONFIG^LEXSET)) D  I 1
"RTN","TIUPXAPI",136,0)
 . . . D CONFIG^LEXSET("ICD","ICD")
"RTN","TIUPXAPI",137,0)
 . . E  D CONFIG^GMPTSET("ICD","ICD")
"RTN","TIUPXAPI",138,0)
 . . S DIC("A")="Please try another expression, or RETURN to continue: "
"RTN","TIUPXAPI",139,0)
 . . D ^DIC
"RTN","TIUPXAPI",140,0)
 . . I +$D(DTOUT)!+$D(DUOUT)!(X="") S TIUOUT=1 Q
"RTN","TIUPXAPI",141,0)
 . . I +$G(Y(1))>0 D  Q
"RTN","TIUPXAPI",142,0)
 . . . S TIUICD=+$O(^ICD9("AB",$P(Y(1),U)_" ",0))
"RTN","TIUPXAPI",143,0)
 . . . S:$S(+$G(TIUI)'>0:1,$D(TIUY(+$G(TIUI))):1,1:0) TIUI=$G(TIUI)+1
"RTN","TIUPXAPI",144,0)
 . . . S TIUY(TIUI)=TIUICD_U_Y(1)_U_$P(Y,U,2)
"RTN","TIUPXAPI",145,0)
 . . W $C(7),!!,"Nothing found for ",X,"..."
"RTN","TIUPXAPI",146,0)
 Q
"RTN","TIUPXAPS")
0^215^B3872191
"RTN","TIUPXAPS",1,0)
TIUPXAPS ; SLC/JER - Ask Service Connection Question(s)
"RTN","TIUPXAPS",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUPXAPS",3,0)
SCASK(TIUY,DFN,TIU) ; Ask Service Connection stuff
"RTN","TIUPXAPS",4,0)
 N TIUPRMT,TIUSC,TIUDFLT
"RTN","TIUPXAPS",5,0)
 D SCCOND^PXUTLSCC(DFN,+$G(TIU("EDT")),+$G(TIU("LOC")),+$G(TIU("VISIT")),.TIUSC)
"RTN","TIUPXAPS",6,0)
 ; Don't ask if none of the above
"RTN","TIUPXAPS",7,0)
 I '+$G(TIUSC("SC")),'+$G(TIUSC("AO")),'+$G(TIUSC("IR")),'+$G(TIUSC("EC")) Q
"RTN","TIUPXAPS",8,0)
 W !!,"Was this encounter related to any of the following:",!
"RTN","TIUPXAPS",9,0)
 I +$G(TIUSC("SC")) D
"RTN","TIUPXAPS",10,0)
 . F  D  Q:TIUY("SC")]""!$D(DTOUT)
"RTN","TIUPXAPS",11,0)
 . . N DUOUT,DIROUT,DIRUT
"RTN","TIUPXAPS",12,0)
 . . S TIUDFLT=$P(TIUSC("SC"),U,2)
"RTN","TIUPXAPS",13,0)
 . . S TIUDFLT=$S(TIUDFLT=1:"YES",TIUDFLT=0:"NO",1:"")
"RTN","TIUPXAPS",14,0)
 . . S TIUPRMT="Service Connected Condition"
"RTN","TIUPXAPS",15,0)
 . . S TIUY("SC")=$$READ^TIUU("Y",TIUPRMT,TIUDFLT,"^D SC^SDCO23(DFN)")
"RTN","TIUPXAPS",16,0)
 . . I (TIUY("SC")="^")!(+TIUY("SC")'=0),(+TIUY("SC")'=1) S TIUY("SC")="" W !,$C(7),"(Y)ES or (N)o Required."
"RTN","TIUPXAPS",17,0)
 I +$G(TIUY("SC"))>0 S (TIUY("AO"),TIUY("IR"),TIUY("EC"))="" Q
"RTN","TIUPXAPS",18,0)
 I +$G(TIUSC("AO")) D
"RTN","TIUPXAPS",19,0)
 . S TIUDFLT=$P(TIUSC("AO"),U,2)
"RTN","TIUPXAPS",20,0)
 . S TIUDFLT=$S(TIUDFLT=1:"YES",TIUDFLT=0:"NO",1:"")
"RTN","TIUPXAPS",21,0)
 . S TIUPRMT="      Agent Orange Exposure"
"RTN","TIUPXAPS",22,0)
 . S TIUY("AO")=$$READ^TIUU("YO",TIUPRMT,TIUDFLT)
"RTN","TIUPXAPS",23,0)
 I +$G(TIUSC("IR")) D
"RTN","TIUPXAPS",24,0)
 . S TIUDFLT=$P(TIUSC("IR"),U,2)
"RTN","TIUPXAPS",25,0)
 . S TIUDFLT=$S(TIUDFLT=1:"YES",TIUDFLT=0:"NO",1:"")
"RTN","TIUPXAPS",26,0)
 . S TIUPRMT="Ionizing Radiation Exposure"
"RTN","TIUPXAPS",27,0)
 . S TIUY("IR")=$$READ^TIUU("YO",TIUPRMT,TIUDFLT)
"RTN","TIUPXAPS",28,0)
 I +$G(TIUSC("EC")) D
"RTN","TIUPXAPS",29,0)
 . S TIUDFLT=$P(TIUSC("EC"),U,2)
"RTN","TIUPXAPS",30,0)
 . S TIUDFLT=$S(TIUDFLT=1:"YES",TIUDFLT=0:"NO",1:"")
"RTN","TIUPXAPS",31,0)
 . S TIUPRMT=" Environmental Contaminants"
"RTN","TIUPXAPS",32,0)
 . S TIUY("EC")=$$READ^TIUU("YO",TIUPRMT,TIUDFLT)
"RTN","TIUPXAPS",33,0)
 Q
"RTN","TIUR")
0^155^B71845057
"RTN","TIUR",1,0)
TIUR ; SLC/JER - Integrated Document Review ;10/11/94  11:09
"RTN","TIUR",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUR",3,0)
MAKELIST(TIUCLASS,TIUCHVW) ; Get Search Criteria
"RTN","TIUR",4,0)
 N DIRUT,DTOUT,DUOUT,TIUI,SCREEN,STATUS,TIUTYP,TIUSTAT,TIUEDFLT,TIUDCL
"RTN","TIUR",5,0)
 N TIUDPRMT,TIUPICT,TIUOUT
"RTN","TIUR",6,0)
 K DIROUT
"RTN","TIUR",7,0)
 I +$G(ORVP),(+$G(TIUCHVW)'>0) D EN^TIURPN(TIUCLASS,+ORVP) Q
"RTN","TIUR",8,0)
STATUS S STATUS=$S($D(TIUQUIK):$$SELSTAT^TIULA(.TIUSTAT,"F","UNSIGNED,UNCOSIGNED"),($D(ORVP)&'+$G(TIUCHVW)):$$SELSTAT^TIULA(.TIUSTAT,"F","COMPLETED"),1:$$SELSTAT^TIULA(.TIUSTAT,"A",$$DFLTSTAT^TIURM(DUZ)))
"RTN","TIUR",9,0)
 I +STATUS<0 S VALMQUIT=1 Q
"RTN","TIUR",10,0)
DOCTYPE ; Select Document Type(s)
"RTN","TIUR",11,0)
 N TIUDCL K TIUPICT
"RTN","TIUR",12,0)
 I $S(('$D(TIUQUIK)&'$D(ORVP)):1,($D(ORVP)&+$G(TIUCHVW)):1,1:0) D SELTYP^TIULA(TIUCLASS,.TIUTYP,"A","LAST","DOC",0,.TIUDCL,.TIUPICT)
"RTN","TIUR",13,0)
 I $S($D(TIUQUIK):1,($D(ORVP)&'+$G(TIUCHVW)):1,1:0) D SELTYP^TIULA(TIUCLASS,.TIUTYP,"F","ALL","DOC",0)
"RTN","TIUR",14,0)
 I +$G(DIROUT) S VALMQUIT=1 Q
"RTN","TIUR",15,0)
 I +$G(TIUTYP)'>0,'$D(TIUQUIK) G STATUS
"RTN","TIUR",16,0)
SCREEN ;
"RTN","TIUR",17,0)
 N TIUNAME
"RTN","TIUR",18,0)
 S TIUNAME=$P($G(^VA(200,+DUZ,0)),U)
"RTN","TIUR",19,0)
 I $D(TIUQUIK) D  I 1
"RTN","TIUR",20,0)
 . S SCREEN(1)="AAU^"_DUZ_U_TIUNAME
"RTN","TIUR",21,0)
 . S SCREEN(2)="ASUP^"_DUZ
"RTN","TIUR",22,0)
 E  I $D(ORVP),'+$G(TIUCHVW) S SCREEN(1)="APT^"_+ORVP_U_$P($G(^DPT(+ORVP,0)),U) I 1
"RTN","TIUR",23,0)
 E  D SELCAT^TIULA1(.SCREEN,"A","AUTHOR")
"RTN","TIUR",24,0)
 I +$G(DIROUT) S VALMQUIT=1 Q
"RTN","TIUR",25,0)
 I $D(SCREEN)'>9 K TIUTYP G DOCTYPE
"RTN","TIUR",26,0)
 I $D(TIUTYP)'>9 W !,$C(7),"You must select one or more TITLES..." G SCREEN
"RTN","TIUR",27,0)
 I $G(SCREEN(1))="ALL^ANY",+$G(ORVP) S SCREEN(1)="APT^"_+$G(ORVP)_U_$P($G(^DPT(+$G(ORVP),0)),U)
"RTN","TIUR",28,0)
 D CHECKADD(.TIUTYP)
"RTN","TIUR",29,0)
ERLY S TIUEDFLT=$S(TIUCLASS=3:"T-2",TIUCLASS=244:"T-30",1:"T-7")
"RTN","TIUR",30,0)
 S TIUDPRMT=$S(TIUCLASS=244:"Discharge",1:"Reference")
"RTN","TIUR",31,0)
 S TIUEDT=$S($D(TIUQUIK):1,$D(ORVP)&(+$G(TIUCHVW)'>0):$$FMADD^XLFDT(DT,$S($D(^DPT(+$G(ORVP),.1))'>0:-180,1:-30)),1:$P($$EDATE^TIULA(TIUDPRMT,"",TIUEDFLT),U))
"RTN","TIUR",32,0)
 I +$G(DIROUT) S VALMQUIT=1 Q
"RTN","TIUR",33,0)
 I TIUEDT'>0 G SCREEN
"RTN","TIUR",34,0)
 S TIULDT=$S($D(TIUQUIK):9999999,$D(ORVP)&(+$G(TIUCHVW)'>0):+$$NOW^XLFDT,1:$P($$LDATE^TIULA(TIUDPRMT),U))
"RTN","TIUR",35,0)
 I +$G(DIROUT) S VALMQUIT=1 Q
"RTN","TIUR",36,0)
 I TIULDT'>0 G ERLY
"RTN","TIUR",37,0)
 I TIUEDT>TIULDT D SWAP(.TIUEDT,.TIULDT)
"RTN","TIUR",38,0)
 I $L(TIULDT,".")=1 D EXPRANGE(.TIUEDT,.TIULDT)
"RTN","TIUR",39,0)
 W !,"Searching for the documents."
"RTN","TIUR",40,0)
 D BUILD(.TIUSTAT,.TIUTYP,.SCREEN,TIUEDT,TIULDT)
"RTN","TIUR",41,0)
 Q
"RTN","TIUR",42,0)
CHECKADD(TYPES) ; Checks whether Addendum is included in the list of types
"RTN","TIUR",43,0)
 N TIUI,HIT S (TIUI,HIT)=0
"RTN","TIUR",44,0)
 F  S TIUI=$O(TYPES(TIUI)) Q:+TIUI'>0!+HIT  I $$UP^XLFSTR(TYPES(TIUI))["ADDENDUM" S HIT=1
"RTN","TIUR",45,0)
 I +HIT'>0 S TYPES(TYPES+1)=+TYPES(TYPES)+1_U_"81^Addendum^NOT PICKED",TYPES=TYPES+1
"RTN","TIUR",46,0)
 Q
"RTN","TIUR",47,0)
SWAP(TIUX,TIUY) ; Swap variables
"RTN","TIUR",48,0)
 N TIUTMP S TIUTMP=TIUX,TIUX=TIUY,TIUY=TIUTMP
"RTN","TIUR",49,0)
 Q
"RTN","TIUR",50,0)
EXPRANGE(TIUX,TIUY) ; Expand range when same for early & late
"RTN","TIUR",51,0)
 I TIUX=DT S TIUY=$$NOW^XLFDT I 1
"RTN","TIUR",52,0)
 E  S TIUY=TIUY_"."_2359
"RTN","TIUR",53,0)
 Q
"RTN","TIUR",54,0)
BUILD(STATUS,TYPES,SCREEN,EARLY,LATE) ; Build List
"RTN","TIUR",55,0)
 N TIUCNT,TIUDT,TIUI,TIUJ,TIUK,TIUP,TIUQ,TIUIFN,TIUREC
"RTN","TIUR",56,0)
 N TIUT,TIUTP,XREF,TIUS,TIUPREF
"RTN","TIUR",57,0)
 S TIUPREF=$$PERSPRF^TIULE(DUZ),(TIUK,VALMCNT)=0
"RTN","TIUR",58,0)
 K ^TMP("TIUR",$J),^TMP("TIURIDX",$J),^TMP("TIUI",$J)
"RTN","TIUR",59,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIUR",60,0)
 S EARLY=9999999-+$G(EARLY),LATE=9999999-$S(+$G(LATE):+$G(LATE),1:3333333)
"RTN","TIUR",61,0)
 F  S TIUK=$O(SCREEN(TIUK)) Q:TIUK'>0  D
"RTN","TIUR",62,0)
 . S XREF=$P(SCREEN(TIUK),U)
"RTN","TIUR",63,0)
 . I XREF'="ASUB" D
"RTN","TIUR",64,0)
 . . S TIUI=$S(XREF'="APRB":$P(SCREEN(TIUK),U,2),1:$$UPPER^TIULS($P(SCREEN(TIUK),U,3)))
"RTN","TIUR",65,0)
 . . D GATHER(TIUI,TIUPREF,TIUCLASS)
"RTN","TIUR",66,0)
 . I XREF="ASUB" D
"RTN","TIUR",67,0)
 . . S TIUI=$O(^TIU(8925,XREF,$P(SCREEN(TIUK),U,2)),-1)
"RTN","TIUR",68,0)
 . . F  S TIUI=$O(^TIU(8925,XREF,TIUI)) Q:TIUI=""!(TIUI'[$P(SCREEN(TIUK),U,2))  D GATHER(TIUI,TIUPREF,TIUCLASS)
"RTN","TIUR",69,0)
 D PUTLIST(TIUPREF)
"RTN","TIUR",70,0)
 K ^TMP("TIUI",$J)
"RTN","TIUR",71,0)
 Q
"RTN","TIUR",72,0)
GATHER(TIUI,TIUPREF,CLASS) ; Find/sort
"RTN","TIUR",73,0)
 N TIUT,TIUTP,TIUS,TIUSTAT,TIUSFLD,TIUD0,TIUD12,TIUD13,TIUD15
"RTN","TIUR",74,0)
 N TIUSVAL,TIUIFN
"RTN","TIUR",75,0)
 S TIUSFLD=$P(TIUPREF,U,3)
"RTN","TIUR",76,0)
 S TIUSFLD=$S(TIUSFLD="P":".02",TIUSFLD="D":".01",TIUSFLD="S":".05",TIUSFLD="C":"1507",TIUSFLD="A":"1202",TIUSFLD="E":"1208",1:"1301")
"RTN","TIUR",77,0)
 S TIUT=0 F  S TIUT=$O(TYPES(TIUT)) Q:+TIUT'>0  D
"RTN","TIUR",78,0)
 . S TIUTP=+$P($G(TYPES(TIUT)),U,2) Q:TIUTP'>0
"RTN","TIUR",79,0)
 . S TIUS=0 F  S TIUS=$O(STATUS(TIUS)) Q:+TIUS'>0  D
"RTN","TIUR",80,0)
 . . S TIUSTAT=$O(^TIU(8925.6,"B",$$UPPER^TIULS($P(STATUS(TIUS),U,3)),0))
"RTN","TIUR",81,0)
 . . Q:+TIUSTAT'>0
"RTN","TIUR",82,0)
 . . S TIUJ=LATE F  S TIUJ=$O(^TIU(8925,XREF,TIUI,TIUTP,TIUSTAT,TIUJ)) Q:+TIUJ'>0!(+TIUJ>EARLY)  D
"RTN","TIUR",83,0)
 . . . S TIUIFN=0
"RTN","TIUR",84,0)
 . . . F  S TIUIFN=$O(^TIU(8925,XREF,TIUI,TIUTP,TIUSTAT,TIUJ,TIUIFN)) Q:+TIUIFN'>0  D
"RTN","TIUR",85,0)
 . . . . I ($P(TIUPRM0,U,6)="S"),(+$$CANDO^TIULP(TIUIFN,"VIEW")'>0) Q
"RTN","TIUR",86,0)
 . . . . I +$G(ORVP),(+$P($G(^TIU(8925,+TIUIFN,0)),U,2)'=+$G(ORVP)) Q
"RTN","TIUR",87,0)
 . . . . I TIUTP=81,(+TYPES>1),($P(TYPES(TIUT),U,4)="NOT PICKED"),(+$P($G(^TIU(8925,+TIUIFN,0)),U,5)>6) Q
"RTN","TIUR",88,0)
 . . . . I TIUTP=81,(+TYPES>1),($P(TYPES(TIUT),U,4)="NOT PICKED"),'+$$DADINTYP(TIUIFN,.TYPES) Q
"RTN","TIUR",89,0)
 . . . . S TIUQ=$$RESOLVE(TIUIFN,TIUSFLD)
"RTN","TIUR",90,0)
 . . . . S ^TMP("TIUI",$J,TIUQ,TIUJ,TIUIFN)=""
"RTN","TIUR",91,0)
 Q
"RTN","TIUR",92,0)
DADINTYP(TIUDA,TYPES) ; addendum's parent belong?
"RTN","TIUR",93,0)
 N TIUI,TIUDTYP,TIUY S (TIUI,TIUY)=0
"RTN","TIUR",94,0)
 S TIUDTYP=+$G(^TIU(8925,+$P($G(^TIU(8925,+TIUDA,0)),U,6),0))
"RTN","TIUR",95,0)
 F  S TIUI=$O(TYPES(TIUI)) Q:+TIUI'>0!+TIUY  D
"RTN","TIUR",96,0)
 . I +$P(TYPES(TIUI),U,2)=TIUDTYP S TIUY=1
"RTN","TIUR",97,0)
 Q TIUY
"RTN","TIUR",98,0)
RESOLVE(DA,DR) ; resolve sort field values
"RTN","TIUR",99,0)
 N TIUD0,TIUD12,TIUD13,TIUD15,TIUY
"RTN","TIUR",100,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD12=$G(^TIU(8925,+DA,12))
"RTN","TIUR",101,0)
 S TIUD13=$G(^TIU(8925,+DA,13)),TIUD15=$G(^TIU(8925,+DA,15))
"RTN","TIUR",102,0)
 I DR=.01 S TIUY=$$PNAME^TIULC1(+TIUD0) G RESX
"RTN","TIUR",103,0)
 I DR=.02 S TIUY=$$PTNAME^TIULC1(+$P(TIUD0,U,2)) G RESX
"RTN","TIUR",104,0)
 I DR=.05 S TIUY=$P(TIUD0,U,5) G RESX
"RTN","TIUR",105,0)
 I DR=1202 S TIUY=$$PERSNAME^TIULC1(+$P(TIUD12,U,2)) S:TIUY="UNKNOWN" TIUY="" G RESX
"RTN","TIUR",106,0)
 I DR=1208 S TIUY=$$PERSNAME^TIULC1(+$P(TIUD12,U,8)) S:TIUY="UNKNOWN" TIUY="" G RESX
"RTN","TIUR",107,0)
 I DR=1301 S TIUY=$P(TIUD13,U) G RESX
"RTN","TIUR",108,0)
 I DR=1507,($P(TIUD0,U,5)=7),(+$P(TIUD15,U,7)'>0) S DR=1501
"RTN","TIUR",109,0)
 I DR=1501 S TIUY=$P(TIUD15,U) G RESX
"RTN","TIUR",110,0)
 I DR=1507 S TIUY=$P(TIUD15,U,7)
"RTN","TIUR",111,0)
RESX I $G(TIUY)']"" S TIUY="ZZZZEMPTY"
"RTN","TIUR",112,0)
 Q TIUY
"RTN","TIUR",113,0)
PUTLIST(TIUPREF) ; Expands list elements
"RTN","TIUR",114,0)
 N TIUJ,TIUQ,TIUDA,TIUPICK,TIUORDER
"RTN","TIUR",115,0)
 S TIUORDER=$S($P(TIUPREF,U,4)="A":1,1:-1)
"RTN","TIUR",116,0)
 S TIUPICK=+$O(^ORD(101,"B","TIU ACTION SELECT LIST ELEMENT",0))
"RTN","TIUR",117,0)
 S TIUQ="" F  S TIUQ=$O(^TMP("TIUI",$J,TIUQ),TIUORDER) Q:TIUQ']""  D
"RTN","TIUR",118,0)
 . S TIUJ=0 F  S TIUJ=$O(^TMP("TIUI",$J,TIUQ,TIUJ)) Q:+TIUJ'>0  D
"RTN","TIUR",119,0)
 . . S TIUDA=0 F  S TIUDA=$O(^TMP("TIUI",$J,TIUQ,TIUJ,TIUDA)) Q:+TIUDA'>0  D ADDELMNT(TIUDA,.TIUCNT)
"RTN","TIUR",120,0)
 S TIUS=1,STATUS=$$UPPER^TIULS($P(STATUS(1),U,3))
"RTN","TIUR",121,0)
 I +$G(STATUS(4))'>0 F  S TIUS=$O(STATUS(TIUS)) Q:+TIUS'>0  D
"RTN","TIUR",122,0)
 . S STATUS=STATUS_$S(TIUS=+STATUS(1):" & ",1:", ")_$$UPPER^TIULS($P(STATUS(TIUS),U,3))
"RTN","TIUR",123,0)
 I +$G(STATUS(4))>0 S STATUS=$S($P(STATUS(4),U,4)="ALL":"ALL",1:STATUS_", OTHER")
"RTN","TIUR",124,0)
 S ^TMP("TIUR",$J,0)=+$G(TIUCNT)_U_STATUS
"RTN","TIUR",125,0)
 S TIUJ=0,SCREEN="" F  S TIUJ=$O(SCREEN(TIUJ)) Q:+TIUJ'>0  D
"RTN","TIUR",126,0)
 . S SCREEN=$G(SCREEN)_$S(TIUJ>1:";",1:U)_SCREEN(TIUJ)
"RTN","TIUR",127,0)
 S ^TMP("TIUR",$J,0)=^TMP("TIUR",$J,0)_$G(SCREEN)
"RTN","TIUR",128,0)
 S ^TMP("TIUR",$J,"CLASS")=TIUCLASS
"RTN","TIUR",129,0)
 S ^TMP("TIUR",$J,"#")=TIUPICK_"^1:"_+$G(TIUCNT)
"RTN","TIUR",130,0)
 I $D(VALMHDR)>9 D HDR^TIURH
"RTN","TIUR",131,0)
 I +$G(TIUCNT)'>0 D
"RTN","TIUR",132,0)
 . S ^TMP("TIUR",$J,1,0)="",VALMCNT=2
"RTN","TIUR",133,0)
 . S ^TMP("TIUR",$J,2,0)="     No records found to satisfy search criteria."
"RTN","TIUR",134,0)
 Q
"RTN","TIUR",135,0)
ADDELMNT(DA,TIUCNT,APPEND) ; Add each element to the list
"RTN","TIUR",136,0)
 N DIC,DIQ,DR,TIUR,PT,MOM,ADT,DDT,LCT,AUT,AMD,EDT,SDT,XDT,RMD,TIULST4
"RTN","TIUR",137,0)
 N TIUP,TIUREC,TIUD0,TIUD12,TIUD13,TIUD15,TIULI,STATX,DOC
"RTN","TIUR",138,0)
 I '$D(^TIU(8925,DA,0)) Q
"RTN","TIUR",139,0)
 I $G(^TMP("TIUR",$J,2,0))="     No records found to satisfy search criteria." D
"RTN","TIUR",140,0)
 . S ^TMP("TIUR",$J,2,0)="",VALMCNT=2,TIUCNT=0
"RTN","TIUR",141,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD12=$G(^TIU(8925,+DA,12))
"RTN","TIUR",142,0)
 S TIUD13=$G(^TIU(8925,+DA,13)),TIUD15=$G(^TIU(8925,+DA,15))
"RTN","TIUR",143,0)
 ; I +TIUD0=81,($P(TIUD0,U,5)>5) Q
"RTN","TIUR",144,0)
 S DOC=$$PNAME^TIULC1(+TIUD0)
"RTN","TIUR",145,0)
 I DOC="Addendum" S DOC=DOC_" to "_$$PNAME^TIULC1(+$G(^TIU(8925,+$P(TIUD0,U,6),0)))
"RTN","TIUR",146,0)
 S PT=$$NAME^TIULS($$PTNAME^TIULC1($P(TIUD0,U,2)),"LAST,FI MI")
"RTN","TIUR",147,0)
 S TIULI=$E(PT)
"RTN","TIUR",148,0)
 I +$O(^TIU(8925,"DAD",+DA,0)),$$HASADDEN^TIULC1(DA) S PT="+ "_PT
"RTN","TIUR",149,0)
 S TIUP=$$URGENCY^TIURM(+DA)
"RTN","TIUR",150,0)
 S:TIUP=1 PT=$S(PT["+":"*",1:"* ")_PT
"RTN","TIUR",151,0)
 S TIULST4=$E($P($G(^DPT(+$P(TIUD0,U,2),0)),U,9),6,9)
"RTN","TIUR",152,0)
 S TIULST4="("_TIULI_TIULST4_")"
"RTN","TIUR",153,0)
 S ADT=$$DATE^TIULS($P(TIUD0,U,7),"MM/DD/YY")
"RTN","TIUR",154,0)
 S DDT=$$DATE^TIULS($P(TIUD0,U,8),"MM/DD/YY")
"RTN","TIUR",155,0)
 S AMD=$$PERSNAME^TIULC1($P(TIUD12,U,8)) S:AMD="UNKNOWN" AMD=""
"RTN","TIUR",156,0)
 S AUT=$$PERSNAME^TIULC1($P(TIUD12,U,2)) S:AUT="UNKNOWN" AUT=""
"RTN","TIUR",157,0)
 S AMD=$$NAME^TIULS(AMD,"LAST, FI MI")
"RTN","TIUR",158,0)
 S AUT=$$NAME^TIULS(AUT,"LAST, FI MI")
"RTN","TIUR",159,0)
 S EDT=$$DATE^TIULS($P(TIUD13,U),"MM/DD/YY")
"RTN","TIUR",160,0)
 S SDT=$S(+$P(TIUD15,U,7):+$P(TIUD15,U,7),+$P(TIUD0,U,5)'<7:+$P(TIUD15,U),1:"")
"RTN","TIUR",161,0)
 S SDT=$$DATE^TIULS(SDT,"MM/DD/YY")
"RTN","TIUR",162,0)
 S STATX=$P($G(^TIU(8925.6,+$P(TIUD0,U,5),0)),U)
"RTN","TIUR",163,0)
 S TIUCNT=+$G(TIUCNT)+1
"RTN","TIUR",164,0)
 S TIUREC=$$SETFLD^VALM1(TIUCNT,"","NUMBER")
"RTN","TIUR",165,0)
 S TIUREC=$$SETFLD^VALM1(PT,TIUREC,"PATIENT NAME")
"RTN","TIUR",166,0)
 S TIUREC=$$SETFLD^VALM1(TIULST4,TIUREC,"LAST I/LAST 4")
"RTN","TIUR",167,0)
 S TIUREC=$$SETFLD^VALM1(DOC,TIUREC,"DOCUMENT TYPE")
"RTN","TIUR",168,0)
 S TIUREC=$$SETFLD^VALM1(EDT,TIUREC,"REF DATE")
"RTN","TIUR",169,0)
 S TIUREC=$$SETFLD^VALM1($$LOWER^TIULS(STATX),TIUREC,"STATUS")
"RTN","TIUR",170,0)
 S TIUREC=$$SETFLD^VALM1(SDT,TIUREC,"SIG DATE")
"RTN","TIUR",171,0)
 S TIUREC=$$SETFLD^VALM1(AUT,TIUREC,"AUTHOR")
"RTN","TIUR",172,0)
 S TIUREC=$$SETFLD^VALM1(AMD,TIUREC,"COSIGNER")
"RTN","TIUR",173,0)
 S VALMCNT=+$G(VALMCNT)+1,^TMP("TIUR",$J,TIUCNT,0)=TIUREC
"RTN","TIUR",174,0)
 S ^TMP("TIUR",$J,"IDX",VALMCNT,TIUCNT)="" W:TIUCNT#10'>0 "."
"RTN","TIUR",175,0)
 S ^TMP("TIURIDX",$J,TIUCNT)=VALMCNT_U_DA
"RTN","TIUR",176,0)
 D FLDCTRL^VALM10(TIUCNT,"NUMBER",IOINHI,IOINORM)
"RTN","TIUR",177,0)
 I +$G(APPEND) D
"RTN","TIUR",178,0)
 . D RESTORE^VALM10(TIUCNT)
"RTN","TIUR",179,0)
 . D CNTRL^VALM10(TIUCNT,1,$G(VALM("RM")),IOINHI,IOINORM),HDR^TIURH
"RTN","TIUR",180,0)
 . S VALMSG="** Item(s) #"_$$ITMLIST(TIUCNT,$G(VALMSG))_" Added **"
"RTN","TIUR",181,0)
 . S $P(^TMP("TIUR",$J,0),U)=+$G(TIUCNT)
"RTN","TIUR",182,0)
 . S $P(^TMP("TIUR",$J,"#"),":",2)=+$G(TIUCNT)
"RTN","TIUR",183,0)
 . I $D(VALMHDR)>9 D HDR^TIURH
"RTN","TIUR",184,0)
 Q
"RTN","TIUR",185,0)
ITMLIST(TIUITM,TIUMSG) ; Add Message
"RTN","TIUR",186,0)
 N TIULIST
"RTN","TIUR",187,0)
 I $E($G(TIUMSG),1,7)'="** Item" S TIULIST=TIUITM G ITMLISTX
"RTN","TIUR",188,0)
 S TIULIST=$P($P($G(TIUMSG)," Added **"),"#",2)_" & "_TIUITM
"RTN","TIUR",189,0)
ITMLISTX Q $G(TIULIST)
"RTN","TIUR",190,0)
CLEAN ; Clean up your mess!
"RTN","TIUR",191,0)
 K ^TMP("TIUR",$J),^TMP("TIURIDX",$J) D CLEAN^VALM10
"RTN","TIUR",192,0)
 K VALMY
"RTN","TIUR",193,0)
 Q
"RTN","TIURA")
0^156^B65822919
"RTN","TIURA",1,0)
TIURA ; SLC/JER - Review screen actions ;11/17/94  13:23
"RTN","TIURA",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURA",3,0)
EDIT ; Edit Documents
"RTN","TIURA",4,0)
 N TIUDA,DFN,TIUDDT,TIUDATA,TIUCHNG,TIUEDIT,TIUI,TIULST,DIROUT
"RTN","TIURA",5,0)
 S TIUI=0
"RTN","TIURA",6,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURA",7,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURA",8,0)
 . N TIUCHNG
"RTN","TIURA",9,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURA",10,0)
 . D CLEAR^VALM1 W !!,"Editing #",+TIUDATA
"RTN","TIURA",11,0)
 . S TIUDA=+$P(TIUDATA,U,2) I +$D(^TIU(8925,+TIUDA,0)) D EDIT1
"RTN","TIURA",12,0)
 . I +$G(TIUCHNG)=1,$D(^TIU(8925,+TIUDA,0)) D
"RTN","TIURA",13,0)
 . . S TIULST=$G(TIULST)_$S($G(TIULST)]"":", ",1:"")_TIUI
"RTN","TIURA",14,0)
 . . I $D(^TMP("TIUR",$J,"CTXT")) Q
"RTN","TIURA",15,0)
 . . I $D(VALMDDF("ADMISSION DATE")) D UPDATEM^TIURL(TIUDATA) Q
"RTN","TIURA",16,0)
 . . I '$D(^TMP("TIUR",$J,"CTXT")),$D(VALMDDF("REF DATE")) D UPDATE^TIURL(TIUDATA)
"RTN","TIURA",17,0)
 . I +$G(TIUCHNG)=2,+$P(TIUCHNG,U,2) D
"RTN","TIURA",18,0)
 . . N TIUITEM S TIUITEM=+$G(^TMP("TIUR",$J,0))
"RTN","TIURA",19,0)
 . . S VALMSG="** Addendum added "
"RTN","TIURA",20,0)
 . . S VALMSG=VALMSG_$S($D(^TMP("TIUR",$J,"CTXT")):"**",1:"as item #"_(TIUITEM+1)_" **")
"RTN","TIURA",21,0)
 . . I $D(^TMP("TIUR",$J,"CTXT")) Q
"RTN","TIURA",22,0)
 . . I $D(VALMDDF("REF DATE")) D ADDELMNT^TIUR(+$P(TIUCHNG,U,2),+TIUITEM,1)
"RTN","TIURA",23,0)
 . . I '$D(VALMDDF("REF DATE")) D ADDELMNT^TIURM(+$P(TIUCHNG,U,2),+TIUITEM,1)
"RTN","TIURA",24,0)
 . I '+$G(TIUCHNG)!(+$G(TIUCHNG)=2)!$D(^TMP("TIUR",$J,"CTXT")) D RESTORE^TIULM(+TIUI)
"RTN","TIURA",25,0)
 . I $D(^TMP("TIUR",$J,"CTXT")) Q
"RTN","TIURA",26,0)
 . I '$D(^TIU(8925,+TIUDA,0)) D REMOVE^TIULM(TIUDATA) S TIULST=$G(TIULST)_$S($G(TIULST)]"":", ",1:"")_TIUI
"RTN","TIURA",27,0)
 I $G(TIULST)]"" S VALMSG="** Item"_$S($L(TIULST,",")>1:"s ",$L(TIULST,"-")>1:"s ",1:" ")_TIULST_" Edited. **"
"RTN","TIURA",28,0)
 E  S:$G(VALMSG)']"" VALMSG="** No changes made... **"
"RTN","TIURA",29,0)
 W !,"Refreshing the list." I $D(^TMP("TIUR",$J,"CTXT")) D RBLD^TIUROR
"RTN","TIURA",30,0)
 K VALMY S VALMBCK=$S(+$O(^TMP("TIUR",$J,0))>0:"R",1:"Q")
"RTN","TIURA",31,0)
 Q
"RTN","TIURA",32,0)
EDIT1 ; Single record edit
"RTN","TIURA",33,0)
 ; Receives TIUDA
"RTN","TIURA",34,0)
 N %X,%Y,C,D,D0,DDWTMP,DFN,DI,DIC,TIUEDIT,TIUMSG,TIUQUIT,TIUADD,TIUREL
"RTN","TIURA",35,0)
 N TIUTYP,TIUT0,TIUDPRM,TIULDT,DIWESUB
"RTN","TIURA",36,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIURA",37,0)
 I '+$G(TIUDA) W !,"No Documents selected." H 2 Q
"RTN","TIURA",38,0)
 ; Evaluate whether user can edit record
"RTN","TIURA",39,0)
 S TIUEDIT=$$CANDO^TIULP(TIUDA,"EDIT RECORD")
"RTN","TIURA",40,0)
 ; if 'canedit, offer explanation, and opportunity to add an addendum
"RTN","TIURA",41,0)
 ; (no addenda to addenda)
"RTN","TIURA",42,0)
 I '+TIUEDIT D  Q
"RTN","TIURA",43,0)
 . K ^TIU(8925,"ASAVE",DUZ,TIUDA) ; Remove Save Flag
"RTN","TIURA",44,0)
 . W !,$C(7),$P(TIUEDIT,U,2) ; Echo denial message
"RTN","TIURA",45,0)
 . D ADDENDUM^TIUADD(TIUDA,"",.TIUCHNG)
"RTN","TIURA",46,0)
 S TIUTYP=+$G(^TIU(8925,+TIUDA,0)),TIUT0=$G(^TIU(8925.1,+TIUTYP,0))
"RTN","TIURA",47,0)
 S TIUTYP(1)="1^"_+TIUTYP_U_$P(TIUT0,U,3)_U
"RTN","TIURA",48,0)
 S DFN=$P($G(^TIU(8925,+TIUDA,0)),U,2),TIULDT=$P(^(0),U,8)
"RTN","TIURA",49,0)
 D GETTIU^TIULD(.TIU,TIUDA)
"RTN","TIURA",50,0)
 S DIWESUB="Patient: "_$G(TIU("PNM"))
"RTN","TIURA",51,0)
 D DIE^TIUEDIT(TIUDA,.TIUQUIT,.TIUCHNG)
"RTN","TIURA",52,0)
 I $$EMPTYDOC^TIULF(TIUDA) D DELETE^TIUEDIT(TIUDA,0) Q
"RTN","TIURA",53,0)
 Q:+$G(TIUQUIT)
"RTN","TIURA",54,0)
 I +$G(TIU("STOP")) D DEFER^TIUVSIT(TIUDA,TIU("STOP")) I 1
"RTN","TIURA",55,0)
 E  I +$P($G(^TIU(8925,+TIUDA,0)),U,3)'>0 D QUE^TIUPXAP1
"RTN","TIURA",56,0)
 ;   i. Execute RELEASE logic
"RTN","TIURA",57,0)
 D RELEASE^TIUT(+TIUDA)
"RTN","TIURA",58,0)
 ;  ii. Execute VERIFICATION logic
"RTN","TIURA",59,0)
 D VERIFY^TIUT(+TIUDA)
"RTN","TIURA",60,0)
 ; iii. Execute ES logic
"RTN","TIURA",61,0)
 D EDSIG^TIURS(+TIUDA,"",1)
"RTN","TIURA",62,0)
 I $D(^TMP("TIUR",$J,"CTXT")),(+$P($G(^TIU(8925,+TIUDA,0)),U,5)'<6) S VALMBCK="Q"
"RTN","TIURA",63,0)
 ; I +TIUTYP'>0 S TIUTYP=+$G(^TIU(8925,+TIUDA,0))
"RTN","TIURA",64,0)
 ; --- If required, prompt for print
"RTN","TIURA",65,0)
 ; D DOCPRM^TIULC1(+TIUTYP,.TIUDPRM)
"RTN","TIURA",66,0)
 ; I +$P($G(TIUDPRM(0)),U,8) D PRINT^TIUEPRNT(TIUDA)
"RTN","TIURA",67,0)
 Q
"RTN","TIURA",68,0)
PRINT ; Print selected documents
"RTN","TIURA",69,0)
 N DFN,TIUDA,TIUDARR,TIUDATA,TIUI,DIROUT,TIUDE,POP
"RTN","TIURA",70,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0)) G:$D(VALMY)'>9 PRINTX
"RTN","TIURA",71,0)
 D CLEAR^VALM1
"RTN","TIURA",72,0)
 S TIUDEV=$$DEVICE^TIUDEV(.IO) ; Get Device/allow queueing
"RTN","TIURA",73,0)
 I $S(IO']"":1,TIUDEV']"":1,1:0) G PRINTX
"RTN","TIURA",74,0)
 I $D(IO("Q")) D QUE^TIUDEV("PRINTN^TIURA",TIUDEV) G PRINTX
"RTN","TIURA",75,0)
 D PRINTN
"RTN","TIURA",76,0)
PRINTX D ^%ZISC,FIXLST^TIULM
"RTN","TIURA",77,0)
 K VALMY S VALMBCK="R"
"RTN","TIURA",78,0)
 Q
"RTN","TIURA",79,0)
PRINTN ; Loop through selected doc's & invoke print code as appropriate
"RTN","TIURA",80,0)
 N TIUI,TIUTYP,TIUDARR,DFN K ^TMP("TIUPR",$J)
"RTN","TIURA",81,0)
 U IO
"RTN","TIURA",82,0)
 S TIUI=0
"RTN","TIURA",83,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURA",84,0)
 . N TIUPMTHD,TIUDTYP,TIUPFHDR,TIUPFNBR,TIUPGRP,TIUPRINT
"RTN","TIURA",85,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURA",86,0)
 . S TIUDA=+$P(TIUDATA,U,2),TIUTYP=$P(^TIU(8925,TIUDA,0),U)
"RTN","TIURA",87,0)
 . ; Evaluate whether user can print record
"RTN","TIURA",88,0)
 . S TIUPRINT=$$CANDO^TIULP(TIUDA,"PRINT RECORD")
"RTN","TIURA",89,0)
 . I +TIUPRINT'>0 D  Q  ; Exclude records user can't print
"RTN","TIURA",90,0)
 . . W !!,"Item #",TIUI,": ",!,$P(TIUPRINT,U,2),!
"RTN","TIURA",91,0)
 . . I IO=IO(0),'$D(ZTQUEUED),$$READ^TIUU("EA","RETURN to continue...")
"RTN","TIURA",92,0)
 . S DFN=$P($G(^TIU(8925,+TIUDA,0)),U,2)
"RTN","TIURA",93,0)
 . I +TIUTYP D
"RTN","TIURA",94,0)
 . . S TIUPMTHD=$$PRNTMTHD^TIULG(+TIUTYP)
"RTN","TIURA",95,0)
 . . S TIUPGRP=$$PRNTGRP^TIULG(+TIUTYP)
"RTN","TIURA",96,0)
 . . S TIUPFHDR=$$PRNTHDR^TIULG(+TIUTYP)
"RTN","TIURA",97,0)
 . . S TIUPFNBR=$$PRNTNBR^TIULG(+TIUTYP)
"RTN","TIURA",98,0)
 . I $G(TIUPMTHD)']"",+$$ISADDNDM^TIULC1(TIUDA) D
"RTN","TIURA",99,0)
 . . S TIUDTYP=+$G(^TIU(8925,+$P($G(^TIU(8925,TIUDA,0)),U,6),0))
"RTN","TIURA",100,0)
 . . I +TIUDTYP S TIUPMTHD=$$PRNTMTHD^TIULG(+TIUDTYP),TIUPGRP=$$PRNTGRP^TIULG(+TIUDTYP),TIUPFHDR=$$PRNTHDR^TIULG(+TIUDTYP),TIUPFNBR=$$PRNTNBR^TIULG(+TIUDTYP)
"RTN","TIURA",101,0)
 . . S TIUDA=+$P($G(^TIU(8925,TIUDA,0)),U,6)
"RTN","TIURA",102,0)
 . I $G(TIUPMTHD)]"",+$G(TIUPGRP),($G(TIUPFHDR)]""),($G(TIUPFNBR)]"") S TIUDARR(TIUPMTHD,$G(TIUPGRP)_"$"_TIUPFHDR_";"_DFN,TIUI,TIUDA)=TIUPFNBR
"RTN","TIURA",103,0)
 . E  S TIUDARR(TIUPMTHD,DFN,TIUI,TIUDA)=""
"RTN","TIURA",104,0)
 . D:'$D(ZTQUEUED) RESTORE^TIULM(+TIUI)
"RTN","TIURA",105,0)
 S TIUPMTHD="" F  S TIUPMTHD=$O(TIUDARR(TIUPMTHD)) Q:TIUPMTHD=""  D
"RTN","TIURA",106,0)
 . D PRNTDOC(TIUPMTHD,.TIUDARR)
"RTN","TIURA",107,0)
 Q
"RTN","TIURA",108,0)
PRINT1 ; Print a single document
"RTN","TIURA",109,0)
 N TIUDARR,TIUDEV,TIUTYP,DFN,TIUPMTHD,TIUD0,TIUDPRM,TIUFLAG,TIUDTYPE
"RTN","TIURA",110,0)
 N TIUPGRP,TIUPFHDR,TIUPFNBR,TIUPRINT,POP
"RTN","TIURA",111,0)
 D CLEAR^VALM1
"RTN","TIURA",112,0)
 S TIUPRINT=$$CANDO^TIULP(TIUDA,"PRINT RECORD")
"RTN","TIURA",113,0)
 I +TIUPRINT'>0 D  Q  ; Exclude records user can't print
"RTN","TIURA",114,0)
 . W !!,$C(7),$P(TIUPRINT,U,2),! ; Echo denial message
"RTN","TIURA",115,0)
 . I $$READ^TIUU("EA","RETURN to continue...") ; pause
"RTN","TIURA",116,0)
 S TIUD0=$G(^TIU(8925,TIUDA,0))
"RTN","TIURA",117,0)
 S TIUTYP=$P(TIUD0,U),DFN=$P(TIUD0,U,2)
"RTN","TIURA",118,0)
 I +TIUTYP'>0 Q
"RTN","TIURA",119,0)
 S TIUPMTHD=$$PRNTMTHD^TIULG(+TIUTYP)
"RTN","TIURA",120,0)
 S TIUPGRP=$$PRNTGRP^TIULG(+TIUTYP)
"RTN","TIURA",121,0)
 S TIUPFHDR=$$PRNTHDR^TIULG(+TIUTYP)
"RTN","TIURA",122,0)
 S TIUPFNBR=$$PRNTNBR^TIULG(+TIUTYP)
"RTN","TIURA",123,0)
 I $G(TIUPMTHD)']"",+$$ISADDNDM^TIULC1(TIUDA) D
"RTN","TIURA",124,0)
 . S TIUDTYP=+$G(^TIU(8925,+$P($G(^TIU(8925,TIUDA,0)),U,6),0))
"RTN","TIURA",125,0)
 . I +TIUDTYP S TIUPMTHD=$$PRNTMTHD^TIULG(+TIUDTYP),TIUPGRP=$$PRNTGRP^TIULG(+TIUDTYP),TIUPFHDR=$$PRNTHDR^TIULG(+TIUDTYP),TIUPFNBR=$$PRNTNBR^TIULG(+TIUDTYP)
"RTN","TIURA",126,0)
 . S TIUDA=+$P($G(^TIU(8925,TIUDA,0)),U,6)
"RTN","TIURA",127,0)
 D DOCPRM^TIULC1(+TIUTYP,.TIUDPRM,TIUDA)
"RTN","TIURA",128,0)
 I +$P($G(TIUDPRM(0)),U,9) S TIUFLAG=$$FLAG^TIUPRPN3
"RTN","TIURA",129,0)
 I (+$P($G(TIUDPRM(0)),U,9)'>0),+$$ISA^USRLM(DUZ,"MEDICAL INFORMATION SECTION") S TIUFLAG=$$FLAG^TIUPRPN3
"RTN","TIURA",130,0)
 I $G(TIUPMTHD)]"",+$G(TIUPGRP),($G(TIUPFHDR)]""),($G(TIUPFNBR)]"") S TIUDARR(TIUPMTHD,$G(TIUPGRP)_"$"_TIUPFHDR_";"_DFN,1,TIUDA)=TIUPFNBR
"RTN","TIURA",131,0)
 E  S TIUDARR(TIUPMTHD,DFN,1,TIUDA)=""
"RTN","TIURA",132,0)
 I $G(TIUPMTHD)']"" W !,$C(7),"No Print Method Defined for ",$P($G(^TIU(8925.1,+TIUTYP,0)),U) H 2 G PRINT1X
"RTN","TIURA",133,0)
 S TIUDEV=$$DEVICE^TIUDEV(.IO) ; Get Device/allow queueing
"RTN","TIURA",134,0)
 I $S(IO']"":1,TIUDEV']"":1,1:0) G PRINT1X
"RTN","TIURA",135,0)
 I $D(IO("Q")) D QUE^TIUDEV("PRINTQ^TIURA",TIUDEV) G PRINT1X
"RTN","TIURA",136,0)
 D PRINTQ
"RTN","TIURA",137,0)
PRINT1X ; Exit single document print
"RTN","TIURA",138,0)
 D ^%ZISC
"RTN","TIURA",139,0)
 Q
"RTN","TIURA",140,0)
PRINTQ ; Entry point for queued single document print
"RTN","TIURA",141,0)
 D PRNTDOC(TIUPMTHD,.TIUDARR)
"RTN","TIURA",142,0)
 Q
"RTN","TIURA",143,0)
PRNTDOC(TIUPMTHD,TIUDARR) ; Print a single document type
"RTN","TIURA",144,0)
 ; Receives TIUPMTHD & TIUDARR
"RTN","TIURA",145,0)
 N TIUDA
"RTN","TIURA",146,0)
 I '+$D(TIUDARR) W !,"No Documents selected." Q
"RTN","TIURA",147,0)
 M ^TMP("TIUPR",$J)=TIUDARR(TIUPMTHD)
"RTN","TIURA",148,0)
 I TIUPMTHD']"" D  G PRNTDOCX
"RTN","TIURA",149,0)
 . W !!,"No Print Method Defined for ",$P(TIUTYP,U,2) H 2
"RTN","TIURA",150,0)
 X TIUPMTHD
"RTN","TIURA",151,0)
PRNTDOCX ; Exit single document type print
"RTN","TIURA",152,0)
 K ^TMP("TIUPR",$J)
"RTN","TIURA",153,0)
 Q
"RTN","TIURA",154,0)
DISPLAY ; Detailed Display (audit trail) of Selected Documents
"RTN","TIURA",155,0)
 N TIUDA,TIUD,TIUDATA,TIUI,Y,DIROUT,TIUQUIT
"RTN","TIURA",156,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURA",157,0)
 S TIUI=0
"RTN","TIURA",158,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(TIUQUIT)
"RTN","TIURA",159,0)
 . N TIUVIEW
"RTN","TIURA",160,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURA",161,0)
 . D CLEAR^VALM1
"RTN","TIURA",162,0)
 . W !!,"Reviewing #",+TIUDATA
"RTN","TIURA",163,0)
 . S TIUDA=+$P(TIUDATA,U,2)
"RTN","TIURA",164,0)
 . S TIUVIEW=$$CANDO^TIULP(TIUDA,"VIEW")
"RTN","TIURA",165,0)
 . I +TIUVIEW'>0 D  Q  ; Exclude records user can't print
"RTN","TIURA",166,0)
 . . W !!,$C(7),$P(TIUVIEW,U,2),! ; Echo denial message
"RTN","TIURA",167,0)
 . . I $$READ^TIUU("EA","RETURN to continue...") ; pause
"RTN","TIURA",168,0)
 . . D RESTORE^TIULM(+TIUI)
"RTN","TIURA",169,0)
 . D EN^TIUAUDIT
"RTN","TIURA",170,0)
 . I +$G(TIUQUIT) D FIXLST^TIULM Q
"RTN","TIURA",171,0)
 . D RESTORE^TIULM(+TIUI)
"RTN","TIURA",172,0)
 K VALMY S VALMBCK="R"
"RTN","TIURA",173,0)
 Q
"RTN","TIURA",174,0)
BROWSE(TIULTMP) ; Browse selected discharge summaries
"RTN","TIURA",175,0)
 ; TIULTMP is list template name
"RTN","TIURA",176,0)
 N TIUDA,DFN,TIU,TIUCHNG,TIUDATA,TIUI,Y,DIROUT,TIUQUIT
"RTN","TIURA",177,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURA",178,0)
 S TIUI=0
"RTN","TIURA",179,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(TIUQUIT)
"RTN","TIURA",180,0)
 . N TIUVIEW
"RTN","TIURA",181,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURA",182,0)
 . S TIUDA=+$P(TIUDATA,U,2)
"RTN","TIURA",183,0)
 . D CLEAR^VALM1
"RTN","TIURA",184,0)
 . W !!,"Reviewing Item #",TIUI D BROWS1(TIULTMP)
"RTN","TIURA",185,0)
 . I +$G(TIUCHNG)=1 D
"RTN","TIURA",186,0)
 . . I $D(^TMP("TIUR",$J,"CTXT")) Q
"RTN","TIURA",187,0)
 . . I $D(VALMDDF("ADMISSION DATE")) D UPDATEM^TIURL(TIUDATA) Q
"RTN","TIURA",188,0)
 . . I '$D(^TMP("TIUR",$J,"CTXT")),$D(VALMDDF("REF DATE")) D UPDATE^TIURL(TIUDATA)
"RTN","TIURA",189,0)
 . I '+$G(TIUCHNG)!$D(^TMP("TIUR",$J,"CTXT")) D RESTORE^TIULM(+TIUI)
"RTN","TIURA",190,0)
 ; Revise list as appropriate and cycle back
"RTN","TIURA",191,0)
 I $D(^TMP("TIUR",$J,"CTXT")) D RBLD^TIUROR
"RTN","TIURA",192,0)
 K VALMY S VALMBCK="R"
"RTN","TIURA",193,0)
 Q
"RTN","TIURA",194,0)
BROWS1(TIULTMP) ; Browse single summary
"RTN","TIURA",195,0)
 ; Receives: TIUDA     Calls EN^VALM
"RTN","TIURA",196,0)
 N %DT,C,D0,DIQ2,FINISH,TIU,TIUVIEW
"RTN","TIURA",197,0)
 S TIUVIEW=$$CANDO^TIULP(TIUDA,"VIEW")
"RTN","TIURA",198,0)
 I +TIUVIEW'>0 D  Q  ; Exclude records user can't view
"RTN","TIURA",199,0)
 . W !!,$C(7),$P(TIUVIEW,U,2),! ; Echo denial message
"RTN","TIURA",200,0)
 . I $$READ^TIUU("EA","RETURN to continue...") ; pause
"RTN","TIURA",201,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIURA",202,0)
 D EN^VALM(TIULTMP)
"RTN","TIURA",203,0)
 K ^TMP("TIUVIEW",$J)
"RTN","TIURA",204,0)
 Q
"RTN","TIURA1")
0^157^B24835961
"RTN","TIURA1",1,0)
TIURA1 ; SLC/JER - Review screen actions ;11/17/94  13:23
"RTN","TIURA1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURA1",3,0)
ADDEND ; Make addenda
"RTN","TIURA1",4,0)
 N TIUDA,TIUDATA,TIUCHNG,TIUI,TIULST,DIROUT
"RTN","TIURA1",5,0)
 S TIUI=0
"RTN","TIURA1",6,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURA1",7,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURA1",8,0)
 . N TIUCHNG
"RTN","TIURA1",9,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURA1",10,0)
 . D CLEAR^VALM1 W !!,"Making an addendum for #",+TIUDATA
"RTN","TIURA1",11,0)
 . S TIUDA=+$P(TIUDATA,U,2) I +$D(^TIU(8925,+TIUDA,0)) D ADDEND1
"RTN","TIURA1",12,0)
 . I +$G(TIUCHNG)>0,$D(^TIU(8925,+TIUDA,0)),'$D(^TMP("TIUR",$J,"CTXT")) D UPDATE^TIURL(TIUDATA)
"RTN","TIURA1",13,0)
 . I +$G(TIUCHNG)=2,+$P(TIUCHNG,U,2) D
"RTN","TIURA1",14,0)
 . . N TIUITEM S TIUITEM=+$G(^TMP("TIUR",$J,0))
"RTN","TIURA1",15,0)
 . . I '$D(^TMP("TIUR",$J,"CTXT")) D
"RTN","TIURA1",16,0)
 . . . D ADDELMNT^TIUR(+$P(TIUCHNG,U,2),+TIUITEM,1)
"RTN","TIURA1",17,0)
 . . . S VALMSG="** Addendum added as item #"_(TIUITEM+1)_" **"
"RTN","TIURA1",18,0)
 . I '+$G(TIUCHNG)!(+$G(TIUCHNG)=2)!$D(^TMP("TIUR",$J,"CTXT")) D RESTORE^TIULM(+TIUI)
"RTN","TIURA1",19,0)
 W !,"Refreshing the list." I $D(^TMP("TIUR",$J,"CTXT")) D RBLD^TIUROR
"RTN","TIURA1",20,0)
 K VALMY S VALMBCK="R"
"RTN","TIURA1",21,0)
 Q
"RTN","TIURA1",22,0)
ADDEND1 ; Single record Addendum
"RTN","TIURA1",23,0)
 ; Receives TIUDA
"RTN","TIURA1",24,0)
 N %X,%Y,C,D,D0,DDWTMP,DFN,DI,DIC,TIUEDIT,TIUMSG,TIUQUIT,TIUADD,TIUREL
"RTN","TIURA1",25,0)
 N TIUTYP,TIUT0,TIUDPRM
"RTN","TIURA1",26,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIURA1",27,0)
 I '+$G(TIUDA) W !,"No Documents selected." H 2 Q
"RTN","TIURA1",28,0)
 D ADDENDUM^TIUADD(TIUDA,"",.TIUCHNG,1)
"RTN","TIURA1",29,0)
 Q
"RTN","TIURA1",30,0)
NAME ; Identify signer(s)
"RTN","TIURA1",31,0)
 N TIUCHNG,TIUDA,DFN,TIU,TIUDATA,TIUEDIT,TIUI,TIUY,TIULST,Y,DIROUT
"RTN","TIURA1",32,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURA1",33,0)
 S TIUI=0
"RTN","TIURA1",34,0)
 I +$O(VALMY(0)) D FULL^VALM1
"RTN","TIURA1",35,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURA1",36,0)
 . N TIU,VALMY,XQORM
"RTN","TIURA1",37,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURA1",38,0)
 . S TIUDA=+$P(TIUDATA,U,2)
"RTN","TIURA1",39,0)
 . D SIGNER
"RTN","TIURA1",40,0)
 . I +$G(TIUCHNG) D UPDATE^TIURL(TIUDATA) S TIULST=$G(TIULST)_$S($G(TIULST)]"":", ",1:"")_TIUI
"RTN","TIURA1",41,0)
 . I '+$G(TIUCHNG) D RESTORE^TIULM(+TIUI)
"RTN","TIURA1",42,0)
 . K VALMY(TIUI)
"RTN","TIURA1",43,0)
 I $G(TIULST)]"" S VALMSG="** Additional signatures now expected for Item"_$S($L(TIULST,",")>1:"s ",$L(TIULST,"-")>1:"s ",1:" ")_TIULST_" **"
"RTN","TIURA1",44,0)
 E  S VALMSG="** No changes made... **"
"RTN","TIURA1",45,0)
 W !,"Refreshing the list."
"RTN","TIURA1",46,0)
NAMEX ; Revise list and cycle back as appropriate
"RTN","TIURA1",47,0)
 K VALMY S VALMBCK="R"
"RTN","TIURA1",48,0)
 Q
"RTN","TIURA1",49,0)
SIGNER ; Link selected document to additional signers
"RTN","TIURA1",50,0)
 ; Receives TIUDA as pointer to document record
"RTN","TIURA1",51,0)
 N TIULIST,TIUI,TIUMORE,TIUCANID S (TIUCHNG,TIUI)=0,TIUMORE=1
"RTN","TIURA1",52,0)
 S TIUCANID=$$CANDO^TIULP(TIUDA,"IDENTIFY SIGNERS")
"RTN","TIURA1",53,0)
 I +$$MAYCHNG(TIUDA) D  Q:'TIUMORE
"RTN","TIURA1",54,0)
 . N TIUPRMT S TIUPRMT="Do you Wish to Identify Additional Signers"
"RTN","TIURA1",55,0)
 . D CHNGCSNR(TIUDA) S TIUCHNG=1
"RTN","TIURA1",56,0)
 . I +$G(TIUCANID) S TIUMORE=$$READ^TIUU("YO",TIUPRMT,"NO")
"RTN","TIURA1",57,0)
 . I +$G(TIUCANID)'>0 S TIUMORE=0
"RTN","TIURA1",58,0)
 I +$G(TIUCANID)'>0 D  Q
"RTN","TIURA1",59,0)
 . W !!,$C(7),$P(TIUCANID,U,2),! ; Echo denial message
"RTN","TIURA1",60,0)
 . I $$READ^TIUU("EA","RETURN to continue...") ; pause
"RTN","TIURA1",61,0)
 I +$O(^TIU(8925.7,"B",TIUDA,0)) D  Q:+TIUMORE'>0
"RTN","TIURA1",62,0)
 . N DIE,DA,DR,TIUY,TIUPRMT
"RTN","TIURA1",63,0)
 . W !,"This Document Already has Additional Expected Signers."
"RTN","TIURA1",64,0)
 . D XTRASIGN^TIULX(.TIUY,TIUDA) Q:+$O(TIUY(0))'>0
"RTN","TIURA1",65,0)
 . S DA=+$$ASKSIGN^TIULX(.TIUY) Q:+DA'>0
"RTN","TIURA1",66,0)
 . S DIE=8925.7,DR=".03;I +X>0 S Y=""@1"";.01///@;@1" D ^DIE
"RTN","TIURA1",67,0)
 . D SEND^TIUALRT(TIUDA) S TIUCHNG=1
"RTN","TIURA1",68,0)
 . S TIUPRMT="Do You Wish to Identify More Additional Signers"
"RTN","TIURA1",69,0)
 . S TIUMORE=$$READ^TIUU("Y",TIUPRMT,"NO")
"RTN","TIURA1",70,0)
 D PERSEL(.TIULIST,TIUDA) Q:+$D(TIULIST)'>9
"RTN","TIURA1",71,0)
 F  S TIUI=$O(TIULIST(TIUI)) Q:+TIUI'>0  D
"RTN","TIURA1",72,0)
 . N DA,DIC,DIE,DR,X,Y
"RTN","TIURA1",73,0)
 . S X=""""_"`"_TIUDA_"""",(DIC,DLAYGO)=8925.7,DIC(0)="LX" D ^DIC Q:+Y'>0
"RTN","TIURA1",74,0)
 . S DIE=DIC
"RTN","TIURA1",75,0)
 . S DR=".02////"_0_";.03////"_+$G(TIULIST(TIUI))
"RTN","TIURA1",76,0)
 . D ^DIE
"RTN","TIURA1",77,0)
 . W !,$$SIGNAME^TIULS(+TIULIST(TIUI))," Added as expected signer..." H 2
"RTN","TIURA1",78,0)
 . D SEND^TIUALRT(TIUDA)
"RTN","TIURA1",79,0)
 . S TIUCHNG=1 K VALMY(TIUI)
"RTN","TIURA1",80,0)
 Q
"RTN","TIURA1",81,0)
MAYCHNG(TIUDA) ; Boolean function - can cosigner be modified?
"RTN","TIURA1",82,0)
 N TIUD0,TIUD12,TIUY,TIUAUTH,TIUESNR,TIUECSNR S TIUY=0
"RTN","TIURA1",83,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD12=$G(^TIU(8925,+TIUDA,12))
"RTN","TIURA1",84,0)
 S TIUAUTH=$P(TIUD12,U,2),TIUESNR=$P(TIUD12,U,4),TIUECSNR=$P(TIUD12,U,8)
"RTN","TIURA1",85,0)
 I +TIUECSNR,(+$P(TIUD0,U,5)<7) D
"RTN","TIURA1",86,0)
 . S TIUY=$S(DUZ=TIUAUTH:1,DUZ=TIUESNR:1,DUZ=TIUECSNR:1,1:0)
"RTN","TIURA1",87,0)
 Q TIUY
"RTN","TIURA1",88,0)
CHNGCSNR(DA) ; Change the expected cosigner
"RTN","TIURA1",89,0)
 N DR,DIE,X,Y
"RTN","TIURA1",90,0)
 W !,"You may change the expected cosigner, if you wish...",!
"RTN","TIURA1",91,0)
 S DIE=8925,DR="1208" D ^DIE,SEND^TIUALRT(DA)
"RTN","TIURA1",92,0)
 Q
"RTN","TIURA1",93,0)
PERSEL(TIUY,TIUDA) ; Select a person
"RTN","TIURA1",94,0)
 N TIUQUIT,TIUPRSN,TIUI,TIUPRMT,TIUSCRN S (TIUI,TIUQUIT)=0
"RTN","TIURA1",95,0)
 W !!,"Specify other practitioners whose signatures will be  expected:",!
"RTN","TIURA1",96,0)
 F  D  Q:+TIUQUIT
"RTN","TIURA1",97,0)
 . S TIUI=TIUI+1,TIUPRMT=$J(TIUI,3)_")  "
"RTN","TIURA1",98,0)
 . S TIUSCRN="I +$$SCREEN^TIURA1(TIUDA,+Y)"
"RTN","TIURA1",99,0)
 . S TIUPRSN=$$READ^TIUU("PAO^200:AEMQ",TIUPRMT,"","",TIUSCRN)
"RTN","TIURA1",100,0)
 . I +TIUPRSN'>0 S TIUQUIT=1 Q
"RTN","TIURA1",101,0)
 . S TIUY(TIUI)=TIUPRSN
"RTN","TIURA1",102,0)
 W !
"RTN","TIURA1",103,0)
 Q
"RTN","TIURA1",104,0)
SCREEN(TIUDA,Y) ; Evaluate whether a person may be selected as a signer
"RTN","TIURA1",105,0)
 N TIUI,TIUY,TIUD0,TIUD12 S TIUY=1 ; most people may be selected
"RTN","TIURA1",106,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD12=$G(^TIU(8925,+TIUDA,12))
"RTN","TIURA1",107,0)
 ; A user may NOT select himself
"RTN","TIURA1",108,0)
 I Y=+$G(DUZ) S TIUY=0 G SCREENX
"RTN","TIURA1",109,0)
 ; Author may NOT be selected
"RTN","TIURA1",110,0)
 I Y=+$P(TIUD12,U,2) S TIUY=0 G SCREENX
"RTN","TIURA1",111,0)
 ; Expected Signer may NOT be selected
"RTN","TIURA1",112,0)
 I Y=+$P(TIUD12,U,4) S TIUY=0 G SCREENX
"RTN","TIURA1",113,0)
 ; Can't name the same signer twice
"RTN","TIURA1",114,0)
 I +$O(^TIU(8925.7,"AE",+TIUDA,+Y,0)) S TIUY=0 G SCREENX
"RTN","TIURA1",115,0)
 S TIUI=0
"RTN","TIURA1",116,0)
 F  S TIUI=$O(TIULIST(TIUI)) Q:+TIUI'>0!(TIUY=0)  D
"RTN","TIURA1",117,0)
 . I +$G(TIULIST(TIUI))=+Y S TIUY=0
"RTN","TIURA1",118,0)
 I +TIUY=0 G SCREENX
"RTN","TIURA1",119,0)
 ; Expected Cosigner may NOT be selected
"RTN","TIURA1",120,0)
 I Y=+$P(TIUD12,U,8) S TIUY=0
"RTN","TIURA1",121,0)
SCREENX Q +$G(TIUY)
"RTN","TIURB")
0^158^B69372270
"RTN","TIURB",1,0)
TIURB ; SLC/JER - More Review Screen Actions ;5/25/94  13:54
"RTN","TIURB",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURB",3,0)
DELETE ; Delete action
"RTN","TIURB",4,0)
 N DA,TIUDATA,TIUI,TIUY,TIUCHNG,Y,DIROUT,TIULST
"RTN","TIURB",5,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURB",6,0)
 S TIUI=0
"RTN","TIURB",7,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURB",8,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURB",9,0)
 . S DA=+$P(TIUDATA,U,2) L +^TIU(8925,+DA):1
"RTN","TIURB",10,0)
 . I '$T W !?5,$C(7),"Another user is editing this entry." D PICK^TIULM(TIUI) Q
"RTN","TIURB",11,0)
 . D DEL(DA)
"RTN","TIURB",12,0)
 . I +$G(TIUCHNG) D
"RTN","TIURB",13,0)
 . . D REMOVE^TIULM(TIUDATA)
"RTN","TIURB",14,0)
 . . S TIULST=$G(TIULST)_$S($G(TIULST)]"":", ",1:"")_TIUI
"RTN","TIURB",15,0)
 . I '+$G(TIUCHNG) D RESTORE^TIULM(+TIUI)
"RTN","TIURB",16,0)
 . L -^TIU(8925,+DA)
"RTN","TIURB",17,0)
 W !,"Refreshing the list."
"RTN","TIURB",18,0)
 ; Revise list and cycle back as appropriate
"RTN","TIURB",19,0)
 I +$G(TIULST) S VALMSG="** Item"_$S($L(TIULST,",")>1:"s ",1:" ")_TIULST_" Deleted **"
"RTN","TIURB",20,0)
 I '+$G(TIULST) S VALMSG="** No changes made **"
"RTN","TIURB",21,0)
 K VALMY S VALMBCK="R"
"RTN","TIURB",22,0)
 Q
"RTN","TIURB",23,0)
DEL(DA) ; We don't hand out pencils, without erasers
"RTN","TIURB",24,0)
 N CANDEL,TIUDA,TIUD0,TIUI,TIUDFLT,TIUPT,TIUVDT,TIUTYP,PROMPT,TIUAUDIT
"RTN","TIURB",25,0)
 N TIUMSG,TIURSN
"RTN","TIURB",26,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUTYP=$$UP^XLFSTR($$PNAME^TIULC1(+TIUD0))
"RTN","TIURB",27,0)
 S TIUPT=$$NAME^TIULS($P($G(^DPT(+$P(TIUD0,U,2),0)),U),"FIRST LAST")
"RTN","TIURB",28,0)
 S TIUVDT=+$P(TIUD0,U,7)
"RTN","TIURB",29,0)
 S TIUVDT=$$DATE^TIULS(TIUVDT,"MM/DD/YY"_$S($L(TIUVDT,".")=2:" HR:MIN",1:""))
"RTN","TIURB",30,0)
 S TIUVTYP=$S(+$$ISDS^TIULX(+TIUD0):" Admission",1:" Visit")
"RTN","TIURB",31,0)
 S TIUMSG="DELETING "_TIUTYP_" For "_TIUPT_"'s "_TIUVDT_TIUVTYP_"."
"RTN","TIURB",32,0)
 S CANDEL=$$CANDO^TIULP(DA,"DELETE RECORD")
"RTN","TIURB",33,0)
 I 'CANDEL W !!,$C(7),$C(7),$C(7),$P(CANDEL,U,2),! H 2 Q
"RTN","TIURB",34,0)
 I $O(^TIU(8925,"DAD",+DA,0))>0,$$HASADDEN^TIULC1(DA) D
"RTN","TIURB",35,0)
 . W !!,"This "_TIUTYP_" has ADDENDA."
"RTN","TIURB",36,0)
 W !,$C(7) F TIUI=1:1:$L(TIUMSG,"|") W !,$P(TIUMSG,"|",TIUI)
"RTN","TIURB",37,0)
 W ! S PROMPT="Are you SURE you want to DELETE"
"RTN","TIURB",38,0)
 I '$$READ^TIUU("YO",PROMPT,"NO") W !,"Nothing DELETED.",! H 2 S TIUCHNG=0 Q
"RTN","TIURB",39,0)
 S PROMPT="DELETE the TEXT ONLY, leaving audit trail information"
"RTN","TIURB",40,0)
 S TIUDA=DA
"RTN","TIURB",41,0)
 K ^TIU(8925,"ASAVE",DUZ,TIUDA) ; Remove SAVE-flag
"RTN","TIURB",42,0)
 I $S(DUZ=+$P($G(^TIU(8925,TIUDA,12)),U,2):1,+$$ISA^USRLM(DUZ,"MEDICAL INFORMATION SECTION")'>0:1,1:0) S TIUAUDIT=0 I 1
"RTN","TIURB",43,0)
 E  S TIUAUDIT=$S(+$P($G(^TIU(8925,+TIUDA,0)),U,5)'<7:1,1:+$$READ^TIUU("YO",PROMPT,"YES"))
"RTN","TIURB",44,0)
 I +TIUAUDIT'>0 D  G DELX
"RTN","TIURB",45,0)
 . W !,"DELETING Entire "_TIUTYP_" record.",!
"RTN","TIURB",46,0)
 . D DELIRT^TIUDIRT(TIUDA),DIK(TIUDA) H 2 S TIUCHNG=2
"RTN","TIURB",47,0)
 . D ALERTDEL^TIUALRT(TIUDA),DELSGNR^TIURB1(TIUDA)
"RTN","TIURB",48,0)
 S PROMPT="Reason for DELETION (Privacy Act or Administrative): "
"RTN","TIURB",49,0)
 S TIURSN=$P($$READ^TIUU("SA^P:privacy act;A:administrative",PROMPT,"PRIVACY ACT"),U)
"RTN","TIURB",50,0)
 D ALERTDEL^TIUALRT(TIUDA),DELSGNR^TIURB1(TIUDA)
"RTN","TIURB",51,0)
 D DELTEXT(TIUDA,TIURSN) S TIUCHNG=1
"RTN","TIURB",52,0)
DELX Q
"RTN","TIURB",53,0)
DELTEXT(DA,TIURSN) ; Delete Text, but leave audit information
"RTN","TIURB",54,0)
 N DR,DIE,TIUTYP,TIUDA,X,Y S TIUDA=0
"RTN","TIURB",55,0)
 F  S TIUDA=+$O(^TIU(8925,"DAD",+DA,TIUDA)) Q:+TIUDA'>0  D
"RTN","TIURB",56,0)
 . I +$$ISADDNDM^TIULC1(TIUDA) D DELTEXT(TIUDA,$G(TIURSN)) I 1
"RTN","TIURB",57,0)
 . E  D DIK(TIUDA) ; Remove components entirely
"RTN","TIURB",58,0)
 S TIUTYP=$P($G(^TIU(8925.1,+$G(^TIU(8925,+DA,0)),0)),U)
"RTN","TIURB",59,0)
 W:'$D(ZTQUEUED) !,"Deleting "_TIUTYP_" text."
"RTN","TIURB",60,0)
 S DR=".05///DELETED;1610////"_+$G(DUZ)_";1611////"_$$NOW^TIULC_";1612////"_TIURSN_";2///@;1503///@;1504///@;1506///@;1509///@;1510///@"
"RTN","TIURB",61,0)
 S DIE=8925 D ^DIE W:'$D(ZTQUEUED) "."
"RTN","TIURB",62,0)
 S ^TIU(8925,+DA,"TEXT",0)="^^"_2_U_2_U_DT_"^^"
"RTN","TIURB",63,0)
 S ^TIU(8925,+DA,"TEXT",1,0)=" "
"RTN","TIURB",64,0)
 S ^TIU(8925,+DA,"TEXT",2,0)="  Document Deleted per "_$S(TIURSN="P":"Privacy Act.",1:"Administrative Action.")
"RTN","TIURB",65,0)
 Q
"RTN","TIURB",66,0)
DIK(DA) ; Call ^DIK to delete the record
"RTN","TIURB",67,0)
 N DIK,TIUTYP,TIUDA,TIUVSIT,TIUVKILL S TIUDA=0
"RTN","TIURB",68,0)
 F  S TIUDA=+$O(^TIU(8925,"DAD",+DA,TIUDA)) Q:+TIUDA'>0  D DIK(TIUDA)
"RTN","TIURB",69,0)
 S TIUTYP=$P($G(^TIU(8925.1,+$G(^TIU(8925,+DA,0)),0)),U)
"RTN","TIURB",70,0)
 S TIUVSIT=+$P($G(^TIU(8925,DA,0)),U,3)
"RTN","TIURB",71,0)
 S DIK="^TIU(8925,"
"RTN","TIURB",72,0)
 D ^DIK ; W:'$D(ZTQUEUED) "."
"RTN","TIURB",73,0)
 D DELAUDIT^TIUEDI1(DA)
"RTN","TIURB",74,0)
 D DELPROB^TIURB1(DA)
"RTN","TIURB",75,0)
 D DELSGNR^TIURB1(DA)
"RTN","TIURB",76,0)
 D ALERTDEL^TIUALRT(DA)
"RTN","TIURB",77,0)
 I +TIUVSIT,$D(^AUPNVSIT(+TIUVSIT)) S TIUVKILL=$$DELVFILE^PXAPI("ALL",TIUVSIT,"","TEXT INTEGRATION UTILITIES")
"RTN","TIURB",78,0)
 Q
"RTN","TIURB",79,0)
AMEND ; Amendment action
"RTN","TIURB",80,0)
 N TIUDA,DFN,DIE,DR,TIU,TIUDATA,TIUI,TIUSIG,TIUY,X,X1,Y
"RTN","TIURB",81,0)
 N DIROUT,TIUCHNG,TIULST
"RTN","TIURB",82,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURB",83,0)
 S TIUI=0
"RTN","TIURB",84,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURB",85,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURB",86,0)
 . S TIUDA=+$P(TIUDATA,U,2) D AMEND1
"RTN","TIURB",87,0)
 . I +$G(TIUCHNG) D
"RTN","TIURB",88,0)
 . . I $D(VALMDDF("ADMISSION DATE")) D UPDATEM^TIURL(TIUDATA) I 1
"RTN","TIURB",89,0)
 . . E  I $D(VALMDDF("REF DATE")) D UPDATE^TIURL(TIUDATA)
"RTN","TIURB",90,0)
 . . S TIULST=$G(TIULST)_$S($G(TIULST)]"":", ",1:"")_TIUI
"RTN","TIURB",91,0)
 . I '+$G(TIUCHNG) D RESTORE^TIULM(+TIUI)
"RTN","TIURB",92,0)
 W !,"Refreshing the list."
"RTN","TIURB",93,0)
 ; Revise list and cycle back as appropriate
"RTN","TIURB",94,0)
 I $G(TIULST)]"" S VALMSG="** Item"_$S($L(TIULST,",")>1:"s ",$L(TIULST,"-")>1:"s ",1:" ")_TIULST_" Amended. **"
"RTN","TIURB",95,0)
 E  S VALMSG="** No changes made... **"
"RTN","TIURB",96,0)
AMENDX K VALMY S VALMBCK="R"
"RTN","TIURB",97,0)
 Q
"RTN","TIURB",98,0)
AMEND1 ; Single record amend
"RTN","TIURB",99,0)
 N TIUCMT,TIUT0,TIUTYP,TIUAMND,TIUSNM,TIUSBLK,TIUCSNM,TIUCSBLK,DIE,DR
"RTN","TIURB",100,0)
 N DA,DFN,DIWESUB,TIUCHNG
"RTN","TIURB",101,0)
 L +^TIU(8925,+TIUDA):1
"RTN","TIURB",102,0)
 I '$T W !?5,$C(7),"Another user is editing this entry." Q
"RTN","TIURB",103,0)
 I +$P($G(^TIU(8925,+TIUDA,0)),U,5)'>6 W !?5,$C(7),"Only SIGNED Documents may be amended." H 3 Q
"RTN","TIURB",104,0)
 S TIUAMND=$$CANDO^TIULP(TIUDA,"AMENDMENT")
"RTN","TIURB",105,0)
 I +TIUAMND'>0 D  Q
"RTN","TIURB",106,0)
 . W !!,$C(7),$C(7),$C(7),$P(TIUAMND,U,2),!
"RTN","TIURB",107,0)
 . I $$READ^TIUU("EA","Press RETURN to continue...") W ""
"RTN","TIURB",108,0)
 S TIUSNM=$$DECRYPT^TIULC1($P(^TIU(8925,TIUDA,15),U,3),1,$$CHKSUM^TIULC("^TIU(8925,"_TIUDA_",""TEXT"")"))
"RTN","TIURB",109,0)
 S TIUSBLK=$$DECRYPT^TIULC1($P($G(^TIU(8925,TIUDA,15)),U,4),1,$$CHKSUM^TIULC("^TIU(8925,"_TIUDA_",""TEXT"")"))
"RTN","TIURB",110,0)
 S TIUCSNM=$$DECRYPT^TIULC1($P(^TIU(8925,TIUDA,15),U,9),1,$$CHKSUM^TIULC("^TIU(8925,"_TIUDA_",""TEXT"")"))
"RTN","TIURB",111,0)
 S TIUCSBLK=$$DECRYPT^TIULC1($P($G(^TIU(8925,TIUDA,15)),U,10),1,$$CHKSUM^TIULC("^TIU(8925,"_TIUDA_",""TEXT"")"))
"RTN","TIURB",112,0)
 S TIUTYP=+$G(^TIU(8925,+TIUDA,0)),TIUT0=$G(^TIU(8925.1,+TIUTYP,0))
"RTN","TIURB",113,0)
 S TIUTYP(1)="1^"_+TIUTYP_U_$P(TIUT0,U,3)_U
"RTN","TIURB",114,0)
 S DFN=$P($G(^TIU(8925,+TIUDA,0)),U,2)
"RTN","TIURB",115,0)
 D GETTIU^TIULD(.TIU,TIUDA)
"RTN","TIURB",116,0)
 S DIWESUB="Patient: "_$G(TIU("PNM"))
"RTN","TIURB",117,0)
 D CLEAR^VALM1,TEXTEDIT^TIUEDIT(TIUDA,.TIUCMT,.TIUCHNG)
"RTN","TIURB",118,0)
 I +$G(TIUCHNG) D
"RTN","TIURB",119,0)
 . S DR=".05///AMENDED;1601////"_DT_";1602////"_DUZ,DA=TIUDA,TIUSIG=0
"RTN","TIURB",120,0)
 . D SIG^XUSESIG I X1']"" S X=$G(X) D BADSIG^TIULG(X)
"RTN","TIURB",121,0)
 . I X1]"" S DR=DR_";1603////"_DT,TIUSIG=1
"RTN","TIURB",122,0)
 . S DIE=8925 D ^DIE
"RTN","TIURB",123,0)
 . ; Refile /es/-block fields
"RTN","TIURB",124,0)
 . S DR="1503///^S X="_""""_TIUSNM_""""_";1504///^S X="_""""_TIUSBLK_""""_";1509///^S X="_""""_TIUCSNM_""""_";1510///^S X="_""""_TIUCSBLK_""""
"RTN","TIURB",125,0)
 . D ^DIE
"RTN","TIURB",126,0)
 L -^TIU(8925,+TIUDA)
"RTN","TIURB",127,0)
 Q
"RTN","TIURB",128,0)
SENDBACK ; Send back a Document to transcription
"RTN","TIURB",129,0)
 N TIUDA,DFN,TIU,TIUDATA,TIUCHNG,TIUI,TIUY,Y,DIROUT,TIULST
"RTN","TIURB",130,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURB",131,0)
 S TIUI=0
"RTN","TIURB",132,0)
 I +$O(VALMY(0)) D CLEAR^VALM1
"RTN","TIURB",133,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURB",134,0)
 . N TIU
"RTN","TIURB",135,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURB",136,0)
 . S TIUDA=+$P(TIUDATA,U,2)
"RTN","TIURB",137,0)
 . D EN^VALM("TIU SEND BACK")
"RTN","TIURB",138,0)
 . I +$G(TIUCHNG) D
"RTN","TIURB",139,0)
 . . I $D(VALMDDF("ADMISSION DATE")) D UPDATEM^TIURL(TIUDATA) I 1
"RTN","TIURB",140,0)
 . . E  I $D(VALMDDF("REF DATE")) D UPDATE^TIURL(TIUDATA)
"RTN","TIURB",141,0)
 . . S TIULST=$G(TIULST)_$S($G(TIULST)]"":", ",1:"")_TIUI
"RTN","TIURB",142,0)
 . I '+$G(TIUCHNG) D RESTORE^TIULM(+TIUI)
"RTN","TIURB",143,0)
 W !,"Refreshing the list."
"RTN","TIURB",144,0)
 I $G(TIULST)]"" S VALMSG="** Item"_$S($L(TIULST,",")>1:"s ",$L(TIULST,"-")>1:"s ",1:" ")_TIULST_" Sent Back. **"
"RTN","TIURB",145,0)
 E  S VALMSG="** No changes made... **"
"RTN","TIURB",146,0)
SENDX ; Revise list and cycle back as appropriate
"RTN","TIURB",147,0)
 K VALMY S VALMBCK=$S(+$O(^TMP("TIUR",$J,0))>0:"R",1:"Q")
"RTN","TIURB",148,0)
 Q
"RTN","TIURB",149,0)
LINK ; Link to problem(s)
"RTN","TIURB",150,0)
 N TIUCHNG,TIUDA,DFN,TIU,TIUDATA,TIUEDIT,TIUI,TIUY,TIULST,Y,DIROUT
"RTN","TIURB",151,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURB",152,0)
 S TIUI=0
"RTN","TIURB",153,0)
 I +$O(VALMY(0)) D CLEAR^VALM1
"RTN","TIURB",154,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURB",155,0)
 . N TIU,VALMY,XQORM,VA
"RTN","TIURB",156,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURB",157,0)
 . S TIUDA=+$P(TIUDATA,U,2),GMPLUSER=1
"RTN","TIURB",158,0)
 . S DFN=+$P($G(^TIU(8925,+TIUDA,0)),U,2)
"RTN","TIURB",159,0)
 . I +DFN D DEM^VADPT S GMPDFN=DFN_U_VADM(1)_U_$E(VADM(1))_VA("BID")
"RTN","TIURB",160,0)
 . D EN^VALM("TIU LINK TO PROBLEM")
"RTN","TIURB",161,0)
 . I +$G(TIUCHNG) D UPDATE^TIURL(TIUDATA) S TIULST=$G(TIULST)_$S($G(TIULST)]"":", ",1:"")_TIUI
"RTN","TIURB",162,0)
 . I '+$G(TIUCHNG) D RESTORE^TIULM(+TIUI)
"RTN","TIURB",163,0)
 I $G(TIULST)]"" S VALMSG="** Item"_$S($L(TIULST,",")>1:"s ",$L(TIULST,"-")>1:"s ",1:" ")_TIULST_" Linked to Problems. **"
"RTN","TIURB",164,0)
 E  S VALMSG="** No changes made... **"
"RTN","TIURB",165,0)
 W !,"Refreshing the list."
"RTN","TIURB",166,0)
LINKX ; Revise list and cycle back as appropriate
"RTN","TIURB",167,0)
 K VALMY S VALMBCK="R"
"RTN","TIURB",168,0)
 Q
"RTN","TIURB",169,0)
PROBLEM ; Link selected document to problems
"RTN","TIURB",170,0)
 ; Receives TIUDA as pointer to document record
"RTN","TIURB",171,0)
 N TIUI
"RTN","TIURB",172,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURB",173,0)
 S TIUI=0
"RTN","TIURB",174,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D
"RTN","TIURB",175,0)
 . N DA,DIC,DIE,DR,X,Y,TIUTYP,TIUPRBLM,TIUPROB,TIUPOV,TIUEXPR,TIUPNARR,TIUDX
"RTN","TIURB",176,0)
 . S TIUTYP=$P($G(^TIU(8925.1,+$G(^TIU(8925,+TIUDA,0)),0)),U)
"RTN","TIURB",177,0)
 . S TIUPRBLM=$G(^TMP("TIURPIDX",$J,+TIUI)),TIUPROB=+$P(TIUPRBLM,U,2)
"RTN","TIURB",178,0)
 . I +$$DUPROB(TIUDA,TIUPROB) D  Q
"RTN","TIURB",179,0)
 . . W $C(7)
"RTN","TIURB",180,0)
 . . W !!,$P(TIUPRBLM,U,5)," is already associated with this document.",!
"RTN","TIURB",181,0)
 . . I $$READ^TIUU("EA","Press RETURN to continue...") W ""
"RTN","TIURB",182,0)
 . S TIUPOV=$P(TIUPRBLM,U,3),TIUEXPR=+$P(TIUPRBLM,U,4)
"RTN","TIURB",183,0)
 . S TIUPNARR=$P(TIUPRBLM,U,5),TIUDX=+$P(TIUPRBLM,U,6)
"RTN","TIURB",184,0)
 . S X=""""_"`"_TIUDA_"""",(DIC,DLAYGO)=8925.9,DIC(0)="LX" D ^DIC Q:+Y'>0
"RTN","TIURB",185,0)
 . S DIE=DIC,DR=".02////"_$G(TIUPROB)_";.03////"_$G(TIUPOV)_";.04////"_$G(TIUEXPR)_";.05////"_$G(TIUPNARR)_";.06////"_$G(TIUDX)
"RTN","TIURB",186,0)
 . D ^DIE W !,TIUTYP," linked to ",TIUPNARR,"." H 2
"RTN","TIURB",187,0)
 . S TIUCHNG=1 K VALMY(TIUI)
"RTN","TIURB",188,0)
 Q
"RTN","TIURB",189,0)
DUPROB(TIUDA,TIUPROB) ; Check whether document is already linked to problem
"RTN","TIURB",190,0)
 N TIUI,TIUY S (TIUI,TIUY)=0
"RTN","TIURB",191,0)
 F  S TIUI=$O(^TIU(8925.9,"B",TIUDA,TIUI)) Q:+TIUI'>0!+TIUY  D
"RTN","TIURB",192,0)
 . I +$P($G(^TIU(8925.9,TIUI,0)),U,2)=+TIUPROB S TIUY=1
"RTN","TIURB",193,0)
 Q +$G(TIUY)
"RTN","TIURB1")
0^159^B3550979
"RTN","TIURB1",1,0)
TIURB1 ; SLC/JER - TIURB-associated subroutines
"RTN","TIURB1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURB1",3,0)
DELPROB(TIUDA) ; Delete linked problems
"RTN","TIURB1",4,0)
 N DA,DIK S DIK="^TIU(8925.9,",DA=0
"RTN","TIURB1",5,0)
 F  S DA=$O(^TIU(8925.9,"B",TIUDA,DA)) Q:+DA'>0  D ^DIK
"RTN","TIURB1",6,0)
 Q
"RTN","TIURB1",7,0)
DELSGNR(TIUDA) ; Delete associated additional signers
"RTN","TIURB1",8,0)
 N DA,DIK S DIK="^TIU(8925.7,",DA=0
"RTN","TIURB1",9,0)
 F  S DA=$O(^TIU(8925.7,"B",TIUDA,DA)) Q:+DA'>0  D ^DIK
"RTN","TIURB1",10,0)
 Q
"RTN","TIURB1",11,0)
AUDEL(TIUDA,TIURSN) ; Audit deletions
"RTN","TIURB1",12,0)
 N DIC,DIE,DA,DR,X,Y
"RTN","TIURB1",13,0)
 S X=""""_"`"_TIUDA_"""",(DIC,DLAYGO)=8925.5,DIC(0)="FLX" D ^DIC Q:+Y'>0
"RTN","TIURB1",14,0)
 S DA=+Y
"RTN","TIURB1",15,0)
 S DIE=DIC,DR="2.01////"_$$NOW^TIULC_";2.02////"_DUZ_";2.03////"_TIURSN
"RTN","TIURB1",16,0)
 D ^DIE
"RTN","TIURB1",17,0)
 Q
"RTN","TIURB1",18,0)
AUDREASS(TIUDA,TIUD0,TIUD12) ; Audit reassignments
"RTN","TIURB1",19,0)
 N DIC,DIE,DA,DR,X,Y
"RTN","TIURB1",20,0)
 S X=""""_"`"_TIUDA_"""",(DIC,DLAYGO)=8925.5,DIC(0)="FLX" D ^DIC Q:+Y'>0
"RTN","TIURB1",21,0)
 S DA=+Y,DIE=DIC
"RTN","TIURB1",22,0)
 S DR="1.01////"_$$NOW^TIULC_";1.02////"_DUZ
"RTN","TIURB1",23,0)
 S DR=DR_";1.03////"_$P(TIUD0(0),U,2)_";1.05////"_$P(TIUD0(0),U,7)
"RTN","TIURB1",24,0)
 S DR=DR_";1.07////"_$S(+$P(TIUD12(0),U,11):$P(TIUD12(0),U,11),1:$P(TIUD12(0),U,5))
"RTN","TIURB1",25,0)
 S DR=DR_";1.09////"_$P(TIUD0(0),U,13)_";1.11////"_$P(TIUD0(0),U,3)
"RTN","TIURB1",26,0)
 D ^DIE
"RTN","TIURB1",27,0)
 S DR="1.04////"_$P(TIUD0(1),U,2)_";1.06////"_$P(TIUD0(1),U,7)
"RTN","TIURB1",28,0)
 S DR=DR_";1.08////"_$S(+$P(TIUD12(1),U,11):$P(TIUD12(1),U,11),1:$P(TIUD12(1),U,5))
"RTN","TIURB1",29,0)
 S DR=DR_";1.1////"_$P(TIUD0(1),U,13)_";1.12////"_$P(TIUD0(1),U,3)
"RTN","TIURB1",30,0)
 D ^DIE
"RTN","TIURB1",31,0)
 Q
"RTN","TIURB1",32,0)
LINK1 ; Link a single document to Problem(s)
"RTN","TIURB1",33,0)
 N DFN,GMPLUSER,GMPDFN,VADM,VA
"RTN","TIURB1",34,0)
 S GMPLUSER=1
"RTN","TIURB1",35,0)
 S DFN=+$P($G(^TIU(8925,+TIUDA,0)),U,2)
"RTN","TIURB1",36,0)
 I +DFN D DEM^VADPT S GMPDFN=DFN_U_VADM(1)_U_$E(VADM(1))_VA("BID")
"RTN","TIURB1",37,0)
 D EN^VALM("TIU LINK TO PROBLEM")
"RTN","TIURB1",38,0)
 Q
"RTN","TIURC")
0^160^B59265808
"RTN","TIURC",1,0)
TIURC ; SLC/JER - Additional Review screen actions ;1/23/95  15:08
"RTN","TIURC",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURC",3,0)
VERIFY ; Allow MIS personnel to verify Documents
"RTN","TIURC",4,0)
 N DA,DIE,DR,TIU,TIUCHNG,TIUDATA,TIUI,TIUY,Y,DIROUT,TIULST
"RTN","TIURC",5,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURC",6,0)
 S TIUI=0
"RTN","TIURC",7,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURC",8,0)
 . N TIU
"RTN","TIURC",9,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURC",10,0)
 . S TIUDA=+$P(TIUDATA,U,2) D EN^VALM("TIU VERIFY")
"RTN","TIURC",11,0)
 . K ^TMP("TIUVIEW",$J)
"RTN","TIURC",12,0)
 . I +$G(TIUCHNG) D
"RTN","TIURC",13,0)
 . . I $D(VALMDDF("ADMISSION DATE")) D UPDATEM^TIURL(TIUDATA) I 1
"RTN","TIURC",14,0)
 . . E  I $D(VALMDDF("REF DATE")) D UPDATE^TIURL(TIUDATA)
"RTN","TIURC",15,0)
 . . S TIULST=$G(TIULST)_$S($G(TIULST)]"":", ",1:"")_TIUI
"RTN","TIURC",16,0)
 . I '+$G(TIUCHNG) D RESTORE^TIULM(+TIUI)
"RTN","TIURC",17,0)
 W !,"Refreshing the list."
"RTN","TIURC",18,0)
 I $G(TIULST)]"" S VALMSG="** Item"_$S($L(TIULST,",")>1:"s ",$L(TIULST,"-")>1:"s ",1:" ")_TIULST_" Verified/Unverified. **"
"RTN","TIURC",19,0)
 E  S VALMSG="** No changes made... **"
"RTN","TIURC",20,0)
 ; Rebuild list as appropriate
"RTN","TIURC",21,0)
 K VALMY S VALMBCK="R"
"RTN","TIURC",22,0)
 Q
"RTN","TIURC",23,0)
VERIFY1 ; Single record verify
"RTN","TIURC",24,0)
 ; Receives TIUDA
"RTN","TIURC",25,0)
 N TIUTYP,TIUQUIT,TIUT0,TIUTNM
"RTN","TIURC",26,0)
 ; Initialize parameters if not present
"RTN","TIURC",27,0)
 S TIUTYP=+$G(^TIU(8925,+TIUDA,0)),TIUT0=$G(^TIU(8925.1,+TIUTYP,0))
"RTN","TIURC",28,0)
 S TIUTNM=$$PNAME^TIULC1(+TIUTYP)
"RTN","TIURC",29,0)
 S TIUTYP(1)="1^"_+TIUTYP_U_TIUTNM_U
"RTN","TIURC",30,0)
 I +$P($G(^TIU(8925,+TIUDA,13)),U,5) D  Q
"RTN","TIURC",31,0)
 . I +$P($G(^(15)),U)!+$P($G(^(15)),U,7) W !!,"This ",TIUTNM," is already signed." H 2 Q
"RTN","TIURC",32,0)
 . W !!,"This ",TIUTNM," is already verified."
"RTN","TIURC",33,0)
 . S TIUY=$$READ^TIUU("YO","Do you want to UNVERIFY this "_TIUTNM,"NO","^D UNVER^TIUDIRH")
"RTN","TIURC",34,0)
 . I TIUY W !,TIUTNM," UNVERIFIED" D
"RTN","TIURC",35,0)
 . . S DA=TIUDA,DIE=8925,DR=".05///UNVERIFIED;1305///@;1306///@" D ^DIE
"RTN","TIURC",36,0)
 . . W "." S TIUCHNG=1
"RTN","TIURC",37,0)
 . . D ALERTDEL^TIUALRT(TIUDA)
"RTN","TIURC",38,0)
 S TIUY=$$READ^TIUU("YO","Do you want to edit this "_TIUTNM,"NO")
"RTN","TIURC",39,0)
 I +TIUY D
"RTN","TIURC",40,0)
 . D GETTIU^TIULD(.TIU,TIUDA),CLEAR^VALM1
"RTN","TIURC",41,0)
 . D DIE^TIUEDIT(TIUDA,.TIUQUIT)
"RTN","TIURC",42,0)
 I +TIUY'>0,$S(+$G(TIUQUIT):1,$D(DUOUT):1,$D(DIROUT):1,$D(DTOUT):1,1:0) Q
"RTN","TIURC",43,0)
 S TIUY=$$READ^TIUU("YO","VERIFY this "_TIUTNM,"NO","^D VER^TIUDIRH")
"RTN","TIURC",44,0)
 I 'TIUY W !,TIUTNM," NOT VERIFIED." Q
"RTN","TIURC",45,0)
 S DA=TIUDA,DIE=8925,DR=".05///UNSIGNED;1305////"_$$NOW^TIULC_";1306////"_$G(DUZ) D ^DIE
"RTN","TIURC",46,0)
 S TIUCHNG=1
"RTN","TIURC",47,0)
 I +DA W !,TIUTNM," VERIFIED." D MAIN^TIUPD(DA,"V"),SEND^TIUALRT(DA)
"RTN","TIURC",48,0)
 Q
"RTN","TIURC",49,0)
ADD ; Add a document
"RTN","TIURC",50,0)
 N TIUITEM,TIUONCE,TIUNDA,TIUCLASS,TIUCREAT S TIUONCE=1
"RTN","TIURC",51,0)
 S TIUCLASS=$S($G(VALM("ENTITY"))="Progress Note":3,$G(VALM("ENTITY"))="Discharge Summary":244,1:38)
"RTN","TIURC",52,0)
 D FULL^VALM1,MAIN^TIUEDIT(TIUCLASS,.TIUCREAT,"","","","",.TIUNDA)
"RTN","TIURC",53,0)
 I +$O(TIUNDA(0))'>0 Q
"RTN","TIURC",54,0)
 S TIUNDA=0
"RTN","TIURC",55,0)
 F  S TIUNDA=$O(TIUNDA(TIUNDA)) Q:+TIUNDA'>0  D 
"RTN","TIURC",56,0)
 . S TIUITEM=+$G(^TMP("TIUR",$J,0))
"RTN","TIURC",57,0)
 . I $D(^TMP("TIUR",$J,"CTXT")) D RBLD^TIUROR Q
"RTN","TIURC",58,0)
 . D ADDELMNT^TIUR(TIUNDA,+TIUITEM,1)
"RTN","TIURC",59,0)
 Q
"RTN","TIURC",60,0)
COPY ; Copy documents
"RTN","TIURC",61,0)
 N DA,DIE,DR,TIU,TIUCHNG,TIUDATA,TIUI,TIUY,Y,DIROUT,TIULST,TIUNREC
"RTN","TIURC",62,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURC",63,0)
 S TIUI=0
"RTN","TIURC",64,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURC",65,0)
 . N TIU
"RTN","TIURC",66,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURC",67,0)
 . S TIUDA=+$P(TIUDATA,U,2) D EN^VALM("TIU COPY DOCUMENT")
"RTN","TIURC",68,0)
 . K ^TMP("TIUVIEW",$J)
"RTN","TIURC",69,0)
 . I +$G(TIUCHNG) D UPDATE^TIURL(TIUDATA) S TIULST=$G(TIULST)_$S($G(TIULST)]"":", ",1:"")_TIUI
"RTN","TIURC",70,0)
 . I '+$G(TIUCHNG) D RESTORE^TIULM(+TIUI)
"RTN","TIURC",71,0)
 W !,"Refreshing the list."
"RTN","TIURC",72,0)
 I +$G(TIUNREC) D
"RTN","TIURC",73,0)
 . N TIUI,TIUNDA,TIUITEM
"RTN","TIURC",74,0)
 . F TIUI=1:1:$L($G(TIUNREC),",") D
"RTN","TIURC",75,0)
 . . S TIUNDA=$P(TIUNREC,",",TIUI),TIUITEM=+$G(^TMP("TIUR",$J,0))
"RTN","TIURC",76,0)
 . . D ADDELMNT^TIUR(TIUNDA,+TIUITEM,1)
"RTN","TIURC",77,0)
 I $G(TIULST)]"" S VALMSG="** Item"_$S($L(TIULST,",")>1:"s ",$L(TIULST,"-")>1:"s ",1:" ")_TIULST_" Copied. **"
"RTN","TIURC",78,0)
 E  S VALMSG="** No changes made... **"
"RTN","TIURC",79,0)
 ; Rebuild list as appropriate
"RTN","TIURC",80,0)
 K VALMY S VALMBCK="R"
"RTN","TIURC",81,0)
 Q
"RTN","TIURC",82,0)
COPY1 ; Copy a specific document
"RTN","TIURC",83,0)
 N TIUD0,TIUD12,TIUD13,TIUD14,TIUD17,TIUI,TIUPAT,TIUTNM,TIUTYP,TIUDPRM
"RTN","TIURC",84,0)
 N TIUPOP,TIUCOPY S TIUPOP=0
"RTN","TIURC",85,0)
 I +$$ISADDNDM^TIULC1(TIUDA) D  Q
"RTN","TIURC",86,0)
 . W !,$C(7),"ADDENDA may not be copied."
"RTN","TIURC",87,0)
 . I $$READ^TIUU("EA","Press RETURN to continue...") W ""
"RTN","TIURC",88,0)
 S TIUCOPY=$$CANDO^TIULP(TIUDA,"COPY RECORD")
"RTN","TIURC",89,0)
 I +TIUCOPY'>0 D  Q
"RTN","TIURC",90,0)
 . W !!,$C(7),$P(TIUCOPY,U,2),! ; Echo denial message
"RTN","TIURC",91,0)
 . I $$READ^TIUU("EA","RETURN to continue...") ; pause
"RTN","TIURC",92,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD12=$G(^(12)),TIUD13=$G(^(13))
"RTN","TIURC",93,0)
 S TIUD14=$G(^TIU(8925,+TIUDA,14)),TIUD17=$G(^TIU(8925,+TIUDA,17))
"RTN","TIURC",94,0)
 S TIUTYP=+TIUD0
"RTN","TIURC",95,0)
 ; --- Initialize document parameters ---
"RTN","TIURC",96,0)
 D DOCPRM^TIULC1(TIUTYP,.TIUDPRM,TIUDA)
"RTN","TIURC",97,0)
 S TIUTNM=$$PNAME^TIULC1(+TIUTYP)
"RTN","TIURC",98,0)
 S TIUTYP(1)="1^"_+TIUTYP_U_TIUTNM_U
"RTN","TIURC",99,0)
 D FULL^VALM1
"RTN","TIURC",100,0)
 ; --- Get one or more patients ---
"RTN","TIURC",101,0)
 W !!,"Please Choose One or More Patients for whom the document should be copied:",!
"RTN","TIURC",102,0)
 F  D  Q:+TIUPOP
"RTN","TIURC",103,0)
 . D PATIENT^ORU1(.TIUPAT,1)
"RTN","TIURC",104,0)
 . I +TIUPAT'>0 D  Q
"RTN","TIURC",105,0)
 . . W !,$C(7),"No patient(s) selected..."
"RTN","TIURC",106,0)
 . . I $$READ^TIUU("EA","Press RETURN to continue...") W !
"RTN","TIURC",107,0)
 . . S TIUCHNG=0,TIUPOP=1
"RTN","TIURC",108,0)
 . S TIUI=0 F  S TIUI=$O(TIUPAT(TIUI)) Q:+TIUI'>0  D
"RTN","TIURC",109,0)
 . . N DA,DR,DFN,TIU,TIULMETH,TIUVMETH,TIUPATNM
"RTN","TIURC",110,0)
 . . S DFN=+TIUPAT(TIUI),TIUPATNM=$P(TIUPAT(TIUI),U,2)
"RTN","TIURC",111,0)
 . . ; --- Get associated visit ---
"RTN","TIURC",112,0)
 . . S TIULMETH=$$GETLMETH^TIUEDI1(TIUTYP)
"RTN","TIURC",113,0)
 . . I '$L(TIULMETH) D  S TIUOUT=1 Q
"RTN","TIURC",114,0)
 . . . W !,$C(7),"No Visit Linkage Method defined for "
"RTN","TIURC",115,0)
 . . . W $$PNAME^TIULC1(TIUTYP),".",!,"Please contact IRM..."
"RTN","TIURC",116,0)
 . . . I $$READ^TIUU("EA","Press RETURN to continue...") W ""
"RTN","TIURC",117,0)
 . . W !!,"For Patient ",TIUPATNM
"RTN","TIURC",118,0)
 . . X TIULMETH I '$D(TIU) W !,$C(7),"Patient & Visit required." H 2 Q
"RTN","TIURC",119,0)
 . . ; --- Validate Selection ---
"RTN","TIURC",120,0)
 . . S TIUVMETH=$$GETVMETH^TIUEDI1(TIUTYP)
"RTN","TIURC",121,0)
 . . I '$L(TIUVMETH) D  S TIUOUT=1 Q
"RTN","TIURC",122,0)
 . . . W !,$C(7),"No Validation Method defined for "
"RTN","TIURC",123,0)
 . . . W $$PNAME^TIULC1(TIUTYP),".",!,"Please contact IRM..."
"RTN","TIURC",124,0)
 . . X TIUVMETH
"RTN","TIURC",125,0)
 . . I $D(TIU) D
"RTN","TIURC",126,0)
 . . . N TIUNEW,TIUITEM,DA,DR,DIE
"RTN","TIURC",127,0)
 . . . S DA=$$GETREC^TIUEDI1(DFN,.TIU,1,.TIUNEW,.TIUDPRM) Q:+DA'>0
"RTN","TIURC",128,0)
 . . . I '+$G(TIUNEW) D  Q
"RTN","TIURC",129,0)
 . . . . W !!,$C(7),"A ",$P(TIUTYP(1),U,3)," already exists for this visit."
"RTN","TIURC",130,0)
 . . . . W !,"You may not use the copy function to overwrite an existing ",!,$$UPPER^TIULS($$STATUS^TIULC(DA))," ",$P(TIUTYP(1),U,3),".",!
"RTN","TIURC",131,0)
 . . . . I $$READ^TIUU("EA","Press RETURN to continue...") W ""
"RTN","TIURC",132,0)
 . . . D COPY0(DA,TIUD0,.TIU),COPY12(DA,TIUD0,TIUD12,.TIU),COPY13(DA,TIUD13)
"RTN","TIURC",133,0)
 . . . D COPY14(DA,TIUD14,.TIU),COPY17(DA,TIUD17),COPYTEXT(TIUDA,DA)
"RTN","TIURC",134,0)
 . . . I $D(^TIU(8925,DA,"TEMP")) D MERGTEXT^TIUEDI1(DA,.TIU) K ^TIU(8925,+DA,"TEMP")
"RTN","TIURC",135,0)
 . . . S DR=".05///"_$$UPPER^TIULS($$STATUS^TIULC(DA)),DIE=8925 D ^DIE
"RTN","TIURC",136,0)
 . . . S TIUCHNG=1,TIUNREC=$G(TIUNREC)_$S(+$G(TIUNREC):",",1:"")_DA
"RTN","TIURC",137,0)
 . . . I +$D(^TIU(8925,+DA,"TEXT"))>9!(+$O(^TIU(8925,"DAD",+DA,0))>0) D
"RTN","TIURC",138,0)
 . . . . N TIUDA S TIUDA=+DA D EDIT1^TIURA
"RTN","TIURC",139,0)
 . S TIUPOP='+$$AGAIN
"RTN","TIURC",140,0)
 Q
"RTN","TIURC",141,0)
AGAIN() ; Ask again?
"RTN","TIURC",142,0)
 N TIUY W !
"RTN","TIURC",143,0)
 S TIUY=$$READ^TIUU("Y","Copy this note again","No")
"RTN","TIURC",144,0)
 Q TIUY
"RTN","TIURC",145,0)
COPY0(DA,TIUD0,TIU) ; Copy root node
"RTN","TIURC",146,0)
 N DR,DIE S DIE=8925
"RTN","TIURC",147,0)
 S DR=".02////"_DFN_";.03////"_$P($G(TIU("VISIT")),U)_";.04////"_$P(TIUD0,U,4)_";.07////"_$P($G(TIU("EDT")),U)_";.08////"_$P($G(TIU("LDT")),U)_";.09////"_$P(TIUD0,U,9)
"RTN","TIURC",148,0)
 D ^DIE
"RTN","TIURC",149,0)
 Q
"RTN","TIURC",150,0)
COPY12(DA,TIUD0,TIUD12,TIU) ; Copy 12-node
"RTN","TIURC",151,0)
 N DR,DIE S DIE=8925
"RTN","TIURC",152,0)
 S DR="1201////"_$$NOW^TIULC_";1202////"_+$G(DUZ)_";1203////"_$P(TIUD12,U,3)_";1204////"_$G(DUZ)_";1205////"_$P($G(TIU("LOC")),U)
"RTN","TIURC",153,0)
 S DR=DR_";1206////"_$P(TIUD12,U,6)_";1207////"_$P(TIUD12,U,7)_";1209////"_$P(TIUD12,U,9)
"RTN","TIURC",154,0)
 I +$$REQCOSIG^TIULP(+TIUD0,DA,+$G(DUZ)) S DR=DR_";1208////"_$P(TIUD12,U,8)
"RTN","TIURC",155,0)
 S DR=DR_";1210////"_$P(TIUD12,U,10)
"RTN","TIURC",156,0)
 D ^DIE
"RTN","TIURC",157,0)
 Q
"RTN","TIURC",158,0)
COPY13(DA,TIUD13,TIU) ; Copy 13-node
"RTN","TIURC",159,0)
 N DR,DIE S DIE=8925
"RTN","TIURC",160,0)
 S DR="1301////"_$$NOW^TIULC_";1302////"_$G(DUZ)_";1303////O;1307////"_$P(TIUD13,U,7)
"RTN","TIURC",161,0)
 D ^DIE
"RTN","TIURC",162,0)
 Q
"RTN","TIURC",163,0)
COPY14(DA,TIUD14,TIU) ; Copy 14-node
"RTN","TIURC",164,0)
 N DR,DIE S DIE=8925
"RTN","TIURC",165,0)
 S DR="1401////"_$P($G(TIU("AD#")),U)_";1402////"_$P($G(TIU("TS")),U)_";1403////"_$P(TIUD14,U,3)_";1404////"_$P(TIUD14,U,4)_";1405////"_$P(TIUD14,U,5)
"RTN","TIURC",166,0)
 D ^DIE
"RTN","TIURC",167,0)
 Q
"RTN","TIURC",168,0)
COPY17(DA,TIUD17) ; Copy Subject
"RTN","TIURC",169,0)
 N DR,DIE S DIE=8925
"RTN","TIURC",170,0)
 I $G(TIUD17)']"" Q
"RTN","TIURC",171,0)
 S DR="1701////"_$G(TIUD17) D ^DIE
"RTN","TIURC",172,0)
 Q
"RTN","TIURC",173,0)
COPYTEXT(TIUDA,DA) ; Copy text
"RTN","TIURC",174,0)
 N TIUC,TIUI,TIUJ,TIULINE
"RTN","TIURC",175,0)
 I +$O(^TIU(8925,+TIUDA,"TEXT",0)) M ^TIU(8925,+DA,"TEMP")=^TIU(8925,+TIUDA,"TEXT")
"RTN","TIURC",176,0)
 S (TIUC,TIULINE)=0,TIUJ=+$P($G(^TIU(8925,+DA,"TEMP",0)),U,3)
"RTN","TIURC",177,0)
 F  S TIUC=$O(^TIU(8925,"DAD",TIUDA,TIUC)) Q:+TIUC'>0  D
"RTN","TIURC",178,0)
 . I +$$ISADDNDM^TIULC1(TIUC) Q
"RTN","TIURC",179,0)
 . S TIUI=0 F  S TIUI=$O(^TIU(8925,+TIUC,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIURC",180,0)
 . . S TIUJ=+$G(TIUJ)+1
"RTN","TIURC",181,0)
 . . S ^TIU(8925,+DA,"TEMP",TIUJ,0)=$G(^TIU(8925,+TIUC,"TEXT",TIUI,0))
"RTN","TIURC",182,0)
 . . S ^TIU(8925,+DA,"TEMP",0)="^^"_TIUJ_"^"_TIUJ_"^"_DT_"^^"
"RTN","TIURC",183,0)
 Q
"RTN","TIURD")
0^161^B38740755
"RTN","TIURD",1,0)
TIURD ; SLC/JER - Reassign actions ;5/25/94  13:57
"RTN","TIURD",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURD",3,0)
REASSIGN ; Reassign selected Documents
"RTN","TIURD",4,0)
 N TIUCHNG,TIULST,TIUDA,DFN,TIU,TIUDATA,TIUEDIT,TIUI,TIUY,Y,DIROUT
"RTN","TIURD",5,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURD",6,0)
 S TIUI=0
"RTN","TIURD",7,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURD",8,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURD",9,0)
 . S TIUDA=+$P(TIUDATA,U,2) D EN^VALM("TIU REASSIGN")
"RTN","TIURD",10,0)
 . I +$G(TIUCHNG)=1 D
"RTN","TIURD",11,0)
 . . I $D(VALMDDF("ADMISSION DATE")) D UPDATEM^TIURL(TIUDATA) I 1
"RTN","TIURD",12,0)
 . . E  I $D(VALMDDF("REF DATE")) D UPDATE^TIURL(TIUDATA)
"RTN","TIURD",13,0)
 . . S TIULST=$G(TIULST)_$S($G(TIULST)]"":", ",1:"")_TIUI
"RTN","TIURD",14,0)
 . I +$G(TIUCHNG)=2 D REMOVE^TIULM(TIUDATA) S TIULST=$G(TIULST)_$S($G(TIULST)]"":", ",1:"")_TIUI
"RTN","TIURD",15,0)
 . I '+$G(TIUCHNG) D RESTORE^TIULM(+TIUI)
"RTN","TIURD",16,0)
 W !,"Refreshing the list."
"RTN","TIURD",17,0)
 I $G(TIULST)]"" S VALMSG="** Item"_$S($L(TIULST,",")>1:"s ",$L(TIULST,"-")>1:"s ",1:" ")_TIULST_" Reassigned. **"
"RTN","TIURD",18,0)
 E  S VALMSG="** No changes made... **"
"RTN","TIURD",19,0)
 K VALMY S VALMBCK="R"
"RTN","TIURD",20,0)
 Q
"RTN","TIURD",21,0)
REASSIG1 ; Single record reassign
"RTN","TIURD",22,0)
 N TIUAUTH,TIURSSG,TIUNAME,DA,DR,DIE,TIUTYPE,TIUEDIT,TIUADD,TIUPROMO,TIUY
"RTN","TIURD",23,0)
 N TIUD0,TIUD12,TIUD13
"RTN","TIURD",24,0)
 L +^TIU(8925,+TIUDA):1
"RTN","TIURD",25,0)
 E  W !?5,$C(7),$C(7),$C(7),"Another user is editing this entry." Q
"RTN","TIURD",26,0)
 S TIUD0(0)=$G(^TIU(8925,+TIUDA,0)),TIUD12(0)=$G(^(12)),TIUD13(0)=$G(^(13))
"RTN","TIURD",27,0)
 S TIUTYPE=$P(TIUD0(0),U)
"RTN","TIURD",28,0)
 S TIUNAME=$$PNAME^TIULC1(+TIUTYPE)
"RTN","TIURD",29,0)
 S TIUAUTH=$P(TIUD12(0),U,2)
"RTN","TIURD",30,0)
 D FULL^VALM1
"RTN","TIURD",31,0)
 ; Evaluate whether user is authorized to reassign the record
"RTN","TIURD",32,0)
 ; If user is NOT authorized to reassign record, echo why not and quit
"RTN","TIURD",33,0)
 ; If user IS authorized to reassign record, proceed...
"RTN","TIURD",34,0)
 S TIURSSG=$$CANDO^TIULP(+TIUDA,"REASSIGN")
"RTN","TIURD",35,0)
 I +$G(TIURSSG)'>0 D  G REASS1X
"RTN","TIURD",36,0)
 . W !!,$C(7),$C(7),$C(7),$P(TIURSSG,U,2),!
"RTN","TIURD",37,0)
 . I $$READ^TIUU("EA","Press RETURN to continue...") W ""
"RTN","TIURD",38,0)
 W !,$C(7)
"RTN","TIURD",39,0)
 S TIUY=$$READ^TIUU("YO","Are you sure you want to REASSIGN this "_TIUNAME,"NO","^D REAS1^TIUDIRH")
"RTN","TIURD",40,0)
 G:+TIUY'>0 REASS1X
"RTN","TIURD",41,0)
 ; If the record is an addendum, then ask whether the intended action
"RTN","TIURD",42,0)
 ; is to move, swap it with its own original, or replace its original
"RTN","TIURD",43,0)
 ; with it
"RTN","TIURD",44,0)
 S TIUADD=$$ISADDNDM^TIULC1(+TIUDA)
"RTN","TIURD",45,0)
 I +TIUADD D  G REASS1X
"RTN","TIURD",46,0)
 . D REASSIGA
"RTN","TIURD",47,0)
 . S TIUD0(1)=$G(^TIU(8925,TIUDA,0)),TIUD12(1)=$G(^(12))
"RTN","TIURD",48,0)
 . D AUDREASS^TIURB1(TIUDA,.TIUD0,.TIUD12)
"RTN","TIURD",49,0)
 D REASSIGO
"RTN","TIURD",50,0)
 I $G(DR)]"" D
"RTN","TIURD",51,0)
 . S DA=TIUDA,DIE=8925 D ^DIE
"RTN","TIURD",52,0)
 . I +$G(DA) D
"RTN","TIURD",53,0)
 . . W !!,$G(TIUNAME)," Reassigned."
"RTN","TIURD",54,0)
 . . I '+$G(TIUADD) D UPDTADD(DA),UPDTIRT^TIUDIRT(.TIU,+DA)
"RTN","TIURD",55,0)
 . . D SEND^TIUALRT(DA),ADDENDEL^TIUALRT(DA)
"RTN","TIURD",56,0)
 . . S TIUD0(1)=$G(^TIU(8925,+TIUDA,0)),TIUD12(1)=$G(^(12))
"RTN","TIURD",57,0)
 . . D AUDREASS^TIURB1(TIUDA,.TIUD0,.TIUD12)
"RTN","TIURD",58,0)
 . . S TIUCHNG=1
"RTN","TIURD",59,0)
 . . I $$READ^TIUU("EA","Press RETURN to continue...") W ""
"RTN","TIURD",60,0)
REASS1X L -^TIU(8925,+TIUDA):1
"RTN","TIURD",61,0)
 S VALMBCK=$S(+$G(TIUCHNG):"Q",1:"R")
"RTN","TIURD",62,0)
 Q
"RTN","TIURD",63,0)
REASSIGO ;Reassign an original Document
"RTN","TIURD",64,0)
 N TIU,TIUASK,TIUDPRM
"RTN","TIURD",65,0)
 W !,"Please choose the correct patient and care episode:",!
"RTN","TIURD",66,0)
 ; --- Get a patient ---
"RTN","TIURD",67,0)
 S DFN=+$$PATIENT^TIULA I +DFN'>0 S TIUOUT=1 Q
"RTN","TIURD",68,0)
 ; --- Get Document Parameters for TIUTYPE
"RTN","TIURD",69,0)
 D DOCPRM^TIULC1(TIUTYPE,.TIUDPRM)
"RTN","TIURD",70,0)
 ; --- Get associated visit ---
"RTN","TIURD",71,0)
 S TIULMETH=$$GETLMETH^TIUEDI1(TIUTYPE)
"RTN","TIURD",72,0)
 I '$L(TIULMETH) D  S TIUOUT=1 Q
"RTN","TIURD",73,0)
 . W !,$C(7),"No Visit Linkage Method defined for "
"RTN","TIURD",74,0)
 . W $$PNAME^TIULC1(TIUTYPE),".",!,"Please contact IRM..."
"RTN","TIURD",75,0)
 . I $$READ^TIUU("EA","Press RETURN to continue...") W ""
"RTN","TIURD",76,0)
 X TIULMETH I '$D(TIU) W !,$C(7),"Patient & Visit required." H 2 Q
"RTN","TIURD",77,0)
 ; --- Validate Selection ---
"RTN","TIURD",78,0)
 S TIUVMETH=$$GETVMETH^TIUEDI1(TIUTYPE)
"RTN","TIURD",79,0)
 I '$L(TIUVMETH) D  S TIUOUT=1 Q
"RTN","TIURD",80,0)
 . W !,$C(7),"No Validation Method defined for "
"RTN","TIURD",81,0)
 . W $$PNAME^TIULC1(TIUTYPE),".",!,"Please contact IRM..."
"RTN","TIURD",82,0)
 X TIUVMETH
"RTN","TIURD",83,0)
 I +$G(TIUASK)'>0 D  Q
"RTN","TIURD",84,0)
 . W !,$C(7),$C(7),"Okay, no harm done.",!
"RTN","TIURD",85,0)
 . I $$READ^TIUU("EA","Press RETURN to continue...") W ""
"RTN","TIURD",86,0)
 . S DR=""
"RTN","TIURD",87,0)
 I $L($G(TIU("VSTR"))) D
"RTN","TIURD",88,0)
 . N TIUORIG
"RTN","TIURD",89,0)
 . S TIUORIG=+$O(^TIU(8925,"APTLD",DFN,TIUTYPE,$G(TIU("VSTR")),0))
"RTN","TIURD",90,0)
 . ; If a record of this type already exists for the selected patient
"RTN","TIURD",91,0)
 . ; and visit, and >1 documents/visit are NOT allowed, then echo
"RTN","TIURD",92,0)
 . ; message and quit
"RTN","TIURD",93,0)
 . I +TIUORIG,(+$P(TIUDPRM(0),U,10)'>0) D  Q
"RTN","TIURD",94,0)
 . . S DR="" W !,$C(7),$C(7),$C(7),"This patient already has a "
"RTN","TIURD",95,0)
 . . W $$PNAME^TIULC1(TIUTYPE)," for the selected care episode."
"RTN","TIURD",96,0)
 . . I $$READ^TIUU("EA","Press RETURN to continue...") W ""
"RTN","TIURD",97,0)
 . D DELIRT^TIUDIRT(+TIUDA),QUE^TIUPXAP1
"RTN","TIURD",98,0)
 . S DR=$G(DR)_".02////"_DFN_";.03////"_$S(+$P($G(TIU("VISIT")),U):$P($G(TIU("VISIT")),U),1:"@")_";.07////"_$P($G(TIU("EDT")),U)_";.08////"_$S(+$G(TIU("LDT")):$P($G(TIU("LDT")),U),1:"@")_";.13////"_$P($G(TIU("VSTR")),";",3)
"RTN","TIURD",99,0)
 . S DR=DR_";1205////"_$P($G(TIU("LOC")),U)_";1401////"_$G(TIU("AD#"))_";1402////"_$P($G(TIU("TS")),U)_";1211////"_$P($G(TIU("VLOC")),U)
"RTN","TIURD",100,0)
 . ;Don't change next line for ones that have been signed
"RTN","TIURD",101,0)
 . S:+$P($G(^TIU(8925,+TIUDA,0)),U,5)'>5 DR=DR_";1202;1305///@;1306///@;1208;1209////^S X=$P($G(^TIU(8925,+TIUDA,12)),U,8)"
"RTN","TIURD",102,0)
 Q
"RTN","TIURD",103,0)
REASSIGA ;Reassign an Addendum to an original DS
"RTN","TIURD",104,0)
 N TIUACT,TIUSET S TIUCHNG=0
"RTN","TIURD",105,0)
 W !,"Please choose the appropriate action for this Addendum:"
"RTN","TIURD",106,0)
 S TIUSET="M:move addendum to a different document"
"RTN","TIURD",107,0)
 S TIUSET=TIUSET_";P:promote addendum as document for another visit"
"RTN","TIURD",108,0)
 S TIUSET=TIUSET_";R:replace parent document with this addendum"
"RTN","TIURD",109,0)
 S TIUSET=TIUSET_";S:swap this addendum with its parent document"
"RTN","TIURD",110,0)
 S TIUACT=$$READ^TIUU("S^"_TIUSET,"Select Reassign Action","move")
"RTN","TIURD",111,0)
 I $P(TIUACT,U)="M" D MOVEADD^TIURD1(TIUDA) Q
"RTN","TIURD",112,0)
 I $P(TIUACT,U)="P" D PROMOTE^TIURD1(TIUDA) Q
"RTN","TIURD",113,0)
 I $P(TIUACT,U)="R" D REPLACE^TIURD1(TIUDA) Q
"RTN","TIURD",114,0)
 I $P(TIUACT,U)="S" D SWAPADD^TIURD1(TIUDA)
"RTN","TIURD",115,0)
 Q
"RTN","TIURD",116,0)
UPDTADD(TIUDA) ; Addenda for reassigned original Document are updated
"RTN","TIURD",117,0)
 N DA,DR,DIE,TIUD0,TIUD12,TIUD14
"RTN","TIURD",118,0)
 I $$HASADDEN^TIULC1(+TIUDA) D
"RTN","TIURD",119,0)
 . W !!,$C(7),"Addenda for this Document will be updated & unverified.",!
"RTN","TIURD",120,0)
 . S DA=0 F  S DA=$O(^TIU(8925,"DAD",+TIUDA,DA)) Q:+DA'>0  D
"RTN","TIURD",121,0)
 . . I '+$$ISADDNDM^TIULC1(+DA) Q
"RTN","TIURD",122,0)
 . . S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD12=$G(^(12)),TIUD14=$G(^(14))
"RTN","TIURD",123,0)
 . . S DR=".02////"_$P(TIUD0,U,2)_";.03////"_$P(TIUD0,U,3)_";.04////"_$P(TIUD0,U,4)_";.07////"_$P(TIUD0,U,7)_";.08////"_$S(+$P(TIUD0,U,8):$P(TIUD0,U,8),1:"@")_";.13////"_$P(TIUD0,U,13)
"RTN","TIURD",124,0)
 . . S DR=DR_";1305///@;1306///@;1401////"_$P(TIUD14,U)_";1402////"_$P(TIUD14,U,2)
"RTN","TIURD",125,0)
 . . S DR=DR_";1501///@;1502///@;1503///@;1504///@;1505///@;1507///@;1508///@;1509///@;1510///@;1511///@;1512///@;1513///@"
"RTN","TIURD",126,0)
 . . S DIE=8925 D ^DIE
"RTN","TIURD",127,0)
 . . S DR=".05///"_$$STATUS^TIULC(+TIUDA)_";1205////"_$P(TIUD12,U,5)_";1211////"_$P(TIUD12,U,11)
"RTN","TIURD",128,0)
 . . D ^DIE W "."
"RTN","TIURD",129,0)
 Q
"RTN","TIURD1")
0^204^B51925749
"RTN","TIURD1",1,0)
TIURD1 ; SLC/JER - Reassign actions ;5/25/94  13:57
"RTN","TIURD1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURD1",3,0)
MOVEADD(TIUDA) ; Move an addendum to another document
"RTN","TIURD1",4,0)
 N DFN,TIUDAT,TIUD0,TIUD12,TIUD14,TIUSCRN,TIUMOVE,TIUTYP
"RTN","TIURD1",5,0)
 S TIUTYP=$$CLINDOC^TIULC1(+$G(^TIU(8925,+$P($G(^TIU(8925,+TIUDA,0)),U,6),0)))
"RTN","TIURD1",6,0)
 I +TIUTYP'>0 S TIUTYP=38
"RTN","TIURD1",7,0)
 S TIUTYP(1)="1^"_TIUTYP_U_$P(^TIU(8925.1,+TIUTYP,0),U)
"RTN","TIURD1",8,0)
 D SELPAT^TIULA2(.TIUDAT,TIUTYP,+$G(DFN))
"RTN","TIURD1",9,0)
 I +$G(TIUDAT)'>0,($D(TIUDAT)'>9) S TIUOUT=1 Q
"RTN","TIURD1",10,0)
 S TIUDAT=+$G(TIUDAT(1))
"RTN","TIURD1",11,0)
 D FROMTO(TIUDA,TIUDAT)
"RTN","TIURD1",12,0)
 I +$G(TIUDAT)>0,$$READ^TIUU("YO","Is this Correct","YES")  D  I 1
"RTN","TIURD1",13,0)
 . S TIUMOVE=1 ; $$CANDO^TIULP(+TIUDAT,"VIEW")
"RTN","TIURD1",14,0)
 . I 'TIUMOVE W !,"This Document",$P(TIUMOVE,U,2),! Q
"RTN","TIURD1",15,0)
 . S TIUD0=$G(^TIU(8925,+TIUDAT,0)),TIUD12=$G(^(12)),TIUD14=$G(^(14))
"RTN","TIURD1",16,0)
 . S DR=".02////"_$P(TIUD0,U,2)_";.03////"_$P(TIUD0,U,3)_";.06////"_+TIUDAT_";.07////"_$P(TIUD0,U,7)_";.08////"_$S(+$P(TIUD0,U,8):$P(TIUD0,U,8),1:"@")_";.13////"_$P(TIUD0,U,13)
"RTN","TIURD1",17,0)
 . S DR=DR_";1401////"_$P(TIUD14,U)_";1402////"_$P(TIUD14,U,2)_";1404////"_$P(TIUD14,U,4)_";1305///@;1306///@;1205////"_$P(TIUD12,U,5)_";1211////"_$P(TIUD12,U,11)
"RTN","TIURD1",18,0)
 . S DIE=8925,DA=+TIUDA D ^DIE
"RTN","TIURD1",19,0)
 . K DR N TIUTYP
"RTN","TIURD1",20,0)
 . S DR=".05///"_$$STATUS^TIULC(+TIUDA) D ^DIE
"RTN","TIURD1",21,0)
 . W "." S TIUCHNG=1
"RTN","TIURD1",22,0)
 E  W !,"Okay...No Harm done!" H 2 S TIUCHNG=0
"RTN","TIURD1",23,0)
 Q
"RTN","TIURD1",24,0)
FROMTO(TIUDA,TIUDAT) ; Display the from/to information
"RTN","TIURD1",25,0)
 N TIUF,TIUT,TIUDAD,TIUFEDT,TIUFLDT,TIUTEDT,TIUTLDT
"RTN","TIURD1",26,0)
 S TIUDAD=$P($G(^TIU(8925,+TIUDA,0)),U,6)
"RTN","TIURD1",27,0)
 D GETTIU^TIULD(.TIUF,+TIUDAD)
"RTN","TIURD1",28,0)
 D GETTIU^TIULD(.TIUT,+TIUDAT)
"RTN","TIURD1",29,0)
 S TIUFEDT=$$DATE^TIULS($P(TIUF("EDT"),U),"MM/DD/YY")
"RTN","TIURD1",30,0)
 S TIUFLDT=$$DATE^TIULS($P(TIUF("LDT"),U),"MM/DD/YY")
"RTN","TIURD1",31,0)
 S TIUTEDT=$$DATE^TIULS($P(TIUT("EDT"),U),"MM/DD/YY")
"RTN","TIURD1",32,0)
 S TIUTLDT=$$DATE^TIULS($P(TIUT("LDT"),U),"MM/DD/YY")
"RTN","TIURD1",33,0)
 W !!,"You are about to move the addendum as follows:",!
"RTN","TIURD1",34,0)
 W !,?5,"From",?45,"To",!
"RTN","TIURD1",35,0)
 W !,$P(TIUF("DOCTYP"),U,2),?35," --> ",?40,$P(TIUT("DOCTYP"),U,2)
"RTN","TIURD1",36,0)
 W !,TIUF("PNM")," ",TIUF("PID"),?35," --> ",?40,TIUT("PNM")," ",TIUT("PID")
"RTN","TIURD1",37,0)
 W !,TIUFEDT,$S($L(TIUFLDT):" - "_TIUFLDT,1:""),?35," --> "
"RTN","TIURD1",38,0)
 W ?40,TIUTEDT,$S($L(TIUTLDT):" - "_TIUTLDT,1:""),!
"RTN","TIURD1",39,0)
 Q
"RTN","TIURD1",40,0)
PROMOTE(TIUDA) ; Promote addendum as original document for another visit
"RTN","TIURD1",41,0)
 N DA,DR,DIE,TIUD0,TIUTYPE,TIUPTYPE S TIUD0=$G(^TIU(8925,+TIUDA,0))
"RTN","TIURD1",42,0)
 S TIUTYPE=+$G(^TIU(8925,+$P(TIUD0,U,6),0))
"RTN","TIURD1",43,0)
 S TIUPTYPE=$P($G(^TIU(8925,+$P(TIUD0,U,6),0)),U,4)
"RTN","TIURD1",44,0)
 S DR=".01////"_TIUTYPE_";.04////"_TIUPTYPE_";.06///@;"
"RTN","TIURD1",45,0)
 D REASSIGO^TIURD
"RTN","TIURD1",46,0)
 I '$L($G(DR)) W !!,"Consider using the 'Move' action instead." H 5 Q
"RTN","TIURD1",47,0)
 S DA=+TIUDA,DIE=8925
"RTN","TIURD1",48,0)
 D ^DIE
"RTN","TIURD1",49,0)
 W !!,"ADDENDUM Promoted to be an ORIGINAL ",$$PNAME^TIULC1(TIUTYPE)
"RTN","TIURD1",50,0)
 Q
"RTN","TIURD1",51,0)
REPLACE(TIUDA) ; Replace an original with its addendum
"RTN","TIURD1",52,0)
 N TIUODA,TIUCONT
"RTN","TIURD1",53,0)
 W !!,$C(7),"This is an IRREVERSIBLE action..."
"RTN","TIURD1",54,0)
 S TIUCONT=$$READ^TIUU("YA","Are you SURE you wish to continue? ","NO")
"RTN","TIURD1",55,0)
 I '+TIUCONT S TIUCHNG=0 W !,"No changes made." Q
"RTN","TIURD1",56,0)
 W !,"Okay, but don't say I didn't warn you"
"RTN","TIURD1",57,0)
 S TIUODA=+$P(^TIU(8925,TIUDA,0),U,6) Q:+TIUODA'>0
"RTN","TIURD1",58,0)
 ; Move non-WP fields from addendum to original
"RTN","TIURD1",59,0)
 D SWAPFLDS(TIUODA,TIUDA,0)
"RTN","TIURD1",60,0)
 ; Move original and it's components into ^TIU(8925,+TIUODA,"TEMP")
"RTN","TIURD1",61,0)
 D BUFFER^TIUEDIT(TIUODA) W "."
"RTN","TIURD1",62,0)
 ; Replace ^TIU(8925,+TIUODA,"TEMP") with ^TIU(8925,+TIUDA,"TEXT")
"RTN","TIURD1",63,0)
 K ^TIU(8925,+TIUODA,"TEMP")
"RTN","TIURD1",64,0)
 M ^TIU(8925,+TIUODA,"TEMP")=^TIU(8925,+TIUDA,"TEXT") W "."
"RTN","TIURD1",65,0)
 ; File changes to original
"RTN","TIURD1",66,0)
 K ^TIU(8925,+TIUODA,"TEXT")
"RTN","TIURD1",67,0)
 D MERGTEXT^TIUEDI1(TIUODA) W "."
"RTN","TIURD1",68,0)
 K ^TIU(8925,+TIUODA,"TEMP")
"RTN","TIURD1",69,0)
 ; Finally, Delete Addendum Record.
"RTN","TIURD1",70,0)
 D DELETE^TIUEDIT(TIUDA,0,"",1) W "...Done." S TIUCHNG=2
"RTN","TIURD1",71,0)
 Q
"RTN","TIURD1",72,0)
SWAPADD(TIUDA) ; Swap an addendum with its original document
"RTN","TIURD1",73,0)
 N TIUODA,TIUCONT K ^TMP("TIUSWAP",$J)
"RTN","TIURD1",74,0)
 W !!,$C(7),"Don't worry...This is a REVERSIBLE action."
"RTN","TIURD1",75,0)
 S TIUCONT=$$READ^TIUU("YA","Even so, are you SURE you wish to continue? ","NO")
"RTN","TIURD1",76,0)
 I '+TIUCONT S TIUCHNG=0 W !,"No changes made." Q
"RTN","TIURD1",77,0)
 W !,"Okay, you can always swap 'em back"
"RTN","TIURD1",78,0)
 S TIUODA=+$P(^TIU(8925,TIUDA,0),U,6) Q:+TIUODA'>0
"RTN","TIURD1",79,0)
 ; Swap the non-WP fields
"RTN","TIURD1",80,0)
 D SWAPFLDS(TIUODA,TIUDA,1)
"RTN","TIURD1",81,0)
 ; Move original and it's components into ^TIU(8925,+TIUODA,"TEMP")
"RTN","TIURD1",82,0)
 D BUFFER^TIUEDIT(TIUODA) W "."
"RTN","TIURD1",83,0)
 ; Move ^TIU(8925,+TIUODA,"TEMP") into ^TMP("TIUSWAP",$J)
"RTN","TIURD1",84,0)
 M ^TMP("TIUSWAP",$J)=^TIU(8925,+TIUODA,"TEMP") W "."
"RTN","TIURD1",85,0)
 ; Replace ^TIU(8925,+TIUODA,"TEMP") with ^TIU(8925,+TIUDA,"TEXT")
"RTN","TIURD1",86,0)
 K ^TIU(8925,+TIUODA,"TEMP")
"RTN","TIURD1",87,0)
 M ^TIU(8925,+TIUODA,"TEMP")=^TIU(8925,+TIUDA,"TEXT") W "."
"RTN","TIURD1",88,0)
 ; File changes to original
"RTN","TIURD1",89,0)
 K ^TIU(8925,+TIUODA,"TEXT")
"RTN","TIURD1",90,0)
 D MERGTEXT^TIUEDI1(TIUODA) W "."
"RTN","TIURD1",91,0)
 K ^TIU(8925,+TIUODA,"TEMP")
"RTN","TIURD1",92,0)
 ; Merge ^TMP("TIUSWAP",$J) into ^TIU(8925,+TIUDA,"TEMP")
"RTN","TIURD1",93,0)
 K ^TIU(8925,+TIUDA,"TEMP")
"RTN","TIURD1",94,0)
 M ^TIU(8925,+TIUDA,"TEMP")=^TMP("TIUSWAP",$J) W "."
"RTN","TIURD1",95,0)
 ; File changes to addendum
"RTN","TIURD1",96,0)
 K ^TIU(8925,+TIUDA,"TEXT")
"RTN","TIURD1",97,0)
 D MERGTEXT^TIUEDI1(TIUDA) W "."
"RTN","TIURD1",98,0)
 ; Finally, clean up ^TIU(8925,+TIUDA,"TEMP" and ^TMP("TIUSWAP",$J)
"RTN","TIURD1",99,0)
 K ^TIU(8925,+TIUDA,"TEMP"),^TMP("TIUSWAP",$J) W "...Done." S TIUCHNG=2
"RTN","TIURD1",100,0)
 Q
"RTN","TIURD1",101,0)
SWAPFLDS(TIUODA,TIUADA,SWAP) ; Move Identifier fields
"RTN","TIURD1",102,0)
 N DA,DR,DIE,TIUOD12,TIUAD12,TIUOD13,TIUAD13,TIUOD15,TIUAD15
"RTN","TIURD1",103,0)
 S TIUOD12=$G(^TIU(8925,TIUODA,12)),TIUOD13=$G(^(13)),TIUOD15=$G(^(15))
"RTN","TIURD1",104,0)
 S TIUAD12=$G(^TIU(8925,TIUADA,12)),TIUAD13=$G(^(13)),TIUAD15=$G(^(15))
"RTN","TIURD1",105,0)
 S DR="1201////"_$S(+TIUAD12>0:+TIUAD12,1:"@")_";1202////"_$P(TIUAD12,U,2)
"RTN","TIURD1",106,0)
 S DR=DR_";1204////"_$P(TIUAD12,U,4)_";1208////"_$S($P(TIUAD12,U,8)]"":$P(TIUAD12,U,8),1:"@")_";1209////"_$S($P(TIUAD12,U,9)]"":$P(TIUAD12,U,9),1:"@")
"RTN","TIURD1",107,0)
 S DA=TIUODA,DIE="^TIU(8925," D ^DIE
"RTN","TIURD1",108,0)
 S DR="1302////"_$P(TIUAD13,U,2)_";1303////"_$P(TIUAD13,U,3)_";1304////"_$S($P(TIUAD13,U,4)]"":$P(TIUAD13,U,4),1:"@")
"RTN","TIURD1",109,0)
 S DR=DR_";1305////"_$S($P(TIUAD13,U,5)]"":$P(TIUAD13,U,5),1:"@")_";1306////"_$S($P(TIUAD13,U,6)]"":$P(TIUAD13,U,6),1:"@")_";1307////"_$S($P(TIUAD13,U,7)]"":$P(TIUAD13,U,7),1:"@")
"RTN","TIURD1",110,0)
 S DA=TIUODA,DIE="^TIU(8925," D ^DIE
"RTN","TIURD1",111,0)
 S DR="1501////"_$S($P(TIUAD15,U)]"":$P(TIUAD15,U),1:"@")_";1502///"_$S($P(TIUAD15,U,2)]"":$P(TIUAD15,U,2),1:"@")_";1503////"_$S($P(TIUAD15,U,3)]"":$P(TIUAD15,U,3),1:"@")
"RTN","TIURD1",112,0)
 S DR=DR_";1504////"_$S($P(TIUAD15,U,4)]"":$P(TIUAD15,U,4),1:"@")_";1505////"_$S($P(TIUAD15,U,5)]"":$P(TIUAD15,U,5),1:"@")_";1506////"_$S($P(TIUAD15,U,6)]"":$P(TIUAD15,U,6),1:"@")
"RTN","TIURD1",113,0)
 S DA=TIUODA,DIE="^TIU(8925," D ^DIE
"RTN","TIURD1",114,0)
 S DR="1507////"_$S($P(TIUAD15,U,7)]"":$P(TIUAD15,U,7),1:"@")_";1508////"_$S($P(TIUAD15,U,8)]"":$P(TIUAD15,U,8),1:"@")_";1509////"_$S($P(TIUAD15,U,9)]"":$P(TIUAD15,U,9),1:"@")
"RTN","TIURD1",115,0)
 S DR=DR_";1510////"_$S($P(TIUAD15,U,10)]"":$P(TIUAD15,U,10),1:"@")_";1511////"_$S($P(TIUAD15,U,11)]"":$P(TIUAD15,U,11),1:"@")_";1512////"_$S($P(TIUAD15,U,12)]"":$P(TIUAD15,U,12),1:"@")_";1513////"_$S($P(TIUAD15,U,13)]"":$P(TIUAD15,U,13),1:"@")
"RTN","TIURD1",116,0)
 S DA=TIUODA,DIE="^TIU(8925," D ^DIE
"RTN","TIURD1",117,0)
 I '+$G(SWAP) Q
"RTN","TIURD1",118,0)
 S DR="1201////"_$S(+TIUOD12>0:+TIUOD12,1:"@")_";1202////"_$P(TIUOD12,U,2)
"RTN","TIURD1",119,0)
 S DR=DR_";1204////"_$P(TIUOD12,U,4)_";1208////"_$S($P(TIUOD12,U,8)]"":$P(TIUOD12,U,8),1:"@")_";1209////"_$S($P(TIUOD12,U,9)]"":$P(TIUOD12,U,9),1:"@")
"RTN","TIURD1",120,0)
 S DA=TIUADA,DIE="^TIU(8925," D ^DIE
"RTN","TIURD1",121,0)
 S DR="1302////"_$P(TIUOD13,U,2)_";1303////"_$P(TIUOD13,U,3)_";1304////"_$S($P(TIUOD13,U,4)]"":$P(TIUOD13,U,4),1:"@")
"RTN","TIURD1",122,0)
 S DR=DR_";1305////"_$S($P(TIUOD13,U,5)]"":$P(TIUOD13,U,5),1:"@")_";1306////"_$S($P(TIUOD13,U,6)]"":$P(TIUOD13,U,6),1:"@")_";1307////"_$S($P(TIUOD13,U,7)]"":$P(TIUOD13,U,7),1:"@")
"RTN","TIURD1",123,0)
 S DA=TIUADA,DIE="^TIU(8925," D ^DIE
"RTN","TIURD1",124,0)
 S DR="1501////"_$S($P(TIUOD15,U)]"":$P(TIUOD15,U),1:"@")_";1502///"_$S($P(TIUOD15,U,2)]"":$P(TIUOD15,U,2),1:"@")_";1503////"_$S($P(TIUOD15,U,3)]"":$P(TIUOD15,U,3),1:"@")
"RTN","TIURD1",125,0)
 S DR=DR_";1504////"_$S($P(TIUOD15,U,4)]"":$P(TIUOD15,U,4),1:"@")_";1505////"_$S($P(TIUOD15,U,5)]"":$P(TIUOD15,U,5),1:"@")_";1506////"_$S($P(TIUOD15,U,6)]"":$P(TIUOD15,U,6),1:"@")
"RTN","TIURD1",126,0)
 S DA=TIUADA,DIE="^TIU(8925," D ^DIE
"RTN","TIURD1",127,0)
 S DR="1507////"_$S($P(TIUOD15,U,7)]"":$P(TIUOD15,U,7),1:"@")_";1508////"_$S($P(TIUOD15,U,8)]"":$P(TIUOD15,U,8),1:"@")_";1509////"_$S($P(TIUOD15,U,9)]"":$P(TIUOD15,U,9),1:"@")
"RTN","TIURD1",128,0)
 S DR=DR_";1510////"_$S($P(TIUOD15,U,10)]"":$P(TIUOD15,U,10),1:"@")_";1511////"_$S($P(TIUOD15,U,11)]"":$P(TIUOD15,U,11),1:"@")_";1512////"_$S($P(TIUOD15,U,12)]"":$P(TIUOD15,U,12),1:"@")_";1513////"_$S($P(TIUOD15,U,13)]"":$P(TIUOD15,U,13),1:"@")
"RTN","TIURD1",129,0)
 S DA=TIUADA,DIE="^TIU(8925," D ^DIE
"RTN","TIURD1",130,0)
 Q
"RTN","TIURE")
0^162^B14984642
"RTN","TIURE",1,0)
TIURE ; SLC/JER - Error handler actions ;9/1/93  11:29
"RTN","TIURE",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURE",3,0)
PRINT ; Print Buffer record associated w/unresolved filing error
"RTN","TIURE",4,0)
 N TIUDA,TIUDATA,TIUI,DIROUT
"RTN","TIURE",5,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURE",6,0)
 S TIUI=0
"RTN","TIURE",7,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURE",8,0)
 . S TIUDATA=$G(^TMP("TIUERRIDX",$J,TIUI))
"RTN","TIURE",9,0)
 . S (TIUDA,TIUDA(TIUI))=+$P(TIUDATA,U,3) D RESTORE^TIULM(+$O(@VALMAR@("PICK",TIUI,0)))
"RTN","TIURE",10,0)
 . I +TIUDA'>0!'$D(^TIU(8925.2,+TIUDA,0))!+$P(^TIU(8925.4,+$P(TIUDATA,U,2),0),U,6) W !!,"Item #",+TIUI," is already resolved." K TIUDA(TIUI) H 3 Q
"RTN","TIURE",11,0)
 I $D(TIUDA)'<9 D
"RTN","TIURE",12,0)
 . S ZTRTN="PRINT1^TIURE",ZTDESC="Print Report Buffer"
"RTN","TIURE",13,0)
 . D CLEAR^VALM1,DEVICE^TIUPRDS
"RTN","TIURE",14,0)
 . S TIUI=$$READ^TIUU("FOA","Press RETURN to continue...")
"RTN","TIURE",15,0)
 K VALMY S VALMBCK="R"
"RTN","TIURE",16,0)
 Q
"RTN","TIURE",17,0)
PRINT1 ; Print a single buffer record
"RTN","TIURE",18,0)
 N DIC,TIUI,FLDS,FR,TO,L,BY,IOP S TIUI=0
"RTN","TIURE",19,0)
 F  S TIUI=$O(TIUDA(TIUI)) Q:+TIUI'>0  D
"RTN","TIURE",20,0)
 . S IOP=$S($D(ZTIO):ZTIO,$D(ION):ION,1:"") Q:IOP']""
"RTN","TIURE",21,0)
 . S DIC="^TIU(8925.2,",FLDS="[TIU PRINT REPORT BUFFER]",L=0
"RTN","TIURE",22,0)
 . S BY=.01,(FR,TO)=+$G(^TIU(8925.2,+TIUDA(TIUI),0))
"RTN","TIURE",23,0)
 . D EN1^DIP
"RTN","TIURE",24,0)
 Q
"RTN","TIURE",25,0)
EDIT ; Edit Buffer record associated w/unresolved filing error
"RTN","TIURE",26,0)
 N TIUDA,BUFDA,TIUDATA,TIUI,DIROUT
"RTN","TIURE",27,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURE",28,0)
 S TIUI=0
"RTN","TIURE",29,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURE",30,0)
 . S TIUDATA=$G(^TMP("TIUERRIDX",$J,TIUI))
"RTN","TIURE",31,0)
 . S BUFDA=+$P(TIUDATA,U,3)
"RTN","TIURE",32,0)
 . ;I +BUFDA'>0!'$D(^TIU(8925.2,+BUFDA,0))!+$P(^TIU(8925.4,+$P(TIUDATA,U,2),0),U,6) W !!,"Item #",+TIUI," is already resolved." D RESTORE^TIULM(+$O(@VALMAR@("PICK",TIUI,0))) H 3 Q
"RTN","TIURE",33,0)
 . W !!,"Resolving Event #",TIUI
"RTN","TIURE",34,0)
 . S TIUDA=+$P(TIUDATA,U,2)
"RTN","TIURE",35,0)
 . D EN^VALM("TIU DISPLAY FILING EVENT")
"RTN","TIURE",36,0)
 . D RESTORE^TIULM(+$O(@VALMAR@("PICK",TIUI,0)))
"RTN","TIURE",37,0)
 W !,"Refreshing the list."
"RTN","TIURE",38,0)
 D BUILD^TIUELST($P(^TMP("TIUERR",$J,0),U,2),$P(^(0),U,3),TIUEDT,TIULDT)
"RTN","TIURE",39,0)
 K VALMY S VALMBCK="R"
"RTN","TIURE",40,0)
 Q
"RTN","TIURE",41,0)
EDIT1 ; Single record edit
"RTN","TIURE",42,0)
 ; Receives TIUDATA
"RTN","TIURE",43,0)
 N DIC,ERRDA,ERRTYPE,RETRY,DWPK K XQAKILL
"RTN","TIURE",44,0)
 D FULL^VALM1
"RTN","TIURE",45,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIURE",46,0)
 S ERRDA=+$P(TIUDATA,U,2),ERRTYPE=$P(^TIU(8925.4,+ERRDA,0),U,8)
"RTN","TIURE",47,0)
 I +ERRTYPE=0 W !!,"Item #",+TIUDATA," was a successful filing event." H 3 Q
"RTN","TIURE",48,0)
 I +ERRTYPE=1 D FILERR(ERRDA)
"RTN","TIURE",49,0)
 I +ERRTYPE=2 D FLDERR(ERRDA)
"RTN","TIURE",50,0)
 Q
"RTN","TIURE",51,0)
FILERR(ERRDA) ; Resolve filing errors
"RTN","TIURE",52,0)
 N TIUI,INQUIRE,BUFDA,TIUTYPE,RESCODE
"RTN","TIURE",53,0)
 S TIUI=0,BUFDA=+$P($G(^TIU(8925.4,+ERRDA,0)),U,5)
"RTN","TIURE",54,0)
 I +BUFDA'>0 Q
"RTN","TIURE",55,0)
 W !!,"The header of the failed record looks like this:",!
"RTN","TIURE",56,0)
 F  S TIUI=$O(^TIU(8925.4,+ERRDA,"HEAD",TIUI)) Q:+TIUI'>0  D
"RTN","TIURE",57,0)
 . W !,$G(^TIU(8925.4,+ERRDA,"HEAD",TIUI,0))
"RTN","TIURE",58,0)
 S TIUTYPE=$P($G(^TIU(8925.4,+ERRDA,0)),U,3)
"RTN","TIURE",59,0)
 I $L(TIUTYPE) S TIUTYPE=+$$WHATYPE^TIUPUTPN(TIUTYPE)
"RTN","TIURE",60,0)
 I +TIUTYPE S RESCODE=$$FIXCODE^TIULC1(+TIUTYPE) I 1
"RTN","TIURE",61,0)
 E  S RESCODE="D GETPAT^TIUCHLP"
"RTN","TIURE",62,0)
 W ! S INQUIRE=$$READ^TIUU("YO","Inquire to patient record","YES")
"RTN","TIURE",63,0)
 I +INQUIRE X RESCODE
"RTN","TIURE",64,0)
 W !!,"You may now edit the buffered upload data."
"RTN","TIURE",65,0)
 S DIC="^TIU(8925.2,"_+BUFDA_",""TEXT"",",DWPK=1 D EN^DIWE
"RTN","TIURE",66,0)
 S RETRY=$$READ^TIUU("YO","Now would you like to retry the filer","YES","^D FIL^TIUDIRH")
"RTN","TIURE",67,0)
 I +RETRY D
"RTN","TIURE",68,0)
 . D ALERTDEL^TIUPEVNT(+BUFDA),RESOLVE^TIUPEVNT(+ERRDA)
"RTN","TIURE",69,0)
 . D FILE^TIUUPLD(+BUFDA)
"RTN","TIURE",70,0)
 Q
"RTN","TIURE",71,0)
FLDERR(EVNTDA) ; Resolve field errors
"RTN","TIURE",72,0)
 N DIE,DA,DR,ERRDESC,EVNTDA1,EVNTREC S EVNTDA1=0
"RTN","TIURE",73,0)
 S ERRDESC=$P(^TIU(8925.4,+EVNTDA,0),U,4)
"RTN","TIURE",74,0)
 W !!,"You may now enter the correct information:",!
"RTN","TIURE",75,0)
 W !,ERRDESC
"RTN","TIURE",76,0)
 F  S EVNTDA1=$O(^TIU(8925.4,EVNTDA,1,EVNTDA1)) Q:+EVNTDA1'>0  D
"RTN","TIURE",77,0)
 . S EVNTREC=$G(^TIU(8925.4,EVNTDA,1,EVNTDA1,0)) Q:+EVNTREC'>0
"RTN","TIURE",78,0)
 . S DIE=$P(EVNTREC,U),DA=$P(EVNTREC,U,2)
"RTN","TIURE",79,0)
 . S DR=$P(EVNTREC,U,3)_"//"_$P(EVNTREC,U,4)
"RTN","TIURE",80,0)
 . D ^DIE
"RTN","TIURE",81,0)
 D FLDRSLV^TIUPEVNT(EVNTDA)
"RTN","TIURE",82,0)
 Q
"RTN","TIURH")
0^163^B3583027
"RTN","TIURH",1,0)
TIURH ; SLC/JER - Review Screen Header ;4/20/94  16:18
"RTN","TIURH",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURH",3,0)
HDR ; Initialize header for clinician's review screen
"RTN","TIURH",4,0)
 N BY,TIUI,TIUX,SCREEN,STATUS,RANGE,TIUBY,TIUDOCS,XREF
"RTN","TIURH",5,0)
 S TIUX=$G(^TMP("TIUR",$J,0)),STATUS=$P(TIUX,U,2),SCREEN=$P(TIUX,U,3,99)
"RTN","TIURH",6,0)
 S VALM("TITLE")=$S($L(STATUS,",")>1:$S(VALM("ENTITY")="Document":"Clinical",1:""),1:STATUS)
"RTN","TIURH",7,0)
 I $G(XQY0)["MY UNSIGNED" S VALM("TITLE")="MY UNSIGNED"
"RTN","TIURH",8,0)
 S:$L(VALM("TITLE")) VALM("TITLE")=VALM("TITLE")_" "
"RTN","TIURH",9,0)
 S VALM("TITLE")=VALM("TITLE")_$S($L(VALM("ENTITY")):$$NTTNM(VALM("ENTITY")),1:"Document")_"s"
"RTN","TIURH",10,0)
 I +TIUEDT>1 S RANGE=" from "_$$DATE^TIULS(TIUEDT,"MM/DD/YY")_" to "_$$DATE^TIULS(TIULDT,"MM/DD/YY")
"RTN","TIURH",11,0)
 F TIUI=1:1:$L(SCREEN,";") D
"RTN","TIURH",12,0)
 . S XREF=$P($P(SCREEN,";",TIUI),U),XREF=$O(^TIU(8925.8,"C",XREF,0))
"RTN","TIURH",13,0)
 . S TIUBY=$G(TIUBY)_$S($G(TIUBY)]"":" or ",1:"")
"RTN","TIURH",14,0)
 . S TIUBY=$G(TIUBY)_$P($G(^TIU(8925.8,+XREF,0)),U)
"RTN","TIURH",15,0)
 . S:$P($P(SCREEN,";",TIUI),U,3)]"" TIUBY=$G(TIUBY)_" ("_$P($P(SCREEN,";",TIUI),U,3)_")"
"RTN","TIURH",16,0)
 S BY="by "_TIUBY
"RTN","TIURH",17,0)
 ; I BY'["ALL",(BY'["SUBJECT") S BY=BY_" for "_$P($P(SCREEN,U,3),";")
"RTN","TIURH",18,0)
 S VALMHDR(1)=$$CENTER^TIULS(BY_$S($L(SCREEN,";")=1:$G(RANGE),1:""))
"RTN","TIURH",19,0)
 S TIUDOCS=$J(+$G(^TMP("TIUR",$J,0)),4)_" documents"
"RTN","TIURH",20,0)
 S VALMHDR(1)=$$SETSTR^VALM1(TIUDOCS,VALMHDR(1),(IOM-$L(TIUDOCS)),$L(TIUDOCS))
"RTN","TIURH",21,0)
 ; I $L($G(RANGE)) S VALMHDR(2)=$$CENTER^TIULS(RANGE)
"RTN","TIURH",22,0)
 Q
"RTN","TIURH",23,0)
NTTNM(NAME) ; Handle plural names appropriately
"RTN","TIURH",24,0)
 I "Yy"[$E(NAME,$L(NAME)) S NAME=$E(NAME,1,($L(NAME)-1))_"ie"
"RTN","TIURH",25,0)
 I NAME="Discharge Summarie" S NAME="Disch Summarie"
"RTN","TIURH",26,0)
 Q NAME
"RTN","TIURL")
0^164^B14210183
"RTN","TIURL",1,0)
TIURL ; SLC/JER - List Management Library ;2/9/95  18:19
"RTN","TIURL",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURL",3,0)
UPDATE(ITEM) ; Updates list following actions
"RTN","TIURL",4,0)
 N DIC,DIQ,DA,DR,TIUR,PT,MOM,ADT,DDT,LCT,AUT,AMD,EDT,SDT,XDT,RMD,TIULST4
"RTN","TIURL",5,0)
 N TIULINE
"RTN","TIURL",6,0)
 S DIQ="TIUR",DIC=8925,DIQ(0)="IE",DA=+$P(ITEM,U,2)
"RTN","TIURL",7,0)
 S TIULINE=$G(^TMP("TIUR",$J,+ITEM,0))
"RTN","TIURL",8,0)
 S DR=".01;.02;.05;.07;.08;1202;1301;1204;1208;1501;1507" D EN^DIQ1
"RTN","TIURL",9,0)
 Q:$D(TIUR)'>9
"RTN","TIURL",10,0)
 S DOC=$$PNAME^TIULC1(+TIUR(8925,DA,.01,"I"))
"RTN","TIURL",11,0)
 I DOC="Addendum" S DOC=DOC_" to "_$$PNAME^TIULC1(+$G(^TIU(8925,+$P(^TIU(8925,+DA,0),U,6),0)))
"RTN","TIURL",12,0)
 S PT=$$NAME^TIULS(TIUR(8925,DA,.02,"E"),"LAST,FI MI")
"RTN","TIURL",13,0)
 I +$O(^TIU(8925,"DAD",+DA,0)),$$HASADDEN^TIULC1(DA) S PT="+ "_PT
"RTN","TIURL",14,0)
 S TIULST4=$E($P($G(^DPT(TIUR(8925,DA,.02,"I"),0)),U,9),6,9)
"RTN","TIURL",15,0)
 S TIULST4="("_$E(TIUR(8925,DA,.02,"E"))_TIULST4_")"
"RTN","TIURL",16,0)
 S ADT=$$DATE^TIULS(TIUR(8925,DA,.07,"I"),"MM/DD/YY")
"RTN","TIURL",17,0)
 S DDT=$$DATE^TIULS(TIUR(8925,DA,.08,"I"),"MM/DD/YY")
"RTN","TIURL",18,0)
 S AMD=$$NAME^TIULS(TIUR(8925,DA,1208,"E"),"LAST, FI MI")
"RTN","TIURL",19,0)
 S AUT=$$NAME^TIULS(TIUR(8925,DA,1202,"E"),"LAST, FI MI")
"RTN","TIURL",20,0)
 S EDT=$$DATE^TIULS(TIUR(8925,DA,1301,"I"),"MM/DD/YY")
"RTN","TIURL",21,0)
 S SDT=$S(+TIUR(8925,DA,1507,"I"):TIUR(8925,DA,1507,"I"),TIUR(8925,DA,.05,"I")'<7:+TIUR(8925,DA,1501,"I"),1:"")
"RTN","TIURL",22,0)
 S SDT=$$DATE^TIULS(SDT,"MM/DD/YY")
"RTN","TIURL",23,0)
 S TIUREC=$$SETFLD^VALM1(+ITEM,"","NUMBER")
"RTN","TIURL",24,0)
 S TIUREC=$$SETFLD^VALM1($$LOWER^TIULS(TIUR(8925,DA,.05,"E")),TIUREC,"STATUS")
"RTN","TIURL",25,0)
 S TIUREC=$$SETFLD^VALM1(TIULST4,TIUREC,"LAST I/LAST 4")
"RTN","TIURL",26,0)
 S TIUREC=$$SETFLD^VALM1(PT,TIUREC,"PATIENT NAME")
"RTN","TIURL",27,0)
 S TIUREC=$$SETFLD^VALM1(DOC,TIUREC,"DOCUMENT TYPE")
"RTN","TIURL",28,0)
 ; S TIUREC=$$SETFLD^VALM1(ADT,TIUREC,"ADMISSION DATE")
"RTN","TIURL",29,0)
 S TIUREC=$$SETFLD^VALM1(EDT,TIUREC,"REF DATE")
"RTN","TIURL",30,0)
 S TIUREC=$$SETFLD^VALM1(SDT,TIUREC,"SIG DATE")
"RTN","TIURL",31,0)
 S TIUREC=$$SETFLD^VALM1(AUT,TIUREC,"AUTHOR")
"RTN","TIURL",32,0)
 S TIUREC=$$SETFLD^VALM1(AMD,TIUREC,"COSIGNER")
"RTN","TIURL",33,0)
 S ^TMP("TIUR",$J,+ITEM,0)=TIUREC
"RTN","TIURL",34,0)
 D RESTORE^VALM10(+ITEM),CNTRL^VALM10(+ITEM,1,VALM("RM"),IOINHI,IOINORM)
"RTN","TIURL",35,0)
 Q
"RTN","TIURL",36,0)
UPDATEM(ITEM) ; Update list element for MIS Review screens
"RTN","TIURL",37,0)
 N DIC,DIQ,DA,DR,TIUR,PT,MOM,ADT,DDT,LCT,AUT,AMD,EDT,SDT,XDT,RMD,TIULST4
"RTN","TIURL",38,0)
 N TIULINE
"RTN","TIURL",39,0)
 S DIQ="TIUR",DIC=8925,DIQ(0)="IE",DA=+$P(ITEM,U,2)
"RTN","TIURL",40,0)
 S DR=".01;.02;.05;.07;.08;.1;1202;1204;1208;1209;1301;1307;1501;1507"
"RTN","TIURL",41,0)
 D EN^DIQ1
"RTN","TIURL",42,0)
 S DOC=$$PNAME^TIULC1(+TIUR(8925,DA,.01,"I"))
"RTN","TIURL",43,0)
 I DOC="Addendum" S DOC=DOC_" to "_$$PNAME^TIULC1(+$G(^TIU(8925,+$P(^TIU(8925,+DA,0),U,6),0)))
"RTN","TIURL",44,0)
 S PT=$$NAME^TIULS(TIUR(8925,DA,.02,"E"),"LAST,FI MI")
"RTN","TIURL",45,0)
 I +$O(^TIU(8925,"DAD",+DA,0)),$$HASADDEN^TIULC1(DA) S PT="+ "_PT
"RTN","TIURL",46,0)
 S TIUP=$$URGENCY^TIURM(+DA)
"RTN","TIURL",47,0)
 S:TIUP=1 PT=$S(PT["+":"*",1:"* ")_PT
"RTN","TIURL",48,0)
 S TIULST4=$E($P($G(^DPT(TIUR(8925,DA,.02,"I"),0)),U,9),6,9)
"RTN","TIURL",49,0)
 S TIULST4="("_$E(TIUR(8925,DA,.02,"E"))_TIULST4_")"
"RTN","TIURL",50,0)
 S ADT=$$DATE^TIULS(TIUR(8925,DA,.07,"I"),"MM/DD/YY")
"RTN","TIURL",51,0)
 S DDT=$$DATE^TIULS(TIUR(8925,DA,.08,"I"),"MM/DD/YY")
"RTN","TIURL",52,0)
 S AMD=$$NAME^TIULS(TIUR(8925,DA,1209,"E"),"LAST, FI MI")
"RTN","TIURL",53,0)
 S AUT=$$NAME^TIULS(TIUR(8925,DA,1202,"E"),"LAST, FI MI")
"RTN","TIURL",54,0)
 S EDT=$$DATE^TIULS(TIUR(8925,DA,1307,"I"),"MM/DD/YY")
"RTN","TIURL",55,0)
 S SDT=$S(+TIUR(8925,DA,1507,"I"):TIUR(8925,DA,1507,"I"),TIUR(8925,DA,.05,"I")'<7:+TIUR(8925,DA,1501,"I"),1:"")
"RTN","TIURL",56,0)
 S SDT=$$DATE^TIULS(SDT,"MM/DD/YY")
"RTN","TIURL",57,0)
 S LCT=$G(TIUR(8925,DA,.1,"E"))
"RTN","TIURL",58,0)
 S TIUREC=$$SETFLD^VALM1(+ITEM,"","NUMBER")
"RTN","TIURL",59,0)
 S TIUREC=$$SETFLD^VALM1(PT,TIUREC,"PATIENT NAME")
"RTN","TIURL",60,0)
 S TIUREC=$$SETFLD^VALM1(TIULST4,TIUREC,"LAST I/LAST 4")
"RTN","TIURL",61,0)
 S TIUREC=$$SETFLD^VALM1(DOC,TIUREC,"DOCUMENT TYPE")
"RTN","TIURL",62,0)
 S TIUREC=$$SETFLD^VALM1(ADT,TIUREC,"ADMISSION DATE")
"RTN","TIURL",63,0)
 S TIUREC=$$SETFLD^VALM1(DDT,TIUREC,"DISCH DATE")
"RTN","TIURL",64,0)
 S TIUREC=$$SETFLD^VALM1(EDT,TIUREC,"DICT DATE")
"RTN","TIURL",65,0)
 S TIUREC=$$SETFLD^VALM1(LCT,TIUREC,"LINE COUNT")
"RTN","TIURL",66,0)
 S TIUREC=$$SETFLD^VALM1($$LOWER^TIULS(TIUR(8925,DA,.05,"E")),TIUREC,"STATUS")
"RTN","TIURL",67,0)
 S TIUREC=$$SETFLD^VALM1(AUT,TIUREC,"AUTHOR")
"RTN","TIURL",68,0)
 S TIUREC=$$SETFLD^VALM1(AMD,TIUREC,"ATTENDING")
"RTN","TIURL",69,0)
 S ^TMP("TIUR",$J,+ITEM,0)=TIUREC
"RTN","TIURL",70,0)
 D RESTORE^VALM10(+ITEM),CNTRL^VALM10(+ITEM,1,VALM("RM"),IOINHI,IOINORM)
"RTN","TIURL",71,0)
 Q
"RTN","TIURM")
0^165^B59243058
"RTN","TIURM",1,0)
TIURM ; SLC/JER - MIS Document Review ;10/11/94  11:09
"RTN","TIURM",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURM",3,0)
MAKELIST(TIUCLASS) ; Get Search Criteria
"RTN","TIURM",4,0)
 N TIUI,SCREEN,STATUS,TIUTYP,TIUSTAT,TIUEDFLT,TIUDCL,TIUDPRMT K DIROUT
"RTN","TIURM",5,0)
STATUS S STATUS=$S($D(TIUQUIK):$$SELSTAT^TIULA(.TIUSTAT,"F","UNSIGNED,UNCOSIGNED"),1:$$SELSTAT^TIULA(.TIUSTAT,"A",$$DFLTSTAT(DUZ)))
"RTN","TIURM",6,0)
 I +STATUS<0 S VALMQUIT=1 Q
"RTN","TIURM",7,0)
DOCTYPE ; Select Document Type(s)
"RTN","TIURM",8,0)
 N TIUDCL
"RTN","TIURM",9,0)
 D SELTYP^TIULA(TIUCLASS,.TIUTYP,"A","LAST","DOC",0,.TIUDCL)
"RTN","TIURM",10,0)
 I +$G(DIROUT) S VALMQUIT=1 Q
"RTN","TIURM",11,0)
 I +$G(TIUTYP)'>0,'$D(TIUQUIK) G STATUS
"RTN","TIURM",12,0)
 D CHECKADD(.TIUTYP)
"RTN","TIURM",13,0)
ERLY S TIUEDFLT=$S(TIUCLASS=3:"T-2",TIUCLASS=244:"T-30",1:"T-7")
"RTN","TIURM",14,0)
 S TIUDPRMT="Entry"
"RTN","TIURM",15,0)
 S TIUEDT=$S($D(TIUQUIK):1,1:$$EDATE^TIULA(TIUDPRMT,"",TIUEDFLT))
"RTN","TIURM",16,0)
 I +$G(DIROUT) S VALMQUIT=1 Q
"RTN","TIURM",17,0)
 I TIUEDT'>0 G DOCTYPE
"RTN","TIURM",18,0)
LATE S TIULDT=$S($D(TIUQUIK):9999999,1:$$LDATE^TIULA(TIUDPRMT))
"RTN","TIURM",19,0)
 I +$G(DIROUT) S VALMQUIT=1 Q
"RTN","TIURM",20,0)
 I TIULDT'>0 G ERLY
"RTN","TIURM",21,0)
 I TIUEDT>TIULDT D SWAP(.TIUEDT,.TIULDT)
"RTN","TIURM",22,0)
 I TIUEDT=TIULDT,$L(TIUEDT,".")=1 D EXPRANGE(.TIUEDT,.TIULDT)
"RTN","TIURM",23,0)
 W !,"Searching for the documents."
"RTN","TIURM",24,0)
 D BUILD(.TIUSTAT,.TIUTYP,TIUEDT,TIULDT)
"RTN","TIURM",25,0)
 Q
"RTN","TIURM",26,0)
CHECKADD(TYPES) ; Checks whether Addendum is included in the list of types
"RTN","TIURM",27,0)
 N TIUI,HIT S (TIUI,HIT)=0
"RTN","TIURM",28,0)
 F  S TIUI=$O(TYPES(TIUI)) Q:+TIUI'>0!+HIT  I $$UP^XLFSTR(TYPES(TIUI))["ADDENDUM" S HIT=1
"RTN","TIURM",29,0)
 I +HIT'>0 S TYPES(TYPES+1)=+TYPES(TYPES)+1_U_"81^Addendum^NOT PICKED",TYPES=TYPES+1
"RTN","TIURM",30,0)
 Q
"RTN","TIURM",31,0)
SWAP(TIUX,TIUY) ; Swap any two variables
"RTN","TIURM",32,0)
 N TIUTMP S TIUTMP=TIUX,TIUX=TIUY,TIUY=TIUTMP
"RTN","TIURM",33,0)
 Q
"RTN","TIURM",34,0)
EXPRANGE(TIUX,TIUY) ; Expand range when same date entered for early & late
"RTN","TIURM",35,0)
 I TIUX=DT S TIUY=$$NOW^XLFDT I 1
"RTN","TIURM",36,0)
 E  S TIUY=TIUY_"."_2359
"RTN","TIURM",37,0)
 Q
"RTN","TIURM",38,0)
BUILD(STATUS,TYPES,EARLY,LATE) ; Build List
"RTN","TIURM",39,0)
 N TIUCNT,TIUDT,TIUP,TIUQ,TIUREC
"RTN","TIURM",40,0)
 N TIUT,TIUTP,XREF,TIUS,TIUPREF
"RTN","TIURM",41,0)
 S TIUPREF=$$PERSPRF^TIULE(DUZ),(TIUK,VALMCNT)=0
"RTN","TIURM",42,0)
 K ^TMP("TIUR",$J),^TMP("TIURIDX",$J),^TMP("TIUI",$J)
"RTN","TIURM",43,0)
 I '$D(TIUPRM0)!'$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIURM",44,0)
 S EARLY=+$G(EARLY,0),LATE=+$G(LATE,3333333)
"RTN","TIURM",45,0)
 D GATHER(.STATUS,.TYPES,TIUPREF,TIUCLASS)
"RTN","TIURM",46,0)
 D PUTLIST(TIUPREF)
"RTN","TIURM",47,0)
 Q
"RTN","TIURM",48,0)
GATHER(STATUS,TYPES,TIUPREF,CLASS) ; Find/sort records for the list
"RTN","TIURM",49,0)
 N TIUT,TIUDA,TIUTP,TIUS,TIUSTAT,TIUSFLD,TIUD0,TIUD12,TIUD13,TIUD15
"RTN","TIURM",50,0)
 N TIUSVAL,TIUI
"RTN","TIURM",51,0)
 S TIUSFLD=$P(TIUPREF,U,3)
"RTN","TIURM",52,0)
 S TIUSFLD=$S(TIUSFLD="P":".02",TIUSFLD="D":".01",TIUSFLD="S":".05",TIUSFLD="C":"1507",TIUSFLD="A":"1202",TIUSFLD="E":"1208",1:"1301")
"RTN","TIURM",53,0)
 S TIUI=EARLY F  S TIUI=$O(^TIU(8925,"F",TIUI)) Q:+TIUI'>0!(+TIUI>LATE)  D
"RTN","TIURM",54,0)
 . S TIUDA=0
"RTN","TIURM",55,0)
 . F  S TIUDA=$O(^TIU(8925,"F",TIUI,TIUDA)) Q:+TIUDA'>0  D
"RTN","TIURM",56,0)
 . . ; Consider adding view check here
"RTN","TIURM",57,0)
 . . I '$$INTYPES(TIUDA,.TYPES) Q
"RTN","TIURM",58,0)
 . . I '$$INSTATUS(TIUDA,.STATUS) Q
"RTN","TIURM",59,0)
 . . S TIUQ=$$RESOLVE(TIUDA,TIUSFLD)
"RTN","TIURM",60,0)
 . . S ^TMP("TIUI",$J,TIUQ,(9999999-TIUI),TIUDA)=""
"RTN","TIURM",61,0)
 Q
"RTN","TIURM",62,0)
INTYPES(TIUDA,TYPES) ; Evaluates whether a record is among the selected types
"RTN","TIURM",63,0)
 N TIUI,TIUTYP,TIUY S (TIUI,TIUY)=0
"RTN","TIURM",64,0)
 S TIUTYP=+$G(^TIU(8925,+TIUDA,0))
"RTN","TIURM",65,0)
 I TIUTYP=81 S TIUY=+$$DADINTYP(TIUDA,.TYPES) G INTYPX
"RTN","TIURM",66,0)
 F  S TIUI=$O(TYPES(TIUI)) Q:+TIUI'>0!+TIUY  D
"RTN","TIURM",67,0)
 . I +$P(TYPES(TIUI),U,2)=TIUTYP S TIUY=1
"RTN","TIURM",68,0)
INTYPX Q TIUY
"RTN","TIURM",69,0)
INSTATUS(TIUDA,TYPES) ; Evaluates whether a record is among the selected
"RTN","TIURM",70,0)
 ;                 statuses
"RTN","TIURM",71,0)
 N TIUI,TIUSTAT,TIUSTATE,TIUY S (TIUI,TIUY)=0
"RTN","TIURM",72,0)
 S TIUSTATE=+$P($G(^TIU(8925,+TIUDA,0)),U,5)
"RTN","TIURM",73,0)
 F  S TIUI=$O(STATUS(TIUI)) Q:+TIUI'>0!+TIUY  D
"RTN","TIURM",74,0)
 . S TIUSTAT=$O(^TIU(8925.6,"B",$$UPPER^TIULS($P(STATUS(TIUI),U,3)),0))
"RTN","TIURM",75,0)
 . I TIUSTAT=TIUSTATE S TIUY=1
"RTN","TIURM",76,0)
 Q TIUY
"RTN","TIURM",77,0)
DADINTYP(TIUDA,TYPES) ; Evaluates whether addendum's parent belongs is among
"RTN","TIURM",78,0)
 ;                 the selected types
"RTN","TIURM",79,0)
 N TIUI,TIUDTYP,TIUY S (TIUI,TIUY)=0
"RTN","TIURM",80,0)
 S TIUDTYP=+$G(^TIU(8925,+$P($G(^TIU(8925,+TIUDA,0)),U,6),0))
"RTN","TIURM",81,0)
 F  S TIUI=$O(TYPES(TIUI)) Q:+TIUI'>0!+TIUY  D
"RTN","TIURM",82,0)
 . I +$P(TYPES(TIUI),U,2)=TIUDTYP S TIUY=1
"RTN","TIURM",83,0)
 Q TIUY
"RTN","TIURM",84,0)
RESOLVE(DA,DR) ; resolve sort field values
"RTN","TIURM",85,0)
 N TIUD0,TIUD12,TIUD13,TIUD15,TIUY
"RTN","TIURM",86,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD12=$G(^TIU(8925,+DA,12))
"RTN","TIURM",87,0)
 S TIUD13=$G(^TIU(8925,+DA,13)),TIUD15=$G(^TIU(8925,+DA,15))
"RTN","TIURM",88,0)
 I DR=.01 S TIUY=$$PNAME^TIULC1(+TIUD0) G RESX
"RTN","TIURM",89,0)
 I DR=.02 S TIUY=$$PTNAME^TIULC1(+$P(TIUD0,U,2)) G RESX
"RTN","TIURM",90,0)
 I DR=.05 S TIUY=$P(TIUD0,U,5) G RESX
"RTN","TIURM",91,0)
 I DR=1202 S TIUY=$$PERSNAME^TIULC1(+$P(TIUD12,U,2)) S:TIUY="UNKNOWN" TIUY="" G RESX
"RTN","TIURM",92,0)
 I DR=1208 S TIUY=$$PERSNAME^TIULC1(+$P(TIUD12,U,8)) S:TIUY="UNKNOWN" TIUY="" G RESX
"RTN","TIURM",93,0)
 I DR=1301 S TIUY=$P(TIUD13,U) G RESX
"RTN","TIURM",94,0)
 I DR=1507,($P(TIUD0,U,5)=7),(+$P(TIUD15,U,7)'>0) S DR=1501
"RTN","TIURM",95,0)
 I DR=1501 S TIUY=$P(TIUD15,U) G RESX
"RTN","TIURM",96,0)
 I DR=1507 S TIUY=$P(TIUD15,U,7)
"RTN","TIURM",97,0)
RESX I $G(TIUY)']"" S TIUY="ZZZZEMPTY"
"RTN","TIURM",98,0)
 Q TIUY
"RTN","TIURM",99,0)
PUTLIST(TIUPREF) ; Expands list elements for LM Template
"RTN","TIURM",100,0)
 N TIUJ,TIUQ,TIUDA,TIUPICK,TIUORDER
"RTN","TIURM",101,0)
 S TIUORDER=$S($P(TIUPREF,U,4)="D":-1,1:1)
"RTN","TIURM",102,0)
 S TIUPICK=+$O(^ORD(101,"B","TIU ACTION SELECT LIST ELEMENT",0))
"RTN","TIURM",103,0)
 S TIUQ="" F  S TIUQ=$O(^TMP("TIUI",$J,TIUQ),TIUORDER) Q:TIUQ']""  D
"RTN","TIURM",104,0)
 . S TIUJ=0 F  S TIUJ=$O(^TMP("TIUI",$J,TIUQ,TIUJ)) Q:+TIUJ'>0  D
"RTN","TIURM",105,0)
 . . S TIUDA=0 F  S TIUDA=$O(^TMP("TIUI",$J,TIUQ,TIUJ,TIUDA)) Q:+TIUDA'>0  D ADDELMNT(TIUDA,.TIUCNT)
"RTN","TIURM",106,0)
 S TIUS=1,STATUS=$$UPPER^TIULS($P(STATUS(1),U,3))
"RTN","TIURM",107,0)
 I +$G(STATUS(4))'>0 F  S TIUS=$O(STATUS(TIUS)) Q:+TIUS'>0  D
"RTN","TIURM",108,0)
 . S STATUS=STATUS_$S(TIUS=+STATUS(1):" & ",1:", ")_$$UPPER^TIULS($P(STATUS(TIUS),U,3))
"RTN","TIURM",109,0)
 I +$G(STATUS(4))>0 S STATUS=$S($P(STATUS(4),U,4)="ALL":"ALL",1:STATUS_", OTHER")
"RTN","TIURM",110,0)
 S ^TMP("TIUR",$J,0)=+$G(TIUCNT)_U_STATUS
"RTN","TIURM",111,0)
 S ^TMP("TIUR",$J,"CLASS")=TIUCLASS
"RTN","TIURM",112,0)
 S ^TMP("TIUR",$J,"#")=TIUPICK_"^1:"_+$G(TIUCNT)
"RTN","TIURM",113,0)
 I $D(VALMHDR)>9 D HDR^TIURMH
"RTN","TIURM",114,0)
 I +$G(TIUCNT)'>0 D
"RTN","TIURM",115,0)
 . S ^TMP("TIUR",$J,1,0)="",VALMCNT=2
"RTN","TIURM",116,0)
 . S ^TMP("TIUR",$J,2,0)="     No records found to satisfy search criteria."
"RTN","TIURM",117,0)
 Q
"RTN","TIURM",118,0)
ADDELMNT(DA,TIUCNT,APPEND) ; Add each element to the list
"RTN","TIURM",119,0)
 N DIC,DIQ,DR,TIUR,PT,MOM,ADT,DDT,LCT,AUT,AMD,EDT,SDT,XDT,LCT,RMD,TIULST4
"RTN","TIURM",120,0)
 N TIUD0,TIUD12,TIUD13,TIUD15,STATX,TIULI
"RTN","TIURM",121,0)
 I $G(^TMP("TIUR",$J,2,0))="     No records found to satisfy search criteria." D
"RTN","TIURM",122,0)
 . S ^TMP("TIUR",$J,2,0)="",VALMCNT=0
"RTN","TIURM",123,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD12=$G(^TIU(8925,+DA,12))
"RTN","TIURM",124,0)
 S TIUD13=$G(^TIU(8925,+DA,13)),TIUD15=$G(^TIU(8925,+DA,15))
"RTN","TIURM",125,0)
 S DOC=$$PNAME^TIULC1(+TIUD0)
"RTN","TIURM",126,0)
 I DOC="Addendum" S DOC=DOC_" to "_$$PNAME^TIULC1(+$G(^TIU(8925,+$P(TIUD0,U,6),0)))
"RTN","TIURM",127,0)
 S PT=$$NAME^TIULS($$PTNAME^TIULC1($P(TIUD0,U,2)),"LAST,FI MI")
"RTN","TIURM",128,0)
 S TIULI=$E(PT)
"RTN","TIURM",129,0)
 I +$O(^TIU(8925,"DAD",+DA,0)),$$HASADDEN^TIULC1(DA) S PT="+ "_PT
"RTN","TIURM",130,0)
 S TIUP=$$URGENCY(+DA)
"RTN","TIURM",131,0)
 S:TIUP=1 PT=$S(PT["+":"*",1:"* ")_PT
"RTN","TIURM",132,0)
 S TIULST4=$E($P($G(^DPT(+$P(TIUD0,U,2),0)),U,9),6,9)
"RTN","TIURM",133,0)
 S TIULST4="("_TIULI_TIULST4_")"
"RTN","TIURM",134,0)
 S ADT=$$DATE^TIULS($P(TIUD0,U,7),"MM/DD/YY")
"RTN","TIURM",135,0)
 S DDT=$$DATE^TIULS($P(TIUD0,U,8),"MM/DD/YY")
"RTN","TIURM",136,0)
 S AMD=$$PERSNAME^TIULC1($P(TIUD12,U,8)) S:AMD="UNKNOWN" AMD=""
"RTN","TIURM",137,0)
 S AUT=$$PERSNAME^TIULC1($P(TIUD12,U,2)) S:AUT="UNKNOWN" AUT=""
"RTN","TIURM",138,0)
 S AMD=$$NAME^TIULS(AMD,"LAST, FI MI")
"RTN","TIURM",139,0)
 S AUT=$$NAME^TIULS(AUT,"LAST, FI MI")
"RTN","TIURM",140,0)
 S EDT=$$DATE^TIULS($P(TIUD13,U,7),"MM/DD/YY")
"RTN","TIURM",141,0)
 S SDT=$S(+$P(TIUD15,U,7):+$P(TIUD15,U,7),+$P(TIUD0,U,5)'<7:+$P(TIUD15,U),1:"")
"RTN","TIURM",142,0)
 S SDT=$$DATE^TIULS(SDT,"MM/DD/YY")
"RTN","TIURM",143,0)
 S STATX=$P($G(^TIU(8925.6,+$P(TIUD0,U,5),0)),U)
"RTN","TIURM",144,0)
 S LCT=$P(TIUD0,U,10)
"RTN","TIURM",145,0)
 S TIUCNT=+$G(TIUCNT)+1
"RTN","TIURM",146,0)
 S TIUREC=$$SETFLD^VALM1(TIUCNT,"","NUMBER")
"RTN","TIURM",147,0)
 S TIUREC=$$SETFLD^VALM1(PT,TIUREC,"PATIENT NAME")
"RTN","TIURM",148,0)
 S TIUREC=$$SETFLD^VALM1(TIULST4,TIUREC,"LAST I/LAST 4")
"RTN","TIURM",149,0)
 S TIUREC=$$SETFLD^VALM1(DOC,TIUREC,"DOCUMENT TYPE")
"RTN","TIURM",150,0)
 S TIUREC=$$SETFLD^VALM1(ADT,TIUREC,"ADMISSION DATE")
"RTN","TIURM",151,0)
 S TIUREC=$$SETFLD^VALM1(DDT,TIUREC,"DISCH DATE")
"RTN","TIURM",152,0)
 S TIUREC=$$SETFLD^VALM1(EDT,TIUREC,"DICT DATE")
"RTN","TIURM",153,0)
 S TIUREC=$$SETFLD^VALM1(LCT,TIUREC,"LINE COUNT")
"RTN","TIURM",154,0)
 S TIUREC=$$SETFLD^VALM1($$LOWER^TIULS(STATX),TIUREC,"STATUS")
"RTN","TIURM",155,0)
 S TIUREC=$$SETFLD^VALM1(AUT,TIUREC,"AUTHOR")
"RTN","TIURM",156,0)
 S TIUREC=$$SETFLD^VALM1(AMD,TIUREC,"ATTENDING")
"RTN","TIURM",157,0)
 S VALMCNT=+$G(VALMCNT)+1,^TMP("TIUR",$J,TIUCNT,0)=TIUREC
"RTN","TIURM",158,0)
 S ^TMP("TIUR",$J,"IDX",VALMCNT,TIUCNT)="" W "."
"RTN","TIURM",159,0)
 S ^TMP("TIURIDX",$J,TIUCNT)=VALMCNT_U_DA
"RTN","TIURM",160,0)
 D FLDCTRL^VALM10(TIUCNT,"NUMBER",IOINHI,IOINORM)
"RTN","TIURM",161,0)
 I +$G(APPEND) D
"RTN","TIURM",162,0)
 . D RESTORE^VALM10(TIUCNT)
"RTN","TIURM",163,0)
 . D CNTRL^VALM10(TIUCNT,1,$G(VALM("RM")),IOINHI,IOINORM),HDR^TIURMH
"RTN","TIURM",164,0)
 . S VALMSG="** Item #"_TIUCNT_" Added **"
"RTN","TIURM",165,0)
 . S $P(^TMP("TIUR",$J,0),U)=+$G(TIUCNT)
"RTN","TIURM",166,0)
 . S $P(^TMP("TIUR",$J,"#"),":",2)=+$G(TIUCNT)
"RTN","TIURM",167,0)
 . I $D(VALMHDR)>9 D HDR^TIURMH
"RTN","TIURM",168,0)
 Q
"RTN","TIURM",169,0)
CLEAN ; Clean up your mess!
"RTN","TIURM",170,0)
 K ^TMP("TIUR",$J),^TMP("TIURIDX",$J) D CLEAN^VALM10
"RTN","TIURM",171,0)
 K VALMY
"RTN","TIURM",172,0)
 Q
"RTN","TIURM",173,0)
URGENCY(TIUDA) ; What is the urgency of the current document
"RTN","TIURM",174,0)
 N TIUY,TIUD0,TIUDSTAT,TIUDURG
"RTN","TIURM",175,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUDSTAT=$P(TIUD0,U,5)
"RTN","TIURM",176,0)
 S TIUDURG=$P(TIUD0,U,9)
"RTN","TIURM",177,0)
 S TIUY=$S(TIUDSTAT<7:$S(TIUDURG="P":1,1:2),1:3)
"RTN","TIURM",178,0)
 Q TIUY
"RTN","TIURM",179,0)
DFLTSTAT(USER) ; Set default STATUS for current user
"RTN","TIURM",180,0)
 N TIUMIS,TIUMD,TIUY,TIUDPRM D DOCPRM^TIULC1(244,.TIUDPRM)
"RTN","TIURM",181,0)
 S TIUMIS=$$ISA^USRLM(DUZ,"MEDICAL INFORMATION SECTION")
"RTN","TIURM",182,0)
 I +TIUMIS,+$P($G(TIUDPRM(0)),U,3) S TIUY="UNVERIFIED" G DFLTX
"RTN","TIURM",183,0)
 I $$ISA^USRLM(DUZ,"PROVIDER") S TIUY="COMPLETED" G DFLTX
"RTN","TIURM",184,0)
 S TIUY="COMPLETED"
"RTN","TIURM",185,0)
DFLTX Q TIUY
"RTN","TIURMH")
0^166^B2169345
"RTN","TIURMH",1,0)
TIURMH ; SLC/JER - MIS Review Screen Header ;4/20/94  16:18
"RTN","TIURMH",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURMH",3,0)
HDR ; Initialize header for clinician's review screen
"RTN","TIURMH",4,0)
 N BY,TIUI,TIUX,SCREEN,STATUS,RANGE,TIUBY,TIUDOCS,XREF
"RTN","TIURMH",5,0)
 S TIUX=$G(^TMP("TIUR",$J,0)),STATUS=$P(TIUX,U,2),SCREEN=$P(TIUX,U,3,99)
"RTN","TIURMH",6,0)
 S VALM("TITLE")=$S($L(STATUS,",")>1:$S(VALM("ENTITY")="Document":"Clinical",1:""),1:STATUS)
"RTN","TIURMH",7,0)
 S:$L(VALM("TITLE")) VALM("TITLE")=VALM("TITLE")_" "
"RTN","TIURMH",8,0)
 S VALM("TITLE")=VALM("TITLE")_$S($L(VALM("ENTITY")):$$NTTNM(VALM("ENTITY")),1:"Document")_"s"
"RTN","TIURMH",9,0)
 I +TIUEDT>1 S RANGE=" from "_$$DATE^TIULS(TIUEDT,"MM/DD/YY")_" to "_$$DATE^TIULS(TIULDT,"MM/DD/YY")
"RTN","TIURMH",10,0)
 S VALMHDR(1)=$$CENTER^TIULS($G(RANGE))
"RTN","TIURMH",11,0)
 S TIUDOCS=$J(+$G(^TMP("TIUR",$J,0)),4)_" documents"
"RTN","TIURMH",12,0)
 S VALMHDR(1)=$$SETSTR^VALM1(TIUDOCS,VALMHDR(1),(IOM-$L(TIUDOCS)),$L(TIUDOCS))
"RTN","TIURMH",13,0)
 Q
"RTN","TIURMH",14,0)
NTTNM(NAME) ; Handle plural names appropriately
"RTN","TIURMH",15,0)
 I "Yy"[$E(NAME,$L(NAME)) S NAME=$E(NAME,1,($L(NAME)-1))_"ie"
"RTN","TIURMH",16,0)
 Q NAME
"RTN","TIUROR")
0^216^B50353508
"RTN","TIUROR",1,0)
TIUROR ;SLC/JER - New PATIENT Review screen ; 15-MAR-1997
"RTN","TIUROR",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUROR",3,0)
EN ; -- main entry point for TIU OE/RR REVIEW PN
"RTN","TIUROR",4,0)
 D EN^VALM("TIU OE/RR REVIEW PN")
"RTN","TIUROR",5,0)
 Q
"RTN","TIUROR",6,0)
 ;
"RTN","TIUROR",7,0)
HDR ; -- header code
"RTN","TIUROR",8,0)
 N TIUCTXT,TIUPNM,TIUSSN,TIULOC,TIUDOB,TIUHDR,TIUCWAD,TIUDCNT,VADM,VA
"RTN","TIUROR",9,0)
 N TIUDFN I +$D(@VALMAR@(0))'>0 S VALMQUIT=1 Q
"RTN","TIUROR",10,0)
 S TIUDFN=+$G(@VALMAR@("DFN"))
"RTN","TIUROR",11,0)
 S TIUCWAD=$$CWAD^GMRPNOR1(TIUDFN) S:TIUCWAD]"" TIUCWAD="<"_TIUCWAD_">"
"RTN","TIUROR",12,0)
 S TIUDCNT=$J($S($G(@VALMAR@("CTXT"))="INIT":"Last ",1:"")_+@VALMAR@(0)_" note(s)",16)
"RTN","TIUROR",13,0)
 S TIUCTXT=$$UP^XLFSTR($$PNAME^TIULC1(@VALMAR@("CLASS")))
"RTN","TIUROR",14,0)
 S TIUCTXT=$$TITLE^TIUU(TIUCTXT)
"RTN","TIUROR",15,0)
 S TIUHDR=$$SETSTR^VALM1(TIUCWAD,$G(TIUHDR),1,20)
"RTN","TIUROR",16,0)
 S TIUHDR=$$SETSTR^VALM1(TIUCTXT,$G(TIUHDR),27,28)
"RTN","TIUROR",17,0)
 S TIUHDR=$$SETSTR^VALM1(TIUDCNT,$G(TIUHDR),64,16)
"RTN","TIUROR",18,0)
 S VALMHDR(1)=TIUHDR,TIUHDR=""
"RTN","TIUROR",19,0)
 S TIUPNM=$$NAME^TIULO(TIUDFN),TIUSSN=$$SSN^TIULO(TIUDFN)
"RTN","TIUROR",20,0)
 S TIUDOB=$$DOB^TIULO(TIUDFN)_" ("_$$AGE^TIULO(TIUDFN)_")"
"RTN","TIUROR",21,0)
 S TIULOC=$G(^DPT(+TIUDFN,.1))
"RTN","TIUROR",22,0)
 S:TIULOC]"" TIULOC=TIULOC_"/"_$G(^DPT(+TIUDFN,.101))
"RTN","TIUROR",23,0)
 S TIUHDR=$$SETSTR^VALM1(TIUPNM,$G(TIUHDR),1,20)
"RTN","TIUROR",24,0)
 S TIUHDR=$$SETSTR^VALM1(TIUSSN,$G(TIUHDR),22,11)
"RTN","TIUROR",25,0)
 S TIUHDR=$$SETSTR^VALM1(TIULOC,$G(TIUHDR),35,20)
"RTN","TIUROR",26,0)
 S TIUHDR=$$SETSTR^VALM1(TIUDOB,$G(TIUHDR),64,16)
"RTN","TIUROR",27,0)
 S VALMHDR(2)=TIUHDR
"RTN","TIUROR",28,0)
 Q
"RTN","TIUROR",29,0)
 ;
"RTN","TIUROR",30,0)
INIT(CLASS,CONTEXT,DFN,TIUOCC) ; -- init variables and list array
"RTN","TIUROR",31,0)
 N TIUR,TIUI,TIUY,TIUPICK,TIUQUIT,TIUCCTXT,TIUDUZ,TIUERLY,TIULATE
"RTN","TIUROR",32,0)
 N TIUPREF,TIUOCTXT,TIURCTXT,TIUSEQ
"RTN","TIUROR",33,0)
 I $G(@VALMAR@("SEQ"))]"" S TIUSEQ=$G(@VALMAR@("SEQ"))
"RTN","TIUROR",34,0)
 I +$G(@VALMAR@("CTXT")) S TIURCTXT=$G(@VALMAR@("CTXT"))
"RTN","TIUROR",35,0)
 K @VALMAR,VALMCNT,^TMP("TIURIDX",$J)
"RTN","TIUROR",36,0)
 S TIUPREF=$$PERSPRF^TIULE(DUZ)
"RTN","TIUROR",37,0)
 S TIUSEQ=$G(TIUSEQ,$S($P(TIUPREF,U,4)="A":"A",1:"D"))
"RTN","TIUROR",38,0)
 S TIUPICK=+$O(^ORD(101,"B","TIU ACTION SELECT LIST ELEMENT",0))
"RTN","TIUROR",39,0)
 S DFN=$S(+$G(DFN):+$G(DFN),+$G(ORVP):+$G(ORVP),1:+$$PATIENT^TIULA)
"RTN","TIUROR",40,0)
 I $S($D(DUOUT):1,$D(DTOUT):1,$D(DIROUT):1,+$G(DFN)'>0:1,1:0) S VALMQUIT=1 Q
"RTN","TIUROR",41,0)
 I +$G(CONTEXT)'=9999,'+$G(TIUOCC) S TIUOCC=$S(+$P(TIUPREF,U,10):+$P(TIUPREF,U,10),1:100)
"RTN","TIUROR",42,0)
 I '$O(^TIU(8925,"ACLPT",CLASS,DFN,0)) D  Q
"RTN","TIUROR",43,0)
 . N TIUST
"RTN","TIUROR",44,0)
 . S TIUST=$S(CONTEXT=2:"UNSIGNED ",CONTEXT=3:"UNCOSIGNED ",1:"SIGNED ")
"RTN","TIUROR",45,0)
 . S VALMCNT=2,^TMP("TIUR",$J,0)=0
"RTN","TIUROR",46,0)
 . S ^TMP("TIUR",$J,1,0)=""
"RTN","TIUROR",47,0)
 . S ^TMP("TIUR",$J,2,0)="No "_TIUST_$$UP^XLFSTR($$PNAME^TIULC1(CLASS))_" Available for "_$$PTNAME^TIULC1(DFN)
"RTN","TIUROR",48,0)
 . S TIUOCTXT=CONTEXT
"RTN","TIUROR",49,0)
 . I CONTEXT=4 S TIUOCTXT=TIUOCTXT_U_TIUDUZ
"RTN","TIUROR",50,0)
 . I CONTEXT=5 S TIUOCTXT=TIUOCTXT_U_+TIUERLY_U_+TIULATE
"RTN","TIUROR",51,0)
 . S ^TMP("TIUR",$J,"SEQ")=$G(TIUSEQ)
"RTN","TIUROR",52,0)
 . S ^TMP("TIUR",$J,"CLASS")=CLASS,^("DFN")=DFN,^("CTXT")=TIUOCTXT D HDR
"RTN","TIUROR",53,0)
 I $G(CONTEXT)=9999 S TIUCCTXT=1,TIUOCC=9999999
"RTN","TIUROR",54,0)
 S CONTEXT=$S($G(CONTEXT)=9999:$$ASKCTXT,+$G(CONTEXT):+$G(CONTEXT),1:1)
"RTN","TIUROR",55,0)
 I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) D RESTORE,HDR Q
"RTN","TIUROR",56,0)
 I $S(CONTEXT=1:1,CONTEXT=2:1,CONTEXT=3:1,1:0) S TIUERLY="",TIULATE="",TIUDUZ=DUZ
"RTN","TIUROR",57,0)
 I CONTEXT=4 D  Q:+$G(TIUQUIT)>0
"RTN","TIUROR",58,0)
 . S TIUERLY="",TIULATE=""
"RTN","TIUROR",59,0)
 . S TIUDUZ=$S(+$G(TIURCTXT)'=4:+$$AUTHOR^TIULA2,+$P(TIURCTXT,U,2)'>0:+$$AUTHOR^TIULA2,+$G(TIUCCTXT):+$$AUTHOR^TIULA2,1:+$P(TIURCTXT,U,2))
"RTN","TIUROR",60,0)
 . I $S($D(DUOUT):1,$D(DIRUT):1,$D(DIROUT):1,+$G(TIUDUZ)'>0:1,1:0) S TIUQUIT=1 D RESTORE,HDR Q
"RTN","TIUROR",61,0)
 . S TIUSEQ=$S(+$G(TIUCCTXT):$P($$ASKSEQ^TIULA3(TIUSEQ),U),$G(TIUSEQ)']"":$P($$ASKSEQ^TIULA3(TIUSEQ),U),1:$G(TIUSEQ))
"RTN","TIUROR",62,0)
 . I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) S TIUQUIT=1 D RESTORE,HDR
"RTN","TIUROR",63,0)
 I CONTEXT=5 D  Q:+$G(TIUQUIT)>0
"RTN","TIUROR",64,0)
 . S TIUDUZ=+$G(DUZ)
"RTN","TIUROR",65,0)
 . S TIUERLY=$S(+$G(TIURCTXT)'=5:$$EDATE^TIULA("",7,""),+$P(TIURCTXT,U,2)'>0:$$EDATE^TIULA("",7,""),+$G(TIUCCTXT):$$EDATE^TIULA("",7,""),1:+$P(TIURCTXT,U,2))
"RTN","TIUROR",66,0)
 . I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) S TIUQUIT=1 D RESTORE,HDR Q
"RTN","TIUROR",67,0)
 . S TIUERLY=$P(TIUERLY,U)
"RTN","TIUROR",68,0)
 . S TIULATE=$S(+$G(TIURCTXT)'=5:$$LDATE^TIULA("",7,""),+$P(TIURCTXT,U,3)'>0:$$LDATE^TIULA("",7,""),+$G(TIUCCTXT):$$LDATE^TIULA("",7,""),1:+$P(TIURCTXT,U,3))
"RTN","TIUROR",69,0)
 . I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) S TIUQUIT=1 D RESTORE,HDR Q
"RTN","TIUROR",70,0)
 . S TIULATE=$P(TIULATE,U)
"RTN","TIUROR",71,0)
 . I TIUERLY>TIULATE D SWAP^TIUR(.TIUERLY,.TIULATE)
"RTN","TIUROR",72,0)
 . I $L(TIULATE,".")=1 D EXPRANGE^TIUR(.TIUERLY,.TIULATE)
"RTN","TIUROR",73,0)
 . S TIUSEQ=$S(+$G(TIUCCTXT):$P($$ASKSEQ^TIULA3(TIUSEQ),U),$G(TIUSEQ)']"":$P($$ASKSEQ^TIULA3(TIUSEQ),U),1:$G(TIUSEQ))
"RTN","TIUROR",74,0)
 . I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) S TIUQUIT=1 D RESTORE,HDR
"RTN","TIUROR",75,0)
 W !,"Searching for the progress notes"
"RTN","TIUROR",76,0)
 D CONTEXT^TIUSRVLL(.TIUY,CLASS,CONTEXT,DFN,TIUERLY,TIULATE,TIUDUZ,TIUOCC,TIUSEQ) W "."
"RTN","TIUROR",77,0)
 I $D(TIUY)'>9 D  Q
"RTN","TIUROR",78,0)
 . N TIUST
"RTN","TIUROR",79,0)
 . S TIUST=$S(CONTEXT=2:"UNSIGNED ",CONTEXT=3:"UNCOSIGNED ",1:"SIGNED ")
"RTN","TIUROR",80,0)
 . S VALMCNT=2,^TMP("TIUR",$J,0)=0
"RTN","TIUROR",81,0)
 . S ^TMP("TIUR",$J,1,0)=""
"RTN","TIUROR",82,0)
 . S ^TMP("TIUR",$J,2,0)="No "_TIUST_$$UP^XLFSTR($$PNAME^TIULC1(CLASS))_" Available for "_$$PTNAME^TIULC1(DFN)
"RTN","TIUROR",83,0)
 . S ^TMP("TIUR",$J,"CLASS")=CLASS,^("DFN")=DFN
"RTN","TIUROR",84,0)
 . S TIUOCTXT=CONTEXT
"RTN","TIUROR",85,0)
 . I CONTEXT=4 S TIUOCTXT=TIUOCTXT_U_TIUDUZ
"RTN","TIUROR",86,0)
 . I CONTEXT=5 S TIUOCTXT=TIUOCTXT_U_+TIUERLY_U_+TIULATE
"RTN","TIUROR",87,0)
 . S ^TMP("TIUR",$J,"SEQ")=$G(TIUSEQ)
"RTN","TIUROR",88,0)
 . S ^TMP("TIUR",$J,"CTXT")=$S('+$G(TIUCCTXT):"INIT",1:TIUOCTXT) D HDR
"RTN","TIUROR",89,0)
 S TIUI=""
"RTN","TIUROR",90,0)
 F  S TIUI=$O(TIUY(TIUI)) Q:TIUI=""  D
"RTN","TIUROR",91,0)
 . N AUT,RDT,TITL,TIUD0,TIUD12,TIUD13
"RTN","TIUROR",92,0)
 . S TIUD0=$G(^TIU(8925,+TIUY(TIUI),0)),TIUD12=$G(^(12)),TIUD13=$G(^(13))
"RTN","TIUROR",93,0)
 . S VALMCNT=+$G(VALMCNT)+1 W:(VALMCNT#100'>0) "."
"RTN","TIUROR",94,0)
 . S TITL=$$PNAME^TIULC1(+TIUD0)
"RTN","TIUROR",95,0)
 . I TITL="Addendum" S TITL=TITL_" to "_$$PNAME^TIULC1(+$G(^TIU(8925,+$P(TIUD0,U,6),0)))
"RTN","TIUROR",96,0)
 . I +$O(^TIU(8925,"DAD",+TIUY(TIUI),0)),+$$HASADDEN^TIULC1(+TIUY(TIUI)) S TITL="+ "_TITL
"RTN","TIUROR",97,0)
 . S AUT=$$NAME^TIULS($$PERSNAME^TIULC1(+$P(TIUD12,U,2)),"LAST,FI")
"RTN","TIUROR",98,0)
 . S RDT=$$DATE^TIULS(+TIUD13,"MM/DD/YY HR:MIN")
"RTN","TIUROR",99,0)
 . S STAT=$$LOW^XLFSTR($P($G(^TIU(8925.6,+$P(TIUD0,U,5),0)),U))
"RTN","TIUROR",100,0)
 . S TIUR=$$SETFLD^VALM1(VALMCNT,$G(TIUR),"NUMBER")
"RTN","TIUROR",101,0)
 . S TIUR=$$SETFLD^VALM1(TITL,$G(TIUR),"TITLE")
"RTN","TIUROR",102,0)
 . S TIUR=$$SETFLD^VALM1(AUT,$G(TIUR),"AUTHOR")
"RTN","TIUROR",103,0)
 . S TIUR=$$SETFLD^VALM1(RDT,$G(TIUR),"REF DATE")
"RTN","TIUROR",104,0)
 . S TIUR=$$SETFLD^VALM1(STAT,$G(TIUR),"STATUS")
"RTN","TIUROR",105,0)
 . S ^TMP("TIUR",$J,VALMCNT,0)=TIUR
"RTN","TIUROR",106,0)
 . S ^TMP("TIUR",$J,0)=VALMCNT
"RTN","TIUROR",107,0)
 . S ^TMP("TIURIDX",$J,VALMCNT)=VALMCNT_U_+TIUY(TIUI)
"RTN","TIUROR",108,0)
 . S ^TMP("TIUR",$J,"IDX",VALMCNT,VALMCNT)=""
"RTN","TIUROR",109,0)
 S ^TMP("TIUR",$J,"#")=TIUPICK_"^1:"_+VALMCNT
"RTN","TIUROR",110,0)
 S ^TMP("TIUR",$J,"CLASS")=CLASS
"RTN","TIUROR",111,0)
 S ^TMP("TIUR",$J,"DFN")=DFN
"RTN","TIUROR",112,0)
 S ^TMP("TIUR",$J,"OCC")=+$G(TIUOCC)
"RTN","TIUROR",113,0)
 S TIUOCTXT=CONTEXT
"RTN","TIUROR",114,0)
 I CONTEXT=4 S TIUOCTXT=TIUOCTXT_U_TIUDUZ
"RTN","TIUROR",115,0)
 I CONTEXT=5 S TIUOCTXT=TIUOCTXT_U_+TIUERLY_U_+TIULATE
"RTN","TIUROR",116,0)
 S ^TMP("TIUR",$J,"SEQ")=$G(TIUSEQ)
"RTN","TIUROR",117,0)
 S ^TMP("TIUR",$J,"CTXT")=$S('+$G(TIUCCTXT)&(VALMCNT'<TIUOCC):"INIT",1:TIUOCTXT)
"RTN","TIUROR",118,0)
 I CONTEXT=1,(+$G(TIUOCC)=9999999) D SAVE
"RTN","TIUROR",119,0)
 I +$G(TIUCCTXT),$D(^TMP("TIUR",$J,0)) D HDR
"RTN","TIUROR",120,0)
 Q
"RTN","TIUROR",121,0)
 ;
"RTN","TIUROR",122,0)
ASKCTXT() ; Ask user for new context
"RTN","TIUROR",123,0)
 N TIUY,DIR
"RTN","TIUROR",124,0)
 S DIR(0)="SAO^1:SIGNED;2:UNSIGNED;3:UNCOSIGNED;4:AUTHOR;5:DATES"
"RTN","TIUROR",125,0)
 S DIR("A")="Select context: ",DIR("A",1)="Valid selections are:"
"RTN","TIUROR",126,0)
 S DIR("A",2)="  1 - signed notes (all)   2 - unsigned notes       3 - uncosigned notes"
"RTN","TIUROR",127,0)
 S DIR("A",3)="  4 - signed notes/author  5 - signed notes/dates",DIR("A",4)="    "
"RTN","TIUROR",128,0)
 S DIR("?",1)="To change which notes are displayed, select the number"
"RTN","TIUROR",129,0)
 S DIR("?")="of the context you wish to work within.",DIR("B")="1"
"RTN","TIUROR",130,0)
 W ! D ^DIR
"RTN","TIUROR",131,0)
 Q +Y
"RTN","TIUROR",132,0)
 ;
"RTN","TIUROR",133,0)
EXIT ; -- exit code
"RTN","TIUROR",134,0)
 D CLEAN^VALM10
"RTN","TIUROR",135,0)
 K DFN,VALMY,VALMCNT,VALMKEY,^TMP("TIURSAVE",$J),^TMP("TIURSIDX",$J)
"RTN","TIUROR",136,0)
 K ^TMP("TIURIDX",$J)
"RTN","TIUROR",137,0)
 Q
"RTN","TIUROR",138,0)
 ;
"RTN","TIUROR",139,0)
SAVE ; -- Set aside original list
"RTN","TIUROR",140,0)
 K ^TMP("TIURSAVE",$J)
"RTN","TIUROR",141,0)
 M ^TMP("TIURSAVE",$J)=^TMP("TIUR",$J)
"RTN","TIUROR",142,0)
 M ^TMP("TIURSAVIDX",$J)=^TMP("TIURIDX",$J)
"RTN","TIUROR",143,0)
 Q
"RTN","TIUROR",144,0)
 ;
"RTN","TIUROR",145,0)
RESTORE ; -- restore original list
"RTN","TIUROR",146,0)
 I '$D(^TMP("TIURSAVE",$J)) D  Q
"RTN","TIUROR",147,0)
 . D INIT(+$G(^TMP("TIUR",$J,"CLASS")),1,+$G(^("DFN")),9999999)
"RTN","TIUROR",148,0)
 . S VALMBCK="R",VALMBG=1,VALMCNT=+$G(^TMP("TIUR",$J,0))
"RTN","TIUROR",149,0)
 K ^TMP("TIUR",$J)
"RTN","TIUROR",150,0)
 M ^TMP("TIUR",$J)=^TMP("TIURSAVE",$J)
"RTN","TIUROR",151,0)
 M ^TMP("TIURIDX",$J)=^TMP("TIURSAVIDX",$J)
"RTN","TIUROR",152,0)
 S VALMBCK="R",VALMBG=1,VALMCNT=+$G(^TMP("TIUR",$J,0))
"RTN","TIUROR",153,0)
 Q
"RTN","TIUROR",154,0)
 ;
"RTN","TIUROR",155,0)
RBLD ; -- rebuild list after actions
"RTN","TIUROR",156,0)
 D INIT(+$G(^TMP("TIUR",$J,"CLASS")),+$G(^("CTXT")),+$G(^("DFN")),+$G(^("OCC")))
"RTN","TIUROR",157,0)
 D HDR S VALMBCK="R",VALMBG=1,VALMCNT=+$G(^TMP("TIUR",$J,0))
"RTN","TIUROR",158,0)
 Q
"RTN","TIUROR",159,0)
 ;
"RTN","TIUROR",160,0)
EXPND ; -- expand code
"RTN","TIUROR",161,0)
 Q
"RTN","TIUROR",162,0)
 ;
"RTN","TIURORL")
0^217^B1843469
"RTN","TIURORL",1,0)
TIURORL ; SLC/JER - List Management Library for OE screen
"RTN","TIURORL",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURORL",3,0)
UPDATE(ITEM) ; Updates list following actions
"RTN","TIURORL",4,0)
 N AUT,RDT,TITL,TIUD0,TIUD12,TIUD13,TIUDA
"RTN","TIURORL",5,0)
 S TIUDA=+$P(ITEM,U,2)
"RTN","TIURORL",6,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD12=$G(^(12)),TIUD13=$G(^(13))
"RTN","TIURORL",7,0)
 S TITL=$$PNAME^TIULC1(+TIUD0)
"RTN","TIURORL",8,0)
 I +$O(^TIU(8925,"DAD",+TIUDA,0)),+$$HASADDEN^TIULC1(TIUDA) S TITL="+ "_TITL
"RTN","TIURORL",9,0)
 S AUT=$$NAME^TIULS($$PERSNAME^TIULC1(+$P(TIUD12,U,2)),"LAST,FI")
"RTN","TIURORL",10,0)
 S RDT=$$DATE^TIULS(+TIUD13,"MM/DD/YY HR:MIN")
"RTN","TIURORL",11,0)
 S STAT=$$LOW^XLFSTR($P($G(^TIU(8925.6,+$P(TIUD0,U,5),0)),U))
"RTN","TIURORL",12,0)
 S TIUR=$$SETFLD^VALM1(VALMCNT,$G(TIUR),"NUMBER")
"RTN","TIURORL",13,0)
 S TIUR=$$SETFLD^VALM1(TITL,$G(TIUR),"TITLE")
"RTN","TIURORL",14,0)
 S TIUR=$$SETFLD^VALM1(AUT,$G(TIUR),"AUTHOR")
"RTN","TIURORL",15,0)
 S TIUR=$$SETFLD^VALM1(RDT,$G(TIUR),"REF DATE")
"RTN","TIURORL",16,0)
 S TIUR=$$SETFLD^VALM1(STAT,$G(TIUR),"STATUS")
"RTN","TIURORL",17,0)
 S ^TMP("TIUR",$J,VALMCNT,0)=TIUR
"RTN","TIURORL",18,0)
 D RESTORE^VALM10(+ITEM),CNTRL^VALM10(+ITEM,1,VALM("RM"),IOINHI,IOINORM)
"RTN","TIURORL",19,0)
 Q
"RTN","TIURP")
0^167^B10007157
"RTN","TIURP",1,0)
TIURP ; SLC/JER - List problems for linking
"RTN","TIURP",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURP",3,0)
MAIN ; Control branching
"RTN","TIURP",4,0)
 N TIUPL,TIUI
"RTN","TIURP",5,0)
 D ACTIVE^GMPLUTL(DFN,.TIUPL)
"RTN","TIURP",6,0)
 I +$G(TIUPL(0))'>0 D NOPROBLM Q
"RTN","TIURP",7,0)
 D CLEAN^VALM10,BUILD(.TIUPL)
"RTN","TIURP",8,0)
 Q
"RTN","TIURP",9,0)
NOPROBLM ; Handle empty list
"RTN","TIURP",10,0)
 S ^TMP("TIURP",$J,0)=0
"RTN","TIURP",11,0)
 S ^TMP("TIURP",$J,1,0)=""
"RTN","TIURP",12,0)
 S ^TMP("TIURP",$J,2,0)="No active problems."
"RTN","TIURP",13,0)
 Q
"RTN","TIURP",14,0)
BUILD(TIUPL) ; Build list
"RTN","TIURP",15,0)
 N TIUI,TIUPICK S (TIUI,VALMCNT)=0
"RTN","TIURP",16,0)
 S TIUPICK=+$O(^ORD(101,"B","TIU ACTION SELECT LIST ELEMENT",0))
"RTN","TIURP",17,0)
 F  S TIUI=$O(TIUPL(TIUI)) Q:+TIUI'>0  D
"RTN","TIURP",18,0)
 . N PRBLM,DATE,STATUS,ICD9,LINE S LINE=""
"RTN","TIURP",19,0)
 . S PRBLM=$$MIXED^TIULS($P($G(TIUPL(TIUI,1)),U,2))
"RTN","TIURP",20,0)
 . S ICD9="("_$P($G(TIUPL(TIUI,2)),U,2)_")"
"RTN","TIURP",21,0)
 . S DATE=$$DATE^TIULS($P($G(TIUPL(TIUI,3)),U),"MM/DD/YY")
"RTN","TIURP",22,0)
 . S STATUS=$S($P($G(TIUPL(TIUI,6)),U)="A":" ",1:"i")
"RTN","TIURP",23,0)
 . S LINE=$$SETFLD^VALM1(TIUI,LINE,"NUMBER")
"RTN","TIURP",24,0)
 . S LINE=$$SETFLD^VALM1(PRBLM,LINE,"PROBLEM")
"RTN","TIURP",25,0)
 . S LINE=$$SETFLD^VALM1(ICD9,LINE,"ICD9")
"RTN","TIURP",26,0)
 . S LINE=$$SETFLD^VALM1(DATE,LINE,"DATE")
"RTN","TIURP",27,0)
 . S VALMCNT=VALMCNT+1
"RTN","TIURP",28,0)
 . S ^TMP("TIURP",$J,TIUI,0)=LINE
"RTN","TIURP",29,0)
 . S ^TMP("TIURP",$J,"IDX",VALMCNT,TIUI)="" W:'TIUI#5 "."
"RTN","TIURP",30,0)
 . S ^TMP("TIURPIDX",$J,TIUI)=TIUI_U_+$G(TIUPL(TIUI,0))_U_U_+$G(TIUPL(TIUI,1))_U_$P($G(TIUPL(TIUI,1)),U,2)_U_+$G(TIUPL(TIUI,2))
"RTN","TIURP",31,0)
 . S ^TMP("TIURP",$J,"#")=TIUPICK_"^1:"_VALMCNT
"RTN","TIURP",32,0)
 . D FLDCTRL^VALM10(TIUI,"NUMBER",IOINHI,IOINORM)
"RTN","TIURP",33,0)
 S ^TMP("TIURP",$J,0)=VALMCNT
"RTN","TIURP",34,0)
 Q
"RTN","TIURP",35,0)
HDR ; header code
"RTN","TIURP",36,0)
 N TIUPCNT,TIUID,TIUAGE,TIUDOB,TIUWT,HDR
"RTN","TIURP",37,0)
 S TIUID=$G(VADM(1))_"   "_VA("PID")
"RTN","TIURP",38,0)
 S TIUDOB=$P($G(VADM(3)),U,2),TIUAGE="("_+$G(VADM(4))_")"
"RTN","TIURP",39,0)
 S TIUWT="Wt (lb): "_"   "
"RTN","TIURP",40,0)
 S TIUPCNT=$J(+$G(^TMP("TIURP",$J,0)),4)_" active problems"
"RTN","TIURP",41,0)
 S HDR=$$SETSTR^VALM1(TIUID,$G(HDR),1,38)
"RTN","TIURP",42,0)
 S HDR=$$SETSTR^VALM1(TIUDOB,$G(HDR),50,11)
"RTN","TIURP",43,0)
 S HDR=$$SETSTR^VALM1(TIUAGE,$G(HDR),63,$L(TIUAGE))
"RTN","TIURP",44,0)
 S HDR=$$SETSTR^VALM1(TIUWT,$G(HDR),68,12)
"RTN","TIURP",45,0)
 S VALMHDR(1)=HDR
"RTN","TIURP",46,0)
 ;S VALMHDR(1)=$$SETSTR^VALM1(TIUPCNT,VALMHDR(1),(IOM-$L(TIUPCNT)),$L(TIUPCNT))
"RTN","TIURP",47,0)
 Q
"RTN","TIURP",48,0)
 ;
"RTN","TIURP",49,0)
HELP ; -- help code
"RTN","TIURP",50,0)
 N X
"RTN","TIURP",51,0)
 W !!?4,"To update the problem list first select from Add, Remove, Edit,"
"RTN","TIURP",52,0)
 W !?4 W:GMPARAM("VER") "Verify, "
"RTN","TIURP",53,0)
 W "Inactivate, or Comment, then enter the problem number(s)."
"RTN","TIURP",54,0)
 W !?4,"If you need more information on a problem, select Detailed"
"RTN","TIURP",55,0)
 W !?4,"Display; to change whether all or only selected problems for this"
"RTN","TIURP",56,0)
 W !?4,"patient are listed, choose Select View.  Enter ?? to see more"
"RTN","TIURP",57,0)
 W !?4,"actions for facilitating navigation of the list."
"RTN","TIURP",58,0)
 W !?4,"Problem statuses:  * - Acute   I - Inactive"
"RTN","TIURP",59,0)
 W:GMPARAM("VER") "   $ - Unverified"
"RTN","TIURP",60,0)
 W !!,"Press <return> to continue ... " R X:DTIME
"RTN","TIURP",61,0)
 S VALMSG=$$MSG^GMPLX,VALMBCK=$S(VALMCC:"",1:"R")
"RTN","TIURP",62,0)
 Q
"RTN","TIURP",63,0)
EXIT ; Joel, clean up your mess!
"RTN","TIURP",64,0)
 K ^TMP("TIURP",$J),^TMP("TIURPIDX",$J)
"RTN","TIURP",65,0)
 K XQORM("KEY","="),XQORM("XLATE")
"RTN","TIURP",66,0)
 Q
"RTN","TIURPN")
0^218^B15422869
"RTN","TIURPN",1,0)
TIURPN ; SLC/JER - QUICK Review BY PATIENT ;10/11/94  11:09
"RTN","TIURPN",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURPN",3,0)
EN(TIUCLASS,DFN) ; Entry point for build code
"RTN","TIURPN",4,0)
 N DIRUT,DTOUT,DUOUT,TIUI,SCREEN,STATUS,TIUTYP,TIUSTAT,TIUEDFLT,TIUDCL
"RTN","TIURPN",5,0)
 N TIUDPRMT,TIUPICT,TIUOUT
"RTN","TIURPN",6,0)
 K DIROUT
"RTN","TIURPN",7,0)
 S TIUEDT=$$FMADD^XLFDT(DT,$S($D(^DPT(DFN,.1))'>0:-180,1:-30))
"RTN","TIURPN",8,0)
 S TIULDT=+$$NOW^XLFDT
"RTN","TIURPN",9,0)
 W !,"Searching for the documents."
"RTN","TIURPN",10,0)
 D BUILD(TIUCLASS,DFN,TIUEDT,TIULDT)
"RTN","TIURPN",11,0)
 Q
"RTN","TIURPN",12,0)
BUILD(CLASS,DFN,EARLY,LATE) ; Build List
"RTN","TIURPN",13,0)
 N TIUCNT,TIUDT,TIUI,TIUJ,TIUK,TIUP,TIUQ,TIUDA,TIUREC
"RTN","TIURPN",14,0)
 N TIUT,TIUTP,XREF,TIUS,TIUPREF,TIUPICK
"RTN","TIURPN",15,0)
 S (TIUK,VALMCNT)=0
"RTN","TIURPN",16,0)
 K ^TMP("TIUR",$J),^TMP("TIURIDX",$J)
"RTN","TIURPN",17,0)
 S EARLY=9999999-+$G(EARLY),LATE=9999999-+$G(LATE)
"RTN","TIURPN",18,0)
 S TIUJ=LATE
"RTN","TIURPN",19,0)
 S TIUPICK=+$O(^ORD(101,"B","TIU ACTION SELECT LIST ELEMENT",0))
"RTN","TIURPN",20,0)
 F  S TIUJ=$O(^TIU(8925,"APTCL",DFN,CLASS,TIUJ)) Q:+TIUJ'>0!(+TIUJ>EARLY)  D
"RTN","TIURPN",21,0)
 . S TIUDA=0
"RTN","TIURPN",22,0)
 . F  S TIUDA=$O(^TIU(8925,"APTCL",DFN,CLASS,TIUJ,TIUDA)) Q:+TIUDA'>0  D
"RTN","TIURPN",23,0)
 . . D ADDELMNT(TIUDA,.TIUCNT)
"RTN","TIURPN",24,0)
 S ^TMP("TIUR",$J,0)=+$G(TIUCNT)_U_"ALL^APT^"_DFN
"RTN","TIURPN",25,0)
 S ^TMP("TIUR",$J,0)=^TMP("TIUR",$J,0)_U_$P(^DPT(DFN,0),U)
"RTN","TIURPN",26,0)
 S ^TMP("TIUR",$J,"CLASS")=TIUCLASS
"RTN","TIURPN",27,0)
 S ^TMP("TIUR",$J,"#")=TIUPICK_"^1:"_+$G(TIUCNT)
"RTN","TIURPN",28,0)
 I $D(VALMHDR)>9 D HDR^TIURH
"RTN","TIURPN",29,0)
 I +$G(TIUCNT)'>0 D
"RTN","TIURPN",30,0)
 . S ^TMP("TIUR",$J,1,0)="",VALMCNT=2
"RTN","TIURPN",31,0)
 . S ^TMP("TIUR",$J,2,0)="     No records found to satisfy search criteria."
"RTN","TIURPN",32,0)
 Q
"RTN","TIURPN",33,0)
ADDELMNT(DA,TIUCNT,APPEND) ; Add each element to the list
"RTN","TIURPN",34,0)
 N DIC,DIQ,DR,TIUR,PT,MOM,ADT,DDT,LCT,AUT,AMD,EDT,SDT,XDT,RMD,TIULST4
"RTN","TIURPN",35,0)
 N TIUP,TIUREC,TIUD0,TIUD12,TIUD13,TIUD15,TIULI,STATX,DOC
"RTN","TIURPN",36,0)
 I '$D(^TIU(8925,DA,0)) Q
"RTN","TIURPN",37,0)
 I $G(^TMP("TIUR",$J,2,0))="     No records found to satisfy search criteria." D
"RTN","TIURPN",38,0)
 . S ^TMP("TIUR",$J,2,0)="",VALMCNT=2,TIUCNT=0
"RTN","TIURPN",39,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD12=$G(^TIU(8925,+DA,12))
"RTN","TIURPN",40,0)
 S TIUD13=$G(^TIU(8925,+DA,13)),TIUD15=$G(^TIU(8925,+DA,15))
"RTN","TIURPN",41,0)
 I +TIUD0=81,(+$P(TIUD0,U,5)>5) Q
"RTN","TIURPN",42,0)
 S DOC=$$PNAME^TIULC1(+TIUD0)
"RTN","TIURPN",43,0)
 I DOC="Addendum" S DOC=DOC_" to "_$$PNAME^TIULC1(+$G(^TIU(8925,+$P(TIUD0,U,6),0)))
"RTN","TIURPN",44,0)
 S PT=$$NAME^TIULS($$PTNAME^TIULC1($P(TIUD0,U,2)),"LAST,FI MI")
"RTN","TIURPN",45,0)
 S TIULI=$E(PT)
"RTN","TIURPN",46,0)
 I +$O(^TIU(8925,"DAD",+DA,0)),$$HASADDEN^TIULC1(DA) S PT="+ "_PT
"RTN","TIURPN",47,0)
 S TIUP=$$URGENCY(+DA)
"RTN","TIURPN",48,0)
 S:TIUP=1 PT=$S(PT["+":"*",1:"* ")_PT
"RTN","TIURPN",49,0)
 S TIULST4=$E($P($G(^DPT(+$P(TIUD0,U,2),0)),U,9),6,9)
"RTN","TIURPN",50,0)
 S TIULST4="("_TIULI_TIULST4_")"
"RTN","TIURPN",51,0)
 S ADT=$$DATE^TIULS($P(TIUD0,U,7),"MM/DD/YY")
"RTN","TIURPN",52,0)
 S DDT=$$DATE^TIULS($P(TIUD0,U,8),"MM/DD/YY")
"RTN","TIURPN",53,0)
 S AMD=$$PERSNAME^TIULC1($P(TIUD12,U,8)) S:AMD="UNKNOWN" AMD=""
"RTN","TIURPN",54,0)
 S AUT=$$PERSNAME^TIULC1($P(TIUD12,U,2)) S:AUT="UNKNOWN" AUT=""
"RTN","TIURPN",55,0)
 S AMD=$$NAME^TIULS(AMD,"LAST,FI MI")
"RTN","TIURPN",56,0)
 S AUT=$$NAME^TIULS(AUT,"LAST,FI MI")
"RTN","TIURPN",57,0)
 S EDT=$$DATE^TIULS($P(TIUD13,U),"MM/DD/YY")
"RTN","TIURPN",58,0)
 S SDT=$S(+$P(TIUD15,U,7):+$P(TIUD15,U,7),+$P(TIUD0,U,5)'<7:+$P(TIUD15,U),1:"")
"RTN","TIURPN",59,0)
 S SDT=$$DATE^TIULS(SDT,"MM/DD/YY")
"RTN","TIURPN",60,0)
 S STATX=$P($G(^TIU(8925.6,+$P(TIUD0,U,5),0)),U)
"RTN","TIURPN",61,0)
 S TIUCNT=+$G(TIUCNT)+1
"RTN","TIURPN",62,0)
 S TIUREC=$$SETFLD^VALM1(TIUCNT,"","NUMBER")
"RTN","TIURPN",63,0)
 S TIUREC=$$SETFLD^VALM1(PT,TIUREC,"PATIENT NAME")
"RTN","TIURPN",64,0)
 S TIUREC=$$SETFLD^VALM1(TIULST4,TIUREC,"LAST I/LAST 4")
"RTN","TIURPN",65,0)
 S TIUREC=$$SETFLD^VALM1(DOC,TIUREC,"DOCUMENT TYPE")
"RTN","TIURPN",66,0)
 S TIUREC=$$SETFLD^VALM1(EDT,TIUREC,"REF DATE")
"RTN","TIURPN",67,0)
 S TIUREC=$$SETFLD^VALM1(SDT,TIUREC,"SIG DATE")
"RTN","TIURPN",68,0)
 S TIUREC=$$SETFLD^VALM1($$LOWER^TIULS(STATX),TIUREC,"STATUS")
"RTN","TIURPN",69,0)
 S TIUREC=$$SETFLD^VALM1(AUT,TIUREC,"AUTHOR")
"RTN","TIURPN",70,0)
 S TIUREC=$$SETFLD^VALM1(AMD,TIUREC,"COSIGNER")
"RTN","TIURPN",71,0)
 S VALMCNT=+$G(VALMCNT)+1,^TMP("TIUR",$J,TIUCNT,0)=TIUREC
"RTN","TIURPN",72,0)
 S ^TMP("TIUR",$J,"IDX",VALMCNT,TIUCNT)="" W:TIUCNT#10'>0 "."
"RTN","TIURPN",73,0)
 S ^TMP("TIURIDX",$J,TIUCNT)=VALMCNT_U_DA
"RTN","TIURPN",74,0)
 D FLDCTRL^VALM10(TIUCNT,"NUMBER",IOINHI,IOINORM)
"RTN","TIURPN",75,0)
 Q
"RTN","TIURPN",76,0)
CLEAN ; Clean up your mess!
"RTN","TIURPN",77,0)
 K ^TMP("TIUR",$J),^TMP("TIURIDX",$J) D CLEAN^VALM10
"RTN","TIURPN",78,0)
 K VALMY
"RTN","TIURPN",79,0)
 Q
"RTN","TIURPN",80,0)
URGENCY(TIUDA) ; What is the urgency of the current document
"RTN","TIURPN",81,0)
 N TIUY,TIUD0,TIUDSTAT,TIUDURG
"RTN","TIURPN",82,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUDSTAT=$P(TIUD0,U,5)
"RTN","TIURPN",83,0)
 S TIUDURG=$P(TIUD0,U,9)
"RTN","TIURPN",84,0)
 S TIUY=$S(TIUDSTAT<7:$S(TIUDURG="P":1,1:2),1:3)
"RTN","TIURPN",85,0)
 Q TIUY
"RTN","TIURPTTL")
0^168^B59669322
"RTN","TIURPTTL",1,0)
TIURPTTL ; SLC/JER - Review Documents by PATIENT & TITLE ;10/11/94  11:09
"RTN","TIURPTTL",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURPTTL",3,0)
MAKELIST(TIUCLASS) ; Get Search Criteria
"RTN","TIURPTTL",4,0)
 N DFN,TIUI,SCREEN,STATUS,TIUTYP,TIUSTAT,TIUEDFLT,TIUDCL,TIUQUIT
"RTN","TIURPTTL",5,0)
STATUS S STATUS=$$SELSTAT^TIULA(.TIUSTAT,"F","ALL")
"RTN","TIURPTTL",6,0)
 I +STATUS<0 S VALMQUIT=1 Q
"RTN","TIURPTTL",7,0)
PATIENT ; Select Patient
"RTN","TIURPTTL",8,0)
 S DFN=$S(+$G(ORVP):+$G(ORVP),1:+$$PATIENT^TIULA)
"RTN","TIURPTTL",9,0)
 I +DFN'>0 S VALMQUIT=1 Q
"RTN","TIURPTTL",10,0)
DOCTYPE ; Select Document Type(s)
"RTN","TIURPTTL",11,0)
 N TIUDCL
"RTN","TIURPTTL",12,0)
 D TITLPICK^TIULA3(.TIUTYP,TIUCLASS)
"RTN","TIURPTTL",13,0)
 I +$D(TIUQUIT) S VALMQUIT=1 Q
"RTN","TIURPTTL",14,0)
 I +$G(TIUTYP)'>0,'$D(TIUQUIK) G STATUS
"RTN","TIURPTTL",15,0)
SCREEN ;
"RTN","TIURPTTL",16,0)
 N TIUNAME
"RTN","TIURPTTL",17,0)
 S TIUNAME=$P($G(^VA(200,+DUZ,0)),U)
"RTN","TIURPTTL",18,0)
 S SCREEN=1,SCREEN(1)="APT^"_DFN
"RTN","TIURPTTL",19,0)
 D CHECKADD(.TIUTYP)
"RTN","TIURPTTL",20,0)
ERLY S TIUEDFLT=$S(TIUCLASS=3:"T-2",TIUCLASS=244:"T-30",1:"T-7")
"RTN","TIURPTTL",21,0)
 S TIUEDT=$S($D(TIUQUIK):1,1:$P($$EDATE^TIULA("Reference","",TIUEDFLT),U))
"RTN","TIURPTTL",22,0)
 I +$G(DIROUT) S VALMQUIT=1 Q
"RTN","TIURPTTL",23,0)
 I TIUEDT'>0 G SCREEN
"RTN","TIURPTTL",24,0)
 S TIULDT=$S($D(TIUQUIK):9999999,1:$P($$LDATE^TIULA("Reference"),U))
"RTN","TIURPTTL",25,0)
 I +$G(DIROUT) S VALMQUIT=1 Q
"RTN","TIURPTTL",26,0)
 I TIULDT'>0 G ERLY
"RTN","TIURPTTL",27,0)
 I TIUEDT>TIULDT D SWAP^TIUR(.TIUEDT,.TIULDT)
"RTN","TIURPTTL",28,0)
 I $L(TIULDT,".")=1 D EXPRANGE^TIUR(.TIUEDT,.TIULDT)
"RTN","TIURPTTL",29,0)
 W !,"Searching for the documents."
"RTN","TIURPTTL",30,0)
 D BUILD(.TIUSTAT,.TIUTYP,.SCREEN,TIUEDT,TIULDT)
"RTN","TIURPTTL",31,0)
 Q
"RTN","TIURPTTL",32,0)
CHECKADD(TYPES) ; Checks whether Addendum is included in the list of types
"RTN","TIURPTTL",33,0)
 N TIUI,HIT S (TIUI,HIT)=0
"RTN","TIURPTTL",34,0)
 F  S TIUI=$O(TYPES(TIUI)) Q:+TIUI'>0!+HIT  I $$UP^XLFSTR(TYPES(TIUI))["ADDENDUM" S HIT=1
"RTN","TIURPTTL",35,0)
 I +HIT'>0 S TYPES(TYPES+1)=+TYPES(TYPES)+1_U_"81^Addendum^NOT PICKED",TYPES=TYPES+1
"RTN","TIURPTTL",36,0)
 Q
"RTN","TIURPTTL",37,0)
BUILD(STATUS,TYPES,SCREEN,EARLY,LATE) ; Build List
"RTN","TIURPTTL",38,0)
 N TIUCNT,TIUDT,TIUI,TIUJ,TIUK,TIUP,TIUQ,TIUIFN,TIUREC
"RTN","TIURPTTL",39,0)
 N TIUT,TIUTP,XREF,TIUS,TIUPREF
"RTN","TIURPTTL",40,0)
 S TIUPREF=$$PERSPRF^TIULE(DUZ),(TIUK,VALMCNT)=0
"RTN","TIURPTTL",41,0)
 K ^TMP("TIUR",$J),^TMP("TIURIDX",$J),^TMP("TIUI",$J)
"RTN","TIURPTTL",42,0)
 I '$D(TIUPRM0)!'$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIURPTTL",43,0)
 S EARLY=9999999-+$G(EARLY),LATE=9999999-$S(+$G(LATE):+$G(LATE),1:3333333)
"RTN","TIURPTTL",44,0)
 F  S TIUK=$O(SCREEN(TIUK)) Q:TIUK'>0  D
"RTN","TIURPTTL",45,0)
 . S XREF=$P(SCREEN(TIUK),U)
"RTN","TIURPTTL",46,0)
 . I XREF'="ASUB" D
"RTN","TIURPTTL",47,0)
 . . S TIUI=$S(XREF'="APRB":$P(SCREEN(TIUK),U,2),1:$$UPPER^TIULS($P(SCREEN(TIUK),U,3)))
"RTN","TIURPTTL",48,0)
 . . D GATHER(TIUI,TIUPREF,TIUCLASS)
"RTN","TIURPTTL",49,0)
 . I XREF="ASUB" D
"RTN","TIURPTTL",50,0)
 . . S TIUI=$O(^TIU(8925,XREF,$P(SCREEN(TIUK),U,2)),-1)
"RTN","TIURPTTL",51,0)
 . . F  S TIUI=$O(^TIU(8925,XREF,TIUI)) Q:TIUI=""!(TIUI'[$P(SCREEN(TIUK),U,2))  D GATHER(TIUI,TIUPREF,TIUCLASS)
"RTN","TIURPTTL",52,0)
 D PUTLIST(TIUPREF)
"RTN","TIURPTTL",53,0)
 Q
"RTN","TIURPTTL",54,0)
GATHER(TIUI,TIUPREF,CLASS) ; Find/sort records for the list
"RTN","TIURPTTL",55,0)
 N TIUT,TIUTP,TIUS,TIUSTAT,TIUSFLD,TIUD0,TIUD12,TIUD13,TIUD15
"RTN","TIURPTTL",56,0)
 N TIUSVAL
"RTN","TIURPTTL",57,0)
 S TIUSFLD=$P(TIUPREF,U,3)
"RTN","TIURPTTL",58,0)
 S TIUSFLD=$S(TIUSFLD="P":".02",TIUSFLD="D":".01",TIUSFLD="S":".05",TIUSFLD="C":"1507",TIUSFLD="A":"1202",TIUSFLD="E":"1208",1:"1301")
"RTN","TIURPTTL",59,0)
 S TIUT=0 F  S TIUT=$O(TYPES(TIUT)) Q:+TIUT'>0  D
"RTN","TIURPTTL",60,0)
 . S TIUTP=+$P($G(TYPES(TIUT)),U,2) Q:TIUTP'>0
"RTN","TIURPTTL",61,0)
 . S TIUS=0 F  S TIUS=$O(STATUS(TIUS)) Q:+TIUS'>0  D
"RTN","TIURPTTL",62,0)
 . . S TIUSTAT=$O(^TIU(8925.6,"B",$$UPPER^TIULS($P(STATUS(TIUS),U,3)),0))
"RTN","TIURPTTL",63,0)
 . . Q:+TIUSTAT'>0
"RTN","TIURPTTL",64,0)
 . . S TIUJ=LATE F  S TIUJ=$O(^TIU(8925,XREF,TIUI,TIUTP,TIUSTAT,TIUJ)) Q:+TIUJ'>0!(+TIUJ>EARLY)  D
"RTN","TIURPTTL",65,0)
 . . . S TIUIFN=0
"RTN","TIURPTTL",66,0)
 . . . F  S TIUIFN=$O(^TIU(8925,XREF,TIUI,TIUTP,TIUSTAT,TIUJ,TIUIFN)) Q:+TIUIFN'>0  D
"RTN","TIURPTTL",67,0)
 . . . . ;Consider adding view check here
"RTN","TIURPTTL",68,0)
 . . . . I TIUTP=81,(+TYPES>1),($P(TYPES(TIUT),U,4)="NOT PICKED"),'+$$DADINTYP(TIUIFN,.TYPES) Q
"RTN","TIURPTTL",69,0)
 . . . . S TIUQ=$$RESOLVE(TIUIFN,TIUSFLD)
"RTN","TIURPTTL",70,0)
 . . . . S ^TMP("TIUI",$J,TIUQ,TIUJ,TIUIFN)=""
"RTN","TIURPTTL",71,0)
 Q
"RTN","TIURPTTL",72,0)
DADINTYP(TIUDA,TYPES) ; Evaluates whether addendum's parent belongs is among
"RTN","TIURPTTL",73,0)
 ;                 the selected types
"RTN","TIURPTTL",74,0)
 N TIUI,TIUDTYP,TIUY S (TIUI,TIUY)=0
"RTN","TIURPTTL",75,0)
 S TIUDTYP=+$G(^TIU(8925,+$P($G(^TIU(8925,+TIUDA,0)),U,6),0))
"RTN","TIURPTTL",76,0)
 F  S TIUI=$O(TYPES(TIUI)) Q:+TIUI'>0!+TIUY  D
"RTN","TIURPTTL",77,0)
 . I +$P(TYPES(TIUI),U,2)=TIUDTYP S TIUY=1
"RTN","TIURPTTL",78,0)
 Q TIUY
"RTN","TIURPTTL",79,0)
RESOLVE(DA,DR) ; resolve sort field values
"RTN","TIURPTTL",80,0)
 N TIUD0,TIUD12,TIUD13,TIUD15,TIUY
"RTN","TIURPTTL",81,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD12=$G(^TIU(8925,+DA,12))
"RTN","TIURPTTL",82,0)
 S TIUD13=$G(^TIU(8925,+DA,13)),TIUD15=$G(^TIU(8925,+DA,15))
"RTN","TIURPTTL",83,0)
 I DR=.01 S TIUY=$$PNAME^TIULC1(+TIUD0) G RESX
"RTN","TIURPTTL",84,0)
 I DR=.02 S TIUY=$$PTNAME^TIULC1(+$P(TIUD0,U,2)) G RESX
"RTN","TIURPTTL",85,0)
 I DR=.05 S TIUY=$P(TIUD0,U,5) G RESX
"RTN","TIURPTTL",86,0)
 I DR=1202 S TIUY=$$PERSNAME^TIULC1(+$P(TIUD12,U,2)) S:TIUY="UNKNOWN" TIUY="" G RESX
"RTN","TIURPTTL",87,0)
 I DR=1208 S TIUY=$$PERSNAME^TIULC1(+$P(TIUD12,U,8)) S:TIUY="UNKNOWN" TIUY="" G RESX
"RTN","TIURPTTL",88,0)
 I DR=1301 S TIUY=$P(TIUD13,U) G RESX
"RTN","TIURPTTL",89,0)
 I DR=1507,($P(TIUD0,U,5)=7),(+$P(TIUD15,U,7)'>0) S DR=1501
"RTN","TIURPTTL",90,0)
 I DR=1501 S TIUY=$P(TIUD15,U) G RESX
"RTN","TIURPTTL",91,0)
 I DR=1507 S TIUY=$P(TIUD15,U,7)
"RTN","TIURPTTL",92,0)
RESX I $G(TIUY)']"" S TIUY="ZZZZEMPTY"
"RTN","TIURPTTL",93,0)
 Q TIUY
"RTN","TIURPTTL",94,0)
PUTLIST(TIUPREF) ; Expands list elements for LM Template
"RTN","TIURPTTL",95,0)
 N TIUJ,TIUQ,TIUDA,TIUPICK,TIUORDER
"RTN","TIURPTTL",96,0)
 S TIUORDER=$S($P(TIUPREF,U,4)="D":-1,1:1)
"RTN","TIURPTTL",97,0)
 S TIUPICK=+$O(^ORD(101,"B","TIU ACTION SELECT LIST ELEMENT",0))
"RTN","TIURPTTL",98,0)
 S TIUQ="" F  S TIUQ=$O(^TMP("TIUI",$J,TIUQ),TIUORDER) Q:TIUQ']""  D
"RTN","TIURPTTL",99,0)
 . S TIUJ=0 F  S TIUJ=$O(^TMP("TIUI",$J,TIUQ,TIUJ)) Q:+TIUJ'>0  D
"RTN","TIURPTTL",100,0)
 . . S TIUDA=0 F  S TIUDA=$O(^TMP("TIUI",$J,TIUQ,TIUJ,TIUDA)) Q:+TIUDA'>0  D ADDELMNT(TIUDA,.TIUCNT)
"RTN","TIURPTTL",101,0)
 S TIUS=1,STATUS=$$UPPER^TIULS($P(STATUS(1),U,3))
"RTN","TIURPTTL",102,0)
 I +$G(STATUS(4))'>0 F  S TIUS=$O(STATUS(TIUS)) Q:+TIUS'>0  D
"RTN","TIURPTTL",103,0)
 . S STATUS=STATUS_$S(TIUS=+STATUS(1):" & ",1:", ")_$$UPPER^TIULS($P(STATUS(TIUS),U,3))
"RTN","TIURPTTL",104,0)
 I +$G(STATUS(4))>0 S STATUS=$S($P(STATUS(4),U,4)="ALL":"ALL",1:STATUS_" & OTHER")
"RTN","TIURPTTL",105,0)
 S ^TMP("TIUR",$J,0)=+$G(TIUCNT)_U_STATUS
"RTN","TIURPTTL",106,0)
 S TIUJ=0,SCREEN="" F  S TIUJ=$O(SCREEN(TIUJ)) Q:+TIUJ'>0  D
"RTN","TIURPTTL",107,0)
 . S SCREEN=$G(SCREEN)_$S(TIUJ>1:";",1:U)_SCREEN(TIUJ)
"RTN","TIURPTTL",108,0)
 S ^TMP("TIUR",$J,0)=^TMP("TIUR",$J,0)_$G(SCREEN)
"RTN","TIURPTTL",109,0)
 S ^TMP("TIUR",$J,"CLASS")=TIUCLASS
"RTN","TIURPTTL",110,0)
 S ^TMP("TIUR",$J,"#")=TIUPICK_"^1:"_+$G(TIUCNT)
"RTN","TIURPTTL",111,0)
 I $D(VALMHDR)>9 D HDR^TIURH
"RTN","TIURPTTL",112,0)
 I +$G(TIUCNT)'>0 D
"RTN","TIURPTTL",113,0)
 . S ^TMP("TIUR",$J,1,0)="",VALMCNT=2
"RTN","TIURPTTL",114,0)
 . S ^TMP("TIUR",$J,2,0)="     No records found to satisfy search criteria."
"RTN","TIURPTTL",115,0)
 Q
"RTN","TIURPTTL",116,0)
ADDELMNT(DA,TIUCNT,APPEND) ; Add each element to the list
"RTN","TIURPTTL",117,0)
 N DIC,DIQ,DR,TIUR,PT,MOM,ADT,DDT,LCT,AUT,AMD,EDT,SDT,XDT,RMD,TIULST4
"RTN","TIURPTTL",118,0)
 N TIUP,TIUREC,TIUD0,TIUD12,TIUD13,TIUD15,TIULI,STATX
"RTN","TIURPTTL",119,0)
 I '$D(^TIU(8925,DA,0)) Q
"RTN","TIURPTTL",120,0)
 I $G(^TMP("TIUR",$J,2,0))="     No records found to satisfy search criteria." D
"RTN","TIURPTTL",121,0)
 . S ^TMP("TIUR",$J,2,0)="",VALMCNT=2,TIUCNT=0
"RTN","TIURPTTL",122,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD12=$G(^TIU(8925,+DA,12))
"RTN","TIURPTTL",123,0)
 S TIUD13=$G(^TIU(8925,+DA,13)),TIUD15=$G(^TIU(8925,+DA,15))
"RTN","TIURPTTL",124,0)
 S DOC=$$PNAME^TIULC1(+TIUD0)
"RTN","TIURPTTL",125,0)
 I DOC="Addendum" S DOC=DOC_" to "_$$PNAME^TIULC1(+$G(^TIU(8925,+$P(TIUD0,U,6),0)))
"RTN","TIURPTTL",126,0)
 S PT=$$NAME^TIULS($$PTNAME^TIULC1($P(TIUD0,U,2)),"LAST,FI MI")
"RTN","TIURPTTL",127,0)
 S TIULI=$E(PT)
"RTN","TIURPTTL",128,0)
 I +$O(^TIU(8925,"DAD",+DA,0)),$$HASADDEN^TIULC1(DA) S PT="+ "_PT
"RTN","TIURPTTL",129,0)
 S TIUP=$$URGENCY(+DA)
"RTN","TIURPTTL",130,0)
 S:TIUP=1 PT=$S(PT["+":"*",1:"* ")_PT
"RTN","TIURPTTL",131,0)
 S TIULST4=$E($P($G(^DPT(+$P(TIUD0,U,2),0)),U,9),6,9)
"RTN","TIURPTTL",132,0)
 S TIULST4="("_TIULI_TIULST4_")"
"RTN","TIURPTTL",133,0)
 S ADT=$$DATE^TIULS($P(TIUD0,U,7),"MM/DD/YY")
"RTN","TIURPTTL",134,0)
 S DDT=$$DATE^TIULS($P(TIUD0,U,8),"MM/DD/YY")
"RTN","TIURPTTL",135,0)
 S AMD=$$PERSNAME^TIULC1($P(TIUD12,U,8)) S:AMD="UNKNOWN" AMD=""
"RTN","TIURPTTL",136,0)
 S AUT=$$PERSNAME^TIULC1($P(TIUD12,U,2)) S:AUT="UNKNOWN" AUT=""
"RTN","TIURPTTL",137,0)
 S AMD=$$NAME^TIULS(AMD,"LAST, FI MI")
"RTN","TIURPTTL",138,0)
 S AUT=$$NAME^TIULS(AUT,"LAST, FI MI")
"RTN","TIURPTTL",139,0)
 S EDT=$$DATE^TIULS($P(TIUD13,U),"MM/DD/YY")
"RTN","TIURPTTL",140,0)
 S SDT=$S(+$P(TIUD15,U,7):+$P(TIUD15,U,7),+$P(TIUD0,U,5)'<7:+$P(TIUD15,U),1:"")
"RTN","TIURPTTL",141,0)
 S SDT=$$DATE^TIULS(SDT,"MM/DD/YY")
"RTN","TIURPTTL",142,0)
 S STATX=$P($G(^TIU(8925.6,+$P(TIUD0,U,5),0)),U)
"RTN","TIURPTTL",143,0)
 S TIUCNT=+$G(TIUCNT)+1
"RTN","TIURPTTL",144,0)
 S TIUREC=$$SETFLD^VALM1(TIUCNT,"","NUMBER")
"RTN","TIURPTTL",145,0)
 S TIUREC=$$SETFLD^VALM1(PT,TIUREC,"PATIENT NAME")
"RTN","TIURPTTL",146,0)
 S TIUREC=$$SETFLD^VALM1(TIULST4,TIUREC,"LAST I/LAST 4")
"RTN","TIURPTTL",147,0)
 S TIUREC=$$SETFLD^VALM1(DOC,TIUREC,"DOCUMENT TYPE")
"RTN","TIURPTTL",148,0)
 S TIUREC=$$SETFLD^VALM1(EDT,TIUREC,"REF DATE")
"RTN","TIURPTTL",149,0)
 S TIUREC=$$SETFLD^VALM1($$LOWER^TIULS(STATX),TIUREC,"STATUS")
"RTN","TIURPTTL",150,0)
 S TIUREC=$$SETFLD^VALM1(SDT,TIUREC,"SIG DATE")
"RTN","TIURPTTL",151,0)
 S TIUREC=$$SETFLD^VALM1(AUT,TIUREC,"AUTHOR")
"RTN","TIURPTTL",152,0)
 S TIUREC=$$SETFLD^VALM1(AMD,TIUREC,"COSIGNER")
"RTN","TIURPTTL",153,0)
 S VALMCNT=+$G(VALMCNT)+1,^TMP("TIUR",$J,TIUCNT,0)=TIUREC
"RTN","TIURPTTL",154,0)
 S ^TMP("TIUR",$J,"IDX",VALMCNT,TIUCNT)="" W "."
"RTN","TIURPTTL",155,0)
 S ^TMP("TIURIDX",$J,TIUCNT)=VALMCNT_U_DA
"RTN","TIURPTTL",156,0)
 D FLDCTRL^VALM10(TIUCNT,"NUMBER",IOINHI,IOINORM)
"RTN","TIURPTTL",157,0)
 I +$G(APPEND) D
"RTN","TIURPTTL",158,0)
 . D RESTORE^VALM10(TIUCNT)
"RTN","TIURPTTL",159,0)
 . D CNTRL^VALM10(TIUCNT,1,$G(VALM("RM")),IOINHI,IOINORM),HDR^TIURH
"RTN","TIURPTTL",160,0)
 . S VALMSG="** Item #"_TIUCNT_" Added **"
"RTN","TIURPTTL",161,0)
 . S $P(^TMP("TIUR",$J,0),U)=+$G(TIUCNT)
"RTN","TIURPTTL",162,0)
 . S $P(^TMP("TIUR",$J,"#"),":",2)=+$G(TIUCNT)
"RTN","TIURPTTL",163,0)
 . I $D(VALMHDR)>9 D HDR^TIURH
"RTN","TIURPTTL",164,0)
 Q
"RTN","TIURPTTL",165,0)
CLEAN ; Clean up your mess!
"RTN","TIURPTTL",166,0)
 K ^TMP("TIUR",$J),^TMP("TIURIDX",$J) D CLEAN^VALM10
"RTN","TIURPTTL",167,0)
 K VALMY
"RTN","TIURPTTL",168,0)
 Q
"RTN","TIURPTTL",169,0)
URGENCY(TIUDA) ; What is the urgency of the current document
"RTN","TIURPTTL",170,0)
 N TIUY,TIUD0,TIUDSTAT,TIUDURG
"RTN","TIURPTTL",171,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUDSTAT=$P(TIUD0,U,5)
"RTN","TIURPTTL",172,0)
 S TIUDURG=$P(TIUD0,U,9)
"RTN","TIURPTTL",173,0)
 S TIUY=$S(TIUDSTAT<7:$S(TIUDURG="P":1,1:2),1:3)
"RTN","TIURPTTL",174,0)
 Q TIUY
"RTN","TIURPTTL",175,0)
DFLTSTAT(USER) ; Set default STATUS for current user
"RTN","TIURPTTL",176,0)
 N TIUMIS,TIUMD,TIUY,TIUDPRM D DOCPRM^TIULC1(244,.TIUDPRM)
"RTN","TIURPTTL",177,0)
 S TIUMIS=$$ISA^USRLM(DUZ,"MEDICAL INFORMATION SECTION")
"RTN","TIURPTTL",178,0)
 I +TIUMIS,+$P($G(TIUDPRM(0)),U,3) S TIUY="UNVERIFIED" G DFLTX
"RTN","TIURPTTL",179,0)
 I $$ISA^USRLM(DUZ,"PROVIDER") S TIUY="UNSIGNED" G DFLTX
"RTN","TIURPTTL",180,0)
 S TIUY="COMPLETED"
"RTN","TIURPTTL",181,0)
DFLTX Q TIUY
"RTN","TIURS")
0^169^B29391835
"RTN","TIURS",1,0)
TIURS ; SLC/JER - Electronic signature actions ;9/12/94  14:06
"RTN","TIURS",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURS",3,0)
ELSIG ; Sign rec
"RTN","TIURS",4,0)
 N ASK,TIUEVNT,TIULST,TIUSLST,TIURJCT,TIUDA,TIUDATA,TIUES,TIUI,X,X1,Y
"RTN","TIURS",5,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIURS",6,0)
 I $P(TIUPRM0,U,2)'>0 W !,"Electronic signature not yet enabled." H 3 G ELSIGX
"RTN","TIURS",7,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURS",8,0)
 S (ASK,TIUI)=0 I $D(VALMY)>9 D CLEAR^VALM1
"RTN","TIURS",9,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D
"RTN","TIURS",10,0)
 . N TIU0,TIU12,TIUSTAT,TIUEVNT,TIUTYPE
"RTN","TIURS",11,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURS",12,0)
 . S TIUDA=$P(TIUDATA,U,2),TIU0=$G(^TIU(8925,+TIUDA,0))
"RTN","TIURS",13,0)
 . S TIUSTAT=+$P(TIU0,U,5)
"RTN","TIURS",14,0)
 . S TIUTYPE=$$PNAME^TIULC1(+$G(^TIU(8925,+TIUDA,0)))
"RTN","TIURS",15,0)
 . S TIUEVNT=$S(+TIUSTAT'>5:"SIGNATURE",1:"COSIGNATURE")
"RTN","TIURS",16,0)
 . D RESTORE^TIULM(TIUI)
"RTN","TIURS",17,0)
 . S ASK=$$CANDO^TIULP(TIUDA,TIUEVNT)
"RTN","TIURS",18,0)
 . I +ASK'>0,$P(ASK,U,2)]"" D
"RTN","TIURS",19,0)
 . . D FULL^VALM1
"RTN","TIURS",20,0)
 . . W !!,"Item #",TIUI,": ",$P(ASK,U,2),! K VALMY(TIUI)
"RTN","TIURS",21,0)
 . . W !,"Removed from signature list.",!
"RTN","TIURS",22,0)
 . . I $$READ^TIUU("FOA","Press RETURN to continue...")
"RTN","TIURS",23,0)
 . E  D
"RTN","TIURS",24,0)
 . . N TIU,TIUY
"RTN","TIURS",25,0)
 . . D EN^VALM("TIU SIGN/COSIGN")
"RTN","TIURS",26,0)
 I $D(TIUSLST)'>9 D  G ELSIGX
"RTN","TIURS",27,0)
 . S VALMSG="** Signature List Empty...Nothing signed. **"
"RTN","TIURS",28,0)
 . D FIXLST^TIULM
"RTN","TIURS",29,0)
 I $D(TIUSLST)>9 D
"RTN","TIURS",30,0)
 . S TIUES=$$ASKSIG^TIULA1
"RTN","TIURS",31,0)
 . I '+TIUES S VALMSG="** Nothing Signed. **" D FIXLST^TIULM Q
"RTN","TIURS",32,0)
 . D FULL^VALM1
"RTN","TIURS",33,0)
 . S TIUI=0 F  S TIUI=$O(TIUSLST(TIUI)) Q:+TIUI'>0  D
"RTN","TIURS",34,0)
 . . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI)),TIUDA=$P(TIUDATA,U,2)
"RTN","TIURS",35,0)
 . . S TIULST=$G(TIULST)_$S($G(TIULST)]"":", ",1:"")_TIUI
"RTN","TIURS",36,0)
 . . D ES(TIUDA,TIUES,TIUI)
"RTN","TIURS",37,0)
 . . I '$D(^TMP("TIUR",$J,"CTXT")) D UPDATE^TIURL(TIUDATA)
"RTN","TIURS",38,0)
 . . I $D(^TMP("TIUR",$J,"CTXT")) D RBLD^TIUROR
"RTN","TIURS",39,0)
 I $G(TIULST)']"" S VALMSG="** Nothing Signed. **" D FIXLST^TIULM
"RTN","TIURS",40,0)
 E  S VALMSG="** Item"_$S($L(TIULST,",")>1:"s ",$L(TIULST,"-")>1:"s ",1:" ")_TIULST_" Signed. **"
"RTN","TIURS",41,0)
ELSIGX K VALMY S VALMBCK="R"
"RTN","TIURS",42,0)
 Q
"RTN","TIURS",43,0)
SIGLIST(VALMY,TIUI,TIUTYPE) ; Handles processing of signature list
"RTN","TIURS",44,0)
 N TIUMSG
"RTN","TIURS",45,0)
 S TIUMSG="Is this "_TIUTYPE_" ready for signature"
"RTN","TIURS",46,0)
 W ! S TIUY=$$READ^TIUU("YO",TIUMSG,"NO","^D SIG^TIUDIRH")
"RTN","TIURS",47,0)
 I TIUY'>0 D
"RTN","TIURS",48,0)
 . K VALMY(TIUI)
"RTN","TIURS",49,0)
 . S TIURJCT=$G(TIURJCT)_$S($G(TIURJCT)]"":",",1:"")_TIUI
"RTN","TIURS",50,0)
 . W !!,"Removed from signature list." H 2
"RTN","TIURS",51,0)
 Q
"RTN","TIURS",52,0)
ACCEPT(TIUSLST,TIUI) ; Adds item(s) to signature list
"RTN","TIURS",53,0)
 S TIUSLST(TIUI)=""
"RTN","TIURS",54,0)
 W !,"Item #: ",TIUI," Added to signature list." H 2
"RTN","TIURS",55,0)
 Q
"RTN","TIURS",56,0)
EDSIG(TIUDA,TIUADD,TIUPASK) ; Call from Edit action to sign rec
"RTN","TIURS",57,0)
 N TIU,TIU0,TIU12,ASK,X,X1,TIUTYPE,SIGNER,COSIGNER,TIUTYPE,TIUMSG,TIUSTAT
"RTN","TIURS",58,0)
 N TIUES,TIUACT,TIUDPRM,XTRASGNR
"RTN","TIURS",59,0)
 I +$D(TIUSIGN),(TIUSIGN=0) Q
"RTN","TIURS",60,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIURS",61,0)
 ; If Electronic Signature is not yet enabled, then quit
"RTN","TIURS",62,0)
 I '+$P(TIUPRM0,U,2) S VALMBCK="R" Q
"RTN","TIURS",63,0)
 S TIUADD=1
"RTN","TIURS",64,0)
 S TIU0=$G(^TIU(8925,+TIUDA,0)),TIU12=$G(^TIU(8925,+TIUDA,12))
"RTN","TIURS",65,0)
 S SIGNER=$P(TIU12,U,4),COSIGNER=$P(TIU12,U,8)
"RTN","TIURS",66,0)
 I (DUZ'=SIGNER),(DUZ'=COSIGNER) S XTRASGNR=+$O(^TIU(8925.7,"AE",+TIUDA,+DUZ,0))
"RTN","TIURS",67,0)
 S TIUSTAT=+$P(TIU0,U,5)
"RTN","TIURS",68,0)
 S TIUACT=$S(TIUSTAT'>5:"SIGNATURE",+$G(XTRASGNR):"SIGNATURE",1:"COSIGNATURE")
"RTN","TIURS",69,0)
 S ASK=$$CANDO^TIULP(TIUDA,TIUACT)
"RTN","TIURS",70,0)
 S TIUTYPE=$$PNAME^TIULC1(+TIU0)
"RTN","TIURS",71,0)
 I +ASK'>0 D  Q
"RTN","TIURS",72,0)
 . S VALMBCK="R"
"RTN","TIURS",73,0)
 . I +$$ISA^USRLM(+$G(DUZ),"MEDICAL INFORMATION SECTION"),(+$$ISPN^TIULX(+TIU0)'>0) Q
"RTN","TIURS",74,0)
 . I +$$ISA^USRLM(+$G(DUZ),"MAS TRANSCRIPTIONIST") Q
"RTN","TIURS",75,0)
 . I +$$ISA^USRLM(+$G(DUZ),"TRANSCRIPTIONIST") Q
"RTN","TIURS",76,0)
 . W !,$P(ASK,U,2)
"RTN","TIURS",77,0)
 . I $$READ^TIUU("EA","Press RETURN to continue...") ; pause
"RTN","TIURS",78,0)
 W:$G(VALMAR)'="^TMP(""TIUVIEW"",$J)" !
"RTN","TIURS",79,0)
 I TIUSTAT=5,$G(DUZ)'=SIGNER D
"RTN","TIURS",80,0)
 . S TIUMSG="Author hasn't signed, are you SURE you want to sign "_TIUTYPE
"RTN","TIURS",81,0)
 W ! I $G(TIUMSG)]"",$$READ^TIUU("YO",TIUMSG,"NO","^D SIG^TIUDIRH")'>0 S VALMBCK="R" Q
"RTN","TIURS",82,0)
 S TIUES=$$ASKSIG^TIULA1 I '+TIUES Q
"RTN","TIURS",83,0)
 I $D(VALMAR) D FULL^VALM1
"RTN","TIURS",84,0)
 I +$G(XTRASGNR) D ADDSIG^TIURS1(TIUDA,XTRASGNR)
"RTN","TIURS",85,0)
 I '+$G(XTRASGNR) D ES(TIUDA,TIUES)
"RTN","TIURS",86,0)
 I $G(TIUACT)="COSIGNATURE",(+$$ISADDNDM^TIULC1(TIUDA)'>0) D
"RTN","TIURS",87,0)
 . N TIUADDND
"RTN","TIURS",88,0)
 . S TIUADDND=$$READ^TIUU("YO","Do you wish to add your comments in an addendum","NO")
"RTN","TIURS",89,0)
 . I +TIUADDND D ADD^TIUADD(TIUDA,.TIUCHNG)
"RTN","TIURS",90,0)
 ; --- If required, prompt for print
"RTN","TIURS",91,0)
 I '+$G(TIUPASK) Q
"RTN","TIURS",92,0)
 D DOCPRM^TIULC1(+TIU0,.TIUDPRM,TIUDA)
"RTN","TIURS",93,0)
 I +$P($G(TIUDPRM(0)),U,8) D PRINT^TIUEPRNT(TIUDA)
"RTN","TIURS",94,0)
 Q
"RTN","TIURS",95,0)
ES(DA,ES,TIUI) ; Setup ^DIE call for elec sig
"RTN","TIURS",96,0)
 N SIGNER,DR,DIE,ESDT,TIUSTAT,TIUSTNOW,COSIGNER,SVCHIEF,CSREQ,TIUPRINT
"RTN","TIURS",97,0)
 N CSNEED
"RTN","TIURS",98,0)
 S TIUSTAT=$P($G(^TIU(8925,+DA,0)),U,5),ESDT=$$NOW^TIULC
"RTN","TIURS",99,0)
 S SVCHIEF=+$$ISA^USRLM(DUZ,"CLINICAL SERVICE CHIEF")
"RTN","TIURS",100,0)
 S SIGNER=$P(^TIU(8925,+DA,12),U,4),COSIGNER=$P(^(12),U,8),CSREQ=0
"RTN","TIURS",101,0)
 S CSNEED=+$P($G(^TIU(8925,+DA,15)),U,6)
"RTN","TIURS",102,0)
 I +CSNEED,(DUZ'=COSIGNER),'+$G(SVCHIEF) S CSREQ=1
"RTN","TIURS",103,0)
 I TIUSTAT=5 D
"RTN","TIURS",104,0)
 . S DR=".05////"_$S(+CSREQ:6,1:7)_";1501////"_ESDT_";1502////"_+DUZ
"RTN","TIURS",105,0)
 . I '+$G(CSREQ),+CSNEED,$S(DUZ=COSIGNER:1,+$G(SVCHIEF):1,1:0) D
"RTN","TIURS",106,0)
 . . S DR=DR_";1506////0;1507////"_ESDT_";1508////"_+DUZ_";1509///"_$P(ES,U,2)_";1510///"_$P(ES,U,3)_";1511////E"
"RTN","TIURS",107,0)
 I TIUSTAT=6 S DR=".05////7;1506////0;1507////"_ESDT_";1508////"_+DUZ
"RTN","TIURS",108,0)
 Q:'$D(DR)
"RTN","TIURS",109,0)
 S DIE=8925 D ^DIE W:'$D(XWBOS) "."
"RTN","TIURS",110,0)
 I TIUSTAT=5 S DR="1503///"_$P(ES,U,2)_";1504///"_$P(ES,U,3)_";1505////E"
"RTN","TIURS",111,0)
 I TIUSTAT=6 D
"RTN","TIURS",112,0)
 . N TIUSBY S DR="",TIUSBY=$P($G(^TIU(8925,+DA,15)),U,2)
"RTN","TIURS",113,0)
 . I +TIUSBY>0 S DR="1503///"_$$SIGNAME^TIULS(TIUSBY)_";1504///"_$$SIGTITL^TIULS(TIUSBY)_";"
"RTN","TIURS",114,0)
 . S DR=$G(DR)_"1509///"_$P(ES,U,2)_";1510///"_$P(ES,U,3)_";1511////E"
"RTN","TIURS",115,0)
 S DIE=8925 D ^DIE W:'$D(XWBOS) "." S:'+$G(TIUCHNG) TIUCHNG=1
"RTN","TIURS",116,0)
 D SEND^TIUALRT(DA),SIGNIRT^TIUDIRT(+DA)
"RTN","TIURS",117,0)
 I +$$ISADDNDM^TIULC1(DA) S DA=+$P(^(0),U,6)
"RTN","TIURS",118,0)
 I +$G(CSREQ)'>0 D MAIN^TIUPD(DA,"S") I 1
"RTN","TIURS",119,0)
 I +$P(^TIU(8925,+DA,0),U,11) D CREDIT^TIUVSIT(DA)
"RTN","TIURS",120,0)
 ; If the document is a Consult Result, post the new status
"RTN","TIURS",121,0)
 I +$P($G(^TIU(8925,DA,14)),U,5),'+$G(CSREQ) D POST^TIUCNSLT(DA,"COMPLETED")
"RTN","TIURS",122,0)
 Q
"RTN","TIURS1")
0^170^B6070592
"RTN","TIURS1",1,0)
TIURS1 ; SLC/JER - Additional /es/ actions
"RTN","TIURS1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURS1",3,0)
ADDSIG(TIUDA,DA) ; Apply extra signatures to a document
"RTN","TIURS1",4,0)
 N DIE,DR
"RTN","TIURS1",5,0)
 S DIE=8925.7
"RTN","TIURS1",6,0)
 S DR=".04////"_$$NOW^TIULC_";.05////"_DUZ_";.06///"_$$SIGNAME^TIULS(DUZ)_";.07///"_$$SIGTITL^TIULS(DUZ)_";.08////E"
"RTN","TIURS1",7,0)
 D ^DIE
"RTN","TIURS1",8,0)
 D SEND^TIUALRT(TIUDA)
"RTN","TIURS1",9,0)
 Q
"RTN","TIURS1",10,0)
CNVPOST ; Change Titles/Convert Postings
"RTN","TIURS1",11,0)
 N TIUCHNG,TIUDA,DFN,TIU,TIUDATA,TIUEDIT,TIUI,TIUY,TIULST,Y,DIROUT
"RTN","TIURS1",12,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURS1",13,0)
 S TIUI=0
"RTN","TIURS1",14,0)
 I +$O(VALMY(0)) D FULL^VALM1
"RTN","TIURS1",15,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURS1",16,0)
 . N TIU,VALMY,XQORM
"RTN","TIURS1",17,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURS1",18,0)
 . S TIUDA=+$P(TIUDATA,U,2)
"RTN","TIURS1",19,0)
 . D EN^VALM("TIU CHANGE TITLE")
"RTN","TIURS1",20,0)
 . I +$G(TIUCHNG) D  I 1
"RTN","TIURS1",21,0)
 . . I $D(VALMDDV("ADMISSION DATE")) D UPDATEM^TIURL(TIUDATA) Q
"RTN","TIURS1",22,0)
 . . I '$D(^TMP("TIUR",$J,"CTXT")) D UPDATE^TIURL(TIUDATA) Q
"RTN","TIURS1",23,0)
 . . I $D(^TMP("TIUR",$J,"CTXT")) D RBLD^TIUROR
"RTN","TIURS1",24,0)
 . I  S TIULST=$G(TIULST)_$S($G(TIULST)]"":", ",1:"")_TIUI
"RTN","TIURS1",25,0)
 . I '+$G(TIUCHNG)!$D(^TMP("TIUR",$J,"CTXT")) D RESTORE^TIULM(+TIUI)
"RTN","TIURS1",26,0)
 . K VALMY(TIUI)
"RTN","TIURS1",27,0)
 I $G(TIULST)]"" S VALMSG="** TITLE CHANGED for Item"_$S($L(TIULST,",")>1:"s ",$L(TIULST,"-")>1:"s ",1:" ")_TIULST_" **"
"RTN","TIURS1",28,0)
 E  S VALMSG="** No changes made... **"
"RTN","TIURS1",29,0)
 W !,"Refreshing the list."
"RTN","TIURS1",30,0)
CONVPX ; Revise list and cycle back as appropriate
"RTN","TIURS1",31,0)
 K VALMY S VALMBCK="R"
"RTN","TIURS1",32,0)
 Q
"RTN","TIURS1",33,0)
CNVPOST1 ; Convert Single Posting to another title
"RTN","TIURS1",34,0)
 N TIUD0,DIE,DR,TIUTITL S TIUD0=$G(^TIU(8925,TIUDA,0)),TIUCHNG=0
"RTN","TIURS1",35,0)
 D FULL^VALM1
"RTN","TIURS1",36,0)
 I +TIUD0=81 D  Q
"RTN","TIURS1",37,0)
 . W !!,$C(7),"You may not change the TITLE of an ADDENDUM.",!
"RTN","TIURS1",38,0)
 . I $$READ^TIUU("EA","Press RETURN to continue...") ; pause
"RTN","TIURS1",39,0)
 S TIUCHTTL=$$CANDO^TIULP(TIUDA,"CHANGE TITLE")
"RTN","TIURS1",40,0)
 I +TIUCHTTL'>0 D  Q
"RTN","TIURS1",41,0)
 . W !!,$C(7),$P(TIUCHTTL,U,2),! ; Echo denial
"RTN","TIURS1",42,0)
 . I $$READ^TIUU("EA","RETURN to continue...") ; pause
"RTN","TIURS1",43,0)
 S TIUTITL=$$ASKTITLE^TIULA3(+$$CLINDOC^TIULC1(+TIUD0,TIUDA),+TIUD0)
"RTN","TIURS1",44,0)
 S DIE=8925,DA=TIUDA
"RTN","TIURS1",45,0)
 S DR=".01////^S X="_TIUTITL_";.04////^S X="_$$DOCCLASS^TIULC1(TIUTITL)
"RTN","TIURS1",46,0)
 D ^DIE
"RTN","TIURS1",47,0)
 I +$G(^TIU(8925,+TIUDA,0))'=+TIUD0 S TIUCHNG=1
"RTN","TIURS1",48,0)
 Q
"RTN","TIURT")
0^171^B24143274
"RTN","TIURT",1,0)
TIURT ; SLC/JER - Additional Electronic signature actions ;4/10/95  13:13
"RTN","TIURT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURT",3,0)
SIGNCHRT ; Mark signed on chart
"RTN","TIURT",4,0)
 N TIUDA,DFN,TIU,TIUDATA,TIUCHNG,TIUI,TIUY,Y,DIROUT
"RTN","TIURT",5,0)
 I '$D(VALMY) D EN^VALM2(XQORNOD(0))
"RTN","TIURT",6,0)
 S TIUI=0
"RTN","TIURT",7,0)
 ; I +$O(VALMY(0)) D CLEAR^VALM1
"RTN","TIURT",8,0)
 F  S TIUI=$O(VALMY(TIUI)) Q:+TIUI'>0  D  Q:$D(DIROUT)
"RTN","TIURT",9,0)
 . N TIU
"RTN","TIURT",10,0)
 . S TIUDATA=$G(^TMP("TIURIDX",$J,TIUI))
"RTN","TIURT",11,0)
 . S TIUDA=+$P(TIUDATA,U,2)
"RTN","TIURT",12,0)
 . D EN^VALM("TIU SIGN ON CHART")
"RTN","TIURT",13,0)
 . I +$G(TIUDATA) D
"RTN","TIURT",14,0)
 . . I $D(VALMDDF("ADMISSION DATE")) D UPDATEM^TIURL(TIUDATA) I 1
"RTN","TIURT",15,0)
 . . E  I $D(VALMDDF("REF DATE")) D UPDATE^TIURL(TIUDATA)
"RTN","TIURT",16,0)
 . I '+$G(TIUCHNG) D RESTORE^TIULM(+TIUI)
"RTN","TIURT",17,0)
 W !,"Refreshing the list."
"RTN","TIURT",18,0)
SIGCHRTX ; Revise list and cycle back as appropriate
"RTN","TIURT",19,0)
 K VALMY S VALMBCK="R"
"RTN","TIURT",20,0)
 Q
"RTN","TIURT",21,0)
SIGCHRT1(TIUDA) ; Single record sign on chart
"RTN","TIURT",22,0)
 N TIUSIG D FULL^VALM1
"RTN","TIURT",23,0)
 S TIUSIG=$$OC(TIUDA)
"RTN","TIURT",24,0)
 I +TIUSIG W !?2,"MARKED SIGNED ON CHART." H 3
"RTN","TIURT",25,0)
 E  W !?2,"NOT MARKED SIGNED ON CHART." H 3
"RTN","TIURT",26,0)
 Q
"RTN","TIURT",27,0)
OC(DA) ; Mark signed on chart. Edits for sig/cosig by if mode = chart.
"RTN","TIURT",28,0)
 N SIGNER,DIE,DR,TIUSTAT,TIUY,COSIGNER,TIUDA,COSMODE,SIGMODE,Y
"RTN","TIURT",29,0)
 N SIGNAME,COSNAME,SIGTITL,COSTITL,TIU12,TIU15,TIUMSG
"RTN","TIURT",30,0)
 S TIUY=$$READ^TIUU("YO","Mark this Document signed on chart'","NO","^D OCSIG^TIUDIRH")
"RTN","TIURT",31,0)
 I 'TIUY S TIUCHNG=0 G OCX
"RTN","TIURT",32,0)
 S TIUCHNG=1
"RTN","TIURT",33,0)
 S TIU12=$G(^TIU(8925,+DA,12))
"RTN","TIURT",34,0)
 S TIU15=$G(^TIU(8925,+DA,15))
"RTN","TIURT",35,0)
 S SIGNER=$P($G(^VA(200,+$P(TIU12,U,4),0)),U)
"RTN","TIURT",36,0)
 S COSIGNER=$P($G(^VA(200,+$P(TIU12,U,8),0)),U)
"RTN","TIURT",37,0)
 S SIGMODE=$P(TIU15,U,5),COSMODE=$P(TIU15,U,11)
"RTN","TIURT",38,0)
 S TIUSTAT=$$STATUS^TIULC(DA)
"RTN","TIURT",39,0)
 I TIUSTAT="completed",(SIGMODE="C") D
"RTN","TIURT",40,0)
 . S DR="1501//NOW;1502//"_SIGNER_";S SIGNAME=$$SIGNAME^TIULS(X),SIGTITL=$$SIGTITL^TIULS(X);1503///^S X=SIGNAME;1504///^S X=SIGTITL;1505////C"
"RTN","TIURT",41,0)
 I $S(TIUSTAT="uncosigned"&(SIGMODE'="C"):1,TIUSTAT="completed"&(COSMODE="C"):1,1:0) D
"RTN","TIURT",42,0)
 . S DR="1507//NOW;1508//"_COSIGNER_";S COSNAME=$$SIGNAME^TIULS(X),COSTITL=$$SIGTITL^TIULS(X);1509///^S X=COSNAME;1510///^S X=COSTITL;1511////C"
"RTN","TIURT",43,0)
 I $S(TIUSTAT="unsigned":1,COSMODE="C"&(SIGMODE="C"):1,SIGMODE="C"&(TIUSTAT="uncosigned"):1,1:0) D
"RTN","TIURT",44,0)
 . N TIUWHO
"RTN","TIURT",45,0)
 . I (COSIGNER]""),(SIGNER'=COSIGNER) S TIUWHO=$P($$READ^TIUU("SO^S:signer;C:cosigner;B:both","Which signatures are on chart?","both"),U)
"RTN","TIURT",46,0)
 . E  S TIUWHO="S"
"RTN","TIURT",47,0)
 . I $S('$L(TIUWHO):1,"SCB"'[$P(TIUWHO,U):1,1:0) Q
"RTN","TIURT",48,0)
 . I TIUWHO="S" S DR="1501//NOW;1502//"_SIGNER_";S SIGNAME=$$SIGNAME^TIULS(X),SIGTITL=$$SIGTITL^TIULS(X);1503///^S X=SIGNAME;1504///^S X=SIGTITL;1505////C"
"RTN","TIURT",49,0)
 . I TIUWHO="C" D
"RTN","TIURT",50,0)
 . . S DR="1507//NOW;1508//"_COSIGNER_";S COSNAME=$$SIGNAME^TIULS(X),COSTITL=$$SIGTITL^TIULS(X);1509///^S X=COSNAME;1510///^S X=COSTITL;1511////C"
"RTN","TIURT",51,0)
 . . ; Q is in DR string to force set of COSIGNED BY fld so SIGNED BY
"RTN","TIURT",52,0)
 . . ; can be stuffed.
"RTN","TIURT",53,0)
 . . I $P(TIU15,U,2)="" S DR=DR_";Q;1501////"_$$NOW^TIULC_";1502////^S X=$P($G(^TIU(8925,D0,15)),U,8);S SIGNAME=$$SIGNAME^TIULS(X),SIGTITL=$$SIGTITL^TIULS(X);1503///^S X=SIGNAME;1504///^S X=SIGTITL;1505////C"
"RTN","TIURT",54,0)
 . I TIUWHO="B" D
"RTN","TIURT",55,0)
 . . S DR="1501//NOW;1502//"_SIGNER_";S SIGNAME=$$SIGNAME^TIULS(X),SIGTITL=$$SIGTITL^TIULS(X);1503///^S X=SIGNAME;1504///^S X=SIGTITL;1505////C"
"RTN","TIURT",56,0)
 . . S DR=DR_";1507//NOW;1508//"_COSIGNER_";S COSNAME=$$SIGNAME^TIULS(X),COSTITL=$$SIGTITL^TIULS(X);1509///^S X=COSNAME;1510///^S X=COSTITL;1511////C"
"RTN","TIURT",57,0)
 I $D(DR) S DR=DR_";1512////"_DUZ
"RTN","TIURT",58,0)
 I '$D(DR) S TIUY=0 G OCX
"RTN","TIURT",59,0)
 S DIE=8925 D ^DIE I $D(Y) S TIUMSG=1
"RTN","TIURT",60,0)
 ; Update status
"RTN","TIURT",61,0)
 D OCDELETE(DA),SEND^TIUALRT(+DA) S TIUDA=DA D UPDATE^TIUU
"RTN","TIURT",62,0)
 D SIGNIRT^TIUDIRT(+DA)
"RTN","TIURT",63,0)
OCX I $G(TIUMSG)>1 S TIUY=0 ;If two signature deleted don't want msg
"RTN","TIURT",64,0)
 E  I $S($G(DR)["1502"&($G(DR)'["1508"):1,$G(DR)["1508"&($G(DR)'["1502"):1,1:0),$G(TIUMSG)>0 S TIUY=0
"RTN","TIURT",65,0)
 S DR=".05///"_$$STATUS^TIULC(+DA),DIE=8925 D ^DIE
"RTN","TIURT",66,0)
 Q +$G(TIUY)
"RTN","TIURT",67,0)
OCDELETE(DA) ; Clean up dates/modes if corresponding signers deleted
"RTN","TIURT",68,0)
 N TIU12,TIU15,DIE,DR
"RTN","TIURT",69,0)
 S TIU12=$G(^TIU(8925,+DA,12)),TIU15=$G(^TIU(8925,+DA,15))
"RTN","TIURT",70,0)
 I $P(TIU15,U,2)="",$P(TIU15,U,8)="",($P(TIU15,U)]""!$P(TIU15,U,5)]"") S DR="1501///@;1502///@;1503///@;1504///@;1505///@",TIUMSG=$G(TIUMSG)+1
"RTN","TIURT",71,0)
 I $P(TIU15,U,2)="",$P(TIU15,U,8)'="" S DR="1501////"_$$NOW^TIULC_";Q;1502////^S X=$P($G(^TIU(8925,D0,15)),U,8);1503////^S X=$P($G(^(15)),U,9);1504////^S X=$P($G(^(15)),U,10);1505////C" S TIUMSG=$G(TIUMSG)+1
"RTN","TIURT",72,0)
 I $P(TIU15,U,8)="",$P(TIU15,U,7)]""!($P(TIU15,U,11)]"") D
"RTN","TIURT",73,0)
 . S DR=$S($D(DR):$G(DR)_";",1:"")_"1507///@;1508///@;1509///@;1510///@;1511///@" S TIUMSG=$G(TIUMSG)+1
"RTN","TIURT",74,0)
 . I $P(TIU12,U,4)]"",$P(TIU12,U,4)=$P(TIU12,U,8) S DR=DR_";1501///@;1502///@;1503///@;1504///@;1505///@" S TIUMSG=$G(TIUMSG)+1
"RTN","TIURT",75,0)
 I $D(DR) S DIE=8925 D ^DIE
"RTN","TIURT",76,0)
 Q
"RTN","TIURTITH")
0^199^B929678
"RTN","TIURTITH",1,0)
TIURTITH ; SLC/JER - Review Screen Header ;4/20/94  16:18
"RTN","TIURTITH",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURTITH",3,0)
HDR ; Initialize header for clinician's review screen
"RTN","TIURTITH",4,0)
 N BY,TIUI,TIUX,SCREEN,STATUS,RANGE,TIUBY,TIUDOCS,XREF
"RTN","TIURTITH",5,0)
 I +TIUEDT>1 S RANGE=" from "_$$DATE^TIULS(TIUEDT,"MM/DD/YY")_" to "_$$DATE^TIULS(TIULDT,"MM/DD/YY")
"RTN","TIURTITH",6,0)
 S VALMHDR(1)=$$CENTER^TIULS($G(RANGE))
"RTN","TIURTITH",7,0)
 S TIUDOCS=$J(+$G(^TMP("TIUR",$J,0)),4)_" documents"
"RTN","TIURTITH",8,0)
 S VALMHDR(1)=$$SETSTR^VALM1(TIUDOCS,VALMHDR(1),(IOM-$L(TIUDOCS)),$L(TIUDOCS))
"RTN","TIURTITH",9,0)
 Q
"RTN","TIURTITL")
0^172^B58208562
"RTN","TIURTITL",1,0)
TIURTITL ; SLC/JER - Review Documents by TITLE ;10/11/94  11:09
"RTN","TIURTITL",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIURTITL",3,0)
MAKELIST(TIUCLASS) ; Get Search Criteria
"RTN","TIURTITL",4,0)
 N TIUI,SCREEN,STATUS,TIUTYP,TIUSTAT,TIUEDFLT,TIUDCL,TIUQUIT
"RTN","TIURTITL",5,0)
STATUS S STATUS=$$SELSTAT^TIULA(.TIUSTAT,"F","ALL")
"RTN","TIURTITL",6,0)
 I +STATUS<0 S VALMQUIT=1 Q
"RTN","TIURTITL",7,0)
DOCTYPE ; Select Document Type(s)
"RTN","TIURTITL",8,0)
 N TIUDCL
"RTN","TIURTITL",9,0)
 D TITLPICK^TIULA3(.TIUTYP,TIUCLASS)
"RTN","TIURTITL",10,0)
 I +$D(TIUQUIT) S VALMQUIT=1 Q
"RTN","TIURTITL",11,0)
 I +$G(TIUTYP)'>0,'$D(TIUQUIK) G STATUS
"RTN","TIURTITL",12,0)
SCREEN ;
"RTN","TIURTITL",13,0)
 N TIUNAME
"RTN","TIURTITL",14,0)
 S TIUNAME=$P($G(^VA(200,+DUZ,0)),U)
"RTN","TIURTITL",15,0)
 S SCREEN=1,SCREEN(1)="ALL^ANY"
"RTN","TIURTITL",16,0)
 D CHECKADD(.TIUTYP)
"RTN","TIURTITL",17,0)
ERLY S TIUEDFLT=$S(TIUCLASS=3:"T-2",TIUCLASS=244:"T-30",1:"T-7")
"RTN","TIURTITL",18,0)
 S TIUEDT=$S($D(TIUQUIK):1,1:$P($$EDATE^TIULA("Reference","",TIUEDFLT),U))
"RTN","TIURTITL",19,0)
 I +$G(DIROUT) S VALMQUIT=1 Q
"RTN","TIURTITL",20,0)
 I TIUEDT'>0 G SCREEN
"RTN","TIURTITL",21,0)
 S TIULDT=$S($D(TIUQUIK):9999999,1:$P($$LDATE^TIULA("Reference"),U))
"RTN","TIURTITL",22,0)
 I +$G(DIROUT) S VALMQUIT=1 Q
"RTN","TIURTITL",23,0)
 I TIULDT'>0 G ERLY
"RTN","TIURTITL",24,0)
 I TIUEDT>TIULDT D SWAP^TIUR(.TIUEDT,.TIULDT)
"RTN","TIURTITL",25,0)
 I $L(TIULDT,".")=1 D EXPRANGE^TIUR(.TIUEDT,.TIULDT)
"RTN","TIURTITL",26,0)
 W !,"Searching for the documents."
"RTN","TIURTITL",27,0)
 D BUILD(.TIUSTAT,.TIUTYP,.SCREEN,TIUEDT,TIULDT)
"RTN","TIURTITL",28,0)
 Q
"RTN","TIURTITL",29,0)
CHECKADD(TYPES) ; Checks whether Addendum is included in the list of types
"RTN","TIURTITL",30,0)
 N TIUI,HIT S (TIUI,HIT)=0
"RTN","TIURTITL",31,0)
 F  S TIUI=$O(TYPES(TIUI)) Q:+TIUI'>0!+HIT  I $$UP^XLFSTR(TYPES(TIUI))["ADDENDUM" S HIT=1
"RTN","TIURTITL",32,0)
 I +HIT'>0 S TYPES(TYPES+1)=+TYPES(TYPES)+1_U_"81^Addendum^NOT PICKED",TYPES=TYPES+1
"RTN","TIURTITL",33,0)
 Q
"RTN","TIURTITL",34,0)
BUILD(STATUS,TYPES,SCREEN,EARLY,LATE) ; Build List
"RTN","TIURTITL",35,0)
 N TIUCNT,TIUDT,TIUI,TIUJ,TIUK,TIUP,TIUQ,TIUIFN,TIUREC
"RTN","TIURTITL",36,0)
 N TIUT,TIUTP,XREF,TIUS,TIUPREF
"RTN","TIURTITL",37,0)
 S TIUPREF=$$PERSPRF^TIULE(DUZ),(TIUK,VALMCNT)=0
"RTN","TIURTITL",38,0)
 K ^TMP("TIUR",$J),^TMP("TIURIDX",$J),^TMP("TIUI",$J)
"RTN","TIURTITL",39,0)
 I '$D(TIUPRM0)!'$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIURTITL",40,0)
 S EARLY=9999999-+$G(EARLY),LATE=9999999-$S(+$G(LATE):+$G(LATE),1:3333333)
"RTN","TIURTITL",41,0)
 F  S TIUK=$O(SCREEN(TIUK)) Q:TIUK'>0  D
"RTN","TIURTITL",42,0)
 . S XREF=$P(SCREEN(TIUK),U)
"RTN","TIURTITL",43,0)
 . I XREF'="ASUB" D
"RTN","TIURTITL",44,0)
 . . S TIUI=$S(XREF'="APRB":$P(SCREEN(TIUK),U,2),1:$$UPPER^TIULS($P(SCREEN(TIUK),U,3)))
"RTN","TIURTITL",45,0)
 . . D GATHER(TIUI,TIUPREF,TIUCLASS)
"RTN","TIURTITL",46,0)
 . I XREF="ASUB" D
"RTN","TIURTITL",47,0)
 . . S TIUI=$O(^TIU(8925,XREF,$P(SCREEN(TIUK),U,2)),-1)
"RTN","TIURTITL",48,0)
 . . F  S TIUI=$O(^TIU(8925,XREF,TIUI)) Q:TIUI=""!(TIUI'[$P(SCREEN(TIUK),U,2))  D GATHER(TIUI,TIUPREF,TIUCLASS)
"RTN","TIURTITL",49,0)
 D PUTLIST(TIUPREF)
"RTN","TIURTITL",50,0)
 Q
"RTN","TIURTITL",51,0)
GATHER(TIUI,TIUPREF,CLASS) ; Find/sort records for the list
"RTN","TIURTITL",52,0)
 N TIUT,TIUTP,TIUS,TIUSTAT,TIUSFLD,TIUD0,TIUD12,TIUD13,TIUD15
"RTN","TIURTITL",53,0)
 N TIUSVAL
"RTN","TIURTITL",54,0)
 S TIUSFLD=$P(TIUPREF,U,3)
"RTN","TIURTITL",55,0)
 S TIUSFLD=$S(TIUSFLD="P":".02",TIUSFLD="D":".01",TIUSFLD="S":".05",TIUSFLD="C":"1507",TIUSFLD="A":"1202",TIUSFLD="E":"1208",1:"1301")
"RTN","TIURTITL",56,0)
 S TIUT=0 F  S TIUT=$O(TYPES(TIUT)) Q:+TIUT'>0  D
"RTN","TIURTITL",57,0)
 . S TIUTP=+$P($G(TYPES(TIUT)),U,2) Q:TIUTP'>0
"RTN","TIURTITL",58,0)
 . S TIUS=0 F  S TIUS=$O(STATUS(TIUS)) Q:+TIUS'>0  D
"RTN","TIURTITL",59,0)
 . . S TIUSTAT=$O(^TIU(8925.6,"B",$$UPPER^TIULS($P(STATUS(TIUS),U,3)),0))
"RTN","TIURTITL",60,0)
 . . Q:+TIUSTAT'>0
"RTN","TIURTITL",61,0)
 . . S TIUJ=LATE F  S TIUJ=$O(^TIU(8925,XREF,TIUI,TIUTP,TIUSTAT,TIUJ)) Q:+TIUJ'>0!(+TIUJ>EARLY)  D
"RTN","TIURTITL",62,0)
 . . . S TIUIFN=0
"RTN","TIURTITL",63,0)
 . . . F  S TIUIFN=$O(^TIU(8925,XREF,TIUI,TIUTP,TIUSTAT,TIUJ,TIUIFN)) Q:+TIUIFN'>0  D
"RTN","TIURTITL",64,0)
 . . . . ;Consider adding view check here
"RTN","TIURTITL",65,0)
 . . . . I TIUTP=81,(+TYPES>1),($P(TYPES(TIUT),U,4)="NOT PICKED"),'+$$DADINTYP(TIUIFN,.TYPES) Q
"RTN","TIURTITL",66,0)
 . . . . S TIUQ=$$RESOLVE(TIUIFN,TIUSFLD)
"RTN","TIURTITL",67,0)
 . . . . S ^TMP("TIUI",$J,TIUQ,TIUJ,TIUIFN)=""
"RTN","TIURTITL",68,0)
 Q
"RTN","TIURTITL",69,0)
DADINTYP(TIUDA,TYPES) ; Evaluates whether addendum's parent belongs is among
"RTN","TIURTITL",70,0)
 ;                 the selected types
"RTN","TIURTITL",71,0)
 N TIUI,TIUDTYP,TIUY S (TIUI,TIUY)=0
"RTN","TIURTITL",72,0)
 S TIUDTYP=+$G(^TIU(8925,+$P($G(^TIU(8925,+TIUDA,0)),U,6),0))
"RTN","TIURTITL",73,0)
 F  S TIUI=$O(TYPES(TIUI)) Q:+TIUI'>0!+TIUY  D
"RTN","TIURTITL",74,0)
 . I +$P(TYPES(TIUI),U,2)=TIUDTYP S TIUY=1
"RTN","TIURTITL",75,0)
 Q TIUY
"RTN","TIURTITL",76,0)
RESOLVE(DA,DR) ; resolve sort field values
"RTN","TIURTITL",77,0)
 N TIUD0,TIUD12,TIUD13,TIUD15,TIUY
"RTN","TIURTITL",78,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD12=$G(^TIU(8925,+DA,12))
"RTN","TIURTITL",79,0)
 S TIUD13=$G(^TIU(8925,+DA,13)),TIUD15=$G(^TIU(8925,+DA,15))
"RTN","TIURTITL",80,0)
 I DR=.01 S TIUY=$$PNAME^TIULC1(+TIUD0) G RESX
"RTN","TIURTITL",81,0)
 I DR=.02 S TIUY=$$PTNAME^TIULC1(+$P(TIUD0,U,2)) G RESX
"RTN","TIURTITL",82,0)
 I DR=.05 S TIUY=$P(TIUD0,U,5) G RESX
"RTN","TIURTITL",83,0)
 I DR=1202 S TIUY=$$PERSNAME^TIULC1(+$P(TIUD12,U,2)) S:TIUY="UNKNOWN" TIUY="" G RESX
"RTN","TIURTITL",84,0)
 I DR=1208 S TIUY=$$PERSNAME^TIULC1(+$P(TIUD12,U,8)) S:TIUY="UNKNOWN" TIUY="" G RESX
"RTN","TIURTITL",85,0)
 I DR=1301 S TIUY=$P(TIUD13,U) G RESX
"RTN","TIURTITL",86,0)
 I DR=1507,($P(TIUD0,U,5)=7),(+$P(TIUD15,U,7)'>0) S DR=1501
"RTN","TIURTITL",87,0)
 I DR=1501 S TIUY=$P(TIUD15,U) G RESX
"RTN","TIURTITL",88,0)
 I DR=1507 S TIUY=$P(TIUD15,U,7)
"RTN","TIURTITL",89,0)
RESX I $G(TIUY)']"" S TIUY="ZZZZEMPTY"
"RTN","TIURTITL",90,0)
 Q TIUY
"RTN","TIURTITL",91,0)
PUTLIST(TIUPREF) ; Expands list elements for LM Template
"RTN","TIURTITL",92,0)
 N TIUJ,TIUQ,TIUDA,TIUPICK,TIUORDER
"RTN","TIURTITL",93,0)
 S TIUORDER=$S($P(TIUPREF,U,4)="D":-1,1:1)
"RTN","TIURTITL",94,0)
 S TIUPICK=+$O(^ORD(101,"B","TIU ACTION SELECT LIST ELEMENT",0))
"RTN","TIURTITL",95,0)
 S TIUQ="" F  S TIUQ=$O(^TMP("TIUI",$J,TIUQ),TIUORDER) Q:TIUQ']""  D
"RTN","TIURTITL",96,0)
 . S TIUJ=0 F  S TIUJ=$O(^TMP("TIUI",$J,TIUQ,TIUJ)) Q:+TIUJ'>0  D
"RTN","TIURTITL",97,0)
 . . S TIUDA=0 F  S TIUDA=$O(^TMP("TIUI",$J,TIUQ,TIUJ,TIUDA)) Q:+TIUDA'>0  D ADDELMNT(TIUDA,.TIUCNT)
"RTN","TIURTITL",98,0)
 S TIUS=1,STATUS=$$UPPER^TIULS($P(STATUS(1),U,3))
"RTN","TIURTITL",99,0)
 I +$G(STATUS(4))'>0 F  S TIUS=$O(STATUS(TIUS)) Q:+TIUS'>0  D
"RTN","TIURTITL",100,0)
 . S STATUS=STATUS_$S(TIUS=+STATUS(1):" & ",1:", ")_$$UPPER^TIULS($P(STATUS(TIUS),U,3))
"RTN","TIURTITL",101,0)
 I +$G(STATUS(4))>0 S STATUS=$S($P(STATUS(4),U,4)="ALL":"ALL",1:STATUS_" & OTHER")
"RTN","TIURTITL",102,0)
 S ^TMP("TIUR",$J,0)=+$G(TIUCNT)_U_STATUS
"RTN","TIURTITL",103,0)
 S TIUJ=0,SCREEN="" F  S TIUJ=$O(SCREEN(TIUJ)) Q:+TIUJ'>0  D
"RTN","TIURTITL",104,0)
 . S SCREEN=$G(SCREEN)_$S(TIUJ>1:";",1:U)_SCREEN(TIUJ)
"RTN","TIURTITL",105,0)
 S ^TMP("TIUR",$J,0)=^TMP("TIUR",$J,0)_$G(SCREEN)
"RTN","TIURTITL",106,0)
 S ^TMP("TIUR",$J,"CLASS")=TIUCLASS
"RTN","TIURTITL",107,0)
 S ^TMP("TIUR",$J,"#")=TIUPICK_"^1:"_+$G(TIUCNT)
"RTN","TIURTITL",108,0)
 I $D(VALMHDR)>9 D HDR^TIURTITH
"RTN","TIURTITL",109,0)
 I +$G(TIUCNT)'>0 D
"RTN","TIURTITL",110,0)
 . S ^TMP("TIUR",$J,1,0)="",VALMCNT=2
"RTN","TIURTITL",111,0)
 . S ^TMP("TIUR",$J,2,0)="     No records found to satisfy search criteria."
"RTN","TIURTITL",112,0)
 Q
"RTN","TIURTITL",113,0)
ADDELMNT(DA,TIUCNT,APPEND) ; Add each element to the list
"RTN","TIURTITL",114,0)
 N DIC,DIQ,DR,TIUR,PT,MOM,ADT,DDT,LCT,AUT,AMD,EDT,SDT,XDT,RMD,TIULST4
"RTN","TIURTITL",115,0)
 N TIUP,TIUREC,TIUD0,TIUD12,TIUD13,TIUD15,TIULI,STATX
"RTN","TIURTITL",116,0)
 I '$D(^TIU(8925,DA,0)) Q
"RTN","TIURTITL",117,0)
 I $G(^TMP("TIUR",$J,2,0))="     No records found to satisfy search criteria." D
"RTN","TIURTITL",118,0)
 . S ^TMP("TIUR",$J,2,0)="",VALMCNT=2,TIUCNT=0
"RTN","TIURTITL",119,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUD12=$G(^TIU(8925,+DA,12))
"RTN","TIURTITL",120,0)
 S TIUD13=$G(^TIU(8925,+DA,13)),TIUD15=$G(^TIU(8925,+DA,15))
"RTN","TIURTITL",121,0)
 S DOC=$$PNAME^TIULC1(+TIUD0)
"RTN","TIURTITL",122,0)
 I DOC="Addendum" S DOC=DOC_" to "_$$PNAME^TIULC1(+$G(^TIU(8925,+$P(TIUD0,U,6),0)))
"RTN","TIURTITL",123,0)
 S PT=$$NAME^TIULS($$PTNAME^TIULC1($P(TIUD0,U,2)),"LAST,FI MI")
"RTN","TIURTITL",124,0)
 S TIULI=$E(PT)
"RTN","TIURTITL",125,0)
 I +$O(^TIU(8925,"DAD",+DA,0)),$$HASADDEN^TIULC1(DA) S PT="+ "_PT
"RTN","TIURTITL",126,0)
 S TIUP=$$URGENCY(+DA)
"RTN","TIURTITL",127,0)
 S:TIUP=1 PT=$S(PT["+":"*",1:"* ")_PT
"RTN","TIURTITL",128,0)
 S TIULST4=$E($P($G(^DPT(+$P(TIUD0,U,2),0)),U,9),6,9)
"RTN","TIURTITL",129,0)
 S TIULST4="("_TIULI_TIULST4_")"
"RTN","TIURTITL",130,0)
 S ADT=$$DATE^TIULS($P(TIUD0,U,7),"MM/DD/YY")
"RTN","TIURTITL",131,0)
 S DDT=$$DATE^TIULS($P(TIUD0,U,8),"MM/DD/YY")
"RTN","TIURTITL",132,0)
 S AMD=$$PERSNAME^TIULC1($P(TIUD12,U,8)) S:AMD="UNKNOWN" AMD=""
"RTN","TIURTITL",133,0)
 S AUT=$$PERSNAME^TIULC1($P(TIUD12,U,2)) S:AUT="UNKNOWN" AUT=""
"RTN","TIURTITL",134,0)
 S AMD=$$NAME^TIULS(AMD,"LAST, FI MI")
"RTN","TIURTITL",135,0)
 S AUT=$$NAME^TIULS(AUT,"LAST, FI MI")
"RTN","TIURTITL",136,0)
 S EDT=$$DATE^TIULS($P(TIUD13,U),"MM/DD/YY")
"RTN","TIURTITL",137,0)
 S SDT=$S(+$P(TIUD15,U,7):+$P(TIUD15,U,7),+$P(TIUD0,U,5)'<7:+$P(TIUD15,U),1:"")
"RTN","TIURTITL",138,0)
 S SDT=$$DATE^TIULS(SDT,"MM/DD/YY")
"RTN","TIURTITL",139,0)
 S STATX=$P($G(^TIU(8925.6,+$P(TIUD0,U,5),0)),U)
"RTN","TIURTITL",140,0)
 S TIUCNT=+$G(TIUCNT)+1
"RTN","TIURTITL",141,0)
 S TIUREC=$$SETFLD^VALM1(TIUCNT,"","NUMBER")
"RTN","TIURTITL",142,0)
 S TIUREC=$$SETFLD^VALM1(PT,TIUREC,"PATIENT NAME")
"RTN","TIURTITL",143,0)
 S TIUREC=$$SETFLD^VALM1(TIULST4,TIUREC,"LAST I/LAST 4")
"RTN","TIURTITL",144,0)
 S TIUREC=$$SETFLD^VALM1(DOC,TIUREC,"DOCUMENT TYPE")
"RTN","TIURTITL",145,0)
 S TIUREC=$$SETFLD^VALM1(EDT,TIUREC,"REF DATE")
"RTN","TIURTITL",146,0)
 S TIUREC=$$SETFLD^VALM1($$LOWER^TIULS(STATX),TIUREC,"STATUS")
"RTN","TIURTITL",147,0)
 S TIUREC=$$SETFLD^VALM1(SDT,TIUREC,"SIG DATE")
"RTN","TIURTITL",148,0)
 S TIUREC=$$SETFLD^VALM1(AUT,TIUREC,"AUTHOR")
"RTN","TIURTITL",149,0)
 S TIUREC=$$SETFLD^VALM1(AMD,TIUREC,"COSIGNER")
"RTN","TIURTITL",150,0)
 S VALMCNT=+$G(VALMCNT)+1,^TMP("TIUR",$J,TIUCNT,0)=TIUREC
"RTN","TIURTITL",151,0)
 S ^TMP("TIUR",$J,"IDX",VALMCNT,TIUCNT)="" W "."
"RTN","TIURTITL",152,0)
 S ^TMP("TIURIDX",$J,TIUCNT)=VALMCNT_U_DA
"RTN","TIURTITL",153,0)
 D FLDCTRL^VALM10(TIUCNT,"NUMBER",IOINHI,IOINORM)
"RTN","TIURTITL",154,0)
 I +$G(APPEND) D
"RTN","TIURTITL",155,0)
 . D RESTORE^VALM10(TIUCNT)
"RTN","TIURTITL",156,0)
 . D CNTRL^VALM10(TIUCNT,1,$G(VALM("RM")),IOINHI,IOINORM),HDR^TIURTITH
"RTN","TIURTITL",157,0)
 . S VALMSG="** Item #"_TIUCNT_" Added **"
"RTN","TIURTITL",158,0)
 . S $P(^TMP("TIUR",$J,0),U)=+$G(TIUCNT)
"RTN","TIURTITL",159,0)
 . S $P(^TMP("TIUR",$J,"#"),":",2)=+$G(TIUCNT)
"RTN","TIURTITL",160,0)
 . I $D(VALMHDR)>9 D HDR^TIURTITH
"RTN","TIURTITL",161,0)
 Q
"RTN","TIURTITL",162,0)
CLEAN ; Clean up your mess!
"RTN","TIURTITL",163,0)
 K ^TMP("TIUR",$J),^TMP("TIURIDX",$J) D CLEAN^VALM10
"RTN","TIURTITL",164,0)
 K VALMY
"RTN","TIURTITL",165,0)
 Q
"RTN","TIURTITL",166,0)
URGENCY(TIUDA) ; What is the urgency of the current document
"RTN","TIURTITL",167,0)
 N TIUY,TIUD0,TIUDSTAT,TIUDURG
"RTN","TIURTITL",168,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUDSTAT=$P(TIUD0,U,5)
"RTN","TIURTITL",169,0)
 S TIUDURG=$P(TIUD0,U,9)
"RTN","TIURTITL",170,0)
 S TIUY=$S(TIUDSTAT<7:$S(TIUDURG="P":1,1:2),1:3)
"RTN","TIURTITL",171,0)
 Q TIUY
"RTN","TIURTITL",172,0)
DFLTSTAT(USER) ; Set default STATUS for current user
"RTN","TIURTITL",173,0)
 N TIUMIS,TIUMD,TIUY,TIUDPRM D DOCPRM^TIULC1(244,.TIUDPRM)
"RTN","TIURTITL",174,0)
 S TIUMIS=$$ISA^USRLM(DUZ,"MEDICAL INFORMATION SECTION")
"RTN","TIURTITL",175,0)
 I +TIUMIS,+$P($G(TIUDPRM(0)),U,3) S TIUY="UNVERIFIED" G DFLTX
"RTN","TIURTITL",176,0)
 I $$ISA^USRLM(DUZ,"PROVIDER") S TIUY="UNSIGNED" G DFLTX
"RTN","TIURTITL",177,0)
 S TIUY="COMPLETED"
"RTN","TIURTITL",178,0)
DFLTX Q TIUY
"RTN","TIUSRV")
0^173^B63596263
"RTN","TIUSRV",1,0)
TIUSRV ; SLC/JER - Silent server functions
"RTN","TIUSRV",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRV",3,0)
RPC(TIUY,TIUDA) ; RPC for DT
"RTN","TIUSRV",4,0)
 N CANSEE K ^TMP("TIUAUDIT",$J)
"RTN","TIUSRV",5,0)
 S CANSEE=$$CANDO^TIULP(TIUDA,"VIEW")
"RTN","TIUSRV",6,0)
 S TIUY="^TMP(""TIUAUDIT"",$J)"
"RTN","TIUSRV",7,0)
 I +CANSEE'>0 S ^TMP("TIUAUDIT",$J,0)="~"_$P(CANSEE,U,2) Q
"RTN","TIUSRV",8,0)
 D GET(TIUDA,1)
"RTN","TIUSRV",9,0)
 Q
"RTN","TIUSRV",10,0)
GET(TIUDA,HUSH) ; Build List
"RTN","TIUSRV",11,0)
 N TIUI,TIUJ,TIUL,TIUREC,X S (TIUDADD,TIUI)=0,HUSH=+$G(HUSH)
"RTN","TIUSRV",12,0)
 N DA,DIC,DIQ,DR,TIUNAME K ^TMP("TIUAUDIT",$J)
"RTN","TIUSRV",13,0)
 I '$D(IOINORM) S X="IOINORM;IOIHI;IORVON;IORVOFF;IOUON;IOUOFF;IOBON;IOBOFF" D ENDR^%ZISS
"RTN","TIUSRV",14,0)
 S:'$D(VALMAR) VALMAR="^TMP(""TIUAUDIT"",$J)"
"RTN","TIUSRV",15,0)
 S VALMEVL=+$G(VALMEVL)
"RTN","TIUSRV",16,0)
 I '$D(^TIU(8925,+TIUDA,0)) S VALMQUIT=1 Q
"RTN","TIUSRV",17,0)
 S DIC=8925,DIQ="TIUREC(",DA=TIUDA
"RTN","TIUSRV",18,0)
 S DR=".01;.02;.05;.07:.1;1201;1202;1204;1208;1301;1302;1305;1306;1501;1502;1505;1507;1508;1511;1601:1602;1610:1612;1701"
"RTN","TIUSRV",19,0)
 D EN^DIQ1
"RTN","TIUSRV",20,0)
 S TIUI="" F  S TIUI=$O(TIUREC(8925,+TIUDA,TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRV",21,0)
 . I $G(TIUREC(8925,+TIUDA,TIUI))']"" S TIUREC(8925,+TIUDA,TIUI)="None"
"RTN","TIUSRV",22,0)
 . E  S TIUREC(8925,+TIUDA,TIUI)=$$UP^XLFSTR(TIUREC(8925,+TIUDA,TIUI))
"RTN","TIUSRV",23,0)
 I $D(TIUREC)>9 D
"RTN","TIUSRV",24,0)
 . D SOURCE(.TIUREC,HUSH),PROBLEM(TIUDA),EDIT(TIUDA)
"RTN","TIUSRV",25,0)
 . D REASSIGN^TIUSRV1(TIUDA)
"RTN","TIUSRV",26,0)
 . D SIGN(.TIUREC)
"RTN","TIUSRV",27,0)
 . I +$O(^TIU(8925.7,"B",TIUDA,0)) D XTRASIGN(TIUDA)
"RTN","TIUSRV",28,0)
 . I $D(^TIU(8925,+TIUDA,16)) D PRIVACY(.TIUREC)
"RTN","TIUSRV",29,0)
 . D BODY(TIUDA,.VALMCNT)
"RTN","TIUSRV",30,0)
 S:+$G(VALMCNT)<$G(VALM("LINES")) VALMCNT=$G(VALM("LINES"))
"RTN","TIUSRV",31,0)
 Q
"RTN","TIUSRV",32,0)
SOURCE(TIUREC,HUSH) ; Source Info
"RTN","TIUSRV",33,0)
 N OFFSET,START
"RTN","TIUSRV",34,0)
 S OFFSET=2,START=1
"RTN","TIUSRV",35,0)
 W:'+$G(HUSH) !!,"Opening "_TIUREC(8925,+TIUDA,.01)_" record for review..."
"RTN","TIUSRV",36,0)
 D SET(START,OFFSET," Source Information ",$G(IORVON),$G(IORVOFF))
"RTN","TIUSRV",37,0)
 D SET(START+1,OFFSET," Reference Date: "_$G(TIUREC(8925,TIUDA,1301)))
"RTN","TIUSRV",38,0)
 D SET(START+2,OFFSET,"     Entry Date: "_$G(TIUREC(8925,TIUDA,1201)))
"RTN","TIUSRV",39,0)
 D SET(START+3,OFFSET,"Expected Signer: "_$G(TIUREC(8925,TIUDA,1204)))
"RTN","TIUSRV",40,0)
 D SET(START+4,OFFSET,"        Urgency: "_$G(TIUREC(8925,TIUDA,.09)))
"RTN","TIUSRV",41,0)
 D SET(START+5,OFFSET,"     Line Count: "_$G(TIUREC(8925,TIUDA,.1)))
"RTN","TIUSRV",42,0)
 D SET(START+6,OFFSET,"        Subject: "_$G(TIUREC(8925,TIUDA,1701)))
"RTN","TIUSRV",43,0)
 S OFFSET=40
"RTN","TIUSRV",44,0)
 D SET(START+1,OFFSET,"            Author: "_$G(TIUREC(8925,TIUDA,1202)))
"RTN","TIUSRV",45,0)
 D SET(START+2,OFFSET,"        Entered By: "_$G(TIUREC(8925,TIUDA,1302)))
"RTN","TIUSRV",46,0)
 D SET(START+3,OFFSET," Expected Cosigner: "_$G(TIUREC(8925,TIUDA,1208)))
"RTN","TIUSRV",47,0)
 D SET(START+4,OFFSET,"   Document Status: "_$G(TIUREC(8925,TIUDA,.05)))
"RTN","TIUSRV",48,0)
 D SET(START+5,OFFSET,"    TIU Document #: "_+$G(TIUDA))
"RTN","TIUSRV",49,0)
 S VALMCNT=6
"RTN","TIUSRV",50,0)
 Q
"RTN","TIUSRV",51,0)
PROBLEM(TIUDA) ; Problems
"RTN","TIUSRV",52,0)
 N TIUI,DR,DIC,DIQ,TIUCNT,TIUPROB,START S TIUI=0,START=9
"RTN","TIUSRV",53,0)
 D BLANK(8)
"RTN","TIUSRV",54,0)
 D SET(START,2," Associated Problems ",$G(IORVON),$G(IORVOFF))
"RTN","TIUSRV",55,0)
 I '+$O(^TIU(8925.9,"B",+TIUDA,0)) D SET(START,25,"No linked problems.")
"RTN","TIUSRV",56,0)
 F  S TIUI=$O(^TIU(8925.9,"B",TIUDA,TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRV",57,0)
 . S DA=TIUI,DR=".02;.05",DIC="^TIU(8925.9,",DIQ="TIUPROB"
"RTN","TIUSRV",58,0)
 . D EN^DIQ1 Q:$D(TIUPROB)'>9
"RTN","TIUSRV",59,0)
 . S TIUCNT=+$G(TIUCNT)+1
"RTN","TIUSRV",60,0)
 . D SET(START+1,19,$$MIXED^TIULS($G(TIUPROB(8925.9,TIUI,.05))))
"RTN","TIUSRV",61,0)
 . D SET(START+1,60,$G(TIUPROB(8925.9,TIUI,.02)))
"RTN","TIUSRV",62,0)
 . S START=START+1
"RTN","TIUSRV",63,0)
 S VALMCNT=START
"RTN","TIUSRV",64,0)
 Q
"RTN","TIUSRV",65,0)
EDIT(TIUDA) ; Edits
"RTN","TIUSRV",66,0)
 N TIUI,DR,DIC,DIQ,TIUCNT,TIUED,START,OFFSET S TIUI=0,START=VALMCNT+2
"RTN","TIUSRV",67,0)
 D BLANK(VALMCNT+1)
"RTN","TIUSRV",68,0)
 D SET(START,2," Edit Information ",$G(IORVON),$G(IORVOFF))
"RTN","TIUSRV",69,0)
 I '+$O(^TIU(8925.5,"B",+TIUDA,0)) D SET(START,22,"No edits since entry.")
"RTN","TIUSRV",70,0)
 F  S TIUI=$O(^TIU(8925.5,"B",TIUDA,TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRV",71,0)
 . S DA=TIUI,DR=".02:03",DIC="^TIU(8925.5,",DIQ="TIUED"
"RTN","TIUSRV",72,0)
 . D EN^DIQ1 Q:$D(TIUED)'>9!($G(TIUED(8925.5,TIUI,.02))']"")
"RTN","TIUSRV",73,0)
 . S TIUCNT=+$G(TIUCNT)+1
"RTN","TIUSRV",74,0)
 . S OFFSET=2
"RTN","TIUSRV",75,0)
 . D SET(START+1,OFFSET,"      Edit Date: "_$G(TIUED(8925.5,TIUI,.02)))
"RTN","TIUSRV",76,0)
 . S OFFSET=44
"RTN","TIUSRV",77,0)
 . D SET(START+1,OFFSET,"     Edited By: "_$G(TIUED(8925.5,TIUI,.03)))
"RTN","TIUSRV",78,0)
 . S START=START+1
"RTN","TIUSRV",79,0)
 S VALMCNT=START
"RTN","TIUSRV",80,0)
 Q
"RTN","TIUSRV",81,0)
SIGN(TIUREC) ; Signature
"RTN","TIUSRV",82,0)
 N OFFSET,START D BLANK(VALMCNT+1)
"RTN","TIUSRV",83,0)
 S OFFSET=2,START=VALMCNT+2
"RTN","TIUSRV",84,0)
 D SET(START,OFFSET," Signature Information ",$G(IORVON),$G(IORVOFF))
"RTN","TIUSRV",85,0)
 D SET(START+1,OFFSET,"    Signed Date: "_$G(TIUREC(8925,TIUDA,1501)))
"RTN","TIUSRV",86,0)
 D SET(START+3,OFFSET,"  Cosigned Date: "_$G(TIUREC(8925,TIUDA,1507)))
"RTN","TIUSRV",87,0)
 S OFFSET=40
"RTN","TIUSRV",88,0)
 D SET(START+1,OFFSET,"         Signed By: "_$G(TIUREC(8925,TIUDA,1502)))
"RTN","TIUSRV",89,0)
 D SET(START+2,OFFSET,"    Signature Mode: "_$G(TIUREC(8925,TIUDA,1505)))
"RTN","TIUSRV",90,0)
 D SET(START+3,OFFSET,"       Cosigned By: "_$G(TIUREC(8925,TIUDA,1508)))
"RTN","TIUSRV",91,0)
 D SET(START+4,OFFSET,"  Cosignature Mode: "_$G(TIUREC(8925,TIUDA,1511)))
"RTN","TIUSRV",92,0)
 S VALMCNT=START+4
"RTN","TIUSRV",93,0)
 Q
"RTN","TIUSRV",94,0)
XTRASIGN(TIUDA) ; Additional signers
"RTN","TIUSRV",95,0)
 N OFFSET,TIUI,DA,DR,DIC,DIQ,TIUCNT,TIUXTRA,START
"RTN","TIUSRV",96,0)
 S TIUI=0,START=VALMCNT+2
"RTN","TIUSRV",97,0)
 D BLANK(VALMCNT+1)
"RTN","TIUSRV",98,0)
 D SET(START,2," Concurrence Signatures ",$G(IORVON),$G(IORVOFF))
"RTN","TIUSRV",99,0)
 F  S TIUI=$O(^TIU(8925.7,"B",TIUDA,TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRV",100,0)
 . S DA=TIUI,DR=".03:.08",DIC="^TIU(8925.7,",DIQ="TIUXTRA"
"RTN","TIUSRV",101,0)
 . D EN^DIQ1 Q:$D(TIUXTRA)'>9
"RTN","TIUSRV",102,0)
 . S TIUCNT=+$G(TIUCNT)+1,OFFSET=2
"RTN","TIUSRV",103,0)
 . D SET(START+1,OFFSET,"    Signed Date: "_$G(TIUXTRA(8925.7,DA,.04)))
"RTN","TIUSRV",104,0)
 . S OFFSET=40
"RTN","TIUSRV",105,0)
 . D SET(START+1,OFFSET,"         Signed By: "_$G(TIUXTRA(8925.7,DA,.06)))
"RTN","TIUSRV",106,0)
 . D SET(START+2,2,"Expected Signer: "_$G(TIUXTRA(8925.7,DA,.03)))
"RTN","TIUSRV",107,0)
 . D SET(START+2,OFFSET,"    Signature Mode: "_$G(TIUXTRA(8925.7,DA,.08)))
"RTN","TIUSRV",108,0)
 . S (START,VALMCNT)=START+2
"RTN","TIUSRV",109,0)
 Q
"RTN","TIUSRV",110,0)
PRIVACY(TIUREC) ; Privacy Act
"RTN","TIUSRV",111,0)
 N OFFSET,START D BLANK(VALMCNT+1)
"RTN","TIUSRV",112,0)
 S OFFSET=2,START=VALMCNT+2
"RTN","TIUSRV",113,0)
 D SET(START,OFFSET," Privacy Act Information ",$G(IORVON),$G(IORVOFF))
"RTN","TIUSRV",114,0)
 D SET(START+1,OFFSET,"   Amended Date: "_$G(TIUREC(8925,TIUDA,1601)))
"RTN","TIUSRV",115,0)
 D SET(START+2,OFFSET,"   Deleted Date: "_$G(TIUREC(8925,TIUDA,1611)))
"RTN","TIUSRV",116,0)
 D SET(START+3,OFFSET,"         Reason: "_$G(TIUREC(8925,TIUDA,1612)))
"RTN","TIUSRV",117,0)
 S OFFSET=40
"RTN","TIUSRV",118,0)
 D SET(START+1,OFFSET,"        Amended By: "_$G(TIUREC(8925,TIUDA,1602)))
"RTN","TIUSRV",119,0)
 D SET(START+2,OFFSET,"        Deleted By: "_$G(TIUREC(8925,TIUDA,1610)))
"RTN","TIUSRV",120,0)
 S VALMCNT=START+3
"RTN","TIUSRV",121,0)
 Q
"RTN","TIUSRV",122,0)
BODY(TIUDA,TIUJ) ; body of document
"RTN","TIUSRV",123,0)
 S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRV",124,0)
 D BLANK(TIUJ) S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRV",125,0)
 D SET(TIUJ,2," Document Body ",$G(IORVON),$G(IORVOFF)) S TIUJ=TIUJ+1
"RTN","TIUSRV",126,0)
 D BLANK(TIUJ) ; S TIUJ=TIUJ+1
"RTN","TIUSRV",127,0)
 D TEXT(TIUDA,.TIUJ)
"RTN","TIUSRV",128,0)
 Q
"RTN","TIUSRV",129,0)
TEXT(TIUDA,TIUJ) ; Get each component
"RTN","TIUSRV",130,0)
 N TIUKID,TIUDADT,TIUI S TIUI=0
"RTN","TIUSRV",131,0)
 F  S TIUI=$O(^TIU(8925,+TIUDA,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRV",132,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRV",133,0)
 . D SET(TIUJ,1,$G(^TIU(8925,+TIUDA,"TEXT",+TIUI,0)))
"RTN","TIUSRV",134,0)
 I +$$ISADDNDM^TIULC1(+TIUDA) D
"RTN","TIUSRV",135,0)
 . N TIULINE,TIUPARNT K ^TMP("TIU ADDENDUM",$J) S $P(TIULINE,"=",79)=""
"RTN","TIUSRV",136,0)
 . S ^TMP("TIU ADDENDUM",$J)=TIUDA,TIUJ=+$G(TIUJ)+1
"RTN","TIUSRV",137,0)
 . D BLANK(TIUJ) S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRV",138,0)
 . D SET(TIUJ,1,TIULINE) S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRV",139,0)
 . D BLANK(TIUJ) S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRV",140,0)
 . D SET(TIUJ,2," --- Original Document ---",$G(IORVON),$G(IORVOFF))
"RTN","TIUSRV",141,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRV",142,0)
 . S TIUPARNT=+$P(^TIU(8925,+TIUDA,0),U,6) D TEXT(TIUPARNT,.TIUJ)
"RTN","TIUSRV",143,0)
 S TIUKID=0
"RTN","TIUSRV",144,0)
 F  S TIUKID=$O(^TIU(8925,"DAD",+TIUDA,TIUKID)) Q:+TIUKID'>0  D
"RTN","TIUSRV",145,0)
 . N TIUTYP
"RTN","TIUSRV",146,0)
 . ; Don't show the selected addendum again
"RTN","TIUSRV",147,0)
 . I +TIUKID=+$G(^TMP("TIU ADDENDUM",$J)) Q
"RTN","TIUSRV",148,0)
 . S TIUTYP=$P($G(^TIU(8925.1,+$G(^TIU(8925,+TIUKID,0)),0)),U)
"RTN","TIUSRV",149,0)
 . I TIUTYP="ADDENDUM" D LOADADD(TIUKID,.TIUJ) I 1
"RTN","TIUSRV",150,0)
 . E  D TEXT(TIUKID,.TIUJ)
"RTN","TIUSRV",151,0)
 K ^TMP("TIU ADDENDUM",$J)
"RTN","TIUSRV",152,0)
 Q
"RTN","TIUSRV",153,0)
LOADADD(TIUDADD,TIUL) ; Addenda
"RTN","TIUSRV",154,0)
 N TIUDAUTH,TIUDATT,TIUJ,TIUSIG,TIUCSIG,CANSEE
"RTN","TIUSRV",155,0)
 S CANSEE=$$CANDO^TIULP(+TIUDADD,"VIEW")
"RTN","TIUSRV",156,0)
 S TIUJ=0,TIUI=+$G(TIUL)+1,^TMP("TIUAUDIT",$J,TIUI,0)=" "
"RTN","TIUSRV",157,0)
 S TIUDADT=$$DATE^TIULS($P($G(^TIU(8925,+TIUDADD,13)),U),"MM/DD/YY")
"RTN","TIUSRV",158,0)
 S TIUI=TIUI+1,^TMP("TIUAUDIT",$J,TIUI,0)=TIUDADT_" ADDENDUM:"
"RTN","TIUSRV",159,0)
 I +CANSEE'>0 D  Q
"RTN","TIUSRV",160,0)
 . S (TIUI,TIUL)=+$G(TIUI)+1
"RTN","TIUSRV",161,0)
 . S ^TMP("TIUAUDIT",$J,TIUI,0)=$P(CANSEE,U,2)
"RTN","TIUSRV",162,0)
 F  S TIUJ=$O(^TIU(8925,+TIUDADD,"TEXT",TIUJ)) Q:+TIUJ'>0  D
"RTN","TIUSRV",163,0)
 . S (TIUI,TIUL)=+$G(TIUI)+1
"RTN","TIUSRV",164,0)
 . S ^TMP("TIUAUDIT",$J,TIUI,0)=$G(^TIU(8925,+TIUDADD,"TEXT",TIUJ,0))
"RTN","TIUSRV",165,0)
 S (TIUI,TIUL)=TIUL+1
"RTN","TIUSRV",166,0)
 S TIUSIG=$S(+$P($G(^TIU(8925,+TIUDADD,15)),U)&($P($G(^(15)),U,3)="E"):"/es/ ",1:"     ")_$$SIGNAME^TIULS($P($G(^TIU(8925,+TIUDADD,15)),U,2))
"RTN","TIUSRV",167,0)
 S TIUCSIG=$S(+$P($G(^TIU(8925,+TIUDADD,15)),U,5)&($P($G(^(15)),U,7)="E"):"/es/ ",1:"     ")_$$SIGNAME^TIULS($P($G(^TIU(8925,+TIUDADD,15)),U,6))
"RTN","TIUSRV",168,0)
 S TIUSIG=$$SETSTR^VALM1(TIUSIG,$G(TIUSIG),1,35)
"RTN","TIUSRV",169,0)
 S TIUSIG=$$SETSTR^VALM1(TIUCSIG,$G(TIUSIG),40,35)
"RTN","TIUSRV",170,0)
 S ^TMP("TIUAUDIT",$J,TIUI,0)=TIUSIG
"RTN","TIUSRV",171,0)
 S (TIUI,TIUL)=TIUL+1
"RTN","TIUSRV",172,0)
 S TIUDAUTH=$$SIGNAME^TIULS($P($G(^TIU(8925,+TIUDADD,12)),U,2))
"RTN","TIUSRV",173,0)
 S TIUDATT=$$SIGNAME^TIULS($P($G(^TIU(8925,+TIUDADD,12)),U,4))
"RTN","TIUSRV",174,0)
 S TIUDAUTH=$$SETSTR^VALM1($S(TIUSIG]"     "&(TIUSIG'[TIUDAUTH):"for  ",1:"     ")_TIUDAUTH,$G(TIUDAUTH),1,35)
"RTN","TIUSRV",175,0)
 S TIUDAUTH=$$SETSTR^VALM1($S(TIUCSIG]"     "&(TIUCSIG'[TIUDATT):"for  ",1:"     ")_TIUDATT,$G(TIUDAUTH),40,35)
"RTN","TIUSRV",176,0)
 S ^TMP("TIUAUDIT",$J,TIUI,0)=TIUDAUTH
"RTN","TIUSRV",177,0)
 Q
"RTN","TIUSRV",178,0)
SET(LINE,COL,TEXT,ON,OFF) ; set display info in array
"RTN","TIUSRV",179,0)
 D:'$D(@VALMAR@(LINE,0)) BLANK(.LINE)
"RTN","TIUSRV",180,0)
 D SET^VALM10(.LINE,$$SETSTR^VALM1(.TEXT,@VALMAR@(LINE,0),.COL,$L(TEXT)))
"RTN","TIUSRV",181,0)
 D:$G(ON)]""!($G(OFF)]"") CNTRL^VALM10(.LINE,.COL,$L(TEXT),$G(ON),$G(OFF))
"RTN","TIUSRV",182,0)
 W:'(LINE#5)&'+$G(HUSH) "."
"RTN","TIUSRV",183,0)
 Q
"RTN","TIUSRV",184,0)
 ;
"RTN","TIUSRV",185,0)
BLANK(LINE) ; blank line
"RTN","TIUSRV",186,0)
 D SET^VALM10(.LINE,$J("",80))
"RTN","TIUSRV",187,0)
 Q
"RTN","TIUSRV1")
0^228^B4927992
"RTN","TIUSRV1",1,0)
TIUSRV1 ; SLC/JER - More silent server functions
"RTN","TIUSRV1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRV1",3,0)
REASSIGN(TIUDA) ; Reassign Hx
"RTN","TIUSRV1",4,0)
 N TIUI,DR,DIC,DIQ,TIUCNT,TIUREASS,START,OFFSET S TIUI=0,START=VALMCNT+2
"RTN","TIUSRV1",5,0)
 D BLANK^TIUSRV(VALMCNT+1)
"RTN","TIUSRV1",6,0)
 D SET^TIUSRV(START,2," Reassignment History ",$G(IORVON),$G(IORVOFF))
"RTN","TIUSRV1",7,0)
 I '+$O(^TIU(8925.5,"AR",+TIUDA,0)) D SET^TIUSRV(START,26,"Document Never Reassigned.")
"RTN","TIUSRV1",8,0)
 F  S TIUI=$O(^TIU(8925.5,"AR",TIUDA,TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRV1",9,0)
 . S DA=0 F  S DA=$O(^TIU(8925.5,"AR",TIUDA,TIUI,DA)) Q:+DA'>0  D
"RTN","TIUSRV1",10,0)
 . . S DR="1.01:1.12",DIC="^TIU(8925.5,",DIQ="TIUREASS"
"RTN","TIUSRV1",11,0)
 . . D EN^DIQ1 Q:$D(TIUREASS)'>9!($G(TIUREASS(8925.5,DA,1.01))']"")
"RTN","TIUSRV1",12,0)
 . . S TIUCNT=+$G(TIUCNT)+1 I TIUCNT>1 S START=START+1 D BLANK^TIUSRV(START)
"RTN","TIUSRV1",13,0)
 . . S OFFSET=2
"RTN","TIUSRV1",14,0)
 . . D SET^TIUSRV(START+1,OFFSET,"  Reassign Date: "_$G(TIUREASS(8925.5,DA,1.01)))
"RTN","TIUSRV1",15,0)
 . . D SET^TIUSRV(START+2,OFFSET,"        Patient: "_$G(TIUREASS(8925.5,DA,1.03)))
"RTN","TIUSRV1",16,0)
 . . D SET^TIUSRV(START+3,OFFSET,"Visit Date/time: "_$G(TIUREASS(8925.5,DA,1.05)))
"RTN","TIUSRV1",17,0)
 . . D SET^TIUSRV(START+4,OFFSET,"  Hosp Location: "_$G(TIUREASS(8925.5,DA,1.07)))
"RTN","TIUSRV1",18,0)
 . . D SET^TIUSRV(START+5,OFFSET,"     Visit Type: "_$$UP^XLFSTR($G(TIUREASS(8925.5,DA,1.09))))
"RTN","TIUSRV1",19,0)
 . . S OFFSET=44
"RTN","TIUSRV1",20,0)
 . . D SET^TIUSRV(START+1,OFFSET," Reassigned By: "_$G(TIUREASS(8925.5,DA,1.02)))
"RTN","TIUSRV1",21,0)
 . . D SET^TIUSRV(START+2,OFFSET," --->           "_$G(TIUREASS(8925.5,DA,1.04)))
"RTN","TIUSRV1",22,0)
 . . D SET^TIUSRV(START+3,OFFSET," --->           "_$G(TIUREASS(8925.5,DA,1.06)))
"RTN","TIUSRV1",23,0)
 . . D SET^TIUSRV(START+4,OFFSET," --->           "_$G(TIUREASS(8925.5,DA,1.08)))
"RTN","TIUSRV1",24,0)
 . . D SET^TIUSRV(START+5,OFFSET," --->           "_$$UP^XLFSTR($G(TIUREASS(8925.5,DA,1.1))))
"RTN","TIUSRV1",25,0)
 . . S START=START+5
"RTN","TIUSRV1",26,0)
 S VALMCNT=START
"RTN","TIUSRV1",27,0)
 Q
"RTN","TIUSRVA")
0^174^B2096344
"RTN","TIUSRVA",1,0)
TIUSRVA ; SLC/JER - API's for Authorization
"RTN","TIUSRVA",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRVA",3,0)
REQCOSIG(TIUY) ; Evaluate cosignature requirement
"RTN","TIUSRVA",4,0)
 S TIUY=+$$ISA^USRLM(DUZ,"STUDENT")
"RTN","TIUSRVA",5,0)
 Q
"RTN","TIUSRVA",6,0)
REQCOS(TIUY,TIUTYP,TIUDA,TIUSER) ; Evaluate cosignature requirement
"RTN","TIUSRVA",7,0)
 ; Initialize return value
"RTN","TIUSRVA",8,0)
 N TIUDPRM
"RTN","TIUSRVA",9,0)
 S TIUY=0
"RTN","TIUSRVA",10,0)
 I +$G(TIUTYP)'>0 Q
"RTN","TIUSRVA",11,0)
 S:'+$G(TIUSER) TIUSER=+$G(DUZ)
"RTN","TIUSRVA",12,0)
 S TIUY=+$$REQCOSIG^TIULP(TIUTYP,+$G(TIUDA),+$G(TIUSER))
"RTN","TIUSRVA",13,0)
 Q
"RTN","TIUSRVA",14,0)
URGENCY(Y) ; -- retrieve set values from dd for discharge summary urgency
"RTN","TIUSRVA",15,0)
 N TIUDD,I,X
"RTN","TIUSRVA",16,0)
 D FIELD^DID(8925,.09,"","POINTER","TIUDD")
"RTN","TIUSRVA",17,0)
 F I=1:1 S X=$P(TIUDD("POINTER"),";",I) Q:X=""   S Y(I)=$TR(X,":","^")
"RTN","TIUSRVA",18,0)
 Q
"RTN","TIUSRVA",19,0)
CANDO(Y,TIUDA,TIUACT) ; Boolean function to evaluate privilege
"RTN","TIUSRVA",20,0)
 S Y=$$CANDO^TIULP(TIUDA,TIUACT)
"RTN","TIUSRVA",21,0)
 Q
"RTN","TIUSRVA",22,0)
WHATACT(Y,TIUDA) ; Evaluate/return whether signature or cosignature
"RTN","TIUSRVA",23,0)
 N TIUD0,TIUD12,TIUSTAT,SIGNER,COSIGNER,XTRASGNR
"RTN","TIUSRVA",24,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD12=$G(^TIU(8925,+TIUDA,12))
"RTN","TIUSRVA",25,0)
 S SIGNER=$P(TIUD12,U,4),COSIGNER=$P(TIUD12,U,8)
"RTN","TIUSRVA",26,0)
 I (DUZ'=SIGNER),(DUZ'=COSIGNER) S XTRASGNR=+$O(^TIU(8925.7,"AE",+TIUDA,+DUZ,0))
"RTN","TIUSRVA",27,0)
 S TIUSTAT=+$P(TIUD0,U,5)
"RTN","TIUSRVA",28,0)
 S Y=$S(TIUSTAT'>5:"SIGNATURE",+$G(XTRASGNR):"SIGNATURE",1:"COSIGNATURE")
"RTN","TIUSRVA",29,0)
 Q
"RTN","TIUSRVD")
0^175^B16977188
"RTN","TIUSRVD",1,0)
TIUSRVD ; SLC/JER - RPC's for document definition
"RTN","TIUSRVD",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRVD",3,0)
NOTES(TIUY) ; Get list of PN Titles
"RTN","TIUSRVD",4,0)
 D LIST(.TIUY,3)
"RTN","TIUSRVD",5,0)
 Q
"RTN","TIUSRVD",6,0)
SUMMARY(TIUY) ; Get list of DS Titles
"RTN","TIUSRVD",7,0)
 D LIST(.TIUY,244)
"RTN","TIUSRVD",8,0)
 Q
"RTN","TIUSRVD",9,0)
LIST(TIUY,CLASS,TYPE,TIUK) ; Get list of document titles
"RTN","TIUSRVD",10,0)
 N TIUDFLT
"RTN","TIUSRVD",11,0)
 ; TIUK is STATIC
"RTN","TIUSRVD",12,0)
 S TIUK=+$G(TIUK)
"RTN","TIUSRVD",13,0)
 I $G(TYPE)']"" S TYPE="DOC"
"RTN","TIUSRVD",14,0)
 ; If the user has a preferred list of titles for the CLASS, get it
"RTN","TIUSRVD",15,0)
 I +$O(^TIU(8925.98,"AC",DUZ,CLASS,0)) D PERSLIST(.TIUY,DUZ,CLASS,.TIUK)
"RTN","TIUSRVD",16,0)
 S TIUK=+$G(TIUK)+1 S TIUY(TIUK)="~LONG LIST"
"RTN","TIUSRVD",17,0)
 D TRAVERSE(.TIUY,CLASS,$G(TYPE),.TIUK)
"RTN","TIUSRVD",18,0)
 S TIUDFLT=$$PERSDOC^TIULE(DUZ,+CLASS)
"RTN","TIUSRVD",19,0)
 I +TIUDFLT S TIUK=+$G(TIUK)+1,TIUY(TIUK)="d"_$P(TIUDFLT,U,2)   ; **KCM
"RTN","TIUSRVD",20,0)
 Q
"RTN","TIUSRVD",21,0)
TRAVERSE(TIUY,CLASS,TYPE,TIUK) ; Get all selectable titles for the CLASS
"RTN","TIUSRVD",22,0)
 N I,J,X,CURTYP,Y,TIUI,TIUC S (TIUC,TIUI)=0
"RTN","TIUSRVD",23,0)
 S TIUK=+$G(TIUK)
"RTN","TIUSRVD",24,0)
 I +$$CANENTR^TIULP(CLASS)'>0 Q
"RTN","TIUSRVD",25,0)
 S CURTYP=$P(^TIU(8925.1,+CLASS,0),U,4)
"RTN","TIUSRVD",26,0)
 S TYPMATCH=$$TYPMATCH^TIULA1(TYPE,CURTYP)
"RTN","TIUSRVD",27,0)
 I +TYPMATCH S TIUK=+$G(TIUK)+1
"RTN","TIUSRVD",28,0)
 I  S TIUY(TIUK)="i"_+CLASS_U_$$PNAME^TIULC1(+CLASS)
"RTN","TIUSRVD",29,0)
 S I=0 F  S I=$O(^TIU(8925.1,+CLASS,10,I)) Q:+I'>0  D
"RTN","TIUSRVD",30,0)
 . N J
"RTN","TIUSRVD",31,0)
 . S J=+$G(^TIU(8925.1,+CLASS,10,+I,0)) Q:+J'>0
"RTN","TIUSRVD",32,0)
 . D TRAVERSE(.TIUY,+J,TYPE,.TIUK)
"RTN","TIUSRVD",33,0)
 Q
"RTN","TIUSRVD",34,0)
PERSLIST(TIUY,DUZ,CLASS,TIUC) ; Get personal list for a user
"RTN","TIUSRVD",35,0)
 N TIUI,TIUDA S TIUDA=+$O(^TIU(8925.98,"AC",DUZ,CLASS,0))
"RTN","TIUSRVD",36,0)
 Q:+TIUDA'>0
"RTN","TIUSRVD",37,0)
 S TIUC=1,TIUY(TIUC)="~SHORT LIST"
"RTN","TIUSRVD",38,0)
 S TIUI=0
"RTN","TIUSRVD",39,0)
 F  S TIUI=$O(^TIU(8925.98,TIUDA,10,TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVD",40,0)
 . N TIUPL,TIUTNM,TIUDTYP S TIUPL=$G(^TIU(8925.98,TIUDA,10,TIUI,0))
"RTN","TIUSRVD",41,0)
 . S TIUDTYP=$P(TIUPL,U)
"RTN","TIUSRVD",42,0)
 . S TIUTNM=$S($P(TIUPL,U,3)]"":$P(TIUPL,U,3),1:$$PNAME^TIULC1(+TIUDTYP))
"RTN","TIUSRVD",43,0)
 . S TIUC=+$G(TIUC)+1
"RTN","TIUSRVD",44,0)
 . S TIUY(TIUC)="i"_TIUDTYP_U_TIUTNM
"RTN","TIUSRVD",45,0)
 Q
"RTN","TIUSRVD",46,0)
BLRSHELL(TIUY,TITLE,DFN) ; Shell for boilerplate RPC
"RTN","TIUSRVD",47,0)
 K ^TMP("TIUBOIL",$J)
"RTN","TIUSRVD",48,0)
 D BLRPLT(.TIUY,TITLE,DFN)
"RTN","TIUSRVD",49,0)
 K ^TMP("TIUBOIL",$J,0)
"RTN","TIUSRVD",50,0)
 Q
"RTN","TIUSRVD",51,0)
BLRPLT(TIUY,TITLE,DFN) ; Load/Execute the Boilerplate for a title
"RTN","TIUSRVD",52,0)
 N TIUI,TIUJ,TIUK,TIUL S TIUI=0
"RTN","TIUSRVD",53,0)
 S:'$D(TIUY) TIUY=$NA(^TMP("TIUBOIL",$J))
"RTN","TIUSRVD",54,0)
 S TIUJ=+$P($G(^TMP("TIUBOIL",$J,0)),U,3)+1
"RTN","TIUSRVD",55,0)
 ; --- Set component header ---
"RTN","TIUSRVD",56,0)
 S ^TMP("TIUBOIL",$J,TIUJ,0)=$S($P($G(^TIU(8925.1,+TITLE,0)),U,4)="CO":$P(^TIU(8925.1,+TITLE,0),U)_":   ",1:"")
"RTN","TIUSRVD",57,0)
 I +TIUJ=1,($G(^TMP("TIUBOIL",$J,TIUJ,0))']"") K ^TMP("TIUBOIL",$J,TIUJ,0) S TIUJ=0
"RTN","TIUSRVD",58,0)
 S ^TMP("TIUBOIL",$J,0)="^^"_TIUJ_U_TIUJ_U_DT_"^^"
"RTN","TIUSRVD",59,0)
 F  S TIUI=$O(^TIU(8925.1,+TITLE,"DFLT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVD",60,0)
 . S TIUJ=TIUJ+1,X=$G(^TIU(8925.1,+TITLE,"DFLT",TIUI,0))
"RTN","TIUSRVD",61,0)
 . I X["|" S X=$$BOIL(X,TIUJ)
"RTN","TIUSRVD",62,0)
 . I X["~@" D INSMULT(X,"^TMP(""TIUBOIL"",$J)",.TIUJ) I 1
"RTN","TIUSRVD",63,0)
 . E  S ^TMP("TIUBOIL",$J,TIUJ,0)=X
"RTN","TIUSRVD",64,0)
 . S ^TMP("TIUBOIL",$J,0)="^^"_TIUJ_U_TIUJ_U_DT_"^^"
"RTN","TIUSRVD",65,0)
 I +$O(^TIU(8925.1,+TITLE,10,0)) D
"RTN","TIUSRVD",66,0)
 . N TIUFITEM,TIUI D ITEMS^TIUFLT(+TITLE)
"RTN","TIUSRVD",67,0)
 . S TIUI=0 F  S TIUI=$O(TIUFITEM(TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVD",68,0)
 . . S TIUL=+$G(TIUFITEM(+TIUI)) D BLRPLT(.TIUY,TIUL,DFN)
"RTN","TIUSRVD",69,0)
 Q
"RTN","TIUSRVD",70,0)
BOIL(LINE,COUNT) ; Execute Boilerplates
"RTN","TIUSRVD",71,0)
 N TIUI,DIC,X,Y,TIUFPRIV S TIUFPRIV=1
"RTN","TIUSRVD",72,0)
 S DIC=8925.1,DIC(0)="FMZ"
"RTN","TIUSRVD",73,0)
 F TIUI=2:2:$L(LINE,"|") S X=$P(LINE,"|",TIUI) D
"RTN","TIUSRVD",74,0)
 . D ^DIC
"RTN","TIUSRVD",75,0)
 . I +Y'>0 S X="The OBJECT "_X_" was NOT found...Contact IRM."
"RTN","TIUSRVD",76,0)
 . I +Y>0 D
"RTN","TIUSRVD",77,0)
 . . I $D(^TIU(8925.1,+Y,9)),+$$CANXEC(+Y) X ^(9) I 1
"RTN","TIUSRVD",78,0)
 . . E  S X="The OBJECT "_X_" is INACTIVE...Contact IRM."
"RTN","TIUSRVD",79,0)
 . S LINE=$$REPLACE(LINE,X,TIUI)
"RTN","TIUSRVD",80,0)
 Q $TR(LINE,"|","")
"RTN","TIUSRVD",81,0)
CANXEC(TIUODA) ; Evaluate Object Status
"RTN","TIUSRVD",82,0)
 N TIUOST,TIUY S TIUOST=+$P($G(^TIU(8925.1,+TIUODA,0)),U,7)
"RTN","TIUSRVD",83,0)
 S TIUY=$S(TIUOST=11:1,+$G(NOSAVE):1,1:0)
"RTN","TIUSRVD",84,0)
 Q +$G(TIUY)
"RTN","TIUSRVD",85,0)
REPLACE(LINE,X,TIUI) ; Replace the TIUIth object in LINE w/X
"RTN","TIUSRVD",86,0)
 S $P(LINE,"|",TIUI)=X
"RTN","TIUSRVD",87,0)
 Q LINE
"RTN","TIUSRVD",88,0)
INSMULT(LINE,TARGET,TIULCNT) ; Handles mult-valued results from Objects
"RTN","TIUSRVD",89,0)
 N TIUI,TIULINE,TIUX,TIUSRC,TIUSCNT,TIUSLINE
"RTN","TIUSRVD",90,0)
 S TIUSRC=$P(LINE,"~@",2)
"RTN","TIUSRVD",91,0)
 S TIULINE=$P(LINE,"~@"),(TIUI,TIUSCNT)=0
"RTN","TIUSRVD",92,0)
 F  S TIUI=$O(@TIUSRC@(TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVD",93,0)
 . S TIUSCNT=TIUSCNT+1
"RTN","TIUSRVD",94,0)
 . S TIUSLINE=$G(@TIUSRC@(TIUI,0))
"RTN","TIUSRVD",95,0)
 . I TIUSCNT=1,($L(TIULINE_TIUSLINE)>73) D  Q
"RTN","TIUSRVD",96,0)
 . . S @TARGET@(TIULCNT,0)=TIULINE
"RTN","TIUSRVD",97,0)
 . . S TIULCNT=TIULCNT+1
"RTN","TIUSRVD",98,0)
 . . S @TARGET@(TIULCNT,0)=TIUSLINE
"RTN","TIUSRVD",99,0)
 . . S TIULCNT=TIULCNT+1
"RTN","TIUSRVD",100,0)
 . I TIUSCNT=1,($L(TIULINE_TIUSLINE)'>73) D  Q
"RTN","TIUSRVD",101,0)
 . . S @TARGET@(TIULCNT,0)=TIULINE_TIUSLINE
"RTN","TIUSRVD",102,0)
 . . S TIULCNT=TIULCNT+1
"RTN","TIUSRVD",103,0)
 . S @TARGET@(TIULCNT,0)=$G(TIUSLINE)
"RTN","TIUSRVD",104,0)
 . S TIULCNT=TIULCNT+1
"RTN","TIUSRVD",105,0)
 K @TIUSRC
"RTN","TIUSRVD",106,0)
 Q
"RTN","TIUSRVE")
0^176^B10442489
"RTN","TIUSRVE",1,0)
TIUSRVE ; SLC/JER - Get Upload Events for Display
"RTN","TIUSRVE",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRVE",3,0)
GET(TIUDA,HUSH) ; Build ^TMP("TIUEVENT",$J,
"RTN","TIUSRVE",4,0)
 N TIUI,TIUJ,TIUL,TIUREC,X S TIUI=0,HUSH=+$G(HUSH)
"RTN","TIUSRVE",5,0)
 N DA,DIC,DIQ,DR,TIUNAME K ^TMP("TIUEVENT",$J)
"RTN","TIUSRVE",6,0)
 I '$D(IOINORM) S X="IOINORM;IOIHI;IORVON;IORVOFF;IOUON;IOUOFF;IOBON;IOBOFF" D ENDR^%ZISS
"RTN","TIUSRVE",7,0)
 S:'$D(VALMAR) VALMAR="^TMP(""TIUEVENT"",$J)"
"RTN","TIUSRVE",8,0)
 S VALMEVL=+$G(VALMEVL)
"RTN","TIUSRVE",9,0)
 I '$D(^TIU(8925.4,+TIUDA,0)) S VALMQUIT=1 Q
"RTN","TIUSRVE",10,0)
 S DIC=8925.4,DIQ="TIUREC(",DA=TIUDA
"RTN","TIUSRVE",11,0)
 S DR=".01:.08"
"RTN","TIUSRVE",12,0)
 D EN^DIQ1
"RTN","TIUSRVE",13,0)
 S TIUI="" F  S TIUI=$O(TIUREC(8925.4,+TIUDA,TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVE",14,0)
 . I $G(TIUREC(8925.4,+TIUDA,TIUI))']"" S TIUREC(8925.4,+TIUDA,TIUI)="None"
"RTN","TIUSRVE",15,0)
 I $D(TIUREC)>9 D
"RTN","TIUSRVE",16,0)
 . S ^TMP("TIUEVENT",$J,0)=$G(TIUREC(8925.4,TIUDA,.08))
"RTN","TIUSRVE",17,0)
 . D EVENT(.TIUREC,HUSH),FIELDS(TIUDA,.VALMCNT),HEADER(TIUDA,.VALMCNT)
"RTN","TIUSRVE",18,0)
 S:+$G(VALMCNT)<$G(VALM("LINES")) VALMCNT=$G(VALM("LINES"))
"RTN","TIUSRVE",19,0)
 Q
"RTN","TIUSRVE",20,0)
EVENT(TIUREC,HUSH) ; Load Source Information
"RTN","TIUSRVE",21,0)
 N OFFSET,START
"RTN","TIUSRVE",22,0)
 S OFFSET=2,START=1
"RTN","TIUSRVE",23,0)
 W:'+$G(HUSH) !!,"Opening "_TIUREC(8925.4,+TIUDA,.08)_" record for review..."
"RTN","TIUSRVE",24,0)
 D SET(START,OFFSET," Event Description ",IORVON,IORVOFF)
"RTN","TIUSRVE",25,0)
 D SET(START+1,OFFSET,$G(TIUREC(8925.4,TIUDA,.04)))
"RTN","TIUSRVE",26,0)
 D SET(START+2,OFFSET,"  Event Date/time: "_$G(TIUREC(8925.4,TIUDA,.01)))
"RTN","TIUSRVE",27,0)
 D SET(START+3,OFFSET,"        User Name: "_$G(TIUREC(8925.4,TIUDA,.02)))
"RTN","TIUSRVE",28,0)
 D SET(START+4,OFFSET,"       Event Type: "_$G(TIUREC(8925.4,TIUDA,.08)))
"RTN","TIUSRVE",29,0)
 D SET(START+5,OFFSET,"    Document Type: "_$G(TIUREC(8925.4,TIUDA,.03)))
"RTN","TIUSRVE",30,0)
 D SET(START+6,OFFSET,"Resolution Status: "_$G(TIUREC(8925.4,TIUDA,.06)))
"RTN","TIUSRVE",31,0)
 D SET(START+7,OFFSET,"  Resolution Date: "_$G(TIUREC(8925.4,TIUDA,.07)))
"RTN","TIUSRVE",32,0)
 S VALMCNT=7
"RTN","TIUSRVE",33,0)
 Q
"RTN","TIUSRVE",34,0)
FIELDS(TIUDA,TIUJ) ; Get missing fields
"RTN","TIUSRVE",35,0)
 N TIUK,TIUFLD S TIUK=0
"RTN","TIUSRVE",36,0)
 S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVE",37,0)
 D BLANK(TIUJ) S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVE",38,0)
 D SET(TIUJ,2," Missing Fields ",IORVON,IORVOFF) S TIUJ=TIUJ+1
"RTN","TIUSRVE",39,0)
 D BLANK(TIUJ)
"RTN","TIUSRVE",40,0)
 F  S TIUK=$O(^TIU(8925.4,+TIUDA,1,TIUK)) Q:+TIUK'>0  D
"RTN","TIUSRVE",41,0)
 . N DIC,DIQ,DA,DR S DA=TIUK,DIC="^TIU(8925.4,"_+TIUDA_",1,"
"RTN","TIUSRVE",42,0)
 . S DR=".01:.04",DIQ="TIUFLD(" D EN^DIQ1 Q:$D(TIUFLD)'>9
"RTN","TIUSRVE",43,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVE",44,0)
 . D SET(TIUJ,2,"  File Number: "_$G(TIUFLD(8925.42,DA,.01)))
"RTN","TIUSRVE",45,0)
 . D SET(TIUJ,40,"Record Number: "_$G(TIUFLD(8925.42,DA,.02)))
"RTN","TIUSRVE",46,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVE",47,0)
 . D SET(TIUJ,2," Field Number: "_$G(TIUFLD(8925.42,DA,.03)))
"RTN","TIUSRVE",48,0)
 . D SET(TIUJ,40," Failed Value: "_$G(TIUFLD(8925.42,DA,.04)))
"RTN","TIUSRVE",49,0)
 Q
"RTN","TIUSRVE",50,0)
HEADER(TIUDA,TIUJ) ; Get body of document
"RTN","TIUSRVE",51,0)
 S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVE",52,0)
 D BLANK(TIUJ) S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVE",53,0)
 D SET(TIUJ,2," Header Text ",IORVON,IORVOFF)
"RTN","TIUSRVE",54,0)
 ; D BLANK(TIUJ) S TIUJ=TIUJ+1
"RTN","TIUSRVE",55,0)
 D HDRTEXT(TIUDA,.TIUJ)
"RTN","TIUSRVE",56,0)
 Q
"RTN","TIUSRVE",57,0)
HDRTEXT(TIUDA,TIUJ) ; Get Header Text for filing errors
"RTN","TIUSRVE",58,0)
 N TIUKID,TIUDADT,TIUI S TIUI=0
"RTN","TIUSRVE",59,0)
 F  S TIUI=$O(^TIU(8925.4,+TIUDA,"HEAD",TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVE",60,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVE",61,0)
 . D SET(TIUJ,2,$G(^TIU(8925.4,+TIUDA,"HEAD",+TIUI,0)))
"RTN","TIUSRVE",62,0)
 Q
"RTN","TIUSRVE",63,0)
SET(LINE,COL,TEXT,ON,OFF) ; -- set display info in array
"RTN","TIUSRVE",64,0)
 D:'$D(@VALMAR@(LINE,0)) BLANK(.LINE)
"RTN","TIUSRVE",65,0)
 D SET^VALM10(.LINE,$$SETSTR^VALM1(.TEXT,@VALMAR@(LINE,0),.COL,$L(TEXT)))
"RTN","TIUSRVE",66,0)
 D:$G(ON)]""!($G(OFF)]"") CNTRL^VALM10(.LINE,.COL,$L(TEXT),$G(ON),$G(OFF))
"RTN","TIUSRVE",67,0)
 W:'(LINE#5)&'+$G(HUSH) "."
"RTN","TIUSRVE",68,0)
 Q
"RTN","TIUSRVE",69,0)
 ;
"RTN","TIUSRVE",70,0)
BLANK(LINE) ; -- build blank line
"RTN","TIUSRVE",71,0)
 D SET^VALM10(.LINE,$J("",80))
"RTN","TIUSRVE",72,0)
 Q
"RTN","TIUSRVG")
0^177^B24954709
"RTN","TIUSRVG",1,0)
TIUSRVG ; SLC/JER - Silent Server Calls ;12/21/94  17:50
"RTN","TIUSRVG",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRVG",3,0)
MULTIPLE(TIUY,TIUDA,TIUECHO) ; Get multiple records
"RTN","TIUSRVG",4,0)
 N TIUI,TIUX,TIULAST S TIUI=0
"RTN","TIUSRVG",5,0)
 K ^TMP("TIUVIEW",$J)
"RTN","TIUSRVG",6,0)
 F  S TIUI=$O(TIUDA(TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVG",7,0)
 . S TIUX=$G(TIUDA(TIUI)) D GET(.TIUY,TIUX,TIUI,+$G(TIUECHO),1)
"RTN","TIUSRVG",8,0)
 Q
"RTN","TIUSRVG",9,0)
GET(TIUY,TIUDA,TIUITEM,TIUECHO,TIUACCUM) ; Get a record
"RTN","TIUSRVG",10,0)
 N DIC,DIQ,X,Y
"RTN","TIUSRVG",11,0)
 N TIUI,TIUJ,TIUL,TIUREC S (TIUDADD,TIUI)=0
"RTN","TIUSRVG",12,0)
 N DA,DIC,DIQ,DR,TIUFILE,TIUNAM
"RTN","TIUSRVG",13,0)
 K:'+$G(TIUACCUM) ^TMP("TIUVIEW",$J)
"RTN","TIUSRVG",14,0)
 S DA=TIUDA
"RTN","TIUSRVG",15,0)
 I '$D(^TIU(8925,+TIUDA,0)) S VALMQUIT=1,TIUY="-1^NONEXISTENT RECORD" Q
"RTN","TIUSRVG",16,0)
 S (TIUFILE,DIC)=8925,DIQ="TIUREC("
"RTN","TIUSRVG",17,0)
 S DR=".01;.02;.05;.07:.1;1202;1204;1301;1302;1305;1306;1501;1502;1505;1506;1601:1604"
"RTN","TIUSRVG",18,0)
 D EN^DIQ1
"RTN","TIUSRVG",19,0)
 I $D(TIUREC)>9 D
"RTN","TIUSRVG",20,0)
 . W:+$G(TIUECHO) !!,"Opening "_TIUREC(8925,+TIUDA,.01)_" record for review..."
"RTN","TIUSRVG",21,0)
 . F TIUJ=1:1:3 S ^TMP("TIUVIEW",$J,TIUITEM,TIUJ,0)=$$SETREC(TIUJ)
"RTN","TIUSRVG",22,0)
 . S (TIUJ,TIUL)=4,^TMP("TIUVIEW",$J,TIUITEM,TIUJ,0)=" "
"RTN","TIUSRVG",23,0)
 D LOADREC(TIUDA,TIUITEM,.TIUJ,.TIUL)
"RTN","TIUSRVG",24,0)
 I $L($G(TIUREC(8925,+TIUDA,1601))) D
"RTN","TIUSRVG",25,0)
 . N TIUMODE
"RTN","TIUSRVG",26,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUITEM,TIUJ,0)="",TIUL=+$G(TIUL)+1
"RTN","TIUSRVG",27,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVG",28,0)
 . S ^TMP("TIUVIEW",$J,TIUITEM,TIUJ,0)=$G(TIUREC(8925,TIUDA,1601))_"  AMENDMENT FILED:"
"RTN","TIUSRVG",29,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUSRVG",30,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUITEM,TIUJ,0)="",TIUL=+$G(TIUL)+1
"RTN","TIUSRVG",31,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVG",32,0)
 . S TIUMODE=$S($G(TIUREC(8925,TIUDA,1603))]"":"/es/ ",1:"/chart/ ")
"RTN","TIUSRVG",33,0)
 . S ^TMP("TIUVIEW",$J,TIUITEM,TIUJ,0)=TIUMODE_$G(TIUREC(8925,TIUDA,1602))
"RTN","TIUSRVG",34,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUSRVG",35,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVG",36,0)
 . ;S ^TMP("TIUVIEW",$J,TIUITEM,TIUJ,0)=$P(TIUPRM1,U,5)
"RTN","TIUSRVG",37,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUSRVG",38,0)
 I +$G(TIUACCUM) D
"RTN","TIUSRVG",39,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVG",40,0)
 . S ^TMP("TIUVIEW",$J,TIUITEM,TIUJ,0)=" "
"RTN","TIUSRVG",41,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUSRVG",42,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVG",43,0)
 . S $P(^TMP("TIUVIEW",$J,TIUITEM,TIUJ,0),"=",79)=""
"RTN","TIUSRVG",44,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUSRVG",45,0)
 ; S ^TMP("TIUVIEW",$J,TIUITEM,0)=$G(^TIU(8925,+TIUDA,"TEXT",0))
"RTN","TIUSRVG",46,0)
 S TIUY="^TMP(""TIUVIEW"","_$J_")",TIUL=+$P($G(^TMP("TIUVIEW",$J,0)),U,3)+TIUL
"RTN","TIUSRVG",47,0)
 S ^TMP("TIUVIEW",$J,0)="^^"_TIUL_U_TIUL_U_DT,VALMCNT=TIUL
"RTN","TIUSRVG",48,0)
 Q
"RTN","TIUSRVG",49,0)
LOADREC(TIUDA,TIUITEM,TIUJ,TIUL,TIUDAD) ; Load ^TMP
"RTN","TIUSRVG",50,0)
 N TIUKID,TIUDADT,TIUI S TIUI=0
"RTN","TIUSRVG",51,0)
 F  S TIUI=$O(^TIU(8925,+TIUDA,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVG",52,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVG",53,0)
 . S ^TMP("TIUVIEW",$J,TIUITEM,TIUJ,0)=$G(^TIU(8925,+TIUDA,"TEXT",+TIUI,0))
"RTN","TIUSRVG",54,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUSRVG",55,0)
 S TIUKID=0
"RTN","TIUSRVG",56,0)
 F  S TIUKID=$O(^TIU(8925,"DAD",+TIUDA,TIUKID)) Q:+TIUKID'>0  D
"RTN","TIUSRVG",57,0)
 . N TIUTYP S TIUTYP=$P($G(^TIU(8925.1,+$G(^TIU(8925,+TIUKID,0)),0)),U)
"RTN","TIUSRVG",58,0)
 . I TIUTYP="ADDENDUM" D LOADADD(TIUKID,.TIUL) I 1
"RTN","TIUSRVG",59,0)
 . E  D LOADREC(TIUKID,TIUITEM,.TIUJ,.TIUL,TIUDA)
"RTN","TIUSRVG",60,0)
 Q
"RTN","TIUSRVG",61,0)
LOADADD(TIUDADD,TIUL) ; Load addenda
"RTN","TIUSRVG",62,0)
 N TIUDAUTH,TIUDATT,TIUJ,TIUSIG,TIUCSIG
"RTN","TIUSRVG",63,0)
 ;I +$$CANSEE^TIULP(+TIUDADD)'>0 Q
"RTN","TIUSRVG",64,0)
 S TIUJ=0,TIUI=+$G(TIUL)+1,^TMP("TIUVIEW",$J,TIUDADD,TIUI,0)=" "
"RTN","TIUSRVG",65,0)
 S TIUDADT=$$DATE^TIULS($P(^TIU(8925,+TIUDADD,13),U),"MM/DD/YY")
"RTN","TIUSRVG",66,0)
 S TIUI=TIUI+1,^TMP("TIUVIEW",$J,TIUDADD,TIUI,0)=TIUDADT_" ADDENDUM:"
"RTN","TIUSRVG",67,0)
 F  S TIUJ=$O(^TIU(8925,+TIUDADD,"TEXT",TIUJ)) Q:+TIUJ'>0  D
"RTN","TIUSRVG",68,0)
 . S (TIUI,TIUL)=+$G(TIUI)+1
"RTN","TIUSRVG",69,0)
 . S ^TMP("TIUVIEW",$J,TIUDADD,TIUI,0)=$G(^TIU(8925,+TIUDADD,"TEXT",TIUJ,0))
"RTN","TIUSRVG",70,0)
 S (TIUI,TIUL)=TIUL+1
"RTN","TIUSRVG",71,0)
 S TIUSIG=$S(+$P(^TIU(8925,+TIUDADD,15),U)&($P(^(15),U,3)="E"):"/es/ ",1:"     ")_$$SIGNAME^TIULS($P(^TIU(8925,+TIUDADD,15),U,2))
"RTN","TIUSRVG",72,0)
 S TIUCSIG=$S(+$P(^TIU(8925,+TIUDADD,15),U,5)&($P(^(15),U,7)="E"):"/es/ ",1:"     ")_$$SIGNAME^TIULS($P(^TIU(8925,+TIUDADD,15),U,6))
"RTN","TIUSRVG",73,0)
 S TIUSIG=$$SETSTR^VALM1(TIUSIG,$G(TIUSIG),1,35)
"RTN","TIUSRVG",74,0)
 S TIUSIG=$$SETSTR^VALM1(TIUCSIG,$G(TIUSIG),40,35)
"RTN","TIUSRVG",75,0)
 S ^TMP("TIUVIEW",$J,TIUDADD,TIUI,0)=TIUSIG
"RTN","TIUSRVG",76,0)
 S (TIUI,TIUL)=TIUL+1
"RTN","TIUSRVG",77,0)
 S TIUDAUTH=$$SIGNAME^TIULS($P(^TIU(8925,+TIUDADD,12),U,2))
"RTN","TIUSRVG",78,0)
 S TIUDATT=$$SIGNAME^TIULS($P(^TIU(8925,+TIUDADD,12),U,4))
"RTN","TIUSRVG",79,0)
 S TIUDAUTH=$$SETSTR^VALM1($S(TIUSIG]"     "&(TIUSIG'[TIUDAUTH):"for  ",1:"     ")_TIUDAUTH,$G(TIUDAUTH),1,35)
"RTN","TIUSRVG",80,0)
 S TIUDAUTH=$$SETSTR^VALM1($S(TIUCSIG]"     "&(TIUCSIG'[TIUDATT):"for  ",1:"     ")_TIUDATT,$G(TIUDAUTH),40,35)
"RTN","TIUSRVG",81,0)
 S ^TMP("TIUVIEW",$J,TIUDADD,TIUI,0)=TIUDAUTH
"RTN","TIUSRVG",82,0)
 Q
"RTN","TIUSRVG",83,0)
SETREC(LINE) ; Calls $$SETSTR^VALM1 for each line of ^TMP("TIUVIEW",$J,
"RTN","TIUSRVG",84,0)
 N Y
"RTN","TIUSRVG",85,0)
 I LINE="HDR" D
"RTN","TIUSRVG",86,0)
 . S Y=$$SETSTR^VALM1($$NAME^TIULS(TIU("PNM"),"LAST,FI MI"),$G(Y),1,15)
"RTN","TIUSRVG",87,0)
 . S Y=$$SETSTR^VALM1(TIU("SSN"),$G(Y),16,12)
"RTN","TIUSRVG",88,0)
 . S Y=$$SETSTR^VALM1($P(TIU("WARD"),U,2),$G(Y),30,20)
"RTN","TIUSRVG",89,0)
 . I +TIU("DOCTYP")=1 D
"RTN","TIUSRVG",90,0)
 . . S Y=$$SETSTR^VALM1("Adm: "_$$DATE^TIULS(+TIU("EDT"),"MM/DD/YY"),$G(Y),51,13)
"RTN","TIUSRVG",91,0)
 . . S Y=$$SETSTR^VALM1("Dis: "_$$DATE^TIULS(+TIU("LDT"),"MM/DD/YY"),$G(Y),66,13)
"RTN","TIUSRVG",92,0)
 . I +TIU("DOCTYP")'=1 D
"RTN","TIUSRVG",93,0)
 . . S Y=$$SETSTR^VALM1("Visit Date: "_$$DATE^TIULS(+TIU("EDT"),"MM/DD/YY@HR:MIN"),$G(Y),53,26)
"RTN","TIUSRVG",94,0)
 I LINE=1 D
"RTN","TIUSRVG",95,0)
 . S Y=$$SETSTR^VALM1("DICT DATE: "_$G(TIUREC(8925,+TIUDA,1301)),$G(Y),3,39)
"RTN","TIUSRVG",96,0)
 . S Y=$$SETSTR^VALM1("TRANSC DATE: "_$G(TIUREC(8925,+TIUDA,1201)),$G(Y),37,39)
"RTN","TIUSRVG",97,0)
 I LINE=2 D
"RTN","TIUSRVG",98,0)
 . S Y=$$SETSTR^VALM1("DICTATED BY: "_$G(TIUREC(8925,+TIUDA,1202)),$G(Y),1,32)
"RTN","TIUSRVG",99,0)
 . S Y=$$SETSTR^VALM1("ATTENDING: "_$G(TIUREC(8925,+TIUDA,1204)),$G(Y),39,40)
"RTN","TIUSRVG",100,0)
 I LINE=3 D
"RTN","TIUSRVG",101,0)
 . S Y=$$SETSTR^VALM1("URGENCY: "_$G(TIUREC(8925,+TIUDA,.09)),$G(Y),5,36)
"RTN","TIUSRVG",102,0)
 . S Y=$$SETSTR^VALM1("DOC STATUS: "_$G(TIUREC(8925,+TIUDA,.05)),$G(Y),38,41)
"RTN","TIUSRVG",103,0)
 Q Y
"RTN","TIUSRVL")
0^178^B31985341
"RTN","TIUSRVL",1,0)
TIUSRVL ; SLC/JER - Server functions for lists ;7/16/96  17:52
"RTN","TIUSRVL",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRVL",3,0)
NOTES(TIUY,DFN,STATUS,EARLY,LATE,ROOTFLAG) ; Gets list of Notes
"RTN","TIUSRVL",4,0)
 N QSTR S QSTR="APT"_U_DFN_U_$P($G(^DPT(+DFN,0)),U)
"RTN","TIUSRVL",5,0)
 I $S(+$G(DFN)'>0:1,'$D(^DPT(+$G(DFN),0)):1,1:0) Q
"RTN","TIUSRVL",6,0)
 S STATUS=$S($G(STATUS)]"":$G(STATUS),1:"ALL")
"RTN","TIUSRVL",7,0)
 D LIST(.TIUY,3,STATUS,QSTR,$G(EARLY),$G(LATE),$G(ROOTFLAG))
"RTN","TIUSRVL",8,0)
 Q
"RTN","TIUSRVL",9,0)
SUMMARY(TIUY,DFN,STATUS,EARLY,LATE,ROOTFLAG) ; Gets list of Summaries
"RTN","TIUSRVL",10,0)
 N QSTR
"RTN","TIUSRVL",11,0)
 I $S(+$G(DFN)'>0:1,'$D(^DPT(+$G(DFN),0)):1,1:0) Q
"RTN","TIUSRVL",12,0)
 S QSTR="APT"_U_DFN_U_$P($G(^DPT(+DFN,0)),U)
"RTN","TIUSRVL",13,0)
 S STATUS=$S($G(STATUS)]"":$G(STATUS),1:"ALL")
"RTN","TIUSRVL",14,0)
 D LIST(.TIUY,1,STATUS,QSTR,$G(EARLY),$G(LATE),$G(ROOTFLAG))
"RTN","TIUSRVL",15,0)
 Q
"RTN","TIUSRVL",16,0)
CONSULT(TIUY,DFN,STATUS,EARLY,LATE,ROOTFLAG) ; Gets list of Consults
"RTN","TIUSRVL",17,0)
 N QSTR
"RTN","TIUSRVL",18,0)
 I $S(+$G(DFN)'>0:1,'$D(^DPT(+$G(DFN),0)):1,1:0) Q
"RTN","TIUSRVL",19,0)
 S QSTR="APT"_U_DFN_U_$P($G(^DPT(+DFN,0)),U)
"RTN","TIUSRVL",20,0)
 S STATUS=$S($G(STATUS)]"":$G(STATUS),1:"ALL")
"RTN","TIUSRVL",21,0)
 D LIST(.TIUY,243,STATUS,QSTR,$G(EARLY),$G(LATE),$G(ROOTFLAG))
"RTN","TIUSRVL",22,0)
 Q
"RTN","TIUSRVL",23,0)
LIST(TIUY,TYPE,STATUS,SCREEN,EARLY,LATE,ROOTFLAG) ; Build List
"RTN","TIUSRVL",24,0)
 N TIUCNT,TIUDT,TIUI,TIUJ,TIUK,TIUP,TIUQ,TIUIFN,TIUREC,TIUPRM0,TIUPRM1
"RTN","TIUSRVL",25,0)
 N TIUPRM3,TIUT,TIUTP,XREF,TIUS,TIUCONT,TIUSTAT,TIUTYPE,TYPES
"RTN","TIUSRVL",26,0)
 K ^TMP("TIULIST",$J),^TMP("TIUI",$J)
"RTN","TIUSRVL",27,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIUSRVL",28,0)
 D DOCTYPE(.TIUTYPE,TYPE)
"RTN","TIUSRVL",29,0)
 D CHECKADD(.TIUTYPE)
"RTN","TIUSRVL",30,0)
 I +$D(TIUTYPE)'>0 S TIUY=0 Q
"RTN","TIUSRVL",31,0)
 M TYPES=TIUTYPE
"RTN","TIUSRVL",32,0)
 D STATUS(.TIUSTAT,$$UP^XLFSTR(STATUS))
"RTN","TIUSRVL",33,0)
 I +$D(TIUSTAT)'>0 S TIUY=0 Q
"RTN","TIUSRVL",34,0)
 M STATUS=TIUSTAT
"RTN","TIUSRVL",35,0)
 S EARLY=9999999-+$G(EARLY),LATE=9999999-$S(+$G(LATE):+$G(LATE),1:3333333)
"RTN","TIUSRVL",36,0)
 F TIUK=1:1:$L(SCREEN,";") D
"RTN","TIUSRVL",37,0)
 . S XREF=$P($P(SCREEN,";",TIUK),U)
"RTN","TIUSRVL",38,0)
 . I XREF'="ASUB" S TIUI=$P($P(SCREEN,";",TIUK),U,2) D GATHER(TIUI,.TYPES,.STATUS)
"RTN","TIUSRVL",39,0)
 . I XREF="ASUB" D
"RTN","TIUSRVL",40,0)
 . . S TIUI=$O(^TIU(8925,XREF,$P($P(SCREEN,";",TIUK),U,2)),-1)
"RTN","TIUSRVL",41,0)
 . . F  S TIUI=$O(^TIU(8925,XREF,TIUI)) Q:TIUI=""!(TIUI'[$P($P(SCREEN,";",TIUK),U,2))  D GATHER(TIUI,.TYPES,.STATUS)
"RTN","TIUSRVL",42,0)
 S TIUY=$NA(^TMP("TIULIST",$J))
"RTN","TIUSRVL",43,0)
 I +$O(^TMP("TIULIST",$J,0)) S (TIUI,TIUK)=0
"RTN","TIUSRVL",44,0)
 F  S TIUI=$O(^TMP("TIULIST",$J,TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVL",45,0)
 . S TIUJ=0 F  S TIUJ=$O(^TMP("TIULIST",$J,TIUI,TIUJ)) Q:+TIUJ'>0  D
"RTN","TIUSRVL",46,0)
 . . S TIUK=TIUK+1
"RTN","TIUSRVL",47,0)
 . . S ^TMP("TIULIST",$J,TIUK)=$G(^TMP("TIULIST",$J,TIUI,TIUJ))
"RTN","TIUSRVL",48,0)
 . . S ^TMP("TIULIDX",$J,TIUI,TIUJ)=TIUK K ^TMP("TIULIST",$J,TIUI,TIUJ)
"RTN","TIUSRVL",49,0)
 . . S:+$G(ROOTFLAG) $P(^TMP("TIULIST",$J),U)=TIUK
"RTN","TIUSRVL",50,0)
 . . S:TIUK=1&+$G(ROOTFLAG) $P(^TMP("TIULIST",$J),U,3)=(9999999-TIUI)
"RTN","TIUSRVL",51,0)
 . . S:+$G(ROOTFLAG) $P(^TMP("TIULIST",$J),U,2)=(9999999-TIUI)
"RTN","TIUSRVL",52,0)
 Q
"RTN","TIUSRVL",53,0)
GATHER(TIUI,TYPES,STATUS) ; Find/sort records for the list
"RTN","TIUSRVL",54,0)
 N TIUT,TIUTP,TIUS,TIUSTAT
"RTN","TIUSRVL",55,0)
 S TIUT=0 F  S TIUT=$O(TYPES(TIUT)) Q:+TIUT'>0  D
"RTN","TIUSRVL",56,0)
 . S TIUTP=+$G(TYPES(TIUT)) Q:TIUTP'>0
"RTN","TIUSRVL",57,0)
 . S TIUS=0 F  S TIUS=$O(STATUS(TIUS)) Q:+TIUS'>0  D
"RTN","TIUSRVL",58,0)
 . . S TIUSTAT=+$G(STATUS(TIUS))
"RTN","TIUSRVL",59,0)
 . . Q:+TIUSTAT'>0
"RTN","TIUSRVL",60,0)
 . . S TIUJ=LATE F  S TIUJ=$O(^TIU(8925,XREF,TIUI,TIUTP,TIUSTAT,TIUJ)) Q:+TIUJ'>0!(+TIUJ>EARLY)  D
"RTN","TIUSRVL",61,0)
 . . . S TIUIFN=0
"RTN","TIUSRVL",62,0)
 . . . F  S TIUIFN=$O(^TIU(8925,XREF,TIUI,TIUTP,TIUSTAT,TIUJ,TIUIFN)) Q:+TIUIFN'>0  D
"RTN","TIUSRVL",63,0)
 . . . . I TIUTP=81,(+TYPES>1),($P(TYPES(TIUT),U,3)="NOT PICKED"),'+$$DADINTYP(TIUIFN,.TYPES) Q
"RTN","TIUSRVL",64,0)
 . . . . ;I '$$CANDO^TIULP(TIUIFN,"VIEW") Q
"RTN","TIUSRVL",65,0)
 . . . . D ADDELMNT(TIUIFN,.TIUCNT)
"RTN","TIUSRVL",66,0)
 Q
"RTN","TIUSRVL",67,0)
DADINTYP(TIUDA,TYPES) ; Evaluates whether addendum's parent belongs is among
"RTN","TIUSRVL",68,0)
 ;                 the selected types
"RTN","TIUSRVL",69,0)
 N TIUI,TIUDTYP,TIUY S (TIUI,TIUY)=0
"RTN","TIUSRVL",70,0)
 S TIUDTYP=+$G(^TIU(8925,+$P($G(^TIU(8925,+TIUDA,0)),U,6),0))
"RTN","TIUSRVL",71,0)
 F  S TIUI=$O(TYPES(TIUI)) Q:+TIUI'>0!+TIUY  D
"RTN","TIUSRVL",72,0)
 . I +$P(TYPES(TIUI),U)=TIUDTYP S TIUY=1
"RTN","TIUSRVL",73,0)
 Q TIUY
"RTN","TIUSRVL",74,0)
ADDELMNT(DA,TIUCNT) ; Add each element to the list
"RTN","TIUSRVL",75,0)
 N DOC,LOC,PT,AUT,EDT,TIUPT,TIULST4,TIUREC,TIUR0,TIUR12,TIUR13
"RTN","TIUSRVL",76,0)
 N STATUS,EDTCNT,LOCTYP,TIUADT,TIUDDT
"RTN","TIUSRVL",77,0)
 S TIUR0=$G(^TIU(8925,+DA,0)),TIUR12=$G(^TIU(8925,+DA,12))
"RTN","TIUSRVL",78,0)
 S TIUR13=$G(^TIU(8925,+DA,13)),TIUPT=$G(^DPT(+$P(TIUR0,U,2),0))
"RTN","TIUSRVL",79,0)
 S DOC=$$PNAME^TIULC1(+TIUR0)
"RTN","TIUSRVL",80,0)
 I DOC="Addendum" S DOC=DOC_" to "_$$PNAME^TIULC1(+$G(^TIU(8925,+$P(TIUR0,U,6),0)))
"RTN","TIUSRVL",81,0)
 S STATUS=$$LOWER^TIULS($P(^TIU(8925.6,+$P(TIUR0,U,5),0),U))
"RTN","TIUSRVL",82,0)
 S LOC=$G(^SC(+$P(TIUR12,U,5),0)),LOCTYP=$P(LOC,U,3),LOC=$P(LOC,U)
"RTN","TIUSRVL",83,0)
 S TIUADT=$S(LOCTYP="W":"Adm: ",1:"Visit: ")_$$DATE^TIULS($P(TIUR0,U,7),"MM/DD/YY")
"RTN","TIUSRVL",84,0)
 S TIUDDT=$S(+$P(TIUR0,U,8):"Dis: ",1:"")_$$DATE^TIULS($P(TIUR0,U,8),"MM/DD/YY")
"RTN","TIUSRVL",85,0)
 S PT=$$NAME^TIULS($P(TIUPT,U),"LAST, FIRST MI")
"RTN","TIUSRVL",86,0)
 S TIULST4=$E($P(TIUPT,U,9),6,9)
"RTN","TIUSRVL",87,0)
 S TIULST4="("_$E(PT)_TIULST4_")"
"RTN","TIUSRVL",88,0)
 S AUT=$$SIGNAME^TIULS(+$P(TIUR12,U,2))
"RTN","TIUSRVL",89,0)
 S EDT=+TIUR13,EDTCNT=+$G(EDTCNT)+1
"RTN","TIUSRVL",90,0)
 F  Q:+$D(^TMP("TIULIST",$J,9999999-EDT,EDTCNT))'>0  S EDTCNT=EDTCNT+1
"RTN","TIUSRVL",91,0)
 S TIUCNT=+$G(TIUCNT)+1
"RTN","TIUSRVL",92,0)
 S TIUREC=DA_U_DOC_U_EDT_U_PT_" "_TIULST4_U_AUT_U_LOC_U_STATUS_U_TIUADT_U_TIUDDT
"RTN","TIUSRVL",93,0)
 S ^TMP("TIULIST",$J,9999999-EDT,EDTCNT)=TIUREC
"RTN","TIUSRVL",94,0)
 ;S TIUY(TIUCNT)=TIUREC
"RTN","TIUSRVL",95,0)
 Q
"RTN","TIUSRVL",96,0)
DOCTYPE(TIUY,DA,TYPE,TIUK) ; Get all descendent's of a given type
"RTN","TIUSRVL",97,0)
 N I,J,X,CURTYP,Y
"RTN","TIUSRVL",98,0)
 ; TIUK is STATIC
"RTN","TIUSRVL",99,0)
 S TIUK=+$G(TIUK)
"RTN","TIUSRVL",100,0)
 I $G(TYPE)']"" S TYPE="DOC"
"RTN","TIUSRVL",101,0)
 S CURTYP=$P(^TIU(8925.1,+DA,0),U,4)
"RTN","TIUSRVL",102,0)
 S TYPMATCH=$$TYPMATCH^TIULA1(TYPE,CURTYP)
"RTN","TIUSRVL",103,0)
 I +TYPMATCH S TIUK=+$G(TIUK)+1,TIUY(TIUK)=+DA_U_$$PNAME^TIULC1(+DA),TIUY=+$G(TIUY)+1
"RTN","TIUSRVL",104,0)
 S I=0 F  S I=$O(^TIU(8925.1,+DA,10,I)) Q:+I'>0  D
"RTN","TIUSRVL",105,0)
 . N J
"RTN","TIUSRVL",106,0)
 . S J=+$G(^TIU(8925.1,+DA,10,+I,0)) Q:+J'>0
"RTN","TIUSRVL",107,0)
 . D DOCTYPE(.TIUY,+J,TYPE,.TIUK)
"RTN","TIUSRVL",108,0)
 Q
"RTN","TIUSRVL",109,0)
CHECKADD(TYPES) ; Checks whether Addendum is included in the list of types
"RTN","TIUSRVL",110,0)
 N TIUI,HIT S (TIUI,HIT)=0
"RTN","TIUSRVL",111,0)
 F  S TIUI=$O(TYPES(TIUI)) Q:+TIUI'>0!+HIT  I $$UP^XLFSTR(TYPES(TIUI))="ADDENDUM" S HIT=1
"RTN","TIUSRVL",112,0)
 I +HIT'>0 S TYPES(TYPES+1)="81^Addendum^NOT PICKED",TYPES=TYPES+1
"RTN","TIUSRVL",113,0)
 Q
"RTN","TIUSRVL",114,0)
STATUS(TIUY,STATUS,INCLDESC) ; Get statuses
"RTN","TIUSRVL",115,0)
 N TIUI,TIUS,TIUSTAT S STATUS=$G(STATUS,"ALL")
"RTN","TIUSRVL",116,0)
 I STATUS'="ALL" D  Q
"RTN","TIUSRVL",117,0)
 . S TIUS=$O(^TIU(8925.6,"B",STATUS,0)) Q:+TIUS'>0
"RTN","TIUSRVL",118,0)
 . S TIUSTAT=$P($G(^TIU(8925.6,+TIUS,0)),U)
"RTN","TIUSRVL",119,0)
 . I $P(^TIU(8925.6,+TIUS,0),U,4)'="DEF" S TIUY(1)=TIUS_U_$$LOWER^TIULS(TIUSTAT)
"RTN","TIUSRVL",120,0)
 S STATUS=""
"RTN","TIUSRVL",121,0)
 F  S STATUS=$O(^TIU(8925.6,"B",STATUS)) Q:STATUS']""  D
"RTN","TIUSRVL",122,0)
 . S TIUS=0
"RTN","TIUSRVL",123,0)
 . F  S TIUS=$O(^TIU(8925.6,"B",STATUS,TIUS)) Q:+TIUS'>0  D
"RTN","TIUSRVL",124,0)
 . . S TIUI=+$G(TIUI)+1,TIUSTAT=$P($G(^TIU(8925.6,+TIUS,0)),U)
"RTN","TIUSRVL",125,0)
 . . I $P(^TIU(8925.6,+TIUS,0),U,4)'="DEF" D
"RTN","TIUSRVL",126,0)
 . . . S TIUY(TIUI)=TIUS_U_$$LOWER^TIULS(TIUSTAT)
"RTN","TIUSRVL",127,0)
 . . . I +$G(INCLDESC) D
"RTN","TIUSRVL",128,0)
 . . . . N TIUJ S TIUJ=0
"RTN","TIUSRVL",129,0)
 . . . . F  S TIUJ=$O(^TIU(8925.6,+TIUS,1,TIUJ)) Q:+TIUJ'>0  D
"RTN","TIUSRVL",130,0)
 . . . . . S TIUY(TIUI,1,TIUJ)=$G(^TIU(8925.6,+TIUS,1,+TIUJ,0))
"RTN","TIUSRVL",131,0)
 Q
"RTN","TIUSRVL1")
0^179^B17609186
"RTN","TIUSRVL1",1,0)
TIUSRVL1 ; SLC/JER - Server functions for lists ;7/9/96  12:47
"RTN","TIUSRVL1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRVL1",3,0)
NOTES(TIUY,DFN,EARLY,LATE,ROOTFLAG) ; Gets list of Notes
"RTN","TIUSRVL1",4,0)
 I $S(+$G(DFN)'>0:1,'$D(^DPT(+$G(DFN),0)):1,1:0) Q
"RTN","TIUSRVL1",5,0)
 D LIST(.TIUY,DFN,3,$G(EARLY),$G(LATE),$G(ROOTFLAG))
"RTN","TIUSRVL1",6,0)
 Q
"RTN","TIUSRVL1",7,0)
SUMMARY(TIUY,DFN,EARLY,LATE,ROOTFLAG) ; Gets list of Summaries
"RTN","TIUSRVL1",8,0)
 I $S(+$G(DFN)'>0:1,'$D(^DPT(+$G(DFN),0)):1,1:0) Q
"RTN","TIUSRVL1",9,0)
 D LIST(.TIUY,DFN,244,$G(EARLY),$G(LATE),$G(ROOTFLAG))
"RTN","TIUSRVL1",10,0)
 Q
"RTN","TIUSRVL1",11,0)
CONSULT(TIUY,DFN,EARLY,LATE,ROOTFLAG) ; Gets list of Consults
"RTN","TIUSRVL1",12,0)
 I $S(+$G(DFN)'>0:1,'$D(^DPT(+$G(DFN),0)):1,1:0) Q
"RTN","TIUSRVL1",13,0)
 D LIST(.TIUY,DFN,243,$G(EARLY),$G(LATE),$G(ROOTFLAG))
"RTN","TIUSRVL1",14,0)
 Q
"RTN","TIUSRVL1",15,0)
LIST(TIUY,DFN,TYPE,EARLY,LATE,ROOTFLAG) ; Build List
"RTN","TIUSRVL1",16,0)
 N TIUCNT,TIUDT,TIUI,TIUJ,TIUK,TIUP,TIUQ,TIUIFN,TIUREC,TIUPRM0,TIUPRM1
"RTN","TIUSRVL1",17,0)
 N TIUPRM3,TIUT,TIUTP,TIUS,TIUCONT
"RTN","TIUSRVL1",18,0)
 K ^TMP("TIULIST",$J),^TMP("TIUI",$J)
"RTN","TIUSRVL1",19,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIUSRVL1",20,0)
 I +$D(TYPE)'>0 S TIUY=0 Q
"RTN","TIUSRVL1",21,0)
 S EARLY=9999999-+$G(EARLY),LATE=9999999-$S(+$G(LATE):+$G(LATE),1:3333333)
"RTN","TIUSRVL1",22,0)
 S TIUI=0
"RTN","TIUSRVL1",23,0)
 F  S TIUI=$O(^TIU(8925,"APTCL",DFN,TYPE,TIUI)) Q:TIUI'>0!(TIUI>EARLY)  D
"RTN","TIUSRVL1",24,0)
 . D GATHER(TYPE,TIUI)
"RTN","TIUSRVL1",25,0)
 S TIUY=$NA(^TMP("TIULIST",$J))
"RTN","TIUSRVL1",26,0)
 I +$O(^TMP("TIULIST",$J,0)) S (TIUI,TIUK)=0
"RTN","TIUSRVL1",27,0)
 F  S TIUI=$O(^TMP("TIULIST",$J,TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVL1",28,0)
 . S TIUJ=0 F  S TIUJ=$O(^TMP("TIULIST",$J,TIUI,TIUJ)) Q:+TIUJ'>0  D
"RTN","TIUSRVL1",29,0)
 . . S TIUK=TIUK+1
"RTN","TIUSRVL1",30,0)
 . . S ^TMP("TIULIST",$J,TIUK)=$G(^TMP("TIULIST",$J,TIUI,TIUJ))
"RTN","TIUSRVL1",31,0)
 . . S ^TMP("TIULIDX",$J,TIUI,TIUJ)=TIUK K ^TMP("TIULIST",$J,TIUI,TIUJ)
"RTN","TIUSRVL1",32,0)
 . . S:+$G(ROOTFLAG) $P(^TMP("TIULIST",$J),U)=TIUK
"RTN","TIUSRVL1",33,0)
 . . S:TIUK=1&+$G(ROOTFLAG) $P(^TMP("TIULIST",$J),U,3)=(9999999-TIUI)
"RTN","TIUSRVL1",34,0)
 . . S:+$G(ROOTFLAG) $P(^TMP("TIULIST",$J),U,2)=(9999999-TIUI)
"RTN","TIUSRVL1",35,0)
 Q
"RTN","TIUSRVL1",36,0)
GATHER(TYPE,TIUI) ; Find/sort records for the list
"RTN","TIUSRVL1",37,0)
 N TIUDA
"RTN","TIUSRVL1",38,0)
 S TIUDA=0
"RTN","TIUSRVL1",39,0)
 F  S TIUDA=$O(^TIU(8925,"APTCL",DFN,TYPE,TIUI,TIUDA)) Q:+TIUDA'>0  D
"RTN","TIUSRVL1",40,0)
 . I +$$CANDO^TIULP(TIUDA,"VIEW")'>0 Q
"RTN","TIUSRVL1",41,0)
 . D ADDELMNT(TIUDA,.TIUCNT)
"RTN","TIUSRVL1",42,0)
 Q
"RTN","TIUSRVL1",43,0)
ADDELMNT(DA,TIUCNT) ; Add each element to the list
"RTN","TIUSRVL1",44,0)
 N DOC,LOC,PT,AUT,EDT,TIUPT,TIULST4,TIUREC,TIUR0,TIUR12,TIUR13
"RTN","TIUSRVL1",45,0)
 N STATUS,EDTCNT,LOCTYP,TIUADT,TIUDDT
"RTN","TIUSRVL1",46,0)
 S TIUR0=$G(^TIU(8925,+DA,0)),TIUR12=$G(^TIU(8925,+DA,12))
"RTN","TIUSRVL1",47,0)
 S TIUR13=$G(^TIU(8925,+DA,13)),TIUPT=$G(^DPT(+$P(TIUR0,U,2),0))
"RTN","TIUSRVL1",48,0)
 S DOC=$$PNAME^TIULC1(+TIUR0)
"RTN","TIUSRVL1",49,0)
 I DOC="Addendum" S DOC=DOC_" to "_$$PNAME^TIULC1(+$G(^TIU(8925,+$P(TIUR0,U,6),0)))
"RTN","TIUSRVL1",50,0)
 S STATUS=$$LOWER^TIULS($P(^TIU(8925.6,+$P(TIUR0,U,5),0),U))
"RTN","TIUSRVL1",51,0)
 S LOC=$G(^SC(+$P(TIUR12,U,5),0)),LOCTYP=$P(LOC,U,3),LOC=$P(LOC,U)
"RTN","TIUSRVL1",52,0)
 S TIUADT=$S(LOCTYP="W":"Adm: ",1:"Visit: ")_$$DATE^TIULS($P(TIUR0,U,7),"MM/DD/YY")
"RTN","TIUSRVL1",53,0)
 S TIUDDT=$S(+$P(TIUR0,U,8):"Dis: ",1:"")_$$DATE^TIULS($P(TIUR0,U,8),"MM/DD/YY")
"RTN","TIUSRVL1",54,0)
 S PT=$$NAME^TIULS($P(TIUPT,U),"LAST, FIRST MI")
"RTN","TIUSRVL1",55,0)
 S TIULST4=$E($P(TIUPT,U,9),6,9)
"RTN","TIUSRVL1",56,0)
 S TIULST4="("_$E(PT)_TIULST4_")"
"RTN","TIUSRVL1",57,0)
 S AUT=$$SIGNAME^TIULS(+$P(TIUR12,U,2))
"RTN","TIUSRVL1",58,0)
 S EDT=+TIUR13,EDTCNT=+$G(EDTCNT)+1
"RTN","TIUSRVL1",59,0)
 F  Q:+$D(^TMP("TIULIST",$J,9999999-EDT,EDTCNT))'>0  S EDTCNT=EDTCNT+1
"RTN","TIUSRVL1",60,0)
 S TIUCNT=+$G(TIUCNT)+1
"RTN","TIUSRVL1",61,0)
 S TIUREC=DA_U_DOC_U_EDT_U_PT_" "_TIULST4_U_AUT_U_LOC_U_STATUS_U_TIUADT_U_TIUDDT
"RTN","TIUSRVL1",62,0)
 S ^TMP("TIULIST",$J,9999999-EDT,EDTCNT)=TIUREC
"RTN","TIUSRVL1",63,0)
 ;S TIUY(TIUCNT)=TIUREC
"RTN","TIUSRVL1",64,0)
 Q
"RTN","TIUSRVL1",65,0)
DOCTYPE(TIUY,DA,TYPE,TIUK) ; Get all descendent's of a given type
"RTN","TIUSRVL1",66,0)
 N I,J,X,CURTYP,Y
"RTN","TIUSRVL1",67,0)
 ; TIUK is STATIC
"RTN","TIUSRVL1",68,0)
 S TIUK=+$G(TIUK)
"RTN","TIUSRVL1",69,0)
 I $G(TYPE)']"" S TYPE="DOC"
"RTN","TIUSRVL1",70,0)
 S CURTYP=$P(^TIU(8925.1,+DA,0),U,4)
"RTN","TIUSRVL1",71,0)
 S TYPMATCH=$$TYPMATCH^TIULA1(TYPE,CURTYP)
"RTN","TIUSRVL1",72,0)
 I +TYPMATCH S TIUK=+$G(TIUK)+1,TIUY(TIUK)=+DA_U_$$PNAME^TIULC1(+DA)
"RTN","TIUSRVL1",73,0)
 S I=0 F  S I=$O(^TIU(8925.1,+DA,10,I)) Q:+I'>0  D
"RTN","TIUSRVL1",74,0)
 . N J
"RTN","TIUSRVL1",75,0)
 . S J=+$G(^TIU(8925.1,+DA,10,+I,0)) Q:+J'>0
"RTN","TIUSRVL1",76,0)
 . D DOCTYPE(.TIUY,+J,TYPE,.TIUK)
"RTN","TIUSRVL1",77,0)
 Q
"RTN","TIUSRVL1",78,0)
STATUS(TIUY,STATUS,INCLDESC) ; Get statuses
"RTN","TIUSRVL1",79,0)
 N TIUI,TIUS,TIUSTAT S STATUS=$G(STATUS,"ALL")
"RTN","TIUSRVL1",80,0)
 I STATUS'="ALL" D  Q
"RTN","TIUSRVL1",81,0)
 . S TIUS=$O(^TIU(8925.6,"B",STATUS,0)) Q:+TIUS'>0
"RTN","TIUSRVL1",82,0)
 . S TIUSTAT=$P($G(^TIU(8925.6,+TIUS,0)),U)
"RTN","TIUSRVL1",83,0)
 . I $P(^TIU(8925.6,+TIUS,0),U,4)'="DEF" S TIUY(1)=TIUS_U_$$LOWER^TIULS(TIUSTAT)
"RTN","TIUSRVL1",84,0)
 S STATUS=""
"RTN","TIUSRVL1",85,0)
 F  S STATUS=$O(^TIU(8925.6,"B",STATUS)) Q:STATUS']""  D
"RTN","TIUSRVL1",86,0)
 . S TIUS=0
"RTN","TIUSRVL1",87,0)
 . F  S TIUS=$O(^TIU(8925.6,"B",STATUS,TIUS)) Q:+TIUS'>0  D
"RTN","TIUSRVL1",88,0)
 . . S TIUI=+$G(TIUI)+1,TIUSTAT=$P($G(^TIU(8925.6,+TIUS,0)),U)
"RTN","TIUSRVL1",89,0)
 . . I $P(^TIU(8925.6,+TIUS,0),U,4)'="DEF" D
"RTN","TIUSRVL1",90,0)
 . . . S TIUY(TIUI)=TIUS_U_$$LOWER^TIULS(TIUSTAT)
"RTN","TIUSRVL1",91,0)
 . . . I +$G(INCLDESC) D
"RTN","TIUSRVL1",92,0)
 . . . . N TIUJ S TIUJ=0
"RTN","TIUSRVL1",93,0)
 . . . . F  S TIUJ=$O(^TIU(8925.6,+TIUS,1,TIUJ)) Q:+TIUJ'>0  D
"RTN","TIUSRVL1",94,0)
 . . . . . S TIUY(TIUI,1,TIUJ)=$G(^TIU(8925.6,+TIUS,1,+TIUJ,0))
"RTN","TIUSRVL1",95,0)
 Q
"RTN","TIUSRVLC")
0^180^B10549996
"RTN","TIUSRVLC",1,0)
TIUSRVLC ; SLC/JER - Server functions for lists ;06/19/97 16:22
"RTN","TIUSRVLC",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRVLC",3,0)
NOTES(TIUY,DFN,EARLY,LATE,ROOTFLAG) ; Gets list of Notes
"RTN","TIUSRVLC",4,0)
 I $S(+$G(DFN)'>0:1,'$D(^DPT(+$G(DFN),0)):1,1:0) Q
"RTN","TIUSRVLC",5,0)
 D LIST(.TIUY,3,DFN,$G(EARLY),$G(LATE),$G(ROOTFLAG))
"RTN","TIUSRVLC",6,0)
 Q
"RTN","TIUSRVLC",7,0)
SUMMARY(TIUY,DFN,EARLY,LATE,ROOTFLAG) ; Gets list of Summaries
"RTN","TIUSRVLC",8,0)
 I $S(+$G(DFN)'>0:1,'$D(^DPT(+$G(DFN),0)):1,1:0) Q
"RTN","TIUSRVLC",9,0)
 D LIST(.TIUY,244,DFN,$G(EARLY),$G(LATE),$G(ROOTFLAG))
"RTN","TIUSRVLC",10,0)
 Q
"RTN","TIUSRVLC",11,0)
CONSULT(TIUY,DFN,EARLY,LATE,ROOTFLAG) ; Gets list of Consults
"RTN","TIUSRVLC",12,0)
 I $S(+$G(DFN)'>0:1,'$D(^DPT(+$G(DFN),0)):1,1:0) Q
"RTN","TIUSRVLC",13,0)
 D LIST(.TIUY,243,STATUS,QSTR,$G(EARLY),$G(LATE),$G(ROOTFLAG))
"RTN","TIUSRVLC",14,0)
 Q
"RTN","TIUSRVLC",15,0)
LIST(TIUY,CLASS,DFN,EARLY,LATE,ROOTFLAG) ; Build List
"RTN","TIUSRVLC",16,0)
 N TIUCNT,TIUDT,TIUI,TIUJ,TIUK,TIUP,TIUQ,TIUREC,TIUPRM0,TIUPRM1
"RTN","TIUSRVLC",17,0)
 N TIUPRM3,TIUT,TIUTP,XREF,TIUS,TIUCONT,TIUSTAT,TIUTYPE
"RTN","TIUSRVLC",18,0)
 K ^TMP("TIULIST",$J),^TMP("TIUI",$J)
"RTN","TIUSRVLC",19,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIUSRVLC",20,0)
 S EARLY=9999999-+$G(EARLY)
"RTN","TIUSRVLC",21,0)
 S (TIUI,LATE)=9999999-$S(+$G(LATE):+$G(LATE),1:3333333)
"RTN","TIUSRVLC",22,0)
 F  S TIUI=$O(^TIU(8925,"APTCL",DFN,CLASS,TIUI)) Q:+TIUI'>0!(+TIUI>EARLY)  D GATHER(DFN,CLASS,TIUI,ROOTFLAG)
"RTN","TIUSRVLC",23,0)
 I +$O(^TMP("TIULIST",$J,0)) S TIUY=$NA(^TMP("TIULIST",$J)),(TIUI,TIUK)=0
"RTN","TIUSRVLC",24,0)
 Q
"RTN","TIUSRVLC",25,0)
GATHER(DFN,CLASS,TIUI,ROOTFLAG) ; Find/sort records for the list
"RTN","TIUSRVLC",26,0)
 N TIUDA
"RTN","TIUSRVLC",27,0)
 I '$D(TIUDPRM0) D SETPARM^TIULE
"RTN","TIUSRVLC",28,0)
 S TIUDA=0
"RTN","TIUSRVLC",29,0)
 F  S TIUDA=$O(^TIU(8925,"APTCL",DFN,CLASS,TIUI,TIUDA)) Q:+TIUDA'>0  D
"RTN","TIUSRVLC",30,0)
 . I ($P(TIUPRM0,U,6)="S"),(+$$CANDO^TIULP(TIUDA,"VIEW")'>0) Q
"RTN","TIUSRVLC",31,0)
 . D ADDELMNT(TIUDA,.TIUCNT,ROOTFLAG)
"RTN","TIUSRVLC",32,0)
 Q
"RTN","TIUSRVLC",33,0)
ADDELMNT(DA,TIUCNT,ROOTFLAG) ; Add each element to the list
"RTN","TIUSRVLC",34,0)
 N DOC,LOC,PT,AUT,EDT,TIUPT,TIULST4,TIUREC,TIUR0,TIUR12,TIUR13
"RTN","TIUSRVLC",35,0)
 N STATUS,EDTCNT,LOCTYP,TIUADT,TIUDDT,TIUSUBJ
"RTN","TIUSRVLC",36,0)
 S TIUR0=$G(^TIU(8925,+DA,0)),TIUR12=$G(^TIU(8925,+DA,12))
"RTN","TIUSRVLC",37,0)
 S TIUR13=$G(^TIU(8925,+DA,13)),TIUPT=$G(^DPT(+$P(TIUR0,U,2),0))
"RTN","TIUSRVLC",38,0)
 S TIUSUBJ=$G(^TIU(8925,+DA,17))
"RTN","TIUSRVLC",39,0)
 I '+$P(TIUR0,U,7) D
"RTN","TIUSRVLC",40,0)
 . S $P(TIUR0,U,7)=+$G(^AUPNVSIT(+$P(TIUR0,U,3),0))
"RTN","TIUSRVLC",41,0)
 . I '+$P(TIUR0,U,7) S $P(TIUR0,U,7)=""
"RTN","TIUSRVLC",42,0)
 S DOC=$$PNAME^TIULC1(+TIUR0)
"RTN","TIUSRVLC",43,0)
 I DOC="Addendum" S DOC=DOC_" to "_$$PNAME^TIULC1(+$G(^TIU(8925,+$P(TIUR0,U,6),0)))
"RTN","TIUSRVLC",44,0)
 I +$$HASADDEN^TIULC1(+DA) S DOC="+ "_DOC
"RTN","TIUSRVLC",45,0)
 I +$$URGENCY^TIURM(+DA)=1 S DOC=$S(DOC["+":"*",1:"* ")_DOC
"RTN","TIUSRVLC",46,0)
 S STATUS=$$LOWER^TIULS($P($G(^TIU(8925.6,+$P(TIUR0,U,5),0)),U))
"RTN","TIUSRVLC",47,0)
 S LOC=$G(^SC(+$P(TIUR12,U,5),0)),LOCTYP=$P(LOC,U,3),LOC=$P(LOC,U)
"RTN","TIUSRVLC",48,0)
 S TIUADT=$S(LOCTYP="W":"Adm: ",1:"Visit: ")_$$DATE^TIULS($P(TIUR0,U,7),"MM/DD/YY")
"RTN","TIUSRVLC",49,0)
 S TIUDDT=$S(+$P(TIUR0,U,8):"Dis: ",1:"")_$$DATE^TIULS($P(TIUR0,U,8),"MM/DD/YY")
"RTN","TIUSRVLC",50,0)
 S PT=$$NAME^TIULS($P(TIUPT,U),"LAST, FIRST MI")
"RTN","TIUSRVLC",51,0)
 S TIULST4=$E($P(TIUPT,U,9),6,9)
"RTN","TIUSRVLC",52,0)
 S TIULST4="("_$E(PT)_TIULST4_")"
"RTN","TIUSRVLC",53,0)
 S AUT=$$SIGNAME^TIULS(+$P(TIUR12,U,2))
"RTN","TIUSRVLC",54,0)
 S EDT=+TIUR13
"RTN","TIUSRVLC",55,0)
 S TIUCNT=+$G(TIUCNT)+1
"RTN","TIUSRVLC",56,0)
 S TIUREC=DA_U_DOC_U_EDT_U_PT_" "_TIULST4_U_AUT_U_LOC_U_STATUS_U_TIUADT_U_TIUDDT_U
"RTN","TIUSRVLC",57,0)
 I ($L(TIUREC)+$L(TIUSUBJ))>255 S TIUSUBJ=$E(TIUSUBJ,1,(255-$L(TIUREC)))
"RTN","TIUSRVLC",58,0)
 S TIUREC=TIUREC_TIUSUBJ
"RTN","TIUSRVLC",59,0)
 S ^TMP("TIULIST",$J,TIUCNT)=TIUREC
"RTN","TIUSRVLC",60,0)
 S:+$G(ROOTFLAG) $P(^TMP("TIULIST",$J),U)=TIUCNT
"RTN","TIUSRVLC",61,0)
 S:+$G(ROOTFLAG)&(TIUCNT=1) $P(^TMP("TIULIST",$J),U,3)=EDT
"RTN","TIUSRVLC",62,0)
 S:+$G(ROOTFLAG) $P(^TMP("TIULIST",$J),U,2)=EDT
"RTN","TIUSRVLC",63,0)
 Q
"RTN","TIUSRVLL")
0^219^B19714213
"RTN","TIUSRVLL",1,0)
TIUSRVLL ; SLC/JER - Server functions for LOCAL lists ;10/11/94  11:09
"RTN","TIUSRVLL",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRVLL",3,0)
LIST(TIUY,CLASS,DFN,EARLY,LATE) ; Build List
"RTN","TIUSRVLL",4,0)
 N TIUCNT,TIUDT,TIUI,TIUJ,TIUK,TIUP,TIUQ,TIUREC,TIUPRM0,TIUPRM1
"RTN","TIUSRVLL",5,0)
 N TIUPRM3,TIUT,TIUTP,XREF,TIUS,TIUCONT,TIUSTAT,TIUTYPE
"RTN","TIUSRVLL",6,0)
 I '$D(TIUPRM0) D SETPARM^TIULE
"RTN","TIUSRVLL",7,0)
 S EARLY=9999999-+$G(EARLY),TIUCNT=0
"RTN","TIUSRVLL",8,0)
 S (TIUI,LATE)=9999999-$S(+$G(LATE):+$G(LATE),1:3333333)
"RTN","TIUSRVLL",9,0)
 F  S TIUI=$O(^TIU(8925,"APTCL",DFN,CLASS,TIUI)) Q:+TIUI'>0!(+TIUI>EARLY)  D GATHER(.TIUY,DFN,CLASS,TIUI)
"RTN","TIUSRVLL",10,0)
 Q
"RTN","TIUSRVLL",11,0)
GATHER(TIUY,DFN,CLASS,TIUI) ; Find/sort records for the list
"RTN","TIUSRVLL",12,0)
 N TIUDA
"RTN","TIUSRVLL",13,0)
 S TIUDA=0
"RTN","TIUSRVLL",14,0)
 F  S TIUDA=$O(^TIU(8925,"APTCL",DFN,CLASS,TIUI,TIUDA)) Q:+TIUDA'>0  D
"RTN","TIUSRVLL",15,0)
 . I ($P(TIUPRM0,U,6)="S"),(+$$CANDO^TIULP(TIUDA,"VIEW")'>0) Q
"RTN","TIUSRVLL",16,0)
 . I +$G(^TIU(8925,+TIUDA,0))'>0 K ^TIU(8925,"APTCL",DFN,CLASS,TIUI,TIUDA) Q
"RTN","TIUSRVLL",17,0)
 . I +$G(^TIU(8925,+TIUDA,0))=81 Q
"RTN","TIUSRVLL",18,0)
 . S TIUCNT=+$G(TIUCNT)+1
"RTN","TIUSRVLL",19,0)
 . S TIUY(TIUCNT)=TIUDA,TIUY=TIUCNT
"RTN","TIUSRVLL",20,0)
 Q
"RTN","TIUSRVLL",21,0)
 ;
"RTN","TIUSRVLL",22,0)
CONTEXT(TIUY,CLASS,CONTEXT,DFN,EARLY,LATE,PERSON,OCCLIM,SEQUENCE) ; main
"RTN","TIUSRVLL",23,0)
 ; --- Call with:  TIUY     - RETURN ARRAY pass by reference
"RTN","TIUSRVLL",24,0)
 ;                 CLASS    - Pointer to TIU DOCUMENT DEFINITION #8925.1
"RTN","TIUSRVLL",25,0)
 ;                 CONTEXT  - 1=All Signed (by PT),
"RTN","TIUSRVLL",26,0)
 ;                          - 2="Unsigned (by PT&(AUTHOR!TANSCRIBER))
"RTN","TIUSRVLL",27,0)
 ;                          - 3="Uncosigned (by PT&EXPECTED COSIGNER
"RTN","TIUSRVLL",28,0)
 ;                          - 4="Signed notes (by PT&selected author)
"RTN","TIUSRVLL",29,0)
 ;                          - 5="Signed notes (by PT&date range)
"RTN","TIUSRVLL",30,0)
 ;                 DFN      - Pointer to Patient (#2)
"RTN","TIUSRVLL",31,0)
 ;                [EARLY]   - FM date/time to begin search
"RTN","TIUSRVLL",32,0)
 ;                [LATE]    - FM date/time to end search
"RTN","TIUSRVLL",33,0)
 ;                [PERSON]  - Pointer to file 200 (DUZ if not passed)
"RTN","TIUSRVLL",34,0)
 ;                [OCCLIM]  - Occurrence Limit (optional)
"RTN","TIUSRVLL",35,0)
 ;                [SEQUENCE]- "A"=ascending (Regular date/time)
"RTN","TIUSRVLL",36,0)
 ;                          - "D"=descending (Reverse date/time) (dflt)
"RTN","TIUSRVLL",37,0)
 K TIUY S TIUY=0
"RTN","TIUSRVLL",38,0)
 I $G(CONTEXT)'>0 Q
"RTN","TIUSRVLL",39,0)
 I $G(CLASS)'>0 Q
"RTN","TIUSRVLL",40,0)
 S:+$G(EARLY)'>0 EARLY=0
"RTN","TIUSRVLL",41,0)
 S:+$G(LATE)'>0 LATE=5000000
"RTN","TIUSRVLL",42,0)
 S:+$G(PERSON)'>0 PERSON=DUZ
"RTN","TIUSRVLL",43,0)
 S:$G(SEQUENCE)']"" SEQUENCE="D"
"RTN","TIUSRVLL",44,0)
 S:+$G(OCCLIM)'>0 OCCLIM=9999999
"RTN","TIUSRVLL",45,0)
 S DFN=+$G(DFN)
"RTN","TIUSRVLL",46,0)
 S EARLY=9999999-EARLY,LATE=9999999-LATE ; CHANGE TO REVERSE DATES
"RTN","TIUSRVLL",47,0)
 ;
"RTN","TIUSRVLL",48,0)
 I CONTEXT=1!(CONTEXT=5) D  Q
"RTN","TIUSRVLL",49,0)
 . D ACLPT(.TIUY,CLASS,DFN,LATE,EARLY,OCCLIM,SEQUENCE)
"RTN","TIUSRVLL",50,0)
 ;
"RTN","TIUSRVLL",51,0)
 I CONTEXT=2 D  Q
"RTN","TIUSRVLL",52,0)
 . I DFN>0 D  Q
"RTN","TIUSRVLL",53,0)
 . . D ACLAU(.TIUY,CLASS,PERSON,DFN,LATE,EARLY,SEQUENCE)
"RTN","TIUSRVLL",54,0)
 . F DFN=0:0 S DFN=$O(^TIU(8925,"ACLAU",CLASS,PERSON,DFN)) Q:DFN'>0  D ACLAU(.TIUY,CLASS,PERSON,DFN,LATE,EARLY,SEQUENCE)
"RTN","TIUSRVLL",55,0)
 ;
"RTN","TIUSRVLL",56,0)
 I CONTEXT=3 D  Q
"RTN","TIUSRVLL",57,0)
 . I DFN>0 D  Q
"RTN","TIUSRVLL",58,0)
 . . D ACLEC(.TIUY,CLASS,PERSON,DFN,LATE,EARLY,SEQUENCE)
"RTN","TIUSRVLL",59,0)
 . F DFN=0:0 S DFN=$O(^TIU(8925,"ACLEC",CLASS,PERSON,DFN)) Q:DFN'>0  D ACLEC(.TIUY,CLASS,PERSON,DFN,LATE,EARLY,SEQUENCE)
"RTN","TIUSRVLL",60,0)
 ;
"RTN","TIUSRVLL",61,0)
 I CONTEXT=4 D  Q
"RTN","TIUSRVLL",62,0)
 . I DFN>0 D  Q
"RTN","TIUSRVLL",63,0)
 . . D ACLSB(.TIUY,CLASS,PERSON,DFN,LATE,EARLY,SEQUENCE)
"RTN","TIUSRVLL",64,0)
 . F DFN=0:0 S DFN=$O(^TIU(8925,"ACLSB",CLASS,PERSON,DFN)) Q:DFN'>0  D ACLSB(.TIUY,CLASS,PERSON,DFN,LATE,EARLY,SEQUENCE)
"RTN","TIUSRVLL",65,0)
 Q
"RTN","TIUSRVLL",66,0)
 ;
"RTN","TIUSRVLL",67,0)
ACLPT(ARRAY,CLASS,DFN,TIME1,TIME2,OCCLIM,SEQUENCE) ; Signed, by patient
"RTN","TIUSRVLL",68,0)
 N DATTIM,DA,ROOT,TIUI
"RTN","TIUSRVLL",69,0)
 S ROOT=$NA(^TIU(8925,"ACLPT",CLASS,DFN))
"RTN","TIUSRVLL",70,0)
 S DATTIM=TIME1-.0000001
"RTN","TIUSRVLL",71,0)
 F  S DATTIM=$O(@ROOT@(DATTIM)) Q:$S(+DATTIM'>0:1,+DATTIM>TIME2:1,+$G(ARRAY)'<OCCLIM:1,1:0)  D
"RTN","TIUSRVLL",72,0)
 . F DA=0:0 S DA=$O(@ROOT@(DATTIM,DA)) Q:DA'>0  D
"RTN","TIUSRVLL",73,0)
 . . I +$G(^TIU(8925,+DA,0))=81 Q
"RTN","TIUSRVLL",74,0)
 . . I +$G(^TIU(8925,+DA,0))'>0 K @ROOT@(DATTIM,DA) Q
"RTN","TIUSRVLL",75,0)
 . . S TIUI=$S(SEQUENCE="D":+$G(TIUI)+1,1:+$G(TIUI)-1)
"RTN","TIUSRVLL",76,0)
 . . S ARRAY=ARRAY+1,ARRAY(TIUI)=DA
"RTN","TIUSRVLL",77,0)
 Q
"RTN","TIUSRVLL",78,0)
 ;
"RTN","TIUSRVLL",79,0)
ACLAU(ARRAY,CLASS,AUTHOR,DFN,TIME1,TIME2,SEQUENCE) ; Unsigned
"RTN","TIUSRVLL",80,0)
 N DATTIM,DA,ROOT,TIUI
"RTN","TIUSRVLL",81,0)
 S ROOT=$NA(^TIU(8925,"ACLAU",CLASS,AUTHOR,DFN))
"RTN","TIUSRVLL",82,0)
 S DATTIM=TIME1-.0000001
"RTN","TIUSRVLL",83,0)
 F  S DATTIM=$O(@ROOT@(DATTIM)) Q:DATTIM'>0!(DATTIM>TIME2)  D
"RTN","TIUSRVLL",84,0)
 . S DA=0 F  S DA=$O(@ROOT@(DATTIM,DA)) Q:DA'>0  D
"RTN","TIUSRVLL",85,0)
 . . I +$P($G(^TIU(8925,DA,0)),U,5)>6 K @ROOT@(DATTIM,DA) Q
"RTN","TIUSRVLL",86,0)
 . . I +$G(^TIU(8925,DA,0))'>0 K @ROOT@(DATTIM,DA) Q
"RTN","TIUSRVLL",87,0)
 . . S TIUI=$S(SEQUENCE="D":+$G(TIUI)+1,1:+$G(TIUI)-1)
"RTN","TIUSRVLL",88,0)
 . . S ARRAY=ARRAY+1,ARRAY(TIUI)=DA
"RTN","TIUSRVLL",89,0)
 Q
"RTN","TIUSRVLL",90,0)
ACLEC(ARRAY,CLASS,EXCOSIGN,DFN,TIME1,TIME2,SEQUENCE) ; Uncosigned
"RTN","TIUSRVLL",91,0)
 N DATTIM,DA,ROOT,TIUI
"RTN","TIUSRVLL",92,0)
 S ROOT=$NA(^TIU(8925,"ACLEC",CLASS,EXCOSIGN,DFN))
"RTN","TIUSRVLL",93,0)
 S DATTIM=TIME1-.0000001
"RTN","TIUSRVLL",94,0)
 F  S DATTIM=$O(@ROOT@(DATTIM)) Q:DATTIM'>0!(DATTIM>TIME2)  D
"RTN","TIUSRVLL",95,0)
 . S DA=0 F  S DA=$O(@ROOT@(DATTIM,DA)) Q:DA'>0  D
"RTN","TIUSRVLL",96,0)
 . . I +$G(^TIU(8925,DA,0))'>0 K @ROOT@(DATTIM,DA)
"RTN","TIUSRVLL",97,0)
 . . S TIUI=$S(SEQUENCE="D":+$G(TIUI)+1,1:+$G(TIUI)-1)
"RTN","TIUSRVLL",98,0)
 . . S ARRAY=ARRAY+1,ARRAY(TIUI)=DA
"RTN","TIUSRVLL",99,0)
 Q
"RTN","TIUSRVLL",100,0)
ACLSB(ARRAY,CLASS,SIGNEDBY,DFN,TIME1,TIME2,SEQUENCE) ; Signed, by author
"RTN","TIUSRVLL",101,0)
 N DATTIM,DA,ROOT,TIUI
"RTN","TIUSRVLL",102,0)
 S ROOT=$NA(^TIU(8925,"ACLSB",CLASS,SIGNEDBY,DFN))
"RTN","TIUSRVLL",103,0)
 S DATTIM=TIME1-.0000001
"RTN","TIUSRVLL",104,0)
 F  S DATTIM=$O(@ROOT@(DATTIM)) Q:DATTIM'>0!(DATTIM>TIME2)  D
"RTN","TIUSRVLL",105,0)
 . S DA=0 F  S DA=$O(@ROOT@(DATTIM,DA)) Q:DA'>0  D
"RTN","TIUSRVLL",106,0)
 . . I +$G(^TIU(8925,DA,0))'>0 K @ROOT@(DATTIM,DA)
"RTN","TIUSRVLL",107,0)
 . . S TIUI=$S(SEQUENCE="D":+$G(TIUI)+1,1:+$G(TIUI)-1)
"RTN","TIUSRVLL",108,0)
 . . S ARRAY=ARRAY+1,ARRAY(TIUI)=DA
"RTN","TIUSRVLL",109,0)
 Q
"RTN","TIUSRVLO")
0^220^B27563071
"RTN","TIUSRVLO",1,0)
TIUSRVLO ; SLC/JER - Server functions for lists for CPRS ;06/19/96 16:22
"RTN","TIUSRVLO",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRVLO",3,0)
NOTES(TIUY,DFN,EARLY,LATE,PERSON,SEQUENCE) ; Get list of notes
"RTN","TIUSRVLO",4,0)
 N TIUPREF,TIUOCC S TIUPREF=$$PERSPRF^TIULE(DUZ)
"RTN","TIUSRVLO",5,0)
 S TIUOCC=$P(TIUPREF,U,10),PERSON=$S(+$G(PERSON):+$G(PERSON),1:+$G(DUZ))
"RTN","TIUSRVLO",6,0)
 S SEQUENCE=$S($G(SEQUENCE)]"":$G(SEQUENCE),1:"D")
"RTN","TIUSRVLO",7,0)
 D CONTEXT(.TIUY,3,1,DFN,$G(EARLY),$G(LATE),PERSON,TIUOCC,SEQUENCE)
"RTN","TIUSRVLO",8,0)
 Q
"RTN","TIUSRVLO",9,0)
SUMMARY(TIUY,DFN,EARLY,LATE) ; Get list of notes
"RTN","TIUSRVLO",10,0)
 N TIUPREF,TIUOCC S TIUPREF=$$PERSPRF^TIULE(DUZ)
"RTN","TIUSRVLO",11,0)
 S TIUOCC=$P(TIUPREF,U,10),PERSON=$S(+$G(PERSON):+$G(PERSON),1:+$G(DUZ))
"RTN","TIUSRVLO",12,0)
 S SEQUENCE=$S($G(SEQUENCE)]"":$G(SEQUENCE),1:"D")
"RTN","TIUSRVLO",13,0)
 D CONTEXT(.TIUY,244,1,DFN,$G(EARLY),$G(LATE),PERSON,TIUOCC,SEQUENCE)
"RTN","TIUSRVLO",14,0)
 Q
"RTN","TIUSRVLO",15,0)
CONTEXT(TIUY,CLASS,CONTEXT,DFN,EARLY,LATE,PERSON,OCCLIM,SEQUENCE) ; main
"RTN","TIUSRVLO",16,0)
 ; --- Call with:  TIUY     - RETURN ARRAY pass by reference
"RTN","TIUSRVLO",17,0)
 ;                 CLASS    - Pointer to TIU DOCUMENT DEFINITION #8925.1
"RTN","TIUSRVLO",18,0)
 ;                 CONTEXT  - 1=All Signed (by PT),
"RTN","TIUSRVLO",19,0)
 ;                          - 2="Unsigned (by PT&(AUTHOR!TANSCRIBER))
"RTN","TIUSRVLO",20,0)
 ;                          - 3="Uncosigned (by PT&EXPECTED COSIGNER
"RTN","TIUSRVLO",21,0)
 ;                          - 4="Signed notes (by PT&selected author)
"RTN","TIUSRVLO",22,0)
 ;                          - 5="Signed notes (by PT&date range)
"RTN","TIUSRVLO",23,0)
 ;                 DFN      - Pointer to Patient (#2)
"RTN","TIUSRVLO",24,0)
 ;                [EARLY]   - FM date/time to begin search
"RTN","TIUSRVLO",25,0)
 ;                [LATE]    - FM date/time to end search
"RTN","TIUSRVLO",26,0)
 ;                [PERSON]  - Pointer to file 200 (DUZ if not passed)
"RTN","TIUSRVLO",27,0)
 ;                [OCCLIM]  - Occurrence Limit (optional)
"RTN","TIUSRVLO",28,0)
 ;                [SEQUENCE]- "A"=ascending (Regular date/time)
"RTN","TIUSRVLO",29,0)
 ;                          - "D"=descending (Reverse date/time) (dflt)
"RTN","TIUSRVLO",30,0)
 K TIUY S TIUY=0
"RTN","TIUSRVLO",31,0)
 I $G(CONTEXT)'>0 Q
"RTN","TIUSRVLO",32,0)
 I $G(CLASS)'>0 Q
"RTN","TIUSRVLO",33,0)
 S:+$G(EARLY)'>0!(+$G(CONTEXT)=1) EARLY=0
"RTN","TIUSRVLO",34,0)
 S:+$G(LATE)'>0!(+$G(CONTEXT)=1) LATE=5000000
"RTN","TIUSRVLO",35,0)
 S:+$G(PERSON)'>0 PERSON=DUZ
"RTN","TIUSRVLO",36,0)
 S:$G(SEQUENCE)']"" SEQUENCE="D"
"RTN","TIUSRVLO",37,0)
 S:+$G(OCCLIM)'>0 OCCLIM=9999999
"RTN","TIUSRVLO",38,0)
 S DFN=+$G(DFN)
"RTN","TIUSRVLO",39,0)
 S EARLY=9999999-EARLY,LATE=9999999-LATE ; CHANGE TO REVERSE DATES
"RTN","TIUSRVLO",40,0)
 ;
"RTN","TIUSRVLO",41,0)
 I CONTEXT=1!(CONTEXT=5) D  Q
"RTN","TIUSRVLO",42,0)
 . D ACLPT(.TIUY,CLASS,DFN,LATE,EARLY,OCCLIM,SEQUENCE)
"RTN","TIUSRVLO",43,0)
 ;
"RTN","TIUSRVLO",44,0)
 I CONTEXT=2 D  Q
"RTN","TIUSRVLO",45,0)
 . I DFN>0 D  Q
"RTN","TIUSRVLO",46,0)
 . . D ACLAU(.TIUY,CLASS,PERSON,DFN,LATE,EARLY,SEQUENCE)
"RTN","TIUSRVLO",47,0)
 . F  S DFN=$O(^TIU(8925,"ACLAU",CLASS,PERSON,DFN)) Q:DFN'>0  D ACLAU(.TIUY,CLASS,PERSON,DFN,LATE,EARLY,SEQUENCE)
"RTN","TIUSRVLO",48,0)
 ;
"RTN","TIUSRVLO",49,0)
 I CONTEXT=3 D  Q
"RTN","TIUSRVLO",50,0)
 . I DFN>0 D  Q
"RTN","TIUSRVLO",51,0)
 . . D ACLEC(.TIUY,CLASS,PERSON,DFN,LATE,EARLY,SEQUENCE)
"RTN","TIUSRVLO",52,0)
 . F  S DFN=$O(^TIU(8925,"ACLEC",CLASS,PERSON,DFN)) Q:DFN'>0  D ACLEC(.TIUY,CLASS,PERSON,DFN,LATE,EARLY,SEQUENCE)
"RTN","TIUSRVLO",53,0)
 ;
"RTN","TIUSRVLO",54,0)
 I CONTEXT=4 D  Q
"RTN","TIUSRVLO",55,0)
 . I DFN>0 D  Q
"RTN","TIUSRVLO",56,0)
 . . D ACLSB(.TIUY,CLASS,PERSON,DFN,LATE,EARLY,SEQUENCE)
"RTN","TIUSRVLO",57,0)
 . F  S DFN=$O(^TIU(8925,"ACLSB",CLASS,PERSON,DFN)) Q:DFN'>0  D ACLSB(.TIUY,CLASS,PERSON,DFN,LATE,EARLY,SEQUENCE)
"RTN","TIUSRVLO",58,0)
 Q
"RTN","TIUSRVLO",59,0)
 ;
"RTN","TIUSRVLO",60,0)
ACLPT(ARRAY,CLASS,DFN,TIME1,TIME2,OCCLIM,SEQUENCE) ; Signed, by patient
"RTN","TIUSRVLO",61,0)
 N DATTIM,DA,ROOT,TIUI
"RTN","TIUSRVLO",62,0)
 S ROOT=$NA(^TIU(8925,"ACLPT",CLASS,DFN))
"RTN","TIUSRVLO",63,0)
 S DATTIM=TIME1-.0000001
"RTN","TIUSRVLO",64,0)
 F  S DATTIM=$O(@ROOT@(DATTIM)) Q:$S(+DATTIM'>0:1,+DATTIM>TIME2:1,+$G(ARRAY)'<OCCLIM:1,1:0)  D
"RTN","TIUSRVLO",65,0)
 . S DA=0 F  S DA=$O(@ROOT@(DATTIM,DA)) Q:DA'>0  D
"RTN","TIUSRVLO",66,0)
 . . I +$G(^TIU(8925,+DA,0))=81 Q
"RTN","TIUSRVLO",67,0)
 . . I +$G(^TIU(8925,+DA,0))'>0 K @ROOT@(DATTIM,DA) Q
"RTN","TIUSRVLO",68,0)
 . . S TIUI=$S(SEQUENCE="D":+$G(TIUI)+1,1:+$G(TIUI)-1),ARRAY=+$G(ARRAY)+1
"RTN","TIUSRVLO",69,0)
 . . S ARRAY(TIUI)=DA_U_$$RESOLVE(DA)
"RTN","TIUSRVLO",70,0)
 Q
"RTN","TIUSRVLO",71,0)
 ;
"RTN","TIUSRVLO",72,0)
ACLAU(ARRAY,CLASS,AUTHOR,DFN,TIME1,TIME2,SEQUENCE) ; Unsigned
"RTN","TIUSRVLO",73,0)
 N DATTIM,DA,ROOT,TIUI
"RTN","TIUSRVLO",74,0)
 S ROOT=$NA(^TIU(8925,"ACLAU",CLASS,AUTHOR,DFN))
"RTN","TIUSRVLO",75,0)
 S DATTIM=TIME1-.0000001
"RTN","TIUSRVLO",76,0)
 F  S DATTIM=$O(@ROOT@(DATTIM)) Q:DATTIM'>0!(DATTIM>TIME2)  D
"RTN","TIUSRVLO",77,0)
 . S DA=0 F  S DA=$O(@ROOT@(DATTIM,DA)) Q:DA'>0  D
"RTN","TIUSRVLO",78,0)
 . . I +$G(^TIU(8925,+DA,0))'>0 K @ROOT@(DATTIM,DA) Q
"RTN","TIUSRVLO",79,0)
 . . I +$P($G(^TIU(8925,DA,0)),U,5)>6 K @ROOT@(DATTIM,DA) Q
"RTN","TIUSRVLO",80,0)
 . . S TIUI=$S(SEQUENCE="D":+$G(TIUI)+1,1:+$G(TIUI)-1)
"RTN","TIUSRVLO",81,0)
 . . S ARRAY(TIUI)=DA_U_$$RESOLVE(DA)
"RTN","TIUSRVLO",82,0)
 Q
"RTN","TIUSRVLO",83,0)
ACLEC(ARRAY,CLASS,EXCOSIGN,DFN,TIME1,TIME2,SEQUENCE) ; Uncosigned
"RTN","TIUSRVLO",84,0)
 N DATTIM,DA,ROOT,TIUI
"RTN","TIUSRVLO",85,0)
 S ROOT=$NA(^TIU(8925,"ACLEC",CLASS,EXCOSIGN,DFN))
"RTN","TIUSRVLO",86,0)
 S DATTIM=TIME1-.0000001
"RTN","TIUSRVLO",87,0)
 F  S DATTIM=$O(@ROOT@(DATTIM)) Q:DATTIM'>0!(DATTIM>TIME2)  D
"RTN","TIUSRVLO",88,0)
 . S DA=0 F  S DA=$O(@ROOT@(DATTIM,DA)) Q:DA'>0  D
"RTN","TIUSRVLO",89,0)
 . . I +$G(^TIU(8925,+DA,0))'>0 K @ROOT@(DATTIM,DA) Q
"RTN","TIUSRVLO",90,0)
 . . S TIUI=$S(SEQUENCE="D":+$G(TIUI)+1,1:+$G(TIUI)-1)
"RTN","TIUSRVLO",91,0)
 . . S ARRAY(TIUI)=DA_U_$$RESOLVE(DA)
"RTN","TIUSRVLO",92,0)
 Q
"RTN","TIUSRVLO",93,0)
ACLSB(ARRAY,CLASS,SIGNEDBY,DFN,TIME1,TIME2,SEQUENCE) ; Signed, by author
"RTN","TIUSRVLO",94,0)
 N DATTIM,DA,ROOT,TIUI
"RTN","TIUSRVLO",95,0)
 S ROOT=$NA(^TIU(8925,"ACLSB",CLASS,SIGNEDBY,DFN))
"RTN","TIUSRVLO",96,0)
 S DATTIM=TIME1-.0000001
"RTN","TIUSRVLO",97,0)
 F  S DATTIM=$O(@ROOT@(DATTIM)) Q:DATTIM'>0!(DATTIM>TIME2)  D
"RTN","TIUSRVLO",98,0)
 . S DA=0 F  S DA=$O(@ROOT@(DATTIM,DA)) Q:DA'>0  D
"RTN","TIUSRVLO",99,0)
 . . I +$G(^TIU(8925,+DA,0))'>0 K @ROOT@(DATTIM,DA) Q
"RTN","TIUSRVLO",100,0)
 . . S TIUI=$S(SEQUENCE="D":+$G(TIUI)+1,1:+$G(TIUI)-1)
"RTN","TIUSRVLO",101,0)
 . . S ARRAY(TIUI)=DA_U_$$RESOLVE(DA)
"RTN","TIUSRVLO",102,0)
 Q
"RTN","TIUSRVLO",103,0)
RESOLVE(DA) ; Resolve to external data
"RTN","TIUSRVLO",104,0)
 N DOC,LOC,PT,AUT,EDT,TIUPT,TIULST4,TIUREC,TIUR0,TIUR12,TIUR13
"RTN","TIUSRVLO",105,0)
 N STATUS,EDTCNT,LOCTYP,TIUADT,TIUDDT
"RTN","TIUSRVLO",106,0)
 S TIUR0=$G(^TIU(8925,+DA,0)),TIUR12=$G(^TIU(8925,+DA,12))
"RTN","TIUSRVLO",107,0)
 S TIUR13=$G(^TIU(8925,+DA,13)),TIUPT=$G(^DPT(+$P(TIUR0,U,2),0))
"RTN","TIUSRVLO",108,0)
 S DOC=$$PNAME^TIULC1(+TIUR0)
"RTN","TIUSRVLO",109,0)
 I DOC="Addendum" S DOC=DOC_" to "_$$PNAME^TIULC1(+$G(^TIU(8925,+$P(TIUR0,U,6),0)))
"RTN","TIUSRVLO",110,0)
 I +$$HASADDEN^TIULC1(DA) S DOC="+ "_DOC
"RTN","TIUSRVLO",111,0)
 I +$$URGENCY^TIURM(+DA)=1 S DOC=$S(DOC["+":"*",1:"* ")_DOC
"RTN","TIUSRVLO",112,0)
 S STATUS=$$LOWER^TIULS($P(^TIU(8925.6,+$P(TIUR0,U,5),0),U))
"RTN","TIUSRVLO",113,0)
 S LOC=$G(^SC(+$P(TIUR12,U,5),0)),LOCTYP=$P(LOC,U,3),LOC=$P(LOC,U)
"RTN","TIUSRVLO",114,0)
 S TIUADT=$S(LOCTYP="W":"Adm: ",1:"Visit: ")_$$DATE^TIULS($P(TIUR0,U,7),"MM/DD/YY")
"RTN","TIUSRVLO",115,0)
 S TIUDDT=$S(+$P(TIUR0,U,8):"Dis: ",1:"")_$$DATE^TIULS($P(TIUR0,U,8),"MM/DD/YY")
"RTN","TIUSRVLO",116,0)
 S PT=$$NAME^TIULS($P(TIUPT,U),"LAST, FIRST MI")
"RTN","TIUSRVLO",117,0)
 S TIULST4=$E($P(TIUPT,U,9),6,9)
"RTN","TIUSRVLO",118,0)
 S TIULST4="("_$E(PT)_TIULST4_")"
"RTN","TIUSRVLO",119,0)
 S AUT=+$P(TIUR12,U,2)_";"_$$SIGNAME^TIULS(+$P(TIUR12,U,2))
"RTN","TIUSRVLO",120,0)
 S EDT=+TIUR13,EDTCNT=+$G(EDTCNT)+1
"RTN","TIUSRVLO",121,0)
 S TIUREC=DOC_U_EDT_U_PT_" "_TIULST4_U_AUT_U_LOC_U_STATUS_U_TIUADT_U_TIUDDT
"RTN","TIUSRVLO",122,0)
 Q $G(TIUREC)
"RTN","TIUSRVLV")
0^181^B1945376
"RTN","TIUSRVLV",1,0)
TIUSRVLV ; SLC/JER - Server functions for lists by Visit;10/11/94  11:09
"RTN","TIUSRVLV",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRVLV",3,0)
NOTES(TIUY,VISIT,STATUS,EARLY,LATE) ; Gets list of Notes
"RTN","TIUSRVLV",4,0)
 N QSTR
"RTN","TIUSRVLV",5,0)
 I $S(+$G(VISIT)'>0:1,'$D(^AUPNVSIT(+$G(VISIT),0)):1,1:0) Q
"RTN","TIUSRVLV",6,0)
 S QSTR="AVSIT"_U_VISIT_U_$P($G(^AUPNVSIT(+VISIT,0)),U)
"RTN","TIUSRVLV",7,0)
 S STATUS=$S($G(STATUS)]"":$G(STATUS),1:"ALL")
"RTN","TIUSRVLV",8,0)
 D LIST^TIUSRVL(.TIUY,3,STATUS,QSTR,$G(EARLY),$G(LATE))
"RTN","TIUSRVLV",9,0)
 Q
"RTN","TIUSRVLV",10,0)
SUMMARY(TIUY,VISIT,STATUS,EARLY,LATE) ; Gets list of Summaries
"RTN","TIUSRVLV",11,0)
 N QSTR
"RTN","TIUSRVLV",12,0)
 I $S(+$G(VISIT)'>0:1,'$D(^AUPNVSIT(+$G(VISIT),0)):1,1:0) Q
"RTN","TIUSRVLV",13,0)
 S QSTR="AVSIT"_U_VISIT_U_$P($G(^AUPNVSIT(+VISIT,0)),U)
"RTN","TIUSRVLV",14,0)
 S STATUS=$S($G(STATUS)]"":$G(STATUS),1:"ALL")
"RTN","TIUSRVLV",15,0)
 D LIST^TIUSRVL(.TIUY,1,STATUS,QSTR,$G(EARLY),$G(LATE))
"RTN","TIUSRVLV",16,0)
 Q
"RTN","TIUSRVLV",17,0)
CONSULT(TIUY,VISIT,STATUS,EARLY,LATE) ; Gets list of Consults
"RTN","TIUSRVLV",18,0)
 N QSTR
"RTN","TIUSRVLV",19,0)
 I $S(+$G(VISIT)'>0:1,'$D(^AUPNVSIT(+$G(VISIT),0)):1,1:0) Q
"RTN","TIUSRVLV",20,0)
 S QSTR="AVSIT"_U_VISIT_U_$P($G(^AUPNVSIT(+VISIT,0)),U)
"RTN","TIUSRVLV",21,0)
 S STATUS=$S($G(STATUS)]"":$G(STATUS),1:"ALL")
"RTN","TIUSRVLV",22,0)
 D LIST^TIUSRVL(.TIUY,243,STATUS,QSTR,$G(EARLY),$G(LATE))
"RTN","TIUSRVLV",23,0)
 Q
"RTN","TIUSRVP")
0^182^B34011342
"RTN","TIUSRVP",1,0)
TIUSRVP ; SLC/JER - Server calls to put data to TIU
"RTN","TIUSRVP",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRVP",3,0)
MAKE(SUCCESS,DFN,TITLE,VDT,VLOC,VSIT,TIUX,VSTR) ; File new TIU Document
"RTN","TIUSRVP",4,0)
 ; SUCCESS = (by ref) SUCCESS Returns TIU DOCUMENT # (PTR to 8925)
"RTN","TIUSRVP",5,0)
 ;         = 0^Explanatory message if no SUCCESS
"RTN","TIUSRVP",6,0)
 ; DFN     = Patient (#2)
"RTN","TIUSRVP",7,0)
 ; TITLE   = Pointer to TIU Document Definition (#8925.1)
"RTN","TIUSRVP",8,0)
 ; [VDT]   = Date(/Time) of Visit
"RTN","TIUSRVP",9,0)
 ; [VLOC]  = Visit Location (pointer to HOSPITAL LOCATION
"RTN","TIUSRVP",10,0)
 ; [VSIT]  = Pointer to visit file (#9000010)
"RTN","TIUSRVP",11,0)
 ; [VSTR]  = Visit string (i.e., VLOC;VDT;VTYPE)
"RTN","TIUSRVP",12,0)
 ; TIUX    = (by ref) array containing identifying fields, as
"RTN","TIUSRVP",13,0)
 ;           well as the body of the document
"RTN","TIUSRVP",14,0)
 ;
"RTN","TIUSRVP",15,0)
 ; -- first, get visit record and demographics (if not provided) --
"RTN","TIUSRVP",16,0)
 ;
"RTN","TIUSRVP",17,0)
 N TIU,TIUDA,LDT,NEWREC
"RTN","TIUSRVP",18,0)
 S SUCCESS=0 ; Initialize SUCCESS to false
"RTN","TIUSRVP",19,0)
 I +$G(VSIT) S VSTR=$$VSTRBLD(+VSIT) D PATVADPT^TIULV(.TIU,DFN,"",VSTR)
"RTN","TIUSRVP",20,0)
 I '+$G(VSIT),$L($G(VSTR)) D PATVADPT^TIULV(.TIU,DFN,"",VSTR)
"RTN","TIUSRVP",21,0)
 I '+$G(VSIT),'$L($G(VSTR)),+$G(VDT),+$G(VLOC) D
"RTN","TIUSRVP",22,0)
 . S VDT=$G(VDT),LDT=$S(+$G(VDT):$$FMADD^XLFDT(VDT,1),1:"")
"RTN","TIUSRVP",23,0)
 . D MAIN^TIUVSIT(.TIU,DFN,"",VDT,LDT,"LAST",0,VLOC)
"RTN","TIUSRVP",24,0)
 I '+$G(TIU("VSTR")) D
"RTN","TIUSRVP",25,0)
 . D EVENT^TIUSRVP1(.VSIT,DFN)
"RTN","TIUSRVP",26,0)
 I $S($D(TIU)'>9:1,+$G(DFN)'>0:1,1:0) S SUCCESS="0^"_$$EZBLD^DIALOG(89250001) Q
"RTN","TIUSRVP",27,0)
 ;
"RTN","TIUSRVP",28,0)
 ; -- second, get/create the TIU Document record --
"RTN","TIUSRVP",29,0)
 ;
"RTN","TIUSRVP",30,0)
 S TIUDA=$$GETREC(DFN,.TIU,TITLE,.NEWREC)
"RTN","TIUSRVP",31,0)
 I +TIUDA'>0 S SUCCESS="0^"_$$EZBLD^DIALOG(89250002) Q
"RTN","TIUSRVP",32,0)
 S SUCCESS=+TIUDA
"RTN","TIUSRVP",33,0)
 ;
"RTN","TIUSRVP",34,0)
 ; -- third, file the data in TIU Document record --
"RTN","TIUSRVP",35,0)
 ;
"RTN","TIUSRVP",36,0)
 D STUFREC(.TIUX,DFN,$G(PARENT),TITLE,.TIU)
"RTN","TIUSRVP",37,0)
 K ^TIU(8925,+TIUDA,"TEMP")
"RTN","TIUSRVP",38,0)
 M ^TIU(8925,+TIUDA,"TEMP")=TIUX("TEXT") K TIUX("TEXT")
"RTN","TIUSRVP",39,0)
 D FILE(.SUCCESS,+TIUDA,.TIUX)
"RTN","TIUSRVP",40,0)
 D MERGTEXT^TIUEDI1(+TIUDA,.TIU)
"RTN","TIUSRVP",41,0)
 I +$G(TIU("STOP")) D DEFER^TIUVSIT(TIUDA,TIU("STOP")) I 1
"RTN","TIUSRVP",42,0)
 E  D QUE^TIUPXAP1
"RTN","TIUSRVP",43,0)
 D RELEASE^TIUT(TIUDA)
"RTN","TIUSRVP",44,0)
 K ^TIU(8925,+TIUDA,"TEMP")
"RTN","TIUSRVP",45,0)
 Q
"RTN","TIUSRVP",46,0)
VSTRBLD(VSIT) ; Given a Visit Record, build Visit-Descriptor String
"RTN","TIUSRVP",47,0)
 N TIUY,VSIT0,VLOC,VDT,VSVCAT
"RTN","TIUSRVP",48,0)
 S VSIT0=$G(^AUPNVSIT(+VSIT,0)),VDT=+$P(VSIT0,U),VLOC=+$P(VSIT0,U,22)
"RTN","TIUSRVP",49,0)
 S VSVCAT=$P(VSIT0,U,7)
"RTN","TIUSRVP",50,0)
 S TIUY=VLOC_";"_VDT_";"_VSVCAT
"RTN","TIUSRVP",51,0)
 Q TIUY
"RTN","TIUSRVP",52,0)
MAKEADD(TIUDADD,TIUDA,TIUX) ; Create an addendum record
"RTN","TIUSRVP",53,0)
 N DIE,DR,DA,DIC,X,Y,DLAYGO,TIUATYP,TIUCAN,TIUFPRIV,TIU S TIUFPRIV=1
"RTN","TIUSRVP",54,0)
 S TIUCAN=$$CANDO^TIULP(TIUDA,"MAKE ADDENDUM")
"RTN","TIUSRVP",55,0)
 I TIUCAN'>0 S TIUDADD="0^You may not MAKE AN ADDENDUM for this "_$$STATUS^TIULC(TIUDA)_" "_$$PNAME^TIULC1(+$G(^TIU(8925,+TIUDA,0))) Q
"RTN","TIUSRVP",56,0)
 S TIUATYP=+$$WHATITLE^TIUPUTU("ADDENDUM")
"RTN","TIUSRVP",57,0)
 S (DIC,DLAYGO)=8925,DIC(0)="L",X=""""_"`"_TIUATYP_""""
"RTN","TIUSRVP",58,0)
 D ^DIC
"RTN","TIUSRVP",59,0)
 S TIUDADD=+Y
"RTN","TIUSRVP",60,0)
 I +Y'>0 S TIUDADD=TIUDADD_"^Could not create addendum." Q
"RTN","TIUSRVP",61,0)
 D GETTIU^TIULD(.TIU,TIUDA)
"RTN","TIUSRVP",62,0)
 S TIU("DOCTYP")=TIUATYP_U_$$PNAME^TIULC1(TIUATYP)
"RTN","TIUSRVP",63,0)
 D STUFREC(.TIUX,DFN,+$G(TIUDA),TIUATYP,.TIU)
"RTN","TIUSRVP",64,0)
 K ^TIU(8925,+TIUDADD,"TEMP")
"RTN","TIUSRVP",65,0)
 M ^TIU(8925,+TIUDADD,"TEMP")=TIUX("TEXT")
"RTN","TIUSRVP",66,0)
 D FILE(.SUCCESS,+TIUDADD,.TIUX)
"RTN","TIUSRVP",67,0)
 D MERGTEXT^TIUEDI1(+TIUDADD,.TIU)
"RTN","TIUSRVP",68,0)
 D RELEASE^TIUT(+TIUDADD)
"RTN","TIUSRVP",69,0)
 K ^TIU(8925,+TIUDADD,"TEMP")
"RTN","TIUSRVP",70,0)
 Q
"RTN","TIUSRVP",71,0)
UPDATE(SUCCESS,TIUDA,TIUX) ; Update an existing TIU Document
"RTN","TIUSRVP",72,0)
 N TIU,TIUI,TIUC K ^TIU(8925,+TIUDA,"TEMP")
"RTN","TIUSRVP",73,0)
 M ^TIU(8925,+TIUDA,"TEMP")=TIUX("TEXT")
"RTN","TIUSRVP",74,0)
 S (TIUC,TIUI)=0
"RTN","TIUSRVP",75,0)
 F  S TIUI=$O(^TIU(8925,+TIUDA,"TEMP",TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVP",76,0)
 . S TIUC=TIUC+1
"RTN","TIUSRVP",77,0)
 I +TIUC>0 S ^TIU(8925,+TIUDA,"TEMP",0)="^^"_TIUC_U_TIUC_U_DT_"^^"
"RTN","TIUSRVP",78,0)
 K TIUX("TEXT")
"RTN","TIUSRVP",79,0)
 D GETTIU^TIULD(.TIU,TIUDA)
"RTN","TIUSRVP",80,0)
 D FILE(.SUCCESS,+TIUDA,.TIUX)
"RTN","TIUSRVP",81,0)
 I +SUCCESS'>0 K ^TIU(8925,+TIUDA,"TEMP") Q
"RTN","TIUSRVP",82,0)
 K ^TIU(8925,+TIUDA,"TEXT")
"RTN","TIUSRVP",83,0)
 D MERGTEXT^TIUEDI1(+TIUDA,.TIU)
"RTN","TIUSRVP",84,0)
 K ^TIU(8925,+TIUDA,"TEMP")
"RTN","TIUSRVP",85,0)
 Q
"RTN","TIUSRVP",86,0)
GETREC(DFN,TIU,TITLE,TIUNEW) ; Get or create document record
"RTN","TIUSRVP",87,0)
 N DA,DIC,DIE,DLAYGO,DR,X,Y,TIUDPRM,TIUFPRIV S (TIUHIT,DA)=0,TIUFPRIV=1
"RTN","TIUSRVP",88,0)
 S (DIC,DLAYGO)=8925,DIC(0)="FL"
"RTN","TIUSRVP",89,0)
 ; S DIC("S")="I +$G(DFN)=+$P(^TIU(8925,+Y,0),U,2),(+$G(TIU(""VISIT""))=+$P(^TIU(8925,+Y,0),U,3))"
"RTN","TIUSRVP",90,0)
 S X=""""_"`"_+TITLE_"""" D ^DIC K DIC("S")
"RTN","TIUSRVP",91,0)
 I +Y'>0 Q Y_U_" Insufficient data to create a new record."
"RTN","TIUSRVP",92,0)
 S DA=+Y,TIUNEW=+$P(Y,U,3)
"RTN","TIUSRVP",93,0)
 N DIE,DR,TIUVISIT S DIE=8925
"RTN","TIUSRVP",94,0)
 S TIUVISIT=$S(+$G(TIU("VISIT")):+$G(TIU("VISIT")),1:"")
"RTN","TIUSRVP",95,0)
 S DR=".04////"_$$DOCCLASS^TIULC1(+$P(Y,U,2))_";.13////"_$P($G(TIU("CAT")),U)_";1205////"_$P($G(TIU("LOC")),U)_";1211////"_$P($G(TIU("VLOC")),U)
"RTN","TIUSRVP",96,0)
 D ^DIE
"RTN","TIUSRVP",97,0)
 Q +$G(DA)
"RTN","TIUSRVP",98,0)
STUFREC(TIUREC,DFN,PARENT,TITLE,TIU) ; Non-interactive data set
"RTN","TIUSRVP",99,0)
 I +$G(PARENT)'>0 D
"RTN","TIUSRVP",100,0)
 . S TIUREC(.02)=$G(DFN),TIUREC(.03)=$P($G(TIU("VISIT")),U),TIUREC(.05)=5
"RTN","TIUSRVP",101,0)
 . S TIUREC(.07)=$P($G(TIU("EDT")),U),TIUREC(.08)=$P($G(TIU("LDT")),U)
"RTN","TIUSRVP",102,0)
 . S TIUREC(1404)=$P($G(TIU("SVC")),U)
"RTN","TIUSRVP",103,0)
 I +$G(PARENT)>0 D
"RTN","TIUSRVP",104,0)
 . S TIUREC(.02)=+$P($G(^TIU(8925,+PARENT,0)),U,2)
"RTN","TIUSRVP",105,0)
 . S TIUREC(.03)=+$P($G(^TIU(8925,+PARENT,0)),U,3)
"RTN","TIUSRVP",106,0)
 . S TIUREC(.05)=5
"RTN","TIUSRVP",107,0)
 . S TIUREC(.06)=PARENT,TIUREC(.07)=$P(TIU("EDT"),U)
"RTN","TIUSRVP",108,0)
 . S TIUREC(.08)=$P(TIU("LDT"),U)
"RTN","TIUSRVP",109,0)
 . S TIUREC(1404)=$P($G(^TIU(8925,+PARENT,14)),U,4)
"RTN","TIUSRVP",110,0)
 S TIUREC(.04)=$$DOCCLASS^TIULC1(TITLE)
"RTN","TIUSRVP",111,0)
 S (TIUREC(1202),TIUREC(1204))=+$G(DUZ)
"RTN","TIUSRVP",112,0)
 S TIUREC(1205)=$P($G(TIU("LOC")),U)
"RTN","TIUSRVP",113,0)
 S TIUREC(1211)=$P($G(TIU("VLOC")),U)
"RTN","TIUSRVP",114,0)
 S (TIUREC(1201),TIUREC(1301))=$$NOW^XLFDT
"RTN","TIUSRVP",115,0)
 S TIUREC(1303)="R"
"RTN","TIUSRVP",116,0)
 Q
"RTN","TIUSRVP",117,0)
FILE(SUCCESS,TIUDA,TIUX) ; Call FM Filer to commit updates to DB
"RTN","TIUSRVP",118,0)
 N FDA,FDARR,IENS,FLAGS,TIUMSG
"RTN","TIUSRVP",119,0)
 S IENS=""""_TIUDA_",""",FDARR="FDA(8925,"_IENS_")",FLAGS="K"
"RTN","TIUSRVP",120,0)
 M @FDARR=TIUX
"RTN","TIUSRVP",121,0)
 D FILE^DIE(FLAGS,"FDA","TIUMSG") ; File record
"RTN","TIUSRVP",122,0)
 I $D(TIUMSG)>9 S SUCCESS=0_U_$G(TIUMSG(1,"TEXT",1))
"RTN","TIUSRVP",123,0)
 E  S SUCCESS=TIUDA
"RTN","TIUSRVP",124,0)
 Q
"RTN","TIUSRVP",125,0)
SIGN(ERR,TIUDA,TIUX) ; API for electronic signature
"RTN","TIUSRVP",126,0)
 N X,TIUACT,TIUSIGN,TIUD0,TIUD12,TIUSTAT,SIGNER,COSIGNER,VALID,XTRASGNR
"RTN","TIUSRVP",127,0)
 N TIUES S ERR=0
"RTN","TIUSRVP",128,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD12=$G(^TIU(8925,+TIUDA,12))
"RTN","TIUSRVP",129,0)
 S SIGNER=$P(TIUD12,U,4),COSIGNER=$P(TIUD12,U,8)
"RTN","TIUSRVP",130,0)
 I (DUZ'=SIGNER),(DUZ'=COSIGNER) S XTRASGNR=+$O(^TIU(8925.7,"AE",+TIUDA,+DUZ,0))
"RTN","TIUSRVP",131,0)
 S TIUSTAT=+$P(TIUD0,U,5)
"RTN","TIUSRVP",132,0)
 S TIUACT=$S(TIUSTAT'>5:"SIGNATURE",+$G(XTRASGNR):"SIGNATURE",1:"COSIGNATURE")
"RTN","TIUSRVP",133,0)
 S TIUSIGN=$$CANDO^TIULP(TIUDA,TIUACT)
"RTN","TIUSRVP",134,0)
 I +TIUSIGN'>0 S ERR="89250004^"_$P(TIUSIGN,U,2) Q
"RTN","TIUSRVP",135,0)
 S VALID=$$VALIDATE($$DECRYP^XUSRB1(TIUX))
"RTN","TIUSRVP",136,0)
 I +VALID'>0 S ERR="89250005^"_$$EZBLD^DIALOG(89250005) Q
"RTN","TIUSRVP",137,0)
 S TIUES=1_U_$P($G(^VA(200,+DUZ,20)),U,2,3)
"RTN","TIUSRVP",138,0)
 I '+$G(XTRASGNR) D ES^TIURS(TIUDA,TIUES)
"RTN","TIUSRVP",139,0)
 I +$G(XTRASGNR) D ADDSIG^TIURS1(TIUDA,XTRASGNR)
"RTN","TIUSRVP",140,0)
 Q
"RTN","TIUSRVP",141,0)
VALIDATE(X) ; Validate /es/-code
"RTN","TIUSRVP",142,0)
 N TIUY S TIUY=0
"RTN","TIUSRVP",143,0)
 D HASH^XUSHSHP I X=$P($G(^VA(200,+DUZ,20)),U,4) S TIUY=1
"RTN","TIUSRVP",144,0)
 Q TIUY
"RTN","TIUSRVP",145,0)
DELETE(ERR,TIUDA) ; API for record deletion
"RTN","TIUSRVP",146,0)
 N TIUDEL S ERR=0,TIUDEL=$$CANDO^TIULP(TIUDA,"DELETE RECORD")
"RTN","TIUSRVP",147,0)
 I TIUDEL'>0 S ERR="89250003^"_$$EZBLD^DIALOG(89250003) Q
"RTN","TIUSRVP",148,0)
 D DIK^TIURB(TIUDA)
"RTN","TIUSRVP",149,0)
 D DELAUDIT^TIUEDI1(TIUDA)
"RTN","TIUSRVP",150,0)
 Q
"RTN","TIUSRVP1")
0^183^B2590205
"RTN","TIUSRVP1",1,0)
TIUSRVP1 ; SLC/JER - More API's in support of PUT
"RTN","TIUSRVP1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRVP1",3,0)
DOCPARM(TIUY,TIUDA,TIUTYP) ; Get document parameters for GUI
"RTN","TIUSRVP1",4,0)
 I '+$G(TIUTYP),+$G(TIUDA) S TIUTYP=+$G(^TIU(8925,+TIUDA,0))
"RTN","TIUSRVP1",5,0)
 I '+$G(TIUTYP) S TIUY(0)="" Q
"RTN","TIUSRVP1",6,0)
 D DOCPRM^TIULC1(TIUTYP,.TIUY,$G(TIUDA))
"RTN","TIUSRVP1",7,0)
 I '$D(TIUY) S TIUY(0)=""
"RTN","TIUSRVP1",8,0)
 Q
"RTN","TIUSRVP1",9,0)
CONSTUB(TIUDA,GMRCVP,DFN) ; Create a stub for a Consult Report
"RTN","TIUSRVP1",10,0)
 N DIE,DR,DA
"RTN","TIUSRVP1",11,0)
 D STUB(.TIUDA,"CONSULT REPORT",DFN)
"RTN","TIUSRVP1",12,0)
 I +TIUDA'>0 Q
"RTN","TIUSRVP1",13,0)
 S DIE=8925,DA=+TIUDA,DR="1405////^S X=GMRCVP"
"RTN","TIUSRVP1",14,0)
 D ^DIE
"RTN","TIUSRVP1",15,0)
 Q
"RTN","TIUSRVP1",16,0)
STUB(TIUDA,TIUTITL,DFN) ; Create a stub
"RTN","TIUSRVP1",17,0)
 N TIUVSIT,TIUFPRIV,DIC,DIE,DR,DA,DLAYGO,X,Y S TIUFPRIV=1
"RTN","TIUSRVP1",18,0)
 I +$G(TIUTITL)'>0 S TIUTITL=$$WHATITLE^TIUPUTU(TIUTITL)
"RTN","TIUSRVP1",19,0)
 I +TIUTITL'>0 S TIUDA=-1 Q
"RTN","TIUSRVP1",20,0)
 S (DIC,DLAYGO)=8925,DIC(0)="LF"
"RTN","TIUSRVP1",21,0)
 S X=""""_"`"_+TIUTITL_""""
"RTN","TIUSRVP1",22,0)
 D ^DIC S TIUDA=+Y Q:+Y'>0
"RTN","TIUSRVP1",23,0)
 D EVENT(.TIU,DFN) I $L($G(TIU("VSTR")))'>0 S TIUDA=-1 Q
"RTN","TIUSRVP1",24,0)
 S DIE=DIC,DA=TIUDA
"RTN","TIUSRVP1",25,0)
 S DR=".02////"_+DFN_";.03////"_$P($G(TIU("VISIT")),U)_";.04////"_+$$DOCCLASS^TIULC1(TIUTITL)_";.05///UNDICTATED;.13////E;1301////"_+$$NOW^XLFDT
"RTN","TIUSRVP1",26,0)
 D ^DIE
"RTN","TIUSRVP1",27,0)
 Q
"RTN","TIUSRVP1",28,0)
EVENT(TIUY,DFN) ; Create an Event-type Visit Entry
"RTN","TIUSRVP1",29,0)
 N VDT,VSTR
"RTN","TIUSRVP1",30,0)
 S VDT=$$NOW^XLFDT
"RTN","TIUSRVP1",31,0)
 S VSTR=";"_VDT_";"_"E"
"RTN","TIUSRVP1",32,0)
 D PATVADPT^TIULV(.TIU,+DFN,"",VSTR)
"RTN","TIUSRVP1",33,0)
 Q
"RTN","TIUSRVR")
0^184^B5351449
"RTN","TIUSRVR",1,0)
TIUSRVR ; SLC/JER - Server functions for record manipulation
"RTN","TIUSRVR",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRVR",3,0)
SGET(TIUY,DA) ; Get fixed fields for record TIUDA
"RTN","TIUSRVR",4,0)
 N DOC,LOC,PT,AUT,EDT,DTFMT,TIUPT,TIULST4,TIUREC,TIUR0,TIUR12,TIUR13
"RTN","TIUSRVR",5,0)
 N SUBJ
"RTN","TIUSRVR",6,0)
 S TIUR0=$G(^TIU(8925,+DA,0)),TIUR12=$G(^TIU(8925,+DA,12))
"RTN","TIUSRVR",7,0)
 S TIUR13=$G(^TIU(8925,+DA,13)),TIUPT=$G(^DPT(+$P(TIUR0,U,2),0))
"RTN","TIUSRVR",8,0)
 S SUBJ=$G(^TIU(8925,+DA,17))
"RTN","TIUSRVR",9,0)
 S DOC=$$PNAME^TIULC1(+TIUR0)
"RTN","TIUSRVR",10,0)
 S LOC=$P($G(^SC(+$P(TIUR12,U,5),0)),U)
"RTN","TIUSRVR",11,0)
 S PT=$$NAME^TIULS($P(TIUPT,U),"LAST, FIRST MI")
"RTN","TIUSRVR",12,0)
 S TIULST4=$E($P(TIUPT,U,9),6,9)
"RTN","TIUSRVR",13,0)
 S TIULST4="("_$E(PT)_TIULST4_")"
"RTN","TIUSRVR",14,0)
 S AUT=$$SIGNAME^TIULS(+$P(TIUR12,U,2))
"RTN","TIUSRVR",15,0)
 S DTFMT=$S($L(+TIUR13,".")=2:"MM/DD/YY HR:MIN",1:"MM/DD/YY")
"RTN","TIUSRVR",16,0)
 S EDT=$$DATE^TIULS(+TIUR13,DTFMT)
"RTN","TIUSRVR",17,0)
 S TIUCNT=+$G(TIUCNT)+1
"RTN","TIUSRVR",18,0)
 S TIUY=DOC_U_EDT_U_PT_" "_TIULST4_U_AUT_U_LOC_U_SUBJ
"RTN","TIUSRVR",19,0)
 Q
"RTN","TIUSRVR",20,0)
TGET(TIUY,TIUDA,TIUJ,TIUDAD) ; Get each component
"RTN","TIUSRVR",21,0)
 N TIUKID,TIUDADT,TIUI S TIUI=0
"RTN","TIUSRVR",22,0)
 F  S TIUI=$O(^TIU(8925,+TIUDA,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVR",23,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVR",24,0)
 . S TIUY(TIUJ)=$G(^TIU(8925,+TIUDA,"TEXT",TIUI,0))
"RTN","TIUSRVR",25,0)
 . ;S ^TMP("TIUTEXT",$J,TIUJ,0)=$G(^TIU(8925,+TIUDA,"TEXT",TIUI,0))
"RTN","TIUSRVR",26,0)
 ; Iterate through children, and get their text fields
"RTN","TIUSRVR",27,0)
 S TIUKID=0
"RTN","TIUSRVR",28,0)
 F  S TIUKID=$O(^TIU(8925,"DAD",+TIUDA,TIUKID)) Q:+TIUKID'>0  D
"RTN","TIUSRVR",29,0)
 . D TGET(.TIUY,TIUKID,.TIUJ,$G(TIUDAD,TIUDA))
"RTN","TIUSRVR",30,0)
 ;I $D(^TMP("TIUTEXT",$J)) S TIUY="^TMP(""TIUTEXT"",$J)"
"RTN","TIUSRVR",31,0)
 Q
"RTN","TIUSRVR",32,0)
GET4EDIT(TIUY,TIUDA,DR) ; Get data in preparation for editing a record
"RTN","TIUSRVR",33,0)
 N CANEDIT,ERR,D0,DIQ2,TIUARR,TIUF,TIUI
"RTN","TIUSRVR",34,0)
 K ^TMP("TIUEDIT",$J)
"RTN","TIUSRVR",35,0)
 S TIUY=$NA(^TMP("TIUEDIT",$J))
"RTN","TIUSRVR",36,0)
 S CANEDIT=$$CANDO^TIULP(TIUDA,"EDIT RECORD")
"RTN","TIUSRVR",37,0)
 I +CANEDIT'>0 S ^TMP("TIUEDIT",$J,0)="~"_$P(CANEDIT,U,2) Q
"RTN","TIUSRVR",38,0)
 D EXTRACT^TIULQ(TIUDA,"TIUARR",.ERR,$G(DR),"",1,"IE")
"RTN","TIUSRVR",39,0)
 I $D(ERR) M TIUY=ERR Q
"RTN","TIUSRVR",40,0)
 S TIUF=0
"RTN","TIUSRVR",41,0)
 F  S TIUF=$O(TIUARR(TIUDA,TIUF)) Q:+TIUF'>0  D
"RTN","TIUSRVR",42,0)
 . S ^TMP("TIUEDIT",$J,TIUF)=TIUF_U_TIUARR(TIUDA,TIUF,"I")_U_TIUARR(TIUDA,TIUF,"E")
"RTN","TIUSRVR",43,0)
 S TIUI=0
"RTN","TIUSRVR",44,0)
 F  S TIUI=$O(TIUARR(TIUDA,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVR",45,0)
 . S ^TMP("TIUEDIT",$J,"TEXT",TIUI)=$G(TIUARR(TIUDA,"TEXT",TIUI,0))
"RTN","TIUSRVR",46,0)
 ; M ^TMP("TIUEDIT",$J,"TEXT")=TIUARR(TIUDA,"TEXT")
"RTN","TIUSRVR",47,0)
 S ^TMP("TIUEDIT",$J,"TEXT",0)="$TXT"
"RTN","TIUSRVR",48,0)
 Q
"RTN","TIUSRVR",49,0)
GETPREF(TIUY,USER) ; Get user's personal preferences
"RTN","TIUSRVR",50,0)
 ; Call with TIUY (by ref)
"RTN","TIUSRVR",51,0)
 ;           USER is pointer to file 200
"RTN","TIUSRVR",52,0)
 ; Returns   TIUY = USER ^ DEFAULT LOCATION ^ REVIEW SCREEN SORT FIELD ^
"RTN","TIUSRVR",53,0)
 ;               ==>REVIEW SCREEN SORT ORDER ^ DISPLAY MENUS ^ PATIENT
"RTN","TIUSRVR",54,0)
 ;               ==>SELECTION PREFERENCE ^ ASK 'Save changes?' AFTER
"RTN","TIUSRVR",55,0)
 ;               ==>EDIT ^ ASK SUBJECT FOR PROGRESS NOTES ^
"RTN","TIUSRVR",56,0)
 S TIUY=$$PERSPRF^TIULE(USER)
"RTN","TIUSRVR",57,0)
 Q
"RTN","TIUSRVR1")
0^185^B59532516
"RTN","TIUSRVR1",1,0)
TIUSRVR1 ; SLC/JER - RPC for record-wise GET;07/09/96  15:00
"RTN","TIUSRVR1",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUSRVR1",3,0)
TGET(TIUY,TIUDA) ; Build ^TMP("TIUVIEW",$J,
"RTN","TIUSRVR1",4,0)
 N TIUI,TIUJ,TIUL,TIUREC,TIUARR S (TIUDADD,TIUI)=0
"RTN","TIUSRVR1",5,0)
 N DA,DIC,DIQ,DR,TIUNAME K ^TMP("TIUVIEW",$J) S DA=TIUDA
"RTN","TIUSRVR1",6,0)
 S TIUY=$NA(^TMP("TIUVIEW",$J))
"RTN","TIUSRVR1",7,0)
 S TIUARR="^TMP(""TIUVIEW"",$J)"
"RTN","TIUSRVR1",8,0)
 I '$D(^TIU(8925,+TIUDA,0)) S VALMQUIT=1 Q
"RTN","TIUSRVR1",9,0)
 S DIC=8925,DIQ="TIUREC("
"RTN","TIUSRVR1",10,0)
 S DR=".01;.02;.05;.09;1201;1202;1208;1209;1301;1307;1501;1502;1505;1506;1601:1604"
"RTN","TIUSRVR1",11,0)
 D EN^DIQ1
"RTN","TIUSRVR1",12,0)
 ; First, load dicatation, transcription data, etc.
"RTN","TIUSRVR1",13,0)
 D LOADTOP(.TIUREC,TIUDA,.TIUJ,.TIUL)
"RTN","TIUSRVR1",14,0)
 ; Next, load the remainder of the record
"RTN","TIUSRVR1",15,0)
 D LOADREC(TIUDA,.TIUJ,.TIUL) S TIUJ=TIUL
"RTN","TIUSRVR1",16,0)
 I $L($G(TIUREC(8925,+TIUDA,1601))) D
"RTN","TIUSRVR1",17,0)
 . N TIUMODE
"RTN","TIUSRVR1",18,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUJ)="",TIUL=+$G(TIUL)+1
"RTN","TIUSRVR1",19,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVR1",20,0)
 . S ^TMP("TIUVIEW",$J,TIUJ)=$G(TIUREC(8925,TIUDA,1601))_"  AMENDMENT FILED:"
"RTN","TIUSRVR1",21,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUSRVR1",22,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUJ)="",TIUL=+$G(TIUL)+1
"RTN","TIUSRVR1",23,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVR1",24,0)
 . S TIUMODE=$S($G(TIUREC(8925,TIUDA,1603))]"":"/es/ ",1:"/chart/ ")
"RTN","TIUSRVR1",25,0)
 . S ^TMP("TIUVIEW",$J,TIUJ)=TIUMODE_$G(TIUREC(8925,TIUDA,1602))
"RTN","TIUSRVR1",26,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUSRVR1",27,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVR1",28,0)
 . S ^TMP("TIUVIEW",$J,TIUJ)=$P($G(TIUPRM1),U,5)
"RTN","TIUSRVR1",29,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUSRVR1",30,0)
 ;S ^TMP("TIUVIEW",$J,0)=$G(^TIU(8925,+TIUDA,"TEXT",0))
"RTN","TIUSRVR1",31,0)
 ;S $P(^TMP("TIUVIEW",$J,0),U,3,4)=$G(TIUL)_U_$G(TIUL)
"RTN","TIUSRVR1",32,0)
 S VALMCNT=+$G(TIUL)
"RTN","TIUSRVR1",33,0)
 Q
"RTN","TIUSRVR1",34,0)
LOADTOP(TIUREC,TIUDA,TIUJ,TIUL) ; Load top information
"RTN","TIUSRVR1",35,0)
 N TIUY
"RTN","TIUSRVR1",36,0)
 S (TIUJ,TIUL)=1,TIUY=""
"RTN","TIUSRVR1",37,0)
 I $L(TIUREC(8925,+TIUDA,1307)) D  I 1
"RTN","TIUSRVR1",38,0)
 . S TIUY=$$SETSTR^VALM1("DICT DATE: "_TIUREC(8925,+TIUDA,1307),$G(TIUY),4,39)
"RTN","TIUSRVR1",39,0)
 E  S TIUY=$$SETSTR^VALM1("DATE OF NOTE: "_TIUREC(8925,+TIUDA,1301),$G(TIUY),1,39)
"RTN","TIUSRVR1",40,0)
 S TIUY=$$SETSTR^VALM1("ENTRY DATE: "_TIUREC(8925,+TIUDA,1201),$G(TIUY),38,39)
"RTN","TIUSRVR1",41,0)
 S @TIUARR@(TIUJ)=TIUY
"RTN","TIUSRVR1",42,0)
 S (TIUJ,TIUL)=2,TIUY=""
"RTN","TIUSRVR1",43,0)
 I $L(TIUREC(8925,+TIUDA,1307)) D  I 1
"RTN","TIUSRVR1",44,0)
 . S TIUY=$$SETSTR^VALM1("DICTATED BY: "_TIUREC(8925,+TIUDA,1202),$G(TIUY),2,32)
"RTN","TIUSRVR1",45,0)
 E  S TIUY=$$SETSTR^VALM1("AUTHOR: "_TIUREC(8925,+TIUDA,1202),$G(TIUY),7,32)
"RTN","TIUSRVR1",46,0)
 I $L(TIUREC(8925,+TIUDA,1209)) D  I 1
"RTN","TIUSRVR1",47,0)
 . S TIUY=$$SETSTR^VALM1("ATTENDING: "_TIUREC(8925,+TIUDA,1209),$G(TIUY),39,40)
"RTN","TIUSRVR1",48,0)
 E  S TIUY=$$SETSTR^VALM1("EXP COSIGNER: "_TIUREC(8925,+TIUDA,1208),$G(TIUY),36,40)
"RTN","TIUSRVR1",49,0)
 S @TIUARR@(TIUJ)=TIUY
"RTN","TIUSRVR1",50,0)
 S (TIUJ,TIUL)=3,TIUY="" D
"RTN","TIUSRVR1",51,0)
 S TIUY=$$SETSTR^VALM1("URGENCY: "_TIUREC(8925,+TIUDA,.09),$G(TIUY),6,36)
"RTN","TIUSRVR1",52,0)
 S TIUY=$$SETSTR^VALM1("STATUS: "_TIUREC(8925,+TIUDA,.05),$G(TIUY),42,38)
"RTN","TIUSRVR1",53,0)
 S @TIUARR@(TIUJ)=TIUY
"RTN","TIUSRVR1",54,0)
 I '$L($G(^TIU(8925,+TIUDA,17))) S (TIUJ,TIUL)=4,TIUY="",@TIUARR@(TIUJ)=TIUY
"RTN","TIUSRVR1",55,0)
 E  D
"RTN","TIUSRVR1",56,0)
 . S (TIUJ,TIUL)=4,TIUY=""
"RTN","TIUSRVR1",57,0)
 . S TIUY=$$SETSTR^VALM1("SUBJECT: "_$G(^TIU(8925,+TIUDA,17)),$G(TIUY),6,74)
"RTN","TIUSRVR1",58,0)
 . S @TIUARR@(TIUJ)=TIUY
"RTN","TIUSRVR1",59,0)
 . S (TIUJ,TIUL)=5,TIUY="",@TIUARR@(TIUJ)=TIUY
"RTN","TIUSRVR1",60,0)
 Q
"RTN","TIUSRVR1",61,0)
LOADREC(TIUDA,TIUJ,TIUL) ; Load ^TMP
"RTN","TIUSRVR1",62,0)
 N TIUKID,TIUDADT,TIUI S TIUI=0
"RTN","TIUSRVR1",63,0)
 F  S TIUI=$O(^TIU(8925,+TIUDA,"TEXT",TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVR1",64,0)
 . S TIUJ=+$G(TIUJ)+1
"RTN","TIUSRVR1",65,0)
 . S ^TMP("TIUVIEW",$J,TIUJ)=$G(^TIU(8925,+TIUDA,"TEXT",+TIUI,0))
"RTN","TIUSRVR1",66,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUSRVR1",67,0)
 I +$$ISADDNDM^TIULC1(+TIUDA) D  Q
"RTN","TIUSRVR1",68,0)
 . N TIULINE,TIUPARNT K ^TMP("TIU ADDENDUM",$J) S $P(TIULINE,"=",79)=""
"RTN","TIUSRVR1",69,0)
 . S ^TMP("TIU ADDENDUM",$J)=TIUDA
"RTN","TIUSRVR1",70,0)
 . D LOADSIG(TIUDA,.TIUL) S TIUJ=TIUL
"RTN","TIUSRVR1",71,0)
 . I +$O(^TIU(8925.7,"B",TIUDA,0)) D XTRASIG(TIUDA,.TIUL) S TIUJ=TIUL
"RTN","TIUSRVR1",72,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUJ)="",TIUL=+$G(TIUL)+1
"RTN","TIUSRVR1",73,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUJ)=TIULINE,TIUL=+$G(TIUL)+1
"RTN","TIUSRVR1",74,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUJ)="",TIUL=+$G(TIUL)+1
"RTN","TIUSRVR1",75,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUJ)=" --- Original Document ---"
"RTN","TIUSRVR1",76,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUSRVR1",77,0)
 . S TIUJ=+$G(TIUJ)+1,^TMP("TIUVIEW",$J,TIUJ)="",TIUL=+$G(TIUL)+1
"RTN","TIUSRVR1",78,0)
 . S TIUPARNT=+$P(^TIU(8925,+TIUDA,0),U,6) D LOADREC(TIUPARNT,.TIUJ,.TIUL)
"RTN","TIUSRVR1",79,0)
 S TIUKID=0
"RTN","TIUSRVR1",80,0)
 F  S TIUKID=$O(^TIU(8925,"DAD",+TIUDA,TIUKID)) Q:+TIUKID'>0  D
"RTN","TIUSRVR1",81,0)
 . I +$$ISADDNDM^TIULC1(TIUKID)'>0 D LOADREC(TIUKID,.TIUJ,.TIUL)
"RTN","TIUSRVR1",82,0)
 I '$$ISCOMP(TIUDA) D LOADSIG(TIUDA,.TIUL)
"RTN","TIUSRVR1",83,0)
 I +$O(^TIU(8925.7,"B",TIUDA,0)) D XTRASIG(TIUDA,.TIUL)
"RTN","TIUSRVR1",84,0)
 S TIUKID=0
"RTN","TIUSRVR1",85,0)
 F  S TIUKID=$O(^TIU(8925,"DAD",+TIUDA,TIUKID)) Q:+TIUKID'>0  D
"RTN","TIUSRVR1",86,0)
 . I +$$ISADDNDM^TIULC1(TIUKID) D LOADADD(TIUKID,.TIUL)
"RTN","TIUSRVR1",87,0)
 K ^TMP("TIU ADDENDUM",$J)
"RTN","TIUSRVR1",88,0)
 Q
"RTN","TIUSRVR1",89,0)
ISCOMP(DA) ; Evaluate whether a given record is a component
"RTN","TIUSRVR1",90,0)
 N TIUY,TIUTYP
"RTN","TIUSRVR1",91,0)
 S TIUTYP=+$G(^TIU(8925,DA,0))
"RTN","TIUSRVR1",92,0)
 S TIUY=$S($P($G(^TIU(8925.1,+TIUTYP,0)),U,4)="CO":1,1:0)
"RTN","TIUSRVR1",93,0)
 Q TIUY
"RTN","TIUSRVR1",94,0)
LOADADD(TIUDADD,TIUL) ; Load addenda
"RTN","TIUSRVR1",95,0)
 N TIUDAUTH,TIUDATT,TIUJ,TIUSIG,TIUCSIG
"RTN","TIUSRVR1",96,0)
 I '+$$CANDO^TIULP(+TIUDADD,"VIEW") Q
"RTN","TIUSRVR1",97,0)
 S TIUJ=0,TIUI=+$G(TIUL)+1,^TMP("TIUVIEW",$J,TIUI)=" "
"RTN","TIUSRVR1",98,0)
 S TIUDADT=$$DATE^TIULS($P($G(^TIU(8925,+TIUDADD,13)),U),"MM/DD/YY")
"RTN","TIUSRVR1",99,0)
 S TIUI=TIUI+1,^TMP("TIUVIEW",$J,TIUI)=TIUDADT_" ADDENDUM:"
"RTN","TIUSRVR1",100,0)
 F  S TIUJ=$O(^TIU(8925,+TIUDADD,"TEXT",TIUJ)) Q:+TIUJ'>0  D
"RTN","TIUSRVR1",101,0)
 . S (TIUI,TIUL)=+$G(TIUI)+1
"RTN","TIUSRVR1",102,0)
 . S ^TMP("TIUVIEW",$J,TIUI)=$G(^TIU(8925,+TIUDADD,"TEXT",TIUJ,0))
"RTN","TIUSRVR1",103,0)
 D LOADSIG(TIUDADD,.TIUL)
"RTN","TIUSRVR1",104,0)
 Q
"RTN","TIUSRVR1",105,0)
LOADSIG(DA,TIUL) ; Get signature and cosignature blocks
"RTN","TIUSRVR1",106,0)
 N DIC,DIQ,DR,TIUSIG,TIUESIG1,TIUESIG2,TIUSIG1,TIUSIG2,TIUS1,TIUS2
"RTN","TIUSRVR1",107,0)
 N TIUSNM,TIUSTTL,TIUS1DT,TIUS2DT,TIUSDT
"RTN","TIUSRVR1",108,0)
 Q:'$D(^TIU(8925,DA,15))
"RTN","TIUSRVR1",109,0)
 S DIC=8925,DIQ="TIUSIG(",DIQ(0)="IE",DR="1204;1208;1501:1505;1507:1511"
"RTN","TIUSRVR1",110,0)
 D EN^DIQ1 I '$D(TIUSIG) Q
"RTN","TIUSRVR1",111,0)
 S TIUS1=$S(TIUSIG(8925,DA,1505,"I")="E":"/es/ ",TIUSIG(8925,DA,1505,"I")="C":"/chart/ ",1:"")_$G(TIUSIG(8925,DA,1503,"E"))
"RTN","TIUSRVR1",112,0)
 S TIUS2=$S(TIUSIG(8925,DA,1511,"I")="E":"/es/ ",TIUSIG(8925,DA,1511,"I")="C":"/chart/ ",1:"")_$G(TIUSIG(8925,DA,1509,"E"))
"RTN","TIUSRVR1",113,0)
 S TIUESIG1=$G(TIUSIG(8925,DA,1204,"I"))
"RTN","TIUSRVR1",114,0)
 S TIUSIG1=$G(TIUSIG(8925,DA,1502,"I"))
"RTN","TIUSRVR1",115,0)
 S TIUS1DT=$S(+$G(TIUSIG(8925,DA,1501,"I")):"Signed: "_$$DATE^TIULS($G(TIUSIG(8925,DA,1501,"I")),"MM/DD/YY HR:MIN"),1:"")
"RTN","TIUSRVR1",116,0)
 S TIUESIG2=$G(TIUSIG(8925,DA,1208,"I"))
"RTN","TIUSRVR1",117,0)
 S TIUS2DT=$S(+$G(TIUSIG(8925,DA,1507,"I")):"Cosigned: "_$$DATE^TIULS($G(TIUSIG(8925,DA,1507,"I")),"MM/DD/YY HR:MIN"),1:"")
"RTN","TIUSRVR1",118,0)
 S TIUSIG2=$G(TIUSIG(8925,DA,1508,"I"))
"RTN","TIUSRVR1",119,0)
 S TIUSNM=$$SETSTR^VALM1(TIUS1,$G(TIUSNM),1,35)
"RTN","TIUSRVR1",120,0)
 S TIUSNM=$$SETSTR^VALM1(TIUS2,$G(TIUSNM),40,35)
"RTN","TIUSRVR1",121,0)
 S TIUSTTL=$$SETSTR^VALM1(TIUSIG(8925,DA,1504,"E"),$G(TIUSTTL),1,35)
"RTN","TIUSRVR1",122,0)
 S TIUSTTL=$$SETSTR^VALM1(TIUSIG(8925,DA,1510,"E"),$G(TIUSTTL),40,35)
"RTN","TIUSRVR1",123,0)
 S TIUSDT=$$SETSTR^VALM1(TIUS1DT,$G(TIUSDT),1,35)
"RTN","TIUSRVR1",124,0)
 S TIUSDT=$$SETSTR^VALM1(TIUS2DT,$G(TIUSDT),40,35)
"RTN","TIUSRVR1",125,0)
 S TIUL=+$G(TIUL)+1,@TIUARR@(TIUL)=" "
"RTN","TIUSRVR1",126,0)
 S TIUL=+$G(TIUL)+1,@TIUARR@(TIUL)=TIUSNM
"RTN","TIUSRVR1",127,0)
 S TIUL=+$G(TIUL)+1,@TIUARR@(TIUL)=TIUSTTL
"RTN","TIUSRVR1",128,0)
 S TIUL=+$G(TIUL)+1,@TIUARR@(TIUL)=TIUSDT
"RTN","TIUSRVR1",129,0)
 I TIUSIG1]"",(TIUSIG1'=TIUESIG1) D LOADFOR(TIUSIG1,TIUESIG1,TIUSIG2,TIUESIG2,.TIUL) Q
"RTN","TIUSRVR1",130,0)
 I TIUSIG2]"",(TIUSIG2'=TIUESIG2) D LOADFOR(TIUSIG1,TIUESIG1,TIUSIG2,TIUESIG2,.TIUL)
"RTN","TIUSRVR1",131,0)
 Q
"RTN","TIUSRVR1",132,0)
XTRASIG(TIUDA,TIUL) ; Load addtional signature blocks
"RTN","TIUSRVR1",133,0)
 N TIUI,DA,DR,DIC,DIQ,TIUXTRA S TIUI=0
"RTN","TIUSRVR1",134,0)
 S DIC="^TIU(8925.7,",DIQ="TIUXTRA"
"RTN","TIUSRVR1",135,0)
 S TIUL=+$G(TIUL)+1,@TIUARR@(TIUL)=" "
"RTN","TIUSRVR1",136,0)
 S TIUL=+$G(TIUL)+1,@TIUARR@(TIUL)="Concurrence signatures:"
"RTN","TIUSRVR1",137,0)
 F  S TIUI=$O(^TIU(8925.7,"B",TIUDA,TIUI)) Q:+TIUI'>0  D
"RTN","TIUSRVR1",138,0)
 . N TIUX,TIUSGNR,TIUSDT
"RTN","TIUSRVR1",139,0)
 . S DA=TIUI,DR=".03:.08" D EN^DIQ1 Q:+$D(TIUXTRA)'>9
"RTN","TIUSRVR1",140,0)
 . S TIUL=+$G(TIUL)+1
"RTN","TIUSRVR1",141,0)
 . S TIUSGNR=$S($L($G(TIUXTRA(8925.7,DA,.06))):"/es/ "_$G(TIUXTRA(8925.7,DA,.06)),1:"     "_$G(TIUXTRA(8925.7,DA,.03)))
"RTN","TIUSRVR1",142,0)
 . S TIUSDT=$S($L($G(TIUXTRA(8925.7,DA,.04))):$G(TIUXTRA(8925.7,DA,.04)),1:"* AWAITING SIGNATURE *")
"RTN","TIUSRVR1",143,0)
 . S TIUX=$$SETSTR^VALM1(TIUSDT,$G(TIUX),1,38)
"RTN","TIUSRVR1",144,0)
 . S TIUX=$$SETSTR^VALM1(TIUSGNR,$G(TIUX),30,49)
"RTN","TIUSRVR1",145,0)
 . S @TIUARR@(TIUL)=TIUX,TIUX="",TIUL=+$G(TIUL)+1
"RTN","TIUSRVR1",146,0)
 . S TIUX=$$SETSTR^VALM1($G(TIUXTRA(8925.7,DA,.07)),$G(TIUX),35,44)
"RTN","TIUSRVR1",147,0)
 . S @TIUARR@(TIUL)=TIUX
"RTN","TIUSRVR1",148,0)
 Q
"RTN","TIUSRVR1",149,0)
LOADFOR(TIUS1,TIUES1,TIUS2,TIUES2,TIUL) ; Apply "for" block(s)
"RTN","TIUSRVR1",150,0)
 N TIUESN1,TIUEST1,TIUESN2,TIUEST2,TIUFORN,TIUFORT
"RTN","TIUSRVR1",151,0)
 S TIUESN1=$$SIGNAME^TIULS(TIUES1),TIUEST1=$$SIGTITL^TIULS(TIUES1)
"RTN","TIUSRVR1",152,0)
 S TIUESN2=$$SIGNAME^TIULS(TIUES2),TIUEST2=$$SIGTITL^TIULS(TIUES2)
"RTN","TIUSRVR1",153,0)
 I $G(TIUS1)'=$G(TIUES1) S TIUFORN=$$SETSTR^VALM1(TIUESN1,$G(TIUFORN),1,35),TIUFORT=$$SETSTR^VALM1(TIUEST1,$G(TIUFORT),1,35)
"RTN","TIUSRVR1",154,0)
 I $G(TIUS2)'=$G(TIUES2) S TIUFORN=$$SETSTR^VALM1(TIUESN2,$G(TIUFORN),40,35),TIUFORT=$$SETSTR^VALM1(TIUEST2,$G(TIUFORT),40,35)
"RTN","TIUSRVR1",155,0)
 S TIUL=+$G(TIUL)+1,@TIUARR@(TIUL)="for "_TIUFORN
"RTN","TIUSRVR1",156,0)
 S TIUL=+$G(TIUL)+1,@TIUARR@(TIUL)=TIUFORT
"RTN","TIUSRVR1",157,0)
 Q
"RTN","TIUSRVR1",158,0)
SETREC() ; Calls $$SETSTR^VALM1 for each line of ^TMP("TIUVIEW",$J,
"RTN","TIUSRVR1",159,0)
 N Y
"RTN","TIUSRVR1",160,0)
 S Y=$$SETSTR^VALM1($$NAME^TIULS($G(TIU("PNM")),"LAST,FI MI"),$G(Y),1,15)
"RTN","TIUSRVR1",161,0)
 S Y=$$SETSTR^VALM1($G(TIU("SSN")),$G(Y),16,12)
"RTN","TIUSRVR1",162,0)
 S Y=$$SETSTR^VALM1($P($G(TIU("WARD")),U,2),$G(Y),30,20)
"RTN","TIUSRVR1",163,0)
 I +TIU("DOCTYP")=1 D
"RTN","TIUSRVR1",164,0)
 . S Y=$$SETSTR^VALM1("Adm: "_$$DATE^TIULS(+TIU("EDT"),"MM/DD/YY"),$G(Y),51,13)
"RTN","TIUSRVR1",165,0)
 . S Y=$$SETSTR^VALM1("Dis: "_$$DATE^TIULS(+TIU("LDT"),"MM/DD/YY"),$G(Y),66,13)
"RTN","TIUSRVR1",166,0)
 I +TIU("DOCTYP")'=1 D
"RTN","TIUSRVR1",167,0)
 . S Y=$$SETSTR^VALM1("Visit Date: "_$$DATE^TIULS(+$G(TIU("EDT")),"MM/DD/YY@HR:MIN"),$G(Y),53,26)
"RTN","TIUSRVR1",168,0)
 Q Y
"RTN","TIUSRVR1",169,0)
CLEAN ; Clean up your Mess!!!
"RTN","TIUSRVR1",170,0)
 D CLEAN^VALM10 K VALMHDR,DFN,TIU,TIUPRM0,TIUPRM1
"RTN","TIUSRVR1",171,0)
 Q
"RTN","TIUT")
0^186^B16322348
"RTN","TIUT",1,0)
TIUT ; SLC/JER - Release from or Send back to transcription ;1/19/95  17:43
"RTN","TIUT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUT",3,0)
SENDBACK(DA) ; Send Document back to transcription
"RTN","TIUT",4,0)
 N DIE,DR,TIUTYP,TIUSBOK
"RTN","TIUT",5,0)
 S TIUSBOK=$$CANDO^TIULP(DA,"SEND BACK")
"RTN","TIUT",6,0)
 I +TIUSBOK'>0 D  Q
"RTN","TIUT",7,0)
 . W !,$C(7),$P(TIUSBOK,U,2) ; Echo denial message
"RTN","TIUT",8,0)
 . I $$READ^TIUU("EA","Press RETURN to continue...") W "" ; pause
"RTN","TIUT",9,0)
 L +^TIU(8925,+DA):1
"RTN","TIUT",10,0)
 E  W !?5,$C(7),"Another user is editing this entry." H 2 Q
"RTN","TIUT",11,0)
 S TIUTYP=$P($P(^TIU(8925.1,+^TIU(8925,+DA,0),0),U),U)
"RTN","TIUT",12,0)
 I +$$CANSEND^TIULP1(DA) D
"RTN","TIUT",13,0)
 . S DR=".05///UNRELEASED;1501///@;1306///@;1305///@;1304///@",DIE=8925 D ^DIE
"RTN","TIUT",14,0)
 . W !,TIUTYP," Sent Back." H 2
"RTN","TIUT",15,0)
 . D SENDTRAN^TIUALRT(DA) S TIUCHNG=1
"RTN","TIUT",16,0)
 . ; D UPDTIRT^TIUIRT(.TIU,+DA)
"RTN","TIUT",17,0)
 E  D
"RTN","TIUT",18,0)
 . W !,$C(7),$C(7),$C(7),TIUTYP," Not Sent Back." H 2
"RTN","TIUT",19,0)
 L -^TIU(8925,+DA)
"RTN","TIUT",20,0)
 Q
"RTN","TIUT",21,0)
RELEASE(DA,TIUREL) ; Release Document from transcription
"RTN","TIUT",22,0)
 ; TIUREL=1 ==> Document released
"RTN","TIUT",23,0)
 N DADTYP,DIE,DR,TIUD0,TIUTYP,TIUTNM,TIULINE,TIUDPRM
"RTN","TIUT",24,0)
 S TIUD0=$G(^TIU(8925,+DA,0)),TIUTYP=+TIUD0,TIUTNM=$$PNAME^TIULC1(TIUTYP)
"RTN","TIUT",25,0)
 ; If document is not unreleased, quit
"RTN","TIUT",26,0)
 I +$P(TIUD0,U,5)'=3 Q
"RTN","TIUT",27,0)
 ; I +$$ISADDNDM^TIULC1(DA) D  I 1
"RTN","TIUT",28,0)
 ; . S DADTYP=+$G(^TIU(8925,+$P(^TIU(8925,+DA,0),U,6),0))
"RTN","TIUT",29,0)
 ; . D DOCPRM^TIULC1(DADTYP,.TIUDPRM)
"RTN","TIUT",30,0)
 D DOCPRM^TIULC1(TIUTYP,.TIUDPRM,DA)
"RTN","TIUT",31,0)
 ; If Release is required, and not automatic, prompt user to determine
"RTN","TIUT",32,0)
 ; whether document is ready...
"RTN","TIUT",33,0)
 I '+$G(TIUREL),+$P($G(TIUDPRM(0)),U,2) D  Q:'+TIUREL
"RTN","TIUT",34,0)
 . S TIUREL=$$READ^TIUU("YO","Is this "_TIUTNM_" ready to release from DRAFT","YES","^D REL^TIUDIRH")
"RTN","TIUT",35,0)
 . I '+TIUREL W !," NOT RELEASED." H 2
"RTN","TIUT",36,0)
 ; If release is not required, release automatically this assures alerts
"RTN","TIUT",37,0)
 ; printing, etc. happen appropriately, even for documents where release
"RTN","TIUT",38,0)
 ; from draft is not a "normal" processing step
"RTN","TIUT",39,0)
 I '+$G(TIUREL),'+$P($G(TIUDPRM(0)),U,2) S TIUREL=1
"RTN","TIUT",40,0)
 I +$G(TIUREL) D
"RTN","TIUT",41,0)
 . L +^TIU(8925,+DA):1
"RTN","TIUT",42,0)
 . E  W:'$D(ZTQUEUED) !?5,$C(7),"Another user is editing this entry." H 2 Q
"RTN","TIUT",43,0)
 . S TIULINE=$$LINECNT^TIULC(DA)
"RTN","TIUT",44,0)
 . S DR=".05///"_$S(+$$REQVER^TIULC(+DA,+$P($G(TIUDPRM(0)),U,3)):"UNVERIFIED",1:"UNSIGNED")
"RTN","TIUT",45,0)
 . S DR=DR_";.1////"_TIULINE
"RTN","TIUT",46,0)
 . ; If verification is required and user holds autoverify key, stuff
"RTN","TIUT",47,0)
 . ; verifying clerk and verification date
"RTN","TIUT",48,0)
 . I +$$REQVER^TIULC(+DA,+$P($G(TIUDPRM(0)),U,3)),+$D(^XUSEC("TIU AUTOVERIFY",DUZ)) S DR=DR_";1306////"_DUZ_";1305////"_$$NOW^TIULC
"RTN","TIUT",49,0)
 . S DR=DR_";1304////"_$$NOW^TIULC,DIE=8925 D ^DIE
"RTN","TIUT",50,0)
 . L -^TIU(8925,+DA)
"RTN","TIUT",51,0)
 . I '$D(ZTQUEUED),+$$ISA^USRLM(DUZ,"TRANSCRIPTIONIST") W !,"LINES TYPED: ",TIULINE
"RTN","TIUT",52,0)
 I '$D(ZTQUEUED),(+$P($G(TIUDPRM(0)),U,2)=1) W !,$$PNAME^TIULC1(TIUTYP),$S(+$G(TIUREL):" Released.",1:" Unreleased.") H 2
"RTN","TIUT",53,0)
 I +$G(TIUREL) D
"RTN","TIUT",54,0)
 . I +$P($G(TIUDPRM(0)),U,2) D MAIN^TIUPD(+DA,"R")
"RTN","TIUT",55,0)
 . D ALERTDEL^TIUALRT(DA)
"RTN","TIUT",56,0)
 . ;If the document does not require verification, or if the document
"RTN","TIUT",57,0)
 . ;does require verification, but the user holds the AUTOVERIFY key,
"RTN","TIUT",58,0)
 . ;send alerts
"RTN","TIUT",59,0)
 . I $S('+$$REQVER^TIULC(+DA,+$P($G(TIUDPRM(0)),U,3)):1,(+$$REQVER^TIULC(+DA,+$P($G(TIUDPRM(0)),U,3))&$D(^XUSEC("TIU AUTOVERIFY",+DUZ))):1,1:0) D SEND^TIUALRT(DA)
"RTN","TIUT",60,0)
 Q
"RTN","TIUT",61,0)
VERIFY(DA) ; Evaluate requirements for verification, prompt as appropriate
"RTN","TIUT",62,0)
 N DADTYP,TIUTYP,TIUDPRM,TIUTNM,TIUD13,TIUY
"RTN","TIUT",63,0)
 S TIUD13=$G(^TIU(8925,+DA,13))
"RTN","TIUT",64,0)
 S TIUTYP=+$G(^TIU(8925,+DA,0))
"RTN","TIUT",65,0)
 ; I +$$ISADDNDM^TIULC1(DA) D  I 1
"RTN","TIUT",66,0)
 ; . S DADTYP=+$G(^TIU(8925,+$P(^TIU(8925,+DA,0),U,6),0))
"RTN","TIUT",67,0)
 ; . D DOCPRM^TIULC1(DADTYP,.TIUDPRM)
"RTN","TIUT",68,0)
 D DOCPRM^TIULC1(TIUTYP,.TIUDPRM,+DA)
"RTN","TIUT",69,0)
 ; If verification isn't required, or if the user is not authorized to
"RTN","TIUT",70,0)
 ; verify the document, then quit
"RTN","TIUT",71,0)
 I '$D(TIUDPRM(0)) Q
"RTN","TIUT",72,0)
 I '+$$REQVER^TIULC(+DA,+$P(TIUDPRM(0),U,3)) Q
"RTN","TIUT",73,0)
 I '+$$CANDO^TIULP(+DA,"VERIFICATION") Q
"RTN","TIUT",74,0)
 S TIUTNM=$$PNAME^TIULC1(TIUTYP)
"RTN","TIUT",75,0)
 I +$P(TIUD13,U,5) D  I 1
"RTN","TIUT",76,0)
 . W !!,"This "_TIUTNM_" is already verified."
"RTN","TIUT",77,0)
 . S TIUY=$$READ^TIUU("YO","Do you want to UNVERIFY this "_TIUTNM,"NO","^D UNVER^TIUDIRH")
"RTN","TIUT",78,0)
 . I +TIUY W !," UNVERIFIED." D
"RTN","TIUT",79,0)
 . . S DIE=8925,DR="1305///@;1306///@" D ^DIE W "."
"RTN","TIUT",80,0)
 . . D ALERTDEL^TIUALRT(DA)
"RTN","TIUT",81,0)
 E  D
"RTN","TIUT",82,0)
 . S TIUY=$$READ^TIUU("YO","VERIFY this "_TIUTNM,"NO","^D VER^TIUDIRH")
"RTN","TIUT",83,0)
 . I '+TIUY W !," NOT VERIFIED." Q
"RTN","TIUT",84,0)
 . S DIE=8925,DR=".05///UNSIGNED;1305////"_+$G(DT)_";1306////"_DT D ^DIE
"RTN","TIUT",85,0)
 . I +DA W !," VERIFIED." D MAIN^TIUPD(+DA,"V"),SEND^TIUALRT(DA)
"RTN","TIUT",86,0)
 Q
"RTN","TIUTHLP")
0^187^B6271007
"RTN","TIUTHLP",1,0)
TIUTHLP ; SLC/JER - Help for Transcription ;3/16/93  06:09
"RTN","TIUTHLP",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUTHLP",3,0)
MAIN ; Control branching
"RTN","TIUTHLP",4,0)
 N DIC,X,Y,TIUFPRIV S TIUFPRIV=1
"RTN","TIUTHLP",5,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUTHLP",6,0)
 S DIC=8925.1,DIC(0)="AEMQZ",DIC("A")="Select DOCUMENT DEFINITION: "
"RTN","TIUTHLP",7,0)
 S DIC("B")=$G(^DISV(+DUZ,"^TIU(8925.1,"))
"RTN","TIUTHLP",8,0)
 D ^DIC I $D(DTOUT) W "   Timed out..." Q
"RTN","TIUTHLP",9,0)
 I +Y'>0 D
"RTN","TIUTHLP",10,0)
 . W !!,"Required information for UPLOAD help not set up for this report type."
"RTN","TIUTHLP",11,0)
 I $P(TIUPRM0,U,16)="D" D DHDR(.Y,TIUPRM0,TIUPRM1)
"RTN","TIUTHLP",12,0)
 E  I $P(TIUPRM0,U,16)="C" D CHDR(.Y,TIUPRM0,TIUPRM1)
"RTN","TIUTHLP",13,0)
 E  W !!,"Required information for UPLOAD help not set up for this report type."
"RTN","TIUTHLP",14,0)
 Q
"RTN","TIUTHLP",15,0)
DHDR(TIUX,TIUPRM0,TIUPRM1) ; Display Delimited String Header
"RTN","TIUTHLP",16,0)
 N TIUA,TIUI,TIUHSIG,TIUESTR,TIUHSTR,TIULIM,TIUTYP,TIUITEM
"RTN","TIUTHLP",17,0)
 N TIUNODE
"RTN","TIUTHLP",18,0)
 S TIUHSIG=$P(TIUPRM0,U,10),TIULIM=$P(TIUPRM0,U,13),TIUTYP=$P(TIUX(0),U,2)
"RTN","TIUTHLP",19,0)
 S TIUA=+TIUX,TIUI=2,(TIUHSTR,TIUESTR)=TIUHSIG_TIULIM_TIUTYP
"RTN","TIUTHLP",20,0)
 F  S TIUI=$O(^TIU(8925.1,TIUA,"ITEM",TIUI)) Q:+TIUI'>0  D
"RTN","TIUTHLP",21,0)
 . S TIUNODE=$G(^TIU(8925.1,TIUA,"ITEM",TIUI,0))
"RTN","TIUTHLP",22,0)
 . S $P(TIUHSTR,TIULIM,TIUI)=$P(TIUNODE,U,2)
"RTN","TIUTHLP",23,0)
 . S $P(TIUESTR,TIULIM,TIUI)=$P(TIUNODE,U,5)
"RTN","TIUTHLP",24,0)
 W !!,"Header line example:"
"RTN","TIUTHLP",25,0)
 W !!,TIUESTR ;header string with example of data
"RTN","TIUTHLP",26,0)
 W !!,"Report format:"
"RTN","TIUTHLP",27,0)
 W !!,TIUHSTR ;Header string with data description
"RTN","TIUTHLP",28,0)
 D RESTHDR(.TIUX,TIUPRM0,TIUPRM1)
"RTN","TIUTHLP",29,0)
 Q
"RTN","TIUTHLP",30,0)
CHDR(TIUX,TIUPRM0,TIUPRM1) ; Display Captioned Header
"RTN","TIUTHLP",31,0)
 N TIUA,TIUI,TIUNODE
"RTN","TIUTHLP",32,0)
 S TIUA=+TIUX
"RTN","TIUTHLP",33,0)
 W !!,$P(TIUPRM0,U,10),":",?40,$P(TIUX(0),U)
"RTN","TIUTHLP",34,0)
 S TIUI=0
"RTN","TIUTHLP",35,0)
 F  S TIUI=$O(^TIU(8925.1,TIUA,"HEAD",TIUI)) Q:+TIUI'>0  D
"RTN","TIUTHLP",36,0)
 . S TIUNODE=$G(^TIU(8925.1,TIUA,"HEAD",TIUI,0))
"RTN","TIUTHLP",37,0)
 . W !,$P(TIUNODE,U)_":",?40,$S($P(TIUNODE,U,5)]"":$P(TIUNODE,U,5),1:"""field entry""")
"RTN","TIUTHLP",38,0)
 W !,$P(TIUPRM0,U,12)
"RTN","TIUTHLP",39,0)
 D RESTHDR(.TIUX,TIUPRM0,TIUPRM1)
"RTN","TIUTHLP",40,0)
 Q
"RTN","TIUTHLP",41,0)
RESTHDR(TIUX,TIUPRM0,TIUPRM1) ;Header info that is same for both types
"RTN","TIUTHLP",42,0)
 W !?2,$P(TIUX(0),U)," Text"
"RTN","TIUTHLP",43,0)
 W !,$P(TIUPRM0,U,11)
"RTN","TIUTHLP",44,0)
 W !!,"*** File should be ASCII with width no greater than 80 columns."
"RTN","TIUTHLP",45,0)
 W !,"*** Use ","""",$P(TIUPRM1,U,6),""""," for ","""BLANKS"""
"RTN","TIUTHLP",46,0)
 W " (word or phrase in dictation that isn't understood)."
"RTN","TIUTHLP",47,0)
 Q
"RTN","TIUTSK")
0^188^B9937250
"RTN","TIUTSK",1,0)
TIUTSK ; SLC/JER - TIU's Nightly Daemon ;6/17/96  16:26
"RTN","TIUTSK",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUTSK",3,0)
MAIN ; All records are read. DC date updated, Record purged, Alerts are 
"RTN","TIUTSK",4,0)
 ; generated if appropriate
"RTN","TIUTSK",5,0)
 N TIUDA,TIUPRM0,TIUPRM1,TIUDATE,TIUENTDT,TIUPDT,TIUODT
"RTN","TIUTSK",6,0)
 D SETPARM^TIULE
"RTN","TIUTSK",7,0)
 ; Traverse "FIX" X-ref to fix temporary reference dates & back-fill
"RTN","TIUTSK",8,0)
 ; Discharge Dates
"RTN","TIUTSK",9,0)
 S TIUDA="" F  S TIUDA=$O(^TIU(8925,"FIX",1,TIUDA)) Q:TIUDA'>0  D
"RTN","TIUTSK",10,0)
 . D UPDDCDT(TIUDA) ;Ref Date fixed/DC Date updated if missing
"RTN","TIUTSK",11,0)
 ; Traverse "F" X-ref to identify records for which the grace period
"RTN","TIUTSK",12,0)
 ; for purge has expired
"RTN","TIUTSK",13,0)
 S TIUPDT=$$FMADD^XLFDT(DT,-$P(TIUPRM0,U,4))
"RTN","TIUTSK",14,0)
 S TIUODT=$$FMADD^XLFDT(DT,-$P(TIUPRM0,U,5))
"RTN","TIUTSK",15,0)
 S TIUENTDT=0
"RTN","TIUTSK",16,0)
 ; Traverse "F" X-ref to identify records overdue for signature or purge
"RTN","TIUTSK",17,0)
 F  S TIUENTDT=$O(^TIU(8925,"F",TIUENTDT)) Q:+TIUENTDT'>0!(TIUENTDT>TIUODT)  D
"RTN","TIUTSK",18,0)
 . S TIUDA=0 F  S TIUDA=$O(^TIU(8925,"F",+TIUENTDT,TIUDA)) Q:+TIUDA'>0  D
"RTN","TIUTSK",19,0)
 . . I (TIUPDT<$$FMADD^XLFDT(DT,-90)),+$$PURGE^TIULC(TIUDA) D PURGE(TIUDA) ;Purges old records
"RTN","TIUTSK",20,0)
 . . I +$$OVERDUE^TIULC(TIUDA) D SEND^TIUALRT(TIUDA,1) ;Alert for overdue
"RTN","TIUTSK",21,0)
 ; If upload buffer rec older than 30 days, delete it & its alerts
"RTN","TIUTSK",22,0)
 S TIUDA=0 F  S TIUDA=$O(^TIU(8925.2,TIUDA)) Q:TIUDA'>0  D
"RTN","TIUTSK",23,0)
 . N TIUDATE
"RTN","TIUTSK",24,0)
 . S TIUDATE=$P($G(^TIU(8925.2,TIUDA,0)),U,3)
"RTN","TIUTSK",25,0)
 . Q:+TIUDATE'>0
"RTN","TIUTSK",26,0)
 . I $$FMDIFF^XLFDT(DT,TIUDATE)>30 D
"RTN","TIUTSK",27,0)
 . . D BUFPURGE^TIUPUTC(TIUDA),ALERTDEL^TIUPEVNT(TIUDA)
"RTN","TIUTSK",28,0)
 Q
"RTN","TIUTSK",29,0)
UPDDCDT(TIUDA) ; If missing DC date & Patient Movement file has DC date,
"RTN","TIUTSK",30,0)
 ;         DC date updated.
"RTN","TIUTSK",31,0)
 N DFN,DIE,DR,TIU,TIUDAD,TIUDDT,TIUD0,TIUD14,TIUDGPM
"RTN","TIUTSK",32,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD14=$G(^TIU(8925,+TIUDA,14))
"RTN","TIUTSK",33,0)
 S TIUDGPM=+$P(TIUD14,U)
"RTN","TIUTSK",34,0)
 I +$P($G(^DGPM(+TIUDGPM,0)),U,17)'>0 D  Q
"RTN","TIUTSK",35,0)
 . I +$P(TIUD0,U,12)>0 Q
"RTN","TIUTSK",36,0)
 . S DIE=8925,DR=".12////1",DA=TIUDA D ^DIE
"RTN","TIUTSK",37,0)
 I TIUD0'="",'+$P(TIUD0,U,6),(($P(TIUD0,U,8)="")!(+$P(TIUD0,U,12)>0)) D
"RTN","TIUTSK",38,0)
 . D GETTIU^TIULD(.TIU,TIUDA)
"RTN","TIUTSK",39,0)
 . I +$G(TIU("LDT"))>0 D
"RTN","TIUTSK",40,0)
 . . S TIUDAD=$P(TIUD0,U,6)
"RTN","TIUTSK",41,0)
 . . D FIXDC(TIUDA,TIUDAD,DFN,.TIU)
"RTN","TIUTSK",42,0)
 Q
"RTN","TIUTSK",43,0)
PURGE(DA) ; When purge criteria met, document and addenda purged
"RTN","TIUTSK",44,0)
 N DR,DIE,TIUTYP,TIUDA,X,Y S TIUDA=0
"RTN","TIUTSK",45,0)
 F  S TIUDA=+$O(^TIU(8925,"DAD",+DA,TIUDA)) Q:+TIUDA'>0  D
"RTN","TIUTSK",46,0)
 . I +$$ISADDNDM^TIULC1(TIUDA) D PURGE(TIUDA) I 1
"RTN","TIUTSK",47,0)
 . E  D DIK^TIURB(TIUDA) ; Remove components entirely
"RTN","TIUTSK",48,0)
 S DIE=8925,DR=".05///PURGED;1609////"_$$NOW^TIULC_";2///@" D ^DIE
"RTN","TIUTSK",49,0)
 S ^TIU(8925,+DA,"TEXT",0)="^^"_2_U_2_U_DT_"^^"
"RTN","TIUTSK",50,0)
 S ^TIU(8925,+DA,"TEXT",1,0)=" "
"RTN","TIUTSK",51,0)
 S ^TIU(8925,+DA,"TEXT",2,0)="  Document Purged on "_$$DATE^TIULS(DT,"MM/DD/YY")_"."
"RTN","TIUTSK",52,0)
 Q
"RTN","TIUTSK",53,0)
FIXDC(DA,PARENT,DFN,TIU) ; Stuff fixed field data
"RTN","TIUTSK",54,0)
 N FDA,FDARR,IENS,FLAGS,TIUMSG
"RTN","TIUTSK",55,0)
 S IENS=""""_DA_",""",FDARR="FDA(8925,"_IENS_")",FLAGS="K"
"RTN","TIUTSK",56,0)
 I +$G(PARENT)'>0 D
"RTN","TIUTSK",57,0)
 . S @FDARR@(.02)=$G(DFN),@FDARR@(.03)=$P(TIU("VISIT"),U)
"RTN","TIUTSK",58,0)
 . S @FDARR@(.08)=$P(TIU("LDT"),U),@FDARR@(1401)=TIU("AD#")
"RTN","TIUTSK",59,0)
 . S @FDARR@(1402)=$P($G(TIU("TS")),U)
"RTN","TIUTSK",60,0)
 I +$G(PARENT)>0 D
"RTN","TIUTSK",61,0)
 . S @FDARR@(.02)=+$P(^TIU(8925,+PARENT,0),U,2)
"RTN","TIUTSK",62,0)
 . S @FDARR@(.03)=+$P(^TIU(8925,+PARENT,0),U,3)
"RTN","TIUTSK",63,0)
 . S @FDARR@(.06)=PARENT,@FDARR@(.08)=$P(TIU("LDT"),U)
"RTN","TIUTSK",64,0)
 . S @FDARR@(1401)=$P(^TIU(8925,+PARENT,14),U)
"RTN","TIUTSK",65,0)
 . S @FDARR@(1402)=$P(^TIU(8925,+PARENT,14),U,2)
"RTN","TIUTSK",66,0)
 S @FDARR@(1205)=$P($G(TIU("LOC")),U)
"RTN","TIUTSK",67,0)
 S @FDARR@(.12)="@"
"RTN","TIUTSK",68,0)
 S @FDARR@(1301)=+$G(TIU("LDT"))
"RTN","TIUTSK",69,0)
 D FILE^DIE(FLAGS,"FDA","TIUMSG") ; File record
"RTN","TIUTSK",70,0)
 Q
"RTN","TIUU")
0^189^B4797606
"RTN","TIUU",1,0)
TIUU ; SLC/JER - Utility subroutines for Discharge Summary ;9/7/94  16:37
"RTN","TIUU",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997;
"RTN","TIUU",3,0)
TITLE(X) ; Pads titles
"RTN","TIUU",4,0)
 ; Recieves:    X=title to be padded
"RTN","TIUU",5,0)
 N I,TITLE
"RTN","TIUU",6,0)
 S TITLE="" F I=1:1:$L(X) S TITLE=TITLE_" "_$E(X,I)
"RTN","TIUU",7,0)
 Q TITLE
"RTN","TIUU",8,0)
JUSTIFY(X,JUST) ; Justifies Text
"RTN","TIUU",9,0)
 ; Receives:    X=text to be justified
"RTN","TIUU",10,0)
 ;           JUST="L" --> left, "C" --> center, "R" --> right,
"RTN","TIUU",11,0)
 ;                "J" --> justified to WIDTH
"RTN","TIUU",12,0)
 ;           WIDTH=justification width (when JUST="j"
"RTN","TIUU",13,0)
 I "Cc"[JUST W ?((80-$L(X))/2),X
"RTN","TIUU",14,0)
 I "Ll"[JUST W X,!!
"RTN","TIUU",15,0)
 I "Rr"[JUST W ?(80-$L(X)),X
"RTN","TIUU",16,0)
 Q
"RTN","TIUU",17,0)
STOP(PROMPT,SCROLL) ; Call DIR at bottom of screen
"RTN","TIUU",18,0)
 N DIR,X,Y
"RTN","TIUU",19,0)
 I $E(IOST)'="C" S Y="" G STOPX
"RTN","TIUU",20,0)
 I +$G(SCROLL),(IOSL>($Y+5)) F  W ! Q:IOSL<($Y+6)
"RTN","TIUU",21,0)
 S DIR(0)="FO^1:1",DIR("A")=$S($G(PROMPT)]"":PROMPT,1:"Press RETURN to continue or '^' to exit")
"RTN","TIUU",22,0)
 S DIR("?")="Enter '^' to quit present action or '^^' to quit to menu"
"RTN","TIUU",23,0)
 D ^DIR I $D(DIRUT),(Y="") K DIRUT
"RTN","TIUU",24,0)
 S Y=$S(Y="^":0,Y="^^":0,$D(DTOUT):"",Y="":1,1:1_U_Y)
"RTN","TIUU",25,0)
STOPX Q Y
"RTN","TIUU",26,0)
READ(TYPE,PROMPT,DEFAULT,HELP,SCREEN) ; Calls reader, returns response
"RTN","TIUU",27,0)
 N DIR,X,Y
"RTN","TIUU",28,0)
 S DIR(0)=TYPE
"RTN","TIUU",29,0)
 I $D(SCREEN) S DIR("S")=SCREEN
"RTN","TIUU",30,0)
 I $G(PROMPT)]"" S DIR("A")=PROMPT
"RTN","TIUU",31,0)
 I $G(DEFAULT)]"" S DIR("B")=DEFAULT
"RTN","TIUU",32,0)
 I $D(HELP) S DIR("?")=HELP
"RTN","TIUU",33,0)
 D ^DIR
"RTN","TIUU",34,0)
 I $G(X)="@" S Y="@" G READX
"RTN","TIUU",35,0)
 I Y]"",($L($G(Y),U)'=2) S Y=Y_U_$G(Y(0),Y)
"RTN","TIUU",36,0)
READX Q Y
"RTN","TIUU",37,0)
UPDATE ; Updates fields in review screen
"RTN","TIUU",38,0)
 ; Receives: X=new value of field
"RTN","TIUU",39,0)
 ;           FLD=name of field to be modified
"RTN","TIUU",40,0)
 I $D(^TMP("TIUVIEW",$J,3,0)),+$G(TIUDA) D
"RTN","TIUU",41,0)
 . S ^TMP("TIUVIEW",$J,3,0)=$$SETSTR^VALM1("SIG STATUS: "_$P($$STATUS^TIULC(TIUDA),U,2),$G(^TMP("TIUVIEW",$J,3,0)),38,41)
"RTN","TIUU",42,0)
 Q
"RTN","TIUU",43,0)
LISTREAD(TIULIST,ANSTYPE) ; Present list to user for selection of item(s)
"RTN","TIUU",44,0)
 N TIUI,TIUL,TIUY S (TIUI,TIUY)=0
"RTN","TIUU",45,0)
 S ANSTYPE=$S($G(ANSTYPE)]"":$G(ANSTYPE),1:"N")
"RTN","TIUU",46,0)
 F  S TIUI=$O(TIULIST(TIUI)) Q:+TIUI'>0  D
"RTN","TIUU",47,0)
 . W !,TIUI,?5,$P(TIULIST(TIUI),U,2) S TIUL=TIUI
"RTN","TIUU",48,0)
 I +$G(TIUL) D
"RTN","TIUU",49,0)
 . W !
"RTN","TIUU",50,0)
 . S TIUY=$$READ(ANSTYPE_"A^1:"_TIUL,"Select "_$P(TIULIST,U)_": ")
"RTN","TIUU",51,0)
 . I +TIUY S TIUY=$G(TIULIST(+TIUY))
"RTN","TIUU",52,0)
 Q TIUY
"RTN","TIUUPEDT")
0^190^B5452800
"RTN","TIUUPEDT",1,0)
TIUUPEDT ; SLC/JER - Upload Parameter Edit ;4/23/93  14:53
"RTN","TIUUPEDT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUUPEDT",3,0)
MAIN ; Controls branching
"RTN","TIUUPEDT",4,0)
 N DIC,DA,DIE,DLAYGO,DR,TIUPRM0,TIUPRM1,TIUPRM3,TIUUSRC,TIU1ST,X,Y
"RTN","TIUUPEDT",5,0)
 N TIUQUIT
"RTN","TIUUPEDT",6,0)
 D:'$D(TIUPRM0) SETPARM^TIULE
"RTN","TIUUPEDT",7,0)
 W !,"First edit Institution-wide upload parameters:",!
"RTN","TIUUPEDT",8,0)
 S (DIC,DLAYGO)=8925.99,DIC(0)="AEMQL",DIC("A")="Select INSTITUTION: "
"RTN","TIUUPEDT",9,0)
 D ^DIC K DLAYGO Q:+Y'>0  S DA=+Y
"RTN","TIUUPEDT",10,0)
 S DIE=8925.99,DR="[TIU UPLOAD PARAMETER EDIT]"
"RTN","TIUUPEDT",11,0)
 D ^DIE
"RTN","TIUUPEDT",12,0)
 D SETPARM^TIULE
"RTN","TIUUPEDT",13,0)
 W !,"Now edit the DOCUMENT DEFINITION file:"
"RTN","TIUUPEDT",14,0)
 F  D  Q:+$G(TIUQUIT)
"RTN","TIUUPEDT",15,0)
 . N TIUREP,TIUX,X,Y,DA,DIE,DR
"RTN","TIUUPEDT",16,0)
 . S Y=$$ASKTYP^TIULA2(38,"LAST","I $P(^TIU(8925.1,+Y,0),U,4)'=""O""","DOCUMENT DEFINITION: ")
"RTN","TIUUPEDT",17,0)
 . I +Y'>0 S TIUQUIT=1 Q 
"RTN","TIUUPEDT",18,0)
 . S DA=+Y,TIUREP=+Y_U_$$PNAME^TIULC1(+DA)
"RTN","TIUUPEDT",19,0)
 . S TIUREP(0)=$G(^TIU(8925.1,+DA,0))
"RTN","TIUUPEDT",20,0)
 . S DIE="^TIU(8925.1,",DR="[TIU UPLOAD FIELD EDIT]"
"RTN","TIUUPEDT",21,0)
 . D ^DIE S Y=1
"RTN","TIUUPEDT",22,0)
 . I $D(^TIU(8925.1,+DA,"HEAD"))>9!($D(^TIU(8925.1,+DA,"ITEM"))>9) D
"RTN","TIUUPEDT",23,0)
 . . W !!,"The header for the ",$P(TIUREP,U,2)," ",$$DDH(TIUREP(0))," is now defined as:"
"RTN","TIUUPEDT",24,0)
 . . I $P(TIUPRM0,U,16)="D" D DHDR^TIUTHLP(.TIUREP,TIUPRM0,TIUPRM1)
"RTN","TIUUPEDT",25,0)
 . . I $P(TIUPRM0,U,16)="C" D CHDR^TIUTHLP(.TIUREP,TIUPRM0,TIUPRM1)
"RTN","TIUUPEDT",26,0)
 . . W !
"RTN","TIUUPEDT",27,0)
 Q
"RTN","TIUUPEDT",28,0)
DDH(TIUDDEF) ; Translate position in DDH
"RTN","TIUUPEDT",29,0)
 N TIUY
"RTN","TIUUPEDT",30,0)
 S TIUY=$S($P(TIUDDEF,U,4)="DOC":"TITLE",$P(TIUDDEF,U,4)="DC":"DOCUMENT CLASS",$P(TIUDDEF,U,4)="CL":"CLASS",1:"Document Definition")
"RTN","TIUUPEDT",31,0)
 Q TIUY
"RTN","TIUUPEDT",32,0)
TXTFLD(TFILE,TIUFLT) ; Get Text Field # from ^DD(Target file #,
"RTN","TIUUPEDT",33,0)
 N DIC,X,Y
"RTN","TIUUPEDT",34,0)
 S DIC="^DD("_TFILE_",",DIC(0)="AEMQZ",DIC("A")="Select TARGET TEXT FIELD: "
"RTN","TIUUPEDT",35,0)
 S DIC("S")="I +$$ISWP^TIUUPEDT(TFILE,+Y)"
"RTN","TIUUPEDT",36,0)
 I $D(TIUFLT),(+$G(TIUFLT)>0) S DIC("B")=TIUFLT
"RTN","TIUUPEDT",37,0)
 D ^DIC K DIC("S") G:+Y'>0 TXTFLDX
"RTN","TIUUPEDT",38,0)
 S Y=+Y_";"_$P($P(Y(0),U,4),";")
"RTN","TIUUPEDT",39,0)
TXTFLDX Q Y
"RTN","TIUUPEDT",40,0)
ISWP(TFILE,TFLD) ; Is a given field a Word-processing type field
"RTN","TIUUPEDT",41,0)
 N X,Y S Y=0
"RTN","TIUUPEDT",42,0)
 I +$P(^DD(TFILE,TFLD,0),U,2)>0 D
"RTN","TIUUPEDT",43,0)
 . N SFILE S SFILE=+$P(^DD(TFILE,TFLD,0),U,2)
"RTN","TIUUPEDT",44,0)
 . S Y=$S($P(^DD(SFILE,.01,0),U,2)["W":1,1:0)
"RTN","TIUUPEDT",45,0)
 Q Y
"RTN","TIUUPLD")
0^191^B15440148
"RTN","TIUUPLD",1,0)
TIUUPLD ; SLC/JER - ASCII Upload ;10/4/93  09:12
"RTN","TIUUPLD",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUUPLD",3,0)
MAIN ; Control branching
"RTN","TIUUPLD",4,0)
 N EOM,TIUDA,TIUERR,TIUHDR,TIULN,TIUSRC,X
"RTN","TIUUPLD",5,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUUPLD",6,0)
 S TIUSRC=$P($G(TIUPRM0),U,9),EOM=$P($G(TIUPRM0),U,11)
"RTN","TIUUPLD",7,0)
 I EOM']"",($P(TIUPRM0,U,17)'="k") W !,$C(7),$C(7),$C(7),"No End of Message Signal Defined - Contact IRM.",! Q
"RTN","TIUUPLD",8,0)
 S:TIUSRC']"" TIUSRC="R"
"RTN","TIUUPLD",9,0)
 S TIUHDR=$P(TIUPRM0,U,10)
"RTN","TIUUPLD",10,0)
 I TIUHDR']"" W $C(7),$C(7),$C(7),"No Record Header Signal Defined - Contact IRM.",! Q
"RTN","TIUUPLD",11,0)
 S TIUDA=$$MAKEBUF
"RTN","TIUUPLD",12,0)
 I +TIUDA'>0 W $C(7),$C(7),$C(7),"Unable to create a Buffer File Record - Contact IRM.",! Q
"RTN","TIUUPLD",13,0)
 I TIUSRC="R" D REMOTE(TIUDA)
"RTN","TIUUPLD",14,0)
 I TIUSRC="H" D HFS(TIUDA)
"RTN","TIUUPLD",15,0)
 I +$G(TIUERR) W $C(7),$C(7),$C(7),!,"Kermit Error: ",$G(TIUERR)," Please re-transmit the file...",!
"RTN","TIUUPLD",16,0)
 ; Set $ZB to MAIN+14^TIUUPLD:2
"RTN","TIUUPLD",17,0)
 I +$O(^TIU(8925.2,TIUDA,"TEXT",0))>0,'+$G(TIUERR) D FILE(TIUDA)
"RTN","TIUUPLD",18,0)
 I +$O(^TIU(8925.2,TIUDA,"TEXT",0))'>0!+$G(TIUERR) D BUFPURGE^TIUPUTC(TIUDA)
"RTN","TIUUPLD",19,0)
 Q
"RTN","TIUUPLD",20,0)
REMOTE(DA) ; Read ASCII stream from remote computer
"RTN","TIUUPLD",21,0)
 N TIUI,TIUPAC,X
"RTN","TIUUPLD",22,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUUPLD",23,0)
 S TIUPAC=$P(TIUPRM0,U,15)
"RTN","TIUUPLD",24,0)
 I TIUPAC']"",($P(TIUPRM0,U,17)'="k") W $C(7),$C(7),$C(7),"No Pace Character Defined - Contact IRM.",! Q
"RTN","TIUUPLD",25,0)
 I $P(TIUPRM0,U,17)="k" D KERMIT(DA) Q
"RTN","TIUUPLD",26,0)
 D REMHDR("ASCII")
"RTN","TIUUPLD",27,0)
 F  R X:DTIME Q:'$T!(X=EOM)!(X="^")!(X="^^")  D
"RTN","TIUUPLD",28,0)
 . I X?1."?" D HELP(X),REMHDR("ASCII") Q
"RTN","TIUUPLD",29,0)
 . ; Ignore leading white space
"RTN","TIUUPLD",30,0)
 . I (+$O(^TIU(8925.2,DA,"TEXT",0))'>0),(X="") Q
"RTN","TIUUPLD",31,0)
 . S TIUI=+$G(TIUI)+1,^TIU(8925.2,DA,"TEXT",TIUI,0)=$$STRIP(X)
"RTN","TIUUPLD",32,0)
 . W !,$C(TIUPAC) ; Send ACK to remote
"RTN","TIUUPLD",33,0)
 S ^TIU(8925.2,DA,"TEXT",0)="^^"_$G(TIUI)_"^"_$G(TIUI)_"^"_DT_"^^^^"
"RTN","TIUUPLD",34,0)
 Q
"RTN","TIUUPLD",35,0)
REMHDR(PRTCL) ; Write Header for Remote upload
"RTN","TIUUPLD",36,0)
 W @IOF D JUSTIFY^TIUU($$TITLE^TIUU(PRTCL_" UPLOAD"),"C")
"RTN","TIUUPLD",37,0)
 W:PRTCL="ASCII" !!,"Initiate upload procedure:",!
"RTN","TIUUPLD",38,0)
 Q
"RTN","TIUUPLD",39,0)
KERMIT(DA) ; Use Kermit Protocol Driver
"RTN","TIUUPLD",40,0)
 N XTKDIC,XTKERR,XTKMODE,DWLC
"RTN","TIUUPLD",41,0)
 D REMHDR("KERMIT")
"RTN","TIUUPLD",42,0)
 S XTKDIC="^TIU(8925.2,"_+DA_",""TEXT"",",XTKMODE=2
"RTN","TIUUPLD",43,0)
 D RECEIVE^XTKERMIT I +$G(XTKERR) S TIUERR=$G(XTKERR) W !
"RTN","TIUUPLD",44,0)
 Q
"RTN","TIUUPLD",45,0)
HFS(DA) ; Read HFS file
"RTN","TIUUPLD",46,0)
 N TIUI,X
"RTN","TIUUPLD",47,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUUPLD",48,0)
 W @IOF D JUSTIFY^TIUU($$TITLE^TIUU("ASCII UPLOAD"),"C")
"RTN","TIUUPLD",49,0)
 W !!,"Select Host File:",! D ^%ZIS I POP W !,$C(7),"Device unavailable." Q
"RTN","TIUUPLD",50,0)
 F  U IO R X:DTIME Q:'$T!(X=EOM)!(X="^")!(X="^^")  D
"RTN","TIUUPLD",51,0)
 . U IO(0) W X,!
"RTN","TIUUPLD",52,0)
 . S TIUI=+$G(TIUI)+1,^TIU(8925.2,DA,"TEXT",TIUI,0)=$$STRIP(X)
"RTN","TIUUPLD",53,0)
 S ^TIU(8925.2,DA,"TEXT",0)="^^"_$G(TIUI)_"^"_$G(TIUI)_"^"_DT_"^^^^"
"RTN","TIUUPLD",54,0)
 D ^%ZISC
"RTN","TIUUPLD",55,0)
 Q
"RTN","TIUUPLD",56,0)
STRIP(X) ; Strip control characters
"RTN","TIUUPLD",57,0)
 N I,Y
"RTN","TIUUPLD",58,0)
 ; First replace TABS w/5 spaces
"RTN","TIUUPLD",59,0)
 F I=1:1:$L(X) S:$A(X,I)=9 X=$E(X,1,(I-1))_"     "_$E(X,(I+1),$L(X))
"RTN","TIUUPLD",60,0)
 ; Next, remove control characters
"RTN","TIUUPLD",61,0)
 S Y="" F I=1:1:$L(X) S:$A(X,I)>31 Y=Y_$E(X,I)
"RTN","TIUUPLD",62,0)
 Q Y
"RTN","TIUUPLD",63,0)
MAKEBUF() ; Subroutine to create buffer records
"RTN","TIUUPLD",64,0)
 N DIC,DA,DR,DIE,START,X,Y
"RTN","TIUUPLD",65,0)
 S START=$$NOW^TIULC
"RTN","TIUUPLD",66,0)
 S (DIC,DLAYGO)=8925.2,DIC(0)="LX",X=""""_$J_"""" D ^DIC
"RTN","TIUUPLD",67,0)
 I +Y'>0 S DA=Y G MAKEBUX
"RTN","TIUUPLD",68,0)
 S DA=+Y,DIE=DIC,DR=".02////"_+$G(DUZ)_";.03////"_START D ^DIE
"RTN","TIUUPLD",69,0)
MAKEBUX Q DA
"RTN","TIUUPLD",70,0)
FILE(DA) ; Completes upload transaction, invokes filer/router
"RTN","TIUUPLD",71,0)
 N DIE,DR
"RTN","TIUUPLD",72,0)
 I '$D(^TIU(8925.2,+DA,0)) G FILEX
"RTN","TIUUPLD",73,0)
 S DIE="^TIU(8925.2,",DR=".04////"_$$NOW^TIULC D ^DIE
"RTN","TIUUPLD",74,0)
 ; Task background filer/router to process buffer record
"RTN","TIUUPLD",75,0)
 S ZTIO="",ZTDTH=$H,ZTSAVE("DA")=""
"RTN","TIUUPLD",76,0)
 S ZTRTN=$S($P(TIUPRM0,U,16)="D":"MAIN^TIUPUTD",1:"MAIN^TIUPUTC")
"RTN","TIUUPLD",77,0)
 S ZTDESC="TIU Document Filer"
"RTN","TIUUPLD",78,0)
 ; If filer is NOT designated to run in the foreground, queue it
"RTN","TIUUPLD",79,0)
 I '+$P(TIUPRM0,U,18) D  G FILEX
"RTN","TIUUPLD",80,0)
 . D ^%ZTLOAD
"RTN","TIUUPLD",81,0)
 . W !,$S($D(ZTSK):"Filer/Router Queued!",1:"Filer/Router Cancelled!")
"RTN","TIUUPLD",82,0)
 ; Otherwise, run the filer in the foreground
"RTN","TIUUPLD",83,0)
 D @ZTRTN
"RTN","TIUUPLD",84,0)
FILEX Q
"RTN","TIUUPLD",85,0)
HELP(X) ; Process HELP for Remote upload
"RTN","TIUUPLD",86,0)
 I X="?" W !?3,"Begin file transfer using ASCII protocol upload procedure.",!
"RTN","TIUUPLD",87,0)
 I X?2."?" D
"RTN","TIUUPLD",88,0)
 . W !?3,"Consult your terminal emulator's User Manual to determine",!
"RTN","TIUUPLD",89,0)
 . W !?3,"how to set-up and initiate an ASCII protocol file transfer.",!
"RTN","TIUUPLD",90,0)
 W !?3,"Enter '^' or '^^' to exit.",!
"RTN","TIUUPLD",91,0)
 S TIUX=$$READ^TIUU("FOA","Press RETURN to continue...")
"RTN","TIUUPLD",92,0)
 Q
"RTN","TIUVISIT")
0^192^B18979993
"RTN","TIUVISIT",1,0)
TIUVISIT ; SLC/JER - Visit File look-up ;8/31/94  12:03
"RTN","TIUVISIT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUVISIT",3,0)
MAIN(TIUY,DFN,TIUSSN,TIUVDT,TIULDT,TIUDFLT,TIUMODE,TIULOC,TIUOCC,LETNEW) ;Control
"RTN","TIUVISIT",4,0)
AGN K ^TMP("TIUVN",$J),^TMP("TIUVD",$J),^TMP("TIUVDA",$J)
"RTN","TIUVISIT",5,0)
 N C,I,N,TIUI,TIUII,TIUVDA,TIUER,TIUOK,TIUX,TIUOUT,X,TIUNVIS,TIUVDATE
"RTN","TIUVISIT",6,0)
 S LETNEW=$G(LETNEW,1)
"RTN","TIUVISIT",7,0)
 S:+$G(DFN)'>0 DFN=+$$PATIENT^TIULA($G(TIUSSN)) I +DFN'>0 S TIUOUT=1 Q
"RTN","TIUVISIT",8,0)
 S TIUMODE=$G(TIUMODE,1),TIUOCC=$G(TIUOCC,20)
"RTN","TIUVISIT",9,0)
 S TIULOC=$S(+$G(TIULOC):TIULOC,$G(TIULOC)]"":+$O(^SC("B",TIULOC,0)),1:"")
"RTN","TIUVISIT",10,0)
 I +$G(TIUVDT) S TIUVDATE=(9999999-$P(TIUVDT,"."))_"."_$P(TIUVDT,".",2)
"RTN","TIUVISIT",11,0)
 S TIULDT=$S(+$G(TIULDT)>0:(9999999-$P(TIULDT,"."))_$S($L(TIULDT,".")>1:"."_$P(TIULDT,".",2),1:""),+$G(TIUVDT):(9999999-$P(TIUVDT,"."))_"."_$P($$FMADD^XLFDT(TIUVDT,"","","",-1),".",2),1:0)
"RTN","TIUVISIT",12,0)
 I '$D(TIUVDT) S TIUVDT=$S(+$G(TIULDT):(9999999-$P(+$G(TIUVDT),"."))_"."_$P($$FMADD^XLFDT(+$G(TIUVDT),"",23,59,59),".",2),+$G(TIUVDT)>0:(9999999-$P(TIUVDT,"."))_"."_$P($$FMADD^XLFDT(TIUVDT,"","","",1),".",2),1:9999999) I 1
"RTN","TIUVISIT",13,0)
 E  S TIUVDT=$G(TIUVDATE)
"RTN","TIUVISIT",14,0)
 I '$D(^AUPNVSIT("AA",DFN)) W !,"No visits on file",! Q
"RTN","TIUVISIT",15,0)
 S I=TIULDT F  S I=$O(^AUPNVSIT("AA",DFN,I)) Q:+I'>0!(+I>TIUVDT)  D
"RTN","TIUVISIT",16,0)
 . N N S N=0
"RTN","TIUVISIT",17,0)
 . F  S N=$O(^AUPNVSIT("AA",DFN,I,N)) Q:+N'>0  D
"RTN","TIUVISIT",18,0)
 . . Q:'$D(^AUPNVSIT(+N,0))!("XD"[$P($G(^AUPNVSIT(+N,0)),U,7))
"RTN","TIUVISIT",19,0)
 . . S D=^AUPNVSIT(+N,0)
"RTN","TIUVISIT",20,0)
 . . I +$G(TIULOC)>0,($P(D,U,22)'=TIULOC) Q
"RTN","TIUVISIT",21,0)
 . . S ^TMP("TIUVD",$J,(9999999-+D))=N_U_D
"RTN","TIUVISIT",22,0)
 S (C,I)=0 F  S I=$O(^TMP("TIUVD",$J,I)) Q:+I'>0  D
"RTN","TIUVISIT",23,0)
 . S C=C+1,^TMP("TIUVN",$J,C)=$G(^TMP("TIUVD",$J,I))
"RTN","TIUVISIT",24,0)
 . S ^TMP("TIUVDA",$J,+$G(^TMP("TIUVD",$J,I)))=C
"RTN","TIUVISIT",25,0)
 I '+TIUMODE,'$D(^TMP("TIUVN",$J)) Q
"RTN","TIUVISIT",26,0)
 I '$D(^TMP("TIUVN",$J)) Q
"RTN","TIUVISIT",27,0)
 I '+TIUMODE,$G(TIUDFLT)="LAST" D  Q:'+TIUX  G VADPT
"RTN","TIUVISIT",28,0)
 . N TIUI S TIUI=+$O(^TMP("TIUVN",$J,0))
"RTN","TIUVISIT",29,0)
 . S TIUX=$G(^TMP("TIUVN",$J,+TIUI))
"RTN","TIUVISIT",30,0)
 S (TIUER,TIUOK,TIUI)=0 W !!,"The following VISITS are available:",!
"RTN","TIUVISIT",31,0)
 F  S TIUI=$O(^TMP("TIUVN",$J,TIUI)) Q:+TIUI'>0  D  Q:+TIUER!+TIUOK!+$G(TIUOUT)
"RTN","TIUVISIT",32,0)
 . S TIUII=TIUI,TIUX=$P(^TMP("TIUVN",$J,TIUI),"^",2,20),TIUVDA=+^(TIUI)
"RTN","TIUVISIT",33,0)
 . D WRITE
"RTN","TIUVISIT",34,0)
 . I '(TIUI#5) D BREAK I +$G(TIUX),($L($G(TIUX),";")=3) D VADPT^TIUVSIT S TIUOUT=1 Q
"RTN","TIUVISIT",35,0)
 . I $G(X)["?" S X="",TIUI=TIUI-5
"RTN","TIUVISIT",36,0)
 G:$D(TIUOUT) CLEAN
"RTN","TIUVISIT",37,0)
 G AGN:TIUER
"RTN","TIUVISIT",38,0)
 I +$G(TIUII)#5 D BREAK I +$G(TIUX),($L($G(TIUX),";")=3) D VADPT^TIUVSIT G CLEAN
"RTN","TIUVISIT",39,0)
 I +TIUER!($G(X)["?") G AGN
"RTN","TIUVISIT",40,0)
 I +TIUOK,'+$G(TIUNVIS) D
"RTN","TIUVISIT",41,0)
 . S TIUX=$G(^TMP("TIUVN",$J,+TIUOK)),^DISV(DUZ,"^AUPNVSIT(")=+TIUX
"RTN","TIUVISIT",42,0)
 . W "  ",$$DATE^TIULS(+$P(TIUX,U,2),"AMTH DD CCYY@HR:MIN")
"RTN","TIUVISIT",43,0)
VADPT ; Call PATVADPT^TIULV to fill TIUY array
"RTN","TIUVISIT",44,0)
 N TIUVSTR
"RTN","TIUVISIT",45,0)
 S TIUVSTR=$P(TIUX,U,23)_";"_$P(TIUX,U,2)_";"_$P(TIUX,U,8)
"RTN","TIUVISIT",46,0)
 D PATVADPT^TIULV(.TIUY,DFN,"",TIUVSTR)
"RTN","TIUVISIT",47,0)
CLEAN K ^TMP("TIUVN",$J),^TMP("TIUVD",$J),^TMP("TIUVDA",$J)
"RTN","TIUVISIT",48,0)
 Q
"RTN","TIUVISIT",49,0)
BREAK ; Handle prompting
"RTN","TIUVISIT",50,0)
 I TIUII=1 S (TIUOK,X)=1
"RTN","TIUVISIT",51,0)
 W !,"CHOOSE 1-",TIUII
"RTN","TIUVISIT",52,0)
 ;W:'$D(^TMP("TIUVN",$J,TIUII+1)) " <M>ORE VISITS"
"RTN","TIUVISIT",53,0)
 I +LETNEW W " or <N>EW VISIT"
"RTN","TIUVISIT",54,0)
 W:$D(^TMP("TIUVN",$J,TIUII+1)) !,"<RETURN> TO CONTINUE",!,"OR '^' TO QUIT"
"RTN","TIUVISIT",55,0)
 W ": " W:$D(TIUPICK) $P(^TMP("TIUVN",$J,TIUPICK),U),"// " R X:DTIME
"RTN","TIUVISIT",56,0)
 S X=$$UP^XLFSTR(X)
"RTN","TIUVISIT",57,0)
 I $S('$T:1,X["^":1,1:0) S (TIUER,TIUOUT)=1 Q
"RTN","TIUVISIT",58,0)
 S:X=""&$D(TIUPICK) X=TIUPICK
"RTN","TIUVISIT",59,0)
 I X["?" D HELP(X) Q
"RTN","TIUVISIT",60,0)
 I +LETNEW'>0,(X=""),'$D(^TMP("TIUVN",$J,TIUII+1)) S (TIUER,TIUOUT)=1 Q
"RTN","TIUVISIT",61,0)
 I +LETNEW,$S(X="N":1,X="NEW":1,X=""&'$D(^TMP("TIUVN",$J,TIUII+1)):1,1:0) D ADD^TIUVSIT(DFN,.TIUX,$S(X="N":0,X="NEW":0,1:1),.TIUSDC) S TIUVTRY=1 I +$G(TIUX)'>0 S (TIUER,TIUOUT)=1 Q
"RTN","TIUVISIT",62,0)
 I $S(X="":1,X="N":1,X="NEW":1,1:0) Q
"RTN","TIUVISIT",63,0)
 I X=" ",$D(^DISV(DUZ,"^DPT("_DFN_",""S"",")) S TIUX=^("^DPT("_DFN_",""S"",") I $D(^TMP("TIUVDT",$J,+TIUX)) S TIUOK=^(+TIUX) Q
"RTN","TIUVISIT",64,0)
 I X'=+X!'$D(^TMP("TIUVN",$J,+X)) W !!,$C(7),"INVALID RESPONSE",! G BREAK
"RTN","TIUVISIT",65,0)
 S TIUOK=X
"RTN","TIUVISIT",66,0)
 Q
"RTN","TIUVISIT",67,0)
HELP(X) ; Offer help
"RTN","TIUVISIT",68,0)
 W !!?3,"Indicate the visit with which the document is associated by choosing"
"RTN","TIUVISIT",69,0)
 W !?3,"the corresponding number.  To add a new visit (e.g., for unscheduled or"
"RTN","TIUVISIT",70,0)
 W !?3,"telephone contacts), enter ""N"".",!!
"RTN","TIUVISIT",71,0)
 Q
"RTN","TIUVISIT",72,0)
WRITE ; Writes each list element
"RTN","TIUVISIT",73,0)
 N DIC,DIQ,DA,DR,TIUVISIT,I,J,X,Y
"RTN","TIUVISIT",74,0)
 S DIC="^AUPNVSIT(",DIQ="TIUVISIT(",DIQ(0)="IE",DA=+TIUVDA
"RTN","TIUVISIT",75,0)
 S DR=".07;.08;.16;.21;.22" D EN^DIQ1
"RTN","TIUVISIT",76,0)
 W !,$J(TIUI,4),">  ",$$DATE^TIULS(+TIUX,"AMTH DD, CCYY@HR:MIN")
"RTN","TIUVISIT",77,0)
 W ?27,$E($G(TIUVISIT(9000010,DA,.07,"E")),1,18)
"RTN","TIUVISIT",78,0)
 W ?47,$E($S(TIUVISIT(9000010,DA,.22,"E")]"":TIUVISIT(9000010,DA,.22,"E"),1:TIUVISIT(9000010,DA,.08,"E")),1,18)
"RTN","TIUVISIT",79,0)
 ;W ?67,$E($G(TIUVISIT(9000010,DA,.22,"E")),1,12) I $G(TIUVISIT(9000010,DA,.21,"E"))]"" W !?23,TIUVISIT(9000010,DA,.21,"E")
"RTN","TIUVISIT",80,0)
 Q
"RTN","TIUVSIT")
0^193^B60127108
"RTN","TIUVSIT",1,0)
TIUVSIT ; SLC/JER - Interactive Visit look-up ;8/31/94  12:03
"RTN","TIUVSIT",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;;Jun 20, 1997
"RTN","TIUVSIT",3,0)
ENPN(TIUY,DFN,ALLOWNEW) ; Entry point for Progress Notes
"RTN","TIUVSIT",4,0)
 N DIRUT,DUOUT,DTOUT,TIULOC,TIUINOUT
"RTN","TIUVSIT",5,0)
 I +$G(DFN)'>0 Q
"RTN","TIUVSIT",6,0)
 I +$D(^DPT(DFN,.1)) D MAIN^TIUMOVE(.TIUY,DFN,"","","","1","CURRENT",0) Q
"RTN","TIUVSIT",7,0)
 S TIUINOUT=$$INOUT
"RTN","TIUVSIT",8,0)
 I $D(DIRUT) Q
"RTN","TIUVSIT",9,0)
 I $P(TIUINOUT,U)="o" D MAIN(.TIUY,DFN,"","","","",1,"","",$G(ALLOWNEW)) Q
"RTN","TIUVSIT",10,0)
 D MAIN^TIUMOVE(.TIUY,DFN,"","","",1,"LAST",1)
"RTN","TIUVSIT",11,0)
 Q
"RTN","TIUVSIT",12,0)
MAIN(TIUY,DFN,TIUSSN,TIUVDT,TIULDT,TIUDFLT,TIUMODE,TIULOC,TIUOCC,LETNEW) ;Control
"RTN","TIUVSIT",13,0)
AGN K ^TMP("TIUVN",$J),^TMP("TIUVDT",$J),^TMP("TIUVNI",$J),^TMP("TIUNOT",$J)
"RTN","TIUVSIT",14,0)
 N C,I,N,TIUI,TIUII,TIUDA,TIUER,TIUOK,TIUX,TIUOUT,X,TIUNVIS,VASD,VAERR
"RTN","TIUVSIT",15,0)
 N TIUPICK,TIULAST,TIUSDC,TIUVTRY
"RTN","TIUVSIT",16,0)
 S TIUMODE=$G(TIUMODE,1),LETNEW=$G(LETNEW,1)
"RTN","TIUVSIT",17,0)
 S:+$G(DFN)'>0 DFN=+$$PATIENT^TIULA($G(TIUSSN)) I +DFN'>0 S TIUOUT=1 Q
"RTN","TIUVSIT",18,0)
 S TIUOCC=$G(TIUOCC,20)
"RTN","TIUVSIT",19,0)
 I '$D(^DPT(DFN,"S")),(+TIUMODE'>0) Q
"RTN","TIUVSIT",20,0)
 I '$D(^DPT(DFN,"S")),(+TIUMODE>0) D  I +$G(TIUX)'>0 Q
"RTN","TIUVSIT",21,0)
 . W !!,"No Scheduled Appointments on file"
"RTN","TIUVSIT",22,0)
 . D MAIN^TIUVISIT(.TIUY,DFN)
"RTN","TIUVSIT",23,0)
 . I '$D(TIUY),+LETNEW,'+$G(TIUVTRY) D ADD(DFN,.TIUX,1,.TIUSDC)
"RTN","TIUVSIT",24,0)
 I '$D(^DPT(DFN,"S")),(+TIUX>0) G VADPT
"RTN","TIUVSIT",25,0)
 I '$D(^TMP("TIUVN",$J)) D GETAPPT(DFN,$G(TIULOC),$G(TIUOCC),$G(TIULDT),"",.TIULAST,$G(TIUVDT))
"RTN","TIUVSIT",26,0)
 I +TIUMODE,'$D(^TMP("TIUVN",$J)),+LETNEW D  Q:+TIUX'>0  G VADPT
"RTN","TIUVSIT",27,0)
 . W !!,"No Scheduled appointments on file"
"RTN","TIUVSIT",28,0)
 . D ADD(DFN,.TIUX,"",.TIUSDC)
"RTN","TIUVSIT",29,0)
 I '+TIUMODE,'$D(^TMP("TIUVNI",$J)) Q
"RTN","TIUVSIT",30,0)
 I '+TIUMODE,$G(TIUDFLT)="LAST" D  Q:'+TIUX  G VADPT
"RTN","TIUVSIT",31,0)
 . N TIUI S TIUI=+$O(^TMP("TIUVNI",$J,0))
"RTN","TIUVSIT",32,0)
 . S TIUX=$$GETVSIT(TIUI)
"RTN","TIUVSIT",33,0)
 I +TIUMODE,($G(TIUDFLT)="LAST"),(+$O(^TMP("TIUVNI",$J,0))>0) S TIUPICK=+$O(^TMP("TIUVNI",$J,0))
"RTN","TIUVSIT",34,0)
 S (TIUER,TIUOK,TIUI)=0 W !!,"The following VISITS are available:",!
"RTN","TIUVSIT",35,0)
 F  S TIUI=$O(^TMP("TIUVN",$J,TIUI)) Q:+TIUI'>0  D  Q:+TIUER!+TIUOK!+$G(TIUX)!+$G(TIUOUT)
"RTN","TIUVSIT",36,0)
 . S TIUII=TIUI D WRITE
"RTN","TIUVSIT",37,0)
 . I '(TIUI#5) D BREAK I $S($G(X)="M":1,$G(X)="MORE":1,1:0) D MAIN^TIUVISIT(.TIUY,DFN) S TIUOUT=1
"RTN","TIUVSIT",38,0)
 . I $G(X)["?" S X="",TIUI=TIUI-5
"RTN","TIUVSIT",39,0)
 G:$D(TIUOUT) CLEAN
"RTN","TIUVSIT",40,0)
 G AGN:+TIUER
"RTN","TIUVSIT",41,0)
 I +$G(TIUII)#5,+TIUMODE D BREAK I $S($G(X)="M":1,$G(X)="MORE":1,1:0) D MAIN^TIUVISIT(.TIUY,DFN) Q
"RTN","TIUVSIT",42,0)
 G:$D(TIUOUT) CLEAN
"RTN","TIUVSIT",43,0)
 I +TIUER!($G(X)["?") G AGN
"RTN","TIUVSIT",44,0)
 I +TIUOK,'+$G(TIUNVIS) D
"RTN","TIUVSIT",45,0)
 . S TIUX=$$GETVSIT(+TIUOK)
"RTN","TIUVSIT",46,0)
 . D RECALL^DILFD(2.98,$P(TIUX,";",2)_","_DFN_",",DUZ)
"RTN","TIUVSIT",47,0)
 . W "  ",$$DATE^TIULS(+$P(TIUX,";",2),"AMTH DD CCYY@HR:MIN")
"RTN","TIUVSIT",48,0)
VADPT D PATVADPT^TIULV(.TIUY,DFN,"",TIUX,$G(TIUSDC))
"RTN","TIUVSIT",49,0)
CLEAN K ^TMP("TIUVN",$J),^TMP("TIUVDT",$J),^TMP("TIUVNI",$J),^TMP("TIUNOT",$J)
"RTN","TIUVSIT",50,0)
 Q
"RTN","TIUVSIT",51,0)
GETAPPT(DFN,CLINIC,OCCLIM,INDEX,COUNT,LAST,EARLY) ; Get list
"RTN","TIUVSIT",52,0)
 ; of appointments
"RTN","TIUVSIT",53,0)
 N TIUCNT,TIUI,TIUSREC,TIUJ
"RTN","TIUVSIT",54,0)
 S OCCLIM=$S(+$G(OCCLIM):+$G(OCCLIM),1:20)
"RTN","TIUVSIT",55,0)
 S:'+$G(DT) DT=+$P($$NOW^TIULC,".")
"RTN","TIUVSIT",56,0)
 S EARLY=+$G(EARLY)
"RTN","TIUVSIT",57,0)
 S TIUI=$S(+$G(INDEX):+$G(INDEX),1:$$FMADD^XLFDT(DT,1)_"."_235959)
"RTN","TIUVSIT",58,0)
 S (LAST,TIUCNT)=0,TIUJ=$S(+$G(COUNT):+$G(COUNT),1:0)
"RTN","TIUVSIT",59,0)
 F  S TIUI=$O(^DPT(DFN,"S",TIUI),-1) S:+TIUI'>0 LAST=1 Q:+TIUI'>0!(+TIUCNT'<OCCLIM)!(+TIUI<EARLY)  D
"RTN","TIUVSIT",60,0)
 . N APPT,DA,DIC,DIQ,DR
"RTN","TIUVSIT",61,0)
 . I +$G(CLINIC),(+$G(^DPT(DFN,"S",TIUI,0))'=+CLINIC) Q
"RTN","TIUVSIT",62,0)
 . S TIUCNT=+$G(TIUCNT)+1,TIUJ=+$G(TIUJ)+1
"RTN","TIUVSIT",63,0)
 . S TIUSREC=$G(^DPT(DFN,"S",TIUI,0))
"RTN","TIUVSIT",64,0)
 . S DIQ="APPT",DIQ(0)="EI",DIC=2,DA=DFN,DA(2.98)=TIUI
"RTN","TIUVSIT",65,0)
 . S DR=1900,DR(2.98)=".01;3;9.5" D EN^DIQ1
"RTN","TIUVSIT",66,0)
 . S ^TMP("TIUVNI",$J,TIUJ)=TIUI_U_+TIUSREC_U_$P(TIUSREC,U,2)_U_$P(TIUSREC,U,16)_U_$P(TIUSREC,U,20)
"RTN","TIUVSIT",67,0)
 . S ^TMP("TIUVN",$J,TIUJ)=$$DATE^TIULS(TIUI,"AMTH DD, CCYY@HR:MIN")_U_$G(APPT(2.98,TIUI,.01,"E"))_U_$G(APPT(2.98,TIUI,3,"E"))_U_$G(APPT(2.98,TIUI,9.5,"E"))
"RTN","TIUVSIT",68,0)
 . S ^TMP("TIUVDT",$J,TIUI)=TIUJ
"RTN","TIUVSIT",69,0)
 . ; If any appt is for today, set x-ref to exclude dup visit creation
"RTN","TIUVSIT",70,0)
 . ; AS ^TMP("TIUNOT",$J,LOCATION,APPT D/T)=ITEM #
"RTN","TIUVSIT",71,0)
 . I $P(TIUSREC,U,2)="" S ^TMP("TIUNOT",$J,+TIUSREC,+TIUI)=TIUJ
"RTN","TIUVSIT",72,0)
 Q
"RTN","TIUVSIT",73,0)
BREAK ; Handle prompting
"RTN","TIUVSIT",74,0)
 I TIUII=1 S (TIUOK,X)=1
"RTN","TIUVSIT",75,0)
 W !,"CHOOSE 1-",TIUII
"RTN","TIUVSIT",76,0)
 W:'$D(^TMP("TIUVN",$J,TIUII+1)) " <M>ORE VISITS"
"RTN","TIUVSIT",77,0)
 I +LETNEW W " or <N>EW VISIT"
"RTN","TIUVSIT",78,0)
 W:$D(^TMP("TIUVN",$J,TIUII+1)) !,"<RETURN> TO CONTINUE",!,"OR '^' TO QUIT"
"RTN","TIUVSIT",79,0)
 W ": " W:$D(TIUPICK) $P(^TMP("TIUVN",$J,TIUPICK),U),"// " R X:DTIME
"RTN","TIUVSIT",80,0)
 S X=$$UP^XLFSTR(X)
"RTN","TIUVSIT",81,0)
 I $S('$T:1,X["^":1,1:0) S (TIUER,TIUOUT)=1 Q
"RTN","TIUVSIT",82,0)
 S:X=""&$D(TIUPICK) X=TIUPICK
"RTN","TIUVSIT",83,0)
 I X["?" D HELP(X) Q
"RTN","TIUVSIT",84,0)
 I $S(X="M":1,X="MORE":1,1:0) D MORE Q
"RTN","TIUVSIT",85,0)
 I +LETNEW'>0,(X=""),'$D(^TMP("TIUVN",$J,TIUII+1)) S (TIUER,TIUOUT)=1 Q
"RTN","TIUVSIT",86,0)
 I +LETNEW,$S(X="N":1,X="NEW":1,X=""&'$D(^TMP("TIUVN",$J,TIUII+1)):1,1:0) D ADD(DFN,.TIUX,$S(X="N":0,X="NEW":0,1:1),.TIUSDC) I +$G(TIUX)'>0 S (TIUER,TIUOUT)=1 Q
"RTN","TIUVSIT",87,0)
 I $S(X="":1,X="N":1,X="NEW":1,1:0) Q
"RTN","TIUVSIT",88,0)
 I X=" ",$D(^DISV(DUZ,"^DPT("_DFN_",""S"",")) S TIUX=^("^DPT("_DFN_",""S"",") I $D(^TMP("TIUVDT",$J,+TIUX)) S TIUOK=^(+TIUX) Q
"RTN","TIUVSIT",89,0)
 I X'=+X!'$D(^TMP("TIUVN",$J,+X)) W !!,$C(7),"INVALID RESPONSE",! G BREAK
"RTN","TIUVSIT",90,0)
 S TIUOK=X
"RTN","TIUVSIT",91,0)
 Q
"RTN","TIUVSIT",92,0)
INOUT() ; Ask INPATIENT/OUTPATIENT
"RTN","TIUVSIT",93,0)
 N TIUPRMT S TIUPRMT="Is this note for INPATIENT or OUTPATIENT care? "
"RTN","TIUVSIT",94,0)
 W:'$D(^DPT(DFN,.1)) !!,"This patient is not currently admitted to the facility...",!
"RTN","TIUVSIT",95,0)
 Q $$READ^TIUU("SA^i:INPATIENT;o:OUTPATIENT",TIUPRMT,"OUTPATIENT")
"RTN","TIUVSIT",96,0)
HELP(X) ; Offer help
"RTN","TIUVSIT",97,0)
 W !!?3,"Indicate the visit with which the document is associated by choosing"
"RTN","TIUVSIT",98,0)
 W !?3,"the corresponding number.  To add a new visit (e.g., for unscheduled or"
"RTN","TIUVSIT",99,0)
 W !?3,"telephone contacts), enter ""N"".  To see MORE, older visits (i.e., beyond"
"RTN","TIUVSIT",100,0)
 W !?3,"the 20 most recent) enter ""M"".",!!
"RTN","TIUVSIT",101,0)
 Q
"RTN","TIUVSIT",102,0)
MORE ; Modify date range, list more visits
"RTN","TIUVSIT",103,0)
 N TIUI,TIUCNT
"RTN","TIUVSIT",104,0)
 S TIUI=+$O(^TMP("TIUVDT",$J,0)),TIUCNT=+$G(^TMP("TIUVDT",$J,+TIUI))
"RTN","TIUVSIT",105,0)
 D GETAPPT(DFN,$G(TIULOC),$G(TIUOCC),TIUI,TIUCNT,.TIULAST)
"RTN","TIUVSIT",106,0)
 Q
"RTN","TIUVSIT",107,0)
GETVSIT(TIUOK) ; Get associated visit
"RTN","TIUVSIT",108,0)
 N APPT,TIUVSIT,VLOC,VSTOP,VDT,VTYPE
"RTN","TIUVSIT",109,0)
 S APPT=$G(^TMP("TIUVNI",$J,+TIUOK))
"RTN","TIUVSIT",110,0)
 S VDT=+APPT,VLOC=$P(APPT,U,2)
"RTN","TIUVSIT",111,0)
 S VSTOP=$P($G(^SC(+VLOC,0)),U,7)
"RTN","TIUVSIT",112,0)
 S VTYPE=$S($P(APPT,U,3)="I":"I",1:"A")
"RTN","TIUVSIT",113,0)
 S TIUVSIT=VLOC_";"_VDT_";"_VTYPE
"RTN","TIUVSIT",114,0)
 Q TIUVSIT
"RTN","TIUVSIT",115,0)
ADD(DFN,VSTR,ASK,VSTOP) ; Add a visit for patient
"RTN","TIUVSIT",116,0)
 N VTYPE,VDT,VLOC,TIUY,DA,DIE,DR,TIUAPDT,X,Y W !
"RTN","TIUVSIT",117,0)
 S ASK=$G(ASK,1)
"RTN","TIUVSIT",118,0)
 I +ASK D
"RTN","TIUVSIT",119,0)
 . W !,$C(7),$C(7),"Patient & Visit are Required...",!
"RTN","TIUVSIT",120,0)
 . S TIUY=$$READ^TIUU("YAO","Do you wish to add a NEW Visit? ","NO")
"RTN","TIUVSIT",121,0)
 I +ASK,(+TIUY'>0) S TIUX=0,TIUER=1 Q
"RTN","TIUVSIT",122,0)
 I $G(VLOC)']"" S VLOC=$$SELLOC
"RTN","TIUVSIT",123,0)
 I +VLOC'>0 S TIUER=1 Q
"RTN","TIUVSIT",124,0)
 S VSTOP=+$P(^SC(+VLOC,0),U,7)
"RTN","TIUVSIT",125,0)
 S VDT=+$$READ^TIUU("D^:NOW:ERSX","Enter Visit Date/Time","NOW","Precise Date & Time are Required")
"RTN","TIUVSIT",126,0)
 I +VDT'>0 S TIUER=1 Q
"RTN","TIUVSIT",127,0)
 S TIUAPDT=+$O(^TMP("TIUNOT",$J,+VLOC,+$P(VDT,".")))
"RTN","TIUVSIT",128,0)
 I +TIUAPDT>0,(+$P(TIUAPDT,".")=+$P(VDT,".")) D  Q
"RTN","TIUVSIT",129,0)
 . W !!,$C(7),"  Item #",+$G(^TMP("TIUNOT",$J,+VLOC,+TIUAPDT))
"RTN","TIUVSIT",130,0)
 . W " is scheduled for ",$$DATE^TIULS(TIUAPDT,"MM/DD/YY HR:MIN")
"RTN","TIUVSIT",131,0)
 . W " at this location..."
"RTN","TIUVSIT",132,0)
 . W !!,"Please select the existing appointment, rather than creating a "
"RTN","TIUVSIT",133,0)
 . W "redundant one.",!
"RTN","TIUVSIT",134,0)
 . S TIUER=1
"RTN","TIUVSIT",135,0)
 S VTYPE=$$VSITYPE(VSTOP)
"RTN","TIUVSIT",136,0)
 S VSTR=+VLOC_";"_+VDT_";"_VTYPE
"RTN","TIUVSIT",137,0)
 I +VSTR'>0 S TIUER=1 Q
"RTN","TIUVSIT",138,0)
 S TIUNVIS=+VDT,TIUER=0
"RTN","TIUVSIT",139,0)
 Q
"RTN","TIUVSIT",140,0)
WRITE ; Writes each list element
"RTN","TIUVSIT",141,0)
 N TIUX S TIUX=^TMP("TIUVN",$J,TIUI)
"RTN","TIUVSIT",142,0)
 W !,$J(TIUII,4),">  ",$P(TIUX,U),?27,$E($P(TIUX,U,3),1,21),?50,$P(TIUX,U,2)
"RTN","TIUVSIT",143,0)
 Q
"RTN","TIUVSIT",144,0)
SELLOC() ; Select Hospital Location
"RTN","TIUVSIT",145,0)
 N DIC,X,Y,TIUAPDT S DIC=44,DIC(0)="AEMQ"
"RTN","TIUVSIT",146,0)
 S DIC("A")="PATIENT LOCATION: "
"RTN","TIUVSIT",147,0)
 S DIC("B")=$P($$PERSLOC^TIULE(DUZ),U,2)
"RTN","TIUVSIT",148,0)
 S:DIC("B")']"" DIC("B")=$P($G(^SC(+$G(^DISV(DUZ,"^SC(")),0)),U)
"RTN","TIUVSIT",149,0)
 S DIC("S")="I $S(+$G(^SC(+Y,""I""))>0&(+$G(^(""I""))'>DT)&$S(+$P($G(^(""I"")),U,2)'>0:1,+$P($G(^(""I"")),U,2)>DT:1,1:0):0,$D(^SC(+Y,""OOS"")):0,+$O(^PX(815,1,""DHL"",""B"",+Y,0)):0,($P(^SC(+Y,0),U,3)'=""C""):0,1:1)"
"RTN","TIUVSIT",150,0)
 D ^DIC K DIC("S")
"RTN","TIUVSIT",151,0)
 Q Y
"RTN","TIUVSIT",152,0)
SELHLP ; Help for SELLOC
"RTN","TIUVSIT",153,0)
 W !,"Please indicate the location of your encounter with the patient."
"RTN","TIUVSIT",154,0)
 W !,"If the encounter was by telephone, but was associated with your"
"RTN","TIUVSIT",155,0)
 W !,"services for a particular Ward or Clinic, then enter the name"
"RTN","TIUVSIT",156,0)
 W !,"of that location."
"RTN","TIUVSIT",157,0)
 Q
"RTN","TIUVSIT",158,0)
DEFER(DA,TIUSDC) ; Mark record for deferred crediting of stop code
"RTN","TIUVSIT",159,0)
 N DIE,DR,X,Y
"RTN","TIUVSIT",160,0)
 I +$G(TIUSDC)'>0 Q
"RTN","TIUVSIT",161,0)
 S DIE=8925,DR=".11////1;1206////^S X="_+TIUSDC D ^DIE
"RTN","TIUVSIT",162,0)
 Q
"RTN","TIUVSIT",163,0)
CREDIT(TIUDA) ; Call EN3^SDACS to Credit Stop Code
"RTN","TIUVSIT",164,0)
 N DA,DFN,VSIT,TIU,TIUD0,TIUDPRM
"RTN","TIUVSIT",165,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0))
"RTN","TIUVSIT",166,0)
 I TIUD0']"" Q
"RTN","TIUVSIT",167,0)
 D DOCPRM^TIULC1(+TIUD0,.TIUDPRM)
"RTN","TIUVSIT",168,0)
 ; If SUPPRESS DX/CPT ON NEW VISIT is set to YES, then Quit
"RTN","TIUVSIT",169,0)
 I +$P($G(TIUDPRM(0)),U,14)>0 Q
"RTN","TIUVSIT",170,0)
 S DFN=+$P(TIUD0,U,2),VSIT=$P(TIUD0,U,3)
"RTN","TIUVSIT",171,0)
 D GETTIU^TIULD(.TIU,TIUDA)
"RTN","TIUVSIT",172,0)
 D CREDIT^TIUPXAPI(DFN,.TIU,VSIT)
"RTN","TIUVSIT",173,0)
 D REMFLAG(TIUDA)
"RTN","TIUVSIT",174,0)
 Q
"RTN","TIUVSIT",175,0)
REMFLAG(DA) ; Remove credit flag from TIU Document Record
"RTN","TIUVSIT",176,0)
 N DIE,DR,X,Y
"RTN","TIUVSIT",177,0)
 S DIE=8925,DR=".11///@" D ^DIE
"RTN","TIUVSIT",178,0)
 Q
"RTN","TIUVSIT",179,0)
VSITYPE(VSTOP) ; Call reader to get VISIT TYPE
"RTN","TIUVSIT",180,0)
 N DFLT,PROMPT,X,Y S VSTOP=$P($G(^DIC(40.7,+$G(VSTOP),0)),U)
"RTN","TIUVSIT",181,0)
 S DFLT=$S(VSTOP["TELE":"TELEPHONE",1:"AMBULATORY")
"RTN","TIUVSIT",182,0)
 S PROMPT="TYPE OF VISIT: "
"RTN","TIUVSIT",183,0)
 S X="SMA^a:AMBULATORY (WALK-IN);t:TELEPHONE;i:IN HOSPITAL;e:EVENT (HISTORICAL)"
"RTN","TIUVSIT",184,0)
 S Y=$$READ^TIUU(X,PROMPT,DFLT) W "   ",$P(Y,U,2),!
"RTN","TIUVSIT",185,0)
 S Y=$$UP^XLFSTR($P(Y,U))
"RTN","TIUVSIT",186,0)
 Q Y
"SEC","^DD",8925.1,8925.1,.01,8.5)

"SEC","^DIC",8925,8925,0,"AUDIT")
@
"SEC","^DIC",8925,8925,0,"DD")
@
"SEC","^DIC",8925,8925,0,"DEL")
@
"SEC","^DIC",8925,8925,0,"LAYGO")
@
"SEC","^DIC",8925,8925,0,"RD")
@
"SEC","^DIC",8925,8925,0,"WR")
@
"SEC","^DIC",8925.1,8925.1,0,"AUDIT")
@
"SEC","^DIC",8925.1,8925.1,0,"DD")
@
"SEC","^DIC",8925.1,8925.1,0,"DEL")
@
"SEC","^DIC",8925.1,8925.1,0,"RD")
@
"SEC","^DIC",8925.1,8925.1,0,"WR")
@
"SEC","^DIC",8925.2,8925.2,0,"AUDIT")
@
"SEC","^DIC",8925.2,8925.2,0,"DD")
@
"SEC","^DIC",8925.2,8925.2,0,"DEL")
@
"SEC","^DIC",8925.2,8925.2,0,"LAYGO")
@
"SEC","^DIC",8925.2,8925.2,0,"RD")
@
"SEC","^DIC",8925.2,8925.2,0,"WR")
@
"SEC","^DIC",8925.3,8925.3,0,"AUDIT")
@
"SEC","^DIC",8925.3,8925.3,0,"DD")
@
"SEC","^DIC",8925.3,8925.3,0,"DEL")
@
"SEC","^DIC",8925.3,8925.3,0,"LAYGO")
@
"SEC","^DIC",8925.3,8925.3,0,"RD")
@
"SEC","^DIC",8925.3,8925.3,0,"WR")
@
"SEC","^DIC",8925.4,8925.4,0,"AUDIT")
@
"SEC","^DIC",8925.4,8925.4,0,"DD")
@
"SEC","^DIC",8925.4,8925.4,0,"DEL")
@
"SEC","^DIC",8925.4,8925.4,0,"LAYGO")
@
"SEC","^DIC",8925.4,8925.4,0,"RD")
@
"SEC","^DIC",8925.4,8925.4,0,"WR")
@
"SEC","^DIC",8925.5,8925.5,0,"AUDIT")
@
"SEC","^DIC",8925.5,8925.5,0,"DD")
@
"SEC","^DIC",8925.5,8925.5,0,"DEL")
@
"SEC","^DIC",8925.5,8925.5,0,"LAYGO")
@
"SEC","^DIC",8925.5,8925.5,0,"RD")
@
"SEC","^DIC",8925.5,8925.5,0,"WR")
@
"SEC","^DIC",8925.6,8925.6,0,"AUDIT")
@
"SEC","^DIC",8925.6,8925.6,0,"DD")
@
"SEC","^DIC",8925.6,8925.6,0,"DEL")
@
"SEC","^DIC",8925.6,8925.6,0,"LAYGO")
@
"SEC","^DIC",8925.6,8925.6,0,"RD")
@
"SEC","^DIC",8925.6,8925.6,0,"WR")
@
"SEC","^DIC",8925.7,8925.7,0,"AUDIT")
@
"SEC","^DIC",8925.7,8925.7,0,"DD")
@
"SEC","^DIC",8925.7,8925.7,0,"LAYGO")
@
"SEC","^DIC",8925.7,8925.7,0,"WR")
@
"SEC","^DIC",8925.8,8925.8,0,"AUDIT")
@
"SEC","^DIC",8925.8,8925.8,0,"DD")
@
"SEC","^DIC",8925.8,8925.8,0,"DEL")
@
"SEC","^DIC",8925.8,8925.8,0,"LAYGO")
@
"SEC","^DIC",8925.8,8925.8,0,"RD")
@
"SEC","^DIC",8925.8,8925.8,0,"WR")
@
"SEC","^DIC",8925.9,8925.9,0,"AUDIT")
@
"SEC","^DIC",8925.9,8925.9,0,"DD")
@
"SEC","^DIC",8925.9,8925.9,0,"DEL")
@
"SEC","^DIC",8925.9,8925.9,0,"LAYGO")
@
"SEC","^DIC",8925.9,8925.9,0,"RD")
@
"SEC","^DIC",8925.9,8925.9,0,"WR")
@
"SEC","^DIC",8925.91,8925.91,0,"AUDIT")
@
"SEC","^DIC",8925.91,8925.91,0,"DD")
@
"SEC","^DIC",8925.91,8925.91,0,"DEL")
@
"SEC","^DIC",8925.91,8925.91,0,"LAYGO")
@
"SEC","^DIC",8925.91,8925.91,0,"RD")
@
"SEC","^DIC",8925.91,8925.91,0,"WR")
@
"SEC","^DIC",8925.93,8925.93,0,"AUDIT")
@
"SEC","^DIC",8925.93,8925.93,0,"DD")
@
"SEC","^DIC",8925.93,8925.93,0,"DEL")
@
"SEC","^DIC",8925.93,8925.93,0,"LAYGO")
@
"SEC","^DIC",8925.93,8925.93,0,"RD")
@
"SEC","^DIC",8925.93,8925.93,0,"WR")
@
"SEC","^DIC",8925.94,8925.94,0,"AUDIT")
@
"SEC","^DIC",8925.94,8925.94,0,"DD")
@
"SEC","^DIC",8925.94,8925.94,0,"DEL")
@
"SEC","^DIC",8925.94,8925.94,0,"LAYGO")
@
"SEC","^DIC",8925.94,8925.94,0,"RD")
@
"SEC","^DIC",8925.94,8925.94,0,"WR")
@
"SEC","^DIC",8925.95,8925.95,0,"AUDIT")
@
"SEC","^DIC",8925.95,8925.95,0,"DD")
@
"SEC","^DIC",8925.95,8925.95,0,"DEL")
@
"SEC","^DIC",8925.95,8925.95,0,"LAYGO")
@
"SEC","^DIC",8925.95,8925.95,0,"RD")
@
"SEC","^DIC",8925.95,8925.95,0,"WR")
@
"SEC","^DIC",8925.97,8925.97,0,"AUDIT")
@
"SEC","^DIC",8925.97,8925.97,0,"DD")
@
"SEC","^DIC",8925.97,8925.97,0,"DEL")
@
"SEC","^DIC",8925.97,8925.97,0,"LAYGO")
@
"SEC","^DIC",8925.97,8925.97,0,"RD")
@
"SEC","^DIC",8925.97,8925.97,0,"WR")
@
"SEC","^DIC",8925.98,8925.98,0,"AUDIT")
@
"SEC","^DIC",8925.98,8925.98,0,"DD")
@
"SEC","^DIC",8925.98,8925.98,0,"DEL")
@
"SEC","^DIC",8925.98,8925.98,0,"LAYGO")
@
"SEC","^DIC",8925.98,8925.98,0,"RD")
@
"SEC","^DIC",8925.98,8925.98,0,"WR")
@
"SEC","^DIC",8925.99,8925.99,0,"AUDIT")
@
"SEC","^DIC",8925.99,8925.99,0,"DD")
@
"SEC","^DIC",8925.99,8925.99,0,"DEL")
@
"SEC","^DIC",8925.99,8925.99,0,"LAYGO")
@
"SEC","^DIC",8925.99,8925.99,0,"RD")
@
"SEC","^DIC",8925.99,8925.99,0,"WR")
@
"SEC","^DIC",8926,8926,0,"AUDIT")
@
"SEC","^DIC",8926,8926,0,"DD")
@
"SEC","^DIC",8926,8926,0,"DEL")
@
"SEC","^DIC",8926,8926,0,"LAYGO")
@
"SEC","^DIC",8926,8926,0,"RD")
@
"SEC","^DIC",8926,8926,0,"WR")
@
"VER")
8.0^21.0
"^DD",8925,8925,0)
FIELD^^1612^66
"^DD",8925,8925,0,"DDA")
N
"^DD",8925,8925,0,"DIK")
TIUXRC
"^DD",8925,8925,0,"DIKOLD")
TIUXRC
"^DD",8925,8925,0,"DT")
2970505
"^DD",8925,8925,0,"ID",.02)
S %I=Y,Y=$S('$D(^(0)):"",$D(^DPT(+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(2,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",8925,8925,0,"ID",.07)
W "   ",$E($P(^(0),U,7),4,5)_"-"_$E($P(^(0),U,7),6,7)_"-"_$E($P(^(0),U,7),2,3)
"^DD",8925,8925,0,"IX",2270,8925,.02)

"^DD",8925,8925,0,"IX","AA",8925,.02)

"^DD",8925,8925,0,"IX","AA1",8925,.03)

"^DD",8925,8925,0,"IX","AA2",8925,.01)

"^DD",8925,8925,0,"IX","AAU",8925,1202)

"^DD",8925,8925,0,"IX","AAU1",8925,1301)

"^DD",8925,8925,0,"IX","AAU2",8925,.01)

"^DD",8925,8925,0,"IX","AAU3",8925,.05)

"^DD",8925,8925,0,"IX","AAUP",8925,1202)

"^DD",8925,8925,0,"IX","AAUP1",8925,1501)

"^DD",8925,8925,0,"IX","ACLAU",8925,.02)

"^DD",8925,8925,0,"IX","ACLAU01",8925,1301)

"^DD",8925,8925,0,"IX","ACLAU02",8925,.01)

"^DD",8925,8925,0,"IX","ACLAU03",8925,1202)

"^DD",8925,8925,0,"IX","ACLAU04",8925,1501)

"^DD",8925,8925,0,"IX","ACLAU103",8925,1302)

"^DD",8925,8925,0,"IX","ACLEC",8925,.02)

"^DD",8925,8925,0,"IX","ACLEC01",8925,.01)

"^DD",8925,8925,0,"IX","ACLEC02",8925,1301)

"^DD",8925,8925,0,"IX","ACLEC03",8925,1208)

"^DD",8925,8925,0,"IX","ACLEC04",8925,1501)

"^DD",8925,8925,0,"IX","ACLEC05",8925,1507)

"^DD",8925,8925,0,"IX","ACLPT",8925,.02)

"^DD",8925,8925,0,"IX","ACLPT01",8925,.01)

"^DD",8925,8925,0,"IX","ACLPT02",8925,1501)

"^DD",8925,8925,0,"IX","ACLPT03",8925,1301)

"^DD",8925,8925,0,"IX","ACLPT1507",8925,1507)

"^DD",8925,8925,0,"IX","ACLSB",8925,.02)

"^DD",8925,8925,0,"IX","ACLSB01",8925,.01)

"^DD",8925,8925,0,"IX","ACLSB02",8925,1301)

"^DD",8925,8925,0,"IX","ACLSB3",8925,1502)

"^DD",8925,8925,0,"IX","ADCPT",8925,.02)

"^DD",8925,8925,0,"IX","ADCPT1",8925,1301)

"^DD",8925,8925,0,"IX","ADCPT2",8925,.04)

"^DD",8925,8925,0,"IX","ADCPT3",8925,.05)

"^DD",8925,8925,0,"IX","AE",8925,.02)

"^DD",8925,8925,0,"IX","AE1",8925,.03)

"^DD",8925,8925,0,"IX","AE2",8925,.01)

"^DD",8925,8925,0,"IX","ALL1",8925,1301)

"^DD",8925,8925,0,"IX","ALL2",8925,.01)

"^DD",8925,8925,0,"IX","ALL3",8925,.05)

"^DD",8925,8925,0,"IX","ALOC",8925,1205)

"^DD",8925,8925,0,"IX","ALOC1",8925,1301)

"^DD",8925,8925,0,"IX","ALOC2",8925,.01)

"^DD",8925,8925,0,"IX","ALOC3",8925,.05)

"^DD",8925,8925,0,"IX","ALOCP",8925,1205)

"^DD",8925,8925,0,"IX","ALOCP1",8925,1501)

"^DD",8925,8925,0,"IX","APRB1",8925,1301)

"^DD",8925,8925,0,"IX","APRB2",8925,.01)

"^DD",8925,8925,0,"IX","APRB3",8925,.05)

"^DD",8925,8925,0,"IX","APT",8925,.02)

"^DD",8925,8925,0,"IX","APT1",8925,1301)

"^DD",8925,8925,0,"IX","APT2",8925,.01)

"^DD",8925,8925,0,"IX","APT3",8925,.05)

"^DD",8925,8925,0,"IX","APTCL",8925,.02)

"^DD",8925,8925,0,"IX","APTCL1",8925,1301)

"^DD",8925,8925,0,"IX","APTCL2",8925,.01)

"^DD",8925,8925,0,"IX","APTCL38",8925,.02)

"^DD",8925,8925,0,"IX","APTCL381",8925,1301)

"^DD",8925,8925,0,"IX","APTCL382",8925,.01)

"^DD",8925,8925,0,"IX","APTLD01",8925,.01)

"^DD",8925,8925,0,"IX","APTLD02",8925,.02)

"^DD",8925,8925,0,"IX","APTLD03",8925,.03)

"^DD",8925,8925,0,"IX","APTLD07",8925,.07)

"^DD",8925,8925,0,"IX","APTLD1211",8925,1211)

"^DD",8925,8925,0,"IX","APTLD13",8925,.13)

"^DD",8925,8925,0,"IX","APTP",8925,.02)

"^DD",8925,8925,0,"IX","APTP1",8925,1501)

"^DD",8925,8925,0,"IX","ASUB",8925,1701)

"^DD",8925,8925,0,"IX","ASUB1",8925,1301)

"^DD",8925,8925,0,"IX","ASUB2",8925,.01)

"^DD",8925,8925,0,"IX","ASUB3",8925,.05)

"^DD",8925,8925,0,"IX","ASUP",8925,1208)

"^DD",8925,8925,0,"IX","ASUP1",8925,1301)

"^DD",8925,8925,0,"IX","ASUP2",8925,.01)

"^DD",8925,8925,0,"IX","ASUP3",8925,.05)

"^DD",8925,8925,0,"IX","ASVC",8925,1404)

"^DD",8925,8925,0,"IX","ASVC1",8925,1301)

"^DD",8925,8925,0,"IX","ASVC2",8925,.01)

"^DD",8925,8925,0,"IX","ASVC3",8925,.05)

"^DD",8925,8925,0,"IX","ATC",8925,1302)

"^DD",8925,8925,0,"IX","ATC1",8925,1301)

"^DD",8925,8925,0,"IX","ATC2",8925,.01)

"^DD",8925,8925,0,"IX","ATC3",8925,.05)

"^DD",8925,8925,0,"IX","ATS",8925,1402)

"^DD",8925,8925,0,"IX","ATS1",8925,1301)

"^DD",8925,8925,0,"IX","ATS2",8925,.01)

"^DD",8925,8925,0,"IX","ATS3",8925,.05)

"^DD",8925,8925,0,"IX","AV",8925,.02)

"^DD",8925,8925,0,"IX","AV1",8925,.03)

"^DD",8925,8925,0,"IX","AV10",8925,.03)

"^DD",8925,8925,0,"IX","AV2",8925,.01)

"^DD",8925,8925,0,"IX","AVSIT",8925,.03)

"^DD",8925,8925,0,"IX","AVSIT1",8925,1301)

"^DD",8925,8925,0,"IX","AVSIT2",8925,.01)

"^DD",8925,8925,0,"IX","AVSIT3",8925,.05)

"^DD",8925,8925,0,"IX","B",8925,.01)

"^DD",8925,8925,0,"IX","C",8925,.02)

"^DD",8925,8925,0,"IX","CA",8925,1202)

"^DD",8925,8925,0,"IX","CS",8925,1208)

"^DD",8925,8925,0,"IX","D",8925,1301)

"^DD",8925,8925,0,"IX","DAD",8925,.06)

"^DD",8925,8925,0,"IX","E",8925,1304)

"^DD",8925,8925,0,"IX","F",8925,1201)

"^DD",8925,8925,0,"IX","FIX",8925,.12)

"^DD",8925,8925,0,"IX","G",8925,1405)

"^DD",8925,8925,0,"IX","SVC",8925,1404)

"^DD",8925,8925,0,"IX","TC",8925,1302)

"^DD",8925,8925,0,"IX","TS",8925,1402)

"^DD",8925,8925,0,"IX","V",8925,.03)

"^DD",8925,8925,0,"IX","VID",8925,15001)

"^DD",8925,8925,0,"NM","TIU DOCUMENT")

"^DD",8925,8925,0,"PT",123,16)

"^DD",8925,8925,0,"PT",8925,.06)

"^DD",8925,8925,0,"PT",8925.5,.01)

"^DD",8925,8925,0,"PT",8925.7,.01)

"^DD",8925,8925,0,"PT",8925.9,.01)

"^DD",8925,8925,0,"PT",8925.91,.01)

"^DD",8925,8925,0,"SCR")
I 1 S TIUFPRIV=1
"^DD",8925,8925,0,"VRPK")
TIU RETURNS FROM WPB
"^DD",8925,8925,.01,0)
DOCUMENT TYPE^RP8925.1'O^TIU(8925.1,^0;1^Q
"^DD",8925,8925,.01,1,0)
^.1
"^DD",8925,8925,.01,1,1,0)
8925^B
"^DD",8925,8925,.01,1,1,1)
S ^TIU(8925,"B",$E(X,1,30),DA)=""
"^DD",8925,8925,.01,1,1,2)
K ^TIU(8925,"B",$E(X,1,30),DA)
"^DD",8925,8925,.01,1,2,0)
8925^APT2^MUMPS
"^DD",8925,8925,.01,1,2,1)
I +$P(^TIU(8925,+DA,0),U,2),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"APT",+$P(^TIU(8925,+DA,0),U,2),+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-$P(^TIU(8925,+DA,13),U)),DA)=""
"^DD",8925,8925,.01,1,2,2)
I +$P(^TIU(8925,+DA,0),U,2),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"APT",+$P(^TIU(8925,+DA,0),U,2),+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-$P(^TIU(8925,+DA,13),U)),DA)
"^DD",8925,8925,.01,1,2,"%D",0)
^^2^2^2960502^^^^
"^DD",8925,8925,.01,1,2,"%D",1,0)
This MUMPS-type, multi-field cross-reference by PATIENT, DOCUMENT TYPE,
"^DD",8925,8925,.01,1,2,"%D",2,0)
STATUS, and INVERSE ENTRY/DICTATION DATE facilitates look-ups by patient.
"^DD",8925,8925,.01,1,2,"DT")
2940322
"^DD",8925,8925,.01,1,3,0)
8925^AAU2^MUMPS
"^DD",8925,8925,.01,1,3,1)
I +$P($G(^TIU(8925,+DA,12)),U,2),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"AAU",+$P($G(^TIU(8925,+DA,12)),U,2),+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,.01,1,3,2)
I +$P($G(^TIU(8925,+DA,12)),U,2),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"AAU",+$P($G(^TIU(8925,+DA,12)),U,2),+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,.01,1,3,"%D",0)
^^2^2^2940722^^
"^DD",8925,8925,.01,1,3,"%D",1,0)
This MUMPS-type, multi-field cross-reference by AUTHOR, DOCUMENT TYPE,
"^DD",8925,8925,.01,1,3,"%D",2,0)
STATUS, and INVERSE ENTRY/DICTATION DATE facilitates look-ups by author.
"^DD",8925,8925,.01,1,3,"DT")
2940322
"^DD",8925,8925,.01,1,4,0)
8925^ASUP2^MUMPS
"^DD",8925,8925,.01,1,4,1)
I +$P($G(^TIU(8925,+DA,12)),U,8),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ASUP",+$P($G(^TIU(8925,+DA,12)),U,8),+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,.01,1,4,2)
I +$P($G(^TIU(8925,+DA,12)),U,8),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ASUP",+$P($G(^TIU(8925,+DA,12)),U,8),+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,.01,1,4,"%D",0)
^^3^3^2950125^^^^
"^DD",8925,8925,.01,1,4,"%D",1,0)
This multi-field, MUMPS-type cross-reference by (EXPECTED COSIGNER),
"^DD",8925,8925,.01,1,4,"%D",2,0)
DOCUMENT TYPE, STATUS, INVERSE ENTRY/DICTATION DATE/TIME is
"^DD",8925,8925,.01,1,4,"%D",3,0)
used for look-ups and queries.
"^DD",8925,8925,.01,1,4,"DT")
2950125
"^DD",8925,8925,.01,1,5,0)
8925^AV2^MUMPS
"^DD",8925,8925,.01,1,5,1)
I $P($$DOCTYPE^TIULF(+DA),U)="DOC",+$P($G(^TIU(8925,+DA,0)),U,2),+$P($G(^(0)),U,3) S ^TIU(8925,"AV",+$P(^TIU(8925,+DA,0),U,2),+X,+$P(^TIU(8925,+DA,0),U,3),+DA)=""
"^DD",8925,8925,.01,1,5,2)
I +$P($G(^TIU(8925,+DA,0)),U,2),+$P($G(^(0)),U,3) K ^TIU(8925,"AV",+$P(^TIU(8925,+DA,0),U,2),+X,+$P(^TIU(8925,+DA,0),U,3),+DA)
"^DD",8925,8925,.01,1,5,"%D",0)
^^3^3^2950615^^
"^DD",8925,8925,.01,1,5,"%D",1,0)
This MUMPS-type, multi-field cross-reference by patient, document type,
"^DD",8925,8925,.01,1,5,"%D",2,0)
and visit number will allow for a candidate key to determine whether a
"^DD",8925,8925,.01,1,5,"%D",3,0)
given document exists for a particular patient visit.
"^DD",8925,8925,.01,1,5,"DT")
2950615
"^DD",8925,8925,.01,1,6,0)
8925^ATS2^MUMPS
"^DD",8925,8925,.01,1,6,1)
I +$P($G(^TIU(8925,+DA,14)),U,2),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ATS",+$P($G(^TIU(8925,+DA,14)),U,2),+X,+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,.01,1,6,2)
I +$P($G(^TIU(8925,+DA,14)),U,2),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ATS",+$P($G(^TIU(8925,+DA,14)),U,2),+X,+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,.01,1,6,"%D",0)
^^3^3^2941121^^
"^DD",8925,8925,.01,1,6,"%D",1,0)
This MUMPS-type, multi-field cross-reference by TREATING SPECIALTY,
"^DD",8925,8925,.01,1,6,"%D",2,0)
DOCUMENT TYPE, STATUS, and INVERSE ENTRY/DICTATION DATE facilitates
"^DD",8925,8925,.01,1,6,"%D",3,0)
look-ups by treating specialty.
"^DD",8925,8925,.01,1,6,"DT")
2940325
"^DD",8925,8925,.01,1,7,0)
8925^ATC2^MUMPS
"^DD",8925,8925,.01,1,7,1)
I +$P($G(^TIU(8925,+DA,13)),U,2),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ATC",+$P($G(^TIU(8925,+DA,13)),U,2),+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,.01,1,7,2)
I +$P($G(^TIU(8925,+DA,13)),U,2),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ATC",+$P($G(^TIU(8925,+DA,13)),U,2),+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,.01,1,7,"%D",0)
^^3^3^2940323^
"^DD",8925,8925,.01,1,7,"%D",1,0)
This MUMPS-type, multi-field cross-reference by TRANSCRIPTIONIST ID,
"^DD",8925,8925,.01,1,7,"%D",2,0)
DOCUMENT TYPE, STATUS, and INVERSE DICTATION DATE will facilitate look-ups
"^DD",8925,8925,.01,1,7,"%D",3,0)
by transcriptionist.
"^DD",8925,8925,.01,1,7,"DT")
2940323
"^DD",8925,8925,.01,1,8,0)
8925^ALL2^MUMPS
"^DD",8925,8925,.01,1,8,1)
I +$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ALL","ANY",+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,.01,1,8,2)
I +$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ALL","ANY",+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,.01,1,8,"%D",0)
^^3^3^2940325^
"^DD",8925,8925,.01,1,8,"%D",1,0)
This multi-field cross-reference is used for building the review screen
"^DD",8925,8925,.01,1,8,"%D",2,0)
across all categories (Author, Attending Physician, Patient,
"^DD",8925,8925,.01,1,8,"%D",3,0)
Transcriptionist, or treating specialty).
"^DD",8925,8925,.01,1,8,"DT")
2940325
"^DD",8925,8925,.01,1,9,0)
8925^AA2^MUMPS
"^DD",8925,8925,.01,1,9,1)
I $P($$DOCTYPE^TIULF(+DA),U)="DOC",$L($P(^TIU(8925,+DA,0),U,2)),(+$P(^(0),U,3)>0) S ^TIU(8925,"AA",+$P(^(0),U,2),+X,(9999999-$P(+^AUPNVSIT(+$P(^TIU(8925,+DA,0),U,3),0),".")),DA)=""
"^DD",8925,8925,.01,1,9,2)
I $L($P(^TIU(8925,+DA,0),U,2)),(+$P(^(0),U,3)>0) K ^TIU(8925,"AA",+$P(^(0),U,2),+X,(9999999-$P(+^AUPNVSIT(+$P(^TIU(8925,+DA,0),U,3),0),".")),DA)
"^DD",8925,8925,.01,1,9,"%D",0)
^^4^4^2950615^^^^
"^DD",8925,8925,.01,1,9,"%D",1,0)
 
"^DD",8925,8925,.01,1,9,"%D",2,0)
This multi-field, MUMPS-type cross-reference by patient, document type and
"^DD",8925,8925,.01,1,9,"%D",3,0)
inverse visit date is optimized for searches by entity, attribute, and
"^DD",8925,8925,.01,1,9,"%D",4,0)
time.
"^DD",8925,8925,.01,1,9,"DT")
2950615
"^DD",8925,8925,.01,1,10,0)
8925^ASUB2^MUMPS
"^DD",8925,8925,.01,1,10,1)
I $L($P($G(^TIU(8925,+DA,17)),U)),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) D ASUBS^TIUDD($P($G(^TIU(8925,+DA,17)),U),+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-+$G(^TIU(8925,+DA,13))),DA)
"^DD",8925,8925,.01,1,10,2)
I $L($P($G(^TIU(8925,+DA,17)),U)),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) D ASUBK^TIUDD($P($G(^TIU(8925,+DA,17)),U),+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-+$G(^TIU(8925,+DA,13))),DA)
"^DD",8925,8925,.01,1,10,"%D",0)
^^2^2^2950928^^^^
"^DD",8925,8925,.01,1,10,"%D",1,0)
This MUMPS-type, multi-field cross-reference is used for queries by
"^DD",8925,8925,.01,1,10,"%D",2,0)
subject.
"^DD",8925,8925,.01,1,10,"DT")
2950928
"^DD",8925,8925,.01,1,11,0)
8925^ASVC2^MUMPS
"^DD",8925,8925,.01,1,11,1)
I +$P($G(^TIU(8925,+DA,14)),U,4),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ASVC",+$P($G(^TIU(8925,+DA,14)),U,4),+X,+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,.01,1,11,2)
I +$P($G(^TIU(8925,+DA,14)),U,4),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ASVC",+$P($G(^TIU(8925,+DA,14)),U,2),+X,+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,.01,1,11,"%D",0)
^^2^2^2941121^
"^DD",8925,8925,.01,1,11,"%D",1,0)
This MUMPS-type, multi-field cross-reference by SERVICE, DOCUMENT TYPE,
"^DD",8925,8925,.01,1,11,"%D",2,0)
STATUS, and INVERSE ENTRY/DICTATION DATE facilitates by SERVICE.
"^DD",8925,8925,.01,1,11,"DT")
2941121
"^DD",8925,8925,.01,1,12,0)
8925^AE2^MUMPS
"^DD",8925,8925,.01,1,12,1)
I $P($$DOCTYPE^TIULF(+DA),U)="DOC",+$P($G(^TIU(8925,+DA,0)),U,2),+$P($G(^(0)),U,3) S ^TIU(8925,"AE",+$P($G(^TIU(8925,+DA,0)),U,2),(9999999-$P(+^AUPNVSIT(+$P(^TIU(8925,+DA,0),U,3),0),".")),+X,+DA)=""
"^DD",8925,8925,.01,1,12,2)
I $L($P(^TIU(8925,+DA,0),U)),(+$P(^(0),U,3)>0) K ^TIU(8925,"AE",+$P($G(^TIU(8925,+DA,0)),U,2),(9999999-$P(+^AUPNVSIT(+$P(^TIU(8925,+DA,0),U,3),0),".")),+X,+DA)
"^DD",8925,8925,.01,1,12,"%D",0)
^^2^2^2950615^
"^DD",8925,8925,.01,1,12,"%D",1,0)
This multi-field, MUMPS-type Cross-reference by Patient, Inverse Date, and 
"^DD",8925,8925,.01,1,12,"%D",2,0)
Report Type is to optimize searching by entity, time, and attribute
"^DD",8925,8925,.01,1,12,"DT")
2950615
"^DD",8925,8925,.01,1,13,0)
8925^ALOC2^MUMPS
"^DD",8925,8925,.01,1,13,1)
I +$P($G(^TIU(8925,+DA,12)),U,5),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ALOC",+$P($G(^TIU(8925,+DA,12)),U,5),+X,+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,.01,1,13,2)
I +$P($G(^TIU(8925,+DA,12)),U,5),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ALOC",+$P($G(^TIU(8925,+DA,12)),U,5),+X,+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,.01,1,13,"%D",0)
^^2^2^2960710^^
"^DD",8925,8925,.01,1,13,"%D",1,0)
This MUMPS-type, multi-field cross-reference is optimized for searching 
"^DD",8925,8925,.01,1,13,"%D",2,0)
hospital location, document type, status, and date range.
"^DD",8925,8925,.01,1,13,"DT")
2950615
"^DD",8925,8925,.01,1,14,0)
8925^APRB2^MUMPS
"^DD",8925,8925,.01,1,14,1)
I +$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5),+$O(^TIU(8925.9,"B",+DA,0)) D APRBS^TIUDD(+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-+$G(^TIU(8925,+DA,13))),DA)
"^DD",8925,8925,.01,1,14,2)
I +$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5),+$O(^TIU(8925.9,"B",+DA,0)) D APRBK^TIUDD(+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-+$G(^TIU(8925,+DA,13))),DA)
"^DD",8925,8925,.01,1,14,"%D",0)
^^3^3^2950928^^^
"^DD",8925,8925,.01,1,14,"%D",1,0)
This MUMPS-type, multi-field cross-reference by Problem, Document Type,
"^DD",8925,8925,.01,1,14,"%D",2,0)
Status, and Inverse Reference Date facilitates query for documents by
"^DD",8925,8925,.01,1,14,"%D",3,0)
problem.
"^DD",8925,8925,.01,1,14,"DT")
2950928
"^DD",8925,8925,.01,1,15,0)
8925^AVSIT2^MUMPS
"^DD",8925,8925,.01,1,15,1)
I +$P(^TIU(8925,+DA,0),U,3),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"AVSIT",+$P(^TIU(8925,+DA,0),U,3),+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-$P(^TIU(8925,+DA,13),U)),DA)=""
"^DD",8925,8925,.01,1,15,2)
I +$P(^TIU(8925,+DA,0),U,3),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"AVSIT",+$P(^TIU(8925,+DA,0),U,3),+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-$P(^TIU(8925,+DA,13),U)),DA)
"^DD",8925,8925,.01,1,15,"%D",0)
^^2^2^2951207^^^
"^DD",8925,8925,.01,1,15,"%D",1,0)
This MUMPS-type, multi-field cross-reference by VISIT, DOCUMENT TYPE,
"^DD",8925,8925,.01,1,15,"%D",2,0)
STATUS, and INVERSE ENTRY/DICTATION DATE facilitates look-ups by visit.
"^DD",8925,8925,.01,1,15,"DT")
2950907
"^DD",8925,8925,.01,1,16,0)
8925^APTCL2^MUMPS
"^DD",8925,8925,.01,1,16,1)
I +$P(^TIU(8925,+DA,0),U,2),+$P($G(^TIU(8925,+DA,13)),U) S ^TIU(8925,"APTCL",+$P(^TIU(8925,+DA,0),U,2),+$$CLINDOC^TIULC1(+X,+DA),(9999999-$P(^TIU(8925,+DA,13),U)),DA)=""
"^DD",8925,8925,.01,1,16,2)
I +$P(^TIU(8925,+DA,0),U,2),+$P($G(^TIU(8925,+DA,13)),U) K ^TIU(8925,"APTCL",+$P(^TIU(8925,+DA,0),U,2),+$$CLINDOC^TIULC1(+X,+DA),(9999999-$P(^TIU(8925,+DA,13),U)),DA)
"^DD",8925,8925,.01,1,16,"%D",0)
^^2^2^2960823^^^^
"^DD",8925,8925,.01,1,16,"%D",1,0)
This MUMPS-type, multi-field cross-reference by PATIENT, CLINICAL DOCUMENT
"^DD",8925,8925,.01,1,16,"%D",2,0)
CLASS, and INVERSE REFERENCE DATE facilitates look-ups by patient.
"^DD",8925,8925,.01,1,16,"DT")
2960823
"^DD",8925,8925,.01,1,17,0)
8925^APTCL382^MUMPS
"^DD",8925,8925,.01,1,17,1)
I +$P(^TIU(8925,+DA,0),U,2),+$P($G(^TIU(8925,+DA,13)),U) S ^TIU(8925,"APTCL",+$P(^TIU(8925,+DA,0),U,2),38,(9999999-$P(^TIU(8925,+DA,13),U)),DA)=""
"^DD",8925,8925,.01,1,17,2)
I +$P(^TIU(8925,+DA,0),U,2),+$P($G(^TIU(8925,+DA,13)),U) K ^TIU(8925,"APTCL",+$P(^TIU(8925,+DA,0),U,2),38,(9999999-$P(^TIU(8925,+DA,13),U)),DA)
"^DD",8925,8925,.01,1,17,"%D",0)
^^2^2^2960506^
"^DD",8925,8925,.01,1,17,"%D",1,0)
This MUMPS-type, multi-field cross-reference by PATIENT, ROOT CLASS, and
"^DD",8925,8925,.01,1,17,"%D",2,0)
INVERSE REFERENCE DATE facilitates look-ups by patient.
"^DD",8925,8925,.01,1,17,"DT")
2960506
"^DD",8925,8925,.01,1,18,0)
8925^ACLPT01^MUMPS
"^DD",8925,8925,.01,1,18,1)
D SACLPT^TIUDD0(.01,X)
"^DD",8925,8925,.01,1,18,2)
D KACLPT^TIUDD01(.01,X)
"^DD",8925,8925,.01,1,18,"%D",0)
^^3^3^2970617^
"^DD",8925,8925,.01,1,18,"%D",1,0)
This multi-field, MUMPS-type cross-reference on CLASS, PATIENT, INVERSE
"^DD",8925,8925,.01,1,18,"%D",2,0)
REFERENCE DATE/TIME, and RECORD # is designed to support rapid queries by
"^DD",8925,8925,.01,1,18,"%D",3,0)
patient.
"^DD",8925,8925,.01,1,18,"DT")
2970617
"^DD",8925,8925,.01,1,19,0)
8925^ACLAU02^MUMPS
"^DD",8925,8925,.01,1,19,1)
D SACLAU^TIUDD0(.01,X),SACLAU1^TIUDD0(.01,X)
"^DD",8925,8925,.01,1,19,2)
D KACLAU^TIUDD01(.01,X),KACLAU1^TIUDD01(.01,X)
"^DD",8925,8925,.01,1,19,"%D",0)
^^4^4^2970617^
"^DD",8925,8925,.01,1,19,"%D",1,0)
This multi-field, MUMPS-type cross-reference on CLASS, AUTHOR (or ENTERED
"^DD",8925,8925,.01,1,19,"%D",2,0)
BY), PATIENT, INVERSE REFERENCE DATE/TIME, and RECORD # is designed to
"^DD",8925,8925,.01,1,19,"%D",3,0)
facilitate rapid access to the current users unsigned notes about a
"^DD",8925,8925,.01,1,19,"%D",4,0)
patient.
"^DD",8925,8925,.01,1,19,"DT")
2970617
"^DD",8925,8925,.01,1,20,0)
8925^ACLEC01^MUMPS
"^DD",8925,8925,.01,1,20,1)
D SACLEC^TIUDD0(.01,X)
"^DD",8925,8925,.01,1,20,2)
D KACLEC^TIUDD01(.01,X)
"^DD",8925,8925,.01,1,20,"%D",0)
^^3^3^2970617^
"^DD",8925,8925,.01,1,20,"%D",1,0)
This multi-field, MUMPS-type Cross-reference on CLASS, EXPECTED COSIGNER,
"^DD",8925,8925,.01,1,20,"%D",2,0)
PATIENT, INVERSE REFERENCE DATE/TIME, and RECORD # is useful for finding
"^DD",8925,8925,.01,1,20,"%D",3,0)
the uncosigned notes by the current user for a given patient.
"^DD",8925,8925,.01,1,20,"DT")
2970617
"^DD",8925,8925,.01,1,21,0)
8925^ACLSB01^MUMPS
"^DD",8925,8925,.01,1,21,1)
D SACLSB^TIUDD0(.01,X)
"^DD",8925,8925,.01,1,21,2)
D KACLSB^TIUDD01(.01,X)
"^DD",8925,8925,.01,1,21,"%D",0)
^^3^3^2970617^^^^
"^DD",8925,8925,.01,1,21,"%D",1,0)
This cross-reference by CLASS, SIGNED BY, PATIENT, INVERSE REFERENCE
"^DD",8925,8925,.01,1,21,"%D",2,0)
DATE/TIME, and RECORD # will facilitate finding records signed by a given
"^DD",8925,8925,.01,1,21,"%D",3,0)
user about the current patient.
"^DD",8925,8925,.01,1,21,"DT")
2970617
"^DD",8925,8925,.01,1,22,0)
8925^APTLD01^MUMPS
"^DD",8925,8925,.01,1,22,1)
D SAPTLD^TIUDD0(.01,X)
"^DD",8925,8925,.01,1,22,2)
D KAPTLD^TIUDD01(.01,X)
"^DD",8925,8925,.01,1,22,"%D",0)
^^2^2^2970617^^^
"^DD",8925,8925,.01,1,22,"%D",1,0)
This MUMPS type Multi-field index by PT,TITLE,"LOC;VDT;VTYP",DA is used
"^DD",8925,8925,.01,1,22,"%D",2,0)
for optimizing checks for documents for a particular visit.
"^DD",8925,8925,.01,1,22,"DT")
2970617
"^DD",8925,8925,.01,2)
S Y(0)=Y S Y=$S($$PNAME^TIULC1(+Y)]"":$$PNAME^TIULC1(+Y),$P(^TIU(8925.1,+Y,0),U,3)]"":$P(^TIU(8925.1,+Y,0),U,3),1:Y)
"^DD",8925,8925,.01,2.1)
S Y=$S($$PNAME^TIULC1(+Y)]"":$$PNAME^TIULC1(+Y),$P(^TIU(8925.1,+Y,0),U,3)]"":$P(^TIU(8925.1,+Y,0),U,3),1:Y)
"^DD",8925,8925,.01,3)
Select the type of document.
"^DD",8925,8925,.01,21,0)
^^3^3^2960605^^
"^DD",8925,8925,.01,21,1,0)
This field points to the Tiu Document Definition file, whose entry defines
"^DD",8925,8925,.01,21,2,0)
the components of the document and various parameters for the document's
"^DD",8925,8925,.01,21,3,0)
behavior.
"^DD",8925,8925,.01,"DT")
2970617
"^DD",8925,8925,.02,0)
PATIENT^P9000001'^AUPNPAT(^0;2^Q
"^DD",8925,8925,.02,1,0)
^.1
"^DD",8925,8925,.02,1,1,0)
8925^AA^MUMPS
"^DD",8925,8925,.02,1,1,1)
I $P($$DOCTYPE^TIULF(+DA),U)="DOC",$L($P(^TIU(8925,+DA,0),U)),(+$P(^(0),U,3)>0) S ^TIU(8925,"AA",+X,+^TIU(8925,+DA,0),(9999999-$P(+^AUPNVSIT($P(^TIU(8925,+DA,0),U,3),0),".")),+DA)=""
"^DD",8925,8925,.02,1,1,2)
I $L($P(^TIU(8925,+DA,0),U)),(+$P(^(0),U,3)>0) K ^TIU(8925,"AA",+X,+^TIU(8925,+DA,0),(9999999-$P(+^AUPNVSIT($P(^TIU(8925,+DA,0),U,3),0),".")),+DA)
"^DD",8925,8925,.02,1,1,"%D",0)
^^3^3^2950615^^
"^DD",8925,8925,.02,1,1,"%D",1,0)
 
"^DD",8925,8925,.02,1,1,"%D",2,0)
This multi-field, MUMPS-type cross-reference by Patient, Document Type,
"^DD",8925,8925,.02,1,1,"%D",3,0)
and Inverse Visit Date will help to identify documents by patient and time.
"^DD",8925,8925,.02,1,1,"DT")
2950615
"^DD",8925,8925,.02,1,2,0)
8925^APT^MUMPS
"^DD",8925,8925,.02,1,2,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"APT",+X,+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-$P(^TIU(8925,+DA,13),U)),DA)=""
"^DD",8925,8925,.02,1,2,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"APT",+X,+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-$P(^TIU(8925,+DA,13),U)),DA)
"^DD",8925,8925,.02,1,2,"%D",0)
^^3^3^2950925^^^
"^DD",8925,8925,.02,1,2,"%D",1,0)
This MUMPS-type, multi-field cross-reference by PATIENT, DOCUMENT TYPE,
"^DD",8925,8925,.02,1,2,"%D",2,0)
STATUS, and INVERSE ENTRY/DICTATION DATE will facilitate look-ups by
"^DD",8925,8925,.02,1,2,"%D",3,0)
patient.
"^DD",8925,8925,.02,1,2,"DT")
2940322
"^DD",8925,8925,.02,1,3,0)
8925^AE^MUMPS
"^DD",8925,8925,.02,1,3,1)
I $P($$DOCTYPE^TIULF(+DA),U)="DOC",$L($P(^TIU(8925,+DA,0),U)),(+$P(^(0),U,3)>0) S ^TIU(8925,"AE",+X,(9999999-$P(+^AUPNVSIT($P(^TIU(8925,+DA,0),U,3),0),".")),+^TIU(8925,+DA,0),+DA)=""
"^DD",8925,8925,.02,1,3,2)
I $L($P(^TIU(8925,+DA,0),U)),(+$P(^(0),U,3)>0) K ^TIU(8925,"AE",+X,(9999999-$P(+^AUPNVSIT($P(^TIU(8925,+DA,0),U,3),0),".")),+^TIU(8925,+DA,0),+DA)
"^DD",8925,8925,.02,1,3,"%D",0)
^^4^4^2950615^^^
"^DD",8925,8925,.02,1,3,"%D",1,0)
 
"^DD",8925,8925,.02,1,3,"%D",2,0)
This multi-field, MUMPS-type Cross-reference by Patient, Inverse Visit
"^DD",8925,8925,.02,1,3,"%D",3,0)
Date, and Report Type is to optimize searching by entity, time, and
"^DD",8925,8925,.02,1,3,"%D",4,0)
attribute.
"^DD",8925,8925,.02,1,3,"DT")
2950615
"^DD",8925,8925,.02,1,4,0)
8925^C
"^DD",8925,8925,.02,1,4,1)
S ^TIU(8925,"C",$E(X,1,30),DA)=""
"^DD",8925,8925,.02,1,4,2)
K ^TIU(8925,"C",$E(X,1,30),DA)
"^DD",8925,8925,.02,1,4,"%D",0)
^^1^1^2930407^
"^DD",8925,8925,.02,1,4,"%D",1,0)
This REGULAR FileMan type cross-reference is used for look-up by patient.
"^DD",8925,8925,.02,1,4,"DT")
2930306
"^DD",8925,8925,.02,1,5,0)
8925^AV^MUMPS
"^DD",8925,8925,.02,1,5,1)
I $P($$DOCTYPE^TIULF(+DA),U)="DOC",+$P($G(^TIU(8925,+DA,0)),U),+$P($G(^(0)),U,3) S ^TIU(8925,"AV",+X,+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,3),+DA)=""
"^DD",8925,8925,.02,1,5,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^(0)),U,3) K ^TIU(8925,"AV",+X,+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,3),+DA)
"^DD",8925,8925,.02,1,5,"%D",0)
^^3^3^2950615^^
"^DD",8925,8925,.02,1,5,"%D",1,0)
This MUMPS-type, multi-field cross-reference by patient, document type and
"^DD",8925,8925,.02,1,5,"%D",2,0)
visit record number will serve as a candidate key to determine whether a
"^DD",8925,8925,.02,1,5,"%D",3,0)
given document exists for a particular patient visit.
"^DD",8925,8925,.02,1,5,"DT")
2950615
"^DD",8925,8925,.02,1,6,0)
8925^APTP^MUMPS
"^DD",8925,8925,.02,1,6,1)
I +$$APTP^TIULX(+DA),+$P($G(^TIU(8925,+DA,15)),U) S ^TIU(8925,"APTP",+X,+$P($G(^TIU(8925,+DA,15)),U),+DA)=""
"^DD",8925,8925,.02,1,6,2)
I +$P($G(^TIU(8925,+DA,15)),U) K ^TIU(8925,"APTP",+X,+$P($G(^TIU(8925,+DA,15)),U),+DA)
"^DD",8925,8925,.02,1,6,"%D",0)
^^3^3^2950623^
"^DD",8925,8925,.02,1,6,"%D",1,0)
This MUMPS-type, multi-field cross-reference by Patient and REGULAR
"^DD",8925,8925,.02,1,6,"%D",2,0)
Signature Date/Time is used to maintain the daily print queue for batch
"^DD",8925,8925,.02,1,6,"%D",3,0)
printing of documents (currently, just Progress Notes) on signature.
"^DD",8925,8925,.02,1,6,"DT")
2950623
"^DD",8925,8925,.02,1,7,0)
8925^ADCPT^MUMPS
"^DD",8925,8925,.02,1,7,1)
I +$P($G(^TIU(8925,+DA,0)),U,4),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ADCPT",+X,+$P(^TIU(8925,+DA,0),U,4),+$P(^TIU(8925,+DA,0),U,5),(9999999-$P(^TIU(8925,+DA,13),U)),DA)=""
"^DD",8925,8925,.02,1,7,2)
I +$P($G(^TIU(8925,+DA,0)),U,4),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ADCPT",+X,+$P(^TIU(8925,+DA,0),U,4),+$P(^TIU(8925,+DA,0),U,5),(9999999-$P(^TIU(8925,+DA,13),U)),DA)
"^DD",8925,8925,.02,1,7,"%D",0)
^^3^3^2950925^
"^DD",8925,8925,.02,1,7,"%D",1,0)
This MUMPS-type, multi-field cross-reference by PATIENT, DOCUMENT CLASS,
"^DD",8925,8925,.02,1,7,"%D",2,0)
STATUS, and INVERSE REFERENCE DATE facilitates look-ups by PATIENT AND
"^DD",8925,8925,.02,1,7,"%D",3,0)
DOCUMENT CLASS (e.g., all SIGNED Violence Postings for patient John Doe).
"^DD",8925,8925,.02,1,7,"DT")
2950925
"^DD",8925,8925,.02,1,8,0)
8925^APTCL^MUMPS
"^DD",8925,8925,.02,1,8,1)
I +$P(^TIU(8925,+DA,0),U),+$P($G(^TIU(8925,+DA,13)),U) S ^TIU(8925,"APTCL",+X,+$$CLINDOC^TIULC1(+$P(^TIU(8925,+DA,0),U),+DA),(9999999-$P(^TIU(8925,+DA,13),U)),DA)=""
"^DD",8925,8925,.02,1,8,2)
I +$P(^TIU(8925,+DA,0),U),+$P($G(^TIU(8925,+DA,13)),U) K ^TIU(8925,"APTCL",+X,+$$CLINDOC^TIULC1(+$P(^TIU(8925,+DA,0),U),+DA),(9999999-$P(^TIU(8925,+DA,13),U)),DA)
"^DD",8925,8925,.02,1,8,"%D",0)
^^2^2^2960823^^^^
"^DD",8925,8925,.02,1,8,"%D",1,0)
This MUMPS-type, multi-field cross-reference by PATIENT, CLINICAL DOCUMENT
"^DD",8925,8925,.02,1,8,"%D",2,0)
CLASS, and INVERSE REFERENCE DATE facilitates look-ups by patient.
"^DD",8925,8925,.02,1,8,"DT")
2960823
"^DD",8925,8925,.02,1,9,0)
8925^APTCL38^MUMPS
"^DD",8925,8925,.02,1,9,1)
I +$P(^TIU(8925,+DA,0),U),+$P($G(^TIU(8925,+DA,13)),U) S ^TIU(8925,"APTCL",+X,38,(9999999-$P(^TIU(8925,+DA,13),U)),DA)=""
"^DD",8925,8925,.02,1,9,2)
I +$P(^TIU(8925,+DA,0),U),+$P($G(^TIU(8925,+DA,13)),U) K ^TIU(8925,"APTCL",+X,38,(9999999-$P(^TIU(8925,+DA,13),U)),DA)
"^DD",8925,8925,.02,1,9,"%D",0)
^^2^2^2960506^
"^DD",8925,8925,.02,1,9,"%D",1,0)
This MUMPS-type, multi-field cross-reference by PATIENT, ROOT CLASS, and
"^DD",8925,8925,.02,1,9,"%D",2,0)
INVERSE REFERENCE DATE facilitates look-ups by patient.
"^DD",8925,8925,.02,1,9,"DT")
2960506
"^DD",8925,8925,.02,1,10,0)
8925^2270^MUMPS
"^DD",8925,8925,.02,1,10,1)
D SACLPT^TIUDD0(.02,X)
"^DD",8925,8925,.02,1,10,2)
D KACLPT^TIUDD01(.02,X)
"^DD",8925,8925,.02,1,10,3)
This x-ref is used to extract lists based on context
"^DD",8925,8925,.02,1,10,"%D",0)
^^3^3^2970617^^^^
"^DD",8925,8925,.02,1,10,"%D",1,0)
This cross-reference permits the rapid extraction of documents which are
"^DD",8925,8925,.02,1,10,"%D",2,0)
of the specified document class, for a the patient(s) selected, and within
"^DD",8925,8925,.02,1,10,"%D",3,0)
the specified date range.
"^DD",8925,8925,.02,1,10,"DT")
2970617
"^DD",8925,8925,.02,1,11,0)
8925^ACLAU^MUMPS
"^DD",8925,8925,.02,1,11,1)
D SACLAU^TIUDD0(.02,X),SACLAU1^TIUDD0(.02,X)
"^DD",8925,8925,.02,1,11,2)
D KACLAU^TIUDD01(.02,X),KACLAU1^TIUDD01(.02,X)
"^DD",8925,8925,.02,1,11,3)
This x-ref is used to extract lists based on context
"^DD",8925,8925,.02,1,11,"%D",0)
^^4^4^2970617^
"^DD",8925,8925,.02,1,11,"%D",1,0)
This multi-field, MUMPS-type cross-reference on CLASS, AUTHOR (or ENTERED
"^DD",8925,8925,.02,1,11,"%D",2,0)
BY), PATIENT, INVERSE REFERENCE DATE/TIME, and RECORD # is designed to
"^DD",8925,8925,.02,1,11,"%D",3,0)
facilitate rapid access to the current users unsigned notes about a
"^DD",8925,8925,.02,1,11,"%D",4,0)
patient.
"^DD",8925,8925,.02,1,11,"DT")
2970617
"^DD",8925,8925,.02,1,12,0)
8925^ACLEC^MUMPS
"^DD",8925,8925,.02,1,12,1)
D SACLEC^TIUDD0(.02,X)
"^DD",8925,8925,.02,1,12,2)
D KACLEC^TIUDD01(.02,X)
"^DD",8925,8925,.02,1,12,3)
This x-ref is used to extract lists based on context
"^DD",8925,8925,.02,1,12,"%D",0)
^^3^3^2970617^
"^DD",8925,8925,.02,1,12,"%D",1,0)
This multi-field, MUMPS-type Cross-reference on CLASS, EXPECTED COSIGNER,
"^DD",8925,8925,.02,1,12,"%D",2,0)
PATIENT, INVERSE REFERENCE DATE/TIME, and RECORD # is useful for finding
"^DD",8925,8925,.02,1,12,"%D",3,0)
the uncosigned notes by the current user for a given patient.
"^DD",8925,8925,.02,1,12,"DT")
2970617
"^DD",8925,8925,.02,1,13,0)
8925^ACLSB^MUMPS
"^DD",8925,8925,.02,1,13,1)
D SACLSB^TIUDD0(.02,X)
"^DD",8925,8925,.02,1,13,2)
D KACLSB^TIUDD01(.02,X)
"^DD",8925,8925,.02,1,13,3)
This x-ref is used to extract lists based on context
"^DD",8925,8925,.02,1,13,"%D",0)
^^3^3^2970617^
"^DD",8925,8925,.02,1,13,"%D",1,0)
This cross-reference by CLASS, SIGNED BY, PATIENT, INVERSE REFERENCE
"^DD",8925,8925,.02,1,13,"%D",2,0)
DATE/TIME, and RECORD # will facilitate finding records signed by a given
"^DD",8925,8925,.02,1,13,"%D",3,0)
user about the current patient.
"^DD",8925,8925,.02,1,13,"DT")
2970617
"^DD",8925,8925,.02,1,14,0)
8925^APTLD02^MUMPS
"^DD",8925,8925,.02,1,14,1)
D SAPTLD^TIUDD0(.02,X)
"^DD",8925,8925,.02,1,14,2)
D KAPTLD^TIUDD01(.02,X)
"^DD",8925,8925,.02,1,14,"%D",0)
^^2^2^2970617^^^
"^DD",8925,8925,.02,1,14,"%D",1,0)
This MUMPS type Multi-field index by PT,TITLE,"LOC;VDT;VTYP",DA is used
"^DD",8925,8925,.02,1,14,"%D",2,0)
for optimizing checks for documents for a particular visit.
"^DD",8925,8925,.02,1,14,"DT")
2970617
"^DD",8925,8925,.02,21,0)
^^1^1^2930721^^
"^DD",8925,8925,.02,21,1,0)
This field contains a pointer to the patient file.
"^DD",8925,8925,.02,"DT")
2970617
"^DD",8925,8925,.03,0)
VISIT^P9000010'^AUPNVSIT(^0;3^Q
"^DD",8925,8925,.03,1,0)
^.1
"^DD",8925,8925,.03,1,1,0)
8925^AA1^MUMPS
"^DD",8925,8925,.03,1,1,1)
I $P($$DOCTYPE^TIULF(+DA),U)="DOC",$L($P(^TIU(8925,+DA,0),U)),(+$P(^(0),U,2)>0) S ^TIU(8925,"AA",$P(^(0),U,2),+$P(^(0),U),(9999999-$P(+$G(^AUPNVSIT(X,0)),".")),DA)=""
"^DD",8925,8925,.03,1,1,2)
I $L($P(^TIU(8925,+DA,0),U)),(+$P(^(0),U,2)>0) K ^TIU(8925,"AA",$P(^(0),U,2),+$P(^(0),U),(9999999-$P(+$G(^AUPNVSIT(X,0)),".")),DA)
"^DD",8925,8925,.03,1,1,"%D",0)
^^4^4^2960610^^^^
"^DD",8925,8925,.03,1,1,"%D",1,0)
 
"^DD",8925,8925,.03,1,1,"%D",2,0)
This multi-field, MUMPS-type cross-reference by patient, document type,
"^DD",8925,8925,.03,1,1,"%D",3,0)
and inverse visit date is optimized for searches by entity, attribute, and
"^DD",8925,8925,.03,1,1,"%D",4,0)
time.
"^DD",8925,8925,.03,1,1,"DT")
2950615
"^DD",8925,8925,.03,1,2,0)
8925^AE1^MUMPS
"^DD",8925,8925,.03,1,2,1)
I $P($$DOCTYPE^TIULF(+DA),U)="DOC",$L($P(^TIU(8925,+DA,0),U)),(+$P(^(0),U,2)>0) S ^TIU(8925,"AE",+$P(^TIU(8925,+DA,0),U,2),(9999999-$P(+$G(^AUPNVSIT(+X,0)),".")),+^TIU(8925,+DA,0),+DA)=""
"^DD",8925,8925,.03,1,2,2)
I $L($P(^TIU(8925,+DA,0),U)),(+$P(^(0),U,2)>0) K ^TIU(8925,"AE",+$P(^TIU(8925,+DA,0),U,2),(9999999-$P(+$G(^AUPNVSIT(+X,0)),".")),+^TIU(8925,+DA,0),+DA)
"^DD",8925,8925,.03,1,2,"%D",0)
^^4^4^2950615^^^
"^DD",8925,8925,.03,1,2,"%D",1,0)
 
"^DD",8925,8925,.03,1,2,"%D",2,0)
This multi-field, MUMPS-type Cross-reference by Patient, Inverse Visit
"^DD",8925,8925,.03,1,2,"%D",3,0)
Date, and  document type will optimize searching by entity, time, and
"^DD",8925,8925,.03,1,2,"%D",4,0)
attribute.
"^DD",8925,8925,.03,1,2,"DT")
2950615
"^DD",8925,8925,.03,1,3,0)
8925^AV1^MUMPS
"^DD",8925,8925,.03,1,3,1)
I $P($$DOCTYPE^TIULF(+DA),U)="DOC",+$P($G(^TIU(8925,+DA,0)),U),+$P($G(^(0)),U,2) S ^TIU(8925,"AV",+$P(^TIU(8925,+DA,0),U,2),+$P(^TIU(8925,+DA,0),U),+X,+DA)=""
"^DD",8925,8925,.03,1,3,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^(0)),U,2) K ^TIU(8925,"AV",+$P(^TIU(8925,+DA,0),U,2),+$P(^TIU(8925,+DA,0),U),+X,+DA)
"^DD",8925,8925,.03,1,3,"%D",0)
^^3^3^2950615^^^^
"^DD",8925,8925,.03,1,3,"%D",1,0)
This MUMPS-type, multi-field cross-reference by patient, document type,
"^DD",8925,8925,.03,1,3,"%D",2,0)
and visit record number serves as a candidate key to determine whether a
"^DD",8925,8925,.03,1,3,"%D",3,0)
given document exists for a particular patient visit.
"^DD",8925,8925,.03,1,3,"DT")
2950615
"^DD",8925,8925,.03,1,4,0)
8925^AV10^MUMPS
"^DD",8925,8925,.03,1,4,1)
D:$D(^AUPNVSIT(+X)) ADD^AUPNVSIT
"^DD",8925,8925,.03,1,4,2)
D:$D(^AUPNVSIT(+X)) SUB^AUPNVSIT
"^DD",8925,8925,.03,1,4,"%D",0)
^^2^2^2950525^^
"^DD",8925,8925,.03,1,4,"%D",1,0)
This MUMPS-type cross-reference is used to maintain the dependent entry
"^DD",8925,8925,.03,1,4,"%D",2,0)
count in the VISIT file.
"^DD",8925,8925,.03,1,4,"DT")
2950525
"^DD",8925,8925,.03,1,5,0)
8925^AVSIT^MUMPS
"^DD",8925,8925,.03,1,5,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"AVSIT",+X,+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-$P(^TIU(8925,+DA,13),U)),DA)=""
"^DD",8925,8925,.03,1,5,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"AVSIT",+X,+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-$P(^TIU(8925,+DA,13),U)),DA)
"^DD",8925,8925,.03,1,5,"%D",0)
^^2^2^2951207^^^^
"^DD",8925,8925,.03,1,5,"%D",1,0)
This MUMPS-type, multi-field cross-reference by VISIT, DOCUMENT TYPE,
"^DD",8925,8925,.03,1,5,"%D",2,0)
STATUS, and INVERSE ENTRY/DICTATION DATE facilitates look-ups by visit.
"^DD",8925,8925,.03,1,5,"DT")
2950907
"^DD",8925,8925,.03,1,6,0)
8925^V
"^DD",8925,8925,.03,1,6,1)
S ^TIU(8925,"V",$E(X,1,30),DA)=""
"^DD",8925,8925,.03,1,6,2)
K ^TIU(8925,"V",$E(X,1,30),DA)
"^DD",8925,8925,.03,1,6,"%D",0)
^^2^2^2951106^
"^DD",8925,8925,.03,1,6,"%D",1,0)
This REGULAR FileMan Cross-reference by VISIT is used to help identify
"^DD",8925,8925,.03,1,6,"%D",2,0)
dependent entries.
"^DD",8925,8925,.03,1,6,"DT")
2951106
"^DD",8925,8925,.03,1,7,0)
^^TRIGGER^8925^15001
"^DD",8925,8925,.03,1,7,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^TIU(8925,D0,150)):^(150),1:"") S X=$P(Y(1),U,1),X=X S DIU=X K Y X ^DD(8925,.03,1,7,1.1) X ^DD(8925,.03,1,7,1.4)
"^DD",8925,8925,.03,1,7,1.1)
S X=DIV S X=DIV,X=X S X=X,X=$$IEN2VID^VSIT(X)
"^DD",8925,8925,.03,1,7,1.4)
S DIH=$S($D(^TIU(8925,DIV(0),150)):^(150),1:""),DIV=X S $P(^(150),U,1)=DIV,DIH=8925,DIG=15001 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",8925,8925,.03,1,7,2)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^TIU(8925,D0,150)):^(150),1:"") S X=$P(Y(1),U,1),X=X S DIU=X K Y S X="" X ^DD(8925,.03,1,7,2.4)
"^DD",8925,8925,.03,1,7,2.4)
S DIH=$S($D(^TIU(8925,DIV(0),150)):^(150),1:""),DIV=X S $P(^(150),U,1)=DIV,DIH=8925,DIG=15001 D ^DICR:$O(^DD(DIH,DIG,1,0))>0
"^DD",8925,8925,.03,1,7,"CREATE VALUE")
TIU VISIT ID(INTERNAL(VISIT))
"^DD",8925,8925,.03,1,7,"DELETE VALUE")
@
"^DD",8925,8925,.03,1,7,"DT")
2961127
"^DD",8925,8925,.03,1,7,"FIELD")
VISIT ID
"^DD",8925,8925,.03,1,8,0)
8925^APTLD03^MUMPS
"^DD",8925,8925,.03,1,8,1)
D SAPTLD^TIUDD0(.03,X)
"^DD",8925,8925,.03,1,8,2)
D KAPTLD^TIUDD01(.03,X)
"^DD",8925,8925,.03,1,8,"%D",0)
^^2^2^2970617^^
"^DD",8925,8925,.03,1,8,"%D",1,0)
This MUMPS-type Multifield cross-reference by PT,TITLE,"LOC;VDT;VTYP",DA
"^DD",8925,8925,.03,1,8,"%D",2,0)
is used for optimizing checks for documents for a particular visit.
"^DD",8925,8925,.03,1,8,"DT")
2970617
"^DD",8925,8925,.03,"DT")
2970617
"^DD",8925,8925,.04,0)
PARENT DOCUMENT TYPE^P8925.1'^TIU(8925.1,^0;4^Q
"^DD",8925,8925,.04,1,0)
^.1
"^DD",8925,8925,.04,1,1,0)
8925^ADCPT2^MUMPS
"^DD",8925,8925,.04,1,1,1)
I +$P($G(^TIU(8925,+DA,0)),U,2),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ADCPT",+$P(^TIU(8925,+DA,0),U,2),+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-$P(^TIU(8925,+DA,13),U)),DA)=""
"^DD",8925,8925,.04,1,1,2)
I +$P($G(^TIU(8925,+DA,0)),U,2),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ADCPT",+$P(^TIU(8925,+DA,0),U,2),+X,+$P(^TIU(8925,+DA,0),U,5),(9999999-$P(^TIU(8925,+DA,13),U)),DA)
"^DD",8925,8925,.04,1,1,"%D",0)
^^3^3^2950925^
"^DD",8925,8925,.04,1,1,"%D",1,0)
This MUMPS-type, multi-field cross-reference by PATIENT, DOCUMENT CLASS,
"^DD",8925,8925,.04,1,1,"%D",2,0)
STATUS, and INVERSE REFERENCE DATE facilitates look-ups by PATIENT AND
"^DD",8925,8925,.04,1,1,"%D",3,0)
DOCUMENT CLASS (e.g., all SIGNED Violence Postings for patient John Doe).
"^DD",8925,8925,.04,1,1,"DT")
2950925
"^DD",8925,8925,.04,3)
Indicate the PARENT DOCUMENT TYPE to which the current document belongs.
"^DD",8925,8925,.04,21,0)
^^6^6^2960206^^^^
"^DD",8925,8925,.04,21,1,0)
This field points to the immediate parent class or document type to which the
"^DD",8925,8925,.04,21,2,0)
current record belongs.  For example, when the current document has the type 
"^DD",8925,8925,.04,21,3,0)
SOAP - GENERAL NOTE, this field will point to PROGRESS NOTE, as the parent 
"^DD",8925,8925,.04,21,4,0)
class to which SOAP Notes belong, whereas, if the current record is a 
"^DD",8925,8925,.04,21,5,0)
SUBJECTIVE component, then this field will point to SOAP - GENERAL NOTE as 
"^DD",8925,8925,.04,21,6,0)
the parent document type to which the component belongs.
"^DD",8925,8925,.04,"DT")
2950925
"^DD",8925,8925,.05,0)
STATUS^P8925.6'^TIU(8925.6,^0;5^Q
"^DD",8925,8925,.05,1,0)
^.1
"^DD",8925,8925,.05,1,1,0)
8925^ASUP3^MUMPS
"^DD",8925,8925,.05,1,1,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,12)),U,8),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ASUP",+$P(^TIU(8925,+DA,12),U,8),+$P(^TIU(8925,+DA,0),U),+X,(9999999-+$P(^TIU(8925,+DA,13),U)),+DA)=""
"^DD",8925,8925,.05,1,1,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,12)),U,8),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ASUP",+$P(^TIU(8925,+DA,12),U,8),+$P(^TIU(8925,+DA,0),U),+X,(9999999-+$P(^TIU(8925,+DA,13),U)),+DA)
"^DD",8925,8925,.05,1,1,"%D",0)
^^3^3^2950125^^
"^DD",8925,8925,.05,1,1,"%D",1,0)
This MUMPS-type, multi-field cross-reference by (EXPECTED COSIGNER),
"^DD",8925,8925,.05,1,1,"%D",2,0)
DOCUMENT TYPE, STATUS, and INVERSE ENTRY/DICTATION DATE/TIME,
"^DD",8925,8925,.05,1,1,"%D",3,0)
will be used for look-ups and queries.
"^DD",8925,8925,.05,1,1,"DT")
2950125
"^DD",8925,8925,.05,1,2,0)
8925^AAU3^MUMPS
"^DD",8925,8925,.05,1,2,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,12)),U,2),+$P($G(^TIU(8925,+DA,13)),U) S ^TIU(8925,"AAU",+$P(^TIU(8925,+DA,12),U,2),+$P(^TIU(8925,+DA,0),U),+X,(9999999-$P(^TIU(8925,+DA,13),U)),+DA)=""
"^DD",8925,8925,.05,1,2,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,12)),U,2),+$P($G(^TIU(8925,+DA,13)),U) K ^TIU(8925,"AAU",+$P(^TIU(8925,+DA,12),U,2),+$P(^TIU(8925,+DA,0),U),+X,(9999999-$P(^TIU(8925,+DA,13),U)),+DA)
"^DD",8925,8925,.05,1,2,"%D",0)
^^3^3^2940722^^
"^DD",8925,8925,.05,1,2,"%D",1,0)
This MUMPS-type, multi-field cross-reference by AUTHOR/DICTATOR, DOCUMENT
"^DD",8925,8925,.05,1,2,"%D",2,0)
TYPE, STATUS, and INVERSE ENTRY/DICTATION DATE/TIME is used for look-ups
"^DD",8925,8925,.05,1,2,"%D",3,0)
and queries.
"^DD",8925,8925,.05,1,2,"DT")
2940322
"^DD",8925,8925,.05,1,3,0)
8925^APT3^MUMPS
"^DD",8925,8925,.05,1,3,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,2),+$P($G(^TIU(8925,+DA,13)),U) S ^TIU(8925,"APT",+$P(^TIU(8925,+DA,0),U,2),+$P(^TIU(8925,+DA,0),U),+X,(9999999-$P(^TIU(8925,+DA,13),U)),+DA)=""
"^DD",8925,8925,.05,1,3,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,2),+$P($G(^TIU(8925,+DA,13)),U) K ^TIU(8925,"APT",+$P(^TIU(8925,+DA,0),U,2),+$P(^TIU(8925,+DA,0),U),+X,(9999999-$P(^TIU(8925,+DA,13),U)),+DA)
"^DD",8925,8925,.05,1,3,"%D",0)
^^3^3^2950925^^^
"^DD",8925,8925,.05,1,3,"%D",1,0)
This MUMPS-type, multi-field cross-reference by PATIENT, DOCUMENT TYPE,
"^DD",8925,8925,.05,1,3,"%D",2,0)
STATUS, and INVERSE ENTRY/DICTATION DATE/TIME is used for look-ups and
"^DD",8925,8925,.05,1,3,"%D",3,0)
queries.
"^DD",8925,8925,.05,1,3,"DT")
2940322
"^DD",8925,8925,.05,1,4,0)
8925^ATC3^MUMPS
"^DD",8925,8925,.05,1,4,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U,2),+$P($G(^TIU(8925,+DA,13)),U) S ^TIU(8925,"ATC",+$P($G(^TIU(8925,+DA,13)),U,2),+$P(^TIU(8925,+DA,0),U),+X,(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,.05,1,4,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U,2),+$P($G(^TIU(8925,+DA,13)),U) K ^TIU(8925,"ATC",+$P($G(^TIU(8925,+DA,13)),U,2),+$P(^TIU(8925,+DA,0),U),+X,(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,.05,1,4,"%D",0)
^^3^3^2940323^
"^DD",8925,8925,.05,1,4,"%D",1,0)
This MUMPS-type, multi-field cross-reference by ENTERED BY, DOCUMENT TYPE,
"^DD",8925,8925,.05,1,4,"%D",2,0)
STATUS, and INVERSE ENTRY/DICTATION DATE/TIME is used for look-ups and
"^DD",8925,8925,.05,1,4,"%D",3,0)
queries.
"^DD",8925,8925,.05,1,4,"DT")
2940323
"^DD",8925,8925,.05,1,5,0)
8925^ATS3^MUMPS
"^DD",8925,8925,.05,1,5,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,14)),U,2),+$P($G(^TIU(8925,+DA,13)),U) S ^TIU(8925,"ATS",+$P($G(^TIU(8925,+DA,14)),U,2),+$P(^TIU(8925,+DA,0),U),+X,(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,.05,1,5,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,14)),U,2),+$P($G(^TIU(8925,+DA,13)),U) K ^TIU(8925,"ATS",+$P($G(^TIU(8925,+DA,14)),U,2),+$P(^TIU(8925,+DA,0),U),+X,(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,.05,1,5,"%D",0)
^^3^3^2941121^^
"^DD",8925,8925,.05,1,5,"%D",1,0)
This MUMPS-type, multi-field cross-reference by TREATING SPECIALTY,
"^DD",8925,8925,.05,1,5,"%D",2,0)
DOCUMENT TYPE, STATUS, and INVERSE ENTRY/DICTATION DATE/TIME is used for
"^DD",8925,8925,.05,1,5,"%D",3,0)
look-ups and queries.
"^DD",8925,8925,.05,1,5,"DT")
2940325
"^DD",8925,8925,.05,1,6,0)
8925^ALL3^MUMPS
"^DD",8925,8925,.05,1,6,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U) S ^TIU(8925,"ALL","ANY",+$P(^TIU(8925,+DA,0),U),+X,(9999999-$P(^TIU(8925,+DA,13),U)),+DA)=""
"^DD",8925,8925,.05,1,6,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U) K ^TIU(8925,"ALL","ANY",+$P(^TIU(8925,+DA,0),U),+X,(9999999-$P(^TIU(8925,+DA,13),U)),+DA)
"^DD",8925,8925,.05,1,6,"%D",0)
^^2^2^2940325^
"^DD",8925,8925,.05,1,6,"%D",1,0)
This MUMPS-type, multi-field cross-reference by DOCUMENT TYPE, STATUS, and
"^DD",8925,8925,.05,1,6,"%D",2,0)
INVERSE ENTRY/DICTATION DATE/TIME is used for queries and look-ups.
"^DD",8925,8925,.05,1,6,"DT")
2940325
"^DD",8925,8925,.05,1,7,0)
8925^ASUB3^MUMPS
"^DD",8925,8925,.05,1,7,1)
I +$P($G(^TIU(8925,+DA,0)),U),$L($P($G(^TIU(8925,+DA,17)),U)),+$P($G(^TIU(8925,+DA,13)),U) D ASUBS^TIUDD($P($G(^TIU(8925,+DA,17)),U),+$G(^TIU(8925,+DA,0)),+X,(9999999-+$G(^TIU(8925,+DA,13))),DA)
"^DD",8925,8925,.05,1,7,2)
I +$P($G(^TIU(8925,+DA,0)),U),$L($P($G(^TIU(8925,+DA,17)),U)),+$P($G(^TIU(8925,+DA,13)),U) D ASUBK^TIUDD($P($G(^TIU(8925,+DA,17)),U),+$G(^TIU(8925,+DA,0)),+X,(9999999-+$G(^TIU(8925,+DA,13))),DA)
"^DD",8925,8925,.05,1,7,"%D",0)
^^2^2^2950928^^^^
"^DD",8925,8925,.05,1,7,"%D",1,0)
This MUMPS-type, multi-field cross-reference is used in queries by
"^DD",8925,8925,.05,1,7,"%D",2,0)
subject.
"^DD",8925,8925,.05,1,7,"DT")
2950928
"^DD",8925,8925,.05,1,8,0)
8925^ASVC3^MUMPS
"^DD",8925,8925,.05,1,8,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,14)),U,4),+$P($G(^TIU(8925,+DA,13)),U) S ^TIU(8925,"ASVC",+$P($G(^TIU(8925,+DA,14)),U,4),+$P(^TIU(8925,+DA,0),U),+X,(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,.05,1,8,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,14)),U,4),+$P($G(^TIU(8925,+DA,13)),U) K ^TIU(8925,"ASVC",+$P($G(^TIU(8925,+DA,14)),U,4),+$P(^TIU(8925,+DA,0),U),+X,(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,.05,1,8,"%D",0)
^^2^2^2941121^
"^DD",8925,8925,.05,1,8,"%D",1,0)
This MUMPS-type, multi-field cross-reference by SERVICE, TYPE, STATUS, and 
"^DD",8925,8925,.05,1,8,"%D",2,0)
INVERSE ENTRY/DICTATION DATE/TIME is used look-ups and 
"^DD",8925,8925,.05,1,8,"DT")
2941121
"^DD",8925,8925,.05,1,9,0)
8925^ALOC3^MUMPS
"^DD",8925,8925,.05,1,9,1)
I +$P($G(^TIU(8925,+DA,12)),U,5),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U) S ^TIU(8925,"ALOC",+$P($G(^TIU(8925,+DA,12)),U,5),+$P($G(^TIU(8925,+DA,0)),U),+X,(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,.05,1,9,2)
I +$P($G(^TIU(8925,+DA,12)),U,5),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U) K ^TIU(8925,"ALOC",+$P($G(^TIU(8925,+DA,12)),U,5),+$P($G(^TIU(8925,+DA,0)),U),+X,(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,.05,1,9,"%D",0)
^^2^2^2960710^^
"^DD",8925,8925,.05,1,9,"%D",1,0)
This MUMPS-type, multi-field cross-reference is optimized for searching 
"^DD",8925,8925,.05,1,9,"%D",2,0)
hospital location, document type, status, and date range.
"^DD",8925,8925,.05,1,9,"DT")
2950615
"^DD",8925,8925,.05,1,10,0)
8925^APRB3^MUMPS
"^DD",8925,8925,.05,1,10,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$O(^TIU(8925.9,"B",+DA,0)) D APRBS^TIUDD(+$G(^TIU(8925,+DA,0)),+X,(9999999-+$G(^TIU(8925,+DA,13))),DA)
"^DD",8925,8925,.05,1,10,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$O(^TIU(8925.9,"B",+DA,0)) D APRBK^TIUDD(+$G(^TIU(8925,+DA,0)),+X,(9999999-+$G(^TIU(8925,+DA,13))),DA)
"^DD",8925,8925,.05,1,10,"%D",0)
^^2^2^2950928^^
"^DD",8925,8925,.05,1,10,"%D",1,0)
This MUMPS-type, Multi-field index by PROBLEM, DOCUMENT TYPE, STATUS, and
"^DD",8925,8925,.05,1,10,"%D",2,0)
INVERSE DICTATION DATE/TIME facilitates queries by problem.
"^DD",8925,8925,.05,1,10,"DT")
2950928
"^DD",8925,8925,.05,1,11,0)
8925^AVSIT3^MUMPS
"^DD",8925,8925,.05,1,11,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,3),+$P($G(^TIU(8925,+DA,13)),U) S ^TIU(8925,"AVSIT",+$P(^TIU(8925,+DA,0),U,3),+$P(^TIU(8925,+DA,0),U),+X,(9999999-$P(^TIU(8925,+DA,13),U)),+DA)=""
"^DD",8925,8925,.05,1,11,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,3),+$P($G(^TIU(8925,+DA,13)),U) K ^TIU(8925,"AVSIT",+$P(^TIU(8925,+DA,0),U,3),+$P(^TIU(8925,+DA,0),U),+X,(9999999-$P(^TIU(8925,+DA,13),U)),+DA)
"^DD",8925,8925,.05,1,11,"%D",0)
^^2^2^2951207^^^
"^DD",8925,8925,.05,1,11,"%D",1,0)
This MUMPS-type, multi-field cross-reference by VISIT, DOCUMENT TYPE,
"^DD",8925,8925,.05,1,11,"%D",2,0)
STATUS, and INVERSE ENTRY/DICTATION DATE facilitates look-ups by visit.
"^DD",8925,8925,.05,1,11,"DT")
2951207
"^DD",8925,8925,.05,1,12,0)
8925^ADCPT3^MUMPS
"^DD",8925,8925,.05,1,12,1)
I +$P($G(^TIU(8925,+DA,0)),U,2),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,4) S ^TIU(8925,"ADCPT",+$P(^TIU(8925,+DA,0),U,2),+$P(^TIU(8925,+DA,0),U,4),+X,(9999999-$P(^TIU(8925,+DA,13),U)),DA)=""
"^DD",8925,8925,.05,1,12,2)
I +$P($G(^TIU(8925,+DA,0)),U,2),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,4) K ^TIU(8925,"ADCPT",+$P(^TIU(8925,+DA,0),U,2),+$P(^TIU(8925,+DA,0),U,4),+X,(9999999-$P(^TIU(8925,+DA,13),U)),DA)
"^DD",8925,8925,.05,1,12,"%D",0)
^^3^3^2950925^
"^DD",8925,8925,.05,1,12,"%D",1,0)
This MUMPS-type, multi-field cross-reference by PATIENT, DOCUMENT CLASS,
"^DD",8925,8925,.05,1,12,"%D",2,0)
STATUS, and INVERSE REFERENCE DATE facilitates look-ups by PATIENT AND
"^DD",8925,8925,.05,1,12,"%D",3,0)
DOCUMENT CLASS (e.g., all SIGNED Violence Postings for patient John Doe).
"^DD",8925,8925,.05,1,12,"DT")
2950925
"^DD",8925,8925,.05,3)
Enter the status of the document.
"^DD",8925,8925,.05,21,0)
^^1^1^2940318^
"^DD",8925,8925,.05,21,1,0)
This field is intended to accommodate the status of a given report.
"^DD",8925,8925,.05,"DT")
2951207
"^DD",8925,8925,.06,0)
PARENT^P8925'^TIU(8925,^0;6^Q
"^DD",8925,8925,.06,1,0)
^.1^^-1
"^DD",8925,8925,.06,1,1,0)
8925^DAD
"^DD",8925,8925,.06,1,1,1)
S ^TIU(8925,"DAD",$E(X,1,30),DA)=""
"^DD",8925,8925,.06,1,1,2)
K ^TIU(8925,"DAD",$E(X,1,30),DA)
"^DD",8925,8925,.06,1,1,"%D",0)
^^1^1^2920903^
"^DD",8925,8925,.06,1,1,"%D",1,0)
Cross-reference on parent to help find addenda.
"^DD",8925,8925,.06,1,1,"DT")
2920903
"^DD",8925,8925,.06,3)
Select the original report
"^DD",8925,8925,.06,21,0)
^^2^2^2950123^^
"^DD",8925,8925,.06,21,1,0)
In the event that the current report is an addendum or replacement, or is
"^DD",8925,8925,.06,21,2,0)
a component of a report, this field points to the original report.
"^DD",8925,8925,.06,"DT")
2970316
"^DD",8925,8925,.07,0)
EPISODE BEGIN DATE/TIME^D^^0;7^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,.07,1,0)
^.1
"^DD",8925,8925,.07,1,1,0)
8925^APTLD07^MUMPS
"^DD",8925,8925,.07,1,1,1)
D SAPTLD^TIUDD0(.07,X)
"^DD",8925,8925,.07,1,1,2)
D KAPTLD^TIUDD01(.07,X)
"^DD",8925,8925,.07,1,1,"%D",0)
^^2^2^2970617^^
"^DD",8925,8925,.07,1,1,"%D",1,0)
This MUMPS type Multi-field index by PT,TITLE,"LOC;VDT;VTYP",DA is used
"^DD",8925,8925,.07,1,1,"%D",2,0)
for optimizing checks for documents for a particular visit.
"^DD",8925,8925,.07,1,1,"DT")
2970617
"^DD",8925,8925,.07,3)
Enter the admission date (time is optional).
"^DD",8925,8925,.07,21,0)
^^4^4^2931115^
"^DD",8925,8925,.07,21,1,0)
This is the date/time at which the treatment episode associated with this
"^DD",8925,8925,.07,21,2,0)
document was initiated (e.g., Amission date/time for a discharge summary,
"^DD",8925,8925,.07,21,3,0)
Visit date/time for a clinic note, Transfer date/time for an interim
"^DD",8925,8925,.07,21,4,0)
summary).  Time is optional.
"^DD",8925,8925,.07,"DT")
2970617
"^DD",8925,8925,.08,0)
EPISODE END DATE/TIME^DX^^0;8^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,.08,3)
Enter discharge date (time is optional).
"^DD",8925,8925,.08,21,0)
^^2^2^2931115^
"^DD",8925,8925,.08,21,1,0)
This is the ending date/time for the treatment episode associated with
"^DD",8925,8925,.08,21,2,0)
this document (e.g., .  Time is optional.
"^DD",8925,8925,.08,"DT")
2930308
"^DD",8925,8925,.09,0)
URGENCY^*S^P:priority;R:routine;^0;9^Q
"^DD",8925,8925,.09,3)
Enter urgency.
"^DD",8925,8925,.09,12)
Transforms STAT to priority
"^DD",8925,8925,.09,12.1)
S X=$$URGENCY^GMRDLIBS(X) I 1
"^DD",8925,8925,.09,21,0)
^^1^1^2930721^^^^
"^DD",8925,8925,.09,21,1,0)
This is the urgency with which the report should be completed.
"^DD",8925,8925,.09,"DT")
2930720
"^DD",8925,8925,.1,0)
LINE COUNT^F^^0;10^K:$L(X)>8!($L(X)<1)!'(X?1.8N) X
"^DD",8925,8925,.1,3)
Answer must be 1-8 characters in length.
"^DD",8925,8925,.1,21,0)
^^2^2^2920520^
"^DD",8925,8925,.1,21,1,0)
This is the number of characters in the document (blank lines excluded),
"^DD",8925,8925,.1,21,2,0)
divided by the CHARACTERS PER LINE parameter defined by your site.
"^DD",8925,8925,.1,"DT")
2920520
"^DD",8925,8925,.11,0)
CREDIT STOP CODE ON COMPLETION^S^1:YES;0:NO;^0;11^Q
"^DD",8925,8925,.11,3)
Indicate whether the stop-code for a new visit should be credited.
"^DD",8925,8925,.11,21,0)
^^2^2^2960415^
"^DD",8925,8925,.11,21,1,0)
This boolean field indicates whether the stop code associated with a new
"^DD",8925,8925,.11,21,2,0)
visit should be credited when the note is completed.
"^DD",8925,8925,.11,"DT")
2960415
"^DD",8925,8925,.12,0)
MARK DISCH DT FOR CORRECTION^S^1:YES;^0;12^Q
"^DD",8925,8925,.12,1,0)
^.1
"^DD",8925,8925,.12,1,1,0)
8925^FIX
"^DD",8925,8925,.12,1,1,1)
S ^TIU(8925,"FIX",$E(X,1,30),DA)=""
"^DD",8925,8925,.12,1,1,2)
K ^TIU(8925,"FIX",$E(X,1,30),DA)
"^DD",8925,8925,.12,1,1,"%D",0)
^^3^3^2960524^
"^DD",8925,8925,.12,1,1,"%D",1,0)
This regular FileMan Cross-reference is used by the nightly daemon to 
"^DD",8925,8925,.12,1,1,"%D",2,0)
identify those records which require evaluation/correction of their 
"^DD",8925,8925,.12,1,1,"%D",3,0)
discharge dates...
"^DD",8925,8925,.12,1,1,"DT")
2960524
"^DD",8925,8925,.12,3)
Indicate whether discharge date must be corrected by the daemon
"^DD",8925,8925,.12,21,0)
^^3^3^2960531^^
"^DD",8925,8925,.12,21,1,0)
This boolean field identfies those discharge summaries which were filed
"^DD",8925,8925,.12,21,2,0)
prior to actual discharge of the patient for the nightly background
"^DD",8925,8925,.12,21,3,0)
process to back-fill with corrected discharge dates.
"^DD",8925,8925,.12,"DT")
2960531
"^DD",8925,8925,.13,0)
VISIT TYPE^F^^0;13^K:$L(X)>4!($L(X)<1)!'(X?1U.E) X
"^DD",8925,8925,.13,1,0)
^.1
"^DD",8925,8925,.13,1,1,0)
8925^APTLD13^MUMPS
"^DD",8925,8925,.13,1,1,1)
D SAPTLD^TIUDD0(.13,X)
"^DD",8925,8925,.13,1,1,2)
D KAPTLD^TIUDD01(.13,X)
"^DD",8925,8925,.13,1,1,"%D",0)
^^2^2^2970617^^
"^DD",8925,8925,.13,1,1,"%D",1,0)
This MUMPS type Multi-field index by PT,TITLE,"LOC;VDT;VTYP",DA is used
"^DD",8925,8925,.13,1,1,"%D",2,0)
for optimizing checks for documents for a particular visit.
"^DD",8925,8925,.13,1,1,"DT")
2970617
"^DD",8925,8925,.13,3)
This field contains the visit type identification and is entered by the program during processing.
"^DD",8925,8925,.13,21,0)
^^4^4^2970315^
"^DD",8925,8925,.13,21,1,0)
This field is used to identify the type of visit information related to
"^DD",8925,8925,.13,21,2,0)
the current document.  The value is determined during processing and is
"^DD",8925,8925,.13,21,3,0)
entered by the program.  It is used in the generation of a cross-reference
"^DD",8925,8925,.13,21,4,0)
to identify available documents for specified visits.
"^DD",8925,8925,.13,"DT")
2970617
"^DD",8925,8925,2,0)
REPORT TEXT^8925.02^^TEXT;0
"^DD",8925,8925,2,21,0)
^^1^1^2961217^^
"^DD",8925,8925,2,21,1,0)
This is a word processing field that contains the report text.
"^DD",8925,8925,3,0)
EDIT TEXT BUFFER^8925.03^^TEMP;0
"^DD",8925,8925,3,21,0)
^^3^3^2961217^^
"^DD",8925,8925,3,21,1,0)
This field provides a temporary holding place for the body of a report to
"^DD",8925,8925,3,21,2,0)
prevent inadvertant record deletion or corruption in a manner independent
"^DD",8925,8925,3,21,3,0)
of the user's preferred editor.
"^DD",8925,8925,1201,0)
ENTRY DATE/TIME^D^^12;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,1201,1,0)
^.1
"^DD",8925,8925,1201,1,1,0)
8925^F
"^DD",8925,8925,1201,1,1,1)
S ^TIU(8925,"F",$E(X,1,30),DA)=""
"^DD",8925,8925,1201,1,1,2)
K ^TIU(8925,"F",$E(X,1,30),DA)
"^DD",8925,8925,1201,1,1,"%D",0)
^^3^3^2960528^
"^DD",8925,8925,1201,1,1,"%D",1,0)
This regular FileMan Cross-reference on Entry Date/time supports the
"^DD",8925,8925,1201,1,1,"%D",2,0)
Nightly background task, by helping to identify the subset of records
"^DD",8925,8925,1201,1,1,"%D",3,0)
which is overdue for either signature or purging.
"^DD",8925,8925,1201,1,1,"DT")
2960528
"^DD",8925,8925,1201,3)
Date/time of entry into database.
"^DD",8925,8925,1201,21,0)
^^2^2^2940119^
"^DD",8925,8925,1201,21,1,0)
This is the date/time at which the document was originally entered into
"^DD",8925,8925,1201,21,2,0)
the database.
"^DD",8925,8925,1201,"DT")
2960528
"^DD",8925,8925,1202,0)
AUTHOR/DICTATOR^P200'^VA(200,^12;2^Q
"^DD",8925,8925,1202,.1)
AUTHOR OF NOTE
"^DD",8925,8925,1202,1,0)
^.1
"^DD",8925,8925,1202,1,1,0)
8925^CA
"^DD",8925,8925,1202,1,1,1)
S ^TIU(8925,"CA",$E(X,1,30),DA)=""
"^DD",8925,8925,1202,1,1,2)
K ^TIU(8925,"CA",$E(X,1,30),DA)
"^DD",8925,8925,1202,1,1,"%D",0)
^^3^3^2960508^^
"^DD",8925,8925,1202,1,1,"%D",1,0)
 
"^DD",8925,8925,1202,1,1,"%D",2,0)
This REGULAR, whole-file cross-reference by Author/Dictator will
"^DD",8925,8925,1202,1,1,"%D",3,0)
facilitate both look-ups and sorting by author.
"^DD",8925,8925,1202,1,1,"DT")
2940204
"^DD",8925,8925,1202,1,2,0)
8925^AAU^MUMPS
"^DD",8925,8925,1202,1,2,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"AAU",+X,+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-$P(^TIU(8925,+DA,13),U)),+DA)=""
"^DD",8925,8925,1202,1,2,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"AAU",+X,+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-$P(^TIU(8925,+DA,13),U)),+DA)
"^DD",8925,8925,1202,1,2,"%D",0)
^^3^3^2940722^^
"^DD",8925,8925,1202,1,2,"%D",1,0)
This MUMPS-type, multi-field cross-reference by author, document type,
"^DD",8925,8925,1202,1,2,"%D",2,0)
status, and inverse dictation date/time is intended to facilitate look-up
"^DD",8925,8925,1202,1,2,"%D",3,0)
by author for the review process.
"^DD",8925,8925,1202,1,2,"DT")
2940322
"^DD",8925,8925,1202,1,3,0)
8925^AAUP^MUMPS
"^DD",8925,8925,1202,1,3,1)
I +$$AAUP^TIULX(+DA),+$P($G(^TIU(8925,+DA,15)),U) S ^TIU(8925,"AAUP",+X,+$P($G(^TIU(8925,+DA,15)),U),+DA)=""
"^DD",8925,8925,1202,1,3,2)
I +$P($G(^TIU(8925,+DA,15)),U) K ^TIU(8925,"AAUP",+X,+$P($G(^TIU(8925,+DA,15)),U),+DA)
"^DD",8925,8925,1202,1,3,"%D",0)
^^3^3^2950623^
"^DD",8925,8925,1202,1,3,"%D",1,0)
This MUMPS-type, multi-field cross-reference by Author and REGULAR
"^DD",8925,8925,1202,1,3,"%D",2,0)
Signature Date/Time is used to maintain the daily print queue for batch
"^DD",8925,8925,1202,1,3,"%D",3,0)
printing of documents (currently, just Progress Notes) on signature.
"^DD",8925,8925,1202,1,3,"DT")
2950623
"^DD",8925,8925,1202,1,4,0)
8925^ACLAU03^MUMPS
"^DD",8925,8925,1202,1,4,1)
D SACLAU^TIUDD0(1202,X)
"^DD",8925,8925,1202,1,4,2)
D KACLAU^TIUDD01(1202,X)
"^DD",8925,8925,1202,1,4,"%D",0)
^^4^4^2970617^
"^DD",8925,8925,1202,1,4,"%D",1,0)
This multi-field, MUMPS-type cross-reference on CLASS, AUTHOR (or ENTERED
"^DD",8925,8925,1202,1,4,"%D",2,0)
BY), PATIENT, INVERSE REFERENCE DATE/TIME, and RECORD # is designed to
"^DD",8925,8925,1202,1,4,"%D",3,0)
facilitate rapid access to the current users unsigned notes about a
"^DD",8925,8925,1202,1,4,"%D",4,0)
patient.
"^DD",8925,8925,1202,1,4,"DT")
2970617
"^DD",8925,8925,1202,3)
Enter the author or dictating provider.
"^DD",8925,8925,1202,21,0)
^^2^2^2960805^^
"^DD",8925,8925,1202,21,1,0)
 
"^DD",8925,8925,1202,21,2,0)
This is the person who composed or dictated the document.
"^DD",8925,8925,1202,"DT")
2970617
"^DD",8925,8925,1203,0)
CLINIC^P40.7'^DIC(40.7,^12;3^Q
"^DD",8925,8925,1203,3)
Enter the stop code for the clinic.
"^DD",8925,8925,1203,21,0)
^^4^4^2950125^
"^DD",8925,8925,1203,21,1,0)
This is the stop code to which the document is to be credited (e.g., if the 
"^DD",8925,8925,1203,21,2,0)
document is a progress note documenting an encounter which took place in the 
"^DD",8925,8925,1203,21,3,0)
Admitting/Screening Clinic, then select the corresponding stop code, etc.).
"^DD",8925,8925,1203,21,4,0)

"^DD",8925,8925,1203,"DT")
2950125
"^DD",8925,8925,1204,0)
EXPECTED SIGNER^P200'O^VA(200,^12;4^Q
"^DD",8925,8925,1204,1,0)
^.1^^0
"^DD",8925,8925,1204,2)
S Y(0)=Y S:+Y>0&$D(TIUSIG) Y=$S($L($P(^VA(200,+Y,20),U,2)):$P(^(20),U,2),1:$P(^VA(200,+Y,0),U)) S:+Y>0&'$D(TIUSIG) Y=$P(^VA(200,+Y,0),U)
"^DD",8925,8925,1204,2.1)
S:+Y>0&$D(TIUSIG) Y=$S($L($P(^VA(200,+Y,20),U,2)):$P(^(20),U,2),1:$P(^VA(200,+Y,0),U)) S:+Y>0&'$D(TIUSIG) Y=$P(^VA(200,+Y,0),U)
"^DD",8925,8925,1204,3)
Enter the person responsible for signing the document.
"^DD",8925,8925,1204,21,0)
^^5^5^2940418^
"^DD",8925,8925,1204,21,1,0)
This is the person who is expected to enter the first-line signature for
"^DD",8925,8925,1204,21,2,0)
the document.  Ordinarily, this would be the author.  One case in which
"^DD",8925,8925,1204,21,3,0)
this would differ would be in the case of a Discharge Summary, when the
"^DD",8925,8925,1204,21,4,0)
author's signature is NOT required.  Then, the attending physician would
"^DD",8925,8925,1204,21,5,0)
be the expected signer.
"^DD",8925,8925,1204,"DT")
2940420
"^DD",8925,8925,1205,0)
HOSPITAL LOCATION^P44'^SC(^12;5^Q
"^DD",8925,8925,1205,.1)
PATIENT LOCATION
"^DD",8925,8925,1205,1,0)
^.1^^-1
"^DD",8925,8925,1205,1,1,0)
8925^ALOC^MUMPS
"^DD",8925,8925,1205,1,1,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ALOC",+X,+$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,1205,1,1,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ALOC",+X,+$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,1205,1,1,"%D",0)
^^2^2^2960710^^^
"^DD",8925,8925,1205,1,1,"%D",1,0)
This MUMPS-type, multi-field cross-reference is optimized for searching 
"^DD",8925,8925,1205,1,1,"%D",2,0)
hospital location, document type, status, and date range.
"^DD",8925,8925,1205,1,1,"DT")
2950615
"^DD",8925,8925,1205,1,2,0)
8925^ALOCP^MUMPS
"^DD",8925,8925,1205,1,2,1)
I +$$ALOCP^TIULX(+DA),+$P($G(^TIU(8925,+DA,15)),U) S ^TIU(8925,"ALOCP",+X,+$P($G(^TIU(8925,+DA,15)),U),+DA)=""
"^DD",8925,8925,1205,1,2,2)
I +$P($G(^TIU(8925,+DA,15)),U) K ^TIU(8925,"ALOCP",+X,+$P($G(^TIU(8925,+DA,15)),U),+DA)
"^DD",8925,8925,1205,1,2,"%D",0)
^^3^3^2950623^^^
"^DD",8925,8925,1205,1,2,"%D",1,0)
This MUMPS-type, multi-field cross-reference by Hospital Location and
"^DD",8925,8925,1205,1,2,"%D",2,0)
REGULAR Signature Date/Time is used to maintain the daily print queue for
"^DD",8925,8925,1205,1,2,"%D",3,0)
batch printing of documents (currently, just Progress Notes) on signature.
"^DD",8925,8925,1205,1,2,"DT")
2950619
"^DD",8925,8925,1205,3)
Enter the location associated with the document.
"^DD",8925,8925,1205,21,0)
^^1^1^2960805^^^^
"^DD",8925,8925,1205,21,1,0)
This is the location (WARD or CLINIC) associated with the document.
"^DD",8925,8925,1205,"DT")
2970328
"^DD",8925,8925,1206,0)
SERVICE CREDIT STOP^P40.7'^DIC(40.7,^12;6^Q
"^DD",8925,8925,1206,1,0)
^.1^^0
"^DD",8925,8925,1206,3)
Enter the name of the STOP CODE for the Secondary Visit.
"^DD",8925,8925,1206,21,0)
^^3^3^2950125^^^
"^DD",8925,8925,1206,21,1,0)
This is the attending physician of record, who is ultimately responsible
"^DD",8925,8925,1206,21,2,0)
for the care of the patient, and the accurate documentation of the care
"^DD",8925,8925,1206,21,3,0)
episode.
"^DD",8925,8925,1206,"DT")
2950125
"^DD",8925,8925,1207,0)
SECONDARY VISIT^P9000010'^AUPNVSIT(^12;7^Q
"^DD",8925,8925,1207,"DT")
2950125
"^DD",8925,8925,1208,0)
EXPECTED COSIGNER^*P200'^VA(200,^12;8^S DIC("S")="I +$$SCRCSNR^TIULA3(DA,+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",8925,8925,1208,1,0)
^.1
"^DD",8925,8925,1208,1,1,0)
8925^CS
"^DD",8925,8925,1208,1,1,1)
S ^TIU(8925,"CS",$E(X,1,30),DA)=""
"^DD",8925,8925,1208,1,1,2)
K ^TIU(8925,"CS",$E(X,1,30),DA)
"^DD",8925,8925,1208,1,1,"%D",0)
^^2^2^2950125^
"^DD",8925,8925,1208,1,1,"%D",1,0)
This REGULAR, FileMan type cross-reference by supervisor (expected
"^DD",8925,8925,1208,1,1,"%D",2,0)
cosigner) will be used to optimize FM Sorts and searches.
"^DD",8925,8925,1208,1,1,"DT")
2950125
"^DD",8925,8925,1208,1,2,0)
8925^ASUP^MUMPS
"^DD",8925,8925,1208,1,2,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ASUP",+X,+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,1208,1,2,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ASUP",+X,+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,1208,1,2,"%D",0)
^^3^3^2950125^^
"^DD",8925,8925,1208,1,2,"%D",1,0)
This MUMPS-type, multi-field cross-reference by (EXPECTED COSIGNER),
"^DD",8925,8925,1208,1,2,"%D",2,0)
DOCUMENT TYPE, STATUS, and INVERSE ENTRY/DICTATION DATE/TIME
"^DD",8925,8925,1208,1,2,"%D",3,0)
will be used for look-ups and queries.
"^DD",8925,8925,1208,1,2,"DT")
2950125
"^DD",8925,8925,1208,1,3,0)
8925^ACLEC03^MUMPS
"^DD",8925,8925,1208,1,3,1)
D SACLEC^TIUDD0(1208,X)
"^DD",8925,8925,1208,1,3,2)
D KACLEC^TIUDD01(1208,X)
"^DD",8925,8925,1208,1,3,"%D",0)
^^3^3^2970617^
"^DD",8925,8925,1208,1,3,"%D",1,0)
This multi-field, MUMPS-type Cross-reference on CLASS, EXPECTED COSIGNER,
"^DD",8925,8925,1208,1,3,"%D",2,0)
PATIENT, INVERSE REFERENCE DATE/TIME, and RECORD # is useful for finding
"^DD",8925,8925,1208,1,3,"%D",3,0)
the uncosigned notes by the current user for a given patient.
"^DD",8925,8925,1208,1,3,"DT")
2970617
"^DD",8925,8925,1208,3)
Enter the person who is expected to cosign the document.
"^DD",8925,8925,1208,12)
You may not select self, author, or others who require cosignature.
"^DD",8925,8925,1208,12.1)
S DIC("S")="I +$$SCRCSNR^TIULA3(DA,+Y)"
"^DD",8925,8925,1208,"DT")
2970617
"^DD",8925,8925,1209,0)
ATTENDING PHYSICIAN^P200'^VA(200,^12;9^Q
"^DD",8925,8925,1209,1,0)
^.1^^0
"^DD",8925,8925,1209,3)
Enter the name of the Attending Physician.
"^DD",8925,8925,1209,"DT")
2970527
"^DD",8925,8925,1210,0)
ORDER NUMBER^P100'^OR(100,^12;10^Q
"^DD",8925,8925,1210,3)
Indicate the Order with which this document is associated.
"^DD",8925,8925,1210,21,0)
^^2^2^2950215^
"^DD",8925,8925,1210,21,1,0)
This is the Order which was acted on to produce the result reported in the 
"^DD",8925,8925,1210,21,2,0)
current document.
"^DD",8925,8925,1210,"DT")
2950215
"^DD",8925,8925,1211,0)
VISIT LOCATION^P44'^SC(^12;11^Q
"^DD",8925,8925,1211,1,0)
^.1
"^DD",8925,8925,1211,1,1,0)
8925^APTLD1211^MUMPS
"^DD",8925,8925,1211,1,1,1)
D SAPTLD^TIUDD0(1211,X)
"^DD",8925,8925,1211,1,1,2)
D KAPTLD^TIUDD01(1211,X)
"^DD",8925,8925,1211,1,1,"%D",0)
^^2^2^2970617^^^
"^DD",8925,8925,1211,1,1,"%D",1,0)
This MUMPS-type, Multi-field index by PT,TITLE,"VLOC;VDT;VTYP",DA is used to 
"^DD",8925,8925,1211,1,1,"%D",2,0)
optimize the check for documents of a given title for a particular visit.
"^DD",8925,8925,1211,1,1,"DT")
2970617
"^DD",8925,8925,1211,3)
Enter the Hospital Location at which the visit occurred.
"^DD",8925,8925,1211,21,0)
^^4^4^2970328^
"^DD",8925,8925,1211,21,1,0)
This is the location at which the visit/admission occurred.  As distinct 
"^DD",8925,8925,1211,21,2,0)
from the HOSPITAL LOCATION field, which represents the location at the time 
"^DD",8925,8925,1211,21,3,0)
the document was written, this is the location for the visit/admission with 
"^DD",8925,8925,1211,21,4,0)
which the note is associated.
"^DD",8925,8925,1211,"DT")
2970617
"^DD",8925,8925,1301,0)
REFERENCE DATE^D^^13;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,1301,.1)
DATE/TIME OF NOTE
"^DD",8925,8925,1301,1,0)
^.1
"^DD",8925,8925,1301,1,1,0)
8925^AAU1^MUMPS
"^DD",8925,8925,1301,1,1,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,12)),U,2),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"AAU",+$P(^TIU(8925,+DA,12),U,2),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)=""
"^DD",8925,8925,1301,1,1,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,12)),U,2),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"AAU",+$P(^TIU(8925,+DA,12),U,2),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)
"^DD",8925,8925,1301,1,1,"%D",0)
^^2^2^2940722^^^
"^DD",8925,8925,1301,1,1,"%D",1,0)
This MUMPS-type, multi-field cross-reference is used for look-ups by
"^DD",8925,8925,1301,1,1,"%D",2,0)
author, document type, status, and date range.
"^DD",8925,8925,1301,1,1,"DT")
2940322
"^DD",8925,8925,1301,1,2,0)
8925^ASUP1^MUMPS
"^DD",8925,8925,1301,1,2,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,12)),U,8),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ASUP",+$P(^TIU(8925,+DA,12),U,8),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)=""
"^DD",8925,8925,1301,1,2,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,12)),U,8),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ASUP",+$P(^TIU(8925,+DA,12),U,8),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)
"^DD",8925,8925,1301,1,2,"%D",0)
^^3^3^2950125^^
"^DD",8925,8925,1301,1,2,"%D",1,0)
This MUMPS-type, multi-field cross-reference by EXPECTED COSIGNER),
"^DD",8925,8925,1301,1,2,"%D",2,0)
DOCUMENT TYPE, STATUS, and INVERSE ENTRY/DICTATION DATE/TIME will
"^DD",8925,8925,1301,1,2,"%D",3,0)
be used for look-ups and queries.
"^DD",8925,8925,1301,1,2,"DT")
2950125
"^DD",8925,8925,1301,1,3,0)
8925^APT1^MUMPS
"^DD",8925,8925,1301,1,3,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,2),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"APT",+$P(^TIU(8925,+DA,0),U,2),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)=""
"^DD",8925,8925,1301,1,3,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,2),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"APT",+$P(^TIU(8925,+DA,0),U,2),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)
"^DD",8925,8925,1301,1,3,"%D",0)
^^2^2^2950925^^^
"^DD",8925,8925,1301,1,3,"%D",1,0)
This MUMPS-type, multi-field cross-reference is used for look-ups by
"^DD",8925,8925,1301,1,3,"%D",2,0)
patient, document type, status, and date range.
"^DD",8925,8925,1301,1,3,"DT")
2940322
"^DD",8925,8925,1301,1,4,0)
8925^ATS1^MUMPS
"^DD",8925,8925,1301,1,4,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,14)),U,2),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ATS",+$P(^TIU(8925,+DA,14),U,2),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)=""
"^DD",8925,8925,1301,1,4,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,14)),U,2),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ATS",+$P(^TIU(8925,+DA,14),U,2),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)
"^DD",8925,8925,1301,1,4,"%D",0)
^^2^2^2941122^^
"^DD",8925,8925,1301,1,4,"%D",1,0)
This MUMPS-type, multi-field cross-reference is used for look-ups by
"^DD",8925,8925,1301,1,4,"%D",2,0)
Treating Specialty, document type, status, and date range.
"^DD",8925,8925,1301,1,4,"DT")
2940325
"^DD",8925,8925,1301,1,5,0)
8925^ATC1^MUMPS
"^DD",8925,8925,1301,1,5,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U,2),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ATC",+$P(^TIU(8925,+DA,13),U,2),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)=""
"^DD",8925,8925,1301,1,5,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U,2),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ATC",+$P(^TIU(8925,+DA,13),U,2),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)
"^DD",8925,8925,1301,1,5,"%D",0)
^^2^2^2940323^
"^DD",8925,8925,1301,1,5,"%D",1,0)
This MUMPS-type, multi-field cross-reference is used for look-ups by
"^DD",8925,8925,1301,1,5,"%D",2,0)
Entry person, document type, status, and date range.
"^DD",8925,8925,1301,1,5,"DT")
2940323
"^DD",8925,8925,1301,1,6,0)
8925^ALL1^MUMPS
"^DD",8925,8925,1301,1,6,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ALL","ANY",+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)=""
"^DD",8925,8925,1301,1,6,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ALL","ANY",+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)
"^DD",8925,8925,1301,1,6,"%D",0)
^^2^2^2940325^
"^DD",8925,8925,1301,1,6,"%D",1,0)
This MUMPS-type, multi-field cross-reference is used for look-ups by
"^DD",8925,8925,1301,1,6,"%D",2,0)
document type and date range.
"^DD",8925,8925,1301,1,6,"DT")
2940325
"^DD",8925,8925,1301,1,7,0)
8925^ASUB1^MUMPS
"^DD",8925,8925,1301,1,7,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,5),$L($P($G(^TIU(8925,+DA,17)),U)) D ASUBS^TIUDD($P($G(^TIU(8925,+DA,17)),U),+$G(^TIU(8925,+DA,0)),+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-+X),DA)
"^DD",8925,8925,1301,1,7,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,5),$L($P($G(^TIU(8925,+DA,17)),U)) D ASUBK^TIUDD($P($G(^TIU(8925,+DA,17)),U),+$G(^TIU(8925,+DA,0)),+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-+X),DA)
"^DD",8925,8925,1301,1,7,"%D",0)
^^2^2^2950928^^
"^DD",8925,8925,1301,1,7,"%D",1,0)
This MULTI-fields, MUMPS-type cross-reference is used for queries by
"^DD",8925,8925,1301,1,7,"%D",2,0)
subject.
"^DD",8925,8925,1301,1,7,"DT")
2950928
"^DD",8925,8925,1301,1,8,0)
8925^ASVC1^MUMPS
"^DD",8925,8925,1301,1,8,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,14)),U,4),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ASVC",+$P(^TIU(8925,+DA,14),U,4),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)=""
"^DD",8925,8925,1301,1,8,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,14)),U,4),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ASVC",+$P(^TIU(8925,+DA,14),U,4),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)
"^DD",8925,8925,1301,1,8,"%D",0)
^^2^2^2960710^^
"^DD",8925,8925,1301,1,8,"%D",1,0)
This MUMPS-type, multi-field cross-reference is used for look-ups SERVICE, 
"^DD",8925,8925,1301,1,8,"%D",2,0)
document type, status, and date 
"^DD",8925,8925,1301,1,8,"DT")
2941122
"^DD",8925,8925,1301,1,9,0)
8925^APRB1^MUMPS
"^DD",8925,8925,1301,1,9,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,5),+$O(^TIU(8925.9,"B",+DA,0)) D APRBS^TIUDD(+$G(^TIU(8925,+DA,0)),+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-+X),DA)
"^DD",8925,8925,1301,1,9,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,5),+$O(^TIU(8925.9,"B",+DA,0)) D APRBK^TIUDD(+$G(^TIU(8925,+DA,0)),+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-+X),DA)
"^DD",8925,8925,1301,1,9,"%D",0)
^^3^3^2950928^^
"^DD",8925,8925,1301,1,9,"%D",1,0)
This MUMPS-type, multi-field cross-reference by Problem, Document type,
"^DD",8925,8925,1301,1,9,"%D",2,0)
Status, and Inverse Reference Date/time is used to facilitate query by
"^DD",8925,8925,1301,1,9,"%D",3,0)
problem.
"^DD",8925,8925,1301,1,9,"DT")
2950928
"^DD",8925,8925,1301,1,10,0)
8925^AVSIT1^MUMPS
"^DD",8925,8925,1301,1,10,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,3),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"AVSIT",+$P(^TIU(8925,+DA,0),U,3),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),DA)=""
"^DD",8925,8925,1301,1,10,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,3),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"AVSIT",+$P(^TIU(8925,+DA,0),U,3),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),DA)
"^DD",8925,8925,1301,1,10,"%D",0)
^^2^2^2951207^^^^
"^DD",8925,8925,1301,1,10,"%D",1,0)
This MUMPS-type, multi-field cross-reference by VISIT, DOCUMENT TYPE,
"^DD",8925,8925,1301,1,10,"%D",2,0)
STATUS, and INVERSE ENTRY/DICTATION DATE facilitates look-ups by visit.
"^DD",8925,8925,1301,1,10,"DT")
2950925
"^DD",8925,8925,1301,1,11,0)
8925^ADCPT1^MUMPS
"^DD",8925,8925,1301,1,11,1)
I +$P($G(^TIU(8925,+DA,0)),U,4),+$P($G(^TIU(8925,+DA,0)),U,2),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ADCPT",+$P(^TIU(8925,+DA,0),U,2),+$P(^TIU(8925,+DA,0),U,4),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),DA)=""
"^DD",8925,8925,1301,1,11,2)
I +$P($G(^TIU(8925,+DA,0)),U,4),+$P($G(^TIU(8925,+DA,0)),U,2),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ADCPT",+$P(^TIU(8925,+DA,0),U,2),+$P(^TIU(8925,+DA,0),U,4),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),DA)
"^DD",8925,8925,1301,1,11,"%D",0)
^^3^3^2950925^
"^DD",8925,8925,1301,1,11,"%D",1,0)
This MUMPS-type, multi-field cross-reference by PATIENT, DOCUMENT CLASS,
"^DD",8925,8925,1301,1,11,"%D",2,0)
STATUS, and INVERSE REFERENCE DATE facilitates look-ups by PATIENT AND
"^DD",8925,8925,1301,1,11,"%D",3,0)
DOCUMENT CLASS (e.g., all SIGNED Violence Postings for patient John Doe).
"^DD",8925,8925,1301,1,11,"DT")
2950925
"^DD",8925,8925,1301,1,12,0)
8925^D
"^DD",8925,8925,1301,1,12,1)
S ^TIU(8925,"D",$E(X,1,30),DA)=""
"^DD",8925,8925,1301,1,12,2)
K ^TIU(8925,"D",$E(X,1,30),DA)
"^DD",8925,8925,1301,1,12,"%D",0)
^^2^2^2951215^
"^DD",8925,8925,1301,1,12,"%D",1,0)
This REGULAR FileMan Cross-reference by Reference Date/time is used
"^DD",8925,8925,1301,1,12,"%D",2,0)
for both look-ups and sorts.
"^DD",8925,8925,1301,1,12,"DT")
2951215
"^DD",8925,8925,1301,1,13,0)
8925^APTCL1^MUMPS
"^DD",8925,8925,1301,1,13,1)
I +$P(^TIU(8925,+DA,0),U),+$P($G(^TIU(8925,+DA,0)),U,2) S ^TIU(8925,"APTCL",+$P(^TIU(8925,+DA,0),U,2),+$$CLINDOC^TIULC1(+$P(^TIU(8925,+DA,0),U),+DA),(9999999-X),DA)=""
"^DD",8925,8925,1301,1,13,2)
I +$P(^TIU(8925,+DA,0),U),+$P($G(^TIU(8925,+DA,0)),U,2) K ^TIU(8925,"APTCL",+$P(^TIU(8925,+DA,0),U,2),+$$CLINDOC^TIULC1(+$P(^TIU(8925,+DA,0),U),+DA),(9999999-X),DA)
"^DD",8925,8925,1301,1,13,"%D",0)
^^2^2^2960823^^^^
"^DD",8925,8925,1301,1,13,"%D",1,0)
This MUMPS-type, multi-field cross-reference by PATIENT, CLINICAL DOCUMENT
"^DD",8925,8925,1301,1,13,"%D",2,0)
CLASS, and INVERSE REFERENCE DATE facilitates look-ups by patient.
"^DD",8925,8925,1301,1,13,"DT")
2960823
"^DD",8925,8925,1301,1,14,0)
8925^APTCL381^MUMPS
"^DD",8925,8925,1301,1,14,1)
I +$P(^TIU(8925,+DA,0),U),+$P($G(^TIU(8925,+DA,0)),U,2) S ^TIU(8925,"APTCL",+$P(^TIU(8925,+DA,0),U,2),38,(9999999-X),DA)=""
"^DD",8925,8925,1301,1,14,2)
I +$P(^TIU(8925,+DA,0),U),+$P($G(^TIU(8925,+DA,0)),U,2) K ^TIU(8925,"APTCL",+$P(^TIU(8925,+DA,0),U,2),38,(9999999-X),DA)
"^DD",8925,8925,1301,1,14,"%D",0)
^^2^2^2960506^
"^DD",8925,8925,1301,1,14,"%D",1,0)
This MUMPS-type, multi-field cross-reference by PATIENT, ROOT CLASS, and
"^DD",8925,8925,1301,1,14,"%D",2,0)
INVERSE REFERENCE DATE facilitates look-ups by patient.
"^DD",8925,8925,1301,1,14,"DT")
2960506
"^DD",8925,8925,1301,1,15,0)
8925^ALOC1^MUMPS
"^DD",8925,8925,1301,1,15,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,12)),U,5),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ALOC",+$P(^TIU(8925,+DA,12),U,5),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)=""
"^DD",8925,8925,1301,1,15,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,12)),U,5),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ALOC",+$P(^TIU(8925,+DA,12),U,5),+$P(^TIU(8925,+DA,0),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-X),+DA)
"^DD",8925,8925,1301,1,15,"%D",0)
^^2^2^2960710^^^
"^DD",8925,8925,1301,1,15,"%D",1,0)
This MUMPS-type, multi-field cross-reference is used for look-ups
"^DD",8925,8925,1301,1,15,"%D",2,0)
LOCATION, document type, status, and date
"^DD",8925,8925,1301,1,15,"DT")
2960710
"^DD",8925,8925,1301,1,16,0)
8925^ACLPT03^MUMPS
"^DD",8925,8925,1301,1,16,1)
D SACLPT^TIUDD0(1301,X)
"^DD",8925,8925,1301,1,16,2)
D KACLPT^TIUDD01(1301,X)
"^DD",8925,8925,1301,1,16,"%D",0)
^^3^3^2970617^
"^DD",8925,8925,1301,1,16,"%D",1,0)
This multi-field, MUMPS-type cross-reference on CLASS, PATIENT, INVERSE
"^DD",8925,8925,1301,1,16,"%D",2,0)
REFERENCE DATE/TIME, and RECORD # is designed to support rapid queries by
"^DD",8925,8925,1301,1,16,"%D",3,0)
patient.
"^DD",8925,8925,1301,1,16,"DT")
2970617
"^DD",8925,8925,1301,1,17,0)
8925^ACLAU01^MUMPS
"^DD",8925,8925,1301,1,17,1)
D SACLAU^TIUDD0(1301,X),SACLAU1^TIUDD0(1301,X)
"^DD",8925,8925,1301,1,17,2)
D KACLAU^TIUDD01(1301,X),KACLAU1^TIUDD01(1301,X)
"^DD",8925,8925,1301,1,17,"%D",0)
^^4^4^2970617^
"^DD",8925,8925,1301,1,17,"%D",1,0)
This multi-field, MUMPS-type cross-reference on CLASS, AUTHOR (or ENTERED
"^DD",8925,8925,1301,1,17,"%D",2,0)
BY), PATIENT, INVERSE REFERENCE DATE/TIME, and RECORD # is designed to
"^DD",8925,8925,1301,1,17,"%D",3,0)
facilitate rapid access to the current users unsigned notes about a
"^DD",8925,8925,1301,1,17,"%D",4,0)
patient.
"^DD",8925,8925,1301,1,17,"DT")
2970617
"^DD",8925,8925,1301,1,18,0)
8925^ACLEC02^MUMPS
"^DD",8925,8925,1301,1,18,1)
D SACLEC^TIUDD0(1301,X)
"^DD",8925,8925,1301,1,18,2)
D KACLEC^TIUDD01(1301,X)
"^DD",8925,8925,1301,1,18,"%D",0)
^^3^3^2970617^
"^DD",8925,8925,1301,1,18,"%D",1,0)
This multi-field, MUMPS-type Cross-reference on CLASS, EXPECTED COSIGNER,
"^DD",8925,8925,1301,1,18,"%D",2,0)
PATIENT, INVERSE REFERENCE DATE/TIME, and RECORD # is useful for finding
"^DD",8925,8925,1301,1,18,"%D",3,0)
the uncosigned notes by the current user for a given patient.
"^DD",8925,8925,1301,1,18,"DT")
2970617
"^DD",8925,8925,1301,1,19,0)
8925^ACLSB02^MUMPS
"^DD",8925,8925,1301,1,19,1)
D SACLSB^TIUDD0(1301,X)
"^DD",8925,8925,1301,1,19,2)
D KACLSB^TIUDD01(1301,X)
"^DD",8925,8925,1301,1,19,"%D",0)
^^3^3^2970617^
"^DD",8925,8925,1301,1,19,"%D",1,0)
This cross-reference by CLASS, SIGNED BY, PATIENT, INVERSE REFERENCE
"^DD",8925,8925,1301,1,19,"%D",2,0)
DATE/TIME, and RECORD # will facilitate finding records signed by a given
"^DD",8925,8925,1301,1,19,"%D",3,0)
user about the current patient.
"^DD",8925,8925,1301,1,19,"DT")
2970617
"^DD",8925,8925,1301,3)
This is the date (and time) by which the document will be referenced.
"^DD",8925,8925,1301,21,0)
^^6^6^2950530^^
"^DD",8925,8925,1301,21,1,0)
This is the Date (and time) by which the clinician will reference the 
"^DD",8925,8925,1301,21,2,0)
document.  For Progress Notes, this will likely be the date of the 
"^DD",8925,8925,1301,21,3,0)
provider's encounter with the patient.  For documents which have been 
"^DD",8925,8925,1301,21,4,0)
dictated, and transcribed (e.g., discharge summaries), it will correspond to 
"^DD",8925,8925,1301,21,5,0)
the dictation date of the record.  In all cases, this is the date by which 
"^DD",8925,8925,1301,21,6,0)
the document will be referenced and sorted.
"^DD",8925,8925,1301,"DT")
2970617
"^DD",8925,8925,1302,0)
ENTERED BY^P200'O^VA(200,^13;2^Q
"^DD",8925,8925,1302,1,0)
^.1
"^DD",8925,8925,1302,1,1,0)
8925^TC
"^DD",8925,8925,1302,1,1,1)
S ^TIU(8925,"TC",$E(X,1,30),DA)=""
"^DD",8925,8925,1302,1,1,2)
K ^TIU(8925,"TC",$E(X,1,30),DA)
"^DD",8925,8925,1302,1,1,"%D",0)
^^3^3^2960508^^
"^DD",8925,8925,1302,1,1,"%D",1,0)
 
"^DD",8925,8925,1302,1,1,"%D",2,0)
This REGULAR, FileMan type cross-reference is used for sorting by
"^DD",8925,8925,1302,1,1,"%D",3,0)
the person who entered the original document.
"^DD",8925,8925,1302,1,1,"DT")
2940207
"^DD",8925,8925,1302,1,2,0)
8925^ATC^MUMPS
"^DD",8925,8925,1302,1,2,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ATC",+X,+$P($G(^TIU(8925,+DA,0)),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,1302,1,2,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ATC",+X,+$P($G(^TIU(8925,+DA,0)),U),+$P(^TIU(8925,+DA,0),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,1302,1,2,"%D",0)
^^2^2^2940323^
"^DD",8925,8925,1302,1,2,"%D",1,0)
This MUMPS-type, multi-field cross-reference is used for searching by
"^DD",8925,8925,1302,1,2,"%D",2,0)
entry person, document type, status, and date range.
"^DD",8925,8925,1302,1,2,"DT")
2940323
"^DD",8925,8925,1302,1,3,0)
8925^ACLAU103^MUMPS
"^DD",8925,8925,1302,1,3,1)
D SACLAU1^TIUDD0(1302,X)
"^DD",8925,8925,1302,1,3,2)
D KACLAU1^TIUDD01(1302,X)
"^DD",8925,8925,1302,1,3,"%D",0)
^^4^4^2970617^
"^DD",8925,8925,1302,1,3,"%D",1,0)
This multi-field, MUMPS-type cross-reference on CLASS, AUTHOR (or ENTERED
"^DD",8925,8925,1302,1,3,"%D",2,0)
BY), PATIENT, INVERSE REFERENCE DATE/TIME, and RECORD # is designed to
"^DD",8925,8925,1302,1,3,"%D",3,0)
facilitate rapid access to the current users unsigned notes about a
"^DD",8925,8925,1302,1,3,"%D",4,0)
patient.
"^DD",8925,8925,1302,1,3,"DT")
2970617
"^DD",8925,8925,1302,2)
S Y(0)=Y S Y=$S(+$G(TIUINI):$$LOWER^TIULS($P($G(^VA(200,+Y(0),0)),U,2)),1:$P($G(^VA(200,+Y(0),0)),U,2))
"^DD",8925,8925,1302,2.1)
S Y=$S(+$G(TIUINI):$$LOWER^TIULS($P($G(^VA(200,+Y(0),0)),U,2)),1:$P($G(^VA(200,+Y(0),0)),U,2))
"^DD",8925,8925,1302,3)
This is the person who entered the document into the computer.
"^DD",8925,8925,1302,"DT")
2970617
"^DD",8925,8925,1303,0)
CAPTURE METHOD^S^D:direct;U:upload;C:converted;R:remote procedure;O:copy;^13;3^Q
"^DD",8925,8925,1303,3)
This is the method used to capture the document on-line.
"^DD",8925,8925,1303,"DT")
2961205
"^DD",8925,8925,1304,0)
RELEASE DATE/TIME^D^^13;4^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,1304,1,0)
^.1
"^DD",8925,8925,1304,1,1,0)
8925^E
"^DD",8925,8925,1304,1,1,1)
S ^TIU(8925,"E",$E(X,1,30),DA)=""
"^DD",8925,8925,1304,1,1,2)
K ^TIU(8925,"E",$E(X,1,30),DA)
"^DD",8925,8925,1304,1,1,"%D",0)
^^2^2^2960302^
"^DD",8925,8925,1304,1,1,"%D",1,0)
This Regular, FileMan Cross-reference on Release Date/Time is used for
"^DD",8925,8925,1304,1,1,"%D",2,0)
sorting, and for the Released/unverified Report for the Verifying MRT.
"^DD",8925,8925,1304,1,1,"DT")
2960302
"^DD",8925,8925,1304,3)
This is date/time at which the document was released for public view.
"^DD",8925,8925,1304,"DT")
2960302
"^DD",8925,8925,1305,0)
VERIFICATION DATE/TIME^D^^13;5^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,1305,3)
This is the date/time at which the document was verified (if required).
"^DD",8925,8925,1305,"DT")
2940119
"^DD",8925,8925,1306,0)
VERIFIED BY^P200'^VA(200,^13;6^Q
"^DD",8925,8925,1306,3)
This is the person who verified the document.
"^DD",8925,8925,1306,"DT")
2940119
"^DD",8925,8925,1307,0)
DICTATION DATE^D^^13;7^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,1307,3)
Enter the date on which the document was dictated.
"^DD",8925,8925,1307,21,0)
^^5^5^2950125^
"^DD",8925,8925,1307,21,1,0)
This is the date (and time) on which the document was dictated by its 
"^DD",8925,8925,1307,21,2,0)
author.  In the event that a document originates by dictation, we recommend 
"^DD",8925,8925,1307,21,3,0)
that the REFERENCE DATE for the document be defaulted to dictation date, as 
"^DD",8925,8925,1307,21,4,0)
the author will be able to identify the document by the date on which s/he 
"^DD",8925,8925,1307,21,5,0)
dictated it.
"^DD",8925,8925,1307,"DT")
2950125
"^DD",8925,8925,1308,0)
SUSPENSE DATE/TIME^D^^13;8^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,1308,3)
Enter the date (time optional) on which the document will be recinded.
"^DD",8925,8925,1308,21,0)
^^3^3^2950907^
"^DD",8925,8925,1308,21,1,0)
This is the date (and time) on which the document will be removed from
"^DD",8925,8925,1308,21,2,0)
public view.  It is currently used only for Patient Postings, although it
"^DD",8925,8925,1308,21,3,0)
may be generalized for use with other document types, if appropriate.
"^DD",8925,8925,1308,"DT")
2950907
"^DD",8925,8925,1401,0)
PATIENT MOVEMENT RECORD^P405'^DGPM(^14;1^Q
"^DD",8925,8925,1401,3)
This is the inpatient movement with which the document is associated.
"^DD",8925,8925,1401,"DT")
2940119
"^DD",8925,8925,1402,0)
TREATING SPECIALTY^P45.7'^DIC(45.7,^14;2^Q
"^DD",8925,8925,1402,1,0)
^.1
"^DD",8925,8925,1402,1,1,0)
8925^TS
"^DD",8925,8925,1402,1,1,1)
S ^TIU(8925,"TS",$E(X,1,30),DA)=""
"^DD",8925,8925,1402,1,1,2)
K ^TIU(8925,"TS",$E(X,1,30),DA)
"^DD",8925,8925,1402,1,1,"%D",0)
^^3^3^2940207^
"^DD",8925,8925,1402,1,1,"%D",1,0)
 
"^DD",8925,8925,1402,1,1,"%D",2,0)
This REGULAR, FileMan type cross-reference is used to support both
"^DD",8925,8925,1402,1,1,"%D",3,0)
look-ups and sorts by Treating Specialty.
"^DD",8925,8925,1402,1,1,"DT")
2940207
"^DD",8925,8925,1402,1,2,0)
8925^ATS^MUMPS
"^DD",8925,8925,1402,1,2,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ATS",+X,+$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,1402,1,2,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ATS",+X,+$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,1402,1,2,"%D",0)
^^2^2^2950615^^^
"^DD",8925,8925,1402,1,2,"%D",1,0)
This MUMPS-type, multi-field cross-reference is optimized for searching by
"^DD",8925,8925,1402,1,2,"%D",2,0)
treating specialty, document type, status, and date range.
"^DD",8925,8925,1402,1,2,"DT")
2940325
"^DD",8925,8925,1402,3)
This is the treating specialty associated with the document.
"^DD",8925,8925,1402,"DT")
2940325
"^DD",8925,8925,1403,0)
IRT RECORD^P393'^VAS(393,^14;3^Q
"^DD",8925,8925,1403,3)
This is the Incomplete Records Tracking Entry for the document.
"^DD",8925,8925,1403,"DT")
2940119
"^DD",8925,8925,1404,0)
SERVICE^P49'^DIC(49,^14;4^Q
"^DD",8925,8925,1404,1,0)
^.1
"^DD",8925,8925,1404,1,1,0)
8925^ASVC^MUMPS
"^DD",8925,8925,1404,1,1,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) S ^TIU(8925,"ASVC",+X,+$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)=""
"^DD",8925,8925,1404,1,1,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,13)),U),+$P($G(^TIU(8925,+DA,0)),U,5) K ^TIU(8925,"ASVC",+X,+$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,5),(9999999-$P($G(^TIU(8925,+DA,13)),U)),DA)
"^DD",8925,8925,1404,1,1,"%D",0)
^^2^2^2941122^
"^DD",8925,8925,1404,1,1,"%D",1,0)
This MUMPS-type, multi-field cross-reference is optimized for searching 
"^DD",8925,8925,1404,1,1,"%D",2,0)
treating specialty, document type, status, and date 
"^DD",8925,8925,1404,1,1,"DT")
2941122
"^DD",8925,8925,1404,1,2,0)
8925^SVC
"^DD",8925,8925,1404,1,2,1)
S ^TIU(8925,"SVC",$E(X,1,30),DA)=""
"^DD",8925,8925,1404,1,2,2)
K ^TIU(8925,"SVC",$E(X,1,30),DA)
"^DD",8925,8925,1404,1,2,"%D",0)
^^2^2^2960508^
"^DD",8925,8925,1404,1,2,"%D",1,0)
This REGULAR FileMan Cross-reference by Service will facilitate look-ups,
"^DD",8925,8925,1404,1,2,"%D",2,0)
sorts, and reports.
"^DD",8925,8925,1404,1,2,"DT")
2960508
"^DD",8925,8925,1404,3)
This is the service associated with the document.
"^DD",8925,8925,1404,"DT")
2960508
"^DD",8925,8925,1405,0)
REQUESTING PACKAGE REFERENCE^V^^14;5^Q
"^DD",8925,8925,1405,.1)
CONSULT NUMBER
"^DD",8925,8925,1405,1,0)
^.1
"^DD",8925,8925,1405,1,1,0)
8925^G
"^DD",8925,8925,1405,1,1,1)
S ^TIU(8925,"G",$E(X,1,30),DA)=""
"^DD",8925,8925,1405,1,1,2)
K ^TIU(8925,"G",$E(X,1,30),DA)
"^DD",8925,8925,1405,1,1,"%D",0)
^^2^2^2960711^
"^DD",8925,8925,1405,1,1,"%D",1,0)
This REGULAR FM cross-reference by REQUESTING PACKAGE REFERENCE is used to
"^DD",8925,8925,1405,1,1,"%D",2,0)
avoid multiple documents per request, and for look-ups.
"^DD",8925,8925,1405,1,1,"DT")
2960711
"^DD",8925,8925,1405,3)
Indicate the corresponding record in the requesting package.
"^DD",8925,8925,1405,21,0)
^^2^2^2960426^
"^DD",8925,8925,1405,21,1,0)
This field allows a linkage to be maintained between the TIU Document and
"^DD",8925,8925,1405,21,2,0)
the DHCP Package for which it was generated.
"^DD",8925,8925,1405,"DT")
2960711
"^DD",8925,8925,1405,"V",0)
^.12P^1^1
"^DD",8925,8925,1405,"V",1,0)
123^Select CONSULTATION REQUEST^1^C^n^n
"^DD",8925,8925,1501,0)
SIGNATURE DATE/TIME^D^^15;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,1501,1,0)
^.1
"^DD",8925,8925,1501,1,1,0)
8925^ALOCP1^MUMPS
"^DD",8925,8925,1501,1,1,1)
I +$$ALOCP^TIULX(+DA),+$P($G(^TIU(8925,+DA,12)),U,5) S ^TIU(8925,"ALOCP",+$P($G(^TIU(8925,+DA,12)),U,5),+X,+DA)=""
"^DD",8925,8925,1501,1,1,2)
I +$P($G(^TIU(8925,+DA,12)),U,5) K ^TIU(8925,"ALOCP",+$P($G(^TIU(8925,+DA,12)),U,5),+X,+DA)
"^DD",8925,8925,1501,1,1,"%D",0)
^^4^4^2950619^^^
"^DD",8925,8925,1501,1,1,"%D",1,0)
This MUMPS-type, multi-field cross-reference by Hospital Location and
"^DD",8925,8925,1501,1,1,"%D",2,0)
REGULAR Signature Date/Time is used to maintain the daily print queue
"^DD",8925,8925,1501,1,1,"%D",3,0)
for batch printing of documents (currently, just Progress Notes) on
"^DD",8925,8925,1501,1,1,"%D",4,0)
signature.
"^DD",8925,8925,1501,1,1,"DT")
2950619
"^DD",8925,8925,1501,1,2,0)
8925^APTP1^MUMPS
"^DD",8925,8925,1501,1,2,1)
I +$$APTP^TIULX(+DA),+$P($G(^TIU(8925,+DA,0)),U,2) S ^TIU(8925,"APTP",+$P($G(^TIU(8925,+DA,0)),U,2),+X,+DA)=""
"^DD",8925,8925,1501,1,2,2)
I +$P($G(^TIU(8925,+DA,0)),U,2) K ^TIU(8925,"APTP",+$P($G(^TIU(8925,+DA,0)),U,2),+X,+DA)
"^DD",8925,8925,1501,1,2,"%D",0)
^^3^3^2950623^
"^DD",8925,8925,1501,1,2,"%D",1,0)
This MUMPS-type, multi-field cross-reference by Patient and REGULAR
"^DD",8925,8925,1501,1,2,"%D",2,0)
Signature Date/Time is used to maintain the daily print queue for batch
"^DD",8925,8925,1501,1,2,"%D",3,0)
printing of documents (currently, just Progress Notes) on signature.
"^DD",8925,8925,1501,1,2,"DT")
2950623
"^DD",8925,8925,1501,1,3,0)
8925^AAUP1^MUMPS
"^DD",8925,8925,1501,1,3,1)
I +$$AAUP^TIULX(+DA),+$P($G(^TIU(8925,+DA,12)),U,2) S ^TIU(8925,"AAUP",+$P($G(^TIU(8925,+DA,12)),U,2),+X,+DA)=""
"^DD",8925,8925,1501,1,3,2)
I +$P($G(^TIU(8925,+DA,12)),U,2) K ^TIU(8925,"AAUP",+$P($G(^TIU(8925,+DA,12)),U,2),+X,+DA)
"^DD",8925,8925,1501,1,3,"%D",0)
^^3^3^2950623^
"^DD",8925,8925,1501,1,3,"%D",1,0)
This MUMPS-type, multi-field cross-reference by Author and REGULAR
"^DD",8925,8925,1501,1,3,"%D",2,0)
Signature Date/Time is used to maintain the daily print queue for batch
"^DD",8925,8925,1501,1,3,"%D",3,0)
printing of documents (currently, just Progress Notes) on signature.
"^DD",8925,8925,1501,1,3,"DT")
2950623
"^DD",8925,8925,1501,1,4,0)
8925^ACLPT02^MUMPS
"^DD",8925,8925,1501,1,4,1)
D SACLPT^TIUDD0(1501,X)
"^DD",8925,8925,1501,1,4,2)
D KACLPT^TIUDD01(1501,X)
"^DD",8925,8925,1501,1,4,"%D",0)
^^3^3^2970617^
"^DD",8925,8925,1501,1,4,"%D",1,0)
This multi-field, MUMPS-type cross-reference on CLASS, PATIENT, INVERSE
"^DD",8925,8925,1501,1,4,"%D",2,0)
REFERENCE DATE/TIME, and RECORD # is designed to support rapid queries by
"^DD",8925,8925,1501,1,4,"%D",3,0)
patient.
"^DD",8925,8925,1501,1,4,"DT")
2970617
"^DD",8925,8925,1501,1,5,0)
8925^ACLEC04^MUMPS
"^DD",8925,8925,1501,1,5,1)
D SACLEC^TIUDD0(1501,X)
"^DD",8925,8925,1501,1,5,2)
D KACLEC^TIUDD01(1501,X)
"^DD",8925,8925,1501,1,5,"%D",0)
^^3^3^2970617^
"^DD",8925,8925,1501,1,5,"%D",1,0)
This multi-field, MUMPS-type Cross-reference on CLASS, EXPECTED COSIGNER,
"^DD",8925,8925,1501,1,5,"%D",2,0)
PATIENT, INVERSE REFERENCE DATE/TIME, and RECORD # is useful for finding
"^DD",8925,8925,1501,1,5,"%D",3,0)
the uncosigned notes by the current user for a given patient.
"^DD",8925,8925,1501,1,5,"DT")
2970617
"^DD",8925,8925,1501,1,6,0)
8925^ACLAU04^MUMPS
"^DD",8925,8925,1501,1,6,1)
D KACLAU^TIUDD01(1501,X),KACLAU1^TIUDD01(1501,X)
"^DD",8925,8925,1501,1,6,2)
D SACLAU^TIUDD0(1501,X),SACLAU1^TIUDD0(1501,X)
"^DD",8925,8925,1501,1,6,"%D",0)
^^4^4^2970617^
"^DD",8925,8925,1501,1,6,"%D",1,0)
This multi-field, MUMPS-type cross-reference on CLASS, AUTHOR (or ENTERED
"^DD",8925,8925,1501,1,6,"%D",2,0)
BY), PATIENT, INVERSE REFERENCE DATE/TIME, and RECORD # is designed to
"^DD",8925,8925,1501,1,6,"%D",3,0)
facilitate rapid access to the current users unsigned notes about a
"^DD",8925,8925,1501,1,6,"%D",4,0)
patient.
"^DD",8925,8925,1501,1,6,"DT")
2970617
"^DD",8925,8925,1501,3)
This is the date/time at which the document was signed by the author.
"^DD",8925,8925,1501,"DT")
2970617
"^DD",8925,8925,1502,0)
SIGNED BY^P200'^VA(200,^15;2^Q
"^DD",8925,8925,1502,1,0)
^.1
"^DD",8925,8925,1502,1,1,0)
8925^ACLSB3^MUMPS
"^DD",8925,8925,1502,1,1,1)
D SACLSB^TIUDD0(1502,X)
"^DD",8925,8925,1502,1,1,2)
D KACLSB^TIUDD01(1502,X)
"^DD",8925,8925,1502,1,1,"%D",0)
^^3^3^2970617^
"^DD",8925,8925,1502,1,1,"%D",1,0)
This cross-reference by CLASS, SIGNED BY, PATIENT, INVERSE REFERENCE
"^DD",8925,8925,1502,1,1,"%D",2,0)
DATE/TIME, and RECORD # will facilitate finding records signed by a given
"^DD",8925,8925,1502,1,1,"%D",3,0)
user about the current patient.
"^DD",8925,8925,1502,1,1,"DT")
2970617
"^DD",8925,8925,1502,3)
This is the person who signed the document.
"^DD",8925,8925,1502,"DT")
2970617
"^DD",8925,8925,1503,0)
SIGNATURE BLOCK NAME^FOX^^15;3^S X=$$ENCRYPT^TIULC1(X,1,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")")) K:$L(X)>30!($L(X)<3) X
"^DD",8925,8925,1503,2)
S Y(0)=Y S Y=$$DECRYPT^TIULC1(Y,1,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")"))
"^DD",8925,8925,1503,2.1)
S Y=$$DECRYPT^TIULC1(Y,1,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")"))
"^DD",8925,8925,1503,3)
Answer must be 3-30 characters in length.
"^DD",8925,8925,1503,"DT")
2950626
"^DD",8925,8925,1504,0)
SIGNATURE BLOCK TITLE^FOX^^15;4^S X=$$ENCRYPT^TIULC1(X,1,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")")) K:$L(X)>60!($L(X)<2) X
"^DD",8925,8925,1504,2)
S Y(0)=Y S Y=$$DECRYPT^TIULC1(Y,1,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")"))
"^DD",8925,8925,1504,2.1)
S Y=$$DECRYPT^TIULC1(Y,1,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")"))
"^DD",8925,8925,1504,3)
Answer must be 2-60 characters in length.
"^DD",8925,8925,1504,21,0)
^^2^2^2940413^
"^DD",8925,8925,1504,21,1,0)
This is the encrypted signature block title of the person who signed the
"^DD",8925,8925,1504,21,2,0)
document.
"^DD",8925,8925,1504,"DT")
2950626
"^DD",8925,8925,1505,0)
SIGNATURE MODE^S^E:electronic;C:chart;^15;5^Q
"^DD",8925,8925,1505,3)
Please indicate the mode by which the signature was obtained.
"^DD",8925,8925,1505,21,0)
^^2^2^2950327^^^^
"^DD",8925,8925,1505,21,1,0)
This is the mode by which the signature was obtained (i.e., either
"^DD",8925,8925,1505,21,2,0)
electronic or chart).
"^DD",8925,8925,1505,"DT")
2940413
"^DD",8925,8925,1506,0)
COSIGNATURE NEEDED^S^1:YES;0:NO;^15;6^Q
"^DD",8925,8925,1506,3)
Please indicate whether a cosignature is needed.
"^DD",8925,8925,1506,21,0)
^^2^2^2940413^
"^DD",8925,8925,1506,21,1,0)
This boolean flag indicates to the system whether or not a cosignature is
"^DD",8925,8925,1506,21,2,0)
needed.
"^DD",8925,8925,1506,"DT")
2940413
"^DD",8925,8925,1507,0)
COSIGNATURE DATE/TIME^D^^15;7^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,1507,1,0)
^.1
"^DD",8925,8925,1507,1,1,0)
8925^ACLEC05^MUMPS
"^DD",8925,8925,1507,1,1,1)
D KACLEC^TIUDD01(1507,X)
"^DD",8925,8925,1507,1,1,2)
D SACLEC^TIUDD0(1507,X)
"^DD",8925,8925,1507,1,1,"%D",0)
^^3^3^2970617^
"^DD",8925,8925,1507,1,1,"%D",1,0)
This multi-field, MUMPS-type Cross-reference on CLASS, EXPECTED COSIGNER,
"^DD",8925,8925,1507,1,1,"%D",2,0)
PATIENT, INVERSE REFERENCE DATE/TIME, and RECORD # is useful for finding
"^DD",8925,8925,1507,1,1,"%D",3,0)
the uncosigned notes by the current user for a given patient.
"^DD",8925,8925,1507,1,1,"DT")
2970617
"^DD",8925,8925,1507,1,2,0)
8925^ACLPT1507^MUMPS
"^DD",8925,8925,1507,1,2,1)
D SACLPT^TIUDD0(1507,X)
"^DD",8925,8925,1507,1,2,2)
D KACLPT^TIUDD01(1507,X)
"^DD",8925,8925,1507,1,2,"%D",0)
^^3^3^2970617^^^
"^DD",8925,8925,1507,1,2,"%D",1,0)
This MUMPS-Type, Multi-field cross-reference on Cosignature Date/time will
"^DD",8925,8925,1507,1,2,"%D",2,0)
assure that the cosigned notes are included in the ACLPT x-ref (completed,
"^DD",8925,8925,1507,1,2,"%D",3,0)
by patient) upon cosignature.
"^DD",8925,8925,1507,1,2,"DT")
2970617
"^DD",8925,8925,1507,3)
The date/time at which cosignature was obtained will be automatically saved by the system.
"^DD",8925,8925,1507,21,0)
^^1^1^2940413^
"^DD",8925,8925,1507,21,1,0)
This is the date/time at which cosignature was obtained.
"^DD",8925,8925,1507,"DT")
2970617
"^DD",8925,8925,1508,0)
COSIGNED BY^P200'^VA(200,^15;8^Q
"^DD",8925,8925,1508,3)
The identity of the person who cosigned the document will be automatically saved by the system.
"^DD",8925,8925,1508,"DT")
2940413
"^DD",8925,8925,1509,0)
COSIGNATURE BLOCK NAME^FXO^^15;9^S X=$$ENCRYPT^TIULC1(X,1,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")")) K:$L(X)>30!($L(X)<2) X
"^DD",8925,8925,1509,2)
S Y(0)=Y S Y=$$DECRYPT^TIULC1(Y,1,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")"))
"^DD",8925,8925,1509,2.1)
S Y=$$DECRYPT^TIULC1(Y,1,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")"))
"^DD",8925,8925,1509,3)
This encrypted cosignature block will be automatically saved by the system.
"^DD",8925,8925,1509,"DT")
2950626
"^DD",8925,8925,1510,0)
COSIGNATURE BLOCK TITLE^FXO^^15;10^S X=$$ENCRYPT^TIULC1(X,1,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")")) K:$L(X)>60!($L(X)<2) X
"^DD",8925,8925,1510,2)
S Y(0)=Y S Y=$$DECRYPT^TIULC1(Y,1,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")"))
"^DD",8925,8925,1510,2.1)
S Y=$$DECRYPT^TIULC1(Y,1,$$CHKSUM^TIULC("^TIU(8925,"_+DA_",""TEXT"")"))
"^DD",8925,8925,1510,3)
Answer must be 2-60 characters in length.
"^DD",8925,8925,1510,"DT")
2950626
"^DD",8925,8925,1511,0)
COSIGNATURE MODE^S^E:electronic;C:chart;^15;11^Q
"^DD",8925,8925,1511,3)
Please indicate the mode by which cosignature was obtained.
"^DD",8925,8925,1511,"DT")
2940413
"^DD",8925,8925,1512,0)
MARKED SIGNED ON CHART BY^P200'^VA(200,^15;12^Q
"^DD",8925,8925,1512,3)
Select the person who marked the document 'signed on chart.'
"^DD",8925,8925,1512,21,0)
^^2^2^2950501^
"^DD",8925,8925,1512,21,1,0)
This is the identity of the person who marked a given document 'signed on 
"^DD",8925,8925,1512,21,2,0)
chart,' indicating that a 'wet' signature of the chart copy had been obtained.
"^DD",8925,8925,1512,"DT")
2950501
"^DD",8925,8925,1513,0)
MARKED COSIGNED ON CHART BY^P200'^VA(200,^15;13^Q
"^DD",8925,8925,1513,3)
Select user who marked document 'cosigned on chart.'
"^DD",8925,8925,1513,21,0)
^^1^1^2950501^
"^DD",8925,8925,1513,21,1,0)
This is the user who marked a given document as 'cosigned on chart.'
"^DD",8925,8925,1513,"DT")
2950501
"^DD",8925,8925,1601,0)
AMENDMENT DATE/TIME^D^^16;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,1601,3)
This is the date/time at which the document was amended.
"^DD",8925,8925,1601,"DT")
2940119
"^DD",8925,8925,1602,0)
AMENDED BY^P200'^VA(200,^16;2^Q
"^DD",8925,8925,1602,3)
This is the person who entered an amendment for the document.
"^DD",8925,8925,1602,"DT")
2940119
"^DD",8925,8925,1603,0)
AMENDMENT SIGNED^D^^16;3^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,1603,3)
This is the date/time at which the amendment was signed.
"^DD",8925,8925,1603,"DT")
2940119
"^DD",8925,8925,1604,0)
AMENDMENT SIGN BLOCK NAME^F^^16;4^K:$L(X)>30!($L(X)<3) X
"^DD",8925,8925,1604,3)
Answer must be 3-30 characters in length.
"^DD",8925,8925,1604,21,0)
^^1^1^2950125^
"^DD",8925,8925,1604,21,1,0)
This is the signature block name of the person who amended the document.
"^DD",8925,8925,1604,"DT")
2950125
"^DD",8925,8925,1605,0)
AMENDMENT SIGN BLOCK TITLE^F^^16;5^K:$L(X)>60!($L(X)<2) X
"^DD",8925,8925,1605,3)
Answer must be 2-60 characters in length.
"^DD",8925,8925,1605,"DT")
2950125
"^DD",8925,8925,1606,0)
ADMINISTRATIVE CLOSURE DATE^D^^16;6^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,1606,3)
Enter the date (and time) at which the document was closed.
"^DD",8925,8925,1606,"DT")
2950125
"^DD",8925,8925,1607,0)
ADMIN CLOSURE SIG BLOCK NAME^F^^16;7^K:$L(X)>30!($L(X)<3) X
"^DD",8925,8925,1607,3)
Answer must be 3-30 characters in length.
"^DD",8925,8925,1607,"DT")
2950125
"^DD",8925,8925,1608,0)
ADMIN CLOSURE SIG BLOCK TITLE^F^^16;8^K:$L(X)>60!($L(X)<2) X
"^DD",8925,8925,1608,3)
Answer must be 2-60 characters in length.
"^DD",8925,8925,1608,"DT")
2950125
"^DD",8925,8925,1609,0)
ARCHIVE/PURGE DATE/TIME^D^^16;9^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,1609,3)
Enter the date/time at which the record was archived/purged.
"^DD",8925,8925,1609,"DT")
2950125
"^DD",8925,8925,1610,0)
DELETED BY^P200'^VA(200,^16;10^Q
"^DD",8925,8925,1610,3)
Enter the name of the person who deleted the document.
"^DD",8925,8925,1610,21,0)
^^1^1^2950417^
"^DD",8925,8925,1610,21,1,0)
This is the person who deleted the document per the Privacy Act.
"^DD",8925,8925,1610,"DT")
2950417
"^DD",8925,8925,1611,0)
DELETION DATE^D^^16;11^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925,8925,1611,3)
Enter the Date/(time) on which the document was deleted.
"^DD",8925,8925,1611,21,0)
^^2^2^2950417^
"^DD",8925,8925,1611,21,1,0)
This is the date/(time optional) at which the document was deleted per the 
"^DD",8925,8925,1611,21,2,0)
Privacy Act.
"^DD",8925,8925,1611,"DT")
2950417
"^DD",8925,8925,1612,0)
REASON FOR DELETION^S^P:privacy act;A:administrative;^16;12^Q
"^DD",8925,8925,1612,3)
Please indicate the reason for deleting the document.
"^DD",8925,8925,1612,21,0)
^^3^3^2970429^
"^DD",8925,8925,1612,21,1,0)
This is the reason for which the document was deleted, either: Privacy
"^DD",8925,8925,1612,21,2,0)
Act, as invoked by the patient; or Administrative Action, where the note
"^DD",8925,8925,1612,21,3,0)
needed to be removed, following signature, for administrative reasons.
"^DD",8925,8925,1612,"DT")
2970429
"^DD",8925,8925,1701,0)
SUBJECT (OPTIONAL description)^F^^17;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>80!($L(X)<3) X
"^DD",8925,8925,1701,1,0)
^.1
"^DD",8925,8925,1701,1,1,0)
8925^ASUB^MUMPS
"^DD",8925,8925,1701,1,1,1)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,5),+$P($G(^TIU(8925,+DA,13)),U) D ASUBS^TIUDD($G(X),+$G(^TIU(8925,+DA,0)),+$P(^TIU(8925,+DA,0),U,5),(9999999-+$G(^TIU(8925,+DA,13))),DA)
"^DD",8925,8925,1701,1,1,2)
I +$P($G(^TIU(8925,+DA,0)),U),+$P($G(^TIU(8925,+DA,0)),U,5),+$P($G(^TIU(8925,+DA,13)),U) D ASUBK^TIUDD($G(X),+$G(^TIU(8925,+DA,0)),+$P(^TIU(8925,+DA,0),U,5),(9999999-+$G(^TIU(8925,+DA,13))),DA)
"^DD",8925,8925,1701,1,1,"%D",0)
^^2^2^2950928^^^^
"^DD",8925,8925,1701,1,1,"%D",1,0)
This MUMPS-type, multi-field cross-reference is used for queries by
"^DD",8925,8925,1701,1,1,"%D",2,0)
subject.
"^DD",8925,8925,1701,1,1,"DT")
2950928
"^DD",8925,8925,1701,3)
Enter a brief description (3-80 characters) of the contents of the document.
"^DD",8925,8925,1701,21,0)
^^2^2^2951021^
"^DD",8925,8925,1701,21,1,0)
This freetext field is used to help you find documents by subject (i.e.,
"^DD",8925,8925,1701,21,2,0)
consider the subject a "key word" of sorts.
"^DD",8925,8925,1701,"DT")
2951021
"^DD",8925,8925,15001,0)
VISIT ID^F^^150;1^K:$L(X)>15!($L(X)<8)!'(X?4.10NU1"-"3.4U) X
"^DD",8925,8925,15001,1,0)
^.1
"^DD",8925,8925,15001,1,1,0)
8925^VID
"^DD",8925,8925,15001,1,1,1)
S ^TIU(8925,"VID",$E(X,1,30),DA)=""
"^DD",8925,8925,15001,1,1,2)
K ^TIU(8925,"VID",$E(X,1,30),DA)
"^DD",8925,8925,15001,1,1,3)
DO NOT DELETE
"^DD",8925,8925,15001,1,1,"%D",0)
^^1^1^2961127^
"^DD",8925,8925,15001,1,1,"%D",1,0)
REGULAR FM Cross-reference by Visit ID facilitates look-up by CIRN.
"^DD",8925,8925,15001,1,1,"DT")
2961127
"^DD",8925,8925,15001,3)
Unique Visit Identifier returned by Visit Tracking
"^DD",8925,8925,15001,5,1,0)
8925^.03^7
"^DD",8925,8925,15001,9)
^
"^DD",8925,8925,15001,21,0)
^^2^2^2961127^
"^DD",8925,8925,15001,21,1,0)
Unique Visit Identifier for use by CIRN.  The value of this field should
"^DD",8925,8925,15001,21,2,0)
ONLY be modified by virtue of a change to the Visit (.03) field.
"^DD",8925,8925,15001,"DT")
2961127
"^DD",8925,8925.02,0)
REPORT TEXT SUB-FIELD^^.01^1
"^DD",8925,8925.02,0,"NM","REPORT TEXT")

"^DD",8925,8925.02,0,"UP")
8925
"^DD",8925,8925.02,.01,0)
REPORT TEXT^W^^0;1^Q
"^DD",8925,8925.02,.01,"DT")
2920506
"^DD",8925,8925.03,0)
EDIT TEXT BUFFER SUB-FIELD^^.01^1
"^DD",8925,8925.03,0,"NM","EDIT TEXT BUFFER")

"^DD",8925,8925.03,0,"UP")
8925
"^DD",8925,8925.03,.01,0)
EDIT TEXT BUFFER^WL^^0;1^Q
"^DD",8925,8925.03,.01,"DT")
2930614
"^DD",8925.1,8925.1,0)
FIELD^^.14^42
"^DD",8925.1,8925.1,0,"DDA")
N
"^DD",8925.1,8925.1,0,"DT")
2970227
"^DD",8925.1,8925.1,0,"ID","W.04")
W "   ",@("$P($P($C(59)_$S($D(^DD(8925.1,.04,0)):$P(^(0),U,3),1:0)_$E("_DIC_"Y,0),0),$C(59)_$P(^(0),U,4)_"":"",2),$C(59),1)")
"^DD",8925.1,8925.1,0,"IX","AC",8925.1,.06)

"^DD",8925.1,8925.1,0,"IX","AD",8925.14,.01)

"^DD",8925.1,8925.1,0,"IX","AM",8925.1,99)

"^DD",8925.1,8925.1,0,"IX","AM1",8925.1,.03)

"^DD",8925.1,8925.1,0,"IX","AMM",8925.14,.01)

"^DD",8925.1,8925.1,0,"IX","AMM2",8925.14,2)

"^DD",8925.1,8925.1,0,"IX","AMM3",8925.14,3)

"^DD",8925.1,8925.1,0,"IX","AMM4",8925.14,4)

"^DD",8925.1,8925.1,0,"IX","AP",8925.1,.05)

"^DD",8925.1,8925.1,0,"IX","APOST",8925.1,.14)

"^DD",8925.1,8925.1,0,"IX","AS",8925.1,.07)

"^DD",8925.1,8925.1,0,"IX","AT",8925.1,.04)

"^DD",8925.1,8925.1,0,"IX","B",8925.1,.01)

"^DD",8925.1,8925.1,0,"IX","C",8925.1,.02)

"^DD",8925.1,8925.1,0,"IX","D",8925.1,.03)

"^DD",8925.1,8925.1,0,"IX","E",8925.1,.01)

"^DD",8925.1,8925.1,0,"NM","TIU DOCUMENT DEFINITION")

"^DD",8925.1,8925.1,0,"PT",142.14,.01)

"^DD",8925.1,8925.1,0,"PT",8925,.01)

"^DD",8925.1,8925.1,0,"PT",8925,.04)

"^DD",8925.1,8925.1,0,"PT",8925.14,.01)

"^DD",8925.1,8925.1,0,"PT",8925.95,.01)

"^DD",8925.1,8925.1,0,"PT",8925.98,.02)

"^DD",8925.1,8925.1,0,"PT",8925.98,.03)

"^DD",8925.1,8925.1,0,"PT",8925.9801,.01)

"^DD",8925.1,8925.1,0,"PT",8930.1,.01)

"^DD",8925.1,8925.1,0,"VRPK")
TEXT INTEGRATION UTILITIES
"^DD",8925.1,8925.1,.01,0)
NAME^RFX^^0;1^S:$L($T(^TIULS)) X=$$UPPER^TIULS(X) K:$L(X)>60!($L(X)<3)!'(X'?1P.E) X I $D(X) K:$$BADNAP^TIUFLF3(X,+$G(DA)) X
"^DD",8925.1,8925.1,.01,.1)

"^DD",8925.1,8925.1,.01,1,0)
^.1
"^DD",8925.1,8925.1,.01,1,1,0)
8925.1^B
"^DD",8925.1,8925.1,.01,1,1,1)
S ^TIU(8925.1,"B",$E(X,1,30),DA)=""
"^DD",8925.1,8925.1,.01,1,1,2)
K ^TIU(8925.1,"B",$E(X,1,30),DA)
"^DD",8925.1,8925.1,.01,1,2,0)
8925.1^E^KWIC
"^DD",8925.1,8925.1,.01,1,2,1)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2,^DD("KWIC")'[I S ^TIU(8925.1,"E",I,DA)=""
"^DD",8925.1,8925.1,.01,1,2,2)
S %1=1 F %=1:1:$L(X)+1 S I=$E(X,%) I "(,.?! '-/&:;)"[I S I=$E($E(X,%1,%-1),1,30),%1=%+1 I $L(I)>2 K ^TIU(8925.1,"E",I,DA)
"^DD",8925.1,8925.1,.01,1,2,"%D",0)
^^2^2^2960302^
"^DD",8925.1,8925.1,.01,1,2,"%D",1,0)
This KWIK cross-reference on document name will allow look-up based on
"^DD",8925.1,8925.1,.01,1,2,"%D",2,0)
sub-names, etc.
"^DD",8925.1,8925.1,.01,1,2,"DT")
2960302
"^DD",8925.1,8925.1,.01,3)
This is the technical name, 3-60 characters, not starting with punctuation.  If OBJECT, Name must be unique among all object Names, Abbreviations, and Print Names.
"^DD",8925.1,8925.1,.01,4)
D NAME^TIUFXHLX:$G(TIUFXNOD)["Add/Create"&($G(TIUFSTMP)="T")
"^DD",8925.1,8925.1,.01,21,0)
^^51^51^2970616^^^^
"^DD",8925.1,8925.1,.01,21,1,0)
The name of a Document Definition entry (.01 field) must be between 3
"^DD",8925.1,8925.1,.01,21,2,0)
and 60 characters long and may not begin with a punctuation character.
"^DD",8925.1,8925.1,.01,21,3,0)
Although names can be entered in any case, they are transformed to
"^DD",8925.1,8925.1,.01,21,4,0)
upper case before being stored.
"^DD",8925.1,8925.1,.01,21,5,0)
 
"^DD",8925.1,8925.1,.01,21,6,0)
It functions as the Technical Name of the entry.  Some sites have put KWIC
"^DD",8925.1,8925.1,.01,21,7,0)
cross references on it to get, say, all Titles from a given Service.
"^DD",8925.1,8925.1,.01,21,8,0)
 
"^DD",8925.1,8925.1,.01,21,9,0)
Name can be used when entering documents as the name of the Title being
"^DD",8925.1,8925.1,.01,21,10,0)
entered.  Print Name and Abbreviation will also be accepted.
"^DD",8925.1,8925.1,.01,21,11,0)
 
"^DD",8925.1,8925.1,.01,21,12,0)
Since it is the Technical, .01 Name, the Document Definition Utility
"^DD",8925.1,8925.1,.01,21,13,0)
(TIUF) uses this name throughout.
"^DD",8925.1,8925.1,.01,21,14,0)
 
"^DD",8925.1,8925.1,.01,21,15,0)
The .01 name differs from the Print Name, which appears in lists of
"^DD",8925.1,8925.1,.01,21,16,0)
documents and functions as the Title of the document.
"^DD",8925.1,8925.1,.01,21,17,0)
 
"^DD",8925.1,8925.1,.01,21,18,0)
It also differs from Item Menu Text (1-20 characters), which is used when
"^DD",8925.1,8925.1,.01,21,19,0)
selecting documents from 3-COLUMN MENUS.
"^DD",8925.1,8925.1,.01,21,20,0)
 
"^DD",8925.1,8925.1,.01,21,21,0)
The ORDER of names in TIUF options Edit Document Definitions and Create
"^DD",8925.1,8925.1,.01,21,22,0)
Document Definitions is by Item Sequence under the parent.  Order is
"^DD",8925.1,8925.1,.01,21,23,0)
alphabetic by Menu Text if an Item has no Item Sequence.
"^DD",8925.1,8925.1,.01,21,24,0)
 
"^DD",8925.1,8925.1,.01,21,25,0)
When a new entry is added to file 8925.1, the Document Definition Utility
"^DD",8925.1,8925.1,.01,21,26,0)
(TIUF) enters the Name as the default Print Name.  The Print Name can be
"^DD",8925.1,8925.1,.01,21,27,0)
edited if a different Print Name is desired.
"^DD",8925.1,8925.1,.01,21,28,0)
 
"^DD",8925.1,8925.1,.01,21,29,0)
File 8925.1 permits more than 1 entry with the same name as long as they
"^DD",8925.1,8925.1,.01,21,30,0)
don't have the same Type.  In that sense, NAMES are reusable.  However,
"^DD",8925.1,8925.1,.01,21,31,0)
ENTRIES are NOT reusable (except specially marked Components): an entry is
"^DD",8925.1,8925.1,.01,21,32,0)
NOT allowed to be an item under more than one parent unless it is a Shared
"^DD",8925.1,8925.1,.01,21,33,0)
Component.  (See Type Component.)
"^DD",8925.1,8925.1,.01,21,34,0)
 
"^DD",8925.1,8925.1,.01,21,35,0)
Name is a BASIC Field.
"^DD",8925.1,8925.1,.01,21,36,0)
 
"^DD",8925.1,8925.1,.01,21,37,0)
                               OBJECT Name 
"^DD",8925.1,8925.1,.01,21,38,0)
Object Names, like any other names are 3-60 characters, not starting with
"^DD",8925.1,8925.1,.01,21,39,0)
punctuation.  Sites may want to namespace object names, use the object
"^DD",8925.1,8925.1,.01,21,40,0)
Print Name as a more familiar name, and use object Abbreviation as a short
"^DD",8925.1,8925.1,.01,21,41,0)
name to embed in boilerplate text.  Unlike other Types, Object
"^DD",8925.1,8925.1,.01,21,42,0)
Abbreviation and Print Name as well as Name must be uppercase.
"^DD",8925.1,8925.1,.01,21,43,0)
 
"^DD",8925.1,8925.1,.01,21,44,0)
Object Name, Abbreviation, or Print Name can be embedded in boilerplate
"^DD",8925.1,8925.1,.01,21,45,0)
text.  Since TIU must be able to determine from this which object is
"^DD",8925.1,8925.1,.01,21,46,0)
intended, object Names, Abbreviations, and Print Names must be unique.  In
"^DD",8925.1,8925.1,.01,21,47,0)
fact, an object Name must differ not only from every other object name,
"^DD",8925.1,8925.1,.01,21,48,0)
but also from every other object Abbreviation and from every other object
"^DD",8925.1,8925.1,.01,21,49,0)
Print Name.  Same for Abbreviations and Print Names.  For example, if some
"^DD",8925.1,8925.1,.01,21,50,0)
object has abbreviation 'CND', then 'CND' cannot be used for any other
"^DD",8925.1,8925.1,.01,21,51,0)
object Name, Abbreviation, or Print Name.
"^DD",8925.1,8925.1,.01,"DEL",.01,0)
I 1
"^DD",8925.1,8925.1,.01,"DT")
2970521
"^DD",8925.1,8925.1,.02,0)
ABBREVIATION^FX^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>4!($L(X)<2)!'(X?2.4A) X I $D(X) K:($P(^TIU(8925.1,DA,0),U,4)="O")&('(X?2.4U)!'$D(TIUFPRIV)) X I $D(X) K:$$BADNAP^TIUFLF3(X,DA) X
"^DD",8925.1,8925.1,.02,1,0)
^.1
"^DD",8925.1,8925.1,.02,1,1,0)
8925.1^C
"^DD",8925.1,8925.1,.02,1,1,1)
S ^TIU(8925.1,"C",$E(X,1,30),DA)=""
"^DD",8925.1,8925.1,.02,1,1,2)
K ^TIU(8925.1,"C",$E(X,1,30),DA)
"^DD",8925.1,8925.1,.02,1,1,"%D",0)
^^2^2^2940711^
"^DD",8925.1,8925.1,.02,1,1,"%D",1,0)
This cross reference will be used by the router/filer to identify a given
"^DD",8925.1,8925.1,.02,1,1,"%D",2,0)
report type.
"^DD",8925.1,8925.1,.02,1,1,"DT")
2921020
"^DD",8925.1,8925.1,.02,3)
Enter from 2 to 4 letters.  If OBJECT, Abbreviation must be unique among all object Names, Abbreviations, and Print Names, and must be uppercase.
"^DD",8925.1,8925.1,.02,21,0)
^^3^3^2970616^^^^
"^DD",8925.1,8925.1,.02,21,1,0)
Abbreviation can be entered at the Title: prompt when entering a document.
"^DD",8925.1,8925.1,.02,21,2,0)
Since all Titles with that abbreviation will then be listed, Abbreviation
"^DD",8925.1,8925.1,.02,21,3,0)
can serve to group Titles.  BASIC Field.  For Objects, see NAME.
"^DD",8925.1,8925.1,.02,"DT")
2970521
"^DD",8925.1,8925.1,.03,0)
PRINT NAME^FX^^0;3^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>60!($L(X)<3) X I $D(X) K:($P(^TIU(8925.1,DA,0),U,4)="O")&('(X?3.60UPN)!'$D(TIUFPRIV)) X I $D(X) K:$$BADNAP^TIUFLF3(X,DA) X
"^DD",8925.1,8925.1,.03,1,0)
^.1
"^DD",8925.1,8925.1,.03,1,1,0)
8925.1^AM1^MUMPS
"^DD",8925.1,8925.1,.03,1,1,1)
D REDO^TIUDD
"^DD",8925.1,8925.1,.03,1,1,2)
D REDO^TIUDD
"^DD",8925.1,8925.1,.03,1,1,"%D",0)
^^2^2^2950911^^^
"^DD",8925.1,8925.1,.03,1,1,"%D",1,0)
This MUMPS-type cross-reference is used to update the TIMESTAMP on both
"^DD",8925.1,8925.1,.03,1,1,"%D",2,0)
the current document, and its parents, when its PRINT NAME changes.
"^DD",8925.1,8925.1,.03,1,1,"DT")
2940720
"^DD",8925.1,8925.1,.03,1,2,0)
8925.1^D
"^DD",8925.1,8925.1,.03,1,2,1)
S ^TIU(8925.1,"D",$E(X,1,30),DA)=""
"^DD",8925.1,8925.1,.03,1,2,2)
K ^TIU(8925.1,"D",$E(X,1,30),DA)
"^DD",8925.1,8925.1,.03,1,2,"%D",0)
^^1^1^2950126^
"^DD",8925.1,8925.1,.03,1,2,"%D",1,0)
This REGULAR FileMan cross-reference by PRINT NAME will facilitate look-up.
"^DD",8925.1,8925.1,.03,1,2,"DT")
2950126
"^DD",8925.1,8925.1,.03,3)
Print Name is used in lists of documents and as document Title in the Patient Chart.  3-60 Characters.  If OBJECT, Print Name must be unique among object Names/Abbreviations/PrintNames, and uppercase.
"^DD",8925.1,8925.1,.03,21,0)
^^3^3^2970616^^^^
"^DD",8925.1,8925.1,.03,21,1,0)
Print Name is the name used in lists of documents.  For entries of Type
"^DD",8925.1,8925.1,.03,21,2,0)
Title, Print Name is used as the document Title in the Patient Chart.
"^DD",8925.1,8925.1,.03,21,3,0)
BASIC field.  For Objects, see NAME.
"^DD",8925.1,8925.1,.03,"DT")
2970521
"^DD",8925.1,8925.1,.04,0)
TYPE^RSX^CL:CLASS;DC:DOCUMENT CLASS;DOC:TITLE;CO:COMPONENT;O:OBJECT;^0;4^K:'$G(TIUFPRIV) X
"^DD",8925.1,8925.1,.04,1,0)
^.1
"^DD",8925.1,8925.1,.04,1,1,0)
8925.1^AT
"^DD",8925.1,8925.1,.04,1,1,1)
S ^TIU(8925.1,"AT",$E(X,1,30),DA)=""
"^DD",8925.1,8925.1,.04,1,1,2)
K ^TIU(8925.1,"AT",$E(X,1,30),DA)
"^DD",8925.1,8925.1,.04,1,1,3)
Please don't delete!
"^DD",8925.1,8925.1,.04,1,1,"%D",0)
^^2^2^2950615^
"^DD",8925.1,8925.1,.04,1,1,"%D",1,0)
This regular cross reference is used for listing Document Definitions by
"^DD",8925.1,8925.1,.04,1,1,"%D",2,0)
Type.
"^DD",8925.1,8925.1,.04,1,1,"DT")
2950615
"^DD",8925.1,8925.1,.04,3)
Types Class and Document Class group documents.  Titles are used to enter documents.  Components are sections of documents.  Objects are M code for use in Boilerplate Text.
"^DD",8925.1,8925.1,.04,4)

"^DD",8925.1,8925.1,.04,21,0)
^^99^99^2970521^^
"^DD",8925.1,8925.1,.04,21,1,0)
Type determines the nature of the entry and what sort of items the entry
"^DD",8925.1,8925.1,.04,21,2,0)
may have. There are 5 possible types:
"^DD",8925.1,8925.1,.04,21,3,0)
 
"^DD",8925.1,8925.1,.04,21,4,0)
CL CLASS:  Classes group documents.
"^DD",8925.1,8925.1,.04,21,5,0)
 
"^DD",8925.1,8925.1,.04,21,6,0)
Example: "Progress Notes" is a class with many kinds of progress notes
"^DD",8925.1,8925.1,.04,21,7,0)
under it.
"^DD",8925.1,8925.1,.04,21,8,0)
 
"^DD",8925.1,8925.1,.04,21,9,0)
Classes may themselves be subdivided into items of Type Class or may have
"^DD",8925.1,8925.1,.04,21,10,0)
items of Type Document Class if no further Class subdivisions are desired.
"^DD",8925.1,8925.1,.04,21,11,0)
 
"^DD",8925.1,8925.1,.04,21,12,0)
If a hierarchy deeper than Class-Document Class-Title is desired, Class is
"^DD",8925.1,8925.1,.04,21,13,0)
the place to insert another level into the hierarchy: Class-Class-Document
"^DD",8925.1,8925.1,.04,21,14,0)
Class-Title.
"^DD",8925.1,8925.1,.04,21,15,0)
 
"^DD",8925.1,8925.1,.04,21,16,0)
Besides grouping documents, Classes also store behavior which is then
"^DD",8925.1,8925.1,.04,21,17,0)
inherited by lower level entries.
"^DD",8925.1,8925.1,.04,21,18,0)
 
"^DD",8925.1,8925.1,.04,21,19,0)
DC DOCUMENT CLASS: Document Classes group documents.  Document Class is
"^DD",8925.1,8925.1,.04,21,20,0)
the lowest level of class, and has items of Type Title under it.
"^DD",8925.1,8925.1,.04,21,21,0)
 
"^DD",8925.1,8925.1,.04,21,22,0)
Example: "Day Pass Note" could be a Document Class under class Progress
"^DD",8925.1,8925.1,.04,21,23,0)
Note.
"^DD",8925.1,8925.1,.04,21,24,0)
 
"^DD",8925.1,8925.1,.04,21,25,0)
Document Classes also store behavior which is then inherited by lower
"^DD",8925.1,8925.1,.04,21,26,0)
entries.
"^DD",8925.1,8925.1,.04,21,27,0)
 
"^DD",8925.1,8925.1,.04,21,28,0)
TL TITLE:  Titles are used to enter documents.  They store the behavior
"^DD",8925.1,8925.1,.04,21,29,0)
of the documents which use them.
"^DD",8925.1,8925.1,.04,21,30,0)
 
"^DD",8925.1,8925.1,.04,21,31,0)
Titles may have predefined boilerplate ("Overprint") text.  They may have
"^DD",8925.1,8925.1,.04,21,32,0)
Components as items.  Boilerplate Text can have objects in it.
"^DD",8925.1,8925.1,.04,21,33,0)
 
"^DD",8925.1,8925.1,.04,21,34,0)
Examples: "Routine Day Pass Note" could be a Title under document class
"^DD",8925.1,8925.1,.04,21,35,0)
Day Pass Note.  Another example might be "Exceptional Circumstances Day
"^DD",8925.1,8925.1,.04,21,36,0)
Pass Note."
"^DD",8925.1,8925.1,.04,21,37,0)
 
"^DD",8925.1,8925.1,.04,21,38,0)
Titles store their own behavior.  They also inherit behavior from higher
"^DD",8925.1,8925.1,.04,21,39,0)
levels of the hierarchy.  However, behavior stored in the Title itself
"^DD",8925.1,8925.1,.04,21,40,0)
overrides inherited behavior.
"^DD",8925.1,8925.1,.04,21,41,0)
 
"^DD",8925.1,8925.1,.04,21,42,0)
CO COMPONENT: Components are "sections" or "pieces" of documents.
"^DD",8925.1,8925.1,.04,21,43,0)
In the Hierarchy, Components are hung as items from Titles.
"^DD",8925.1,8925.1,.04,21,44,0)
 
"^DD",8925.1,8925.1,.04,21,45,0)
Examples: "Reason for Pass" could be a component of Routine Day Pass Note.
"^DD",8925.1,8925.1,.04,21,46,0)
Subjective is a component of a SOAP Note.
"^DD",8925.1,8925.1,.04,21,47,0)
 
"^DD",8925.1,8925.1,.04,21,48,0)
Components may have (sub)Components as items.  They may have Boilerplate
"^DD",8925.1,8925.1,.04,21,49,0)
Text.  Components may be designated Shared (see Field Description for
"^DD",8925.1,8925.1,.04,21,50,0)
Shared). Shared Components are shown in Document Definition Utility
"^DD",8925.1,8925.1,.04,21,51,0)
Displays as Type: 'CO S'.
"^DD",8925.1,8925.1,.04,21,52,0)
 
"^DD",8925.1,8925.1,.04,21,53,0)
There are advantages and disadvantages in splitting a document up into
"^DD",8925.1,8925.1,.04,21,54,0)
separate components (rather than writing sections into the Boilerplate
"^DD",8925.1,8925.1,.04,21,55,0)
Text of the Title): Since Components are stored as separate file entries,
"^DD",8925.1,8925.1,.04,21,56,0)
they are inherently accessable and even 'moveable'. Using Fileman, sites
"^DD",8925.1,8925.1,.04,21,57,0)
can access components of documents the same way they can access documents
"^DD",8925.1,8925.1,.04,21,58,0)
for reports, etc.. Also, in the future, TIU may have options to move/copy
"^DD",8925.1,8925.1,.04,21,59,0)
certain components from one document into another.  The disadvantage is
"^DD",8925.1,8925.1,.04,21,60,0)
speed: Components make the structure more complex and therefore slow down
"^DD",8925.1,8925.1,.04,21,61,0)
processing.
"^DD",8925.1,8925.1,.04,21,62,0)
 
"^DD",8925.1,8925.1,.04,21,63,0)
O OBJECT: Objects are names which may be embedded in the predefined
"^DD",8925.1,8925.1,.04,21,64,0)
boilerplate text of Titles. Example: 'PATIENT AGE'.  Objects are typed
"^DD",8925.1,8925.1,.04,21,65,0)
into the boilerplate text of a Title, enclosed by '|'s.  For example,
"^DD",8925.1,8925.1,.04,21,66,0)
suppose a Title has boilerplate text:
"^DD",8925.1,8925.1,.04,21,67,0)
 
"^DD",8925.1,8925.1,.04,21,68,0)
        Patient is a healthy |PATIENT AGE| year old male ...
"^DD",8925.1,8925.1,.04,21,69,0)
 
"^DD",8925.1,8925.1,.04,21,70,0)
Then a user who enters such a note for a patient known by the system to be
"^DD",8925.1,8925.1,.04,21,71,0)
56 years old would be presented with the text:
"^DD",8925.1,8925.1,.04,21,72,0)
 
"^DD",8925.1,8925.1,.04,21,73,0)
        Patient is a healthy 56 year old male ...
"^DD",8925.1,8925.1,.04,21,74,0)
 
"^DD",8925.1,8925.1,.04,21,75,0)
The user can then add to the text and or edit the text, including the age
"^DD",8925.1,8925.1,.04,21,76,0)
(56) of the patient.  From this point on, the patient age (56) is regular
"^DD",8925.1,8925.1,.04,21,77,0)
text and is not updated in this note.
"^DD",8925.1,8925.1,.04,21,78,0)
 
"^DD",8925.1,8925.1,.04,21,79,0)
Objects must always have uppercase names, abbreviations, and print names.
"^DD",8925.1,8925.1,.04,21,80,0)
When embedding objects in boilerplate text, users may embed any of these
"^DD",8925.1,8925.1,.04,21,81,0)
three (name, abbreviation, print name) in boilerplate text, enclosed by
"^DD",8925.1,8925.1,.04,21,82,0)
'|'s.  Objects must always be embedded in uppercase.
"^DD",8925.1,8925.1,.04,21,83,0)
 
"^DD",8925.1,8925.1,.04,21,84,0)
Objects are stored in the Document Definition File, but are not part of
"^DD",8925.1,8925.1,.04,21,85,0)
the Hierarchy.  They are accessible through the Option Create Objects.
"^DD",8925.1,8925.1,.04,21,86,0)
(They are also accessible through the Option Sort Document Definitions, by
"^DD",8925.1,8925.1,.04,21,87,0)
selecting Sort by Type and selecting Type Object.)
"^DD",8925.1,8925.1,.04,21,88,0)
 
"^DD",8925.1,8925.1,.04,21,89,0)
TIU exports a small library of objects.  Sites can also create their own.
"^DD",8925.1,8925.1,.04,21,90,0)
 
"^DD",8925.1,8925.1,.04,21,91,0)
Only an owner can edit an object and should do so only after consulting
"^DD",8925.1,8925.1,.04,21,92,0)
with others who use it.  The object must be inactive for editing.  It
"^DD",8925.1,8925.1,.04,21,93,0)
should be thoroughly tested.  See Object Status, under Status.
"^DD",8925.1,8925.1,.04,21,94,0)
 
"^DD",8925.1,8925.1,.04,21,95,0)
Entries of type Object cannot be changed to any other type.  Entries of
"^DD",8925.1,8925.1,.04,21,96,0)
type Class, Document Class, Title, or Component cannot be changed to type
"^DD",8925.1,8925.1,.04,21,97,0)
Object.
"^DD",8925.1,8925.1,.04,21,98,0)
 
"^DD",8925.1,8925.1,.04,21,99,0)
Type is a BASIC field.
"^DD",8925.1,8925.1,.04,"DT")
2970114
"^DD",8925.1,8925.1,.05,0)
PERSONAL OWNER^P200'X^VA(200,^0;5^Q
"^DD",8925.1,8925.1,.05,1,0)
^.1
"^DD",8925.1,8925.1,.05,1,1,0)
8925.1^AP
"^DD",8925.1,8925.1,.05,1,1,1)
S ^TIU(8925.1,"AP",$E(X,1,30),DA)=""
"^DD",8925.1,8925.1,.05,1,1,2)
K ^TIU(8925.1,"AP",$E(X,1,30),DA)
"^DD",8925.1,8925.1,.05,1,1,3)
Please don't delete!
"^DD",8925.1,8925.1,.05,1,1,"%D",0)
^^2^2^2950615^
"^DD",8925.1,8925.1,.05,1,1,"%D",1,0)
This regular cross reference is used for listing Document Definitions by
"^DD",8925.1,8925.1,.05,1,1,"%D",2,0)
Personal Owner.
"^DD",8925.1,8925.1,.05,1,1,"DT")
2950615
"^DD",8925.1,8925.1,.05,3)
Enter Person who can edit entry.  If owned by Class rather than Person, delete Personal Owner by typing '@' at Personal Owner prompt, and then enter Class Owner.
"^DD",8925.1,8925.1,.05,4)

"^DD",8925.1,8925.1,.05,21,0)
^^41^41^2970520^
"^DD",8925.1,8925.1,.05,21,1,0)
Document Definition Ownership has nothing to do with who can USE the entry
"^DD",8925.1,8925.1,.05,21,2,0)
to enter a document.  It determines responsibilty for the Document
"^DD",8925.1,8925.1,.05,21,3,0)
Definition itself.
"^DD",8925.1,8925.1,.05,21,4,0)
 
"^DD",8925.1,8925.1,.05,21,5,0)
An entry can be EDITED by its owner. (The Manager menu permits override of
"^DD",8925.1,8925.1,.05,21,6,0)
ownership so that Ownership can be assigned to a clinician who can then
"^DD",8925.1,8925.1,.05,21,7,0)
fill in boilerplate text with the Clinician menu, while the Manager can
"^DD",8925.1,8925.1,.05,21,8,0)
still edit the entry, since there are many fields the clinician does not
"^DD",8925.1,8925.1,.05,21,9,0)
have access to.)  Exception: the Manager menu does NOT override ownership
"^DD",8925.1,8925.1,.05,21,10,0)
of Objects or of Shared Components.  Only owners can edit Objects and
"^DD",8925.1,8925.1,.05,21,11,0)
Shared Components, regardless of menu.
"^DD",8925.1,8925.1,.05,21,12,0)
 
"^DD",8925.1,8925.1,.05,21,13,0)
If Title owner edits the boilerplate text of the Title, that person can
"^DD",8925.1,8925.1,.05,21,14,0)
edit the boilerplate text of all components of the Title as well, without
"^DD",8925.1,8925.1,.05,21,15,0)
regard to component ownership. In order to edit components individually,
"^DD",8925.1,8925.1,.05,21,16,0)
however, the user must own the component.  This allows users to assign
"^DD",8925.1,8925.1,.05,21,17,0)
ownership of components to different people, for example, for (future)
"^DD",8925.1,8925.1,.05,21,18,0)
multidisciplinary documents.
"^DD",8925.1,8925.1,.05,21,19,0)
 
"^DD",8925.1,8925.1,.05,21,20,0)
A PERSONAL OWNER is a person who uniquely owns the entry. An entry may
"^DD",8925.1,8925.1,.05,21,21,0)
have a Personal Owner OR a Class Owner but not both. When entering a
"^DD",8925.1,8925.1,.05,21,22,0)
Personal Owner, be sure to delete any existing Class Owner.
"^DD",8925.1,8925.1,.05,21,23,0)
 
"^DD",8925.1,8925.1,.05,21,24,0)
The Document Definition Utility TIUF uses the term 'Individual Owner'.
"^DD",8925.1,8925.1,.05,21,25,0)
Someone is an Individual Owner of an entry if s/he is the personal owner
"^DD",8925.1,8925.1,.05,21,26,0)
OR, if the entry is CLASS Owned, if s/he belongs to the Owner Class.
"^DD",8925.1,8925.1,.05,21,27,0)
 
"^DD",8925.1,8925.1,.05,21,28,0)
The Document Definition Utility TIUF enters the user as the Personal Owner
"^DD",8925.1,8925.1,.05,21,29,0)
if a user enters a new entry without assigning ownership. This person can
"^DD",8925.1,8925.1,.05,21,30,0)
then reassign ownership if they choose.
"^DD",8925.1,8925.1,.05,21,31,0)
 
"^DD",8925.1,8925.1,.05,21,32,0)
If the person responsible for an entry plays a role corresponding to a
"^DD",8925.1,8925.1,.05,21,33,0)
User Class, e.g. Clinical Coordinator, it may be more efficient to assign
"^DD",8925.1,8925.1,.05,21,34,0)
ownership to the class rather than to the person.  Owners are then
"^DD",8925.1,8925.1,.05,21,35,0)
automatically updated as the class is updated.
"^DD",8925.1,8925.1,.05,21,36,0)
 
"^DD",8925.1,8925.1,.05,21,37,0)
Editing privilege is affected not only by Owner but also by Status, by
"^DD",8925.1,8925.1,.05,21,38,0)
Shared, by In Use, and by menu.  Manager menus, for example, provide
"^DD",8925.1,8925.1,.05,21,39,0)
fuller editing capabilities than Clinician menus.
"^DD",8925.1,8925.1,.05,21,40,0)
 
"^DD",8925.1,8925.1,.05,21,41,0)
Personal Owner is a BASIC field.
"^DD",8925.1,8925.1,.05,"DT")
2961022
"^DD",8925.1,8925.1,.06,0)
CLASS OWNER^P8930'X^USR(8930,^0;6^Q
"^DD",8925.1,8925.1,.06,1,0)
^.1
"^DD",8925.1,8925.1,.06,1,1,0)
8925.1^AC
"^DD",8925.1,8925.1,.06,1,1,1)
S ^TIU(8925.1,"AC",$E(X,1,30),DA)=""
"^DD",8925.1,8925.1,.06,1,1,2)
K ^TIU(8925.1,"AC",$E(X,1,30),DA)
"^DD",8925.1,8925.1,.06,1,1,3)
Please don't delete!
"^DD",8925.1,8925.1,.06,1,1,"%D",0)
^^2^2^2950615^
"^DD",8925.1,8925.1,.06,1,1,"%D",1,0)
This regular cross reference is used to list Document Definitions by Class
"^DD",8925.1,8925.1,.06,1,1,"%D",2,0)
Owner.
"^DD",8925.1,8925.1,.06,1,1,"DT")
2950615
"^DD",8925.1,8925.1,.06,3)
If owned by Class rather than by Person enter User Class whose members may edit entry.  If owned by Person, delete Class Owner by entering '@' at Class Owner prompt.
"^DD",8925.1,8925.1,.06,4)

"^DD",8925.1,8925.1,.06,21,0)
^^31^31^2970227^
"^DD",8925.1,8925.1,.06,21,1,0)
Document Definition Ownership has nothing to do with who can USE the entry
"^DD",8925.1,8925.1,.06,21,2,0)
to enter a document.  It determines responsibility for the Document
"^DD",8925.1,8925.1,.06,21,3,0)
Definition itself.
"^DD",8925.1,8925.1,.06,21,4,0)
 
"^DD",8925.1,8925.1,.06,21,5,0)
An entry can be EDITED by its owner.  (The Manager menu permits override
"^DD",8925.1,8925.1,.06,21,6,0)
of ownership so that ownership can be assigned to a clinician (person with
"^DD",8925.1,8925.1,.06,21,7,0)
Clinician Menu) who can then fill in boilerplate text, while the manager
"^DD",8925.1,8925.1,.06,21,8,0)
can still edit the entry, since there are many fields the clinician does
"^DD",8925.1,8925.1,.06,21,9,0)
not have access to.)  Exception: the Manager menu does NOT override
"^DD",8925.1,8925.1,.06,21,10,0)
ownership of Objects or of Shared Components.  These can ONLY be edited by
"^DD",8925.1,8925.1,.06,21,11,0)
an owner, regardless of menu.
"^DD",8925.1,8925.1,.06,21,12,0)
 
"^DD",8925.1,8925.1,.06,21,13,0)
If a Title owner edits the boilerplate text of the Title, that person can
"^DD",8925.1,8925.1,.06,21,14,0)
edit the boilerplate text of all components of the title as well, without
"^DD",8925.1,8925.1,.06,21,15,0)
regard to component ownership.  However, the user must own the component
"^DD",8925.1,8925.1,.06,21,16,0)
in order to edit it individually, permitting separate ownership of
"^DD",8925.1,8925.1,.06,21,17,0)
components.
"^DD",8925.1,8925.1,.06,21,18,0)
 
"^DD",8925.1,8925.1,.06,21,19,0)
A Class Owner is a User Class from the USR CLASS file whose members may
"^DD",8925.1,8925.1,.06,21,20,0)
edit the entry.  An entry may have a Personal OR a Class Owner (not both).
"^DD",8925.1,8925.1,.06,21,21,0)
The Document Definition Utility TIUF does not prompt for Class Owner if
"^DD",8925.1,8925.1,.06,21,22,0)
the entry has a Personal Owner.  To change to Class Owner, first delete
"^DD",8925.1,8925.1,.06,21,23,0)
the Personal Owner by entering '@' at the Personal Owner prompt.
"^DD",8925.1,8925.1,.06,21,24,0)
 
"^DD",8925.1,8925.1,.06,21,25,0)
For new entries, users are prompted to enter the Class Owner Clinical
"^DD",8925.1,8925.1,.06,21,26,0)
Coordinator as the default.  To enter a different Class Owner, enter the
"^DD",8925.1,8925.1,.06,21,27,0)
appropriate class after the //'s.  If there are no //'s and the
"^DD",8925.1,8925.1,.06,21,28,0)
Replace...with editor is being used, enter ... to replace the whole
"^DD",8925.1,8925.1,.06,21,29,0)
class and then enter the appropriate class.
"^DD",8925.1,8925.1,.06,21,30,0)
 
"^DD",8925.1,8925.1,.06,21,31,0)
Class Owner is a BASIC field.
"^DD",8925.1,8925.1,.06,"DT")
2961022
"^DD",8925.1,8925.1,.07,0)
STATUS^*P8925.6'X^TIU(8925.6,^0;7^K:'$G(TIUFPRIV) X Q:'$D(X)  S DIC("S")="I 1 X $$STATSCRN^TIUFLF5" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",8925.1,8925.1,.07,1,0)
^.1
"^DD",8925.1,8925.1,.07,1,1,0)
8925.1^AS
"^DD",8925.1,8925.1,.07,1,1,1)
S ^TIU(8925.1,"AS",$E(X,1,30),DA)=""
"^DD",8925.1,8925.1,.07,1,1,2)
K ^TIU(8925.1,"AS",$E(X,1,30),DA)
"^DD",8925.1,8925.1,.07,1,1,3)
Please don't delete!
"^DD",8925.1,8925.1,.07,1,1,"%D",0)
^^2^2^2950615^
"^DD",8925.1,8925.1,.07,1,1,"%D",1,0)
This regular cross reference is used to list Document Definitions by
"^DD",8925.1,8925.1,.07,1,1,"%D",2,0)
Status.
"^DD",8925.1,8925.1,.07,1,1,"DT")
2950615
"^DD",8925.1,8925.1,.07,3)
 Documents can be entered on ACTIVE Titles.  Only the Owner can enter a document on TEST Titles.  Only INACTIVE Document Definitions can be edited.
"^DD",8925.1,8925.1,.07,4)

"^DD",8925.1,8925.1,.07,12)
STATSCRN limits Status to Status file entries that are appropriate for Document Definitions: Active, Inactive, and Test.
"^DD",8925.1,8925.1,.07,12.1)
S DIC("S")="I 1 X $$STATSCRN^TIUFLF5"
"^DD",8925.1,8925.1,.07,21,0)
^^176^176^2970521^^
"^DD",8925.1,8925.1,.07,21,1,0)
Status provides a way of making Document Definitions 'Offline' to
"^DD",8925.1,8925.1,.07,21,2,0)
documents.  Document Definitions need to be 'Offline' if they are new and
"^DD",8925.1,8925.1,.07,21,3,0)
not ready for use, if they are being edited, or if they are retired from
"^DD",8925.1,8925.1,.07,21,4,0)
further use.
"^DD",8925.1,8925.1,.07,21,5,0)
 
"^DD",8925.1,8925.1,.07,21,6,0)
Status is limited to those Statuses in the Status File which apply to
"^DD",8925.1,8925.1,.07,21,7,0)
Document Definitions: Inactive, Test, and Active. The Document Definition
"^DD",8925.1,8925.1,.07,21,8,0)
Utility TIUF further limits Statuses to those appropriate for the entry
"^DD",8925.1,8925.1,.07,21,9,0)
Type (see below), limits the Status of entries with Inactive ancestors to
"^DD",8925.1,8925.1,.07,21,10,0)
Inactive, and limits the Status of faulty entries to Inactive.
"^DD",8925.1,8925.1,.07,21,11,0)
 
"^DD",8925.1,8925.1,.07,21,12,0)
Status applies to all Document Definitions, but its meaning and possible
"^DD",8925.1,8925.1,.07,21,13,0)
values vary somewhat with the Document Definition Type.  Exception: Shared
"^DD",8925.1,8925.1,.07,21,14,0)
Components: See COMPONENT STATUS, below.
"^DD",8925.1,8925.1,.07,21,15,0)
 
"^DD",8925.1,8925.1,.07,21,16,0)
Status is a BASIC field.
"^DD",8925.1,8925.1,.07,21,17,0)
 
"^DD",8925.1,8925.1,.07,21,18,0)
                                TITLE STATUS
"^DD",8925.1,8925.1,.07,21,19,0)
 
"^DD",8925.1,8925.1,.07,21,20,0)
Status has its most basic meaning for Titles [Document Definitions of Type
"^DD",8925.1,8925.1,.07,21,21,0)
Title]:
"^DD",8925.1,8925.1,.07,21,22,0)
 
"^DD",8925.1,8925.1,.07,21,23,0)
A Title can have Status Inactive, Test, or Active.  If it has Status
"^DD",8925.1,8925.1,.07,21,24,0)
Inactive, it cannot be used to enter documents (EXCEPT through the
"^DD",8925.1,8925.1,.07,21,25,0)
Try Action, which deletes the document when done). If it has Status
"^DD",8925.1,8925.1,.07,21,26,0)
Test, it can be used to enter documents only by its Owner. Titles should
"^DD",8925.1,8925.1,.07,21,27,0)
be tested (and Tried) using TEST PATIENTS ONLY.  If a Title has Status
"^DD",8925.1,8925.1,.07,21,28,0)
Active, it can be used to enter documents by any one with access and
"^DD",8925.1,8925.1,.07,21,29,0)
authorization.
"^DD",8925.1,8925.1,.07,21,30,0)
 
"^DD",8925.1,8925.1,.07,21,31,0)
                              *************** 
"^DD",8925.1,8925.1,.07,21,32,0)
NOTE on Availability: 
"^DD",8925.1,8925.1,.07,21,33,0)
Although Status affects availability for entering documents, there are
"^DD",8925.1,8925.1,.07,21,34,0)
other factors which also affect availability: A Document Definition is not
"^DD",8925.1,8925.1,.07,21,35,0)
available to a given user for entering documents (excepting the Document
"^DD",8925.1,8925.1,.07,21,36,0)
Definition Utility Try Action) unless all of the following 3 criteria are
"^DD",8925.1,8925.1,.07,21,37,0)
met:
"^DD",8925.1,8925.1,.07,21,38,0)
 
"^DD",8925.1,8925.1,.07,21,39,0)
  1) It is a Document Definition of Type Title.
"^DD",8925.1,8925.1,.07,21,40,0)
 
"^DD",8925.1,8925.1,.07,21,41,0)
  2) It has Status Active or Test.  If it has Status Test, the user
"^DD",8925.1,8925.1,.07,21,42,0)
entering a document must own the Title.
"^DD",8925.1,8925.1,.07,21,43,0)
 
"^DD",8925.1,8925.1,.07,21,44,0)
  3) If authorization for using the Title to enter documents is restricted
"^DD",8925.1,8925.1,.07,21,45,0)
by Business Rules, the user must be a member of the authorized user
"^DD",8925.1,8925.1,.07,21,46,0)
class.
"^DD",8925.1,8925.1,.07,21,47,0)
 
"^DD",8925.1,8925.1,.07,21,48,0)
Unless these criteria are all met, users trying to enter documents will
"^DD",8925.1,8925.1,.07,21,49,0)
not SEE the Document Definition.  Therefore it is wise to warn users when
"^DD",8925.1,8925.1,.07,21,50,0)
taking definitions offline for edit, and/or to do so at nonpeak hours for
"^DD",8925.1,8925.1,.07,21,51,0)
entering documents.
"^DD",8925.1,8925.1,.07,21,52,0)
                             *******************
"^DD",8925.1,8925.1,.07,21,53,0)
 
"^DD",8925.1,8925.1,.07,21,54,0)
When being upgraded to Status Active or Test, a Title is examined for
"^DD",8925.1,8925.1,.07,21,55,0)
rudimentary completeness and must be judged OK before the upgrade takes
"^DD",8925.1,8925.1,.07,21,56,0)
place.  If desired, users can perform the same examination themselves by
"^DD",8925.1,8925.1,.07,21,57,0)
selecting action TRY.  For Titles, Action TRY also permits the user to
"^DD",8925.1,8925.1,.07,21,58,0)
enter a document on the entry.  The document is deleted immediately after
"^DD",8925.1,8925.1,.07,21,59,0)
the trial.
"^DD",8925.1,8925.1,.07,21,60,0)
 
"^DD",8925.1,8925.1,.07,21,61,0)
Availability for entering documents is the central meaning of Status.
"^DD",8925.1,8925.1,.07,21,62,0)
However, Status also controls edit/deletion of Document Definitions:  A
"^DD",8925.1,8925.1,.07,21,63,0)
Title can be edited ONLY if it has Status Inactive, ensuring that no one
"^DD",8925.1,8925.1,.07,21,64,0)
is using it to enter a document while its behavior is changing.  Titles
"^DD",8925.1,8925.1,.07,21,65,0)
can be deleted only with Status Inactive.
"^DD",8925.1,8925.1,.07,21,66,0)
 
"^DD",8925.1,8925.1,.07,21,67,0)
NOTE: Although Status affects Editing ability, it is not the only factor
"^DD",8925.1,8925.1,.07,21,68,0)
affecting editing:  If an entry is already IN USE by documents,
"^DD",8925.1,8925.1,.07,21,69,0)
editing/deletion is restricted to aspects which will not harm existing
"^DD",8925.1,8925.1,.07,21,70,0)
TIU documents.
"^DD",8925.1,8925.1,.07,21,71,0)
 
"^DD",8925.1,8925.1,.07,21,72,0)
Components under a Title have the same status as the Title: When a Title's
"^DD",8925.1,8925.1,.07,21,73,0)
status is changed, the statuses of its descendant Components are
"^DD",8925.1,8925.1,.07,21,74,0)
automatically changed with it. (Shared Components are an exception: see
"^DD",8925.1,8925.1,.07,21,75,0)
COMPONENT STATUS, below.)
"^DD",8925.1,8925.1,.07,21,76,0)
 
"^DD",8925.1,8925.1,.07,21,77,0)
                       CLASS/DOCUMENT CLASS STATUS
"^DD",8925.1,8925.1,.07,21,78,0)
 
"^DD",8925.1,8925.1,.07,21,79,0)
A Document Definition of Type Class or Document Class can have Status
"^DD",8925.1,8925.1,.07,21,80,0)
Inactive or Active.  
"^DD",8925.1,8925.1,.07,21,81,0)
 
"^DD",8925.1,8925.1,.07,21,82,0)
Basics for a Class or Document Class cannot be edited (except for Owner
"^DD",8925.1,8925.1,.07,21,83,0)
and Status) unless it is Inactive.  Since Inactivating a Class/Document
"^DD",8925.1,8925.1,.07,21,84,0)
Class automatically inactivates its descendants, this ensures that all
"^DD",8925.1,8925.1,.07,21,85,0)
Titles which inherit behavior from it are neither Active nor Test, and are
"^DD",8925.1,8925.1,.07,21,86,0)
thus 'Offline' while inherited behavior is edited.
"^DD",8925.1,8925.1,.07,21,87,0)
 
"^DD",8925.1,8925.1,.07,21,88,0)
In contrast to Basics, the ability to add/edit ITEMS of a Class/Document
"^DD",8925.1,8925.1,.07,21,89,0)
Class depends on the Status of the item, not the parent: it is NOT
"^DD",8925.1,8925.1,.07,21,90,0)
necessary to Inactivate a Class such as Progress Notes in order to
"^DD",8925.1,8925.1,.07,21,91,0)
edit/add items.
"^DD",8925.1,8925.1,.07,21,92,0)
 
"^DD",8925.1,8925.1,.07,21,93,0)
Activating a Class/Document Class differs from Inactivating the
"^DD",8925.1,8925.1,.07,21,94,0)
Class/Document Class: When a Class/Document Class is ACTIVATED, its
"^DD",8925.1,8925.1,.07,21,95,0)
descendants may have any Status which their Type permits: they are not
"^DD",8925.1,8925.1,.07,21,96,0)
REQUIRED to be Active. Hence, they are not automatically Activated when
"^DD",8925.1,8925.1,.07,21,97,0)
the parent is Activated.
"^DD",8925.1,8925.1,.07,21,98,0)
 
"^DD",8925.1,8925.1,.07,21,99,0)
                            COMPONENT STATUS
"^DD",8925.1,8925.1,.07,21,100,0)
 
"^DD",8925.1,8925.1,.07,21,101,0)
A Document Definition of Type Component has the same status as its parent:
"^DD",8925.1,8925.1,.07,21,102,0)
Its status can be changed only by changing the Status of its Parent, if it
"^DD",8925.1,8925.1,.07,21,103,0)
has one. Components without parents are always Inactive.
"^DD",8925.1,8925.1,.07,21,104,0)
 
"^DD",8925.1,8925.1,.07,21,105,0)
NOTE: The above implies that Test or Active Titles cannot have Inactive
"^DD",8925.1,8925.1,.07,21,106,0)
Components.  In other words, Inactivating a Component is NOT a way of
"^DD",8925.1,8925.1,.07,21,107,0)
retiring it.  If a Component is no longer a useful section of a Title, it
"^DD",8925.1,8925.1,.07,21,108,0)
should be edited so as to make it useful, or it should be deleted AS AN
"^DD",8925.1,8925.1,.07,21,109,0)
ITEM from the Title of which it is a part.  As with all retired Document
"^DD",8925.1,8925.1,.07,21,110,0)
Definitions, it should NOT be deleted FROM THE FILE if it has been used by
"^DD",8925.1,8925.1,.07,21,111,0)
documents.
"^DD",8925.1,8925.1,.07,21,112,0)
 
"^DD",8925.1,8925.1,.07,21,113,0)
Components can be edited only if they have status Inactive. This ensures
"^DD",8925.1,8925.1,.07,21,114,0)
that all Titles using them are offline while the components are being
"^DD",8925.1,8925.1,.07,21,115,0)
edited.
"^DD",8925.1,8925.1,.07,21,116,0)
 
"^DD",8925.1,8925.1,.07,21,117,0)
Shared Components are a special case since they can have multiple parents.
"^DD",8925.1,8925.1,.07,21,118,0)
They DO NOT HAVE A STATUS. They can be edited only when all parent Titles
"^DD",8925.1,8925.1,.07,21,119,0)
have Status Inactive.  (The Detailed Display screen shows parents.)  This
"^DD",8925.1,8925.1,.07,21,120,0)
ensures that all parent Titles of Shared Components are offline while the
"^DD",8925.1,8925.1,.07,21,121,0)
component is being edited.  Edit of Shared Components is permitted only
"^DD",8925.1,8925.1,.07,21,122,0)
through the Option Sort Document Definitions.
"^DD",8925.1,8925.1,.07,21,123,0)
 
"^DD",8925.1,8925.1,.07,21,124,0)
Edit of Shared Components is severely restricted by Ownership, since they
"^DD",8925.1,8925.1,.07,21,125,0)
may be used multiple times and across the site.  Even an Inactive Status
"^DD",8925.1,8925.1,.07,21,126,0)
does not permit a manager (person with Manager menu) to override ownership
"^DD",8925.1,8925.1,.07,21,127,0)
and edit a Shared Component they don't own.  See Shared Components, under
"^DD",8925.1,8925.1,.07,21,128,0)
Description of Type.  See Description of Shared.
"^DD",8925.1,8925.1,.07,21,129,0)
 
"^DD",8925.1,8925.1,.07,21,130,0)
                               OBJECT STATUS
"^DD",8925.1,8925.1,.07,21,131,0)
 
"^DD",8925.1,8925.1,.07,21,132,0)
Document Definitions of Type Object have Status Inactive or Active.
"^DD",8925.1,8925.1,.07,21,133,0)
 
"^DD",8925.1,8925.1,.07,21,134,0)
Only ACTIVE objects function.  That is, if a user enters a document on a
"^DD",8925.1,8925.1,.07,21,135,0)
Title with boilerplate text containing an inactive object, the object
"^DD",8925.1,8925.1,.07,21,136,0)
doesn't do anything; the user sees the name of the object and an error
"^DD",8925.1,8925.1,.07,21,137,0)
message in place of the object data.
"^DD",8925.1,8925.1,.07,21,138,0)
 
"^DD",8925.1,8925.1,.07,21,139,0)
Only ACTIVE objects should be embedded in boilerplate text.  Exception:
"^DD",8925.1,8925.1,.07,21,140,0)
owners who are creating/editing objects.  Others should NOT embed inactive
"^DD",8925.1,8925.1,.07,21,141,0)
objects in boilerplate text since they may not be ready for use and since
"^DD",8925.1,8925.1,.07,21,142,0)
they do not function when users enter documents against them. Titles whose
"^DD",8925.1,8925.1,.07,21,143,0)
boilerplate text contains inactive objects cannot be activated.  (This
"^DD",8925.1,8925.1,.07,21,144,0)
does NOT imply that active titles never have inactive objects embedded in
"^DD",8925.1,8925.1,.07,21,145,0)
them since users can, after a warning, inactivate objects even when they
"^DD",8925.1,8925.1,.07,21,146,0)
are embedded in active titles.)
"^DD",8925.1,8925.1,.07,21,147,0)
 
"^DD",8925.1,8925.1,.07,21,148,0)
Only INACTIVE objects can be edited (and only by an owner).  Only an owner
"^DD",8925.1,8925.1,.07,21,149,0)
can activate/inactivate an object.  (Exception: if a user owns an object
"^DD",8925.1,8925.1,.07,21,150,0)
and edits the owner to someone else, the user is not prevented from going
"^DD",8925.1,8925.1,.07,21,151,0)
on to edit the status in the same edit session since they WERE the owner a
"^DD",8925.1,8925.1,.07,21,152,0)
few seconds ago.)  Active objects are assumed to be ready for use in any
"^DD",8925.1,8925.1,.07,21,153,0)
boilerplate text.
"^DD",8925.1,8925.1,.07,21,154,0)
 
"^DD",8925.1,8925.1,.07,21,155,0)
Since the owner is essentially caretaker of the object for the entire
"^DD",8925.1,8925.1,.07,21,156,0)
site, the owner should consult with all who use it before editing it.  An
"^DD",8925.1,8925.1,.07,21,157,0)
object can be tested by embedding it in the boilerplate text of a Title
"^DD",8925.1,8925.1,.07,21,158,0)
and selecting action Try for the Title.  It need not have status Active
"^DD",8925.1,8925.1,.07,21,159,0)
for this testing (and SHOULD not have status Active until testing is
"^DD",8925.1,8925.1,.07,21,160,0)
complete).  Owners who inactivate objects for editing should make SURE to
"^DD",8925.1,8925.1,.07,21,161,0)
reactivate them if they are being used.
"^DD",8925.1,8925.1,.07,21,162,0)
 
"^DD",8925.1,8925.1,.07,21,163,0)
Sites should either inactivate relevant Titles before editing objects or
"^DD",8925.1,8925.1,.07,21,164,0)
edit objects only when users are not likely to be ENTERING documents since
"^DD",8925.1,8925.1,.07,21,165,0)
Inactive objects do not function.
"^DD",8925.1,8925.1,.07,21,166,0)
 
"^DD",8925.1,8925.1,.07,21,167,0)
If a site changes the name or behavior of an Object, it is up to the SITE
"^DD",8925.1,8925.1,.07,21,168,0)
to change the name wherever it has already been embedded in Boilerplate
"^DD",8925.1,8925.1,.07,21,169,0)
Text, and to inform users of the change.
"^DD",8925.1,8925.1,.07,21,170,0)
 
"^DD",8925.1,8925.1,.07,21,171,0)
An object which is no longer wanted for future documents can be removed
"^DD",8925.1,8925.1,.07,21,172,0)
from the boilerplate text of all Titles and Components and then deleted
"^DD",8925.1,8925.1,.07,21,173,0)
from file 8925.1.  Only an owner can delete it.  All of the documents that
"^DD",8925.1,8925.1,.07,21,174,0)
used it have already got it in hard words so there is no need to keep it
"^DD",8925.1,8925.1,.07,21,175,0)
for their sake.  Old Objects should be edited so they are useful or
"^DD",8925.1,8925.1,.07,21,176,0)
deleted, not kept around forever as Inactive.
"^DD",8925.1,8925.1,.07,"DT")
2961022
"^DD",8925.1,8925.1,.08,0)
IN USE^CJ6^^ ; ^S X=$S($L($T(^TIUFLF)):$$DDEFUSED^TIUFLF(D0),1:"?")
"^DD",8925.1,8925.1,.08,.1)

"^DD",8925.1,8925.1,.08,9)
^
"^DD",8925.1,8925.1,.08,9.01)

"^DD",8925.1,8925.1,.08,9.1)
S X=$S($L($T(^TIUFLF)):$$DDEFUSED^TIUFLF(D0),1:"?")
"^DD",8925.1,8925.1,.08,21,0)
^^55^55^2970125^
"^DD",8925.1,8925.1,.08,21,1,0)
IN USE applies to all entries except those of Type Object.  It cannot be
"^DD",8925.1,8925.1,.08,21,2,0)
edited since it gets its value automatically.
"^DD",8925.1,8925.1,.08,21,3,0)
 
"^DD",8925.1,8925.1,.08,21,4,0)
IN USE may have values 'Yes', 'No', or '?'.
"^DD",8925.1,8925.1,.08,21,5,0)
 
"^DD",8925.1,8925.1,.08,21,6,0)
A Document Definition of Type Title or Component is In Use (Yes) if there
"^DD",8925.1,8925.1,.08,21,7,0)
are entries IN THE TIU DOCUMENT file which store it as their Document
"^DD",8925.1,8925.1,.08,21,8,0)
Definition.  If not, it is NOT used (No). 
"^DD",8925.1,8925.1,.08,21,9,0)
 
"^DD",8925.1,8925.1,.08,21,10,0)
NOTE: It is possible for Document Definitions to be used by documents in
"^DD",8925.1,8925.1,.08,21,11,0)
files other than the TIU Document file and still be NOT In Use since In
"^DD",8925.1,8925.1,.08,21,12,0)
Use means in use by documents in the TIU Document Definition file. See
"^DD",8925.1,8925.1,.08,21,13,0)
Warning, below.
"^DD",8925.1,8925.1,.08,21,14,0)
 
"^DD",8925.1,8925.1,.08,21,15,0)
A Document Definition of Type Class or Document Class is In Use (Yes) if
"^DD",8925.1,8925.1,.08,21,16,0)
it has children of Type Title which are In Use. That is, it is Used by
"^DD",8925.1,8925.1,.08,21,17,0)
Documents (Yes) if there are entries in the TIU Document file which
"^DD",8925.1,8925.1,.08,21,18,0)
inherit behavior from it. If not, it is NOT used (No).
"^DD",8925.1,8925.1,.08,21,19,0)
 
"^DD",8925.1,8925.1,.08,21,20,0)
IN USE has value '?' for a Document Definition File entry if routine
"^DD",8925.1,8925.1,.08,21,21,0)
TIUFLF is missing or if the program encounters a nonexistent item and the
"^DD",8925.1,8925.1,.08,21,22,0)
entry is not In Use so far as the check has been able to go.
"^DD",8925.1,8925.1,.08,21,23,0)
 
"^DD",8925.1,8925.1,.08,21,24,0)
Note: Since Shared Components can be items of more than one Title, a
"^DD",8925.1,8925.1,.08,21,25,0)
Shared Component may be In Use even when a particular parent Title is
"^DD",8925.1,8925.1,.08,21,26,0)
NOT In Use.  This simply means that it is also a Component of another
"^DD",8925.1,8925.1,.08,21,27,0)
Title which IS In Use.
"^DD",8925.1,8925.1,.08,21,28,0)
 
"^DD",8925.1,8925.1,.08,21,29,0)
If IN USE has the explicit value 'No' for a particular Document Definition
"^DD",8925.1,8925.1,.08,21,30,0)
entry, the entry can be deleted by the Owner without harming documents IN
"^DD",8925.1,8925.1,.08,21,31,0)
TIU DOCUMENT FILE 8925. Deleting it will, however, orphan any descendant
"^DD",8925.1,8925.1,.08,21,32,0)
Document Definitions.
"^DD",8925.1,8925.1,.08,21,33,0)
 
"^DD",8925.1,8925.1,.08,21,34,0)
WARNING: If a site is using TIU to upload documents into a file other than
"^DD",8925.1,8925.1,.08,21,35,0)
the TIU Document file, it may create Document Definition entries to store
"^DD",8925.1,8925.1,.08,21,36,0)
upload information.  For example, it may create an Operative Reports title
"^DD",8925.1,8925.1,.08,21,37,0)
containing instructions for uploading documents into the Surgery file.
"^DD",8925.1,8925.1,.08,21,38,0)
These document definitions will be orphans and will be NOT In Use, since
"^DD",8925.1,8925.1,.08,21,39,0)
documents using them are not stored in the TIU Document file. They must
"^DD",8925.1,8925.1,.08,21,40,0)
NOT be deleted from the Document Definition file.
"^DD",8925.1,8925.1,.08,21,41,0)
 
"^DD",8925.1,8925.1,.08,21,42,0)
Note: Deleting Objects will not harm existing documents, but WILL HARM
"^DD",8925.1,8925.1,.08,21,43,0)
future documents if the Object is embedded in existing Document Definition
"^DD",8925.1,8925.1,.08,21,44,0)
Boilerplate Text.
"^DD",8925.1,8925.1,.08,21,45,0)
 
"^DD",8925.1,8925.1,.08,21,46,0)
If IN USE has value 'Yes' or '?', the Document Definition Utility TIUF
"^DD",8925.1,8925.1,.08,21,47,0)
does not permit the entry to be deleted. Deleting the entry would cause
"^DD",8925.1,8925.1,.08,21,48,0)
documents in file 8925 not to function.  This is true even if the entry
"^DD",8925.1,8925.1,.08,21,49,0)
has status 'Inactive' and documents are no longer being written on the
"^DD",8925.1,8925.1,.08,21,50,0)
entry.
"^DD",8925.1,8925.1,.08,21,51,0)
 
"^DD",8925.1,8925.1,.08,21,52,0)
Technical Note: A Document Definition of Type Title or Component is IN
"^DD",8925.1,8925.1,.08,21,53,0)
USE if and only if it appears in file 8925's 'B' Cross Reference.
"^DD",8925.1,8925.1,.08,21,54,0)
 
"^DD",8925.1,8925.1,.08,21,55,0)
In Use is a BASIC field.
"^DD",8925.1,8925.1,.08,"DT")
2960618
"^DD",8925.1,8925.1,.1,0)
SHARED^SX^1:YES;0:NO;^0;10^K:'$G(TIUFPRIV) X
"^DD",8925.1,8925.1,.1,.1)
SHARED COMPONENT
"^DD",8925.1,8925.1,.1,3)
Enter Y for YES if this Component is intended for broad use across the site, i.e., it can be used more than once, and need not be owned by the user.
"^DD",8925.1,8925.1,.1,21,0)
^^48^48^2970220^
"^DD",8925.1,8925.1,.1,21,1,0)
Applies to entries of Type Component only.
"^DD",8925.1,8925.1,.1,21,2,0)
 
"^DD",8925.1,8925.1,.1,21,3,0)
Document Definitions of Type Component may be designated SHARED by Owners
"^DD",8925.1,8925.1,.1,21,4,0)
who have the Manager menu. This means the Component can be an item under
"^DD",8925.1,8925.1,.1,21,5,0)
multiple parents, and any user who owns a Title can add it as an item.
"^DD",8925.1,8925.1,.1,21,6,0)
 
"^DD",8925.1,8925.1,.1,21,7,0)
Shared Components are the ONLY members of the Document Definition
"^DD",8925.1,8925.1,.1,21,8,0)
hierarchy which can appear in more than one place in the hierarchy.
"^DD",8925.1,8925.1,.1,21,9,0)
(Objects can be used in multiple entries, but are not members of the
"^DD",8925.1,8925.1,.1,21,10,0)
hierarchy.)
"^DD",8925.1,8925.1,.1,21,11,0)
 
"^DD",8925.1,8925.1,.1,21,12,0)
Shared Components are intended for broad use across the site.  An example
"^DD",8925.1,8925.1,.1,21,13,0)
might be a Privacy Act Component.  Since a Shared Component may be used in
"^DD",8925.1,8925.1,.1,21,14,0)
many different Document Definitions, its Owner is essentially caretaker
"^DD",8925.1,8925.1,.1,21,15,0)
for it, hospital wide, and must take into account all users before editing
"^DD",8925.1,8925.1,.1,21,16,0)
it.  Users who disagree with a proposed change can opt to create and use
"^DD",8925.1,8925.1,.1,21,17,0)
their own copy instead of using the Shared Component.
"^DD",8925.1,8925.1,.1,21,18,0)
 
"^DD",8925.1,8925.1,.1,21,19,0)
Parents of a Shared Component are listed in the Detailed Display Screen.
"^DD",8925.1,8925.1,.1,21,20,0)
 
"^DD",8925.1,8925.1,.1,21,21,0)
Shared Field values are 1 for YES and 0 for NO, with a default value of
"^DD",8925.1,8925.1,.1,21,22,0)
0 for NO if the field is empty.
"^DD",8925.1,8925.1,.1,21,23,0)
 
"^DD",8925.1,8925.1,.1,21,24,0)
An entry may not be designated Shared unless it is of Type Component. Only
"^DD",8925.1,8925.1,.1,21,25,0)
a Manager (person with Manager menu) and only an Owner can designate a
"^DD",8925.1,8925.1,.1,21,26,0)
Component as Shared. Only an OWNER can edit it.  (Normally Managers can
"^DD",8925.1,8925.1,.1,21,27,0)
override ownership and edit entries.  Manager Options do NOT override
"^DD",8925.1,8925.1,.1,21,28,0)
Ownership for editing Shared Components).  Shared Components can only be
"^DD",8925.1,8925.1,.1,21,29,0)
edited from the Sort Document Definitions Option.
"^DD",8925.1,8925.1,.1,21,30,0)
 
"^DD",8925.1,8925.1,.1,21,31,0)
Shared Components cannot be deleted.  If they do not have multiple
"^DD",8925.1,8925.1,.1,21,32,0)
parents, they can, however, be edited to NOT shared and THEN deleted,
"^DD",8925.1,8925.1,.1,21,33,0)
assuming they are not In Use by documents and the parent is Inactive.
"^DD",8925.1,8925.1,.1,21,34,0)
 
"^DD",8925.1,8925.1,.1,21,35,0)
Shared Components do NOT HAVE a Status.  They can be edited only if all
"^DD",8925.1,8925.1,.1,21,36,0)
parent Titles are Inactive.  This ensures that parent Titles are offline
"^DD",8925.1,8925.1,.1,21,37,0)
for entering documents while their components are being edited.  Parents
"^DD",8925.1,8925.1,.1,21,38,0)
are listed on the Detailed Display Screen.
"^DD",8925.1,8925.1,.1,21,39,0)
 
"^DD",8925.1,8925.1,.1,21,40,0)
If a Shared Component has subcomponents, they are automatically Shared,
"^DD",8925.1,8925.1,.1,21,41,0)
since they, with their parents, can be used in more than one place in the
"^DD",8925.1,8925.1,.1,21,42,0)
hierarchy.
"^DD",8925.1,8925.1,.1,21,43,0)
 
"^DD",8925.1,8925.1,.1,21,44,0)
Sharing of Document Definitions other than Components is not permitted
"^DD",8925.1,8925.1,.1,21,45,0)
because it unduly restricts the owner's right to edit/delete the Document
"^DD",8925.1,8925.1,.1,21,46,0)
Definition and adds undue complexity to the Hierarchy.
"^DD",8925.1,8925.1,.1,21,47,0)
 
"^DD",8925.1,8925.1,.1,21,48,0)
Shared is a BASIC field.
"^DD",8925.1,8925.1,.1,"DT")
2961022
"^DD",8925.1,8925.1,.11,0)
ORPHAN^CJ8^^ ; ^S X=$S($L($T(^TIUFLF4)):$$ORPHAN^TIUFLF4(D0,^TIU(8925.1,D0,0)),1:"?")
"^DD",8925.1,8925.1,.11,9)
^
"^DD",8925.1,8925.1,.11,9.01)

"^DD",8925.1,8925.1,.11,9.1)
S X=$S($L($T(^TIUFLF4)):$$ORPHAN^TIUFLF4(D0,^TIU(8925.1,D0,0)),1:"?")
"^DD",8925.1,8925.1,.11,21,0)
^^57^57^2970220^
"^DD",8925.1,8925.1,.11,21,1,0)
Orphan applies to Document Definitions of all Types except Objects
"^DD",8925.1,8925.1,.11,21,2,0)
and Shared Components.
"^DD",8925.1,8925.1,.11,21,3,0)
 
"^DD",8925.1,8925.1,.11,21,4,0)
Orphan is not editable since it gets its value automatically.
"^DD",8925.1,8925.1,.11,21,5,0)
 
"^DD",8925.1,8925.1,.11,21,6,0)
Document Definitions are Orphans if they do not belong to the Clinical
"^DD",8925.1,8925.1,.11,21,7,0)
Documents Hierarchy, i.e., they cannot trace their ancestry all the way
"^DD",8925.1,8925.1,.11,21,8,0)
back to the Class Clinical Documents.  If an Orphan is not In Use, it
"^DD",8925.1,8925.1,.11,21,9,0)
may be "dead wood" which should be deleted from the file.  Orphans not In
"^DD",8925.1,8925.1,.11,21,10,0)
Use which SHOULD NOT BE DELETED include those being kept for later
"^DD",8925.1,8925.1,.11,21,11,0)
possible use, those temporarily orphaned in order to move them around in
"^DD",8925.1,8925.1,.11,21,12,0)
the hierarchy, and those used for uploading documents into files other
"^DD",8925.1,8925.1,.11,21,13,0)
than the TIU Document file.
"^DD",8925.1,8925.1,.11,21,14,0)
 
"^DD",8925.1,8925.1,.11,21,15,0)
(Orphan does not apply to Objects since they don't ever belong to the
"^DD",8925.1,8925.1,.11,21,16,0)
hierarchy.  Orphan does not apply to Shared Components since they may
"^DD",8925.1,8925.1,.11,21,17,0)
have more than one line of ancestry.)
"^DD",8925.1,8925.1,.11,21,18,0)
 
"^DD",8925.1,8925.1,.11,21,19,0)
Warning:  The DOCUMENT DEFINITION file may contain orphan entries which
"^DD",8925.1,8925.1,.11,21,20,0)
are not used by documents in the TIU Document file but which contain
"^DD",8925.1,8925.1,.11,21,21,0)
upload instructions for storing documents somewhere else.  For example, if
"^DD",8925.1,8925.1,.11,21,22,0)
a site is uploading Operative Reports into the Surgery file, there may be
"^DD",8925.1,8925.1,.11,21,23,0)
an orphan Operative Report Document Definition in the DOCUMENT DEFINITION
"^DD",8925.1,8925.1,.11,21,24,0)
file.  These should NOT be deleted just because they are orphans.  Such
"^DD",8925.1,8925.1,.11,21,25,0)
entries can be identified by edit/viewing them through the Sort Option
"^DD",8925.1,8925.1,.11,21,26,0)
and looking for Upload fields.
"^DD",8925.1,8925.1,.11,21,27,0)
 
"^DD",8925.1,8925.1,.11,21,28,0)
NOTE: Orphan as used in the Document Definition Utility TIUF does NOT mean
"^DD",8925.1,8925.1,.11,21,29,0)
having no parents.  For example, suppose Exceptional Day Pass Note has
"^DD",8925.1,8925.1,.11,21,30,0)
parent Day Pass Note.  If Day Pass Note has no parent, then Exceptional
"^DD",8925.1,8925.1,.11,21,31,0)
Day Pass Note cannot trace its ancestry back to Clinical Documents and is
"^DD",8925.1,8925.1,.11,21,32,0)
an Orphan even though it has a parent.
"^DD",8925.1,8925.1,.11,21,33,0)
 
"^DD",8925.1,8925.1,.11,21,34,0)
Orphans are invisible to TIU users and cannot be used to enter documents.
"^DD",8925.1,8925.1,.11,21,35,0)
 
"^DD",8925.1,8925.1,.11,21,36,0)
When an item under a non-orphan is deleted as an item, it becomes an
"^DD",8925.1,8925.1,.11,21,37,0)
orphan along with all of its descendants.  TIUF, the Document Definition
"^DD",8925.1,8925.1,.11,21,38,0)
Utility, does not permit non-orphan Titles to become orphaned if they are
"^DD",8925.1,8925.1,.11,21,39,0)
In Use.  Titles already used but being retired from further use should
"^DD",8925.1,8925.1,.11,21,40,0)
be Inactivated, NOT orphaned.  Components are a different story;
"^DD",8925.1,8925.1,.11,21,41,0)
components being retired from further use can and should be orphaned
"^DD",8925.1,8925.1,.11,21,42,0)
(deleted as items from the Title).
"^DD",8925.1,8925.1,.11,21,43,0)
 
"^DD",8925.1,8925.1,.11,21,44,0)
Reason: Titles inherit attributes and therefore require a complete
"^DD",8925.1,8925.1,.11,21,45,0)
ancestry in order to process existing documents.  Since components, on the
"^DD",8925.1,8925.1,.11,21,46,0)
other hand, do not inherit attributes, they do NOT require a complete
"^DD",8925.1,8925.1,.11,21,47,0)
ancestry to process existing documents (although they must remain in the
"^DD",8925.1,8925.1,.11,21,48,0)
file.)
"^DD",8925.1,8925.1,.11,21,49,0)
 
"^DD",8925.1,8925.1,.11,21,50,0)
Since Orphans do not belong to the Hierarchy, they do NOT appear on the
"^DD",8925.1,8925.1,.11,21,51,0)
Edit Document Definitions Option.  They can be accessed through the Sort
"^DD",8925.1,8925.1,.11,21,52,0)
Document Definitions Option.
"^DD",8925.1,8925.1,.11,21,53,0)
 
"^DD",8925.1,8925.1,.11,21,54,0)
The field Orphan may have values 'Yes', 'No', or '?'. Orphan has value '?'
"^DD",8925.1,8925.1,.11,21,55,0)
if there are technical errors making its value unknown.
"^DD",8925.1,8925.1,.11,21,56,0)
 
"^DD",8925.1,8925.1,.11,21,57,0)
Orphan is a BASIC field.
"^DD",8925.1,8925.1,.11,"DT")
2960201
"^DD",8925.1,8925.1,.12,0)
HAS BOILTXT^CJ7^^ ; ^S TIUFBTXT=$S($L($T(^TIUFLF)):$$HASBOIL^TIUFLF(D0,^TIU(8925.1,D0,0)),1:"UNKNOWN"),X=$S(TIUFBTXT:"YES",TIUFBTXT=0:"NO",1:TIUFBTXT) K TIUFBTXT
"^DD",8925.1,8925.1,.12,.1)
HAS BOILERPLATE TEXT
"^DD",8925.1,8925.1,.12,9)
^
"^DD",8925.1,8925.1,.12,9.01)

"^DD",8925.1,8925.1,.12,9.1)
S TIUFBTXT=$S($L($T(^TIUFLF)):$$HASBOIL^TIUFLF(D0,^TIU(8925.1,D0,0)),1:"UNKNOWN"),X=$S(TIUFBTXT:"YES",TIUFBTXT=0:"NO",1:TIUFBTXT) K TIUFBTXT
"^DD",8925.1,8925.1,.12,21,0)
^^3^3^2970128^
"^DD",8925.1,8925.1,.12,21,1,0)
Applies to Types Title and Component only.  Cannot be edited since value
"^DD",8925.1,8925.1,.12,21,2,0)
is automatic.  A Document Definition Has Boiltxt if it or its descendant
"^DD",8925.1,8925.1,.12,21,3,0)
Components have Boilerplate Text (Field 3).  BASIC field.
"^DD",8925.1,8925.1,.12,"DT")
2960118
"^DD",8925.1,8925.1,.13,0)
NATIONAL STANDARD^SX^1:YES;0:NO;^0;13^K:'$G(TIUFPRIV) X
"^DD",8925.1,8925.1,.13,3)
Enter YES if entry is Standard across the nation, i.e. sites mustn't edit
"^DD",8925.1,8925.1,.13,4)

"^DD",8925.1,8925.1,.13,21,0)
^^36^36^2970220^
"^DD",8925.1,8925.1,.13,21,1,0)
Some Document Definitions, for example, CWAD's, are developed nationally
"^DD",8925.1,8925.1,.13,21,2,0)
and sent out as standardized entries across the nation.  TIU and other
"^DD",8925.1,8925.1,.13,21,3,0)
packages depend on their standard definition, and they must not be edited
"^DD",8925.1,8925.1,.13,21,4,0)
by sites but only by the persons who are nationally responsible for them.
"^DD",8925.1,8925.1,.13,21,5,0)
 
"^DD",8925.1,8925.1,.13,21,6,0)
Such entries are marked NATIONAL STANDARD (field has value 1 for YES),
"^DD",8925.1,8925.1,.13,21,7,0)
which prevents sites from editing the entry.
"^DD",8925.1,8925.1,.13,21,8,0)
 
"^DD",8925.1,8925.1,.13,21,9,0)
Sites cannot edit National Standard entries, except for the Item Multiple:
"^DD",8925.1,8925.1,.13,21,10,0)
 
"^DD",8925.1,8925.1,.13,21,11,0)
If a National Standard entry has Type Class or Document Class, sites can
"^DD",8925.1,8925.1,.13,21,12,0)
add/delete Nonnational items as they please, and can edit ALL items AS
"^DD",8925.1,8925.1,.13,21,13,0)
ITEMS (e.g. Item Sequence, etc.).  Sites CANNOT add/delete National items.
"^DD",8925.1,8925.1,.13,21,14,0)
 
"^DD",8925.1,8925.1,.13,21,15,0)
If a National Standard entry has Type Title or Component, sites
"^DD",8925.1,8925.1,.13,21,16,0)
cannot add or delete items, but can still edit items AS ITEMS.
"^DD",8925.1,8925.1,.13,21,17,0)
 
"^DD",8925.1,8925.1,.13,21,18,0)
Sites cannot add National Standard entries as Items to parents.  There is
"^DD",8925.1,8925.1,.13,21,19,0)
one exception: Sites can add National Shared Components to (nonnational)
"^DD",8925.1,8925.1,.13,21,20,0)
Titles if they wish.  Sites can delete National Standard Items from
"^DD",8925.1,8925.1,.13,21,21,0)
nonnational parents. (Unless there has been a mistake, such items will be
"^DD",8925.1,8925.1,.13,21,22,0)
limited to Shared Components only.)
"^DD",8925.1,8925.1,.13,21,23,0)
 
"^DD",8925.1,8925.1,.13,21,24,0)
Field is NOT heritable.  If field has no value for an entry, value is 0 by
"^DD",8925.1,8925.1,.13,21,25,0)
default.  This means that entries created by sites are NOT National
"^DD",8925.1,8925.1,.13,21,26,0)
Standard.
"^DD",8925.1,8925.1,.13,21,27,0)
 
"^DD",8925.1,8925.1,.13,21,28,0)
Technical Note:
"^DD",8925.1,8925.1,.13,21,29,0)
 
"^DD",8925.1,8925.1,.13,21,30,0)
National entries (except for Shared Components) must have National
"^DD",8925.1,8925.1,.13,21,31,0)
ancestors:  if a National entry has a nonNational ancestor, the
"^DD",8925.1,8925.1,.13,21,32,0)
Document Definition Utility TIUF does not permit it to be activated.
"^DD",8925.1,8925.1,.13,21,33,0)
(Shared Components need not have National ancestors, and do not have a
"^DD",8925.1,8925.1,.13,21,34,0)
Status.)
"^DD",8925.1,8925.1,.13,21,35,0)
 
"^DD",8925.1,8925.1,.13,21,36,0)
National Standard is a BASIC field.
"^DD",8925.1,8925.1,.13,"DT")
2970128
"^DD",8925.1,8925.1,.14,0)
POSTING INDICATOR^S^C:crisis note;W:warning;A:allergy/ADR;D:directive;^0;14^Q
"^DD",8925.1,8925.1,.14,1,0)
^.1
"^DD",8925.1,8925.1,.14,1,1,0)
8925.1^APOST
"^DD",8925.1,8925.1,.14,1,1,1)
S ^TIU(8925.1,"APOST",$E(X,1,30),DA)=""
"^DD",8925.1,8925.1,.14,1,1,2)
K ^TIU(8925.1,"APOST",$E(X,1,30),DA)
"^DD",8925.1,8925.1,.14,1,1,"%D",0)
^^3^3^2970227^
"^DD",8925.1,8925.1,.14,1,1,"%D",1,0)
This REGULAR FileMan Cross-reference by Posting Indicator will help to
"^DD",8925.1,8925.1,.14,1,1,"%D",2,0)
identify which Document Classes are associated with each of the currently
"^DD",8925.1,8925.1,.14,1,1,"%D",3,0)
supported Posting Types.
"^DD",8925.1,8925.1,.14,1,1,"DT")
2970227
"^DD",8925.1,8925.1,.14,3)
Please choose an indicator corresponding to the Posting Type
"^DD",8925.1,8925.1,.14,21,0)
^^2^2^2970515^
"^DD",8925.1,8925.1,.14,21,1,0)
This field is used to help identify indicators of the Patient Posting Type
"^DD",8925.1,8925.1,.14,21,2,0)
to which the Document Definition should be ascribed.
"^DD",8925.1,8925.1,.14,"DT")
2970227
"^DD",8925.1,8925.1,1,0)
UPLOAD DELIMITED ASCII HEADER^8925.11I^^ITEM;0
"^DD",8925.1,8925.1,1,21,0)
^^7^7^2970108^^
"^DD",8925.1,8925.1,1,21,1,0)
This multiple contains the upload record header format of the Document
"^DD",8925.1,8925.1,1,21,2,0)
Definition, to be used by the upload/router/filer when the preferred
"^DD",8925.1,8925.1,1,21,3,0)
header format is Delimited string (as opposed to captioned).
"^DD",8925.1,8925.1,1,21,4,0)
 
"^DD",8925.1,8925.1,1,21,5,0)
Delimited string is useful only if the site has a way of automating
"^DD",8925.1,8925.1,1,21,6,0)
creation of upload record headers.  If they are being created by a human
"^DD",8925.1,8925.1,1,21,7,0)
transcriber, use Captioned Record Headers instead.
"^DD",8925.1,8925.1,1,"DT")
2960729
"^DD",8925.1,8925.1,1.01,0)
UPLOAD TARGET FILE^*P1'^DIC(^1;1^S DIC("S")="I $D(^DIC(+Y,""%"",""B"",""TIU""))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",8925.1,8925.1,1.01,3)
Select the DHCP file in which the document will be stored.
"^DD",8925.1,8925.1,1.01,12)
Only files with the "TIU" application group may be selected.
"^DD",8925.1,8925.1,1.01,12.1)
S DIC("S")="I $D(^DIC(+Y,""%"",""B"",""TIU""))"
"^DD",8925.1,8925.1,1.01,21,0)
^^20^20^2970506^
"^DD",8925.1,8925.1,1.01,21,1,0)
                           -------------
"^DD",8925.1,8925.1,1.01,21,2,0)
NOTE ON UPLOAD:
"^DD",8925.1,8925.1,1.01,21,3,0)
Upload fields (Upload Target File, Laygo Allowed, Target Text Field
"^DD",8925.1,8925.1,1.01,21,4,0)
Subscript, Upload Look-Up Method, Upload Post-Filing Code, Upload Filing
"^DD",8925.1,8925.1,1.01,21,5,0)
Error Code, and multiple fields Upload Delimited ASCII Header and Upload
"^DD",8925.1,8925.1,1.01,21,6,0)
Captioned ASCII Header) apply to Document Definitions of Type Class,
"^DD",8925.1,8925.1,1.01,21,7,0)
Document Class, and Title.  Multiple fields Upload Delimited ASCII Header
"^DD",8925.1,8925.1,1.01,21,8,0)
and Upload Captioned ASCII Header are heritable AS A GROUP.  Do NOT set
"^DD",8925.1,8925.1,1.01,21,9,0)
partial information at a lower level; if you set ANY information at a
"^DD",8925.1,8925.1,1.01,21,10,0)
lower level, it should be COMPLETE.  For information on editing heritable
"^DD",8925.1,8925.1,1.01,21,11,0)
fields, see Technical field: Edit Template.
"^DD",8925.1,8925.1,1.01,21,12,0)
 
"^DD",8925.1,8925.1,1.01,21,13,0)
TIUF, the Document Definition Utility does NOT display inherited Upload
"^DD",8925.1,8925.1,1.01,21,14,0)
information.  To see/edit existing upload information, edit/view at the
"^DD",8925.1,8925.1,1.01,21,15,0)
level it is set.
"^DD",8925.1,8925.1,1.01,21,16,0)
 
"^DD",8925.1,8925.1,1.01,21,17,0)
                           --------------
"^DD",8925.1,8925.1,1.01,21,18,0)
The UPLOAD TARGET FILE is the VA FileMan file in which fixed-field header
"^DD",8925.1,8925.1,1.01,21,19,0)
information and associated text will be stored.  Only files which include
"^DD",8925.1,8925.1,1.01,21,20,0)
the TIU Application Group may be selected.
"^DD",8925.1,8925.1,1.01,"DT")
2960729
"^DD",8925.1,8925.1,1.02,0)
LAYGO ALLOWED^S^0:NO;1:YES;^1;2^Q
"^DD",8925.1,8925.1,1.02,3)
Please indicate whether new entries may be added to the TARGET FILE.
"^DD",8925.1,8925.1,1.02,21,0)
^^2^2^2970128^
"^DD",8925.1,8925.1,1.02,21,1,0)
This field indicates whether or not a new entry can be created in
"^DD",8925.1,8925.1,1.02,21,2,0)
the TARGET FILE for documents defined by this Document Definition.
"^DD",8925.1,8925.1,1.02,"DT")
2970128
"^DD",8925.1,8925.1,1.03,0)
TARGET TEXT FIELD SUBSCRIPT^F^^1;3^K:$L(X)>15!($L(X)<1) X
"^DD",8925.1,8925.1,1.03,3)
Select the Word-processing field in the target file.
"^DD",8925.1,8925.1,1.03,21,0)
^^2^2^2970620^^
"^DD",8925.1,8925.1,1.03,21,1,0)
This is the subscript of the word-processing field in the TARGET FILE, in
"^DD",8925.1,8925.1,1.03,21,2,0)
which the body of the narrative report will be stored.
"^DD",8925.1,8925.1,1.03,"DT")
2940331
"^DD",8925.1,8925.1,1.04,0)
BOILERPLATE ON UPLOAD ENABLED^S^0:NO;1:YES;^1;4^Q
"^DD",8925.1,8925.1,1.04,3)
Indicate whether boilerplate logic will be executed on upload
"^DD",8925.1,8925.1,1.04,21,0)
^^2^2^2961210^
"^DD",8925.1,8925.1,1.04,21,1,0)
This field determines whether the filer will attempt to execute
"^DD",8925.1,8925.1,1.04,21,2,0)
boilerplate logic for uploaded documents.  Not used in version 1.
"^DD",8925.1,8925.1,1.04,"DT")
2951016
"^DD",8925.1,8925.1,2,0)
UPLOAD CAPTIONED ASCII HEADER^8925.12A^^HEAD;0
"^DD",8925.1,8925.1,2,21,0)
^^11^11^2970506^^
"^DD",8925.1,8925.1,2,21,1,0)
This multiple contains the upload record header format of the Document
"^DD",8925.1,8925.1,2,21,2,0)
Definition, to be used by the upload/router/filer when the preferred
"^DD",8925.1,8925.1,2,21,3,0)
header format is captioned (as opposed to delimited string).
"^DD",8925.1,8925.1,2,21,4,0)
 
"^DD",8925.1,8925.1,2,21,5,0)
Under captioned header format, header items are distinguished from each
"^DD",8925.1,8925.1,2,21,6,0)
other by captions such as SSN which are entered by the transcriber,
"^DD",8925.1,8925.1,2,21,7,0)
followed by the data.
"^DD",8925.1,8925.1,2,21,8,0)
 
"^DD",8925.1,8925.1,2,21,9,0)
Use the captioned header format if documents are transcribed by a human
"^DD",8925.1,8925.1,2,21,10,0)
transcriber.  Delimited format is useful only if the site has some way of
"^DD",8925.1,8925.1,2,21,11,0)
automatically generating upload record headers.
"^DD",8925.1,8925.1,2,"DT")
2960729
"^DD",8925.1,8925.1,3,0)
BOILERPLATE TEXT^8925.13^^DFLT;0
"^DD",8925.1,8925.1,3,"DT")
2950421
"^DD",8925.1,8925.1,3.02,0)
OK TO DISTRIBUTE^S^1:YES;0:NO;^3;2^Q
"^DD",8925.1,8925.1,3.02,3)
Enter 1 for YES if entry should be included when this file is exported with data.  Enter 0 for NO or leave blank if entry is for local use only.
"^DD",8925.1,8925.1,3.02,21,0)
^^13^13^2970224^^
"^DD",8925.1,8925.1,3.02,21,1,0)
Presently applies only to National Programmers; does not appear on
"^DD",8925.1,8925.1,3.02,21,2,0)
Manager or Clinician Menus.
"^DD",8925.1,8925.1,3.02,21,3,0)
 
"^DD",8925.1,8925.1,3.02,21,4,0)
If field is 1 for YES, then entry should be included for export.  If field
"^DD",8925.1,8925.1,3.02,21,5,0)
has no value or has value 0, entry should not be included for export.
"^DD",8925.1,8925.1,3.02,21,6,0)
 
"^DD",8925.1,8925.1,3.02,21,7,0)
Since TIU is hierarchical, the entry's behavior depends on entries above
"^DD",8925.1,8925.1,3.02,21,8,0)
it in the hierarchy.  It is the responsibility of the exporter to make
"^DD",8925.1,8925.1,3.02,21,9,0)
sure all ancestors which are necessary for the proper behavior of an
"^DD",8925.1,8925.1,3.02,21,10,0)
exported entry are also exported with it (or are already present at sites
"^DD",8925.1,8925.1,3.02,21,11,0)
receiving the exported entries).
"^DD",8925.1,8925.1,3.02,21,12,0)
 
"^DD",8925.1,8925.1,3.02,21,13,0)
Field is NOT heritable.  BASIC field.
"^DD",8925.1,8925.1,3.02,"DT")
2970128
"^DD",8925.1,8925.1,3.03,0)
SUPPRESS VISIT SELECTION^S^1:YES;0:NO;^3;3^Q
"^DD",8925.1,8925.1,3.03,3)
Enter 1 for YES ONLY IF this is an administrative note which creates its own historical visit.  You will NOT receive workload credit for such visits.
"^DD",8925.1,8925.1,3.03,21,0)
^^17^17^2970220^
"^DD",8925.1,8925.1,3.03,21,1,0)
Applies to entries of Type Class, Document Class, and Title.
"^DD",8925.1,8925.1,3.03,21,2,0)
 
"^DD",8925.1,8925.1,3.03,21,3,0)
For most documents it is very important that the user entering a document
"^DD",8925.1,8925.1,3.03,21,4,0)
select the appropriate visit to link the document with.  However, 
"^DD",8925.1,8925.1,3.03,21,5,0)
certain administrative documents for outpatients have no particular visit
"^DD",8925.1,8925.1,3.03,21,6,0)
that they should be linked with.  For example, a clinician could have a
"^DD",8925.1,8925.1,3.03,21,7,0)
chance encounter with a patient in the corridor and want to document the
"^DD",8925.1,8925.1,3.03,21,8,0)
discussion, or a clinician could simply want to remind him/herself of
"^DD",8925.1,8925.1,3.03,21,9,0)
something for a given patient.  Documents for such purposes can be set to
"^DD",8925.1,8925.1,3.03,21,10,0)
automatically create their own historical visit when they are entered, so
"^DD",8925.1,8925.1,3.03,21,11,0)
that the user is not asked to select a visit.
"^DD",8925.1,8925.1,3.03,21,12,0)
 
"^DD",8925.1,8925.1,3.03,21,13,0)
Warning:  Such documents DO NOT GIVE WORKLOAD CREDIT.
"^DD",8925.1,8925.1,3.03,21,14,0)
 
"^DD",8925.1,8925.1,3.03,21,15,0)
Heritable.  BASIC field.  If field has no value and there is no value
"^DD",8925.1,8925.1,3.03,21,16,0)
to inherit, default value is NO.  For information on editing heritable
"^DD",8925.1,8925.1,3.03,21,17,0)
fields, see Technical Field Edit Template.
"^DD",8925.1,8925.1,3.03,"DT")
2970124
"^DD",8925.1,8925.1,4,0)
UPLOAD LOOK-UP METHOD^K^^4;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.1,8925.1,4,3)
Please enter the MUMPS code to be executed for record location.
"^DD",8925.1,8925.1,4,9)
@
"^DD",8925.1,8925.1,4,21,0)
^^12^12^2970107^^
"^DD",8925.1,8925.1,4,21,1,0)
Sometimes when an entry is uploaded into the target file, a new entry is
"^DD",8925.1,8925.1,4,21,2,0)
created for it.  However, in other cases such as for Operative Reports, or
"^DD",8925.1,8925.1,4,21,3,0)
for an addendum, the file entry already exists and must be looked-up and
"^DD",8925.1,8925.1,4,21,4,0)
edited.
"^DD",8925.1,8925.1,4,21,5,0)
 
"^DD",8925.1,8925.1,4,21,6,0)
Look-Up Method is the MUMPS code invoked to perform such a look-up on the
"^DD",8925.1,8925.1,4,21,7,0)
target file.  If a look-up is necessary and this field is blank, a regular
"^DD",8925.1,8925.1,4,21,8,0)
DIC lookup is performed.  If the regular DIC lookup is not sufficient to
"^DD",8925.1,8925.1,4,21,9,0)
locate the appropriate entry, this field should contain the lookup.  It
"^DD",8925.1,8925.1,4,21,10,0)
should expect any look-up special variables named in the header fields as
"^DD",8925.1,8925.1,4,21,11,0)
input variables, and should return the variable Y in DIC-compatible format
"^DD",8925.1,8925.1,4,21,12,0)
(i.e., IEN^EXTERNAL VALUE[^1]).
"^DD",8925.1,8925.1,4,"DT")
2960729
"^DD",8925.1,8925.1,4.5,0)
UPLOAD POST-FILING CODE^K^^4.5;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.1,8925.1,4.5,3)
This is Standard MUMPS code.
"^DD",8925.1,8925.1,4.5,9)
@
"^DD",8925.1,8925.1,4.5,21,0)
^^4^4^2970522^
"^DD",8925.1,8925.1,4.5,21,1,0)
This field specifies code to be executed following the successful filing
"^DD",8925.1,8925.1,4.5,21,2,0)
of an uploaded record. It may be used to send bulletins or alerts,
"^DD",8925.1,8925.1,4.5,21,3,0)
evaluate expected signers/cosigners, trigger events, update statuses, or
"^DD",8925.1,8925.1,4.5,21,4,0)
whatever the designer of the application deems appropriate.
"^DD",8925.1,8925.1,4.5,"DT")
2960729
"^DD",8925.1,8925.1,4.6,0)
ENTRY ACTION^KX^^4.6;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.1,8925.1,4.6,3)
This is Standard MUMPS code.
"^DD",8925.1,8925.1,4.6,9)
@
"^DD",8925.1,8925.1,4.6,21,0)
^^3^3^2970102^
"^DD",8925.1,8925.1,4.6,21,1,0)
This MUMPS code is executed during the entry/editing of a document, right
"^DD",8925.1,8925.1,4.6,21,2,0)
after selection of Document Type, and prior to selection of the Patient.
"^DD",8925.1,8925.1,4.6,21,3,0)
It may be used to set up environmental variables, etc.  TECHNICAL field.
"^DD",8925.1,8925.1,4.6,"DT")
2961022
"^DD",8925.1,8925.1,4.7,0)
EXIT ACTION^KX^^4.7;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.1,8925.1,4.7,3)
This is Standard MUMPS code.
"^DD",8925.1,8925.1,4.7,9)
@
"^DD",8925.1,8925.1,4.7,21,0)
^^3^3^2970102^
"^DD",8925.1,8925.1,4.7,21,1,0)
This MUMPS code is executed just prior to exit from the entry/edit process
"^DD",8925.1,8925.1,4.7,21,2,0)
for a document.  It may be used to send alerts or bulletins, clean up
"^DD",8925.1,8925.1,4.7,21,3,0)
temporary global variables, etc.  TECHNICAL field.
"^DD",8925.1,8925.1,4.7,"DT")
2961022
"^DD",8925.1,8925.1,4.8,0)
UPLOAD FILING ERROR CODE^K^^4.8;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.1,8925.1,4.8,.1)
UPLOAD FILING ERROR RESOLUTION CODE
"^DD",8925.1,8925.1,4.8,3)
This is Standard MUMPS code.
"^DD",8925.1,8925.1,4.8,9)
@
"^DD",8925.1,8925.1,4.8,21,0)
^^6^6^2970106^
"^DD",8925.1,8925.1,4.8,21,1,0)
This MUMPS-type field specifies the code to be executed when the user
"^DD",8925.1,8925.1,4.8,21,2,0)
attempts to resolve a filing error.  Filing Errors may be resolved either
"^DD",8925.1,8925.1,4.8,21,3,0)
by responding to a Filing Error Alert or through the option to Review
"^DD",8925.1,8925.1,4.8,21,4,0)
Upload Events.  Typically, the code will offer the user an opportunity to
"^DD",8925.1,8925.1,4.8,21,5,0)
look up online information necessary to resolve the error (e.g.,
"^DD",8925.1,8925.1,4.8,21,6,0)
demographic, or case-related information).
"^DD",8925.1,8925.1,4.8,"DT")
2960729
"^DD",8925.1,8925.1,5,0)
EDIT TEMPLATE^FX^^5;E1,245^K:$L(X)>60!($L(X)<2) X
"^DD",8925.1,8925.1,5,3)
Enter the name of the Input Template for documents defined by this entry.
"^DD",8925.1,8925.1,5,4)
D HELP1^TIUFXHLX(5)
"^DD",8925.1,8925.1,5,9)
@
"^DD",8925.1,8925.1,5,21,0)
^^19^19^2970506^^^^
"^DD",8925.1,8925.1,5,21,1,0)
Applies to Classes, Document Classes, Titles.  This is the Input Template
"^DD",8925.1,8925.1,5,21,2,0)
for entering/editing documents defined by this entry.  Template
"^DD",8925.1,8925.1,5,21,3,0)
includes fixed field information such as Patient, etc.  Enter Edit
"^DD",8925.1,8925.1,5,21,4,0)
Template in Format [TEMPLATE NAME], or as a "field-string" (e.g.,
"^DD",8925.1,8925.1,5,21,5,0)
.01;1;3;5).  Heritable.  TECHNICAL field.
"^DD",8925.1,8925.1,5,21,6,0)
 
"^DD",8925.1,8925.1,5,21,7,0)
NOTE on editing heritable fields:
"^DD",8925.1,8925.1,5,21,8,0)
 
"^DD",8925.1,8925.1,5,21,9,0)
When editing heritable fields, the user is presented with the EFFECTIVE
"^DD",8925.1,8925.1,5,21,10,0)
value of the field as the default (e.g. NO//).  This is the same as the
"^DD",8925.1,8925.1,5,21,11,0)
value shown in the display and is the field's own value if it has one, the
"^DD",8925.1,8925.1,5,21,12,0)
inherited value if the field does not have its own value, or the default
"^DD",8925.1,8925.1,5,21,13,0)
for the field if the field has neither its own nor an inherited value. If
"^DD",8925.1,8925.1,5,21,14,0)
the user accepts this default by pressing return, the value is made
"^DD",8925.1,8925.1,5,21,15,0)
explicit, i.e., entered into the field.  If a user does NOT want to make
"^DD",8925.1,8925.1,5,21,16,0)
the value explicit, the user should enter @, which leaves a blank field
"^DD",8925.1,8925.1,5,21,17,0)
blank.  If the user want to delete an explicit value, the user should
"^DD",8925.1,8925.1,5,21,18,0)
enter @, which deletes the field value, leaving TIU to use the effective
"^DD",8925.1,8925.1,5,21,19,0)
value for the field.
"^DD",8925.1,8925.1,5,"DT")
2961022
"^DD",8925.1,8925.1,6,0)
PRINT METHOD^KX^^6;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.1,8925.1,6,3)
Please enter the MUMPS code to be executed to print a record.
"^DD",8925.1,8925.1,6,4)
D HELP1^TIUFXHLX(6)
"^DD",8925.1,8925.1,6,9)
@
"^DD",8925.1,8925.1,6,21,0)
^^5^5^2970108^^
"^DD",8925.1,8925.1,6,21,1,0)
Applies to Types Class, Document Class, Title.  This MUMPS code is
"^DD",8925.1,8925.1,6,21,2,0)
executed when a document is printed from the TIU List Manager screen (as
"^DD",8925.1,8925.1,6,21,3,0)
opposed to a separate print option which may have its own code.) Field is
"^DD",8925.1,8925.1,6,21,4,0)
heritable. TECHNICAL field.  For more information on editing heritable
"^DD",8925.1,8925.1,6,21,5,0)
fields, see Technical field Edit Template.
"^DD",8925.1,8925.1,6,"DT")
2961022
"^DD",8925.1,8925.1,6.1,0)
PRINT FORM HEADER^FX^^6.1;1^K:$L(X)>40!($L(X)<3) X
"^DD",8925.1,8925.1,6.1,3)
Answer must be 3-40 characters in length.
"^DD",8925.1,8925.1,6.1,4)
D HELP1^TIUFXHLX(6.1)
"^DD",8925.1,8925.1,6.1,21,0)
^^12^12^2970108^^
"^DD",8925.1,8925.1,6.1,21,1,0)
For basic information on Print Form Header see Technical field Allow
"^DD",8925.1,8925.1,6.1,21,2,0)
Custom Form Headers.
"^DD",8925.1,8925.1,6.1,21,3,0)
 
"^DD",8925.1,8925.1,6.1,21,4,0)
The Print Form Header is the official medical record title of the document
"^DD",8925.1,8925.1,6.1,21,5,0)
which has been approved by the Medical Record Committee based on national
"^DD",8925.1,8925.1,6.1,21,6,0)
guidelines.
"^DD",8925.1,8925.1,6.1,21,7,0)
  
"^DD",8925.1,8925.1,6.1,21,8,0)
Examples:  Progress Notes, Physical Examination, History - Part 1, etc.
"^DD",8925.1,8925.1,6.1,21,9,0)
 
"^DD",8925.1,8925.1,6.1,21,10,0)
This field is heritable with lower level values overriding higher ones AS
"^DD",8925.1,8925.1,6.1,21,11,0)
LONG AS the field is applicable.  See Allow Custom Form Headers.  Print
"^DD",8925.1,8925.1,6.1,21,12,0)
Form Header is a TECHNICAL field.
"^DD",8925.1,8925.1,6.1,23,0)
^^6^6^2970108^^^^
"^DD",8925.1,8925.1,6.1,23,1,0)
The narrative stored in this field will display as the form header of a
"^DD",8925.1,8925.1,6.1,23,2,0)
document. If entered at a CLASS level such as FORMS, all forms documents
"^DD",8925.1,8925.1,6.1,23,3,0)
will display entered header as the form header of the document.  If
"^DD",8925.1,8925.1,6.1,23,4,0)
the free text is entered at a lower level (i.e., TITLE), this form header
"^DD",8925.1,8925.1,6.1,23,5,0)
will override the one entered at the higher level and will be displayed on
"^DD",8925.1,8925.1,6.1,23,6,0)
the form.
"^DD",8925.1,8925.1,6.1,"DT")
2961022
"^DD",8925.1,8925.1,6.12,0)
PRINT FORM NUMBER^FX^^6.1;2^K:$L(X)>20!($L(X)<3) X
"^DD",8925.1,8925.1,6.12,3)
Answer must be 3-20 characters in length.
"^DD",8925.1,8925.1,6.12,4)
D HELP1^TIUFXHLX(6.12)
"^DD",8925.1,8925.1,6.12,21,0)
^^13^13^2970106^
"^DD",8925.1,8925.1,6.12,21,1,0)
For basic information on Print Form Number see Technical field Allow
"^DD",8925.1,8925.1,6.12,21,2,0)
Custom Form Headers.
"^DD",8925.1,8925.1,6.12,21,3,0)
 
"^DD",8925.1,8925.1,6.12,21,4,0)
The Print Form Number is the official medical record form number of the
"^DD",8925.1,8925.1,6.12,21,5,0)
document which has been approved by the Medical Record Committee based
"^DD",8925.1,8925.1,6.12,21,6,0)
on national guidelines.
"^DD",8925.1,8925.1,6.12,21,7,0)
 
"^DD",8925.1,8925.1,6.12,21,8,0)
Example:  Progress Note - Vice SF 509, Consult - SF 513, Physicial
"^DD",8925.1,8925.1,6.12,21,9,0)
Examination - SF 506.
"^DD",8925.1,8925.1,6.12,21,10,0)
 
"^DD",8925.1,8925.1,6.12,21,11,0)
Field is heritable with lower level values overriding higher ones AS LONG
"^DD",8925.1,8925.1,6.12,21,12,0)
AS the field is applicable.  See field Allow Custom Form Headers.  Print
"^DD",8925.1,8925.1,6.12,21,13,0)
Form Header is a TECHNICAL field.
"^DD",8925.1,8925.1,6.12,23,0)
^^6^6^2970106^^^^
"^DD",8925.1,8925.1,6.12,23,1,0)
The free text stored in this field will be displayed as the form number of
"^DD",8925.1,8925.1,6.12,23,2,0)
a document.  If entered at a CLASS level such as Forms, all Forms
"^DD",8925.1,8925.1,6.12,23,3,0)
documents will display the entered value as the form number of the
"^DD",8925.1,8925.1,6.12,23,4,0)
document.  If the free text is entered at a lower level (i.e., TITLE),
"^DD",8925.1,8925.1,6.12,23,5,0)
this value will override the one entered at the higher level and will be
"^DD",8925.1,8925.1,6.12,23,6,0)
displayed on the form.
"^DD",8925.1,8925.1,6.12,"DT")
2961022
"^DD",8925.1,8925.1,6.13,0)
PRINT GROUP^NJ2,0X^^6.1;3^K:+X'=X!(X>10)!(X<1)!(X?.E1"."1N.N) X
"^DD",8925.1,8925.1,6.13,3)
Type a Number between 1 and 10, 0 Decimal Digits.  Enter ?? for help.
"^DD",8925.1,8925.1,6.13,4)
D HELP1^TIUFXHLX(6.13)
"^DD",8925.1,8925.1,6.13,21,0)
^^19^19^2970106^
"^DD",8925.1,8925.1,6.13,21,1,0)
For basic information on Print Group see Technical field Allow Custom Form
"^DD",8925.1,8925.1,6.13,21,2,0)
Headers.
"^DD",8925.1,8925.1,6.13,21,3,0)
 
"^DD",8925.1,8925.1,6.13,21,4,0)
Print Group is an integer number which serves to group by print form
"^DD",8925.1,8925.1,6.13,21,5,0)
headers/numbers related documents that share a common print method; e.g.,
"^DD",8925.1,8925.1,6.13,21,6,0)
Progress Notes, H&P's, and other documents may share a common print
"^DD",8925.1,8925.1,6.13,21,7,0)
method, but have differing form headers/numbers and should each print in
"^DD",8925.1,8925.1,6.13,21,8,0)
their own, separate collation.  Specifying a common print group for
"^DD",8925.1,8925.1,6.13,21,9,0)
documents with the same headers/numbers (for example, Progress Notes have
"^DD",8925.1,8925.1,6.13,21,10,0)
Print Group 2, H&P's might have Print Group 7) causes such documents
"^DD",8925.1,8925.1,6.13,21,11,0)
from each print group to collate together when a mixed print is called
"^DD",8925.1,8925.1,6.13,21,12,0)
for.
"^DD",8925.1,8925.1,6.13,21,13,0)
 
"^DD",8925.1,8925.1,6.13,21,14,0)
Since documents collate first by print method, then by print group, print
"^DD",8925.1,8925.1,6.13,21,15,0)
group is not necessary unless documents share a common print method.
"^DD",8925.1,8925.1,6.13,21,16,0)
 
"^DD",8925.1,8925.1,6.13,21,17,0)
Print Group is heritable with lower level values overriding higher ones AS
"^DD",8925.1,8925.1,6.13,21,18,0)
LONG AS the field is applicable.  See Allow Custom Form Headers.  Print
"^DD",8925.1,8925.1,6.13,21,19,0)
Group is a TECHNICAL field.
"^DD",8925.1,8925.1,6.13,"DT")
2961022
"^DD",8925.1,8925.1,6.14,0)
ALLOW CUSTOM FORM HEADERS^SX^1:YES;0:NO;^6.1;4^Q
"^DD",8925.1,8925.1,6.14,.1)
ALLOW CUSTOM FORM HEADERS/NUMBERS AT LOWER LEVELS
"^DD",8925.1,8925.1,6.14,3)
May be set for Types CL and DC only.  Enter 1 for YES if descendent Titles can have individual (Custom) Form Headers/Numbers within their Document Class.  Otherwise enter 0.
"^DD",8925.1,8925.1,6.14,4)
D CUSTOM^TIUFXHLX
"^DD",8925.1,8925.1,6.14,21,0)
^^69^69^2970128^
"^DD",8925.1,8925.1,6.14,21,1,0)
Allow Custom Form Headers may be set for entries of Type Class or Document
"^DD",8925.1,8925.1,6.14,21,2,0)
Class and affects DESCENDANTS of the entry for which it is set.
"^DD",8925.1,8925.1,6.14,21,3,0)
 
"^DD",8925.1,8925.1,6.14,21,4,0)
Information on Custom Headers, Footers, Print Group, and Allow Custom Form
"^DD",8925.1,8925.1,6.14,21,5,0)
Headers:
"^DD",8925.1,8925.1,6.14,21,6,0)
 
"^DD",8925.1,8925.1,6.14,21,7,0)
Some clinical documents use Forms with Form Headers and Form Numbers, for
"^DD",8925.1,8925.1,6.14,21,8,0)
example, Progress Note Forms have Header 'Progress Notes' and Number 'Vice
"^DD",8925.1,8925.1,6.14,21,9,0)
SF 509.'
"^DD",8925.1,8925.1,6.14,21,10,0)
 
"^DD",8925.1,8925.1,6.14,21,11,0)
The Owner of a Document Definition must decide whether all documents
"^DD",8925.1,8925.1,6.14,21,12,0)
descending from the entry will have the SAME Header/Number, or whether to
"^DD",8925.1,8925.1,6.14,21,13,0)
allow CUSTOM (varying) Headers/Numbers at lower levels.
"^DD",8925.1,8925.1,6.14,21,14,0)
 
"^DD",8925.1,8925.1,6.14,21,15,0)
Allow Custom Headers holds the decision: If the field has value 0 for NO,
"^DD",8925.1,8925.1,6.14,21,16,0)
then ALL descendant documents use a COMMON Header/Number (or perhaps they
"^DD",8925.1,8925.1,6.14,21,17,0)
all use NO Header/Number); they also collate together in printouts.
"^DD",8925.1,8925.1,6.14,21,18,0)
 
"^DD",8925.1,8925.1,6.14,21,19,0)
For example, Class Progress Notes does NOT Allow Custom Form Headers. This
"^DD",8925.1,8925.1,6.14,21,20,0)
means that ALL Progress Note Titles have the same header and the same form
"^DD",8925.1,8925.1,6.14,21,21,0)
number.  For Class Progress Notes, Field Print Form Header holds the
"^DD",8925.1,8925.1,6.14,21,22,0)
header 'Progress Notes', Field Print Form Number holds Form Number 'Vice
"^DD",8925.1,8925.1,6.14,21,23,0)
SF 509', and Field Print Group holds '2'.  Since Class Progress Notes does
"^DD",8925.1,8925.1,6.14,21,24,0)
not Allow Custom Form Headers,  these field values apply for ALL Progress
"^DD",8925.1,8925.1,6.14,21,25,0)
Note Titles.  That is, all Progress Notes have header 'Progress Notes',
"^DD",8925.1,8925.1,6.14,21,26,0)
Form Number 'Vice SF 509', and collate together in printouts.
"^DD",8925.1,8925.1,6.14,21,27,0)
 
"^DD",8925.1,8925.1,6.14,21,28,0)
Field Allow Custom Field Headers also determines whether or not related
"^DD",8925.1,8925.1,6.14,21,29,0)
Fields Print Form Header, Print Form Number, Print Group, (and even Allow
"^DD",8925.1,8925.1,6.14,21,30,0)
Custom Field Headers) are applicable at lower levels.  If an entry at a
"^DD",8925.1,8925.1,6.14,21,31,0)
particular level DOES allow Custom Form Headers, then these related fields
"^DD",8925.1,8925.1,6.14,21,32,0)
DO APPLY to descendants at the next lower level.  If an entry at a
"^DD",8925.1,8925.1,6.14,21,33,0)
particular level DOES NOT allow Custom Form Headers, then ALL LOWER LEVELS
"^DD",8925.1,8925.1,6.14,21,34,0)
inherit the the prohibition, and the related fields DO NOT APPLY at ANY
"^DD",8925.1,8925.1,6.14,21,35,0)
lower levels.
"^DD",8925.1,8925.1,6.14,21,36,0)
  
"^DD",8925.1,8925.1,6.14,21,37,0)
Example: Since Class Progress Notes does NOT Allow Custom Form Headers,
"^DD",8925.1,8925.1,6.14,21,38,0)
fields Print Form Header, Print Form Number, Print Group, and Allow Custom
"^DD",8925.1,8925.1,6.14,21,39,0)
Field Headers DO NOT APPLY to Document Classes or Titles under Progress
"^DD",8925.1,8925.1,6.14,21,40,0)
Notes.  This means that Document Definitions for documents requiring
"^DD",8925.1,8925.1,6.14,21,41,0)
different Form Headers/Numbers must be placed under a separate line of
"^DD",8925.1,8925.1,6.14,21,42,0)
descent in the hierarchy; they cannot be under Progress Notes.
"^DD",8925.1,8925.1,6.14,21,43,0)
 
"^DD",8925.1,8925.1,6.14,21,44,0)
Example: Class Clinical Documents, the Mother of all Document Definitions,
"^DD",8925.1,8925.1,6.14,21,45,0)
does not want to REQUIRE all Document Definitions under it to use one
"^DD",8925.1,8925.1,6.14,21,46,0)
common Header.  So Clinical Documents DOES Allow Custom Form Headers.
"^DD",8925.1,8925.1,6.14,21,47,0)
Classes/Document Classes UNDER CLinical Documents can decide for
"^DD",8925.1,8925.1,6.14,21,48,0)
themselves whether or not to Allow Custom Headers for their own Items.
"^DD",8925.1,8925.1,6.14,21,49,0)
 
"^DD",8925.1,8925.1,6.14,21,50,0)
Example: Class DISCHARGE SUMMARY has only one Form Header and Number which
"^DD",8925.1,8925.1,6.14,21,51,0)
is used by all Discharge Summary documents. So Class Discharge Summary
"^DD",8925.1,8925.1,6.14,21,52,0)
does NOT Allow Custom Headers.
"^DD",8925.1,8925.1,6.14,21,53,0)
 
"^DD",8925.1,8925.1,6.14,21,54,0)
Example: Class FORMS might contain miscellaneous documents, each using
"^DD",8925.1,8925.1,6.14,21,55,0)
a different Form with its own Form Header and Form Number.  So Class Forms
"^DD",8925.1,8925.1,6.14,21,56,0)
would Allow Custom Headers.
"^DD",8925.1,8925.1,6.14,21,57,0)
 
"^DD",8925.1,8925.1,6.14,21,58,0)
Field Allow Custom Form Headers may be set for Document Definitions of
"^DD",8925.1,8925.1,6.14,21,59,0)
Type Class or Document Class only, and affects the DESCENDANTS of the
"^DD",8925.1,8925.1,6.14,21,60,0)
entry for which it is set.
"^DD",8925.1,8925.1,6.14,21,61,0)
 
"^DD",8925.1,8925.1,6.14,21,62,0)
If a DOCUMENT CLASS Allows Custom Form Headers, then TIUF, the Document
"^DD",8925.1,8925.1,6.14,21,63,0)
Definition Utility, does not permit a descendant Title to be activated
"^DD",8925.1,8925.1,6.14,21,64,0)
unless fields Print Form Header, Print Form Number, and Print Group have a
"^DD",8925.1,8925.1,6.14,21,65,0)
value (of their own or inherited).  If NO Header, or Number is desired,
"^DD",8925.1,8925.1,6.14,21,66,0)
enter 'NONE'. If NO Print Group is desired, enter '0'.
"^DD",8925.1,8925.1,6.14,21,67,0)
 
"^DD",8925.1,8925.1,6.14,21,68,0)
For information on editing heritable fields, see Technical field Edit
"^DD",8925.1,8925.1,6.14,21,69,0)
Template.
"^DD",8925.1,8925.1,6.14,"DT")
2970128
"^DD",8925.1,8925.1,7,0)
VISIT LINKAGE METHOD^KX^^7;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.1,8925.1,7,3)
Please enter the MUMPS code to be executed to establish Visit Linkage.
"^DD",8925.1,8925.1,7,4)
D HELP1^TIUFXHLX(7)
"^DD",8925.1,8925.1,7,9)
@
"^DD",8925.1,8925.1,7,21,0)
^^6^6^2970108^^
"^DD",8925.1,8925.1,7,21,1,0)
Applies to Types Class, Document Class, Title.  This MUMPS code is
"^DD",8925.1,8925.1,7,21,2,0)
executed to establish Visit Linkage, usually displaying appropriate visits
"^DD",8925.1,8925.1,7,21,3,0)
and prompting the user to select the correct one.
"^DD",8925.1,8925.1,7,21,4,0)
 
"^DD",8925.1,8925.1,7,21,5,0)
Heritable.  TECHNICAL Field.  For information on editing heritable fields,
"^DD",8925.1,8925.1,7,21,6,0)
see Technical Field Edit Template.
"^DD",8925.1,8925.1,7,"DT")
2961022
"^DD",8925.1,8925.1,8,0)
VALIDATION METHOD^KX^^8;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.1,8925.1,8,3)
Please enter the MUMPS code to be executed to validate the selection of patient and Visit/Admission.
"^DD",8925.1,8925.1,8,4)
D HELP1^TIUFXHLX(8)
"^DD",8925.1,8925.1,8,9)
@
"^DD",8925.1,8925.1,8,21,0)
^^7^7^2970108^^
"^DD",8925.1,8925.1,8,21,1,0)
Applies to Types Class, Document Class, Title.  This is the MUMPS code to
"^DD",8925.1,8925.1,8,21,2,0)
be invoked when validating the visit and other fixed field information on
"^DD",8925.1,8925.1,8,21,3,0)
a record during entry/edit.  User is asked to OK or to correct the
"^DD",8925.1,8925.1,8,21,4,0)
information.
"^DD",8925.1,8925.1,8,21,5,0)
 
"^DD",8925.1,8925.1,8,21,6,0)
Heritable.  TECHNICAL field.  For information on editing heritable fields,
"^DD",8925.1,8925.1,8,21,7,0)
see Technical field Edit Template.
"^DD",8925.1,8925.1,8,"DT")
2961022
"^DD",8925.1,8925.1,9,0)
OBJECT METHOD^KX^^9;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.1,8925.1,9,3)
This is Standard MUMPS code.
"^DD",8925.1,8925.1,9,9)
@
"^DD",8925.1,8925.1,9,21,0)
^^3^3^2970108^^
"^DD",8925.1,8925.1,9,21,1,0)
Applies to Objects.  This MUMPS code is invoked when a document is entered
"^DD",8925.1,8925.1,9,21,2,0)
whose boilerplate text contains the object.  Extracted data is inserted
"^DD",8925.1,8925.1,9,21,3,0)
into document text.  Author then edits/adds to text.  TECHNICAL field.
"^DD",8925.1,8925.1,9,"DT")
2961022
"^DD",8925.1,8925.1,10,0)
ITEM^8925.14P^^10;0
"^DD",8925.1,8925.1,11,0)
STAT AUTO PRINT EVENT^8925.111SA^^11;0
"^DD",8925.1,8925.1,11,21,0)
^^35^35^2970220^
"^DD",8925.1,8925.1,11,21,1,0)
This parameter applies only to stat documents.
"^DD",8925.1,8925.1,11,21,2,0)
 
"^DD",8925.1,8925.1,11,21,3,0)
This parameter determines at what stage(s) a document should be
"^DD",8925.1,8925.1,11,21,4,0)
automatically printed for chart, either singly when document is ready, or
"^DD",8925.1,8925.1,11,21,5,0)
in batch mode.
"^DD",8925.1,8925.1,11,21,6,0)
 
"^DD",8925.1,8925.1,11,21,7,0)
Some documents will need to be printed for chart only when they are
"^DD",8925.1,8925.1,11,21,8,0)
complete, ie have obtained all expected signatures and cosignatures.
"^DD",8925.1,8925.1,11,21,9,0)
Others should perhaps be printed for chart at an earlier stage, allowing
"^DD",8925.1,8925.1,11,21,10,0)
earlier chart access, and then be reprinted when complete. Documents may
"^DD",8925.1,8925.1,11,21,11,0)
also need to be reprinted AFTER completion for certain events such as
"^DD",8925.1,8925.1,11,21,12,0)
amendment.
"^DD",8925.1,8925.1,11,21,13,0)
 
"^DD",8925.1,8925.1,11,21,14,0)
Any event which should trigger auto printing of the document should be
"^DD",8925.1,8925.1,11,21,15,0)
entered as an auto print event.
"^DD",8925.1,8925.1,11,21,16,0)
 
"^DD",8925.1,8925.1,11,21,17,0)
- SIGNED means firstline signature, as opposed to secondline cosignature.
"^DD",8925.1,8925.1,11,21,18,0)
- COSIGNED, OPTIONAL, INCOMPLETE means when an incomplete document obtains
"^DD",8925.1,8925.1,11,21,19,0)
an optional cosignature.
"^DD",8925.1,8925.1,11,21,20,0)
- COSIGNED, OPTIONAL, COMPLETED means when a previously completed
"^DD",8925.1,8925.1,11,21,21,0)
document obtains an optional cosignature, namely, a walkup.
"^DD",8925.1,8925.1,11,21,22,0)
- COMPLETED means when some event occurs that completes the document, for
"^DD",8925.1,8925.1,11,21,23,0)
example the document obtains its last expected optional cosignature.
"^DD",8925.1,8925.1,11,21,24,0)
 
"^DD",8925.1,8925.1,11,21,25,0)
If one event occurs to a document and corresponds to two selected print
"^DD",8925.1,8925.1,11,21,26,0)
events (such as COMPLETED and COSIGNED OPTIONAL INCOMPLETE), the document
"^DD",8925.1,8925.1,11,21,27,0)
will only print once.
"^DD",8925.1,8925.1,11,21,28,0)
 
"^DD",8925.1,8925.1,11,21,29,0)
If parameter is not entered and Document Definition has no ancestor to
"^DD",8925.1,8925.1,11,21,30,0)
inherit from, parameter assumes default value N for NONE.  If parameter is
"^DD",8925.1,8925.1,11,21,31,0)
not entered and Document Definition has a parent to inherit from, then
"^DD",8925.1,8925.1,11,21,32,0)
parameter assumes value (assumed or explicit) of parent print events. If
"^DD",8925.1,8925.1,11,21,33,0)
parameter is non applicable because Document Definition does not allow
"^DD",8925.1,8925.1,11,21,34,0)
stat documents, or because Document Definition does not allow auto
"^DD",8925.1,8925.1,11,21,35,0)
printing, enter N for NONE.
"^DD",8925.1,8925.1,11,"DT")
2940621
"^DD",8925.1,8925.1,12,0)
ROUTINE AUTO PRINT EVENT^8925.112SA^^12;0
"^DD",8925.1,8925.1,12,21,0)
^^5^5^2970220^
"^DD",8925.1,8925.1,12,21,1,0)
This parameter applies to routine (non-stat) documents only. Documents
"^DD",8925.1,8925.1,12,21,2,0)
whose Document Definitions do not allow stat documents are considered
"^DD",8925.1,8925.1,12,21,3,0)
routine.
"^DD",8925.1,8925.1,12,21,4,0)
 
"^DD",8925.1,8925.1,12,21,5,0)
See parameter STAT AUTO PRINT EVENT for description.
"^DD",8925.1,8925.1,13,0)
PROCESSING STEPS^8925.113P^^13;0
"^DD",8925.1,8925.1,13,21,0)
^^3^3^2950216^^
"^DD",8925.1,8925.1,13,21,1,0)
This sub-file contains the optional and required steps for processing any 
"^DD",8925.1,8925.1,13,21,2,0)
document, along with the states (e.g., unverified -> unsigned) that a given
"^DD",8925.1,8925.1,13,21,3,0)
step (e.g., verification) moves the document between.
"^DD",8925.1,8925.1,14,0)
DIALOG^8925.114^^DIALOG;0
"^DD",8925.1,8925.1,14,21,0)
^^2^2^2950606^
"^DD",8925.1,8925.1,14,21,1,0)
This sub-file contains the data necessary to handle server-based definition 
"^DD",8925.1,8925.1,14,21,2,0)
for fixed-field data capture in TIU.
"^DD",8925.1,8925.1,99,0)
TIMESTAMP^F^^99;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>15!($L(X)<1) X
"^DD",8925.1,8925.1,99,1,0)
^.1
"^DD",8925.1,8925.1,99,1,1,0)
8925.1^AM^MUMPS
"^DD",8925.1,8925.1,99,1,1,1)
D SET^TIUDD
"^DD",8925.1,8925.1,99,1,1,2)
D KILL^TIUDD
"^DD",8925.1,8925.1,99,1,1,"%D",0)
^^2^2^2950911^^^
"^DD",8925.1,8925.1,99,1,1,"%D",1,0)
This cross-reference invokes menu compilation in ^XUTL("XQORM",
"^DD",8925.1,8925.1,99,1,1,"%D",2,0)
DA;TIU(8925.1, when the TIMESTAMP field is modified.
"^DD",8925.1,8925.1,99,1,1,"DT")
2940720
"^DD",8925.1,8925.1,99,3)
Answer must be 1-15 characters in length.
"^DD",8925.1,8925.1,99,"DT")
2940720
"^DD",8925.1,8925.11,0)
UPLOAD DELIMITED ASCII HEADER SUB-FIELD^^1^8
"^DD",8925.1,8925.11,0,"DT")
2951004
"^DD",8925.1,8925.11,0,"ID",.02)
W "   ",$P(^(0),U,2)
"^DD",8925.1,8925.11,0,"IX","B",8925.11,.01)

"^DD",8925.1,8925.11,0,"IX","C",8925.11,.02)

"^DD",8925.1,8925.11,0,"IX","D",8925.11,.03)

"^DD",8925.1,8925.11,0,"IX","E",8925.11,.04)

"^DD",8925.1,8925.11,0,"NM","UPLOAD DELIMITED ASCII HEADER")

"^DD",8925.1,8925.11,0,"UP")
8925.1
"^DD",8925.1,8925.11,.01,0)
HEADER PIECE^MNJ2,0X^^0;1^K:+X'=X!(X>30)!(X<1)!(X?.E1"."1N.N) X S:$D(X) DINUM=X
"^DD",8925.1,8925.11,.01,1,0)
^.1
"^DD",8925.1,8925.11,.01,1,1,0)
8925.11^B
"^DD",8925.1,8925.11,.01,1,1,1)
S ^TIU(8925.1,DA(1),"ITEM","B",$E(X,1,30),DA)=""
"^DD",8925.1,8925.11,.01,1,1,2)
K ^TIU(8925.1,DA(1),"ITEM","B",$E(X,1,30),DA)
"^DD",8925.1,8925.11,.01,3)
Enter the delimiter-piece for the next header item.
"^DD",8925.1,8925.11,.01,21,0)
^^2^2^2970107^
"^DD",8925.1,8925.11,.01,21,1,0)
This is the number for this piece (item) of the header.  Start with
"^DD",8925.1,8925.11,.01,21,2,0)
number 1 for the first piece.
"^DD",8925.1,8925.11,.01,"DT")
2921021
"^DD",8925.1,8925.11,.02,0)
ITEM NAME^F^^0;2^K:$L(X)>30!($L(X)<2) X
"^DD",8925.1,8925.11,.02,1,0)
^.1
"^DD",8925.1,8925.11,.02,1,1,0)
8925.11^C
"^DD",8925.1,8925.11,.02,1,1,1)
S ^TIU(8925.1,DA(1),"ITEM","C",$E(X,1,30),DA)=""
"^DD",8925.1,8925.11,.02,1,1,2)
K ^TIU(8925.1,DA(1),"ITEM","C",$E(X,1,30),DA)
"^DD",8925.1,8925.11,.02,1,1,"%D",0)
^^2^2^2921021^
"^DD",8925.1,8925.11,.02,1,1,"%D",1,0)
This REGULAR FileMan cross-reference on the ITEM NAME is used in the
"^DD",8925.1,8925.11,.02,1,1,"%D",2,0)
look-up and edit process.
"^DD",8925.1,8925.11,.02,1,1,"DT")
2920605
"^DD",8925.1,8925.11,.02,3)
Enter the name of the header item.
"^DD",8925.1,8925.11,.02,21,0)
^^2^2^2970107^
"^DD",8925.1,8925.11,.02,21,1,0)
This is the name of the item in the ASCII message header.  Item Name is
"^DD",8925.1,8925.11,.02,21,2,0)
used in help messages for the person dictating a document.
"^DD",8925.1,8925.11,.02,"DT")
2921021
"^DD",8925.1,8925.11,.03,0)
FIELD NUMBER^F^^0;3^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>10!($L(X)<1) X
"^DD",8925.1,8925.11,.03,1,0)
^.1
"^DD",8925.1,8925.11,.03,1,1,0)
8925.11^D
"^DD",8925.1,8925.11,.03,1,1,1)
S ^TIU(8925.1,DA(1),"ITEM","D",$E(X,1,30),DA)=""
"^DD",8925.1,8925.11,.03,1,1,2)
K ^TIU(8925.1,DA(1),"ITEM","D",$E(X,1,30),DA)
"^DD",8925.1,8925.11,.03,1,1,"%D",0)
^^3^3^2921021^
"^DD",8925.1,8925.11,.03,1,1,"%D",1,0)
This REGULAR FileMan cross-reference by field number is used by the
"^DD",8925.1,8925.11,.03,1,1,"%D",2,0)
filer/router to identify header-pieces with field numbers in the target
"^DD",8925.1,8925.11,.03,1,1,"%D",3,0)
file.
"^DD",8925.1,8925.11,.03,1,1,"DT")
2921021
"^DD",8925.1,8925.11,.03,3)
Enter the FIELD # of the item in the target file.
"^DD",8925.1,8925.11,.03,21,0)
^^2^2^2970107^
"^DD",8925.1,8925.11,.03,21,1,0)
This is the field number in the target file which corresponds to this
"^DD",8925.1,8925.11,.03,21,2,0)
header item.
"^DD",8925.1,8925.11,.03,"DT")
2921021
"^DD",8925.1,8925.11,.04,0)
LOOKUP LOCAL VARIABLE NAME^F^^0;4^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>8!($L(X)<1)!'(X?1A1.7E) X
"^DD",8925.1,8925.11,.04,1,0)
^.1
"^DD",8925.1,8925.11,.04,1,1,0)
8925.11^E
"^DD",8925.1,8925.11,.04,1,1,1)
S ^TIU(8925.1,DA(1),"ITEM","E",$E(X,1,30),DA)=""
"^DD",8925.1,8925.11,.04,1,1,2)
K ^TIU(8925.1,DA(1),"ITEM","E",$E(X,1,30),DA)
"^DD",8925.1,8925.11,.04,1,1,"%D",0)
^^3^3^2921109^
"^DD",8925.1,8925.11,.04,1,1,"%D",1,0)
This cross-reference is used by the router/filer to determine which pieces
"^DD",8925.1,8925.11,.04,1,1,"%D",2,0)
of the header should be set into special variables which may be required by
"^DD",8925.1,8925.11,.04,1,1,"%D",3,0)
the lookup routine.
"^DD",8925.1,8925.11,.04,1,1,"DT")
2921109
"^DD",8925.1,8925.11,.04,3)
Enter the required local variable into which this piece will be set.
"^DD",8925.1,8925.11,.04,21,0)
^^11^11^2970107^
"^DD",8925.1,8925.11,.04,21,1,0)
This field specifies the local variable name into which this piece of the
"^DD",8925.1,8925.11,.04,21,2,0)
message header will be set.  The local variable is used by the Look-Up
"^DD",8925.1,8925.11,.04,21,3,0)
Method.  For example, if this piece of the header is the patient social
"^DD",8925.1,8925.11,.04,21,4,0)
security number, the Lookup Local Variable Name might be TIUSSN.  The
"^DD",8925.1,8925.11,.04,21,5,0)
social security number as written by the transcriptionist is first
"^DD",8925.1,8925.11,.04,21,6,0)
transformed by any existing Transform Code, and then set into this
"^DD",8925.1,8925.11,.04,21,7,0)
variable (e.g. TIUSSN) for use in Look-Up Method code.
"^DD",8925.1,8925.11,.04,21,8,0)
 
"^DD",8925.1,8925.11,.04,21,9,0)
Lookup Local Variable Name is necessary only if the information in this
"^DD",8925.1,8925.11,.04,21,10,0)
piece is required in order to look up the appropriate entry in the target
"^DD",8925.1,8925.11,.04,21,11,0)
file.
"^DD",8925.1,8925.11,.04,"DT")
2921109
"^DD",8925.1,8925.11,.05,0)
EXAMPLE ENTRY^F^^0;5^K:$L(X)>39!($L(X)<2) X
"^DD",8925.1,8925.11,.05,3)
Answer must be 2-39 characters in length.
"^DD",8925.1,8925.11,.05,21,0)
^^10^10^2970108^^
"^DD",8925.1,8925.11,.05,21,1,0)
This field is used to store sample data for this item in the form the
"^DD",8925.1,8925.11,.05,21,2,0)
transcriptionist is expected to use when transcribing it. For example, if
"^DD",8925.1,8925.11,.05,21,3,0)
a patient has Social Security Number ***********, and the transcriptionist
"^DD",8925.1,8925.11,.05,21,4,0)
is expected to write ***********, then an Example Entry should have the
"^DD",8925.1,8925.11,.05,21,5,0)
form ***********.
"^DD",8925.1,8925.11,.05,21,6,0)
 
"^DD",8925.1,8925.11,.05,21,7,0)
The Transform Code, if it exists, then transforms the transcribed Social
"^DD",8925.1,8925.11,.05,21,8,0)
Security Number *********** into the appropriate format for the target
"^DD",8925.1,8925.11,.05,21,9,0)
file before using the Social Security Number to look-up the appropriate
"^DD",8925.1,8925.11,.05,21,10,0)
target file entry and/or before entering it in the target file.
"^DD",8925.1,8925.11,.05,"DT")
2930224
"^DD",8925.1,8925.11,.06,0)
CLINICIAN MUST DICTATE^S^1:YES;0:NO;^0;6^Q
"^DD",8925.1,8925.11,.06,3)
Answer yes if this field needs to be dictated by the clinician
"^DD",8925.1,8925.11,.06,21,0)
^^5^5^2970108^
"^DD",8925.1,8925.11,.06,21,1,0)
States whether or not this piece of the header should be dictated by the
"^DD",8925.1,8925.11,.06,21,2,0)
Clinician.  Will be used by the Clinician Help routine to determine if
"^DD",8925.1,8925.11,.06,21,3,0)
this field should be shown as data that should be dictated.  (Some pieces
"^DD",8925.1,8925.11,.06,21,4,0)
can be entered by the transcriber without being dictated, such as the
"^DD",8925.1,8925.11,.06,21,5,0)
transcriber identification).
"^DD",8925.1,8925.11,.06,"DT")
2930423
"^DD",8925.1,8925.11,.07,0)
REQUIRED FIELD?^S^1:YES;0:NO;^0;7^Q
"^DD",8925.1,8925.11,.07,3)
Please indicate whether the field is required.
"^DD",8925.1,8925.11,.07,21,0)
^^5^5^2970108^
"^DD",8925.1,8925.11,.07,21,1,0)
This field is used to determine whether a given header piece is required
"^DD",8925.1,8925.11,.07,21,2,0)
by the application (e.g., Author and Attending Physician may be required
"^DD",8925.1,8925.11,.07,21,3,0)
for the ongoing processing of a Discharge Summary).  Records lacking
"^DD",8925.1,8925.11,.07,21,4,0)
required fields WILL be entered if possible into the target file but will
"^DD",8925.1,8925.11,.07,21,5,0)
generate Missing Field Error Alerts.
"^DD",8925.1,8925.11,.07,"DT")
2951004
"^DD",8925.1,8925.11,1,0)
TRANSFORM CODE^K^^1;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.1,8925.11,1,3)
This is Standard MUMPS code.
"^DD",8925.1,8925.11,1,9)
@
"^DD",8925.1,8925.11,1,21,0)
^^11^11^2970108^
"^DD",8925.1,8925.11,1,21,1,0)
This standard MUMPS code transforms the transcribed value of the header
"^DD",8925.1,8925.11,1,21,2,0)
piece into a format acceptable to FileMan (e.g., patient social security
"^DD",8925.1,8925.11,1,21,3,0)
number *********** must be transformed to 555121212 or to whatever
"^DD",8925.1,8925.11,1,21,4,0)
(external) format FileMan accepts when a user edits the social security
"^DD",8925.1,8925.11,1,21,5,0)
number field in the target file).
"^DD",8925.1,8925.11,1,21,6,0)
 
"^DD",8925.1,8925.11,1,21,7,0)
Field values are transformed before being set into Special Lookup
"^DD",8925.1,8925.11,1,21,8,0)
Variables and before being set into Target Text File Fields.
"^DD",8925.1,8925.11,1,21,9,0)
 
"^DD",8925.1,8925.11,1,21,10,0)
Field is necessary only if transcribed piece is not in the format Fileman
"^DD",8925.1,8925.11,1,21,11,0)
accepts for the target file.
"^DD",8925.1,8925.11,1,"DT")
2930219
"^DD",8925.1,8925.111,0)
STAT AUTO PRINT EVENT SUB-FIELD^^.01^1
"^DD",8925.1,8925.111,0,"DT")
2940621
"^DD",8925.1,8925.111,0,"IX","B",8925.111,.01)

"^DD",8925.1,8925.111,0,"NM","STAT AUTO PRINT EVENT")

"^DD",8925.1,8925.111,0,"UP")
8925.1
"^DD",8925.1,8925.111,.01,0)
STAT AUTO PRINT EVENT^MS^N:NONE;T:TRANSCRIBED;R:RELEASED;V:VERIFIED;S:SIGNED;CSR:COSIGNED, REQUIRED;CSOINC:COSIGNED, OPTIONAL, INCOMPLETE;CSOCP:COSIGNED, OPTIONAL, COMPLETED;CP:COMLETED;AD:ADDENDUM ADDED;AM:AMENDED;^0;1^Q
"^DD",8925.1,8925.111,.01,1,0)
^.1
"^DD",8925.1,8925.111,.01,1,1,0)
8925.111^B
"^DD",8925.1,8925.111,.01,1,1,1)
S ^TIU(8925.1,DA(1),11,"B",$E(X,1,30),DA)=""
"^DD",8925.1,8925.111,.01,1,1,2)
K ^TIU(8925.1,DA(1),11,"B",$E(X,1,30),DA)
"^DD",8925.1,8925.111,.01,3)
Enter every event which should trigger auto printing of document whenever the event occurs.
"^DD",8925.1,8925.111,.01,"DT")
2941027
"^DD",8925.1,8925.112,0)
ROUTINE AUTO PRINT EVENT SUB-FIELD^^.01^1
"^DD",8925.1,8925.112,0,"DT")
2940621
"^DD",8925.1,8925.112,0,"IX","B",8925.112,.01)

"^DD",8925.1,8925.112,0,"NM","ROUTINE AUTO PRINT EVENT")

"^DD",8925.1,8925.112,0,"UP")
8925.1
"^DD",8925.1,8925.112,.01,0)
ROUTINE AUTO PRINT EVENT^MS^N:NONE;T:TRANSCRIBED;R:RELEASED;V:VERIFIED;S:SIGNED;CSR:COSIGNED, REQUIRED;CSOINC:COSIGNED, OPTIONAL, INCOMPLETE;CP:COMPLETED;CSOCP:CONSIGNED, OPTIONAL, COMPLETED;AD:ADDENDUM ADDED;AM:AMENDED;^0;1^Q
"^DD",8925.1,8925.112,.01,1,0)
^.1
"^DD",8925.1,8925.112,.01,1,1,0)
8925.112^B
"^DD",8925.1,8925.112,.01,1,1,1)
S ^TIU(8925.1,DA(1),12,"B",$E(X,1,30),DA)=""
"^DD",8925.1,8925.112,.01,1,1,2)
K ^TIU(8925.1,DA(1),12,"B",$E(X,1,30),DA)
"^DD",8925.1,8925.112,.01,3)
Enter an event which should trigger auto printing of routine documents.
"^DD",8925.1,8925.112,.01,"DT")
2940621
"^DD",8925.1,8925.113,0)
PROCESSING STEPS SUB-FIELD^^.05^5
"^DD",8925.1,8925.113,0,"DT")
2950216
"^DD",8925.1,8925.113,0,"IX","B",8925.113,.01)

"^DD",8925.1,8925.113,0,"NM","PROCESSING STEPS")

"^DD",8925.1,8925.113,0,"UP")
8925.1
"^DD",8925.1,8925.113,.01,0)
PROCESSING STEP^MP8930.8'^USR(8930.8,^0;1^Q
"^DD",8925.1,8925.113,.01,1,0)
^.1
"^DD",8925.1,8925.113,.01,1,1,0)
8925.113^B
"^DD",8925.1,8925.113,.01,1,1,1)
S ^TIU(8925.1,DA(1),13,"B",$E(X,1,30),DA)=""
"^DD",8925.1,8925.113,.01,1,1,2)
K ^TIU(8925.1,DA(1),13,"B",$E(X,1,30),DA)
"^DD",8925.1,8925.113,.01,3)
Please indicate a step involved in processing this document.
"^DD",8925.1,8925.113,.01,21,0)
^^2^2^2950216^
"^DD",8925.1,8925.113,.01,21,1,0)
This is a step or action (e.g., verification) in the processing of a document
"^DD",8925.1,8925.113,.01,21,2,0)
that moves it from one state (e.g., unverified) to another (e.g., unsigned).
"^DD",8925.1,8925.113,.01,"DT")
2950216
"^DD",8925.1,8925.113,.02,0)
SEQUENCE^NJ3,0^^0;2^K:+X'=X!(X>999)!(X<0)!(X?.E1"."1N.N) X
"^DD",8925.1,8925.113,.02,3)
Indicate the order in processing this document where this step should occur.
"^DD",8925.1,8925.113,.02,21,0)
^^4^4^2950216^
"^DD",8925.1,8925.113,.02,21,1,0)
This is the serial sequence in the processing of the document in which the 
"^DD",8925.1,8925.113,.02,21,2,0)
current step should ordinarily occur.  This field is only necessary when the
"^DD",8925.1,8925.113,.02,21,3,0)
process in question must occur in a particular sequence (e.g., to insure
"^DD",8925.1,8925.113,.02,21,4,0)
that a document is always released from draft before it is verified).
"^DD",8925.1,8925.113,.02,"DT")
2950216
"^DD",8925.1,8925.113,.03,0)
REQUIRED?^S^1:REQUIRED;0:OPTIONAL;^0;3^Q
"^DD",8925.1,8925.113,.03,3)
Indicate whether the step is required or optional
"^DD",8925.1,8925.113,.03,21,0)
^^4^4^2950216^
"^DD",8925.1,8925.113,.03,21,1,0)
This field specifies whether the step is required or optional for completion
"^DD",8925.1,8925.113,.03,21,2,0)
of the document (e.g., Dictation and transcription is the typical means by
"^DD",8925.1,8925.113,.03,21,3,0)
which Discharge Summaries are acquired, but they may be entered directly by
"^DD",8925.1,8925.113,.03,21,4,0)
the provider, if preferred).
"^DD",8925.1,8925.113,.03,"DT")
2950216
"^DD",8925.1,8925.113,.04,0)
RESULTING STATUS^P8930.6'^USR(8930.6,^0;4^Q
"^DD",8925.1,8925.113,.04,3)
Indicate the status resulting from the step being taken.
"^DD",8925.1,8925.113,.04,21,0)
^^4^4^2950216^
"^DD",8925.1,8925.113,.04,21,1,0)
This is the status of the document following completion of the step in 
"^DD",8925.1,8925.113,.04,21,2,0)
question.  For instance, if a discharge summary is to be registered as
"^DD",8925.1,8925.113,.04,21,3,0)
unsigned following verification, this would be indicated in the RESULTING 
"^DD",8925.1,8925.113,.04,21,4,0)
STATUS field.
"^DD",8925.1,8925.113,.04,"DT")
2950216
"^DD",8925.1,8925.113,.05,0)
CONDITION TEXT^F^^0;5^K:$L(X)>40!($L(X)<3) X
"^DD",8925.1,8925.113,.05,3)
Condition under which the step will result in the status as indicated.
"^DD",8925.1,8925.113,.05,"DT")
2950216
"^DD",8925.1,8925.114,0)
DIALOG SUB-FIELD^^117^12
"^DD",8925.1,8925.114,0,"DT")
2951002
"^DD",8925.1,8925.114,0,"IX","AS",8925.114,.03)

"^DD",8925.1,8925.114,0,"IX","B",8925.114,.01)

"^DD",8925.1,8925.114,0,"NM","DIALOG")

"^DD",8925.1,8925.114,0,"UP")
8925.1
"^DD",8925.1,8925.114,.01,0)
PROMPT^MF^^0;1^K:$L(X)>30!($L(X)<2) X
"^DD",8925.1,8925.114,.01,1,0)
^.1
"^DD",8925.1,8925.114,.01,1,1,0)
8925.114^B
"^DD",8925.1,8925.114,.01,1,1,1)
S ^TIU(8925.1,DA(1),"DIALOG","B",$E(X,1,30),DA)=""
"^DD",8925.1,8925.114,.01,1,1,2)
K ^TIU(8925.1,DA(1),"DIALOG","B",$E(X,1,30),DA)
"^DD",8925.1,8925.114,.01,3)
Enter the caption with which the user will be prompted.
"^DD",8925.1,8925.114,.01,21,0)
^^2^2^2950606^^^
"^DD",8925.1,8925.114,.01,21,1,0)
This is the prompt with which the user will be presented during interactive 
"^DD",8925.1,8925.114,.01,21,2,0)
entry of the document.
"^DD",8925.1,8925.114,.01,"DT")
2950606
"^DD",8925.1,8925.114,.02,0)
ITEM NAME^F^^0;2^K:$L(X)>50!($L(X)<2) X
"^DD",8925.1,8925.114,.02,3)
Answer must be 2-50 characters in length.
"^DD",8925.1,8925.114,.02,21,0)
^^2^2^2950606^^
"^DD",8925.1,8925.114,.02,21,1,0)
This is a descriptive name for the datum which will help descibe the prompt 
"^DD",8925.1,8925.114,.02,21,2,0)
for the user.
"^DD",8925.1,8925.114,.02,"DT")
2950606
"^DD",8925.1,8925.114,.03,0)
SEQUENCE^NJ3,0^^0;3^K:+X'=X!(X>999)!(X<1)!(X?.E1"."1N.N) X
"^DD",8925.1,8925.114,.03,1,0)
^.1
"^DD",8925.1,8925.114,.03,1,1,0)
8925.114^AS
"^DD",8925.1,8925.114,.03,1,1,1)
S ^TIU(8925.1,DA(1),"DIALOG","AS",$E(X,1,30),DA)=""
"^DD",8925.1,8925.114,.03,1,1,2)
K ^TIU(8925.1,DA(1),"DIALOG","AS",$E(X,1,30),DA)
"^DD",8925.1,8925.114,.03,1,1,"%D",0)
^^2^2^2950606^
"^DD",8925.1,8925.114,.03,1,1,"%D",1,0)
This REGULAR FileMan Cross-reference on the sequence sub-field of the
"^DD",8925.1,8925.114,.03,1,1,"%D",2,0)
Dialog Multiple will facilitate appropriate serialization of prompts.
"^DD",8925.1,8925.114,.03,1,1,"DT")
2950606
"^DD",8925.1,8925.114,.03,3)
Type a Number between 1 and 999, 0 Decimal Digits
"^DD",8925.1,8925.114,.03,21,0)
^^2^2^2950606^
"^DD",8925.1,8925.114,.03,21,1,0)
This is the sequence of the prompt within the dialog.  On the Windows Client 
"^DD",8925.1,8925.114,.03,21,2,0)
this will correspond with the Tab Order Property of the prompt.
"^DD",8925.1,8925.114,.03,"DT")
2950606
"^DD",8925.1,8925.114,.04,0)
FIELD^FX^^0;4^K:$L(X)>10!($L(X)<1)!(+X<0) X
"^DD",8925.1,8925.114,.04,3)
Enter the field in the TARGET FILE in which the response is to be stored.
"^DD",8925.1,8925.114,.04,4)

"^DD",8925.1,8925.114,.04,21,0)
^^2^2^2970116^^
"^DD",8925.1,8925.114,.04,21,1,0)
This is the field in the target file in which the user's response will be 
"^DD",8925.1,8925.114,.04,21,2,0)
stored.
"^DD",8925.1,8925.114,.04,"DT")
2970116
"^DD",8925.1,8925.114,.05,0)
REQUIRED^S^1:YES;0:NO;^0;5^Q
"^DD",8925.1,8925.114,.05,3)
Indicate whether a response is required.
"^DD",8925.1,8925.114,.05,21,0)
^^2^2^2950607^
"^DD",8925.1,8925.114,.05,21,1,0)
Please indicate whether a response to this prompt is required, in order to 
"^DD",8925.1,8925.114,.05,21,2,0)
complete the dialog.
"^DD",8925.1,8925.114,.05,"DT")
2950607
"^DD",8925.1,8925.114,.06,0)
VISIBLE^S^0:NO;1:YES;^0;6^Q
"^DD",8925.1,8925.114,.06,3)
Indicate wheter the prompt will be visible to the user.
"^DD",8925.1,8925.114,.06,21,0)
^^2^2^2950607^
"^DD",8925.1,8925.114,.06,21,1,0)
This field specifies whether a given datum will be prompted for, or 
"^DD",8925.1,8925.114,.06,21,2,0)
"stuffed," based on execution of the SET METHOD for a given prompt.
"^DD",8925.1,8925.114,.06,"DT")
2950607
"^DD",8925.1,8925.114,1,0)
SET METHOD^K^^1;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.1,8925.114,1,3)
This is Standard MUMPS code.
"^DD",8925.1,8925.114,1,9)
@
"^DD",8925.1,8925.114,1,21,0)
^^5^5^2950607^^^
"^DD",8925.1,8925.114,1,21,1,0)
This is the mumps code for determining the default value of an interactive
"^DD",8925.1,8925.114,1,21,2,0)
("visible") prompt, and for setting the value to be non-interactively 
"^DD",8925.1,8925.114,1,21,3,0)
"stuffed" on invokation of an "invisible" prompt.  Regardless of the 
"^DD",8925.1,8925.114,1,21,4,0)
syntactic approach (e.g., subroutine or extrinsic function, the return
"^DD",8925.1,8925.114,1,21,5,0)
value of the method should be placed in the local varible X.
"^DD",8925.1,8925.114,1,"DT")
2950607
"^DD",8925.1,8925.114,101,0)
WINDOWS CONTROL^S^1:LongList;2:SimpleList;3:Edit;4:Memo;^W;1^Q
"^DD",8925.1,8925.114,101,3)
Enter the Windows control appropriate for this prompt
"^DD",8925.1,8925.114,101,21,0)
^^2^2^2950907^
"^DD",8925.1,8925.114,101,21,1,0)
Stores the type of Windows control necessary to get the data for this
"^DD",8925.1,8925.114,101,21,2,0)
prompt.
"^DD",8925.1,8925.114,101,"DT")
2950907
"^DD",8925.1,8925.114,102,0)
API NAME^F^^W;2^K:$L(X)>30!($L(X)<3) X
"^DD",8925.1,8925.114,102,3)
Answer must be 3-30 characters in length.
"^DD",8925.1,8925.114,102,21,0)
^^3^3^2950907^
"^DD",8925.1,8925.114,102,21,1,0)
This is the API that should be called by the broker when the control is
"^DD",8925.1,8925.114,102,21,2,0)
used.  How the API is used varies with the control.  Examples are:
"^DD",8925.1,8925.114,102,21,3,0)
filling list boxes, getting boilerplate text, etc.
"^DD",8925.1,8925.114,102,"DT")
2951002
"^DD",8925.1,8925.114,103,0)
API PARAMETER #1^F^^W;3^K:$L(X)>30!($L(X)<1) X
"^DD",8925.1,8925.114,103,3)
Answer must be 1-30 characters in length.
"^DD",8925.1,8925.114,103,21,0)
^^1^1^2950907^
"^DD",8925.1,8925.114,103,21,1,0)
A parameter that is used by the API may be stored here.
"^DD",8925.1,8925.114,103,"DT")
2950907
"^DD",8925.1,8925.114,113,0)
WINDOWS CONDITION^K^^W3;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.1,8925.114,113,3)
This is Standard MUMPS code.
"^DD",8925.1,8925.114,113,9)
@
"^DD",8925.1,8925.114,113,21,0)
^^3^3^2950907^
"^DD",8925.1,8925.114,113,21,1,0)
This is silent code which is executed when building the dialog for
"^DD",8925.1,8925.114,113,21,2,0)
Windows.  It identifies which prompts should be included in the dialog.
"^DD",8925.1,8925.114,113,21,3,0)
The condition should leave $T failse if the prompt should not be asked.
"^DD",8925.1,8925.114,113,"DT")
2950907
"^DD",8925.1,8925.114,117,0)
WINDOWS DEFAULT^K^^W7;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.1,8925.114,117,3)
This is Standard MUMPS code.
"^DD",8925.1,8925.114,117,9)
@
"^DD",8925.1,8925.114,117,21,0)
^^2^2^2950907^
"^DD",8925.1,8925.114,117,21,1,0)
This code should silently set the default value of a prompt when it is
"^DD",8925.1,8925.114,117,21,2,0)
selected.
"^DD",8925.1,8925.114,117,"DT")
2950907
"^DD",8925.1,8925.12,0)
UPLOAD CAPTIONED ASCII HEADER SUB-FIELD^^1^8
"^DD",8925.1,8925.12,0,"DT")
2951004
"^DD",8925.1,8925.12,0,"IX","B",8925.12,.01)

"^DD",8925.1,8925.12,0,"IX","C",8925.12,.02)

"^DD",8925.1,8925.12,0,"IX","D",8925.12,.03)

"^DD",8925.1,8925.12,0,"IX","E",8925.12,.04)

"^DD",8925.1,8925.12,0,"NM","UPLOAD CAPTIONED ASCII HEADER")

"^DD",8925.1,8925.12,0,"UP")
8925.1
"^DD",8925.1,8925.12,.01,0)
CAPTION^MF^^0;1^K:$L(X)>40!($L(X)<2) X
"^DD",8925.1,8925.12,.01,1,0)
^.1
"^DD",8925.1,8925.12,.01,1,1,0)
8925.12^B
"^DD",8925.1,8925.12,.01,1,1,1)
S ^TIU(8925.1,DA(1),"HEAD","B",$E(X,1,30),DA)=""
"^DD",8925.1,8925.12,.01,1,1,2)
K ^TIU(8925.1,DA(1),"HEAD","B",$E(X,1,30),DA)
"^DD",8925.1,8925.12,.01,3)
Answer must be 2-40 characters in length.
"^DD",8925.1,8925.12,.01,21,0)
^^7^7^2970108^
"^DD",8925.1,8925.12,.01,21,1,0)
NOTE: Users can choose between two possible kinds of Upload Record
"^DD",8925.1,8925.12,.01,21,2,0)
Headers: Captioned or Delimited.  Captioned headers should be used UNLESS
"^DD",8925.1,8925.12,.01,21,3,0)
the site has a way to generate upload headers automatically.
"^DD",8925.1,8925.12,.01,21,4,0)
 
"^DD",8925.1,8925.12,.01,21,5,0)
CAPTION is the caption which the transcriber enters into the captioned
"^DD",8925.1,8925.12,.01,21,6,0)
upload record header immediately preceeding the item data.  It serves to
"^DD",8925.1,8925.12,.01,21,7,0)
distinguish one item of data from the next. Example: PATIENT NAME
"^DD",8925.1,8925.12,.01,"DT")
2930218
"^DD",8925.1,8925.12,.02,0)
ITEM NAME^F^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>20!($L(X)<2) X
"^DD",8925.1,8925.12,.02,1,0)
^.1
"^DD",8925.1,8925.12,.02,1,1,0)
8925.12^C
"^DD",8925.1,8925.12,.02,1,1,1)
S ^TIU(8925.1,DA(1),"HEAD","C",$E(X,1,30),DA)=""
"^DD",8925.1,8925.12,.02,1,1,2)
K ^TIU(8925.1,DA(1),"HEAD","C",$E(X,1,30),DA)
"^DD",8925.1,8925.12,.02,1,1,"%D",0)
^^2^2^2930122^
"^DD",8925.1,8925.12,.02,1,1,"%D",1,0)
This REGULAR FileMan cross-reference on the ITEM NAME is used in the look-up
"^DD",8925.1,8925.12,.02,1,1,"%D",2,0)
and filing processes.
"^DD",8925.1,8925.12,.02,1,1,"DT")
2930122
"^DD",8925.1,8925.12,.02,3)
Enter the name of the header item.
"^DD",8925.1,8925.12,.02,21,0)
^^2^2^2970108^
"^DD",8925.1,8925.12,.02,21,1,0)
This is the name of the item in the ASCII message header.  Item Name is
"^DD",8925.1,8925.12,.02,21,2,0)
used in help messages for the person dictating a document.
"^DD",8925.1,8925.12,.02,"DT")
2930122
"^DD",8925.1,8925.12,.03,0)
FIELD NUMBER^F^^0;3^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>10!($L(X)<1) X
"^DD",8925.1,8925.12,.03,1,0)
^.1
"^DD",8925.1,8925.12,.03,1,1,0)
8925.12^D
"^DD",8925.1,8925.12,.03,1,1,1)
S ^TIU(8925.1,DA(1),"HEAD","D",$E(X,1,30),DA)=""
"^DD",8925.1,8925.12,.03,1,1,2)
K ^TIU(8925.1,DA(1),"HEAD","D",$E(X,1,30),DA)
"^DD",8925.1,8925.12,.03,1,1,"%D",0)
^^2^2^2930122^
"^DD",8925.1,8925.12,.03,1,1,"%D",1,0)
This REGULAR FileMan cross-reference is used by the filer router to identify
"^DD",8925.1,8925.12,.03,1,1,"%D",2,0)
header fields with field numbers in the target file.
"^DD",8925.1,8925.12,.03,1,1,"DT")
2930122
"^DD",8925.1,8925.12,.03,3)
Enter the FIELD # of the item in the target file.
"^DD",8925.1,8925.12,.03,21,0)
^^2^2^2970108^
"^DD",8925.1,8925.12,.03,21,1,0)
This is the FIELD # in the target file which corresponds to this header
"^DD",8925.1,8925.12,.03,21,2,0)
item and where this item of data will be stored.
"^DD",8925.1,8925.12,.03,"DT")
2930122
"^DD",8925.1,8925.12,.04,0)
LOOKUP LOCAL VARIABLE NAME^F^^0;4^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>8!($L(X)<1)!'(X?1A1.7E) X
"^DD",8925.1,8925.12,.04,1,0)
^.1
"^DD",8925.1,8925.12,.04,1,1,0)
8925.12^E
"^DD",8925.1,8925.12,.04,1,1,1)
S ^TIU(8925.1,DA(1),"HEAD","E",$E(X,1,30),DA)=""
"^DD",8925.1,8925.12,.04,1,1,2)
K ^TIU(8925.1,DA(1),"HEAD","E",$E(X,1,30),DA)
"^DD",8925.1,8925.12,.04,1,1,"%D",0)
^^3^3^2930122^
"^DD",8925.1,8925.12,.04,1,1,"%D",1,0)
This REGULAR FileMan cross-reference is used by the router/filer to determine
"^DD",8925.1,8925.12,.04,1,1,"%D",2,0)
which fields of the header should be set into special variables which may be
"^DD",8925.1,8925.12,.04,1,1,"%D",3,0)
required by the lookup routine.
"^DD",8925.1,8925.12,.04,1,1,"DT")
2930122
"^DD",8925.1,8925.12,.04,3)
Enter the required local variable into which this item will be set.
"^DD",8925.1,8925.12,.04,21,0)
^^11^11^2970108^
"^DD",8925.1,8925.12,.04,21,1,0)
This field specifies the local variable name into which this item of the
"^DD",8925.1,8925.12,.04,21,2,0)
upload header will be set.  The local variable is used by the Look-Up
"^DD",8925.1,8925.12,.04,21,3,0)
Method.  For example, if this item of the header is the patient social
"^DD",8925.1,8925.12,.04,21,4,0)
security number, the Lookup Local Variable Name might be TIUSSN.  The
"^DD",8925.1,8925.12,.04,21,5,0)
social security number as written by the transcriptionist is first
"^DD",8925.1,8925.12,.04,21,6,0)
transformed by any existing Transform Code, and then set into this
"^DD",8925.1,8925.12,.04,21,7,0)
variable (e.g. TIUSSN) for use in Look-Up Method code.
"^DD",8925.1,8925.12,.04,21,8,0)
 
"^DD",8925.1,8925.12,.04,21,9,0)
Lookup Local Variable Name is necessary only if the information in this
"^DD",8925.1,8925.12,.04,21,10,0)
piece is required in order to look up the appropriate entry in the target
"^DD",8925.1,8925.12,.04,21,11,0)
file.
"^DD",8925.1,8925.12,.04,"DT")
2930122
"^DD",8925.1,8925.12,.05,0)
EXAMPLE ENTRY^F^^0;5^K:$L(X)>80!($L(X)<2) X
"^DD",8925.1,8925.12,.05,3)
Answer must be 2-80 characters in length.
"^DD",8925.1,8925.12,.05,21,0)
^^9^9^2970108^
"^DD",8925.1,8925.12,.05,21,1,0)
This field is used to store sample data for this item in the form the
"^DD",8925.1,8925.12,.05,21,2,0)
transcriptionist is expected to use when transcribing it.  For example, if
"^DD",8925.1,8925.12,.05,21,3,0)
a patient has social security number ***********, and the transcriptionist
"^DD",8925.1,8925.12,.05,21,4,0)
is expected to write ***********, than an Example Entry should have the
"^DD",8925.1,8925.12,.05,21,5,0)
form ***********.
"^DD",8925.1,8925.12,.05,21,6,0)
 
"^DD",8925.1,8925.12,.05,21,7,0)
The Upload needs to know the exact form the transcriptionist is expected
"^DD",8925.1,8925.12,.05,21,8,0)
to use in case it needs to transform it to make it acceptable to FileMan.
"^DD",8925.1,8925.12,.05,21,9,0)
In this case, the transcriptionist also needs to know the exact form.
"^DD",8925.1,8925.12,.05,"DT")
2930224
"^DD",8925.1,8925.12,.06,0)
CLINICIAN MUST DICTATE^S^1:YES;0:NO;^0;6^Q
"^DD",8925.1,8925.12,.06,3)
Answer yes if this field needs to be dictated by the clinician.
"^DD",8925.1,8925.12,.06,21,0)
^^5^5^2970108^
"^DD",8925.1,8925.12,.06,21,1,0)
States whether or not this item should be dictated by the Clinician.  Will
"^DD",8925.1,8925.12,.06,21,2,0)
be used by the Clinician Help routine to determine if this field should be
"^DD",8925.1,8925.12,.06,21,3,0)
shown as data that should be dictated.  (Some items can be entered by the
"^DD",8925.1,8925.12,.06,21,4,0)
transcriber without being dictated, such as the transcriber
"^DD",8925.1,8925.12,.06,21,5,0)
identification).
"^DD",8925.1,8925.12,.06,"DT")
2930423
"^DD",8925.1,8925.12,.07,0)
REQUIRED FIELD?^S^1:YES;0:NO;^0;7^Q
"^DD",8925.1,8925.12,.07,3)
Please indicate whether field is required by application.
"^DD",8925.1,8925.12,.07,21,0)
^^5^5^2970108^
"^DD",8925.1,8925.12,.07,21,1,0)
This field is used to determine whether a given header item is required
"^DD",8925.1,8925.12,.07,21,2,0)
by the application (e.g., Author and Attending Physician may be required
"^DD",8925.1,8925.12,.07,21,3,0)
for the ongoing processing of a Discharge Summary).  Records lacking
"^DD",8925.1,8925.12,.07,21,4,0)
required fields WILL be entered into the target file, if possible, but
"^DD",8925.1,8925.12,.07,21,5,0)
will generate Missing Field Error Alerts.
"^DD",8925.1,8925.12,.07,"DT")
2951004
"^DD",8925.1,8925.12,1,0)
TRANSFORM CODE^K^^1;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.1,8925.12,1,3)
This is Standard MUMPS code.
"^DD",8925.1,8925.12,1,9)
@
"^DD",8925.1,8925.12,1,21,0)
^^11^11^2970108^
"^DD",8925.1,8925.12,1,21,1,0)
This standard MUMPS code transforms the transcribed value of the header
"^DD",8925.1,8925.12,1,21,2,0)
item into a format acceptable to FileMan (e.g., patient social security
"^DD",8925.1,8925.12,1,21,3,0)
number *********** must be transformed to 555121212 or to whatever
"^DD",8925.1,8925.12,1,21,4,0)
(external) format FileMan accepts when a user edits the social security
"^DD",8925.1,8925.12,1,21,5,0)
number field in the target file).
"^DD",8925.1,8925.12,1,21,6,0)
 
"^DD",8925.1,8925.12,1,21,7,0)
Field values are transformed before being set into Special Lookup
"^DD",8925.1,8925.12,1,21,8,0)
Variables and before being set into target file fields.
"^DD",8925.1,8925.12,1,21,9,0)
 
"^DD",8925.1,8925.12,1,21,10,0)
Field is necessary only if transcribed item is not in the format Fileman
"^DD",8925.1,8925.12,1,21,11,0)
accepts for the target file.
"^DD",8925.1,8925.12,1,"DT")
2930219
"^DD",8925.1,8925.13,0)
BOILERPLATE TEXT SUB-FIELD^^.01^1
"^DD",8925.1,8925.13,0,"NM","BOILERPLATE TEXT")

"^DD",8925.1,8925.13,0,"UP")
8925.1
"^DD",8925.1,8925.13,.01,0)
BOILERPLATE TEXT^WL^^0;1^Q
"^DD",8925.1,8925.13,.01,3)
Enter default Report Format
"^DD",8925.1,8925.13,.01,21,0)
^^51^51^2970506^
"^DD",8925.1,8925.13,.01,21,1,0)
Applies to Titles and Components.
"^DD",8925.1,8925.13,.01,21,2,0)
 
"^DD",8925.1,8925.13,.01,21,3,0)
Site can preload the text field of a document with default text/default
"^DD",8925.1,8925.13,.01,21,4,0)
format/overprint data which is presented to the user when entering the
"^DD",8925.1,8925.13,.01,21,5,0)
document.  User can then edit and/or add to the boilerplate text.
"^DD",8925.1,8925.13,.01,21,6,0)
 
"^DD",8925.1,8925.13,.01,21,7,0)
If document is formatted into columns, users entering documents should use
"^DD",8925.1,8925.13,.01,21,8,0)
replace mode rather than insert mode (or Find/RePlace Text) to preserve
"^DD",8925.1,8925.13,.01,21,9,0)
the columns.
"^DD",8925.1,8925.13,.01,21,10,0)
 
"^DD",8925.1,8925.13,.01,21,11,0)
Boilerplate Text may be used as an alternative to components to split a
"^DD",8925.1,8925.13,.01,21,12,0)
document up into sections, but such sections are stored together and
"^DD",8925.1,8925.13,.01,21,13,0)
cannot be separately accessed the way components can.  See Type Component,
"^DD",8925.1,8925.13,.01,21,14,0)
under Basic field Type.
"^DD",8925.1,8925.13,.01,21,15,0)
 
"^DD",8925.1,8925.13,.01,21,16,0)
Titles/Components must be inactive in order to edit boilerplate text.
"^DD",8925.1,8925.13,.01,21,17,0)
 
"^DD",8925.1,8925.13,.01,21,18,0)
Boilerplate Text is the place to embed objects which go fetch data. For
"^DD",8925.1,8925.13,.01,21,19,0)
example, suppose a Title has boilerplate text:
"^DD",8925.1,8925.13,.01,21,20,0)
 
"^DD",8925.1,8925.13,.01,21,21,0)
               Patient is a healthy |PATIENT AGE| year old male...
"^DD",8925.1,8925.13,.01,21,22,0)
 
"^DD",8925.1,8925.13,.01,21,23,0)
Then a user who enters such a note for a patient known by the system to be
"^DD",8925.1,8925.13,.01,21,24,0)
56 years old would be presented with the text:
"^DD",8925.1,8925.13,.01,21,25,0)
 
"^DD",8925.1,8925.13,.01,21,26,0)
               Patient is a healthy 56 year old male...
"^DD",8925.1,8925.13,.01,21,27,0)
 
"^DD",8925.1,8925.13,.01,21,28,0)
The user can then add to the text and/or edit the text, including the age
"^DD",8925.1,8925.13,.01,21,29,0)
(56) of the patient.  From this point on, the patient age (56) is regular
"^DD",8925.1,8925.13,.01,21,30,0)
text and is not updated in this note.
"^DD",8925.1,8925.13,.01,21,31,0)
 
"^DD",8925.1,8925.13,.01,21,32,0)
If a user enters a document when an embedded object is Inactive, the
"^DD",8925.1,8925.13,.01,21,33,0)
object does not function; the user sees the object name and an error
"^DD",8925.1,8925.13,.01,21,34,0)
message.  Similarly, if an object has been misspelled in the boilerplate
"^DD",8925.1,8925.13,.01,21,35,0)
text, or deleted from the file, or if the object name in the boilerplate
"^DD",8925.1,8925.13,.01,21,36,0)
text is not unique among objects, the object does not function.
"^DD",8925.1,8925.13,.01,21,37,0)
 
"^DD",8925.1,8925.13,.01,21,38,0)
When embedding objects in boilerplate text, users should make sure the
"^DD",8925.1,8925.13,.01,21,39,0)
entire object name is on one line rather than split between two lines.
"^DD",8925.1,8925.13,.01,21,40,0)
Split names generate "NOT found" error messages.  Users must also allow
"^DD",8925.1,8925.13,.01,21,41,0)
enough white space in the boilerplate text for whatever data the object
"^DD",8925.1,8925.13,.01,21,42,0)
imports.  Users can check boilerplate text using action TRY.
"^DD",8925.1,8925.13,.01,21,43,0)
 
"^DD",8925.1,8925.13,.01,21,44,0)
Any user who can edit boilerplate text can embed any object in it.
"^DD",8925.1,8925.13,.01,21,45,0)
However, except for object owners who are testing an object, USERS SHOULD
"^DD",8925.1,8925.13,.01,21,46,0)
EMBED ONLY ACTIVE OBJECTS in boilerplate text.  An object can be embedded
"^DD",8925.1,8925.13,.01,21,47,0)
in as many different Document Definitions as desired.
"^DD",8925.1,8925.13,.01,21,48,0)
 
"^DD",8925.1,8925.13,.01,21,49,0)
A document with multiple components can have boilerplate text in the entry
"^DD",8925.1,8925.13,.01,21,50,0)
itself and/or in any component.  Boilerplate text in the entry itself
"^DD",8925.1,8925.13,.01,21,51,0)
appears first.
"^DD",8925.1,8925.13,.01,"DT")
2930305
"^DD",8925.1,8925.14,0)
ITEM SUB-FIELD^^4^4
"^DD",8925.1,8925.14,0,"DT")
2970212
"^DD",8925.1,8925.14,0,"IX","AC",8925.14,3)

"^DD",8925.1,8925.14,0,"IX","B",8925.14,.01)

"^DD",8925.1,8925.14,0,"IX","C",8925.14,4)

"^DD",8925.1,8925.14,0,"NM","ITEM")

"^DD",8925.1,8925.14,0,"UP")
8925.1
"^DD",8925.1,8925.14,.01,0)
ITEM^M*P8925.1'X^TIU(8925.1,^0;1^S DIC("S")="I $G(TIUFPRIV) X:$D(TIUFISCR) ""I Y=TIUFISCR""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",8925.1,8925.14,.01,1,0)
^.1^^-1
"^DD",8925.1,8925.14,.01,1,1,0)
8925.14^B
"^DD",8925.1,8925.14,.01,1,1,1)
S ^TIU(8925.1,DA(1),10,"B",$E(X,1,30),DA)=""
"^DD",8925.1,8925.14,.01,1,1,2)
K ^TIU(8925.1,DA(1),10,"B",$E(X,1,30),DA)
"^DD",8925.1,8925.14,.01,1,2,0)
8925.1^AD
"^DD",8925.1,8925.14,.01,1,2,1)
S ^TIU(8925.1,"AD",$E(X,1,30),DA(1),DA)=""
"^DD",8925.1,8925.14,.01,1,2,2)
K ^TIU(8925.1,"AD",$E(X,1,30),DA(1),DA)
"^DD",8925.1,8925.14,.01,1,2,"%D",0)
^^2^2^2940719^
"^DD",8925.1,8925.14,.01,1,2,"%D",1,0)
This cross-reference facilitates traversal from child to parent, up the
"^DD",8925.1,8925.14,.01,1,2,"%D",2,0)
class hierarchy.
"^DD",8925.1,8925.14,.01,1,2,"DT")
2940719
"^DD",8925.1,8925.14,.01,1,3,0)
8925.1^AMM^MUMPS
"^DD",8925.1,8925.14,.01,1,3,1)
D REDOX^TIUDD
"^DD",8925.1,8925.14,.01,1,3,2)
D REDOX^TIUDD
"^DD",8925.1,8925.14,.01,1,3,"%D",0)
^^2^2^2940720^^
"^DD",8925.1,8925.14,.01,1,3,"%D",1,0)
This MUMPS-type cross-reference will update the timestamp on the parent
"^DD",8925.1,8925.14,.01,1,3,"%D",2,0)
document when the ITEM, MNEMONIC, or SEQUENCE changes.
"^DD",8925.1,8925.14,.01,1,3,"DT")
2940720
"^DD",8925.1,8925.14,.01,3)
ITEM must be a new or pre-existing Document Definition with appropriate Type which you own, which is not already an Item elsewhere.
"^DD",8925.1,8925.14,.01,4)
D NAME^TIUFXHLX
"^DD",8925.1,8925.14,.01,12)
See Technical Description.
"^DD",8925.1,8925.14,.01,12.1)
S DIC("S")="I $G(TIUFPRIV) X:$D(TIUFISCR) ""I Y=TIUFISCR"""
"^DD",8925.1,8925.14,.01,21,0)
^^6^6^2970304^^^^
"^DD",8925.1,8925.14,.01,21,1,0)
Items are themselves Document Definitions.  The Type of the parent entry
"^DD",8925.1,8925.14,.01,21,2,0)
determines what Types of items it has.  A parent entry of type Class has
"^DD",8925.1,8925.14,.01,21,3,0)
items of type Class or Document Class.  A Document Class entry has items
"^DD",8925.1,8925.14,.01,21,4,0)
of type Title.  If a Title entry has more than a single section, it has
"^DD",8925.1,8925.14,.01,21,5,0)
items of type Component.  Components may also be multi-section with items
"^DD",8925.1,8925.14,.01,21,6,0)
of type Component.  Objects do not have items.
"^DD",8925.1,8925.14,.01,23,0)
^^8^8^2970304^^^^
"^DD",8925.1,8925.14,.01,23,1,0)
The Item subfield of Item Field 10 in File 8925.1 is screened when using
"^DD",8925.1,8925.14,.01,23,2,0)
the TIUF Document Definition Utility to add items (i.e. when variable
"^DD",8925.1,8925.14,.01,23,3,0)
TIUFISCR is defined.  
"^DD",8925.1,8925.14,.01,23,4,0)
 
"^DD",8925.1,8925.14,.01,23,5,0)
This screen is needed in ADDTEN^TIUFLF4, which noninteractively adds an
"^DD",8925.1,8925.14,.01,23,6,0)
item to the Item multiple.  The screen limits the lookup to the 8925.1 IFN
"^DD",8925.1,8925.14,.01,23,7,0)
of the item being added to the Item multiple.  Without the screen, the
"^DD",8925.1,8925.14,.01,23,8,0)
lookup fails when there are multiple 8925.1 entries of the same name.
"^DD",8925.1,8925.14,.01,"DEL",.01,0)
I 1
"^DD",8925.1,8925.14,.01,"DT")
2961022
"^DD",8925.1,8925.14,2,0)
MNEMONIC^F^^0;2^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>4!($L(X)<1) X
"^DD",8925.1,8925.14,2,1,0)
^.1
"^DD",8925.1,8925.14,2,1,1,0)
8925.1^AMM2^MUMPS
"^DD",8925.1,8925.14,2,1,1,1)
D REDOX^TIUDD
"^DD",8925.1,8925.14,2,1,1,2)
D REDOX^TIUDD
"^DD",8925.1,8925.14,2,1,1,"%D",0)
^^2^2^2961210^^^^
"^DD",8925.1,8925.14,2,1,1,"%D",1,0)
This MUMPS-type cross-reference will update the TIMESTAMP on the parent
"^DD",8925.1,8925.14,2,1,1,"%D",2,0)
document when either the ITEM, MNEMONIC, or SEQUENCE changes.
"^DD",8925.1,8925.14,2,1,1,"DT")
2940720
"^DD",8925.1,8925.14,2,3)
Mnemonic is a handle by which to select Classes/Document Classes from a menu.  Enter the Sequence number, or 1-4 letters, or nothing if you don't want mnemonics.
"^DD",8925.1,8925.14,2,21,0)
^^3^3^2970127^
"^DD",8925.1,8925.14,2,21,1,0)
Item Mnemonic is a handle by which to select Classes/Document Classes from
"^DD",8925.1,8925.14,2,21,2,0)
a menu. 1-4 characters long.  Mnemonic is usually numeric with the same
"^DD",8925.1,8925.14,2,21,3,0)
value as the Sequence.  Alpha mnemonics are permitted if preferred.
"^DD",8925.1,8925.14,2,"DT")
2940720
"^DD",8925.1,8925.14,3,0)
SEQUENCE^NJ6,2^^0;3^K:+X'=X!(X>999)!(X<.01)!(X?.E1"."3N.N) X
"^DD",8925.1,8925.14,3,1,0)
^.1
"^DD",8925.1,8925.14,3,1,1,0)
8925.1^AMM3^MUMPS
"^DD",8925.1,8925.14,3,1,1,1)
D REDOX^TIUDD
"^DD",8925.1,8925.14,3,1,1,2)
D REDOX^TIUDD
"^DD",8925.1,8925.14,3,1,1,"%D",0)
^^2^2^2940720^^
"^DD",8925.1,8925.14,3,1,1,"%D",1,0)
This MUMPS-type cross-reference will update the TIMESTAMP of the parent
"^DD",8925.1,8925.14,3,1,1,"%D",2,0)
document when the ITEM, MNEMONIC, or SEQUENCE change.
"^DD",8925.1,8925.14,3,1,1,"DT")
2940720
"^DD",8925.1,8925.14,3,1,2,0)
8925.14^AC
"^DD",8925.1,8925.14,3,1,2,1)
S ^TIU(8925.1,DA(1),10,"AC",$E(X,1,30),DA)=""
"^DD",8925.1,8925.14,3,1,2,2)
K ^TIU(8925.1,DA(1),10,"AC",$E(X,1,30),DA)
"^DD",8925.1,8925.14,3,1,2,3)
Please don't delete!
"^DD",8925.1,8925.14,3,1,2,"%D",0)
^^2^2^2950412^^^
"^DD",8925.1,8925.14,3,1,2,"%D",1,0)
This REGULAR Fileman cross reference is used to list items by sequence
"^DD",8925.1,8925.14,3,1,2,"%D",2,0)
number.
"^DD",8925.1,8925.14,3,1,2,"DT")
2950410
"^DD",8925.1,8925.14,3,3)
Item Sequence determines display order under the parent.  For alphabetic order, do not enter sequences.  Sequence is between .01 and 999, 2 Decimal Digits.
"^DD",8925.1,8925.14,3,21,0)
^^3^3^2970102^^^
"^DD",8925.1,8925.14,3,21,1,0)
Item Sequence, if entered, determines item's order under its parent. If
"^DD",8925.1,8925.14,3,21,2,0)
items have no sequence, item order is alphabetic by item Menu Text.
"^DD",8925.1,8925.14,3,21,3,0)
Sequence must be between .01 and 999.
"^DD",8925.1,8925.14,3,"DT")
2961021
"^DD",8925.1,8925.14,4,0)
MENU TEXT^F^^0;4^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>20!($L(X)<1) X
"^DD",8925.1,8925.14,4,1,0)
^.1
"^DD",8925.1,8925.14,4,1,1,0)
8925.1^AMM4^MUMPS
"^DD",8925.1,8925.14,4,1,1,1)
D REDOX^TIUDD
"^DD",8925.1,8925.14,4,1,1,2)
D REDOX^TIUDD
"^DD",8925.1,8925.14,4,1,1,"%D",0)
^^2^2^2940720^
"^DD",8925.1,8925.14,4,1,1,"%D",1,0)
This MUMPS-type cross-reference updates the TIMESTAMP on the parent
"^DD",8925.1,8925.14,4,1,1,"%D",2,0)
document when the DISPLAY NAME changes.
"^DD",8925.1,8925.14,4,1,1,"DT")
2940720
"^DD",8925.1,8925.14,4,1,2,0)
8925.14^C^MUMPS
"^DD",8925.1,8925.14,4,1,2,1)
S ^TIU(8925.1,DA(1),10,"C",$E(X,1,30),DA)=""
"^DD",8925.1,8925.14,4,1,2,2)
K ^TIU(8925.1,DA(1),10,"C",$E(X,1,30),DA)
"^DD",8925.1,8925.14,4,1,2,"%D",0)
^^3^3^2961210^^
"^DD",8925.1,8925.14,4,1,2,"%D",1,0)
This M cross reference could have been regular.  It is used to display
"^DD",8925.1,8925.14,4,1,2,"%D",2,0)
items with no sequence in alpha order by Menu Text.
"^DD",8925.1,8925.14,4,1,2,"DT")
2961210
"^DD",8925.1,8925.14,4,3)
This is the short name of the entry, used in 3 column menus.  1 to 20 characters.
"^DD",8925.1,8925.14,4,4)

"^DD",8925.1,8925.14,4,21,0)
^^12^12^2970220^
"^DD",8925.1,8925.14,4,21,1,0)
Item Menu Text is the short name users will see for Classes and Document
"^DD",8925.1,8925.14,4,21,2,0)
Classes when selecting them from 3-COLUMN MENUS.  Document Definitions are
"^DD",8925.1,8925.14,4,21,3,0)
selected from 3-column menus when viewing documents across many patients
"^DD",8925.1,8925.14,4,21,4,0)
and when viewing many kinds of documents at the same time (e.g. Progress
"^DD",8925.1,8925.14,4,21,5,0)
Notes and Discharge Summaries). Menu Text has 1 - 20 characters. The
"^DD",8925.1,8925.14,4,21,6,0)
Document Definition Utility TIUF automatically sets the Item Menu Text to
"^DD",8925.1,8925.14,4,21,7,0)
the first 20 characters of the Item's Name when an entry is first added as
"^DD",8925.1,8925.14,4,21,8,0)
an item. It does NOT update Menu Text if the item name is later changed,
"^DD",8925.1,8925.14,4,21,9,0)
since this would overwrite what a site may have carefully set up.
"^DD",8925.1,8925.14,4,21,10,0)
 
"^DD",8925.1,8925.14,4,21,11,0)
Menu Text can affect item order under a parent since order is alphabetic
"^DD",8925.1,8925.14,4,21,12,0)
by menu text if items do not have sequence numbers.
"^DD",8925.1,8925.14,4,"DT")
2970212
"^DD",8925.2,8925.2,0)
FIELD^^2^6
"^DD",8925.2,8925.2,0,"DDA")
N
"^DD",8925.2,8925.2,0,"DT")
2970408
"^DD",8925.2,8925.2,0,"IX","B",8925.2,.01)

"^DD",8925.2,8925.2,0,"NM","TIU UPLOAD BUFFER")

"^DD",8925.2,8925.2,0,"PT",8925.4,.05)

"^DD",8925.2,8925.2,0,"VRPK")
TEXT INTEGRATION UTILITIES
"^DD",8925.2,8925.2,.01,0)
PROCESS ID NUMBER^RF^^0;1^K:$L(X)>15!($L(X)<1) X
"^DD",8925.2,8925.2,.01,1,0)
^.1
"^DD",8925.2,8925.2,.01,1,1,0)
8925.2^B
"^DD",8925.2,8925.2,.01,1,1,1)
S ^TIU(8925.2,"B",$E(X,1,30),DA)=""
"^DD",8925.2,8925.2,.01,1,1,2)
K ^TIU(8925.2,"B",$E(X,1,30),DA)
"^DD",8925.2,8925.2,.01,3)
Answer must be 1-15 characters in length.
"^DD",8925.2,8925.2,.01,21,0)
^^1^1^2920916^^^^
"^DD",8925.2,8925.2,.01,21,1,0)
This is the ID number of the upload process ($J).
"^DD",8925.2,8925.2,.01,"DT")
2920916
"^DD",8925.2,8925.2,.02,0)
USER^P200'^VA(200,^0;2^Q
"^DD",8925.2,8925.2,.02,21,0)
^^1^1^2920911^
"^DD",8925.2,8925.2,.02,21,1,0)
This is the user who invoked the ASCII upload procedure.
"^DD",8925.2,8925.2,.02,"DT")
2920911
"^DD",8925.2,8925.2,.03,0)
PROCESS BEGIN TIME^D^^0;3^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",8925.2,8925.2,.03,21,0)
^^1^1^2930426^
"^DD",8925.2,8925.2,.03,21,1,0)
This is the time at which the upload process began.
"^DD",8925.2,8925.2,.03,"DT")
2920916
"^DD",8925.2,8925.2,.04,0)
PROCESS END TIME^D^^0;4^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",8925.2,8925.2,.04,21,0)
^^1^1^2930426^
"^DD",8925.2,8925.2,.04,21,1,0)
This is the time at which the upload process ended.
"^DD",8925.2,8925.2,.04,"DT")
2920916
"^DD",8925.2,8925.2,1,0)
REPORT TEXT^8925.21^^TEXT;0
"^DD",8925.2,8925.2,1,21,0)
^^5^5^2930621^^^
"^DD",8925.2,8925.2,1,21,1,0)
This is a word processing field that contains the contents of the upload.
"^DD",8925.2,8925.2,1,21,2,0)
There may be multiple reports in a file uploaded. When the contents of a
"^DD",8925.2,8925.2,1,21,3,0)
report are filed into the appropriate DHCP file, its contents in this word
"^DD",8925.2,8925.2,1,21,4,0)
processing field are removed. Corrections can be made to any report
"^DD",8925.2,8925.2,2,0)
ERROR LOG ENTRIES^8925.22PA^^ERR;0
"^DD",8925.2,8925.2,2,21,0)
^^3^3^2970408^^^
"^DD",8925.2,8925.2,2,21,1,0)
This multiple points to any entries in the TIU UPLOAD EVENT LOG FILE
"^DD",8925.2,8925.2,2,21,2,0)
(#8925.4) which result from failure to file one or more of the records
"^DD",8925.2,8925.2,2,21,3,0)
in the current buffer file entry.
"^DD",8925.2,8925.21,0)
REPORT TEXT SUB-FIELD^^.01^1
"^DD",8925.2,8925.21,0,"NM","REPORT TEXT")

"^DD",8925.2,8925.21,0,"UP")
8925.2
"^DD",8925.2,8925.21,.01,0)
REPORT TEXT^WL^^0;1^Q
"^DD",8925.2,8925.21,.01,"DT")
2930621
"^DD",8925.2,8925.22,0)
ERROR LOG ENTRIES SUB-FIELD^^.01^1
"^DD",8925.2,8925.22,0,"DT")
2970408
"^DD",8925.2,8925.22,0,"IX","B",8925.22,.01)

"^DD",8925.2,8925.22,0,"NM","ERROR LOG ENTRIES")

"^DD",8925.2,8925.22,0,"UP")
8925.2
"^DD",8925.2,8925.22,.01,0)
ERROR LOG ENTRIES^MP8925.4'^TIU(8925.4,^0;1^Q
"^DD",8925.2,8925.22,.01,1,0)
^.1
"^DD",8925.2,8925.22,.01,1,1,0)
8925.22^B
"^DD",8925.2,8925.22,.01,1,1,1)
S ^TIU(8925.2,DA(1),"ERR","B",$E(X,1,30),DA)=""
"^DD",8925.2,8925.22,.01,1,1,2)
K ^TIU(8925.2,DA(1),"ERR","B",$E(X,1,30),DA)
"^DD",8925.2,8925.22,.01,3)
Enter the record # for an error in the ERROR LOG FILE (#8925.4)
"^DD",8925.2,8925.22,.01,21,0)
^^2^2^2970408^^
"^DD",8925.2,8925.22,.01,21,1,0)
This is the pointer to an entry in the error log for the current buffer
"^DD",8925.2,8925.22,.01,21,2,0)
record.
"^DD",8925.2,8925.22,.01,"DT")
2970408
"^DD",8925.3,8925.3,0)
FIELD^^.03^4
"^DD",8925.3,8925.3,0,"DDA")
N
"^DD",8925.3,8925.3,0,"IX","B",8925.3,.01)

"^DD",8925.3,8925.3,0,"NM","TIU UPLOAD ERROR DEFINITION")

"^DD",8925.3,8925.3,0,"VRPK")
TEXT INTEGRATION UTILITIES
"^DD",8925.3,8925.3,.001,0)
ERROR CODE #^NJ7,0^^ ^K:+X'=X!(X>9999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",8925.3,8925.3,.001,3)
Enter the error code #
"^DD",8925.3,8925.3,.001,21,0)
^^2^2^2930426^^
"^DD",8925.3,8925.3,.001,21,1,0)
This is the error code number which occurs when a report that is
"^DD",8925.3,8925.3,.001,21,2,0)
uploaded is unable to be filed into the appropriate DHCP file.
"^DD",8925.3,8925.3,.001,"DT")
2930211
"^DD",8925.3,8925.3,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",8925.3,8925.3,.01,1,0)
^.1
"^DD",8925.3,8925.3,.01,1,1,0)
8925.3^B
"^DD",8925.3,8925.3,.01,1,1,1)
S ^TIU(8925.3,"B",$E(X,1,30),DA)=""
"^DD",8925.3,8925.3,.01,1,1,2)
K ^TIU(8925.3,"B",$E(X,1,30),DA)
"^DD",8925.3,8925.3,.01,3)
Answer must be 3-30 characters in length.
"^DD",8925.3,8925.3,.01,21,0)
^^2^2^2930211^
"^DD",8925.3,8925.3,.01,21,1,0)
This is the name of the error as identified by the upload/router/filer
"^DD",8925.3,8925.3,.01,21,2,0)
utility.
"^DD",8925.3,8925.3,.01,"DT")
2930211
"^DD",8925.3,8925.3,.02,0)
ERROR TEXT^F^^0;2^K:$L(X)>76!($L(X)<3) X
"^DD",8925.3,8925.3,.02,3)
Enter the text to be used in notification of upload operator.
"^DD",8925.3,8925.3,.02,21,0)
^^2^2^2930426^^
"^DD",8925.3,8925.3,.02,21,1,0)
This is the text to be used to notify the appropriate persons that
"^DD",8925.3,8925.3,.02,21,2,0)
a report was unable to be filed into DHCP.
"^DD",8925.3,8925.3,.02,"DT")
2930211
"^DD",8925.3,8925.3,.03,0)
ALERT TYPE^S^I:information only;F:follow-up action;^0;3^Q
"^DD",8925.3,8925.3,.03,3)
Select type of alert to be sent.
"^DD",8925.3,8925.3,.03,21,0)
^^2^2^2930426^
"^DD",8925.3,8925.3,.03,21,1,0)
This is the type of alert that will be sent, either information only
"^DD",8925.3,8925.3,.03,21,2,0)
or for follow-up action.
"^DD",8925.3,8925.3,.03,"DT")
2930211
"^DD",8925.4,8925.4,0)
FIELD^^2^10
"^DD",8925.4,8925.4,0,"DDA")
N
"^DD",8925.4,8925.4,0,"DT")
2970526
"^DD",8925.4,8925.4,0,"IX","B",8925.4,.01)

"^DD",8925.4,8925.4,0,"IX","C",8925.4,.06)

"^DD",8925.4,8925.4,0,"IX","D",8925.4,.08)

"^DD",8925.4,8925.4,0,"NM","TIU UPLOAD LOG")

"^DD",8925.4,8925.4,0,"PT",8925.22,.01)

"^DD",8925.4,8925.4,0,"VRPK")
TEXT INTEGRATION UTILITIES
"^DD",8925.4,8925.4,.01,0)
EVENT DATE/TIME^RD^^0;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925.4,8925.4,.01,1,0)
^.1
"^DD",8925.4,8925.4,.01,1,1,0)
8925.4^B
"^DD",8925.4,8925.4,.01,1,1,1)
S ^TIU(8925.4,"B",$E(X,1,30),DA)=""
"^DD",8925.4,8925.4,.01,1,1,2)
K ^TIU(8925.4,"B",$E(X,1,30),DA)
"^DD",8925.4,8925.4,.01,3)

"^DD",8925.4,8925.4,.01,21,0)
^^2^2^2950623^
"^DD",8925.4,8925.4,.01,21,1,0)
This is the date/time at which the filing event (i.e., success or failure)
"^DD",8925.4,8925.4,.01,21,2,0)
occurred.
"^DD",8925.4,8925.4,.01,"DT")
2950623
"^DD",8925.4,8925.4,.02,0)
USER^P200'^VA(200,^0;2^Q
"^DD",8925.4,8925.4,.02,21,0)
^^1^1^2950623^
"^DD",8925.4,8925.4,.02,21,1,0)
This is the user who invoked the upload process. 
"^DD",8925.4,8925.4,.02,"DT")
2930212
"^DD",8925.4,8925.4,.03,0)
DOCUMENT TYPE^F^^0;3^K:$L(X)>30!($L(X)<3) X
"^DD",8925.4,8925.4,.03,3)
Answer must be 3-30 characters in length.
"^DD",8925.4,8925.4,.03,21,0)
^^3^3^2950623^
"^DD",8925.4,8925.4,.03,21,1,0)
This is the document type (as found in the second piece of the header tag,
"^DD",8925.4,8925.4,.03,21,2,0)
(e.g., $HDR:   DISCHARGE SUMMARY), by which the filing event can be
"^DD",8925.4,8925.4,.03,21,3,0)
identified.
"^DD",8925.4,8925.4,.03,"DT")
2950623
"^DD",8925.4,8925.4,.04,0)
ERROR DESCRIPTION^F^^0;4^K:$L(X)>76!($L(X)<3) X
"^DD",8925.4,8925.4,.04,3)
Answer must be 3-76 characters in length.
"^DD",8925.4,8925.4,.04,21,0)
^^1^1^2930212^
"^DD",8925.4,8925.4,.04,21,1,0)
This is the freetext error message.
"^DD",8925.4,8925.4,.04,"DT")
2930212
"^DD",8925.4,8925.4,.05,0)
BUFFER FILE POINTER^*P8925.2'^TIU(8925.2,^0;5^S DIC("S")="I $D(^TIU(8925.2,+Y,0))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",8925.4,8925.4,.05,3)
Enter the record # in the TIU UPLOAD BUFFER FILE (#128.2)
"^DD",8925.4,8925.4,.05,12)
The buffer file record must exist at creation
"^DD",8925.4,8925.4,.05,12.1)
S DIC("S")="I $D(^TIU(8925.2,+Y,0))"
"^DD",8925.4,8925.4,.05,21,0)
^^3^3^2930609^
"^DD",8925.4,8925.4,.05,21,1,0)
 
"^DD",8925.4,8925.4,.05,21,2,0)
This is the record number in file #128.2 (GMR REPORT BUFFER FILE) where
"^DD",8925.4,8925.4,.05,21,3,0)
the erroneous record(s) reside(s).
"^DD",8925.4,8925.4,.05,"DT")
2931215
"^DD",8925.4,8925.4,.06,0)
RESOLUTION STATUS^S^1:RESOLVED;0:UNRESOLVED;^0;6^Q
"^DD",8925.4,8925.4,.06,1,0)
^.1
"^DD",8925.4,8925.4,.06,1,1,0)
8925.4^C
"^DD",8925.4,8925.4,.06,1,1,1)
S ^TIU(8925.4,"C",$E(X,1,30),DA)=""
"^DD",8925.4,8925.4,.06,1,1,2)
K ^TIU(8925.4,"C",$E(X,1,30),DA)
"^DD",8925.4,8925.4,.06,1,1,"%D",0)
^^2^2^2930610^
"^DD",8925.4,8925.4,.06,1,1,"%D",1,0)
This REGULAR, whole-file cross-reference is used to identify unresolved
"^DD",8925.4,8925.4,.06,1,1,"%D",2,0)
errors for the filer/router process.
"^DD",8925.4,8925.4,.06,1,1,"DT")
2930610
"^DD",8925.4,8925.4,.06,3)
Indicate the resolution status of the filing error.
"^DD",8925.4,8925.4,.06,21,0)
^^2^2^2930609^
"^DD",8925.4,8925.4,.06,21,1,0)
 
"^DD",8925.4,8925.4,.06,21,2,0)
This set of codes indicates the resolution status of the error.
"^DD",8925.4,8925.4,.06,"DT")
2950913
"^DD",8925.4,8925.4,.07,0)
RESOLUTION DATE^D^^0;7^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925.4,8925.4,.07,3)
Enter the date/time at which the error was resolved.
"^DD",8925.4,8925.4,.07,21,0)
^^2^2^2930609^
"^DD",8925.4,8925.4,.07,21,1,0)
 
"^DD",8925.4,8925.4,.07,21,2,0)
This field indicates the date/time at which the error was resolved.
"^DD",8925.4,8925.4,.07,"DT")
2930609
"^DD",8925.4,8925.4,.08,0)
EVENT TYPE^S^0:Success;1:Filing Error;2:Missing Field Error;^0;8^Q
"^DD",8925.4,8925.4,.08,1,0)
^.1
"^DD",8925.4,8925.4,.08,1,1,0)
8925.4^D
"^DD",8925.4,8925.4,.08,1,1,1)
S ^TIU(8925.4,"D",$E(X,1,30),DA)=""
"^DD",8925.4,8925.4,.08,1,1,2)
K ^TIU(8925.4,"D",$E(X,1,30),DA)
"^DD",8925.4,8925.4,.08,1,1,"%D",0)
^^2^2^2950913^
"^DD",8925.4,8925.4,.08,1,1,"%D",1,0)
This REGULAR FileMan Cross-reference by EVENT TYPE is used for list
"^DD",8925.4,8925.4,.08,1,1,"%D",2,0)
building.
"^DD",8925.4,8925.4,.08,1,1,"DT")
2950913
"^DD",8925.4,8925.4,.08,3)
Indicate the type of filing event.
"^DD",8925.4,8925.4,.08,21,0)
^^2^2^2950825^^
"^DD",8925.4,8925.4,.08,21,1,0)
This identifies whether the record was successfully filed, or whether an
"^DD",8925.4,8925.4,.08,21,2,0)
error occurred.
"^DD",8925.4,8925.4,.08,"DT")
2950913
"^DD",8925.4,8925.4,1,0)
HEADER TEXT^8925.41^^HEAD;0
"^DD",8925.4,8925.4,2,0)
MISSING FIELDS^8925.42^^1;0
"^DD",8925.4,8925.4,2,21,0)
^^2^2^2950830^^
"^DD",8925.4,8925.4,2,21,1,0)
This multiple is used to store errors where records are successfully filed
"^DD",8925.4,8925.4,2,21,2,0)
with one or more missing fields.
"^DD",8925.4,8925.41,0)
HEADER TEXT SUB-FIELD^^.01^1
"^DD",8925.4,8925.41,0,"NM","HEADER TEXT")

"^DD",8925.4,8925.41,0,"UP")
8925.4
"^DD",8925.4,8925.41,.01,0)
HEADER TEXT^WL^^0;1^Q
"^DD",8925.4,8925.41,.01,3)
Enter the contents of the report header
"^DD",8925.4,8925.41,.01,"DT")
2930820
"^DD",8925.4,8925.42,0)
MISSING FIELDS SUB-FIELD^^.04^4
"^DD",8925.4,8925.42,0,"DT")
2970526
"^DD",8925.4,8925.42,0,"IX","B",8925.42,.01)

"^DD",8925.4,8925.42,0,"NM","MISSING FIELDS")

"^DD",8925.4,8925.42,0,"UP")
8925.4
"^DD",8925.4,8925.42,.01,0)
FILE NUMBER^MNJ10,2^^0;1^K:+X'=X!(X>9999999.99)!(X<2)!(X?.E1"."3N.N) X
"^DD",8925.4,8925.42,.01,1,0)
^.1
"^DD",8925.4,8925.42,.01,1,1,0)
8925.42^B
"^DD",8925.4,8925.42,.01,1,1,1)
S ^TIU(8925.4,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",8925.4,8925.42,.01,1,1,2)
K ^TIU(8925.4,DA(1),1,"B",$E(X,1,30),DA)
"^DD",8925.4,8925.42,.01,3)
Type a Number between 2 and 9999999.99, 2 Decimal Digits
"^DD",8925.4,8925.42,.01,21,0)
^^2^2^2950825^^
"^DD",8925.4,8925.42,.01,21,1,0)
This is the file number where the record with one or more missing fields
"^DD",8925.4,8925.42,.01,21,2,0)
was filed.
"^DD",8925.4,8925.42,.01,"DT")
2950825
"^DD",8925.4,8925.42,.02,0)
RECORD NUMBER^NJ7,0^^0;2^K:+X'=X!(X>9999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",8925.4,8925.42,.02,3)
Type a Number between 1 and 9999999, 0 Decimal Digits
"^DD",8925.4,8925.42,.02,21,0)
^^2^2^2950825^
"^DD",8925.4,8925.42,.02,21,1,0)
This is the internal entry number of the record that was filed with one or
"^DD",8925.4,8925.42,.02,21,2,0)
more missing fields.
"^DD",8925.4,8925.42,.02,"DT")
2950825
"^DD",8925.4,8925.42,.03,0)
FIELD NUMBER^NJ10,2^^0;3^K:+X'=X!(X>9999999)!(X<.01)!(X?.E1"."3N.N) X
"^DD",8925.4,8925.42,.03,3)
Type a Number between .01 and 9999999, 2 Decimal Digits
"^DD",8925.4,8925.42,.03,21,0)
^^2^2^2950825^
"^DD",8925.4,8925.42,.03,21,1,0)
This is the field which was left missing upon filing the record identified
"^DD",8925.4,8925.42,.03,21,2,0)
in the previous field.
"^DD",8925.4,8925.42,.03,"DT")
2950825
"^DD",8925.4,8925.42,.04,0)
FAILED VALUE^F^^0;4^K:$L(X)>80!($L(X)<1) X
"^DD",8925.4,8925.42,.04,3)
Answer must be 1-80 characters in length.
"^DD",8925.4,8925.42,.04,21,0)
^^1^1^2950830^
"^DD",8925.4,8925.42,.04,21,1,0)
This is the value which the FileMan rejected for the field in question.
"^DD",8925.4,8925.42,.04,"DT")
2970526
"^DD",8925.5,8925.5,0)
FIELD^^2.03^21
"^DD",8925.5,8925.5,0,"DT")
2970428
"^DD",8925.5,8925.5,0,"IX","AR",8925.5,.01)

"^DD",8925.5,8925.5,0,"IX","AR1",8925.5,1.01)

"^DD",8925.5,8925.5,0,"IX","B",8925.5,.01)

"^DD",8925.5,8925.5,0,"NM","TIU AUDIT TRAIL")

"^DD",8925.5,8925.5,0,"VRPK")
TEXT INTEGRATION UTILITIES
"^DD",8925.5,8925.5,.01,0)
TIU DOCUMENT NAME^RP8925'^TIU(8925,^0;1^Q
"^DD",8925.5,8925.5,.01,1,0)
^.1
"^DD",8925.5,8925.5,.01,1,1,0)
8925.5^B
"^DD",8925.5,8925.5,.01,1,1,1)
S ^TIU(8925.5,"B",$E(X,1,30),DA)=""
"^DD",8925.5,8925.5,.01,1,1,2)
K ^TIU(8925.5,"B",$E(X,1,30),DA)
"^DD",8925.5,8925.5,.01,1,2,0)
8925.5^AR^MUMPS
"^DD",8925.5,8925.5,.01,1,2,1)
I +$G(^TIU(8925.5,+DA,1)) S ^TIU(8925.5,"AR",+X,+$G(^TIU(8925.5,+DA,1)),+DA)=""
"^DD",8925.5,8925.5,.01,1,2,2)
I +$G(^TIU(8925.5,+DA,1)) K ^TIU(8925.5,"AR",+X,+$G(^TIU(8925.5,+DA,1)),+DA)
"^DD",8925.5,8925.5,.01,1,2,"%D",0)
^^3^3^2970429^
"^DD",8925.5,8925.5,.01,1,2,"%D",1,0)
This MUMPS-type multi-field cross-reference by TIU Document Pointer and
"^DD",8925.5,8925.5,.01,1,2,"%D",2,0)
Reassignment date/time will help to identify records that have been
"^DD",8925.5,8925.5,.01,1,2,"%D",3,0)
reassigned.
"^DD",8925.5,8925.5,.01,1,2,"DT")
2970429
"^DD",8925.5,8925.5,.01,3)

"^DD",8925.5,8925.5,.01,"DT")
2970429
"^DD",8925.5,8925.5,.02,0)
EDIT DATE/TIME^D^^0;2^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925.5,8925.5,.02,"DT")
2941208
"^DD",8925.5,8925.5,.03,0)
EDITED BY^P200'^VA(200,^0;3^Q
"^DD",8925.5,8925.5,.03,3)
Please indicate the identity of the person who edited the document
"^DD",8925.5,8925.5,.03,"DT")
2941215
"^DD",8925.5,8925.5,.04,0)
INITIAL CHECKSUM^F^^0;4^K:$L(X)>20!($L(X)<2) X
"^DD",8925.5,8925.5,.04,3)
Answer must be 2-20 characters in length.
"^DD",8925.5,8925.5,.04,"DT")
2941215
"^DD",8925.5,8925.5,.05,0)
FINAL CHECKSUM^F^^0;5^K:$L(X)>20!($L(X)<2) X
"^DD",8925.5,8925.5,.05,3)
Answer must be 2-20 characters in length.
"^DD",8925.5,8925.5,.05,"DT")
2941215
"^DD",8925.5,8925.5,1,0)
PRE-EDIT TEXT^8925.51^^TEXT;0
"^DD",8925.5,8925.5,1.01,0)
REASSIGNMENT DATE/TIME^D^^1;1^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",8925.5,8925.5,1.01,1,0)
^.1
"^DD",8925.5,8925.5,1.01,1,1,0)
8925.5^AR1^MUMPS
"^DD",8925.5,8925.5,1.01,1,1,1)
I +$G(^TIU(8925.5,+DA,0)) S ^TIU(8925.5,"AR",+$G(^TIU(8925.5,+DA,0)),+X,+DA)=""
"^DD",8925.5,8925.5,1.01,1,1,2)
I +$G(^TIU(8925.5,+DA,0)) K ^TIU(8925.5,"AR",+$G(^TIU(8925.5,+DA,0)),+X,+DA)
"^DD",8925.5,8925.5,1.01,1,1,"%D",0)
^^3^3^2970429^
"^DD",8925.5,8925.5,1.01,1,1,"%D",1,0)
This MUMPS-type multi-field cross-reference by TIU Document Pointer and
"^DD",8925.5,8925.5,1.01,1,1,"%D",2,0)
Reassignment date/time will help to identify records that have been
"^DD",8925.5,8925.5,1.01,1,1,"%D",3,0)
reassigned.
"^DD",8925.5,8925.5,1.01,1,1,"DT")
2970429
"^DD",8925.5,8925.5,1.01,3)
Indicate the date/time at which the document was reassigned
"^DD",8925.5,8925.5,1.01,21,0)
^^2^2^2970428^
"^DD",8925.5,8925.5,1.01,21,1,0)
This is the date and time at which the document was reassigned from one
"^DD",8925.5,8925.5,1.01,21,2,0)
visit to another.
"^DD",8925.5,8925.5,1.01,"DT")
2970429
"^DD",8925.5,8925.5,1.02,0)
REASSIGNED BY^P200'^VA(200,^1;2^Q
"^DD",8925.5,8925.5,1.02,3)
Please identify the person who reassigned the document.
"^DD",8925.5,8925.5,1.02,21,0)
^^1^1^2970428^
"^DD",8925.5,8925.5,1.02,21,1,0)
This is the person who reassigned the document from one visit to another.
"^DD",8925.5,8925.5,1.02,"DT")
2970428
"^DD",8925.5,8925.5,1.03,0)
INITIAL PATIENT^P2'^DPT(^1;3^Q
"^DD",8925.5,8925.5,1.03,3)
Please identify the patient that the document was reassigned from
"^DD",8925.5,8925.5,1.03,21,0)
^^1^1^2970428^
"^DD",8925.5,8925.5,1.03,21,1,0)
This is the patient from whom the document was reassigned.
"^DD",8925.5,8925.5,1.03,"DT")
2970428
"^DD",8925.5,8925.5,1.04,0)
FINAL PATIENT^P2'^DPT(^1;4^Q
"^DD",8925.5,8925.5,1.04,3)
Please identify the patient to whom the document was reassigned
"^DD",8925.5,8925.5,1.04,21,0)
^^1^1^2970428^
"^DD",8925.5,8925.5,1.04,21,1,0)
This is the patient to whom the document was reassigned.
"^DD",8925.5,8925.5,1.04,"DT")
2970428
"^DD",8925.5,8925.5,1.05,0)
INITIAL VISIT DATE/TIME^D^^1;5^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",8925.5,8925.5,1.05,3)
Please indicate the date/time of the visit from which the document was reassigned
"^DD",8925.5,8925.5,1.05,21,0)
^^1^1^2970428^
"^DD",8925.5,8925.5,1.05,21,1,0)
This is the date/time of the visit from which the document was reassigned.
"^DD",8925.5,8925.5,1.05,"DT")
2970428
"^DD",8925.5,8925.5,1.06,0)
FINAL VISIT DATE/TIME^D^^1;6^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",8925.5,8925.5,1.06,3)
Please indicate the date/time of the visit to which the document was reassigned.
"^DD",8925.5,8925.5,1.06,21,0)
^^2^2^2970428^
"^DD",8925.5,8925.5,1.06,21,1,0)
This is the date and time of the VISIT to which the document was
"^DD",8925.5,8925.5,1.06,21,2,0)
reassigned.
"^DD",8925.5,8925.5,1.06,"DT")
2970428
"^DD",8925.5,8925.5,1.07,0)
INITIAL VISIT LOCATION^P44'^SC(^1;7^Q
"^DD",8925.5,8925.5,1.07,3)
Please indicate the location of the visit from which the document was reassigned.
"^DD",8925.5,8925.5,1.07,21,0)
^^2^2^2970428^
"^DD",8925.5,8925.5,1.07,21,1,0)
This is the Hospital Location of the visit from which the document was
"^DD",8925.5,8925.5,1.07,21,2,0)
reassigned.
"^DD",8925.5,8925.5,1.07,"DT")
2970428
"^DD",8925.5,8925.5,1.08,0)
FINAL VISIT LOCATION^P44'^SC(^1;8^Q
"^DD",8925.5,8925.5,1.08,3)
Please indicate the location of the visit to which the document was reassigned.
"^DD",8925.5,8925.5,1.08,21,0)
^^2^2^2970428^
"^DD",8925.5,8925.5,1.08,21,1,0)
This is the hospital location of the visit to which the document was
"^DD",8925.5,8925.5,1.08,21,2,0)
reassigned.
"^DD",8925.5,8925.5,1.08,"DT")
2970428
"^DD",8925.5,8925.5,1.09,0)
INITIAL VISIT TYPE^S^A:ambulatory;H:hospitalization;I:in hospital;T:telecommunications;E:event (historical);^1;9^Q
"^DD",8925.5,8925.5,1.09,3)
Please indicate the type of the visit from which the document was reassigned
"^DD",8925.5,8925.5,1.09,21,0)
^^2^2^2970428^
"^DD",8925.5,8925.5,1.09,21,1,0)
This is the Type, or Service Category, of the visit from which the
"^DD",8925.5,8925.5,1.09,21,2,0)
document was reassigned.
"^DD",8925.5,8925.5,1.09,"DT")
2970428
"^DD",8925.5,8925.5,1.1,0)
FINAL VISIT TYPE^S^A:ambulatory;H:hospitalization;I:in hospital;T:telecommunications;E:event (historical);^1;10^Q
"^DD",8925.5,8925.5,1.1,3)
Please indicate the type of visit to which the document was reassigned.
"^DD",8925.5,8925.5,1.1,21,0)
^^2^2^2970428^
"^DD",8925.5,8925.5,1.1,21,1,0)
This is the Visit Type or Service Category of the Visit to which the
"^DD",8925.5,8925.5,1.1,21,2,0)
document was reassigned.
"^DD",8925.5,8925.5,1.1,"DT")
2970428
"^DD",8925.5,8925.5,1.11,0)
INITIAL VISIT RECORD^P9000010'^AUPNVSIT(^1;11^Q
"^DD",8925.5,8925.5,1.11,3)
Please indicate the Visit File Entry from which the document was reassigned
"^DD",8925.5,8925.5,1.11,21,0)
^^2^2^2970428^
"^DD",8925.5,8925.5,1.11,21,1,0)
This is the pointer to the Visit File (#9000010) entry from which the
"^DD",8925.5,8925.5,1.11,21,2,0)
document was reassigned.
"^DD",8925.5,8925.5,1.11,"DT")
2970428
"^DD",8925.5,8925.5,1.12,0)
FINAL VISIT RECORD^P9000010'^AUPNVSIT(^1;12^Q
"^DD",8925.5,8925.5,1.12,3)
Please indicate the visit entry to which the document was reassigned.
"^DD",8925.5,8925.5,1.12,21,0)
^^2^2^2970428^
"^DD",8925.5,8925.5,1.12,21,1,0)
This is the pointer to the Visit File (#9000010) entry to which the
"^DD",8925.5,8925.5,1.12,21,2,0)
document was reassigned.
"^DD",8925.5,8925.5,1.12,"DT")
2970428
"^DD",8925.5,8925.5,2.01,0)
DELETION DATE/TIME^D^^2;1^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",8925.5,8925.5,2.01,3)
Please indicate the date/time at which the document was deleted.
"^DD",8925.5,8925.5,2.01,21,0)
^^1^1^2970428^
"^DD",8925.5,8925.5,2.01,21,1,0)
This is the date and time at which the document was deleted.
"^DD",8925.5,8925.5,2.01,"DT")
2970428
"^DD",8925.5,8925.5,2.02,0)
DELETED BY^P200'^VA(200,^2;2^Q
"^DD",8925.5,8925.5,2.02,3)
Please indicate the person by whom the document was deleted.
"^DD",8925.5,8925.5,2.02,21,0)
^^1^1^2970428^
"^DD",8925.5,8925.5,2.02,21,1,0)
This is the person by whom the document was deleted.
"^DD",8925.5,8925.5,2.02,"DT")
2970428
"^DD",8925.5,8925.5,2.03,0)
REASON FOR DELETION^S^P:privacy act;A:administrative;^2;3^Q
"^DD",8925.5,8925.5,2.03,3)
Please indicate the reason for which the document was deleted.
"^DD",8925.5,8925.5,2.03,21,0)
^^3^3^2970428^
"^DD",8925.5,8925.5,2.03,21,1,0)
In the event that the document is deleted following signature, indicate
"^DD",8925.5,8925.5,2.03,21,2,0)
wheter it was deleted per the privacy act, or whether the deletion was
"^DD",8925.5,8925.5,2.03,21,3,0)
administrative.
"^DD",8925.5,8925.5,2.03,"DT")
2970428
"^DD",8925.5,8925.51,0)
PRE-EDIT TEXT SUB-FIELD^^.01^1
"^DD",8925.5,8925.51,0,"DT")
2941215
"^DD",8925.5,8925.51,0,"NM","PRE-EDIT TEXT")

"^DD",8925.5,8925.51,0,"UP")
8925.5
"^DD",8925.5,8925.51,.01,0)
PRE-EDIT TEXT^WL^^0;1^Q
"^DD",8925.5,8925.51,.01,"DT")
2941215
"^DD",8925.6,8925.6,0)
FIELD^^1^5
"^DD",8925.6,8925.6,0,"DDA")
N
"^DD",8925.6,8925.6,0,"DT")
2950628
"^DD",8925.6,8925.6,0,"IX","B",8925.6,.01)

"^DD",8925.6,8925.6,0,"IX","C",8925.6,.03)

"^DD",8925.6,8925.6,0,"NM","TIU STATUS")

"^DD",8925.6,8925.6,0,"PT",8925,.05)

"^DD",8925.6,8925.6,0,"PT",8925.1,.07)

"^DD",8925.6,8925.6,0,"PT",8925.95,.05)

"^DD",8925.6,8925.6,0,"PT",8925.951,.04)

"^DD",8925.6,8925.6,0,"VRPK")
TEXT INTEGRATION UTILITIES
"^DD",8925.6,8925.6,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X?1.U) X
"^DD",8925.6,8925.6,.01,1,0)
^.1
"^DD",8925.6,8925.6,.01,1,1,0)
8925.6^B
"^DD",8925.6,8925.6,.01,1,1,1)
S ^TIU(8925.6,"B",$E(X,1,30),DA)=""
"^DD",8925.6,8925.6,.01,1,1,2)
K ^TIU(8925.6,"B",$E(X,1,30),DA)
"^DD",8925.6,8925.6,.01,3)
Enter 3-30 uppercase characters.
"^DD",8925.6,8925.6,.01,21,0)
^^2^2^2941012^^
"^DD",8925.6,8925.6,.01,21,1,0)
This is the status name used in selecting or displaying the status of the
"^DD",8925.6,8925.6,.01,21,2,0)
document.
"^DD",8925.6,8925.6,.01,"DT")
2941012
"^DD",8925.6,8925.6,.02,0)
SYMBOL^F^^0;2^K:$L(X)>3!($L(X)<1) X
"^DD",8925.6,8925.6,.02,3)
Answer must be 1-3 characters in length.
"^DD",8925.6,8925.6,.02,21,0)
^^2^2^2941219^^
"^DD",8925.6,8925.6,.02,21,1,0)
This is the symbol to be displayed in some applications, which corresponds
"^DD",8925.6,8925.6,.02,21,2,0)
to the status of the document (e.g., $ may indicate unsigned, etc.).
"^DD",8925.6,8925.6,.02,"DT")
2941219
"^DD",8925.6,8925.6,.03,0)
SEQUENCE^NJ3,0^^0;3^K:+X'=X!(X>200)!(X<1)!(X?.E1"."1N.N) X
"^DD",8925.6,8925.6,.03,1,0)
^.1
"^DD",8925.6,8925.6,.03,1,1,0)
8925.6^C
"^DD",8925.6,8925.6,.03,1,1,1)
S ^TIU(8925.6,"C",$E(X,1,30),DA)=""
"^DD",8925.6,8925.6,.03,1,1,2)
K ^TIU(8925.6,"C",$E(X,1,30),DA)
"^DD",8925.6,8925.6,.03,1,1,"%D",0)
^^2^2^2940915^
"^DD",8925.6,8925.6,.03,1,1,"%D",1,0)
This index is used for looking up and sorting document statuses by
"^DD",8925.6,8925.6,.03,1,1,"%D",2,0)
sequence number. Higher sequence numbers indicate more finished documents.
"^DD",8925.6,8925.6,.03,1,1,"DT")
2940915
"^DD",8925.6,8925.6,.03,3)
Type a Number between 1 and 200, 0 Decimal Digits
"^DD",8925.6,8925.6,.03,"DT")
2941219
"^DD",8925.6,8925.6,.04,0)
APPLIES TO^S^DOCMT:document;DEF:document definition;^0;4^Q
"^DD",8925.6,8925.6,.04,3)
Enter DOCMT if this status applies to documents; DEF if it applies to document definitions.
"^DD",8925.6,8925.6,.04,"DT")
2950628
"^DD",8925.6,8925.6,1,0)
DESCRIPTION^8925.61^^1;0
"^DD",8925.6,8925.61,0)
DESCRIPTION SUB-FIELD^^.01^1
"^DD",8925.6,8925.61,0,"DT")
2940319
"^DD",8925.6,8925.61,0,"NM","DESCRIPTION")

"^DD",8925.6,8925.61,0,"UP")
8925.6
"^DD",8925.6,8925.61,.01,0)
DESCRIPTION^WL^^0;1^Q
"^DD",8925.6,8925.61,.01,3)
Please describe the usage and/or meaning of this status.
"^DD",8925.6,8925.61,.01,"DT")
2940319
"^DD",8925.7,8925.7,0)
FIELD^^.08^8
"^DD",8925.7,8925.7,0,"DDA")
N
"^DD",8925.7,8925.7,0,"DT")
2961127
"^DD",8925.7,8925.7,0,"ID",.03)
S %I=Y,Y=$S('$D(^(0)):"",$D(^VA(200,+$P(^(0),U,3),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(200,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",8925.7,8925.7,0,"IX","AE",8925.7,.01)

"^DD",8925.7,8925.7,0,"IX","AE1",8925.7,.03)

"^DD",8925.7,8925.7,0,"IX","B",8925.7,.01)

"^DD",8925.7,8925.7,0,"NM","TIU MULTIPLE SIGNATURE")

"^DD",8925.7,8925.7,0,"VRPK")
TEXT INTEGRATION UTILITIES
"^DD",8925.7,8925.7,.01,0)
TIU DOCUMENT NUMBER^RP8925'^TIU(8925,^0;1^Q
"^DD",8925.7,8925.7,.01,1,0)
^.1
"^DD",8925.7,8925.7,.01,1,1,0)
8925.7^B
"^DD",8925.7,8925.7,.01,1,1,1)
S ^TIU(8925.7,"B",$E(X,1,30),DA)=""
"^DD",8925.7,8925.7,.01,1,1,2)
K ^TIU(8925.7,"B",$E(X,1,30),DA)
"^DD",8925.7,8925.7,.01,1,2,0)
8925.7^AE^MUMPS
"^DD",8925.7,8925.7,.01,1,2,1)
I $L($P(^TIU(8925.7,+DA,0),U,3)) S ^TIU(8925.7,"AE",+X,+$P(^TIU(8925.7,+DA,0),U,3),DA)=""
"^DD",8925.7,8925.7,.01,1,2,2)
I $L($P(^TIU(8925.7,+DA,0),U,3)) K ^TIU(8925.7,"AE",+X,+$P(^TIU(8925.7,+DA,0),U,3),DA)
"^DD",8925.7,8925.7,.01,1,2,"%D",0)
^^2^2^2961127^^
"^DD",8925.7,8925.7,.01,1,2,"%D",1,0)
This multi-field, MUMPS-type cross-reference by document and expected
"^DD",8925.7,8925.7,.01,1,2,"%D",2,0)
cosigner facilitates the identification of privilege to sign the document.
"^DD",8925.7,8925.7,.01,1,2,"DT")
2960610
"^DD",8925.7,8925.7,.01,3)
Please select the document for which this cosignature is expected.
"^DD",8925.7,8925.7,.01,21,0)
^^1^1^2940321^
"^DD",8925.7,8925.7,.01,21,1,0)
This is the record number in the TIU DOCUMENT FILE (#8925).
"^DD",8925.7,8925.7,.01,"DT")
2960610
"^DD",8925.7,8925.7,.02,0)
COSIGNATURE NEEDED^S^1:YES;0:NO;^0;2^Q
"^DD",8925.7,8925.7,.02,3)
Please indicate whether the cosignature is required.
"^DD",8925.7,8925.7,.02,"DT")
2940418
"^DD",8925.7,8925.7,.03,0)
EXPECTED SIGNER^*P200'^VA(200,^0;3^S DIC("S")="I +$$SCREEN^TIURA1(+$G(^TIU(8925.7,DA,0)),+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",8925.7,8925.7,.03,1,0)
^.1
"^DD",8925.7,8925.7,.03,1,1,0)
8925.7^AE1^MUMPS
"^DD",8925.7,8925.7,.03,1,1,1)
I $L($P(^TIU(8925.7,+DA,0),U)) S ^TIU(8925.7,"AE",+$P(^TIU(8925.7,+DA,0),U),+X,DA)=""
"^DD",8925.7,8925.7,.03,1,1,2)
I $L($P(^TIU(8925.7,+DA,0),U)) K ^TIU(8925.7,"AE",+$P(^TIU(8925.7,+DA,0),U),+X,DA)
"^DD",8925.7,8925.7,.03,1,1,"%D",0)
^^2^2^2961127^^
"^DD",8925.7,8925.7,.03,1,1,"%D",1,0)
This multi-field, MUMPS-type cross-reference by document and expected
"^DD",8925.7,8925.7,.03,1,1,"%D",2,0)
cosigner facilitates the identification of privilege to sign the document.
"^DD",8925.7,8925.7,.03,1,1,"DT")
2960610
"^DD",8925.7,8925.7,.03,3)
Enter the person whom you expect to sign.
"^DD",8925.7,8925.7,.03,12)
Certain persons shouldn't be selected.
"^DD",8925.7,8925.7,.03,12.1)
S DIC("S")="I +$$SCREEN^TIURA1(+$G(^TIU(8925.7,DA,0)),+Y)"
"^DD",8925.7,8925.7,.03,21,0)
^^1^1^2961127^
"^DD",8925.7,8925.7,.03,21,1,0)
This is the person who the author expects to sign the document.
"^DD",8925.7,8925.7,.03,"DT")
2961127
"^DD",8925.7,8925.7,.04,0)
COSIGNATURE DATE/TIME^D^^0;4^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925.7,8925.7,.04,3)
Please enter the date/time of cosignature
"^DD",8925.7,8925.7,.04,21,0)
^^1^1^2940322^
"^DD",8925.7,8925.7,.04,21,1,0)
This is the date/time at which the cosignature was obtained.
"^DD",8925.7,8925.7,.04,"DT")
2940322
"^DD",8925.7,8925.7,.05,0)
ACTUAL COSIGNER^P200'^VA(200,^0;5^Q
"^DD",8925.7,8925.7,.05,3)
Please indicate the user who actually cosigned the document.
"^DD",8925.7,8925.7,.05,"DT")
2940322
"^DD",8925.7,8925.7,.06,0)
COSIGNER'S SIGNATURE BLOCK^F^^0;6^K:$L(X)>30!($L(X)<2) X
"^DD",8925.7,8925.7,.06,3)
This field should only be filed by the system (encrypted).
"^DD",8925.7,8925.7,.06,"DT")
2940322
"^DD",8925.7,8925.7,.07,0)
COSIGNER'S TITLE^F^^0;7^K:$L(X)>50!($L(X)<2) X
"^DD",8925.7,8925.7,.07,3)
This field should only be filed by the system (encrypted).
"^DD",8925.7,8925.7,.07,"DT")
2940322
"^DD",8925.7,8925.7,.08,0)
COSIGNATURE MODE^S^E:electronic;C:chart;^0;8^Q
"^DD",8925.7,8925.7,.08,3)
Please indicate the method by which cosignature was obtained.
"^DD",8925.7,8925.7,.08,"DT")
2940322
"^DD",8925.8,8925.8,0)
FIELD^^99^7
"^DD",8925.8,8925.8,0,"DT")
2950927
"^DD",8925.8,8925.8,0,"IX","AM",8925.8,99)

"^DD",8925.8,8925.8,0,"IX","AM1",8925.8,.03)

"^DD",8925.8,8925.8,0,"IX","B",8925.8,.01)

"^DD",8925.8,8925.8,0,"IX","C",8925.8,.02)

"^DD",8925.8,8925.8,0,"NM","TIU SEARCH CATEGORIES")

"^DD",8925.8,8925.8,0,"VRPK")
TEXT INTEGRATION UTILITIES
"^DD",8925.8,8925.8,.01,0)
SEARCH CATEGORY^RFO^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",8925.8,8925.8,.01,1,0)
^.1
"^DD",8925.8,8925.8,.01,1,1,0)
8925.8^B
"^DD",8925.8,8925.8,.01,1,1,1)
S ^TIU(8925.8,"B",$E(X,1,30),DA)=""
"^DD",8925.8,8925.8,.01,1,1,2)
K ^TIU(8925.8,"B",$E(X,1,30),DA)
"^DD",8925.8,8925.8,.01,2)
S Y(0)=Y S Y=$$MIXED^TIULS(Y)
"^DD",8925.8,8925.8,.01,2.1)
S Y=$$MIXED^TIULS(Y)
"^DD",8925.8,8925.8,.01,3)
Answer must be 3-30 characters in length.
"^DD",8925.8,8925.8,.01,21,0)
^^4^4^2950616^^
"^DD",8925.8,8925.8,.01,21,1,0)
These are the allowable categories by which you may query for documents 
"^DD",8925.8,8925.8,.01,21,2,0)
(e.g., PATIENT, AUTHOR, EXPECTED COSIGNER, TREATING SPECIALTY, HOSPITAL 
"^DD",8925.8,8925.8,.01,21,3,0)
LOCATION, SUBJECT, SERVICE, PROBLEM, PATIENT STATUS (i.e., 
"^DD",8925.8,8925.8,.01,21,4,0)
Inpatient/Outpatient), etc.).
"^DD",8925.8,8925.8,.01,"DT")
2950616
"^DD",8925.8,8925.8,.02,0)
CROSS-REFERENCE^FX^^0;2^K:$L(X)>10!($L(X)<1)!('$D(^TIU(8925,X))) X
"^DD",8925.8,8925.8,.02,1,0)
^.1
"^DD",8925.8,8925.8,.02,1,1,0)
8925.8^C
"^DD",8925.8,8925.8,.02,1,1,1)
S ^TIU(8925.8,"C",$E(X,1,30),DA)=""
"^DD",8925.8,8925.8,.02,1,1,2)
K ^TIU(8925.8,"C",$E(X,1,30),DA)
"^DD",8925.8,8925.8,.02,1,1,"%D",0)
^^2^2^2950927^
"^DD",8925.8,8925.8,.02,1,1,"%D",1,0)
This REGULAR FileMan cross-reference is used to map SEARCH CATEGORY to
"^DD",8925.8,8925.8,.02,1,1,"%D",2,0)
CROSS REFERENCE.
"^DD",8925.8,8925.8,.02,1,1,"DT")
2950927
"^DD",8925.8,8925.8,.02,3)
Answer must correspond to a valid x-ref in file 8925.
"^DD",8925.8,8925.8,.02,21,0)
^^9^9^2950616^^
"^DD",8925.8,8925.8,.02,21,1,0)
This is the cross-reference which will be searched to identify the 
"^DD",8925.8,8925.8,.02,21,2,0)
corrresponding documents.  It must have the structure:
"^DD",8925.8,8925.8,.02,21,3,0)

"^DD",8925.8,8925.8,.02,21,4,0)
^TIU(8925,"<X-REF NAME>",ENTITY,DOCTYP,STATUS,INVDATE,IEN)=""
"^DD",8925.8,8925.8,.02,21,6,0)
where ENTITY is the object of the search, DOCTYPE is the .01 field
"^DD",8925.8,8925.8,.02,21,7,0)
value of the record in 8925, STATUS is the value of the .05 field in
"^DD",8925.8,8925.8,.02,21,8,0)
8925, and inverse date is the inverted reference date (field 1301 in
"^DD",8925.8,8925.8,.02,21,9,0)
file 8925), computed as 9999999-REFDATE.
"^DD",8925.8,8925.8,.02,"DT")
2950927
"^DD",8925.8,8925.8,.03,0)
DISPLAY NAME^F^^0;3^K:$L(X)>30!($L(X)<3) X
"^DD",8925.8,8925.8,.03,1,0)
^.1
"^DD",8925.8,8925.8,.03,1,1,0)
8925.8^AM1^MUMPS
"^DD",8925.8,8925.8,.03,1,1,1)
D REDO^TIUDD8
"^DD",8925.8,8925.8,.03,1,1,2)
D REDO^TIUDD8
"^DD",8925.8,8925.8,.03,1,1,"%D",0)
^^2^2^2950927^
"^DD",8925.8,8925.8,.03,1,1,"%D",1,0)
This MUMPS-type cross-reference is used to update the timestamp on the
"^DD",8925.8,8925.8,.03,1,1,"%D",2,0)
search category selection menu when a DISPLAY NAME changes.
"^DD",8925.8,8925.8,.03,1,1,"DT")
2950927
"^DD",8925.8,8925.8,.03,3)
Answer must be 3-30 characters in length.
"^DD",8925.8,8925.8,.03,21,0)
^^2^2^2950616^
"^DD",8925.8,8925.8,.03,21,1,0)
This is the name of the Search Category as it will be displayed to the
"^DD",8925.8,8925.8,.03,21,2,0)
user on selection.
"^DD",8925.8,8925.8,.03,"DT")
2950927
"^DD",8925.8,8925.8,.04,0)
ASSOCIATED FILE^P1'^DIC(^0;4^Q
"^DD",8925.8,8925.8,.04,3)
Select the file to which the category will refer.
"^DD",8925.8,8925.8,.04,21,0)
^^3^3^2950927^
"^DD",8925.8,8925.8,.04,21,1,0)
This is the file on which a look-up will occur in the event that a
"^DD",8925.8,8925.8,.04,21,2,0)
category is selected (e.g., for category PATIENT, the file should be 2,
"^DD",8925.8,8925.8,.04,21,3,0)
and for category AUTHOR, the file should be 200).
"^DD",8925.8,8925.8,.04,"DT")
2950927
"^DD",8925.8,8925.8,1,0)
SCREEN^K^^1;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.8,8925.8,1,3)
This is Standard MUMPS code.
"^DD",8925.8,8925.8,1,9)
@
"^DD",8925.8,8925.8,1,21,0)
^^2^2^2950927^
"^DD",8925.8,8925.8,1,21,1,0)
This is MUMPS code, which sets the special variable DIC("S"), prior to
"^DD",8925.8,8925.8,1,21,2,0)
invoking the look-up on the FILE identified with the category.
"^DD",8925.8,8925.8,1,"DT")
2950927
"^DD",8925.8,8925.8,2,0)
LOOK-UP CODE^K^^2;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.8,8925.8,2,3)
This is Standard MUMPS code.
"^DD",8925.8,8925.8,2,9)
@
"^DD",8925.8,8925.8,2,21,0)
^^2^2^2950927^
"^DD",8925.8,8925.8,2,21,1,0)
This code is invoked, if defined, and should behave like a call to ^DIC,
"^DD",8925.8,8925.8,2,21,2,0)
setting the variable Y as IFN^VALUE.
"^DD",8925.8,8925.8,2,"DT")
2950927
"^DD",8925.8,8925.8,99,0)
TIMESTAMP^F^^99;1^K:$L(X)>15!($L(X)<1) X
"^DD",8925.8,8925.8,99,1,0)
^.1
"^DD",8925.8,8925.8,99,1,1,0)
8925.8^AM^MUMPS
"^DD",8925.8,8925.8,99,1,1,1)
D SET^TIUDD8
"^DD",8925.8,8925.8,99,1,1,2)
D KILL^TIUDD8
"^DD",8925.8,8925.8,99,1,1,"%D",0)
^^2^2^2950630^^
"^DD",8925.8,8925.8,99,1,1,"%D",1,0)
This cross-reference invokes menu compilation in ^XUTL("XQORM",
"^DD",8925.8,8925.8,99,1,1,"%D",2,0)
DA;TIU(8925.8, when the TIMESTAMP field is modified.
"^DD",8925.8,8925.8,99,1,1,"DT")
2950630
"^DD",8925.8,8925.8,99,3)
Enter the $HOROLOG date/time of a change.
"^DD",8925.8,8925.8,99,21,0)
^^2^2^2950616^
"^DD",8925.8,8925.8,99,21,1,0)
This field stores the $HOROLOG-formatted date/time for a change to a
"^DD",8925.8,8925.8,99,21,2,0)
Search Categories entry.
"^DD",8925.8,8925.8,99,"DT")
2950616
"^DD",8925.9,8925.9,0)
FIELD^^.06^6
"^DD",8925.9,8925.9,0,"DDA")
N
"^DD",8925.9,8925.9,0,"DT")
2950316
"^DD",8925.9,8925.9,0,"IX","APRB",8925.9,.01)

"^DD",8925.9,8925.9,0,"IX","APRB1",8925.9,.05)

"^DD",8925.9,8925.9,0,"IX","B",8925.9,.01)

"^DD",8925.9,8925.9,0,"NM","TIU PROBLEM LINK")

"^DD",8925.9,8925.9,0,"VRPK")
TEXT INTEGRATION UTILITIES
"^DD",8925.9,8925.9,.01,0)
DOCUMENT^RP8925'^TIU(8925,^0;1^Q
"^DD",8925.9,8925.9,.01,1,0)
^.1
"^DD",8925.9,8925.9,.01,1,1,0)
8925.9^B
"^DD",8925.9,8925.9,.01,1,1,1)
S ^TIU(8925.9,"B",$E(X,1,30),DA)=""
"^DD",8925.9,8925.9,.01,1,1,2)
K ^TIU(8925.9,"B",$E(X,1,30),DA)
"^DD",8925.9,8925.9,.01,1,2,0)
8925.9^APRB^MUMPS
"^DD",8925.9,8925.9,.01,1,2,1)
I +$P($G(^TIU(8925,+X,0)),U),+$P($G(^TIU(8925,+X,0)),U,5),+$P($G(^TIU(8925,+X,13)),U) D APRBS^TIUDD(+$G(^TIU(8925,+X,0)),+$P(^TIU(8925,+X,0),U,5),(9999999-+$G(^TIU(8925,+X,13))),X)
"^DD",8925.9,8925.9,.01,1,2,2)
I +$P($G(^TIU(8925,+X,0)),U),+$P($G(^TIU(8925,+X,0)),U,5),+$P($G(^TIU(8925,+X,13)),U) D APRBK^TIUDD(+$G(^TIU(8925,+X,0)),+$P(^TIU(8925,+X,0),U,5),(9999999-+$G(^TIU(8925,+X,13))),X)
"^DD",8925.9,8925.9,.01,1,2,"%D",0)
^^2^2^2950928^^^
"^DD",8925.9,8925.9,.01,1,2,"%D",1,0)
This MUMPS-type, multi-field cross-reference by Problem, Document type,
"^DD",8925.9,8925.9,.01,1,2,"%D",2,0)
Status, and Inverse Reference Date/time facilitates query by problem
"^DD",8925.9,8925.9,.01,1,2,"DT")
2950928
"^DD",8925.9,8925.9,.01,3)
Select document.
"^DD",8925.9,8925.9,.01,21,0)
^^1^1^2950302^
"^DD",8925.9,8925.9,.01,21,1,0)
This is the document which is to be associated with one or more problems.
"^DD",8925.9,8925.9,.01,"DT")
2950928
"^DD",8925.9,8925.9,.02,0)
PROBLEM^P9000011'^AUPNPROB(^0;2^Q
"^DD",8925.9,8925.9,.02,3)
Select Problem.
"^DD",8925.9,8925.9,.02,21,0)
^^1^1^2950302^
"^DD",8925.9,8925.9,.02,21,1,0)
This is the problem with which the document is associated.
"^DD",8925.9,8925.9,.02,"DT")
2950302
"^DD",8925.9,8925.9,.03,0)
PURPOSE OF VISIT^P9000010.07'^AUPNVPOV(^0;3^Q
"^DD",8925.9,8925.9,.03,3)
Specify the Purpose of visit to be associated with this document.
"^DD",8925.9,8925.9,.03,21,0)
^^2^2^2950316^
"^DD",8925.9,8925.9,.03,21,1,0)
This is the specific Purpose of Visit with which this document is to be
"^DD",8925.9,8925.9,.03,21,2,0)
associated.
"^DD",8925.9,8925.9,.03,"DT")
2950316
"^DD",8925.9,8925.9,.04,0)
CLINICAL TERM^P757.01'^LEX(757.01,^0;4^Q
"^DD",8925.9,8925.9,.04,3)
Indicate the clinical term to which the problem/pov is linked.
"^DD",8925.9,8925.9,.04,21,0)
^^2^2^2950316^
"^DD",8925.9,8925.9,.04,21,1,0)
This is the "expression" from the clinical lexicon, which identifies the
"^DD",8925.9,8925.9,.04,21,2,0)
problem or purpose of visit to which the document is linked.
"^DD",8925.9,8925.9,.04,"DT")
2950316
"^DD",8925.9,8925.9,.05,0)
PROVIDER NARRATIVE^F^^0;5^K:$L(X)>80!($L(X)<2) X
"^DD",8925.9,8925.9,.05,1,0)
^.1
"^DD",8925.9,8925.9,.05,1,1,0)
8925.9^APRB1^MUMPS
"^DD",8925.9,8925.9,.05,1,1,1)
I +$G(^TIU(8925,+$G(^TIU(8925.9,+DA,0)),0)),+$P($G(^(0)),U,5),+$P($G(^(13)),U) D APRBS^TIUDD(+$G(^TIU(8925,+$G(^TIU(8925.9,+DA,0)),0)),+$P(^(0),U,5),(9999999-+$G(^(13))),+$G(^TIU(8925.9,+DA,0)),X)
"^DD",8925.9,8925.9,.05,1,1,2)
I +$G(^TIU(8925,+$G(^TIU(8925.9,+DA,0)),0)),+$P($G(^(0)),U,5),+$P($G(^(13)),U) D APRBS^TIUDD(+$G(^TIU(8925,+$G(^TIU(8925.9,+DA,0)),0)),+$P(^(0),U,5),(9999999-+$G(^(13))),+$G(^TIU(8925.9,+DA,0)),X)
"^DD",8925.9,8925.9,.05,1,1,"%D",0)
^^2^2^2950928^
"^DD",8925.9,8925.9,.05,1,1,"%D",1,0)
This MUMPS-type, multi-field cross-reference by Problem, Document type,
"^DD",8925.9,8925.9,.05,1,1,"%D",2,0)
Status, and Inverse Reference Date/time facilitates query by problem.
"^DD",8925.9,8925.9,.05,1,1,"DT")
2950928
"^DD",8925.9,8925.9,.05,3)
Narrative description of the problem as expressed by the provider.
"^DD",8925.9,8925.9,.05,21,0)
^^2^2^2950316^^
"^DD",8925.9,8925.9,.05,21,1,0)
This is the narrative description of the problem/POV as expressed by
"^DD",8925.9,8925.9,.05,21,2,0)
the provider at the time of formulation.
"^DD",8925.9,8925.9,.05,"DT")
2950928
"^DD",8925.9,8925.9,.06,0)
ICD9 DIAGNOSIS^P80'^ICD9(^0;6^Q
"^DD",8925.9,8925.9,.06,3)
This is the ICD9-CM diagnosis for the Problem/Purpose of Visit.
"^DD",8925.9,8925.9,.06,21,0)
^^3^3^2950316^^
"^DD",8925.9,8925.9,.06,21,1,0)
This is the diagnosis associated with the Problem/POV, as encoded in the
"^DD",8925.9,8925.9,.06,21,2,0)
International Classification of Diseases, 9th Revision/Clinical 
"^DD",8925.9,8925.9,.06,21,3,0)
Modification.
"^DD",8925.9,8925.9,.06,"DT")
2950316
"^DD",8925.91,8925.91,0)
FIELD^^1^2
"^DD",8925.91,8925.91,0,"DDA")
N
"^DD",8925.91,8925.91,0,"DT")
2960426
"^DD",8925.91,8925.91,0,"IX","B",8925.91,.01)

"^DD",8925.91,8925.91,0,"NM","TIU EXTERNAL DATA LINK")

"^DD",8925.91,8925.91,0,"VRPK")
TEXT INTEGRATION UTILITIES
"^DD",8925.91,8925.91,.01,0)
DOCUMENT^RP8925'^TIU(8925,^0;1^Q
"^DD",8925.91,8925.91,.01,1,0)
^.1
"^DD",8925.91,8925.91,.01,1,1,0)
8925.91^B
"^DD",8925.91,8925.91,.01,1,1,1)
S ^TIU(8925.91,"B",$E(X,1,30),DA)=""
"^DD",8925.91,8925.91,.01,1,1,2)
K ^TIU(8925.91,"B",$E(X,1,30),DA)
"^DD",8925.91,8925.91,.01,3)
Select the document you wish to link.
"^DD",8925.91,8925.91,.01,21,0)
^^1^1^2960426^
"^DD",8925.91,8925.91,.01,21,1,0)
This is the Document for which the linkage is being made.
"^DD",8925.91,8925.91,.01,"DT")
2960426
"^DD",8925.91,8925.91,1,0)
LINKED DATA OBJECT^F^^1;1^K:$L(X)>245!($L(X)<1) X
"^DD",8925.91,8925.91,1,3)
Answer must be 1-245 characters in length.
"^DD",8925.91,8925.91,1,21,0)
^^3^3^2960426^
"^DD",8925.91,8925.91,1,21,1,0)
This is the external data object to be linked to the selected document.
"^DD",8925.91,8925.91,1,21,2,0)
You may specify a path to a fileserver, and a filename for the object
"^DD",8925.91,8925.91,1,21,3,0)
(e.g., VA1$:[IMAGES]JR042696.BMP, or i:\images\jr042696.bmp, etc.
"^DD",8925.91,8925.91,1,"DT")
2960426
"^DD",8925.93,8925.93,0)
FIELD^^3^5
"^DD",8925.93,8925.93,0,"DT")
2960213
"^DD",8925.93,8925.93,0,"IX","B",8925.93,.01)

"^DD",8925.93,8925.93,0,"NM","TIU PRINT PARAMETERS")

"^DD",8925.93,8925.93,0,"VRPK")
TEXT INTEGRATION UTILITIES
"^DD",8925.93,8925.93,.01,0)
HOSPITAL LOCATION^RP44'^SC(^0;1^Q
"^DD",8925.93,8925.93,.01,1,0)
^.1
"^DD",8925.93,8925.93,.01,1,1,0)
8925.93^B
"^DD",8925.93,8925.93,.01,1,1,1)
S ^TIU(8925.93,"B",$E(X,1,30),DA)=""
"^DD",8925.93,8925.93,.01,1,1,2)
K ^TIU(8925.93,"B",$E(X,1,30),DA)
"^DD",8925.93,8925.93,.01,3)
Please specify the Hospital Location.
"^DD",8925.93,8925.93,.01,21,0)
^^1^1^2951026^^
"^DD",8925.93,8925.93,.01,21,1,0)
This is the Hospital Location to which the parameters apply.
"^DD",8925.93,8925.93,.01,"DT")
2951026
"^DD",8925.93,8925.93,1.01,0)
PROGRESS NOTES^S^1:YES;^1;1^Q
"^DD",8925.93,8925.93,1.01,3)
Answer '1' or 'YES' to enable
"^DD",8925.93,8925.93,1.01,21,0)
^^4^4^2960213^^
"^DD",8925.93,8925.93,1.01,21,1,0)
This field should be set to 'YES' to enable batch printing of progress
"^DD",8925.93,8925.93,1.01,21,2,0)
notes from the [TIU PRINT PN WARD] and [TIU PRINT PN OUPT LOC] options.
"^DD",8925.93,8925.93,1.01,21,3,0)
These options are intended to be used by MAS personnel printing CHART
"^DD",8925.93,8925.93,1.01,21,4,0)
copies.
"^DD",8925.93,8925.93,1.01,23,0)
^^2^2^2960213^
"^DD",8925.93,8925.93,1.01,23,1,0)
This field is a parameter used by the TIU progress notes print options
"^DD",8925.93,8925.93,1.01,23,2,0)
to enable batch printing of PNs for a specific location.
"^DD",8925.93,8925.93,1.01,"DT")
2960213
"^DD",8925.93,8925.93,1.02,0)
LAST PROGRESS NOTE PRINTED^F^^1;2^K:$L(X)>30!($L(X)<9) X
"^DD",8925.93,8925.93,1.02,3)
Answer must be 9-30 characters in length.
"^DD",8925.93,8925.93,1.02,21,0)
^^3^3^2960213^^^
"^DD",8925.93,8925.93,1.02,21,1,0)
This field is used to track the last progress note printed for this
"^DD",8925.93,8925.93,1.02,21,2,0)
location.  The option resets this field after each print.  If the field
"^DD",8925.93,8925.93,1.02,21,3,0)
is null the option will prompt to select a date.
"^DD",8925.93,8925.93,1.02,23,0)
^^5^5^2960213^^
"^DD",8925.93,8925.93,1.02,23,1,0)
This field is set by the routines batch printing progress notes.  It
"^DD",8925.93,8925.93,1.02,23,2,0)
serves as the starting point for the next batch.  This also serves as
"^DD",8925.93,8925.93,1.02,23,3,0)
the default starting point for the user to select the date range.
"^DD",8925.93,8925.93,1.02,23,4,0)
the format of the field is:  DATE/TIME;IEN This information corresponds
"^DD",8925.93,8925.93,1.02,23,5,0)
to the last 2 subscripts in the x-refs used for prting notes.
"^DD",8925.93,8925.93,1.02,"DT")
2960213
"^DD",8925.93,8925.93,1.03,0)
PROGRESS NOTES DEFAULT PRINTER^P3.5'^%ZIS(1,^1;3^Q
"^DD",8925.93,8925.93,1.03,3)
Enter the printer you would like to come up as the default
"^DD",8925.93,8925.93,1.03,21,0)
^^4^4^2960213^
"^DD",8925.93,8925.93,1.03,21,1,0)
This field is a pointer to the device file.  The default the site
"^DD",8925.93,8925.93,1.03,21,2,0)
would like to have presented when batch using the TIU progress notes
"^DD",8925.93,8925.93,1.03,21,3,0)
batch print options [TIU PRINT PN OUTPT LOC] and [TIU PRINT PN WARD].
"^DD",8925.93,8925.93,1.03,21,4,0)
The user may select another printer at the time to job is queued.
"^DD",8925.93,8925.93,1.03,23,0)
^^3^3^2960213^
"^DD",8925.93,8925.93,1.03,23,1,0)
This field is used to bring up the default printer for the user when
"^DD",8925.93,8925.93,1.03,23,2,0)
using the TIU progress notes batch print options.  Each location will
"^DD",8925.93,8925.93,1.03,23,3,0)
set up the printer most often used for that location.
"^DD",8925.93,8925.93,1.03,"DT")
2960213
"^DD",8925.93,8925.93,3,0)
EXCLUDE FROM PN BATCH PRINT^S^1:YES;^3;1^Q
"^DD",8925.93,8925.93,3,3)
Enter '1' to exclude this location from the Progress Notes batch print.
"^DD",8925.93,8925.93,3,21,0)
^^4^4^2970103^^^^
"^DD",8925.93,8925.93,3,21,1,0)
If you answer yes to this prompt, progress notes for this location will not be included in
"^DD",8925.93,8925.93,3,21,2,0)
the progress notes outpatient batch print job [TIU PRINT PN BATCH].
"^DD",8925.93,8925.93,3,21,3,0)
Do this if you want to print the CHART copies of the notes for this location
"^DD",8925.93,8925.93,3,21,4,0)
in the clinic and not in the file room.
"^DD",8925.93,8925.93,3,23,0)
^^2^2^2970103^^^
"^DD",8925.93,8925.93,3,23,1,0)
Setting this parameter will exclude progress notes for this location from
"^DD",8925.93,8925.93,3,23,2,0)
the batch print job.
"^DD",8925.93,8925.93,3,"DT")
2960213
"^DD",8925.94,8925.94,0)
FIELD^^1.02^4
"^DD",8925.94,8925.94,0,"DDA")
N
"^DD",8925.94,8925.94,0,"DT")
2960221
"^DD",8925.94,8925.94,0,"IX","B",8925.94,.01)

"^DD",8925.94,8925.94,0,"NM","TIU DIVISION PRINT PARAMETERS")

"^DD",8925.94,8925.94,0,"VRPK")
TEXT INTEGRATION UTILITIES
"^DD",8925.94,8925.94,.01,0)
DIVISION^RP40.8'^DG(40.8,^0;1^Q
"^DD",8925.94,8925.94,.01,1,0)
^.1
"^DD",8925.94,8925.94,.01,1,1,0)
8925.94^B
"^DD",8925.94,8925.94,.01,1,1,1)
S ^TIU(8925.94,"B",$E(X,1,30),DA)=""
"^DD",8925.94,8925.94,.01,1,1,2)
K ^TIU(8925.94,"B",$E(X,1,30),DA)
"^DD",8925.94,8925.94,.01,3)
Select the DIVISION these print parameters apply to.
"^DD",8925.94,8925.94,.01,21,0)
^^4^4^2960228^^
"^DD",8925.94,8925.94,.01,21,1,0)
Division these print parameters will apply to when printing outpatient
"^DD",8925.94,8925.94,.01,21,2,0)
Progress Notes for the terminal digit sort for.  Notes for all location
"^DD",8925.94,8925.94,.01,21,3,0)
under this division will print unless they are excepted in the TIU PRINT
"^DD",8925.94,8925.94,.01,21,4,0)
PARAMETERS (#8925.93) file, field #3.
"^DD",8925.94,8925.94,.01,23,0)
^^3^3^2960228^^
"^DD",8925.94,8925.94,.01,23,1,0)
Pointer to the Medical Center Division File.  Sites should establish an
"^DD",8925.94,8925.94,.01,23,2,0)
entry for each division they desire to batch print outpatient progress
"^DD",8925.94,8925.94,.01,23,3,0)
notes or forms using the TIU package.
"^DD",8925.94,8925.94,.01,"DT")
2960221
"^DD",8925.94,8925.94,.02,0)
LOCATION TO PRINT ON FOOTER^F^^0;2^K:$L(X)>26!($L(X)<3) X
"^DD",8925.94,8925.94,.02,3)
Answer must be 3-26 characters in length.
"^DD",8925.94,8925.94,.02,21,0)
^^6^6^2960221^^
"^DD",8925.94,8925.94,.02,21,1,0)
The name of this division as it should apear in the footer of the progress
"^DD",8925.94,8925.94,.02,21,2,0)
notes and forms printed using the terminal digit outpatient sort.  This is
"^DD",8925.94,8925.94,.02,21,3,0)
useful for sites that want something other than what the external value of
"^DD",8925.94,8925.94,.02,21,4,0)
this division retirned by $$SITE^VASITE.  For example, the Waco division
"^DD",8925.94,8925.94,.02,21,5,0)
of the Central Texas Health Care System may want Central Texas HCS- Waco
"^DD",8925.94,8925.94,.02,21,6,0)
to appear in the footer instead of WACO VAMC.
"^DD",8925.94,8925.94,.02,23,0)
^^3^3^2960221^
"^DD",8925.94,8925.94,.02,23,1,0)
If this field is not entered the external value returned by $$SITE^VASITE
"^DD",8925.94,8925.94,.02,23,2,0)
for this division will be used.  This field allows the site to customize
"^DD",8925.94,8925.94,.02,23,3,0)
the site's name in the footer of progress notes and forms.
"^DD",8925.94,8925.94,.02,"DT")
2960221
"^DD",8925.94,8925.94,1.01,0)
LAST PROGRESS NOTE PRINTED^D^^1;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925.94,8925.94,1.01,21,0)
^^5^5^2960221^
"^DD",8925.94,8925.94,1.01,21,1,0)
This field keeps track of the DATE/TIME of the LAST progress note printed
"^DD",8925.94,8925.94,1.01,21,2,0)
using the outpatient batch print by terminal digit sort.  At the
"^DD",8925.94,8925.94,1.01,21,3,0)
completion of the print job the DATE/TIME the job begins calculating
"^DD",8925.94,8925.94,1.01,21,4,0)
will be set into this field.  This value will be used as the starting
"^DD",8925.94,8925.94,1.01,21,5,0)
point for the next batch of notes.
"^DD",8925.94,8925.94,1.01,23,0)
^^4^4^2960221^^
"^DD",8925.94,8925.94,1.01,23,1,0)
The fileman DATE/TIME that corresponds to the time the outpatient batch
"^DD",8925.94,8925.94,1.01,23,2,0)
print option was invoked will be set into this field at the time the job
"^DD",8925.94,8925.94,1.01,23,3,0)
completes.  This wil be the suggested starting point for the next batch to
"^DD",8925.94,8925.94,1.01,23,4,0)
print.
"^DD",8925.94,8925.94,1.01,"DT")
2960221
"^DD",8925.94,8925.94,1.02,0)
PROGRESS NOTES BATCH PRINTER^P3.5'^%ZIS(1,^1;2^Q
"^DD",8925.94,8925.94,1.02,21,0)
^^2^2^2960222^
"^DD",8925.94,8925.94,1.02,21,1,0)
This printer will be presented as the default when the outpatient terminal
"^DD",8925.94,8925.94,1.02,21,2,0)
digit print option is interactively invoked. 
"^DD",8925.94,8925.94,1.02,23,0)
^^2^2^2960222^^
"^DD",8925.94,8925.94,1.02,23,1,0)
Pointer to the device file.  Expected device for the outpatient progress
"^DD",8925.94,8925.94,1.02,23,2,0)
notes sort by terminal digit.
"^DD",8925.94,8925.94,1.02,"DT")
2960221
"^DD",8925.95,8925.95,0)
FIELD^^5^19
"^DD",8925.95,8925.95,0,"DDA")
N
"^DD",8925.95,8925.95,0,"DT")
2970319
"^DD",8925.95,8925.95,0,"IX","B",8925.95,.01)

"^DD",8925.95,8925.95,0,"NM","TIU DOCUMENT PARAMETERS")

"^DD",8925.95,8925.95,0,"VRPK")
TIU RETURNS FROM WPB
"^DD",8925.95,8925.95,.01,0)
DOCUMENT DEFINITION^RP8925.1'^TIU(8925.1,^0;1^Q
"^DD",8925.95,8925.95,.01,1,0)
^.1
"^DD",8925.95,8925.95,.01,1,1,0)
8925.95^B
"^DD",8925.95,8925.95,.01,1,1,1)
S ^TIU(8925.95,"B",$E(X,1,30),DA)=""
"^DD",8925.95,8925.95,.01,1,1,2)
K ^TIU(8925.95,"B",$E(X,1,30),DA)
"^DD",8925.95,8925.95,.01,3)
Choose the document definition to which these parameters apply.
"^DD",8925.95,8925.95,.01,21,0)
^^9^9^2970124^
"^DD",8925.95,8925.95,.01,21,1,0)
This is the Document Definition to which the parameters described in
"^DD",8925.95,8925.95,.01,21,2,0)
the current record apply.  
"^DD",8925.95,8925.95,.01,21,3,0)
 
"^DD",8925.95,8925.95,.01,21,4,0)
NOTE: All parameters are inherited from ancestor classes or document
"^DD",8925.95,8925.95,.01,21,5,0)
classes, unless overridden at a subordinate level in the document
"^DD",8925.95,8925.95,.01,21,6,0)
definition hierarchy (e.g., if you set the parameter to require release
"^DD",8925.95,8925.95,.01,21,7,0)
for class Progress Notes, then all progress note titles will require
"^DD",8925.95,8925.95,.01,21,8,0)
release, unless the parameter is set to NO for a subordinate Document
"^DD",8925.95,8925.95,.01,21,9,0)
Class or Title for which release should not be required).
"^DD",8925.95,8925.95,.01,"DT")
2950630
"^DD",8925.95,8925.95,.02,0)
REQUIRE RELEASE^S^1:YES;0:NO;^0;2^Q
"^DD",8925.95,8925.95,.02,3)
Indicate whether or not release is required.
"^DD",8925.95,8925.95,.02,21,0)
^^7^7^2970124^
"^DD",8925.95,8925.95,.02,21,1,0)
This parameter determines whether the person entering the document will be
"^DD",8925.95,8925.95,.02,21,2,0)
required (and therefore prompted) to release the document from a draft
"^DD",8925.95,8925.95,.02,21,3,0)
state, upon exit from the entry/editing process.
"^DD",8925.95,8925.95,.02,21,4,0)
 
"^DD",8925.95,8925.95,.02,21,5,0)
Though designed to support functionality deemed necessary by some sites
"^DD",8925.95,8925.95,.02,21,6,0)
for Discharge Summaries, it may be found useful for any kind of TIU
"^DD",8925.95,8925.95,.02,21,7,0)
document.
"^DD",8925.95,8925.95,.02,"DT")
2950630
"^DD",8925.95,8925.95,.03,0)
REQUIRE MAS VERIFICATION^S^1:YES, ALWAYS;0:NO;2:UPLOAD ONLY;3:DIRECT ENTRY ONLY;^0;3^Q
"^DD",8925.95,8925.95,.03,3)
Indicate whether and when verification is required.
"^DD",8925.95,8925.95,.03,21,0)
^^18^18^2970319^
"^DD",8925.95,8925.95,.03,21,1,0)
This parameter determines whether verification by MAS is required, prior
"^DD",8925.95,8925.95,.03,21,2,0)
to public access, and signature of the document.
"^DD",8925.95,8925.95,.03,21,3,0)
 
"^DD",8925.95,8925.95,.03,21,4,0)
Though designed to support functionality deemed necessary by some sites
"^DD",8925.95,8925.95,.03,21,5,0)
for Discharge Summaries, it may be found useful for any kind of TIU
"^DD",8925.95,8925.95,.03,21,6,0)
document, particularly for documents that are uploaded from a
"^DD",8925.95,8925.95,.03,21,7,0)
transcription service.
"^DD",8925.95,8925.95,.03,21,8,0)
 
"^DD",8925.95,8925.95,.03,21,9,0)
Allowable values are:  0       NO
"^DD",8925.95,8925.95,.03,21,10,0)
                       1       YES, ALWAYS
"^DD",8925.95,8925.95,.03,21,11,0)
                       2       UPLOAD ONLY
"^DD",8925.95,8925.95,.03,21,12,0)
                       3       DIRECT ENTRY ONLY
"^DD",8925.95,8925.95,.03,21,13,0)
 
"^DD",8925.95,8925.95,.03,21,14,0)
Where 1 indicates that these documents will require verification
"^DD",8925.95,8925.95,.03,21,15,0)
regardless of how they originate, 2 indicates that verification will be
"^DD",8925.95,8925.95,.03,21,16,0)
required only when the documents are Uploaded, and 3 indicates that
"^DD",8925.95,8925.95,.03,21,17,0)
verification will be required only when the document is entered directly
"^DD",8925.95,8925.95,.03,21,18,0)
into DHCP.
"^DD",8925.95,8925.95,.03,"DT")
2970319
"^DD",8925.95,8925.95,.04,0)
REQUIRE AUTHOR TO SIGN^S^1:YES;0:NO;^0;4^Q
"^DD",8925.95,8925.95,.04,3)
Indicate whether the author must sign the document.
"^DD",8925.95,8925.95,.04,21,0)
13^^13^13^2970124^
"^DD",8925.95,8925.95,.04,21,1,0)
Primarily useful for Discharge Summaries, or documents where there is
"^DD",8925.95,8925.95,.04,21,2,0)
usually an expected cosigner, this boolean field indicates whether or not
"^DD",8925.95,8925.95,.04,21,3,0)
the author should sign the document before the expected cosigner.
"^DD",8925.95,8925.95,.04,21,4,0)
 
"^DD",8925.95,8925.95,.04,21,5,0)
If set to NO, only the expected cosigner (usually an attending physician)
"^DD",8925.95,8925.95,.04,21,6,0)
will be actively alerted for signature, although the unsigned document
"^DD",8925.95,8925.95,.04,21,7,0)
will still appear in the author's unsigned list, and he should be ALLOWED
"^DD",8925.95,8925.95,.04,21,8,0)
to sign it, his signature will not be REQUIRED.  
"^DD",8925.95,8925.95,.04,21,9,0)
 
"^DD",8925.95,8925.95,.04,21,10,0)
If set to YES (WHICH WE RECOMMEND IN ALL CASES FOR PROGRESS NOTES), then
"^DD",8925.95,8925.95,.04,21,11,0)
the author will be actively alerted for signature, and if the expected
"^DD",8925.95,8925.95,.04,21,12,0)
cosigner should attempt to sign the document first, he will be informed
"^DD",8925.95,8925.95,.04,21,13,0)
that the author has not yet signed.
"^DD",8925.95,8925.95,.04,"DT")
2950703
"^DD",8925.95,8925.95,.05,0)
WHEN MAY CHART COPY BE PRINTED^P8925.6'^TIU(8925.6,^0;5^Q
"^DD",8925.95,8925.95,.05,3)
Indicate when a chart copy may be printed.
"^DD",8925.95,8925.95,.05,21,0)
^^2^2^2970124^^
"^DD",8925.95,8925.95,.05,21,1,0)
Indicate the status which a document must attain prior to printing a copy
"^DD",8925.95,8925.95,.05,21,2,0)
for the chart.
"^DD",8925.95,8925.95,.05,"DT")
2950630
"^DD",8925.95,8925.95,.06,0)
ROUTINE PRINT EVENT(S)^S^R:release;V:verification;B:both;^0;6^Q
"^DD",8925.95,8925.95,.06,3)
Indicate on which event(s) chart copies should be printed.
"^DD",8925.95,8925.95,.06,21,0)
^^13^13^2970124^^^^
"^DD",8925.95,8925.95,.06,21,1,0)
Primarily useful for Discharge Summaries, or documents which are
"^DD",8925.95,8925.95,.06,21,2,0)
transcribed and printed centrally, these are the processing events
"^DD",8925.95,8925.95,.06,21,3,0)
(e.g., release, verification, or both) on which documents of the type
"^DD",8925.95,8925.95,.06,21,4,0)
specified with ROUTINE URGENCY should be automatically printed.
"^DD",8925.95,8925.95,.06,21,5,0)

"^DD",8925.95,8925.95,.06,21,6,0)
For example, a site may wish to specify that ROUTINE documents should
"^DD",8925.95,8925.95,.06,21,7,0)
only be printed on completion (i.e., signature or cosignature), while
"^DD",8925.95,8925.95,.06,21,8,0)
STAT documents print on Release from transcription, MAS Verification,
"^DD",8925.95,8925.95,.06,21,9,0)
or both, in addition to printing on completion.
"^DD",8925.95,8925.95,.06,21,10,0)

"^DD",8925.95,8925.95,.06,21,11,0)
If this parameter is left undefined, and a CHART COPY DEVICE is defined
"^DD",8925.95,8925.95,.06,21,12,0)
for the Medical Center Division, then the document will only be auto-
"^DD",8925.95,8925.95,.06,21,13,0)
printed on completion. 
"^DD",8925.95,8925.95,.06,"DT")
2950703
"^DD",8925.95,8925.95,.07,0)
STAT PRINT EVENT(S)^S^R:release;V:verification;B:both;^0;7^Q
"^DD",8925.95,8925.95,.07,3)
Indicate the event(s) on which STAT documents will be printed.
"^DD",8925.95,8925.95,.07,21,0)
^^14^14^2970124^^^
"^DD",8925.95,8925.95,.07,21,1,0)
Primarily useful for DISCHARGE SUMMARIES, or documents which are
"^DD",8925.95,8925.95,.07,21,2,0)
transcribed and printed centrally, these are the processing events
"^DD",8925.95,8925.95,.07,21,3,0)
(e.g., release, verification, or both) on which documents of the type
"^DD",8925.95,8925.95,.07,21,4,0)
specified with STAT URGENCY should be automatically printed.              
"^DD",8925.95,8925.95,.07,21,5,0)

"^DD",8925.95,8925.95,.07,21,6,0)
For example, a site may wish to specify that ROUTINE documents should
"^DD",8925.95,8925.95,.07,21,7,0)
only be printed on completion (i.e., signature or cosignature), while
"^DD",8925.95,8925.95,.07,21,8,0)
STAT documents print on Release from transcription, MAS Verification,
"^DD",8925.95,8925.95,.07,21,9,0)
or both, in addition to printing on completion.
"^DD",8925.95,8925.95,.07,21,10,0)

"^DD",8925.95,8925.95,.07,21,11,0)
If this parameter is left undefined, and a CHART COPY DEVICE is defined
"^DD",8925.95,8925.95,.07,21,12,0)
for the Medical Center Division, then the document will only be auto-
"^DD",8925.95,8925.95,.07,21,13,0)
printed on completion.                                                       
"^DD",8925.95,8925.95,.07,21,14,0)
  
"^DD",8925.95,8925.95,.07,"DT")
2950703
"^DD",8925.95,8925.95,.08,0)
MANUAL PRINT AFTER ENTRY^S^1:YES;0:NO;^0;8^Q
"^DD",8925.95,8925.95,.08,3)
Specify whether user should be asked to print after entry.
"^DD",8925.95,8925.95,.08,21,0)
^^4^4^2970124^^
"^DD",8925.95,8925.95,.08,21,1,0)
Though primarily implemented for PROGRESS NOTES, this parameter may be
"^DD",8925.95,8925.95,.08,21,2,0)
useful for any document for which a hard copy is desirable following
"^DD",8925.95,8925.95,.08,21,3,0)
entry.  If set to YES, the user will be prompted to print a copy 
"^DD",8925.95,8925.95,.08,21,4,0)
on exit from their preferred editor.
"^DD",8925.95,8925.95,.08,"DT")
2951020
"^DD",8925.95,8925.95,.09,0)
ALLOW CHART PRINT OUTSIDE MAS^S^1:YES;0:NO;^0;9^Q
"^DD",8925.95,8925.95,.09,3)
Indicate whether non-MAS personnel may print CHART COPIES.
"^DD",8925.95,8925.95,.09,21,0)
^^8^8^2970124^^^
"^DD",8925.95,8925.95,.09,21,1,0)
This field indicates whether the non-MAS user (e.g., providers) may print
"^DD",8925.95,8925.95,.09,21,2,0)
copies of the document for the chart.  
"^DD",8925.95,8925.95,.09,21,3,0)

"^DD",8925.95,8925.95,.09,21,4,0)
Generally, this will be set to YES for PROGRESS NOTES, which are likely
"^DD",8925.95,8925.95,.09,21,5,0)
to be printed on the Ward or in the Clinic for immediate inclusion in the
"^DD",8925.95,8925.95,.09,21,6,0)
chart, and to NO for DISCHARGE SUMMARIES, which are typically printed
"^DD",8925.95,8925.95,.09,21,7,0)
centrally, and for which extraneous or duplicate CHART COPIES are a
"^DD",8925.95,8925.95,.09,21,8,0)
particular problem.
"^DD",8925.95,8925.95,.09,"DT")
2951024
"^DD",8925.95,8925.95,.1,0)
ALLOW >1 RECORDS PER VISIT^S^1:YES;0:NO;^0;10^Q
"^DD",8925.95,8925.95,.1,3)
Indicate whether the user may enter more than one of these per visit.
"^DD",8925.95,8925.95,.1,21,0)
^^5^5^2970124^^
"^DD",8925.95,8925.95,.1,21,1,0)
This field determines whether a given document may be created more than
"^DD",8925.95,8925.95,.1,21,2,0)
once per visit.  For example, it may be necessary and appropriate to enter
"^DD",8925.95,8925.95,.1,21,3,0)
multiple PROGRESS NOTES for a single HOSPITALIZATION or CLINIC VISIT,
"^DD",8925.95,8925.95,.1,21,4,0)
although only one DISCHARGE SUMMARY may usually be entered per 
"^DD",8925.95,8925.95,.1,21,5,0)
HOSPITALIZATION.
"^DD",8925.95,8925.95,.1,"DT")
2951024
"^DD",8925.95,8925.95,.11,0)
ENABLE IRT INTERFACE^S^0:NO;1:YES;^0;11^Q
"^DD",8925.95,8925.95,.11,3)
Please indicate whether IRT Interface should be enabled.
"^DD",8925.95,8925.95,.11,21,0)
^^9^9^2970124^^^^
"^DD",8925.95,8925.95,.11,21,1,0)
This enables TIU's interface with Incomplete Record Tracking (IRT),
"^DD",8925.95,8925.95,.11,21,2,0)
which will update IRT's deficiencies when transcription, signature,
"^DD",8925.95,8925.95,.11,21,3,0)
or cosignature (review) events are registered for a given document.
"^DD",8925.95,8925.95,.11,21,4,0)

"^DD",8925.95,8925.95,.11,21,5,0)
It is primarily intended for DISCHARGE SUMMARIES, and in future for
"^DD",8925.95,8925.95,.11,21,6,0)
INTERIM SUMMARIES and OPERATIVE REPORTS.
"^DD",8925.95,8925.95,.11,21,7,0)

"^DD",8925.95,8925.95,.11,21,8,0)
We recommend that you leave this parameter undefined (or set it to NO)
"^DD",8925.95,8925.95,.11,21,9,0)
for PROGRESS NOTES.
"^DD",8925.95,8925.95,.11,"DT")
2951205
"^DD",8925.95,8925.95,.12,0)
IRT DEFICIENCY^*P393.3'^VAS(393.3,^0;12^S DIC("S")="I +$P(^VAS(393.3,+Y,0),U,7)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",8925.95,8925.95,.12,3)
Please indicate the IRT DEFICIENCY that corresponds to this document
"^DD",8925.95,8925.95,.12,12)
Only TRACKED DEFICIENCIES may be selected.
"^DD",8925.95,8925.95,.12,12.1)
S DIC("S")="I +$P(^VAS(393.3,+Y,0),U,7)"
"^DD",8925.95,8925.95,.12,21,0)
^^3^3^2970124^^^
"^DD",8925.95,8925.95,.12,21,1,0)
This field provides for a mapping between the TIU DOCUMENT DEFINITION and 
"^DD",8925.95,8925.95,.12,21,2,0)
the corresponding IRT DEFICIENCY TYPE (e.g., TIU Class DISCHARGE SUMMARY
"^DD",8925.95,8925.95,.12,21,3,0)
maps to IRT Deficiency Type DISCHARGE SUMMARY, etc.)
"^DD",8925.95,8925.95,.12,"DT")
2951206
"^DD",8925.95,8925.95,.13,0)
DEFAULT PRINTER^P3.5'^%ZIS(1,^0;13^Q
"^DD",8925.95,8925.95,.13,3)
Please select the default printer for this document.
"^DD",8925.95,8925.95,.13,21,0)
^^2^2^2960306^
"^DD",8925.95,8925.95,.13,21,1,0)
This is the default device with which the user will be prompted for this
"^DD",8925.95,8925.95,.13,21,2,0)
document.
"^DD",8925.95,8925.95,.13,"DT")
2960306
"^DD",8925.95,8925.95,.14,0)
SUPPRESS DX/CPT ON NEW VISIT^S^1:YES;0:NO;^0;14^Q
"^DD",8925.95,8925.95,.14,3)
Indicate whether to suppress Dx & CPT questions for Visits created by TIU.
"^DD",8925.95,8925.95,.14,21,0)
^^13^13^2970124^^
"^DD",8925.95,8925.95,.14,21,1,0)
Please indicate whether to SUPPRESS prompting for DIAGNOSTIC and
"^DD",8925.95,8925.95,.14,21,2,0)
PROCEDURE CODES, and (conditionally) SERVICE CONNECTION information,
"^DD",8925.95,8925.95,.14,21,3,0)
following signature of a document where an Ambulatory or Telephone
"^DD",8925.95,8925.95,.14,21,4,0)
visit was created when the document was first entered.
"^DD",8925.95,8925.95,.14,21,5,0)

"^DD",8925.95,8925.95,.14,21,6,0)
This parameter is intended primarily to control the capture of the
"^DD",8925.95,8925.95,.14,21,7,0)
minimum data set for AMBULATORY workload reporting during entry of
"^DD",8925.95,8925.95,.14,21,8,0)
PROGRESS NOTES, and it will not have any effect on the processing
"^DD",8925.95,8925.95,.14,21,9,0)
of DISCHARGE SUMMARIES.
"^DD",8925.95,8925.95,.14,21,10,0)

"^DD",8925.95,8925.95,.14,21,11,0)
NOTE:  If you set this parameter to YES, you will need to capture this
"^DD",8925.95,8925.95,.14,21,12,0)
information by some other uniform means (e.g., an AICS encounter form,
"^DD",8925.95,8925.95,.14,21,13,0)
etc.) in order to receive workload credit for these visits.
"^DD",8925.95,8925.95,.14,"DT")
2961028
"^DD",8925.95,8925.95,1,0)
PROCESSING STEPS^8925.951P^^1;0
"^DD",8925.95,8925.95,2,0)
DIVISION^8925.952P^^2;0
"^DD",8925.95,8925.95,3,0)
EDITOR SET-UP CODE^K^^3;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.95,8925.95,3,3)
This is Standard MUMPS code.
"^DD",8925.95,8925.95,3,9)
@
"^DD",8925.95,8925.95,3,21,0)
^^8^8^2970124^^^
"^DD",8925.95,8925.95,3,21,1,0)
This is MUMPS code to be executed prior to invoking the user's preferred
"^DD",8925.95,8925.95,3,21,2,0)
editor through ^DIWE.  It will ordinarily set local variables to be used
"^DD",8925.95,8925.95,3,21,3,0)
in the editor's header, etc.
"^DD",8925.95,8925.95,3,21,4,0)

"^DD",8925.95,8925.95,3,21,5,0)
For example, at Boston VAMC, local code was written to set a local array
"^DD",8925.95,8925.95,3,21,6,0)
containing the patient demographics, which a MUMPS-based prorprietary
"^DD",8925.95,8925.95,3,21,7,0)
editor used at the site could then display to the user in a fixed header
"^DD",8925.95,8925.95,3,21,8,0)
during editing of the document.
"^DD",8925.95,8925.95,3,"DT")
2960306
"^DD",8925.95,8925.95,4,0)
FILING ERROR ALERT RECIPIENTS^8925.954P^^4;0
"^DD",8925.95,8925.95,5,0)
USERS REQUIRING COSIGNATURE^8925.955P^^5;0
"^DD",8925.95,8925.95,5,21,0)
^^7^7^2970124^
"^DD",8925.95,8925.95,5,21,1,0)
Please indicate which groups of users (i.e., User Classes) require
"^DD",8925.95,8925.95,5,21,2,0)
cosignature for the type of document in question.  For example,
"^DD",8925.95,8925.95,5,21,3,0)
STUDENTS, INTERNS, LPNs, and other user classes may be identified
"^DD",8925.95,8925.95,5,21,4,0)
as requiring a cosignature for PROGRESS NOTES (and in future, for
"^DD",8925.95,8925.95,5,21,5,0)
CONSULTS, or H & P's).  Independent of this parameter, DISCHARGE
"^DD",8925.95,8925.95,5,21,6,0)
SUMMARIES will ALWAYS require cosignature by the ATTENDING PHYSICIAN,
"^DD",8925.95,8925.95,5,21,7,0)
EXCEPT when the ATTENDING PHYSICIAN dictates the summary himself.
"^DD",8925.95,8925.951,0)
PROCESSING STEPS SUB-FIELD^^1^6
"^DD",8925.95,8925.951,0,"DT")
2950630
"^DD",8925.95,8925.951,0,"IX","B",8925.951,.01)

"^DD",8925.95,8925.951,0,"NM","PROCESSING STEPS")

"^DD",8925.95,8925.951,0,"UP")
8925.95
"^DD",8925.95,8925.951,.01,0)
PROCESSING STEPS^MP8930.8'^USR(8930.8,^0;1^Q
"^DD",8925.95,8925.951,.01,1,0)
^.1
"^DD",8925.95,8925.951,.01,1,1,0)
8925.951^B
"^DD",8925.95,8925.951,.01,1,1,1)
S ^TIU(8925.95,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",8925.95,8925.951,.01,1,1,2)
K ^TIU(8925.95,DA(1),1,"B",$E(X,1,30),DA)
"^DD",8925.95,8925.951,.01,3)
Please indicate a step involved in processing this document.
"^DD",8925.95,8925.951,.01,21,0)
^^3^3^2950630^
"^DD",8925.95,8925.951,.01,21,1,0)
This is a step or action (e.g., verification) in the processing of a
"^DD",8925.95,8925.951,.01,21,2,0)
document that moves it from one state (e.g., unverified) to another (e.g.,
"^DD",8925.95,8925.951,.01,21,3,0)
unsigned).
"^DD",8925.95,8925.951,.01,"DT")
2950630
"^DD",8925.95,8925.951,.02,0)
SEQUENCE^NJ2,0^^0;2^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",8925.95,8925.951,.02,3)
Indicate the order in processing in which this step should occur.
"^DD",8925.95,8925.951,.02,21,0)
^^2^2^2950630^
"^DD",8925.95,8925.951,.02,21,1,0)
This is the serial sequence in the processing of this document in which
"^DD",8925.95,8925.951,.02,21,2,0)
the current step should ordinarily occur.
"^DD",8925.95,8925.951,.02,"DT")
2950630
"^DD",8925.95,8925.951,.03,0)
REQUIRED^S^0:OPTIONAL;1:REQUIRED;^0;3^Q
"^DD",8925.95,8925.951,.03,3)
Indicate whether the step is required or optional.
"^DD",8925.95,8925.951,.03,21,0)
^^3^3^2950630^
"^DD",8925.95,8925.951,.03,21,1,0)
Indicate whether this step is required or optional for completion of this
"^DD",8925.95,8925.951,.03,21,2,0)
document (e.g., Progress Notes must be cosigned ONLY when the author is a
"^DD",8925.95,8925.951,.03,21,3,0)
Medical Student).
"^DD",8925.95,8925.951,.03,"DT")
2950630
"^DD",8925.95,8925.951,.04,0)
RESULTING STATUS^P8925.6'^TIU(8925.6,^0;4^Q
"^DD",8925.95,8925.951,.04,3)
Indicate the status which results on completion of the step.
"^DD",8925.95,8925.951,.04,21,0)
^^3^3^2950630^
"^DD",8925.95,8925.951,.04,21,1,0)
This is the status of the document following completion of the step in
"^DD",8925.95,8925.951,.04,21,2,0)
question.  For instance, if a discharge summary should attain the status
"^DD",8925.95,8925.951,.04,21,3,0)
UNSIGNED, following the verification step, this would be indicated here.
"^DD",8925.95,8925.951,.04,"DT")
2950630
"^DD",8925.95,8925.951,.05,0)
CONDITION TEXT^F^^0;5^K:$L(X)>60!($L(X)<3) X
"^DD",8925.95,8925.951,.05,3)
Indicate the condition under which the step is necessary.
"^DD",8925.95,8925.951,.05,21,0)
^^3^3^2950630^
"^DD",8925.95,8925.951,.05,21,1,0)
Describe the condition under which an optional step will be required
"^DD",8925.95,8925.951,.05,21,2,0)
(e.g., cosignature of a Progress Note is required only when the author of
"^DD",8925.95,8925.951,.05,21,3,0)
the note is a provider in training, e.g., a Medical Student).
"^DD",8925.95,8925.951,.05,"DT")
2950630
"^DD",8925.95,8925.951,1,0)
CONDITION CODE^K^^1;E1,245^K:$L(X)>245 X D:$D(X) ^DIM
"^DD",8925.95,8925.951,1,3)
This is Standard MUMPS code.
"^DD",8925.95,8925.951,1,9)
@
"^DD",8925.95,8925.951,1,21,0)
^^7^7^2950630^
"^DD",8925.95,8925.951,1,21,1,0)
This is a line of MUMPS code which imposes the condition by which an
"^DD",8925.95,8925.951,1,21,2,0)
optional step must occur.  It must modify the boolean special variable,
"^DD",8925.95,8925.951,1,21,3,0)
$TEST, to indicate whether the step must occur.  e.g., in the case where a
"^DD",8925.95,8925.951,1,21,4,0)
medical student author's a progress note, the MUMPS code for the condition
"^DD",8925.95,8925.951,1,21,5,0)
may look like:
"^DD",8925.95,8925.951,1,21,6,0)
 
"^DD",8925.95,8925.951,1,21,7,0)
        I +$$ISA^USRLM(TIUAUTH,"MEDICAL STUDENT")
"^DD",8925.95,8925.951,1,"DT")
2950630
"^DD",8925.95,8925.952,0)
DIVISION SUB-FIELD^^.03^3
"^DD",8925.95,8925.952,0,"DT")
2950703
"^DD",8925.95,8925.952,0,"IX","B",8925.952,.01)

"^DD",8925.95,8925.952,0,"NM","DIVISION")

"^DD",8925.95,8925.952,0,"UP")
8925.95
"^DD",8925.95,8925.952,.01,0)
DIVISION^MP40.8'^DG(40.8,^0;1^Q
"^DD",8925.95,8925.952,.01,1,0)
^.1
"^DD",8925.95,8925.952,.01,1,1,0)
8925.952^B
"^DD",8925.95,8925.952,.01,1,1,1)
S ^TIU(8925.95,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",8925.95,8925.952,.01,1,1,2)
K ^TIU(8925.95,DA(1),2,"B",$E(X,1,30),DA)
"^DD",8925.95,8925.952,.01,3)
Please indicate the Medical Center Division
"^DD",8925.95,8925.952,.01,21,0)
^^6^6^2970124^^^
"^DD",8925.95,8925.952,.01,21,1,0)
The remaining parameters (for the moment, only the chart copy devices
"^DD",8925.95,8925.952,.01,21,2,0)
in support of TIU's auto-print capability), may be independently defined
"^DD",8925.95,8925.952,.01,21,3,0)
according to Medical Center Division.
"^DD",8925.95,8925.952,.01,21,4,0)

"^DD",8925.95,8925.952,.01,21,5,0)
Please indicate the Medical Center Division for which the remaining
"^DD",8925.95,8925.952,.01,21,6,0)
parameters are being defined.
"^DD",8925.95,8925.952,.01,"DT")
2950703
"^DD",8925.95,8925.952,.02,0)
CHART COPY PRINTER^P3.5'^%ZIS(1,^0;2^Q
"^DD",8925.95,8925.952,.02,3)
Select the printer for chart copies of routine documents.
"^DD",8925.95,8925.952,.02,21,0)
^^10^10^2970124^^^
"^DD",8925.95,8925.952,.02,21,1,0)
This parameter is primarily useful for DISCHARGE SUMMARIES, or other
"^DD",8925.95,8925.952,.02,21,2,0)
documents where automatic central printing of chart copies on site-
"^DD",8925.95,8925.952,.02,21,3,0)
configurable events are most useful (e.g., INTERIM SUMMARIES or
"^DD",8925.95,8925.952,.02,21,4,0)
OPERATIVE REPORTS at some point in the future).
"^DD",8925.95,8925.952,.02,21,5,0)

"^DD",8925.95,8925.952,.02,21,6,0)
When defined along with a STAT CHART COPY PRINTER, this is the device to
"^DD",8925.95,8925.952,.02,21,7,0)
which chart copies of documents with ROUTINE urgencies will be sent
"^DD",8925.95,8925.952,.02,21,8,0)
automatically.  If no STAT CHART COPY PRINTER is defined, then ALL
"^DD",8925.95,8925.952,.02,21,9,0)
documents of the current type will be sent to this device, regardless of
"^DD",8925.95,8925.952,.02,21,10,0)
their urgencies.
"^DD",8925.95,8925.952,.02,"DT")
2950703
"^DD",8925.95,8925.952,.03,0)
STAT CHART COPY PRINTER^P3.5'^%ZIS(1,^0;3^Q
"^DD",8925.95,8925.952,.03,3)
Select the chart copy printer for STAT documents.
"^DD",8925.95,8925.952,.03,21,0)
^^8^8^2970124^^
"^DD",8925.95,8925.952,.03,21,1,0)
This parameter is primarily useful for DISCHARGE SUMMARIES, or other
"^DD",8925.95,8925.952,.03,21,2,0)
documents where automatic central printing of chart copies on site-
"^DD",8925.95,8925.952,.03,21,3,0)
configurable events are most useful (e.g., INTERIM SUMMARIES or
"^DD",8925.95,8925.952,.03,21,4,0)
OPERATIVE REPORTS at some point in the future).
"^DD",8925.95,8925.952,.03,21,5,0)

"^DD",8925.95,8925.952,.03,21,6,0)
When defined along with a CHART COPY PRINTER, this is the device to
"^DD",8925.95,8925.952,.03,21,7,0)
which chart copies of documents with STAT urgencies will be sent
"^DD",8925.95,8925.952,.03,21,8,0)
automatically.  
"^DD",8925.95,8925.952,.03,"DT")
2950703
"^DD",8925.95,8925.954,0)
FILING ERROR ALERT RECIPIENTS SUB-FIELD^^.01^1
"^DD",8925.95,8925.954,0,"DT")
2960606
"^DD",8925.95,8925.954,0,"IX","B",8925.954,.01)

"^DD",8925.95,8925.954,0,"NM","FILING ERROR ALERT RECIPIENTS")

"^DD",8925.95,8925.954,0,"UP")
8925.95
"^DD",8925.95,8925.954,.01,0)
FILING ERROR ALERT RECIPIENTS^MP200'^VA(200,^0;1^Q
"^DD",8925.95,8925.954,.01,1,0)
^.1
"^DD",8925.95,8925.954,.01,1,1,0)
8925.954^B
"^DD",8925.95,8925.954,.01,1,1,1)
S ^TIU(8925.95,DA(1),4,"B",$E(X,1,30),DA)=""
"^DD",8925.95,8925.954,.01,1,1,2)
K ^TIU(8925.95,DA(1),4,"B",$E(X,1,30),DA)
"^DD",8925.95,8925.954,.01,3)
Select one or more recipients for filing error alerts.
"^DD",8925.95,8925.954,.01,21,0)
^^3^3^2960606^^
"^DD",8925.95,8925.954,.01,21,1,0)
These are the recipients of alerts which are sent by the upload/filer
"^DD",8925.95,8925.954,.01,21,2,0)
process when a document of a given type fails to be filed, or has one or
"^DD",8925.95,8925.954,.01,21,3,0)
more missing fields.
"^DD",8925.95,8925.954,.01,"DT")
2960606
"^DD",8925.95,8925.955,0)
USERS REQUIRING COSIGNATURE SUB-FIELD^^.01^1
"^DD",8925.95,8925.955,0,"DT")
2960906
"^DD",8925.95,8925.955,0,"IX","B",8925.955,.01)

"^DD",8925.95,8925.955,0,"NM","USERS REQUIRING COSIGNATURE")

"^DD",8925.95,8925.955,0,"UP")
8925.95
"^DD",8925.95,8925.955,.01,0)
USERS REQUIRING COSIGNATURE^MP8930'^USR(8930,^0;1^Q
"^DD",8925.95,8925.955,.01,1,0)
^.1
"^DD",8925.95,8925.955,.01,1,1,0)
8925.955^B
"^DD",8925.95,8925.955,.01,1,1,1)
S ^TIU(8925.95,DA(1),5,"B",$E(X,1,30),DA)=""
"^DD",8925.95,8925.955,.01,1,1,2)
K ^TIU(8925.95,DA(1),5,"B",$E(X,1,30),DA)
"^DD",8925.95,8925.955,.01,3)
Specify which user class(es) require cosignature
"^DD",8925.95,8925.955,.01,21,0)
^^7^7^2970124^^
"^DD",8925.95,8925.955,.01,21,1,0)
Please indicate which groups of users (i.e., User Classes) require
"^DD",8925.95,8925.955,.01,21,2,0)
cosignature for the type of document in question.  For example,
"^DD",8925.95,8925.955,.01,21,3,0)
STUDENTS, INTERNS, LPNs, and other user classes may be identified
"^DD",8925.95,8925.955,.01,21,4,0)
as requiring a cosignature for PROGRESS NOTES (and in future, for
"^DD",8925.95,8925.955,.01,21,5,0)
CONSULTS, or H & P's).  Independent of this parameter, DISCHARGE
"^DD",8925.95,8925.955,.01,21,6,0)
SUMMARIES will ALWAYS require cosignature by the ATTENDING PHYSICIAN,
"^DD",8925.95,8925.955,.01,21,7,0)
EXCEPT when the ATTENDING PHYSICIAN dictates the summary himself.
"^DD",8925.95,8925.955,.01,"DT")
2960906
"^DD",8925.97,8925.97,0)
FIELD^^2.5^11
"^DD",8925.97,8925.97,0,"DDA")
N
"^DD",8925.97,8925.97,0,"DT")
2970226
"^DD",8925.97,8925.97,0,"IX","B",8925.97,.01)

"^DD",8925.97,8925.97,0,"NM","TIU CONVERSIONS")

"^DD",8925.97,8925.97,.01,0)
DATA CONVERTED^RS^PN:PROGRESS NOTES;DS:DISCHARGE SUMMARY;^0;1^Q
"^DD",8925.97,8925.97,.01,1,0)
^.1
"^DD",8925.97,8925.97,.01,1,1,0)
8925.97^B
"^DD",8925.97,8925.97,.01,1,1,1)
S ^TIU(8925.97,"B",$E(X,1,30),DA)=""
"^DD",8925.97,8925.97,.01,1,1,2)
K ^TIU(8925.97,"B",$E(X,1,30),DA)
"^DD",8925.97,8925.97,.01,3)

"^DD",8925.97,8925.97,.01,21,0)
^^1^1^2960814^^^
"^DD",8925.97,8925.97,.01,21,1,0)
Field contains name of data converted
"^DD",8925.97,8925.97,.01,23,0)
^^3^3^2960814^^^
"^DD",8925.97,8925.97,.01,23,1,0)
With the initial release of TIU, the field will contain a set of
"^DD",8925.97,8925.97,.01,23,2,0)
PN for ^GMR(121, Generic Progress Notes, and DS for ^GMR(128,
"^DD",8925.97,8925.97,.01,23,3,0)
Discharge Summary,
"^DD",8925.97,8925.97,.01,"DT")
2960814
"^DD",8925.97,8925.97,.02,0)
START DATE^D^^0;2^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925.97,8925.97,.02,21,0)
^^2^2^2960814^^
"^DD",8925.97,8925.97,.02,21,1,0)
Date/time conversion is first started.  A record of restarts
"^DD",8925.97,8925.97,.02,21,2,0)
is kept in a subfile.
"^DD",8925.97,8925.97,.02,23,0)
^^2^2^2960814^^^
"^DD",8925.97,8925.97,.02,23,1,0)
Date and time of initial start.  Seconds may be captured.  Used to compute
"^DD",8925.97,8925.97,.02,23,2,0)
length of conversion.
"^DD",8925.97,8925.97,.02,"DT")
2960814
"^DD",8925.97,8925.97,.03,0)
COMPLETED DATE^D^^0;3^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",8925.97,8925.97,.03,21,0)
^^1^1^2960814^^^
"^DD",8925.97,8925.97,.03,21,1,0)
Date/time conversion completed.
"^DD",8925.97,8925.97,.03,23,0)
^^1^1^2960814^^
"^DD",8925.97,8925.97,.03,23,1,0)
Date/time conversion completed.  Used to compute length of conversion.
"^DD",8925.97,8925.97,.03,"DT")
2960814
"^DD",8925.97,8925.97,.04,0)
STARTING IEN^NJ8,0^^0;4^K:+X'=X!(X>99999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",8925.97,8925.97,.04,3)
Type a Number between 0 and 99999999, 0 Decimal Digits
"^DD",8925.97,8925.97,.04,21,0)
^^2^2^2960814^^^
"^DD",8925.97,8925.97,.04,21,1,0)
When the conversion is begun the internal entry number (IEN)
"^DD",8925.97,8925.97,.04,21,2,0)
of the first record is stored in this field.
"^DD",8925.97,8925.97,.04,23,0)
^^1^1^2960814^^
"^DD",8925.97,8925.97,.04,23,1,0)
The IEN for the first record converted is stored in this field.
"^DD",8925.97,8925.97,.04,"DT")
2960814
"^DD",8925.97,8925.97,.05,0)
PROCESSING IEN^NJ8,0^^0;5^K:+X'=X!(X>99999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",8925.97,8925.97,.05,3)
Type a Number between 0 and 99999999, 0 Decimal Digits
"^DD",8925.97,8925.97,.05,21,0)
^^1^1^2960814^^
"^DD",8925.97,8925.97,.05,21,1,0)
The internal file number of the last actual record processed.
"^DD",8925.97,8925.97,.05,23,0)
^^1^1^2960814^
"^DD",8925.97,8925.97,.05,23,1,0)
This is the IEN of the record undergoing conversion.
"^DD",8925.97,8925.97,.05,"DT")
2960814
"^DD",8925.97,8925.97,.06,0)
RECORDS PROCESSED^NJ8,0^^0;6^K:+X'=X!(X>99999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",8925.97,8925.97,.06,3)
Type a Number between 0 and 99999999, 0 Decimal Digits
"^DD",8925.97,8925.97,.06,21,0)
^^1^1^2960814^^
"^DD",8925.97,8925.97,.06,21,1,0)
This field contains a running total of records successfully converted.
"^DD",8925.97,8925.97,.06,23,0)
^^3^3^2960814^^
"^DD",8925.97,8925.97,.06,23,1,0)
This field contains a running total of the numbers of records processed
"^DD",8925.97,8925.97,.06,23,2,0)
during the conversion.  It is used to inform sites of the progress of the
"^DD",8925.97,8925.97,.06,23,3,0)
conversion.
"^DD",8925.97,8925.97,.06,"DT")
2960814
"^DD",8925.97,8925.97,.07,0)
ERROR COUNTER^NJ8,0^^0;7^K:+X'=X!(X>99999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",8925.97,8925.97,.07,3)
Type a Number between 0 and 99999999, 0 Decimal Digits
"^DD",8925.97,8925.97,.07,21,0)
^^2^2^2960814^^^
"^DD",8925.97,8925.97,.07,21,1,0)
This field maintains a running total of the number of records not
"^DD",8925.97,8925.97,.07,21,2,0)
converted. 
"^DD",8925.97,8925.97,.07,23,0)
^^3^3^2960814^^
"^DD",8925.97,8925.97,.07,23,1,0)
This field maintains a running total of errors encountered during
"^DD",8925.97,8925.97,.07,23,2,0)
conversion.   A listing of the progress note errors is contained 
"^DD",8925.97,8925.97,.07,23,3,0)
in ^GMR(121,"ERROR".
"^DD",8925.97,8925.97,.07,"DT")
2960814
"^DD",8925.97,8925.97,.08,0)
STOPPING IEN^NJ8,0^^0;8^K:+X'=X!(X>99999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",8925.97,8925.97,.08,3)
Type a Number between 0 and 99999999, 0 Decimal Digits
"^DD",8925.97,8925.97,.08,21,0)
^^5^5^2960814^^^^
"^DD",8925.97,8925.97,.08,21,1,0)
If a site wants to control a conversion, they may enter the IEN
"^DD",8925.97,8925.97,.08,21,2,0)
of the record at which they want the conversion to stop. In the
"^DD",8925.97,8925.97,.08,21,3,0)
case of progress notes, this allows for a controlled conversion
"^DD",8925.97,8925.97,.08,21,4,0)
of ^GMR(121 into TIU.  While the conversion is running, users
"^DD",8925.97,8925.97,.08,21,5,0)
can continue to use Generic Progress Notes.
"^DD",8925.97,8925.97,.08,23,0)
^^1^1^2960814^^
"^DD",8925.97,8925.97,.08,23,1,0)
Stopping point for conversion.
"^DD",8925.97,8925.97,.08,"DT")
2960814
"^DD",8925.97,8925.97,2,0)
ROLLBACK - START^NJ8,0^^2;1^K:+X'=X!(X>99999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",8925.97,8925.97,2,3)
Type a Number between 0 and 99999999, 0 Decimal Digits
"^DD",8925.97,8925.97,2,21,0)
^^2^2^2960814^^
"^DD",8925.97,8925.97,2,21,1,0)
If a rollback of data is required, this is the IEN within ^TIU
"^DD",8925.97,8925.97,2,21,2,0)
(8925 at which to start.
"^DD",8925.97,8925.97,2,23,0)
^^1^1^2960814^
"^DD",8925.97,8925.97,2,23,1,0)
IEN of a record within TIU from where a rollback could start.
"^DD",8925.97,8925.97,2,"DT")
2960814
"^DD",8925.97,8925.97,2.1,0)
ROLLBACK - STOP^NJ8,0^^2;2^K:+X'=X!(X>99999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",8925.97,8925.97,2.1,3)
Type a Number between 0 and 99999999, 0 Decimal Digits
"^DD",8925.97,8925.97,2.1,21,0)
^^1^1^2960814^^
"^DD",8925.97,8925.97,2.1,21,1,0)
This IEN can help to control a rollback of data if necessary.
"^DD",8925.97,8925.97,2.1,23,0)
^^1^1^2960814^
"^DD",8925.97,8925.97,2.1,23,1,0)
This IEN of a record within TIU is stops a rollback of data.
"^DD",8925.97,8925.97,2.1,"DT")
2960814
"^DD",8925.97,8925.97,2.5,0)
HALT CONVERSION^S^1:YES;^2;3^Q
"^DD",8925.97,8925.97,2.5,21,0)
^^2^2^2970226^
"^DD",8925.97,8925.97,2.5,21,1,0)
This field will be monitored by the conversion to determine
"^DD",8925.97,8925.97,2.5,21,2,0)
if the conversion should be halted before completion.
"^DD",8925.97,8925.97,2.5,"DT")
2970226
"^DD",8925.98,8925.98,0)
FIELD^^99^5
"^DD",8925.98,8925.98,0,"DDA")
N
"^DD",8925.98,8925.98,0,"DT")
2970114
"^DD",8925.98,8925.98,0,"ID","W.02")
S %I=Y,Y=$S('$D(^(0)):"",$D(^TIU(8925.1,+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(8925.1,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",8925.98,8925.98,0,"IX","AC",8925.98,.01)

"^DD",8925.98,8925.98,0,"IX","AC1",8925.98,.02)

"^DD",8925.98,8925.98,0,"IX","AM",8925.98,99)

"^DD",8925.98,8925.98,0,"IX","B",8925.98,.01)

"^DD",8925.98,8925.98,0,"NM","TIU PERSONAL DOCUMENT TYPE LIST")

"^DD",8925.98,8925.98,0,"VRPK")
TEXT INTEGRATION UTILITIES
"^DD",8925.98,8925.98,.01,0)
PERSON^RP200'^VA(200,^0;1^Q
"^DD",8925.98,8925.98,.01,1,0)
^.1
"^DD",8925.98,8925.98,.01,1,1,0)
8925.98^B
"^DD",8925.98,8925.98,.01,1,1,1)
S ^TIU(8925.98,"B",$E(X,1,30),DA)=""
"^DD",8925.98,8925.98,.01,1,1,2)
K ^TIU(8925.98,"B",$E(X,1,30),DA)
"^DD",8925.98,8925.98,.01,1,2,0)
8925.98^AC^MUMPS
"^DD",8925.98,8925.98,.01,1,2,1)
I +$P($G(^TIU(8925.98,+DA,0)),U,2) S ^TIU(8925.98,"AC",+X,+$P(^TIU(8925.98,+DA,0),U,2),DA)=""
"^DD",8925.98,8925.98,.01,1,2,2)
I +$P($G(^TIU(8925.98,+DA,0)),U,2) K ^TIU(8925.98,"AC",+X,+$P(^TIU(8925.98,+DA,0),U,2),DA)
"^DD",8925.98,8925.98,.01,1,2,"%D",0)
^^3^3^2950911^^^
"^DD",8925.98,8925.98,.01,1,2,"%D",1,0)
This multi-field, MUMPS-type crosss-reference by User and Parent Document
"^DD",8925.98,8925.98,.01,1,2,"%D",2,0)
class is used to facilitate identification of the user's preferred list of
"^DD",8925.98,8925.98,.01,1,2,"%D",3,0)
documents within the context of a given parent class.
"^DD",8925.98,8925.98,.01,1,2,"DT")
2950905
"^DD",8925.98,8925.98,.01,3)
Please indicate a person (by name, SSN, initials, etc.)
"^DD",8925.98,8925.98,.01,21,0)
^^1^1^2950616^
"^DD",8925.98,8925.98,.01,21,1,0)
This is the person whose preference is being identified.
"^DD",8925.98,8925.98,.01,"DT")
2950905
"^DD",8925.98,8925.98,.02,0)
PARENT DOCUMENT CLASS^*P8925.1'^TIU(8925.1,^0;2^S DIC("S")="I +$$CLASPICK^TIULA4(38,+Y,""CL"")" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",8925.98,8925.98,.02,.1)
CLASS
"^DD",8925.98,8925.98,.02,1,0)
^.1
"^DD",8925.98,8925.98,.02,1,1,0)
8925.98^AC1^MUMPS
"^DD",8925.98,8925.98,.02,1,1,1)
I +$P($G(^TIU(8925.98,+DA,0)),U) S ^TIU(8925.98,"AC",+$P(^TIU(8925.98,+DA,0),U),+X,DA)=""
"^DD",8925.98,8925.98,.02,1,1,2)
I +$P($G(^TIU(8925.98,+DA,0)),U) K ^TIU(8925.98,"AC",+$P(^TIU(8925.98,+DA,0),U),+X,DA)
"^DD",8925.98,8925.98,.02,1,1,"%D",0)
^^3^3^2950925^^
"^DD",8925.98,8925.98,.02,1,1,"%D",1,0)
This multi-field, MUMPS-type crosss-reference by User and Parent Document
"^DD",8925.98,8925.98,.02,1,1,"%D",2,0)
class is used to facilitate identification of the user's preferred list
"^DD",8925.98,8925.98,.02,1,1,"%D",3,0)
ofdocuments within the context of a given parent class.
"^DD",8925.98,8925.98,.02,1,1,"DT")
2950911
"^DD",8925.98,8925.98,.02,3)
Please select the parent group to which the document list belongs.
"^DD",8925.98,8925.98,.02,12)
You may only pick CLASSES of documents at this prompt.
"^DD",8925.98,8925.98,.02,12.1)
S DIC("S")="I +$$CLASPICK^TIULA4(38,+Y,""CL"")"
"^DD",8925.98,8925.98,.02,21,0)
^^3^3^2961031^^
"^DD",8925.98,8925.98,.02,21,1,0)
This is the group (i.e., either Document Class or Class) to which the
"^DD",8925.98,8925.98,.02,21,2,0)
preferred document list belongs.  i.e., enter the class Progress Notes to
"^DD",8925.98,8925.98,.02,21,3,0)
indicate that the corresponding list will apply to Progress Notes.
"^DD",8925.98,8925.98,.02,"DT")
2961101
"^DD",8925.98,8925.98,.03,0)
DEFAULT TYPE^*P8925.1'^TIU(8925.1,^0;3^S DIC("S")="I +$$DFLTPICK^TIULA4(+$P(^TIU(8925.98,+DA,0),U,2),+Y,+DA)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",8925.98,8925.98,.03,.1)
DEFAULT TITLE
"^DD",8925.98,8925.98,.03,3)
Please indicate which document type will be the default.
"^DD",8925.98,8925.98,.03,12)
You may only select active documents w/in the parent class.
"^DD",8925.98,8925.98,.03,12.1)
S DIC("S")="I +$$DFLTPICK^TIULA4(+$P(^TIU(8925.98,+DA,0),U,2),+Y,+DA)"
"^DD",8925.98,8925.98,.03,21,0)
^^3^3^2961101^
"^DD",8925.98,8925.98,.03,21,1,0)
This determines what TITLE will be offered by default when selecting
"^DD",8925.98,8925.98,.03,21,2,0)
from a given parent class (e.g., when entering a PROGRESS NOTE, you
"^DD",8925.98,8925.98,.03,21,3,0)
may want the DEFAULT TITLE to be DIABETES EDUCATION, etc.).
"^DD",8925.98,8925.98,.03,"DT")
2961101
"^DD",8925.98,8925.98,10,0)
PERSONAL DOCUMENT LIST^8925.9801IP^^10;0
"^DD",8925.98,8925.98,10,21,0)
^^2^2^2970114^^^^
"^DD",8925.98,8925.98,10,21,1,0)
This Multiple is used for storing personal lists of documents for type
"^DD",8925.98,8925.98,10,21,2,0)
selection during entry/editing.
"^DD",8925.98,8925.98,99,0)
TIMESTAMP^F^^99;1^K:$L(X)>15!($L(X)<1) X
"^DD",8925.98,8925.98,99,1,0)
^.1
"^DD",8925.98,8925.98,99,1,1,0)
8925.98^AM^MUMPS
"^DD",8925.98,8925.98,99,1,1,1)
D SET^TIUDD98
"^DD",8925.98,8925.98,99,1,1,2)
D KILL^TIUDD98
"^DD",8925.98,8925.98,99,1,1,"%D",0)
^^3^3^2950911^^
"^DD",8925.98,8925.98,99,1,1,"%D",1,0)
This MUMPS-type cross reference on the TIMESTAMP field is used to
"^DD",8925.98,8925.98,99,1,1,"%D",2,0)
accomplish menu compilation into ^XUTL("XQORM","DA;TIU(8925.98,", for
"^DD",8925.98,8925.98,99,1,1,"%D",3,0)
presentation of menus by ^XQORM.
"^DD",8925.98,8925.98,99,1,1,"DT")
2950911
"^DD",8925.98,8925.98,99,3)
Answer must be 1-15 characters in length.
"^DD",8925.98,8925.98,99,21,0)
^^3^3^2950911^
"^DD",8925.98,8925.98,99,21,1,0)
This is the timestamp on the record in $H format which is compared with
"^DD",8925.98,8925.98,99,21,2,0)
that on the compiled menu in ^XUTL("XQORM","DA;TIU(8925.98,",99) to
"^DD",8925.98,8925.98,99,21,3,0)
determine whether recompilation is necessary.
"^DD",8925.98,8925.98,99,"DT")
2950911
"^DD",8925.98,8925.9801,0)
PERSONAL DOCUMENT LIST SUB-FIELD^^.03^3
"^DD",8925.98,8925.9801,0,"DT")
2970114
"^DD",8925.98,8925.9801,0,"ID","W.02")
W "   ",$P(^(0),U,2)
"^DD",8925.98,8925.9801,0,"IX","AM1",8925.9801,.03)

"^DD",8925.98,8925.9801,0,"IX","B",8925.9801,.01)

"^DD",8925.98,8925.9801,0,"NM","PERSONAL DOCUMENT LIST")

"^DD",8925.98,8925.9801,0,"UP")
8925.98
"^DD",8925.98,8925.9801,.01,0)
TITLE^M*P8925.1'^TIU(8925.1,^0;1^S DIC("S")="I $P(^TIU(8925.1,+Y,0),U,4)=""DOC"",+$$ISA^TIULX(+Y,+$P(^TIU(8925.98,+DA,0),U,2)),+$$CANPICK^TIULP(+Y),+$$CANENTR^TIULP(+Y)" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",8925.98,8925.9801,.01,1,0)
^.1
"^DD",8925.98,8925.9801,.01,1,1,0)
8925.9801^B
"^DD",8925.98,8925.9801,.01,1,1,1)
S ^TIU(8925.98,DA(1),10,"B",$E(X,1,30),DA)=""
"^DD",8925.98,8925.9801,.01,1,1,2)
K ^TIU(8925.98,DA(1),10,"B",$E(X,1,30),DA)
"^DD",8925.98,8925.9801,.01,3)
Please select a document type.
"^DD",8925.98,8925.9801,.01,12)
You may only select TITLES that you are authorized to ENTER.
"^DD",8925.98,8925.9801,.01,12.1)
S DIC("S")="I $P(^TIU(8925.1,+Y,0),U,4)=""DOC"",+$$ISA^TIULX(+Y,+$P(^TIU(8925.98,+DA,0),U,2)),+$$CANPICK^TIULP(+Y),+$$CANENTR^TIULP(+Y)"
"^DD",8925.98,8925.9801,.01,21,0)
^^2^2^2970114^^^^
"^DD",8925.98,8925.9801,.01,21,1,0)
This is the document to be included in your pick list of documents for
"^DD",8925.98,8925.9801,.01,21,2,0)
the current document class.
"^DD",8925.98,8925.9801,.01,"DT")
2970114
"^DD",8925.98,8925.9801,.02,0)
SEQUENCE^NJ7,3^^0;2^K:+X'=X!(X>999)!(X<0)!(X?.E1"."4N.N) X
"^DD",8925.98,8925.9801,.02,3)
Type a Number between 0 and 999, 3 Decimal Digits
"^DD",8925.98,8925.9801,.02,21,0)
^^2^2^2950925^
"^DD",8925.98,8925.9801,.02,21,1,0)
This is the sequence in which you wish the document to appear in your
"^DD",8925.98,8925.9801,.02,21,2,0)
list.
"^DD",8925.98,8925.9801,.02,"DT")
2950925
"^DD",8925.98,8925.9801,.03,0)
DISPLAY NAME^F^^0;3^K:$L(X)>26!($L(X)<2) X
"^DD",8925.98,8925.9801,.03,1,0)
^.1
"^DD",8925.98,8925.9801,.03,1,1,0)
8925.9801^AM1^MUMPS
"^DD",8925.98,8925.9801,.03,1,1,1)
D REDO^TIUDD98
"^DD",8925.98,8925.9801,.03,1,1,2)
D REDO^TIUDD98
"^DD",8925.98,8925.9801,.03,1,1,"%D",0)
^^2^2^2950925^^^
"^DD",8925.98,8925.9801,.03,1,1,"%D",1,0)
This MUMPS-type cross-reference is used for marking records for menu
"^DD",8925.98,8925.9801,.03,1,1,"%D",2,0)
recompilation when the DISPLAY NAME for an item changes.
"^DD",8925.98,8925.9801,.03,1,1,"DT")
2950911
"^DD",8925.98,8925.9801,.03,3)
Answer must be 2-26 characters in length.
"^DD",8925.98,8925.9801,.03,21,0)
^^1^1^2950718^
"^DD",8925.98,8925.9801,.03,21,1,0)
This is the name of the document to be displayed in menus.
"^DD",8925.98,8925.9801,.03,"DT")
2951011
"^DD",8925.99,8925.99,0)
FIELD^^2^21
"^DD",8925.99,8925.99,0,"DT")
2970320
"^DD",8925.99,8925.99,0,"IX","B",8925.99,.01)

"^DD",8925.99,8925.99,0,"NM","TIU PARAMETERS")

"^DD",8925.99,8925.99,0,"VRPK")
TIU RETURNS FROM WPB
"^DD",8925.99,8925.99,.01,0)
INSTITUTION^RP4'^DIC(4,^0;1^Q
"^DD",8925.99,8925.99,.01,1,0)
^.1
"^DD",8925.99,8925.99,.01,1,1,0)
8925.99^B
"^DD",8925.99,8925.99,.01,1,1,1)
S ^TIU(8925.99,"B",$E(X,1,30),DA)=""
"^DD",8925.99,8925.99,.01,1,1,2)
K ^TIU(8925.99,"B",$E(X,1,30),DA)
"^DD",8925.99,8925.99,.01,3)
Enter your Institution.
"^DD",8925.99,8925.99,.01,21,0)
^^1^1^2950608^^
"^DD",8925.99,8925.99,.01,21,1,0)
This is the DIVISION for which the current parameters entry will apply.
"^DD",8925.99,8925.99,.01,"DT")
2950608
"^DD",8925.99,8925.99,.02,0)
ENABLE ELECTRONIC SIGNATURE^S^1:YES;0:NO;^0;2^Q
"^DD",8925.99,8925.99,.02,3)

"^DD",8925.99,8925.99,.02,21,0)
^^3^3^2931028^^^^
"^DD",8925.99,8925.99,.02,21,1,0)
When set to 1, electronic signature will be enabled.  Prior to enabling
"^DD",8925.99,8925.99,.02,21,2,0)
electronic signature, it will be assumed that signatures are to be written
"^DD",8925.99,8925.99,.02,21,3,0)
on the chart copy of VAF 10-1000.
"^DD",8925.99,8925.99,.02,"DT")
2931028
"^DD",8925.99,8925.99,.03,0)
CHARACTERS PER LINE^NJ2,0^^0;3^K:+X'=X!(X>80)!(X<10)!(X?.E1"."1N.N) X
"^DD",8925.99,8925.99,.03,3)
Enter the number of characters per line, for line count computation (a # from 10 to 80).
"^DD",8925.99,8925.99,.03,21,0)
^^6^6^2930722^^^^
"^DD",8925.99,8925.99,.03,21,1,0)
This value (default 60) will be divided into the total number of 'actual'
"^DD",8925.99,8925.99,.03,21,2,0)
characters in a given Discharge Summary to derive the line count for that
"^DD",8925.99,8925.99,.03,21,3,0)
document.  By 'actual' characters, we mean all printable ASCII characters,
"^DD",8925.99,8925.99,.03,21,4,0)
with multiple white space characters stripped.  i.e., if a transcriptionist
"^DD",8925.99,8925.99,.03,21,6,0)
count, this algorithm will prevent such an abuse.
"^DD",8925.99,8925.99,.03,"DT")
2920817
"^DD",8925.99,8925.99,.04,0)
GRACE PERIOD FOR PURGE^NJ4,0^^0;4^K:+X'=X!(X>1095)!(X<90)!(X?.E1"."1N.N) X
"^DD",8925.99,8925.99,.04,3)
Enter the number of days which a record will be kept prior to purging (a # from 90 to 1095).
"^DD",8925.99,8925.99,.04,21,0)
^^2^2^2930901^^^^
"^DD",8925.99,8925.99,.04,21,1,0)
This is the number of days following transcription for which a report
"^DD",8925.99,8925.99,.04,21,2,0)
will be kept, prior to purge.
"^DD",8925.99,8925.99,.04,"DT")
2930721
"^DD",8925.99,8925.99,.05,0)
GRACE PERIOD FOR SIGNATURE^NJ2,0^^0;5^K:+X'=X!(X>10)!(X<1)!(X?.E1"."1N.N) X
"^DD",8925.99,8925.99,.05,3)
Enter the number of days to wait to notify Physician of an overdue signature (a # from 1 to 10).
"^DD",8925.99,8925.99,.05,21,0)
^^2^2^2930901^^^
"^DD",8925.99,8925.99,.05,21,1,0)
This is the number of days following transcription before an author or
"^DD",8925.99,8925.99,.05,21,2,0)
Attending Physician will be notified of a deficiency.
"^DD",8925.99,8925.99,.05,"DT")
2920817
"^DD",8925.99,8925.99,.06,0)
OPTIMIZE LIST BUILDING FOR^S^P:performance;S:security;^0;6^Q
"^DD",8925.99,8925.99,.06,3)
Please indicate whether Performance or Security should be optimized.
"^DD",8925.99,8925.99,.06,21,0)
^^22^22^2970220^^
"^DD",8925.99,8925.99,.06,21,1,0)
This parameter specifies for the institution in question whether the
"^DD",8925.99,8925.99,.06,21,2,0)
list building functions of TIU should invoke Authorization/Subscription
"^DD",8925.99,8925.99,.06,21,3,0)
to determine whether documents which the user is not yet authorized to
"^DD",8925.99,8925.99,.06,21,4,0)
see should be excluded from the list (i.e., whether the list building
"^DD",8925.99,8925.99,.06,21,5,0)
should be optimized for security).  This is the default behavior of TIU.
"^DD",8925.99,8925.99,.06,21,6,0)
If the impact of this "filtering" becomes unacceptable to users at your
"^DD",8925.99,8925.99,.06,21,7,0)
site, you may wish to set this parameter to optimize for Performance,
"^DD",8925.99,8925.99,.06,21,8,0)
which will bypass the record-wise evaluation of view privilege, and
"^DD",8925.99,8925.99,.06,21,9,0)
allow all records satisfying the search criteria to be included in the
"^DD",8925.99,8925.99,.06,21,10,0)
list.  Of course, when the user attempts to view documents from the
"^DD",8925.99,8925.99,.06,21,11,0)
resulting lists before he is authorized to do so, he will be prevented
"^DD",8925.99,8925.99,.06,21,12,0)
from doing so, with an explanatory message that looks like this:
"^DD",8925.99,8925.99,.06,21,13,0)

"^DD",8925.99,8925.99,.06,21,14,0)
Reviewing Item #1
"^DD",8925.99,8925.99,.06,21,15,0)

"^DD",8925.99,8925.99,.06,21,16,0)
 You may not VIEW this UNSIGNED NURSE'S NOTE.
"^DD",8925.99,8925.99,.06,21,17,0)

"^DD",8925.99,8925.99,.06,21,18,0)
RETURN to continue...
"^DD",8925.99,8925.99,.06,21,19,0)

"^DD",8925.99,8925.99,.06,21,20,0)
This feature is offered as a means of balancing the demands for rapid 
"^DD",8925.99,8925.99,.06,21,21,0)
response with the concerns of many facilities for control of access to 
"^DD",8925.99,8925.99,.06,21,22,0)
confidential information.
"^DD",8925.99,8925.99,.06,"DT")
2970220
"^DD",8925.99,8925.99,.07,0)
SUPPRESS REVIEW NOTES PROMPT^S^1:YES;0:NO;^0;7^Q
"^DD",8925.99,8925.99,.07,3)
Indicate whether to suppress the Review Notes prompt on entry
"^DD",8925.99,8925.99,.07,21,0)
^^2^2^2970320^^
"^DD",8925.99,8925.99,.07,21,1,0)
If this parameter is set to yes, TIU will suppress the prompt indicating
"^DD",8925.99,8925.99,.07,21,2,0)
how many notes are available to the user, when entering a Progress Note.
"^DD",8925.99,8925.99,.07,"DT")
2970320
"^DD",8925.99,8925.99,.09,0)
ASCII UPLOAD SOURCE^S^H:host file server;R:remote computer;^0;9^Q
"^DD",8925.99,8925.99,.09,3)
Please specify the source of the ASCII data to be uploaded.
"^DD",8925.99,8925.99,.09,21,0)
^^6^6^2921020^
"^DD",8925.99,8925.99,.09,21,1,0)
This field specifies the source from which reports will be uploaded.
"^DD",8925.99,8925.99,.09,21,2,0)
(H)ost will indicate to the upload processor that the source of the data
"^DD",8925.99,8925.99,.09,21,3,0)
will be an ASCII host file (VMS or DOS), while (R)emote will indicate that
"^DD",8925.99,8925.99,.09,21,4,0)
the data will be read from an ASCII stream coming to DHCP from a terminal
"^DD",8925.99,8925.99,.09,21,6,0)
computer (e.g., IBM PC or compatible, or Apple Macintosh).
"^DD",8925.99,8925.99,.09,"DT")
2920911
"^DD",8925.99,8925.99,.1,0)
RECORD HEADER SIGNAL^F^^0;10^K:$L(X)>10!($L(X)<1) X
"^DD",8925.99,8925.99,.1,3)
Enter 1-10 characters to distinguish a record's header from its report text.
"^DD",8925.99,8925.99,.1,21,0)
^^6^6^2930721^^^
"^DD",8925.99,8925.99,.1,21,1,0)
This is a free text signal to the upload process that a new report record
"^DD",8925.99,8925.99,.1,21,2,0)
header has been encountered.  It may be as simple as the three-character
"^DD",8925.99,8925.99,.1,21,3,0)
string "MSH" or as complex as "HEADERBEGIN".  The signal used by the
"^DD",8925.99,8925.99,.1,21,4,0)
Surgery Package option to transmit operative notes (i.e., "@@@") will also
"^DD",8925.99,8925.99,.1,21,6,0)
per site.
"^DD",8925.99,8925.99,.1,"DT")
2930211
"^DD",8925.99,8925.99,.11,0)
END OF MESSAGE SIGNAL^F^^0;11^K:$L(X)>10!($L(X)<3) X
"^DD",8925.99,8925.99,.11,3)
Enter 3-10 characters to signal end of upload message.
"^DD",8925.99,8925.99,.11,21,0)
^^3^3^2930721^^
"^DD",8925.99,8925.99,.11,21,1,0)
This is the free text signal to the upload process that the entire
"^DD",8925.99,8925.99,.11,21,2,0)
transmission is successfully finished, and no more lines of data need to
"^DD",8925.99,8925.99,.11,21,3,0)
be read from the input stream.
"^DD",8925.99,8925.99,.11,"DT")
2921019
"^DD",8925.99,8925.99,.12,0)
BEGIN REPORT TEXT SIGNAL^F^^0;12^K:$L(X)>10!($L(X)<1) X
"^DD",8925.99,8925.99,.12,3)
Enter 1-10 characters to delimit report text from record header.
"^DD",8925.99,8925.99,.12,21,0)
^^3^3^2921020^^
"^DD",8925.99,8925.99,.12,21,1,0)
This is the signal to the upload processor that the fixed-field header for
"^DD",8925.99,8925.99,.12,21,2,0)
a given report record has been fully read, and that the body of the
"^DD",8925.99,8925.99,.12,21,3,0)
narrative report follows.
"^DD",8925.99,8925.99,.12,"DT")
2921019
"^DD",8925.99,8925.99,.13,0)
MAJOR DELIMITER^F^^0;13^K:$L(X)>1!($L(X)<1)!'(X?1P) X
"^DD",8925.99,8925.99,.13,3)
Enter the major delimiter of the message header.
"^DD",8925.99,8925.99,.13,21,0)
^^4^4^2921019^
"^DD",8925.99,8925.99,.13,21,1,0)
This is the ASCII character which separates the fixed-field information in
"^DD",8925.99,8925.99,.13,21,2,0)
the message header.  We recommend that you avoid the use of delimiters
"^DD",8925.99,8925.99,.13,21,3,0)
which may be contained within the data itself (e.g., "," or ":") in favor
"^DD",8925.99,8925.99,.13,21,4,0)
of such symbols as "|", "\" or "~".
"^DD",8925.99,8925.99,.13,"DT")
2921020
"^DD",8925.99,8925.99,.15,0)
PACE CHARACTER^FX^^0;15^K:$L(X)>3!($L(X)<1) X S:X'?1.3N X=$A(X)
"^DD",8925.99,8925.99,.15,3)
Enter the character to be used to prompt the remote for another line of text.
"^DD",8925.99,8925.99,.15,21,0)
^^9^9^2921020^
"^DD",8925.99,8925.99,.15,21,1,0)
This is the ASCII value of the character which DHCP will send to the
"^DD",8925.99,8925.99,.15,21,2,0)
remote computer to acknowledge receipt of the last text line transmitted
"^DD",8925.99,8925.99,.15,21,3,0)
and to prompt the remote to transmit another line.  If you are using the
"^DD",8925.99,8925.99,.15,21,4,0)
same remote to upload both MailMan messages and textual reports, then we
"^DD",8925.99,8925.99,.15,21,6,0)
62.  Otherwise, you may choose any character with an ASCII value in the
"^DD",8925.99,8925.99,.15,21,7,0)
range 1-126, but we suggest you use the ACK character (ASCII 6).  NOTE:
"^DD",8925.99,8925.99,.15,21,8,0)
you may need to specify the same character as part of the ASCII PROTOCOL
"^DD",8925.99,8925.99,.15,21,9,0)
parameters of the terminal emulation software on the remote.
"^DD",8925.99,8925.99,.15,"DT")
2921020
"^DD",8925.99,8925.99,.16,0)
UPLOAD HEADER FORMAT^S^C:captioned;D:delimited string;^0;16^Q
"^DD",8925.99,8925.99,.16,3)
Enter the preferred format to be used for ASCII record headers.
"^DD",8925.99,8925.99,.16,21,0)
^^2^2^2930219^
"^DD",8925.99,8925.99,.16,21,1,0)
This field determines whether the ASCII protocol upload/router/filer will
"^DD",8925.99,8925.99,.16,21,2,0)
expect delimited string or captioned formats for the header of each report.
"^DD",8925.99,8925.99,.16,"DT")
2930408
"^DD",8925.99,8925.99,.17,0)
UPLOAD PROTOCOL^S^a:ASCII;k:KERMIT;^0;17^Q
"^DD",8925.99,8925.99,.17,3)
Select preferred upload protocol
"^DD",8925.99,8925.99,.17,21,0)
^^1^1^2930727^^
"^DD",8925.99,8925.99,.17,21,1,0)
This is the preferred upload protocol.
"^DD",8925.99,8925.99,.17,"DT")
2930227
"^DD",8925.99,8925.99,.18,0)
RUN UPLOAD FILER IN FOREGROUND^S^1:YES;0:NO;^0;18^Q
"^DD",8925.99,8925.99,.18,3)
Indicate whether the upload filer should run interactively.
"^DD",8925.99,8925.99,.18,21,0)
^^5^5^2960327^
"^DD",8925.99,8925.99,.18,21,1,0)
This parameter specifies whether the filer for the upload process should be
"^DD",8925.99,8925.99,.18,21,2,0)
run in the foreground, rather than in the background (i.e., as a Task).
"^DD",8925.99,8925.99,.18,21,3,0)

"^DD",8925.99,8925.99,.18,21,4,0)
If no preference is specified the default will be to run the filer as a
"^DD",8925.99,8925.99,.18,21,5,0)
BACKGROUND task.
"^DD",8925.99,8925.99,.18,"DT")
2960327
"^DD",8925.99,8925.99,.22,0)
ENABLE CHART COPY PROMPT^S^1:YES;0:NO;^0;22^Q
"^DD",8925.99,8925.99,.22,3)

"^DD",8925.99,8925.99,.22,21,0)
^^4^4^2931028^^^
"^DD",8925.99,8925.99,.22,21,1,0)
This parameter is used to enable Medical Record Technicians and MIS managers
"^DD",8925.99,8925.99,.22,21,2,0)
to be prompted whether prints of summaries are chart copies or not. If not
"^DD",8925.99,8925.99,.22,21,3,0)
enabled, when MR Techs and MIS Mgr print summaries, they will be chart 
"^DD",8925.99,8925.99,.22,21,4,0)
copies.
"^DD",8925.99,8925.99,.22,"DT")
2930811
"^DD",8925.99,8925.99,1.05,0)
AMENDMENT SIGNATURE BLOCK^F^^1;5^K:$L(X)>80!($L(X)<3) X
"^DD",8925.99,8925.99,1.05,3)
Enter the Privacy Act Officer's signature block.
"^DD",8925.99,8925.99,1.05,21,0)
^^16^16^2921026^
"^DD",8925.99,8925.99,1.05,21,1,0)
This parameter allows the site to specify the format in which the
"^DD",8925.99,8925.99,1.05,21,2,0)
signature block should appear on an amendment.  Only the holder of the
"^DD",8925.99,8925.99,1.05,21,3,0)
GMRD MANAGER security key may amend Discharge Summaries.  If this user
"^DD",8925.99,8925.99,1.05,21,4,0)
is not the site's Privacy Act officer, then it may be desirable to enter
"^DD",8925.99,8925.99,1.05,21,6,0)
user is signing on behalf of the Privacy Act Officer.  For example, if the
"^DD",8925.99,8925.99,1.05,21,7,0)
user's name is Ann Onymous, while the site's Privacy Act Officer is Jane
"^DD",8925.99,8925.99,1.05,21,8,0)
Doe, RRT, then the AMENDMENT SIGNATURE BLOCK might be entered as:
"^DD",8925.99,8925.99,1.05,21,9,0)
"for Jane Doe, RRT, PRIVACY ACT OFFICER".
"^DD",8925.99,8925.99,1.05,21,10,0)
 
"^DD",8925.99,8925.99,1.05,21,11,0)
The actual text which would appear on the VAF 10-1000 would then appear
"^DD",8925.99,8925.99,1.05,21,12,0)
as:
"^DD",8925.99,8925.99,1.05,21,13,0)
 
"^DD",8925.99,8925.99,1.05,21,14,0)
            AMENDED 10/26/92
"^DD",8925.99,8925.99,1.05,21,15,0)
            /es/ ANN ONYMOUS
"^DD",8925.99,8925.99,1.05,21,16,0)
            for Jane Doe, RRT, PRIVACY ACT OFFICER
"^DD",8925.99,8925.99,1.05,"DT")
2921026
"^DD",8925.99,8925.99,1.06,0)
BLANK CHARACTER STRING^F^^1;6^K:$L(X)>3!($L(X)<3) X
"^DD",8925.99,8925.99,1.06,3)
Answer must be 3 characters in length.
"^DD",8925.99,8925.99,1.06,21,0)
^^3^3^2930412^^^
"^DD",8925.99,8925.99,1.06,21,1,0)
This is a special string of characters which should be used by the
"^DD",8925.99,8925.99,1.06,21,2,0)
transcriptionist to represent a "blank."  i.e., a word or phrase in the
"^DD",8925.99,8925.99,1.06,21,3,0)
dictation which could not be understood and included in the transcription.
"^DD",8925.99,8925.99,1.06,"DT")
2930114
"^DD",8925.99,8925.99,1.07,0)
ENABLE NOTIFICATIONS DATE^D^^1;7^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",8925.99,8925.99,1.07,3)
Enter the date on which signature notifications were enabled.
"^DD",8925.99,8925.99,1.07,21,0)
8
"^DD",8925.99,8925.99,1.07,21,1,0)
When set to a valid date, notifications of Discharge Summaries which are
"^DD",8925.99,8925.99,1.07,21,2,0)
available or overdue for signature will be sent to the user whose
"^DD",8925.99,8925.99,1.07,21,3,0)
signature is missing (i.e., either author or attending physician).
"^DD",8925.99,8925.99,1.07,21,4,0)
 
"^DD",8925.99,8925.99,1.07,21,6,0)
sent (e.g., if a Discharge Summary was filed on 1/27/93, and notifications
"^DD",8925.99,8925.99,1.07,21,7,0)
were not enabled until 2/10/93, then notifications of deficiencies for
"^DD",8925.99,8925.99,1.07,21,8,0)
that Summary will NOT be sent).
"^DD",8925.99,8925.99,1.07,"DT")
2930203
"^DD",8925.99,8925.99,2,0)
UPLOAD ERROR ALERT RECIPIENT^8925.992P^^2;0
"^DD",8925.99,8925.99,2,21,0)
^^3^3^2930413^^^^
"^DD",8925.99,8925.99,2,21,1,0)
This parameter allows for multiple individuals to be picked for 
"^DD",8925.99,8925.99,2,21,2,0)
receipt of error messages which occur when transcription reports
"^DD",8925.99,8925.99,2,21,3,0)
are uploaded to DHCP.
"^DD",8925.99,8925.99,2,"DT")
2930413
"^DD",8925.99,8925.992,0)
UPLOAD ERROR ALERT RECIPIENT SUB-FIELD^^.01^1
"^DD",8925.99,8925.992,0,"IX","B",8925.992,.01)

"^DD",8925.99,8925.992,0,"NM","UPLOAD ERROR ALERT RECIPIENT")

"^DD",8925.99,8925.992,0,"UP")
8925.99
"^DD",8925.99,8925.992,.01,0)
ALERT RECIPIENT^MP200'^VA(200,^0;1^Q
"^DD",8925.99,8925.992,.01,1,0)
^.1
"^DD",8925.99,8925.992,.01,1,1,0)
8925.992^B
"^DD",8925.99,8925.992,.01,1,1,1)
S ^TIU(8925.99,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",8925.99,8925.992,.01,1,1,2)
K ^TIU(8925.99,DA(1),2,"B",$E(X,1,30),DA)
"^DD",8925.99,8925.992,.01,3)

"^DD",8925.99,8925.992,.01,21,0)
^^3^3^2930412^
"^DD",8925.99,8925.992,.01,21,1,0)
This parameter allows for individuals to be picked for the receipt
"^DD",8925.99,8925.992,.01,21,2,0)
of error messages which occur when transcription reports are
"^DD",8925.99,8925.992,.01,21,3,0)
uploaded to DHCP.
"^DD",8925.99,8925.992,.01,"DT")
2930412
"^DD",8926,8926,0)
FIELD^^.11^12
"^DD",8926,8926,0,"DT")
2970327
"^DD",8926,8926,0,"IX","AMENU",8926,.05)

"^DD",8926,8926,0,"IX","B",8926,.01)

"^DD",8926,8926,0,"NM","TIU PERSONAL PREFERENCES")

"^DD",8926,8926,0,"VRPK")
TIU RETURNS FROM WPB
"^DD",8926,8926,.01,0)
USER NAME^RP200'^VA(200,^0;1^Q
"^DD",8926,8926,.01,1,0)
^.1
"^DD",8926,8926,.01,1,1,0)
8926^B
"^DD",8926,8926,.01,1,1,1)
S ^TIU(8926,"B",$E(X,1,30),DA)=""
"^DD",8926,8926,.01,1,1,2)
K ^TIU(8926,"B",$E(X,1,30),DA)
"^DD",8926,8926,.01,3)
Select the user to whom the preferences apply
"^DD",8926,8926,.01,21,0)
^^1^1^2950915^
"^DD",8926,8926,.01,21,1,0)
This is the person whose preferences are represented by the record.
"^DD",8926,8926,.01,"DT")
2950915
"^DD",8926,8926,.02,0)
DEFAULT LOCATION^P44'^SC(^0;2^Q
"^DD",8926,8926,.02,"DT")
2950915
"^DD",8926,8926,.03,0)
REVIEW SCREEN SORT FIELD^S^P:patient;D:document type;R:reference date;S:status;C:completion date;A:author;E:expected cosigner;^0;3^Q
"^DD",8926,8926,.03,3)
Specify the attribute by which the document list should be sorted.
"^DD",8926,8926,.03,21,0)
^^3^3^2950915^
"^DD",8926,8926,.03,21,1,0)
This is the attribute by which the Multiple Document Review Screen List
"^DD",8926,8926,.03,21,2,0)
will be sorted for the current user.  In the absence of a specific entry,
"^DD",8926,8926,.03,21,3,0)
the list will be sorted by reference date.
"^DD",8926,8926,.03,"DT")
2950915
"^DD",8926,8926,.04,0)
REVIEW SCREEN SORT ORDER^S^A:ascending;D:descending;^0;4^Q
"^DD",8926,8926,.04,3)
Please specify the order in which you want the list sorted
"^DD",8926,8926,.04,21,0)
^^4^4^2950915^
"^DD",8926,8926,.04,21,1,0)
This is the order in which the Multiple Document Review Screen list should
"^DD",8926,8926,.04,21,2,0)
be sorted according to the specified sort field (i.e., Ascending or
"^DD",8926,8926,.04,21,3,0)
Descending).  The default will be ascending, with unsigned stat documents
"^DD",8926,8926,.04,21,4,0)
at the top of the list.
"^DD",8926,8926,.04,"DT")
2950915
"^DD",8926,8926,.05,0)
DISPLAY MENUS^S^0:NO;1:YES;^0;5^Q
"^DD",8926,8926,.05,1,0)
^.1
"^DD",8926,8926,.05,1,1,0)
8926^AMENU^MUMPS
"^DD",8926,8926,.05,1,1,1)
D MENUS^TIULX
"^DD",8926,8926,.05,1,1,2)
D:'$D(TIUSET) MENUS^TIULX K TIUSET
"^DD",8926,8926,.05,1,1,"%D",0)
^^2^2^2960201^
"^DD",8926,8926,.05,1,1,"%D",1,0)
This MUMPS-type cross-reference evaluates the user's preference concerning
"^DD",8926,8926,.05,1,1,"%D",2,0)
display or suppression of menus within TIU.
"^DD",8926,8926,.05,1,1,"DT")
2960201
"^DD",8926,8926,.05,3)
Indicate whether menus (for document selection, etc.) should be displayed.
"^DD",8926,8926,.05,21,0)
^^3^3^2950915^
"^DD",8926,8926,.05,21,1,0)
This field determines whether the menus for document type, search
"^DD",8926,8926,.05,21,2,0)
category, etc. should be automatically displayed (at least until you get
"^DD",8926,8926,.05,21,3,0)
to know them better).
"^DD",8926,8926,.05,"DT")
2960201
"^DD",8926,8926,.06,0)
PATIENT SELECTION PREFERENCE^S^S:single;M:multiple;^0;6^Q
"^DD",8926,8926,.06,3)
Please indicate your patient selection preference
"^DD",8926,8926,.06,21,0)
^^3^3^2950921^
"^DD",8926,8926,.06,21,1,0)
This determines whether the user will be prompted to select one
"^DD",8926,8926,.06,21,2,0)
patient at a time, or with the OE/RR patient look-up, which allows
"^DD",8926,8926,.06,21,3,0)
selection of a list of patients for iterative processing.
"^DD",8926,8926,.06,"DT")
2950921
"^DD",8926,8926,.07,0)
ASK 'Save changes?' AFTER EDIT^S^1:YES;0:NO;^0;7^Q
"^DD",8926,8926,.07,3)
Indicate whether you wish to be ased to Save Changes on exit from editor.
"^DD",8926,8926,.07,21,0)
^^4^4^2951130^
"^DD",8926,8926,.07,21,1,0)
This parameter enables or disables the prompt (Save changes? YES//) on exit 
"^DD",8926,8926,.07,21,2,0)
from your editor.  Enabling the prompt allows you to "abandon mistakes", and 
"^DD",8926,8926,.07,21,3,0)
helps some users avoid the accidental storage (or potential loss) of data 
"^DD",8926,8926,.07,21,4,0)
following editing of documents.
"^DD",8926,8926,.07,"DT")
2951130
"^DD",8926,8926,.08,0)
ASK SUBJECT FOR PROGRESS NOTES^S^1:YES;0:NO;^0;8^Q
"^DD",8926,8926,.08,3)
Indicate whether you'd like to be prompted for SUBJECT.
"^DD",8926,8926,.08,21,0)
^^3^3^2960302^
"^DD",8926,8926,.08,21,1,0)
Enter YES if you want to be prompted for a SUBJECT when entering or
"^DD",8926,8926,.08,21,2,0)
editing a Progress Note.  Subject is a freetext, indexed field which may
"^DD",8926,8926,.08,21,3,0)
help you to find notes about a given topic, etc.
"^DD",8926,8926,.08,"DT")
2960302
"^DD",8926,8926,.09,0)
DEFAULT COSIGNER^P200'^VA(200,^0;9^Q
"^DD",8926,8926,.09,3)
Indicate which person will usually cosign your Progress Notes.
"^DD",8926,8926,.09,21,0)
^^3^3^2970127^^
"^DD",8926,8926,.09,21,1,0)
This is the person whose name will appear as the default when you are 
"^DD",8926,8926,.09,21,2,0)
prompted to name an expected cosigner for the Progress Notes which you
"^DD",8926,8926,.09,21,3,0)
author.
"^DD",8926,8926,.09,"DT")
2970127
"^DD",8926,8926,.1,0)
NUMBER OF NOTES ON REV SCREEN^NJ3,0^^0;10^K:+X'=X!(X>100)!(X<15)!(X?.E1"."1N.N) X
"^DD",8926,8926,.1,3)
Type a Number between 15 and 100
"^DD",8926,8926,.1,21,0)
^^2^2^2970320^^^
"^DD",8926,8926,.1,21,1,0)
This determines the number of notes that will be included in your initial
"^DD",8926,8926,.1,21,2,0)
list when reviewing progress notes by patient.
"^DD",8926,8926,.1,"DT")
2970320
"^DD",8926,8926,.11,0)
SUPPRESS REVIEW NOTES PROMPT^S^1:YES;0:NO;^0;11^Q
"^DD",8926,8926,.11,3)
Indicate whether to prompt for review of existing notes on entry
"^DD",8926,8926,.11,21,0)
^^3^3^2970327^
"^DD",8926,8926,.11,21,1,0)
Allows user to specify whether to suppress the prompt to Review Existing
"^DD",8926,8926,.11,21,2,0)
Notes on entry of a Progress Note.  YES will SUPPRESS the prompt, while
"^DD",8926,8926,.11,21,3,0)
NO, or no entry will allow the site's default setting to take precedence.
"^DD",8926,8926,.11,"DT")
2970327
"^DD",8926,8926,1,0)
LOCATION BY DAY OF WEEK^8926.01S^^1;0
"^DD",8926,8926,1,21,0)
^^2^2^2970214^^^
"^DD",8926,8926,1,21,1,0)
This multiple provides a means of specifying the user's preferred location
"^DD",8926,8926,1,21,2,0)
by day of week.
"^DD",8926,8926.01,0)
LOCATION BY DAY OF WEEK SUB-FIELD^^.02^2
"^DD",8926,8926.01,0,"DT")
2970214
"^DD",8926,8926.01,0,"IX","B",8926.01,.01)

"^DD",8926,8926.01,0,"NM","LOCATION BY DAY OF WEEK")

"^DD",8926,8926.01,0,"UP")
8926
"^DD",8926,8926.01,.01,0)
DAY OF WEEK^MS^1:SUNDAY;2:MONDAY;3:TUESDAY;4:WEDNESDAY;5:THURSDAY;6:FRIDAY;7:SATURDAY;^0;1^Q
"^DD",8926,8926.01,.01,1,0)
^.1
"^DD",8926,8926.01,.01,1,1,0)
8926.01^B
"^DD",8926,8926.01,.01,1,1,1)
S ^TIU(8926,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",8926,8926.01,.01,1,1,2)
K ^TIU(8926,DA(1),1,"B",$E(X,1,30),DA)
"^DD",8926,8926.01,.01,3)
Please specify the day of week.
"^DD",8926,8926.01,.01,21,0)
^^2^2^2950915^
"^DD",8926,8926.01,.01,21,1,0)
This is the day of week on which the user expects to serve patients at a
"^DD",8926,8926.01,.01,21,2,0)
particular location.
"^DD",8926,8926.01,.01,"DT")
2970214
"^DD",8926,8926.01,.02,0)
HOSPITAL LOCATION^P44'^SC(^0;2^Q
"^DD",8926,8926.01,.02,3)
Please specify the HOSPITAL LOCATION
"^DD",8926,8926.01,.02,21,0)
^^2^2^2950915^
"^DD",8926,8926.01,.02,21,1,0)
This is the HOSPITAL LOCATION at which the user expects to see patient on
"^DD",8926,8926.01,.02,21,2,0)
the specified day of week.
"^DD",8926,8926.01,.02,"DT")
2950915
"^DIC",8925,8925,0)
TIU DOCUMENT^8925IP
"^DIC",8925,8925,0,"GL")
^TIU(8925,
"^DIC",8925,8925,"%",0)
^1.005^1^1
"^DIC",8925,8925,"%",1,0)
TIU
"^DIC",8925,8925,"%","B","TIU",1)

"^DIC",8925,8925,"%D",0)
^^8^8^2960605^^^^
"^DIC",8925,8925,"%D",1,0)
This file stores textual information for the clinical record database.
"^DIC",8925,8925,"%D",2,0)
Though it is designed to initially accommodate Progress Notes, Consult 
"^DIC",8925,8925,"%D",3,0)
Reports, and Discharge Summaries, it is intended to be sufficiently
"^DIC",8925,8925,"%D",4,0)
flexible to accommodate textual reports or provider narrative of any
"^DIC",8925,8925,"%D",5,0)
length or type, and to potentially accommodate such data transmitted 
"^DIC",8925,8925,"%D",6,0)
from remote sites, which may be excluded from the corresponding local 
"^DIC",8925,8925,"%D",7,0)
DHCP Package databases (e.g., Operative Reports, Radiology Reports, 
"^DIC",8925,8925,"%D",8,0)
Pathology Reports, etc.) to avoid confusion with local workload.
"^DIC",8925,"B","TIU DOCUMENT",8925)

"^DIC",8925.1,8925.1,0)
TIU DOCUMENT DEFINITION^8925.1
"^DIC",8925.1,8925.1,0,"GL")
^TIU(8925.1,
"^DIC",8925.1,8925.1,"%",0)
^1.005^2^1
"^DIC",8925.1,8925.1,"%",2,0)
GMTS
"^DIC",8925.1,8925.1,"%","B","GMTS",2)

"^DIC",8925.1,8925.1,"%D",0)
^^76^76^2970604^^^
"^DIC",8925.1,8925.1,"%D",1,0)
This file stores Document Definitions, which identify and define behavior
"^DIC",8925.1,8925.1,"%D",2,0)
for documents stored in the TIU DOCUMENTS FILE (#8925).  For consistency
"^DIC",8925.1,8925.1,"%D",3,0)
with the V-file schema, it may be viewed as the "Attribute Dictionary" for
"^DIC",8925.1,8925.1,"%D",4,0)
the Text Integration Utilities.
"^DIC",8925.1,8925.1,"%D",5,0)
 
"^DIC",8925.1,8925.1,"%D",6,0)
It also stores Objects, which can be embedded in a Document Definition's
"^DIC",8925.1,8925.1,"%D",7,0)
Boilerplate Text (Overprint). Objects contain M code which gets a piece of
"^DIC",8925.1,8925.1,"%D",8,0)
data and inserts it in the document's Boilerplate Text when a document is
"^DIC",8925.1,8925.1,"%D",9,0)
entered.
"^DIC",8925.1,8925.1,"%D",10,0)
 
"^DIC",8925.1,8925.1,"%D",11,0)
Warning: objects embedded in boilerplate text are looked up by multiple
"^DIC",8925.1,8925.1,"%D",12,0)
index (i.e. DIC(0) contains 'M'). Current code (see routine CHECK^TIUFLF3)
"^DIC",8925.1,8925.1,"%D",13,0)
checks all present indexes to make sure object names, abbreviations and
"^DIC",8925.1,8925.1,"%D",14,0)
print names are not ambiguous for this lookup. If new indexes are added,
"^DIC",8925.1,8925.1,"%D",15,0)
this code MUST BE UPDATED to check the new index as well.
"^DIC",8925.1,8925.1,"%D",16,0)
 
"^DIC",8925.1,8925.1,"%D",17,0)
Some entries in this file are developed Nationally and exported across the
"^DIC",8925.1,8925.1,"%D",18,0)
country.  Others are created by local sites.  Entries in the first
"^DIC",8925.1,8925.1,"%D",19,0)
category are marked National Standard and are not editable by sites.
"^DIC",8925.1,8925.1,"%D",20,0)
 
"^DIC",8925.1,8925.1,"%D",21,0)
This file does NOT allow multiple entries OF THE SAME TYPE with the same
"^DIC",8925.1,8925.1,"%D",22,0)
name.  That is, within a given Type, there are no duplicate names. (This
"^DIC",8925.1,8925.1,"%D",23,0)
refers to the .01 field, the Technical name of the entry.)
"^DIC",8925.1,8925.1,"%D",24,0)
 
"^DIC",8925.1,8925.1,"%D",25,0)
This file does not allow a parent to have items with the same name, even
"^DIC",8925.1,8925.1,"%D",26,0)
if the items have different internal file numbers (i.e. are different file
"^DIC",8925.1,8925.1,"%D",27,0)
entries).  Again, this refers to the .01 Technical name of the entry.
"^DIC",8925.1,8925.1,"%D",28,0)
 
"^DIC",8925.1,8925.1,"%D",29,0)
Because of ownership considerations, the file does NOT allow an entry to
"^DIC",8925.1,8925.1,"%D",30,0)
be an item under more than 1 parent.  If the same item is desired under
"^DIC",8925.1,8925.1,"%D",31,0)
more than 1 parent, the item must be copied into a new entry.  There is
"^DIC",8925.1,8925.1,"%D",32,0)
one exception:  Document Definitions of Type Component which have been
"^DIC",8925.1,8925.1,"%D",33,0)
marked Shared may have more than one parent.
"^DIC",8925.1,8925.1,"%D",34,0)
 
"^DIC",8925.1,8925.1,"%D",35,0)
The Document Definition Utility TIUF categorizes certain fields as Basic,
"^DIC",8925.1,8925.1,"%D",36,0)
Technical, or Upload, and displays these fields together as a group when
"^DIC",8925.1,8925.1,"%D",37,0)
user edits or views a Document Definition. BASIC fields include Name,
"^DIC",8925.1,8925.1,"%D",38,0)
Abbreviation, Print Name, Type, Personal Owner, Class Owner, Status, In
"^DIC",8925.1,8925.1,"%D",39,0)
Use, Shared, Orphan, Has Boiltxt, National Standard, OK to Distribute, and
"^DIC",8925.1,8925.1,"%D",40,0)
Suppress Visit Selection. TECHNICAL fields include Entry Action, Exit
"^DIC",8925.1,8925.1,"%D",41,0)
Action, Edit Template, Print Method, Print Form Header, Print Form Number,
"^DIC",8925.1,8925.1,"%D",42,0)
Print Group, Allow Custom Form Headers, Visit Linkage Method, Validation
"^DIC",8925.1,8925.1,"%D",43,0)
Method, and Object Method. UPLOAD fields include Upload Target File, Laygo
"^DIC",8925.1,8925.1,"%D",44,0)
Allowed, Target Text Field Subscript, Upload Look-up Method, Upload
"^DIC",8925.1,8925.1,"%D",45,0)
Post-Filing Code, Upload Filing Error Code, and multiples Upload Captioned
"^DIC",8925.1,8925.1,"%D",46,0)
ASCII Header and Upload Delimited ASCII Header.
"^DIC",8925.1,8925.1,"%D",47,0)
 
"^DIC",8925.1,8925.1,"%D",48,0)
The Document Definition file contains extensive, detailed field
"^DIC",8925.1,8925.1,"%D",49,0)
descriptions. Likewise, some protocols (File 101) used in TIU have
"^DIC",8925.1,8925.1,"%D",50,0)
extensive and careful descriptions in the Protocol file. Many of these
"^DIC",8925.1,8925.1,"%D",51,0)
descriptions are used in TIU for online help. If it becomes necessary for
"^DIC",8925.1,8925.1,"%D",52,0)
a national programmer to edit these descriptions, the programmer should
"^DIC",8925.1,8925.1,"%D",53,0)
check to make sure all online help is still displayed properly.
"^DIC",8925.1,8925.1,"%D",54,0)
 
"^DIC",8925.1,8925.1,"%D",55,0)
Users are expected to use the Document Definition Utility TIUF to enter,
"^DIC",8925.1,8925.1,"%D",56,0)
edit, and delete file entries.  In fact, the file prohibits the deletion
"^DIC",8925.1,8925.1,"%D",57,0)
of entries through generic Fileman Options.  It also prohibits the edit
"^DIC",8925.1,8925.1,"%D",58,0)
through generic Fileman of a few critical fields: Type, Status, Shared,
"^DIC",8925.1,8925.1,"%D",59,0)
and National Standard.  Adding and Deleting (but not editing) Items is
"^DIC",8925.1,8925.1,"%D",60,0)
also prohibited through generic Fileman options.  Abbreviation and Print
"^DIC",8925.1,8925.1,"%D",61,0)
Name of OBJECTS cannot be edited through generic Fileman Options.
"^DIC",8925.1,8925.1,"%D",62,0)
 
"^DIC",8925.1,8925.1,"%D",63,0)
This does NOT imply that it is SAFE to use generic Fileman to edit other
"^DIC",8925.1,8925.1,"%D",64,0)
fields.  Users are cautioned that edit through generic Fileman bypasses
"^DIC",8925.1,8925.1,"%D",65,0)
many safeguards built in to the Document Definition Utility and can create
"^DIC",8925.1,8925.1,"%D",66,0)
havoc unless the user THOROUGHLY UNDERSTANDS the File and its uses.
"^DIC",8925.1,8925.1,"%D",67,0)
 
"^DIC",8925.1,8925.1,"%D",68,0)
If users find needs which are not met through TIUF, please communicate
"^DIC",8925.1,8925.1,"%D",69,0)
them to the TIU development team.
"^DIC",8925.1,8925.1,"%D",70,0)
                           
"^DIC",8925.1,8925.1,"%D",71,0)
                               *****************
"^DIC",8925.1,8925.1,"%D",72,0)
 
"^DIC",8925.1,8925.1,"%D",73,0)
WARNING: Using generic Fileman options to edit entries can cause SERIOUS
"^DIC",8925.1,8925.1,"%D",74,0)
database problems.
"^DIC",8925.1,8925.1,"%D",75,0)
 
"^DIC",8925.1,8925.1,"%D",76,0)
                               ****************
"^DIC",8925.1,"B","TIU DOCUMENT DEFINITION",8925.1)

"^DIC",8925.2,8925.2,0)
TIU UPLOAD BUFFER^8925.2
"^DIC",8925.2,8925.2,0,"GL")
^TIU(8925.2,
"^DIC",8925.2,8925.2,"%D",0)
^^7^7^2941101^^^^
"^DIC",8925.2,8925.2,"%D",1,0)
This file buffers uploaded ASCII reports during the upload process, until
"^DIC",8925.2,8925.2,"%D",2,0)
they can be successfully routed to their respective destinations within
"^DIC",8925.2,8925.2,"%D",3,0)
DHCP.  It will support the development of tools for responding to error
"^DIC",8925.2,8925.2,"%D",4,0)
messages (e.g., the correction of errors experienced during
"^DIC",8925.2,8925.2,"%D",5,0)
routing/filing) by the appropriate users, so as to avoid the necessity of
"^DIC",8925.2,8925.2,"%D",6,0)
making all edits on the client system and re-initiating the upload in
"^DIC",8925.2,8925.2,"%D",7,0)
response to an error condition.
"^DIC",8925.2,"B","TIU UPLOAD BUFFER",8925.2)

"^DIC",8925.3,8925.3,0)
TIU UPLOAD ERROR DEFINITION^8925.3
"^DIC",8925.3,8925.3,0,"GL")
^TIU(8925.3,
"^DIC",8925.3,8925.3,"%D",0)
^^3^3^2941101^^^^
"^DIC",8925.3,8925.3,"%D",1,0)
This file defines allowable error codes, and their corresponding names
"^DIC",8925.3,8925.3,"%D",2,0)
and textual messages for the error handler module of the ASCII upload
"^DIC",8925.3,8925.3,"%D",3,0)
process.
"^DIC",8925.3,"B","TIU UPLOAD ERROR DEFINITION",8925.3)

"^DIC",8925.4,8925.4,0)
TIU UPLOAD LOG^8925.4D
"^DIC",8925.4,8925.4,0,"GL")
^TIU(8925.4,
"^DIC",8925.4,8925.4,"%D",0)
^^3^3^2951012^^^
"^DIC",8925.4,8925.4,"%D",1,0)
This file is used by the filer module of the upload process to log
"^DIC",8925.4,8925.4,"%D",2,0)
both successfully filed records and non-fatal errors which may occur
"^DIC",8925.4,8925.4,"%D",3,0)
during routing/filing of one or more records in a given batch.
"^DIC",8925.4,"B","TIU UPLOAD LOG",8925.4)

"^DIC",8925.5,8925.5,0)
TIU AUDIT TRAIL^8925.5P
"^DIC",8925.5,8925.5,0,"GL")
^TIU(8925.5,
"^DIC",8925.5,"B","TIU AUDIT TRAIL",8925.5)

"^DIC",8925.6,8925.6,0)
TIU STATUS^8925.6
"^DIC",8925.6,8925.6,0,"GL")
^TIU(8925.6,
"^DIC",8925.6,8925.6,"%D",0)
^^2^2^2941101^
"^DIC",8925.6,8925.6,"%D",1,0)
This file contains the allowable statuses which may be applied to a TIU 
"^DIC",8925.6,8925.6,"%D",2,0)
document during it's path through the system.
"^DIC",8925.6,"B","TIU STATUS",8925.6)

"^DIC",8925.7,8925.7,0)
TIU MULTIPLE SIGNATURE^8925.7P
"^DIC",8925.7,8925.7,0,"GL")
^TIU(8925.7,
"^DIC",8925.7,8925.7,"%D",0)
^^5^5^2970316^^^
"^DIC",8925.7,8925.7,"%D",1,0)
This file is intended to accommodate the case where multiple cosignatures 
"^DIC",8925.7,8925.7,"%D",2,0)
are applied to a document (e.g., team or multi-disciplinary notes, discharge 
"^DIC",8925.7,8925.7,"%D",3,0)
planning check-lists, etc.).  Rather than adding a multiple to the TIU 
"^DIC",8925.7,8925.7,"%D",4,0)
Document file, this file supports a 3NF decomposition, allowing multiple 
"^DIC",8925.7,8925.7,"%D",5,0)
cosignatures to be applied to the same document.
"^DIC",8925.7,"B","TIU MULTIPLE SIGNATURE",8925.7)

"^DIC",8925.8,8925.8,0)
TIU SEARCH CATEGORIES^8925.8
"^DIC",8925.8,8925.8,0,"GL")
^TIU(8925.8,
"^DIC",8925.8,8925.8,"%D",0)
^^2^2^2950630^
"^DIC",8925.8,8925.8,"%D",1,0)
This file stores parameters which modify the processing requirements of
"^DIC",8925.8,8925.8,"%D",2,0)
individual document types, and their decendents.
"^DIC",8925.8,"B","TIU SEARCH CATEGORIES",8925.8)

"^DIC",8925.9,8925.9,0)
TIU PROBLEM LINK^8925.9
"^DIC",8925.9,8925.9,0,"GL")
^TIU(8925.9,
"^DIC",8925.9,8925.9,"%D",0)
^^2^2^2970613^
"^DIC",8925.9,8925.9,"%D",1,0)
This file allows a many-to-many relationship between TIU Documents and
"^DIC",8925.9,8925.9,"%D",2,0)
Problems to be maintained.
"^DIC",8925.9,"B","TIU PROBLEM LINK",8925.9)

"^DIC",8925.91,8925.91,0)
TIU EXTERNAL DATA LINK^8925.91
"^DIC",8925.91,8925.91,0,"GL")
^TIU(8925.91,
"^DIC",8925.91,8925.91,"%D",0)
^^3^3^2960426^
"^DIC",8925.91,8925.91,"%D",1,0)
This file is intended to allow the definition of many-to-one linkages
"^DIC",8925.91,8925.91,"%D",2,0)
between TIU Documents and external data objects (i.e., non-MUMPS data)
"^DIC",8925.91,8925.91,"%D",3,0)
such as Images or BLOBs.
"^DIC",8925.91,"B","TIU EXTERNAL DATA LINK",8925.91)

"^DIC",8925.93,8925.93,0)
TIU PRINT PARAMETERS^8925.93
"^DIC",8925.93,8925.93,0,"GL")
^TIU(8925.93,
"^DIC",8925.93,8925.93,"%D",0)
^^2^2^2970613^
"^DIC",8925.93,8925.93,"%D",1,0)
This file describes the parameters for controlling the Printing of
"^DIC",8925.93,8925.93,"%D",2,0)
Progress Notes.
"^DIC",8925.93,"B","TIU PRINT PARAMETERS",8925.93)

"^DIC",8925.94,8925.94,0)
TIU DIVISION PRINT PARAMETERS^8925.94
"^DIC",8925.94,8925.94,0,"GL")
^TIU(8925.94,
"^DIC",8925.94,8925.94,"%D",0)
^^2^2^2970613^
"^DIC",8925.94,8925.94,"%D",1,0)
This file descibes the parameters for the batch printing of progress notes
"^DIC",8925.94,8925.94,"%D",2,0)
for filing by Medical Center Division.
"^DIC",8925.94,"B","TIU DIVISION PRINT PARAMETERS",8925.94)

"^DIC",8925.95,8925.95,0)
TIU DOCUMENT PARAMETERS^8925.95
"^DIC",8925.95,8925.95,0,"GL")
^TIU(8925.95,
"^DIC",8925.95,8925.95,"%D",0)
^^2^2^2950630^
"^DIC",8925.95,8925.95,"%D",1,0)
This file stores parameters which modify the processing requirements of
"^DIC",8925.95,8925.95,"%D",2,0)
individual document types, and their decendents.
"^DIC",8925.95,"B","TIU DOCUMENT PARAMETERS",8925.95)

"^DIC",8925.97,8925.97,0)
TIU CONVERSIONS^8925.97
"^DIC",8925.97,8925.97,0,"GL")
^TIU(8925.97,
"^DIC",8925.97,8925.97,"%",0)
^1.005^^0
"^DIC",8925.97,8925.97,"%D",0)
^^3^3^2970123^^
"^DIC",8925.97,8925.97,"%D",1,0)
This file contains information concerning the conversion of legacy 
"^DIC",8925.97,8925.97,"%D",2,0)
files such as ^GMR(121, Generic Progress Note File, to ^TIU(8925,
"^DIC",8925.97,8925.97,"%D",3,0)
TIU Document File.  
"^DIC",8925.97,"B","TIU CONVERSIONS",8925.97)

"^DIC",8925.98,8925.98,0)
TIU PERSONAL DOCUMENT TYPE LIST^8925.98
"^DIC",8925.98,8925.98,0,"GL")
^TIU(8925.98,
"^DIC",8925.98,8925.98,"%D",0)
^^2^2^2950915^
"^DIC",8925.98,8925.98,"%D",1,0)
This file is used to store "pick-lists" of documents (by class), for
"^DIC",8925.98,8925.98,"%D",2,0)
selection by the user.
"^DIC",8925.98,"B","TIU PERSONAL DOCUMENT TYPE LIST",8925.98)

"^DIC",8925.99,8925.99,0)
TIU PARAMETERS^8925.99P
"^DIC",8925.99,8925.99,0,"GL")
^TIU(8925.99,
"^DIC",8925.99,8925.99,"%D",0)
^^3^3^2941101^^^^
"^DIC",8925.99,8925.99,"%D",1,0)
This file contains the site-configurable parameters for the Text Integration
"^DIC",8925.99,8925.99,"%D",2,0)
Utilities package.  It will have one entry for each division, to support
"^DIC",8925.99,8925.99,"%D",3,0)
variable definition of package behavior at multi-divisional facilities.
"^DIC",8925.99,"B","TIU PARAMETERS",8925.99)

"^DIC",8926,8926,0)
TIU PERSONAL PREFERENCES^8926
"^DIC",8926,8926,0,"GL")
^TIU(8926,
"^DIC",8926,8926,"%D",0)
^^4^4^2970613^
"^DIC",8926,8926,"%D",1,0)
This file allows the definition of Personal Preferences with respect to a
"^DIC",8926,8926,"%D",2,0)
variety of TIU's functions (e.g., Review Screen sort field and order,
"^DIC",8926,8926,"%D",3,0)
Default cosigner, default locations, location by day-of-week, suppression
"^DIC",8926,8926,"%D",4,0)
of review notes prompt on Progres note entry, etc.).
"^DIC",8926,"B","TIU PERSONAL PREFERENCES",8926)

**END**
**END**

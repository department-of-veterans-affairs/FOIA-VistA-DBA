Released SD*5.3*425 SEQ #344
Extracted from mail message
**KIDS**:SD*5.3*425^

**INSTALL NAME**
SD*5.3*425
"BLD",6158,0)
SD*5.3*425^SCHEDULING^0^3050505^y
"BLD",6158,1,0)
^^6^6^3050505^^
"BLD",6158,1,1,0)
 
"BLD",6158,1,2,0)
Errors in SDWLQOF/SDWLQOI/SDWLQSR/SDWLROI/SDWLRPS2/SDWLRQ1/SDWLRQ2/SDWLRSR
"BLD",6158,1,3,0)
  1. Print directly to printer
"BLD",6158,1,4,0)
  2. No default for $SELECT
"BLD",6158,1,5,0)
  3. EOF error for DIR read in tasked job
"BLD",6158,1,6,0)
  4. Unsupported entry point call in ZTLOAD instead of %ZTLOAD
"BLD",6158,4,0)
^9.64PA^^
"BLD",6158,"ABPKG")
n
"BLD",6158,"KRN",0)
^9.67PA^8989.52^19
"BLD",6158,"KRN",.4,0)
.4
"BLD",6158,"KRN",.401,0)
.401
"BLD",6158,"KRN",.402,0)
.402
"BLD",6158,"KRN",.403,0)
.403
"BLD",6158,"KRN",.5,0)
.5
"BLD",6158,"KRN",.84,0)
.84
"BLD",6158,"KRN",3.6,0)
3.6
"BLD",6158,"KRN",3.8,0)
3.8
"BLD",6158,"KRN",9.2,0)
9.2
"BLD",6158,"KRN",9.8,0)
9.8
"BLD",6158,"KRN",9.8,"NM",0)
^9.68A^8^6
"BLD",6158,"KRN",9.8,"NM",1,0)
SDWLQOF^^0^B25964457
"BLD",6158,"KRN",9.8,"NM",2,0)
SDWLQOI^^0^B7559730
"BLD",6158,"KRN",9.8,"NM",3,0)
SDWLQSR^^0^B7319783
"BLD",6158,"KRN",9.8,"NM",6,0)
SDWLRQ1^^0^B39183658
"BLD",6158,"KRN",9.8,"NM",7,0)
SDWLRQ2^^0^B34443810
"BLD",6158,"KRN",9.8,"NM",8,0)
SDWLRSR^^0^B84487758
"BLD",6158,"KRN",9.8,"NM","B","SDWLQOF",1)

"BLD",6158,"KRN",9.8,"NM","B","SDWLQOI",2)

"BLD",6158,"KRN",9.8,"NM","B","SDWLQSR",3)

"BLD",6158,"KRN",9.8,"NM","B","SDWLRQ1",6)

"BLD",6158,"KRN",9.8,"NM","B","SDWLRQ2",7)

"BLD",6158,"KRN",9.8,"NM","B","SDWLRSR",8)

"BLD",6158,"KRN",19,0)
19
"BLD",6158,"KRN",19,"NM",0)
^9.68A^^
"BLD",6158,"KRN",19.1,0)
19.1
"BLD",6158,"KRN",101,0)
101
"BLD",6158,"KRN",409.61,0)
409.61
"BLD",6158,"KRN",771,0)
771
"BLD",6158,"KRN",870,0)
870
"BLD",6158,"KRN",8989.51,0)
8989.51
"BLD",6158,"KRN",8989.52,0)
8989.52
"BLD",6158,"KRN",8994,0)
8994
"BLD",6158,"KRN","B",.4,.4)

"BLD",6158,"KRN","B",.401,.401)

"BLD",6158,"KRN","B",.402,.402)

"BLD",6158,"KRN","B",.403,.403)

"BLD",6158,"KRN","B",.5,.5)

"BLD",6158,"KRN","B",.84,.84)

"BLD",6158,"KRN","B",3.6,3.6)

"BLD",6158,"KRN","B",3.8,3.8)

"BLD",6158,"KRN","B",9.2,9.2)

"BLD",6158,"KRN","B",9.8,9.8)

"BLD",6158,"KRN","B",19,19)

"BLD",6158,"KRN","B",19.1,19.1)

"BLD",6158,"KRN","B",101,101)

"BLD",6158,"KRN","B",409.61,409.61)

"BLD",6158,"KRN","B",771,771)

"BLD",6158,"KRN","B",870,870)

"BLD",6158,"KRN","B",8989.51,8989.51)

"BLD",6158,"KRN","B",8989.52,8989.52)

"BLD",6158,"KRN","B",8994,8994)

"BLD",6158,"QUES",0)
^9.62^^
"BLD",6158,"REQB",0)
^9.611^2^2
"BLD",6158,"REQB",1,0)
SD*5.3*414^2
"BLD",6158,"REQB",2,0)
SD*5.3*412^2
"BLD",6158,"REQB","B","SD*5.3*412",2)

"BLD",6158,"REQB","B","SD*5.3*414",1)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
425^3050505
"PKG",16,22,1,"PAH",1,1,0)
^^6^6^3050505
"PKG",16,22,1,"PAH",1,1,1,0)
 
"PKG",16,22,1,"PAH",1,1,2,0)
Errors in SDWLQOF/SDWLQOI/SDWLQSR/SDWLROI/SDWLRPS2/SDWLRQ1/SDWLRQ2/SDWLRSR
"PKG",16,22,1,"PAH",1,1,3,0)
  1. Print directly to printer
"PKG",16,22,1,"PAH",1,1,4,0)
  2. No default for $SELECT
"PKG",16,22,1,"PAH",1,1,5,0)
  3. EOF error for DIR read in tasked job
"PKG",16,22,1,"PAH",1,1,6,0)
  4. Unsupported entry point call in ZTLOAD instead of %ZTLOAD
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
6
"RTN","SDWLQOF")
0^1^B25964457
"RTN","SDWLQOF",1,0)
SDWLQOF ;;IOFO BAY PINES/TEH - OVERDUE APPOINTMENT
"RTN","SDWLQOF",2,0)
 ;;5.3;scheduling;**263,414,425**;AUG 13 1993
"RTN","SDWLQOF",3,0)
 ;
"RTN","SDWLQOF",4,0)
 ;
"RTN","SDWLQOF",5,0)
 ;******************************************************************
"RTN","SDWLQOF",6,0)
 ;                             CHANGE LOG
"RTN","SDWLQOF",7,0)
 ;                                               
"RTN","SDWLQOF",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLQOF",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLQOF",10,0)
 ;
"RTN","SDWLQOF",11,0)
EN ;Header
"RTN","SDWLQOF",12,0)
 N ZCODE,ZTDESC,ZTDTH,ZTIO,ZTQUEDED,ZTREQ,ZTRTN,ZTSAVE,ZTSK,SDWLSPT
"RTN","SDWLQOF",13,0)
 D HD
"RTN","SDWLQOF",14,0)
 S SDWLINST="",SDWLERR=0 K ^TMP("SDWLQOF",$J),DIC,DIR,DR,DIE
"RTN","SDWLQOF",15,0)
1 D INS G END:$D(DUOUT)
"RTN","SDWLQOF",16,0)
2 D CAT G 1:SDWLERR,END:$D(DUOUT)
"RTN","SDWLQOF",17,0)
3 D FORM G 2:SDWLERR,END:$D(DUOUT)
"RTN","SDWLQOF",18,0)
4 D DIS G EN:SDWLERR=1,END:SDWLERR=2
"RTN","SDWLQOF",19,0)
 D QUE
"RTN","SDWLQOF",20,0)
 Q
"RTN","SDWLQOF",21,0)
INS ;Get Institution
"RTN","SDWLQOF",22,0)
 S SDWLERR=0,SDWLPROM="Select Institution ALL // "
"RTN","SDWLQOF",23,0)
IN W ! S DIC(0)="QEMA",DIC("A")=SDWLPROM,DIC=4,DIC("S")="I $D(^SDWL(409.32,""C"",+Y))!($D(^SDWL(409.31,""E"",+Y)))" D ^DIC I Y<0,'SDWLERR Q:$D(DUOUT)  S Y="ALL"
"RTN","SDWLQOF",24,0)
 G IN2:Y<0 Q:$D(DUOUT)
"RTN","SDWLQOF",25,0)
 I Y<0 S SDWLINST=$S(Y="ALL":"ALL",Y="":"ALL",Y="all":"ALL",Y="All":"ALL",Y["A":"ALL",Y["a":"ALL")
"RTN","SDWLQOF",26,0)
 I Y="All"!(Y="")!(Y="all")!(Y="ALL") S SDWLINST="ALL",^TMP("SDWLQOF",$J,"INS")="ALL" G IN3
"RTN","SDWLQOF",27,0)
 S SDWLPROM="Another Institution: ",SDWLERR=1
"RTN","SDWLQOF",28,0)
 G IN:$D(SDWLIN(+Y)) S SDWLIN(+Y)=""
"RTN","SDWLQOF",29,0)
 S SDWLINST=SDWLINST_Y_";",SDWLPROM="Another Institution: ",SDWLERR=1 G IN
"RTN","SDWLQOF",30,0)
IN2 S ^TMP("SDWLQOF",$J,"INS")=SDWLINST
"RTN","SDWLQOF",31,0)
IN3 Q
"RTN","SDWLQOF",32,0)
CAT ;Report category selection
"RTN","SDWLQOF",33,0)
 K DIR,DIE,DR,DIC
"RTN","SDWLQOF",34,0)
 W !!,"    *** Report Category Selection ***" S SDWLERR=0
"RTN","SDWLQOF",35,0)
 S SDWLERR=0,SDWLCAT="",DIR(0)="SO^1:Clinic;2:Select Service/Specialty",DIR("L",1)="     1. Clinic",DIR("L")="     2. Service/Specialty"
"RTN","SDWLQOF",36,0)
 D ^DIR
"RTN","SDWLQOF",37,0)
 I X="^" S SDWLERR=1 W *7 Q
"RTN","SDWLQOF",38,0)
 I X="" S SDWLERR=1 W *7 Q
"RTN","SDWLQOF",39,0)
 S X=$S(X["C":"C",X["c":"C",X["S":"S",X["s":"S",X=1:"C",X=2:"S",1:"")
"RTN","SDWLQOF",40,0)
 I X="" W *7," Invalid Selection." G CAT
"RTN","SDWLQOF",41,0)
 W !!,"Select Category for Report Output",!
"RTN","SDWLQOF",42,0)
 S SDWLX=$S(X="C":"Clinic: ALL/ ",X="S":"Service/Specialty: ALL/ ")
"RTN","SDWLQOF",43,0)
 S SDWLF=$S(X["C":409.32,X["S":409.31,X["c":409.32,X["s":409.31)
"RTN","SDWLQOF",44,0)
 S SDWLFD=$S(X="C":8,1:7)
"RTN","SDWLQOF",45,0)
 S SDWLCTX=X
"RTN","SDWLQOF",46,0)
 K DIR,DIC,DR
"RTN","SDWLQOF",47,0)
 S ^TMP("SDWLQOF",$J,"CT1")=SDWLCTX_"^"_SDWLF_"^"_SDWLFD,DIC("A")=SDWLX,SDWLE=0
"RTN","SDWLQOF",48,0)
CT1 W ! S DIC(0)="QEMNZA",DIC=SDWLF D ^DIC I 'SDWLE,Y<1 S ^TMP("SDWLQOF",$J,"CT2")="ALL" G CT3
"RTN","SDWLQOF",49,0)
 I Y<0,'$D(^TMP("SDWLQOF",$J,"CT1")) W !,"This Entry is Required." G CAT
"RTN","SDWLQOF",50,0)
 G CT2:Y<0
"RTN","SDWLQOF",51,0)
 S SDWLCAT=SDWLCAT_Y_";",DIC("A")="Another "_$P(SDWLX,":",1)_": ",SDWLE=1 G CT1
"RTN","SDWLQOF",52,0)
CT2 G CT1:'$D(SDWLCAT) S ^TMP("SDWLQOF",$J,"CT2")=SDWLCAT
"RTN","SDWLQOF",53,0)
CT3 Q
"RTN","SDWLQOF",54,0)
FORM ;Report Format
"RTN","SDWLQOF",55,0)
 S SDWLERR=0,DIR(0)="SO^1:D:Detailed;S:Summary",DIR("L",2)="     D Detailed"
"RTN","SDWLQOF",56,0)
 S DIR("L")="     S Summary",DIR("L",1)="Select One of the Following: "
"RTN","SDWLQOF",57,0)
 D ^DIR
"RTN","SDWLQOF",58,0)
 I X="^" S DUOUT=1 Q
"RTN","SDWLQOF",59,0)
 S SDWLFORM=$S(X["D":"D",X["d":"D",X["S":"S",X["s":"S",1:"")
"RTN","SDWLQOF",60,0)
 I X="" W !,"Required!" G FORM
"RTN","SDWLQOF",61,0)
 S ^TMP("SDWLQOF",$J,"FORM")=SDWLFORM
"RTN","SDWLQOF",62,0)
 Q
"RTN","SDWLQOF",63,0)
DIS ;Display Parameters
"RTN","SDWLQOF",64,0)
 S SDWLERR=0 W !!,?80-$L("*** Selected Report Parameters ***")\2,"*** Selected Report Parameters ***",!
"RTN","SDWLQOF",65,0)
 F SDWLI="INS","CT1","CT2","FORM" D
"RTN","SDWLQOF",66,0)
 .S X="SDWL"_SDWLI,@X=$G(^TMP("SDWLQOF",$J,SDWLI))
"RTN","SDWLQOF",67,0)
 F SDWLTAG="IS","CT","OP" D @SDWLTAG
"RTN","SDWLQOF",68,0)
 Q
"RTN","SDWLQOF",69,0)
IS I SDWLINS'["ALL" D
"RTN","SDWLQOF",70,0)
 .K SDWLY F I=1:1 S SDWLY=$P($P(SDWLINS,";",I),U,2) Q:SDWLY=""  S SDWLY(I)=SDWLY
"RTN","SDWLQOF",71,0)
 .W !,?20,"Institution: "
"RTN","SDWLQOF",72,0)
 .I $D(SDWLY) S I="" F  S I=$O(SDWLY(I)) Q:I=""  W:I>1 !,?33 W SDWLY(I)
"RTN","SDWLQOF",73,0)
 .K SDWLY
"RTN","SDWLQOF",74,0)
 I SDWLINS["ALL" W !,?20,"Institution: ALL "
"RTN","SDWLQOF",75,0)
 Q
"RTN","SDWLQOF",76,0)
CT I SDWLCT2'["ALL" D
"RTN","SDWLQOF",77,0)
 .S SDWLF=$P(SDWLCT1,U,2)
"RTN","SDWLQOF",78,0)
 .K SDWLY F I=1:1 S SDWLY=$P($P(SDWLCT2,";",I),U,2) Q:SDWLY=""  S SDWLY(I)=SDWLY
"RTN","SDWLQOF",79,0)
 .W !,?16,"Report Category: " W $S(SDWLCT1["C":"Clinic",1:"Service Specialty"),!,?36 I @X="ALL" W "All "
"RTN","SDWLQOF",80,0)
 .I $D(SDWLY) S I="" F   S I=$O(SDWLY(I)) Q:I=""  W:I>1 !,?35 W $$EXTERNAL^DILFD(SDWLF,.01,,SDWLY(I))
"RTN","SDWLQOF",81,0)
 I SDWLCT2["ALL" W !,?16,"Report Category: " W $S(SDWLCT1["C":"Clinic",1:"Service Specialty"),!,?36 W "ALL "
"RTN","SDWLQOF",82,0)
 Q
"RTN","SDWLQOF",83,0)
OP W !,?18,"Output Format: ",$S(SDWLFORM="D":" Detailed",1:" Summary")
"RTN","SDWLQOF",84,0)
 Q
"RTN","SDWLQOF",85,0)
 S %=1 W !!,"Are these Parameters Correct " D YN^DICN I %=2 S SDWLERR=1 W !,"  This Report will NOT be queued to print."
"RTN","SDWLQOF",86,0)
 I SDWLERR S DIR(0)="E" D ^DIR I X["^" S SDWLERR=2
"RTN","SDWLQOF",87,0)
 Q
"RTN","SDWLQOF",88,0)
QUE ;Queue Report
"RTN","SDWLQOF",89,0)
 N ZTQUEUED,POP
"RTN","SDWLQOF",90,0)
 K %ZIS,IOP,IOC,ZTIO S %ZIS="MQ" D ^%ZIS G:POP QUE1
"RTN","SDWLQOF",91,0)
 S ZTRTN=$S(SDWLFORM="D":"EN^SDWLROF",1:"EN^SDWLROS"),ZTDTH=$H,ZTDESC="WAIT LIST OVERDUE REPORT"
"RTN","SDWLQOF",92,0)
 S SDWLTASK="" F  S SDWLTASK=$O(^TMP("SDWLQOF",$J,SDWLTASK)) Q:SDWLTASK=""  D
"RTN","SDWLQOF",93,0)
 .S SDWLTK=$G(^TMP("SDWLQOF",$J,SDWLTASK))
"RTN","SDWLQOF",94,0)
 .S ZTSAVE(SDWLTASK)=SDWLTK
"RTN","SDWLQOF",95,0)
 I $D(IO("Q")) K IO("Q") D ^%ZTLOAD W !,"REQUEST QUEUED" G END
"RTN","SDWLQOF",96,0)
QUE1 S:$E(IOST,1,2)="C-" SDWLSPT=1 I $D(ZTRTN) U IO D @ZTRTN K SDWLSPT
"RTN","SDWLQOF",97,0)
 ;
"RTN","SDWLQOF",98,0)
END ;
"RTN","SDWLQOF",99,0)
 K SDWLTASK,SDWLY,SDWLED,WDWLBD,SDWLOPEN,SDWLDATE,SDWLFORM,SDWLPRI,I
"RTN","SDWLQOF",100,0)
 K DIR,DIC,DR,DIE
"RTN","SDWLQOF",101,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","SDWLQOF",102,0)
 Q
"RTN","SDWLQOF",103,0)
HD W:$D(IOF) @IOF W !,?80-$L("Overdue Appointment Wait List Report")\2,"Overdue Appointment Wait List Report"
"RTN","SDWLQOF",104,0)
 Q
"RTN","SDWLQOI")
0^2^B7559730
"RTN","SDWLQOI",1,0)
SDWLQOI ;;IOFO BAY PINES/TEH/WAIT LIST STAT REPORT - ENROLLEE SORT
"RTN","SDWLQOI",2,0)
 ;;5.3;scheduling;**263,425**;AUG 13 1993
"RTN","SDWLQOI",3,0)
 ;
"RTN","SDWLQOI",4,0)
 ;
"RTN","SDWLQOI",5,0)
 ;
"RTN","SDWLQOI",6,0)
 ;
"RTN","SDWLQOI",7,0)
 ;
"RTN","SDWLQOI",8,0)
EN D HD
"RTN","SDWLQOI",9,0)
1 D INS G END:$D(DUOUT)
"RTN","SDWLQOI",10,0)
2 D DATE G END:$D(DUOUT)
"RTN","SDWLQOI",11,0)
 D QUE G END:$D(DUOUT)
"RTN","SDWLQOI",12,0)
 Q
"RTN","SDWLQOI",13,0)
INS ;Get Institution
"RTN","SDWLQOI",14,0)
 S SDWLERR=0,SDWLPROM="Select Institution ALL // ",SDWLINST=""
"RTN","SDWLQOI",15,0)
IN W ! S DIC(0)="QEMA",DIC("A")=SDWLPROM,DIC=4,DIC("S")="I $D(^SDWL(409.32,""C"",+Y))!$D(^SDWL(409.31,""E"",+Y))" D ^DIC I Y<0,'SDWLERR Q:$D(DUOUT)  S Y="ALL"
"RTN","SDWLQOI",16,0)
 G IN2:Y<0 Q:$D(DUOUT)
"RTN","SDWLQOI",17,0)
 I Y<0 S SDWLINST=$S(Y="ALL":"ALL",Y="":"ALL",Y="all":"ALL",Y="All":"ALL",Y["A":"ALL",Y["a":"ALL")
"RTN","SDWLQOI",18,0)
 I Y="All"!(Y="")!(Y="all")!(Y="ALL") S SDWLINST="ALL",^TMP("SDWLROI",$J,"INS")="ALL" G IN3
"RTN","SDWLQOI",19,0)
 S SDWLINST=SDWLINST_Y_";",SDWLPROM="Another Institution: ",SDWLERR=1 G IN
"RTN","SDWLQOI",20,0)
IN2 S ^TMP("SDWLROI",$J,"INS")=SDWLINST
"RTN","SDWLQOI",21,0)
IN3 Q
"RTN","SDWLQOI",22,0)
DATE ;Date range selection
"RTN","SDWLQOI",23,0)
 K X,Y,%DT
"RTN","SDWLQOI",24,0)
 S SDWLERR=0 W ! S %DT="AE",%DT("A")="Start Date: " D ^%DT
"RTN","SDWLQOI",25,0)
 I X["^" S DUOUT=1 Q
"RTN","SDWLQOI",26,0)
 I Y<0 S DUOUT=1 Q 
"RTN","SDWLQOI",27,0)
 S SDWLBDT=Y
"RTN","SDWLQOI",28,0)
 Q:$D(DUOUT)
"RTN","SDWLQOI",29,0)
 S %DT("A")="End Date: " D ^%DT G DATE:Y<1 S SDWLEDT=Y K %DT(0),%DT("A")
"RTN","SDWLQOI",30,0)
 G DATE:$D(DUOUT)
"RTN","SDWLQOI",31,0)
 I SDWLEDT<SDWLBDT W !,"Beginning Date must be greater than Ending Date." G DATE
"RTN","SDWLQOI",32,0)
 S ^TMP("SDWLROI",$J,"DATE")=SDWLBDT_"^"_SDWLEDT K DIR,DIC,DIE,%DT Q
"RTN","SDWLQOI",33,0)
 Q
"RTN","SDWLQOI",34,0)
QUE ;Queue Report
"RTN","SDWLQOI",35,0)
 N ZTQUEUED,POP
"RTN","SDWLQOI",36,0)
 K %ZIS,IOP,IOC,ZTIO S %ZIS="MQ" D ^%ZIS G:POP QUE1
"RTN","SDWLQOI",37,0)
 S ZTRTN="EN^SDWLROI",ZTDTH=$H,ZTDESC="WAIT LIST ENROLL STAT REPORT"
"RTN","SDWLQOI",38,0)
 S SDWLTASK="" F  S SDWLTASK=$O(^TMP("SDWLROI",$J,SDWLTASK)) Q:SDWLTASK=""  D
"RTN","SDWLQOI",39,0)
 .S SDWLTK=$G(^TMP("SDWLROI",$J,SDWLTASK))
"RTN","SDWLQOI",40,0)
 .S ZTSAVE(SDWLTASK)=SDWLTK
"RTN","SDWLQOI",41,0)
 I $D(IO("Q")) K IO("Q") D ^%ZTLOAD W !,"REQUEST QUEUED" G QUE2
"RTN","SDWLQOI",42,0)
QUE1 S:$E(IOST,1,2)="C-" SDWLIOSR=1 I $D(ZTRTN) U IO D @ZTRTN K SDWLIOSR
"RTN","SDWLQOI",43,0)
 ;
"RTN","SDWLQOI",44,0)
 ;
"RTN","SDWLQOI",45,0)
QUE2 K SDWLTASK,SDWLY,SDWLED,SDWLBD,SDWLOPEN,SDWLDATE,SDWLFORM,SDWLPRI
"RTN","SDWLQOI",46,0)
 K DIR,DIC,DR,DIE
"RTN","SDWLQOI",47,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","SDWLQOI",48,0)
 Q
"RTN","SDWLQOI",49,0)
END D EN^SDWLKIL K SDWLIOSR Q
"RTN","SDWLQOI",50,0)
HD ;
"RTN","SDWLQOI",51,0)
 W:$D(IOF) @IOF W !,?80-$L("Wait List Enrollment Status Report")\2,"Wait List Enrollment Status Report",!
"RTN","SDWLQSR")
0^3^B7319783
"RTN","SDWLQSR",1,0)
SDWLQSR ;;IOFO BAY PINES/TEH/WAIT LIST STAT REPORT
"RTN","SDWLQSR",2,0)
 ;;5.3;scheduling;**263,425**;AUG 13 1993
"RTN","SDWLQSR",3,0)
 ;
"RTN","SDWLQSR",4,0)
 ;
"RTN","SDWLQSR",5,0)
 ;
"RTN","SDWLQSR",6,0)
 ;
"RTN","SDWLQSR",7,0)
 ;
"RTN","SDWLQSR",8,0)
EN N ZCODE,ZTDESC,ZTDTH,ZTIO,ZTQUEDED,ZTREQ,ZTRTN,ZTSAVE,ZTSK,POP
"RTN","SDWLQSR",9,0)
 D HD
"RTN","SDWLQSR",10,0)
1 D INS G END:$D(DUOUT)
"RTN","SDWLQSR",11,0)
2 D DATE G END:$D(DUOUT)
"RTN","SDWLQSR",12,0)
 D QUE G END:$D(DUOUT)
"RTN","SDWLQSR",13,0)
 Q
"RTN","SDWLQSR",14,0)
INS ;Get Institution
"RTN","SDWLQSR",15,0)
 S SDWLERR=0,SDWLPROM="Select Institution ALL // ",SDWLINST=""
"RTN","SDWLQSR",16,0)
IN W ! S DIC(0)="QEMA",DIC("A")=SDWLPROM,DIC=4,DIC("S")="I $D(^SDWL(409.32,""C"",+Y))!$D(^SDWL(409.31,""E"",+Y))" D ^DIC I Y<0,'SDWLERR Q:$D(DUOUT)  S Y="ALL"
"RTN","SDWLQSR",17,0)
 G IN2:Y<0 Q:$D(DUOUT)
"RTN","SDWLQSR",18,0)
 I Y<0 S SDWLINST=$S(Y="ALL":"ALL",Y="":"ALL",Y="all":"ALL",Y="All":"ALL",Y["A":"ALL",Y["a":"ALL")
"RTN","SDWLQSR",19,0)
 I Y="All"!(Y="")!(Y="all")!(Y="ALL") S SDWLINST="ALL",^TMP("SDWLQSR",$J,"INS")="ALL" G IN3
"RTN","SDWLQSR",20,0)
 S SDWLINST=SDWLINST_Y_";",SDWLPROM="Another Institution: ",SDWLERR=1 G IN
"RTN","SDWLQSR",21,0)
IN2 S ^TMP("SDWLQSR",$J,"INS")=SDWLINST
"RTN","SDWLQSR",22,0)
IN3 Q
"RTN","SDWLQSR",23,0)
DATE ;Date range selection
"RTN","SDWLQSR",24,0)
 K X,Y,%DT
"RTN","SDWLQSR",25,0)
 S SDWLERR=0 W ! S %DT="AE",%DT("A")="Start Date: " D ^%DT
"RTN","SDWLQSR",26,0)
 I X["^" S DUOUT=1 Q
"RTN","SDWLQSR",27,0)
 I Y<0 S DUOUT=1 Q 
"RTN","SDWLQSR",28,0)
 S SDWLBDT=Y
"RTN","SDWLQSR",29,0)
 Q:$D(DUOUT)
"RTN","SDWLQSR",30,0)
 S %DT("A")="End Date: " D ^%DT G DATE:Y<1 S SDWLEDT=Y K %DT(0),%DT("A")
"RTN","SDWLQSR",31,0)
 G DATE:$D(DUOUT)
"RTN","SDWLQSR",32,0)
 I SDWLEDT<SDWLBDT W !,"Beginning Date must be greater than Ending Date." G DATE
"RTN","SDWLQSR",33,0)
 S ^TMP("SDWLQSR",$J,"DATE")=SDWLBDT_"^"_SDWLEDT K DIR,DIC,DIE,%DT Q
"RTN","SDWLQSR",34,0)
 Q
"RTN","SDWLQSR",35,0)
QUE ;Queue Report
"RTN","SDWLQSR",36,0)
 N ZTQUEUED,POP
"RTN","SDWLQSR",37,0)
 K %ZIS,IOP,IOC,ZTIO S %ZIS="MQ" D ^%ZIS G:POP QUE1
"RTN","SDWLQSR",38,0)
 S ZTRTN="EN^SDWLRSR",ZTDTH=$H,ZTDESC="WAIT LIST STAT REPORT"
"RTN","SDWLQSR",39,0)
 S SDWLTASK="" F  S SDWLTASK=$O(^TMP("SDWLQSR",$J,SDWLTASK)) Q:SDWLTASK=""  D
"RTN","SDWLQSR",40,0)
 .S SDWLTK=$G(^TMP("SDWLQSR",$J,SDWLTASK))
"RTN","SDWLQSR",41,0)
 .S ZTSAVE(SDWLTASK)=SDWLTK
"RTN","SDWLQSR",42,0)
 I $D(IO("Q")) K IO("Q") D ^%ZTLOAD W !,"REQUEST QUEUED" G QUE2
"RTN","SDWLQSR",43,0)
QUE1 S:$E(IOST,1,2)="C-" SDWLSPT=1 I $D(ZTRTN) U IO D @ZTRTN K SDWLSPT
"RTN","SDWLQSR",44,0)
 ;
"RTN","SDWLQSR",45,0)
 ;
"RTN","SDWLQSR",46,0)
QUE2 K SDWLTASK,SDWLY,SDWLED,WDWLBD,SDWLOPEN,SDWLDATE,SDWLFORM,SDWLPRI
"RTN","SDWLQSR",47,0)
 K DIR,DIC,DR,DIE
"RTN","SDWLQSR",48,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","SDWLQSR",49,0)
 Q
"RTN","SDWLQSR",50,0)
END D EN^SDWLKIL Q
"RTN","SDWLQSR",51,0)
HD ;
"RTN","SDWLQSR",52,0)
 W:$D(IOF) @IOF W !,?80-$L("Wait List Stat Report")\2,"Wait List Stat Report",!
"RTN","SDWLQSR",53,0)
 Q
"RTN","SDWLRQ1")
0^6^B39183658
"RTN","SDWLRQ1",1,0)
SDWLRQ1 ;;IOFO BAY PINES/TEH - ADHOC WAIT LIST REPORT;06/12/2002 ; 20 Aug 2002  2:10 PM
"RTN","SDWLRQ1",2,0)
 ;;5.3;scheduling;**263,399,412,425**;AUG 13 1993
"RTN","SDWLRQ1",3,0)
 ;
"RTN","SDWLRQ1",4,0)
 ;
"RTN","SDWLRQ1",5,0)
 ;******************************************************************
"RTN","SDWLRQ1",6,0)
 ;                             CHANGE LOG
"RTN","SDWLRQ1",7,0)
 ;                                               
"RTN","SDWLRQ1",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLRQ1",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLRQ1",10,0)
 ;   
"RTN","SDWLRQ1",11,0)
 ;   
"RTN","SDWLRQ1",12,0)
 ;   
"RTN","SDWLRQ1",13,0)
 ;   
"RTN","SDWLRQ1",14,0)
EN ;Header
"RTN","SDWLRQ1",15,0)
 N ZCODE,ZTDESC,ZTDTH,ZTIO,ZTQUEDED,ZTREQ,ZTRTN,ZTSAVE,ZTSK
"RTN","SDWLRQ1",16,0)
 D HD
"RTN","SDWLRQ1",17,0)
 S SDWLINST="",SDWLERR=0 K ^TMP("SDWLRQ1",$J),DIC,DIR,DR,DIE
"RTN","SDWLRQ1",18,0)
1 D INS G END:$D(DUOUT)
"RTN","SDWLRQ1",19,0)
2 D CAT G 1:SDWLERR,2:$D(DUOUT)
"RTN","SDWLRQ1",20,0)
3 D DATE G 2:SDWLERR,END:$D(DUOUT)
"RTN","SDWLRQ1",21,0)
4 D OPEN G 3:SDWLERR,3:$D(DUOUT)
"RTN","SDWLRQ1",22,0)
5 D FORM G 4:SDWLERR,4:$D(DUOUT)
"RTN","SDWLRQ1",23,0)
6 D DIS G EN:SDWLERR=1,END:SDWLERR=2
"RTN","SDWLRQ1",24,0)
 D QUE
"RTN","SDWLRQ1",25,0)
 Q
"RTN","SDWLRQ1",26,0)
INS ;Get Institution
"RTN","SDWLRQ1",27,0)
 N SDWLINST S SDWLINST=""
"RTN","SDWLRQ1",28,0)
 S SDWLERR=0,SDWLPROM="Select Institution ALL // "
"RTN","SDWLRQ1",29,0)
IN W ! S DIC(0)="QEMA",DIC("A")=SDWLPROM,DIC=4,DIC("S")="I $D(^SDWL(409.32,""C"",+Y))!($D(^SDWL(409.31,""E"",+Y)))" D ^DIC I Y<0,'SDWLERR Q:$D(DUOUT)  S Y="ALL"
"RTN","SDWLRQ1",30,0)
 G IN2:Y<0 Q:$D(DUOUT)
"RTN","SDWLRQ1",31,0)
 I Y<0 S SDWLINST=$S(Y="ALL":"ALL",Y="":"ALL",Y="all":"ALL",Y="All":"ALL",Y["A":"ALL",Y["a":"ALL")
"RTN","SDWLRQ1",32,0)
 I Y="All"!(Y="")!(Y="all")!(Y="ALL") S SDWLINST="ALL",^TMP("SDWLRQ1",$J,"INS")="ALL" G IN3
"RTN","SDWLRQ1",33,0)
 S SDWLINST=SDWLINST_Y_";",SDWLPROM="Another Institution: ",SDWLERR=1 G IN
"RTN","SDWLRQ1",34,0)
IN2 S ^TMP("SDWLRQ1",$J,"INS")=SDWLINST
"RTN","SDWLRQ1",35,0)
IN3 Q
"RTN","SDWLRQ1",36,0)
CAT ;Report category selection
"RTN","SDWLRQ1",37,0)
 K DIR,DIE,DR,DIC
"RTN","SDWLRQ1",38,0)
 W !!,"    *** Report Category Selection ***" S SDWLERR=0
"RTN","SDWLRQ1",39,0)
 S SDWLERR=0,SDWLCAT="",DIR(0)="SO^1:Clinic;2:Select Service/Specialty",DIR("L",1)="     1. Clinic",DIR("L")="     2. Service/Specialty"
"RTN","SDWLRQ1",40,0)
 D ^DIR
"RTN","SDWLRQ1",41,0)
 I X="^" S SDWLERR=1 W *7 Q
"RTN","SDWLRQ1",42,0)
 I X="" S SDWLERR=1 W *7 Q
"RTN","SDWLRQ1",43,0)
 S X=$S(X["C":"C",X["c":"C",X["S":"S",X["s":"S",X=1:"C",X=2:"S",1:"")
"RTN","SDWLRQ1",44,0)
 I X="" W *7," Invalid Selection." G CAT
"RTN","SDWLRQ1",45,0)
 W !!,"Select Category for Report Output",!
"RTN","SDWLRQ1",46,0)
 S SDWLX=$S(X="C":"Clinic: ALL// ",X="S":"Service/Specialty: ALL// ")
"RTN","SDWLRQ1",47,0)
 S SDWLF=$S(X["C":409.32,X["S":409.31,X["c":409.32,X["s":409.31)
"RTN","SDWLRQ1",48,0)
 S SDWLFD=$S(X="C":8,1:7)
"RTN","SDWLRQ1",49,0)
 S SDWLCTX=X
"RTN","SDWLRQ1",50,0)
 K DIR,DIC,DR
"RTN","SDWLRQ1",51,0)
 S ^TMP("SDWLRQ1",$J,"CT1")=SDWLCTX_"^"_SDWLF_"^"_SDWLFD,DIC("A")=SDWLX,SDWLE=0
"RTN","SDWLRQ1",52,0)
CT1 W ! S DIC(0)="QEMNZA",DIC=SDWLF D ^DIC I 'SDWLE,Y<1 S ^TMP("SDWLRQ1",$J,"CT2")="ALL" G CT3
"RTN","SDWLRQ1",53,0)
 I Y<0,'$D(^TMP("SDWLRQ1",$J,"CT1")) W !,"This Entry is Required." G CAT
"RTN","SDWLRQ1",54,0)
 G CT2:Y<0
"RTN","SDWLRQ1",55,0)
 S SDWLCAT=SDWLCAT_Y_";",DIC("A")="Another "_$P(SDWLX,":",1)_": ",SDWLE=1 G CT1
"RTN","SDWLRQ1",56,0)
CT2 G CT1:'$D(SDWLCAT) S ^TMP("SDWLRQ1",$J,"CT2")=SDWLCAT
"RTN","SDWLRQ1",57,0)
CT3 Q
"RTN","SDWLRQ1",58,0)
DATE ;Date range selection
"RTN","SDWLRQ1",59,0)
 K X,Y,%DT
"RTN","SDWLRQ1",60,0)
 S %=1 W !!,"Print Report for ALL dates? " D YN^DICN
"RTN","SDWLRQ1",61,0)
 I %=1 S ^TMP("SDWLRQ1",$J,"DATE")="ALL" G E1
"RTN","SDWLRQ1",62,0)
 Q:%=0
"RTN","SDWLRQ1",63,0)
 Q:%=-1
"RTN","SDWLRQ1",64,0)
 S SDWLERR=0 W ! S %DT="AE",%DT("A")="Start with Desired Appointment Date: " D ^%DT
"RTN","SDWLRQ1",65,0)
 I X["^" S SDWLERR=1 Q
"RTN","SDWLRQ1",66,0)
 G E1:Y<0 S SDWLBDT=Y
"RTN","SDWLRQ1",67,0)
 Q:$D(DUOUT)
"RTN","SDWLRQ1",68,0)
 S %DT(0)=SDWLBDT,%DT("A")="End with Desired Appointment Date: " D ^%DT G DATE:Y<1 S SDWLEDT=Y K %DT(0),%DT("A")
"RTN","SDWLRQ1",69,0)
 G DATE:$D(DUOUT)
"RTN","SDWLRQ1",70,0)
 I SDWLEDT<SDWLBDT W !,"Beginning Date must be greater than Ending Date." G DATE
"RTN","SDWLRQ1",71,0)
 S ^TMP("SDWLRQ1",$J,"DATE")=SDWLBDT_"^"_SDWLEDT Q
"RTN","SDWLRQ1",72,0)
E1 Q
"RTN","SDWLRQ1",73,0)
OPEN ;OPEN Wait List Entries  
"RTN","SDWLRQ1",74,0)
 S %=1 W !!,"Do you want only 'OPEN' Wait List Entries " D YN^DICN
"RTN","SDWLRQ1",75,0)
 I %=0 W " Response must be 'YES' or 'NO'." G OPEN
"RTN","SDWLRQ1",76,0)
 I %=-1 S SDWLERR=1 W *7,"?? "
"RTN","SDWLRQ1",77,0)
 S ^TMP("SDWLRQ1",$J,"OPEN")=%
"RTN","SDWLRQ1",78,0)
 Q
"RTN","SDWLRQ1",79,0)
FORM ;Report Format
"RTN","SDWLRQ1",80,0)
 S SDWLERR=0,DIR(0)="SO^1:D:Detailed;S:Summary",DIR("L",2)="     D Detailed"
"RTN","SDWLRQ1",81,0)
 S DIR("L")="     S Summary",DIR("L",1)="Select One of the Following: "
"RTN","SDWLRQ1",82,0)
 D ^DIR
"RTN","SDWLRQ1",83,0)
 S SDWLFORM=$S(X["D":"D",X["d":"D",X["S":"S",X["s":"S",1:"")
"RTN","SDWLRQ1",84,0)
 I X="^" S DUOUT=1 Q
"RTN","SDWLRQ1",85,0)
 I SDWLFORM="" W *7,"Required!" G FORM
"RTN","SDWLRQ1",86,0)
 S ^TMP("SDWLRQ1",$J,"FORM")=SDWLFORM
"RTN","SDWLRQ1",87,0)
 Q
"RTN","SDWLRQ1",88,0)
DIS ;Display Parameters
"RTN","SDWLRQ1",89,0)
 S SDWLERR=0 W !!,?80-$L("*** Selected Report Parameters ***")\2,"*** Selected Report Parameters ***",!
"RTN","SDWLRQ1",90,0)
 F SDWLI="INS","CT1","CT2","DATE","FORM","OPEN" D
"RTN","SDWLRQ1",91,0)
 .S X="SDWL"_SDWLI,@X=$G(^TMP("SDWLRQ1",$J,SDWLI))
"RTN","SDWLRQ1",92,0)
 F SDWLTAG="IS","CT","DA","OP","PR" D @SDWLTAG
"RTN","SDWLRQ1",93,0)
 Q
"RTN","SDWLRQ1",94,0)
IS I SDWLINS'["ALL" D
"RTN","SDWLRQ1",95,0)
 .K SDWLY F I=1:1 S SDWLY=$P($P(SDWLINS,";",I),U,2) Q:SDWLY=""  S SDWLY(I)=SDWLY
"RTN","SDWLRQ1",96,0)
 .W !,?20,"Institution: "
"RTN","SDWLRQ1",97,0)
 .I $D(SDWLY) S I="" F  S I=$O(SDWLY(I)) Q:I=""  W:I>1 !,?33 W SDWLY(I)
"RTN","SDWLRQ1",98,0)
 .K SDWLY
"RTN","SDWLRQ1",99,0)
 I SDWLINS["ALL" W !,?20,"Institution: ALL "
"RTN","SDWLRQ1",100,0)
 Q
"RTN","SDWLRQ1",101,0)
CT I SDWLCT2'["ALL" D
"RTN","SDWLRQ1",102,0)
 .S SDWLF=$P(SDWLCT1,U,2)
"RTN","SDWLRQ1",103,0)
 .K SDWLY F I=1:1 S SDWLY=$P($P(SDWLCT2,";",I),U,2) Q:SDWLY=""  S SDWLY(I)=SDWLY
"RTN","SDWLRQ1",104,0)
 .W !,?16,"Report Category: " W $S(SDWLCT1["C":"Clinic",1:"Service Specialty"),!,?36 I @X="ALL" W "All "
"RTN","SDWLRQ1",105,0)
 .I $D(SDWLY) S I="" F   S I=$O(SDWLY(I)) Q:I=""  W:I>1 !,?35 W $$EXTERNAL^DILFD(SDWLF,.01,,SDWLY(I))
"RTN","SDWLRQ1",106,0)
 I SDWLCT2["ALL" W !,?16,"Report Category: " W $S(SDWLCT1["C":"Clinic",1:"Service Specialty"),!,?36 W "ALL "
"RTN","SDWLRQ1",107,0)
 Q
"RTN","SDWLRQ1",108,0)
DA W !,?13,"Date Desired Range: " S Y=$P(SDWLDATE,U,1) D DD^%DT S SDWLBD=Y S Y=$P(SDWLDATE,U,2) D DD^%DT S SDWLED=Y
"RTN","SDWLRQ1",109,0)
 W " ",SDWLBD
"RTN","SDWLRQ1",110,0)
 I SDWLED'="" W " to ",SDWLED
"RTN","SDWLRQ1",111,0)
 Q
"RTN","SDWLRQ1",112,0)
OP W !,?18,"Output Format: ",$S(SDWLFORM="D":" Detailed",1:" Summary")
"RTN","SDWLRQ1",113,0)
 Q
"RTN","SDWLRQ1",114,0)
PR I SDWLOPEN=1 W !,?25,"Printing 'OPEN' Entries Only."
"RTN","SDWLRQ1",115,0)
 E  W !,?25,"Printing ALL Entries."
"RTN","SDWLRQ1",116,0)
 S %=1 W !!,"Are these Parameters Correct " D YN^DICN I %=2 S SDWLERR=1 W !,"  This Report will NOT be queued to print."
"RTN","SDWLRQ1",117,0)
 I SDWLERR S DIR(0)="E" D ^DIR I X["^" S SDWLERR=2
"RTN","SDWLRQ1",118,0)
 Q
"RTN","SDWLRQ1",119,0)
QUE ;Queue Report
"RTN","SDWLRQ1",120,0)
 N ZTQUEUED,POP
"RTN","SDWLRQ1",121,0)
 K %ZIS,IOP,IOC,ZTIO S %ZIS="MQ" D ^%ZIS G:POP QUE1
"RTN","SDWLRQ1",122,0)
 S ZTRTN=$S(SDWLFORM="D":"EN^SDWLRPT1",1:"EN^SDWLRPS1"),ZTDTH=$H,ZTDESC="WAIT LIST REPORT FORMAT 1"
"RTN","SDWLRQ1",123,0)
 S SDWLTASK="" F  S SDWLTASK=$O(^TMP("SDWLRQ1",$J,SDWLTASK)) Q:SDWLTASK=""  D
"RTN","SDWLRQ1",124,0)
 .S SDWLTK=$G(^TMP("SDWLRQ1",$J,SDWLTASK))
"RTN","SDWLRQ1",125,0)
 .S ZTSAVE(SDWLTASK)=SDWLTK
"RTN","SDWLRQ1",126,0)
 S ZTSAVE("SDWLF")=""  ; SD*5.3*412
"RTN","SDWLRQ1",127,0)
 I $D(IO("Q")) K IO("Q") D ^%ZTLOAD W !,"REQUEST QUEUED" G END
"RTN","SDWLRQ1",128,0)
QUE1 S:$E(IOST,1,2)="C-" SDWLSPT=1 I $D(ZTRTN) U IO D @ZTRTN K SDWLSPT
"RTN","SDWLRQ1",129,0)
 ;
"RTN","SDWLRQ1",130,0)
END ;
"RTN","SDWLRQ1",131,0)
 K SDWLTASK,SDWLY,SDWLED,WDWLBD,SDWLOPEN,SDWLDATE,SDWLFORM,SDWLPRI,I
"RTN","SDWLRQ1",132,0)
 K DIR,DIC,DR,DIE,SDWLERR,SDWLF,SDWLX,SDLFD,SDWLCTX,SDWLDAT,SDWLPROM,SDWLINST,SDWLI,SDWLTAG,SDWLY
"RTN","SDWLRQ1",133,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","SDWLRQ1",134,0)
 Q
"RTN","SDWLRQ1",135,0)
HD W:$D(IOF) @IOF W !,?80-$L("Appointment Wait List Report")\2,"Appointment Wait List Report"
"RTN","SDWLRQ1",136,0)
 Q
"RTN","SDWLRQ2")
0^7^B34443810
"RTN","SDWLRQ2",1,0)
SDWLRQ2 ;;IOFO BAY PINES/TEH - ADHOC WAIT LIST REPORT PRIM CARE TEAM AND POSITION ASSIGNMENTS;06/12/2002 ; 29 Aug 2002  2:53 PM
"RTN","SDWLRQ2",2,0)
 ;;5.3;scheduling;**263,425**;AUG 13 1993
"RTN","SDWLRQ2",3,0)
 ;
"RTN","SDWLRQ2",4,0)
 ;
"RTN","SDWLRQ2",5,0)
 ;******************************************************************
"RTN","SDWLRQ2",6,0)
 ;                             CHANGE LOG
"RTN","SDWLRQ2",7,0)
 ;                                               
"RTN","SDWLRQ2",8,0)
 ;   DATE                        PATCH                   DESCRIPTION
"RTN","SDWLRQ2",9,0)
 ;   ----                        -----                   -----------
"RTN","SDWLRQ2",10,0)
 ;   
"RTN","SDWLRQ2",11,0)
 ;   
"RTN","SDWLRQ2",12,0)
 ;   
"RTN","SDWLRQ2",13,0)
 ;   
"RTN","SDWLRQ2",14,0)
EN ;Header
"RTN","SDWLRQ2",15,0)
 N ZCODE,ZTDESC,ZTDTH,ZTIO,ZTQUEDED,ZTREQ,ZTRTN,ZTSAVE,ZTSK
"RTN","SDWLRQ2",16,0)
 D HD
"RTN","SDWLRQ2",17,0)
 S SDWLINST="",SDWLERR=0,SDWLE=0 K ^TMP("SDWLRQ2",$J),DIC,DIR,DR,DIE
"RTN","SDWLRQ2",18,0)
1 D INS G END:SDWLERR
"RTN","SDWLRQ2",19,0)
2 D CAT G 1:SDWLERR
"RTN","SDWLRQ2",20,0)
3 D OPEN G 2:SDWLERR
"RTN","SDWLRQ2",21,0)
 S ^TMP("SDWLRQ2",$J,"DATE")=""
"RTN","SDWLRQ2",22,0)
4 I %=2 D DATE G 3:SDWLERR
"RTN","SDWLRQ2",23,0)
6 D FORM G 4:SDWLERR,END:$D(DUOUT)
"RTN","SDWLRQ2",24,0)
7 D DIS G EN:SDWLERR=1,END:SDWLERR=2
"RTN","SDWLRQ2",25,0)
 D QUE
"RTN","SDWLRQ2",26,0)
 Q
"RTN","SDWLRQ2",27,0)
INS ;Get Institution
"RTN","SDWLRQ2",28,0)
 S SDWLPROM="Select Institution ALL // ",SDWLERR=0
"RTN","SDWLRQ2",29,0)
IN W ! S DIC(0)="QEMA",DIC("A")=SDWLPROM,DIC=4,DIC("S")="I $D(^SCTM(404.51,""AINST"",+Y))" D ^DIC I Y<0,'SDWLE D
"RTN","SDWLRQ2",30,0)
 .S (SDWLINS,SDWLINST)="" F  S SDWLINS=$O(^SCTM(404.51,"AINST",SDWLINS)) Q:SDWLINS=""  S SDWLINST=SDWLINST_SDWLINS_";"
"RTN","SDWLRQ2",31,0)
 I X="^" S SDWLERR=1 Q
"RTN","SDWLRQ2",32,0)
 G IN2:Y<0,END:$D(DUOUT)
"RTN","SDWLRQ2",33,0)
 I Y="All"!(Y="")!(Y="all")!(Y="ALL") S ^TMP("SDWLRQ2",$J,"INS")=SDWLINST G IN3
"RTN","SDWLRQ2",34,0)
 S SDWLINST=SDWLINST_+Y_";",SDWLPROM="Another Institution: ",SDWLE=1 G IN
"RTN","SDWLRQ2",35,0)
IN2 S ^TMP("SDWLRQ2",$J,"INS")=SDWLINST
"RTN","SDWLRQ2",36,0)
IN3 Q
"RTN","SDWLRQ2",37,0)
DATE ;Date range selection
"RTN","SDWLRQ2",38,0)
 S %=1 W !,"Print Report for ALL dates? " D YN^DICN
"RTN","SDWLRQ2",39,0)
 I %=1 S ^TMP("SDWLRQ2",$J,"DATE")="ALL" G E1
"RTN","SDWLRQ2",40,0)
 Q:%=0
"RTN","SDWLRQ2",41,0)
 Q:%=-1
"RTN","SDWLRQ2",42,0)
 S SDWLERR=0 W ! S %DT="AE",%DT("A")="Start with Date Entered: " D ^%DT G E1:Y<1 S SDWLBDT=Y
"RTN","SDWLRQ2",43,0)
 S %DT(0)=SDWLBDT,%DT("A")="End with Date Entered: " D ^%DT
"RTN","SDWLRQ2",44,0)
 I X["^" S SDWLERR=1 Q
"RTN","SDWLRQ2",45,0)
 G E1:Y<1 S SDWLEDT=Y K %DT(0),%DT("A")
"RTN","SDWLRQ2",46,0)
 I SDWLEDT<SDWLBDT W !,"Beginning Date must be greater than Ending Date." G DATE
"RTN","SDWLRQ2",47,0)
 S ^TMP("SDWLRQ2",$J,"DATE")=SDWLBDT_"^"_SDWLEDT Q
"RTN","SDWLRQ2",48,0)
E1 Q
"RTN","SDWLRQ2",49,0)
CAT ;Report category selection
"RTN","SDWLRQ2",50,0)
 W !!,"    *** Report Category Selection ***" S SDWLERR=0
"RTN","SDWLRQ2",51,0)
 S SDWLERR=0,SDWLCAT="",DIR(0)="S0^1:Team;2:Position",DIR("L",1)="     1. Team",DIR("L")="     2. Position"
"RTN","SDWLRQ2",52,0)
 D ^DIR
"RTN","SDWLRQ2",53,0)
 I X="^" S SDWLERR=1 Q
"RTN","SDWLRQ2",54,0)
 S X=$S(X["T":"T",X["t":"T",X["P":"P",X["p":"P",X=1:"T",X=2:"P",1:"")
"RTN","SDWLRQ2",55,0)
 I X="" W *7," Invalid Selection." G CAT
"RTN","SDWLRQ2",56,0)
 W !!,"Select Category for Report Output",!
"RTN","SDWLRQ2",57,0)
 S SDWLX=$S(X="T":"Team: ALL/ ",X="P":"Position: ALL/ ")
"RTN","SDWLRQ2",58,0)
 S SDWLF=$S(X="T":404.51,X="P":404.57)
"RTN","SDWLRQ2",59,0)
 K DIR,DIC,DR
"RTN","SDWLRQ2",60,0)
 S ^TMP("SDWLRQ2",$J,"CT1")=X_"^"_SDWLF,DIC("A")=SDWLX
"RTN","SDWLRQ2",61,0)
CT1 W ! S DIC(0)="QEMNZA",DIC=SDWLF D ^DIC
"RTN","SDWLRQ2",62,0)
 I X="^" S SDWLERR=1 Q
"RTN","SDWLRQ2",63,0)
 I Y<1,SDWLCAT="" S ^TMP("SDWLRQ2",$J,"CT2")="ALL" G CT3
"RTN","SDWLRQ2",64,0)
 I Y<0,'$D(^TMP("SDWLRQ2",$J,"CT1")) W !,"This Entry is Required." G CAT
"RTN","SDWLRQ2",65,0)
 G CT2:Y<0
"RTN","SDWLRQ2",66,0)
 S SDWLCAT=SDWLCAT_Y_";",DIC("A")="Another "_$P(SDWLX,":",1)_": ",SDWLE=1 G CT1
"RTN","SDWLRQ2",67,0)
CT2 G CT1:'$D(SDWLCAT) S ^TMP("SDWLRQ2",$J,"CT2")=SDWLCAT
"RTN","SDWLRQ2",68,0)
CT3 Q
"RTN","SDWLRQ2",69,0)
OPEN ;OPEN Wait List Entries  
"RTN","SDWLRQ2",70,0)
 S %=1 W !!,"Do you want only 'OPEN' Wait List Entries " D YN^DICN
"RTN","SDWLRQ2",71,0)
 I '% W *7,"Must Enter 'YES' or 'NO'." G OPEN
"RTN","SDWLRQ2",72,0)
 I %=-1 S SDWLERR=1
"RTN","SDWLRQ2",73,0)
 S ^TMP("SDWLRQ2",$J,"OPEN")=$S(%=1:"O",1:"C")
"RTN","SDWLRQ2",74,0)
 Q
"RTN","SDWLRQ2",75,0)
FORM ;Report Format
"RTN","SDWLRQ2",76,0)
 S SDWLERR=0,DIR(0)="SO^1:Detailed;2:Summary",DIR("L",2)="     1. Detailed"
"RTN","SDWLRQ2",77,0)
 S DIR("L")="     2. Summary",DIR("L",1)="Select One of the Following: "
"RTN","SDWLRQ2",78,0)
 D ^DIR
"RTN","SDWLRQ2",79,0)
 I X="^" S DUOUT=1 Q
"RTN","SDWLRQ2",80,0)
 S X=$S(X["S":"S",X["s":"S",X["D":"D",X["d":"D",X=1:"D",X=2:"S",1:"")
"RTN","SDWLRQ2",81,0)
 I X="" W *7," Invalid Response" G FORM
"RTN","SDWLRQ2",82,0)
 S ^TMP("SDWLRQ2",$J,"FORM")=X
"RTN","SDWLRQ2",83,0)
 Q
"RTN","SDWLRQ2",84,0)
DIS ;Display Parameters
"RTN","SDWLRQ2",85,0)
 S SDWLERR=0 W !!,?80-$L("*** Selected Report Parameters ***")\2,"*** Selected Report Parameters ***",!
"RTN","SDWLRQ2",86,0)
 F SDWLI="INS","CT1","CT2","FORM","OPEN" D
"RTN","SDWLRQ2",87,0)
 .S X="SDWL"_SDWLI,@X=$G(^TMP("SDWLRQ2",$J,SDWLI))
"RTN","SDWLRQ2",88,0)
 F SDWLTAG="IS","CT","OP","PR" D @SDWLTAG
"RTN","SDWLRQ2",89,0)
 Q
"RTN","SDWLRQ2",90,0)
IS I SDWLINS'["ALL" D
"RTN","SDWLRQ2",91,0)
 .K SDWLY F I=1:1 S SDWLY=$P($P(SDWLINS,";",I),U,1) Q:SDWLY=""  S SDWLY(I)=SDWLY
"RTN","SDWLRQ2",92,0)
 .W !,?20,"Institution: "
"RTN","SDWLRQ2",93,0)
 .I $D(SDWLY) S I="" F  S I=$O(SDWLY(I)) Q:I=""  W:I>1 !,?33 W $P($G(^DIC(4,SDWLY(I),0)),U,1)
"RTN","SDWLRQ2",94,0)
 .K SDWLY
"RTN","SDWLRQ2",95,0)
 I SDWLINS["ALL" W !,?20,"Institution: ALL "
"RTN","SDWLRQ2",96,0)
 Q
"RTN","SDWLRQ2",97,0)
CT I SDWLCT2'["ALL" D
"RTN","SDWLRQ2",98,0)
 .S SDWLF=$P(SDWLCT1,U,2)
"RTN","SDWLRQ2",99,0)
 .K SDWLY F I=1:1 S SDWLY=$P($P(SDWLCT2,";",I),U,2) Q:SDWLY=""  S SDWLY(I)=SDWLY
"RTN","SDWLRQ2",100,0)
 .W !,?16,"Report Category: " W $S(SDWLCT1["T":"Team",1:"Position"),!,?36 I @X="ALL" W "All "
"RTN","SDWLRQ2",101,0)
 .I $D(SDWLY) S I="" F   S I=$O(SDWLY(I)) Q:I=""  W:I>1 !,?35 W $$EXTERNAL^DILFD(SDWLF,.01,,SDWLY(I))
"RTN","SDWLRQ2",102,0)
 I SDWLCT2["ALL" W !,?16,"Report Category: " W $S(SDWLCT1["T":"Team",1:"Position"),!,?36 W "ALL "
"RTN","SDWLRQ2",103,0)
 Q
"RTN","SDWLRQ2",104,0)
OP W !,?18,"Output Format: ",$S(SDWLFORM="D":" Detailed",1:" Summary")
"RTN","SDWLRQ2",105,0)
 Q
"RTN","SDWLRQ2",106,0)
PR I SDWLOPEN="O" W !,?25,"Printing 'OPEN' Entries Only."
"RTN","SDWLRQ2",107,0)
 E  W !,?25,"Printing ALL Entries."
"RTN","SDWLRQ2",108,0)
 S %=1 W !!,"Are these Parameters Correct " D YN^DICN I %=2 S SDWLERR=1 W !,"  This Report will NOT be queued to print."
"RTN","SDWLRQ2",109,0)
 I SDWLERR S DIR(0)="E" D ^DIR I X["^" S SDWLERR=2
"RTN","SDWLRQ2",110,0)
 Q
"RTN","SDWLRQ2",111,0)
QUE ;Queue Report
"RTN","SDWLRQ2",112,0)
 N ZTQUEUED,POP
"RTN","SDWLRQ2",113,0)
 K %ZIS,IOP,IOC,ZTIO,SDWLSPT S %ZIS="MQ" D ^%ZIS G:POP QUE1
"RTN","SDWLRQ2",114,0)
 S ZTRTN=$S(SDWLFORM="D":"EN^SDWLRPT2",1:"EN^SDWLRPS2"),ZTDTH=$H,ZTDESC="WAIT LIST REPORT FORMAT 2"
"RTN","SDWLRQ2",115,0)
 S SDWLTASK="" F  S SDWLTASK=$O(^TMP("SDWLRQ2",$J,SDWLTASK)) Q:SDWLTASK=""  D
"RTN","SDWLRQ2",116,0)
 .S SDWLTK=$G(^TMP("SDWLRQ2",$J,SDWLTASK))
"RTN","SDWLRQ2",117,0)
 .S ZTSAVE(SDWLTASK)=SDWLTK
"RTN","SDWLRQ2",118,0)
 I $D(IO("Q")) K IO("Q") D ^%ZTLOAD W !,"REQUEST QUEUED" G END
"RTN","SDWLRQ2",119,0)
QUE1 S:$E(IOST,1,2)="C-" SDWLSPT=1 I $D(ZTRTN) U IO D @ZTRTN K SDWLSPT
"RTN","SDWLRQ2",120,0)
 ;
"RTN","SDWLRQ2",121,0)
END K SDWLTASK,SDWLY,SDWLED,WDWLBD,SDWLOPEN,SDWLDATE,SDWLFORM,SDWLPRI
"RTN","SDWLRQ2",122,0)
 K DIR,DIC,DR,DIE,SDWLSPT,I
"RTN","SDWLRQ2",123,0)
 D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","SDWLRQ2",124,0)
 Q
"RTN","SDWLRQ2",125,0)
HD W:$D(IOF) @IOF W !,?80-$L("Primary Care Team/Position Assignment Wait List Report")\2,"Primary Care Team/Position Assignment Wait List Report"
"RTN","SDWLRSR")
0^8^B84487758
"RTN","SDWLRSR",1,0)
SDWLRSR ;;IOFO BAY PINES/TEH/WAIT LIST STAT REPORT ; 01 Oct 2002  4:42 PM
"RTN","SDWLRSR",2,0)
 ;;5.3;scheduling;**263,273,399,412,425**;AUG 13 1993
"RTN","SDWLRSR",3,0)
 ;
"RTN","SDWLRSR",4,0)
 ;
"RTN","SDWLRSR",5,0)
 ;
"RTN","SDWLRSR",6,0)
 ;
"RTN","SDWLRSR",7,0)
EN ;
"RTN","SDWLRSR",8,0)
 ;
"RTN","SDWLRSR",9,0)
 D INIT
"RTN","SDWLRSR",10,0)
 I $$S^%ZTLOAD Q
"RTN","SDWLRSR",11,0)
 D SORT
"RTN","SDWLRSR",12,0)
 I $$S^%ZTLOAD Q
"RTN","SDWLRSR",13,0)
 D PRT
"RTN","SDWLRSR",14,0)
 I $$S^%ZTLOAD Q
"RTN","SDWLRSR",15,0)
 G END
"RTN","SDWLRSR",16,0)
INIT ;
"RTN","SDWLRSR",17,0)
 I $D(CT) S SDWLCT2=CT
"RTN","SDWLRSR",18,0)
 I $D(DATE) S SDWLDATE=DATE
"RTN","SDWLRSR",19,0)
 I $D(INS) S SDWLINS=INS
"RTN","SDWLRSR",20,0)
 I $D(ZTSAVE) D
"RTN","SDWLRSR",21,0)
 .S SDWLCT=$G(ZTSAVE("CT")),SDWLDATE=$G(ZTSAVE("DATE")),SDWLINS=$G(ZTSAVE("INS"))
"RTN","SDWLRSR",22,0)
 I SDWLINS'="ALL" F I=1:1 S SDWL=$P(SDWLINS,";",I) Q:SDWL=""  S SDWL("INS",+SDWL)=""
"RTN","SDWLRSR",23,0)
 S SDWLBD=$P(SDWLDATE,U,1),SDWLED=$P(SDWLDATE,U,2),SDWLPG=0
"RTN","SDWLRSR",24,0)
 D NOW^%DTC S Y=% D DD^%DT S SDWLDTP=Y
"RTN","SDWLRSR",25,0)
 N POP S POP=0  ;SD*5.3*412
"RTN","SDWLRSR",26,0)
 Q
"RTN","SDWLRSR",27,0)
SORT ;SORT AND CALCULATE STAT REPORT
"RTN","SDWLRSR",28,0)
 K ^TMP("SDWLRSR1",$J),^TMP("SDWLRSR2",$J) S (SDWLERR,SDWLPR,SDWLC,SDWLD,SDWLNC,SDWLSA,SDWLCC,SDWLNN,SDWLER,SDWLAD,SDWLRE,SDWLNR)=0
"RTN","SDWLRSR",29,0)
 S SDWLDA=0 F  S SDWLDA=$O(^SDWL(409.3,SDWLDA)) Q:SDWLDA=""  D
"RTN","SDWLRSR",30,0)
 .I $D(DUOUT) Q
"RTN","SDWLRSR",31,0)
 .S SDWLX=$G(^SDWL(409.3,SDWLDA,0)) Q:SDWLX=""  S SDWLINSN=+$P(SDWLX,U,3) I 'SDWLINSN Q
"RTN","SDWLRSR",32,0)
 .S SDWLPRI=$P(SDWLX,U,11) I SDWLPRI="" S SDWLPRI="U"
"RTN","SDWLRSR",33,0)
 .S SDWLDFN=+SDWLX I 'SDWLDFN Q
"RTN","SDWLRSR",34,0)
 .S SDWLTYP=$P(SDWLX,U,5),SDWLTYPN=$S(SDWLTYP=1:$P(SDWLX,U,6),SDWLTYP=2:$P(SDWLX,U,7),SDWLTYP=3:$P(SDWLX,U,8),SDWLTYP=4:$P(SDWLX,U,9),1:"")
"RTN","SDWLRSR",35,0)
 .I SDWLTYPN="" Q
"RTN","SDWLRSR",36,0)
 .S SDWLFLD=$S(SDWLTYP=1:5,SDWLTYP=2:6,SDWLTYP=3:7,SDWLTYP=4:8)
"RTN","SDWLRSR",37,0)
 .S SDWLTYNM=$$EXTERNAL^DILFD(409.3,SDWLFLD,,SDWLTYPN) I SDWLTYNM="" S SDWLTYNM="UNKNOWN"
"RTN","SDWLRSR",38,0)
 .I 'SDWLINSN Q
"RTN","SDWLRSR",39,0)
 .I $D(SDWL("INS")) D
"RTN","SDWLRSR",40,0)
 ..;CHECK FOR SPECIFIC INSTITUTIONAL SORT
"RTN","SDWLRSR",41,0)
 ..S SDWLINS=$P(SDWLX,U,3),SDWLERR=0 I SDWLINS'="ALL",'$D(SDWL("INS",SDWLINS)) S SDWLERR=1 Q
"RTN","SDWLRSR",42,0)
 ..S SDWLPRI=$P(SDWLX,U,11) I SDWLPRI="" S SDWLPRI="N"
"RTN","SDWLRSR",43,0)
 .I SDWLERR Q
"RTN","SDWLRSR",44,0)
 .;CHECK DATE RANGE
"RTN","SDWLRSR",45,0)
 .S SDWLOFDT=$P(SDWLX,U,2),SDWLOK1=1 I SDWLOFDT>SDWLBD!(SDWLOFDT=SDWLBD) D
"RTN","SDWLRSR",46,0)
 ..I SDWLOFDT<SDWLED!(SDWLOFDT=SDWLED) S SDWLOK1=0
"RTN","SDWLRSR",47,0)
 .S SDWLX1=$P(^DIC(4,+$P(SDWLX,U,3),0),U,1),SDWLY1=SDWLTYP
"RTN","SDWLRSR",48,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")) ^("AD")=0
"RTN","SDWLRSR",49,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"AD")) ^("AD")=0
"RTN","SDWLRSR",50,0)
 .I 'SDWLOK1 D S1
"RTN","SDWLRSR",51,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")) ^("NR")=0
"RTN","SDWLRSR",52,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")) ^("NR")=0
"RTN","SDWLRSR",53,0)
 .S SDWLDFDT=0,SDWLOK3=1 I $D(^SDWL(409.3,SDWLDA,"DIS")) S SDWLDFDT=$P(^("DIS"),U,1),SDWLOK3=0 I SDWLDFDT<SDWLBD!(SDWLDFDT>SDWLED) S SDWLOK3=1
"RTN","SDWLRSR",54,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")) ^("CL")=0
"RTN","SDWLRSR",55,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")) ^("CL")=0
"RTN","SDWLRSR",56,0)
 .I 'SDWLOK3 D S3
"RTN","SDWLRSR",57,0)
 .S SDWLTYP=$P(SDWLX,U,5)
"RTN","SDWLRSR",58,0)
 .S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")) ^("PR")=0
"RTN","SDWLRSR",59,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")) ^("PR")=0
"RTN","SDWLRSR",60,0)
 .S SDWLFLG=0
"RTN","SDWLRSR",61,0)
 .I SDWLOFDT'>SDWLBD D
"RTN","SDWLRSR",62,0)
 ..I SDWLOFDT=SDWLBD Q
"RTN","SDWLRSR",63,0)
 ..I $P(SDWLX,U,17)["O" S SDWLFLG=1
"RTN","SDWLRSR",64,0)
 ..I $D(^SDWL(409.3,SDWLDA,"DIS")) D
"RTN","SDWLRSR",65,0)
 ...I 'SDWLFLG,($P($G(^SDWL(409.3,SDWLDA,"DIS")),U,1)>SDWLBD)!($P($G(^SDWL(409.3,SDWLDA,"DIS")),U,1)=SDWLBD) S SDWLFLG=1
"RTN","SDWLRSR",66,0)
 ..I SDWLFLG D
"RTN","SDWLRSR",67,0)
 ...S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR")+1
"RTN","SDWLRSR",68,0)
 ...S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"PR")+1
"RTN","SDWLRSR",69,0)
 .I $P(SDWLX,U,14) D
"RTN","SDWLRSR",70,0)
 ..S SDWLRDT=$P(SDWLX,U,14)
"RTN","SDWLRSR",71,0)
 ..I SDWLRDT>SDWLBD!(SDWLRDT=SDWLBD)!(SDWLRDT<SDWLED)!(SDWLRDT=SDWLED) D
"RTN","SDWLRSR",72,0)
 ...S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")) ^("NR")=0
"RTN","SDWLRSR",73,0)
 ...S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"NR")=^("NR")+1
"RTN","SDWLRSR",74,0)
 ...S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")) ^("NR")=0
"RTN","SDWLRSR",75,0)
 ...S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")+1
"RTN","SDWLRSR",76,0)
 .D S2
"RTN","SDWLRSR",77,0)
 .I $$S^%ZTLOAD S DUOUT=""
"RTN","SDWLRSR",78,0)
 Q
"RTN","SDWLRSR",79,0)
S1 ;ORIGINATING DATE MEETS CRITERIA
"RTN","SDWLRSR",80,0)
 ;
"RTN","SDWLRSR",81,0)
 S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"AD")+1
"RTN","SDWLRSR",82,0)
 S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"AD")=^("AD")+1
"RTN","SDWLRSR",83,0)
 Q
"RTN","SDWLRSR",84,0)
S2 ;DO NOT REMOVE DATE MEETS CRITERIA
"RTN","SDWLRSR",85,0)
 ;
"RTN","SDWLRSR",86,0)
 S X1=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"PR"),X2=$G(^("AD")),X3=$G(^("CL")) S X4=X1+X2-X3
"RTN","SDWLRSR",87,0)
 S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"RR")=($G(^("PR"))+($G(^("AD"))))-$G(^("CL"))
"RTN","SDWLRSR",88,0)
 S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"NR")+1
"RTN","SDWLRSR",89,0)
 Q
"RTN","SDWLRSR",90,0)
S3 S SDWLDIS=^SDWL(409.3,SDWLDA,"DIS")  D
"RTN","SDWLRSR",91,0)
 .S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,"CL")+1
"RTN","SDWLRSR",92,0)
 .S ^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")=^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,"CL")+1
"RTN","SDWLRSR",93,0)
 .S SDWLDP=$P(SDWLDIS,U,3),X="SDWL"_SDWLDP,@X=@X+1 S:'$D(^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)) ^(X)=0
"RTN","SDWLRSR",94,0)
 .S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)=^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,X)+1
"RTN","SDWLRSR",95,0)
 .S:'$D(^TMP("SDWLRSR2",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,X)) ^(X)=0
"RTN","SDWLRSR",96,0)
 .S ^TMP("SDWLRSR1",$J,SDWLX1,SDWLY1,SDWLTYPN,SDWLTYNM,SDWLPRI,SDWLDFN,X)=^(X)+1
"RTN","SDWLRSR",97,0)
 Q
"RTN","SDWLRSR",98,0)
PRT ;PRINT REPORT
"RTN","SDWLRSR",99,0)
 S (TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11,SDWLPG)=0 D HD,HD1
"RTN","SDWLRSR",100,0)
 I '$D(^TMP("SDWLRSR1")) W !!,"No Wait List Data to Report" Q
"RTN","SDWLRSR",101,0)
 S SDWLINS="" F  S SDWLINS=$O(^TMP("SDWLRSR1",$J,SDWLINS)) Q:SDWLINS=""  D  Q:POP  D T2  Q:POP  W !,"________________" I $Y>(IOSL-5) D:$D(SDWLSPT) SCR Q:POP  D HD,HD1  ;SD*5.3*412 added Quit for early exit
"RTN","SDWLRSR",102,0)
 .I $$S^%ZTLOAD S DUOUT="" Q 
"RTN","SDWLRSR",103,0)
 .W !!,"INSTITUTION: ",SDWLINS,!
"RTN","SDWLRSR",104,0)
 .S SDWLTY="" F  S SDWLTY=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY)) Q:SDWLTY=""  D  Q:POP  ;SD*5.3*412 added Quit for early exit
"RTN","SDWLRSR",105,0)
 ..S SDWLTNM=$$EXTERNAL^DILFD(409.3,4,,SDWLTY) W !,$E(SDWLTNM,1,15)
"RTN","SDWLRSR",106,0)
 ..S SDWLSCN="" F  S SDWLSCN=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN)) Q:SDWLSCN=""  D  Q:POP  ;SD*5.3*412 added Quit for early exit
"RTN","SDWLRSR",107,0)
 ...S (T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11)=0
"RTN","SDWLRSR",108,0)
 ...S SDWLSCNM="" F  S SDWLSCNM=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM)) Q:SDWLSCNM=""  D  Q:POP  D T1  Q:POP  ;SD*5.3*412 added Quit
"RTN","SDWLRSR",109,0)
 ....S SDWLPRI="" F  S SDWLPRI=$O(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI)) Q:SDWLPRI=""  D  Q:POP  ;SD*5.3*412 added Quit
"RTN","SDWLRSR",110,0)
 .....W !,?2,$E(SDWLSCNM,1,10)," ",$S(SDWLPRI="A":"ASAP",SDWLPRI="F":"FUTURE",1:"")
"RTN","SDWLRSR",111,0)
 .....S SDWLPR=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"PR")) W ?20,SDWLPR
"RTN","SDWLRSR",112,0)
 .....S SDWLCL=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"CL")) W ?27,SDWLCL
"RTN","SDWLRSR",113,0)
 .....S SDWLD=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLD")) W ?35,SDWLD
"RTN","SDWLRSR",114,0)
 .....S SDWLNC=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLNC")) W ?38,SDWLNC
"RTN","SDWLRSR",115,0)
 .....S SDWLSA=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLSA")) W ?42,SDWLSA
"RTN","SDWLRSR",116,0)
 .....S SDWLCC=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLCC")) W ?46,SDWLCC
"RTN","SDWLRSR",117,0)
 .....S SDWLNN=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLNN")) W ?50,SDWLNN
"RTN","SDWLRSR",118,0)
 .....S SDWLER=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"SDWLER")) W ?54,SDWLER
"RTN","SDWLRSR",119,0)
 .....S SDWLAD=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"AD")) W ?60,SDWLAD
"RTN","SDWLRSR",120,0)
 .....S SDWLRR=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"RR")) W ?66,SDWLRR
"RTN","SDWLRSR",121,0)
 .....S SDWLNR=+$G(^TMP("SDWLRSR1",$J,SDWLINS,SDWLTY,SDWLSCN,SDWLSCNM,SDWLPRI,"NR")) W ?75,SDWLNR
"RTN","SDWLRSR",122,0)
 .....S T1=T1+SDWLPR,TT1=TT1+SDWLPR
"RTN","SDWLRSR",123,0)
 .....S T2=T2+SDWLCL,TT2=TT2+SDWLCL
"RTN","SDWLRSR",124,0)
 .....S T3=T3+SDWLD,TT3=TT3+SDWLD
"RTN","SDWLRSR",125,0)
 .....S T4=T4+SDWLNC,TT4=TT4+SDWLNC
"RTN","SDWLRSR",126,0)
 .....S T5=T5+SDWLSA,TT5=TT5+SDWLSA
"RTN","SDWLRSR",127,0)
 .....S T6=T6+SDWLCC,TT6=TT6+SDWLCC
"RTN","SDWLRSR",128,0)
 .....S T7=T7+SDWLNN,TT7=TT7+SDWLNN
"RTN","SDWLRSR",129,0)
 .....S T8=T8+SDWLER,TT8=TT8+SDWLER
"RTN","SDWLRSR",130,0)
 .....S T9=T9+SDWLAD,TT9=TT9+SDWLAD
"RTN","SDWLRSR",131,0)
 .....S T10=T10+SDWLRR,TT10=TT10+SDWLRR
"RTN","SDWLRSR",132,0)
 .....S T11=T11+SDWLNR,TT11=TT11+SDWLNR
"RTN","SDWLRSR",133,0)
 .....I $Y>(IOSL-5) D:$D(SDWLSPT) SCR Q:POP  D HD,HD1  ;SD*5.3*412
"RTN","SDWLRSR",134,0)
 Q
"RTN","SDWLRSR",135,0)
SCR S DIR(0)="E" D ^DIR S:X="^" POP=1  ;SD*5.3*412
"RTN","SDWLRSR",136,0)
 Q
"RTN","SDWLRSR",137,0)
T1 ;
"RTN","SDWLRSR",138,0)
 W !,?18,"------",?25,"------",?32,"-----",?38,"--",?42,"--",?46,"--",?50,"--",?54,"--",?57,"-----",?63,"------",?71,"-------"
"RTN","SDWLRSR",139,0)
 W !,"Sub-Totals:"
"RTN","SDWLRSR",140,0)
 ;write sub-totals
"RTN","SDWLRSR",141,0)
 W ?20,T1,?27,T2,?35,T3,?38,T4,?42,T5,?46,T6,?50,T7,?54,T8,?60,T9,?66,T10,?75,T11,!
"RTN","SDWLRSR",142,0)
 S (T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11)=0
"RTN","SDWLRSR",143,0)
 I $Y>(IOSL-5) D:$D(SDWLSPT) SCR Q:POP  D HD,HD1  ;SD*5.3*412
"RTN","SDWLRSR",144,0)
 Q
"RTN","SDWLRSR",145,0)
T2 W !,"Institution Totals:"
"RTN","SDWLRSR",146,0)
 W ?20,TT1,?27,TT2,?35,TT3,?38,TT4,?42,TT5,?46,TT6,?50,TT7,?54,TT8,?60,TT9,?66,TT10,?75,TT11,!
"RTN","SDWLRSR",147,0)
 S (TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11)=0
"RTN","SDWLRSR",148,0)
 I $Y>(IOSL-5) D:$D(SDWLSPT) SCR Q:POP  D HD,HD1  ;SD*5.3*412
"RTN","SDWLRSR",149,0)
 Q
"RTN","SDWLRSR",150,0)
HD W:$D(IOF) @IOF S SDWLPG=SDWLPG+1 W !!,SDWLDTP,?80-$L("Wait List (Sch/PCMM) Stat Report")\2,"Wait List (Sch/PCMM) Stat Report",?65,"Page: ",SDWLPG
"RTN","SDWLRSR",151,0)
 W !,?80-$L("STARTED Date: ")\2,"STARTED Date: " S Y=$P(SDWLDATE,U,1) D DD^%DT W Y
"RTN","SDWLRSR",152,0)
 W !,?80-$L("FINISHED Date: ")\2,"FINISHED Date: " S Y=$P(SDWLDATE,U,2) D DD^%DT W Y
"RTN","SDWLRSR",153,0)
 Q
"RTN","SDWLRSR",154,0)
HD1 ;
"RTN","SDWLRSR",155,0)
 W !,?19,"PREV",?59,"#",?65,"#",?72,"# NOT"
"RTN","SDWLRSR",156,0)
 W !,"WAIT LIST TYPE",?18,"REMAIN",?25,"CLOSED",?32,"DEATH",?38,"NC",?42,"SA"
"RTN","SDWLRSR",157,0)
 W ?46,"CC",?50,"NN",?54,"ER",?57,"ADDED",?63,"REMAIN",?71,"REMOVED",!
"RTN","SDWLRSR",158,0)
 Q
"RTN","SDWLRSR",159,0)
END D EN^SDWLKIL
"RTN","SDWLRSR",160,0)
 K ^TMP("SDWLRSR1",$J),^TMP("SDWLRSR2",$J),SDWLY1,SDWLX1,SDWLRDT,CT,I
"RTN","SDWLRSR",161,0)
 K T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,SDWLAD,SDWLBD,SDWLCC,SDWLCT,SDWLDFDT,SDWLDP,SDWLED,SDWLER,SDWLERR,SDWLFLD,X1,X2,DATE
"RTN","SDWLRSR",162,0)
 K TT1,TT2,TT3,TT4,TT5,TT6,TT7,TT8,TT9,TT10,TT11,SDWLINSN,SDWLINST,SDWLNC,SDWLNN,SDWLNR,SDWLOFDT,SDWLOK1,SDWLOK2,SDWLTYPN
"RTN","SDWLRSR",163,0)
 K SDWLOK3,SDWLPR,SDWLPR,SDWLPROM,SDWLRE,SDWLRFDT,SDWLRR,SDWLSA,SDWLSCN,SDWLSCNM,SDWLTASK,SDWLTK,SDWLTNM,SDWLTYNM,SDWLTYP,X4
"RTN","SDWLRSR",164,0)
 Q
"VER")
8.0^22.0
"BLD",6158,6)
^SEQ #344
**END**
**END**

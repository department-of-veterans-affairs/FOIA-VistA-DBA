Released PSA*3*36 SEQ #27
Extracted from mail message
**KIDS**:PSA*3.0*36^

**INSTALL NAME**
PSA*3.0*36
"BLD",5195,0)
PSA*3.0*36^DRUG ACCOUNTABILITY^0^3040120^y
"BLD",5195,1,0)
^^11^11^3040120^
"BLD",5195,1,1,0)
This patch will fix two undefined errors in menu option Edit Verified
"BLD",5195,1,2,0)
Invoices.
"BLD",5195,1,3,0)
An undefined error occurs when editing a verified invoice if the user 
"BLD",5195,1,4,0)
changes the name of a drug and the order units are different.  This error
"BLD",5195,1,5,0)
occurs when prompting for the Dispense Units per Order Unit.
"BLD",5195,1,6,0)
 
"BLD",5195,1,7,0)
When the user edits a line item and changes the drug name, the invoiced
"BLD",5195,1,8,0)
quantity is updated in the Drug File (#50); subtracted from the invoiced 
"BLD",5195,1,9,0)
item and added to the new item.  If the invoiced line item is not in the
"BLD",5195,1,10,0)
Drug File (#50), an undefined error occurs when trying to subtract the
"BLD",5195,1,11,0)
invoiced quantity.
"BLD",5195,4,0)
^9.64PA^^
"BLD",5195,"KRN",0)
^9.67PA^8989.52^19
"BLD",5195,"KRN",.4,0)
.4
"BLD",5195,"KRN",.401,0)
.401
"BLD",5195,"KRN",.402,0)
.402
"BLD",5195,"KRN",.403,0)
.403
"BLD",5195,"KRN",.5,0)
.5
"BLD",5195,"KRN",.84,0)
.84
"BLD",5195,"KRN",3.6,0)
3.6
"BLD",5195,"KRN",3.8,0)
3.8
"BLD",5195,"KRN",9.2,0)
9.2
"BLD",5195,"KRN",9.8,0)
9.8
"BLD",5195,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5195,"KRN",9.8,"NM",1,0)
PSAVERA^^0^B55019574
"BLD",5195,"KRN",9.8,"NM","B","PSAVERA",1)

"BLD",5195,"KRN",19,0)
19
"BLD",5195,"KRN",19.1,0)
19.1
"BLD",5195,"KRN",101,0)
101
"BLD",5195,"KRN",409.61,0)
409.61
"BLD",5195,"KRN",771,0)
771
"BLD",5195,"KRN",870,0)
870
"BLD",5195,"KRN",8989.51,0)
8989.51
"BLD",5195,"KRN",8989.52,0)
8989.52
"BLD",5195,"KRN",8994,0)
8994
"BLD",5195,"KRN","B",.4,.4)

"BLD",5195,"KRN","B",.401,.401)

"BLD",5195,"KRN","B",.402,.402)

"BLD",5195,"KRN","B",.403,.403)

"BLD",5195,"KRN","B",.5,.5)

"BLD",5195,"KRN","B",.84,.84)

"BLD",5195,"KRN","B",3.6,3.6)

"BLD",5195,"KRN","B",3.8,3.8)

"BLD",5195,"KRN","B",9.2,9.2)

"BLD",5195,"KRN","B",9.8,9.8)

"BLD",5195,"KRN","B",19,19)

"BLD",5195,"KRN","B",19.1,19.1)

"BLD",5195,"KRN","B",101,101)

"BLD",5195,"KRN","B",409.61,409.61)

"BLD",5195,"KRN","B",771,771)

"BLD",5195,"KRN","B",870,870)

"BLD",5195,"KRN","B",8989.51,8989.51)

"BLD",5195,"KRN","B",8989.52,8989.52)

"BLD",5195,"KRN","B",8994,8994)

"BLD",5195,"QUES",0)
^9.62^^
"BLD",5195,"REQB",0)
^9.611^1^1
"BLD",5195,"REQB",1,0)
PSA*3.0*21^1
"BLD",5195,"REQB","B","PSA*3.0*21",1)

"MBREQ")
0
"PKG",487,-1)
1^1
"PKG",487,0)
DRUG ACCOUNTABILITY^PSA^Drug Accountability Inventory and Tracking module.
"PKG",487,20,0)
^9.402P^^
"PKG",487,22,0)
^9.49I^1^1
"PKG",487,22,1,0)
3.0^2971024^2981028^66481
"PKG",487,22,1,"PAH",1,0)
36^3040120^101029
"PKG",487,22,1,"PAH",1,1,0)
^^11^11^3040120
"PKG",487,22,1,"PAH",1,1,1,0)
This patch will fix two undefined errors in menu option Edit Verified
"PKG",487,22,1,"PAH",1,1,2,0)
Invoices.
"PKG",487,22,1,"PAH",1,1,3,0)
An undefined error occurs when editing a verified invoice if the user 
"PKG",487,22,1,"PAH",1,1,4,0)
changes the name of a drug and the order units are different.  This error
"PKG",487,22,1,"PAH",1,1,5,0)
occurs when prompting for the Dispense Units per Order Unit.
"PKG",487,22,1,"PAH",1,1,6,0)
 
"PKG",487,22,1,"PAH",1,1,7,0)
When the user edits a line item and changes the drug name, the invoiced
"PKG",487,22,1,"PAH",1,1,8,0)
quantity is updated in the Drug File (#50); subtracted from the invoiced 
"PKG",487,22,1,"PAH",1,1,9,0)
item and added to the new item.  If the invoiced line item is not in the
"PKG",487,22,1,"PAH",1,1,10,0)
Drug File (#50), an undefined error occurs when trying to subtract the
"PKG",487,22,1,"PAH",1,1,11,0)
invoiced quantity.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSAVERA")
0^1^B55019574
"RTN","PSAVERA",1,0)
PSAVERA ;BHM/DBM - Change verified invoice data;28DEC99
"RTN","PSAVERA",2,0)
 ;;3.0; DRUG ACCOUNTABILITY/INVENTORY INTERFACE;**21,36**; 10/24/97
"RTN","PSAVERA",3,0)
 ;
"RTN","PSAVERA",4,0)
 ;References to ^DIC(51.5 are covered by IA #1931
"RTN","PSAVERA",5,0)
 ;References to ^PSDRUG( are covered by IA #2095
"RTN","PSAVERA",6,0)
 D Q
"RTN","PSAVERA",7,0)
 D HOME^%ZIS S XX="VERIFIED INVOICE ALTERATION SCREEN" W @IOF,!!,?((IOM/2)-($L(XX)/2)),XX,!!
"RTN","PSAVERA",8,0)
ORDR ;Get Order Number
"RTN","PSAVERA",9,0)
 S DIC(0)="AEQMZ",DIC("A")="Select Order Number: ",DIC="^PSD(58.811," D ^DIC K DIC G Q:+Y'>0 S PSAIEN=+Y,PSAORD=$P(Y,U,2)
"RTN","PSAVERA",10,0)
 ;
"RTN","PSAVERA",11,0)
INV ;Get Invoice Number
"RTN","PSAVERA",12,0)
 S DIC(0)="AEQMZ",DIC("A")="Select Invoice Number: ",DIC="^PSD(58.811,"_PSAIEN_",1,",D="ASTAT" D ^DIC K DIC G Q:+Y'>0 S PSAIEN1=+Y,PSAINV=$P(Y,U,2)
"RTN","PSAVERA",13,0)
 ;
"RTN","PSAVERA",14,0)
 S DATA=$G(^PSD(58.811,PSAIEN,1,PSAIEN1,0))
"RTN","PSAVERA",15,0)
 S PSALOC=$S($P(DATA,"^",12)'="":$P(DATA,"^",12),1:$P(DATA,"^",5)) I $G(PSALOC)="" S PSALOC="No Location identified"
"RTN","PSAVERA",16,0)
 D ^PSAVERA1
"RTN","PSAVERA",17,0)
 ;
"RTN","PSAVERA",18,0)
 K DATA,PSAITM,LINENUM,X,X1,X2,X3,DIC,DA,DR D HDR
"RTN","PSAVERA",19,0)
DISP S PSAITM=$S('$D(PSAITM):$O(INVARRAY(PSAORD,PSAINV,0)),1:$O(INVARRAY(PSAORD,PSAINV,PSAITM))) G LINEASK:PSAITM'>0 S LINENUM=$G(LINENUM)+1
"RTN","PSAVERA",20,0)
 S DATA=$G(INVARRAY(PSAORD,PSAINV,PSAITM))
"RTN","PSAVERA",21,0)
 S PSAOU=$P(DATA,"^",4) I $G(PSAOU) S PSAOU(1)=$P($G(^DIC(51.5,$P(DATA,"^",4),0)),"^") ;Curent Order Unit
"RTN","PSAVERA",22,0)
 W !,PSAITM,?10,$S($P($P(DATA,"^",1),"~",1)'>0:$P($P(DATA,"^",1),"~",1),1:$P($P(DATA,"^",1),"~",2)),?45,$S($G(PSAOU)="":"none",$G(PSAOU(1))'="":$G(PSAOU(1)),1:$G(PSAAOU)),?55,$J($P($G(DATA),"^",2),4),?61,$P(DATA,"^",5)
"RTN","PSAVERA",23,0)
 I IOST["C-",$Y>(IOSL-5) S DIR(0)="E" D ^DIR G Q:$G(DUOUT)=1 D HDR
"RTN","PSAVERA",24,0)
 G DISP
"RTN","PSAVERA",25,0)
LINEASK ;ask for line number
"RTN","PSAVERA",26,0)
 W !,"Enter the corresponding item number to edit: " R AN:DTIME I AN["^"!(AN="") G Q
"RTN","PSAVERA",27,0)
 I AN<1!(AN>LINENUM) W !,"Enter a number between 1 & ",LINENUM,! G LINEASK
"RTN","PSAVERA",28,0)
 I "?"[AN W !,"Select the number that corresponds to the line item that needs editing",! K AN G LINEASK
"RTN","PSAVERA",29,0)
 S DATA=$G(INVARRAY(PSAORD,PSAINV,AN))
"RTN","PSAVERA",30,0)
 S PSALINE=AN,PSAIN="NADA" I '$D(^PSD(58.811,PSAIEN,1,PSAIEN1,1,PSALINE,0)) W !,"Invalid line selection." G LINEASK
"RTN","PSAVERA",31,0)
 S PSADATA=^PSD(58.811,PSAIEN,1,PSAIEN1,1,PSALINE,0),PSASUP=0
"RTN","PSAVERA",32,0)
 S PSACS=0 S:+$P(PSADATA,"^",10) PSACS=$G(PSACS)+1
"RTN","PSAVERA",33,0)
 S PSANDC=$P(PSADATA,"^",11)
"RTN","PSAVERA",34,0)
 S PSALINEN="" D VERDISP^PSAUTL4 W !,PSASLN,!
"RTN","PSAVERA",35,0)
 S PSAVEND=$P(^PSD(58.811,PSAIEN,0),"^",2)
"RTN","PSAVERA",36,0)
 ;
"RTN","PSAVERA",37,0)
DRG W !,"Select (D)rug or (O)rder Unit " R AN:DTIME G Q:AN["^"!(AN="") W $S("Dd"[AN:"rug","oO"[AN:"rder Unit",1:"??") I "DdOo"'[AN W !,"Enter a 'D' to edit the Drug, or 'O' to edit the order unit",! K AN G DRG
"RTN","PSAVERA",38,0)
 I "Dd"'[AN G ^PSAVERA3
"RTN","PSAVERA",39,0)
 ;Get either new name of drug or supply item description
"RTN","PSAVERA",40,0)
 S PSABEFOR=$P(DATA,"~",1),PSABEFOR(1)=$S(PSABEFOR'?.N:PSABEFOR,1:$P($P(DATA,"^"),"~",2))
"RTN","PSAVERA",41,0)
 S PSABEFOR("NDC")=$P(PSADATA,"^",11)
"RTN","PSAVERA",42,0)
DRGAGN D
"RTN","PSAVERA",43,0)
 .S X1=0 F  S X1=$O(^PSDRUG(PSABEFOR,1,X1)) Q:X1'>0  S DATA=$G(^PSDRUG(PSABEFOR,1,X1,0)) I $P(DATA,"^",2)=PSABEFOR("NDC") S PSABEFOR("SYNNODE")=X1
"RTN","PSAVERA",44,0)
 D PSANDC1^PSAHELP S PSADASH=PSANDCX K PSANDCX
"RTN","PSAVERA",45,0)
 I $G(PSABEFOR("SYNNODE"))="",$E(PSABEFOR("NDC"))'="S" S PSABEFOR("NDC")="S"_PSABEFOR("NDC") G DRGAGN ;may be supply, try again
"RTN","PSAVERA",46,0)
 I $G(PSABEFOR("SYNNODE"))'="" S PSASUB=PSABEFOR("SYNNODE") D
"RTN","PSAVERA",47,0)
 .S DATA=$G(^PSDRUG(PSABEFOR,1,PSASUB,0)),PSAOU=$P(DATA,"^",5),PSAPOU=$P(DATA,"^",6),PSADUOU=$P(DATA,"^",7),PSAPDUOU=$P(DATA,"^",8)
"RTN","PSAVERA",48,0)
 .S PSADU=$P($G(^PSDRUG(PSABEFOR,660)),"^",8)
"RTN","PSAVERA",49,0)
 I ($G(PSAOU)=""!$G(PSAPOU)=""!$G(PSADUOU)=""!$G(PSAPDUOU)="") W !!,"Sorry, I could not find the necessary information to change the drug selection.",! G Q
"RTN","PSAVERA",50,0)
 W !,"Current Drug : ",PSABEFOR(1)
"RTN","PSAVERA",51,0)
DRG1 S PSAGAIN=0,DIC("A")="Select name of Correct Drug: ",PSABEFOR=PSADRG,DIC(0)="AEQMZ",DIC="^PSDRUG(" D ^DIC K DIC G Q:PSAOUT
"RTN","PSAVERA",52,0)
 I $G(DTOUT)!($G(DUOT)) S PSAOUT=1 Q
"RTN","PSAVERA",53,0)
 S (PSADJ,PSADRG)=+Y
"RTN","PSAVERA",54,0)
 W !!,"Comparing drug file data..."
"RTN","PSAVERA",55,0)
 I $P($G(^PSDRUG(PSADRG,660)),"^",2)'=$G(PSAOU) W !,"The Order Units are different between these two drugs."
"RTN","PSAVERA",56,0)
 I $P($G(^PSDRUG(PSADRG,660)),"^",8)'=$G(PSADU) W !,"Please Enter an appropriate Dispense Unit" S DIE="^PSDRUG(",DA=PSADRG,DR="14.5" D ^DIE S PSADU=$P(^PSDRUG(PSADRG,660),"^",8)
"RTN","PSAVERA",57,0)
 ;VMP OIFO BAY PINES;VGF;PSA*3.0*36
"RTN","PSAVERA",58,0)
 I $P($G(^PSDRUG(PSADRG,660)),"^",5)'=$G(PSADUOU) W !,"Please enter the appropriate Dispense Units per order unit" S DIE="^PSDRUG(",DA=PSADRG,DR="15" D ^DIE S PSADUOU=$P(^PSDRUG(PSADRG,660),"^",5)
"RTN","PSAVERA",59,0)
 K DIE,DA,DR
"RTN","PSAVERA",60,0)
ASK R !!,"Are you sure about this ?  NO// ",AN:DTIME G Q:AN["^"!(AN="")
"RTN","PSAVERA",61,0)
 S AN=$E(AN) I "yYnN"'[AN W !,"Answer yes, and the data on file for the current drug will be transferred",!,"to the new drug selection.",!,"That includes Order Unit, Dispense Unit, Dispense Units per Order Unit, etc.",!! G ASK
"RTN","PSAVERA",62,0)
 ;VMP OIFO BAY PINES;VGF;PSA*3.0*36
"RTN","PSAVERA",63,0)
 S PSAAFTER=PSADRG,PSADRG=PSABEFOR
"RTN","PSAVERA",64,0)
 I $D(^PSDRUG(PSADRG)) D
"RTN","PSAVERA",65,0)
 .W !,"Removing "_$G(PSAQTY)_" from "_PSABEFOR(1)
"RTN","PSAVERA",66,0)
 .S FMDATA=$P($G(^PSDRUG(PSADRG,660.1)),"^")-PSAQTY
"RTN","PSAVERA",67,0)
 .S DIE="^PSDRUG(",DA=PSADRG,DR="50////^S X="_FMDATA D ^DIE K FMDATA
"RTN","PSAVERA",68,0)
 S PSADRG=PSAAFTER
"RTN","PSAVERA",69,0)
 I $G(PSAPOU)="",$G(PSAPRICE)'="" S PSAPOU=PSAPRICE
"RTN","PSAVERA",70,0)
 W !,"Adding "_$G(PSAQTY)_" to "_$P($G(^PSDRUG(PSADRG,0)),"^")
"RTN","PSAVERA",71,0)
 S FMDATA=$P($G(^PSDRUG(PSADRG,660.1)),"^")+PSAQTY
"RTN","PSAVERA",72,0)
 S DIE="^PSDRUG(",DA=PSADRG,DR="50////^S X="_FMDATA D ^DIE K FMDATA
"RTN","PSAVERA",73,0)
 W !,"Entering new drug selection as an adjustment."
"RTN","PSAVERA",74,0)
 S PSAREA="",PSADJFLD="D",PSADJ=PSADRG D RECORD^PSAVER2
"RTN","PSAVERA",75,0)
 D 50^PSAVER7
"RTN","PSAVERA",76,0)
FILE ;File data in 58.8
"RTN","PSAVERA",77,0)
 ;PSALOC= Either PSALOC or PSALOCB
"RTN","PSAVERA",78,0)
 S PSADUREC=PSAQTY
"RTN","PSAVERA",79,0)
 D NOW^%DTC S PSADT=+$E(%,1,14)
"RTN","PSAVERA",80,0)
 I '$D(^PSD(58.8,PSALOC,1,PSADRG,0)) D
"RTN","PSAVERA",81,0)
 .S:'$D(^PSD(58.8,PSALOC,1,0)) DIC("P")=$P(^DD(58.8,10,0),"^",2)
"RTN","PSAVERA",82,0)
 .S DA(1)=PSALOC,DIC="^PSD(58.8,"_DA(1)_",1,",(DA,DINUM,XX)=PSADRG,DIC(0)="L",DLAYGO=58.8
"RTN","PSAVERA",83,0)
 .F  L +^PSD(58.8,PSALOC,0):0 I  Q
"RTN","PSAVERA",84,0)
 .D FILE^DICN L -^PSD(58.8,PSALOC,0) K DIC,DA,DLAYGO
"RTN","PSAVERA",85,0)
 F  L +^PSD(58.8,PSALOC,1,PSADRG,0):0 I  Q
"RTN","PSAVERA",86,0)
 S PSABAL=$P($G(^PSD(58.8,PSALOC,1,PSADRG,0)),"^",4)
"RTN","PSAVERA",87,0)
 I $P($G(^PSD(58.8,PSALOC,1,PSADRG,0)),"^",1)'=PSADRG S $P(^PSD(58.8,PSALOC,1,PSADRG,0),"^",1)=PSADRG
"RTN","PSAVERA",88,0)
 S $P(^PSD(58.8,PSALOC,1,PSADRG,0),"^",4)=PSADUREC+PSABAL
"RTN","PSAVERA",89,0)
 I +$P($G(^PSD(58.8,PSALOC,0)),"^",14) D
"RTN","PSAVERA",90,0)
 .I PSASTOCK'=$P(^PSD(58.8,PSALOC,1,PSADRG,0),"^",3) S $P(^PSD(58.8,PSALOC,1,PSADRG,0),"^",3)=PSASTOCK
"RTN","PSAVERA",91,0)
 .I PSAREORD'=$P(^PSD(58.8,PSALOC,1,PSADRG,0),"^",5) S $P(^PSD(58.8,PSALOC,1,PSADRG,0),"^",5)=PSAREORD
"RTN","PSAVERA",92,0)
 S:'$D(^PSD(58.8,PSALOC,1,PSADRG,5,0)) DIC("P")=$P(^DD(58.8001,20,0),"^",2)
"RTN","PSAVERA",93,0)
 I '$D(^PSD(58.8,PSALOC,1,PSADRG,5,$E(DT,1,5)*100,0)) D
"RTN","PSAVERA",94,0)
 .S DIC="^PSD(58.8,"_PSALOC_",1,"_PSADRG_",5,",DIC(0)="L",DIC("DR")="1////^S X=$G(PSABAL)",(X,DINUM)=$E(DT,1,5)*100,DA(2)=PSALOC,DA(1)=PSADRG,DLAYGO=58.8 D ^DIC K DIC
"RTN","PSAVERA",95,0)
 .S X="T-1M" D ^%DT S DIC="^PSD(58.8,"_PSALOC_",1,"_PSADRG_",5,",DIC(0)="L",(X,DINUM)=$E(Y,1,5)*100 D ^DIC K DIC,DLAYGO S DA=+Y
"RTN","PSAVERA",96,0)
 .S DA(2)=PSALOC,DA(1)=PSADRG,DIE="^PSD(58.8,"_DA(2)_",1,"_DA(1)_",5,",DR="3////^S X=$G(PSABAL)" D ^DIE K DIE
"RTN","PSAVERA",97,0)
 S DA(2)=PSALOC,DA(1)=PSADRG,DIE="^PSD(58.8,"_DA(2)_",1,"_DA(1)_",5,",DA=$E(DT,1,5)*100,DR="5////^S X="_($P($G(^(0)),"^",3)+PSADUREC) D ^DIE K DIE
"RTN","PSAVERA",98,0)
 L -^PSD(58.8,PSALOC,1,PSADRG,0)
"RTN","PSAVERA",99,0)
 W !,"updating pharmacy location file."
"RTN","PSAVERA",100,0)
FILE581 ;Update transaction file
"RTN","PSAVERA",101,0)
 S PSAVDUZ=DUZ
"RTN","PSAVERA",102,0)
FIND S PSAT=$P(^PSD(58.81,0),"^",3)+1 I $D(^PSD(58.81,PSAT)) S $P(^PSD(58.81,0),"^",3)=$P(^PSD(58.81,0),"^",3)+1 G FIND
"RTN","PSAVERA",103,0)
 S DIC="^PSD(58.81,",DIC(0)="L",DLAYGO=58.81,(DINUM,X)=PSAT D ^DIC K DIC,DINUM,DLAYGO L -^PSD(58.81,0)
"RTN","PSAVERA",104,0)
 S DIE="^PSD(58.81,",DA=PSAT,DR="1////1;2////^S X=PSALOC;3////^S X=PSADT;4////^S X=PSADRG;5////^S X=PSADUREC;6////^S X=PSAVDUZ;9////^S X=PSABAL;71////^S X=PSAINV;106////^S X=PSAORD"
"RTN","PSAVERA",105,0)
 I $G(PSACS)>0 S DR=DR_";100////^S X=PSACS"
"RTN","PSAVERA",106,0)
 F  L +^PSD(58.81,DA,0):0 I  Q
"RTN","PSAVERA",107,0)
 D ^DIE L -^PSD(58.81,DA,0) K DIE W !,"updating transaction file." Q
"RTN","PSAVERA",108,0)
 ;
"RTN","PSAVERA",109,0)
HDR W @IOF,!?25,"EDIT VERIFIED INVOICED ITEM SCREEN",!,PSASLN,!
"RTN","PSAVERA",110,0)
 W !,?44,"Order",!,"#",?10,"Drug/Item Name",?45,"Unit",?56,"Qnty.",?67,"NDC",!,PSASLN,! Q
"RTN","PSAVERA",111,0)
Q K AN,D,DA,DATA,DIC,DIR,INVARRAY,LINENUM,PSA50IEN,PSABAL,PSABEFOR,PSACS,PSADATA,PSADJ,PSADJFLD,PSADRG,PSADT,PSADUREC,PSAGAIN,PSAIEN,PSAIEN1,PSAIN,PSAINV,PSALINE,PSALINEN
"RTN","PSAVERA",112,0)
 K PSALOC,PSANDC,PSAORD,PSAOUT,PSAQTY,PSAREA,PSAREORD,PSASLN,PSASTOCK,PSASUB,PSASUP,PSASUPP,PSAT,PSAVER,X,X1,X2,X3,XX,XXX,Y
"RTN","PSAVERA",113,0)
 Q
"VER")
8.0^22
**END**
**END**

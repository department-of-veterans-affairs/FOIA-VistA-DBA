$TXT Created by CURTIS,RICHARD L at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 01/26/04 at 10:00
=============================================================================
Run Date: JUN 08, 2004                     Designation: SD*5.3*338
Package : SD - SCHEDULING                     Priority: Mandatory
Version : 5.3       SEQ #295                    Status: Released
                  Compliance Date: JUL 09, 2004
=============================================================================

Associated patches: (v)SD*5.3*66   <<= must be installed BEFORE `SD*5.3*338'

Subject: UNDEF VARIABLE ERROR IN INCOMPLETE ENCOUNTER ERROR REPORT

Category: 
  - Routine

Description:
============

 This patch addresses the Undefined Variable error that periodically 
 occurs when running the Incomplete Encounter Error Report.
  
 ASSOCIATED E3R(s):
 ==================
 N/A
  
 ASSOCIATED NOIS:
 ================
 STX-0100-70944   UNDEF BLD1+39^SCRPI01
  
  
 PARTICIPATING TEST SITES:
 =========================
 Big Spring, TX 
 N. Chicago, IL 
 Lexington, KY
 Manchester, NH
  
 NOIS/PROBLEM OVERVIEW:
 ======================
 1.  STX-0100-70944   UNDEF BLD1+39^SCRPI01
  
     Problem:
     --------
     When users run the Incomplete Encounter Error Report, they 
     periodically receive an Undefined Variable error because an IEN
     being extracted from the "AEDT" cross reference in file 409.75
     does not have a corresponding record in that file.
  
     Resolution:
     -----------
     This patch will modify the existing code to check if a record
     in 409.75 is valid before trying to use it.  When the Incomplete
     Encounter Error Report is run and Error Code is selected as
     either the First Selection Criteria or the Second Selection
     Criteria, this error will periodically occur.  So, changes will
     be made to check both.
  
 TECHNICAL:
 ==========
 Routine SCRPI01 will be modified at line tags BLD1+34 and BLD1+39,
 as follows:
  
 BLD1+34 - From:
  
 I SDSEL1="ERR",$S(VAUER:0,$D(VAUER($P(^SD(409.75,SDE,0),U,2))):0,
 1:1) Q
  
           To:
  
 I SDSEL1="ERR" Q:'$D(^SD(409.75,SDE,0))  I $S(VAUER:0,$D(VAUER($P(^SD(
 409.75,SDE,0),U,2))):0,1:1) Q
  
 BLD1+39 - From:
  
 I SDSEL2="ERR",$S(VAUER:0,$D(VAUER($P(^SD(409.75,SDE,0),U,2))):0,
 1:1) Q
  
           To:
  
 I SDSEL2="ERR" Q:'$D(^SD(409.75,SDE,0))  I $S(VAUER:0,$D(VAUER($P(^SD(
 409.75,SDE,0),U,2))):0,1:1) Q
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
      <tab>;;5.3;Scheduling;**[patch list]**;AUG 13, 1993
  
                            CHECK^XTSUMBLD results
 Routine name      Before Patch          After Patch         Patch List
 ============      ============          ===========         ==========
 SCRPI01                8982029              9403047           66,338
  
  
 INSTALLATION INSTRUCTIONS:
 ==========================
  
 This patch can be installed at any time.  Users do not need to be off
 the system. If the patch is installed during the normal workday, it is 
 recommended that the following menu option (File #19) and all of its
 descendants be disabled to prevent possible conflicts while running the 
 KIDS install. Disable the following:
  
 Incomplete Encounter Error Report   [SCENI IEMM ERROR REPORT]
  
 Other VISTA users will not be effected.  Installation should 
 take less than 5 minutes.
  
 1.  LOAD TRANSPORT GLOBAL
     ---------------------
     Choose the PackMan message containing this patch and invoke the
     INSTALL/CHECK MESSAGE PackMan option.
  
 2.  DISABLE ROUTINE MAPPING  (DSM for open VMS sites only)
     -----------------------
     Disable routine mapping on all systems for the routines listed in
     the routine summary.
     NOTE:  If the routines included in this patch are not currently in
     your mapped routine set, please skip this step.
  
 3.  START UP KIDS
     -------------
     Start up the Kernel Installation and Distribution System Menu
     [XPD MAIN]:
  
           Edits and Distribution ...
           Utilities ...
           Installation ...
  
     Select Kernel Installation & Distribution System Option: INStallation
                                                              ---
  
     1      Load a Distribution
     2      Verify Checksums in Transport Global
     3      Print Transport Global
     4      Compare Transport Global to Current System
     5      Backup a Transport Global
     6      Install Package(s)
            Restart Install of Package(s)
            Unload a Distribution
  
 4.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter SD*5.3*338):
  
     a.  Backup a Transport Global - This option will create a backup
         message of any routines exported with the patch.  It will NOT
         backup any other changes such as DDs or templates.
  
     b.  Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch
         (routines, DDs, templates, etc.).
  
     c.  Verify Checksums in Transport Global - This option will ensure
         the integrity of the routines that are in the transport global.
  
 5.  Use the Install Package(s) option and select the package SD*5.3*338.
  
     a.  When prompted "Want KIDS to INHIBIT LOGONs during the
         install? YES//" respond NO.
  
     b.  When prompted "Want to DISABLE Scheduled Options, Menu
         Options, and Protocols? YES//" respond YES.
  
         1) When prompted "Enter options you wish to mark as "Out of
            Order":" enter the following option:
  
            Incomplete Encounter Error Report  [SCENI IEMM ERROR REPORT]
  
         2) When prompted "Enter protocols you wish to mark as "Out of
            Order":" just press <return>.
  
 6.  REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
     =========================
     Optional - Include the routines distributed with this patch in
     the mapped routine set.
  
     NOTE:  This step is only necessary if you performed step 2 or if
     you wish to include the routines in your mapped set.

Routine Information:
====================

Routine Name:
  - SCRPI01


Routine Checksum:

=============================================================================
User Information:
Entered By  : CURTIS,RICHARD                Date Entered  : JAN 09, 2004
Completed By: BAUMAN,HELENE                 Date Completed: JUN 03, 2004
Released By : BENBOW,PHYLLIS O              Date Released : JUN 08, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

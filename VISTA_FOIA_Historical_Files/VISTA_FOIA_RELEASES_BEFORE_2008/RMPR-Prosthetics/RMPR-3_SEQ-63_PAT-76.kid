Released RMPR*3*76 SEQ #63
Extracted from mail message
**KIDS**:RMPR*3.0*76^

**INSTALL NAME**
RMPR*3.0*76
"BLD",4305,0)
RMPR*3.0*76^PROSTHETICS^0^3030514^y
"BLD",4305,1,0)
^^1^1^3030509^^^^
"BLD",4305,1,1,0)
2003 HCPCS UPDATE
"BLD",4305,4,0)
^9.64PA^^
"BLD",4305,"ABPKG")
n
"BLD",4305,"KRN",0)
^9.67PA^8989.52^19
"BLD",4305,"KRN",.4,0)
.4
"BLD",4305,"KRN",.401,0)
.401
"BLD",4305,"KRN",.402,0)
.402
"BLD",4305,"KRN",.403,0)
.403
"BLD",4305,"KRN",.5,0)
.5
"BLD",4305,"KRN",.84,0)
.84
"BLD",4305,"KRN",3.6,0)
3.6
"BLD",4305,"KRN",3.8,0)
3.8
"BLD",4305,"KRN",9.2,0)
9.2
"BLD",4305,"KRN",9.8,0)
9.8
"BLD",4305,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",4305,"KRN",9.8,"NM",1,0)
RMPRPS34^^0^B32475045
"BLD",4305,"KRN",9.8,"NM",2,0)
RMPRPS35^^0^B61242982
"BLD",4305,"KRN",9.8,"NM",3,0)
RMPRPS36^^0^B36323463
"BLD",4305,"KRN",9.8,"NM","B","RMPRPS34",1)

"BLD",4305,"KRN",9.8,"NM","B","RMPRPS35",2)

"BLD",4305,"KRN",9.8,"NM","B","RMPRPS36",3)

"BLD",4305,"KRN",19,0)
19
"BLD",4305,"KRN",19.1,0)
19.1
"BLD",4305,"KRN",101,0)
101
"BLD",4305,"KRN",409.61,0)
409.61
"BLD",4305,"KRN",771,0)
771
"BLD",4305,"KRN",870,0)
870
"BLD",4305,"KRN",8989.51,0)
8989.51
"BLD",4305,"KRN",8989.52,0)
8989.52
"BLD",4305,"KRN",8994,0)
8994
"BLD",4305,"KRN","B",.4,.4)

"BLD",4305,"KRN","B",.401,.401)

"BLD",4305,"KRN","B",.402,.402)

"BLD",4305,"KRN","B",.403,.403)

"BLD",4305,"KRN","B",.5,.5)

"BLD",4305,"KRN","B",.84,.84)

"BLD",4305,"KRN","B",3.6,3.6)

"BLD",4305,"KRN","B",3.8,3.8)

"BLD",4305,"KRN","B",9.2,9.2)

"BLD",4305,"KRN","B",9.8,9.8)

"BLD",4305,"KRN","B",19,19)

"BLD",4305,"KRN","B",19.1,19.1)

"BLD",4305,"KRN","B",101,101)

"BLD",4305,"KRN","B",409.61,409.61)

"BLD",4305,"KRN","B",771,771)

"BLD",4305,"KRN","B",870,870)

"BLD",4305,"KRN","B",8989.51,8989.51)

"BLD",4305,"KRN","B",8989.52,8989.52)

"BLD",4305,"KRN","B",8994,8994)

"BLD",4305,"QUES",0)
^9.62^^
"BLD",4305,"REQB",0)
^9.611^2^2
"BLD",4305,"REQB",1,0)
RMPR*3.0*69^1
"BLD",4305,"REQB",2,0)
ICPT*6.0*13^1
"BLD",4305,"REQB","B","ICPT*6.0*13",2)

"BLD",4305,"REQB","B","RMPR*3.0*69",1)

"MBREQ")
0
"PKG",101,-1)
1^1
"PKG",101,0)
PROSTHETICS^RMPR^PROSTHETICS VERSION 3.0 ALPHA
"PKG",101,20,0)
^9.402P^^
"PKG",101,22,0)
^9.49I^1^1
"PKG",101,22,1,0)
3.0^2960209^2960214
"PKG",101,22,1,"PAH",1,0)
76^3030514^28
"PKG",101,22,1,"PAH",1,1,0)
^^1^1^3030514
"PKG",101,22,1,"PAH",1,1,1,0)
2003 HCPCS UPDATE
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","RMPRPS34")
0^1^B32475045
"RTN","RMPRPS34",1,0)
RMPRPS34 ;HISC/RVD/HNC -Check 661.1 and Save Inventory flag ;5/6/03  07:35
"RTN","RMPRPS34",2,0)
 ;;3.0;PROSTHETICS;**34,39,48,58,64,69,76**,FEB 09,1996
"RTN","RMPRPS34",3,0)
 ;RVD patch #76 - 2003 HCPCS update
"RTN","RMPRPS34",4,0)
 ;                replace inactive CPT Code in #660, starting 1/1/03
"RTN","RMPRPS34",5,0)
 Q
"RTN","RMPRPS34",6,0)
EN ;entry point
"RTN","RMPRPS34",7,0)
 S U="^",RMEXIT=0
"RTN","RMPRPS34",8,0)
 ;Check on 2907, shipping and null 2804 (patch 48)
"RTN","RMPRPS34",9,0)
 ;Check on 2972, shipping and null 2973 (patch 58)
"RTN","RMPRPS34",10,0)
 ;Check on 3475, shipping and null 3476 (patch 69)
"RTN","RMPRPS34",11,0)
 ;check for the last entry and next available entry.
"RTN","RMPRPS34",12,0)
 ;
"RTN","RMPRPS34",13,0)
 ;Patch 76
"RTN","RMPRPS34",14,0)
 ;Wheelchair HCPCS not grouped together prior to calculation flag update.
"RTN","RMPRPS34",15,0)
 ;hnc/April 2003
"RTN","RMPRPS34",16,0)
 ;Wheelchair HCPCS list under HLST
"RTN","RMPRPS34",17,0)
 ;
"RTN","RMPRPS34",18,0)
 S RM661=$P($G(^RMPR(661.1,0)),U,3) D:RM661'=3708!($D(^RMPR(661.1,3709)))  G:$G(RMEXIT) EXIT
"RTN","RMPRPS34",19,0)
 . W !,"*********************************************************"
"RTN","RMPRPS34",20,0)
 . W !,"* Your RMPR(661.1 global is CORRUPTED,  DO NOT INSTALL  *"
"RTN","RMPRPS34",21,0)
 . W !,"* the new RMPR(661.1 global.  Please, contact           *"
"RTN","RMPRPS34",22,0)
 . W !,"* National IRM Help Desk at 1-888-596-4357 for HELP!!!! *"
"RTN","RMPRPS34",23,0)
 . W !,"*********************************************************",!
"RTN","RMPRPS34",24,0)
 . H 1 S RMEXIT=1
"RTN","RMPRPS34",25,0)
 . Q
"RTN","RMPRPS34",26,0)
 ;
"RTN","RMPRPS34",27,0)
 ; Continue with post init...
"RTN","RMPRPS34",28,0)
SAVE W !,"Saving Inventory Data ...."
"RTN","RMPRPS34",29,0)
 K RM0
"RTN","RMPRPS34",30,0)
 K ^RMPR("INV")
"RTN","RMPRPS34",31,0)
 S BDC=0
"RTN","RMPRPS34",32,0)
 F  S BDC=$O(^RMPR(661.1,BDC)) Q:'+BDC  D
"RTN","RMPRPS34",33,0)
 . S RM0=$P(^RMPR(661.1,BDC,0),U,9)
"RTN","RMPRPS34",34,0)
 . Q:RM0=""
"RTN","RMPRPS34",35,0)
 . S ^RMPR("INV",BDC)=1
"RTN","RMPRPS34",36,0)
 . Q
"RTN","RMPRPS34",37,0)
 W !,"Done Saving Inventory Data, please load the ^RMPR(661.1) global now"
"RTN","RMPRPS34",38,0)
 W !,"File RMPR_3_76.GBL",!
"RTN","RMPRPS34",39,0)
 K RM661,RMEXIT,RM0,BDC
"RTN","RMPRPS34",40,0)
 Q
"RTN","RMPRPS34",41,0)
 ;
"RTN","RMPRPS34",42,0)
RESET W !,"Start Reset of the Inventory flag...."
"RTN","RMPRPS34",43,0)
 S U="^"
"RTN","RMPRPS34",44,0)
 S BDC=0
"RTN","RMPRPS34",45,0)
 F  S BDC=$O(^RMPR("INV",BDC)) Q:BDC'>0  D
"RTN","RMPRPS34",46,0)
 . S $P(^RMPR(661.1,BDC,0),U,9)=1
"RTN","RMPRPS34",47,0)
 . Q
"RTN","RMPRPS34",48,0)
 W !!,"End Reset of the Inventory flag.",!
"RTN","RMPRPS34",49,0)
 ;
"RTN","RMPRPS34",50,0)
 ; Patch 58 - call utilities to merge duplicate HCPCS and replace
"RTN","RMPRPS34",51,0)
 ;            DVG specified old HCPCS with new HCPCS
"RTN","RMPRPS34",52,0)
 ; ********** Remove or update this call for the next HCPCS update
"RTN","RMPRPS34",53,0)
 ;D PATCH58^RMPRPS35
"RTN","RMPRPS34",54,0)
 ; Patch 69 - replace specified deactivated HCPCS with new HCPCS.
"RTN","RMPRPS34",55,0)
 ;
"RTN","RMPRPS34",56,0)
 ;conversion for site with patch #61
"RTN","RMPRPS34",57,0)
 I $D(^RMPR(661.6)),$D(^RMPR(661.7)),$D(^RMPR(661.9)) D PAT76^RMPRPS36
"RTN","RMPRPS34",58,0)
 ;conversion for site without patch #61
"RTN","RMPRPS34",59,0)
 I '$D(^RMPR(661.6)),'$D(^RMPR(661.7)),'$D(^RMPR(661.9)) D PAT76^RMPRPS35
"RTN","RMPRPS34",60,0)
 ;
"RTN","RMPRPS34",61,0)
UPCPT ;update Inactive CPT code startin 4/1/02
"RTN","RMPRPS34",62,0)
 W !,"Start Converting Inactive CPT code....",!
"RTN","RMPRPS34",63,0)
 K RMUPD
"RTN","RMPRPS34",64,0)
 F ROI=3021231:0 S ROI=$O(^RMPR(660,"B",ROI)) Q:ROI'>0  F ROJ=0:0 S ROJ=$O(^RMPR(660,"B",ROI,ROJ)) Q:ROJ'>0  S RM0=$G(^RMPR(660,ROJ,0)) D 
"RTN","RMPRPS34",65,0)
 .S RMCPI=$P(RM0,U,22)
"RTN","RMPRPS34",66,0)
 .Q:'$G(RMCPI)
"RTN","RMPRPS34",67,0)
 .I $D(^RMPR(661.1,"RMPR","CPT",RMCPI)) D
"RTN","RMPRPS34",68,0)
 ..S RM60=ROJ
"RTN","RMPRPS34",69,0)
 ..S RMCPT=$G(^RMPR(661.1,"RMPR","CPT",RMCPI))
"RTN","RMPRPS34",70,0)
 ..Q:'$G(RMCPT)
"RTN","RMPRPS34",71,0)
 ..S RMUPD(660,RM60_",",4.1)=RMCPT
"RTN","RMPRPS34",72,0)
 ..D FILE^DIE("","RMUPD","")
"RTN","RMPRPS34",73,0)
 ..;Update PCE, if Inactive CPT code was generated with PCE data.
"RTN","RMPRPS34",74,0)
 ..I $D(^RMPR(660,RM60,10)),$P(^RMPR(660,RM60,10),U,12) D
"RTN","RMPRPS34",75,0)
 ...S RMCHK=$$SENDPCE^RMPRPCEA(RM60)
"RTN","RMPRPS34",76,0)
 K RMUPD,ROI,ROJ,RMCPT,RMCPI,RM0,RM60
"RTN","RMPRPS34",77,0)
 W !,"Done Converting Inactive CPT code....",!
"RTN","RMPRPS34",78,0)
 ;
"RTN","RMPRPS34",79,0)
DUP ;repoint duplicate HCPCS (660, 664, 664.1, 665, 661.2, 661.3 
"RTN","RMPRPS34",80,0)
 ;and delete from file 661.1
"RTN","RMPRPS34",81,0)
 D HCPCD^RMPRPS35(113,952)
"RTN","RMPRPS34",82,0)
 ;convert amis grouper for entries w/ wheelchair hcpcs.
"RTN","RMPRPS34",83,0)
 D WHUP
"RTN","RMPRPS34",84,0)
 ;
"RTN","RMPRPS34",85,0)
KILLB ;kill & set 'B' cross reference in 661.1.
"RTN","RMPRPS34",86,0)
 K ^RMPR(661.1,"B"),DIK
"RTN","RMPRPS34",87,0)
 S DIK="^RMPR(661.1,",DIK(1)=".01^B" D ENALL^DIK
"RTN","RMPRPS34",88,0)
 ;
"RTN","RMPRPS34",89,0)
 ;
"RTN","RMPRPS34",90,0)
KILLC ;kill & set 'C' cross reference in 661.1.
"RTN","RMPRPS34",91,0)
 K ^RMPR(661.1,"C"),DIK
"RTN","RMPRPS34",92,0)
 S DIK="^RMPR(661.1,",DIK(1)=".02^C" D ENALL^DIK
"RTN","RMPRPS34",93,0)
 ;
"RTN","RMPRPS34",94,0)
KILLE ;kill & set 'E' cross reference in 661.1.
"RTN","RMPRPS34",95,0)
 K ^RMPR(661.1,"E"),DIK
"RTN","RMPRPS34",96,0)
 S DIK="^RMPR(661.1,",DIK(1)="2^E" D ENALL^DIK K DIK
"RTN","RMPRPS34",97,0)
 ;
"RTN","RMPRPS34",98,0)
 W !,"Done with Installation of Patch RMPR*3*76"
"RTN","RMPRPS34",99,0)
 ;
"RTN","RMPRPS34",100,0)
EXIT ;EXIT
"RTN","RMPRPS34",101,0)
 K ^RMPR("INV"),^RMPR(661.1,"RMPR"),I,RMEXIT,RM661,BDC
"RTN","RMPRPS34",102,0)
 Q
"RTN","RMPRPS34",103,0)
 ; Patch 64 Fixes to HCPCS file
"RTN","RMPRPS34",104,0)
PAT64 N RMPR,RMPRFME,RMPRI,RMPR11,I
"RTN","RMPRPS34",105,0)
 ;
"RTN","RMPRPS34",106,0)
 ; Change NPPD NEW CODE
"RTN","RMPRPS34",107,0)
 S RMPR11("D5924")=""
"RTN","RMPRPS34",108,0)
 S RMPR11("D5934")=""
"RTN","RMPRPS34",109,0)
 S RMPR11("L8500")=""
"RTN","RMPRPS34",110,0)
 S RMPR11("L8501")=""
"RTN","RMPRPS34",111,0)
 S RMPR11("L8614")=""
"RTN","RMPRPS34",112,0)
 S RMPR11("L8619")=""
"RTN","RMPRPS34",113,0)
 S I="" F  S I=$O(RMPR11(I)) Q:I=""  D
"RTN","RMPRPS34",114,0)
 .S RMPRI=$O(^RMPR(661.1,"B",I,""))
"RTN","RMPRPS34",115,0)
 .Q:RMPRI=""
"RTN","RMPRPS34",116,0)
 .S RMPRI=RMPRI_","
"RTN","RMPRPS34",117,0)
 .S RMPR(661.1,RMPRI,6)="960 A"
"RTN","RMPRPS34",118,0)
 .D FILE^DIE("","RMPR","RMPRFME")
"RTN","RMPRPS34",119,0)
 .W !,"HCPCS ",I," updated"
"RTN","RMPRPS34",120,0)
 W !!,"Done HCPCS update!!!"
"RTN","RMPRPS34",121,0)
 W !!,"Start Reindexing the 'B' cross reference of file #661.1 ..."
"RTN","RMPRPS34",122,0)
 K ^RMPR(661.1,"B")
"RTN","RMPRPS34",123,0)
 S DIK="^RMPR(661.1,",DIK(1)=".01^B" D ENALL^DIK
"RTN","RMPRPS34",124,0)
 W !!,"Done Reindexing file #661.1!!!",!!
"RTN","RMPRPS34",125,0)
PAT64X Q
"RTN","RMPRPS34",126,0)
WHUP ;Wheelchair Update Record with new Grouper Number
"RTN","RMPRPS34",127,0)
 ;
"RTN","RMPRPS34",128,0)
 N RMPRI,RMPR,RMPRFME,RMPRY,RMPRPH,RMPRPHE,RMPRPHL,RMPRG,RMPRSTN,RMPRSITE
"RTN","RMPRPS34",129,0)
 ;loop H xref PSAS HCPCS
"RTN","RMPRPS34",130,0)
 S RMPRPH=0
"RTN","RMPRPS34",131,0)
 F  S RMPRPH=$O(^RMPR(660,"H",RMPRPH)) Q:RMPRPH'>0  D
"RTN","RMPRPS34",132,0)
 .S RMPRPHE=$P($G(^RMPR(661.1,RMPRPH,0)),U,1)
"RTN","RMPRPS34",133,0)
 .;RMPRPHE external psas hcpcs file 660
"RTN","RMPRPS34",134,0)
 .Q:RMPRPHE=""
"RTN","RMPRPS34",135,0)
 .S RMPRI=""
"RTN","RMPRPS34",136,0)
 .F RMPRI=1:1:58 S RMPRY=$P($T(HLST+RMPRI),";",3) D
"RTN","RMPRPS34",137,0)
 ..Q:RMPRY=""
"RTN","RMPRPS34",138,0)
 ..;RMPRY is wheelchair hcpcs
"RTN","RMPRPS34",139,0)
 ..Q:RMPRY'=RMPRPHE
"RTN","RMPRPS34",140,0)
 ..;hcpcs to update records
"RTN","RMPRPS34",141,0)
 ..S RMPRPHL=0
"RTN","RMPRPS34",142,0)
 ..F  S RMPRPHL=$O(^RMPR(660,"H",RMPRPH,RMPRPHL)) Q:RMPRPHL'>0  D
"RTN","RMPRPS34",143,0)
 ...;record level
"RTN","RMPRPS34",144,0)
 ...;need site param and grouper number
"RTN","RMPRPS34",145,0)
 ...;field 8 station p4 translate to 699.9 rmprsite
"RTN","RMPRPS34",146,0)
 ...Q:'$D(^RMPR(660,RMPRPHL,0))
"RTN","RMPRPS34",147,0)
 ...S RMPRSTN=$P(^RMPR(660,RMPRPHL,0),U,10)
"RTN","RMPRPS34",148,0)
 ...Q:RMPRSTN=""
"RTN","RMPRPS34",149,0)
 ...S RMPRSITE=0
"RTN","RMPRPS34",150,0)
 ...S RMPRSITE=$O(^RMPR(669.9,"C",RMPRSTN,RMPRSITE))
"RTN","RMPRPS34",151,0)
 ...Q:RMPRSITE=""
"RTN","RMPRPS34",152,0)
 ...L +^RMPR(669.9,RMPRSITE,0):9999 I $T=0 S RMPRG=8822
"RTN","RMPRPS34",153,0)
 ...S RMPRG=$P(^RMPR(669.9,RMPRSITE,0),U,7),RMPRG=RMPRG-1,$P(^RMPR(669.9,RMPRSITE,0),U,7)=RMPRG L -^RMPR(669.9,RMPRSITE,0)
"RTN","RMPRPS34",154,0)
 ...S RMPRPHLL=RMPRPHL_","
"RTN","RMPRPS34",155,0)
 ...S RMPR(660,RMPRPHLL,68)=RMPRG
"RTN","RMPRPS34",156,0)
 ...D FILE^DIE("","RMPR","RMPRFME")
"RTN","RMPRPS34",157,0)
 Q
"RTN","RMPRPS34",158,0)
HLST ;Wheelchair HCPCS with Calculation Flag
"RTN","RMPRPS34",159,0)
 ;;E1050
"RTN","RMPRPS34",160,0)
 ;;E1161
"RTN","RMPRPS34",161,0)
 ;;E1038
"RTN","RMPRPS34",162,0)
 ;;E1060
"RTN","RMPRPS34",163,0)
 ;;E1070
"RTN","RMPRPS34",164,0)
 ;;E1083
"RTN","RMPRPS34",165,0)
 ;;E1084
"RTN","RMPRPS34",166,0)
 ;;E1085
"RTN","RMPRPS34",167,0)
 ;;E1086
"RTN","RMPRPS34",168,0)
 ;;E1087
"RTN","RMPRPS34",169,0)
 ;;E1088
"RTN","RMPRPS34",170,0)
 ;;E1089
"RTN","RMPRPS34",171,0)
 ;;E1090
"RTN","RMPRPS34",172,0)
 ;;E1091
"RTN","RMPRPS34",173,0)
 ;;E1092
"RTN","RMPRPS34",174,0)
 ;;E1093
"RTN","RMPRPS34",175,0)
 ;;E1100
"RTN","RMPRPS34",176,0)
 ;;E1110
"RTN","RMPRPS34",177,0)
 ;;E1130
"RTN","RMPRPS34",178,0)
 ;;E1140
"RTN","RMPRPS34",179,0)
 ;;E1150
"RTN","RMPRPS34",180,0)
 ;;E1160
"RTN","RMPRPS34",181,0)
 ;;E1170
"RTN","RMPRPS34",182,0)
 ;;E1171
"RTN","RMPRPS34",183,0)
 ;;E1172
"RTN","RMPRPS34",184,0)
 ;;E1180
"RTN","RMPRPS34",185,0)
 ;;E1190
"RTN","RMPRPS34",186,0)
 ;;E1195
"RTN","RMPRPS34",187,0)
 ;;E1200
"RTN","RMPRPS34",188,0)
 ;;E1210
"RTN","RMPRPS34",189,0)
 ;;E1211
"RTN","RMPRPS34",190,0)
 ;;E1212
"RTN","RMPRPS34",191,0)
 ;;E1213
"RTN","RMPRPS34",192,0)
 ;;E1220
"RTN","RMPRPS34",193,0)
 ;;E1221
"RTN","RMPRPS34",194,0)
 ;;E1222
"RTN","RMPRPS34",195,0)
 ;;E1223
"RTN","RMPRPS34",196,0)
 ;;E1224
"RTN","RMPRPS34",197,0)
 ;;E1240
"RTN","RMPRPS34",198,0)
 ;;E1250
"RTN","RMPRPS34",199,0)
 ;;E1260
"RTN","RMPRPS34",200,0)
 ;;E1270
"RTN","RMPRPS34",201,0)
 ;;E1280
"RTN","RMPRPS34",202,0)
 ;;E1285
"RTN","RMPRPS34",203,0)
 ;;E1290
"RTN","RMPRPS34",204,0)
 ;;E1295
"RTN","RMPRPS34",205,0)
 ;;K0001
"RTN","RMPRPS34",206,0)
 ;;K0002
"RTN","RMPRPS34",207,0)
 ;;K0003
"RTN","RMPRPS34",208,0)
 ;;K0004
"RTN","RMPRPS34",209,0)
 ;;K0005
"RTN","RMPRPS34",210,0)
 ;;K0006
"RTN","RMPRPS34",211,0)
 ;;K0007
"RTN","RMPRPS34",212,0)
 ;;K0009
"RTN","RMPRPS34",213,0)
 ;;K0010
"RTN","RMPRPS34",214,0)
 ;;K0011
"RTN","RMPRPS34",215,0)
 ;;K0012
"RTN","RMPRPS34",216,0)
 ;;K0014
"RTN","RMPRPS34",217,0)
 ;end
"RTN","RMPRPS35")
0^2^B61242982
"RTN","RMPRPS35",1,0)
RMPRPS35 ;HINCIO/ODJ - HCPCS Update Utilities ;3/7/03  08:54
"RTN","RMPRPS35",2,0)
 ;;3.0;PROSTHETICS;**58,69,76**,FEB 09,1996
"RTN","RMPRPS35",3,0)
 Q
"RTN","RMPRPS35",4,0)
 ;
"RTN","RMPRPS35",5,0)
 ; RVD 2/12/02 patch #76  - replace a list of deactivated for 2003 HCPCS
"RTN","RMPRPS35",6,0)
 ;
"RTN","RMPRPS35",7,0)
 ; RVD 4/25/02 patch #69  - replace a list of deactivated HCPCS.
"RTN","RMPRPS35",8,0)
 ;                          files (661.1 and 661.3)
"RTN","RMPRPS35",9,0)
 ;
"RTN","RMPRPS35",10,0)
 ; HCPCD - Change HCPCS code in files 660, 664, 664.1, 665, 665.72
"RTN","RMPRPS35",11,0)
 ;                                    661.2 and 661.3
"RTN","RMPRPS35",12,0)
 ;         Only to be run if users off the system
"RTN","RMPRPS35",13,0)
 ;         Used where the same HCPCS code has duplicate records.
"RTN","RMPRPS35",14,0)
 ; Inputs:
"RTN","RMPRPS35",15,0)
 ;    RMPRHPF - IEN of HCPCS to delete
"RTN","RMPRPS35",16,0)
 ;    RMPRHPT - IEN of HCPCS to copy deleted HCPCS to
"RTN","RMPRPS35",17,0)
 ;
"RTN","RMPRPS35",18,0)
HCPCD(RMPRHPF,RMPRHPT) ;
"RTN","RMPRPS35",19,0)
 N RMPRI,RMPRFDA,RMPRFME,RMPRIEN,RMPRS,RMPR65P,RMPRJ,RMPRPTP
"RTN","RMPRPS35",20,0)
 N RMPRO1,RMPRO2,RMPRO3,RMPRO4,RMPR641P,RMPR64P,X,Y,DA
"RTN","RMPRPS35",21,0)
 ;
"RTN","RMPRPS35",22,0)
 ; Start with file 660 using the H x-ref.
"RTN","RMPRPS35",23,0)
 S RMPRI=""
"RTN","RMPRPS35",24,0)
 F  S RMPRI=$O(^RMPR(660,"H",RMPRHPF,RMPRI)) Q:RMPRI=""  D
"RTN","RMPRPS35",25,0)
 . ;
"RTN","RMPRPS35",26,0)
 . ; Get pointer to 665 and update HCPCS multiples
"RTN","RMPRPS35",27,0)
 . S RMPR65P=$P($G(^RMPR(660,RMPRI,0)),"^",2)
"RTN","RMPRPS35",28,0)
 . S RMHCIT=$P($G(^RMPR(660,RMPRI,2)),"^",1)
"RTN","RMPRPS35",29,0)
 . I RMPR65P'="" D
"RTN","RMPRPS35",30,0)
 .. ;
"RTN","RMPRPS35",31,0)
 .. ; Update 665.194 multiple
"RTN","RMPRPS35",32,0)
 .. Q:'$D(^RMPR(665,RMPR65P,0))
"RTN","RMPRPS35",33,0)
 .. S RMPRPTP=$P(^RMPR(665,RMPR65P,0),"^",1)
"RTN","RMPRPS35",34,0)
 .. S RMPRJ=0
"RTN","RMPRPS35",35,0)
 .. F  S RMPRJ=$O(^RMPR(665,RMPR65P,"RMPOC",RMPRJ)) Q:'RMPRJ  D
"RTN","RMPRPS35",36,0)
 ... Q:$P($G(^RMPR(665,RMPR65P,"RMPOC",RMPRJ,0)),"^",7)'=RMPRHPF
"RTN","RMPRPS35",37,0)
 ... S RMPRIEN=RMPRJ_","_RMPR65P_","
"RTN","RMPRPS35",38,0)
 ... K RMPRFDA,RMPRFME
"RTN","RMPRPS35",39,0)
 ... S RMPRFDA(665.194,RMPRIEN,6)=RMPRHPT
"RTN","RMPRPS35",40,0)
 ... D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS35",41,0)
 ... Q
"RTN","RMPRPS35",42,0)
 .. ;
"RTN","RMPRPS35",43,0)
 .. ; Update 665.723191 multiple
"RTN","RMPRPS35",44,0)
 .. S RMPRO1=0
"RTN","RMPRPS35",45,0)
 .. F  S RMPRO1=$O(^RMPO(665.72,RMPRO1)) Q:'+RMPRO1  D
"RTN","RMPRPS35",46,0)
 ... S RMPRO2=0
"RTN","RMPRPS35",47,0)
 ... F  S RMPRO2=$O(^RMPO(665.72,RMPRO1,1,RMPRO2)) Q:'+RMPRO2  D
"RTN","RMPRPS35",48,0)
 .... S RMPRO3=0
"RTN","RMPRPS35",49,0)
 .... F  S RMPRO3=$O(^RMPO(665.72,RMPRO1,1,RMPRO2,1,RMPRO3)) Q:'+RMPRO3  D
"RTN","RMPRPS35",50,0)
 ..... I $D(^RMPO(665.72,RMPRO1,1,RMPRO2,1,RMPRO3,"V",RMPRPTP)) D
"RTN","RMPRPS35",51,0)
 ...... S RMPRO4=0
"RTN","RMPRPS35",52,0)
 ...... F  S RMPRO4=$O(^RMPO(665.72,RMPRO1,1,RMPRO2,1,RMPRO3,"V",RMPRPTP,1,RMPRO4)) Q:'+RMPRO4  D
"RTN","RMPRPS35",53,0)
 ....... Q:$P($G(^RMPO(665.72,RMPRO1,1,RMPRO2,1,RMPRO3,"V",RMPRPTP,1,RMPRO4,0)),"^",2)'=RMPRHPF
"RTN","RMPRPS35",54,0)
 ....... S RMPRIEN=RMPRO4_","_RMPRPTP_","_RMPRO3_","_RMPRO2_","_RMPRO1_","
"RTN","RMPRPS35",55,0)
 ....... K RMPRFME,RMPRFDA
"RTN","RMPRPS35",56,0)
 ....... S RMPRFDA(665.723191,RMPRIEN,2)=RMPRHPT
"RTN","RMPRPS35",57,0)
 ....... D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS35",58,0)
 ....... Q
"RTN","RMPRPS35",59,0)
 ...... Q
"RTN","RMPRPS35",60,0)
 ..... Q
"RTN","RMPRPS35",61,0)
 .... Q
"RTN","RMPRPS35",62,0)
 ... Q
"RTN","RMPRPS35",63,0)
 .. Q
"RTN","RMPRPS35",64,0)
 . ;
"RTN","RMPRPS35",65,0)
 . ; Update to 664.1 and 664 HCPCS multiples
"RTN","RMPRPS35",66,0)
 . S RMPRPTP=RMPR65P ;patient pointer
"RTN","RMPRPS35",67,0)
 . I RMPRPTP'="" D
"RTN","RMPRPS35",68,0)
 .. ;
"RTN","RMPRPS35",69,0)
 .. ; Update 664.16 multiple
"RTN","RMPRPS35",70,0)
 .. S RMPR641P=""
"RTN","RMPRPS35",71,0)
 .. F  S RMPR641P=$O(^RMPR(664.1,"D",RMPRPTP,RMPR641P)) Q:RMPR641P=""  D 
"RTN","RMPRPS35",72,0)
 ... S RMPRJ=0
"RTN","RMPRPS35",73,0)
 ... F  S RMPRJ=$O(^RMPR(664.1,RMPR641P,2,RMPRJ)) Q:'+RMPRJ  D
"RTN","RMPRPS35",74,0)
 .... Q:$P($G(^RMPR(664.1,RMPR641P,2,RMPRJ,2)),"^",1)'=RMPRHPF
"RTN","RMPRPS35",75,0)
 .... S RMPRIEN=RMPRJ_","_RMPR641P_","
"RTN","RMPRPS35",76,0)
 .... K RMPRFDA,RMPRFME
"RTN","RMPRPS35",77,0)
 .... S RMPRFDA(664.16,RMPRIEN,13)=RMPRHPT
"RTN","RMPRPS35",78,0)
 .... D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS35",79,0)
 .... Q
"RTN","RMPRPS35",80,0)
 ... Q
"RTN","RMPRPS35",81,0)
 .. Q
"RTN","RMPRPS35",82,0)
 . S RMPRPTP=RMPR65P ;patient pointer same as 665 pointer
"RTN","RMPRPS35",83,0)
 . I RMPRPTP'="" D
"RTN","RMPRPS35",84,0)
 .. ;
"RTN","RMPRPS35",85,0)
 .. ; Update 664.02 multiple
"RTN","RMPRPS35",86,0)
 .. S RMPR64P=""
"RTN","RMPRPS35",87,0)
 .. F  S RMPR64P=$O(^RMPR(664,"C",RMPRPTP,RMPR64P)) Q:RMPR64P=""  D
"RTN","RMPRPS35",88,0)
 ... S RMPRJ=0
"RTN","RMPRPS35",89,0)
 ... F  S RMPRJ=$O(^RMPR(664,RMPR64P,1,RMPRJ)) Q:'+RMPRJ  D
"RTN","RMPRPS35",90,0)
 .... Q:$P($G(^RMPR(664,RMPR64P,1,RMPRJ,0)),"^",16)'=RMPRHPF
"RTN","RMPRPS35",91,0)
 .... K RMPRFDA,RMPRFME
"RTN","RMPRPS35",92,0)
 .... S RMPRIEN=RMPRJ_","_RMPR64P_","
"RTN","RMPRPS35",93,0)
 .... S RMPRFDA(664.02,RMPRIEN,16)=RMPRHPT
"RTN","RMPRPS35",94,0)
 .... D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS35",95,0)
 .... Q
"RTN","RMPRPS35",96,0)
 ... Q
"RTN","RMPRPS35",97,0)
 .. Q
"RTN","RMPRPS35",98,0)
 . ;
"RTN","RMPRPS35",99,0)
 . ; finally update the 660 file
"RTN","RMPRPS35",100,0)
 . K RMPRFDA,RMPRFME
"RTN","RMPRPS35",101,0)
 . S RMPRIEN=RMPRI_","
"RTN","RMPRPS35",102,0)
 . S RMPRFDA(660,RMPRIEN,4.5)=RMPRHPT
"RTN","RMPRPS35",103,0)
 . S RMPRFDA(660,RMPRIEN,37)=RMPRHPT_"-"_$P(RMHCIT,"-",2)
"RTN","RMPRPS35",104,0)
 . D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS35",105,0)
 . Q
"RTN","RMPRPS35",106,0)
 ;
"RTN","RMPRPS35",107,0)
 ; Update PIP files 661.2 and 661.3
"RTN","RMPRPS35",108,0)
HCPCDP S RMPRI=""
"RTN","RMPRPS35",109,0)
 F  S RMPRI=$O(^RMPR(661.2,"D",RMPRHPF,RMPRI)) Q:RMPRI=""  D
"RTN","RMPRPS35",110,0)
 . K RMPRFDA,RMPRFME
"RTN","RMPRPS35",111,0)
 . S RMPRIEN=RMPRI_","
"RTN","RMPRPS35",112,0)
 . S RMPRFDA(661.2,RMPRIEN,3)=RMPRHPT
"RTN","RMPRPS35",113,0)
 . D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS35",114,0)
 . Q
"RTN","RMPRPS35",115,0)
 S RMPRI=0
"RTN","RMPRPS35",116,0)
 F  S RMPRI=$O(^RMPR(661.3,RMPRI)) Q:'+RMPRI  D
"RTN","RMPRPS35",117,0)
 . S RMPRJ=0
"RTN","RMPRPS35",118,0)
 . F  S RMPRJ=$O(^RMPR(661.3,RMPRI,1,RMPRJ)) Q:'+RMPRJ  D
"RTN","RMPRPS35",119,0)
 .. Q:$P($G(^RMPR(661.3,RMPRI,1,RMPRJ,0)),"^",1)'=RMPRHPF
"RTN","RMPRPS35",120,0)
 .. K RMPRFDA,RMPRFME
"RTN","RMPRPS35",121,0)
 .. S RMPRIEN=RMPRJ_","_RMPRI_","
"RTN","RMPRPS35",122,0)
 .. S RMPRFDA(661.31,RMPRIEN,.01)=RMPRHPT
"RTN","RMPRPS35",123,0)
 .. D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS35",124,0)
 .. Q
"RTN","RMPRPS35",125,0)
 . Q
"RTN","RMPRPS35",126,0)
 K RMPRFDA,RMPRFME
"RTN","RMPRPS35",127,0)
 S RMPRIEN=RMPRHPF_","
"RTN","RMPRPS35",128,0)
 S RMPRFDA(661.1,RMPRIEN,.01)="@"
"RTN","RMPRPS35",129,0)
 D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS35",130,0)
HCPCDX Q
"RTN","RMPRPS35",131,0)
 ;
"RTN","RMPRPS35",132,0)
 ; ITEM - move Item records from 661.1 from old to new HCPCS
"RTN","RMPRPS35",133,0)
 ;
"RTN","RMPRPS35",134,0)
 ; Inputs:
"RTN","RMPRPS35",135,0)
 ;   RMPRHPO - Old HCPCS code being replaced
"RTN","RMPRPS35",136,0)
 ;   RMPRHPN - New HCPCS code
"RTN","RMPRPS35",137,0)
 ;
"RTN","RMPRPS35",138,0)
ITEM(RMPRHPO,RMPRHPN) ;
"RTN","RMPRPS35",139,0)
 N RMPRHPOI,RMPRHPNI,RMPRJ,RMPRFDA,RMPRFME,RMPRIEN,X,Y,DA,RMPRIENA,RMPRK
"RTN","RMPRPS35",140,0)
 N RMPRL,RMPRS,RMPRITEM,RMPRIFLG,RML,RMPRIN,RMPRIO
"RTN","RMPRPS35",141,0)
 K ^TMP($J,"RM")
"RTN","RMPRPS35",142,0)
 S RMPRHPOI=$O(^RMPR(661.1,"B",RMPRHPO,"")) ;old HCPCS ien
"RTN","RMPRPS35",143,0)
 S RMPRHPNI=$O(^RMPR(661.1,"B",RMPRHPN,"")) ;new HCPCS ien
"RTN","RMPRPS35",144,0)
 Q:'$G(RMPRHPNI)
"RTN","RMPRPS35",145,0)
 G:$D(^RMPR(661.1,RMPRHPNI,3)) ITEMX ;quit if Items already on new HCPCS
"RTN","RMPRPS35",146,0)
 S RMPRIFLG=0
"RTN","RMPRPS35",147,0)
 I $P($G(^RMPR(661.1,RMPRHPOI,0)),"^",9)'="" S RMPRIFLG=1
"RTN","RMPRPS35",148,0)
 ;
"RTN","RMPRPS35",149,0)
 ; Loop on items and copy to new HCPCS
"RTN","RMPRPS35",150,0)
 S RML=0
"RTN","RMPRPS35",151,0)
 ;S RMPRIEN="+1,"_RMPRHPNI_","
"RTN","RMPRPS35",152,0)
 S (RMPRJ,RMPRN)=0
"RTN","RMPRPS35",153,0)
 I $D(^RMPR(661.1,RMPRHPNI,3,0)) S RMPRN=$P(^RMPR(661.1,RMPRHPNI,3,0),U,3)
"RTN","RMPRPS35",154,0)
 S RMPRIENA=RMPRN
"RTN","RMPRPS35",155,0)
 F  S RMPRJ=$O(^RMPR(661.1,RMPRHPOI,3,RMPRJ)) Q:'+RMPRJ  D
"RTN","RMPRPS35",156,0)
 . K RMPRFDA,RMPRFME,DIE
"RTN","RMPRPS35",157,0)
 . I RMPRN=0 S RMPRIENA=RMPRJ
"RTN","RMPRPS35",158,0)
 . I RMPRN>0 S RMPRIENA=RMPRIENA+1
"RTN","RMPRPS35",159,0)
 . S RML=RML+1
"RTN","RMPRPS35",160,0)
 . S RMPRIEN="+"_RML_","_RMPRHPNI_","
"RTN","RMPRPS35",161,0)
 . S RMPRFDA(661.12,RMPRIEN,.01)=$P(^RMPR(661.1,RMPRHPOI,3,RMPRJ,0),"^",1)
"RTN","RMPRPS35",162,0)
 . I $L(RMPRFDA(661.12,RMPRIEN,.01))>30 S RMPRFDA(661.12,RMPRIEN,.01)=$E(RMPRFDA(661.12,RMPRIEN,.01),1,30)
"RTN","RMPRPS35",163,0)
 .;don't create an entry if it's already been created.
"RTN","RMPRPS35",164,0)
 . Q:$D(^RMPR(661.1,RMPRHPNI,3,"B",RMPRFDA(661.12,RMPRIEN,.01)))
"RTN","RMPRPS35",165,0)
 . S ^TMP($J,"RM",RMPRJ)=RMPRIENA
"RTN","RMPRPS35",166,0)
 . D UPDATE^DIE("","RMPRFDA","RMPRIENA","RMPRFME")
"RTN","RMPRPS35",167,0)
 . Q
"RTN","RMPRPS35",168,0)
 ;
"RTN","RMPRPS35",169,0)
 ; Update 661.3 file
"RTN","RMPRPS35",170,0)
 S RMPRJ=""
"RTN","RMPRPS35",171,0)
 F  S RMPRJ=$O(^RMPR(661.3,"C",RMPRHPOI,RMPRJ)) Q:RMPRJ=""  D
"RTN","RMPRPS35",172,0)
 . S RMPRK=""
"RTN","RMPRPS35",173,0)
 . F  S RMPRK=$O(^RMPR(661.3,"C",RMPRHPOI,RMPRJ,RMPRK)) Q:RMPRK=""  D
"RTN","RMPRPS35",174,0)
 .. S RMPRL=0
"RTN","RMPRPS35",175,0)
 .. F  S RMPRL=$O(^RMPR(661.3,RMPRJ,1,RMPRK,1,RMPRL)) Q:'+RMPRL  D
"RTN","RMPRPS35",176,0)
 ... S RMPRS=^RMPR(661.3,RMPRJ,1,RMPRK,1,RMPRL,0)
"RTN","RMPRPS35",177,0)
 ... S RMPRITEM=$P(RMPRS,"^",1)
"RTN","RMPRPS35",178,0)
 ... S RMPRIO=$P(RMPRITEM,"-",2)
"RTN","RMPRPS35",179,0)
 ... Q:'$D(^TMP($J,"RM",RMPRIO))
"RTN","RMPRPS35",180,0)
 ... S RMPRIN=^TMP($J,"RM",RMPRIO)
"RTN","RMPRPS35",181,0)
 ... Q:'$G(RMPRIN)
"RTN","RMPRPS35",182,0)
 ... S $P(RMPRITEM,"-",1)=RMPRHPN
"RTN","RMPRPS35",183,0)
 ... S $P(RMPRITEM,"-",2)=RMPRIN
"RTN","RMPRPS35",184,0)
 ... S RMPRIEN=RMPRL_","_RMPRK_","_RMPRJ_","
"RTN","RMPRPS35",185,0)
 ... K RMPRFDA,RMPRFME
"RTN","RMPRPS35",186,0)
 ... S RMPRFDA(661.312,RMPRIEN,.01)=RMPRITEM
"RTN","RMPRPS35",187,0)
 ... D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS35",188,0)
 ... Q
"RTN","RMPRPS35",189,0)
 .. S RMPRIEN=RMPRK_","_RMPRJ_","
"RTN","RMPRPS35",190,0)
 .. K RMPRFDA,RMPRFME
"RTN","RMPRPS35",191,0)
 .. S RMPRFDA(661.31,RMPRIEN,.01)=RMPRHPNI
"RTN","RMPRPS35",192,0)
 .. D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS35",193,0)
 .. S RMPRIFLG=1
"RTN","RMPRPS35",194,0)
 .. Q
"RTN","RMPRPS35",195,0)
 . Q
"RTN","RMPRPS35",196,0)
 I RMPRIFLG D
"RTN","RMPRPS35",197,0)
 . K RMPRFDA,RMPRFME
"RTN","RMPRPS35",198,0)
 . S RMPRIEN=RMPRHPNI_","
"RTN","RMPRPS35",199,0)
 . S RMPRFDA(661.1,RMPRIEN,10)=1
"RTN","RMPRPS35",200,0)
 . D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS35",201,0)
 . Q
"RTN","RMPRPS35",202,0)
 ;
"RTN","RMPRPS35",203,0)
 ; Update PIP files 661.2
"RTN","RMPRPS35",204,0)
 S RMPRI=""
"RTN","RMPRPS35",205,0)
 F  S RMPRI=$O(^RMPR(661.2,"D",RMPRHPOI,RMPRI)) Q:RMPRI=""  D
"RTN","RMPRPS35",206,0)
 . Q:'$D(^RMPR(661.2,RMPRI,0))
"RTN","RMPRPS35",207,0)
 . S RMHCIT=$P(^RMPR(661.2,RMPRI,0),U,9)
"RTN","RMPRPS35",208,0)
 . K RMPRFDA,RMPRFME
"RTN","RMPRPS35",209,0)
 . S RMPRIEN=RMPRI_","
"RTN","RMPRPS35",210,0)
 . S RMPRFDA(661.2,RMPRIEN,3)=RMPRHPNI
"RTN","RMPRPS35",211,0)
 . S RMPRFDA(661.2,RMPRIEN,9)=RMPRHPN_"-"_$P(RMHCIT,"-",2)
"RTN","RMPRPS35",212,0)
 . D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS35",213,0)
 . Q
"RTN","RMPRPS35",214,0)
 ;
"RTN","RMPRPS35",215,0)
ITEMX Q
"RTN","RMPRPS35",216,0)
 ;
"RTN","RMPRPS35",217,0)
 ; PATCH58 - 
"RTN","RMPRPS35",218,0)
 ; 1 - Repoint duplicate HCPCS
"RTN","RMPRPS35",219,0)
 ; 2 - Copy item and current inventory to new HCPCS for specified list
"RTN","RMPRPS35",220,0)
 ; (patch 58 only)
"RTN","RMPRPS35",221,0)
PATCH58 N RMPRA,RMPRI
"RTN","RMPRPS35",222,0)
 I '$D(IO("Q")) D
"RTN","RMPRPS35",223,0)
 . W !!,"Repointing specified duplicate HCPCS...",!
"RTN","RMPRPS35",224,0)
 . Q
"RTN","RMPRPS35",225,0)
 D HCPCD(170,133) ;E0277
"RTN","RMPRPS35",226,0)
 D HCPCD(630,135) ;E0290
"RTN","RMPRPS35",227,0)
 D HCPCD(633,547) ;L1499
"RTN","RMPRPS35",228,0)
 D HCPCD(2222,2207) ;L2035
"RTN","RMPRPS35",229,0)
 D HCPCD(767,697) ;L2999
"RTN","RMPRPS35",230,0)
 D HCPCD(1027,1171) ;L5999
"RTN","RMPRPS35",231,0)
 D HCPCD(1175,1207) ;L7499
"RTN","RMPRPS35",232,0)
 I '$D(IO("Q")) D
"RTN","RMPRPS35",233,0)
 . W !!,"Repointing complete.",!
"RTN","RMPRPS35",234,0)
 . Q
"RTN","RMPRPS35",235,0)
 ;
"RTN","RMPRPS35",236,0)
 ;for next update, change RMPRA() local array to the HCPCS that need
"RTN","RMPRPS35",237,0)
 ;to be replaced.
"RTN","RMPRPS35",238,0)
PAT76 ; Set up array and replace HCPCS
"RTN","RMPRPS35",239,0)
 S U="^"
"RTN","RMPRPS35",240,0)
 I '$D(IO("Q")) D
"RTN","RMPRPS35",241,0)
 . W !!,"Replacing the following HCPCS...",!
"RTN","RMPRPS35",242,0)
 . Q
"RTN","RMPRPS35",243,0)
 ;patch #58 - replacement code
"RTN","RMPRPS35",244,0)
 ;K RMPRA
"RTN","RMPRPS35",245,0)
 ;S RMPRA(1)="K0182^A7018"
"RTN","RMPRPS35",246,0)
 ;S RMPRA(2)="K0269^E0572"
"RTN","RMPRPS35",247,0)
 F RMI=0:0 S RMI=$O(^RMPR(661.1,"RMPR",RMI)) Q:RMI'>0  D
"RTN","RMPRPS35",248,0)
 . S RMHCDA=^RMPR(661.1,"RMPR",RMI)
"RTN","RMPRPS35",249,0)
 . S RMHOLD=$P(RMHCDA,U,1),RMHNEW=$P(RMHCDA,U,2)
"RTN","RMPRPS35",250,0)
 . I '$D(IO("Q")) D
"RTN","RMPRPS35",251,0)
 .. W !,RMHOLD," with ",RMHNEW
"RTN","RMPRPS35",252,0)
 . D ITEM(RMHOLD,RMHNEW)
"RTN","RMPRPS35",253,0)
 . Q
"RTN","RMPRPS35",254,0)
 I '$D(IO("Q")) D
"RTN","RMPRPS35",255,0)
 . W !!,"HCPCS replacement complete.",!
"RTN","RMPRPS35",256,0)
 . Q
"RTN","RMPRPS35",257,0)
 Q
"RTN","RMPRPS36")
0^3^B36323463
"RTN","RMPRPS36",1,0)
RMPRPS36 ;HIN CIO/RVD - HCPCS Update Utilities ;3/6/03  15:01
"RTN","RMPRPS36",2,0)
 ;;3.0;PROSTHETICS;**76**,FEB 09,1996
"RTN","RMPRPS36",3,0)
 Q
"RTN","RMPRPS36",4,0)
 ;
"RTN","RMPRPS36",5,0)
 ; RVD 2/12/03 patch #76  - replace a list of deactivated 2003 HCPCS
"RTN","RMPRPS36",6,0)
 ;                      for sites with patch #61 installed.
"RTN","RMPRPS36",7,0)
 ;
"RTN","RMPRPS36",8,0)
 ; HCPCD - Change HCPCS code in files 660, 664, 664.1, 665, 665.72
"RTN","RMPRPS36",9,0)
 ;                       661.11, 661.4, 661.41, 661.6, 661.7 and 661.9.
"RTN","RMPRPS36",10,0)
 ;         Only to be run if users off the system
"RTN","RMPRPS36",11,0)
 ;         Used where the same HCPCS code has duplicate records.
"RTN","RMPRPS36",12,0)
 ; Inputs:
"RTN","RMPRPS36",13,0)
 ;    RMPRHPF - IEN of HCPCS to delete
"RTN","RMPRPS36",14,0)
 ;    RMPRHPT - IEN of the new HCPCS
"RTN","RMPRPS36",15,0)
 ;
"RTN","RMPRPS36",16,0)
HCPCD(RMPRHPF,RMPRHPT) ;
"RTN","RMPRPS36",17,0)
 ;
"RTN","RMPRPS36",18,0)
 ; Start with file 660 using the H x-ref.
"RTN","RMPRPS36",19,0)
 S RMPRI=""
"RTN","RMPRPS36",20,0)
 F  S RMPRI=$O(^RMPR(660,"H",RMPRHPF,RMPRI)) Q:RMPRI=""  D
"RTN","RMPRPS36",21,0)
 . ;
"RTN","RMPRPS36",22,0)
 . ; Get pointer to 665 and update HCPCS multiples
"RTN","RMPRPS36",23,0)
 . S RMPR65P=$P($G(^RMPR(660,RMPRI,0)),"^",2)
"RTN","RMPRPS36",24,0)
 . S RMHCIT=$P($G(^RMPR(660,RMPRI,2)),"^",1)
"RTN","RMPRPS36",25,0)
 . I RMPR65P'="" D
"RTN","RMPRPS36",26,0)
 .. ;
"RTN","RMPRPS36",27,0)
 .. ; Update 665.194 multiple
"RTN","RMPRPS36",28,0)
 .. S RMPRPTP=$P(^RMPR(665,RMPR65P,0),"^",1)
"RTN","RMPRPS36",29,0)
 .. S RMPRJ=0
"RTN","RMPRPS36",30,0)
 .. F  S RMPRJ=$O(^RMPR(665,RMPR65P,"RMPOC",RMPRJ)) Q:'RMPRJ  D
"RTN","RMPRPS36",31,0)
 ... Q:$P($G(^RMPR(665,RMPR65P,"RMPOC",RMPRJ,0)),"^",7)'=RMPRHPF
"RTN","RMPRPS36",32,0)
 ... S RMPRIEN=RMPRJ_","_RMPR65P_","
"RTN","RMPRPS36",33,0)
 ... K RMPRFDA,RMPRFME
"RTN","RMPRPS36",34,0)
 ... S RMPRFDA(665.194,RMPRIEN,6)=RMPRHPT
"RTN","RMPRPS36",35,0)
 ... D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS36",36,0)
 ... Q
"RTN","RMPRPS36",37,0)
 .. ;
"RTN","RMPRPS36",38,0)
 .. ; Update 665.723191 multiple
"RTN","RMPRPS36",39,0)
 .. S RMPRO1=0
"RTN","RMPRPS36",40,0)
 .. F  S RMPRO1=$O(^RMPO(665.72,RMPRO1)) Q:'+RMPRO1  D
"RTN","RMPRPS36",41,0)
 ... S RMPRO2=0
"RTN","RMPRPS36",42,0)
 ... F  S RMPRO2=$O(^RMPO(665.72,RMPRO1,1,RMPRO2)) Q:'+RMPRO2  D
"RTN","RMPRPS36",43,0)
 .... S RMPRO3=0
"RTN","RMPRPS36",44,0)
 .... F  S RMPRO3=$O(^RMPO(665.72,RMPRO1,1,RMPRO2,1,RMPRO3)) Q:'+RMPRO3  D
"RTN","RMPRPS36",45,0)
 ..... I $D(^RMPO(665.72,RMPRO1,1,RMPRO2,1,RMPRO3,"V",RMPRPTP)) D
"RTN","RMPRPS36",46,0)
 ...... S RMPRO4=0
"RTN","RMPRPS36",47,0)
 ...... F  S RMPRO4=$O(^RMPO(665.72,RMPRO1,1,RMPRO2,1,RMPRO3,"V",RMPRPTP,1,RMPRO4)) Q:'+RMPRO4  D
"RTN","RMPRPS36",48,0)
 ....... Q:$P($G(^RMPO(665.72,RMPRO1,1,RMPRO2,1,RMPRO3,"V",RMPRPTP,1,RMPRO4,0)),"^",2)'=RMPRHPF
"RTN","RMPRPS36",49,0)
 ....... S RMPRIEN=RMPRO4_","_RMPRPTP_","_RMPRO3_","_RMPRO2_","_RMPRO1_","
"RTN","RMPRPS36",50,0)
 ....... K RMPRFME,RMPRFDA
"RTN","RMPRPS36",51,0)
 ....... S RMPRFDA(665.723191,RMPRIEN,2)=RMPRHPT
"RTN","RMPRPS36",52,0)
 ....... D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS36",53,0)
 ....... Q
"RTN","RMPRPS36",54,0)
 ...... Q
"RTN","RMPRPS36",55,0)
 ..... Q
"RTN","RMPRPS36",56,0)
 .... Q
"RTN","RMPRPS36",57,0)
 ... Q
"RTN","RMPRPS36",58,0)
 .. Q
"RTN","RMPRPS36",59,0)
 . ;
"RTN","RMPRPS36",60,0)
 . ; Update to 664.1 and 664 HCPCS multiples
"RTN","RMPRPS36",61,0)
 . S RMPRPTP=RMPR65P ;patient pointer
"RTN","RMPRPS36",62,0)
 . I RMPRPTP'="" D
"RTN","RMPRPS36",63,0)
 .. ;
"RTN","RMPRPS36",64,0)
 .. ; Update 664.16 multiple
"RTN","RMPRPS36",65,0)
 .. S RMPR641P=""
"RTN","RMPRPS36",66,0)
 .. F  S RMPR641P=$O(^RMPR(664.1,"D",RMPRPTP,RMPR641P)) Q:RMPR641P=""  D 
"RTN","RMPRPS36",67,0)
 ... S RMPRJ=0
"RTN","RMPRPS36",68,0)
 ... F  S RMPRJ=$O(^RMPR(664.1,RMPR641P,2,RMPRJ)) Q:'+RMPRJ  D
"RTN","RMPRPS36",69,0)
 .... Q:$P($G(^RMPR(664.1,RMPR641P,2,RMPRJ,2)),"^",1)'=RMPRHPF
"RTN","RMPRPS36",70,0)
 .... S RMPRIEN=RMPRJ_","_RMPR641P_","
"RTN","RMPRPS36",71,0)
 .... K RMPRFDA,RMPRFME
"RTN","RMPRPS36",72,0)
 .... S RMPRFDA(664.16,RMPRIEN,13)=RMPRHPT
"RTN","RMPRPS36",73,0)
 .... D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS36",74,0)
 .... Q
"RTN","RMPRPS36",75,0)
 ... Q
"RTN","RMPRPS36",76,0)
 .. Q
"RTN","RMPRPS36",77,0)
 . S RMPRPTP=RMPR65P ;patient pointer same as 665 pointer
"RTN","RMPRPS36",78,0)
 . I RMPRPTP'="" D
"RTN","RMPRPS36",79,0)
 .. ;
"RTN","RMPRPS36",80,0)
 .. ; Update 664.02 multiple
"RTN","RMPRPS36",81,0)
 .. S RMPR64P=""
"RTN","RMPRPS36",82,0)
 .. F  S RMPR64P=$O(^RMPR(664,"C",RMPRPTP,RMPR64P)) Q:RMPR64P=""  D
"RTN","RMPRPS36",83,0)
 ... S RMPRJ=0
"RTN","RMPRPS36",84,0)
 ... F  S RMPRJ=$O(^RMPR(664,RMPR64P,1,RMPRJ)) Q:'+RMPRJ  D
"RTN","RMPRPS36",85,0)
 .... Q:$P($G(^RMPR(664,RMPR64P,1,RMPRJ,0)),"^",16)'=RMPRHPF
"RTN","RMPRPS36",86,0)
 .... K RMPRFDA,RMPRFME
"RTN","RMPRPS36",87,0)
 .... S RMPRIEN=RMPRJ_","_RMPR64P_","
"RTN","RMPRPS36",88,0)
 .... S RMPRFDA(664.02,RMPRIEN,16)=RMPRHPT
"RTN","RMPRPS36",89,0)
 .... D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS36",90,0)
 .... Q
"RTN","RMPRPS36",91,0)
 ... Q
"RTN","RMPRPS36",92,0)
 .. Q
"RTN","RMPRPS36",93,0)
 . ;
"RTN","RMPRPS36",94,0)
 . ; finally update the 660 file
"RTN","RMPRPS36",95,0)
 . K RMPRFDA,RMPRFME
"RTN","RMPRPS36",96,0)
 . S RMPRIEN=RMPRI_","
"RTN","RMPRPS36",97,0)
 . S RMPRFDA(660,RMPRIEN,4.5)=RMPRHPT
"RTN","RMPRPS36",98,0)
 . S RMPRFDA(660,RMPRIEN,37)=RMHNEW_"-"_$P(RMHCIT,"-",2)
"RTN","RMPRPS36",99,0)
 . D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS36",100,0)
 . Q
"RTN","RMPRPS36",101,0)
 Q
"RTN","RMPRPS36",102,0)
 ;
"RTN","RMPRPS36",103,0)
F6111 ; Update PIP files 661.11
"RTN","RMPRPS36",104,0)
 K RMI
"RTN","RMPRPS36",105,0)
 F RMI=0:0 S RMI=$O(^RMPR(661.11,"B",RMHOLD,RMI)) Q:RMI'>0  D
"RTN","RMPRPS36",106,0)
 .S RMIT=""
"RTN","RMPRPS36",107,0)
 .Q:'$D(^RMPR(661.11,RMI,0))
"RTN","RMPRPS36",108,0)
 .S RMIT=$P(^RMPR(661.11,RMI,0),U,2)
"RTN","RMPRPS36",109,0)
 .K RMPRFDA,RMPRFME
"RTN","RMPRPS36",110,0)
 .S RMPRIEN=RMI_","
"RTN","RMPRPS36",111,0)
 .S RMPRFDA(661.11,RMPRIEN,.01)=RMHNEW
"RTN","RMPRPS36",112,0)
 .S RMPRFDA(661.11,RMPRIEN,6)=RMHNEW_"-"_RMIT
"RTN","RMPRPS36",113,0)
 .D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS36",114,0)
 Q
"RTN","RMPRPS36",115,0)
 ;
"RTN","RMPRPS36",116,0)
F614 ; Update PIP files 661.4
"RTN","RMPRPS36",117,0)
 K RMI
"RTN","RMPRPS36",118,0)
 F RMI=0:0 S RMI=$O(^RMPR(661.4,"B",RMHOLD,RMI)) Q:RMI'>0  D
"RTN","RMPRPS36",119,0)
 .Q:'$D(^RMPR(661.4,RMI,0))
"RTN","RMPRPS36",120,0)
 .K RMPRFDA,RMPRFME
"RTN","RMPRPS36",121,0)
 .S RMPRIEN=RMI_","
"RTN","RMPRPS36",122,0)
 .S RMPRFDA(661.4,RMPRIEN,.01)=RMHNEW
"RTN","RMPRPS36",123,0)
 .D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS36",124,0)
 Q
"RTN","RMPRPS36",125,0)
 ;
"RTN","RMPRPS36",126,0)
F6141 ; Update PIP files 661.41
"RTN","RMPRPS36",127,0)
 K RMI
"RTN","RMPRPS36",128,0)
 F RMI=0:0 S RMI=$O(^RMPR(661.41,"B",RMHOLD,RMI)) Q:RMI'>0  D
"RTN","RMPRPS36",129,0)
 .Q:'$D(^RMPR(661.41,RMI,0))
"RTN","RMPRPS36",130,0)
 .K RMPRFDA,RMPRFME
"RTN","RMPRPS36",131,0)
 .S RMPRIEN=RMI_","
"RTN","RMPRPS36",132,0)
 .S RMPRFDA(661.41,RMPRIEN,5)=RMHNEW
"RTN","RMPRPS36",133,0)
 .D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS36",134,0)
 Q
"RTN","RMPRPS36",135,0)
 ;
"RTN","RMPRPS36",136,0)
F616 ; Update PIP files 661.6
"RTN","RMPRPS36",137,0)
 K RMI
"RTN","RMPRPS36",138,0)
 F RMI=0:0 S RMI=$O(^RMPR(661.6,"B",RMHOLD,RMI)) Q:RMI'>0  D
"RTN","RMPRPS36",139,0)
 .Q:'$D(^RMPR(661.6,RMI,0))
"RTN","RMPRPS36",140,0)
 .K RMPRFDA,RMPRFME
"RTN","RMPRPS36",141,0)
 .S RMPRIEN=RMI_","
"RTN","RMPRPS36",142,0)
 .S RMPRFDA(661.6,RMPRIEN,.01)=RMHNEW
"RTN","RMPRPS36",143,0)
 .D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS36",144,0)
 Q
"RTN","RMPRPS36",145,0)
 ;
"RTN","RMPRPS36",146,0)
F6163 ; Update PIP files 661.63
"RTN","RMPRPS36",147,0)
 K RMI
"RTN","RMPRPS36",148,0)
 F RMI=0:0 S RMI=$O(^RMPR(661.63,RMI)) Q:RMI'>0  D
"RTN","RMPRPS36",149,0)
 .S RM63DAT=^RMPR(661.63,RMI,0)
"RTN","RMPRPS36",150,0)
 .S RM63HCP=$P(RM63DAT,U,4)
"RTN","RMPRPS36",151,0)
 .Q:RM63HCP'=RMHOLD
"RTN","RMPRPS36",152,0)
 .K RMPRFDA,RMPRFME
"RTN","RMPRPS36",153,0)
 .S RMPRIEN=RMI_","
"RTN","RMPRPS36",154,0)
 .S RMPRFDA(661.63,RMPRIEN,4)=RMHNEW
"RTN","RMPRPS36",155,0)
 .D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS36",156,0)
 Q
"RTN","RMPRPS36",157,0)
 ;
"RTN","RMPRPS36",158,0)
F617 ; Update PIP files 661.7
"RTN","RMPRPS36",159,0)
 K RMI
"RTN","RMPRPS36",160,0)
 F RMI=0:0 S RMI=$O(^RMPR(661.7,"B",RMHOLD,RMI)) Q:RMI'>0  D
"RTN","RMPRPS36",161,0)
 .Q:'$D(^RMPR(661.7,RMI,0))
"RTN","RMPRPS36",162,0)
 .K RMPRFDA,RMPRFME
"RTN","RMPRPS36",163,0)
 .S RMPRIEN=RMI_","
"RTN","RMPRPS36",164,0)
 .S RMPRFDA(661.7,RMPRIEN,.01)=RMHNEW
"RTN","RMPRPS36",165,0)
 .D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS36",166,0)
 Q
"RTN","RMPRPS36",167,0)
 ;
"RTN","RMPRPS36",168,0)
F619 ; Update PIP files 661.9
"RTN","RMPRPS36",169,0)
 K RMI
"RTN","RMPRPS36",170,0)
 F RMI=0:0 S RMI=$O(^RMPR(661.9,RMI)) Q:RMI'>0  D
"RTN","RMPRPS36",171,0)
 .S RM9DAT=^RMPR(661.9,RMI,0)
"RTN","RMPRPS36",172,0)
 .S RM9HCP=$P(RM9DAT,U,2)
"RTN","RMPRPS36",173,0)
 .Q:RM9HCP'=RMHOLD
"RTN","RMPRPS36",174,0)
 .K RMPRFDA,RMPRFME
"RTN","RMPRPS36",175,0)
 .S RMPRIEN=RMI_","
"RTN","RMPRPS36",176,0)
 .S RMPRFDA(661.9,RMPRIEN,1)=RMHNEW
"RTN","RMPRPS36",177,0)
 .D FILE^DIE("","RMPRFDA","RMPRFME")
"RTN","RMPRPS36",178,0)
 Q
"RTN","RMPRPS36",179,0)
 ;
"RTN","RMPRPS36",180,0)
 ;for next update, change RMPRA() local array to the HCPCS that need
"RTN","RMPRPS36",181,0)
 ;to be replaced.
"RTN","RMPRPS36",182,0)
PAT76 ; Set up array and replace HCPCS
"RTN","RMPRPS36",183,0)
 S U="^"
"RTN","RMPRPS36",184,0)
 I '$D(IO("Q")) D
"RTN","RMPRPS36",185,0)
 . W !!,"Replacing the following HCPCS...",!
"RTN","RMPRPS36",186,0)
 . Q
"RTN","RMPRPS36",187,0)
 ;list of replacement HCPCS.
"RTN","RMPRPS36",188,0)
 ;K RMPRA
"RTN","RMPRPS36",189,0)
 ;S RMPRA(1)="K0182^A7018"
"RTN","RMPRPS36",190,0)
 ;S RMPRA(2)="K0269^E0572"
"RTN","RMPRPS36",191,0)
 S I=""
"RTN","RMPRPS36",192,0)
 ;patch #76 - replacement code
"RTN","RMPRPS36",193,0)
 F RMIJ=0:0 S RMIJ=$O(^RMPR(661.1,"RMPR",RMIJ)) Q:RMIJ'>0  D
"RTN","RMPRPS36",194,0)
 .S RMHDA=^RMPR(661.1,"RMPR",RMIJ)
"RTN","RMPRPS36",195,0)
 .S RMHOLD=$P(RMHDA,"^",1),RMHNEW=$P(RMHDA,U,2)
"RTN","RMPRPS36",196,0)
 .I '$D(IO("Q")) D
"RTN","RMPRPS36",197,0)
 .. W !,RMHOLD," with ",RMHNEW
"RTN","RMPRPS36",198,0)
 .;convert 661.11
"RTN","RMPRPS36",199,0)
 .D F6111
"RTN","RMPRPS36",200,0)
 .;convert 661.4
"RTN","RMPRPS36",201,0)
 .D F614
"RTN","RMPRPS36",202,0)
 .;convert 661.41
"RTN","RMPRPS36",203,0)
 .D F6141
"RTN","RMPRPS36",204,0)
 .;convert 661.6
"RTN","RMPRPS36",205,0)
 .D F616
"RTN","RMPRPS36",206,0)
 .;convert 661.7
"RTN","RMPRPS36",207,0)
 .D F617
"RTN","RMPRPS36",208,0)
 .;convert 661.9
"RTN","RMPRPS36",209,0)
 .D F619
"RTN","RMPRPS36",210,0)
 I '$D(IO("Q")) D
"RTN","RMPRPS36",211,0)
 . W !!,"HCPCS replacement complete.",!
"RTN","RMPRPS36",212,0)
 . Q
"RTN","RMPRPS36",213,0)
 Q
"VER")
8.0^22
**END**
**END**

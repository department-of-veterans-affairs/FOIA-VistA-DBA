$TXT Created by SCHMITZ,STEVEN at MNTVBB.FO-WASH.MED.VA.GOV  (KIDS) on Tuesday, 05/09/06 at 14:14
=============================================================================
Run Date: JUN 01, 2006                     Designation: PRC*5.1*97
Package : PRC - IFCAP                         Priority: Mandatory
Version : 5.1        SEQ #83                    Status: Released
                  Compliance Date: JUL 02, 2006
=============================================================================


Subject: ADD EXIT LOGIC TO 'AMENDMENT TO PURCHASE ORDER' FUNCTION

Category: 
  - Routine

Description:
============

 This patch addresses 3 items:
  
 The first item is a correction to the code of option DISPLAY CONTROL POINT
 OFFICIAL'S BALANCE to fix a runtime syntax error and to allow the user to
 '^' out of the report display page-by-page scrolling functionality.
  
 The second item is a modification to the option AMENDMENT TO PURCHASE 
 ORDER which will allow the user to exit the user prompts while performing
 a Line Item Add.  The user will be able to use the standard '^' to exit
 the prompts. If the user did not enter a value for the Quantity field, 
 the line item is deleted.
  
 The third item is a modification to the option RETURN PURCHASE ORDER TO 
 SUPPLY.  The change is to prevent an undefined error from occurring
 when a future patch XM*8*36 is installed.  This change also fixes the
 proper implementation of calling ^XMD.
  
  
 ASSOCIATED REMEDY TICKETS:
 =========================
 1) HD55614   Error in PRCBSUT that shows up in DIE3
 2) HD119511  ERROR - <UNDEFINED>TOT+1^PRCHSF
 3) HD138396  XM*8*36 causes undefined error in EN732^PRCFAC
  
  
 PARTICIPATING TEST SITES:
 ========================
 Biloxi VAMC
 Central Texas HCS
 Montana HCS
  
  
 REMEDY OVERVIEW:
 ===============
 1) HD55614  Error in PRCBSUT that shows up in DIE3
  
 Problem:
 -------
 When the user is using the option DISPLAY CONTROL POINT OFFICIAL'S
 BALANCE, a runtime syntax error occurs that causes the processing to
 halt.  Also, during testing, it was discovered that the user cannot exit
 from the report output display on the screen without paging through the
 entire report.
  
 Resolution:
 ----------
 The invalid code for a call to lookup FileMan information was changed to 
 correct the syntax problem and the '^' exit logic was added.
  
  
 2) HD119511  ERROR - <UNDEFINED>TOT+1^PRCHSF
  
 Problem:
 -------
 It was requested that when running the option AMENDMENT TO PURCHASE
 ORDER, that the user be able to exit the LINE ITEM ADD with the standard
 '^' and if a quantity was not added to delete the line item.
  
 Resolution:
 ----------
 A change was made to allow the user to exit the LINE ITEM ADD function.
 If a value for Quantity was not entered, a message will be displayed
 indicating that the line item will be deleted.  The user will be brought
 back to the prompt asking them to select the Type of Amendment Number.
  
  
 3) HD138396  XM*8*36 causes undefined error in EN732^PRCFAC 
  
 Problem:
 -------
 During the site testing of test patch XM*8.0*36 V1, sites noticed an 
 undefined error at EN732^PRCFAC.  This error does not occur without this 
 patch installed.  The problem involves routine PRCFAC setting local data
 to the % variable.  This variable is used to handle DIC calls, so when an
 external call is made, % is being changed and coming back undefined from
 the called routine.
  
 Resolution:
 ----------
 In routine PRCFAC, the variable % was changed to PERCNT.  An additional
 change was also made to correctly implement the call to ^XMD, this 
 required a N DIFROM statement prior to D ^XMD.
  
  
 ==================INSTALLATION INSTRUCTIONS===========================
   
    This patch can be installed with users on the system but since some 
    items will be out of order, it is recommended that it be queued for 
    non-peak hours.
  
    Install Time - less than 2 minutes.  
   
    1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu.
  
    2. From the Kernel Installation & Distribution System menu, select
       the Installation menu option.
  
    3. From this menu, you may select to use the following options
       (when prompted for INSTALL NAME, enter PRC*5.1*97)
       a.  Verify Checksums in Transport Global - This option will allow
           you to ensure the integrity of the routines that are in the
           transport global.
       b.  Print Transport Global - This option will allow you to view
           the components of the KIDS build.
       c.  Compare Transport Global to Current System - This option will
           allow you to view all changes that will be made when this patch
           is installed.  It compares all components of this patch
           (routines, DD's, templates, etc.).
       d.  Backup a Transport Global - This option will create a backup
           message of any routines exported with this patch. It will not
           backup any other changes such as DD's or templates.
  
    4. Use the Install Package(s) option and select the package PRC*5.1*97.
  
    5. When prompted "Want KIDS to INHIBIT LOGONs during the install?
       YES//" respond NO.
  
    6. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? YES//" respond YES.
  
       When prompted to select the options you would like to place out of
       order, enter the following:
  
       DISPLAY CONTROL POINT OFFICIAL'S BALANCE [PRCB CPA RUNNING BALANCE]
       AMENDMENT TO PURCHASE ORDER              [PRCHPC AMEND]
       RETURN PURCHASE ORDER TO SUPPLY          [PRCFA RETURN TO SUPPLY]
  
    7. When prompted 'Enter protocols you wish to mark as 'Out Of Order':'
       press <return>.
  
  
 ROUTINE SUMMARY
 ===============
 The following is a list of the routines included in this patch.
 The second line of each of these routines looks like:
  
                 ;;5.1;IFCAP;**[patch list]**;Oct 20, 2000
  
  
                    CHECK^XTSUMBLD results
  
   Routine       Before Patch    After Patch     Patch List
   -------       ------------    -----------     ----------
   PRCBCPR       5786976         5861342                 97
   PRCBSUT       3664273         3655020                 97
   PRCFAC        16573981        16053981                97
   PRCFACS1      2516899         2615451                 97
   PRCHMA0       10261524        10726489                97

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PRCBCPR
    Before:  B7069708  After:  B7148946  **97**
Routine Name: PRCBSUT
    Before:  B4379563  After:  B4369244  **97**
Routine Name: PRCFAC
    Before: B23345023  After: B22964705  **97**
Routine Name: PRCFACS1
    Before:  B2903354  After:  B3012091  **97**
Routine Name: PRCHMA0
    Before: B31157233  After: B33867696  **97**

=============================================================================
User Information:
Entered By  : SCHMITZ,STEVEN                Date Entered  : FEB 08, 2006
Completed By: WERNER,GARY                   Date Completed: JUN 01, 2006
Released By : NELSON,VICKI M                Date Released : JUN 01, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

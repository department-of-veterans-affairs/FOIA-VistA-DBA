Released OR*3*239 SEQ #219
Extracted from mail message
**KIDS**:OR*3.0*239^

**INSTALL NAME**
OR*3.0*239
"BLD",6030,0)
OR*3.0*239^ORDER ENTRY/RESULTS REPORTING^0^3050818^y
"BLD",6030,1,0)
^^1^1^3041201^^^^
"BLD",6030,1,1,0)
Refer to the patch description on the patch message.
"BLD",6030,4,0)
^9.64PA^^0
"BLD",6030,"ABNS",0)
^9.66A^^
"BLD",6030,"ABPKG")
n^n^
"BLD",6030,"INI")

"BLD",6030,"INIT")

"BLD",6030,"KRN",0)
^9.67PA^8989.52^20
"BLD",6030,"KRN",.4,0)
.4
"BLD",6030,"KRN",.401,0)
.401
"BLD",6030,"KRN",.402,0)
.402
"BLD",6030,"KRN",.403,0)
.403
"BLD",6030,"KRN",.5,0)
.5
"BLD",6030,"KRN",.84,0)
.84
"BLD",6030,"KRN",3.6,0)
3.6
"BLD",6030,"KRN",3.8,0)
3.8
"BLD",6030,"KRN",9.2,0)
9.2
"BLD",6030,"KRN",9.8,0)
9.8
"BLD",6030,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6030,"KRN",9.8,"NM",1,0)
ORWCIRN^^0^B10383357
"BLD",6030,"KRN",9.8,"NM","B","ORWCIRN",1)

"BLD",6030,"KRN",19,0)
19
"BLD",6030,"KRN",19,"NM",0)
^9.68A^^
"BLD",6030,"KRN",19.1,0)
19.1
"BLD",6030,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",6030,"KRN",101,0)
101
"BLD",6030,"KRN",101,"NM",0)
^9.68A^^0
"BLD",6030,"KRN",409.61,0)
409.61
"BLD",6030,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",6030,"KRN",771,0)
771
"BLD",6030,"KRN",869.2,0)
869.2
"BLD",6030,"KRN",870,0)
870
"BLD",6030,"KRN",8989.51,0)
8989.51
"BLD",6030,"KRN",8989.52,0)
8989.52
"BLD",6030,"KRN",8994,0)
8994
"BLD",6030,"KRN","B",.4,.4)

"BLD",6030,"KRN","B",.401,.401)

"BLD",6030,"KRN","B",.402,.402)

"BLD",6030,"KRN","B",.403,.403)

"BLD",6030,"KRN","B",.5,.5)

"BLD",6030,"KRN","B",.84,.84)

"BLD",6030,"KRN","B",3.6,3.6)

"BLD",6030,"KRN","B",3.8,3.8)

"BLD",6030,"KRN","B",9.2,9.2)

"BLD",6030,"KRN","B",9.8,9.8)

"BLD",6030,"KRN","B",19,19)

"BLD",6030,"KRN","B",19.1,19.1)

"BLD",6030,"KRN","B",101,101)

"BLD",6030,"KRN","B",409.61,409.61)

"BLD",6030,"KRN","B",771,771)

"BLD",6030,"KRN","B",869.2,869.2)

"BLD",6030,"KRN","B",870,870)

"BLD",6030,"KRN","B",8989.51,8989.51)

"BLD",6030,"KRN","B",8989.52,8989.52)

"BLD",6030,"KRN","B",8994,8994)

"BLD",6030,"QUES",0)
^9.62^^
"BLD",6030,"REQB",0)
^9.611^1^1
"BLD",6030,"REQB",1,0)
OR*3.0*208^2
"BLD",6030,"REQB","B","OR*3.0*208",1)

"MBREQ")
0
"PKG",110,-1)
1^1
"PKG",110,0)
ORDER ENTRY/RESULTS REPORTING^OR^Order Entry/Results Reporting
"PKG",110,20,0)
^9.402P^^
"PKG",110,22,0)
^9.49I^1^1
"PKG",110,22,1,0)
3.0^2971217
"PKG",110,22,1,"PAH",1,0)
239^3050818
"PKG",110,22,1,"PAH",1,1,0)
^^1^1^3050818
"PKG",110,22,1,"PAH",1,1,1,0)
Refer to the patch description on the patch message.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","ORWCIRN")
0^1^B10383357
"RTN","ORWCIRN",1,0)
ORWCIRN ; slc/dcm,REV - Functions for GUI CIRN ACTIONS ;22-NOV-1999 07:27:24
"RTN","ORWCIRN",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**10,101,109,132,141,160,208,239**;October 28, 1997
"RTN","ORWCIRN",3,0)
 ;
"RTN","ORWCIRN",4,0)
FACLIST(ORY,ORDFN) ; Return list of remote facilities for patient
"RTN","ORWCIRN",5,0)
 ;Check to see if CIRN PD/MPI installed
"RTN","ORWCIRN",6,0)
 N X,ORSITES,I,IFN,LOCAL,CTR,HDRFLG
"RTN","ORWCIRN",7,0)
 S X="MPIF001" X ^%ZOSF("TEST")
"RTN","ORWCIRN",8,0)
 I '$T S ORY(0)="-1^CIRN MPI not installed." Q
"RTN","ORWCIRN",9,0)
 S X="VAFCTFU1" X ^%ZOSF("TEST")
"RTN","ORWCIRN",10,0)
 I '$T S ORY(0)="-1^Remote data view not installed." Q
"RTN","ORWCIRN",11,0)
 S X=$$GET^XPAR("ALL","ORWRP CIRN REMOTE DATA ALLOW",1,"I")
"RTN","ORWCIRN",12,0)
 I 'X S ORY(0)="-1^Remote access not allowed" Q
"RTN","ORWCIRN",13,0)
 D TFL^VAFCTFU1(.ORY,ORDFN)
"RTN","ORWCIRN",14,0)
 S HDRFLG=0
"RTN","ORWCIRN",15,0)
 I $$GET^XPAR("ALL","ORWRP CIRN SITES ALL",1,"I") D
"RTN","ORWCIRN",16,0)
 . S (CTR,I)=0
"RTN","ORWCIRN",17,0)
 . F  S I=$O(ORY(I)) Q:'I  S $P(ORY(I),"^",5)=1,CTR=CTR+1 D
"RTN","ORWCIRN",18,0)
 .. I $P(ORY(I),"^")=776!($P(ORY(I),"^")=200) S $P(ORY(I),"^",2)="DEPT. OF DEFENSE"
"RTN","ORWCIRN",19,0)
 .. I $P(ORY(I),"^")="200HD" K ORY(I) S CTR=CTR-1 ; HDR disable code... remove line to re-enable with 'trigger' patch
"RTN","ORWCIRN",20,0)
 .. ;I $P(ORY(I),"^")="200HD" S HDRFLG=I ; Remove commented out code to enable HDR + 1 other site. 
"RTN","ORWCIRN",21,0)
 D GETLST^XPAR(.ORSITES,"ALL","ORWRP CIRN SITES","I")
"RTN","ORWCIRN",22,0)
 S (CTR,I)=0,LOCAL=$P($$SITE^VASITE,"^",3)
"RTN","ORWCIRN",23,0)
 F  S I=$O(ORY(I)) Q:'I  D
"RTN","ORWCIRN",24,0)
 . I +ORY(I)=+LOCAL K ORY(I) Q
"RTN","ORWCIRN",25,0)
 . S IFN=$$IEN^XUAF4(ORY(I)),CTR=CTR+1
"RTN","ORWCIRN",26,0)
 . I IFN,$G(ORSITES(IFN)) S $P(ORY(I),"^",5)=1 I $P(ORY(I),"^")=776!($P(ORY(I),"^")=200) S $P(ORY(I),"^",2)="DEPT. OF DEFENSE"
"RTN","ORWCIRN",27,0)
 . I IFN,$G(ORSITES(IFN)),$P(ORY(I),"^")="200HD" K ORY(I) S CTR=CTR-1 ; HDR disable code... remove line to re-enable with 'trigger' patch
"RTN","ORWCIRN",28,0)
 . ;I IFN,$G(ORSITES(IFN)),$P(ORY(I),"^")="200HD" S HDRFLG=I ; Remove commented out code to enable HDR + 1 other site. 
"RTN","ORWCIRN",29,0)
 I '$L($O(ORY(""))) S ORY(0)="-1^Only local data exists for this patient"
"RTN","ORWCIRN",30,0)
 ;I $G(HDRFLG),CTR'>1 K ORY(HDRFLG) S ORY(0)="-1^Only HDR has data for this patient" ; Remove commented out code to enable HDR + 1 other site.
"RTN","ORWCIRN",31,0)
 Q
"RTN","ORWCIRN",32,0)
RESTRICT(ORY,PATID) ;Check for sensitive patient
"RTN","ORWCIRN",33,0)
 N DFN,ICN,SITE
"RTN","ORWCIRN",34,0)
 I '$G(PATID) S ORY(1)="-1",ORY(2)="Invalid Patient ID" Q
"RTN","ORWCIRN",35,0)
 S ICN=$P(PATID,";",2)
"RTN","ORWCIRN",36,0)
 I 'ICN S ORY(1)="-1",ORY(2)="Invalid ICN" Q
"RTN","ORWCIRN",37,0)
 S SITE=$$SITE^VASITE,SITE=$P(SITE,"^",2)_";"_$P(SITE,"^",3)
"RTN","ORWCIRN",38,0)
 S DFN=+$$GETDFN^MPIF001(ICN)
"RTN","ORWCIRN",39,0)
 I DFN<0 S ORY(1)="-1",ORY(2)="Patient not found on remote system ("_SITE_")" Q
"RTN","ORWCIRN",40,0)
 D PTSEC^DGSEC4(.ORY,DFN)
"RTN","ORWCIRN",41,0)
 Q
"RTN","ORWCIRN",42,0)
CHKLNK(ORY) ;Check for active HL7 TCP link on local system
"RTN","ORWCIRN",43,0)
 S ORY=$$STAT^HLCSLM
"RTN","ORWCIRN",44,0)
 Q
"RTN","ORWCIRN",45,0)
VISTAWEB(ORY)   ;Check VistaWeb Parameter
"RTN","ORWCIRN",46,0)
 S ORY=+$$GET^XPAR("ALL","ORWRP VISTAWEB",1,"I")
"RTN","ORWCIRN",47,0)
 Q
"RTN","ORWCIRN",48,0)
WEBCH(ORY,ORVALUE)      ;Change value of ORWRP VISTAWEB parameter
"RTN","ORWCIRN",49,0)
 D PUT^XPAR(DUZ_";VA(200,","ORWRP VISTAWEB",1,ORVALUE)
"RTN","ORWCIRN",50,0)
 Q
"RTN","ORWCIRN",51,0)
WEBADDR(ORY,PATID)      ;Get VistaWeb Address
"RTN","ORWCIRN",52,0)
 S ORY=$$GET^XPAR("ALL","ORWRP VISTAWEB ADDRESS",1,"I")
"RTN","ORWCIRN",53,0)
 I ORY="" S ORY="https://vistaweb.med.va.gov" Q
"RTN","ORWCIRN",54,0)
 I ORY="https://vistaweb.med.va.gov" Q
"RTN","ORWCIRN",55,0)
 S ORY=ORY_"?q9gtw0="_$P($$SITE^VASITE,"^",3)_"&xqi4z="_PATID_"&yiicf="_DUZ
"RTN","ORWCIRN",56,0)
 Q
"VER")
8.0^22.0
"BLD",6030,6)
^SEQ #219
**END**
**END**

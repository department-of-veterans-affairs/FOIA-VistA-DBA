$TXT Created by DAMICO,VITO at MNTVBB.ISC-ALBANY.VA.GOV  (KIDS) on WEDNESDAY, 11/17/99 at 11:45
=============================================================================
Run Date: MAR 30, 2000                     Designation: ES*1*29
Package : ES - POLICE & SECURITY             Priority: Mandatory
Version : 1        SEQ #28                      Status: Released
=============================================================================

Associated patches: (v)ES*1*21     <<= must be installed BEFORE `ES*1*29'

Subject: TO CORRECT PROBLEM WHEN PRINTING TO SLAVE PRINTER

Category: 
  - Routine

Description: 
============

 The purpose of this patch is to correct the problem where the process
 seems to hang after a Quick Name Check [ESP QUICK NAME] report is sent to
 a slave printer.  Though the process in not truly hung, because it is not
 closed properly, the slave printer continues to control the process after
 the report is finished printing.  This patch properly closes the output
 device and returns control to the main routine upon the report having
 completed.
  
 The routine that is being modified to solve this problem is ESPQNC.
  
 This problem was reported in NOIS BED-0898-10917 and also in NOIS
 DUB-0998-31947.
  
  
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
      <tab>;;1.0;POLICE & SECURITY;**[patch list]**;Mar 31, 1994
  
                             CHECK^XTSUMBLD results
  
 Routine name        Before Patch       After Patch       Patch List
 ============        ============       ===========       ==========
 ESPQNC                  17509852          17356213       2,18,21,29
                 Number of routines - 1
  
  
  
 INSTALLATION INSTRUCTIONS:
 ===========================
 This patch should be loaded during non-peak hours to minimize disruption
 to users.  Installation will take less than 1 minute.
  
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
     the KIDS distribution included with this message.
  
 2.  Review your mapped set. If any of the routines listed in the ROUTINE 
     SUMMARY section are mapped, they should be removed from the mapped set
     at this time.
  
 3.  From the Kernel Installation and Distribution System Menu, select 
     the Installation menu.  
  
 4.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter ES*1.0*29):
  
     a.  Backup a Transport Global  - this option will create a backup
         message of any routines exported with the patch.  It will NOT
         backup any other changes such as DDs or templates.
  
     b.  Compare Transport Global to Current System  - this option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch (routines,
         DDs, templates, etc.).
  
     c.  Verify Checksums in Transport Global - this option will
         allow you to ensure the integrity of the routines that are in
         the transport global.
  
     d.  Print Transport Global - this option will allow you to view the
         components of the KIDS build.
  
 5.  Use the Install Package(s) option and select the package ES*1.0*29.
  
 6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
     YES??//',respond NO.
  
 7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? YES//', respond YES.  When prompted to select the options
     you would like to place out of order, enter the following:
  
                    Quick Name Check            [ESP QUICK NAME]
  
 8.  If a routine was unmapped as part of step 2, it should be returned
     to the mapped set once the installation has run to completion.

Routine Information:
====================

Routine Name:
  - ESPQNC

 The change that was made to correct the problem was to comment out the
 following logic at SELX^ESPQNC+9:
  
      S %ZIS="Q" D ^%ZIS I POP S ESPSTP=1 Q
      I '$D(IO("Q")) U IO D DISP D:IO'=IO(0) ^%ZISC Q
      S ZTRTN="DISP^ESPQNC",ZTSAVE("ESP*")="",ZTDESC="QUICK NAME CHECK" D
 ^%ZTLOAD,HOME^%ZIS
  
  and replace them with the following lines of code:
  
      N ZTRTN,ZTSAVE,ZTDESC
      S ZTRTN="DISP^ESPQNC",ZTSAVE("ESP*")="",ZTDESC="QUICK NAME CHECK"
      W ! D EN^XUTMDEVQ(ZTRTN,ZTDESC,.ZTSAVE)

Routine Checksum:

=============================================================================
User Information:                               
Entered By  : D'AMICO,VITO                   Date Entered : OCT 20, 1999
Completed By: MARKS,MARY                    Date Completed: MAR 30, 2000
Released By : HUTCHINSON,PATRICIA ANN      Date Released : MAR 30, 2000
=============================================================================


Packman Mail Message:
=====================

$END TXT

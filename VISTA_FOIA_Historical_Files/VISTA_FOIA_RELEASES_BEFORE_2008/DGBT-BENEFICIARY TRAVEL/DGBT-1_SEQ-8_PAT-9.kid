Released DGBT*1*9 SEQ #8
Extracted from mail message
**KIDS**:DGBT*1.0*9^

**INSTALL NAME**
DGBT*1.0*9
"BLD",5233,0)
DGBT*1.0*9^BENEFICIARY TRAVEL^0^3040819^y
"BLD",5233,1,0)
^^1^1^3040818^
"BLD",5233,1,1,0)
Disable Corefls/Reversion back to VistA software ONLY.
"BLD",5233,4,0)
^9.64PA^43^1
"BLD",5233,4,43,0)
43
"BLD",5233,4,43,2,0)
^9.641^43^1
"BLD",5233,4,43,2,43,0)
MAS PARAMETERS  (File-top level)
"BLD",5233,4,43,2,43,1,0)
^9.6411^723^1
"BLD",5233,4,43,2,43,1,723,0)
COREFLS ACTIVE
"BLD",5233,4,43,222)
y^n^p^^^^n^^n
"BLD",5233,4,43,224)

"BLD",5233,4,"APDD",43,43)

"BLD",5233,4,"APDD",43,43,723)

"BLD",5233,4,"B",43,43)

"BLD",5233,"ABPKG")
n
"BLD",5233,"INI")
PRE^DGBT1P9
"BLD",5233,"INIT")
POST^DGBT1P9
"BLD",5233,"KRN",0)
^9.67PA^8989.52^19
"BLD",5233,"KRN",.4,0)
.4
"BLD",5233,"KRN",.401,0)
.401
"BLD",5233,"KRN",.402,0)
.402
"BLD",5233,"KRN",.403,0)
.403
"BLD",5233,"KRN",.5,0)
.5
"BLD",5233,"KRN",.84,0)
.84
"BLD",5233,"KRN",3.6,0)
3.6
"BLD",5233,"KRN",3.8,0)
3.8
"BLD",5233,"KRN",9.2,0)
9.2
"BLD",5233,"KRN",9.8,0)
9.8
"BLD",5233,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5233,"KRN",9.8,"NM",1,0)
DGBTCD^^0^B21439384
"BLD",5233,"KRN",9.8,"NM","B","DGBTCD",1)

"BLD",5233,"KRN",19,0)
19
"BLD",5233,"KRN",19.1,0)
19.1
"BLD",5233,"KRN",101,0)
101
"BLD",5233,"KRN",409.61,0)
409.61
"BLD",5233,"KRN",771,0)
771
"BLD",5233,"KRN",870,0)
870
"BLD",5233,"KRN",8989.51,0)
8989.51
"BLD",5233,"KRN",8989.52,0)
8989.52
"BLD",5233,"KRN",8994,0)
8994
"BLD",5233,"KRN","B",.4,.4)

"BLD",5233,"KRN","B",.401,.401)

"BLD",5233,"KRN","B",.402,.402)

"BLD",5233,"KRN","B",.403,.403)

"BLD",5233,"KRN","B",.5,.5)

"BLD",5233,"KRN","B",.84,.84)

"BLD",5233,"KRN","B",3.6,3.6)

"BLD",5233,"KRN","B",3.8,3.8)

"BLD",5233,"KRN","B",9.2,9.2)

"BLD",5233,"KRN","B",9.8,9.8)

"BLD",5233,"KRN","B",19,19)

"BLD",5233,"KRN","B",19.1,19.1)

"BLD",5233,"KRN","B",101,101)

"BLD",5233,"KRN","B",409.61,409.61)

"BLD",5233,"KRN","B",771,771)

"BLD",5233,"KRN","B",870,870)

"BLD",5233,"KRN","B",8989.51,8989.51)

"BLD",5233,"KRN","B",8989.52,8989.52)

"BLD",5233,"KRN","B",8994,8994)

"BLD",5233,"PRE")
DGBT1P9
"BLD",5233,"QUES",0)
^9.62^^
"BLD",5233,"REQB",0)
^9.611^1^1
"BLD",5233,"REQB",1,0)
DGBT*1.0*7^1
"BLD",5233,"REQB","B","DGBT*1.0*7",1)

"FIA",43)
MAS PARAMETERS
"FIA",43,0)
^DG(43,
"FIA",43,0,0)
43
"FIA",43,0,1)
y^n^p^^^^n^^n
"FIA",43,0,10)

"FIA",43,0,11)

"FIA",43,0,"RLRO")

"FIA",43,0,"VR")
1.0^DGBT
"FIA",43,43)
1
"FIA",43,43,723)

"INI")
PRE^DGBT1P9
"INIT")
POST^DGBT1P9
"MBREQ")
0
"PKG",154,-1)
1^1
"PKG",154,0)
BENEFICIARY TRAVEL^DGBT^Beneficiary Travel
"PKG",154,20,0)
^9.402P^^
"PKG",154,22,0)
^9.49I^1^1
"PKG",154,22,1,0)
1.0^3020319^3031219^66481
"PKG",154,22,1,"PAH",1,0)
9^3040819^123456825
"PKG",154,22,1,"PAH",1,1,0)
^^1^1^3040819
"PKG",154,22,1,"PAH",1,1,1,0)
Disable Corefls/Reversion back to VistA software ONLY.
"PRE")
DGBT1P9
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","DGBT1P9")
0^^B2985323
"RTN","DGBT1P9",1,0)
DGBT1P9 ;ALB/MRY - Patch #9 Environment/Post-init ; 8/18/04
"RTN","DGBT1P9",2,0)
 ;;1.0;Beneficiary Travel;**9**;Septembr 25, 2001
"RTN","DGBT1P9",3,0)
EN ;
"RTN","DGBT1P9",4,0)
 S XPDABORT=""
"RTN","DGBT1P9",5,0)
 I '$G(DUZ)!($G(DUZ(0))'="@")!('$G(DT))!($G(U)'="^") D  G ABRT
"RTN","DGBT1P9",6,0)
 . D BMES^XPDUTL("*****")
"RTN","DGBT1P9",7,0)
 . D MES^XPDUTL("Your programming variables are not set up properly.")
"RTN","DGBT1P9",8,0)
 . D MES^XPDUTL("Installation aborted.")
"RTN","DGBT1P9",9,0)
 ; Verify that Bene Travel v1.0 exists, else Quit.
"RTN","DGBT1P9",10,0)
 I $$VERSION^XPDUTL("DGBT")'="1.0" D  G ABRT
"RTN","DGBT1P9",11,0)
 . D BMES^XPDUTL("*****")
"RTN","DGBT1P9",12,0)
 . D MES^XPDUTL("VERSION 1.0 OF BENEFICIARY TRAVEL HAS NOT BEEN LOADED.")
"RTN","DGBT1P9",13,0)
 . D MES^XPDUTL("Installation aborted.")
"RTN","DGBT1P9",14,0)
 W !!,">> Environment check complete and okay."
"RTN","DGBT1P9",15,0)
 Q
"RTN","DGBT1P9",16,0)
 ;
"RTN","DGBT1P9",17,0)
ABRT ; Abort transport, but leave in ^XTMP.
"RTN","DGBT1P9",18,0)
 S ^XPDABORT=2 Q
"RTN","DGBT1P9",19,0)
 ;
"RTN","DGBT1P9",20,0)
PRE ; Set 'NO' to COREFLS ACTIVE (#723) in MAS PARAMETERS (#43) File.
"RTN","DGBT1P9",21,0)
 N SEQ,IEN,OUT,DA K OUT
"RTN","DGBT1P9",22,0)
 D LIST^DIC(43,"","@","","","","","","","","OUT")
"RTN","DGBT1P9",23,0)
 S SEQ=0 F  S SEQ=$O(OUT("DILIST",2,SEQ)) Q:'SEQ  D
"RTN","DGBT1P9",24,0)
 . S IEN=OUT("DILIST",2,SEQ)
"RTN","DGBT1P9",25,0)
 . S DA=IEN,DR="723///NO",DIE="^DG(43," D ^DIE
"RTN","DGBT1P9",26,0)
 Q
"RTN","DGBT1P9",27,0)
 ;
"RTN","DGBT1P9",28,0)
POST ; Disable BeneTravel Corefls options.
"RTN","DGBT1P9",29,0)
 N DIC,TEXT,COUNT
"RTN","DGBT1P9",30,0)
 S DIC="^DIC(19,",DIC(0)="X",COUNT=0
"RTN","DGBT1P9",31,0)
 F X="DGBT LOCAL VENDOR ADD","DGBT LOCAL VENDOR MENU","DGBT LOCAL VENDOR UPDATE" D
"RTN","DGBT1P9",32,0)
 . D ^DIC Q:Y<0  S COUNT=COUNT+1 D
"RTN","DGBT1P9",33,0)
 .. I COUNT=1 D BMES^XPDUTL("*****")
"RTN","DGBT1P9",34,0)
 .. D MES^XPDUTL("Putting ["_X_"] option - 'out of order'")
"RTN","DGBT1P9",35,0)
 .. S TEXT="CoreFLS Disabled (DBGT*1*9)"
"RTN","DGBT1P9",36,0)
 .. D OUT^XPDMENU(X,TEXT)
"RTN","DGBT1P9",37,0)
 Q
"RTN","DGBTCD")
0^1^B21439384
"RTN","DGBTCD",1,0)
DGBTCD ;ALB/SCK - BENEFICIARY TRAVEL CLAIM DISPLAY; 12/15/92 4/14/93
"RTN","DGBTCD",2,0)
 ;;1.0;Beneficiary Travel;**2,7,9**;September 25, 2001
"RTN","DGBTCD",3,0)
 Q
"RTN","DGBTCD",4,0)
SCREEN Q:'$D(^DGBT(392,DGBTDT,0))  S U="^" K DGBTVAR F I=0,"A","D","M","R","T" S DGBTVAR(I)=$S($D(^DGBT(392,DGBTDT,I)):^(I),1:"")
"RTN","DGBTCD",5,0)
 S DGBTACCT=$S($D(^DGBT(392.3,+$P(DGBTVAR(0),U,6),0)):$P($G(^(0)),U,5),1:0)
"RTN","DGBTCD",6,0)
 I 'DGBTACCT W !!,*7,">> WARNING! No ACCOUNT TYPE for this claim, Please correct through Claim Enter/Edit!" G QUIT
"RTN","DGBTCD",7,0)
 W @IOF
"RTN","DGBTCD",8,0)
 W !?18,"Beneficiary Travel Claim Information <Display>"
"RTN","DGBTCD",9,0)
 W !!,?2,"Claim Date: ",DGBTDTE W:$P(DGBTVAR(0),U,11)'=""&($D(^DG(40.8,$P(DGBTVAR(0),U,11),0))) ?40,"Division: ",$P(^DG(40.8,$P(DGBTVAR(0),U,11),0),U)
"RTN","DGBTCD",10,0)
 D PID^VADPT6 W !!?8,"Name: ",VADM(1),?40,"PT ID: ",VA("PID"),?64,"DOB: ",$P(VADM(3),U,2)
"RTN","DGBTCD",11,0)
 S (DGBTFCTY,DGBTTCTY)=""
"RTN","DGBTCD",12,0)
 I $P(DGBTVAR("D"),U,4)]"" S DGBTCNA=$P(DGBTVAR("D"),U,4) D CITY^DGBTCR I DGBTCSZ[DGBTCNA D
"RTN","DGBTCD",13,0)
 . S DGBTCSZ=DGBTCNA_", "_$S(+$P(DGBTVAR("D"),U,5)>0:$P(^DIC(5,$P(DGBTVAR("D"),U,5),0),U,2),1:"")_"  "
"RTN","DGBTCD",14,0)
 . S Y=$P(DGBTVAR("D"),U,6),Y=$E(Y,1,5)_$S($E(Y,6,9)]"":"-"_$E(Y,6,9),1:"") S DGBTCSZ=DGBTCSZ_Y,DGBTFCTY=DGBTCSZ
"RTN","DGBTCD",15,0)
 I $P(DGBTVAR("T"),U,4)]"" S DGBTCNA=$P(DGBTVAR("T"),U,4) D CITY^DGBTCR S:DGBTCSZ[DGBTCNA DGBTCSZ=DGBTCNA_", "_$S(+$P(DGBTVAR("T"),U,5)>0:$P(^DIC(5,$P(DGBTVAR("T"),U,5),0),U,2),1:"")_"  "_$P(DGBTVAR("T"),U,6) S DGBTTCTY=DGBTCSZ
"RTN","DGBTCD",16,0)
FROM W !!," Depart From: ",$E($P(DGBTVAR("D"),U),1,30)
"RTN","DGBTCD",17,0)
 W ?46,"To: ",$E($P(DGBTVAR("T"),U),1,30)
"RTN","DGBTCD",18,0)
 W !?14 W:$P(DGBTVAR("D"),U,2)]"" $P(DGBTVAR("D"),U,2) W:$P(DGBTVAR("D"),U,2)="" $P(DGBTVAR("D"),U,3) W:$P(DGBTVAR("D"),U,2)=""&($P(DGBTVAR("D"),U,3)="") DGBTFCTY
"RTN","DGBTCD",19,0)
 W ?50 W:$P(DGBTVAR("T"),U,2)]"" $P(DGBTVAR("T"),U,2) W:$P(DGBTVAR("T"),U,2)="" $P(DGBTVAR("T"),U,3) W:$P(DGBTVAR("T"),U,2)=""&($P(DGBTVAR("T"),U,3)="") DGBTTCTY
"RTN","DGBTCD",20,0)
 W !?14 W:$P(DGBTVAR("D"),U,3)]"" $P(DGBTVAR("D"),U,3) W:$P(DGBTVAR("D"),U,2)]""&($P(DGBTVAR("D"),U,3)="") DGBTFCTY
"RTN","DGBTCD",21,0)
 W ?50 W:$P(DGBTVAR("T"),U,3)]"" $P(DGBTVAR("T"),U,3) W:$P(DGBTVAR("T"),U,2)]""&($P(DGBTVAR("T"),U,3)="") DGBTTCTY
"RTN","DGBTCD",22,0)
 W !?14 W:$P(DGBTVAR("D"),U,2)]""&($P(DGBTVAR("D"),U,3)]"") DGBTFCTY
"RTN","DGBTCD",23,0)
 W ?50 W:$P(DGBTVAR("T"),U,2)]""&($P(DGBTVAR("T"),U,3)]"") DGBTTCTY
"RTN","DGBTCD",24,0)
ELIG W !!," Eligibility: " W:$P(DGBTVAR(0),U,3) $P(^DIC(8,$P(DGBTVAR(0),U,3),0),U) W:$P(DGBTVAR(0),U,4)]"" ?45,"SC%: ",$P(DGBTVAR(0),U,4)
"RTN","DGBTCD",25,0)
 I $P(DGBTVAR(0),U,5) W ?57,"Cert. Date: " S VADAT("W")=9999999-$P($P(DGBTVAR(0),U,5),".") D ^VADATE W $P(VADATE("E"),"@") K VADAT,VADATE
"RTN","DGBTCD",26,0)
ACCT W !!?5,"Account: ",$S($P(DGBTVAR(0),U,6):$E($P(^DGBT(392.3,$P(DGBTVAR(0),U,6),0),U),1,15),1:"") W:$P(DGBTVAR("A"),U,3) ?31,"REVIEW VISIT"
"RTN","DGBTCD",27,0)
 W ?51,"Most Econ. Cost: " S X=$P(DGBTVAR(0),U,8),X2="2$" N X3 D COMMA^%DTC W X
"RTN","DGBTCD",28,0)
ATT I DGBTACCT=4!(DGBTACCT=5) W !,"Attend/Payee: ",$S($D(DGBTVAR("A")):$P(DGBTVAR("A"),U,2),1:"")
"RTN","DGBTCD",29,0)
 I DGBTACCT'=4&(DGBTACCT'=5) W !," Mode/Trans.: ",$S($P(DGBTVAR("A"),U,4):$P(^DGBT(392.4,$P(DGBTVAR("A"),U,4),0),U),1:"")
"RTN","DGBTCD",30,0)
 I $D(^DG(43,1,"BT")) I $P(^DG(43,1,"BT"),U,2)=1 W ?51,"Meals & Lodging: " S X=$P(DGBTVAR("M"),U,4) N X3 D COMMA^%DTC W X
"RTN","DGBTCD",31,0)
 I DGBTACCT=4!(DGBTACCT=5) W !,"One Way/"
"RTN","DGBTCD",32,0)
 I DGBTACCT'=4&(DGBTACCT'=5) D
"RTN","DGBTCD",33,0)
 . S DGX=$S($P(DGBTVAR(0),U,7):"Carrier",$P(DGBTVAR(0),U,14):"CoreFLS",1:"Carrier") W:DGX["FLS" !,"CoreFLS Carrier: " W:DGX["Carrier" !?5,"Carrier: "
"RTN","DGBTCD",34,0)
 . W $E($S((DGX["FLS"&$P(DGBTVAR(0),U,14)):$P(^DGBT(392.31,$P(DGBTVAR(0),U,14),0),U),(DGX["Carrier"&$P(DGBTVAR(0),U,7)):$P(^PRC(440,$P(DGBTVAR(0),U,7),0),U),1:""),1,27) K DGX
"RTN","DGBTCD",35,0)
 I $D(^DG(43,1,"BT")) I $P(^DG(43,1,"BT"),U,2)=1 W ?46,"Ferry, Bridges, Etc.: " S X=$P(DGBTVAR("M"),U,5) N X3 D COMMA^%DTC W X
"RTN","DGBTCD",36,0)
 I DGBTACCT=4!(DGBTACCT=5) W !?2,"Round Trip: ",$S($P(DGBTVAR("M"),U)=1:"ONE WAY",$P(DGBTVAR("M"),U)=2:"ROUND TRIP",1:"")
"RTN","DGBTCD",37,0)
 I DGBTACCT'=4&(DGBTACCT'=5) W !,"Auth. Person: " I $P(DGBTVAR("A"),U) W $S($D(DGBTVAR("A"))&($D(^VA(200,$P(DGBTVAR("A"),U),0))):$P(^VA(200,$P(DGBTVAR("A"),U),0),U),1:"")
"RTN","DGBTCD",38,0)
 I DGBTACCT=4!(DGBTACCT=5) W ?46,"Total Mileage Amount: " S X=$P(DGBTVAR("M"),U,3) N X3 D COMMA^%DTC W X
"RTN","DGBTCD",39,0)
 I DGBTACCT=4!(DGBTACCT=5) W !,"Mileage/"
"RTN","DGBTCD",40,0)
DED W ?48,"Applied Deductible: " S X=$P(DGBTVAR(0),U,9) N X3 D COMMA^%DTC W X
"RTN","DGBTCD",41,0)
 W ! W:DGBTACCT=4!(DGBTACCT=5) ?5,"One Way: ",$P(DGBTVAR("M"),U,2)_" MILES"
"RTN","DGBTCD",42,0)
 W ?52,"Amount Payable: " S X=$P(DGBTVAR(0),U,10) N X3 D COMMA^%DTC W X
"RTN","DGBTCD",43,0)
REMARK W !!,"Remarks: ",$S($D(^DGBT(392,DGBTDT,"R")):$P(^DGBT(392,DGBTDT,"R"),U),1:"")
"RTN","DGBTCD",44,0)
QUIT K DGBTCNA,DGBTCSZ,DGBTFCTY,DGBTTCTY,DGBTCNA,DGBTDIV,VADAM,X,X2,I
"RTN","DGBTCD",45,0)
 Q
"VER")
8.0^22
"^DD",43,43,723,0)
COREFLS ACTIVE^SXI^1:YES;0:NO;^BT;4^N DGBTX S DGBTX=X S X="CSLVQ" X ^%ZOSF("TEST") W:'$T "   ** COREFLS Package CSL V1.0 not installed. **" S:'$T X=0 S:$T X=DGBTX Q
"^DD",43,43,723,3)
Enter 'Yes' if using the coreFLS system for vendors.
"^DD",43,43,723,10)

"^DD",43,43,723,21,0)
^.001^2^2^3021209^^^^
"^DD",43,43,723,21,1,0)
This entry determines whether the Bene Travel package prompts for coreFLS
"^DD",43,43,723,21,2,0)
vendor (ACTIVE - YES) or FMS vendor (ACTIVE - NO).
"^DD",43,43,723,"DT")
3040818
**END**
**END**

Released XT*7.3*105 SEQ #84
Extracted from mail message
**KIDS**:XT*7.3*105^

**INSTALL NAME**
XT*7.3*105
"BLD",997,0)
XT*7.3*105^TOOLKIT^0^3070412^y
"BLD",997,1,0)
^^2^2^3070313^
"BLD",997,1,1,0)
Please refer to the Description in the FORUM Patch Module for details.
"BLD",997,1,2,0)
XT*7.3* 105   %ZTP1 to print 3rd line.
"BLD",997,4,0)
^9.64PA^^
"BLD",997,6.3)
2
"BLD",997,"INIT")
POST^ZTP1
"BLD",997,"KRN",0)
^9.67PA^779.2^20
"BLD",997,"KRN",.4,0)
.4
"BLD",997,"KRN",.401,0)
.401
"BLD",997,"KRN",.402,0)
.402
"BLD",997,"KRN",.403,0)
.403
"BLD",997,"KRN",.5,0)
.5
"BLD",997,"KRN",.84,0)
.84
"BLD",997,"KRN",3.6,0)
3.6
"BLD",997,"KRN",3.8,0)
3.8
"BLD",997,"KRN",9.2,0)
9.2
"BLD",997,"KRN",9.8,0)
9.8
"BLD",997,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",997,"KRN",9.8,"NM",1,0)
ZTP1^^0^B17552324
"BLD",997,"KRN",9.8,"NM","B","ZTP1",1)

"BLD",997,"KRN",19,0)
19
"BLD",997,"KRN",19.1,0)
19.1
"BLD",997,"KRN",101,0)
101
"BLD",997,"KRN",409.61,0)
409.61
"BLD",997,"KRN",771,0)
771
"BLD",997,"KRN",779.2,0)
779.2
"BLD",997,"KRN",870,0)
870
"BLD",997,"KRN",8989.51,0)
8989.51
"BLD",997,"KRN",8989.52,0)
8989.52
"BLD",997,"KRN",8994,0)
8994
"BLD",997,"KRN","B",.4,.4)

"BLD",997,"KRN","B",.401,.401)

"BLD",997,"KRN","B",.402,.402)

"BLD",997,"KRN","B",.403,.403)

"BLD",997,"KRN","B",.5,.5)

"BLD",997,"KRN","B",.84,.84)

"BLD",997,"KRN","B",3.6,3.6)

"BLD",997,"KRN","B",3.8,3.8)

"BLD",997,"KRN","B",9.2,9.2)

"BLD",997,"KRN","B",9.8,9.8)

"BLD",997,"KRN","B",19,19)

"BLD",997,"KRN","B",19.1,19.1)

"BLD",997,"KRN","B",101,101)

"BLD",997,"KRN","B",409.61,409.61)

"BLD",997,"KRN","B",771,771)

"BLD",997,"KRN","B",779.2,779.2)

"BLD",997,"KRN","B",870,870)

"BLD",997,"KRN","B",8989.51,8989.51)

"BLD",997,"KRN","B",8989.52,8989.52)

"BLD",997,"KRN","B",8994,8994)

"BLD",997,"QUES",0)
^9.62^^
"BLD",997,"REQB",0)
^9.611^1^1
"BLD",997,"REQB",1,0)
XT*7.3*91^2
"BLD",997,"REQB","B","XT*7.3*91",1)

"INIT")
POST^ZTP1
"MBREQ")
0
"PKG",6,-1)
1^1
"PKG",6,0)
TOOLKIT^XT^PROGRAMMERS OPTIONS, MULTI. TERM LOOKUP^
"PKG",6,20,0)
^9.402P^^0
"PKG",6,22,0)
^9.49I^1^1
"PKG",6,22,1,0)
7.3^3040428^2970513^2
"PKG",6,22,1,"PAH",1,0)
105^3070412
"PKG",6,22,1,"PAH",1,1,0)
^^2^2^3070412
"PKG",6,22,1,"PAH",1,1,1,0)
Please refer to the Description in the FORUM Patch Module for details.
"PKG",6,22,1,"PAH",1,1,2,0)
XT*7.3* 105   %ZTP1 to print 3rd line.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","ZTP1")
0^1^B17552324^B15199136
"RTN","ZTP1",1,0)
%ZTP1 ;SF/RWF -  PRINTS 1ST LINES IN SIZE OR DATE ORDER ;04/12/2007
"RTN","ZTP1",2,0)
 ;;7.3;TOOLKIT;**20,70,91,105**;Apr 25, 1995;Build 2
"RTN","ZTP1",3,0)
A W !!,"PRINTS FIRST LINES",!!
"RTN","ZTP1",4,0)
 K ^UTILITY($J) S DTIME=$G(DTIME,300)
"RTN","ZTP1",5,0)
 X ^%ZOSF("RSEL") G KIL:$O(^UTILITY($J,0))=""
"RTN","ZTP1",6,0)
A1 ;
"RTN","ZTP1",7,0)
 N ZTP1,Z2,X
"RTN","ZTP1",8,0)
A2 R !,"(A)lpha, (D)ate ,(P)atched, OR (S)ize ORDER: A//",ZTP1:DTIME
"RTN","ZTP1",9,0)
 S:ZTP1="" ZTP1="A" S ZTP1=$E(ZTP1,1) G KIL:ZTP1="^",A2:"ADPS"'[ZTP1
"RTN","ZTP1",10,0)
 S Z2=$S(ZTP1="P":"2",1:"None")
"RTN","ZTP1",11,0)
A3 W !,"Include line (2), Include lines 2&(3), (N)one: ",Z2,"//" R X:DTIME
"RTN","ZTP1",12,0)
 S X=$TR(X,"n","N")
"RTN","ZTP1",13,0)
 G KIL:X["^"!('$T) S:X="" X=Z2 G A3:"23N"'[$E(X) S Z2=+X
"RTN","ZTP1",14,0)
 S %ZIS="QM" D ^%ZIS G KIL:POP
"RTN","ZTP1",15,0)
 I $D(IO("Q")) D  D ^%ZISC Q
"RTN","ZTP1",16,0)
 . K IO("Q") S ZTRTN="B^%ZTP1",ZTSAVE("ZTP1")="",ZTSAVE("^UTILITY($J,")="",ZTSAVE("Z2")="",ZTDESC="FIRST LINES PRINT"
"RTN","ZTP1",17,0)
 . D ^%ZTLOAD K ZTSK Q
"RTN","ZTP1",18,0)
 ;Set RN for all loops
"RTN","ZTP1",19,0)
B ;Taskman entry point
"RTN","ZTP1",20,0)
 N %L,%R,%ZN,A,B,C,HED,JR,S,X,Y,ZTP,ZP,RN
"RTN","ZTP1",21,0)
 S RN=2 G DATE:ZTP1="D",SIZE:ZTP1="S",PATCH:ZTP1="P"
"RTN","ZTP1",22,0)
 ;
"RTN","ZTP1",23,0)
ALPHA F JP=1:1 S RN=$O(^UTILITY($J,RN)) Q:RN=""  S ^UTILITY($J,1,JP,RN)=0
"RTN","ZTP1",24,0)
 S HED="    FIRST LINE LIST:"
"RTN","ZTP1",25,0)
 G LIST
"RTN","ZTP1",26,0)
 ;
"RTN","ZTP1",27,0)
SIZE ;Sort by routine size
"RTN","ZTP1",28,0)
 F JR=1:1 S RN=$O(^UTILITY($J,RN)) Q:RN=""  D
"RTN","ZTP1",29,0)
 . D LOAD(RN)
"RTN","ZTP1",30,0)
 . S Y=$$SIZE2 W RN," ",Y,?$X\19+1*19
"RTN","ZTP1",31,0)
 . D KEEP(Y,RN) W:$X>66 !
"RTN","ZTP1",32,0)
 S HED="    SIZE RANKING:"
"RTN","ZTP1",33,0)
 G LIST
"RTN","ZTP1",34,0)
 ;
"RTN","ZTP1",35,0)
LOAD(X,R) ;Load routine
"RTN","ZTP1",36,0)
 N DIF,XCNP K ^TMP($J)
"RTN","ZTP1",37,0)
 S DIF="^TMP($J,",XCNP=0 X ^%ZOSF("LOAD")
"RTN","ZTP1",38,0)
 I $D(R) S R(1)=$G(^TMP($J,1,0)),R(2)=$G(^TMP($J,2,0)),R(3)=$G(^TMP($J,3,0))
"RTN","ZTP1",39,0)
 Q
"RTN","ZTP1",40,0)
 ;
"RTN","ZTP1",41,0)
KEEP(IX1,IX2) ;
"RTN","ZTP1",42,0)
 S ^UTILITY($J,1,IX1,IX2)=2
"RTN","ZTP1",43,0)
 S ^UTILITY($J,1,IX1,IX2,1)=^TMP($J,1,0),^UTILITY($J,1,IX1,IX2,2)=^TMP($J,2,0),^UTILITY($J,1,IX1,IX2,3)=$G(^TMP($J,3,0))
"RTN","ZTP1",44,0)
 Q
"RTN","ZTP1",45,0)
 ;
"RTN","ZTP1",46,0)
LIST ;All 3 sorts come here to print the list.
"RTN","ZTP1",47,0)
 N %X,QUIT,L,L1,L2,S,PL,X
"RTN","ZTP1",48,0)
 S PL=IOSL-3-Z2,X=$H X ^%ZOSF("ZD")
"RTN","ZTP1",49,0)
 S HED=Y_"   "_HED X ^%ZOSF("UCI") S HED=Y_"   "_HED
"RTN","ZTP1",50,0)
 U IO D HED
"RTN","ZTP1",51,0)
 S ZP=0,X=0,QUIT=0,S=0
"RTN","ZTP1",52,0)
 F  S S=$O(^UTILITY($J,1,S)),RN="" Q:(S'>0)!(QUIT)  D
"RTN","ZTP1",53,0)
 . F  S RN=$O(^UTILITY($J,1,S,RN)) Q:'$L(RN)!QUIT  D
"RTN","ZTP1",54,0)
 . . D:$Y>PL WAIT I X["^" S RN="zz",QUIT=1,S=" " Q
"RTN","ZTP1",55,0)
 . . S ZP=ZP+1 D L2
"RTN","ZTP1",56,0)
 I 'QUIT W !!?14,ZP," ROUTINES",!
"RTN","ZTP1",57,0)
KIL D ^%ZISC S:$D(ZTQUEUED) ZTREQ="@"
"RTN","ZTP1",58,0)
 K ^UTILITY($J)
"RTN","ZTP1",59,0)
 Q
"RTN","ZTP1",60,0)
 ;
"RTN","ZTP1",61,0)
L2 ;Write one
"RTN","ZTP1",62,0)
 N LI
"RTN","ZTP1",63,0)
 I ^UTILITY($J,1,S,RN) S LI(1)=^(RN,1),LI(2)=^(2),LI(3)=^(3)
"RTN","ZTP1",64,0)
 I '$T S LI=0 D LOAD(RN,.LI) S LI(1)=$P(LI(1)," ",2,999)
"RTN","ZTP1",65,0)
 W RN,?10 W:ZTP1="S" $J(S,4)," - " S %X=$X-1 D WR(LI(1))
"RTN","ZTP1",66,0)
 I Z2 W ?%X D WR(LI(2)) I Z2>2 W ?%X D WR(LI(3)):Z2>2
"RTN","ZTP1",67,0)
 Q
"RTN","ZTP1",68,0)
 ;
"RTN","ZTP1",69,0)
WR(STR) ;Write line w/ wrap
"RTN","ZTP1",70,0)
 N %1,%2
"RTN","ZTP1",71,0)
 S %1=$X+1,%2=IOM-1-%1
"RTN","ZTP1",72,0)
 F  W $E(STR,1,%2) S STR=$E(STR,%2+1,9999) Q:'$L(STR)  W !,?%1
"RTN","ZTP1",73,0)
 W:$X>0 !
"RTN","ZTP1",74,0)
 Q
"RTN","ZTP1",75,0)
 ;
"RTN","ZTP1",76,0)
WAIT ;Wait at end of page
"RTN","ZTP1",77,0)
 I IOST["C-" R !,"Enter Return to continue ",X:DTIME Q:X["^"
"RTN","ZTP1",78,0)
HED W @IOF,!?8,HED,! Q
"RTN","ZTP1",79,0)
 ;
"RTN","ZTP1",80,0)
DATE ;Sort by date
"RTN","ZTP1",81,0)
 F JR=1:1 S RN=$O(^UTILITY($J,RN)) Q:RN=""  D
"RTN","ZTP1",82,0)
 . N L S L=0 D LOAD(RN,.L)
"RTN","ZTP1",83,0)
 . S X=$$DTF(L(1)) D KEEP(9999999-X,RN)
"RTN","ZTP1",84,0)
 . W RN," ",Y,?$X\19+1*19 W:$X>66 !
"RTN","ZTP1",85,0)
 . Q
"RTN","ZTP1",86,0)
 S HED="    REVERSE DATE ORDER:"
"RTN","ZTP1",87,0)
 G LIST
"RTN","ZTP1",88,0)
DTF(L) ;Find the date
"RTN","ZTP1",89,0)
 N %,PC,%DT,B,S
"RTN","ZTP1",90,0)
 F PC=2:1:$L(L,";") S B=1,X=$P(L,";",PC) D  Q:Y>0
"RTN","ZTP1",91,0)
 . S Y=-1,%DT="T"
"RTN","ZTP1",92,0)
 . S:X?.E1"["1.2N1"/"1.2N1"/"2N1" "1.2N1":"1.2N.E1"]  ".E X=$P($P(X,"[",2),"]",1)
"RTN","ZTP1",93,0)
 . F %=1:1:$L(X) D  Q:Y>0
"RTN","ZTP1",94,0)
 . . S S=$E(X,%)?1P S:B&S X=$E(X,1,%-1)_$E(X,%+1,999),%=%-1
"RTN","ZTP1",95,0)
 . . S:'S B=0 S:$E(X,%+1,999)?1N.N1":".E X=$E(X,1,%-1)_"@"_$E(X,%+1,999),%=999
"RTN","ZTP1",96,0)
 . . I %>$L(X) N % D ^%DT
"RTN","ZTP1",97,0)
 . . Q
"RTN","ZTP1",98,0)
 . Q
"RTN","ZTP1",99,0)
 Q Y
"RTN","ZTP1",100,0)
 ;,X=$P(ZTP,"" ;"",3) X A(1) S B=1,X=$P(ZTP,"";"",4) X:Y<0 A(1)
"RTN","ZTP1",101,0)
 ;
"RTN","ZTP1",102,0)
PATCH ;Sort by first patch number
"RTN","ZTP1",103,0)
 N S2
"RTN","ZTP1",104,0)
 F S2=0:0 S RN=$O(^UTILITY($J,RN)) Q:RN=""  D
"RTN","ZTP1",105,0)
 . N L S L=0 D LOAD(RN,.L)
"RTN","ZTP1",106,0)
 . S X=$P(L(2),";",5) I X]"" S S=+$P(X,"**",2) D KEEP(S,RN)
"RTN","ZTP1",107,0)
 S HED="    Patched routines"
"RTN","ZTP1",108,0)
 G LIST
"RTN","ZTP1",109,0)
 ;
"RTN","ZTP1",110,0)
SIZE2() ; Return size in bytes of routine in ^TMP($J)
"RTN","ZTP1",111,0)
 N NUM,LINE,SIZE ; line number, line text, size
"RTN","ZTP1",112,0)
 S SIZE=0
"RTN","ZTP1",113,0)
 F NUM=1:1 S LINE=$G(^TMP($J,NUM,0)) Q:LINE=""  S SIZE=SIZE+$L(LINE)+2
"RTN","ZTP1",114,0)
 Q SIZE
"RTN","ZTP1",115,0)
 ;
"RTN","ZTP1",116,0)
BUILD ;
"RTN","ZTP1",117,0)
 N Y,BLDA,%N,S2
"RTN","ZTP1",118,0)
 I '$D(^XPD(9.6,0)) W !,"No BUILD file to work from." Q
"RTN","ZTP1",119,0)
 S Y=$$BUILD^XTRUTL1 G KIL:Y'>0 S BLDA=+Y
"RTN","ZTP1",120,0)
 D RTN^XTRUTL1(BLDA)
"RTN","ZTP1",121,0)
 I '$D(^UTILITY($J)) W !,"No routines in this build." G KIL
"RTN","ZTP1",122,0)
 G A1
"RTN","ZTP1",123,0)
 ;
"RTN","ZTP1",124,0)
POST ;POST-INIT
"RTN","ZTP1",125,0)
 N %D,%S,I,SCR,ZTOS,ZTMODE
"RTN","ZTP1",126,0)
 S ZTMODE=2,ZTOS=$$OS^ZTMGRSET()
"RTN","ZTP1",127,0)
 S %S="ZTP1",%D="%ZTP1",SCR="I 1" D MOVE^ZTMGRSET
"RTN","ZTP1",128,0)
 Q
"VER")
8.0^22.0
"BLD",997,6)
^84
**END**
**END**

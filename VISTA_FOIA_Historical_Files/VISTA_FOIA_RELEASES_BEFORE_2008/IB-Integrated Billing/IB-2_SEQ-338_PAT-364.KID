Released IB*2*364 SEQ #338
Extracted from mail message
**KIDS**:IB*2.0*364^

**INSTALL NAME**
IB*2.0*364
"BLD",7000,0)
IB*2.0*364^INTEGRATED BILLING^0^3070501^y
"BLD",7000,1,0)
^^6^6^3061212^^
"BLD",7000,1,1,0)
IB*2*364 is being released to support the Treating Specialty changes 
"BLD",7000,1,2,0)
released in patch: DG*5.3*729 (Project: PTF Fields No Longer Needed).
"BLD",7000,1,3,0)
 
"BLD",7000,1,4,0)
Treating Specialties file (#42.4) is being updated by patch DG*5.3*729.
"BLD",7000,1,5,0)
This patch IB*2*364 will update Integrated Billing to properly handle the 
"BLD",7000,1,6,0)
billing of the new and changed Treating Specialties.
"BLD",7000,4,0)
^9.64PA^^
"BLD",7000,6)
2^
"BLD",7000,6.3)
7
"BLD",7000,"ABPKG")
n
"BLD",7000,"INID")
n^n^n
"BLD",7000,"KRN",0)
^9.67PA^8989.52^19
"BLD",7000,"KRN",.4,0)
.4
"BLD",7000,"KRN",.401,0)
.401
"BLD",7000,"KRN",.402,0)
.402
"BLD",7000,"KRN",.403,0)
.403
"BLD",7000,"KRN",.5,0)
.5
"BLD",7000,"KRN",.84,0)
.84
"BLD",7000,"KRN",3.6,0)
3.6
"BLD",7000,"KRN",3.8,0)
3.8
"BLD",7000,"KRN",9.2,0)
9.2
"BLD",7000,"KRN",9.8,0)
9.8
"BLD",7000,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",7000,"KRN",9.8,"NM",1,0)
IBCRBG2^^0^B7401317
"BLD",7000,"KRN",9.8,"NM",2,0)
IBAECU1^^0^B2893919
"BLD",7000,"KRN",9.8,"NM","B","IBAECU1",2)

"BLD",7000,"KRN",9.8,"NM","B","IBCRBG2",1)

"BLD",7000,"KRN",19,0)
19
"BLD",7000,"KRN",19,"NM",0)
^9.68A^^
"BLD",7000,"KRN",19.1,0)
19.1
"BLD",7000,"KRN",101,0)
101
"BLD",7000,"KRN",409.61,0)
409.61
"BLD",7000,"KRN",771,0)
771
"BLD",7000,"KRN",870,0)
870
"BLD",7000,"KRN",8989.51,0)
8989.51
"BLD",7000,"KRN",8989.52,0)
8989.52
"BLD",7000,"KRN",8994,0)
8994
"BLD",7000,"KRN","B",.4,.4)

"BLD",7000,"KRN","B",.401,.401)

"BLD",7000,"KRN","B",.402,.402)

"BLD",7000,"KRN","B",.403,.403)

"BLD",7000,"KRN","B",.5,.5)

"BLD",7000,"KRN","B",.84,.84)

"BLD",7000,"KRN","B",3.6,3.6)

"BLD",7000,"KRN","B",3.8,3.8)

"BLD",7000,"KRN","B",9.2,9.2)

"BLD",7000,"KRN","B",9.8,9.8)

"BLD",7000,"KRN","B",19,19)

"BLD",7000,"KRN","B",19.1,19.1)

"BLD",7000,"KRN","B",101,101)

"BLD",7000,"KRN","B",409.61,409.61)

"BLD",7000,"KRN","B",771,771)

"BLD",7000,"KRN","B",870,870)

"BLD",7000,"KRN","B",8989.51,8989.51)

"BLD",7000,"KRN","B",8989.52,8989.52)

"BLD",7000,"KRN","B",8994,8994)

"BLD",7000,"QUES",0)
^9.62^^
"BLD",7000,"REQB",0)
^9.611^1^1
"BLD",7000,"REQB",1,0)
IB*2.0*332^1
"BLD",7000,"REQB","B","IB*2.0*332",1)

"MBREQ")
0
"PKG",192,-1)
1^1
"PKG",192,0)
INTEGRATED BILLING^IB^INTEGRATED BILLING
"PKG",192,20,0)
^9.402P^1^1
"PKG",192,20,1,0)
2^^IBAXDR
"PKG",192,20,1,1)

"PKG",192,20,"B",2,1)

"PKG",192,22,0)
^9.49I^1^1
"PKG",192,22,1,0)
2.0^2940321^2940414
"PKG",192,22,1,"PAH",1,0)
364^3070501^1000000011
"PKG",192,22,1,"PAH",1,1,0)
^^6^6^3070501
"PKG",192,22,1,"PAH",1,1,1,0)
IB*2*364 is being released to support the Treating Specialty changes 
"PKG",192,22,1,"PAH",1,1,2,0)
released in patch: DG*5.3*729 (Project: PTF Fields No Longer Needed).
"PKG",192,22,1,"PAH",1,1,3,0)
 
"PKG",192,22,1,"PAH",1,1,4,0)
Treating Specialties file (#42.4) is being updated by patch DG*5.3*729.
"PKG",192,22,1,"PAH",1,1,5,0)
This patch IB*2*364 will update Integrated Billing to properly handle the 
"PKG",192,22,1,"PAH",1,1,6,0)
billing of the new and changed Treating Specialties.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","IBAECU1")
0^2^B2893919^B2570454
"RTN","IBAECU1",1,0)
IBAECU1 ;ALB/BGA-LONG TERM IDENTIFICATION UTILITIES ; 09-OCT-01
"RTN","IBAECU1",2,0)
 ;;2.0;INTEGRATED BILLING;**164,171,176,332,364**;21-MAR-94;Build 7
"RTN","IBAECU1",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","IBAECU1",4,0)
 ; This is a utility program to support IBAECU calls
"RTN","IBAECU1",5,0)
 ;
"RTN","IBAECU1",6,0)
 ;
"RTN","IBAECU1",7,0)
 ;
"RTN","IBAECU1",8,0)
STDATE() ;  -- legislative start date for Long Term Care Billing
"RTN","IBAECU1",9,0)
 ; Start Date is June 17,2002 when the LTC REG becomes Law
"RTN","IBAECU1",10,0)
 ;
"RTN","IBAECU1",11,0)
 Q 3020617  ;
"RTN","IBAECU1",12,0)
 ;
"RTN","IBAECU1",13,0)
 ;
"RTN","IBAECU1",14,0)
 ;
"RTN","IBAECU1",15,0)
STOP ; Listed below are stop codes and their associated LTC charge type
"RTN","IBAECU1",16,0)
C190 ;;DG LTC OPT ADHC NEW
"RTN","IBAECU1",17,0)
C319 ;;DG LTC OPT GEM NEW
"RTN","IBAECU1",18,0)
 ;;DG LTC OPT RESPITE NEW
"RTN","IBAECU1",19,0)
 ;;
"RTN","IBAECU1",20,0)
 ;
"RTN","IBAECU1",21,0)
 ;
"RTN","IBAECU1",22,0)
SPEC ; Listed below are the treating specialties and their charge type
"RTN","IBAECU1",23,0)
T31 ;;DG LTC INPT GEM NEW
"RTN","IBAECU1",24,0)
T32 ;;DG LTC INPT GEM NEW
"RTN","IBAECU1",25,0)
T33 ;;DG LTC INPT GEM NEW
"RTN","IBAECU1",26,0)
T34 ;;DG LTC INPT GEM NEW
"RTN","IBAECU1",27,0)
T35 ;;DG LTC INPT GEM NEW
"RTN","IBAECU1",28,0)
T37 ;;DG LTC INPT DOM NEW
"RTN","IBAECU1",29,0)
T42 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",30,0)
T43 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",31,0)
T44 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",32,0)
T45 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",33,0)
T46 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",34,0)
T47 ;;DG LTC INPT RESPITE NEW
"RTN","IBAECU1",35,0)
T64 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",36,0)
T66 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",37,0)
T67 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",38,0)
T68 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",39,0)
T69 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",40,0)
T80 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",41,0)
T81 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",42,0)
T83 ;;DG LTC INPT RESPITE NEW
"RTN","IBAECU1",43,0)
T85 ;;DG LTC INPT DOM NEW
"RTN","IBAECU1",44,0)
T86 ;;DG LTC INPT DOM NEW
"RTN","IBAECU1",45,0)
T87 ;;DG LTC INPT DOM NEW
"RTN","IBAECU1",46,0)
T88 ;;DG LTC INPT DOM NEW
"RTN","IBAECU1",47,0)
T95 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",48,0)
T96 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",49,0)
T100 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",50,0)
T101 ;;DG LTC INPT NHCU NEW
"RTN","IBAECU1",51,0)
T102 ;;DG LTC INPT GEM NEW
"RTN","IBAECU1",52,0)
 ;;
"RTN","IBAECU1",53,0)
 ;
"RTN","IBAECU1",54,0)
 ;
"RTN","IBCRBG2")
0^1^B7401317^B7280940
"RTN","IBCRBG2",1,0)
IBCRBG2 ;ALB/ARH - RATES: BILL SOURCE EVENTS (INPT CONT) ; 01-OCT-03
"RTN","IBCRBG2",2,0)
 ;;2.0;INTEGRATED BILLING;**245,175,332,364**;21-MAR-94;Build 7
"RTN","IBCRBG2",3,0)
 ;;Per VHA Directive 2004-038, this routine should not be modified.
"RTN","IBCRBG2",4,0)
 ;
"RTN","IBCRBG2",5,0)
INPTRSET(IBIFN,CS) ; reset Inpatient data due to bedsection Tort 03 and Other Type of Care RC v2.0
"RTN","IBCRBG2",6,0)
 ; (based on INPTPTF since that deals with timeframe and end of bill)
"RTN","IBCRBG2",7,0)
 N IBRC S IBRC=1 I +$G(CS),$E($G(^IBE(363.1,+CS,0)),1,2)'="RC" S IBRC=0
"RTN","IBCRBG2",8,0)
 ;
"RTN","IBCRBG2",9,0)
 D INPTBS(IBIFN,IBRC)
"RTN","IBCRBG2",10,0)
 D INPTOTH(IBIFN,IBRC)
"RTN","IBCRBG2",11,0)
 Q
"RTN","IBCRBG2",12,0)
 ;
"RTN","IBCRBG2",13,0)
INPTBS(IBIFN,RC) ; with output from INPTPTF^IBCRBG, reset bedsections due to changes with Tort 03 and RC
"RTN","IBCRBG2",14,0)
 ; - Some Specialties are changed to PRRTP bedsection (beginning with Tort 03)
"RTN","IBCRBG2",15,0)
 ; - Some Specialties are changed to ICU bedsection for RC only (beginning with RC v2.0)
"RTN","IBCRBG2",16,0)
 ; - Nursing Home Care and Observation bedsections are not billable with RC DRG (per diem) so remove DRG
"RTN","IBCRBG2",17,0)
 ; (based on INPTPTF since that deals with timeframe and end of bill)
"RTN","IBCRBG2",18,0)
 ;
"RTN","IBCRBG2",19,0)
 N IBDT,IBLN,IBSPCLTY,IBNLN,IBNBS,IBNDRG,IBCGTY
"RTN","IBCRBG2",20,0)
 ;
"RTN","IBCRBG2",21,0)
 S IBDT=0 F  S IBDT=$O(^TMP($J,"IBCRC-INDT",IBDT)) Q:'IBDT  D
"RTN","IBCRBG2",22,0)
 . S IBLN=$G(^TMP($J,"IBCRC-INDT",IBDT)) Q:'IBLN
"RTN","IBCRBG2",23,0)
 . S IBSPCLTY=$P(IBLN,U,6) Q:'IBSPCLTY
"RTN","IBCRBG2",24,0)
 . ;
"RTN","IBCRBG2",25,0)
 . S IBNLN=IBLN
"RTN","IBCRBG2",26,0)
 . S IBNBS=$$BSUPD(IBSPCLTY,IBDT,+$G(RC)) I +IBNBS S $P(IBNLN,U,2)=+IBNBS
"RTN","IBCRBG2",27,0)
 . S IBNDRG=$$NODRG(IBSPCLTY) I +IBNDRG S $P(IBNLN,U,4)=""
"RTN","IBCRBG2",28,0)
 . I 'IBNBS,'IBNDRG Q
"RTN","IBCRBG2",29,0)
 . S ^TMP($J,"IBCRC-INDT",IBDT)=IBNLN
"RTN","IBCRBG2",30,0)
 Q
"RTN","IBCRBG2",31,0)
 ; 
"RTN","IBCRBG2",32,0)
INPTOTH(IBIFN,RC) ; with output from INPTPTF^IBCRBG, reset Other type of care and Tort 03 changes
"RTN","IBCRBG2",33,0)
 ; - If type of care is Other then bedsection is replaced and DRG deleted (began with RC v2.0)
"RTN","IBCRBG2",34,0)
 ; (based on INPTPTF since that deals with timeframe and end of bill)
"RTN","IBCRBG2",35,0)
 ;
"RTN","IBCRBG2",36,0)
 N IBOT,IBOTLN,IBBS,IBDT1,IBDT2,IBDT,IBLN,IBNLN Q:'$G(RC)
"RTN","IBCRBG2",37,0)
 I +$G(IBIFN) S IBOT=0 F  S IBOT=$O(^DGCR(399,IBIFN,"OT",IBOT)) Q:'IBOT  D
"RTN","IBCRBG2",38,0)
 . S IBOTLN=$G(^DGCR(399,IBIFN,"OT",IBOT,0)) Q:'IBOTLN
"RTN","IBCRBG2",39,0)
 . S IBDT1=+$P(IBOTLN,U,2) Q:'IBDT1  S IBDT2=+$P(IBOTLN,U,3) Q:'IBDT2
"RTN","IBCRBG2",40,0)
 . S IBBS=+IBOTLN Q:'IBOTLN
"RTN","IBCRBG2",41,0)
 . ;
"RTN","IBCRBG2",42,0)
 . S IBDT=IBDT1-.1 F  S IBDT=$O(^TMP($J,"IBCRC-INDT",IBDT)) Q:('IBDT)!(IBDT'<IBDT2)  D
"RTN","IBCRBG2",43,0)
 .. S IBLN=$G(^TMP($J,"IBCRC-INDT",IBDT)) Q:'IBLN
"RTN","IBCRBG2",44,0)
 .. I IBDT<$$RC20 Q
"RTN","IBCRBG2",45,0)
 .. ;
"RTN","IBCRBG2",46,0)
 .. S IBNLN=IBLN
"RTN","IBCRBG2",47,0)
 .. S $P(IBNLN,U,2)=+IBBS,$P(IBNLN,U,4)=""
"RTN","IBCRBG2",48,0)
 .. S ^TMP($J,"IBCRC-INDT",IBDT)=IBNLN
"RTN","IBCRBG2",49,0)
 Q
"RTN","IBCRBG2",50,0)
 ;
"RTN","IBCRBG2",51,0)
 ;
"RTN","IBCRBG2",52,0)
BSUPD(SPCLTY,DATE,RC) ; return updated bedsection name for specialty passed in (42.4 ifn)
"RTN","IBCRBG2",53,0)
 ; beginning with TORT 2003 some specialties were moved to new PRRTP bedsection
"RTN","IBCRBG2",54,0)
 ; beginning with RC v2.0 some specialties were moved to a new ICU bedsection, only applies to RC charges
"RTN","IBCRBG2",55,0)
 N IBX,IBY,IBZ S (IBZ,IBX)="",SPCLTY=","_+$G(SPCLTY)_",",DATE=$S(+$G(DATE):(DATE\1),1:DT)
"RTN","IBCRBG2",56,0)
 I DATE'<$$TORT03,",25,26,27,28,29,38,39,"[SPCLTY S IBX="PRRTP"
"RTN","IBCRBG2",57,0)
 I +$G(RC),DATE'<$$RC20,",12,13,16,17,63,"[SPCLTY S IBX="ICU"
"RTN","IBCRBG2",58,0)
 I IBX'="" S IBY=$O(^DGCR(399.1,"B",IBX,0)) I +IBY S IBZ=IBY_U_IBX
"RTN","IBCRBG2",59,0)
 Q IBZ
"RTN","IBCRBG2",60,0)
 ;
"RTN","IBCRBG2",61,0)
TORT03() ; return effective date of TORT 2003, date when PRRTP bedsection specialties changed
"RTN","IBCRBG2",62,0)
 Q 3040107
"RTN","IBCRBG2",63,0)
 ;
"RTN","IBCRBG2",64,0)
RC20() ; return effective date of RC v2.0, date when ICU bedsection specialties changed
"RTN","IBCRBG2",65,0)
 Q 3031219
"RTN","IBCRBG2",66,0)
 ;
"RTN","IBCRBG2",67,0)
NODRG(SPCLTY) ; return specialty ifn followed by bedsection name if the specialty should not be charged a DRG charge
"RTN","IBCRBG2",68,0)
 N IBX,IBS S IBX=0,IBS=","_+$G(SPCLTY)_","
"RTN","IBCRBG2",69,0)
 I ",80,81,96,42,43,44,45,46,64,66,67,68,69,95,100,101,102,"[IBS S IBX=+SPCLTY_"^Nursing Home Care"
"RTN","IBCRBG2",70,0)
 I ",18,23,24,36,41,65,94,"[IBS S IBX=+SPCLTY_"^Observation"
"RTN","IBCRBG2",71,0)
 Q IBX
"VER")
8.0^22.0
"BLD",7000,6)
^338
**END**
**END**

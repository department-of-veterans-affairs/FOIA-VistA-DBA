Released LBR*2.5*9 SEQ #7
Extracted from mail message
**KIDS**:LBR*2.5*9^

**INSTALL NAME**
LBR*2.5*9
"BLD",4346,0)
LBR*2.5*9^LIBRARY^0^3030409^y
"BLD",4346,1,0)
^^12^12^3021223^
"BLD",4346,1,1,0)
This patch provides Library with the interface capabilities to the Core
"BLD",4346,1,2,0)
Financial Logististics System (CoreFLS).  coreFLS will replace the
"BLD",4346,1,3,0)
Integrated Funds Distribution, Control Point Activity, and Procurement
"BLD",4346,1,4,0)
(IFCAP) package.
"BLD",4346,1,5,0)
 
"BLD",4346,1,6,0)
Vendor information for coreFLS will be remotely held on a national
"BLD",4346,1,7,0)
database.  To aliviate traffic over a network system, a local vendor file,
"BLD",4346,1,8,0)
LOCAL VENDOR (#392.31) will be accessed to retrieve frequently used
"BLD",4346,1,9,0)
vendors.
"BLD",4346,1,10,0)
 
"BLD",4346,1,11,0)
A new field is added to the Library Site Parameters that will be used to
"BLD",4346,1,12,0)
activate the coreFLS interface:
"BLD",4346,4,0)
^9.64PA^681^3
"BLD",4346,4,680,0)
680
"BLD",4346,4,680,2,0)
^9.641^680^1
"BLD",4346,4,680,2,680,0)
LOCAL SERIALS  (File-top level)
"BLD",4346,4,680,2,680,1,0)
^9.6411^2.6^1
"BLD",4346,4,680,2,680,1,2.6,0)
MICROFILM COREFLS VENDOR
"BLD",4346,4,680,222)
y^n^p^^^^n
"BLD",4346,4,680.6,0)
680.6
"BLD",4346,4,680.6,2,0)
^9.641^680.6^1
"BLD",4346,4,680.6,2,680.6,0)
LIBRARY PARAMETERS  (File-top level)
"BLD",4346,4,680.6,2,680.6,1,0)
^9.6411^.1^2
"BLD",4346,4,680.6,2,680.6,1,.09,0)
DEFAULT COREFLS VENDOR
"BLD",4346,4,680.6,2,680.6,1,.1,0)
COREFLS ACTIVE
"BLD",4346,4,680.6,222)
y^n^p^^^^n
"BLD",4346,4,681,0)
681
"BLD",4346,4,681,2,0)
^9.641^681^1
"BLD",4346,4,681,2,681,0)
LBRY DISPOSITION  (File-top level)
"BLD",4346,4,681,2,681,1,0)
^9.6411^3.01^1
"BLD",4346,4,681,2,681,1,3.01,0)
COREFLS VENDOR
"BLD",4346,4,681,222)
y^n^p^^^^n
"BLD",4346,4,"APDD",680,680)

"BLD",4346,4,"APDD",680,680,2.6)

"BLD",4346,4,"APDD",680.6,680.6)

"BLD",4346,4,"APDD",680.6,680.6,.09)

"BLD",4346,4,"APDD",680.6,680.6,.1)

"BLD",4346,4,"APDD",681,681)

"BLD",4346,4,"APDD",681,681,3.01)

"BLD",4346,4,"B",680,680)

"BLD",4346,4,"B",680.6,680.6)

"BLD",4346,4,"B",681,681)

"BLD",4346,"ABPKG")
n
"BLD",4346,"INIT")
POST^LBR25P9
"BLD",4346,"KRN",0)
^9.67PA^8989.52^19
"BLD",4346,"KRN",.4,0)
.4
"BLD",4346,"KRN",.4,"NM",0)
^9.68A^3^3
"BLD",4346,"KRN",.4,"NM",1,0)
LBRY MICROFILM HOLDINGS 2    FILE #680^680^0
"BLD",4346,"KRN",.4,"NM",2,0)
LBRY TITLES DUE RENEWAL 2    FILE #681^681^0
"BLD",4346,"KRN",.4,"NM",3,0)
LBRY MISSING ISSUES LIST 2    FILE #682^682^0
"BLD",4346,"KRN",.4,"NM","B","LBRY MICROFILM HOLDINGS 2    FILE #680",1)

"BLD",4346,"KRN",.4,"NM","B","LBRY MISSING ISSUES LIST 2    FILE #682",3)

"BLD",4346,"KRN",.4,"NM","B","LBRY TITLES DUE RENEWAL 2    FILE #681",2)

"BLD",4346,"KRN",.401,0)
.401
"BLD",4346,"KRN",.401,"NM",0)
^9.68A^3^3
"BLD",4346,"KRN",.401,"NM",1,0)
LBRY MICROFILM VENDOR 2    FILE #680^680^0
"BLD",4346,"KRN",.401,"NM",2,0)
LBRY SUBSCRIPTION/VENDOR 2    FILE #681^681^0
"BLD",4346,"KRN",.401,"NM",3,0)
LBRY MISSING ISSUES LIST 2    FILE #682^682^0
"BLD",4346,"KRN",.401,"NM","B","LBRY MICROFILM VENDOR 2    FILE #680",1)

"BLD",4346,"KRN",.401,"NM","B","LBRY MISSING ISSUES LIST 2    FILE #682",3)

"BLD",4346,"KRN",.401,"NM","B","LBRY SUBSCRIPTION/VENDOR 2    FILE #681",2)

"BLD",4346,"KRN",.402,0)
.402
"BLD",4346,"KRN",.402,"NM",0)
^9.68A^4^4
"BLD",4346,"KRN",.402,"NM",1,0)
LBRY BIBLIOGRAPHIC 2 ENTRY    FILE #680^680^0
"BLD",4346,"KRN",.402,"NM",2,0)
LBRY SITE2    FILE #680.6^680.6^0
"BLD",4346,"KRN",.402,"NM",3,0)
LBRY D3    FILE #681^681^0
"BLD",4346,"KRN",.402,"NM",4,0)
LBRY D4    FILE #681^681^0
"BLD",4346,"KRN",.402,"NM","B","LBRY BIBLIOGRAPHIC 2 ENTRY    FILE #680",1)

"BLD",4346,"KRN",.402,"NM","B","LBRY D3    FILE #681",3)

"BLD",4346,"KRN",.402,"NM","B","LBRY D4    FILE #681",4)

"BLD",4346,"KRN",.402,"NM","B","LBRY SITE2    FILE #680.6",2)

"BLD",4346,"KRN",.403,0)
.403
"BLD",4346,"KRN",.5,0)
.5
"BLD",4346,"KRN",.84,0)
.84
"BLD",4346,"KRN",3.6,0)
3.6
"BLD",4346,"KRN",3.8,0)
3.8
"BLD",4346,"KRN",9.2,0)
9.2
"BLD",4346,"KRN",9.8,0)
9.8
"BLD",4346,"KRN",9.8,"NM",0)
^9.68A^9^8
"BLD",4346,"KRN",9.8,"NM",2,0)
LBRYSITE^^0^B4466209
"BLD",4346,"KRN",9.8,"NM",3,0)
LBRYLST^^0^B15447641
"BLD",4346,"KRN",9.8,"NM",4,0)
LBRYCSE^^0^B18134746
"BLD",4346,"KRN",9.8,"NM",5,0)
LBRYEDI^^0^B4885485
"BLD",4346,"KRN",9.8,"NM",6,0)
LBRYRPT^^0^B25970199
"BLD",4346,"KRN",9.8,"NM",7,0)
LBRYPRCS^^0^B10586120
"BLD",4346,"KRN",9.8,"NM",8,0)
LBRCSL^^0^B500996
"BLD",4346,"KRN",9.8,"NM",9,0)
LBR25P9V^^0^B23191789
"BLD",4346,"KRN",9.8,"NM","B","LBR25P9V",9)

"BLD",4346,"KRN",9.8,"NM","B","LBRCSL",8)

"BLD",4346,"KRN",9.8,"NM","B","LBRYCSE",4)

"BLD",4346,"KRN",9.8,"NM","B","LBRYEDI",5)

"BLD",4346,"KRN",9.8,"NM","B","LBRYLST",3)

"BLD",4346,"KRN",9.8,"NM","B","LBRYPRCS",7)

"BLD",4346,"KRN",9.8,"NM","B","LBRYRPT",6)

"BLD",4346,"KRN",9.8,"NM","B","LBRYSITE",2)

"BLD",4346,"KRN",19,0)
19
"BLD",4346,"KRN",19,"NM",0)
^9.68A^5^5
"BLD",4346,"KRN",19,"NM",1,0)
LBRY TITLES DUE RENEWAL^^0
"BLD",4346,"KRN",19,"NM",2,0)
LBRY TITLES VENDOR^^0
"BLD",4346,"KRN",19,"NM",3,0)
LBRY MANAGER^^3
"BLD",4346,"KRN",19,"NM",4,0)
LBRY LOCAL VENDOR ADD^^0
"BLD",4346,"KRN",19,"NM",5,0)
LBRY COREFLS CONVERSION^^0
"BLD",4346,"KRN",19,"NM","B","LBRY COREFLS CONVERSION",5)

"BLD",4346,"KRN",19,"NM","B","LBRY LOCAL VENDOR ADD",4)

"BLD",4346,"KRN",19,"NM","B","LBRY MANAGER",3)

"BLD",4346,"KRN",19,"NM","B","LBRY TITLES DUE RENEWAL",1)

"BLD",4346,"KRN",19,"NM","B","LBRY TITLES VENDOR",2)

"BLD",4346,"KRN",19.1,0)
19.1
"BLD",4346,"KRN",19.1,"NM",0)
^9.68A^1^1
"BLD",4346,"KRN",19.1,"NM",1,0)
LBRY LOCAL VENDOR^^0
"BLD",4346,"KRN",19.1,"NM","B","LBRY LOCAL VENDOR",1)

"BLD",4346,"KRN",101,0)
101
"BLD",4346,"KRN",409.61,0)
409.61
"BLD",4346,"KRN",771,0)
771
"BLD",4346,"KRN",870,0)
870
"BLD",4346,"KRN",8989.51,0)
8989.51
"BLD",4346,"KRN",8989.52,0)
8989.52
"BLD",4346,"KRN",8994,0)
8994
"BLD",4346,"KRN","B",.4,.4)

"BLD",4346,"KRN","B",.401,.401)

"BLD",4346,"KRN","B",.402,.402)

"BLD",4346,"KRN","B",.403,.403)

"BLD",4346,"KRN","B",.5,.5)

"BLD",4346,"KRN","B",.84,.84)

"BLD",4346,"KRN","B",3.6,3.6)

"BLD",4346,"KRN","B",3.8,3.8)

"BLD",4346,"KRN","B",9.2,9.2)

"BLD",4346,"KRN","B",9.8,9.8)

"BLD",4346,"KRN","B",19,19)

"BLD",4346,"KRN","B",19.1,19.1)

"BLD",4346,"KRN","B",101,101)

"BLD",4346,"KRN","B",409.61,409.61)

"BLD",4346,"KRN","B",771,771)

"BLD",4346,"KRN","B",870,870)

"BLD",4346,"KRN","B",8989.51,8989.51)

"BLD",4346,"KRN","B",8989.52,8989.52)

"BLD",4346,"KRN","B",8994,8994)

"BLD",4346,"PRE")
LBR25P9
"BLD",4346,"QUES",0)
^9.62^^
"BLD",4346,"REQB",0)
^9.611^1^1
"BLD",4346,"REQB",1,0)
DGBT*1.0*2^1
"BLD",4346,"REQB","B","DGBT*1.0*2",1)

"FIA",680)
LOCAL SERIALS
"FIA",680,0)
^LBRY(680,
"FIA",680,0,0)
680PI
"FIA",680,0,1)
y^n^p^^^^n
"FIA",680,0,10)

"FIA",680,0,11)

"FIA",680,0,"RLRO")

"FIA",680,0,"VR")
2.5^LBR
"FIA",680,680)
1
"FIA",680,680,2.6)

"FIA",680.6)
LIBRARY PARAMETERS
"FIA",680.6,0)
^LBRY(680.6,
"FIA",680.6,0,0)
680.6I
"FIA",680.6,0,1)
y^n^p^^^^n
"FIA",680.6,0,10)

"FIA",680.6,0,11)

"FIA",680.6,0,"RLRO")

"FIA",680.6,0,"VR")
2.5^LBR
"FIA",680.6,680.6)
1
"FIA",680.6,680.6,.09)

"FIA",680.6,680.6,.1)

"FIA",681)
LBRY DISPOSITION
"FIA",681,0)
^LBRY(681,
"FIA",681,0,0)
681I
"FIA",681,0,1)
y^n^p^^^^n
"FIA",681,0,10)

"FIA",681,0,11)

"FIA",681,0,"RLRO")

"FIA",681,0,"VR")
2.5^LBR
"FIA",681,681)
1
"FIA",681,681,3.01)

"INIT")
POST^LBR25P9
"KRN",.4,6890,-1)
0^1
"KRN",.4,6890,0)
LBRY MICROFILM HOLDINGS 2^3020321.1046^^680^^^3030123
"KRN",.4,6890,"F",1)
"TITLE: ";C1;S3~.01;C8;X;L70~"MICROFILM COREFLS VENDOR: ";C1~2.6;C27;X~"RENEWAL DATE (MF): ";C1~10.6;C20;X~"LOCATION: ";C1~1.1;C11;X~
"KRN",.4,6890,"F",2)
"MICROFILM HOLDINGS: ";C1~2.1;C1;X~
"KRN",.4,6890,"H")
Local Serials Microfilm Holdings
"KRN",.4,6891,-1)
0^2
"KRN",.4,6891,0)
LBRY TITLES DUE RENEWAL 2^3020321.1157^^681^^^3020429
"KRN",.4,6891,"F",1)
"PORTION OF FILE: ";X;S~-680,^LBRY(680,^^S I(0,0)=D0 S DIP(1)=$S($D(^LBRY(681,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;".02:"~
"KRN",.4,6891,"F",2)
-680,-680.5,^LBRY(680.5,^^S I(100,0)=D0 S DIP(101)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$P(DIP(101),U,1),X=X S D(0)=+X;Z;".01:"~-680,-680.5,.05;C18;X~
"KRN",.4,6891,"F",3)
-680,-680.5,"TITLE: ";S;C1~-680,-680.5,.01;X;C9;L70~-680,-680.5,"ISSN: ";C1~-680,-680.5,7;X;C7~"COREFLS VENDOR: ";C30~3.01;C46;X~"PLACEMENT: ";C1~
"KRN",.4,6891,"F",4)
1.1;X;C12~-680,^LBRY(680,^^S I(0,0)=D0 S DIP(1)=$S($D(^LBRY(681,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;".02:"~-680,"RENEWAL DATE (HC): ";C30~
"KRN",.4,6891,"F",5)
-680,10.5;X;C49~-680,"SUBSCRIPTION PERIOD: ";C1~-680,10.8;X;C22~"COPY NUMBER: ";C30~1;X;C48~
"KRN",.4,6891,"H")
SERIALS RENEWAL LIST
"KRN",.4,6892,-1)
0^3
"KRN",.4,6892,0)
LBRY MISSING ISSUES LIST 2^3020421.1445^^682^^^3020424
"KRN",.4,6892,"F",1)
.02;X;L79;S2~1;X;C3;L12~1.1;X;C20;L12~"("~1.2;X~")"~1.4;X;C45;L2~
"KRN",.4,6892,"F",2)
S DIP(1)=$S($D(^LBRY(682,D0,1)):^(1),1:"") S X=$P(DIP(1),U,5)-$P(DIP(1),U,4) W X K DIP;X;C55;L2;Z;"COPIES ORDERED-COPIES RECEIVED"~
"KRN",.4,6892,"F",3)
-680,^LBRY(680,^^S I(0,0)=D0 S DIP(1)=$S($D(^LBRY(682,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),X=X S D(0)=+X;Z;"LOCAL SERIALS:"~
"KRN",.4,6892,"F",4)
-680,-680.5,^LBRY(680.5,^^S I(100,0)=D0 S DIP(101)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$P(DIP(101),U,1),X=X S D(0)=+X;Z;"TITLE:"~-680,-680.5,7;X;C65;L9~
"KRN",.4,6892,"F",5)
4,"c";X;C5~4,.01;X;C6;L2~4,1;X;C11~
"KRN",.4,6892,"F",6)
4,-681,^LBRY(681,^^S I(1,0)=D1 S I(0,0)=D0 S DIP(1)=$S($D(^LBRY(682,D0,4,D1,0)):^(0),1:"") S X=$P(DIP(1),U,3),X=X S D(0)=+X;Z;".02:"~4,-681,3.01;X;C31~
"KRN",.4,6892,"H")
[LBRY MISSING ISSUES HEADER]
"KRN",.401,102416,-1)
0^2
"KRN",.401,102416,0)
LBRY SUBSCRIPTION/VENDOR 2^3020321.1111^^681^^^3021114
"KRN",.401,102416,2,0)
^.4014^2^2
"KRN",.401,102416,2,1,0)
681^^COREFLS VENDOR^#"3.01^;C5^^^^^4
"KRN",.401,102416,2,1,"ASK")
1
"KRN",.401,102416,2,1,"CM")
S Y(1)=$S($D(^LBRY(681,D0,3)):^(3),1:""),Y=$P(Y(1),U,1) X:$D(^DD(681,3.01,2)) ^(2) S X=Y I D0>0 S DISX(1)=X
"KRN",.401,102416,2,1,"GET")
S Y(1)=$S($D(^LBRY(681,D0,3)):^(3),1:""),Y=$P(Y(1),U,1) X:$D(^DD(681,3.01,2)) ^(2) S X=Y I D0>0 S DISX(1)=X
"KRN",.401,102416,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,102416,2,1,"TXT")
COREFLS VENDOR not null
"KRN",.401,102416,2,2,0)
681^^LOCAL SERIALS TITLE^@".02^^^^^^4
"KRN",.401,102416,2,2,3,0)
^.401419^1^1
"KRN",.401,102416,2,2,3,1,0)
OVF0^9.2
"KRN",.401,102416,2,2,3,1,"OVF0")
S I(0,0)=$G(D0),Y(1)=$S($D(^LBRY(681,D0,0)):^(0),1:""),D0=$P(Y(1),U,2) S:'D0!'$D(^LBRY(680,+D0,0)) D0=-1 S Y(101)=$S($D(^LBRY(680,D0,0)):^(0),1:"")
"KRN",.401,102416,2,2,3,"B","OVF0",1)

"KRN",.401,102416,2,2,"CM")
X DPP(2,"OVF0",9.2) S X=$S('$D(^LBRY(680.5,+$P(Y(101),U,1),0)):"",1:$P(^(0),U,1)) S D0=I(0,0) I D0>0 S DISX(2)=X
"KRN",.401,102416,2,2,"F")
@z^A
"KRN",.401,102416,2,2,"GET")
X DPP(2,"OVF0",9.2) S X=$S('$D(^LBRY(680.5,+$P(Y(101),U,1),0)):"",1:$P(^(0),U,1)) S D0=I(0,0) I D0>0 S DISX(2)=X
"KRN",.401,102416,2,2,"QCON")
I DISX(2)]]"@z"
"KRN",.401,102416,2,2,"T")
z^
"KRN",.401,102416,2,2,"TXT")
LOCAL SERIALS TITLE from A
"KRN",.401,102416,2,"B",681,1)

"KRN",.401,102416,2,"B",681,2)

"KRN",.401,102416,"%D",0)
^.4012^1^1^3020421^^^^
"KRN",.401,102416,"%D",1,0)
Sort by coreFLS vendor.
"KRN",.401,102417,-1)
0^1
"KRN",.401,102417,0)
LBRY MICROFILM VENDOR 2^3020510.1346^^680^^^3020510
"KRN",.401,102417,2,0)
^.4014^3^3
"KRN",.401,102417,2,1,0)
680^2.1^MICROFILM HOLDINGS^@'^^^^^^4
"KRN",.401,102417,2,1,"GET")
S DISX(1)=$P($G(^LBRY(680,D0,2)),U,2)
"KRN",.401,102417,2,1,"QCON")
I DISX(1)'=""
"KRN",.401,102417,2,1,"TXT")
MICROFILM HOLDINGS not null
"KRN",.401,102417,2,2,0)
680^^MICROFILM COREFLS VENDOR^#"2.6^;C5;"COREFLS VENDOR: "^^^^^4
"KRN",.401,102417,2,2,"ASK")
1
"KRN",.401,102417,2,2,"CM")
S Y(1)=$S($D(^LBRY(680,D0,2)):^(2),1:""),Y=$P(Y(1),U,6) X:$D(^DD(680,2.6,2)) ^(2) S X=Y I D0>0 S DISX(2)=X
"KRN",.401,102417,2,2,"F")
Cz^D
"KRN",.401,102417,2,2,"GET")
S Y(1)=$S($D(^LBRY(680,D0,2)):^(2),1:""),Y=$P(Y(1),U,6) X:$D(^DD(680,2.6,2)) ^(2) S X=Y I D0>0 S DISX(2)=X
"KRN",.401,102417,2,2,"QCON")
I (DISX(2)]]"Cz")&(DISX(2)']]"DZ")
"KRN",.401,102417,2,2,"T")
DZ^DZ
"KRN",.401,102417,2,2,"TXT")
MICROFILM COREFLS VENDOR from D to DZ
"KRN",.401,102417,2,3,0)
680^^TITLE^".01^^^^^^4
"KRN",.401,102417,2,3,"ASK")
1
"KRN",.401,102417,2,3,"CM")
S Y(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(3)=X
"KRN",.401,102417,2,3,"F")
@z^A
"KRN",.401,102417,2,3,"GET")
S Y(1)=$S($D(^LBRY(680,D0,0)):^(0),1:"") S X=$S('$D(^LBRY(680.5,+$P(Y(1),U,1),0)):"",1:$P(^(0),U,1)) I D0>0 S DISX(3)=X
"KRN",.401,102417,2,3,"IX")
^LBRY(680,"B",^LBRY(680,^2
"KRN",.401,102417,2,3,"PTRIX")
^LBRY(680.5,"B",
"KRN",.401,102417,2,3,"QCON")
I DISX(3)]]"@z"
"KRN",.401,102417,2,3,"T")
z^
"KRN",.401,102417,2,3,"TXT")
TITLE from A
"KRN",.401,102417,2,"B",680,1)

"KRN",.401,102417,2,"B",680,2)

"KRN",.401,102417,2,"B",680,3)

"KRN",.401,102417,"%D",0)
^.4012^1^1^3020510^^^^
"KRN",.401,102417,"%D",1,0)
Sort by Microfilm coreFLS vendor
"KRN",.401,102418,-1)
0^3
"KRN",.401,102418,0)
LBRY MISSING ISSUES LIST 2^3020421.1122^^682^^^3020424
"KRN",.401,102418,2,0)
^.4014^4^4
"KRN",.401,102418,2,1,0)
682.04^1^ISSUE STATUS^^^^^^^3
"KRN",.401,102418,2,1,1,0)
^.40141^1^1
"KRN",.401,102418,2,1,1,1,0)
682^4
"KRN",.401,102418,2,1,1,"B",682,1)

"KRN",.401,102418,2,1,"F")
3.999999^4^4 (NOT RECEIVED)
"KRN",.401,102418,2,1,"GET")
S DISX(1)=$P($G(^LBRY(682,D0,4,D1,0)),U,2)
"KRN",.401,102418,2,1,"QCON")
I DISX(1)]]3.999999
"KRN",.401,102418,2,1,"T")
z^
"KRN",.401,102418,2,1,"TXT")
ISSUE STATUS from 4 (NOT RECEIVED)
"KRN",.401,102418,2,2,0)
681^^COREFLS VENDOR^""3.01^^^^^^4
"KRN",.401,102418,2,2,1,0)
^.40141^1^1
"KRN",.401,102418,2,2,1,1,0)
682^4
"KRN",.401,102418,2,2,1,"B",682,1)

"KRN",.401,102418,2,2,2,0)
^.401418^1^1
"KRN",.401,102418,2,2,2,1,0)
682.04^100^681^LBRY(681,^0
"KRN",.401,102418,2,2,2,1,"RCOD")
S I(1,0)=D1 S I(0,0)=D0 S Y(1)=$S($D(^LBRY(682,D0,4,D1,0)):^(0),1:"") S X=$P(Y(1),U,3),X=X S D(0)=+X
"KRN",.401,102418,2,2,2,"B",682.04,1)

"KRN",.401,102418,2,2,"ASK")
1
"KRN",.401,102418,2,2,"CM")
S Y(101)=$S($D(^LBRY(681,D0,3)):^(3),1:""),Y=$P(Y(101),U,1) X:$D(^DD(681,3.01,2)) ^(2) S X=Y I D0>0 S DISX(2)=X
"KRN",.401,102418,2,2,"GET")
S Y(101)=$S($D(^LBRY(681,D0,3)):^(3),1:""),Y=$P(Y(101),U,1) X:$D(^DD(681,3.01,2)) ^(2) S X=Y I D0>0 S DISX(2)=X
"KRN",.401,102418,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,102418,2,2,"TXT")
COREFLS VENDOR not null
"KRN",.401,102418,2,3,0)
682^^LOCAL SERIALS TITLE^".02^^^^^^4
"KRN",.401,102418,2,3,3,0)
^.401419^1^1
"KRN",.401,102418,2,3,3,1,0)
OVF0^9.2
"KRN",.401,102418,2,3,3,1,"OVF0")
S I(0,0)=$G(D0),Y(1)=$S($D(^LBRY(682,D0,0)):^(0),1:""),D0=$P(Y(1),U,2) S:'D0!'$D(^LBRY(680,+D0,0)) D0=-1 S Y(101)=$S($D(^LBRY(680,D0,0)):^(0),1:"")
"KRN",.401,102418,2,3,3,"B","OVF0",1)

"KRN",.401,102418,2,3,"ASK")
1
"KRN",.401,102418,2,3,"CM")
X DPP(3,"OVF0",9.2) S X=$S('$D(^LBRY(680.5,+$P(Y(101),U,1),0)):"",1:$P(^(0),U,1)) S D0=I(0,0) I D0>0 S DISX(3)=X
"KRN",.401,102418,2,3,"F")
AMERICAN JOURNAL OF NURSINFz^AMERICAN JOURNAL OF NURSING
"KRN",.401,102418,2,3,"GET")
X DPP(3,"OVF0",9.2) S X=$S('$D(^LBRY(680.5,+$P(Y(101),U,1),0)):"",1:$P(^(0),U,1)) S D0=I(0,0) I D0>0 S DISX(3)=X
"KRN",.401,102418,2,3,"QCON")
I (DISX(3)]]"AMERICAN JOURNAL OF NURSINFz")&(DISX(3)']]"AMERICAN JOURNAL OF NURSINGZ")
"KRN",.401,102418,2,3,"T")
AMERICAN JOURNAL OF NURSINGZ^AMERICAN JOURNAL OF NURSINGZ
"KRN",.401,102418,2,3,"TXT")
LOCAL SERIALS TITLE from AMERICAN JOURNAL OF NURSING to AMERICAN JOURNAL OF NURSINGZ
"KRN",.401,102418,2,4,0)
682^1^JOURNAL DATE^^^^^^^1
"KRN",.401,102418,2,4,"ASK")
1
"KRN",.401,102418,2,4,"GET")
S DISX(4)=$P($G(^LBRY(682,D0,1)),U)
"KRN",.401,102418,2,4,"IX")
^LBRY(682,"D",^LBRY(682,^2
"KRN",.401,102418,2,4,"QCON")
I DISX(4)'=""
"KRN",.401,102418,2,4,"SER")
0.0000^0.0000
"KRN",.401,102418,2,4,"TXT")
JOURNAL DATE not null
"KRN",.401,102418,2,"B",681,2)

"KRN",.401,102418,2,"B",682,3)

"KRN",.401,102418,2,"B",682,4)

"KRN",.401,102418,2,"B",682.04,1)

"KRN",.402,2751,-1)
0^2
"KRN",.402,2751,0)
LBRY SITE2^3021210.0938^^680.6^^^3030305
"KRN",.402,2751,"DR",1,680.6)
.01;.07;.1;I X S Y="@2";.02//^S X="ABOC";S Y="@3";@2;.09;S LBRFLS=$$AFTER^DGBTCSL(680.6,D0,X,$G(LBRPREV)) K LBRPREV;I LBRFLS<1 S Y="@2";@3;.05;.03;.08;
"KRN",.402,2752,-1)
0^3
"KRN",.402,2752,0)
LBRY D3^3021210.0935^^681^^^3030220
"KRN",.402,2752,"DR",1,681)
.02////^S X=LBRYLOC;.04///^S X=LBRYPTR;1///^S X=1;3///^S X=DUZ;1.6;I X'="y" S Y="@1";S $P(^LBRY(681,DA,1),U,5)="";1.7;S Y="@2";@1;S:$P($G(^LBRY(681,DA,1)),U,7)="y" Y="@2";
"KRN",.402,2752,"DR",1,681,1)
3.01//^I $D(LBRYPTR) S X=$G(LBRPREV) S:$S('$D(^LBRY(680.6,LBRYPTR,0))#2:0,$P(^(0),U,9)']"":0,1:1) X=$$GET1^DIQ(680.6,LBRYPTR,.09);S LBRFLS=$$AFTER^DGBTCSL(681,D0,X,$G(LBRPREV)) K LBRPREV;S:LBRFLS<1 Y="@1" K LBRFLS;@2;1.1;1.3;
"KRN",.402,2752,"DR",1,681,2)
I X="A" S Y="@3";1.5//SHELVED;I X=3 S Y="@5";S Y="@4";@3;1.5//ROUTED;I X=3 S Y="@5";@4;2;@5;1.8///^S X=$S($D(LBRYPTR):LBRYPTR,1:"");
"KRN",.402,2752,"DR",2,681.02)
.01;@10;1;I X="" W !,"Please enter ROUTING ORDER." S Y="@10";
"KRN",.402,2753,-1)
0^4
"KRN",.402,2753,0)
LBRY D4^3021210.0937^^681^^^3030223
"KRN",.402,2753,"DR",1,681)
.02////^S X=LBRYLOC;.04///^S X=LBRYPTR;S LBRYSH=1;1;I X'="",$P(^LBRY(681,DA,1),U)'=X S $P(^LBRY(681,DA,1),U,3)=DUZ;I X="ToC" S $P(^LBRY(681,DA,1),U,6)=1,Y="@2";1.6;I X'="y" S Y="@1";S $P(^LBRY(681,DA,1),U,5)="";1.7;S Y="@3";@1;
"KRN",.402,2753,"DR",1,681,1)
S:$P($G(^LBRY(681,DA,1)),U,7)="y" Y="@3";3.01//^I $D(LBRYPTR) S X=$G(LBRPREV) S:$S('$D(^LBRY(680.6,LBRYPTR,0))#2:0,$P(^(0),U,9)']"":0,1:1) X=$$GET1^DIQ(680.6,LBRYPTR,.09);S LBRFLS=$$AFTER^DGBTCSL(681,D0,X,$G(LBRPREV)) K LBRPREV;
"KRN",.402,2753,"DR",1,681,2)
S:LBRFLS<1 Y="@1" K LBRFLS;@3;1.1;1.3;I X="A" S Y="@5";1.5//SHELVED;I X=3 S LBRYSH=1;I X=1!(X=2) S LBRYSH="";S Y="@4";Q;@5;1.5//ROUTED;I X=1!(X=2) S LBRYSH="";I X=3 S LBRYSH=1;@4;1.9;1.95;I LBRYSH=1 S Y="@6";@2;2;@6;
"KRN",.402,2753,"DR",2,681.02)
.01;@11;1;I X="" W !,"Please enter ROUTING ORDER." S Y="@11";
"KRN",.402,2754,-1)
0^1
"KRN",.402,2754,0)
LBRY BIBLIOGRAPHIC 2 ENTRY^3021210.0919^^680^^^3030123
"KRN",.402,2754,"DIAB",1,1,680.01,0)
ALL
"KRN",.402,2754,"DIAB",1,1,680.02,0)
ALL
"KRN",.402,2754,"DR",1,680)
1.1;2.1;@1;2.6;S LBRFLS=$$AFTER^DGBTCSL(680,D0,X,$G(LBRPREV)) K LBRPREV;S:LBRFLS<1 Y="@1" K LBRFLS;3;4;5.2;I X'="D" S Y=6;5.3;5.4;6;9;9.1;9.4;9.8;9.85;10.5;10.6;10.7;10.8;
"KRN",.402,2754,"DR",2,680.01)
.01
"KRN",.402,2754,"DR",2,680.02)
.01
"KRN",.402,2754,"DR",2,680.03)
.01;.02///^S X=DT;
"KRN",19,10225,-1)
3^3
"KRN",19,10225,0)
LBRY MANAGER^Library Management^^M^^^^^^^^LIBRARY^^1^1
"KRN",19,10225,1,0)
^19.06^1^1^3030305^^^^
"KRN",19,10225,1,1,0)
Assign to the Library Chief--access to all available Library options.
"KRN",19,10225,10,0)
^19.01IP^13^13
"KRN",19,10225,10,12,0)
15946^^11
"KRN",19,10225,10,12,"^")
LBRY LOCAL VENDOR ADD
"KRN",19,10225,10,13,0)
15983^^12
"KRN",19,10225,10,13,"^")
LBRY COREFLS CONVERSION
"KRN",19,10225,15)
K LBRYCSL,LBRYPTR
"KRN",19,10225,20)
W @IOF I '$D(LBRYPTR) D ^LBRYASK W @IOF
"KRN",19,10225,99)
59255,36233
"KRN",19,10225,99.1)
59149,62459
"KRN",19,10225,"U")
LIBRARY MANAGEMENT
"KRN",19,10240,-1)
0^1
"KRN",19,10240,0)
LBRY TITLES DUE RENEWAL^Titles Due for Renewal^^R^^^^^^^^
"KRN",19,10240,1,0)
^^1^1^2951012^^^^
"KRN",19,10240,1,1,0)
A report of all local, current subscriptions which are due to be renewed.
"KRN",19,10240,25)
DFR^LBRYRPT
"KRN",19,10240,"U")
TITLES DUE FOR RENEWAL
"KRN",19,10246,-1)
0^2
"KRN",19,10246,0)
LBRY TITLES VENDOR^Local Titles by Vendor^^R^^^^^^^^
"KRN",19,10246,1,0)
^19.06^2^2^3030123^^^^
"KRN",19,10246,1,1,0)
A report of all the subscriptions placed with each vendor used by
"KRN",19,10246,1,2,0)
the local library.
"KRN",19,10246,25)
LTV^LBRYRPT
"KRN",19,10246,"U")
LOCAL TITLES BY VENDOR
"KRN",19,15946,-1)
0^4
"KRN",19,15946,0)
LBRY LOCAL VENDOR ADD^Add a local vendor (COREFLS)^^R^^LBRY LOCAL VENDOR^^^^^^
"KRN",19,15946,1,0)
^^4^4^3021223^
"KRN",19,15946,1,1,0)
Use this option to add or update CoreFLS vendors from the national
"KRN",19,15946,1,2,0)
database unto your LOCAL VENDOR (#392.31) File.  The LOCAL VENDOR
"KRN",19,15946,1,3,0)
(#392.31) File will be used to return vendor information.  The need to go
"KRN",19,15946,1,4,0)
over the network for a CoreFLS vendor will be drastically reduced.
"KRN",19,15946,25)
STAND^LBRCSL
"KRN",19,15946,"U")
ADD A LOCAL VENDOR (COREFLS)
"KRN",19,15983,-1)
0^5
"KRN",19,15983,0)
LBRY COREFLS CONVERSION^COREFLS Conversion of old vendors^^R^^LBRY LOCAL VENDOR^^^^^^LIBRARY
"KRN",19,15983,1,0)
^^9^9^3030305^
"KRN",19,15983,1,1,0)
This menu can assist in the conversion of 'free text' vendor names; 
"KRN",19,15983,1,2,0)
MICROFILM VENDOR (#2.5) and VENDOR (#1.4) from both the LOCAL SERIALS
"KRN",19,15983,1,3,0)
(#680) and LBRY DISPOSITION (#681) Files respectfully, into their
"KRN",19,15983,1,4,0)
associated CoreFLS vendor names; MICROFILM COREFLS VENDOR (#2.6) of the
"KRN",19,15983,1,5,0)
LOCAL SERIALS (#680) File and COREFLS VENDOR (#3.01) of the LBRY
"KRN",19,15983,1,6,0)
DISPOSITION (#681) File.
"KRN",19,15983,1,7,0)
 
"KRN",19,15983,1,8,0)
This menu should be run after the site has made COREFLS ACTIVE in their 
"KRN",19,15983,1,9,0)
Library Site Parameters.
"KRN",19,15983,25)
LBR25P9V
"KRN",19,15983,"U")
COREFLS CONVERSION OF OLD VEND
"KRN",19.1,664,-1)
0^1
"KRN",19.1,664,0)
LBRY LOCAL VENDOR
"KRN",19.1,664,1,0)
^^2^2^3021215^
"KRN",19.1,664,1,1,0)
This key allows users to add a coreFLS vendor from the nationally held
"KRN",19.1,664,1,2,0)
database into the site's Local Vendor file (#392.31).
"MBREQ")
0
"ORD",3,19.1)
19.1;3;1;;KEY^XPDTA1;;;;;KEYDEL^XPDIA1
"ORD",3,19.1,0)
SECURITY KEY
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",6,.401)
.401;6;;;EDEOUT^DIFROMSO(.401,DA,"",XPDA);FPRE^DIFROMSI(.401,"",XPDA);EPRE^DIFROMSI(.401,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.401,DA,"",XPDA);DEL^DIFROMSK(.401,"",%)
"ORD",6,.401,0)
SORT TEMPLATE
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",405,-1)
1^1
"PKG",405,0)
LIBRARY^LBR^LIBRARY SERIALS PACKAGE^
"PKG",405,20,0)
^9.402P^^
"PKG",405,22,0)
^9.49I^1^1
"PKG",405,22,1,0)
2.5^2951219^2960428
"PKG",405,22,1,"PAH",1,0)
9^3030409^40023
"PKG",405,22,1,"PAH",1,1,0)
^^12^12^3030409
"PKG",405,22,1,"PAH",1,1,1,0)
This patch provides Library with the interface capabilities to the Core
"PKG",405,22,1,"PAH",1,1,2,0)
Financial Logististics System (CoreFLS).  coreFLS will replace the
"PKG",405,22,1,"PAH",1,1,3,0)
Integrated Funds Distribution, Control Point Activity, and Procurement
"PKG",405,22,1,"PAH",1,1,4,0)
(IFCAP) package.
"PKG",405,22,1,"PAH",1,1,5,0)
 
"PKG",405,22,1,"PAH",1,1,6,0)
Vendor information for coreFLS will be remotely held on a national
"PKG",405,22,1,"PAH",1,1,7,0)
database.  To aliviate traffic over a network system, a local vendor file,
"PKG",405,22,1,"PAH",1,1,8,0)
LOCAL VENDOR (#392.31) will be accessed to retrieve frequently used
"PKG",405,22,1,"PAH",1,1,9,0)
vendors.
"PKG",405,22,1,"PAH",1,1,10,0)
 
"PKG",405,22,1,"PAH",1,1,11,0)
A new field is added to the Library Site Parameters that will be used to
"PKG",405,22,1,"PAH",1,1,12,0)
activate the coreFLS interface:
"PRE")
LBR25P9
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
9
"RTN","LBR25P9")
0^^B3360171
"RTN","LBR25P9",1,0)
LBR25P9 ;ALB/MRY - Patch #9 Environment Check ;[04/22/02 15:44 PM ]
"RTN","LBR25P9",2,0)
 ;;2.5;Library;**9**;mAR 11,  1996
"RTN","LBR25P9",3,0)
EN ;
"RTN","LBR25P9",4,0)
 S XPDABORT=""
"RTN","LBR25P9",5,0)
 I '$G(DUZ)!($G(DUZ(0))'="@")!('$G(DT))!($G(U)'="^") D  G ABRT
"RTN","LBR25P9",6,0)
 . D BMES^XPDUTL("*****")
"RTN","LBR25P9",7,0)
 . D MES^XPDUTL("Your programming variables are not set up properly.")
"RTN","LBR25P9",8,0)
 . D MES^XPDUTL("Installation aborted.")
"RTN","LBR25P9",9,0)
 ; Verify that Library v2.5 exists, else quit
"RTN","LBR25P9",10,0)
 I +$$VERSION^XPDUTL("LBR")'="2.5" D  G ABRT
"RTN","LBR25P9",11,0)
 . D BMES^XPDUTL("*****")
"RTN","LBR25P9",12,0)
 . D MES^XPDUTL("VERSION 2.5 OF LIBRARY HAS NOT BEEN LOADED.")
"RTN","LBR25P9",13,0)
 . D MES^XPDUTL("Installation aborted.")
"RTN","LBR25P9",14,0)
 W !!,">> Environment check complete and okay."
"RTN","LBR25P9",15,0)
 Q
"RTN","LBR25P9",16,0)
 ;
"RTN","LBR25P9",17,0)
ABRT ; Abort transport, but leave in ^XTMP.
"RTN","LBR25P9",18,0)
 S ^XPDABORT=2 Q
"RTN","LBR25P9",19,0)
 ;
"RTN","LBR25P9",20,0)
POST ;Post init - remove 'out of order' messages.
"RTN","LBR25P9",21,0)
 ;
"RTN","LBR25P9",22,0)
 N DIC,COUNT
"RTN","LBR25P9",23,0)
 S DIC="^DIC(19,",DIC(0)="X",COUNT=0
"RTN","LBR25P9",24,0)
 F X="LBRY TITLES VENDOR","LBRY TITLES DUE RENEWAL" D
"RTN","LBR25P9",25,0)
 . D ^DIC Q:Y<0  D
"RTN","LBR25P9",26,0)
 . . S IENS=+Y_","
"RTN","LBR25P9",27,0)
 . . I $$GET1^DIQ(19,IENS,2)'="" D
"RTN","LBR25P9",28,0)
 . . . S COUNT=COUNT+1
"RTN","LBR25P9",29,0)
 . . . I COUNT=1 D BMES^XPDUTL("*****")
"RTN","LBR25P9",30,0)
 . . . I COUNT=1 D MES^XPDUTL("Clearing 'OUT OF ORDER MESSAGE for options...")
"RTN","LBR25P9",31,0)
 . . . I X="LBRY TITLES VENDOR" D MES^XPDUTL("LBRY TITLES VENDOR  -  Local Titles By Vendor")
"RTN","LBR25P9",32,0)
 . . . I X="LBRY TITLES DUE RENEWAL" D MES^XPDUTL("LBRY TITLES DUE RENEWAL  -  Titles Due For Renewal")
"RTN","LBR25P9",33,0)
 . . . D OUT^XPDMENU(X,"")
"RTN","LBR25P9",34,0)
 Q
"RTN","LBR25P9V")
0^9^B23191789
"RTN","LBR25P9V",1,0)
LBR25P9V ;ALB/MRY - Patch #9 Old 440 vendor conversion ;[08/30/02 14:38 pm ]
"RTN","LBR25P9V",2,0)
 ;;2.5;Library;**9**.Mar 11,  1996
"RTN","LBR25P9V",3,0)
 ;
"RTN","LBR25P9V",4,0)
 ; This routine will assist sites in converting their pre CoreFLS
"RTN","LBR25P9V",5,0)
 ; vendor names over to the new CoreFLS vendor fields.  Its purpose
"RTN","LBR25P9V",6,0)
 ; is to pull a list of old vendor names from the free text vendor 
"RTN","LBR25P9V",7,0)
 ; (440) file, allow the user to assign a CoreFLS equivalient from
"RTN","LBR25P9V",8,0)
 ; local (CoreFLS) vendor (392.31) file.  Once the temporary file 
"RTN","LBR25P9V",9,0)
 ; is built, populating the entries will place the values in the CoreFLS
"RTN","LBR25P9V",10,0)
 ; fields.  Review the documentation found in patch LBR*2.5*9.  The
"RTN","LBR25P9V",11,0)
 ; temporary file is only retained for 90 days.  All tasks are intended
"RTN","LBR25P9V",12,0)
 ; to be completed within the 90 day timeframe.
"RTN","LBR25P9V",13,0)
 ;
"RTN","LBR25P9V",14,0)
 N LBRSTOP D INTRO I $G(LBRSTOP) Q
"RTN","LBR25P9V",15,0)
 ;
"RTN","LBR25P9V",16,0)
TOP S OPT=$$ASK
"RTN","LBR25P9V",17,0)
 I OPT="P" S %=$$PULL
"RTN","LBR25P9V",18,0)
 I OPT="A" S %=$$ASSOC
"RTN","LBR25P9V",19,0)
 I OPT="C" S %=$$POP
"RTN","LBR25P9V",20,0)
 I OPT="L" S %=$$LIST
"RTN","LBR25P9V",21,0)
 I OPT="Q" G TOP
"RTN","LBR25P9V",22,0)
 G END
"RTN","LBR25P9V",23,0)
ASK() ;
"RTN","LBR25P9V",24,0)
 N DIR,Y,DIRUT
"RTN","LBR25P9V",25,0)
 S DIR(0)="SOM^P:PULL LIST OF OLD LIBRARY (440) VENDORS;L:DISPLAY PULL LIST;A:ASSOCIATE OLD LIBRARY (440) VENDORS TO COREFLS VENDORS;C:POPULATE COREFLS VENDOR FIELDS;Q:QUIT"
"RTN","LBR25P9V",26,0)
 S DIR("?",1)="  Enter 'P' to generate a list of 440 vendors entered in the Library files."
"RTN","LBR25P9V",27,0)
 S DIR("?",2)="  Enter 'L' to Display Pull List."
"RTN","LBR25P9V",28,0)
 S DIR("?",3)="  Enter 'A' to associate a 440 Vendor name to a CoreFLS Vendor name."
"RTN","LBR25P9V",29,0)
 S DIR("?",4)="  Enter 'C' to populate to CoreFLS Vendor fields."
"RTN","LBR25P9V",30,0)
 S DIR("?",5)="  Enter 'Q' to quit."
"RTN","LBR25P9V",31,0)
 D ^DIR K DIR I $D(DIRUT)!'$D(Y) Q -1
"RTN","LBR25P9V",32,0)
 Q Y
"RTN","LBR25P9V",33,0)
 ;
"RTN","LBR25P9V",34,0)
INTRO ;
"RTN","LBR25P9V",35,0)
 N X
"RTN","LBR25P9V",36,0)
 S X="CSLVQ" X ^%ZOSF("TEST") I '$T D  S LBRSTOP=1 Q
"RTN","LBR25P9V",37,0)
 . W !,"** COMMUNICATIONS SERVICE LIBRARY (CSL) PACKAGE NOT INSTALLED **"
"RTN","LBR25P9V",38,0)
 Q
"RTN","LBR25P9V",39,0)
 ;
"RTN","LBR25P9V",40,0)
PULL() ;
"RTN","LBR25P9V",41,0)
 N LBRIEN,X
"RTN","LBR25P9V",42,0)
 I $D(^XTMP("LBR25P9")) W !!,"^XTMP('LBR25P9') already pulled!" Q 1
"RTN","LBR25P9V",43,0)
 S ^XTMP("LBR25P9",0)=$$FMADD^XLFDT(DT,90)_"^"_DT
"RTN","LBR25P9V",44,0)
 W !!,"Looking through ^LBRY(680)..."
"RTN","LBR25P9V",45,0)
 S LBRIEN=0 F  S LBRIEN=$O(^LBRY(680,LBRIEN)) Q:'LBRIEN  D
"RTN","LBR25P9V",46,0)
 . S X=$P($G(^LBRY(680,LBRIEN,2)),"^",5)
"RTN","LBR25P9V",47,0)
 . I X'="" S ^XTMP("LBR25P9",1,X)="",^(X,680,LBRIEN)=""
"RTN","LBR25P9V",48,0)
 W !,"Looking through ^LBRY(681)..."
"RTN","LBR25P9V",49,0)
 S LBRIEN=0 F  S LBRIEN=$O(^LBRY(681,LBRIEN)) Q:'LBRIEN  D
"RTN","LBR25P9V",50,0)
 . S X=$P($G(^LBRY(681,LBRIEN,1)),"^",5)
"RTN","LBR25P9V",51,0)
 . I X'="" S ^XTMP("LBR25P9",1,X)="",^(X,681,LBRIEN)=""
"RTN","LBR25P9V",52,0)
 Q 1
"RTN","LBR25P9V",53,0)
 ;
"RTN","LBR25P9V",54,0)
ASSOC() ;
"RTN","LBR25P9V",55,0)
 N LBR440,DTOUT,DUOUT,ANS,LBRNEW,DIC,X
"RTN","LBR25P9V",56,0)
 I '$D(^XTMP("LBR25P9")) W !!,"Pull List not created!" Q 1
"RTN","LBR25P9V",57,0)
 S LBR440=0 F  S LBR440=$O(^XTMP("LBR25P9",1,LBR440)) Q:LBR440=""  D AS1 Q:$D(DTOUT)!$D(DUOUT)!(ANS=-1)
"RTN","LBR25P9V",58,0)
 Q 1
"RTN","LBR25P9V",59,0)
AS1 W !!,"OLD VENDOR (440) NAME: ",LBR440
"RTN","LBR25P9V",60,0)
 S (LBRNEW,ANS)=0 I ^XTMP("LBR25P9",1,LBR440)="" D  Q:$D(DTOUT)!($D(DUOUT))
"RTN","LBR25P9V",61,0)
 . S DIC="^DGBT(392.31,",DIC(0)="QEAMZ"
"RTN","LBR25P9V",62,0)
 . D ^DIC Q:$D(DTOUT)!$D(DUOUT)!(Y=-1)
"RTN","LBR25P9V",63,0)
 . S ^XTMP("LBR25P9",1,LBR440)=Y(0,0)_"^"_+Y,LBRNEW=1
"RTN","LBR25P9V",64,0)
 S X=^XTMP("LBR25P9",1,LBR440)
"RTN","LBR25P9V",65,0)
 W:LBRNEW !,"OLD VENDOR (440) NAME: ",LBR440
"RTN","LBR25P9V",66,0)
 W !,"NEW COREFLS VENDOR NAME: ",$P(X,"^")
"RTN","LBR25P9V",67,0)
 I X'="" S ANS=$$ACCEPT Q:ANS=-1  I 'ANS S ^XTMP("LBR25P9",1,LBR440)="" G AS1
"RTN","LBR25P9V",68,0)
 Q
"RTN","LBR25P9V",69,0)
ACCEPT() ;
"RTN","LBR25P9V",70,0)
 N DIR,ACCEPT,Y,DTOUT,DUOUT
"RTN","LBR25P9V",71,0)
 S DIR(0)="SB^A:ACCEPT;R:REMOVE",DIR("A")="ACCEPT, OR REMOVE?",DIR("B")="A"
"RTN","LBR25P9V",72,0)
 D ^DIR S ACCEPT=$S(Y="A":1,$D(DUOUT)!($D(DTOUT)):-1,1:0)
"RTN","LBR25P9V",73,0)
 Q ACCEPT
"RTN","LBR25P9V",74,0)
 ;
"RTN","LBR25P9V",75,0)
POP() ;
"RTN","LBR25P9V",76,0)
 I '$D(^XTMP("LBR25P9")) W !!,"Pull List not created!" Q
"RTN","LBR25P9V",77,0)
 W !!,"Adding CoreFLS Vendor names to ^LBRY(680), and ^LBRY(681)..."
"RTN","LBR25P9V",78,0)
 S LBR440=0
"RTN","LBR25P9V",79,0)
 F  S LBR440=$O(^XTMP("LBR25P9",1,LBR440)) Q:LBR440=""  S X=^XTMP("LBR25P9",1,LBR440) I X'="" D
"RTN","LBR25P9V",80,0)
 . S FLSNAM=$P(X,"^"),FLSIEN=$P(X,"^",2)
"RTN","LBR25P9V",81,0)
 . I $P($G(^DGBT(392.31,FLSIEN,0)),"^")'=FLSNAM Q
"RTN","LBR25P9V",82,0)
 . S LBRFILE="" F  S LBRFILE=$O(^XTMP("LBR25P9",1,LBR440,LBRFILE)) Q:'LBRFILE  D
"RTN","LBR25P9V",83,0)
 . . S LBRIEN="" F  S LBRIEN=$O(^XTMP("LBR25P9",1,LBR440,LBRFILE,LBRIEN)) Q:'LBRIEN  D
"RTN","LBR25P9V",84,0)
 . . . S LBRIENS=LBRIEN_"," K FDATA
"RTN","LBR25P9V",85,0)
 . . . I LBRFILE=680 S FDATA(680,LBRIENS,2.6)=FLSIEN
"RTN","LBR25P9V",86,0)
 . . . I LBRFILE=681 S FDATA(681,LBRIENS,3.01)=FLSIEN
"RTN","LBR25P9V",87,0)
 . . . I $D(FDATA) D FILE^DIE("","FDATA","ERROR")
"RTN","LBR25P9V",88,0)
 Q 1
"RTN","LBR25P9V",89,0)
 ;
"RTN","LBR25P9V",90,0)
LIST() ;
"RTN","LBR25P9V",91,0)
 I '$D(^XTMP("LBR25P9")) W !!,"Pull List not created!" Q 1
"RTN","LBR25P9V",92,0)
 N %ZIS,ZTRN,ZTDESC
"RTN","LBR25P9V",93,0)
 S %ZIS="QM" D ^%ZIS G:POP END
"RTN","LBR25P9V",94,0)
 I $D(IO("Q")) S ZTRTN="PRINT^LBR25P9V",ZTDESC="LBR25P9V VENDOR LIST" D ^%ZTLOAD
"RTN","LBR25P9V",95,0)
 K ZTSK,IO("Q") D HOME^%ZIS
"RTN","LBR25P9V",96,0)
 U IO
"RTN","LBR25P9V",97,0)
 ;
"RTN","LBR25P9V",98,0)
PRINT ;
"RTN","LBR25P9V",99,0)
 N PAG,HDR,HDR1,HDR2,LBR440,FLSDATA,FLSNAM,DIRUT
"RTN","LBR25P9V",100,0)
 S PAG=0,HDR="OLD VENDORS (440) AND CORRESPONDING CoreFLS VENDORS LIST"
"RTN","LBR25P9V",101,0)
 S HDR1="OLD VENDOR NAME",HDR2="NEW CoreFLS VENDOR NAME"
"RTN","LBR25P9V",102,0)
 S LBR440="" F  S LBR440=$O(^XTMP("LBR25P9",1,LBR440)) Q:LBR440=""  D  Q:$D(DIRUT)
"RTN","LBR25P9V",103,0)
 . S FLSNAM=$P(^XTMP("LBR25P9",1,LBR440),"^")
"RTN","LBR25P9V",104,0)
 . D PLINE
"RTN","LBR25P9V",105,0)
 Q 1
"RTN","LBR25P9V",106,0)
 ;
"RTN","LBR25P9V",107,0)
PLINE ;
"RTN","LBR25P9V",108,0)
 I PAG=0 D HDR
"RTN","LBR25P9V",109,0)
 W !,$E(LBR440,1,35),?40,$E(FLSNAM,1,35)
"RTN","LBR25P9V",110,0)
 D CHKL Q
"RTN","LBR25P9V",111,0)
 ;
"RTN","LBR25P9V",112,0)
HDR ;
"RTN","LBR25P9V",113,0)
 W:$E(IOST,1,2)["C-"!(PAG>0) @IOF S PAG=PAG+1
"RTN","LBR25P9V",114,0)
 W !,?(IOM-$L(HDR)/2),HDR,?(IOM-10),"PAGE ",PAG
"RTN","LBR25P9V",115,0)
 W !!,HDR1,?40,HDR2
"RTN","LBR25P9V",116,0)
 W !,$TR($J("",IOM)," ","-")
"RTN","LBR25P9V",117,0)
 Q
"RTN","LBR25P9V",118,0)
 ;
"RTN","LBR25P9V",119,0)
CHKL ;
"RTN","LBR25P9V",120,0)
 I IOSL<($Y+5),$E(IOST,1,2)="C-" D PAUSE^VALM1 Q:$D(DIRUT)  W @IOF D HDR Q
"RTN","LBR25P9V",121,0)
 I $E(IOST,1,2)'="C",IOSL<($Y+5) D HDR
"RTN","LBR25P9V",122,0)
 Q
"RTN","LBR25P9V",123,0)
 ;
"RTN","LBR25P9V",124,0)
END ;
"RTN","LBR25P9V",125,0)
 I $D(ZTQUEUED) S ZTREQ="@" Q
"RTN","LBR25P9V",126,0)
 D ^%ZISC Q
"RTN","LBR25P9V",127,0)
 Q
"RTN","LBRCSL")
0^8^B500996
"RTN","LBRCSL",1,0)
LBRCSL ;ALB/MRY; Library CoreFLS ;[ 03/15/02 11:35 AM]
"RTN","LBRCSL",2,0)
 ;;2.5;Library;**9**;Mar 11, 1996
"RTN","LBRCSL",3,0)
 ;
"RTN","LBRCSL",4,0)
STAND ; Standalone query.
"RTN","LBRCSL",5,0)
 I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRCSL",6,0)
 . D ^LBRYASK
"RTN","LBRCSL",7,0)
 I '$P($G(^LBRY(680.6,LBRYPTR,0)),"^",10) D  Q
"RTN","LBRCSL",8,0)
 . W !,"CoreFLS Vendor interface is not active."
"RTN","LBRCSL",9,0)
 D STAND^DGBTCSL
"RTN","LBRCSL",10,0)
 Q
"RTN","LBRYCSE")
0^4^B18134746
"RTN","LBRYCSE",1,0)
LBRYCSE ;ISC2/DJM-COPY SPECIFIC EDITING ;[ 11/26/97  4:35 PM ]
"RTN","LBRYCSE",2,0)
 ;;2.5;Library;**2,9**;Mar 11, 1996
"RTN","LBRYCSE",3,0)
 I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYCSE",4,0)
 . D ^LBRYASK
"RTN","LBRYCSE",5,0)
START W @IOF,?5,"VA Library Copy Specific Edit for "_LBRYNAM
"RTN","LBRYCSE",6,0)
 S Y=DT X ^DD("DD") W ?60,Y,! S YDT=Y
"RTN","LBRYCSE",7,0)
 S DIC="^LBRY(680,",DIC(0)="AEQZ",DIC("S")="I $P(^(0),U,4)=LBRYPTR&($P(^(0),U,2)="""")"
"RTN","LBRYCSE",8,0)
 D ^DIC K DIC("S") G:Y<0 CHOICE
"RTN","LBRYCSE",9,0)
 S (DA,LBRYLOC)=$P(Y,U),LBRYCLS=$P(Y,U,2)
"RTN","LBRYCSE",10,0)
 S (E,E0,E1)=1 D CON
"RTN","LBRYCSE",11,0)
 S LBUDT=0,XXZ=$P(^LBRY(680,LBRYLOC,0),U,2) G:XXZ]"" INCOM
"RTN","LBRYCSE",12,0)
 I '$D(A(1)) G INCOM
"RTN","LBRYCSE",13,0)
CONT W @IOF,?5,"VA Library Copy Specific Edit",?60,YDT
"RTN","LBRYCSE",14,0)
 W !,"TITLE: ",$P(^LBRY(680.5,LBRYCLS,0),U),! K LA
"RTN","LBRYCSE",15,0)
 S LA(1)="ID",LA(2)="COPY",LA(3)="START",LA(4)="STOP",LA(5)="NUM",LA(6)="DATE"
"RTN","LBRYCSE",16,0)
 W !,LA(1),?10,LA(2),?30,LA(3),?55,LA(4)
"RTN","LBRYCSE",17,0)
 W !,LA(5),?10,LA(5),?30,LA(6),?55,LA(6)
"RTN","LBRYCSE",18,0)
 G:'$D(A(1)) INACT
"RTN","LBRYCSE",19,0)
 S E1=E0 D FWD1^LBRYCK0
"RTN","LBRYCSE",20,0)
 F I=E0:1:E1 S AA=^LBRY(681,A(I),1),CN=$P(AA,U),START=$P(AA,U,10),STOP=$P(AA,U,11) D FIXIT W !,?1,I,?11,CN,?27,START,?52,STOP
"RTN","LBRYCSE",21,0)
 G ^LBRYCSE0
"RTN","LBRYCSE",22,0)
REMOVE S E=0 G:$L(X)>0 KILL0
"RTN","LBRYCSE",23,0)
KILL W !,"Select a number from 'ID NUM' column to REMOVE that COPY from this title: "
"RTN","LBRYCSE",24,0)
 S DTOUT=0 R X:DTIME E  W $C(7) S DTOUT=1 G START
"RTN","LBRYCSE",25,0)
 I X="" Q
"RTN","LBRYCSE",26,0)
KILL0 I X="^" Q
"RTN","LBRYCSE",27,0)
 I X="?" W !,"Choose the 'ID NUM' of the COPY you want to REMOVE." G KILL
"RTN","LBRYCSE",28,0)
 I '$D(A(X)) W !,"There is no COPY by this number." G KILL
"RTN","LBRYCSE",29,0)
 S CN=$P(^LBRY(681,A(X),1),U),X1=0,L1=""
"RTN","LBRYCSE",30,0)
 F  S L1=$O(^LBRY(682,"C",LBRYLOC,L1)) G:L1="" KILL1 S L2=$O(^LBRY(682,L1,4,"B",CN,0)) I L2'="" W !,"This COPY # may not be REMOVED only EDITED." G KILL
"RTN","LBRYCSE",31,0)
KILL1 S DIK="^LBRY(681,",DA=A(X) D ^DIK K DIK
"RTN","LBRYCSE",32,0)
 Q
"RTN","LBRYCSE",33,0)
QUERY S E=0 G:$L(X)>0 EDIT0
"RTN","LBRYCSE",34,0)
EDIT W !,"Select a number from 'ID NUM' column to EDIT that COPY: "
"RTN","LBRYCSE",35,0)
 S DTOUT=0 R X:DTIME E  W $C(7) S DTOUT=1 G CONT
"RTN","LBRYCSE",36,0)
 I X="" Q
"RTN","LBRYCSE",37,0)
 I X="^" Q
"RTN","LBRYCSE",38,0)
EDIT0 I X="?" W !,"Choose the 'ID NUM' of the COPY you want to EDIT." G EDIT
"RTN","LBRYCSE",39,0)
 I '$D(A(X)) W !,"There is no COPY by this number." G EDIT
"RTN","LBRYCSE",40,0)
 S LBRYX0=$G(^LBRY(680,LBRYLOC,7)),DA=A(X),DIE="^LBRY(681,"
"RTN","LBRYCSE",41,0)
 S DR=$S($D(LBRYPTR)&($P($G(^LBRY(680.6,LBRYPTR,0)),U,10)):"[LBRY D4]",1:"[LBRY D2]"),DIC=DIE D LOCK^LBRYEDR G:LBRYL=0 EXIT
"RTN","LBRYCSE",42,0)
 D ^DIE L  I $D(Y)!($D(DTOUT)) Q
"RTN","LBRYCSE",43,0)
 Q
"RTN","LBRYCSE",44,0)
ENTER S LBRYX0=$G(^LBRY(680,LBRYLOC,7))
"RTN","LBRYCSE",45,0)
ENTER1 I $L(X)>0,X="?" W !,"Use INSERT to add a new COPY to this title." S XZ="CONTINUE// " D PAUSE^LBRYUTL K XZ
"RTN","LBRYCSE",46,0)
 S X=$P(LBRYX0,U) I X="" D  Q
"RTN","LBRYCSE",47,0)
 . W !!,"This title has no INITIAL COPIES ORDERED information."
"RTN","LBRYCSE",48,0)
 . W !,"Go to Library Title Setup to correct this."
"RTN","LBRYCSE",49,0)
 . S XZ="Exit// " D PAUSE^LBRYUTL K XZ
"RTN","LBRYCSE",50,0)
 L ^LBRY(681,0) S X=^LBRY(681,0),X=$P(X,U,3) F  S X=X+1 I '$D(^LBRY(681,X,0)) L  Q
"RTN","LBRYCSE",51,0)
 K DO S DIC="^LBRY(681,",DIC(0)="LZ" D FILE^DICN L
"RTN","LBRYCSE",52,0)
 S DIE=DIC,DA=+Y,DR=$S($D(LBRYPTR)&($P($G(^LBRY(680.6,LBRYPTR,0)),U,10)):"[LBRY D4]",1:"[LBRY D2]") D LOCK^LBRYEDR G:LBRYL=0 EXIT
"RTN","LBRYCSE",53,0)
 D ^DIE L  I $D(Y)!($D(DTOUT)) Q
"RTN","LBRYCSE",54,0)
 Q
"RTN","LBRYCSE",55,0)
INCOM W !,"This title is "_$S(XXZ="C":"cancelled",XXZ="D":"a dead title",XXZ="R":"a renamed title",1:"not completely set up")_"."
"RTN","LBRYCSE",56,0)
 W:XXZ="" !,"Go to Library Title Setup (LTS) to finish setting up this title."
"RTN","LBRYCSE",57,0)
 S XZ="Continue// " D PAUSE^LBRYUTL K XZ
"RTN","LBRYCSE",58,0)
 G START
"RTN","LBRYCSE",59,0)
CON K A S (LX,A)=0
"RTN","LBRYCSE",60,0)
 F  S LX=$O(^LBRY(681,"AC",LBRYLOC,LX)) Q:LX=""  S NC="" D
"RTN","LBRYCSE",61,0)
 . F  S NC=$O(^LBRY(681,"AC",LBRYLOC,LX,NC)) Q:NC=""  S A=A+1,A(A)=NC
"RTN","LBRYCSE",62,0)
 Q
"RTN","LBRYCSE",63,0)
FIXIT S:START="" START="-----------" I START=+START S Y=START X ^DD("DD") S START=Y
"RTN","LBRYCSE",64,0)
 S:STOP="" STOP="-----------" I STOP=+STOP S Y=STOP X ^DD("DD") S STOP=Y
"RTN","LBRYCSE",65,0)
 Q
"RTN","LBRYCSE",66,0)
CHOICE I $D(LBRYNEW) I LBRYNEW=1 D EXIT G ^LBRYLST
"RTN","LBRYCSE",67,0)
 G EXIT
"RTN","LBRYCSE",68,0)
INACT S $P(^LBRY(680,LBRYLOC,0),U,2)="C",$P(^LBRY(680.5,LBRYLOC,0),U,2)=2
"RTN","LBRYCSE",69,0)
 W !!!,"Since you just removed the last copy for this title I am making this",!,"a CANCELLED TITLE.",!
"RTN","LBRYCSE",70,0)
NOT1 S XZ="EXIT//" D PAUSE^LBRYUTL K XZ
"RTN","LBRYCSE",71,0)
EXIT K YDT,E,E0,E1,A,I,X,Z,LX,LS,LBUDT,XXZ,LA,AA,CN,START,STOP,X1,X2,L1,L2
"RTN","LBRYCSE",72,0)
 K LBRYX0,LBRYNEW,DR,LBRYL,XZ,DIC,DIE,DIK,LBRYLOC,LBRYCLS
"RTN","LBRYCSE",73,0)
 Q
"RTN","LBRYEDI")
0^5^B4885485
"RTN","LBRYEDI",1,0)
LBRYEDI ;ISC2/DJM-FILE 680 ADDITIONAL EDIT OPTIONS ;[ 05/23/97  12:13 PM ]
"RTN","LBRYEDI",2,0)
 ;;2.5;Library;**2,9**;Mar 11, 1996
"RTN","LBRYEDI",3,0)
 ;
"RTN","LBRYEDI",4,0)
HOL I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYEDI",5,0)
 . D ^LBRYASK
"RTN","LBRYEDI",6,0)
 W @IOF,"VA Library Serials Holdings Edit for "_LBRYNAM
"RTN","LBRYEDI",7,0)
 S Y=DT X ^DD("DD") S YDT=Y W ?60,Y,!
"RTN","LBRYEDI",8,0)
 S DIC="^LBRY(680,",DIC(0)="AEMQZ",DIC("S")="I $P(^(0),U,4)=LBRYPTR&($P(^(0),U,2)="""")"
"RTN","LBRYEDI",9,0)
 D ^DIC
"RTN","LBRYEDI",10,0)
 G:Y<0 EXIT S (DA,LBRYLOC)=$P(Y,U),LBRYCLS=$P(Y,U,2)
"RTN","LBRYEDI",11,0)
 S LA0="TITLE: "_$P(^LBRY(680.5,LBRYCLS,0),U),DA=LBRYLOC
"RTN","LBRYEDI",12,0)
 W @IOF,?5,"VA Library Serials Bibliographic Edit",?60,YDT,!!,LA0,!!
"RTN","LBRYEDI",13,0)
 S DIE="^LBRY(680,",DR=$S($D(LBRYPTR)&($P($G(^LBRY(680.6,LBRYPTR,0)),U,10)):"[LBRY BIBLIOGRAPHIC 2 ENTRY]",1:"[LBRY BIBLIOGRAPHIC ENTRY]"),DIC=DIE
"RTN","LBRYEDI",14,0)
 D LOCK^LBRYEDR G:LBRYL=0 EXIT D ^DIE K DIE,DR L
"RTN","LBRYEDI",15,0)
 G HOL
"RTN","LBRYEDI",16,0)
PIE I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYEDI",17,0)
 . D ^LBRYASK
"RTN","LBRYEDI",18,0)
 W @IOF,"VA Library Serials Purchasing Information for "_LBRYNAM
"RTN","LBRYEDI",19,0)
 S Y=DT X ^DD("DD") S YDT=Y W ?60,Y,!
"RTN","LBRYEDI",20,0)
 S DIC="^LBRY(680,",DIC(0)="AEMQZ",DIC("S")="I $P(^(0),U,4)=LBRYPTR&($P(^(0),U,2)="""")"
"RTN","LBRYEDI",21,0)
 D ^DIC
"RTN","LBRYEDI",22,0)
 G:Y<0 EXIT S (DA,LBRYLOC)=$P(Y,U),LBRYCLS=$P(Y,U,2)
"RTN","LBRYEDI",23,0)
 S LA0="TITLE: "_$P(^LBRY(680.5,LBRYCLS,0),U),DA=LBRYLOC
"RTN","LBRYEDI",24,0)
 W @IOF,?5,"VA Library Serials Purchasing Information",?60,YDT,!!,LA0,!!
"RTN","LBRYEDI",25,0)
 S DIE="^LBRY(680,",DR="[LBRY FINANCIAL ENTRY]",DIC=DIE
"RTN","LBRYEDI",26,0)
 D LOCK^LBRYEDR G:LBRYL=0 EXIT D ^DIE K DIE,DR L
"RTN","LBRYEDI",27,0)
 G PIE
"RTN","LBRYEDI",28,0)
EXIT K DIC,DIE,YDT,LA0,DR,LBRYL,LBRYCLS,LBRYLOC,LBRTDA
"RTN","LBRYEDI",29,0)
 Q
"RTN","LBRYEDI",30,0)
NTIT ;  Special cross-reference for new titles
"RTN","LBRYEDI",31,0)
 I $G(LBRYNEW)=1 S $P(^LBRY(680,DA,5),U)=DT I $D(^LBRY(680.5,LBRYCLS,0)) S $P(^(0),U,2)=1
"RTN","LBRYEDI",32,0)
 Q
"RTN","LBRYLST")
0^3^B15447641
"RTN","LBRYLST",1,0)
LBRYLST ;ISC2/DJM-LIBRARY TITLE SETUP ;[ 05/23/97  12:13 PM ]
"RTN","LBRYLST",2,0)
 ;;2.5;Library;**2,9**;Mar 11, 1996
"RTN","LBRYLST",3,0)
 I $G(LBRYPTR)="" D  I $G(LBRYPTR)="" W !!,$C(7),"No Site has been selected" Q
"RTN","LBRYLST",4,0)
 . D ^LBRYASK
"RTN","LBRYLST",5,0)
START W @IOF,?5,"VA Library Serials Title Setup for "_LBRYNAM
"RTN","LBRYLST",6,0)
 K CNT,COUNT,INACT,Y,LBRYLOC
"RTN","LBRYLST",7,0)
 D NOW^%DTC S Y=X X ^DD("DD") S YDT=Y W ?60,YDT,!
"RTN","LBRYLST",8,0)
 S DIC="^LBRY(680.5,",DIC(0)="AELMQZ",DLAYGO=680.5,LBRYNEW="",INACT=""
"RTN","LBRYLST",9,0)
 S DIC("A")="Select TITLE AUTHORITY TITLE: " D ^DIC
"RTN","LBRYLST",10,0)
 K DLAYGO,DIC("A") G:Y<0 EXIT1 S (LBRYCLS,DA)=+Y,LBRYNEW=$P(Y,U,3)
"RTN","LBRYLST",11,0)
 I $P(^LBRY(680.5,LBRYCLS,0),U,5)="N" K DR D  G CONT1
"RTN","LBRYLST",12,0)
 . W @IOF,?5,"VA Library Serials Enter a Title",?60,YDT
"RTN","LBRYLST",13,0)
 . W !!,"TITLE: ",$P(^LBRY(680.5,LBRYCLS,0),U)
"RTN","LBRYLST",14,0)
 . W !!,"Displaying TITLE AUTHORITY file" S DR="0:3" D EN^DIQ
"RTN","LBRYLST",15,0)
CONT W @IOF,?5,"VA Library Serials Enter a Title",?60,YDT
"RTN","LBRYLST",16,0)
 W !!,"TITLE: ",$P(^LBRY(680.5,LBRYCLS,0),U)
"RTN","LBRYLST",17,0)
 W !!,"Editing TITLE AUTHORITY file"
"RTN","LBRYLST",18,0)
 K DR S DIE="^LBRY(680.5,",DA=LBRYCLS,DR="[LBRY CHECK-IN SETUP]"
"RTN","LBRYLST",19,0)
 S DIE("NO^")=1,DIC=DIE D LOCK^LBRYEDR G:LBRYL=0 EXIT
"RTN","LBRYLST",20,0)
 D ^DIE
"RTN","LBRYLST",21,0)
 K DIE("NO^"),DA L  G:($D(Y)!($D(DTOUT))) EXIT1
"RTN","LBRYLST",22,0)
 I $P(^LBRY(680.5,LBRYCLS,0),U,5)="L",LBRYNEW=1 D ^LBRYLTF
"RTN","LBRYLST",23,0)
CONT1 S LBRTDA=""
"RTN","LBRYLST",24,0)
 F  S LBRTDA=$O(^LBRY(680,"B",LBRYCLS,LBRTDA)) Q:LBRTDA=""  D
"RTN","LBRYLST",25,0)
 . I $P(^LBRY(680,LBRTDA,0),U,4)=LBRYPTR S LBRYLOC=LBRTDA Q
"RTN","LBRYLST",26,0)
 I $G(LBRYLOC)="" K DO S LBRYNEW=1 D
"RTN","LBRYLST",27,0)
 . S DINUM=$P(^LBRY(680,0),U,3)
"RTN","LBRYLST",28,0)
 . F  S DINUM=DINUM+1 Q:'$D(^LBRY(680,DINUM,0))
"RTN","LBRYLST",29,0)
 . S X=LBRYCLS,DIC="^LBRY(680,",LBRYNEW=1,DIC(0)="LNZ"
"RTN","LBRYLST",30,0)
 . D FILE^DICN S LBRYLOC=+Y
"RTN","LBRYLST",31,0)
 W !!,"Editing LOCAL SERIALS file" K DR S DIE="^LBRY(680,"
"RTN","LBRYLST",32,0)
 S DR="[LBRY LOCAL SETUP]",DIE("NO^")=1,DA=LBRYLOC,DIC=DIE
"RTN","LBRYLST",33,0)
 D LOCK^LBRYEDR G:LBRYL=0 EXIT
"RTN","LBRYLST",34,0)
 D ^DIE I '$D(^LBRY(680,DA,7)) D KILL
"RTN","LBRYLST",35,0)
 K DIE("NO^") L  G:($D(Y)!($D(DTOUT))) EXIT1
"RTN","LBRYLST",36,0)
 S INACT=$P(^LBRY(680,LBRYLOC,0),U,2) I INACT]"","DCR"[INACT G START
"RTN","LBRYLST",37,0)
 G:LBRYNEW>0 COPY1
"RTN","LBRYLST",38,0)
CHECK S (COUNT,LBX)=0
"RTN","LBRYLST",39,0)
 F  S LBX=$O(^LBRY(681,"AC",LBRYLOC,LBX)) Q:LBX=""  S:LBX=+LBX COUNT=COUNT+1
"RTN","LBRYLST",40,0)
 G:COUNT=0 COPY1 S CNT=$P(^LBRY(680,LBRYLOC,7),U) G:COUNT'<CNT START
"RTN","LBRYLST",41,0)
 S GOOD=$O(^LBRY(681,"AC",LBRYLOC,0))
"RTN","LBRYLST",42,0)
 I GOOD=1 S DA=$O(^LBRY(681,"AC",LBRYLOC,GOOD,0)) G REPL
"RTN","LBRYLST",43,0)
COPY1 L ^LBRY(681,0) S LBRYNUM=$P(^LBRY(681,0),U,3)
"RTN","LBRYLST",44,0)
 F  S LBRYNUM=LBRYNUM+1 Q:'$D(^LBRY(681,LBRYNUM,0))
"RTN","LBRYLST",45,0)
 W !!,"Entering Copy 1 information."
"RTN","LBRYLST",46,0)
 K DO S DIC="^LBRY(681,",DIC(0)="LZ",X=LBRYNUM D FILE^DICN
"RTN","LBRYLST",47,0)
 K DR S DIE=DIC,DA=+Y,DIE("NO^")=1,DR=$S(LBRYPTR&($P($G(^LBRY(680.6,LBRYPTR,0)),U,10)):"[LBRY D3]",1:"[LBRY D1]") D LOCK^LBRYEDR
"RTN","LBRYLST",48,0)
 Q:LBRYL=0  D ^DIE
"RTN","LBRYLST",49,0)
 K DIE("NO^") L  G:($D(Y)!($D(DTOUT))) EXIT1
"RTN","LBRYLST",50,0)
REPL S CNT=$P($G(^LBRY(680,LBRYLOC,7)),U) G:CNT=1 EDIT
"RTN","LBRYLST",51,0)
 W !!,"Now cop",$S(CNT=2:"y 2",1:"ies 2 through "_CNT)," will be created the same as copy 1."
"RTN","LBRYLST",52,0)
 L ^LBRY(681,0) S LBRYNUM=$P(^LBRY(681,0),U,3),%X="^LBRY(681,DA,",%Y="X(" D %XY^%RCR
"RTN","LBRYLST",53,0)
 K COPYNO S LCOPY=0
"RTN","LBRYLST",54,0)
 F  S LCOPY=$O(^LBRY(681,"AC",LBRYLOC,LCOPY)) Q:LCOPY=""  S:LCOPY=+LCOPY COPYNO(LCOPY)=""
"RTN","LBRYLST",55,0)
 S DIK="^LBRY(681," F I=2:1:CNT S $P(X(1),U,1)=I D:'$D(COPYNO(I)) NEXT
"RTN","LBRYLST",56,0)
 K %,%H,%I,A,CNT,COUNT,D,D0,DA,DC,DE,DIC,DIE,DIFLD,DIP,Y,LBRYL
"RTN","LBRYLST",57,0)
 K X1,Y
"RTN","LBRYLST",58,0)
QUERY L  W ! I LBRYNEW'=1 G START
"RTN","LBRYLST",59,0)
EDIT W !!,"Do you want to EDIT any copy now" S %=2 D YN^DICN
"RTN","LBRYLST",60,0)
 G START:%<0,START:%=2
"RTN","LBRYLST",61,0)
 I %=0 W !!,"Answering YES will allow you to modify any or all copies now." G EDIT
"RTN","LBRYLST",62,0)
 S:'$D(E0) E0=1 D CON^LBRYCSE G CONT^LBRYCSE
"RTN","LBRYLST",63,0)
NEXT F  S LBRYNUM=LBRYNUM+1 Q:'$D(^LBRY(681,LBRYNUM,0))  S QUIT=$O(^LBRY(681,"AC",LBRYLOC,0)) Q:QUIT=LBRYNUM
"RTN","LBRYLST",64,0)
 S $P(X(0),U,1)=LBRYNUM,DA=LBRYNUM
"RTN","LBRYLST",65,0)
 S %X="X(",%Y="^LBRY(681,"_LBRYNUM_"," D %XY^%RCR
"RTN","LBRYLST",66,0)
 S $P(^LBRY(681,0),U,3)=LBRYNUM,$P(^(0),U,4)=$P(^(0),U,4)+1 D IX^DIK
"RTN","LBRYLST",67,0)
 W "."
"RTN","LBRYLST",68,0)
 Q
"RTN","LBRYLST",69,0)
KILL ;KILL FILE#680 RECORD IF # OF COPIES NOT SPECIFIED
"RTN","LBRYLST",70,0)
 S DIK=DIE D ^DIK Q
"RTN","LBRYLST",71,0)
EXIT K DIC("NO^") G QUERY
"RTN","LBRYLST",72,0)
EXIT1 K %,%X,%Y,J,Y,Z,YDT,DIC,INACT,LBRYNEW,LBRYL,COUNT,DIE,DIK,DR,LBRYNUM
"RTN","LBRYLST",73,0)
 K I,X,LBX,GOOD,CNT,LCOPY,COPYNO,E0,QUIT,LBRYLOC
"RTN","LBRYLST",74,0)
 Q
"RTN","LBRYPRCS")
0^7^B10586120
"RTN","LBRYPRCS",1,0)
LBRYPRCS ;SSI/ALA-PROCESS LIBRARY TRANSACTIONS ;[ 02/07/01  1:04 PM ]
"RTN","LBRYPRCS",2,0)
 ;;2.5;Library;**2,8,9**;Mar 11, 1996
"RTN","LBRYPRCS",3,0)
 ;  This is to automatically process the library transactions
"RTN","LBRYPRCS",4,0)
 ;  received from FORUM
"RTN","LBRYPRCS",5,0)
 S TRN=""
"RTN","LBRYPRCS",6,0)
TR S TRN=$O(^LBRY(682.1,"AC","R",TRN)) G EXIT:TRN=""
"RTN","LBRYPRCS",7,0)
 S TYP=$P(^LBRY(682.1,TRN,0),U,2)
"RTN","LBRYPRCS",8,0)
 F I=1:1:4 S LDATA(I)=$G(^LBRY(682.1,TRN,I))
"RTN","LBRYPRCS",9,0)
 S TAF=$P(LDATA(1),U,2),LDA=$P(LDATA(1),U,3)
"RTN","LBRYPRCS",10,0)
 I TYP="DLT" S:$D(^LBRY(680.5,TAF,0)) $P(^(0),U,2)=2 G TR1
"RTN","LBRYPRCS",11,0)
 I TYP="PPR"!(TYP="CPR") D PP^LBRYPRC1 G TR1
"RTN","LBRYPRCS",12,0)
 I TYP="FRR"!(TYP="CFR") D FR^LBRYPRC1 G TR1
"RTN","LBRYPRCS",13,0)
 I TYP="PUR" D PU^LBRYPRC1 G TR1
"RTN","LBRYPRCS",14,0)
 I TYP="ISR" D IN^LBRYPRC1 G TR1
"RTN","LBRYPRCS",15,0)
 S QFL=0 S:$G(BFL)="" BFL=0 D TI I QFL G TR
"RTN","LBRYPRCS",16,0)
TR1 S DIC="^LBRY(682.1,",DIE=DIC,DA=TRN,DR="2///^S X=""P""" D ^DIE
"RTN","LBRYPRCS",17,0)
 K CHD,FX,TX,ND1,PC1,ND2,PC2,FR,TO,PF,PT,PO,GLB,IN,INP,DR,DIE,DIC,DA
"RTN","LBRYPRCS",18,0)
 K D,D0,X,LBRYCLS,LDATA,LDA,TAF,TYP,QFL,FLG
"RTN","LBRYPRCS",19,0)
 G TR
"RTN","LBRYPRCS",20,0)
TI ;  Update a title from a transaction
"RTN","LBRYPRCS",21,0)
 Q:TAF=""  I LDA'="",$G(^LBRY(680.5,LDA,0))="" Q
"RTN","LBRYPRCS",22,0)
 S TIT=$P(LDATA(1),U)
"RTN","LBRYPRCS",23,0)
 I $D(^LBRY(680.5,TAF,0)),TIT'[$P(^LBRY(680.5,TAF,0),U) D  S QFL=1 Q
"RTN","LBRYPRCS",24,0)
 . S DIC="^LBRY(682.1,",DIE=DIC,DA=TRN,DR="2///^S X=""M""" D ^DIE
"RTN","LBRYPRCS",25,0)
 . I BFL=0 S XMB="LBRYMANL",XMY("G.LBRYUPDT")="",XMDUZ="FORUM LIBRARIANS" D ^XMB K XMY,XMDUZ,XMG S BFL=1
"RTN","LBRYPRCS",26,0)
 I LDA'="" S DA=LDA D ^LBRYX51
"RTN","LBRYPRCS",27,0)
 S LBRYCLS=TAF,$P(^LBRY(680.5,LBRYCLS,0),U)=$P(LDATA(1),U)
"RTN","LBRYPRCS",28,0)
 S FLG=$S(LDA'="":$P(^LBRY(680.5,LDA,0),U,2),TAF'="":$P(^LBRY(680.5,TAF,0),U,2),1:"")
"RTN","LBRYPRCS",29,0)
 ;  Move the data from the transaction into the Title Authority File
"RTN","LBRYPRCS",30,0)
 S TX="0;5^0;6^3;5^3;8^3;1^3;3^3;4",FX="1;4^2;1^2;2^3;1^3;3^4;2^4;3"
"RTN","LBRYPRCS",31,0)
 F I=1:1:7 S FR=$P(FX,U,I),TO=$P(TX,U,I) D
"RTN","LBRYPRCS",32,0)
 . S ND1=$P(FR,";"),PC1=$P(FR,";",2),ND2=$P(TO,";"),PC2=$P(TO,";",2)
"RTN","LBRYPRCS",33,0)
 . S $P(^LBRY(680.5,LBRYCLS,ND2),U,PC2)=$P($G(^LBRY(682.1,TRN,ND1)),U,PC1)
"RTN","LBRYPRCS",34,0)
 S PF="2;3-680.5^3;2-680.5^4;1-680.1^4;4-680.2^4;5-680.9",PT="3;6^3;7^3;2^0;4^0;3"
"RTN","LBRYPRCS",35,0)
 F I=1:1:5 S FR=$P(PF,U,I),TO=$P(PT,U,I) D
"RTN","LBRYPRCS",36,0)
 . S PO=$P(FR,"-"),GLB=$P(FR,"-",2)
"RTN","LBRYPRCS",37,0)
 . S ND1=$P(PO,";"),PC1=$P(PO,";",2),ND2=$P(TO,";"),PC2=$P(TO,";",2)
"RTN","LBRYPRCS",38,0)
 . S CH=$P($G(^LBRY(682.1,TRN,ND1)),U,PC1),CHD=CH
"RTN","LBRYPRCS",39,0)
 . I CH'="" S J="" F  S J=$O(^LBRY(GLB,"B",$E(CH,1,30),J)) Q:J'>0  S:$P($G(^LBRY(GLB,J,0)),U)=CH CHD=J
"RTN","LBRYPRCS",40,0)
 . S $P(^LBRY(680.5,LBRYCLS,ND2),U,PC2)=CHD
"RTN","LBRYPRCS",41,0)
 I $D(^LBRY(682.1,TRN,6)) S IN=0 F  S IN=$O(^LBRY(682.1,TRN,6,IN)) Q:IN'>0  D
"RTN","LBRYPRCS",42,0)
 . S INP=^LBRY(682.1,TRN,6,IN,0)
"RTN","LBRYPRCS",43,0)
 . S ^LBRY(680.5,LBRYCLS,1,IN,0)=$S($D(^LBRY(680.8,"B",INP)):$O(^LBRY(680.8,"B",INP,"")),1:INP)
"RTN","LBRYPRCS",44,0)
 . S ^LBRY(680.5,LBRYCLS,1,0)="^680.53PA^"_IN_U_IN
"RTN","LBRYPRCS",45,0)
CK I TYP="TIR",('$D(^LBRY(682.1,TRN,7))) D
"RTN","LBRYPRCS",46,0)
 . S DA=LBRYCLS,DIE="^LBRY(680.5,",DR="4///@"
"RTN","LBRYPRCS",47,0)
 . D ^DIE
"RTN","LBRYPRCS",48,0)
 I $D(^LBRY(682.1,TRN,7)) S IN=0 F  S IN=$O(^LBRY(682.1,TRN,7,IN)) Q:IN'>0  D
"RTN","LBRYPRCS",49,0)
 . S ^LBRY(680.5,LBRYCLS,2,IN,0)=^LBRY(682.1,TRN,7,IN,0)
"RTN","LBRYPRCS",50,0)
 . S ^LBRY(680.5,LBRYCLS,2,0)="^680.54^"_IN_U_IN_U_DT
"RTN","LBRYPRCS",51,0)
 S $P(^LBRY(680.5,LBRYCLS,0),U,5)="N",$P(^(0),U,2)=FLG
"RTN","LBRYPRCS",52,0)
 I $F("CTI,TIC,LTR",TYP) S DA=LDA,DIK="^LBRY(680.5," D ^DIK
"RTN","LBRYPRCS",53,0)
 S DA=LBRYCLS D ^LBRYX53
"RTN","LBRYPRCS",54,0)
 I LDA'="" S LBRTDA="" D
"RTN","LBRYPRCS",55,0)
 . F  S LBRTDA=$O(^LBRY(680,"B",LDA,LBRTDA)) Q:LBRTDA=""  D
"RTN","LBRYPRCS",56,0)
 . . S DR=".01///^S X=TAF",DIC="^LBRY(680,",DIE=DIC,DA=LBRTDA D ^DIE
"RTN","LBRYPRCS",57,0)
 Q
"RTN","LBRYPRCS",58,0)
EXIT K CHD,FX,TX,ND1,PC1,ND2,PC2,FR,TO,PF,PT,PO,GLB,IN,INP,DR,DIE,DIC,DA
"RTN","LBRYPRCS",59,0)
 K D,D0,X,LBRYCLS,LDATA,LDA,TAF,TRN,QFL,FLG,BFL
"RTN","LBRYPRCS",60,0)
 S $P(^LBRY(680.5,0),U,3)=99000
"RTN","LBRYPRCS",61,0)
 Q
"RTN","LBRYRPT")
0^6^B25970199
"RTN","LBRYRPT",1,0)
LBRYRPT ;ISC2/DJM-LIBRARY TECHNICIAN REPORTS ;[ 05/23/97  12:13 PM ]
"RTN","LBRYRPT",2,0)
 ;;2.5;Library;**2,9**;Mar 11, 1996
"RTN","LBRYRPT",3,0)
MIL ;Missing Issues List Report
"RTN","LBRYRPT",4,0)
 S TEXT="Missing Issues List" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",5,0)
 S L=0,DIC="^LBRY(682,"
"RTN","LBRYRPT",6,0)
 S DIS(0)="I $P(^LBRY(682,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",7,0)
 S FLDS="[LBRY MISSING ISSUES LIST]",BY="[LBRY MISSING ISSUES LIST]"
"RTN","LBRYRPT",8,0)
 S %=0 I $D(LBRYPTR),$P($G(^LBRY(680.6,LBRYPTR,0)),U,10) D
"RTN","LBRYRPT",9,0)
 . W !,"List CoreFLS Vendors" S %=1 D YN^DICN
"RTN","LBRYRPT",10,0)
 S FLDS=$S(%=1:"[LBRY MISSING ISSUES LIST 2]",1:FLDS),BY=$S(%=1:"[LBRY MISSING ISSUES LIST 2]",1:BY)
"RTN","LBRYRPT",11,0)
 D EN1^DIP
"RTN","LBRYRPT",12,0)
 G EXIT
"RTN","LBRYRPT",13,0)
DFR ;Titles Due for Renewal Report
"RTN","LBRYRPT",14,0)
 S TEXT="Titles Due For Renewal" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",15,0)
 S L=0,DIC="^LBRY(681,"
"RTN","LBRYRPT",16,0)
 S DIS(0)="I $P($G(^LBRY(681,D0,1)),U,7)="""""
"RTN","LBRYRPT",17,0)
 S DIS(1)="I $P(^LBRY(681,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",18,0)
 S %=0 I $D(LBRYPTR),$P($G(^LBRY(680.6,LBRYPTR,0)),U,10) D
"RTN","LBRYRPT",19,0)
 . W "List CoreFLS vendors" S %=1 D YN^DICN
"RTN","LBRYRPT",20,0)
 S FLDS=$S(%=1:"[LBRY TITLES DUE RENEWAL 2]",1:"[LBRY TITLES DUE RENEWAL]"),BY="[LBRY TITLES DUE RENEWAL]"
"RTN","LBRYRPT",21,0)
 D EN1^DIP
"RTN","LBRYRPT",22,0)
 G EXIT
"RTN","LBRYRPT",23,0)
LST ;Total local holdings, alphabetical w/brief or full listings
"RTN","LBRYRPT",24,0)
 S TEXT="All Serials Titles" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",25,0)
LST0 W "Do you want DETAILED HOLDINGS listed" S %=1 D YN^DICN
"RTN","LBRYRPT",26,0)
 S FLDS=$S(%=1:"[LBRY TITLE ALPHABETICAL]",%=2:"[LBRY TITLE ALPHABETICAL BRIEF]",1:"") G:%=-1 EXIT G:%=0 LST1
"RTN","LBRYRPT",27,0)
 S DIS(0)="I $P(^LBRY(680,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",28,0)
 S L=0,DIC="^LBRY(680,",BY="[LBRY TITLE ALPHABETICAL]"
"RTN","LBRYRPT",29,0)
 D EN1^DIP
"RTN","LBRYRPT",30,0)
 G EXIT
"RTN","LBRYRPT",31,0)
LST1 W !!,"Yes will present a complete description of the title's holdings."
"RTN","LBRYRPT",32,0)
 W !,"No will present a brief description of the title's holdings.",!!
"RTN","LBRYRPT",33,0)
 G LST0
"RTN","LBRYRPT",34,0)
LTL ;Total local holdings printed by location w/brief or full holdings
"RTN","LBRYRPT",35,0)
 S TEXT="Local Titles by Location" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",36,0)
LTL0 W "Do you want DETAILED HOLDINGS listed" S %=1 D YN^DICN
"RTN","LBRYRPT",37,0)
 S FLDS=$S(%=1:"[LBRY TITLE LOCATION]",%=2:"[LBRY TITLE LOCATION BRIEF]",1:"") G:%=-1 EXIT G:%=0 LTL1
"RTN","LBRYRPT",38,0)
 S DIS(0)="I $P(^LBRY(680,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",39,0)
 S L=0,DIC="^LBRY(680,",BY="[LBRY TITLE LOCATION]"
"RTN","LBRYRPT",40,0)
 D EN1^DIP
"RTN","LBRYRPT",41,0)
 G EXIT
"RTN","LBRYRPT",42,0)
LTL1 W !!,"Yes will present a complete description of the title's holdings."
"RTN","LBRYRPT",43,0)
 W !,"No will present a brief description of the title's holdings.",!!
"RTN","LBRYRPT",44,0)
 G LTL0
"RTN","LBRYRPT",45,0)
LTV ;Current subscriptions by vendor
"RTN","LBRYRPT",46,0)
 S TEXT="Active Titles by Vendor" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",47,0)
 S L=0,DIC="^LBRY(681,"
"RTN","LBRYRPT",48,0)
 S DIS(0)="I $P(^LBRY(681,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",49,0)
 S %=0 I $D(LBRYPTR),$P($G(^LBRY(680.6,LBRYPTR,0)),U,10) D
"RTN","LBRYRPT",50,0)
 . W "Sort using CoreFLS Vendors" S %=1 D YN^DICN
"RTN","LBRYRPT",51,0)
 S FLDS="[LBRY SUBSCRIPTION/VENDOR]",BY=$S(%=1:"[LBRY SUBSCRIPTION/VENDOR 2]",1:"[LBRY SUBSCRIPTION/VENDOR]")
"RTN","LBRYRPT",52,0)
 D EN1^DIP
"RTN","LBRYRPT",53,0)
 G EXIT
"RTN","LBRYRPT",54,0)
LGL ;Local Titles with Gaps Lists
"RTN","LBRYRPT",55,0)
 S TEXT="Gaps Lists" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",56,0)
 S L=0,DIC="^LBRY(680,"
"RTN","LBRYRPT",57,0)
 S DIS(0)="I $P(^LBRY(680,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",58,0)
 S FLDS="[LBRY GAPS LIST]",BY="[LBRY GAPS LIST]"
"RTN","LBRYRPT",59,0)
 D EN1^DIP
"RTN","LBRYRPT",60,0)
 G EXIT
"RTN","LBRYRPT",61,0)
LMT ;Local Microfilm Titles
"RTN","LBRYRPT",62,0)
 S TEXT="Local Microfilm Titles" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",63,0)
LMT0 W "Do you want microfilm holdings by titles" S %=1 D YN^DICN
"RTN","LBRYRPT",64,0)
 S FLDS=$S(%=1:"[LBRY MICROFILM HOLDINGS]",%=2:"[LBRY MICROFILM VENDOR]",1:"") G:%=-1 EXIT G:%=0 LMT1
"RTN","LBRYRPT",65,0)
 S DIS(0)="I $P(^LBRY(680,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",66,0)
 S L=0,DIC="^LBRY(680,",BY=$S(%=1:"[LBRY MICROFILM HOLDINGS]",1:"[LBRY MICROFILM VENDOR]")
"RTN","LBRYRPT",67,0)
 I $D(LBRYPTR),$P($G(^LBRY(680.6,LBRYPTR,0)),U,10) D
"RTN","LBRYRPT",68,0)
 . W !,"List CoreFLS Vendors" S %=1 D YN^DICN
"RTN","LBRYRPT",69,0)
 I %=1 S:FLDS["HOLDINGS" FLDS="[LBRY MICROFILM HOLDINGS 2]" S:BY["VENDOR" BY="[LBRY MICROFILM VENDOR 2]"
"RTN","LBRYRPT",70,0)
 D EN1^DIP
"RTN","LBRYRPT",71,0)
 G EXIT
"RTN","LBRYRPT",72,0)
LMT1 W !!,"'Yes' will list microfilm holdings by title."
"RTN","LBRYRPT",73,0)
 W !,"'No' will list microfilm holdings by vendor.",!!
"RTN","LBRYRPT",74,0)
 G LMT0
"RTN","LBRYRPT",75,0)
REC ;List of Recipients by title or recipient
"RTN","LBRYRPT",76,0)
 S TEXT="List of Recipients" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",77,0)
REC0 W "Do you want a list of recipients arranged by titles" S %=1 D YN^DICN
"RTN","LBRYRPT",78,0)
 S FLDS=$S(%=1:"[LBRY RECIPIENTS BY TITLE]",%=2:"[LBRY RECIPIENTS WITH TITLES]",1:"") G:%=-1 EXIT G:%=0 REC1
"RTN","LBRYRPT",79,0)
 S DIS(0)="I $P(^LBRY(681,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",80,0)
 S DIS(1)="I $P(^LBRY(680,$P(^LBRY(681,D0,0),U,2),0),U,2)="""""
"RTN","LBRYRPT",81,0)
 S L=0,DIC="^LBRY(681,",BY=$S(%=1:"[LBRY RECIPIENTS BY TITLE]",1:"[LBRY RECIPIENTS WITH TITLES]")
"RTN","LBRYRPT",82,0)
 D EN1^DIP
"RTN","LBRYRPT",83,0)
 G EXIT
"RTN","LBRYRPT",84,0)
REC1 W !!,"'Yes' will present a listing of all the recipients of any title or ToC."
"RTN","LBRYRPT",85,0)
 W !,"'No' will list for each recipient all the titles or ToCs received.",!!
"RTN","LBRYRPT",86,0)
 G REC0
"RTN","LBRYRPT",87,0)
ORR ;All Outstanding Routed-To-Return Issues Listed
"RTN","LBRYRPT",88,0)
 S TEXT="Outstanding R-T-R Issues" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",89,0)
 S L=0,DIC="^LBRY(682,"
"RTN","LBRYRPT",90,0)
 S DIS(0)="I $P(^LBRY(682,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",91,0)
 S FLDS="[LBRY ROUTE-TO-RETURN]",BY="[LBRY ROUTE-TO-RETURN]"
"RTN","LBRYRPT",92,0)
 D EN1^DIP
"RTN","LBRYRPT",93,0)
 G EXIT
"RTN","LBRYRPT",94,0)
FYI ;Listing of all titles with For-Your-Information
"RTN","LBRYRPT",95,0)
 S TEXT="F-Y-I Local Titles List" D HEAD G EXIT:$G(DUOUT)=1
"RTN","LBRYRPT",96,0)
 S L=0,DIC="^LBRY(680,"
"RTN","LBRYRPT",97,0)
 S DIS(0)="I $P(^LBRY(680,D0,0),U,4)=LBRYPTR"
"RTN","LBRYRPT",98,0)
 S DIS(1)="I $P(^LBRY(680,D0,0),U,2)'="""""
"RTN","LBRYRPT",99,0)
 S DIS(2)="I $P($G(^LBRY(680,D0,1)),U,5)'="""""
"RTN","LBRYRPT",100,0)
 S FLDS="[LBRY FYI LIST]",BY=.01
"RTN","LBRYRPT",101,0)
 D EN1^DIP
"RTN","LBRYRPT",102,0)
 G EXIT
"RTN","LBRYRPT",103,0)
HEAD I $G(LBRYPTR)="" S DUOUT=1 Q
"RTN","LBRYRPT",104,0)
 W @IOF,"Serials "_TEXT_" for "_LBRYNAM_"   "
"RTN","LBRYRPT",105,0)
 S Y=DT X ^DD("DD") W Y,!!
"RTN","LBRYRPT",106,0)
 Q
"RTN","LBRYRPT",107,0)
EXIT I IOT="TRM" R !!,"Press return to continue: ",LBRYC:DTIME
"RTN","LBRYRPT",108,0)
 K L,DIC,FLDS,BY,TEXT,%,Y,LBRYC,DUOUT,DIS,IOT
"RTN","LBRYRPT",109,0)
 Q
"RTN","LBRYSITE")
0^2^B4466209
"RTN","LBRYSITE",1,0)
LBRYSITE ;ISC2/DJM-LIBRARY SITE PARAMETERS EDIT ;[ 05/23/97  12:13 PM ]
"RTN","LBRYSITE",2,0)
 ;;2.5;Library;**2,9**;Mar 11, 1996
"RTN","LBRYSITE",3,0)
 I '$D(IOP) S IOP=$I D ^%ZIS K IOP Q:POP>0
"RTN","LBRYSITE",4,0)
 I '$D(DT) D NOW^%DTC S DT=X
"RTN","LBRYSITE",5,0)
 S LBCK=$G(^DIC(49,0,"GL")) G:LBCK="" FILE I $P(@(LBCK_"0)"),"^",4)'>0 G FILE
"RTN","LBRYSITE",6,0)
 S LBCK=$G(^DIC(440,0,"GL")) G:LBCK="" FILE I $P(@(LBCK_"0)"),"^",4)'>0 G FILE
"RTN","LBRYSITE",7,0)
EN1 S DTOUTZ=0 D START G:Y<0 EXIT S DIE=DIC,DR="[LBRY SITE2]",DIE("NO^")="OUTOK" K HFLAG
"RTN","LBRYSITE",8,0)
 D LOCK^LBRYEDR G:LBRYL=0 EXIT D ^DIE L
"RTN","LBRYSITE",9,0)
 G:'$D(DA) EN1 G:$D(Y) EN1 D CHECK G:DTOUTZ=1 EXIT G EN1
"RTN","LBRYSITE",10,0)
START W @IOF,?5,"VA Library Site Parameters Edit" S Y=DT X ^DD("DD") S YDT=Y
"RTN","LBRYSITE",11,0)
 W ?60,Y,!
"RTN","LBRYSITE",12,0)
 S DIC="^LBRY(680.6,",DIC(0)="AELQZ" D ^DIC Q:Y<0  S DA=+Y
"RTN","LBRYSITE",13,0)
 S ZZY(0)=Y(0) W @IOF,?5,"VA Library Site Parameters Edit",?60,YDT,!!
"RTN","LBRYSITE",14,0)
 Q
"RTN","LBRYSITE",15,0)
CHECK S CHECK=$G(^LBRY(680.6,DA,0))
"RTN","LBRYSITE",16,0)
 I $P(CHECK,U,5)="Y",$P(CHECK,U,3)="" S $P(^LBRY(680.6,DA,0),U,5)="N",HFLAG=1 W !!,"AUTOMATIC QUEUING not allowed without entering ROUTING SLIP PRINTER."
"RTN","LBRYSITE",17,0)
 I $P(CHECK,U,6)="Y",$P(CHECK,U,7)="" S $P(^LBRY(680.6,DA,0),U,6)="N",HFLAG=1 W !!,"Since no Division Site Name was entered MULTI-DIVISION SITE is reset to NO."
"RTN","LBRYSITE",18,0)
 I '$D(HFLAG)#2 Q
"RTN","LBRYSITE",19,0)
 W ! S XZ="CONTINUE// " D PAUSE^LBRYCK0 K XZ Q
"RTN","LBRYSITE",20,0)
EXIT K DTOUTZ,LBRYL,Y,DIC,DLAYGO,DTOUT,DIE,DR,YDT,ZZY,CHECK,HFLAG Q
"RTN","LBRYSITE",21,0)
FILE S XQH="LBRY FILE MISSING" D EN^XQH K XQH,LBCK Q
"VER")
8.0^22.0
"^DD",680,680,2.6,0)
MICROFILM COREFLS VENDOR^P392.31O^DGBT(392.31,^2;6^Q
"^DD",680,680,2.6,2)
S Y(0)=Y K LBRPREV S LBRPREV=$$PREV^DGBTCSL(.Y)
"^DD",680,680,2.6,2.1)
K LBRPREV S LBRPREV=$$PREV^DGBTCSL(.Y)
"^DD",680,680,2.6,21,0)
^.001^1^1^3021210^^
"^DD",680,680,2.6,21,1,0)
Enter the vendor from whom the microfilm was ordered.
"^DD",680,680,2.6,"DT")
3021210
"^DD",680.6,680.6,.09,0)
DEFAULT COREFLS VENDOR^P392.31'O^DGBT(392.31,^0;9^Q
"^DD",680.6,680.6,.09,2)
S Y(0)=Y K LBRPREV S LBRPREV=$$PREV^DGBTCSL(.Y)
"^DD",680.6,680.6,.09,2.1)
K LBRPREV S LBRPREV=$$PREV^DGBTCSL(.Y)
"^DD",680.6,680.6,.09,3)
Choose the vendor to be prompted in the disposition vendor entry.
"^DD",680.6,680.6,.09,21,0)
^.001^2^2^3021210^^^^
"^DD",680.6,680.6,.09,21,1,0)
This field points to the sites local vendor file containing 
"^DD",680.6,680.6,.09,21,2,0)
coreFLS vendors.
"^DD",680.6,680.6,.09,"DT")
3021210
"^DD",680.6,680.6,.1,0)
COREFLS ACTIVE^SX^1:YES;0:NO;^0;10^N LBRX S LBRX=X S X="CSLVQ" X ^%ZOSF("TEST") W:'$T "   ** COREFLS Package CSL V1.0 not installed. **" S:'$T X=0 S:$T X=LBRX Q
"^DD",680.6,680.6,.1,3)
Enter 'Yes' if using the coreFLS system for vendors.
"^DD",680.6,680.6,.1,21,0)
^.001^2^2^3021209^^
"^DD",680.6,680.6,.1,21,1,0)
This entry determines whether the Library package prompts for coreFLS
"^DD",680.6,680.6,.1,21,2,0)
vendor (ACTIVE - YES) or FMS vendor (ACTIVE - NO).
"^DD",680.6,680.6,.1,"DT")
3021210
"^DD",681,681,3.01,0)
COREFLS VENDOR^P392.31'O^DGBT(392.31,^3;1^Q
"^DD",681,681,3.01,2)
S Y(0)=Y K LBRPREV S LBRPREV=$$PREV^DGBTCSL(.Y)
"^DD",681,681,3.01,2.1)
K LBRPREV S LBRPREV=$$PREV^DGBTCSL(.Y)
"^DD",681,681,3.01,3)
Enter the vendor from whom the specific copy was ordered.
"^DD",681,681,3.01,"DT")
3021210
**END**
**END**

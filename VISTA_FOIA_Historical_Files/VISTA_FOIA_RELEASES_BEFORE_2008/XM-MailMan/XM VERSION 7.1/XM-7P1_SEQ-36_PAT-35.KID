Released XM*7.1*35 SEQ #36
Extracted from mail message
**KIDS**:XM*7.1*35^

**INSTALL NAME**
XM*7.1*35
"BLD",14,0)
XM*7.1*35^MAILMAN^0^2961029^n
"BLD",14,1,0)
^^39^39^2961029^^
"BLD",14,1,1,0)
 
"BLD",14,1,2,0)
 This MailMan patch contains the following bug fix:
"BLD",14,1,3,0)
 
"BLD",14,1,4,0)
-Prevents XUTESTUSER option from being able to complete a user's unsent
"BLD",14,1,5,0)
 message or response.  NOIS WWW-0796-51230
"BLD",14,1,6,0)
===========================================================================
"BLD",14,1,7,0)
 
"BLD",14,1,8,0)
 This patch should be installed after hours, when there is minimum users on
"BLD",14,1,9,0)
 the system.  You should put the XMUSER Option out of order.
"BLD",14,1,10,0)
===========================================================================
"BLD",14,1,11,0)
 
"BLD",14,1,12,0)
INSTALLATION:
"BLD",14,1,13,0)
  1.  This routine is usually mapped on systems that allow mapping,
"BLD",14,1,14,0)
      so you will need to disable mapping for the effected routine.
"BLD",14,1,15,0)
  2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
"BLD",14,1,16,0)
      option will load the KIDS package onto your system.
"BLD",14,1,17,0)
  3.  The patch has now been loaded into a Transport global on your
"BLD",14,1,18,0)
      system. You now need to use KIDS to install the Transport global.
"BLD",14,1,19,0)
  4.  On the KIDS menu, under the 'Installation' menu, use the following
"BLD",14,1,20,0)
      options:
"BLD",14,1,21,0)
         Verify Checksums in Transport Global
"BLD",14,1,22,0)
         Print Transport Global
"BLD",14,1,23,0)
         Compare Transport Global to Current System
"BLD",14,1,24,0)
         Backup a Transport Global
"BLD",14,1,25,0)
         Install Package(s)
"BLD",14,1,26,0)
  5.  MSM Sites - Answer YES to the question 'Want to MOVE routines to
"BLD",14,1,27,0)
      other CPUs?'. Enter the names of your Compute and Print server(s).
"BLD",14,1,28,0)
  6.  AXP Sites, after patch has installed, rebuild your map set.
"BLD",14,1,29,0)
============================================================================ 
"BLD",14,1,30,0)
  
"BLD",14,1,31,0)
 ROUTINES:
"BLD",14,1,32,0)
   The second line of the routine now looks like:
"BLD",14,1,33,0)
       ;;7.1;MailMan;**[patch list]**;Jun 02, 1994
"BLD",14,1,34,0)
 
"BLD",14,1,35,0)
               Before          After
"BLD",14,1,36,0)
 Name          Checksum        Checksum        Patch List
"BLD",14,1,37,0)
 ----------------------------------------------------------
"BLD",14,1,38,0)
 XM            4894935         4976038         17,35
"BLD",14,1,39,0)
============================================================================
"BLD",14,4,0)
^9.64PA^^
"BLD",14,"ABPKG")
n
"BLD",14,"KRN",0)
^9.67PA^19^12
"BLD",14,"KRN",.4,0)
.4
"BLD",14,"KRN",.401,0)
.401
"BLD",14,"KRN",.402,0)
.402
"BLD",14,"KRN",.403,0)
.403
"BLD",14,"KRN",.5,0)
.5
"BLD",14,"KRN",.84,0)
.84
"BLD",14,"KRN",3.6,0)
3.6
"BLD",14,"KRN",3.8,0)
3.8
"BLD",14,"KRN",9.2,0)
9.2
"BLD",14,"KRN",9.8,0)
9.8
"BLD",14,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",14,"KRN",9.8,"NM",1,0)
XM^^0^B9775499
"BLD",14,"KRN",9.8,"NM","B","XM",1)

"BLD",14,"KRN",19,0)
19
"BLD",14,"KRN",19.1,0)
19.1
"BLD",14,"KRN","B",.4,.4)

"BLD",14,"KRN","B",.401,.401)

"BLD",14,"KRN","B",.402,.402)

"BLD",14,"KRN","B",.403,.403)

"BLD",14,"KRN","B",.5,.5)

"BLD",14,"KRN","B",.84,.84)

"BLD",14,"KRN","B",3.6,3.6)

"BLD",14,"KRN","B",3.8,3.8)

"BLD",14,"KRN","B",9.2,9.2)

"BLD",14,"KRN","B",9.8,9.8)

"BLD",14,"KRN","B",19,19)

"BLD",14,"KRN","B",19.1,19.1)

"BLD",14,"QUES",0)
^9.62^^
"PKG",6,-1)
1^1
"PKG",6,0)
MAILMAN^XM^Electronic Mail, both local and networked
"PKG",6,22,0)
^9.49I^1^1
"PKG",6,22,1,0)
7.1^2940602^2950925
"PKG",6,22,1,"PAH",1,0)
35^2961029
"PKG",6,22,1,"PAH",1,1,0)
^^39^39^2961029
"PKG",6,22,1,"PAH",1,1,1,0)
 
"PKG",6,22,1,"PAH",1,1,2,0)
 This MailMan patch contains the following bug fix:
"PKG",6,22,1,"PAH",1,1,3,0)
 
"PKG",6,22,1,"PAH",1,1,4,0)
-Prevents XUTESTUSER option from being able to complete a user's unsent
"PKG",6,22,1,"PAH",1,1,5,0)
 message or response.  NOIS WWW-0796-51230
"PKG",6,22,1,"PAH",1,1,6,0)
===========================================================================
"PKG",6,22,1,"PAH",1,1,7,0)
 
"PKG",6,22,1,"PAH",1,1,8,0)
 This patch should be installed after hours, when there is minimum users on
"PKG",6,22,1,"PAH",1,1,9,0)
 the system.  You should put the XMUSER Option out of order.
"PKG",6,22,1,"PAH",1,1,10,0)
===========================================================================
"PKG",6,22,1,"PAH",1,1,11,0)
 
"PKG",6,22,1,"PAH",1,1,12,0)
INSTALLATION:
"PKG",6,22,1,"PAH",1,1,13,0)
  1.  This routine is usually mapped on systems that allow mapping,
"PKG",6,22,1,"PAH",1,1,14,0)
      so you will need to disable mapping for the effected routine.
"PKG",6,22,1,"PAH",1,1,15,0)
  2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
"PKG",6,22,1,"PAH",1,1,16,0)
      option will load the KIDS package onto your system.
"PKG",6,22,1,"PAH",1,1,17,0)
  3.  The patch has now been loaded into a Transport global on your
"PKG",6,22,1,"PAH",1,1,18,0)
      system. You now need to use KIDS to install the Transport global.
"PKG",6,22,1,"PAH",1,1,19,0)
  4.  On the KIDS menu, under the 'Installation' menu, use the following
"PKG",6,22,1,"PAH",1,1,20,0)
      options:
"PKG",6,22,1,"PAH",1,1,21,0)
         Verify Checksums in Transport Global
"PKG",6,22,1,"PAH",1,1,22,0)
         Print Transport Global
"PKG",6,22,1,"PAH",1,1,23,0)
         Compare Transport Global to Current System
"PKG",6,22,1,"PAH",1,1,24,0)
         Backup a Transport Global
"PKG",6,22,1,"PAH",1,1,25,0)
         Install Package(s)
"PKG",6,22,1,"PAH",1,1,26,0)
  5.  MSM Sites - Answer YES to the question 'Want to MOVE routines to
"PKG",6,22,1,"PAH",1,1,27,0)
      other CPUs?'. Enter the names of your Compute and Print server(s).
"PKG",6,22,1,"PAH",1,1,28,0)
  6.  AXP Sites, after patch has installed, rebuild your map set.
"PKG",6,22,1,"PAH",1,1,29,0)
============================================================================ 
"PKG",6,22,1,"PAH",1,1,30,0)
  
"PKG",6,22,1,"PAH",1,1,31,0)
 ROUTINES:
"PKG",6,22,1,"PAH",1,1,32,0)
   The second line of the routine now looks like:
"PKG",6,22,1,"PAH",1,1,33,0)
       ;;7.1;MailMan;**[patch list]**;Jun 02, 1994
"PKG",6,22,1,"PAH",1,1,34,0)
 
"PKG",6,22,1,"PAH",1,1,35,0)
               Before          After
"PKG",6,22,1,"PAH",1,1,36,0)
 Name          Checksum        Checksum        Patch List
"PKG",6,22,1,"PAH",1,1,37,0)
 ----------------------------------------------------------
"PKG",6,22,1,"PAH",1,1,38,0)
 XM            4894935         4976038         17,35
"PKG",6,22,1,"PAH",1,1,39,0)
============================================================================
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","XM")
0^1^B9775499
"RTN","XM",1,0)
XM ;(WASH ISC)/CAP/THM-MailMan Main Driver ;08/14/96  07:39
"RTN","XM",2,0)
 ;;7.1;MailMan;**17,35**;Jun 02, 1994
"RTN","XM",3,0)
 D KILL^XUSCLEAN I '$D(IOF) S IOP="HOME" D HOME^%ZIS
"RTN","XM",4,0)
 D EN Q:'$D(XMDUZ)  D EN^XMA01
"RTN","XM",5,0)
 G KILL
"RTN","XM",6,0)
EN ;Initialize
"RTN","XM",7,0)
 Q:$D(DUZ("SAV"))  ; Set by option XUTESTUSER
"RTN","XM",8,0)
 S XMGAPI1=$$EN^XMGAPI1(.DUZ,.Y)
"RTN","XM",9,0)
 G KILL:XMGAPI1["3-"
"RTN","XM",10,0)
 I XMGAPI1["2-" S %=1 D NO^XMAH0
"RTN","XM",11,0)
 I XMGAPI1["4-" G KILL:$D(DUZ("SAV")) D N1
"RTN","XM",12,0)
 D INTRO^XMA6:XMGAPI1["7-"
"RTN","XM",13,0)
 D PRIO:XMGAPI1["5-",C^XMAD1
"RTN","XM",14,0)
 I $D(Y)>9 W ! S Y=0 F  S Y=$O(Y(Y)) Q:'Y  W !,Y(Y)
"RTN","XM",15,0)
 K Y I '$D(IOF)!'$D(IOM)!'$D(IOSL) S IOP="" D ^%ZIS K IOP
"RTN","XM",16,0)
 K XMCHAN,XMOUT,ZTSK,%,%I,%H,XMCOPY
"RTN","XM",17,0)
 D LOCK Q:Y<0
"RTN","XM",18,0)
 I '$G(XMNOSEND),$D(^XMB(3.7,"AD",DUZ)) D REC^XMA22 Q
"RTN","XM",19,0)
 Q
"RTN","XM",20,0)
KL K DIC,%DT,XMK,XMA,XMZ Q
"RTN","XM",21,0)
NU(X) ;API for new message display
"RTN","XM",22,0)
 ;X=1 to force new display
"RTN","XM",23,0)
 ;X=0 for no display is no recent receipt
"RTN","XM",24,0)
 N XM S XM=X D XN Q Y
"RTN","XM",25,0)
CHK K ^TMP("XMY",$J),^TMP("XMY0",$J) Q:$G(XMDUZ)=.6  N XM S XM=0
"RTN","XM",26,0)
XN S XM(0)=$S($D(XMDUZ):XMDUZ,1:DUZ)
"RTN","XM",27,0)
 I $D(^XMB(3.7,XM(0),0)) S Y=+$P(^(0),U,6) I XM!Y S %=$S($D(^("N0",0)):^(0),1:0) I %'=0!XM K:'$D(DUZ("SAV")) ^(0) W "You have ",Y," new message",$S(Y=1:"",1:"s") I % D D W ".  (Last arrival: ",A,")"
"RTN","XM",28,0)
 Q:'$D(^XMB(3.7,XM(0),"N"))  D C Q
"RTN","XM",29,0)
C N Y I '$D(IORVON) N IORVON,IORVOFF,IOBON,IOBOFF D ZIS^XMAH1
"RTN","XM",30,0)
 W *7,!!,$S($D(IORVON):IORVON,1:""),"There is PRIORITY Mail for you !!!",!!,$S($D(IORVOFF):IORVOFF,1:"")
"RTN","XM",31,0)
 Q
"RTN","XM",32,0)
N1 S Y=XMDUZ
"RTN","XM",33,0)
NEW ;CREATE MAILBOX 4 NEW USER
"RTN","XM",34,0)
N L +^XMB(3.7,0):0 E  H 1 G N
"RTN","XM",35,0)
 S I=.5,Y=+Y,$P(^XMB(3.7,Y,0),U)=Y I $D(XMZ) S $P(^(0),U,7)=XMZ
"RTN","XM",36,0)
O I '$D(^XMB(3.7,Y,2,I,0)) S ^(0)=$P("WASTE^IN",U,I+1),^(1,0)="^3.702P"
"RTN","XM",37,0)
 I  S ^XMB(3.7,Y,2,"B",$P("WASTE^IN",U,I+1),I)=""
"RTN","XM",38,0)
 I  S K=$S($D(^XMB(3.7,Y,2,0)):^(0),1:"^3.701"),$P(K,U,3)=I,$P(K,U,4)=$P(K,U,4)+1,^(0)=K
"RTN","XM",39,0)
 I I=.5 S I=1 G O
"RTN","XM",40,0)
 S K=^XMB(3.7,0),^(0)=$P(K,U,1,2)_U_Y_U_($P(K,U,4)+1),^("B",Y,Y)=""
"RTN","XM",41,0)
 L -^XMB(3.7,0) Q
"RTN","XM",42,0)
 ;
"RTN","XM",43,0)
CHECK G CHECK^XM0
"RTN","XM",44,0)
CHDOM G CHDOM^XM0
"RTN","XM",45,0)
E W "SORRY !  You are not identified (NO DUZ)."
"RTN","XM",46,0)
KILL ;EXIT execute for MailMan options
"RTN","XM",47,0)
 K XMBCK,XMDISPI,XMDUNO,XMDUN,XMDUZ,XMPRIV D ^XMAK
"RTN","XM",48,0)
UNLOCK I $G(XMMENU(0))="XMUSER" L -^XMB(3.7,"AD",DUZ)
"RTN","XM",49,0)
 Q
"RTN","XM",50,0)
LOCK S Y=1 Q:$G(XMMENU(0))'="XMUSER"
"RTN","XM",51,0)
 L +^XMB(3.7,"AD",DUZ):0 E  D MULTI^XM0 S Y=-1
"RTN","XM",52,0)
 Q
"RTN","XM",53,0)
D N Y S Y=%,A=$E(Y,6,7)_" "_$P("Jan^Feb^Mar^Apr^May^Jun^Jul^Aug^Sep^Oct^Nov^Dec",U,$E(Y,4,5))_" "_$E(Y,2,3)
"RTN","XM",54,0)
 I Y\1'=Y S Y=$P(Y,".",2)_"0000",A=A_" "_$E(Y,1,2)_":"_$E(Y,3,4)
"RTN","XM",55,0)
 Q
"RTN","XM",56,0)
DSP K % S Y="X" ;SHOW HELP
"RTN","XM",57,0)
 ;'A'sk basket / 'S'how titles
"RTN","XM",58,0)
 I $D(^XMB(3.7,DUZ,0)) S %=^(0) S:$P(%,U,5)'["n" Y=Y_"A" S:$P(%,U,10) Y=Y_"T"
"RTN","XM",59,0)
 I $D(^XMB(1,1,0)),$P(^(0),U,5)="y" S Y=Y_"I" ;SHO INST
"RTN","XM",60,0)
 S %=$S($D(%):$P(%,U,9),1:""),X=$S($D(^XMB(1,1,0)):$P(^(0),U,15),1:""),XMDISPI=Y_U_$S($L(%):%,$L(X):X,1:"I")
"RTN","XM",61,0)
 Q
"RTN","XM",62,0)
BOX S DIC="^VA(200,",DIC(0)="AEQMZ" D ^DIC Q
"RTN","XM",63,0)
PRIO N XMCHAN D PRIO^XMAL0 Q
"VER")
8.0^21.0
**END**
**END**

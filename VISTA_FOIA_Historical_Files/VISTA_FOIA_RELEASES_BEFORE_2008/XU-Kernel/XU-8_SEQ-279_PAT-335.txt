$TXT Created by METCALF,ROGER at VAA-RAD.VA.GOV  (KIDS) on Thursday, 01/29/04 at 10:45
=============================================================================
Run Date: FEB 09, 2004                     Designation: XU*8*335
Package : XU - KERNEL                         Priority: EMERGENCY
Version : 8       SEQ #279                      Status: Released
                  Compliance Date: FEB 11, 2004
=============================================================================

Associated patches: (v)XU*8*217    <<= must be installed BEFORE `XU*8*335'
                    (v)XU*8*218    <<= must be installed BEFORE `XU*8*335'
                    (v)XU*8*262    <<= must be installed BEFORE `XU*8*335'
                    (v)XU*8*270    <<= must be installed BEFORE `XU*8*335'
                    (v)XU*8*294    <<= must be installed BEFORE `XU*8*335'

Subject: XUMF IMF Edit

Category: 
  - Routine
  - Data Dictionary
  - PATCH FOR A PATCH
  - Input Template

Description:
============

  THIS PATCH IS BEING RELEASED AS AN EMERGENCY PATCH.  A previous patch,
  XU*8*333 was released to the field but it had to be placed in entered
  in error status due to an infinite loop in post init.  Patch 335 replaces
  patch 333. Sites that have already installed patch 333 do not need to back 
  anything out, proceed with this installation.
 
  HealtheVet applications will soon be using Institution data supplied by
  HSDD Common Services: Standard Data Service (SDS).  SDS will extract
  data from the Institution Master File (IMF) on FORUM.  Once this
  data has been extracted and loaded into an SQL database Foreign
  Key Constraints will be applied and the Institution records
  will be permanent for the life of HealtheVet.  It is extremely
  important that we start with quality data.
   
  YOU MUST UPDATE ALL OF YOUR INSTITUTION DATA WITHIN 72 HOURS OF
  INSTALLING THIS PATCH.
   
  Use the provided Kernel menu options to list and update the applicable
  entries/fields that require updating.
   
  This patch allows sites to locally update their Institution data
  including NAME, FACILITY TYPE, VISN, PARENT FACILITY, OFFICIAL VA NAME,
  STATE, INACTIVE FACILITY FLAG, and address information.  These local 
  updates will automatically update the central Institution Master
  File (IMF) on FORUM.  The IMF update will in turn broadcast an HL7
  unsolicited update to all VistA instances.  This means local edits
  (sites will only be allowed to edit their own Institution data) will
  be published to every facility -- automatically updating your entries
  throughout the VHA.
   
  In addition to updating the fields listed above, the goal of the patch
  is to correctly identify parent/child facility relationships in the
  Institution file.  In order to do this, we need to separate medical center
  "divisions" from Health Care System (HCS) entries.  This means we need to
  add an entry for every HCS.  The patch adds these entries automatically.
   
  In the ASSOCIATION (#14) multiple, child facilities will then point
  to their administrative parent.  The parent, or primary facility, will then
  point to its parent (HCS or VISN).  The new HCS entries will point to
  a VISN entry.  All parent relationships eventually resolve to a VISN.
   
  A STATUS (#3) field will be added to the FACILITY TYPE (#4.1) file.
  National entries will be flagged.  An input transform will be added to
  the FACILITY TYPE (#13) field of the INSTITUTION (#4) file to prevent
  the selection of non-standard facility types from 'national' INSTITUTION
  (#4) file entries.
   
  Note: When updating the facility type of one of your facilities, if the 
  facility type you need is not selectable and should be, send a MailMan 
  message to the mail group XUMF INSTITUTION.  HSITES will review the request 
  and make any necessary updates to the master facility type file.  This 
  update will then be broadcast to all VistA instances.  The goal is 
  standardize both Institution and Facility Type data throughout the VHA.  
  Please do not by-pass the updating mechanism.  This will defeat our 
  standardization efforts, and will cause your site to become out-of-sync 
  with other medical centers.  Subsequent patches and/or MFS updates will
  over-ride these local modifications; this will invalidate the local
  measures and result in data synchronization issues between facilities and
  an endless cycle updating and cleanups.
   
  DATA DICTIONARY MODIFICATIONS
  =============================
   
  STATUS (#3) added to FACILITY TYPE (#4.1).
   
  INPUT TRANSFORM modified FACILITY TYPE (#13) field INSTITUTION (#4) file.
   
  OPTIONS
  =======
   
  XUMF IMF ADD EDIT          IMF edit
   
    This option allows the site to edit their INSTITUTION (#4) file
    entries (those entries that share the same 3 digit station number
    as the current users log on division) and generate an HL7 update
    message to update the Institution Master File (IMF) on FORUM.
 
  XUMF IMF EDIT STATUS       IMF Display Cleanup Status
   
    The IMF Display Cleanup Status, in [XUKERNEL] menu, will list all
    your facilities that need updating.  It will also list the fields
    that are missing data.  It's a good idea to list this information
    before editing your data.
   
  XUMF335 clean 4.1 and 4    Patch XU*8*335 clean 4.1 and 4
   
    This option queries the IMF for the latest copy of Institution data
    - updating the local INSTITUTION (#4) file.  All INACTIVE facilities
    will have the NAME (#.01) ZZ'd and the VISN and PARENT FACILITY
    associations removed.  It removes facility types before getting new
    values, so it should be run after hours.  This option should be run
    at a later date after all sites have completed editing.
   
  XUMF INSTITUTION           Institution File Query / Update
   
    This option has been disabled.
   
  XUMF LOAD INSTITUTION      Update/refresh Institution file with IMF data
   
    This option loads the current IMF data into the Institution file (#4).
   
  INPUT TEMPLATE
  ==============
   
  XUMF IMF EDIT
   
  HL LOGICAL LINK
  ===============
   
  XUMF TEST
  XUMF FORUM
   
  List of Test Sites
  ==================
  OKLAHOMA CITY VAMC
  BALTIMORE VAMC
  MIAMI VAMC
   
  Blood Bank Team Coordination
  ============================
  Clearance - 01/06/04
   
  Routine Summary
  ==============
  The following routines are included in this patch.  The second
  line of each of these routines now looks like:
   
       <tab>;;8.0;KERNEL;**[patch list]**;Jul 10, 1995
   
  Checksums
  =========
  Sites should use CHECK^XTSUMBLD to verify checksums. 
   
     Rtn Nm        Chksum Before     Chksum After    Patch List
     _______       ____________      ___________     __________
   
     XUMF          345909            8287955      **218,335**
     XUMF333       New               6263756      **335** 
     XUMFEIMF      2371912           3749473      **217,335**
     XUMFH         8281964           8390339      **206,209,217,218,262,335**
     XUMFI         9877239           9856871      **206,217,218,335**
     XUMFP4        9863009           9799120      **206,217,294,335**
     XUMFP4C       7557816           4576250      **206,209,217,270,294,335**
     XUMFR         New               2419619      **335**
   
   
  Installation Instructions
  =========================
   
  Before installing the patch, make a copy of the INSTITUTION (#4) file. 
   
    Use ^%GTO (DSM) (for Cache use %GOGEN) to save a copy of the
    INSTITUTION (#4) file for backup purposes.  Following is an example:
   
      VAH>D ^%GTO
   
      This routine saves globals to be restored by %GTI
   
      Output Device ?  > DIC4.GBL
   
      Header comment... INSTITUTION (#4) file backup
      global(s) ? > ^DIC(4,
      global(s) ? > ^DIC(4.1,
      global(s) ? > ^
   
      Global(s) Selected:
         ^DIC(4)
   
      Output started for ^DIC at 8:19:50 AM
   
      Global transfer finished at 8:19:51 AM
   
      VAH>
   
  1.  Users ARE allowed to be on the system during the installation.
   
  2.  The Installation will take less than 2 minutes.  The background job 
  will take about 10 minutes.
   
  3.  DSM/AXP sites: These routines are not usually mapped, so you will
  probably not have to disable mapping. 
   
  4.  Use the "INSTALL/CHECK MESSAGE" option on the PackMan menu. This loads 
 
  the patch into a Transport Global onto your system. 
      
  5.  You DO NOT need to stop TaskMan or the background filers.
   
  6.  On the KIDS menu, select the "Installation" menu and use the following 
  options to install the Transport Global: 
                         Verify Checksums in Transport Global
                         Print Transport Global 
                         Compare Transport Global to Current System
                         Backup a Transport Global
   
                         Install Package(s) 
                              INSTALL NAME: XU*8.0*335
                                            ==========
                               Want KIDS to Rebuild Menu Trees Upon 
 Completion of Install? YES// NO
                              ==                               
 
                               Want KIDS to INHIBIT LOGONs during the 
  install?  YES// NO
                  ==
                               Want to DISABLE Scheduled Options, Menu 
  and Protocols?  YES// NO
                        ==
   
  7. If you unmapped routines in step 3, remap them after installation has 
  completed.
   
   
  POST INSTALLATION
  =================
   
  Use the option [XUMF IMF EDIT STATUS] 'IMF Display Cleanup Status' to
  view and review required Institution updating.  It is recommended to work 
  together with your HAS ADPAC.
   
  Update your Institution data for your medical center, all associated
  divisions, and child facilities using the IMF edit [XUMF IMF ADD EDIT]
  option.
   
  Notes:
  
   The option [XUMF IMF ADD EDIT] is locked with key XUMF INSTITUTION.
   
   '^' jump out is disabled.  You must answer all required fields.
  
   HL7 must be running before using the option [XUMF IMF ADD EDIT].
   
     Check XUMF FORUM entry in HL LOGICAL LINK (#870) that the
     TCP/IP ADDRESS is 10.2.29.130.
   
     Check XUMF TEST entry in HL LOGICAL LINK (#870) that the
     TCP/IP ADDRESS is 10.4.229.76.
   
     Ping [HL PING] the XUMF FORUM link to make sure it is up.
  
   After editing your data.  Check that the XUMF FORUM link is up.
   Use 'Start/Stop Links' [HL START] if your updates are waiting in
   the queue.
   
  UPDATING GUIDELINES
  ===================
   
  General guidelines that should be used by Automated 
  Data Processing Application Coordinators (ADPACs)
  and/or Information Resource Management (IRM) personnel
  when updating the following key fields/information in
  the INSTITUTION file (#4):
   
  NAME Field (#.01)
  -----------------
   
  Must be 30 characters or less.
   
  Make it meaningful:
   
    City + [","State] + Facility Type
   
    (e.g., Albany, NY VAMC; Albany, GA CBOC).
   
    State is optional. It is used to uniquely
    identify facilities with like named cities.
   
  Don't start NAME with the Facility Type.
   
  Avoid using names that would only identify the
  site locally and not across the country (e.g.,
  GV Sonny Montgomery; WM S Middleton). These types 
  of names should be noted in the OFFICIAL VA NAME
  field (#100) instead.
   
  ENTER A NAME THAT MAKES THE MOST SENSE FOR YOUR
  FACILITY.  IF YOUR USERS ARE TRAINED TO IDENTIFY
  A FACILITY BY ITS HCS NAME THEN CONTINUE TO USE
  THAT SAME NAME.  THIS APPLIES TO ALL YOUR ENTIES.
  SDS WANTS TO KEEP SITE IMPACT TO A MINIMAL.  THE DATA
  BELONGS TO YOUR FACILITY.  OUR GOAL IS STANDARDIZE
  THE DATA VHA-WIDE WITH YOUR DATA.  THANK YOU.  (Roger)
   
  Make it unique:
   
    Avoid multiple entries with the same name (e.g.,
    rename Washington to Washington VAMC).
    
    The Standard Data Services (SDS) team (or other
    responsible entity) will edit non-VHA entries to
    ensure uniqueness with like-named entries.
   
  Inactive entries:
   
    If Institution/facility is inactive, then set the
    INACTIVE FACILITY FLAG field (#101).
   
    Inactive facility NAME should begin with "ZZ".
   
    If the facility you wish to inactivate/edit has a
    station number that does not begin with the same
    first three digits as your current "division" -
    the division your logged on to - then you must log
    in under the old station number "division" to be
    able to edit it or its children.
   
    To be able to log on to a division you must have
    a pointer in the DIVISION multiple of the NEW PERSON
    (#200) file.
   
    If your site has installed XU*8*287, then the person
    assigning the division must have the XUMGR security key
    to override the input transform to assign an inactive
    facility.
   
   
  FACILITY TYPE Field (#13)
  --------------------------
   
  Select the correct Facility Type.
   
  Medical Centers, Medical Centers and Regional Offices, and Regional 
  Offices-Outpatient Clinics should have one of the following Facility
  types:
   
       VAMC
       M&ROC
       RO-OC
   
  Child facilities (relative to a medical center) should have one of 
  the following Facility Types:
   
       CBOC         COMMUNITY BASED OUTPATIENT CLINIC
       CIVH         CIVILIAN HOSPITAL
       CMOP         CONSOLIDATED MAIL OUTPATIENT PHARMACY
       DOM          DOMICILIARY
       DENT         DENTAL CLINIC
       DOD          DEPARTMENT OF DEFENSE
       M&ROC        MEDICAL AND REGIONAL OFFFICE CENTER
       MORC         MOBILE OUTREACH CLINIC
       NHC          NURSING HOME CARE
       OPC          OUTPATIENT CLINIC
       ORC          OUTREACH CLINIC
       OTHER        OTHER
       PHARM        PHARMACY
       PHS          PUBLIC HEALTH SERVICE HOSPITAL
       PRRTP        PSYCHOLOGICAL RESIDENTIAL REHAB TREATMNT PRG
       SARRTP       SUBSTANCE ABUSE REHAB TREATMENT PROGRAM
       STDM         STATE DOMICILIARY
       STHH         STATE HH
       STNB         STATE NURSING BEDS
       SVH          STATE VETERANS HOME
       USAF         US AIR FORCE HOSPITAL
       USAH         US ARMY HOSPITAL
       USCG         US COAST GUARD HOSPITAL
       USMC         US MARINE CORP HOSPITAL
       USNH         US NAVAL HOSPITAL
       VAMC         VA MEDICAL CENTER
       VANPH        NEURAL PSYCHIATRIC HOSPITAL
   
   Note:  if you require a facility type not listed send a MaiMan message
   to the Mail Group XUMF INSTITUTION on FORUM.  DO NOT just take your own
   measures please.  We'll activate the required facility type using the
   Master File Server (MFS) mechanism.  That will keep all VistA instances
   standard.
   
   
  OFFICIAL VA NAME Field (#100)
  -----------------------------
   
  The full name of the facility (80 characters or less)
  (e.g., "VA Healthcare Network Upstate New York HCS-Buffalo Division"
   for 528 - Buffalo, NY VAMC).
   
  If no official name exists, or your not sure, enter the same value as
  the NAME (#.01).  We can update it later if necessary.
   
   
  INACTIVE FACILITY FLAG Field (#101)
  -----------------------------------
   
  If facility is inactive set this flag and
   - the NAME should begin with "ZZ".
   - the VISN and PARENT FACILITY associations should be NULL.
   
   
  STATE Field (#.02)
  ------------------
   
  State is required.
   
   
  VISN INFORMATION
  ----------------
   
  PARENT OF ASSOCIATION field [#1] of the ASSOCIATIONS multiple [#14].
  ASSOCIATIONS (#.01) type "VISN".
   
  - Inactive facilities should be NULL.
  - Only treating facilities should have a VISN.
  - All active treating facilities must have a VISN.
   
   
  PARENT FACILITY
  ---------------
   
  PARENT OF ASSOCIATION field [#1] of the ASSOCIATIONS multiple [#14].
  ASSOCIATIONS (#.01) type "PARENT FACILITY".
   
  Child facilities should point to the administrative parent - your
  CBOC, NHC, OPC, MORC, etc, points to its parent VAMC or "division".
   
    Note: if the child facility is a shared facility, then point to the
    appropriate HCS if applicable.  If the facility is a special case,
    such as a unnamed multi-divisional aggregate, then send a MailMan
    message to the mail group XUMF INSTITUTION on FORUM, and we'll figure
    out the best way to handle it.
   
  The "division" (VAMC) points to its immediate parent - one of the
  following:
   
          VA GREATER LOS ANGELES (691)
          VA HEARTLAND-EAST VISN15 (657)
          VA HEARTLAND-WEST VISN15 (589)
          VA CHICAGO HSC (537)
          CENTRAL PLAINS NETWORK (636)
          MONTANA HCS (436)
          VA PACIFIC ISLANDS HCS (459)
          NEW MEXICO HCS (501)
          AMARILLO HCS (504)
          MARYLAND HCS (512)
          WEST TEXAS HCS (519)
          BOSTON HCS (523)
          UPSTATE NEW YORK HCS (528)
          NORTH TEXAS HCS (549)
          EASTERN COLORADO HCS (554)
          NEW JERSEY HCS (561)
          BLACK HILLS HCS (568)
          CENTRAL CALIFORNIA HCS (570)
          N FLORIDA/S GEORGIA HCS (573)
          GREATER NEBRASKA HCS (597)
          CENTRAL ARKANSAS HCS (598)
          LONG BEACH HCS (600)
          CENTRAL ALABAMA HCS (619)
          HUDSON VALLEY HCS VAMC (620)
          TENNESSEE VALLEY HCS (626)
          PALO ALTO HCS (640)
          PITTSBURGH HCS (646)
          ROSEBURG HCS (653)
          SIERRA NEVADA HCS (654)
          SALT LAKE CITY HCS (660)
          PUGET SOUND HCS (663)
          SAN DIEGO HCS (664)
          SOUTH TEXAS HCS (671)
          CENTRAL TEXAS HCS (674)
          EASTERN KANSAS HCS (677)
          CONNECTICUT HCS (689)
          EL PASO VA HCS (756)
          NEW YORK HHS (630)
   
          VISN 1
          VISN 2
          VISN 3
          VISN 4
          VISN 5
          VISN 6
          VISN 7
          VISN 8
          VISN 9
          VISN 10
          VISN 11
          VISN 12
          VISN 13
          VISN 14
          VISN 15
          VISN 16
          VISN 17
          VISN 18
          VISN 19
          VISN 20
          VISN 21
          VISN 22
          VISN 23
   
   
  AGENCY INFORMATION
  ------------------
   
  If Facility Type is INDIAN HEALTH SERVICE (IHS), then AGENCY should 
  be INDIAN HEALTH SERVICE ("I").
   
  If Facility Type is USAH, then AGENCY should be "ARMY".
  If Facility Type is USAF, then AGENCY should be AIR FORCE ("AF").
  If Facility Type is USNH, then AGENCY should be NAVY ("N").
   note: historical consideration here
   
  If Facility Type is Department of Veterans Affairs (VA)-related, 
  then AGENCY should be VA ("V").
   
  Otherwise AGENCY should be Other ("O").
   
   
  ADDRESS INFORMATION
  -------------------
   
  Enter address information for both a mailing and physical address 
  for every facility associated with the primary facility, VAMC, HCS,
  and/or VISN for which you have responsibility:
   
  Mailing Address:
   
   ST. ADDR. 1 (MAILING) field (#4.01)
   ST. ADDR. 2 (MAILING) field (#4.02)  (optional)
   CITY (MAILING) field (#4.03)
   STATE (MAILING) field (#4.04),
   ZIP (MAILING) field (#4.05)
   
  Physical Address:
   
   STREET ADDR. 1 field (#1.01)
   STREET ADDR. 2 field (#1.02)  (optional)
   CITY field (#1.03)
   STATE field (#.02)
   ZIP field (#1.04)
   
  If any of this is unclear or you have specific issues or questions not 
  addressed, then send a MailMan message on FORUM to the mail group XUMF 
  INSTITUTION, log a NOIS, send me an exchange message or call me directly.
   
  Roger Metcalf
  (510) 768-6852
  (510) 986-0127

Routine Information:
====================

Routine Name:
  - XUMF


Routine Checksum:

Routine Name:
  - XUMF333


Routine Checksum:

Routine Name:
  - XUMFEIMF


Routine Checksum:

Routine Name:
  - XUMFH


Routine Checksum:

Routine Name:
  - XUMFP4


Routine Checksum:

Routine Name:
  - XUMFP4C


Routine Checksum:

Routine Name:
  - XUMFR


Routine Checksum:

Routine Name:
  - XUMFI


Routine Checksum:

=============================================================================
User Information:
Entered By  : METCALF,ROGER A               Date Entered  : JAN 15, 2004
Completed By: ALDERMAN,MATT S               Date Completed: FEB 09, 2004
Released By : TILLIS,LEWIS                  Date Released : FEB 09, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

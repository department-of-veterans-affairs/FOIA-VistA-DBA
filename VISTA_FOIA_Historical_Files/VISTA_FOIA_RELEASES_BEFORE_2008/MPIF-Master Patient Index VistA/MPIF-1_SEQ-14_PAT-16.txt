$TXT Created by CHESNEY,CHRISTINE M at VAB-RAD.ISC-SF.VA.GOV  (KIDS) on WEDNESDAY, 06/13/01 at 07:59
=============================================================================
Run Date: JUN 15, 2001                     Designation: MPIF*1*16
Package : MPIF - MASTER PATIENT INDEX VISTA Priority: EMERGENCY
Version : 1        SEQ #14                      Status: Released
=============================================================================

Associated patches: (v)MPIF*1*9    <<= must be installed BEFORE `MPIF*1*16'
                    (v)MPIF*1*12   <<= must be installed BEFORE `MPIF*1*16'
                    (v)MPIF*1*13   <<= must be installed BEFORE `MPIF*1*16'
                    (v)MPIF*1*14   <<= must be installed BEFORE `MPIF*1*16'

Subject: CMOR Not Updating

Category: 
  - Routine

Description: 
============

   NOTE:  MPIF and RG patches should NOT be installed on Legacy systems to
   avoid issues with the legacy systems ending up as CMORs, Treating
   Facilities or Subscribers.
  
   Issue 1:  While resolving exceptions, it was noted that the CMOR was not
   always getting updated when selecting a patient from a list of potential
   matches.  Upon review it was noted that the station name was being
   passed into the DIE call instead of station number (since name isn't
   unique for each station this can result in no update happening for this
   field). To prevent this from becoming a larger problem when the
   Institution file redesign patch (XU*8.0*126) is released which increases
   the number of duplicate names, this patch is being released as an
   emergency patch. MPIFAPI, MPIFQ0 and MPIFQ1 contain the changes to
   support this fix.
  
   Issue 2:  In order to know that an update to CMOR has not happened, a 
   lookup is being added to check to see if the CMOR has been updated.  If 
   it has not updated, the code will try to update up to 3 times (due to
   the way locks have been implemented in other packages).  If the update
   still fails, an exception will be logged to the MPIF Exceptions mail
   group so that it can be updated correctly.  MPIF001 contain the changes
   to support this fix.
  
   ISSUE 3:  Since Institution Name doesn't have to be unique, the 
   $$CHANGE^MPIF001(DFN,CMOR) API is being changed to only accept CMOR 
   as the IEN for the Institution file.  MPIF001 has been modified to
   support this change.
  
   ISSUE 4:  A null subscript error occurred when attempting to get the 
   MPI Logical Link in a development account when the account had a 
   corrupt cross-reference in the HL Logical Link file (#870).
   $$MPILINK^MPIFAPI has been modified to prevent the subscript error and
   return the appropriate error message.
  
  
   TEST SITES:
   ==========
   Battle Creek
   North Texas 
   
  
   Routine Summary:
   ================
   The following is a list of the routine(s) included in this patch.  The
   second line of each of these routine(s) will look like:
    
   <TAB>;;1.0; MASTER PATIENT INDEX VISTA ;**[Patch List]**;30 Apr 99
   CHECK^XTSUMBLD results:
    
   Routine       Before Patch       After Patch       Patch List
   --------      ------------       ------------      ----------
  
   MPIF001          8590159              8909247         1,3,9,16
   MPIFAPI          3747736              4856661         1,3,14,16
   MPIFQ0          18388788             18872236         1,3,8,14,13,16
   MPIFQ1           9436113              9436171         1,8,12,16
  
  
   INSTALLATION INSTRUCTIONS:
   ==========================
  
    This patch should be loaded during non-peak hours to minimize
    disruption to the users.   
  
    This patch will take less than 5 minutes to install.
   
    1.  Users are allowed on the system during patch installation.
        
    2.  TaskMan does not need to be stopped or placed in a wait state. 
   
    3.  These routines are not usually mapped, so you will probably not
        have to disable mapping. 
  
    4.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu. [Note:
        TEXT PRINT/DISPLAY option in the PackMan menu will display the
        patch text only.
  
    5.  From the Kernel Installation and Distribution System Menu, select
        the Installation menu.  
  
    6.  From this menu, you may elect to use the following options:
        a.  Backup a Transport Global - this option will create a backup
            message of any routines exported with the patch.  It will NOT
            backup any other changes such as DDs or templates.
        b.  Compare Transport Global to Current System  - this option will
            allow you to view all changes that will be made when the patch
            is installed.  It compares all components of the patch
            (routines, DDs, templates, etc.).
        c.  Verify Checksums in Transport Global - this option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
        d.  Print Transport Global - this option will allow you to view the
            components of the KIDS build.
  
    7.  Use the Install Package(s) option and select the package
        MPIF*1.0*16.
  
    8.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
        YES//', respond NO.
  
    9.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
        Protocols? YES//', respond Yes:
  
         [MPIF PAT INACT]          Inactivate Patient from MPI
         [MPIF IND MPI LOAD]       Single Patient Initialization to MPI
         [MPIF DISPLAY ONLY QUERY TO MPI]       Display Only Query
  
         [DGRPT 10-10T REGISTRATION]     10-10T Registration
         [DG REGISTER PATIENT]           Register a Patient
         [DG LOAD PATIENT DATA]           Load/Edit Patient Data
   
    10.  If you unmapped routines in step 3, remap them after installation
         has completed.

Routine Information:
====================

Routine Name:
  - MPIF001


Routine Checksum:

Routine Name:
  - MPIFAPI


Routine Checksum:

Routine Name:
  - MPIFQ0


Routine Checksum:

Routine Name:
  - MPIFQ1


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : CHESNEY,CHRISTINE M           Date Entered : MAY 16, 2001
Completed By: SINGH,GURBIR                  Date Completed: JUN 14, 2001
Released By : BURTS,WANDA                   Date Released : JUN 15, 2001
=============================================================================


Packman Mail Message:
=====================

$END TXT

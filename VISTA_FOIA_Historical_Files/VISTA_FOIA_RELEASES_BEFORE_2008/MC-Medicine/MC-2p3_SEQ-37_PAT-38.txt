$TXT Created by ACKERMAN,NIEN-CHIN at DEV.DEV.FO-HINES.MED.VA.GOV  (KIDS) on Tuesday, 10/14/03 at 11:04
=============================================================================
Run Date: OCT 15, 2003                     Designation: MC*2.3*38
Package : MC - MEDICINE                       Priority: Mandatory
Version : 2.3        SEQ #37                    Status: Released
                  Compliance Date: NOV 15, 2003
=============================================================================

Associated patches: (v)MC*2.3*37   <<= must be installed BEFORE `MC*2.3*38'

Subject: DUPLICATE FIELDS REMOVAL

Category: 
  - Data Dictionary

Description:
============

 This patch is issued to remove two fields.  It seems that there are four 
 fields in the Medicine files that are in conflict.  Two out of four fields 
 are using the same sub-file numbers.  This is shown in the following data 
 dictionary nodes:
 
 ^DD(691.8,.9,0)=HEART MEDICATION^691.803PA^^3;0  
 ^DD(691.8,23,0)=HEART MEDS^691.803P^^18;0 
 ^DD(700,29.5,0)=RECOMMENDATIONS^700.04PA^^11;0 
 ^DD(700,33.5,0)=FREE TEXT INTERPRETATION^700.04^^25;0 
 
 Field 23, HEART MEDS, in the ELECTROPHYSIOLOGY (EP) file (#691.8) and field 
 29.5, RECOMMENDATIONS, in the PULMONARY FUNCTION TEST file (#700) are 
 inactive fields that are not used in any Input and Print templates in 
 Medicine.  They are duplicate fields of field .9, HEART MEDICATION, and 
 field 33.5, FREE TEXT INTERPRETATION.  Only field .9 and 33.5 are used in 
 Medicine templates.  Fields 23 and 29.5 have to be deleted per DBA and HDR 
 request.  The data entered for the four fields are all stored on separate 
 global nodes but they shared the same sub-file numbers.
 
 There will be an Environment Check routine MCENV1 and a post-init
 routine MCPOST included in this patch.  MCENV1 and MCPOST will be
 deleted once the two fields are deleted.  The environment check routine
 will check for the existence of the fields before the patch is installed.
 The post-init routine will check the Medicine View file (#690.2) for the
 existence of the two fields.  Field #23 will be deleted from the
 Full EP entry, if it exists and field #29.5 will be deleted from the
 Full PFT entry, if it exists.  MCENV1 will check on whether there
 are any data for the two fields in the ELECTROPHYSIOLOGY (EP) file
 (#691.8) and PULMONARY FUNCTION TEST file (#700).  If there are no data, 
 the MCPOST will delete the two fields.  If there are data in any of the 
 two fields, both routines will display the records number and the total 
 number of records that have data in the fields.  If a site has populated 
 data in the two fields, the site needs to log a NOIS for the developers' 
 assistance in safely moving the data to the active fields.  Since the 
 duplicate fields share the same sub-file numbers with the active fields, 
 there might be some data corruption in the global nodes.
 
 If the site does have data in the two fields, the following
 shows what the site will see when the site loads the patch:
 
 
 Line 6    Message #87206     Unloading KIDS Distribution   MC*2.3*38
    MC*2.3*38
 
 Want to Continue with Load? YES// 
 Loading Distribution...
 
    MC*2.3*38
 Will first run the Environment Check Routine, MCENV1
 
 This Environment Check routine will check for existing data
 in field #23 Heart Med of the ELECTROPHYSIOLOGY (EP) file
 (#691.8) and field #29.5 in the PULMONARY FUNCTION TESTS
 file (#700).
 
 EP Records with Data in field #23:
 
 Record #:   1
 Record #:   3
 Record #:   4
 Record #:   7
 
 Total EP record with data:    4
 
 PFT Records with Data in field #29.5:
 
 Record #:   3
 Record #:   6
 Record #:   7
 Record #:   19
 Record #:   39
 Record #:   43
 
 Total PFT record with data:   6
 
 Please log a NOIS to have the data resolved before 
 installation.
 
 
  
 MC*2.3*38 Build will not be installed
                Jul 11, 2003@08:30:18
 
 
 
 NOTE: The build will not be installed but leave the transport global.  Once 
 the site has logged a NOIS and the data are moved to
 the active fields, the site will have to install this patch to remove the
 two fields.
 
 
 If the site does not have data in the two fields, the following shows what
 the site will see when the site installs the patch:
 
 Line 6    Message #87206     Unloading KIDS Distribution   MC*2.3*38
    MC*2.3*38
 
 Want to Continue with Load? YES// 
 Loading Distribution...
 
    MC*2.3*38
 
 Will first run the Environment Check Routine, MCENV1
 
 This Environment Check routine will check for existing data
 in field #23 Heart Med of the ELECTROPHYSIOLOGY (EP) file
 (#691.8) and field #29.5 in the PULMONARY FUNCTION TESTS
 file (#700).
  
 Install Questions for MC*2.3*38
 
 
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
 
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
 
 DEVICE: HOME//   TELNET
 
  
  Install Started for MC*2.3*38 : 
                Sep 30, 2003@08:31:50
  
 Build Distribution Date: Sep 29, 2003
  
  Installing Routines:
                Sep 30, 2003@08:31:50
 
  Running Post-Install Routine: ^MCPOST
 
 This Post Init routine will check for existing data
 in field #23 Heart Med of the ELECTROPHYSIOLOGY (EP) file
 (#691.8) and field #29.5 in the PULMONARY FUNCTION TESTS
 file (#700).  If there are no data, the data dictionary
 of the two fields will be deleted.
                                                         
 Field #23 HEART MEDS in the EP file (#691.8) is deleted.
  
 Field #29.5 RECOMMENDATIONS in the PFT file (#700) is deleted.
                                                               
  
  Updating Routine file...
  
  Updating KIDS files...
  
  MC*2.3*38 Installed. 
                Sep 30, 2003@08:31:50
  
  Not a production UCI
  
  NO Install Message sent 
 -------------------------------------------
 
 
 TEST SITES
 ==========
 Dublin
 Hines
 Memphis
 Washington
 Portland
 Puget Sound
                                                                 
                                                               
 ROUTINE SUMMARY
 ===============
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
      <tab>;;2.3;Medicine;**[patch list]**;09/13/1996
  
                             CHECK^XTSUMBLD results
                                                    
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  MCENV1               N/A                3435743              38
  MCPOST               N/A                4640464              38
  
 
 INSTALLATION INSTRUCTIONS
 =========================
 This patch may be installed with users on the system; however, it should be 
 installed at a non-peak time to minimize disruption to the users. 
 Installation of this patch should take less than 2 minutes.
   
  1. Use the INSTALL/CHECK MESSAGE option on the Packman Menu.  
    
  2. From the Kernel Installation and Distribution System (KIDS) Menu, 
     select the Installation menu.  
   
  3. From the Installation menu, you may elect to use the following 
     options (when prompted for INSTALL NAME, enter MC*2.3*38): 
   
     a.  Backup a Transport Global 
     b.  Compare Transport Global to Current System 
     c.  Verify Checksums in Transport Global
 
  4. Use the Install Package(s) option and select the package MC*2.3*38.
   
  5. When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//', 
     respond NO.
   
  6. When prompted 'Want to DISABLE Scheduled Options, Menu Options, and 
     Protocols? YES//', respond NO.

Routine Information:
====================

=============================================================================
User Information:
Entered By  : ACKERMAN,NIEN-CHIN            Date Entered  : JUL 08, 2003
Completed By: REZNIK,CHARMAINE              Date Completed: OCT 14, 2003
Released By : THORNTON,NANCY                Date Released : OCT 15, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

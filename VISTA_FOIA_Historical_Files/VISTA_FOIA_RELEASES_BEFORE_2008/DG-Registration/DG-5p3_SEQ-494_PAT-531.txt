$TXT Created by HUA,PATRICK at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 02/02/04 at 13:39
=============================================================================
Run Date: FEB 04, 2004                     Designation: DG*5.3*531
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #494                    Status: Released
                  Compliance Date: MAR 06, 2004
=============================================================================

Associated patches: (v)DG*5.3*518  <<= must be installed BEFORE `DG*5.3*531'

Subject: EXEMPT FROM COPAY

Category: 
  - Routine

Description:
============

 This patch, DG*5.3*531, will address the problem reported in NOIS: 
 UNY-0902-10158.
  
 When deleting a Means Test via the DG MEANS TEST DELETE option, the 
 corresponding values within the INCOME RELATION file (#408.22) and 
 INDIVIDUAL ANNUAL INCOME file (#408.21) are not deleted.  When a new test 
 is added, the data contained in these existing records are used to 
 automatically populate the new test.
  
 This patch, DG*5.3*531, will update the DGMTDEL1 routine to delete the 
 $0.00 values out of the net worth fields in the INDIVIDUAL ANNUAL INCOME 
 file (#408.21) if all income amounts are null, when a Means Test is 
 deleted.
  
  
 This patch addresses the following E3R(s):
 ------------------------------------------
 There are no E3Rs associated with this patch.
  
  
 This patch addresses the following NOIS message(s):
 ---------------------------------------------------
 UNY-0902-10158: Exempt from COPAY when no $ data entered.
  
  
 Overview of NOIS Message(s):
 ---------------------------
 NOIS: UNY-0902-10158 - Exempt from COPAY when no $ data entered.
  
 Problem:  $0.00 dollar amounts are not being removed when a Means Test is 
 deleted and a new test is added.
  
 Resolution:  The DG MEANS TEST DELETE option will be updated to delete 
 the $0.00 values out of the net worth fields in the INDIVIDUAL ANNUAL 
 INCOME file (#408.21).
  
  
 Test Sites:
 -----------
 Madison
 Tampa
  
  
        ================INSTALLATION INSTRUCTIONS =================
  
 This patch can be loaded with users on the system, however, it should be 
 installed during period of minimum usage.  If installed during the normal 
 workday, it is recommended that the following menu options (File #19) and 
 all of their descendants be disabled to prevent possible conflicts while 
 running the KIDS Install.  Other VISTA users will not be affected.
  
           [DG MEANS TEST DELETE]     Delete a Means Test
  
 Install Time - 5 minutes
  
  
   1.   LOAD TRANSPORT GLOBAL 
        ---------------------
        Choose the PackMan message containing this patch and invoke the
        INSTALL/CHECK MESSAGE PackMan option.
  
   2.   DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only)
        -----------------------
        Disable routine mapping on all systems for the routines listed in
        step 3 below.
  
 NOTE:  If the routines included in this patch are not currently in
               your mapped routine set, please skip this step.
  
   3.   COMPONENTS SENT WITH PATCH
        --------------------------
        The following is a list of the routines included in this patch.
        The second line of each of these routines now looks like:
  
      <tab>;;5.3;Registration;**[patch list]**;Aug 13, 1993
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch         After Patch     Patch List
  ============      ============         ===========     ==================
  DGMTDEL1          6935821              7720648         45,166,182,433,518
                                                         531
  
           Total number of routines - 1
  
   4.   START UP KIDS
        -------------
        Start up the Kernel Installation and Distribution System Menu
        [XPD MAIN]:
  
             Edits and Distribution ...
             Utilities ...
             Installation ...
  
   Select Kernel Installation & Distribution System Option: INStallation 
                                                            ---
             Load a Distribution
             Print Transport Global
             Compare Transport Global to Current System
             Verify Checksums in Transport Global
             Install Package(s)
             Restart Install of Package(s)
             Unload a Distribution
             Backup a Transport Global
  
   Select Installation Option:
  
   5.   Select Installation Option:
        --------------------------
        NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
               NAME, enter DG*5.3*531):
  
        a.  Backup a Transport Global - This option will create a backup
            message of any routines exported with this patch. It will not
            backup any other changes such as DD's or templates.
        b.  Compare Transport Global to Current System - This option will
            allow you to view all changes that will be made when this patch
            is installed.  It compares all components of this patch
            (routines, DD's, templates, etc.).
        c.  Verify Checksums in Transport Global - This option will allow
            you to ensure the integrity of the routines that are in the
            transport global.
  
   6.   Select Installation Option: Install Package(s)
                                    ----------------
        **This is the step to start the installation of this KIDS patch:
  
       a.  Choose the Install Package(s) option to start the patch install.
       b.  When prompted 'Want KIDS to INHIBIT LOGONs during the install?
           YES//' answer NO (unless otherwise indicated)
       c.  When prompted 'Want to DISABLE Scheduled Options, Menu
           Options, and Protocols? YES//' answer YES (unless otherwise
           indicated)
       d.  When prompted 'Enter options you wish to mark as 'Out Of
           Order':'  Enter the following options:
  
             [DG MEANS TEST DELETE]     Delete a Means Test
  
       e.  When prompted 'Enter protocols you wish to mark as 'Out Of
           Order':' press <return>.
  
   7.   REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
        -------------------------
        Optional - Include the routines distributed with this patch
        in the mapped routine set.
  
        NOTE: This step is only necessary if you performed step 2 or
              if you wish to include the routines in your mapped set.

Routine Information:
====================

Routine Name:
  - DGMTDEL1

 Original Code:
  
     D DELLNK  ;Deletion of Linked Tests
     S DGMTACT="DEL",DIK="^DGMT(408.31," D ^DIK
     S DGMTY=0 F  S DGMTY=$O(^DGMT(408.22,"AMT",DGMTI,DFN,DGMTY)) Q:'DGMTY
 S DGMTX=0 F  S DGMTX=$O(^DGMT(408.22,"AMT",DGMTI,DFN,DGMTY,DGMTX)) 
 Q:'DGMTX  D
     .S DA=DGMTX
     .I DA S DR="31///@",DIE="^DGMT(408.22," D ^DIE
     .K DE,DQ,DR,DIK
     D AFTER^DGMTEVT S DGMTINF=0
  
  
 Modified Code:
  
     D DELLNK  ;Deletion of Linked Tests
     S DGMTACT="DEL",DIK="^DGMT(408.31," D ^DIK
     S DGMTY=0 F  S DGMTY=$O(^DGMT(408.22,"AMT",DGMTI,DFN,DGMTY)) Q:'DGMTY
 S DGMTX=0 F  S DGMTX=$O(^DGMT(408.22,"AMT",DGMTI,DFN,DGMTY,DGMTX))
 Q:'DGMTX  D
     .S DA=DGMTX
     .I DA S DR="31///@",DIE="^DGMT(408.22," D ^DIE
     .K DE,DQ,DR,DIK
     .;
     .; Delete the $0.00 values out of the net worth fields if total income
     .; is not greater than zero dollars.
     .N DA,NODE0,AMTFLG,CNT,DIE,DR
     .S DA=$P($G(^DGMT(408.22,DGMTX,0)),"^",2)
     .I DA D
     ..Q:'$D(^DGMT(408.21,DA,2))
     ..S NODE0=$G(^DGMT(408.21,DA,0)) Q:NODE0=""
     ..S AMTFLG=0 F CNT=0:1:9 S:$P(NODE0,"^",CNT+8)'="" AMTFLG=1
     ..I 'AMTFLG S DIE="^DGMT(408.21,",DR="31///@;2.01///@;2.02///@;
 2.03///@;2.04///@" D ^DIE
     D AFTER^DGMTEVT S DGMTINF=0

Routine Checksum:

=============================================================================
User Information:
Entered By  : HUA,PATRICK                   Date Entered  : JUN 11, 2003
Completed By: LANDRY,DANNA                  Date Completed: FEB 04, 2004
Released By : GROOMS,ANTHONY E              Date Released : FEB 04, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

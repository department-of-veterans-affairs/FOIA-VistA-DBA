$TXT Created by ZEIGLER,EDWARD L at DEVVII.FO-ALBANY.MED.VA.GOV  (KIDS) on Thursday, 05/19/05 at 14:04
=============================================================================
Run Date: MAY 24, 2005                     Designation: IB*2*249
Package : IB - INTEGRATED BILLING             Priority: Mandatory
Version : 2       SEQ #276                      Status: Released
                  Compliance Date: JUN 24, 2005
=============================================================================

Associated patches: (v)IB*2*82     <<= must be installed BEFORE `IB*2*249'
                    (v)IB*2*103    <<= must be installed BEFORE `IB*2*249'
                    (v)IB*2*121    <<= must be installed BEFORE `IB*2*249'
                    (v)IB*2*123    <<= must be installed BEFORE `IB*2*249'
                    (v)IB*2*155    <<= must be installed BEFORE `IB*2*249'
                    (v)IB*2*183    <<= must be installed BEFORE `IB*2*249'
                    (v)IB*2*223    <<= must be installed BEFORE `IB*2*249'
                    (v)SD*5.3*301  <<= must be installed BEFORE `IB*2*249'
                    (v)IB*2*234    <<= must be installed BEFORE `IB*2*249'
                    (v)SD*5.3*316  <<= must be installed BEFORE `IB*2*249'
                    (v)IB*2*271    <<= must be installed BEFORE `IB*2*249'
                    (v)IB*2*297    <<= must be installed BEFORE `IB*2*249'

Subject: SCHEDULING ENCAPSULATION/API UPDATE

Category: 
  - Routine

Description:
============

 This patch is in response to the Scheduling Encapsulation project.  The 
 Integrated Billing package is being enhanced to utilize new Scheduling 
 APIs released in SD*5.3*283, SD*5.3*301 and SD*5.3*316.  Users should see
 no change in the Integrated Billing options they currently use as a result
 of this change.  Also included in this patch is an enhancement to the 
 insurance API to allow other applications to determine if a patient has 
 unprocessed insurance buffer entries.
  
  
 Test Sites:
 Illiana Health Care System
 Oklahoma City VAMC
 Palo Alto Health Care System
  
  
  
 Options/Routines Affected
 -------------------------
  
 Transfer Pricing Patient Listing [IBAT PATIENT LIST]
 (Routine IBATOP)
 The option prints the patient's next scheduled event (scheduled admission 
 or appointment).  The new API ($$SDAPI^SDAMA301) provided by scheduling is
 now being utilized to find the patient's next scheduled appointment for
 this report.
  
 Routine IBBFAPI
 No IB options are associated with this routine.  This updated API will 
 return the number of unprocessed insurance buffer file entries for a given
 patient.  The same entry point of $$INSUR will be called.  The return
 value will be passed back in the return value variable in the format of
 IBR("BUFFER")=3 where 3 is the number of buffer file entries for the
 patient.  Also included in this update is the ability to extract the Plan 
 Type by specifying field 21 or the wild card * specification.
  
 New Insurance Policy Bulletin 
 (Routines IBCNSBL and IBCNSBL1)
 This bulletin is generated when a new insurance policy is identified for a
 patient.  The bulletin contains a list of the patients scheduled     
 appointments.  The bulletin now uses the new API (GETAPPT^SDAMA201) to    
 look up the patient's appointments.
  
 Routine IBECEAU
 There was a check for C&P appointments on the same day as when a charge is
 being added to a patient.  This check is still in place.  However, there was
 an extra check that was no longer needed to determine the status of the
 appointment.  The extra check was there for historical purposes and is no
 longer applicable; therefore the extra check is being removed.  This 
 check occurred during the automated MT Copay Billing process when 
 appointments are checked out.
  
 Veterans w/Insurance and Opt. Visits [IB OUTPATIENT VET REPORT] 
 (Routine IBEFUNC)
 When running the ONSC report there is a check to determine if an encounter
 is billable.  When the encounter has a status of 14 (Action Required)
 there was an extra check against the patient's appointment status for
 billable determination.  This check was there for historical purposes and
 is no longer applicable; therefore the check is being removed.  The
 function to determine if an appointment is non-count has been updated to
 use the Outpatient Encounter (#409.68) status for this determination.
  
 Percentage of Completed Registrations [IBJD INTAKE COMP REG]
 (Routines IBJDI1 and IBJDI11)
 The option prints the patient's next scheduled event (scheduled admission 
 or appointment).  The new API ($$SDAPI^SDAMA301) provided by Scheduling is
 now being utilized to find the patient's next scheduled appointment for
 this report.  Also the determination if a registration event is non-count
 has been moved from a clinic evaluation to the status of the Outpatient
 Encounter.
  
 Veterans with Verified/Unverified Eligibility [IBJD INTAKE UNV ELIG] 
 (Routine IBJDI2 and IBJDI21)
 The option prints the patient's next scheduled event (scheduled admission 
 or appointment).  The new API ($$SDAPI^SDAMA301) provided by Scheduling is
 now being utilized to find the patient's next scheduled appointment for
 this report.
  
 Outpatients w/Unknown or Expired Insurance [IB OUTPUT OPTS WITHOUT INS] 
 (Routine IBOUNP1, IBOUNP2, and IBOUNP3)
 The option prints a list of outpatient visits based on clinic selection.  
 The new API ($$SDAPI^SDAMA301) provided by Scheduling is now being 
 utilized to find the patients scheduled appointments for the report.
  
 Outpatient/Registration Events Report [IB OUTPUT EVENTS REPORT]
 (Routines IBOVOP and IBOVOP1)
 The option prints a list of outpatient registration events.  Because the
 option did an extra check for historical purposes that is no longer
 applicable, this extra check is being removed. 
  
 Routine IBSDU
 Entry DPTSND
 With the changes in this patch, this entry point is no longer applicable 
 and no longer being called within the IB package.  The code contained in 
 this entry point is being removed.
  
 Claims Tracking Edit [IBT EDIT TRACKING ENTRY]
 Claims Tracking Edit [IBT EDIT IR TRACKING ENTRY] 
 Claims Tracking Edit [IBT EDIT HR TRACKING ENTRY] 
 Claims Tracking Edit [IBT EDIT BI TRACKING ENTRY] 
 (Routine IBTRE2 and IBTRE20)
 When adding an entry to Claims Tracking with any of the above there is a 
 check for a scheduled appointment on the date of an outpatient event is 
 being added and a warning message displayed if no appointment is found.  
 The new API ($$SDAPI^SDAMA301) provided by Scheduling is now being 
 utilized for this check.  Also if a user could request help and get a list
 of appointments for a patient, the new API is now being utilized to 
 generate this list.
  
 Manually Add Opt. Encounters to Claims Tracking [IBT SUP MANUALLY QUE ENCTRS]
 Queue Means Test Compilation of Charges [IB MT NIGHT COMP]
 (Routine IBTUTL1)
 When these options would run there is a scan of outpatient events to add 
 to the Claims Tracking module.  There was an attempt to find an outpatient
 encounter to match a scheduled appointment to add to Claims Tracking.  IB
 now looks for the outpatient encounter directly.
  
 IIV NIGHTLY PROCESS [IBCNE IIV BATCH PROCESS]
 (Routine IBCNEDE2)
 This routine runs nightly to send patients with future scheduled 
 appointments to IIV for insurance verification.  The lookup of future 
 scheduled appointments is being updated to utilize the new Scheduling 
 API.  Since it is possible for the new Scheduling API to return an error 
 message a MailMan message will be created and sent to the IBCNE IIV 
 MESSAGE mail group if an error is encountered.
  
 Routine IBYZ15A is obsolete and is being deleted with the install of
 this patch.  You may not have this on your system, but if you do, the
 routine will be deleted.
  
  
         ================INSTALLATION INSTRUCTIONS =================
                         
 If installed during the normal workday, it is recommended that the 
 following selections in the OPTION (#19) file be disabled to prevent 
 possible conflicts while running the KIDS Install. Other VISTA users will
 not be affected.  It is also recommended this patch not be installed with 
 the IB nightly processes are running.  The name of the options are IB MT
 NIGHT COMP and IBCNE IIV BATCH PROCESS.
  
   Transfer Pricing Patient Listing [IBAT PATIENT LIST]
   Patient Insurance Info View/Edit [IBCN PATIENT INSURANCE]
   Cancel/Edit/Add Patient Charges [IB CANCEL/EDIT/ADD CHARGES]
   Veterans w/Insurance and Opt. Visits [IB OUTPATIENT VET REPORT]
   Percentage of Completed Registrations [IBJD INTAKE COMP REG]
   Veterans with Verified/Unverified Eligibility [IBJD INTAKE UNV ELIG]
   Outpatients w/Unknown or Expired Insurance [IB OUTPUT OPTS WITHOUT INS]
   Outpatient/Registration Events Report [IB OUTPUT EVENTS REPORT]
   Claims Tracking Edit [IBT EDIT TRACKING ENTRY]
   Claims Tracking Edit [IBT EDIT IR TRACKING ENTRY] 
   Claims Tracking Edit [IBT EDIT HR TRACKING ENTRY] 
   Claims Tracking Edit [IBT EDIT BI TRACKING ENTRY]
   Manually Add Opt. Encounters to Claims Tracking [IBT SUP MANUALLY QUE ENCTRS]
   IIV NIGHTLY PROCESS [IBCNE IIV BATCH PROCESS]
   Queue Means Test Compilation of Charges [IB MT NIGHT COMP]
  
  
  Install Time - less than 10 minutes. 
              
                      
  1.   LOAD TRANSPORT GLOBAL 
       ---------------------
       Choose the PackMan message containing this patch and invoke the 
       INSTALL/CHECK MESSAGE PackMan option.  
                
  2.   DISABLE ROUTINE MAPPING   (DSM for Open VMS sites only) 
       -----------------------
       Disable routine mapping on all systems for the routines listed above.
                                  
       NOTE:  If the routines included in this patch are not currently in 
              your mapped routine set, please skip this step.
                        
  3.   COMPONENTS SENT WITH PATCH 
       --------------------------
  
  ROUTINE SUMMARY:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
      <tab>;;2.0;INTEGRATED BILLING;**[patch list]**;21-MAR-94
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  IBATOP                 9592387              9980327       115,153,183,249
  IBBFAPI                9515379             10006809         267,297,249
  IBCNEDE2              10986296             14306986         184,271,249
  IBCNSBL                3011486              3074333        6,28,103,249
  IBCNSBL1              10689846             12060842         6,28,82,249
  IBECEAU                7542622              6795558           91,249
  IBEFUNC                8566343              8462484      55,91,106,139,51
                                                            153,232,155,249
  IBJDI1                15235288             16482347      69,98,100,118,128
                                                                123,249
  IBJDI11                5773349              6082511       100,118,128,249
  IBJDI2                 5061102              5357604      69,91,98,100,118
                                                                  249
  IBJDI21               14813275             16093305           118,249
  IBOUNP1                5103611              6855433             249
  IBOUNP2                5551837              3493831             249
  IBOUNP3               11102312             11684522             249
  IBOVOP                 4399056              3482585       91,153,176,249
  IBOVOP1                6299025              6223412      52,91,99,132,156
                                                              176,234,249
  IBSDU                  2465346              2362242           91,249
  IBTRE2                11660528             13360798         23,121,249
  IBTRE20                6039519              6164085          40,91,249
  IBTUTL1                6092014              5928182         13,223,249
  IBYZ15A(may not exist)10098482                n/a           (IB v1.5) 7
  
    Total Routines - 21
  
  
  4.   START UP KIDS 
       -------------
       Start up the Kernel Installation and Distribution System Menu 
       [XPD MAIN]: 
                              
              Edits and Distribution ...  
              Utilities ...  
              Installation ...  
                                  
       Select Kernel Installation & Distribution System Option: INStallation 
                                                                ---
              Load a Distribution 
              Print Transport Global 
              Compare Transport Global to Current System 
              Verify Checksums in Transport Global 
              Install Package(s) 
              Restart Install of Package(s) 
              Unload a Distribution 
              Backup a Transport Global 
                      
       Select Installation Option: 
                               
  5.   Select Installation Option: 
       ---------------------------
       NOTE:  The following are OPTIONAL - (When prompted for the INSTALL
              NAME, enter IB*2.0*249):
        
       a.  Backup a Transport Global - This option will create a backup
           message of any routines exported with this patch. It will not
           backup any other changes such as DD's or templates.
       b.  Compare Transport Global to Current System - This option will
           allow you to view all changes that will be made when this patch
           is installed.  It compares all components of this patch
           (routines, DD's, templates, etc.).
       c.  Verify Checksums in Transport Global - This option will allow
           you to ensure the integrity of the routines that are in the
           transport global.
       
  6.   Select Installation Option: Install Package(s) 
                                   ------------------
       **This is the step to start the installation of this KIDS patch: 
                
       a. Choose the Install Package(s) option to start the patch install.
       b. When prompted 'Want KIDS to INHIBIT LOGONs during the install? 
          YES//' answer NO
       c. When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
          and Protocols? YES//' answer YES
            
       d. When prompted 'Enter options you wish to mark as 'Out Of 
          Order':'  Enter the following options:
                             
   Transfer Pricing Patient Listing [IBAT PATIENT LIST]
   Patient Insurance Info View/Edit [IBCN PATIENT INSURANCE]
   Cancel/Edit/Add Patient Charges [IB CANCEL/EDIT/ADD CHARGES]
   Veterans w/Insurance and Opt. Visits [IB OUTPATIENT VET REPORT]
   Percentage of Completed Registrations [IBJD INTAKE COMP REG]
   Veterans with Verified/Unverified Eligibility [IBJD INTAKE UNV ELIG]
   Outpatients w/Unknown or Expired Insurance [IB OUTPUT OPTS WITHOUT INS]
   Outpatient/Registration Events Report [IB OUTPUT EVENTS REPORT]
   Claims Tracking Edit [IBT EDIT TRACKING ENTRY]
   Claims Tracking Edit [IBT EDIT IR TRACKING ENTRY] 
   Claims Tracking Edit [IBT EDIT HR TRACKING ENTRY] 
   Claims Tracking Edit [IBT EDIT BI TRACKING ENTRY]
   Manually Add Opt. Encounters to Claims Tracking [IBT SUP MANUALLY QUE ENCTRS]
   IIV NIGHTLY PROCESS [IBCNE IIV BATCH PROCESS]
   Queue Means Test Compilation of Charges [IB MT NIGHT COMP]
            
       e. When prompted 'Enter protocols you wish to mark as 'Out Of 
          Order':' press <return>.
                       
  7.   REBUILD MAPPED ROUTINE(S)  (DSM for Open VMS sites only)
       -------------------------
       Optional - Include the routines distributed with this patch
       in the mapped routine set.
                            
       NOTE: This step is only necessary if you performed step 2 or 
             if you wish to include the routines in your mapped set.

Routine Information:
====================

Routine Name:
  - IBATOP


Routine Checksum:

Routine Name:
  - IBCNSBL


Routine Checksum:

Routine Name:
  - IBCNSBL1


Routine Checksum:

Routine Name:
  - IBECEAU


Routine Checksum:

Routine Name:
  - IBEFUNC


Routine Checksum:

Routine Name:
  - IBJDI1


Routine Checksum:

Routine Name:
  - IBJDI11


Routine Checksum:

Routine Name:
  - IBJDI2


Routine Checksum:

Routine Name:
  - IBJDI21


Routine Checksum:

Routine Name:
  - IBOUNP1


Routine Checksum:

Routine Name:
  - IBOUNP2


Routine Checksum:

Routine Name:
  - IBOUNP3


Routine Checksum:

Routine Name:
  - IBOVOP


Routine Checksum:

Routine Name:
  - IBOVOP1


Routine Checksum:

Routine Name:
  - IBSDU


Routine Checksum:

Routine Name:
  - IBTRE2


Routine Checksum:

Routine Name:
  - IBTRE20


Routine Checksum:

Routine Name:
  - IBYZ15A


Routine Checksum:

Routine Name:
  - IBCNEDE2


Routine Checksum:

Routine Name:
  - IBTUTL1


Routine Checksum:

Routine Name:
  - IBBFAPI


Routine Checksum:

=============================================================================
User Information:
Entered By  : ZEIGLER,EDWARD L              Date Entered  : OCT 08, 2003
Completed By: LYNCH,MARY F.                 Date Completed: MAY 24, 2005
Released By : BOTTINI,STEVE                 Date Released : MAY 24, 2005
=============================================================================


Packman Mail Message:
=====================

$END TXT

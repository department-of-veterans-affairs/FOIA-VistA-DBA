Released OR*3*244 SEQ #236
Extracted from mail message
**KIDS**:OR*3.0*244^

**INSTALL NAME**
OR*3.0*244
"BLD",6596,0)
OR*3.0*244^ORDER ENTRY/RESULTS REPORTING^0^3061011^y
"BLD",6596,1,0)
^^3^3^3060112^
"BLD",6596,1,1,0)
This patch contains the routine ORY244 which will scan Order file #100 
"BLD",6596,1,2,0)
for missing abnormal results, from Fileman date 3050901 to present and 
"BLD",6596,1,3,0)
restore them. 
"BLD",6596,4,0)
^9.64PA^^
"BLD",6596,6)
7^
"BLD",6596,6.3)
1
"BLD",6596,"INI")

"BLD",6596,"INID")
^n^
"BLD",6596,"INIT")
ORY244
"BLD",6596,"KRN",0)
^9.67PA^8989.52^19
"BLD",6596,"KRN",.4,0)
.4
"BLD",6596,"KRN",.4,"NM",0)
^9.68A^^
"BLD",6596,"KRN",.401,0)
.401
"BLD",6596,"KRN",.402,0)
.402
"BLD",6596,"KRN",.403,0)
.403
"BLD",6596,"KRN",.5,0)
.5
"BLD",6596,"KRN",.84,0)
.84
"BLD",6596,"KRN",3.6,0)
3.6
"BLD",6596,"KRN",3.8,0)
3.8
"BLD",6596,"KRN",9.2,0)
9.2
"BLD",6596,"KRN",9.8,0)
9.8
"BLD",6596,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6596,"KRN",9.8,"NM",1,0)
ORY244^^0^B47857005
"BLD",6596,"KRN",9.8,"NM","B","ORY244",1)

"BLD",6596,"KRN",19,0)
19
"BLD",6596,"KRN",19.1,0)
19.1
"BLD",6596,"KRN",101,0)
101
"BLD",6596,"KRN",409.61,0)
409.61
"BLD",6596,"KRN",771,0)
771
"BLD",6596,"KRN",870,0)
870
"BLD",6596,"KRN",8989.51,0)
8989.51
"BLD",6596,"KRN",8989.52,0)
8989.52
"BLD",6596,"KRN",8994,0)
8994
"BLD",6596,"KRN","B",.4,.4)

"BLD",6596,"KRN","B",.401,.401)

"BLD",6596,"KRN","B",.402,.402)

"BLD",6596,"KRN","B",.403,.403)

"BLD",6596,"KRN","B",.5,.5)

"BLD",6596,"KRN","B",.84,.84)

"BLD",6596,"KRN","B",3.6,3.6)

"BLD",6596,"KRN","B",3.8,3.8)

"BLD",6596,"KRN","B",9.2,9.2)

"BLD",6596,"KRN","B",9.8,9.8)

"BLD",6596,"KRN","B",19,19)

"BLD",6596,"KRN","B",19.1,19.1)

"BLD",6596,"KRN","B",101,101)

"BLD",6596,"KRN","B",409.61,409.61)

"BLD",6596,"KRN","B",771,771)

"BLD",6596,"KRN","B",870,870)

"BLD",6596,"KRN","B",8989.51,8989.51)

"BLD",6596,"KRN","B",8989.52,8989.52)

"BLD",6596,"KRN","B",8994,8994)

"BLD",6596,"QUES",0)
^9.62^^
"BLD",6596,"REQB",0)
^9.611^1^1
"BLD",6596,"REQB",1,0)
LR*5.2*348^2
"BLD",6596,"REQB","B","LR*5.2*348",1)

"INIT")
ORY244
"MBREQ")
0
"PKG",167,-1)
1^1
"PKG",167,0)
ORDER ENTRY/RESULTS REPORTING^OR^Order Entry/Results Reporting
"PKG",167,20,0)
^9.402P^^
"PKG",167,22,0)
^9.49I^1^1
"PKG",167,22,1,0)
3.0^2971217^2980417^1271
"PKG",167,22,1,"PAH",1,0)
244^3061011^33245
"PKG",167,22,1,"PAH",1,1,0)
^^3^3^3061011
"PKG",167,22,1,"PAH",1,1,1,0)
This patch contains the routine ORY244 which will scan Order file #100 
"PKG",167,22,1,"PAH",1,1,2,0)
for missing abnormal results, from Fileman date 3050901 to present and 
"PKG",167,22,1,"PAH",1,1,3,0)
restore them. 
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","ORY244")
0^1^B47857005^n/a
"RTN","ORY244",1,0)
ORY244 ;SLC/JEH -- post-install for OR*3*244 ;12/14/2005
"RTN","ORY244",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**244**;Dec 17, 1997;Build 1
"RTN","ORY244",3,0)
 ; Variables used: 
"RTN","ORY244",4,0)
 ; DATE = the date 2nd part of the sub script of LRO(69,DATE
"RTN","ORY244",5,0)
 ; LORSN = the multiple counter of 69 or 4th part  to get to each LAB ORDER
"RTN","ORY244",6,0)
 ; LABDFN = DFN of LR file
"RTN","ORY244",7,0)
 ; TSTCNT = the sub multiple / counter of the lab test or the 6th part of the 69 sub script   
"RTN","ORY244",8,0)
 ; OERRDFN = DFN of OR(100 
"RTN","ORY244",9,0)
 ; LRSUB = sub of LAB(60, the lab test in LR
"RTN","ORY244",10,0)
 ; L60DFN = DFN of Lab test performed
"RTN","ORY244",11,0)
 ; TSTCNT = 6th part of sub script of LOR(69, pts to LAB TEST( LAB(60, and corresponding OR DFN
"RTN","ORY244",12,0)
 ; TSTTYP= CH MI AP, from the order file OR(100
"RTN","ORY244",13,0)
 ; PANEL=1 Indicates from a panel test versies single test PANEL="" 
"RTN","ORY244",14,0)
 ; CNT244 = Number of Abnormal results modified
"RTN","ORY244",15,0)
 ;
"RTN","ORY244",16,0)
 ;
"RTN","ORY244",17,0)
POST ; -- Postinit corrects the abnormal flag and resuslts set in the OR(100, file
"RTN","ORY244",18,0)
 N DATE,LOCATION,PTNAME,LABDFN,LORSN,LRSUB,TSTCNT,PANEL,TSTTYP,LRIVDAT,LSTEST,LABPNUM,TEST
"RTN","ORY244",19,0)
 N L60DFN,RCNT,LRRESULT,LV60TST,OERRDFN,OR0,ORESULTS,CNT244,DAT60LV1,DAT60LV2,DAT69LV1,DAT69LV2
"RTN","ORY244",20,0)
 S LOCATION="",PTNAME="",LABDFN="",PANEL="",CNT244=0,TEST=""
"RTN","ORY244",21,0)
 K ^TMP("ORFIX",$J),^TMP("ORTXT",$J)
"RTN","ORY244",22,0)
 S ^TMP("ORFIX",$J,0)=0
"RTN","ORY244",23,0)
 ;
"RTN","ORY244",24,0)
PTR69 ; -- Loop thru Lab order file 69 to find ptr to Order file (OR 100) and Lab Data file (LR
"RTN","ORY244",25,0)
 N ORMSG,ZTSK
"RTN","ORY244",26,0)
 S ORMSG(1)=""
"RTN","ORY244",27,0)
 S ORMSG(2)="STARTING reinstatement of missing abnormal results in the ORDER file #100"
"RTN","ORY244",28,0)
 S ORMSG(3)=""
"RTN","ORY244",29,0)
 D MES^XPDUTL(.ORMSG)
"RTN","ORY244",30,0)
 ;W !,"STARTING reinstatement of missing abnormal results in the ORDER file #100"
"RTN","ORY244",31,0)
 S DATE=3050815 ; PROBLEM START WITH LR*5.2*340 given to test sites Aug 15
"RTN","ORY244",32,0)
 F  S DATE=$O(^LRO(69,DATE)) Q:DATE'?7N!(DATE>3051231)  D  ;69 loop
"RTN","ORY244",33,0)
 . ;
"RTN","ORY244",34,0)
 . S LORSN=0
"RTN","ORY244",35,0)
 . F  S LORSN=$O(^LRO(69,DATE,1,LORSN)) Q:LORSN'>0  D    ;loop within LR order to get multi test
"RTN","ORY244",36,0)
 . . ;
"RTN","ORY244",37,0)
 . . S DAT69LV1=$G(^LRO(69,DATE,1,LORSN,0)) Q:DAT69LV1=""
"RTN","ORY244",38,0)
 . . S LABDFN=$P(^LRO(69,DATE,1,LORSN,0),"^",1)  ;get LR DFN
"RTN","ORY244",39,0)
 . . I LABDFN="" Q   ;No LR not need to process v2
"RTN","ORY244",40,0)
 . . ;
"RTN","ORY244",41,0)
 . . S TSTCNT=0
"RTN","ORY244",42,0)
 . . F  S TSTCNT=$O(^LRO(69,DATE,1,LORSN,2,TSTCNT)) Q:TSTCNT=""!(TSTCNT]"@")  D  ;loop thru test 
"RTN","ORY244",43,0)
 . . . ;
"RTN","ORY244",44,0)
 . . . W "."
"RTN","ORY244",45,0)
 . . . S DAT69LV2=$G(^LRO(69,DATE,1,LORSN,2,TSTCNT,0)) Q:DAT69LV2=""
"RTN","ORY244",46,0)
 . . . S OERRDFN=$P(^LRO(69,DATE,1,LORSN,2,TSTCNT,0),"^",7)  ;get DFN of OR(100
"RTN","ORY244",47,0)
 . . . I OERRDFN="" Q   ;No OR(100 no need to process v2
"RTN","ORY244",48,0)
 . . . S L60DFN=+$P(^LRO(69,DATE,1,LORSN,2,TSTCNT,0),"^",1)  ;get DFN of 60 lab test performed
"RTN","ORY244",49,0)
 . . . I L60DFN="" Q   ;No lab test no need to process v2
"RTN","ORY244",50,0)
 . . . ; If test is a Panel of test or a single test?
"RTN","ORY244",51,0)
 . . . S DAT60LV1=$G(^LAB(60,L60DFN,0)) Q:DAT60LV1=""
"RTN","ORY244",52,0)
 . . . S LSTEST=L60DFN
"RTN","ORY244",53,0)
 . . . S PANEL=""
"RTN","ORY244",54,0)
 . . . S PANEL=$G(^LAB(60,L60DFN,2,1,0)) ;if there, equal to 1st test in panel test.
"RTN","ORY244",55,0)
 . . . I PANEL'="" S PANEL=L60DFN
"RTN","ORY244",56,0)
 . . . ; OR100FU GET INFO FROM OR(100
"RTN","ORY244",57,0)
 . . . I $G(^OR(100,OERRDFN,7))="" Q  ;No results no need to process
"RTN","ORY244",58,0)
 . . . I $P(^OR(100,OERRDFN,7),"^",2)=1 Q  ;If abnomal results already, no need to process
"RTN","ORY244",59,0)
 . . . ;
"RTN","ORY244",60,0)
 . . . S LRIVDAT="",TSTTYP="",ORESULTS=""
"RTN","ORY244",61,0)
 . . . I $G(^OR(100,OERRDFN,4))="" Q   ;If no date time of type quit v3
"RTN","ORY244",62,0)
 . . . S LRIVDAT=$P(^OR(100,OERRDFN,4),";",5)
"RTN","ORY244",63,0)
 . . . S TSTTYP=$P(^OR(100,OERRDFN,4),";",4)
"RTN","ORY244",64,0)
 . . . ;If not one of the Lab test types processed by LR7OR1 then quit
"RTN","ORY244",65,0)
 . . . I TSTTYP'="CH" Q
"RTN","ORY244",66,0)
 . . . I LRIVDAT="" Q  ;No LR date no need to process v2
"RTN","ORY244",67,0)
 . . . I PANEL="" D NONPAN
"RTN","ORY244",68,0)
 . . . ;
"RTN","ORY244",69,0)
 . . . I PANEL'="" D PAN60 ; PROCESS A PANEL OF TEST FOR THSI ORDER.
"RTN","ORY244",70,0)
 ;
"RTN","ORY244",71,0)
 D MAIL
"RTN","ORY244",72,0)
 ;W !,"Up date of Order file is complete!"
"RTN","ORY244",73,0)
 ;W !,"Please check your Mail for a list of modified ORDER files"
"RTN","ORY244",74,0)
 N ORMSG,ZTSK
"RTN","ORY244",75,0)
 S ORMSG(1)=""
"RTN","ORY244",76,0)
 S ORMSG(2)="Up date of Order file is complete!"
"RTN","ORY244",77,0)
 S ORMSG(3)="Please check your Mail for a list of modified ORDER files"
"RTN","ORY244",78,0)
 S ORMSG(4)=""
"RTN","ORY244",79,0)
 D MES^XPDUTL(.ORMSG)
"RTN","ORY244",80,0)
 Q
"RTN","ORY244",81,0)
 ;
"RTN","ORY244",82,0)
NONPAN ;
"RTN","ORY244",83,0)
 S DAT60LV2=$G(^LAB(60,L60DFN,.2)) Q:DAT60LV2=""
"RTN","ORY244",84,0)
 S LRSUB=$P(^LAB(60,L60DFN,.2),"^",1)
"RTN","ORY244",85,0)
 I LRSUB="" Q   ; if not test skip v2
"RTN","ORY244",86,0)
 S LRRESULT=$G(^LR(LABDFN,TSTTYP,LRIVDAT,LRSUB)) Q:LRRESULT=""  ;If no results quit
"RTN","ORY244",87,0)
 S TEST=$P(LRRESULT,"^",2)
"RTN","ORY244",88,0)
 I (TEST["L")!(TEST["H") D  Q
"RTN","ORY244",89,0)
 . I $G(^LAB(60,L60DFN,.1))="" Q  ;If no test name quit v3
"RTN","ORY244",90,0)
 . S ORESULTS=$P(^LAB(60,L60DFN,.1),"^",1)_"="_$P(LRRESULT,"^",1)
"RTN","ORY244",91,0)
 . D ORUPDAT ;set ABNORMAL results in Order file
"RTN","ORY244",92,0)
 Q
"RTN","ORY244",93,0)
 ;
"RTN","ORY244",94,0)
PAN60 ;
"RTN","ORY244",95,0)
 S ORESULTS=""   ;Clear for the next order file
"RTN","ORY244",96,0)
 ; S DAT60LV1=$G(^LAB(60,LRSUB,0)) Q:DAT60LV1=""
"RTN","ORY244",97,0)
 ;
"RTN","ORY244",98,0)
 ; Lab(60 DFN in LOR(69 was a Panel of test.
"RTN","ORY244",99,0)
 ; If an abnormal test in the panel test loop thru the panel test to pull each individual test 
"RTN","ORY244",100,0)
 ; also loop Thru the LR from the start to pull the results to put with the test from LAB(60 
"RTN","ORY244",101,0)
 S LRSUB=""
"RTN","ORY244",102,0)
 ; Loop Thru LR file to pull individual test results when from a panel of test.
"RTN","ORY244",103,0)
 S RCNT=0
"RTN","ORY244",104,0)
 S LSTEST=""
"RTN","ORY244",105,0)
 S LABPNUM=0
"RTN","ORY244",106,0)
 F  S LABPNUM=$O(^LAB(60,PANEL,2,LABPNUM)) Q:LABPNUM=""!(LABPNUM]"@")  D
"RTN","ORY244",107,0)
 . S LV60TST=$G(^LAB(60,PANEL,2,LABPNUM,0)) Q:LV60TST=""
"RTN","ORY244",108,0)
 . S L60DFN=$P(LV60TST,"^",1)
"RTN","ORY244",109,0)
 . I L60DFN="" Q  ;If not test skip v3
"RTN","ORY244",110,0)
 . S LRSUB=$G(^LAB(60,L60DFN,.2))  ; If L60DFN not null but not valid quit v3
"RTN","ORY244",111,0)
 . I LRSUB="" Q  ; v3
"RTN","ORY244",112,0)
 . S LRSUB=$P(^LAB(60,L60DFN,.2),"^",1)
"RTN","ORY244",113,0)
 . S LRRESULT=$G(^LR(LABDFN,TSTTYP,LRIVDAT,LRSUB)) Q:LRRESULT=""  ;If no test quit
"RTN","ORY244",114,0)
 . S TEST=$P(LRRESULT,"^",2) Q:LRRESULT=""  ;If no results quit
"RTN","ORY244",115,0)
 . I (TEST["L")!(TEST["H") D  Q
"RTN","ORY244",116,0)
 . . S RCNT=RCNT+1
"RTN","ORY244",117,0)
 . . S DAT60LV1=$G(^LAB(60,L60DFN,0)) Q:DAT60LV1=""
"RTN","ORY244",118,0)
 . . S LSTEST=LRSUB
"RTN","ORY244",119,0)
 . . I $G(^LAB(60,L60DFN,.1))="" Q  ;If no test name quit v3
"RTN","ORY244",120,0)
 . . S $P(ORESULTS,",",RCNT)=$P(^LAB(60,L60DFN,.1),"^",1)_"="_$P(LRRESULT,"^",1)_" "
"RTN","ORY244",121,0)
 . . ; S LRSUB=LRSUB+1  ;Bump to the next LR test results
"RTN","ORY244",122,0)
 I ORESULTS'="" D ORUPDAT ;set ABNORMAL results in Order file
"RTN","ORY244",123,0)
 Q
"RTN","ORY244",124,0)
 ;
"RTN","ORY244",125,0)
ORUPDAT ; Update the OR(100, file Abnormal results
"RTN","ORY244",126,0)
 ;
"RTN","ORY244",127,0)
 S CNT244=CNT244+1
"RTN","ORY244",128,0)
 S ^TMP("ORFIX",$J,0)=CNT244
"RTN","ORY244",129,0)
 S PTNAME=""
"RTN","ORY244",130,0)
 S OR0=$G(^OR(100,OERRDFN,0))
"RTN","ORY244",131,0)
 S PTNAME=$$PTNM($P(OR0,U,2))
"RTN","ORY244",132,0)
 S ^TMP("ORFIX",$J,CNT244)="PATIENT NAME="_PTNAME
"RTN","ORY244",133,0)
 S ^TMP("ORFIX",$J,CNT244,0)=" ORER FILE DFN="_OERRDFN
"RTN","ORY244",134,0)
 S ^TMP("ORFIX",$J,CNT244,1)=" LAB DATA LRDFN="_LABDFN
"RTN","ORY244",135,0)
 I PANEL="" S ^TMP("ORFIX",$J,CNT244,2)=" LABORATORY TEST IEN="_LSTEST
"RTN","ORY244",136,0)
 I PANEL'="" S ^TMP("ORFIX",$J,CNT244,2)=" LABORATORY TEST(PANEL) IEN="_PANEL
"RTN","ORY244",137,0)
 S ^TMP("ORFIX",$J,CNT244,3)=" ABNORMAL TEST RESULTS: "_ORESULTS
"RTN","ORY244",138,0)
 S $P(^OR(100,OERRDFN,7),"^",2)=1
"RTN","ORY244",139,0)
 S $P(^OR(100,OERRDFN,7),"^",3)=ORESULTS
"RTN","ORY244",140,0)
 ;W !," ABNORMAL TEST RESULTS: ",ORESULTS
"RTN","ORY244",141,0)
 ;
"RTN","ORY244",142,0)
 ;S THISTEST=^OR(100,OERRDFN,7)
"RTN","ORY244",143,0)
 ;W !,"Before update ^OR(100,"_OERRDFN_",7)=",THISTEST
"RTN","ORY244",144,0)
 ;
"RTN","ORY244",145,0)
 ;S THISTEST=^OR(100,OERRDFN,7)
"RTN","ORY244",146,0)
 ;W !,"After update ^OR(100,"_OERRDFN_",7)=",THISTEST
"RTN","ORY244",147,0)
 ;W !
"RTN","ORY244",148,0)
 Q
"RTN","ORY244",149,0)
 ;
"RTN","ORY244",150,0)
 ;
"RTN","ORY244",151,0)
 ;
"RTN","ORY244",152,0)
MAIL ;Send results of cleanup in a mail message to initiator
"RTN","ORY244",153,0)
 N I,XMSUB,XMTEXT,XMDUZ,XMY,DIFROM
"RTN","ORY244",154,0)
 S XMSUB="Patch OR*3*244 Clean up completed"
"RTN","ORY244",155,0)
 S XMDUZ="Patch OR*3*244 Clean up job"
"RTN","ORY244",156,0)
 S XMY(.5)="" S:$G(DUZ) XMY(DUZ)=""
"RTN","ORY244",157,0)
 S XMTEXT="^TMP(""ORTXT"",$J,"
"RTN","ORY244",158,0)
 K ^TMP("ORTXT",$J)
"RTN","ORY244",159,0)
 ; set up header and count
"RTN","ORY244",160,0)
 S I=1
"RTN","ORY244",161,0)
 S ^TMP("ORTXT",$J,I)="The reinstatement of Abnormal results has completed.",I=I+1
"RTN","ORY244",162,0)
 S ^TMP("ORTXT",$J,I)="Below is a listing of Abnormal results taken from Lab test and added to the Order file.",I=I+1
"RTN","ORY244",163,0)
 S ^TMP("ORTXT",$J,I)="",I=I+1
"RTN","ORY244",164,0)
 S ^TMP("ORTXT",$J,I)=+$P($G(^TMP("ORFIX",$J,0)),U)_" orders had abnormal results added.",I=I+1
"RTN","ORY244",165,0)
 S ^TMP("ORTXT",$J,I)="",I=I+1
"RTN","ORY244",166,0)
 I $G(^TMP("ORFIX",$J,0))=0 S ^TMP("ORTXT",$J,I)="No changes were made to your database.",I=I+1
"RTN","ORY244",167,0)
 S ^TMP("ORTXT",$J,I)="",I=I+1
"RTN","ORY244",168,0)
 ; set up message text
"RTN","ORY244",169,0)
 S CNT244=0 F  S CNT244=$O(^TMP("ORFIX",$J,CNT244)) Q:CNT244=""  D
"RTN","ORY244",170,0)
 .S ^TMP("ORTXT",$J,I)=^TMP("ORFIX",$J,CNT244),I=I+1
"RTN","ORY244",171,0)
 .S ^TMP("ORTXT",$J,I)=^TMP("ORFIX",$J,CNT244,0),I=I+1
"RTN","ORY244",172,0)
 .S ^TMP("ORTXT",$J,I)=^TMP("ORFIX",$J,CNT244,1),I=I+1
"RTN","ORY244",173,0)
 .S ^TMP("ORTXT",$J,I)=^TMP("ORFIX",$J,CNT244,2),I=I+1
"RTN","ORY244",174,0)
 .S ^TMP("ORTXT",$J,I)=^TMP("ORFIX",$J,CNT244,3),I=I+1
"RTN","ORY244",175,0)
 .S ^TMP("ORTXT",$J,I)="",I=I+1
"RTN","ORY244",176,0)
 D ^XMD ;send results
"RTN","ORY244",177,0)
 Q
"RTN","ORY244",178,0)
 ;
"RTN","ORY244",179,0)
PTNM(IEN) ;Return pt name or -1 if unable to determine
"RTN","ORY244",180,0)
 N DFN,VADM
"RTN","ORY244",181,0)
 I +IEN=0!(IEN'["DPT") Q -1
"RTN","ORY244",182,0)
 S DFN=+IEN
"RTN","ORY244",183,0)
 D ^VADPT
"RTN","ORY244",184,0)
 I $G(VADM(1))="" Q -1
"RTN","ORY244",185,0)
 Q $G(VADM(1))
"RTN","ORY244",186,0)
 ;
"VER")
8.0^22.0
"BLD",6596,6)
^236
**END**
**END**

$TXT Created by ARNETTE,ANDY at MNTVLL.FO-ALBANY.MED.VA.GOV  (KIDS) on Friday, 12/29/06 at 13:25
=============================================================================
Run Date: JAN 16, 2007                     Designation: DG*5.3*733
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #652                    Status: Released
                  Compliance Date: FEB 16, 2007
=============================================================================

Associated patches: (v)DG*5.3*503  <<= must be installed BEFORE `DG*5.3*733'

Subject: TRIGGER FOR 1010EZ COMBAT AFTER 11/11/98

Category: 
  - Data Dictionary
  - Routine

Description:
============

  I.  OVERVIEW
  
  When a patient's service data is entered via the Load/Edit Patient Data
  [DG LOAD PATIENT DATA] option, setting the COMBAT SERVICE INDICATED? field
  (Patient file #2, field .5291) on the Military Service Data screen to
  "Yes", and the COMBAT TO DATE field (Patient file #2, field .5294) to a
  date after November 11, 1998, the COMBAT INDICATED ON 1010EZ field (file
  #2, field 1010.157) is not populated.  Therefore, the patient's printed
  10-10EZ will be blank in the area labeled "Did you serve in combat after
  11/11/98?".
  
  This patch will add the following trigger logic to populate the COMBAT
  INDICATED ON 1010EZ field:
  
  a) When the value of COMBAT SERVICE INDICATED? is changed to "No", the 
     value of COMBAT INDICATED ON 1010EZ will be changed to "No".
  
  b) When the value of COMBAT SERVICE INDICATED? is changed to "Yes" and
     the value of COMBAT TO DATE is less than or equal to 11/11/98, the
     value of COMBAT INDICATED ON 1010EZ will be changed to "No".
  
  c) When the value of COMBAT SERVICE INDICATED? is changed to "Yes" and
     the value of COMBAT TO DATE is greater than 11/11/98, the value of
     COMBAT INDICATED ON 1010EZ will be changed to "Yes".
  
  This patch's post-install will populate and correct the COMBAT INDICATED
  ON 1010EZ field in Patient file #2 for the appropriate patients based on
  the new trigger logic.  (Note:  Along with the 3 trigger logic statements
  mentioned above, this post-install will also set the COMBAT INDICATED ON
  1010EZ field to "Null" if the COMBAT SERVICE INDICATED? field is "Null".)
  
  This patch also corrects a minor bug in the Registration Means Test
  screen prompt to select a dependent from a numbered list.  The default 
  response displayed is "YES" or "NO" rather than a number associated with a
  dependent on the means test.
  
  
  II. ASSOCIATED REMEDY TICKETS & NEW SERVICE REQUESTS
  
  The following section lists the Remedy tickets and/or New Service Requests
  associated with this patch.
  
  Associated Remedy Tickets:
  --------------------------
  HD0000000090468 - Register Patient - MT - Expand Dependent Bug
  
  Problem:  Sometimes while using the DG Register Patient option, the Means
  Test dependent screen will display "NO" as the default response to select
  a dependent, instead of a number that corresponds to a selectable
  dependent.
  
  Solution:  There is a FileMan variable that is not being cleared.  Create
  a patch to reset that variable.
  
  
  HD0000000113796 - Did You Serve in Combat after 11/11/98 not printing on
                    10-10ez
  
  Problem:  Sometimes when printing the 10-10EZ, the question for "Did you
  serve in combat after 11/11/1998?" is not printing out after being entered
  by the user.
  
  Solution:  Triggers will be placed on the COMBAT SERVICE INDICATED? and
  COMBAT TO DATE fields to change the value in the COMBAT INDICATED ON
  1010EZ field to the correct value.
  
  
  Associated New Service Request(s):
  ----------------------------------
  NONE
  
  
  III. FUNCTIONAL OVERVIEW
  
  The following is an overview of the changes that will be delivered in this
  patch:
  
  When a patient's service data is entered, the COMBAT INDICATED ON 1010EZ
  field should reflect the data in the COMBAT SERVICE INDICATED? and COMBAT
  TO DATE fields.  This patch will add trigger logic to ensure that the
  fields are consistent between each other.
  
  Also, when a prompt is expecting a numeric value, the default answer being
  displayed should reflect that.  This patch will correct the default answer
  for the dependents on the Registration Means Test screen.
  
  
  IV. TECHNICAL COMPONENTS
  
  The following section describes the technical components being exported
  with this patch.
  
  The following ROUTINE(s) will be added/modified.
  
  ROUTINE SUMMARY:
  ================
  The following is a list of the routines included in this patch.  The
  second line of each of these routines now looks like:
  
      <tab>;;5.3;Registration;**[patch list]**;Aug 13,1993
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  DG53P733                   N/A              7861578             733
  DGDEPU                 2457699              2466614           45,733
  DGENDD                 1203246              1453446       121,351,503,733
  
  Total number of routines in patch:  3
         Number of routines changed:  2
             Number of new routines:  1
  
  
  The following is a list of fields included in this patch:
  
                Field Name (Number)    File Name (Number)
                -------------------    ------------------
  COMBAT SERVICE INDICATED? (.5291)    Patient (2)
             COMBAT TO DATE (.5294)    Patient (2)
  
  
  V. INSTALLATION INSTRUCTIONS
  
  Installation Steps:
  ===================
  * Users On the System:
     This patch may be installed with users on the system, but should be
     loaded during non-peak hours to minimize disruption to users and to
     reduce the possibility of errors when the routines are updated.
  
  * Software Installation Time:
     The estimated installation time is less than 5 minutes during off peak
     hours.
  
  1. Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload the
     KIDS distribution included with this message.
  
  2. From the 'Kernel Installation & Distribution System' menu, select the
     Installation menu.
  
  3. From this menu, you may now elect to use the following options (when
     prompted for INSTALL NAME, enter DG*5.3*733).
  
     a. Backup a Transport Global - This option will create a backup message
        of any routines exported with the patch.  It will NOT backup any
        changes such as DDs or templates.
  
     b. Compare Transport Global to Current System - This option will allow
        you to view all changes that will be made when the patch is
        installed.  It compares all components of the patch (routines, DDs,
        templates, etc.).
  
     c. Verify Checksums in Transport Global - This option will allow you
        to ensure the integrity of the routines that are in the transport
        global.
  
     d. Print Transport Global - this option will allow you to view the
        components of the KIDS build.
  
  4. Use the Install Package(s) option and select package DG*5.3*733.
  
  5. When prompted 'Want KIDS to INHIBIT LOGONs during the install?
     YES//', it is recommended you answer NO.
  
  6. When prompted to 'Want to DISABLE Scheduled Options, Menu Options,
     and Protocols? YES//', respond NO.
  
  
  Post-Install Cleanup:  Since the values in the COMBAT INDICATED ON 1010EZ
  fields may not be accurate (based upon the values in the COMBAT SERVICE
  INDICATED? and COMBAT TO DATE fields), a post-installation routine will
  check the values in the COMBAT INDICATED ON 1010EZ fields and correct them
  if necessary.  (Note:  Along with the 3 trigger logic statements mentioned
  above in the OVERVIEW, this post-install will also set the COMBAT
  INDICATED ON 1010EZ field to "Null" if the COMBAT SERVICE INDICATED? field
  is "Null".)
  
  The following messages will be displayed when installing this patch:
  
  POST-INSTALL CLEANUP MESSAGE QUEUED TO SEND
  
  Means Test database cleanup has been completed.  Check your VA Mailman
  mailbox for the "DG*5.3*733 External value cleanup" message.
  
  Only if you do not receive the e-mail, check the following global:
    ^XTMP("DG",<job number>,"PATCH 733 CLEANUP BULLETIN")
  
  
  This last message to check the ^XTMP global applies only if an e-mail is
  not received.  ^XTMP will contain any errors that may have occurred that
  would stop the processing, or prevent sending the e-mail.  (If an e-mail
  is received, ^XTMP will be deleted.)
  
  
  A mailman message will be sent to the patch installer detailing the
  records that were affected.  Example:
  
  Subj: DG*5.3*733 COMBAT INDICATED ON 1010EZ cleanup  [#41676]
  11/09/06@18:10   xx lines
  From: DG*5.3*733 INSTALL CLEANUP  In 'IN' basket.   Page 1  *New*
  --------------------------------------------------------------------------
  This message indicates the patients in the PATIENT file (2)
  that have had the COMBAT INDICATED ON 1010EZ field (1010.157)
  populated to the correct YES, NO or NULL value.
  
  Checking COMBAT INDICATED ON 1010EZ field (1010.157) in PATIENT file (2)...
  
  The COMBAT INDICATED ON 1010EZ field (#1010.157) for the following Patient
  file (#2) IENs were modified:
  
    IEN:  7168778    COMBAT INDICATED ON 1010EZ changed to:  NULL
    IEN:  7168779    COMBAT INDICATED ON 1010EZ changed to:  NO
    IEN:  7168783    COMBAT INDICATED ON 1010EZ changed to:  YES
  
  Enter message action (in IN basket): Ignore//
  
  
  VI. IMPLEMENTATION STEPS
  
  There are no special implementation steps to take after the successful
  installation of this software.  If, for any reason the post install's
  queued job (description of Taskman task will be "DG*5.3*733 Post-Install
  message") has to be stopped or needs to be restarted, this can be
  accomplished by executing the following from programmer mode:
  
  D EN^DG53P733  to queue the job to run
  D CLEANUP^DG53P733  to run the job without queuing
  
  Once the post-install runs to completion, the routine DG53P733 may be
  deleted.
  
  
  VII. TEST SITES
  
  The following sites participated in the testing of the DG*5.3*733
  software.
  
  Test Sites:
  ===========
  Amarillo (Medium)
  Bronx (Large)
  Chicago HCS (Integrated)
  Loma Linda (Large)
  

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: DG53P733
    Before:       n/a  After: B17745118  **733**
Routine Name: DGDEPU
    Before:  B3409637  After:  B3475639  **45,733**
Routine Name: DGENDD
    Before:  B5152913  After:  B7066164  **121,351,503,733**

=============================================================================
User Information:
Entered By  : ARNETTE,ANDY                  Date Entered  : OCT 18, 2006
Completed By: SADA,WILLIAM J                Date Completed: JAN 16, 2007
Released By : HEUER,CINDY                   Date Released : JAN 16, 2007
=============================================================================


Packman Mail Message:
=====================

$END TXT

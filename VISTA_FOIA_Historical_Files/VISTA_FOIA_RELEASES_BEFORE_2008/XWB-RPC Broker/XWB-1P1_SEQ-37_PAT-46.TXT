$TXT Created by FORT,WALLY at PAT-XWB.FO-OAKLAND.MED.VA.GOV  (KIDS) on Wednesday, 03/29/06 at 15:36
=============================================================================
Run Date: AUG 16, 2006                     Designation: XWB*1.1*46
Package : XWB - RPC BROKER                    Priority: Mandatory
Version : 1.1        SEQ #37                    Status: Released
                  Compliance Date: SEP 16, 2006
=============================================================================

Associated patches: (v)XWB*1.1*43  <<= must be installed BEFORE `XWB*1.1*46'

Subject: Remove string length limit.

Category: 
  - Routine

Description:
============

 Patch Tracking #: 42726424
 Test Sites: Huntington VAMC, Salisbury VAMC, West Palm Beach, FL
 Blood Bank Clearance: 05/11/2006
  
 HD: 132286
 The Mumps side of the Broker was truncating strings to 255 characters. This 
 was causing problems with some applications.
 Fix: Remove this server side limit and make the application responsible 
 to stay within the limits of the Mumps implantation.  
  
 Info: The client Delphi part currently uses a 3 digit value to specify the 
 length of each string being sent to the server, this creates a limit of 999 
 characters per string, but could be changed in the source code. By default 
 the data sent to the server is kept in memory so partition size creates 
 another limit on downloads. There is a option to download to a global, it 
 is then the application duty to see that the strings will fix in a global 
 node. The client Delphi code allocates a 32K buffer for the return data.
  
  
 =========================================================================
 VMS Sites: Only start the RPC Broker with the minimum required privileges!
 For more information on this topic, review AXP alert #97.
  
 >>>TaskMan does *not* need to be put into a wait state.
 >>>If you accept a slight risk of jobs getting a CLOBER/EDITED error
 >>>users and TaskMan may remain running.  Otherwise stop all other
 >>>jobs on the system.
 >>>Stop Broker users
 >>>Roll and Scroll Users may remain on the system.
  
 Installation:
  
    1.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
        option will load the KIDS package onto your system.
  
    2. Stop the Broker Listener on the server. 
       a. VMS site running listener as a service, on one node using sysman.
           At the sysman prompt (node1-n where listener runs): 
                     SET ENVIRONMENT/NODE=(<node1>,<node2>,<nodeN>)
                     DO TCPIP DISABLE SERVICE <servicename>
           or
       b. Listener not running as a service, and using the "controlled by 
              listener" parameter, use the Vista menu:
                        Stop All RPC Broker Listeners
           or
       c. Listener not running as a service and not using the "control by
          listener" parameter, on each node where listener runs and for each
          RPC port, at the programmer prompt:
                   D STOP^XWBTCP(<portnumber>) 
           
    3.  During the installation, do not run any RPC-Broker-based Client/Server
        software (e.g., CPRS, PCMM, BCMA).  No Broker-based client/server 
        software should be running while installing this patch on the 
        server.  You can identify these jobs by checking the system status 
        and verifying if any XWBTCP* routines are running (i.e., Broker 
        Handler).  If you find any of these jobs running on the system,  
        notify users to logoff or FORCEX the jobs.  Active users may get 
        NOSOURCE or CLOBBER errors.  
  
    4.  The patch has now been loaded into a Transport global on your
        system. Now you need to use KIDS to install the Transport global.
        On the KIDS menu, under the 'Installation' menu, use the following
        options:
  
          Verify Checksums in Transport Global
          Print Transport Global
          Compare Transport Global to Current System
          Backup a Transport Global
  
  
    5.  Roll and Scroll Users can remain on the system.
        TaskMan can remain running.
  
    6.  Installation will take less than 2 minutes.
        On the KIDS menu, under the 'Installation' menu, use the following
        option:
         Install Package(s)  'XWB*1.1*46'
                              ==========
  
      Want KIDS to INHIBIT LOGONs during the install? YES// NO
  
      Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
  
   8. Re-enable the TCPIP service.
       a. VMS site running listener as a service, on one node using Sysman
           At the SYSMAN prompt (node1-n where listener runs): 
                      SET ENVIRONMENT/NODE=(<node1>,<node2>,<nodeN>)
                      DO TCPIP ENABLE SERVICE <servicename>
           or
       b. VMS site not running listener as a service, on each node where
          listener runs
           At the Cache  prompt: 
                        D ^NVSSTB 
                       Select "Manually Start Broker Listener"
           or
       c. Windows/Cache  site, using the "controlled by listener" parameter:
          Use the Vista menu "Start All RPC Broker Listeners 
           or
       d. Windows/Cache  site, not using the "controlled by listener" parameter:
          From the programmer prompt on each node where the listener runs and 
          for each RPC port:
                        D STRT^XWBTCP(<portnumber>)
 ============================================================================
 Routine Summary
 The following routines are included in this patch.  The second line of each
 of these routines now looks like:
  ;;1.1;RPC BROKER;**[Patch List]**;Mar 28, 1997
  
                  Checksum
 Routine         Old       New      Patch List
 XWBPRS        6720418   6627284    **35,43,46**
  
 List of preceding patches: 43
 Sites should use CHECK^XTSUMBLD to verify checksums.
 ===========================================================================

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: XWBPRS
    Before: B39040367  After: B38623517  **35,43,46**

=============================================================================
User Information:
Entered By  : FORT,WALLY                    Date Entered  : MAR 28, 2006
Completed By: SINGH,GURBIR                  Date Completed: AUG 08, 2006
Released By : PALMER,MICHAEL                Date Released : AUG 16, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

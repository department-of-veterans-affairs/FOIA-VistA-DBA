$TXT Created by CHAN,ALAN at NXT.KERNEL.ISC-SF.VA.GOV  (KIDS) on MONDAY, 10/22/01 at 10:59
=============================================================================
Run Date: OCT 24, 2001                     Designation: HL*1.6*75
Package : HL - HEALTH LEVEL SEVEN            Priority: Mandatory
Version : 1.6        SEQ #68                    Status: Released
=============================================================================

Associated patches: (v)HL*1.6*57   <<= must be installed BEFORE `HL*1.6*75'

Subject: STARTING LOGICAL LINK AFTER ERROR

Category: 
  - Routine
  - Enhancement (Mandatory)

Description: 
============

 The test sites for Patch HL*1.6*75 are Bay Pines VAMC, Palo Alto VAMC, 
 and San Francisco VAMC.
  
  
 PATCH DESCRIPTION:
 ==================
  
 Currently if the System Link Monitor displays a client logical link in
 an Error STATE and you use the HL START option to attempt to start it
 back up, the option forces you to stop the process before you can re-
 enable it to continue the communication process.
  
 Note: Entries in the HL LOGICAL LINKS file (#870) that are in an Error 
       STATE can be identified on the System Link Monitor by the word 
       Error in the STATE column.
  
 The following is a screen capture of the HL7 System Link Monitor with a
 client logical link in an Error STATE.
  
  
 HL7 System Link Monitor
 =======================================================================
               SYSTEM LINK MONITOR for ISC SALT LAKE CITY (T System)
  
                 MESSAGES  MESSAGES   MESSAGES  MESSAGES  DEVICE  
      NODE       RECEIVED  PROCESSED  TO SEND   SENT      TYPE     STATE
  
      VADAN      38        38         38        38         NC      Error
  
  
  
  
      Incoming filers running => 1            TaskMan running 
      Outgoing filers running => 1            Link Manager running
  
      Select a Command:
  (N)EXT  (B)ACKUP  (A)LL LINKS  (S)CREENED  (V)IEWS  (Q)UIT  (?) HELP:
 =======================================================================
  
  
 The following screen capture shows the two steps required to re-enable 
 the client logical link (VADAN) shown in the previous screen capture.
  
  
 Step 1 (Screen Capture Begins Here)
 =======================================================================
       Select Communications Server Option:  Start/Stop Links 
  
       This option is used to launch the lower level protocol for the
       appropriate device.  Please select the node with which you want
       to communicate
  
       Select HL LOGICAL LINK NODE:    VADAN
  
       The LLP was last started on APR 14, 2000 11:20:58.
  
       Okay to shut down this job? YES
  
       The job for the VADAN Lower Level Protocol will be shut down.
 =======================================================================
 (Screen Capture Ends Here For Step 1)
  
  
 Step 2 (Screen Capture Begins Here)
 =======================================================================
  
       Select Communications Server Option:  Start/Stop Links
  
       This option is used to launch the lower level protocol for the
       appropriate device.  Please select the node with which you want
       to communicate
  
       Select HL LOGICAL LINK NODE:    VADAN
  
       The LLP was last shutdown on APR 17, 2000 13:32:47.
       This LLP has been enabled!
 =======================================================================
 (Screen Capture Ends Here For Step 2)
  
  
 Before this patch (Patch HL*1.6*75), using the option Start/Stop Links 
 to re-enable a client logical link in an Error STATE was a two-step 
 process. After this patch has been installed, using the option 
 Start/Stop Links to re-enable a client logical link in an Error STATE 
 will become a one-step process. However, this will only apply to client 
 logical links in which the SHUTDOWN LLP field is set to YES while in an 
 Error STATE. (See the following explanation "Description of What Causes 
 an Error State" for more information on Error States.)
  
  
 Description of What Causes an Error State
 =======================================================================
 Error STATEs can be related to retransmissions.  If the number of retry 
 attempts has been exceeded, an alert is sent and the word Error appears 
 in the STATE column on the System Link Monitor for that client logical 
 link. This relates to the EXCEED RE-TRANSMIT ACTION field (#200.021) in 
 the HL LOGICAL LINKS file. If the EXCEED RE-TRANSMIT ACTION field is 
 set to Restart, the client logical link quits and the Link Manager 
 queues (restarts) the link. If the EXCEED RE-TRANSMIT ACTION field is 
 set to Shutdown, then the client logical link quits and the Link 
 Manager will not attempt to restart the Link. In this particular case,
 the SHUTDOWN LLP field (#14) is set to YES in the HL LOGICAL LINKS 
 file.
  
 The other condition in which the value Error gets stuffed in the STATE 
 field (#4) is when the client logical link gets an unexpected error. If 
 the client logical link encounters an error other than the expected 
 errors: OPENERR, NOTOPEN, DEVNOTOPN, WRITE, or READ, it logs the error 
 in the error trap and shuts down the client logical link.
  
 In this case, the SHUTDOWN LLP field is set and the client logical link 
 has to be restarted manually.
 =======================================================================
  
  
 THIS PATCH ADDRESSES THE FOLLOWING ISSUE:
 =========================================
  
   1.  E3R #14227, MAKE HL START ALITTLE SMARTER  [#31168789]
  
  
 ROUTINE INFORMATION: 
 ====================
  
 The following routine is included in this patch. The second line of the 
 routine now looks like this: 
  
  ;;1.6;HEALTH LEVEL SEVEN;<patchlist>;Oct 13, 1995 
  
                  Checksum 
  Routine         Old         New            2nd Line  
  ========      ========     ========     ====================
  
  HLCSLNCH      12643769     13101795     **6,19,43,49,57,75**
  
  List of preceding patches: 57
  
  Sites should use CHECK^XTSUMBLD to verify checksums.  
  
  
 INSTALLATION INSTRUCTIONS: 
 ==========================
  
   1.  Users are allowed to be on the system during the installation.
  
   2.  DSM SITES: Review your mapped set.  If any of the routines listed 
       in the Routine Summary section are mapped, they should be removed 
       from the mapped set at this time.  
  
   3.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu. This 
       option will load the KIDS package onto your system.   
  
   4.  The patch has now been loaded into a Transport global on your 
       system. You now need to use KIDS to install the Transport global.
       To do this, on the KIDS menu under Installation, use the 
       following options: 
  
          2 Verify Checksums in Transport Global 
          3 Print Transport Global 
          4 Compare Transport Global to Current System 
          5 Backup a Transport Global 
          6 Install Package(s) 
  
              INSTALL NAME: HL*1.6*75 
  
                            =========
  
         Answer NO to the prompt 'Want KIDS to INHIBIT LOGONS during the 
         install?'.  
  
         Answer NO to the prompt 'Want to DISABLE Scheduled Options, 
         Menu Options'.
  
   5.  DSM Sites: Rebuild your mapped set if necessary.  

Routine Information:
====================

Routine Name:
  - HLCSLNCH


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : CHAN,ALAN                      Date Entered : FEB 02, 2001
Completed By: SINGH,GURBIR                  Date Completed: OCT 23, 2001
Released By : APOLONIO,AUGUSTO              Date Released : OCT 24, 2001
=============================================================================


Packman Mail Message:
=====================

$END TXT

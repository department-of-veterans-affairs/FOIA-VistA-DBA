Released XT*7.3*94 SEQ #75
Extracted from mail message
**KIDS**:XT*7.3*94^

**INSTALL NAME**
XT*7.3*94
"BLD",865,0)
XT*7.3*94^TOOLKIT^0^3050803^y
"BLD",865,1,0)
^^2^2^3050512^
"BLD",865,1,1,0)
Kernel Toolkit patch XT*7.3*94 New CheckSum. Please refer
"BLD",865,1,2,0)
to the Description in Forum Patch Module for details.
"BLD",865,4,0)
^9.64PA^^
"BLD",865,"ABPKG")
n
"BLD",865,"INID")
^y
"BLD",865,"INIT")
EN^XT73P94
"BLD",865,"KRN",0)
^9.67PA^8989.52^19
"BLD",865,"KRN",.4,0)
.4
"BLD",865,"KRN",.401,0)
.401
"BLD",865,"KRN",.402,0)
.402
"BLD",865,"KRN",.403,0)
.403
"BLD",865,"KRN",.5,0)
.5
"BLD",865,"KRN",.84,0)
.84
"BLD",865,"KRN",3.6,0)
3.6
"BLD",865,"KRN",3.8,0)
3.8
"BLD",865,"KRN",9.2,0)
9.2
"BLD",865,"KRN",9.8,0)
9.8
"BLD",865,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",865,"KRN",9.8,"NM",1,0)
XTSUMBLD^^0^27011734
"BLD",865,"KRN",9.8,"NM","B","XTSUMBLD",1)

"BLD",865,"KRN",19,0)
19
"BLD",865,"KRN",19.1,0)
19.1
"BLD",865,"KRN",101,0)
101
"BLD",865,"KRN",409.61,0)
409.61
"BLD",865,"KRN",771,0)
771
"BLD",865,"KRN",870,0)
870
"BLD",865,"KRN",8989.51,0)
8989.51
"BLD",865,"KRN",8989.52,0)
8989.52
"BLD",865,"KRN",8994,0)
8994
"BLD",865,"KRN","B",.4,.4)

"BLD",865,"KRN","B",.401,.401)

"BLD",865,"KRN","B",.402,.402)

"BLD",865,"KRN","B",.403,.403)

"BLD",865,"KRN","B",.5,.5)

"BLD",865,"KRN","B",.84,.84)

"BLD",865,"KRN","B",3.6,3.6)

"BLD",865,"KRN","B",3.8,3.8)

"BLD",865,"KRN","B",9.2,9.2)

"BLD",865,"KRN","B",9.8,9.8)

"BLD",865,"KRN","B",19,19)

"BLD",865,"KRN","B",19.1,19.1)

"BLD",865,"KRN","B",101,101)

"BLD",865,"KRN","B",409.61,409.61)

"BLD",865,"KRN","B",771,771)

"BLD",865,"KRN","B",870,870)

"BLD",865,"KRN","B",8989.51,8989.51)

"BLD",865,"KRN","B",8989.52,8989.52)

"BLD",865,"KRN","B",8994,8994)

"INIT")
EN^XT73P94
"MBREQ")
0
"PKG",6,-1)
1^1
"PKG",6,0)
TOOLKIT^XT^PROGRAMMERS OPTIONS, MULTI. TERM LOOKUP^
"PKG",6,20,0)
^9.402P^^0
"PKG",6,22,0)
^9.49I^1^1
"PKG",6,22,1,0)
7.3^3040428^2970513^2
"PKG",6,22,1,"PAH",1,0)
94^3050803
"PKG",6,22,1,"PAH",1,1,0)
^^2^2^3050803
"PKG",6,22,1,"PAH",1,1,1,0)
Kernel Toolkit patch XT*7.3*94 New CheckSum. Please refer
"PKG",6,22,1,"PAH",1,1,2,0)
to the Description in Forum Patch Module for details.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","XT73P94")
0^^B791087
"RTN","XT73P94",1,0)
XT73P94 ;BT-BP/OAK - POST ROUTINE; [5/12/05 9:58am]
"RTN","XT73P94",2,0)
 ;;7.3;TOOLKIT;**94**;Apr 25, 1995
"RTN","XT73P94",3,0)
 Q
"RTN","XT73P94",4,0)
EN ;
"RTN","XT73P94",5,0)
 S ^%ZOSF("RSUM1")="ZL @X S Y=0 F %=1,3:1 S %1=$T(+%),%3=$F(%1,"" "") Q:'%3  S %3=$S($E(%1,%3)'="";"":$L(%1),$E(%1,%3+1)="";"":$L(%1),1:%3-2) F %2=1:1:%3 S Y=$A(%1,%2)*(%2+%)+Y"
"RTN","XT73P94",6,0)
 Q
"RTN","XTSUMBLD")
0^1^B27011734
"RTN","XTSUMBLD",1,0)
XTSUMBLD ;SF/RWF - BUILD PACKAGE INTEG ROUTINE ; [8/3/05 4:45am]
"RTN","XTSUMBLD",2,0)
 ;;7.3;TOOLKIT;**11,20,66,70,94**;Apr 25, 1995
"RTN","XTSUMBLD",3,0)
A ;
"RTN","XTSUMBLD",4,0)
 K ^UTILITY($J),DIR D MSG
"RTN","XTSUMBLD",5,0)
 S DIR(0)="SM^P:Package;B:Build",DIR("A")="Build from" D ^DIR K DIR Q:X[U
"RTN","XTSUMBLD",6,0)
 G PKG:Y="P",BUILD:Y="B" Q
"RTN","XTSUMBLD",7,0)
PKG W !!,"This will build a checksum routine for a package from the package file",!
"RTN","XTSUMBLD",8,0)
 S DIC=9.4,DIC(0)="AEMQZ" D ^DIC G EXIT:Y'>0
"RTN","XTSUMBLD",9,0)
 D NAME($P(Y(0),U,2)) G EXIT:'$D(XTRNAME)
"RTN","XTSUMBLD",10,0)
 X ^%ZOSF("RSEL") G EXIT:$O(^UTILITY($J,""))=""
"RTN","XTSUMBLD",11,0)
 G BLD
"RTN","XTSUMBLD",12,0)
 ;
"RTN","XTSUMBLD",13,0)
BUILD W !!,"This will build a checksum routine from the BUILD file."
"RTN","XTSUMBLD",14,0)
 S DIC="^XPD(9.6,",DIC(0)="AEMQZ" D ^DIC G EXIT:Y'>0 S BLDA=+Y
"RTN","XTSUMBLD",15,0)
 I $P(Y(0),U,2)'>0 W !!,"There isn't a package file pointer." G EXIT
"RTN","XTSUMBLD",16,0)
 S X=$P(^DIC(9.4,+$P(Y(0),U,2),0),U,2) D NAME(X) G EXIT:'$D(XTRNAME)
"RTN","XTSUMBLD",17,0)
 F IX=0:0 S IX=$O(^XPD(9.6,BLDA,"KRN",9.8,"NM",IX)) Q:IX'>0  S X=^(IX,0) S:'$P(X,U,3) ^UTILITY($J,$P(X,U))=""
"RTN","XTSUMBLD",18,0)
 F IX="INI","INIT","PRE" S X=$G(^XPD(9.6,BLDA,IX)) I X]"" S ^UTILITY($J,$S(X[U:$P(X,U,2),1:X))=""
"RTN","XTSUMBLD",19,0)
 G EXIT:$O(^UTILITY($J,""))=""
"RTN","XTSUMBLD",20,0)
 G BLD
"RTN","XTSUMBLD",21,0)
 ;
"RTN","XTSUMBLD",22,0)
NAME(Y) S XTRNAME=Y_"NTEG" W !,"I will create a routine ",XTRNAME
"RTN","XTSUMBLD",23,0)
 S X=XTRNAME X ^%ZOSF("TEST") I $T S DIR(0)="YA",DIR("A")="But you already have one on file!  OK to replace? ",DIR("B")="NO" D ^DIR I Y'=1 K XTRNAME
"RTN","XTSUMBLD",24,0)
 Q
"RTN","XTSUMBLD",25,0)
 ;
"RTN","XTSUMBLD",26,0)
BLD S X=XTRNAME F I=0:0 K ^UTILITY($J,X) S X=$O(^UTILITY($J,X)) Q:X'[XTRNAME
"RTN","XTSUMBLD",27,0)
 I $O(^UTILITY($J,""))="" W !,"Routine list is empty" G EXIT
"RTN","XTSUMBLD",28,0)
 W !,"Calculating check-sums" S XTDT=$$NOW^XLFDT()
"RTN","XTSUMBLD",29,0)
 S X=" " F I=0:0 S X=$O(^UTILITY($J,X)) Q:X=""  D
"RTN","XTSUMBLD",30,0)
 . W !,X X ^%ZOSF("TEST") I '$T W ?10,"Routine not in this UCI." Q
"RTN","XTSUMBLD",31,0)
 . X ^%ZOSF("RSUM") S ^UTILITY($J,X)=Y Q
"RTN","XTSUMBLD",32,0)
 W !,"Building routine" S RN=" ",XTRNCNT=0
"RTN","XTSUMBLD",33,0)
B K ^UTILITY($J,0) S XTSIZE=0,XCN=0,DIE="^UTILITY($J,0,",XTRNEXT=$E(XTRNAME,1,7)_XTRNCNT,XTRNCNT=XTRNCNT+1
"RTN","XTSUMBLD",34,0)
 F I=1:1 S XT=$P($T(ROU+I),";;",2,99) D ADD Q:$E(XT,1,3)="ROU"
"RTN","XTSUMBLD",35,0)
 S @(DIE_"1,0)")=XTRNAME_$P($T(ROU+1),";;",2)_XTDT,@(DIE_"3,0)")=" ;;"_$P($T(+2),";",3)_";"_XTDT
"RTN","XTSUMBLD",36,0)
 F I=0:0 S RN=$O(^UTILITY($J,RN)) Q:RN=""  S %=^(RN),XT=RN_" ;;"_% D ADD Q:XTSIZE>3700
"RTN","XTSUMBLD",37,0)
 I RN]"" S @(DIE_"6,0)")=" G CONT^"_XTRNEXT
"RTN","XTSUMBLD",38,0)
 S XCN=0,X=XTRNAME W !!,"Filing routine ",XTRNAME X ^%ZOSF("SAVE") S XTRNAME=XTRNEXT G:RN]"" B
"RTN","XTSUMBLD",39,0)
 W !,"  DONE",!
"RTN","XTSUMBLD",40,0)
EXIT K ^UTILITY($J),DIC,DIR,XCN,XTRNAME,XTRNCNT,XU1,XTSIZE,XTDT,DIE,XTRNEXT,XT,X,Y
"RTN","XTSUMBLD",41,0)
 Q
"RTN","XTSUMBLD",42,0)
ADD S XCN=XCN+1,XTSIZE=XTSIZE+$L(XT)+2,@(DIE_XCN_",0)")=XT Q
"RTN","XTSUMBLD",43,0)
 Q
"RTN","XTSUMBLD",44,0)
CHECK ;Print the values of a set of routines.
"RTN","XTSUMBLD",45,0)
 N XPCH,X,DIR D MSG
"RTN","XTSUMBLD",46,0)
 S DIR(0)="SM^P:Package;B:Build",DIR("A")="Build from" D ^DIR K DIR Q:X[U
"RTN","XTSUMBLD",47,0)
 G CHKPKG:Y="P",CHKBLD:Y="B" Q
"RTN","XTSUMBLD",48,0)
CHKPKG W !! K ^UTILITY($J) X ^%ZOSF("RSEL") I $O(^UTILITY($J,0))']"" W !!,"NO SELECTED ROUTINES" G EXIT
"RTN","XTSUMBLD",49,0)
CHK2 S X=" " F XU1=0:0 S X=$O(^UTILITY($J,X)) Q:X']""  D
"RTN","XTSUMBLD",50,0)
 . W !,X,?10 X ^%ZOSF("TEST") I '$T W "Routine not in this UCI." Q
"RTN","XTSUMBLD",51,0)
 . I $G(XUCHFLG)=1 X ^%ZOSF("RSUM1") W "value = ",Y
"RTN","XTSUMBLD",52,0)
 . E  X ^%ZOSF("RSUM") W "value = ",Y
"RTN","XTSUMBLD",53,0)
 . I $D(XPCH) X XPCH
"RTN","XTSUMBLD",54,0)
 . Q
"RTN","XTSUMBLD",55,0)
 W !,"done" G EXIT
"RTN","XTSUMBLD",56,0)
CHKBLD W !!,"This will check the routines from a BUILD file."
"RTN","XTSUMBLD",57,0)
 S DIC="^XPD(9.6,",DIC(0)="AEMQZ" D ^DIC G EXIT:Y'>0
"RTN","XTSUMBLD",58,0)
 S BLDA=+Y,X=$P(Y,"^",2)
"RTN","XTSUMBLD",59,0)
 I X["*" S XPCH="S L=$T(+2^@X) I $P(L,"";"",5)'?.E1P1"""_$P(X,"*",3)_"""1P.E W ?30,""Missing patch number"""
"RTN","XTSUMBLD",60,0)
 F IX=0:0 S IX=$O(^XPD(9.6,BLDA,"KRN",9.8,"NM",IX)) Q:IX'>0  S X=^(IX,0) S:'$P(X,U,3) ^UTILITY($J,$P(X,U))=""
"RTN","XTSUMBLD",61,0)
 F IX="INI","INIT","PRE" S X=$G(^XPD(9.6,BLDA,IX)) I X]"" S ^UTILITY($J,$S(X[U:$P(X,U,2),1:X))=""
"RTN","XTSUMBLD",62,0)
 G EXIT:$O(^UTILITY($J,""))=""
"RTN","XTSUMBLD",63,0)
 G CHK2
"RTN","XTSUMBLD",64,0)
 ;
"RTN","XTSUMBLD",65,0)
MSG W !!,"This option determines the current checksum of selected routine(s)."
"RTN","XTSUMBLD",66,0)
 W !,"The Checksum of the routine is determined as follows:",!
"RTN","XTSUMBLD",67,0)
 W !,"1. Any comment line with a single semi-colon is presumed to be"
"RTN","XTSUMBLD",68,0)
 W !,"   followed by comments and only the line tag will be included."
"RTN","XTSUMBLD",69,0)
 W !!,"2. Line 2 will be excluded from the count.",!
"RTN","XTSUMBLD",70,0)
 W !,"3. The total value of the routine is determined (excluding"
"RTN","XTSUMBLD",71,0)
 W !,"   exceptions noted above) by multiplying the ASCII value of each"
"RTN","XTSUMBLD",72,0)
 W !,"   character by its position on the line "
"RTN","XTSUMBLD",73,0)
 I $G(XUCHFLG)=1 W "and position of the line in ",!,"   the routine "
"RTN","XTSUMBLD",74,0)
 W "being checked."
"RTN","XTSUMBLD",75,0)
 Q
"RTN","XTSUMBLD",76,0)
 ;
"RTN","XTSUMBLD",77,0)
CHECK1 ;New CheckSum logic
"RTN","XTSUMBLD",78,0)
 W !,"New CheckSum CHECK1^XTSUMBLD:"
"RTN","XTSUMBLD",79,0)
 N XUCHFLG S XUCHFLG=1 D CHECK
"RTN","XTSUMBLD",80,0)
 Q
"RTN","XTSUMBLD",81,0)
ROU ;;
"RTN","XTSUMBLD",82,0)
 ;; ;ISC/XTSUMBLD KERNEL - Package checksum checker ;
"RTN","XTSUMBLD",83,0)
 ;; ;;0.0;
"RTN","XTSUMBLD",84,0)
 ;; ;;7.3;10/1/94
"RTN","XTSUMBLD",85,0)
 ;; S XT4="I 1",X=$T(+3) W !!,"Checksum routine created on ",$P(X,";",4)," by KERNEL V",$P(X,";",3),!
"RTN","XTSUMBLD",86,0)
 ;;CONT F XT1=1:1 S XT2=$T(ROU+XT1) Q:XT2=""  S X=$P(XT2," ",1),XT3=$P(XT2,";",3) X XT4 I $T W !,X X ^%ZOSF("TEST") S:'$T XT3=0 X:XT3 ^%ZOSF("RSUM") W ?10,$S('XT3:"Routine not in UCI",XT3'=Y:"Calculated "_$C(7)_Y_", off by "_(Y-XT3),1:"ok")
"RTN","XTSUMBLD",87,0)
 ;; ;
"RTN","XTSUMBLD",88,0)
 ;; K %1,%2,%3,X,Y,XT1,XT2,XT3,XT4 Q
"RTN","XTSUMBLD",89,0)
 ;;ONE S XT4="I $D(^UTILITY($J,X))",X=$T(+3) W !!,"Checksum routine created on ",$P(X,";",4)," by KERNEL V",$P(X,";",3),!
"RTN","XTSUMBLD",90,0)
 ;; W !,"Check a subset of routines:" K ^UTILITY($J) X ^%ZOSF("RSEL")
"RTN","XTSUMBLD",91,0)
 ;; W ! G CONT
"RTN","XTSUMBLD",92,0)
 ;;ROU ;;
"VER")
8.0^22.0
"BLD",865,6)
^SEQ #75
**END**
**END**

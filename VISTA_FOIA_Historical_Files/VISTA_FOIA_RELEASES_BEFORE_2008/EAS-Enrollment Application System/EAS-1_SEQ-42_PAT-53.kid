Released EAS*1*53 SEQ #42
Extracted from mail message
**KIDS**:EAS*1.0*53^

**INSTALL NAME**
EAS*1.0*53
"BLD",4921,0)
EAS*1.0*53^ENROLLMENT APPLICATION SYSTEM^0^3040525^y
"BLD",4921,4,0)
^9.64PA^712^1
"BLD",4921,4,712,0)
712
"BLD",4921,4,712,2,0)
^9.641^712^1
"BLD",4921,4,712,2,712,0)
1010EZ HOLDING  (File-top level)
"BLD",4921,4,712,2,712,1,0)
^9.6411^9.1^6
"BLD",4921,4,712,2,712,1,3,0)
ENTRY DATE
"BLD",4921,4,712,2,712,1,4,0)
DATE SIGNED BY APPLICANT
"BLD",4921,4,712,2,712,1,5.1,0)
REVIEW DATE
"BLD",4921,4,712,2,712,1,6.1,0)
PRINT DATE
"BLD",4921,4,712,2,712,1,7.1,0)
FILING DATE
"BLD",4921,4,712,2,712,1,9.1,0)
CLOSE DATE
"BLD",4921,4,712,222)
y^n^p^^^^n^^n
"BLD",4921,4,712,224)

"BLD",4921,4,"APDD",712,712)

"BLD",4921,4,"APDD",712,712,3)

"BLD",4921,4,"APDD",712,712,4)

"BLD",4921,4,"APDD",712,712,5.1)

"BLD",4921,4,"APDD",712,712,6.1)

"BLD",4921,4,"APDD",712,712,7.1)

"BLD",4921,4,"APDD",712,712,9.1)

"BLD",4921,4,"B",712,712)

"BLD",4921,"INID")
^n
"BLD",4921,"INIT")
POST^EAS1P53
"BLD",4921,"KRN",0)
^9.67PA^8989.52^19
"BLD",4921,"KRN",.4,0)
.4
"BLD",4921,"KRN",.401,0)
.401
"BLD",4921,"KRN",.402,0)
.402
"BLD",4921,"KRN",.403,0)
.403
"BLD",4921,"KRN",.5,0)
.5
"BLD",4921,"KRN",.84,0)
.84
"BLD",4921,"KRN",3.6,0)
3.6
"BLD",4921,"KRN",3.8,0)
3.8
"BLD",4921,"KRN",9.2,0)
9.2
"BLD",4921,"KRN",9.8,0)
9.8
"BLD",4921,"KRN",9.8,"NM",0)
^9.68A^4^3
"BLD",4921,"KRN",9.8,"NM",1,0)
EASEZU2^^0^B35044402
"BLD",4921,"KRN",9.8,"NM",3,0)
EASEZU6^^0^B63532959
"BLD",4921,"KRN",9.8,"NM",4,0)
EAS1P53^^0^B3517973
"BLD",4921,"KRN",9.8,"NM","B","EAS1P53",4)

"BLD",4921,"KRN",9.8,"NM","B","EASEZU2",1)

"BLD",4921,"KRN",9.8,"NM","B","EASEZU6",3)

"BLD",4921,"KRN",19,0)
19
"BLD",4921,"KRN",19.1,0)
19.1
"BLD",4921,"KRN",101,0)
101
"BLD",4921,"KRN",409.61,0)
409.61
"BLD",4921,"KRN",771,0)
771
"BLD",4921,"KRN",870,0)
870
"BLD",4921,"KRN",8989.51,0)
8989.51
"BLD",4921,"KRN",8989.52,0)
8989.52
"BLD",4921,"KRN",8994,0)
8994
"BLD",4921,"KRN","B",.4,.4)

"BLD",4921,"KRN","B",.401,.401)

"BLD",4921,"KRN","B",.402,.402)

"BLD",4921,"KRN","B",.403,.403)

"BLD",4921,"KRN","B",.5,.5)

"BLD",4921,"KRN","B",.84,.84)

"BLD",4921,"KRN","B",3.6,3.6)

"BLD",4921,"KRN","B",3.8,3.8)

"BLD",4921,"KRN","B",9.2,9.2)

"BLD",4921,"KRN","B",9.8,9.8)

"BLD",4921,"KRN","B",19,19)

"BLD",4921,"KRN","B",19.1,19.1)

"BLD",4921,"KRN","B",101,101)

"BLD",4921,"KRN","B",409.61,409.61)

"BLD",4921,"KRN","B",771,771)

"BLD",4921,"KRN","B",870,870)

"BLD",4921,"KRN","B",8989.51,8989.51)

"BLD",4921,"KRN","B",8989.52,8989.52)

"BLD",4921,"KRN","B",8994,8994)

"BLD",4921,"QUES",0)
^9.62^^
"BLD",4921,"REQB",0)
^9.611^^
"FIA",712)
1010EZ HOLDING
"FIA",712,0)
^EAS(712,
"FIA",712,0,0)
712
"FIA",712,0,1)
y^n^p^^^^n^^n
"FIA",712,0,10)

"FIA",712,0,11)

"FIA",712,0,"RLRO")

"FIA",712,0,"VR")
1.0^EAS
"FIA",712,712)
1
"FIA",712,712,3)

"FIA",712,712,4)

"FIA",712,712,5.1)

"FIA",712,712,6.1)

"FIA",712,712,7.1)

"FIA",712,712,9.1)

"INIT")
POST^EAS1P53
"MBREQ")
0
"PKG",477,-1)
1^1
"PKG",477,0)
ENROLLMENT APPLICATION SYSTEM^EAS^ENROLLMENT
"PKG",477,20,0)
^9.402P^1^1
"PKG",477,20,1,0)
2^^EASXDR
"PKG",477,20,1,1)
 
"PKG",477,20,"B",2,1)

"PKG",477,22,0)
^9.49I^1^1
"PKG",477,22,1,0)
1.0^3010315^3010328^66476
"PKG",477,22,1,"PAH",1,0)
53^3040525
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","EAS1P53")
0^4^B3517973
"RTN","EAS1P53",1,0)
EAS1P53 ;ALB/jap - POST-INSTALLATION FOR EAS*1*53 ;05/17/2004
"RTN","EAS1P53",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**53**;Mar 15, 2001
"RTN","EAS1P53",3,0)
 ;
"RTN","EAS1P53",4,0)
POST ;entry point for installation
"RTN","EAS1P53",5,0)
 N XTIME,X1,X2,ZTRTN,ZTDESC,ZTDTH,ZTSAVE,ZTSK
"RTN","EAS1P53",6,0)
 S X1=DT,X2=1 D C^%DTC
"RTN","EAS1P53",7,0)
 S (ZTDTH,XTIME)=X_".030000"
"RTN","EAS1P53",8,0)
 S ZTIO="",ZTDESC="POST_INSTALLATION CLEANUP FOR EAS*1*53"
"RTN","EAS1P53",9,0)
 S ZTRTN="QUE^EAS1P53"
"RTN","EAS1P53",10,0)
 D ^%ZTLOAD
"RTN","EAS1P53",11,0)
 I $G(ZTSK) D
"RTN","EAS1P53",12,0)
 .S Y=XTIME D DD^%DT S XTIME=Y
"RTN","EAS1P53",13,0)
 .W !,"Post-installation file #712 x-ref clean-up queued for"
"RTN","EAS1P53",14,0)
 .W !,XTIME_" as Task #"_ZTSK_"."
"RTN","EAS1P53",15,0)
 .H 3
"RTN","EAS1P53",16,0)
 Q
"RTN","EAS1P53",17,0)
 ;
"RTN","EAS1P53",18,0)
QUE ;entry point for TaskManager
"RTN","EAS1P53",19,0)
 N A,NETNAME,NOW,R712,TOT,XMSUB,XMDUZ,XMTEXT,XMY,XMZ,Y
"RTN","EAS1P53",20,0)
 ;delete existing x-refs for status
"RTN","EAS1P53",21,0)
 F A="NEW","REV","PRT","SIG","FIL","CLS" K ^EAS(712,A)
"RTN","EAS1P53",22,0)
 ;
"RTN","EAS1P53",23,0)
 ;reset all x-refs for status
"RTN","EAS1P53",24,0)
 S TOT=0
"RTN","EAS1P53",25,0)
 S R712=0 F  S R712=$O(^EAS(712,R712)) Q:'R712  D APPINDEX^EASEZU2(R712) S TOT=TOT+1
"RTN","EAS1P53",26,0)
 ;
"RTN","EAS1P53",27,0)
 ;send completion msg
"RTN","EAS1P53",28,0)
 S Y=$$NOW^XLFDT() D DD^%DT S NOW=Y
"RTN","EAS1P53",29,0)
 S NETNAME=^XMB("NETNAME")
"RTN","EAS1P53",30,0)
 S ^TMP("1010EZ",$J,1)="Post-installation cross-reference clean-up of file #712"
"RTN","EAS1P53",31,0)
 S ^TMP("1010EZ",$J,2)="for EAS*1*53 completed successfully at "_NOW
"RTN","EAS1P53",32,0)
 S ^TMP("1010EZ",$J,3)="by Task #"_$G(ZTSK)_"."
"RTN","EAS1P53",33,0)
 S ^TMP("1010EZ",$J,4)=" "
"RTN","EAS1P53",34,0)
 S ^TMP("1010EZ",$J,5)="Total entries in file #712 re-indexed: "_TOT
"RTN","EAS1P53",35,0)
 S XMSUB="EAS*1*53 POST-INSTALL COMPLETE",XMDUZ=.5
"RTN","EAS1P53",36,0)
 S XMY(DUZ)=""
"RTN","EAS1P53",37,0)
 S XMY("G.VA1010EZ@"_NETNAME)=""
"RTN","EAS1P53",38,0)
 S XMTEXT="^TMP(""1010EZ"",$J,"
"RTN","EAS1P53",39,0)
 D ^XMD
"RTN","EAS1P53",40,0)
 K ^TMP("1010EZ",$J)
"RTN","EAS1P53",41,0)
 Q
"RTN","EASEZU2")
0^1^B35044402
"RTN","EASEZU2",1,0)
EASEZU2 ;ALB/jap - Utilities for 1010EZ Processing ;10/13/00  10:53
"RTN","EASEZU2",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**53**;Mar 15, 2001
"RTN","EASEZU2",3,0)
 ;
"RTN","EASEZU2",4,0)
PICKALL(EASVIEW) ;For processing status selected, pick-up all records in #712
"RTN","EASEZU2",5,0)
 ;Loop through Application Holding file #712 for status selected
"RTN","EASEZU2",6,0)
 N APP,FAC,INDEX,JDATE,DAT0,NAME,SSN,VETTYPE,FDAYS,WEBID,WILLSEND,ENTRY,EDATE,X,Y,I,J,T,V,X1,X2,X3
"RTN","EASEZU2",7,0)
 Q:'EASVIEW  Q:EASVIEW>6
"RTN","EASEZU2",8,0)
 K ^TMP($J,712,EASVIEW)
"RTN","EASEZU2",9,0)
 ;index to search depends on status selected for viewing
"RTN","EASEZU2",10,0)
 S V=EASVIEW,INDEX=$S(V=1:"NEW",V=2:"REV",V=3:"PRT",V=4:"SIG",V=5:"FIL",V=6:"CLS",1:"")
"RTN","EASEZU2",11,0)
 Q:V=""  Q:INDEX=""
"RTN","EASEZU2",12,0)
 S I=INDEX D
"RTN","EASEZU2",13,0)
 .;use the index to get each application in selected status
"RTN","EASEZU2",14,0)
 .;here JDATE is the date on which the application reached status of interest
"RTN","EASEZU2",15,0)
 .S JDATE=0 F  S JDATE=$O(^EAS(712,I,JDATE)) Q:'JDATE  S APP=0 F  S APP=$O(^EAS(712,I,JDATE,APP)) Q:'APP  D
"RTN","EASEZU2",16,0)
 ..S DAT0=$G(^EAS(712,APP,0)),NAME=$P(DAT0,U,4),ENTRY=$P(DAT0,U,6),SSN=$P($P(DAT0,U,5),"&",1),T=$P(DAT0,U,9)
"RTN","EASEZU2",17,0)
 ..S WEBID=$P(DAT0,U,2),WILLSEND=$P(DAT0,U,13)
"RTN","EASEZU2",18,0)
 ..S FAC=$P($G(^EAS(712,APP,1)),U,6) S:FAC="" FAC=1
"RTN","EASEZU2",19,0)
 ..;don't include filed apps if filed more than 30 days ago. 
"RTN","EASEZU2",20,0)
 ..S FDAYS=0 I (INDEX="FIL")!(INDEX="CLS") S X2=JDATE,X1=DT D ^%DTC S FDAYS=X
"RTN","EASEZU2",21,0)
 ..I FDAYS>30 K ^EAS(712,INDEX,JDATE,APP)
"RTN","EASEZU2",22,0)
 ..Q:FDAYS>30
"RTN","EASEZU2",23,0)
 ..;avoid any stub entries
"RTN","EASEZU2",24,0)
 ..Q:NAME=""
"RTN","EASEZU2",25,0)
 ..S Y=ENTRY,%F=2,EDATE=$$FMTE^XLFDT(Y,%F) I $L(EDATE)<10 D
"RTN","EASEZU2",26,0)
 ...S X1=$P(EDATE,"/",1),X2=$P(EDATE,"/",2),X3=$P(EDATE,"/",3)
"RTN","EASEZU2",27,0)
 ...S:$L(X1)=1 X1="0"_X1 S:$L(X2)=1 X2="0"_X2
"RTN","EASEZU2",28,0)
 ...S EDATE=X1_"/"_X2_"/"_X3
"RTN","EASEZU2",29,0)
 ..S VETTYPE=$S(T=1:"SC 50-100%",T=2:"SC <50%",T=3:"SC 0%",T=4:"POW",T=5:"PURPLE HEART",T=6:"MIL. RETIREE",T=7:"NSC",1:"")
"RTN","EASEZU2",30,0)
 ..S ^TMP($J,712,EASVIEW,FAC,NAME,ENTRY,APP)=APP_U_SSN_U_VETTYPE_U_EDATE_U_JDATE_U_WEBID_U_WILLSEND_U_FAC
"RTN","EASEZU2",31,0)
 Q
"RTN","EASEZU2",32,0)
 ;
"RTN","EASEZU2",33,0)
SETDATE(EASAPP,INDEX) ;update fields & indexes associated with processing status
"RTN","EASEZU2",34,0)
 ;
"RTN","EASEZU2",35,0)
 N DA,DR,DIE
"RTN","EASEZU2",36,0)
 S DA=EASAPP,DIE="^EAS(712,"
"RTN","EASEZU2",37,0)
 I INDEX="REV" S DR="5.1///^S X=DT;5.2////^S X=DUZ" D ^DIE,REINDEX^EASEZU2(EASAPP,INDEX) Q
"RTN","EASEZU2",38,0)
 I INDEX="PRT" S DR="6.1///^S X=DT;6.2////^S X=DUZ" D ^DIE,REINDEX^EASEZU2(EASAPP,INDEX) Q
"RTN","EASEZU2",39,0)
 I INDEX="SIG" S DR="4///^S X=DT;4.1///^S X=DT;4.2////^S X=DUZ" D ^DIE,REINDEX^EASEZU2(EASAPP,INDEX) Q
"RTN","EASEZU2",40,0)
 I INDEX="FIL" S DR="7.1///^S X=DT;7.2////^S X=DUZ" D ^DIE,REINDEX^EASEZU2(EASAPP,INDEX) Q
"RTN","EASEZU2",41,0)
 I INDEX="CLS" S DR="9.1///^S X=DT;9.2////^S X=DUZ" D ^DIE,REINDEX^EASEZU2(EASAPP,INDEX) Q
"RTN","EASEZU2",42,0)
 Q
"RTN","EASEZU2",43,0)
 ;
"RTN","EASEZU2",44,0)
APPINDEX(EASAPP) ;Check file #712 processing index for Application
"RTN","EASEZU2",45,0)
 ;get determining date and remove any index entries no longer current
"RTN","EASEZU2",46,0)
 N CLSDATE,FILDATE,SIGDATE,PRTDATE,REVDATE,NEWDATE
"RTN","EASEZU2",47,0)
 S CLSDATE=$P($G(^EAS(712,EASAPP,2)),U,9) I CLSDATE D REINDEX(EASAPP,"CLS",CLSDATE) Q
"RTN","EASEZU2",48,0)
 S FILDATE=$P($G(^EAS(712,EASAPP,2)),U,5) I FILDATE D REINDEX(EASAPP,"FIL",FILDATE) Q
"RTN","EASEZU2",49,0)
 S SIGDATE=$P($G(^EAS(712,EASAPP,1)),U,1) I SIGDATE D REINDEX(EASAPP,"SIG",SIGDATE) Q
"RTN","EASEZU2",50,0)
 S PRTDATE=$P($G(^EAS(712,EASAPP,2)),U,3) I PRTDATE D REINDEX(EASAPP,"PRT",PRTDATE) Q
"RTN","EASEZU2",51,0)
 S REVDATE=$P($G(^EAS(712,EASAPP,2)),U,1) I REVDATE D REINDEX(EASAPP,"REV",REVDATE) Q
"RTN","EASEZU2",52,0)
 S NEWDATE=$P($G(^EAS(712,EASAPP,0)),U,6) I NEWDATE D REINDEX(EASAPP,"NEW",NEWDATE) Q
"RTN","EASEZU2",53,0)
 Q
"RTN","EASEZU2",54,0)
 ;
"RTN","EASEZU2",55,0)
REINDEX(EASAPP,EASINDEX,THISDATE) ;Remove previous index for Application upon processing status change
"RTN","EASEZU2",56,0)
 ;There are 6 critical indexes maintained on file #712 to indicate processing status.
"RTN","EASEZU2",57,0)
 ;   "NEW" -- New applications; uses field #3, ENTRY DATE
"RTN","EASEZU2",58,0)
 ;   "REV" -- In Review applications; uses field #5.1, REVIEW DATE
"RTN","EASEZU2",59,0)
 ;   "PRT" -- Printed/Awaiting Signature applications; uses field #6.1, PRINT DATE
"RTN","EASEZU2",60,0)
 ;   "SIG" -- Signed applications; uses field #4, DATE SIGNED BY APPLICANT
"RTN","EASEZU2",61,0)
 ;   "FIL" -- Filed applications; uses field #7.1, FILING DATE
"RTN","EASEZU2",62,0)
 ;   "CLS" -- Closed/inactivated applications; uses field #9.1, CLOSE DATE
"RTN","EASEZU2",63,0)
 ;
"RTN","EASEZU2",64,0)
 ;When a date is initially entered into one of the fields listed above, FM updates the
"RTN","EASEZU2",65,0)
 ;   the index as needed; this function removes the "old" index entry for the application.
"RTN","EASEZU2",66,0)
 ;
"RTN","EASEZU2",67,0)
 ;Once a date has been entered into one of the fields listed above, repeated actions
"RTN","EASEZU2",68,0)
 ;   of the same type do not update the field with a new date; therefore, a new index
"RTN","EASEZU2",69,0)
 ;   entry won't be created.
"RTN","EASEZU2",70,0)
 ;   For example: The first time the 1010EZ application is Printed for Signature
"RTN","EASEZU2",71,0)
 ;                field #6.1 is updated and FM creates the index entry in "PRT",
"RTN","EASEZU2",72,0)
 ;                and this function is called to remove the old "REV" index entry;
"RTN","EASEZU2",73,0)
 ;                If the 1010EZ is Printed again sometime later, say after it has
"RTN","EASEZU2",74,0)
 ;                already been Filed, that Print action will not update field #6.1
"RTN","EASEZU2",75,0)
 ;
"RTN","EASEZU2",76,0)
 ;input 
"RTN","EASEZU2",77,0)
 ;   EASAPP   = ien in file #712 for Application
"RTN","EASEZU2",78,0)
 ;   EASINDEX = index for current processing status
"RTN","EASEZU2",79,0)
 ;   THISDATE = date to be used to set cross-reference; [optional]
"RTN","EASEZU2",80,0)
 ;              internal FM format
"RTN","EASEZU2",81,0)
 ;output
"RTN","EASEZU2",82,0)
 ;   none
"RTN","EASEZU2",83,0)
 ;
"RTN","EASEZU2",84,0)
 N DATE
"RTN","EASEZU2",85,0)
 ;
"RTN","EASEZU2",86,0)
 ;set appropriate index if necessary
"RTN","EASEZU2",87,0)
 I $G(THISDATE) S ^EAS(712,EASINDEX,THISDATE,EASAPP)=""
"RTN","EASEZU2",88,0)
 ;
"RTN","EASEZU2",89,0)
 I EASINDEX="NEW" D  Q
"RTN","EASEZU2",90,0)
 .;get REVIEW DATE
"RTN","EASEZU2",91,0)
 .S DATE=$P($G(^EAS(712,EASAPP,2)),U,1)
"RTN","EASEZU2",92,0)
 .I DATE K ^EAS(712,"REV",DATE,EASAPP)
"RTN","EASEZU2",93,0)
 .;get PRINT DATE
"RTN","EASEZU2",94,0)
 .S DATE=$P($G(^EAS(712,EASAPP,2)),U,3)
"RTN","EASEZU2",95,0)
 .I DATE K ^EAS(712,"PRT",DATE,EASAPP)
"RTN","EASEZU2",96,0)
 ;
"RTN","EASEZU2",97,0)
 I EASINDEX="REV" D  Q
"RTN","EASEZU2",98,0)
 .;get ENTRY DATE
"RTN","EASEZU2",99,0)
 .S DATE=$P($G(^EAS(712,EASAPP,0)),U,6)
"RTN","EASEZU2",100,0)
 .I DATE K ^EAS(712,"NEW",DATE,EASAPP)
"RTN","EASEZU2",101,0)
 ;
"RTN","EASEZU2",102,0)
 I EASINDEX="PRT" D  Q
"RTN","EASEZU2",103,0)
 .;get REVIEW DATE
"RTN","EASEZU2",104,0)
 .S DATE=$P($G(^EAS(712,EASAPP,2)),U,1)
"RTN","EASEZU2",105,0)
 .I DATE K ^EAS(712,"REV",DATE,EASAPP)
"RTN","EASEZU2",106,0)
 ;
"RTN","EASEZU2",107,0)
 I EASINDEX="SIG" D  Q
"RTN","EASEZU2",108,0)
 .;get REVIEW DATE
"RTN","EASEZU2",109,0)
 .S DATE=$P($G(^EAS(712,EASAPP,2)),U,1)
"RTN","EASEZU2",110,0)
 .I DATE K ^EAS(712,"REV",DATE,EASAPP)
"RTN","EASEZU2",111,0)
 .;get PRINT DATE
"RTN","EASEZU2",112,0)
 .S DATE=$P($G(^EAS(712,EASAPP,2)),U,3)
"RTN","EASEZU2",113,0)
 .I DATE K ^EAS(712,"PRT",DATE,EASAPP)
"RTN","EASEZU2",114,0)
 ;
"RTN","EASEZU2",115,0)
 I EASINDEX="FIL" D  Q
"RTN","EASEZU2",116,0)
 .;get PRINT DATE
"RTN","EASEZU2",117,0)
 .S DATE=$P($G(^EAS(712,EASAPP,2)),U,3)
"RTN","EASEZU2",118,0)
 .I DATE K ^EAS(712,"PRT",DATE,EASAPP)
"RTN","EASEZU2",119,0)
 .;get DATE SIGNED BY APPLICANT
"RTN","EASEZU2",120,0)
 .S DATE=$P($G(^EAS(712,EASAPP,1)),U,1)
"RTN","EASEZU2",121,0)
 .I DATE K ^EAS(712,"SIG",DATE,EASAPP)
"RTN","EASEZU2",122,0)
 ;
"RTN","EASEZU2",123,0)
 I EASINDEX="CLS" D  Q
"RTN","EASEZU2",124,0)
 .;get ENTRY DATE
"RTN","EASEZU2",125,0)
 .S DATE=$P($G(^EAS(712,EASAPP,0)),U,6)
"RTN","EASEZU2",126,0)
 .I DATE K ^EAS(712,"NEW",DATE,EASAPP)
"RTN","EASEZU2",127,0)
 .;get REVIEW DATE
"RTN","EASEZU2",128,0)
 .S DATE=$P($G(^EAS(712,EASAPP,2)),U,1)
"RTN","EASEZU2",129,0)
 .I DATE K ^EAS(712,"REV",DATE,EASAPP)
"RTN","EASEZU2",130,0)
 .;get PRINT DATE
"RTN","EASEZU2",131,0)
 .S DATE=$P($G(^EAS(712,EASAPP,2)),U,3)
"RTN","EASEZU2",132,0)
 .I DATE K ^EAS(712,"PRT",DATE,EASAPP)
"RTN","EASEZU2",133,0)
 ;
"RTN","EASEZU2",134,0)
 Q
"RTN","EASEZU2",135,0)
 ;
"RTN","EASEZU2",136,0)
CURRSTAT(EASAPP) ;Check file #712 processing index for Application
"RTN","EASEZU2",137,0)
 ;return current Application status
"RTN","EASEZU2",138,0)
 N CLSDATE,FILDATE,SIGDATE,PRTDATE,REVDATE,NEWDATE
"RTN","EASEZU2",139,0)
 S CLSDATE=$P($G(^EAS(712,EASAPP,2)),U,9) I CLSDATE Q "CLS"
"RTN","EASEZU2",140,0)
 S FILDATE=$P($G(^EAS(712,EASAPP,2)),U,5) I FILDATE Q "FIL"
"RTN","EASEZU2",141,0)
 S SIGDATE=$P($G(^EAS(712,EASAPP,1)),U,1) I SIGDATE Q "SIG"
"RTN","EASEZU2",142,0)
 S PRTDATE=$P($G(^EAS(712,EASAPP,2)),U,3) I PRTDATE Q "PRT"
"RTN","EASEZU2",143,0)
 S REVDATE=$P($G(^EAS(712,EASAPP,2)),U,1) I REVDATE Q "REV"
"RTN","EASEZU2",144,0)
 S NEWDATE=$P($G(^EAS(712,EASAPP,0)),U,6) I NEWDATE Q "NEW"
"RTN","EASEZU2",145,0)
 Q ""
"RTN","EASEZU2",146,0)
 ;
"RTN","EASEZU2",147,0)
LOCAL711 ;set up TMP global array
"RTN","EASEZU2",148,0)
 ;to hold file #711 & file #712 correlated data; and a useful index
"RTN","EASEZU2",149,0)
 N IEN,DIC,DIE,DA,DR,DLAYGO,DINUM,X,Y,DATANM,DATAKEY,DISPNM,FILE,SUBF,FLD,GRP
"RTN","EASEZU2",150,0)
 ;make sure 'unknown' is in #711
"RTN","EASEZU2",151,0)
 K ^TMP("EZDATA",$J),^TMP("EZINDEX",$J)
"RTN","EASEZU2",152,0)
 I '$D(^EAS(711,.1,0)) D
"RTN","EASEZU2",153,0)
 .S DIC="^EAS(711,",DIC(0)="L",DLAYGO="",X="UNKNOWN",DINUM=.1
"RTN","EASEZU2",154,0)
 .K DD,DO D FILE^DICN
"RTN","EASEZU2",155,0)
 I $D(^EAS(711,.1,0)) D
"RTN","EASEZU2",156,0)
 .S DA=.1
"RTN","EASEZU2",157,0)
 .S DIE="^EAS(711,",DR=".1///^S X=""UNKNOWN"";1///^S X=""A"";2///^S X=0;3///^S X=0;4///^S X=0"
"RTN","EASEZU2",158,0)
 .D ^DIE
"RTN","EASEZU2",159,0)
 ;pick up records from "ACTIVE" index
"RTN","EASEZU2",160,0)
 S IEN=0 F  S IEN=$O(^EAS(711,"A","A",IEN)) Q:'IEN  D
"RTN","EASEZU2",161,0)
 .S DATAKEY=$P(^EAS(711,IEN,0),U,2),X=$G(^EAS(711,IEN,1)),FILE=$P(X,U,1),SUBF=$P(X,U,2),FLD=$P(X,U,3) S:SUBF="" SUBF=FILE
"RTN","EASEZU2",162,0)
 .S DATANM=$P($G(^EAS(711,IEN,0)),U,1),DISPNM=$G(^EAS(711,IEN,2))
"RTN","EASEZU2",163,0)
 .S ^TMP("EZDATA",$J,IEN)=X_U_DATAKEY_U_DISPNM
"RTN","EASEZU2",164,0)
 .S GRP=$S(DATANM["SPOUSE":"S",DATANM["CHILD1":"C1",DATANM["CHILD(N)":"CN",1:"A")
"RTN","EASEZU2",165,0)
 .S ^TMP("EZINDEX",$J,GRP,FILE,SUBF,FLD,IEN)=IEN_U_DATANM
"RTN","EASEZU2",166,0)
 Q
"RTN","EASEZU6")
0^3^B63532959
"RTN","EASEZU6",1,0)
EASEZU6 ;ALB/jap - Utilities for 1010EZ Processing ;10/31/00  13:08
"RTN","EASEZU6",2,0)
 ;;1.0;ENROLLMENT APPLICATION SYSTEM;**53**;Mar 15, 2001
"RTN","EASEZU6",3,0)
 ;
"RTN","EASEZU6",4,0)
ANAME(EASLN,LN,DATANM) ;special update logic for Names     
"RTN","EASEZU6",5,0)
 ;output UPDATE = new data entered by user thru input transform
"RTN","EASEZU6",6,0)
 ;
"RTN","EASEZU6",7,0)
 N SUBIEN,MULTIPLE,KEYIEN,DKEY,SECT,QUES,ORIGINAL,TYPE,XPART,KEY,SUB,NAME,UNAME,UPDATE,DIR,DIRUT,DTOUT,DUOUT,X,Y
"RTN","EASEZU6",8,0)
 S SUBIEN=$P(LN,U,1),MULTIPLE=$P(LN,U,2),KEYIEN=$P(LN,U,3)
"RTN","EASEZU6",9,0)
 S DKEY=$P($G(^TMP("EZDATA",$J,KEYIEN)),U,4),SECT=$P(DKEY,";",1),QUES=$P(DKEY,";",2)
"RTN","EASEZU6",10,0)
 S X=$G(^TMP("EZTEMP",$J,SECT,MULTIPLE,QUES))
"RTN","EASEZU6",11,0)
 Q:$P(X,U,1)'=KEYIEN
"RTN","EASEZU6",12,0)
 S ORIGINAL=$P(X,U,2) K X
"RTN","EASEZU6",13,0)
 ;user may update each name part
"RTN","EASEZU6",14,0)
 S TYPE=$P(DATANM," ",1)_" "
"RTN","EASEZU6",15,0)
 F XPART="LAST","FIRST","MIDDLE","SUFFIX" D  Q:($D(DTOUT)!$D(DUOUT))
"RTN","EASEZU6",16,0)
 .;have keyien & subien (above) for last name, but need to get for each part
"RTN","EASEZU6",17,0)
 .S KEY=+$$KEY711^EASEZU1(TYPE_XPART_" NAME")
"RTN","EASEZU6",18,0)
 .Q:KEY<1
"RTN","EASEZU6",19,0)
 .;get name part & make sure it's all uppercase
"RTN","EASEZU6",20,0)
 .S X=$$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE)
"RTN","EASEZU6",21,0)
 .S NAME(XPART)=$$UC^EASEZT1($P(X,U,1)),SUB(XPART)=$P(X,U,2) K X
"RTN","EASEZU6",22,0)
 .S DIR("A")=TYPE_XPART_" NAME"
"RTN","EASEZU6",23,0)
 .I XPART="LAST" S DIR("??")="No punctuation is allowed other than ""-"" in a hyphenated name."
"RTN","EASEZU6",24,0)
 .E  S DIR("??")="No punctuation or numerics are allowed."
"RTN","EASEZU6",25,0)
 .S X=$G(^EAS(711,KEY,3)) I X'="" X X
"RTN","EASEZU6",26,0)
 .;1st piece of DIR contains 'O', input is optional
"RTN","EASEZU6",27,0)
 .S:$G(DIR(0))="" DIR(0)="FO^1:30^K:X'?.A X"
"RTN","EASEZU6",28,0)
 .D ^DIR
"RTN","EASEZU6",29,0)
 .;don't continue if user exited w/o input
"RTN","EASEZU6",30,0)
 .Q:($D(DTOUT)!$D(DUOUT))
"RTN","EASEZU6",31,0)
 .;pickup the DIR output
"RTN","EASEZU6",32,0)
 .S UPDATE=$$UC^EASEZT1($G(Y)),UNAME(XPART)=UPDATE
"RTN","EASEZU6",33,0)
 .I UNAME(XPART)="" S UNAME(XPART)=$G(NAME(XPART))
"RTN","EASEZU6",34,0)
 Q:($D(DTOUT)!$D(DUOUT))
"RTN","EASEZU6",35,0)
 K DIR,DTOUT,DUOUT,DIRUT
"RTN","EASEZU6",36,0)
 ;file data element; a manually updated element is always 'accepted'
"RTN","EASEZU6",37,0)
 F XPART="LAST","FIRST","MIDDLE","SUFFIX" D
"RTN","EASEZU6",38,0)
 .Q:$G(UNAME(XPART))=$G(NAME(XPART))  Q:$G(UNAME(XPART))=""
"RTN","EASEZU6",39,0)
 .S DIE="^EAS(712,EASAPP,10,",DA=SUB(XPART),DA(1)=EASAPP,DR(1)="10;"
"RTN","EASEZU6",40,0)
 .S DR="1///^S X=UNAME(XPART);1.1///^S X=1;1.2///^S X=DT;1.3////^S X=DUZ"
"RTN","EASEZU6",41,0)
 .D ^DIE
"RTN","EASEZU6",42,0)
 ;put together updated full name
"RTN","EASEZU6",43,0)
 S X=UNAME("LAST")_","_UNAME("FIRST")
"RTN","EASEZU6",44,0)
 I $G(UNAME("MIDDLE"))'="" D
"RTN","EASEZU6",45,0)
 .I $L(X)+$L(UNAME("MIDDLE"))>45 S MDL=$E(UNAME("MIDDLE"),1),X=X_" "_MDL
"RTN","EASEZU6",46,0)
 .E  S X=X_" "_UNAME("MIDDLE")
"RTN","EASEZU6",47,0)
 I $G(UNAME("SUFFIX"))'="" S X=X_" "_UNAME("SUFFIX")
"RTN","EASEZU6",48,0)
 S UPDATE=X
"RTN","EASEZU6",49,0)
 S VALMBCK="R"
"RTN","EASEZU6",50,0)
 ;update screen list
"RTN","EASEZU6",51,0)
 Q:UPDATE=ORIGINAL
"RTN","EASEZU6",52,0)
 D FLDTEXT^VALM10(EASLN,"EZDATA",UPDATE)
"RTN","EASEZU6",53,0)
 D FLDCTRL^VALM10(EASLN,"EZDATA",IORVON,IORVOFF)
"RTN","EASEZU6",54,0)
 D WRITE^VALM10(EASLN)
"RTN","EASEZU6",55,0)
 Q
"RTN","EASEZU6",56,0)
 ;
"RTN","EASEZU6",57,0)
APHONE(EASLN,LN,DATANM) ;special update logic for Phone Numbers
"RTN","EASEZU6",58,0)
 ;
"RTN","EASEZU6",59,0)
 N SUBIEN,MULTIPLE,KEYIEN,DKEY,SECT,QUES,ORIGINAL,TYPE,XPART,KEY,SUB,PHONE,UPHONE,UPDATE,DIR,DIRUT,DTOUT,DUOUT,X,Y
"RTN","EASEZU6",60,0)
 S SUBIEN=$P(LN,U,1),MULTIPLE=$P(LN,U,2),KEYIEN=$P(LN,U,3)
"RTN","EASEZU6",61,0)
 S DKEY=$P($G(^TMP("EZDATA",$J,KEYIEN)),U,4),SECT=$P(DKEY,";",1),QUES=$P(DKEY,";",2)
"RTN","EASEZU6",62,0)
 S X=$G(^TMP("EZTEMP",$J,SECT,MULTIPLE,QUES))
"RTN","EASEZU6",63,0)
 Q:$P(X,U,1)'=KEYIEN
"RTN","EASEZU6",64,0)
 S ORIGINAL=$P(X,U,2) K X
"RTN","EASEZU6",65,0)
 ;user may update each phone number part
"RTN","EASEZU6",66,0)
 S TYPE=$P(DATANM," ",1,3)_" "
"RTN","EASEZU6",67,0)
 F XPART="AREA CODE","NUMBER","EXTENSION" D  Q:($D(DTOUT)!$D(DUOUT))
"RTN","EASEZU6",68,0)
 .;have keyien & subien (above) for area code, but need to get for each part
"RTN","EASEZU6",69,0)
 .S KEY=+$$KEY711^EASEZU1(TYPE_XPART)
"RTN","EASEZU6",70,0)
 .Q:KEY<1
"RTN","EASEZU6",71,0)
 .;get phone number part
"RTN","EASEZU6",72,0)
 .S X=$$DATA712^EASEZU1(EASAPP,KEY,MULTIPLE)
"RTN","EASEZU6",73,0)
 .S PHONE(XPART)=$P(X,U,1),SUB(XPART)=$P(X,U,2) K X
"RTN","EASEZU6",74,0)
 .S DIR("A")=TYPE_XPART
"RTN","EASEZU6",75,0)
 .I XPART="NUMBER" S DIR("?")="Use format nnn-nnnn.  Example: 222-1234"
"RTN","EASEZU6",76,0)
 .I XPART="EXTENSION" S DIR("?")="Use up to 5 digits; no other characters.  Example: 12345"
"RTN","EASEZU6",77,0)
 .S X=$G(^EAS(711,KEY,3)) I X'="" X X
"RTN","EASEZU6",78,0)
 .;1st piece of DIR contains 'O', input is optional
"RTN","EASEZU6",79,0)
 .S:$G(DIR(0))="" DIR(0)="FO^1:8"
"RTN","EASEZU6",80,0)
 .D ^DIR
"RTN","EASEZU6",81,0)
 .;don't continue if user exited w/o input
"RTN","EASEZU6",82,0)
 .Q:($D(DTOUT)!$D(DUOUT))
"RTN","EASEZU6",83,0)
 .;pickup the DIR output
"RTN","EASEZU6",84,0)
 .S UPDATE=$G(Y),UPHONE(XPART)=UPDATE
"RTN","EASEZU6",85,0)
 .I UPHONE(XPART)="" S UPHONE(XPART)=$G(PHONE(XPART))
"RTN","EASEZU6",86,0)
 Q:($D(DTOUT)!$D(DUOUT))
"RTN","EASEZU6",87,0)
 K DIR,DTOUT,DUOUT,DIRUT
"RTN","EASEZU6",88,0)
 ;file data element; a manually updated element is always 'accepted'
"RTN","EASEZU6",89,0)
 F XPART="AREA CODE","NUMBER","EXTENSION" D
"RTN","EASEZU6",90,0)
 .Q:$G(UPHONE(XPART))=$G(PHONE(XPART))  Q:$G(UPHONE(XPART))=""
"RTN","EASEZU6",91,0)
 .S DIE="^EAS(712,EASAPP,10,",DA=SUB(XPART),DA(1)=EASAPP,DR(1)="10;"
"RTN","EASEZU6",92,0)
 .S DR="1///^S X=UPHONE(XPART);1.1///^S X=1;1.2///^S X=DT;1.3////^S X=DUZ"
"RTN","EASEZU6",93,0)
 .D ^DIE
"RTN","EASEZU6",94,0)
 ;put together updated full phone number
"RTN","EASEZU6",95,0)
 S X=$G(UPHONE("NUMBER"))
"RTN","EASEZU6",96,0)
 I $G(UPHONE("AREA CODE")) S X="("_UPHONE("AREA CODE")_")"_X
"RTN","EASEZU6",97,0)
 I $G(UPHONE("EXTENSION"))'="" S X=X_" X"_UPHONE("EXTENSION")
"RTN","EASEZU6",98,0)
 S UPDATE=X
"RTN","EASEZU6",99,0)
 S VALMBCK="R"
"RTN","EASEZU6",100,0)
 ;update screen list
"RTN","EASEZU6",101,0)
 Q:UPDATE=ORIGINAL
"RTN","EASEZU6",102,0)
 D FLDTEXT^VALM10(EASLN,"EZDATA",UPDATE)
"RTN","EASEZU6",103,0)
 D FLDCTRL^VALM10(EASLN,"EZDATA",IORVON,IORVOFF)
"RTN","EASEZU6",104,0)
 D WRITE^VALM10(EASLN)
"RTN","EASEZU6",105,0)
 Q
"RTN","EASEZU6",106,0)
 ;
"RTN","EASEZU6",107,0)
ASTATE(EASLN,LN,DATANM) ;special update logic for any STATE
"RTN","EASEZU6",108,0)
 ;
"RTN","EASEZU6",109,0)
 N I,SUBIEN,MULTIPLE,KEYIEN,ORIGINAL,IEN,ABBR,AB,ZX,OUT,UPDATE,DIR,DIRUT,DTOUT,DUOUT,X,Y
"RTN","EASEZU6",110,0)
 S SUBIEN=$P(LN,U,1),MULTIPLE=$P(LN,U,2),KEYIEN=$P(LN,U,3)
"RTN","EASEZU6",111,0)
 S ORIGINAL=$P($G(^TMP("EZDATA",$J,KEYIEN,MULTIPLE,1)),U,1)
"RTN","EASEZU6",112,0)
 S DIR("A")=DATANM
"RTN","EASEZU6",113,0)
 S DIR(0)="P^5:EMZ"
"RTN","EASEZU6",114,0)
 D ^DIR
"RTN","EASEZU6",115,0)
 ;don't continue if user exited w/o input
"RTN","EASEZU6",116,0)
 Q:($D(DTOUT)!$D(DUOUT))
"RTN","EASEZU6",117,0)
 K DIR,DTOUT,DUOUT,DIRUT
"RTN","EASEZU6",118,0)
 ;pickup the DIR output
"RTN","EASEZU6",119,0)
 S UPDATE=$P($G(Y(0)),U,1)
"RTN","EASEZU6",120,0)
 ;don't continue if no data
"RTN","EASEZU6",121,0)
 Q:UPDATE=""
"RTN","EASEZU6",122,0)
 ;don't continue if no change to data
"RTN","EASEZU6",123,0)
 Q:UPDATE=ORIGINAL
"RTN","EASEZU6",124,0)
 S IEN=$P(Y,U,1)
"RTN","EASEZU6",125,0)
 S ABBR=$P($G(^DIC(5,IEN,0)),U,2)
"RTN","EASEZU6",126,0)
 ;make sure abbrev. matches web-based app
"RTN","EASEZU6",127,0)
 S OUT=0 F I=1:1 S X=$P($T(STDAT+I),";;",2) Q:X="QUIT"  Q:OUT  D
"RTN","EASEZU6",128,0)
 .S AB=$P(X,";",1),ZX=$P(X,";",2)
"RTN","EASEZU6",129,0)
 .I (ZX[UPDATE)!(UPDATE[ZX) S ABBR=AB,OUT=1
"RTN","EASEZU6",130,0)
 ;file data element; a manually updated element is always 'accepted'
"RTN","EASEZU6",131,0)
 S DIE="^EAS(712,EASAPP,10,",DA=SUBIEN,DA(1)=EASAPP,DR(1)="10;"
"RTN","EASEZU6",132,0)
 S DR="1///^S X=ABBR;1.1///^S X=1;1.2///^S X=DT;1.3////^S X=DUZ"
"RTN","EASEZU6",133,0)
 D ^DIE
"RTN","EASEZU6",134,0)
 S VALMBCK="R"
"RTN","EASEZU6",135,0)
 ;update screen list
"RTN","EASEZU6",136,0)
 D FLDTEXT^VALM10(EASLN,"EZDATA",UPDATE)
"RTN","EASEZU6",137,0)
 D FLDCTRL^VALM10(EASLN,"EZDATA",IORVON,IORVOFF)
"RTN","EASEZU6",138,0)
 D WRITE^VALM10(EASLN)
"RTN","EASEZU6",139,0)
 Q
"RTN","EASEZU6",140,0)
 ;
"RTN","EASEZU6",141,0)
STDAT ;
"RTN","EASEZU6",142,0)
 ;;AS;AMERICAN SAMOA
"RTN","EASEZU6",143,0)
 ;;DC;DISTRICT OF COLUMBIA
"RTN","EASEZU6",144,0)
 ;;FM;FEDERATED STATES OF MICRONESIA
"RTN","EASEZU6",145,0)
 ;;GU;GUAM
"RTN","EASEZU6",146,0)
 ;;MH;MARSHALL ISLANDS
"RTN","EASEZU6",147,0)
 ;;MP;NORTHERN MARIANA ISLANDS
"RTN","EASEZU6",148,0)
 ;;PW;PALAU (TRUST TERRITORY)
"RTN","EASEZU6",149,0)
 ;;PR;PUERTO RICO
"RTN","EASEZU6",150,0)
 ;;VI;VIRGIN ISLANDS
"RTN","EASEZU6",151,0)
 ;;QUIT
"RTN","EASEZU6",152,0)
 ;
"RTN","EASEZU6",153,0)
ACOUNTY(EASLN,LN,DATANM) ;special update logic for COUNTY
"RTN","EASEZU6",154,0)
 ;
"RTN","EASEZU6",155,0)
 N SUBIEN,MULTIPLE,KEYIEN,ORIGINAL,KEY,ABBR,STATE,SIEN,CIEN,CCODE,ROOT,UPDATE,DIR,DIRUT,DTOUT,DUOUT,X,Y
"RTN","EASEZU6",156,0)
 S LN=^TMP("EASEXP",$J,"IDX",EASLN),SUBIEN=$P(LN,U,1),MULTIPLE=$P(LN,U,2),KEYIEN=$P(LN,U,3)
"RTN","EASEZU6",157,0)
 S ORIGINAL=$P($G(^TMP("EZDATA",$J,KEYIEN,MULTIPLE,1)),U,1)
"RTN","EASEZU6",158,0)
 S KEY=+$$KEY711^EASEZU1("APPLICANT STATE")
"RTN","EASEZU6",159,0)
 Q:'KEY
"RTN","EASEZU6",160,0)
 S ABBR="",STATE="",SIEN="",CIEN="",CCODE=""
"RTN","EASEZU6",161,0)
 I KEY D
"RTN","EASEZU6",162,0)
 .S ABBR=$P($$DATA712^EASEZU1(EASAPP,KEY,1),U,1)
"RTN","EASEZU6",163,0)
 .I ABBR'="" S STATE=$$STATE^EASEZT1(ABBR)
"RTN","EASEZU6",164,0)
 .I STATE'="" S SIEN=$O(^DIC(5,"B",STATE,0))
"RTN","EASEZU6",165,0)
 Q:'SIEN
"RTN","EASEZU6",166,0)
 S ROOT="DIC(5,"_SIEN_",1,"
"RTN","EASEZU6",167,0)
 S DIR("A")=DATANM
"RTN","EASEZU6",168,0)
 S DIR(0)="P"_U_ROOT_":QEMZ"
"RTN","EASEZU6",169,0)
 D ^DIR
"RTN","EASEZU6",170,0)
 ;don't continue if user exited w/o input
"RTN","EASEZU6",171,0)
 Q:($D(DTOUT)!$D(DUOUT))
"RTN","EASEZU6",172,0)
 K DIR,DTOUT,DUOUT,DIRUT
"RTN","EASEZU6",173,0)
 ;pickup the DIR output
"RTN","EASEZU6",174,0)
 S UPDATE=$P($G(Y(0)),U,1)
"RTN","EASEZU6",175,0)
 ;don't continue if no data
"RTN","EASEZU6",176,0)
 Q:UPDATE=""
"RTN","EASEZU6",177,0)
 S CIEN=$P(Y,U,1) I CIEN'="" S CCODE=$P($G(^DIC(5,SIEN,1,CIEN,0)),U,3)
"RTN","EASEZU6",178,0)
 S COUNTY=UPDATE I CCODE'="" S UPDATE=UPDATE_" ("_CCODE_")"
"RTN","EASEZU6",179,0)
 ;don't continue if no change to data
"RTN","EASEZU6",180,0)
 Q:UPDATE=ORIGINAL
"RTN","EASEZU6",181,0)
 ;file data element; a manually updated element is always 'accepted'
"RTN","EASEZU6",182,0)
 S DIE="^EAS(712,EASAPP,10,",DA=SUBIEN,DA(1)=EASAPP,DR(1)="10;"
"RTN","EASEZU6",183,0)
 S DR="1///^S X=COUNTY;1.1///^S X=1;1.2///^S X=DT;1.3////^S X=DUZ"
"RTN","EASEZU6",184,0)
 D ^DIE
"RTN","EASEZU6",185,0)
 S VALMBCK="R"
"RTN","EASEZU6",186,0)
 ;update screen list
"RTN","EASEZU6",187,0)
 D FLDTEXT^VALM10(EASLN,"EZDATA",UPDATE)
"RTN","EASEZU6",188,0)
 D FLDCTRL^VALM10(EASLN,"EZDATA",IORVON,IORVOFF)
"RTN","EASEZU6",189,0)
 D WRITE^VALM10(EASLN)
"RTN","EASEZU6",190,0)
 Q
"RTN","EASEZU6",191,0)
 ;
"RTN","EASEZU6",192,0)
ASSN(EASLN,LN,DATANM,ACCEPT) ;special update logic for Spouse/Dependent SSN
"RTN","EASEZU6",193,0)
 N OUT,DIR,DIRUT,DTOUT,DUOUT,UPDATE,LINK13,OTHER,RESULT
"RTN","EASEZU6",194,0)
 ;only used if DATANM["SOCIAL SECURITY NUMBER" and FILE'=2
"RTN","EASEZU6",195,0)
 S OUT=0,UPDATE="" F  D  Q:OUT
"RTN","EASEZU6",196,0)
 .S DIR("A")=DATANM
"RTN","EASEZU6",197,0)
 .S DIR(0)="F^11:11^K:X'?3N1""-""2N1""-""4N X",DIR("?")="Use format nnn-nnn-nnn.  Example: ***********"
"RTN","EASEZU6",198,0)
 .D ^DIR
"RTN","EASEZU6",199,0)
 .I $D(DIRUT) S OUT=1 Q
"RTN","EASEZU6",200,0)
 .I ($D(DTOUT)!$D(DUOUT)) S OUT=1 Q
"RTN","EASEZU6",201,0)
 .;pickup the DIR output
"RTN","EASEZU6",202,0)
 .S UPDATE=$P($G(Y(0)),U,1) S:UPDATE="" UPDATE=$P($G(Y),U,1)
"RTN","EASEZU6",203,0)
 .;don't continue if no data
"RTN","EASEZU6",204,0)
 .I UPDATE="" S OUT=1 Q
"RTN","EASEZU6",205,0)
 .S UPDATE=$TR(UPDATE,"-","")
"RTN","EASEZU6",206,0)
 .S LINK13=$P($G(^EAS(712,EASAPP,10,SUBIEN,2)),U,2)
"RTN","EASEZU6",207,0)
 .S RESULT="",OTHER=0
"RTN","EASEZU6",208,0)
 .F  S OTHER=$O(^DGPR(408.13,"SSN",UPDATE,OTHER)) Q:OTHER=""  Q:RESULT="^"  I OTHER,LINK13,OTHER'=LINK13 D
"RTN","EASEZU6",209,0)
 ..S RESULT="^"
"RTN","EASEZU6",210,0)
 ..W !,?3,"Sorry... that SSN is already used by another person"
"RTN","EASEZU6",211,0)
 ..W !,?3,"in the INCOME PERSON File (#408.13).  Try again."
"RTN","EASEZU6",212,0)
 .I RESULT="^" S UPDATE=""
"RTN","EASEZU6",213,0)
 .I UPDATE'="" S OUT=1
"RTN","EASEZU6",214,0)
 ;file the update, if any
"RTN","EASEZU6",215,0)
 Q:UPDATE=""
"RTN","EASEZU6",216,0)
 I 'ACCEPT S ACCEPT=1
"RTN","EASEZU6",217,0)
 S SUBIEN=$P(LN,U,1),MULTIPLE=$P(LN,U,2),KEYIEN=$P(LN,U,3)
"RTN","EASEZU6",218,0)
 S $P(^TMP("EZDATA",$J,KEYIEN,MULTIPLE,1),U,1,2)=UPDATE_U_ACCEPT
"RTN","EASEZU6",219,0)
 ;file data element; any manually updated element is 'accepted'
"RTN","EASEZU6",220,0)
 S DIE="^EAS(712,EASAPP,10,",DA=SUBIEN,DA(1)=EASAPP,DR(1)="10;"
"RTN","EASEZU6",221,0)
 S DR="1.5///^S X=UPDATE;1.1///^S X=ACCEPT;1.2///^S X=DT;1.3////^S X=DUZ"
"RTN","EASEZU6",222,0)
 D ^DIE
"RTN","EASEZU6",223,0)
 S VALMBCK="R"
"RTN","EASEZU6",224,0)
 ;update screen list
"RTN","EASEZU6",225,0)
 D FLDTEXT^VALM10(EASLN,"EZDATA",UPDATE)
"RTN","EASEZU6",226,0)
 D FLDCTRL^VALM10(EASLN,"EZDATA",IORVON,IORVOFF)
"RTN","EASEZU6",227,0)
 D WRITE^VALM10(EASLN)
"RTN","EASEZU6",228,0)
 Q
"VER")
8.0^22.0
"^DD",712,712,3,0)
ENTRY DATE^RD^^0;6^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",712,712,3,1,0)
^.1
"^DD",712,712,3,1,1,0)
712^NEW^MUMPS
"^DD",712,712,3,1,1,1)
S ^EAS(712,"NEW",$E(X,1,30),DA)=""
"^DD",712,712,3,1,1,2)
K ^EAS(712,"NEW",$E(X,1,30),DA) D APPINDEX^EASEZU2(DA)
"^DD",712,712,3,1,1,3)
DO NOT DELETE
"^DD",712,712,3,1,1,"%D",0)
^.101^2^2^3040514^^
"^DD",712,712,3,1,1,"%D",1,0)
This "NEW" index is used by the 1010EZ processor to obtain the list
"^DD",712,712,3,1,1,"%D",2,0)
of New Applications.
"^DD",712,712,3,1,1,"DT")
3010228
"^DD",712,712,3,21,0)
^^2^2^3010302^
"^DD",712,712,3,21,1,0)
This is the date that the incoming 10-10EZ Application was received
"^DD",712,712,3,21,2,0)
and entered into this holding file record.
"^DD",712,712,3,"DT")
3010228
"^DD",712,712,4,0)
DATE SIGNED BY APPLICANT^D^^1;1^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",712,712,4,1,0)
^.1
"^DD",712,712,4,1,1,0)
712^SIG^MUMPS
"^DD",712,712,4,1,1,1)
S ^EAS(712,"SIG",$E(X,1,30),DA)=""
"^DD",712,712,4,1,1,2)
K ^EAS(712,"SIG",$E(X,1,30),DA) D APPINDEX^EASEZU2(DA)
"^DD",712,712,4,1,1,3)
DO NOT DELETE
"^DD",712,712,4,1,1,"%D",0)
^.101^2^2^3040514^^
"^DD",712,712,4,1,1,"%D",1,0)
This "SIG" index is used by the 1010EZ processor to obtain the list
"^DD",712,712,4,1,1,"%D",2,0)
of Signed Applications.
"^DD",712,712,4,1,1,"DT")
3010228
"^DD",712,712,4,21,0)
^.001^5^5^3010307^^
"^DD",712,712,4,21,1,0)
The date in this field is the date the user verified receipt of
"^DD",712,712,4,21,2,0)
a signed 10-10EZ from the Applicant.
"^DD",712,712,4,21,3,0)
 
"^DD",712,712,4,21,4,0)
Data is entered into this field when the user takes the "Verify
"^DD",712,712,4,21,5,0)
Signature (VZ)" action within the EAS EZ 1010EZ PROCESSING option.
"^DD",712,712,4,"DT")
3010228
"^DD",712,712,5.1,0)
REVIEW DATE^D^^2;1^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",712,712,5.1,1,0)
^.1
"^DD",712,712,5.1,1,1,0)
712^REV^MUMPS
"^DD",712,712,5.1,1,1,1)
S ^EAS(712,"REV",$E(X,1,30),DA)=""
"^DD",712,712,5.1,1,1,2)
K ^EAS(712,"REV",$E(X,1,30),DA) D APPINDEX^EASEZU2(DA)
"^DD",712,712,5.1,1,1,3)
DO NOT DELETE
"^DD",712,712,5.1,1,1,"%D",0)
^.101^2^2^3040514^^
"^DD",712,712,5.1,1,1,"%D",1,0)
This "REV" index is used by the 1010EZ processor to obtain the list
"^DD",712,712,5.1,1,1,"%D",2,0)
of In Review Applications.
"^DD",712,712,5.1,1,1,"DT")
3010228
"^DD",712,712,5.1,21,0)
^.001^5^5^3010307^^
"^DD",712,712,5.1,21,1,0)
The date in this field is the date the user linked the Applicant to
"^DD",712,712,5.1,21,2,0)
the site's Patient database.  
"^DD",712,712,5.1,21,3,0)
  
"^DD",712,712,5.1,21,4,0)
Data is entered into this field when the user takes the "Link to
"^DD",712,712,5.1,21,5,0)
Patient File (LZ)" action within the EAS EZ 1010EZ PROCESSING option.
"^DD",712,712,5.1,"DT")
3010228
"^DD",712,712,6.1,0)
PRINT DATE^D^^2;3^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",712,712,6.1,1,0)
^.1
"^DD",712,712,6.1,1,1,0)
712^PRT^MUMPS
"^DD",712,712,6.1,1,1,1)
S ^EAS(712,"PRT",$E(X,1,30),DA)=""
"^DD",712,712,6.1,1,1,2)
K ^EAS(712,"PRT",$E(X,1,30),DA) D APPINDEX^EASEZU2(DA)
"^DD",712,712,6.1,1,1,3)
DO NOT DELETE
"^DD",712,712,6.1,1,1,"%D",0)
^.101^2^2^3040514^^^
"^DD",712,712,6.1,1,1,"%D",1,0)
This "PRT" index is used by the 1010EZ processor to obtain the list
"^DD",712,712,6.1,1,1,"%D",2,0)
of Printed, Pending Signature Applications.
"^DD",712,712,6.1,1,1,"DT")
3010228
"^DD",712,712,6.1,21,0)
^^7^7^3010303^
"^DD",712,712,6.1,21,1,0)
The date in this field is the date that the user first printed this
"^DD",712,712,6.1,21,2,0)
10-10EZ Application.  Data is entered into this field when the user 
"^DD",712,712,6.1,21,3,0)
takes the "Print 1010EZ (PZ)" action within the EAS EZ 1010EZ PROCESSING 
"^DD",712,712,6.1,21,4,0)
option.
"^DD",712,712,6.1,21,5,0)
   
"^DD",712,712,6.1,21,6,0)
The Application may be printed any number of times, but only the
"^DD",712,712,6.1,21,7,0)
first print data is recorded.
"^DD",712,712,6.1,"DT")
3010228
"^DD",712,712,7.1,0)
FILING DATE^D^^2;5^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",712,712,7.1,1,0)
^.1
"^DD",712,712,7.1,1,1,0)
712^FIL^MUMPS
"^DD",712,712,7.1,1,1,1)
S ^EAS(712,"FIL",$E(X,1,30),DA)=""
"^DD",712,712,7.1,1,1,2)
K ^EAS(712,"FIL",$E(X,1,30),DA) D APPINDEX^EASEZU2(DA)
"^DD",712,712,7.1,1,1,3)
DO NOT DELETE
"^DD",712,712,7.1,1,1,"%D",0)
^.101^3^3^3040514^^^
"^DD",712,712,7.1,1,1,"%D",1,0)
This "FIL" index is used by the 1010EZ processor to obtain the list
"^DD",712,712,7.1,1,1,"%D",2,0)
of Filed Applications.  Filed Applications are removed from 
"^DD",712,712,7.1,1,1,"%D",3,0)
the index 30 days post-filing.
"^DD",712,712,7.1,1,1,"DT")
3040514
"^DD",712,712,7.1,21,0)
^.001^5^5^3040514^^^
"^DD",712,712,7.1,21,1,0)
The date in this field is the date the user filed the Application data
"^DD",712,712,7.1,21,2,0)
to the site's Patient database.
"^DD",712,712,7.1,21,3,0)
  
"^DD",712,712,7.1,21,4,0)
Data is entered into this field when the user takes the "File 1010EZ
"^DD",712,712,7.1,21,5,0)
(FZ)" action within the EAS EZ 1010EZ PROCESSING option.
"^DD",712,712,7.1,"DT")
3040514
"^DD",712,712,9.1,0)
CLOSE DATE^D^^2;9^S %DT="EX" D ^%DT S X=Y K:Y<1 X
"^DD",712,712,9.1,1,0)
^.1
"^DD",712,712,9.1,1,1,0)
712^CLS^MUMPS
"^DD",712,712,9.1,1,1,1)
S ^EAS(712,"CLS",$E(X,1,30),DA)=""
"^DD",712,712,9.1,1,1,2)
K ^EAS(712,"CLS",$E(X,1,30),DA) D APPINDEX^EASEZU2(DA)
"^DD",712,712,9.1,1,1,3)
DO NOT DELETE
"^DD",712,712,9.1,1,1,"%D",0)
^.101^3^3^3040514^^
"^DD",712,712,9.1,1,1,"%D",1,0)
This "CLS" index is used by the 1010EZ processor to obtain the list
"^DD",712,712,9.1,1,1,"%D",2,0)
of Inactivated Applications.  Inactivated Applications are removed from
"^DD",712,712,9.1,1,1,"%D",3,0)
the index 30 days post-inactivation.
"^DD",712,712,9.1,1,1,"DT")
3010228
"^DD",712,712,9.1,21,0)
^^5^5^3010303^
"^DD",712,712,9.1,21,1,0)
The date in this field is the date the user inactivated this 10-10EZ
"^DD",712,712,9.1,21,2,0)
Application.
"^DD",712,712,9.1,21,3,0)
  
"^DD",712,712,9.1,21,4,0)
Data is entered into this field when the user takes the "Inactivate 1010EZ
"^DD",712,712,9.1,21,5,0)
(IZ)" action within the EAS EZ 1010EZ PROCESSING option.
"^DD",712,712,9.1,"DT")
3010228
**END**
**END**

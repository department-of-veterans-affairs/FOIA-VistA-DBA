$TXT Created by DESMOND,LINDA at DEVVOO.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 09/29/03 at 16:30
=============================================================================
Run Date: DEC 17, 2003                     Designation: DG*5.3*550
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #484                    Status: Released
                  Compliance Date: JAN 17, 2004
=============================================================================

Associated patches: (v)DG*5.3*518  <<= must be installed BEFORE `DG*5.3*550'

Subject: DISPLAY LTC STATUS ON DOM PATIENT

Category: 
  - Routine

Description:
============

 This patch addresses the following NOIS message(s):
 ---------------------------------------------------
 NCH-0903-40504     DISPLAY LTC STATUS ON DOM PATIENTS
  
  
 PARTICIPATING TEST SITES 
 ========================
 VAMC N-CHICAGO
 VAMC NEW YORK NY
  
  
 Problem Description:
 ====================
 One of the requirements for the LTC Copayments Phase III project was to 
 display a veteran's LTC copayment test status and last test date on the 
 screen in the following Registration options: 
  
    Load/Edit Patient Data   [DG LOAD PATIENT DATA]
    Patient Inquiry          [DG PATIENT INQUIRY]
    Register a Patient       [DG REGISTER PATIENT]
  
 The change to display the LTC copayment test information was included in 
 patch DG*5.3*518, but the information is not displaying if the veteran is 
 a DOM patient.
  
 This patch will Add LTC copayment test information to current Domiciliary
 patient look-ups via Load/Edit Patient Data, Patient Inquiry and Register
 a Patient.
  
  
 Problem Resolution:
 ===================
 The change to display the LTC copayment test information in the 
 registration options was added to routine DGRPD in the same section of 
 code that is displaying the means test and medication copay test 
 information.  The rule for those tests is not to display them if the 
 patient is a DOM patient.  To be consistent, the same rule was followed 
 for the LTC copay test. However, the users have requested that the LTC 
 copayment test information be displayed even if the veteran is a DOM 
 patient.  The line of code that calls the API to display the LTC 
 copayment test information has been moved outside of the check for DOM 
 patient.
  
  
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
      <tab>;;5.3;Registration;**[patch list]**;Aug 13, 1993
  
                             CHECK^XTSUMBLD results
 Routine name      Before Patch         After Patch        Patch List
 ============      ============         ===========        ==========
 DGRPD                 22091781            22088402   109,124,121,57,161
                                                      149,286,358,436,445
                                                      489,498,506,513,518
                                                               550 
  
 INSTALLATION INSTRUCTIONS
 =========================  
 It is recommended this patch be installed outside of normal business 
 hours to avoid any complications resulting from users on the system.
 Installation will take less than 2 minutes.
  
   Installation Steps:
   ===================
   
   1. Review your mapped set.  If the routine listed in the ROUTINE 
      SUMMARY section is mapped, it should be removed from the
      mapped set at this time.
     
   2. Choose the PackMan message containing this patch and select the
      INSTALL/CHECK MESSAGE option on the PackMan menu.
   
   3. From the 'Kernel Installation & Distribution System' menu [XPD
      MAIN], select the Installation menu.
   
   4. From this menu, you may elect to use the following options (when
      prompted for INSTALL NAME, enter DG*5.3*550).
   
      a. Backup a Transport Global - This option will create a backup
         message of any routines exported with the patch.  It will NOT 
         backup any other changes such as DDs or templates.
   
      b. Compare Transport Global to Current System - This option will 
         allow you to view all changes that will be made when the patch 
         is installed.  It compares all components of the patch 
         (routines, DDs, templates, etc.).
   
      c. Verify Checksums in Transport Global - This option will allow 
         you to ensure the integrity of the routines that are in the 
         transport global.
   
      d. Print Transport Global - This option will allow you to view the
         components of the KIDS build.
         
   5. Use the Install Package(s) option and select DG*5.3*550.
   
   6. When prompted 'Want KIDS to INHIBIT Logon's during the install? 
      YES//', it is recommended you answer NO.
   
   7. When prompted 'Want to DISABLE Scheduled Options, Menu Options, 
      and Protocols? YES//', respond YES.  When prompted to select 
      the options you would like to place out of order, enter the
      following:
  
         Load/Edit Patient Data   [DG LOAD PATIENT DATA]
         Patient Inquiry          [DG PATIENT INQUIRY]
         Register a Patient       [DG REGISTER PATIENT]
  
   8. If the routine was unmapped as part of Step 3, it should be 
      returned to the mapped set once the installation has run to 
      completion.

Routine Information:
====================

Routine Name:
  - DGRPD

 Before patch:
 =============
 EN+52:EN+63
         ; Check if patient is an inpatient and on a DOM ward
         ; If inpatient is on a DOM ward, don't display MT or CP messages
         ; If inpatient is NOT on a DOM ward, don't display CP message
         N DGDOM,DGDOM1,VAHOW,VAROOT,VAINDT,VAIP,VAERR
         G Q:'$$OKLINE(14)
         D DOM^DGMTR
         I '$G(DGDOM) D
         .D DIS^DGMTU(DFN)
         .D IN5^VADPT
         .I $G(VAIP(1))="" D DISP^IBARXEU(DFN,DT,3,1)
         .D DIS^EASECU(DFN)   ;Added for LTC III (DG*5.3*518)
         ;I 'DGABBRV,$E(IOST,1,2)="C-" F I=$Y:1:20 W !
  
  
 After patch:
 ============
 EN+52:EN+63
         ; Check if patient is an inpatient and on a DOM ward
         ; If inpatient is on a DOM ward, don't display MT or CP messages
         ; If inpatient is NOT on a DOM ward, don't display CP message
         N DGDOM,DGDOM1,VAHOW,VAROOT,VAINDT,VAIP,VAERR
         G Q:'$$OKLINE(14)
         D DOM^DGMTR
         I '$G(DGDOM) D
         .D DIS^DGMTU(DFN)
         .D IN5^VADPT
         .I $G(VAIP(1))="" D DISP^IBARXEU(DFN,DT,3,1)
         ;I 'DGABBRV,$E(IOST,1,2)="C-" F I=$Y:1:20 W !
         D DIS^EASECU(DFN)   ;Added for LTC III (DG*5.3*518)

Routine Checksum:

=============================================================================
User Information:
Entered By  : DESMOND,LINDA                 Date Entered  : SEP 10, 2003
Completed By: LANDRY,DANNA                  Date Completed: DEC 16, 2003
Released By : CANNEDY,JOELLEN               Date Released : DEC 17, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

$TXT Created by FORT,WALLY at NXT.KERNEL.FO-OAKLAND.MED.VA.GOV  (KIDS) on Wednesday, 10/12/05 at 16:06
=============================================================================
Run Date: JAN 08, 2006                     Designation: XU*8*391
Package : XU - KERNEL                         Priority: Mandatory
Version : 8       SEQ #322                      Status: Released
                  Compliance Date: FEB 08, 2006
=============================================================================

Associated patches: (v)XU*8*199    <<= must be installed BEFORE `XU*8*391'

Subject: Limit %ZIS page length

Category: 
  - Routine

Description:
============

 Patch Tracking #: 40985074
 Test Sites: VA HC Network Upstate NY, Portland VAMC, 
             Grand Junction VAMC, Clarksburg VAMC
 Blood Bank Clearance: 9/28/2005
  
 HD#101609
 Problem : Cache resets $Y to 0 after it gets to 65535. This causes a 
 problem when an application attempts to pad the output until $Y reaches a 
 value greater than 65535 but at 65535, $Y got reset to 0. The application 
 will just keep looping and adding LINE FEEDS to the output until the disk 
 filled up. Patch XU*8*348 fixed the fields in the device file.  This patch 
 takes care of the case when the user at the DEVICE prompt specifies a page 
 length greater than 65535.
 Fix: In the Device Handler, If IOSL is set to a value greater than 65530 it 
 is reset to 65530.
  
 New field added to the DEVICE FILE (#3.5)
 This field is written to every time this device is opened.
 If the device file is journaled, this change will increase the number of
 journal records used.
 STANDARD DATA DICTIONARY #3.5 -- DEVICE FILE    OCT 12,2005@12:32:25  PAGE 1
 STORED IN ^%ZIS(1,  (26 ENTRIES)   SITE: SF CIOFO, 
  
 DATA          NAME                  GLOBAL        DATA
 ELEMENT       TITLE                 LOCATION      TYPE
 --------------------------------------------------------------------------
  
 3.5,51       OPEN COUNT             5;1 NUMBER
  
              INPUT TRANSFORM:  K:+X'=X!(X>99999999)!(X<0)!(X?.E1"."1N.N) X
              LAST EDITED:      OCT 12, 2005 
              HELP-PROMPT:      Type a Number between 0 and 99999999, 0 Decimal 
                                Digits 
              DESCRIPTION:      This field holds a count of the number of times
                                that %ZIS has successfully open this device.  
                                The main driver is to find LAT devices that are
                                still in use.  
  
 To create a report use FileMan:
 Select OPTION:    PRINT FILE ENTRIES
  
 OUTPUT FROM WHAT FILE: DEVICE// 
 SORT BY: NAME// (OPEN COUNT)>0
   WITHIN (OPEN COUNT)>0, SORT BY: NAME  
   START WITH NAME: FIRST// 
     WITHIN NAME, SORT BY: 
 FIRST PRINT FIELD: NAME  
 THEN PRINT FIELD: $I  
 THEN PRINT FIELD: 
 Heading (S/C): DEVICE LIST// 
 START AT PAGE: 1// 
 DEVICE:   Telnet Terminal    Right Margin: 80// 
  
 ...HMMM, LET ME THINK ABOUT THAT A MOMENT...
  
 DEVICE LIST                                    OCT 12,2005  13:29    PAGE 1
 NAME                            $I
 -------------------------------------------------------------------------
  
 SDD P10                         USER$:[TEMP]SDD_DN2$PRT
 TELNET DEVICE                   TNA
  
  
  
 Routine Summary
 Checksums shown are OLD Checksums
 The following routines are included in this patch.  The second line of each
 of these routines now looks like:
  ;;8.0;KERNEL;**[Patch List]**;JUL 10, 1995
  
                  Checksums
 Routine         Old         New        Patch List
 ZIS1          9968286    10208065    **18,49,69,104,112,199,391**
 ZIS3          6138459     6340725    **18,36,69,104,391**
  
 List of preceding patches: 199
 Sites should use CHECK^XTSUMBLD to verify checksums.
  
 =========================================================================
 Installation:
  
 >>>TaskMan does *not* need to be stopped.
 >>>If you accept a slight risk of jobs getting a CLOBER/EDITED error
 >>>users and TaskMan may remain running.  Otherwise stop all other
 >>>jobs on the system.
  
   1.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.
  
   2.  The patch has now been loaded into a Transport global on your
       system. You now need to use KIDS to install the Transport global.
       On the KIDS menu, under the 'Installation' menu, use the following
       options:
  
          Verify Checksums in Transport Global
          Print Transport Global
          Compare Transport Global to Current System
          Backup a Transport Global
  
   3.  Users can remain on the system.
       This patch can be loaded any non-peak time.
       This patch can not be queued.
       TaskMan can remain running.
       Inhibit users from login into the system. (If you install when a few
       users are on the system and the possibility of some CLOBER errors is
       acceptable, then users can stay on the system.)
  
   4.  Installation will take less than 2 minutes.
       In Programmer mode:
       Use "D ^XPDKRN" then
          Install Package(s)  'XU*8.0*391'
                               ==========
  
       Want KIDS to INHIBIT LOGONs during the install? YES// NO
  
       Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
       
   5.  After installing this patch,
       DO RELOAD^ZTMGRSET
       Select the System
       Patch number to load: 391
                             ===
  
        Sample ZTMGRSET
  
        ZTMGRSET Version 8.0 **34,36,69,94,121,127,136,191,275,355**
        HELLO! I exist to assist you in correctly initializing the current 
        account.
  
  
        THIS MAY NOT BE THE MANAGER UCI.
         I think it is ISC,ISC.
        Should I continue anyway? N//Y
                                     =
        I think you are using OpenM-NT
        Which MUMPS system should I install?
  
        1 = VAX DSM(V6), VAX DSM(V7)
        2 = MSM-PC/PLUS, MSM for NT or UNIX
        3 = Cache/NT, Cache/VMS, OpenM-NT
        4 = Datatree, DTM-PC, DT-MAX
        5 = MVX,ISM VAX
        6 = ISM (UNIX, Open VMS)
        7 = GT.M (VMS)
        8 = GT.M (Unix)
        System: 3//
  
        Patch number to load: 391
        ...list of routines renamed...
  
   6.  Enable user's login.
  
 =========================================================================

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: ZIS1
    Before: B22332345  After: B23639948  **18,49,69,104,112,199,391**
Routine Name: ZIS3
    Before: B11463332  After: B12189703  **18,36,69,104,391**

=============================================================================
User Information:
Entered By  : FORT,WALLY                    Date Entered  : JUN 30, 2005
Completed By: SINGH,GURBIR                  Date Completed: JAN 05, 2006
Released By : TILLIS,LEWIS                  Date Released : JAN 08, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

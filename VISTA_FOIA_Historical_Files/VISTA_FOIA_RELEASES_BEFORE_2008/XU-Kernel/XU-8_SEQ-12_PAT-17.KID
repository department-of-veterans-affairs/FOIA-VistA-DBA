Released XU*8*17 SEQ #12
Extracted from mail message
**KIDS**:XU*8.0*17^

**INSTALL NAME**
XU*8.0*17
"BLD",79,0)
XU*8.0*17^KERNEL^0^2951214^n
"BLD",79,1,0)
^^16^16^2951214^
"BLD",79,1,1,0)
 Patch XU*8*17 corrects a problem that was identified by Hines
"BLD",79,1,2,0)
 Software Development.  The variable XPDQUIT was not preventing
"BLD",79,1,3,0)
 the install to proceed when set to 2 in the environment check
"BLD",79,1,4,0)
 routine, as documented in the manual.
"BLD",79,1,5,0)
  
"BLD",79,1,6,0)
 This patch can be installed while users are on the system without damage
"BLD",79,1,7,0)
 to any files. No users should be using the KIDS software while installing 
"BLD",79,1,8,0)
 this patch.
"BLD",79,1,9,0)

"BLD",79,1,10,0)
 ROUTINES:
"BLD",79,1,11,0)
   The second line of the routine now looks like:
"BLD",79,1,12,0)
       ;;8.0;KERNEL;**17**;Jul 10, 1995
"BLD",79,1,13,0)
 
"BLD",79,1,14,0)
  Name           Before          After           Patch List
"BLD",79,1,15,0)
  ----------------------------------------------------------
"BLD",79,1,16,0)
  XPDIL1         6175748         6291895         17
"BLD",79,4,0)
^9.64PA^^
"BLD",79,"KRN",0)
^9.67PA^8994^15
"BLD",79,"KRN",.4,0)
.4
"BLD",79,"KRN",.401,0)
.401
"BLD",79,"KRN",.402,0)
.402
"BLD",79,"KRN",.403,0)
.403
"BLD",79,"KRN",.5,0)
.5
"BLD",79,"KRN",.84,0)
.84
"BLD",79,"KRN",3.6,0)
3.6
"BLD",79,"KRN",9.2,0)
9.2
"BLD",79,"KRN",9.8,0)
9.8
"BLD",79,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",79,"KRN",9.8,"NM",1,0)
XPDIL1^^0^B12570821
"BLD",79,"KRN",9.8,"NM","B","XPDIL1",1)

"BLD",79,"KRN",19,0)
19
"BLD",79,"KRN",19.1,0)
19.1
"BLD",79,"KRN",101,0)
101
"BLD",79,"KRN",409.61,0)
409.61
"BLD",79,"KRN",8994,0)
8994
"BLD",79,"KRN",8995,0)
8995
"BLD",79,"KRN","B",.4,.4)

"BLD",79,"KRN","B",.401,.401)

"BLD",79,"KRN","B",.402,.402)

"BLD",79,"KRN","B",.403,.403)

"BLD",79,"KRN","B",.5,.5)

"BLD",79,"KRN","B",.84,.84)

"BLD",79,"KRN","B",3.6,3.6)

"BLD",79,"KRN","B",9.2,9.2)

"BLD",79,"KRN","B",9.8,9.8)

"BLD",79,"KRN","B",19,19)

"BLD",79,"KRN","B",19.1,19.1)

"BLD",79,"KRN","B",101,101)

"BLD",79,"KRN","B",409.61,409.61)

"BLD",79,"KRN","B",8994,8994)

"BLD",79,"KRN","B",8995,8995)

"PKG",283,-1)
1^1
"PKG",283,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",283,22,0)
^9.49I^1^1
"PKG",283,22,1,0)
8.0^2950729^2950729^6
"PKG",283,22,1,"PAH",1,0)
17^2951214
"PKG",283,22,1,"PAH",1,1,0)
^^16^16^2951214
"PKG",283,22,1,"PAH",1,1,1,0)
 Patch XU*8*17 corrects a problem that was identified by Hines
"PKG",283,22,1,"PAH",1,1,2,0)
 Software Development.  The variable XPDQUIT was not preventing
"PKG",283,22,1,"PAH",1,1,3,0)
 the install to proceed when set to 2 in the environment check
"PKG",283,22,1,"PAH",1,1,4,0)
 routine, as documented in the manual.
"PKG",283,22,1,"PAH",1,1,5,0)
  
"PKG",283,22,1,"PAH",1,1,6,0)
 This patch can be installed while users are on the system without damage
"PKG",283,22,1,"PAH",1,1,7,0)
 to any files. No users should be using the KIDS software while installing 
"PKG",283,22,1,"PAH",1,1,8,0)
 this patch.
"PKG",283,22,1,"PAH",1,1,9,0)

"PKG",283,22,1,"PAH",1,1,10,0)
 ROUTINES:
"PKG",283,22,1,"PAH",1,1,11,0)
   The second line of the routine now looks like:
"PKG",283,22,1,"PAH",1,1,12,0)
       ;;8.0;KERNEL;**17**;Jul 10, 1995
"PKG",283,22,1,"PAH",1,1,13,0)
 
"PKG",283,22,1,"PAH",1,1,14,0)
  Name           Before          After           Patch List
"PKG",283,22,1,"PAH",1,1,15,0)
  ----------------------------------------------------------
"PKG",283,22,1,"PAH",1,1,16,0)
  XPDIL1         6175748         6291895         17
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options and Options
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","XPDIL1")
0^1^B12570821
"RTN","XPDIL1",1,0)
XPDIL1 ;SFISC/RSD - cont. of load Distribution Global; 14 Dec 95 12:17
"RTN","XPDIL1",2,0)
 ;;8.0;KERNEL;**17**;Jul 10, 1995
"RTN","XPDIL1",3,0)
 ;
"RTN","XPDIL1",4,0)
PKG(XPDA) ;check Package file
"RTN","XPDIL1",5,0)
 N D,DIC,XPD,XPDCP,XPDNM,XPDNOQUE,XPDPKG,X,Y,%
"RTN","XPDIL1",6,0)
 S XPDNM=$P(XPDT(XPDIT),U,2)
"RTN","XPDIL1",7,0)
 I $$PKG^XPDUTL(XPDNM)'["KERNEL" D  I $D(XPDQUIT) D ABORT^XPDI(XPDA,1)
"RTN","XPDIL1",8,0)
 .Q:$O(XPDT("NM","KERNEL"))["KERNEL"
"RTN","XPDIL1",9,0)
 .S Y=$G(^XTMP("XPDI",XPDA,"VER"))
"RTN","XPDIL1",10,0)
 .I $$VERSION^XPDUTL("XU")<Y W !!,"BUT I NEED VERSION ",+Y," OF KERNEL!"  S XPDQUIT=1
"RTN","XPDIL1",11,0)
 .I $$VERSION^XPDUTL("VA FILEMAN")<$P(Y,U,2) W !,"BUT I NEED VERSION ",+$P(Y,U,2)," OF VA FILEMAN!" S XPDQUIT=1
"RTN","XPDIL1",12,0)
 S %=$O(^XTMP("XPDI",XPDA,"PKG",0)),XPDPKG(0)=$G(^(+%,0)),XPDPKG=%
"RTN","XPDIL1",13,0)
 I XPDPKG S DIC="^DIC(9.4," D  S XPDPKG=+Y_U_XPDPKG
"RTN","XPDIL1",14,0)
 .S DIC(0)="X",X=$P(XPDPKG(0),U) D ^DIC Q:Y>0
"RTN","XPDIL1",15,0)
 .S X=$P(XPDPKG(0),U,2),D="C" D IX^DIC
"RTN","XPDIL1",16,0)
 I XPDPKG>0 S XPD(9.7,XPDA_",",1)=+XPDPKG D FILE^DIE("","XPD")
"RTN","XPDIL1",17,0)
 Q:($$ENV(0)=1)!$D(XPDGP)
"RTN","XPDIL1",18,0)
 S XPDCP="INI" I '$$NEWCP^XPDUTL("XPD PREINSTALL COMPLETED") D ABORT^XPDI(XPDA,1) Q
"RTN","XPDIL1",19,0)
 S %=$$INRTN("INI")
"RTN","XPDIL1",20,0)
 I $L(%),'$$NEWCP^XPDUTL("XPD PREINSTALL STARTED",%) D ABORT^XPDI(XPDA,1) Q
"RTN","XPDIL1",21,0)
 S XPDCP="INIT" I '$$NEWCP^XPDUTL("XPD POSTINSTALL COMPLETED") D ABORT^XPDI(XPDA,1) Q
"RTN","XPDIL1",22,0)
 S %=$$INRTN("INIT")
"RTN","XPDIL1",23,0)
 I $L(%),'$$NEWCP^XPDUTL("XPD POSTINSTALL STARTED",%) D ABORT^XPDI(XPDA,1) Q
"RTN","XPDIL1",24,0)
 D XPCK^XPDIK("FIA"),XPCK^XPDIK("KRN")
"RTN","XPDIL1",25,0)
 Q
"RTN","XPDIL1",26,0)
INST(XPDNM) ;add to Install file
"RTN","XPDIL1",27,0)
 N DIC,DIR,DIRUT,DLAYGO,X,XPD,XPDA,XPDIE,XPDDIQ,Y
"RTN","XPDIL1",28,0)
 I $D(^XPD(9.7,"B",XPDNM)) S Y=0 D  Q:$D(XPD) XPD
"RTN","XPDIL1",29,0)
 .W !,"The following Entries already exist in the INSTALL file: ",!
"RTN","XPDIL1",30,0)
 .F  S Y=$O(^XPD(9.7,"B",XPDNM,Y)) Q:'Y  D
"RTN","XPDIL1",31,0)
 ..Q:'$D(^XPD(9.7,Y,0))  S %=^(0)
"RTN","XPDIL1",32,0)
 ..W !,$P(%,U),"   "
"RTN","XPDIL1",33,0)
 ..I $P(%,U,9)<3,$D(^XTMP("XPDI",Y)) W "**Transport Global already exists**",*7 S XPD=0 Q
"RTN","XPDIL1",34,0)
 ..W $$EXTERNAL^DILFD(9.7,.02,"",$P(%,U,9)),!,"was loaded on ",$$FMTE^XLFDT($P($G(^XPD(9.7,Y,1)),U))
"RTN","XPDIL1",35,0)
 .Q:$D(XPD)
"RTN","XPDIL1",36,0)
 .S DIR(0)="Y",DIR("A")="OK to continue",DIR("B")="NO"
"RTN","XPDIL1",37,0)
 .D ^DIR I $D(DIRUT)!'Y S XPD=0 Q
"RTN","XPDIL1",38,0)
 S DIC="^XPD(9.7,",DIC(0)="XL",DLAYGO=9.7,X=""""_XPDNM_""""
"RTN","XPDIL1",39,0)
 D ^DIC
"RTN","XPDIL1",40,0)
 I Y<0 W !,"Can't add Build ",XPDNM," to Install File" Q 0
"RTN","XPDIL1",41,0)
 S:'XPDST XPDST=+Y
"RTN","XPDIL1",42,0)
 S XPDA=+Y,XPDT(XPDIT)=XPDA_U_XPDNM,(XPDT("DA",XPDA),XPDT("NM",XPDNM))=XPDIT
"RTN","XPDIL1",43,0)
 S %="XPDIE(9.7,"""_XPDA_","")",@%@(.02)=0,@%@(2)=$$NOW^XLFDT,@%@(3)=XPDST,@%@(4)=XPDIT,@%@(5)="",@%@(6)=XPDST("H1")
"RTN","XPDIL1",44,0)
 D FILE^DIE("","XPDIE")
"RTN","XPDIL1",45,0)
 Q XPDA
"RTN","XPDIL1",46,0)
 ;
"RTN","XPDIL1",47,0)
ENV(XPDENV) ;enviroment check & version check
"RTN","XPDIL1",48,0)
 N %,XPDI,XPDABORT
"RTN","XPDIL1",49,0)
 I XPDPKG>0 S %=$$VER^XPDUTL(XPDNM) I %<$G(^DIC(9.4,+XPDPKG,"VERSION")) W !,"You have a Version greater than mine!",! D ABORT^XPDI(XPDA,1) Q 1
"RTN","XPDIL1",50,0)
 S %=$G(^XTMP("XPDI",XPDA,"PRE")) D:%]""
"RTN","XPDIL1",51,0)
 .W !,"Will first run the Environment Check Routine, ",%,!
"RTN","XPDIL1",52,0)
 .D SAVE^XPDIJ(%),@("^"_%)
"RTN","XPDIL1",53,0)
 I XPDENV S %=$G(^XTMP("XPDI",XPDA,"PATCH")) D:%]""
"RTN","XPDIL1",54,0)
 .N X S X=% X ^%ZOSF("TEST") E  Q
"RTN","XPDIL1",55,0)
 .W !,"Will run Patch Routine, ",X,!
"RTN","XPDIL1",56,0)
 .D @("^"_X)
"RTN","XPDIL1",57,0)
 I $G(XPDABORT) Q:XPDABORT=2&'XPDENV 0 D ABRTALL^XPDI(XPDABORT) Q 1
"RTN","XPDIL1",58,0)
 Q:'$D(XPDQUIT) 0
"RTN","XPDIL1",59,0)
 I $G(XPDQUIT) D:'(XPDQUIT=2&'XPDENV) ABORT^XPDI(XPDA,XPDQUIT)
"RTN","XPDIL1",60,0)
 S XPDI=""
"RTN","XPDIL1",61,0)
 F  S XPDI=$O(XPDQUIT(XPDI)) Q:XPDI=""  D:'(XPDQUIT(XPDI)=2&'XPDENV)
"RTN","XPDIL1",62,0)
 .S %=$G(XPDT("NM",XPDI)) D:% ABORT^XPDI(+XPDT(%),XPDQUIT(XPDI))
"RTN","XPDIL1",63,0)
 S XPDQUIT=$S('$D(XPDT("NM",XPDNM)):1,$G(XPDQUIT):XPDQUIT,1:0)
"RTN","XPDIL1",64,0)
 Q XPDQUIT
"RTN","XPDIL1",65,0)
 ;
"RTN","XPDIL1",66,0)
INRTN(X) N Y
"RTN","XPDIL1",67,0)
 S Y=$G(^XTMP("XPDI",XPDA,X)) Q:Y="" ""
"RTN","XPDIL1",68,0)
 S Y=$S(Y["^":Y,1:"^"_Y)
"RTN","XPDIL1",69,0)
 Q Y
"VER")
8.0^21.0
**END**
**END**

Released SD*5.3*310 SEQ #267
Extracted from mail message
**KIDS**:SD*5.3*310^

**INSTALL NAME**
SD*5.3*310
"BLD",4007,0)
SD*5.3*310^SCHEDULING^0^3030902^y
"BLD",4007,1,0)
^^2^2^3030820^
"BLD",4007,1,1,0)
This API will return 0,1,-1, depending on whether the patient has an 
"BLD",4007,1,2,0)
appointment.
"BLD",4007,4,0)
^9.64PA^^
"BLD",4007,"KRN",0)
^9.67PA^8989.52^19
"BLD",4007,"KRN",.4,0)
.4
"BLD",4007,"KRN",.401,0)
.401
"BLD",4007,"KRN",.402,0)
.402
"BLD",4007,"KRN",.403,0)
.403
"BLD",4007,"KRN",.5,0)
.5
"BLD",4007,"KRN",.84,0)
.84
"BLD",4007,"KRN",3.6,0)
3.6
"BLD",4007,"KRN",3.8,0)
3.8
"BLD",4007,"KRN",9.2,0)
9.2
"BLD",4007,"KRN",9.8,0)
9.8
"BLD",4007,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",4007,"KRN",9.8,"NM",1,0)
SDAMA204^^0^B1240020
"BLD",4007,"KRN",9.8,"NM",2,0)
SDAMA200^^0^B25107159
"BLD",4007,"KRN",9.8,"NM","B","SDAMA200",2)

"BLD",4007,"KRN",9.8,"NM","B","SDAMA204",1)

"BLD",4007,"KRN",19,0)
19
"BLD",4007,"KRN",19,"NM",0)
^9.68A^^
"BLD",4007,"KRN",19.1,0)
19.1
"BLD",4007,"KRN",101,0)
101
"BLD",4007,"KRN",409.61,0)
409.61
"BLD",4007,"KRN",771,0)
771
"BLD",4007,"KRN",870,0)
870
"BLD",4007,"KRN",8989.51,0)
8989.51
"BLD",4007,"KRN",8989.52,0)
8989.52
"BLD",4007,"KRN",8994,0)
8994
"BLD",4007,"KRN","B",.4,.4)

"BLD",4007,"KRN","B",.401,.401)

"BLD",4007,"KRN","B",.402,.402)

"BLD",4007,"KRN","B",.403,.403)

"BLD",4007,"KRN","B",.5,.5)

"BLD",4007,"KRN","B",.84,.84)

"BLD",4007,"KRN","B",3.6,3.6)

"BLD",4007,"KRN","B",3.8,3.8)

"BLD",4007,"KRN","B",9.2,9.2)

"BLD",4007,"KRN","B",9.8,9.8)

"BLD",4007,"KRN","B",19,19)

"BLD",4007,"KRN","B",19.1,19.1)

"BLD",4007,"KRN","B",101,101)

"BLD",4007,"KRN","B",409.61,409.61)

"BLD",4007,"KRN","B",771,771)

"BLD",4007,"KRN","B",870,870)

"BLD",4007,"KRN","B",8989.51,8989.51)

"BLD",4007,"KRN","B",8989.52,8989.52)

"BLD",4007,"KRN","B",8994,8994)

"BLD",4007,"QUES",0)
^9.62^^
"BLD",4007,"REQB",0)
^9.611^1^1
"BLD",4007,"REQB",1,0)
SD*5.3*275^2
"BLD",4007,"REQB","B","SD*5.3*275",1)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813^2930824
"PKG",16,22,1,"PAH",1,0)
310^3030902^10000000066
"PKG",16,22,1,"PAH",1,1,0)
^^2^2^3030902
"PKG",16,22,1,"PAH",1,1,1,0)
This API will return 0,1,-1, depending on whether the patient has an 
"PKG",16,22,1,"PAH",1,1,2,0)
appointment.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","SDAMA200")
0^2^B25107159
"RTN","SDAMA200",1,0)
SDAMA200 ;BPIOFO/ACS-Scheduling Replacement API Errors and Validation  ;10 Dec 2002
"RTN","SDAMA200",2,0)
 ;;5.3;Scheduling;**253,275,310**;13 Aug 1993
"RTN","SDAMA200",3,0)
 ;
"RTN","SDAMA200",4,0)
 ;*******************************************************************
"RTN","SDAMA200",5,0)
 ;              CHANGE LOG
"RTN","SDAMA200",6,0)
 ;
"RTN","SDAMA200",7,0)
 ;  DATE      PATCH       DESCRIPTION
"RTN","SDAMA200",8,0)
 ;--------  ----------    -------------------------------------
"RTN","SDAMA200",9,0)
 ;09/20/02  SD*5.3*253    ROUTINE COMPLETED
"RTN","SDAMA200",10,0)
 ;12/10/02  SD*5.3*275    ADDED PATIENT STATUS FILTER AND VALIDATION
"RTN","SDAMA200",11,0)
 ;08/15/03  SD*5.3*310    ADD ERROR 114
"RTN","SDAMA200",12,0)
 ;
"RTN","SDAMA200",13,0)
 ;*******************************************************************
"RTN","SDAMA200",14,0)
 ;-------------------------------------------------------------------
"RTN","SDAMA200",15,0)
 ;             *** VALIDATE INPUT PARAMETERS ***
"RTN","SDAMA200",16,0)
 ;INPUT
"RTN","SDAMA200",17,0)
 ;  SDIEN                Patient, clinic, or facility IEN (required)
"RTN","SDAMA200",18,0)
 ;  SDFIELDS             Fields requested (not required for NEXTAPPT API)
"RTN","SDAMA200",19,0)
 ;  SDAPSTAT             Appointment status (optional)
"RTN","SDAMA200",20,0)
 ;  SDSTART              Start date (optional)
"RTN","SDAMA200",21,0)
 ;  SDEND                End date (optional)
"RTN","SDAMA200",22,0)
 ;  SDAPINAM             The API that is calling this routine (required)
"RTN","SDAMA200",23,0)
 ;  SDRTNNAM             The routine that is calling this routine (required)
"RTN","SDAMA200",24,0)
 ;  SDIOSTAT             Patient status filter
"RTN","SDAMA200",25,0)
 ;-------------------------------------------------------------------
"RTN","SDAMA200",26,0)
 ;
"RTN","SDAMA200",27,0)
VALIDATE(SDIEN,SDFIELDS,SDAPSTAT,SDSTART,SDEND,SDAPINAM,SDRTNNAM,SDIOSTAT) ;
"RTN","SDAMA200",28,0)
 ;
"RTN","SDAMA200",29,0)
 N SDERRFLG
"RTN","SDAMA200",30,0)
 S SDERRFLG=0
"RTN","SDAMA200",31,0)
 ;Validate IEN
"RTN","SDAMA200",32,0)
 I $G(SDIEN)="" D ERROR($S(SDAPINAM="GETPLIST":104,SDAPINAM="GETALLCL":108,1:102),SDAPINAM,.SDERRFLG,SDRTNNAM)
"RTN","SDAMA200",33,0)
 I $G(SDIEN)'="",+$G(SDIEN)'=$G(SDIEN) D ERROR(110,SDAPINAM,.SDERRFLG,SDRTNNAM)
"RTN","SDAMA200",34,0)
 ;
"RTN","SDAMA200",35,0)
 ;Validate Appointment Status Filter
"RTN","SDAMA200",36,0)
 I $L($G(SDAPSTAT))>0 D
"RTN","SDAMA200",37,0)
 . I $L(SDAPSTAT)>1 D ERROR(109,SDAPINAM,.SDERRFLG,SDRTNNAM) Q
"RTN","SDAMA200",38,0)
 . I "NCR"'[SDAPSTAT D ERROR(109,SDAPINAM,.SDERRFLG,SDRTNNAM) Q
"RTN","SDAMA200",39,0)
 ;set appointment status filter to 'all' if null or undefined
"RTN","SDAMA200",40,0)
 I $G(SDAPSTAT)="" S SDAPSTAT="NCR"
"RTN","SDAMA200",41,0)
 ;
"RTN","SDAMA200",42,0)
 ;Validate start and end date/time variables if they are passed in
"RTN","SDAMA200",43,0)
 N SDSTVAL,SDENDVAL
"RTN","SDAMA200",44,0)
 S (SDSTVAL,SDENDVAL)=0
"RTN","SDAMA200",45,0)
 I $G(SDSTART)'="" D
"RTN","SDAMA200",46,0)
 . I +SDSTART'=SDSTART D ERROR(105,SDAPINAM,.SDERRFLG,SDRTNNAM) Q
"RTN","SDAMA200",47,0)
 . S X=SDSTART D H^%DTC I %H=0 D ERROR(105,SDAPINAM,.SDERRFLG,SDRTNNAM) Q
"RTN","SDAMA200",48,0)
 . S SDSTVAL=1
"RTN","SDAMA200",49,0)
 I $G(SDEND)'="" D
"RTN","SDAMA200",50,0)
 . I +SDEND'=SDEND D ERROR(106,SDAPINAM,.SDERRFLG,SDRTNNAM) Q
"RTN","SDAMA200",51,0)
 . S X=SDEND D H^%DTC I %H=0 D ERROR(106,SDAPINAM,.SDERRFLG,SDRTNNAM) Q
"RTN","SDAMA200",52,0)
 . S SDENDVAL=1
"RTN","SDAMA200",53,0)
 ;If start and end dates are valid, make sure start date not > end date
"RTN","SDAMA200",54,0)
 I SDSTVAL,SDENDVAL D
"RTN","SDAMA200",55,0)
 . I SDSTART>SDEND D ERROR(111,SDAPINAM,.SDERRFLG,SDRTNNAM)
"RTN","SDAMA200",56,0)
 ;
"RTN","SDAMA200",57,0)
 ;SDFIELDS cannot be null except for API "NEXTAPPT".
"RTN","SDAMA200",58,0)
 I $G(SDFIELDS)="",SDAPINAM'="NEXTAPPT" D ERROR(107,SDAPINAM,.SDERRFLG,SDRTNNAM)
"RTN","SDAMA200",59,0)
 I $G(SDFIELDS)[";;" D ERROR(103,SDAPINAM,.SDERRFLG,SDRTNNAM)
"RTN","SDAMA200",60,0)
 ;
"RTN","SDAMA200",61,0)
 ;Remove beginning and ending semi-colons from SDFIELDS list if present
"RTN","SDAMA200",62,0)
 I $E($G(SDFIELDS),1,1)=";" D
"RTN","SDAMA200",63,0)
 . S SDFIELDS=$E(SDFIELDS,2,$L(SDFIELDS))
"RTN","SDAMA200",64,0)
 . I $G(SDFIELDS)="" D ERROR(103,SDAPINAM,.SDERRFLG,SDRTNNAM)
"RTN","SDAMA200",65,0)
 I $E($G(SDFIELDS),$L($G(SDFIELDS)),$L($G(SDFIELDS)))=";" D
"RTN","SDAMA200",66,0)
 . S SDFIELDS=$E(SDFIELDS,1,$L(SDFIELDS)-1)
"RTN","SDAMA200",67,0)
 . I $G(SDFIELDS)="",SDAPINAM'="NEXTAPPT" D ERROR(103,SDAPINAM,.SDERRFLG,SDRTNNAM)
"RTN","SDAMA200",68,0)
 ;
"RTN","SDAMA200",69,0)
 ;Validate SDFIELDS list.  Check each field list for valid numbers requested 
"RTN","SDAMA200",70,0)
 N I,SDFIELD
"RTN","SDAMA200",71,0)
 S (I,SDFIELD)=0
"RTN","SDAMA200",72,0)
 I $G(SDFIELDS)'="" D
"RTN","SDAMA200",73,0)
 . F I=1:1 S SDFIELD=";"_$P(SDFIELDS,";",I)_";" Q:SDFIELD=";;"  D
"RTN","SDAMA200",74,0)
 .. I ";1;2;3;4;5;6;7;8;9;10;11;12;"'[SDFIELD D ERROR(103,SDAPINAM,.SDERRFLG,SDRTNNAM)
"RTN","SDAMA200",75,0)
 ;
"RTN","SDAMA200",76,0)
 ;Validate Patient Status Filter
"RTN","SDAMA200",77,0)
 I $L($G(SDIOSTAT))>0 D
"RTN","SDAMA200",78,0)
 . I $L(SDIOSTAT)>1 D ERROR(112,SDAPINAM,.SDERRFLG,SDRTNNAM) Q
"RTN","SDAMA200",79,0)
 . I "IO"'[SDIOSTAT D ERROR(112,SDAPINAM,.SDERRFLG,SDRTNNAM) Q
"RTN","SDAMA200",80,0)
 ;set patient status filter to 'both' if null or undefined
"RTN","SDAMA200",81,0)
 I $G(SDIOSTAT)="" S SDIOSTAT="IO"
"RTN","SDAMA200",82,0)
 ;
"RTN","SDAMA200",83,0)
 ;Validate Appt Status and Patient Status Filter Combination 
"RTN","SDAMA200",84,0)
 ;if they specify a patient status, they must specify scheduled/kept appt type "R"
"RTN","SDAMA200",85,0)
 I $G(SDIOSTAT)="I",$G(SDAPSTAT)'="R" D ERROR(113,SDAPINAM,.SDERRFLG,SDRTNNAM)
"RTN","SDAMA200",86,0)
 I $G(SDIOSTAT)="O",$G(SDAPSTAT)'="R" D ERROR(113,SDAPINAM,.SDERRFLG,SDRTNNAM)
"RTN","SDAMA200",87,0)
 ;
"RTN","SDAMA200",88,0)
 I SDERRFLG>0 Q -1
"RTN","SDAMA200",89,0)
 Q 1
"RTN","SDAMA200",90,0)
 ;
"RTN","SDAMA200",91,0)
ERROR(SDERRNUM,SDAPINAM,SDERRFLG,SDRTNNAM) ;
"RTN","SDAMA200",92,0)
 ;Put error message in ^TMP global
"RTN","SDAMA200",93,0)
 S SDERRFLG=1
"RTN","SDAMA200",94,0)
 S $P(^TMP($J,SDRTNNAM,SDAPINAM,"ERROR",SDERRNUM),"^",1)=$P($T(@SDERRNUM),";;",2)
"RTN","SDAMA200",95,0)
 Q
"RTN","SDAMA200",96,0)
 ;
"RTN","SDAMA200",97,0)
 ;***************************************************************
"RTN","SDAMA200",98,0)
 ; ERROR CODES AND MESSAGES USED FOR PARAMETER VALIDATION
"RTN","SDAMA200",99,0)
 ;***************************************************************
"RTN","SDAMA200",100,0)
 ;
"RTN","SDAMA200",101,0)
101 ;;DATABASE IS UNAVAILABLE
"RTN","SDAMA200",102,0)
102 ;;PATIENT ID IS REQUIRED
"RTN","SDAMA200",103,0)
103 ;;INVALID FIELD LIST
"RTN","SDAMA200",104,0)
104 ;;CLINIC ID IS REQUIRED
"RTN","SDAMA200",105,0)
105 ;;INVALID START DATE
"RTN","SDAMA200",106,0)
106 ;;INVALID END DATE
"RTN","SDAMA200",107,0)
107 ;;FIELD LIST IS REQUIRED
"RTN","SDAMA200",108,0)
108 ;;FACILITY ID IS REQUIRED
"RTN","SDAMA200",109,0)
109 ;;INVALID APPOINTMENT STATUS FILTER
"RTN","SDAMA200",110,0)
110 ;;ID MUST BE NUMERIC
"RTN","SDAMA200",111,0)
111 ;;START DATE CAN'T BE AFTER END DATE
"RTN","SDAMA200",112,0)
112 ;;INVALID PATIENT STATUS FILTER
"RTN","SDAMA200",113,0)
113 ;;APPT STATUS AND PATIENT STATUS FILTER COMBINATION UNSUPPORTED IN VISTA
"RTN","SDAMA200",114,0)
114 ;;INVALID PATIENT ID
"RTN","SDAMA200",115,0)
 ;
"RTN","SDAMA200",116,0)
 ;------------------------------------------------------------------
"RTN","SDAMA200",117,0)
 ;Additional APIs called from GETAPPT, GETPLIST, NEXTAPPT, GETALLCL
"RTN","SDAMA200",118,0)
 ;------------------------------------------------------------------
"RTN","SDAMA200",119,0)
 ;
"RTN","SDAMA200",120,0)
PATAPPT(SDPATIEN) ;For a patient IEN, return Boolean value for existence of appointments on ^DPT
"RTN","SDAMA200",121,0)
 I $D(^DPT(SDPATIEN,"S")) Q 1
"RTN","SDAMA200",122,0)
 Q 0
"RTN","SDAMA200",123,0)
 ;
"RTN","SDAMA200",124,0)
CLNAPPT(SDCLIEN) ;For a clinic IEN, return Boolean value for existence of appointments on ^SC
"RTN","SDAMA200",125,0)
 I $D(^SC($G(SDCLIEN),"S")) Q 1
"RTN","SDAMA200",126,0)
 Q 0
"RTN","SDAMA200",127,0)
GETCLIEN(SDPATIEN,SDAPPTDT) ; For a patient and appt date, return the clinic IEN on ^DPT
"RTN","SDAMA200",128,0)
 Q $P($G(^DPT($G(SDPATIEN),"S",$G(SDAPPTDT),0)),"^",1)
"RTN","SDAMA200",129,0)
 ;
"RTN","SDAMA200",130,0)
GETPTIEN(SDCLIEN,SDAPPTDT,SDPATCNT) ; For a clinic, appt date, and node, return the patient IEN on ^SC
"RTN","SDAMA200",131,0)
 Q $P($G(^SC($G(SDCLIEN),"S",$G(SDAPPTDT),1,$G(SDPATCNT),0)),"^",1)
"RTN","SDAMA200",132,0)
 ;
"RTN","SDAMA200",133,0)
GETSDDA(SDCLIEN,SDAPPTDT,SDPATIEN) ; For a clinic, appt date, and patient, return the SDDA node number on ^SC
"RTN","SDAMA200",134,0)
 N SDPATCNT,SDMATCH
"RTN","SDAMA200",135,0)
 S SDPATCNT=0,SDMATCH=0
"RTN","SDAMA200",136,0)
 F  S SDPATCNT=$O(^SC($G(SDCLIEN),"S",$G(SDAPPTDT),1,SDPATCNT)) D  Q:('SDPATCNT!SDMATCH)
"RTN","SDAMA200",137,0)
 . I 'SDPATCNT Q
"RTN","SDAMA200",138,0)
 . I $P($G(^SC(SDCLIEN,"S",SDAPPTDT,1,SDPATCNT,0)),"^",1)=SDPATIEN S SDMATCH=1
"RTN","SDAMA200",139,0)
 Q $G(SDPATCNT)
"RTN","SDAMA200",140,0)
 ;
"RTN","SDAMA200",141,0)
GETASTAT(SDPATIEN,SDAPPTDT) ;For a patient and appt date, return Appointment Status (N, C, R, or X)
"RTN","SDAMA200",142,0)
 N SDSTAT
"RTN","SDAMA200",143,0)
 S SDSTAT=$P($G(^DPT(SDPATIEN,"S",SDAPPTDT,0)),"^",2)
"RTN","SDAMA200",144,0)
 S SDSTAT=$S($G(SDSTAT)="NT":"X",$G(SDSTAT)="I":"R",$G(SDSTAT)["N":"N",$G(SDSTAT)["C":"C",1:"R")
"RTN","SDAMA200",145,0)
 Q SDSTAT
"RTN","SDAMA200",146,0)
 ;
"RTN","SDAMA200",147,0)
GETPSTAT(SDPATIEN,SDAPPTDT) ;For a patient and appt date, return Patient Status (I or O)
"RTN","SDAMA200",148,0)
 N SDSTAT
"RTN","SDAMA200",149,0)
 S SDSTAT=$P($G(^DPT(SDPATIEN,"S",SDAPPTDT,0)),"^",2)
"RTN","SDAMA200",150,0)
 S SDSTAT=$S($G(SDSTAT)="I":"I",1:"O")
"RTN","SDAMA200",151,0)
 Q SDSTAT
"RTN","SDAMA200",152,0)
 ;
"RTN","SDAMA204")
0^1^B1240020
"RTN","SDAMA204",1,0)
SDAMA204 ;BPOIFO/NDH-Scheduling Replacement APIs ;11 Aug 2003
"RTN","SDAMA204",2,0)
 ;;5.3;Scheduling;**310**;13 Aug 1993
"RTN","SDAMA204",3,0)
 ;
"RTN","SDAMA204",4,0)
 ;**   BEFORE USING THE API IN THIS ROUTINE, PLEASE SUBSCRIBE    **
"RTN","SDAMA204",5,0)
 ;**   TO DBIA #4216                                             **
"RTN","SDAMA204",6,0)
 ;
"RTN","SDAMA204",7,0)
 ;*****************************************************************
"RTN","SDAMA204",8,0)
 ;              CHANGE LOG
"RTN","SDAMA204",9,0)
 ;
"RTN","SDAMA204",10,0)
 ;  DATE      PATCH       DESCRIPTION
"RTN","SDAMA204",11,0)
 ;--------  ----------    -----------------------------------------
"RTN","SDAMA204",12,0)
 ;08/11/03  SD*5.3*310    API PATIENT APPOINTMENT EXISTS
"RTN","SDAMA204",13,0)
 ;
"RTN","SDAMA204",14,0)
 ;*****************************************************************
"RTN","SDAMA204",15,0)
 ;
"RTN","SDAMA204",16,0)
PATAPPT(SDDFN) ; Check for existence of any appointment for a patient
"RTN","SDAMA204",17,0)
 ; 
"RTN","SDAMA204",18,0)
 ;       This API is an extrinsic function that returns 1 of 3 values.
"RTN","SDAMA204",19,0)
 ;       The API checks for the existence of appointment records.
"RTN","SDAMA204",20,0)
 ; 
"RTN","SDAMA204",21,0)
 ;       INPUT    SDDFN : Patient's DFN number (required)
"RTN","SDAMA204",22,0)
 ; 
"RTN","SDAMA204",23,0)
 ;       OUTPUT       1 : Appointment(s) on file
"RTN","SDAMA204",24,0)
 ;                    0 : No appointment(s) on file
"RTN","SDAMA204",25,0)
 ;                   -1 : Error
"RTN","SDAMA204",26,0)
 ;                   
"RTN","SDAMA204",27,0)
 ; ERROR CODES - 101 : Database is Unavailable
"RTN","SDAMA204",28,0)
 ;               102 : Patient ID is required
"RTN","SDAMA204",29,0)
 ;               110 : Patient ID must be numeric
"RTN","SDAMA204",30,0)
 ;               114 : Invalid Patient ID
"RTN","SDAMA204",31,0)
 ; 
"RTN","SDAMA204",32,0)
 ; ERROR LOCATION : ^TMP($J,"SDAMA204","PATAPPT","ERROR")
"RTN","SDAMA204",33,0)
 ; 
"RTN","SDAMA204",34,0)
 ; Check for proper parameter and return -1 if bad DFN
"RTN","SDAMA204",35,0)
 ; 
"RTN","SDAMA204",36,0)
 ; Initialize node for error reporting
"RTN","SDAMA204",37,0)
 K ^TMP($J,"SDAMA204","PATAPPT")
"RTN","SDAMA204",38,0)
 ; 
"RTN","SDAMA204",39,0)
 ;IF RSA DATABASE AVAILABLE, GET APPOINTMENT DATA FROM RSA DATABASE
"RTN","SDAMA204",40,0)
 ;I $$GOTS^SDAMA100(SDRTNNAM,SDAPINAM) D  Q SDRESULT
"RTN","SDAMA204",41,0)
 ;. ;Insert GOTS code here...
"RTN","SDAMA204",42,0)
 ;. Q
"RTN","SDAMA204",43,0)
 ; 
"RTN","SDAMA204",44,0)
 ; Check for no input parameter
"RTN","SDAMA204",45,0)
 I '$D(SDDFN) D  Q -1
"RTN","SDAMA204",46,0)
 .D ERROR^SDAMA200(102,"PATAPPT",0,"SDAMA204")
"RTN","SDAMA204",47,0)
 ; Check if SDDFN is numeric
"RTN","SDAMA204",48,0)
 I SDDFN'?1.N D  Q -1
"RTN","SDAMA204",49,0)
 .D ERROR^SDAMA200(110,"PATAPPT",0,"SDAMA204")
"RTN","SDAMA204",50,0)
 ; Check if DFN exists or is 0
"RTN","SDAMA204",51,0)
 S DFN=SDDFN
"RTN","SDAMA204",52,0)
 D DEM^VADPT
"RTN","SDAMA204",53,0)
 I SDDFN=0!VAERR=1 D  Q -1
"RTN","SDAMA204",54,0)
 .D ERROR^SDAMA200(114,"PATAPPT",0,"SDAMA204")
"RTN","SDAMA204",55,0)
 D KVAR^VADPT
"RTN","SDAMA204",56,0)
 ; Check for patient appointments and return 1 if appointment found
"RTN","SDAMA204",57,0)
 ; and 0 if no appointments found
"RTN","SDAMA204",58,0)
 Q $$PATAPPT^SDAMA200(SDDFN)
"RTN","SDAMA204",59,0)
 ;
"VER")
8.0^22.0
**END**
**END**

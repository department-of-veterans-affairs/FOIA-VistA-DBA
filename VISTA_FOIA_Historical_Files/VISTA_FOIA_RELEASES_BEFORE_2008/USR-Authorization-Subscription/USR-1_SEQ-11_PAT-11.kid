Released USR*1*11 SEQ #11
Extracted from mail message
**KIDS**:USR*1.0*11^

**INSTALL NAME**
USR*1.0*11
"BLD",1838,0)
USR*1.0*11^AUTHORIZATION/SUBSCRIPTION^0^2990817^y
"BLD",1838,1,0)
^^2^2^2990817^^^^
"BLD",1838,1,1,0)
ASU patch 11, USR*1.0*11. Make data element 8930,.03 required. See the
"BLD",1838,1,2,0)
National Patch Module for a complete description.
"BLD",1838,4,0)
^9.64PA^8930^1
"BLD",1838,4,8930,0)
8930
"BLD",1838,4,8930,2,0)
^9.641^8930^1
"BLD",1838,4,8930,2,8930,0)
USR CLASS  (File-top level)
"BLD",1838,4,8930,2,8930,1,0)
^9.6411^.03^1
"BLD",1838,4,8930,2,8930,1,.03,0)
ACTIVE
"BLD",1838,4,8930,222)
y^y^p^^^^n
"BLD",1838,4,"APDD",8930,8930)

"BLD",1838,4,"APDD",8930,8930,.03)

"BLD",1838,4,"B",8930,8930)

"BLD",1838,"ABPKG")
n
"BLD",1838,"INI")

"BLD",1838,"INIT")

"BLD",1838,"KRN",0)
^9.67PA^8994^18
"BLD",1838,"KRN",.4,0)
.4
"BLD",1838,"KRN",.4,"NM",0)
^9.68A^^0
"BLD",1838,"KRN",.401,0)
.401
"BLD",1838,"KRN",.401,"NM",0)
^9.68A^^
"BLD",1838,"KRN",.402,0)
.402
"BLD",1838,"KRN",.403,0)
.403
"BLD",1838,"KRN",.5,0)
.5
"BLD",1838,"KRN",.84,0)
.84
"BLD",1838,"KRN",3.6,0)
3.6
"BLD",1838,"KRN",3.8,0)
3.8
"BLD",1838,"KRN",9.2,0)
9.2
"BLD",1838,"KRN",9.8,0)
9.8
"BLD",1838,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",1838,"KRN",9.8,"NM",1,0)
USRCLASS^^0^B8732215
"BLD",1838,"KRN",9.8,"NM","B","USRCLASS",1)

"BLD",1838,"KRN",19,0)
19
"BLD",1838,"KRN",19,"NM",0)
^9.68A^^0
"BLD",1838,"KRN",19.1,0)
19.1
"BLD",1838,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",1838,"KRN",101,0)
101
"BLD",1838,"KRN",101,"NM",0)
^9.68A^^0
"BLD",1838,"KRN",409.61,0)
409.61
"BLD",1838,"KRN",409.61,"NM",0)
^9.68A^^0
"BLD",1838,"KRN",771,0)
771
"BLD",1838,"KRN",869.2,0)
869.2
"BLD",1838,"KRN",870,0)
870
"BLD",1838,"KRN",8994,0)
8994
"BLD",1838,"KRN","B",.4,.4)

"BLD",1838,"KRN","B",.401,.401)

"BLD",1838,"KRN","B",.402,.402)

"BLD",1838,"KRN","B",.403,.403)

"BLD",1838,"KRN","B",.5,.5)

"BLD",1838,"KRN","B",.84,.84)

"BLD",1838,"KRN","B",3.6,3.6)

"BLD",1838,"KRN","B",3.8,3.8)

"BLD",1838,"KRN","B",9.2,9.2)

"BLD",1838,"KRN","B",9.8,9.8)

"BLD",1838,"KRN","B",19,19)

"BLD",1838,"KRN","B",19.1,19.1)

"BLD",1838,"KRN","B",101,101)

"BLD",1838,"KRN","B",409.61,409.61)

"BLD",1838,"KRN","B",771,771)

"BLD",1838,"KRN","B",869.2,869.2)

"BLD",1838,"KRN","B",870,870)

"BLD",1838,"KRN","B",8994,8994)

"BLD",1838,"QUES",0)
^9.62^^
"BLD",1838,"REQB",0)
^9.611^1^1
"BLD",1838,"REQB",1,0)
USR*1.0*10^2
"BLD",1838,"REQB","B","USR*1.0*10",1)

"FIA",8930)
USR CLASS
"FIA",8930,0)
^USR(8930,
"FIA",8930,0,0)
8930
"FIA",8930,0,1)
y^y^p^^^^n
"FIA",8930,0,10)

"FIA",8930,0,11)

"FIA",8930,0,"RLRO")

"FIA",8930,0,"VR")
1.0^USR
"FIA",8930,8930)
1
"FIA",8930,8930,.03)

"MBREQ")
0
"PKG",194,-1)
1^1
"PKG",194,0)
AUTHORIZATION/SUBSCRIPTION^USR^User Authorization
"PKG",194,20,0)
^9.402P^^
"PKG",194,22,0)
^9.49I^1^1
"PKG",194,22,1,0)
1.0^2970620
"PKG",194,22,1,"PAH",1,0)
11^2990817
"PKG",194,22,1,"PAH",1,1,0)
^^2^2^2990817
"PKG",194,22,1,"PAH",1,1,1,0)
ASU patch 11, USR*1.0*11. Make data element 8930,.03 required. See the
"PKG",194,22,1,"PAH",1,1,2,0)
National Patch Module for a complete description.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","USRCLASS")
0^1^B8732215
"RTN","USRCLASS",1,0)
USRCLASS ; SLC/JER - User Class Management actions ;08/17/1999
"RTN","USRCLASS",2,0)
 ;;1.0;AUTHORIZATION/SUBSCRIPTION;**7,11**;Jun 20, 1997
"RTN","USRCLASS",3,0)
EDIT ; Edit user classes
"RTN","USRCLASS",4,0)
 N USRDA,USRDATA,USREXPND,USRI,USRSTAT,DIROUT,USRCHNG,USRLST
"RTN","USRCLASS",5,0)
 D:'$D(VALMY) EN^VALM2(XQORNOD(0)) S USRI=0
"RTN","USRCLASS",6,0)
 F  S USRI=$O(VALMY(USRI)) Q:+USRI'>0  D  Q:$D(DIROUT)
"RTN","USRCLASS",7,0)
 . S USRDATA=$S(VALMAR="^TMP(""USRCLASS"",$J)":$G(^TMP("USRCLASSIDX",$J,USRI)),1:$G(^TMP("USREXPIDX",$J,USRI)))
"RTN","USRCLASS",8,0)
 . W !!,"Editing #",+USRDATA,!
"RTN","USRCLASS",9,0)
 . S USRDA=+$P(USRDATA,U,2) D EDIT1
"RTN","USRCLASS",10,0)
 . I +$G(USRCHNG) S USRLST=$S($L($G(USRLST)):$G(USRLST)_", ",1:"")_USRI
"RTN","USRCLASS",11,0)
 . I $D(USRDATA) D UPDATE^USRL(USRDATA)
"RTN","USRCLASS",12,0)
 W !,"Refreshing the list."
"RTN","USRCLASS",13,0)
 S VALMSG="** "_$S($L($G(USRLST)):"Item"_$S($L($G(USRLST),",")>1:"s ",1:" ")_$G(USRLST),1:"Nothing")_" Edited **"
"RTN","USRCLASS",14,0)
 K VALMY S VALMBCK="R"
"RTN","USRCLASS",15,0)
 Q
"RTN","USRCLASS",16,0)
EDIT1 ; Single record edit
"RTN","USRCLASS",17,0)
 ; Receives USRDA
"RTN","USRCLASS",18,0)
 N DA,DIE,DR
"RTN","USRCLASS",19,0)
 I '+$G(USRDA) W !,"No Classes selected." H 2 Q
"RTN","USRCLASS",20,0)
 S DIE="^USR(8930,",DA=USRDA,DR="[USR CLASS STRUCTURE EDIT]"
"RTN","USRCLASS",21,0)
 D FULL^VALM1,^DIE
"RTN","USRCLASS",22,0)
 S USRCHNG=1
"RTN","USRCLASS",23,0)
 Q
"RTN","USRCLASS",24,0)
EXPAND ; Expand/Collapse user class hierarchy display
"RTN","USRCLASS",25,0)
 N USRDNM,USRLNM,USRSTAT
"RTN","USRCLASS",26,0)
 D:'$D(VALMY) EN^VALM2(XQORNOD(0))
"RTN","USRCLASS",27,0)
 I $D(VALMY) D EC^USRECCL(.VALMY)
"RTN","USRCLASS",28,0)
 W !,"Refreshing the list."
"RTN","USRCLASS",29,0)
 ;S VALMSG="** "_$S($L($G(USRLST)):"Item"_$S($L($G(USRLST),",")>1:"s ",1:" ")_$G(USRLST),1:"Nothing")_" Edited **"
"RTN","USRCLASS",30,0)
 K VALMY S VALMBCK="R"
"RTN","USRCLASS",31,0)
 ;
"RTN","USRCLASS",32,0)
 S USRSTAT=+$P($G(^TMP("USRCLASS",$J,0)),U,2)
"RTN","USRCLASS",33,0)
 S USRDNM=$P($G(^TMP("USRCLASS",$J,0)),U,3)
"RTN","USRCLASS",34,0)
 S USRLNM=$P($G(^TMP("USRCLASS",$J,0)),U,4)
"RTN","USRCLASS",35,0)
 ;
"RTN","USRCLASS",36,0)
 S VALMCNT=+$G(@VALMAR@(0))
"RTN","USRCLASS",37,0)
 S VALMBCK="R"
"RTN","USRCLASS",38,0)
 Q
"RTN","USRCLASS",39,0)
CREATE ; Class constructor
"RTN","USRCLASS",40,0)
 N USRCREAT
"RTN","USRCLASS",41,0)
 N DIC,DLAYGO,X,Y,USRSTAT,USRDNM,USRLNM D FULL^VALM1
"RTN","USRCLASS",42,0)
 S (DIC,DLAYGO)=8930,DIC(0)="AELMQ",DIC("A")="Select CLASS: "
"RTN","USRCLASS",43,0)
 D ^DIC Q:+Y'>0
"RTN","USRCLASS",44,0)
 S USRCREAT=+$P(Y,U,3)
"RTN","USRCLASS",45,0)
 S DA=+Y,DIE=DIC,DIE("NO^")="BACK",DR="[USR CLASS STRUCTURE EDIT]"
"RTN","USRCLASS",46,0)
 D ^DIE
"RTN","USRCLASS",47,0)
 S USRSTAT=+$P($G(^TMP("USRCLASS",$J,0)),U,2)
"RTN","USRCLASS",48,0)
 S USRDNM=$P($G(^TMP("USRCLASS",$J,0)),U,3)
"RTN","USRCLASS",49,0)
 S USRLNM=$P($G(^TMP("USRCLASS",$J,0)),U,4)
"RTN","USRCLASS",50,0)
 I 'USRCREAT Q  ; Don't rebuild without cause
"RTN","USRCLASS",51,0)
 W !,"Rebuilding main class list."
"RTN","USRCLASS",52,0)
 D BUILD^USRCLST(USRSTAT,USRDNM,USRLNM)
"RTN","USRCLASS",53,0)
 S VALMCNT=+$G(@VALMAR@(0))
"RTN","USRCLASS",54,0)
 S VALMBCK="R"
"RTN","USRCLASS",55,0)
 Q
"RTN","USRCLASS",56,0)
MEMBERS ; List Members of classes and their subclasses
"RTN","USRCLASS",57,0)
 N USRDA,USRDATA,USREXPND,USRI,USRSTAT,VALMCNT,DIROUT
"RTN","USRCLASS",58,0)
 D:'$D(VALMY) EN^VALM2(XQORNOD(0)) S USRI=0
"RTN","USRCLASS",59,0)
 F  S USRI=$O(VALMY(USRI)) Q:+USRI'>0  D  Q:$D(DIROUT)
"RTN","USRCLASS",60,0)
 . S USRDATA=$S(VALMAR="^TMP(""USRCLASS"",$J)":$G(^TMP("USRCLASSIDX",$J,USRI)),1:$G(^TMP("USREXPIDX",$J,USRI)))
"RTN","USRCLASS",61,0)
 . W !!,"Listing Members of #",+USRDATA,!
"RTN","USRCLASS",62,0)
 . S USRDA=+$P(USRDATA,U,2) D EN^VALM("USR LIST MEMBERSHIP BY CLASS")
"RTN","USRCLASS",63,0)
 . I $D(USRDATA) D UPDATE^USRL(USRDATA)
"RTN","USRCLASS",64,0)
 W !,"Refreshing the list."
"RTN","USRCLASS",65,0)
 S VALMSG="Members listed"
"RTN","USRCLASS",66,0)
 K VALMY S VALMBCK="R"
"RTN","USRCLASS",67,0)
 Q
"VER")
8.0^21.0
"^DD",8930,8930,.03,0)
ACTIVE^RSX^1:Active;0:Inactive;^0;3^Q
"^DD",8930,8930,.03,1,0)
^.1
"^DD",8930,8930,.03,1,1,0)
8930^D
"^DD",8930,8930,.03,1,1,1)
S ^USR(8930,"D",$E(X,1,30),DA)=""
"^DD",8930,8930,.03,1,1,2)
K ^USR(8930,"D",$E(X,1,30),DA)
"^DD",8930,8930,.03,1,1,"%D",0)
^^2^2^2950202^
"^DD",8930,8930,.03,1,1,"%D",1,0)
This regular fileman cross-reference on active status allows easy 
"^DD",8930,8930,.03,1,1,"%D",2,0)
identification of active user classes.
"^DD",8930,8930,.03,1,1,"DT")
2950202
"^DD",8930,8930,.03,1,2,0)
8930^ADNM^MUMPS
"^DD",8930,8930,.03,1,2,1)
I $P($G(^USR(8930,+DA,0)),U,4)]"" S ^USR(8930,"ADNM",+X,$P(^(0),U,4),+DA)=""
"^DD",8930,8930,.03,1,2,2)
I $P($G(^USR(8930,+DA,0)),U,4)]"" K ^USR(8930,"ADNM",+X,$P(^(0),U,4),+DA)
"^DD",8930,8930,.03,1,2,"%D",0)
^^2^2^2950207^^
"^DD",8930,8930,.03,1,2,"%D",1,0)
This MUMPS-type cross-reference by ACTIVE and DISPLAY NAME allows 
"^DD",8930,8930,.03,1,2,"%D",2,0)
sorting of user classes for optimal presentation.
"^DD",8930,8930,.03,1,2,"DT")
2950207
"^DD",8930,8930,.03,3)
Indicate the status of the user class
"^DD",8930,8930,.03,"DT")
2990719
**END**
**END**

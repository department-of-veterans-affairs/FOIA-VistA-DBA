Released OR*3*183 SEQ #167
Extracted from mail message
**KIDS**:OR*3.0*183^

**INSTALL NAME**
OR*3.0*183
"BLD",4281,0)
OR*3.0*183^ORDER ENTRY/RESULTS REPORTING^0^3030328^y
"BLD",4281,1,0)
^^1^1^3030328^^
"BLD",4281,1,1,0)
CRSP CMOP FIX
"BLD",4281,4,0)
^9.64PA^^
"BLD",4281,"ABPKG")
n
"BLD",4281,"KRN",0)
^9.67PA^8989.52^19
"BLD",4281,"KRN",.4,0)
.4
"BLD",4281,"KRN",.401,0)
.401
"BLD",4281,"KRN",.402,0)
.402
"BLD",4281,"KRN",.403,0)
.403
"BLD",4281,"KRN",.5,0)
.5
"BLD",4281,"KRN",.84,0)
.84
"BLD",4281,"KRN",3.6,0)
3.6
"BLD",4281,"KRN",3.8,0)
3.8
"BLD",4281,"KRN",9.2,0)
9.2
"BLD",4281,"KRN",9.8,0)
9.8
"BLD",4281,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",4281,"KRN",9.8,"NM",1,0)
ORX2^^0^B9688686
"BLD",4281,"KRN",9.8,"NM","B","ORX2",1)

"BLD",4281,"KRN",19,0)
19
"BLD",4281,"KRN",19.1,0)
19.1
"BLD",4281,"KRN",101,0)
101
"BLD",4281,"KRN",409.61,0)
409.61
"BLD",4281,"KRN",771,0)
771
"BLD",4281,"KRN",870,0)
870
"BLD",4281,"KRN",8989.51,0)
8989.51
"BLD",4281,"KRN",8989.52,0)
8989.52
"BLD",4281,"KRN",8994,0)
8994
"BLD",4281,"KRN","B",.4,.4)

"BLD",4281,"KRN","B",.401,.401)

"BLD",4281,"KRN","B",.402,.402)

"BLD",4281,"KRN","B",.403,.403)

"BLD",4281,"KRN","B",.5,.5)

"BLD",4281,"KRN","B",.84,.84)

"BLD",4281,"KRN","B",3.6,3.6)

"BLD",4281,"KRN","B",3.8,3.8)

"BLD",4281,"KRN","B",9.2,9.2)

"BLD",4281,"KRN","B",9.8,9.8)

"BLD",4281,"KRN","B",19,19)

"BLD",4281,"KRN","B",19.1,19.1)

"BLD",4281,"KRN","B",101,101)

"BLD",4281,"KRN","B",409.61,409.61)

"BLD",4281,"KRN","B",771,771)

"BLD",4281,"KRN","B",870,870)

"BLD",4281,"KRN","B",8989.51,8989.51)

"BLD",4281,"KRN","B",8989.52,8989.52)

"BLD",4281,"KRN","B",8994,8994)

"BLD",4281,"QUES",0)
^9.62^^
"BLD",4281,"REQB",0)
^9.611^1^1
"BLD",4281,"REQB",1,0)
OR*3.0*168^2
"BLD",4281,"REQB","B","OR*3.0*168",1)

"MBREQ")
0
"PKG",110,-1)
1^1
"PKG",110,0)
ORDER ENTRY/RESULTS REPORTING^OR^Order Entry/Results Reporting
"PKG",110,20,0)
^9.402P^^
"PKG",110,22,0)
^9.49I^1^1
"PKG",110,22,1,0)
3.0^2971217
"PKG",110,22,1,"PAH",1,0)
183^3030328
"PKG",110,22,1,"PAH",1,1,0)
^^1^1^3030328
"PKG",110,22,1,"PAH",1,1,1,0)
CRSP CMOP FIX
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","ORX2")
0^1^B9688686
"RTN","ORX2",1,0)
ORX2 ; slc/dcm - OE/RR Patient lock entry points ;11/25/02  09:51
"RTN","ORX2",2,0)
 ;;3.0;ORDER ENTRY/RESULTS REPORTING;**16,48,158,168,183**;Dec 17, 1997
"RTN","ORX2",3,0)
PT1 ;;Entry point to unlock patient when done adding orders - NO LONGER USED
"RTN","ORX2",4,0)
 ;;Required variable ORVP.
"RTN","ORX2",5,0)
 Q:'$D(ORVP)  Q:'$L(ORVP)  Q:ORVP'["DPT("
"RTN","ORX2",6,0)
 D UNLOCK(+ORVP) K ORPTLK,ORELK
"RTN","ORX2",7,0)
 Q
"RTN","ORX2",8,0)
LK ;;Entry point for locking patient when updating orders
"RTN","ORX2",9,0)
 ;;Entry: X=VP to Patient "DFN;DPT("  Exit: Y=1 if lock succeeds
"RTN","ORX2",10,0)
 Q:'$D(X)  Q:'$L(X)  Q:X'["DPT("  Q:'$D(@("^"_$P(X,";",2)_+X_",0)"))
"RTN","ORX2",11,0)
 S Y=$$LOCK(+X) Q:Y
"RTN","ORX2",12,0)
 W !!,$C(7),$P(Y,U,2) D READ
"RTN","ORX2",13,0)
 S Y=0 K X
"RTN","ORX2",14,0)
 Q
"RTN","ORX2",15,0)
ULK ;;Entry point to unlock patient
"RTN","ORX2",16,0)
 ;;Required variable X=VP to patient.
"RTN","ORX2",17,0)
 Q:'$D(X)  Q:'$L(X)  Q:X'["DPT("  Q:'$D(@("^"_$P(X,";",2)_+X_",0)"))
"RTN","ORX2",18,0)
 D UNLOCK(+X)
"RTN","ORX2",19,0)
 Q
"RTN","ORX2",20,0)
 ;
"RTN","ORX2",21,0)
LOCK(DFN) ; -- Lock patient chart (silent)
"RTN","ORX2",22,0)
 ; Returns 1 if successful, or 0^Message if could not get lock
"RTN","ORX2",23,0)
 ;
"RTN","ORX2",24,0)
 Q:'$G(DFN) "0^Invalid patient" N Y,ORLK,NOW,NOW1
"RTN","ORX2",25,0)
 S ORLK=$G(^XTMP("ORPTLK-"_DFN,1)) Q:ORLK=(DUZ_U_$J) 1 ;locked
"RTN","ORX2",26,0)
 L +^XTMP("ORPTLK-"_DFN):1 I '$T S Y="0^"_$S(+ORLK:$P($G(^VA(200,+ORLK,0)),U),1:"Another person")_" is editing orders for this patient." Q Y
"RTN","ORX2",27,0)
 S NOW=$$NOW^XLFDT,NOW1=$$FMADD^XLFDT(NOW,1)
"RTN","ORX2",28,0)
 S ^XTMP("ORPTLK-"_DFN,0)=NOW1_U_NOW_"^CPRS Chart Lock",^(1)=DUZ_U_$J
"RTN","ORX2",29,0)
 Q 1
"RTN","ORX2",30,0)
 ;
"RTN","ORX2",31,0)
UNLOCK(DFN) ; -- Unlock patient chart (silent)
"RTN","ORX2",32,0)
 L -^XTMP("ORPTLK-"_DFN)
"RTN","ORX2",33,0)
 I $G(^XTMP("ORPTLK-"_DFN,1))=(DUZ_U_$J) K ^XTMP("ORPTLK-"_DFN)
"RTN","ORX2",34,0)
 Q
"RTN","ORX2",35,0)
 ;
"RTN","ORX2",36,0)
INC(IFN) ;Increment zero node on file 100.2
"RTN","ORX2",37,0)
 N X,X3,X4
"RTN","ORX2",38,0)
 Q:'$G(IFN) 1 Q:$D(^OR(100.2,IFN)) 1
"RTN","ORX2",39,0)
 L +^OR(100.2,0):5 I '$T Q 0
"RTN","ORX2",40,0)
 S:'$D(^OR(100.2,0)) ^(0)="OE/RR PATIENT^100.2P" S X=^(0)
"RTN","ORX2",41,0)
 S X4=+$P(X,U,4)+1,X3=$S(IFN>$P(X,U,3):IFN,1:$P(X,U,3))
"RTN","ORX2",42,0)
 S $P(^OR(100.2,0),U,3,4)=X3_U_X4
"RTN","ORX2",43,0)
 L -^OR(100.2,0)
"RTN","ORX2",44,0)
 Q 1
"RTN","ORX2",45,0)
 ;
"RTN","ORX2",46,0)
LOCK1(ORDER) ; -- Lock ORDER in file #100
"RTN","ORX2",47,0)
 ; Returns 1 if successful or 0^Message if could not get lock
"RTN","ORX2",48,0)
 ;
"RTN","ORX2",49,0)
 N X,Y,NOW,NOW1 I '$G(ORDER) Q "0^Invalid order number"
"RTN","ORX2",50,0)
 ;DBIA #4001 Private DBIA w CMOP
"RTN","ORX2",51,0)
 I $D(^XTMP("ORLK-"_ORDER,0)),(^(0)["CPRS/CMOP") Q "0^CMOP Transmission"
"RTN","ORX2",52,0)
 L +^OR(100,+ORDER):1 I '$T S X=+$G(^XTMP("ORLK-"_+ORDER,1)),Y="0^"_$S(X:$P($G(^VA(200,X,0)),U),1:"Another person")_" is working on this order." Q Y
"RTN","ORX2",53,0)
 I $P($G(^OR(100,+ORDER,0)),U,12)="I" S Y=+$P($G(^(3)),U,6) I Y,$P($G(^OR(100,Y,3)),U,3)=11 D  Q Y
"RTN","ORX2",54,0)
 . S X=$S($P(^OR(100,Y,3),U,11)=2:"renewal",1:"edit")
"RTN","ORX2",55,0)
 . S Y="0^An unreleased "_X_" exists for this order." L -^OR(100,+ORDER)
"RTN","ORX2",56,0)
 S NOW=$$NOW^XLFDT,NOW1=$$FMADD^XLFDT(NOW,1)
"RTN","ORX2",57,0)
 S ^XTMP("ORLK-"_+ORDER,0)=NOW1_U_NOW_"^CPRS Order Lock",^(1)=DUZ_U_$J
"RTN","ORX2",58,0)
 Q 1
"RTN","ORX2",59,0)
 ;
"RTN","ORX2",60,0)
UNLK1(ORDER) ; -- Unlock ORDER in file #100
"RTN","ORX2",61,0)
 L -^OR(100,+$G(ORDER)) K ^XTMP("ORLK-"_+ORDER)
"RTN","ORX2",62,0)
 Q
"RTN","ORX2",63,0)
 ;
"RTN","ORX2",64,0)
READ ; -- instead of READ^ORUTL
"RTN","ORX2",65,0)
 N X,Y,DIR
"RTN","ORX2",66,0)
 S DIR(0)="EA",DIR("A")="     Press return to continue  "
"RTN","ORX2",67,0)
 D ^DIR
"RTN","ORX2",68,0)
 Q
"VER")
8.0^22.0
**END**
**END**

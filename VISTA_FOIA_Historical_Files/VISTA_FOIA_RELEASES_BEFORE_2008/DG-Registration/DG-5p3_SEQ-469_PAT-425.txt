
=============================================================================
Run Date: SEP 11, 2003                     Designation: DG*5.3*425
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #469                    Status: Released
                  Compliance Date: SEP 25, 2003
=============================================================================

Associated patches: (v)DG*5.3*391  <<= must be installed BEFORE `DG*5.3*425'
                    (v)DG*5.3*513  <<= must be installed BEFORE `DG*5.3*425'

Subject: PATIENT RECORD FLAGS

Category: 
  - Enhancement (Mandatory)
  - Routine
  - Data Dictionary

Description:
============

 I. OVERVIEW
  
 This patch introduces changes and enhancements to the Registration V. 5.3 
 package in support of the Patient Record Flags (PRF) initiative.
  
 The VA Office of Inspector General (OIG) in its report "Evaluation of 
 VHA's Policies and Practices for Managing Violent or Potentially Violent 
 Psychiatric Patients" (6HI-A28-038, dated March 28, 1996) recommended 
 that facilities communicate among themselves so that staff are aware of 
 high risk patients regardless of where in the VHA system they may seek 
 health care.
  
 The Patient Record Flags module of the Registration package provides the 
 functionality needed to implement the OIG's recommendation.  Patient 
 Record Flags (aka Computerized Patient Advisories) will alert VHA 
 employees of patients whose behavior or characteristics may pose a threat 
 either to the safety of the employee, the safety of other patients, or 
 compromise the delivery of quality health care.
  
 Patient Record Flags are separated into two categories,
 Category I National and Category II Local.
  
 Category I Patient Record Flags are nationally approved and will be
 nationally distributed via the patch module for implementation by all
 facilities.  New Category I PRF assignments, and future modifications to
 Category I PRF assignments, are shared with all known treating facilities
 for the patient using VistA HL7 messaging.  The registration of a new
 patient at a facility will generate a query to the patient's
 Coordinating Master of Record (CMOR) site to retrieve any existing
 Category I record flag assignments for the patient.  Modification of
 existing Category I PRF assignments is limited to the site designated as
 the "owner" during the assignment process.
  
 A single Category I flag, named "BEHAVIORAL", is included in this patch for 
 implementation by all facilities.  The purpose of this patient record flag 
 is to alert VHA medical staff and employees of patients whose behavior or 
 characteristics may pose a threat either to their safety, the safety of 
 other patients, or compromise the delivery of quality health care.
  
 Category II Patient Record Flags are locally established by individual
 VISNs or facilities.  Category II PRF assignments are not shared between 
 facilities.
  
 For additional information, refer to VHA Directive 2003-048 National 
 Patient Record Flags. 
  
        <<<<<<<<<<<<<<<<<<<< NOTE >>>>>>>>>>>>>>>>>>>>
  
  This patch, DG*5.3*425, is being released in a single KIDS software 
  distribution (host file).  This patch message contains the informational
  portion of DG*5.3*425 and provides field personnel with instructions on
  how to acquire, install, and implement the patch software.
  
  Two additional patches, USR*1*24 and TIU*1*165, are being released
  as a separate distribution (host file) in support of patch DG*5.3*425.
  
  
  
 II. FUNCTIONAL OVERVIEW
  
 The functionality delivered in this patch can be divided into six (6) 
 main areas.
  
 1. PATIENT RECORD FLAG MANAGEMENT
  
  There is a new Record Flag Management [DGPF RECORD FLAG MANAGEMENT]
  option.  This option is a List Manager user interface and provides the
  following actions.
   
   a. Ability to create Category II (Local) flags. 
   
   b. Ability to edit Category II (Local) flags. 
   
   c. Ability to display a list of both Category I (National) and Category 
      II (Local) flags.
   
   d. Ability to display details of both Category I (National) and 
      Category II (Local) flags.
  
  
 2. PATIENT RECORD FLAG ASSIGNMENT
    
  There is a new Record Flag Assignment [DGPF RECORD FLAG ASSIGNMENT]
  option.  This option provides a List Manager user interface 
  for assigning Patient Record Flags to patients.  Additionally, this
  option provides the ability to review and manage Patient Record Flag
  assignments.  The following actions are provided within the Record
  Flag Assignment option.
  
   a. Assign a patient record flag to a patient.
  
   b. Display the details of a patient's record flag assignments including 
      the history of the assignment.
  
   c. Review/Edit a patient's record flag assignment.
                       
   d. Change the site ownership of a patient's record flag assignment.     
  
  
 3. PATIENT RECORD FLAG REPORTS
  
   a. There is a new Flag Assignment Report [DGPF FLAG ASSIGNMENT REPORT] 
      option.  This option provides the ability to display/print a report
      of all record flag assignments associated with a specific patient
      record flag.  
   
   b. There is a new Assignments Due For Review Report [DGPF ASSIGNMENT
      DUE REVIEW RPT] option.  This option provides the ability to
      display/print a report of patients that require their record flag
      assignments to be reviewed based on an input date range.
  
  
 4. DISPLAY ACTIVE PATIENT RECORD FLAG ASSIGNMENTS
  
   a. Patient Lookup in VistA has been modified and now will display all 
      ACTIVE patient record flag assignments for a patient.  The user will
      then have the ability to view the details of each of the patient's
      ACTIVE PRF assignments.
  
   b. The following Registration options have been modified to 
      automatically generate a query for Category I patient record flag
      assignments when a new patient is registered at the facility.
     
       - Register a Patient [DG REGISTER PATIENT]
       - Load/Edit Patient Data [DG LOAD PATIENT DATA]
       - 10-10T Registration [DGRPT 10-10T REGISTRATION]
  
      The query will occur in real-time and will be sent to the patient's
      Coordinating Master of Record (CMOR) site.
      The query will search for and return all of the patient's ACTIVE and
      INACTIVE Category I (National) Patient Record Flag Assignments to
      be filed in the local site's Patient Record Flags database.
 
      If an ACTIVE Category I (National) record flag assignment is
      found for the patient, it will be displayed to the user.
      The user will then have the ability to view the details of each of
      the patient's ACTIVE PRF assignments.
  
  
 5. SHARING CATEGORY I (NATIONAL) RECORD FLAG ASSIGNMENTS
  
   a. Automatic Sharing of Category I PRF Assignments.
      Category I PRF are nationally approved and will be nationally 
      distributed for implementation by all facilities.  New Category I
      patient assignments and future modifications to Category I PRF
      assignments will automatically be shared with all known treating
      facilities for the patient using VistA HL7 messaging.  Modification
      of existing Category I patient assignments is limited to the site
      designated as the "owner" during the assignment process.
  
   b. Query for Category I (National) PRF Assignments.
      The registration of a new patient at a facility will generate a 
      query to the patient's Coordinating Master of Record (CMOR) site to
      retrieve any existing Category I PRF assignments for the patient.
  
   Note: Category II flags are locally established by individual VISNs
         or facilities.  Category II flag assignments are not shared
         between facilities.
  
  
 6. SYSTEM CONFIGURATION
  
  There is a new PRF System Configuration [DGPF PRF SYSTEM CONFIGURATION] 
  option.  This option enables IRM staff to enable or disable the Patient
  Record Flag HL7 interfaces if the need arises.
  
   a. This option will provide the ability to enable or disable the 
      Unsolicited Observation Update (ORU~R01) HL7 interface for the
      Patient Record Flags module.  This interface is responsible for the
      transmission of unsolicited patient record flag (Category I)
      assignment data to a patient's sites of record.
  
   b. This option provides the ability to control the PRF HL7 query 
      (QRY~R02) interface.  The interface may be enabled or disabled.  
      Additionally, the option allows the type of PRF HL7 query (QRY~R02)
      interface that may be used, either a VistA HL7 'direct' connection or
      a VistA HL7 'deferred' connection.
  
  
  
 III. TECHNICAL COMPONENTS
  
 The following section describes the technical components of this patch.
  
 1. The following new OPTION(s) will be added.
  
  a.        NAME: DGPF RECORD FLAG ASSIGNMENT
       MENU TEXT: Record Flag Assignment
     DESCRIPTION: This option provides a List Manager user interface for 
                  assigning Patient Record Flags to patients.  
                  Additionally, this option provides the ability to review
                  and manage Patient Record Flag assignments.  The      
                  following actions are provided within the patient Record
                  Flag Assignment option.
                  - Assign a Patient Record Flag to a patient.
                  - Display the details of a patient's record flag
                    assignments including the history of the assignment.
                  - Review/Edit a patient's record flag assignment.
                  - Change the site ownership of a patient's record flag
                    assignment.
  
  b.        NAME: DGPF RECORD FLAGS MAIN MENU
       MENU TEXT: Patient Record Flags Main Menu
     DESCRIPTION: This menu option contains all menus and options needed
                  to assign, manage, and report patient record flag 
                  information.  This is a new stand-alone menu option.
  
  c.        NAME: DGPF RECORD FLAG MANAGEMENT
       MENU TEXT: Record Flag Management
     DESCRIPTION: This option will provide users with the ability to: 
                  - Create Category II (Local) Patient Record Flags
                  - Edit Category II (Local) Patient Record Flags
                  - List Category I (National) and Category II (Local)
                    Patient Record Flags
                  - Display details of Category I and Category II
                    Patient Record Flags
  
  d.        NAME: DGPF BACKGROUND PROCESSING
       MENU TEXT: Patient Record Flag Background
     DESCRIPTION: This option should be scheduled to run once a day.  The
                  following functions are processed by this background option:
                  1. Send review notification messages for pending Patient
                     Record Flag Assignment reviews.  
                  2. Auto retransmitting of rejected HL7 Patient Record Flag
                     Assignment messages.
  
  e.        NAME: DGPF RECORD FLAG REPORTS MENU
       MENU TEXT: Record Flag Reports Menu
     DESCRIPTION: This menu provides the user with functions to Display or 
                  Print Patient Record Flag Assignment Reports.
  
  f.        NAME: DGPF FLAG ASSIGNMENT REPORT
       MENU TEXT: Flag Assignment Report
     DESCRIPTION: This option enables a user to display or print all of the
                  patient assignments for Category I and/or Category II Patient 
                  Record Flags.
  
  g.        NAME: DGPF ASSIGNMENT DUE REVIEW RPT
       MENU TEXT: Assignments Due For Review Report
     DESCRIPTION: This option will be used to display or print all Category
                  I or Category II Patient Record Flag Assignments that are
                  due for review within a given date range.
  
  h.        NAME: DGPF PRF SYSTEM CONFIGURATION 
       MENU TEXT: PRF System Configuration
     DESCRIPTION: This option enables IRM staff to enable or disable the 
                  Patient Record Flag HL7 interfaces.
  
  
 2. The following new PROTOCOL(s) will be added.
  
  a.        NAME: DGPF ADD FLAG
       ITEM TEXT: Add New Record Flag
            TYPE: action
     DESCRIPTION: This action protocol allows a user to add a new
                  Category II (Local) flag within the Record Flag
                  Management [DGPF RECORD FLAG MANAGEMENT] option.
  
  b.        NAME: DGPF ASSIGN FLAG
       ITEM TEXT: Assign Flag
            TYPE: action 
     DESCRIPTION: This action protocol permits the user to assign a
                  flag to a patient within the Record Flag Assignment
                  [DGPF RECORD FLAG ASSIGNMENT] option.
  
  c.        NAME: DGPF CHANGE ASSIGNMENT OWNERSHIP
       ITEM TEXT: Change Assignment Ownership
            TYPE: action
     DESCRIPTION: This action protocol permits the user to change the site
                  ownership of a patient's flag assignment within the Record 
                  Flag Assignment [DGPF RECORD FLAG ASSIGNMENT] option.
  
  d.        NAME: DGPF CHANGE CATEGORY
       ITEM TEXT: Change Category
            TYPE: action
     DESCRIPTION: This action protocol allows the user to change the
                  category of the flag list being viewed within the
                  Record Flag Management [DGPF RECORD FLAG MANAGEMENT] 
                  option.  The user may view either Category I (National)
                  flags or Category II (Local) flags.
  
  e.        NAME: DGPF DISPLAY ASSIGNMENT DETAIL
       ITEM TEXT: Display Assignment Details
            TYPE: action
     DESCRIPTION: This action protocol permits the user to view the details 
                  of a patient's flag assignment within the Record Flag 
                  Assignment [DGPF RECORD FLAG ASSIGNMENT] option.
  
  f.        NAME: DGPF DISPLAY FLAG DETAIL
       ITEM TEXT: Display Flag Detail
            TYPE: action
     DESCRIPTION: This action protocol permits the user to view the details 
                  of a patient record flag within the Record Flag Management 
                  [DGPF RECORD FLAG MANAGEMENT] option.
  
  g.        NAME: DGPF EDIT ASSIGNMENT
       ITEM TEXT: Edit Flag Assignment
            TYPE: action
     DESCRIPTION: This action protocol permits the user to edit a patient's 
                  flag assignment within the Record Flag Assignment [DGPF 
                  RECORD FLAG ASSIGNMENT] option.
  
  h.        NAME: DGPF EDIT FLAG
       ITEM TEXT: Edit Record Flag
            TYPE: action
     DESCRIPTION: This action protocol allows a user to edit a Category II
                  (Local) flag within the Record Flag Management [DGPF
                  RECORD FLAG MANAGEMENT] option.
  
  i.        NAME: DGPF PRF ORF/R04 SUBSC
            TYPE: subscriber
     DESCRIPTION: This protocol is the subscriber protocol for the Patient 
                  Record Flags query message (QRY~R02).  The protocol will
                  return an Observation results message (ORF~R04).
  
  j.        NAME: DGPF PRF ORU/R01 EVENT
            TYPE: event driver
     DESCRIPTION: This protocol is the event protocol for Patient Record 
                  Flags assignment transmissions (ORU~R01).
  
  k.        NAME: DGPF PRF ORU/R01 SUBSC
            TYPE: subscriber
     DESCRIPTION: This protocol is the subscriber protocol for Patient Record
                  Flags assignment transmissions (ORU~R01).  
  
  l.        NAME: DGPF PRF QRY/R02 EVENT
            TYPE: event driver
     DESCRIPTION: This protocol is the event protocol for the Patient Record
                  Flags query message (QRY~R02).  
  
  m.        NAME: DGPF RECORD FLAG ASSIGNMENT MENU
            TYPE: menu
     DESCRIPTION: This protocol menu contains all the activities for 
                  creating, editing, and displaying patient record flag
                  assignments.
  
  n.        NAME: DGPF RECORD FLAG MANAGEMENT MENU
            TYPE: menu
     DESCRIPTION: This protocol menu contains all the activities for 
                  creating, editing, and displaying patient record flags.
  
  o.        NAME: DGPF SELECT PATIENT
       ITEM TEXT: Select Patient
            TYPE: action
     DESCRIPTION: This action protocol permits the user to select a patient
                  within the Record Flag Assignment [DGPF RECORD FLAG
                  ASSIGNMENT] option.
  
  p.        NAME: DGPF SORT FLAG LIST
       ITEM TEXT: Change Sort
            TYPE: action
     DESCRIPTION: This action protocol allows the user to select a sort 
                  criteria for the flag list within the Record Flag 
                  Management [DGPF RECORD FLAG MANAGEMENT] option.  The list
                  may be sorted by flag name or flag type.
  
  
 3. The following new MAIL GROUP(s) will be added.
  
  a.        NAME: DGPF BEHAVIORAL FLAG REVIEW
            TYPE: public  ALLOW SELF ENROLLMENT?: NO
     DESCRIPTION: This is the default mail group for receiving Patient
                  Record Flag Assignment Review notifications.
  
  b.        NAME: DGPF HL7 TRANSMISSION ERRORS
            TYPE: public  ALLOW SELF ENROLLMENT?: NO
     DESCRIPTION: This mail group is used to notify Patient Record Flag
                  administrators of transmission errors that occur during
                  the processing of HL7.
  
  
 4. The following new SECURITY KEY(s) will be added.
  
  a.        NAME: DGPF PRF ACCESS
       DESC NAME: Patient Record Flag Access
     DESCRIPTION: This security key is used to control access to the Patient
                  Record Flags module of the Registration package.  Holders 
                  of this key will be able to display record flag detail,
                  patient assignment detail and generate reports.
  
  b.        NAME: DGPF RECORD FLAG ASSIGNMENT
       DESC NAME: Patient Record Flag Assignment
     DESCRIPTION: This security key will be used to control user access to 
                  the Record Flag Assignment [DGPF RECORD FLAG ASSIGNMENT]
                  option.  
  
  c.        NAME: DGPF LOCAL FLAG EDIT
       DESC NAME: Local Patient Record Flag Edit
     DESCRIPTION: This security key will be used to control user access to 
                  the Record Flag Management [DGPF RECORD FLAG MANAGEMENT]
                  option action items, AF Add New Record Flag and EF Edit
                  Record Flag.
  
  d.        NAME: DGPF PRF CONFIG
       DESC NAME: Patient Record Flag Config
     DESCRIPTION: This security key controls access to the PRF System
                  Configuration [DGPF PRF SYSTEM CONFIGURATION] option.
  
  
 5. The following new LIST TEMPLATE(s) will be added.
  
  a.         NAME: DGPF ACTIVE ASSIGNMENTS
     TYPE OF LIST: DISPLAY
  
  b.         NAME: DGPF ASSIGNMENT DETAIL
     TYPE OF LIST: DISPLAY
  
  c.         NAME: DGPF FLAG DETAIL
     TYPE OF LIST: DISPLAY
  
  d.         NAME: DGPF RECORD FLAG ASSIGNMENT
     TYPE OF LIST: PROTOCOL
  
  e.         NAME: DGPF RECORD FLAG MANAGEMENT
     TYPE OF LIST: PROTOCOL
  
  
 6. The following new HL7 APPLICATION PARAMETER(s) will be added.
  
  a.  NAME: PRF-QRY            
  
  b.  NAME: PRF-QRYRESP     
  
  c.  NAME: PRF-RECV
  
  d.  NAME: PRF-SEND 
  
  
 7. The following new FILES/FIELDS will be added.
  
  a. PRF LOCAL FLAG (#26.11) file
     
     This is a new file.  The data for this file is stored in a
     new global, ^DGPF(.    
  
     Description: This file contains Category II (Local) Patient Record
     Flags that can be assigned to a patient.  Use the Record Flag
     Management [DGPF RECORD FLAG MANAGEMENT] option to create/edit entries
     in this file.
  
     Field #   Field Name
     -------   ----------
     .01       NAME 
     .02       STATUS
     .03       TYPE
     .04       REVIEW FREQUENCY DAYS
     .05       NOTIFICATION DAYS
     .06       REVIEW MAIL GROUP
     1         DESCRIPTION (Multiple)
               .01  DESCRIPTION
     2         PRINCIPAL INVESTIGATOR(S) (Multiple)
               .01  PRINCIPAL INVESTIGATOR(S)
  
  b. PRF LOCAL FLAG HISTORY (#26.12) file
  
     This is a new file.  The data for this file is stored in a
     new global, ^DGPF(.    
  
     Description: This file contains the audit information associated with
     a record in the PRF LOCAL FLAG (#26.11) file.  Entries in this file
     are created automatically by the Record Flag Management [DGPF RECORD
     FLAG MANAGEMENT] option for each creation/edit of a PRF LOCAL
     FLAG (#26.11) file entry.
  
     Field #   Field Name
     -------   ----------
     .001      NUMBER
     .01       FLAG NAME
     .02       FLAG EDIT DATE/TIME
     .03       ENTERED/EDITED BY
     .04       EDIT REASON (Multiple)
               .01  EDIT REASON
  
  c. PRF ASSIGNMENT (#26.13) file
  
     This is a new file.  The data for this file is stored in a
     new global, ^DGPF(.    
  
     Description: This file contains a list of Patient Record Flag 
     assignments.  Use the Record Flag Assignment [DGPF RECORD
     FLAG ASSIGNMENT] option to create/edit entries in this file.
  
     Field #   Field Name
     -------   ----------
     .001      NUMBER
     .01       PATIENT NAME
     .02       FLAG NAME
     .03       STATUS
     .04       OWNER SITE
     .05       ORIGINATING SITE
     .06       REVIEW DATE
     1         ASSIGNMENT NARRATIVE (Multiple)
               .01  ASSIGNMENT NARRATIVE
  
  d. PRF ASSIGNMENT HISTORY (#26.14) file
  
     This is a new file.  The data for this file is stored in a
     new global, ^DGPF(.    
  
     Description: This file contains the audit information associated 
     with a record in the PRF ASSIGNMENT (#26.13) file.  Entries in this
     file are created automatically by the Record Flag Assignment
     [DGPF RECORD FLAG ASSIGNMENT] option for each creation/edit of a PRF
     ASSIGNMENT (#26.13) file entry.
  
     Field #   Field Name
     -------   ----------
     .001      NUMBER
     .01       PRF ASSIGNMENT
     .02       DATE/TIME
     .03       ACTION
     .04       ENTERED BY
     .05       APPROVED BY
     1         HISTORY COMMENTS (Multiple)
               .01  HISTORY COMMENTS
  
  e. PRF NATIONAL FLAG (#26.15) file
  
     This is a new file.  The data for this file is stored in a
     new global, ^DGPF(.    
  
     Description:  This file contains a list of the Category I (National) 
     Patient Record Flags that can be assigned to a patient.  Category I
     flags are established at a National level and any changes to this file
     or it's entries should only be done through a national patch release.
  
     Field #   Field Name
     -------   ----------
     .01       NAME
     .02       STATUS
     .03       TYPE
     .04       REVIEW FREQUENCY DAYS
     .05       NOTIFICATION DAYS
     .06       REVIEW MAIL GROUP
     1         DESCRIPTION (Multiple)
               .01  DESCRIPTION
     2         PRINCIPAL INVESTIGATOR(S) (Multiple)
               .01  PRINCIPAL INVESTIGATOR(S)
  
  f. PRF TYPE (#26.16) file
  
     This is a new file.  The data for this file is stored in a
     new global, ^DGPF(.    
  
     Description: This file contains a list of usage classifications that 
     can be applied to a Patient Record Flag.
  
     Field #   Field Name
     -------   ----------
     .01       NAME
  
  g. PRF HL7 TRANSMISSION LOG (#26.17) file
  
     This is a new file.  The data for this file is stored in a
     new global, ^DGPF(.    
  
     Description: This file contains a list of all Unsolicited Observation 
     Update (ORU~R01) HL7 transmissions that have been generated at the
     site by the Patient Record Flags software module.  Entries in this
     file are created/edited automatically by the Patient Record Flags HL7
     interface. 
  
     Field #   Field Name
     -------   ----------
     .01       MESSAGE CONTROL ID
     .02       PRF ASSIGNMENT HISTORY
     .03       TRANSMISSION DATE/TIME
     .04       STATUS
     .05       SITE TRANSMITTED TO
     .06       ACK RECEIVED DATE/TIME
  
  h. PRF PARAMETERS (#26.18) file
  
     This is a new file.  The data for this file is stored in a
     new global, ^DGPF(.    
  
     Description: This file contains the configuration parameters for the 
     Patient Record Flag module of the Registration package.  The file
     should contain only one record numbered "1".  Modifications to the
     file should only be done through the PRF System Configuration [DGPF
     PRF SYSTEM CONFIGURATION] option.
  
     Field #   Field Name
     -------   ----------
     .01       ONE
     1         PRF SOFTWARE ACTIVATION DATE
     2         PRF HL7 UPDATE STATUS
     3         PRF HL7 QUERY STATUS
     4         PRF HL7 RETRANSMIT DATE/TIME
     5         PRF HL7 AUTO RETRANSMIT PERIOD
  
  
 8. The following new DATABASE INTEGRATION AGREEMENT (DBIA) has been added.
  
         DBIA Reference: #3860-DGPF PATIENT RECORD FLAG
      Custodial Package: Registration
    Subscribing Package: ORDER ENTRY/RESULTS REPORTING
                  Usage: Controlled Subscription
                 Status: Active
                   Type: Routine
            Description: A new Integration Agreement has been entered to
                         allow the use of the $$GETACT^DGPFAPI API within 
                         the Patient Record Flags software module (DGPF*) 
                         through controlled subscription.  The purpose of
                         this API is to facilitate the retrieval of
                         specific data that can be used for the displaying
                         of or the reporting of only ACTIVE Patient Record
                         Flags (PRF) Assignment information for a patient.
                         See the FORUM Integration Agreement #3860 for 
                         detailed information.
  
  
 9. The PATIENT LOOKUP module has been modified.
  
     Patient Lookup in VistA has been modified and will now display all
     ACTIVE patient record flag assignments for a patient.
     Specifically, a routine hook has been placed in the DGSEC routine
     within the Q tag.  For those patient's having ACTIVE patient record
     flag assignments the following will be displayed to the user:
    
     Select PATIENT NAME: PATIENT,TEST   
  
     >>> Active Patient Record Flag(s):
         <BEHAVIORAL>                      CATEGORY I
         <ABC LOCAL FLAG>                  CATEGORY II
  
     Do you wish to view active patient record flag details? YES//
  
  
 10. The following ROUTINE(s) will be added/modified.
  
   ROUTINE SUMMARY:
   ================
   The following is a list of the routine(s) included in this patch.  The
   second line of each of these routine(s) will look like:
  
         <tab>;;5.3;Registration;**[patch list]**;Aug 13, 1993
  
                           CHECK^XTSUMBLD results
      Routine name   Before Patch       After Patch         Patch List
      ============   ============       ===========         ==========
      DG10                6436217           6773589     32,109,139,149,182
                                                            326,513,425
      DG53P425                N/A           8071507             425
      DGPFAA                  N/A           6397630             425
      DGPFAA1                 N/A            752374             425
      DGPFAA2                 N/A           6366893             425
      DGPFAA3                 N/A           1122577             425
      DGPFAAH                 N/A           5168790             425
      DGPFAAH1                N/A           1001040             425
      DGPFALF                 N/A           5994397             425
      DGPFALF1                N/A           2629978             425
      DGPFALH                 N/A           4287814             425
      DGPFANF                 N/A           2660254             425
      DGPFAPI                 N/A           4606964             425
      DGPFBGR                 N/A           9316990             425
      DGPFDD                  N/A           1789200             425
      DGPFHLL                 N/A           2762690             425
      DGPFHLQ                 N/A           7683472             425
      DGPFHLQ1                N/A           2228151             425
      DGPFHLQ2                N/A           1621509             425
      DGPFHLQ3                N/A           3548528             425
      DGPFHLR                 N/A           4582161             425
      DGPFHLRT                N/A           3125613             425
      DGPFHLS                 N/A           5170135             425
      DGPFHLU                 N/A           4741779             425
      DGPFHLU1                N/A           4195205             425
      DGPFHLU2                N/A           3796834             425
      DGPFHLU3                N/A           7804885             425
      DGPFHLU4                N/A           2912439             425
      DGPFHLU5                N/A           6797283             425
      DGPFHLU6                N/A           2099373             425
      DGPFHLUT                N/A           3589792             425
      DGPFLF                  N/A            988060             425
      DGPFLF1                 N/A           7549865             425
      DGPFLF2                 N/A           2376602             425
      DGPFLF3                 N/A          13948860             425
      DGPFLF4                 N/A           9716810             425
      DGPFLF5                 N/A          13805445             425
      DGPFLF6                 N/A           6240533             425
      DGPFLFD                 N/A            780194             425
      DGPFLFD1                N/A           7319087             425
      DGPFLMA                 N/A            577419             425
      DGPFLMA1                N/A           1687222             425
      DGPFLMA2                N/A           9128428             425
      DGPFLMA3                N/A          13480202             425
      DGPFLMA4                N/A          10481453             425
      DGPFLMAD                N/A            267764             425
      DGPFLMD                 N/A            529986             425
      DGPFLMD1                N/A           3836660             425
      DGPFLMU                 N/A           3875301             425
      DGPFLMU1                N/A           7068089             425
      DGPFPARM                N/A            796848             425
      DGPFRFA                 N/A           5209879             425
      DGPFRFA1                N/A           8183644             425
      DGPFRFR                 N/A           5069773             425
      DGPFRFR1                N/A           8876593             425
      DGPFUT                  N/A           4153807             425
      DGPFUT1                 N/A           5456616             425
      DGPFUT2                 N/A           5672217             425
      DGREG              17932097          18270435      1,32,108,147,149
                                                        182,245,250,513,425
      DGRPT                366435            706092         108,149,425
      DGSEC               9408298           9714367      32,46,197,214,249
                                                          281,352,391,425
  
      Number of Routines = 61
   
  
  
 IV. SOFTWARE AND DOCUMENTATION RETRIEVAL
  
 The software for this patch is not being distributed through the National
 Patch Module.  This patch is being distributed as a host file.  The host
 file will contain a single KIDS build.
  
   Host file name: DG_53_P425.KID
            Build: DG*5.3*425
  
 Sites may retrieve the software and documentation directly using FTP
 from the following Office of Information Field Offices (OIFOs):
  
   OIFO               FTP ADDRESS                  DIRECTORY
   ------------       ------------------------     -------------
   Albany             ftp.fo-albany.med.va.gov     anonymous.software
   Hines              ftp.fo-hines.med.va.gov      anonymous.software
   Salt Lake City     ftp.fo-slc.med.va.gov        anonymous.software
  
   The following files will be available:
  
   FILE NAME             DESCRIPTION
   -----------------     -------------------------------
   DG_53_P425.KID        Host file containing KIDS software distribution
   DG_53_425_HL7IS.PDF   Patient Record Flags HL7 Interface Specification
   DG_53_425_TM.PDF      Changes to the PIMS V. 5.3 Technical Manual
   DG_53_425_RN.PDF      Release Notes on new features and functionality 
   DG_53_425_UG.PDF      User Guide for system access and use
  
   * Note:  Use ASCII mode when transferring the .KID file.
            Use Binary mode when transferring the .PDF files.
  
   VistA Intranet
   --------------
   Upon release of this patch to the field, the Patient Record Flags
   documentation will also be available through the VistA Documentation
   Library (VDL) at the following address:
  
      http://www.va.gov/vdl/Clinical.asp?appID=55
  
  
  
 V. INSTALLATION INSTRUCTIONS
  
  Pre-Installation Items:
  =======================
  
  * Environment Check:
      
     Programmer access is required for installing this patch.
  
     ** NOTE ** -- Prior to installation, the installer must ensure the  
                   DUZ(0) node of the DUZ array is set to the "@" symbol.
   
  * Users On the System:
    
     This patch modifies routines used by the Patient Lookup process and
     may affect many users.
  
     This patch also impacts the following Registration options:
       DG LOAD PATIENT DATA             Load/Edit Patient Data
       DG REGISTER PATIENT              Register a Patient
       DGRPT 10-10T REGISTRATION        10-10T Registration
  
     This patch may be installed with users on the system, but should be
     loaded during non-peak hours to minimize disruption to users and to
     reduce the possibility of errors when the routines are updated.
    
  * Software Installation Time:
  
     The estimated installation time is less than 5 minutes during off peak
     hours.
  
  * Required Builds:
    
     The following is a list of REQUIRED builds for this KIDS
     distribution.  KIDS will not allow the installation of this patch
     without their prior installation.
  
     Required Build(s):
     ------------------
     DG*5.3*391
     DG*5.3*513
  
  * File and Global Information:
  
     There is one new global, ^DGPF.  The ^DGPF global contains the 
     following (8) new files.
                                                           Journaling 
      File #   File Name                   Global Root     Recommended
      ------   ------------------------    ------------    -----------
      26.11    PRF LOCAL FLAG              ^DGPF(26.11,    YES
      26.12    PRF LOCAL FLAG HISTORY      ^DGPF(26.12,    YES
      26.13    PRF ASSIGNMENT              ^DGPF(26.13,    YES
      26.14    PRF ASSIGNMENT HISTORY      ^DGPF(26.14,    YES
      26.15    PRF NATIONAL FLAG           ^DGPF(26.15,    YES
      26.16    PRF TYPE                    ^DGPF(26.16,    YES
      26.17    PRF HL7 TRANSMISSION LOG    ^DGPF(26.17,    YES
      26.18    PRF PARAMETERS              ^DGPF(26.18,    YES
    
      The ^DGPF global must be placed with the appropriate Read/Write Global 
      Access protection prior to installing this patch.
      Note:  This should be done even if global translations are in effect.
  
  * Post-Install Routine (POST^DG53P425):
   
     Responsible for creating an initial entry in the PRF PARAMETERS
     (#26.18) file.  This file entry will contain the configuration
     parameters for the Patient Record Flags module.
  
       Field Values:
       -------------
       PRF SOFTWARE ACTIVATION DATE: SEP 25, 2003
       PRF HL7 UPDATE STATUS: ACTIVE
       PRF HL7 QUERY STATUS: DIRECT
       PRF HL7 AUTO RETRANSMIT PERIOD: 7
  
     Responsible for creating the BEHAVIORAL flag entry in the PRF
     NATIONAL FLAG (#26.15) file.
    
       Field Values:
       -------------
       NAME: BEHAVIORAL             STATUS: ACTIVE
       TYPE: BEHAVIORAL             REVIEW MAIL GROUP: DGPF BEHAVIORAL FLAG
       NOTIFICATION DAYS: 60        REVIEW FREQUENCY: 730
       DESCRIPTION: The purpose of this National Patient Record Flag is to
       alert VHA medical staff and employees of patients whose behavior or
       characteristics may pose a threat either to their safety, the safety
       of other patients, or compromise the delivery of quality health care.
       Application of National Patient Record Flags is coordinated through
       the Chief of Staff.
       This is a nationally distributed flag.
  
  
  Installation Steps:
  ===================
  
   1. Download the KIDS file DG_53_P425.KID from the ANONYMOUS.SOFTWARE
      directory of either Albany, Hines or the Salt Lake OIFO to the
      appropriate directory on your system.
  
   2. Use LOAD A DISTRIBUTION option on the KIDS INSTALLATION menu, and
      enter: DG_53_P425.KID
  
   3. Review your mapped set.  If any of the routines listed in the Routine
      Summary section of this guide are mapped, they should be removed from
      the mapped set at this time.
  
   4. From the 'Kernel Installation & Distribution System' menu, select the
      Installation menu.
  
   5. From this menu, you may now elect to use the following options (when
      prompted for INSTALL NAME, enter DG*5.3*425).
  
      a. Backup a Transport Global - This option will create a backup
         message of any routines exported with the patch.  It will NOT
         backup any changes such as DDs or templates.
  
      b. Compare Transport Global to Current System - This option will
         allow you to view all changes that will be made when the patch is
         installed.  It compares all components of the patch (routines, 
         DDs, templates, etc.).
  
      c. Verify Checksums in Transport Global - This option will allow you
         to ensure the integrity of the routines that are in the transport
         global.
  
      d. Print Transport Global - this option will allow you to view the
         components of the KIDS build.
    
   6. Use the Install Package(s) option and select package DG*5.3*425.
  
   7. When prompted for the name of the coordinator of the new mail group
      DGPF BEHAVIORAL FLAG REVIEW, please enter the name of the individual 
      that will be responsible for maintaining this mail group.  This mail
      group will receive notification messages regarding those patients 
      that have patient record flag assignments that are due for review.
  
   8. When prompted for the name of the coordinator of the new mail group
      DGPF HL7 TRANSMISSION ERRORS, please enter the name of the individual
      that will be responsible for maintaining this mail group.  This mail
      group is used to notify Patient Record Flag administrators of 
      transmission errors that occur during the processing of HL7 messages.
  
   9. When prompted 'Want KIDS to Rebuild Menu Trees Upon Completion of
      Install? YES//', respond NO.
  
  10. When prompted 'Want KIDS to INHIBIT LOGONs during the install?
      YES//', it is recommended you answer NO.
  
  11. When prompted to 'Want to DISABLE Scheduled Options, Menu Options,
      and Protocols? YES//', respond YES.  When prompted to select the
      options you would like to place out of order, enter the following:
  
       DG LOAD PATIENT DATA             Load/Edit Patient Data
       DG REGISTER PATIENT              Register a Patient
       DGRPT 10-10T REGISTRATION        10-10T Registration
     
  12. If routines were unmapped as part of Step 3, they should be returned
      to the mapped set once the installation has run to completion.
  
  13. The ENV/PRE/POST Installation routine DG53P425 may be deleted from
      your system after successful patch installation.
  
  14. Background Option (Scheduling):
      Schedule the new Patient Record Flag Background [DGPF BACKGROUND
      PROCESSING] option.  Using the SCHEDULE/UNSCHEDULE OPTIONS [XUTM
      SCHEDULE] option, schedule the option to run daily (i.e. RESCHEDULING
      FREQUENCY: D@2AM).
      The following functions are processed by this background option:
      1. Send review notification messages for pending Patient Record Flag
         Assignment reviews.
      2. Auto retransmitting of rejected HL7 Patient Record Flag Assignment
         messages.
  
  
  
 VI. IMPLEMENTATION STEPS
  
 This section contains the final steps for implementing the Patient Record
 Flags software module after the successful patch installation of DG*5.3*425.
  
 1. Menu Option assignment
  
    In order to use the Patient Record Flags software module, the new
    stand-alone Patient Record Flags Main Menu [DGPF RECORD FLAGS MAIN
    MENU] must be assigned as a secondary menu option to the appropriate  
    personnel.
   
 2. Security Keys allocation
  
    Using the Allocation of Security Keys [XUKEYALL] option of the
    Key Management [XUKEYMGMT] menu, allocate the following security keys
    to the appropriate personnel.
  
    a. DGPF PRF ACCESS
       These individuals should have the authority to access the new
       Patient Record Flags Main Menu [DGPF RECORD FLAGS MAIN MENU] option.
  
    b. DGPF RECORD FLAG ASSIGNMENT
       These individuals should have the authority to access the new
       Record Flag Assignment [DGPF RECORD FLAG ASSIGNMENT] option action
       items, 'AF  Assign Flag', 'EF  Edit Flag Assignment', and
       'CO  Change Assignment Ownership'. 
  
    c. DGPF LOCAL FLAG EDIT
       These individuals should have the authority to access the new
       Record Flag Management [DGPF RECORD FLAG MANAGEMENT] option action
       items, 'AF  Add New Record Flag' and the 'EF  Edit Record Flag'.
  
    d. DGPF PRF CONFIG
       The purpose of this key is to restrict access to the PRF System
       Configuration [DGPF PRF SYSTEM CONFIGURATION] option for all
       users except IRM staff that may need to configure the Patient
       Record Flags system parameters.
  
  3. Mail Group members
  
     The appropriate personnel should be added to the following mail groups.
  
     a. DGPF BEHAVIORAL FLAG REVIEW
        This mail group will receive notification messages regarding
        those patient's that have patient record flag assignments that
        are due for review.
  
     b. DGPF HL7 TRANSMISSION ERRORS
        This mail group is used to notify Patient Record Flag
        administrators of transmission errors that occur during the
        processing of HL7 messages.
  
  
  
 VII. TEST SITES
  
 The following sites participated in the testing of the DG*5.3*425 (Patient 
 Record Flags) software.
  
  Test Site                             Alpha              Beta
  ------------------------              -----              ----
  Albuquerque, NM                       Yes                Yes                
  El Paso, TX                           Yes                Yes
  Phoenix, AZ                           Yes                Yes
  Atlanta, GA                                              Yes
  Birmingham, AL                                           Yes
  Central Alabama VHC, AL                                  Yes
  Tuscaloosa, AL                                           Yes

Routine Information:
====================

Routine Name:
  - DGPFAA


Routine Checksum:

Routine Name:
  - DGPFAA1


Routine Checksum:

Routine Name:
  - DGPFAAH


Routine Checksum:

Routine Name:
  - DGPFAAH1


Routine Checksum:

Routine Name:
  - DGPFAPI


Routine Checksum:

Routine Name:
  - DGPFDD


Routine Checksum:

Routine Name:
  - DGPFLMA


Routine Checksum:

Routine Name:
  - DGPFLMA1


Routine Checksum:

Routine Name:
  - DGPFLMA2


Routine Checksum:

Routine Name:
  - DGPFUT


Routine Checksum:

Routine Name:
  - DGPFUT1


Routine Checksum:

Routine Name:
  - DGREG


Routine Checksum:

Routine Name:
  - DG10


Routine Checksum:

Routine Name:
  - DGRPT


Routine Checksum:

Routine Name:
  - DGSEC


Routine Checksum:

Routine Name:
  - DGPFAA2


Routine Checksum:

Routine Name:
  - DGPFALF


Routine Checksum:

Routine Name:
  - DGPFALF1


Routine Checksum:

Routine Name:
  - DGPFALH


Routine Checksum:

Routine Name:
  - DGPFANF


Routine Checksum:

Routine Name:
  - DGPFHLR


Routine Checksum:

Routine Name:
  - DGPFHLS


Routine Checksum:

Routine Name:
  - DGPFHLU


Routine Checksum:

Routine Name:
  - DGPFHLU1


Routine Checksum:

Routine Name:
  - DGPFHLU2


Routine Checksum:

Routine Name:
  - DGPFHLU3


Routine Checksum:

Routine Name:
  - DGPFHLU4


Routine Checksum:

Routine Name:
  - DGPFHLU5


Routine Checksum:

Routine Name:
  - DGPFHLUT


Routine Checksum:

Routine Name:
  - DGPFLF


Routine Checksum:

Routine Name:
  - DGPFLF1


Routine Checksum:

Routine Name:
  - DGPFLF2


Routine Checksum:

Routine Name:
  - DGPFLF3


Routine Checksum:

Routine Name:
  - DGPFLF4


Routine Checksum:

Routine Name:
  - DGPFLFD


Routine Checksum:

Routine Name:
  - DGPFLFD1


Routine Checksum:

Routine Name:
  - DGPFLMA3


Routine Checksum:

Routine Name:
  - DGPFLMA4


Routine Checksum:

Routine Name:
  - DGPFLMAD


Routine Checksum:

Routine Name:
  - DGPFLMU


Routine Checksum:

Routine Name:
  - DGPFLMU1


Routine Checksum:

Routine Name:
  - DGPFUT2


Routine Checksum:

Routine Name:
  - DGPFHLL


Routine Checksum:

Routine Name:
  - DGPFHLQ


Routine Checksum:

Routine Name:
  - DGPFHLQ1


Routine Checksum:

Routine Name:
  - DGPFHLQ2


Routine Checksum:

Routine Name:
  - DGPFHLQ3


Routine Checksum:

Routine Name:
  - DGPFLF5


Routine Checksum:

Routine Name:
  - DGPFRFA


Routine Checksum:

Routine Name:
  - DGPFRFA1


Routine Checksum:

Routine Name:
  - DGPFRFR


Routine Checksum:

Routine Name:
  - DGPFRFR1


Routine Checksum:

Routine Name:
  - DGPFLF6


Routine Checksum:

Routine Name:
  - DGPFAA3


Routine Checksum:

Routine Name:
  - DGPFBGR


Routine Checksum:

Routine Name:
  - DG53P425


Routine Checksum:

Routine Name:
  - DGPFPARM


Routine Checksum:

Routine Name:
  - DGPFLMD


Routine Checksum:

Routine Name:
  - DGPFLMD1


Routine Checksum:

Routine Name:
  - DGPFHLU6


Routine Checksum:

Routine Name:
  - DGPFHLRT


Routine Checksum:

=============================================================================
User Information:
Entered By  : LOUCK,KEVIN                   Date Entered  : OCT 31, 2001
Completed By: SHETLER,BOB                   Date Completed: SEP 04, 2003
Released By : NELSON,VICKI M                Date Released : SEP 11, 2003
=============================================================================


Packman Mail Message:
=====================

No routines included

Released RA*5*74 SEQ #65
Extracted from mail message
**KIDS**:RA*5.0*74^

**INSTALL NAME**
RA*5.0*74
"BLD",6068,0)
RA*5.0*74^RADIOLOGY/NUCLEAR MEDICINE^0^3060721^y
"BLD",6068,1,0)
^^1^1^3060627^
"BLD",6068,1,1,0)
PATIENT AGE REPORTING ISSUE FOR VISTARAD
"BLD",6068,4,0)
^9.64PA^^
"BLD",6068,6.3)
2
"BLD",6068,"ABPKG")
n
"BLD",6068,"KRN",0)
^9.67PA^8989.52^19
"BLD",6068,"KRN",.4,0)
.4
"BLD",6068,"KRN",.401,0)
.401
"BLD",6068,"KRN",.402,0)
.402
"BLD",6068,"KRN",.403,0)
.403
"BLD",6068,"KRN",.5,0)
.5
"BLD",6068,"KRN",.84,0)
.84
"BLD",6068,"KRN",3.6,0)
3.6
"BLD",6068,"KRN",3.8,0)
3.8
"BLD",6068,"KRN",9.2,0)
9.2
"BLD",6068,"KRN",9.8,0)
9.8
"BLD",6068,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",6068,"KRN",9.8,"NM",1,0)
RARTR0^^0^B38118603
"BLD",6068,"KRN",9.8,"NM","B","RARTR0",1)

"BLD",6068,"KRN",19,0)
19
"BLD",6068,"KRN",19.1,0)
19.1
"BLD",6068,"KRN",101,0)
101
"BLD",6068,"KRN",409.61,0)
409.61
"BLD",6068,"KRN",771,0)
771
"BLD",6068,"KRN",870,0)
870
"BLD",6068,"KRN",8989.51,0)
8989.51
"BLD",6068,"KRN",8989.52,0)
8989.52
"BLD",6068,"KRN",8994,0)
8994
"BLD",6068,"KRN","B",.4,.4)

"BLD",6068,"KRN","B",.401,.401)

"BLD",6068,"KRN","B",.402,.402)

"BLD",6068,"KRN","B",.403,.403)

"BLD",6068,"KRN","B",.5,.5)

"BLD",6068,"KRN","B",.84,.84)

"BLD",6068,"KRN","B",3.6,3.6)

"BLD",6068,"KRN","B",3.8,3.8)

"BLD",6068,"KRN","B",9.2,9.2)

"BLD",6068,"KRN","B",9.8,9.8)

"BLD",6068,"KRN","B",19,19)

"BLD",6068,"KRN","B",19.1,19.1)

"BLD",6068,"KRN","B",101,101)

"BLD",6068,"KRN","B",409.61,409.61)

"BLD",6068,"KRN","B",771,771)

"BLD",6068,"KRN","B",870,870)

"BLD",6068,"KRN","B",8989.51,8989.51)

"BLD",6068,"KRN","B",8989.52,8989.52)

"BLD",6068,"KRN","B",8994,8994)

"BLD",6068,"QUES",0)
^9.62^^
"BLD",6068,"REQB",0)
^9.611^1^1
"BLD",6068,"REQB",1,0)
RA*5.0*26^1
"BLD",6068,"REQB","B","RA*5.0*26",1)

"MBREQ")
0
"PKG",18,-1)
1^1
"PKG",18,0)
RADIOLOGY/NUCLEAR MEDICINE^RA^REGISTERS PATIENTS,RECORDS EXAMS,PROFILES,AMIS REPORTS
"PKG",18,20,0)
^9.402P^^
"PKG",18,22,0)
^9.49I^1^1
"PKG",18,22,1,0)
5.0^3051109^2980407^50
"PKG",18,22,1,"PAH",1,0)
74^3060721
"PKG",18,22,1,"PAH",1,1,0)
^^1^1^3060721
"PKG",18,22,1,"PAH",1,1,1,0)
PATIENT AGE REPORTING ISSUE FOR VISTARAD
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","RARTR0")
0^1^B38118603^B37216582
"RTN","RARTR0",1,0)
RARTR0 ;HISC/GJC-Queue/Print Radiology Rpts utility routine. ;1/8/97  08:07
"RTN","RARTR0",2,0)
 ;;5.0;Radiology/Nuclear Medicine;**8,26,74**;Mar 16, 1998;Build 2
"RTN","RARTR0",3,0)
 ; 06/28/2006 BAY/KAM Remedy Call 146291 - Change Patient Age to DOB
"RTN","RARTR0",4,0)
EN1 ; Called from RARTR
"RTN","RARTR0",5,0)
 S RARPT(0)=$G(^RARPT(+$G(RARPT),0)) Q:RARPT(0)']""
"RTN","RARTR0",6,0)
 S RARPT(10)=$P(RARPT(0),"^",10)
"RTN","RARTR0",7,0)
 S RAVERF=+$P(RARPT(0),U,9),RAPVERF=+$P(RARPT(0),U,13)
"RTN","RARTR0",8,0)
 S RAPIR=+$P(RALB,"^",12),RAPIS=+$P(RALB,"^",15)
"RTN","RARTR0",9,0)
 S RAWHOVER=+$P(RARPT(0),"^",17)
"RTN","RARTR0",10,0)
 I RAVERF,((RAPIR=RAVERF)!(RAPIS=RAVERF)) D
"RTN","RARTR0",11,0)
 . S RAVERFND="" ; Set verifier found flag
"RTN","RARTR0",12,0)
 . Q
"RTN","RARTR0",13,0)
 I RAPIS D  Q:$D(RAOOUT)
"RTN","RARTR0",14,0)
 . S RALBS=$E($P($G(^VA(200,RAPIS,20)),"^",2),1,25)
"RTN","RARTR0",15,0)
 . S:RALBS']"" RALBS=$E($P($G(VA(200,RAPIS,0)),"^"),1,25)
"RTN","RARTR0",16,0)
 . S RALBST=$P($G(^VA(200,RAPIS,20)),"^",3) ; max: 50 chars
"RTN","RARTR0",17,0)
 . I RALBST']"" S RALBST=$$TITLE^RARTR0(RAPIS)
"RTN","RARTR0",18,0)
 . I '$D(RAUTOE) D:($Y+RAFOOT+4)>IOSL HANG^RARTR2 Q:$D(RAOOUT)
"RTN","RARTR0",19,0)
 . I '$D(RAUTOE) D HD^RARTR:($Y+RAFOOT+4)>IOSL
"RTN","RARTR0",20,0)
 . I '$D(RAUTOE) D
"RTN","RARTR0",21,0)
 .. W !,"Primary Interpreting Staff:"
"RTN","RARTR0",22,0)
 .. W !?2,$S(RALBS]"":RALBS,1:"Unknown"),", ",$E(RALBST,1,((IOM-$X)-16))
"RTN","RARTR0",23,0)
 .. ; The '-16' above is derived from $L("(Pre-Verifier)")+1 FORMATTING
"RTN","RARTR0",24,0)
 .. Q
"RTN","RARTR0",25,0)
 . E  D
"RTN","RARTR0",26,0)
 .. S ^TMP($J,"RA AUTOE",$$INCR^RAUTL4(RAACNT))="Primary Interpreting Staff:"
"RTN","RARTR0",27,0)
 .. S ^TMP($J,"RA AUTOE",$$INCR^RAUTL4(RAACNT))="  "_$S(RALBS]"":RALBS,1:"Unknown")
"RTN","RARTR0",28,0)
 .. N RALEN S RALEN=$L(^TMP($J,"RA AUTOE",RAACNT))
"RTN","RARTR0",29,0)
 .. S ^TMP($J,"RA AUTOE",RAACNT)=^TMP($J,"RA AUTOE",RAACNT)_", "_$E(RALBST,1,((80-RALEN)-16))
"RTN","RARTR0",30,0)
 .. Q
"RTN","RARTR0",31,0)
 . I $D(RAVERFND)&(RAPIS=RAVERF) D
"RTN","RARTR0",32,0)
 .. I $G(RARPT(10))']"",('$D(RAUTOE)) D  Q
"RTN","RARTR0",33,0)
 ... W:RAWHOVER=RAPIS !?10,"(Verifier, no e-sig)"
"RTN","RARTR0",34,0)
 ... W:RAWHOVER'=RAPIS !?10,"Verified by transcriptionist for "_RALBS  ;Removed RA*5*8 _", M.D."
"RTN","RARTR0",35,0)
 ... Q
"RTN","RARTR0",36,0)
 .. I $G(RARPT(10))']"",($D(RAUTOE)) D  Q
"RTN","RARTR0",37,0)
 ... S:RAWHOVER=RAPIS ^TMP($J,"RA AUTOE",$$INCR^RAUTL4(RAACNT))="          (Verifier, no e-sig)"
"RTN","RARTR0",38,0)
 ... S:RAWHOVER'=RAPIS ^TMP($J,"RA AUTOE",$$INCR^RAUTL4(RAACNT))="          Verified by transcriptionist for "_RALBS  ;Removed RA*5*8 _", M.D."
"RTN","RARTR0",39,0)
 ... Q
"RTN","RARTR0",40,0)
 .. W:'$D(RAUTOE) " (Verifier)"
"RTN","RARTR0",41,0)
 .. S:$D(RAUTOE) ^TMP($J,"RA AUTOE",RAACNT)=^TMP($J,"RA AUTOE",RAACNT)_" (Verifier)"
"RTN","RARTR0",42,0)
 .. Q
"RTN","RARTR0",43,0)
 . I RAPIS=RAPVERF,'$D(RAUTOE) W " (Pre-Verifier)"
"RTN","RARTR0",44,0)
 . I RAPIS=RAPVERF,$D(RAUTOE) S ^TMP($J,"RA AUTOE",RAACNT)=^TMP($J,"RA AUTOE",RAACNT)_" (Pre-Verifier)"
"RTN","RARTR0",45,0)
 . Q
"RTN","RARTR0",46,0)
 D SECSTF^RARTR1 Q:$D(RAOOUT)  ; Print secondary interp'ting staff now
"RTN","RARTR0",47,0)
 I RAPIR D  Q:$D(RAOOUT)
"RTN","RARTR0",48,0)
 . S RALBR=$E($P($G(^VA(200,RAPIR,20)),"^",2),1,25)
"RTN","RARTR0",49,0)
 . S:RALBR']"" RALBR=$E($P($G(VA(200,RAPIR,0)),"^"),1,25)
"RTN","RARTR0",50,0)
 . S RALBRT=$P($G(^VA(200,RAPIR,20)),"^",3) ; max: 50 chars
"RTN","RARTR0",51,0)
 . I RALBRT']"" S RALBRT=$$TITLE^RARTR0(RAPIR)
"RTN","RARTR0",52,0)
 . I '$D(RAUTOE) D:($Y+RAFOOT+4)>IOSL HANG^RARTR2 Q:$D(RAOOUT)
"RTN","RARTR0",53,0)
 . I '$D(RAUTOE) D HD^RARTR:($Y+RAFOOT+4)>IOSL
"RTN","RARTR0",54,0)
 . W:'$D(RAUTOE) !,"Primary Interpreting Resident:"
"RTN","RARTR0",55,0)
 . W:'$D(RAUTOE) !?2,$S(RALBR]"":RALBR,1:"Unknown")_", ",$E(RALBRT,1,((IOM-$X)-16))
"RTN","RARTR0",56,0)
 . ; The '-16' above is derived from $L("(Pre-Verifier)")+1 FORMATTING
"RTN","RARTR0",57,0)
 . I $D(RAUTOE) D
"RTN","RARTR0",58,0)
 .. S ^TMP($J,"RA AUTOE",$$INCR^RAUTL4(RAACNT))="Primary Interpreting Resident:"
"RTN","RARTR0",59,0)
 .. S ^TMP($J,"RA AUTOE",$$INCR^RAUTL4(RAACNT))="  "_$S(RALBR]"":RALBR,1:"Unknown")
"RTN","RARTR0",60,0)
 .. N RALEN S RALEN=$L(^TMP($J,"RA AUTOE",RAACNT))
"RTN","RARTR0",61,0)
 .. S ^TMP($J,"RA AUTOE",RAACNT)=^TMP($J,"RA AUTOE",RAACNT)_", "_$E(RALBRT,1,((80-RALEN)-16))
"RTN","RARTR0",62,0)
 .. Q
"RTN","RARTR0",63,0)
 . I $D(RAVERFND)&(RAPIR=RAVERF) D
"RTN","RARTR0",64,0)
 .. I $G(RARPT(10))']"",('$D(RAUTOE)) D  Q
"RTN","RARTR0",65,0)
 ... W:RAWHOVER=RAPIR !?10,"(Verifier, no e-sig)"
"RTN","RARTR0",66,0)
 ... W:RAWHOVER'=RAPIR !?10,"Verified by transcriptionist for "_RALBR  ;Removed RA*5*8 _", M.D."
"RTN","RARTR0",67,0)
 ... Q
"RTN","RARTR0",68,0)
 .. I $G(RARPT(10))']"",($D(RAUTOE)) D  Q
"RTN","RARTR0",69,0)
 ... S:RAWHOVER=RAPIR ^TMP($J,"RA AUTOE",$$INCR^RAUTL4(RAACNT))="          (Verifier, no e-sig)"
"RTN","RARTR0",70,0)
 ... S:RAWHOVER'=RAPIR ^TMP($J,"RA AUTOE",$$INCR^RAUTL4(RAACNT))="          Verified by transcriptionist for "_RALBR  ;Removed RA*5*8 _", M.D."
"RTN","RARTR0",71,0)
 ... Q
"RTN","RARTR0",72,0)
 .. W:'$D(RAUTOE) " (Verifier)"
"RTN","RARTR0",73,0)
 .. S:$D(RAUTOE) ^TMP($J,"RA AUTOE",RAACNT)=^TMP($J,"RA AUTOE",RAACNT)_" (Verifier)"
"RTN","RARTR0",74,0)
 .. Q
"RTN","RARTR0",75,0)
 . I RAPIR=RAPVERF,('$D(RAUTOE)) W " (Pre-Verifier)"
"RTN","RARTR0",76,0)
 . I RAPIR=RAPVERF,($D(RAUTOE)) S ^TMP($J,"RA AUTOE",RAACNT)=^TMP($J,"RA AUTOE",RAACNT)_" (Pre-Verifier)"
"RTN","RARTR0",77,0)
 . Q
"RTN","RARTR0",78,0)
 D SECRES^RARTR1 ; Print out secondary interp'ting resident now
"RTN","RARTR0",79,0)
 Q
"RTN","RARTR0",80,0)
TITLE(X) ; Determine an individuals title
"RTN","RARTR0",81,0)
 ; 'X' is the IEN of the Primary Interpreting Resident i.e, ^DD(70.03,12
"RTN","RARTR0",82,0)
 ; -OR-
"RTN","RARTR0",83,0)
 ; 'X' is the IEN of the Primary Interpreting Staff i.e, ^DD(70.03,15
"RTN","RARTR0",84,0)
 N Y
"RTN","RARTR0",85,0)
 I $D(^VA(200,"ARC","R",X)) S Y="Resident Physician" Q Y
"RTN","RARTR0",86,0)
 I $D(^VA(200,"ARC","S",X)) S Y="Staff Physician" Q Y
"RTN","RARTR0",87,0)
 S Y=""
"RTN","RARTR0",88,0)
 Q Y
"RTN","RARTR0",89,0)
HEAD ; Set up header info for e-mail message (called from INIT^RARTR)
"RTN","RARTR0",90,0)
 ; 06/28/2006 BAY/KAM Remedy Call 146291 Change Patient Age to DOB
"RTN","RARTR0",91,0)
 N RAGE,RATPHY,RACSE,RAILOC,RANME,RAPRIPHY,RAPTLOC,RAREQPHY,RASERV,RASEX,RADOB
"RTN","RARTR0",92,0)
 N RASPACE,RASSN,X1,X2 S:'$D(RAACNT) RAACNT=0
"RTN","RARTR0",93,0)
 ;Added next line for Remedy Call 146291
"RTN","RARTR0",94,0)
 D DT^DILF("E",$P(RAY0,"^",3),.RADOB) ;Get Date of Birth/External Fmt
"RTN","RARTR0",95,0)
 ;
"RTN","RARTR0",96,0)
 S RANME=$P(RAY0,"^"),RASSN=$P(RAY0,"^",9)
"RTN","RARTR0",97,0)
 S RASEX=$$UP^XLFSTR($P(RAY0,"^",2))
"RTN","RARTR0",98,0)
 S RACSE=$P($G(^RARPT(RARPT,0)),"^")_"@"_$P($$FMTE^XLFDT($P(RAY2,"^")),"@",2)
"RTN","RARTR0",99,0)
 ; Remedy Call 146291 Removed line calculating age
"RTN","RARTR0",100,0)
 S RAREQPHY=$$XTERNAL^RAUTL5($P(RAY3,"^",14),$P($G(^DD(70.03,14,0)),"^",2))
"RTN","RARTR0",101,0)
 S RAPTLOC=$$PTLOC^RAUTL12() S:RAREQPHY']"" RAREQPHY="Unknown"
"RTN","RARTR0",102,0)
 S RASERV=$$XTERNAL^RAUTL5($P(RAY3,"^",7),$P($G(^DD(70.03,7,0)),"^",2))
"RTN","RARTR0",103,0)
 S RATPHY=$$ATND^RAUTL5(RADFN,DT),RAPRIPHY=$$PRIM^RAUTL5(RADFN,DT)
"RTN","RARTR0",104,0)
 S RAILOC=$$XTERNAL^RAUTL5($P(RAY2,"^",4),$P($G(^DD(70.02,4,0)),"^",2))
"RTN","RARTR0",105,0)
 S:RAILOC']"" RAILOC="Unknown" S:RASERV']"" RASERV="Unknown"
"RTN","RARTR0",106,0)
 S RANME=$E(RANME,1,20)_"  "
"RTN","RARTR0",107,0)
 S RASSN=$E(RASSN,1,3)_"-"_$E(RASSN,4,5)_"-"_$E(RASSN,6,9)_"    "
"RTN","RARTR0",108,0)
 ; Remedy Call 146291 Changed next line to use RADOB(0)
"RTN","RARTR0",109,0)
 S RAGE="DOB-"_RADOB(0)_" "_$S(RASEX="F":"F",RASEX="M":"M",1:"UNK")
"RTN","RARTR0",110,0)
 S $P(RASPACE," ",(22-$L(RAGE)))=""
"RTN","RARTR0",111,0)
 S RAGE=RAGE_RASPACE,RACSE="Case: "_RACSE
"RTN","RARTR0",112,0)
 S RAREQPHY="Req Phys: "_$E(RAREQPHY,1,28)
"RTN","RARTR0",113,0)
 S RASPACE="",$P(RASPACE," ",(42-$L(RAREQPHY)))=""
"RTN","RARTR0",114,0)
 S RAREQPHY=RAREQPHY_RASPACE
"RTN","RARTR0",115,0)
 S RAPTLOC="Pat Loc: "_$S(RAPTLOC]"":$E(RAPTLOC,1,30),1:"Unknown")
"RTN","RARTR0",116,0)
 S RATPHY="Att Phys: "_$E(RATPHY,1,28)
"RTN","RARTR0",117,0)
 S RASPACE="",$P(RASPACE," ",(42-$L(RATPHY)))=""
"RTN","RARTR0",118,0)
 S RATPHY=RATPHY_RASPACE
"RTN","RARTR0",119,0)
 S RAILOC="Img Loc: "_$E(RAILOC,1,30)
"RTN","RARTR0",120,0)
 S RAPRIPHY="Pri Phys: "_$E(RAPRIPHY,1,28)
"RTN","RARTR0",121,0)
 S RASPACE="",$P(RASPACE," ",(42-$L(RAPRIPHY)))=""
"RTN","RARTR0",122,0)
 S RAPRIPHY=RAPRIPHY_RASPACE
"RTN","RARTR0",123,0)
 S RASERV="Service: "_$E(RASERV,1,30)
"RTN","RARTR0",124,0)
 S ^TMP($J,"RA AUTOE",$$INCR^RAUTL4(RAACNT))=RANME_RASSN_RAGE_RACSE
"RTN","RARTR0",125,0)
 S ^TMP($J,"RA AUTOE",$$INCR^RAUTL4(RAACNT))=RAREQPHY_RAPTLOC
"RTN","RARTR0",126,0)
 S ^TMP($J,"RA AUTOE",$$INCR^RAUTL4(RAACNT))=RATPHY_RAILOC
"RTN","RARTR0",127,0)
 S ^TMP($J,"RA AUTOE",$$INCR^RAUTL4(RAACNT))=RAPRIPHY_RASERV
"RTN","RARTR0",128,0)
 S:$D(RAERRFLG) ^TMP($J,"RA AUTOE",$$INCR^RAUTL4(RAACNT))="         "_$$AMENRPT^RARTR2()
"RTN","RARTR0",129,0)
 S ^TMP($J,"RA AUTOE",$$INCR^RAUTL4(RAACNT))=""
"RTN","RARTR0",130,0)
 Q
"VER")
8.0^22.0
"BLD",6068,6)
^65
**END**
**END**

Released GMRC*3*32 SEQ #33
Extracted from mail message
**KIDS**:GMRC*3.0*32^

**INSTALL NAME**
GMRC*3.0*32
"BLD",4202,0)
GMRC*3.0*32^CONSULT/REQUEST TRACKING^0^3030523^y
"BLD",4202,1,0)
^^2^2^3030225^
"BLD",4202,1,1,0)
See the National Patch Module for full details of the enhancements 
"BLD",4202,1,2,0)
included in this build. 
"BLD",4202,4,0)
^9.64PA^123.1^1
"BLD",4202,4,123.1,0)
123.1
"BLD",4202,4,123.1,222)
n^y^f^^y^^y^o^n
"BLD",4202,4,123.1,224)
I Y=26
"BLD",4202,4,"B",123.1,123.1)

"BLD",4202,"KRN",0)
^9.67PA^8989.52^19
"BLD",4202,"KRN",.4,0)
.4
"BLD",4202,"KRN",.401,0)
.401
"BLD",4202,"KRN",.402,0)
.402
"BLD",4202,"KRN",.403,0)
.403
"BLD",4202,"KRN",.5,0)
.5
"BLD",4202,"KRN",.84,0)
.84
"BLD",4202,"KRN",3.6,0)
3.6
"BLD",4202,"KRN",3.8,0)
3.8
"BLD",4202,"KRN",9.2,0)
9.2
"BLD",4202,"KRN",9.8,0)
9.8
"BLD",4202,"KRN",9.8,"NM",0)
^9.68A^3^3
"BLD",4202,"KRN",9.8,"NM",1,0)
GMRCSLM1^^0^B55643288
"BLD",4202,"KRN",9.8,"NM",2,0)
GMRCYP31^^0^B20507412
"BLD",4202,"KRN",9.8,"NM",3,0)
GMRCAD31^^0^B43519505
"BLD",4202,"KRN",9.8,"NM","B","GMRCAD31",3)

"BLD",4202,"KRN",9.8,"NM","B","GMRCSLM1",1)

"BLD",4202,"KRN",9.8,"NM","B","GMRCYP31",2)

"BLD",4202,"KRN",19,0)
19
"BLD",4202,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",4202,"KRN",19,"NM",1,0)
GMRC ADMP31 CORRECTIONS^^0
"BLD",4202,"KRN",19,"NM","B","GMRC ADMP31 CORRECTIONS",1)

"BLD",4202,"KRN",19.1,0)
19.1
"BLD",4202,"KRN",101,0)
101
"BLD",4202,"KRN",101,"NM",0)
^9.68A^3^3
"BLD",4202,"KRN",101,"NM",1,0)
GMRCAD31 ADM CORR MENU^^0
"BLD",4202,"KRN",101,"NM",2,0)
GMRCADM EDIT ACTION^^0
"BLD",4202,"KRN",101,"NM",3,0)
GMRCADM SELECT NEW CSLT^^0
"BLD",4202,"KRN",101,"NM","B","GMRCAD31 ADM CORR MENU",1)

"BLD",4202,"KRN",101,"NM","B","GMRCADM EDIT ACTION",2)

"BLD",4202,"KRN",101,"NM","B","GMRCADM SELECT NEW CSLT",3)

"BLD",4202,"KRN",409.61,0)
409.61
"BLD",4202,"KRN",409.61,"NM",0)
^9.68A^1^1
"BLD",4202,"KRN",409.61,"NM",1,0)
GMRC ADM31^^0
"BLD",4202,"KRN",409.61,"NM","B","GMRC ADM31",1)

"BLD",4202,"KRN",771,0)
771
"BLD",4202,"KRN",870,0)
870
"BLD",4202,"KRN",8989.51,0)
8989.51
"BLD",4202,"KRN",8989.52,0)
8989.52
"BLD",4202,"KRN",8994,0)
8994
"BLD",4202,"KRN","B",.4,.4)

"BLD",4202,"KRN","B",.401,.401)

"BLD",4202,"KRN","B",.402,.402)

"BLD",4202,"KRN","B",.403,.403)

"BLD",4202,"KRN","B",.5,.5)

"BLD",4202,"KRN","B",.84,.84)

"BLD",4202,"KRN","B",3.6,3.6)

"BLD",4202,"KRN","B",3.8,3.8)

"BLD",4202,"KRN","B",9.2,9.2)

"BLD",4202,"KRN","B",9.8,9.8)

"BLD",4202,"KRN","B",19,19)

"BLD",4202,"KRN","B",19.1,19.1)

"BLD",4202,"KRN","B",101,101)

"BLD",4202,"KRN","B",409.61,409.61)

"BLD",4202,"KRN","B",771,771)

"BLD",4202,"KRN","B",870,870)

"BLD",4202,"KRN","B",8989.51,8989.51)

"BLD",4202,"KRN","B",8989.52,8989.52)

"BLD",4202,"KRN","B",8994,8994)

"BLD",4202,"QUES",0)
^9.62^^
"BLD",4202,"REQB",0)
^9.611^2^2
"BLD",4202,"REQB",1,0)
GMRC*3.0*22^2
"BLD",4202,"REQB",2,0)
GMRC*3.0*31^2
"BLD",4202,"REQB","B","GMRC*3.0*22",1)

"BLD",4202,"REQB","B","GMRC*3.0*31",2)

"DATA",123.1,26,0)
ADMIN. CORRECTION^^^^^^^ADMIN CORRECT
"FIA",123.1)
REQUEST ACTION TYPES
"FIA",123.1,0)
^GMR(123.1,
"FIA",123.1,0,0)
123.1
"FIA",123.1,0,1)
n^y^f^^y^^y^o^n
"FIA",123.1,0,10)

"FIA",123.1,0,11)
I Y=26
"FIA",123.1,0,"RLRO")

"FIA",123.1,0,"VR")
3.0^GMRC
"FIA",123.1,123.1)
0
"KRN",19,9127,-1)
0^1
"KRN",19,9127,0)
GMRC ADMP31 CORRECTIONS^Limited IFC Admin corrections^^R^^^^^^^^CONSULT/REQUEST TRACKING
"KRN",19,9127,1,0)
^^4^4^3030225^
"KRN",19,9127,1,1,0)
This option allows the comment on a limited number of activities taken on
"KRN",19,9127,1,2,0)
Inter-facility Consults to be corrected.  The activities that may be
"KRN",19,9127,1,3,0)
edited are limited to those found on the post-install report from
"KRN",19,9127,1,4,0)
GMRC*3*31.
"KRN",19,9127,25)
EN^GMRCAD31
"KRN",19,9127,"U")
LIMITED IFC ADMIN CORRECTIONS
"KRN",101,6294,-1)
0^3
"KRN",101,6294,0)
GMRCADM SELECT NEW CSLT^Select new Consult^^A^^^^^^^^CONSULT/REQUEST TRACKING
"KRN",101,6294,1,0)
^^2^2^3030203^
"KRN",101,6294,1,1,0)
This protocol is used to select a new consult on which to 
"KRN",101,6294,1,2,0)
make administrative corrections.
"KRN",101,6294,15)
S VALMBCK="R"
"KRN",101,6294,20)
D NEWCSLT^GMRCAD31
"KRN",101,6294,99)
59203,47716
"KRN",101,6295,-1)
0^2
"KRN",101,6295,0)
GMRCADM EDIT ACTION^Edit consult action^^A^^^^^^^^CONSULT/REQUEST TRACKING
"KRN",101,6295,1,0)
^101.06^2^2^3030220^^
"KRN",101,6295,1,1,0)
The protocol is used to select the activity on which to make an 
"KRN",101,6295,1,2,0)
administrative correction.
"KRN",101,6295,15)
S VALMBCK="R"
"KRN",101,6295,20)
D SELACT^GMRCAD31
"KRN",101,6295,99)
59220,35217
"KRN",101,6296,-1)
0^1
"KRN",101,6296,0)
GMRCAD31 ADM CORR MENU^Corrective actions menu^^M^^^^^^^^
"KRN",101,6296,1,0)
^101.06^2^2^3030220^^
"KRN",101,6296,1,1,0)
This menu contains the actions that may be taken for administrative 
"KRN",101,6296,1,2,0)
corrections.
"KRN",101,6296,4)
39^3
"KRN",101,6296,10,0)
^101.01PA^2^2
"KRN",101,6296,10,1,0)
6294^SC^1^
"KRN",101,6296,10,1,"^")
GMRCADM SELECT NEW CSLT
"KRN",101,6296,10,2,0)
6295^ED^2^
"KRN",101,6296,10,2,"^")
GMRCADM EDIT ACTION
"KRN",101,6296,26)
D SHOW^VALM
"KRN",101,6296,99)
59225,38442
"KRN",409.61,884,-1)
0^1
"KRN",409.61,884,0)
GMRC ADM31^1^^80^4^21^0^1^Administrative corrections^GMRCAD31 ADM CORR MENU^Administrative corrections^1^^1
"KRN",409.61,884,1)
^VALM HIDDEN ACTIONS
"KRN",409.61,884,"ARRAY")
 ^TMP("GMRCADM",$J)
"KRN",409.61,884,"FNL")
D EXIT^GMRCAD31
"KRN",409.61,884,"HDR")
D HDR^GMRCAD31
"KRN",409.61,884,"HLP")

"KRN",409.61,884,"INIT")
D INIT^GMRCAD31
"MBREQ")
0
"ORD",15,101)
101;15;;;PRO^XPDTA;PROF1^XPDIA;PROE1^XPDIA;PROF2^XPDIA;;PRODEL^XPDIA
"ORD",15,101,0)
PROTOCOL
"ORD",17,409.61)
409.61;17;1;;;;;;;LMDEL^XPDIA1
"ORD",17,409.61,0)
LIST TEMPLATE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PGL",123.1,0,2,1)
RELATED OE/RR STATUS^P100.01'^ORD(100.01,^0;2^Q
"PKG",128,-1)
1^1
"PKG",128,0)
CONSULT/REQUEST TRACKING^GMRC^13
"PKG",128,20,0)
^9.402P^^
"PKG",128,22,0)
^9.49I^1^1
"PKG",128,22,1,0)
3.0^2980101
"PKG",128,22,1,"PAH",1,0)
32^3030523
"PKG",128,22,1,"PAH",1,1,0)
^^2^2^3030523
"PKG",128,22,1,"PAH",1,1,1,0)
See the National Patch Module for full details of the enhancements 
"PKG",128,22,1,"PAH",1,1,2,0)
included in this build. 
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
3
"RTN","GMRCAD31")
0^3^B43519505
"RTN","GMRCAD31",1,0)
GMRCAD31 ;SLC/JFR - admin corrections on cons. activities; 2/19/03 14:09
"RTN","GMRCAD31",2,0)
 ;;3.0;CONSULT/REQUEST TRACKING;**32**;DEC 27, 1997
"RTN","GMRCAD31",3,0)
EN ;Start prompting and prepare to build a list
"RTN","GMRCAD31",4,0)
 N GMRCIEN
"RTN","GMRCAD31",5,0)
 S GMRCIEN=$$GETCSLT
"RTN","GMRCAD31",6,0)
 I 'GMRCIEN W !,"No Consult selected." Q
"RTN","GMRCAD31",7,0)
 I '$$CKACTS(GMRCIEN) D  G EN
"RTN","GMRCAD31",8,0)
 . W !,"The request has no activities meeting editing criteria"
"RTN","GMRCAD31",9,0)
 . H 2
"RTN","GMRCAD31",10,0)
 D BLDLST(GMRCIEN)
"RTN","GMRCAD31",11,0)
 D EN^VALM("GMRC ADM31")
"RTN","GMRCAD31",12,0)
 Q
"RTN","GMRCAD31",13,0)
 ;
"RTN","GMRCAD31",14,0)
GETCSLT() ;
"RTN","GMRCAD31",15,0)
 N DIR,DIRUT,DIROUT,DTOUT,DUOUT,X,Y
"RTN","GMRCAD31",16,0)
 D EN^DDIOL("You may only select IFC requests ordered at your facility")
"RTN","GMRCAD31",17,0)
 D EN^DDIOL(" ")
"RTN","GMRCAD31",18,0)
 S DIR(0)="PAO^123"
"RTN","GMRCAD31",19,0)
 S DIR("?")="Select an inter-facility request being performed elsewhere"
"RTN","GMRCAD31",20,0)
 S DIR("A")="Select Consult #: "
"RTN","GMRCAD31",21,0)
 S DIR("S")="I $P($G(^GMR(123,+Y,12)),U,5)=""P"""
"RTN","GMRCAD31",22,0)
 D ^DIR
"RTN","GMRCAD31",23,0)
 I '$G(Y) Q ""
"RTN","GMRCAD31",24,0)
 Q +Y
"RTN","GMRCAD31",25,0)
 Q
"RTN","GMRCAD31",26,0)
 ;
"RTN","GMRCAD31",27,0)
NEWCSLT ; select a new consult to work on
"RTN","GMRCAD31",28,0)
 D FULL^VALM1
"RTN","GMRCAD31",29,0)
 N GMRCIEN
"RTN","GMRCAD31",30,0)
 S GMRCIEN=$$GETCSLT
"RTN","GMRCAD31",31,0)
 I 'GMRCIEN D  D INIT Q
"RTN","GMRCAD31",32,0)
 . N DIR,DIRUT,DIROUT,DTOUT,DUOUT,X,Y
"RTN","GMRCAD31",33,0)
 . S DIR(0)="E" D ^DIR
"RTN","GMRCAD31",34,0)
 . Q
"RTN","GMRCAD31",35,0)
 I '$$CKACTS(GMRCIEN) D  D INIT Q
"RTN","GMRCAD31",36,0)
 . W !,"The request has no activities meeting editing criteria"
"RTN","GMRCAD31",37,0)
 D EXIT,BLDLST(GMRCIEN),INIT
"RTN","GMRCAD31",38,0)
 Q
"RTN","GMRCAD31",39,0)
 ;
"RTN","GMRCAD31",40,0)
SELACT ; choose which action to edit
"RTN","GMRCAD31",41,0)
 D FULL^VALM1
"RTN","GMRCAD31",42,0)
 N DIR,DIRUT,DIROUT,DTOUT,DUOUT,X,Y,GMRCO
"RTN","GMRCAD31",43,0)
 D EN^DDIOL("You may only select one of the listed activities.")
"RTN","GMRCAD31",44,0)
 D EN^DDIOL(" ")
"RTN","GMRCAD31",45,0)
 S DIR(0)="NAO^2:50"
"RTN","GMRCAD31",46,0)
 S DIR("A")="Select an activity from the list by number: "
"RTN","GMRCAD31",47,0)
 D ^DIR
"RTN","GMRCAD31",48,0)
 I $D(DIRUT) S VALMBCK="R" Q
"RTN","GMRCAD31",49,0)
 I '$D(^TMP("GMRCADM",$J,"B",+Y)) D  G SELACT
"RTN","GMRCAD31",50,0)
 . D EN^DDIOL("That is not a listed activity",,"!!?5")
"RTN","GMRCAD31",51,0)
 S GMRCO=$G(^TMP("GMRCADM",$J,"CSLT"))
"RTN","GMRCAD31",52,0)
 D FIX(GMRCO,+Y)
"RTN","GMRCAD31",53,0)
 D EXIT,BLDLST(GMRCO),INIT
"RTN","GMRCAD31",54,0)
 S VALMBCK="R"
"RTN","GMRCAD31",55,0)
 Q
"RTN","GMRCAD31",56,0)
 ;
"RTN","GMRCAD31",57,0)
BLDLST(GMRCDA) ;build the list for LM
"RTN","GMRCAD31",58,0)
 ; Input: 
"RTN","GMRCAD31",59,0)
 ;  GMRCDA = ien from file 123
"RTN","GMRCAD31",60,0)
 ;
"RTN","GMRCAD31",61,0)
 K ^TMP("GMRCADM",$J)
"RTN","GMRCAD31",62,0)
 N PTNM,PTSSN,REMSIT,REMNUM,GMRCCT,TAB
"RTN","GMRCAD31",63,0)
 S ^TMP("GMRCADM",$J,"CSLT")=GMRCDA
"RTN","GMRCAD31",64,0)
 S GMRCCT=1,TAB=$$REPEAT^XLFSTR(" ",29)
"RTN","GMRCAD31",65,0)
 S PTNM="Patient name: "_$$GET1^DIQ(123,GMRCDA,.02,"E")
"RTN","GMRCAD31",66,0)
 S PTSSN="SSN: "_$$GET1^DIQ(2,$P(^GMR(123,GMRCDA,0),U,2),.09)
"RTN","GMRCAD31",67,0)
 S REMSIT="Receiving Site: "
"RTN","GMRCAD31",68,0)
 S REMSIT=REMSIT_$$GET1^DIQ(4,$P(^GMR(123,GMRCDA,0),U,23),.01)
"RTN","GMRCAD31",69,0)
 S REMNUM="Remote Consult #: "_$P(^GMR(123,GMRCDA,0),U,22)
"RTN","GMRCAD31",70,0)
 S ^TMP("GMRCADM",$J,GMRCCT,0)="Consult #: "_GMRCDA
"RTN","GMRCAD31",71,0)
 S GMRCCT=GMRCCT+1
"RTN","GMRCAD31",72,0)
 S ^TMP("GMRCADM",$J,GMRCCT,0)=PTNM_"      "_PTSSN
"RTN","GMRCAD31",73,0)
 S GMRCCT=GMRCCT+1
"RTN","GMRCAD31",74,0)
 S ^TMP("GMRCADM",$J,GMRCCT,0)=REMSIT_"   "_REMNUM
"RTN","GMRCAD31",75,0)
 S GMRCCT=GMRCCT+1
"RTN","GMRCAD31",76,0)
 S ^TMP("GMRCADM",$J,GMRCCT,0)="",GMRCCT=GMRCCT+1
"RTN","GMRCAD31",77,0)
 S ^TMP("GMRCADM",$J,GMRCCT,0)="Facility",GMRCCT=GMRCCT+1
"RTN","GMRCAD31",78,0)
 S ^TMP("GMRCADM",$J,GMRCCT,0)=" Activity"_$E(TAB,1,16)_"Date/Time/Zone"_$E(TAB,1,6)_"Responsible Person"_$E(TAB,1,2)_"Entered By",GMRCCT=GMRCCT+1
"RTN","GMRCAD31",79,0)
 S ^TMP("GMRCADM",$J,GMRCCT,0)=$$REPEAT^XLFSTR("-",79)
"RTN","GMRCAD31",80,0)
 S GMRCCT=GMRCCT+1
"RTN","GMRCAD31",81,0)
 N ACTV
"RTN","GMRCAD31",82,0)
 S ACTV=0
"RTN","GMRCAD31",83,0)
 F  S ACTV=$O(^GMR(123,GMRCDA,40,ACTV)) Q:'ACTV  D
"RTN","GMRCAD31",84,0)
 . N ACTYPE
"RTN","GMRCAD31",85,0)
 . S ACTYPE=$P(^GMR(123,GMRCDA,40,ACTV,0),U,2)
"RTN","GMRCAD31",86,0)
 . Q:ACTYPE'=17&(ACTYPE'=4)  ;only FWD and SF are affected
"RTN","GMRCAD31",87,0)
 . Q:'$D(^GMR(123,GMRCDA,40,ACTV,2))  ;only remote activities
"RTN","GMRCAD31",88,0)
 . Q:'$O(^GMR(123,GMRCDA,40,ACTV,1,1))
"RTN","GMRCAD31",89,0)
 . S ^TMP("GMRCADM",$J,"B",ACTV)=GMRCCT
"RTN","GMRCAD31",90,0)
 . S ^TMP("GMRCADM",$J,GMRCCT,0)="    Act. #: "_ACTV,GMRCCT=GMRCCT+1
"RTN","GMRCAD31",91,0)
 . D BLDALN^GMRCSLM4(GMRCDA,ACTV)
"RTN","GMRCAD31",92,0)
 . M ^TMP("GMRCADM",$J)=^TMP("GMRCR",$J,"DT")
"RTN","GMRCAD31",93,0)
 . K ^TMP("GMRCR",$J,"DT")
"RTN","GMRCAD31",94,0)
 . S ^TMP("GMRCADM",$J,GMRCCT,0)="",GMRCCT=GMRCCT+1
"RTN","GMRCAD31",95,0)
 . Q
"RTN","GMRCAD31",96,0)
 Q
"RTN","GMRCAD31",97,0)
 ;
"RTN","GMRCAD31",98,0)
INIT ;
"RTN","GMRCAD31",99,0)
 S VALMCNT=$O(^TMP("GMRCADM",$J," "),-1)
"RTN","GMRCAD31",100,0)
 S VALMBG=1
"RTN","GMRCAD31",101,0)
 S VALMBCK="R"
"RTN","GMRCAD31",102,0)
 Q
"RTN","GMRCAD31",103,0)
 ;
"RTN","GMRCAD31",104,0)
EXIT ;
"RTN","GMRCAD31",105,0)
 K ^TMP("GMRCADM",$J)
"RTN","GMRCAD31",106,0)
 S VALMBCK="Q"
"RTN","GMRCAD31",107,0)
 Q
"RTN","GMRCAD31",108,0)
 ;
"RTN","GMRCAD31",109,0)
HDR ;
"RTN","GMRCAD31",110,0)
 S VALMHDR(1)=$$CJ^XLFSTR(("Consult #:"_^TMP("GMRCADM",$J,"CSLT")),80)
"RTN","GMRCAD31",111,0)
 Q
"RTN","GMRCAD31",112,0)
CKACTS(CSLT) ;assure that there is at least one activity meeting criteria
"RTN","GMRCAD31",113,0)
 ; Input:
"RTN","GMRCAD31",114,0)
 ;   CSLT = ien from file 123
"RTN","GMRCAD31",115,0)
 ;
"RTN","GMRCAD31",116,0)
 N ACTV,OK
"RTN","GMRCAD31",117,0)
 S ACTV=0,OK=0
"RTN","GMRCAD31",118,0)
 F  S ACTV=$O(^GMR(123,CSLT,40,ACTV)) Q:'ACTV!(OK=1)  D
"RTN","GMRCAD31",119,0)
 . N ACTYPE
"RTN","GMRCAD31",120,0)
 . S ACTYPE=$P(^GMR(123,CSLT,40,ACTV,0),U,2)
"RTN","GMRCAD31",121,0)
 . I ACTYPE=17 S OK=1 ; FWD action
"RTN","GMRCAD31",122,0)
 . I ACTYPE=4 S OK=1 ; SF action
"RTN","GMRCAD31",123,0)
 . I OK,'$D(^GMR(123,CSLT,40,ACTV,2)) S OK=0 ;only remote activities
"RTN","GMRCAD31",124,0)
 . I OK,'$O(^GMR(123,CSLT,40,ACTV,1,1)) S OK=0 ;only those with comments
"RTN","GMRCAD31",125,0)
 Q OK
"RTN","GMRCAD31",126,0)
 ;
"RTN","GMRCAD31",127,0)
FIX(GMRCDA,GMRCACT) ;do the admin correction on bad IFC comments
"RTN","GMRCAD31",128,0)
 ; GMRCDA  = ien from file 123
"RTN","GMRCAD31",129,0)
 ; GMRCACT = ien within 40 multiple for activity
"RTN","GMRCAD31",130,0)
 ;
"RTN","GMRCAD31",131,0)
 I '$D(^GMR(123,GMRCDA,40,1)) D  Q
"RTN","GMRCAD31",132,0)
 . W !,"No comment there to correct"
"RTN","GMRCAD31",133,0)
 K ^TMP("GMRCOCMT",$J)
"RTN","GMRCAD31",134,0)
 M ^TMP("GMRCOCMT",$J)=^GMR(123,GMRCDA,40,GMRCACT,1)
"RTN","GMRCAD31",135,0)
 W !!
"RTN","GMRCAD31",136,0)
 N DIE,DR,DA,CHGD
"RTN","GMRCAD31",137,0)
 S CHGD=0
"RTN","GMRCAD31",138,0)
 S DA=GMRCACT,DA(1)=GMRCDA,DR=5,DIE="^GMR(123,"_DA(1)_",40,"
"RTN","GMRCAD31",139,0)
 D ^DIE
"RTN","GMRCAD31",140,0)
 I $O(^GMR(123,GMRCDA,40,GMRCACT,1," "),-1)'=$O(^TMP("GMRCOCMT",$J," "),-1) S CHGD=1
"RTN","GMRCAD31",141,0)
 I 'CHGD D
"RTN","GMRCAD31",142,0)
 . N I S I=0
"RTN","GMRCAD31",143,0)
 . F  S I=$O(^GMR(123,GMRCDA,40,GMRCACT,1,I)) Q:'I!(CHGD)  D
"RTN","GMRCAD31",144,0)
 .. I ^GMR(123,GMRCDA,40,GMRCACT,1,I,0)'=^TMP("GMRCOCMT",$J,I,0) S CHGD=1
"RTN","GMRCAD31",145,0)
 .. Q
"RTN","GMRCAD31",146,0)
 I 'CHGD W !,"No comment modification made!",!
"RTN","GMRCAD31",147,0)
 I CHGD D AUDIT(GMRCDA,GMRCACT,$NA(^TMP("GMRCOCMT",$J)))
"RTN","GMRCAD31",148,0)
 K ^TMP("GMRCOCMT",$J)
"RTN","GMRCAD31",149,0)
 Q
"RTN","GMRCAD31",150,0)
 ;
"RTN","GMRCAD31",151,0)
AUDIT(GMRCO,GMRCAC,ARRAY) ;make new audit trail activity w/old and new
"RTN","GMRCAD31",152,0)
 ;Input: 
"RTN","GMRCAD31",153,0)
 ;  GMRCO  = ien from file 123
"RTN","GMRCAD31",154,0)
 ;  GMRCAC = IEN WITHIN 40 MULTIPLE
"RTN","GMRCAD31",155,0)
 ;  ARRAY  = array containing the old comment
"RTN","GMRCAD31",156,0)
 N GMRCA,GMRCAD,GMRCMT,GMRCDA,DA,NUM,I
"RTN","GMRCAD31",157,0)
 N ACTYPE,ACTWHO,ACTRESP,ACTWHEN
"RTN","GMRCAD31",158,0)
 I '$G(GMRCO) Q
"RTN","GMRCAD31",159,0)
 ; load up particulars about edited activity, then load old comment
"RTN","GMRCAD31",160,0)
 ; then load up new comment in GMRCMT local array
"RTN","GMRCAD31",161,0)
 S ACTYPE=$$GET1^DIQ(123.1,$P(^GMR(123,GMRCO,40,GMRCAC,0),U,2),.01)
"RTN","GMRCAD31",162,0)
 S ACTWHO=$P(^GMR(123,GMRCO,40,GMRCAC,2),U)
"RTN","GMRCAD31",163,0)
 S ACTRESP=$P(^GMR(123,GMRCO,40,GMRCAC,2),U,2)
"RTN","GMRCAD31",164,0)
 D  ;GET VALUE OF ACTWHEN
"RTN","GMRCAD31",165,0)
 . N X
"RTN","GMRCAD31",166,0)
 . S X=$P(^GMR(123,GMRCO,40,GMRCAC,2),U,5) D REGDTM^GMRCU
"RTN","GMRCAD31",167,0)
 . S ACTWHEN=X_" "_$P(^GMR(123,GMRCO,40,GMRCAC,2),U,3)
"RTN","GMRCAD31",168,0)
 S NUM=1
"RTN","GMRCAD31",169,0)
 S GMRCMT(NUM)=" ",NUM=NUM+1
"RTN","GMRCAD31",170,0)
 S GMRCMT(NUM)="The "_ACTYPE_" action, added "_ACTWHEN_" by",NUM=NUM+1
"RTN","GMRCAD31",171,0)
 S GMRCMT(NUM)=ACTWHO_" "_$S($L(ACTRESP):("for "_ACTRESP),1:"")_","
"RTN","GMRCAD31",172,0)
 S GMRCMT(NUM)=GMRCMT(NUM)_" has been administratively corrected."
"RTN","GMRCAD31",173,0)
 S NUM=NUM+1,GMRCMT(NUM)=" ",NUM=NUM+1
"RTN","GMRCAD31",174,0)
 S GMRCMT(NUM)="The comment was corrected from:",NUM=NUM+1
"RTN","GMRCAD31",175,0)
 S GMRCMT(NUM)=" ",NUM=NUM+1
"RTN","GMRCAD31",176,0)
 S I=0 ;load up old comment
"RTN","GMRCAD31",177,0)
 F  S I=$O(^TMP("GMRCOCMT",$J,I)) Q:'I  D
"RTN","GMRCAD31",178,0)
 . S GMRCMT(NUM)=^TMP("GMRCOCMT",$J,I,0),NUM=NUM+1
"RTN","GMRCAD31",179,0)
 S GMRCMT(NUM)=" ",NUM=NUM+1
"RTN","GMRCAD31",180,0)
 S GMRCMT(NUM)="The comment was corrected to: ",NUM=NUM+1
"RTN","GMRCAD31",181,0)
 S GMRCMT(NUM)=" ",NUM=NUM+1
"RTN","GMRCAD31",182,0)
 S I=0 ;load up current comment
"RTN","GMRCAD31",183,0)
 F  S I=$O(^GMR(123,GMRCO,40,GMRCAC,1,I)) Q:'I  D
"RTN","GMRCAD31",184,0)
 . S GMRCMT(NUM)=^GMR(123,GMRCO,40,GMRCAC,1,I,0)
"RTN","GMRCAD31",185,0)
 . S NUM=NUM+1
"RTN","GMRCAD31",186,0)
 ;
"RTN","GMRCAD31",187,0)
 ; file admin correct comment
"RTN","GMRCAD31",188,0)
 S GMRCDA=$$SETDA^GMRCGUIB ; get new activity ien
"RTN","GMRCAD31",189,0)
 S GMRCA=26,GMRCAD=$$NOW^XLFDT,DA=GMRCDA
"RTN","GMRCAD31",190,0)
 D SETCOM^GMRCGUIB(.GMRCMT,DUZ)
"RTN","GMRCAD31",191,0)
 Q
"RTN","GMRCSLM1")
0^1^B55643288
"RTN","GMRCSLM1",1,0)
GMRCSLM1 ;SLC/DCM - Gather data and format ^TMP global for consult tracking Silent call for use by List Manager and GUI ;10/9/01 23:12
"RTN","GMRCSLM1",2,0)
 ;;3.0;CONSULT/REQUEST TRACKING;**1,4,10,12,15,17,22,32**;DEC 27, 1997
"RTN","GMRCSLM1",3,0)
 ;
"RTN","GMRCSLM1",4,0)
 ; This routine invokes IA #2638,#2740
"RTN","GMRCSLM1",5,0)
 ;
"RTN","GMRCSLM1",6,0)
 G AD
"RTN","GMRCSLM1",7,0)
SVC(NODE) ;Check for a valid service
"RTN","GMRCSLM1",8,0)
 K GMRCDEAV
"RTN","GMRCSLM1",9,0)
 I '$D(^GMR(123,NODE,0)) Q 0
"RTN","GMRCSLM1",10,0)
 I '+$P(^GMR(123,NODE,0),"^",5) Q 0
"RTN","GMRCSLM1",11,0)
 I '$D(^TMP("GMRCS",$J,$P(^GMR(123,NODE,0),"^",5))) Q 0
"RTN","GMRCSLM1",12,0)
 Q 1
"RTN","GMRCSLM1",13,0)
AD ;Main entry point. Loop through AD x-ref in file 123; Find consults that have been released to requested service
"RTN","GMRCSLM1",14,0)
 ;;DFN and GMRCSSNM must be defined when this entry point is called
"RTN","GMRCSLM1",15,0)
 ;;DFN=Internal File Number of Patient in ^DPT
"RTN","GMRCSLM1",16,0)
 ;;GMRCSSNM=Service Name of a Hospital Service from file ^GMR(123.5
"RTN","GMRCSLM1",17,0)
 ;;If GMRCSSNM is not defined or is null, then no records will be found.
"RTN","GMRCSLM1",18,0)
 ;;GMRCOER must be passed so that proper formatting for GUI or List Manager can be performed.  GMRCOER is passed as 0 for List Manager, 1 for GUI.
"RTN","GMRCSLM1",19,0)
 ;;GMRCDT1 and GMRCDT2 are passed in as start and stop dates for the lookup. If GMRCDT1="" or GMRCDT1="ALL", then all dates are searched.
"RTN","GMRCSLM1",20,0)
 ;;GMRCIS=IFC site (if defined); Values: R(equesting) or C(onsulting)
"RTN","GMRCSLM1",21,0)
 ;;  ***********************************************************
"RTN","GMRCSLM1",22,0)
 K ^TMP("GMRCR",$J,"CS"),GMRCNUL
"RTN","GMRCSLM1",23,0)
 I $D(GMRCSSS) S (GMRCDG,GMRCSS)=GMRCSSS,GMRCSSNM=($P($G(^GMR(123.5,+GMRCSS,0)),"^",1)) D SERV1^GMRCASV K GMRCSSS ;reset after forward
"RTN","GMRCSLM1",24,0)
 S TAB="",$P(TAB," ",41)="",BLK=0,LNCT=1 S:'$D(GMRCOER) GMRCOER=0
"RTN","GMRCSLM1",25,0)
 S GMRCD=0 F  S GMRCD=$O(^GMR(123,"AD",DFN,GMRCD)) Q:'GMRCD  S GMRCDA=0 F  S GMRCDA=$O(^GMR(123,"AD",DFN,GMRCD,GMRCDA)) Q:'GMRCDA  I $$SVC(GMRCDA) D SET
"RTN","GMRCSLM1",26,0)
 D END Q
"RTN","GMRCSLM1",27,0)
SET ;;Format entries into a word processing 'TMP("GMRCR",$J,"CS",' global that List Manager can display
"RTN","GMRCSLM1",28,0)
 ;;GMRCOER is a variable that signals that data is being formatted for the OE/RR GUI; this data is formatted differently than the data for List Manager.
"RTN","GMRCSLM1",29,0)
 ;;GMRCOER=0 : Data is List Manager formatted.
"RTN","GMRCSLM1",30,0)
 ;;GMRCOER=1 : Data is OE/RR GUI formatted.
"RTN","GMRCSLM1",31,0)
 S:'$D(TAB) TAB="",$P(TAB," ",30)=""
"RTN","GMRCSLM1",32,0)
 S GMRCIFN=$G(GMRCDA) I '$L(GMRCIFN),$D(XQADATA) S (GMRCDA,GMRCIFN)=+XQADATA
"RTN","GMRCSLM1",33,0)
 S GMRCSEX=$S($P(^DPT(DFN,0),"^",2)="M":"MALE",1:"FEMALE")
"RTN","GMRCSLM1",34,0)
 I '$D(^GMR(123,+GMRCIFN,0)) S GMRCQUT=1 Q
"RTN","GMRCSLM1",35,0)
 S PROC="",GMRC(0)=^GMR(123,GMRCIFN,0)
"RTN","GMRCSLM1",36,0)
 ;IF Consults
"RTN","GMRCSLM1",37,0)
 N GMRCCK
"RTN","GMRCSLM1",38,0)
 I $D(GMRCIS) D  Q:'GMRCCK
"RTN","GMRCSLM1",39,0)
 . S GMRCCK=1
"RTN","GMRCSLM1",40,0)
 . S:'$P($G(GMRC(0)),"^",23) GMRCCK=0
"RTN","GMRCSLM1",41,0)
 . I GMRCCK=1 D
"RTN","GMRCSLM1",42,0)
 . . S GMRC(12)=$G(^GMR(123,GMRCIFN,12))
"RTN","GMRCSLM1",43,0)
 . . I GMRCIS="R",$P(GMRC(12),"^",5)'="P" S GMRCCK=0
"RTN","GMRCSLM1",44,0)
 . . I GMRCIS="C",$P(GMRC(12),"^",5)'="F" S GMRCCK=0
"RTN","GMRCSLM1",45,0)
 I $D(GMRCSTCK),GMRCSTCK'="" N STATUS,TITLE D  Q:'STATUS
"RTN","GMRCSLM1",46,0)
 . N I
"RTN","GMRCSLM1",47,0)
 . F I=1:1 S STATUS=$P(GMRCSTCK,",",I) Q:STATUS=$P(GMRC(0),"^",12)  Q:'STATUS
"RTN","GMRCSLM1",48,0)
 . Q
"RTN","GMRCSLM1",49,0)
 I $D(GMRCVP),GMRCVP'=$P(GMRC(0),"^",8) Q
"RTN","GMRCSLM1",50,0)
 S (GMRCFMDT,X)=$P(GMRC(0),"^",7) I GMRCDT1'="ALL",$P(X,".",1)<GMRCDT1!($P(X,".",1)>GMRCDT2) Q
"RTN","GMRCSLM1",51,0)
 I GMRCOER'=2 D
"RTN","GMRCSLM1",52,0)
 . S BLK=BLK+1
"RTN","GMRCSLM1",53,0)
 . S ^TMP("GMRCR",$J,"CS","AD",BLK,LNCT,GMRCDA)=""
"RTN","GMRCSLM1",54,0)
 D REGDTM^GMRCU S CDT=$P(X," ")
"RTN","GMRCSLM1",55,0)
 S PROC=$S($P(GMRC(0),U,17)="P":"Procedure",1:"Consult")
"RTN","GMRCSLM1",56,0)
 I PROC'="Consult" S PROC=$$GET1^DIQ(123.3,+$P(GMRC(0),"^",8),.01)
"RTN","GMRCSLM1",57,0)
 S:PROC="" PROC="Consult"
"RTN","GMRCSLM1",58,0)
 S TO=+$P(GMRC(0),"^",5)
"RTN","GMRCSLM1",59,0)
 I +TO S TOD=$S($P($G(^GMR(123.5,+TO,0)),"^",2)=9:1,1:0)
"RTN","GMRCSLM1",60,0)
 I '$D(TOD) S TOD=0
"RTN","GMRCSLM1",61,0)
 S TO=$S(+TO:$P($G(^GMR(123.5,+TO,0)),"^",1),1:"")
"RTN","GMRCSLM1",62,0)
 S TO=$S(TOD:"<",1:"")_TO
"RTN","GMRCSLM1",63,0)
 S TO=$S(GMRCOER:TO,1:$E(TO,1,40))_$S(TOD:">",1:"")
"RTN","GMRCSLM1",64,0)
 I '$L(TO) S TO="**Unknown Service**"
"RTN","GMRCSLM1",65,0)
 S STS=$P(GMRC(0),"^",12) D
"RTN","GMRCSLM1",66,0)
 . I '+STS,'$D(^ORD(100.01,+STS,0)) Q
"RTN","GMRCSLM1",67,0)
 . I '+GMRCOER S STS=$P(^ORD(100.01,+STS,.1),"^",1) Q
"RTN","GMRCSLM1",68,0)
 . I GMRCOER=1 S STS=$P(^ORD(100.01,+STS,0),"^") Q
"RTN","GMRCSLM1",69,0)
 . S STS=$P(^ORD(100.01,+STS,.1),"^")
"RTN","GMRCSLM1",70,0)
 I $S(STS="":1,'$D(^ORD(100.01,+$P(GMRC(0),"^",12),0)):1,1:0) S STS=99,$P(GMRC(0),"^",12)=STS,STS=$S(GMRCOER=1:$P(^ORD(100.01,5,0),"^",1),1:$P(^ORD(100.01,+STS,.1),"^",1))
"RTN","GMRCSLM1",71,0)
 D SERVPROC
"RTN","GMRCSLM1",72,0)
 I 'GMRCOER D  Q
"RTN","GMRCSLM1",73,0)
 . S ^TMP("GMRCR",$J,"CS",LNCT,0)=BLK_$E(TAB,1,(4-$L(BLK)))_CDT_"  "_$E(STS,1,3)_$S(STS?1A:"  ",STS?2A:" ",1:"")_" "_$J(GMRCDA,7)_" "_$S($P(GMRC(0),"^",19)="Y":"*",1:" ")_TITLE
"RTN","GMRCSLM1",74,0)
 . S LNCT=LNCT+1
"RTN","GMRCSLM1",75,0)
 I GMRCOER D
"RTN","GMRCSLM1",76,0)
 . N DATA
"RTN","GMRCSLM1",77,0)
 . S DATA=GMRCDA_U_GMRCFMDT_U_STS_U_TO_U_PROC_U
"RTN","GMRCSLM1",78,0)
 . S DATA=DATA_$S($P(GMRC(0),U,19)="Y":"*",1:"")_U
"RTN","GMRCSLM1",79,0)
 . S DATA=DATA_TITLE_U_$P(GMRC(0),U,3)
"RTN","GMRCSLM1",80,0)
 . D  ;get type of record for proper icon in GUI
"RTN","GMRCSLM1",81,0)
 .. ; "C"=reg cons, "P"=reg proc, "M"=clin proc, "I"=IF cons, "R"=IF proc
"RTN","GMRCSLM1",82,0)
 .. I +$G(^GMR(123,GMRCDA,1)) S $P(DATA,U,9)="M" Q
"RTN","GMRCSLM1",83,0)
 .. S $P(DATA,U,9)=$P(GMRC(0),U,17)
"RTN","GMRCSLM1",84,0)
 .. N GMRCGVER
"RTN","GMRCSLM1",85,0)
 .. S GMRCGVER=$P($G(ORWCLVER),".",3,4) ;GUI version running
"RTN","GMRCSLM1",86,0)
 .. I GMRCGVER'>19.1 Q  ;will crash at less than 19.1
"RTN","GMRCSLM1",87,0)
 .. I $P(GMRC(0),U,23) S $P(DATA,U,9)=$S($P(DATA,U,9)="P":"R",1:"I")
"RTN","GMRCSLM1",88,0)
 . S ^TMP("GMRCR",$J,"CS",LNCT,0)=DATA
"RTN","GMRCSLM1",89,0)
 . S LNCT=LNCT+1
"RTN","GMRCSLM1",90,0)
 . K STSOER Q
"RTN","GMRCSLM1",91,0)
 Q
"RTN","GMRCSLM1",92,0)
END I LNCT<2 S (BLK,LNCT,GMRCNUL)=1,GMRCNPM="< PATIENT DOES NOT HAVE ANY CONSULTS/REQUESTS "_$S($D(GMRCPRNM):"FOR "_GMRCPRNM,1:"")_" ON FILE. >",GMRCNPM=$E(TAB,1,(80-$L(GMRCNPM))\80)_GMRCNPM,^TMP("GMRCR",$J,"CS",LNCT,0)=GMRCNPM D
"RTN","GMRCSLM1",93,0)
 .I $D(GMRCDT1)&($D(GMRCDT2)),GMRCDT1'="ALL" S LNCT=LNCT+1,^TMP("GMRCR",$J,"CS",LNCT,0)="Between Dates: "_$$FMTE^XLFDT(GMRCDT1)_" and "_$$FMTE^XLFDT(GMRCDT2)
"RTN","GMRCSLM1",94,0)
 .I $D(GMRCSTCK),$L(GMRCSTCK) S LNCT=LNCT+1,^TMP("GMRCR",$J,"CS",LNCT,0)="With Status: " S STS="" F I=1:1 S STS=$P(GMRCSTCK,",",I) Q:STS=""  S ^TMP("GMRCR",$J,"CS",LNCT,0)=^(0)_$P($G(^ORD(100.01,+STS,0)),"^",1)_" "
"RTN","GMRCSLM1",95,0)
 .Q
"RTN","GMRCSLM1",96,0)
 E  S (BLK,LNCT)=LNCT-1,^TMP("GMRCR",$J,"CS",0)="^^^"_LNCT
"RTN","GMRCSLM1",97,0)
 I $D(GMRCALFL) S (BLK,LNCT)=1
"RTN","GMRCSLM1",98,0)
 K TO,TOD,END,FLG,GMRC(0),GMRCD,GMRCDG,GMRCIFN,GMRCFMDT,GMRCNPM,GMRCWARD
"RTN","GMRCSLM1",99,0)
 K I,PROC,STS,URG
"RTN","GMRCSLM1",100,0)
 Q
"RTN","GMRCSLM1",101,0)
OER(DFN,GMRCDG,GMRCDT1,GMRCDT2,GMRCSTCK,GMRCOER) ;;GUI interface for CPRS
"RTN","GMRCSLM1",102,0)
 ;;DFN=Patient internal file number
"RTN","GMRCSLM1",103,0)
 ;;GMRCDG:  Internal file number of consult service from file 123.5
"RTN","GMRCSLM1",104,0)
 ;;GMRCDT1:  Beginning date for lookup
"RTN","GMRCSLM1",105,0)
 ;;GMRCDT2:  Ending date for lookup
"RTN","GMRCSLM1",106,0)
 ;;GMRCSTCK: IEN from OER Status File [^OER(100.01)] to screen results
"RTN","GMRCSLM1",107,0)
 ;;     so that only consults with a desired status are displayed
"RTN","GMRCSLM1",108,0)
 ;;     Can be sent as a set of statuses: i.e., 6,5,2
"RTN","GMRCSLM1",109,0)
 ;;      (GMRCSTCK=GMRC STATUS CHECK)
"RTN","GMRCSLM1",110,0)
 ;;GMRCOER=0 if request is from CONSULTS
"RTN","GMRCSLM1",111,0)
 ;;       =1 if request is for CPRS List Manager
"RTN","GMRCSLM1",112,0)
 ;;       =2 if for CPRS GUI
"RTN","GMRCSLM1",113,0)
 I GMRCDT1="" S GMRCDT1="ALL"
"RTN","GMRCSLM1",114,0)
 I GMRCDG="" S GMRCDG=$O(^GMR(123.5,"B","ALL SERVICES",0))
"RTN","GMRCSLM1",115,0)
 S:'$D(GMRCOER) GMRCOER=1
"RTN","GMRCSLM1",116,0)
 D SERV1^GMRCASV,AD
"RTN","GMRCSLM1",117,0)
 K ^TMP("GMRCS",$J),^TMP("GMRCSLIST",$J)
"RTN","GMRCSLM1",118,0)
 Q
"RTN","GMRCSLM1",119,0)
SERVPROC ; Build contents of SERV/PROC field for List Manager
"RTN","GMRCSLM1",120,0)
 N TYPE,OTXT
"RTN","GMRCSLM1",121,0)
 S TITLE=""
"RTN","GMRCSLM1",122,0)
 S TYPE=""
"RTN","GMRCSLM1",123,0)
 S OTXT=$P($G(^GMR(123,GMRCDA,1.11)),"^")
"RTN","GMRCSLM1",124,0)
 I OTXT="" D BUILD2
"RTN","GMRCSLM1",125,0)
 I OTXT'="" D BUILD1
"RTN","GMRCSLM1",126,0)
 Q
"RTN","GMRCSLM1",127,0)
BUILD1 ;OTXT does contain information
"RTN","GMRCSLM1",128,0)
 N FLG,BADFLG,TPROC,TTO,LEN,ABBRS,ABBRP
"RTN","GMRCSLM1",129,0)
 S TPROC=$$UP^XLFSTR(PROC),TTO=$$UP^XLFSTR(TO)
"RTN","GMRCSLM1",130,0)
 S TITLE=OTXT,OTXT=$$UP^XLFSTR(OTXT)
"RTN","GMRCSLM1",131,0)
 S BADFLG=0
"RTN","GMRCSLM1",132,0)
 I PROC="Consult" S FLG=1,TYPE="Cons"
"RTN","GMRCSLM1",133,0)
 I PROC'="Consult" S FLG=0,TYPE="Proc"
"RTN","GMRCSLM1",134,0)
 S LEN=$L(TITLE)
"RTN","GMRCSLM1",135,0)
 I TO="" S TO="No Service"
"RTN","GMRCSLM1",136,0)
 I LEN<30,FLG=1,OTXT'=TTO S TITLE=TITLE_" "_TO_" "_TYPE Q
"RTN","GMRCSLM1",137,0)
 I LEN<30,FLG=1,OTXT=TTO S TITLE=TITLE_" "_TYPE Q
"RTN","GMRCSLM1",138,0)
 I TO["<" S BADFLG=1
"RTN","GMRCSLM1",139,0)
 S ABBRS=$$SVC^GMRCAU(GMRCDA),ABBRP=$$PROC^GMRCAU(GMRCDA)
"RTN","GMRCSLM1",140,0)
 I LEN<30,FLG=0,TPROC'=OTXT,TTO'=TPROC S TITLE=TITLE_" "_PROC_" "_TO_" "_TYPE Q
"RTN","GMRCSLM1",141,0)
 I LEN<30,FLG=0,TPROC=OTXT,TTO'=TPROC S TITLE=TITLE_" "_TO_" "_TYPE Q
"RTN","GMRCSLM1",142,0)
 I LEN<30,FLG=0,TPROC=OTXT,TTO=TPROC S TITLE=TITLE_" "_TYPE Q
"RTN","GMRCSLM1",143,0)
 I LEN>30,FLG=1,TTO'=OTXT S TITLE=TITLE_" "_TO_" "_TYPE Q
"RTN","GMRCSLM1",144,0)
 I LEN>30,FLG=1,TTO=OTXT S TITLE=TITLE_" "_TYPE Q
"RTN","GMRCSLM1",145,0)
 I LEN>30,FLG=0,TPROC'=OTXT,TTO'=TPROC S TITLE=TITLE_" "_ABBRP_" "_TYPE Q
"RTN","GMRCSLM1",146,0)
 I LEN>30,FLG=0,TTO'=OTXT,BADFLG=0 S TITLE=TITLE_" "_ABBRS_" "_TYPE Q
"RTN","GMRCSLM1",147,0)
 I LEN>30,FLG=0,TTO'=OTXT,BADFLG=1 S TITLE=TITLE_" "_"<"_ABBRS_">"_TYPE Q
"RTN","GMRCSLM1",148,0)
 Q
"RTN","GMRCSLM1",149,0)
BUILD2 ;OTXT contains no information
"RTN","GMRCSLM1",150,0)
 N FLG,TPROC,TTO,LEN
"RTN","GMRCSLM1",151,0)
 S TPROC=$$UP^XLFSTR(PROC),TTO=$$UP^XLFSTR(TO)
"RTN","GMRCSLM1",152,0)
 I PROC="Consult" S TITLE=TO,LEN=$L(TITLE),FLG=1,TYPE="Cons"
"RTN","GMRCSLM1",153,0)
 I PROC'="Consult" S TITLE=PROC,LEN=$L(TITLE),FLG=0,TYPE="Proc"
"RTN","GMRCSLM1",154,0)
 I FLG=1 S TITLE=TITLE_" "_TYPE Q
"RTN","GMRCSLM1",155,0)
 I FLG=0,TTO=TPROC S TITLE=TITLE_" "_TYPE Q
"RTN","GMRCSLM1",156,0)
 I FLG=0,TTO'=TPROC S TITLE=TITLE_" "_TO_" "_TYPE Q
"RTN","GMRCSLM1",157,0)
 Q
"RTN","GMRCYP31")
0^2^B20507412
"RTN","GMRCYP31",1,0)
GMRCYP31 ;SLC/JFR - POST-INIT FOR PATCH 31; 2/04/03 08:02
"RTN","GMRCYP31",2,0)
 ;;3.0;CONSULT/REQUEST TRACKING;**31,32**;DEC 27, 1997
"RTN","GMRCYP31",3,0)
 ; 
"RTN","GMRCYP31",4,0)
 ; Re-distributed with GMRC*3*32 to address error with no records 
"RTN","GMRCYP31",5,0)
 ; to print when sent to a printer.
"RTN","GMRCYP31",6,0)
 Q
"RTN","GMRCYP31",7,0)
POST ;
"RTN","GMRCYP31",8,0)
 N %ZIS,GMRCQT,POP
"RTN","GMRCYP31",9,0)
 W !!,"This report should be sent to a printer",!
"RTN","GMRCYP31",10,0)
 S %ZIS="" D ^%ZIS
"RTN","GMRCYP31",11,0)
 I POP Q
"RTN","GMRCYP31",12,0)
 I $D(IO("Q")) D  Q
"RTN","GMRCYP31",13,0)
 . N ZTRTN,ZTDTH,ZTIO,ZTSAVE,ZTDESC
"RTN","GMRCYP31",14,0)
 . S ZTRTN="POST1^GMRCYP31",ZTIO=ION,ZTDTH=$H
"RTN","GMRCYP31",15,0)
 . S ZTDESC="GMRC*3*31 Post-Install Report"
"RTN","GMRCYP31",16,0)
 . D ^%ZTLOAD D HOME^%ZIS K IO("Q") Q
"RTN","GMRCYP31",17,0)
 . W !,"REPORT TASKED TO PRINT!"
"RTN","GMRCYP31",18,0)
 . Q
"RTN","GMRCYP31",19,0)
 D POST1
"RTN","GMRCYP31",20,0)
 Q
"RTN","GMRCYP31",21,0)
POST1 ; START POST-INIT
"RTN","GMRCYP31",22,0)
 N GMRCO,GMRCISIT,GMRCRO
"RTN","GMRCYP31",23,0)
 S GMRCISIT=0
"RTN","GMRCYP31",24,0)
 F  S GMRCISIT=$O(^GMR(123,"AIFC",GMRCISIT)) Q:'GMRCISIT  D
"RTN","GMRCYP31",25,0)
 . S GMRCRO=0
"RTN","GMRCYP31",26,0)
 . F  S GMRCRO=$O(^GMR(123,"AIFC",GMRCISIT,GMRCRO)) Q:'GMRCRO  D
"RTN","GMRCYP31",27,0)
 .. S GMRCO=$O(^GMR(123,"AIFC",GMRCISIT,GMRCRO,0))
"RTN","GMRCYP31",28,0)
 .. I $P($G(^GMR(123,GMRCO,12)),U,5)="P" D
"RTN","GMRCYP31",29,0)
 ... D ACTS(GMRCO)
"RTN","GMRCYP31",30,0)
 ... I $D(^TMP("GMRCYP31",$J,GMRCISIT,GMRCO)) D
"RTN","GMRCYP31",31,0)
 .... S ^TMP("GMRCYP31",$J,GMRCISIT,GMRCO)=""
"RTN","GMRCYP31",32,0)
 .. Q
"RTN","GMRCYP31",33,0)
 . Q
"RTN","GMRCYP31",34,0)
 D PRINT
"RTN","GMRCYP31",35,0)
 Q
"RTN","GMRCYP31",36,0)
 ;
"RTN","GMRCYP31",37,0)
ACTS(CSLT) ;loop activities and see if there is a remote FWD or SF update
"RTN","GMRCYP31",38,0)
 ;CSTL = ien from file 123
"RTN","GMRCYP31",39,0)
 N ACTV
"RTN","GMRCYP31",40,0)
 S ACTV=0
"RTN","GMRCYP31",41,0)
 F  S ACTV=$O(^GMR(123,CSLT,40,ACTV)) Q:'ACTV  D
"RTN","GMRCYP31",42,0)
 . N ACTYPE
"RTN","GMRCYP31",43,0)
 . S ACTYPE=$P(^GMR(123,CSLT,40,ACTV,0),U,2)
"RTN","GMRCYP31",44,0)
 . Q:ACTYPE'=17&(ACTYPE'=4)  ;only FWD and SF are affected
"RTN","GMRCYP31",45,0)
 . Q:'$D(^GMR(123,CSLT,40,ACTV,2))  ;only remote activities
"RTN","GMRCYP31",46,0)
 . Q:'$O(^GMR(123,CSLT,40,ACTV,1,1))  ;only comments >1 line long
"RTN","GMRCYP31",47,0)
 . N SITE
"RTN","GMRCYP31",48,0)
 . S SITE=$P(^GMR(123,CSLT,0),U,23)
"RTN","GMRCYP31",49,0)
 . S ^TMP("GMRCYP31",$J,SITE,CSLT,ACTV,0)=""
"RTN","GMRCYP31",50,0)
 Q
"RTN","GMRCYP31",51,0)
 ;
"RTN","GMRCYP31",52,0)
PRINT ; loop the ^TMP global and write records
"RTN","GMRCYP31",53,0)
 ; ask device and queue if needed
"RTN","GMRCYP31",54,0)
 ; 
"RTN","GMRCYP31",55,0)
 ;I $D(ZTQUEUED) S ZTREQ="@"
"RTN","GMRCYP31",56,0)
 N GMRCCT,TAB,GMRCDA,GMRCSIT,ACT,REMNUM,GMRCPG
"RTN","GMRCYP31",57,0)
 U IO
"RTN","GMRCYP31",58,0)
 S GMRCPG=1
"RTN","GMRCYP31",59,0)
 D HDR(.GMRCPG)
"RTN","GMRCYP31",60,0)
 I '$O(^TMP("GMRCYP31",$J,0)) D  D ^%ZISC,HOME^%ZIS Q
"RTN","GMRCYP31",61,0)
 . W !,"No records to report"
"RTN","GMRCYP31",62,0)
 . I $E(IOST,1,2)="C-" N DIR S DIR(0)="E" D ^DIR
"RTN","GMRCYP31",63,0)
 . Q
"RTN","GMRCYP31",64,0)
 S TAB=$$REPEAT^XLFSTR(" ",29)
"RTN","GMRCYP31",65,0)
 W !,"No cleanup or modification should be made to Inter-facility consults that are "
"RTN","GMRCYP31",66,0)
 W !,"identified with extraneous comments at this time.  Patch GMRC*3*32 will outline"
"RTN","GMRCYP31",67,0)
 W !,"the processes that should be utilized to properly accomplish these corrections."
"RTN","GMRCYP31",68,0)
 W !,$$REPEAT^XLFSTR("*",79)
"RTN","GMRCYP31",69,0)
 W !!
"RTN","GMRCYP31",70,0)
 S GMRCSIT=0
"RTN","GMRCYP31",71,0)
 F  S GMRCSIT=$O(^TMP("GMRCYP31",$J,GMRCSIT)) Q:'GMRCSIT  D
"RTN","GMRCYP31",72,0)
 . S GMRCDA=0
"RTN","GMRCYP31",73,0)
 . F  S GMRCDA=$O(^TMP("GMRCYP31",$J,GMRCSIT,GMRCDA)) Q:'GMRCDA  D
"RTN","GMRCYP31",74,0)
 .. I (IOSL-$Y)<7 D HDR(.GMRCPG) I 'GMRCPG S GMRCDA=999999999 Q
"RTN","GMRCYP31",75,0)
 .. N PTNM,PTSSN,REMSIT
"RTN","GMRCYP31",76,0)
 .. S PTNM="Patient name: "_$$GET1^DIQ(123,GMRCDA,.02,"E")
"RTN","GMRCYP31",77,0)
 .. S PTSSN="SSN: "_$$GET1^DIQ(2,$P(^GMR(123,GMRCDA,0),U,2),.09)
"RTN","GMRCYP31",78,0)
 .. S REMSIT=$$GET1^DIQ(4,$P(^GMR(123,GMRCDA,0),U,23),.01)
"RTN","GMRCYP31",79,0)
 .. S REMNUM=$P(^GMR(123,GMRCDA,0),U,22)
"RTN","GMRCYP31",80,0)
 .. I GMRCPG>2 W !,$$REPEAT^XLFSTR("*",78)
"RTN","GMRCYP31",81,0)
 .. W !,"Consult #: ",GMRCDA
"RTN","GMRCYP31",82,0)
 .. W !,PTNM,?50,PTSSN
"RTN","GMRCYP31",83,0)
 .. W !,"Receiving Site: ",REMSIT,?50,"Remote Consult #: ",REMNUM
"RTN","GMRCYP31",84,0)
 .. W !!,$$CJ^XLFSTR("Activities for Review",78)
"RTN","GMRCYP31",85,0)
 .. W !,$$CJ^XLFSTR("*********************",78)
"RTN","GMRCYP31",86,0)
 .. I (IOSL-$Y)<4 D HDR(.GMRCPG) I 'GMRCPG S GMRCDA=999999999 Q
"RTN","GMRCYP31",87,0)
 .. W !,"Facility"
"RTN","GMRCYP31",88,0)
 .. W !," Activity",?25,"Date/Time/Zone",$E(TAB,1,6)
"RTN","GMRCYP31",89,0)
 .. W "Responsible Person",$E(TAB,1,2),"Entered By"
"RTN","GMRCYP31",90,0)
 .. W !,$$REPEAT^XLFSTR("-",79)
"RTN","GMRCYP31",91,0)
 .. S ACT=0
"RTN","GMRCYP31",92,0)
 .. F  S ACT=$O(^TMP("GMRCYP31",$J,GMRCSIT,GMRCDA,ACT)) Q:'ACT  D
"RTN","GMRCYP31",93,0)
 ... N GMRCCT S GMRCCT=1
"RTN","GMRCYP31",94,0)
 ... I (IOSL-$Y)<6 D HDR(.GMRCPG,GMRCDA) I 'GMRCPG D  Q
"RTN","GMRCYP31",95,0)
 .... S (ACT,GMRCDA)=9999999999
"RTN","GMRCYP31",96,0)
 ... W !,?11,"Act. #:",ACT
"RTN","GMRCYP31",97,0)
 ... D BLDALN^GMRCSLM4(GMRCDA,ACT)
"RTN","GMRCYP31",98,0)
 ... N I S I=0
"RTN","GMRCYP31",99,0)
 ... F  S I=$O(^TMP("GMRCR",$J,"DT",I)) Q:'I  D
"RTN","GMRCYP31",100,0)
 .... I (IOSL-$Y)<5 D HDR(.GMRCPG,GMRCDA) I 'GMRCPG D  Q
"RTN","GMRCYP31",101,0)
 ..... S (I,ACT,GMRCDA)=9999999999
"RTN","GMRCYP31",102,0)
 .... W !,$G(^TMP("GMRCR",$J,"DT",I,0))
"RTN","GMRCYP31",103,0)
 ... K ^TMP("GMRCR",$J,"DT")
"RTN","GMRCYP31",104,0)
 .. W !
"RTN","GMRCYP31",105,0)
 .. Q
"RTN","GMRCYP31",106,0)
 . Q
"RTN","GMRCYP31",107,0)
 D ^%ZISC,HOME^%ZIS
"RTN","GMRCYP31",108,0)
 D EXIT
"RTN","GMRCYP31",109,0)
 Q
"RTN","GMRCYP31",110,0)
 ;
"RTN","GMRCYP31",111,0)
HDR(PAGE,CSLT) ;print a new header
"RTN","GMRCYP31",112,0)
 ; PAGE = next page number
"RTN","GMRCYP31",113,0)
 ; CSLT = consult ien working on
"RTN","GMRCYP31",114,0)
 ;
"RTN","GMRCYP31",115,0)
 I $E(IOST,1,2)="C-",PAGE>1 D  I 'PAGE Q
"RTN","GMRCYP31",116,0)
 . N DIR,DIROUT,DIRUT,DTOUT,DUOUT
"RTN","GMRCYP31",117,0)
 . S DIR(0)="E" D ^DIR
"RTN","GMRCYP31",118,0)
 . I $D(DIRUT) S PAGE=0
"RTN","GMRCYP31",119,0)
 W @IOF
"RTN","GMRCYP31",120,0)
 W !,"GMRC*3*31 Post-Install",?69,"Page: ",PAGE
"RTN","GMRCYP31",121,0)
 W !,$$REPEAT^XLFSTR("-",79)
"RTN","GMRCYP31",122,0)
 I $D(CSLT) D
"RTN","GMRCYP31",123,0)
 . N TEXT
"RTN","GMRCYP31",124,0)
 . S TEXT="Consult # "_CSLT_" cont'd."
"RTN","GMRCYP31",125,0)
 . W !,$$CJ^XLFSTR(TEXT,80)
"RTN","GMRCYP31",126,0)
 . W !
"RTN","GMRCYP31",127,0)
 S PAGE=PAGE+1
"RTN","GMRCYP31",128,0)
 Q
"RTN","GMRCYP31",129,0)
EXIT ; clean up
"RTN","GMRCYP31",130,0)
 K ^TMP("GMRCYP31",$J)
"RTN","GMRCYP31",131,0)
 Q
"VER")
8.0^22.0
"^DD",123.1,123.1,0)
FIELD^^7^8
"^DD",123.1,123.1,0,"DDA")
N
"^DD",123.1,123.1,0,"DT")
2980701
"^DD",123.1,123.1,0,"IX","AC",123.1,1)

"^DD",123.1,123.1,0,"IX","B",123.1,.01)

"^DD",123.1,123.1,0,"IX","D",123.1,5)

"^DD",123.1,123.1,0,"NM","REQUEST ACTION TYPES")

"^DD",123.1,123.1,0,"PT",101,6)

"^DD",123.1,123.1,0,"PT",123,9)

"^DD",123.1,123.1,0,"PT",123.02,1)

"^DD",123.1,123.1,0,"VRPK")
GMRC
"^DD",123.1,123.1,.001,0)
NUMBER^NJ6,0^^ ^K:+X'=X!(X>999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",123.1,123.1,.001,3)
Enter a number between your sites prefix_000 and your sites prefix_999.
"^DD",123.1,123.1,.001,21,0)
^.001^1^1^3020514^^
"^DD",123.1,123.1,.001,21,1,0)
The internal entry number of the Request Action Type.
"^DD",123.1,123.1,.001,"DT")
2971205
"^DD",123.1,123.1,.01,0)
ACTION TYPE^RFX^^0;1^K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>80!($L(X)<3)!'(X'?1P.E)!(X'?.ANP) X
"^DD",123.1,123.1,.01,1,0)
^.1^^-1
"^DD",123.1,123.1,.01,1,1,0)
123.1^B
"^DD",123.1,123.1,.01,1,1,1)
S ^GMR(123.1,"B",$E(X,1,30),DA)=""
"^DD",123.1,123.1,.01,1,1,2)
K ^GMR(123.1,"B",$E(X,1,30),DA)
"^DD",123.1,123.1,.01,3)
ENTER THE ACTION NAME. ANSWER MUST BE 3-80 CHARACTERS IN LENGTH
"^DD",123.1,123.1,.01,21,0)
^^6^6^2970911^^^^
"^DD",123.1,123.1,.01,21,1,0)
This file contains the tracking actions which may be taken to track
"^DD",123.1,123.1,.01,21,2,0)
a Consult or Request order from its entry in CPRS through its
"^DD",123.1,123.1,.01,21,3,0)
resolution.
"^DD",123.1,123.1,.01,21,4,0)
 
"^DD",123.1,123.1,.01,21,5,0)
This file also contains relationships of CPRS statuses which are the
"^DD",123.1,123.1,.01,21,6,0)
result of the action taken.
"^DD",123.1,123.1,.01,"DT")
2910529
"^DD",123.1,123.1,1,0)
RELATED OE/RR STATUS^P100.01'^ORD(100.01,^0;2^Q
"^DD",123.1,123.1,1,1,0)
^.1
"^DD",123.1,123.1,1,1,1,0)
123.1^AC
"^DD",123.1,123.1,1,1,1,1)
S ^GMR(123.1,"AC",$E(X,1,30),DA)=""
"^DD",123.1,123.1,1,1,1,2)
K ^GMR(123.1,"AC",$E(X,1,30),DA)
"^DD",123.1,123.1,1,1,1,"%D",0)
^^3^3^2920608^^^
"^DD",123.1,123.1,1,1,1,"%D",1,0)
This cross-reference is used when the call to RESULT^GMRCR returns an
"^DD",123.1,123.1,1,1,1,"%D",2,0)
OE/RR status.  This OE/RR status is used to determine the action type to
"^DD",123.1,123.1,1,1,1,"%D",3,0)
use to update activity tracking.
"^DD",123.1,123.1,1,1,1,"DT")
2910529
"^DD",123.1,123.1,1,3)
This is the CPRS Status used to update the order in CPRS.
"^DD",123.1,123.1,1,21,0)
^^2^2^2970911^^^^
"^DD",123.1,123.1,1,21,1,0)
This is the CPRS status which will be used to update the order in OE/RR
"^DD",123.1,123.1,1,21,2,0)
when this action is taken.
"^DD",123.1,123.1,1,"DT")
2970911
"^DD",123.1,123.1,3,0)
DISABLED MESSAGE^F^^0;4^K:$L(X)>40!($L(X)<1) X
"^DD",123.1,123.1,3,3)
Enter the message that will display when this action is disabled, 1-40 characters.
"^DD",123.1,123.1,3,21,0)
^^2^2^2970911^^^^
"^DD",123.1,123.1,3,21,1,0)
This field displays a 'DISABLED' message when this CPRS status has been
"^DD",123.1,123.1,3,21,2,0)
disabled.
"^DD",123.1,123.1,3,"DT")
2920225
"^DD",123.1,123.1,4,0)
HL7 CONTROL CODE FROM CONSULTS^F^^0;5^K:$L(X)>2!($L(X)<1) X
"^DD",123.1,123.1,4,3)
Enter 2 character HL7 code related to the action.
"^DD",123.1,123.1,4,21,0)
^^12^12^2971112^
"^DD",123.1,123.1,4,21,1,0)
This field indicates what HL7 control code is passed to CPRS from
"^DD",123.1,123.1,4,21,2,0)
Consults.
"^DD",123.1,123.1,4,21,3,0)
    Example: 
"^DD",123.1,123.1,4,21,4,0)
             "SN"=Service entered, backdoor consult, automatically
"^DD",123.1,123.1,4,21,5,0)
released from CPRS, though signatures may still be required depending on
"^DD",123.1,123.1,4,21,6,0)
nature of order
"^DD",123.1,123.1,4,21,7,0)
             "OD"=Discontinued
"^DD",123.1,123.1,4,21,8,0)
             "OC"=Denied by service (Cancelled)
"^DD",123.1,123.1,4,21,9,0)
             "SC"=Service status update (generic status change) for active
"^DD",123.1,123.1,4,21,10,0)
and partial results
"^DD",123.1,123.1,4,21,11,0)
             "XX"=Forwarded
"^DD",123.1,123.1,4,21,12,0)
             "RE"=Completed
"^DD",123.1,123.1,4,"DT")
2971112
"^DD",123.1,123.1,5,0)
HL7 CONTROL CODE FROM CPRS^F^^0;6^K:$L(X)>2!($L(X)<1) X
"^DD",123.1,123.1,5,1,0)
^.1
"^DD",123.1,123.1,5,1,1,0)
123.1^D
"^DD",123.1,123.1,5,1,1,1)
S ^GMR(123.1,"D",$E(X,1,30),DA)=""
"^DD",123.1,123.1,5,1,1,2)
K ^GMR(123.1,"D",$E(X,1,30),DA)
"^DD",123.1,123.1,5,1,1,"%D",0)
^^2^2^2971112^
"^DD",123.1,123.1,5,1,1,"%D",1,0)
This cross-reference allows Consults to convert an order control from
"^DD",123.1,123.1,5,1,1,"%D",2,0)
HL7 Table 0119 to a Consult activity for tracking.
"^DD",123.1,123.1,5,1,1,"DT")
2971112
"^DD",123.1,123.1,5,3)
Enter the HL7 Control code passed from CPRS for this action.
"^DD",123.1,123.1,5,21,0)
^^5^5^2971112^
"^DD",123.1,123.1,5,21,1,0)
This field indicates what HL7 control code is passed from CPRS to
"^DD",123.1,123.1,5,21,2,0)
Consults.
"^DD",123.1,123.1,5,21,3,0)
    Example: "NW"=New consult entered and released through CPRS
"^DD",123.1,123.1,5,21,4,0)
             "CA"=Cancelled via the orders tab
"^DD",123.1,123.1,5,21,5,0)
             "DC"=Discontinued
"^DD",123.1,123.1,5,"DT")
2971112
"^DD",123.1,123.1,6,0)
HL7 TABLE 38 ORDER STATUS^F^^0;7^K:$L(X)>2!($L(X)<1) X
"^DD",123.1,123.1,6,3)
Enter the 1-2 character code from HL7 Table 0038
"^DD",123.1,123.1,6,21,0)
^^2^2^2971114^
"^DD",123.1,123.1,6,21,1,0)
This field is for documenting purposes and contains the related Table 38
"^DD",123.1,123.1,6,21,2,0)
order status from HL7 for each activity.
"^DD",123.1,123.1,6,"DT")
2971114
"^DD",123.1,123.1,7,0)
ACTION PRINT NAME^F^^0;8^K:$L(X)>30!($L(X)<1) X
"^DD",123.1,123.1,7,3)
Enter the text to appear before comments on the 513
"^DD",123.1,123.1,7,21,0)
^^1^1^2980624^
"^DD",123.1,123.1,7,21,1,0)
This field is used on the 513 Form as a header for comments.
"^DD",123.1,123.1,7,"DT")
2980624
"^DIC",123.1,123.1,0)
REQUEST ACTION TYPES^123.1
"^DIC",123.1,123.1,0,"GL")
^GMR(123.1,
"^DIC",123.1,123.1,"%D",0)
^1.001^6^6^3020514^^^^
"^DIC",123.1,123.1,"%D",1,0)
This file identifies the action types which may be used by a service to 
"^DIC",123.1,123.1,"%D",2,0)
track activity related to a consult or request.
"^DIC",123.1,123.1,"%D",3,0)
  
"^DIC",123.1,123.1,"%D",4,0)
Certain action types may have a "GMRCACT " protocol entry in the Protocol
"^DIC",123.1,123.1,"%D",5,0)
File (101) which corresponds to the action type.  Two actions should not 
"^DIC",123.1,123.1,"%D",6,0)
point to the same protocol.
"^DIC",123.1,"B","REQUEST ACTION TYPES",123.1)

**END**
**END**

Released SD*5.3*439 SEQ #343
Extracted from mail message
**KIDS**:SD*5.3*439^

**INSTALL NAME**
SD*5.3*439
"BLD",6123,0)
SD*5.3*439^SCHEDULING^0^3050426^y
"BLD",6123,1,0)
^^1^1^3050426^
"BLD",6123,1,1,0)
FIX ISSUE WITH CANCEL CLINIC AVAIL AND ISSUE WITH DISPLAY CLINIC AVAIL RPT
"BLD",6123,4,0)
^9.64PA^^
"BLD",6123,"ABPKG")
n
"BLD",6123,"KRN",0)
^9.67PA^8989.52^19
"BLD",6123,"KRN",.4,0)
.4
"BLD",6123,"KRN",.401,0)
.401
"BLD",6123,"KRN",.402,0)
.402
"BLD",6123,"KRN",.403,0)
.403
"BLD",6123,"KRN",.5,0)
.5
"BLD",6123,"KRN",.84,0)
.84
"BLD",6123,"KRN",3.6,0)
3.6
"BLD",6123,"KRN",3.8,0)
3.8
"BLD",6123,"KRN",9.2,0)
9.2
"BLD",6123,"KRN",9.8,0)
9.8
"BLD",6123,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",6123,"KRN",9.8,"NM",1,0)
SDC1^^0^B4857864
"BLD",6123,"KRN",9.8,"NM",2,0)
SDCLAV0^^0^B6456733
"BLD",6123,"KRN",9.8,"NM","B","SDC1",1)

"BLD",6123,"KRN",9.8,"NM","B","SDCLAV0",2)

"BLD",6123,"KRN",19,0)
19
"BLD",6123,"KRN",19.1,0)
19.1
"BLD",6123,"KRN",101,0)
101
"BLD",6123,"KRN",409.61,0)
409.61
"BLD",6123,"KRN",771,0)
771
"BLD",6123,"KRN",870,0)
870
"BLD",6123,"KRN",8989.51,0)
8989.51
"BLD",6123,"KRN",8989.52,0)
8989.52
"BLD",6123,"KRN",8994,0)
8994
"BLD",6123,"KRN","B",.4,.4)

"BLD",6123,"KRN","B",.401,.401)

"BLD",6123,"KRN","B",.402,.402)

"BLD",6123,"KRN","B",.403,.403)

"BLD",6123,"KRN","B",.5,.5)

"BLD",6123,"KRN","B",.84,.84)

"BLD",6123,"KRN","B",3.6,3.6)

"BLD",6123,"KRN","B",3.8,3.8)

"BLD",6123,"KRN","B",9.2,9.2)

"BLD",6123,"KRN","B",9.8,9.8)

"BLD",6123,"KRN","B",19,19)

"BLD",6123,"KRN","B",19.1,19.1)

"BLD",6123,"KRN","B",101,101)

"BLD",6123,"KRN","B",409.61,409.61)

"BLD",6123,"KRN","B",771,771)

"BLD",6123,"KRN","B",870,870)

"BLD",6123,"KRN","B",8989.51,8989.51)

"BLD",6123,"KRN","B",8989.52,8989.52)

"BLD",6123,"KRN","B",8994,8994)

"BLD",6123,"QUES",0)
^9.62^^
"BLD",6123,"REQB",0)
^9.611^2^2
"BLD",6123,"REQB",1,0)
SD*5.3*184^1
"BLD",6123,"REQB",2,0)
SD*5.3*398^1
"BLD",6123,"REQB","B","SD*5.3*184",1)

"BLD",6123,"REQB","B","SD*5.3*398",2)

"MBREQ")
0
"PKG",16,-1)
1^1
"PKG",16,0)
SCHEDULING^SD^APPOINTMENTS,PROFILES,LETTERS,AMIS REPORTS
"PKG",16,20,0)
^9.402P^^
"PKG",16,22,0)
^9.49I^1^1
"PKG",16,22,1,0)
5.3^2930813
"PKG",16,22,1,"PAH",1,0)
439^3050426
"PKG",16,22,1,"PAH",1,1,0)
^^1^1^3050426
"PKG",16,22,1,"PAH",1,1,1,0)
FIX ISSUE WITH CANCEL CLINIC AVAIL AND ISSUE WITH DISPLAY CLINIC AVAIL RPT
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","SDC1")
0^1^B4857864
"RTN","SDC1",1,0)
SDC1 ;ALB/GRR - PRINT CLINIC PRE-CANCELLATION LIST ;15NOV85
"RTN","SDC1",2,0)
 ;;5.3;Scheduling;**379,398,439**;Aug 13, 1993
"RTN","SDC1",3,0)
 K ^TMP("SDC1",$J) S DGVAR="SD^SC^SDTIME",DGPGM="START^SDC1" D ZIS^DGUTQ Q:POP
"RTN","SDC1",4,0)
START U IO S SDCNT=0 K DUOUT,DTOUT N SDBADD,SNODE S SDBADD=0,SNODE=""
"RTN","SDC1",5,0)
 ; sd*5.3*439 FOR loop changed to exclude if different clinic
"RTN","SDC1",6,0)
 F J=SD:0 S J=$O(^SC(SC,"S",J)) Q:J=""!(J\1-SD)!$D(DTOUT)!$D(DUOUT)  D
"RTN","SDC1",7,0)
 . S J2=0 F  S J2=$O(^SC(SC,"S",J,1,J2)) Q:J2=""!$D(DTOUT)!$D(DUOUT)  D
"RTN","SDC1",8,0)
 .. S DFN=+^SC(SC,"S",J,1,J2,0),SDLE=$P(^(0),U,2)
"RTN","SDC1",9,0)
 .. Q:'$D(^DPT(DFN,"S",J,0))  S SNODE=^(0)
"RTN","SDC1",10,0)
 .. Q:$P(SNODE,U,1)'=SC&($P(SNODE,U,14)'=SDTIME)
"RTN","SDC1",11,0)
 .. I $P(SNODE,U,2)'["C"!($P(SNODE,U,14)=SDTIME) D PLST Q:$D(DTOUT)!$D(DUOUT)
"RTN","SDC1",12,0)
 G:$D(DUOUT)!$D(DTOUT) EXIT  I SDCNT=0 S NOAP=1 W !,"NO APPOINTMENTS SCHEDULED"
"RTN","SDC1",13,0)
 I SDBADD D
"RTN","SDC1",14,0)
 . W !!,"* THIS PATIENT HAS BEEN FLAGGED WITH A BAD ADDRESS INDICATOR, NO LETTER"
"RTN","SDC1",15,0)
 . W !,"WILL BE PRINTED."
"RTN","SDC1",16,0)
 I $E(IOST,1,2)'="C-" W @IOF
"RTN","SDC1",17,0)
EXIT K DUOUT,DTOUT,I,J,J2,X,DFN,SNODE,SDLE,SDCNT,^TMP("SDC1",$J) W !! D CLOSE^DGUTQ Q  ; sd*5.3*439 added local vars to kill
"RTN","SDC1",18,0)
PLST I SDCNT=0!($Y+2>IOSL) S DIR(0)="E" D:$E(IOST,1,2)="C-" ^DIR K DIR Q:$D(DTOUT)!$D(DUOUT)  D HED
"RTN","SDC1",19,0)
 ;
"RTN","SDC1",20,0)
 ;CHECK FOR DUPICATE ENTRY IN FILE 44 - SD*5.3*379
"RTN","SDC1",21,0)
 ;
"RTN","SDC1",22,0)
 I $D(^TMP("SDC1",$J,J,DFN)) Q
"RTN","SDC1",23,0)
 S ^TMP("SDC1",$J,J,DFN)=""
"RTN","SDC1",24,0)
 ;
"RTN","SDC1",25,0)
 N VA D PID^VADPT6
"RTN","SDC1",26,0)
 W ! I $$BADADR^DGUTL3(+DFN) W "*" S SDBADD=1
"RTN","SDC1",27,0)
 W $P(^DPT(DFN,0),"^",1),?30,VA("PID") S X=J D TM^SDROUT0 W ?43,$J(X,8),?58,SDLE W:$D(^DPT(DFN,.13)) ?64,$P(^(.13),"^",1)
"RTN","SDC1",28,0)
 S SDCNT=SDCNT+1 Q
"RTN","SDC1",29,0)
HED W @IOF,!,$P(^SC(SC,0),"^",1)," Clinic Pre-cancellation list",!,"PATIENT NAME",?34,"ID",?43,"APPT TIME",?56,"LENGTH",?64,"TELEPHONE"
"RTN","SDC1",30,0)
 W ! F I=1:1:79 W "-"
"RTN","SDC1",31,0)
 Q
"RTN","SDCLAV0")
0^2^B6456733
"RTN","SDCLAV0",1,0)
SDCLAV0 ;ALB/LDB - OUTPUT PATTERNS (cont.) ; 05 Mar 99 11:31 AM
"RTN","SDCLAV0",2,0)
 ;;5.3;Scheduling;**184,439**;Aug 13, 1993
"RTN","SDCLAV0",3,0)
 I 'VAUTC F SDC=0:0 S SDC=$O(VAUTC(SDC)) Q:SDC'>0  S SDV=VAUTC(SDC) D:VAUTD!($D(VAUTD(+$P(^SC(SDC,0),"^",15))))!('$P(^(0),"^",15)&$D(VAUTD($P(^DG(43,1,"GL"),"^",3)))) S1
"RTN","SDCLAV0",4,0)
 I VAUTC F SDC=0:0 S SDC=$O(^SC(SDC)) Q:'SDC  I $P(^(SDC,0),"^",3)="C" D:VAUTD!($D(VAUTD(+$P(^(0),"^",15))))!('$P(^(0),"^",15)&$D(VAUTD($P(^DG(43,1,"GL"),"^",3)))) S1
"RTN","SDCLAV0",5,0)
 I $D(^UTILITY($J,"SDNMS")) D S2^SDCLAV1
"RTN","SDCLAV0",6,0)
 S DGTCH="CLINIC AVAILABILITY REPORT^CLINIC^PAGE#" D:$E(IOST,1,2)="P-" TP^DGUTL K SDBD,SDCI,SDED D END^SDCLAV Q
"RTN","SDCLAV0",7,0)
S1 S SD=^SC(SDC,0),D=$S($P(SD,"^",15):$P(SD,"^",15),1:$P(^DG(43,1,"GL"),"^",3)),SD5=0,SDNM=$P(SD,"^")
"RTN","SDCLAV0",8,0)
 S $P(^UTILITY($J,"SDNMS",D,SDNM),"^",3)=SDC
"RTN","SDCLAV0",9,0)
 Q
"RTN","SDCLAV0",10,0)
NM ;called by SDCLAV1
"RTN","SDCLAV0",11,0)
 F SDAP1=0:0 S SDAP1=$O(^SC(SDC,"S",SDAP,1,SDAP1)) Q:SDAP1'>0  D NM1
"RTN","SDCLAV0",12,0)
 K M1,SDN1,SDN2,SDN3,SDC3,SDAP1  ; SD*5.3*439 added Kill of local vars
"RTN","SDCLAV0",13,0)
 Q
"RTN","SDCLAV0",14,0)
NM1 S SDN1=+^SC(SDC,"S",SDAP,1,SDAP1,0),M1=$P(^(0),"^",2),SDC3=$P(^(0),"^",9),SDN2=$P(^DPT(+SDN1,0),"^"),SDN3=$P(^(0),"^",9),SDN3=$S(SDN3="":"UNKNOWN",1:SDN3) I $D(SDCI) D NM2 Q
"RTN","SDCLAV0",15,0)
 ; SD*5.3*439 added quit if clinic in "S" node not = to selected clinic
"RTN","SDCLAV0",16,0)
 I '$D(SDCI),$D(^DPT(SDN1,"S",SDAP,0)),$P(^(0),"^",2)'["C",$P(^(0),"^",2)'="N",$P(^(0),"^",2)'="NA" Q:$P(^(0),U,1)'=SDC  D NM2 Q
"RTN","SDCLAV0",17,0)
 Q
"RTN","SDCLAV0",18,0)
NM2 S:$D(^DPT(SDN1,"S",SDAP,0)) ^UTILITY($J,"SDNMS",D,SDV,SDAP,SDN2,SDN3)=M1_$S(($P(^DPT(SDN1,"S",SDAP,0),"^",2)["C"):"^*",SDC3="C":"^*",($P(^(0),"^",2)="N"):"^**",($P(^(0),"^",2)="NA"):"^**",1:"")
"RTN","SDCLAV0",19,0)
 S:$D(^DPT(SDN1,"S",SDAP,0)) $P(^UTILITY($J,"SDNMS",D,SDV,SDAP,SDN2,SDN3),"^",3)=$S($P(^DPT(SDN1,"S",SDAP,0),"^",7)=4:"***",1:"")
"RTN","SDCLAV0",20,0)
 Q
"VER")
8.0^22.0
"BLD",6123,6)
^SEQ #343
**END**
**END**

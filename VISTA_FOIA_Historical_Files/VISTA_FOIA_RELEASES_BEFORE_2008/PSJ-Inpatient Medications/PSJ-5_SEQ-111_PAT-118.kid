Released PSJ*5*118 SEQ #111
Extracted from mail message
**KIDS**:PSJ*5.0*118^

**INSTALL NAME**
PSJ*5.0*118
"BLD",4271,0)
PSJ*5.0*118^INPATIENT MEDICATIONS^0^3030813^y
"BLD",4271,1,0)
^^4^4^3030813^
"BLD",4271,1,1,0)
Site reported a problem with the display of flagged pending IV order with
"BLD",4271,1,2,0)
no additive in the profile view. This patch corrects this problem by
"BLD",4271,1,3,0)
appropriately displaying the flag for pending IV orders with no additive.
"BLD",4271,1,4,0)
(NOIS: MAR-0703-21163)
"BLD",4271,4,0)
^9.64PA^^
"BLD",4271,"ABPKG")
n
"BLD",4271,"KRN",0)
^9.67PA^8989.52^19
"BLD",4271,"KRN",.4,0)
.4
"BLD",4271,"KRN",.401,0)
.401
"BLD",4271,"KRN",.402,0)
.402
"BLD",4271,"KRN",.403,0)
.403
"BLD",4271,"KRN",.5,0)
.5
"BLD",4271,"KRN",.84,0)
.84
"BLD",4271,"KRN",3.6,0)
3.6
"BLD",4271,"KRN",3.8,0)
3.8
"BLD",4271,"KRN",9.2,0)
9.2
"BLD",4271,"KRN",9.8,0)
9.8
"BLD",4271,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",4271,"KRN",9.8,"NM",1,0)
PSJLMPRI^^0^B10699531
"BLD",4271,"KRN",9.8,"NM","B","PSJLMPRI",1)

"BLD",4271,"KRN",19,0)
19
"BLD",4271,"KRN",19.1,0)
19.1
"BLD",4271,"KRN",101,0)
101
"BLD",4271,"KRN",409.61,0)
409.61
"BLD",4271,"KRN",771,0)
771
"BLD",4271,"KRN",870,0)
870
"BLD",4271,"KRN",8989.51,0)
8989.51
"BLD",4271,"KRN",8989.52,0)
8989.52
"BLD",4271,"KRN",8994,0)
8994
"BLD",4271,"KRN","B",.4,.4)

"BLD",4271,"KRN","B",.401,.401)

"BLD",4271,"KRN","B",.402,.402)

"BLD",4271,"KRN","B",.403,.403)

"BLD",4271,"KRN","B",.5,.5)

"BLD",4271,"KRN","B",.84,.84)

"BLD",4271,"KRN","B",3.6,3.6)

"BLD",4271,"KRN","B",3.8,3.8)

"BLD",4271,"KRN","B",9.2,9.2)

"BLD",4271,"KRN","B",9.8,9.8)

"BLD",4271,"KRN","B",19,19)

"BLD",4271,"KRN","B",19.1,19.1)

"BLD",4271,"KRN","B",101,101)

"BLD",4271,"KRN","B",409.61,409.61)

"BLD",4271,"KRN","B",771,771)

"BLD",4271,"KRN","B",870,870)

"BLD",4271,"KRN","B",8989.51,8989.51)

"BLD",4271,"KRN","B",8989.52,8989.52)

"BLD",4271,"KRN","B",8994,8994)

"BLD",4271,"QUES",0)
^9.62^^
"BLD",4271,"REQB",0)
^9.611^1^1
"BLD",4271,"REQB",1,0)
PSJ*5.0*85^2
"BLD",4271,"REQB","B","PSJ*5.0*85",1)

"MBREQ")
0
"PKG",197,-1)
1^1
"PKG",197,0)
INPATIENT MEDICATIONS^PSJ^UNIT DOSE AND IVS
"PKG",197,20,0)
^9.402P^^
"PKG",197,22,0)
^9.49I^1^1
"PKG",197,22,1,0)
5.0^2971215^2980917^11712
"PKG",197,22,1,"PAH",1,0)
118^3030813
"PKG",197,22,1,"PAH",1,1,0)
^^4^4^3030813
"PKG",197,22,1,"PAH",1,1,1,0)
Site reported a problem with the display of flagged pending IV order with
"PKG",197,22,1,"PAH",1,1,2,0)
no additive in the profile view. This patch corrects this problem by
"PKG",197,22,1,"PAH",1,1,3,0)
appropriately displaying the flag for pending IV orders with no additive.
"PKG",197,22,1,"PAH",1,1,4,0)
(NOIS: MAR-0703-21163)
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSJLMPRI")
0^1^B10699531
"RTN","PSJLMPRI",1,0)
PSJLMPRI ;BIR/MLM-INPATIENT LISTMAN IV PROFILE UTILITIES ;01 JUL 96 / 2:24 PM
"RTN","PSJLMPRI",2,0)
 ;;5.0; INPATIENT MEDICATIONS ;**58,85,118**;16 DEC 97
"RTN","PSJLMPRI",3,0)
 ;
"RTN","PSJLMPRI",4,0)
 ; Reference to ^PS(55 is supported by DBIA 2191.
"RTN","PSJLMPRI",5,0)
 ;
"RTN","PSJLMPRI",6,0)
PIV(DFN,ON,PSJF,DN)       ;Setup LM display for IV order. 
"RTN","PSJLMPRI",7,0)
 N DRG,ON55,P,PSJORIFN,TYP,V,X,Y,PSJFLAG S TYP="?" I ON["V" D
"RTN","PSJLMPRI",8,0)
 .S Y=$G(^PS(55,DFN,"IV",+ON,0)) F X=2,3,4,5,8,9,17,23 S P(X)=$P(Y,U,X)
"RTN","PSJLMPRI",9,0)
 .S TYP=$$ONE^PSJBCMA(DFN,ON,P(9),P(2),P(3)) I TYP'="O" S TYP="C"
"RTN","PSJLMPRI",10,0)
 .S ON55=ON,P("OT")=$S(P(4)="A":"F",P(4)="H":"H",1:"I") D GTDRG^PSIVORFB,GTOT^PSIVUTL(P(4))
"RTN","PSJLMPRI",11,0)
 .S P("PRY")=$P($G(^PS(55,DFN,"IV",+ON,.2)),U,4),PSJFLAG=$P($G(^(.2)),U,7)
"RTN","PSJLMPRI",12,0)
 .S ND4=$G(^PS(55,DFN,"IV",+ON,4)),V=$S(P("PRY")="D":"d",1:" ")_$S((+PSJSYSU=1&'+$P(ND4,U)):"->",(+PSJSYSU=3&'+$P(ND4,U,4)):"->",1:"")
"RTN","PSJLMPRI",13,0)
 .S PSJL=$$SETSTR^VALM1(V,PSJL,6,3)
"RTN","PSJLMPRI",14,0)
 I ON'["V" S (P(2),P(3))="",P(17)=$P($G(^PS(53.1,+ON,0)),U,9),Y=$G(^(8)),P(4)=$P(Y,U),P(8)=$P(Y,U,5),P(9)=$P($G(^(2)),U),PSJFLAG=$P($G(^(.2)),U,7) D GTDRG^PSIVORFA,GTOT^PSIVUTL(P(4)) I $E(P("OT"))'="F",P(4)'="H" D PUD^PSJLMPRU(DFN,ON,PSJF,DN) Q
"RTN","PSJLMPRI",15,0)
 I PSJFLAG D CNTRL^VALM10(PSJLN,1,4,IORVON,IORVOFF,0)
"RTN","PSJLMPRI",16,0)
 NEW PSJIVFLG S PSJIVFLG=1
"RTN","PSJLMPRI",17,0)
 S DRG=+$O(DRG("AD",0)) D:DRG PIVAD F  S DRG=$O(DRG("AD",DRG)) Q:'DRG  S PSJL="" D PIVAD
"RTN","PSJLMPRI",18,0)
SOL ;
"RTN","PSJLMPRI",19,0)
 S PSJL=$S($G(PSJIVFLG):PSJL_$S(ON["V":"in",1:"    in"),1:"        in")
"RTN","PSJLMPRI",20,0)
 NEW DRGX,NAME
"RTN","PSJLMPRI",21,0)
 S DRG=0 F  S DRG=+$O(DRG("SOL",DRG)) Q:'DRG  D NAME^PSIVUTL(DRG("SOL",DRG),39,.NAME,0) S DRGX=0 F  S DRGX=$O(NAME(DRGX)) Q:'DRGX  S PSJL=$$SETSTR^VALM1(NAME(DRGX),PSJL,12,60) D:$G(PSJIVFLG) PIV1 D SETTMP S PSJL="      "
"RTN","PSJLMPRI",22,0)
 ;S DRG=0 F  S DRG=+$O(DRG("SOL",DRG)) Q:'DRG  D NAME^PSIVUTL(DRG("SOL",DRG),39,.NAME,0) S DRGX=0 F  S DRGX=$O(NAME(DRGX)) Q:'DRGX  S PSJL=$$SETSTR^VALM1(NAME(DRGX),PSJL,12,60) D:'$G(PSJIVFLG) SETTMP D:$G(PSJIVFLG) PIV1 S PSJL="      "
"RTN","PSJLMPRI",23,0)
 Q
"RTN","PSJLMPRI",24,0)
PIVAD ; Print IV Additives.
"RTN","PSJLMPRI",25,0)
 NEW NAME
"RTN","PSJLMPRI",26,0)
 D NAME^PSIVUTL(DRG("AD",DRG),39,.NAME,1)
"RTN","PSJLMPRI",27,0)
 I $D(NAME(2)) S PSJL=$$SETSTR^VALM1(NAME(1),PSJL,9,60) D:$G(PSJIVFLG) PIV1 D SETTMP S PSJL="",PSJL=$$SETSTR^VALM1(NAME(2),PSJL,9,60) D SETTMP
"RTN","PSJLMPRI",28,0)
 I '$D(NAME(2)) S PSJL=$$SETSTR^VALM1(NAME(1),PSJL,9,60) D:$G(PSJIVFLG) PIV1 D SETTMP
"RTN","PSJLMPRI",29,0)
 Q
"RTN","PSJLMPRI",30,0)
 ;
"RTN","PSJLMPRI",31,0)
PIV1 ; Print Sched type, start/stop dates, and status.
"RTN","PSJLMPRI",32,0)
 K PSJIVFLG
"RTN","PSJLMPRI",33,0)
 F X=2,3 S P(X)=$E($$ENDTC^PSGMI(P(X)),1,$S($D(PSJEXTP):8,1:5))
"RTN","PSJLMPRI",34,0)
 I '$D(PSJEXTP) S PSJL=$$SETSTR^VALM1(TYP,PSJL,50,1),PSJL=$$SETSTR^VALM1(P(2),PSJL,53,7),PSJL=$$SETSTR^VALM1(P(3),PSJL,60,7),PSJL=$$SETSTR^VALM1(P(17),PSJL,67,1)
"RTN","PSJLMPRI",35,0)
 E  S PSJL=$$SETSTR^VALM1(TYP,PSJL,50,1),PSJL=$$SETSTR^VALM1(P(2),53,7),PSJL=$$SETSTR^VALM1(P(3),PSJL,63,7),PSJL=$$SETSTR^VALM1(P(17),PSJL,73,1)
"RTN","PSJLMPRI",36,0)
 ;* D SETTMP
"RTN","PSJLMPRI",37,0)
 Q
"RTN","PSJLMPRI",38,0)
SETTMP ;
"RTN","PSJLMPRI",39,0)
 S ^TMP($S($G(PSIVLBNM)]"":PSIVLBNM,1:"PSJPRO"),$J,PSJLN,0)=PSJL,PSJLN=PSJLN+1
"RTN","PSJLMPRI",40,0)
 Q
"VER")
8.0^22.0
**END**
**END**

$TXT Created by TRAXLER,FRANK at DEV.DEV.ISC-CHICAGO.VA.GOV  (KIDS) on TUESDAY, 12/15/98 at 16:45
=============================================================================
Run Date: DEC 23, 1998                     Designation: WV*1*3
Package : WV - WOMEN'S HEALTH                 Priority: Mandatory
Version : 1         SEQ #3                     Status: Released
=============================================================================


Subject: AUTOLOAD PATIENTS PROBLEMS

Category: 
  - Routine
  - Data Dictionary

Description: 
============

 This patch fixes the following problems:
  
  Description:
  ============
  
 1) Up-arrow does not take you out of the Compliance Rates for PAPs and
    MAMs [WV PRINT COMPLIANCE RATES] report output.
  
 When displaying the report output to the terminal screen, entering an
 up-arrow at the 'Enter RETURN to continue or '^' to exit' prompt will not
 exit out of the option. The press return to continue prompt is repeated.
 Typing an up-arrow again will exit the option. The WVRPSCR routine was
 changed to fix the problem.
  
  Associated NOIS: None. Problem was found by the developer while
                   researching another bug.
  
 2) Erroneous patch history in Package File (#9.4) sent out with the
    version 1.0 release.
  
 Some experimental KIDS builds were created to save and move code about
 while developing the software. The KIDS builds were given test patch
 numbers, specifically 99, 100, 101 and 102, and an entry was made in the
 Patch Application History field (#1105) of File 9.4. When the transport
 global was made for the package release, the patch history nodes from the
 Package File were transported. The patches themselves were NOT
 transported. When a facility selects the Display Patches for a Package
 [XPD PRINT PACKAGE PATCHES] option for the Women's Health entry, the
 erroneous patch entries appear in the output. The WV3PRE pre-installation
 routine will delete the erroneous Patch Application History nodes from
 File 9.4.
  
  Associated NOIS: HAM-1198-21609
  
 3) Undefined error when printing all fields from the WV Referral Source
    file (#790.07) through the FileMan Print File Entries utility.
  
 An IRMS employee at the Anchorage OPC ran a FileMan sort/print report of
 the WV Referral Source file (#790.07) to get a list of all the entries in
 the file and all the data fields associated with each entry. At the 'FIRST
 PRINT FIELD: ' prompt, the response of ALL was entered. The output
 bombed-out on a computed field (#2 - Uppercase Referral Source) which
 passed a parameter value to an entry point that did not have a parameter
 list. Specifically, the undefined error is 'Formal list is shorter than
 the actual list'. The definition of the computed was changed to solve the
 problem.
  
  Associated NOIS: None. This problem was reported to the developer by
                         telephone and e-mail.
  
 4) Erroneous message when a deceased patient is added to the WV Patient
    file (#790).
  
 A facility added a recently deceased patient to File 790 via the
 Edit/Print Patient Case Data [WV EDIT PATIENT CASE DATA] option. The
 software does an age check and if the patient is less than 12 years old, a
 warning message is displayed to the user to ask if the patient should be
 added. The age check also checks if the patient is dead. If the patient is
 dead the age is evaluated as zero. The user is warned, incorrectly, that
 the patient is less than 12 years old. The WVUTL8 routine was changed to
 fix the problem.
  
  Associated NOIS: ROS-1198-50106
  
 5) Undefined global variable errors when no entry in the WV Site Parameter
    file (#790.02).
  
 a) The Automatically Load Patients [WV AUTOLOAD PATIENTS] option errors
 out if no site parameter entry is defined in the WV Site Parameter file
 (#790.02). The software assumed a site parameter entry existed in order to
 retrieve the Default Case Manager field (#.02) from File 790.02.
  
 b) The Edit/Print Patient Case Data [WV EDIT PATIENT CASE DATA] option
 errors out when adding a new patient to the database if there is no entry
 in File 790.02.
  
 c) The Add a New Notification [WV ADD A NEW NOTIFICATION] option errors
 out trying to calculate a default print date when adding a new
 notification entry that is a written letter.
  
 In each case, if no entry exists in File 790.02, the code errors out with
 an undefined global variable message. Problem a) was reported via NOIS
 while b) and c) were found by the developer.
  
 The following routines were modified; WVLOGO, WVGETALL, WVPATE, and
 WVUTL6.
  
   Associated NOIS: ISL-1198-50306
  
 6) The Add a Refusal of Treatment [WV REFUSED PROC-ADD] option does not
    allow selecting a patient by SSN.
  
 Before this patch, this option would allow the user to select a patient by
 name only. The routine WVREFUSE was modified to fix the problem.
  
  Associated NOIS: PHI-1198-21529
  
 7) Software "hangs" when entering a new patient.
  
 A facility created an entry in the WV Site Parameter file (#790.02), but
 did not assign a Default Case Manager value (#.02). When a user added a
 new patient to the database with the Edit/Print Patient Case Data [WV
 EDIT PATIENT CASE DATA] option, the software could not initially assign
 the default case manager to the patient. The software was stuck in an
 infinite loop.
  
 In addition to solving this bug, software checks were added to the
 following options to warn the user that no default case manager was
 defined before adding a new patient to the database:
  
  a) Add a NEW Procedure            [WV ADD A NEW PROCEDURE]         
  b) Add an HISTORICAL Procedure    [WV ADD AN HISTORICAL PROCEDURE] 
  c) Add(Accession) a NEW Procedure [WV LAB ADD A NEW PROCEDURE]
  d) Automatically Load Patients    [WV AUTOLOAD PATIENTS]
  e) Import Radiology/NM Exams      [WV IMPORT RAD/NM EXAMS]
  
 Also, the interface between the Radiology/NM and Women's Health packages
 now contains a check for a default case manager.
  
 The following routines were modified; WVPATE, WVPROC, WVLAB, WVGETALL,
 WVEXPTRA, and WVRALINK.
  
  Associated NOIS: PHI-1198-20114
  
 8) The 'Compliance Rates for PAPs and MAMs' [WV PRINT COMPLIANCE RATES]
    report omitted deceased patients.
  
 The report output did not count deceased patients even though they
 received treatment during the date range selected by the user.
  
 The routine WVRPSCR1 was modified to fix this problem.
  
  Associated NOIS: None. Problem was found by the developer while
                   researching another bug.
  
 9) The Automatically Load Patients [WV AUTOLOAD PATIENTS] option includes
    all patients, not just veterans.
  
 The option adds all female patients to the Women's Health database
 regardless if they are veterans or not. Users have asked that the option
 add only patients who are veterans. The WVGETALL routine was modified to
 add only veterans to the database.
  
  Associated NOIS: STC-1198-41321
  
 10) The Import Radiology/NM Exams [WV IMPORT RAD/NM EXAMS] option does not
     add new patients to the database.
  
 The option should add a new patient to the Women's Health database if the
 patient meets the search criteria. However, the option only searches the
 Radiology/NM database for patients who are already in the Women's Health
 database and will not add new patients even though they meet the search
 criteria. 
  
 An enhancement was made to the option, too. The user will be asked whether
 they wish to limit the importing of patient and procedure data to veterans
 only. Answering YES will limit the data imported to veterans. Answering
 NO will allow the data imported to include all female patients (e.g.,
 employees).
  
  Associated NOIS: BRK-1298-11356
  
  Test Sites:
  ===========
  Philadelphia VAMC
  Brockton VAMC
  Hampton VAMC
  Roseburg VAMC
  Salisbury VAMC
  
  Documentation:
  ==============
  
 Documentation changes exist in two .pdf files that are available for
 downloading.
  
  WV_1_P3_UM.PDF - contains only the pages that have changed in the
                   User Manual.
      WV1_UM.PDF - contains the entire User Manual. 
  
 Both files are available by FTP from the following CIO Field Offices:
  
  CIOFO         FTP Address        Directory
  ------------------------------------------------------
  Albany        152.127.1.5        ANONYMOUS.SOFTWARE
  Hines         152.129.1.110      ANONYMOUS.SOFTWARE
  Salt Lake     152.131.2.1        ANONYMOUS.SOFTWARE
  
  
  Routine Version Line:
  =====================
  
 ;;1.0;WOMEN'S HEALTH;**[Patch History]**;Sep 30, 1998
  
  Checksum Results:
  =================
  
 Routine Name    Before Patch    After Patch     Patch History
 ------------    ------------    -----------     ------------- 
 WV3PRE          n/a             720259          3
 WVEXPTRA        11632333        12466691        3
 WVGETALL        12114675        12478045        3
 WVLAB           930172          1019594         3
 WVLOGO          2336264         2313855         3
 WVPATE          2461216         2721468         3
 WVPROC          6499361         6621472         3
 WVRALINK        7528527         7573845         3
 WVREFUSE        3578572         3586216         3
 WVRPSCR         5240735         5282640         3
 WVRPSCR1        8285410         8285602         3
 WVUTL6          1984408         1991615         3
 WVUTL8          6562910         6509422         3
 WVUTL9          n/a             980839          3
  
  Installation Instructions:
  ==========================
  
 1) This patch can be installed with users on the system. 
    Installation should take less than five minutes.
    These routines are not recommended for mapping.
  
 2) Load the Transport Global.
  
 3) (Optional) Run the following KIDS options before installing the patch:
  
               Compare Transport Global to Current System
               Verify Checksums in Transport Global
               Backup a Transport Global
  
 4) Install the Build 'WV*1.0*3'.
  
    At the 'Want to DISABLE Scheduled Options, Menu Options, and
    Protocols?' prompt answer NO.
  
 5) Move the routines to other CPUs if appropriate.
  
 6) (Optional) Delete the routine WV3PRE after the patch installation is
               complete.

Routine Information:
====================

Routine Name:
  - WV3PRE


Routine Checksum:

Routine Name:
  - WVEXPTRA


Routine Checksum:

Routine Name:
  - WVGETALL


Routine Checksum:

Routine Name:
  - WVLAB


Routine Checksum:

Routine Name:
  - WVLOGO


Routine Checksum:

Routine Name:
  - WVPATE


Routine Checksum:

Routine Name:
  - WVPROC


Routine Checksum:

Routine Name:
  - WVRALINK


Routine Checksum:

Routine Name:
  - WVREFUSE


Routine Checksum:

Routine Name:
  - WVRPSCR


Routine Checksum:

Routine Name:
  - WVRPSCR1


Routine Checksum:

Routine Name:
  - WVUTL6


Routine Checksum:

Routine Name:
  - WVUTL8


Routine Checksum:

Routine Name:
  - WVUTL9


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : TRAXLER,FRANK                  Date Entered : DEC 15, 1998
Completed By: AGUILERA,TONY                 Date Completed: DEC 23, 1998
Released By : EICHELBERGER,NANCY            Date Released : DEC 23, 1998
=============================================================================


Packman Mail Message:
=====================

$END TXT

$TXT Created by THEROUX,JOHN at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Wednesday, 05/12/04 at 15:11
=============================================================================
Run Date: MAY 12, 2004                     Designation: DG*5.3*581
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #511                    Status: Released
                  Compliance Date: JUN 12, 2004
=============================================================================

Associated patches: (v)DG*5.3*109  <<= must be installed BEFORE `DG*5.3*581'
                    (v)DG*5.3*560  <<= must be installed BEFORE `DG*5.3*581'
                    (v)DG*5.3*586  <<= must be installed BEFORE `DG*5.3*581'

Subject: ADDRESS CITY UPDATE, PREREGISTRATION CALL LIST

Category: 
  - Routine

Description:
============

  
     This patch simplifies the updating of the city in the patient
 permanent address, and deletes old records from the Pre-Registration
 Call List file (#41.42).
  
 ASSOCIATED NOISes:
 ==================
 1) BAY-0104-31920     CMOP rejects certain selectable cities
    DUPLICATE
    =========
    NTH-0404-71556     city vet lives in not associated with zip code
  
 2) BAY-0204-30368     DGPREP0 now sorts forever post DG*546 install...
  
 ASSOCIATED E3Rs:
 ================
 N/A
  
 PARTICIPATING TEST SITES:
 =========================
 Upstate NY       
 Bay Pines,FL  
 Roseburg,OR 
 North Texas,TX 
 Big Spring,TX 
  
 NOIS OVERVIEW:
 ==============
  
 1) BAY-0104-31920     CMOP rejects certain selectable cities
  
 Problem:
 ========
 The second portion of the call is pointing out that when updating 
 the permanent address on Screen 1 of the Registration screens,
 the following can happen:
  
 A user with the EAS GMT COUNTY EDIT key enters Free Text for the city.
 If users later want to change the street address, the Free Text city
 is prompted as the default but is not acceptable.  A user who holds
 the key must enter 99 again before the default can be accepted;
 a user who doesn't hold the key is forced to choose from the postal
 choice(s) and thus cannot retain the Free Text city.  
  
 Solution:
 =========
 Routine DGREGAZL was modified to accommodate the users. Because the
 default city is always what is currently on file, it doesn't necessarily
 represent a Free Text entry.  Before accepting the default, the 
 routine will check first of all that the zip code hasn't changed, and
 that for the previous address change, a) the ADDRESS CHANGE SOURCE (#.119)
 was 'VAMC', b) the ADDRESS CHANGE SITE (#.12) was the local site, and
 c) the ADDRESS CHANGE USER (#.122) which was introduced by DG*5.3*522
 was populated.
  
 If a local user with the EAS GMT COUNTY EDIT key added a free text city,
 this is what any local user will now see after accepting the default:
  
  
                ZIP+4: 33701// 33701
  
      Select one of the following:
  
           1         ST PETERSBURG*
           2         TIERRA VERDE
  
 CITY: TIERRA VERDE//
 STATE: FLORIDA
 COUNTY: PINELLAS
       
  
 2) BAY-0204-30368     DGPREP0 now sorts forever post DG*546 install...
  
 Problem:
 ========
 The call pointed out that the option Display Preregistration Call List
 [DGPRE DISPLAY CALL LIST] processes for a long time before displaying 
 the list of patient names.  We have found this to be particularly true 
 at sites that have a large number of records in the file (#41.42).  
  
 Solution:
 =========
 The coding that deletes old records from the PRE-REGISTRATION CALL
 LIST file (#41.42) will be removed from routine DGPREP0 and
 transferred to the routine DGPREBJ which is called by the
 Preregistration Nightly Job [DGPRE PRE-REGISTER NIGHT JOB] option,
 a regularly scheduled option.  A new message will be added 
 to the DGPRE PRE-REG STAFF mailgroup bulletin:
  
   "Number of old records deleted from the Call List: <number>
  
 Records are deleted if the appointment date is in the past,
 meaning before the date/time that the nightly job is run,
 or the appointment has been cancelled.
  
 The NOIS also pointed out that the routine DGPREP0 that displays 
 the call list can display this confusing message:
   "You do not have the DG PREREGISTRATION EDIT Key allocated,"
 if the user has neither the "DGPRE EDIT" key nor the "DGPRE SUPV" key.
 The message is being changed to say:
   "You do not have the requisite key allocated,"
  
  ROUTINE SUMMARY:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
      <tab>;;5.3;Registration;**[patch list]**;Aug 13, 1993
  
                             CHECK^XTSUMBLD results
  Routine name      Before Patch          After Patch         Patch List
  ============      ============          ===========         ==========
  DGPREBJ                2415188              3523184           109,581
  DGPREP0                6496947              6410444     109,546,586,581
  DGREGAZL               6540473              7172466         522,560,581
  
  
 INSTALLATIONS INSTRUCTIONS:
 ==========================
  
 This patch may be run with users on the system, but it is recommended
 that it be queued to run after normal business hours to minimize the 
 impact on users of the Registration package.
  
 Installation will take less than 5 minutes.
  
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
     the KIDS distribution included with this message.
  
 2.  Review your mapped set.  If any of the routines listed in the 
     ROUTINE section are mapped, they should be removed from the mapped
     set at this time.
  
 3.  From the Kernel Installation and Distribution System Menu, select
     the Installation menu.
  
 4.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter DG*5.3*581):
     a.  Compare Transport Global to Current System  - this option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch (routines,
         DDs, templates, etc.).
     b.  Verify Checksums in Transport Global - this option will
         allow you to ensure the integrity of the routines that are in
     c.  Print Transport Global - this option will allow you to view the
         components of the KIDS build.
  
 5.  Use the Install Package(s) option and select the package DG*5.3*581.
  
 6.  When prompted ' Want KIDS to INHIBIT LOGONs during the install?
     YES//', respond NO.
  
  7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? YES//', respond YES.  When prompted to select the options
      you would like to place out of order, enter:
  
      Register a Patient [DG REGISTER PATIENT]
      Load/Edit Patient Data [DG LOAD PATIENT DATA]
      Preregister a Patient [DGPRE PRE-REGISTER OPTION]
  
 8.  If routines were unmapped as part of step 2, they should be returned
     to the mapped set once the installation has run to completion.

Routine Information:
====================

Routine Name:
  - DGREGAZL


Routine Checksum:

Routine Name:
  - DGPREBJ


Routine Checksum:

Routine Name:
  - DGPREP0


Routine Checksum:

=============================================================================
User Information:
Entered By  : THEROUX,JOHN                  Date Entered  : FEB 03, 2004
Completed By: BOWEN,MARY JANE               Date Completed: MAY 12, 2004
Released By : GROOMS,ANTHONY E              Date Released : MAY 12, 2004
=============================================================================


Packman Mail Message:
=====================

$END TXT

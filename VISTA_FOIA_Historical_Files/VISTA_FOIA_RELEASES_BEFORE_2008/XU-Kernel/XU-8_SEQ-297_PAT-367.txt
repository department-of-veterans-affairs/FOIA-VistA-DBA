
=============================================================================
Run Date: OCT 28, 2004                     Designation: XU*8*367
Package : XU - KERNEL                         Priority: Mandatory
Version : 8       SEQ #297                      Status: Released
                  Compliance Date: NOV 28, 2004
=============================================================================


Subject: Fallback Daylight Savings Time Adjustment for VistA Systems

Category: 
  - Informational

Description:
============

 Daylight Savings Time ends on Sunday, October 31.  Clocks will fall-back one 
 hour.  This potentially affects some VistA applications that may have 
 date/time sensitive data.  This is not a new issue.  This patch is provided 
 as guidance to those sites who have expressed concern.  It does not 
 represent policy.
 
 During the fall-back time change process, it is recommended to either 
 write-inhibit (on DSM systems) or shutdown (on Cache systems) the VistA 
 database for 1 hour so that VistA time dependent data is not 
 "over-written", lost, or otherwise corrupted.
 
 An example issue is data stored in an M global subscript in inverse 
 internal data/time format.  There is the potential to have new data 
 overwrite existing data after turning back the clock.
 
 VistA sites should be aware of this issue and make plans, and take 
 appropriate actions, as necessary (i.e., advance notification to users, 
 take advantage of contingency plans during system down time, and make VistA 
 unavailable for one hour during the "Fallback" time change on Sunday, 
 October 31st).
 
 The following is provided as guidance to VistA sites.
 
 
 VistA Backup Considerations
 ===========================
 
 If a VistA database backup is scheduled to occur during the time change the 
 following should be done prior to the time change:
 
  - Reschedule the backup to take place after the time change has completed.
 
 
 Cache/VMS Sites
 ===============
 
 Prior to Sunday, October 31 - Cache/VMS sites should verify that an 
 automatic time change will occur on the VMS VistA cluster.  This automatic 
 time change feature should have been enabled during each VistA Cache 
 conversion.  Information on how to verify that an automatic time change 
 will occur can be found in FORUM SHARED,MAIL basket AXP ALERT message:
 
     Subj: Addendum #2-AXP*157 OpenVMS Automatic Daylight Saving Time Adjust
          [#39819396] 10/23/04@09:51  154 lines
 
 Automated entries for the VMS time change may be either 02:00:00:00 or 
 02:01:30.00 and both entries are acceptable to accomplish the VMS time 
 change.
 
 The time change will need to be done manually if it is not set to run 
 automatically as described in the above text.  Instructions to change time 
 manually will be provided below in this text.
 
 On Sunday, October 31, around 1:50 AM shutdown VistA and Cache according to 
 site-specific standard shutdown procedures.  This includes the shutdown of 
 Mumps AudioFax, Imaging, and Laboratory systems as well as other ancillary 
 systems that communicate with VistA.  A VMS shutdown is not necessary.
 
 To shutdown Cache on VMS enter the following command:
 
 $ CCONTROL STOP QUIETLY
 
 After Cache and VistA ancillary systems are shutdown wait at least an hour 
 after the time change has occurred (for example wait until after 2:05 AM on 
 the system clock).
 
 At the VMS level the time change can be observed by entering the following 
 command at periodic intervals:
 
 $ SHOW TIME
 
 To monitor the time change cluster wide the following commands can be used:
 
 $ MCR SYSMAN SET ENVIRONMENT/CLUSTER
 
 SYSMAN> CONFIG SHOW TIME    !Enter this command to see time on each node
 
 To monitor the time change from within Cache the following commands can be 
 used:
 
 $ CSESSION LICENSE
 
 %SYS>D ^%T
 
 Note that the Cache "License" configuration will remain running during the 
 time change process.
 
 If after 30 minutes of monitoring the time has not gotten set back, the 
 time will need to be set back manually on each node of the cluster.  The 
 time can be set manually by using the following command procedure on each 
 node of the cluster:
 
 $ @SYS$MANAGER:UTC$TIME_SETUP
 
 Cache is dependent on the UTC Time Setup so the above command procedure 
 should be used to set the time if it needs to be set manually.
 
 Once an hour has elapsed after the fallback time change, VistA and other 
 ancillary systems that communicate with VistA can be brought back on-line.  
 The recommended way to restart VistA on each Cache/VMS system is as 
 follows:
 
 $ @SYS$STARTUP:STARTUP$CACHE
 
 Then startup any other VistA processing according to site-specific standard 
 startup procedures.  This includes the startup of Mumps AudioFax, Imaging, 
 and Laboratory systems as well as other ancillary systems that communicate 
 with VistA.
 
 
 DSM/VMS Sites
 =============
 
 Prior to Sunday, October 31 - DSM/VMS sites should either verify that an 
 automatic time change will occur on the VMS VistA cluster or make 
 arrangements to change the time manually.  Instructions on how to verify if 
 an automatic time change will occur are referenced in the above section of 
 this text.
 
 If the time change is not set to take place automatically as described in 
 the above text then the time change will either need to be done manually or 
 according to automated procedures that have been used in the past on DSM 
 systems.
 
 On Sunday, October 31, around 1:50 AM the DSM database can be "Write 
 Inhibited" according to site-specific standard procedures as has been done 
 in the past.  If the DSM database is write inhibited then no action needs 
 to be taken on other ancillary systems that communicate with VistA (such as 
 Mumps AudioFax, Imaging, and Laboratory systems).  A VMS shutdown is not 
 necessary.
 
 To make the write inhibit process easiest is recommended to use Online 
 Backup v3.1 commands write inhibit the DSM database.  Online Backup v3.1 
 information can be found in FORUM SHARED,MAIL basket AXP Alert or on the VA 
 intranet as follows:
  
       Subj: AXP*109 Release of Online Backup 3.1  [#31449272] 06/08/00
  
       http://vaww.va.gov/custsvc/cssupp/axp/axp109.htm
 
 The Online Backup v3.1 commands are:
 
 To write inhibit all Volume Sets in the database:
 
       $ SET DEF ONL$BKUP
       $ DSM/MAN/E=DSMMGR/DATA="ONLINE_BACKUP.DAT" DIS^ZZJRNU
 
 After the VistA database is write inhibited wait at least an hour after the 
 time change has occurred (for example wait until after 2:05 AM on the 
 system clock).
 
 At the VMS level an automatic time change can be observed by entering the 
 same commands as described in the Cache instructions above.
 
 To re-enable writes to the database after time change & waiting an hour:
 
       $ SET DEF ONL$BKUP
       $ DSM/MAN/E=DSMMGR/DATA="ONLINE_BACKUP.DAT" ENA^ZZJRNU
 

Routine Information:
====================

=============================================================================
User Information:
Entered By  : METCALF,ROGER A               Date Entered  : OCT 22, 2004
Completed By: SINGH,GURBIR                  Date Completed: OCT 28, 2004
Released By : TILLIS,LEWIS                  Date Released : OCT 28, 2004
=============================================================================


Packman Mail Message:
=====================

No routines included

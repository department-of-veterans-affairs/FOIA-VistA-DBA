$TXT Created by BEUSCHEL,GARY at MAILMAN.FO-OAKLAND.MED.VA.GOV  (KIDS) on Thursday, 03/06/03 at 10:27
=============================================================================
Run Date: MAR 24, 2003                     Designation: XM*8*2
Package : XM - MAILMAN                         Priority: Mandatory
Version : 8        SEQ #14                      Status: Released
                  Compliance Date: APR 24, 2003
=============================================================================

Associated patches: (v)XU*8*162    <<= must be installed BEFORE `XM*8*2'
                    (v)XU*8*175    <<= must be installed BEFORE `XM*8*2'
                    (v)XM*8*10     <<= must be installed BEFORE `XM*8*2'

Subject: P-MESSAGE

Category: 
  - Routine
  - Other

Description: 
============

                    * * * * *  ATTENTION  * * * * *
          You must make manual changes to your P-MESSAGE entries
           in your DEVICE (#3.5) and TERMINAL TYPE (#3.2) files!
    Please read and follow the patch instructions to make the changes!
                    * * * * *  ATTENTION  * * * * *
 
 Patch XM*8.0*2
 
 Test Sites: Bronx, NY; Tampa, FL; Montana HCS; Altoona, PA
 
 NOIS: BRX-0802-12085
 P-MESSAGE has the following problems:
 1) A calling program can't get the message number back.
 2) Users aren't able to specify subject, sender, and recipients if they
 queue the print.
 
 This patch fixes these problems, which have also been mentioned in the
 following E3Rs:
 
 E3R:  5147,6405,13621
 When printing to the P-MESSAGE device, perform all user interaction before
 the text is put into the message, and enable users to specify P-MESSAGE
 subject, sender, and recipients even if they queue the print.
 
 E3R:  13766
 When printing to the P-MESSAGE device, return the message number of the
 message created.  The message number will be returned only if the calling
 program has set the variable XMZBACK.  If $D(XMZBACK), then XMZ will be
 set upon return, and XMZBACK will be killed.
 
 E3R:  14895
 When printing to the P-MESSAGE device, and the user has chosen to have the
 message appear to be from the POSTMASTER, put the user's DUZ in the SENDER
 (#1.1) field of the MESSAGE (#3.9) file.
 
 The post-init ensures that some DIALOG (#.84) file entries which are no
 longer needed are deleted.
 
 NOTE: This patch should be installed during off hours, when user activity
 is at a minimum.  It requires MailMan patch XM*8.0*10, as well as
 Kernel patches XU*8.0*162 and XU*8.0*175.
 ============================================================================ 
 
 ROUTINES:
 The second line of the routine now looks like:
        ;;8.0;MailMan;**[patch list]**;Jun 28, 2002
  
               Before          After
 Name          Checksum        Checksum        Patch List
 --------------------------------------------------------------------------
 XMAPHOST       7077399         9091852        2
 XMUT5          6663310         6762357        10,2
 XMYPRE1        * NEW *           68287        2
 * Checksums produced by CHECK^XTSUMBLD
 
 This patch introduces the following new routine:
 XMYPRE1 has no user entry points, and may be deleted following install.
 ============================================================================
  
 INSTALLATION:
 NOTE: This patch should be installed during off hours, when user activity
 is at a minimum.  It requires MailMan patch XM*8.0*10, as well as
 Kernel patches XU*8.0*162 and XU*8.0*175.
 1. Users may be on the system during installation of this patch.
 2. DSM Sites: If any of these routines is mapped, disable mapping for the 
    affected routine(s).  
 3. On the PackMan menu, use the 'INSTALL/CHECK MESSAGE' option.  This loads 
    the patch into a Transport Global on your system.  
 4. You do not need to stop TaskMan or the background filer.
    Users may be on the system.
 5. On the KIDS:Installation menu, use the following options to install the
    Transport Global:
        Verify Checksums in Transport Global
        Print Transport Global
        Compare Transport Global to Current System
        Backup a Transport Global
        Install Package(s)
  Select INSTALL NAME:    XM*8.0*2    Loaded from Distribution  <date/time>
                          ========
  Install Questions:
  Want KIDS to INHIBIT LOGONs during the install? YES// NO
                                                        ==
  Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
                                                                        ==
  Enter the Device you want to print the Install messages.
  You can queue the install by enter a 'Q' at the device prompt.
  Enter a '^' to abort the install.
 
  DEVICE: HOME// <Do NOT queue it!>
                 ------------------
 6. Edit the P-MESSAGE entries in the DEVICE (#3.5) file.
 a. First, print out a copy of the P-MESSAGE entries in the DEVICE (#3.5)
    file, so you have a record of what they look like before you edit them.
    This is very important, so you can refer back to it in case you make an
    editing mistake.
 b. Make sure the first 9 characters of the device name is "P-MESSAGE".  If
    it isn't, queued p-messages will not contain the requested subjects, or
    be delivered to the requested users.  Default values will be used,
    instead.
 c. Edit the PRE-OPEN EXECUTE (#19.7) field of the P-MESSAGE entries in
    the DEVICE (#3.5) file, using the instructions as a *pattern*.
    (Note: There may be some differences, depending on your system.)
 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
 VMS/DSM sites might look like this.  *** Your site may vary slightly. ***
 -------
 Before:
 PRE-OPEN EXECUTE:
  S IO=$P(IO,".")_$J_"."_$P(IO,".",2)
 
 After:
 PRE-OPEN EXECUTE:
  D EN^XMAPHOST Q:$G(POP)  S IO=$P(IO,".")_$J_"."_$P(IO,".",2)
  =========================
  <<Add the underlined text to the beginning.  Please note that there are >>
  <<2 spaces after the 'Q:$G(POP)'!  Do not make any other changes.  It is>>
  <<OK for the rest of the text to look different from what's shown here. >>
 
 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
 Cache OpenM/NT and Cache VMS sites might look like this.
 ----------------------------   *** Your site may vary slightly. ***
 Before:
 PRE-OPEN EXECUTE:
  S IO=$P(IO,".")_$J_"."_$P(IO,".",2)
 
 After:
 PRE-OPEN EXECUTE:
  D EN^XMAPHOST Q:$G(POP)  S IO=$P(IO,".")_$J_"."_$P(IO,".",2)
  =========================
  <<Add the underlined text to the beginning.  Please note that there are >>
  <<2 spaces after the 'Q:$G(POP)'!  Do not make any other changes.  It is>>
  <<OK for the rest of the text to look different from what's shown here. >>
 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
 
 7. Edit the P-MESSAGE entries in the TERMINAL TYPE (#3.2) file.
 a. First, print out a copy of the P-MESSAGE entries in the TERMINAL TYPE
    (#3.2) file, so you have a record of what they look like before you edit
    them. This is very important, so you can refer back to it in case you
    make an editing mistake.
 b. Edit the CLOSE EXECUTE (#7) field of the P-MESSAGE entries in the
    TERMINAL TYPE (#3.2) file, using the instructions as a *pattern*.
    (Note: There may be some differences, depending on your system.)
 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
 VMS/DSM sites might look like this.  *** Your site may vary slightly. ***
 -------
 Before:
 CLOSE EXECUTE: 
  W:$X ! S XMREC="R X#255:1" X "U IO:DISCONNECT" D ^XMAPHOST,READ^XMAPHOST
         ====================                      ==========
  X "C IO:DELETE" K XMIO,IO(1,IO) Q
                    =====        ==
  <<Delete the underlined text.  Do not make any other changes.  It is   >>
  <<OK for the rest of the text to look different from what's shown here.>>
 
 After:
 CLOSE EXECUTE:
  W:$X ! X "U IO:DISCONNECT" D READ^XMAPHOST X "C IO:DELETE" K IO(1,IO)
 
 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
 Cache OpenM/NT and Cache VMS sites might look like this.
 ----------------------------   *** Your site may vary slightly. ***
 Before:
 CLOSE EXECUTE: 
  W:$X ! S XMREC="R X#255:1" U IO:("R") D ^XMAPHOST,READ^XMAPHOST
         ====================             ==========
  X "C IO:""D""" K XMIO,IO(1,IO) Q
                   =====        ==
  <<Delete the underlined text.  Do not make any other changes.  It is   >>
  <<OK for the rest of the text to look different from what's shown here.>>
 
 After:
 CLOSE EXECUTE:
  W:$X ! U IO:("R") D READ^XMAPHOST X "C IO:""D""" K IO(1,IO)
 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
 
 8.  DSM Sites: After patch has installed, rebuild your map set, if necessary.
 9.  You may delete the post-init, ^XMYPRE1.
 ============================================================================

Routine Information:
====================

Routine Name:
  - XMAPHOST


Routine Checksum:

Routine Name:
  - XMYPRE1


Routine Checksum:

Routine Name:
  - XMUT5


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : BEUSCHEL,GARY                  Date Entered : AUG 22, 2002
Completed By: SINGH,GURBIR                  Date Completed: MAR 19, 2003
Released By : GRAY,STEPHEN                  Date Released : MAR 24, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

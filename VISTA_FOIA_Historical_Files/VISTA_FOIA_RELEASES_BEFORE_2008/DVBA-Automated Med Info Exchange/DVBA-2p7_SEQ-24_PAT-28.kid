Released DVBA*2.7*28 SEQ #24
Extracted from mail message
**KIDS**:DVBA*2.7*28^

**INSTALL NAME**
DVBA*2.7*28
"BLD",2029,0)
DVBA*2.7*28^AUTOMATED MED INFO EXCHANGE^0^2990813^y
"BLD",2029,1,0)
^^2^2^2990813^
"BLD",2029,1,1,0)
This patch corrects an undefined IO error, which happens when IO is not
"BLD",2029,1,2,0)
defined in the environment.
"BLD",2029,4,0)
^9.64PA^^
"BLD",2029,"KRN",0)
^9.67PA^19^18
"BLD",2029,"KRN",.4,0)
.4
"BLD",2029,"KRN",.401,0)
.401
"BLD",2029,"KRN",.402,0)
.402
"BLD",2029,"KRN",.403,0)
.403
"BLD",2029,"KRN",.5,0)
.5
"BLD",2029,"KRN",.84,0)
.84
"BLD",2029,"KRN",3.6,0)
3.6
"BLD",2029,"KRN",3.8,0)
3.8
"BLD",2029,"KRN",9.2,0)
9.2
"BLD",2029,"KRN",9.8,0)
9.8
"BLD",2029,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",2029,"KRN",9.8,"NM",1,0)
DVBAUTL4^^0^B6256895
"BLD",2029,"KRN",9.8,"NM","B","DVBAUTL4",1)

"BLD",2029,"KRN",19,0)
19
"BLD",2029,"KRN",19.1,0)
19.1
"BLD",2029,"KRN",101,0)
101
"BLD",2029,"KRN",409.61,0)
409.61
"BLD",2029,"KRN",771,0)
771
"BLD",2029,"KRN",869.2,0)
869.2
"BLD",2029,"KRN",870,0)
870
"BLD",2029,"KRN",8994,0)
8994
"BLD",2029,"KRN","B",.4,.4)

"BLD",2029,"KRN","B",.401,.401)

"BLD",2029,"KRN","B",.402,.402)

"BLD",2029,"KRN","B",.403,.403)

"BLD",2029,"KRN","B",.5,.5)

"BLD",2029,"KRN","B",.84,.84)

"BLD",2029,"KRN","B",3.6,3.6)

"BLD",2029,"KRN","B",3.8,3.8)

"BLD",2029,"KRN","B",9.2,9.2)

"BLD",2029,"KRN","B",9.8,9.8)

"BLD",2029,"KRN","B",19,19)

"BLD",2029,"KRN","B",19.1,19.1)

"BLD",2029,"KRN","B",101,101)

"BLD",2029,"KRN","B",409.61,409.61)

"BLD",2029,"KRN","B",771,771)

"BLD",2029,"KRN","B",869.2,869.2)

"BLD",2029,"KRN","B",870,870)

"BLD",2029,"KRN","B",8994,8994)

"BLD",2029,"QUES",0)
^9.62^^
"MBREQ")
0
"PKG",223,-1)
1^1
"PKG",223,0)
AUTOMATED MED INFO EXCHANGE^DVBA^The entire AMIE package 7131/2507.
"PKG",223,20,0)
^9.402P^^
"PKG",223,22,0)
^9.49I^1^1
"PKG",223,22,1,0)
2.7^2950410^2950508
"PKG",223,22,1,"PAH",1,0)
28^2990813
"PKG",223,22,1,"PAH",1,1,0)
^^2^2^2990813
"PKG",223,22,1,"PAH",1,1,1,0)
This patch corrects an undefined IO error, which happens when IO is not
"PKG",223,22,1,"PAH",1,1,2,0)
defined in the environment.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","DVBAUTL4")
0^1^B6256895
"RTN","DVBAUTL4",1,0)
DVBAUTL4 ;ALB/JLU;UTILITY ROUTINE;9/9/94
"RTN","DVBAUTL4",2,0)
 ;;2.7;AMIE;**28**;Apr 10, 1995
"RTN","DVBAUTL4",3,0)
 ;
"RTN","DVBAUTL4",4,0)
WR(TEXT) ;
"RTN","DVBAUTL4",5,0)
 ;this is the main entry point for the AMIE writer
"RTN","DVBAUTL4",6,0)
 ;the following is a desciption of how to set up the text string to use
"RTN","DVBAUTL4",7,0)
 ;this call.
"RTN","DVBAUTL4",8,0)
 ;The first uparrow piece contians the description of what to execute
"RTN","DVBAUTL4",9,0)
 ;on this line.  The second peice contians the actual line of text.
"RTN","DVBAUTL4",10,0)
 ;The descriptions are defined below
"RTN","DVBAUTL4",11,0)
 ;1st = contains a 1 or zero 1 for beep zero no beep
"RTN","DVBAUTL4",12,0)
 ;2nd = contains the number of spaces before and/or after the text 1:1
"RTN","DVBAUTL4",13,0)
 ;3rd = contains the number of tabs before and/or after the text 1:2
"RTN","DVBAUTL4",14,0)
 ;4th = contains the number of lines before and/or after the text 1:4
"RTN","DVBAUTL4",15,0)
 ;5th = contains the number of form feeds before and/or after the 
"RTN","DVBAUTL4",16,0)
 ;      text 1:3
"RTN","DVBAUTL4",17,0)
 ;TEXT  = contains the array that holds the text to be displayed
"RTN","DVBAUTL4",18,0)
 ;        the array is to look like ARRAY(X,0)  local or global
"RTN","DVBAUTL4",19,0)
 ;        The X must start at one and be in consecutive order.
"RTN","DVBAUTL4",20,0)
 ;The data in each array element will look like. "0,1:1,1:2,1:4,1:3^text"
"RTN","DVBAUTL4",21,0)
 ;
"RTN","DVBAUTL4",22,0)
 F LP=1:1 S TEXTM=$G(@TEXT@(LP,0)) Q:TEXTM=""  DO
"RTN","DVBAUTL4",23,0)
 .D SETTEXT
"RTN","DVBAUTL4",24,0)
 .D SETVAR
"RTN","DVBAUTL4",25,0)
 .I TEXT2="",SPACE="",TAB="",LINE="",FORM="",BEEP="" Q
"RTN","DVBAUTL4",26,0)
 .I $G(IO)'="" U IO
"RTN","DVBAUTL4",27,0)
 .I TEXT2="" D SHORT
"RTN","DVBAUTL4",28,0)
 .I TEXT2]"" D BODY
"RTN","DVBAUTL4",29,0)
 .Q
"RTN","DVBAUTL4",30,0)
 D EXIT
"RTN","DVBAUTL4",31,0)
 Q
"RTN","DVBAUTL4",32,0)
 ;
"RTN","DVBAUTL4",33,0)
EXIT K TEXTM,TEXT1,TEXT2,SPACE,TAB,BEEP,LINE,FORM,LP
"RTN","DVBAUTL4",34,0)
 Q
"RTN","DVBAUTL4",35,0)
 ;
"RTN","DVBAUTL4",36,0)
SHORT ;no text available may want to just use curser control
"RTN","DVBAUTL4",37,0)
 I FORM]"" D FORM(FORM,"B")
"RTN","DVBAUTL4",38,0)
 I LINE]"" D LINE(LINE,"B")
"RTN","DVBAUTL4",39,0)
 I TAB]"" D TAB(TAB,"B")
"RTN","DVBAUTL4",40,0)
 I SPACE]"" D SPACE(SPACE,"B")
"RTN","DVBAUTL4",41,0)
 I BEEP]"",BEEP>0 D BEEP
"RTN","DVBAUTL4",42,0)
 Q
"RTN","DVBAUTL4",43,0)
 ;
"RTN","DVBAUTL4",44,0)
BODY ;text is available will look at all
"RTN","DVBAUTL4",45,0)
 I BEEP]"",BEEP>0 D BEEP
"RTN","DVBAUTL4",46,0)
 I FORM]"" D FORM(FORM,"B")
"RTN","DVBAUTL4",47,0)
 I LINE]"" D LINE(LINE,"B")
"RTN","DVBAUTL4",48,0)
 I TAB]"" D TAB(TAB,"B")
"RTN","DVBAUTL4",49,0)
 I SPACE]"" D SPACE(SPACE,"B")
"RTN","DVBAUTL4",50,0)
 D TEXT(TEXT2)
"RTN","DVBAUTL4",51,0)
 I SPACE]"" D SPACE(SPACE,"A")
"RTN","DVBAUTL4",52,0)
 I TAB]"" D TAB(TAB,"A")
"RTN","DVBAUTL4",53,0)
 I LINE]"" D LINE(LINE,"A")
"RTN","DVBAUTL4",54,0)
 I FORM]"" D FORM(FORM,"A")
"RTN","DVBAUTL4",55,0)
 Q
"RTN","DVBAUTL4",56,0)
 ;
"RTN","DVBAUTL4",57,0)
FORM(A,B) ;issues the form feeds
"RTN","DVBAUTL4",58,0)
 ;
"RTN","DVBAUTL4",59,0)
 N VAR,LP
"RTN","DVBAUTL4",60,0)
 S VAR=$$SET(A,B)
"RTN","DVBAUTL4",61,0)
 Q:VAR=""
"RTN","DVBAUTL4",62,0)
 F LP=1:1:VAR W @$S('$D(IOF):"#",IOF="":"#",1:IOF)
"RTN","DVBAUTL4",63,0)
 Q
"RTN","DVBAUTL4",64,0)
 ;
"RTN","DVBAUTL4",65,0)
LINE(A,B) ;issues the line feeds
"RTN","DVBAUTL4",66,0)
 ;
"RTN","DVBAUTL4",67,0)
 N VAR,LP
"RTN","DVBAUTL4",68,0)
 S VAR=$$SET(A,B)
"RTN","DVBAUTL4",69,0)
 Q:VAR=""
"RTN","DVBAUTL4",70,0)
 F LP=1:1:VAR W !
"RTN","DVBAUTL4",71,0)
 Q
"RTN","DVBAUTL4",72,0)
 ;
"RTN","DVBAUTL4",73,0)
TAB(A,B) ;issues the tabs
"RTN","DVBAUTL4",74,0)
 ;
"RTN","DVBAUTL4",75,0)
 N VAR,LP
"RTN","DVBAUTL4",76,0)
 S VAR=$$SET(A,B)
"RTN","DVBAUTL4",77,0)
 Q:VAR=""!(VAR=0)
"RTN","DVBAUTL4",78,0)
 S DX=0,DY=$S(IOST["C-":$S($Y>IOSL:IOSL,1:$Y),1:0)
"RTN","DVBAUTL4",79,0)
 X ^%ZOSF("XY")
"RTN","DVBAUTL4",80,0)
 K DX,DY
"RTN","DVBAUTL4",81,0)
 W ?VAR
"RTN","DVBAUTL4",82,0)
 Q
"RTN","DVBAUTL4",83,0)
 ;
"RTN","DVBAUTL4",84,0)
SPACE(A,B) ;issues the spaces
"RTN","DVBAUTL4",85,0)
 ;
"RTN","DVBAUTL4",86,0)
 N VAR,LP
"RTN","DVBAUTL4",87,0)
 S VAR=$$SET(A,B)
"RTN","DVBAUTL4",88,0)
 Q:VAR=""
"RTN","DVBAUTL4",89,0)
 F LP=1:1:VAR W " "
"RTN","DVBAUTL4",90,0)
 Q
"RTN","DVBAUTL4",91,0)
 ;
"RTN","DVBAUTL4",92,0)
TEXT(A) ;writes the text
"RTN","DVBAUTL4",93,0)
 ;
"RTN","DVBAUTL4",94,0)
 W A
"RTN","DVBAUTL4",95,0)
 Q
"RTN","DVBAUTL4",96,0)
 ;
"RTN","DVBAUTL4",97,0)
SET(A,B) ;general set statement
"RTN","DVBAUTL4",98,0)
 ;
"RTN","DVBAUTL4",99,0)
 Q $S(B="B":+A,1:$P(A,":",2))
"RTN","DVBAUTL4",100,0)
 ;
"RTN","DVBAUTL4",101,0)
BEEP ;does a beep
"RTN","DVBAUTL4",102,0)
 W *7
"RTN","DVBAUTL4",103,0)
 Q
"RTN","DVBAUTL4",104,0)
 ;
"RTN","DVBAUTL4",105,0)
SETTEXT ;sets up the two parts of each string
"RTN","DVBAUTL4",106,0)
 S TEXT1=$P(TEXTM,"^",1)
"RTN","DVBAUTL4",107,0)
 S TEXT2=$F(TEXTM,"^")
"RTN","DVBAUTL4",108,0)
 S TEXT2=$E(TEXTM,TEXT2,999)
"RTN","DVBAUTL4",109,0)
 Q
"RTN","DVBAUTL4",110,0)
 ;
"RTN","DVBAUTL4",111,0)
SETVAR ;sets up the necessary variables for each attribute
"RTN","DVBAUTL4",112,0)
 S BEEP=$P(TEXT1,",",1)
"RTN","DVBAUTL4",113,0)
 S SPACE=$P(TEXT1,",",2)
"RTN","DVBAUTL4",114,0)
 S TAB=$P(TEXT1,",",3)
"RTN","DVBAUTL4",115,0)
 S LINE=$P(TEXT1,",",4)
"RTN","DVBAUTL4",116,0)
 S FORM=$P(TEXT1,",",5)
"RTN","DVBAUTL4",117,0)
 Q
"RTN","DVBAUTL4",118,0)
 ;
"RTN","DVBAUTL4",119,0)
CLEAR ;clears the screen
"RTN","DVBAUTL4",120,0)
 S VAR(1,0)="0,0,0,3,1^"
"RTN","DVBAUTL4",121,0)
 D WR^DVBAUTL4("VAR")
"RTN","DVBAUTL4",122,0)
 K VAR
"RTN","DVBAUTL4",123,0)
 Q
"VER")
8.0^22.0
**END**
**END**

Released PSS*1*104 SEQ #95
Extracted from mail message
**KIDS**:PSS*1.0*104^

**INSTALL NAME**
PSS*1.0*104
"BLD",5846,0)
PSS*1.0*104^PHARMACY DATA MANAGEMENT^0^3060118^y
"BLD",5846,1,0)
^^16^16^3060109^
"BLD",5846,1,1,0)
A change has been made to the DIC^PSSDI and MIX^PSSDI components of DBIA 
"BLD",5846,1,2,0)
4551. DIC("S") will be killed within these components. Two new input 
"BLD",5846,1,3,0)
parameters have been added to address screening issues. If the file you
"BLD",5846,1,4,0)
are passing in has an Inactivation Date field, and you want to screen on 
"BLD",5846,1,5,0)
that field, a new date input parameter is being added to the components, 
"BLD",5846,1,6,0)
and if a date is passed in, a screen will be set for the calling
"BLD",5846,1,7,0)
application. If the file you are passing in is the DRUG file (#50), and 
"BLD",5846,1,8,0)
you want to screen on the APPLICATION PACKAGES' USE field (#63), and new 
"BLD",5846,1,9,0)
input paramter has been added for that also.
"BLD",5846,1,10,0)
 
"BLD",5846,1,11,0)
A new component, FNAME^PSSDI has been added to DBIA 4551. This component 
"BLD",5846,1,12,0)
will return the LABEL attribute of the Field passed into the call.
"BLD",5846,1,13,0)
 
"BLD",5846,1,14,0)
Patch PSS*1*92 adds the SERVICE CODE field to the output of the 
"BLD",5846,1,15,0)
DATA^PSS50 component of DBIA 4533. This patch cirrect the problem where 
"BLD",5846,1,16,0)
this field is not being returned if a "??" value is passed into the call.
"BLD",5846,4,0)
^9.64PA^^
"BLD",5846,"KRN",0)
^9.67PA^8989.52^19
"BLD",5846,"KRN",.4,0)
.4
"BLD",5846,"KRN",.401,0)
.401
"BLD",5846,"KRN",.402,0)
.402
"BLD",5846,"KRN",.403,0)
.403
"BLD",5846,"KRN",.5,0)
.5
"BLD",5846,"KRN",.84,0)
.84
"BLD",5846,"KRN",3.6,0)
3.6
"BLD",5846,"KRN",3.8,0)
3.8
"BLD",5846,"KRN",9.2,0)
9.2
"BLD",5846,"KRN",9.8,0)
9.8
"BLD",5846,"KRN",9.8,"NM",0)
^9.68A^4^4
"BLD",5846,"KRN",9.8,"NM",1,0)
PSSDI^^0^B25698318
"BLD",5846,"KRN",9.8,"NM",2,0)
PSS50^^0^B20914479
"BLD",5846,"KRN",9.8,"NM",3,0)
PSS50E^^0^B41819324
"BLD",5846,"KRN",9.8,"NM",4,0)
PSS50AQM^^0^B58572907
"BLD",5846,"KRN",9.8,"NM","B","PSS50",2)

"BLD",5846,"KRN",9.8,"NM","B","PSS50AQM",4)

"BLD",5846,"KRN",9.8,"NM","B","PSS50E",3)

"BLD",5846,"KRN",9.8,"NM","B","PSSDI",1)

"BLD",5846,"KRN",19,0)
19
"BLD",5846,"KRN",19.1,0)
19.1
"BLD",5846,"KRN",101,0)
101
"BLD",5846,"KRN",409.61,0)
409.61
"BLD",5846,"KRN",771,0)
771
"BLD",5846,"KRN",870,0)
870
"BLD",5846,"KRN",8989.51,0)
8989.51
"BLD",5846,"KRN",8989.52,0)
8989.52
"BLD",5846,"KRN",8994,0)
8994
"BLD",5846,"KRN","B",.4,.4)

"BLD",5846,"KRN","B",.401,.401)

"BLD",5846,"KRN","B",.402,.402)

"BLD",5846,"KRN","B",.403,.403)

"BLD",5846,"KRN","B",.5,.5)

"BLD",5846,"KRN","B",.84,.84)

"BLD",5846,"KRN","B",3.6,3.6)

"BLD",5846,"KRN","B",3.8,3.8)

"BLD",5846,"KRN","B",9.2,9.2)

"BLD",5846,"KRN","B",9.8,9.8)

"BLD",5846,"KRN","B",19,19)

"BLD",5846,"KRN","B",19.1,19.1)

"BLD",5846,"KRN","B",101,101)

"BLD",5846,"KRN","B",409.61,409.61)

"BLD",5846,"KRN","B",771,771)

"BLD",5846,"KRN","B",870,870)

"BLD",5846,"KRN","B",8989.51,8989.51)

"BLD",5846,"KRN","B",8989.52,8989.52)

"BLD",5846,"KRN","B",8994,8994)

"BLD",5846,"QUES",0)
^9.62^^
"BLD",5846,"REQB",0)
^9.611^1^1
"BLD",5846,"REQB",1,0)
PSS*1.0*97^2
"BLD",5846,"REQB","B","PSS*1.0*97",1)

"MBREQ")
0
"PKG",517,-1)
1^1
"PKG",517,0)
PHARMACY DATA MANAGEMENT^PSS^Maintenance of Pharmacy files.
"PKG",517,20,0)
^9.402P^^
"PKG",517,22,0)
^9.49I^1^1
"PKG",517,22,1,0)
1.0^2970930^2971014^11595
"PKG",517,22,1,"PAH",1,0)
104^3060118
"PKG",517,22,1,"PAH",1,1,0)
^^16^16^3060118
"PKG",517,22,1,"PAH",1,1,1,0)
A change has been made to the DIC^PSSDI and MIX^PSSDI components of DBIA 
"PKG",517,22,1,"PAH",1,1,2,0)
4551. DIC("S") will be killed within these components. Two new input 
"PKG",517,22,1,"PAH",1,1,3,0)
parameters have been added to address screening issues. If the file you
"PKG",517,22,1,"PAH",1,1,4,0)
are passing in has an Inactivation Date field, and you want to screen on 
"PKG",517,22,1,"PAH",1,1,5,0)
that field, a new date input parameter is being added to the components, 
"PKG",517,22,1,"PAH",1,1,6,0)
and if a date is passed in, a screen will be set for the calling
"PKG",517,22,1,"PAH",1,1,7,0)
application. If the file you are passing in is the DRUG file (#50), and 
"PKG",517,22,1,"PAH",1,1,8,0)
you want to screen on the APPLICATION PACKAGES' USE field (#63), and new 
"PKG",517,22,1,"PAH",1,1,9,0)
input paramter has been added for that also.
"PKG",517,22,1,"PAH",1,1,10,0)
 
"PKG",517,22,1,"PAH",1,1,11,0)
A new component, FNAME^PSSDI has been added to DBIA 4551. This component 
"PKG",517,22,1,"PAH",1,1,12,0)
will return the LABEL attribute of the Field passed into the call.
"PKG",517,22,1,"PAH",1,1,13,0)
 
"PKG",517,22,1,"PAH",1,1,14,0)
Patch PSS*1*92 adds the SERVICE CODE field to the output of the 
"PKG",517,22,1,"PAH",1,1,15,0)
DATA^PSS50 component of DBIA 4533. This patch cirrect the problem where 
"PKG",517,22,1,"PAH",1,1,16,0)
this field is not being returned if a "??" value is passed into the call.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
4
"RTN","PSS50")
0^2^B20914479
"RTN","PSS50",1,0)
PSS50 ;BIR/LDT - API FOR INFORMATION FROM FILE 50; 5 Sep 03
"RTN","PSS50",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**85,104**;9/30/97
"RTN","PSS50",3,0)
 ;
"RTN","PSS50",4,0)
DATA(PSSIEN,PSSFT,PSSFL,PSSPK,PSSRTOI,LIST) ;
"RTN","PSS50",5,0)
 ;Returns Drug File (#50) Data
"RTN","PSS50",6,0)
 D DATA^PSS50DAT
"RTN","PSS50",7,0)
 Q
"RTN","PSS50",8,0)
CMOP(PSSIEN,PSSFT,PSSFL,PSSPK,PSSRTOI,LIST) ;
"RTN","PSS50",9,0)
 ;Returns CMOP information from Drug File (#50)
"RTN","PSS50",10,0)
 D CMOP^PSS50CMP
"RTN","PSS50",11,0)
 Q
"RTN","PSS50",12,0)
DRG(PSSIEN,PSSFT,PSSFL,PSSPK,PSSRTOI,LIST) ;
"RTN","PSS50",13,0)
 ;Returns information from Drug File (#50) used by Inpatient Meds/Unit Dose
"RTN","PSS50",14,0)
 D DRG^PSS50DAT
"RTN","PSS50",15,0)
 Q
"RTN","PSS50",16,0)
ATC(PSSIEN,PSSFT,PSSFL,PSSPK,LIST) ;
"RTN","PSS50",17,0)
 ;Returns ATC fields from the Drug File (#50)
"RTN","PSS50",18,0)
 N PSSRTOI
"RTN","PSS50",19,0)
 D ATC^PSS50ATC
"RTN","PSS50",20,0)
 Q
"RTN","PSS50",21,0)
INV(PSSIEN,PSSFT,PSSFL,PSSPK,PSSRTOI,LIST) ;
"RTN","PSS50",22,0)
 ;Returns inventory fields from the Drug File (#50)
"RTN","PSS50",23,0)
 D INV^PSS50B
"RTN","PSS50",24,0)
 Q
"RTN","PSS50",25,0)
NDF(PSSIEN,PSSFT,PSSFL,PSSPK,PSSRTOI,LIST) ;
"RTN","PSS50",26,0)
 ;Returns NDF fields from the Drug File (#50)
"RTN","PSS50",27,0)
 D NDF^PSS50B
"RTN","PSS50",28,0)
 Q
"RTN","PSS50",29,0)
LAB(PSSIEN,PSSFT,PSSFL,PSSPK,PSSRTOI,LIST) ;
"RTN","PSS50",30,0)
 ;Returns Lab information from the Drug File (#50)
"RTN","PSS50",31,0)
 D LAB^PSS50LAB
"RTN","PSS50",32,0)
 Q
"RTN","PSS50",33,0)
CLOZ(PSSIEN,PSSFT,PSSFL,PSSPK,PSSRTOI,LIST) ;
"RTN","PSS50",34,0)
 ;Returns Clozapine information from the Drug File (#50)
"RTN","PSS50",35,0)
 D CLOZ^PSS50B2
"RTN","PSS50",36,0)
 Q
"RTN","PSS50",37,0)
ARWS(PSSIEN,PSSFT,LIST) ;
"RTN","PSS50",38,0)
 ;Returns fields utilized by the Automatic Replenishment/Ward Stock extract in PBM
"RTN","PSS50",39,0)
 N PSSFL,PSSPK,PSSRTOI
"RTN","PSS50",40,0)
 D ARWS^PSS50WS
"RTN","PSS50",41,0)
 Q
"RTN","PSS50",42,0)
DOSE(PSSIEN,PSSFT,PSSFL,PSSPK,PSSRTOI,LIST) ;
"RTN","PSS50",43,0)
 ;Returns Dosing fields from the Drug File (#50)
"RTN","PSS50",44,0)
 D DOSE^PSS50B
"RTN","PSS50",45,0)
 Q
"RTN","PSS50",46,0)
WS(PSSIEN,PSSFT,PSSFL,PSSPK,PSSRTOI,LIST) ;
"RTN","PSS50",47,0)
 ;Returns Ward Stock fields from the Drug File (#50)
"RTN","PSS50",48,0)
 D WS^PSS50C
"RTN","PSS50",49,0)
 Q
"RTN","PSS50",50,0)
MRTN(PSSIEN,PSSFT,PSSFL,PSSPK,PSSRTOI,LIST) ;
"RTN","PSS50",51,0)
 ;Returns Lab Test Monitor fields from the Drug File (#50)
"RTN","PSS50",52,0)
 D MRTN^PSS50C
"RTN","PSS50",53,0)
 Q
"RTN","PSS50",54,0)
ZERO(PSSIEN,PSSFT,PSSFL,PSSPK,PSSRTOI,LIST) ;
"RTN","PSS50",55,0)
 ;Returns Zero node information from the Drug File (#50)
"RTN","PSS50",56,0)
 D ZERO^PSS50C
"RTN","PSS50",57,0)
 Q
"RTN","PSS50",58,0)
NOCMOP(PSSIEN,PSSFL) ;
"RTN","PSS50",59,0)
 ;Returns drugs from the Drug file (#50) with the CMOP Dispense Field set to Null or No
"RTN","PSS50",60,0)
 Q $$NOCMOP^PSS50C(PSSIEN,$S($G(PSSFL)]"":PSSFL,1:""))
"RTN","PSS50",61,0)
 Q
"RTN","PSS50",62,0)
MSG(LIST) ;
"RTN","PSS50",63,0)
 ;Returns entries and data from the Drug File (#50) with data in the Quantity Dispense Message field
"RTN","PSS50",64,0)
 D MSG^PSS50C
"RTN","PSS50",65,0)
 Q
"RTN","PSS50",66,0)
IEN(LIST) ;
"RTN","PSS50",67,0)
 ;Returns Active Outpatient Drugs with a VA Product Name entry
"RTN","PSS50",68,0)
 D IEN^PSS50C
"RTN","PSS50",69,0)
 Q
"RTN","PSS50",70,0)
B(PSSFT,PSSFL,PSSPK,PSSRTOI,LIST) ;
"RTN","PSS50",71,0)
 ;Returns Drug information based on B cross reference
"RTN","PSS50",72,0)
 D B^PSS50D
"RTN","PSS50",73,0)
 Q
"RTN","PSS50",74,0)
VAC(PSSVAL,PSSFL,PSSPK,LIST) ;
"RTN","PSS50",75,0)
 ;Returns Generic Name based on National Drug Class
"RTN","PSS50",76,0)
 N PSSRTOI
"RTN","PSS50",77,0)
 D VAC^PSS50D
"RTN","PSS50",78,0)
 Q
"RTN","PSS50",79,0)
NDC(PSSVAL,PSSFL,PSSPK,LIST) ;
"RTN","PSS50",80,0)
 ;Returns Generic Name or IEN for drugs when passed an NDC
"RTN","PSS50",81,0)
 D NDC^PSS50D
"RTN","PSS50",82,0)
 Q
"RTN","PSS50",83,0)
ASP(PSSVAL,PSSFL,PSSPK,LIST) ;
"RTN","PSS50",84,0)
 ;Returns drug entries when passed an Orderable Item
"RTN","PSS50",85,0)
 N PSSRTOI
"RTN","PSS50",86,0)
 D ASP^PSS50D
"RTN","PSS50",87,0)
 Q
"RTN","PSS50",88,0)
AND(PSSVAL,PSSFL,PSSPK,LIST) ;
"RTN","PSS50",89,0)
 ;Returns drug entries when passed a National Drug File entry
"RTN","PSS50",90,0)
 N PSSRTOI
"RTN","PSS50",91,0)
 D AND^PSS50D
"RTN","PSS50",92,0)
 Q
"RTN","PSS50",93,0)
AP(PSSVAL,PSSFL,PSSPK,LIST) ;
"RTN","PSS50",94,0)
 ;Returns drug entries when passed a Primary Drug entry
"RTN","PSS50",95,0)
 N PSSRTOI
"RTN","PSS50",96,0)
 D AP^PSS50D
"RTN","PSS50",97,0)
 Q
"RTN","PSS50",98,0)
DSPUNT(PSSIEN,PSSIEN2,LIST) ;
"RTN","PSS50",99,0)
 ;Returns Dispense Units Per Order Unit when passed in the Drug and Synonym
"RTN","PSS50",100,0)
 D DSPUNT^PSS50C1
"RTN","PSS50",101,0)
 Q
"RTN","PSS50",102,0)
SKB(PSSIEN,PSSFL) ;
"RTN","PSS50",103,0)
 ;Sets and kills B cross reference on the Name field when the Drug is passed
"RTN","PSS50",104,0)
 I +$G(PSSIEN)'>0 Q 0
"RTN","PSS50",105,0)
 I $G(PSSFL)']"" Q 0
"RTN","PSS50",106,0)
 I "SK"'[$G(PSSFL) Q 0
"RTN","PSS50",107,0)
 Q $$SKB^PSS50E(PSSIEN,PSSFL)
"RTN","PSS50",108,0)
AOC(PSSVAL,PSSFL,PSSPK,LIST) ;
"RTN","PSS50",109,0)
 ;Returns generic name or IEN for drugs when passed the VA CLASSIFICATION
"RTN","PSS50",110,0)
 D AOC^PSS50E
"RTN","PSS50",111,0)
 Q
"RTN","PSS50",112,0)
C(PSSVAL,PSSFL,PSSPK,LIST) ;
"RTN","PSS50",113,0)
 ;Returns information from the Synonym multiple of the Drug File (#50)
"RTN","PSS50",114,0)
 D C^PSS50E
"RTN","PSS50",115,0)
 Q
"RTN","PSS50",116,0)
AQ(PSSIEN) ;
"RTN","PSS50",117,0)
 ;Checks for existence of "AQ" x-ref for PSSIEN passed
"RTN","PSS50",118,0)
 I +$G(PSSIEN)'>0 Q 0
"RTN","PSS50",119,0)
 Q +$G(^PSDRUG(+PSSIEN,3))
"RTN","PSS50",120,0)
SKAQ(PSSIEN,PSSFL) ;
"RTN","PSS50",121,0)
 ;Sets and kills "AQ" x-ref on the CMOP Dispense field for PSSIEN passed
"RTN","PSS50",122,0)
 I +$G(PSSIEN)'>0 Q 0
"RTN","PSS50",123,0)
 I $G(PSSFL)']"" Q 0
"RTN","PSS50",124,0)
 I "SK"'[$G(PSSFL) Q 0
"RTN","PSS50",125,0)
 Q $$SKAQ^PSS50E(PSSIEN,$G(PSSFL))
"RTN","PSS50",126,0)
SKAQ1(PSSIEN) ;
"RTN","PSS50",127,0)
 ;Sets and kills "AQ1" x-ref on the CMOP ID field for PSSIEN passed
"RTN","PSS50",128,0)
 I +$G(PSSIEN)'>0 Q 0
"RTN","PSS50",129,0)
 Q $$SKAQ1^PSS50E(PSSIEN)
"RTN","PSS50",130,0)
AQ1(PSSVAL,PSSFL,PSSPK,LIST) ;
"RTN","PSS50",131,0)
 ;Returns a list of drugs associated with the CMOP ID passed
"RTN","PSS50",132,0)
 D AQ1^PSS50B1
"RTN","PSS50",133,0)
 Q
"RTN","PSS50",134,0)
A526(PSSIEN,LIST) ;
"RTN","PSS50",135,0)
 ;Returns a list of additives associated with the Drug passed
"RTN","PSS50",136,0)
 D A526^PSS50E
"RTN","PSS50",137,0)
 Q
"RTN","PSS50",138,0)
A527(PSSIEN,LIST) ;
"RTN","PSS50",139,0)
 ;Returns a list of solutions associated with the drug passed
"RTN","PSS50",140,0)
 D A527^PSS50E
"RTN","PSS50",141,0)
 Q
"RTN","PSS50",142,0)
AIU(PSSFT,PSSPK,PSSFL,LIST) ;
"RTN","PSS50",143,0)
 ;Returns a list of drugs based on Application Packages' Use and Inactive Date
"RTN","PSS50",144,0)
 D AIU^PSS50B1
"RTN","PSS50",145,0)
 Q
"RTN","PSS50",146,0)
IU(PSSFL,LIST) ;
"RTN","PSS50",147,0)
 ;Returns a list of drugs based on Application Packages' Use not containing "O", "U", "I", or "N"
"RTN","PSS50",148,0)
 D IU^PSS50B1
"RTN","PSS50",149,0)
 Q
"RTN","PSS50",150,0)
SKAIU(PSSIEN,PSSFL) ;
"RTN","PSS50",151,0)
 ;Sets and Kills the "AIU" x-ref on the APPLICATION PACKAGES' USE field for PSSIEN and PSSPK passed
"RTN","PSS50",152,0)
 I +$G(PSSIEN)'>0 Q 0
"RTN","PSS50",153,0)
 I $G(PSSFL)']"" Q 0
"RTN","PSS50",154,0)
 I "SK"'[$G(PSSFL) Q 0
"RTN","PSS50",155,0)
 Q $$SKAIU^PSS50E(PSSIEN,PSSFL)
"RTN","PSS50",156,0)
SKIU(PSSIEN) ;
"RTN","PSS50",157,0)
 ;Sets and Kills the "IU" x-ref on the APPLICATION PACKAGES' USE field for PSSIEN and PSSPK passed
"RTN","PSS50",158,0)
 I +$G(PSSIEN)'>0 Q 0
"RTN","PSS50",159,0)
 Q $$SKIU^PSS50E(PSSIEN)
"RTN","PSS50",160,0)
AB(PSSVAL,PSSFL,PSSPK,LIST) ;
"RTN","PSS50",161,0)
 ;Returns a list of drugs associated with an IFCAP Item Number
"RTN","PSS50",162,0)
 D AB^PSS50C
"RTN","PSS50",163,0)
 Q
"RTN","PSS50",164,0)
AVSN(PSSVAL,PSSFL,PSSPK,LIST) ;
"RTN","PSS50",165,0)
 ;Returns synonym multiple for Synonym value passed
"RTN","PSS50",166,0)
 D AVSN^PSS50B1
"RTN","PSS50",167,0)
 Q
"RTN","PSS50",168,0)
FRMALT(PSSIEN,PSSFT,PSSFL,PSSPK,LIST) ;
"RTN","PSS50",169,0)
 ;Returns the Formulary Altenative for the drug value passed
"RTN","PSS50",170,0)
 N PSSRTOI
"RTN","PSS50",171,0)
 D FRMALT^PSS50B2
"RTN","PSS50",172,0)
 Q
"RTN","PSS50",173,0)
LABEL(PSSIEN,LIST) ;
"RTN","PSS50",174,0)
 ;Returns Information for the scanner for the drug IEN passed
"RTN","PSS50",175,0)
 D LABEL^PSS50A1
"RTN","PSS50",176,0)
 Q
"RTN","PSS50",177,0)
SORT(PSSIEN,LIST) ;
"RTN","PSS50",178,0)
 ;Returns a list of drugs for the IEN passed
"RTN","PSS50",179,0)
 D SORT^PSS50A1
"RTN","PSS50",180,0)
 Q
"RTN","PSS50",181,0)
OLDNM(PSSIEN,PSSFT,PSSFL,PSSPK,LIST) ;
"RTN","PSS50",182,0)
 ;Returns OLD NAME multiple from the Drug File (#50)
"RTN","PSS50",183,0)
 N PSSRTOI
"RTN","PSS50",184,0)
 D OLDNM^PSS50F
"RTN","PSS50",185,0)
 Q
"RTN","PSS50",186,0)
ADDOLDNM(PSSIEN,PSSONM,PSSDT) ;
"RTN","PSS50",187,0)
 ;Adds an entry to the OLD NAME Multiple of the Drug file (#50)
"RTN","PSS50",188,0)
 Q $$ADDOLDNM^PSS50F($G(PSSIEN),$G(PSSONM),$G(PSSDT))
"RTN","PSS50",189,0)
LIST(PSSFT,PSSFL,PSSD,PSSPK,LIST) ;
"RTN","PSS50",190,0)
 ;Returns a list containing GENERIC NAME field (#.01) and PHARMCY ORDERABLE ITEM field (#2.1)
"RTN","PSS50",191,0)
 N PSSRTOI
"RTN","PSS50",192,0)
 D LIST^PSS50F1
"RTN","PSS50",193,0)
 Q
"RTN","PSS50",194,0)
EDTIFCAP(PSSIEN,PSSVAL) ;
"RTN","PSS50",195,0)
 ;Adds an entry to the IFCAP ITEM NUMBER multiple of the DRUG file (#50)
"RTN","PSS50",196,0)
 Q $$EDTIFCAP^PSS50F($G(PSSIEN),$G(PSSVAL))
"RTN","PSS50",197,0)
LOOKUP(PSSFT,PSSFL,PSSPK,PSSRTOI,PSSIFCAP,PSSCMOP,PSSD,LIST) ;
"RTN","PSS50",198,0)
 D LOOKUP^PSS50F1
"RTN","PSS50",199,0)
 Q
"RTN","PSS50",200,0)
CSYN(PSSIEN,PSSVAL,LIST) ;
"RTN","PSS50",201,0)
 ;returns synonym information from the synonym multiple of the Drug file (#50)
"RTN","PSS50",202,0)
 D CSYN^PSS50C1
"RTN","PSS50",203,0)
 Q
"RTN","PSS50AQM")
0^4^B58572907
"RTN","PSS50AQM",1,0)
PSS50AQM ;BIR/LDT - CONTINUATION OF API FOR INFORMATION FROM FILE 50; 5 Sep 03
"RTN","PSS50AQM",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**85,91,104**;9/30/97
"RTN","PSS50AQM",3,0)
 ;External reference to PS(50.3 supported by DBIA 2127
"RTN","PSS50AQM",4,0)
 ;External reference to PS(50.605 supported by DBIA 2138
"RTN","PSS50AQM",5,0)
 ;External reference to PSNDF(50.6 supported by DBIA 2079
"RTN","PSS50AQM",6,0)
 ;External reference to PSNDF(50.68 supported by DBIA 3735
"RTN","PSS50AQM",7,0)
 ;
"RTN","PSS50AQM",8,0)
SETALL ;
"RTN","PSS50AQM",9,0)
 N PSSZNODE,PSS660,PSSNDNOD,PSS2NODE,PSSG2NOD S PSSZNODE=$G(^PSDRUG(PSS(1),0)),PSS2NODE=$G(^(2)),PSS660=$G(^(660)),PSSG2NOD=$G(^("PSG")),PSSNDNOD=$G(^("ND"))
"RTN","PSS50AQM",10,0)
 S ^TMP($J,LIST,+PSS(1),.01)=$P(PSSZNODE,"^")
"RTN","PSS50AQM",11,0)
 S ^TMP($J,LIST,"B",$P(PSSZNODE,"^"),+PSS(1))=""
"RTN","PSS50AQM",12,0)
 S ^TMP($J,LIST,+PSS(1),2)=$P(PSSZNODE,"^",2)
"RTN","PSS50AQM",13,0)
 S ^TMP($J,LIST,+PSS(1),2.1)=$S('$P(PSS2NODE,"^"):"",1:$P(PSS2NODE,"^")_"^"_$P($G(^PS(50.7,+$P(PSS2NODE,"^"),0)),"^"))
"RTN","PSS50AQM",14,0)
 N PSSADDF S PSSADDF=$P($G(^PS(50.7,+$P($G(^TMP($J,LIST,+PSS(1),2.1)),"^"),0)),"^",2) I PSSADDF>0 D
"RTN","PSS50AQM",15,0)
 .S ^TMP($J,LIST,+PSS(1),2.1)=^TMP($J,LIST,+PSS(1),2.1)_"^"_PSSADDF_"^"_$P($G(^PS(50.606,PSSADDF,0)),"^")
"RTN","PSS50AQM",16,0)
 S ^TMP($J,LIST,+PSS(1),3)=$P(PSSZNODE,"^",3)
"RTN","PSS50AQM",17,0)
 S ^TMP($J,LIST,+PSS(1),4)=$P(PSSZNODE,"^",4)
"RTN","PSS50AQM",18,0)
 S ^TMP($J,LIST,+PSS(1),5)=$P(PSSZNODE,"^",5)
"RTN","PSS50AQM",19,0)
 S ^TMP($J,LIST,+PSS(1),6)=$P(PSSZNODE,"^",6)
"RTN","PSS50AQM",20,0)
 S ^TMP($J,LIST,+PSS(1),8)=$P(PSSZNODE,"^",8)
"RTN","PSS50AQM",21,0)
 S ^TMP($J,LIST,+PSS(1),12)=$S($P(PSS660,"^",2):$P(PSS660,"^",2)_"^"_$P($G(^DIC(51.5,+$P(PSS660,"^",2),0)),"^")_"^"_$P($G(^(0)),"^",2),1:"")
"RTN","PSS50AQM",22,0)
 S ^TMP($J,LIST,+PSS(1),13)=$P(PSS660,"^",3)
"RTN","PSS50AQM",23,0)
 S ^TMP($J,LIST,+PSS(1),14.5)=$P(PSS660,"^",8)
"RTN","PSS50AQM",24,0)
 S ^TMP($J,LIST,+PSS(1),15)=$P(PSS660,"^",5)
"RTN","PSS50AQM",25,0)
 S ^TMP($J,LIST,+PSS(1),16)=$P(PSS660,"^",6)
"RTN","PSS50AQM",26,0)
 S ^TMP($J,LIST,+PSS(1),20)=$S($P(PSSNDNOD,"^"):$P(PSSNDNOD,"^")_"^"_$P($G(^PSNDF(50.6,+$P(PSSNDNOD,"^"),0)),"^"),1:"")
"RTN","PSS50AQM",27,0)
 S ^TMP($J,LIST,+PSS(1),21)=$P(PSSNDNOD,"^",2)
"RTN","PSS50AQM",28,0)
 S ^TMP($J,LIST,+PSS(1),22)=$S($P(PSSNDNOD,"^",3):$P(PSSNDNOD,"^",3)_"^"_$P($G(^PSNDF(50.68,+$P(PSSNDNOD,"^",3),0)),"^"),1:"")
"RTN","PSS50AQM",29,0)
 S ^TMP($J,LIST,+PSS(1),25)=$S($P(PSSNDNOD,"^",6):$P(PSSNDNOD,"^",6)_"^"_$P($G(^PS(50.605,+$P(PSSNDNOD,"^",6),0)),"^")_"^"_$P($G(^(0)),"^",2),1:"")
"RTN","PSS50AQM",30,0)
 S ^TMP($J,LIST,+PSS(1),27)=$P(PSSNDNOD,"^",10)
"RTN","PSS50AQM",31,0)
 S ^TMP($J,LIST,+PSS(1),31)=$P(PSS2NODE,"^",4)
"RTN","PSS50AQM",32,0)
 S ^TMP($J,LIST,+PSS(1),40)=$P($G(^PSDRUG(PSS(1),"PSO")),"^")
"RTN","PSS50AQM",33,0)
 N PSS51NF S PSS51NF=$P(PSSZNODE,"^",9)  D
"RTN","PSS50AQM",34,0)
 .I PSS51NF'="",PSS51NFD'="",PSS51NFD[(PSS51NF_":") S ^TMP($J,LIST,+PSS(1),51)=PSS51NF_"^"_$P($E(PSS51NFD,$F(PSS51NFD,(PSS51NF_":")),999),";") Q
"RTN","PSS50AQM",35,0)
 .S ^TMP($J,LIST,+PSS(1),51)=""
"RTN","PSS50AQM",36,0)
 N PSS52NF S PSS52NF=$P(PSSZNODE,"^",11)  D
"RTN","PSS50AQM",37,0)
 .I PSS52NF'="",PSS52NFD'="",PSS52NFD[(PSS52NF_":") S ^TMP($J,LIST,+PSS(1),52)=PSS52NF_"^"_$P($E(PSS52NFD,$F(PSS52NFD,(PSS52NF_":")),999),";") Q
"RTN","PSS50AQM",38,0)
 .S ^TMP($J,LIST,+PSS(1),52)=""
"RTN","PSS50AQM",39,0)
 S ^TMP($J,LIST,+PSS(1),63)=$P(PSS2NODE,"^",3)
"RTN","PSS50AQM",40,0)
 S ^TMP($J,LIST,+PSS(1),64)=$S($P(PSS2NODE,"^",6):$P(PSS2NODE,"^",6)_"^"_$P($G(^PS(50.3,+$P(PSS2NODE,"^",6),0)),"^"),1:"")
"RTN","PSS50AQM",41,0)
 N Y S Y=$P($G(^PSDRUG(PSS(1),"I")),"^") D
"RTN","PSS50AQM",42,0)
 .I Y S ^TMP($J,LIST,+PSS(1),100)=$G(Y) X ^DD("DD") S ^TMP($J,LIST,+PSS(1),100)=^TMP($J,LIST,+PSS(1),100)_"^"_$G(Y) Q
"RTN","PSS50AQM",43,0)
 .S ^TMP($J,LIST,+PSS(1),100)=""
"RTN","PSS50AQM",44,0)
 S ^TMP($J,LIST,+PSS(1),101)=$P(PSSZNODE,"^",10)
"RTN","PSS50AQM",45,0)
 S ^TMP($J,LIST,+PSS(1),102)=$P(PSS2NODE,"^",2)
"RTN","PSS50AQM",46,0)
 N PSSG2 S PSSG2=$P(PSSG2NOD,"^",2)  D
"RTN","PSS50AQM",47,0)
 .I PSSG2'="",PSSG2N'="",PSSG2N[(PSSG2_":") S ^TMP($J,LIST,+PSS(1),301)=PSSG2_"^"_$P($E(PSSG2N,$F(PSSG2N,(PSSG2_":")),999),";") Q
"RTN","PSS50AQM",48,0)
 .S ^TMP($J,LIST,+PSS(1),301)=""
"RTN","PSS50AQM",49,0)
 S ^TMP($J,LIST,+PSS(1),302)=$P(PSSG2NOD,"^",3)
"RTN","PSS50AQM",50,0)
 ;Set new Service Code field
"RTN","PSS50AQM",51,0)
 I $$PATCH^XPDUTL("PSS*1.0*92") D
"RTN","PSS50AQM",52,0)
 .S ^TMP($J,LIST,+PSS(1),400)=$P($G(^PSDRUG(+PSS(1),"PFS")),"^")
"RTN","PSS50AQM",53,0)
 .I $P(PSSNDNOD,"^",3),$P($G(^PSNDF(50.68,+$P(PSSNDNOD,"^",3),"PFS")),"^")'="" S ^TMP($J,LIST,+PSS(1),400)=$P($G(^PSNDF(50.68,+$P(PSSNDNOD,"^",3),"PFS")),"^")
"RTN","PSS50AQM",54,0)
 .I $P($G(^TMP($J,LIST,+PSS(1),400)),"^")="" S ^TMP($J,LIST,+PSS(1),400)=600000
"RTN","PSS50AQM",55,0)
 Q
"RTN","PSS50AQM",56,0)
 ;
"RTN","PSS50AQM",57,0)
 ;
"RTN","PSS50AQM",58,0)
SETSYN ;
"RTN","PSS50AQM",59,0)
 N PSS501C S PSS501C=0
"RTN","PSS50AQM",60,0)
 I $O(^PSDRUG(PSS(1),1,0)) N PSS501,PSS501ND  D
"RTN","PSS50AQM",61,0)
 .F PSS501=0:0 S PSS501=$O(^PSDRUG(PSS(1),1,PSS501)) Q:'PSS501  D
"RTN","PSS50AQM",62,0)
 ..S PSS501ND=$G(^PSDRUG(PSS(1),1,PSS501,0)) I $P(PSS501ND,"^")'="" S PSS501C=PSS501C+1 D
"RTN","PSS50AQM",63,0)
 ...S ^TMP($J,LIST,+PSS(1),"SYN",PSS501,.01)=$P(PSS501ND,"^")
"RTN","PSS50AQM",64,0)
 ...N PSS501NN S PSS501NN=$P(PSS501ND,"^",3)  D
"RTN","PSS50AQM",65,0)
 ....I PSS501NN'="",PSS501NX'="",PSS501NX[(PSS501NN_":") S ^TMP($J,LIST,+PSS(1),"SYN",PSS501,1)=PSS501NN_"^"_$P($E(PSS501NX,$F(PSS501NX,(PSS501NN_":")),999),";") Q
"RTN","PSS50AQM",66,0)
 ....S ^TMP($J,LIST,+PSS(1),"SYN",PSS501,1)=""
"RTN","PSS50AQM",67,0)
 ...S ^TMP($J,LIST,+PSS(1),"SYN",PSS501,2)=$P(PSS501ND,"^",2)
"RTN","PSS50AQM",68,0)
 ...S ^TMP($J,LIST,+PSS(1),"SYN",PSS501,403)=$P(PSS501ND,"^",7)
"RTN","PSS50AQM",69,0)
 S ^TMP($J,LIST,+PSS(1),"SYN",0)=$S(PSS501C:PSS501C,1:"-1^NO DATA FOUND")
"RTN","PSS50AQM",70,0)
 Q
"RTN","PSS50AQM",71,0)
 ;
"RTN","PSS50AQM",72,0)
SETFMA ;
"RTN","PSS50AQM",73,0)
 N PSS65C S PSS65C=0
"RTN","PSS50AQM",74,0)
 I $O(^PSDRUG(PSS(1),65,0)) N PSS65,PSS65ND D
"RTN","PSS50AQM",75,0)
 .F PSS65=0:0 S PSS65=$O(^PSDRUG(PSS(1),65,PSS65)) Q:'PSS65  D
"RTN","PSS50AQM",76,0)
 ..S PSS65ND=$G(^PSDRUG(PSS(1),65,PSS65,0)) I $P(PSS65ND,"^") S PSS65C=PSS65C+1 D
"RTN","PSS50AQM",77,0)
 ...S ^TMP($J,LIST,+PSS(1),"FRM",PSS65,.01)=$P(PSS65ND,"^")_"^"_$P($G(^PSDRUG(+$P(PSS65ND,"^"),0)),"^")
"RTN","PSS50AQM",78,0)
 S ^TMP($J,LIST,+PSS(1),"FRM",0)=$S(PSS65C:PSS65C,1:"-1^NO DATA FOUND")
"RTN","PSS50AQM",79,0)
 Q
"RTN","PSS50AQM",80,0)
 ;
"RTN","PSS50AQM",81,0)
SETOLD ;
"RTN","PSS50AQM",82,0)
 N PSS900C S PSS900C=0
"RTN","PSS50AQM",83,0)
 I $O(^PSDRUG(PSS(1),900,0)) N PSS900,PSS900ND D
"RTN","PSS50AQM",84,0)
 .F PSS900=0:0 S PSS900=$O(^PSDRUG(PSS(1),900,PSS900)) Q:'PSS900  D
"RTN","PSS50AQM",85,0)
 ..S PSS900ND=$G(^PSDRUG(PSS(1),900,PSS900,0)) I $P(PSS900ND,"^")'="" S PSS900C=PSS900C+1 D
"RTN","PSS50AQM",86,0)
 ...S ^TMP($J,LIST,+PSS(1),"OLD",PSS900,.01)=$P(PSS900ND,"^")
"RTN","PSS50AQM",87,0)
 ...N Y S Y=$P(PSS900ND,"^",2) I Y S ^TMP($J,LIST,+PSS(1),"OLD",PSS900,.02)=$G(Y) X ^DD("DD") S ^TMP($J,LIST,+PSS(1),"OLD",PSS900,.02)=^TMP($J,LIST,+PSS(1),"OLD",PSS900,.02)_"^"_$G(Y)
"RTN","PSS50AQM",88,0)
 S ^TMP($J,LIST,+PSS(1),"OLD",0)=$S(PSS900C:PSS900C,1:"-1^NO DATA FOUND")
"RTN","PSS50AQM",89,0)
 Q
"RTN","PSS50AQM",90,0)
SETSUB1(PSST1) ;Set sub-header nodes if there is data, and sub-header nodes do not exist
"RTN","PSS50AQM",91,0)
 N PSST2,PSST3,PSST4
"RTN","PSS50AQM",92,0)
 I $G(^PSDRUG(PSST1,1,0))="",$O(^PSDRUG(PSST1,1,0)) D
"RTN","PSS50AQM",93,0)
 .S (PSST4,PSST3)=0 F PSST2=0:0 S PSST2=$O(^PSDRUG(PSST1,1,PSST2)) Q:'PSST2  I $D(^PSDRUG(PSST1,1,PSST2,0)) S PSST3=PSST2,PSST4=PSST4+1
"RTN","PSS50AQM",94,0)
 .I PSST4 S ^PSDRUG(PSST1,1,0)="^50.1A^"_PSST3_"^"_PSST4
"RTN","PSS50AQM",95,0)
 Q
"RTN","PSS50AQM",96,0)
SETSUB2(PSST1) ;
"RTN","PSS50AQM",97,0)
 N PSST2,PSST3,PSST4
"RTN","PSS50AQM",98,0)
 I $G(^PSDRUG(PSST1,65,0))="",$O(^PSDRUG(PSST1,65,0)) D
"RTN","PSS50AQM",99,0)
 .S (PSST4,PSST3)=0 F PSST2=0:0 S PSST2=$O(^PSDRUG(PSST1,65,PSST2)) Q:'PSST2  I $D(^PSDRUG(PSST1,65,PSST2,0)) S PSST3=PSST2,PSST4=PSST4+1
"RTN","PSS50AQM",100,0)
 .I PSST4 S ^PSDRUG(PSST1,65,0)="^50.065P^"_PSST3_"^"_PSST4
"RTN","PSS50AQM",101,0)
 Q
"RTN","PSS50AQM",102,0)
SETSUB3(PSST1) ;
"RTN","PSS50AQM",103,0)
 N PSST2,PSST3,PSST4
"RTN","PSS50AQM",104,0)
 I $G(^PSDRUG(PSST1,900,0))="",$O(^PSDRUG(PSST1,900,0)) D
"RTN","PSS50AQM",105,0)
 .S (PSST4,PSST3)=0 F PSST2=0:0 S PSST2=$O(^PSDRUG(PSST1,900,PSST2)) Q:'PSST2  I $D(^PSDRUG(PSST1,900,PSST2,0)) S PSST3=PSST2,PSST4=PSST4+1
"RTN","PSS50AQM",106,0)
 .I PSST4 S ^PSDRUG(PSST1,900,0)="^50.01A^"_PSST3_"^"_PSST4
"RTN","PSS50AQM",107,0)
 Q
"RTN","PSS50AQM",108,0)
SETSUB4(PSST1) ;
"RTN","PSS50AQM",109,0)
 N PSST2,PSST3,PSST4
"RTN","PSS50AQM",110,0)
 I $G(^PSDRUG(PSST1,441,0))="",$O(^PSDRUG(PSST1,441,0)) D
"RTN","PSS50AQM",111,0)
 .S (PSST4,PSST3)=0 F PSST2=0:0 S PSST2=$O(^PSDRUG(PSST1,441,PSST2)) Q:'PSST2  I $D(^PSDRUG(PSST1,441,PSST2,0)) S PSST3=PSST2,PSST4=PSST4+1
"RTN","PSS50AQM",112,0)
 .I PSST4 S ^PSDRUG(PSST1,441,0)="^50.0441P^"_PSST3_"^"_PSST4
"RTN","PSS50AQM",113,0)
 Q
"RTN","PSS50AQM",114,0)
SETSUB5(PSST1) ;
"RTN","PSS50AQM",115,0)
 N PSST2,PSST3,PSST4
"RTN","PSS50AQM",116,0)
 I $G(^PSDRUG(PSST1,4,0))="",$O(^PSDRUG(PSST1,4,0)) D
"RTN","PSS50AQM",117,0)
 .S (PSST4,PSST3)=0 F PSST2=0:0 S PSST2=$O(^PSDRUG(PSST1,4,PSST2)) Q:'PSST2  I $D(^PSDRUG(PSST1,4,PSST2,0)) S PSST3=PSST2,PSST4=PSST4+1
"RTN","PSS50AQM",118,0)
 .I PSST4 S ^PSDRUG(PSST1,4,0)="^50.0214DA^"_PSST3_"^"_PSST4
"RTN","PSS50AQM",119,0)
 Q
"RTN","PSS50AQM",120,0)
SETSUB6(PSST1) ;
"RTN","PSS50AQM",121,0)
 N PSST2,PSST3,PSST4
"RTN","PSS50AQM",122,0)
 I $G(^PSDRUG(PSST1,"CLOZ2",0))="",$O(^PSDRUG(PSST1,"CLOZ2",0)) D
"RTN","PSS50AQM",123,0)
 .S (PSST4,PSST3)=0 F PSST2=0:0 S PSST2=$O(^PSDRUG(PSST1,"CLOZ2",PSST2)) Q:'PSST2  I $D(^PSDRUG(PSST1,"CLOZ2",PSST2,0)) S PSST3=PSST2,PSST4=PSST4+1
"RTN","PSS50AQM",124,0)
 .I PSST4 S ^PSDRUG(PSST1,"CLOZ2",0)="^50.02P^"_PSST3_"^"_PSST4
"RTN","PSS50AQM",125,0)
 Q
"RTN","PSS50AQM",126,0)
SETSUB7(PSST1) ;
"RTN","PSS50AQM",127,0)
 N PSST2,PSST3,PSST4
"RTN","PSS50AQM",128,0)
 I $G(^PSDRUG(PSST1,"DOS1",0))="",$O(^PSDRUG(PSST1,"DOS1",0)) D
"RTN","PSS50AQM",129,0)
 .S (PSST4,PSST3)=0 F PSST2=0:0 S PSST2=$O(^PSDRUG(PSST1,"DOS1",PSST2)) Q:'PSST2  I $D(^PSDRUG(PSST1,"DOS1",PSST2,0)) S PSST3=PSST2,PSST4=PSST4+1
"RTN","PSS50AQM",130,0)
 .I PSST4 S ^PSDRUG(PSST1,"DOS1",0)="^50.0903^"_PSST3_"^"_PSST4
"RTN","PSS50AQM",131,0)
 Q
"RTN","PSS50AQM",132,0)
SETSUB8(PSST1) ;
"RTN","PSS50AQM",133,0)
 N PSST2,PSST3,PSST4
"RTN","PSS50AQM",134,0)
 I $G(^PSDRUG(PSST1,"DOS2",0))="",$O(^PSDRUG(PSST1,"DOS2",0)) D
"RTN","PSS50AQM",135,0)
 .S (PSST4,PSST3)=0 F PSST2=0:0 S PSST2=$O(^PSDRUG(PSST1,"DOS2",PSST2)) Q:'PSST2  I $D(^PSDRUG(PSST1,"DOS2",PSST2,0)) S PSST3=PSST2,PSST4=PSST4+1
"RTN","PSS50AQM",136,0)
 .I PSST4 S ^PSDRUG(PSST1,"DOS2",0)="^50.0904^"_PSST3_"^"_PSST4
"RTN","PSS50AQM",137,0)
 Q
"RTN","PSS50AQM",138,0)
SETSUB9(PSST1) ;
"RTN","PSS50AQM",139,0)
 N PSST2,PSST3,PSST4
"RTN","PSS50AQM",140,0)
 I $G(^PSDRUG(PSST1,212,0))="",$O(^PSDRUG(PSST1,212,0)) D
"RTN","PSS50AQM",141,0)
 .S (PSST4,PSST3)=0 F PSST2=0:0 S PSST2=$O(^PSDRUG(PSST1,212,PSST2)) Q:'PSST2  I $D(^PSDRUG(PSST1,212,PSST2,0)) S PSST3=PSST2,PSST4=PSST4+1
"RTN","PSS50AQM",142,0)
 .I PSST4 S ^PSDRUG(PSST1,212,0)="^50.0212P^"_PSST3_"^"_PSST4
"RTN","PSS50AQM",143,0)
 Q
"RTN","PSS50AQM",144,0)
SETDF(PSSIEN) ;
"RTN","PSS50AQM",145,0)
 ;PSSIEN - IEN of entry in PHARMACY ORDERABLE ITEM file (#50.7).
"RTN","PSS50AQM",146,0)
 ;Returns NAME field (#.01) of PHARMACY ORDERABLE ITEM file (#50.7) and DOSAGE FORM
"RTN","PSS50AQM",147,0)
 N DIERR,ZZERR,PSS50P7,PSS
"RTN","PSS50AQM",148,0)
 I +$G(PSSIEN)'>0 Q -1_"^"_"NO DATA FOUND"
"RTN","PSS50AQM",149,0)
 D GETS^DIQ(50.7,+PSSIEN,".01;.02","IE","PSS50P7")
"RTN","PSS50AQM",150,0)
 I '$D(PSS50P7) Q -1_"^"_"NO DATA FOUND"
"RTN","PSS50AQM",151,0)
 Q $G(PSSIEN)_"^"_$G(PSS50P7(50.7,PSSIEN_",",.01,"I"))_"^"_$G(PSS50P7(50.7,PSSIEN_",",.02,"I"))_"^"_$G(PSS50P7(50.7,PSSIEN_",",.02,"E"))
"RTN","PSS50E")
0^3^B41819324
"RTN","PSS50E",1,0)
PSS50E ;BIR/LDT - API FOR INFORMATION FROM FILE 50; 5 Sep 03
"RTN","PSS50E",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**85,104**;9/30/97
"RTN","PSS50E",3,0)
 ;
"RTN","PSS50E",4,0)
SKB(PSSIEN2,PSSFL2) ;
"RTN","PSS50E",5,0)
 ;PSSIEN2 - IEN of entry in 50
"RTN","PSS50E",6,0)
 ;PSSFL2 - action flag - S to set the "B" cross-reference or
"RTN","PSS50E",7,0)
 ;                      K to kill the "B" cross-reference.
"RTN","PSS50E",8,0)
 ;
"RTN","PSS50E",9,0)
 I +$G(PSSIEN2)'>0 Q 0
"RTN","PSS50E",10,0)
 I "SK"'[$G(PSSFL2) Q 0
"RTN","PSS50E",11,0)
 I PSSFL2="S",$G(^PSDRUG(+PSSIEN2,0))]"" S ^PSDRUG("B",$E($P($G(^PSDRUG(+PSSIEN2,0)),"^"),1,40),+PSSIEN2)="" Q 1
"RTN","PSS50E",12,0)
 I PSSFL2="K",$G(^PSDRUG(+PSSIEN2,0))]"" K ^PSDRUG("B",$E($P($G(^PSDRUG(+PSSIEN2,0)),"^"),1,40),+PSSIEN2) Q 1
"RTN","PSS50E",13,0)
 Q 0
"RTN","PSS50E",14,0)
 ;
"RTN","PSS50E",15,0)
 I $A(PSSVAL)'=34 S PSSVAL=$C(34)_PSSVAL_$C(34)
"RTN","PSS50E",16,0)
AOC ;
"RTN","PSS50E",17,0)
 ;PSSVAL - VA CLASSIFICATION field (#2) of the DRUG file (#50)
"RTN","PSS50E",18,0)
 ;PSSFL - Inactive flag - "" - All entries
"RTN","PSS50E",19,0)
 ;                        FileMan Date - Only entries with no Inactive Date or an Inactive Date greater than this date.
"RTN","PSS50E",20,0)
 ;PSSPK - Application Package's Use - "" - All entries
"RTN","PSS50E",21,0)
 ;                                         Alphabetic codes that represent the DHCP packages that consider this drug to be
"RTN","PSS50E",22,0)
 ;                                         part of their formulary.
"RTN","PSS50E",23,0)
 ;LIST - Subscript of ^TMP array in the form ^TMP($J,LIST,Field Number where Field Number is the Field Number of the data
"RTN","PSS50E",24,0)
 ;       piece being returned.
"RTN","PSS50E",25,0)
 ;
"RTN","PSS50E",26,0)
 N PSS
"RTN","PSS50E",27,0)
 I $G(LIST)']"" Q
"RTN","PSS50E",28,0)
 K ^TMP($J,LIST)
"RTN","PSS50E",29,0)
 I $G(PSSVAL)']"" S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSS50E",30,0)
 S ^TMP($J,LIST,0)=0
"RTN","PSS50E",31,0)
 S PSS(1)=0  F  S PSS(1)=$O(^PSDRUG("AOC",PSS(1))) Q:'PSS(1)  S PSS(2)="" F  S PSS(2)=$O(^PSDRUG("AOC",PSS(1),PSS(2))) Q:PSS(2)=""  D
"RTN","PSS50E",32,0)
 .Q:PSS(2)'=PSSVAL  S PSS(3)=0 F  S PSS(3)=$O(^PSDRUG("AOC",PSS(1),PSS(2),PSS(3))) Q:'PSS(3)  D
"RTN","PSS50E",33,0)
 ..N ZNODE,NODE2,INODE S ZNODE=$G(^PSDRUG(+PSS(3),0)),NODE2=$G(^(2)),INODE=$G(^("I"))
"RTN","PSS50E",34,0)
 ..I +$G(PSSFL)>0,+INODE>0,+INODE'>PSSFL Q
"RTN","PSS50E",35,0)
 ..;Naked reference below refers to ^PSDRUG(+PSS(3),2)
"RTN","PSS50E",36,0)
 ..I $G(PSSPK)]"" N PSSZ5,PSSZ6 S PSSZ5=0 F PSSZ6=1:1:$L(PSSPK) Q:PSSZ5  I $P($G(^(2)),"^",3)[$E(PSSPK,PSSZ6) S PSSZ5=1
"RTN","PSS50E",37,0)
 ..I $G(PSSPK)]"",'PSSZ5 Q
"RTN","PSS50E",38,0)
 ..S ^TMP($J,LIST,0)=^TMP($J,LIST,0)+1,^TMP($J,LIST,+PSS(3),.01)=$P(ZNODE,"^")
"RTN","PSS50E",39,0)
 ..S ^TMP($J,LIST,"AOC",$P(ZNODE,"^"),+PSS(3))=""
"RTN","PSS50E",40,0)
 I ^TMP($J,LIST,0)'>0 S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND"
"RTN","PSS50E",41,0)
 Q
"RTN","PSS50E",42,0)
 ;
"RTN","PSS50E",43,0)
C ;
"RTN","PSS50E",44,0)
 ;PSSVAL - SYNONYM sub-field (#9) of the DRUG file (#50)
"RTN","PSS50E",45,0)
 ;PSSFL - Inactive flag - "" - All entries
"RTN","PSS50E",46,0)
 ;                        FileMan Date - Only entries with no Inactive Date or an Inactive Date greater than this date.
"RTN","PSS50E",47,0)
 ;PSSPK - Application Package's Use - "" - All entries
"RTN","PSS50E",48,0)
 ;                                         Alphabetic codes that represent the DHCP packages that consider this drug to be
"RTN","PSS50E",49,0)
 ;                                         part of their formulary.
"RTN","PSS50E",50,0)
 ;LIST - Subscript of ^TMP array in the form ^TMP($J,LIST,Field Number where Field Number is the Field Number of the data
"RTN","PSS50E",51,0)
 ;       piece being returned.
"RTN","PSS50E",52,0)
 ;       
"RTN","PSS50E",53,0)
 N DIERR,ZZERR,PSS,PSSP50
"RTN","PSS50E",54,0)
 I $G(LIST)']"" Q
"RTN","PSS50E",55,0)
 K ^TMP($J,LIST)
"RTN","PSS50E",56,0)
 I $G(PSSVAL)']"" S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSS50E",57,0)
 S ^TMP($J,LIST,0)=0
"RTN","PSS50E",58,0)
 S PSS(1)=""  F  S PSS(1)=$O(^PSDRUG("C",PSS(1))) Q:PSS(1)=""  S PSS(2)="" F  S PSS(2)=$O(^PSDRUG("C",PSS(1),PSS(2))) Q:PSS(2)=""  D
"RTN","PSS50E",59,0)
 .Q:PSS(1)'=PSSVAL  D
"RTN","PSS50E",60,0)
 ..N ZNODE,NODE2,INODE S ZNODE=$G(^PSDRUG(+PSS(2),0)),NODE2=$G(^(2)),INODE=$P($G(^("I")),"^")
"RTN","PSS50E",61,0)
 ..I +$G(PSSFL)>0,+INODE>0,+INODE'>PSSFL Q
"RTN","PSS50E",62,0)
 ..;Naked reference below refers to ^PSDRUG(+PSS(2),2)
"RTN","PSS50E",63,0)
 ..I $G(PSSPK)]"" N PSSZ5,PSSZ6 S PSSZ5=0 F PSSZ6=1:1:$L(PSSPK) Q:PSSZ5  I $P($G(^(2)),"^",3)[$E(PSSPK,PSSZ6) S PSSZ5=1
"RTN","PSS50E",64,0)
 ..I $G(PSSPK)]"",'PSSZ5 Q 
"RTN","PSS50E",65,0)
 ..S ^TMP($J,LIST,0)=^TMP($J,LIST,0)+1,^TMP($J,LIST,+PSS(2),.01)=$P(ZNODE,"^"),^TMP($J,LIST,"C",$P(ZNODE,"^"),+PSS(2))="" D
"RTN","PSS50E",66,0)
 ...K PSSP50 D GETS^DIQ(50,+PSS(2),"9*","IE","PSSP50") S PSS(3)=0
"RTN","PSS50E",67,0)
 ...F  S PSS(3)=$O(PSSP50(50.1,PSS(3))) Q:'PSS(3)  D
"RTN","PSS50E",68,0)
 ....S ^TMP($J,LIST,+PSS(2),+PSS(3),.01)=$G(PSSP50(50.1,PSS(3),.01,"I"))
"RTN","PSS50E",69,0)
 ....S ^TMP($J,LIST,+PSS(2),+PSS(3),2)=$G(PSSP50(50.1,PSS(3),2,"I"))
"RTN","PSS50E",70,0)
 ....S ^TMP($J,LIST,+PSS(2),+PSS(3),1)=$S($G(PSSP50(50.1,PSS(3),1,"I"))="":"",1:PSSP50(50.1,PSS(3),1,"I")_"^"_PSSP50(50.1,PSS(3),1,"E"))
"RTN","PSS50E",71,0)
 ....S ^TMP($J,LIST,+PSS(2),+PSS(3),400)=$G(PSSP50(50.1,PSS(3),400,"I"))
"RTN","PSS50E",72,0)
 ....S ^TMP($J,LIST,+PSS(2),+PSS(3),401)=$S($G(PSSP50(50.1,PSS(3),401,"I"))="":"",1:PSSP50(50.1,PSS(3),401,"I")_"^"_PSSP50(50.1,PSS(3),401,"E"))
"RTN","PSS50E",73,0)
 ....S ^TMP($J,LIST,+PSS(2),+PSS(3),402)=$G(PSSP50(50.1,PSS(3),402,"I"))
"RTN","PSS50E",74,0)
 ....S ^TMP($J,LIST,+PSS(2),+PSS(3),403)=$G(PSSP50(50.1,PSS(3),403,"I"))
"RTN","PSS50E",75,0)
 ....S ^TMP($J,LIST,+PSS(2),+PSS(3),404)=$G(PSSP50(50.1,PSS(3),404,"I"))
"RTN","PSS50E",76,0)
 ....S ^TMP($J,LIST,+PSS(2),+PSS(3),405)=$G(PSSP50(50.1,PSS(3),405,"I"))
"RTN","PSS50E",77,0)
 I ^TMP($J,LIST,0)'>0 S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND"
"RTN","PSS50E",78,0)
 K PSSP50
"RTN","PSS50E",79,0)
 Q
"RTN","PSS50E",80,0)
 ;
"RTN","PSS50E",81,0)
SKAQ(PSSIEN2,PSSFL2) ;
"RTN","PSS50E",82,0)
 ;PSSIEN2 - IEN of entry in 50
"RTN","PSS50E",83,0)
 ;PSSFL2 - action flag - S to set the "AQ" cross-reference or
"RTN","PSS50E",84,0)
 ;                       K to kill the "AQ" cross-reference.
"RTN","PSS50E",85,0)
 ;
"RTN","PSS50E",86,0)
 I +$G(PSSIEN2)'>0 Q 0
"RTN","PSS50E",87,0)
 I "SK"'[$G(PSSFL2) Q 0
"RTN","PSS50E",88,0)
 I PSSFL2="S",$G(^PSDRUG(+PSSIEN2,3))=1 S ^PSDRUG("AQ",+PSSIEN2)="" Q 1
"RTN","PSS50E",89,0)
 I PSSFL2="K",+$G(^PSDRUG(+PSSIEN2,3))=0 K ^PSDRUG("AQ",+PSSIEN2) Q 1
"RTN","PSS50E",90,0)
 Q 0
"RTN","PSS50E",91,0)
 ;
"RTN","PSS50E",92,0)
SKAQ1(PSSIEN2) ;
"RTN","PSS50E",93,0)
 ;PSSIEN2 - IEN of entry in 50
"RTN","PSS50E",94,0)
 I +$G(PSSIEN2)'>0 Q 0
"RTN","PSS50E",95,0)
 N PSS,QFLG S PSS="" F  S PSS=$O(^PSDRUG("AQ1",PSS)) Q:PSS=""  D
"RTN","PSS50E",96,0)
 .K ^PSDRUG("AQ1",PSS,+PSSIEN2) S QFLG=1
"RTN","PSS50E",97,0)
 .I $P($G(^PSDRUG(+PSSIEN2,"ND")),"^",10)]"" S ^PSDRUG("AQ1",$E($P($G(^PSDRUG(+PSSIEN2,"ND")),"^",10),1,30),+PSSIEN2)="" S QFLG=1
"RTN","PSS50E",98,0)
 I $D(QFLG) Q 1
"RTN","PSS50E",99,0)
 Q 0
"RTN","PSS50E",100,0)
A526 ;
"RTN","PSS50E",101,0)
 ;PSSIEN - IEN of entry in 50
"RTN","PSS50E",102,0)
 ;LIST - Subscript of ^TMP array in the form ^TMP($J,LIST, of the data
"RTN","PSS50E",103,0)
 ;       being returned.
"RTN","PSS50E",104,0)
 I $G(LIST)']"" Q
"RTN","PSS50E",105,0)
 K ^TMP($J,LIST)
"RTN","PSS50E",106,0)
 I +$G(PSSIEN)'>0 S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSS50E",107,0)
 N PSS,CNT S (PSS,CNT)=0 F  S PSS=$O(^PSDRUG("A526",+PSSIEN,PSS)) Q:'PSS  D
"RTN","PSS50E",108,0)
 .S ^TMP($J,LIST,+PSS,.01)=$P($G(^PS(52.6,+PSS,0)),"^"),CNT=CNT+1
"RTN","PSS50E",109,0)
 .S ^TMP($J,LIST,"A526",$P($G(^PS(52.6,+PSS,0)),"^"),+PSS)=""
"RTN","PSS50E",110,0)
 S ^TMP($J,LIST,0)=$S(CNT>0:CNT,1:"-1^NO DATA FOUND")
"RTN","PSS50E",111,0)
 Q
"RTN","PSS50E",112,0)
A527 ;
"RTN","PSS50E",113,0)
 ;PSSIEN - IEN of entry in 50
"RTN","PSS50E",114,0)
 ;LIST - Subscript of ^TMP array in the form ^TMP($J,LIST, of the data
"RTN","PSS50E",115,0)
 ;       being returned.
"RTN","PSS50E",116,0)
 I $G(LIST)']"" Q
"RTN","PSS50E",117,0)
 K ^TMP($J,LIST)
"RTN","PSS50E",118,0)
 I +$G(PSSIEN)'>0 S ^TMP($J,LIST,0)=-1_"^"_"NO DATA FOUND" Q
"RTN","PSS50E",119,0)
 N PSS,CNT S (PSS,CNT)=0 F  S PSS=$O(^PSDRUG("A527",+PSSIEN,PSS)) Q:'PSS  D
"RTN","PSS50E",120,0)
 .S ^TMP($J,LIST,+PSS,.01)=$P($G(^PS(52.7,+PSS,0)),"^"),CNT=CNT+1
"RTN","PSS50E",121,0)
 .S ^TMP($J,LIST,"A527",$P($G(^PS(52.7,+PSS,0)),"^"),+PSS)=""
"RTN","PSS50E",122,0)
 S ^TMP($J,LIST,0)=$S(CNT>0:CNT,1:"-1^NO DATA FOUND")
"RTN","PSS50E",123,0)
 Q
"RTN","PSS50E",124,0)
SKAIU(PSSIEN2,PSSFL2) ;
"RTN","PSS50E",125,0)
 ;PSSIEN2 - IEN of entry in 50
"RTN","PSS50E",126,0)
 ;PSSFL2 - action flag - S to set the "AIU" cross-reference or
"RTN","PSS50E",127,0)
 ;                       K to kill the "AIU" cross-reference
"RTN","PSS50E",128,0)
 ;
"RTN","PSS50E",129,0)
 I +$G(PSSIEN2)'>0 Q 0
"RTN","PSS50E",130,0)
 I "SK"'[$G(PSSFL2) Q 0
"RTN","PSS50E",131,0)
 N PSS,PSS2,PSSNM,PSSPK2,QFLG,PSSPK3
"RTN","PSS50E",132,0)
 S PSSPK3="INOSUWX"
"RTN","PSS50E",133,0)
 S PSSPK2=$P($G(^PSDRUG(+PSSIEN2,2)),"^",3),PSSNM=$P($G(^PSDRUG(+PSSIEN2,0)),"^")
"RTN","PSS50E",134,0)
 I PSSNM']"" Q 0
"RTN","PSS50E",135,0)
 I PSSNM]"" S PSS="" F PSS2=1:1:$L(PSSPK3) S PSS=$O(^PSDRUG("AIU"_$E(PSSPK3,PSS2))) Q:PSS=""  D
"RTN","PSS50E",136,0)
 .K ^PSDRUG("AIU"_$E(PSSPK3,PSS2),PSSNM,+PSSIEN2) S:$G(PSSFL2)="K" QFLG=1
"RTN","PSS50E",137,0)
 I PSSPK2]"" F PSS=1:1:$L(PSSPK2) S ^PSDRUG("AIU"_$E(PSSPK2,PSS),PSSNM,PSSIEN2)="" S:$G(PSSFL2)="S" QFLG=1
"RTN","PSS50E",138,0)
 I $D(QFLG) Q 1
"RTN","PSS50E",139,0)
 Q 0
"RTN","PSS50E",140,0)
SKIU(PSSIEN2) ;
"RTN","PSS50E",141,0)
 ;PSSIEN2 - IEN of entry in 50
"RTN","PSS50E",142,0)
 I +$G(PSSIEN2)'>0 Q 0
"RTN","PSS50E",143,0)
 N PSS,PSSPK2,QFLG S PSS="" F  S PSS=$O(^PSDRUG("IU",PSS)) Q:PSS=""  D
"RTN","PSS50E",144,0)
 .K ^PSDRUG("IU",PSS,+PSSIEN2) S QFLG=1
"RTN","PSS50E",145,0)
 .S PSSPK2=$P($G(^PSDRUG(+PSSIEN2,2)),"^",3)
"RTN","PSS50E",146,0)
 .I PSSPK2]"" S ^PSDRUG("IU",PSSPK2,+PSSIEN2)="" S QFLG=1
"RTN","PSS50E",147,0)
 I $D(QFLG) Q 1
"RTN","PSS50E",148,0)
 Q 0
"RTN","PSS50E",149,0)
FNAME(PSSFNO2,PSSFILE2) ;
"RTN","PSS50E",150,0)
 I +$G(PSSFNO2)'>0!(+$G(PSSFILE2)'>0) Q ""
"RTN","PSS50E",151,0)
 N PSSNAME,PSSFFIND,PSSFILEZ,PSSFNUMB
"RTN","PSS50E",152,0)
 S PSSFILEZ=0
"RTN","PSS50E",153,0)
 I +$G(PSSFILE2)<60,+$G(PSSFILE2)'<50 S PSSFILEZ=1
"RTN","PSS50E",154,0)
 I 'PSSFILEZ F PSSFFIND=1:1 S PSSFNUMB=$P($T(FLIST+PSSFFIND),";;",2) Q:PSSFILEZ!(PSSFNUMB="")  I PSSFNUMB=+$G(PSSFILE2) S PSSFILEZ=1
"RTN","PSS50E",155,0)
 I PSSFILEZ D FIELD^DID(+$G(PSSFILE2),PSSFNO2,"","LABEL","PSSNAME",)
"RTN","PSS50E",156,0)
 Q $G(PSSNAME("LABEL"))
"RTN","PSS50E",157,0)
 ;
"RTN","PSS50E",158,0)
FLIST ;
"RTN","PSS50E",159,0)
 ;;550
"RTN","PSS50E",160,0)
 ;;550.04
"RTN","PSS50E",161,0)
 ;;550.07
"RTN","PSS50E",162,0)
 ;;550.08
"RTN","PSS50E",163,0)
 ;;550.09
"RTN","PSS50E",164,0)
 ;;550.1
"RTN","PSS50E",165,0)
 ;;550.11
"RTN","PSS50E",166,0)
 ;;550.1101
"RTN","PSS50E",167,0)
 ;;550.2
"RTN","PSS50E",168,0)
 ;;550.215
"RTN","PSS50E",169,0)
 ;;550.216
"RTN","PSS50E",170,0)
 ;;1020.1
"RTN","PSS50E",171,0)
 ;;1020.2
"RTN","PSS50E",172,0)
 ;;1020.3
"RTN","PSS50E",173,0)
 ;;1020.4
"RTN","PSS50E",174,0)
 ;;1020.5
"RTN","PSS50E",175,0)
 ;;1020.51
"RTN","PSS50E",176,0)
 ;;1020.6
"RTN","PSS50E",177,0)
 ;;1020.7
"RTN","PSS50E",178,0)
 ;;1020.8
"RTN","PSS50E",179,0)
 ;;9009032.3
"RTN","PSS50E",180,0)
 ;;9009032.4
"RTN","PSS50E",181,0)
 ;;9009032.411
"RTN","PSS50E",182,0)
 ;;9009032.412
"RTN","PSS50E",183,0)
 ;;9009032.413
"RTN","PSS50E",184,0)
 ;;9009032.414
"RTN","PSS50E",185,0)
 ;;9009032.415
"RTN","PSS50E",186,0)
 ;;9009032.416
"RTN","PSS50E",187,0)
 ;;9009032.5
"RTN","PSS50E",188,0)
 Q
"RTN","PSSDI")
0^1^B25698318
"RTN","PSSDI",1,0)
PSSDI ;BIR/LDT - API FOR FILEMAN CALLS; 5 Sep 03
"RTN","PSSDI",2,0)
 ;;1.0;PHARMACY DATA MANAGEMENT;**85,91,97,104**;9/30/97
"RTN","PSSDI",3,0)
 ;
"RTN","PSSDI",4,0)
DIC(PSSFILE,PSSAPP,DIC,X,DLAYGO,PSSSCRDT,PSSSCRUS) ;
"RTN","PSSDI",5,0)
 S PSSDIY=""
"RTN","PSSDI",6,0)
 I +$G(PSSFILE)'>0 S PSSDIY=-1 Q
"RTN","PSSDI",7,0)
 N PSRTEST S PSRTEST=$$TEST(PSSFILE)
"RTN","PSSDI",8,0)
 I 'PSRTEST S PSSDIY=-1 Q
"RTN","PSSDI",9,0)
 K DIC("S")
"RTN","PSSDI",10,0)
 I +$G(PSSSCRDT)>0 N PSSSUBSC,PSSPIECE D SCREEN
"RTN","PSSDI",11,0)
 I $G(PSSSCRUS)'="",$G(PSSFILE)=50 N PSSAPLP D
"RTN","PSSDI",12,0)
 .S DIC("S")=$S($G(DIC("S"))'="":DIC("S")_" ",1:"")_"F PSSAPLP=1:1:$L(PSSSCRUS) I $P($G(^(2)),""^"",3)[$E(PSSSCRUS,PSSAPLP) Q"
"RTN","PSSDI",13,0)
 I '$P(PSRTEST,"^",2) K DLAYGO I $G(DIC(0))'="" S DIC(0)=$TR(DIC(0),"L","") I $G(DIC(0))="" S PSSDIY=-1
"RTN","PSSDI",14,0)
 K DTOUT,DUOUT D ^DIC
"RTN","PSSDI",15,0)
 Q
"RTN","PSSDI",16,0)
DO(PSSFILE,PSSAPP,DIC) ;
"RTN","PSSDI",17,0)
 S PSSDIY=""
"RTN","PSSDI",18,0)
 I +$G(PSSFILE)'>0 S PSSDIY=-1 Q
"RTN","PSSDI",19,0)
 N PSRTEST S PSRTEST=$$TEST(PSSFILE)
"RTN","PSSDI",20,0)
 I 'PSRTEST S PSSDIY=-1 Q
"RTN","PSSDI",21,0)
 K DTOUT,DUOUT D DO^DIC1
"RTN","PSSDI",22,0)
 Q
"RTN","PSSDI",23,0)
IX(PSSFILE,PSSAPP,DIC,D,X,DLAYGO) ;
"RTN","PSSDI",24,0)
 S PSSDIY=""
"RTN","PSSDI",25,0)
 I +$G(PSSFILE)'>0 S PSSDIY=-1 Q
"RTN","PSSDI",26,0)
 N PSRTEST S PSRTEST=$$TEST(PSSFILE)
"RTN","PSSDI",27,0)
 I 'PSRTEST S PSSDIY=-1 Q
"RTN","PSSDI",28,0)
 I '$P(PSRTEST,"^",2) K DLAYGO I $G(DIC(0))'="" S DIC(0)=$TR(DIC(0),"L","") I $G(DIC(0))="" S PSSDIY=-1
"RTN","PSSDI",29,0)
 K DTOUT,DUOUT D IX^DIC
"RTN","PSSDI",30,0)
 Q
"RTN","PSSDI",31,0)
MIX(PSSFILE,PSSAPP,DIC,D,X,DLAYGO,PSSSCRDT,PSSSCRUS) ;
"RTN","PSSDI",32,0)
 S PSSDIY=""
"RTN","PSSDI",33,0)
 I +$G(PSSFILE)'>0 S PSSDIY=-1 Q
"RTN","PSSDI",34,0)
 N PSRTEST S PSRTEST=$$TEST(PSSFILE)
"RTN","PSSDI",35,0)
 I 'PSRTEST S PSSDIY=-1 Q
"RTN","PSSDI",36,0)
 K DIC("S")
"RTN","PSSDI",37,0)
 I +$G(PSSSCRDT)>0 N PSSSUBSC,PSSPIECE D SCREEN
"RTN","PSSDI",38,0)
 I $G(PSSSCRUS)'="",$G(PSSFILE)=50 N PSSAPLP D
"RTN","PSSDI",39,0)
 .S DIC("S")=$S($G(DIC("S"))'="":DIC("S")_" ",1:"")_"F PSSAPLP=1:1:$L(PSSSCRUS) I $P($G(^(2)),""^"",3)[$E(PSSSCRUS,PSSAPLP) Q"
"RTN","PSSDI",40,0)
 I '$P(PSRTEST,"^",2) K DLAYGO I $G(DIC(0))'="" S DIC(0)=$TR(DIC(0),"L","") I $G(DIC(0))="" S PSSDIY=-1
"RTN","PSSDI",41,0)
 K DTOUT,DUOUT D MIX^DIC1
"RTN","PSSDI",42,0)
 Q
"RTN","PSSDI",43,0)
FILE(PSSFILE,PSSAPP,DIC,DA,X,DINUM,DLAYGO) ;
"RTN","PSSDI",44,0)
 S PSSDIY=""
"RTN","PSSDI",45,0)
 I +$G(PSSFILE)'>0 S PSSDIY=-1 Q
"RTN","PSSDI",46,0)
 N PSRTEST S PSRTEST=$$TEST(PSSFILE)
"RTN","PSSDI",47,0)
 I 'PSRTEST S PSSDIY=-1 Q
"RTN","PSSDI",48,0)
 I '$P(PSRTEST,"^",2) S PSSDIY=-1 Q
"RTN","PSSDI",49,0)
 K DTOUT,DUOUT,DO D FILE^DICN
"RTN","PSSDI",50,0)
 Q
"RTN","PSSDI",51,0)
DIE(PSSFILE,PSSAPP,DIE,DA,DR,DIDEL) ;
"RTN","PSSDI",52,0)
 S PSSDIY=""
"RTN","PSSDI",53,0)
 I +$G(PSSFILE)'>0 S PSSDIY=-1 Q
"RTN","PSSDI",54,0)
 N PSRTEST S PSRTEST=$$TEST(PSSFILE)
"RTN","PSSDI",55,0)
 I 'PSRTEST S PSSDIY=-1 Q
"RTN","PSSDI",56,0)
 I '$P(PSRTEST,"^",2) S PSSDIY=-1 Q
"RTN","PSSDI",57,0)
 K DTOUT D ^DIE
"RTN","PSSDI",58,0)
 Q
"RTN","PSSDI",59,0)
EN1(PSSFILE,PSSAPP,DIC,L,FLDS,BY,FR,TO,DHD) ;
"RTN","PSSDI",60,0)
 S PSSDIY=""
"RTN","PSSDI",61,0)
 I +$G(PSSFILE)'>0 S PSSDIY=-1 Q
"RTN","PSSDI",62,0)
 N PSRTEST S PSRTEST=$$TEST(PSSFILE)
"RTN","PSSDI",63,0)
 I 'PSRTEST S PSSDIY=-1 Q
"RTN","PSSDI",64,0)
 D EN1^DIP
"RTN","PSSDI",65,0)
 Q
"RTN","PSSDI",66,0)
EN(PSSFILE,PSSAPP,DIC,DR,DA,DIQ) ;
"RTN","PSSDI",67,0)
 S PSSDIY=""
"RTN","PSSDI",68,0)
 I +$G(PSSFILE)'>0 S PSSDIY=-1 Q
"RTN","PSSDI",69,0)
 N PSRTEST S PSRTEST=$$TEST(PSSFILE)
"RTN","PSSDI",70,0)
 I 'PSRTEST S PSSDIY=-1 Q
"RTN","PSSDI",71,0)
 D EN^DIQ1
"RTN","PSSDI",72,0)
 Q
"RTN","PSSDI",73,0)
FNAME(PSSFNO,PSSFILE) ;
"RTN","PSSDI",74,0)
 ;Return the label for the field of the File or Subfile passed in
"RTN","PSSDI",75,0)
 ;PSSFNO  - Field number
"RTN","PSSDI",76,0)
 ;PSSFILE - File or Subfile number
"RTN","PSSDI",77,0)
 Q $$FNAME^PSS50E($G(PSSFNO),$G(PSSFILE))
"RTN","PSSDI",78,0)
 ;
"RTN","PSSDI",79,0)
TEST(PSTFILE) ;
"RTN","PSSDI",80,0)
 N CNT,PSSAPP2,PSFFLAG,PSFLOOP,PSFTEST,PSLNODE,PSRSLT S PSRSLT="0^0",PSFFLAG=0
"RTN","PSSDI",81,0)
 F PSFLOOP=1:1 S PSFTEST=$P($T(FILE2+PSFLOOP),";;",2) Q:+$G(PSFTEST)'>0!PSFFLAG  I +PSFTEST=PSTFILE S $P(PSRSLT,"^")=1 S PSLNODE=$T(FILE2+PSFLOOP) D
"RTN","PSSDI",82,0)
 .F CNT=2:1:$L(PSLNODE,";;") S PSSAPP2=$P(PSLNODE,";;",CNT) Q:$P(PSRSLT,"^",2)=1  I PSSAPP2=$G(PSSAPP) S PSFFLAG=1,$P(PSRSLT,"^",2)=1
"RTN","PSSDI",83,0)
 Q PSRSLT
"RTN","PSSDI",84,0)
 ;
"RTN","PSSDI",85,0)
FILE2 ;For DIC call, IF PACKAGE IS LISTED, PACKAGE HAS WRITE ACCESS          
"RTN","PSSDI",86,0)
 ;;50;;PSX;;PSD;;PSJ;;PSN;;PSO;;PSGW;;PSS
"RTN","PSSDI",87,0)
 ;;50.1;;PSX;;PSD;;PSJ;;PSN;;PSO;;PSGW;;PSS
"RTN","PSSDI",88,0)
 ;;50.0214;;PSX;;PSD;;PSJ;;PSN;;PSO;;PSGW;;PSS
"RTN","PSSDI",89,0)
 ;;50.037;;PSX;;PSD;;PSJ;;PSN;;PSO;;PSGW;;PSS
"RTN","PSSDI",90,0)
 ;;50.065;;PSX;;PSD;;PSJ;;PSN;;PSO;;PSGW;;PSS
"RTN","PSSDI",91,0)
 ;;50.0212;;PSX;;PSD;;PSJ;;PSN;;PSO;;PSGW;;PSS
"RTN","PSSDI",92,0)
 ;;50.0441;;PSX;;PSD;;PSJ;;PSN;;PSO;;PSGW;;PSS
"RTN","PSSDI",93,0)
 ;;50.01;;PSX;;PSD;;PSJ;;PSN;;PSO;;PSGW;;PSS
"RTN","PSSDI",94,0)
 ;;50.02;;PSX;;PSD;;PSJ;;PSN;;PSO;;PSGW;;PSS
"RTN","PSSDI",95,0)
 ;;50.0903;;PSX;;PSD;;PSJ;;PSN;;PSO;;PSGW;;PSS
"RTN","PSSDI",96,0)
 ;;50.0904;;PSX;;PSD;;PSJ;;PSN;;PSO;;PSGW;;PSS
"RTN","PSSDI",97,0)
 ;;50.4;;PSJ;;PSS
"RTN","PSSDI",98,0)
 ;;50.606;;PSJ;;PSN;;PSS
"RTN","PSSDI",99,0)
 ;;50.7;;PSJ;;PSO;;PSN;;PSS
"RTN","PSSDI",100,0)
 ;;50.76;;PSJ;;PSO;;PSN;;PSS
"RTN","PSSDI",101,0)
 ;;50.72;;PSJ;;PSO;;PSN;;PSS
"RTN","PSSDI",102,0)
 ;;51;;PSJ;;PSS
"RTN","PSSDI",103,0)
 ;;51.01;;PSJ;;PSS
"RTN","PSSDI",104,0)
 ;;51.1;;PSJ;;PSS
"RTN","PSSDI",105,0)
 ;;51.11;;PSJ;;PSS
"RTN","PSSDI",106,0)
 ;;51.17;;PSJ;;PSS
"RTN","PSSDI",107,0)
 ;;51.2;;PSJ;;PSS
"RTN","PSSDI",108,0)
 ;;51.5;;PSS
"RTN","PSSDI",109,0)
 ;;52.6;;PSJ;;PSN;;PSS
"RTN","PSSDI",110,0)
 ;;52.61;;PSJ;;PSN;;PSS
"RTN","PSSDI",111,0)
 ;;52.62;;PSJ;;PSN;;PSS
"RTN","PSSDI",112,0)
 ;;52.63;;PSJ;;PSN;;PSS
"RTN","PSSDI",113,0)
 ;;52.64;;PSJ;;PSN;;PSS
"RTN","PSSDI",114,0)
 ;;52.7;;PSJ;;PSN;;PSS
"RTN","PSSDI",115,0)
 ;;52.702;;PSJ;;PSN;;PSS
"RTN","PSSDI",116,0)
 ;;52.703;;PSJ;;PSN;;PSS
"RTN","PSSDI",117,0)
 ;;52.704;;PSJ;;PSN;;PSS
"RTN","PSSDI",118,0)
 ;;54;;PSS;;PSO
"RTN","PSSDI",119,0)
 ;;54.1;;PSS;;PSO
"RTN","PSSDI",120,0)
 ;;9009032.3;;PSS
"RTN","PSSDI",121,0)
 ;;9009032.5;;PSS
"RTN","PSSDI",122,0)
 ;;
"RTN","PSSDI",123,0)
 Q
"RTN","PSSDI",124,0)
 ;
"RTN","PSSDI",125,0)
FILE3 ;For Lookup calls, check for Inactive Date Screen
"RTN","PSSDI",126,0)
 ;;50;;I;;1
"RTN","PSSDI",127,0)
 ;;50.606;;0;;2
"RTN","PSSDI",128,0)
 ;;50.7;;0;;4
"RTN","PSSDI",129,0)
 ;;51.2;;0;;5
"RTN","PSSDI",130,0)
 ;;52.6;;I;;1
"RTN","PSSDI",131,0)
 ;;52.7;;I;;1
"RTN","PSSDI",132,0)
 ;;
"RTN","PSSDI",133,0)
 Q
"RTN","PSSDI",134,0)
SCREEN ;Set screen if Inactive Date is passed in, and for File 50, addition screen if Application Packages Use is passed in
"RTN","PSSDI",135,0)
 N PSSILOOP,PSSILOC,PSSINFLG,PSSINODE S PSSINFLG=0
"RTN","PSSDI",136,0)
 F PSSILOOP=1:1 S PSSILOC=$P($T(FILE3+PSSILOOP),";;",2) Q:+$G(PSSILOC)'>0!PSSINFLG  I +PSSILOC=PSSFILE S PSSINFLG=1 S PSSINODE=$T(FILE3+PSSILOOP) D
"RTN","PSSDI",137,0)
 .S PSSSUBSC=$P(PSSINODE,";;",3),PSSPIECE=$P(PSSINODE,";;",4)
"RTN","PSSDI",138,0)
 .I PSSSUBSC'="",PSSPIECE'="" S DIC("S")="I $P($G(^(PSSSUBSC)),""^"",PSSPIECE)=""""!(+$P($G(^(PSSSUBSC)),""^"",PSSPIECE)>+$G(PSSSCRDT))"
"RTN","PSSDI",139,0)
 Q
"VER")
8.0^22.0
"BLD",5846,6)
^95
**END**
**END**

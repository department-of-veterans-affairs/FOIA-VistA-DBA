
=============================================================================
Run Date: SEP 10, 2004                     Designation: DG*5.3*451
Package : DG - REGISTRATION                   Priority: Mandatory
Version : 5.3       SEQ #529                    Status: Released
                  Compliance Date: OCT 11, 2004
=============================================================================

Associated patches: (v)DG*5.3*232  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*314  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*327  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*342  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*378  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*387  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*404  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*417  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*475  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*491  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*497  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*505  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*508  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*513  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*514  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*519  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*522  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*528  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*545  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*602  <<= must be installed BEFORE `DG*5.3*451'
                    (v)DG*5.3*603  <<= must be installed BEFORE `DG*5.3*451'

Subject: HVE PHASE II

Category: 
  - Routine
  - Data Dictionary
  - Enhancement (Mandatory)

Description:
============

 PROJECT OVERVIEW
 ================
 The HVE Phase II project consists of the following functional elements:
  
  1. Remove BEC as a Selectable Branch of Service
     --------------------------------------------
     BEC shall no longer be a selectable value for Branch of Service (BOS).
  
  2. Validate WWII Period for Merchant Seaman BOS
     --------------------------------------------
     Users shall only be able to file Merchant Seaman as a Branch
     of Service (BOS) if the veteran has at least one Military Service 
     Episode (MSE) within World War II (12/7/41 - 12/31/46).
  
  3. Military Service Data Field-Specific Requirements
     -------------------------------------------------
     The field requirements for information entered in the Military Service
     Data, Screen <6> shall be changed as follows:
     - Date fields shall include, at a minimum, a month and a year.
     - Any date changes on an existing date from MM/DD/YYYY to MM/YYYY 
       shall not be allowed.
     - When entering a Military Service Episode (MSE), Branch of Service
       (BOS), Service Entry Date (SED), Service Separation Date (SSD),
       and Discharge Type shall be required.
     - When entering Combat Information, Combat From Date, Combat To Date,
       and Combat Location shall be required.
     - When entering Conflict Information, Conflict From Date and Combat To
       Date shall be required.
     - When entering Prisoner of War (POW) Data, POW From Date, POW To 
       Date, and POW Location shall be required.
    
  4. Modify VistA Military Service Date Field Relationship Requirements
     ------------------------------------------------------------------
     The requirements for relationships between date fields entered in the
     Military Service Data, Screen <6> shall be changed as follows:
     - MSEs shall not overlap with each other.
     - Combat From/To Dates shall lie within the veteran s MSEs  
     - Combat From/To Dates shall lie within the timeline for that Combat
       Location  
     - Conflict From/To Dates shall lie within the veteran s MSEs
     - Conflict From/To Dates shall lie within the timeline for that 
       Conflict Location
     - POW From/To Dates shall lie within the veteran s MSEs
     - POW From/To Dates should lie within the timeline for that POW 
       Location
  
  5. Modify Consistency Checks for Military Service Data Fields
     ----------------------------------------------------------
     The system will generate a consistency check, notifying the user to
     update the record, to enforce the Military Service data field
     requirements stated above in #3 and #4.  The following new 
     inconsistency messages will display:
     72 - MSE DATA MISSING/INCOMPLETE
     73 - MSE DATES INCONSISTENT
     74 - CONFLICT DT MISSING/INCOMPLETE
     75 - CONFLICT TO DT BEFORE FROM DT
     76 - INACCURATE CONFLICT DATE
     77 - INACCURATE POW DT/LOCATION
     78 - INACCURATE COMBAT DT/LOC
     79 - MSE DATES OVERLAP
     80 - POW DT NOT WITHIN MSE
     81 - COMBAT DT NOT WITHIN MSE
     82 - CONFLICT DT NOT WITHIN MSE
  
  6. Continuous Enrollment Rules Modifications
     -----------------------------------------
     For the following cases, if the veteran has a previous enrollment 
     record, and would otherwise no longer qualify for enrollment due to
     Means Test expiration or change in eligibilities, the record shall not
     be placed in a REJECTED Enrollment Status but shall be continuously
     enrolled:
     - The Enrollment Application Date (and if absent - the Effective Date 
       of Change) is ON or AFTER the Enrollment Group Threshold (EGT)
       Effective Date, AND The Enrollment Category was ENROLLED or 
       In-Process, AND MT was used to place the veteran in a Verified
       Enrollment Status (Enrollment Category = Enrolled).
     - Those veterans whose FIRST Verified Enrollment Status is based on 
       SC 10-100%, Aid and Attendance, Housebound, NSC VA Pension, Eligible
       for Medicaid, Combat Veteran, Agent Orange Exposure, or 
       Environmental Contaminants.
      
  7. Filipino Vet (FV) Data
     ----------------------
     Persons verified as "Filipino Veteran" shall be treated as any other
     US Veteran in accordance with VHA DIRECTIVE 2004-010.  See url:
     http://www1.va.gov/vhapublications/ViewPublication.asp?pub_ID=305
     A person must meet the following requirements to be a verified 
     "Filipino Veteran":
  
     (a) Have one of the following Branches of Service (BOS):
         - Filipino Commonwealth Army (F. Commonwealth)
         - Filipino Guerilla Forces (F. Guerilla)
         - New Filipino Scout (F. Scout New)
         - Old Filipino Scout (F. Scout Old)
  
     (b) Have served in one of those Branches of Service within the World 
         War II period (12/7/41 - 12/31/46).
  
     (c) Have Proof of US Citizenship, Lawful Permanent US Residency, 
         and/or VA Compensation at Full-Dollar Rate for all Filipino
         Veterans (except F. Scout Old). The valid choices for proof are:
         - US Passport 
         - US Birth Certificate 
         - Report of Birth Abroad of a US Citizen issued by a US consulate
           abroad 
         - Verification by the U.S. Citizenship and Immigration Services 
           to VA that the Filipino veteran is a naturalized citizen of the
           U.S. 
         - Verification by the U.S. Citizenship and Immigration Services 
           to VA that a veteran is an alien lawfully admitted for permanent
           residence in the U.S.
         - Proof of VA compensation at full-dollar rate
         - Lacks proof of Citizenship/Residency
  
  8. Add Consistency Checks for Filipino Vets and Merchant Seaman BOS
     ----------------------------------------------------------------
     The system shall generate a consistency check, notifying the user to
     update the record, on the following conditions:
     - Merchant Seaman or Filipino Vet BOS requires service dates during 
       WWII
     - Filipino Veteran BOS was entered, Filipino vet proof is missing
     - Verified Filipino Veteran should have a Veteran Status of 'YES'
     The following new inconsistency messages will display:
     83 - BOS REQUIRES DATE W/IN WWII
     84 - FILIPINO VET, PROOF MISSING
     85 - FILIPINO VET SHOULD BE VET='Y'
  
  9. Rated Disabilities Process Changes
     ----------------------------------
     Currently, rated disability entry is restricted when the Verification
     Source is HEC.  VistA users with the appropriate security key (DG
     ELIGIBILITY) will now be allowed to enter Rated Disabilities 
     regardless of the verification source.  A new message will be
     displayed for field 4 on Registration Screen 11 to remind the user to
     send all rated disability updates to the HEC.  The message will be
     sent to the DGEN ELIGIBILITY ALERT mail group.
  
 10. Modify Catastrophic Disabilities Evaluation Process
     ---------------------------------------------------
     The VistA system shall allow authorized users (holders of the DGENCD
     ADD/EDIT and CD DELETE security keys) to add, edit, or delete a
     CD evaluation created at their facility. The VistA system shall 
     transmit deletion/edits made to a CD evaluation created at their
     facility.
  
     The VistA system shall receive a message indicating the deletion/edits
     made to a CD evaluation stored at their facility.  The message shall 
     be an alert and sent to the sites DGEN ELIGIBILITY ALERT mail group.  
     See example below:
     
     ======================================================================
     Subj: CD Alert: SMITH,JANE (S5010)  [#4954642] 08/04/04@18:57
     10 lines
     From: REGISTRATION ENROLLMENT MODULE  In 'IN' basket.   Page 1
     --------------------------------------------------------------------
     The enrollment/eligibility upload produced the following alerts:
  
     Patient Name   :     SMITH,JANE
     SSN            :     515425010
     DOB            :     06/15/1920
     SEX            :     FEMALE
  
     ** Alerts **
  
     1) VETERANS CD EVALUATION HAS CHANGED.
     
     =====================================================================
  
     The VistA system shall perform the following consistency checks on the
     data received from the HEC prior to accepting the data and uploading 
     it into the local database:
     - Reject the entire message if the required fields are missing and 
       send back an Application Error (AE) message to alert HEC that the
       individuals' eligibility is not updated.
     - If the CD evaluation in VistA (for a locally entered evaluation or 
       for one received previously from the HEC) has a more current Date of
       Decision than the one from HEC, then do not upload into VistA and
       generate an application error from VistA.
     - A CD evaluation of 'YES' on file at the VistA site shall not be
       overwritten with a CD evaluation containing 'NO' in the 
       Catastrophically Disabled?' field unless it is from the originating
       site (Facility Making Determination).  No action taken if VistA does
       not accept.
     - If a VistA site already has CD information
       (diagnoses/procedures/conditions) on file, and HEC transmits 
       different information to the site, and the data passes the above
       consistency checks, then VistA should (1) Delete the
       currently-stored CD information for the patient (this information
       remains in the patient's CD history) and (2) File the new
       information being transmitted by HEC.
  
 11. Modifications to Agent Orange Location
     --------------------------------------
     If the Agent Orange Exposure Location data received from HEC does not
     match the data filed in the local VistA record, the VistA system shall
     accept the data that contains Vietnam as the exposure location and a
     message shall be generated to notify the local user of the data
     discrepancy and the action that was taken.  The message will be sent 
     to the DGEN ELIGIBILITY ALERT mail group.  See example below:
     
     ====================================================================
     Subj: AGENT ORANGE EXPOSURE LOCATION CHANGE  [#36041] 08/19/04@11:03
     6 lines
     From: POSTMASTER  In 'IN' basket.   Page 1
     --------------------------------------------------------------------
     Patient: SMITH,JOHN
     SSN: 103983478
     This veteran's Agent Orange Exposure Location has been changed.
     Contact the HEC by phone if you have questions or believe
     this information to be incorrect.
     ====================================================================
  
 12. Date of Birth for Mexican Border War and WWI Eligibility
     --------------------------------------------------------
     The system shall generate a consistency check, notifying the user to
     update the record, when the eligibility code of World War I is 
     selected and the Date of Birth field is greater than December 31,
     1907.
  
     The system shall generate a consistency check, notifying the user to
     update the record, when the eligibility code of Mexican Border War is
     selected and the Date of Birth field is greater than December 31, 
     1906.
  
 13. Date of Death Acceptance
     ------------------------
     The VistA system shall receive and accept a Z05 message from HEC
     containing Date of Death data for a veteran.  The HEC will send the
     Date of Death data to all sites of record for the veteran.
  
     The VistA system shall provide a prompt to accept or decline the Date 
     of Death data received.  If the VistA user declines to accept the DOD
     data, the system shall produce a mail message notifying them that they
     are to contact the HEC with the reason for non-acceptance.  The
     message shall be sent to the local DGEN ELIGIBILITY ALERT mail group.
  
     The VistA system shall receive and accept all national enrollment 
     records including those with a status of Deceased.  When the VistA
     status of enrollment = Deceased and the Date of Death field is null a
     message shall be generated to notify the local user of the data
     discrepancy informing them to take appropriate action. The message
     shall be sent to the local DGEN ELIGIBILITY ALERT mail group.  See
     example below:
     
     =====================================================================
     Patient:  NNNNN, NNNN
     SSN:  xxx-xx-xxxx
     This veteran's Enrollment Status is Deceased however there is no date 
     of death on file in VistA.  Actions you should take:
     - Add date of death information in VistA, or
     - Contact the HEC to remove an erroneous date of death.
     =====================================================================
  
     The VistA system shall not generate an 'Invalid Date of Death' error
     message upon receipt of a deletion for date of death from HEC when the
     Date of Death field at the local site is null.
  
 14. Inconsistent Data Elements
     --------------------------
     The following inconsistent data elements in VistA are now obsolete 
     and the inconsistency messages will no longer be displayed:
     - ELIG CODE SHOULD BE 'DOM', requiring an eligibility code of 
       DOMICILIARY PATIENT when the patient is residing in a domiciliary.
     - VIET SVC CLAIMED, NONVET, requiring a patient to have a patient 
       type not equal to Non-Veteran when claiming service in Vietnam.
     - AO CLAIMED, NONVET, requiring a patient to have a patient type not 
       equal to Non-Veteran when claiming exposure to Agent Orange.
     - RAD CLAIMED, NONVET, requiring a patient to have a patient type not
       equal to Non-Veteran when claiming exposure to Radiation.
     - GI INS CLAIMED, NONVET, requiring a patient to have a patient type 
       not equal to Non-Veteran when stating the person has GI Insurance.
     - COMBAT CLAIMED, NONVET, requiring a patient to have a patient type 
       not equal to Non-Veteran when claiming to have served in combat.
     - A&A MISSING DOLLARS, requiring a dollar amount to be entered when 
       the response to RECEIVING A&A BENEFITS? is YES.
     - HOUSEBOUND MISSING DOLLARS, requiring a dollar amount to be entered
       when the response to RECEIVING HOUSEBOUND BENEFITS? is YES.
     - VA PENSION MISSING DOLLARS, requiring a dollar amount to be entered
       when the response to RECEIVING A VA PENSION? is YES.
     - SOC SECURITY MISSING DOLLARS (the IN RECEIPT OF SOCIAL SECURITY 
       prompt is currently inactive).
     - MIL RETIRE MISSING DOLLARS (the RECEIVING MILITARY RETIREMENT 
       prompt is currently inactive).
  
 15. Enrollment Group Threshold History
     ----------------------------------
     The VistA system shall maintain a history of the Enrollment Group 
     Threshold to include the effective date data.  This history shall
     be stored in the ENROLLMENT GROUP THRESHOLD file (#27.16).
  
 16. Pending Adjudication MT Expire When GMT Copay
     ---------------------------------------------
     A means test with a status of Pending Adjudication where the veteran 
     is located in an area in which the GMT Threshold is greater than the
     MT Threshold (GMT Copay) shall expire 365 days from the effective date
     of the test.
  
 17. Combat Veteran End Date sharing with HEC 
     ----------------------------------------
     A post-install routine will populate the Health Eligibility Center
     with all Veterans that have a Combat Vet Eligibility End Date before
     1/17/2003.
  
  FUNCTIONAL DESCRIPTION
  ======================
  The functional changes that will be introduced with this patch include:
  
   1. Remove BEC as a selectable Branch of Service
   2. Validate WWII Period for Merchant Seaman Branch of Service
   3. Enforce Data Integrity for Military Service and Conflict fields 
      (on Registration Screen 6)  
   4. Allow the collection of Filipino Vet data and validation
   5. Allow appropriate VistA personnel to modify Rated Disabilities regardless 
      of source
   6. Allow VistA edits to Catastrophic Disability Evaluations
   7. Transmit Agent Orange Exposure Location and create bulletin for changed
      AO Locations
   8. Correct WWI and Mexican Border War allowable Date of Birth values
   9. Allow the upload of Enrollment records that are inconsistent with Date 
      of Death
  10. Retire obsolete Registration and upload Consistency Checks
  11. Store Enrollment Group Threshold History
  12. Expire Means Tests that are Pending Adjudication for GMT after 365 days
   
  DATA DICTIONARY CHANGES
  =======================
  
  PATIENT FILE (#2)
  -----------------  
   NEW FIELD:
   .3214       FILIPINO VETERAN PROOF .321;14 SET
  
               SET OF CODES:  
                                 'PP' FOR US PASSPORT; 
                                 'BC' FOR US BIRTH CERTIFICATE; 
                                 'BA' FOR REPORT OF BIRTH ABROAD OF US CITIZEN; 
                                 'NA' FOR VERIFICATION OF NATURALIZATION; 
                                 'PR' FOR VERIFICATION OF PERMANENT RESIDENCY; 
                                 'VA' FOR VA COMPENSATION AT FULL DOLLAR RATE; 
                                 'NO' FOR NO PROOF; 
  
               DESCRIPTION:      Enter in this field the documentation that was
                                 provided in order to establish US citizenship,
                                 lawful permanent US residency, and/or VA 
                                 Compensation at full-dollar rate for a
                                 Filipino Veteran (i.e., a veteran whose Branch
                                 of Service is F. Commonwealth, F. Guerilla, or
                                 F. Scouts New)
  
   MODIFIED FIELDs:
   .32104      VIETNAM FROM DATE      .321;4 DATE
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to: 
                    S %DT="E" D ^%DT S X=Y I $D(X) K:'$$VALCON^DGRPMS(DA,"VIET"
                    ,X,0) X I $D(X) S DFN=DA D VN^DGLOCK
               3. The field description has been updated to reflect a new date
                  range between February 28, 1961 and May 7, 1975.
  
   .32105      VIETNAM TO DATE        .321;5 DATE 
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y I $D(X) K:'$$VALCON^DGRPMS(DA,"VIET"
                    ,X,1) X I $D(X) S DFN=DA D VN^DGLOCK
               3. The field description has been updated to reflect a new date
                  range between February 28, 1961 and May 7, 1975.
  
   .322011     PERSIAN GULF FROM DATE .322;11 DATE
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:'$$VALCON^DGRPMS(DA,"GULF",X) X I 
                    $D(X) S DFN=DA,DGX=10 D SVED^DGLOCK
  
   .322012     PERSIAN GULF TO DATE   .322;12 DATE 
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:'$$VALCON^DGRPMS(DA,"GULF",X,1) X 
                    I $D(X) S DFN=DA,DGX=10 D SVED^DGLOCK
  
   .322017     SOMALIA FROM DATE      .322;17 DATE 
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:Y<1 X I $D(X) K:'$$VALCON^DGRPMS(
                    DA,"SOM",X) X I $D(X) S DFN=DA,DGX=16 D SVED^DGLOCK
               3. The field description has been updated to reflect a new date
                  range after September 28,1992.
  
  
   .322018     SOMALIA TO DATE        .322;18 DATE  
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y I $D(X) K:'$$VALCON^DGRPMS(DA,"SOM"
                    ,X,1) X I $D(X) S DFN=DA,DGX=16 D SVED^DGLOCK
               3. The field description has been updated to reflect a new date
                  range after September 28,1992.
  
  
   .32202      YUGOSLAVIA FROM DATE   .322;20 DATE   
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:'$$VALCON^DGRPMS(DA,"YUG",X) X I 
                    $D(X) S DFN=DA,DGX=19 D SVED^DGLOCK
               3. The help text and description have been updated to reflect a 
                  new date range between June 22, 1992 and today.
  
   .322021     YUGOSLAVIA TO DATE     .322;21 DATE    
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:'$$VALCON^DGRPMS(DA,"YUG",X,1) X 
                    I $D(X) S DFN=DA,DGX=19 D SVED^DGLOCK
               3. The help text and description have been updated to reflect a 
                  new thew valid date range to be after June 22, 1992.
  
  
   .3222       LEBANON FROM DATE      .322;2 DATE     
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:'$$VALCON^DGRPMS(DA,"LEB",X) X I 
                    $D(X) S DFN=DA,DGX=1 D SVED^DGLOCK
               3. The help text and description have been updated to reflect a 
                  new valid date range to be on or after October 1, 1983.
  
   .3223       LEBANON TO DATE        .322;3 DATE      
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:'$$VALCON^DGRPMS(DA,"LEB",X,1) X 
                    I $D(X) S DFN=DA,DGX=1 D SVED^DGLOCK
               3. The help text and description have been updated to reflect a 
                  new valid date range to be after October 1, 1983.
  
   .3225       GRENADA FROM DATE      .322;5 DATE 
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:'$$VALCON^DGRPMS(DA,"GREN",X) X 
                    I $D(X) S DFN=DA,DGX=4 D SVED^DGLOCK
  
   .3226       GRENADA TO DATE        .322;6 DATE  
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:'$$VALCON^DGRPMS(DA,"GREN",X,1) 
                    X I $D(X) S DFN=DA,DGX=4 D SVED^DGLOCK
  
   .3228       PANAMA FROM DATE       .322;8 DATE 
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:'$$VALCON^DGRPMS(DA,"PAN",X) X 
                    I $D(X) S DFN=DA,DGX=7 D SVED^DGLOCK
  
  
   .3229       PANAMA TO DATE         .322;9 DATE  
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:'$$VALCON^DGRPMS(DA,"PAN",X,1) 
                    X I $D(X) S DFN=DA,DGX=7 D SVED^DGLOCK
  
   .324        SERVICE DISCHARGE TYPE [LAST] .32;4 POINTER TO TYPE OF DISCHARGE 
                                                                    FILE(#25) 
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S DFN=DA I $D(X) D SV^DGLOCK Q
  
   .325        SERVICE BRANCH [LAST]  .32;5 POINTER TO BRANCH OF SERVICE FILE
                                                                        (#23)
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S DFN=DA I $D(X) D SV^DGLOCK S DGCOMBR=$G(Y) Q
               3. Added new cross-references:
                    CROSS-REFERENCE:  2^AFV1^MUMPS 
                                 1)= Q
                                 2)= I $P($G(^DPT(DA,.321)),U,14)]"" D
                                     FVP^DGRPMS
                                 This MUMPS cross-reference acts like a trigger
                                 cross-reference.  If the Service Branch
                                 [Last], Service Branch [NTL] and Service
                                 Branch [NNTL] fields do not contain a Filipino
                                 Veteran branch of service, the Filipino Vet 
                                 Proof field (#.3214) is deleted.  
  
                        FIELD INDEX:      AMSEL (#334)    MUMPS        ACTION
                        Short Descr:  DELETE MSE (LAST) FIELDS
                          Set Logic:  Q
                         Kill Logic:  D DELMSE^DGRPMS(DFN,1)
                          Kill Cond:  S X=X2(1)=""
                               X(1):  SERVICE BRANCH [LAST]  (2,.325) 
                                      (forwards)
  
   .326        SERVICE ENTRY DATE [LAST] .32;6 DATE 
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E",%DT(0)=-DT D ^%DT K %DT S X=Y K:Y<1 X I $D(X) S 
                    DFN=DA D SV^DGLOCK I $D(X) K:'$$VALMSE^DGRPMS(DFN,X,0,"MSL"
                    ) X I $D(X),$D(^DG(43,1)) S SD1=1 D POS^DGINP
  
   .327        SERVICE SEPARATION DATE [LAST] .32;7 DATE  
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E",%DT(0)=-DT D ^%DT K %DT S X=Y K:Y<1 X I $D(X) S 
                    DFN=DA D SV^DGLOCK I $D(X) K:'$$VALMSE^DGRPMS(DFN,X,1,"MSL"
                    ) X I $D(X),$D(^DG(43,1)) S SD1=1 D PS^DGINP
  
   .3285       SERVICE SECOND EPISODE? .32;19 SET 
               1. Added new cross-reference:
                    CROSS-REFERENCE:  ^^TRIGGER^2^.3291 
                    CREATE CONDITION)= #.3285'="YES"
                    CREATE VALUE)= @
                    DELETE CONDITION)= #.3285'="YES"
                    DELETE VALUE)= @
                    FIELD)= SERVICE BRANCH [NTL]
  
   .329        SERVICE DISCHARGE TYPE [NTL] .32;9 POINTER TO TYPE OF DISCHARGE 
                                                                     FILE (#25) 
               1. This field is now a REQUIRED field.
  
   .3291       SERVICE BRANCH [NTL]   .32;10 POINTER TO BRANCH OF SERVICE FILE
                                                                         (#23)
               1. The input transform has been changed to:
                    S DFN=DA D SER1^DGLOCK S DGCOMBR=$G(Y) Q
               2. Added new cross-references:
                  CROSS-REFERENCE:  2^AFV2^MUMPS 
                                 1)= Q
                                 2)= I $P($G(^DPT(DA,.321)),U,14)]"" D
                                     FVP^DGRPMS
                                 This MUMPS cross-reference acts like a trigger
                                 cross-reference.  If the Service Branch
                                 [Last], Service Branch [NTL] and Service
                                 Branch [NNTL] fields do not contain a
                                 Filipino Veteran branch of service, the
                                 Filipino Vet Proof field (#.3214) is deleted.  
  
                   RECORD INDEX:  AMSENL (#335)    MUMPS        ACTION
                    Short Descr:  DELETE MSE (NEXT TO LAST) FIELDS
                      Set Logic:  Q
                     Kill Logic:  D DELMSE^DGRPMS(DFN,2)
                      Kill Cond:  S X=X2(1)=""
                           X(1):  SERVICE BRANCH [NTL]  (2,.3291)  (forwards)
  
   .3292       SERVICE ENTRY DATE [NTL] .32;11 DATE 
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E",%DT(0)=-DT D ^%DT K %DT S X=Y K:Y<1 X I $D(X) 
                    S DFN=DA D SER1^DGLOCK I $D(X) K:'$$VALMSE^DGRPMS(DFN,X,0,
                    "MSNTL") X I $D(X),$D(^DG(43,1)) S SD1=2 D POS^DGINP
  
   .3293       SERVICE SEPARATION DATE [NTL] .32;12 DATE 
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E",%DT(0)=-DT D ^%DT K %DT S X=Y K:Y<1 X I $D(X) S 
                    DFN=DA D SER1^DGLOCK I $D(X) K:'$$VALMSE^DGRPMS(DFN,X,1,
                    "MSNTL") X I $D(X),$D(^DG(43,1)) S SD1=2 D PS^DGINP
  
   .32945      SERVICE THIRD EPISODE? .32;20 SET 
               1. Added new cross-reference:
                    CROSS-REFERENCE:  ^^TRIGGER^2^.3296  
                    CREATE CONDITION)= #.32945'="YES"
                    CREATE VALUE)= @
                    DELETE CONDITION)= #.32945'="YES"
                    DELETE VALUE)= @
                    FIELD)= #.3296
  
   .3295       SERVICE DISCHARGE TYPE [NNTL] .32;14 POINTER TO TYPE OF
                                                    DISCHARGE FILE (#25)
               1. This field is now a REQUIRED field.
  
   .3296       SERVICE BRANCH [NNTL]  .32;15 POINTER TO BRANCH OF SERVICE FILE
                                                                          (#23)
               1. The input transform has been changed to:
                    S DFN=DA D SER2^DGLOCK S DGCOMBR=$G(Y) Q
               2. Added new cross-references:
                  CROSS-REFERENCE:  2^AFV3^MUMPS  
                                 1)= Q
                                 2)= I $P($G(^DPT(DA,.321)),U,14)]"" D
                                     FVP^DGRPMS
                                 This MUMPS cross-reference acts like a trigger
                                 cross-reference.  If the Service Branch[Last],
                                 Service Branch [NTL] and Service Branch [NNTL] 
                                 fields do not contain a Filipino Veteran branch
                                 of service, the Filipino Vet Proof field
                                 (#.3214) is deleted.  
  
                   RECORD INDEX: AMSENNL (#336)    MUMPS        ACTION
                    Short Descr:  DELETE MSE (NEXT TO NEXT TO LAST) FIELDS
                      Set Logic:  Q
                     Kill Logic:  D DELMSE^DGRPMS(DFN,3)
                      Kill Cond:  S X=X2(1)=""
                           X(1):  SERVICE BRANCH [NNTL]  (2,.3296)  (forwards)
  
   .3297       SERVICE ENTRY DATE [NNTL] .32;16 DATE 
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    I $D(X) S DFN=DA D SER2^DGLOCK I $D(X) K:'$$VALMSE^DGRPMS(
                    DFN,X,0,"MSNNTL") X I $D(X),$D(^DG(43,1)) S SD1=3 D POS^
                    DGINP
  
   .3298       SERVICE SEPARATION DATE [NNTL] .32;17 DATE  
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E",%DT(0)=-DT D ^%DT K %DT S X=Y K:Y<1 X I $D(X) S 
                    DFN=DA D SER2^DGLOCK I $D(X) K:'$$VALMSE^DGRPMS(DFN,X,1,
                    "MSNNTL") X I $D(X),$D(^DG(43,1)) S SD1=3 D PS^DGINP
  
   .526        POW CONFINEMENT LOCATION .52;6 POINTER TO POW PERIOD FILE (#22)
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S DFN=DA,DGCOMLOC=X D POW^DGLOCK
  
   .527        POW FROM DATE          .52;7 DATE 
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:'$$VALCON^DGRPMS(DA,"POW",X) X I 
                    $D(X) S DFN=DA D POW^DGLOCK I $D(X) D DOB^DGHELP
  
   .528        POW TO DATE            .52;8 DATE 
               1. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:'$$VALCON^DGRPMS(DA,"POW",X,1) 
                    X I $D(X) S DFN=DA D POW^DGLOCK I $D(X) D DOB^DGHELP
  
   .5292       COMBAT SERVICE LOCATION .52;12 POINTER TO POW PERIOD FILE (#22)
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S DFN=DA S DGCOMLOC=X D COM^DGLOCK
  
   .5293       COMBAT FROM DATE       .52;13 DATE 
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:'$$VALCON^DGRPMS(DA,"COMB",X) X 
                    I $D(X) S DFN=DA D COM^DGLOCK I $D(X) D DOB^DGHELP
  
   .5294       COMBAT TO DATE         .52;14 DATE 
               1. This field is now a REQUIRED field.
               2. The input transform has been changed to:
                    S %DT="E" D ^%DT S X=Y K:'$$VALCON^DGRPMS(DA,"COMB",X,1) 
                    X I $D(X) S DFN=DA D COM^DGLOCK I $D(X) D DOB^DGHELP
  
  RATED DISABILITIES SUB-FILE (#2.04) WITHIN THE PATIENT FILE (#2)
  ---------------------------------------------------------------- 
   MODIFIED FIELDS:
   .01      RATED DISABILITIES (VA) 0;1 POINTER TO DISABILITY CONDITION FILE 
                                                                       (#31) 
               1. Added new cross-reference:
                  FIELD INDEX:      ARD (#206)    MUMPS        ACTION
                  Short Descr:  Rated Disabilities modification
                    Set Logic:  S DGRDCHG=1
                     Set Cond:  I (X1(1)'=X2(1))!(X1(2)'=X2(2))!(X1(3)'=X2(3))
                   Kill Logic:  S DGRDCHG=1
                    Kill Cond:  I (X1(1)'=X2(1))!(X1(2)'=X2(2))!(X1(3)'=X2(3))
                   Whole Kill:  S DGRDCHG=1
                         X(1):  RATED DISABILITIES (VA)  (2.04,.01)  (forwards)
                         X(2):  DISABILITY %  (2.04,2)  (forwards)
                         X(3):  SERVICE CONNECTED  (2.04,3)  (forwards)
  
   2        DISABILITY %           0;2 NUMBER 
               1. Added new cross-reference:
                  FIELD INDEX:      ARD (#206)    MUMPS        ACTION
                  Short Descr:  Rated Disabilities modification
                    Set Logic:  S DGRDCHG=1
                     Set Cond:  I (X1(1)'=X2(1))!(X1(2)'=X2(2))!(X1(3)'=X2(3))
                   Kill Logic:  S DGRDCHG=1
                    Kill Cond:  I (X1(1)'=X2(1))!(X1(2)'=X2(2))!(X1(3)'=X2(3))
                   Whole Kill:  S DGRDCHG=1
                         X(1):  RATED DISABILITIES (VA)  (2.04,.01)  (forwards)
                         X(2):  DISABILITY %  (2.04,2)  (forwards)
                         X(3):  SERVICE CONNECTED  (2.04,3)  (forwards)
  
   3        SERVICE CONNECTED      0;3 SET
               1. Added new cross-reference:
                  FIELD INDEX:      ARD (#206)    MUMPS        ACTION
                  Short Descr:  Rated Disabilities modification
                    Set Logic:  S DGRDCHG=1
                     Set Cond:  I (X1(1)'=X2(1))!(X1(2)'=X2(2))!(X1(3)'=X2(3))
                   Kill Logic:  S DGRDCHG=1
                    Kill Cond:  I (X1(1)'=X2(1))!(X1(2)'=X2(2))!(X1(3)'=X2(3))
                   Whole Kill:  S DGRDCHG=1
                         X(1):  RATED DISABILITIES (VA)  (2.04,.01)  (forwards)
                         X(2):  DISABILITY %  (2.04,2)  (forwards)
                         X(3):  SERVICE CONNECTED  (2.04,3)  (forwards)
  
  BRANCH OF SERVICE FILE (#23)
  ----------------------------
  A screened look-up was added to the file: ^DD(23,0,"SCR") = I X'["B.E.C."
  
   MODIFIED FIELDS:
   .001        NUMBER                     NUMBER
               1. The input transform has been changed to:
                    K:+X'=X!(X>14)!(X<1)!(X?.E1"."1N.N) X
               2. The Help text was changed to allow selection up to entry 14.  
  
  The following new entries were added to the file:
  
   NUMBER: 11                              NAME: F.COMMONWEALTH
  
   NUMBER: 12                              NAME: F.GUERILLA
  
   NUMBER: 13                              NAME: F.SCOUTS NEW
  
   NUMBER: 14                              NAME: F.SCOUTS OLD
  
  
  ROUTINE SUMMARY:
  ================
  The following is a list of the routine(s) included in this patch.  The
  second line of each of these routine(s) will look like:
  
      <tab>;;5.3;Registration;**[patch list]**; Aug 13,1993
  
                             CHECK^XTSUMBLD results
  
  Routine name  Before Patch          After Patch         Patch List
  ============  ============          ===========         ==========
  DG53E451               N/A              6191413             451
  DG53P451               N/A             21587023             451
  DG53S451               N/A              7494606             451
  DGENA3            20398978             21806830     232,306,327,367,417
                                                      454,456,491,514,451
  DGENCD             5881897              5777846     121,122,232,237,302
                                                            387,451
  DGENCD1            2418463              7326706       121,232,387,451
  DGENCDA            2168452              2337458     121,147,232,387,451
  DGENCDA1          14126398             14201856     121,147,232,302,356
                                                          387,475,451
  DGENEGT            7004542              8536343           232,451
  DGENEGT1           9100872             13912999     232,417,454,491,513
                                                             451
  DGENEGT3           1701368              2017140       232,306,417,451
  DGENELA            3950858              3989706     121,147,232,314,451
  DGENELA1          24368961             22464604     147,327,314,367,497
                                                              451
  DGENELA4          13114703             13082559     232,275,306,327,314
                                                      367,417,437,456,491
                                                              451
  DGENUPL3           3638470              3735579     147,230,232,377,404
                                                              451
  DGENUPL4          16132333             16446409     147,177,232,253,327
                                                       367,377,514,451
  DGENUPL9           2548317              4048664         232,378,451
  DGENUPLA           8516201              8993602       397,379,497,451
  DGMSCK                 N/A              3116096             451
  DGMTU             15086721             15100029      4,33,182,277,290
                                                      374,358,420,426,411
                                                      332,433,456,476,519
                                                              451
  DGRP6             17122678             17158073     161,247,343,397,342
                                                              451
  DGRPC              9717144              9916966     108,121,314,301,470
                                                          489,505,451
  DGRPC1             7538705              7067819         314,342,451
  DGRPC2            10848653             14544544      45,69,108,121,205
                                                      218,342,387,470,467
                                                      489,505,507,528,451
  DGRPC3                 N/A              7676987             451
  DGRPCE            14511431             11721106     121,122,175,297,342
                                                              451
  DGRPCE1            3429841             31355218     108,226,470,454,489
                                                          505,522,451
  DGRPE             24713474             26703993     32,114,139,169,175
                                                      247,190,343,397,342
                                                      454,415,489,506,244
                                                      547,522,528,555,508
                                                              451
  DGRPE1             3547509              5034948         114,327,451
  DGRPMS                 N/A              9056450             451
  DGRPV              8786592              8786527     109,114,247,190,327
                                                      365,343,397,415,489
                                                           546,545,451
  
  
  SOFTWARE AND DOCUMENTATION RETRIEVAL
  ====================================  
  The software for this patch is being distributed in a host file.  The 
  host file will contain three KIDS builds.
   
     Host file name: DG_53_P451.KID
   
             Builds:  DG*5.3*451
                      IVM*2.0*56
                      EAS*1.0*38
  
  Sites may retrieve the software and documentation directly using FTP 
  from  the ANONYMOUS.SOFTWARE directory at the following OI Field Offices:
  
             Albany:  ftp.fo-albany.med.va.gov
              Hines:  ftp.fo-hines.med.va.gov
     Salt Lake City:  ftp.fo-slc.med.va.gov
  
  The following documentation will be available:
   
     File Name                 Description
     ---------                 -----------
     DG_5_3_P451_ADTBE_UM.PDF  Revised PIMS ADT User Manual, Menus, Intro,
                               Orientation, etc.
     DG_5_3_P451_REG_UM.PDF    Revised PIMS ADT User Manual, Registration Menu
                               Module (includes MT pending adjudication
                               changes)
     DG_5_3_P451_SADT_UM.PDF   Revised PIMS ADT User Manual, Supervisor ADT Menu
                               Module
     IVM_2_P56_TM.PDF          Revised IVM V. 2.0 Technical Manual
     IVM_2_P56_UM.PDF          Revised IVM V. 2.0 User Manual
      
    * Note: Use ASCII mode when transferring the .KID file.
            Use Binary mode when transferring the .PDF file.  The .PDF 
            files can be read on a PC using the Adobe Acrobat Reader 
            program.
            The VistA Documentation Library [VDL] contains all end-user 
            manuals.
  
  
   
  INSTALLATION INSTRUCTIONS
  =========================  
   
          * * * * * *  A  T  T  E  N  T  I  O  N  * * * * * * 
    
  It is recommended this patch be installed outside of normal business 
  hours to avoid any complications resulting from users on the system. 
  Installation will take approximately 2 minutes.
   
  This patch should NOT be installed while the IVM BACKGROUND JOB [IVM 
  BACKGROUND JOB] is running.
   
  
  * * N O T E * *
  Due to an existing problem with old Fileman Compiled trigger code (~10 years
  old), the $N function exists in many data dictionary triggers.  This is a
  known issue that we are working closely with the Fileman team to resolve. 
  The Fileman team has a patch (DI*22*141) in test that will allow developers
  to fix these SAC violations on a case-by-case basis, but it has not yet been
  released to the field.  We are working in collaboration with the Fileman
  team to clean-up the problem and will be issuing our own patch (EAS*1*56) in
  the near future to coordinate the updates.  
  
  Installation Steps
  ==================
   
  1. Download the KIDS file DG_53_P451.KID from the ANONYMOUS.SOFTWARE 
     directory of either Albany, Hines, or the Salt Lake CIOFO to the 
     appropriate directory on your system.
   
  2. Use the 'LOAD A DISTRIBUTION' option on the KIDS INSTALLATION menu, 
     and enter: DG_53_P451.KID. 
   
  3. Review your mapped set.  If any of the routines listed in the ROUTINE 
     SUMMARY section of patches DG*5.3*451, IVM*2*56, or EAS*1*38 are 
     mapped, they should be removed from the mapped set at this time.
   
  4. From the 'Kernel Installation & Distribution System' menu, select
     the Installation menu.
   
  5. From this menu, you may elect to use the following options (when 
     prompted for INSTALL NAME, enter DG*5.3*451).
   
       a. Backup a Transport Global - This option will create a backup
          message of any routines exported with the patch.  It will NOT
          backup any other changes such as DDs or templates.
   
       b. Compare Transport Global to Current System - This option will
          allow you to view all changes that will be made when the patch
          is installed.  It compares all components of the patch
          (routines, DDs, templates, etc.).
   
       c. Verify Checksums in Transport Global - This option will allow
          you to ensure the integrity of the routines that are in the
          transport global.
   
       d. Print Transport Global - This option will allow you to view
          the components of the KIDS build.
  
  6. Use the Install Package(s) option and select DG*5.3*451.
   
  7. When prompted 'Want KIDS to INHIBIT Logon's during the install? 
     YES//', it is recommended you answer NO.
   
  8. When prompted 'Want to DISABLE Scheduled Options, Menu Options,
     and Protocols? YES//', respond NO
   
  POST-INSTALL JOB
  ================
  Following the installation of this patch, a post install job will be queued 
  to loop through the "E" cross reference of the PATIENT (#2) file and trigger
  a Z07 message to the HEC system for all entries that have a value in the
  COMBAT VETERAN END DATE (#.5295) field prior to 1/17/2003.
  
  Upon completion of the post-install routine, a MailMan message will be sent
  to the user performing the patch installation as well as the following
  Enrollment Enhancement team members:
         Pat Wilson  (pat.wilson@med.va.gov)   - SQA
         Terry Moore (terry.moore3@med.va.gov) - Developer
  
  See below for a sample message:
  
  ============================================================================
  Subj: CV END DATE SYNCHRONIZATION - 500 (DG*5.3*451)  [#33780]
  05/26/04@14:10  10 lines
  From: CV END DATE SYNCHRONIZATION  In 'IN' basket.   Page 1
  -------------------------------------------------------------------------------
  Combat Veteran End Date synchronization process has completed successfully.
  Task: 2465549
  
  Site Station number: 500
  Site Name: ALBANY.VA.GOV
  
  Process started at           : 5/26/2004 2:10:12 pm
  Process completed at         : 5/26/2004 2:10:12 pm
  Total Veterans processed     : 13
  Total Veterans queued for Z07: 4
  
  Enter message action (in IN basket): Ignore//
  ============================================================================

Routine Information:
====================

Routine Name:
  - DG53E451


Routine Checksum:

Routine Name:
  - DG53P451


Routine Checksum:

Routine Name:
  - DG53S451


Routine Checksum:

Routine Name:
  - DGENA3


Routine Checksum:

Routine Name:
  - DGENCD


Routine Checksum:

Routine Name:
  - DGENCD1


Routine Checksum:

Routine Name:
  - DGENCDA


Routine Checksum:

Routine Name:
  - DGENEGT


Routine Checksum:

Routine Name:
  - DGENEGT3


Routine Checksum:

Routine Name:
  - DGENELA


Routine Checksum:

Routine Name:
  - DGENELA1


Routine Checksum:

Routine Name:
  - DGENUPL3


Routine Checksum:

Routine Name:
  - DGENUPL4


Routine Checksum:

Routine Name:
  - DGENUPL9


Routine Checksum:

Routine Name:
  - DGENUPLA


Routine Checksum:

Routine Name:
  - DGMSCK


Routine Checksum:

Routine Name:
  - DGMTU


Routine Checksum:

Routine Name:
  - DGRP6


Routine Checksum:

Routine Name:
  - DGRPC


Routine Checksum:

Routine Name:
  - DGRPC1


Routine Checksum:

Routine Name:
  - DGRPC2


Routine Checksum:

Routine Name:
  - DGRPC3


Routine Checksum:

Routine Name:
  - DGRPCE


Routine Checksum:

Routine Name:
  - DGRPCE1


Routine Checksum:

Routine Name:
  - DGRPE


Routine Checksum:

Routine Name:
  - DGRPE1


Routine Checksum:

Routine Name:
  - DGRPMS


Routine Checksum:

Routine Name:
  - DGRPV


Routine Checksum:

Routine Name:
  - DGENELA4


Routine Checksum:

Routine Name:
  - DGENCDA1


Routine Checksum:

Routine Name:
  - DGENEGT1


Routine Checksum:

=============================================================================
User Information:
Entered By  : MULLER,RICHARD                Date Entered  : MAY 06, 2002
Completed By: MOORE,TERRY D                 Date Completed: SEP 10, 2004
Released By : GROOMS,ANTHONY E              Date Released : SEP 10, 2004
=============================================================================


Packman Mail Message:
=====================

No routines included

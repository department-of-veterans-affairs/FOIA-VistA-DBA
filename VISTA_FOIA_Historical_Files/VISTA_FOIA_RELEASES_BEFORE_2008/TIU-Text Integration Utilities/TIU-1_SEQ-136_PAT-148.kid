Released TIU*1*148 SEQ #136
Extracted from mail message
**KIDS**:TIU*1.0*148^

**INSTALL NAME**
TIU*1.0*148
"BLD",3980,0)
TIU*1.0*148^TEXT INTEGRATION UTILITIES^0^3021212^y
"BLD",3980,1,0)
^^2^2^3021101^^^
"BLD",3980,1,1,0)
The description of this patch may be found in the National Patch Module 
"BLD",3980,1,2,0)
under TIU*1.0*148.
"BLD",3980,4,0)
^9.64PA^^
"BLD",3980,"ABPKG")
n
"BLD",3980,"INIT")
TIUPS148
"BLD",3980,"KRN",0)
^9.67PA^8989.52^19
"BLD",3980,"KRN",.4,0)
.4
"BLD",3980,"KRN",.401,0)
.401
"BLD",3980,"KRN",.402,0)
.402
"BLD",3980,"KRN",.403,0)
.403
"BLD",3980,"KRN",.5,0)
.5
"BLD",3980,"KRN",.5,"NM",0)
^9.68A^^
"BLD",3980,"KRN",.84,0)
.84
"BLD",3980,"KRN",3.6,0)
3.6
"BLD",3980,"KRN",3.8,0)
3.8
"BLD",3980,"KRN",9.2,0)
9.2
"BLD",3980,"KRN",9.8,0)
9.8
"BLD",3980,"KRN",9.8,"NM",0)
^9.68A^8^6
"BLD",3980,"KRN",9.8,"NM",1,0)
TIUCHLP^^0^B12569692
"BLD",3980,"KRN",9.8,"NM",2,0)
TIULD^^0^B13157995
"BLD",3980,"KRN",9.8,"NM",4,0)
TIULV^^0^B29372861
"BLD",3980,"KRN",9.8,"NM",5,0)
TIUPRDS2^^0^B8256151
"BLD",3980,"KRN",9.8,"NM",7,0)
TIUPS148^^0^B2845487
"BLD",3980,"KRN",9.8,"NM",8,0)
TIULO^^0^B49931371
"BLD",3980,"KRN",9.8,"NM","B","TIUCHLP",1)
 
"BLD",3980,"KRN",9.8,"NM","B","TIULD",2)
 
"BLD",3980,"KRN",9.8,"NM","B","TIULO",8)
 
"BLD",3980,"KRN",9.8,"NM","B","TIULV",4)
 
"BLD",3980,"KRN",9.8,"NM","B","TIUPRDS2",5)
 
"BLD",3980,"KRN",9.8,"NM","B","TIUPS148",7)
 
"BLD",3980,"KRN",19,0)
19
"BLD",3980,"KRN",19.1,0)
19.1
"BLD",3980,"KRN",101,0)
101
"BLD",3980,"KRN",409.61,0)
409.61
"BLD",3980,"KRN",771,0)
771
"BLD",3980,"KRN",870,0)
870
"BLD",3980,"KRN",8989.51,0)
8989.51
"BLD",3980,"KRN",8989.52,0)
8989.52
"BLD",3980,"KRN",8994,0)
8994
"BLD",3980,"KRN","B",.4,.4)
 
"BLD",3980,"KRN","B",.401,.401)
 
"BLD",3980,"KRN","B",.402,.402)
 
"BLD",3980,"KRN","B",.403,.403)
 
"BLD",3980,"KRN","B",.5,.5)
 
"BLD",3980,"KRN","B",.84,.84)
 
"BLD",3980,"KRN","B",3.6,3.6)
 
"BLD",3980,"KRN","B",3.8,3.8)
 
"BLD",3980,"KRN","B",9.2,9.2)
 
"BLD",3980,"KRN","B",9.8,9.8)
 
"BLD",3980,"KRN","B",19,19)
 
"BLD",3980,"KRN","B",19.1,19.1)
 
"BLD",3980,"KRN","B",101,101)
 
"BLD",3980,"KRN","B",409.61,409.61)
 
"BLD",3980,"KRN","B",771,771)
 
"BLD",3980,"KRN","B",870,870)
 
"BLD",3980,"KRN","B",8989.51,8989.51)
 
"BLD",3980,"KRN","B",8989.52,8989.52)
 
"BLD",3980,"KRN","B",8994,8994)
 
"BLD",3980,"QUES",0)
^9.62^^
"BLD",3980,"REQB",0)
^9.611^5^5
"BLD",3980,"REQB",1,0)
TEXT INTEGRATION UTILITIES 1.0^2
"BLD",3980,"REQB",2,0)
TIU*1.0*109^2
"BLD",3980,"REQB",3,0)
TIU*1.0*21^2
"BLD",3980,"REQB",4,0)
TIU*1.0*101^2
"BLD",3980,"REQB",5,0)
TIU*1.0*52^2
"BLD",3980,"REQB","B","TEXT INTEGRATION UTILITIES 1.0",1)
 
"BLD",3980,"REQB","B","TIU*1.0*101",4)
 
"BLD",3980,"REQB","B","TIU*1.0*109",2)
 
"BLD",3980,"REQB","B","TIU*1.0*21",3)
 
"BLD",3980,"REQB","B","TIU*1.0*52",5)
 
"INIT")
TIUPS148
"MBREQ")
0
"PKG",193,-1)
1^1
"PKG",193,0)
TEXT INTEGRATION UTILITIES^TIU^Text Integration Utilities 
"PKG",193,20,0)
^9.402P^^
"PKG",193,22,0)
^9.49I^1^1
"PKG",193,22,1,0)
1.0^3010321^3010321^11
"PKG",193,22,1,"PAH",1,0)
148^3021212
"PKG",193,22,1,"PAH",1,1,0)
^^2^2^3021212
"PKG",193,22,1,"PAH",1,1,1,0)
The description of this patch may be found in the National Patch Module 
"PKG",193,22,1,"PAH",1,1,2,0)
under TIU*1.0*148.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")
 
"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
6
"RTN","TIUCHLP")
0^1^B12569692
"RTN","TIUCHLP",1,0)
TIUCHLP ; SLC/SBW - Help for Clinician ;11/29/02
"RTN","TIUCHLP",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**3,21,109,148**;Jun 20, 1997
"RTN","TIUCHLP",3,0)
MAIN ; Control branching
"RTN","TIUCHLP",4,0)
 N DIC,X,Y,TIUI,TIUROOT,TIUFPRIV S TIUFPRIV=1
"RTN","TIUCHLP",5,0)
 I '$D(TIUPRM0)!'$D(TIUPRM1) D SETPARM^TIULE
"RTN","TIUCHLP",6,0)
 S DIC=8925.1,DIC(0)="AEMQZ",DIC("A")="Select DOCUMENT TYPE: "
"RTN","TIUCHLP",7,0)
 S DIC("B")=$G(^DISV(+DUZ,"^TIU(8925.1,"))
"RTN","TIUCHLP",8,0)
 D ^DIC I +Y'>0 D
"RTN","TIUCHLP",9,0)
 . W !!,"Required information for dictation help not set up for this report type."
"RTN","TIUCHLP",10,0)
 I +Y>0 D
"RTN","TIUCHLP",11,0)
 . I $P(TIUPRM0,U,16)="D" S TIUROOT="ITEM"
"RTN","TIUCHLP",12,0)
 . E  I $P(TIUPRM0,U,16)="C" S TIUROOT="HEAD"
"RTN","TIUCHLP",13,0)
 . I $G(TIUROOT)']"" W !!,"Required information for dictation help not set up for this report type." Q
"RTN","TIUCHLP",14,0)
 . W !!,"A Dictated ",$P(Y(0),U),", requires the following:"
"RTN","TIUCHLP",15,0)
 . S TIUI=0
"RTN","TIUCHLP",16,0)
 . F  S TIUI=$O(^TIU(8925.1,+Y,TIUROOT,TIUI)) Q:+TIUI'>0  D
"RTN","TIUCHLP",17,0)
 . . I +$P($G(^TIU(8925.1,+Y,TIUROOT,TIUI,0)),U,6) W !?10,$P($G(^(0)),U,2)
"RTN","TIUCHLP",18,0)
 W !!
"RTN","TIUCHLP",19,0)
 I $$READ^TIUU("YO","Do you want to get patient data","YES") D GETPAT
"RTN","TIUCHLP",20,0)
 Q
"RTN","TIUCHLP",21,0)
GETPAT ; Gets Dictation data for a specific patient
"RTN","TIUCHLP",22,0)
 N TIU,TIUOUT,DFN,SUCCESS,TITLE
"RTN","TIUCHLP",23,0)
 F  D  Q:$D(DUOUT)!$D(DIROUT)!+$G(TIUOUT)
"RTN","TIUCHLP",24,0)
 . S DFN=+$$PATIENT^TIULA
"RTN","TIUCHLP",25,0)
 . D MAIN^TIUMOVE(.TIU,DFN)
"RTN","TIUCHLP",26,0)
 . I $D(TIU) D PATDATA(.TIU)
"RTN","TIUCHLP",27,0)
 . S TIUOUT=$$READ^TIUU("Y","... OK","YES")
"RTN","TIUCHLP",28,0)
 D MAKE^TIUPEFIX(.SUCCESS,DFN,.TITLE,.TIU,$S(+$G(XQADATA):+$G(XQADATA),+$G(BUFDA):+$G(BUFDA),1:""))
"RTN","TIUCHLP",29,0)
 I +SUCCESS S TIUDONE=1
"RTN","TIUCHLP",30,0)
 Q
"RTN","TIUCHLP",31,0)
PATDATA(X) ; Display/validate correct patient/treatment episode
"RTN","TIUCHLP",32,0)
 N DIR,Y
"RTN","TIUCHLP",33,0)
 W !!?1,"Patient: ",$$NAME^TIULS(X("PNM"),"LAST, FIRST MI"),?40,"SSN: ",X("SSN"),?62,"Sex: ",$P(X("SEX"),U,2),!
"RTN","TIUCHLP",34,0)
 W ?4,"Ward: ",$P(X("WARD"),U,2),?40,"Age: ",X("AGE"),!
"RTN","TIUCHLP",35,0)
 W "Att Phys: ",$P(X("AMD"),U,2),?34,"Prim Phys: ",$P(X("PMD"),U,2),!
"RTN","TIUCHLP",36,0)
 W "Adm Date: ",$$DATE^TIULS(+X("EDT"),"MM/DD/YY@HR:MIN:SEC")
"RTN","TIUCHLP",37,0)
 W:X("LDT")]"" ?35,"Dis Date: ",$$DATE^TIULS(X("LDT"),"MM/DD/YY")
"RTN","TIUCHLP",38,0)
 W !
"RTN","TIUCHLP",39,0)
 W ?2,"Adm Dx: ",X("ADDX")
"RTN","TIUCHLP",40,0)
 ; Below TIU*148
"RTN","TIUCHLP",41,0)
 I TIURC1>0 D
"RTN","TIUCHLP",42,0)
 . W !?4,"Race: " F TIURC=1:1:TIURC1 W ?10,$P(X("RACE",TIURC),U,2),!
"RTN","TIUCHLP",43,0)
 I TIURC1=0 W !?4,"Race: ",$P($G(X("RACE")),U,2),!
"RTN","TIUCHLP",44,0)
 K TIURC1,TIURC
"RTN","TIUCHLP",45,0)
 I $D(X("DICTDT")) D
"RTN","TIUCHLP",46,0)
 . W !,"A DISCHARGE SUMMARY is already on file:",!
"RTN","TIUCHLP",47,0)
 . W ?2,"Dict'd: ",X("DICTDT"),?41,"By: ",X("AUTHOR"),!
"RTN","TIUCHLP",48,0)
 . W ?2,"Signed: ",X("SIGDT"),?35,"Cosigned: ",X("COSDT"),!
"RTN","TIUCHLP",49,0)
 Q
"RTN","TIUCHLP",50,0)
GETPN ; Help get Fields for PN Dictation/Error Resolution
"RTN","TIUCHLP",51,0)
 N TIU,DFN,TIUY,TITLE
"RTN","TIUCHLP",52,0)
 S DFN=+$$PATIENT^TIULA Q:+DFN'>0
"RTN","TIUCHLP",53,0)
 D ENPN^TIUVSIT(.TIU,+DFN,1)
"RTN","TIUCHLP",54,0)
 I '$D(TIU) Q
"RTN","TIUCHLP",55,0)
 S TIUY=$$CHEKPN(.TIU)
"RTN","TIUCHLP",56,0)
 D MAKE^TIUPEFIX(.SUCCESS,DFN,.TITLE,.TIU,$S(+$G(XQADATA):+$G(XQADATA),+$G(BUFDA):+$G(BUFDA),1:""))
"RTN","TIUCHLP",57,0)
 I +SUCCESS S TIUDONE=1
"RTN","TIUCHLP",58,0)
 Q
"RTN","TIUCHLP",59,0)
CHEKPN(X,TIUBY) ; Display/validate demographic/visit information
"RTN","TIUCHLP",60,0)
 W !!,"Document Identifiers..."
"RTN","TIUCHLP",61,0)
 W !?14,"Patient Name:  ",$S($G(X("PNM"))]"":$G(X("PNM")),1:"UNKNOWN")
"RTN","TIUCHLP",62,0)
 W !?15,"Patient SSN:  ",$S($G(X("SSN"))]"":$G(X("SSN")),1:"UNKNOWN")
"RTN","TIUCHLP",63,0)
 W !?10,"Patient Location:  ",$S(+$G(X("LOC")):$P($G(X("LOC")),U,2),1:"UNKNOWN")
"RTN","TIUCHLP",64,0)
 W !?8,"Date/time of Visit:  ",$S($L($G(X("VSTR"))):$$DATE^TIULS($P(X("VSTR"),";",2),"MM/DD/YY HR:MIN"),1:"UNKNOWN")
"RTN","TIUCHLP",65,0)
 S Y=$$READ^TIUU("YO","   ...OK","YES")
"RTN","TIUCHLP",66,0)
 I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) Q 0
"RTN","TIUCHLP",67,0)
 I +Y'>0 D
"RTN","TIUCHLP",68,0)
 . K X N TIUINOUT
"RTN","TIUCHLP",69,0)
 . S TIUINOUT=$$INOUT^TIUVSIT
"RTN","TIUCHLP",70,0)
 . I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) Q
"RTN","TIUCHLP",71,0)
 . I $P(TIUINOUT,U)="o" D MAIN^TIUVSIT(.X,DFN,"","","","",1,"",20,1)
"RTN","TIUCHLP",72,0)
 . I $P(TIUINOUT,U)'="o" D MAIN^TIUMOVE(.X,DFN,"","","",1,"LAST",1)
"RTN","TIUCHLP",73,0)
 . S Y=$S($D(X)>9:$$CHEKPN(.X,.TIUBY),1:0)
"RTN","TIUCHLP",74,0)
 Q Y
"RTN","TIULD")
0^2^B13157995
"RTN","TIULD",1,0)
TIULD ; SLC/JER - Admission related functions ; 11/29/02
"RTN","TIULD",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**7,21,148**;Jun 20, 1997
"RTN","TIULD",3,0)
GETTIU(TIUY,TIUDA) ; Gets admission array for existing DCS
"RTN","TIULD",4,0)
 N TIUMVN,TIUPTF,TIUVSTR,TIUDTYP,TIUD0,TIUD12,TIUD14
"RTN","TIULD",5,0)
 S TIUD0=$G(^TIU(8925,+TIUDA,0)),TIUD12=$G(^(12)),TIUD14=$G(^(14))
"RTN","TIULD",6,0)
 S TIUDTYP=+TIUD0,DFN=+$P(TIUD0,U,2),TIUMVN=$P(TIUD14,U)
"RTN","TIULD",7,0)
 S TIUVSTR=$P(TIUD12,U,11)_";"_$P(TIUD0,U,7)_";"_$P(TIUD0,U,13)
"RTN","TIULD",8,0)
 S TIUY("DOCTYP")=TIUDTYP_U_$$PNAME^TIULC1(TIUDTYP)
"RTN","TIULD",9,0)
 I +$G(^TIU(8925,+TIUDA,13)) S TIUY("REFDT")=+$G(^(13))
"RTN","TIULD",10,0)
 ; If the Patient Movement Pointer's broken, try to fix
"RTN","TIULD",11,0)
 I +TIUMVN,'$D(^DGPM(+TIUMVN,0)),+$G(TIUVSTR) D FIXMOVE(.TIUY,DFN,TIUVSTR,TIUDA) Q:+$G(TIUY("AD#"))
"RTN","TIULD",12,0)
 D PATVADPT^TIULV(.TIUY,DFN,TIUMVN,TIUVSTR)
"RTN","TIULD",13,0)
 Q
"RTN","TIULD",14,0)
FIXMOVE(TIUY,DFN,TIUVSTR,TIUDA) ; See if Admission has been reinstated, and fix
"RTN","TIULD",15,0)
 N TIUEDT,TIULDT,TIULOC
"RTN","TIULD",16,0)
 S TIUEDT=$P(TIUVSTR,";",2) Q:+TIUEDT'>0
"RTN","TIULD",17,0)
 S TIULDT=$$FMADD^XLFDT(TIUEDT,1),TIULOC=+TIUVSTR
"RTN","TIULD",18,0)
 Q:+TIULDT'>0!(+TIULOC'>0)
"RTN","TIULD",19,0)
 D MAIN^TIUMOVE(.TIUY,DFN,"",TIUEDT,TIULDT,1,"LAST",0,+TIULOC)
"RTN","TIULD",20,0)
 I +$G(TIU("AD#"))>0,$D(^DGPM(+$G(TIU("AD#")))) D
"RTN","TIULD",21,0)
 . N DIE,DR,DA S DA=TIUDA,DR="1401////"_+$G(TIU("AD#")),DIE="^TIU(8925,"
"RTN","TIULD",22,0)
 . D ^DIE
"RTN","TIULD",23,0)
 Q
"RTN","TIULD",24,0)
CHEKDS(X) ; Display/validate correct patient/treatment episode
"RTN","TIULD",25,0)
 N DIR,Y S Y=0
"RTN","TIULD",26,0)
 I X("AD#")'>0!(X("EDT")="") D  G CHEKDSX
"RTN","TIULD",27,0)
 . W !!,"Movement data doesn't exist for admission, can't create "
"RTN","TIULD",28,0)
 . W "Summary",!
"RTN","TIULD",29,0)
 I +$$ISA^USRLM(DUZ,"TRANSCRIPTIONIST")>0 S Y=1 G CHEKDSX
"RTN","TIULD",30,0)
 W !!?1,"Patient: ",$$NAME^TIULS(X("PNM"),"LAST, FIRST MI"),?40,"SSN: "
"RTN","TIULD",31,0)
 W X("SSN"),?62,"Sex: ",$S(X("SEX")]"":$P(X("SEX"),U,2),1:"UNKNOWN"),!
"RTN","TIULD",32,0)
 W ?5,"Age: ",$S(X("AGE")]"":X("AGE"),1:"UNKNOWN"),?40,"Claim #: "
"RTN","TIULD",33,0)
 W $S(X("CLAIM")]"":X("CLAIM"),1:"UNKNOWN"),!
"RTN","TIULD",34,0)
 W "Adm Date: ",$$DATE^TIULS($P(X("EDT"),U),"MM/DD/YY"),?40,"Ward: "
"RTN","TIULD",35,0)
 W $P(X("WARD"),U,2),!
"RTN","TIULD",36,0)
 W:X("LDT")]"" "Dis Date: ",$$DATE^TIULS(X("LDT"),"MM/DD/YY"),!
"RTN","TIULD",37,0)
 W ?2,"Adm Dx: ",X("ADDX")
"RTN","TIULD",38,0)
 ; Below TIU*148
"RTN","TIULD",39,0)
 I TIURC1>0 D
"RTN","TIULD",40,0)
 . W !,?4,"Race: " F TIURC=1:1:TIURC1 W ?10,$P(X("RACE",TIURC),U,2),!
"RTN","TIULD",41,0)
 I TIURC1=0 W !,?4,"Race: ",$P($G(X("RACE")),U,2),!
"RTN","TIULD",42,0)
 K TIURC1,TIURC
"RTN","TIULD",43,0)
 I $D(X("DICTDT")) D
"RTN","TIULD",44,0)
 . W !,"A DISCHARGE SUMMARY is already on file:",!
"RTN","TIULD",45,0)
 . W ?2,"Dict'd: ",X("DICTDT"),?41,"By: ",X("AUTHOR"),!
"RTN","TIULD",46,0)
 . W ?2,"Signed: ",X("SIGDT"),?35,"Cosigned: ",X("COSDT"),!
"RTN","TIULD",47,0)
 . S Y=1
"RTN","TIULD",48,0)
 E  S Y=$$READ^TIUU("YO","Correct VISIT","YES")
"RTN","TIULD",49,0)
 W !
"RTN","TIULD",50,0)
CHEKDSX Q Y
"RTN","TIULD",51,0)
CHEKPN(X,TIUBY) ; Display/validate demographic/visit information
"RTN","TIULD",52,0)
 W !!,"Enter/Edit "
"RTN","TIULD",53,0)
 W $S(+$G(TIUCLASS):$S(TIUCLASS=3:"PROGRESS NOTE",TIUCLASS=+$$CLASS^TIUCNSLT:"CONSULT RESULT",1:$$PNAME^TIULC1(+TIUCLASS)),1:"PROGRESS NOTE"),"..."
"RTN","TIULD",54,0)
 W !?10,"Patient Location:  ",$S(+X("LOC"):$P(X("LOC"),U,2),1:"UNKNOWN")
"RTN","TIULD",55,0)
 W !?$S(+$G(X("AD#")):4,1:8),"Date/time of "
"RTN","TIULD",56,0)
 W $S(+$G(X("AD#")):"Admission:  ",1:"Visit:  ")
"RTN","TIULD",57,0)
 W $S(+$P($G(X("VSTR")),";",2):$$DATE^TIULS($P(X("VSTR"),";",2),"MM/DD/YY HR:MIN"),1:"UNKNOWN")
"RTN","TIULD",58,0)
 W !?9,"Date/time of Note:  "
"RTN","TIULD",59,0)
 W $S(+$G(X("REFDT"))>0:$$DATE^TIULS(X("REFDT"),"MM/DD/YY HR:MIN"),1:"NOW")
"RTN","TIULD",60,0)
 S:+$G(X("REFDT"))'>0 X("REFDT")=$$NOW^TIULC
"RTN","TIULD",61,0)
 W !?12,"Author of Note:  "
"RTN","TIULD",62,0)
 W $$PERSNAME^TIULC1($S($D(TIUAUTH):+TIUAUTH,1:DUZ))
"RTN","TIULD",63,0)
 S Y=$$READ^TIUU("YO","   ...OK","YES")
"RTN","TIULD",64,0)
 I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) Q 0
"RTN","TIULD",65,0)
 S TIUBY=+Y
"RTN","TIULD",66,0)
 S:'+Y Y=$$READ^TIUU("YO","Correct VISIT","YES")
"RTN","TIULD",67,0)
 I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) Q 0
"RTN","TIULD",68,0)
 I +Y'>0 D
"RTN","TIULD",69,0)
 . K X N TIUINOUT
"RTN","TIULD",70,0)
 . S TIUINOUT=$$INOUT^TIUVSIT
"RTN","TIULD",71,0)
 . I $S($D(DIROUT):1,$D(DUOUT):1,$D(DTOUT):1,1:0) Q
"RTN","TIULD",72,0)
 . I $P(TIUINOUT,U)="o" D MAIN^TIUVSIT(.X,DFN,"","","","",1)
"RTN","TIULD",73,0)
 . I $P(TIUINOUT,U)'="o" D MAIN^TIUMOVE(.X,DFN,"","","",1,"LAST",1)
"RTN","TIULD",74,0)
 . S Y=$S($D(X)>9:$$CHEKPN(.X,.TIUBY),1:0)
"RTN","TIULD",75,0)
 Q Y
"RTN","TIULO")
0^8^B49931371
"RTN","TIULO",1,0)
TIULO ; SLC/JER - Embedded Objects ;11/29/02
"RTN","TIULO",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**34,70,101,148**;Jun 20, 1997
"RTN","TIULO",3,0)
DEM(DFN,VADM) ; Calls DEM^VADPT
"RTN","TIULO",4,0)
 D DEM^VADPT
"RTN","TIULO",5,0)
 Q
"RTN","TIULO",6,0)
NAME(DFN) ; Patient NAME
"RTN","TIULO",7,0)
 I '$D(VADM(1)) D DEM(DFN,.VADM)
"RTN","TIULO",8,0)
 Q $S(VADM(1)]"":VADM(1),1:"NAME UNKNOWN")
"RTN","TIULO",9,0)
SSN(DFN) ; Patient SSN
"RTN","TIULO",10,0)
 I '$D(VADM(2)) D DEM(DFN,.VADM)
"RTN","TIULO",11,0)
 Q $S($P(VADM(2),U,2)]"":$P(VADM(2),U,2),1:"SSN UNKNOWN")
"RTN","TIULO",12,0)
AGE(DFN) ; Patient AGE
"RTN","TIULO",13,0)
 I '$D(VADM(4)) D DEM(DFN,.VADM)
"RTN","TIULO",14,0)
 Q $S(VADM(4)]"":VADM(4),1:"AGE UNKNOWN")
"RTN","TIULO",15,0)
DOB(DFN) ; Patient DATE OF BIRTH
"RTN","TIULO",16,0)
 I '$D(VADM(3)) D DEM(DFN,.VADM)
"RTN","TIULO",17,0)
 Q $S($P(VADM(3),U,2)]"":$P(VADM(3),U,2),1:"DOB UNKNOWN")
"RTN","TIULO",18,0)
DOD(DFN) ; Patient DATE OF DEATH
"RTN","TIULO",19,0)
 I '$D(VADM(6)) D DEM(DFN,.VADM)
"RTN","TIULO",20,0)
 Q $S($P(VADM(6),U,2)]"":$P(VADM(6),U,2),1:"DATE OF DEATH UNKNOWN")
"RTN","TIULO",21,0)
SEX(DFN) ; Patient SEX
"RTN","TIULO",22,0)
 I '$D(VADM(5)) D DEM(DFN,.VADM)
"RTN","TIULO",23,0)
 Q $S($P(VADM(5),U,2)]"":$P(VADM(5),U,2),1:"SEX UNKNOWN")
"RTN","TIULO",24,0)
RACE(DFN) ; Patient RACE TIU*148
"RTN","TIULO",25,0)
 N TIUI
"RTN","TIULO",26,0)
 I '$D(VADM(12)) D DEM(DFN,.VADM)
"RTN","TIULO",27,0)
 I +$G(VADM(12))=1 S X=$P($G(VADM(12,1)),U,2)
"RTN","TIULO",28,0)
 I +$G(VADM(12))>1 D
"RTN","TIULO",29,0)
 . S X=$P($G(VADM(12,1)),U,2) F TIUI=2:1:VADM(12) D
"RTN","TIULO",30,0)
 . . S X=X_", "_$P($G(VADM(12,TIUI)),U,2)
"RTN","TIULO",31,0)
 I +$G(VADM(12))=0,$P(VADM(8),U,2)="" S X="RACE UNKNOWN"
"RTN","TIULO",32,0)
 I +$G(VADM(12))=0,$P(VADM(8),U,2)]"" S X=$P(VADM(8),U,2)
"RTN","TIULO",33,0)
 Q X
"RTN","TIULO",34,0)
ETHNIC(DFN) ; Patient ETHNICITY  TIU*148
"RTN","TIULO",35,0)
 N TIUI
"RTN","TIULO",36,0)
 I '$D(VADM(11,1)) D DEM(DFN,.VADM)
"RTN","TIULO",37,0)
 I +$G(VADM(11))=0 S X="ETHNICITY UNKNOWN"
"RTN","TIULO",38,0)
 I +$G(VADM(11))=1 S X=$P($G(VADM(11,1)),U,2)
"RTN","TIULO",39,0)
 I +$G(VADM(11))>1 D
"RTN","TIULO",40,0)
 . S X=$P($G(VADM(11,1)),U,2) F TIUI=2:1:VADM(11) D
"RTN","TIULO",41,0)
 . . S X=X_", "_$P($G(VADM(11,TIUI)),U,2)
"RTN","TIULO",42,0)
 I +$G(VADM(11))=0 S X="ETHNICITY UNKNOWN"
"RTN","TIULO",43,0)
 Q X
"RTN","TIULO",44,0)
HEIGHT(DFN) ; Gets most recent Height from VITALS
"RTN","TIULO",45,0)
 Q $$DOVITALS(DFN,"HT")
"RTN","TIULO",46,0)
WEIGHT(DFN) ; Gets most recent Weight from VITALS
"RTN","TIULO",47,0)
 Q $$DOVITALS(DFN,"WT")
"RTN","TIULO",48,0)
TEMP(DFN) ; Gets most recent Temperature from VITALS
"RTN","TIULO",49,0)
 Q $$DOVITALS(DFN,"T")
"RTN","TIULO",50,0)
PULSE(DFN) ; Gets most recent Pulse from VITALS
"RTN","TIULO",51,0)
 Q $$DOVITALS(DFN,"P")
"RTN","TIULO",52,0)
RESP(DFN) ; Gets most recent Respiration from VITALS
"RTN","TIULO",53,0)
 Q $$DOVITALS(DFN,"R")
"RTN","TIULO",54,0)
BP(DFN) ; Gets most recent Blood Pressure from VITALS
"RTN","TIULO",55,0)
 Q $$DOVITALS(DFN,"BP")
"RTN","TIULO",56,0)
PAIN(DFN) ; Gets most recent Pain score from VITALS
"RTN","TIULO",57,0)
 Q $$DOVITALS(DFN,"PN")
"RTN","TIULO",58,0)
DOVITALS(DFN,TIUVITC) ; INTERNAL ROUTINE TO GET SPECIFIED VITALS (**34**)
"RTN","TIULO",59,0)
 N TIUVIT,TIUVT,TIUVDT,TIUVDA,TIUY,VDT,TIUI,TIUCWRAP,TIUMAXW
"RTN","TIULO",60,0)
 N TIUVCNT,TIUVCNT2,TIUVDONE,TIUVDATE,TIUY1,TIUVTEMP,CONV
"RTN","TIULO",61,0)
 D VITALS(.TIUVIT,DFN,TIUVITC)
"RTN","TIULO",62,0)
 S (TIUVDT,TIUVDONE,TIUVCNT)=0
"RTN","TIULO",63,0)
 F  S TIUVDT=$O(TIUVIT(TIUVITC,TIUVDT)) Q:+TIUVDT'>0!TIUVDONE  D
"RTN","TIULO",64,0)
 . S TIUVDA=0
"RTN","TIULO",65,0)
 . F  S TIUVDA=$O(TIUVIT(TIUVITC,TIUVDT,TIUVDA)) Q:+TIUVDA'>0!TIUVDONE  D
"RTN","TIULO",66,0)
 . . I $D(TIUVDATE),TIUVDATE'=TIUVDT S TIUVDONE=1
"RTN","TIULO",67,0)
 . . E  D
"RTN","TIULO",68,0)
 . . . S TIUVDATE=TIUVDT,TIUVCNT=TIUVCNT+1
"RTN","TIULO",69,0)
 . . . S TIUVTEMP=$G(TIUVIT(TIUVITC,TIUVDT,TIUVDA))
"RTN","TIULO",70,0)
 . . . S VDT=$$DATE^TIULS($P(TIUVTEMP,U,1),"MM/DD/CCYY HR:MIN")
"RTN","TIULO",71,0)
 . . . S TIUY=$P(TIUVTEMP,U,8)
"RTN","TIULO",72,0)
 . . . I TIUVITC="WT" D
"RTN","TIULO",73,0)
 . . . . S CONV=$J((+TIUY/2.2),3,1)
"RTN","TIULO",74,0)
 . . . . S TIUY=TIUY_" lb ["_CONV_" kg]"
"RTN","TIULO",75,0)
 . . . I TIUVITC="HT" D
"RTN","TIULO",76,0)
 . . . . S CONV=$J((+TIUY*2.54),3,1)
"RTN","TIULO",77,0)
 . . . . S TIUY=TIUY_" in ["_CONV_" cm]"
"RTN","TIULO",78,0)
 . . . I TIUVITC="T" D
"RTN","TIULO",79,0)
 . . . . S CONV=+TIUY-32
"RTN","TIULO",80,0)
 . . . . S CONV=$J((CONV*(5/9)),3,1)
"RTN","TIULO",81,0)
 . . . . S TIUY=TIUY_" F ["_CONV_" C]"
"RTN","TIULO",82,0)
 . . . S TIUY=TIUY_" ("_VDT
"RTN","TIULO",83,0)
 . . . S TIUCWRAP=$L(TIUY)+17
"RTN","TIULO",84,0)
 . . . I TIUVCNT=1 S TIUY1=TIUY_")",TIUMAXW=59
"RTN","TIULO",85,0)
 . . . E  S TIUY="               "_TIUY,TIUMAXW=74
"RTN","TIULO",86,0)
 . . . S TIUVTEMP=$P(TIUVTEMP,U,17)
"RTN","TIULO",87,0)
 . . . I $L(TIUVTEMP)>0  D
"RTN","TIULO",88,0)
 . . . . S TIUVTEMP=", "_TIUVTEMP
"RTN","TIULO",89,0)
 . . . . F  S TIUI=$F(TIUVTEMP,";") Q:TIUI'>0  D
"RTN","TIULO",90,0)
 . . . . . S TIUVTEMP=$E(TIUVTEMP,1,TIUI-2)_", "_$E(TIUVTEMP,TIUI,999)
"RTN","TIULO",91,0)
 . . . S TIUY=TIUY_TIUVTEMP_")"
"RTN","TIULO",92,0)
 . . . I $L(TIUY)<TIUMAXW S TIUVITMP(TIUVCNT,0)=TIUY
"RTN","TIULO",93,0)
 . . . E  D  ; Wrap the line if it's too long
"RTN","TIULO",94,0)
 . . . . S TIUVCNT2=0,TIUVTEMP="",$P(TIUVTEMP," ",TIUCWRAP)=" "
"RTN","TIULO",95,0)
 . . . . F  Q:$L(TIUY)'>0  D
"RTN","TIULO",96,0)
 . . . . . F TIUI=TIUMAXW:-1:1  Q:$E(TIUY,TIUI,TIUI+1)=", "
"RTN","TIULO",97,0)
 . . . . . I TIUI>1 D
"RTN","TIULO",98,0)
 . . . . . . S TIUVITMP(TIUVCNT+TIUVCNT2,0)=$E(TIUY,1,TIUI)
"RTN","TIULO",99,0)
 . . . . . . S TIUVCNT2=TIUVCNT2+.01
"RTN","TIULO",100,0)
 . . . . . . S TIUY=TIUVTEMP_$E(TIUY,TIUI+2,999)
"RTN","TIULO",101,0)
 . . . . . E  D
"RTN","TIULO",102,0)
 . . . . . . S TIUVITMP(TIUVCNT+TIUVCNT2,0)=TIUY
"RTN","TIULO",103,0)
 . . . . . . S TIUY=""
"RTN","TIULO",104,0)
 I TIUVCNT<2 D
"RTN","TIULO",105,0)
 . S TIUY=$G(TIUY1)
"RTN","TIULO",106,0)
 . K TIUVITMP
"RTN","TIULO",107,0)
 E  S TIUY="~@TIUVITMP"
"RTN","TIULO",108,0)
 Q $G(TIUY)
"RTN","TIULO",109,0)
VITALS(TIUY,DFN,GMRVSTR,TIUEDT,TIULDT,TIUOCC) ; Vital measurements
"RTN","TIULO",110,0)
 N TIUVT,TIUVDT,TIUVDA K ^UTILITY($J,"GMRVD")
"RTN","TIULO",111,0)
 S GMRVSTR(0)=$G(TIUEDT)_U_$G(TIULDT)_U_$G(TIUOCC,1)_"^0"
"RTN","TIULO",112,0)
 I $L($T(EN1^GMRVUT0)) D EN1^GMRVUT0
"RTN","TIULO",113,0)
 I +$D(^UTILITY($J,"GMRVD")) D
"RTN","TIULO",114,0)
 . S TIUVT=""
"RTN","TIULO",115,0)
 . F  S TIUVT=$O(^UTILITY($J,"GMRVD",TIUVT)) Q:TIUVT']""  D
"RTN","TIULO",116,0)
 . . S TIUVDT=0
"RTN","TIULO",117,0)
 . . F  S TIUVDT=$O(^UTILITY($J,"GMRVD",TIUVT,TIUVDT)) Q:+TIUVDT'>0  D
"RTN","TIULO",118,0)
 . . . S TIUVDA=0
"RTN","TIULO",119,0)
 . . . F  S TIUVDA=$O(^UTILITY($J,"GMRVD",TIUVT,TIUVDT,TIUVDA)) Q:+TIUVDA'>0  D
"RTN","TIULO",120,0)
 . . . . S TIUY(TIUVT,TIUVDT,TIUVDA)=$G(^UTILITY($J,"GMRVD",TIUVT,TIUVDT,TIUVDA))
"RTN","TIULO",121,0)
 K ^UTILITY($J,"GMRVD")
"RTN","TIULO",122,0)
 Q
"RTN","TIULO",123,0)
LIPIDS(TIUY,DFN,TIUEDT,TIULDT) ; Get LIPID profile
"RTN","TIULO",124,0)
 N TIUTST,TIUI,TIURY,TIUDT,TIULDT
"RTN","TIULO",125,0)
 S TIUTST=$O(^LAB(60,"B","LIPID PROFILE",0))
"RTN","TIULO",126,0)
 I '+$G(TIUTST) Q
"RTN","TIULO",127,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUTST)
"RTN","TIULO",128,0)
 I '$D(TIUY)!($G(TIUY(1))="No Lab Data") Q
"RTN","TIULO",129,0)
 S TIUI=0 F  S TIUI=$O(@TIUY@(TIUI)) Q:+TIUI'>0  D
"RTN","TIULO",130,0)
 . S TIUTST=$$MAPPER($P(@TIUY@(TIUI),U,17)),TIUDT=+@TIUY@(TIUI)
"RTN","TIULO",131,0)
 . S:TIUDT'=+$G(TIULDT) TIURY("BASELINE LIPID PROFILES",TIUDT)=$$DATE^TIULS(TIUDT,"MM/DD/YY")
"RTN","TIULO",132,0)
 . S TIURY(TIUTST,TIUDT)=$P(@TIUY@(TIUI),U,4)
"RTN","TIULO",133,0)
 F TIUI="CHYLOMI","TURBID","VLDL" K TIURY(TIUI)
"RTN","TIULO",134,0)
 K @TIUY
"RTN","TIULO",135,0)
 I $D(TIURY) M TIUY=TIURY
"RTN","TIULO",136,0)
 Q
"RTN","TIULO",137,0)
MAPPER(TIUX,TIUI) ; Remap test names
"RTN","TIULO",138,0)
 N TIUNM,Y S TIUNM("CHOL","TOTAL CHOLESTEROL")=""
"RTN","TIULO",139,0)
 S (TIUNM("HDL","HDL CHOLESTEROL"),TIUNM("LDL","LDL CHOLESTEROL"))=""
"RTN","TIULO",140,0)
 S TIUNM("TRIGLYC","TRIGLYCERIDES")=""
"RTN","TIULO",141,0)
 S Y=$O(TIUNM(TIUX,"")) I Y']"" S Y=TIUX
"RTN","TIULO",142,0)
 Q Y
"RTN","TIULO",143,0)
TSHT4(DFN,TIUEDT,TIULDT) ; Get TSH/T4
"RTN","TIULO",144,0)
 N TIUY,TIUTSH,TIUT4 S TIUTSH=+$O(^LAB(60,"B","TSH",0))
"RTN","TIULO",145,0)
 S TIUT4=+$O(^LAB(60,"B","T-4",0))
"RTN","TIULO",146,0)
 I '+$G(TIUTSH)!'+$G(TIUT4) G TSHX
"RTN","TIULO",147,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUTSH)
"RTN","TIULO",148,0)
 S TIUTSH=$S($D(TIUY)#2:$P($G(@TIUY@(1)),U,4),1:"____")
"RTN","TIULO",149,0)
 I $D(TIUY)#2 K @TIUY
"RTN","TIULO",150,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUT4)
"RTN","TIULO",151,0)
 S TIUT4=$S($D(TIUY)#2:$P($G(@TIUY@(1)),U,4),1:"____")
"RTN","TIULO",152,0)
 I $D(TIUY)#2 K @TIUY
"RTN","TIULO",153,0)
 S TIUY=TIUTSH_"/"_TIUT4
"RTN","TIULO",154,0)
TSHX Q $G(TIUY)
"RTN","TIULO",155,0)
SGOT(DFN,TIUEDT,TIULDT) ; Get SGOT
"RTN","TIULO",156,0)
 N TIUY,TIUSGOT S TIUSGOT=+$O(^LAB(60,"B","SGOT",0))
"RTN","TIULO",157,0)
 I '+$G(TIUSGOT) Q
"RTN","TIULO",158,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUSGOT)
"RTN","TIULO",159,0)
 S TIUSGOT=$S($D(TIUY)#2:$P($G(@TIUY@(1)),U,4),1:"____")
"RTN","TIULO",160,0)
 I $D(TIUY)#2 K @TIUY
"RTN","TIULO",161,0)
SGOTX Q $G(TIUSGOT)
"RTN","TIULO",162,0)
HGBA1C(DFN,TIUEDT,TIULDT) ; Get Hemoglobin A1C
"RTN","TIULO",163,0)
 N TIUY,TIUHGB S TIUHGB=+$O(^LAB(60,"B","HEMOGLOBIN A1C",0))
"RTN","TIULO",164,0)
 I '+$G(TIUHGB) G HGBX
"RTN","TIULO",165,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUHGB)
"RTN","TIULO",166,0)
 S TIUHGB=$S($D(TIUY)#2:$P($G(@TIUY@(1)),U,4),1:"____")
"RTN","TIULO",167,0)
 I $D(TIUY)#2 K @TIUY
"RTN","TIULO",168,0)
HGBX Q $G(TIUHGB)
"RTN","TIULO",169,0)
URICACID(DFN,TIUEDT,TIULDT) ; Get Uric Acid
"RTN","TIULO",170,0)
 N TIUY,TIUURIC S TIUURIC=+$O(^LAB(60,"B","URIC ACID",0))
"RTN","TIULO",171,0)
 I '+$G(TIUURIC) G URICX
"RTN","TIULO",172,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUURIC)
"RTN","TIULO",173,0)
 S TIUURIC=$S($D(TIUY)#2:$P($G(@TIUY@(1)),U,4),1:"____")
"RTN","TIULO",174,0)
 I $D(TIUY)#2 K @TIUY
"RTN","TIULO",175,0)
URICX Q $G(TIUURIC)
"RTN","TIULO",176,0)
FBG(DFN,TIUEDT,TIULDT) ; Get FBG
"RTN","TIULO",177,0)
 N TIUY,TIUFBG S TIUFBG=+$O(^LAB(60,"B","FBS",0))
"RTN","TIULO",178,0)
 I '+$G(TIUFBG) G FBGX
"RTN","TIULO",179,0)
 D TEST^LR7OR2(.TIUY,DFN,"",$G(TIUEDT),$G(TIULDT),"",TIUFBG)
"RTN","TIULO",180,0)
 S TIUFBG=$S($D(TIUY)#2:$P($G(@TIUY@(1)),U,4),1:"____")
"RTN","TIULO",181,0)
 I $D(TIUY)#2 K @TIUY
"RTN","TIULO",182,0)
FBGX Q $G(TIUFBG)
"RTN","TIULO",183,0)
ADM(DFN) ;Current Admission Date/Time
"RTN","TIULO",184,0)
 N VAIN,J
"RTN","TIULO",185,0)
 D INP^VADPT
"RTN","TIULO",186,0)
 S J=$P(VAIN(7),U,2),J(1)=$P(J,"@",1),J(2)=$P(J,"@",2),J(3)=$E(J(2),1,5),Y=J(1)_" "_J(3) K J
"RTN","TIULO",187,0)
ADMX Q Y
"RTN","TIULO",188,0)
TODAY() ;Today's Date
"RTN","TIULO",189,0)
 N X,Y
"RTN","TIULO",190,0)
 S X=$G(DT) I X'="" S Y=X D DD^%DT
"RTN","TIULO",191,0)
TODAYX Q Y
"RTN","TIULO",192,0)
NOW() ;Current Date/Time
"RTN","TIULO",193,0)
NOWX Q $$DATE^TIULS($$NOW^TIULC,"AMTH DD, CCYY HR:MIN")
"RTN","TIULV")
0^4^B29372861
"RTN","TIULV",1,0)
TIULV ; SLC/JER - Visit/Movement related library ; 11/29/02
"RTN","TIULV",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;,**7,30,55,45,52,148**;Jun 20, 1997
"RTN","TIULV",3,0)
PATPN(TIUY,DFN) ; Get minimum demographics for PN Print
"RTN","TIULV",4,0)
 N VADM,VAIP,VAIN,VA
"RTN","TIULV",5,0)
 D OERR^VADPT
"RTN","TIULV",6,0)
 S TIUY("PNMP")=$E($G(VADM(1)),1,30)
"RTN","TIULV",7,0)
 S TIUY("SSN")=$G(VA("PID"))
"RTN","TIULV",8,0)
 S TIUY("DOB")="DOB:"_$$DATE^TIULS(+$G(VADM(3)),"MM/DD/CCYY")
"RTN","TIULV",9,0)
 D ADD^VADPT
"RTN","TIULV",10,0)
 I $G(VAPA(8)) S TIUY("PH#")=VAPA(8)
"RTN","TIULV",11,0)
 I ($G(VAPA(8))="")!('$D(VAPA(8))) S TIUY("PH#")="**UNKNOWN**"
"RTN","TIULV",12,0)
 S TIUY("INTNM")=$$NAME^VASITE ;Integration Name
"RTN","TIULV",13,0)
 S TIUY("SITE")=$P($$SITE^VASITE,U,2)
"RTN","TIULV",14,0)
 S TIUY("LOCP")="Pt Loc: "_$S(VAIN(4)]"":$P(VAIN(4),U,2)_"  "_VAIN(5),1:"OUTPATIENT")
"RTN","TIULV",15,0)
 Q
"RTN","TIULV",16,0)
 ;
"RTN","TIULV",17,0)
PATVADPT(TIUY,DFN,TIUMVN,TIUVSTR,TIUSDC) ; Extract MAS data
"RTN","TIULV",18,0)
 N VA,VADM,VAEL,VAERR,VAIP,TIUI,TIUWARD,X,Y,TIUTYPE,TIUFTS,TIUSS
"RTN","TIULV",19,0)
 D DEM^VADPT
"RTN","TIULV",20,0)
 S TIUY("PNM")=$G(VADM(1)),TIUY("SSN")=$G(VA("PID"))
"RTN","TIULV",21,0)
 S TIUY("AGE")=$G(VADM(4)),TIUY("PID")="("_$E(TIUY("PNM"))_VA("BID")_")"
"RTN","TIULV",22,0)
 S TIUY("DOB")=$G(VADM(3))
"RTN","TIULV",23,0)
 D ADD^VADPT
"RTN","TIULV",24,0)
 I $G(VAPA(8)) S TIUY("PH#")=VAPA(8)
"RTN","TIULV",25,0)
 I ($G(VAPA(8))="")!('$D(VAPA(8))) S TIUY("PH#")="**UNKNOWN**"
"RTN","TIULV",26,0)
 S TIUY("SEX")=$G(VADM(5))
"RTN","TIULV",27,0)
 ; Below TIU*148
"RTN","TIULV",28,0)
 S TIURC1=+$G(VADM(12)) I TIURC1>0 D 
"RTN","TIULV",29,0)
 . F TIURC=1:1:VADM(12) S TIURC1=VADM(12),TIUY("RACE",TIURC)=$G(VADM(12,TIURC))
"RTN","TIULV",30,0)
 I +$G(VADM(12))=0 S TIUY("RACE")=$G(VADM(8))
"RTN","TIULV",31,0)
 I +$G(TIUSDC) S TIUY("STOP")=$G(TIUSDC)
"RTN","TIULV",32,0)
 I +$G(TIUD13(0)) S TIUY("REFDT")=+$G(TIUD13(0))
"RTN","TIULV",33,0)
 I +$G(TIUMVN),$D(^DGPM(+TIUMVN)) D
"RTN","TIULV",34,0)
 . ; N VLOC,VDT,TIUDIV
"RTN","TIULV",35,0)
 . N VLOC,VDT,TIUDIV
"RTN","TIULV",36,0)
 . S VAIP("E")=TIUMVN D 52^VADPT
"RTN","TIULV",37,0)
 . S TIUI=$S(+$G(VAIP(17,1)):17,1:14)
"RTN","TIULV",38,0)
 . S TIUY("CLAIM")=$G(VAEL(7)),TIUY("PMD")=$G(VAIP(TIUI,5))
"RTN","TIULV",39,0)
 . S TIUY("AMD")=$G(VAIP(18)),TIUY("TS")=$G(VAIP(TIUI,6))
"RTN","TIULV",40,0)
 . S TIUY("SVC")=+$$GET1^DIQ(45.7,+TIUY("TS"),2,"I",,"ERROR")
"RTN","TIULV",41,0)
 . S TIUY("SVC")=TIUY("SVC")_U_$$GET1^DIQ(49,+TIUY("SVC"),.01,"I",,"ERROR")
"RTN","TIULV",42,0)
 . S TIUY("WARD")=$$WARD($G(VAIP(17)))
"RTN","TIULV",43,0)
 . S (TIUY("ADDT"),TIUY("EDT"))=$G(VAIP(3))
"RTN","TIULV",44,0)
 . I +TIUY("WARD") S TIUY("LOC")=$G(^DIC(42,+TIUY("WARD"),44))
"RTN","TIULV",45,0)
 . I +$G(TIUY("LOC")) D
"RTN","TIULV",46,0)
 . . S TIUY("LOC")=TIUY("LOC")_U_$P($G(^SC(+TIUY("LOC"),0)),U)
"RTN","TIULV",47,0)
 . S TIUY("ADDX")=$G(VAIP(9)),TIUY("LDT")=$G(VAIP(17,1))
"RTN","TIULV",48,0)
 . S TIUY("AD#")=+$G(VAIP(13)),TIUY("MTYPE")=$G(VAIP(TIUI,3))
"RTN","TIULV",49,0)
 . S TIUDIV=$P($G(^DIC(42,+TIUY("WARD"),0)),U,11)
"RTN","TIULV",50,0)
 . I +TIUDIV S TIUY("DIV")=TIUDIV_U_$P($G(^DG(40.8,+TIUDIV,0)),U)
"RTN","TIULV",51,0)
 . S VDT=+VAIP(3)
"RTN","TIULV",52,0)
 . S VLOC=$G(^DIC(42,+$P($G(VAIP(13,4)),U),44))
"RTN","TIULV",53,0)
 . S TIUY("VSTR")=VLOC_";"_+TIUY("EDT")_";H"
"RTN","TIULV",54,0)
 . S TIUY("VLOC")=VLOC_U_$P($G(^SC(VLOC,0)),U)
"RTN","TIULV",55,0)
 . S:'+$G(TIUY("LOC")) TIUY("LOC")=TIUY("VLOC")
"RTN","TIULV",56,0)
 I $G(TIUVSTR)]"" S TIUY("VSTR")=TIUVSTR D VSIT(.TIUY,TIUVSTR)
"RTN","TIULV",57,0)
 I '+$G(TIUMVN),'+$G(TIUVSTR) D CURRENT(.TIUY,DFN)
"RTN","TIULV",58,0)
 ; D CURRENT(.TIUY,DFN)
"RTN","TIULV",59,0)
 I +$$PROVIDER^TIUPXAP1($S($D(TIUAUTH):+$G(TIUAUTH),1:DUZ),+$G(TIUY("EDT"))) D
"RTN","TIULV",60,0)
 . S TIUY("SVC")=$$PROVSVC(+$S($D(TIUAUTH):+$G(TIUAUTH),1:DUZ))
"RTN","TIULV",61,0)
 I +$G(TIUY("VSTR")),(+$O(^TIU(8925,"AVSTRV",+DFN,$G(TIUY("VSTR")),0))>0) D
"RTN","TIULV",62,0)
 . N TIUVSIT S TIUVSIT=+$O(^TIU(8925,"AVSTRV",+DFN,$G(TIUY("VSTR")),0))
"RTN","TIULV",63,0)
 . I $P($G(^AUPNVSIT(+TIUVSIT,0)),U,5)'=DFN K ^TIU(8925,"AVSTRV",+DFN,$G(TIUY("VSTR")),TIUVSIT) Q
"RTN","TIULV",64,0)
 . S TIUY("VISIT")=+TIUVSIT_U_+$G(^AUPNVSIT(+TIUVSIT,0))
"RTN","TIULV",65,0)
 ; if pt an inpt + doc class is pn- default to current inpt loc
"RTN","TIULV",66,0)
 S TIUTYPE=$S(+$P($G(TIUTYP(1)),U,2)>0:$P($G(TIUTYP(1)),U,2),1:+$G(TIUTYP))
"RTN","TIULV",67,0)
 Q:+TIUTYPE'>0
"RTN","TIULV",68,0)
 I +$G(TIUMVN),$D(^DPT(DFN,.1)),+$$ISPN^TIULX(TIUTYPE) D
"RTN","TIULV",69,0)
 . I $D(VAIP(14,4)) S TIUY("LOC")=$G(^DIC(42,+VAIP(14,4),44))_U_$P(VAIP(14,4),U,2)
"RTN","TIULV",70,0)
 Q
"RTN","TIULV",71,0)
WARD(DA) ; Compute ward at discharge
"RTN","TIULV",72,0)
 N %,D0,DIC,DIQ,DR,MOVE,X,Y
"RTN","TIULV",73,0)
 I +DA'>0 S Y=$G(VAIP(TIUI,4)) G WARDX
"RTN","TIULV",74,0)
 S DIC="^DGPM(",DIQ(0)="IE",DIQ="MOVE(",DR=200
"RTN","TIULV",75,0)
 D EN^DIQ1
"RTN","TIULV",76,0)
 S X=$G(MOVE(405,DA,200,"E")),DIC=42,DIC(0)="X" D ^DIC
"RTN","TIULV",77,0)
 I +Y'>0 S Y=""
"RTN","TIULV",78,0)
WARDX Q Y
"RTN","TIULV",79,0)
PROVSVC(TIUSER) ; Resolve user's Service
"RTN","TIULV",80,0)
 N TIUY
"RTN","TIULV",81,0)
 S TIUY=$P($G(^VA(200,+TIUSER,5)),U)
"RTN","TIULV",82,0)
 S:+TIUY TIUY=TIUY_U_$P(^DIC(49,+TIUY,0),U)
"RTN","TIULV",83,0)
 Q TIUY
"RTN","TIULV",84,0)
VSIT(TIUY,TIUVSTR) ; Get Visit related info
"RTN","TIULV",85,0)
 N DIC,DIQ,X,Y,DA,DR,VSIT,TIUCT,VAEL,VAERR
"RTN","TIULV",86,0)
 D ELIG^VADPT
"RTN","TIULV",87,0)
 I '$D(TIUY("EDT")) D
"RTN","TIULV",88,0)
 . S TIUY("EDT")=$P(TIUVSTR,";",2)_U_$$DATE^TIULS($P(TIUVSTR,";",2),"AMTH DD, CCYY@HR:MIN")
"RTN","TIULV",89,0)
 S TIUY("LDT")=$G(TIUY("LDT"))
"RTN","TIULV",90,0)
 S TIUCT=$P(TIUVSTR,";",3)
"RTN","TIULV",91,0)
 I TIUCT]"" S TIUY("CAT")=TIUCT_U_$S(TIUCT="A":"AMBULATORY",TIUCT="I":"IN HOSPITAL",TIUCT="H":"HOSPITALIZATION",TIUCT="T":"TELEPHONE",1:"EVENT (HISTORICAL)")
"RTN","TIULV",92,0)
 I TIUCT="E",+$G(TIUVSTR)'>0 Q
"RTN","TIULV",93,0)
 S TIUY("LVL")=$G(TIUY("LVL"))
"RTN","TIULV",94,0)
 S TIUY("ELG")=$G(VAEL(1))
"RTN","TIULV",95,0)
 S TIUY("VLOC")=+$G(TIUVSTR)_U_$P($G(^SC(+$G(TIUVSTR),0)),U)
"RTN","TIULV",96,0)
 I $G(TIUY("LOC"))']"" S TIUY("LOC")=$S($L($G(TIUD12)):$P($G(TIUD12),U,5),+$G(TIUDA):+$P($G(^TIU(8925,+$G(TIUDA),12)),U,5),1:+TIUY("VLOC"))
"RTN","TIULV",97,0)
 S:$P(TIUY("LOC"),U,2)']"" TIUY("LOC")=TIUY("LOC")_U_$P($G(^SC(+TIUY("LOC"),0)),U)
"RTN","TIULV",98,0)
 I '$D(TIUY("DIV")),+$G(TIUY("LOC")) D
"RTN","TIULV",99,0)
 . N TIUDIV,DIC,DR,DA,DIQ,X,Y
"RTN","TIULV",100,0)
 . S DIC=44,DIQ="TIUDIV",DIQ(0)="IE",DA=+TIUY("LOC"),DR="3.5" D EN^DIQ1
"RTN","TIULV",101,0)
 . I '+$G(TIUDIV(44,+DA,3.5,"I")) Q
"RTN","TIULV",102,0)
 . S TIUY("DIV")=TIUDIV(44,+DA,3.5,"I")_U_TIUDIV(44,+DA,3.5,"E")
"RTN","TIULV",103,0)
 I '$D(TIUY("DIV")),'+$G(TIUY("LOC")) D
"RTN","TIULV",104,0)
 . S TIUY("DIV")=+$O(^DG(40.8,"AD",+$G(DUZ(2)),0))
"RTN","TIULV",105,0)
 . S TIUY("DIV")=+TIUY("DIV")_U_$P($G(^DG(40.8,+$G(TIUY("DIV")),0)),U)
"RTN","TIULV",106,0)
 S TIUY("INS")=$G(TIUY("DIV"))
"RTN","TIULV",107,0)
 S TIUY("SC")=$G(TIUY("SC"))
"RTN","TIULV",108,0)
 Q
"RTN","TIULV",109,0)
CURRENT(TIUY,DFN) ; Get current INPATIENT data
"RTN","TIULV",110,0)
 N VAIN D INP^VADPT
"RTN","TIULV",111,0)
 S TIUY("AD#")=$G(VAIN(1)),TIUY("PMD")=$G(VAIN(2))
"RTN","TIULV",112,0)
 S TIUY("TS")=$G(VAIN(3)),TIUY("WARD")=$G(VAIN(4),"0^OUTPATIENT")
"RTN","TIULV",113,0)
 S TIUY("RB")=$G(VAIN(5))
"RTN","TIULV",114,0)
 I +TIUY("WARD") D
"RTN","TIULV",115,0)
 . N DIC,DIQ,DR,DA,TIUDIV,Y
"RTN","TIULV",116,0)
 . S DIC=42,DA=+TIUY("WARD"),DIQ="TIUDIV(",DIQ(0)="IE",DR=".015;44"
"RTN","TIULV",117,0)
 . D EN^DIQ1
"RTN","TIULV",118,0)
 . S TIUY("DIV")=$G(TIUDIV(42,DA,.015,"I"))_U_$G(TIUDIV(42,DA,.015,"E"))
"RTN","TIULV",119,0)
 . S TIUY("LOC")=$G(TIUDIV(42,DA,44,"I"))_U_$G(TIUDIV(42,DA,44,"E"))
"RTN","TIULV",120,0)
 S TIUY("LOC")=$G(TIUY("LOC"))
"RTN","TIULV",121,0)
 I '+$G(TIUY("DIV")) D
"RTN","TIULV",122,0)
 . N DIC,DIQ,DR,DA
"RTN","TIULV",123,0)
 . S DIC=4,DR=".01",DA=+$G(DUZ(2)),DIQ="TIUDIV1"
"RTN","TIULV",124,0)
 . D EN^DIQ1
"RTN","TIULV",125,0)
 . S TIUY("DIV")=+$G(DUZ(2))_U_TIUDIV1(4,DUZ(2),.01)
"RTN","TIULV",126,0)
 Q
"RTN","TIUPRDS2")
0^5^B8256151
"RTN","TIUPRDS2",1,0)
TIUPRDS2 ;SLC/SBW - Header & Footer for Form 10-1000 ; 11/29/02
"RTN","TIUPRDS2",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**7,55,52,148**;Jun 20, 1997
"RTN","TIUPRDS2",3,0)
FOOTER(TIUDA,TIU,TIUFLAG,TIUPAGE,TIUCOPY,TIUHDR) ; Control Pagination
"RTN","TIUPRDS2",4,0)
 ; position, write footer when appropriate
"RTN","TIUPRDS2",5,0)
 ; IF TIUHDR=1, HEADER WILL NOT BE PRINTED
"RTN","TIUPRDS2",6,0)
 S TIUCONT=1 G:$Y+TIUY'>IOSL FOOTEXIT
"RTN","TIUPRDS2",7,0)
 I (IOT'="HFS")!(IOSL<250) F  Q:$Y+4>IOSL  W ! ;moves ftr to pg bottom
"RTN","TIUPRDS2",8,0)
 I $E(IOST)="P" D
"RTN","TIUPRDS2",9,0)
 . W !,"PATIENT: ",^TMP("TIULQ",$J,TIUDA,.02,"E")
"RTN","TIUPRDS2",10,0)
 . W ?47,"VA FORM 10-1000 DISCHARGE SUMMARY"
"RTN","TIUPRDS2",11,0)
 . W !,TIU("SSN"),"  DOB: ",$$DATE^TIULS(+$G(TIU("DOB")),"MM/DD/CCYY")
"RTN","TIUPRDS2",12,0)
 W ?40,$J(TIUCOPY,39)
"RTN","TIUPRDS2",13,0)
 I $E(IOST)="C" S TIUCONT=$$STOP^TIUU G FOOTEXIT:'TIUCONT
"RTN","TIUPRDS2",14,0)
 W @IOF
"RTN","TIUPRDS2",15,0)
 D:'+$G(TIUHDR) HEADER(TIUDA,.TIU,TIUFLAG,.TIUPAGE)
"RTN","TIUPRDS2",16,0)
FOOTEXIT ;
"RTN","TIUPRDS2",17,0)
 Q TIUCONT
"RTN","TIUPRDS2",18,0)
HEADER(TIUDA,TIU,TIUFLAG,TIUPAGE) ; Header
"RTN","TIUPRDS2",19,0)
 N TIULINE,TIUADT,TIUENTDT S $P(TIULINE,"-",80)=""
"RTN","TIUPRDS2",20,0)
 S TIUENTDT=+$G(^TIU(8925,+TIUDA,12))
"RTN","TIUPRDS2",21,0)
 S TIUADT=$S(+$G(TIU("LDT")):TIU("LDT"),+TIUENTDT:TIUENTDT,+$G(TIU("EDT")):TIU("EDT"),1:0)
"RTN","TIUPRDS2",22,0)
 I +$G(TIU("DOB")),+TIUADT S TIU("AGE")=$$AGE(TIUADT,+$G(TIU("DOB")))
"RTN","TIUPRDS2",23,0)
 W:'+TIUFLAG&($E(IOST)="P") ?26,"** WORK COPY - NOT FOR MEDICAL RECORD **"
"RTN","TIUPRDS2",24,0)
 W !,$E($P($G(TIU("DIV")),U,2),1,37),?$X+3,$S(^TMP("TIULQ",$J,TIUDA,.09,"I")="P":^("E"),1:"")
"RTN","TIUPRDS2",25,0)
 W ?50,$$DATE^TIULS($$NOW^TIULC,"MM/DD/CCYY HR:MIN"),?71,"Page: ",$J(TIUPAGE,2)
"RTN","TIUPRDS2",26,0)
 W !,TIULINE
"RTN","TIUPRDS2",27,0)
 ; Removed RACE from header **148**
"RTN","TIUPRDS2",28,0)
 W !,"PATIENT NAME",?33,"| AGE | SEX |    SSN       | CLAIM NUMBER"
"RTN","TIUPRDS2",29,0)
 W !,^TMP("TIULQ",$J,TIUDA,.02,"E"),?33,"| ",$J($G(TIU("AGE")),3),?39,"|",?42,$P($G(TIU("SEX")),U),?45,"| ",$P($G(TIU("SSN")),U),?60,"| ",$G(TIU("CLAIM"))
"RTN","TIUPRDS2",30,0)
 W !,TIULINE
"RTN","TIUPRDS2",31,0)
 G:$E(IOST)="C"&(TIUPAGE>1) HEADERX ;Next lines not displayed on screen if page > 0
"RTN","TIUPRDS2",32,0)
 W !?2,"ADM DATE   |  DISC DATE   | TYPE OF RELEASE   | INP | ABS | WARD NO"
"RTN","TIUPRDS2",33,0)
 W !,$P(^TMP("TIULQ",$J,TIUDA,.07,"E"),"@"),?13,"| ",$P(^TMP("TIULQ",$J,TIUDA,.08,"E"),"@"),?28,"| "
"RTN","TIUPRDS2",34,0)
 W $S($G(^TMP("TIULQ",$J,TIUDA,.08,"E"))]"":$$DISPTYP($P($G(TIU("MTYPE")),U,2)),1:" "),?48,"|"
"RTN","TIUPRDS2",35,0)
 W ?49,$J($P($G(TIU("DAYS")),U),4),?54,"|",?55,$J($P($G(TIU("DAYS")),U,4),4),?60,"| ",$E($P($G(TIU("WARD")),U,2),1,18)
"RTN","TIUPRDS2",36,0)
 W !,TIULINE
"RTN","TIUPRDS2",37,0)
HEADERX ;Header exit
"RTN","TIUPRDS2",38,0)
 S TIUPAGE=TIUPAGE+1
"RTN","TIUPRDS2",39,0)
 Q
"RTN","TIUPRDS2",40,0)
AGE(TIUDT,TIUDOB) ; Compute patient's age as of discharge (or entry)
"RTN","TIUPRDS2",41,0)
 N Y S Y=$$FMDIFF^XLFDT(TIUDT,TIUDOB)\365.25
"RTN","TIUPRDS2",42,0)
 Q Y
"RTN","TIUPRDS2",43,0)
DISPTYP(TEXT) ; NOIS SHE-1098-52553
"RTN","TIUPRDS2",44,0)
 N TIUY
"RTN","TIUPRDS2",45,0)
 I TEXT="NON-SERVICE CONNECTED (OPT-NSC)" S TIUY="NON-SERV (OPT-NSC)"
"RTN","TIUPRDS2",46,0)
 E  I TEXT="CONTINUED ASIH (OTHER FACILITY)" S TIUY="CONTINUED ASIH"
"RTN","TIUPRDS2",47,0)
 E  I TEXT="DISCHARGE FROM NHCU/DOM WHILE ASIH" S TIUY="DISC NHCU/DOM ASIH"
"RTN","TIUPRDS2",48,0)
 E  S TIUY=$E(TEXT,1,18)
"RTN","TIUPRDS2",49,0)
 Q TIUY
"RTN","TIUPS148")
0^7^B2845487
"RTN","TIUPS148",1,0)
TIUPS148 ; SLC/CAM-Creates PATIENT ETHNICITY TIU Object;10/31/02
"RTN","TIUPS148",2,0)
 ;;1.0;TEXT INTEGRATION UTILITIES;**148**;JUN 20,1997
"RTN","TIUPS148",3,0)
 ;
"RTN","TIUPS148",4,0)
 ; This patch was created to define the PATIENT ETHNICITY TIU data object
"RTN","TIUPS148",5,0)
 ; in the TIU DOCUMENT DEFINITION file (8925.1).
"RTN","TIUPS148",6,0)
 ; Once the PATIENT ETHNICITY object is created and functioning this 
"RTN","TIUPS148",7,0)
 ; routine can be deleted. 
"RTN","TIUPS148",8,0)
 ; If a TIU object named PATIENT ETHNICITY already exists on the system
"RTN","TIUPS148",9,0)
 ; in which this routine is being installed the Object Method field (9)
"RTN","TIUPS148",10,0)
 ; of the TIU DOCUMENT DEFINITION file (8925.1) will be overridden with 
"RTN","TIUPS148",11,0)
 ; the National Object Method for PATIENT ETHNICITY.
"RTN","TIUPS148",12,0)
 ;
"RTN","TIUPS148",13,0)
 N TIUDA,TIUOBNM
"RTN","TIUPS148",14,0)
 S TIUDA=0,TIUOBNM="PATIENT ETHNICITY"
"RTN","TIUPS148",15,0)
 S TIUDA=$$FIND1^DIC(8925.1,"","AMX",TIUOBNM,"D^C^B","I $P(^TIU(8925.1,+Y,0),U,4)=""O""","ERR")
"RTN","TIUPS148",16,0)
 I TIUDA'=0 D OBCHG Q
"RTN","TIUPS148",17,0)
 I TIUDA=0 D CREATE Q
"RTN","TIUPS148",18,0)
 ;
"RTN","TIUPS148",19,0)
CREATE ; Creates the PATIENT ETHNICITY TIU Object
"RTN","TIUPS148",20,0)
 ;
"RTN","TIUPS148",21,0)
 N FDA,FDAIEN,MSG
"RTN","TIUPS148",22,0)
 S FDA(8925.1,"+1,",.01)=TIUOBNM
"RTN","TIUPS148",23,0)
 S FDA(8925.1,"+1,",.03)=TIUOBNM
"RTN","TIUPS148",24,0)
 S FDA(8925.1,"+1,",.04)="O"
"RTN","TIUPS148",25,0)
 S FDA(8925.1,"+1,",.05)=DUZ
"RTN","TIUPS148",26,0)
 S FDA(8925.1,"+1,",.07)="11"
"RTN","TIUPS148",27,0)
 S FDA(8925.1,"+1,",9)="S X=$$ETHNIC^TIULO(DFN)"
"RTN","TIUPS148",28,0)
 S FDA(8925.1,"+1,",99)=$H
"RTN","TIUPS148",29,0)
 ;
"RTN","TIUPS148",30,0)
 D UPDATE^DIE("","FDA","FDAIEN","MSG")
"RTN","TIUPS148",31,0)
 ;
"RTN","TIUPS148",32,0)
 I $D(MSG) D  Q
"RTN","TIUPS148",33,0)
 . W !!,"TIU Object failed. The following error message was returned:",!!
"RTN","TIUPS148",34,0)
 . S MSG="" F  S MSG=$O(MSG("DIERR",1,"TEXT",MSG)) Q:MSG=""  W MSG("DIERR",1,"TEXT",MSG),!
"RTN","TIUPS148",35,0)
 ;
"RTN","TIUPS148",36,0)
 W !!,"TIU Object created successfully"
"RTN","TIUPS148",37,0)
 ;
"RTN","TIUPS148",38,0)
 Q
"RTN","TIUPS148",39,0)
OBCHG ; Changes existing PATIENT ETHNICITY Object
"RTN","TIUPS148",40,0)
 N DA,DIE,DR,X,TIUVAR
"RTN","TIUPS148",41,0)
 ; Change Object Method
"RTN","TIUPS148",42,0)
 S TIUVAR="S X=$$ETHNIC^TIULO(DFN)",DIE="^TIU(8925.1,",DR="9///^S X=TIUVAR",DA=TIUDA
"RTN","TIUPS148",43,0)
 D ^DIE
"RTN","TIUPS148",44,0)
 ;
"RTN","TIUPS148",45,0)
 Q
"VER")
8.0^22.0
**END**
**END**

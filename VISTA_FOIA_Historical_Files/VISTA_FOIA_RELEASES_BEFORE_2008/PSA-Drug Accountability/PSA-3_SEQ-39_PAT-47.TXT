$TXT Created by WESLEY,PAUL at MNTVBB.FO-ALBANY.MED.VA.GOV  (KIDS) on Monday, 01/09/06 at 13:22
=============================================================================
Run Date: FEB 21, 2006                     Designation: PSA*3*47
Package : PSA - DRUG ACCOUNTABILITY           Priority: Mandatory
Version : 3        SEQ #39                      Status: Released
                  Compliance Date: MAR 24, 2006
=============================================================================

Associated patches: (v)PSA*3*41    <<= must be installed BEFORE `PSA*3*47'

Subject: UPLOAD ERROR MESSAGE

Category: 
  - Routine

Description:
============

 HD68504 Invoices not being able to be up loaded. This patch corrects 
 problems with the algorithm used to convert invoice files received from 
 McKesson. The process incorrectly inserts zeros to the transaction set 
 control number, which caused the length of the number to exceed the 
 required specification length. An example of the error message is shown 
 below:
   
 Control# 0000000000000000000000000033
 The ST control# (piece 3) should be 4 to 9 characters in length.
  
 NOTE: The technical work on this patch was accomplished by Dave Blocker.
  
  
   ASSOCIATED NOIS/REMEDY:
   =======================
   68504 (original)      BRX-1204-10622  UNDEF ERROR
   121916        RESETST+2^PSABRKU3 error with Upload to VistA
   120275        Upload status report messages cannot be fixed
   93794         Unable to upload invoices
   90535         Error when receiving controlled substances
   68801         PUG-0205-50606  <SUBSCRIPT>SETINV+3~PSAPROC2
   68633         WBP-0105-20495  Problem with invoices
   68500         BIR-1204-30516  Error with uploading
   68383         CLE-1104-40128  Upload Interface error messages
   68336         HUN-1004-20813  <UNDEFINED>N1+3^DICN0
   68164         PHI-0804-20344  Errors in drug accountability upload
   68127         TOM-0704-40924  Please assist with setting up new Prim 
                 Vendor Software.
   127968        <UNDEFINED>N1+3^DICN0
   129030        Receiving error messages for invoice files
   129180        resetst+2^psabrku3
  
   Test Sites:
   ===========
   Biloxi, MS
   Huntington, WV
   Tomah, WI
   Alexandria, LA
   Puget Sound HSC
   Hampton, VA             
  
  
 REMEDY OVERVIEW:
 ================
 HD68505 Invoices not being able to be up loaded causing a variety of 
 errors.
 Problem:
 ========
 This patch corrects problems with the algorithm used to convert invoice 
 files received from McKesson. The process incorrectly inserts zeros to 
 the transaction set control number, which caused the length of the number 
 to exceed the required specification length.
  
 Resolution:
 =========== 
 PSABRKU3 has been modified so as not to be inserting zeros into the 
 invoice control number.
  
 Technical:
 ==========
 The line of code that was inserting zeros has been altered to increment 
 the control counter and retest for uniqueness instead of inserting zeros.
 PSAP47 is a pre init that investigates the current list of invoices 
 waiting processing and modifies the invoice control numbers if necessary 
 into acceptable ranges.
  
 Routine Summary:
 ================
 The second line now reads as follows:
 <TAB>;;3.0; DRUG ACCOUNTABILITY/INVENTORY INTERFACE;**[PATCH LIST]**; 
 10/24/97
  
   CHECK^XTSUMBLD results:
  
   Routine  Before Patch   After Patch     Patch List
   -------  ------------   -----------     ----------
   PSABRKU3 8290916        8302157         26,41,47
   PSAP47   N/A            370994          47
  
   CHECK1^XTSUMBLD results:
  
   Routine  Before Patch   After Patch     Patch List
   -------  ------------   -----------     ----------
   PSABRKU3 21026171       20933321        26,41,47
   PSAP47   N/A            484753          47
  
   Installation Instructions:
   ==========================
   This patch can be loaded with users on the system. Installation will
   take less than 5 minutes.
    
   CAUTION:  You should not be using the DA Upload/Processing options
   during the install..
   
   Suggested time to install: non-peak requirement hours.
   Installation can be queued.
  
   1. Use the INSTALL/CHECK MESSAGE option in the PackMan function.
  
   2. Review your mapped set. If the routines are mapped, they should
      be removed from the mapped set at this time.
  
   3. From the Kernel Installation & Distribution System Option, select
      the Installation Option.
  
   4. From this option, you may select to use the following items:
      (when prompted for INSTALL NAME, enter PSA*3.0*47).
     a. Backup a Transport Global - this option will create a backup
        message of any routines exported with the patch. It will NOT
        backup any other changes such as DDs or templates.
     b. Compare Transport Global to Current System - this option will
        allow you to view all changes that will be made when the patch
        is installed. It compares all components of the patch (routines,
        DDs, templates, etc.).
     c. Verify Checksums in Transport Global - this option will ensure
        the integrity of the routines that are in the transport global.
  
   5. Use the Install Package(s) option and select the package PSA*3.0*47.
  
   6. When prompted "Want KIDS to INHIBIT LOGONs during the install? YES//"
      respond NO.
  
   7. When prompted "Want to DISABLE Scheduled Options, Menu Options, and
      Protocols? YES//" respond NO.
  
   8. If any routines were unmapped as part of step 2, they should be
      returned to the mapped set once the installation has run to
      completion.
  
  
 INSTALLATION EXAMPLE:
 ===================== 
 Select Installation Option: INStall Package(s)
  
 Select INSTALL NAME: PSA*3.0*47       Loaded from Distribution  
 2/16/06@16:23:27
  
 This Distribution was loaded on Feb 16, 2006@16:23:27 with header of 
  
      PSA*3.0*47 
   
    It consisted of the following Install(s):
  
      PSA*3.0*47
  
 Checking Install for Package PSA*3.0*47
  
 Install Questions for PSA*3.0*47
  
  
 Want KIDS to INHIBIT LOGONs during the install? YES// NO
  
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
  
  
 Enter the Device you want to print the Install messages.
  
 You can queue the install by enter a 'Q' at the device prompt.
  
 Enter a '^' to abort the install.
  
  
 DEVICE: HOME//   VIRTUAL TELNET
  
                                    
 PSA*3.0*47                                   
  
 --------------------------------------------------------------------------
 ------
  
  Install Started for PSA*3.0*47 : 
  
                Feb 16, 2006@16:25:45
  
  
  
 Build Distribution Date: Jan 09, 2006
  
         PSA*3*47
  
  Installing Routines:
  
                Feb 16, 2006@16:25:45
  
  
  
  Running Pre-Install Routine: ^PSAP47
  
  
  
  Updating Routine file...
  
  
  
  Updating KIDS files...
  
  
  PSA*3.0*47 Installed. 
  
                Feb 16, 2006@16:25:45
   
 Install Message sent #45169
 --------------------------------------------------------------------------
 ------
           +------------------------------------------------------------+
  
   100%    |             25             50             75               |
  
 Complete  +------------------------------------------------------------+
  
 Install Completed

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: PSABRKU3
    Before: B21026171  After: B20933321  **26,41,47**
Routine Name: PSAP47
    Before:            After:   B484753  **47**

=============================================================================
User Information:
Entered By  : BLOCKER,DAVE                  Date Entered  : AUG 05, 2004
Completed By: TSAIMEUCHONG,BRENDA           Date Completed: FEB 21, 2006
Released By : VECE,VIRGINIA                 Date Released : FEB 21, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

Released PSN*4*103 SEQ #107
Extracted from mail message
**KIDS**:PSN*4.0*103^

**INSTALL NAME**
PSN*4.0*103
"BLD",5341,0)
PSN*4.0*103^NATIONAL DRUG FILE^0^3060418^y
"BLD",5341,1,0)
^^60^60^3060309^
"BLD",5341,1,1,0)
This NATIONAL DRUG FILE (NDF) patch is part of the Patient Financial
"BLD",5341,1,2,0)
Services System (PFSS) project. PFSS patches are being released on various
"BLD",5341,1,3,0)
schedules. Some patch functionality will not be active until a new PFSS
"BLD",5341,1,4,0)
switch is activated during final implementation. PFSS will initially be
"BLD",5341,1,5,0)
implemented at select pilot sites ONLY.
"BLD",5341,1,6,0)
 
"BLD",5341,1,7,0)
The purpose of the PFSS project is to prepare the Veterans Health
"BLD",5341,1,8,0)
Information Systems and Technology Architecture (VistA) environment for
"BLD",5341,1,9,0)
the implementation of a commercial off-the-shelf (COTS) billing
"BLD",5341,1,10,0)
replacement system. The project consists of the implementation of the
"BLD",5341,1,11,0)
billing replacement system, business process improvements, and
"BLD",5341,1,12,0)
enhancements to VistA to support integration with the COTS billing
"BLD",5341,1,13,0)
replacement system. Significant changes to VistA legacy systems and
"BLD",5341,1,14,0)
ancillary packages are necessary.
"BLD",5341,1,15,0)
 
"BLD",5341,1,16,0)
Some of the PFSS software components are not operational until the PFSS
"BLD",5341,1,17,0)
On/Off Switch, distributed with patch IB*2*260, is set to "ON". The
"BLD",5341,1,18,0)
ability for the local site to set the switch to "ON" will be provided at
"BLD",5341,1,19,0)
the appropriate time with the release of a subsequent Integrated Billing
"BLD",5341,1,20,0)
patch.
"BLD",5341,1,21,0)
 
"BLD",5341,1,22,0)
For more information about the PFSS project, review the documentation
"BLD",5341,1,23,0)
accompanying this patch and refer to the following website:
"BLD",5341,1,24,0)
http://vista.med.va.gov/billreplace/.
"BLD",5341,1,25,0)
 
"BLD",5341,1,26,0)
 
"BLD",5341,1,27,0)
Functional Description:
"BLD",5341,1,28,0)
=======================
"BLD",5341,1,29,0)
The Charge Description Master (CDM) is an industry standard financial tool
"BLD",5341,1,30,0)
common to all commercial billing systems and used in virtually every
"BLD",5341,1,31,0)
private hospital. The CDM is a comprehensive listing of all services
"BLD",5341,1,32,0)
performed, drugs supplied, or supplies provided in a particular hospital
"BLD",5341,1,33,0)
along with the value of those services/drugs/items, or charge amounts.
"BLD",5341,1,34,0)
Each of these entries are represented by a Charge Code, and the Charge
"BLD",5341,1,35,0)
Code is made up of a Department Code and Service Code. The Charge Code for
"BLD",5341,1,36,0)
Pharmacy will be the Department Code 160 concatenated with the assigned
"BLD",5341,1,37,0)
Service Code for the drug. The Department Code 160 will not be stored in
"BLD",5341,1,38,0)
any files and the Service Code will be established/approved by a central
"BLD",5341,1,39,0)
CDM Change Control Board (CCB). The implementation of the COTS billing
"BLD",5341,1,40,0)
system requires the VA PRODUCT file (#50.68) to link the service master
"BLD",5341,1,41,0)
Service Code to every Pharmacy prescription fill or refill. Pharmacy will
"BLD",5341,1,42,0)
create and populate a Service Code (in the 600,001 - 699,999 range) for
"BLD",5341,1,43,0)
each entry in the VA PRODUCT file (#50.68). Initially, the Service Code
"BLD",5341,1,44,0)
will be populated by this patch and subsequently the CDM CCB assigned
"BLD",5341,1,45,0)
Service Codes will be distributed as data update patches within the NDF
"BLD",5341,1,46,0)
releases.
"BLD",5341,1,47,0)
 
"BLD",5341,1,48,0)
 
"BLD",5341,1,49,0)
Technical Description:
"BLD",5341,1,50,0)
======================
"BLD",5341,1,51,0)
This NDF patch PSN*4*103 provides the following functionality needed to
"BLD",5341,1,52,0)
support the PFSS project:
"BLD",5341,1,53,0)
 
"BLD",5341,1,54,0)
1. A new SERVICE CODE field (#2000) was added to the VA PRODUCT file
"BLD",5341,1,55,0)
   (#50.68).
"BLD",5341,1,56,0)
2. A Post-install routine that initially populates the new SERVICE
"BLD",5341,1,57,0)
   CODE field (#2000) for every entry in the VA PRODUCT file (#50.68) with
"BLD",5341,1,58,0)
   a six digit number to be within the range 600001-699999. The logic
"BLD",5341,1,59,0)
   comprises of the Internal Entry number (IEN) padding it with zeroes as
"BLD",5341,1,60,0)
   needed and adding a "6" on the front to make up a six digit number.
"BLD",5341,4,0)
^9.64PA^50.68^1
"BLD",5341,4,50.68,0)
50.68
"BLD",5341,4,50.68,2,0)
^9.641^50.68^1
"BLD",5341,4,50.68,2,50.68,0)
VA PRODUCT  (File-top level)
"BLD",5341,4,50.68,2,50.68,1,0)
^9.6411^2000^1
"BLD",5341,4,50.68,2,50.68,1,2000,0)
SERVICE CODE
"BLD",5341,4,50.68,222)
y^n^p^^^^n^^n
"BLD",5341,4,50.68,224)

"BLD",5341,4,"APDD",50.68,50.68)

"BLD",5341,4,"APDD",50.68,50.68,2000)

"BLD",5341,4,"B",50.68,50.68)

"BLD",5341,6)
2^
"BLD",5341,"ABPKG")
n
"BLD",5341,"INID")
^y
"BLD",5341,"INIT")
PSN4P103
"BLD",5341,"KRN",0)
^9.67PA^8989.52^20
"BLD",5341,"KRN",.4,0)
.4
"BLD",5341,"KRN",.4,"NM",0)
^9.68A^^
"BLD",5341,"KRN",.401,0)
.401
"BLD",5341,"KRN",.402,0)
.402
"BLD",5341,"KRN",.403,0)
.403
"BLD",5341,"KRN",.5,0)
.5
"BLD",5341,"KRN",.84,0)
.84
"BLD",5341,"KRN",3.6,0)
3.6
"BLD",5341,"KRN",3.8,0)
3.8
"BLD",5341,"KRN",9.2,0)
9.2
"BLD",5341,"KRN",9.8,0)
9.8
"BLD",5341,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5341,"KRN",9.8,"NM",1,0)
PSN4P103^^0^B264153
"BLD",5341,"KRN",9.8,"NM","B","PSN4P103",1)

"BLD",5341,"KRN",19,0)
19
"BLD",5341,"KRN",19.1,0)
19.1
"BLD",5341,"KRN",101,0)
101
"BLD",5341,"KRN",409.61,0)
409.61
"BLD",5341,"KRN",771,0)
771
"BLD",5341,"KRN",869.2,0)
869.2
"BLD",5341,"KRN",870,0)
870
"BLD",5341,"KRN",8989.51,0)
8989.51
"BLD",5341,"KRN",8989.52,0)
8989.52
"BLD",5341,"KRN",8994,0)
8994
"BLD",5341,"KRN","B",.4,.4)

"BLD",5341,"KRN","B",.401,.401)

"BLD",5341,"KRN","B",.402,.402)

"BLD",5341,"KRN","B",.403,.403)

"BLD",5341,"KRN","B",.5,.5)

"BLD",5341,"KRN","B",.84,.84)

"BLD",5341,"KRN","B",3.6,3.6)

"BLD",5341,"KRN","B",3.8,3.8)

"BLD",5341,"KRN","B",9.2,9.2)

"BLD",5341,"KRN","B",9.8,9.8)

"BLD",5341,"KRN","B",19,19)

"BLD",5341,"KRN","B",19.1,19.1)

"BLD",5341,"KRN","B",101,101)

"BLD",5341,"KRN","B",409.61,409.61)

"BLD",5341,"KRN","B",771,771)

"BLD",5341,"KRN","B",869.2,869.2)

"BLD",5341,"KRN","B",870,870)

"BLD",5341,"KRN","B",8989.51,8989.51)

"BLD",5341,"KRN","B",8989.52,8989.52)

"BLD",5341,"KRN","B",8994,8994)

"BLD",5341,"PRE")

"BLD",5341,"PRET")

"BLD",5341,"QUES",0)
^9.62^^
"BLD",5341,"REQB",0)
^9.611^1^1
"BLD",5341,"REQB",1,0)
PSN*4.0*114^2
"BLD",5341,"REQB","B","PSN*4.0*114",1)

"FIA",50.68)
VA PRODUCT
"FIA",50.68,0)
^PSNDF(50.68,
"FIA",50.68,0,0)
50.68
"FIA",50.68,0,1)
y^n^p^^^^n^^n
"FIA",50.68,0,10)

"FIA",50.68,0,11)

"FIA",50.68,0,"RLRO")

"FIA",50.68,0,"VR")
4.0^PSN
"FIA",50.68,50.68)
1
"FIA",50.68,50.68,2000)

"INIT")
PSN4P103
"MBREQ")
0
"PKG",136,-1)
1^1
"PKG",136,0)
NATIONAL DRUG FILE^PSN^This is the National Drug File Package V 3.14
"PKG",136,20,0)
^9.402P^^
"PKG",136,22,0)
^9.49I^1^1
"PKG",136,22,1,0)
4.0^2981030^2981223^11595
"PKG",136,22,1,"PAH",1,0)
103^3060418^10000000022
"PKG",136,22,1,"PAH",1,1,0)
^^60^60^3060418
"PKG",136,22,1,"PAH",1,1,1,0)
This NATIONAL DRUG FILE (NDF) patch is part of the Patient Financial
"PKG",136,22,1,"PAH",1,1,2,0)
Services System (PFSS) project. PFSS patches are being released on various
"PKG",136,22,1,"PAH",1,1,3,0)
schedules. Some patch functionality will not be active until a new PFSS
"PKG",136,22,1,"PAH",1,1,4,0)
switch is activated during final implementation. PFSS will initially be
"PKG",136,22,1,"PAH",1,1,5,0)
implemented at select pilot sites ONLY.
"PKG",136,22,1,"PAH",1,1,6,0)
 
"PKG",136,22,1,"PAH",1,1,7,0)
The purpose of the PFSS project is to prepare the Veterans Health
"PKG",136,22,1,"PAH",1,1,8,0)
Information Systems and Technology Architecture (VistA) environment for
"PKG",136,22,1,"PAH",1,1,9,0)
the implementation of a commercial off-the-shelf (COTS) billing
"PKG",136,22,1,"PAH",1,1,10,0)
replacement system. The project consists of the implementation of the
"PKG",136,22,1,"PAH",1,1,11,0)
billing replacement system, business process improvements, and
"PKG",136,22,1,"PAH",1,1,12,0)
enhancements to VistA to support integration with the COTS billing
"PKG",136,22,1,"PAH",1,1,13,0)
replacement system. Significant changes to VistA legacy systems and
"PKG",136,22,1,"PAH",1,1,14,0)
ancillary packages are necessary.
"PKG",136,22,1,"PAH",1,1,15,0)
 
"PKG",136,22,1,"PAH",1,1,16,0)
Some of the PFSS software components are not operational until the PFSS
"PKG",136,22,1,"PAH",1,1,17,0)
On/Off Switch, distributed with patch IB*2*260, is set to "ON". The
"PKG",136,22,1,"PAH",1,1,18,0)
ability for the local site to set the switch to "ON" will be provided at
"PKG",136,22,1,"PAH",1,1,19,0)
the appropriate time with the release of a subsequent Integrated Billing
"PKG",136,22,1,"PAH",1,1,20,0)
patch.
"PKG",136,22,1,"PAH",1,1,21,0)
 
"PKG",136,22,1,"PAH",1,1,22,0)
For more information about the PFSS project, review the documentation
"PKG",136,22,1,"PAH",1,1,23,0)
accompanying this patch and refer to the following website:
"PKG",136,22,1,"PAH",1,1,24,0)
http://vista.med.va.gov/billreplace/.
"PKG",136,22,1,"PAH",1,1,25,0)
 
"PKG",136,22,1,"PAH",1,1,26,0)
 
"PKG",136,22,1,"PAH",1,1,27,0)
Functional Description:
"PKG",136,22,1,"PAH",1,1,28,0)
=======================
"PKG",136,22,1,"PAH",1,1,29,0)
The Charge Description Master (CDM) is an industry standard financial tool
"PKG",136,22,1,"PAH",1,1,30,0)
common to all commercial billing systems and used in virtually every
"PKG",136,22,1,"PAH",1,1,31,0)
private hospital. The CDM is a comprehensive listing of all services
"PKG",136,22,1,"PAH",1,1,32,0)
performed, drugs supplied, or supplies provided in a particular hospital
"PKG",136,22,1,"PAH",1,1,33,0)
along with the value of those services/drugs/items, or charge amounts.
"PKG",136,22,1,"PAH",1,1,34,0)
Each of these entries are represented by a Charge Code, and the Charge
"PKG",136,22,1,"PAH",1,1,35,0)
Code is made up of a Department Code and Service Code. The Charge Code for
"PKG",136,22,1,"PAH",1,1,36,0)
Pharmacy will be the Department Code 160 concatenated with the assigned
"PKG",136,22,1,"PAH",1,1,37,0)
Service Code for the drug. The Department Code 160 will not be stored in
"PKG",136,22,1,"PAH",1,1,38,0)
any files and the Service Code will be established/approved by a central
"PKG",136,22,1,"PAH",1,1,39,0)
CDM Change Control Board (CCB). The implementation of the COTS billing
"PKG",136,22,1,"PAH",1,1,40,0)
system requires the VA PRODUCT file (#50.68) to link the service master
"PKG",136,22,1,"PAH",1,1,41,0)
Service Code to every Pharmacy prescription fill or refill. Pharmacy will
"PKG",136,22,1,"PAH",1,1,42,0)
create and populate a Service Code (in the 600,001 - 699,999 range) for
"PKG",136,22,1,"PAH",1,1,43,0)
each entry in the VA PRODUCT file (#50.68). Initially, the Service Code
"PKG",136,22,1,"PAH",1,1,44,0)
will be populated by this patch and subsequently the CDM CCB assigned
"PKG",136,22,1,"PAH",1,1,45,0)
Service Codes will be distributed as data update patches within the NDF
"PKG",136,22,1,"PAH",1,1,46,0)
releases.
"PKG",136,22,1,"PAH",1,1,47,0)
 
"PKG",136,22,1,"PAH",1,1,48,0)
 
"PKG",136,22,1,"PAH",1,1,49,0)
Technical Description:
"PKG",136,22,1,"PAH",1,1,50,0)
======================
"PKG",136,22,1,"PAH",1,1,51,0)
This NDF patch PSN*4*103 provides the following functionality needed to
"PKG",136,22,1,"PAH",1,1,52,0)
support the PFSS project:
"PKG",136,22,1,"PAH",1,1,53,0)
 
"PKG",136,22,1,"PAH",1,1,54,0)
1. A new SERVICE CODE field (#2000) was added to the VA PRODUCT file
"PKG",136,22,1,"PAH",1,1,55,0)
   (#50.68).
"PKG",136,22,1,"PAH",1,1,56,0)
2. A Post-install routine that initially populates the new SERVICE
"PKG",136,22,1,"PAH",1,1,57,0)
   CODE field (#2000) for every entry in the VA PRODUCT file (#50.68) with
"PKG",136,22,1,"PAH",1,1,58,0)
   a six digit number to be within the range 600001-699999. The logic
"PKG",136,22,1,"PAH",1,1,59,0)
   comprises of the Internal Entry number (IEN) padding it with zeroes as
"PKG",136,22,1,"PAH",1,1,60,0)
   needed and adding a "6" on the front to make up a six digit number.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","PSN4P103")
0^1^B264153
"RTN","PSN4P103",1,0)
PSN4P103 ;BIR/MHA-populating the service code field ;17 Feb 00 / 8:12 AM
"RTN","PSN4P103",2,0)
 ;;4.0;NATIONAL DRUG FILE;**103**;13 May 05
"RTN","PSN4P103",3,0)
 ;
"RTN","PSN4P103",4,0)
 S DA=0 F  S DA=$O(^PSNDF(50.68,DA)) Q:'DA  D
"RTN","PSN4P103",5,0)
 .S NA="0000"_DA,NA="6"_$E(NA,($L(NA)-4),$L(NA))
"RTN","PSN4P103",6,0)
 .W "." S DIE="^PSNDF(50.68,",DR="2000////"_NA D ^DIE
"RTN","PSN4P103",7,0)
 K DA,NA,DIE,DR Q
"VER")
8.0^22.0
"^DD",50.68,50.68,2000,0)
SERVICE CODE^NJ6,0a^^PFS;1^K:+X'=X!(X>699999)!(X<600001)!(X?.E1"."1N.N) X
"^DD",50.68,50.68,2000,3)
Type a Number between 600001 and 699999, 0 Decimal Digits
"^DD",50.68,50.68,2000,21,0)
^.001^2^2^3050614^^^^
"^DD",50.68,50.68,2000,21,1,0)
This field contains a Charge Description Master (CDM) Change Control board
"^DD",50.68,50.68,2000,21,2,0)
assigned Service Code. The value should be a number between 600001-699999.
"^DD",50.68,50.68,2000,23,0)
^.001^8^8^3050614^^
"^DD",50.68,50.68,2000,23,1,0)
This field was introduced as part of the Patient Financial Services System
"^DD",50.68,50.68,2000,23,2,0)
(PFSS) project, to implement a new COTS billing system. It requires that
"^DD",50.68,50.68,2000,23,3,0)
every pharmacy item passed to the external billing system to have a
"^DD",50.68,50.68,2000,23,4,0)
Service Code assigned within the range 600001-699999. Pharmacy application
"^DD",50.68,50.68,2000,23,5,0)
will maintain a CDM/Service Code for every dispensed item. As an initial
"^DD",50.68,50.68,2000,23,6,0)
step this field was populated by taking the IEN from the VA PRODUCT file
"^DD",50.68,50.68,2000,23,7,0)
(#50.68), padding it with zeroes as needed and placing a "6" on the front
"^DD",50.68,50.68,2000,23,8,0)
to make up a six digit number.
"^DD",50.68,50.68,2000,"AUDIT")
y
"^DD",50.68,50.68,2000,"DT")
3050614
"BLD",5341,6)
^107
**END**
**END**

Released PSA*3*25 SEQ #21
Extracted from mail message
**KIDS**:PSA*3.0*25^

**INSTALL NAME**
PSA*3.0*25
"BLD",2542,0)
PSA*3.0*25^DRUG ACCOUNTABILITY^0^3010208^y
"BLD",2542,1,0)
^9.61A^8^8^3010208^^^^
"BLD",2542,1,1,0)
 There is a problem with the routine that is called when a picklist
"BLD",2542,1,2,0)
 is filed away in Unit Dose. The routine improperly processed the incoming
"BLD",2542,1,3,0)
 data. The processing method created incomplete data records of drug
"BLD",2542,1,4,0)
 transactions.
"BLD",2542,1,5,0)
 
"BLD",2542,1,6,0)
 To correct this, the program does not rely on a temporary global being
"BLD",2542,1,7,0)
 created. The data is extracted directly from the UNIT DOSE PICK LIST 
"BLD",2542,1,8,0)
 STATS (#57.6) file.
"BLD",2542,4,0)
^9.64PA^58.812^1
"BLD",2542,4,58.812,0)
58.812
"BLD",2542,4,58.812,222)
y^n^f^^n^^y^o^n
"BLD",2542,4,"B",58.812,58.812)

"BLD",2542,"KRN",0)
^9.67PA^^
"BLD",2542,"KRN",.4,0)
.4
"BLD",2542,"KRN",.4,"NM",0)
^9.68A^^0
"BLD",2542,"KRN",.401,0)
.401
"BLD",2542,"KRN",.401,"NM",0)
^9.68A^^0
"BLD",2542,"KRN",.402,0)
.402
"BLD",2542,"KRN",.402,"NM",0)
^9.68A^^0
"BLD",2542,"KRN",.403,0)
.403
"BLD",2542,"KRN",.5,0)
.5
"BLD",2542,"KRN",.84,0)
.84
"BLD",2542,"KRN",3.6,0)
3.6
"BLD",2542,"KRN",3.8,0)
3.8
"BLD",2542,"KRN",9.2,0)
9.2
"BLD",2542,"KRN",9.8,0)
9.8
"BLD",2542,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",2542,"KRN",9.8,"NM",1,0)
PSAPSI5^^0^B6021777
"BLD",2542,"KRN",9.8,"NM",2,0)
PSAUDP^^0^B16331334
"BLD",2542,"KRN",9.8,"NM","B","PSAPSI5",1)

"BLD",2542,"KRN",9.8,"NM","B","PSAUDP",2)

"BLD",2542,"KRN",19,0)
19
"BLD",2542,"KRN",19.1,0)
19.1
"BLD",2542,"KRN",101,0)
101
"BLD",2542,"KRN",409.61,0)
409.61
"BLD",2542,"KRN",771,0)
771
"BLD",2542,"KRN",869.2,0)
869.2
"BLD",2542,"KRN",870,0)
870
"BLD",2542,"KRN",8994,0)
8994
"BLD",2542,"KRN","B",.4,.4)

"BLD",2542,"KRN","B",.401,.401)

"BLD",2542,"KRN","B",.402,.402)

"BLD",2542,"KRN","B",.403,.403)

"BLD",2542,"KRN","B",.5,.5)

"BLD",2542,"KRN","B",.84,.84)

"BLD",2542,"KRN","B",3.6,3.6)

"BLD",2542,"KRN","B",3.8,3.8)

"BLD",2542,"KRN","B",9.2,9.2)

"BLD",2542,"KRN","B",9.8,9.8)

"BLD",2542,"KRN","B",19,19)

"BLD",2542,"KRN","B",19.1,19.1)

"BLD",2542,"KRN","B",101,101)

"BLD",2542,"KRN","B",409.61,409.61)

"BLD",2542,"KRN","B",771,771)

"BLD",2542,"KRN","B",869.2,869.2)

"BLD",2542,"KRN","B",870,870)

"BLD",2542,"KRN","B",8994,8994)

"BLD",2542,"QUES",0)
^9.62^^
"BLD",2542,"REQB",0)
^9.611^1^1
"BLD",2542,"REQB",1,0)
PSA*3.0*14^0
"BLD",2542,"REQB","B","PSA*3.0*14",1)

"BLD",2542,"REQG",0)
^9.611^^
"DATA",58.812,1,0)
AMERISOURCE
"DATA",58.812,1,"OU",0)
^58.8122A^^0
"DATA",58.812,1,"SUP",0)
^58.8121A^^0
"DATA",58.812,1,"T",0)
^58.8123A^^0
"FIA",58.812)
DA UPLOAD
"FIA",58.812,0)
^PSD(58.812,
"FIA",58.812,0,0)
58.812
"FIA",58.812,0,1)
y^n^f^^n^^y^o^n
"FIA",58.812,0,10)

"FIA",58.812,0,11)

"FIA",58.812,0,"RLRO")

"FIA",58.812,0,"VR")
3.0^PSA
"FIA",58.812,58.812)
0
"FIA",58.812,58.8121)
0
"FIA",58.812,58.8122)
0
"FIA",58.812,58.8123)
0
"MBREQ")
0
"PKG",287,-1)
1^1
"PKG",287,0)
DRUG ACCOUNTABILITY^PSA^Drug Accountability Inventory and Tracking module.
"PKG",287,22,0)
^9.49I^1^1
"PKG",287,22,1,0)
3.0^2971024^2971030^11595
"PKG",287,22,1,"PAH",1,0)
25^3010208
"PKG",287,22,1,"PAH",1,1,0)
^^8^8^3010208
"PKG",287,22,1,"PAH",1,1,1,0)
 There is a problem with the routine that is called when a picklist
"PKG",287,22,1,"PAH",1,1,2,0)
 is filed away in Unit Dose. The routine improperly processed the incoming
"PKG",287,22,1,"PAH",1,1,3,0)
 data. The processing method created incomplete data records of drug
"PKG",287,22,1,"PAH",1,1,4,0)
 transactions.
"PKG",287,22,1,"PAH",1,1,5,0)
 
"PKG",287,22,1,"PAH",1,1,6,0)
 To correct this, the program does not rely on a temporary global being
"PKG",287,22,1,"PAH",1,1,7,0)
 created. The data is extracted directly from the UNIT DOSE PICK LIST 
"PKG",287,22,1,"PAH",1,1,8,0)
 STATS (#57.6) file.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","PSAPSI5")
0^1^B6021777
"RTN","PSAPSI5",1,0)
PSAPSI5 ;BIR/LTL,JMB-Nightly Background Job - CONT'D ;7/23/97
"RTN","PSAPSI5",2,0)
 ;;3.0; DRUG ACCOUNTABILITY/INVENTORY INTERFACE;**14,25**; 10/24/97
"RTN","PSAPSI5",3,0)
 ;This routine gathers IV and unit dose dispensing data.
"RTN","PSAPSI5",4,0)
 ;
"RTN","PSAPSI5",5,0)
 ;References to ^PS(50.8 are covered by IA 771 (#771)
"RTN","PSAPSI5",6,0)
 ;Reference to ^PS(57.6 are covered by IA #772
"RTN","PSAPSI5",7,0)
 ;
"RTN","PSAPSI5",8,0)
SOL S PSAW=PSADT(3),PSADRUG(3)=$O(^PS(50.8,+PSAIV,2,+PSADT(4),2,"AC",52.7,+PSADRUG(2),0))
"RTN","PSAPSI5",9,0)
 F  S PSAW=$O(^PS(50.8,+PSAIV,2,+PSADT(4),2,+PSADRUG(3),3,PSAW)) Q:'PSAW  S PSAW(1)=PSAW D:$O(^PSD(58.8,"AB",PSAW,0))=PSALOC
"RTN","PSAPSI5",10,0)
 .S PSAQ=$G(PSAQ)+$P($G(^PS(50.8,+PSAIV,2,+PSADT(4),2,+PSADRUG(3),3,PSAW,0)),"^",2)-$P($G(^(0)),"^",5)
"RTN","PSAPSI5",11,0)
 S:PSAQ ^TMP("PSA",$J,+PSADRUG,PSADT(4))=$G(^TMP("PSA",$J,+PSADRUG,PSADT(4)))+PSAQ S (PSAQ,PSAW)=0
"RTN","PSAPSI5",12,0)
 Q
"RTN","PSAPSI5",13,0)
EN ; Entry point Unit Dose dispensing, returns, extras, & pre-exchange
"RTN","PSAPSI5",14,0)
 Q  ;DAVE B (PSA*3*25)
"RTN","PSAPSI5",15,0)
 S X1=DT,X2=1 D C^%DTC S ^XTMP("PSAPL",0)=X
"RTN","PSAPSI5",16,0)
 G:$G(PSGRTN)="PSGPLF" PICKLST
"RTN","PSAPSI5",17,0)
 ;
"RTN","PSAPSI5",18,0)
 ;Call must have came from PSGAMSA then, instead of PSGPLF
"RTN","PSAPSI5",19,0)
 I $D(PSGY) S PSAQTY=PSGY
"RTN","PSAPSI5",20,0)
 ;drug stocked in Drug Acct Location?
"RTN","PSAPSI5",21,0)
 G:'+PSGDRG!('$D(^PSD(58.8,"C",+PSGDRG))) EXIT
"RTN","PSAPSI5",22,0)
 G:'$D(PSGWARD) EXIT
"RTN","PSAPSI5",23,0)
 ;DAVE B (PSA*3*14) Check for more than one pharmacy location
"RTN","PSAPSI5",24,0)
 ;associated with the Ward
"RTN","PSAPSI5",25,0)
 S PSALOC1=""
"RTN","PSAPSI5",26,0)
1 S PSALOC1=$O(^PSD(58.8,"AB",PSGWARD,PSALOC1)) I PSALOC1="" G EXIT
"RTN","PSAPSI5",27,0)
 I 'PSALOC1!('$D(^PSD(58.8,"ADISP","P",+PSALOC1)))!('+$P($G(^PSD(58.8,+PSALOC1,0)),"^",3)) G 1
"RTN","PSAPSI5",28,0)
 I +$G(^PSD(58.8,+PSALOC1,"I")),+^PSD(58.8,+PSALOC1,"I")'>DT G 1
"RTN","PSAPSI5",29,0)
 S PSAIPST=+$P($G(^PSD(58.8,PSALOC1,0)),"^",3)
"RTN","PSAPSI5",30,0)
 D NOW^%DTC
"RTN","PSAPSI5",31,0)
 S ^XTMP("PSAPL",+PSAIPST,+PSGDRG,+$S($D(PSGPLFDT):PSGPLFDT,1:$P(%,".")))=$G(^XTMP("PSAPL",+PSAIPST,+PSGDRG,+$S($D(PSGPLFDT):PSGPLFDT,1:$P(%,"."))))+$G(PSAQTY)
"RTN","PSAPSI5",32,0)
EXIT K PSGBK,PSADA,PSGRTN,PSALOC1,PSAQTY
"RTN","PSAPSI5",33,0)
 Q
"RTN","PSAPSI5",34,0)
PICKLST ;Pick List dispensing and returns.
"RTN","PSAPSI5",35,0)
 I '+D3!('$D(^PSD(58.8,"C",D3))) G EXIT
"RTN","PSAPSI5",36,0)
 S PSAQTY=$P($G(^PS(57.6,D0,1,D1,1,D2,1,D3,0)),"^",2)
"RTN","PSAPSI5",37,0)
 S PSALOC1=""
"RTN","PSAPSI5",38,0)
2 S PSALOC1=$O(^PSD(58.8,"AB",D1,PSALOC1)) I PSALOC1="" G EXIT
"RTN","PSAPSI5",39,0)
 I 'PSALOC1!('$D(^PSD(58.8,"ADISP","P",+PSALOC1)))!('+$P($G(^PSD(58.8,+PSALOC1,0)),"^",3)) G 2
"RTN","PSAPSI5",40,0)
 I +$G(^PSD(58.8,+PSALOC1,"I")) G 2
"RTN","PSAPSI5",41,0)
 S PSAIPST=+$P($G(^PSD(58.8,PSALOC1,0)),"^",3)
"RTN","PSAPSI5",42,0)
 S ^XTMP("PSAPL",+PSAIPST,+D3,+D0)=$G(^XTMP("PSAPL",+PSAIPST,+D3,+D0))+$G(PSAQTY)
"RTN","PSAPSI5",43,0)
 Q
"RTN","PSAUDP")
0^2^B16331334
"RTN","PSAUDP",1,0)
PSAUDP ;BIR/LTL,JMB-Nightly Background Job - CONT'D ;7/23/97
"RTN","PSAUDP",2,0)
 ;;3.0; DRUG ACCOUNTABILITY/INVENTORY INTERFACE;**6,3,12,14,25**; 10/24/97
"RTN","PSAUDP",3,0)
 ;
"RTN","PSAUDP",4,0)
 ;Reference to ^PS(57.6 are covered by IA #772
"RTN","PSAUDP",5,0)
PICKLST ;ask for parameters PSA*3*25
"RTN","PSAUDP",6,0)
 I '$D(^PSD(58.812,1,"T","B","UNIT DOSE"))!('$D(^PSD(58.812,1,"T"))) D
"RTN","PSAUDP",7,0)
 .S ^PSD(58.812,1,"T",0)="^58.8123A^1^1"
"RTN","PSAUDP",8,0)
 .S X="T-2W" D ^%DT S ^PSD(58.812,1,"T",1,0)="UNIT DOSE^"_Y_"^",X="T-1W" D ^%DT S $P(^PSD(58.812,1,"T",1,0),"^",3)=Y K X,Y
"RTN","PSAUDP",9,0)
 .S ^PSD(58.812,1,"T","B","UNIT DOSE",1)=""
"RTN","PSAUDP",10,0)
 S XX=$O(^PSD(58.812,1,"T","B","UNIT DOSE",0)) Q:XX'>0  S JOBIEN=XX D NOW^%DTC S STRTDATE=%,PARDATA=$G(^PSD(58.812,1,"T",JOBIEN,0))
"RTN","PSAUDP",11,0)
 S PSABGN=$P(PARDATA,"^",2),PSAEND=$P(PARDATA,"^",3)
"RTN","PSAUDP",12,0)
 S X="T-7" D ^%DT I Y'=PSAEND G DONE
"RTN","PSAUDP",13,0)
 S $P(^PSD(58.812,1,"T",JOBIEN,0),"^",2)=PSAEND,X1=PSAEND,X2=7 D C^%DTC S $P(^PSD(58.812,1,"T",JOBIEN,0),"^",3)=X ;Reset date parameters
"RTN","PSAUDP",14,0)
 ;Go back two weeks, gather 1 weeks worth of data
"RTN","PSAUDP",15,0)
 S PSAD0=PSABGN-.000001
"RTN","PSAUDP",16,0)
 S PSAEND=PSAEND_".2359"
"RTN","PSAUDP",17,0)
DATE ;Loop through dates
"RTN","PSAUDP",18,0)
 S PSAD0=$O(^PS(57.6,PSAD0)) G DONE:PSAD0'>0 G DONE:PSAD0>PSAEND K PSAD1
"RTN","PSAUDP",19,0)
WRD S PSAD1=$S('$D(PSAD1):$O(^PS(57.6,PSAD0,1,0)),1:$O(^PS(57.6,PSAD0,1,PSAD1))) G DATE:PSAD1'>0 K PSAD2
"RTN","PSAUDP",20,0)
PVDR ;Loop through providers
"RTN","PSAUDP",21,0)
 S PSAD2=$S('$D(PSAD2):$O(^PS(57.6,PSAD0,1,PSAD1,1,0)),1:$O(^PS(57.6,PSAD0,1,PSAD1,1,PSAD2))) G WRD:PSAD2'>0 K PSAD3
"RTN","PSAUDP",22,0)
DRG S PSAD3=$S('$D(PSAD3):$O(^PS(57.6,PSAD0,1,PSAD1,1,PSAD2,1,0)),1:$O(^PS(57.6,PSAD0,1,PSAD1,1,PSAD2,1,PSAD3))) G PVDR:PSAD3'>0 S DATA=$G(^PS(57.6,PSAD0,1,PSAD1,1,PSAD2,1,PSAD3,0))
"RTN","PSAUDP",23,0)
 S PSAIP=PSAD1,PSA50=PSAD3,PSADT=PSAD0 K PSALOC
"RTN","PSAUDP",24,0)
LOC S PSALOC=$S('$D(PSALOC):$O(^PSD(58.8,"AB",PSAD1,0)),1:$O(^PSD(58.8,"AB",PSAD1,PSALOC))) G DRG:PSALOC'>0 I $D(^PSD(58.8,PSALOC,"I")),$P($G(^PSD(58.8,PSALOC,"I")),"^")'>DT G LOC
"RTN","PSAUDP",25,0)
 S PSAQTY=$P($G(DATA),"^",2)-$P($G(DATA),"^",4)
"RTN","PSAUDP",26,0)
 I $D(^PSD(58.8,PSALOC,1,PSA50)) D PROCESS
"RTN","PSAUDP",27,0)
 G LOC
"RTN","PSAUDP",28,0)
 ;
"RTN","PSAUDP",29,0)
 Q
"RTN","PSAUDP",30,0)
DONE ;
"RTN","PSAUDP",31,0)
END K DA,DATA,DIC,DIE,DR,PSA50,PSAD0,PSAD1,PSAD2,PSAD3,PSADT,PSAIP,PSALOC,PSANUM,PSAQTY,X,Y,PSABGN,PSAEND,PARDATA,JOBIEN,X
"RTN","PSAUDP",32,0)
 Q
"RTN","PSAUDP",33,0)
PROCESS ;Stuff last UD dispensing fld with DT
"RTN","PSAUDP",34,0)
 F  L +^PSD(58.8,PSALOC,0):0 I  Q
"RTN","PSAUDP",35,0)
 S DIE="^PSD(58.8,",DA=PSALOC,DR="27////"_PSADT D ^DIE K DIE,DA,DR
"RTN","PSAUDP",36,0)
 ;Subtract dispensing from balance
"RTN","PSAUDP",37,0)
 S PSABAL=$P($G(^PSD(58.8,PSALOC,1,PSA50,0)),"^",4)
"RTN","PSAUDP",38,0)
 S $P(^PSD(58.8,PSALOC,1,PSA50,0),"^",4)=PSABAL-$G(PSAQTY)
"RTN","PSAUDP",39,0)
 ;If no monthly activity node, add node with beginning balance.
"RTN","PSAUDP",40,0)
 I '$D(^PSD(58.8,PSALOC,1,PSA50,5,+$E(PSADT,1,5)*100,0)) D
"RTN","PSAUDP",41,0)
 .S DIC="^PSD(58.8,PSALOC,1,PSA50,5,",DIC(0)="L",DIC("P")=$P(^DD(58.8001,20,0),U,2),(X,DINUM)=$E(PSADT,1,5)*100,DA(2)=PSALOC,DA(1)=PSA50
"RTN","PSAUDP",42,0)
 .S DIC("DR")="1////^S X=$G(PSABAL)",DLAYGO=58.8 D ^DIC K DIC,DLAYGO
"RTN","PSAUDP",43,0)
 .;Add current month's node and stuff beginning & ending balance.
"RTN","PSAUDP",44,0)
 .S DIC="^PSD(58.8,PSALOC,1,PSA50,5,",DIC(0)="L",(X,DINUM)=$E(PSADT-100-(+$E(PSADT,4,5)=1*8800),1,5)*100,DA(2)=PSALOC,DA(1)=PSA50,DLAYGO=58.8 D ^DIC K DIC,DLAYGO S DA=+Y
"RTN","PSAUDP",45,0)
 .S DIE="^PSD(58.8,PSALOC,1,PSA50,5,",DA(2)=PSALOC,DA(1)=PSA50,DR="3////^S X=$G(PSABAL)" D ^DIE K DIE
"RTN","PSAUDP",46,0)
 ;Stuff total dispensed
"RTN","PSAUDP",47,0)
 S DIE="^PSD(58.8,PSALOC,1,PSA50,5,",DA(2)=PSALOC,DA(1)=PSA50,DA=$E(PSADT,1,5)*100,DR="9////^S X=$P($G(^(0)),U,6)+PSAQTY" D ^DIE K DIE,DA
"RTN","PSAUDP",48,0)
 ;Get next transaction node number
"RTN","PSAUDP",49,0)
FIND S PSANUM=$P(^PSD(58.81,0),"^",3)+1 I $D(^PSD(58.81,PSANUM)) S $P(^PSD(58.81,0),"^",3)=$P(^PSD(58.81,0),"^",3)+1 G FIND
"RTN","PSAUDP",50,0)
 ;Add next transaction node with data.
"RTN","PSAUDP",51,0)
 S DIC="^PSD(58.81,",DIC(0)="L",DLAYGO=58.81,(DINUM,X)=PSANUM D ^DIC K DIC,DLAYGO
"RTN","PSAUDP",52,0)
 S DIE="^PSD(58.81,",DA=PSANUM
"RTN","PSAUDP",53,0)
 S DR="1////2;2////^S X=PSALOC;3////^S X=PSADT;4////^S X=PSA50;5////^S X=PSAQTY;9////^S X=$G(PSABAL)" D ^DIE K DIE,DA
"RTN","PSAUDP",54,0)
 ;Add activity node
"RTN","PSAUDP",55,0)
 S DIC="^PSD(58.8,PSALOC,1,PSA50,4,",DIC(0)="L",(X,DINUM)=PSANUM,DIC("P")=$P(^DD(58.8001,19,0),"^",2),DA(2)=PSALOC,DA(1)=PSA50,DLAYGO=58.8 D ^DIC K DA,DIC,DLAYGO
"RTN","PSAUDP",56,0)
 L -^PSD(58.8,PSALOC,0)
"RTN","PSAUDP",57,0)
 Q
"VER")
8.0^22.0
"^DD",58.812,58.812,0)
FIELD^^3^4
"^DD",58.812,58.812,0,"DDA")
N
"^DD",58.812,58.812,0,"DT")
3010103
"^DD",58.812,58.812,0,"IX","B",58.812,.01)

"^DD",58.812,58.812,0,"NM","DA UPLOAD")

"^DD",58.812,58.812,.01,0)
PRIME VENDOR^RF^^0;1^K:$L(X)>30!($L(X)<3)!'(X'?1P.E) X
"^DD",58.812,58.812,.01,1,0)
^.1
"^DD",58.812,58.812,.01,1,1,0)
58.812^B
"^DD",58.812,58.812,.01,1,1,1)
S ^PSD(58.812,"B",$E(X,1,30),DA)=""
"^DD",58.812,58.812,.01,1,1,2)
K ^PSD(58.812,"B",$E(X,1,30),DA)
"^DD",58.812,58.812,.01,3)
Answer must be 3-30 characters in length.
"^DD",58.812,58.812,.01,21,0)
^.001^1^1^3001002^^
"^DD",58.812,58.812,.01,21,1,0)
 This field identifies the sender of the invoice data.
"^DD",58.812,58.812,.01,"DT")
3000929
"^DD",58.812,58.812,1,0)
SUPPLY ITEM^58.8121A^^SUP;0
"^DD",58.812,58.812,2,0)
ORDER UNIT^58.8122A^^OU;0
"^DD",58.812,58.812,3,0)
BACK GROUND JOB^58.8123A^^T;0
"^DD",58.812,58.8121,0)
SUPPLY ITEM SUB-FIELD^^1^2
"^DD",58.812,58.8121,0,"DT")
3000929
"^DD",58.812,58.8121,0,"IX","B",58.8121,.01)

"^DD",58.812,58.8121,0,"NM","SUPPLY ITEM")

"^DD",58.812,58.8121,0,"UP")
58.812
"^DD",58.812,58.8121,.01,0)
SUPPLY ITEM^F^^0;1^K:$L(X)>60!($L(X)<3) X
"^DD",58.812,58.8121,.01,1,0)
^.1
"^DD",58.812,58.8121,.01,1,1,0)
58.8121^B
"^DD",58.812,58.8121,.01,1,1,1)
S ^PSD(58.812,DA(1),"SUP","B",$E(X,1,30),DA)=""
"^DD",58.812,58.8121,.01,1,1,2)
K ^PSD(58.812,DA(1),"SUP","B",$E(X,1,30),DA)
"^DD",58.812,58.8121,.01,3)
Answer must be 3-60 characters in length.
"^DD",58.812,58.8121,.01,21,0)
^^5^5^3000929^
"^DD",58.812,58.8121,.01,21,1,0)
 This multiple contains a list of items transported from the Prime Vendor
"^DD",58.812,58.8121,.01,21,2,0)
 to VISTA as supply items. This field has a corresponding entry in the
"^DD",58.812,58.8121,.01,21,3,0)
 VSN field. During uploading/processing of invoices, line items uploaded
"^DD",58.812,58.8121,.01,21,4,0)
 from the invoice are compared against the values stored here. By matching
"^DD",58.812,58.8121,.01,21,5,0)
 these items automatically, the processing time is greatly reduced.
"^DD",58.812,58.8121,.01,"DT")
3000929
"^DD",58.812,58.8121,1,0)
VSN^F^^0;2^K:$L(X)>15!($L(X)<1) X
"^DD",58.812,58.8121,1,3)
Answer must be 1-15 characters in length.
"^DD",58.812,58.8121,1,21,0)
^^5^5^3000929^
"^DD",58.812,58.8121,1,21,1,0)
 This Vendor Stock Number (VSN) is matched to the Supply Item field. During
"^DD",58.812,58.8121,1,21,2,0)
 the upload/processing of invoice data, if an item cannot be located in
"^DD",58.812,58.8121,1,21,3,0)
 VISTA according to the NDC, this field is checked for a match. This 
"^DD",58.812,58.8121,1,21,4,0)
 automatic matching of items greatly decreases the amount of time needed
"^DD",58.812,58.8121,1,21,5,0)
 to process invoices.
"^DD",58.812,58.8121,1,"DT")
3000929
"^DD",58.812,58.8122,0)
ORDER UNIT SUB-FIELD^^2^3
"^DD",58.812,58.8122,0,"DT")
3010103
"^DD",58.812,58.8122,0,"IX","B",58.8122,.01)

"^DD",58.812,58.8122,0,"NM","ORDER UNIT")

"^DD",58.812,58.8122,0,"UP")
58.812
"^DD",58.812,58.8122,.01,0)
VENDOR ORDER UNIT^F^^0;1^K:$L(X)>10!($L(X)<1) X
"^DD",58.812,58.8122,.01,1,0)
^.1
"^DD",58.812,58.8122,.01,1,1,0)
58.8122^B
"^DD",58.812,58.8122,.01,1,1,1)
S ^PSD(58.812,DA(1),"OU","B",$E(X,1,30),DA)=""
"^DD",58.812,58.8122,.01,1,1,2)
K ^PSD(58.812,DA(1),"OU","B",$E(X,1,30),DA)
"^DD",58.812,58.8122,.01,3)
Please enter the order unit provided by the vendor
"^DD",58.812,58.8122,.01,21,0)
^^4^4^3000929^
"^DD",58.812,58.8122,.01,21,1,0)
 This field contains the order unit as provided by the Prime Vendor on
"^DD",58.812,58.8122,.01,21,2,0)
 invoices transmitted to VISTA. Because of the large number of order
"^DD",58.812,58.8122,.01,21,3,0)
 units available to the Prime Vendor, conversions need to be performed
"^DD",58.812,58.8122,.01,21,4,0)
 to successfully process invoices.
"^DD",58.812,58.8122,.01,"DT")
3000929
"^DD",58.812,58.8122,1,0)
MATCHED ORDER UNIT^P51.5'^DIC(51.5,^0;2^Q
"^DD",58.812,58.8122,1,21,0)
^^1^1^3000929^
"^DD",58.812,58.8122,1,21,1,0)
 This is the corresponding order unit.
"^DD",58.812,58.8122,1,"DT")
3000929
"^DD",58.812,58.8122,2,0)
ITEM NUMBER^NJ8,0^^0;3^K:+X'=X!(X>99999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",58.812,58.8122,2,3)
Type a Number between 0 and 99999999, 0 Decimal Digits
"^DD",58.812,58.8122,2,"DT")
3010103
"^DD",58.812,58.8123,0)
BACK GROUND JOB SUB-FIELD^^2^3
"^DD",58.812,58.8123,0,"DT")
3000929
"^DD",58.812,58.8123,0,"IX","B",58.8123,.01)

"^DD",58.812,58.8123,0,"NM","BACK GROUND JOB")

"^DD",58.812,58.8123,0,"UP")
58.812
"^DD",58.812,58.8123,.01,0)
BACK GROUND JOB^F^^0;1^K:$L(X)>40!($L(X)<3) X
"^DD",58.812,58.8123,.01,1,0)
^.1
"^DD",58.812,58.8123,.01,1,1,0)
58.8123^B
"^DD",58.812,58.8123,.01,1,1,1)
S ^PSD(58.812,DA(1),"T","B",$E(X,1,30),DA)=""
"^DD",58.812,58.8123,.01,1,1,2)
K ^PSD(58.812,DA(1),"T","B",$E(X,1,30),DA)
"^DD",58.812,58.8123,.01,3)
Answer must be 3-40 characters in length.
"^DD",58.812,58.8123,.01,21,0)
^.001^2^2^3000929^^
"^DD",58.812,58.8123,.01,21,1,0)
 This field will contain a set of dates to use as parameters for 
"^DD",58.812,58.8123,.01,21,2,0)
 obtaining dispensing data.
"^DD",58.812,58.8123,.01,"DT")
3000929
"^DD",58.812,58.8123,1,0)
BEGIN DATE^D^^0;2^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",58.812,58.8123,1,21,0)
^^1^1^3000929^
"^DD",58.812,58.8123,1,21,1,0)
This is how far back the background job will look for data
"^DD",58.812,58.8123,1,"DT")
3000929
"^DD",58.812,58.8123,2,0)
STOP DATE^D^^0;3^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",58.812,58.8123,2,3)

"^DD",58.812,58.8123,2,21,0)
^^1^1^3000929^
"^DD",58.812,58.8123,2,21,1,0)
 This is the date the report will stop searching for data.
"^DD",58.812,58.8123,2,"DT")
3000929
"^DIC",58.812,58.812,0)
DA UPLOAD^58.812
"^DIC",58.812,58.812,0,"GL")
^PSD(58.812,
"^DIC",58.812,58.812,"%",0)
^1.005^^
"^DIC",58.812,58.812,"%D",0)
^^18^18^3001002^^
"^DIC",58.812,58.812,"%D",1,0)
This file contains Supply Items and Order Units used in matching uploaded
"^DIC",58.812,58.812,"%D",2,0)
Prime Vendor invoice data.
"^DIC",58.812,58.812,"%D",3,0)
 
"^DIC",58.812,58.812,"%D",4,0)
The user inputs the name of a supply item and the item's corresponding
"^DIC",58.812,58.812,"%D",5,0)
Vendor Stock Number (VSN). When an item is uploaded from the vendor, the
"^DIC",58.812,58.812,"%D",6,0)
Drug Accountability software attempts to identify the item by the NDC.
"^DIC",58.812,58.812,"%D",7,0)
If a match cannot be found, the entries in this file will be checked.
"^DIC",58.812,58.812,"%D",8,0)
By storing the supply items, the user does not have to identify the item
"^DIC",58.812,58.812,"%D",9,0)
on the invoice as a supply item each time it is uploaded. 
"^DIC",58.812,58.812,"%D",10,0)
 
"^DIC",58.812,58.812,"%D",11,0)
The Prime Vendor ships drugs in a variety of order unit sizes. In some
"^DIC",58.812,58.812,"%D",12,0)
instances, the order unit on a invoiced item does not match the order 
"^DIC",58.812,58.812,"%D",13,0)
unit in the facility's files. When this occurs the user has to perform a 
"^DIC",58.812,58.812,"%D",14,0)
manual match on the item.
"^DIC",58.812,58.812,"%D",15,0)
 
"^DIC",58.812,58.812,"%D",16,0)
By entering the order unit sent by the Prime Vendor to the order unit in
"^DIC",58.812,58.812,"%D",17,0)
VISTA, the matching can be performed automatically during the upload 
"^DIC",58.812,58.812,"%D",18,0)
process.
"^DIC",58.812,"B","DA UPLOAD",58.812)

**END**
**END**

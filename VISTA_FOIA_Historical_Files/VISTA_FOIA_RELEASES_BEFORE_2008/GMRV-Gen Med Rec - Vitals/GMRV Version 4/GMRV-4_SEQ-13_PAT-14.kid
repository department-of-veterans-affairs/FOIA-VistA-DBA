Released GMRV*4*14 SEQ #13
Extracted from mail message
**KIDS**:GMRV*4.0*14^

**INSTALL NAME**
GMRV*4.0*14
"BLD",3717,0)
GMRV*4.0*14^GEN. MED. REC. - VITALS^0^3020821^y
"BLD",3717,1,0)
^^2^2^3020731^
"BLD",3717,1,1,0)
Please read the GMRV*4*14 patch description on FORUM for an explanation of
"BLD",3717,1,2,0)
what this patch does.
"BLD",3717,4,0)
^9.64PA^^
"BLD",3717,"ABNS",0)
^9.66A^^
"BLD",3717,"ABPKG")
^n
"BLD",3717,"KRN",0)
^9.67PA^8989.52^19
"BLD",3717,"KRN",.4,0)
.4
"BLD",3717,"KRN",.401,0)
.401
"BLD",3717,"KRN",.402,0)
.402
"BLD",3717,"KRN",.403,0)
.403
"BLD",3717,"KRN",.5,0)
.5
"BLD",3717,"KRN",.84,0)
.84
"BLD",3717,"KRN",3.6,0)
3.6
"BLD",3717,"KRN",3.8,0)
3.8
"BLD",3717,"KRN",9.2,0)
9.2
"BLD",3717,"KRN",9.8,0)
9.8
"BLD",3717,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",3717,"KRN",9.8,"NM",1,0)
GMRVED2^^0^B23253979
"BLD",3717,"KRN",9.8,"NM","B","GMRVED2",1)

"BLD",3717,"KRN",19,0)
19
"BLD",3717,"KRN",19.1,0)
19.1
"BLD",3717,"KRN",101,0)
101
"BLD",3717,"KRN",409.61,0)
409.61
"BLD",3717,"KRN",771,0)
771
"BLD",3717,"KRN",870,0)
870
"BLD",3717,"KRN",8989.51,0)
8989.51
"BLD",3717,"KRN",8989.52,0)
8989.52
"BLD",3717,"KRN",8994,0)
8994
"BLD",3717,"KRN","B",.4,.4)

"BLD",3717,"KRN","B",.401,.401)

"BLD",3717,"KRN","B",.402,.402)

"BLD",3717,"KRN","B",.403,.403)

"BLD",3717,"KRN","B",.5,.5)

"BLD",3717,"KRN","B",.84,.84)

"BLD",3717,"KRN","B",3.6,3.6)

"BLD",3717,"KRN","B",3.8,3.8)

"BLD",3717,"KRN","B",9.2,9.2)

"BLD",3717,"KRN","B",9.8,9.8)

"BLD",3717,"KRN","B",19,19)

"BLD",3717,"KRN","B",19.1,19.1)

"BLD",3717,"KRN","B",101,101)

"BLD",3717,"KRN","B",409.61,409.61)

"BLD",3717,"KRN","B",771,771)

"BLD",3717,"KRN","B",870,870)

"BLD",3717,"KRN","B",8989.51,8989.51)

"BLD",3717,"KRN","B",8989.52,8989.52)

"BLD",3717,"KRN","B",8994,8994)

"BLD",3717,"QUES",0)
^9.62^^
"BLD",3717,"REQB",0)
^9.611^1^1
"BLD",3717,"REQB",1,0)
GMRV*4.0*7^2
"BLD",3717,"REQB","B","GMRV*4.0*7",1)

"MBREQ")
0
"PKG",44,-1)
1^1
"PKG",44,0)
GEN. MED. REC. - VITALS^GMRV^Vitals/Measurements Module of General Medical Record.
"PKG",44,20,0)
^9.402P^^
"PKG",44,22,0)
^9.49I^1^1
"PKG",44,22,1,0)
4.0^2970425^2970702^64
"PKG",44,22,1,"PAH",1,0)
14^3020821
"PKG",44,22,1,"PAH",1,1,0)
^^2^2^3020821
"PKG",44,22,1,"PAH",1,1,1,0)
Please read the GMRV*4*14 patch description on FORUM for an explanation of
"PKG",44,22,1,"PAH",1,1,2,0)
what this patch does.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","GMRVED2")
0^1^B23253979
"RTN","GMRVED2",1,0)
GMRVED2 ;HIRMFO/RM,YH-VITAL SIGNS EDIT SHORT FORM ;8/14/02  13:53
"RTN","GMRVED2",2,0)
 ;;4.0;Vitals/Measurements;**7,14**;Apr 25, 1997
"RTN","GMRVED2",3,0)
 ;
"RTN","GMRVED2",4,0)
 ; This routine uses the following IAs:
"RTN","GMRVED2",5,0)
 ; #10035 - ^DPT( references       (supported)
"RTN","GMRVED2",6,0)
 ; #10061 - ^VADPT calls           (supported)
"RTN","GMRVED2",7,0)
 ; #10104 - ^XLFSTR calls          (supported)
"RTN","GMRVED2",8,0)
 ; 
"RTN","GMRVED2",9,0)
EN1 ; SORT PATIENTS ON WARD
"RTN","GMRVED2",10,0)
 K ^TMP($J)
"RTN","GMRVED2",11,0)
WSA1 ; SET ^TMP($J, FOR SORT
"RTN","GMRVED2",12,0)
 D DEM^VADPT,INP^VADPT S GMRRMBD=$S(VAIN(5)'="":VAIN(5),1:"  BLANK"),GMRNAM=$S(VADM(1)'="":VADM(1),1:"  BLANK") D KVAR^VADPT K VA
"RTN","GMRVED2",13,0)
 S:$S("Aa"[GMREDB:1,$D(GMRROOM($P(GMRRMBD,"-"))):1,1:0) ^TMP($J,GMRRMBD,GMRNAM,DFN)=""
"RTN","GMRVED2",14,0)
 S DFN=$O(^DPT("CN",GMRWARD(1),DFN))
"RTN","GMRVED2",15,0)
 Q:DFN=""  G WSA1
"RTN","GMRVED2",16,0)
EN2 ; BEGIN EDITING WARD VITALS
"RTN","GMRVED2",17,0)
 I $O(^TMP($J,0))="" S GMROUT=1 Q
"RTN","GMRVED2",18,0)
 W !,"Begin entering patient vitals." S GMRDT0=GMRVIDT
"RTN","GMRVED2",19,0)
 S GMRRMBD="" F GMRI=0:0 S GMRRMBD=$O(^TMP($J,GMRRMBD)) Q:GMRRMBD=""!GMROUT  S GMRNAM="" F GMRI=0:0 S GMRNAM=$O(^TMP($J,GMRRMBD,GMRNAM)) Q:GMRNAM=""!GMROUT  F DFN=0:0 S DFN=$O(^TMP($J,GMRRMBD,GMRNAM,DFN)) Q:DFN'>0  D V1 Q:GMROUT
"RTN","GMRVED2",20,0)
 W !,"Enter return to continue" R X:DTIME Q
"RTN","GMRVED2",21,0)
V1 ;
"RTN","GMRVED2",22,0)
 W !!,$S(GMRNAM'="  BLANK":GMRNAM,1:DFN),?$X+10,$S(GMRRMBD'="  BLANK":GMRRMBD,1:""),"  OK? YES// " R GMRX:DTIME
"RTN","GMRVED2",23,0)
 I GMRX="^"!('$T) S GMROUT=1 Q
"RTN","GMRVED2",24,0)
 S GMRX=$$UP^XLFSTR(GMRX) I ((GMRX="")!($E(GMRX)="Y")) K GMRTO S GDT=GMRVIDT D EN1^GMRVADM G:GMROUT&'$D(GMRTO) V2 D EN2^GMRVED3 G:GMROUT&'$D(GMRTO) V2 Q
"RTN","GMRVED2",25,0)
 G:GMRX?1"N".E V2
"RTN","GMRVED2",26,0)
 W !,"ANSWER YES OR NO" G V1
"RTN","GMRVED2",27,0)
V2 ;
"RTN","GMRVED2",28,0)
 W !!,"Do you wish to stop looping through names? YES//" R GMRX:DTIME
"RTN","GMRVED2",29,0)
 S GMRX=$$UP^XLFSTR(GMRX) I (('$T)!(GMRX="")!($E(GMRX)="Y")!(GMRX="^")) S GMROUT=1 Q
"RTN","GMRVED2",30,0)
 I GMRX?1"N".E S GMROUT=0 Q
"RTN","GMRVED2",31,0)
 W !,"ANSWER YES OR NO" G V2
"RTN","GMRVED2",32,0)
EN4 ; ENTRY FROM GMRVED0 TO ADD THE PATIENT DATA TO THE 120.5 FILE
"RTN","GMRVED2",33,0)
 D NOW^%DTC S GMRDATE=%
"RTN","GMRVED2",34,0)
 F GMRX=2:1:$L(GMRSTR(0),";")-1 S GMRVITY=$P(GMRSTR(0),";",GMRX) D
"RTN","GMRVED2",35,0)
 . S GMRVIT=$S(GMRVITY="T":"TEMPERATURE",GMRVITY="P":"PULSE",GMRVITY="R":"RESPIRATION",GMRVITY="BP":"BLOOD PRESSURE",GMRVITY="HT":"HEIGHT",GMRVITY="CG":"CIRCUMFERENCE/GIRTH",1:"")
"RTN","GMRVED2",36,0)
 . S:GMRVIT="" GMRVIT=$S(GMRVITY="WT":"WEIGHT",GMRVITY="CVP":"CENTRAL VENOUS PRESSURE",GMRVITY="PO2":"PULSE OXIMETRY",GMRVITY="PN":"PAIN",1:"")
"RTN","GMRVED2",37,0)
 . D:$G(GMRDAT(GMRVITY))'=""&(GMRVIT'="") ADDNODE
"RTN","GMRVED2",38,0)
 Q
"RTN","GMRVED2",39,0)
ADDNODE ; ADD DATA TO THE 120.5 FILE
"RTN","GMRVED2",40,0)
 S GMRVIT(1)=$O(^GMRD(120.51,"B",GMRVIT,0)),DA=$P(^GMR(120.5,0),"^",3)
"RTN","GMRVED2",41,0)
B1 S DA=DA+1 L +^GMR(120.5,DA,0):1 I '$T!$D(^GMR(120.5,DA,0)) L -^GMR(120.5,DA,0) G B1
"RTN","GMRVED2",42,0)
 S $P(^GMR(120.5,0),"^",3,4)=DA_"^"_($P(^GMR(120.5,0),"^",4)+1)
"RTN","GMRVED2",43,0)
 S ^GMR(120.5,DA,0)=GMRVIDT_"^"_DFN_"^"_GMRVIT(1)_"^"_GMRDATE_"^"_GMRVHLOC_"^"_DUZ_"^^"_GMRDAT(GMRVITY)_"^^"
"RTN","GMRVED2",44,0)
 I $D(GMRSITE(GMRVITY))!$D(GMRINF(GMRVITY)) D
"RTN","GMRVED2",45,0)
 . I '$D(^GMR(120.5,DA,5,0)) S ^GMR(120.5,DA,5,0)="^120.505P^0^0"
"RTN","GMRVED2",46,0)
 . S GMRVLST=+$P(^GMR(120.5,DA,5,0),"^",3)
"RTN","GMRVED2",47,0)
 . I $G(GMRSITE(GMRVITY))'="" S GDATA=+$P(GMRSITE(GMRVITY),"^",2) D:GDATA>0
"RTN","GMRVED2",48,0)
 . . S GMRVLST=GMRVLST+1
"RTN","GMRVED2",49,0)
 . . S ^GMR(120.5,DA,5,GMRVLST,0)=GDATA
"RTN","GMRVED2",50,0)
 . . Q
"RTN","GMRVED2",51,0)
 . I $D(GMRINF(GMRVITY)) S I=0 F  S I=$O(GMRINF(GMRVITY,I)) Q:I'>0  S I(1)="" F  S I(1)=$O(GMRINF(GMRVITY,I,I(1))) Q:I(1)=""  S GDATA=+$P(GMRINF(GMRVITY,I,I(1)),"^") D:GDATA>0
"RTN","GMRVED2",52,0)
 . . S GMRVLST=GMRVLST+1
"RTN","GMRVED2",53,0)
 . . S ^GMR(120.5,DA,5,GMRVLST,0)=GDATA
"RTN","GMRVED2",54,0)
 . . Q
"RTN","GMRVED2",55,0)
 . S $P(^GMR(120.5,DA,5,0),"^",3)=GMRVLST,$P(^(0),"^",4)=GMRVLST
"RTN","GMRVED2",56,0)
 . Q
"RTN","GMRVED2",57,0)
 S $P(^GMR(120.5,DA,0),"^",10)=$G(GMRO2(GMRVITY))
"RTN","GMRVED2",58,0)
 L -^GMR(120.5,DA,0)
"RTN","GMRVED2",59,0)
 I GMREDB="P1" S GMRVIEN(GMRVITY)=DA_"^"_GMRDAT(GMRVITY)_"^"_$G(GMRSITE(GMRVITY))
"RTN","GMRVED2",60,0)
 S:GMRENTY>4 GLAST=GMRVIDT,GLAST(1)=$G(GLAST(1))+1
"RTN","GMRVED2",61,0)
 D XREF(DA) ;set the cross-references
"RTN","GMRVED2",62,0)
 D XREF1(DA) ;set x-refs in multiple
"RTN","GMRVED2",63,0)
 Q
"RTN","GMRVED2",64,0)
XREF(DA) ; Set cross-references for FILE 120.5 entry
"RTN","GMRVED2",65,0)
 ; Execute SET logic only.  Set's all cross-references for this entry.
"RTN","GMRVED2",66,0)
 ; DA is the record number
"RTN","GMRVED2",67,0)
 N DIC,DIK,X,Y
"RTN","GMRVED2",68,0)
 Q:'DA
"RTN","GMRVED2",69,0)
 S DIK="^GMR(120.5,"
"RTN","GMRVED2",70,0)
 D IX1^DIK
"RTN","GMRVED2",71,0)
 Q
"RTN","GMRVED2",72,0)
XREF1(DA) ; Set cross-references for FILE 120.5 entry
"RTN","GMRVED2",73,0)
 ; Execute SET logic only.  Set's all cross-references for this entry.
"RTN","GMRVED2",74,0)
 ; DA is the record number
"RTN","GMRVED2",75,0)
 N DIC,DIK,GMRVDA,GMRVIEN,X,Y
"RTN","GMRVED2",76,0)
 Q:'DA
"RTN","GMRVED2",77,0)
 S GMRVIEN=0,GMRVDA=DA
"RTN","GMRVED2",78,0)
 F  S GMRVIEN=$O(^GMR(120.5,GMRVDA,5,GMRVIEN)) Q:'GMRVIEN  D
"RTN","GMRVED2",79,0)
 .S DA(1)=GMRVDA,DA=GMRVIEN
"RTN","GMRVED2",80,0)
 .S DIK="^GMR(120.5,DA(1),5,"
"RTN","GMRVED2",81,0)
 .D IX1^DIK
"RTN","GMRVED2",82,0)
 .Q
"RTN","GMRVED2",83,0)
 Q
"RTN","GMRVED2",84,0)
SETPRMT ; SET VITAL TYPE PATTERN MATCH
"RTN","GMRVED2",85,0)
 S G=$P(GMRSTR(0),";",GMRX)
"RTN","GMRVED2",86,0)
 S GMRHELP=GMRHELP_$S(G="P":"PPP",G="WT":"WWW.WW",G="R":"RR",G="CG":"NNN.NN",G="CVP":"NN",G="PO2":"NNN",G="HT":"HH",G="BP":"BBB/BBB/BBB (or BBB/BBB)",G="T":"TTT.T",G="PN":"NN",1:"")_$S(GMRX'=($L(GMRSTR(0),";")-1):"-",1:"")
"RTN","GMRVED2",87,0)
 S GMRHELP(1)=GMRHELP(1)_$S(GMRHELP(1)'="":",",1:"")_$P(GMRSTR(0),";",GMRX)_"^GMRVUT1"
"RTN","GMRVED2",88,0)
 S GMRPRMT=GMRPRMT_$S(G="T":"Temp",G="P":"Pulse",G="WT":"Wt.",G="R":"Resp",G="HT":"Ht.",G="BP":"BP",G="CG":"Circumference/Girth",G="CVP":"CVP",G="PO2":"PO2",G="PN":"Pain",1:"")_$S(GMRX'=($L(GMRSTR(0),";")-1):"-",1:"")
"RTN","GMRVED2",89,0)
 Q
"VER")
8.0^22.0
**END**
**END**

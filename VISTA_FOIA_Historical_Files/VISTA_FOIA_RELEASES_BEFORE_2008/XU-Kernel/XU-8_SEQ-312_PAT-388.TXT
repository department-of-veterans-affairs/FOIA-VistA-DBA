$TXT Created by GARCIA,JOSE LUIS JR at NXT.KERNEL.FO-OAKLAND.MED.VA.GOV  (KIDS) on Wednesday, 06/22/05 at 14:51
=============================================================================
Run Date: SEP 29, 2005                     Designation: XU*8*388
Package : XU - KERNEL                         Priority: Mandatory
Version : 8       SEQ #312                      Status: Released
                  Compliance Date: OCT 30, 2005
=============================================================================

Associated patches: (v)XU*8*275    <<= must be installed BEFORE `XU*8*388'

Subject: Fix Cache Socket passoff.

Category: 
  - Routine

Description:
============

 XU*8.0*388
  
 Blood Bank Team Clearance: 8/30/05
  
 Test Sites: Pittsburg HCS, West Palm Beach VAMC, CMOP-NAT
  
 Remedy case: HD0000000097841
 The spawned server process is not being notified when the client
 disconnects.  Instead, the process just terminates.  This patch ensures
 that a disconnect will behave as commonly expected, by generating a READ 
 error.
  
 NOTE: This patch should be installed during off-hours.  Users may NOT be
 on the system.  It requires patch XU*8*275.
 ==========================================================================
  
 ROUTINES:
 The second line of the routine now looks like:
        ;;8.0;KERNEL;**[patch list]**;Jul 10, 1995
  
            Before     After
 Name       Checksum   Checksum   Patch List
 --------------------------------------------------------------------
 ZISTCPS    3357154    3347669   78,118,127,225,275,388
  
 * Checksums produced by CHECK^XTSUMBLD
  
 This patch introduces no new routines.
 ==========================================================================
  
 INSTALLATION: (less than 5 minutes).  There are two sets of instructions: 
 A. one for sites that use OpenVMS TCPIP services as their multithreaded 
 listeners; and B. for sites that use Taskman-based multithreaded listeners
 as found in Cache-NT.
  
 A. Sites that use OpenVMS TCPIP services (example Cache-VMS):
  
 1.  On the PackMan menu, use the 'INSTALL/CHECK MESSAGE' option.
     This loads the patch into a Transport Global on your system.
  
 2.  Patch XU*8.0*388 is now loaded into a transport global on your 
     system.  The next step is to use KIDS Installation menu to verify and
     install the transport global.  You may use the following options to
     check the Transport Global.
  
        Verify Checksums in Transport Global
        Print Transport Global
        Compare Transport Global to Current System
        Backup a Transport Global
  
 3.  Install the patch build using the following option:
  
        Install Package(s) [XPD INSTALL BUILD]  
  
     When using this menu option to install the patch build, you will be
     asked several questions.  The questions, and the answers you 
     should supply, are shown below.  
  
     INSTALL NAME:  <XU*8.0*388>
     Want KIDS to INHIBIT LOGONS during the install?  <NO> 
     Want to DISABLE Scheduled Options, Menu Options, 
     and Protocols?  <NO> 
  
  
 4.  In programmer mode, reload the routines in manager mode:
  
     D RELOAD^ZTMGRSET
     Select the System
     Patch number to load: <388>
  
  
 B. Sites that use Taskman-based multithreaded listeners (example 
    Cache-NT):
  
 1.  If you are a Cache-NT site, you may need to stop any
     "Taskman-based" tcp multithreaded listeners like RPC Broker or HL7
     listeners. 
  
 2.  Stop the Broker Listener on the server.  Check the system status
     and verify if the XWBTCPL routine is running. (i.e., Broker 
     Listener).  If it is running, stop it using the command shown 
     below.  
  
     From the M prompt, enter: 
  
       >D STOP^XWBTCP(LISTENER-PORT) 
  
     When stopping the listener using the above command, substitute 
     the actual port number for 'LISTENER-PORT'.  Typically, the 
     listener port is 9200.  (If the listener port is 9200, the 
     actual command would be 'D STOP^XWBTCP(9200)'.) 
  
 3.  Using the VISTA HL7 Filer and Link Management options, shutdown
     any taskman-based multithreaded listeners via the following option:
  
     Stop All Messaging Background Processes [HL STOP ALL]
  
 4.  On the PackMan menu, use the 'INSTALL/CHECK MESSAGE' option.
     This loads the patch into a Transport Global on your system.
  
 5.  Patch XU*8.0*388 is now loaded into a transport global on your 
     system.  The next step is to use KIDS Installation menu to verify and
     install the transport global.  You may use the following options to
     check the Transport Global.
  
        Verify Checksums in Transport Global
        Print Transport Global
        Compare Transport Global to Current System
        Backup a Transport Global
  
 6.  Install the patch build using the following option:
  
        Install Package(s) [XPD INSTALL BUILD]  
  
     When using this menu option to install the patch build, you will be
     asked several questions.  The questions, and the answers you 
     should supply, are shown below.  
  
     INSTALL NAME:  <XU*8.0*388>
     Want KIDS to INHIBIT LOGONS during the install?  <NO> 
     Want to DISABLE Scheduled Options, Menu Options, 
     and Protocols?  <NO> 
  
 7.  In programmer mode, reload the routines in manager mode:
  
     D RELOAD^ZTMGRSET
     Select the System
     Patch number to load: <388>
  
 8.  Using the VISTA HL7 Filer and Link Management options, restart the 
     background processes stopped in step 3 above. use the following
     option:
  
     Restart/Start All Links and Filers [HL TASK RESTART]
  
 9.  Restart the RPC Broker listener if you stopped it in step 2 above.

Routine Information:
====================
The checksum's below are the new checksums.
 These can be checked with CHECK1^XTSUMBLD

Routine Name: ZISTCPS

=============================================================================
User Information:
Entered By  : FORT,WALLY                    Date Entered  : JUN 08, 2005
Completed By: SINGH,GURBIR                  Date Completed: SEP 28, 2005
Released By : TILLIS,LEWIS                  Date Released : SEP 29, 2005
=============================================================================


Packman Mail Message:
=====================

$END TXT

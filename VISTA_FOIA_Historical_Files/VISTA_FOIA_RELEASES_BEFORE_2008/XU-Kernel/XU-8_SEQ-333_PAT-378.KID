Released XU*8*378 SEQ #333
Extracted from mail message
**KIDS**:XU*8.0*378^

**INSTALL NAME**
XU*8.0*378
"BLD",898,0)
XU*8.0*378^KERNEL^0^3060307^y
"BLD",898,1,0)
^^2^2^3051020^
"BLD",898,1,1,0)
See patch XU*8*378 in the National Patch Module for complete information
"BLD",898,1,2,0)
on this patch.
"BLD",898,4,0)
^9.64PA^5^1
"BLD",898,4,5,0)
5
"BLD",898,4,5,2,0)
^9.641^5^1
"BLD",898,4,5,2,5,0)
STATE  (File-top level)
"BLD",898,4,5,2,5,1,0)
^9.6411^2.2^2
"BLD",898,4,5,2,5,1,2.1,0)
AAC RECOGNIZED
"BLD",898,4,5,2,5,1,2.2,0)
US STATE OR POSSESSION
"BLD",898,4,5,222)
y^y^p^^^^n^^n
"BLD",898,4,5,224)

"BLD",898,4,"APDD",5,5)

"BLD",898,4,"APDD",5,5,2.1)

"BLD",898,4,"APDD",5,5,2.2)

"BLD",898,4,"B",5,5)

"BLD",898,6.3)
59
"BLD",898,"INIT")
XU8P378
"BLD",898,"KRN",0)
^9.67PA^8989.52^19
"BLD",898,"KRN",.4,0)
.4
"BLD",898,"KRN",.4,"NM",0)
^9.68A^2^2
"BLD",898,"KRN",.4,"NM",1,0)
XIP STATE EXPORT    FILE #5^5^0
"BLD",898,"KRN",.4,"NM",2,0)
XIP STATE/COUNTY EXPORT    FILE #5^5^0
"BLD",898,"KRN",.4,"NM","B","XIP STATE EXPORT    FILE #5",1)

"BLD",898,"KRN",.4,"NM","B","XIP STATE/COUNTY EXPORT    FILE #5",2)

"BLD",898,"KRN",.401,0)
.401
"BLD",898,"KRN",.401,"NM",0)
^9.68A^2^2
"BLD",898,"KRN",.401,"NM",1,0)
XIP STATE EXPORT    FILE #5^5^0
"BLD",898,"KRN",.401,"NM",2,0)
XIP STATE/COUNTY EXPORT    FILE #5^5^0
"BLD",898,"KRN",.401,"NM","B","XIP STATE EXPORT    FILE #5",1)

"BLD",898,"KRN",.401,"NM","B","XIP STATE/COUNTY EXPORT    FILE #5",2)

"BLD",898,"KRN",.402,0)
.402
"BLD",898,"KRN",.403,0)
.403
"BLD",898,"KRN",.5,0)
.5
"BLD",898,"KRN",.84,0)
.84
"BLD",898,"KRN",3.6,0)
3.6
"BLD",898,"KRN",3.8,0)
3.8
"BLD",898,"KRN",3.8,"NM",0)
^9.68A^1^1
"BLD",898,"KRN",3.8,"NM",1,0)
XIP SERVER RESPONSE^^0
"BLD",898,"KRN",3.8,"NM","B","XIP SERVER RESPONSE",1)

"BLD",898,"KRN",9.2,0)
9.2
"BLD",898,"KRN",9.8,0)
9.8
"BLD",898,"KRN",9.8,"NM",0)
^9.68A^8^8
"BLD",898,"KRN",9.8,"NM",1,0)
XU8P378A^^0^B53936470
"BLD",898,"KRN",9.8,"NM",2,0)
XIPPOST^^0^B7231902
"BLD",898,"KRN",9.8,"NM",3,0)
XU8P378B^^0^B7374341
"BLD",898,"KRN",9.8,"NM",4,0)
XIPMAIL^^0^B2437876
"BLD",898,"KRN",9.8,"NM",5,0)
XU8P378C^^0^B3548121
"BLD",898,"KRN",9.8,"NM",6,0)
XIPSYNC^^0^B6027849
"BLD",898,"KRN",9.8,"NM",7,0)
XIPMAILA^^0^B32407921
"BLD",898,"KRN",9.8,"NM",8,0)
XIPMAILB^^0^B33220563
"BLD",898,"KRN",9.8,"NM","B","XIPMAIL",4)

"BLD",898,"KRN",9.8,"NM","B","XIPMAILA",7)

"BLD",898,"KRN",9.8,"NM","B","XIPMAILB",8)

"BLD",898,"KRN",9.8,"NM","B","XIPPOST",2)

"BLD",898,"KRN",9.8,"NM","B","XIPSYNC",6)

"BLD",898,"KRN",9.8,"NM","B","XU8P378A",1)

"BLD",898,"KRN",9.8,"NM","B","XU8P378B",3)

"BLD",898,"KRN",9.8,"NM","B","XU8P378C",5)

"BLD",898,"KRN",19,0)
19
"BLD",898,"KRN",19,"NM",0)
^9.68A^1^1
"BLD",898,"KRN",19,"NM",1,0)
XIPMAILSERVER^^0
"BLD",898,"KRN",19,"NM","B","XIPMAILSERVER",1)

"BLD",898,"KRN",19.1,0)
19.1
"BLD",898,"KRN",101,0)
101
"BLD",898,"KRN",409.61,0)
409.61
"BLD",898,"KRN",771,0)
771
"BLD",898,"KRN",870,0)
870
"BLD",898,"KRN",8989.51,0)
8989.51
"BLD",898,"KRN",8989.52,0)
8989.52
"BLD",898,"KRN",8994,0)
8994
"BLD",898,"KRN","B",.4,.4)

"BLD",898,"KRN","B",.401,.401)

"BLD",898,"KRN","B",.402,.402)

"BLD",898,"KRN","B",.403,.403)

"BLD",898,"KRN","B",.5,.5)

"BLD",898,"KRN","B",.84,.84)

"BLD",898,"KRN","B",3.6,3.6)

"BLD",898,"KRN","B",3.8,3.8)

"BLD",898,"KRN","B",9.2,9.2)

"BLD",898,"KRN","B",9.8,9.8)

"BLD",898,"KRN","B",19,19)

"BLD",898,"KRN","B",19.1,19.1)

"BLD",898,"KRN","B",101,101)

"BLD",898,"KRN","B",409.61,409.61)

"BLD",898,"KRN","B",771,771)

"BLD",898,"KRN","B",870,870)

"BLD",898,"KRN","B",8989.51,8989.51)

"BLD",898,"KRN","B",8989.52,8989.52)

"BLD",898,"KRN","B",8994,8994)

"BLD",898,"PRE")
XU8P378E
"BLD",898,"QUES",0)
^9.62^^
"BLD",898,"REQB",0)
^9.611^2^2
"BLD",898,"REQB",1,0)
XU*8.0*328^2
"BLD",898,"REQB",2,0)
XU*8.0*292^2
"BLD",898,"REQB","B","XU*8.0*292",2)

"BLD",898,"REQB","B","XU*8.0*328",1)

"FIA",5)
STATE
"FIA",5,0)
^DIC(5,
"FIA",5,0,0)
5
"FIA",5,0,1)
y^y^p^^^^n^^n
"FIA",5,0,10)

"FIA",5,0,11)

"FIA",5,0,"RLRO")

"FIA",5,0,"VR")
8.0^XU
"FIA",5,5)
1
"FIA",5,5,2.1)

"FIA",5,5,2.2)

"INIT")
XU8P378
"KRN",.4,141,-1)
0^2
"KRN",.4,141,0)
XIP STATE/COUNTY EXPORT^3050826.091^@^5^^@^3051101
"KRN",.4,141,"DXS",1,9.2)
S DIP(1)=$S($D(^DIC(5,D0,0)):^(0),1:"") S X=$P(DIP(1),U,1),DIP(2)=$G(X) S X="NAME"
"KRN",.4,141,"DXS",2,9.2)
S DIP(1)=$S($D(^DIC(5,D0,0)):^(0),1:"") S X=$P(DIP(1),U,2),DIP(2)=$G(X) S X="ABB"
"KRN",.4,141,"DXS",3,9.2)
S DIP(1)=$S($D(^DIC(5,D0,0)):^(0),1:"") S X=$P(DIP(1),U,3),DIP(2)=$G(X) S X="SCODE"
"KRN",.4,141,"F",1)
X DXS(1,9.2) S X1=DIP(2) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;X;Z;"SETPARAM((#.01),"NAME")"~
"KRN",.4,141,"F",2)
X DXS(2,9.2) S X1=DIP(2) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;X;Z;"SETPARAM((#1),"ABB")"~
"KRN",.4,141,"F",3)
X DXS(3,9.2) S X1=DIP(2) S:X]""&(X?.ANP)&(X1'[U)&(X1'["$C(94)") DIPA($E(X,1,30))=X1 S X="" W X K DIP;X;Z;"SETPARAM((#2),"SCODE")"~
"KRN",.4,141,"F",4)
3,S X="SCODE",X=$S(X=""!(X'?.ANP):"",$D(DIPA($E(X,1,30))):DIPA($E(X,1,30)),1:"") W X K DIP;X;Z;"PARAM("SCODE")"~3,"^";X~
"KRN",.4,141,"F",5)
3,S X="NAME",X=$S(X=""!(X'?.ANP):"",$D(DIPA($E(X,1,30))):DIPA($E(X,1,30)),1:"") W X K DIP;X;Z;"PARAM("NAME")"~3,"^";X~
"KRN",.4,141,"F",6)
3,S X="ABB",X=$S(X=""!(X'?.ANP):"",$D(DIPA($E(X,1,30))):DIPA($E(X,1,30)),1:"") W X K DIP;X;Z;"PARAM("ABB")"~3,"^";X~3,2;X~3,"^";X~3,.01;X~3,"^";X~
"KRN",.4,141,"H")
@
"KRN",.4,141,"SUB")
1
"KRN",.4,142,-1)
0^1
"KRN",.4,142,0)
XIP STATE EXPORT^3050830.0904^@^5^^@^3060303
"KRN",.4,142,"F",2)
2;C1;X~"^";X~.01;X~"^";X~1;X~
"KRN",.4,142,"H")
@
"KRN",.4,142,"SUB")
1
"KRN",.401,96,-1)
0^2
"KRN",.401,96,0)
XIP STATE/COUNTY EXPORT^3050830.0902^@^5^^@^3051101
"KRN",.401,96,2,0)
^.4014^4^4
"KRN",.401,96,2,1,0)
5^^INTERNAL(#2.1)=1^@"B^;L1^^^^^4
"KRN",.401,96,2,1,"CM")
S Y(1)=$S($D(^DIC(5,D0,0)):^(0),1:"") S X=$P(Y(1),U,5),X=X S X=X=1 I D0>0 S DISX(1)=X
"KRN",.401,96,2,1,"F")
0
"KRN",.401,96,2,1,"GET")
S Y(1)=$S($D(^DIC(5,D0,0)):^(0),1:"") S X=$P(Y(1),U,5),X=X S X=X=1 I D0>0 S DISX(1)=X
"KRN",.401,96,2,1,"QCON")
I (DISX(1)]]0)&(DISX(1)']]1)
"KRN",.401,96,2,1,"T")
1
"KRN",.401,96,2,1,"TXT")
INTERNAL(#2.1)=1
"KRN",.401,96,2,2,0)
5^.01^NAME^@^^^^^^4
"KRN",.401,96,2,2,"ASK")
1
"KRN",.401,96,2,2,"F")
@z^A
"KRN",.401,96,2,2,"GET")
S DISX(2)=$P($G(^DIC(5,D0,0)),U)
"KRN",.401,96,2,2,"IX")
^DIC(5,"B",^DIC(5,^2
"KRN",.401,96,2,2,"QCON")
I (DISX(2)]]"@z")&(DISX(2)']]"Z")
"KRN",.401,96,2,2,"SER")
0.0000^0.0000
"KRN",.401,96,2,2,"T")
Z^Z
"KRN",.401,96,2,2,"TXT")
NAME from A to Z
"KRN",.401,96,2,3,0)
5.01^5^INACTIVE DATE^@^^^^^^1
"KRN",.401,96,2,3,1,0)
^.40141^1^1
"KRN",.401,96,2,3,1,1,0)
5^1
"KRN",.401,96,2,3,1,"B",5,1)

"KRN",.401,96,2,3,"F")
?z^@
"KRN",.401,96,2,3,"GET")
S DISX(3)=$P($G(^DIC(5,D0,1,D1,0)),U,5)
"KRN",.401,96,2,3,"QCON")
I DISX(3)=""
"KRN",.401,96,2,3,"T")
@^@
"KRN",.401,96,2,3,"TXT")
INACTIVE DATE is null
"KRN",.401,96,2,4,0)
5.01^.01^COUNTY^^^^^^^4
"KRN",.401,96,2,4,1,0)
^.40141^1^1
"KRN",.401,96,2,4,1,1,0)
5^1
"KRN",.401,96,2,4,1,"B",5,1)

"KRN",.401,96,2,4,"GET")
S DISX(4)=$P($G(^DIC(5,D0,1,D1,0)),U)
"KRN",.401,96,2,4,"QCON")
I DISX(4)'=""
"KRN",.401,96,2,4,"TXT")
COUNTY not null
"KRN",.401,96,2,"B",5,1)

"KRN",.401,96,2,"B",5,2)

"KRN",.401,96,2,"B",5.01,3)

"KRN",.401,96,2,"B",5.01,4)

"KRN",.401,97,-1)
0^1
"KRN",.401,97,0)
XIP STATE EXPORT^3050830.0903^@^5^^@^3060303
"KRN",.401,97,2,0)
^.4014^2^2
"KRN",.401,97,2,1,0)
5^^INTERNAL(#2.1)=1^@"B^;L1^^^^^4
"KRN",.401,97,2,1,"CM")
S Y(1)=$S($D(^DIC(5,D0,0)):^(0),1:"") S X=$P(Y(1),U,5),X=X S X=X=1 I D0>0 S DISX(1)=X
"KRN",.401,97,2,1,"F")
0
"KRN",.401,97,2,1,"GET")
S Y(1)=$S($D(^DIC(5,D0,0)):^(0),1:"") S X=$P(Y(1),U,5),X=X S X=X=1 I D0>0 S DISX(1)=X
"KRN",.401,97,2,1,"QCON")
I (DISX(1)]]0)&(DISX(1)']]1)
"KRN",.401,97,2,1,"T")
1
"KRN",.401,97,2,1,"TXT")
INTERNAL(#2.1)=1
"KRN",.401,97,2,2,0)
5^.01^NAME^^^^^^^4
"KRN",.401,97,2,2,"ASK")
1
"KRN",.401,97,2,2,"F")
@z^A
"KRN",.401,97,2,2,"GET")
S DISX(2)=$P($G(^DIC(5,D0,0)),U)
"KRN",.401,97,2,2,"IX")
^DIC(5,"B",^DIC(5,^2
"KRN",.401,97,2,2,"QCON")
I (DISX(2)]]"@z")&(DISX(2)']]"Z")
"KRN",.401,97,2,2,"SER")
0.0000^0.0000
"KRN",.401,97,2,2,"T")
Z^Z
"KRN",.401,97,2,2,"TXT")
NAME from A to Z
"KRN",.401,97,2,"B",5,1)

"KRN",.401,97,2,"B",5,2)

"KRN",3.8,42,-1)
0^1
"KRN",3.8,42,0)
XIP SERVER RESPONSE^PU^y^^^^
"KRN",3.8,42,2,0)
^^6^6^3051021^
"KRN",3.8,42,2,1,0)
This mail group will receive the response message when either a scan of 
"KRN",3.8,42,2,2,0)
the COUNTY CODE(#5.13) and STATE(#5) whenever a manual scan is requested 
"KRN",3.8,42,2,3,0)
by doing from the programmer prompt:
"KRN",3.8,42,2,4,0)
>D ^XIPMAIL
"KRN",3.8,42,2,5,0)
or in response to a request of server:
"KRN",3.8,42,2,6,0)
 XIPMAILSERVER[Check file 5.13 & file 5]
"KRN",3.8,42,3)

"KRN",3.8,42,6,0)
^3.812^^0
"KRN",19,1150,-1)
0^1
"KRN",19,1150,0)
XIPMAILSERVER^Check file 5.13 & file 5^^S^^^^^^^^KERNEL
"KRN",19,1150,1,0)
^^3^3^3051017^
"KRN",19,1150,1,1,0)
This is a server option that will check the POSTAL CODE(#5.13) v. the 
"KRN",19,1150,1,2,0)
STATE(#5) file.  It also checks the STATE(#5) file for any states that 
"KRN",19,1150,1,3,0)
are not recognized by the AAC.
"KRN",19,1150,25)
XIPMAIL
"KRN",19,1150,220)
^R^XIP SERVER RESPONSE
"KRN",19,1150,"U")
CHECK FILE 5.13 & FILE 5
"MBREQ")
0
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",6,.401)
.401;6;;;EDEOUT^DIFROMSO(.401,DA,"",XPDA);FPRE^DIFROMSI(.401,"",XPDA);EPRE^DIFROMSI(.401,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.401,DA,"",XPDA);DEL^DIFROMSK(.401,"",%)
"ORD",6,.401,0)
SORT TEMPLATE
"ORD",11,3.8)
3.8;11;;;MAILG^XPDTA1;MAILGF1^XPDIA1;MAILGE1^XPDIA1;MAILGF2^XPDIA1;;MAILGDEL^XPDIA1(%)
"ORD",11,3.8,0)
MAIL GROUP
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"PKG",3,-1)
1^1
"PKG",3,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^
"PKG",3,20,0)
^9.402P^^0
"PKG",3,22,0)
^9.49I^1^1
"PKG",3,22,1,0)
8.0^3051215^2970507^.5
"PKG",3,22,1,"PAH",1,0)
378^3060307^70
"PKG",3,22,1,"PAH",1,1,0)
^^2^2^3060307
"PKG",3,22,1,"PAH",1,1,1,0)
See patch XU*8*378 in the National Patch Module for complete information
"PKG",3,22,1,"PAH",1,1,2,0)
on this patch.
"PRE")
XU8P378E
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
10
"RTN","XIPMAIL")
0^4^B2437876
"RTN","XIPMAIL",1,0)
XIPMAIL ;OOIFO/SO- SEND E-MAIL OF COUNTY CODE & STATE FILE EXCEPTIONS;5:36 AM  4 Feb 2006
"RTN","XIPMAIL",2,0)
 ;;8.0;KERNEL;**378**;Jul 10, 1995;Build 59
"RTN","XIPMAIL",3,0)
 N XIPM
"RTN","XIPMAIL",4,0)
 S XIPM=""
"RTN","XIPMAIL",5,0)
 ;SCAN COUNTY CODE(#5.13) FILE FOR EXCEPTIONS
"RTN","XIPMAIL",6,0)
 D ^XIPMAILA
"RTN","XIPMAIL",7,0)
 ;SCAN STATE(#5) FILE FOR EXCEPTIONS
"RTN","XIPMAIL",8,0)
 D ^XIPMAILB
"RTN","XIPMAIL",9,0)
 ;
"RTN","XIPMAIL",10,0)
 N TMP,LN,FACILITY
"RTN","XIPMAIL",11,0)
 S TMP="",LN=0
"RTN","XIPMAIL",12,0)
 S FACILITY=$$NS^XUAF4($$KSP^XUPARAM("INST"))
"RTN","XIPMAIL",13,0)
 S TMP(LN)="Scanning COUNTY CODE(#5.13) & STATE(#5) files for:",LN=LN+1
"RTN","XIPMAIL",14,0)
 S TMP(LN)="         "_$P(FACILITY,U)_"(#"_$P(FACILITY,U,2)_")",LN=LN+1
"RTN","XIPMAIL",15,0)
 S TMP(LN)=" ",LN=LN+1
"RTN","XIPMAIL",16,0)
 N I
"RTN","XIPMAIL",17,0)
 S I=0
"RTN","XIPMAIL",18,0)
 F  S I=$O(XIPM("A",I)) Q:'I  S TMP(LN)=XIPM("A",I),LN=LN+1
"RTN","XIPMAIL",19,0)
 S TMP(LN)=" ",LN=LN+1
"RTN","XIPMAIL",20,0)
 S I=0
"RTN","XIPMAIL",21,0)
 F  S I=$O(XIPM("B",I)) Q:'I  S TMP(LN)=XIPM("B",I),LN=LN+1
"RTN","XIPMAIL",22,0)
 ;
"RTN","XIPMAIL",23,0)
 ; Mail back message
"RTN","XIPMAIL",24,0)
 N MSGSBJ,WHO
"RTN","XIPMAIL",25,0)
 S WHO(DUZ)=""
"RTN","XIPMAIL",26,0)
 S WHO("hecdqsupport@med.va.gov")="" ;GAL group=VHA HEC DQ SUPPORT
"RTN","XIPMAIL",27,0)
 S WHO("ORMSBY.SKIP@FORUM.VA.GOV")="" ;
"RTN","XIPMAIL",28,0)
 S WHO("G.XIP SERVER RESPONSE")=""
"RTN","XIPMAIL",29,0)
 I '$$GOTLOCAL^XMXAPIG("XIP SERVER RESPONSE") K WHO("G.XIP SERVER RESPONSE")
"RTN","XIPMAIL",30,0)
 S MSGSBJ="POSTAL CODE(#5.13) & STATE(#5) File Scan Results"
"RTN","XIPMAIL",31,0)
 ;
"RTN","XIPMAIL",32,0)
SEND D SENDMSG^XMXAPI(DUZ,MSGSBJ,"TMP",.WHO)
"RTN","XIPMAIL",33,0)
 D CLEAN^DILF
"RTN","XIPMAIL",34,0)
 Q
"RTN","XIPMAILA")
0^7^B32407921
"RTN","XIPMAILA",1,0)
XIPMAILA ;OOIFO/SO- SCAN COUNTY CODE(#5.13) FILE FOR EXCEPTIONS;7:33 AM  30 Dec 2005
"RTN","XIPMAILA",2,0)
 ;;8.0;KERNEL;**378**;Jul 10, 1995;Build 59
"RTN","XIPMAILA",3,0)
 ; Check file #5.13 v. file #5
"RTN","XIPMAILA",4,0)
 N IEN,LN,ERR
"RTN","XIPMAILA",5,0)
 S IEN=0,ERR=0,LN=1
"RTN","XIPMAILA",6,0)
 S XIPM("A",LN)="Begin checking COUNTY CODE(#5.13) file...",LN=LN+1
"RTN","XIPMAILA",7,0)
 F  S IEN=$O(^XIP(5.13,IEN)) Q:'IEN  D
"RTN","XIPMAILA",8,0)
 . N STATE,COUNTY,D513,D,DIC,X,Y
"RTN","XIPMAILA",9,0)
 . S X=^XIP(5.13,IEN,0)
"RTN","XIPMAILA",10,0)
 . S STATE=$E(X,1,2)
"RTN","XIPMAILA",11,0)
 . S COUNTY=$E(X,3,5)
"RTN","XIPMAILA",12,0)
 . S D513=X
"RTN","XIPMAILA",13,0)
 . S DIC="^DIC(5,",DIC(0)="FZ",D="C",X=STATE D IX^DIC ;State valid?
"RTN","XIPMAILA",14,0)
 . I Y<1 S XIPM("A",LN)="VA STATE CODE: "_STATE_", is missing from the STATE(#5) file.",LN=LN+1,ERR=1 Q
"RTN","XIPMAILA",15,0)
 . S STATE=+Y
"RTN","XIPMAILA",16,0)
 . S DIC="^DIC(5,"_+STATE_",1,",DIC(0)="FZ",D="C",X=COUNTY D IX^DIC ;County in State file?
"RTN","XIPMAILA",17,0)
 . I Y<1 S XIPM("A",LN)="VA COUNTY CODE: "_COUNTY_", is missing from STATE: "_$P(^DIC(5,+STATE,0),U),LN=LN+1,ERR=1 Q
"RTN","XIPMAILA",18,0)
 . S COUNTY=+Y
"RTN","XIPMAILA",19,0)
 . ;
"RTN","XIPMAILA",20,0)
 . ;Is there a ZIP code associated with this FIPS?
"RTN","XIPMAILA",21,0)
 . I '$D(^XIP(5.12,"AC",IEN)) D
"RTN","XIPMAILA",22,0)
 .. I $P(D513,U,4)'="" Q  ;Inactive FIPS code
"RTN","XIPMAILA",23,0)
 .. N I,DATA,FLAG S FLAG=0
"RTN","XIPMAILA",24,0)
 .. ;
"RTN","XIPMAILA",25,0)
FIPS .. ;Is this FIPS an exception?
"RTN","XIPMAILA",26,0)
 .. F I=1:1 S DATA=$T(E513+I),DATA=$P(DATA,";;",2) Q:DATA["EOD"  S:$P(D513,U)=$P(DATA,U) FLAG=1
"RTN","XIPMAILA",27,0)
 .. I 'FLAG D  S ERR=1 Q
"RTN","XIPMAILA",28,0)
 ... S XIPM("A",LN)="Invalid COUNTY CODE: "_$P(D513,U)_", County: "_$P(D513,U,2)_", State: "_$P(^DIC(5,+STATE,0),U),LN=LN+1
"RTN","XIPMAILA",29,0)
 ... S XIPM("A",LN)="  Setting INACTIVE DATE to: "_$$FMTE^XLFDT($G(DT)),LN=LN+1
"RTN","XIPMAILA",30,0)
 ... N DIERR,ZERR
"RTN","XIPMAILA",31,0)
 ... S FDA(5.13,IEN_",",3)=$G(DT)
"RTN","XIPMAILA",32,0)
 ... D FILE^DIE("","FDA","ZERR") ;Set INACTIVE DATE in file 5.13
"RTN","XIPMAILA",33,0)
 ... I 'STATE Q
"RTN","XIPMAILA",34,0)
 ... I 'COUNTY Q
"RTN","XIPMAILA",35,0)
 ... K FDA
"RTN","XIPMAILA",36,0)
 ... S FDA(5.01,STATE_","_COUNTY_",",5)=$G(DT)
"RTN","XIPMAILA",37,0)
 ... D FILE^DIE("","FDA","ZERR") ;Set INACTIVE DATE in file 5, sub-file 5.01
"RTN","XIPMAILA",38,0)
 ... Q
"RTN","XIPMAILA",39,0)
 .. Q
"RTN","XIPMAILA",40,0)
 . Q
"RTN","XIPMAILA",41,0)
EXIT I 'ERR S XIPM("A",LN)="No problems found."
"RTN","XIPMAILA",42,0)
 Q
"RTN","XIPMAILA",43,0)
 ;
"RTN","XIPMAILA",44,0)
 ; File #5.13 Data exceptions
"RTN","XIPMAILA",45,0)
E513 ;FIPS^COUNTY^STATE
"RTN","XIPMAILA",46,0)
 ;;12025^DADE^FLORIDA
"RTN","XIPMAILA",47,0)
 ;;15005^KALAWAO^HAWAII
"RTN","XIPMAILA",48,0)
 ;;30113^YELLOWSTONE NATIONAL PARK^MONTANA
"RTN","XIPMAILA",49,0)
 ;;51515^BEDFORD (CITY)^VIRGINIA
"RTN","XIPMAILA",50,0)
 ;;51595^EMPORIA (CITY)^VIRGINIA
"RTN","XIPMAILA",51,0)
 ;;51560^CLIFTON FORGE (CITY)^VIRGINIA
"RTN","XIPMAILA",52,0)
 ;;58260^ALBERTA^ALBERTA
"RTN","XIPMAILA",53,0)
 ;;59260^BRITISH COLUMBIA^BRITISH COLUMBIA
"RTN","XIPMAILA",54,0)
 ;;60010^EASTERN (DISTRICT)^AMERICAN SAMOA
"RTN","XIPMAILA",55,0)
 ;;60020^MANU'A (DISTRICT)^AMERICAN SAMOA
"RTN","XIPMAILA",56,0)
 ;;60030^ROSE ISLAND^AMERICAN SAMOA
"RTN","XIPMAILA",57,0)
 ;;60040^SWAINS ISLAND^AMERICAN SAMOA
"RTN","XIPMAILA",58,0)
 ;;61260^MANITOBA^MANITOBA
"RTN","XIPMAILA",59,0)
 ;;62260^NEW BRUNSWICK^NEW BRUNSWICK
"RTN","XIPMAILA",60,0)
 ;;63260^NEWFOUNDLAND^NEWFOUNDLAND
"RTN","XIPMAILA",61,0)
 ;;64002^CHUUK^FEDERATED STATES OF MICRONESIA
"RTN","XIPMAILA",62,0)
 ;;64005^KOSRAE^FEDERATED STATES OF MICRONESIA
"RTN","XIPMAILA",63,0)
 ;;64040^POHNPEI^FEDERATED STATES OF MICRONESIA
"RTN","XIPMAILA",64,0)
 ;;64060^YAP^FEDERATED STATES OF MICRONESIA
"RTN","XIPMAILA",65,0)
 ;;65260^NOVA SCOTIA^NOVA SCOTIA
"RTN","XIPMAILA",66,0)
 ;;68007^AILINGINAE^MARSHALL ISLANDS
"RTN","XIPMAILA",67,0)
 ;;68010^AILINGLAPLAP^MARSHALL ISLANDS
"RTN","XIPMAILA",68,0)
 ;;68030^AILUK^MARSHALL ISLANDS
"RTN","XIPMAILA",69,0)
 ;;68040^ARNO^MARSHALL ISLANDS
"RTN","XIPMAILA",70,0)
 ;;68050^AUR^MARSHALL ISLANDS
"RTN","XIPMAILA",71,0)
 ;;68060^BIKAR^MARSHALL ISLANDS
"RTN","XIPMAILA",72,0)
 ;;68070^BIKINI^MARSHALL ISLANDS
"RTN","XIPMAILA",73,0)
 ;;68073^BOKAK^MARSHALL ISLANDS
"RTN","XIPMAILA",74,0)
 ;;68080^EBON^MARSHALL ISLANDS
"RTN","XIPMAILA",75,0)
 ;;68090^ENEWETAK^MARSHALL ISLANDS
"RTN","XIPMAILA",76,0)
 ;;68100^ERIKUB^MARSHALL ISLANDS
"RTN","XIPMAILA",77,0)
 ;;68110^JABAT^MARSHALL ISLANDS
"RTN","XIPMAILA",78,0)
 ;;68120^JALUIT^MARSHALL ISLANDS
"RTN","XIPMAILA",79,0)
 ;;68130^JEMO^MARSHALL ISLANDS
"RTN","XIPMAILA",80,0)
 ;;68140^KILI^MARSHALL ISLANDS
"RTN","XIPMAILA",81,0)
 ;;68150^KWAJALEIN^MARSHALL ISLANDS
"RTN","XIPMAILA",82,0)
 ;;68160^LAE^MARSHALL ISLANDS
"RTN","XIPMAILA",83,0)
 ;;68170^LIB^MARSHALL ISLANDS
"RTN","XIPMAILA",84,0)
 ;;68180^LIKIEP^MARSHALL ISLANDS
"RTN","XIPMAILA",85,0)
 ;;68190^MAJURO^MARSHALL ISLANDS
"RTN","XIPMAILA",86,0)
 ;;68300^MALOELAP^MARSHALL ISLANDS
"RTN","XIPMAILA",87,0)
 ;;68310^MEJIT^MARSHALL ISLANDS
"RTN","XIPMAILA",88,0)
 ;;68320^MILI^MARSHALL ISLANDS
"RTN","XIPMAILA",89,0)
 ;;68330^NAMORIK^MARSHALL ISLANDS
"RTN","XIPMAILA",90,0)
 ;;68340^NAMU^MARSHALL ISLANDS
"RTN","XIPMAILA",91,0)
 ;;68350^RONGELAP^MARSHALL ISLANDS
"RTN","XIPMAILA",92,0)
 ;;68360^RONGRIK^MARSHALL ISLANDS
"RTN","XIPMAILA",93,0)
 ;;68385^TOKE^MARSHALL ISLANDS
"RTN","XIPMAILA",94,0)
 ;;68390^UJAE^MARSHALL ISLANDS
"RTN","XIPMAILA",95,0)
 ;;68400^UJELANG^MARSHALL ISLANDS
"RTN","XIPMAILA",96,0)
 ;;68410^UTRIK^MARSHALL ISLANDS
"RTN","XIPMAILA",97,0)
 ;;68420^WOTHO^MARSHALL ISLANDS
"RTN","XIPMAILA",98,0)
 ;;68430^WOTJE^MARSHALL ISLANDS
"RTN","XIPMAILA",99,0)
 ;;69085^NORTHERN ISLANDS^NORTHERN MARIANA ISLANDS
"RTN","XIPMAILA",100,0)
 ;;69100^ROTA^NORTHERN MARIANA ISLANDS
"RTN","XIPMAILA",101,0)
 ;;69110^SAIPAN^NORTHERN MARIANA ISLANDS
"RTN","XIPMAILA",102,0)
 ;;69120^TINIAN^NORTHERN MARIANA ISLANDS
"RTN","XIPMAILA",103,0)
 ;;70002^AIMELIIK^PALAU
"RTN","XIPMAILA",104,0)
 ;;70004^AIRAI^PALAU
"RTN","XIPMAILA",105,0)
 ;;70010^ANGAUR^PALAU
"RTN","XIPMAILA",106,0)
 ;;70050^HATOBOHEI^PALAU
"RTN","XIPMAILA",107,0)
 ;;70100^KAYANGEL^PALAU
"RTN","XIPMAILA",108,0)
 ;;70150^KOROR^PALAU
"RTN","XIPMAILA",109,0)
 ;;70212^MELEKEOK^PALAU
"RTN","XIPMAILA",110,0)
 ;;70214^NGARAARD^PALAU
"RTN","XIPMAILA",111,0)
 ;;70218^NGARCHELONG^PALAU
"RTN","XIPMAILA",112,0)
 ;;70222^NGARDMAU^PALAU
"RTN","XIPMAILA",113,0)
 ;;70224^NGATPANG^PALAU
"RTN","XIPMAILA",114,0)
 ;;70226^NGCHESAR^PALAU
"RTN","XIPMAILA",115,0)
 ;;70227^NGEREMLENGUI^PALAU
"RTN","XIPMAILA",116,0)
 ;;70228^NGIWAL^PALAU
"RTN","XIPMAILA",117,0)
 ;;70350^PELELIU^PALAU
"RTN","XIPMAILA",118,0)
 ;;70370^SONSOROL^PALAU
"RTN","XIPMAILA",119,0)
 ;;73260^NORTHWEST TERRITORIES^NORTHWEST TERRITORIES
"RTN","XIPMAILA",120,0)
 ;;74050^BAKER ISLAND^U.S. MINOR OUTLYING ISLANDS
"RTN","XIPMAILA",121,0)
 ;;74100^HOWLAND ISLAND^U.S. MINOR OUTLYING ISLANDS
"RTN","XIPMAILA",122,0)
 ;;74150^JARVIS ISLAND^U.S. MINOR OUTLYING ISLANDS
"RTN","XIPMAILA",123,0)
 ;;74200^JOHNSTON ISLAND^U.S. MINOR OUTLYING ISLANDS
"RTN","XIPMAILA",124,0)
 ;;74250^KINGMAN REEF^U.S. MINOR OUTLYING ISLANDS
"RTN","XIPMAILA",125,0)
 ;;74300^MIDWAY ISLANDS^U.S. MINOR OUTLYING ISLANDS
"RTN","XIPMAILA",126,0)
 ;;74350^NAVASSA ISLAND^U.S. MINOR OUTLYING ISLANDS
"RTN","XIPMAILA",127,0)
 ;;74400^PALMYRA ATOLL^U.S. MINOR OUTLYING ISLANDS
"RTN","XIPMAILA",128,0)
 ;;74450^WAKE ISLAND^U.S. MINOR OUTLYING ISLANDS
"RTN","XIPMAILA",129,0)
 ;;75260^ONTARIO^ONTARIO
"RTN","XIPMAILA",130,0)
 ;;77260^PRINCE EDWARD ISLAND^PRINCE EDWARD ISLAND
"RTN","XIPMAILA",131,0)
 ;;80260^QUEBEC^QUEBEC
"RTN","XIPMAILA",132,0)
 ;;82260^SASKATCHEWAN^SASKATCHEWAN
"RTN","XIPMAILA",133,0)
 ;;83260^YUKON TERRITORY^YUKON TERRITORY
"RTN","XIPMAILA",134,0)
 ;;85260^ARMED FORCES AMER (EXC CA^ARMED FORCES AMER (EXC CANADA)
"RTN","XIPMAILA",135,0)
 ;;87000^ARMED FORCES^ARMED FORCES AF,EU,ME,CA
"RTN","XIPMAILA",136,0)
 ;;87260^ARMED FORCES AF,EU,ME,CA^ARMED FORCES AF,EU,ME,CA
"RTN","XIPMAILA",137,0)
 ;;88260^ARMED FORCES PACIFIC^ARMED FORCES PACIFIC
"RTN","XIPMAILA",138,0)
 ;;90999^ALL OTHER FOREIGN^FOREIGN COUNTRY
"RTN","XIPMAILA",139,0)
 ;;91260^CANADA^CANADA
"RTN","XIPMAILA",140,0)
 ;;92595^MEXICO^MEXICO
"RTN","XIPMAILA",141,0)
 ;;93999^EUROPE^EUROPE
"RTN","XIPMAILA",142,0)
 ;;94260^NUNAVUT PROVINCE^NUNAVUT PROVINCE
"RTN","XIPMAILA",143,0)
 ;;96725^PHILIPINES^PHILIPPINES
"RTN","XIPMAILA",144,0)
 ;;EOD^EOD^EOD
"RTN","XIPMAILB")
0^8^B33220563
"RTN","XIPMAILB",1,0)
XIPMAILB ;OOIFO/SO- SCAN STATE(#5) FILE FOR EXCEPTIONS;6:41 AM  4 Feb 2006;12/30/05  07:38
"RTN","XIPMAILB",2,0)
 ;;8.0;KERNEL;**378**;Jul 10, 1995;Build 59
"RTN","XIPMAILB",3,0)
 ; Checking State file for NAME duplicates
"RTN","XIPMAILB",4,0)
 N I1,LN,ERR,ERRTBL
"RTN","XIPMAILB",5,0)
 S LN=1,ERR=0
"RTN","XIPMAILB",6,0)
 S XIPM("B",LN)="Begin checking STATE(#5)...",LN=LN+1
"RTN","XIPMAILB",7,0)
 S I1=0
"RTN","XIPMAILB",8,0)
 F  S I1=$O(^DIC(5,I1)) Q:'I1  D
"RTN","XIPMAILB",9,0)
 . I '$D(^DIC(5,I1,0)) Q  ;Bogus entry
"RTN","XIPMAILB",10,0)
NC . D
"RTN","XIPMAILB",11,0)
 .. ;Duplicate Name check
"RTN","XIPMAILB",12,0)
 .. N VALUE,DIERR,Z,ZERR
"RTN","XIPMAILB",13,0)
 .. S VALUE=$P(^DIC(5,I1,0),U)
"RTN","XIPMAILB",14,0)
 .. I VALUE="" Q  ;No NAME
"RTN","XIPMAILB",15,0)
 .. D FIND^DIC(5,"","@;.01;1;2","MPQX",VALUE,"","","I $P(^(0),U,1)=VALUE","","Z","ZERR")
"RTN","XIPMAILB",16,0)
 .. I $D(DIERR) Q
"RTN","XIPMAILB",17,0)
 .. I $P(Z("DILIST",0),U)<2 Q
"RTN","XIPMAILB",18,0)
 .. N I2
"RTN","XIPMAILB",19,0)
 .. S I2=0,ERRTBL=""
"RTN","XIPMAILB",20,0)
 .. F  S I2=$O(Z("DILIST",I2)) Q:'I2  D
"RTN","XIPMAILB",21,0)
 ... I $D(ERRTBL($P(Z("DILIST",I2,0),U))) Q  ; Already reported error
"RTN","XIPMAILB",22,0)
 ... S XIPM("B",LN)="IEN: "_$P(Z("DILIST",I2,0),U)_", State: "_$P(Z("DILIST",I2,0),U,2)_", is a duplicate State NAME(#.01)"
"RTN","XIPMAILB",23,0)
 ... S LN=LN+1,ERR=1
"RTN","XIPMAILB",24,0)
 ... S ERRTBL($P(Z("DILIST",I2,0),U))="" ; Table IEN
"RTN","XIPMAILB",25,0)
 ... Q
"RTN","XIPMAILB",26,0)
 .. Q
"RTN","XIPMAILB",27,0)
 . K ERRTBL S ERRTBL=""
"RTN","XIPMAILB",28,0)
AC . D
"RTN","XIPMAILB",29,0)
 .. ;Duplicate Abbreviation check
"RTN","XIPMAILB",30,0)
 .. N VALUE,DIERR,Z,ZERR
"RTN","XIPMAILB",31,0)
 .. S VALUE=$P(^DIC(5,I1,0),U,2)
"RTN","XIPMAILB",32,0)
 .. I VALUE="" Q  ;No ABBREVIATION
"RTN","XIPMAILB",33,0)
 .. D FIND^DIC(5,"","@;.01;1;2","MPQX",VALUE,"","","I $P(^(0),U,2)=VALUE","","Z","ZERR")
"RTN","XIPMAILB",34,0)
 .. I $D(DIERR) Q
"RTN","XIPMAILB",35,0)
 .. I $P(Z("DILIST",0),U)<2 Q
"RTN","XIPMAILB",36,0)
 .. N I2
"RTN","XIPMAILB",37,0)
 .. S I2=0
"RTN","XIPMAILB",38,0)
 .. F  S I2=$O(Z("DILIST",I2)) Q:'I2  D
"RTN","XIPMAILB",39,0)
 ... I $D(ERRTBL($P(Z("DILIST",I2,0),U))) Q  ; Already reported error
"RTN","XIPMAILB",40,0)
 ... S XIPM("B",LN)="IEN: "_$P(Z("DILIST",I2,0),U)_", ABREV: "_$P(Z("DILIST",I2,0),U,3)_", is a duplicate State ABBREVIATION(#1)"
"RTN","XIPMAILB",41,0)
 ... S LN=LN+1,ERR=1
"RTN","XIPMAILB",42,0)
 ... S ERRTBL($P(Z("DILIST",I2,0),U))="" ; Table IEN
"RTN","XIPMAILB",43,0)
 ... Q
"RTN","XIPMAILB",44,0)
 .. Q
"RTN","XIPMAILB",45,0)
 . K ERRTBL S ERRTBL=""
"RTN","XIPMAILB",46,0)
VC . D
"RTN","XIPMAILB",47,0)
 .. ;Duplicate VA State Code check
"RTN","XIPMAILB",48,0)
 .. N VALUE,DIERR,Z,ZERR
"RTN","XIPMAILB",49,0)
 .. S VALUE=$P(^DIC(5,I1,0),U,3)
"RTN","XIPMAILB",50,0)
 .. I VALUE="" Q  ;No VA STATE CODE
"RTN","XIPMAILB",51,0)
 .. D FIND^DIC(5,"","@;.01;1;2","MPQX",VALUE,"","","I $P(^(0),U,3)=VALUE","","Z","ZERR")
"RTN","XIPMAILB",52,0)
 .. I $D(DIERR) Q
"RTN","XIPMAILB",53,0)
 .. I $P(Z("DILIST",0),U)<2 Q
"RTN","XIPMAILB",54,0)
 .. N I2
"RTN","XIPMAILB",55,0)
 .. S I2=0
"RTN","XIPMAILB",56,0)
 .. F  S I2=$O(Z("DILIST",I2)) Q:'I2  D
"RTN","XIPMAILB",57,0)
 ... I $D(ERRTBL($P(Z("DILIST",I2,0),U))) Q  ; Already reported error
"RTN","XIPMAILB",58,0)
 ... S XIPM("B",LN)="IEN: "_$P(Z("DILIST",I2,0),U)_", VA CODE: "_$P(Z("DILIST",I2,0),U,4)_", is a duplicate State VA STATE CODE(#2)"
"RTN","XIPMAILB",59,0)
 ... S LN=LN+1,ERR=1=""
"RTN","XIPMAILB",60,0)
 ... S ERRTBL($P(Z("DILIST",I2,0),U))="" ; Table IEN
"RTN","XIPMAILB",61,0)
 ... Q
"RTN","XIPMAILB",62,0)
 .. Q
"RTN","XIPMAILB",63,0)
 . Q
"RTN","XIPMAILB",64,0)
TC ; Now check for missing States against table
"RTN","XIPMAILB",65,0)
 N TMP,I,DATA
"RTN","XIPMAILB",66,0)
 F I=1:1 S DATA=$T(D5+I) Q:$P(DATA,";;",2)["EOD"  D
"RTN","XIPMAILB",67,0)
 . S DATA=$P(DATA,";;",2)
"RTN","XIPMAILB",68,0)
 . ;             NAME^ABBREVIATION^VA STATE CODE
"RTN","XIPMAILB",69,0)
 . S TMP($P(DATA,U,2)_U_$P(DATA,U,3)_U_$P(DATA,U,1))=""
"RTN","XIPMAILB",70,0)
 . Q
"RTN","XIPMAILB",71,0)
 S I1=0
"RTN","XIPMAILB",72,0)
 F  S I1=$O(^DIC(5,I1)) Q:'I1  D
"RTN","XIPMAILB",73,0)
 . N X,X1
"RTN","XIPMAILB",74,0)
 . I '$D(^DIC(5,I1,0))#2 Q
"RTN","XIPMAILB",75,0)
 . S X=^DIC(5,I1,0)
"RTN","XIPMAILB",76,0)
 . I '$P(X,U,5) Q  ;Not a recognized VHA/AAC State
"RTN","XIPMAILB",77,0)
 . S X=$P(X,U,1,3)
"RTN","XIPMAILB",78,0)
 . I $D(TMP(X)) S TMP(X)=1 Q
"RTN","XIPMAILB",79,0)
 . S XIPM("B",LN)="IEN: "_I1_", NAME: "_$P(X,U,1)_", ABREV: "_$P(X,U,2)_", VA CODE: "_$P(X,U,3)_", is not a recognized VistA State",LN=LN+1,ERR=1
"RTN","XIPMAILB",80,0)
 . Q
"RTN","XIPMAILB",81,0)
 S I1=""
"RTN","XIPMAILB",82,0)
 F  S I1=$O(TMP(I1)) Q:I1=""  I TMP(I1)="" D
"RTN","XIPMAILB",83,0)
 . S XIPM("B",LN)="NAME: "_$P(I1,U,1)_", ABREV: "_$P(I1,U,2)_", VA CODE: "_$P(I1,U,3)_", State not found in STATE(#5) file",LN=LN+1,ERR=1
"RTN","XIPMAILB",84,0)
 .Q
"RTN","XIPMAILB",85,0)
EXIT I 'ERR S XIPM("B",LN)="No problems found."
"RTN","XIPMAILB",86,0)
 Q
"RTN","XIPMAILB",87,0)
 ;
"RTN","XIPMAILB",88,0)
D5 ;VA STATE CODE^NAME^ABBREVIATION^AAC RECOGNIZED^US STATE OR POSSESSION
"RTN","XIPMAILB",89,0)
 ;;01^ALABAMA^AL^1^1
"RTN","XIPMAILB",90,0)
 ;;02^ALASKA^AK^1^1
"RTN","XIPMAILB",91,0)
 ;;58^ALBERTA^AB^1^0
"RTN","XIPMAILB",92,0)
 ;;60^AMERICAN SAMOA^AS^1^1
"RTN","XIPMAILB",93,0)
 ;;04^ARIZONA^AZ^1^1
"RTN","XIPMAILB",94,0)
 ;;05^ARKANSAS^AR^1^1
"RTN","XIPMAILB",95,0)
 ;;87^ARMED FORCES AF,EU,ME,CA^AE^1^1
"RTN","XIPMAILB",96,0)
 ;;85^ARMED FORCES AMER (EXC CANADA)^AA^1^1
"RTN","XIPMAILB",97,0)
 ;;88^ARMED FORCES PACIFIC^AP^1^1
"RTN","XIPMAILB",98,0)
 ;;59^BRITISH COLUMBIA^BC^1^0
"RTN","XIPMAILB",99,0)
 ;;06^CALIFORNIA^CA^1^1
"RTN","XIPMAILB",100,0)
 ;;08^COLORADO^CO^1^1
"RTN","XIPMAILB",101,0)
 ;;09^CONNECTICUT^CT^1^1
"RTN","XIPMAILB",102,0)
 ;;10^DELAWARE^DE^1^1
"RTN","XIPMAILB",103,0)
 ;;11^DISTRICT OF COLUMBIA^DC^1^1
"RTN","XIPMAILB",104,0)
 ;;93^EUROPE^EU^1^0
"RTN","XIPMAILB",105,0)
 ;;64^FEDERATED STATES OF MICRONESIA^FM^1^1
"RTN","XIPMAILB",106,0)
 ;;12^FLORIDA^FL^1^1
"RTN","XIPMAILB",107,0)
 ;;90^FOREIGN COUNTRY^FG^1^0
"RTN","XIPMAILB",108,0)
 ;;13^GEORGIA^GA^1^1
"RTN","XIPMAILB",109,0)
 ;;66^GUAM^GU^1^1
"RTN","XIPMAILB",110,0)
 ;;15^HAWAII^HI^1^1
"RTN","XIPMAILB",111,0)
 ;;16^IDAHO^ID^1^1
"RTN","XIPMAILB",112,0)
 ;;17^ILLINOIS^IL^1^1
"RTN","XIPMAILB",113,0)
 ;;18^INDIANA^IN^1^1
"RTN","XIPMAILB",114,0)
 ;;19^IOWA^IA^1^1
"RTN","XIPMAILB",115,0)
 ;;20^KANSAS^KS^1^1
"RTN","XIPMAILB",116,0)
 ;;21^KENTUCKY^KY^1^1
"RTN","XIPMAILB",117,0)
 ;;22^LOUISIANA^LA^1^1
"RTN","XIPMAILB",118,0)
 ;;23^MAINE^ME^1^1
"RTN","XIPMAILB",119,0)
 ;;61^MANITOBA^MB^1^0
"RTN","XIPMAILB",120,0)
 ;;68^MARSHALL ISLANDS^MH^1^1
"RTN","XIPMAILB",121,0)
 ;;24^MARYLAND^MD^1^1
"RTN","XIPMAILB",122,0)
 ;;25^MASSACHUSETTS^MA^1^1
"RTN","XIPMAILB",123,0)
 ;;92^MEXICO^MX^1^0
"RTN","XIPMAILB",124,0)
 ;;26^MICHIGAN^MI^1^1
"RTN","XIPMAILB",125,0)
 ;;27^MINNESOTA^MN^1^1
"RTN","XIPMAILB",126,0)
 ;;28^MISSISSIPPI^MS^1^1
"RTN","XIPMAILB",127,0)
 ;;29^MISSOURI^MO^1^1
"RTN","XIPMAILB",128,0)
 ;;30^MONTANA^MT^1^1
"RTN","XIPMAILB",129,0)
 ;;31^NEBRASKA^NE^1^1
"RTN","XIPMAILB",130,0)
 ;;32^NEVADA^NV^1^1
"RTN","XIPMAILB",131,0)
 ;;62^NEW BRUNSWICK^NB^1^0
"RTN","XIPMAILB",132,0)
 ;;33^NEW HAMPSHIRE^NH^1^1
"RTN","XIPMAILB",133,0)
 ;;34^NEW JERSEY^NJ^1^1
"RTN","XIPMAILB",134,0)
 ;;35^NEW MEXICO^NM^1^1
"RTN","XIPMAILB",135,0)
 ;;36^NEW YORK^NY^1^1
"RTN","XIPMAILB",136,0)
 ;;63^NEWFOUNDLAND^NF^1^0
"RTN","XIPMAILB",137,0)
 ;;37^NORTH CAROLINA^NC^1^1
"RTN","XIPMAILB",138,0)
 ;;38^NORTH DAKOTA^ND^1^1
"RTN","XIPMAILB",139,0)
 ;;69^NORTHERN MARIANA ISLANDS^MP^1^1
"RTN","XIPMAILB",140,0)
 ;;73^NORTHWEST TERRITORIES^NT^1^0
"RTN","XIPMAILB",141,0)
 ;;65^NOVA SCOTIA^NS^1^0
"RTN","XIPMAILB",142,0)
 ;;94^NUNAVUT PROVINCE^NU^1^0
"RTN","XIPMAILB",143,0)
 ;;39^OHIO^OH^1^1
"RTN","XIPMAILB",144,0)
 ;;40^OKLAHOMA^OK^1^1
"RTN","XIPMAILB",145,0)
 ;;75^ONTARIO^ON^1^0
"RTN","XIPMAILB",146,0)
 ;;41^OREGON^OR^1^1
"RTN","XIPMAILB",147,0)
 ;;70^PALAU^PW^1^0
"RTN","XIPMAILB",148,0)
 ;;42^PENNSYLVANIA^PA^1^1
"RTN","XIPMAILB",149,0)
 ;;96^PHILIPPINES^PH^1^0
"RTN","XIPMAILB",150,0)
 ;;77^PRINCE EDWARD ISLAND^PE^1^0
"RTN","XIPMAILB",151,0)
 ;;72^PUERTO RICO^PR^1^1
"RTN","XIPMAILB",152,0)
 ;;80^QUEBEC^QC^1^0
"RTN","XIPMAILB",153,0)
 ;;44^RHODE ISLAND^RI^1^1
"RTN","XIPMAILB",154,0)
 ;;82^SASKATCHEWAN^SK^1^0
"RTN","XIPMAILB",155,0)
 ;;45^SOUTH CAROLINA^SC^1^1
"RTN","XIPMAILB",156,0)
 ;;46^SOUTH DAKOTA^SD^1^1
"RTN","XIPMAILB",157,0)
 ;;47^TENNESSEE^TN^1^1
"RTN","XIPMAILB",158,0)
 ;;48^TEXAS^TX^1^1
"RTN","XIPMAILB",159,0)
 ;;74^U.S. MINOR OUTLYING ISLANDS^UM^1^1
"RTN","XIPMAILB",160,0)
 ;;49^UTAH^UT^1^1
"RTN","XIPMAILB",161,0)
 ;;50^VERMONT^VT^1^1
"RTN","XIPMAILB",162,0)
 ;;78^VIRGIN ISLANDS^VI^1^1
"RTN","XIPMAILB",163,0)
 ;;51^VIRGINIA^VA^1^1
"RTN","XIPMAILB",164,0)
 ;;53^WASHINGTON^WA^1^1
"RTN","XIPMAILB",165,0)
 ;;54^WEST VIRGINIA^WV^1^1
"RTN","XIPMAILB",166,0)
 ;;55^WISCONSIN^WI^1^1
"RTN","XIPMAILB",167,0)
 ;;56^WYOMING^WY^1^1
"RTN","XIPMAILB",168,0)
 ;;83^YUKON TERRITORY^YT^1^0
"RTN","XIPMAILB",169,0)
 ;;99999^EOD^EOD^EOD^EOD
"RTN","XIPPOST")
0^2^B7231902^B10187016
"RTN","XIPPOST",1,0)
XIPPOST ;ALB/BRM/OIFO/SO - STANDARD POST INSTALL FOR XIP;12:26 PM  20 Oct 2005
"RTN","XIPPOST",2,0)
 ;;8.0;KERNEL;**292,378**;Jul 10, 1995;Build 59
"RTN","XIPPOST",3,0)
 ;
"RTN","XIPPOST",4,0)
POST ; post install - correct state file pointers for 5.12 and 5.13
"RTN","XIPPOST",5,0)
 K ^DD(5.12,0,"ID",8) ; IA #4140
"RTN","XIPPOST",6,0)
 D
"RTN","XIPPOST",7,0)
 . N DIK
"RTN","XIPPOST",8,0)
 . S DIK="^DIC(5,"
"RTN","XIPPOST",9,0)
 . S DIK(0)="1^ADUALC"
"RTN","XIPPOST",10,0)
 . D ENALL^DIK
"RTN","XIPPOST",11,0)
 . Q
"RTN","XIPPOST",12,0)
 D RP512
"RTN","XIPPOST",13,0)
 D RP513
"RTN","XIPPOST",14,0)
 D ADDID
"RTN","XIPPOST",15,0)
 Q
"RTN","XIPPOST",16,0)
 ;
"RTN","XIPPOST",17,0)
RP512 ;Repoint Field #3 to proper STATE(#5) file entry
"RTN","XIPPOST",18,0)
 N IEN512,XIPSEED
"RTN","XIPPOST",19,0)
 S XIPSEED=1 ; Prevent "AD" xref from firing
"RTN","XIPPOST",20,0)
 D BMES^XPDUTL("   Updating State File pointers in file #5.12")
"RTN","XIPPOST",21,0)
 S IEN512=0
"RTN","XIPPOST",22,0)
 F  S IEN512=$O(^XIP(5.12,IEN512)) Q:'IEN512  D
"RTN","XIPPOST",23,0)
 . N IEN5,IEN513,VACODE
"RTN","XIPPOST",24,0)
 . S IEN513=$P($G(^XIP(5.12,IEN512,0)),"^",3) ;Get pointer to 5.13
"RTN","XIPPOST",25,0)
 . D
"RTN","XIPPOST",26,0)
 .. N DIERR,XIPERR
"RTN","XIPPOST",27,0)
 .. S VACODE=$$GET1^DIQ(5.13,IEN513_",",.01,"","","XIPERR")
"RTN","XIPPOST",28,0)
 .. S VACODE=$E(VACODE,1,2)
"RTN","XIPPOST",29,0)
 . S IEN5=0,IEN5=+$O(^DIC(5,"C",VACODE,IEN5))
"RTN","XIPPOST",30,0)
 . I IEN5 D  Q
"RTN","XIPPOST",31,0)
 .. N DIERR,XIPERR,FDA
"RTN","XIPPOST",32,0)
 .. S FDA("XIP",5.12,IEN512_",",3)=IEN5
"RTN","XIPPOST",33,0)
 .. D FILE^DIE("","FDA(""XIP"")","XIPERR")
"RTN","XIPPOST",34,0)
 .. I $D(XIPERR) D
"RTN","XIPPOST",35,0)
 ... N X
"RTN","XIPPOST",36,0)
 ... S X="File: 5.12 IEN: "_IEN512_" "_XIPERR("DIERR",1,"TEXT",1)
"RTN","XIPPOST",37,0)
 ... D BMES^XPDUTL(X)
"RTN","XIPPOST",38,0)
 . I 'IEN5 D  Q
"RTN","XIPPOST",39,0)
 .. N X
"RTN","XIPPOST",40,0)
 .. S X="File: 5.12 IEN: "_IEN512_" VA STATE CODE: "_VACODE_" is invalid."
"RTN","XIPPOST",41,0)
 .. D BMES^XPDUTL(X)
"RTN","XIPPOST",42,0)
 D BMES^XPDUTL("  Finished repointing file #5.12")
"RTN","XIPPOST",43,0)
 Q
"RTN","XIPPOST",44,0)
 ;
"RTN","XIPPOST",45,0)
RP513 ;Repoint Field #2 to proper STATE(#5) file entry
"RTN","XIPPOST",46,0)
 N IEN513,XIPSEED,VACODE
"RTN","XIPPOST",47,0)
 S XIPSEED=1 ; Prevent "AC" xref from firing
"RTN","XIPPOST",48,0)
 S IEN513=0
"RTN","XIPPOST",49,0)
 D BMES^XPDUTL("   Updating State File pointers in file #5.13")
"RTN","XIPPOST",50,0)
 F  S IEN513=$O(^XIP(5.13,IEN513)) Q:'IEN513  D
"RTN","XIPPOST",51,0)
 . N IEN5
"RTN","XIPPOST",52,0)
 . S VACODE=$P(^XIP(5.13,IEN513,0),"^")
"RTN","XIPPOST",53,0)
 . S VACODE=$E(VACODE,1,2)
"RTN","XIPPOST",54,0)
 . S IEN5=0,IEN5=+$O(^DIC(5,"C",VACODE,0))
"RTN","XIPPOST",55,0)
 . I 'IEN5 D  Q
"RTN","XIPPOST",56,0)
 .. S X="File: 5.13 IEN: "_IEN513_" VA STATE CODE: "_VACODE_" is invalid."
"RTN","XIPPOST",57,0)
 .. D BMES^XPDUTL(X)
"RTN","XIPPOST",58,0)
 . D
"RTN","XIPPOST",59,0)
 .. N DIERR,XIPERR,FDA
"RTN","XIPPOST",60,0)
 .. S FDA("XIP",5.13,IEN513_",",2)=IEN5
"RTN","XIPPOST",61,0)
 .. D FILE^DIE("","FDA(""XIP"")","XIPERR")
"RTN","XIPPOST",62,0)
 .. I $D(XIPERR) D
"RTN","XIPPOST",63,0)
 ... S X="File: 5.13 IEN: "_IEN513_" "_XIPERR("DIERR",1,"TEXT",1)
"RTN","XIPPOST",64,0)
 ... D BMES^XPDUTL(X)
"RTN","XIPPOST",65,0)
 D BMES^XPDUTL(" Finished repointing file #5.13")
"RTN","XIPPOST",66,0)
 Q
"RTN","XIPPOST",67,0)
 ;
"RTN","XIPPOST",68,0)
ADDID ; Add Write ID node & Up date $P#2 of File Header
"RTN","XIPPOST",69,0)
 S ^DD(5.12,0,"ID","W1")="D EN^DDIOL($P(^(0),U,2)_""  ""_$P(^(0),U,6)_""  ""_$P(^(0),U,7),"""",""?0"")"
"RTN","XIPPOST",70,0)
 S $P(^XIP(5.12,0),"^",2)="5.12I"
"RTN","XIPPOST",71,0)
 Q
"RTN","XIPSYNC")
0^6^B6027849^B5380874
"RTN","XIPSYNC",1,0)
XIPSYNC ;OIFOO/SO- SYNC UP FILE 5'S COUNTY MULTIPLE WITH 5.13;6:56 AM  16 Nov 2005
"RTN","XIPSYNC",2,0)
 ;;8.0;KERNEL;**328,378**;Jul 10, 1995;Build 59
"RTN","XIPSYNC",3,0)
 Q
"RTN","XIPSYNC",4,0)
EP1 ;MAIN ENTRY POINT
"RTN","XIPSYNC",5,0)
 N XIPQ S XIPQ=0 ;ALLOW DIALOG TO DISPLAY OR PRINT
"RTN","XIPSYNC",6,0)
 ;
"RTN","XIPSYNC",7,0)
 N XUMF S XUMF=1 ;ALLOW EDITING ;8*378
"RTN","XIPSYNC",8,0)
 ;
"RTN","XIPSYNC",9,0)
 D S1,S2
"RTN","XIPSYNC",10,0)
 Q
"RTN","XIPSYNC",11,0)
 ;
"RTN","XIPSYNC",12,0)
DEQUE ;DEQUEUING ENTRY POINT
"RTN","XIPSYNC",13,0)
 N XIPQ S XIPQ=1 ;KEEP DIALOG FROM DISPLAYING OR PRINTING
"RTN","XIPSYNC",14,0)
 ;
"RTN","XIPSYNC",15,0)
 N XUMF S XUMF=1 ;ALLOW EDITING ;8*378
"RTN","XIPSYNC",16,0)
 ;
"RTN","XIPSYNC",17,0)
 D S1,S2
"RTN","XIPSYNC",18,0)
 Q
"RTN","XIPSYNC",19,0)
 ;
"RTN","XIPSYNC",20,0)
S1 ;SET INACTIVE DATE FOR ALL COUNTIES TO DT
"RTN","XIPSYNC",21,0)
 N ST
"RTN","XIPSYNC",22,0)
 S ST=0 ;ST=STATE IEN
"RTN","XIPSYNC",23,0)
 I 'XIPQ D MES^XPDUTL("Begin updating COUNTY multiple...")
"RTN","XIPSYNC",24,0)
 F  S ST=$O(^DIC(5,ST)) Q:'ST  D
"RTN","XIPSYNC",25,0)
 . I +$P(^DIC(5,ST,0),U,3)>56,+$P(^(0),U,3)'=72 Q  ;NOT US STATE OR PR
"RTN","XIPSYNC",26,0)
 . N CO S CO=0 ;CO=COUNTY IEN
"RTN","XIPSYNC",27,0)
 . F  S CO=$O(^DIC(5,ST,1,CO)) Q:'CO  D
"RTN","XIPSYNC",28,0)
 .. I $P(^DIC(5,ST,1,CO,0),U,5)]"" Q  ;DON'T CHANGE DATE
"RTN","XIPSYNC",29,0)
 .. N FDA,DIERR,EM
"RTN","XIPSYNC",30,0)
 .. S FDA(5.01,CO_","_ST_",",5)=DT
"RTN","XIPSYNC",31,0)
 .. D FILE^DIE("","FDA","EM")
"RTN","XIPSYNC",32,0)
 .. Q
"RTN","XIPSYNC",33,0)
 Q
"RTN","XIPSYNC",34,0)
 ;
"RTN","XIPSYNC",35,0)
S2 ;EDIT COUNTY MULTIPLE USING FILE 5.13
"RTN","XIPSYNC",36,0)
 N IEN,X,FST,FCO
"RTN","XIPSYNC",37,0)
 ;FST=2 DIGIT STATE FIPS CODE, FCO=3 DIGIT COUNTY FIPS CODE
"RTN","XIPSYNC",38,0)
 S IEN=0 ;5.13'S IEN
"RTN","XIPSYNC",39,0)
 F  S IEN=$O(^XIP(5.13,IEN)) Q:'IEN  S X=^XIP(5.13,IEN,0),FST=$E(X,1,2),FCO=$E(X,3,5) D
"RTN","XIPSYNC",40,0)
 . N ST,CO
"RTN","XIPSYNC",41,0)
 . S ST=0,CO=0
"RTN","XIPSYNC",42,0)
 . S ST=$O(^DIC(5,"C",FST,ST))
"RTN","XIPSYNC",43,0)
 . I 'ST,'XIPQ D MES^XPDUTL("Can not find STATE CODE: "_FST_" in STATE file.") Q
"RTN","XIPSYNC",44,0)
 . S CO=$O(^DIC(5,ST,1,"C",FCO,CO))
"RTN","XIPSYNC",45,0)
 . I 'CO D  Q  ;ADD COUNTY
"RTN","XIPSYNC",46,0)
 .. N DIERR,EM,FDA
"RTN","XIPSYNC",47,0)
 .. I 'XIPQ D MES^XPDUTL("Adding County: "_$P(X,U,2)_"("_FCO_")"_" to State: "_$$GET1^DIQ(5,ST_",",.01))
"RTN","XIPSYNC",48,0)
 .. S FDA(5.01,"?+1,"_ST_",",.01)=$P(X,U,2)
"RTN","XIPSYNC",49,0)
 .. S FDA(5.01,"?+1,"_ST_",",2)=FCO
"RTN","XIPSYNC",50,0)
 .. D UPDATE^DIE("","FDA","","EM")
"RTN","XIPSYNC",51,0)
 .. Q
"RTN","XIPSYNC",52,0)
 . I CO D  Q  ;REACTIVATE COUNTY
"RTN","XIPSYNC",53,0)
 .. N DIERR,EM,FDA
"RTN","XIPSYNC",54,0)
 .. S FDA(5.01,CO_","_ST_",",5)=$S($P(X,U,4)]"":$P(X,U,4),1:"")
"RTN","XIPSYNC",55,0)
 .. D  ;SPELL CHECK 5.13 v STATE FILE'S COUNTY
"RTN","XIPSYNC",56,0)
 ... N DIERR,X1
"RTN","XIPSYNC",57,0)
 ... S X1=$$GET1^DIQ(5.01,CO_",",.01)
"RTN","XIPSYNC",58,0)
 ... I X1'=$P(X,U,2) S FDA(5.01,CO_","_ST_",",.01)=$P(X,U,2)
"RTN","XIPSYNC",59,0)
 .. D FILE^DIE("","FDA","EM")
"RTN","XIPSYNC",60,0)
 .. Q
"RTN","XIPSYNC",61,0)
 . Q
"RTN","XIPSYNC",62,0)
 I 'XIPQ D MES^XPDUTL("Finished updating COUNTY multiple.")
"RTN","XIPSYNC",63,0)
 Q
"RTN","XU8P378")
0^^B1308591
"RTN","XU8P378",1,0)
XU8P378 ;OOIFO/SO- POST XU378 DRIVER ;7:06 AM  27 Dec 2005
"RTN","XU8P378",2,0)
 ;;8.0;KERNEL;**378**;Jul 10, 1995;Build 59
"RTN","XU8P378",3,0)
 ;
"RTN","XU8P378",4,0)
 D ^XU8P378A ;Make any edits to the State & County Code files
"RTN","XU8P378",5,0)
 ;
"RTN","XU8P378",6,0)
 ; Set current C xrefs in 5 to Q
"RTN","XU8P378",7,0)
 S ^DD(5,1,1,1,1)="Q"
"RTN","XU8P378",8,0)
 S ^DD(5,1,1,1,2)="Q"
"RTN","XU8P378",9,0)
 S ^DD(5,1,1,1,3)="Used in conjunction with the 'ADUALC' xref."
"RTN","XU8P378",10,0)
 S ^DD(5,1,"DT")=$G(DT)
"RTN","XU8P378",11,0)
 S ^DD(5,2,1,1,1)="Q"
"RTN","XU8P378",12,0)
 S ^DD(5,2,1,1,2)="Q"
"RTN","XU8P378",13,0)
 S ^DD(5,2,1,1,3)="Used in conjunction with the 'ADUALC' xref."
"RTN","XU8P378",14,0)
 S ^DD(5,2,"DT")=$G(DT)
"RTN","XU8P378",15,0)
 ;
"RTN","XU8P378",16,0)
 D ^XU8P378B ;Install new ADUALC xref
"RTN","XU8P378",17,0)
 D ^XU8P378C ;Make DD changes for files 5, 5.12, & 5.13
"RTN","XU8P378",18,0)
 D EP1^XIPSYNC ;Sync file 5 to file 5.13
"RTN","XU8P378",19,0)
 ; Clean up COUNTY CODE(#5.13) file first
"RTN","XU8P378",20,0)
 S TMPA="" D ^XIPMAILA K TMPA
"RTN","XU8P378",21,0)
 ; Clean up STATE(#5) file first
"RTN","XU8P378",22,0)
 S TMPB="" D ^XIPMAILB K TMPB
"RTN","XU8P378",23,0)
 D ^XIPMAIL
"RTN","XU8P378",24,0)
 Q
"RTN","XU8P378A")
0^1^B53936470
"RTN","XU8P378A",1,0)
XU8P378A ;OOIFO/SO- XU378 POST-INSTALL ;6:00 AM  7 Mar 2006
"RTN","XU8P378A",2,0)
 ;;8.0;KERNEL;**378**;Jul 10, 1995;Build 59
"RTN","XU8P378A",3,0)
E5 ; Edit State file first
"RTN","XU8P378A",4,0)
 D MES^XPDUTL("Begin STATE(#5) file update...")
"RTN","XU8P378A",5,0)
 I '$$FIND1^DIC(.11,"","X","ADUALC","IX") D
"RTN","XU8P378A",6,0)
 . N DIK
"RTN","XU8P378A",7,0)
 . K ^DIC(5,"C")
"RTN","XU8P378A",8,0)
 . S DIK="^DIC(5,"
"RTN","XU8P378A",9,0)
 . S DIK(1)="1^C"
"RTN","XU8P378A",10,0)
 . D ENALL^DIK
"RTN","XU8P378A",11,0)
 . S DIK(1)="2^C"
"RTN","XU8P378A",12,0)
 . D ENALL^DIK
"RTN","XU8P378A",13,0)
 ;
"RTN","XU8P378A",14,0)
 N I,DATA,TBL
"RTN","XU8P378A",15,0)
 F I=1:1 S DATA=$T(D5+I) Q:$P(DATA,";;",2)["EOD"  D
"RTN","XU8P378A",16,0)
 . S DATA=$P(DATA,";;",2)
"RTN","XU8P378A",17,0)
 . N DIC,Y,VAC,STATE,ABB,DLAYGO,AAC,USP
"RTN","XU8P378A",18,0)
 . S VAC=$P(DATA,U,1)
"RTN","XU8P378A",19,0)
 . S STATE=$P(DATA,U,2)
"RTN","XU8P378A",20,0)
 . S ABB=$P(DATA,U,3)
"RTN","XU8P378A",21,0)
 . S AAC=$P(DATA,U,4)
"RTN","XU8P378A",22,0)
 . S USP=$P(DATA,U,5)
"RTN","XU8P378A",23,0)
 . S DIC="^DIC(5,",DIC(0)="FZX",D="C",X=VAC D IX^DIC
"RTN","XU8P378A",24,0)
 . I Y<0 Q
"RTN","XU8P378A",25,0)
 . N X,X1
"RTN","XU8P378A",26,0)
 . S X=Y(0)
"RTN","XU8P378A",27,0)
 . S X1=$P(X,U,3)_U_$P(X,U,1)_U_$P(X,U,2)
"RTN","XU8P378A",28,0)
T1 . I $P(DATA,U,1,3)'=X1 Q
"RTN","XU8P378A",29,0)
 . N DIE,DA,DR
"RTN","XU8P378A",30,0)
 . S DIE="^DIC(5,"
"RTN","XU8P378A",31,0)
 . S DA=+Y
"RTN","XU8P378A",32,0)
 . S DR="2.1///^S X=AAC;2.2///^S X=USP"
"RTN","XU8P378A",33,0)
 . F  L +^DIC(5,DA,0):1 Q:$T  H 5
"RTN","XU8P378A",34,0)
 . D ^DIE
"RTN","XU8P378A",35,0)
 . L -^DIC(5,DA,0)
"RTN","XU8P378A",36,0)
 . S TBL(VAC)=""
"RTN","XU8P378A",37,0)
 . Q
"RTN","XU8P378A",38,0)
 ;
"RTN","XU8P378A",39,0)
 ; Flag all entries not previously found as non-AAC
"RTN","XU8P378A",40,0)
 N IEN S IEN=0
"RTN","XU8P378A",41,0)
 F  S IEN=$O(^DIC(5,IEN)) Q:'IEN  D
"RTN","XU8P378A",42,0)
 . N X
"RTN","XU8P378A",43,0)
 . S X=$P(^DIC(5,IEN,0),U,3)
"RTN","XU8P378A",44,0)
 . I X'="",$D(TBL(X)) Q
"RTN","XU8P378A",45,0)
 . N DIE,DA,DR
"RTN","XU8P378A",46,0)
 . S DIE="^DIC(5,"
"RTN","XU8P378A",47,0)
 . S DA=IEN
"RTN","XU8P378A",48,0)
 . S DR="2.1///0;2.2///0"
"RTN","XU8P378A",49,0)
 . F  L +^DIC(5,DA,0):1 Q:$T  H 5
"RTN","XU8P378A",50,0)
 . D ^DIE
"RTN","XU8P378A",51,0)
 . L -^DIC(5,DA,0)
"RTN","XU8P378A",52,0)
 . Q
"RTN","XU8P378A",53,0)
 D MES^XPDUTL("Finished STATE(#5) file update.")
"RTN","XU8P378A",54,0)
 ;
"RTN","XU8P378A",55,0)
E513 ; Edit 5.13
"RTN","XU8P378A",56,0)
 D MES^XPDUTL("Begin COUNTY CODE(#5.13) file corrections...")
"RTN","XU8P378A",57,0)
 N I,DATA
"RTN","XU8P378A",58,0)
 F I=1:1 S DATA=$T(D513+I) Q:$P(DATA,";;",2)["EOD"  D
"RTN","XU8P378A",59,0)
 . S DATA=$P(DATA,";;",2)
"RTN","XU8P378A",60,0)
 . N CODE,COUNTY,STATE,DIC,D
"RTN","XU8P378A",61,0)
 . S CODE=$P(DATA,U,1)
"RTN","XU8P378A",62,0)
 . S COUNTY=$E($P(DATA,U,2),1,25)
"RTN","XU8P378A",63,0)
 . S STATE=$P(DATA,U,3)
"RTN","XU8P378A",64,0)
 . S DIC="^XIP(5.13,",DIC(0)="FZX",D="B",X=CODE D IX^DIC
"RTN","XU8P378A",65,0)
 . I Y<1 D
"RTN","XU8P378A",66,0)
 .. N DLAYGO,DIC
"RTN","XU8P378A",67,0)
 .. S DLAYGO=5.13,DIC="^XIP(5.13,",DIC(0)="L"
"RTN","XU8P378A",68,0)
 .. S X=CODE
"RTN","XU8P378A",69,0)
 .. D FILE^DICN
"RTN","XU8P378A",70,0)
 .. Q
"RTN","XU8P378A",71,0)
 . N DIE,DA,DR
"RTN","XU8P378A",72,0)
 . S DIE="^XIP(5.13,",DA=+Y
"RTN","XU8P378A",73,0)
 . S DR="1///^S X=COUNTY;2///^S X=STATE"
"RTN","XU8P378A",74,0)
 . F  L +^XIP(5.13,DA,0):1 Q:$T  H 5
"RTN","XU8P378A",75,0)
 . D ^DIE
"RTN","XU8P378A",76,0)
 . L -^XIP(5.13,DA,0)
"RTN","XU8P378A",77,0)
 . Q
"RTN","XU8P378A",78,0)
 D MES^XPDUTL("Finished COUNTY CODE(#5.13) file corrections.")
"RTN","XU8P378A",79,0)
 ;
"RTN","XU8P378A",80,0)
P513 ; Fix any broken State pointers in 5.13
"RTN","XU8P378A",81,0)
 D MES^XPDUTL("Begin COUNTY CODE(#5.13) file pointer corrections...")
"RTN","XU8P378A",82,0)
 N IEN S IEN=0
"RTN","XU8P378A",83,0)
 F  S IEN=$O(^XIP(5.13,IEN)) Q:'IEN  D
"RTN","XU8P378A",84,0)
 . N FIPS S FIPS=$E($P(^XIP(5.13,IEN,0),U),1,2)
"RTN","XU8P378A",85,0)
 . N DIC
"RTN","XU8P378A",86,0)
 . S DIC="^DIC(5,",DIC(0)="FZX",D="C",X=FIPS D IX^DIC
"RTN","XU8P378A",87,0)
 . I Y<1 Q
"RTN","XU8P378A",88,0)
 . N STATE S STATE=$P(Y,U,2)
"RTN","XU8P378A",89,0)
 . N DIE,DA,DR
"RTN","XU8P378A",90,0)
 . S DIE="^XIP(5.13,"
"RTN","XU8P378A",91,0)
 . S DA=IEN
"RTN","XU8P378A",92,0)
 . F  L +^XIP(5.13,DA,0):1 Q:$T  H 5
"RTN","XU8P378A",93,0)
 . S DR="2///^S X=STATE"
"RTN","XU8P378A",94,0)
 . L -^XIP(5.13,DA,0)
"RTN","XU8P378A",95,0)
 . D ^DIE
"RTN","XU8P378A",96,0)
 . Q
"RTN","XU8P378A",97,0)
 D MES^XPDUTL("Finished COUNTY CODE(#5.13) file pointer corrections...")
"RTN","XU8P378A",98,0)
 ;
"RTN","XU8P378A",99,0)
 Q
"RTN","XU8P378A",100,0)
 ;
"RTN","XU8P378A",101,0)
D5 ;VA STATE CODE^NAME^ABBREVIATION^AAC RECOGNIZED^US STATE OR POSSESSION
"RTN","XU8P378A",102,0)
 ;;01^ALABAMA^AL^1^1
"RTN","XU8P378A",103,0)
 ;;02^ALASKA^AK^1^1
"RTN","XU8P378A",104,0)
 ;;58^ALBERTA^AB^1^0
"RTN","XU8P378A",105,0)
 ;;60^AMERICAN SAMOA^AS^1^1
"RTN","XU8P378A",106,0)
 ;;04^ARIZONA^AZ^1^1
"RTN","XU8P378A",107,0)
 ;;05^ARKANSAS^AR^1^1
"RTN","XU8P378A",108,0)
 ;;87^ARMED FORCES AF,EU,ME,CA^AE^1^1
"RTN","XU8P378A",109,0)
 ;;85^ARMED FORCES AMER (EXC CANADA)^AA^1^1
"RTN","XU8P378A",110,0)
 ;;88^ARMED FORCES PACIFIC^AP^1^1
"RTN","XU8P378A",111,0)
 ;;59^BRITISH COLUMBIA^BC^1^0
"RTN","XU8P378A",112,0)
 ;;06^CALIFORNIA^CA^1^1
"RTN","XU8P378A",113,0)
 ;;91^CANADA^CANAD^0^0
"RTN","XU8P378A",114,0)
 ;;08^COLORADO^CO^1^1
"RTN","XU8P378A",115,0)
 ;;09^CONNECTICUT^CT^1^1
"RTN","XU8P378A",116,0)
 ;;10^DELAWARE^DE^1^1
"RTN","XU8P378A",117,0)
 ;;11^DISTRICT OF COLUMBIA^DC^1^1
"RTN","XU8P378A",118,0)
 ;;93^EUROPE^EU^1^0
"RTN","XU8P378A",119,0)
 ;;64^FEDERATED STATES OF MICRONESIA^FM^1^1
"RTN","XU8P378A",120,0)
 ;;12^FLORIDA^FL^1^1
"RTN","XU8P378A",121,0)
 ;;90^FOREIGN COUNTRY^FG^1^0
"RTN","XU8P378A",122,0)
 ;;13^GEORGIA^GA^1^1
"RTN","XU8P378A",123,0)
 ;;66^GUAM^GU^1^1
"RTN","XU8P378A",124,0)
 ;;15^HAWAII^HI^1^1
"RTN","XU8P378A",125,0)
 ;;16^IDAHO^ID^1^1
"RTN","XU8P378A",126,0)
 ;;17^ILLINOIS^IL^1^1
"RTN","XU8P378A",127,0)
 ;;18^INDIANA^IN^1^1
"RTN","XU8P378A",128,0)
 ;;19^IOWA^IA^1^1
"RTN","XU8P378A",129,0)
 ;;20^KANSAS^KS^1^1
"RTN","XU8P378A",130,0)
 ;;21^KENTUCKY^KY^1^1
"RTN","XU8P378A",131,0)
 ;;22^LOUISIANA^LA^1^1
"RTN","XU8P378A",132,0)
 ;;23^MAINE^ME^1^1
"RTN","XU8P378A",133,0)
 ;;61^MANITOBA^MB^1^0
"RTN","XU8P378A",134,0)
 ;;68^MARSHALL ISLANDS^MH^1^1
"RTN","XU8P378A",135,0)
 ;;24^MARYLAND^MD^1^1
"RTN","XU8P378A",136,0)
 ;;25^MASSACHUSETTS^MA^1^1
"RTN","XU8P378A",137,0)
 ;;92^MEXICO^MX^1^0
"RTN","XU8P378A",138,0)
 ;;26^MICHIGAN^MI^1^1
"RTN","XU8P378A",139,0)
 ;;27^MINNESOTA^MN^1^1
"RTN","XU8P378A",140,0)
 ;;28^MISSISSIPPI^MS^1^1
"RTN","XU8P378A",141,0)
 ;;29^MISSOURI^MO^1^1
"RTN","XU8P378A",142,0)
 ;;30^MONTANA^MT^1^1
"RTN","XU8P378A",143,0)
 ;;31^NEBRASKA^NE^1^1
"RTN","XU8P378A",144,0)
 ;;32^NEVADA^NV^1^1
"RTN","XU8P378A",145,0)
 ;;62^NEW BRUNSWICK^NB^1^0
"RTN","XU8P378A",146,0)
 ;;33^NEW HAMPSHIRE^NH^1^1
"RTN","XU8P378A",147,0)
 ;;34^NEW JERSEY^NJ^1^1
"RTN","XU8P378A",148,0)
 ;;35^NEW MEXICO^NM^1^1
"RTN","XU8P378A",149,0)
 ;;36^NEW YORK^NY^1^1
"RTN","XU8P378A",150,0)
 ;;63^NEWFOUNDLAND^NF^1^0
"RTN","XU8P378A",151,0)
 ;;37^NORTH CAROLINA^NC^1^1
"RTN","XU8P378A",152,0)
 ;;38^NORTH DAKOTA^ND^1^1
"RTN","XU8P378A",153,0)
 ;;69^NORTHERN MARIANA ISLANDS^MP^1^1
"RTN","XU8P378A",154,0)
 ;;73^NORTHWEST TERRITORIES^NT^1^0
"RTN","XU8P378A",155,0)
 ;;65^NOVA SCOTIA^NS^1^0
"RTN","XU8P378A",156,0)
 ;;94^NUNAVUT PROVINCE^NU^1^0
"RTN","XU8P378A",157,0)
 ;;39^OHIO^OH^1^1
"RTN","XU8P378A",158,0)
 ;;40^OKLAHOMA^OK^1^1
"RTN","XU8P378A",159,0)
 ;;75^ONTARIO^ON^1^0
"RTN","XU8P378A",160,0)
 ;;41^OREGON^OR^1^1
"RTN","XU8P378A",161,0)
 ;;70^PALAU^PW^1^0
"RTN","XU8P378A",162,0)
 ;;42^PENNSYLVANIA^PA^1^1
"RTN","XU8P378A",163,0)
 ;;96^PHILIPPINES^PH^1^0
"RTN","XU8P378A",164,0)
 ;;77^PRINCE EDWARD ISLAND^PE^1^0
"RTN","XU8P378A",165,0)
 ;;72^PUERTO RICO^PR^1^1
"RTN","XU8P378A",166,0)
 ;;80^QUEBEC^QC^1^0
"RTN","XU8P378A",167,0)
 ;;44^RHODE ISLAND^RI^1^1
"RTN","XU8P378A",168,0)
 ;;82^SASKATCHEWAN^SK^1^0
"RTN","XU8P378A",169,0)
 ;;45^SOUTH CAROLINA^SC^1^1
"RTN","XU8P378A",170,0)
 ;;46^SOUTH DAKOTA^SD^1^1
"RTN","XU8P378A",171,0)
 ;;47^TENNESSEE^TN^1^1
"RTN","XU8P378A",172,0)
 ;;48^TEXAS^TX^1^1
"RTN","XU8P378A",173,0)
 ;;74^U.S. MINOR OUTLYING ISLANDS^UM^1^1
"RTN","XU8P378A",174,0)
 ;;49^UTAH^UT^1^1
"RTN","XU8P378A",175,0)
 ;;50^VERMONT^VT^1^1
"RTN","XU8P378A",176,0)
 ;;78^VIRGIN ISLANDS^VI^1^1
"RTN","XU8P378A",177,0)
 ;;51^VIRGINIA^VA^1^1
"RTN","XU8P378A",178,0)
 ;;53^WASHINGTON^WA^1^1
"RTN","XU8P378A",179,0)
 ;;54^WEST VIRGINIA^WV^1^1
"RTN","XU8P378A",180,0)
 ;;55^WISCONSIN^WI^1^1
"RTN","XU8P378A",181,0)
 ;;56^WYOMING^WY^1^1
"RTN","XU8P378A",182,0)
 ;;83^YUKON TERRITORY^YT^1^0
"RTN","XU8P378A",183,0)
 ;;99999^EOD^EOD^EOD^EOD
"RTN","XU8P378A",184,0)
 ;
"RTN","XU8P378A",185,0)
D513 ;FIPS CODE^COUNTY NAME^STATE
"RTN","XU8P378A",186,0)
 ;;17183^VERMILION^ILLINOIS
"RTN","XU8P378A",187,0)
 ;;29186^ST. GENEVIEVE^MISSOURI
"RTN","XU8P378A",188,0)
 ;;58260^ALBERTA^ALBERTA
"RTN","XU8P378A",189,0)
 ;;87260^ARMED FORCES AF,EU,ME,CA^ARMED FORCES AF,EU,ME,CA
"RTN","XU8P378A",190,0)
 ;;87000^ARMED FORCES^ARMED FORCES AF,EU,ME,CA
"RTN","XU8P378A",191,0)
 ;;85260^ARMED FORCES AMER (EXC CANADA)^ARMED FORCES AMER (EXC CANADA)
"RTN","XU8P378A",192,0)
 ;;85000^ARMED FORCES^ARMED FORCES AMER (EXC CANADA)
"RTN","XU8P378A",193,0)
 ;;88260^ARMED FORCES PACIFIC^ARMED FORCES PACIFIC
"RTN","XU8P378A",194,0)
 ;;88000^ARMED FORCES^ARMED FORCES PACIFIC
"RTN","XU8P378A",195,0)
 ;;59260^BRITISH COLUMBIA^BRITISH COLUMBIA
"RTN","XU8P378A",196,0)
 ;;91260^CANADA^CANADA
"RTN","XU8P378A",197,0)
 ;;93999^EUROPE^EUROPE
"RTN","XU8P378A",198,0)
 ;;90999^ALL OTHER FOREIGN^FOREIGN COUNTRY
"RTN","XU8P378A",199,0)
 ;;61260^MANITOBA^MANITOBA
"RTN","XU8P378A",200,0)
 ;;92595^MEXICO^MEXICO
"RTN","XU8P378A",201,0)
 ;;62260^NEW BRUNSWICK^NEW BRUNSWICK
"RTN","XU8P378A",202,0)
 ;;63260^NEWFOUNDLAND^NEWFOUNDLAND
"RTN","XU8P378A",203,0)
 ;;73260^NORTHWEST TERRITORIES^NORTHWEST TERRITORIES
"RTN","XU8P378A",204,0)
 ;;65260^NOVA SCOTIA^NOVA SCOTIA
"RTN","XU8P378A",205,0)
 ;;94260^NUNAVUT PROVINCE^NUNAVUT PROVINCE
"RTN","XU8P378A",206,0)
 ;;75260^ONTARIO^ONTARIO
"RTN","XU8P378A",207,0)
 ;;96725^PHILIPINES^PHILIPPINES
"RTN","XU8P378A",208,0)
 ;;77260^PRINCE EDWARD ISLAND^PRINCE EDWARD ISLAND
"RTN","XU8P378A",209,0)
 ;;80260^QUEBEC^QUEBEC
"RTN","XU8P378A",210,0)
 ;;82260^SASKATCHEWAN^SASKATCHEWAN
"RTN","XU8P378A",211,0)
 ;;74200^JOHNSTON ISLAND^U.S. MINOR OUTLYING ISLANDS
"RTN","XU8P378A",212,0)
 ;;74300^MIDWAY ISLANDS^U.S. MINOR OUTLYING ISLANDS
"RTN","XU8P378A",213,0)
 ;;74450^WAKE ISLAND^U.S. MINOR OUTLYING ISLANDS
"RTN","XU8P378A",214,0)
 ;;74350^NAVASSA ISLAND^U.S. MINOR OUTLYING ISLANDS
"RTN","XU8P378A",215,0)
 ;;74050^BAKER ISLAND^U.S. MINOR OUTLYING ISLANDS
"RTN","XU8P378A",216,0)
 ;;74100^HOWLAND ISLAND^U.S. MINOR OUTLYING ISLANDS
"RTN","XU8P378A",217,0)
 ;;74150^JARVIS ISLAND^U.S. MINOR OUTLYING ISLANDS
"RTN","XU8P378A",218,0)
 ;;74250^KINGMAN REEF^U.S. MINOR OUTLYING ISLANDS
"RTN","XU8P378A",219,0)
 ;;74400^PALMYRA ATOLL^U.S. MINOR OUTLYING ISLANDS
"RTN","XU8P378A",220,0)
 ;;74999^ALL OTHER^U.S. MINOR OUTLYING ISLANDS
"RTN","XU8P378A",221,0)
 ;;83260^YUKON TERRITORY^YUKON TERRITORY
"RTN","XU8P378A",222,0)
 ;;99999^EOD^EOD
"RTN","XU8P378B")
0^3^B7374341
"RTN","XU8P378B",1,0)
XU8P378B ;SFISC/SO-CREATE NEW-STYLE XREF ;8:38 AM  30 Aug 2005
"RTN","XU8P378B",2,0)
 ;;8.0;KERNEL;**378**;Jul 10, 1995;Build 59
"RTN","XU8P378B",3,0)
 ;
"RTN","XU8P378B",4,0)
 N ZZXR,ZZRES,ZZOUT
"RTN","XU8P378B",5,0)
 S ZZXR("FILE")=5
"RTN","XU8P378B",6,0)
 S ZZXR("NAME")="ADUALC"
"RTN","XU8P378B",7,0)
 S ZZXR("TYPE")="MU"
"RTN","XU8P378B",8,0)
 S ZZXR("USE")="S"
"RTN","XU8P378B",9,0)
 S ZZXR("EXECUTION")="R"
"RTN","XU8P378B",10,0)
 S ZZXR("ACTIVITY")="IR"
"RTN","XU8P378B",11,0)
 S ZZXR("SHORT DESCR")="MU"
"RTN","XU8P378B",12,0)
 S ZZXR("DESCR",1)="This cross reference is used to maintain the dual REGULAR ""C"" cross "
"RTN","XU8P378B",13,0)
 S ZZXR("DESCR",2)="reference on the ABBREVIATION(#1) field and the VA STATE CODE(#2) field "
"RTN","XU8P378B",14,0)
 S ZZXR("DESCR",3)="and replaces the SET and KILL logic on the REGULAR traditional cross "
"RTN","XU8P378B",15,0)
 S ZZXR("DESCR",4)="reference.  The REGULAR traditional cross references SET and KILL "
"RTN","XU8P378B",16,0)
 S ZZXR("DESCR",5)="logic are set to a ""Q"" so look ups will not error out."
"RTN","XU8P378B",17,0)
 S ZZXR("DESCR",6)=" "
"RTN","XU8P378B",18,0)
 S ZZXR("DESCR",7)="5,1           ABBREVIATION           0;2 FREE TEXT (Required)"
"RTN","XU8P378B",19,0)
 S ZZXR("DESCR",8)="              CROSS-REFERENCE:  5^C "
"RTN","XU8P378B",20,0)
 S ZZXR("DESCR",9)="                                1)= Q"
"RTN","XU8P378B",21,0)
 S ZZXR("DESCR",10)="                                2)= Q"
"RTN","XU8P378B",22,0)
 S ZZXR("DESCR",11)="                                3)= Used in conjunction with the 'ADUALC' "
"RTN","XU8P378B",23,0)
 S ZZXR("DESCR",12)="                                    xref."
"RTN","XU8P378B",24,0)
 S ZZXR("DESCR",13)=" "
"RTN","XU8P378B",25,0)
 S ZZXR("DESCR",14)="5,2           VA STATE CODE          0;3 FREE TEXT"
"RTN","XU8P378B",26,0)
 S ZZXR("DESCR",15)="              CROSS-REFERENCE:  5^C "
"RTN","XU8P378B",27,0)
 S ZZXR("DESCR",16)="                                1)= Q"
"RTN","XU8P378B",28,0)
 S ZZXR("DESCR",17)="                                2)= Q"
"RTN","XU8P378B",29,0)
 S ZZXR("DESCR",18)="                                3)= Used in conjunction with the 'ADUALC' "
"RTN","XU8P378B",30,0)
 S ZZXR("DESCR",19)="                                    xref."
"RTN","XU8P378B",31,0)
 S ZZXR("SET")="I ((X2(1)'="""")!(X1(1)'=X2(1))),X2(1)'="""" S ^DIC(5,""C"",X2(1),DA)="""" I ((X2(2)'="""")!(X1(2)'=X2(2))),X2(2)'="""" S ^DIC(5,""C"",X2(2),DA)="""" Q"
"RTN","XU8P378B",32,0)
 S ZZXR("KILL")="I ((X2(1)="""")!(X1(1)'=X2(1))),X1(1)'="""" K ^DIC(5,""C"",X1(1),DA) I ((X2(2)="""")!(X1(2)'=X2(2))),X1(2)'="""" K ^DIC(5,""C"",X1(2),DA) Q"
"RTN","XU8P378B",33,0)
 S ZZXR("WHOLE KILL")="K ^DIC(5,""C"")"
"RTN","XU8P378B",34,0)
 S ZZXR("VAL",1)=1
"RTN","XU8P378B",35,0)
 S ZZXR("VAL",1,"COLLATION")="F"
"RTN","XU8P378B",36,0)
 S ZZXR("VAL",2)=2
"RTN","XU8P378B",37,0)
 S ZZXR("VAL",2,"COLLATION")="F"
"RTN","XU8P378B",38,0)
 D CREIXN^DDMOD(.ZZXR,"SW",.ZZRES,"ZZOUT")
"RTN","XU8P378B",39,0)
 Q
"RTN","XU8P378C")
0^5^B3548121
"RTN","XU8P378C",1,0)
XU8P378C ;OOIFO/SO- SET DD CHANGES FOR FILES 5, 5.12, & 5.13 ;6:21 AM  16 Nov 2005
"RTN","XU8P378C",2,0)
 ;;8.0;KERNEL;**378**;Jul 10, 1995;Build 59
"RTN","XU8P378C",3,0)
 ;
"RTN","XU8P378C",4,0)
 ; Set DEL & LAYGO nodes for file 5
"RTN","XU8P378C",5,0)
 S ^DD(5,.01,"DEL",1,0)="D EN^DDIOL(""Deletions are not allowed."","""",""!?5,$C(7)"") I 1"
"RTN","XU8P378C",6,0)
 S ^DD(5,.01,"LAYGO",1,0)="D:'$G(XUMF) EN^DDIOL(""New State additions are not allowed."","""",""!?5,$C(7)"") I +$G(XUMF)"
"RTN","XU8P378C",7,0)
 S ^DD(5,.01,"DT")=$G(DT)
"RTN","XU8P378C",8,0)
 ;
"RTN","XU8P378C",9,0)
 ; Set DEL & LAYGO nodes for sub-file 5.01
"RTN","XU8P378C",10,0)
 S ^DD(5.01,.01,"DEL",1,0)="D EN^DDIOL(""Entries can only be Inactivated."","""",""!?5,$C(7)"") I 1"
"RTN","XU8P378C",11,0)
 S ^DD(5.01,.01,"LAYGO",1,0)="D:'$G(XUMF) EN^DDIOL(""New County additions are not allowed."","""",""!?5,$C(7)"") I +$G(XUMF)"
"RTN","XU8P378C",12,0)
 S ^DD(5,.01,"DT")=$G(DT)
"RTN","XU8P378C",13,0)
 ;
"RTN","XU8P378C",14,0)
 ; Set DEL node for file 5.12
"RTN","XU8P378C",15,0)
 S ^DD(5.12,.01,"DEL",1,0)="D EN^DDIOL(""Entries can only be Inactivated."","""",""!?5,$C(7)"") I 1"
"RTN","XU8P378C",16,0)
 S ^DD(5.12,.01,"DT")=$G(DT)
"RTN","XU8P378C",17,0)
 ;
"RTN","XU8P378C",18,0)
 ; Set Del & LAYGO nodes for file 5.13
"RTN","XU8P378C",19,0)
 S ^DD(5.13,.01,"DEL",1,0)="D EN^DDIOL(""Entries can only be Inactivated."","""",""!?5,$C(7)"") I 1"
"RTN","XU8P378C",20,0)
 S ^DD(5.13,.01,"LAYGO",1,0)="D:'$G(XUMF) EN^DDIOL(""New County Code additions are not allowed."","""",""!?5,$C(7)"") I +$G(XUMF)"
"RTN","XU8P378C",21,0)
 S ^DD(5.13,.01,"DT")=$G(DT)
"RTN","XU8P378C",22,0)
 ;
"RTN","XU8P378C",23,0)
 Q
"RTN","XU8P378E")
0^^B31143352
"RTN","XU8P378E",1,0)
XU8P378E ;OOIFO/SO- XU378 ENVIRONMENT CHECK ;6:00 AM  4 Feb 2006
"RTN","XU8P378E",2,0)
 ;;8.0;KERNEL;**378**;Jul 10, 1995;Build 59
"RTN","XU8P378E",3,0)
 ; State file enviroment check
"RTN","XU8P378E",4,0)
 D MES^XPDUTL("Begin STATE(#5) file environment check...")
"RTN","XU8P378E",5,0)
 D MES^XPDUTL(" ")
"RTN","XU8P378E",6,0)
 I '$$FIND1^DIC(.11,"","X","ADUALC","IX") D
"RTN","XU8P378E",7,0)
 . N DIK
"RTN","XU8P378E",8,0)
 . K ^DIC(5,"C")
"RTN","XU8P378E",9,0)
 . S DIK="^DIC(5,"
"RTN","XU8P378E",10,0)
 . S DIK(1)="1^C"
"RTN","XU8P378E",11,0)
 . D ENALL^DIK
"RTN","XU8P378E",12,0)
 . S DIK(1)="2^C"
"RTN","XU8P378E",13,0)
 . D ENALL^DIK
"RTN","XU8P378E",14,0)
 ;
"RTN","XU8P378E",15,0)
 N DATA,TMP,TMPERR
"RTN","XU8P378E",16,0)
 N I1 S I1=0
"RTN","XU8P378E",17,0)
 F  S I1=$O(^DIC(5,I1)) Q:'I1  D
"RTN","XU8P378E",18,0)
 . I '$D(^DIC(5,I1,0)) Q  ;Bogus entry
"RTN","XU8P378E",19,0)
NC . D
"RTN","XU8P378E",20,0)
 .. ;Duplicate Name check
"RTN","XU8P378E",21,0)
 .. N VALUE,DIERR,Z,ZERR
"RTN","XU8P378E",22,0)
 .. S VALUE=$P(^DIC(5,I1,0),U)
"RTN","XU8P378E",23,0)
 .. I VALUE="" Q  ;No NAME
"RTN","XU8P378E",24,0)
 .. D FIND^DIC(5,"","@;.01;1;2","MPQX",VALUE,"","","I $P(^(0),U,1)=VALUE","","Z","ZERR")
"RTN","XU8P378E",25,0)
 .. I $D(DIERR) Q
"RTN","XU8P378E",26,0)
 .. I $P(Z("DILIST",0),U)<2 Q
"RTN","XU8P378E",27,0)
 .. N I2
"RTN","XU8P378E",28,0)
 .. S I2=0
"RTN","XU8P378E",29,0)
 .. F  S I2=$O(Z("DILIST",I2)) Q:'I2  S TMPERR(Z("DILIST",I2,0)_"^[F]Duplicate State NAME(#.01)")="",XPDQUIT=2
"RTN","XU8P378E",30,0)
 .. Q
"RTN","XU8P378E",31,0)
AC . D
"RTN","XU8P378E",32,0)
 .. ;Duplicate Abbreviation check
"RTN","XU8P378E",33,0)
 .. N VALUE,DIERR,Z,ZERR
"RTN","XU8P378E",34,0)
 .. S VALUE=$P(^DIC(5,I1,0),U,2)
"RTN","XU8P378E",35,0)
 .. I VALUE="" Q  ;No ABBREVIATION
"RTN","XU8P378E",36,0)
 .. D FIND^DIC(5,"","@;.01;1;2","MPQX",VALUE,"","","I $P(^(0),U,2)=VALUE","","Z","ZERR")
"RTN","XU8P378E",37,0)
 .. I $D(DIERR) Q
"RTN","XU8P378E",38,0)
 .. I $P(Z("DILIST",0),U)<2 Q
"RTN","XU8P378E",39,0)
 .. N I2
"RTN","XU8P378E",40,0)
 .. S I2=0
"RTN","XU8P378E",41,0)
 .. F  S I2=$O(Z("DILIST",I2)) Q:'I2  S TMPERR(Z("DILIST",I2,0)_"^[F]Duplicate State ABBREVIATION(#1)")="",XPDQUIT=2
"RTN","XU8P378E",42,0)
 .. Q
"RTN","XU8P378E",43,0)
VC . D
"RTN","XU8P378E",44,0)
 .. ;Duplicate VA State Code check
"RTN","XU8P378E",45,0)
 .. N VALUE,DIERR,Z,ZERR
"RTN","XU8P378E",46,0)
 .. S VALUE=$P(^DIC(5,I1,0),U,3)
"RTN","XU8P378E",47,0)
 .. I VALUE="" Q  ;No VA STATE CODE
"RTN","XU8P378E",48,0)
 .. D FIND^DIC(5,"","@;.01;1;2","MPQX",VALUE,"","","I $P(^(0),U,3)=VALUE","","Z","ZERR")
"RTN","XU8P378E",49,0)
 .. I $D(DIERR) Q
"RTN","XU8P378E",50,0)
 .. I $P(Z("DILIST",0),U)<2 Q
"RTN","XU8P378E",51,0)
 .. N I2
"RTN","XU8P378E",52,0)
 .. S I2=0
"RTN","XU8P378E",53,0)
 .. F  S I2=$O(Z("DILIST",I2)) Q:'I2  S TMPERR(Z("DILIST",I2,0)_"^[F]Duplicate State VA STATE CODE(#2)")="",XPDQUIT=2
"RTN","XU8P378E",54,0)
 .. Q
"RTN","XU8P378E",55,0)
 . Q
"RTN","XU8P378E",56,0)
TC ; Now check for missing States against table
"RTN","XU8P378E",57,0)
 F I=1:1 S DATA=$T(D5+I) Q:$P(DATA,";;",2)["EOD"  D
"RTN","XU8P378E",58,0)
 . N X
"RTN","XU8P378E",59,0)
 . S DATA=$P(DATA,";;",2)
"RTN","XU8P378E",60,0)
 . ;             NAME^ABBREVIATION^VA STATE CODE
"RTN","XU8P378E",61,0)
 . S TMP($P(DATA,U,2)_U_$P(DATA,U,3)_U_$P(DATA,U,1))=""
"RTN","XU8P378E",62,0)
 . Q
"RTN","XU8P378E",63,0)
 S I1=0
"RTN","XU8P378E",64,0)
 F  S I1=$O(^DIC(5,I1)) Q:'I1  D
"RTN","XU8P378E",65,0)
 . N X,X1
"RTN","XU8P378E",66,0)
 . I '$D(^DIC(5,I1,0))#2 Q
"RTN","XU8P378E",67,0)
 . S X=$P(^DIC(5,I1,0),U,1,3)
"RTN","XU8P378E",68,0)
 . I $D(TMP(X)) S TMP(X)=1 Q
"RTN","XU8P378E",69,0)
 . S TMPERR(I1_U_$P(X,U,1)_U_$P(X,U,2)_U_$P(X,U,3)_"^[W]Not a recognized VistA State")=""
"RTN","XU8P378E",70,0)
 . Q
"RTN","XU8P378E",71,0)
 S I1=""
"RTN","XU8P378E",72,0)
 F  S I1=$O(TMP(I1)) Q:I1=""  I TMP(I1)="" D
"RTN","XU8P378E",73,0)
 . S TMPERR(U_$P(I1,U,1)_U_$P(I1,U,2)_U_$P(I1,U,3)_"^[F]State not found in STATE(#5) file")="",XPDQUIT=2
"RTN","XU8P378E",74,0)
 .Q
"RTN","XU8P378E",75,0)
E1 I $D(XPDQUIT) D
"RTN","XU8P378E",76,0)
 . S I1=""
"RTN","XU8P378E",77,0)
 . D MES^XPDUTL("IEN^NAME(#.01)^ABBREVIATION(#1)^VA STATE CODE(#2)^[W]arning/[F]ailure Reason")
"RTN","XU8P378E",78,0)
 . F  S I1=$O(TMPERR(I1)) Q:I1=""  D
"RTN","XU8P378E",79,0)
 .. D MES^XPDUTL(I1)
"RTN","XU8P378E",80,0)
 .. Q
"RTN","XU8P378E",81,0)
 . Q
"RTN","XU8P378E",82,0)
 I $D(XPDQUIT) D MES^XPDUTL(" ")
"RTN","XU8P378E",83,0)
 D MES^XPDUTL("Finished environment check.")
"RTN","XU8P378E",84,0)
 I $D(XPDQUIT) D MES^XPDUTL(">> Environment check failed!")
"RTN","XU8P378E",85,0)
 Q
"RTN","XU8P378E",86,0)
 ;
"RTN","XU8P378E",87,0)
D5 ;VA STATE CODE^NAME^ABBREVIATION^AAC RECOGNIZED^US STATE OR POSSESSION
"RTN","XU8P378E",88,0)
 ;;01^ALABAMA^AL^1^1
"RTN","XU8P378E",89,0)
 ;;02^ALASKA^AK^1^1
"RTN","XU8P378E",90,0)
 ;;58^ALBERTA^AB^1^0
"RTN","XU8P378E",91,0)
 ;;60^AMERICAN SAMOA^AS^1^1
"RTN","XU8P378E",92,0)
 ;;04^ARIZONA^AZ^1^1
"RTN","XU8P378E",93,0)
 ;;05^ARKANSAS^AR^1^1
"RTN","XU8P378E",94,0)
 ;;87^ARMED FORCES AF,EU,ME,CA^AE^1^1
"RTN","XU8P378E",95,0)
 ;;85^ARMED FORCES AMER (EXC CANADA)^AA^1^1
"RTN","XU8P378E",96,0)
 ;;88^ARMED FORCES PACIFIC^AP^1^1
"RTN","XU8P378E",97,0)
 ;;59^BRITISH COLUMBIA^BC^1^0
"RTN","XU8P378E",98,0)
 ;;06^CALIFORNIA^CA^1^1
"RTN","XU8P378E",99,0)
 ;;91^CANADA^CANAD^0^0
"RTN","XU8P378E",100,0)
 ;;08^COLORADO^CO^1^1
"RTN","XU8P378E",101,0)
 ;;09^CONNECTICUT^CT^1^1
"RTN","XU8P378E",102,0)
 ;;10^DELAWARE^DE^1^1
"RTN","XU8P378E",103,0)
 ;;11^DISTRICT OF COLUMBIA^DC^1^1
"RTN","XU8P378E",104,0)
 ;;93^EUROPE^EU^1^0
"RTN","XU8P378E",105,0)
 ;;64^FEDERATED STATES OF MICRONESIA^FM^1^1
"RTN","XU8P378E",106,0)
 ;;12^FLORIDA^FL^1^1
"RTN","XU8P378E",107,0)
 ;;90^FOREIGN COUNTRY^FG^1^0
"RTN","XU8P378E",108,0)
 ;;13^GEORGIA^GA^1^1
"RTN","XU8P378E",109,0)
 ;;66^GUAM^GU^1^1
"RTN","XU8P378E",110,0)
 ;;15^HAWAII^HI^1^1
"RTN","XU8P378E",111,0)
 ;;16^IDAHO^ID^1^1
"RTN","XU8P378E",112,0)
 ;;17^ILLINOIS^IL^1^1
"RTN","XU8P378E",113,0)
 ;;18^INDIANA^IN^1^1
"RTN","XU8P378E",114,0)
 ;;19^IOWA^IA^1^1
"RTN","XU8P378E",115,0)
 ;;20^KANSAS^KS^1^1
"RTN","XU8P378E",116,0)
 ;;21^KENTUCKY^KY^1^1
"RTN","XU8P378E",117,0)
 ;;22^LOUISIANA^LA^1^1
"RTN","XU8P378E",118,0)
 ;;23^MAINE^ME^1^1
"RTN","XU8P378E",119,0)
 ;;61^MANITOBA^MB^1^0
"RTN","XU8P378E",120,0)
 ;;68^MARSHALL ISLANDS^MH^1^1
"RTN","XU8P378E",121,0)
 ;;24^MARYLAND^MD^1^1
"RTN","XU8P378E",122,0)
 ;;25^MASSACHUSETTS^MA^1^1
"RTN","XU8P378E",123,0)
 ;;92^MEXICO^MX^1^0
"RTN","XU8P378E",124,0)
 ;;26^MICHIGAN^MI^1^1
"RTN","XU8P378E",125,0)
 ;;27^MINNESOTA^MN^1^1
"RTN","XU8P378E",126,0)
 ;;28^MISSISSIPPI^MS^1^1
"RTN","XU8P378E",127,0)
 ;;29^MISSOURI^MO^1^1
"RTN","XU8P378E",128,0)
 ;;30^MONTANA^MT^1^1
"RTN","XU8P378E",129,0)
 ;;31^NEBRASKA^NE^1^1
"RTN","XU8P378E",130,0)
 ;;32^NEVADA^NV^1^1
"RTN","XU8P378E",131,0)
 ;;62^NEW BRUNSWICK^NB^1^0
"RTN","XU8P378E",132,0)
 ;;33^NEW HAMPSHIRE^NH^1^1
"RTN","XU8P378E",133,0)
 ;;34^NEW JERSEY^NJ^1^1
"RTN","XU8P378E",134,0)
 ;;35^NEW MEXICO^NM^1^1
"RTN","XU8P378E",135,0)
 ;;36^NEW YORK^NY^1^1
"RTN","XU8P378E",136,0)
 ;;63^NEWFOUNDLAND^NF^1^0
"RTN","XU8P378E",137,0)
 ;;37^NORTH CAROLINA^NC^1^1
"RTN","XU8P378E",138,0)
 ;;38^NORTH DAKOTA^ND^1^1
"RTN","XU8P378E",139,0)
 ;;69^NORTHERN MARIANA ISLANDS^MP^1^1
"RTN","XU8P378E",140,0)
 ;;73^NORTHWEST TERRITORIES^NT^1^0
"RTN","XU8P378E",141,0)
 ;;65^NOVA SCOTIA^NS^1^0
"RTN","XU8P378E",142,0)
 ;;94^NUNAVUT PROVINCE^NU^1^0
"RTN","XU8P378E",143,0)
 ;;39^OHIO^OH^1^1
"RTN","XU8P378E",144,0)
 ;;40^OKLAHOMA^OK^1^1
"RTN","XU8P378E",145,0)
 ;;75^ONTARIO^ON^1^0
"RTN","XU8P378E",146,0)
 ;;41^OREGON^OR^1^1
"RTN","XU8P378E",147,0)
 ;;70^PALAU^PW^1^1
"RTN","XU8P378E",148,0)
 ;;42^PENNSYLVANIA^PA^1^1
"RTN","XU8P378E",149,0)
 ;;96^PHILIPPINES^PH^1^0
"RTN","XU8P378E",150,0)
 ;;77^PRINCE EDWARD ISLAND^PE^1^0
"RTN","XU8P378E",151,0)
 ;;72^PUERTO RICO^PR^1^1
"RTN","XU8P378E",152,0)
 ;;80^QUEBEC^QC^1^0
"RTN","XU8P378E",153,0)
 ;;44^RHODE ISLAND^RI^1^1
"RTN","XU8P378E",154,0)
 ;;82^SASKATCHEWAN^SK^1^0
"RTN","XU8P378E",155,0)
 ;;45^SOUTH CAROLINA^SC^1^1
"RTN","XU8P378E",156,0)
 ;;46^SOUTH DAKOTA^SD^1^1
"RTN","XU8P378E",157,0)
 ;;47^TENNESSEE^TN^1^1
"RTN","XU8P378E",158,0)
 ;;48^TEXAS^TX^1^1
"RTN","XU8P378E",159,0)
 ;;74^U.S. MINOR OUTLYING ISLANDS^UM^1^1
"RTN","XU8P378E",160,0)
 ;;49^UTAH^UT^1^1
"RTN","XU8P378E",161,0)
 ;;50^VERMONT^VT^1^1
"RTN","XU8P378E",162,0)
 ;;78^VIRGIN ISLANDS^VI^1^1
"RTN","XU8P378E",163,0)
 ;;51^VIRGINIA^VA^1^1
"RTN","XU8P378E",164,0)
 ;;53^WASHINGTON^WA^1^1
"RTN","XU8P378E",165,0)
 ;;54^WEST VIRGINIA^WV^1^1
"RTN","XU8P378E",166,0)
 ;;55^WISCONSIN^WI^1^1
"RTN","XU8P378E",167,0)
 ;;56^WYOMING^WY^1^1
"RTN","XU8P378E",168,0)
 ;;83^YUKON TERRITORY^YT^1^0
"RTN","XU8P378E",169,0)
 ;;99999^EOD^EOD^EOD^EOD
"VER")
8.0^22.0
"^DD",5,5,2.1,0)
AAC RECOGNIZED^RS^1:YES;0:NO;^0;5^Q
"^DD",5,5,2.1,3)
Does the Austin Automation Center(AAC) recognize this State?
"^DD",5,5,2.1,21,0)
^^2^2^3051107^
"^DD",5,5,2.1,21,1,0)
This field designates whether or not the Austin Automation Center(AAC) 
"^DD",5,5,2.1,21,2,0)
recognizes this State.
"^DD",5,5,2.1,"DT")
3051013
"^DD",5,5,2.2,0)
US STATE OR POSSESSION^S^0:No;1:Yes;^0;6^Q
"^DD",5,5,2.2,3)
Is this a US State or Possession?
"^DD",5,5,2.2,21,0)
^^2^2^3051216^
"^DD",5,5,2.2,21,1,0)
This field designates if this entry is a US State or United Sates 
"^DD",5,5,2.2,21,2,0)
possession.
"^DD",5,5,2.2,"DT")
3051216
"BLD",898,6)
^333
**END**
**END**

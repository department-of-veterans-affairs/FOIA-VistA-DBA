$TXT Created by PAJERSKI,JAN at DEVVCC.ISC-ALBANY.VA.GOV  (KIDS) on THURSDAY, 02/19/98 at 13:14
=============================================================================
Run Date: FEB 20, 1998                     Designation: ECX*3*1
Package : ECX - DSS EXTRACTS                  Priority: Mandatory
Version : 3         SEQ #1                     Status: Released
=============================================================================


Subject: EXTRACT UPDATES FOR NEW FIELDS

Category: 
  - Enhancement (Mandatory)
  - Data Dictionary
  - Routine

Description: 
============

   ********************* IMPORTANT NOTE *************************** 
   
   This patch ONLY applies to DSS sites that have installed DSS 
   EXTRACTS V3.0 (dated DEC 22,1997 on the second line of routines).  
    
   ****************************************************************
   
   
   This following issues have been addressed in this enhancement
   to DSS EXTRACTS v3.0:
  
   (1)  The routine ECXADM has been revised to place data in the 
        PRIMARY WARD PROVIDER field (#36) of the ADMISSION EXTRACT 
        file (727.802).
   
   (2)  A number of fields in the TREATING SPECIALTY CHANGE EXTRACT
        file (#727.817) have been redefined.  The fields are NEW 
        TREATING SPECIALTY (#14), LOSING TREATING SPECIALTY (#15), 
        LOSING TREATING SPECIALTY LOS (#16), LOSING ATTENDING 
        PHYSICIAN (#17), NEW PRIMARY WARD PROVIDER (#21), NEW 
        ATTENDING PHYSICIAN (#22), and LOSING PRIMARY WARD PROVIDER
        (#23).
   
        The movement records in the PATIENT MOVEMENT file (#405) which
        are extracted for TRT include both treating specialty changes
        and provider-only changes.  Routine ECXTRT has been modified
        to distinguish these two types of movement records.  Field #16,
        which was formerly called DURATION is now the LOSING TREATING
        SPECIALTY LOS.  This field will now only contain data for
        actual treating specialty change records.  For provider-only
        change records, it will be null.
   
        Routine ECXTRT has been further revised to extract data for  
        the new fields #21, #22, and #23.  Fields #15, #16, and #17 
        have new names, but the logic used to extract data for these
        fields has not been changed.  
   
        A minor modification has been made to routine ECXATRT which
        generates the TRT Extract Audit Report.  It will now use the
        LOSING TREATING SPECIALTY LOS field (#16) to screen provider-
        only changes from appearing on the report.  
    
   (3)  Three fields in the PHYSICAL MOVEMENT EXTRACT file (#727.808) 
        have been redefined as placeholders.  They are PLACEHOLDER1 
        (#17), PLACEHOLDER2 (#22), and PLACEHOLDER3 (#23).  A null
        will continue to be placed in these fields for the MOV
        extract.  Originally these fields were intended to hold 
        information regarding attending physician and primary provider.
        (Inpatient provider data is now contained solely in the TRT
        extract file.)  Field #16 of file #727.808 has been renamed
        as LOSING WARD LOS.
   
   (4)  The data definition for the ACTION TO SEND field (#5) of the
        CLINICS AND STOP CODES file (#728.44) is being modified.  Users
        will no longer be able to enter values of 2 or 3 for the Action
        to Send code.  Each DSS Site Manager should generate a FileMan
        printout from file #728.44 which displays the ACTION TO SEND
        field for each clinic.  Those having a code of 2 (SEND CREDIT
        STOP CODE) or 3 (SEND BOTH AS SEPARATE RECORDS) should be 
        edited.  However, the logic in routine ECXSCX for extraction
        of clinic appointment data will generate a CLI extract record
        just as in version 2T11 whenever a code 2 or 3 is encountered.
         
        Routine ECXSCX has been further revised to append a "Q" character
        to the end of the FEEDER KEY field (#9) of the CLINIC EXTRACT
        file (#727.803), if the clinic appointment has a Status of "No
        Action Taken".
    
        Finally, the logic to extract data for the PROVIDER (#17), CPT
        CODE (#18), and ICD-9 CODE (#19) for the CLI record in file 
        #727.803 has been modified.  If a primary diagnosis has not been
        identified, the first diagnosis is extracted.  If the primary
        provider has not been identified, the first 'physician' provider
        will be extracted, if one exists.  Otherwise, the first provider
        (of any type) will be used.  The procedure to be extracted for
        the CPT CODE field (#18) will be the procedure associated with
        the provider identified in field #17.  If there are no procedures
        associated with that provider, then the first procedure will be
        extracted.
   
   (5)  Routine ECXSURG has been revised in order to place data in the
        ADMISSION DATE field (#36) of the SURGERY EXTRACT file (#727.811)
        for inpatient surgery extract records.
   
   (6)  Modifications have been made to routine ECXLABN which extracts
        Laboratory data for the LABORATORY EXTRACT file (#727.813).  The
        revisions are needed to provide better identifying information
        on Lab referral patients.  The SSN IDENTIFYING NUMBER field (#5)
        and the NAME field (#6) of file #727.813 will now hold the actual
        referral patient SSN and name when known.  The LOCATION field
        (#14) will identify the Institution associated with the referral.
        The ACCESSION AREA field (#9) will be used to hold the Agency
        Code of the Institution; i.e., the AGENCY CODE field (#95) of the
        Institution's record in the INSTITUTION file (#4).
   
        Please note that some of these modifications may not be seen in
        the records of the LABORATORY EXTRACT file (#727.813) until a
        future patch to the Laboratory application has been installed.
   
        The data definition for the ACCESSION AREA field (#9) in the
        LABORATORY EXTRACT file (#727.813) has been modified to 
        accommodate its new usage.
    
        Routine ECXALAB which generates the LAB Extract Audit Report
        has been modified.  It will ignore the contents of the ACCESSION
        AREA field (#9), and use the ABBREVIATION field (#10) of file 
        #727.813 to determine the Accession Area of the workload data.
   
   (7)  A minor correction has been made to routine ECXFELOC to re-enable
        the printing of the Feeder Location List for CLI.  This listing is
        generated when using the Print Feeder Locations [ECXFELOC] option.
        The correction addresses NOIS ATG-0198-31338.
   
  
   ROUTINE SUMMARY:
   ================
   The following is a list of the routine(s) included in this patch.  The
   second line of each of these routine(s) will look like:
   
       <tab>;;3.0;DSS EXTRACTS;**[patch list]**;Dec 22, 1997
   
                              CHECK^XTSUMBLD results
   
   Routine name         Before Patch          After Patch         Patch List
   ============         ============          ===========         ==========
   ECXADM                9372375               9613998                 1
   ECXALAB               9419210               9434933                 1
   ECXATRT              13406271              12689150                 1
   ECXFELOC              9936988              11292888                 1
   ECXLABN               8928215              11471151                 1
   ECXSCX               20000444              22022783                 1
   ECXSURG              12324935              12897310                 1
   ECXTRT               11148267              12304736                 1
   ECXUTL                5565179               5701661                 1
   
   
   INSTALLATION INSTRUCTIONS:
   ==========================
   
   This patch can be loaded with users on the system.  IRM should check
   with the DSS Site Manager (or check the list of queued background jobs
   in TaskManager) to be sure that DSS Extracts application-related jobs 
   have not been queued to run while this installation is taking place.
   
    NOTE:  This patch distribution will check that DSS EXTRACTS v3.0 has
           been installed at your site before allowing the patch to be
           loaded.  The name of the Decision Support System Extracts
           package in your site's PACKAGE file (#9.4) must be
   
           DSS EXTRACTS
   
           If the package appears in file #9.4 under another name, please
           edit the NAME field (#.01) of the package record to appear
           exactly as shown above.
   
   Installation will take less than 5 minutes.  
    
   1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
       the KIDS distribution included with this message.
    
   2.  Review your mapped set.  If any of the routines listed in the
       ROUTINE SUMMARY section are mapped, they should be removed
       from the mapped set at this time.
    
   3.  From the Kernel Installation and Distribution System Menu, select 
       the Installation menu.  
    
   4.  From this menu, you may elect to use the following options
       (when prompted for INSTALL NAME, enter ECX*3.0*1):
       a.  Backup a Transport Global - this option will create a backup
           message of any routines exported with the patch.  It will NOT
           backup any other changes such as DDs or templates.
       b.  Compare Transport Global to Current System  - this option will
           allow you to view all changes that will be made when the patch
           is installed.  It compares all components of the patch (routines,
           DDs, templates, etc.).
       c.  Verify Checksums in Transport Global - this option will
           allow you to ensure the integrity of the routines that are in
           the transport global.
    
   5.  Use the Install Package(s) option and select the package ECX*3.0*1.
   
   6.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
       Protocols? YES//', respond YES.  When prompted to select the options
       you would like to place out of order, enter the following:
    
                Extract Manager's Options         [ECXMGR]
   
   7.  If routines were unmapped as part of step 2, they should be returned
       to the mapped set once the installation has run to completion.

Routine Information:
====================

Routine Name:
  - ECXADM


Routine Checksum:

Routine Name:
  - ECXALAB


Routine Checksum:

Routine Name:
  - ECXATRT


Routine Checksum:

Routine Name:
  - ECXFELOC


Routine Checksum:

Routine Name:
  - ECXLABN


Routine Checksum:

Routine Name:
  - ECXSCX


Routine Checksum:

Routine Name:
  - ECXSURG


Routine Checksum:

Routine Name:
  - ECXTRT


Routine Checksum:

Routine Name:
  - ECXUTL


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : PAJERSKI,JAN                   Date Entered : JAN 26, 1998
Completed By: SMULLEN,GEOFFREY              Date Completed: FEB 20, 1998
Released By : COOPER,SAMANTHA               Date Released : FEB 20, 1998
=============================================================================


Packman Mail Message:
=====================

$END TXT

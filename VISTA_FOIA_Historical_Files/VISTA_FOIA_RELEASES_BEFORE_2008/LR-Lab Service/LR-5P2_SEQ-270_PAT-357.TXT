$TXT Created by UNDERHILL,GARDNER III at DAYT17.FO-BAYPINES.MED.VA.GOV  (KIDS) on Wednesday, 05/10/06 at 16:57
=============================================================================
Run Date: JUN 08, 2006                     Designation: LR*5.2*357
Package : LR - LAB SERVICE                    Priority: Mandatory
Version : 5.2       SEQ #270                    Status: Released
                  Compliance Date: JUL 09, 2006
=============================================================================

Associated patches: (v)LR*5.2*187  <<= must be installed BEFORE `LR*5.2*357'
                    (v)LR*5.2*344  <<= must be installed BEFORE `LR*5.2*357'

Subject:  AX5 MUMPS CROSS REFERENCE NOT UPDATING PROPERLY

Category: 
  - Data Dictionary
  - Routine

Description:
============

 VISTA Laboratory Package patch LR*5.2*357 contains changes to software 
 controlled by VHA DIRECTIVE 2004-053, titled VISTA BLOOD BANK SOFTWARE. 
 Changes include: 
 Laboratory Test File (#60)   Changes to AXP cross reference
  
 All of the above changes have been reviewed by the VISTA Blood Bank 
 Developer and found to have no impact on the VISTA BLOOD BANK SOFTWARE 
 control functions.
  
 RISK ANALYSIS: Changes made by patch LR*5.2*357 have no effect on Blood 
 Bank software functionality, therefore RISK is none.
  
 EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LR*5.2*357 does not 
 alter or modify any software design safeguards or safety critical 
 elements functions.
  
 POTENTIAL IMPACT ON SITES: This patch contains changes to 0 routines and 
 1 file identified in Veterans Health Administration (VHA) Directive 
 2004-053, group B listing. The changes have no effect on Blood Bank 
 functionality or medical device control functions. There is no adverse 
 potential to sites.
  
 VALIDATION REQUIREMENTS BY OPTION: 
 There are no validation requirements for this patch
  
 MINIMAL TEST CASE SCENARIOS BY OPTION, INCLUSIVE OF ALL CONTROL FUNCTIONS:
 There are no test case scenarios for this patch
  
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
  
 This patch will correct a problem with the AX5 cross reference not 
 updating properly when deleting a SYNONYM (field #2) for a LABORATORY TEST
 record (file #60).  
  
 It will also allow for the search for lab test results with values not
 equal to null.
  
  
 ASSOCIATED REMEDY TICKETS:
 =========================
 HD0000000122932    Problem deleting synonyms on Panel Tests
 Duplicate:         HD0000000128948    New Lab Test Undefined Errors
                   
 HD0000000134041    NCAL - Search for high/low values of a test [LRSORA]
                    missing data
  
  
 TEST SITES:
 ==========
 Puget Sound HCS
 Durham VAMC
 Philadelphia VAMC
  
  
 REMEDY TICKET OVERVIEW:
 ======================
 Problem (1):  HD0000000122932, HD0000000128948
 -----------
 When deleting a SYNONYM (field #2) from a LABORATORY TEST record (file
 #60), the AX5 MUMPS cross reference was not updating the matching
 ORDERABLE ITEMS record (file #101.43) properly.  The SYNONYM (field #.01)
 for that laboratory test in the ORDERABLE ITEMS would still be on file.
  
 Solution:
 --------
 Modify the AX5 MUMPS cross reference to pass both the IEN of the
 record in the LABORATORY TEST file, and the IEN of the SYNONYM being
 deleted to the routine LR7OV0.  Also, modify how the code of routine
 LR7OV0 builds the update HL7 message during a delete of a SYNONYM.
  
  
 Problem (2):  HD0000000134041
 -----------
 Patch LR*5.2*344 made a correction to the Laboratory Test Results search
 function in option LRSORA which took away the ability to search for all
 'not null' values.  This search was accomplished by entering CONTAINS for
 the "Select CONDITION:" prompt and then entering two double quotes ("")
 for the "Enter VALUE:" prompt.
  
 A site has requested that this functionality be restored.
  
 Solution:
 --------
 Modify routine LRSORA to return its original functionality of finding
 all 'not null' data for a selected lab test when "" is entered in the
 "Enter VALUE:" prompt and the "Select CONDITION:" is set to CONTAINS.
  
  
 INSTALLATION INSTRUCTIONS:
 ==========================
 This patch can be loaded with users in the system, but it should be
 installed during non-peak hours.  Installation time will be less than
 two minutes.
  
 1.  Choose the PackMan message containing this patch and invoke the
     INTALL/CHECK MESSAGE Packman option.
  
 2.  Start up the Kernel Installation and Distribution System Menu [XPD
     MAIN]:
  
            Edits and Distribution ...
            Utilities ...
            Installation ...
  
     Select Kernel Installation & Distribution System Option:
     Installation
  
            1      Load a Distribution
            2      Verify Checksums in Transport Global
            3      Print Transport Global
            4      Compare Transport Global to Current System
            5      Backup a Transport Global
            6      Install Package(s)
                   Restart Install of Package(s)
                   Unload a Distribution
  
 3.  From this menu, it is highly recommended that you use the following
     options (When prompted for the INSTALL NAME, enter LR*5.2*357):
  
     a.  Verify Checksums in Transport Global - This option will verify the
         checksums of routines included in this patch.
     b.  Print Transport Global - This option will print out a list of all
         the componets exported in this patch.
     c.  Compare Transport Global to Current System - This option will 
         allow you to view all changes that will be made when this patch is
         installed.  It compares all components of this patch (routines,
         DD's, templates, etc.).
     d.  Backup a Transport Global - This option will back up the current
         versions of the routines in this patch before it is installed.
  
 4.  Use the Install Package(s) option and select the package LR*5.2*357.
  
     a.  When prompted "Want KIDS to INHIBIT LOGONs during the install?
         YES//", answer NO.
     b.  When prompted "Want to DISABLE Scheduled Options and Menu Options
         and Protocols? YES//", answer NO.
  
 5.  This step is optional.  In order to clean up any erroneous cross  
     reference records in the ORDERABLE ITEMS file, you will need to run
     option ALLU^LR7OV2 [LR7O ALL LAB TESTS - Update CPRS with all Lab test
     parameters]
  
  
 ROUTINE SUMMARY:
 ===============
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
  
      <tab>;;5.2;LAB SERVICE;**[patch list]**;Sep 27,1994
  
  
                          CHECK^XTSUMBLD results  
  
      Routine name     Before Patch   After Patch    Patch List
      ------------     ------------   ------------   -----------
      LR7OV0           6120300        10440068       **121,187,357**
      LRSORA           7796648        7850534        **344,357**

Routine Information:
====================
The checksums below are new checksums, and
 can be checked with CHECK1^XTSUMBLD.

Routine Name: LR7OV0
    Before: B10554310  After: B23457676  **121,187,357**
Routine Name: LRSORA
    Before: B27010859  After: B27384582  **344,357**

=============================================================================
User Information:
Entered By  : UNDERHILL,GARDNER D           Date Entered  : MAR 28, 2006
Completed By: WERNER,GARY                   Date Completed: JUN 07, 2006
Released By : LECLAIR,RAY                   Date Released : JUN 08, 2006
=============================================================================


Packman Mail Message:
=====================

$END TXT

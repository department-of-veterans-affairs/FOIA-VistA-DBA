Released XU*8*270 SEQ #276
Extracted from mail message
**KIDS**:XU*8.0*270^

**INSTALL NAME**
XU*8.0*270
"BLD",2208,0)
XU*8.0*270^KERNEL^0^3030401^y
"BLD",2208,4,0)
^9.64PA^^
"BLD",2208,"ABPKG")
n
"BLD",2208,"KRN",0)
^9.67PA^8989.52^19
"BLD",2208,"KRN",.4,0)
.4
"BLD",2208,"KRN",.401,0)
.401
"BLD",2208,"KRN",.402,0)
.402
"BLD",2208,"KRN",.403,0)
.403
"BLD",2208,"KRN",.5,0)
.5
"BLD",2208,"KRN",.84,0)
.84
"BLD",2208,"KRN",3.6,0)
3.6
"BLD",2208,"KRN",3.8,0)
3.8
"BLD",2208,"KRN",9.2,0)
9.2
"BLD",2208,"KRN",9.8,0)
9.8
"BLD",2208,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",2208,"KRN",9.8,"NM",1,0)
XUMFP4C^^0^B34374472
"BLD",2208,"KRN",9.8,"NM","B","XUMFP4C",1)

"BLD",2208,"KRN",19,0)
19
"BLD",2208,"KRN",19.1,0)
19.1
"BLD",2208,"KRN",101,0)
101
"BLD",2208,"KRN",409.61,0)
409.61
"BLD",2208,"KRN",771,0)
771
"BLD",2208,"KRN",870,0)
870
"BLD",2208,"KRN",8989.51,0)
8989.51
"BLD",2208,"KRN",8989.52,0)
8989.52
"BLD",2208,"KRN",8994,0)
8994
"BLD",2208,"KRN","B",.4,.4)

"BLD",2208,"KRN","B",.401,.401)

"BLD",2208,"KRN","B",.402,.402)

"BLD",2208,"KRN","B",.403,.403)

"BLD",2208,"KRN","B",.5,.5)

"BLD",2208,"KRN","B",.84,.84)

"BLD",2208,"KRN","B",3.6,3.6)

"BLD",2208,"KRN","B",3.8,3.8)

"BLD",2208,"KRN","B",9.2,9.2)

"BLD",2208,"KRN","B",9.8,9.8)

"BLD",2208,"KRN","B",19,19)

"BLD",2208,"KRN","B",19.1,19.1)

"BLD",2208,"KRN","B",101,101)

"BLD",2208,"KRN","B",409.61,409.61)

"BLD",2208,"KRN","B",771,771)

"BLD",2208,"KRN","B",870,870)

"BLD",2208,"KRN","B",8989.51,8989.51)

"BLD",2208,"KRN","B",8989.52,8989.52)

"BLD",2208,"KRN","B",8994,8994)

"BLD",2208,"QUES",0)
^9.62^^
"BLD",2208,"REQB",0)
^9.611^4^3
"BLD",2208,"REQB",1,0)
XU*8.0*206^0
"BLD",2208,"REQB",2,0)
XU*8.0*209^0
"BLD",2208,"REQB",4,0)
XU*8.0*217^0
"BLD",2208,"REQB","B","XU*8.0*206",1)

"BLD",2208,"REQB","B","XU*8.0*209",2)

"BLD",2208,"REQB","B","XU*8.0*217",4)

"MBREQ")
0
"PKG",113,-1)
1^1
"PKG",113,0)
KERNEL^XU^SIGN-ON, SECURITY, MENU DRIVER, DEVICES, TASKMAN^XUDOCV7 NEW FEATURES
"PKG",113,20,0)
^9.402P^^
"PKG",113,22,0)
^9.49I^1^1
"PKG",113,22,1,0)
8.0^2950703^2960322^648
"PKG",113,22,1,"PAH",1,0)
270^3030401
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","XUMFP4C")
0^1^B34374472
"RTN","XUMFP4C",1,0)
XUMFP4C ;CIOFO-SF/RAM - Master File C/S Params INSTITUTION ;06/28/00
"RTN","XUMFP4C",2,0)
 ;;8.0;KERNEL;**206,209,217,270**;Jul 10, 1995
"RTN","XUMFP4C",3,0)
 ;
"RTN","XUMFP4C",4,0)
 ; this routine is a called by XUMFP4 and is a continuation of that
"RTN","XUMFP4C",5,0)
 ; routine
"RTN","XUMFP4C",6,0)
 ;
"RTN","XUMFP4C",7,0)
QRD ; -- query definition segment
"RTN","XUMFP4C",8,0)
 ;
"RTN","XUMFP4C",9,0)
 ;Query Date/Time
"RTN","XUMFP4C",10,0)
 I '$D(^TMP("XUMF MFS",$J,"PARAM","QDT")) D
"RTN","XUMFP4C",11,0)
 .S ^TMP("XUMF MFS",$J,"PARAM","QDT")=$$HLDATE^HLFNC($$NOW^XLFDT)
"RTN","XUMFP4C",12,0)
 ;
"RTN","XUMFP4C",13,0)
 ;Query Format Code
"RTN","XUMFP4C",14,0)
 I '$D(^TMP("XUMF MFS",$J,"PARAM","QFC")) D
"RTN","XUMFP4C",15,0)
 .S ^TMP("XUMF MFS",$J,"PARAM","QFC")="R"
"RTN","XUMFP4C",16,0)
 ;
"RTN","XUMFP4C",17,0)
 ;Query Priority
"RTN","XUMFP4C",18,0)
 I '$D(^TMP("XUMF MFS",$J,"PARAM","QP")) D
"RTN","XUMFP4C",19,0)
 .S ^TMP("XUMF MFS",$J,"PARAM","QP")="I"
"RTN","XUMFP4C",20,0)
 ;
"RTN","XUMFP4C",21,0)
 ;Query ID
"RTN","XUMFP4C",22,0)
 I '$D(^TMP("XUMF MFS",$J,"PARAM","QID")) D
"RTN","XUMFP4C",23,0)
 .S ^TMP("XUMF MFS",$J,"PARAM","QID")="Z04 "_$S(ARRAY:"ARRAY",1:"FILE")
"RTN","XUMFP4C",24,0)
 ;
"RTN","XUMFP4C",25,0)
 ;Deferred Response Type (optional)
"RTN","XUMFP4C",26,0)
 I '$D(^TMP("XUMF MFS",$J,"PARAM","DRT")) D
"RTN","XUMFP4C",27,0)
 .S ^TMP("XUMF MFS",$J,"PARAM","DRT")=""
"RTN","XUMFP4C",28,0)
 ;
"RTN","XUMFP4C",29,0)
 ;Deferred Response Date/Time (optional)
"RTN","XUMFP4C",30,0)
 I '$D(^TMP("XUMF MFS",$J,"PARAM","DRDT")) D
"RTN","XUMFP4C",31,0)
 .S ^TMP("XUMF MFS",$J,"PARAM","DRDT")=""
"RTN","XUMFP4C",32,0)
 ;
"RTN","XUMFP4C",33,0)
 ;Quantity Limited Request
"RTN","XUMFP4C",34,0)
 I '$D(^TMP("XUMF MFS",$J,"PARAM","QLR")) D
"RTN","XUMFP4C",35,0)
 .S ^TMP("XUMF MFS",$J,"PARAM","QLR")="RD"_HLCS_999
"RTN","XUMFP4C",36,0)
 ;
"RTN","XUMFP4C",37,0)
 ;Who Subject Filter - sta#, D x-ref, assigning facility
"RTN","XUMFP4C",38,0)
 I '$D(^TMP("XUMF MFS",$J,"PARAM","WHO")) D
"RTN","XUMFP4C",39,0)
 .N X S X=$S(ALL:"ALL",IEN:$P($G(^DIC(4,+IEN,99)),U),1:"IEN ARRAY")
"RTN","XUMFP4C",40,0)
 .S $P(X,HLCS,9,10)="D"_HLCS_"045A4"
"RTN","XUMFP4C",41,0)
 .S:$G(CDSYS)'="" $P(X,HLCS,9,10)="DMIS"_HLCS_"DOD"
"RTN","XUMFP4C",42,0)
 .S ^TMP("XUMF MFS",$J,"PARAM","WHO")=X
"RTN","XUMFP4C",43,0)
 ;
"RTN","XUMFP4C",44,0)
 ;What Subject Filter
"RTN","XUMFP4C",45,0)
 I '$D(^TMP("XUMF MFS",$J,"PARAM","WHAT")) D
"RTN","XUMFP4C",46,0)
 .S ^TMP("XUMF MFS",$J,"PARAM","WHAT")="4"_HLCS_"IFN"_HLCS_"VA FM"
"RTN","XUMFP4C",47,0)
 ;
"RTN","XUMFP4C",48,0)
 ;What Department Data Code
"RTN","XUMFP4C",49,0)
 I '$D(^TMP("XUMF MFS",$J,"PARAM","WDDC")) D
"RTN","XUMFP4C",50,0)
 .N X S X="INFRASTRUCTURE"_HLCS_"INFORMATION INFRASTRUCTURE"
"RTN","XUMFP4C",51,0)
 .S X=X_HLCS_"VA TS"
"RTN","XUMFP4C",52,0)
 .S ^TMP("XUMF MFS",$J,"PARAM","WDDC")=X
"RTN","XUMFP4C",53,0)
 ;
"RTN","XUMFP4C",54,0)
 ;What Data Code Value Qual (optional)
"RTN","XUMFP4C",55,0)
 I '$D(^TMP("XUMF MFS",$J,"PARAM","WDCVQ")) D
"RTN","XUMFP4C",56,0)
 .S ^TMP("XUMF MFS",$J,"PARAM","WDCVQ")=""
"RTN","XUMFP4C",57,0)
 ;
"RTN","XUMFP4C",58,0)
 ;Query Results Level (optional)
"RTN","XUMFP4C",59,0)
 I '$D(^TMP("XUMF MFS",$J,"PARAM","QRL")) D
"RTN","XUMFP4C",60,0)
 .S ^TMP("XUMF MFS",$J,"PARAM","QRL")=""
"RTN","XUMFP4C",61,0)
 ;
"RTN","XUMFP4C",62,0)
 Q
"RTN","XUMFP4C",63,0)
 ;
"RTN","XUMFP4C",64,0)
PRE ; -- pre-update record
"RTN","XUMFP4C",65,0)
 ;
"RTN","XUMFP4C",66,0)
 N X S X=IEN
"RTN","XUMFP4C",67,0)
 ;
"RTN","XUMFP4C",68,0)
 I '$G(IEN),$P(KEY,HLCS)'="" D
"RTN","XUMFP4C",69,0)
 .S IEN=$O(^DIC(4,"D",$P(KEY,HLCS),0))
"RTN","XUMFP4C",70,0)
 .S:'IEN IEN=X
"RTN","XUMFP4C",71,0)
 ;
"RTN","XUMFP4C",72,0)
 S XUMF0=$G(^DIC(4,+IEN,0))
"RTN","XUMFP4C",73,0)
 S XUMF1=$G(^DIC(4,+IEN,1))
"RTN","XUMFP4C",74,0)
 S XUMF3=$G(^DIC(4,+IEN,3))
"RTN","XUMFP4C",75,0)
 S XUMF4=$G(^DIC(4,+IEN,4))
"RTN","XUMFP4C",76,0)
 S XUMF99=$G(^DIC(4,+IEN,99))
"RTN","XUMFP4C",77,0)
 S XUMFPRNT=$P($G(^DIC(4,+$P($G(^DIC(4,IEN,7,2,0)),U,2),99)),U)
"RTN","XUMFP4C",78,0)
 S XUMFVISN=$P($G(^DIC(4,+$P($G(^DIC(4,IEN,7,1,0)),U,2),0)),U)
"RTN","XUMFP4C",79,0)
 S XUMFSTTE=$P($G(^DIC(5,+$P(XUMF0,U,2),0)),U,2)
"RTN","XUMFP4C",80,0)
 ;
"RTN","XUMFP4C",81,0)
 S IEN=X
"RTN","XUMFP4C",82,0)
 ;
"RTN","XUMFP4C",83,0)
 Q
"RTN","XUMFP4C",84,0)
 ;
"RTN","XUMFP4C",85,0)
POST ; -- post-update record
"RTN","XUMFP4C",86,0)
 ;
"RTN","XUMFP4C",87,0)
 N X S X=IEN
"RTN","XUMFP4C",88,0)
 ;
"RTN","XUMFP4C",89,0)
 I '$G(IEN),$P(KEY,HLCS)'="" D
"RTN","XUMFP4C",90,0)
 .S IEN=$O(^DIC(4,"D",$P(KEY,HLCS),0))
"RTN","XUMFP4C",91,0)
 .S:'IEN IEN=X
"RTN","XUMFP4C",92,0)
 ;
"RTN","XUMFP4C",93,0)
 N NAME,VANAME,FACTYP,ONAM,OVANAM,OFACTYP,XMB,IENS,FDA,STANUM
"RTN","XUMFP4C",94,0)
 N STATE,FLAG,OFLAG,ADD1,ADD2,PRNT,VISN
"RTN","XUMFP4C",95,0)
 ;
"RTN","XUMFP4C",96,0)
 S ONAM=$P(XUMF0,U)
"RTN","XUMFP4C",97,0)
 S OFACTYP=$P($G(^DIC(4.1,+XUMF3,0)),U)
"RTN","XUMFP4C",98,0)
 S OVANAM=$P(XUMF99,U,3)
"RTN","XUMFP4C",99,0)
 S OFLAG=$S(+$P(XUMF99,U,4):"INACTIVE",1:"")
"RTN","XUMFP4C",100,0)
 ;
"RTN","XUMFP4C",101,0)
 S NAME=$P($G(^DIC(4,+IEN,0)),U)
"RTN","XUMFP4C",102,0)
 S FACTYP=$P($G(^DIC(4.1,+$G(^DIC(4,+IEN,3)),0)),U)
"RTN","XUMFP4C",103,0)
 S VANAME=$P($G(^DIC(4,+IEN,99)),U,3)
"RTN","XUMFP4C",104,0)
 S STANUM=$P($G(^DIC(4,+IEN,99)),U)
"RTN","XUMFP4C",105,0)
 S FLAG=$S(+$P($G(^DIC(4,+IEN,99)),U,4):"INACTIVE",1:"")
"RTN","XUMFP4C",106,0)
 S PRNT=$P($G(^DIC(4,+$P($G(^DIC(4,+IEN,7,2,0)),U,2),99)),U)
"RTN","XUMFP4C",107,0)
 S VISN=$P($G(^DIC(4,+$P($G(^DIC(4,+IEN,7,1,0)),U,2),0)),U)
"RTN","XUMFP4C",108,0)
 S STATE=$P($G(^DIC(5,+$P($G(^DIC(4,+IEN,0)),U,2),0)),U,2)
"RTN","XUMFP4C",109,0)
 ;
"RTN","XUMFP4C",110,0)
 S ADD1=$G(^DIC(4,+IEN,1)),ADD2=$G(^DIC(4,+IEN,4))
"RTN","XUMFP4C",111,0)
 ;
"RTN","XUMFP4C",112,0)
 I ONAM'=NAME!(OVANAM'=VANAME) D
"RTN","XUMFP4C",113,0)
 .S IENS="?+"_DT_","_IEN_","
"RTN","XUMFP4C",114,0)
 .K FDA
"RTN","XUMFP4C",115,0)
 .S FDA(4.999,IENS,.01)=DT
"RTN","XUMFP4C",116,0)
 .S:NAME'=ONAM FDA(4.999,IENS,.02)=ONAM
"RTN","XUMFP4C",117,0)
 .S:VANAME'=OVANAM FDA(4.999,IENS,.03)=OVANAM
"RTN","XUMFP4C",118,0)
 .D UPDATE^DIE("E","FDA")
"RTN","XUMFP4C",119,0)
 ;
"RTN","XUMFP4C",120,0)
 ; -- notification bulletin
"RTN","XUMFP4C",121,0)
 S XMB="XUMF INSTITUTION"
"RTN","XUMFP4C",122,0)
 S XMB(1)=HL("MID"),XMB(2)=$S(ONAM="":"Added",1:"Updated")
"RTN","XUMFP4C",123,0)
 S XMB(3)=IEN,XMB(4)=STANUM
"RTN","XUMFP4C",124,0)
 ;updated/current values
"RTN","XUMFP4C",125,0)
 S XMB(5)=NAME,XMB(6)=VANAME,XMB(7)=FACTYP
"RTN","XUMFP4C",126,0)
 S XMB(11)=FLAG,XMB(12)=STATE,XMB(13)=VISN,XMB(14)=PRNT
"RTN","XUMFP4C",127,0)
 S XMB(19)=$P(ADD1,U),XMB(20)=$P(ADD1,U,3),XMB(22)=$P(ADD1,U,4)
"RTN","XUMFP4C",128,0)
 S XMB(23)=$P(ADD2,U),XMB(24)=$P(ADD2,U,3),XMB(26)=$P(ADD2,U,5)
"RTN","XUMFP4C",129,0)
 S XMB(25)=$P($G(^DIC(5,+$P(ADD2,U,4),0)),U,2)
"RTN","XUMFP4C",130,0)
 ;old values
"RTN","XUMFP4C",131,0)
 S XMB(8)=ONAM,XMB(9)=OVANAM,XMB(10)=OFACTYP,XMB(15)=OFLAG
"RTN","XUMFP4C",132,0)
 S XMB(16)=XUMFSTTE,XMB(17)=XUMFVISN,XMB(18)=XUMFPRNT
"RTN","XUMFP4C",133,0)
 S XMB(27)=$P(XUMF1,U),XMB(28)=$P(XUMF1,U,3),XMB(29)=$P(XUMF1,U,4)
"RTN","XUMFP4C",134,0)
 S XMB(30)=$P(XUMF4,U),XMB(31)=$P(XUMF4,U,3),XMB(33)=$P(XUMF4,U,5)
"RTN","XUMFP4C",135,0)
 S XMB(32)=$P($G(^DIC(5,+$P(XUMF4,U,4),0)),U,2)
"RTN","XUMFP4C",136,0)
 D ^XMB
"RTN","XUMFP4C",137,0)
 ;
"RTN","XUMFP4C",138,0)
 K XUMF0,XUMF3,XUMF99,XUMFSTTE,XUMFVISN,XUMFPRNT,XUMF1,XUMF4
"RTN","XUMFP4C",139,0)
 ;
"RTN","XUMFP4C",140,0)
 Q
"RTN","XUMFP4C",141,0)
 ;
"RTN","XUMFP4C",142,0)
GROUP ; -- query group
"RTN","XUMFP4C",143,0)
 ;
"RTN","XUMFP4C",144,0)
 S IEN=0
"RTN","XUMFP4C",145,0)
 F  S IEN=$O(^TMP("XUMF MFS",$J,"PARAM","IEN",IEN)) Q:'IEN  D
"RTN","XUMFP4C",146,0)
 .S PKV=$P(^DIC(4,IEN,99),U)_HLCS_"STATION NUMBER"_HLCS_"D"
"RTN","XUMFP4C",147,0)
 .I CDSYS'="" D
"RTN","XUMFP4C",148,0)
 ..S $P(PKV,HLCS,1)=^TMP("XUMF MFS",$J,"PARAM","IEN",IEN)
"RTN","XUMFP4C",149,0)
 ..S $P(PKV,HLCS,2)=$P($G(^DIC(4,+IEN,0)),U),$P(PKV,HLCS,3)=CDSYS
"RTN","XUMFP4C",150,0)
 .S ^TMP("XUMF MFS",$J,"PARAM",IEN,"PKV")=PKV
"RTN","XUMFP4C",151,0)
 .S ^TMP("XUMF MFS",$J,"PARAM",IEN,"IENS","ZIN",8)="1,"_IEN_","
"RTN","XUMFP4C",152,0)
 .S ^TMP("XUMF MFS",$J,"PARAM",IEN,"KEY","ZIN",4.014,"1,"_IEN_",")="VISN"
"RTN","XUMFP4C",153,0)
 .S ^TMP("XUMF MFS",$J,"PARAM",IEN,"IENS","ZIN",9)="2,"_IEN_","
"RTN","XUMFP4C",154,0)
 .S ^TMP("XUMF MFS",$J,"PARAM",IEN,"KEY","ZIN",4.014,"2,"_IEN_",")="PARENT FACILITY"
"RTN","XUMFP4C",155,0)
 .S RF=$$RF^XUAF4(IEN) D:RF
"RTN","XUMFP4C",156,0)
 ..S ^TMP("XUMF MFS",$J,"PARAM",IEN,"IENS","ZIN",10)=$P(RF,U,3)_","_IEN_","
"RTN","XUMFP4C",157,0)
 ..S ^TMP("XUMF MFS",$J,"PARAM",IEN,"IENS","ZIN",11)=$P(RF,U,3)_","_IEN_","
"RTN","XUMFP4C",158,0)
 ..S ^TMP("XUMF MFS",$J,"PARAM",IEN,"KEY","ZIN",4.999,$P(RF,U,3)_","_IEN_",")=$P(RF,U,3)
"RTN","XUMFP4C",159,0)
 .S RT=$$RT^XUAF4(IEN) D:RT
"RTN","XUMFP4C",160,0)
 ..S ^TMP("XUMF MFS",$J,"PARAM",IEN,"IENS","ZIN",12)=$P(RT,U,3)_","_IEN_","
"RTN","XUMFP4C",161,0)
 ..S ^TMP("XUMF MFS",$J,"PARAM",IEN,"IENS","ZIN",13)=$P(RT,U,3)_","_IEN_","
"RTN","XUMFP4C",162,0)
 ..S ^TMP("XUMF MFS",$J,"PARAM",IEN,"KEY","ZIN",4.999,$P(RT,U,3)_","_IEN_",")=$P(RT,U,3)
"RTN","XUMFP4C",163,0)
 ;
"RTN","XUMFP4C",164,0)
 Q
"RTN","XUMFP4C",165,0)
 ;
"VER")
8.0^22.0
**END**
**END**

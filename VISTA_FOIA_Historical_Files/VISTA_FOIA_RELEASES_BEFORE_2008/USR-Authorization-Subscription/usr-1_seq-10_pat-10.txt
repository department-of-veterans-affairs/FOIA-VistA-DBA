$TXT Created by REDINGTON,PATRICK at DVF.ISC-SLC.VA.GOV  (KIDS) on TUESDAY, 10/20/98 at 08:27
=============================================================================
Run Date: OCT 22, 1998                     Designation: USR*1*10
Package : USR - AUTHORIZATION/SUBSCRIPTION     Priority: Mandatory
Version : 1        SEQ #10                      Status: Released
=============================================================================

Associated patches: (v)USR*1*9     <<= must be installed BEFORE `USR*1*10'

Subject: UNDEFINED WHEN REMOVING A USER

Category: 
  - Routine

Description: 
============

 General Overview:
 =================
 This patch fixes an undefined error(SIGNAME+2^USRLS:1, %DSM-E-UNDEF
 undefined variable ^VA(200,0,0), -DSM-I-ECODE, MUMPS error code M7)
 that arises when a user's class membership is removed. The undefined
 problem appears after the installation of patch USR*1*9.
  
 Patch USR*1*3 replaced calls to TIU functions with calls to ASU
 functions. Another call to a TIU protocol was uncovered during the
 development of this patch. It was replaced with the corresponding ASU
 protocol.
  
  NOIS Messages:
  ==============
  BED-1098-11200
  CHY-1098-51458
  HUN-1098-21222
  PUG-1098-50642
   
 
 Build Components:
 =================
  
  Routines:
  =========
  The following is a list of the routines included in this patch. The 
  second line of each routine looks like:
  
 <tab>;;1.0;PCE PATIENT CARE ENCOUNTER;**[Patch List]**;Aug 12, 1996
  
  Routine         Old Checksum    New Checksum     Patch List
  =======         ============    ============     ==========
  USRM              1126234         1174264          3,    10
  USRULST           3066875         3067119        2,3,4,9,10
  USRUM             1040208         1088238          3,    10
  
  
 Installation:
 =============
 This patch can be loaded with users on the system. Installation will take
 less than 2 minutes.
  
 1. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu.
  
 2. Review your mapped set. If any of the routines are mapped, they should be
    removed from the mapped set at this time.
  
 3. On the KIDS menu under the 'INSTALLATION' menu, use the following
    options as desired:
        Print Transport Global
        Compare Transport Global to Current System
        Verify Checksums in Transport Global
        Backup a Transport Global
  
 4. On the KIDS menu under the 'INSTALLATION' menu, use the following
    option to install the patch:
        Install Package(s) (USR*1.0*10)
  
 5. When prompted "Want to DISABLE Scheduled Options, Menu Options,
    and Protocols? YES//," respond 'YES'. When prompted to select the
    options you would like to place out or order, enter the following:
   
    USR*
  
 6. If any routines were unmapped as part of step 2, they should be returned
    to the mapped set once the installation has run to completion.
  
  
 Detailed Description:
 =====================
 The release of patch USR*1*9 uncovered a problem when removing a user
 from class membership. Patch 9 changed the user name that the
 Authorization Subscription Utility (ASU) displays from the SIGNATURE
 BLOCK PRINTED NAME field to the NAME (.01) field of file 200, NEW
 PERSON FILE. A $G was used to obtain the SIGNATURE BLOCK PRINTED NAME
 so if the record did not exist no error was generated. With patch 9 no
 $G was used to obtain the .01 field since it must exist for the user to
 be valid. When removing a user, a call to get the ASU display name was
 made after the class membership record had been deleted. Because the
 record was deleted an invalid DUZ of 0 was obtained leading to the
 undefined error.
  
 1. Routines:  USRM,USRUM
 These routines were changed so that when a user's class membership is
 removed no call to get the SIGNAME is made.
  
 2. Routine:  USRULST
 While locating the source of the problem described above, the use of a
 the TIU protocol TIU ACTION SELECTION LIST ELEMENT was found. This
 protocol was replaced with USR ACTION SELECT LIST ELEMENT to keep
 everything within the USR namespace.
 

Routine Information:
====================

Routine Name:
  - USRM


Routine Checksum:

Routine Name:
  - USRULST


Routine Checksum:

Routine Name:
  - USRUM


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : REDINGTON,PATRICK              Date Entered : OCT 15, 1998
Completed By: SMITH,VAUGHN                  Date Completed: OCT 21, 1998
Released By : SAUNDERS,TOM                  Date Released : OCT 22, 1998
=============================================================================


Packman Mail Message:
=====================

$END TXT

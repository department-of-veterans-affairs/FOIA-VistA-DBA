Released LA*5.2*72 SEQ #54
Extracted from mail message
**KIDS**:LA*5.2*72^

**INSTALL NAME**
LA*5.2*72
"BLD",5918,0)
LA*5.2*72^AUTOMATED LAB INSTRUMENTS^0^3060501^y
"BLD",5918,1,0)
^^201^201^3060501^
"BLD",5918,1,1,0)
Blood Bank Team Coordination
"BLD",5918,1,2,0)
============================
"BLD",5918,1,3,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LA*5.2*72 does not 
"BLD",5918,1,4,0)
contain any changes to the VISTA BLOOD BANK Software as defined by VHA 
"BLD",5918,1,5,0)
DIRECTIVE 2004-053 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
"BLD",5918,1,6,0)
 
"BLD",5918,1,7,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LA*5.2*72 does not 
"BLD",5918,1,8,0)
alter or modify any software design safeguards or safety critical 
"BLD",5918,1,9,0)
elements functions.
"BLD",5918,1,10,0)
 
"BLD",5918,1,11,0)
RISK ANALYSIS: Changes made by patch LA*5.2*72 have no effect on Blood 
"BLD",5918,1,12,0)
Bank software functionality, therefore RISK is none.
"BLD",5918,1,13,0)
 
"BLD",5918,1,14,0)
VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes 
"BLD",5918,1,15,0)
made, no specific validation requirements exist as a result of 
"BLD",5918,1,16,0)
installation of this patch. 
"BLD",5918,1,17,0)
************************************************************************
"BLD",5918,1,18,0)
 
"BLD",5918,1,19,0)
Sites reported errors logged in the error trap when receiving lab results 
"BLD",5918,1,20,0)
back from another VA host lab via Lab Electronic Data Interchange (LEDI):
"BLD",5918,1,21,0)
 
"BLD",5918,1,22,0)
 
"BLD",5918,1,23,0)
$ZE= <UNDEFINED>PRDID+11^LA7VIN5A
"BLD",5918,1,24,0)
 
"BLD",5918,1,25,0)
 . I $P(LA7PRDID,LA7CS,LA7I+2)="99VA4" S 
"BLD",5918,1,26,0)
LA74=$$LKUP^XUAF4($P(LA7PRDID,LA7CS,I))
"BLD",5918,1,27,0)
 
"BLD",5918,1,28,0)
 
"BLD",5918,1,29,0)
The following portion of code in PRDID^LA7VIN5A has been changed to 
"BLD",5918,1,30,0)
reference the correct variable (LA7I instead of I): 
"BLD",5918,1,31,0)
 
"BLD",5918,1,32,0)
**PREVIOUS CODE**
"BLD",5918,1,33,0)
F LA7I=1,4 D  Q:LA74                                                   
"BLD",5918,1,34,0)
. I $P(LA7PRDID,LA7CS,LA7I+2)="99VA4" S 
"BLD",5918,1,35,0)
LA74=$$LKUP^XUAF4($P(LA7PRDID,LA7CS,I))
"BLD",5918,1,36,0)
. I 'LA74 S LA74=$$LKUP^XUAF4($P(LA7PRDID,LA7CS,I+1))                  
"BLD",5918,1,37,0)
. I 'LA74 S LA74=$$FINDSITE^LA7VHLU2($P(LA7PRDID,LA7CS),1,1)           
"BLD",5918,1,38,0)
. I 'LA74 S LA74=$$FINDSITE^LA7VHLU2($P(LA7SFAC,LA7CS),1,1)
"BLD",5918,1,39,0)
 
"BLD",5918,1,40,0)
 
"BLD",5918,1,41,0)
**NEW CODE**
"BLD",5918,1,42,0)
F LA7I=1,4 D  Q:LA74
"BLD",5918,1,43,0)
. I $P(LA7PRDID,LA7CS,LA7I+2)="99VA4" S 
"BLD",5918,1,44,0)
LA74=$$LKUP^XUAF4($P(LA7PRDID,LA7CS,LA7I))
"BLD",5918,1,45,0)
. I 'LA74 S LA74=$$LKUP^XUAF4($P(LA7PRDID,LA7CS,LA7I+1))
"BLD",5918,1,46,0)
. I 'LA74 S LA74=$$FINDSITE^LA7VHLU2($P(LA7PRDID,LA7CS),1,1)
"BLD",5918,1,47,0)
. I 'LA74 S LA74=$$FINDSITE^LA7VHLU2($P(LA7SFAC,LA7CS),1,1)
"BLD",5918,1,48,0)
 
"BLD",5918,1,49,0)
 
"BLD",5918,1,50,0)
Associated Remedy:
"BLD",5918,1,51,0)
===============
"BLD",5918,1,52,0)
HD0000000099666
"BLD",5918,1,53,0)
HD0000000102341 (duplicate)
"BLD",5918,1,54,0)
 
"BLD",5918,1,55,0)
 
"BLD",5918,1,56,0)
Associated E3R:
"BLD",5918,1,57,0)
===============
"BLD",5918,1,58,0)
N/A
"BLD",5918,1,59,0)
 
"BLD",5918,1,60,0)
 
"BLD",5918,1,61,0)
Test Sites
"BLD",5918,1,62,0)
==========
"BLD",5918,1,63,0)
Fayetteville, NC  (565) (medium)
"BLD",5918,1,64,0)
Hines (578) (large)
"BLD",5918,1,65,0)
North Chicago (556) (medium)
"BLD",5918,1,66,0)
Northern Indiana HCS (610) (medium) (integrated) 
"BLD",5918,1,67,0)
 
"BLD",5918,1,68,0)
 
"BLD",5918,1,69,0)
ROUTINE SUMMARY
"BLD",5918,1,70,0)
===============
"BLD",5918,1,71,0)
  The following routines are included in this patch.  The second line
"BLD",5918,1,72,0)
  of each of these routines now looks like:
"BLD",5918,1,73,0)
  <tab> ;;5.2;AUTOMATED LAB INSTRUMENTS;<patchlist>;Sep 27, 1994
"BLD",5918,1,74,0)
 
"BLD",5918,1,75,0)
                  Checksum       Checksum
"BLD",5918,1,76,0)
 Routine Name     Before Patch   After Patch    Patch List
"BLD",5918,1,77,0)
     LA7VIN5A     9628469        9655113        46,64,67,72
"BLD",5918,1,78,0)
     LA72         N/A            4388949        72 (D)
"BLD",5918,1,79,0)
 
"BLD",5918,1,80,0)
     (D) -- Routine deleted by KIDS after installation
"BLD",5918,1,81,0)
     List of preceding patches: 67
"BLD",5918,1,82,0)
     Sites should use CHECK^XTSUMBLD to verify checksums.
"BLD",5918,1,83,0)
 
"BLD",5918,1,84,0)
 
"BLD",5918,1,85,0)
INSTALLATION INSTRUCTIONS
"BLD",5918,1,86,0)
=========================
"BLD",5918,1,87,0)
 
"BLD",5918,1,88,0)
  The install time for this patch is less than 2 minutes.  This patch
"BLD",5918,1,89,0)
  should be installed when Laboratory users are off the system.
"BLD",5918,1,90,0)
 
"BLD",5918,1,91,0)
  Suggested time to install: non-peak requirement hours.
"BLD",5918,1,92,0)
  The installation should NOT be queued.
"BLD",5918,1,93,0)
 
"BLD",5918,1,94,0)
  NOTE: Kernel patches must be current on the target system to avoid
"BLD",5918,1,95,0)
        problems loading and/or installing this patch.
"BLD",5918,1,96,0)
 
"BLD",5918,1,97,0)
      Patch installation needs to be coordinated with the Laboratory
"BLD",5918,1,98,0)
      Information Manager (LIM/ADPAC).
"BLD",5918,1,99,0)
 
"BLD",5918,1,100,0)
  1.  Use the 'INSTALL/CHECK MESSAGE' option of the PackMan menu.  This
"BLD",5918,1,101,0)
      option will load the KIDS patch onto your system.
"BLD",5918,1,102,0)
 
"BLD",5918,1,103,0)
  2.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
"BLD",5918,1,104,0)
      select the 'Installation' menu.
"BLD",5918,1,105,0)
 
"BLD",5918,1,106,0)
  3.  Use the 'Verify Checksum in Transport Global' option and verify
"BLD",5918,1,107,0)
      that all routines have the correct checksums.
"BLD",5918,1,108,0)
 
"BLD",5918,1,109,0)
  4.  On the KIDS menu, under the 'Installation' menu, use the following
"BLD",5918,1,110,0)
      options:
"BLD",5918,1,111,0)
        Print Transport Global
"BLD",5918,1,112,0)
        Compare Transport Global to Current System
"BLD",5918,1,113,0)
        Backup a Transport Global
"BLD",5918,1,114,0)
 
"BLD",5918,1,115,0)
  5.  Use the 'Install Package(s)' option under the 'Installation' menu
"BLD",5918,1,116,0)
      and select the package 'LA*5.2*72'
"BLD",5918,1,117,0)
 
"BLD",5918,1,118,0)
      When prompted
"BLD",5918,1,119,0)
        'Want KIDS to Rebuild Menu Trees Upon Completion of Install?' 
"BLD",5918,1,120,0)
      choose 'NO'.  Note: Responding "Yes" to the prompt for rebuilding
"BLD",5918,1,121,0)
      menu trees can significantly increase install time.
"BLD",5918,1,122,0)
 
"BLD",5918,1,123,0)
      When prompted 
"BLD",5918,1,124,0)
         'Want KIDS to INHIBIT LOGONs during the install? 
"BLD",5918,1,125,0)
      choose 'NO'.
"BLD",5918,1,126,0)
 
"BLD",5918,1,127,0)
      When prompted 
"BLD",5918,1,128,0)
          'Want to DISABLE Scheduled Options, Menu Options, and
"BLD",5918,1,129,0)
           Protocols?  YES//'
"BLD",5918,1,130,0)
      choose 'NO' unless site has additional local laboratory  
"BLD",5918,1,131,0)
      options that should be disabled during install.
"BLD",5918,1,132,0)
 
"BLD",5918,1,133,0)
 
"BLD",5918,1,134,0)
 
"BLD",5918,1,135,0)
INSTALLATION EXAMPLE
"BLD",5918,1,136,0)
====================
"BLD",5918,1,137,0)
 
"BLD",5918,1,138,0)
Select KIDS OPTION: INSTALL PACKAGE(S)  
"BLD",5918,1,139,0)
Select INSTALL NAME: LA*5.2*72       Loaded from Distribution  
"BLD",5918,1,140,0)
7/12/05@14:19:30
"BLD",5918,1,141,0)
     => LA*5.2*72 v1
"BLD",5918,1,142,0)
 
"BLD",5918,1,143,0)
This Distribution was loaded on Jul 12, 2005@14:19:30 with header of 
"BLD",5918,1,144,0)
   LA*5.2*72 v1
"BLD",5918,1,145,0)
   It consisted of the following Install(s):
"BLD",5918,1,146,0)
      LA*5.2*72
"BLD",5918,1,147,0)
Checking Install for Package LA*5.2*72
"BLD",5918,1,148,0)
Will first run the Environment Check Routine, LA72
"BLD",5918,1,149,0)
 
"BLD",5918,1,150,0)
 
"BLD",5918,1,151,0)
                        --- Environment Check is Ok --- 
"BLD",5918,1,152,0)
 
"BLD",5918,1,153,0)
Install Questions for LA*5.2*72
"BLD",5918,1,154,0)
 
"BLD",5918,1,155,0)
Want KIDS to INHIBIT LOGONs during the install? YES// NO
"BLD",5918,1,156,0)
Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
"BLD",5918,1,157,0)
 
"BLD",5918,1,158,0)
 
"BLD",5918,1,159,0)
 Install Started for LA*5.2*72 : 
"BLD",5918,1,160,0)
               Jul 12, 2005@14:20
"BLD",5918,1,161,0)
 
"BLD",5918,1,162,0)
Build Distribution Date: Jul 11, 2005
"BLD",5918,1,163,0)
 
"BLD",5918,1,164,0)
 Installing Routines:
"BLD",5918,1,165,0)
               Jul 12, 2005@14:20
"BLD",5918,1,166,0)
 
"BLD",5918,1,167,0)
 Running Pre-Install Routine: PRE^LA72
"BLD",5918,1,168,0)
 
"BLD",5918,1,169,0)
               Sending install started alert to mail group G.LMI 
"BLD",5918,1,170,0)
 
"BLD",5918,1,171,0)
                          *** Pre install started *** 
"BLD",5918,1,172,0)
 
"BLD",5918,1,173,0)
                  --- No actions required for pre install --- 
"BLD",5918,1,174,0)
 
"BLD",5918,1,175,0)
                                   LA*5.2*72  
"BLD",5918,1,176,0)
-------------------------------------------------------------------------
"BLD",5918,1,177,0)
                         *** Pre install completed *** 
"BLD",5918,1,178,0)
 
"BLD",5918,1,179,0)
 Running Post-Install Routine: POST^LA72
"BLD",5918,1,180,0)
 
"BLD",5918,1,181,0)
                          *** Post install started *** 
"BLD",5918,1,182,0)
 
"BLD",5918,1,183,0)
                         *** Post install completed *** 
"BLD",5918,1,184,0)
 
"BLD",5918,1,185,0)
              Sending install completion alert to mail group G.LMI 
"BLD",5918,1,186,0)
 
"BLD",5918,1,187,0)
 Updating Routine file...
"BLD",5918,1,188,0)
 
"BLD",5918,1,189,0)
 Updating KIDS files...
"BLD",5918,1,190,0)
 
"BLD",5918,1,191,0)
 LA*5.2*72 Installed. 
"BLD",5918,1,192,0)
               Jul 12, 2005@14:20
"BLD",5918,1,193,0)
 
"BLD",5918,1,194,0)
 Install Message sent #80481
"BLD",5918,1,195,0)
-------------------------------------------------------------------------
"BLD",5918,1,196,0)
          +------------------------------------------------------------+
"BLD",5918,1,197,0)
  100%    I             25             50             75               I
"BLD",5918,1,198,0)
Complete  +------------------------------------------------------------+
"BLD",5918,1,199,0)
 
"BLD",5918,1,200,0)
 
"BLD",5918,1,201,0)
Install Completed
"BLD",5918,4,0)
^9.64PA^^
"BLD",5918,"INI")
PRE^LA72
"BLD",5918,"INID")
y^y^y
"BLD",5918,"INIT")
POST^LA72
"BLD",5918,"KRN",0)
^9.67PA^8989.52^19
"BLD",5918,"KRN",.4,0)
.4
"BLD",5918,"KRN",.401,0)
.401
"BLD",5918,"KRN",.402,0)
.402
"BLD",5918,"KRN",.403,0)
.403
"BLD",5918,"KRN",.5,0)
.5
"BLD",5918,"KRN",.84,0)
.84
"BLD",5918,"KRN",3.6,0)
3.6
"BLD",5918,"KRN",3.8,0)
3.8
"BLD",5918,"KRN",9.2,0)
9.2
"BLD",5918,"KRN",9.8,0)
9.8
"BLD",5918,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",5918,"KRN",9.8,"NM",1,0)
LA7VIN5A^^0^B66941793
"BLD",5918,"KRN",9.8,"NM","B","LA7VIN5A",1)

"BLD",5918,"KRN",19,0)
19
"BLD",5918,"KRN",19.1,0)
19.1
"BLD",5918,"KRN",101,0)
101
"BLD",5918,"KRN",409.61,0)
409.61
"BLD",5918,"KRN",771,0)
771
"BLD",5918,"KRN",870,0)
870
"BLD",5918,"KRN",8989.51,0)
8989.51
"BLD",5918,"KRN",8989.52,0)
8989.52
"BLD",5918,"KRN",8994,0)
8994
"BLD",5918,"KRN","B",.4,.4)

"BLD",5918,"KRN","B",.401,.401)

"BLD",5918,"KRN","B",.402,.402)

"BLD",5918,"KRN","B",.403,.403)

"BLD",5918,"KRN","B",.5,.5)

"BLD",5918,"KRN","B",.84,.84)

"BLD",5918,"KRN","B",3.6,3.6)

"BLD",5918,"KRN","B",3.8,3.8)

"BLD",5918,"KRN","B",9.2,9.2)

"BLD",5918,"KRN","B",9.8,9.8)

"BLD",5918,"KRN","B",19,19)

"BLD",5918,"KRN","B",19.1,19.1)

"BLD",5918,"KRN","B",101,101)

"BLD",5918,"KRN","B",409.61,409.61)

"BLD",5918,"KRN","B",771,771)

"BLD",5918,"KRN","B",870,870)

"BLD",5918,"KRN","B",8989.51,8989.51)

"BLD",5918,"KRN","B",8989.52,8989.52)

"BLD",5918,"KRN","B",8994,8994)

"BLD",5918,"PRE")
LA72
"BLD",5918,"QUES",0)
^9.62^^
"BLD",5918,"REQB",0)
^9.611^1^1
"BLD",5918,"REQB",1,0)
LA*5.2*67^1
"BLD",5918,"REQB","B","LA*5.2*67",1)

"INI")
PRE^LA72
"INIT")
POST^LA72
"MBREQ")
0
"PKG",53,-1)
1^1
"PKG",53,0)
AUTOMATED LAB INSTRUMENTS^LA^Lab Auto-Instrument Package
"PKG",53,20,0)
^9.402P^^
"PKG",53,22,0)
^9.49I^1^1
"PKG",53,22,1,0)
5.2^2940927^2950125
"PKG",53,22,1,"PAH",1,0)
72^3060501^6686
"PKG",53,22,1,"PAH",1,1,0)
^^201^201^3060501
"PKG",53,22,1,"PAH",1,1,1,0)
Blood Bank Team Coordination
"PKG",53,22,1,"PAH",1,1,2,0)
============================
"PKG",53,22,1,"PAH",1,1,3,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LA*5.2*72 does not 
"PKG",53,22,1,"PAH",1,1,4,0)
contain any changes to the VISTA BLOOD BANK Software as defined by VHA 
"PKG",53,22,1,"PAH",1,1,5,0)
DIRECTIVE 2004-053 titled VISTA BLOOD BANK SOFTWARE VERSION 5.2.
"PKG",53,22,1,"PAH",1,1,6,0)
 
"PKG",53,22,1,"PAH",1,1,7,0)
EFFECT ON BLOOD BANK FUNCTIONAL REQUIREMENTS: Patch LA*5.2*72 does not 
"PKG",53,22,1,"PAH",1,1,8,0)
alter or modify any software design safeguards or safety critical 
"PKG",53,22,1,"PAH",1,1,9,0)
elements functions.
"PKG",53,22,1,"PAH",1,1,10,0)
 
"PKG",53,22,1,"PAH",1,1,11,0)
RISK ANALYSIS: Changes made by patch LA*5.2*72 have no effect on Blood 
"PKG",53,22,1,"PAH",1,1,12,0)
Bank software functionality, therefore RISK is none.
"PKG",53,22,1,"PAH",1,1,13,0)
 
"PKG",53,22,1,"PAH",1,1,14,0)
VALIDATION REQUIREMENTS BY OPTION: Because of the nature of the changes 
"PKG",53,22,1,"PAH",1,1,15,0)
made, no specific validation requirements exist as a result of 
"PKG",53,22,1,"PAH",1,1,16,0)
installation of this patch. 
"PKG",53,22,1,"PAH",1,1,17,0)
************************************************************************
"PKG",53,22,1,"PAH",1,1,18,0)
 
"PKG",53,22,1,"PAH",1,1,19,0)
Sites reported errors logged in the error trap when receiving lab results 
"PKG",53,22,1,"PAH",1,1,20,0)
back from another VA host lab via Lab Electronic Data Interchange (LEDI):
"PKG",53,22,1,"PAH",1,1,21,0)
 
"PKG",53,22,1,"PAH",1,1,22,0)
 
"PKG",53,22,1,"PAH",1,1,23,0)
$ZE= <UNDEFINED>PRDID+11^LA7VIN5A
"PKG",53,22,1,"PAH",1,1,24,0)
 
"PKG",53,22,1,"PAH",1,1,25,0)
 . I $P(LA7PRDID,LA7CS,LA7I+2)="99VA4" S 
"PKG",53,22,1,"PAH",1,1,26,0)
LA74=$$LKUP^XUAF4($P(LA7PRDID,LA7CS,I))
"PKG",53,22,1,"PAH",1,1,27,0)
 
"PKG",53,22,1,"PAH",1,1,28,0)
 
"PKG",53,22,1,"PAH",1,1,29,0)
The following portion of code in PRDID^LA7VIN5A has been changed to 
"PKG",53,22,1,"PAH",1,1,30,0)
reference the correct variable (LA7I instead of I): 
"PKG",53,22,1,"PAH",1,1,31,0)
 
"PKG",53,22,1,"PAH",1,1,32,0)
**PREVIOUS CODE**
"PKG",53,22,1,"PAH",1,1,33,0)
F LA7I=1,4 D  Q:LA74                                                   
"PKG",53,22,1,"PAH",1,1,34,0)
. I $P(LA7PRDID,LA7CS,LA7I+2)="99VA4" S 
"PKG",53,22,1,"PAH",1,1,35,0)
LA74=$$LKUP^XUAF4($P(LA7PRDID,LA7CS,I))
"PKG",53,22,1,"PAH",1,1,36,0)
. I 'LA74 S LA74=$$LKUP^XUAF4($P(LA7PRDID,LA7CS,I+1))                  
"PKG",53,22,1,"PAH",1,1,37,0)
. I 'LA74 S LA74=$$FINDSITE^LA7VHLU2($P(LA7PRDID,LA7CS),1,1)           
"PKG",53,22,1,"PAH",1,1,38,0)
. I 'LA74 S LA74=$$FINDSITE^LA7VHLU2($P(LA7SFAC,LA7CS),1,1)
"PKG",53,22,1,"PAH",1,1,39,0)
 
"PKG",53,22,1,"PAH",1,1,40,0)
 
"PKG",53,22,1,"PAH",1,1,41,0)
**NEW CODE**
"PKG",53,22,1,"PAH",1,1,42,0)
F LA7I=1,4 D  Q:LA74
"PKG",53,22,1,"PAH",1,1,43,0)
. I $P(LA7PRDID,LA7CS,LA7I+2)="99VA4" S 
"PKG",53,22,1,"PAH",1,1,44,0)
LA74=$$LKUP^XUAF4($P(LA7PRDID,LA7CS,LA7I))
"PKG",53,22,1,"PAH",1,1,45,0)
. I 'LA74 S LA74=$$LKUP^XUAF4($P(LA7PRDID,LA7CS,LA7I+1))
"PKG",53,22,1,"PAH",1,1,46,0)
. I 'LA74 S LA74=$$FINDSITE^LA7VHLU2($P(LA7PRDID,LA7CS),1,1)
"PKG",53,22,1,"PAH",1,1,47,0)
. I 'LA74 S LA74=$$FINDSITE^LA7VHLU2($P(LA7SFAC,LA7CS),1,1)
"PKG",53,22,1,"PAH",1,1,48,0)
 
"PKG",53,22,1,"PAH",1,1,49,0)
 
"PKG",53,22,1,"PAH",1,1,50,0)
Associated Remedy:
"PKG",53,22,1,"PAH",1,1,51,0)
===============
"PKG",53,22,1,"PAH",1,1,52,0)
HD0000000099666
"PKG",53,22,1,"PAH",1,1,53,0)
HD0000000102341 (duplicate)
"PKG",53,22,1,"PAH",1,1,54,0)
 
"PKG",53,22,1,"PAH",1,1,55,0)
 
"PKG",53,22,1,"PAH",1,1,56,0)
Associated E3R:
"PKG",53,22,1,"PAH",1,1,57,0)
===============
"PKG",53,22,1,"PAH",1,1,58,0)
N/A
"PKG",53,22,1,"PAH",1,1,59,0)
 
"PKG",53,22,1,"PAH",1,1,60,0)
 
"PKG",53,22,1,"PAH",1,1,61,0)
Test Sites
"PKG",53,22,1,"PAH",1,1,62,0)
==========
"PKG",53,22,1,"PAH",1,1,63,0)
Fayetteville, NC  (565) (medium)
"PKG",53,22,1,"PAH",1,1,64,0)
Hines (578) (large)
"PKG",53,22,1,"PAH",1,1,65,0)
North Chicago (556) (medium)
"PKG",53,22,1,"PAH",1,1,66,0)
Northern Indiana HCS (610) (medium) (integrated) 
"PKG",53,22,1,"PAH",1,1,67,0)
 
"PKG",53,22,1,"PAH",1,1,68,0)
 
"PKG",53,22,1,"PAH",1,1,69,0)
ROUTINE SUMMARY
"PKG",53,22,1,"PAH",1,1,70,0)
===============
"PKG",53,22,1,"PAH",1,1,71,0)
  The following routines are included in this patch.  The second line
"PKG",53,22,1,"PAH",1,1,72,0)
  of each of these routines now looks like:
"PKG",53,22,1,"PAH",1,1,73,0)
  <tab> ;;5.2;AUTOMATED LAB INSTRUMENTS;<patchlist>;Sep 27, 1994
"PKG",53,22,1,"PAH",1,1,74,0)
 
"PKG",53,22,1,"PAH",1,1,75,0)
                  Checksum       Checksum
"PKG",53,22,1,"PAH",1,1,76,0)
 Routine Name     Before Patch   After Patch    Patch List
"PKG",53,22,1,"PAH",1,1,77,0)
     LA7VIN5A     9628469        9655113        46,64,67,72
"PKG",53,22,1,"PAH",1,1,78,0)
     LA72         N/A            4388949        72 (D)
"PKG",53,22,1,"PAH",1,1,79,0)
 
"PKG",53,22,1,"PAH",1,1,80,0)
     (D) -- Routine deleted by KIDS after installation
"PKG",53,22,1,"PAH",1,1,81,0)
     List of preceding patches: 67
"PKG",53,22,1,"PAH",1,1,82,0)
     Sites should use CHECK^XTSUMBLD to verify checksums.
"PKG",53,22,1,"PAH",1,1,83,0)
 
"PKG",53,22,1,"PAH",1,1,84,0)
 
"PKG",53,22,1,"PAH",1,1,85,0)
INSTALLATION INSTRUCTIONS
"PKG",53,22,1,"PAH",1,1,86,0)
=========================
"PKG",53,22,1,"PAH",1,1,87,0)
 
"PKG",53,22,1,"PAH",1,1,88,0)
  The install time for this patch is less than 2 minutes.  This patch
"PKG",53,22,1,"PAH",1,1,89,0)
  should be installed when Laboratory users are off the system.
"PKG",53,22,1,"PAH",1,1,90,0)
 
"PKG",53,22,1,"PAH",1,1,91,0)
  Suggested time to install: non-peak requirement hours.
"PKG",53,22,1,"PAH",1,1,92,0)
  The installation should NOT be queued.
"PKG",53,22,1,"PAH",1,1,93,0)
 
"PKG",53,22,1,"PAH",1,1,94,0)
  NOTE: Kernel patches must be current on the target system to avoid
"PKG",53,22,1,"PAH",1,1,95,0)
        problems loading and/or installing this patch.
"PKG",53,22,1,"PAH",1,1,96,0)
 
"PKG",53,22,1,"PAH",1,1,97,0)
      Patch installation needs to be coordinated with the Laboratory
"PKG",53,22,1,"PAH",1,1,98,0)
      Information Manager (LIM/ADPAC).
"PKG",53,22,1,"PAH",1,1,99,0)
 
"PKG",53,22,1,"PAH",1,1,100,0)
  1.  Use the 'INSTALL/CHECK MESSAGE' option of the PackMan menu.  This
"PKG",53,22,1,"PAH",1,1,101,0)
      option will load the KIDS patch onto your system.
"PKG",53,22,1,"PAH",1,1,102,0)
 
"PKG",53,22,1,"PAH",1,1,103,0)
  2.  On the 'Kernel Installation & Distribution System' Menu (KIDS),
"PKG",53,22,1,"PAH",1,1,104,0)
      select the 'Installation' menu.
"PKG",53,22,1,"PAH",1,1,105,0)
 
"PKG",53,22,1,"PAH",1,1,106,0)
  3.  Use the 'Verify Checksum in Transport Global' option and verify
"PKG",53,22,1,"PAH",1,1,107,0)
      that all routines have the correct checksums.
"PKG",53,22,1,"PAH",1,1,108,0)
 
"PKG",53,22,1,"PAH",1,1,109,0)
  4.  On the KIDS menu, under the 'Installation' menu, use the following
"PKG",53,22,1,"PAH",1,1,110,0)
      options:
"PKG",53,22,1,"PAH",1,1,111,0)
        Print Transport Global
"PKG",53,22,1,"PAH",1,1,112,0)
        Compare Transport Global to Current System
"PKG",53,22,1,"PAH",1,1,113,0)
        Backup a Transport Global
"PKG",53,22,1,"PAH",1,1,114,0)
 
"PKG",53,22,1,"PAH",1,1,115,0)
  5.  Use the 'Install Package(s)' option under the 'Installation' menu
"PKG",53,22,1,"PAH",1,1,116,0)
      and select the package 'LA*5.2*72'
"PKG",53,22,1,"PAH",1,1,117,0)
 
"PKG",53,22,1,"PAH",1,1,118,0)
      When prompted
"PKG",53,22,1,"PAH",1,1,119,0)
        'Want KIDS to Rebuild Menu Trees Upon Completion of Install?' 
"PKG",53,22,1,"PAH",1,1,120,0)
      choose 'NO'.  Note: Responding "Yes" to the prompt for rebuilding
"PKG",53,22,1,"PAH",1,1,121,0)
      menu trees can significantly increase install time.
"PKG",53,22,1,"PAH",1,1,122,0)
 
"PKG",53,22,1,"PAH",1,1,123,0)
      When prompted 
"PKG",53,22,1,"PAH",1,1,124,0)
         'Want KIDS to INHIBIT LOGONs during the install? 
"PKG",53,22,1,"PAH",1,1,125,0)
      choose 'NO'.
"PKG",53,22,1,"PAH",1,1,126,0)
 
"PKG",53,22,1,"PAH",1,1,127,0)
      When prompted 
"PKG",53,22,1,"PAH",1,1,128,0)
          'Want to DISABLE Scheduled Options, Menu Options, and
"PKG",53,22,1,"PAH",1,1,129,0)
           Protocols?  YES//'
"PKG",53,22,1,"PAH",1,1,130,0)
      choose 'NO' unless site has additional local laboratory  
"PKG",53,22,1,"PAH",1,1,131,0)
      options that should be disabled during install.
"PKG",53,22,1,"PAH",1,1,132,0)
 
"PKG",53,22,1,"PAH",1,1,133,0)
 
"PKG",53,22,1,"PAH",1,1,134,0)
 
"PKG",53,22,1,"PAH",1,1,135,0)
INSTALLATION EXAMPLE
"PKG",53,22,1,"PAH",1,1,136,0)
====================
"PKG",53,22,1,"PAH",1,1,137,0)
 
"PKG",53,22,1,"PAH",1,1,138,0)
Select KIDS OPTION: INSTALL PACKAGE(S)  
"PKG",53,22,1,"PAH",1,1,139,0)
Select INSTALL NAME: LA*5.2*72       Loaded from Distribution  
"PKG",53,22,1,"PAH",1,1,140,0)
7/12/05@14:19:30
"PKG",53,22,1,"PAH",1,1,141,0)
     => LA*5.2*72 v1
"PKG",53,22,1,"PAH",1,1,142,0)
 
"PKG",53,22,1,"PAH",1,1,143,0)
This Distribution was loaded on Jul 12, 2005@14:19:30 with header of 
"PKG",53,22,1,"PAH",1,1,144,0)
   LA*5.2*72 v1
"PKG",53,22,1,"PAH",1,1,145,0)
   It consisted of the following Install(s):
"PKG",53,22,1,"PAH",1,1,146,0)
      LA*5.2*72
"PKG",53,22,1,"PAH",1,1,147,0)
Checking Install for Package LA*5.2*72
"PKG",53,22,1,"PAH",1,1,148,0)
Will first run the Environment Check Routine, LA72
"PKG",53,22,1,"PAH",1,1,149,0)
 
"PKG",53,22,1,"PAH",1,1,150,0)
 
"PKG",53,22,1,"PAH",1,1,151,0)
                        --- Environment Check is Ok --- 
"PKG",53,22,1,"PAH",1,1,152,0)
 
"PKG",53,22,1,"PAH",1,1,153,0)
Install Questions for LA*5.2*72
"PKG",53,22,1,"PAH",1,1,154,0)
 
"PKG",53,22,1,"PAH",1,1,155,0)
Want KIDS to INHIBIT LOGONs during the install? YES// NO
"PKG",53,22,1,"PAH",1,1,156,0)
Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
"PKG",53,22,1,"PAH",1,1,157,0)
 
"PKG",53,22,1,"PAH",1,1,158,0)
 
"PKG",53,22,1,"PAH",1,1,159,0)
 Install Started for LA*5.2*72 : 
"PKG",53,22,1,"PAH",1,1,160,0)
               Jul 12, 2005@14:20
"PKG",53,22,1,"PAH",1,1,161,0)
 
"PKG",53,22,1,"PAH",1,1,162,0)
Build Distribution Date: Jul 11, 2005
"PKG",53,22,1,"PAH",1,1,163,0)
 
"PKG",53,22,1,"PAH",1,1,164,0)
 Installing Routines:
"PKG",53,22,1,"PAH",1,1,165,0)
               Jul 12, 2005@14:20
"PKG",53,22,1,"PAH",1,1,166,0)
 
"PKG",53,22,1,"PAH",1,1,167,0)
 Running Pre-Install Routine: PRE^LA72
"PKG",53,22,1,"PAH",1,1,168,0)
 
"PKG",53,22,1,"PAH",1,1,169,0)
               Sending install started alert to mail group G.LMI 
"PKG",53,22,1,"PAH",1,1,170,0)
 
"PKG",53,22,1,"PAH",1,1,171,0)
                          *** Pre install started *** 
"PKG",53,22,1,"PAH",1,1,172,0)
 
"PKG",53,22,1,"PAH",1,1,173,0)
                  --- No actions required for pre install --- 
"PKG",53,22,1,"PAH",1,1,174,0)
 
"PKG",53,22,1,"PAH",1,1,175,0)
                                   LA*5.2*72  
"PKG",53,22,1,"PAH",1,1,176,0)
-------------------------------------------------------------------------
"PKG",53,22,1,"PAH",1,1,177,0)
                         *** Pre install completed *** 
"PKG",53,22,1,"PAH",1,1,178,0)
 
"PKG",53,22,1,"PAH",1,1,179,0)
 Running Post-Install Routine: POST^LA72
"PKG",53,22,1,"PAH",1,1,180,0)
 
"PKG",53,22,1,"PAH",1,1,181,0)
                          *** Post install started *** 
"PKG",53,22,1,"PAH",1,1,182,0)
 
"PKG",53,22,1,"PAH",1,1,183,0)
                         *** Post install completed *** 
"PKG",53,22,1,"PAH",1,1,184,0)
 
"PKG",53,22,1,"PAH",1,1,185,0)
              Sending install completion alert to mail group G.LMI 
"PKG",53,22,1,"PAH",1,1,186,0)
 
"PKG",53,22,1,"PAH",1,1,187,0)
 Updating Routine file...
"PKG",53,22,1,"PAH",1,1,188,0)
 
"PKG",53,22,1,"PAH",1,1,189,0)
 Updating KIDS files...
"PKG",53,22,1,"PAH",1,1,190,0)
 
"PKG",53,22,1,"PAH",1,1,191,0)
 LA*5.2*72 Installed. 
"PKG",53,22,1,"PAH",1,1,192,0)
               Jul 12, 2005@14:20
"PKG",53,22,1,"PAH",1,1,193,0)
 
"PKG",53,22,1,"PAH",1,1,194,0)
 Install Message sent #80481
"PKG",53,22,1,"PAH",1,1,195,0)
-------------------------------------------------------------------------
"PKG",53,22,1,"PAH",1,1,196,0)
          +------------------------------------------------------------+
"PKG",53,22,1,"PAH",1,1,197,0)
  100%    I             25             50             75               I
"PKG",53,22,1,"PAH",1,1,198,0)
Complete  +------------------------------------------------------------+
"PKG",53,22,1,"PAH",1,1,199,0)
 
"PKG",53,22,1,"PAH",1,1,200,0)
 
"PKG",53,22,1,"PAH",1,1,201,0)
Install Completed
"PRE")
LA72
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","LA72")
0^^B9127164
"RTN","LA72",1,0)
LA72 ;DALOI/JMC - LA*5.2*72 PATCH ENVIRONMENT CHECK ROUTINE ; 8/30/05 12:01pm
"RTN","LA72",2,0)
 ;;5.2;AUTOMATED LAB INSTRUMENTS;**72**;Sep 27, 1994
"RTN","LA72",3,0)
EN ;
"RTN","LA72",4,0)
 ; Does not prevent loading of the transport global.
"RTN","LA72",5,0)
 ; Environment check is done only during the install.
"RTN","LA72",6,0)
 ;
"RTN","LA72",7,0)
 N XQA,XQAMSG
"RTN","LA72",8,0)
 ;
"RTN","LA72",9,0)
 I '$G(XPDENV) D  Q
"RTN","LA72",10,0)
 . S XQAMSG="Transport global for patch "_$G(XPDNM,"Unknown patch")_" loaded on "_$$HTE^XLFDT($H)
"RTN","LA72",11,0)
 . S XQA("G.LMI")=""
"RTN","LA72",12,0)
 . D SETUP^XQALERT
"RTN","LA72",13,0)
 . D BMES^XPDUTL($$CJ^XLFSTR("Sending transport global loaded alert to mail group G.LMI",80))
"RTN","LA72",14,0)
 ;
"RTN","LA72",15,0)
 S XQAMSG="Installation of patch "_$G(XPDNM,"Unknown patch")_" started on "_$$HTE^XLFDT($H)
"RTN","LA72",16,0)
 S XQA("G.LMI")=""
"RTN","LA72",17,0)
 D SETUP^XQALERT
"RTN","LA72",18,0)
 D CHECK
"RTN","LA72",19,0)
 D EXIT
"RTN","LA72",20,0)
 Q
"RTN","LA72",21,0)
 ;
"RTN","LA72",22,0)
CHECK ;
"RTN","LA72",23,0)
 ; Perform environment check
"RTN","LA72",24,0)
 ; Device Defined
"RTN","LA72",25,0)
 I $S('$G(IOM):1,'$G(IOSL):1,$G(U)'="^":1,1:0) D  Q
"RTN","LA72",26,0)
 . D BMES^XPDUTL($$CJ^XLFSTR("Terminal Device is not defined",80))
"RTN","LA72",27,0)
 . S XPDQUIT=2
"RTN","LA72",28,0)
 ; DUZ setup
"RTN","LA72",29,0)
 I $S('$G(DUZ):1,$D(DUZ)[0:1,$D(DUZ(0))[0:1,1:0) D  Q
"RTN","LA72",30,0)
 . D BMES^XPDUTL($$CJ^XLFSTR("Please log in to set local DUZ... variables",80))
"RTN","LA72",31,0)
 . S XPDQUIT=2
"RTN","LA72",32,0)
 ; Active User
"RTN","LA72",33,0)
 I $P($$ACTIVE^XUSER(DUZ),"^")'=1 D  Q
"RTN","LA72",34,0)
 . D BMES^XPDUTL($$CJ^XLFSTR("You are not a valid user on this system",80))
"RTN","LA72",35,0)
 . S XPDQUIT=2
"RTN","LA72",36,0)
 S XPDIQ("XPZ1","B")="NO"
"RTN","LA72",37,0)
 Q
"RTN","LA72",38,0)
 ;
"RTN","LA72",39,0)
EXIT ;
"RTN","LA72",40,0)
 ;
"RTN","LA72",41,0)
 I $G(XPDQUIT) D BMES^XPDUTL($$CJ^XLFSTR("--- Install Environment Check FAILED ---",80))
"RTN","LA72",42,0)
 I '$G(XPDQUIT) D BMES^XPDUTL($$CJ^XLFSTR("--- Environment Check is Ok ---",80))
"RTN","LA72",43,0)
 Q
"RTN","LA72",44,0)
 ;
"RTN","LA72",45,0)
PRE ;
"RTN","LA72",46,0)
 ;; KIDS Pre Install
"RTN","LA72",47,0)
 N DA,DIK
"RTN","LA72",48,0)
 D BMES^XPDUTL($$CJ^XLFSTR("Sending install started alert to mail group G.LMI",80))
"RTN","LA72",49,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Pre install started ***",80))
"RTN","LA72",50,0)
 D BMES^XPDUTL($$CJ^XLFSTR("--- No actions required for pre install ---",80))
"RTN","LA72",51,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Pre install completed ***",80))
"RTN","LA72",52,0)
 Q
"RTN","LA72",53,0)
 ;
"RTN","LA72",54,0)
POST ;
"RTN","LA72",55,0)
 ;; KIDS Post Install
"RTN","LA72",56,0)
 N DA,DIK,FDA,LA7X,LA7ERR,XQA,XQAMSG
"RTN","LA72",57,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Post install started ***",80))
"RTN","LA72",58,0)
 D BMES^XPDUTL($$CJ^XLFSTR("*** Post install completed ***",80))
"RTN","LA72",59,0)
 D BMES^XPDUTL($$CJ^XLFSTR("Sending install completion alert to mail group G.LMI",80))
"RTN","LA72",60,0)
 ; Send alert
"RTN","LA72",61,0)
 S XQAMSG="Installation of patch "_$G(XPDNM,"Unknown patch")_" completed on "_$$HTE^XLFDT($H)
"RTN","LA72",62,0)
 S XQA("G.LMI")=""
"RTN","LA72",63,0)
 D SETUP^XQALERT
"RTN","LA72",64,0)
 Q
"RTN","LA7VIN5A")
0^1^B66941793^B66867521
"RTN","LA7VIN5A",1,0)
LA7VIN5A ;DALOI/JMC - Process Incoming UI Msgs, continued ; Jan 12, 2004
"RTN","LA7VIN5A",2,0)
 ;;5.2;AUTOMATED LAB INSTRUMENTS;**46,64,67,72**;Sep 27, 1994
"RTN","LA7VIN5A",3,0)
 ; This routine is a continuation of LA7VIN5.
"RTN","LA7VIN5A",4,0)
 ; It is performs processing of fields in OBX segments.
"RTN","LA7VIN5A",5,0)
 Q
"RTN","LA7VIN5A",6,0)
 ;
"RTN","LA7VIN5A",7,0)
XFORM ; Transform the result based on fields 12,13,14,16,17 in the Chem Test
"RTN","LA7VIN5A",8,0)
 ; multiple in the Auto Instrument file (62.4), or set on the fly
"RTN","LA7VIN5A",9,0)
 ; from PARAM 1
"RTN","LA7VIN5A",10,0)
 N LA7I
"RTN","LA7VIN5A",11,0)
 S LA7XFORM=LA76241(2)
"RTN","LA7VIN5A",12,0)
 ;
"RTN","LA7VIN5A",13,0)
 ; get PARAM 1 overides
"RTN","LA7VIN5A",14,0)
 I $D(LA7XFORM(1)),LA7XFORM(1)?1.N S $P(LA7XFORM,"^")=LA7XFORM(1)
"RTN","LA7VIN5A",15,0)
 F LA7I=2,3,5,6 I $D(LA7XFORM(LA7I)) S $P(LA7XFORM,"^",LA7I)=LA7XFORM(LA7I)
"RTN","LA7VIN5A",16,0)
 ; set up defaults if field was not answered
"RTN","LA7VIN5A",17,0)
 ; accept results,yes
"RTN","LA7VIN5A",18,0)
 I $P(LA7XFORM,"^",3)="" S $P(LA7XFORM,"^",3)=1
"RTN","LA7VIN5A",19,0)
 ; strip spaces,no
"RTN","LA7VIN5A",20,0)
 I $P(LA7XFORM,"^",6)="" S $P(LA7XFORM,"^",6)=0
"RTN","LA7VIN5A",21,0)
 ; now transform
"RTN","LA7VIN5A",22,0)
 ;
"RTN","LA7VIN5A",23,0)
 ; Don't accept results
"RTN","LA7VIN5A",24,0)
 I '$P(LA7XFORM,"^",3) S LA7VAL="" Q
"RTN","LA7VIN5A",25,0)
 ;
"RTN","LA7VIN5A",26,0)
 ; Only accept "FINAL" type results
"RTN","LA7VIN5A",27,0)
 I $P(LA7XFORM,"^",3)=2,"CFUX"'[LA7ORS S LA7VAL="" Q
"RTN","LA7VIN5A",28,0)
 ;
"RTN","LA7VIN5A",29,0)
 ; Accept ordered tests only
"RTN","LA7VIN5A",30,0)
 ; If LEDI interface (10) and message indicates a reflex ("G") or add-on
"RTN","LA7VIN5A",31,0)
 ; test ("A") then process anyway in case it has not been added to
"RTN","LA7VIN5A",32,0)
 ; accession.
"RTN","LA7VIN5A",33,0)
 I $P(LA7XFORM,"^",5) D
"RTN","LA7VIN5A",34,0)
 . I LA7INTYP=10,LA7SAC?1(1"A",1"G") Q
"RTN","LA7VIN5A",35,0)
 . S LA7LIMIT=1
"RTN","LA7VIN5A",36,0)
 ;
"RTN","LA7VIN5A",37,0)
 ; Decimal places if number of places defined
"RTN","LA7VIN5A",38,0)
 I $P(LA7XFORM,"^")?1.N D JUSTDEC
"RTN","LA7VIN5A",39,0)
 ;
"RTN","LA7VIN5A",40,0)
 ; Strip spaces
"RTN","LA7VIN5A",41,0)
 I $P(LA7XFORM,"^",6) S LA7VAL=$TR(LA7VAL," ","")
"RTN","LA7VIN5A",42,0)
 ;
"RTN","LA7VIN5A",43,0)
 ; Make result a comment
"RTN","LA7VIN5A",44,0)
 ; Set value to null after making into remark, don't store twice.
"RTN","LA7VIN5A",45,0)
 I $P(LA7XFORM,"^",2) D
"RTN","LA7VIN5A",46,0)
 . N LA7Y
"RTN","LA7VIN5A",47,0)
 . ; Store comment in ^LAH global
"RTN","LA7VIN5A",48,0)
 . S LA7Y=$P(LA7RMK(0,+LA76241(0)),"^",2)
"RTN","LA7VIN5A",49,0)
 . D RMKSET^LASET(LA7LWL,LA7ISQN,LA7VAL,LA7Y)
"RTN","LA7VIN5A",50,0)
 . S LA7VAL=""
"RTN","LA7VIN5A",51,0)
 Q
"RTN","LA7VIN5A",52,0)
 ;
"RTN","LA7VIN5A",53,0)
 ;
"RTN","LA7VIN5A",54,0)
CHKDIE ; Check if value to be stored passes input transform of field in DD
"RTN","LA7VIN5A",55,0)
 N LA7ERR,LA7Y
"RTN","LA7VIN5A",56,0)
 ;
"RTN","LA7VIN5A",57,0)
 ; If result is on a LEDI interface (type=10) then don't check result
"RTN","LA7VIN5A",58,0)
 ; against FileMan input tranform.
"RTN","LA7VIN5A",59,0)
 ; VistA sends "canc" as test result when test is cancelled.
"RTN","LA7VIN5A",60,0)
 ; DoD sends "PL Canceled" --> change to "canc" for VistA storage.
"RTN","LA7VIN5A",61,0)
 I LA7INTYP=10 D  Q
"RTN","LA7VIN5A",62,0)
 . I LA7VAL="PL Cancelled" S LA7VAL="canc"
"RTN","LA7VIN5A",63,0)
 . I LA7VAL="PL Canceled" S LA7VAL="canc"
"RTN","LA7VIN5A",64,0)
 . I LA7VAL="PLCanceled" S LA7VAL="canc"
"RTN","LA7VIN5A",65,0)
 ;
"RTN","LA7VIN5A",66,0)
 ; If value fails data checker then log error and suppress result.
"RTN","LA7VIN5A",67,0)
 D CHK^DIE(LA7SUBFL,LA76304,"H",LA7VAL,.LA7Y,"LA7ERR")
"RTN","LA7VIN5A",68,0)
 I LA7Y="^" D
"RTN","LA7VIN5A",69,0)
 . N LA7X
"RTN","LA7VIN5A",70,0)
 . S LA7X=$G(LA7ERR("DIERR",1,"TEXT",1))
"RTN","LA7VIN5A",71,0)
 . D CREATE^LA7LOG(37)
"RTN","LA7VIN5A",72,0)
 . S LA7VAL=""
"RTN","LA7VIN5A",73,0)
 Q
"RTN","LA7VIN5A",74,0)
 ;
"RTN","LA7VIN5A",75,0)
 ;
"RTN","LA7VIN5A",76,0)
JUSTDEC ; Justify to number of places specified
"RTN","LA7VIN5A",77,0)
 ;
"RTN","LA7VIN5A",78,0)
 N LA7DDTYP,LA7FMT,LA7I,LA7PRFIX,LA7X
"RTN","LA7VIN5A",79,0)
 ;
"RTN","LA7VIN5A",80,0)
 ; If LEDI interface (type=10) then skip decimal adjustment
"RTN","LA7VIN5A",81,0)
 I LA7INTYP=10 Q
"RTN","LA7VIN5A",82,0)
 ;
"RTN","LA7VIN5A",83,0)
 ; Get data name field type from DD
"RTN","LA7VIN5A",84,0)
 ; Only justify if Vista field is numeric or free text.
"RTN","LA7VIN5A",85,0)
 S LA7DDTYP=$$GET1^DID(LA7SUBFL,LA76304,"","TYPE")
"RTN","LA7VIN5A",86,0)
 I "NUMERIC^FREE TEXT"'[LA7DDTYP D  Q
"RTN","LA7VIN5A",87,0)
 . N LA7FLDNM
"RTN","LA7VIN5A",88,0)
 . S LA7FLDNM=$$GET1^DID(63.04,LA76304,"","LABEL")
"RTN","LA7VIN5A",89,0)
 . D CREATE^LA7LOG(38)
"RTN","LA7VIN5A",90,0)
 ;
"RTN","LA7VIN5A",91,0)
 S LA7X=LA7VAL,(LA7FMT,LA7PRFIX)=""
"RTN","LA7VIN5A",92,0)
 ;
"RTN","LA7VIN5A",93,0)
 ; If comma formatted, strip comma and set flag to add back in.
"RTN","LA7VIN5A",94,0)
 S LA7X=$TR(LA7X,",","")
"RTN","LA7VIN5A",95,0)
 I LA7X'=LA7VAL S LA7FMT="P"
"RTN","LA7VIN5A",96,0)
 ;
"RTN","LA7VIN5A",97,0)
 ; If "<>=" formatted, strip and save to add back in.
"RTN","LA7VIN5A",98,0)
 F LA7I=1:1:$L(LA7X) Q:$E(LA7X,LA7I)'?1(1"<",1">",1"=")
"RTN","LA7VIN5A",99,0)
 I LA7I>1 D
"RTN","LA7VIN5A",100,0)
 . S LA7PRFIX=$E(LA7X,1,LA7I-1)
"RTN","LA7VIN5A",101,0)
 . S LA7X=$E(LA7X,LA7I,$L(LA7X))
"RTN","LA7VIN5A",102,0)
 ;
"RTN","LA7VIN5A",103,0)
 ; Format if starts with number or decimal point, skip other results.
"RTN","LA7VIN5A",104,0)
 I LA7X?1(1.N,.N1"."1.N) D
"RTN","LA7VIN5A",105,0)
 . S LA7X=$FN(LA7X,LA7FMT,+LA7XFORM)
"RTN","LA7VIN5A",106,0)
 . S LA7VAL=LA7PRFIX_LA7X
"RTN","LA7VIN5A",107,0)
 Q
"RTN","LA7VIN5A",108,0)
 ;
"RTN","LA7VIN5A",109,0)
 ;
"RTN","LA7VIN5A",110,0)
PRDID(LA7PRDID,LA7SFAC,LA7CS) ; Process/Store Producer's ID
"RTN","LA7VIN5A",111,0)
 ; Store where test was performed.
"RTN","LA7VIN5A",112,0)
 ; Call with LA7PRDID = Producer's ID field
"RTN","LA7VIN5A",113,0)
 ;            LA7SFAC = sending facility
"RTN","LA7VIN5A",114,0)
 ;              LA7CS = component encoding character
"RTN","LA7VIN5A",115,0)
 ;
"RTN","LA7VIN5A",116,0)
 N LA74,LA7I,LA7X,LA7Y
"RTN","LA7VIN5A",117,0)
 ;
"RTN","LA7VIN5A",118,0)
 S LA7X=$P(LA7PRDID,LA7CS,2),LA74=""
"RTN","LA7VIN5A",119,0)
 ;
"RTN","LA7VIN5A",120,0)
 F LA7I=1,4 D  Q:LA74
"RTN","LA7VIN5A",121,0)
 . I $P(LA7PRDID,LA7CS,LA7I+2)="99VA4" S LA74=$$LKUP^XUAF4($P(LA7PRDID,LA7CS,LA7I))
"RTN","LA7VIN5A",122,0)
 . I 'LA74 S LA74=$$LKUP^XUAF4($P(LA7PRDID,LA7CS,LA7I+1))
"RTN","LA7VIN5A",123,0)
 . I 'LA74 S LA74=$$FINDSITE^LA7VHLU2($P(LA7PRDID,LA7CS),1,1)
"RTN","LA7VIN5A",124,0)
 . I 'LA74 S LA74=$$FINDSITE^LA7VHLU2($P(LA7SFAC,LA7CS),1,1)
"RTN","LA7VIN5A",125,0)
 ;
"RTN","LA7VIN5A",126,0)
 ; Store producer's id in LAH global with results.
"RTN","LA7VIN5A",127,0)
 I LA74 S $P(^LAH(LA7LWL,1,LA7ISQN,LA76304),"^",9)=LA74 Q
"RTN","LA7VIN5A",128,0)
 ;
"RTN","LA7VIN5A",129,0)
 ; Don't store producer's id as comment.
"RTN","LA7VIN5A",130,0)
 I '$P(LA76241(2),"^",9) Q
"RTN","LA7VIN5A",131,0)
 ; If unable to identify producer in file #4
"RTN","LA7VIN5A",132,0)
 ;  then store as comment if field STORE PRODUCER'S ID (#20) enabled.
"RTN","LA7VIN5A",133,0)
 I LA7X="" Q
"RTN","LA7VIN5A",134,0)
 S LA7Y=$P(LA7RMK(0,+LA76241(0)),"^",2)
"RTN","LA7VIN5A",135,0)
 S LA7X=$S(LA7Y="":"P",1:"p")_"erformed by "_LA7X
"RTN","LA7VIN5A",136,0)
 D RMKSET^LASET(LA7LWL,LA7ISQN,LA7X,LA7Y)
"RTN","LA7VIN5A",137,0)
 ;
"RTN","LA7VIN5A",138,0)
 Q
"RTN","LA7VIN5A",139,0)
 ;
"RTN","LA7VIN5A",140,0)
 ;
"RTN","LA7VIN5A",141,0)
REFRNG(LA7X) ; Process/Store References Range.
"RTN","LA7VIN5A",142,0)
 ; Call with LA7X = reference range to store.
"RTN","LA7VIN5A",143,0)
 ;
"RTN","LA7VIN5A",144,0)
 N LA7Y,X,Y
"RTN","LA7VIN5A",145,0)
 ;
"RTN","LA7VIN5A",146,0)
 ; Check if site does not want to store reference ranges on POC test.
"RTN","LA7VIN5A",147,0)
 I LA7INTYP>19,LA7INTYP<30,+$P(LA76241(2),"^",10)=0 Q
"RTN","LA7VIN5A",148,0)
 ;
"RTN","LA7VIN5A",149,0)
 ; Remove leading and trailing quotes from reference range.
"RTN","LA7VIN5A",150,0)
 S LA7X=$$TRIM^XLFSTR($G(LA7X),"RL","""")
"RTN","LA7VIN5A",151,0)
 I LA7X="" Q
"RTN","LA7VIN5A",152,0)
 ;
"RTN","LA7VIN5A",153,0)
 S X=$P($G(^LAH(LA7LWL,1,LA7ISQN,LA76304)),"^",5)
"RTN","LA7VIN5A",154,0)
 ;
"RTN","LA7VIN5A",155,0)
 ; >lower limit (no upper limit e.g. >10) - store as low value
"RTN","LA7VIN5A",156,0)
 I LA7X?1">".N.1".".N S $P(X,"!",2)=$TR(LA7X,">",""),LA7X=""
"RTN","LA7VIN5A",157,0)
 ;
"RTN","LA7VIN5A",158,0)
 ; <upper limit (no lower limit e.g. <15) - store as high value
"RTN","LA7VIN5A",159,0)
 I LA7X?1"<".N.1".".N S $P(X,"!",3)=$TR(LA7X,"<",""),LA7X=""
"RTN","LA7VIN5A",160,0)
 ;
"RTN","LA7VIN5A",161,0)
 ; Alphabetic reference with hyphen
"RTN","LA7VIN5A",162,0)
 I LA7X?1.A1"-"1.A S $P(X,"!",2)=$C(34)_LA7X_$C(34),LA7X=""
"RTN","LA7VIN5A",163,0)
 ;
"RTN","LA7VIN5A",164,0)
 ; Lower limit value
"RTN","LA7VIN5A",165,0)
 S Y=$P(LA7X,"-")
"RTN","LA7VIN5A",166,0)
 I Y'="" D
"RTN","LA7VIN5A",167,0)
 . I Y?.N.1".".N S $P(X,"!",2)=Y
"RTN","LA7VIN5A",168,0)
 . E  S $P(X,"!",2)=$C(34)_$$UNESC^LA7VHLU3(Y,LA7FS_LA7ECH)_$C(34)
"RTN","LA7VIN5A",169,0)
 ;
"RTN","LA7VIN5A",170,0)
 ; Upper limit value
"RTN","LA7VIN5A",171,0)
 S Y=$P(LA7X,"-",2)
"RTN","LA7VIN5A",172,0)
 I Y'="" D
"RTN","LA7VIN5A",173,0)
 . I Y?.N.1".".N S $P(X,"!",3)=Y
"RTN","LA7VIN5A",174,0)
 . E  S $P(X,"!",3)=$C(34)_$$UNESC^LA7VHLU3(Y,LA7FS_LA7ECH)_$C(34)
"RTN","LA7VIN5A",175,0)
 ;
"RTN","LA7VIN5A",176,0)
 ; Store reference range in LAH global with results.
"RTN","LA7VIN5A",177,0)
 S $P(^LAH(LA7LWL,1,LA7ISQN,LA76304),"^",5)=X
"RTN","LA7VIN5A",178,0)
 ;
"RTN","LA7VIN5A",179,0)
 Q
"RTN","LA7VIN5A",180,0)
 ;
"RTN","LA7VIN5A",181,0)
 ;
"RTN","LA7VIN5A",182,0)
ABFLAG(LA7X) ; Process/Store Abnormal Flags.
"RTN","LA7VIN5A",183,0)
 ; Call with LA7X = abnormal flags to store.
"RTN","LA7VIN5A",184,0)
 ; Converts flag to interpretation based on HL7 Table 0078.
"RTN","LA7VIN5A",185,0)
 ; If no match store code instead of interpretation
"RTN","LA7VIN5A",186,0)
 ;
"RTN","LA7VIN5A",187,0)
 N I,LA7I,LA7Y,X
"RTN","LA7VIN5A",188,0)
 ;
"RTN","LA7VIN5A",189,0)
 ; Store abnormal flags in LAH global with results.
"RTN","LA7VIN5A",190,0)
 ; Currently only storing high/low and critical flags
"RTN","LA7VIN5A",191,0)
 S LA7Y=$S(LA7X="L":"L",LA7X="H":"H",LA7X="LL":"L*",LA7X="HH":"H*",1:"")
"RTN","LA7VIN5A",192,0)
 S $P(^LAH(LA7LWL,1,LA7ISQN,LA76304),"^",2)=LA7Y
"RTN","LA7VIN5A",193,0)
 ;
"RTN","LA7VIN5A",194,0)
 ; Critical or designated abnormal tests generate bulletin/alert
"RTN","LA7VIN5A",195,0)
 ; on LEDI (type=10) interfaces.
"RTN","LA7VIN5A",196,0)
 I LA7INTYP=10,LA7Y'="" D
"RTN","LA7VIN5A",197,0)
 . I $E(LA7Y,2)'="*",'$P(LA76241(2),"^",11) Q
"RTN","LA7VIN5A",198,0)
 . S LA7I=$O(^TMP("LA7 ABNORMAL RESULTS",$J,""),-1),LA7I=LA7I+1
"RTN","LA7VIN5A",199,0)
 . S X=LA7LWL_"^"_LA7ISQN_"^"_LA76304_"^"_LA76248_"^"_LA76249_"^"_LA7ORS_"^"_LA7TEST_"^"_$S(LA7TEST(0)'="":LA7TEST(0),1:LA7TEST(2,0))_"^"_$$P^LA7VHLU(.LA7SEG,9,LA7FS)
"RTN","LA7VIN5A",200,0)
 . S ^TMP("LA7 ABNORMAL RESULTS",$J,LA7I)=X
"RTN","LA7VIN5A",201,0)
 ;
"RTN","LA7VIN5A",202,0)
 ; If POC interface and abnormal flag is not handled by VistA above
"RTN","LA7VIN5A",203,0)
 ;  then store as comment.
"RTN","LA7VIN5A",204,0)
 I LA7INTYP>19,LA7INTYP<30,LA7Y="",LA7X'="" D
"RTN","LA7VIN5A",205,0)
 . S X=" L^ H^LL^HH^ <^ >^ N^ A^AA^ U^ D^ B^ W^ S^ R^ I^MS^VS"
"RTN","LA7VIN5A",206,0)
 . S I=$F(X,LA7X)\3
"RTN","LA7VIN5A",207,0)
 . S LA7Y="normalcy status - "_$P($T(ABFLAGS+I^LA7VHLU1),";;",2)
"RTN","LA7VIN5A",208,0)
 . D RMKSET^LASET(LA7LWL,LA7ISQN,LA7Y,$P(LA7RMK(0,+LA76241(0)),"^",2))
"RTN","LA7VIN5A",209,0)
 ;
"RTN","LA7VIN5A",210,0)
 Q
"RTN","LA7VIN5A",211,0)
 ;
"RTN","LA7VIN5A",212,0)
 ;
"RTN","LA7VIN5A",213,0)
EII ; Store equipment instance identifier in LAH global with results.
"RTN","LA7VIN5A",214,0)
 ;
"RTN","LA7VIN5A",215,0)
 N I,LA7X,X
"RTN","LA7VIN5A",216,0)
 ;
"RTN","LA7VIN5A",217,0)
 S LA7X=""
"RTN","LA7VIN5A",218,0)
 F I=1:1:4 D
"RTN","LA7VIN5A",219,0)
 . S X=$P(LA7EII,LA7CS,I)
"RTN","LA7VIN5A",220,0)
 . I X="" Q
"RTN","LA7VIN5A",221,0)
 . S $P(LA7X,"!",I)=$TR(X,"!","~")
"RTN","LA7VIN5A",222,0)
 I LA7X'="" S $P(^LAH(LA7LWL,1,LA7ISQN,LA76304),"^",11)=LA7X
"RTN","LA7VIN5A",223,0)
 Q
"RTN","LA7VIN5A",224,0)
 ;
"RTN","LA7VIN5A",225,0)
 ;
"RTN","LA7VIN5A",226,0)
ORESULTS ; Process results that accompany order (ORM) messages
"RTN","LA7VIN5A",227,0)
 ;
"RTN","LA7VIN5A",228,0)
 N I,LA764,LA7DIE,LA7ERR,LA7I,LA7WP,LA7X,LA7Y,X
"RTN","LA7VIN5A",229,0)
 S LA7WP(1,0)=" ",LA7I=2,X=""
"RTN","LA7VIN5A",230,0)
 I LA7RLNC S X="[LOINC "_$$GET1^DIQ(95.3,LA7RLNC_",",.01)_"] "_$$GET1^DIQ(95.3,LA7RLNC_",",80)
"RTN","LA7VIN5A",231,0)
 I 'LA7RLNC,LA7RNLT D
"RTN","LA7VIN5A",232,0)
 . S LA764=$$FIND1^DIC(64,"","X",LA7RNLT,"E","","LA7ERR")
"RTN","LA7VIN5A",233,0)
 . I 'LA764 S LA7RNLT="" Q
"RTN","LA7VIN5A",234,0)
 . S X="[NLT "_$$GET1^DIQ(64,LA764_",",1)_"] "_$$GET1^DIQ(64,LA764_",",.01,"I")
"RTN","LA7VIN5A",235,0)
 I 'LA7RLNC,'LA7RNLT D
"RTN","LA7VIN5A",236,0)
 . I LA7TEST(0)]""!(LA7TEST]"") S X="["_LA7TEST(0,1)_" "_LA7TEST_"] "_LA7TEST(0) Q
"RTN","LA7VIN5A",237,0)
 . S X="["_LA7TEST(2,1)_" "_LA7TEST(2)_"] "_LA7TEST(2,0)
"RTN","LA7VIN5A",238,0)
 S LA7WP(LA7I,0)="Test result: "_X
"RTN","LA7VIN5A",239,0)
 ; Date value
"RTN","LA7VIN5A",240,0)
 I LA7VTYP="DT" D
"RTN","LA7VIN5A",241,0)
 . S LA7X=$$P^LA7VHLU(.LA7SEG,6,LA7FS)
"RTN","LA7VIN5A",242,0)
 . S LA7X=$$HL7TFM^XLFDT(LA7X,"L")
"RTN","LA7VIN5A",243,0)
 . S LA7I=LA7I+1,LA7WP(LA7I,0)=" Test value: "_LA7X
"RTN","LA7VIN5A",244,0)
 ; Coded entry
"RTN","LA7VIN5A",245,0)
 I "CECM"[LA7VTYP D
"RTN","LA7VIN5A",246,0)
 . S LA7X=$P($$P^LA7VHLU(.LA7SEG,6,LA7FS),LA7CS,2)
"RTN","LA7VIN5A",247,0)
 . S LA7X=$$UNESC^LA7VHLU3(LA7X,LA7FS_LA7ECH)
"RTN","LA7VIN5A",248,0)
 . S LA7I=LA7I+1,LA7WP(LA7I,0)=" Test value: "_LA7X_$S(LA7UNITS]"":" "_LA7UNITS,1:"")
"RTN","LA7VIN5A",249,0)
 ; Numeric/ Structured Numeric value
"RTN","LA7VIN5A",250,0)
 I "NMSN"[LA7VTYP D
"RTN","LA7VIN5A",251,0)
 . S LA7X=$$P^LA7VHLU(.LA7SEG,6,LA7FS)
"RTN","LA7VIN5A",252,0)
 . S LA7X=$$UNESC^LA7VHLU3(LA7X,LA7FS_LA7ECH)
"RTN","LA7VIN5A",253,0)
 . S LA7I=LA7I+1,LA7WP(LA7I,0)=" Test value: "_LA7X_$S(LA7UNITS]"":" "_LA7UNITS,1:"")
"RTN","LA7VIN5A",254,0)
 ; String Data/ Formatted Text/ Text Data
"RTN","LA7VIN5A",255,0)
 I "FTSTX"[LA7VTYP D
"RTN","LA7VIN5A",256,0)
 . D PA^LA7VHLU(.LA7SEG,6,LA7FS,.LA7X)
"RTN","LA7VIN5A",257,0)
 . D UNESCFT^LA7VHLU3(.LA7X,LA7FS_LA7ECH,.LA7Y)
"RTN","LA7VIN5A",258,0)
 . I LA7Y=1,(($L(LA7Y(1,0))+$L(LA7UNITS))<225) S LA7I=LA7I+1,LA7WP(LA7I,0)=" Test value: "_LA7Y(1,0)_$S(LA7UNITS]"":" "_LA7UNITS,1:"") Q
"RTN","LA7VIN5A",259,0)
 . S LA7I=LA7I+1,LA7WP(LA7I,0)=" Test value:"
"RTN","LA7VIN5A",260,0)
 . F I=1:1:LA7Y S LA7I=LA7I+1,LA7WP(LA7I,0)=LA7Y(I,0)
"RTN","LA7VIN5A",261,0)
 . I LA7UNITS'="" S LA7I=LA7I+1,LA7WP(LA7I,0)=" Test units: "_LA7UNITS
"RTN","LA7VIN5A",262,0)
 ; Normals/ Reference range
"RTN","LA7VIN5A",263,0)
 S LA7X=$$P^LA7VHLU(.LA7SEG,8,LA7FS)
"RTN","LA7VIN5A",264,0)
 I LA7X'="" S LA7I=LA7I+1,LA7WP(LA7I,0)=" Test normals: "_LA7X
"RTN","LA7VIN5A",265,0)
 ; Normalcy status
"RTN","LA7VIN5A",266,0)
 S LA7X=$$P^LA7VHLU(.LA7SEG,9,LA7FS)
"RTN","LA7VIN5A",267,0)
 I LA7X'="" D
"RTN","LA7VIN5A",268,0)
 . S X=" L^ H^LL^HH^ <^ >^ N^ A^AA^ U^ D^ B^ W^ S^ R^ I^MS^VS"
"RTN","LA7VIN5A",269,0)
 . S I=$F(X,LA7X)\3,LA7X=$P($T(ABFLAGS+I^LA7VHLU1),";;",2)
"RTN","LA7VIN5A",270,0)
 . I LA7X'="" S LA7I=LA7I+1,LA7WP(LA7I,0)=" Test normalcy status: "_LA7X
"RTN","LA7VIN5A",271,0)
 I $D(LA7WP) D WP^DIE(69.6,LA7696_",",99,"A","LA7WP","LA7DIE(99)")
"RTN","LA7VIN5A",272,0)
 Q
"VER")
8.0^22.0
"BLD",5918,6)
^54
**END**
**END**

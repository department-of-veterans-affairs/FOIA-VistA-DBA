Released GMRC*3*38 SEQ #37
Extracted from mail message
**KIDS**:GMRC*3.0*38^

**INSTALL NAME**
GMRC*3.0*38
"BLD",5890,0)
GMRC*3.0*38^CONSULT/REQUEST TRACKING^0^3041209^y
"BLD",5890,1,0)
^^4^4^3041207^
"BLD",5890,1,1,0)
This patch corrects the inaccurate identification of the location of 
"BLD",5890,1,2,0)
comments when viewing an SF513 for an IFC.  It also corrects the situation
"BLD",5890,1,3,0)
where the extraneous text, "Clinical Procedure Report", is displayed
"BLD",5890,1,4,0)
inappropriately when performing a detailed display.
"BLD",5890,4,0)
^9.64PA^^0
"BLD",5890,4,123,2,123,1,.01,0)
FILE ENTRY DATE
"BLD",5890,4,"APDD",123,123,.01)

"BLD",5890,"KRN",0)
^9.67PA^8989.52^19
"BLD",5890,"KRN",.4,0)
.4
"BLD",5890,"KRN",.401,0)
.401
"BLD",5890,"KRN",.402,0)
.402
"BLD",5890,"KRN",.403,0)
.403
"BLD",5890,"KRN",.5,0)
.5
"BLD",5890,"KRN",.84,0)
.84
"BLD",5890,"KRN",3.6,0)
3.6
"BLD",5890,"KRN",3.8,0)
3.8
"BLD",5890,"KRN",9.2,0)
9.2
"BLD",5890,"KRN",9.8,0)
9.8
"BLD",5890,"KRN",9.8,"NM",0)
^9.68A^2^2
"BLD",5890,"KRN",9.8,"NM",1,0)
GMRCP5D^^0^B55767536
"BLD",5890,"KRN",9.8,"NM",2,0)
GMRCART^^0^B68961648
"BLD",5890,"KRN",9.8,"NM","B","GMRCART",2)

"BLD",5890,"KRN",9.8,"NM","B","GMRCP5D",1)

"BLD",5890,"KRN",19,0)
19
"BLD",5890,"KRN",19.1,0)
19.1
"BLD",5890,"KRN",101,0)
101
"BLD",5890,"KRN",409.61,0)
409.61
"BLD",5890,"KRN",771,0)
771
"BLD",5890,"KRN",870,0)
870
"BLD",5890,"KRN",8989.51,0)
8989.51
"BLD",5890,"KRN",8989.52,0)
8989.52
"BLD",5890,"KRN",8994,0)
8994
"BLD",5890,"KRN","B",.4,.4)

"BLD",5890,"KRN","B",.401,.401)

"BLD",5890,"KRN","B",.402,.402)

"BLD",5890,"KRN","B",.403,.403)

"BLD",5890,"KRN","B",.5,.5)

"BLD",5890,"KRN","B",.84,.84)

"BLD",5890,"KRN","B",3.6,3.6)

"BLD",5890,"KRN","B",3.8,3.8)

"BLD",5890,"KRN","B",9.2,9.2)

"BLD",5890,"KRN","B",9.8,9.8)

"BLD",5890,"KRN","B",19,19)

"BLD",5890,"KRN","B",19.1,19.1)

"BLD",5890,"KRN","B",101,101)

"BLD",5890,"KRN","B",409.61,409.61)

"BLD",5890,"KRN","B",771,771)

"BLD",5890,"KRN","B",870,870)

"BLD",5890,"KRN","B",8989.51,8989.51)

"BLD",5890,"KRN","B",8989.52,8989.52)

"BLD",5890,"KRN","B",8994,8994)

"BLD",5890,"QUES",0)
^9.62^^
"BLD",5890,"REQB",0)
^9.611^1^1
"BLD",5890,"REQB",1,0)
GMRC*3.0*35^1
"BLD",5890,"REQB","B","GMRC*3.0*35",1)

"FIA",123)
REQUEST/CONSULTATION
"FIA",123,0)
^GMR(123,
"FIA",123,0,0)
123DI
"FIA",123,0,1)
^^f
"FIA",123,0,10)

"FIA",123,0,11)

"FIA",123,0,"RLRO")

"FIA",123,0,"VR")
3.0^GMRC
"FIA",123,123)
0
"FIA",123,123.01)
0
"FIA",123,123.02)
0
"FIA",123,123.03)
0
"FIA",123,123.051)
0
"FIA",123,123.25)
0
"IX",123,123,"ACP",0)
123^ACP^Index on the PATIENT NAME and CLINICAL PROCEDURE fields^R^^R^IR^I^123^^^^^S
"IX",123,123,"ACP",.1,0)
^^1^1^3011008^
"IX",123,123,"ACP",.1,1,0)
This INDEX is used to list all Clinical Procedure requests for a patient.
"IX",123,123,"ACP",1)
S ^GMR(123,"ACP",X(1),X(2),DA)=""
"IX",123,123,"ACP",2)
K ^GMR(123,"ACP",X(1),X(2),DA)
"IX",123,123,"ACP",2.5)
K ^GMR(123,"ACP")
"IX",123,123,"ACP",11.1,0)
^.114IA^2^2
"IX",123,123,"ACP",11.1,1,0)
1^F^123^1.01^^1^F
"IX",123,123,"ACP",11.1,2,0)
2^F^123^.02^^2^F
"IX",123,123,"AIFC",0)
123^AIFC^Index on ROUTING FACILITY & REMOTE CONSULT #^R^^R^IR^I^123^^^^^S
"IX",123,123,"AIFC",1)
S ^GMR(123,"AIFC",$E(X(1),1,5),$E(X(2),1,9),DA)=""
"IX",123,123,"AIFC",2)
K ^GMR(123,"AIFC",$E(X(1),1,5),$E(X(2),1,9),DA)
"IX",123,123,"AIFC",2.5)
K ^GMR(123,"AIFC")
"IX",123,123,"AIFC",11.1,0)
^.114IA^2^2
"IX",123,123,"AIFC",11.1,1,0)
1^F^123^.07^5^1^F
"IX",123,123,"AIFC",11.1,2,0)
2^F^123^.06^9^2^F
"IX",123,123.02,"AC",0)
123.02^AC^Index on activity, actual date of activity and remote date of activity^R^^R^IR^I^123.02^^^^^S
"IX",123,123.02,"AC",.1,0)
^^4^4^3020307^
"IX",123,123.02,"AC",.1,1,0)
This index will be built using the ACTIVITY (field #1), ACTUAL DATE/TIME
"IX",123,123.02,"AC",.1,2,0)
OF ACTIVITY (field #2) and the REMOTE DATE/TIME OF FILING (field #.25).
"IX",123,123.02,"AC",.1,3,0)
This index will be used to prevent an activity from being filed more than
"IX",123,123.02,"AC",.1,4,0)
once, in case of re-transmission of the activity from the remote site.
"IX",123,123.02,"AC",1)
S ^GMR(123,DA(1),40,"AC",$E(X(1),1,3),$E(X(2),1,17),$E(X(3),1,17),DA)=""
"IX",123,123.02,"AC",2)
K ^GMR(123,DA(1),40,"AC",$E(X(1),1,3),$E(X(2),1,17),$E(X(3),1,17),DA)
"IX",123,123.02,"AC",2.5)
K ^GMR(123,DA(1),40,"AC")
"IX",123,123.02,"AC",11.1,0)
^.114IA^3^3
"IX",123,123.02,"AC",11.1,1,0)
1^F^123.02^1^3^1^F
"IX",123,123.02,"AC",11.1,2,0)
2^F^123.02^.25^17^2^F
"IX",123,123.02,"AC",11.1,3,0)
3^F^123.02^2^17^3^F
"IX",123,123.051,"AR",0)
123.051^AR^Index on REMOTE ASSOCIATED RESULT and RESULTING SITE^R^^R^IR^I^123.051^^^^^S
"IX",123,123.051,"AR",.1,0)
^^2^2^3011025^
"IX",123,123.051,"AR",.1,1,0)
This index is used to keep track of the remote results associated with a 
"IX",123,123.051,"AR",.1,2,0)
particular IFC. 
"IX",123,123.051,"AR",1)
S ^GMR(123,DA(1),51,"AR",$E(X(1),1,30),$E(X(2),1,10),DA)=""
"IX",123,123.051,"AR",2)
K ^GMR(123,DA(1),51,"AR",$E(X(1),1,30),$E(X(2),1,10),DA)
"IX",123,123.051,"AR",2.5)
K ^GMR(123,DA(1),51,"AR")
"IX",123,123.051,"AR",11.1,0)
^.114IA^2^2
"IX",123,123.051,"AR",11.1,1,0)
1^F^123.051^.02^30^1^F
"IX",123,123.051,"AR",11.1,2,0)
2^F^123.051^.03^10^2^F
"MBREQ")
0
"PKG",222,-1)
1^1
"PKG",222,0)
CONSULT/REQUEST TRACKING^GMRC^CONSULTS/REQUESTS
"PKG",222,22,0)
^9.49I^1^1
"PKG",222,22,1,0)
3.0^2980101^2990325^66481
"PKG",222,22,1,"PAH",1,0)
38^3041209
"PKG",222,22,1,"PAH",1,1,0)
^^4^4^3041209
"PKG",222,22,1,"PAH",1,1,1,0)
This patch corrects the inaccurate identification of the location of 
"PKG",222,22,1,"PAH",1,1,2,0)
comments when viewing an SF513 for an IFC.  It also corrects the situation
"PKG",222,22,1,"PAH",1,1,3,0)
where the extraneous text, "Clinical Procedure Report", is displayed
"PKG",222,22,1,"PAH",1,1,4,0)
inappropriately when performing a detailed display.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
2
"RTN","GMRCART")
0^2^B68961648
"RTN","GMRCART",1,0)
GMRCART ;SLC/DCM,DLT,JFR - Result display logic ;12/17/01 22:39
"RTN","GMRCART",2,0)
 ;;3.0;CONSULT/REQUEST TRACKING;**4,15,17,23,22,38**;DEC 27, 1997
"RTN","GMRCART",3,0)
 ;
"RTN","GMRCART",4,0)
 ; This routine invokes IA #2638,#10060
"RTN","GMRCART",5,0)
 ;
"RTN","GMRCART",6,0)
RT(GMRCO) ;Result Display logic - called from GMRCA1
"RTN","GMRCART",7,0)
 N GMRCCT,GMRCTMP,GMRCSR,GMRCTUFN,GMRCSTS,GMRCMSG
"RTN","GMRCART",8,0)
 ;
"RTN","GMRCART",9,0)
 S GMRCSR=$P($G(^GMR(123,+GMRCO,0)),"^",15),GMRCTUFN=$P(^(0),"^",20)
"RTN","GMRCART",10,0)
 S GMRCSTS=$P($G(^GMR(123,+GMRCO,0)),"^",12)
"RTN","GMRCART",11,0)
 I '$$RESOLUS^GMRCAU(GMRCSTS),('+GMRCSR&('GMRCTUFN)) S GMRCMSG="No results available for review." D EXAC^GMRCADC(GMRCMSG),END S GMRCQUT=1 Q
"RTN","GMRCART",12,0)
 ;
"RTN","GMRCART",13,0)
 W !,"Compiling Result Display..."
"RTN","GMRCART",14,0)
 I $D(IOTM),$D(IOBM),$D(IOSTBM) D FULL^VALM1
"RTN","GMRCART",15,0)
 K ^TMP("GMRCR",$J,"DT") S GMRCCT=1
"RTN","GMRCART",16,0)
 S XQORM("A")="Select Action: "
"RTN","GMRCART",17,0)
 S:$D(VALMAR) GMRCVAL=VALMAR
"RTN","GMRCART",18,0)
 S GMRCTMP="^TMP(""GMRCR"",$J,""DT"")"
"RTN","GMRCART",19,0)
 S GMRCDVL="",$P(GMRCDVL,"-",41)=""
"RTN","GMRCART",20,0)
 ;
"RTN","GMRCART",21,0)
 D GETRSLT(GMRCTMP)
"RTN","GMRCART",22,0)
 ;
"RTN","GMRCART",23,0)
 D EN^VALM("GMRC RESULTS DISPLAY")
"RTN","GMRCART",24,0)
 S:$D(GMRCVAL) VALMAR=GMRCVAL S:$D(LNCT) VALMCNT=LNCT
"RTN","GMRCART",25,0)
 D KILL^VALM10()
"RTN","GMRCART",26,0)
 K OREND,ORAGE,ORIO,ORDOB,ORFT,ORHI,ORIFN,ORNP,ORL,ORPD,ORPNM,ORPV,ORSEQ,ORSEX,ORWARD,ORDG
"RTN","GMRCART",27,0)
 K GMRCDVL,GMRCLCT,GMRCRPT,GMRCTUFN,GMRCVAL,MCFILE,MCPROC,GMRCX,GMRCTO,GMRCPRNM
"RTN","GMRCART",28,0)
 D END
"RTN","GMRCART",29,0)
 Q
"RTN","GMRCART",30,0)
 ;
"RTN","GMRCART",31,0)
GETRSLT(TMPGLOB,GMRCDET) ;load the results into global defined in TMPGLOB
"RTN","GMRCART",32,0)
 ;used for GUI formated results and list manager
"RTN","GMRCART",33,0)
 ;
"RTN","GMRCART",34,0)
 ;I GMRCDET=1 coming from a detailed display not results display
"RTN","GMRCART",35,0)
 ;
"RTN","GMRCART",36,0)
 N GMRCCT,GMRCCTS,SF,TAB
"RTN","GMRCART",37,0)
 S TAB="",$P(TAB," ",31)=""
"RTN","GMRCART",38,0)
 S GMRCDVL="",$P(GMRCDVL,"-",41)=""
"RTN","GMRCART",39,0)
 K @TMPGLOB,^TMP("GMRCR",$J,"CP")
"RTN","GMRCART",40,0)
 S GMRCCT=1
"RTN","GMRCART",41,0)
 S:'$D(GMRCDET) GMRCDET=0
"RTN","GMRCART",42,0)
 I $L($P(^GMR(123,GMRCO,0),"^",19)) S SF=$P(^(0),"^",19),@TMPGLOB@(GMRCCT,0)="Significant Findings: "_$S(SF="Y":"**Yes**",SF="N":"No",1:"Unknown"),GMRCCT=GMRCCT+1
"RTN","GMRCART",43,0)
 ;S @TMPGLOB@(GMRCCT,0)=GMRCDVL_GMRCDVL,GMRCCT=GMRCCT+1 ;GMRCDVL_GMRCDVL
"RTN","GMRCART",44,0)
 D PRINT^GMRCTIUP(GMRCO,GMRCCT,1,GMRCDET)
"RTN","GMRCART",45,0)
 S GMRCCTS=GMRCCT ;save the line count before printing med and TIU notes
"RTN","GMRCART",46,0)
 D GETMCAR
"RTN","GMRCART",47,0)
 D GETCP
"RTN","GMRCART",48,0)
 D GETRES
"RTN","GMRCART",49,0)
 ; I '$D(GMRCDET) D GETREMOT(GMRCO,TMPGLOB,.GMRCCT)
"RTN","GMRCART",50,0)
 I GMRCCT=GMRCCTS D  ;check if count changed for notes or med results
"RTN","GMRCART",51,0)
 . S:+$L($G(SF)) @TMPGLOB@(GMRCCT,0)=GMRCDVL_GMRCDVL,GMRCCT=GMRCCT+1 ;GMRCDVL_GMRCDVL
"RTN","GMRCART",52,0)
 . S @TMPGLOB@(GMRCCT,0)="No local TIU results or Medicine results available for this consult"
"RTN","GMRCART",53,0)
 . S GMRCCT=GMRCCT+1
"RTN","GMRCART",54,0)
 ;
"RTN","GMRCART",55,0)
 I '$D(GMRCDET) D GETCOM
"RTN","GMRCART",56,0)
 I GMRCCT>2 S @TMPGLOB@(GMRCCT,0)="",$P(@TMPGLOB@(GMRCCT,0),"=",81)="",GMRCCT=GMRCCT+1
"RTN","GMRCART",57,0)
 Q
"RTN","GMRCART",58,0)
 ;
"RTN","GMRCART",59,0)
GETMCAR ;load the medicine results into TMPGLOB
"RTN","GMRCART",60,0)
 Q:'$O(^TMP("GMRCR",$J,"MCAR",0))
"RTN","GMRCART",61,0)
 N ND,ND1
"RTN","GMRCART",62,0)
 S ND=0 F  S ND=$O(^TMP("GMRCR",$J,"MCAR",ND)) Q:ND=""!(ND?1A.E)  D
"RTN","GMRCART",63,0)
 .S @TMPGLOB@(GMRCCT,0)="",$P(^(0),"-",80)="",GMRCCT=GMRCCT+1
"RTN","GMRCART",64,0)
 .S @TMPGLOB@(GMRCCT,0)=TAB_"Medicine Package Report",GMRCCT=GMRCCT+1
"RTN","GMRCART",65,0)
 .S ND1=0 F  S ND1=$O(^TMP("GMRCR",$J,"MCAR",ND,ND1)) Q:ND1=""  S @TMPGLOB@(GMRCCT,0)=^TMP("GMRCR",$J,"MCAR",ND,ND1,0),GMRCCT=GMRCCT+1
"RTN","GMRCART",66,0)
 .Q
"RTN","GMRCART",67,0)
 K ^TMP("GMRCR",$J,"MCAR")
"RTN","GMRCART",68,0)
 Q
"RTN","GMRCART",69,0)
 ;
"RTN","GMRCART",70,0)
GETCP ; Load up any Clin. Proc. results
"RTN","GMRCART",71,0)
 Q:'$O(^TMP("GMRCR",$J,"CP",0))
"RTN","GMRCART",72,0)
 N ND,ND1
"RTN","GMRCART",73,0)
 S ND=0 F  S ND=$O(^TMP("GMRCR",$J,"CP",ND)) Q:ND=""!(ND?1A.E)  D
"RTN","GMRCART",74,0)
 .S @TMPGLOB@(GMRCCT,0)="",$P(^(0),"-",80)="",GMRCCT=GMRCCT+1
"RTN","GMRCART",75,0)
 .S @TMPGLOB@(GMRCCT,0)=TAB_"Clinical Procedure Report",GMRCCT=GMRCCT+1
"RTN","GMRCART",76,0)
 .S ND1=0 F  S ND1=$O(^TMP("GMRCR",$J,"CP",ND,ND1)) Q:ND1=""  D
"RTN","GMRCART",77,0)
 .. S @TMPGLOB@(GMRCCT,0)=^TMP("GMRCR",$J,"CP",ND,ND1,0),GMRCCT=GMRCCT+1
"RTN","GMRCART",78,0)
 .Q
"RTN","GMRCART",79,0)
 K ^TMP("GMRCR",$J,"CP")
"RTN","GMRCART",80,0)
 Q
"RTN","GMRCART",81,0)
 ;
"RTN","GMRCART",82,0)
GETRES ;load the TIU notes into TMPGLOB
"RTN","GMRCART",83,0)
 Q:'+$O(^TMP("GMRCR",$J,"RES",0))
"RTN","GMRCART",84,0)
 ;
"RTN","GMRCART",85,0)
 N ND,ND1
"RTN","GMRCART",86,0)
 S ND=0 F  S ND=$O(^TMP("GMRCR",$J,"RES",ND)) Q:(ND="")!(ND?1A.E)  D
"RTN","GMRCART",87,0)
 . I $D(^TMP("GMRCR",$J,"RES",ND,"TEXT","GMRCRPT")) D
"RTN","GMRCART",88,0)
 . . S @TMPGLOB@(GMRCCT,0)="",GMRCCT=GMRCCT+1
"RTN","GMRCART",89,0)
 . . S @TMPGLOB@(GMRCCT,0)=$E(GMRCDVL,1,80-$L(^TMP("GMRCR",$J,"RES",ND,"TEXT","GMRCRPT"))\2)_^("GMRCRPT")_$E(GMRCDVL,1,80-$L(^("GMRCRPT"))\2)
"RTN","GMRCART",90,0)
 . . S GMRCCT=GMRCCT+1
"RTN","GMRCART",91,0)
 . S:'$D(^TMP("GMRCR",$J,"RES",ND,"TEXT","GMRCRPT")) @TMPGLOB@(GMRCCT,0)=GMRCDVL_GMRCDVL,GMRCCT=GMRCCT+1
"RTN","GMRCART",92,0)
 . S:$O(^TMP("GMRCR",$J,"RES",ND,"TEXT",0)) @TMPGLOB@(GMRCCT,0)="",GMRCCT=GMRCCT+1
"RTN","GMRCART",93,0)
 . S ND1=0 F  S ND1=$O(^TMP("GMRCR",$J,"RES",ND,"TEXT",ND1)) Q:ND1?1A.E!(ND1="")  S @TMPGLOB@(GMRCCT,0)=^TMP("GMRCR",$J,"RES",ND,"TEXT",ND1,0),GMRCCT=GMRCCT+1
"RTN","GMRCART",94,0)
 . I $O(^TMP("GMRCR",$J,"RES",ND,"ADD",0)) S ND1=0 F  S ND1=$O(^TMP("GMRCR",$J,"RES",ND,"ADD",ND1)) Q:ND1=""   D
"RTN","GMRCART",95,0)
 . . S @TMPGLOB@(GMRCCT,0)="",GMRCCT=GMRCCT+1
"RTN","GMRCART",96,0)
 . . S @TMPGLOB@(GMRCCT,0)=TAB_"ADDENDUM TO REPORT",GMRCCT=GMRCCT+1
"RTN","GMRCART",97,0)
 . . S ND2=0 F  S ND2=$O(^TMP("GMRCR",$J,"RES",ND,"ADD",ND1,ND2)) Q:ND2=""!(ND2?1A.E)  S @TMPGLOB@(GMRCCT,0)=^TMP("GMRCR",$J,"RES",ND,"ADD",ND1,ND2,0),GMRCCT=GMRCCT+1
"RTN","GMRCART",98,0)
 . . Q
"RTN","GMRCART",99,0)
 . Q
"RTN","GMRCART",100,0)
 K ^TMP("GMRCR",$J,"RES")
"RTN","GMRCART",101,0)
 Q
"RTN","GMRCART",102,0)
 ;
"RTN","GMRCART",103,0)
GETCOM ;Get the comments for resolution actions
"RTN","GMRCART",104,0)
 S GMRCSTS=$P($G(^GMR(123,+GMRCO,0)),"^",12)
"RTN","GMRCART",105,0)
 Q:'$$RESOLUS^GMRCAU(+GMRCSTS) 
"RTN","GMRCART",106,0)
 ;
"RTN","GMRCART",107,0)
 ;Loop thru actions to find the resolution type actions
"RTN","GMRCART",108,0)
 N ND,ND1,ND2
"RTN","GMRCART",109,0)
 S ND="" F  S ND=$O(^GMR(123,+GMRCO,40,"B",ND)) Q:ND=""  S ND1=$O(^GMR(123,+GMRCO,40,"B",ND,"")) D
"RTN","GMRCART",110,0)
 . ;
"RTN","GMRCART",111,0)
 . ;Check for resulting action types:complete,sig finding,dc,cancel
"RTN","GMRCART",112,0)
 . N GMRCAIEN
"RTN","GMRCART",113,0)
 . S GMRCAIEN=$P($G(^GMR(123,+GMRCO,40,ND1,0)),"^",2)
"RTN","GMRCART",114,0)
 . I '$$RESOLUA^GMRCAU(GMRCAIEN) Q
"RTN","GMRCART",115,0)
 . ;
"RTN","GMRCART",116,0)
 . ;save the action header info in case there are comments
"RTN","GMRCART",117,0)
 . N GMRCAHDR,GMRCPROV,GMRCENBY,GMRCENDT
"RTN","GMRCART",118,0)
 . D SAVEHDR
"RTN","GMRCART",119,0)
 . ;
"RTN","GMRCART",120,0)
 . ;check for comments, print header on first pass
"RTN","GMRCART",121,0)
 . S ND2=0
"RTN","GMRCART",122,0)
 . F  S ND2=$O(^GMR(123,GMRCO,40,ND1,1,ND2)) Q:ND2=""  D
"RTN","GMRCART",123,0)
 . . I +$G(GMRCAHDR) D GETHDR ;GMRCAHDR will =1 on first pass
"RTN","GMRCART",124,0)
 . . S @TMPGLOB@(GMRCCT,0)=^GMR(123,GMRCO,40,ND1,1,ND2,0),GMRCCT=GMRCCT+1
"RTN","GMRCART",125,0)
 . . Q
"RTN","GMRCART",126,0)
 . Q
"RTN","GMRCART",127,0)
 Q
"RTN","GMRCART",128,0)
 ;
"RTN","GMRCART",129,0)
SAVEHDR ;Save the action header info to print later if there are comments
"RTN","GMRCART",130,0)
 S GMRCAHDR=1 ;flag to print action header on first pass of comments
"RTN","GMRCART",131,0)
 ;save the provider, entered by and date
"RTN","GMRCART",132,0)
 S GMRCPROV=$P(^GMR(123,GMRCO,40,ND1,0),"^",4),GMRCENBY=$P(^(0),"^",5)
"RTN","GMRCART",133,0)
 S GMRCENDT=$$FMTE^XLFDT($P($G(^GMR(123,GMRCO,40,ND1,0)),"^",3))
"RTN","GMRCART",134,0)
 Q
"RTN","GMRCART",135,0)
 ;
"RTN","GMRCART",136,0)
GETHDR ;Print the comment header if the action had a comment
"RTN","GMRCART",137,0)
 S @TMPGLOB@(GMRCCT,0)="",GMRCCT=GMRCCT+1
"RTN","GMRCART",138,0)
 S @TMPGLOB@(GMRCCT,0)=$$CENTER^GMRCP5D("("_$P($G(^GMR(123.1,GMRCAIEN,0)),"^",8)_" Comment)"),GMRCCT=GMRCCT+1
"RTN","GMRCART",139,0)
 S @TMPGLOB@(GMRCCT,0)="      Entered by: "_$S($L(GMRCENBY):$P(^VA(200,GMRCENBY,0),"^",1),1:"")_" - "_GMRCENDT,GMRCCT=GMRCCT+1
"RTN","GMRCART",140,0)
 I +GMRCPROV S @TMPGLOB@(GMRCCT,0)="      Responsible Clinician: "_$P($G(^VA(200,GMRCPROV,0)),"^",1),GMRCCT=GMRCCT+1
"RTN","GMRCART",141,0)
 K GMRCAHDR
"RTN","GMRCART",142,0)
 Q
"RTN","GMRCART",143,0)
 ;
"RTN","GMRCART",144,0)
GETREMOT(GMRCDA,GMRCAR,GMRCNT) ;retrieve remote results and load up in display
"RTN","GMRCART",145,0)
 ; Input:
"RTN","GMRCART",146,0)
 ; GMRCDA  = consult ien from file 123
"RTN","GMRCART",147,0)
 ; GMRCAR  = array to return results in (e.g. $NA(^TMP("GMRCAR",$J)) )
"RTN","GMRCART",148,0)
 ; GMRCNT  = number within GMRCAR to start placing results (pass by ref)
"RTN","GMRCART",149,0)
 ;
"RTN","GMRCART",150,0)
 ;Output:
"RTN","GMRCART",151,0)
 ; array containing remote results in format:
"RTN","GMRCART",152,0)
 ;   ^TMP("GMRCAR",$J,1,0)= result text line 1
"RTN","GMRCART",153,0)
 ;   ^TMP("GMRCAR",$J,2,0)= result text line 2
"RTN","GMRCART",154,0)
 ;
"RTN","GMRCART",155,0)
 I '$O(^GMR(123,GMRCDA,51,0)) Q  ;no remote results
"RTN","GMRCART",156,0)
 N HDR,GMRCREM,GMRCDATA,FTR,GMRCIO
"RTN","GMRCART",157,0)
 S @GMRCAR@(GMRCNT,0)="",GMRCNT=GMRCNT+1
"RTN","GMRCART",158,0)
 S HDR=$$REPEAT^XLFSTR("*",31)_" REMOTE RESULTS "_$$REPEAT^XLFSTR("*",31)
"RTN","GMRCART",159,0)
 S FTR=$$REPEAT^XLFSTR("*",27)_" END OF REMOTE RESULTS "_$$REPEAT^XLFSTR("*",28)
"RTN","GMRCART",160,0)
 S @GMRCAR@(GMRCNT,0)=HDR,GMRCNT=GMRCNT+1
"RTN","GMRCART",161,0)
 S @GMRCAR@(GMRCNT,0)="",GMRCNT=GMRCNT+1
"RTN","GMRCART",162,0)
 S GMRCREM=0 F  S GMRCREM=$O(^GMR(123,GMRCDA,51,GMRCREM)) Q:'GMRCREM  D
"RTN","GMRCART",163,0)
 . N GMRCSITE,GMRCRES,GMRCSTA,GMRCRPC,GMRCREM0
"RTN","GMRCART",164,0)
 . S GMRCREM0=^GMR(123,GMRCDA,51,GMRCREM,0) Q:'$L(GMRCREM0)
"RTN","GMRCART",165,0)
 . S GMRCSTA=$$STA^XUAF4($P(GMRCREM0,U,3))
"RTN","GMRCART",166,0)
 . D F4^XUAF4(GMRCSTA,.GMRCSITE) I '+GMRCSITE Q
"RTN","GMRCART",167,0)
 . S GMRCRES=$P(GMRCREM0,U,2)_","
"RTN","GMRCART",168,0)
 . I GMRCRES["TIU" S GMRCRPC="TIU GET RECORD TEXT",GMRCRES=+GMRCRES
"RTN","GMRCART",169,0)
 . I GMRCRES["MCAR" S GMRCRPC="ORQQCN GET MED RESULT DETAILS"
"RTN","GMRCART",170,0)
 . D SAVDEV^%ZISUTL("GMRCIO") ; save off current device settings
"RTN","GMRCART",171,0)
 . D DIRECT^XWB2HL7(.GMRCDATA,GMRCSTA,GMRCRPC,"0",GMRCRES)
"RTN","GMRCART",172,0)
 . D USE^%ZISUTL("GMRCIO") ; restore IO to previous settings
"RTN","GMRCART",173,0)
 . D RMDEV^%ZISUTL("GMRCIO") ; kills data saved in GMRCIO
"RTN","GMRCART",174,0)
 . I '$D(GMRCDATA) Q
"RTN","GMRCART",175,0)
 . S @GMRCAR@(GMRCNT,0)=$$CJ^XLFSTR($S(GMRCRES["MCAR":"Medicine report from:",1:"TIU Document from:"),80),GMRCNT=GMRCNT+1
"RTN","GMRCART",176,0)
 . S @GMRCAR@(GMRCNT,0)=$$CJ^XLFSTR(GMRCSITE("NAME"),80)
"RTN","GMRCART",177,0)
 . S GMRCNT=GMRCNT+1
"RTN","GMRCART",178,0)
 . S @GMRCAR@(GMRCNT,0)=$$CJ^XLFSTR("Associated on: "_$$FMTE^XLFDT(+GMRCREM0),80),GMRCNT=GMRCNT+1
"RTN","GMRCART",179,0)
 . S @GMRCAR@(GMRCNT,0)="",GMRCNT=GMRCNT+1
"RTN","GMRCART",180,0)
 . N GMRCQT S GMRCQT=0
"RTN","GMRCART",181,0)
 . I '$L($G(GMRCDATA)) D
"RTN","GMRCART",182,0)
 .. N I S I="" F  S I=$O(GMRCDATA(I)) Q:I=""!(GMRCQT)  D
"RTN","GMRCART",183,0)
 ... I $P(GMRCDATA(I),U)=-1 D  S GMRCQT=1 Q
"RTN","GMRCART",184,0)
 .... S @GMRCAR@(GMRCNT,0)="Report not currently available"
"RTN","GMRCART",185,0)
 .... S GMRCNT=GMRCNT+1
"RTN","GMRCART",186,0)
 ... S @GMRCAR@(GMRCNT,0)=GMRCDATA(I),GMRCNT=GMRCNT+1
"RTN","GMRCART",187,0)
 . I $L($G(GMRCDATA)),$D(@GMRCDATA) D
"RTN","GMRCART",188,0)
 .. N I S I="" F  S I=$O(@GMRCDATA@(I)) Q:I=""!(GMRCQT)  D
"RTN","GMRCART",189,0)
 ... I $P(@GMRCDATA@(I),U)=-1 D  S GMRCQT=1 Q
"RTN","GMRCART",190,0)
 .... S @GMRCAR@(GMRCNT,0)="Report not currently available"
"RTN","GMRCART",191,0)
 .... S GMRCNT=GMRCNT+1
"RTN","GMRCART",192,0)
 ... S @GMRCAR@(GMRCNT,0)=@GMRCDATA@(I),GMRCNT=GMRCNT+1
"RTN","GMRCART",193,0)
 .. K @GMRCDATA
"RTN","GMRCART",194,0)
 . K GMRCDATA
"RTN","GMRCART",195,0)
 . Q
"RTN","GMRCART",196,0)
 S @GMRCAR@(GMRCNT,0)="",GMRCNT=GMRCNT+1
"RTN","GMRCART",197,0)
 S @GMRCAR@(GMRCNT,0)=FTR,GMRCNT=GMRCNT+1
"RTN","GMRCART",198,0)
 S @GMRCAR@(GMRCNT,0)=""
"RTN","GMRCART",199,0)
 Q
"RTN","GMRCART",200,0)
 ;
"RTN","GMRCART",201,0)
END ;kill off variables and exit
"RTN","GMRCART",202,0)
 I $D(DTOUT)!$D(DIROUT) S GMRCQIT=""
"RTN","GMRCART",203,0)
 K DTOUT,DIROUT,DUOUT
"RTN","GMRCART",204,0)
 S:$D(^TMP("GMRC",$J,"CURRENT","MENU")) XQORM("HIJACK")=^("MENU")
"RTN","GMRCART",205,0)
 Q
"RTN","GMRCP5D")
0^1^B55767536
"RTN","GMRCP5D",1,0)
GMRCP5D ;SLC/DCM,RJS,JFR - Print Consult form 513 (Gather Data - Addendums, Headers, Service reports and Comments) ;8/19/03 15:31
"RTN","GMRCP5D",2,0)
 ;;3.0;CONSULT/REQUEST TRACKING;**4,12,15,22,29,35,38**;Dec 27, 1997
"RTN","GMRCP5D",3,0)
 ;
"RTN","GMRCP5D",4,0)
FORMAT(GMRCIFN,GMRCRD,PAGEWID) ;
"RTN","GMRCP5D",5,0)
 ;
"RTN","GMRCP5D",6,0)
 I $L($P(GMRCRD,U,15)) D
"RTN","GMRCP5D",7,0)
 .I $O(^TMP("GMRCR",$J,"MCAR",0)) D
"RTN","GMRCP5D",8,0)
 ..N GMRCSVC
"RTN","GMRCP5D",9,0)
 ..S GMRCSVC=$P($G(^GMR(123.5,+$P(GMRCRD,U,5),0)),U,1)
"RTN","GMRCP5D",10,0)
 ..S:$L(GMRCSVC) GMRCSVC=GMRCSVC_" "
"RTN","GMRCP5D",11,0)
 ..;
"RTN","GMRCP5D",12,0)
 ..; Medicine Results?
"RTN","GMRCP5D",13,0)
 ..S GMRCR0=0 F  S GMRCR0=$O(^TMP("GMRCR",$J,"MCAR",GMRCR0)) Q:'GMRCR0  D
"RTN","GMRCP5D",14,0)
 ...D SUB("H","SREP",GMRCR0,$$CENTER(GMRCSVC_"Service Report #"_GMRCR0_" continued."))
"RTN","GMRCP5D",15,0)
 ...D SUB("H","SREP",GMRCR0," ")
"RTN","GMRCP5D",16,0)
 ...D BLD("SREP",GMRCR0,1,0,$$CENTER("Medicine Package Report"))
"RTN","GMRCP5D",17,0)
 ...D BLD("SREP",GMRCR0,1,0,"")
"RTN","GMRCP5D",18,0)
 ...N LN
"RTN","GMRCP5D",19,0)
 ...S LN=0 F  S LN=$O(^TMP("GMRCR",$J,"MCAR",GMRCR0,LN)) Q:'LN  D
"RTN","GMRCP5D",20,0)
 ....D BLD("SREP",GMRCR0,1,0,$G(^TMP("GMRCR",$J,"MCAR",GMRCR0,LN,0)))
"RTN","GMRCP5D",21,0)
 ;
"RTN","GMRCP5D",22,0)
 ; Build Processing Activities
"RTN","GMRCP5D",23,0)
 S GMRCR0=0 F  S GMRCR0=$O(^GMR(123,GMRCIFN,40,GMRCR0)) Q:'GMRCR0  D
"RTN","GMRCP5D",24,0)
 .N GMRCR1,GMRC400,CMT,USER,GMRCDT,RPRV,GMRC402,GMRCISIT
"RTN","GMRCP5D",25,0)
 .S GMRCR1=+$O(^GMR(123,GMRCIFN,40,GMRCR0,0)) Q:GMRCR1'=1
"RTN","GMRCP5D",26,0)
 .S GMRC400=$G(^GMR(123,GMRCIFN,40,GMRCR0,0))
"RTN","GMRCP5D",27,0)
 .S GMRC402=$G(^GMR(123,GMRCIFN,40,GMRCR0,2))
"RTN","GMRCP5D",28,0)
 .S CMT=$$PRCMT^GMRCP5B(+$P(GMRC400,U,2)) Q:'$L(CMT)
"RTN","GMRCP5D",29,0)
 .S GMRCDT=$P(GMRC400,U,3) S:'GMRCDT GMRCDT=$P(GMRC400,U,1)
"RTN","GMRCP5D",30,0)
 .S GMRCDT=$$EXDT(GMRCDT)_" "_$P(GMRC402,U,3)
"RTN","GMRCP5D",31,0)
 .;Following lines modified in patch *38
"RTN","GMRCP5D",32,0)
 .;I $P(^GMR(123,GMRCIFN,0),U,23) D  ;commented out
"RTN","GMRCP5D",33,0)
 .;.S GMRCISIT=$$GET1^DIQ(4,$P(^GMR(123,GMRCIFN,0),U,23),.01)  ;commented out
"RTN","GMRCP5D",34,0)
 .;.S GMRCISIT="Entered at: "_GMRCISIT  ;commented out
"RTN","GMRCP5D",35,0)
 .I $L(GMRC402) D  ;ADDED
"RTN","GMRCP5D",36,0)
 ..S GMRCISIT=$$GET1^DIQ(123,GMRCIFN,.07)  ;ADDED
"RTN","GMRCP5D",37,0)
 .I '$D(GMRCISIT) D  ;ADDED
"RTN","GMRCP5D",38,0)
 ..S GMRCISIT=$$KSP^XUPARAM("INST")  ;ADDED
"RTN","GMRCP5D",39,0)
 ..I GMRCISIT'="" S GMRCISIT=$$GET1^DIQ(4,GMRCISIT,.01)  ;ADDED
"RTN","GMRCP5D",40,0)
 ..I GMRCISIT="" S GMRCISIT=$$GET1^DIQ(123,GMRCIFN,.05)  ;ADDED
"RTN","GMRCP5D",41,0)
 .S GMRCISIT="Entered at: "_GMRCISIT  ;ADDED
"RTN","GMRCP5D",42,0)
 .;End of modifications for patch *38
"RTN","GMRCP5D",43,0)
 .S RPRV=$$GET1^DIQ(200,+$P(GMRC400,U,4),.01)
"RTN","GMRCP5D",44,0)
 .I '$L(RPRV) S RPRV=$P(GMRC402,U,2)
"RTN","GMRCP5D",45,0)
 .S:($L(RPRV)) RPRV="Responsible Person: "_RPRV
"RTN","GMRCP5D",46,0)
 .S USER=$$GET1^DIQ(200,+$P(GMRC400,U,5),.01)
"RTN","GMRCP5D",47,0)
 .I '$L(USER) S USER=$P(GMRC402,U)
"RTN","GMRCP5D",48,0)
 .S USER="Entered by: "_USER_" - "_GMRCDT
"RTN","GMRCP5D",49,0)
 .D SUB("H","COM",GMRCR0,CMT_" Comment ("_USER_") continued.")
"RTN","GMRCP5D",50,0)
 .D SUB("H","COM",GMRCR0," ")
"RTN","GMRCP5D",51,0)
 .D BLD("COM",GMRCR0,1,0,"")
"RTN","GMRCP5D",52,0)
 .D BLD("COM",GMRCR0,1,0,$$CENTER("("_CMT_" Comment)"))
"RTN","GMRCP5D",53,0)
 .I $P(GMRC400,U,2)=17!($P(GMRC400,U,2)=25) D
"RTN","GMRCP5D",54,0)
 .. N FWDLN,FWDRS
"RTN","GMRCP5D",55,0)
 .. S FWDLN="Forwarded from: "
"RTN","GMRCP5D",56,0)
 .. S FWDRS=$P($G(^GMR(123,GMRCIFN,40,GMRCR0,3)),U)
"RTN","GMRCP5D",57,0)
 .. I $L(FWDRS) S FWDLN=FWDLN_FWDRS
"RTN","GMRCP5D",58,0)
 .. I '$L(FWDRS) S FWDLN=FWDLN_$$GET1^DIQ(123.5,+$P(GMRC400,U,6),.01)
"RTN","GMRCP5D",59,0)
 .. D BLD("COM",GMRCR0,1,5,FWDLN)
"RTN","GMRCP5D",60,0)
 .D BLD("COM",GMRCR0,1,5,USER)
"RTN","GMRCP5D",61,0)
 .D:($L(RPRV)) BLD("COM",GMRCR0,1,5,RPRV)
"RTN","GMRCP5D",62,0)
 .D:($L($G(GMRCISIT))) BLD("COM",GMRCR0,1,5,GMRCISIT)
"RTN","GMRCP5D",63,0)
 .;
"RTN","GMRCP5D",64,0)
 .N GMRCR2 S GMRCR2=0
"RTN","GMRCP5D",65,0)
 .F  S GMRCR2=$O(^GMR(123,GMRCIFN,40,GMRCR0,GMRCR1,GMRCR2)) Q:'GMRCR2  D
"RTN","GMRCP5D",66,0)
 ..D BLD("COM",GMRCR0,1,0,$G(^GMR(123,GMRCIFN,40,GMRCR0,GMRCR1,GMRCR2,0)))
"RTN","GMRCP5D",67,0)
 ;
"RTN","GMRCP5D",68,0)
 Q
"RTN","GMRCP5D",69,0)
 ;
"RTN","GMRCP5D",70,0)
ADDEND(GMRCIFN,GMRCR0,GMRCNDX,GMRCRD,PAGEWID) ;
"RTN","GMRCP5D",71,0)
 ;
"RTN","GMRCP5D",72,0)
 N GMRCADD,GMRCNDX,GMRCR1,GMRCV,TEXT,GMRCX
"RTN","GMRCP5D",73,0)
 ;
"RTN","GMRCP5D",74,0)
 S GMRCADD=0 F  S GMRCADD=$O(^TMP("GMRCR",$J,"RES",GMRCR0,"ADD",GMRCADD)) Q:'GMRCADD  D
"RTN","GMRCP5D",75,0)
 .N GMRCSGNM,GMRCNMDT,GMRCTIT,GMRCMODE,GMRCCSDT,GMRCCTIT,GMRCCSGM
"RTN","GMRCP5D",76,0)
 .;
"RTN","GMRCP5D",77,0)
 .F GMRCV="GMRCSGNM","GMRCNMDT","GMRCTIT","GMRCMODE" D
"RTN","GMRCP5D",78,0)
 ..S @GMRCV=$G(^TMP("GMRCR",$J,"RES",GMRCR0,"ADD",GMRCADD,GMRCV))
"RTN","GMRCP5D",79,0)
 .;
"RTN","GMRCP5D",80,0)
 . F GMRCV="GMRCCSDT","GMRCCTIT","GMRCCSGM","GMRCCSIG" D
"RTN","GMRCP5D",81,0)
 .. S @GMRCV=$G(^TMP("GMRCR",$J,"RES",GMRCR0,"ADD",GMRCADD,GMRCV))
"RTN","GMRCP5D",82,0)
 .S GMRCNDX=$O(^TMP("GMRC",$J,"OUTPUT","RES"," "),-1)+1
"RTN","GMRCP5D",83,0)
 .I $L($G(GMRCRPT)) D SUB("H","RES",GMRCNDX,"Addendum #"_GMRCADD_" To Consult Note #"_GMRCR0_" for "_GMRCRPT_" continued.")
"RTN","GMRCP5D",84,0)
 .I '$L($G(GMRCRPT)) D SUB("H","RES",GMRCNDX,"Addendum #"_GMRCADD_" To Consult Note #"_GMRCR0_" continued.")
"RTN","GMRCP5D",85,0)
 .D SUB("H","RES",GMRCNDX," ")
"RTN","GMRCP5D",86,0)
 .I $L($G(GMRCSGNM)) D
"RTN","GMRCP5D",87,0)
 ..D SUB("F","RES",GMRCNDX," ")
"RTN","GMRCP5D",88,0)
 ..I (GMRCMODE="electronic") S GMRCX=" Addendum Signature: "_GMRCSGNM_" /es/ "_$$EXDT($G(GMRCNMDT))
"RTN","GMRCP5D",89,0)
 ..I '(GMRCMODE="electronic") S GMRCX=" Addendum Author: "_GMRCSGNM S:$L($G(GMRCNMDT)) GMRCX=GMRCX_" Last edited: "_$$EXDT(GMRCNMDT)
"RTN","GMRCP5D",90,0)
 ..D SUB("F","RES",GMRCNDX,GMRCX)
"RTN","GMRCP5D",91,0)
 ..D:$L($G(GMRCTIT)) SUB("F","RES",GMRCNDX,"                     "_GMRCTIT)
"RTN","GMRCP5D",92,0)
 .I $L($G(GMRCCSDT)) D
"RTN","GMRCP5D",93,0)
 ..D SUB("F","RES",GMRCNDX," ")
"RTN","GMRCP5D",94,0)
 ..I (GMRCCSGM="electronic") S GMRCX=" Addendum CoSignature: "_GMRCCSIG_" /es/ "_$$EXDT(GMRCCSDT)
"RTN","GMRCP5D",95,0)
 ..I '(GMRCCSGM="electronic") S GMRCX=" Addendum CoSignature: "_GMRCCSIG_" /chart/ "_$$EXDT(GMRCCSDT)
"RTN","GMRCP5D",96,0)
 ..D SUB("F","RES",GMRCNDX,GMRCX)
"RTN","GMRCP5D",97,0)
 ..D:$L($G(GMRCCTIT)) SUB("F","RES",GMRCNDX,"                       "_GMRCCTIT)
"RTN","GMRCP5D",98,0)
 .D BLD("RES",GMRCNDX,1,0," ")
"RTN","GMRCP5D",99,0)
 .I $L($G(GMRCRPT)) D BLD("RES",GMRCNDX,1,0,$$CENTER("ADDENDUM #"_GMRCADD_" TO CONSULT NOTE #"_GMRCR0_" FOR "_GMRCRPT))
"RTN","GMRCP5D",100,0)
 .I '$L($G(GMRCRPT)) D BLD("RES",GMRCNDX,1,0,$$CENTER("ADDENDUM #"_GMRCADD_" TO CONSULT NOTE #"_GMRCR0))
"RTN","GMRCP5D",101,0)
 .D BLD("RES",GMRCNDX,1,0," ")
"RTN","GMRCP5D",102,0)
 .S GMRCR1=0 F  S GMRCR1=$O(^TMP("GMRCR",$J,"RES",GMRCR0,"ADD",GMRCADD,GMRCR1)) Q:'GMRCR1  D
"RTN","GMRCP5D",103,0)
 ..D BLD("RES",GMRCNDX,1,0,$G(^TMP("GMRCR",$J,"RES",GMRCR0,"ADD",GMRCADD,GMRCR1,0)))
"RTN","GMRCP5D",104,0)
 Q
"RTN","GMRCP5D",105,0)
 ;
"RTN","GMRCP5D",106,0)
HDR ; Header code for form 513
"RTN","GMRCP5D",107,0)
 ;
"RTN","GMRCP5D",108,0)
 N PG,GMRCFROM
"RTN","GMRCP5D",109,0)
 ;
"RTN","GMRCP5D",110,0)
 F PG=0,1 D
"RTN","GMRCP5D",111,0)
 .D BLD("HDR",PG,1,0,GMRCDVL)
"RTN","GMRCP5D",112,0)
 .D BLD("HDR",PG,1,6,"MEDICAL RECORD")
"RTN","GMRCP5D",113,0)
 .D BLD("HDR",PG,0,29,"|")
"RTN","GMRCP5D",114,0)
 .D BLD("HDR",PG,0,36,"CONSULTATION SHEET")
"RTN","GMRCP5D",115,0)
 .I PG D BLD("HDR",PG,0,60,"Page ","GMRCPG,65") I 1
"RTN","GMRCP5D",116,0)
 .E  I '$G(GMRCGUI) D BLD("HDR",PG,0,60,"Page ","GMRCPG,65")
"RTN","GMRCP5D",117,0)
 .;
"RTN","GMRCP5D",118,0)
 .D BLD("HDR",PG,1,0,GMRCDVL)
"RTN","GMRCP5D",119,0)
 .D BLD("HDR",PG,1,0,"Consult Request: "_$$CONSRQ(GMRCIFN))
"RTN","GMRCP5D",120,0)
 .D BLD("HDR",PG,0,55,"|Consult No.: "_GMRCIFN)
"RTN","GMRCP5D",121,0)
 .;
"RTN","GMRCP5D",122,0)
 D BLD("HDR",1,1,0,GMRCEQL)
"RTN","GMRCP5D",123,0)
 D BLD("HDR",0,1,0,GMRCDVL)
"RTN","GMRCP5D",124,0)
 ;
"RTN","GMRCP5D",125,0)
 I $G(CMT) D BLD("HDR",0,1,27,"("_$$PRCMT^GMRCP5B(CMT)_")") Q
"RTN","GMRCP5D",126,0)
 ;
"RTN","GMRCP5D",127,0)
 S GMRCFROM=$P($G(^SC(+$P(GMRCRD,U,6),0)),U,1)
"RTN","GMRCP5D",128,0)
 ;
"RTN","GMRCP5D",129,0)
 I '$L(GMRCFROM) D
"RTN","GMRCP5D",130,0)
 .N VAIN
"RTN","GMRCP5D",131,0)
 .D INP^VADPT
"RTN","GMRCP5D",132,0)
 .S GMRCFROM=$P($G(VAIN(4)),U,2)
"RTN","GMRCP5D",133,0)
 .I $L($G(VAIN(5))) S GMRCFROM=GMRCFROM_" (Rm/Bd: "_$G(VAIN(5))_" )"
"RTN","GMRCP5D",134,0)
 ;No location, IFC - consulting site
"RTN","GMRCP5D",135,0)
 I '$L(GMRCFROM),$P(GMRCRD,U,23),$P($G(GMRCRD(12)),U,5)="F" D
"RTN","GMRCP5D",136,0)
 .I $P(GMRCRD,U,21) S GMRCFROM=$$GET1^DIQ(4,$P(GMRCRD,U,21),.01)
"RTN","GMRCP5D",137,0)
 .E  S GMRCFROM=$$GET1^DIQ(4,$P(GMRCRD,U,23),.01)
"RTN","GMRCP5D",138,0)
 ;
"RTN","GMRCP5D",139,0)
 D BLD("HDR",0,1,0,"To: "_$P($G(^GMR(123.5,+$P(GMRCRD,U,5),0)),U,1))
"RTN","GMRCP5D",140,0)
 D BLD("HDR",0,1,5,"From: "_GMRCFROM)
"RTN","GMRCP5D",141,0)
 D BLD("HDR",0,0,49,"|Requested: "_$$EXDT($P(GMRCRD,U,7)))
"RTN","GMRCP5D",142,0)
 ;
"RTN","GMRCP5D",143,0)
 D BLD("HDR",0,1,0,GMRCDVL)
"RTN","GMRCP5D",144,0)
 D BLD("HDR",0,1,0,"Requesting Facility: "_$E(GMRCFAC,1,22))
"RTN","GMRCP5D",145,0)
 I $P(GMRCRD,U,11) D BLD("HDR",0,0,45,"|ATTENTION: "_$E($P($G(^VA(200,+$P(GMRCRD,U,11),0)),U,1),1,21))
"RTN","GMRCP5D",146,0)
 I $P(GMRCRD,U,23) D
"RTN","GMRCP5D",147,0)
 . D BLD("HDR",0,1,0,"Remote Consult No.: "_GMRCINO)
"RTN","GMRCP5D",148,0)
 . D BLD("HDR",0,1,0,"Role: "_GMRCIRL)
"RTN","GMRCP5D",149,0)
 D BLD("HDR",0,1,0,GMRCEQL)
"RTN","GMRCP5D",150,0)
 ;
"RTN","GMRCP5D",151,0)
 Q
"RTN","GMRCP5D",152,0)
 ;
"RTN","GMRCP5D",153,0)
CENTER(X) ;
"RTN","GMRCP5D",154,0)
 ;
"RTN","GMRCP5D",155,0)
 N TEXT,COL
"RTN","GMRCP5D",156,0)
 S COL=35-($L(X)\2) Q:(COL<1) X
"RTN","GMRCP5D",157,0)
 S $E(TEXT,COL)=X
"RTN","GMRCP5D",158,0)
 Q TEXT
"RTN","GMRCP5D",159,0)
 ;
"RTN","GMRCP5D",160,0)
BLD(SUB,NDX,LINE,TAB,TEXT,RUNTIME) ;
"RTN","GMRCP5D",161,0)
 ;
"RTN","GMRCP5D",162,0)
 Q:'$L($G(SUB))
"RTN","GMRCP5D",163,0)
 N LINECNT
"RTN","GMRCP5D",164,0)
 ;
"RTN","GMRCP5D",165,0)
 F LINECNT=1:1:+LINE S ^TMP("GMRC",$J,"OUTPUT",SUB,NDX,$$LASTLN(SUB,NDX)+1,0)=""
"RTN","GMRCP5D",166,0)
 ;
"RTN","GMRCP5D",167,0)
 S $E(^TMP("GMRC",$J,"OUTPUT",SUB,NDX,$$LASTLN(SUB,NDX),0),TAB+1)=TEXT
"RTN","GMRCP5D",168,0)
 I $L($G(RUNTIME)) S ^TMP("GMRC",$J,"OUTPUT",SUB,NDX,$$LASTLN(SUB,NDX),1)=RUNTIME
"RTN","GMRCP5D",169,0)
 ;
"RTN","GMRCP5D",170,0)
 S GMRCLAST=SUB
"RTN","GMRCP5D",171,0)
 Q
"RTN","GMRCP5D",172,0)
 ;
"RTN","GMRCP5D",173,0)
SUB(ZONE,SUB,NDX,TEXT) ;
"RTN","GMRCP5D",174,0)
 ;
"RTN","GMRCP5D",175,0)
 N NEXT
"RTN","GMRCP5D",176,0)
 S NEXT=$O(^TMP("GMRC",$J,"OUTPUT",SUB,NDX,ZONE," "),-1)+1
"RTN","GMRCP5D",177,0)
 S ^TMP("GMRC",$J,"OUTPUT",SUB,NDX,ZONE,NEXT,0)=TEXT
"RTN","GMRCP5D",178,0)
 Q
"RTN","GMRCP5D",179,0)
 ;
"RTN","GMRCP5D",180,0)
LASTLN(SUB,NDX) ;
"RTN","GMRCP5D",181,0)
 Q +$O(^TMP("GMRC",$J,"OUTPUT",SUB,NDX," "),-1)
"RTN","GMRCP5D",182,0)
 ;
"RTN","GMRCP5D",183,0)
CONSRQ(IFN) ;
"RTN","GMRCP5D",184,0)
 ;
"RTN","GMRCP5D",185,0)
 N PTR,LINK,REF,GMRCRQ
"RTN","GMRCP5D",186,0)
 I +$P(^GMR(123,+IFN,0),U,8) D
"RTN","GMRCP5D",187,0)
 . S GMRCRQ=$P(^GMR(123,+IFN,0),U,8)
"RTN","GMRCP5D",188,0)
 . S GMRCRQ=$$GET1^DIQ(123.3,+GMRCRQ,.01)
"RTN","GMRCP5D",189,0)
 . I '$L(GMRCRQ) S GMRCRQ="Procedure"
"RTN","GMRCP5D",190,0)
 I $L($G(GMRCRQ)) Q GMRCRQ
"RTN","GMRCP5D",191,0)
 I $L($G(^GMR(123,IFN,1.11))) D
"RTN","GMRCP5D",192,0)
 . N SERV,TYPE
"RTN","GMRCP5D",193,0)
 . S SERV=$$UP^XLFSTR($$GET1^DIQ(123.5,$P(^GMR(123,IFN,0),U,5),.01))
"RTN","GMRCP5D",194,0)
 . S TYPE=$$UP^XLFSTR(^GMR(123,IFN,1.11)) I TYPE'=SERV D
"RTN","GMRCP5D",195,0)
 . I TYPE'=SERV S GMRCRQ=$E(^GMR(123,IFN,1.11),1,36)
"RTN","GMRCP5D",196,0)
 Q:$L($G(GMRCRQ)) GMRCRQ Q "Consult"
"RTN","GMRCP5D",197,0)
 ;
"RTN","GMRCP5D",198,0)
EXDT(X) ;EXTERNAL DATE FORMAT
"RTN","GMRCP5D",199,0)
 ;
"RTN","GMRCP5D",200,0)
 N DATE,TIME,HR,MN,PD,Y,%DT
"RTN","GMRCP5D",201,0)
 Q:'$L(X) ""
"RTN","GMRCP5D",202,0)
 I '(X?7N.1".".6N) S %DT="PTS" D ^%DT S X=Y
"RTN","GMRCP5D",203,0)
 Q $$FMTE^XLFDT(X,"5PMZ")
"RTN","GMRCP5D",204,0)
 ;
"VER")
8.0^22
"^DD",123,123,0)
FIELD^^51^37
"^DD",123,123,0,"DDA")
N
"^DD",123,123,0,"DT")
2981103
"^DD",123,123,0,"ID",.02)
S %I=Y,Y=$S('$D(^(0)):"",$D(^DPT(+$P(^(0),U,2),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(2,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I
"^DD",123,123,0,"IX","AC",123,.03)

"^DD",123,123,0,"IX","AD",123,.02)

"^DD",123,123,0,"IX","AD1",123,3)

"^DD",123,123,0,"IX","AE",123,1)

"^DD",123,123,0,"IX","AE1",123,3)

"^DD",123,123,0,"IX","AE2",123,8)

"^DD",123,123,0,"IX","AIP",123,.126)

"^DD",123,123,0,"IX","AL",123,.04)

"^DD",123,123,0,"IX","AP",123,4)

"^DD",123,123,0,"IX","B",123,.01)

"^DD",123,123,0,"IX","C",123,1)

"^DD",123,123,0,"IX","D",123,8)

"^DD",123,123,0,"IX","E",123,3)

"^DD",123,123,0,"IX","F",123,.02)

"^DD",123,123,0,"IX","G",123,10)

"^DD",123,123,0,"IX","H",123,2)

"^DD",123,123,0,"IX","R",123.03,.01)

"^DD",123,123,0,"NM","REQUEST/CONSULTATION")

"^DD",123,123,0,"PT",660,8.9)

"^DD",123,123,0,"PT",668,20)

"^DD",123,123,0,"PT",691,1001)

"^DD",123,123,0,"PT",691.1,1001)

"^DD",123,123,0,"PT",691.5,1001)

"^DD",123,123,0,"PT",691.6,1001)

"^DD",123,123,0,"PT",691.7,1001)

"^DD",123,123,0,"PT",691.8,1001)

"^DD",123,123,0,"PT",694,1001)

"^DD",123,123,0,"PT",698,1001)

"^DD",123,123,0,"PT",698.1,1001)

"^DD",123,123,0,"PT",698.2,1001)

"^DD",123,123,0,"PT",698.3,1001)

"^DD",123,123,0,"PT",699,1001)

"^DD",123,123,0,"PT",699.5,1001)

"^DD",123,123,0,"PT",700,1001)

"^DD",123,123,0,"PT",701,1001)

"^DD",123,123,0,"PT",8925,1405)

"^DD",123,123,0,"VRPK")
GMRC
"^DD",123,123,.001,0)
NUMBER^NJ8,0^^ ^K:+X'=X!(X>99999999)!(X<0)!(X?.E1"."1N.N) X
"^DD",123,123,.001,3)
Type a Number between 0 and 99999999, 0 Decimal Digits
"^DD",123,123,.001,"DT")
2910604
"^DD",123,123,.01,0)
FILE ENTRY DATE^RDX^^0;1^S %DT="ETXR" D ^%DT S X=$P($H,",",2),Y=Y_"."_$E(0,1,2-$L(X\3600))_(X\3600)_$E(0,1,2-$L(X#3600\60))_(X#3600\60)_$E(0,1,2-$L(X#60))_(X#60),Y=+Y,X=Y K:Y<1 X
"^DD",123,123,.01,1,0)
^.1
"^DD",123,123,.01,1,1,0)
123^B
"^DD",123,123,.01,1,1,1)
S ^GMR(123,"B",$E(X,1,30),DA)=""
"^DD",123,123,.01,1,1,2)
K ^GMR(123,"B",$E(X,1,30),DA)
"^DD",123,123,.01,3)
This is the date/time of the entry of the consultation/request.
"^DD",123,123,.01,21,0)
^^2^2^2970911^^^^
"^DD",123,123,.01,21,1,0)
Date of actual entry of consultation request into the file.
"^DD",123,123,.01,21,2,0)
Transparent to user.
"^DD",123,123,.02,0)
PATIENT NAME^RP2'^DPT(^0;2^Q
"^DD",123,123,.02,1,0)
^.1^^-1
"^DD",123,123,.02,1,1,0)
123^AD^MUMPS
"^DD",123,123,.02,1,1,1)
I $P(^GMR(123,DA,0),"^",7) S GMRCD=9999999-$P(^GMR(123,DA,0),"^",7),^GMR(123,"AD",X,GMRCD,DA)="" K GMRCD
"^DD",123,123,.02,1,1,2)
I $P(^GMR(123,DA,0),"^",7) S GMRCD=9999999-$P(^GMR(123,DA,0),"^",7) K ^GMR(123,"AD",X,GMRCD,DA),GMRCD
"^DD",123,123,.02,1,1,"%D",0)
^^2^2^2910715^^
"^DD",123,123,.02,1,1,"%D",1,0)
The "AD" cross-reference allows look up of patient consults in reverse
"^DD",123,123,.02,1,1,"%D",2,0)
chronological "DATE OF REQUEST" order.
"^DD",123,123,.02,1,1,"DT")
2910715
"^DD",123,123,.02,1,3,0)
123^F
"^DD",123,123,.02,1,3,1)
S ^GMR(123,"F",$E(X,1,30),DA)=""
"^DD",123,123,.02,1,3,2)
K ^GMR(123,"F",$E(X,1,30),DA)
"^DD",123,123,.02,1,3,"DT")
2920204
"^DD",123,123,.02,3)
Enter the name of a patient or the last 4 digits of the SSN.
"^DD",123,123,.02,21,0)
^^2^2^2981103^^^^
"^DD",123,123,.02,21,1,0)
This is the Patient who the consult or request was ordered for.
"^DD",123,123,.02,21,2,0)
Enter the patient's name, or the last four digits of the SSN.
"^DD",123,123,.02,"DT")
3011008
"^DD",123,123,.03,0)
OE/RR FILE NUMBER^P100'^OR(100,^0;3^Q
"^DD",123,123,.03,1,0)
^.1
"^DD",123,123,.03,1,1,0)
123^AC
"^DD",123,123,.03,1,1,1)
S ^GMR(123,"AC",$E(X,1,30),DA)=""
"^DD",123,123,.03,1,1,2)
K ^GMR(123,"AC",$E(X,1,30),DA)
"^DD",123,123,.03,1,1,"%D",0)
^^2^2^2910927^^
"^DD",123,123,.03,1,1,"%D",1,0)
This cross-reference allows determining the request entry in 123 based on
"^DD",123,123,.03,1,1,"%D",2,0)
the ORIFN from OE/RR.
"^DD",123,123,.03,1,1,"DT")
2910826
"^DD",123,123,.03,3)
Enter the File 100 internal entry number of this record.
"^DD",123,123,.03,21,0)
^^3^3^2981103^^^^
"^DD",123,123,.03,21,1,0)
This is the internal entry number of the order in the Orders File (100).
"^DD",123,123,.03,21,2,0)
The consult sends CPRS information about the consult which is stored in
"^DD",123,123,.03,21,3,0)
File 100. This is the IEN of the consult in that file.
"^DD",123,123,.03,"DT")
2981103
"^DD",123,123,.04,0)
PATIENT LOCATION^P44'^SC(^0;4^Q
"^DD",123,123,.04,1,0)
^.1
"^DD",123,123,.04,1,1,0)
123^AL
"^DD",123,123,.04,1,1,1)
S ^GMR(123,"AL",$E(X,1,30),DA)=""
"^DD",123,123,.04,1,1,2)
K ^GMR(123,"AL",$E(X,1,30),DA)
"^DD",123,123,.04,1,1,"DT")
3011015
"^DD",123,123,.04,3)
Enter the Hospital Location of this patient.
"^DD",123,123,.04,21,0)
^^2^2^2970911^^^
"^DD",123,123,.04,21,1,0)
This is the location of the patient when the consult/request order was
"^DD",123,123,.04,21,2,0)
placed.
"^DD",123,123,.04,"DT")
3011015
"^DD",123,123,.05,0)
ORDERING FACILITY^P4'^DIC(4,^0;21^Q
"^DD",123,123,.05,3)
If this is a consult/request sent to another Institution, then this is the SENDING hospital/institution.
"^DD",123,123,.05,21,0)
^^5^5^2970911^^^^
"^DD",123,123,.05,21,1,0)
This field contains the number, from file 4, of the institution/hospital
"^DD",123,123,.05,21,2,0)
that is requesting the consult.  This field is mandatory if the consult/
"^DD",123,123,.05,21,3,0)
request is being sent to another hospital/institution, so that routing
"^DD",123,123,.05,21,4,0)
information can be obtained in order to return the results to the sending
"^DD",123,123,.05,21,5,0)
hospital/institution.
"^DD",123,123,.05,"DT")
2960502
"^DD",123,123,.06,0)
REMOTE CONSULT FILE ENTRY^NJ12,0^^0;22^K:+X'=X!(X>999999999999)!(X<1)!(X?.E1"."1.N) X
"^DD",123,123,.06,3)
Type a number between 1 and 999999999999, 0 Decimal Digits
"^DD",123,123,.06,21,0)
^^6^6^3011127^
"^DD",123,123,.06,21,1,0)
This is the ^GMR(123, file number of the consult from a foreign database.
"^DD",123,123,.06,21,2,0)
It is stored here so that when the consult is returned in an HL7
"^DD",123,123,.06,21,3,0)
message, it can be located at the sending facility.  Also, if the sending
"^DD",123,123,.06,21,4,0)
facility needs to send updated consult information to the receiving
"^DD",123,123,.06,21,5,0)
facility, this number will reference the consult number there so that
"^DD",123,123,.06,21,6,0)
the data can be added/ammended and tracking information can be updated.
"^DD",123,123,.06,"DT")
3011203
"^DD",123,123,.07,0)
ROUTING FACILITY^P4'^DIC(4,^0;23^Q
"^DD",123,123,.07,3)
Enter the institution for routing updates
"^DD",123,123,.07,21,0)
^^3^3^3010712^
"^DD",123,123,.07,21,1,0)
This field will contain the INSTITUTION to which communications and
"^DD",123,123,.07,21,2,0)
updates regarding this request will be routed.  If the request is being
"^DD",123,123,.07,21,3,0)
requested and performed locally, this field will be blank. 
"^DD",123,123,.07,"DT")
3011203
"^DD",123,123,.1,0)
DISPLAY TEXT OF ITEM ORDERED^F^^1.11;1^K:$L(X)>80!($L(X)<1) X
"^DD",123,123,.1,3)
Enter the display text the user selected to place the order.
"^DD",123,123,.1,21,0)
^^4^4^2990603^^^
"^DD",123,123,.1,21,1,0)
This is the display text of the item ordered.  If the order was placed
"^DD",123,123,.1,21,2,0)
using a quick order, then the Display text is the text from the Order
"^DD",123,123,.1,21,3,0)
Dialog File.  If the order was placed by selecting an Orderable Item, 
"^DD",123,123,.1,21,4,0)
then the text is the Print Name from the Orderable Item file.
"^DD",123,123,.1,"DT")
2980712
"^DD",123,123,.125,0)
IFC ROLE^S^P:PLACER;F:FILLER;^12;5^Q
"^DD",123,123,.125,21,0)
^^9^9^3010713^
"^DD",123,123,.125,21,1,0)
This field will define the role of the particular VistA system in the
"^DD",123,123,.125,21,2,0)
fullfillment of the inter-facility consult. This facilitates proper
"^DD",123,123,.125,21,3,0)
HL7 message formats.
"^DD",123,123,.125,21,4,0)
 
"^DD",123,123,.125,21,5,0)
PLACER indicates that this VistA system originated and ordered this
"^DD",123,123,.125,21,6,0)
request. 
"^DD",123,123,.125,21,7,0)
 
"^DD",123,123,.125,21,8,0)
FILLER indicates that this request was generated at the institution in the
"^DD",123,123,.125,21,9,0)
ORDERING FACILITY field.
"^DD",123,123,.125,"DT")
3010713
"^DD",123,123,.126,0)
REMOTE ORDERING PROVIDER^F^^12;6^K:$L(X)>40!($L(X)<2) X
"^DD",123,123,.126,1,0)
^.1
"^DD",123,123,.126,1,1,0)
123^AIP^MUMPS
"^DD",123,123,.126,1,1,1)
S ^GMR(123,"AIP",$E(X,1,40),DA)=""
"^DD",123,123,.126,1,1,2)
K ^GMR(123,"AIP",$E(X,1,40),DA)
"^DD",123,123,.126,1,1,"DT")
3020201
"^DD",123,123,.126,3)
Answer must be 2-40 characters in length
"^DD",123,123,.126,21,0)
^^3^3^3020204^
"^DD",123,123,.126,21,1,0)
This field contains the name of the requesting provider of an 
"^DD",123,123,.126,21,2,0)
inter-facility consult. This field is only defined on an inter-facility 
"^DD",123,123,.126,21,3,0)
consult on file at a consulting site. 
"^DD",123,123,.126,"DT")
3020204
"^DD",123,123,.131,0)
IFC REMOTE SERVICE NAME^F^^13;1^K:$L(X)>63!($L(X)<3) X
"^DD",123,123,.131,3)
Answer must be 3-63 characters in length.
"^DD",123,123,.131,21,0)
^^2^2^3011106^
"^DD",123,123,.131,21,1,0)
This field holds the name of the service that will perform the Inter-
"^DD",123,123,.131,21,2,0)
facility Consult at the remote facility. 
"^DD",123,123,.131,"DT")
3011107
"^DD",123,123,.132,0)
REMOTE REQUESTOR PHONE^F^^13;2^K:$L(X)>20!($L(X)<1) X
"^DD",123,123,.132,3)
Answer must be 1-20 characters in length
"^DD",123,123,.132,21,0)
^^5^5^3011220^
"^DD",123,123,.132,21,1,0)
This field will contain the telephone number of the remote requestor of 
"^DD",123,123,.132,21,2,0)
an inter-facility consult. This will be displayed with the consult and 
"^DD",123,123,.132,21,3,0)
can expedite communication between requesting provider and consultant.
"^DD",123,123,.132,21,4,0)
 
"^DD",123,123,.132,21,5,0)
This field is derived from the OFFICE PHONE field of the NEW PERSON file. 
"^DD",123,123,.132,"DT")
3011220
"^DD",123,123,.133,0)
REMOTE REQUESTOR DIG PAGER^F^^13;3^K:$L(X)>20!($L(X)<1) X
"^DD",123,123,.133,3)
Answer must be 1-20 characters in length
"^DD",123,123,.133,21,0)
^^6^6^3011220^
"^DD",123,123,.133,21,1,0)
This field contains the digital pager number of a remote requesting 
"^DD",123,123,.133,21,2,0)
provider if this is an inter-facility consult.  This may expedite 
"^DD",123,123,.133,21,3,0)
communication between the requesting provider and the consultant. 
"^DD",123,123,.133,21,4,0)
 
"^DD",123,123,.133,21,5,0)
This data in this field is derived from the DIGITAL PAGER field of the 
"^DD",123,123,.133,21,6,0)
NEW PERSON file. 
"^DD",123,123,.133,"DT")
3011220
"^DD",123,123,1,0)
TO SERVICE^RP123.5^GMR(123.5,^0;5^Q
"^DD",123,123,1,1,0)
^.1
"^DD",123,123,1,1,1,0)
123^C
"^DD",123,123,1,1,1,1)
S ^GMR(123,"C",$E(X,1,30),DA)=""
"^DD",123,123,1,1,1,2)
K ^GMR(123,"C",$E(X,1,30),DA)
"^DD",123,123,1,1,1,"%D",0)
^^2^2^2920129^
"^DD",123,123,1,1,1,"%D",1,0)
This cross reference allows searching for all consults/requests by specific
"^DD",123,123,1,1,1,"%D",2,0)
service/specialty.
"^DD",123,123,1,1,1,"DT")
2920129
"^DD",123,123,1,1,2,0)
123^AE^MUMPS
"^DD",123,123,1,1,2,1)
I $P(^GMR(123,DA,0),"^",12),$P(^GMR(123,DA,0),"^",7) S GMRCD=9999999-$P(^GMR(123,DA,0),"^",7),^GMR(123,"AE",X,$P(^GMR(123,DA,0),"^",12),GMRCD,DA)=""
"^DD",123,123,1,1,2,2)
I $P(^GMR(123,DA,0),"^",12),$P(^GMR(123,DA,0),"^",7) S GMRCD=9999999-$P(^GMR(123,DA,0),"^",7) K ^GMR(123,"AE",X,$P(^GMR(123,DA,0),"^",12),GMRCD,DA),GMRCD
"^DD",123,123,1,1,2,"%D",0)
^^2^2^2920218^^^^
"^DD",123,123,1,1,2,"%D",1,0)
This cross-reference allows lookup by Service, OE/RR status, and Date of 
"^DD",123,123,1,1,2,"%D",2,0)
Request.
"^DD",123,123,1,1,2,"DT")
2920218
"^DD",123,123,1,3)
Enter the name of the service that will complete the consult.
"^DD",123,123,1,21,0)
^^2^2^2970911^^^^
"^DD",123,123,1,21,1,0)
This is the "TO" service/specialty.  This service is responsible for
"^DD",123,123,1,21,2,0)
completion of the consult/request.
"^DD",123,123,1,"DT")
2920515
"^DD",123,123,1.01,0)
CLINICAL PROCEDURE^P702.01'^MDS(702.01,^1;1^Q
"^DD",123,123,1.01,1,0)
^.1^^0
"^DD",123,123,1.01,3)
Enter a CP DEFINITION
"^DD",123,123,1.01,21,0)
^^2^2^3011004^
"^DD",123,123,1.01,21,1,0)
This field contains the CP DEFINITION that is associated with this 
"^DD",123,123,1.01,21,2,0)
request.
"^DD",123,123,1.01,"DT")
3011008
"^DD",123,123,2,0)
FROM^P44'^SC(^0;6^Q
"^DD",123,123,2,1,0)
^.1
"^DD",123,123,2,1,1,0)
123^H
"^DD",123,123,2,1,1,1)
S ^GMR(123,"H",$E(X,1,30),DA)=""
"^DD",123,123,2,1,1,2)
K ^GMR(123,"H",$E(X,1,30),DA)
"^DD",123,123,2,1,1,"%D",0)
^^2^2^2980712^
"^DD",123,123,2,1,1,"%D",1,0)
This cross-reference allows the location that sent the consult to track
"^DD",123,123,2,1,1,"%D",2,0)
what happened to their consults.
"^DD",123,123,2,1,1,"DT")
2980712
"^DD",123,123,2,3)
Enter the hospital location that is sending the order.
"^DD",123,123,2,21,0)
^^2^2^2970911^^^^
"^DD",123,123,2,21,1,0)
This field represents the location that sent the order to the receiving 
"^DD",123,123,2,21,2,0)
location.
"^DD",123,123,2,"DT")
2980712
"^DD",123,123,3,0)
DATE OF REQUEST^RD^^0;7^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",123,123,3,1,0)
^.1
"^DD",123,123,3,1,1,0)
123^AE1^MUMPS
"^DD",123,123,3,1,1,1)
I $P(^GMR(123,DA,0),"^",12),$P(^GMR(123,DA,0),"^",5) S GMRCD=9999999-X,^GMR(123,"AE",$P(^GMR(123,DA,0),"^",5),$P(^GMR(123,DA,0),"^",12),GMRCD,DA)="" K GMRCD
"^DD",123,123,3,1,1,2)
I $P(^GMR(123,DA,0),"^",12),$P(^GMR(123,DA,0),"^",5) S GMRCD=9999999-X K ^GMR(123,"AE",$P(^GMR(123,DA,0),"^",5),$P(^GMR(123,DA,0),"^",12),GMRCD,DA),GMRCD
"^DD",123,123,3,1,1,"%D",0)
^^2^2^2920218^
"^DD",123,123,3,1,1,"%D",1,0)
This cross reference provides lookup on consults by Service, OE/RR status
"^DD",123,123,3,1,1,"%D",2,0)
and Inverted Date of Request.
"^DD",123,123,3,1,1,"DT")
2920218
"^DD",123,123,3,1,2,0)
123^AD1^MUMPS
"^DD",123,123,3,1,2,1)
I $P(^GMR(123,DA,0),"^",2) S ^GMR(123,"AD",$P(^GMR(123,DA,0),"^",2),9999999-X,DA)=""
"^DD",123,123,3,1,2,2)
I $P(^GMR(123,DA,0),"^",2) K ^GMR(123,"AD",$P(^GMR(123,DA,0),"^",2),9999999-X,DA)
"^DD",123,123,3,1,2,"%D",0)
^^1^1^2911217^
"^DD",123,123,3,1,2,"%D",1,0)
This cross-reference provides consults by patient by inverted order date.
"^DD",123,123,3,1,2,"DT")
2911217
"^DD",123,123,3,1,3,0)
123^E
"^DD",123,123,3,1,3,1)
S ^GMR(123,"E",$E(X,1,30),DA)=""
"^DD",123,123,3,1,3,2)
K ^GMR(123,"E",$E(X,1,30),DA)
"^DD",123,123,3,1,3,"%D",0)
^^1^1^2920129^
"^DD",123,123,3,1,3,"%D",1,0)
This cross reference allows searching for consults based on Date of Request.
"^DD",123,123,3,1,3,"DT")
2920129
"^DD",123,123,3,3)
Enter the date/time this order was released from CPRS.
"^DD",123,123,3,21,0)
^^3^3^2970911^^^^
"^DD",123,123,3,21,1,0)
This is the date and time the order was released from OE/RR.
"^DD",123,123,3,21,2,0)
If the TO service entered the order stub through the Add Order (AD)
"^DD",123,123,3,21,3,0)
action, this is the service-specified request date.
"^DD",123,123,3,"DT")
2920218
"^DD",123,123,4,0)
PROCEDURE/REQUEST TYPE^V^^0;8^Q
"^DD",123,123,4,1,0)
^.1
"^DD",123,123,4,1,1,0)
123^AP
"^DD",123,123,4,1,1,1)
S ^GMR(123,"AP",$E(X,1,30),DA)=""
"^DD",123,123,4,1,1,2)
K ^GMR(123,"AP",$E(X,1,30),DA)
"^DD",123,123,4,1,1,"DT")
3011015
"^DD",123,123,4,3)
Enter the type of procedure being requested (e.g., EKG, UGI, etc.).
"^DD",123,123,4,21,0)
^^1^1^3010110^
"^DD",123,123,4,21,1,0)
This is the procedure that was requested via CPRS while ordering.
"^DD",123,123,4,"DT")
3011015
"^DD",123,123,4,"V",0)
^.12P^2^2
"^DD",123,123,4,"V",1,0)
101^Enter Order Item^1^O^n^n
"^DD",123,123,4,"V",2,0)
123.3^Consult Procedure^2^PROC^n^n
"^DD",123,123,5,0)
URGENCY^P101'^ORD(101,^0;9^Q
"^DD",123,123,5,3)
Enter the urgency for this order (STAT, ROUTINE, NEXT AVAILABLE, EMERGENCY, TODAY, WITHIN 24 HOURS, WITHIN 48 HOURS, WITHIN 72 HOURS, etc.)
"^DD",123,123,5,21,0)
^^4^4^2970911^^^^
"^DD",123,123,5,21,1,0)
This field describes the urgency of the consult. Urgencies are sent in the
"^DD",123,123,5,21,2,0)
PROTOCOL File (#101) as: STAT, EMERGENCY, INPATIENT, NEXT AVAILABLE, NOW,
"^DD",123,123,5,21,3,0)
ROUTINE, TODAY, WITHIN 24 HOURS, WITHIN 48 HOURS, WITHIN 72 HOURS,
"^DD",123,123,5,21,4,0)
WITHIN 1 WEEK, WITHIN 1 MONTH. 
"^DD",123,123,5,"DT")
2970709
"^DD",123,123,6,0)
PLACE OF CONSULTATION^P101'^ORD(101,^0;10^Q
"^DD",123,123,6,3)
Type The Place Of Consultation: Bedside, Consultant's Choice, On Call, Emergency Room, EKG Lab.
"^DD",123,123,6,21,0)
^^7^7^2981112^^^^
"^DD",123,123,6,21,1,0)
This is the place where the consultation will take place.  Choose from:
"^DD",123,123,6,21,2,0)

"^DD",123,123,6,21,3,0)
    B - Bedside
"^DD",123,123,6,21,4,0)
    C - Consultant's Choice
"^DD",123,123,6,21,5,0)
    E - Emergency Room
"^DD",123,123,6,21,6,0)
    O - On Call
"^DD",123,123,6,21,7,0)
    EKG - EKG Lab
"^DD",123,123,6,"DT")
2970611
"^DD",123,123,7,0)
ATTENTION^P200'^VA(200,^0;11^Q
"^DD",123,123,7,3)
Enter the name of the Consult Service provider to be alerted about the consult.
"^DD",123,123,7,21,0)
^^4^4^2970911^^^^
"^DD",123,123,7,21,1,0)
Enter the name of a person you would like to alert about the consult.
"^DD",123,123,7,21,2,0)
This person will be sent a notification that a new consult exists.
"^DD",123,123,7,21,3,0)
In order for the person to see this type of notification, the person
"^DD",123,123,7,21,4,0)
must be set up to receive "New service consult" notifications.
"^DD",123,123,7,"DT")
2910605
"^DD",123,123,8,0)
CPRS STATUS^P100.01'^ORD(100.01,^0;12^Q
"^DD",123,123,8,1,0)
^.1
"^DD",123,123,8,1,1,0)
123^D
"^DD",123,123,8,1,1,1)
S ^GMR(123,"D",$E(X,1,30),DA)=""
"^DD",123,123,8,1,1,2)
K ^GMR(123,"D",$E(X,1,30),DA)
"^DD",123,123,8,1,1,"%D",0)
^^1^1^2920129^
"^DD",123,123,8,1,1,"%D",1,0)
This cross-reference allows searching based on the OE/RR status.
"^DD",123,123,8,1,1,"DT")
2920129
"^DD",123,123,8,1,2,0)
123^AE2^MUMPS
"^DD",123,123,8,1,2,1)
I $P(^GMR(123,DA,0),"^",7),$P(^GMR(123,DA,0),"^",5) S GMRCD=9999999-$P(^GMR(123,DA,0),"^",7),^GMR(123,"AE",$P(^GMR(123,DA,0),"^",5),X,GMRCD,DA)="" K GMRCD
"^DD",123,123,8,1,2,2)
I $P(^GMR(123,DA,0),"^",7),$P(^GMR(123,DA,0),"^",5) S GMRCD=9999999-$P(^GMR(123,DA,0),"^",7) K ^GMR(123,"AE",$P(^GMR(123,DA,0),"^",5),X,GMRCD,DA),GMRCD
"^DD",123,123,8,1,2,"%D",0)
^^2^2^2971118^^
"^DD",123,123,8,1,2,"%D",1,0)
This cross reference is used for services to see all consults by service,
"^DD",123,123,8,1,2,"%D",2,0)
OE/RR status and Date of Request.
"^DD",123,123,8,1,2,"DT")
2920218
"^DD",123,123,8,3)
Enter the CPRS STATUS of this consult (e.g., pending, active, complete, etc.).
"^DD",123,123,8,21,0)
^^3^3^2970911^^^
"^DD",123,123,8,21,1,0)
This is the current CPRS status of the consult or request order.
"^DD",123,123,8,21,2,0)
The Action Types which may be taken from the "Select Action: " prompt
"^DD",123,123,8,21,3,0)
update the status in this file as well as in the Orders File (100).
"^DD",123,123,8,"DT")
2970911
"^DD",123,123,9,0)
LAST ACTION TAKEN^P123.1'^GMR(123.1,^0;13^Q
"^DD",123,123,9,3)
Enter the last action taken on the consult (From file 123.1).
"^DD",123,123,9,21,0)
^^2^2^2970911^^^
"^DD",123,123,9,21,1,0)
This is the last Action Type taken that updated the activity tracking
"^DD",123,123,9,21,2,0)
audit trail.
"^DD",123,123,9,"DT")
2911206
"^DD",123,123,10,0)
SENDING PROVIDER^P200'^VA(200,^0;14^Q
"^DD",123,123,10,1,0)
^.1
"^DD",123,123,10,1,1,0)
123^G
"^DD",123,123,10,1,1,1)
S ^GMR(123,"G",$E(X,1,30),DA)=""
"^DD",123,123,10,1,1,2)
K ^GMR(123,"G",$E(X,1,30),DA)
"^DD",123,123,10,1,1,"%D",0)
^^1^1^2980616^^
"^DD",123,123,10,1,1,"%D",1,0)
This index allows look-up of consults by sending provider. 
"^DD",123,123,10,1,1,"DT")
2980616
"^DD",123,123,10,3)
Enter the name of the Ordering Provider.
"^DD",123,123,10,21,0)
^^1^1^2970911^^^^
"^DD",123,123,10,21,1,0)
This is the provider who originated the order.
"^DD",123,123,10,"DT")
3011212
"^DD",123,123,11,0)
RESULT^V^^0;15^Q
"^DD",123,123,11,3)
Enter the record number for the result in the MEDICINE PACKAGE that contains the results for this consult.
"^DD",123,123,11,21,0)
^^3^3^2970911^^^^
"^DD",123,123,11,21,1,0)
This is a variable pointer used by the GMRC MEDICINE PKG INTERFACE option
"^DD",123,123,11,21,2,0)
to associate results in the Medicine Procedure Files with a consult/request
"^DD",123,123,11,21,3,0)
order.
"^DD",123,123,11,"DT")
2911206
"^DD",123,123,11,"V",0)
^.12P^15^14
"^DD",123,123,11,"V",2,0)
691^Select ECHO report^2^ECHO
"^DD",123,123,11,"V",3,0)
691.1^Select CATH report^3^CATH
"^DD",123,123,11,"V",4,0)
691.5^Select ECG report^4^ECG^n^n
"^DD",123,123,11,"V",5,0)
691.6^Select HOLTER result^5^HOLTER^n^n
"^DD",123,123,11,"V",6,0)
691.7^Select ETT report^6^ETT^n^n
"^DD",123,123,11,"V",7,0)
691.8^Select EP report^7^EP^n^n
"^DD",123,123,11,"V",8,0)
694^Select HEM report^8^HEM^n^n
"^DD",123,123,11,"V",9,0)
698^Select GEN IMP report^9^G^n^n
"^DD",123,123,11,"V",10,0)
698.1^Select V LEAD IMPLANT^10^V^n^n
"^DD",123,123,11,"V",11,0)
698.2^Select A LEAD IMPLANT^11^A^n^n
"^DD",123,123,11,"V",12,0)
698.3^Select SURVEILLANCE report^12^PS^n^n
"^DD",123,123,11,"V",13,0)
699^Select ENDOSCOPY report^13^ENDO^n^n
"^DD",123,123,11,"V",14,0)
700^Select PFT report^14^PFT^n^n
"^DD",123,123,11,"V",15,0)
701^Select RHEUMATOLOGY report^15^RHEUM^n^n
"^DD",123,123,12,0)
MODE OF ENTRY^S^1:SERVICE FORCED ENTRY;^0;16^Q
"^DD",123,123,12,3)
Enter '1' if this is a service-entered consult.
"^DD",123,123,12,21,0)
^^4^4^2980425^^^^
"^DD",123,123,12,21,1,0)
When a consult or request is entered by the service, rather than through
"^DD",123,123,12,21,2,0)
CPRS order processing, this field will be set to "1" to indicate the
"^DD",123,123,12,21,3,0)
Service forced the entry.  This forcing means there is no electronic
"^DD",123,123,12,21,4,0)
signature related to the order.
"^DD",123,123,12,"DT")
2980425
"^DD",123,123,13,0)
REQUEST TYPE^RS^C:Consult;P:Procedure;^0;17^Q
"^DD",123,123,13,3)

"^DD",123,123,13,21,0)
^^3^3^3010110^
"^DD",123,123,13,21,1,0)
This field will indicate whether the order is a consult or procedure
"^DD",123,123,13,21,2,0)
request order.  Based on this fields value, the Consultation Body Header
"^DD",123,123,13,21,3,0)
alters to indicate "Consult Type: " or "Procedure Request: ".
"^DD",123,123,13,"DT")
2991214
"^DD",123,123,14,0)
SERVICE RENDERED AS IN OR OUT^S^I:inpatient;O:outpatient;^0;18^Q
"^DD",123,123,14,3)
Type I if the service is on an inpatient basis, O if outpatient.
"^DD",123,123,14,21,0)
^^4^4^2981112^^^^
"^DD",123,123,14,21,1,0)
This field allows the ordering person to indicate if the service is to
"^DD",123,123,14,21,2,0)
be rendered on an outpatient or inpatient basis.  This is to alleviate
"^DD",123,123,14,21,3,0)
the confusion if patient is currently an inpatient/outpatient but is
"^DD",123,123,14,21,4,0)
just about to be discharged/admitted and become a outpatient/inpatient.
"^DD",123,123,14,"DT")
2910925
"^DD",123,123,15,0)
SIGNIFICANT FINDINGS^S^Y:yes;N:no;U:unknown;^0;19^Q
"^DD",123,123,15,3)
Enter a value to indicate if significant findings are in the results.
"^DD",123,123,15,21,0)
^^4^4^2980423^^
"^DD",123,123,15,21,1,0)
If significant findings are noted in the consult results, then this field
"^DD",123,123,15,21,2,0)
may be marked "Yes", and appropriate comments may be entered in the
"^DD",123,123,15,21,3,0)
"Comment" field. "Unknown" is the default. "No" may also be specified to
"^DD",123,123,15,21,4,0)
indicate the results do not include significant findings.
"^DD",123,123,15,"DT")
2980423
"^DD",123,123,16,0)
TIU RESULT NARRATIVE^P8925'^TIU(8925,^0;20^Q
"^DD",123,123,16,3)
Enter the File 8925 internal entry number where the TIU narrative for this consult is stored.
"^DD",123,123,16,21,0)
^^2^2^2970911^^^^
"^DD",123,123,16,21,1,0)
Pointer to the Text Integration Utilities file (#8925) where consult/request
"^DD",123,123,16,21,2,0)
results narrative is stored.
"^DD",123,123,16,"DT")
2960514
"^DD",123,123,20,0)
REASON FOR REQUEST^123.01^^20;0
"^DD",123,123,20,21,0)
^^1^1^2970915^^^^
"^DD",123,123,20,21,1,0)
This is the reason for requesting the Consult or Procedure Request.
"^DD",123,123,30,0)
PROVISIONAL DIAGNOSIS^F^^30;1^K:$L(X)>180!($L(X)<2) X
"^DD",123,123,30,3)
Enter a Provisional Diagnosis, 2 to 180 characters in length.
"^DD",123,123,30,21,0)
^^2^2^2970911^^^^
"^DD",123,123,30,21,1,0)
This is the Provisional Diagnosis the ordering clinician would specify
"^DD",123,123,30,21,2,0)
on the Consult Form 513.
"^DD",123,123,30,"DT")
2970522
"^DD",123,123,30.1,0)
PROVISIONAL DIAGNOSIS CODE^F^^30.1;1^K:$L(X)>20!($L(X)<2) X
"^DD",123,123,30.1,3)
Answer must be 2-20 characters in length
"^DD",123,123,30.1,21,0)
^^2^2^2991201^
"^DD",123,123,30.1,21,1,0)
This field is used to store the coded portion of the Provisional Diagnosis
"^DD",123,123,30.1,21,2,0)
if an ICD-9 coded diagnosis is sent via CPRS. 
"^DD",123,123,30.1,"DT")
2990924
"^DD",123,123,40,0)
REQUEST PROCESSING ACTIVITY^123.02D^^40;0
"^DD",123,123,40,21,0)
^.001^1^1^3020619^^^^
"^DD",123,123,40,21,1,0)
Maintains history of processing actions.
"^DD",123,123,40,"DT")
3020619
"^DD",123,123,50,0)
ASSOCIATED RESULTS^123.03AV^^50;0
"^DD",123,123,51,0)
REMOTE RESULTS^123.051D^^51;0
"^DD",123,123,51,"DT")
3010730
"^DD",123,123.01,0)
REASON FOR REQUEST SUB-FIELD^^.01^1
"^DD",123,123.01,0,"DT")
2910605
"^DD",123,123.01,0,"NM","REASON FOR REQUEST")

"^DD",123,123.01,0,"UP")
123
"^DD",123,123.01,.01,0)
REASON FOR REQUEST^W^^0;1^Q
"^DD",123,123.01,.01,3)
Enter the reason this consult is being requested.
"^DD",123,123.01,.01,21,0)
^^1^1^2970915^^^^
"^DD",123,123.01,.01,21,1,0)
This is the reason for requesting the Consult or Procedure Request.
"^DD",123,123.01,.01,"DT")
2910605
"^DD",123,123.02,0)
REQUEST PROCESSING ACTIVITY SUB-FIELD^^10^17
"^DD",123,123.02,0,"DT")
2980425
"^DD",123,123.02,0,"IX","B",123.02,.01)

"^DD",123,123.02,0,"NM","REQUEST PROCESSING ACTIVITY")

"^DD",123,123.02,0,"UP")
123
"^DD",123,123.02,.01,0)
DATE/TIME OF ACTION ENTRY^RDX^^0;1^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",123,123.02,.01,.1)
ACTIVITY ENTRY DATE
"^DD",123,123.02,.01,1,0)
^.1
"^DD",123,123.02,.01,1,1,0)
123.02^B
"^DD",123,123.02,.01,1,1,1)
S ^GMR(123,DA(1),40,"B",$E(X,1,30),DA)=""
"^DD",123,123.02,.01,1,1,2)
K ^GMR(123,DA(1),40,"B",$E(X,1,30),DA)
"^DD",123,123.02,.01,3)
Enter the Date/Time you are entering this activity.
"^DD",123,123.02,.01,21,0)
^.001^2^2^3020619^^^
"^DD",123,123.02,.01,21,1,0)
This is the actual date and time the activity tracking update was added
"^DD",123,123.02,.01,21,2,0)
to the REQUEST PROCESSING ACTIVITY multiple.
"^DD",123,123.02,.01,"DT")
3020619
"^DD",123,123.02,.21,0)
REMOTE ENTERING PERSON^F^^2;1^K:$L(X)>64!($L(X)<2) X
"^DD",123,123.02,.21,3)
Answer must be 2-64 characters in length
"^DD",123,123.02,.21,21,0)
^^5^5^3011207^
"^DD",123,123.02,.21,21,1,0)
This is the free text name of the individual that entered this activity 
"^DD",123,123.02,.21,21,2,0)
at the facility referenced in the ROUTING FACILITY field. 
"^DD",123,123.02,.21,21,3,0)
 
"^DD",123,123.02,.21,21,4,0)
This field will only be popluated for activities entered on a remote 
"^DD",123,123.02,.21,21,5,0)
VistA system for an inter-facility consult. 
"^DD",123,123.02,.21,"DT")
3011207
"^DD",123,123.02,.22,0)
REMOTE RESPONSIBLE PERSON^F^^2;2^K:$L(X)>64!($L(X)<2) X
"^DD",123,123.02,.22,3)
Answer must be 2-64 characters in length
"^DD",123,123.02,.22,21,0)
^^5^5^3011207^
"^DD",123,123.02,.22,21,1,0)
This is the free text name of the individual that is responsible for this 
"^DD",123,123.02,.22,21,2,0)
activity at the facility referenced in the ROUTING FACILITY field.
"^DD",123,123.02,.22,21,3,0)
 
"^DD",123,123.02,.22,21,4,0)
This field will only be popluated for activities entered on a remote
"^DD",123,123.02,.22,21,5,0)
VistA system for an inter-facility consult.         
"^DD",123,123.02,.22,"DT")
3011207
"^DD",123,123.02,.23,0)
REMOTE ACTIVITY TIME ZONE^F^^2;3^K:$L(X)>3!($L(X)<3) X
"^DD",123,123.02,.23,3)
Answer must be 3 characters in length
"^DD",123,123.02,.23,21,0)
^^4^4^3011207^
"^DD",123,123.02,.23,21,1,0)
This is the short representation of the time zone in which this activity 
"^DD",123,123.02,.23,21,2,0)
took place.  When an inter-facility consult update message is generated at
"^DD",123,123.02,.23,21,3,0)
a remote facility, the current MAILMAN TIME ZONE at that facility is sent 
"^DD",123,123.02,.23,21,4,0)
with the message and stored in this field.
"^DD",123,123.02,.23,"DT")
3011207
"^DD",123,123.02,.24,0)
REMOTE RESULT^F^^2;4^K:$L(X)>60!($L(X)<2) X
"^DD",123,123.02,.24,3)
Answer must be 2-60 characters in length.
"^DD",123,123.02,.24,21,0)
^^5^5^3011207^
"^DD",123,123.02,.24,21,1,0)
This field will contain a reference to a  result stored on a remote
"^DD",123,123.02,.24,21,2,0)
VistA system. 
"^DD",123,123.02,.24,21,3,0)
 
"^DD",123,123.02,.24,21,4,0)
Result will be in form: 
"^DD",123,123.02,.24,21,5,0)
  ien;source file of result;institution ien where result resides
"^DD",123,123.02,.24,"DT")
3011207
"^DD",123,123.02,.25,0)
REMOTE DATE/TIME OF FILING^D^^2;5^S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
"^DD",123,123.02,.25,3)
Enter the date/time the activity was actually filed at the remote site
"^DD",123,123.02,.25,21,0)
^^4^4^3020323^
"^DD",123,123.02,.25,21,1,0)
This field will hold the date/time this particular activity was filed at 
"^DD",123,123.02,.25,21,2,0)
the remote facility.  This field will be used in conjunction with the 
"^DD",123,123.02,.25,21,3,0)
DATE/TIME OF ACTUAL ACTIVITY field to detect and reject the filing of 
"^DD",123,123.02,.25,21,4,0)
duplicate activities.
"^DD",123,123.02,.25,"DT")
3020323
"^DD",123,123.02,.31,0)
PREVIOUS REMOTE SERVICE NAME^F^^3;1^K:$L(X)>63!($L(X)<3) X
"^DD",123,123.02,.31,3)
Answer must be 3-63 characters in length.
"^DD",123,123.02,.31,21,0)
^^2^2^3011207^
"^DD",123,123.02,.31,21,1,0)
This field holds the name of the service that the inter-facility consult
"^DD",123,123.02,.31,21,2,0)
was was directed to at the remote site prior to being forwarded.
"^DD",123,123.02,.31,"DT")
3011207
"^DD",123,123.02,1,0)
ACTIVITY^P123.1'^GMR(123.1,^0;2^Q
"^DD",123,123.02,1,3)
Enter the activity being updated (From file 123.1)
"^DD",123,123.02,1,21,0)
^^1^1^2970611^^
"^DD",123,123.02,1,21,1,0)
This is the activity that is being updated.
"^DD",123,123.02,1,"DT")
3020307
"^DD",123,123.02,2,0)
DATE/TIME OF ACTUAL ACTIVITY^DX^^0;3^S %DT="ETXS",%DT(0)="-NOW" D ^%DT K %DT(0) S X=Y K:Y<1 X
"^DD",123,123.02,2,.1)

"^DD",123,123.02,2,3)
ENTER BOTH DATE AND TIME.  FUTURE DATE/TIME NOT PERMITTED.
"^DD",123,123.02,2,21,0)
^.001^2^2^3020619^^^^
"^DD",123,123.02,2,21,1,0)
The Date and time the actual activity was done.  This may be different 
"^DD",123,123.02,2,21,2,0)
than the DATE/TIME OF ACTION ENTRY for certain actions.
"^DD",123,123.02,2,"DT")
3020619
"^DD",123,123.02,3,0)
WHO'S RESPONSIBLE FOR ACTIVITY^RP200'^VA(200,^0;4^Q
"^DD",123,123.02,3,3)
Enter the name of the provider responsible for the activity.
"^DD",123,123.02,3,21,0)
^^1^1^2970611^^^^
"^DD",123,123.02,3,21,1,0)
The clinician or service person responsible for the activity.
"^DD",123,123.02,3,"DT")
2920227
"^DD",123,123.02,4,0)
WHO ENTERED ACTIVITY^RP200'^VA(200,^0;5^Q
"^DD",123,123.02,4,"DT")
2910507
"^DD",123,123.02,5,0)
COMMENT^123.25^^1;0
"^DD",123,123.02,5,21,0)
^^2^2^2970611^^^
"^DD",123,123.02,5,21,1,0)
A comment may be added here which would be associated with the Action
"^DD",123,123.02,5,21,2,0)
Type selected at the "Select Action: " prompt.
"^DD",123,123.02,5,"DT")
2910507
"^DD",123,123.02,6,0)
FORWARDED FROM^P123.5'^GMR(123.5,^0;6^Q
"^DD",123,123.02,6,3)
Enter the name of the Hospital Service which is forwarding the consult.
"^DD",123,123.02,6,21,0)
^^2^2^2970611^^^
"^DD",123,123.02,6,21,1,0)
This is the Service which forwarded the Consult to the new TO SERVICE.
"^DD",123,123.02,6,21,2,0)
It is maintained for an audit trail.
"^DD",123,123.02,6,"DT")
2910925
"^DD",123,123.02,7,0)
PREVIOUSLY ASSIGNED TO^P200'^VA(200,^0;7^Q
"^DD",123,123.02,7,3)
Enter the name of the provider who was previously assigned this consult.
"^DD",123,123.02,7,21,0)
^^1^1^2970611^^
"^DD",123,123.02,7,21,1,0)
This field is not used in this version.
"^DD",123,123.02,7,"DT")
2911208
"^DD",123,123.02,8,0)
PRINTED TO^P3.5'^%ZIS(1,^0;8^Q
"^DD",123,123.02,8,3)
Enter the name of the Printer Device which printed the consult.
"^DD",123,123.02,8,21,0)
^^3^3^2970611^^
"^DD",123,123.02,8,21,1,0)
This is the printer that the CONSULT FORM 513 was printed to upon the
"^DD",123,123.02,8,21,2,0)
orders release from OE/RR or when the Consult/Request order is forwarded
"^DD",123,123.02,8,21,3,0)
from one service to another.
"^DD",123,123.02,8,"DT")
2920510
"^DD",123,123.02,9,0)
RESULT^V^^0;9^Q
"^DD",123,123.02,9,3)
Enter the associated result.
"^DD",123,123.02,9,21,0)
^^1^1^2980414^^
"^DD",123,123.02,9,21,1,0)
This is the result that was updated when this activity occurred.
"^DD",123,123.02,9,"DT")
2980414
"^DD",123,123.02,9,"V",0)
^.12P^1^1
"^DD",123,123.02,9,"V",1,0)
8925^Note^1^TIU^n^n
"^DD",123,123.02,10,0)
ACTION METHOD^S^1:Consult Actions;2:Order Actions;3:GUI Actions;4:TIU Interface;^0;10^Q
"^DD",123,123.02,10,3)
Enter the number that indicates how the action originated.
"^DD",123,123.02,10,21,0)
^^2^2^2980425^^
"^DD",123,123.02,10,21,1,0)
The action method will identify how the user performed the action, from a
"^DD",123,123.02,10,21,2,0)
consults menu, Order entry menu, a GUI menu, or a TIU interface.
"^DD",123,123.02,10,"DT")
2980425
"^DD",123,123.03,0)
ASSOCIATED RESULTS SUB-FIELD^^.01^1
"^DD",123,123.03,0,"DT")
2980320
"^DD",123,123.03,0,"IX","B",123.03,.01)

"^DD",123,123.03,0,"NM","ASSOCIATED RESULTS")

"^DD",123,123.03,0,"UP")
123
"^DD",123,123.03,.01,0)
ASSOCIATED RESULTS^MV^^0;1^Q
"^DD",123,123.03,.01,1,0)
^.1
"^DD",123,123.03,.01,1,1,0)
123.03^B
"^DD",123,123.03,.01,1,1,1)
S ^GMR(123,DA(1),50,"B",$E(X,1,30),DA)=""
"^DD",123,123.03,.01,1,1,2)
K ^GMR(123,DA(1),50,"B",$E(X,1,30),DA)
"^DD",123,123.03,.01,1,1,3)
Required Index for Variable Pointer
"^DD",123,123.03,.01,1,2,0)
123^R
"^DD",123,123.03,.01,1,2,1)
S ^GMR(123,"R",$E(X,1,30),DA(1),DA)=""
"^DD",123,123.03,.01,1,2,2)
K ^GMR(123,"R",$E(X,1,30),DA(1),DA)
"^DD",123,123.03,.01,1,2,"DT")
2980622
"^DD",123,123.03,.01,3)
Enter the associated result.
"^DD",123,123.03,.01,21,0)
^^3^3^3000823^
"^DD",123,123.03,.01,21,1,0)
This multiple allows one or more results to be associated with a consult.
"^DD",123,123.03,.01,21,2,0)
 
"^DD",123,123.03,.01,21,3,0)
This field invokes IA #147
"^DD",123,123.03,.01,"DT")
2980622
"^DD",123,123.03,.01,"V",0)
^.12P^16^16
"^DD",123,123.03,.01,"V",1,0)
8925^Note^1^TIU^n^n
"^DD",123,123.03,.01,"V",2,0)
691^Select ECHO report^2^ECHO^n^n
"^DD",123,123.03,.01,"V",3,0)
691.1^Select CATH report^3^CATH^n^n
"^DD",123,123.03,.01,"V",4,0)
691.5^Select EKG report^4^EKG^n^n
"^DD",123,123.03,.01,"V",5,0)
691.6^Select HOLTER report^5^HOLTER^n^n
"^DD",123,123.03,.01,"V",6,0)
691.7^Select ETT report^6^ETT^n^n
"^DD",123,123.03,.01,"V",7,0)
691.8^Select EP report^7^EP^n^n
"^DD",123,123.03,.01,"V",8,0)
694^Select HEM report^8^HEM^n^n
"^DD",123,123.03,.01,"V",9,0)
698^Select GEN IMP report^9^GEN IMP^n^n
"^DD",123,123.03,.01,"V",10,0)
698.1^Select V LEAD IMPLANT report^10^V LEAD^n^n
"^DD",123,123.03,.01,"V",11,0)
698.2^Select A LEAD IMPLANT report^11^A LEAD^n^n
"^DD",123,123.03,.01,"V",12,0)
698.3^Select PACEMAKER report^12^PACE^n^n
"^DD",123,123.03,.01,"V",13,0)
699^Select ENDO report^13^ENDO^n^n
"^DD",123,123.03,.01,"V",14,0)
699.5^Select GEN PROCEDURE report^14^GEN PROC^n^n
"^DD",123,123.03,.01,"V",15,0)
700^Select PFT report^15^PFT^n^n
"^DD",123,123.03,.01,"V",16,0)
701^Select RHEUMATOLOGY report^16^RHEUM^n^n
"^DD",123,123.051,0)
REMOTE RESULTS SUB-FIELD^^.03^3
"^DD",123,123.051,0,"DT")
3010730
"^DD",123,123.051,0,"IX","B",123.051,.01)

"^DD",123,123.051,0,"NM","REMOTE RESULTS")

"^DD",123,123.051,0,"UP")
123
"^DD",123,123.051,.01,0)
REMOTE RESULT DATE^D^^0;1^S %DT="ESTXR" D ^%DT S X=Y K:X<1 X
"^DD",123,123.051,.01,1,0)
^.1
"^DD",123,123.051,.01,1,1,0)
123.051^B
"^DD",123,123.051,.01,1,1,1)
S ^GMR(123,DA(1),51,"B",$E(X,1,30),DA)=""
"^DD",123,123.051,.01,1,1,2)
K ^GMR(123,DA(1),51,"B",$E(X,1,30),DA)
"^DD",123,123.051,.01,3)
(No range limit on date)
"^DD",123,123.051,.01,21,0)
^^1^1^3011207^
"^DD",123,123.051,.01,21,1,0)
This is the date/time that a remote result was added to the record.
"^DD",123,123.051,.01,"DT")
3011207
"^DD",123,123.051,.02,0)
REMOTE ASSOCIATED RESULT^F^^0;2^K:$L(X)>30!($L(X)<2) X
"^DD",123,123.051,.02,3)
Answer must be 2-30 characters in length
"^DD",123,123.051,.02,21,0)
^^2^2^3011207^
"^DD",123,123.051,.02,21,1,0)
This is the free text representation of a variable pointer from a remote 
"^DD",123,123.051,.02,21,2,0)
facility. The facility is referenced in the RESULTING SITE field. 
"^DD",123,123.051,.02,"DT")
3011207
"^DD",123,123.051,.03,0)
RESULTING SITE^P4'^DIC(4,^0;3^Q
"^DD",123,123.051,.03,21,0)
^^3^3^3011207^
"^DD",123,123.051,.03,21,1,0)
This field is a pointer to the INSTITUION file and contains the 
"^DD",123,123.051,.03,21,2,0)
institution that stores the result referenced in the REMOTE ASSOCIATED 
"^DD",123,123.051,.03,21,3,0)
RESULT FIELD.
"^DD",123,123.051,.03,"DT")
3011207
"^DD",123,123.25,0)
COMMENT SUB-FIELD^^.01^1
"^DD",123,123.25,0,"NM","COMMENT")

"^DD",123,123.25,0,"UP")
123.02
"^DD",123,123.25,.01,0)
COMMENT^WL^^0;1^Q
"^DD",123,123.25,.01,3)
Enter the comment that explains the activity.
"^DD",123,123.25,.01,21,0)
^^3^3^2970611^^^^
"^DD",123,123.25,.01,21,1,0)
This is a word-processing comment which you may add to provide additional
"^DD",123,123.25,.01,21,2,0)
information in reference to the Action Type selected at the "Select
"^DD",123,123.25,.01,21,3,0)
Action: " prompt.
"^DD",123,123.25,.01,22)

"^DD",123,123.25,.01,"DT")
2920608
"^DIC",123,123,0)
REQUEST/CONSULTATION^123D
"^DIC",123,123,0,"GL")
^GMR(123,
"^DIC",123,123,"%",0)
^1.005^1^1
"^DIC",123,123,"%",1,0)
GMRC
"^DIC",123,123,"%","B","GMRC",1)

"^DIC",123,123,"%D",0)
^^7^7^2921119^^^^
"^DIC",123,123,"%D",1,0)
This file contains consult and request orders originating primarily via
"^DIC",123,123,"%D",2,0)
the OE/RR ordering process.  Once the order exists in this file,
"^DIC",123,123,"%D",3,0)
receiving service users perform update tracking activities.  An audit
"^DIC",123,123,"%D",4,0)
trail of the update tracking activities is maintained in this file.
"^DIC",123,123,"%D",5,0)
  
"^DIC",123,123,"%D",6,0)
The only associating of results to a consult or request, for this 
"^DIC",123,123,"%D",7,0)
version, is based on Medicine Package procedure results.
"^DIC",123,"B","REQUEST/CONSULTATION",123)

**END**
**END**

Released FH*5.5*4 SEQ #6
Extracted from mail message
**KIDS**:FH*5.5*4^

**INSTALL NAME**
FH*5.5*4
"BLD",6017,0)
FH*5.5*4^DIETETICS^0^3061012^y
"BLD",6017,1,0)
^^1^1^3060627^
"BLD",6017,1,1,0)
Tickler file modifications and Lab/Pharmacy APIs
"BLD",6017,4,0)
^9.64PA^119.6^1
"BLD",6017,4,119.6,0)
119.6
"BLD",6017,4,119.6,222)
y^y^f^^^^n
"BLD",6017,4,"B",119.6,119.6)

"BLD",6017,6.3)
32
"BLD",6017,"ABNS",0)
^9.66A^^
"BLD",6017,"ABPKG")
y^y^G.FHPATCH4@FORUM.VA.GOV
"BLD",6017,"INI")

"BLD",6017,"INID")
^^
"BLD",6017,"KRN",0)
^9.67PA^8989.52^19
"BLD",6017,"KRN",.4,0)
.4
"BLD",6017,"KRN",.4,"NM",0)
^9.68A^1^1
"BLD",6017,"KRN",.4,"NM",1,0)
FHORWRD    FILE #119.6^119.6^0
"BLD",6017,"KRN",.4,"NM","B","FHORWRD    FILE #119.6",1)

"BLD",6017,"KRN",.401,0)
.401
"BLD",6017,"KRN",.402,0)
.402
"BLD",6017,"KRN",.403,0)
.403
"BLD",6017,"KRN",.5,0)
.5
"BLD",6017,"KRN",.84,0)
.84
"BLD",6017,"KRN",3.6,0)
3.6
"BLD",6017,"KRN",3.8,0)
3.8
"BLD",6017,"KRN",9.2,0)
9.2
"BLD",6017,"KRN",9.8,0)
9.8
"BLD",6017,"KRN",9.8,"NM",0)
^9.68A^10^9
"BLD",6017,"KRN",9.8,"NM",1,0)
FHASM4^^0^B13994312
"BLD",6017,"KRN",9.8,"NM",2,0)
FHCTF1^^0^B13661672
"BLD",6017,"KRN",9.8,"NM",3,0)
FHCTF3^^0^B55764978
"BLD",6017,"KRN",9.8,"NM",5,0)
FHMMNPRT^^0^B34957812
"BLD",6017,"KRN",9.8,"NM",6,0)
FHMNPRT^^0^B16395628
"BLD",6017,"KRN",9.8,"NM",7,0)
FHORC5^^0^B2760179
"BLD",6017,"KRN",9.8,"NM",8,0)
FHPRO^^0^B10948850
"BLD",6017,"KRN",9.8,"NM",9,0)
FHWTRN^^0^B35702761
"BLD",6017,"KRN",9.8,"NM",10,0)
FHCTF5^^0^B26427742
"BLD",6017,"KRN",9.8,"NM","B","FHASM4",1)

"BLD",6017,"KRN",9.8,"NM","B","FHCTF1",2)

"BLD",6017,"KRN",9.8,"NM","B","FHCTF3",3)

"BLD",6017,"KRN",9.8,"NM","B","FHCTF5",10)

"BLD",6017,"KRN",9.8,"NM","B","FHMMNPRT",5)

"BLD",6017,"KRN",9.8,"NM","B","FHMNPRT",6)

"BLD",6017,"KRN",9.8,"NM","B","FHORC5",7)

"BLD",6017,"KRN",9.8,"NM","B","FHPRO",8)

"BLD",6017,"KRN",9.8,"NM","B","FHWTRN",9)

"BLD",6017,"KRN",19,0)
19
"BLD",6017,"KRN",19,"NM",0)
^9.68A^^
"BLD",6017,"KRN",19.1,0)
19.1
"BLD",6017,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",6017,"KRN",101,0)
101
"BLD",6017,"KRN",101,"NM",0)
^9.68A^^
"BLD",6017,"KRN",409.61,0)
409.61
"BLD",6017,"KRN",771,0)
771
"BLD",6017,"KRN",870,0)
870
"BLD",6017,"KRN",8989.51,0)
8989.51
"BLD",6017,"KRN",8989.52,0)
8989.52
"BLD",6017,"KRN",8994,0)
8994
"BLD",6017,"KRN","B",.4,.4)

"BLD",6017,"KRN","B",.401,.401)

"BLD",6017,"KRN","B",.402,.402)

"BLD",6017,"KRN","B",.403,.403)

"BLD",6017,"KRN","B",.5,.5)

"BLD",6017,"KRN","B",.84,.84)

"BLD",6017,"KRN","B",3.6,3.6)

"BLD",6017,"KRN","B",3.8,3.8)

"BLD",6017,"KRN","B",9.2,9.2)

"BLD",6017,"KRN","B",9.8,9.8)

"BLD",6017,"KRN","B",19,19)

"BLD",6017,"KRN","B",19.1,19.1)

"BLD",6017,"KRN","B",101,101)

"BLD",6017,"KRN","B",409.61,409.61)

"BLD",6017,"KRN","B",771,771)

"BLD",6017,"KRN","B",870,870)

"BLD",6017,"KRN","B",8989.51,8989.51)

"BLD",6017,"KRN","B",8989.52,8989.52)

"BLD",6017,"KRN","B",8994,8994)

"BLD",6017,"QUES",0)
^9.62^^
"BLD",6017,"REQB",0)
^9.611^^0
"FIA",119.6)
NUTRITION LOCATION
"FIA",119.6,0)
^FH(119.6,
"FIA",119.6,0,0)
119.6sI
"FIA",119.6,0,1)
y^y^f^^^^n
"FIA",119.6,0,10)

"FIA",119.6,0,11)

"FIA",119.6,0,"RLRO")

"FIA",119.6,0,"VR")
5.5^FH
"FIA",119.6,119.6)
0
"FIA",119.6,119.61)
0
"FIA",119.6,119.62)
0
"FIA",119.6,119.63)
0
"FIA",119.6,119.64)
0
"FIA",119.6,119.66)
0
"KRN",.4,2524,-1)
0^1
"KRN",.4,2524,0)
FHORWRD^3060412.1327^^119.6^^^3061004
"KRN",.4,2524,"%D",0)
^^2^2^2880709^^
"KRN",.4,2524,"%D",1,0)
This template lists the responsible clinician for each ward
"KRN",.4,2524,"%D",2,0)
in the Dietetic Ward file (119.6).
"KRN",.4,2524,"F",2)
.01~1~112,.01;C60~
"KRN",.4,2524,"H")
NUTRITION LOCATION ASSIGNMENTS LIST
"MBREQ")
0
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"PKG",29,-1)
1^1
"PKG",29,0)
DIETETICS^FH^Dietetics/Nutrition & Food Service System
"PKG",29,20,0)
^9.402P^^
"PKG",29,22,0)
^9.49I^1^1
"PKG",29,22,1,0)
5.5^3050202^3040621^4572
"PKG",29,22,1,"PAH",1,0)
4^3061012^28
"PKG",29,22,1,"PAH",1,1,0)
^^1^1^3061012
"PKG",29,22,1,"PAH",1,1,1,0)
Tickler file modifications and Lab/Pharmacy APIs
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
9
"RTN","FHASM4")
0^1^B13994312^B12052466
"RTN","FHASM4",1,0)
FHASM4 ; HISC/REL/JH - Laboratory/Drug Data ;4/3/01  14:12
"RTN","FHASM4",2,0)
 ;;5.5;DIETETICS;**4**;Jan 28, 2005;Build 32
"RTN","FHASM4",3,0)
 S PX=3 D LAB G ^FHASM5
"RTN","FHASM4",4,0)
LAB ; Collect lab results
"RTN","FHASM4",5,0)
 K LRTST,^TMP($J,"LRTST") Q:'DFN
"RTN","FHASM4",6,0)
 S LRDFN=$P($G(^DPT(DFN,"LR")),"^",1) G:'LRDFN LKIL
"RTN","FHASM4",7,0)
 W:PX=3 !!,"Collecting laboratory data ... " D GET
"RTN","FHASM4",8,0)
 S X2=-$S($D(^FH(119.9,1,3)):$P(^(3),"^",2),1:90)
"RTN","FHASM4",9,0)
 S %DT="X",X="T" D ^%DT S DT=+Y,X1=DT D C^%DTC S A1=9999999-X
"RTN","FHASM4",10,0)
 F K=0:0 S K=$O(^LR(LRDFN,"CH",K)) Q:K<1!(K>A1)  F L=0:0 S L=$O(^LR(LRDFN,"CH",K,L)) Q:L'>0  I $D(LRTST(L)) S X=^(L) D STR
"RTN","FHASM4",11,0)
 S %=100 F L=0:0 S L=$O(LRTST(L)) Q:L'>0  F SP=0:0 S SP=$O(LRTST(L,SP)) Q:SP'>0  D
"RTN","FHASM4",12,0)
 .I $P(LRTST(L,SP),"^",6)="" K LRTST(L,SP) Q
"RTN","FHASM4",13,0)
 .S %=%+1,^TMP($J,"LRTST",$S($P(LRTST(L,SP),"^",8)'="":$P(LRTST(L,SP),"^",8),1:%))=LRTST(L,SP) Q
"RTN","FHASM4",14,0)
 K LRTST F L=0:0 S L=$O(^TMP($J,"LRTST",L)) Q:L<1  S LRTST(L)=^(L)
"RTN","FHASM4",15,0)
LKIL K %,%H,%I,%T,%DT,A1,FLG,GRP,HI,K,L,LO,LRCW,LRDFN,P60,PC,SP,THER,TNAM,TST,X,X0,X1,X2,Y Q
"RTN","FHASM4",16,0)
STR ;
"RTN","FHASM4",17,0)
 S SP=$P($G(^LR(LRDFN,"CH",K,0)),"^",5) Q:'SP
"RTN","FHASM4",18,0)
 I '$D(LRTST(L,SP)) Q
"RTN","FHASM4",19,0)
 I $P(LRTST(L,SP),"^",6)'="" Q
"RTN","FHASM4",20,0)
 S FHLR=$$TSTRES^LRRPU(LRDFN,"CH",K,L),FHLO=$P(FHLR,U,3),FHI=$P(FHLR,U,4)
"RTN","FHASM4",21,0)
 S $P(LRTST(L,SP),U,5)=$J(FHLO,4)_$S($L(FHI):" - "_$J(FHI,4),1:"")
"RTN","FHASM4",22,0)
 S P60=$P(LRTST(L,SP),"^",2),SP=$P(LRTST(L,SP),"^",3),GRP=$P(LRTST(L,SP),"^",8)
"RTN","FHASM4",23,0)
 S FLG=$P(X,"^",2),X=$P(X,"^",1) Q:X=""  S PC=$P($G(^LAB(60,P60,.1)),"^",3)
"RTN","FHASM4",24,0)
 S LRCW=8 I PC="" S X=$J(X,LRCW)
"RTN","FHASM4",25,0)
 E  S @("X="_PC)
"RTN","FHASM4",26,0)
 S:FLG'="" X=X_" "_FLG
"RTN","FHASM4",27,0)
 S $P(LRTST(L,SP),"^",6,7)=X_"^"_(9999999-K)
"RTN","FHASM4",28,0)
 I GRP F %=0:0 S %=$O(LRTST(%)) Q:%=""  F P60=0:0 S P60=$O(LRTST(%,P60)) Q:P60=""  I $P(LRTST(%,P60),"^",8)=GRP,'(%=L&(P60=SP)) D
"RTN","FHASM4",29,0)
 .I $P(LRTST(L,SP),"^",7)>$P(LRTST(%,P60),"^",7) K LRTST(%,P60) Q
"RTN","FHASM4",30,0)
 .K LRTST(L,SP) Q
"RTN","FHASM4",31,0)
 Q
"RTN","FHASM4",32,0)
GET ; Get Lab Tests of interest from Site Parameter file
"RTN","FHASM4",33,0)
 F K=0:0 S K=$O(^FH(119.9,1,"L",K)) Q:K'>0  S X=^(K,0) I 'PX!($P(X,"^",PX)="Y") D G1
"RTN","FHASM4",34,0)
 Q
"RTN","FHASM4",35,0)
G1 S P60=+$P(X,"^",1),SP=$P(X,"^",2),GRP=$P(X,"^",5) Q:'SP  S X0=$G(^LAB(60,P60,0)) Q:X0=""
"RTN","FHASM4",36,0)
 S X1=$G(^LAB(60,P60,.1)),TST=$P($P(X0,"^",5),";",2) Q:'TST
"RTN","FHASM4",37,0)
 S TNAM=$P(X0,"^",1) I $L(TNAM)>20 S TNAM=$P(X1,"^",1)
"RTN","FHASM4",38,0)
 S X=$G(^LAB(60,P60,1,SP,0)) Q:'$L(X)  S THER=$S($L($P(X,U,11,12))>1:1,1:0) S LO=$S(THER:$P(X,U,11),1:$P(X,U,2)),HI=$S(THER:$P(X,U,12),1:$P(X,U,3))
"RTN","FHASM4",39,0)
 S LRTST(TST,SP)=TNAM_"^"_P60_"^"_SP_"^"_$P(X,"^",7)_"^"_$J(LO,4)_$S($L(HI):" - "_$J(HI,4),1:"")_"^^^"_GRP Q
"RTN","FHASM4",40,0)
 S @("LO="_$S($L(LO):LO,1:"""""")),@("HI="_$S($L(HI):HI,1:""""""))
"RTN","FHASM4",41,0)
DRUG ; Collect requested drugs 0=Outpatient 1=Inpatient
"RTN","FHASM4",42,0)
 K ^TMP($J,"FHCLASS"),^TMP($J,"FHPSORD"),^TMP($J,"FHPSO"),^TMP($J,"FHDRUG"),^TMP($J,"FHPSS")
"RTN","FHASM4",43,0)
 K PC,PSD F K=0:0 S K=$O(^FH(119.9,1,"P",K)) Q:K'>0  S X=$P(^(K,0),"^",1),PSNIEN=+X D IEN^PSN50P65(PSNIEN,,"FHCLASS") S CLS=$E(^TMP($J,"FHCLASS",PSNIEN,.01),1,3) I CLS'="" S:$E(CLS,3)="0" CLS=$E(CLS,1,2) S PC(CLS)=""
"RTN","FHASM4",44,0)
 G:'$D(PC) PKIL D NOW^%DTC S STRT=(%\1)-1 K PSD I 'PX D OUTP G PKIL
"RTN","FHASM4",45,0)
 D PSS432^PSS55(DFN,,"FHPSORD") F PSORD=0:0 S PSORD=$O(^TMP($J,"FHPSORD","B",PSORD)) Q:'PSORD  D D1
"RTN","FHASM4",46,0)
PKIL K %,%H,%I,CLS,DRG,K,PC,PSORD,STRT,X Q
"RTN","FHASM4",47,0)
OUTP ;
"RTN","FHASM4",48,0)
 D PROF^PSO52API(DFN,"FHPSO",STRT)
"RTN","FHASM4",49,0)
 F JX=0:0 S JX=$O(^TMP($J,"FHPSO",DFN,JX)) Q:JX'>0  D
"RTN","FHASM4",50,0)
 . S X=JX D EN^PSOORDER(DFN,X)
"RTN","FHASM4",51,0)
 . S CLS=$P($P($G(^TMP("PSOR",$J,JX,0)),"^",4),";",1) I CLS'="A",CLS'="H",CLS'="S" Q
"RTN","FHASM4",52,0)
 . S DRG=$P($P($G(^TMP("PSOR",$J,JX,"DRUG",0)),U),";") D:DRG D2
"RTN","FHASM4",53,0)
 . Q
"RTN","FHASM4",54,0)
 Q
"RTN","FHASM4",55,0)
D1 D PSS431^PSS55(DFN,PSORD,,,"FHDRUG")
"RTN","FHASM4",56,0)
 S DRG=$P($G(^TMP($J,"FHDRUG",PSORD,"DDRUG",1,.01)),"^",1)
"RTN","FHASM4",57,0)
 ;
"RTN","FHASM4",58,0)
D2 D DATA^PSS50(DRG,,,,,"FHPSS") I $P(^TMP($J,"FHPSS",0),"^",1)=-1 Q 
"RTN","FHASM4",59,0)
 S CLS=^TMP($J,"FHPSS",DRG,2) Q:CLS=""  I '$D(PC($E(CLS,1,2))),'$D(PC($E(CLS,1,3))) Q
"RTN","FHASM4",60,0)
 S PSD(DRG)=^TMP($J,"FHPSS",DRG,.01)
"RTN","FHCTF1")
0^2^B13661672^B9148269
"RTN","FHCTF1",1,0)
FHCTF1 ; HISC/REL/NCA - Display Tickler File ;4/6/01  08:43
"RTN","FHCTF1",2,0)
 ;;5.5;DIETETICS;**4**;Jan 28, 2005;Build 32
"RTN","FHCTF1",3,0)
 ;patch 4 - changed the output by clinician order if ALL is selected.
"RTN","FHCTF1",4,0)
E0 W !!,"Select CLINICIAN (or ALL): ",$P($G(^VA(200,DUZ,0)),"^",1)," // " R X:DTIME G:'$T!(X="^") KIL
"RTN","FHCTF1",5,0)
 I X="" S FHDUZ=DUZ G DISP
"RTN","FHCTF1",6,0)
 D TR^FH I X="ALL" S FHDUZ=0 G DISP
"RTN","FHCTF1",7,0)
 K DIC S DIC="^VA(200,",DIC(0)="AQEM",DIC("A")="Select CLINICIAN: ",DIC("B")=$P($G(^VA(200,DUZ,0)),"^",1) W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),E0:Y<1 S FHDUZ=+Y
"RTN","FHCTF1",8,0)
DISP ; Display Tickler File
"RTN","FHCTF1",9,0)
E1 S %DT="AEFX",%DT("A")="Through Date: ",%DT("B")="TODAY" W ! D ^%DT S:$D(DTOUT) X="^" G KIL:U[X,E1:Y<1 S EDT=+Y+.3
"RTN","FHCTF1",10,0)
E2 W ! K IOP,%ZIS S %ZIS("A")="Select LIST PRINTER: ",%ZIS="MQ" D ^%ZIS K %ZIS,IOP G:POP KIL
"RTN","FHCTF1",11,0)
 I $D(IO("Q")) S FHPGM="Q0^FHCTF1",FHLST="EDT^FHDUZ" D EN2^FH G KIL
"RTN","FHCTF1",12,0)
 U IO D Q0 D ^%ZISC K %ZIS,IOP G KIL
"RTN","FHCTF1",13,0)
Q0 ; Process Displaying Tickler File Entries
"RTN","FHCTF1",14,0)
 D ^FHCTF4 S (CNT,PG)=0,YN="" G:FHDUZ Q1
"RTN","FHCTF1",15,0)
 ;F FHDUZ=0:0 S FHDUZ=$O(^FH(119,FHDUZ)) Q:FHDUZ<1  I $O(^FH(119,FHDUZ,"I",EDT+1),-1) D Q1 Q:YN="^"
"RTN","FHCTF1",16,0)
 K FHTCK S FHDTP=""
"RTN","FHCTF1",17,0)
 F FHDUZ=0:0 S FHDUZ=$O(^FH(119,FHDUZ)) Q:FHDUZ<1  I $O(^FH(119,FHDUZ,"I",EDT+1),-1) S FHTCK($P(^VA(200,FHDUZ,0),"^",1),FHDUZ)=""
"RTN","FHCTF1",18,0)
 S FHDUZNM="" F  S FHDUZNM=$O(FHTCK(FHDUZNM)) Q:FHDUZNM=""  S FHDUZ=$O(FHTCK(FHDUZNM,0)) D:FHDUZ Q1 Q:YN="^"
"RTN","FHCTF1",19,0)
 Q
"RTN","FHCTF1",20,0)
Q1 D HDR K ^TMP($J,"FH")
"RTN","FHCTF1",21,0)
 F K=0:0 S K=$O(^FH(119,FHDUZ,"I",K)) Q:K<1!(K>EDT)  S FHTF=^(K,0) S FHDFN=$P(FHTF,U,4) S:'FHDFN ^TMP($J,"FH","1PERSONALIZED",K)="" I FHDFN,$D(^DPT(FHDFN,0)) D
"RTN","FHCTF1",22,0)
 .S ^TMP($J,"FH",$P(^DPT(FHDFN,0),U,1))=FHDFN
"RTN","FHCTF1",23,0)
 .S ^TMP($J,"FH",$P(^DPT(FHDFN,0),U,1),K)=""
"RTN","FHCTF1",24,0)
 G:'$D(^TMP($J,"FH")) QT2
"RTN","FHCTF1",25,0)
 S FHI=""
"RTN","FHCTF1",26,0)
 F  S FHI=$O(^TMP($J,"FH",FHI)) Q:(FHI="")!(YN="^")  D PT1 F FHJ=0:0 S FHJ=$O(^TMP($J,"FH",FHI,FHJ)) Q:(FHJ'>0)!(YN="^")  D D2
"RTN","FHCTF1",27,0)
QT2 I 'CNT W !!,"No Tickler File Entries"
"RTN","FHCTF1",28,0)
 W ! Q
"RTN","FHCTF1",29,0)
 ;
"RTN","FHCTF1",30,0)
D2 S FHTF=^FH(119,FHDUZ,"I",FHJ,0) D:$Y>(IOSL-5) HDR Q:YN["^"
"RTN","FHCTF1",31,0)
 S DTP=$P(FHTF,"^",1),TYP=$P(FHTF,"^",2),X=$P(FHTF,"^",3),DFN=$P(FHTF,"^",4),ADM=$P(FHTF,"^",5),FHOR=$P(FHTF,"^",6)
"RTN","FHCTF1",32,0)
 D DTP
"RTN","FHCTF1",33,0)
 W !
"RTN","FHCTF1",34,0)
 I FHDTP'=DTP W DTP S FHDTP=DTP
"RTN","FHCTF1",35,0)
 W ?18,$S(TYP="C":"Consult",TYP="S":"SF Review",TYP="D":"Diet Review",TYP="X":"Personal",TYP="T":"Tubefeed",TYP="N":"Status",1:""),": ",X
"RTN","FHCTF1",36,0)
 ;I DFN W !?18,$P($G(^DPT(DFN,0)),"^",1)," (",$E($P($G(^(0)),"^",9),6,9),")  "
"RTN","FHCTF1",37,0)
 I DFN S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHCTF1",38,0)
 I DFN S FHWRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8) W "  ",$P($G(^FH(119.6,+FHWRD,0)),"^",1),"  ",$P($G(^DPT(DFN,.101)),"^",1)
"RTN","FHCTF1",39,0)
 S CNT=CNT+1 Q
"RTN","FHCTF1",40,0)
 ;
"RTN","FHCTF1",41,0)
PT1 ;print patient info.
"RTN","FHCTF1",42,0)
 S FHDTP=""
"RTN","FHCTF1",43,0)
 W !
"RTN","FHCTF1",44,0)
 S DFN=$G(^TMP($J,"FH",FHI)) I 'DFN W !?18,"** PERSONALIZED TICKLER **" Q
"RTN","FHCTF1",45,0)
 W:DFN !?18,"** ",$P($G(^DPT(DFN,0)),"^",1)," (",$E($P($G(^(0)),"^",9),6,9),") **"
"RTN","FHCTF1",46,0)
 Q
"RTN","FHCTF1",47,0)
 ;
"RTN","FHCTF1",48,0)
DTP ; Printable Date/Time
"RTN","FHCTF1",49,0)
 S %=DTP,DTP=$J(+$E(DTP,6,7),2)_"-"_$P("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"," ",+$E(DTP,4,5))_"-"_$E(DTP,2,3)
"RTN","FHCTF1",50,0)
 S:%#1 %=+$E(%_"0",9,10)_"^"_$E(%_"000",11,12),DTP=DTP_$J($S(%>12:%-12,1:+%),3)_":"_$P(%,"^",2)_$S(%<12:"am",%<24:"pm",1:"m") K % Q
"RTN","FHCTF1",51,0)
HDR ; Display Header
"RTN","FHCTF1",52,0)
 I PG,IOST?1"C-".E R !!,"Press RETURN to continue or ""^"" to exit. ",YN:DTIME S:'$T!(YN["^") YN="^" Q:YN="^"  I "^"'[YN W !,"Enter Return or ""^""." G HDR
"RTN","FHCTF1",53,0)
 W:'($E(IOST,1,2)'="C-"&'PG) @IOF
"RTN","FHCTF1",54,0)
 S PG=PG+1,DTP=NOW D DTP^FH W !,DTP,?28,"T I C K L E R   F I L E",?73,"Page ",PG
"RTN","FHCTF1",55,0)
 W !,$P(^VA(200,FHDUZ,0),"^",1) S DTP=EDT\1 D DTP^FH W ?64,"Thru: ",DTP
"RTN","FHCTF1",56,0)
 S $P(LN,"-",80)="" W !,LN,! Q
"RTN","FHCTF1",57,0)
KIL K ^TMP($J,"FH") G KILL^XUSCLEAN
"RTN","FHCTF3")
0^3^B55764978^B24411252
"RTN","FHCTF3",1,0)
FHCTF3 ; HISC/REL/NCA - Clear File Entries ;4/6/01  09:37
"RTN","FHCTF3",2,0)
 ;;5.5;DIETETICS;**4**;Jan 28, 2005;Build 32
"RTN","FHCTF3",3,0)
E0 K DIC,^TMP($J) S DIC="^VA(200,",DIC(0)="AQEM",DIC("A")="Select CLINICIAN: ",DIC("B")=$P($G(^VA(200,DUZ,0)),"^",1) W ! D ^DIC K DIC G KIL:"^"[X!$D(DTOUT),E0:Y<1 S FHDUZ=+Y
"RTN","FHCTF3",4,0)
 S (FHQT,CNT,QT)=0 D NOW^%DTC S NOW=%,DT=NOW\1 D CLN^FHCTF4 S $P(LN,"-",80)="",QT=""
"RTN","FHCTF3",5,0)
E1 F LLL=0:0 S LLL=$O(^FH(119,FHDUZ,"I",LLL)) Q:LLL<1  S FHTF=^(LLL,0),DFN=$P(FHTF,U,4),FHZ115="P"_DFN D CHECK^FHOMDPA I $G(FHDFN) D
"RTN","FHCTF3",6,0)
 .D PATNAME^FHOMUTL
"RTN","FHCTF3",7,0)
 .S ^TMP($J,FHPTNM,FHDFN,LLL)=FHDFN
"RTN","FHCTF3",8,0)
 S FHPTNM=""
"RTN","FHCTF3",9,0)
CL0 S FHPTNM=$O(^TMP($J,FHPTNM)) G:(FHPTNM="")!(FHQT=U) OUT G CL1
"RTN","FHCTF3",10,0)
 ;
"RTN","FHCTF3",11,0)
OUT G:FHQT=U KIL I 'CNT W !!,"No Tickler File Entries"
"RTN","FHCTF3",12,0)
 W ! G KIL
"RTN","FHCTF3",13,0)
 ;
"RTN","FHCTF3",14,0)
CL1 F FHDFN=0:0 S FHDFN=$O(^TMP($J,FHPTNM,FHDFN)) Q:FHDFN'>0  S FHCNT=0,QT="" K FHCLR F FHI=0:0 S FHI=$O(^TMP($J,FHPTNM,FHDFN,FHI)) D:FHI'>0 ASK Q:QT=U  D CL2
"RTN","FHCTF3",15,0)
 G CL0
"RTN","FHCTF3",16,0)
 ;
"RTN","FHCTF3",17,0)
CL2 I FHI'>0 S QT=U Q
"RTN","FHCTF3",18,0)
 S FHTF=$G(^FH(119,FHDUZ,"I",FHI,0))
"RTN","FHCTF3",19,0)
 S DTP=$P(FHTF,"^",1),TYP=$P(FHTF,"^",2),X=$P(FHTF,"^",3),DFN=$P(FHTF,"^",4),ADM=$P(FHTF,"^",5)
"RTN","FHCTF3",20,0)
 S CNT=CNT+1
"RTN","FHCTF3",21,0)
 I DFN,ADM S FHWRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8)
"RTN","FHCTF3",22,0)
 D:'FHCNT HDR
"RTN","FHCTF3",23,0)
 S FHCNT=FHCNT+1
"RTN","FHCTF3",24,0)
 S FHCLR(TYP,FHCNT)=FHI
"RTN","FHCTF3",25,0)
 S Y=DTP X ^DD("DD")
"RTN","FHCTF3",26,0)
 W !,FHCNT,".",?4,$P(FHTF,U,3),"  Date: ",Y
"RTN","FHCTF3",27,0)
 Q
"RTN","FHCTF3",28,0)
ASK W !!,"Select an entry to clear (1,2,3... or 'A' or Return): Return// " R FHNM:DTIME I '$T!(FHNM["^") S FHQT=U Q
"RTN","FHCTF3",29,0)
 I FHNM="" S QT=U Q
"RTN","FHCTF3",30,0)
 S X=FHNM D TR^FH S FHNM=X
"RTN","FHCTF3",31,0)
 S FHASK=0 K FHCHK
"RTN","FHCTF3",32,0)
 I FHNM'="A" S FHTYP="" D
"RTN","FHCTF3",33,0)
 .F  S FHTYP=$O(FHCLR(FHTYP)) Q:FHTYP=""  F FHI=0:0 S FHI=$O(FHCLR(FHTYP,FHI)) Q:FHI'>0  S FHCHK(FHI)=""
"RTN","FHCTF3",34,0)
 .F FHENT=1:1 S FHNUM=$P(FHNM,",",FHENT) Q:FHNUM=""  D
"RTN","FHCTF3",35,0)
 ..I '$D(FHCHK(FHNUM)) W *7,!!,"Enter an entry, or group of entries separated by a comma, or 'A' for all entries, or Return to bypass!" S FHASK=1
"RTN","FHCTF3",36,0)
 G:FHASK ASK
"RTN","FHCTF3",37,0)
 S (FHTYPSV,FHTYP)=""
"RTN","FHCTF3",38,0)
 I FHNM="A" F  S FHTYP=$O(FHCLR(FHTYP)) G:FHTYP="" D1 D:(FHTYPSV'="")&(FHTYP'=FHTYPSV) D1 D
"RTN","FHCTF3",39,0)
 .K FHIEN F FHII=0:0 S FHII=$O(FHCLR(FHTYP,FHII)) Q:FHII'>0  S FHTYPSV=FHTYP,FHIEN(FHCLR(FHTYP,FHII))=""
"RTN","FHCTF3",40,0)
 I FHNM'="A" F  S FHTYP=$O(FHCLR(FHTYP)) G:FHTYP="" D1 D:(FHTYPSV'="")&(FHTYP'=FHTYPSV) D1 D
"RTN","FHCTF3",41,0)
 .K FHIEN F FHENT=1:1 S FHII=$P(FHNM,",",FHENT) Q:FHII=""  S FHTYPSV=FHTYP I $D(FHCLR(FHTYP,FHII)) S FHIEN(FHCLR(FHTYP,FHII))=""
"RTN","FHCTF3",42,0)
 Q
"RTN","FHCTF3",43,0)
D1 ;
"RTN","FHCTF3",44,0)
 S FHTICK=$O(FHIEN(0))
"RTN","FHCTF3",45,0)
 Q:'FHTICK
"RTN","FHCTF3",46,0)
 S FHTF=$G(^FH(119,FHDUZ,"I",FHTICK,0)) D D2
"RTN","FHCTF3",47,0)
 Q:QT=U
"RTN","FHCTF3",48,0)
 F LLL=0:0 S LLL=$O(FHIEN(LLL)) Q:LLL'>0  D
"RTN","FHCTF3",49,0)
 .S FHTF=$G(^FH(119,FHDUZ,"I",LLL,0)),DTP=$P(FHTF,"^",1),TYP=$P(FHTF,"^",2),X=$P(FHTF,"^",3),DFN=$P(FHTF,"^",4),ADM=$P(FHTF,"^",5)
"RTN","FHCTF3",50,0)
 .D:FHTYPSV'="C" @FHTYPSV
"RTN","FHCTF3",51,0)
 G DNE
"RTN","FHCTF3",52,0)
 ;
"RTN","FHCTF3",53,0)
S S:NO $P(^FHPT(FHDFN,"A",ADM,"SF",NO,0),"^",30,31)=NOW_"^"_DUZ
"RTN","FHCTF3",54,0)
 K ^FH(119,FHDUZ,"I",LLL)
"RTN","FHCTF3",55,0)
 Q
"RTN","FHCTF3",56,0)
C ;
"RTN","FHCTF3",57,0)
 Q
"RTN","FHCTF3",58,0)
D S:FHORD $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",16,17)=NOW_"^"_DUZ
"RTN","FHCTF3",59,0)
 K ^FH(119,FHDUZ,"I",LLL)
"RTN","FHCTF3",60,0)
 Q
"RTN","FHCTF3",61,0)
T S:TF $P(^FHPT(FHDFN,"A",ADM,"TF",TF,0),"^",15,16)=NOW_"^"_DUZ
"RTN","FHCTF3",62,0)
 K ^FH(119,FHDUZ,"I",LLL)
"RTN","FHCTF3",63,0)
 Q
"RTN","FHCTF3",64,0)
N I F1,$D(^FHPT(FHDFN,"S",F1,0)) S $P(^FHPT(FHDFN,"S",F1,0),"^",4,5)=NOW_"^"_DUZ
"RTN","FHCTF3",65,0)
 K ^FH(119,FHDUZ,"I",LLL)
"RTN","FHCTF3",66,0)
 Q
"RTN","FHCTF3",67,0)
M ;
"RTN","FHCTF3",68,0)
 S F1=$P(FHTF,"^",6) S $P(^FHPT(FHDFN,"A",ADM,"MO",F1,0),"^",3,5)=MOCOM_"^"_DUZ_"^"_NOW
"RTN","FHCTF3",69,0)
 K ^FH(119,FHDUZ,"I",LLL)
"RTN","FHCTF3",70,0)
 Q
"RTN","FHCTF3",71,0)
 ;
"RTN","FHCTF3",72,0)
D2 S DTP=$P(FHTF,"^",1),TYP=$P(FHTF,"^",2),X=$P(FHTF,"^",3),DFN=$P(FHTF,"^",4),ADM=$P(FHTF,"^",5)
"RTN","FHCTF3",73,0)
 S CNT=CNT+1
"RTN","FHCTF3",74,0)
 I DFN,ADM S FHWRD=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",8)
"RTN","FHCTF3",75,0)
 D SF:TYP="S",CN:TYP="C",DI:TYP="D",TF:TYP="T",NS:TYP="N",MO:TYP="M" Q
"RTN","FHCTF3",76,0)
SF ; Clear Supplemental Feeding
"RTN","FHCTF3",77,0)
 S NO=$P(FHTF,"^",6)
"RTN","FHCTF3",78,0)
 D CUR^FHORD7
"RTN","FHCTF3",79,0)
 W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order")
"RTN","FHCTF3",80,0)
 S Y=$S('NO:"",1:$G(^FHPT(FHDFN,"A",ADM,"SF",NO,0))) D L1^FHNO7
"RTN","FHCTF3",81,0)
S1 R !!,"Is Order OK? Y// ",YN:DTIME S:'$T!(YN["^") QT="^" Q:QT="^"  S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G S1
"RTN","FHCTF3",82,0)
 S YN=$E(YN,1) I YN'="Y" S QT=U
"RTN","FHCTF3",83,0)
 Q
"RTN","FHCTF3",84,0)
CN ; Clear Consult
"RTN","FHCTF3",85,0)
 S FHDR=$P(FHTF,"^",6),Y=^FHPT(FHDFN,"A",ADM,"DR",FHDR,0),ALL=0
"RTN","FHCTF3",86,0)
 D D1^FHORC2
"RTN","FHCTF3",87,0)
C1 R !!,"Disposition (C=Complete, X=Cancelled, R=Reassign, RETURN to bypass): ",TYP:DTIME S:'$T!(TYP["^") QT="^" Q:"^"[TYP  S X=TYP D TR^FH S TYP=X I TYP'?1U!("XCR"'[TYP) W *7,!,"Enter C, X or R or Press RETURN to bypass" G C1
"RTN","FHCTF3",88,0)
 I TYP="R" G C2
"RTN","FHCTF3",89,0)
C11 I ORIFN S ORSTS=TYP="C"+1 D ST^ORX
"RTN","FHCTF3",90,0)
 K ^FHPT("ADRU",FHDUZ,FHDFN,ADM,FHDR)
"RTN","FHCTF3",91,0)
 S $P(^FHPT(FHDFN,"A",ADM,"DR",FHDR,0),"^",8,10)=TYP_"^"_NOW_"^"_DUZ K ^FH(119,FHDUZ,"I",LLL)
"RTN","FHCTF3",92,0)
 D:TYP="C" EN31^FHASE G DNE
"RTN","FHCTF3",93,0)
C2 K DIC S DIC="^VA(200,",DIC(0)="AEQM",DIC("A")="REASSIGN to Clinician: " W ! D ^DIC S:$D(DTOUT) QT="^" Q:Y<1  S XMKK=+Y K DIC
"RTN","FHCTF3",94,0)
 K ^FHPT("ADRU",FHDUZ,FHDFN,ADM,FHDR) S ^FHPT("ADRU",XMKK,FHDFN,ADM,FHDR)=""
"RTN","FHCTF3",95,0)
 S $P(^FHPT(FHDFN,"A",ADM,"DR",FHDR,0),"^",5)=XMKK
"RTN","FHCTF3",96,0)
 K ^FH(119,FHDUZ,"I",LLL) S FHSV=FHDUZ,FHDUZ=XMKK D FILE^FHCTF2 S FHDUZ=FHSV
"RTN","FHCTF3",97,0)
 S WARD=""
"RTN","FHCTF3",98,0)
 I FHWRD S WARD=$P($G(^FH(119.6,+FHWRD,0)),"^",1)
"RTN","FHCTF3",99,0)
 S REQ=CON D POST^FHORC
"RTN","FHCTF3",100,0)
 G DNE
"RTN","FHCTF3",101,0)
 Q
"RTN","FHCTF3",102,0)
 ;
"RTN","FHCTF3",103,0)
TF ; Tubefeed
"RTN","FHCTF3",104,0)
 S TF=$P(FHTF,"^",6)
"RTN","FHCTF3",105,0)
 D DIS^FHORT2
"RTN","FHCTF3",106,0)
T1 R !!,"Is Order OK? Y// ",YN:DTIME S:'$T!(YN["^") QT="^" Q:QT="^"  S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G T1
"RTN","FHCTF3",107,0)
 S YN=$E(YN,1) I YN'="Y" S QT=U
"RTN","FHCTF3",108,0)
 Q
"RTN","FHCTF3",109,0)
DI ; Diet
"RTN","FHCTF3",110,0)
 S FHORD=$P(FHTF,"^",6)
"RTN","FHCTF3",111,0)
 I FHORD D C2^FHORD7 W !!,"Current Diet: ",$S(Y'="":Y,1:"No current order")
"RTN","FHCTF3",112,0)
 I 'FHORD W !!,"No current order"
"RTN","FHCTF3",113,0)
 I FHORD,$D(^FHPT(FHDFN,"A",ADM,"DI",FHORD,1)) S COM=^(1) W:COM'="" !,"Comment: ",COM
"RTN","FHCTF3",114,0)
 S TYS=$P(X,"^",8) I TYS'="" W !,"Service: ",$S(TYS="T":"Tray",TYS="D":"Dining Room",1:"Cafeteria")
"RTN","FHCTF3",115,0)
 S DTP=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",3) I DTP D DTP^FH W !,"Expires: ",DTP
"RTN","FHCTF3",116,0)
 R !!,"Is Order OK? Y// ",YN:DTIME S:'$T!(YN["^") QT="^" Q:QT="^"  S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G D1
"RTN","FHCTF3",117,0)
 S YN=$E(YN,1) I YN'="Y" S QT=U
"RTN","FHCTF3",118,0)
 Q
"RTN","FHCTF3",119,0)
NS ; Status
"RTN","FHCTF3",120,0)
 S F1=$P(FHTF,"^",6),Y=$G(^FHPT(FHDFN,"S",+F1,0)) Q:Y=""  S S=$P(Y,"^",2)
"RTN","FHCTF3",121,0)
 W !!,"Current Status: ",$P($G(^FH(115.4,+S,0)),"^",2)
"RTN","FHCTF3",122,0)
N1 R !!,"Is Status OK? Y// ",YN:DTIME S:'$T!(YN["^") QT="^" Q:QT="^"  S:YN="" YN="Y" S X=YN D TR^FH S YN=X I $P("YES",YN,1)'="",$P("NO",YN,1)'="" W *7," Answer YES or NO" G N1
"RTN","FHCTF3",123,0)
 S YN=$E(YN,1) I YN'="Y" S QT=U
"RTN","FHCTF3",124,0)
 Q
"RTN","FHCTF3",125,0)
MO ; Monitor
"RTN","FHCTF3",126,0)
 W !!,$P(FHTF,"^",3)
"RTN","FHCTF3",127,0)
M1 S MOCOM="" R !!,"Action Taken: ",MOCOM:DTIME S:MOCOM="^" QT="^" Q:'$T!(MOCOM["^")  I MOCOM'?.ANP W *7," ??" G M1
"RTN","FHCTF3",128,0)
 I MOCOM=""!($L(MOCOM)>60)!(MOCOM?1"?".E) W *7,!,"Required entry: document action (up to 60 characters) or ^ to bypass." G M1
"RTN","FHCTF3",129,0)
 Q
"RTN","FHCTF3",130,0)
DNE W "  ... done" Q
"RTN","FHCTF3",131,0)
HDR S DFN=$P($G(^FHPT(FHDFN,0)),U,1),DFN=$E(DFN,2,99) Q:'DFN  S Y0=$G(^DPT(DFN,0)) W !!!,$P(Y0,"^",1) D PID^FHDPA W:BID'="" " (",BID,")"
"RTN","FHCTF3",132,0)
 W ?40,$S($P(Y0,"^",2)="F":"Female",1:"Male")
"RTN","FHCTF3",133,0)
 S AGE=$P(Y0,"^",3) I AGE'="" S AGE=$E(DT,1,3)-$E(AGE,1,3)-($E(DT,4,7)<$E(AGE,4,7)) W "   Age ",AGE
"RTN","FHCTF3",134,0)
 S WARD=""
"RTN","FHCTF3",135,0)
 I FHWRD S WARD=$P($G(^FH(119.6,+FHWRD,0)),"^",1)
"RTN","FHCTF3",136,0)
 S X=WARD_" "_$P($G(^DPT(DFN,.101)),"^",1) W ?(79-$L(X)),X
"RTN","FHCTF3",137,0)
 W !,LN
"RTN","FHCTF3",138,0)
 Q
"RTN","FHCTF3",139,0)
HDR1 S X=$S(TYP="S":"SUPPLEMENTAL FEEDING",TYP="C":"DIETETIC CONSULTATION",TYP="D":"DIET ORDER",TYP="T":"TUBEFEEDING",TYP="N":"NUTRITION STATUS",TYP="M":"MONITOR",1:"")
"RTN","FHCTF3",140,0)
 Q
"RTN","FHCTF3",141,0)
KIL ;clean variables
"RTN","FHCTF3",142,0)
 K ^TMP($J),ADM,AGE,BID,CNT,DFN,FHAGE,FHBID,FHCLR,FHCNT,FHDFN,FHDOB,FHDUZ,FHI,FHNM,FHPCZN,FHPTNM,FHQT,FHSEX,FHSSN,FHTF,FHWRD,FHZ115,FILE
"RTN","FHCTF3",143,0)
 K IEN,FLAG,K,LLL,LN,NOW,PID,QT,TYP,W1,WARD,X,Y,YO,FHA,YN,FHORD,FHTF,DTP,DTE,A1,DDH,DIR,FHASK,FHENT,FHIEN,FHII,FHLD,FHNUM,QUAFI
"RTN","FHCTF3",144,0)
 K FHOR,FHTICK,FHTYP,FHTYPSV,IEN200,REASK,TYS,MOCOM,AGE,F1,FHDR,DIC,DIR,FHSV,FHCHK,D3,Y0,ALL,T,TF2,NO,TUN,TFCOM,STR,QUA,QUASE
"RTN","FHCTF3",145,0)
 K FHDU,X1,REQ,COM,FHTDAT,FHI115,I
"RTN","FHCTF3",146,0)
 Q
"RTN","FHCTF5")
0^10^B26427742^B12923038
"RTN","FHCTF5",1,0)
FHCTF5 ; HIOFO/REL/FAI - Check Inpatients for Monitors ;08/29/06  14:43
"RTN","FHCTF5",2,0)
 ;;5.5;Dietetics;**4**;Jan 28, 2005;Build 32
"RTN","FHCTF5",3,0)
 D NOW^%DTC S NOW=% D CLR
"RTN","FHCTF5",4,0)
 S FHEDT=$P(NOW,".")
"RTN","FHCTF5",5,0)
 F WRD=0:0 S WRD=$O(^FH(119.6,WRD)) Q:WRD<1  S FHDUZ=$P($G(^(WRD,0)),"^",2) F FHDFN=0:0 S FHDFN=$O(^FHPT("AW",WRD,FHDFN)) Q:FHDFN<1  S ADM=$G(^FHPT("AW",WRD,FHDFN)) D PAT
"RTN","FHCTF5",6,0)
 D P5
"RTN","FHCTF5",7,0)
 K %,A1,A2,ADM,BMI,CLR,DA,DD,DFN,DIC,DTE,FHDUZ,FHOR,FHORD,FHTF
"RTN","FHCTF5",8,0)
 K GMRVSTR,HT,L,LST,MONIFN,MONTX,N,NOW,PX,STOP,TF,WRD,WT,X,X0,Y
"RTN","FHCTF5",9,0)
 K I,FHTMO,FHTFLG,FHEDT,FHTICK,FHTDFN,FHTDT1,FHWTDT,FHHTDT
"RTN","FHCTF5",10,0)
 K A,A0,AGE,BID,DEAD,FDA,FHAGE,FHBID,FHCLIN,FHDFN,FHI,FHI115,FHJ,FHJDAT,FHDFN
"RTN","FHCTF5",11,0)
 K FHPTNM,FHPCZN,FHSEX,FHSSN,FHHDAT,FILE,HTM,IEN,IEN200,NAM,PID,SEX
"RTN","FHCTF5",12,0)
 Q
"RTN","FHCTF5",13,0)
PAT ;; Check a patient
"RTN","FHCTF5",14,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHCTF5",15,0)
 S Y=^DPT(DFN,0),NAM=$P(Y,"^",1),SEX=$P(Y,"^",2),DOB=$P(Y,"^",3)
"RTN","FHCTF5",16,0)
 S AGE="" I DOB'="" S AGE=$E(NOW,1,3)-$E(DOB,1,3)-($E(NOW,4,7)<$E(DOB,4,7))
"RTN","FHCTF5",17,0)
 S DEAD=$P($G(^DPT(DFN,.35)),"^",1) Q:DEAD'=""
"RTN","FHCTF5",18,0)
 ;
"RTN","FHCTF5",19,0)
P0 ; Calculate BMI
"RTN","FHCTF5",20,0)
 S GMRVSTR="WT" D EN6^GMRVUTL S WT=$P(X,"^",8),FHWTDT=$P(X,"^",1)
"RTN","FHCTF5",21,0)
 S GMRVSTR="HT" D EN6^GMRVUTL S HT=$P(X,"^",8),FHHTDT=$P(X,"^",1)
"RTN","FHCTF5",22,0)
 S FHGMDT=$S(FHWTDT>FHHTDT:FHWTDT,FHHTDT>FHWTDT:FHHTDT,1:FHWTDT)
"RTN","FHCTF5",23,0)
 S BMI="" I WT,HT S A2=HT*.0254,BMI=+$J(WT/2.2/(A2*A2),0,1)
"RTN","FHCTF5",24,0)
 I $G(BMI)=""!($G(BMI)'<18.5) G P1
"RTN","FHCTF5",25,0)
 S MONTX="Monitor: BMI < 18.5",DTE=NOW
"RTN","FHCTF5",26,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1) I 'N,(FHGMDT>(FHEDT-7)) D FIL G P1
"RTN","FHCTF5",27,0)
 I 'N G P1
"RTN","FHCTF5",28,0)
 ; Check if been 30 days
"RTN","FHCTF5",29,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2)
"RTN","FHCTF5",30,0)
 S X=$$FMDIFF^XLFDT(DTE,LST) I (X>30) D FIL
"RTN","FHCTF5",31,0)
P1 ; Check for current Tubefeeding
"RTN","FHCTF5",32,0)
 S TF=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",4) I 'TF G P2
"RTN","FHCTF5",33,0)
 S MONTX="Monitor: On Tubefeeding",DTE=NOW
"RTN","FHCTF5",34,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1) I 'N D FIL G P2
"RTN","FHCTF5",35,0)
 ; Check if been 7 days
"RTN","FHCTF5",36,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2)
"RTN","FHCTF5",37,0)
 S X=$$FMDIFF^XLFDT(DTE,LST) I X>7 D FIL
"RTN","FHCTF5",38,0)
P2 ; Check for Hyperals
"RTN","FHCTF5",39,0)
 S MONTX="",DTE=NOW
"RTN","FHCTF5",40,0)
 D PSS435^PSS55(DFN,,"FHIV") F DA=0:0 S DA=$O(^TMP($J,"FHIV",DA)) Q:DA<1  D
"RTN","FHCTF5",41,0)
 .S (X0,HTM)=$P($G(^TMP($J,"FHIV",DA,.02)),"^",2) I X0>NOW Q
"RTN","FHCTF5",42,0)
 .S MONTX="Monitor: On Hyperals" D FIL Q
"RTN","FHCTF5",43,0)
 ;
"RTN","FHCTF5",44,0)
P3 ; Check for Serum Albumin
"RTN","FHCTF5",45,0)
 S MONTX="",PX=6 D LAB^FHASM4 I $D(^TMP($J,"LRTST")) D
"RTN","FHCTF5",46,0)
 .F L=0:0 S L=$O(^TMP($J,"LRTST",L)) Q:L<1  S Y=$TR($P(^(L),"^",6)," ","") I Y'?1A.E,Y<2.8 S MONTX="Monitor: Albumin < 2.8",DTE=$P(^(L),"^",7)
"RTN","FHCTF5",47,0)
 I MONTX="" G P4
"RTN","FHCTF5",48,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1)
"RTN","FHCTF5",49,0)
 ;process new Albumin if old test date is within 7 days.
"RTN","FHCTF5",50,0)
 I 'N S X=$$FMDIFF^XLFDT(NOW,DTE) I X<8 D FIL G P4
"RTN","FHCTF5",51,0)
 I 'N G P4
"RTN","FHCTF5",52,0)
 ; Check if same test
"RTN","FHCTF5",53,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2) I DTE>LST D FIL
"RTN","FHCTF5",54,0)
 ;
"RTN","FHCTF5",55,0)
P4 ; Check for NPO+Clr Liq > 3 days
"RTN","FHCTF5",56,0)
 S A1=NOW,DTE=NOW
"RTN","FHCTF5",57,0)
 F  D  Q:'A1
"RTN","FHCTF5",58,0)
 .S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1),-1) Q:'A1
"RTN","FHCTF5",59,0)
 .S FHORD=$P($G(^FHPT(FHDFN,"A",ADM,"AC",A1,0)),"^",2) I 'FHORD S A1="" Q
"RTN","FHCTF5",60,0)
 .S FHOR=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))
"RTN","FHCTF5",61,0)
 .I $P(FHOR,"^",7)="N" S DTE=A1 Q
"RTN","FHCTF5",62,0)
 .I $P(FHOR,"^",2)=CLR S DTE=A1 Q
"RTN","FHCTF5",63,0)
 .S A1="" Q
"RTN","FHCTF5",64,0)
 I DTE'<NOW Q
"RTN","FHCTF5",65,0)
 S X=$$FMDIFF^XLFDT(NOW,DTE) Q:X<3
"RTN","FHCTF5",66,0)
 S MONTX="Monitor: NPO+Clr Liq > 3 days",DTE=NOW
"RTN","FHCTF5",67,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1) I 'N D FIL Q
"RTN","FHCTF5",68,0)
 ; Check if been 3 days
"RTN","FHCTF5",69,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2)
"RTN","FHCTF5",70,0)
 S X=$$FMDIFF^XLFDT(NOW,LST) I X>3 D FIL
"RTN","FHCTF5",71,0)
 Q
"RTN","FHCTF5",72,0)
P5 ;clear personalized tickler and quit
"RTN","FHCTF5",73,0)
 F FHI=0:0 S FHI=$O(^FH(119,FHI)) Q:FHI'>0  F FHJ=0:0 S FHJ=$O(^FH(119,FHI,"I",FHJ)) Q:FHJ'>0  D
"RTN","FHCTF5",74,0)
 .S FHJDAT=$G(^FH(119,FHI,"I",FHJ,0))
"RTN","FHCTF5",75,0)
 .Q:$P(FHJDAT,U,2)'="X"
"RTN","FHCTF5",76,0)
 .I $P(FHJDAT,U,1)<NOW K ^FH(119,FHI,"I",FHJ)
"RTN","FHCTF5",77,0)
 Q
"RTN","FHCTF5",78,0)
CLR ; Find Clear Liquid
"RTN","FHCTF5",79,0)
 S CLR=$O(^FH(111,"B","CLEAR LIQUID",0)) Q:CLR
"RTN","FHCTF5",80,0)
 S CLR=$O(^FH(111,"C","CLEAR LIQUID",0)) Q:CLR
"RTN","FHCTF5",81,0)
 S CLR=$O(^FH(111,"C","CLR LIQ",0)) Q:CLR
"RTN","FHCTF5",82,0)
 S CLR=$O(^FH(111,"C","CL",0)) Q:CLR
"RTN","FHCTF5",83,0)
 Q
"RTN","FHCTF5",84,0)
FIL ; File Monitor
"RTN","FHCTF5",85,0)
 S FHCLIN=""
"RTN","FHCTF5",86,0)
 K XQA S:FHDUZ FHCLIN=$P($G(^VA(200,FHDUZ,0)),U,1)
"RTN","FHCTF5",87,0)
 D PATNAME^FHOMUTL
"RTN","FHCTF5",88,0)
 I (MONTX["BMI"),($P($G(^FH(119.6,WRD,1)),"^",5)'="Y") G TFIL
"RTN","FHCTF5",89,0)
 I (MONTX["Tubefeed"),($P($G(^FH(119.6,WRD,1)),"^",6)'="Y") G TFIL
"RTN","FHCTF5",90,0)
 I (MONTX["Hyperals"),($P($G(^FH(119.6,WRD,1)),"^",7)'="Y") G TFIL
"RTN","FHCTF5",91,0)
 I (MONTX["Albumin"),($P($G(^FH(119.6,WRD,1)),"^",8)'="Y") G TFIL
"RTN","FHCTF5",92,0)
 I (MONTX["NPO+Clr"),($P($G(^FH(119.6,WRD,1)),"^",9)'="Y") G TFIL
"RTN","FHCTF5",93,0)
 K XQA,XQAMSG,XQAOPT,XQAROU
"RTN","FHCTF5",94,0)
 S XQAID="FH,"_$J_","_$H
"RTN","FHCTF5",95,0)
 S XQAMSG=$E(FHPTNM,1,9)_" ("_$E(FHPTNM,1,1)_$P(FHSSN,"-",3)_"): "
"RTN","FHCTF5",96,0)
 S XQAOPT="FHCTF2",XQAMSG=XQAMSG_"  "_MONTX_" "_$E(DTE,4,5)_"/"_$E(DTE,6,7)_"/"_$E(DTE,2,3)_"    Clinician: "_$G(FHCLIN)
"RTN","FHCTF5",97,0)
 F A=0:0 S A=$O(^FH(119.6,WRD,2,A)) Q:A'>0  S TK=$P($G(^FH(119.6,WRD,2,A,0)),U,1),XQA(TK)=""
"RTN","FHCTF5",98,0)
 I '$D(XQA(FHDUZ)) S XQA(FHDUZ)=""
"RTN","FHCTF5",99,0)
 D SETUP^XQALERT
"RTN","FHCTF5",100,0)
 ;
"RTN","FHCTF5",101,0)
TFIL ;
"RTN","FHCTF5",102,0)
 Q:$G(MONTX)=""
"RTN","FHCTF5",103,0)
 S FHTFLG=0
"RTN","FHCTF5",104,0)
 F I=0:0 S I=$O(^FH(119,FHDUZ,"I",I)) Q:I'>0  D
"RTN","FHCTF5",105,0)
 .S FHTDT1=$P(I,".",1)
"RTN","FHCTF5",106,0)
 .S FHTICK=^FH(119,FHDUZ,"I",I,0),FHTMO=$P(FHTICK,"^",3),FHTDFN=$P(FHTICK,"^",4)
"RTN","FHCTF5",107,0)
 .I (FHTMO=MONTX),(FHTDFN=DFN),(FHTDT1=FHEDT) S FHTFLG=1
"RTN","FHCTF5",108,0)
 Q:FHTFLG  ;only one monitor for the same day, same clinician and same pt.
"RTN","FHCTF5",109,0)
 L +^FHPT(FHDFN,"A",ADM,"MO",0)
"RTN","FHCTF5",110,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"MO",0)) S ^FHPT(FHDFN,"A",ADM,"MO",0)="^115.11^^"
"RTN","FHCTF5",111,0)
 L -^FHPT(FHDFN,"A",ADM,"MO",0)
"RTN","FHCTF5",112,0)
 K DIC,DD,DO,DINUM S DIC="^FHPT(FHDFN,""A"",ADM,""MO"",",DIC(0)="L",DA(1)=ADM,DA(2)=FHDFN,DLAYGO=115,X=MONTX D FILE^DICN K DIC,DLAYGO
"RTN","FHCTF5",113,0)
 Q:Y<1  S MONIFN=+Y
"RTN","FHCTF5",114,0)
 S $P(^FHPT(FHDFN,"A",ADM,"MO",MONIFN,0),"^",2)=DTE,^FHPT(FHDFN,"A",ADM,"MO","AC",DTE,MONIFN)=""
"RTN","FHCTF5",115,0)
CRT ;create tickler
"RTN","FHCTF5",116,0)
 S FHTF=DTE_"^M^"_MONTX_"^"_DFN_"^"_ADM_"^"_MONIFN
"RTN","FHCTF5",117,0)
 D:FHDUZ FILE^FHCTF2
"RTN","FHCTF5",118,0)
 Q
"RTN","FHMMNPRT")
0^5^B34957812^B34894053
"RTN","FHMMNPRT",1,0)
FHMMNPRT ;Hines OIFO/RTK,AAC - Mult Monitor Report Print ;02/08/06  10:29
"RTN","FHMMNPRT",2,0)
 ;;5.5;DIETETICS;**4**;Jan 28, 2005;Build 32
"RTN","FHMMNPRT",3,0)
 ;
"RTN","FHMMNPRT",4,0)
 S (COUNT,COMM,CTCOMM,MON,ALLMON,ALLMON1,M1,M2,M3,M4,M5)=0
"RTN","FHMMNPRT",5,0)
 S PG=0,(EX,XX)="" D NOW^%DTC S Y=X D DD^%DT S FHNDT=Y
"RTN","FHMMNPRT",6,0)
 K FHMNTT
"RTN","FHMMNPRT",7,0)
 ;
"RTN","FHMMNPRT",8,0)
PRINT ;
"RTN","FHMMNPRT",9,0)
 S (MM1,MM2,MM3,MM4,MM5)=0
"RTN","FHMMNPRT",10,0)
 D MNAME
"RTN","FHMMNPRT",11,0)
 Q:XX="*"
"RTN","FHMMNPRT",12,0)
 I FHNXIEN'="ALL" I '$D(^TMP($J,"FHDATA",COMM,FHNXIEN)) D MESSAGE Q
"RTN","FHMMNPRT",13,0)
 I FHNXIEN'="ALL" S ZZ=FHNXIEN D DISP,D1END Q
"RTN","FHMMNPRT",14,0)
 I FHNXIEN="ALL" S ZZ="" F  S ZZ=$O(^TMP($J,"FHDATA",COMM,ZZ)) Q:ZZ=""!(EX=U)  D
"RTN","FHMMNPRT",15,0)
 .D PG
"RTN","FHMMNPRT",16,0)
 .D DISP
"RTN","FHMMNPRT",17,0)
 .S ALLMON=ALLMON+MON
"RTN","FHMMNPRT",18,0)
 .S ALLMON1=ALLMON1+MON
"RTN","FHMMNPRT",19,0)
 .S M1=M1+MON1,M2=M2+MON2,M3=M3+MON3,M4=M4+MON4,M5=M5+MON5
"RTN","FHMMNPRT",20,0)
 .S MM1=MM1+MON1,MM2=MM2+MON2,MM3=MM3+MON3,MM4=MM4+MON4,MM5=MM5+MON5
"RTN","FHMMNPRT",21,0)
 .Q
"RTN","FHMMNPRT",22,0)
 I FHNXIEN'="ALL"!(EX=U) G END Q
"RTN","FHMMNPRT",23,0)
 I ALLMON=0 W !!?5,"NO PATIENTS WITH MONITORS IN GIVEN DATE RANGE" D END Q
"RTN","FHMMNPRT",24,0)
 ;
"RTN","FHMMNPRT",25,0)
 W !!,"** TOTAL COMMUNICATIONS OFFICE - Admissions.....: ",NAME I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",26,0)
 ;
"RTN","FHMMNPRT",27,0)
 W !!?16,"Totals for ALL ",$S(FHSORT="C":"Clinicians.......: ",1:"Wards............: "),$J(ALLMON1,3) I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",28,0)
 ;I ZCO'="Y",ALLMON1=0 G PRINT
"RTN","FHMMNPRT",29,0)
 I ALLMON>0 W !?16,"Monitor: Albumin < 2.8..........: ",$J(MM1,3),"   ",$J(((MM1/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",30,0)
 I ALLMON>0 W !?16,"Monitor: BMI < 18.5...............: ",$J(MM2,3),"   ",$J(((MM2/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",31,0)
 I ALLMON>0 W !?16,"Monitor: NPO+Clr Liq > 3 days...: ",$J(MM3,3),"   ",$J(((MM3/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",32,0)
 I ALLMON>0 W !?16,"Monitor: On Hyperals............: ",$J(MM4,3),"   ",$J(((MM4/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",33,0)
 I ALLMON>0 W !?16,"Monitor: On Tubefeeding.........: ",$J(MM5,3),"   ",$J(((MM5/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",34,0)
 ;
"RTN","FHMMNPRT",35,0)
 ;
"RTN","FHMMNPRT",36,0)
 S (MM1,MM2,MM3,MM4,MM5,ALLMON1)=0
"RTN","FHMMNPRT",37,0)
 G PRINT Q
"RTN","FHMMNPRT",38,0)
 Q
"RTN","FHMMNPRT",39,0)
 ;
"RTN","FHMMNPRT",40,0)
THEND ;
"RTN","FHMMNPRT",41,0)
 S NAME="ALL COMMUNICATION OFFICES " D PG I EX=U Q
"RTN","FHMMNPRT",42,0)
 W !!,"*** TOTAL PATIENTS WITH MONITORS ALL COMMUNICATION OFFICES....: ",CTCOMM
"RTN","FHMMNPRT",43,0)
 ;
"RTN","FHMMNPRT",44,0)
 W !!?16,"Totals for ALL ",$S(FHSORT="C":"Clinicians.......: ",1:"Wards............: "),$J(ALLMON,3)
"RTN","FHMMNPRT",45,0)
 I ALLMON>0 W !?16,"Monitor: Albumin < 2.8..........: ",$J(M1,3),"   ",$J(((M1/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",46,0)
 I ALLMON>0 W !?16,"Monitor: BMI < 18.5...............: ",$J(M2,3),"   ",$J(((M2/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",47,0)
 I ALLMON>0 W !?16,"Monitor: NPO+Clr Liq > 3 days...: ",$J(M3,3),"   ",$J(((M3/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",48,0)
 I ALLMON>0 W !?16,"Monitor: On Hyperals............: ",$J(M4,3),"   ",$J(((M4/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",49,0)
 I ALLMON>0 W !?16,"Monitor: On Tubefeeding.........: ",$J(M5,3),"   ",$J(((M5/ALLMON)*100),1,2),"%" I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",50,0)
 ;
"RTN","FHMMNPRT",51,0)
 ;W !!!,"TOTAL ADMISSIONS....:",?23,FHTADM
"RTN","FHMMNPRT",52,0)
 ;W !,"TOTAL MONITORS......:",?23,ALLMON
"RTN","FHMMNPRT",53,0)
 ;I FHTADM>0 W !,"PERCENTAGE..........:",?23,$J(((ALLMON/FHTADM)*100),1,2),"%"
"RTN","FHMMNPRT",54,0)
 D LINE
"RTN","FHMMNPRT",55,0)
 S XX="*"
"RTN","FHMMNPRT",56,0)
 Q
"RTN","FHMMNPRT",57,0)
 ;I $Y>(IOSL-4)
"RTN","FHMMNPRT",58,0)
 ;
"RTN","FHMMNPRT",59,0)
D1END W ! K DIR Q:EX'=U  S DIR(0)="E" D ^DIR  ;I IOST?1"C".E,EX'=U 
"RTN","FHMMNPRT",60,0)
 D END Q
"RTN","FHMMNPRT",61,0)
 Q
"RTN","FHMMNPRT",62,0)
DISP ;
"RTN","FHMMNPRT",63,0)
 S (TOT,MON,MON1,MON2,MON3,MON4,MON5)=0
"RTN","FHMMNPRT",64,0)
 F YY=0:0 S YY=$O(^TMP($J,"FHDATA",COMM,ZZ,YY)) Q:YY'>0  D
"RTN","FHMMNPRT",65,0)
DISP2 .F HH=0:0 S HH=$O(^TMP($J,"FHDATA",COMM,ZZ,YY,HH)) Q:HH'>0!(EX=U)  D
"RTN","FHMMNPRT",66,0)
 ..I $Y>(IOSL-4) I EX=U Q  W ! D HDR
"RTN","FHMMNPRT",67,0)
 ..S CTCOMM=CTCOMM+1
"RTN","FHMMNPRT",68,0)
 ..S DFN=$P(^TMP($J,"FHDATA",COMM,ZZ,YY,HH),U,5)
"RTN","FHMMNPRT",69,0)
 ..S Y=YY X ^DD("DD") W !,Y
"RTN","FHMMNPRT",70,0)
 ..W ?13,$P(^TMP($J,"FHDATA",COMM,ZZ,YY,HH),U,2)
"RTN","FHMMNPRT",71,0)
 ..W ?39,$P(^TMP($J,"FHDATA",COMM,ZZ,YY,HH),U,3)
"RTN","FHMMNPRT",72,0)
 ..W ?47,$P(^TMP($J,"FHDATA",COMM,ZZ,YY,HH),U,6)
"RTN","FHMMNPRT",73,0)
 ..I $P(^TMP($J,"FHDATA",COMM,ZZ,YY,HH),U,7)="Yes"  D
"RTN","FHMMNPRT",74,0)
 ...F NUM=0:0 S NUM=$O(FHMON(DFN,HH,NUM)) Q:NUM'>0!(EX=U)  D
"RTN","FHMMNPRT",75,0)
 ....I NUM'=1 W !
"RTN","FHMMNPRT",76,0)
 ....S MON=MON+1,MONTYP=$P($P(FHMON(DFN,HH,NUM),U,1),": ",2)
"RTN","FHMMNPRT",77,0)
 ....S PC=$S(MONTYP["Albumin":1,MONTYP["BMI":2,MONTYP["NPO+Clr":3,MONTYP["Hyper":4,1:5)
"RTN","FHMMNPRT",78,0)
 ....I $G(FHMNTT(COMM,ZZ))="" S FHMNTT(COMM,ZZ)=""
"RTN","FHMMNPRT",79,0)
 ....S $P(FHMNTT(COMM,ZZ),U,PC)=$P(FHMNTT(COMM,ZZ),U,PC)+1
"RTN","FHMMNPRT",80,0)
 ....W ?56,MONTYP I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",81,0)
 ....Q
"RTN","FHMMNPRT",82,0)
 ...Q
"RTN","FHMMNPRT",83,0)
 ..S TOT=TOT+1
"RTN","FHMMNPRT",84,0)
 ..Q
"RTN","FHMMNPRT",85,0)
 .Q
"RTN","FHMMNPRT",86,0)
 I MON=0!(EX=U) Q
"RTN","FHMMNPRT",87,0)
 I FHSORT="C" W !!,"*  CLINICIAN: ",ZZ
"RTN","FHMMNPRT",88,0)
 I FHSORT="W" W !!,"*  WARD: ",ZZ
"RTN","FHMMNPRT",89,0)
 W !?16,"Total Number of Monitors........: ",$J(MON,3) I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",90,0)
 S PCE=$P(FHMNTT(COMM,ZZ),U,1) I PCE>0 W !?16,"Monitor: Albumin < 2.8..........: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON1=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",91,0)
 S PCE=$P(FHMNTT(COMM,ZZ),U,2) I PCE>0 W !?16,"Monitor: BMI < 18.5...............: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON2=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",92,0)
 S PCE=$P(FHMNTT(COMM,ZZ),U,3) I PCE>0 W !?16,"Monitor: NPO+Clr Liq > 3 days...: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON3=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",93,0)
 S PCE=$P(FHMNTT(COMM,ZZ),U,4) I PCE>0 W !?16,"Monitor: On Hyperals............: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON4=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMMNPRT",94,0)
 S PCE=$P(FHMNTT(COMM,ZZ),U,5) I PCE>0 W !?16,"Monitor: On Tubefeeding.........: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON5=PCE
"RTN","FHMMNPRT",95,0)
 W !
"RTN","FHMMNPRT",96,0)
 Q
"RTN","FHMMNPRT",97,0)
 ;
"RTN","FHMMNPRT",98,0)
MESSAGE ;
"RTN","FHMMNPRT",99,0)
 W !!?5,"NO PATIENTS WITH MONITORS IN GIVEN DATE RANGE"
"RTN","FHMMNPRT",100,0)
 W !?10,"FOR THIS ",$S(FHSORT="C":"CLINICIAN",1:"WARD"),": ",FHNXIEN
"RTN","FHMMNPRT",101,0)
 Q
"RTN","FHMMNPRT",102,0)
END K FHMNTT,HH,M1,M2,M3,M4,M5,MON,MON1,MON2,MON3,MON4,MON5,MONTYP
"RTN","FHMMNPRT",103,0)
 K NUM,PC,PCE,PG,PER,TOT,YY
"RTN","FHMMNPRT",104,0)
 QUIT
"RTN","FHMMNPRT",105,0)
 Q
"RTN","FHMMNPRT",106,0)
 ;
"RTN","FHMMNPRT",107,0)
PG ;
"RTN","FHMMNPRT",108,0)
 I IOST?1"C".E  W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHMMNPRT",109,0)
 D HDR Q
"RTN","FHMMNPRT",110,0)
 Q
"RTN","FHMMNPRT",111,0)
HDR ;Header
"RTN","FHMMNPRT",112,0)
 W:$Y @IOF W !,FHNDT,?60,"Page: " S PG=PG+1 W PG,!
"RTN","FHMMNPRT",113,0)
 W !,?25,"Nutrition Monitor Statistic Report"
"RTN","FHMMNPRT",114,0)
 W !,NAME,!
"RTN","FHMMNPRT",115,0)
 W "Admission",?13,"Patient",?39,"SSN",?45,"Status",?56,"Monitor(s)"
"RTN","FHMMNPRT",116,0)
LINE W ! F Z=1:1:79 W "="
"RTN","FHMMNPRT",117,0)
 Q
"RTN","FHMMNPRT",118,0)
MNAME ;
"RTN","FHMMNPRT",119,0)
 I ZCO'="Y" S CONUMX=CONUMX-1 G:CONUMX<1 THEND  S COXX=$P(CO,"^",CONUMX),NAME=$P(CONAME,"^",CONUMX) S COMM=COXX Q
"RTN","FHMMNPRT",120,0)
 I ZCO="Y" S COUNT=COUNT+1 G:COUNT>ZOUT THEND  S NAME=$G(^FH(119.73,COUNT,0)),NAME=$P(NAME,"^") S COMM=COUNT
"RTN","FHMMNPRT",121,0)
 I $D(^FH(119.73,COUNT,"I"))!'$D(^FH(119.73,COUNT,0)) G MNAME
"RTN","FHMMNPRT",122,0)
 Q
"RTN","FHMMNPRT",123,0)
QUIT ;
"RTN","FHMMNPRT",124,0)
 W !
"RTN","FHMMNPRT",125,0)
 Q
"RTN","FHMNPRT")
0^6^B16395628^B16366448
"RTN","FHMNPRT",1,0)
FHMNPRT ;Hines OIFO/RTK - Dietetics Monitor Report Print ;02/08/06  10:29
"RTN","FHMNPRT",2,0)
 ;;5.5;DIETETICS;**4**;Jan 28, 2005;Build 32
"RTN","FHMNPRT",3,0)
 ;
"RTN","FHMNPRT",4,0)
PRINT ;
"RTN","FHMNPRT",5,0)
 K FHMNTT S PG=0,EX="" D NOW^%DTC S Y=X D DD^%DT S FHNDT=Y D HDR
"RTN","FHMNPRT",6,0)
 S (ALLMON,M1,M2,M3,M4,M5)=0
"RTN","FHMNPRT",7,0)
 I FHNXIEN'="ALL",'$D(FHDATA(FHNXIEN)) D MESSAGE Q
"RTN","FHMNPRT",8,0)
 I FHNXIEN'="ALL" S ZZ=FHNXIEN D DISP,D1END Q
"RTN","FHMNPRT",9,0)
 I FHNXIEN="ALL" S ZZ="" F  S ZZ=$O(FHDATA(ZZ)) Q:ZZ=""!(EX=U)  D
"RTN","FHMNPRT",10,0)
 .D DISP
"RTN","FHMNPRT",11,0)
 .S ALLMON=ALLMON+MON
"RTN","FHMNPRT",12,0)
 .S M1=M1+MON1,M2=M2+MON2,M3=M3+MON3,M4=M4+MON4,M5=M5+MON5
"RTN","FHMNPRT",13,0)
 .Q
"RTN","FHMNPRT",14,0)
 I FHNXIEN'="ALL"!(EX=U) D END Q
"RTN","FHMNPRT",15,0)
 I ALLMON=0 W !!?5,"NO PATIENTS WITH MONITORS IN GIVEN DATE RANGE" D END Q
"RTN","FHMNPRT",16,0)
 W !!?16,"Totals for ALL ",$S(FHSORT="C":"Clinicians.......: ",1:"Wards............: "),$J(ALLMON,3)
"RTN","FHMNPRT",17,0)
 W !?16,"Monitor: Albumin ...............: ",$J(M1,3),"   ",$J(((M1/ALLMON)*100),1,2),"%"
"RTN","FHMNPRT",18,0)
 W !?16,"Monitor: BMI .....................: ",$J(M2,3),"   ",$J(((M2/ALLMON)*100),1,2),"%"
"RTN","FHMNPRT",19,0)
 W !?16,"Monitor: NPO+Clr Liq > 3 days...: ",$J(M3,3),"   ",$J(((M3/ALLMON)*100),1,2),"%"
"RTN","FHMNPRT",20,0)
 W !?16,"Monitor: On Hyperals............: ",$J(M4,3),"   ",$J(((M4/ALLMON)*100),1,2),"%"
"RTN","FHMNPRT",21,0)
 W !?16,"Monitor: On Tubefeeding.........: ",$J(M5,3),"   ",$J(((M5/ALLMON)*100),1,2),"%"
"RTN","FHMNPRT",22,0)
 I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",23,0)
 W !!!,"TOTAL ADMISSIONS....:",?23,FHTADM
"RTN","FHMNPRT",24,0)
 W !,"TOTAL MONITORS......:",?23,ALLMON
"RTN","FHMNPRT",25,0)
 I FHTADM>0 W !,"PERCENTAGE..........:",?23,$J(((ALLMON/FHTADM)*100),1,2),"%"
"RTN","FHMNPRT",26,0)
 ;
"RTN","FHMNPRT",27,0)
D1END I IOST?1"C".E,EX'=U W ! K DIR S DIR(0)="E" D ^DIR
"RTN","FHMNPRT",28,0)
 D END Q
"RTN","FHMNPRT",29,0)
DISP ;
"RTN","FHMNPRT",30,0)
 I FHSORT="C" W !!?25,"CLINICIAN: ",ZZ
"RTN","FHMNPRT",31,0)
 I FHSORT="W" W !!?25,"WARD: ",ZZ
"RTN","FHMNPRT",32,0)
 S (TOT,MON,MON1,MON2,MON3,MON4,MON5)=0
"RTN","FHMNPRT",33,0)
 F YY=0:0 S YY=$O(FHDATA(ZZ,YY)) Q:YY'>0  D
"RTN","FHMNPRT",34,0)
 .F HH=0:0 S HH=$O(FHDATA(ZZ,YY,HH)) Q:HH'>0!(EX=U)  D
"RTN","FHMNPRT",35,0)
 ..I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",36,0)
 ..S DFN=$P(FHDATA(ZZ,YY,HH),U,5)
"RTN","FHMNPRT",37,0)
 ..S Y=YY X ^DD("DD") W !,Y
"RTN","FHMNPRT",38,0)
 ..W ?13,$P(FHDATA(ZZ,YY,HH),U,1)
"RTN","FHMNPRT",39,0)
 ..W ?39,$P(FHDATA(ZZ,YY,HH),U,2)
"RTN","FHMNPRT",40,0)
 ..W ?47,$P(FHDATA(ZZ,YY,HH),U,6)
"RTN","FHMNPRT",41,0)
 ..I $P(FHDATA(ZZ,YY,HH),U,3)="Yes" D
"RTN","FHMNPRT",42,0)
 ...F NUM=0:0 S NUM=$O(FHMON(DFN,HH,NUM)) Q:NUM'>0!(EX=U)  D
"RTN","FHMNPRT",43,0)
 ....I NUM'=1 W !
"RTN","FHMNPRT",44,0)
 ....S MON=MON+1,MONTYP=$P($P(FHMON(DFN,HH,NUM),U,1),": ",2)
"RTN","FHMNPRT",45,0)
 ....S PC=$S(MONTYP["Albumin":1,MONTYP["BMI":2,MONTYP["NPO+Clr":3,MONTYP["Hyper":4,1:5)
"RTN","FHMNPRT",46,0)
 ....I $G(FHMNTT(ZZ))="" S FHMNTT(ZZ)=""
"RTN","FHMNPRT",47,0)
 ....S $P(FHMNTT(ZZ),U,PC)=$P(FHMNTT(ZZ),U,PC)+1
"RTN","FHMNPRT",48,0)
 ....W ?56,MONTYP I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",49,0)
 ....Q
"RTN","FHMNPRT",50,0)
 ...Q
"RTN","FHMNPRT",51,0)
 ..S TOT=TOT+1
"RTN","FHMNPRT",52,0)
 ..Q
"RTN","FHMNPRT",53,0)
 .Q
"RTN","FHMNPRT",54,0)
 I EX=U Q
"RTN","FHMNPRT",55,0)
 W !!?16,"Total Number of Monitors........: ",$J(MON,3) I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",56,0)
 S PCE=$P(FHMNTT(ZZ),U,1) I PCE>0 W !?16,"Monitor: Albumin ...............: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON1=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",57,0)
 S PCE=$P(FHMNTT(ZZ),U,2) I PCE>0 W !?16,"Monitor: BMI .....................: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON2=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",58,0)
 S PCE=$P(FHMNTT(ZZ),U,3) I PCE>0 W !?16,"Monitor: NPO+Clr Liq > 3 days...: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON3=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",59,0)
 S PCE=$P(FHMNTT(ZZ),U,4) I PCE>0 W !?16,"Monitor: On Hyperals............: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON4=PCE I $Y>(IOSL-4) D PG I EX=U Q
"RTN","FHMNPRT",60,0)
 S PCE=$P(FHMNTT(ZZ),U,5) I PCE>0 W !?16,"Monitor: On Tubefeeding.........: ",$J(PCE,3),"   ",$J(((PCE/MON)*100),1,2),"%" S MON5=PCE
"RTN","FHMNPRT",61,0)
 W ! Q
"RTN","FHMNPRT",62,0)
 ;
"RTN","FHMNPRT",63,0)
MESSAGE ;
"RTN","FHMNPRT",64,0)
 W !!?5,"NO PATIENTS WITH MONITORS IN GIVEN DATE RANGE"
"RTN","FHMNPRT",65,0)
 W !?10,"FOR THIS ",$S(FHSORT="C":"CLINICIAN",1:"WARD"),": ",FHNXIEN
"RTN","FHMNPRT",66,0)
 Q
"RTN","FHMNPRT",67,0)
END K FHMNTT,HH,M1,M2,M3,M4,M5,MON,MON1,MON2,MON3,MON4,MON5,MONTYP
"RTN","FHMNPRT",68,0)
 K NUM,PC,PCE,PG,PER,TOT,YY
"RTN","FHMNPRT",69,0)
 Q
"RTN","FHMNPRT",70,0)
PG ;
"RTN","FHMNPRT",71,0)
 I IOST?1"C".E W ! K DIR S DIR(0)="E" D ^DIR I 'Y S EX=U Q
"RTN","FHMNPRT",72,0)
 D HDR Q
"RTN","FHMNPRT",73,0)
HDR ;Header
"RTN","FHMNPRT",74,0)
 W:$Y @IOF W !,FHNDT,?60,"Page: " S PG=PG+1 W PG,!!
"RTN","FHMNPRT",75,0)
 W "Admission",?13,"Patient",?39,"SSN",?45,"Status",?56,"Monitor(s)"
"RTN","FHMNPRT",76,0)
 W ! F Z=1:1:79 W "="
"RTN","FHMNPRT",77,0)
 Q
"RTN","FHORC5")
0^7^B2760179^B2667793
"RTN","FHORC5",1,0)
FHORC5 ; HISC/REL - Consult Management ;4/12/06  13:26
"RTN","FHORC5",2,0)
 ;;5.5;DIETETICS;**4**;Jan 28, 2005;Build 32
"RTN","FHORC5",3,0)
EN9 ; Enter/Edit Ward Assignments
"RTN","FHORC5",4,0)
 K DIC S (DIC,DIE)="^FH(119.6,",DIC(0)="AEQM"
"RTN","FHORC5",5,0)
 W ! D ^DIC G KIL:U[X!$D(DTOUT),EN9:Y<1 S OLD=$S($P(Y,"^",3):"",1:$P(^FH(119.6,+Y,0),"^",2))
"RTN","FHORC5",6,0)
 S DA=+Y,DR="1;112" D ^DIE S NEW=$P(^FH(119.6,DA,0),"^",2) I 'NEW!('OLD) K OLD,NEW,X,Y G EN9
"RTN","FHORC5",7,0)
 D:OLD'=NEW EN2^FHORC4 K OLD,NEW,X,Y G EN9
"RTN","FHORC5",8,0)
EN10 ; List Ward Assignments
"RTN","FHORC5",9,0)
 W ! S L=0,DIC="^FH(119.6,",FLDS="[FHORWRD]",BY=".01"
"RTN","FHORC5",10,0)
 S (FR,TO)="",DHD="NUTRITION LOCATION ASSIGNMENTS" D EN1^DIP,RSET Q
"RTN","FHORC5",11,0)
EN11 ; Enter/Edit Consult Types
"RTN","FHORC5",12,0)
 S (DIC,DIE)="^FH(119.5,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=119.5
"RTN","FHORC5",13,0)
 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN11:Y<1
"RTN","FHORC5",14,0)
 S DA=+Y,DR=".01:2;S FHA1=X;3;S Y=$S(FHA1=""Y"":4,1:5);4;5:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.5 D ^DIE K DA,DIE,DIDEL,DR,FHA1 G EN11
"RTN","FHORC5",15,0)
EN12 ; List Consult Types
"RTN","FHORC5",16,0)
 W !!,"The list requires a 132 column printer.",!
"RTN","FHORC5",17,0)
 W ! S L=0,DIC="^FH(119.5,",FLDS="[FHORCON]",BY=".01"
"RTN","FHORC5",18,0)
 S (FR,TO)="",DHD="CONSULTATION TYPES" D EN1^DIP,RSET Q
"RTN","FHORC5",19,0)
RSET K %ZIS S IOP="" D ^%ZIS
"RTN","FHORC5",20,0)
KIL K %,%ZIS,IOP,BY,DA,DHD,DIC,DIE,DR,FLDS,FR,L,NEW,OLD,TO,X,Y Q
"RTN","FHPRO")
0^8^B10948850^B10200393
"RTN","FHPRO",1,0)
FHPRO ; HISC/REL/RTK - Food Production Manager ;4/12/06  15:53
"RTN","FHPRO",2,0)
 ;;5.5;DIETETICS;**4,5**;Jan 28, 2005;Build 32
"RTN","FHPRO",3,0)
EN2 ; Enter/Edit Nutrition Locations (Inpatient Wards/Outpatient Clinics)
"RTN","FHPRO",4,0)
 W ! K DIR,DIC S DIR("A")="Select WARD or OUTPATIENT Location: "
"RTN","FHPRO",5,0)
 S DIR(0)="SAO^W:Ward Location;O:Outpatient Location" D ^DIR Q:$D(DIRUT)
"RTN","FHPRO",6,0)
 I Y'=-1 S FHANS=Y
"RTN","FHPRO",7,0)
 I FHANS="W" D EN2WRD Q
"RTN","FHPRO",8,0)
 I FHANS="O" D EN2OL Q
"RTN","FHPRO",9,0)
 Q
"RTN","FHPRO",10,0)
EN2WRD ;Ward locations
"RTN","FHPRO",11,0)
 K DIC S (DIC,DIE)="^FH(119.6,",DIC(0)="AEQLM",DLAYGO=119.6
"RTN","FHPRO",12,0)
 S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN2:Y<1
"RTN","FHPRO",13,0)
 S DA=+Y,DR=".01:2.5;3;S:X="""" Y=4;3.5;4;S:X="""" Y=5;4.5;5;S:'X Y=6;5.5;6:29;99;107;107.5;108;108.5;109;109.5;110;110.5;111;111.5;112" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.6 D ^DIE,KIL G EN2
"RTN","FHPRO",14,0)
EN2OL ;Outpatient locations
"RTN","FHPRO",15,0)
 K DIC S (DIC,DIE)="^FH(119.6,",DIC(0)="AEQLM",DLAYGO=119.6
"RTN","FHPRO",16,0)
 S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN2:Y<1
"RTN","FHPRO",17,0)
 S DA=+Y,DR=".01;2;2.6;3;S:X="""" Y=4;3.5;4;S:X="""" Y=5;4.5;5;S:'X Y=6;5.5;6;7;103:106;11;20:99;107;107.5;108;108.5;109;109.5;110;110.5;111;111.5;112" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.6 D ^DIE,KIL G EN2
"RTN","FHPRO",18,0)
EN3 ; Enter/Edit Production Diets
"RTN","FHPRO",19,0)
 K DIC S (DIC,DIE)="^FH(116.2,",DIC(0)="AEQLM",DLAYGO=116.2
"RTN","FHPRO",20,0)
 S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN3:Y<1
"RTN","FHPRO",21,0)
 S DA=+Y,DR=$S(DA=1:"1:8",1:".01:7.5;10;S:X'=""Y"" Y=8;11;8;12:99") S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=116.2 D ^DIE I '$D(DA) D KIL G EN3
"RTN","FHPRO",22,0)
 S:$O(^FH(116.2,DA,"R",0))<1 $P(^FH(116.2,DA,0),"^",4)="N" D KIL G EN3
"RTN","FHPRO",23,0)
EN4 ; List Production Diets
"RTN","FHPRO",24,0)
 W !!,"The list requires a 132 column printer.",!
"RTN","FHPRO",25,0)
 W ! S L=0,DIC="^FH(116.2,",FLDS="[FHPROD]",BY="8,.01"
"RTN","FHPRO",26,0)
 S FR="@",TO="",DHD="PRODUCTION DIETS" D EN1^DIP,RSET Q
"RTN","FHPRO",27,0)
EN5 ; Enter/Edit Production Facilities
"RTN","FHPRO",28,0)
 K DIC S (DIC,DIE)="^FH(119.71,",DIC(0)="AEQLM",DLAYGO=119.71
"RTN","FHPRO",29,0)
 S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN5:Y<1
"RTN","FHPRO",30,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.71 D ^DIE,KIL G EN5
"RTN","FHPRO",31,0)
EN6 ; Enter/Edit Service Points
"RTN","FHPRO",32,0)
 K DIC S (DIC,DIE)="^FH(119.72,",DIC(0)="AEQLM",DLAYGO=119.72
"RTN","FHPRO",33,0)
 S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN6:Y<1
"RTN","FHPRO",34,0)
 S DA=+Y S DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.72 D ^DIE I '$D(DA) D KIL G EN6
"RTN","FHPRO",35,0)
 S DA(1)=DA S DIK="^FH(119.72,DA(1),""A""," F DA=0:0 S DA=$O(^FH(119.72,DA(1),"A",DA)) Q:DA'>0  I $P($G(^(DA,0)),"^",2,8)?."^" D ^DIK
"RTN","FHPRO",36,0)
 S DIK="^FH(119.72,DA(1),""B""," F DA=0:0 S DA=$O(^FH(119.72,DA(1),"B",DA)) Q:DA'>0  I $P($G(^(DA,0)),"^",2,22)?."^" D ^DIK
"RTN","FHPRO",37,0)
 D KIL G EN6
"RTN","FHPRO",38,0)
EN7 ; Enter/Edit Communication Offices
"RTN","FHPRO",39,0)
 K DIC S (DIC,DIE)="^FH(119.73,",DIC(0)="AEQLM",DLAYGO=119.73
"RTN","FHPRO",40,0)
 S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN7:Y<1
"RTN","FHPRO",41,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.73 D ^DIE,KIL G EN7
"RTN","FHPRO",42,0)
EN8 ; Enter/Edit Supplemental Feeding Sites
"RTN","FHPRO",43,0)
 K DIC S (DIC,DIE)="^FH(119.74,",DIC(0)="AEQLM",DLAYGO=119.74
"RTN","FHPRO",44,0)
 S DIC("DR")=".01" W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN8:Y<1
"RTN","FHPRO",45,0)
 S DA=+Y,DR=".01:99" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=119.74 D ^DIE,KIL G EN8
"RTN","FHPRO",46,0)
RSET K %ZIS S IOP="" D ^%ZIS
"RTN","FHPRO",47,0)
KIL G KILL^XUSCLEAN
"RTN","FHWTRN")
0^9^B35702761^B4252356
"RTN","FHWTRN",1,0)
FHWTRN ; HISC/REL - Process Transfers ;3/17/92  14:39
"RTN","FHWTRN",2,0)
 ;;5.5;DIETETICS;**4**;Jan 28, 2005;Build 32
"RTN","FHWTRN",3,0)
 ;patch 4 - added alert if pt is transferred
"RTN","FHWTRN",4,0)
 S (FHWRNEW,FHWROLD)=""
"RTN","FHWTRN",5,0)
 S FHZ115="P"_DFN,FHWROLD="" D CHECK^FHOMDPA I FHDFN'="" D
"RTN","FHWTRN",6,0)
 .S:ADM FHWROLD=$P($G(^FHPT(FHDFN,"A",ADM,0)),U,8)
"RTN","FHWTRN",7,0)
 I FHOLD="" G T0
"RTN","FHWTRN",8,0)
 ; Edit,Delete Transfers
"RTN","FHWTRN",9,0)
 I $P(FHOLD,"^",18)=$P(FHNEW,"^",18) G EX
"RTN","FHWTRN",10,0)
 S XT=$P(FHOLD,"^",18)
"RTN","FHWTRN",11,0)
 I "^1^2^3^"[("^"_XT_"^") D RET
"RTN","FHWTRN",12,0)
 I "^22^23^24^"[("^"_XT_"^") D PASS
"RTN","FHWTRN",13,0)
T0 S XT=$P(FHNEW,"^",18)
"RTN","FHWTRN",14,0)
 I "^1^2^3^"[("^"_XT_"^") D PASS
"RTN","FHWTRN",15,0)
 I "^22^23^24^"[("^"_XT_"^") D RET
"RTN","FHWTRN",16,0)
EX D WRD^FHWADM
"RTN","FHWTRN",17,0)
 G:'$G(FHDFN) KIL
"RTN","FHWTRN",18,0)
 S:ADM FHWRNEW=$P($G(^FHPT(FHDFN,"A",ADM,0)),U,8)
"RTN","FHWTRN",19,0)
 I FHWRNEW,(FHWROLD'=FHWRNEW) D XQAL  ;process alert for transfer
"RTN","FHWTRN",20,0)
 G KIL
"RTN","FHWTRN",21,0)
PASS ; Place on Pass
"RTN","FHWTRN",22,0)
 S FHZ115="P"_DFN D CHECK^FHOMDPA I FHDFN="" Q
"RTN","FHWTRN",23,0)
 D SET Q:FHLD="P"  Q:'$D(^FHPT(FHDFN,"A",ADM))
"RTN","FHWTRN",24,0)
 S FHOR="^^^^",FHLD="P",TYP="",D1=X1,D2="",D4=0,COM="" D STR^FHORD7 Q
"RTN","FHWTRN",25,0)
RET ; Remove from Pass
"RTN","FHWTRN",26,0)
 D SET I FHLD'="P",FHLD'="X" Q
"RTN","FHWTRN",27,0)
 S X=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),D1=$P(X,"^",9),D2=$S(D1'>X1:X1,1:D1)
"RTN","FHWTRN",28,0)
 S $P(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),"^",10)=D2
"RTN","FHWTRN",29,0)
 S A2=0 F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1!(KK>X1)  S A2=KK
"RTN","FHWTRN",30,0)
 Q:'A2  Q:$P(^FHPT(FHDFN,"A",ADM,"AC",A2,0),"^",2)'=FHORD
"RTN","FHWTRN",31,0)
 F K9=A2-.000001:0 S K9=$O(^FHPT(FHDFN,"A",ADM,"AC",K9)) Q:K9<1  I $P(^(K9,0),"^",2)=FHORD S D1=K9 D S0^FHORD3
"RTN","FHWTRN",32,0)
 D UPD^FHORD7 Q
"RTN","FHWTRN",33,0)
SET D NOW^%DTC S NOW=%,DT=%\1,FHPV=DUZ,FHWF=$S($D(^ORD(101)):1,1:0)
"RTN","FHWTRN",34,0)
 S X=$P($G(^DGPM(ADM,0)),"^",1),X1=$S(X'>NOW:NOW,1:X)
"RTN","FHWTRN",35,0)
 S A1=0,(FHOR,FHLD)="" F KK=0:0 S KK=$O(^FHPT(FHDFN,"A",ADM,"AC",KK)) Q:KK<1!(KK>X1)  S A1=KK
"RTN","FHWTRN",36,0)
 Q:'A1  S FHORD=$P(^FHPT(FHDFN,"A",ADM,"AC",A1,0),"^",2),X=^FHPT(FHDFN,"A",ADM,"DI",FHORD,0),FHOR=$P(X,"^",2,6),FHLD=$P(X,"^",7) Q
"RTN","FHWTRN",37,0)
 ;
"RTN","FHWTRN",38,0)
XQAL ; Check a patient
"RTN","FHWTRN",39,0)
 S FHCLIN=""
"RTN","FHWTRN",40,0)
 D PATNAME^FHOMUTL I DFN="" Q
"RTN","FHWTRN",41,0)
 D CLR
"RTN","FHWTRN",42,0)
 D NOW^%DTC S NOW=%,FHEDT=$P(NOW,".")
"RTN","FHWTRN",43,0)
 S Y=^DPT(DFN,0),NAM=$P(Y,"^",1),SEX=$P(Y,"^",2),DOB=$P(Y,"^",3)
"RTN","FHWTRN",44,0)
 S AGE="" I DOB'="" S AGE=$E(NOW,1,3)-$E(DOB,1,3)-($E(NOW,4,7)<$E(DOB,4,7))
"RTN","FHWTRN",45,0)
 S FHDUZ=$P($G(^FH(119.6,FHWRNEW,0)),U,2)
"RTN","FHWTRN",46,0)
 S:FHDUZ FHCLIN=$P($G(^VA(200,FHDUZ,0)),U,1)
"RTN","FHWTRN",47,0)
P0 ; Calculate BMI
"RTN","FHWTRN",48,0)
 S GMRVSTR="WT" D EN6^GMRVUTL S WT=$P(X,"^",8),FHWTDT=$P(X,"^",1)
"RTN","FHWTRN",49,0)
 S GMRVSTR="HT" D EN6^GMRVUTL S HT=$P(X,"^",8),FHHTDT=$P(X,"^",1)
"RTN","FHWTRN",50,0)
 S FHGMDT=$S(FHWTDT>FHHTDT:FHWTDT,FHHTDT>FHWTDT:FHHTDT,1:FHWTDT)
"RTN","FHWTRN",51,0)
 S BMI="" I WT,HT S A2=HT*.0254,BMI=+$J(WT/2.2/(A2*A2),0,1)
"RTN","FHWTRN",52,0)
 I $G(BMI)=""!($G(BMI)'<18.5) G P1
"RTN","FHWTRN",53,0)
 S MONTX="Monitor: BMI < 18.5",DTE=NOW
"RTN","FHWTRN",54,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1)
"RTN","FHWTRN",55,0)
 I N,'$P(^FHPT(FHDFN,"A",ADM,"MO",N,0),U,4) D FIL S MONIFN=N D TCK G P1
"RTN","FHWTRN",56,0)
 I 'N,(FHGMDT>(FHEDT-7)) D FIL,TFIL G P1
"RTN","FHWTRN",57,0)
 I 'N G P1
"RTN","FHWTRN",58,0)
 ; Check if been 30 days
"RTN","FHWTRN",59,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2)
"RTN","FHWTRN",60,0)
 S X=$$FMDIFF^XLFDT(DTE,LST,3) I X>30 D FIL,TFIL
"RTN","FHWTRN",61,0)
P1 ; Check for current Tubefeeding
"RTN","FHWTRN",62,0)
 S TF=$P($G(^FHPT(FHDFN,"A",ADM,0)),"^",4) I 'TF G P2
"RTN","FHWTRN",63,0)
 S MONTX="Monitor: On Tubefeeding",DTE=NOW
"RTN","FHWTRN",64,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1)
"RTN","FHWTRN",65,0)
 I N,'$P(^FHPT(FHDFN,"A",ADM,"MO",N,0),U,4) D FIL S MONIFN=N D TCK G P2
"RTN","FHWTRN",66,0)
 I 'N D FIL,TFIL G P2
"RTN","FHWTRN",67,0)
 ; Check if been 7 days
"RTN","FHWTRN",68,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2)
"RTN","FHWTRN",69,0)
 S X=$$FMDIFF^XLFDT(DTE,LST,3) I X>7 D FIL,TFIL
"RTN","FHWTRN",70,0)
P2 ; Check for Hyperals
"RTN","FHWTRN",71,0)
 S MONTX="",DTE=NOW
"RTN","FHWTRN",72,0)
 D PSS435^PSS55(DFN,,"FHIV") F DA=0:0 S DA=$O(^TMP($J,"FHIV",DA)) Q:DA<1  D
"RTN","FHWTRN",73,0)
 .S X0=$P($G(^TMP($J,"FHIV",DA,.02)),"^",2) I X0>NOW Q
"RTN","FHWTRN",74,0)
 .S MONTX="Monitor: On Hyperals" Q
"RTN","FHWTRN",75,0)
 I MONTX'="" D FIL,TFIL
"RTN","FHWTRN",76,0)
P3 ; Check for Serum Albumin
"RTN","FHWTRN",77,0)
 S MONTX="",PX=6 D LAB^FHASM4 I $D(^TMP($J,"LRTST")) D
"RTN","FHWTRN",78,0)
 .F L=0:0 S L=$O(^TMP($J,"LRTST",L)) Q:L<1  S Y=$TR($P(^(L),"^",6)," ","") I Y'?1A.E,Y<2.8 S MONTX="Monitor: Albumin < 2.8",DTE=$P(^(L),"^",7) Q
"RTN","FHWTRN",79,0)
 .Q
"RTN","FHWTRN",80,0)
 I MONTX="" G P4
"RTN","FHWTRN",81,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1)
"RTN","FHWTRN",82,0)
 I N,'$P(^FHPT(FHDFN,"A",ADM,"MO",N,0),U,4) D FIL S MONIFN=N D TCK G P4
"RTN","FHWTRN",83,0)
 ;process new Albumin if old test date is within 7 days.
"RTN","FHWTRN",84,0)
 I 'N S X=$$FMDIFF^XLFDT(NOW,DTE) I X<8 D FIL,TFIL G P4
"RTN","FHWTRN",85,0)
 I 'N G P4
"RTN","FHWTRN",86,0)
 ; Check if same test
"RTN","FHWTRN",87,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2) I DTE>LST D FIL,TFIL
"RTN","FHWTRN",88,0)
P4 ; Check for NPO+Clr Liq > 3 days
"RTN","FHWTRN",89,0)
 S A1=NOW,DTE=NOW
"RTN","FHWTRN",90,0)
 F  D  Q:'A1
"RTN","FHWTRN",91,0)
 .S A1=$O(^FHPT(FHDFN,"A",ADM,"AC",A1),-1) Q:'A1
"RTN","FHWTRN",92,0)
 .S FHORD=$P($G(^FHPT(FHDFN,"A",ADM,"AC",A1,0)),"^",2) I 'FHORD S A1="" Q
"RTN","FHWTRN",93,0)
 .S FHOR=$G(^FHPT(FHDFN,"A",ADM,"DI",FHORD,0))
"RTN","FHWTRN",94,0)
 .I $P(FHOR,"^",7)="N" S DTE=A1 Q
"RTN","FHWTRN",95,0)
 .I $P(FHOR,"^",2)=CLR S DTE=A1 Q
"RTN","FHWTRN",96,0)
 .S A1="" Q
"RTN","FHWTRN",97,0)
 I DTE'<NOW G P5
"RTN","FHWTRN",98,0)
 S X=$$FMDIFF^XLFDT(NOW,DTE,3) G:X<3 P5
"RTN","FHWTRN",99,0)
 S MONTX="Monitor: NPO+Clr Liq > 3 days",DTE=NOW
"RTN","FHWTRN",100,0)
 S N=$O(^FHPT(FHDFN,"A",ADM,"MO","B",MONTX,""),-1)
"RTN","FHWTRN",101,0)
 I N,'$P(^FHPT(FHDFN,"A",ADM,"MO",N,0),U,4) D FIL S MONIFN=N D TCK G P5
"RTN","FHWTRN",102,0)
 I 'N D FIL,TFIL G P5
"RTN","FHWTRN",103,0)
 ; Check if been 3 days
"RTN","FHWTRN",104,0)
 S LST=$P($G(^FHPT(FHDFN,"A",ADM,"MO",N,0)),"^",2)
"RTN","FHWTRN",105,0)
 S X=$$FMDIFF^XLFDT(NOW,LST,3) I X>3 D FIL,TFIL
"RTN","FHWTRN",106,0)
P5 ; Done
"RTN","FHWTRN",107,0)
 Q
"RTN","FHWTRN",108,0)
CLR ; Find Clear Liquid
"RTN","FHWTRN",109,0)
 S CLR=$O(^FH(111,"B","CLEAR LIQUID",0)) Q:CLR
"RTN","FHWTRN",110,0)
 S CLR=$O(^FH(111,"C","CLEAR LIQUID",0)) Q:CLR
"RTN","FHWTRN",111,0)
 S CLR=$O(^FH(111,"C","CLR LIQ",0)) Q:CLR
"RTN","FHWTRN",112,0)
 S CLR=$O(^FH(111,"C","CL",0)) Q:CLR
"RTN","FHWTRN",113,0)
 Q
"RTN","FHWTRN",114,0)
FIL ; File Monitor
"RTN","FHWTRN",115,0)
 K XQA
"RTN","FHWTRN",116,0)
 D PATNAME^FHOMUTL
"RTN","FHWTRN",117,0)
 Q:(MONTX["BMI")&($P($G(^FH(119.6,FHWRNEW,1)),"^",5)'="Y")
"RTN","FHWTRN",118,0)
 Q:(MONTX["Tubefeed")&($P($G(^FH(119.6,FHWRNEW,1)),"^",6)'="Y")
"RTN","FHWTRN",119,0)
 Q:(MONTX["Hyperals")&($P($G(^FH(119.6,FHWRNEW,1)),"^",7)'="Y")
"RTN","FHWTRN",120,0)
 Q:(MONTX["Albumin")&($P($G(^FH(119.6,FHWRNEW,1)),"^",8)'="Y")
"RTN","FHWTRN",121,0)
 Q:(MONTX["NPO+Clr")&($P($G(^FH(119.6,FHWRNEW,1)),"^",9)'="Y")
"RTN","FHWTRN",122,0)
 K XQA,XQAMSG,XQAOPT,XQAROU
"RTN","FHWTRN",123,0)
 S XQAID="FH,"_$J_","_$H
"RTN","FHWTRN",124,0)
 S XQAMSG=$E(FHPTNM,1,9)_" ("_$E(FHPTNM,1,1)_$P(FHSSN,"-",3)_"): "
"RTN","FHWTRN",125,0)
 S XQAOPT="FHCTF2",XQAMSG=XQAMSG_"  "_MONTX_" "_$E(DTE,4,5)_"/"_$E(DTE,6,7)_"/"_$E(DTE,2,3)_"    Clinician: "_FHCLIN
"RTN","FHWTRN",126,0)
 F A=0:0 S A=$O(^FH(119.6,FHWRNEW,2,A)) Q:A'>0  S TK=$P($G(^FH(119.6,FHWRNEW,2,A,0)),U,1),XQA(TK)=""
"RTN","FHWTRN",127,0)
 I '$D(XQA(FHDUZ)) S XQA(FHDUZ)=""
"RTN","FHWTRN",128,0)
 D SETUP^XQALERT
"RTN","FHWTRN",129,0)
 Q
"RTN","FHWTRN",130,0)
TFIL ;File patient info
"RTN","FHWTRN",131,0)
 L +^FHPT(FHDFN,"A",ADM,"MO",0)
"RTN","FHWTRN",132,0)
 I '$D(^FHPT(FHDFN,"A",ADM,"MO",0)) S ^FHPT(FHDFN,"A",ADM,"MO",0)="^115.11^^"
"RTN","FHWTRN",133,0)
 L -^FHPT(FHDFN,"A",ADM,"MO",0)
"RTN","FHWTRN",134,0)
 K DIC,DD,DO,DINUM S DIC="^FHPT(FHDFN,""A"",ADM,""MO"",",DIC(0)="L",DA(1)=ADM,DA(2)=FHDFN,DLAYGO=115,X=MONTX D FILE^DICN K DIC,DLAYGO
"RTN","FHWTRN",135,0)
 Q:Y<1  S MONIFN=+Y
"RTN","FHWTRN",136,0)
 S $P(^FHPT(FHDFN,"A",ADM,"MO",MONIFN,0),"^",2)=DTE,^FHPT(FHDFN,"A",ADM,"MO","AC",DTE,MONIFN)=""
"RTN","FHWTRN",137,0)
TCK S FHTF=DTE_"^M^"_MONTX_"^"_DFN_"^"_ADM_"^"_MONIFN  ;set tickler for a clinician
"RTN","FHWTRN",138,0)
 D:FHDUZ FILE^FHCTF2
"RTN","FHWTRN",139,0)
 Q
"RTN","FHWTRN",140,0)
 ;
"RTN","FHWTRN",141,0)
KIL K %,A1,A2,COM,D1,D2,D4,FHDU,FHLD,FHOR,FHPV,FHX1,FHX2,FHX3,K,K9,KK,NOW,FHORD,TYP,X,X1,X2,X9
"RTN","FHWTRN",142,0)
 K FHEDT,FHGMDT,FHWTDT,FHHTDT Q
"SEC","^DIC",119.6,119.6,0,"DD")
#
"SEC","^DIC",119.6,119.6,0,"DEL")
#f
"SEC","^DIC",119.6,119.6,0,"LAYGO")
#f
"SEC","^DIC",119.6,119.6,0,"RD")
#F
"SEC","^DIC",119.6,119.6,0,"WR")
#f
"VER")
8.0^22.0
"^DD",119.6,119.6,0)
FIELD^^112^39
"^DD",119.6,119.6,0,"DDA")
N
"^DD",119.6,119.6,0,"DT")
3060814
"^DD",119.6,119.6,0,"ID","WRITE")
I $D(^("I")) D EN^DDIOL("(** Inactive **)","","?3")
"^DD",119.6,119.6,0,"IX","AC",119.6,99)

"^DD",119.6,119.6,0,"IX","AL",119.64,.01)

"^DD",119.6,119.6,0,"IX","AP",119.6,11)

"^DD",119.6,119.6,0,"IX","AR",119.62,.01)

"^DD",119.6,119.6,0,"IX","AS1",119.6,3)

"^DD",119.6,119.6,0,"IX","AS2",119.6,4)

"^DD",119.6,119.6,0,"IX","AS3",119.6,5)

"^DD",119.6,119.6,0,"IX","AW",119.63,.01)

"^DD",119.6,119.6,0,"IX","B",119.6,.01)

"^DD",119.6,119.6,0,"IX","C",119.6,102)

"^DD",119.6,119.6,0,"IX","CO",119.6,6)

"^DD",119.6,119.6,0,"NM","NUTRITION LOCATION")

"^DD",119.6,119.6,0,"PT",115.01,11)

"^DD",119.6,119.6,0,"PT",115.01,13)

"^DD",119.6,119.6,0,"PT",115.012,5)

"^DD",119.6,119.6,0,"PT",115.016,2)

"^DD",119.6,119.6,0,"PT",115.017,2)

"^DD",119.6,119.6,0,"PT",115.018,4)

"^DD",119.6,119.6,0,"PT",14100045.01,2)

"^DD",119.6,119.6,0,"PT",14100047,.01)

"^DD",119.6,119.6,0,"PT",14100049.01,3)

"^DD",119.6,119.6,0,"SCR")
I '$D(^FH(119.6,+Y,"I"))!$D(^XUSEC("FHMGR",DUZ))!(DUZ(0)["@")
"^DD",119.6,119.6,0,"VRPK")
FH
"^DD",119.6,119.6,.01,0)
NAME^RF^^0;1^K:$L(X)>30!($L(X)<1) X
"^DD",119.6,119.6,.01,1,0)
^.1
"^DD",119.6,119.6,.01,1,1,0)
119.6^B
"^DD",119.6,119.6,.01,1,1,1)
S ^FH(119.6,"B",$E(X,1,30),DA)=""
"^DD",119.6,119.6,.01,1,1,2)
K ^FH(119.6,"B",$E(X,1,30),DA)
"^DD",119.6,119.6,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.6,119.6,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the NAME field.
"^DD",119.6,119.6,.01,3)
Answer must be 1-30 characters in length.
"^DD",119.6,119.6,.01,21,0)
^^1^1^2920507^^^^
"^DD",119.6,119.6,.01,21,1,0)
This is the name of a ward on which dietetic activity occurs.
"^DD",119.6,119.6,.01,21,2,0)
It is selected from a list of MAS wards.
"^DD",119.6,119.6,.01,"DEL",1,0)
I 1 D EN^DDIOL("Cannot delete. Inactivate instead.","","?3")
"^DD",119.6,119.6,.01,"DT")
2911015
"^DD",119.6,119.6,1,0)
CLINICIAN^RP200'^VA(200,^0;2^Q
"^DD",119.6,119.6,1,21,0)
^.001^3^3^3020930^^^
"^DD",119.6,119.6,1,21,1,0)
This field contains the clinician assigned to the ward and the
"^DD",119.6,119.6,1,21,2,0)
one to whom dietetic consults will be routed and notification
"^DD",119.6,119.6,1,21,3,0)
made of special diet orders and tubefeedings.
"^DD",119.6,119.6,2,0)
ROOM-BED^119.62P^^R;0
"^DD",119.6,119.6,2,21,0)
^.001^2^2^3020930^^^^
"^DD",119.6,119.6,2,21,1,0)
This is a pointer to File 405.4 and indicates that that room-bed
"^DD",119.6,119.6,2,21,2,0)
is to be considered part of this Dietetic Ward.
"^DD",119.6,119.6,2.5,0)
ASSOCIATED MAS WARD^119.63P^^W;0
"^DD",119.6,119.6,2.5,21,0)
^.001^3^3^3040902^^^^
"^DD",119.6,119.6,2.5,21,1,0)
This is a list of MAS wards which are to be used as defaults to this
"^DD",119.6,119.6,2.5,21,2,0)
Dietetic ward for purposes of patient location when the room-bed is
"^DD",119.6,119.6,2.5,21,3,0)
unknown and for purposes of forecasting.
"^DD",119.6,119.6,2.6,0)
ASSOCIATED HOSPITAL LOCATION^119.64P^^L;0
"^DD",119.6,119.6,2.6,21,0)
^.001^2^2^3060814^^^^
"^DD",119.6,119.6,2.6,21,1,0)
This multiple contains the hospital location(s)/clinic(s) associated with
"^DD",119.6,119.6,2.6,21,2,0)
this outpatient nutrition location.
"^DD",119.6,119.6,3,0)
TRAY SERVICE POINT^*P119.72'^FH(119.72,^0;5^S DIC("S")="I $P(^(0),U,2)=""T""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",119.6,119.6,3,1,0)
^.1
"^DD",119.6,119.6,3,1,1,0)
119.6^AS1^MUMPS
"^DD",119.6,119.6,3,1,1,1)
S Y="" S:$P(^FH(119.6,DA,0),"^",5) Y=Y_"T" S:$P(^(0),"^",6) Y=Y_"C" S:$P(^(0),"^",7) Y=Y_"D" S $P(^(0),"^",10)=Y
"^DD",119.6,119.6,3,1,1,2)
D SPKS^FH
"^DD",119.6,119.6,3,1,1,"%D",0)
^.101^3^3^3020514^^^^
"^DD",119.6,119.6,3,1,1,"%D",1,0)
This cross-reference, along with that on Fields 4 and 5, is used to
"^DD",119.6,119.6,3,1,1,"%D",2,0)
set the Services Field. It is a string containing C, T, and/or D
"^DD",119.6,119.6,3,1,1,"%D",3,0)
indicating which services are available for this ward.
"^DD",119.6,119.6,3,1,1,"DT")
3020514
"^DD",119.6,119.6,3,12)
Allows selection only of tray lines
"^DD",119.6,119.6,3,12.1)
S DIC("S")="I $P(^(0),U,2)=""T"""
"^DD",119.6,119.6,3,21,0)
^.001^7^7^3040902^^^^
"^DD",119.6,119.6,3,21,1,0)
This field, if used, indicates that tray service is available to this
"^DD",119.6,119.6,3,21,2,0)
ward and is provided by the indicated Service Point. Note: if a Dining
"^DD",119.6,119.6,3,21,3,0)
Room is also available, then a Tray Service Point must be specified
"^DD",119.6,119.6,3,21,4,0)
as Dining Room trays are prepared there.
"^DD",119.6,119.6,3,21,5,0)

"^DD",119.6,119.6,3,21,6,0)
For outpatient nutrition locations this field indicates the tray Service
"^DD",119.6,119.6,3,21,7,0)
Point available for the location.
"^DD",119.6,119.6,3,"DT")
3020514
"^DD",119.6,119.6,3.5,0)
TRAY FORECAST %^NJ3,0^^0;17^K:+X'=X!(X>120)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,3.5,3)
Type a Number between 0 and 120, 0 Decimal Digits
"^DD",119.6,119.6,3.5,21,0)
^.001^1^1^3020930^^
"^DD",119.6,119.6,3.5,21,1,0)
This is the % of patients on the ward typically receiving tray service.
"^DD",119.6,119.6,3.5,"DT")
2911120
"^DD",119.6,119.6,4,0)
CAFETERIA SERVICE POINT^*P119.72'^FH(119.72,^0;6^S DIC("S")="I $P(^(0),U,2)=""C""" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",119.6,119.6,4,1,0)
^.1
"^DD",119.6,119.6,4,1,1,0)
119.6^AS2^MUMPS
"^DD",119.6,119.6,4,1,1,1)
S Y="" S:$P(^FH(119.6,DA,0),"^",5) Y=Y_"T" S:$P(^(0),"^",6) Y=Y_"C" S:$P(^(0),"^",7) Y=Y_"D" S $P(^(0),"^",10)=Y
"^DD",119.6,119.6,4,1,1,2)
D SPKS^FH
"^DD",119.6,119.6,4,1,1,"%D",0)
^.101^3^3^3020514^^^
"^DD",119.6,119.6,4,1,1,"%D",1,0)
This cross-reference, along with that on Fields 3 and 5, is used to
"^DD",119.6,119.6,4,1,1,"%D",2,0)
set the Services Field. It is a string containing C, T, and/or D
"^DD",119.6,119.6,4,1,1,"%D",3,0)
indicating which services are available for this ward.
"^DD",119.6,119.6,4,1,1,"DT")
3020514
"^DD",119.6,119.6,4,12)
Allows selction only of cafeterias
"^DD",119.6,119.6,4,12.1)
S DIC("S")="I $P(^(0),U,2)=""C"""
"^DD",119.6,119.6,4,21,0)
^.001^5^5^3040902^^^^
"^DD",119.6,119.6,4,21,1,0)
This field, if used, indicates that cafeteria service is available
"^DD",119.6,119.6,4,21,2,0)
to this ward and is provided by the indicated Service Point.
"^DD",119.6,119.6,4,21,3,0)

"^DD",119.6,119.6,4,21,4,0)
For outpatient nutrition locations this field indicates the cafeteria
"^DD",119.6,119.6,4,21,5,0)
Service Point available for the location.
"^DD",119.6,119.6,4,"DT")
3020514
"^DD",119.6,119.6,4.5,0)
CAFETERIA FORECAST %^NJ3,0^^0;18^K:+X'=X!(X>120)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,4.5,3)
Type a Number between 0 and 120, 0 Decimal Digits
"^DD",119.6,119.6,4.5,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.6,4.5,21,1,0)
This is the % of patients on the ward typically receiving cafeteria
"^DD",119.6,119.6,4.5,21,2,0)
service.
"^DD",119.6,119.6,4.5,"DT")
2911120
"^DD",119.6,119.6,5,0)
DINING ROOM TRAY SERVICE?^S^1:YES;0:NO;^0;7^Q
"^DD",119.6,119.6,5,1,0)
^.1
"^DD",119.6,119.6,5,1,1,0)
119.6^AS3^MUMPS
"^DD",119.6,119.6,5,1,1,1)
S Y="" S:$P(^FH(119.6,DA,0),"^",5) Y=Y_"T" S:$P(^(0),"^",6) Y=Y_"C" S:$P(^(0),"^",7) Y=Y_"D" S $P(^(0),"^",10)=Y
"^DD",119.6,119.6,5,1,1,2)
D SPKS^FH
"^DD",119.6,119.6,5,1,1,"%D",0)
^.101^3^3^3020514^^^
"^DD",119.6,119.6,5,1,1,"%D",1,0)
This cross-reference, along with that on Fields 3 and 4, is used to
"^DD",119.6,119.6,5,1,1,"%D",2,0)
set the Services Field. It is a string containing C, T, and/or D
"^DD",119.6,119.6,5,1,1,"%D",3,0)
indicating which services are available for this ward.
"^DD",119.6,119.6,5,1,1,"DT")
3020514
"^DD",119.6,119.6,5,3)

"^DD",119.6,119.6,5,21,0)
^.001^4^4^3040902^^^^
"^DD",119.6,119.6,5,21,1,0)
A YES means that Dining Room tray service is available to this ward.
"^DD",119.6,119.6,5,21,2,0)

"^DD",119.6,119.6,5,21,3,0)
For outpatient nutrition locations a YES in this field indicates that
"^DD",119.6,119.6,5,21,4,0)
Dining Room tray service is available for this location.
"^DD",119.6,119.6,5,"DT")
3020514
"^DD",119.6,119.6,5.5,0)
DINING ROOM FORECAST %^NJ3,0^^0;19^K:+X'=X!(X>120)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,5.5,3)
Type a Number between 0 and 120, 0 Decimal Digits
"^DD",119.6,119.6,5.5,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.6,5.5,21,1,0)
This is the % of patients on the ward typically receiving dining room
"^DD",119.6,119.6,5.5,21,2,0)
service.
"^DD",119.6,119.6,5.5,"DT")
2911204
"^DD",119.6,119.6,6,0)
COMMUNICATION OFFICE^RP119.73'^FH(119.73,^0;8^Q
"^DD",119.6,119.6,6,1,0)
^.1
"^DD",119.6,119.6,6,1,1,0)
119.6^CO
"^DD",119.6,119.6,6,1,1,1)
S ^FH(119.6,"CO",$E(X,1,30),DA)=""
"^DD",119.6,119.6,6,1,1,2)
K ^FH(119.6,"CO",$E(X,1,30),DA)
"^DD",119.6,119.6,6,1,1,"%D",0)
^^1^1^3040420^
"^DD",119.6,119.6,6,1,1,"%D",1,0)
Cross reference locations by Communication Office.
"^DD",119.6,119.6,6,1,1,"DT")
3040420
"^DD",119.6,119.6,6,21,0)
^.001^2^2^3040902^^^^
"^DD",119.6,119.6,6,21,1,0)
This field indicates which Communication Office is responsible for
"^DD",119.6,119.6,6,21,2,0)
processing diet requests from this ward or outpatient location.
"^DD",119.6,119.6,6,"DT")
3040420
"^DD",119.6,119.6,7,0)
SUPP. FDG. SITE^P119.74'^FH(119.74,^0;9^Q
"^DD",119.6,119.6,7,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.6,7,21,1,0)
This field indicates which Supplemental Feeding Site is responsible for
"^DD",119.6,119.6,7,21,2,0)
preparing Supplemental Feedings and Bulk Nourishments for this ward.
"^DD",119.6,119.6,7,"DT")
2911204
"^DD",119.6,119.6,11,0)
PRINT ORDER^RNJ2,0^^0;4^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,11,1,0)
^.1
"^DD",119.6,119.6,11,1,1,0)
119.6^AP
"^DD",119.6,119.6,11,1,1,1)
S ^FH(119.6,"AP",$E(X,1,30),DA)=""
"^DD",119.6,119.6,11,1,1,2)
K ^FH(119.6,"AP",$E(X,1,30),DA)
"^DD",119.6,119.6,11,1,1,3)
This field is required
"^DD",119.6,119.6,11,1,1,"DT")
2911029
"^DD",119.6,119.6,11,3)
TYPE A WHOLE NUMBER BETWEEN 1 AND 99
"^DD",119.6,119.6,11,21,0)
^.001^3^3^3020930^^^^
"^DD",119.6,119.6,11,21,1,0)
This field represents the print order of this ward. It is used
"^DD",119.6,119.6,11,21,2,0)
to sort the wards for delivery purposes which are then printed
"^DD",119.6,119.6,11,21,3,0)
from low print order to high print order.
"^DD",119.6,119.6,11,"DT")
2911029
"^DD",119.6,119.6,15,0)
DEFAULT ADMISSION DIET^P111'^FH(111,^0;15^Q
"^DD",119.6,119.6,15,21,0)
^.001^3^3^3020930^^^^
"^DD",119.6,119.6,15,21,1,0)
This field is optional. It may contain a diet from the Diets
"^DD",119.6,119.6,15,21,2,0)
file (111) and, if so, the diet will automatically be ordered
"^DD",119.6,119.6,15,21,3,0)
for each patient at the time of admission.
"^DD",119.6,119.6,15,"DT")
2850629
"^DD",119.6,119.6,16,0)
'NO ORDER' DIET ON ADMISSION^S^Y:YES;N:NO;^0;16^Q
"^DD",119.6,119.6,16,21,0)
^.001^3^3^3020930^^^^
"^DD",119.6,119.6,16,21,1,0)
This field is used to indicate whether a 'No Order' Diet
"^DD",119.6,119.6,16,21,2,0)
order should be generated upon admission; this field is
"^DD",119.6,119.6,16,21,3,0)
applicable only if no default admission diet is specified.
"^DD",119.6,119.6,16,"DT")
2880904
"^DD",119.6,119.6,20,0)
BULK NOURISHMENTS^119.61P^^BN;0
"^DD",119.6,119.6,20,21,0)
^.001^2^2^3020930^^^
"^DD",119.6,119.6,20,21,1,0)
This multiple represents bulk nourishments (supplemental feedings)
"^DD",119.6,119.6,20,21,2,0)
delivered to this ward.
"^DD",119.6,119.6,21,0)
# DAYS TO REVIEW NPO^NJ1,0^^0;11^K:+X'=X!(X>7)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,21,3)
Type a Number between 1 and 7, 0 Decimal Digits
"^DD",119.6,119.6,21,21,0)
^^2^2^2911204^
"^DD",119.6,119.6,21,21,1,0)
This field indicates the number of days following an NPO order after
"^DD",119.6,119.6,21,21,2,0)
which the patient should be reviewed.
"^DD",119.6,119.6,21,"DT")
2910430
"^DD",119.6,119.6,22,0)
# DAYS TO REVIEW TF^NJ2,0^^0;12^K:+X'=X!(X>30)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,22,3)
Type a Number between 1 and 30, 0 Decimal Digits
"^DD",119.6,119.6,22,21,0)
^^2^2^2911204^
"^DD",119.6,119.6,22,21,1,0)
This field indicates the number of days following a Tubefeeding order
"^DD",119.6,119.6,22,21,2,0)
after which the patient should be reviewed.
"^DD",119.6,119.6,22,"DT")
2910430
"^DD",119.6,119.6,23,0)
# DAYS TO REVIEW SF^NJ2,0^^0;13^K:+X'=X!(X>30)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,23,3)
Type a Number between 1 and 30, 0 Decimal Digits
"^DD",119.6,119.6,23,21,0)
^^2^2^2911204^
"^DD",119.6,119.6,23,21,1,0)
This field indicates the number of days following a Supplemental Feeding
"^DD",119.6,119.6,23,21,2,0)
order after which the patient should be reviewed.
"^DD",119.6,119.6,23,"DT")
2910430
"^DD",119.6,119.6,24,0)
# DAYS FOR STATUS AFTER ADMIT^NJ2,0^^0;14^K:+X'=X!(X>30)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,24,3)
Type a Number between 1 and 30, 0 Decimal Digits
"^DD",119.6,119.6,24,21,0)
^^2^2^2911204^
"^DD",119.6,119.6,24,21,1,0)
This field indicates the number of days following admission after which
"^DD",119.6,119.6,24,21,2,0)
a Nutrition Status evaluation should have been performed.
"^DD",119.6,119.6,24,"DT")
2910517
"^DD",119.6,119.6,25,0)
# DAYS TO REVIEW STATUS I^NJ3,0^^0;20^K:+X'=X!(X>120)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,25,3)
Type a Number between 1 and 120, 0 Decimal Digits
"^DD",119.6,119.6,25,21,0)
^^2^2^2920106^^
"^DD",119.6,119.6,25,21,1,0)
This is the number of days after which a patient in this Nutrition
"^DD",119.6,119.6,25,21,2,0)
Status category should be reviewed.
"^DD",119.6,119.6,25,"DT")
2930222
"^DD",119.6,119.6,26,0)
# DAYS TO REVIEW STATUS II^NJ3,0^^0;21^K:+X'=X!(X>120)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,26,3)
Type a Number between 1 and 120, 0 Decimal Digits
"^DD",119.6,119.6,26,21,0)
^^2^2^2920106^^
"^DD",119.6,119.6,26,21,1,0)
This is the number of days after which a patient in this Nutrition
"^DD",119.6,119.6,26,21,2,0)
Status category should be reviewed.
"^DD",119.6,119.6,26,"DT")
2930222
"^DD",119.6,119.6,27,0)
# DAYS TO REVIEW STATUS III^NJ3,0^^0;22^K:+X'=X!(X>120)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,27,3)
Type a Number between 1 and 120, 0 Decimal Digits
"^DD",119.6,119.6,27,21,0)
^^2^2^2920106^^
"^DD",119.6,119.6,27,21,1,0)
This is the number of days after which a patient in this Nutrition
"^DD",119.6,119.6,27,21,2,0)
Status category should be reviewed.
"^DD",119.6,119.6,27,"DT")
2930222
"^DD",119.6,119.6,28,0)
# DAYS TO REVIEW STATUS IV^NJ3,0^^0;23^K:+X'=X!(X>120)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,28,3)
Type a Number between 1 and 120, 0 Decimal Digits
"^DD",119.6,119.6,28,21,0)
^^2^2^2920106^^
"^DD",119.6,119.6,28,21,1,0)
This is the number of days after which a patient in this Nutrition
"^DD",119.6,119.6,28,21,2,0)
Status category should be reviewed.
"^DD",119.6,119.6,28,"DT")
2930222
"^DD",119.6,119.6,29,0)
CAFETERIA ON TRAY TICKET^S^Y:YES;N:NO;^0;24^Q
"^DD",119.6,119.6,29,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.6,29,21,1,0)
This field is optional and it is used to indicate whether patients
"^DD",119.6,119.6,29,21,2,0)
that go to the cafeteria should be included on the tray ticket.
"^DD",119.6,119.6,29,"DT")
2940413
"^DD",119.6,119.6,99,0)
INACTIVE?^S^Y:YES;N:NO;^I;1^Q
"^DD",119.6,119.6,99,1,0)
^.1
"^DD",119.6,119.6,99,1,1,0)
119.6^AC^MUMPS
"^DD",119.6,119.6,99,1,1,1)
K:X'="Y" ^FH(119.6,DA,"I")
"^DD",119.6,119.6,99,1,1,2)
K ^FH(119.6,DA,"I")
"^DD",119.6,119.6,99,1,1,"%D",0)
^^2^2^3000202
"^DD",119.6,119.6,99,1,1,"%D",1,0)
This cross-reference is used to create an 'I' node for
"^DD",119.6,119.6,99,1,1,"%D",2,0)
inactive entries.
"^DD",119.6,119.6,99,21,0)
^.001^2^2^3020930^
"^DD",119.6,119.6,99,21,1,0)
This field, if answered YES, will prohibit
"^DD",119.6,119.6,99,21,2,0)
further selection of this entry.
"^DD",119.6,119.6,99,"DT")
3000223
"^DD",119.6,119.6,101,0)
SERVICES^F^^0;10^K:$L(X)>3!($L(X)<1) X
"^DD",119.6,119.6,101,3)
Answer must be 1-3 characters in length.
"^DD",119.6,119.6,101,21,0)
^.001^2^2^3020930^^^
"^DD",119.6,119.6,101,21,1,0)
This field contains one or more of the characters T, C or D indicating
"^DD",119.6,119.6,101,21,2,0)
tray service, cafeteria service, and/or dining room service is available.
"^DD",119.6,119.6,101,"DT")
2911031
"^DD",119.6,119.6,102,0)
OUTPATIENT LOCATION^V^^1;1^Q
"^DD",119.6,119.6,102,1,0)
^.1
"^DD",119.6,119.6,102,1,1,0)
119.6^C
"^DD",119.6,119.6,102,1,1,1)
S ^FH(119.6,"C",$E(X,1,30),DA)=""
"^DD",119.6,119.6,102,1,1,2)
K ^FH(119.6,"C",$E(X,1,30),DA)
"^DD",119.6,119.6,102,1,1,"DT")
3060404
"^DD",119.6,119.6,102,21,0)
^.001^3^3^3060404^^
"^DD",119.6,119.6,102,21,1,0)
This field is a variable pointer to either the Ward Location (#42) file
"^DD",119.6,119.6,102,21,2,0)
or the Hospital Location (#44) file.  This will be used for outpatient
"^DD",119.6,119.6,102,21,3,0)
locations.
"^DD",119.6,119.6,102,"DT")
3060404
"^DD",119.6,119.6,102,"V",0)
^.12P^2^2
"^DD",119.6,119.6,102,"V",1,0)
44^HOSPITAL LOCATION^1^HL^n^n
"^DD",119.6,119.6,102,"V",2,0)
42^WARD LOCATION^2^WL^n^n
"^DD",119.6,119.6,103,0)
MAX # OF DAYS^NJ3,0^^1;2^K:+X'=X!(X>365)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,103,3)
Type a Number between 1 and 365, 0 Decimal Digits
"^DD",119.6,119.6,103,21,0)
^.001^6^6^3040902^^^
"^DD",119.6,119.6,103,21,1,0)
This field is optional.  If used it will be set to the maximum number of
"^DD",119.6,119.6,103,21,2,0)
days ahead a recurring meal plan can be ordered, ie, if this field is set to
"^DD",119.6,119.6,103,21,3,0)
365 then when ordering a recurring meal it cannot be ordered past one year
"^DD",119.6,119.6,103,21,4,0)
from the ordering date.  If the field is left NULL then a default of 999
"^DD",119.6,119.6,103,21,5,0)
days is assumed.  This field will be checked upon entering the FROM/TO dates
"^DD",119.6,119.6,103,21,6,0)
in the Order/Edit Outpatient Meals option.
"^DD",119.6,119.6,103,"DT")
3030313
"^DD",119.6,119.6,104,0)
NUMBER OF DAYS FOR REVIEW^RNJ2,0^^1;3^K:+X'=X!(X>30)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.6,104,3)
Type a Number between 1 and 30, 0 Decimal Digits
"^DD",119.6,119.6,104,21,0)
^.001^5^5^3041109^^^^
"^DD",119.6,119.6,104,21,1,0)
This field will be used for the Outpatient Meals Print Meal Plan Expiration
"^DD",119.6,119.6,104,21,2,0)
List option.  It may be set to a number of days which will be used for
"^DD",119.6,119.6,104,21,3,0)
review by the above option, ie, if this field is set to 7 then when the
"^DD",119.6,119.6,104,21,4,0)
Print Meal Plan Expiration List option is run it will check for recurring
"^DD",119.6,119.6,104,21,5,0)
meal plans that will be expiring within the next 7 days.
"^DD",119.6,119.6,104,"DT")
3041109
"^DD",119.6,119.6,105,0)
NON-VA FACILITY?^S^Y:Yes;N:No;^1;4^Q
"^DD",119.6,119.6,105,21,0)
^.001^6^6^3040902^^^
"^DD",119.6,119.6,105,21,1,0)
This will be an optional YES/NO field that may be set when setting up
"^DD",119.6,119.6,105,21,2,0)
new outpatient locations.  If the field is set to YES the Order/Edit
"^DD",119.6,119.6,105,21,3,0)
Recurring Meal option will use this flag to allow selection of up to 5
"^DD",119.6,119.6,105,21,4,0)
diets from any diet in the Diets (#111) file.  If the field is blank or
"^DD",119.6,119.6,105,21,5,0)
set to NO then the Order/Edit option will only allow selection of 1 diet
"^DD",119.6,119.6,105,21,6,0)
from the 5 allowable diets set up in the site parameters.
"^DD",119.6,119.6,105,"DT")
3030324
"^DD",119.6,119.6,106,0)
INPATIENT/OUTPATIENT^RS^I:Inpatient;O:Outpatient;^0;3^Q
"^DD",119.6,119.6,106,21,0)
^.001^6^6^3040902^^^
"^DD",119.6,119.6,106,21,1,0)
This field will serve as a flag to determine whether the location is an
"^DD",119.6,119.6,106,21,2,0)
inpatient or an outpatient location.  This will be required with the
"^DD",119.6,119.6,106,21,3,0)
Outpatient Meals functionality, since it will be necessary to store 
"^DD",119.6,119.6,106,21,4,0)
inpatient and outpatient locations in this file.
"^DD",119.6,119.6,106,21,5,0)

"^DD",119.6,119.6,106,21,6,0)
For all outpatient locations this field should be set to OUTPATIENT.
"^DD",119.6,119.6,106,"DT")
3030421
"^DD",119.6,119.6,107,0)
ALERT BMI^S^Y:YES;N:NO;^1;5^Q
"^DD",119.6,119.6,107,3)
Do you want to be alerted for BMI value for this location?
"^DD",119.6,119.6,107,21,0)
^^2^2^3060925^
"^DD",119.6,119.6,107,21,1,0)
This field, if set to YES, indicates that a clinicians will be alerted if 
"^DD",119.6,119.6,107,21,2,0)
the Body Mass Index (BMI) is below its level.
"^DD",119.6,119.6,107,"DT")
3060925
"^DD",119.6,119.6,108,0)
ALERT TUBEFEEDING^S^Y:YES;N:NO;^1;6^Q
"^DD",119.6,119.6,108,3)
Do you want to be alerted for Tubefeeding value for this location?
"^DD",119.6,119.6,108,21,0)
^^2^2^3060925^
"^DD",119.6,119.6,108,21,1,0)
This field, if set to YES, indicates that a clinician will be alerted if 
"^DD",119.6,119.6,108,21,2,0)
tubefeeding needs to be reviewed.
"^DD",119.6,119.6,108,"DT")
3060925
"^DD",119.6,119.6,109,0)
ALERT HYPERALS^S^Y:YES;N:NO;^1;7^Q
"^DD",119.6,119.6,109,3)
Do you want to be alerted for Hyperals value for this location?
"^DD",119.6,119.6,109,21,0)
^^2^2^3060925^
"^DD",119.6,119.6,109,21,1,0)
This field, if set to YES, indicates that a clinician will be alerted if 
"^DD",119.6,119.6,109,21,2,0)
certain patient is in hyperals.
"^DD",119.6,119.6,109,"DT")
3060925
"^DD",119.6,119.6,110,0)
ALERT ALBUMIN^S^Y:YES;N:NO;^1;8^Q
"^DD",119.6,119.6,110,3)
Do you want to be alerted for Albumin value for this location?
"^DD",119.6,119.6,110,21,0)
^^2^2^3060925^
"^DD",119.6,119.6,110,21,1,0)
This field, if set to YES, indicates that a clinician will be alerted if 
"^DD",119.6,119.6,110,21,2,0)
the albumin value is below the designated level.
"^DD",119.6,119.6,110,"DT")
3060925
"^DD",119.6,119.6,111,0)
ALERT NPO+CLRLIQ^S^Y:YES;N:NO;^1;9^Q
"^DD",119.6,119.6,111,3)
Do you want to be alerted for NPO+CLRLIQ value for this location?
"^DD",119.6,119.6,111,21,0)
^^3^3^3060925^
"^DD",119.6,119.6,111,21,1,0)
This field, if set to YES, indicates that a clinician will be 
"^DD",119.6,119.6,111,21,2,0)
alerted if certain patient with Nothing by Mouth (NPO) + Clear Liquid
"^DD",119.6,119.6,111,21,3,0)
(CLRLIQ) diet needs to be reviewed.
"^DD",119.6,119.6,111,"DT")
3060925
"^DD",119.6,119.6,112,0)
ALSO SEND ALERTS TO^119.66P^^2;0
"^DD",119.6,119.61,0)
BULK NOURISHMENTS SUB-FIELD^NL^1^2
"^DD",119.6,119.61,0,"NM","BULK NOURISHMENTS")

"^DD",119.6,119.61,0,"UP")
119.6
"^DD",119.6,119.61,.01,0)
BULK NOURISHMENTS^MP118'^FH(118,^0;1^Q
"^DD",119.6,119.61,.01,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.61,.01,21,1,0)
This field contains the name of the bulk nourishment (supplemental
"^DD",119.6,119.61,.01,21,2,0)
feeding) item to be delivered to the ward.
"^DD",119.6,119.61,.01,"DT")
2850604
"^DD",119.6,119.61,1,0)
QUANTITY^RNJ2,0^^0;2^K:+X'=X!(X>99)!(X<0)!(X?.E1"."1N.N) X
"^DD",119.6,119.61,1,3)
TYPE A WHOLE NUMBER BETWEEN 0 AND 99
"^DD",119.6,119.61,1,21,0)
^^2^2^2880717^
"^DD",119.6,119.61,1,21,1,0)
This field represents the quantity of the bulk nourishment
"^DD",119.6,119.61,1,21,2,0)
item to be delivered.
"^DD",119.6,119.61,1,"DT")
2850604
"^DD",119.6,119.62,0)
ROOM-BED SUB-FIELD^^1^2
"^DD",119.6,119.62,0,"DT")
2940127
"^DD",119.6,119.62,0,"IX","B",119.62,.01)

"^DD",119.6,119.62,0,"NM","ROOM-BED")

"^DD",119.6,119.62,0,"UP")
119.6
"^DD",119.6,119.62,.01,0)
ROOM-BED^MP405.4'X^DG(405.4,^0;1^I $D(X) S Y=$O(^FH(119.6,"AR",X,0)) I Y>0,Y-DA(1) W *7,"  Room already assigned to ",$P($G(^FH(119.6,+Y,0)),"^",1) K X
"^DD",119.6,119.62,.01,1,0)
^.1
"^DD",119.6,119.62,.01,1,1,0)
119.62^B
"^DD",119.6,119.62,.01,1,1,1)
S ^FH(119.6,DA(1),"R","B",$E(X,1,30),DA)=""
"^DD",119.6,119.62,.01,1,1,2)
K ^FH(119.6,DA(1),"R","B",$E(X,1,30),DA)
"^DD",119.6,119.62,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.6,119.62,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the ROOM-BED field.
"^DD",119.6,119.62,.01,1,2,0)
119.6^AR
"^DD",119.6,119.62,.01,1,2,1)
S ^FH(119.6,"AR",$E(X,1,30),DA(1),DA)=""
"^DD",119.6,119.62,.01,1,2,2)
K ^FH(119.6,"AR",$E(X,1,30),DA(1),DA)
"^DD",119.6,119.62,.01,1,2,"DT")
2911015
"^DD",119.6,119.62,.01,21,0)
^.001^2^2^3020930^^
"^DD",119.6,119.62,.01,21,1,0)
This field is a pointer to File 405.4 and indicates that this room-bed
"^DD",119.6,119.62,.01,21,2,0)
is to be considered part of this Dietetic Ward.
"^DD",119.6,119.62,.01,"DT")
2911030
"^DD",119.6,119.62,1,0)
DELIVERY ORDER^NJ2,0^^0;2^K:+X'=X!(X>99)!(X<1)!(X?.E1"."1N.N) X
"^DD",119.6,119.62,1,3)
Type a Number between 1 and 99, 0 Decimal Digits
"^DD",119.6,119.62,1,21,0)
^^3^3^2940127^
"^DD",119.6,119.62,1,21,1,0)
This value will be used to determine the order of printing labels
"^DD",119.6,119.62,1,21,2,0)
or tickets for items to be delivered.  Thus, the value represents
"^DD",119.6,119.62,1,21,3,0)
the order of delivery for beds on the ward.
"^DD",119.6,119.62,1,"DT")
2940127
"^DD",119.6,119.63,0)
ASSOCIATED MAS WARD SUB-FIELD^^.01^1
"^DD",119.6,119.63,0,"DT")
2911018
"^DD",119.6,119.63,0,"IX","B",119.63,.01)

"^DD",119.6,119.63,0,"NM","ASSOCIATED MAS WARD")

"^DD",119.6,119.63,0,"UP")
119.6
"^DD",119.6,119.63,.01,0)
ASSOCIATED MAS WARD^MP42'X^DIC(42,^0;1^I $D(X) S Y=$O(^FH(119.6,"AW",X,0)) I Y>0,Y-DA(1) W *7,"  Ward already assigned to ",$P($G(^FH(119.6,+Y,0)),"^",1) K X
"^DD",119.6,119.63,.01,1,0)
^.1
"^DD",119.6,119.63,.01,1,1,0)
119.63^B
"^DD",119.6,119.63,.01,1,1,1)
S ^FH(119.6,DA(1),"W","B",$E(X,1,30),DA)=""
"^DD",119.6,119.63,.01,1,1,2)
K ^FH(119.6,DA(1),"W","B",$E(X,1,30),DA)
"^DD",119.6,119.63,.01,1,1,"%D",0)
^^1^1^2911118^
"^DD",119.6,119.63,.01,1,1,"%D",1,0)
This is the normal B cross-reference of the ASSOCIATED MAS WARD field.
"^DD",119.6,119.63,.01,1,2,0)
119.6^AW
"^DD",119.6,119.63,.01,1,2,1)
S ^FH(119.6,"AW",$E(X,1,30),DA(1),DA)=""
"^DD",119.6,119.63,.01,1,2,2)
K ^FH(119.6,"AW",$E(X,1,30),DA(1),DA)
"^DD",119.6,119.63,.01,1,2,"DT")
2911018
"^DD",119.6,119.63,.01,21,0)
^.001^5^5^3030903^^^
"^DD",119.6,119.63,.01,21,1,0)
This field indicates that (a) on admission, a patient with no room-bed,
"^DD",119.6,119.63,.01,21,2,0)
but assigned to this MAS ward, will be considered to be on this Dietetic
"^DD",119.6,119.63,.01,21,3,0)
Ward.
"^DD",119.6,119.63,.01,21,4,0)
(b) For forecasting purposes, the census of this MAS ward will be used
"^DD",119.6,119.63,.01,21,5,0)
in calculating the forecasted census for this Dietetic ward.
"^DD",119.6,119.63,.01,"DT")
2911030
"^DD",119.6,119.64,0)
ASSOCIATED HOSPITAL LOCATION SUB-FIELD^^.01^1
"^DD",119.6,119.64,0,"DT")
3060814
"^DD",119.6,119.64,0,"IX","B",119.64,.01)

"^DD",119.6,119.64,0,"NM","ASSOCIATED HOSPITAL LOCATION")

"^DD",119.6,119.64,0,"UP")
119.6
"^DD",119.6,119.64,.01,0)
ASSOCIATED HOSPITAL LOCATION^MRP44'X^SC(^0;1^I $D(X) S Y=$O(^FH(119.6,"AL",X,0)) I Y>0,Y-DA(1) W "  Hospital location already assigned to ",$P($G(^FH(119.6,+Y,0)),"^",1) K X
"^DD",119.6,119.64,.01,1,0)
^.1
"^DD",119.6,119.64,.01,1,1,0)
119.64^B
"^DD",119.6,119.64,.01,1,1,1)
S ^FH(119.6,DA(1),"L","B",$E(X,1,30),DA)=""
"^DD",119.6,119.64,.01,1,1,2)
K ^FH(119.6,DA(1),"L","B",$E(X,1,30),DA)
"^DD",119.6,119.64,.01,1,2,0)
119.6^AL
"^DD",119.6,119.64,.01,1,2,1)
S ^FH(119.6,"AL",$E(X,1,30),DA(1),DA)=""
"^DD",119.6,119.64,.01,1,2,2)
K ^FH(119.6,"AL",$E(X,1,30),DA(1),DA)
"^DD",119.6,119.64,.01,1,2,"%D",0)
^^1^1^3030903^
"^DD",119.6,119.64,.01,1,2,"%D",1,0)
Cross reference the whole file by field #2.6.
"^DD",119.6,119.64,.01,1,2,"DT")
3030903
"^DD",119.6,119.64,.01,21,0)
^^3^3^3060814^
"^DD",119.6,119.64,.01,21,1,0)
This is a pointer to the Hospital Location file to store the hospital
"^DD",119.6,119.64,.01,21,2,0)
location(s) associated with this Nutrition Location.  Outpatient
"^DD",119.6,119.64,.01,21,3,0)
Locations MUST have an Associated Hospital Location set up.
"^DD",119.6,119.64,.01,"DT")
3060814
"^DD",119.6,119.66,0)
ALSO SEND ALERTS TO SUB-FIELD^^.01^1
"^DD",119.6,119.66,0,"DT")
3060626
"^DD",119.6,119.66,0,"IX","B",119.66,.01)

"^DD",119.6,119.66,0,"NM","ALSO SEND ALERTS TO")

"^DD",119.6,119.66,0,"UP")
119.6
"^DD",119.6,119.66,.01,0)
ALSO SEND ALERTS TO^MP200^VA(200,^0;1^Q
"^DD",119.6,119.66,.01,1,0)
^.1
"^DD",119.6,119.66,.01,1,1,0)
119.66^B
"^DD",119.6,119.66,.01,1,1,1)
S ^FH(119.6,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",119.6,119.66,.01,1,1,2)
K ^FH(119.6,DA(1),2,"B",$E(X,1,30),DA)
"^DD",119.6,119.66,.01,3)
This field may be used to add people who need
"^DD",119.6,119.66,.01,21,0)
^^4^4^3060626^
"^DD",119.6,119.66,.01,21,1,0)
This field may be used to add people who need to receive monitor alerts
"^DD",119.6,119.66,.01,21,2,0)
The monitor alerts will automatically go to the Clinician set up for the
"^DD",119.6,119.66,.01,21,3,0)
ward, but this field will allow additional people to receive the same
"^DD",119.6,119.66,.01,21,4,0)
alerts.  
"^DD",119.6,119.66,.01,"DT")
3060626
"^DIC",119.6,119.6,0)
NUTRITION LOCATION^119.6P
"^DIC",119.6,119.6,0,"GL")
^FH(119.6,
"^DIC",119.6,119.6,"%",0)
^1.005^^0
"^DIC",119.6,119.6,"%D",0)
^1.001^8^8^3060925^^^^
"^DIC",119.6,119.6,"%D",1,0)
This file is a list of wards in the hospital and associated room-beds
"^DIC",119.6,119.6,"%D",2,0)
and contains various dietetic specific information such
"^DIC",119.6,119.6,"%D",3,0)
as the assigned clinician, bulk nourishments for the ward, and
"^DIC",119.6,119.6,"%D",4,0)
which Service Point, Communication Office, and Supplemental Feeding
"^DIC",119.6,119.6,"%D",5,0)
Site is assigned responsibility for the ward.
"^DIC",119.6,119.6,"%D",6,0)

"^DIC",119.6,119.6,"%D",7,0)
This file will also be used to store outpatient locations necessary
"^DIC",119.6,119.6,"%D",8,0)
for the outpatient meals enhancement.
"^DIC",119.6,"B","NUTRITION LOCATION",119.6)

"BLD",6017,6)
^6
**END**
**END**

$TXT Created by DOWNING,TODD at DEVVJJ.FO-ALBANY.MED.VA.GOV  (KIDS) on FRIDAY, 04/25/03 at 14:40
=============================================================================
Run Date: JUN 27, 2003                     Designation: NUR*4*38
Package : NUR - NURSING SERVICE               Priority: Mandatory
Version : 4        SEQ #38                      Status: Released
                  Compliance Date: JUL 28, 2003
=============================================================================

Associated patches: (v)NUR*4*13    <<= must be installed BEFORE `NUR*4*38'
                    (v)NUR*4*14    <<= must be installed BEFORE `NUR*4*38'
                    (v)NUR*4*17    <<= must be installed BEFORE `NUR*4*38'
                    (v)NUR*4*33    <<= must be installed BEFORE `NUR*4*38'
                    (v)NUR*4*34    <<= must be installed BEFORE `NUR*4*38'

Subject: FIXES TO PROFICIENCY RPT, EMPLOYEE ACT/SEP RPT, AND FILE #210.

Category: 
  - Routine
  - Data Dictionary
  - Print Template

Description: 
============

 This patch addresses problems in the Nursing package as reported in 
 the NOIS listed in the ASSOCIATED NOIS below. 
 
 
 ASSOCIATED NOIS:
 ==================
 FGH-0402-32096
 SAJ-0301-71155
 HIN-0601-40523
 UNY-1202-11134
 ANN-0203-41275
 
 
 ASSOCIATED E3R:
 ===============
 N/A
 
 
 NOIS OVERVIEW:
 ==============
 
 1. FGH-0402-32096   EMPLOYEE ACT/SEP REPORT - NO DATA SHOWING
 
 Problem:
 --------
 The Employee Activation/Separation Report option [NURAED-BATSEP] can 
 currently be selected to print for up to the last 120 days.  Data for this 
 report comes from the NURS AMIS Daily Exception Report file (#213.5), which 
 purges records more than 30 days old.
 
 Resolution:
 -----------
 To correct this, the report has been modified to allow selection of up to 
 the last 30 days only.  In addition, paragraph 1 on page 4.7  Section 1 of 
 of the Nursing User Manual Version 4.0 has been updated as follows:
 
   "This report prints a staff activation/separation listing on demand or 
    when queued for a specific date by a user.  A report by day may be  
    printed for any of the last 30 days.  Data comes from the NRS AMIS   
    Daily Exception Report (#213.5) file."
 
 The change page that contains the documentation change can be downloaded as 
 follows:.
 
 NURS_4_P38_UM.PDF     <---contains change page only.
   
 This file is available by FTP at the following IO Field offices:
   
  Office              FTP Address                  Directory
  --------------------------------------------------------------------------
  Albany              ftp.fo-albany.med.va.gov     anonymous.software
  Hines               ftp.fo-hines.med.va.gov      anonymous.software
  Salt Lake City      ftp.fo-slc.med.va.gov        anonymous.software
 
 
 2. SAJ-0301-71155   NURAPR-PROF is not updated
 
 Problem:
 --------
 The Proficiency Reports option [NURAPR-PROF] contains a defect that 
 causes the report to omit records when choosing the Nursing Product Line.  
 Choosing Nursing causes the report to only display the oldest Due Date for 
 each individual within the chosen date range.
 
 Resolution:
 -----------
 The report code has been modified and will now show all Proficiency Due  
 Dates for each individual within the selected date range when the Nursing  
 Product Line is selected.
 
 3. HIN-0601-40523   Prof Exp start date blank prompts a number to be stuffed
 
 Problem:
 --------
 A defect exists in the input transform for the DATE STARTED (#2.1) and 
 DATE ENDED (#2.5) fields of the PROFESSIONAL EXPERIENCE multiple (#22.5) of 
 the NUR STAFF file (#210).  The functionality calls for the DATE STARTED 
 field to be populated with the DATE ENDED value at the time the DATE ENDED 
 value is entered if DATE STARTED is not answered (i.e. null).  Currently, 
 the transform is populating the DATE STARTED field incorrectly in this 
 situation.  The value being "stuffed" into the DATE STARED field is not a 
 date value.
 
 Resolution:
 -----------
 The input transform has been fixed and will now populate DATE STARTED 
 correctly.
 
 4. UNY-1202-11134   SORTING BY COMPUTED FIELD AFTER DI*22*76
 
 Problem:
 --------
 Installation of Fileman patch DI*22*76 introduced a problem with sorting by 
 certain computed fields in the NURS STAFF file (#210) that call   
 $$GET1^DIQ. The process would terminate and return error code 202 -   
 Missing or invalid input parameter.  The following fields were affected:
 
 LOCATION PRIMARY PRODUCT LINE (#3)
 PRIMARY FACILITY (#4)
 SERVICE CATEGORY (#41)
 
 Resolution:
 -----------
 The problem with each of these fields occurs when a null value is 
 encountered in the second subscript (IENS) passed during execution of the  
 DBS call (see below) within the computed expression.  Protection has been  
 added to ensure that the DBS call will not be executed if the entry number  
 does not exist (ie the IENS subscript is null).
 
 $$GET1^DIQ(FILE,IENS,FIELD,FLAGS,TARGET_ROOT,MSG_ROOT)
 
 Modifications were made to EN2^NURSUTO, called from within the computed 
 expressions of these three fields, and to EN11^NURSUT3 and EN13^NURSUT3,  
 called from within EN2^NURSUT0. For PRIMARY FACILITY (#4) only, the  
 computed expression was modified in the Data Dictionary.
 
 5. ANN-0203-41275   Nursing Acuity/Separation Run killed.  Need to 
 restart.
 
 Problem:
 --------
 The Nursing Acuity/Separation-Activation Run (NURAAM-ACU) gets stuck in an 
 infinite loop when multiple classifications with the same date/time exist 
 for a given patient.  This occurred when a patient was classified using the 
 Hemodialysis Patients, Classify/Count (NURAPC-HEM) option immediately after 
 (during the same clock minute) the patient was classified using the  
 Classify Patients Individually (NURAPC-INDPT) option.  
 
 Resolution:
 -----------
 A defect was found in the routine, NURACHDC, that files Hemodialysis and 
 Recovery Room patient classifications.  The defect is located in the call  
 to the function, $$DUPCLASS^NURCUTL(DATEX,DFN), which checks for an  
 existing patient classification with the same date/time.  This was   
 allowing a Hemodialysis or Recovery Room patient classification to be    
 filed with the same date/time as an existing classification for the     
 patient.
 
 PARTICIPATING TEST SITES:
 =========================
  
 HINES, IL
 SAN JUAN, PR
 NORTH FLORIDA/SOUTH GEORGIA
 
 DATA DICTIONARY CHANGES:
 ========================
 
 A change was made to the computed expression for PRIMARY FACILITY field  
 (#4) in the NURS STAFF file (#210).
 
 Before:
 -------
 S DA=+D0 D EN2^NURSUT0 S X=$$GET1^DIQ(4,+$P($G(^SC(+$G(^NURSF(211.8,
 +$G(NOD1),0)),0)),U,4),.01,"I")
 
 After:
 ------
 S DA=+D0 D EN2^NURSUT0 Q:'NOD1  S X=$$GET1^DIQ(4,+$P($G(^SC(+$G(^NURSF
 (211.8,NOD1,0)),0)),U,4),.01,"I")
 
 
 PRINT TEMPLATE:
 ===============
 The compiled print template, NURS-P-STF, for the NURS STAFF file (#210) has 
 been included in the KIDS build.  This will cause the template routine, 
 NURSPA, to be recompiled to incorporate the changes made to the computed  
 expression of the  PRIMARY FACILITY field (#4).
 
 
 ROUTINE SUMMARY:
 ================
 The following is a list of the routine(s) included in this patch.  The
 second line of each of these routine(s) will look like:
 
     <tab>;;4.0;NURSING SERVICE;**[patch list]**;Apr 25, 1997
 
                            CHECK^XTSUMBLD results
 Routine name      Before Patch          After Patch         Patch List
 ============      ============          ===========         ==========
 NURA6K2               12093347             12139561             38
 NURA9K                16944597             16990811           3,13,38
 NURACHDC               9430301              9450808           7,17,38
 NURAFSD               10548101             10540174           2,14,38
 NURSUT0               17704419             16557080        1,16,18,33,34
                                                                  38
 NURSUT3               17411038             16620921            33,38
 
 
 DISTRIBUTION:
 =============
 This patch is exported using KIDS.
 
 
 INSTALLATION INSTRUCTIONS:
 ==========================
 
 This patch may be run with users on the system, but it is recommended 
 that it be queued to run after normal business hours to minimize the
 impact on users of the Nursing package.
 
 Installation will take less than 2 minutes.
 
 1.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu to unload
     the KIDS distribution included with this message.
 
 2.  Review your mapped set.  If any of the routines listed in the ROUTINE   
 
     SUMMARY section are mapped, they should be removed from the mapped set 
     at this time.
 
 3.  From the Kernel Installation and Distribution System Menu, select
     the Installation menu.
 
 4.  From this menu, you may elect to use the following options
     (when prompted for INSTALL NAME, enter NUR*4.0*38):
 
     a.  Compare Transport Global to Current System  - this option will
         allow you to view all changes that will be made when the patch
         is installed.  It compares all components of the patch (routines,
         DDs, templates, etc.).
     b.  Verify Checksums in Transport Global - this option will
         allow you to ensure the integrity of the routines that are in
         the transport global.
     c.  Print Transport Global - this option will allow you to view the
         components of the KIDS build.
     d.  Backup a transport global - This option will create a backup 
         message of any routines exported with this patch.
   
 5.  Use the Install Package(s) option and select the package NUR*4.0*38.
 
 6.  When prompted ' Want KIDS to INHIBIT LOGONs during the install?
     YES//', respond NO.
 
 7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
     Protocols? YES//', respond YES. When prompted to select the options you 
 
     would like to place out of order, enter the following:
 
     NURAPR-PROF           Proficiency Reports
     NURAED-BATSEP         Employee Activation/Separation Report
     NURAED-STF-MENU       Staff Record Edit
     NURAPC-HEM            Hemodialysis Patients, Classify/Count
         
 8.  If routines were unmapped as part of step 2, they should be returned
     to the mapped set once the installation has run to completion.
 
 
 POST INSTALLATION INSTRUCTIONS:
 ===============================
 
 Recompile all local compiled print templates for the NURS STAFF file (#210) 
 that include the PRIMARY FACILITY field (#4).

Routine Information:
====================

Routine Name:
  - NURSUT0


Routine Checksum:

Routine Name:
  - NURAFSD


Routine Checksum:

Routine Name:
  - NURA9K


Routine Checksum:

Routine Name:
  - NURA6K2


Routine Checksum:

Routine Name:
  - NURCHDC


Routine Checksum:

Routine Name:
  - NURSUT3


Routine Checksum:

=============================================================================
User Information:                               
Entered By  : DOWNING,TODD                   Date Entered : NOV 14, 2002
Completed By: PEREZ,CAROL                   Date Completed: JUN 24, 2003
Released By : WHITEHEAD,DONNA               Date Released : JUN 27, 2003
=============================================================================


Packman Mail Message:
=====================

$END TXT

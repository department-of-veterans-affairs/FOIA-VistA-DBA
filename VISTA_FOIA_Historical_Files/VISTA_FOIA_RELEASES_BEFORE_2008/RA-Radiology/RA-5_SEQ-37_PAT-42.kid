Released RA*5*42 SEQ #37
Extracted from mail message
**KIDS**:RA*5.0*42^

**INSTALL NAME**
RA*5.0*42
"BLD",4586,0)
RA*5.0*42^RADIOLOGY/NUCLEAR MEDICINE^0^3030808^y
"BLD",4586,1,0)
^^1^1^3030808^^
"BLD",4586,1,1,0)
Please see patch description of this patch for details.
"BLD",4586,4,0)
^9.64PA^79^2
"BLD",4586,4,79,0)
79
"BLD",4586,4,79,2,0)
^9.641^79.0175^1
"BLD",4586,4,79,2,79.0175,0)
PERF INDIC SMTP E-MAIL ADDRESS  (sub-file)
"BLD",4586,4,79,2,79.0175,1,0)
^9.6411^^
"BLD",4586,4,79,222)
y^n^p^^^^n^^n
"BLD",4586,4,79,224)

"BLD",4586,4,79.1,0)
79.1
"BLD",4586,4,79.1,2,0)
^9.641^79.1^1
"BLD",4586,4,79.1,2,79.1,0)
IMAGING LOCATIONS  (File-top level)
"BLD",4586,4,79.1,2,79.1,1,0)
^9.6411^.01^1
"BLD",4586,4,79.1,2,79.1,1,.01,0)
LOCATION
"BLD",4586,4,79.1,222)
y^n^p^^^^n^^n
"BLD",4586,4,79.1,224)

"BLD",4586,4,"APDD",79,79.0175)

"BLD",4586,4,"APDD",79.1,79.1)

"BLD",4586,4,"APDD",79.1,79.1,.01)

"BLD",4586,4,"B",79,79)

"BLD",4586,4,"B",79.1,79.1)

"BLD",4586,"KRN",0)
^9.67PA^8989.52^19
"BLD",4586,"KRN",.4,0)
.4
"BLD",4586,"KRN",.401,0)
.401
"BLD",4586,"KRN",.402,0)
.402
"BLD",4586,"KRN",.402,"NM",0)
^9.68A^1^1
"BLD",4586,"KRN",.402,"NM",1,0)
RA LOCATION PARAMETERS    FILE #79.1^79.1^0
"BLD",4586,"KRN",.402,"NM","B","RA LOCATION PARAMETERS    FILE #79.1",1)

"BLD",4586,"KRN",.403,0)
.403
"BLD",4586,"KRN",.5,0)
.5
"BLD",4586,"KRN",.84,0)
.84
"BLD",4586,"KRN",3.6,0)
3.6
"BLD",4586,"KRN",3.8,0)
3.8
"BLD",4586,"KRN",9.2,0)
9.2
"BLD",4586,"KRN",9.8,0)
9.8
"BLD",4586,"KRN",9.8,"NM",0)
^9.68A^1^1
"BLD",4586,"KRN",9.8,"NM",1,0)
RASYS^^0^B25529542
"BLD",4586,"KRN",9.8,"NM","B","RASYS",1)

"BLD",4586,"KRN",19,0)
19
"BLD",4586,"KRN",19.1,0)
19.1
"BLD",4586,"KRN",101,0)
101
"BLD",4586,"KRN",409.61,0)
409.61
"BLD",4586,"KRN",771,0)
771
"BLD",4586,"KRN",870,0)
870
"BLD",4586,"KRN",8989.51,0)
8989.51
"BLD",4586,"KRN",8989.52,0)
8989.52
"BLD",4586,"KRN",8994,0)
8994
"BLD",4586,"KRN","B",.4,.4)

"BLD",4586,"KRN","B",.401,.401)

"BLD",4586,"KRN","B",.402,.402)

"BLD",4586,"KRN","B",.403,.403)

"BLD",4586,"KRN","B",.5,.5)

"BLD",4586,"KRN","B",.84,.84)

"BLD",4586,"KRN","B",3.6,3.6)

"BLD",4586,"KRN","B",3.8,3.8)

"BLD",4586,"KRN","B",9.2,9.2)

"BLD",4586,"KRN","B",9.8,9.8)

"BLD",4586,"KRN","B",19,19)

"BLD",4586,"KRN","B",19.1,19.1)

"BLD",4586,"KRN","B",101,101)

"BLD",4586,"KRN","B",409.61,409.61)

"BLD",4586,"KRN","B",771,771)

"BLD",4586,"KRN","B",870,870)

"BLD",4586,"KRN","B",8989.51,8989.51)

"BLD",4586,"KRN","B",8989.52,8989.52)

"BLD",4586,"KRN","B",8994,8994)

"BLD",4586,"QUES",0)
^9.62^^
"BLD",4586,"REQB",0)
^9.611^1^1
"BLD",4586,"REQB",1,0)
RA*5.0*37^2
"BLD",4586,"REQB","B","RA*5.0*37",1)

"FIA",79)
RAD/NUC MED DIVISION
"FIA",79,0)
^RA(79,
"FIA",79,0,0)
79P
"FIA",79,0,1)
y^n^p^^^^n^^n
"FIA",79,0,10)

"FIA",79,0,11)

"FIA",79,0,"RLRO")

"FIA",79,0,"VR")
5.0^RA
"FIA",79,79)
1
"FIA",79,79,175)

"FIA",79,79.0175)
0
"FIA",79.1)
IMAGING LOCATIONS
"FIA",79.1,0)
^RA(79.1,
"FIA",79.1,0,0)
79.1IP
"FIA",79.1,0,1)
y^n^p^^^^n^^n
"FIA",79.1,0,10)

"FIA",79.1,0,11)

"FIA",79.1,0,"RLRO")

"FIA",79.1,0,"VR")
5.0^RA
"FIA",79.1,79.1)
1
"FIA",79.1,79.1,.01)

"KRN",.402,222,-1)
0^1
"KRN",.402,222,0)
RA LOCATION PARAMETERS^3030730.085^^79.1^^^3030805
"KRN",.402,222,"%D",0)
^^2^2^2940607^
"KRN",.402,222,"%D",1,0)
This input template is used for the entering of the imaging location
"KRN",.402,222,"%D",2,0)
parameters.
"KRN",.402,222,"DIAB",1,1,79.1135,0)
ALL
"KRN",.402,222,"DIAB",1,1,79.12,0)
ALL
"KRN",.402,222,"DIAB",1,1,79.13,0)
ALL
"KRN",.402,222,"DR",1,79.1)
I $D(^RA(79.1,DA,"DIV")),$D(^RA(79,+^("DIV"),.1)) S DIV=^(.1);S:$D(^RA(79.1,DA,0)) RAFLH=^(0),RAJAC=$P(RAFLH,U,5),RARPT=$P(RAFLH,U,10),RAREQPRT=$P(RAFLH,U,16),RAFLH=$P(RAFLH,U,3);
"KRN",.402,222,"DR",1,79.1,1)
W !!,"Flash Card Parameters:",!,"----------------------";I $D(DIV),$P(DIV,U,2)="Y" W !?5,"As specified in the division parameters, one flash card will",!?5,"be printed for each new registered exam.",! S Y="@10";2;@10;7;
"KRN",.402,222,"DR",1,79.1,2)
I $D(RAFLH),RAFLH]"" W !!,"The default flash card printer for this location is `",$$DEV^RAUTL19(RAFLH),"'." S Y="@15";W !!,"No default flash card printer has been assigned. Contact IRM.";@15;
"KRN",.402,222,"DR",1,79.1,3)
W !!,"Jacket Label Parameters:",!,"------------------------";I $D(DIV),$P(DIV,U,8)="N" W !?5,"As specified in the division parameters, no jacket labels will",!?5,"be printed automatically upon a patient visit.",! S Y="@20";4;@20;
"KRN",.402,222,"DR",1,79.1,4)
11;I $D(RAJAC),RAJAC]"" W !!,"The default jacket label printer for this location is `",$$DEV^RAUTL19(RAJAC),"'." S Y="@25";W !!,"No default jacket label printer has been assigned. Contact IRM.";@25;
"KRN",.402,222,"DR",1,79.1,5)
W !!,"Exam Label Parameters:",!,"----------------------";8//1;9;W !!,"Exam label printer is always the same as the flash card printer.";W !!,"Order Entry Parameters:",!,"----------------------";
"KRN",.402,222,"DR",1,79.1,6)
I $D(RAREQPRT),RAREQPRT]"" W !!,"The default request printer for this location is `",$$DEV^RAUTL19(RAREQPRT),"'." S Y="@30";W !!,"No default request printer has been assigned. Contact IRM.";@30;
"KRN",.402,222,"DR",1,79.1,7)
W !!,"Report Parameters:",!,"------------------";12;13;14//10;15//70;18;26;I $D(RARPT),RARPT]"" W !!,"The default report printer for this location is `",$$DEV^RAUTL19(RARPT),"'." S Y="@35";
"KRN",.402,222,"DR",1,79.1,8)
W !!,"No default report printer has been assigned. Contact IRM.";@35;W !!,"Cameras/Equip/Rooms Used by this Location:",!,"------------------------------------------";100;Q;W !!;
"KRN",.402,222,"DR",1,79.1,9)
W !,"Default CPT Modifiers used by this Location:",!,"--------------------------------------------";D:$T(DISDCM^RACPTMSC)]"" DISDCM^RACPTMSC;135;W !;N RALERT,RALINE;S RALERT="Recipients of the 'Stat' Alert for this Location:";
"KRN",.402,222,"DR",1,79.1,10)
S $P(RALINE,"-",($L(RALERT)+1))="";W !!,RALERT,!,RALINE;150;W !!;I '$O(^RA(79.1,DA,"REC",0)) S Y="@40";20;@40;17//no;19;6;21//0;22;
"KRN",.402,222,"DR",2,79.1135)
.01
"KRN",.402,222,"DR",2,79.12)
.01
"KRN",.402,222,"DR",2,79.13)
.01
"MBREQ")
0
"ORD",7,.402)
.402;7;;;EDEOUT^DIFROMSO(.402,DA,"",XPDA);FPRE^DIFROMSI(.402,"",XPDA);EPRE^DIFROMSI(.402,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.402,DA,"",XPDA);DEL^DIFROMSK(.402,"",%)
"ORD",7,.402,0)
INPUT TEMPLATE
"PKG",18,-1)
1^1
"PKG",18,0)
RADIOLOGY/NUCLEAR MEDICINE^RA^REGISTERS PATIENTS,RECORDS EXAMS,PROFILES,AMIS REPORTS
"PKG",18,20,0)
^9.402P^^
"PKG",18,22,0)
^9.49I^1^1
"PKG",18,22,1,0)
5.0^3011017^2980407^50
"PKG",18,22,1,"PAH",1,0)
42^3030808
"PKG",18,22,1,"PAH",1,1,0)
^^1^1^3030808
"PKG",18,22,1,"PAH",1,1,1,0)
Please see patch description of this patch for details.
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
YES
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
YES
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
YES
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
1
"RTN","RASYS")
0^1^B25529542
"RTN","RASYS",1,0)
RASYS ;HISC/CAH AISC/TMP-System Definition Menu ;11/13/96  14:17
"RTN","RASYS",2,0)
 ;;5.0;Radiology/Nuclear Medicine;**42**;Mar 16, 1998
"RTN","RASYS",3,0)
1 ;;Division Parameter Set-up
"RTN","RASYS",4,0)
 S DIC="^RA(79,",DIC(0)="AELMQ",DIC("A")="Select Division: ",DLAYGO=79
"RTN","RASYS",5,0)
 D ^DIC K DIC,DLAYGO I Y<0 K X,Y G Q1
"RTN","RASYS",6,0)
 S DA=+Y,DIE="^RA(79,",DR="[RA DIVISION PARAMETERS]",RAXIT=0 D ^DIE
"RTN","RASYS",7,0)
 I $O(^RA(79,DA,"L",0)) D
"RTN","RASYS",8,0)
 . D:'$D(IOF) HOME^%ZIS W @IOF S RAINC=0
"RTN","RASYS",9,0)
 . F  S RAINC=$O(^RA(79,DA,"L",RAINC)) Q:RAINC'>0  D  Q:RAXIT
"RTN","RASYS",10,0)
 .. D EN1^RASYS1($P($G(^RA(79,DA,"L",RAINC,0)),"^"))
"RTN","RASYS",11,0)
 .. Q
"RTN","RASYS",12,0)
 . Q
"RTN","RASYS",13,0)
 K %,%X,%Y,C,D0,DA,DE,DQ,DIE,DR,RAINC,RAXIT D Q1 W ! G 1
"RTN","RASYS",14,0)
Q1 K D,DDC,DG,DI,DIG,DIH,DIU,DIV,DIW,DISYS,DST,DUOUT,I,J,POP
"RTN","RASYS",15,0)
 Q
"RTN","RASYS",16,0)
 ;
"RTN","RASYS",17,0)
2 ;;Print Division Parameter List
"RTN","RASYS",18,0)
 S DIC="^RA(79,",L=0,FLDS="[RA IMAGE DIV LIST]",BY="#DIVISION",FR="",TO="" D EN1^DIP K FR,TO,FLDS,BY,DHD Q
"RTN","RASYS",19,0)
 ;
"RTN","RASYS",20,0)
3 ;;Location Parameter Set-up
"RTN","RASYS",21,0)
 S DIC="^RA(79.1,",DIC(0)="AELMQZ",DIC("A")="Select Location: ",DLAYGO=79.1
"RTN","RASYS",22,0)
 D ^DIC K DIC,DLAYGO I Y<0 D KILL3 Q  ; DIC(0)="AELMQZ" patch 42 'Z' added
"RTN","RASYS",23,0)
 I $P(Y,U,3)=1 W !!," *   Since you have added a new Imaging Location, remember to assign     * ",!," *   it to a Rad/Nuc Med division through Division Parameter Set-up.     * ",!
"RTN","RASYS",24,0)
 W:$P(Y,U,3)'=1 ! W !,"Imaging Location: ",Y(0,0) ; patch 42
"RTN","RASYS",25,0)
 S DA=+Y,DIE="^RA(79.1,",DR="[RA LOCATION PARAMETERS]",RAXIT=0 D ^DIE
"RTN","RASYS",26,0)
 D:'$D(IOF) HOME^%ZIS W @IOF D EN1^RASYS1(DA) D KILL3 W ! G 3
"RTN","RASYS",27,0)
KILL3 K %,%X,%W,%Y,D,E,DE,DA,D0,RAREQPRT,DIE,DIV,DQ,DR,RAFLH,RAJAC,RARPT,RAXIT,X,Y
"RTN","RASYS",28,0)
 K C,DDH,DI,DIG,DIH,DISYS,DIU,DIW,DIWI,I,POP,RALERT,RALINE
"RTN","RASYS",29,0)
 Q
"RTN","RASYS",30,0)
 ;
"RTN","RASYS",31,0)
4 ;;Imaging Location Parameter List
"RTN","RASYS",32,0)
 N RAINA S RAINA=0 K DIR,DIROUT,DIRUT,DTOUT,DUOUT
"RTN","RASYS",33,0)
 S DIR(0)="Y",DIR("B")="No"
"RTN","RASYS",34,0)
 S DIR("A")="Do you wish to include inactive Imaging Locations"
"RTN","RASYS",35,0)
 S DIR("?",1)="Enter 'Yes' if inactive Imaging Locations are to be"
"RTN","RASYS",36,0)
 S DIR("?")="included, 'No' if only active locations are desired."
"RTN","RASYS",37,0)
 D ^DIR S:$D(DIRUT) RAINA=-1
"RTN","RASYS",38,0)
 K DIR,DIROUT,DIRUT,DTOUT,DUOUT G:RAINA<0 KILL
"RTN","RASYS",39,0)
 S RAINA=Y ; 1 if inactives are included, 0 if only actives included
"RTN","RASYS",40,0)
 N RAX,RAY S RAX=$$LOC^RAUTL12(RAINA) G:'RAX KILL
"RTN","RASYS",41,0)
 S RAY="Rad/Nuc Med Imaging Location Parameter List"
"RTN","RASYS",42,0)
 S DIC="^RA(79.1,",BY="[RA IMAGE LOC LIST]",L=0
"RTN","RASYS",43,0)
 S DIS(0)="I $$INA^RASYS(D0)"
"RTN","RASYS",44,0)
 S RAPOP=$$ZIS(RAY)
"RTN","RASYS",45,0)
 I +RAPOP D HOME^%ZIS,KILL Q
"RTN","RASYS",46,0)
 I +$P(RAPOP,"^",2) D KILL Q  ; Q'ed off in ZIS subroutine
"RTN","RASYS",47,0)
 E  D ENTASK ; not queued, to run now
"RTN","RASYS",48,0)
 Q
"RTN","RASYS",49,0)
 ;
"RTN","RASYS",50,0)
5 ;;Camera/Equip/Room Entry/Edit
"RTN","RASYS",51,0)
 S DIC="^RA(78.6,",DIC(0)="AELMQ",DIC("A")="Select Camera/Equip/Room: ",DLAYGO=78.6 D ^DIC K DIC,DLAYGO I Y<0 K X,Y D KILL5 Q
"RTN","RASYS",52,0)
 S DA=+Y,DIE="^RA(78.6,",DR=".01:99" D ^DIE K %,D0,DA,DE,DQ,DIE,DR,X,Y D KILL5 W ! G 5
"RTN","RASYS",53,0)
KILL5 K D,DG,DI,DISYS,I,POP Q
"RTN","RASYS",54,0)
 ;
"RTN","RASYS",55,0)
6 ;;List of Camera/Equip/Rooms
"RTN","RASYS",56,0)
 S DIC="^RA(79.1,",L=0,BY="[RA EXAM ROOM LIST]"
"RTN","RASYS",57,0)
 S DIOEND="D NOLOC^RASYS" D EN1^DIP
"RTN","RASYS",58,0)
 K DIOEND,FLDS,BY,DHD,TO,FR,RANOLOC,POP
"RTN","RASYS",59,0)
 Q
"RTN","RASYS",60,0)
ENTASK ; Entry point for the tasked job.
"RTN","RASYS",61,0)
 S RAIOP=ION_";"_IOST_";"_IOM_";"_IOSL,IOP=RAIOP
"RTN","RASYS",62,0)
 S:$E(IOP,1,3)="HFS" %ZIS("HFSNAME")=IO,%ZIS("HFSMODE")="W"
"RTN","RASYS",63,0)
 D EN1^DIP
"RTN","RASYS",64,0)
 D KILL^RASYS
"RTN","RASYS",65,0)
 Q
"RTN","RASYS",66,0)
INA(RAD0) ; Determine if an Imaging Location is inactive.
"RTN","RASYS",67,0)
 ; Input : 'RAD0'  ien of file 79.1
"RTN","RASYS",68,0)
 ; Output: '1' if the location is valid, '0' if invalid
"RTN","RASYS",69,0)
 N RA791 S RA791=$G(^RA(79.1,D0,0))
"RTN","RASYS",70,0)
 S RA791(1)=$$XTERNAL^RAUTL5($P(RA791,"^"),$P($G(^DD(79.1,.01,0)),"^",2))
"RTN","RASYS",71,0)
 Q:'($D(^TMP($J,"RA L-TYPE",RA791(1),D0))#2) 0 ; not user selected
"RTN","RASYS",72,0)
 Q 1
"RTN","RASYS",73,0)
KILL ; Kill and quit
"RTN","RASYS",74,0)
 K ^TMP($J,"RA L-TYPE"),%X,%XX,%Y,%YY
"RTN","RASYS",75,0)
 K %ZIS,BY,DHD,DIC,DIS,DTOUT,DUOUT,FLDS,FR,L,POP,RAIOP,RAINA,RAPOP,TO
"RTN","RASYS",76,0)
 K X,Y,ZTDESC,ZTRTN,ZTSAVE,POP,I
"RTN","RASYS",77,0)
 Q
"RTN","RASYS",78,0)
NOLOC ;print camera/equip/rm's not assigned to any imaging loc
"RTN","RASYS",79,0)
 I $D(RANOLOC) Q
"RTN","RASYS",80,0)
 N R1,R2,R3,RACAM,R4 S R4=0
"RTN","RASYS",81,0)
 S R1=0 F  S R1=$O(^RA(78.6,R1)) Q:'R1  S RACAM(R1)=""
"RTN","RASYS",82,0)
 S R2=0 F  S R2=$O(^RA(79.1,R2)) Q:'R2  S R3=0 F  S R3=$O(^RA(79.1,R2,"R",R3)) Q:'R3  D
"RTN","RASYS",83,0)
 . S R1=$G(^RA(79.1,R2,"R",R3,0))
"RTN","RASYS",84,0)
 . K RACAM(R1)
"RTN","RASYS",85,0)
 S R1=0 F  S R1=$O(RACAM(R1)) W:'R1 # Q:'R1  D
"RTN","RASYS",86,0)
 . W:R4 ! S R4=1 W ?3,$E($P(^RA(78.6,R1,0),U),1,15),?20,"**UNASSIGNED**",?45,"**UNASSIGNED**"
"RTN","RASYS",87,0)
 S RANOLOC=1 Q
"RTN","RASYS",88,0)
INACT ; write inactive flag, called by 'List of Camera/Equip/Rms' option
"RTN","RASYS",89,0)
 Q:$G(DDDD0)=""
"RTN","RASYS",90,0)
 N RA1,RA2 S RA1=$O(^RA(78.6,"B",DDDD0,0)),RA2=0
"RTN","RASYS",91,0)
 I RA1 I $G(^RA(78.6,RA1,0))]"",$P(^(0),U,3)]"" S RA2=1
"RTN","RASYS",92,0)
 W ?0,$S(RA2:"(*)",1:"   "),$E(DDDD0,1,15)
"RTN","RASYS",93,0)
 Q
"RTN","RASYS",94,0)
ZIS(RA) ; Select a device.
"RTN","RASYS",95,0)
 ; 'RAPOP'=device selection successful (1:no) ^ '^%ZTLOAD' called (1:yes)
"RTN","RASYS",96,0)
 K %ZIS,IOP S %ZIS="NMQ"
"RTN","RASYS",97,0)
 W ! S %ZIS("A")="DEVICE: " D ^%ZIS
"RTN","RASYS",98,0)
 S RAPOP=POP_"^"
"RTN","RASYS",99,0)
 I '+RAPOP,($D(IO("Q"))) D
"RTN","RASYS",100,0)
 . K IO("Q") S ZTDESC=RA,ZTRTN="ENTASK^RASYS"
"RTN","RASYS",101,0)
 . D ZTSAVE,^%ZTLOAD S $P(RAPOP,"^",2)=1
"RTN","RASYS",102,0)
 . I +$G(ZTSK) W !?3,"Request Queued, Task #: ",$G(ZTSK)
"RTN","RASYS",103,0)
 . D HOME^%ZIS
"RTN","RASYS",104,0)
 . Q
"RTN","RASYS",105,0)
 Q RAPOP
"RTN","RASYS",106,0)
ZTSAVE ; Save off variables for the tasked job.
"RTN","RASYS",107,0)
 N I F I="BY","DIC","FLDS","FR","L","RAINA","TO" S ZTSAVE(I)=""
"RTN","RASYS",108,0)
 S:($D(DIS)\10) ZTSAVE("DIS(")=""
"RTN","RASYS",109,0)
 S:($D(DHD)#2) ZTSAVE("DHD")=""
"RTN","RASYS",110,0)
 S:($D(^TMP($J,"RA L-TYPE"))\10) ZTSAVE("^TMP($J,""RA L-TYPE"",")=""
"RTN","RASYS",111,0)
 Q
"RTN","RASYS",112,0)
RDEV ; Select a Resource Device for a division.  This subroutine is linked
"RTN","RASYS",113,0)
 ; directly to the option: RA RESOURCE DEVICE.  This option is a menu
"RTN","RASYS",114,0)
 ; item under the RA SITEMANAGER menu option.
"RTN","RASYS",115,0)
 N %,%X,%Y,C,D,D0,DA,DDER,DDH,DI,DIC,DIE,DQ,DR,X,Y S (DIC,DIE)="^RA(79,"
"RTN","RASYS",116,0)
 S DIC(0)="QEAMZ",DIC("A")="Select a Rad/Nuc Med Division: " D ^DIC
"RTN","RASYS",117,0)
 G:Y'>0 QRDEV S DA=+Y,DR="D RDEVHLP^RASYS;100" D ^DIE
"RTN","RASYS",118,0)
QRDEV K DISYS,DST,I,POP
"RTN","RASYS",119,0)
 Q
"RTN","RASYS",120,0)
RDEVHLP ; Display the Description Text for the Resource Device (#100) field
"RTN","RASYS",121,0)
 ; on the Rad/Nuc Med Division file.
"RTN","RASYS",122,0)
 N RA100DES,Z S Z=0 D FIELD^DID(79,100,"","DESCRIPTION","RA100DES")
"RTN","RASYS",123,0)
 Q:'$D(RA100DES("DESCRIPTION"))  W !
"RTN","RASYS",124,0)
 F  S Z=$O(RA100DES("DESCRIPTION",Z)) Q:Z'>0  D
"RTN","RASYS",125,0)
 . W !,$G(RA100DES("DESCRIPTION",Z))
"RTN","RASYS",126,0)
 . Q
"RTN","RASYS",127,0)
 W !
"RTN","RASYS",128,0)
 Q
"UP",79,79.0175,-1)
79^1
"UP",79,79.0175,0)
79.0175
"VER")
8.0^22
"^DD",79,79,175,0)
PERF INDIC SMTP E-MAIL ADDRESS^79.0175^^1;0
"^DD",79,79,175,"DT")
3030808
"^DD",79,79.0175,0)
PERF INDIC SMTP E-MAIL ADDRESS SUB-FIELD^^.01^1
"^DD",79,79.0175,0,"DT")
3030808
"^DD",79,79.0175,0,"IX","B",79.0175,.01)

"^DD",79,79.0175,0,"NM","PERF INDIC SMTP E-MAIL ADDRESS")

"^DD",79,79.0175,0,"UP")
79
"^DD",79,79.0175,.01,0)
PERF INDC SMTP E-MAIL ADDRESS^MF^^0;1^K:$L(X)>60!($L(X)<12) X
"^DD",79,79.0175,.01,.1)
PERF INDIC SMTP MAIL ADDRESS
"^DD",79,79.0175,.01,1,0)
^.1
"^DD",79,79.0175,.01,1,1,0)
79.0175^B
"^DD",79,79.0175,.01,1,1,1)
S ^RA(79,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",79,79.0175,.01,1,1,2)
K ^RA(79,DA(1),1,"B",$E(X,1,30),DA)
"^DD",79,79.0175,.01,3)
Enter "??" for more info on SMTP addrseses.  Length of address must be between 12 and 60 characters.
"^DD",79,79.0175,.01,21,0)
^.001^30^30^3030808^^^
"^DD",79,79.0175,.01,21,1,0)
  
"^DD",79,79.0175,.01,21,2,0)
This is the SMTP address for the OUTLOOK mail group or person who should
"^DD",79,79.0175,.01,21,3,0)
receive the Radiology Performance Indicator Summary Report.  The SMTP 
"^DD",79,79.0175,.01,21,4,0)
address is the form of the e-mail address that a user from the Internet 
"^DD",79,79.0175,.01,21,5,0)
would use when sending e-mail to Outlook.
"^DD",79,79.0175,.01,21,6,0)
 
"^DD",79,79.0175,.01,21,7,0)
The SMTP address of the mail group or user can be found as follows from 
"^DD",79,79.0175,.01,21,8,0)
the OUTLOOK Address Book:
"^DD",79,79.0175,.01,21,9,0)
   1. Double click on the name of the Mail Group or person
"^DD",79,79.0175,.01,21,10,0)
      from the Outlook Address Book
"^DD",79,79.0175,.01,21,11,0)
   2. Select the "E-mail Addresses" tab
"^DD",79,79.0175,.01,21,12,0)
   3. The SMTP address is displayed after the first "SMTP:" line.
"^DD",79,79.0175,.01,21,13,0)
      It will have the format <name>@med.va.gov
"^DD",79,79.0175,.01,21,14,0)
 
"^DD",79,79.0175,.01,21,15,0)
For example:
"^DD",79,79.0175,.01,21,16,0)
   In the address book, there's a group name called "VAH FAKE Report".
"^DD",79,79.0175,.01,21,17,0)
   To find that group name's SMTP address from OUTLOOK:
"^DD",79,79.0175,.01,21,18,0)
      1. Tools --> Address Book
"^DD",79,79.0175,.01,21,19,0)
      2. Enter  VAH FAKE Report  inside the box called
"^DD",79,79.0175,.01,21,20,0)
           "Type Name or Select from List:"
"^DD",79,79.0175,.01,21,21,0)
      3. A new screen entitled "VAH FAKE Report Properties" should be 
"^DD",79,79.0175,.01,21,22,0)
            displayed.
"^DD",79,79.0175,.01,21,23,0)
      4. Click on the tab entitled "E-mail Addresses"
"^DD",79,79.0175,.01,21,24,0)
      5. A new box should be displayed.
"^DD",79,79.0175,.01,21,25,0)
      6. The "SMTP:" line would have the SMTP address for "VAH FAKE
"^DD",79,79.0175,.01,21,26,0)
         Report".  It would be something like:  VAHFAKEReport@va.med.gov
"^DD",79,79.0175,.01,21,27,0)
         Note:
"^DD",79,79.0175,.01,21,28,0)
         If there is an "SMTP:" line and another "smtp:" line, use
"^DD",79,79.0175,.01,21,29,0)
         the SMTP address from the all caps "SMTP:" line.
"^DD",79,79.0175,.01,21,30,0)
      7. The e-mail address you enter MUST end in @med.va.gov
"^DD",79,79.0175,.01,"DT")
3030808
"^DD",79.1,79.1,.01,0)
LOCATION^R*P44I^SC(^0;1^S DIC("S")="I $P(^(0),U,3)=""C"",'$D(^(""I"")),($D(^RAMIS(71.5,""B"",+$P(^(0),U,7))))" D ^DIC K DIC S DIC=DIE,X=+Y K:Y<0 X
"^DD",79.1,79.1,.01,.1)
IMAGING LOCATION
"^DD",79.1,79.1,.01,1,0)
^.1^^-1
"^DD",79.1,79.1,.01,1,1,0)
79.1^B
"^DD",79.1,79.1,.01,1,1,1)
S ^RA(79.1,"B",$E(X,1,30),DA)=""
"^DD",79.1,79.1,.01,1,1,2)
K ^RA(79.1,"B",$E(X,1,30),DA)
"^DD",79.1,79.1,.01,1,1,3)
DO NOT DELETE
"^DD",79.1,79.1,.01,1,1,"%D",0)
^^1^1^2950111^^
"^DD",79.1,79.1,.01,1,1,"%D",1,0)
     Regular 'B' cross reference assigned by FileMan.
"^DD",79.1,79.1,.01,3)
Select the appropriate location.
"^DD",79.1,79.1,.01,10)
RAD/NUC MED COORDINATOR
"^DD",79.1,79.1,.01,12)
Entry must be an active "Clinic" type with a valid imaging Stop Code in the Hospital Location file.
"^DD",79.1,79.1,.01,12.1)
S DIC("S")="I $P(^(0),U,3)=""C"",'$D(^(""I"")),($D(^RAMIS(71.5,""B"",+$P(^(0),U,7))))"
"^DD",79.1,79.1,.01,21,0)
^.001^11^11^3030805^^^^
"^DD",79.1,79.1,.01,21,1,0)
This field points to the Hospital Location File, and contains the name of
"^DD",79.1,79.1,.01,21,2,0)
this location.  The Hospital Location pointed to should be a COUNT clinic,
"^DD",79.1,79.1,.01,21,3,0)
with a type of 'CLINIC', and should be a clinic that prohibits making
"^DD",79.1,79.1,.01,21,4,0)
appointments or creating appointment patterns.  The Stop Code of the
"^DD",79.1,79.1,.01,21,5,0)
clinic in file #44 should be a valid imaging stop code (i.e. an entry in
"^DD",79.1,79.1,.01,21,6,0)
file #71.5) and should match the DSS ID field #22 of the Imaging Location
"^DD",79.1,79.1,.01,21,7,0)
in file #79.1.  The Institution of this clinic in file #44 should match
"^DD",79.1,79.1,.01,21,8,0)
the Rad/Nuc Med Division to which this Imaging Location is assigned.
"^DD",79.1,79.1,.01,21,9,0)
 
"^DD",79.1,79.1,.01,21,10,0)
Coordination with MAS personnel is necessary to add locations to the
"^DD",79.1,79.1,.01,21,11,0)
Hospital Location file.
"^DD",79.1,79.1,.01,23,0)
^.001^1^1^3030805^^
"^DD",79.1,79.1,.01,23,1,0)
Cannot edit this field through FileMan, part of patch RA*5*42.
"^DD",79.1,79.1,.01,"DEL",1,0)
I 1 W !?5,$C(7),"Imaging Locations CANNOT be deleted!"
"^DD",79.1,79.1,.01,"DT")
3030805
**END**
**END**
